# StackOverflow 问答 13623000-13623999

# php - php搜索全部返回

> ID：13623003
> 
> 赞同：-1
> 
> 时间：2012-11-29T09:50:56.933
> 
> 标签：php, html, mysql

好的，我想要返回用户已经在一页上提交的所有数据。所以基本上他们已经登录了，所以我应该知道那里的电子邮件地址，我只想提取所有 mysql 数据并显示该电子邮件地址下的所有数据

所以基本上 mysql 将电子邮件作为第一列，然后是一堆垃圾，如果电子邮件列等于他们登录的同一电子邮件，我想显示所有垃圾

这是我的代码我在正确的轨道上但不完全在那里

```
 <?php
    session_start();
    include 'config.php';
    $_SESSION['Email']=$Email;

    mysql_select_db("DATABASEJUNK") or die ("Couldn't find database.");

    $query = mysql_query("SELECT * FROM DATABASELIST WHERE Email='$Email'");

    $numrows = mysql_num_rows($query);

    while ($row = mysql_fetch_assoc($query))
      echo $row['Url'];

 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:54:59.280

我认为你需要的是类似的东西

```
while ($row = mysql_fetch_assoc($query)){
  foreach($row as $value){
     echo $value;
  }
} 
```

如果您当然需要将其放在脚本的正确部分。或将 $value 的输出保存到数组

```
$allUsers = new Array();
while ($row = mysql_fetch_assoc($query)){
  $user = new Array();
  foreach($row as $key => $value){
     $user[$key] = $value;
  }
  $allUsers[] = $user;
} 
```

这为您提供了一个包含所有用户的数组......每个用户都有自己的数据作为键！如果您只想要 1 个用户忘记 $allUser 数组并保留其余的（如果 mysql_num_rows() == 1）

# crystal-reports - 指定水晶报表图表轴中的小数位数

> ID：13623008
> 
> 赞同：0
> 
> 时间：2012-11-29T09:51:24.710
> 
> 标签：crystal-reports, charts, formatting, crystal-reports-xi, axis-labels

我只是瞎了眼还是这个基本功能非常隐蔽？

我正在 Crystal Reports XI 中创建一个图表，该图表在 x 轴上有值，在 y 轴上有不同的计数（又名直方图）。

问题是这样的：即使数字是整数，我在 x 轴值上也有两位小数。如何指定 x 轴的小数位数？右键单击没有格式选项，因为右键单击数据字段通常会这样做。

编辑：

这是图表专家中轴选项卡的外观。x 轴没有数字格式或自动范围。

![Crystal Reports 图表专家的轴选项卡。](../Images/9f231742089b745785b08267bb19f0f2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:07:41.790

Crystal Xi，图表专家，制表轴，取消勾选自动范围，并选择数字格式（截图拒绝新用户，对不起队友）

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T09:07:51.697

为水晶报表 13 编写水晶报表公式

```
ToText({fieldname}, 0, "") 
```

`0`截断小数，并`""`删除千位分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:54:22.807

当我在最新版本的 Crystal 上时，它可能已经改变。你的看起来不像吗？

![在此处输入图像描述](../Images/ac7f1f21d4aa66b10d18284232b44752.png)

# php - Ajax 表单发布，表单元素名称为数组

> ID：13623014
> 
> 赞同：1
> 
> 时间：2012-11-29T09:51:41.497
> 
> 标签：php, jquery, ajax, post

我有一个元素名称为多维数组的表单，例如

```
 <form method="post" id="formDealOptions" name="formDealOptions">
  <table>
   <tr class="dealOptionRow saved"> 
     <td>                  
     <input type="text" name="dealOptionsGroup[1][dealOptionName]" value="dealOptionName1">
    </td>
    <td>                    
     <input type="text" name="dealOptionsGroup[2][dealOptionName]" value="dealOptionName2">
    </td>  
  </tr>
 </table>
</form> 
```

如果我使用普通表单提交发布此表单，$_POST 数组就像

```
Array(
  'dealOptionsGroup' => Array( '1' => Array('dealOptionName' => dealOptionName1 )
                               '2' => Array('dealOptionName' => dealOptionName1 )
                             )
  ) 
```

这很好，我已经使用这个数组结构创建了服务器端验证。但是什么时候通过 ajax 调用使用 serializeArray() 提交相同的表单

```
var data = new Object();
data.postValues = $('#formDealOptions').serializeArray();   
$.ajax({
    type: "POST",
    url: GLOBAL_BASE_PATH + '/deal/ajaxsaveDealOptions/',
    data: data,
    success: function (data) {//}
}); 
```

现在 post 数组就像

```
[postValues] => Array
    (
        [0] => Array
            (
                [name] => dealOptionsGroup[1][dealOptionName]
                [value] => dealOptionName1
            )

        [1] => Array
            (
                [name] => dealOptionsGroup[2][dealOptionName]
                [value] => dealOptionName2
            )
    ) 
```

有没有办法使用 ajax 发布数组，就像普通形式的帖子一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T04:13:36.883

```
 <form method="post" id="formDealOptions"  name="formDealOptions">
  <table>
   <tr class="dealOptionRow saved"> 
     <td>                  
     <input type="text" name="dealOptionsGroup[1][dealOptionName]" id="aa" value="OptionName1">
    </td>
    <td>                    
     <input type="text" name="dealOptionsGroup[2][dealOptionName]" value="OptionName2">
    </td>  
     <td>                    
     <input type="submit" name="forms" id="" value="save">
      <input type="button" name="forms" id="submitButtonId" value="save">
    </td> 
  </tr>
 </table>
</form> <script type="text/javascript" src="jquery-1.7.2.js"></script>

<script type="text/javascript">
    var frm = $('#formDealOptions');
    frm.submit(function () {
        $.ajax({
            type: 'post',
            url: 'test.php',
            data: frm.serializeArray(),
            success: function (data) {
                alert(data);
            }
        });

        return false;
    });
</script>

test.php
---------
<?php

print_r($_REQUEST);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:58:03.280

您可以使用这样的表格。然后发布值。

```
<form method="post" id="formDealOptions" name="formDealOptions">
  <table>
   <tr class="dealOptionRow saved"> 
     <td>                  
     <input type="text" name="dealOptionsGroup[dealOptionName][]" value="dealOptionName1">
    </td>
    <td>                    
     <input type="text" name="dealOptionsGroup[dealOptionName][]" value="dealOptionName2">
    </td>  
  </tr>
 </table>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T09:59:43.393

不要序列化

```
$.ajax({
    type: "POST",
    url: GLOBAL_BASE_PATH + '/deal/ajaxsaveDealOptions/',
    data:{ 
      'data1':$('input[value="dealOptionName1"]').val(),
      'data2':$('input[value="dealOptionName2"]').val(),
       //.....  
    },
    success: function (data) { }
    }); 
```

并在 php

```
<?php $_POST['data1']; //etc ?> 
```

# eclipse - 如何在 Eclipse 中显示 Project Explorer 窗口？

> ID：13623015
> 
> 赞同：98
> 
> 时间：2012-11-29T09:51:42.317
> 
> 标签：eclipse

突然，我的项目资源管理器窗口从 Eclipse 中消失了。我尝试选择 Windows > Show View > Project Explorer，但没有任何反应。我能做些什么？

* * *

## 回答 #1

> 赞同：187
> 
> 时间：2013-10-03T16:57:04.137

尝试窗口-> 重置。请记住，如果有的话，您自己的设置将被重置。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-11-29T09:54:57.860

尝试关闭 Eclipse IDE 并重新打开它，然后

单击窗口->显示视图->项目资源管理器

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-07-02T10:01:00.213

对我来说是这样的......

**窗口->显示视图->其他->常规->项目资源管理器**

或者

**Window->Open Perspective->Other->Java（默认）**

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-12-19T12:58:54.993

打开 Eclipse IDE 在快速访问（搜索文本框）上[![乙](../Images/f7fb1874eea471325aecec3ae9db8f5f.png)](https://i.stack.imgur.com/13XUu.png) 输入“**项目资源管理器”。**从下拉列表中选择或按 Enter

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-08-06T12:02:46.863

1.  > 窗口 -> 透视图 -> 重置

2.  > 重置 IDE

3.  > 窗口 -> 显示视图 -> 项目资源管理器

[![在此处输入图像描述](../Images/b1db6caf45cd769acf1af6b6c8d9abe4.png)](https://i.stack.imgur.com/75ClA.jpg)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-05-30T06:39:42.130

选择**Window->Show View**，如果那里没有显示，则选择**other**。在**General**您可以看到**Project Explorer**。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2014-10-29T10:36:10.960

如果上述解决方案均无效，请尝试 Window-> New Window

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-05-27T06:17:00.477

我也遇到了同样的问题。以下解决方案帮助我克服了它：

窗口 -> 显示视图 -> 包资源管理器。

您也可以使用快捷方式。这是 Alt + Shift + Q, P

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-20T23:21:58.250

使用最新的 Luna 升级。唯一有效的解决方案是 Window >> New Window。很容易失去那个关键的酒吧。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-11-19T18:02:24.607

如果您使用的是 Eclipse 或 Spring 工具套件，请按照以下步骤操作。

(1) 转到编辑器顶部的“窗口”。单击它
(2) 选择显示视图。您应该看到一个选项“项目资源管理器”。点击它。
你应该能够做到。

[![在此处输入图像描述](../Images/4940de3389c4c66dc9b96408ed1fa42f.png)](https://i.stack.imgur.com/F8vYP.jpg)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-03-04T11:11:06.360

关闭当前视角：
![关闭当前视角](../Images/a656b8d32e7bdf6794b6fd7b66452e3d.png)

使用**Window** -> **Open perspective**重新打开它。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-08-14T10:03:14.557

我也遇到过这个问题。. 这个解决方案对我有用....

windows->navigation->最大化活动视图或编辑器（ctrl + M）。在屏幕上，您可以在左侧导航菜单上看到...现在一一单击这些按钮...您将获得解决方案...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-31T15:33:28.040

尝试将透视图更改为 JavaEE，然后检查。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-08-19T14:25:20.077

不确定这是否是问题，但是，这让我有一段时间没有意识到一开始发生了什么——也许这会对其他人有所帮助。

它不是真正的问题，只是 Eclipse 的工作方式。（我习惯于 Visual Studio）它都是关于视角的！

我在 eclipse(neon) 中设置了一个（现有的）PHP 项目，然后尝试配置和运行调试。显示弹出“确认透视开关” - 我选择了“是”，没有意识到它实际上做了什么。然后“透视图”发生变化，您不再在任何地方看到项目浏览器。您无法从顶部导航>窗口>显示视图“打开”项目浏览器窗口，因为它不再存在（这是BS，它应该显示一些可以让您指示当前和其他“观点”的东西 - 至少对于新手来说。）现在它没有在哪里提供项目探索选项。

现在您必须将“透视”从调试改回 PHP（至少在我的情况下）。

这可以通过几种方式完成，最简单的是从右上角的图标。一个图标是“bug”，旁边是 PHP 图标。只需单击您想要的“透视”图标。另一种方法是从顶部导航栏 > 窗口 > 透视图 > 打开透视图，然后选择 PHP。他们能把这个隐藏得更深吗？

我知道这可能是那些使用 eclipse 一段时间的人的第二天性，但在我弄清楚发生了什么之前（第一天）让我感到沮丧。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-22T19:19:29.570

1.  请在工具栏中选择窗口
2.  移动到显示视图
3.  选择项目浏览器

# sql - Entity Framework 5 迁移创建过程/功能

> ID：13623016
> 
> 赞同：7
> 
> 时间：2012-11-29T09:51:45.503
> 
> 标签：sql, stored-procedures, powershell, entity-framework-5

我正在使用`Sql`迁移中的方法在实体框架中创建 SQL 过程。例如在`Up()`我正在做的

```
Sql(@"SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION dbo.MyFunction
...
GO"); 
```

现在我的问题是`GO`s：如果我希望能够编写我的迁移脚本（用于在实时服务器上使用），我需要`GO`生成脚本中的 s，否则它不起作用。但是，对于`Update-Database`没有该`-script`选项的运行（在开发时使用），它会对`GO`s.

我找到了一些部分答案：

[如何添加代码来初始化 sql 数据库](https://stackoverflow.com/questions/10621322/how-to-add-code-to-initialize-sql-database) Bart 的答案提供了一种调用方法，可以将语句分成多个`Sql`调用。这样做的问题是它在使用该`-script`选项运行时会影响生成的脚本，所以回到方块 1。

[如何覆盖 MigratorScriptingDecorator 生成的 SQL 脚本](https://stackoverflow.com/questions/10930259/how-can-i-override-sql-scripts-generated-by-migratorscriptingdecorator)看起来它也很有用。

因此，我的问题是：有没有办法知道您是否正在使用该`-script`选项运行迁移，或者有更好的方法在迁移中编写我的 SQL 过程脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T11:38:47.417

我已经发布了一个类似的问题，实际上有人给了我一个很棒的答案

[这是它的答案。我希望它有所帮助。](https://stackoverflow.com/questions/17105716/adding-go-statements-to-entity-framework-migrations)

基本上你必须改变你的迁移配置器的配置文件

# android - 将数据库从 RES 文件夹复制到 Android 中 Google Nexus One 的本地数据库？

> ID：13623027
> 
> 赞同：2
> 
> 时间：2012-11-29T09:52:37.037
> 
> 标签：android, sqlite

我正在开发一个 Android 应用程序，在该应用程序启动时，我将数据库从 RES 文件夹复制到本地数据库，为该应用程序创建一个 SQLite 数据库。它在除 HTC Google Nexus One 设备之外的所有其他设备和所有操作系统版本中都能正常工作。我第二次问这个问题是因为我试图以不同的方式发现解决方案。我正在使用以下代码将数据库复制到本地数据库。

```
public class ECatalogueDatabase {

    private static final String DB_PATH = "/data/data/com.weg.ecatalogue/databases/";
    public static final String DATABASE_NAME = "ECatalogue";
    public static final String DATABASE_TABLE = "T_Electrical";
    public static final int DATABASE_VERSION = 1;

    public static final String KEY_ROWID="id";
    public static final String KEY_PRODUCT_LINE="productline";

    public static final String KEY_VOLTAGE="voltage";
    public static final String KEY_OUTPUTHP="outputhp";

    public static final String KEY_FRAME="frame";
    public static final String KEY_RPM="rpm";

    private Context context=null;
    private DatabaseHelper DBHelper;
    private SQLiteDatabase db;

    private static final String CREAT_DATABASE="Create Table if not exists "+ DATABASE_TABLE+"("+ KEY_ROWID +" INTEGER PRIMARY KEY NOT NULL,"
    +KEY_PRODUCT_LINE +" nvarchar ,"+ KEY_OUTPUTHP+" numeric ,"+ KEY_RPM +" nvarchar ,"+KEY_VOLTAGE +" nvarchar ," +KEY_FRAME +" nvarchar"+")";

    /**
     * Constructor - takes the context to allow the database to be
     * opened/created
     *
     * @param ctx the Context within which to work
     */
    public ECatalogueDatabase(Context ctx) {
        this.context = ctx;
        DBHelper = new DatabaseHelper(context);
    }
    //Helper class
    private static class DatabaseHelper extends SQLiteOpenHelper
    {
        public DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREAT_DATABASE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS titles");
            onCreate(db);
        }

    }

    public ECatalogueDatabase open() //throws SQLException
    {
        try
        {
            db=DBHelper.getWritableDatabase();

        }catch(Exception exception)
        {
            exception.printStackTrace();
        }
        return null;
    }

    public void close()
    {
        DBHelper.close();
    }

    /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        @SuppressWarnings("unused")
        boolean dbExist = checkDataBase();

        /**
        * CHANGES DONE BY SHAILESH SHARMA TO SOLVE THE PROBLEM OF 2.2 HTC DESIRE IN CLIENT'S WIFE DEVICE :(
        */
        SQLiteDatabase db_Read = null;
        if(dbExist){
        //DO NOTHING IN THIS CASE
        }else{

        db_Read = DBHelper.getReadableDatabase();
        db_Read.close();
        }
        //=================================

        try {

            copyDataBase();

        } catch (IOException e) {

            throw new Error("Error copying database");

        }

    }
    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){
        try{
            String myPath = DB_PATH + DATABASE_NAME;
            //db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
            db = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.NO_LOCALIZED_COLLATORS | SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

        }

        if(db != null){

            db.close();

        }

        return db != null ? true : false;
    }
    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        InputStream myInput = context.getAssets().open(DATABASE_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DATABASE_NAME;

        OutputStream myOutput = new FileOutputStream(outFileName);

        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public int getDatabaseCount(){
        int count = 0;
        Cursor cursor = db.rawQuery("Select * from " + DATABASE_TABLE, null);
        if(cursor!=null){
            count = cursor.getCount();
        }
        cursor.deactivate();
        cursor.close();
        return count;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T07:59:51.630

我已经找到了解决这个问题的方法，现在我只想与大家分享。我得到的异常

```
CREATE TABLE android_metadata failed
Failed to setLocale() when constructing, closing the database
android.database.sqlite.SQLiteDatabaseCorruptException: database disk image is malformed 
```

这是完全不同的问题，我只在像 HTC Nexus ONE 设备这样的少数设备上遇到过，它在所有操作系统和所有其他设备上都可以工作。

当我们创建数据库时，我们会自动生成一个名为“ **android_table** ”的表，我删除了该表并在我的 SQLite 管理器中手动重新创建了该表。通过以下两步查询：

```
CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US') 
```

和

```
INSERT INTO "android_metadata" VALUES ('en_US') 
```

在我运行代码的这一步之后，我在圣诞节前得到了惊喜。我的应用程序现在运行良好。

所有功劳归功于我长期的研发和经过这么多努力后得到的这个链接：

```
http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/ 
```

# oracle - 共享相同外键的两个或多个表可以共享对该外键的约束吗？

> ID：13623028
> 
> 赞同：3
> 
> 时间：2012-11-29T09:52:39.267
> 
> 标签：oracle, foreign-key-relationship

这段代码有什么问题？？它给出错误“名称已被另一个约束使用”。另外，如果我不能在不同的表中定义相同的约束，那么有什么办法可以重用以前定义的约束？

有什么见解吗？？

```
CREATE TABLE tbl_formats
(
  format_id NUMBER(5),
  format_name VARCHAR2(50),
  format_desc VARCHAR2(100),
  valid_from DATE,
  valid_to DATE,
  format_type VARCHAR2(50),
  CONSTRAINT pk_format_id PRIMARY KEY(format_id)
);

CREATE TABLE tbl_format_detail
(
  id NUMBER(10),
  format_id NUMBER(5),
  src_field VARCHAR2(200),
  target_field VARCHAR2(100),
  business_rule VARCHAR2(4000),
  expression VARCHAR2(4000),
  target_segment VARCHAR2(4),

  CONSTRAINT pk_id PRIMARY KEY(id),
  CONSTRAINT fk_format_id FOREIGN KEY(format_id) REFERENCES tbl_formats(format_id)
);

CREATE TABLE tbl_client_formats 
(
  client_format_id NUMBER(10),
  format_id NUMBER(5),
  client_id NUMBER(5),
  CONSTRAINT pk_client_format_id PRIMARY KEY(client_format_id),
  CONSTRAINT fk_format_id FOREIGN KEY(format_id) REFERENCES tbl_formats(format_id),
  CONSTRAINT fk_client_id FOREIGN KEY(client_id) REFERENCES tbl_clients(client_id)
); 
```

似乎在表“tbl_client_formats”中定义的外键约束“fk_format_id”与表“tbl_format_detail”中已经定义的相同约束冲突。我是甲骨文的新手，所以请解释一下显而易见的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T09:58:33.027

问题是您尝试使用相同的约束*名称*两次。只需为第二个约束使用不同的名称（例如`fk_client_formats_format_id`），就可以了。

通常，我建议使用表名作为约束名称的一部分，以避免名称冲突（如果约束名称太长，您将不得不使用某种缩写方案）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T09:58:43.433

外键存储在数据库范围内，而不是表范围内。您不能在同一个数据库上拥有两个同名的 FK，即使它们不在同一个表中。您可以这样命名您的 FK：

FK_PARENT_CHILD_FIELD

前任：

FK_FORMATDETAILS_FORMATS_ID，

FK_CLIENTFORMATS_FORMATS_ID,

FK_CLIENTFORMATS_CLIENT_ID

# php - 如何找到生成 wordpress 管理页面的 php 文件或函数？

> ID：13623030
> 
> 赞同：0
> 
> 时间：2012-11-29T09:52:47.113
> 
> 标签：php, wordpress, podscms

我想在插件的管理面板中调试某个提交操作。该面板位于 wordpress 的仪表板内。它的网址如下：

```
http://localhost/wordpress/wp-admin/admin.php?page=pods&action=edit&id=681&do=create 
```

未指定提交操作。因此，它由生成上述页面的同一 php 文件处理。

```
<form action="" method="post" class="pods-submittable"> 
```

如何找出生成上述页面的 php 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:10:28.347

如果您在谈论[https://wordpress.org/extend/plugins/pods/](https://wordpress.org/extend/plugins/pods/)，请转到您的 Wordpress 插件目录并查看“pods”文件夹。以下文件包含该字符串：

```
/pods/ui/admin/setup-edit.php
/pods/ui/admin/setup-add.php
/pods/components/Roles/ui/add.php
/pods/components/Migrate-Packages/ui/wizard.php
/pods/components/Migrate-CPTUI/ui/wizard.php 
```

在不知道您要执行什么操作的情况下，我无法缩小用于该操作的文件的范围。如果您可以在该页面上发布一些其他表单字段的 HTML，我可以在这些文件中搜索该 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:17:31.723

以下脚本可让您找到任何 wordpress 插件，显然，页面参数是搜索的关键。

例如在 page=pods 的情况下，您必须输入您的 wordpress docroot 并执行：

```
cd wp-content/plugins
find . -type f | xargs grep add_menu_page | grep pods 
```

您应该看到与搜索匹配的文件（应该只有一个）和匹配的行。匹配的行与函数调用 add_menu_page 有关。此功能在管理菜单中创建一个新的顶级菜单部分。

如果您查看 WordPress Reference for [add_menu_page](http://codex.wordpress.org/Function_Reference/add_menu_page)功能，第三个参数 $menu_slug 是了解事情如何工作的关键，这是页面参数。

*引用此菜单的 slug 名称（对于此菜单应该是唯一的）。在 3.0 版之前，这称为文件（或句柄）参数。如果省略function参数，menu_slug应该是处理菜单页面内容显示的PHP文件*

# c# - Smartthreadpool - 排队很多线程时速度很慢

> ID：13623032
> 
> 赞同：1
> 
> 时间：2012-11-29T09:52:50.143
> 
> 标签：c#, multithreading, threadpool

我正在使用奇妙`SmartThreadPool`的方法来排队一堆解析任务。

所以基本上发生的情况是，当用户单击“开始”按钮时，程序将遍历不同的列表，并根据这些列表启动不同的作业（注意：这可以是 500.000 个作业）。

我是这样排队的：

```
 private void button1_Click(object sender, EventArgs e)
 {
     button1.Enabled = false;
     button2.Enabled = true;

     stpStartInfo.MaxWorkerThreads = Convert.ToInt32(parserThreadCount.Value);
     stpStartInfo.MinWorkerThreads = 1;
     _smartThreadPool2 = new Smart.SmartThreadPool(stpStartInfo);

     ........

     foreach (string engine in _checkedEngines)
     {
         query = lines[i];

         _smartThreadPool2.QueueWorkItem(
         new Amib.Threading.Func<string, string, int, int, int>(scrapeFunction),
         query, engine, iia, useProxies);

         iia++;
     }
} 
```

所以问题是用户在排队时必须等待（界面几乎挂起）200.000+线程..

理想的解决方案是让已经排队的线程启动，然后在后台排队其余的线程..但不知道我怎么能做到这一点..

有任何想法吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:18:37.640

You can use one of the threads to queue the jobs. Just move the foreach to a separate method and queue it in your main thread. That will be enough to do the queuing in parallel and when it's done, its thread will be recycled as well by the SmartThreadPool and used for the queued jobs.

# c# - DragMove 阻止预览鼠标向上

> ID：13623033
> 
> 赞同：1
> 
> 时间：2012-11-29T09:52:50.527
> 
> 标签：c#, wpf, drag

我有一个要移动窗口的应用程序，问题是现在所有具有预览鼠标的图像都无法正常工作。

这是windo事件：

```
 private void Window_MouseDown(object sender, MouseButtonEventArgs e)
 {
     DragMove();
 } 
```

这是图像事件：

```
 private void image1_PreviewMouseUp(object sender, MouseButtonEventArgs e)
 {
     MessageBox.Show("WTF IS WPF?");
 } 
```

如果我删除 DragMove 函数，图像事件就会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T20:19:40.827

为什么一直执行 DragMove() ？

```
MouseButtonState _mouseButtonState;
private void Window_MouseDown(object sender, MouseButtonEventArgs e)
{
    _mouseButtonState = e.ButtonState;
}

private void Window_MouseMove(object sender, MouseEventArgs e)
{
    if(_mouseButtonState == MouseButtonState.Pressed)
        DragMove();
} 
```

我还会检查 image1_PreviewMouseUp

```
private void image1_PreviewMouseUp(object sender, MouseButtonEventArgs e)
{
    if(_dragging) return;

    //else do your preview
} 
```

# php - 使用教义 2/Symfony 获取文章评论计数（）的优化方法

> ID：13623034
> 
> 赞同：1
> 
> 时间：2012-11-29T09:52:53.137
> 
> 标签：php, optimization, symfony, doctrine-orm, entitymanager

我正在尝试找到最佳优化方式来计算每篇文章的评论数

我有两个实体：文章和评论

评论实体有一个字段：

```
 /**
   * @ORM\ManyToOne(targetEntity="Easylist\ListmanagerBundle\Entity\Comment")
   * @ORM\JoinColumn(nullable=false)
   */
  private $comment; 
```

所以在我的控制器中，我想获取所有文章：

```
 $em = $this->getDoctrine()->getEntityManager()
 $rep = $em->getRepository('ListmanagerBundle:Article');
 $all_Article = $rep->findAll(); 
```

我希望在此查询的结果中包含一个包含评论计数的字段，如下所示：

```
array(
  "id"       =>  "1",
  "Title"    => "Just a test",
  "nbr_coms" => "320"
) 
```

我想使用服务，但我发现它在控制器端使用的服务不是实体，就像我想在我的实体中使用 EntityManager 一样，但这不是我认为的最佳方式。

我正在寻找一个优化的解决方案，因为我们正在谈论一篇数百万篇文章，每篇文章都有数百万条评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:22:41.267

您可以只选择要获取简单数组的字段：

```
public function countAll(){
    $query = $this->getEntityManager()->createQuery('
        SELECT a.id, a.title, COUNT(c.id)
        FROM ListmanagerBundle:Article a
        JOIN a.comments c
        GROUP BY a.id
     ');
    return $query->getResult(); 
} 
```

您可能需要查看您的映射以确保您`Article`具有`$comments`类型的属性`Collection`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:49:47.173

在控制器中，您可以执行`Article->getComments()->count()`或`Comments->count()`哪些是`count()`php 函数的快捷方式。

在树枝模板中，您可以执行 a `{{ article.getComments|length }}`or `{{ comments|length }}`which use `mb_strlen()`or `count()`。

这两种方法都使用原生 php 函数，并且不进行额外的数据库查询。使用它可以让您坚持使用，`findAll()`而无需编写自定义查询。

# php - 带有 PDO 的混合 UTF-8 和 latin1 表

> ID：13623036
> 
> 赞同：4
> 
> 时间：2012-11-29T09:52:55.463
> 
> 标签：php, mysql, character-encoding, pdo

有一个现有的数据库/表，我无法更改字符集。这些表使用排序规则“latin1_swedish_ci”，但其中存储了 UTF-8 数据。例如字符串“fußball”（德国足球）被保存为“fuÃŸball”。那是我无法改变的部分。

我的整个脚本与 UTF-8 和它自己的 UTF-8 表一起工作得很好，我使用带有 UTF-8 连接的 PDO(mySQL) 进行查询。但有时我必须查询一些“旧”的 latin1 表。是否有任何“酷”的方法来解决这个问题而不是发送 SET NAMES。

这是我在stackoverflow上的第一个问题！:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:17:04.770

1.  实际上很容易*认为*数据是以一种方式编码的，而实际上它是以其他方式编码的：这是因为任何直接检索数据的尝试都会导致首先转换为数据库连接的字符集，然后再转换为输出媒体的字符集——因此您应该首先通过`SELECT BINARY myColumn FROM myTable WHERE ...`或来验证存储数据的实际编码`SELECT HEX(myColumn) FROM myTable WHERE ...`。

2.  一旦您*确定*在 Windows-1252 编码列中存储了 UTF-8 编码数据（即，您正在查看预期`0xc39f`字符`ß`的位置），您*真正*想要的是从列中删除编码信息，然后告诉 MySQL数据实际上被编码为 UTF-8。如[`ALTER TABLE`语法](http://dev.mysql.com/doc/en/alter-table.html)中所述：

    > ### 警告 
    > 
    > 该`CONVERT TO`操作在字符集之间转换列值。如果您在一个字符集中有一列（如 ），这*不是*您想要的，`latin1`但存储的值实际上使用了其他一些不兼容的字符集（如`utf8`）。在这种情况下，您必须对每个此类列执行以下操作：
    > 
    > ```
    > 更改表 t1 更改 c1 c1 BLOB；
    > 更改表 t1 更改 c1 c1 文本字符集 utf8；
    > 
    > ```
    > 
    > [`BLOB`](http://dev.mysql.com/doc/en/blob.html)这样做的原因是当您转换为列或从列转换时没有转换。

3.  此后，MySQL 将根据需要正确地将所选数据转换为连接字符集的数据。也就是说，如果连接使用 UTF-8，则无需转换；而使用 Windows-1252 的连接将接收转换为该字符集的字符串。

4.  不仅如此，MySQL 中的字符串比较也会正确执行。例如，如果您当前使用 UTF-8 字符集连接并搜索`'fußball'`，您将不会得到任何结果；而你会在上面的修改之后。

5.  您提到的必须更改大量遗留脚本的陷阱仅适用于那些遗留脚本使用不正确的连接字符集（例如，告诉 MySQL 他们使用 Windows-1252 而他们实际上正在发送和期待以 UTF-8 格式接收数据）。无论如何，你*真的*应该解决这个问题，因为它可能会导致各种各样的恐怖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:54:00.197

我通过在我的 DB 类中创建另一个数据库句柄来解决它，它使用 latin1，所以每当我需要查询“遗留表”时，我可以使用

```
$pdo    = Db::getInstance();
$pdo->legacyDbh->query("MY QUERY");
# instead of
$pdo->dbh->query("MY QUERY"); 
```

如果有人有更好的解决方案，也不要碰桌子.. :-)

# c++ - 如何从实现者元组构造一个包装元组？

> ID：13623040
> 
> 赞同：1
> 
> 时间：2012-11-29T09:53:11.687
> 
> 标签：c++, c++11, visual-studio-2012, stdtuple

我有一些实现类（impls）和一些用 C++ 实现的用户包装器。我想将 impls 和 wrappers 保存在两个不同的元组中，以便我可以通过单个分配来初始化我的 impls。（我也有其他原因：）。

问题是 Visual Studio 2012 标准库的元组类不允许我在没有 const 引用的包装器复制构造函数的情况下构造我的包装器元组。可悲的是，在这种情况下我需要 const_cast ，例如：

```
#include <iostream>
#include <type_traits>
#include <tuple>
#include <typeinfo>

template <typename Member>
struct A
{
    A(Member& m) : member(m)
    { std::cout << typeid(Member).name() << " MMBR " << member << std::endl; }

    A(const Member& m) : member(const_cast<Member&>(m))
    { std::cout << typeid(Member).name() << " CMBR " << member << std::endl; }

    void Print()
    {
        std::cout << typeid(Member).name() << " PRNT " << member << std::endl;
    }

    Member& member;//yes I need to hold this as a mutable reference
};

int main()
{
    typedef std::tuple<A<int>, A<double>, A<short>> WrapperTuple;
    typedef std::tuple<int, double, short> Tuple;

    Tuple t(0, 1, 2);
    WrapperTuple w(t);

    std::get<1>(w).Print();
    return std::cin.get();
} 
```

上面的代码按预期编译和运行，但是如果我删除/注释掉包装类 A 的 const-ref-ctor，我的 VS2012 编译器和我的 gcc4.7.2 编译器都不会编译代码。（1）我做错了什么？

由于我没有关于 c++11 的良好文档，我猜想元组的可变参数复制 ctor 只需要其他元组的 const ref。如果是这样，（2）为什么元组类没有这样的ctor？我的意思是背后的主要原因。

总而言之，我想将所有 impls 和包装器放在一个元组中，这样我就可以使用单个操作（即 make_shared）进行分配。元组是必须的，因为我已经编写了一些帮助程序，以便我可以在编译时按类型查找（例如`Get<A<int>>(w)`）（3）是否有一种简洁的方法来保存对 impl 的引用，这样我就不需要分别分配每个 impl .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:56:34.860

的复制构造函数`std::tuple`，即使是转换构造函数，显然也会复制所有元素，并且由于副本不应更改复制的元素，因此将它们标记为`const`. 大多数时候，这种行为是完全合理的。

您的特殊情况的解决方法比您可能喜欢的要复杂一些，但它确实有效。基本思想是，从概念上讲，您不想复制元组，但您想使用它的元素作为其他元组元素的初始值设定项，因此`const`应该保留它们的特性。

```
template<unsigned...> struct seq{};
template<unsigned N, unsigned... Is>
struct gen_seq : gen_seq<N-1, N-1, Is...>{};
template<unsigned... Is>
struct gen_seq<0, Is...> : seq<Is...>{};

namespace aux{
template<class... Ts, unsigned... Is>
std::tuple<Ts&...> tie_all_(std::tuple<Ts...>& other, seq<Is...>){
  return std::tie(std::get<Is>(other)...);
}
} // aux::

template<class... Ts>
std::tuple<Ts&...> tie_all(std::tuple<Ts...>& other){
  return aux::tie_all_(other, gen_seq<sizeof...(Ts)>());
} 
```

代码是这样使用的：`WrapperTuple w(tie_all(t));`. 现在你可以摆脱`Member const&`构造函数了。

您甚至可以更进一步，编写一个将元组转换为包装元组的函数，从而不必手动指定类型：

```
template<class... Ts>
std::tuple<A<Ts>...> wrap_all(std::tuple<Ts...>& other){
  return tie_all(other);
}
// ...
auto w(wrap_all(t)); 
```

如果你有不同的包装类：

```
template<template<class> class Wrapper, class... Ts>
std::tuple<Wrapper<Ts>...> wrap_all_in(std::tuple<Ts...>& other){
  return tie_all(other);
}
// ...
auto w = wrap_all_in<A>(t); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:34:36.173

你为什么不直接创建`wrapped_tuple`一个包含整体`tuple`并提供实现的模板`get`？保存对单个元组元素的引用似乎是多余的，因为元组具有固定的布局，并且编译器可以发出简单的代码来引用给定元组引用的单个元素。

例如（并且在没有可变参数模板的情况下这样做，这有点烦人）：

```
template<typename Tuple> class wrapped_tuple;

template<size_t I, typename Tuple>
typename std::tuple_element<I, Tuple>::type&
Get(wrapped_tuple<Tuple>& w) {
  return std::get<I>(w.tuple_);
}

template<typename Tuple> class wrapped_tuple {
  template<size_t I, typename Uple>
  friend typename std::tuple_element<I, Uple>::type&
         ::Get(wrapped_tuple<Uple>& w);
  public:
    wrapped_tuple(Tuple& t) : tuple_(t) {}
  private:
    Tuple& tuple_;
};

template<typename Tuple>
wrapped_tuple<Tuple> wrap_tuple(Tuple& tup) {
  return wrapped_tuple<Tuple>(tup);
} 
```

[在ideone](http://ideone.com/toCSri)上。

# javascript - IE9 中的 Javascript 错误

> ID：13623044
> 
> 赞同：2
> 
> 时间：2012-11-29T09:53:29.060
> 
> 标签：javascript

任何人都知道这个错误，

> TypeError：无法获取属性“pop”的值：对象为空或未定义：

嗨 bru.scopelliti，

这里的代码是：

```
someNode.innerHTML = _self.errorMessage + " : " + ioArgs.xhr.status + " : " +response.responseText; 
```

问题是响应对象没有 responseText

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T09:55:55.407

当您想要访问属性时，当对象为空或未定义时，会发生此错误。

```
var x = undefined;
var y = null;
alert(x.pop); // error
alert(x.pop); // error 
```

如果你想检查对象是否为空，你可以这样做：

```
if (response) {
  // Do stuff
} 
```

如果要检查对象属性是否存在，可以执行以下操作：

```
if (response) {
   var value = response.responeText || defaultValue
} 
```

编辑：来自评论：

有几种方法可以检查正在定义的东西，但`if (something)`or`var x = y || z;`不是要走的路，因为错误的值`(0, '', etc.)`会导致它不起作用。如果您想查看是否定义了某些内容，我会使用`if (typeof x === "undefined")`. 为了检查对象中的属性，我会使用`if (x in obj)`，或者可能更好，具体取决于场景 - `if (obj.hasOwnProperty(x))`。为了检查空值，我会使用`if (x == null)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:01:22.257

您可能需要检查是否有任何不经意添加或忘记删除的额外逗号。IE 不尊重它。

```
var foo = {
    a: 1,
    b: 2,
    c: 3, // this last comma will give an error in IE.
} 
```

希望这可以帮助。

# windows-8 - 在 GridView 中更改鼠标悬停时的 TextBlock 前景色

> ID：13623046
> 
> 赞同：1
> 
> 时间：2012-11-29T09:53:37.187
> 
> 标签：windows-8, microsoft-metro, winrt-xaml

我从 Visual Studio 2012 的 Grid App 模板 (C#/XAML) 创建了一个应用程序。我正在使用 Light Theme 并且我已经自定义了 GridViewItem 画笔，以便当我将鼠标移到一个项目上时使用蓝色.

现在我想更改鼠标悬停在项目上时 GridView 中显示的文本的前景色，使用白色使其更具可读性。考虑到 GridView 项目的布局是在 DataTemplate 中定义的，是否有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:56:29.433

这是一篇演示 GridViewItem 样式的[博客文章。](http://labs.vectorform.com/2012/09/styling-a-gridviewitem-in-winrt/)

# android - 将图像添加到 ListView 对应的内容，从 JSON 响应中获取

> ID：13623047
> 
> 赞同：2
> 
> 时间：2012-11-29T09:53:46.430
> 
> 标签：android, json

我正在使用 JSON 解析器来解析 JSON 响应，我可以在 ListView 中获取项目名称，但无法获取与其对应的图像。JSON 响应中存在图像 url。我如何解析响应以获取与项目相对应的图像。以下是代码，任何知道如何执行此操作的人都可以帮助我，这将非常有用。

注意：图像和项目不是固定的

```
public class AndroidJSONParsingActivity extends ListActivity {

// url to make request
private static String url = "website/?JSON=get_recent_post";

// JSON Node names
private static final String TAG_POSTS = "posts";
private static final String TAG_ID = "id";
private static final String TAG_TITLE = "title";
private static final String TAG_DATE = "date";
private static final String TAG_CONTENT = "content";
private static final String TAG_AUTHOR = "author";
private static final String TAG_NAME = "name";

// contacts JSONArray
JSONArray posts = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting Array of Contacts
        posts = json.getJSONArray(TAG_POSTS);

        // looping through All Contacts
        for(int i = 0; i < posts.length(); i++){
            JSONObject c = posts.getJSONObject(i);

            // Storing each json item in variable
            String id = c.getString(TAG_ID);
            String title = c.getString(TAG_TITLE);
            String date = c.getString(TAG_DATE);
            String content = c.getString(TAG_CONTENT);

            // Phone number is agin  JSON Object
            JSONObject author = c.getJSONObject(TAG_AUTHOR);
            String name = author.getString(TAG_NAME);

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(TAG_ID, id);
            map.put(TAG_TITLE, title);
            map.put( TAG_DATE, date);
            map.put( TAG_NAME, name);
            map.put( TAG_CONTENT, content);
            // adding HashList to ArrayList
            contactList.add(map);
        }   
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */
    ListAdapter adapter = new SimpleAdapter(this, contactList,
            R.layout.list_item,
            new String[] { TAG_TITLE, TAG_DATE, TAG_NAME, TAG_CONTENT }, new int[] {
                    R.id.name, R.id.email,R.id.mobile, R.id.content });

    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    // Launching new screen on Selecting Single ListItem
    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
            String title = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String date = ((TextView) view.findViewById(R.id.email)).getText().toString();
            String name = ((TextView) view.findViewById(R.id.mobile)).getText().toString();
            String content = ((TextView) view.findViewById(R.id.content)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            in.putExtra(TAG_TITLE, title);
            in.putExtra(TAG_DATE, date);
            in.putExtra(TAG_NAME, name);
            in.putExtra(TAG_CONTENT, content);
            startActivity(in);

        }
    });

} 
```

}

JSONParser.java

公共类 JSONParser {

```
static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

}

SingleMenuItem.java

```
public class SingleMenuItemActivity  extends Activity {

// JSON node keys
private static final String TAG_TITLE = "title";
private static final String TAG_DATE = "date";
private static final String TAG_NAME = "name";
private static final String TAG_CONTENT = "content";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single_list_item);

    // getting intent data
    Intent in = getIntent();

    // Get JSON values from previous intent
    String title = in.getStringExtra(TAG_TITLE);
    String date = in.getStringExtra(TAG_DATE);
    String name = in.getStringExtra(TAG_NAME);
    String content = in.getStringExtra(TAG_CONTENT);

    // Displaying all values on the screen
    TextView lblName = (TextView) findViewById(R.id.name_label);
    TextView lblCost = (TextView) findViewById(R.id.email_label);
    TextView lblDesc = (TextView) findViewById(R.id.mobile_label);
    TextView lblCont = (TextView) findViewById(R.id.content_label);

    lblName.setText(title);
    lblCost.setText(date);
    lblDesc.setText(name);
    lblCont.setText(content);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:59:23.387

您必须使自己的适配器扩展[BaseAdapter](http://developer.android.com/reference/android/widget/BaseAdapter.html)以具有更大的自由度和灵活性...这并不难，您只需将列表行的元素与相应行的 json 数据绑定...在此绑定上您还将获取图像，并分配给[ImageViews](http://developer.android.com/reference/android/widget/ImageView.html)。

[SimpleAdapter](http://developer.android.com/reference/android/widget/SimpleAdapter.html)适用于非常简单的东西。

# android - Android OnCreateOptionsMenu 未在 Galaxy Tab 10.1 上显示

> ID：13623053
> 
> 赞同：2
> 
> 时间：2012-11-29T09:54:15.363
> 
> 标签：android, menu, sdk

我尝试向我的应用程序添加选项菜单。

```
 public static final int MENU_AIDE = Menu.FIRST+1;
 public static final int MENU_CONTACT = Menu.FIRST+2;
 public static final int MENU_APROPOS = Menu.FIRST+3;
 public static final int MENU_QUITTER = Menu.FIRST+4;

public boolean onCreateOptionsMenu(Menu menu)
{
    menu.add(Menu.NONE, MENU_AIDE, Menu.NONE, "Aide").setIcon(R.drawable.menu_aide);
    menu.add(Menu.NONE, MENU_CONTACT, Menu.NONE, "Nous Contacter").setIcon(R.drawable.menu_contact);
    menu.add(Menu.NONE, MENU_APROPOS, Menu.NONE, "A propos").setIcon(R.drawable.menu_apropos);
    menu.add(Menu.NONE, MENU_QUITTER, Menu.NONE, "Quitter").setIcon(R.drawable.menu_quitter);
    return(super.onCreateOptionsMenu(menu));
}

public boolean onOptionsItemSelected(MenuItem item) 
{
    switch (item.getItemId()) 
    {
        case MENU_AIDE:     Toast.makeText(this,"aide",Toast.LENGTH_SHORT).show(); return (true); //add(); return(true);

        case MENU_CONTACT:  Toast.makeText(this,"contact",Toast.LENGTH_SHORT).show(); return (true);

        case MENU_APROPOS:  Toast.makeText(this,"à propos",Toast.LENGTH_SHORT).show(); return (true);

        case MENU_QUITTER:  Toast.makeText(this,"quitter",Toast.LENGTH_SHORT).show(); return (true);
    }
    return(super.onOptionsItemSelected(item));
} 
```

但是菜单没有显示在我的平板电脑上，而在我的模拟器上单击“菜单”按钮时可以。onCreateOptionsMenu 功能甚至没有在选项卡上启动（？？）！

我只是不知道为什么不在平板电脑上，因为两者都在 4.1 下运行。

我发现删除线

```
<uses-sdk android:minSdkVersion="11" android:targetSdkVersion="16" /> 
```

使菜单也显示在我的选项卡上............

但为什么？以及如何解决它，我的意思是如何保留 min & target SDK 标志并使选项菜单按钮在我的平板电脑上可见？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:08:04.423

将 targetSdkVersion 设置为 8，菜单按钮应该可以在所有设备上使用。菜单按钮在较新的 Sdk 上已弃用，如果您设置 sdk 版本 11+，则该按钮显示为软件按钮，但它不起作用。

编辑：自 api 11 以来，菜单按钮“不起作用”。

# sencha-touch - 在sencha touch 2中是否有可能将一个app1（视图）调用到另一个app2（视图）

> ID：13623056
> 
> 赞同：1
> 
> 时间：2012-11-29T09:54:33.070
> 
> 标签：sencha-touch, sencha-touch-2

我很困惑，我们可以在 sencha touch 2 中将一个应用程序视图称为另一个应用程序视图吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T19:25:31.960

如果您的意思是“您可以将第二个 sencha 应用程序加载到原始 Sencha 应用程序的视图（或容器）中”，那么答案是肯定的。

在 Sencha Touch Charts 2 发布之前，我必须这样做。我在 ST1 中使用 Charts 1 创建了第二个应用程序，然后将其加载到我的 ST2 应用程序视图中。

为此，您需要使用 iFrame 来调用第二个应用程序以在您的应用程序中加载。没有其他办法。我什么都试过了。此外，如果您想将数据从一个应用程序传递到另一个应用程序，请使用 localstorage 或 SQLlite 数据库调用。

# network-programming - 如何在 Solaris 中获取网络接口设备特定文件的列表

> ID：13623067
> 
> 赞同：1
> 
> 时间：2012-11-29T09:54:59.400
> 
> 标签：network-programming, solaris, ioctl

> **可能重复：**
> [Solaris：ifconfig 的编程接口？](https://stackoverflow.com/questions/2655544/solaris-programmatic-interface-to-ifconfig)

如何使用 C 程序获取所有“/dev/net0 /dev/bge0，网络接口设备文件”的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:08:56.083

我对您的理解是否正确，您需要 /dev 中提供的所有网络设备文件？然后运行

```
ls /dev/net* /dev/bge* 
```

并解析结果。

# php - cakephp 找到所有加入

> ID：13623069
> 
> 赞同：1
> 
> 时间：2012-11-29T09:55:27.823
> 
> 标签：php, mysql, cakephp

```
$order = $this->Order->find('all', array(
        'recursive' => 2,
        'conditions' => array(
            'Order.date' => $datefrom,
        ),
        'joins' => array(
            array(
                'table' => 'purchase',
                'alias' => 'Purchase',
                'conditions'=> array(
                    'Purchase.pid = Order.pid', 
                )
            ),
                array(
                'table' => 'sales',
                'alias' => 'Sales',
                'conditions'=> array(
                    'Purchase.pid = Sales.pid', 
                )
            ),
        ),
    )); 
```

为什么上面的代码没有从采购和销售中选择字段，而只返回来自订单的字段。为了使所有数据都返回，需要添加什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:43:50.680

试试这个，我不确定是否需要 'type' 和 'foreignKey' 键，但我通常在使用 'joins' 键时包含它们。另外我假设'pid'是正确的外键。

```
$order = $this->Order->find('all', array(
    'recursive' => -1,
    'conditions' => array(
        'Order.date' => $datefrom,
    ),
    'joins' => array(
        array(
            'table' => 'purchase',
            'alias' => 'Purchase',
            'type' => 'INNER',
            'foreignKey' => 'pid',
            'conditions'=> array(
                'Order.pid = Purchase.pid', 
            )
        ),
            array(
            'table' => 'sales',
            'alias' => 'Sales',
            'type' => 'INNER',
            'foreignKey' => 'pid',
            'conditions'=> array(
                'Sales.pid = Purchase.pid', 
            )
        ),
    ),
)); 
```

如果您已经在模型中设置了关系，请将“递归”键更改为 -1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T06:01:46.600

```
 Controller::loadModel('User');
    Controller::loadModel('Answer');
    Controller::loadModel('Influence');
    $users = $this->User->find('all', array('joins' => array(
        array(
            'table'      => 'answers',
            'alias'      => 'Answer',
            'type'       => 'inner',
            'foreignKey' => false,
            'conditions' => array('Answer.user_id = User.id'),
        ),
        array(
            'table'      => 'influences',
            'alias'      => 'Influence',
            'type'       => 'inner',
            'foreignKey' => false,
            'conditions' => array(
                'Influence.user_id=Answer.user_id',
            )
        )
    ),'fields' => array(
            'Answer.is_correct',
            'Answer.answer', 
            'Answer.date as answered_date',
            'Influence.signups',
            'Influence.clicks',
            'User.first_name',
            'User.last_name', 
            'User.email', 
            'User.phone', 
            'User.flybuys' )
    )); 
```

In order to get fields from other tables You should specify the fields you want.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T16:57:13.387

只是一个想法，

```
'table' => 'purchase',
'alias' => 'Purchase', 
```

不是错字吧？因为我认为，根据蛋糕惯例，桌子的通常名称是“购买”……但我当然不知道你的桌子……；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-24T10:03:45.367

首先您需要在**订单模型文件中创建一个关联**

**模型：**

```
 public $hasMany = array(

    'purchase' => array(

        'className' => 'purchase',

        'foreignKey' => 'pid',

        'dependent' => true,

        'counterQuery' => 'true'

    ),

    'sales' => array(

        'className' => 'sales',

        'foreignKey' => 'pid',

        'dependent' => true,

        'counterQuery' => 'true'
    ), 
```

);

**控制器：**

```
 $order = $this->Order->find('all', array(

        'recursive' => 2,

        'conditions' => array(

            'Order.date' => $datefrom,

        )

    ); 
```

现在您可以获取订单、采购和销售相关记录。

享受...

# regex - 正则表达式替换电子邮件的一行中的字符

> ID：13623070
> 
> 赞同：0
> 
> 时间：2012-11-29T09:55:31.847
> 
> 标签：regex, preg-replace

我不擅长正则表达式，但我正在尝试找到一种解决方案，使用 preg_replace() 从导出到我较新数据库的电子邮件列表中替换一些字符：

```
$patterns1 = '/\[at\]/'; '/\(at\)/'; '/\{at\}/'; '/\ at\ /';
$replacements1 = '@';

$patterns2 = '/\[dot\]/'; '/\(dot\)/'; '/\{dot\}/'; '/\ dot\ /';
$replacements2 = '.';

input:
username [at] subdomain [dot] domain [dot] com
username {at} subdomain {dot} domain {dot} com
username (at) subdomain (dot) domain (dot) com
username at subdomain dot domain dot com
username[at]subdomain[dot]domain[dot]com
username{at}subdomain{dot}domain{dot}com
username(at)subdomain(dot)domain(dot)com

output:
username@subdomain.domain.com
username@subdomain.domain.com
username@subdomain.domain.com
username@subdomain.domain.com
username@subdomain.domain.com
username@subdomain.domain.com
username@subdomain.domain.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:07:27.643

如果你真的需要它，这对我有用： `$ echo 'me {at)somewhere dot com' | perl -lane 's/(\s*[({\[ ]at[)}\] ]\s*)/@/g; s/(\s*[({\[ ]dot[)}\] ]\s*)/./g;print'`

你的模式将是`/\s*[({\[ ]at[)}\] ]\s*/`和`/\s*[({\[ ]dot[)}\] ]\s*/`

# php - 接收 cmd 行参数作为数组

> ID：13623073
> 
> 赞同：2
> 
> 时间：2012-11-29T09:55:45.507
> 
> 标签：php

目前正在编写一个小命令行脚本，我已经让它工作得很好。

脚本循环直到用户发出退出命令，在此期间用户可以输入如下命令：

```
I 5 6 
```

它表示图像创建；5 和 6 是要创建的宽度和高度。

就目前而言，我似乎无法在数组中捕获用户的输入。我总是能得到第一个字母，但不能用[`fgetc`](http://php.net/fgetc).

目前捕捉是这样的：

```
 $input = strtolower(fgetc(STDIN)); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:01:19.907

[`fgetc()`](http://de2.php.net/manual/en/function.fgetc.php)只读取一个字符。

您要使用的是[`fgets()`](http://de2.php.net/manual/en/function.fgets.php).

在您的情况下，要将输入行（小写，您显然想要它）作为数组，请使用：

```
$input_line = strtolower(fgets(STDIN));
$input_array = explode(" ", $input_line); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:00:32.080

使用[fgets()](http://www.php.net/manual/en/function.fgets.php)读取整行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:01:23.363

```
$input = explode(" ",strtolower(fgets(STDIN))); 
```

fgetc() 只读取一个字符，fgets() 读取一个字符串

# android - Android比较两个声音以进行语音匹配

> ID：13623075
> 
> 赞同：6
> 
> 时间：2012-11-29T09:55:49.837
> 
> 标签：android, voice

如何在 android/Java 中比较两个声音以进行语音匹配？基本上它类似于语音识别/文本到语音，但语音识别不适用于我的语言。我的应用程序如下所示：我的数据库中保存了 10 个人，我将为每个人录制不同的声音（语音）并保存。然后按一下按钮，我会录制另一个声音并临时保存。现在，我如何将此录音与我的 10 个人声录音进行比较并匹配一个人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T14:12:11.490

虽然列出的链接确实提供了一些关于音频分析的指导，但我认为您想要做的事情是不可能的，因为它需要频率分析来找到声音的相似性，而 AFAIK 仅在设备上是不可能的，并且将是相当密集的处理器。

我做过类似的事情，涉及将录音上传到服务器并使用服务器处理它们，然后发回结果，所以如果这是可行的，我会推荐这条路线。

# objective-c - XCode - 查找某个类的对象的每次使用

> ID：13623078
> 
> 赞同：5
> 
> 时间：2012-11-29T09:55:57.110
> 
> 标签：objective-c, xcode, cocoa

有没有办法搜索我的项目以查找我使用过某个类的对象的地方。

我想在我的应用程序中将所有日期更改为本地化日期。我可以搜索应该可靠的关键字“日期”，但它会显示大量其他结果，例如“更新”和类似的关键字。

所以，我希望能够找到我在哪里使用了 NSDate 类的对象。有没有可靠的方法来做到这一点？我知道我可以搜索关键字“NSDate”，但我可能并不总是使用它——例如，在返回 NSDate 的方法中，我可以这样称呼它：

```
[NSString stringWithFormat:@"%@", [self theDate]]; 
```

我敢肯定这可能是不可能的，但我想我会顺便问一下！:)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:11:06.950

在最左侧面板的 XCode 中。

选择项目。

转到第三个选项卡（显示搜索导航器）。

从当前项目中搜索您想要搜索的任何内容。

甚至您也可以更换它们。

另一种方式，

选择要搜索的文本。

右键单击并“在工作区中查找选定的文本”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:11:54.570

您可以单击对象的名称，例如。在您的情况下，NSDate 类的日期，并且会有一个向下的箭头，可以点击。您可以单击它并从下拉菜单中选择范围内的全部编辑。它将在选定的灰色背景中显示该范围内的该对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:01:09.023

您可以选择该关键字，例如函数名、类名、变量名等，然后通过单击小箭头按钮转到声明、用途和它所在的每个地方，选择整个关键字后会出现该小箭头按钮。

# c++ - 如何在 C++ 中使用内在函数进行内联汇编？

> ID：13623085
> 
> 赞同：1
> 
> 时间：2012-11-29T09:56:31.947
> 
> 标签：c++, visual-c++, 64-bit, inline-assembly, intrinsics

我尝试在 VS2005 中将 C++ 工具移植到 x64。问题是，代码包含内联汇编，64 位编译器不支持。我的问题是，如果有更多的努力来用清晰的 c++ 编码或使用内在函数。但在这种情况下，并非所有汇编函数都可用于 x64，对吗？假设，我有一个简单的程序

```
#include <stdio.h>

void main()
{
   int a = 5;
   int b = 3;
   int res = 0;

    _asm
    {
       mov eax,a
       add eax,b
       mov res,eax
    }

    printf("%d + %d = %d\n", a, b, res);
} 
```

我必须如何使用内在函数更改此代码才能运行它？我是汇编程序的新手，不知道它的大部分功能。

**更新：**

我按照 Hans 的建议进行了更改以使用 ml64.exe 编译程序集。

```
; add.asm

; ASM function called from C++

.code
;---------------------------------------------
AddInt PROC,
    a:DWORD,    ; receives an integer
    b:DWORD     ; receives an integer
; Returns: sum of a and b, in EAX.  
;----------------------------------------------
    mov  eax,a
    add  eax,b
    ret
AddInt ENDP
END 
```

**主文件**

```
#include <stdio.h>

extern "C" int AddInt(int a, int b);

void main()
{
    int a = 5;
    int b = 3;
    int res = AddInt(a,b);

    printf("%d + %d = %d\n", a, b, res);
} 
```

但结果不正确`5 + 3 = -1717986920`。我想，指针出了点问题。我在哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T10:09:07.723

VC 中的 64 位目标不支持内联汇编。

关于非内联代码中的错误，乍一看，代码似乎很好。我会查看从 C++ 生成的汇编代码 - 看看它是否与`addInt`程序匹配。

**编辑**：需要注意的两件事：

1.  添加`extern addInt :proc`到您的 asm 代码。
2.  我不知道过程接受参数的汇编语法。参数通常`sp`根据您的调用约定通过堆栈指针（寄存器）提取，在此处查看更多信息：http: [//courses.engr.illinois.edu/ece390/books/labmanual/c-prog-mixing.html](http://courses.engr.illinois.edu/ece390/books/labmanual/c-prog-mixing.html)

# mysql - 使用shell脚本将mysql数据库转换为sqlite数据库

> ID：13623094
> 
> 赞同：1
> 
> 时间：2012-11-29T09:56:48.860
> 
> 标签：mysql, sqlite

我有shell脚本。我想将 mysql 数据库转换为 sqlite 数据库。我想安装cygwin。任何人都可以帮助获取我需要安装的软件包吗？

我尝试了很多，但如果我选择全部，那么它需要一整天并且什么都没有发生，或者有时它会破坏安装。

# android - 我可以在 android 中使用 SharedPreferences 存储两个或多个具有相同键的值吗？

> ID：13623098
> 
> 赞同：7
> 
> 时间：2012-11-29T09:56:55.533
> 
> 标签：android, sharedpreferences

我可以在 android 中使用 SharedPreferences 存储两个或多个具有相同键的值吗？如果不是，请告诉我当许多用户在注册应用程序中注册时如何存储用户名、名字、密码等值？

前任：

```
person A registered with username="john12", first name="john" and DOB="06/06/2000".
person B registered with username="arun89", first name="arun" and DOB="08/11/1989". 
```

现在，我想将这些值存储在 SharedPreferences 中并稍后检索它们。是否可以使用 SharedPreferences？如果没有，请告诉我如何以其他方式进行。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:12:25.897

您不能直接存储这些值（因为后者添加的值将覆盖先前添加的值），但您始终可以存储`Parcelable`并将数据放入其中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T01:09:50.443

我会考虑创建一个`JSONObject`并将要存储的字段添加为键：值对。

```
json.putString(key, value); 
```

然后，您可以将 json 对象存储在它的字符串表示中，`json.toString()`并在以后使用

```
JSONObject jo = new JSONObject(jsonString);
String value = jo.getString(key); 
```

除了字符串之外，JSONObject 还提供不同的数据类型。

这实际上取决于您要存储多少数据。根据这一点，我会选择 SharedPreferences 或 SQLite 实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T10:03:41.500

对于您的情况，最好使用 SQLIte 数据库。但是，如果您想使用共享首选项，它仍然是可能的。您必须使用带有附加索引的键来记住不同的用户，例如

用户名 1：arun

用户名 2：约翰

您必须记住用户总数。然后可以维护所有用户。您还可以使用其他数据结构，如 hashmap 来维护共享偏好的数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T09:59:59.710

我不认为这是可能的，因为你不知道用户的数量。您可以尝试用逗号分隔用户，但这很蹩脚。

您应该考虑使用 SQLite 数据库。 [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T10:01:32.047

然后你必须存储一个用户对象的数组 List 首先创建一个类 userInfo 然后创建一个数组 List 类型的 userInfo 然后将数据存储在这个列表中并将一个可序列化的对象放在 SharedPreferences 中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T10:04:40.967

您还可以将它们作为字符串存储在一个名为“registers”的键上。将每个寄存器连接到首选项。放 ”;” （或您想要的任何其他字符）在每个寄存器之间。然后解析字符串并使用值。

关键：寄存器

值：“用户名=john12，名字=john，出生日期=06/06/2000；用户名=mike12，名字=mike，出生日期=06/07/2012”

使用 String 的 split 方法会给你一个寄存器列表作为字符串。

```
registers.split(";"); 
```

使用“，”再次拆分将为您提供每个寄存器的属性。

# windows-7 - 使用 CMakeLists 文件使用 QtCreator 编译 PCL 代码示例

> ID：13623101
> 
> 赞同：0
> 
> 时间：2012-11-29T09:57:17.307
> 
> 标签：windows-7, cmake, qt-creator, point-cloud-library

我正在尝试使用*CMakeLists.txt*文件使用*QtCreator编译**PCL*示例。FindPCL.cmake文件（从此处获取：*最后*[一个附加文件](http://dev.pointclouds.org/issues/148)）位于源文件的同一目录中。

 ***我的*CMakeLists.txt*文件是：

```
cmake_minimum_required(VERSION 2.6 FATAL_ERROR)
project(pclcmake)
list(APPEND CMAKE_MODULE_PATH "C:/CMake2.8/bin")
set(PCL_ROOT "E:/LIBRERIAS/PCL1.5.1")
set(PCL_DIR "E:/LIBRERIAS/PCL1.5.1/cmake")
find_package(PCL 1.5.1 REQUIRED COMPONENTS common octree io)
include_directories(${PCL_INCLUDE_DIRS})
link_directories(${PCL_LIBRARY_DIRS})
add_definitions(${PCL_DEFINITIONS})
add_executable(pcl_cmake main.cpp)
target_link_libraries(pcl_cmake ${PCL_COMMON_LIBRARIES} ${PCL_OCTREE_LIBRARIES} ${PCL_IO_LIBRARIES}) 
```

我要编译的代码是这样的：

```
#include <pcl/io/pcd_io.h>
#include <pcl/point_types.h>

#include <iostream>

int main(int argc, char* argv[]) {
  pcl::PointCloud<pcl::PointXYZ>::Ptr cloud (new pcl::PointCloud<pcl::PointXYZ>);

  if (pcl::io::loadPCDFile<pcl::PointXYZ> ("test_pcd.pcd", *cloud) == -1) //* load the file
  {
     std::cout << "Nope\n";
     return (-1);
  }
  std::cout << "Loaded " << cloud->width * cloud->height << " data points from test_pcd.pcd with the following fields: " << std::endl;
  for (size_t i = 0; i < cloud->points.size (); ++i)
     std::cout << "    " << cloud->points[i].x << " "    << cloud->points[i].y << " "    << cloud->points[i].z << std::endl;

  return (0);
} 
```

我还在我的*CMakeLists.txt*`PCL_DIR`中将var设置为指向 PCL 安装目录，如底部的 PCL 教程[Using PCL in your own project中所述。](http://pointclouds.org/documentation/tutorials/using_pcl_find_pcl.php)

 *最后，我得到的错误是：

```
CMake Error at CMakeLists.txt:6 (find_package):
  By not providing "FindPCL.cmake" in CMAKE_MODULE_PATH this project has
  asked CMake to find a package configuration file provided by "PCL", but
  CMake did not find one.

  Could not find a package configuration file provided by "PCL" (requested
  version 1.5.1) with any of the following names:

    PCLConfig.cmake
    pcl-config.cmake

  Add the installation prefix of "PCL" to CMAKE_PREFIX_PATH or set "PCL_DIR"
  to a directory containing one of the above files.  If "PCL" provides a
  separate development package or SDK, be sure it has been installed. 
```

任何想法？提前致谢。

PS：在*CMakeLists*文件中，我指向*CMake*二进制文件`CMAKE_MODULE_PATH`的目录。那正确吗？

 *PS2：我正在使用 MingW 编译器。

PS3：SO 是 Windows 7 64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:28:31.927

您应该设置`CMAKE_MODULE_PATH`为包含`FindPCL.cmake`. 如果此目录是模块 ( `share/cmake/Modules`) 的标准 CMake 目录，则您根本不需要它。

因此，设置`CMAKE_MODULE_PATH`到`bin/`目录是错误的。*****

# sql - 如何将图像加载到oracle数据库表中

> ID：13623107
> 
> 赞同：0
> 
> 时间：2012-11-29T09:57:30.740
> 
> 标签：sql, database, oracle, plsql

如何将图像加载到oracle数据库表中

假设我有一张像图片一样的桌子

```
CREATE TABLE image (img_id number
                  ,img_name varchar2(100)
                  ,img   BLOB) ; 
```

谁能帮我吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:05:34.370

```
CREATE OR REPLACE DIRECTORY test_dir AS 'C:\'; 

DECLARE
  l_bfile  BFILE;
  l_blob   BLOB;
BEGIN
  INSERT INTO tab1 (col1, col2)
  VALUES (empty_blob(), 'test1')
  RETURN col1 INTO l_blob;

  l_bfile := BFILENAME('test_dir', 'Test.txt');
  DBMS_LOB.fileopen(l_bfile, Dbms_Lob.File_Readonly);
  DBMS_LOB.loadfromfile(l_blob, l_bfile, DBMS_LOB.getlength(l_bfile));
  DBMS_LOB.fileclose(l_bfile);

  COMMIT;
END; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:44:17.673

如果文件在数据库服务器上，请参阅罗伯特的答案。

如果文件在 CLIENT 文件系统上，请使用 SQLLDR。例如：

```
SQL> CREATE TABLE tab1 (
  2    id number primary key,
  3    image      BLOB
  4  );

Table created.

SQL> host sqlldr user/pass@yourdb control=load_image.ctl

SQL*Loader: Release 11.2.0.2.0 - Production on Thu Nov 29 10:41:08 2012

Copyright (c) 1982, 2009, Oracle and/or its affiliates.  All rights reserved.

Commit point reached - logical record count 1

SQL> select * from tab1;

        ID
----------
IMAGE
--------------------------------------------------------------------------------
         1
FFD8FFE000104A46494600010101004800480000FFE111C44578696600004D4D002A00000008000B
010F00020000000100000000011000020000000100000000011200030000000100010000011A0005

SQL> select length(image) from tab1;

LENGTH(IMAGE)
-------------
       263508

SQL> 
```

其中控制文件是这样的：

```
LOAD DATA 
INFILE 'images.txt'
INTO TABLE tab1
FIELDS TERMINATED BY ','
(id  ,
 image_filename    FILLER CHAR(100),
 image             LOBFILE(image_filename) TERMINATED BY EOF) 
```

和一个示例 images.txt 文件：

```
1,foo.jpg 
```

# sigkill - QNX 系统在使用 phshutdown 关闭时挂起

> ID：13623110
> 
> 赞同：0
> 
> 时间：2012-11-29T09:58:04.523
> 
> 标签：sigkill, sigterm, qnx-neutrino, mqueue

使用 phshutdown（重新启动或关闭）关闭 QNX neutrino 时，系统在杀死消息队列（mqueue）时挂起。屏幕上显示的消息是

**关闭服务提供者（mqueue）**

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T19:49:11.120

`shutdown`当您从命令行发出时，也会不时发生这种情况。我在网上看到的一些原因是：

*   硬件问题
*   驱动程序问题
*   内核告诉它不想关闭时关闭

从我拼凑的内容来看（这绝不是确定的，但似乎是合理的），基本上，任何等待硬件或操作系统回复的程序都有机会挂起关机，如果它正在等待的东西on 在它之前被杀死。

一种可能的缓解措施是在`slay`发布之前对所有应用程序/服务器（尤其是那些接触硬件设备或共享内存队列的应用程序/服务器）`shutdown`，等待一两秒钟，然后继续使用您的`shutdown`.

# android - Android如何获取故障码

> ID：13623111
> 
> 赞同：1
> 
> 时间：2012-11-29T09:58:14.730
> 
> 标签：android

`webservice`当传递的参数正确时，我正在点击返回列表。当传递的参数不正确时，它会返回一个故障码。如何获得这个故障码？我使用了一个 Sax Listner，它提供了三种方法。

```
public void parsingSuccess(List list),

public void parsingError(String error) &

public void connectionError(String error) 
```

在解析错误的情况下，我没有得到一个列表。在这种情况下如何获取故障代码。我正在使用 ASYnc 任务。我在后台解析网址。响应以 xml 的形式出现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:12:11.777

如果您从服务器获得 Response 作为`Entity`，您可以执行以下操作：

```
HttpResponse response = client.execute(httpGet);
StatusLine statusLine = response.getStatusLine();
int statusCode = statusLine.getStatusCode();

if (statusCode == 200) {
    //do something
} 
```

# machine-learning - 有人可以向我解释逻辑回归中成本函数和梯度下降方程之间的区别吗？

> ID：13623113
> 
> 赞同：56
> 
> 时间：2012-11-29T09:58:23.510
> 
> 标签：machine-learning

我正在学习 Coursera 上关于逻辑回归的 ML 课程以及 Manning Book Machine Learning in Action。我正在尝试通过在 Python 中实现所有内容来学习。

我无法理解成本函数和梯度之间的区别。网上有一些例子，人们计算成本函数，然后有些地方他们不计算，只使用梯度下降函数`w :=w - (alpha) * (delta)w * f(w)`。

如果有的话，两者有什么区别？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2016-11-06T01:41:05.420

每当您使用数据训练模型时，实际上都会为特定特征生成一些新值（预测值）。但是，该特定特征已经具有一些值，这些值是数据集中的真实值。我们知道预测值越接近其对应的真实值，模型就越好。

现在，我们正在使用成本函数来衡量预测值与其对应的实际值的接近程度。

我们还应该考虑训练模型的权重负责准确预测新值。假设我们的模型是 y = 0.9*X + 0.1，对于不同的 X，预测值不过是 (0.9*X+0.1)。[等式中的 0.9 和 0.1 只是要理解的随机值。]

因此，通过将 Y 视为与此 x 对应的实际值，成本公式开始衡量 (0.9*X+0.1) 与 Y 的接近程度。

我们负责为我们的模型找到更好的权重（0.9 和 0.1），以得出最低的成本（或更接近真实值的预测值）。

梯度下降是一种优化算法（我们还有其他一些优化算法），它的职责是在尝试不同权重的模型或更新权重的过程中找到最小成本值。

我们首先使用一些初始权重运行我们的模型，梯度下降更新我们的权重，并在数千次迭代中找到具有这些权重的模型的成本，以找到最小成本。

一点是梯度下降并没有最小化权重，它只是更新它们。该算法正在寻找最小成本。

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2012-11-29T13:50:56.383

成本函数是您想要最小化的东西。例如，您的成本函数可能是您的训练集上的平方误差之和。梯度下降是一种求多变量函数最小值的方法。所以你可以使用梯度下降来最小化你的成本函数。如果您的成本是 K 个变量的函数，那么梯度就是长度为 K 的向量，它定义了成本增长最快的方向。所以在梯度下降中，你跟随梯度的负值到达成本最小的点。如果有人在机器学习上下文中谈论梯度下降，则可能隐含成本函数（它是您应用梯度下降算法的函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-28T17:30:58.097

想起来很奇怪，但是对于一条线与数据点的“准确”程度，有不止一种衡量标准。

为了访问一条线与数据的拟合程度，我们有一个“成本”函数，它可以比较预测值和实际值，并为它的错误程度提供“惩罚”。

惩罚 = cost_funciton（预测的，实际的）

一个简单的成本函数可能只取预测值和实际值之间的差异。

更复杂的函数将使该值平方，因为我们宁愿有许多小错误而不是一个大错误。

此外，每个点对移动线都有不同的“敏感度”。有些点对运动的反应非常强烈。其他人的反应不那么强烈。

通常，您可以做出权衡，向敏感点移动，远离不敏感点。在那种情况下，你得到的比你放弃的多。

“梯度”是一种衡量每个点对移动线的敏感程度的方法。

这篇文章很好地描述了为什么会有不止一个度量，以及为什么有些点比其他点更敏感：

[https://towardsdatascience.com/wrapping-your-head-around-gradient-descent-with-pictures-3fbd810235f5?source=friends_link&sk=7117e5de8c66bd4a4c2bb2a87a928773](https://towardsdatascience.com/wrapping-your-head-around-gradient-descent-with-pictures-3fbd810235f5?source=friends_link&sk=7117e5de8c66bd4a4c2bb2a87a928773)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-10T14:05:24.307

让我们以二元分类的逻辑回归模型为例。任何给定输入的模型输出（预测值）将在训练时相对于实际输出（预期值）偏移（偏差）。因此，模型需要以最小的误差（损失）进行训练，以便模型能够以高精度执行。

用于找到发生最小误差（损失）的参数（在线性方程的情况下，y = mx+c）值的函数称为成本函数/损失函数。损失函数是用于查找训练样本单行/记录损失的术语，成本函数是用于查找整个训练数据集损失的术语。

Now, How do we find the parameter(m and c in our case) values at which the minimum loss occurs? Its by using gradient descent algorithm using the equation, which helps us to find the points at which the minimum loss occurs and the parameters values at this points are considered for model building (let say y = 0.5x + 2) where m=.5 and c=2 are the points at which the loss is minimum.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-09T07:48:04.267

成本函数就像您为一个好的模型构建模型的成本应该是最低的。为了找到最小成本函数，我们使用梯度下降法。给出系数值以确定最小成本函数

# c++ - 可以将 &my_boost_array_variable[2] 传递给期望 void* 的 C 函数吗？

> ID：13623126
> 
> 赞同：3
> 
> 时间：2012-11-29T09:58:45.543
> 
> 标签：c++, c, arrays, boost, parameter-passing

我有两个变量：

```
boost::array my_boost_array_variable_1<float, 3>;
boost::array my_boost_array_variable_2<float, 3>; 
```

现在我想调用具有以下签名的 C 函数：

```
int MPI_Allreduce ( void *sendbuf, void *recvbuf, ...); 
```

我想将我的特定元素的地址`my_boost_array_variable_1`作为 `my_boost_array_variable_2`MPI_Allreduce 的第一个和第二个参数传递：

```
MPI_Allreduce(&my_boost_array_variable_1[2],
              &my_boost_array_variable_2[2], ... 
```

或者我应该这样做：

```
MPI_Allreduce(my_boost_array_variable_1.c_array() + 2,
              my_boost_array_variable_2.c_array() + 2, ... 
```

更新：C 函数需要一个连续的数据块，从 void *sendbuf 开始。这里的问题是这两个调用在这方面是否正确。&my_boost_array_variable_1[2] 是否指向与 my_boost_array_variable_1.c_array() + 2 相同的位置？这些调用是否等效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:01:50.360

对我来说，第一个比第二个更清楚。但实际上我认为他们是平等的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T00:42:07.363

根据[http://www.boost.org/doc/libs/1_52_0/doc/html/boost/array.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost/array.html)任何版本都不会抛出。（无法评论我的小名声:-)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:53:08.310

哪个更快取决于系统，您可以自己查看汇编代码。

第一种方法更安全，因为如果您尝试处理不合法的索引，它会抛出异常。

第二种方法通常更快，因为您只有一个取消引用。

# javascript - Google Geocoding API 在负载上挂起

> ID：13623127
> 
> 赞同：2
> 
> 时间：2012-11-29T09:58:48.447
> 
> 标签：javascript, xml, dynamics-crm-2011, google-geocoder, xmldom

我正在尝试在 Dynamics CRM 2011 中使用 Google 的 GeoCoding API，但遇到了问题。我编写了以下 JavaScript 函数：

```
function geocodeXML()
{
    var mDataPath = "http://maps.googleapis.com/maps/api/geocode/xml?address=WV1+1UL&sensor=false";
    xmlDoc=new ActiveXObject("Microsoft.XMLDOM");
    xmlDoc.async=false;
    alert(1);
    xmlDoc.load(mDataPath);
    alert(2);
    var theLat = xmlDoc.getElementsByTagName("lat")[0].childNodes[0].nodeValue;
    var theLng = xmlDoc.getElementsByTagName("lng")[0].childNodes[0].nodeValue;
    alert(theLat + ", " + theLng);
} 
```

我已经在我的计算机上本地运行它并且它工作正常 - 它运行代码并给我一个带有纬度和经度的警报框。但是，一旦我将它包含在 CRM 中，它就拒绝运行。我已经添加了上面的警报框，它是两个警报之间的线 (xmlDoc.load(mDataPath);) 导致了问题。我得到带有“1”的警报框，然后没有别的。我尝试将代码包含在 CRM 函数中（由于某种原因，这给了我一个“访问被拒绝”错误）并且我尝试将它包装在 HTML 中并将其包含为 iframe。

我已经看到这个 API 返回一个名为“Status”的标签，它应该给出“OK”、“ZERO_RESULTS”、“OVER_QUERY_LIMIT”、“INVALID_REQUEST”等响应，所以我知道这不是配额或我请求的语法的问题- 就好像无法从该地址的服务器访问 API。正如我所说，在本地运行代码工作正常，我从 API 得到响应（状态为“OK”），但是一旦它在 CRM 中，它什么也不返回。

我真的不知道是什么导致了这种情况，我会很感激可以提供的任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T04:50:55.020

我相信您需要更改浏览器设置才能使这项工作在您尝试从脚本进行跨站点调用时工作。

转到 IE 中的安全设置。从杂项中选择“跨域访问数据源”并启用它。从脚本转到“启用 XSS 过滤器”并禁用它。不是最理想的，但我认为它可能对您有用 - 并且至少为您确认这是一个跨站点脚本问题。

如果你把它放在一个 IFRAME - 至少值得测试 - 确保你在 IFRAME 设置中启用跨站点脚本。

# android - 如何解析 JSON 响应？

> ID：13623130
> 
> 赞同：0
> 
> 时间：2012-11-29T09:58:55.683
> 
> 标签：android, json

我已经调用了 webservice 并得到了如下响应，请告诉我如何解析它.....

```
FillAutoCompleteBudgetMasterItemsByMasterIdResponse{
FillAutoCompleteBudgetMasterItemsByMasterIdResult=anyType{
string=Agrochemicals; string=Certification fee; string=Consultation; 
string=Contracts; string=Electricity; string=Fertilizers; string=Fuel;
string=Implements and Equipments; string=Insurance; string=Irrigation and Water;
string=Labours; string=Machinery usage; string=Marketing; string=Other Items; 
string=Post Production; string=Repairs and Maintenance; string=Seeds/Seedlings ;
string=Services; string=Training; string=Transportation; }; } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:54:17.657

这不是一个有效的响应数据。因为它应该包含一个（键，值）。通过使用 key 我们得到值。

```
JSONArray arObjects = new JSONArray(Respone);for(int i = 0; i < arObjects.length(); i++)
JSONObject jOb =  arObjects.getJSONObject(i);                       
String date = jOb.getString("PublishedDate");
String price = jOb.getString("introduction"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:01:45.510

这不是一个有效的 json。字符串没有被引用。

[http://json.org/example.html](http://json.org/example.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:01:40.597

这不是有效的 json 格式..您不能使用 Json 解析...如果字符串不是有效的 json 格式，则会引发异常...封闭 [] 中的字符串在调用 josn 数组中大括号.. 封闭中的字符串{} 大括号中调用 josn 对象.. 通常 json 数组包含 josn 对象

```
JSONArray array= new JSONArray(jsonString);
for(i=0;i< array.length ;i++){
   JSONObject result = new JSONObject(array.get(i));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:02:56.963

本教程可能会帮助您以一种轻松无忧的方式解析 json。请检查[一下](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)。

# java - 可以确定 Java Comparator 的进度吗？

> ID：13623131
> 
> 赞同：7
> 
> 时间：2012-11-29T09:59:00.313
> 
> 标签：java, sorting, progress, comparator

我正在使用一个`Comparator`实现来对大量对象进行排序。根据此集合中对象的类型，排序需要几毫秒到半分钟。**有什么方法可以确定`Comparator`while 排序的进度吗？**我想为用户可视化这一点。

```
Collections.sort(sorted, new Comparator<Object[]>() {
    public int compare(Object[] o1, Object[] o2) {
        /* do it... */
        return order;
    }
} 
```

该集合可能包含简单的短字符串对象、日期对象或（最坏情况）CLOB 对象，它们需要在排序时获取数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:09:19.833

您可以通过编写一个计算“全局”变量的比较器来做到这一点。

但是为了分析目的可视化进度，你必须复制你的列表，并对其进行两次排序。第一次确定比较器调用的次数。下一次你知道你已经走了多远，通过将当前计数器与第一次排序的值进行比较。

当另一个线程正在排序时，您需要第二个线程来读出计数器。

另一种可能性是估计比较器调用的数量：平均而言，这可能与 n * ld (n) 有关。

然后再次计数，并从另一个线程读取。这样，您只需排序一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:53:22.050

我已经这样做了（剥离示例）...感谢您的输入。

```
{
    final long mc = (long) (data.size() * Math.log(data.size()));
    Collections.sort(sorted, new Comparator<Object[]>() {
        long c = 0; 
        public int compare(Object[] o1, Object[] o2) {
            // Using Events to update the GUI...
            Events.instance().raiseEvent(StatusBean.EVENT_STATUS, "Sorting...", (int) ((100.0 / mc) * this.c++));
            /* do it... */
            return order;
        }
    }
} 
```

# java - 使用 JPA 进行 Maven 测试的问题

> ID：13623132
> 
> 赞同：1
> 
> 时间：2012-11-29T09:59:02.643
> 
> 标签：java, jakarta-ee, maven, jpa

我正在尝试使用各种模块（如 common、server、war）构建一个 maven 项目。我将实体 bean 和其他 JPA 内容保存在公共模块中。项目文件夹结构如下:::

```
common  
-->src  
---->main  
----->java  
------>com  
------->hello  
-------->domain     --------- Domain Classes  
----->resources  
------>META-INF     --------- persistence.xml    

---->test  
----->java  
------>com  
------->hello
-------->test
--------->domain     --------- Test Classes  
----->resources  
------>META-INF     --------- persistence.xml 
```

我有两个 persistence.xml 第一个在 src\main\resources\META-INF 第二个在 src\test\resources\META-INF。为了执行测试用例，我稍后会将第二个 persistence.xml 指向内存数据库。

在测试类中，我正在尝试创建实体管理器，如下所示：

```
EntityManager em = (EntityManager) Persistence.createEntityManagerFactory("Test-Persistence").createEntityManager(); 
```

测试用例失败，异常如下：

```
com.hello.test.domain.TestUser: No Persistence provider for EntityManager named Test-Persistence 
```

任何人都可以建议我哪里出错了。

问候
阿米特奈尔

# php - 更改 div 的值 align left or right or center

> ID：13623133
> 
> 赞同：0
> 
> 时间：2012-11-29T09:59:06.387
> 
> 标签：php, jquery

是否可以在 jQuery AJAX 中做到这一点

我有这个 div 与左或右对齐中心

代码

```
<div class="dropdown" id="dropdown_one">
  <h3>Position of logo on the document</h3>
        <input type="hidden" name="c" value="cprof" />
        <input type="hidden" name="user_code" value="<?=$_GET['ucom'];?>" />
        <input type="hidden" name="com_code" value="<?=$_GET['ccom'];?>" />
        <?
        $get_position = SET_SQL( "SELECT * FROM jon_com_add WHERE user_code = '".$_GET['ucom']."' " );
        ?>
        <input type="hidden" name="position_id" value="<?=$get_position['a_id'];?>" />
        <input type="hidden" name="position_change" value="chg" />
        <label>Logo Position : </label>
          <p>
            <input name="logo_position" type="radio" value="left">
            Left

            <input name="logo_position" type="radio" value="center">
            Center

            <input name="logo_position" type="radio" value="right">
            Right
          </p>
        <label>Logo Width</label>
        <input type="text" name="logo_width" value="632 x 128">
        <p>Format logo: <span id="logo_size">632 × 128</span></p>                  
</div><!-- .dropdown_menu -->

<div class="company_name" align="<?=$set_position['add_position'];?>">
    <strong><?=$set['com_name'];?></strong><br />
    <?=$set['address'];?>
</div> 
```

它已连接到数据库。

现在我的 jQuery

```
$(function(){
    $('input[name=logo_position]').click(function(e) {
        $('<img src="images/ajaxLoader.gif" id="loading" style="width:auto;" />').appendTo(".company_name");
        //Cancel the link behavior
        e.preventDefault();
        //Get the A tag
        var uc = $( 'input[name=usercode]' ).val();
        var cc = $( 'input[name=com_code]' ).val();
        var l_p = $( 'input[name=logo_position]' ).val();
        var aid = $( 'input[name=position_id]' ).val();
        var p_chg = $( 'input[name=position_change]' ).val();

        alert(aid);
        $.ajax({
            type:"GET",
            url:"forms/tem.php",
            data: {ucode: uc, ccode: cc, logo_p: l_p, a_id: aid, chg: p_chg},
            dataType: 'html',
            target: '.company_name',
            success: function(data){
                $(".company_name").find('img#loading').remove();
                $(".company_name").html(data);
            }
        })
    }); 

}); 
```

我在这里尝试做的是，当我单击 logo_position 上的单选按钮时，`div class="company_name" align="left"`将会改变。例如我点击中心它应该在中心。

我的 jQuery Ajax 错了吗？它不会保存在数据库中，唯一保存的是第一个单选按钮。但是当我单击中心时，ajax 将刚刚读取。

就像我在做实时取景一样。所以当我改变一些东西时，当我点击它时，它也会改变字体和其他东西的位置......

这可以在jquery上做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:07:30.467

尝试基于单击单选按钮对齐 div：

```
$('input[name=logo_position]').click(function(e) {

//code for changing align of div for respective button click
$('.company_name').attr("align",$(this).val());

}); 
```

[演示](http://jsfiddle.net/Nb3tp/2/)

# iphone - 实现老虎机游戏动画

> ID：13623134
> 
> 赞同：1
> 
> 时间：2012-11-29T09:59:11.940
> 
> 标签：iphone, cocos2d-iphone, ios6

我正在 cocos2D 中开发老虎机游戏。我想实现拉肝的动画。正如我想要的所附图像一样，用户触摸肝脏并将其向下拉，肝脏会产生动画效果，就像它被拉动的方式一样，它在 z 方向上向外移动到向下的一半。我怎样才能实现这个动画效果？

![在此处输入图像描述](../Images/a8a07ca31f308080013dfc2093710236.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:04:13.373

在搅拌机（免费）中使杠杆成为 3d 模型，用杠杆为模型蒙皮。

在搅拌器中为控制杆设置动画，然后逐帧保存动画图像。

为每一帧制作一个png文件列表（目标c不喜欢gif文件）

制作一个动画数组和一个 UIImageView。将 UIImageViews 动画图像设置为数组。

当您希望用户模拟拉动杠杆时，请将 UIImageView 设置为重复计数为 1 的动画。

如果需要，将动画向后复制以使其恢复原位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:21:21.317

如果您希望游戏具有 3d 外观的杠杆，我认为已经给出了最佳答案。

另一种方法是在缩小手柄高度时增加杠杆球 (SPIN) 的尺寸。这也会使手柄朝向和远离玩家移动时具有相似的外观。

# sql-server - 使用 Visual Studio 将表从一个数据库复制到另一个数据库

> ID：13623138
> 
> 赞同：1
> 
> 时间：2012-11-29T09:59:19.953
> 
> 标签：sql-server, visual-studio-2010, copy-paste

我一直无法在我的 PC 上安装 SQL Server Management Studio，让我说如果我不想这样做，那么，有没有办法

**在没有 sql management studio 的情况下使用 Visual Studio 将数据库表从一个数据库复制到另一个数据库？**我可以复制但找不到将其粘贴到目标数据库的选项

我在 target_databse 中创建了具有相同结构的表，所以我需要一个类似的查询

```
Insert Into target_Database.dbo.dishes (id, name,price)
Select id,name,price From source_Database.dbo.dishes 
```

还是visual studio提供的任何向导？

我曾尝试进行数据比较，但无法在那里连接 source_database。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:21:38.437

您还可以使用 osql 或 sqlcmd 命令行工具来操作您的数据库。

# haskell - 带有 foldr 和 'where' 的 haskell 语法

> ID：13623141
> 
> 赞同：1
> 
> 时间：2012-11-29T09:59:30.880
> 
> 标签：haskell, syntax

`foldr (+) 0 [1,2]` 返回`3`

我怎么能用它来写呢`'where'`？

`foldr f 0 [1,2] where f = (+)`返回`"parse error on input 'where'"`

编辑：实际上我正在尝试制作笛卡尔积，如示例中所示

```
cprod = foldr f [[ ]]
where f xs yss = foldr g [ ] xs
where g x zss = foldr h zss yss
where h ys uss = (x : ys) : uss 
```

`where`但是，当我尝试加载文件时，这再次在输入上给出解析错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:08:47.890

`... where ...`不是表达式。`where`与绑定相关联，而不是表达式。

您可以使用`let`: `let f = (+) in foldr f 0 [1,2]`，或者您可以将它与一些绑定一起使用：`x = foldr f 0 [1,2] where f = (+)`。

* * *

以下是您编辑的代码的语法有效版本（它仍然损坏，但这不再是语法问题:-)）。您只想为`where`每个绑定使用一个，并且您希望`where`比函数的主体缩进更多。

```
cprod = foldr f [[ ]]
  where
    f xs yss = foldr g [ ] xs
    g x zss = foldr h zss yss
    h ys uss = (x : ys) : uss 
```

* * *

再看一遍，我发现我误解了您的代码——您有 3 个`where`s，因为您希望每个 s 都应用于前面的函数。`where`在这种情况下，您必须按照我所说的方式缩进s，例如

```
cprod = foldr f [[ ]]
  where f xs yss = foldr g [ ] xs
          where g x zss = foldr h zss yss
                  where h ys uss = (x : ys) : uss 
```

如果你坚持这样使用`where`并且不喜欢深度缩进的代码，你可以使用显式`{}`/`;`而不是布局。一个极端的情况是

```
{
cprod = foldr f [[ ]]
where { f xs yss = foldr g [ ] xs
where { g x zss = foldr h zss yss
where { h ys uss = (x : ys) : uss } } }
} 
```

但这通常不被认为是好的风格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T10:35:41.580

作为对您的编辑的回应，您的代码应该是

```
cprod = foldr f [[ ]]
  where f xs yss = foldr g [ ] xs
          where g x zss = foldr h zss yss
                  where h ys uss = (x : ys) : uss 
```

重要的是：

*   `where`附加到一个方程，而不是一个表达式
*   `where`必须相对于它所附加的等式缩进（所以第一个比`where`缩进更多`cprod`，第二个`where`比 缩进更多`f`，等等）
*   shachaf 的回答在语法上是正确的；但是您的示例代码`h`使用了`x`定义的 in`g`和`g`使用`yss`定义的 in `f`，这就是为什么在这种情况下我们确实需要`where`为每个额外的函数添加一个

# mysql - 如何生成“TABLE_COLLATION”不是“latin1_swedish_ci”而是“utf8_general_ci”的表的“DDL”

> ID：13623143
> 
> 赞同：0
> 
> 时间：2012-11-29T09:59:37.550
> 
> 标签：mysql, database, spring, character-encoding

我是新手！我已经修改`default-character-set=utf8`并`character-set-server=utf8`在名为`my.ini`. 但是生成的表有`TABLE_COLLATION=latin1_swedish_ci`

![我的餐桌信息](../Images/5437f73d405b826e79bb5f6c9eb38e9c.png)

![我的文档](../Images/5aa8cab2dde2e840bccfc57e58d275d6.png)

注意：JPA hibernate-implements 生成的表： ![在此处输入图像描述](../Images/a8f066aa90224831add7aa65a0158de4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:35:16.523

如果您没有在 CREATE TABLE 语句中指定字符集/排序规则，那么将使用数据库字符集/排序规则创建新表。

因此，对于具有 latin1 字符集的现有数据库，您应该执行以下操作 -

```
CREATE TABLE table1 (
  column1 VARCHAR(20),
  column2 VARCHAR(20)
)
CHARACTER SET utf8
COLLATE utf8_general_ci; 
```

* * *

```
-- show current database name
SELECT DATABASE();

-- show CREATE DATABASE statement with charset\collation for DB
SHOW CREATE DATABASE <database name>; 
```

# xcode - Interface Builder 的“模拟界面”在 xcode 4.6 中消失了吗？

> ID：13623144
> 
> 赞同：2
> 
> 时间：2012-11-29T09:59:39.127
> 
> 标签：xcode, interface-builder

是否可以在 xcode 4.6 中“模拟界面”？该命令似乎丢失了:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-15T19:48:28.847

我正在使用 Xcode 5，正如其他人指出的那样，您可以在 Editor-> Simulate Document（不是 Edit 菜单）下找到此功能。

但是，此功能*仅*适用于 Mac xib，*不适*用于 iOS xib。

我猜这可能与最初提出问题时 Xcode 4.6 中的情况相同，因此其他问题和评论中的混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T07:09:18.543

*是否可以在 xcode 4.6 中“模拟界面”？该命令似乎丢失了:-(*

看来，NO

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T08:44:08.600

在 xcode 4.6 中，您可以从菜单栏中找到：

*编辑器*（**非** *编辑*）菜单>>*模拟文档*

这可能会有所帮助:)

# python - 通过 raw_input 将变量分配给变量？

> ID：13623148
> 
> 赞同：0
> 
> 时间：2012-11-29T09:59:41.003
> 
> 标签：python, logic

我试图将用户的输入输入到变量中，但我希望它分配一个已经定义的不同变量，而不是字符串、浮点数或整数。伪ish示例：

```
xy = 23
a = raw_input("Enter a variable") xy
print (a)
23 
```

是的，这可以通过 if 变量来控制，但对于许多变量，我相信这不是很实用？我打字没问题，只是想知道这不是不好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:06:27.540

您可以使用`globals()`获取包含全局命名空间或`locals()`本地命名空间中所有变量的字典：

```
>>> xy = 23
>>> a = globals()[raw_input("Enter a variable ")]
Enter a variable xy
>>> print (a)
23
>>> globals()
{'a': 23, '__builtins__': <module '__builtin__' (built-in)>, '__package__': None
, 'xy': 23, '__name__': '__main__', '__doc__': None} 
```

[有关他们的更多信息](http://www.diveintopython.net/html_processing/locals_and_globals.html)。在顶层，两者都将返回相同的 dict，但在函数内部使用时可以看出区别：

```
>>> def foo(x):
...   print globals()
...   print locals()
...
>>> foo(10)
{'a': 23, '__builtins__': <module '__builtin__' (built-in)>, '__package__': None
, 'xy': 23, '__name__': '__main__', 'foo': <function foo at 0x00BC5FB0>, '__doc_
_': None}
{'x': 10} 
```

请注意，此技术不涉及`eval`任何方式，因此如果用户尝试输入恶意输入，它只会引发`keyError`. 但是，根据您计划对变量执行的操作，仍然可能存在一些安全风险（从这个意义上说，使用`locals()`更安全，因为您可以控制可以通过这种方式访问​​的精确变量集）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:06:26.210

你在寻找这样的东西吗？

```
xy = 23
a = eval(raw_input("Enter a variable"))
print (a) 
```

在用户输入未知变量的情况下添加检查的任务留给读者......

还要注意这种方法的潜在安全问题。一种更安全的方法是通过定义应该使用的特定`dict`s来限制评估范围。`eval`阅读更多内容`help(eval)`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:08:05.780

只需将您的 var 保存在字典中，它也可能是最安全的：

```
In [52]: d={'x':1,'y':2,'z':3}

In [53]: a=d.get(raw_input('enter var'),None) 
```

例子：

```
In [57]: a=d.get(raw_input('enter var: '),None)

enter var: y

In [58]: print a
2

In [59]: a=d.get(raw_input('enter var: '),None) # You can specify a default value

enter var: Foo

In [60]: print a
None 
```

# web-services - 使用 CAMEL 与 PostgreSQL 同步

> ID：13623150
> 
> 赞同：0
> 
> 时间：2012-11-29T09:59:44.413
> 
> 标签：web-services, spring, apache-camel

我有 Spring WS，它在 SOAP 请求后在数据库中创建记录，然后它应该等到响应出现。

（我在 DB 中有两个表 - requestTable - 记录是在对 WS 的请求到来时创建的，而 responseTable - 记录是由独立来源创建的）。

当方法检测到与请求链接的记录出现在 responseTable 中时，WS 发送正确的响应。

问题在于同步，因为我不能（实际上我可以但我不想）创建等待 n 秒的线程，我想使用 CAMEL 来实现它，我在某处读到 CAMEL 实现了适合这种类型的方法的情况，现在我再也找不到了。

我有一个问题要问你：你有提示我怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:57:43.297

我会发布我这样做的方式。

在 WS 和数据库之间使用 JMS 通道的解决方案在这里描述的效果很好： [Transparent Asynchronous Remoting via JMS](http://hwellmann.blogspot.com/2011/03/transparent-asynchronous-remoting-via.html)

# html - 下拉菜单在一行中对齐

> ID：13623151
> 
> 赞同：-2
> 
> 时间：2012-11-29T09:59:49.180
> 
> 标签：html, drop-down-menu, menu

我做了三个下拉菜单。我想一个接一个地对齐。下面是我正在使用的代码。但它不在同一条线上。我想要的是第一个应该在左边，第二个应该在中间，第三个应该在右边。

首先是

```
<div style="float:left;">
<FORM name="mapform" method="POST">
<SELECT name="jump" size="1">
<OPTION value="" SELECTED>Select the Category</option>
<OPTION value="http://www.fe dri.com/posting.php?mode=post&f=1">Ask a Question</option>
<OPTION value="http://www.fe dri.com/posting.php?mode=post&f=4">Vehicle for Sale</option>
</SELECT>
<INPUT type=button onClick= "location = '' + document.mapform.jump.options[ document.mapform.jump.selectedIndex ].value;" value="Place an Ad!">
</FORM>
</div> 
```

其次是

```
<div style="float:center;">
<FORM name="mapform2" method="POST">
<SELECT name="jump2" size="1">
<OPTION value="" SELECTED>Select the Category</option>
<OPTION value="http://www.fe dri.com/discuss">General Discussion</option>
</SELECT>
<INPUT type=button onClick= "location = '' + document.mapform2.jump2.options[ document.mapform2.jump2.selectedIndex ].value;" value="Quick View !">
</FORM>
</div> 
```

第三是

```
<div style="float:right;">
<FORM name="mapform1" method="POST">
<SELECT name="jump1" size="1">
<OPTION value="" SELECTED>Select the Category</option>
<OPTION value="http://www.fe dri.com/posting.php?mode=post&f=16">Start New General Discussion</option>
<OPTION value="http://www.fe dri.com/posting.php?mode=post&f=28">Start New Event</option>
</SELECT>
<INPUT type=button onClick= "location = '' + document.mapform1.jump1.options[ document.mapform1.jump1.selectedIndex ].value;" value="Start a Discussion!">
</FORM>
</div> 
```

我得到它，如图所示

![在此处输入图像描述](../Images/0f40b58cd5edbee401f213c71de47547.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:02:03.670

没有`float:center`。将前两个 div 向左浮动，最后一个向右浮动。假设您有足够的空间容纳一行中的所有元素，这应该可以解决问题。

这是一个演示：http: [//jsfiddle.net/MCRUX/](http://jsfiddle.net/MCRUX/)

如果您在示例中错过了它，我将每个容器 div 的宽度设置为`30%`：

```
<div style="float:left;width:30%;"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:14:54.090

使用具有 3 列的表格来对齐下拉框。

```
<table width="100%">
  <tr>
    <td align="left">{drop down box 1}</td>
    <td align="center">{drop down box 2}</td>
    <td align="right">{drop down box 3}</td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:13:46.583

正如@Asad 所说，没有什么叫做**float:center**。如果要放置 div 的父元素的大小具有固定大小，则可以进行一些数学计算并确定要放置的 div 的大小。

例如，如果我有一个**960px**的父框并想在其中放置 3 个 div，我会做这样的事情......

```
div.children {
width:313.33px;
margin-right:10px;
float:left;
}

div.children:last-child {
margin-right:0;
} 
```

由于**313.33 X 3 ~ 940**加上总边距将为20**像素**，两者加起来将达到 960 像素。

# jquery - Portlet 仅在 IE7 中正确关闭

> ID：13623159
> 
> 赞同：0
> 
> 时间：2012-11-29T10:00:12.063
> 
> 标签：jquery, html, css, jquery-ui, jquery-ui-sortable

以下代码将关闭我页面上基于[jQuery sortable portlets](http://jqueryui.com/sortable/#portlets)的小部件。

```
$(document).on("click", ".widget_minimise_button", function( ){
    $( this ).closest( ".widget" ).find( ".widget_sub_header, .widget_content" ).toggle();
}); 
```

这就像关闭小部件一样，但是如果我关闭了足够多的小部件以使一列变为空，则将空列右侧的列移动到左侧以填充空列空间。这不应该发生，它在 IE7 中也不会发生，它在 IE7 中可以正常工作，但在 IE8、Google Chrome、FireFox 和 Opera 中则不行。

不是 100% 问题出在哪里，很可能是 CSS 问题？我包括一个完整的 jsFiddle：

jsFiddle：http: [//jsfiddle.net/oshirowanen/89uqU/1/](http://jsfiddle.net/oshirowanen/89uqU/1/)

要关闭小部件，请单击小部件`(c)`标题中的 a，而不是`(c)`页面标题中的。然后点击关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:28:34.507

如果你给你的`.column`东西，`min-height: 100px;`否则`padding-bottom: 100px;`它会解决你的问题。

# jquery-ui - 如何从 jquery datepicker 中选择多个日期到多个选择框

> ID：13623162
> 
> 赞同：0
> 
> 时间：2012-11-29T10:00:26.670
> 
> 标签：jquery-ui, datepicker, jquery-ui-datepicker

> 我必须从单个日期选择器中选择多个日期到多个选择框中。
> 当单击删除按钮时，我还必须从多个选择框中删除选定的日期。
> 
> 有这么多插件，但我必须使用 jquery ui datepicker。
> 
> 例如，我有这样的东西

![我已经在 jsfiddle 中编辑了这个。](../Images/6a5d3a5e291cb9600a3a9a7b00157908.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:29:00.687

您可以使用**multidatepicker** [http://dubrox.github.io/Multiple-Dates-Picker-for-jQuery-UI/](http://dubrox.github.io/Multiple-Dates-Picker-for-jQuery-UI/)，它允许您选择多个日期。

这解决了您使用一个日期选择器选择多个日期的问题，尽管我不确定在多选字段中插入日期。我一完成就会更新答案。

# jsf - 如何在不提交页面内容的情况下使用 JSF 的 h:selectBooleanCheckbox 和 h:dataTable 来获取选中的复选框？

> ID：13623165
> 
> 赞同：3
> 
> 时间：2012-11-29T10:00:30.223
> 
> 标签：jsf, richfaces

在我的应用程序中，我有 ah:datatable，其中包含车辆数据和 h:selectBooleanCheckBox 在其每一行中。我想知道支持 bean 中数据表数据表行中的选定复选框，而不应用任何提交按钮。这样做的想法是；当任何用户单击一个应用程序页面中的复选框时，她/他也可以很容易地看到其他页面中的选定行，因为每个页面中的数据表都包含许多车辆。因此，用户可以在任意页面看到选中的车辆并进行相关操作。

下面显示了我的 JSF 页面的一部分。

```
<rich:dataTable id="vehicleTable" var="vhcl" value="#{mainPage.vehicleList}"
binding="#{mainPage.vehicleTable}" > 
<rich:column id="col_sel" width="10px"
<h:selectBooleanCheckbox title="#{general.showOnMap}" onclick="showOnMap(this)"   id="selectedCheckBox" />
</rich:column>
<rich:column id="trackId" label="#{general.vehicleName}" >
    <f:facet name="header">
     <h:outputText value="#{general.vehicleName}" id="state_name" />
    </f:facet>
<h:outputText value="#{vhcl.vehicle.mtsTrackId}" id="vehicleId" title="#{general.vehicleId}" style="font-size:10px; color:blue;" />
    <br/>
<h:outputText value="#{vhcl.vehicle.vehiclePlate}" id="vehiclePlate" title="#{general.licencePlate}" style="font-size:10px; color:blue"/>
</rich:column>
<rich:column  id="type_col" label="#{general.vehicleType}" >
<f:facet name="header">
    <h:outputText value="#{general.vehichleType}" id="vehichleTypeLabel" />
</f:facet>
<h:graphicImage value="#{vhcl.typeImage}" height="40" width="40" align="left"/>
<h:panelGrid columns="1" align="right">
    <h:graphicImage id="statusImage" value="#{vhcl.statusImage}" title="#{vhcl.status}" height="15" width="15" />
    <h:graphicImage id="motorStatusImage" value="#{vhcl.motorStatusImage}" title="#{vhcl.motorStatus}" height="15" width="15" />
</h:panelGrid>
</rich:column>
<rich:column id="msg_col" label="#{general.lastMessageDate}" >
<f:facet name="header">
    <h:outputText value="#{general.lastMessageDate}" id="lastMsgDateLabel" />
</f:facet>
<h:outputText value="#{vhcl.messageDate}" id="lastMsgDate" /> 
<br />
<h:outputText value="Hız: " />
<h:outputText value="#{vhcl.instantSpeed}" id="lastSpeed" style="color:blue; font-weight:bold" />
<h:outputText value="km/s" />
</rich:column>
<rich:column id="addr_col" label="#{general.address}" >
<f:facet name="header">
    <h:outputText value="#{general.address}" id="addressLabel"/>
</f:facet>
<h:outputText value="#{vhcl.address}" id="addr" />
<br />
<h:outputText value="#{vhcl.location}" id="location" style="color:blue;" />
</rich:column> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:29:23.173

在您的`Vehicle`类中创建一个`Boolean`字段并像这样为其添加`getter`和`setter`方法。

```
private Boolean selected;

public Boolean getSelected() {
  return selected;
}

public void setSelected(Boolean selected) {
  this.selected = selected;
} 
```

然后将您绑定`checkBox`到该属性并添加一个`<a4j:support>`标签，`checkBox`如下所示。

```
<h:selectBooleanCheckbox onclick="showOnMap(this)" value="#{vhcl.selected}">
  <a4j:support event="onchange" ajaxSingle="true"/>
</h:selectBooleanCheckbox 
```

现在，当您选中或取消选中该`checkBox`值时，该值将提交给 bean。然后任何时候你都可以找到是否`vehicle`像这样被选中。

```
if(vehicle.selected != null && vehicle.selected) {
  //vehicle is selected
} 
```

注意：您的表格应该在表格内。

# iphone - 电子邮件形式的可点击文本 + 自定义警报视图

> ID：13623168
> 
> 赞同：0
> 
> 时间：2012-11-29T10:00:36.900
> 
> 标签：iphone, objective-c, xcode

我希望在我的应用程序中，电子邮件 ID 以文本形式书写，但该文本应该是可点击的。单击该弹出窗口时，应该会出现两个字段和两个按钮。这两个字段应该是可编辑的，以便在其中键入“发件人”和“消息正文”。两个按钮是发送和取消。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:04:52.013

只需使用您的电子邮件地址创建按钮并在其上设置选择器，如下所示...

```
UIButton *BtnEmail = [UIButton buttonWithType:UIButtonTypeCustom];
[BtnEmail setBackgroundColor:[UIColor clearColor]];
[BtnEmail setTitle:@"YourEmailId" forState:UIControlStateNormal];
BtnEmail.frame = CGRectMake(85, 100, 150, 39 );/// set your frame
[BtnEmail addTarget:self action:@selector(EmailButtonClicked:) forControlEvents:UIControlEventTouchUpInside];
[self.view addSubview:BtnEmail]; 
```

并在动作事件（方法）中编写此代码..并将这两个委托添加到`.h`文件中`MFMessageComposeViewControllerDelegate`，`MFMailComposeViewControllerDelegate`并且1个框架名称是 `MessageUI.framework`

```
-(IBAction)EmailButtonClicked:(id)sender{

        if ([MFMailComposeViewController canSendMail]) {
            appDelegate.imgCapture = [self captureView];
            [appDelegate.imgCapture retain];
            MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init];
            NSString *mailBody = @"Set Your Body Message";

            [mailComposeViewController setMessageBody:mailBody isHTML:NO];
            mailComposeViewController.mailComposeDelegate = self;
            [self presentViewController:mailComposeViewController animated:YES completion:nil];
        } else {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"e-Mail Sending Alert"
                                                            message:@"You can't send a mail"
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK" 
                                                  otherButtonTitles:nil];
            [alert show];
            [alert release];
        }
} 
```

这些波纹管方法是委托方法..

```
#pragma mark - MFMessage Delegate

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

我希望这可以帮助你...

# java - 使用 GSON 反序列化为 ImmutableMap

> ID：13623175
> 
> 赞同：12
> 
> 时间：2012-11-29T10:00:55.767
> 
> 标签：java, serialization, gson

我想使用 GSON 来反序列化：

```
"starterItems": {
    "Appeltaart": 3,
    "Soap_50": 3
} 
```

...变成番石榴`ImmutableMap`：

```
private ImmutableMap<String,Integer> starterItems; 
```

我以为我只是使用常规的 GSON 映射解析，然后制作结果的不可变副本，如下所示：

```
 gb.registerTypeAdapter(ImmutableMap.class, new JsonDeserializer<ImmutableMap>() {
        @SuppressWarnings("unchecked")
        @Override public ImmutableMap deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {
            return ImmutableMap.copyOf((Map) context.deserialize(json, Map.class));
        }
    }); 
```

但正如预期的那样，这太简单了（没有类型信息）。我得到错误：

```
com.google.gson.JsonParseException: The JsonDeserializer MapTypeAdapter failed to deserialized json object {"Appeltaart":3,"Soap_50":3} given the type interface java.util.Map 
```

我可以做我想做的事吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T10:49:01.730

这不是那么简单，因为您需要维护类型参数以构建包含正确类型的映射。为此，您可以使用`TypeAdapterFactory`，并`TypeAdapter`使用完全指定的`TypeToken`.

```
public class ImmutableMapTypeAdapterFactory implements TypeAdapterFactory {

    public static final ImmutableMapTypeAdapterFactory INSTANCE = new ImmutableMapTypeAdapterFactory();

    @Override
    public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
        if (!ImmutableMap.class.isAssignableFrom(type.getRawType())) {
            return null;
        }
        final TypeAdapter<T> delegate = gson.getDelegateAdapter(this, type);
        return new TypeAdapter<T>() {
            @Override
            public void write(JsonWriter out, T value) throws IOException {
                delegate.write(out, value);
            }

            @Override
            @SuppressWarnings("unchecked")
            public T read(JsonReader in) throws IOException {
                return (T) ImmutableMap.copyOf((Map) delegate.read(in));
            }
        };
    }
} 
```

现在你有另一个问题：默认的 GSON`MapTypeAdapterFactory`会尝试创建一个 的实例`ImmutableMap`，并对其进行修改。这显然行不通。`TypeToken<HashMap<K, V>>`你应该从 中创建一个`TypeToken<ImmutableMap<K, V>>`，但老实说我不知道​​你怎么能做到这一点。相反，您可以使用 an`InstanceCreator`来欺骗 GSON 在实际需要`HashMap`an 时构建 a：`ImmutableMap`

```
public static <K,V> InstanceCreator<Map<K, V>> newCreator() {
    return new InstanceCreator<Map<K, V>>() {
        @Override
        public Map<K, V> createInstance(Type type) {
            return new HashMap<K, V>();
        }
    };
} 
```

显然，您必须同时注册 TypeAdapterFactory 和 InstanceCreator：

```
GsonBuilder b = new GsonBuilder();
b.registerTypeAdapterFactory(new ImmutableMapTypeAdapterFactory());
b.registerTypeAdapter(ImmutableMap.class, ImmutableMapTypeAdapterFactory.newCreator()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-12-06T09:26:04.520

Google 的 Caliper 项目（Java 的 micro-benchmarker）有一个： [https ://github.com/google/caliper/blob/master/caliper/src/main/java/com/google/caliper/json/ImmutableMapTypeAdapterFactory.java](https://github.com/google/caliper/blob/master/caliper/src/main/java/com/google/caliper/json/ImmutableMapTypeAdapterFactory.java)

参考（以防它移动或将来被删除）：

```
/**
 * Serializes and deserializes {@link ImmutableMap} instances using a {@link HashMap} as an
 * intermediary.
 */
final class ImmutableMapTypeAdapterFactory implements TypeAdapterFactory {
  @SuppressWarnings("unchecked")
  @Override public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> typeToken) {
    Type type = typeToken.getType();
    if (typeToken.getRawType() != ImmutableMap.class
        || !(type instanceof ParameterizedType)) {
      return null;
    }

    com.google.common.reflect.TypeToken<ImmutableMap<?, ?>> betterToken =
        (com.google.common.reflect.TypeToken<ImmutableMap<?, ?>>)
            com.google.common.reflect.TypeToken.of(typeToken.getType());
    final TypeAdapter<HashMap<?, ?>> hashMapAdapter =
        (TypeAdapter<HashMap<?, ?>>) gson.getAdapter(
            TypeToken.get(betterToken.getSupertype(Map.class).getSubtype(HashMap.class)
                .getType()));
    return new TypeAdapter<T>() {
      @Override public void write(JsonWriter out, T value) throws IOException {
        HashMap<?, ?> hashMap = Maps.newHashMap((Map<?, ?>) value);
        hashMapAdapter.write(out, hashMap);
      }

      @Override public T read(JsonReader in) throws IOException {
        HashMap<?, ?> hashMap = hashMapAdapter.read(in);
        return (T) ImmutableMap.copyOf(hashMap);
      }
    };
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-07T11:41:50.443

这也适用于 ImmutableMap：[https ://stackoverflow.com/a/7773201/342947](https://stackoverflow.com/a/7773201/342947)

```
public final static class ImmutableMapDeserializer implements JsonDeserializer<ImmutableMap<?,?>> {
    @Override
    public ImmutableMap<?,?> deserialize(final JsonElement json, final Type type,
                                       final JsonDeserializationContext context) throws JsonParseException
    {
        final Type type2 =
            ParameterizedTypeImpl.make(Map.class, ((ParameterizedType) type).getActualTypeArguments(), null);
        final Map<?,?> map = context.deserialize(json, type2);
        return ImmutableMap.copyOf(map);
    }
}

gBuilder.registerTypeAdapter(ImmutableMap.class, new GsonUtils.ImmutableMapDeserializer()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T12:36:30.387

当您添加所需的类型信息时，它会起作用：

```
gb.registerTypeAdapter(
    new TypeToken<ImmutableMap<String,Integer>>(){}.getType(), 
    new JsonDeserializer<ImmutableMap>() {
            @SuppressWarnings("unchecked")
            @Override
            public ImmutableMap deserialize(JsonElement json, 
                                            Type typeOfT, 
                                            JsonDeserializationContext context)
            throws JsonParseException {
                return ImmutableMap.copyOf(
                    (Map) context.deserialize(json, new TypeToken<Map<String,Integer>>(){}.getType()));
            }
        }); 
```

但是，这需要为应支持的所有类型的地图复制该代码。在这方面，弗拉维奥的答案可能是更通用的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-20T20:51:05.900

Just 基于 Flavio 的回答，但采用快速的两步复制和粘贴格式。

1.  创建`GsonUtils`类（我在下面包含）

2.  将所有实例替换`new Gson()`为`GsonUtils.get()`

*GsonUtils.java*：

```
package com.innomatixdata.busscan.utils;

import android.support.annotation.Nullable;

import com.google.common.collect.ImmutableMap;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.InstanceCreator;
import com.google.gson.TypeAdapter;
import com.google.gson.TypeAdapterFactory;
import com.google.gson.reflect.TypeToken;
import com.google.gson.stream.JsonReader;
import com.google.gson.stream.JsonWriter;

import java.io.IOException;
import java.lang.reflect.Type;
import java.util.HashMap;
import java.util.Map;

/**
 * Use this class to get an instance of Gson that is configured for this application.
 */
public class GsonUtils {

    private static final GsonBuilder GSON_BUILDER = new GsonBuilder();

    static {
        GSON_BUILDER.registerTypeAdapterFactory(new ImmutableMapTypeAdapterFactory());
        GSON_BUILDER.registerTypeAdapter(ImmutableMap.class, ImmutableMapTypeAdapterFactory.newCreator());
    }

    public static Gson get() {
        return GSON_BUILDER.create();
    }

    public static class ImmutableMapTypeAdapterFactory implements TypeAdapterFactory {

        @Nullable
        @Override
        public <T> TypeAdapter<T> create(Gson gson, TypeToken<T> type) {
            if (!ImmutableMap.class.isAssignableFrom(type.getRawType())) {
                return null;
            }
            final TypeAdapter<T> delegate = gson.getDelegateAdapter(this, type);
            return new TypeAdapter<T>() {
                @Override
                public void write(JsonWriter out, T value) throws IOException {
                    delegate.write(out, value);
                }

                @Override
                @SuppressWarnings("unchecked")
                public T read(JsonReader in) throws IOException {
                    return (T) ImmutableMap.copyOf((Map) delegate.read(in));
                }
            };
        }

        public static <K,V> InstanceCreator<Map<K, V>> newCreator() {
            return new InstanceCreator<Map<K, V>>() {
                @Override
                public Map<K, V> createInstance(Type type) {
                    return new HashMap<K, V>();
                }
            };
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-01T22:49:51.787

要添加到 Flavio 的答案，可以更改传递给的 TypeToken 的原始类型`getDelegateAdapter()`，从而不需要 InstanceCreator。

```
final TypeToken<T> mapType = (TypeToken<T>) TypeToken.getParameterized(Map.class,
        ((ParameterizedType) type.getType()).getActualTypeArguments());
final TypeAdapter<T> delegate = gson.getDelegateAdapter(this, mapType); 
```

# html - ASCII 术语和 HTML

> ID：13623176
> 
> 赞同：1
> 
> 时间：2012-11-29T10:00:55.407
> 
> 标签：html, ascii

我有一个关于 ASCII 代码和 HTML 的问题。

大多数网站都会说明 ASCII 是什么，但随后会提到 HTML 替代或 HTML 代码之类的内容。这还是ASCII吗？

无论如何，我的实际问题是，`&lt;`ASCII 是什么（如果不是，它是什么“语言”）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:03:11.283

ASCII 是一种编码：它定义了您看到的字符如何以 0 和 1 编码（实际上以字节为单位）。这个问题与浏览器如何显示它在 HTML 文件中解码的字符完全无关。

您可以向浏览器发送包含`&lt;`任何编码字符的文件，无论是 UTF-8、ASCII 还是其他编码。

`&lt;`是一个[字符实体引用](http://en.wikipedia.org/wiki/Character_entity_reference)，来自 SGML，并在 XML 和 HTML 中定义。

这是[关于 HTML4 字符实体的官方参考](http://www.w3.org/TR/html4/sgml/entities.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:06:52.260

`&lt;`是一个 HTML 实体。当无法在浏览器中安全地使用字符时，将使用 Html 实体。例如，如果您想在页面内容中使用小于号，则使用`<`会被浏览器解释为新标签的开始。使用 html 实体告诉浏览器呈现实际字符，而不是将其读取为标记的开头。

[http://www.w3schools.com/html/html_entities.asp](http://www.w3schools.com/html/html_entities.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:49:31.023

该符号`&lt;`由四个字符组成，它们都以 ASCII 字符代码表示，但这并不重要。在 HTML（以及 SGML 和 XML）中，符号表示 LESS-THAN 字符“<”，在大多数情况下。“<” 字符也有 ASCII 表示，但这也无关紧要。

人们经常用“ASCII 字符”这一表述来表示一个以 ASCII 表示的字符，即 ASCII 码。实际上，字符不需要进行 ASCII 编码。但是“ASCII 字符”的概念对于某些实际目的仍然有用。使用它，我们可以说这`&lt;`是一个表示 ASCII 字符的 ASCII 字符序列。

这里的“语言”实际上是一组标记语言，其中一些 ASCII 字符序列被定义为表示某些（ASCII 或非 ASCII）字符。

使用的需要`&lt;`（当您希望包含“<”作为文本内容时）源于以下原则：在 HTML 的大多数上下文中，“<” 字符开始一个标签，而不是被视为这样。

类似的东西在 SGML 传统`&lt;`中称为*实体引用*，尽管在 HTML 上下文中通常以单词*character*为前缀，以强调 HTML 的预定义实体都评估为单个字符。HTML5 草案摒弃了 SGML 的传统，改为使用术语*命名字符引用*。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:07:54.700

> 无论如何，我的实际问题是，< ASCII（如果不是，它是什么“语言”）？

它们被称为实体，是 HTML 的一部分。

# c# - 将图标添加到 TreeViewItem

> ID：13623178
> 
> 赞同：6
> 
> 时间：2012-11-29T10:01:00.007
> 
> 标签：c#, treeview, wpf-controls

我被要求在 WPF 应用程序中更新 TreeVeiw，该应用程序是从类对象动态构建的。正如您将看到的，treeveiw 不受任何约束。下面不是我的代码！！

`<TreeView Grid.Row="0" HorizontalAlignment="Stretch" Name="tvLocations" VerticalAlignment="Stretch" SelectedItemChanged="tvLocations_SelectedItemChanged" />`

```
 private void BuildTreeVeiw(Location locationList)
    {
        this.Title = _selectedLoc.Name +  " - Locations";
        tvLocations.Items.Clear();

        TreeViewItem tvitem;

        tvitem = new TreeViewItem() { Header = locationList.Name, Uid = locationList.Id.ToString() };

        if (locationList.Printers != null)
        {
            TreeViewItem tvprnitem = new TreeViewItem() { Header = "Printers" };
            tvprnitem.FontWeight = FontWeights.Regular;

            foreach (Printer sprinters in locationList.Printers)
            {
                TreeViewItem psubitem = new TreeViewItem() { Header = sprinters.Name, Uid = sprinters.Id.ToString() };
                TreeViewItem psubitem1 = new TreeViewItem() { Header = String.Concat("UNC: ", sprinters.UNC) };
                psubitem.Items.Add(psubitem1);
                tvprnitem.Items.Add(psubitem);
            }
            tvitem.Items.Add(tvprnitem);
        }

        foreach (Location loc in locationList.Children)
        {
            AddChildren(loc, ref tvitem);
        }
        tvLocations.Items.Add(tvitem);
    }

    private void AddChildren(Location child, ref TreeViewItem tvi)
    {
        TreeViewItem tvitem;

        tvitem = new TreeViewItem() { Header = child.Name, Uid = child.Id.ToString() };
        if (child.Name ==  _currentLocation.Name)
        {
            tvitem.FontWeight = FontWeights.Bold;
        }

        if (child.Printers != null)
        {
            TreeViewItem tvprnitem = new TreeViewItem() { Header = "Printers" };
            tvprnitem.FontWeight = FontWeights.Regular;

            foreach (Printer sprinters in child.Printers)
            {
                TreeViewItem psubitem = new TreeViewItem() { Header = sprinters.Name, Uid = sprinters.Id.ToString() };
                TreeViewItem psubitem1 = new TreeViewItem() { Header = String.Concat("UNC: ", sprinters.UNC) };
                psubitem.Items.Add(psubitem1);
                tvprnitem.Items.Add(psubitem);
            }
            tvitem.Items.Add(tvprnitem);
        }
        if (child.Children != null)
        {
            foreach (Location loc in child.Children)
            {
                AddChildren(loc, ref tvitem);
            }
        }

        tvi.Items.Add(tvitem);

    } 
```

这会正确构建树，我被要求做的就是向 TreeViewItem 添加一个图标。该图标会有所不同，具体取决于它是一个位置还是该位置内的打印机。

我看不到如何将图标添加到 TreeViewItems 谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-30T09:31:49.180

我通过改变这条线解决了这个问题

```
tvitem = new TreeViewItem() { Header = child.Name, Uid = child.Id.ToString() }; 
```

至

```
tvitem = GetTreeView(child.Id.ToString(), child.Name, "location.png"); 
```

添加此功能

```
 private TreeViewItem GetTreeView(string uid, string text, string imagePath)
    {
        TreeViewItem item = new TreeViewItem();
        item.Uid = uid;
        item.IsExpanded = false;

        // create stack panel
        StackPanel stack = new StackPanel();
        stack.Orientation = Orientation.Horizontal;

        // create Image
        Image image = new Image();
        image.Source = new BitmapImage
            (new Uri("pack://application:,,/Images/" + imagePath));
        image.Width = 16;
        image.Height = 16;
        // Label
        Label lbl = new Label();
        lbl.Content = text;

        // Add into stack
        stack.Children.Add(image);
        stack.Children.Add(lbl);

        // assign stack to header
        item.Header = stack;
        return item;
    } 
```

工作完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-25T12:12:07.317

非常好。我只是在返回堆栈面板的方法中添加了这个，以使代码更具可读性：

```
private StackPanel CustomizeTreeViewItem(object itemObj)
{
     // Add Icon
     // Create Stack Panel
     StackPanel stkPanel = new StackPanel();
     stkPanel.Orientation = Orientation.Horizontal;

     // Create Image
     Image img = new Image();
     img.Source = new BitmapImage(new Uri("pack://application:,,/Resources/control.png"));
     img.Width = 16;
     img.Height = 16;

     // Create TextBlock
     TextBlock lbl = new TextBlock();
     lbl.Text = itemObj.ToString();

     // Add to stack
     stkPanel.Children.Add(img);
     stkPanel.Children.Add(lbl);

     return stkPanel;
} 
```

* * *

并在 treeView 初始化

```
// Assign stack to header

item.Header = CustomizeTreeViewItem(itemObj); 
```

# magento - 从父块获取值

> ID：13623180
> 
> 赞同：10
> 
> 时间：2012-11-29T10:01:11.267
> 
> 标签：magento

我面临一些难以完成这个看似简单的任务。

我在一个嵌套块（suggest.phtml）中，我想从父块（result.phtml）中获取一个值（搜索结果的数量，以及集合计数）

我错了还是这里没有简单的方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-29T10:50:09.380

好的解决了。

可以通过以下方式访问父块：

```
$this->getParentBlock(); 
```

所以在这种特殊情况下：

```
$searchCount = $this->getParentBlock()
    ->getParentBlock()
    ->getParentBlock()
    ->getResultCount(); 
```

# jquery - 在 django 中使用 jquery 滑块 - 关于 jquery-ui 图像位置的混淆

> ID：13623182
> 
> 赞同：0
> 
> 时间：2012-11-29T10:01:13.683
> 
> 标签：jquery, django, image, jquery-ui

我的 django 应用程序在媒体文件夹中包含所有媒体文件

```
MEDIA_URL = '/site_media/'
MEDIA_ROOT = '/home/me/django/myapp/media/'
...
(r'^site_media/(?P<path>.*)$','django.views.static.serve',{'document_root':settings.MEDIA_ROOT}) 
```

所有图像都在`/home/me/django/myapp/media/img` ，以便我可以通过以下方式访问我的图像`{{MEDIA_URL}}img/myimage,png`

.Similarly，我把 javascript 文件放在 js 文件夹中，并像这样包含它们

```
<script type="text/javascript"  src="{{MEDIA_URL}}js/jquery-1.8.3.js" ></script> 
```

同样，所有的 css 都在 {{MEDIA_URL}} css 位置。

`jquery-ui-1.9.2.custom.js`包含附带的 zip 文件`jquery-ui-1.9.2.custom.css`和一个包含滑块图像的图像文件夹等。在我的 django 应用程序中，

当我想使用 jquery 滑块时，相应的 css 期望它的图像在图像目录中。但是在 {{MEDIA_URL}}css 目录中有一个图像文件夹感觉很奇怪

你能告诉我`jquery-ui`图片应该放在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:44:06.290

将文件放在子文件夹中以将它们放在一起是有意义的。

此外，Django 建议将[`MEDIA_URL`](https://docs.djangoproject.com/en/dev/topics/files/)其用于上传的内容和[`STATIC_URL`](https://docs.djangoproject.com/en/dev/howto/static-files/)静态站点资产。

```
"{{STATIC_URL}}js/jquery-ui-1.9.2/jquery-ui-1.9.2.custom.js"
"{{STATIC_URL}}js/jquery-ui-1.9.2/jquery-ui-1.9.2.custom.css"
"{{STATIC_URL}}js/jquery-ui-1.9.2/images/" 
```

# javascript - 使用 jquery 切换复选框状态

> ID：13623187
> 
> 赞同：0
> 
> 时间：2012-11-29T10:01:23.340
> 
> 标签：javascript, jquery, checkbox

我有以下 HTML 结构：

```
<ul class="cat_select">
    <li class="main_type_check">
         <div class="ez-checkbox">
              <input id="web" class="cat_check_main ez-hide" type="checkbox" name="category" value="Activities">
         </div>
         <label for="web"><b>Web</b></label>
    </li>
    <li>
         <div class="ez-checkbox">
              <input id="events" class="cat_check ez-hide" type="checkbox" name="category" value="Events">
         </div>  
        <label for="events">Events</label>
    </li>
</ul> 
```

使用 jQuery/Javascript 我创建了以下代码：

```
$(".main_type_check .ez-checkbox input").click(function () {

        if($(".cat_check").is(":checked")) {
            $(this).parents(".main_type_check").siblings().find("input").removeAttr("checked");
            $(this).parents(".main_type_check").siblings().find(".ez-checkbox").removeClass("ez-checked");
            $('.what_form').submit();
        }
        else {
            $(this).parents(".main_type_check").siblings().find("input").attr("checked", "true");
            $(this).parents(".main_type_check").siblings().find(".ez-checkbox").addClass("ez-checked");
            $('.what_form').submit();
        }

}); 
```

这将切换复选框，但是如果选中一个复选框（不是主复选框），然后选中主复选框，则只会取消选中选中的子复选框并选中主复选框。其他复选框将保持不变。

我怎样才能完全切换复选框例如：我选择了一个子复选框并单击主复选框 - 这将导致检查主复选框下的每个子复选框，包括已选中的复选框。

谢谢！！

* * *

编辑：

ez-checkbox 和 ez-hide 类并由此复选框插件添加。

* * *

编辑2：

我忘了提到主要类别是由 UL 与同一类分组的`cat_select`。这是结构：

```
<ul class="cat_select">
    <li>MAIN CHECKBOX</li>
    <li>SUB CHECKBOX</li>
    <li>SUB CHECKBOX</li>
</ul>
<ul class="cat_select">
    <li>MAIN CHECKBOX</li>
    <li>SUB CHECKBOX</li>
    <li>SUB CHECKBOX</li>
</ul>
<ul class="cat_select">
    <li>MAIN CHECKBOX</li>
    <li>SUB CHECKBOX</li>
    <li>SUB CHECKBOX</li>
</ul> 
```

* * *

**最终解决方案：**

```
$(".main_type_check .ez-checkbox input").click(function () {
   $(this).closest('.cat_select').find('.cat_check').attr('checked', $(this).prop('checked'));
});

$(".cat_check").click(function() {
   $(this).closest('.cat_select').find('.cat_check_main').attr('checked',$(this).closest('.cat_select').find('.cat_check').not(':checked').length<=0);
}); 
```

谢谢大家的帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:06:48.683

尝试：

```
$('.cat_check_main').click(function(){
    $(this).closest('.cat_select').find('.cat_check').prop('checked', $(this).prop('checked'))
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:33:17.093

我认为这是解决您问题的方法:)

[http://jsfiddle.net/mYYng/3/](http://jsfiddle.net/mYYng/3/)

```
$('.cat_check_main').click(function(){
    $(this).closest('.cat_select').find('.cat_check').prop('checked', $(this).prop('checked'));
});

$('#Situation1 .cat_check').click(function(){
    $(this).closest('.cat_select').find('.cat_check_main').prop('checked',$(this).closest('.cat_select').find('.cat_check').not(':checked').length<=0);
});

$('#Situation2 .cat_check').click(function(){
    $(this).closest('.cat_select').find('.cat_check_main').prop('checked',$(this).closest('.cat_select').find('.cat_check:checked').length>0);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:11:35.897

你离解决方案不远了

```
$(".cat_check_main").click(function () {
    $(this).parents(".cat_select").find(".cat_check").prop("checked", this.checked );
}); 
```

[**在这里**](http://jsfiddle.net/hbC7K/1/)提琴[](http://jsfiddle.net/hbC7K/1/)

# java - Java下界通配符

> ID：13623189
> 
> 赞同：20
> 
> 时间：2012-11-29T10:01:27.337
> 
> 标签：java, wildcard

我正在努力解决这个问题，并想知道是否有人可以解释其中的原因。

我有三个班级：

```
class Angel {}
class Person extends Angel {}
class Employee extends Person {} 
```

当我尝试执行此代码时

```
public static void insertElements(List<? super Person> list){
    list.add(new Person());
    list.add(new Employee());
    list.add(new Angel());
} 
```

我收到一个错误：

```
The method add(capture#5-of ? super Person) in the type List<capture#5-of ? super Person> is not applicable for the arguments (Angel) 
```

我一直阅读文档的意思是`<? super X >`指任何类型的 X 或 X 的超类（所以在我的情况下，Angel 是 Person 的超类）并且应该被允许？明显不是！

有没有人有任何简单的例子？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-29T10:05:10.907

您的直观逻辑说“a`List<? super Person>`是属于 a*或超类型的**事物的列表`Person``Person`*，因此我自然可以将 an 添加`Angel`到其中”。这种解释是错误的。

该声明`List<? super Person> list`保证`list`它将属于允许将任何 a`Person`添加到列表中的类型。既然`Angel` **is not a`Person`**，这自然是编译器不允许的。考虑用`insertElements(new ArrayList<Person>)`. `Angel`在这样的列表中添加一个可以吗？当然不。

推理它的最好方法是它`List<? super Person>`没有明确的类型：它是一种描述允许作为参数的类型范围的*模式。*查看`List<Person>`不是 的子类型`List<? super Person>`，而是与此模式匹配的类型。允许的操作`List<? super Person>`是任何匹配类型允许的操作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-11-24T14:38:59.880

对我来说，这些答案都不够清楚，尽管它们对我有所帮助。在看了很多，我的意思很多之后，我终于想出了通配符最简单的解释：

```
public class CatTest {

    public class Animal {}
    public class Cat extends Animal {}
    public class MyCat extends Cat {}
    public class Dog extends Animal {}

    public static void main(String[] args) {
        List<Animal> animalList = new ArrayList<>();
        List<Cat> catList = new ArrayList<>();
        List<MyCat> myCatList = new ArrayList<>();
        List<Dog> dogList = new ArrayList<>();

        CatTest catTest = new CatTest();
        // Here you are trying to add a MyCat instance (in the addMethod we create a MyCat instance). MyCat is a Cat, Cat is an Animal, therefore MyCat is an Animal.
        // So you can add a new MyCat() to a list of List<Animal> because it's a list of Animals and MyCat IS an Animal.
        catTest.addMethod(animalList);

        // Here you are trying to add a MyCat instance (in the addMethod we create a MyCat instance). MyCat is a Cat. 
        // So you can add a new MyCat() to a list of List<Cat> because it is a list of Cats, and MyCat IS a Cat
        catTest.addMethod(catList);

        // Here you are trying to add a MyCat instance (in the addMethod we create a MyCat instance). MyCat is a Cat.
        // Everything should work but the problem here is that you restricted (bounded) the type of the lists to be passed to the method to be of
        // a type that is either "Cat" or a supertype of "Cat". While "MyCat" IS a "Cat". It IS NOT a supertype of "Cat". Therefore you cannot use the method
        catTest.addMethod(myCatList); // Doesn't compile

        // Here you are adding a MyCat instance (in the addMethod we create a MyCat instance). MyCat is a Cat. 
        // You cannot call the method here, because "Dog" is not a "Cat" or a supertype of "Cat"
        catTest.addMethod(dogList); // Doesn't compile
    }

    public void addMethod(List<? super Cat> catList) {
        // Adding MyCat works since MyCat is a subtype of whatever type of elements catList contains
        // (for example Cat, Animal, or Object)
        catList.add(new MyCat());
        System.out.println("Cat added");
    }
} 
```

最后，这些是结论：

使用通配符时，**通配符适用**于作为参数传递给方法**的列表类型，****而不适用于**尝试将元素添加到列表中时的**元素类型。**在示例中，您会收到以下编译错误：

> CatTest 类型中的方法 addMethod(List) 不适用于参数 (List)

如您所见，错误与方法签名有关，与方法主体无关。因此，您**只能传递**“Cat”或“Cat”( `List<Animal>, List<Cat>`) 的超类型元素列表。

一旦您传递了具有特定类型元素的列表，您**只能将**元素添加到列表中，这些元素要么是“Cat”，要么是“Cat”的子类型，也就是说，当您有一个元素集合时，它的行为**与往常**一样！您不能将“**动物”添加到“****猫**”列表中。正如我之前所说，**通配符不适**用于元素本身，限制仅适用于“列表”。现在，这是为什么呢？由于简单、明显、众所周知的原因：

```
Animal animal = new Dog(); 
```

**如果您可以将**“动物”添加到“猫”列表中，您也可以添加“狗”（“狗”是“动物”），但它不是“猫”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-11T06:26:48.403

像我一直做的那样有一个严格的理解，`List<? super Person>`引入是为了确保`List<Person>`并且`List<Angel>`可以作为参数传入，这是[*上限通配符*](https://docs.oracle.com/javase/tutorial/java/generics/upperBounded.html)提供的灵活性。

但是**在 method**中，在您的情况下，只能将其`Person`子类型或子类型`Person`插入到列表中，以确保列表始终包含有效实例。

例如，如果您要传入 , 的列表`Person`，则只有`Employee`和`Person`可以插入 while`Employee`将被自动类型转换为`Person`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:07:22.043

反过来想一想：对于绑定的类型`List<? super Person>`，`List<Person>`显然是参数的有效类型。如果编译器允许您的代码，它将允许您将某些类型`Angel`的内容插入到`List<Person>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-24T03:33:40.287

通配符基本上允许您指定参数的类型范围，在您编写的情况下

`public static void insertElements(List<? super Person> list)`，编译器将允许您传递 Person 或其任何超类型的列表。让我们看一个具体的例子

```
List<Object> objects = new ArrayList<>();
List<Angel> angels = new ArrayList<>();
List<Person> persons = new ArrayList<>();
List<Employee> employees = new ArrayList<>();

insertElements(objects);      // Works fine, Object is super type of every type
insertElements(angels);       // Works fine, Angel is super type of Person
insertElements(persons);      // Works fine, Person itself
insertElements(employees);    // Error, Employee is neither Person itself nor its a super type of Person 
```

**现在让我们看看为什么会出现该错误**

从上面的代码我们知道您可以将人员、天使或对象的列表传递给`insertElements`它，它会正常工作，现在假设您使用人员列表调用该方法。所以现在是列表`List<Person>`，你做`list.add(Angel());`

这实质上意味着您正在尝试执行`Person person = new Angel();`此分配与类型不兼容并且您收到错误。

# android - Android - 通过 ID 从动态 EditTexts 获取数据

> ID：13623191
> 
> 赞同：0
> 
> 时间：2012-11-29T10:01:32.420
> 
> 标签：android, expandablelistview, expandablelistadapter

我的适配器中有以下代码，它使用方法“et_settingValue.setId(setting.getId());”动态创建 EditTexts 和设置 ID。在 Setting 类的每个实例中都会创建一个 Editbox，它还包含一个用于存储其 id 的变量。

这部分已经正常工作，但现在我需要通过 ID 访问所有创建的 EditTexts 并获取其数据。如果可能，我想避免创建另一个数组来存储 EditText，因为我已经有了它们的 ID。

有没有办法使用我已经拥有的动态 ID 来做到这一点？

```
EditText et_settingValue = (EditText) view.findViewById(R.id.et_settingValue);
et_settingValue.setText(setting.getValue().trim());
et_settingValue.setId(setting.getId()); 
```

## 更新 1

在我的活动中，我正在尝试这样做：

```
EditText et = new EditText(listView.getContext());
//loop to get each object child 
settingConfig.getConfigName(); //ok
settingConfig.getConfigValue(); //ok
settingConfig.getConfigId(); //ok
et = (EditText) listView.findViewById(settingConfig.getConfigId()); //not working
et.getText(); // off course it will not working 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:51:55.233

ListView 使用 RecycleBin 来重用从 Adapter 创建的视图，因此 ListView 将只包含几个子视图，您无法在 ListView 中找到所有 EditText。

要解决您的问题，您应该使用 Map 来记录所有 EditText 的值。将 TextWatcher 添加到它们中的每一个，并在文本更改时刷新 Map 中的值。

# apache - 使用 RewriteMap 协助 RewriteRule

> ID：13623195
> 
> 赞同：1
> 
> 时间：2012-11-29T10:01:43.823
> 
> 标签：apache, mod-rewrite, url-rewriting, rewritemap

我对 mod_rewrite 相当陌生，我正在尝试让 RewriteMap 指令正常工作。感谢您在使用它时提供的帮助。

我们的网址格式如下：

```
example.com/section.php?xSec=[ID] 
```

所以对于第 201 节，即“Apple iPad”，URL 是：

```
example.com/section.php?xSec=201 
```

我想要的是将其重写为：

```
example.com/apple-ipads 
```

我使用以下行在 apache config 中定义了 RewriteMap txt 文件：

```
RewriteMap sections txt:/var/www/rewrites/sections.txt 
```

此 txt 文件包含以下内容：

```
multifunction-printers 102
inkjet-printers 103
laser-printers 104
apple-ipads 201 
```

我在 .htaccess 中尝试了以下重写规则：

```
RewriteRule ^/section.php?xSec=(.*) ${sections:$1} 
```

这是行不通的。我假设我的 RewriteRule 存在问题，或者我将 RewriteMap 指令放在配置文件中的错误位置。有什么建议么？

提前致谢

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:43:17.107

你可以使用这个重写：

```
RewriteRule ^/(.*) /section.php?xSec=${sections:$1|NOTFOUND} 
```

对于发送到的每个请求：

```
example.com/apple-ipads 
```

您应该清楚地看到答案来自：

```
example.com/section.php?xSec=201 
```

如果没有找到密钥，答案来自：

```
example.com/section.php?xSec=NOTFOUND 
```

但是你必须知道这种重写是行不通的，例如当你有一个可以被浏览器编码的空格或其他字符（àèò...）时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T16:24:06.090

你的地图是倒退的。应首先列出密钥。

```
201 apple-ipads 
```

我相信您不应该在模式的开头包含 / 以及其他一些内容；即，假设您的 ID 只是数字，更好的模式是：

```
RewriteRule  ^section\.php\?xSec=(\d+)$  ${sections:$1}  [nocase] 
```

### 更新

我只需要在需要 grep 查询字符串的地方对 uri 做一些 htaccess 工作。这篇[出色的帖子](https://stackoverflow.com/a/2252242/1342926)帮助很大。以前的模式不起作用。这个应该：

```
RewriteCond   %{QUERY_STRING}   xSec=(\d+)$   [nocase]
RewriteRule   ^section\.php$   ${sections:%1}?  [nocase,redirect=perm,last] 
```

如果要在键无法匹配（未经测试）时默认使用原始查询字符串：

```
RewriteCond   %{QUERY_STRING}   xSec=(\d+)$   [nocase]
RewriteRule   ^section\.php$   ${sections:%1?|$0?id=%1}  [nocase,redirect=perm,last] 
```

### 更新 2

最后一个示例中的语法是错误的，因为 ? 在 ${} 函数的匹配侧。从那以后，我使用以下内容更新了自己的规则：

```
# mapped
RewriteCond   %{QUERY_STRING}   xSec=(\d+)$   [nocase]
RewriteCond   ${sections:%1|NOTFOUND}   !NOTFOUND   [nocase]
RewriteRule   ^section\.php$   ${sections:%1}?  [nocase,redirect=perm,last] 
```

使用这组规则，只有带有映射（查询）键的 uri 会被重定向。

干杯。

# vhdl - 混合 VHDL 和 Verilog 设计：哪些免费的仿真和/或综合工具？

> ID：13623197
> 
> 赞同：1
> 
> 时间：2012-11-29T10:01:49.237
> 
> 标签：vhdl, simulation, verilog, synthesis

我正在使用 VHDL 和 Verilog IP开发一个**混合 hdl 设计。**

如果我的目标 FPGA 供应商尚未选择，我可以使用哪种工具**免费****仿真**和**合成**它？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:34:15.953

我认为没有任何免费的模拟器可以进行混合语言设计。也许赛灵思 isim 可以做到这一点，但您只能模拟针对赛灵思的设计（请阅读许可协议了解更多详细信息）。

更多免费模拟器：[http ://www.sigasi.com/faq/which-free-vhdl-simulator-can-i-use](http://www.sigasi.com/faq/which-free-vhdl-simulator-can-i-use)

FPGA 供应商提供免费的综合工具。即：免费，用于较小的 FPGA 芯片。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:58:50.017

Xilinx ISIM 当然可以进行混合语言仿真。上次我经常使用它时，有一些限制：我只能将 Verilog 内存模型添加到我的 VHDL 设计的顶层，而不是在子层（代表 SODIMM 模块）中，并且有一些愚蠢的端口连接错误，可能是现在固定的。

避免使用赛灵思 IP，它会模拟供应商中立代码，尽管从技术上讲这可能违反许可协议。

综合后网表可以是任何一种语言，但如果您的内存模型仅在 Verilog 中可用并且您的测试平台是 VHDL，那并没有多大帮助......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T06:38:12.030

伊卡洛斯 Verilog - [http://iverilog.icarus.com/](http://iverilog.icarus.com/)

我为模拟混合信号（使用 Spice/Gnucap）创建的代码有一个 vvp_embedded 分支。如果有人有兴趣提供帮助，我可能会尝试集成 VHDL 模拟器。

就我个人而言，我认为 VHDL 是一种糟糕的语言，在很多方面都失败了，所以我通常会避免使用它。**

# android - 如何检测Android紧急呼叫？

> ID：13623200
> 
> 赞同：4
> 
> 时间：2012-11-29T10:01:55.760
> 
> 标签：android

简而言之，我想知道用户是否拨打了紧急电话并获得通话时长。

但：

1.  紧急呼叫不发送呼出呼叫广播。

2.  很多手机不记录紧急呼叫记录，我测试了几部手机，这完全取决于制造商。同一厂商可能有不同的策略。

观察 CallLog 是一种解决方案，但我想要更多的覆盖范围，我该怎么办？

# python - django 站点名称需要与注册的域名匹配吗？

> ID：13623206
> 
> 赞同：0
> 
> 时间：2012-11-29T10:02:06.257
> 
> 标签：python, django, django-sites

我是 Django 框架的新手。我创建了一个名为“项目”的站点，它正在本地机器上运行。现在，我正在尝试转到我的测试服务器（“ideometrics.se）”。我创建了一个子域（“project.ideometrics.se”）来从该子域访问此应用程序。我是否必须将我的 django 站点名称更改为“project.ideometrics.se”才能使其在我的服务器上运行？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:12:14.647

不。Django 站点名称与它的托管方式没有任何关系 - 它纯粹用于内部内容，例如在站点本身和电子邮件上显示名称。

# xaml - 使用自定义 UI 代码更改代码后面的安装位置

> ID：13623209
> 
> 赞同：0
> 
> 时间：2012-11-29T10:02:40.420
> 
> 标签：xaml, installation, wix, wix3.6

我正在将我们的安装程序项目从 VS 2008 合并到 VS 2012，然后从基本的 Windows 安装程序合并到 Wix 安装程序。我创建了一个标准的 Wix 安装程序项目，它输出了一个我想要的 MSI。

现在，我创建了一个 WPF/XAML（Win 8 风格）的自定义 UI 和一个使用我们自己的 UI 安装我们的项目的引导程序项目。基础工作很好，即安装和卸载。

我想让用户通过“高级”面板更改安装目录和安装范围（每个用户或每台机器）。我可以在后面的代码中捕获设置，但我无法将这些参数传递给我的安装程序。

我的目录树定义如下：

```
<Directory Id='TARGETDIR' Name='SourceDir'>
  <Directory Id='ProgramFilesFolder' Name='PFiles'>
     <Directory Id='INSTALLDIR' Name='$(var.ProductName)  $(var.CustomerAcronym) v$(var.Version)'>
        <Component Id='MainService' Guid="5E68A5A7-E9B3-4156-B84C-E8D7AA3DCBCC"> 
```

有关如何处理此问题的任何提示，那么如何将用户定义的路径和范围传递给 Wix 安装程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:29:27.657

在您的 UI 中，在引导程序字符串变量中设置安装路径，例如：

```
BootstrapperApplication.Engine.StringVariables["INSTALLPATH"] = "C:\somePath\someDir"; 
```

然后在您的 bundle.wxs 中，将字符串变量作为属性传递，例如：

```
<MsiPackage SourceFile="MyPackage.msi" Id="MyPackage">
    <MsiProperty Name="INSTALLDIR" Value="[INSTALLPATH]" />
</MsiPackage> 
```

更新

如果目录路径包含符号**[**和**]**，引擎将这部分路径解析为变量：

```
BootstrapperApplication.Engine.StringVariables["INSTALLPATH"] = "C:\[somePath]\someDir"; 
```

在这种情况下，Wix Bundle 中不存在变量 [somePath]，因此 INSTALLPATH 将为“C:\someDir”

如果您从 UI 分配目录路径，最好**转义**变量：

```
string directoryPathFromUser = "C:\[somePath]\someDir";
BootstrapperApplication.Engine.StringVariables["INSTALLPATH"] = 
    BootstrapperApplication.Engine.EscapeString(directoryPathFromUser); 
```

# php - 未授权时重定向到 url

> ID：13623210
> 
> 赞同：1
> 
> 时间：2012-11-29T10:02:41.577
> 
> 标签：php, symfony, authorization, symfony-2.1

我在`Symfony 2.1`.

我有一个防火墙设置：

```
firewall:

    main:
        pattern: ^/
        anonymous: ~
        query_string: ~
        access_denied_url: /register

    access_control:
    - { path: ^/, roles: ROLE_USER }
    - { path: ^/register, roles: IS_AUTHENTICATED_ANONYMOUSLY } 
```

我希望这会将用户重定向到该`/register`页面，但任何安全路由仍然告诉我**`Full authentication is required to access this resource.`**.

有人可以在这里指导我采用正确的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:10:28.497

我正在这样做，但没有使用`access_denied_url`. 我认为这就是为什么您会收到严厉的拒绝页面的原因。

使用`form_login`- 未经身份验证的用户将被定向到您的`/login`路线。您可以在那里呈现或链接到注册表单，或`form_login: login_path`将`/register`

[http://symfony.com/doc/2.0/cookbook/security/form_login.html](http://symfony.com/doc/2.0/cookbook/security/form_login.html)

# javascript - 如何让 Gridster 更快地响应以在移动设备上拖动事件

> ID：13623217
> 
> 赞同：1
> 
> 时间：2012-11-29T10:03:11.797
> 
> 标签：javascript, mobile, jquery-events, gridster

我在这里设置了一个基本的 Gridster.js 演示：http: [//jsfiddle.net/dvPaF/](http://jsfiddle.net/dvPaF/)

我的目标是让它对拖动事件更具“响应性”。现在，在用手指拖动元素和实际元素移动之间存在明显的延迟。但是，一旦开始拖动，延迟就会消失。

[我将代码调试到发生此事件](https://github.com/ducksboard/gridster.js/blob/master/dist/jquery.gridster.js#L552)的地步：

```
this.$body.on(pointer_events.move, function(mme){ 
  => first time fast, second time with delay <=
  // I have commented out the "distance" logic
} 
```

第一次开火很快，但第二次有延迟。我已经注释掉了上述事件中的距离逻辑。

我正在各种 Android 设备上对此进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T06:13:42.680

为了在移动设备上更好地执行拖动事件，您可以使用[此库。](http://touchpunch.furf.com/)

它将有助于缓解延迟，您可以在移动设备上包含所有 UI 事件。

# javascript - 将图像粘贴到 TinyMCE 编辑器中

> ID：13623218
> 
> 赞同：6
> 
> 时间：2012-11-29T10:03:19.613
> 
> 标签：javascript, tinymce

我正在寻找将图像粘贴到 TinyMCE 编辑器中的方法，我已经在谷歌上搜索了一段时间，但找不到任何相关的答案。

我可以将带有 src 的内容附加`<img>`到编辑器（当我将图像粘贴到编辑器内部以外的页面上时）。

我无法将其粘贴到编辑器中。我正在使用 Javascript 和 jquery。有没有人有一个想法，我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-26T23:00:17.117

启用[paste_data_images](https://www.tiny.cloud/docs/plugins/paste/#paste_data_images)

> 将 paste_data_images 设置为“true”将允许粘贴图像，而将其设置为“false”将禁止粘贴图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T17:05:29.233

你不能那样做。TinyMCE 和任何其他编辑器都为您提供创建富文本内容的功能。显示图像需要 URL，并且您的计算机上没有图像的 URL。

您需要将图像上传到服务器。您需要能够通过链接访问该图像。该链接就是您插入 TinyMCE 的内容。

# java - JPA Query/Hibernate：列必须出现在 GROUP BY 子句中或在聚合函数中使用

> ID：13623219
> 
> 赞同：3
> 
> 时间：2012-11-29T10:03:19.520
> 
> 标签：java, hibernate, jpa

我有下表`session`：

```
sessionid | user_id | begin (timestamp)
----------+---------+-------------------
     1    |    A    |  1234
     2    |    B    |  4567
     3    |    A    |  8912
     4    |    C    |  3456 
```

该表提供有关用户会话的信息。基本上，会话是用户成功登录的时候。

现在，我想获取最近登录的用户列表。如果用户有多个登录（并且在此表中出现两次或更多），我使用最近的时间戳。该列表应按登录时间排序，以便最近的用户位于列表顶部。

使用以下 SQL 查询我解决了这个问题：

```
SELECT s.user_id, MAX(begin) -- MAX(begin) can be left out, results are the same
FROM session s
GROUP BY s.user_id
ORDER BY MAX(s.begin) DESC 
```

但是，在我的应用程序中，我应该为此使用 JPA 查询。所以我将其转换为以下 JPA 查询：

```
SELECT s.user
FROM Session s
GROUP BY s.user
ORDER BY MAX(s.begin) DESC 
```

我在这里选择用户而不是 user_id，因为用户是会话中的实体。我们也在使用 Hibernate，在执行此查询时，我收到以下错误：

`ERROR [org.hibernate.util.JDBCExceptionReporter] ERROR: column "user1_.id" must appear in the GROUP BY clause or be used in an aggregate function`

[我在 Hibernate 上找到了有关此行为的错误描述。](https://hibernate.onjira.com/browse/HHH-1615)

使用`s.user.id`代替工作正常，但它只给我ID，我需要用户对象。

我现在通过首先获取用户 ID 然后在数据库中查找用户实体来解决此问题，但这需要额外的数据库调用并且对我来说似乎性能不佳，因为我知道它可以在一个查询中完成。

如何解决这个问题呢？

我不允许在应用程序中直接使用 SQL 查询，我必须使用 JPA 查询方法。

# struts2 - 在 Struts 2 中动态生成电子邮件模板

> ID：13623220
> 
> 赞同：1
> 
> 时间：2012-11-29T10:03:28.053
> 
> 标签：struts2

场景是用户请假。当他请求休假时，会向审批者和用户发送一封电子邮件，其中包含有关休假的详细信息。我被困在这一点上，如何创建一个模板，该模板将由请求休假的用户的名称自动更新。我看到 asp.net 应用程序通过使用类似这样的东西在模板中实现

```
Requestor   :   {REQUESTORS NAME}
Leave Type  :   {REQUEST TYPE}
Start Date  :   {REQUEST START DATE}
End Date    :   {REQUEST END DATE}
Number of days  :   {DAYS REQUESTED} 
```

任何想法如何使用 struts 2 任何最小的指导动态创建这样的模板都会非常有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:45:49.643

只需使用一些模板引擎来创建模板并用您的数据填充它。看看 FreeMarker 模板引擎[http://struts.apache.org/2.x/docs/freemarker.html](http://struts.apache.org/2.x/docs/freemarker.html)。Struts2 中默认使用，无需单独添加。

# javascript - 绘制一个简单的表格，其中包含一些没有边框的单元格

> ID：13623223
> 
> 赞同：2
> 
> 时间：2012-11-29T10:03:37.663
> 
> 标签：javascript, html

我想画一张桌子

```
  磷
问 [AB]
  [光盘]

```

其中 A、B、C、D 用边框绘制。Q 和 P 是表格的标签，不应使用边框绘制。Q 和 P 应与 A 对齐。

如何做到这一点？我可以控制在哪一行绘制边框，但这无济于事，因为我无法为整行绘制边框。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:21:12.263

这是非桌面解决方案。

```
 <div id="container">
<div class="row">
    <div id="top">P</div>
</div>
<div class="row">
    <div id="left">Q</div>
    <div id="table">
        <div class="row">
            <div class="cell">A</div>
            <div class="cell">B</div>
        </div>
        <div class="row">
            <div class="cell">C</div>
            <div class="cell">D</div>
        </div>
        <div class="row"></div>        
    </div>
</div>
</div> 
```

CSS

```
 .cell{
    float:left;
    width:50px;
    border:1px solid #c0c0c0;
}
.row{
    display:block;
    overflow:auto;
}
#container{
    display:block;
    overflow:auto;
}
#top{
    display:block;
    overflow:auto;
    margin-left:20px;
}

#left{
    float:left;
    overflow:auto;
}

#table{
    float:left;
    overflow:auto;
    margin:5px;
    margin-top:0px;
} 
```

JSFiddle：http: [//jsfiddle.net/harendra/EUZru/](http://jsfiddle.net/harendra/EUZru/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:08:28.730

执行以下操作：

```
<table border="0" cellspacing="0">
    <tr>
      <th>&nbsp;</th>
      <th>P</th>
      <th>&nbsp;</th>
    </tr>
    <tr>
      <th>Q</th>
      <td class="border">A</td>
      <td class="border">B</td>
    </tr>
    <tr> 
       <th>&nbsp;</th>
       <td class="border">C</td>
       <td class="border">D</td>
    </tr>
</table> 
```

然后使用CSS：

```
 td.border { border: 1px solid #000 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T10:08:46.693

```
td {
  border: 1px solid #999;
  padding: 10px;
}

td.no-border {
  border: 0;
}

tr.no-border td {
  border: 0;
}
```

```
<table>
  <tr class="no-border">
    <td></td>
    <td colspan="2">p</td>
  </tr>
  <tr>
    <td class="no-border">q</td>
    <td>a</td>
    <td>b</td>
  </tr>
  <tr>
    <td class="no-border"></td>
    <td>c</td>
    <td>d</td>
  </tr>
</table>
```

我创建了一个临时 css 类助手`no-border`，并将其仅应用于我想要无边界的单元格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:09:48.803

此解决方案（纯 HTML）是否适合您？

```
<table>
    <tr>
        <td></td>
        <td colspan="2">P</td>
    </tr>
    <tr>
        <td>Q</td>
        <td rowspan="2">
            <table border="1">
                <tr>
                    <td>A</td>
                    <td>B</td>
                </tr>
                <tr>
                    <td>C</td>
                    <td>D</td>
                </tr>
            </table>
        </td>
    </tr>
</table> 
```

[jsfiddle](http://jsfiddle.net/ErGQk/)中的示例

# android - Card.io 不允许扫描信用卡

> ID：13623226
> 
> 赞同：2
> 
> 时间：2012-11-29T10:03:42.347
> 
> 标签：android, card.io

我正在使用 card.io android sdk 集成信用卡支付功能，但它不允许我扫描卡信息，它只是告诉输入卡信息然后什么也不做。

以下是我的代码

包 org.my.scan 示例；

```
import io.card.payment.CardIOActivity;
import io.card.payment.CreditCard;
import org.my.scanExample.R;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MyScanActivity extends Activity
{
    // You MUST register with card.io to get an app token. Go to https://card.io/apps/new/
    private static final String MY_CARDIO_APP_TOKEN = "App_Token";

    final String TAG = getClass().getName();

    private Button scanButton;
    private TextView resultTextView;

    private int MY_SCAN_REQUEST_CODE = 100; // arbitrary int

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        resultTextView = (TextView)findViewById(R.id.resultTextView);
        scanButton = (Button)findViewById(R.id.scanButton);
    }

    @Override
    protected void onResume() {
        super.onResume();

        resultTextView.setText("card.io library version: " + CardIOActivity.sdkVersion() + "\nBuilt: " + CardIOActivity.sdkBuildDate());

        if (CardIOActivity.canReadCardWithCamera(this)) {
            scanButton.setText("Scan a credit card with card.io");
        }
        else {
            scanButton.setText("Enter credit card information");
        }
    }

    public void onScanPress(View v) {
        // This method is set up as an onClick handler in the layout xml
        // e.g. android:onClick="onScanPress"

        Intent scanIntent = new Intent(this, CardIOActivity.class);

        // required for authentication with card.io
        scanIntent.putExtra(CardIOActivity.EXTRA_APP_TOKEN, MY_CARDIO_APP_TOKEN);

        // customize these values to suit your needs.
        scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_EXPIRY, true); // default: true
        scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_CVV, false); // default: false
        scanIntent.putExtra(CardIOActivity.EXTRA_REQUIRE_ZIP, false); // default: false

        // hides the manual entry button
        // if set, developers should provide their own manual entry mechanism in the app
        scanIntent.putExtra(CardIOActivity.EXTRA_SUPPRESS_MANUAL_ENTRY, false); // default: false

        // MY_SCAN_REQUEST_CODE is arbitrary and is only used within this activity.
        startActivityForResult(scanIntent, MY_SCAN_REQUEST_CODE);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        String resultStr;
        if (data != null && data.hasExtra(CardIOActivity.EXTRA_SCAN_RESULT)) {
            CreditCard scanResult = data.getParcelableExtra(CardIOActivity.EXTRA_SCAN_RESULT);

            // Never log a raw card number. Avoid displaying it, but if necessary use getFormattedCardNumber()
            resultStr = "Card Number: " + scanResult.getRedactedCardNumber() + "\n";

            // Do something with the raw number, e.g.:
            // myService.setCardNumber( scanResult.cardNumber );

            if (scanResult.isExpiryValid()) {
                resultStr += "Expiration Date: " + scanResult.expiryMonth + "/" + scanResult.expiryYear + "\n"; 
            }

            if (scanResult.cvv != null) { 
                // Never log or display a CVV
                resultStr += "CVV has " + scanResult.cvv.length() + " digits.\n";
            }

            if (scanResult.zip != null) {
                resultStr += "Zip: " + scanResult.zip + "\n";
            }
        }
        else {
            resultStr = "Scan was canceled.";
        }
        resultTextView.setText(resultStr);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-05T07:35:58.953

```
private static final String MY_CARDIO_APP_TOKEN = "App_Token"; 
```

您的应用令牌无效。使用有效的令牌

# java - 即使在 IE9 中成功安装 JRE 7 update 9 后，测试 java 小程序也在 Windows 7 中启动

> ID：13623227
> 
> 赞同：1
> 
> 时间：2012-11-29T10:03:45.167
> 
> 标签：java, applet, java-7, classnotfoundexception, ioexception

即使在我多次重新安装 JRE 和 Internet Explorer 9 之后，我在测试我的 java 安装时也遇到了以下异常。请帮我。

我正在通过[www.java.com/en/download/testjava.jsp](http://www.java.com/en/download/testjava.jsp)测试我的 jre 安装。

```
java.io.IOException: Invalid Http response
java.io.IOException: Invalid Http response
java.io.IOException: Invalid Http response
java.lang.ClassNotFoundException: testJava2_1.TestVMApplet.class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T13:00:34.433

您的 Java 安装很好，因为您收到了 Java 错误等。

> java.io.IOException：无效的 Http 响应

当程序无法读取或写入（包括获取您尝试运行的小程序）时，将引发 Java IO 异常（输入/输出）。在这种情况下，它被抛出是因为它无法下载和读取，这很可能是由于网络故障或安全设置。

# amazon-s3 - 监控 AWS 账户支出

> ID：13623230
> 
> 赞同：2
> 
> 时间：2012-11-29T10:04:06.927
> 
> 标签：amazon-s3, amazon-web-services, amazon-ec2

我计划构建一个仪表板来监控 AWS 支出，在谷歌搜索后我意识到 AWS 没有 API，因此开发人员可以挂钩并构建一个应用程序来获取实时数据。有没有办法实现它。请帮帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T13:39:08.977

我相信，您希望监控当前的 AWS 使用情况。

AWS 通过“AWS 编程计费访问”提供相同的选项。启用后，AWS 会每隔几个小时将您当前使用情况的 csv 文件上传到指定的 S3 存储桶。

您需要使用您最喜欢的编程语言 AWS S3 SDK 编写程序来下载和解析 csv 文件并获取实时数据。

Newvem 有一套非常好的如何使用 AWS 的指南。指南之一 [http://www.newvem.com/how-to-set-up-programmatic-billing-access-for-your-aws-account/](http://www.newvem.com/how-to-set-up-programmatic-billing-access-for-your-aws-account/) 谈到启用程序化计费访问。

另请参阅[http://www.newvem.com/how-to-track-costs-of-amazon-s3-cloud-objects/](http://www.newvem.com/how-to-track-costs-of-amazon-s3-cloud-objects/)，它讨论了如何跟踪 Amazon S3 的成本。

2) 正如 Mike 所提到的，AWS 还提供了一种使用 Cloudwatch 获取账单警报的方法。

我希望上面有帮助。我建议参考 Newvem 如何指南，以更深入地了解 AWS 及其产品。

谢谢，塔拉尔沙阿

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T17:55:11.693

如果您希望监控实际支出数据，@Taral 是正确的。AWS Programmatic Billing Access 是记录数据的最佳工具。但是，您实际上不必编写仪表板工具来查看它，那里已经有很多。

我工作的公司[Cloudability 会](https://cloudability.com)自动导入您的所有 AWS 详细账单数据，让您构建您需要的所有 AWS 支出和使用情况报告，而无需编写任何代码或弄乱任何电子表格。

[如果您想了解更多信息，请参阅 http://blog.cloudability.com/introducing-cloudabilitys-aws-cost-analytics-powered-by-aws-detailed-billing-files/](http://blog.cloudability.com/introducing-cloudabilitys-aws-cost-analytics-powered-by-aws-detailed-billing-files/)上的一篇不错的博文

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T13:43:17.110

有关启用 Cloudwatch 的监控的更多信息，请参阅 [http://aws.amazon.com/about-aws/whats-new/2012/05/10/announcing-aws-billing-alerts/](http://aws.amazon.com/about-aws/whats-new/2012/05/10/announcing-aws-billing-alerts/)了解更多信息

[要更快地学习 AWS，请参阅http://www.newvem.com/amazon-cloud-knowledge-center/how-to-guides/](http://www.newvem.com/amazon-cloud-knowledge-center/how-to-guides/)上的 Newvem 指南

问候塔拉尔

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-23T07:32:05.627

首先是启用详细账单导出到 S3 存储桶（请参阅[此处](http://docs.aws.amazon.com/awsaccountbilling/latest/about/programaccess.html)）

然后我用 Python（BSD 许可）编写了一个简单的服务器，它可以检索您的详细账单并按服务类型和使用类型对其进行分解（请参阅此 GitHib 存储[库](https://github.com/oddskool/aws_billing)）。

因此，您可以随时查看您的成本是多少以及哪些服务成本最高等。

如果您标记您的 EC2 实例、S3 存储桶等，它们也将显示在专用线上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:53:57.117

CloudWatch 有一个“估计计费”API，可以帮助您完成大部分工作。有关更多详细信息，请参阅此 ServerFault 问题：[https ://serverfault.com/questions/350971/how-can-i-monitor-daily-spending-on-aws](https://serverfault.com/questions/350971/how-can-i-monitor-daily-spending-on-aws)

如果您正在寻找更多详细信息，则需要下载 CSV 格式的账单并进行解析。但是您的问题太笼统，无法提供任何特别有用的答案。即使这也不是实时的。

# android - 根据分享目标分享不同的文字

> ID：13623233
> 
> 赞同：2
> 
> 时间：2012-11-29T10:04:25.150
> 
> 标签：android, shareactionprovider

我的应用分享了一些描述我当前 GPS 位置的文本 - 例如：

> 我在 33° 58' S 18° 27' W。

我正在使用`ShareActionProvider`as 是当前“正确”的方式来做到这一点。正如预期的那样，共享正在 100% 工作。

如果客户高兴，生活会很美好……

* * *

客户不高兴。

* * *

与短信相比，客户希望能够在电子邮件中以不同的方式分享我的位置。

例如

> ```
> I am at a new location:
> - Latitude: 33 58' S
> - Longitude: 18 27' W 
> ```

* * *

*   我相信这是不可能的`ShareActionProvider`- 这是正确的吗？
*   我相信通过发送共享意图是不可能的。

**我有哪些实施方案？**

我是否必须创建一个自定义共享视图，通过向系统查询所有接受共享意图的应用程序来填充它？

* * *

（注意：我认为客户端应该接受默认的 Android 共享行为，但这是必须考虑客户端需求的真实情况）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T06:03:38.313

正确，使用标准是不可能实现的`ShareActionProvider`。看起来你将不得不推出一个自定义`ShareActionProvider`来实现你想要的，如此处所述：

[使用共享操作提供程序时检测共享应用程序](https://stackoverflow.com/questions/15539812/detecting-sharer-app-when-using-share-action-provider/15539927#15539927)

# c# - ASP.NET MVC 中用户级别的统计信息？

> ID：13623234
> 
> 赞同：0
> 
> 时间：2012-11-29T10:04:25.797
> 
> 标签：c#, asp.net-mvc-3, usage-statistics, visitor-statistic

我们的 Web 应用程序有一个非常简单的统计数据收集全局过滤器，但现在我们想收集更多信息，我认为可能有人已经这样做了，那么是否有任何用于 asp.net mvc 的优秀用户跟踪模块的能力加载自定义数据、查看统计图表/等、在 SO/Google/Nuget 库中进行简单搜索并没有给我带来任何有用的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:22:35.793

事实证明，谷歌分析支持用户级别的跟踪： [https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)

# tinymce - MCImage Manager 处理 2 个具有公共文件夹的网站

> ID：13623243
> 
> 赞同：0
> 
> 时间：2012-11-29T10:04:53.480
> 
> 标签：tinymce, mcimagemanager

我的要求

1.  实现 MCImageManager 以便用户可以将图像上传到“集中”文件夹
2.  允许用户在集中的“ImageLibrary”上选择图像并将其放置在网页或博客文章中

重要的：

我需要找到一个解决方案来解决一个挑战。通常，图像放置在网站中存在的文件夹中，例如 ~/Images 或 ~/Content/Images

我们面临的挑战是我将拥有，但是网页将通过单独的网站显示。更具体地说，在典型场景中，用户将通过 MCIMageManager 上传图像，MCIMageManager 将文件放置在 Web 应用程序的文件夹中。所以图片可能会被上传到像 D:\xyz\ImageLibrary 这样的文件夹中。

但是，根文件夹可能是 F:\ 在完全不同的服务器上。

因此，我们需要想出一种在两个网站之间共享图像文件夹的方法，这样无论图像文件夹在哪里，图像都能在 xyz 网站管理模块和实际网站上正确显示。

问候

阿布舍克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:39:22.687

对于这个用例，您应该将服务器 A 的上传目录挂载到服务器 B 的上传目录。

# sql - 为什么自连接语法如此奇怪？

> ID：13623244
> 
> 赞同：0
> 
> 时间：2012-11-29T10:04:58.550
> 
> 标签：sql, database

我在这里重复一个学生的问题。我已经给出了某种解释，但希望你有更好、更清晰的解释。

使用表的两个别名完成自连接：

```
SELECT parent.Name, child.Name
FROM Person parent
INNER JOIN Person child ON parent.Id = child.ParentId 
```

但这听起来就像我们让事情变得复杂。所以：

(1) 真的需要别名吗？为什么？

(2) 从技术上讲，可以只使用一个别名。为什么所有的例子，在线的，教科书，教程，总是使用两个别名？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T10:06:23.340

1) 是的，您必须至少有一个别名。否则，你怎么知道哪个表版本是哪个？

2) 你可以只使用一个别名。两个不是绝对必要的。不过，使用两个别名几乎总是比一个别名更清晰。

哪个更容易一目了然？

```
SELECT parent.Name, child.Name
FROM Person parent
INNER JOIN Person child ON parent.Id = child.ParentId 
```

或者

```
SELECT Person.Name, child.Name
FROM Person
INNER JOIN Person child ON Person.Id = child.ParentId 
```

第一个更好地显示意图。

* * *

顺便说一句，您可能还想给列加上别名。虽然结果中具有相同名称的两列很好，但它可能会造成混淆，并且如果您尝试将结果行放入客户端代码中的某种关联容器中，它会中断。因此，例如，查询的更好版本将是：

```
SELECT parent.Name ParentName, child.Name ChildName
FROM Person parent
INNER JOIN Person child ON parent.Id = child.ParentId 
```

# c# - 如何关闭大写锁定键

> ID：13623245
> 
> 赞同：6
> 
> 时间：2012-11-29T10:05:00.500
> 
> 标签：c#, wpf

我如何关闭文本框中的大写锁定键。我正在使用 WPF 表单。

当文本框聚焦时，我想关闭大写锁定。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T10:36:28.220

很简单，首先添加命名空间

```
using System.Runtime.InteropServices; 
```

然后在类中声明

```
[DllImport("user32.dll")]
static extern void keybd_event(byte bVk, byte bScan, uint dwFlags,
UIntPtr dwExtraInfo); 
```

最后，在 textBox_Enter 事件中添加此代码

```
private void textBox1_Enter(object sender, EventArgs e)
    {
        if (Control.IsKeyLocked(Keys.CapsLock)) // Checks Capslock is on
        {
            const int KEYEVENTF_EXTENDEDKEY = 0x1;
            const int KEYEVENTF_KEYUP = 0x2;
            keybd_event(0x14, 0x45, KEYEVENTF_EXTENDEDKEY, (UIntPtr)0);
            keybd_event(0x14, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP,
            (UIntPtr)0);
        }
    } 
```

此代码将关闭 Capslock .. 我在 enter 事件中使用了它，您可以根据您的要求添加它！

[在此处](http://cboard.cprogramming.com/csharp-programming/105103-how-detect-capslock-csharp.html)查看此链接

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T10:08:10.733

Use this code for WPF froms.

```
private void txt_KeyDown(object sender, KeyEventArgs e)
    {

        if (Keyboard.GetKeyStates(Key.CapsLock) == KeyStates.Toggled) // Checks Capslock is on
        {
            const int KEYEVENTF_EXTENDEDKEY = 0x1;
            const int KEYEVENTF_KEYUP = 0x2;
            keybd_event(0x14, 0x45, KEYEVENTF_EXTENDEDKEY, (UIntPtr)0);
            keybd_event(0x14, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP,
            (UIntPtr)0);
        }

    } 
```

# java - Java将图像插入数据库代码不起作用

> ID：13623251
> 
> 赞同：0
> 
> 时间：2012-11-29T10:05:18.597
> 
> 标签：java, runtime-error, execution, classnotfoundexception

![如您所见，im 在执行 java 文件的当前路径中。](../Images/1066d5c3ca68cc9e9fa3ddfd1aedefdf.png)

如您所见，我在执行java文件的当前路径中。当我编译程序时，我成功获得了一个类文件。但是当我运行它时，我无法执行该程序，因为我在图像中收到错误消息，告诉我该路径中没有这样的类可用..

```
C:\Users\admin>javac insertImg.java

C:\Users\admin>java insertImg
Exception in thread "main" java.lang.NoClassDefFoundError: insertImg
Caused by: java.lang.ClassNotFoundException: insertImg
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
Could not find the main class: insertImg.  Program will exit.

C:\Users\admin> 
```

* * *

## 这是我将图像插入数据库的java代码.....

插入Img.java：

```
import java.sql.*;
import java.io.*;

public class insertImg{
    public static void main(String[] args) {

        System.out.println("Insert Image Example!");
        String driverName = "com.mysql.jdbc.Driver";
        String url = "jdbc:mysql://localhost:3306/";
        String dbName = "hibernatetutorial";
        String userName = "root";
        String password = "root";
        Connection con = null;

        try {
            Class.forName(driverName);
            con = DriverManager.getConnection(url+dbName,userName,password);
            Statement st = con.createStatement();

            File imgfile = new File("images.jpg");
            FileInputStream fin = new FileInputStream(imgfile);

            PreparedStatement pre = con.prepareStatement("insert into Image values(?,?,?)");
            pre.setInt(1,5);
            pre.setString(2,"Durga");
            pre.setBinaryStream(3,fin,(int)imgfile.length());
            pre.executeUpdate();

            System.out.println("Inserting Successfully!");

            pre.close();
            con.close();  

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:43:31.110

![在此处输入图像描述](../Images/51afdbdbff2527781d863c764067b755.png)

我尝试使用 Oracle 数据库必须添加 -classpath ojdbc.jar 并且它也可以从控制台工作，正如您在图像中看到的那样，我在数据库中加载的图像文件位于 D:\ 所以它不在上面截屏

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:06:59.257

insertImg.java 是否有一个具有公共功能的类 insertImg（注意区分大小写）`main`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:26:43.317

我看到你从 roseIndia 获得了代码，它对我有用，没有任何障碍。但是，无论您的展示如何，它仍然很奇怪..我的建议是使用像 eclipse 这样的 IDE

您可以随时尝试以下步骤

1）在你的Mysql数据库中创建一个表来适应上面的代码

```
CREATE TABLE IMAGE
(
 IMG_ID    INT,
 IMG_NAME  VARCHAR2(100),
 IMG       BLOB
) 
```

2）在eclipse中新建一个java项目，新建一个类insertImg，把代码粘贴到那里。请确保您的图像文件路径与您的图像所在的位置相同并运行它。它工作正常

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-24T22:17:07.373

这是一个简单的类路径错误。环境变量允许 Java 知道在`CLASSPATH`哪里寻找类。

不幸的是，Java 不够智能，无法知道它需要在本地目录中查找类。要解决此问题，您只需执行以下语句之一，具体取决于您使用的是 Windows 还是 Linux/Unix：

对于 Windows：

```
set CLASSPATH=.;%CLASSPATH% 
```

对于 Linux：

```
export CLASSPATH=.:$CLASSPATH 
```

# sql - 如何设计多用户数据库？

> ID：13623253
> 
> 赞同：0
> 
> 时间：2012-11-29T10:05:23.903
> 
> 标签：sql, database-design, database-schema

我正在制作一个活动策划网站。在这个网站上，会有很多用户。每个用户都有自己的无菌区。
例如：每个用户都可以创建一个事件和一个来宾列表。现在，可能是创建活动的两个人想要邀请同一个人。我希望那个人（客人）在数据库中被创建两次。以下是我的想法：

### 多个数据库

我会为每个新用户创建一个数据库，每个数据库都有一个相同的模式。

### 带前缀的表格

例如，如果正在谈论用户 234 和 342，则将有两个表（具有相同的模式）234_guests 和 342_guests。

### 一张桌子统治他们

会有一个大的客人表，主键的一部分将是客人所属的用户的引用。

澄清：我将尝试澄清我的问题：约翰在我的网站上开设了一个帐户。他正在为女儿筹办婚礼。Bob 还在我的网站上开设了一个帐户，他正在计划他儿子的 Bar Mitzva。Bob 和 John 都认识一个叫 Jim Halpert 的人。鲍勃和约翰都邀请吉姆参加他们的婚外情。为了注册客人，您必须输入他的信息。我显然不希望 Bob 和 John 访问相同的客人（即使他们是同一个人！），我的问题是如何在这种情况下设计数据库。

考虑到性能、逻辑、数据库规范化，什么是最好的？
还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T18:01:45.557

我可能过度简化了这一点，但我会这样做：

创建一个包含 EventGUID、Location、Date 等字段的 Event 表...然后在您的 Guest 表中包含 EventGUID 字段。此表可能包含以下字段：GuestGUID、EventGUID、名称、地址等...

这样，您可以为客人提供一张桌子，并且他们可以轻松地链接回他们被邀请参加的活动。

在您的示例中，John 在 Event 表中有一个条目，假设 EventGUID='abc'，而 Bob 在 Event 表中有一个条目，EventGUID='xyz'。对于 Jim Halpert，Guest 表中有两个条目。第一个会有 GuestGUID='123' 和 EventGUID='abc'（这是 John 的事件），第二个会有 GuestGUID='456' 和 EventGUID='xyz'（这是 Bob 的事件）。

使用这种方法比为每个用户创建一个数据库或表要干净得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:17:45.340

从我在这里收集的信息来看，您将有以下裁决 =>

*   一个事件可以与多个客人有关系。
*   来宾可以与多个事件建立关系。

您可以使用联结表，而不是创建同一个人的多个实例。从理论上讲，您最终可能会以这种方式复制大量数据。

下面的链接演示了使用连接表的好处。它们可以用在上面的例子中，其中事件和客人有多对多的关系。

这篇文章中的示例涵盖了类似的困境，多个教室和多个学生。

[http://megocode3.wordpress.com/2008/01/04/understanding-a-sql-junction-table/](http://megocode3.wordpress.com/2008/01/04/understanding-a-sql-junction-table/)

希望这可以帮助。

# javascript - Heisenbug 自带无头浏览器

> ID：13623257
> 
> 赞同：5
> 
> 时间：2012-11-29T10:05:34.120
> 
> 标签：javascript, c++, webkit, qt4, headless-browser

我正在开发基于 WebKit（使用 C++/Qt4）并支持 JavaScript 的无头浏览器。这样做的主要目的是能够生成大量基于 JavaScript 的网站的 HTML 快照（参见 Backbone.js 或任何其他 JavaScript MVC）。

我知道没有任何方法可以知道页面*何时*完全加载（请参阅[这个问题](https://stackoverflow.com/questions/13604365/checking-for-pending-calls)），因此，在我收到信号（[此处](http://doc.qt.digia.com/qt/qwebview.html#loadFinished)`loadFinished`的文档）后，我创建了一个计时器并开始轮询 DOM 内容（就像每隔 X 毫秒检查一次 DOM 的内容）以查看是否有任何更改。如果没有，我假设页面已加载并打印结果。请记住，我已经知道这不是近乎完美的解决方案，但这是我能想到的唯一一个。如果您有更好的想法，请回答[这个问题](https://stackoverflow.com/questions/13604365/checking-for-pending-calls)

*注意：计时器是非阻塞的，这意味着在 WebKit 中运行的所有内容都不应该以任何方式受到影响/阻塞/暂停。*

在用一些页面测试了无头浏览器之后，一切似乎都运行良好（或至少如预期的那样）。但这里是 heisenbug 出现的地方。应该从 PHP 脚本调用无头浏览器，该脚本应该等待（阻塞调用）一些输出，然后打印它。

在我的测试机器（Apache 2.3.14，PHP 5.4.6）上，运行 PHP 脚本输出所需的结果，也就是无头浏览器获取网站，运行 JavaScript 并打印用户将看到的内容；但是在生产服务器中运行相同的脚本会获取网站，运行*一些*JavaScript 代码并打印结果。

无头浏览器的源代码和我正在使用的 PHP 脚本可以在[这里](https://github.com/alexandernst/headless_browser)找到。

*注意：计时器（如您在无头浏览器的源代码中所见）设置为 1 秒，但设置更大的时间并不能解决问题*

*注意 2：捕获所有 JavaScript 错误不会显示任何内容，因此这不是因为缺少函数、错误的参数或任何其他类型的错误代码。*

我正在使用 2 个网站测试无头浏览器。 [这个](http://coenraets.org/directory/#employees/11)在我的测试机器和生产服务器上都可以工作，而[这个](http://www.agcinmo.com/#!listado/venta/chalets/)只在我的测试机器上工作。

我更倾向于认为这是第二个网站的 JavaScript 代码中的一些奇怪错误，而不是无头浏览器的代码，因为它生成了第一个网站的完美 HTML 快照，但话又说回来，这是一个heisenbug 所以我不确定是什么导致了这一切。

任何想法/意见将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T06:43:57.370

与其轮询 DOM 变化，不如观察网络请求？这似乎是一种更安全的启发式使用。如果 X 毫秒内没有网络活动（并且没有挂起的请求），则假设页面已完全“加载”。

# mysql - 使用 last_insert_id() 插入重复的密钥更新

> ID：13623258
> 
> 赞同：3
> 
> 时间：2012-11-29T10:05:40.023
> 
> 标签：mysql, stored-functions

我试图创建一个函数

```
CREATE FUNCTION `func`(param1 INT, param2 INT, param3 TEXT) RETURNS int(11)
BEGIN
INSERT INTO `table1` (`column1`, `column2`, `column3` ) 
VALUES (param1, param2, param3)
ON DUPLICATE KEY 
UPDATE `time_stamp` = UNIX_TIMESTAMP();
RETURN last_insert_id();
END 
```

如果它不存在，这将在表中插入一行，否则更新它。请注意，如果函数将插入，我返回`last_insert_id()`的将是正确的，否则如果它更新将是不可预测的。

我知道解决此问题的替代方法是使用单独的`SELECTS`并确定它是否存在；如果存在，则检索`id`并`update`使用它`id`；否则就做一个普通的`INSERT`.

现在我的问题是：除了我现在正在做的事情之外，还有什么替代方法可以做 2 个`sql`陈述吗？

**编辑 1**

附录：

有一个自动递增的索引。要插入的所有值都是唯一的

我宁愿不更改索引，因为它在另一个表中被引用..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T10:41:26.083

如果表包含一`AUTO_INCREMENT`列并`INSERT ... UPDATE`插入一行，则该`LAST_INSERT_ID()`函数返回该`AUTO_INCREMENT`值。如果语句改为更新一行，`LAST_INSERT_ID()`则**没有意义**。但是，您可以**使用**`LAST_INSERT_ID(expr)`. 假设那`id`是`AUTO_INCREMENT`列。要使`LAST_INSERT_ID()`更新有意义，请按如下方式插入行：

```
INSERT INTO table (a, b, c) VALUES (1, 2, 3)
  ON DUPLICATE KEY UPDATE id = LAST_INSERT_ID(id), c = 3; 
```

[在此链接](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)上找到它。虽然我从未尝试过，但它可能会对你有所帮助。

**编辑 1**

您可能想查看[REPLACE](http://dev.mysql.com/doc/refman/5.0/en/replace.html)：

```
REPLACE INTO table1 (column1, column2, column3) VALUES (param1, param2, param3); 
```

这应该适用于具有正确`PRIMARY KEY`/的表`UNIQUE INDEX`。

最后，您只需要坚持：

```
IF (VALUES EXISTS ON TABLE ...)
    UPDATE ...
    SELECT Id;
ELSE
    INSERT ...
    RETURN last_insert_id();
END IF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-07T04:12:40.880

以防万一有人从 Google 出现在这里，我遇到了一个问题，即`ON DUPLICATE KEY UPDATE`不断触发相同的错误值。

当插入一个只有名字和姓氏的用户时，它没有`AUTO_INCREMENT`主键。原因是我们有一个`users`对用户名有唯一约束的表，但它的默认值为`''`. 因此，当您插入一个没有用户名的用户时，它会触发它更新该用户名的重复值，并且该随机帐户会一直作为正确的帐户返回。

解决方案是确保只有`NULL`表中唯一键的默认值也具有单独的自动增量主键，或者您确实为唯一约束生成唯一值。

# ruby-on-rails - Rails 半隔离引擎：布局渲染 heisenbug

> ID：13623259
> 
> 赞同：2
> 
> 时间：2012-11-29T10:05:41.673
> 
> 标签：ruby-on-rails, layout, rendering, rails-engines

我的引擎中有一个奇怪的错误，似乎是随机出现的。问题是：我有一个`Blog`引擎；它有两个主控制器，一个用于前端，另一个用于后端。两者都继承自父应用程序控制器；前端有自己的布局，而后端使用父布局。

在使用 webrick 开发时，前端在第一次加载应用程序时无法使用自己的布局，**但在重新启动 webrick 时可以正常工作**。然后一切正常，除了有时从后端切换到前端时。

该错误似乎没有出现在乘客的生产中。

我怀疑两件事：

*   韦里克有罪
*   存在模块加载顺序问题

任何人都可以知道是什么原因造成的吗？

# c# - 如何在c#中将大图像直接写入bmp文件（不在内存中创建位图对象）？

> ID：13623260
> 
> 赞同：1
> 
> 时间：2012-11-29T10:05:43.783
> 
> 标签：c#, image, bitmap

你好聪明的程序员，

我需要将小图像合并成一个尺寸约为 7600 x 7600 像素的大图像。当我在内存中创建它时，它需要太多的内存，我负担不起。

我认为这样做的好方法是制作缓冲区（对于我想放入大图像中的每张小图片）并直接写入文件（excatly blob - on azure）。有人知道怎么做（任何免费图书馆？）我搜索了谷歌但没有答案（可能是错误的问题 - 我的英语很差）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:30:00.647

如果您谈论的是“bmp”文件，您可以通过将数据直接写入位图文件格式的文件流来实现。这很简单，实际上“bmp”是最简单的图像格式，所以我怀疑你会有什么困难。这里有 2 篇有用的文章详细解释了位图文件格式：

[维基百科中的 BMP 文件格式](http://en.wikipedia.org/wiki/BMP_file_format)

[微软视窗位图](http://www.fileformat.info/format/bmp/egff.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:46:26.977

我不知道有任何图像库可以即时将编码转换为 BMP 格式，因此恐怕您必须自己实现。幸运的是，BMP 格式在不使用压缩时非常简单，而使用 RLE 压缩则不是很困难。它基本上是一个标题，后跟图像像素的原始字节，一行接一行。

这意味着您将不得不加载一行中的所有图像（如果您的目标图像是 30 x 40 图像，您将需要加载 30。）除非您的输入图像也是 BMP 格式并且您没有不介意创建自定义阅读器。

您可以通过在 Google 中输入“BMP 格式”来获取 BMP 文件格式（维基百科也有。）

# ajax - 使用 phonegap 是否可以更快地通过 ajax 调用或读取内容文件加载本地文件？

> ID：13623263
> 
> 赞同：0
> 
> 时间：2012-11-29T10:05:56.073
> 
> 标签：ajax, performance, cordova, filereader

我正在编写一个复杂的**phonegap**应用程序。[在这个应用程序中，一些 html 文件从网上下载并通过 phonegap 文件 api http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#File](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#File)放入设备区域设置文件系统

我需要将这些文件加载​​到特定的 DOM 部分，然后我开始使用对资源的 ajax 调用来执行此操作。我还尝试使用 FileReader api [http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileReader](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#FileReader)读取内容文件，并直接在相关的 DOM 部分中加载内容。

任何一种方法都运作良好，但我不知道一种方法是否存在一些可能的性能问题而不是其他方法。

有人知道**使用 ajax 调用或使用 FileReader 访问文件**并将内容放入 DOM 是否更快（或更好）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:50:31.343

区别并不重要，但 ajax 调用可能会稍微快一点——它是一个 XHR，在 iOS 上，插件调用涉及一个 XHR，然后将文件编码为 URL。

支持自定义 ajax 调用的真正原因是它可以在桌面浏览器上运行，这对于调试非常有用。

文件阅读器插件调用的主要好处是它可以在所有平台上工作，包括浏览器通常无法访问文件的某些情况。

# php - 如何在 PHP 中实现多态性程序？

> ID：13623265
> 
> 赞同：1
> 
> 时间：2012-11-29T10:05:58.743
> 
> 标签：php

嗨，我正在尝试编写代码来实现 php 多态性。不知道代码哪里出错了。它在“致命错误：无法重新声明 Sample::a()”中显示错误。这是我的代码。请解决这个问题。

```
 <?php
 class Sample
{
public function a()
{
 echo "hi";
}
public function a($chr)
{
 for ($chr=0;$chr<10;$chr++)
 echo $chr;
}
 public function a($b,$c)
 {
for($g=$b;$g<$c;$g++)
echo $g
}
}

$s=new Sample();
$s->a();
$s->a($chr);
$s->a(1,10);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:07:11.187

PHP 不支持方法重载……很遗憾！

有一些时髦的方法可以实现一些感觉像是重载的东西，比如使用魔法方法或包装子方法调用。这些甚至都没有接近真实的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:10:44.863

这不是[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)，而是以下内容：

```
class A {
    public function foo() {
        return 1;
    }
}

class B {
    public function foo() {
        return 2;
    }
}

$items = array(new A(), new B());

echo $items[0]->foo();
echo $items[1]->foo(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:14:15.463

[http://www.php.net/manual/en/language.oop5.overloading.php](http://www.php.net/manual/en/language.oop5.overloading.php)

请参阅上面的链接。我想它会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:17:20.587

PHP 不支持您要求的方法重载。

您可以获得的最接近的是使用动态参数来伪造它。类似于以下内容：

```
class dynamic {
    public function example() {
        $args = func_get_args();
        switch(count($args)) {
            case 1 : return $this->example_1arg($args[0]);
            case 2 : return $this->example_2args($args[0],$args[1]);
            //etc..
        }
    }
    private function example_1arg($arg1) {
        //....
    }
    private function example_2args($arg1,$arg2) {
        //....
    }
} 
```

这仍然不能让你正确地重载方法，因为这个例子没有考虑数据类型。您可以在一定程度上使用`instanceof`将其连接起来，但您将无法全程使用，因为 PHP 也不（尚）支持原始类型的类型提示。

# java - Struts 1.2 验证框架：一个单独的验证类

> ID：13623266
> 
> 赞同：0
> 
> 时间：2012-11-29T10:06:03.717
> 
> 标签：java, validation, struts-1

我想验证用户输入。Struts 1.2 本身提供了一个验证框架。但它的验证对我来说还不够。另外我不喜欢将我的验证（因为它可能有更多的代码和逻辑）放入 Form 类中，并且需要与 Action 类的业务逻辑和 Form 类分开。有没有办法在 Struts 1.2 中使用单独的验证类？任何带有示例代码片段的有用链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T21:28:25.163

Struts 使用[Commons Validator](http://commons.apache.org/validator/)。您可以在您想要的代码中使用它的[验证器](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/package-summary.html#package_description)`action`（例如，您从 POJO 中提取数据`form bean`并调用业务逻辑，然后业务逻辑才使用[日历验证器](http://commons.apache.org/validator/apidocs/org/apache/commons/validator/routines/CalendarValidator.html)来检查输入的日期）。

# android - 强制操作栏菜单项分隔线仅显示一个操作

> ID：13623275
> 
> 赞同：1
> 
> 时间：2012-11-29T10:06:30.517
> 
> 标签：android, actionbarsherlock, menuitem

如果只有一个菜单项始终显示在操作栏中，是否可以显示分隔符？menuItem 位于操作栏的右侧，我想在其左侧显示一个分隔线。

# opencv - OpenCV CvLevMarq( ) 类

> ID：13623276
> 
> 赞同：2
> 
> 时间：2012-11-29T10:06:33.250
> 
> 标签：opencv, levenberg-marquardt

我是 OpenCV 的新手，我必须执行一些相机校准功能。谁能告诉我`CvLevMarq()`OpenCV中类的用途是什么以及如何使用它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T11:55:49.877

`CvLevMarq()`function 是 Levenberg-Marquardt 非线性最小二乘算法的实现，用于迭代地找到函数的局部最小值，该函数表示为非线性函数的平方和。它可用于非线性估计基本矩阵。OpenCV 在内部使用该算法从校准模式的多个视图中找到相机的内在和外在参数。您可以将 OpenCV 作为开源代码进行检查，以检查它在校准中的使用方式。[这](http://code.opencv.org/attachments/194/cvcalibration.cpp)是校准源代码的链接。

# wordpress - WPMU - 如何获取当前用户的博客链接？

> ID：13623278
> 
> 赞同：0
> 
> 时间：2012-11-29T10:06:34.653
> 
> 标签：wordpress, networking, dynamic

我正在开发一个 wordpress 网络，我试图弄清楚如何创建一个 if/else 链接，它将当前用户从主站点带到他们博客上的特定页面。例如，理论上这就是我想要实现的 -

```
<?php global $wp_roles;
foreach ( $wp_roles->role_names as $role => $name ) :
if (current_user_can( $role ) && $role == 'HAS A BLOG') { ?>

<a href="<?php URL TO USERS BLOG ?>/SPECIFIC-PAGE/">A Page on your blog</a>

<?php } else {   ?>

<a href="HOME">MAIN SITE</a> 
```

我发现了一些类似的信息，但我根本无法让它为我工作 -[链接](https://wordpress.stackexchange.com/questions/46056/how-can-i-get-multisite-primary-blog-url-or-path-for-current-user)

我怎样才能让它发挥作用？任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:13:35.080

好的，我能够通过使用以下代码实现我想要的 -

```
<?php if(current_user_can( 'edit_posts' )) {
global $current_user;
  $blogs = get_blogs_of_user( $current_user->id );
     if($blogs) {
         foreach ( $blogs as $blog ) {
if($blog->userblog_id != 1) { 
         echo '<li><a href="http://' . $blog->domain . $blog->path .'upload-and-manage-documents/">My Documents</a></li>';
         echo '<li><a href="http://' . $blog->domain . $blog->path .'upload-and-manage-documents/?ptype=settings&tab=gateways">Settings</a></li>';
}
  }
}
}
 ?> 
```

# javascript - onclick 选择整个文本 textarea

> ID：13623280
> 
> 赞同：-1
> 
> 时间：2012-11-29T10:06:36.647
> 
> 标签：javascript, html

我不明白如何在单击文本区域后立即复制到点击板。我的意思是它应该选择其中的所有内容，然后它应该弹出并询问诸如“按 ctrl c”之类的内容复制到剪贴板..

我已经有一个代码但无法在文本区域中选择全文，应该复制到剪贴板..

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
 <script type="text/javascript">

function myfunc2() {
 var selectedobj=document.getElementById('showthis');

  if(selectedobj.className=='hide'){  //check if classname is hide 
    selectedobj.style.display = "block";
    selectedobj.readOnly=true;
    selectedobj.className ='show';
  }else{
    selectedobj.style.display = "none";
    selectedobj.className ='hide';
 }
}

function copyToClipboard (text) {
  window.prompt ("Copy to clipboard: Ctrl+C, Enter", text);
}

function select_all()
{
// alert(document.getElementById("showthis").value);

var text_val=eval("document.getElementById('showthis').value");
text_val.focus();

var copy = text_val.select();
window.prompt ("Copy to clipboard: Ctrl+C, Enter", copy);

}

</script>
 </head>

 <body>

            <label  onclick="myfunc2()">Click here</label>
            <textarea id="showthis" style="display:none" class="hide"  onclick="select_all()" readonly>dfdsfsfasdfdsfsfasdfssdfsfasf</textarea>

 </body>
</html> 
```

任何人都可以看看这个...

**编辑：** 我只需要 Javascript 代码（不是 JQuery）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:21:54.383

尝试使用此代码在 TextBox 或 TextArea 中选择文本：

```
<textarea id="txtSelect">Hello</textarea>

<script type="text/javascript">
    var textBox = document.getElementById("txtSelect");
    textBox.onfocus = function() {
        textBox.select();

        // Work around Chrome's little problem
        textBox.onmouseup = function() {
            // Prevent further mouseup intervention
            textBox.onmouseup = null;
            return false;
        };
    };
</script> 
```

如果您需要选择文本并将其复制到剪贴板，我认为您应该为此目的使用插件。看这个问题 :: [Copy text to the client's clipboard using jQuery](https://stackoverflow.com/questions/1539641/copy-text-to-the-clients-clipboard-using-jquery)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:27:44.687

根据您的代码，我开发了以下[示例](http://jsfiddle.net/YcEjF/36/)，希望对您有所帮助：

**HTML：**

```
<textarea id="showthis" class="hide" readonly>click to copy</textarea> 
```

JS **：**

```
$(function(){
    var select_all = function(control){
        $(control).focus().select();
        var copy = $(control).val();
        window.prompt ("Copy to clipboard: Ctrl+C, Enter", copy);
    }
    $("#showthis").click(function(){
        select_all(this);
    })
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T10:14:10.283

使用 JQuery，它将是：

```
$('#showthis').select() 
```

仅使用 javascript：

```
document.getElementById('showthis').select() 
```

# php - 谁能帮我语法？

> ID：13623281
> 
> 赞同：-3
> 
> 时间：2012-11-29T10:06:40.550
> 
> 标签：php

我试图写如果任何变量是 x （因为它们没有设置）然后返回一条消息，“你错过了一个问题”。

我尝试`$r`使用我需要的消息设置一个变量，然后在`$Q18`放置线的下方 -`if $Q1 == "x"`然后`echo $r`这不起作用。

任何人都可以提供有用的帮助吗？整个代码如下...

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="Locus.css" rel="stylesheet" type="text/css" /> <!-- LINKED ATTACHED STYLE SHEET-->
<title>Locus Test Complete</title>
</head>

<body>
<H4>Thank you for completing this test, please choose another from the menu.</H4>
<?php

/*DECLARING THE VARIABLES FOR ACCESS*/
$username="root";
$password="";
$database_server="localhost";

/*CONNECTING TO THE SERVER*/
$database="locus";
mysql_connect($database_server,$username,$password) or die("cannot connect");

/*CONNECTING TO THE DATABASE*/
mysql_select_db($database) or die( "Unable to select database");

/*CHECK THE STATUS AND DECLARE THE VARIABLES*/
if( isset( $_POST['surname'])) { 
    $Surname = $_POST['surname'];
} else { 
    $Surname = "";
} 

if( isset( $_POST['prison'])) { 
    $Prison = $_POST['prison'];
} else { 
    $Prison = "";
}
/*SHORTHAND WAY TO CHECK THE STATUS AND DECLARE THE VARIABLES*/
$NI = isset( $_POST['NI']) ? $_POST['NI'] : "x";
$Q1 = isset( $_POST['Q1']) ? $_POST['Q1'] : "x";
$Q2 = isset( $_POST['Q2']) ? $_POST['Q2'] : "x";
$Q3 = isset( $_POST['Q3']) ? $_POST['Q3'] : "x";
$Q4 = isset( $_POST['Q4']) ? $_POST['Q4'] : "x";
$Q5 = isset( $_POST['Q5']) ? $_POST['Q5'] : "x";
$Q6 = isset( $_POST['Q6']) ? $_POST['Q6'] : "x";
$Q7 = isset( $_POST['Q7']) ? $_POST['Q7'] : "x";
$Q8 = isset( $_POST['Q8']) ? $_POST['Q8'] : "x";
$Q9 = isset( $_POST['Q9']) ? $_POST['Q9'] : "x";
$Q10 = isset( $_POST['Q10']) ? $_POST['Q10'] : "x";
$Q11 = isset( $_POST['Q11']) ? $_POST['Q11'] : "x";
$Q12 = isset( $_POST['Q12']) ? $_POST['Q12'] : "x";
$Q13 = isset( $_POST['Q13']) ? $_POST['Q13'] : "x";
$Q14 = isset( $_POST['Q14']) ? $_POST['Q14'] : "x";
$Q15 = isset( $_POST['Q15']) ? $_POST['Q15'] : "x";
$Q16 = isset( $_POST['Q16']) ? $_POST['Q16'] : "x";
$Q17 = isset( $_POST['Q17']) ? $_POST['Q17'] : "x";
$Q18 = isset( $_POST['Q18']) ? $_POST['Q18'] : "x";

/*PLACE THE VALUES OF THE VARIABLES WITHIN THE DATABASE TABLE*/
$query = "INSERT INTO locusofcontrolscores 
VALUES(Null,'$Surname','$Prison','$NI','$Q1','$Q2','$Q3','$Q4','$Q5','$Q6','$Q7','$Q8','$Q9','$Q10','$Q11','$Q12','$Q13','$Q14','$Q15','$Q16','$Q17','$Q18')";

/*CREATE A QUERY FROM THE VARIABLE*/
mysql_query($query) or die(mysql_error());

/*CLOSE THE SERVER CONNECTION*/
mysql_close();

?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:13:07.767

您可以尝试以下方法。

将`isset()`检查结果分配给一个数组，然后遍历该数组以查找任何具有`x`该值的元素。

```
$arr['NI'] = isset( $_POST['NI']) ? $_POST['NI'] : "x";
$arr['Q1'] = isset( $_POST['Q1']) ? $_POST['Q1'] : "x";
$arr['Q2'] = isset( $_POST['Q2']) ? $_POST['Q2'] : "x";
$arr['Q3'] = isset( $_POST['Q3']) ? $_POST['Q3'] : "x"; 
```

等等...

```
foreach($arr as $key => $item)
{
   if ($item == 'x')
   {
      echo "You have missed question $key";
   }
} 
```

// 扩展答案

```
/*SHORTHAND WAY TO CHECK THE STATUS AND DECLARE THE VARIABLES*/
$answers = array(); // Declare array and assign values to it
$answers['NI'] = isset( $_POST['NI']) ? $_POST['NI'] : "x";
$answers['Q1'] = isset( $_POST['Q1']) ? $_POST['Q1'] : "x";
$answers['Q2'] = isset( $_POST['Q2']) ? $_POST['Q2'] : "x";
$answers['Q3'] = isset( $_POST['Q3']) ? $_POST['Q3'] : "x";
$answers['Q4'] = isset( $_POST['Q4']) ? $_POST['Q4'] : "x";
$answers['Q5'] = isset( $_POST['Q5']) ? $_POST['Q5'] : "x";
$answers['Q6'] = isset( $_POST['Q6']) ? $_POST['Q6'] : "x";
$answers['Q7'] = isset( $_POST['Q7']) ? $_POST['Q7'] : "x";
$answers['Q8'] = isset( $_POST['Q8']) ? $_POST['Q8'] : "x";
$answers['Q9'] = isset( $_POST['Q9']) ? $_POST['Q9'] : "x";
$answers['Q10'] = isset( $_POST['Q10']) ? $_POST['Q10'] : "x";
$answers['Q11'] = isset( $_POST['Q11']) ? $_POST['Q11'] : "x";
$answers['Q12'] = isset( $_POST['Q12']) ? $_POST['Q12'] : "x";
$answers['Q13'] = isset( $_POST['Q13']) ? $_POST['Q13'] : "x";
$answers['Q14'] = isset( $_POST['Q14']) ? $_POST['Q14'] : "x";
$answers['Q15'] = isset( $_POST['Q15']) ? $_POST['Q15'] : "x";
$answers['Q16'] = isset( $_POST['Q16']) ? $_POST['Q16'] : "x";
$answers['Q17'] = isset( $_POST['Q17']) ? $_POST['Q17'] : "x";
$answers['Q18'] = isset( $_POST['Q18']) ? $_POST['Q18'] : "x";

$error = "";
// Check if any of the answers are 'x'
foreach ($answers as $key => $item)
{
   if ($item == 'x')
   {
      $error .= "You have missed question $key.<br/>";
   }
}

if ($error == "") // No Errors
{
   extract($answers);   // Thanks Baba -- Converts array into variables

/*PLACE THE VALUES OF THE VARIABLES WITHIN THE DATABASE TABLE*/
$query = "INSERT INTO locusofcontrolscores 
VALUES(Null,'$Surname','$Prison','$NI','$Q1','$Q2','$Q3','$Q4','$Q5','$Q6','$Q7','$Q8','$Q9','$Q10','$Q11','$Q12','$Q13','$Q14','$Q15','$Q16','$Q17','$Q18')";

/*CREATE A QUERY FROM THE VARIABLE*/
mysql_query($query) or die(mysql_error());

} else {
  echo $error;  // There was one or more 'x' - display error or deal with it in some other way
}

/*CLOSE THE SERVER CONNECTION*/
mysql_close(); 
```

# c# - 使用 C# 创建虚拟串口

> ID：13623284
> 
> 赞同：5
> 
> 时间：2012-11-29T10:06:44.423
> 
> 标签：c#, virtual-serial-port

> **可能重复：**
> [伪造 RS232 串行端口](https://stackoverflow.com/questions/1605721/faking-an-rs232-serial-port)

我有一个从串口读取数据的应用程序。为了测试应用程序，我想创建一个虚拟串行端口来生成数据并将端口放在同一台 PC 上，以便其他应用程序可以访问该数据。

知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T10:09:24.893

我为此使用**[了 com0com](http://sourceforge.net/projects/com0com/)**工具。它没有直接的 API，但您可以编写一个应用程序（或方法）来启动一个新的 com0com 进程，以使用命令行参数“即时”设置/修改您的虚拟端口。

# php - Doctrine - 自引用实体 - 禁用获取子项

> ID：13623285
> 
> 赞同：9
> 
> 时间：2012-11-29T10:06:46.670
> 
> 标签：php, symfony, orm, doctrine, query-builder

我有一个非常简单的实体（WpmMenu），它保存以自引用关系相互连接的菜单项（它被称为相邻列表）？所以在我的实体中，我有：

```
protected $id
protected $parent_id
protected $level
protected $name 
```

对于所有的 getter/setter，关系是：

```
/**
* @ORM\OneToMany(targetEntity="WpmMenu", mappedBy="parent")
*/
protected $children;

/**
* @ORM\ManyToOne(targetEntity="WpmMenu", inversedBy="children", fetch="LAZY")
* @ORM\JoinColumn(name="parent_id", referencedColumnName="id", onUpdate="CASCADE", onDelete="CASCADE")
*/
protected $parent;

public function __construct() {
   $this->children = new ArrayCollection();
} 
```

一切正常。当我渲染菜单树时，我从存储库中获取根元素，获取它的子元素，然后遍历每个子元素，获取它的子元素并递归执行此操作，直到我渲染了每个项目。

会发生什么（以及我正在寻求解决方案）是这样的：目前我有 5 个 level=1 项目，每个项目都附加了 3 个 level=2 项目（将来我将使用 level=3 项目以及）。要获取我的菜单树 Doctrine 的所有元素，请执行以下操作：

*   1 查询根元素 +
*   1 次查询以获取根元素的 5 个子项（级别 = 1）+
*   5 个查询以获取每个级别 1 项目的 3 个子项（级别 = 2）+
*   15 个查询 (5x3) 以获取每个级别 2 项目的子项 (level=3)

总计：22 个查询

所以，我需要为此找到一个解决方案，理想情况下我只想有 1 个查询。

**所以这就是我想要做的：** 在我的实体存储库（WpmMenuRepository）中，我使用 queryBuilder 并获得按级别排序的所有菜单项的平面数组。获取根元素（WpmMenu）并从加载的元素数组中“手动”添加其子元素。然后对孩子递归地执行此操作。这样做我可以拥有相同的树，但只有一个查询。

**所以这就是我所拥有的：**

WpmMenuRepository：

```
public function setupTree() {
    $qb = $this->createQueryBuilder("res");
    /** @var Array */
    $res = $qb->select("res")->orderBy('res.level', 'DESC')->addOrderBy('res.name','DESC')->getQuery()->getResult();
    /** @var WpmMenu */
    $treeRoot = array_pop($res);
    $treeRoot->setupTreeFromFlatCollection($res);
    return($treeRoot);
} 
```

在我的 WpmMenu 实体中，我有：

```
function setupTreeFromFlatCollection(Array $flattenedDoctrineCollection){
  //ADDING IMMEDIATE CHILDREN
  for ($i=count($flattenedDoctrineCollection)-1 ; $i>=0; $i--) {
     /** @var WpmMenu */
     $docRec = $flattenedDoctrineCollection[$i];
     if (($docRec->getLevel()-1) == $this->getLevel()) {
        if ($docRec->getParentId() == $this->getId()) {
           $docRec->setParent($this);
           $this->addChild($docRec);
           array_splice($flattenedDoctrineCollection, $i, 1);
        }
     }
  }
  //CALLING CHILDREN RECURSIVELY TO ADD REST
  foreach ($this->children as &$child) {
     if ($child->getLevel() > 0) {      
        if (count($flattenedDoctrineCollection) > 0) {
           $flattenedDoctrineCollection = $child->setupTreeFromFlatCollection($flattenedDoctrineCollection);
        } else {
           break;
        }
     }
  }      
  return($flattenedDoctrineCollection);
} 
```

**这就是发生的事情：**

一切正常，但我最终每个菜单项都出现了两次。;) 现在我有 23 个查询，而不是 22 个查询。所以我实际上使情况恶化了。

我认为，真正发生的情况是，即使我添加了“手动”添加的子项，WpmMenu 实体也不会被视为与数据库同步，并且一旦我对其子项执行 foreach 循环，加载就会在 ORM 中触发加载和添加已经“手动”添加的相同子项。

**问**：有没有办法阻止/禁用此行为并告诉这些实体它们与数据库同步，因此不需要额外的查询？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-05T14:55:02.410

带着极大的解脱（以及大量关于 Doctrine Hydration 和 UnitOfWork 的学习），我找到了这个问题的答案。和很多事情一样，一旦你找到答案，你就会意识到你可以用几行代码来实现这一点。我仍在测试它是否有未知的副作用，但它似乎工作正常。我在确定问题所在时遇到了很多困难——一旦我这样做了，寻找答案就容易多了。

所以问题是这样的：由于这是一个自引用实体，其中整个树作为元素的平面数组加载，然后通过 setupTreeFromFlatCollection 方法将它们“手动输入”到每个元素的 $children 数组 - 当 getChildren () 方法在树中的任何实体（包括根元素）上调用，Doctrine（不知道这种“手动”方法）将元素视为“未初始化”，因此执行 SQL 以获取其所有相关子元素从数据库。

所以我剖析了 ObjectHydrator 类 (\Doctrine\ORM\Internal\Hydration\ObjectHydrator) 并遵循（某种程度）脱水过程，我得到了一个`$reflFieldValue->setInitialized(true);`@line:369，它是 \Doctrine\ORM\PersistentCollection 类的一个方法在类 true/false 上设置 $initialized 属性。所以我尝试了它并且它工作！

对 queryBuilder 的 getResult() 方法返回的每个实体执行 ->setInitialized(true)（使用 HYDRATE_OBJECT === ObjectHydrator）然后在实体上调用 ->getChildren() 现在不会触发任何进一步的 SQL ！！！

将其集成到 WpmMenuRepository 的代码中，就变成了：

```
public function setupTree() {
  $qb = $this->createQueryBuilder("res");
  /** @var $res Array */
  $res = $qb->select("res")->orderBy('res.level', 'DESC')->addOrderBy('res.name','DESC')->getQuery()->getResult();
  /** @var $prop ReflectionProperty */
  $prop = $this->getClassMetadata()->reflFields["children"];
  foreach($res as &$entity) {
    $prop->getValue($entity)->setInitialized(true);//getValue will return a \Doctrine\ORM\PersistentCollection
  }
  /** @var $treeRoot WpmMenu */
  $treeRoot = array_pop($res);
  $treeRoot->setupTreeFromFlatCollection($res);
  return($treeRoot);
} 
```

就这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:38:20.683

将注释添加到您的关联中以启用即时加载。这应该允许您仅使用 1 个查询加载整个树，并避免必须从平面数组中重建它。

例子：

```
/**
 * @ManyToMany(targetEntity="User", mappedBy="groups", fetch="EAGER")
 */ 
```

注释是这个但是值改变了 [https://doctrine-orm.readthedocs.org/en/latest/tutorials/extra-lazy-associations.html?highlight=fetch](https://doctrine-orm.readthedocs.org/en/latest/tutorials/extra-lazy-associations.html?highlight=fetch)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T17:22:03.010

如果使用相邻列表，则无法解决此问题。去过也做过。唯一的方法是使用嵌套集，然后您将能够在一个查询中获取您需要的所有内容。

我在使用 Doctrine1 时这样做了。在嵌套集中，您可以使用 、`root`和列来限制/扩展获取的对象。它确实需要一些复杂的子查询，但它是可行的。`level``left``right`

嵌套集的 D1 文档非常好，我建议您查看它，您会更好地理解这个想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-14T11:52:24.433

这更像是一个完成和更清洁的解决方案，但基于公认的答案......

唯一需要的是一个自定义存储库，它将查询平面树结构，然后，通过迭代这个数组，它首先将子集合标记为已初始化，然后使用父实体中存在的 addChild 设置器对其进行水合。 .

```
<?php

namespace Domain\Repositories;

use Doctrine\ORM\EntityRepository;

class PageRepository extends EntityRepository
{
    public function getPageHierachyBySiteId($siteId)
    {
        $roots = [];
        $flatStructure = $this->_em->createQuery('SELECT p FROM Domain\Page p WHERE p.site = :id ORDER BY p.order')->setParameter('id', $siteId)->getResult();

        $prop = $this->getClassMetadata()->reflFields['children'];
        foreach($flatStructure as &$entity) {
            $prop->getValue($entity)->setInitialized(true); //getValue will return a \Doctrine\ORM\PersistentCollection

            if ($entity->getParent() != null) {
                $entity->getParent()->addChild($entity);
            } else {
                $roots[] = $entity;
            }
        }

        return $roots;
    }
} 
```

编辑：只要与主键建立关系，getParent() 方法就不会触发其他查询，在我的情况下，$parent 属性是与 PK 的直接关系，因此 UnitOfWork 将返回缓存的实体而不是查询数据库。如果您的属性与 PK 无关，它将生成额外的查询。

# html - 如何使用有序列表 在表格中并对每个表格行进行编号

> ID：13623290
> 
> 赞同：3
> 
> 时间：2012-11-29T10:06:52.983
> 
> 标签：html, html-lists, html-table

我有一个 HTML 表格，用于以正确的形式显示一些信息。

现在，我的目标是为每个表格行编号。

为此，我尝试使用 ordererd list 并列出表格内的项目，但它似乎不起作用。

你有一个想法和一个例子来说明如何做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:12:41.030

不确定 HTML 你绝对可以在 jQuery 中做到这一点：

```
$(function () {
    var i = 0;
    $('table thead tr').prepend('<th>#</th>');
    $('table tbody tr').each(function () {
        i += 1;
        $(this).prepend('<td>' + i + '</td>');
    });
});​ 
```

[演示](http://jsfiddle.net/BUTS5/)

**更新**

如果您只想要指定类（数字）上的数字，请尝试：

```
$(function () {
    var i = 0;
    $('table thead tr').prepend('<th>#</th>');
    $('table tbody tr').each(function () {

         i += 1;

        if($(this).hasClass('number')) {
            $(this).prepend('<td>' + i + '</td>'); 
        } else {
            $(this).prepend('<td></td>');
        }
    });
});​ 
```

[演示](http://jsfiddle.net/BUTS5/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T13:19:47.590

以防万一，这里有一个单行选择器，用于获取表中的所有第一个 TD - 不包括 TH。然后我在它们之前添加我想要的任何元素。在这种情况下，我打印一个计数器变量来枚举行。效果是我正在对表格行进行编号。

```
var counterVariable = 1;
var mySpanClass = ""; //to style the numbering...

    $(".myTableClass tr:not(:first) td:first-child").before(function(){ return "<span class='" + mySpanClass + "'>" + counterVariable++ + "</span>"; }); 
```

# matlab - 将 Bloomberg Excel 股票价格导入 Matlab

> ID：13623291
> 
> 赞同：0
> 
> 时间：2012-11-29T10:06:58.707
> 
> 标签：matlab

我正在尝试在我从彭博下载的 Excel 中加载股票价格。

我尝试使用数据导入 GUI 来查看可用的选项。“列向量”不导入股票的名称。'Matrix' 使用电子表格名称作为矩阵的名称。“单元阵列”和“数据集”也是如此。

如何让矩阵使用股票名称作为矩阵名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:09:53.913

你应该使用`xlsread`. 您可以先读取包含名称的单元格，然后您可以使用`eval`读取数据并将其分配给具有股票名称的矩阵。

做吧`help xlsread`，这很简单。

# gridview - 如何在 asp.net 中的项目模板标签内赋值？

> ID：13623294
> 
> 赞同：1
> 
> 时间：2012-11-29T10:07:04.667
> 
> 标签：gridview

代码隐藏，

我得到以下错误对象引用未设置为对象的实例。

受保护的无效GridView1_RowDataBound（对象发送者，GridViewRowEventArgs e）{

```
 if (e.Row.RowType == DataControlRowType.DataRow)
        {

          string  a = Convert.ToString(DataBinder.Eval(e.Row.DataItem, "item_id")) ;
          string b = Convert.ToString(DataBinder.Eval(e.Row.DataItem, "order_id"));
            Label lbl = (Label)GridView1.FindControl("Label5");

                int sum = int.Parse(a) + int.Parse(b);
                lbl.Text += sum.ToString();

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:42:56.227

根据您的`Label5`控件的位置，应该有两种可能性：

1.  如果标签被添加到`Gridview1.Controls`集合中，那么您应该能够通过以下方法访问它：

    ```
    void GridView1_PreRender(object sender, EventArgs e)
    {
        Label lbl = (Label)GridView1.FindControl("Label5");

    } 
    ```

2.  如果为每一行添加标签，例如这样：

    ```
    void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {
        var label = new Label();
        label.ID = "Label5";
        label.Text = "label";
        var cell = new TableCell();
        cell.Controls.Add(label);
        e.Row.Controls.Add(cell);
    } 
    ```

    为了在您的`GridView1_RowDataBound`方法中找到标签，您应该使用：

    ```
    e.Row.FindControl("Label5"); 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:09:53.303

`Label lbl = (Label)GridView1.FindControl("Label5");`将其写入 OnDataBound 事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-30T10:54:29.550

确保您的网格项目标签 id 与 FindControl id 后面的代码相同。

```
foreach (GridViewRow row in gv_Name.Rows)                        {
{
 Label name = (Label)row.FindControl("lblitemNameId");
} 
```

# delphi - 拖动节点时 TTreeView 选择故障

> ID：13623298
> 
> 赞同：12
> 
> 时间：2012-11-29T10:07:14.127
> 
> 标签：delphi, drag-and-drop, treeview, delphi-7

我正在将拖放功能实现到`TTreeView`. 在它的一个`OnStartDrag`事件中，我正在创建`DragOcject`我的派生类：

```
 TTreeDragControlObject = class(TDragObject)
  private
    FDragImages: TDragImageList;
    FText: String;
  protected
    function GetDragImages: TDragImageList; override;
  end;

procedure TfrmMain.tvTreeStartDrag(Sender: TObject;
  var DragObject: TDragObject);
begin
  DragObject := TTreeDragControlObject.Create;
  TTreeDragControlObject(DragObject).FText := tvTree.Selected.Text;
end; 
```

这是我的覆盖`GetDragImages`功能`DragObcject`：

```
function TTreeDragControlObject.GetDragImages: TDragImageList;
var
  Bmp: TBitmap;
begin
  if FDragImages = nil then
  begin
    FDragImages := TDragImageList.Create(nil);
    Bmp := TBitmap.Create;
    try
      Bmp.Width := Bmp.Canvas.TextWidth(FText) + 25;
      Bmp.Height := Bmp.Canvas.TextHeight(FText);

      Bmp.Canvas.TextOut(25, 0, FText);

      FDragImages.Width := Bmp.Width;
      FDragImages.Height := Bmp.Height;
      FDragImages.SetDragImage(FDragImages.Add(Bmp, nil), 0, 0);
    finally
      Bmp.Free;
    end;
  end;

  Result := FDragImages;
end; 
```

一切正常，只是在拖过树节点时出现绘画故障：

![节点故障](../Images/851da217ce4a2f71443f025a2f049402.png)

我怎样才能避免这种行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T13:35:30.220

根据@Sean 和@bummi 的回答，我将在**D5**中发布对我有用的整个代码和结论。

在 WinXP XPManifest**不是**必须的 -`Hide/ShowDragImage`是需要的。

在 Win7 上需要 XPManifest。`Hide/ShowDragImage`不是**必须**的。

**结论**- 同时使用 XPManifest 和`HideDragImage`and`ShowDragImage`以确保 TV 可以在 XP/Win7 上运行。

* * *

```
type 
  TTreeDragControlObject = class(TDragControlObject)
  private
    FDragImages: TDragImageList;
    FText: String;
  protected
    function GetDragImages: TDragImageList; override;
  public
    destructor Destroy; override;
    procedure HideDragImage; override;
    procedure ShowDragImage; override;
    property DragText: string read FText write FText;
  end;

  TForm1 = class(TForm)
    TreeView1: TTreeView;
    procedure TreeView1StartDrag(Sender: TObject; var DragObject: TDragObject);
    procedure TreeView1DragOver(Sender, Source: TObject; X, Y: Integer; State: TDragState; var Accept: Boolean);
    procedure TreeView1EndDrag(Sender, Target: TObject; X, Y: Integer);
  private
    FDragObject: TTreeDragControlObject;
  public
  end;

...

{ TTreeDragControlObject}
destructor TTreeDragControlObject.Destroy;
begin
  FDragImages.Free;
  inherited;
end;

procedure TTreeDragControlObject.HideDragImage;
begin
  GetDragImages.HideDragImage;
end;

procedure TTreeDragControlObject.ShowDragImage;
begin
  GetDragImages.ShowDragImage;
end;

function TTreeDragControlObject.GetDragImages: TDragImageList;
var
  Bmp: TBitmap;
begin
  if FDragImages = nil then
  begin
    FDragImages := TDragImageList.Create(nil);
    Bmp := TBitmap.Create;
    try
      Bmp.Width := Bmp.Canvas.TextWidth(FText) + 25;
      Bmp.Height := Bmp.Canvas.TextHeight(FText);
      Bmp.Canvas.TextOut(25, 0, FText);
      FDragImages.Width := Bmp.Width;
      FDragImages.Height := Bmp.Height;
      FDragImages.SetDragImage(FDragImages.Add(Bmp, nil), 0, 0);
    finally
      Bmp.Free;
    end;
  end;
  Result := FDragImages;
end;

{ TForm1 }
procedure TForm1.TreeView1StartDrag(Sender: TObject; var DragObject: TDragObject);
begin
  FDragObject := TTreeDragControlObject.Create(TTreeView(Sender));
  FDragObject.DragText := TTreeView(Sender).Selected.Text;
  DragObject := FDragObject;
end;

procedure TForm1.TreeView1DragOver(Sender, Source: TObject; X, Y: Integer;
  State: TDragState; var Accept: Boolean);
begin
  Accept := Source is TTreeDragControlObject;
end;

procedure TForm1.TreeView1EndDrag(Sender, Target: TObject; X, Y: Integer);
begin
  FDragObject.Free;
end; 
```

* * *

请注意，在*您的*代码中，两者`FDragImages`都`var DragObject`在泄漏内存。我建议使用`TDragControlObject`而不是`TDragObject`（你`tvTreeEndDrag`现在完全火了吗？ - 它没有为我开火）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-05T03:04:35.013

Delphi 2010 中也出现了同样的行为，而 TXPManifest**没有**修复它。巧合的是，我最近独立地在 Delphi 2010 应用程序中遇到了同样的问题。解决方案是像这样实现 HideDragImage()/ShowDragImage() 方法...

```
TTreeDragControlObject = class(TDragObject)
private
  FDragImages: TDragImageList;
  FText: String;
protected
  function GetDragImages: TDragImageList; override;
public
  procedure HideDragImage; override;
  procedure ShowDragImage; override;
end; 
```

... 接着 ...

```
procedure TTreeDragControlObject.HideDragImage;
begin
  FDragImages.HideDragImage
end;

procedure TTreeDragControlObject.ShowDragImage;
begin
  FDragImages.ShowDragImage
end; 
```

其后果是在绘制拖动图像之前和之后调用Windows API 函数[ImageList_DragShowNolock() （通过 Windows 消息](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761532%28v=vs.85%29.aspx)[TVM_SELECTITEM(TVGN_DROPHILITE)](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773736%28v=vs.85%29.aspx)）。如果不调用此函数，拖动图像将无法正确绘制。需要 ImageList_DragShowNolock(False/True) 分隔 TVM_SELECTITEM+TVGN_DROPHILITE 是一个记录不充分的功能，如果其他论坛要判断，这是投诉的常见原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T09:34:56.423

使用 TXPManifest 修复了 D7 中的这个错误。

使用 Windows、消息、SysUtils、变体、类、图形、控件、表单、对话框、**XPMan、** ComCtrls；

额外的：

```
procedure Win7UpdateFix(Form: TForm; CharCode: Word);
var i: Integer;
begin
  if Assigned(Form) and (Win32MajorVersion >= 6) and (Win32Platform = VER_PLATFORM_WIN32_NT) then //Vista, Win7
  begin
    case CharCode of
      VK_MENU, VK_TAB:  //Alt or Tab
      begin
        for i := 0 to Form.ComponentCount-1 do
        begin
          if Form.Components[i] is TWinControl then
          begin
            //COntrols that disappear - Buttons, Radio buttons, Checkboxes
            if (Form.Components[i] is TButton)
            or (Form.Components[i] is TRadioButton)
            or (Form.Components[i] is TCheckBox)   then
              TWinControl(Form.Components[i]).Invalidate;
          end;
        end;
      end;
    end;
  end;
end;

procedure TForm1.FormKeyDown(Sender: TObject; var Key: Word;
  Shift: TShiftState);
begin
  if key=VK_MENU then
    begin
      Win7UpdateFix(Self,key)
    end;
end; 
```

# c# - 如何进行平滑的图像缩放和平移？

> ID：13623299
> 
> 赞同：3
> 
> 时间：2012-11-29T10:07:13.337
> 
> 标签：c#, winforms, zooming

我正在编写一个显示地图的程序，并在其顶部显示相机位置及其观察方向的另一层。地图本身可以缩放和平移。问题是地图文件很大，缩放不顺畅。

我创建`class ZoomablePictureBox : PictureBox`以添加缩放和平移功能。我尝试了不同的方法，来自这个论坛和其他论坛，用于缩放和平移，最终得到以下结果，触发以下`OnPaint`事件`ZoomablePictureBox`：

```
 private void DrawImgZoomed(PaintEventArgs e)
    {
        e.Graphics.SmoothingMode = SmoothingMode.AntiAlias;

            if (imgZoomed != null)
                e.Graphics.DrawImage(imgZoomed, new Rectangle(-ShiftX, -ShiftY, imgZoomed.Width, imgZoomed.Height), 0, 0, imgZoomed.Width, imgZoomed.Height, GraphicsUnit.Pixel);

    } 
```

其中 ShiftX 和 ShiftY 提供正确的地图平移（与此问题无关的计算）。

`imgZoomed`是每次缩放更改时在 BackgroundWorker 中计算的原始地图的缩放版本：

```
private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
    {

        Bitmap workerImage = e.Argument as Bitmap;
        Bitmap result;

        result = new Bitmap(workerImage, new Size((int)(workerImage.Width * Zoom), (int)(workerImage.Height * Zoom)));

        e.Result = result;
    } 
```

所以目前的做法是，每次用户滚动鼠标滚轮时，`imgZoomed`都会根据当前缩放计算新的。地图大小约为 30 MB，这可能需要 0.5 秒，这很烦人，但平移运行平稳。

我意识到这可能不是最好的主意。在以前的方法中，我没有在每次滚动鼠标时创建缩放图像副本，而是这样做：

```
e.Graphics.DrawImage(Image, new Rectangle(-ShiftX, -ShiftY, (int)(this._image.Width * Zoom), (int)(this._image.Height * Zoom)), 0, 0, Image.Width, Image.Height, GraphicsUnit.Pixel); 
```

缩放更平滑，因为据我了解，它只是拉伸了原始图像。另一方面，平移正在大量跳过。

我在想：

*   为每次放大内存/硬盘驱动器创建原始地图的副本 - 它会占用太多内存/硬盘空间
*   为下一个/实际/上一个缩放创建原始地图的副本，这样我就有更多时间来计算下一步 - 如果用户一次滚动不止一个步骤，这将无济于事

我还尝试了矩阵变换 - 没有真正的性能提升，计算 pan 真的很痛苦。

我在这里兜圈子，不知道该怎么做。如果我在默认的 Windows 图片查看器中打开地图，则缩放和平移很流畅。他们是怎么做到的？

如何同时实现平滑的缩放和平移？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:06:09.443

Sorry this is so long, I left in only the essential parts.

Most of the p/invoke stuff is taken from [pinvoke.net](http://pinvoke.net/)

My solution for smooth panning across large images involves using the `StretchBlt` gdi method instead of `Graphics.DrawImage`. I've created a static class that groups all the native blitting operations.

Another thing that helps greatly is caching the `HBitmap` and `Graphics` objects of the `Bitmap`.

```
public class ZoomPanWindow
{
    private Bitmap map;
    private Graphics bmpGfx;
    private IntPtr hBitmap;

    public Bitmap Map
    {
        get { return map; }
        set 
        {
            if (map != value)
            {
                map = value;
                //dispose/delete any previous caches
                if (bmpGfx != null) bmpGfx.Dispose();
                if (hBitmap != null) StretchBltHelper.DeleteObject(hBitmap);
                if (value == null) return;
                //cache the new HBitmap and Graphics.
                bmpGfx = Graphics.FromImage(map);
                hBitmap = map.GetHbitmap();
             }
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        if (map == null) return;
        //finally, the actual painting!
        Rectangle mapRect = //whatever zoom/pan logic you implemented.
        Rectangle thisRect = new Rectangle(0, 0, this.Width, this.Height);
        StretchBltHelper.DrawStretch(
            hBitmap,
            bmpGfx,
            e.Graphics,
            mapRect,
            thisRect);
    }
}

public static class StretchBltHelper
{
    public static void DrawStretch(IntPtr hBitmap, Graphics srcGfx, Graphics destGfx,
        Rectangle srcRect, Rectangle destRect)
    {
        IntPtr pTarget = destGfx.GetHdc();
        IntPtr pSource = CreateCompatibleDC(pTarget);
        IntPtr pOrig = SelectObject(pSource, hBitmap);
        if (!StretchBlt(pTarget, destRect.X, destRect.Y, destRect.Width, destRect.Height,
            pSource, srcRect.X, srcRect.Y, srcRect.Width, srcRect.Height,
            TernaryRasterOperations.SRCCOPY))
        throw new Win32Exception(Marshal.GetLastWin32Error());

        IntPtr pNew = SelectObject(pSource, pOrig);
        DeleteDC(pSource);
        destGfx.ReleaseHdc(pTarget);
    }

    [DllImport("gdi32.dll", EntryPoint = "SelectObject")]
    public static extern System.IntPtr SelectObject(
        [In()] System.IntPtr hdc,
        [In()] System.IntPtr h);

    [DllImport("gdi32.dll", ExactSpelling = true, SetLastError = true)]
    static extern bool DeleteDC(IntPtr hdc);

    [DllImport("gdi32.dll", EntryPoint = "DeleteObject")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool DeleteObject(
        [In()] System.IntPtr ho);

    [DllImport("gdi32.dll", ExactSpelling = true, SetLastError = true)]
    static extern IntPtr CreateCompatibleDC(IntPtr hdc);

    [DllImport("gdi32.dll")]
    static extern bool StretchBlt(IntPtr hdcDest, int nXOriginDest, int nYOriginDest,
        int nWidthDest, int nHeightDest,
        IntPtr hdcSrc, int nXOriginSrc, int nYOriginSrc, int nWidthSrc, int nHeightSrc,
        TernaryRasterOperations dwRop);

    public enum TernaryRasterOperations : uint
    {
        SRCCOPY = 0x00CC0020
        //there are many others but we don't need them for this purpose, omitted for brevity
    }
} 
```

# python - 将轮廓（MatplotLib 或 OpenCV）转换为与原始大小相同的图像

> ID：13623301
> 
> 赞同：7
> 
> 时间：2012-11-29T10:07:23.590
> 
> 标签：python, image-processing, opencv, matplotlib, contour

我用 MatplotLib 获得了这个轮廓：

![轮廓](../Images/99d7419185299d73624a79af9f3f95e2.png)

现在，我想将它用作普通的 Python 图像（PIL 或数组），因为我想将它应用为掩码（通过 OpenCV 获得）。

问题是使用MatplotLib，带有轮廓的图像被调整大小，并添加了一个边距（对于轴，即使我不画轴），所以我从MatplotLib的图中获得的图像没有适合使用 OpenCV 获得的掩码。

我试图用 OpenCV 获得相同的轮廓，但我没有使用 cv2.FindContours 和 cv2.DrawContours 函数获得任何结果（如果你知道如何做到这一点，请告诉我......在[上一个主题](https://stackoverflow.com/questions/13586686/extract-external-contour-or-silhouette-of-image-python "上一主题")中你可以看到我想要的原始图像和轮廓）

另一种可能的解决方案是将使用 MatplotLib 获得的轮廓转换为与原始大小相同且没有边距的图像（PIL 或数组）。

我希望您至少可以通过其中一种解决方案来帮助我！

- - - - - - - - - - - - - - 编辑 - - - - - - - - - - - -----

Rutger Kassies 的回答是正确的。它对我不起作用，因为我写了这行......

```
ax = plt.axes([0, 0, 1, 1], frame_on=False, xticks=[], yticks=[]) 
```

...在使用轮廓函数之后，并且必须在使用轮廓函数之前。记在脑子里！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:42:38.597

我曾经发布过如何使用 .imshow 绘制图像并再次保存它以使其等于输入图像的问题。我得到的答复可能对您的情况有所帮助，这就是您可以保存具有相同尺寸的轮廓图像的方法：

```
from PIL import Image

im = np.array(Image.open('input_image.jpg').convert('L'))

xpixels = im.shape[1]
ypixels = im.shape[0]

dpi = 72
scalefactor = 1

xinch = xpixels * scalefactor / dpi
yinch = ypixels * scalefactor / dpi

fig = plt.figure(figsize=(xinch,yinch))

ax = plt.axes([0, 0, 1, 1], frame_on=False, xticks=[], yticks=[])

contour(im, levels=[240], colors='black', origin='image')

plt.savefig('same_size.png', dpi=dpi) 
```

# c# - UI 列将 DataGrid 数据重新排序为 DataTable

> ID：13623304
> 
> 赞同：0
> 
> 时间：2012-11-29T10:07:28.753
> 
> 标签：c#, wpf, datagrid, datatable

我有一个`WPF` `DatagGrid`，用户可以在其中对项目进行排序并重新排序列。

现在我想将确切的`DataGrid`数据复制到重新排序项目和排序列后`DataTable`显示的数据。`DataGrid`

复制`Datagrid.ItemSource`到`DataTable`这里没有帮助。

我绑定`DataGrid`到一个`DataTable`通常有 100 列和超过 50 行的，现在我只想将重新排序的数据（由用户`UI`通过拖动列完成）保存到一个新的单独`DataTable`中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:31:40.900

一种可能的方法是跟踪用户操作（列拖动、排序）并为数据源构建新的 SQL 查询。

# php - 使用 tcpdf 的 PDF 渲染问题

> ID：13623309
> 
> 赞同：1
> 
> 时间：2012-11-29T10:07:34.553
> 
> 标签：php, cakephp, pdf, gd, tcpdf

我在我的应用程序中开发了一项功能，它可以根据用户获取一些图像并呈现为一个 pdf。此功能在我的舞台服务器中运行良好，但这在生产中显示“服务器错误”。

我验证了 apache 的错误日志，发现以下错误

```
libpng warning: Ignoring attempt to set cHRM RGB triangle with zero area

Corrupt JPEG data: 234 extraneous bytes before marker 0xd9 
```

该应用程序是在 cakephp 上创建的，用于呈现 pdf 的库是 tcpdg，登台和生产服务器在 ubuntu 上。我咨询了一些前辈，他们都说这是GD问题。

舞台服务器环境

```
PHP 5.3.3-0.dotdeb.1 with Suhosin-Patch (cli) (built: Oct  1 2010 08:49:29)
Copyright (c) 1997-2009 The PHP Group 
```

生产服务器上的环境

```
PHP 5.3.2-1ubuntu4.18 with Suhosin-Patch (cli) (built: Sep 12 2012 19:12:47)
Copyright (c) 1997-2009 The PHP Group 
```

请向我推荐任何无风险的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:18:57.373

由于任何原因，图像结束后有一些垃圾字节阻止它工作。

您可以解决问题，在您的图像字节中找到“\xFF\xD9”，它代表 EOI（图像结束），并且无论您在哪里找到它，都将其后面的字节切掉。希望这会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:38:00.230

在诊断这个问题。我注意到**[ImageMagick](http://www.imagemagick.org/script/index.php)** 模块没有加载到我们的登台服务器上。这就是它在登台服务器上工作的原因。我们从生产服务器禁用它并且它工作。这引起了与GD的一些冲突。

我注释掉了以下扩展名

```
extension=imagick.so 
```

无论如何谢谢

# java - 在 JAX-RS 中序列化 java.util.list

> ID：13623310
> 
> 赞同：3
> 
> 时间：2012-11-29T10:07:35.970
> 
> 标签：java, web-services, jpa, jaxb, jax-rs

我有课本：

```
@Entity
@Table(name = "books")
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType

public class Book {
    @Id
    @XmlAttribute
    private String isbn;

    private String title;
    private String authors;
    private int year;

    @OneToMany(mappedBy="reservedBook")
    private List<Reservation> bookReservations;

    //Getters, setters, addReservation, remove Reservation
        ......................
} 
```

然后，我有课程预订

```
@Entity
@Table(name = "reservations")
@XmlRootElement

public class Reservation {

    private String username;
    private String isbn;
    @Temporal(TemporalType.DATE)
    private Date date;

    @ManyToOne
    @JoinColumn(name = "isbn")
    private Book reservedBook;

    @ManyToOne
    @JoinColumn(name = "username")
    private User userWhoReserved;

        //Getters and setters

        ...........
 } 
```

在资源类中，我尝试获取这样的特定书籍：

```
@GET
@Path("/{isbn}")
@Produces(MediaType.TEXT_XML)
public Book getBookByIsbn(@PathParam("isbn") String isbn) {

    Book book = entityManager.find(Book.class, isbn);

    if (book != null) {
        return book;

    }

} 
```

现在，它不会序列化字段 List bookReservations。我尝试了很多在互联网上找到的想法，比如用 @XmlElement 为列表注释 getter 或在其他地方使用其他注释（我现在不记得它们了），但没有任何效果。

编辑：这是响应的样子：

```
<book isbn="3333333333">
    <title>Mere Christianity</title>
    <authors>C. S. Lewis</authors>
    <year>2000</year>
</book> 
```

但我也想表明保留意见。

解决方案似乎是什么？谢谢！索林

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:18:01.463

我认为问题可能出在列表`bookReservations`中`null`。

```
class A{

    private List<String> someList = new ArrayList<String>();

    @XmlElement(name = "some-tag")
    public List<String> getList() {
        return someList;
    }

    public void setSomeList(List<String> someOtherList) {
        this.someList = someOtherList;
    }
} 
```

我每天都使用此代码并为我工作（忽略我未提供的其他注释）。

在这些情况下我遇到了问题，但只发现由于某种原因列表为空，它没有被序列化。尝试通过在 setter 方法中调试来检查列表是否由 JAXB 设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:33:52.087

我的野客人是延迟加载的问题，您可以在 OneToMany 和 ManyToOne 注释中添加 fetch = FetchType.EAGER。

```
public class Book {
    @Id
    @XmlAttribute
    private String isbn;

    private String title;
    private String authors;
    private int year;

    @OneToMany(mappedBy="reservedBook",fetch = FetchType.EAGER)
    private List<Reservation> bookReservations;

    //Getters, setters, addReservation, remove Reservation
        ......................
    } 
```

在预订班：

```
 public class Reservation {

    private String username;
    private String isbn;
    @Temporal(TemporalType.DATE)
    private Date date;

    @ManyToOne(fetch = FetchType.EAGER)
    @JoinColumn(name = "isbn")
    private Book reservedBook;

    @ManyToOne
    @JoinColumn(name = "username")
    private User userWhoReserved;

        //Getters and setters

        ...........
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:20:51.170

使用`@XmlAccessorType.PROPERTY`而不是`FIELD`. JPA impl 可能会延迟加载预订列表，此操作将通过访问属性（get 方法）触发。

**了解更多信息**

*   [http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html](http://blog.bdoughan.com/2011/06/using-jaxbs-xmlaccessortype-to.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:09:17.677

解决了！但问题不在于序列化，而是 EntityManager 调用的方法 find() 无法提取预订并将其放入我的 book 对象中，因此列表仍然为空，并且其对应的元素未显示。因此，似乎应该使用 Query，而不是使用 find()：

```
Query query = entityManager.createQuery("SELECT book FROM Book book WHERE book.isbn = :_isbn ");
query.setParameter("_isbn", isbn);

//if getSingleResult() doesn't find a book, an exception will be thrown
try {
        Book book = (Book)query.getSingleResult();
        return book;
    }
    catch(RuntimeException e)
    {
        //do something
    } 
```

此外，@XmlAccessorType(XmlAccessType.FIELD) 必须从 Book 类中删除，并且列表的 getter 应使用 @XmlElementWrapper(name = "reservations") 和 @XmlElement(name = "reservation") 进行注释。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T12:29:25.863

`@XmlRootelement`用with包裹，然后会有`nillable="true"`一个空的。`<reservations>`

```
@XmlElement
@XmlElementWrapper(nillable=true)
private List<Reservation> bookReservations; 
```

# r - PCA - 主成分是如何映射的？

> ID：13623313
> 
> 赞同：3
> 
> 时间：2012-11-29T10:07:48.483
> 
> 标签：r, pca

我在 R 中有一个问题`pca`，可能是一个简单的问题：

我有 10 个向量 a,b,c,d,e,f,g,h,i,j 并将它们与`cbind`.

使用 Result 我执行`pca`, 使用`prcomp`. 我得到的分数很好，我也得到了降序的主要成分。

只是：我到底怎么知道哪个组件`a`是`j`第一个，哪个是第二个等等？

可能真的是一个初学者的问题 - 仍然无法解决它，希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T11:41:16.370

旋转矩阵可以告诉您哪些原始变量在每个主成分中是重要的。例如，旋转矩阵的第一列显示了 PC1 的贡献。第一行中的高值（相对于其他系数）意味着第一个原始变量在第一个主成分中很重要。假设第一列的前五行具有高正值，而后五行具有高负值。这意味着 PC 轴可以解释为这两组之间的比率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-24T16:58:46.897

这是一个老问题......但也许将来有人需要它

```
library(stats)
data(USArrests) 
PCA.USA <- prcomp(USArrests[,c(1,2,4)], scale=TRUE) 
proporcionDeInfluencia <- abs(PCA.USA$rotation)
sweep(proporcionDeInfluencia, 2, colSums(proporcionDeInfluencia), "/") 
```

主成分分析中的更多信息[- 如何获得每个参数对 Prin.Comp. 的贡献 (%)？](https://stackoverflow.com/questions/12760108/principal-components-analysis-how-to-get-the-contribution-of-each-paramete)

# multithreading - PowerShell 和单线程单元

> ID：13623315
> 
> 赞同：3
> 
> 时间：2012-11-29T10:08:02.183
> 
> 标签：multithreading, powershell, batch-file, wpk

我使用[WPK](http://archive.msdn.microsoft.com/PowerShellPack)在 PowerShell 中开发了一个小型 GUI 工具。

我有以下启动命令

```
powershell -ExecutionPolicy Unrestricted -file PowerTools.ps1 -noexit -sta 
```

我收到以下错误。

```
New-Object : Exception calling ".ctor" with "0" argument(s): "The calling thread must be STA, because many UI components require this."
At \WindowsPowerShell\Modules\WPK\GeneratedControls\PresentationFramework.ps1:34
10 char:29
+         $Object = New-Object <<<<  System.Windows.Window
    + CategoryInfo          : InvalidOperation: (:) [New-Object], MethodInvocationException
    + FullyQualifiedErrorId :     ConstructorInvokedThrowException,Microsoft.PowerShell.Commands.NewObjectCommand 
```

从我的谷歌搜索中，STA 建立了“单线程公寓”，我注意到 powershell.exe 具有“-sta”标志，但这也无济于事。

我的ps1文件的本质如下

```
Import-Module WPK

function get-gui()
{
      New-Window  -WindowStartupLocation CenterScreen `
       -Width 1200 -Height 200 -Show {

      New-Grid -Rows 32, 32, 32, 32 -Columns 110, 200* {
            ...
          }
        }
    }
}

get-gui 
```

请问有什么提示吗？

（我确实花了很多时间做自己的研究）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T13:32:17.490

就这么简单！:) 感谢您的指导，Kayasax！

```
powerShell -sta -file PowerTools.ps1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-02T17:00:14.903

[https://technet.microsoft.com/en-us/library/hh847736.aspx](https://technet.microsoft.com/en-us/library/hh847736.aspx) says that `-file` must be last in the in the list of options because everything after the file name is interpreted as parameters to the file. That is why it works when `-sta` is listed before `-file`, but does not work after `-file`.

# c++ - 防止竞争条件

> ID：13623318
> 
> 赞同：2
> 
> 时间：2012-11-29T10:08:11.387
> 
> 标签：c++, multithreading, boost

我写了一个定时器，它的工作方式如下：一个使用定时器的类实现了一个回调函数`call_()`。计时器在单独的线程中运行，并`call_()`在计时器到期时执行。

我的测试程序如下：

```
void TestCase::loop()
{
  unique_lock<mutex> lock(*this);

  while(running_)
  {
     timer_->SetTimer(time);
     signal_.wait(lock);
     do_something();
  }
}

void TestCase::call_()
{
  signal_.notify_all();
} 
```

如果`time`非常小（例如 2 毫秒），则测试程序有时会执行`do_something()`，有时则不会（在测试程序的不同运行中）。

我的猜测是竞争条件，似乎 if `time`is small`call()_`是在之前执行（因此`signal_.notify_all()`）`signal_.wait(lock)`。

如果我`this_thread::sleep(posix_time::milliseconds(2))`之前添加`signal_.notify_all()`， `do_something()`几乎每次运行都会执行，并且`sleep(5)`一切正常。

我如何保证`signal_.wait(lock)`之前执行`signal_.notify_all()`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:52:24.870

使用非常小的超时值，无法保证主线程`signal_wait`在计时器线程执行语句之前到达`signal_.notify_all`语句。

当您使用一次性计时器时，更好的选择是使用信号量而不是条件变量来同步两个线程。

正如您在条件变量中看到的那样，为了使机制正常工作，必须执行等待和通知的顺序。

使用信号量，执行等待的线程也将停止，直到另一个线程发布信号量，但没有要求以什么顺序到达等待和发布操作。如果首先到达该帖子，则等待立即返回（并且成功）。

# coq - 在 Coq 证明中定位策略的定义

> ID：13623319
> 
> 赞同：6
> 
> 时间：2012-11-29T10:08:18.090
> 
> 标签：coq

在研究其他作者的 Coq 证明时，我经常遇到一种策略，比如“inv eq Heq”或“intro_b”。我想了解这种策略。

如何确定它是 Coq 策略还是在我当前项目的某处定义的 Tactic Notation？

其次，有没有办法找到它的定义？

我使用了 SearchAbout、Search、Locate 和 Print，但找不到上述问题的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T20:02:51.463

你应该可以使用

```
Print Ltac <tacticname>. 
```

打印用户定义策略的代码（根据[文档](http://coq.inria.fr/distrib/V8.4/refman/Reference-Manual012.html#@command252)）。

* * *

要找到它的定义位置......我想你将需要 grep 不幸的是，`Locate`它似乎不适用于战术名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-08T13:37:49.867

如前所述，`Print Ltac ...`打印用户定义策略的代码。

要定位用户定义的策略（即知道其定义的位置），请使用`Locate Ltac ...`. 它为您提供完全限定的名称。然后使用`Locate Library`查找对应的文件。

# r - 转换 data.table 中的一组列

> ID：13623324
> 
> 赞同：11
> 
> 时间：2012-11-29T10:08:32.990
> 
> 标签：r, data.table

一个`data.table`新手问题。我想`data.table`通过对它们应用数学公式来转换 a 中的一组列。列集必须排除总列数的 1 个或多个。

就`data.frame`我而言，我会这样做：

```
data(iris)
head(iris)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa

iris[, -5] <- iris[, -5] * 1e3
head(iris)
  Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1         5100        3500         1400         200  setosa
2         4900        3000         1400         200  setosa
3         4700        3200         1300         200  setosa
4         4600        3100         1500         200  setosa
5         5000        3600         1400         200  setosa
6         5400        3900         1700         400  setosa 
```

我知道如何在 a中选择[多个列](https://stackoverflow.com/questions/13383840/select-multiple-columns-in-data-table-r "所以")`data.table`：

```
iris.dt <- data.table(iris)
head(iris.dt[, -5, with = FALSE]) 
```

甚至：

```
head(iris.dt[, !"Species", with = FALSE]) 
```

如何利用`data.table`传递引用实际转换那些选定的列？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T10:27:27.743

`.SDCols`将参数与引用赋值一起使用（ ）怎么样`:=`：

```
DT <- data.table(iris)
DT[, c("Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width")
   :=lapply(.SD, function(x) x*1000), .SDcols=1:4]
# Alternatively you can grab the names the usual way:
# DT[, names(DT)[1:4] := lapply(.SD, function(x) x*1000), .SDcols=1:4]
DT
#      Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
#   1:         5100        3500         1400         200    setosa
#   2:         4900        3000         1400         200    setosa
#   3:         4700        3200         1300         200    setosa
#   4:         4600        3100         1500         200    setosa
#   5:         5000        3600         1400         200    setosa
#  ---                                                            
# 146:         6700        3000         5200        2300 virginica
# 147:         6300        2500         5000        1900 virginica
# 148:         6500        3000         5200        2000 virginica
# 149:         6200        3400         5400        2300 virginica
# 150:         5900        3000         5100        1800 virginica 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-05-04T17:51:32.017

`.SDcols`是正确的方法，但您可以使用向量仅指定一次列名。

```
DT <- data.table(iris)
colnms <- c("Sepal.Length", "Sepal.Width", "Petal.Length", "Petal.Width")
DT[, (colnms) := lapply(.SD, function(x) x*1000), .SDcols = colnms] 
```

请注意，您需要 左侧的括号`:=`停止将其`data.table`解释`colnms`为列的名称。

# android - java.lang.RuntimeException：将结果传递给活动 {} 失败：java.lang.NullPointerException

> ID：13623328
> 
> 赞同：0
> 
> 时间：2012-11-29T10:08:39.790
> 
> 标签：android, android-intent, camera

用相机拍照后，我试图更改 Button 属性。

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        if (resultCode != RESULT_OK) return;

        Bitmap bitmap = utilities.decodeFile(path, 300);
        imgPicHolder.setImageBitmap(bitmap);
        //The pic is changing on the previous Activity, this works fine

        Button button = (Button)findViewById(R.id.btnChange);
         button.setText("NewText");
        //Here is the problem, when trying to change the button property from the previous      activity before taking the picture..

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:32:02.660

我要做的就是将它`String`从via和 in传递`Activity2`给，用于检索它，然后将其设置为's中的文本`Activity1``Intent.putExtra()``Activity1``getIntent().getStringExtra()``string``Button``Activity1``onResume()`

# php - 查询所有用户配置文件并收集它们以显示给 MySQL 中的特定用户的最佳方式

> ID：13623329
> 
> 赞同：1
> 
> 时间：2012-11-29T10:08:40.713
> 
> 标签：php, mysql, database, stored-procedures, backend

我正在用 PHP 编写后端代码，其中有客户端请求，我必须根据数千名用户的优先级向他们展示一组用户。

我的问题是这样的：由于**查询太繁重，需要大量的内部连接和比较，这将使代码非常慢并且响应将消耗大量时间。**

您能否建议一种方法，让我可以在不影响请求和响应时间的情况下累积所有用户、执行所有查询和计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:33:23.087

只要您有一个良好的数据库设计（数据库[规范化](https://stackoverflow.com/questions/1258743/normalization-in-mysql)） ，查询很多`JOINS`并且`CONDITIONS`会对性能产生影响但非常**小。**影响代码性能的主要因素是查询中使用的表的大小（记录数），但仍然有（[如何使用索引](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)）和其他有助于优化查询的工具。`INDEXES`

我个人建议您在查询中使用[存储过程](http://dev.mysql.com/doc/refman/5.1/en/stored-routines.html)，这会应用封装。并且根据实施，将有助于避免`SQL Injection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:20:07.340

您可以尝试一种称为物化视图的技术，即对一些包含聚合的表进行预计算并使用聚合来加速您的在线查询。另一方面，如果您的计算所依据的数据经常变化，那么这种技术不会有太大帮助。

在此处查看有关该主题的更多详细信息：[http ://www.fromdual.com/mysql-materialized-views](http://www.fromdual.com/mysql-materialized-views)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T12:16:49.410

使用Mysql Views避免复杂查询和长时间！

# internationalization - i18n 翻译键/值对

> ID：13623331
> 
> 赞同：0
> 
> 时间：2012-11-29T10:08:44.240
> 
> 标签：internationalization

你建议如何命名翻译键？

我应该使用实际文本（需要翻译的）作为翻译键吗？例如

```
Sed ut perspiciatis, unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam eaque ipsa, quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt, explicabo.=But I must explain to you how all this mistaken idea of denouncing of a pleasure and praising pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth, the master-builder of human happiness. 
```

或者我应该使用像这样的键

```
content_lorem_ipsum_par_1=But I must explain to you how all this mistaken idea of denouncing of a pleasure and praising pain was born and I will give you a complete account of the system, and expound the actual teachings of the great explorer of the truth, the master-builder of human happiness. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:50:47.153

有时，由于上下文和语法差异，您的基本语言中的同一段文本必须在两个不同的地方进行不同的翻译。如果您使用前者，这可能会出现问题，因此我建议使用后一种方法。

# ios6 - 使用 If 循环填充 100 个图像

> ID：13623335
> 
> 赞同：0
> 
> 时间：2012-11-29T10:08:50.610
> 
> 标签：ios6, xcode4.5

我目前正在使用以下代码填充 100 张图像，但我确信使用 If 语句有一种更经济的方法：

```
mapblock01.image = [UIImage imageNamed:@"block.png"]; mapblock01.hidden = TRUE;
mapblock02.image = [UIImage imageNamed:@"block.png"]; mapblock02.hidden = TRUE;
mapblock03.image = [UIImage imageNamed:@"block.png"]; mapblock03.hidden = TRUE;
mapblock04.image = [UIImage imageNamed:@"block.png"]; mapblock04.hidden = TRUE;
mapblock05.image = [UIImage imageNamed:@"block.png"]; mapblock05.hidden = TRUE;

------>

mapblock99.image = [UIImage imageNamed:@"block.png"]; mapblock99.hidden = TRUE;
mapblock100.image = [UIImage imageNamed:@"block.png"]; mapblock100.hidden = TRUE; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:59:58.357

为此，您可以将每个 UIImageView 的标签指定为 1,2,3..100 并将图像设置如下：

```
 for (int i = 0 ; i < 100 ; i++) {
      UIImageView *imageV = (UIImageView *)[self.view viewWithTag:i];
      imageV.image = [UIImage imageNamed:@"block.png"];
      imageV.hidden = TRUE;
} 
```

}

# c# - Linq2Sql点取数据

> ID：13623344
> 
> 赞同：3
> 
> 时间：2012-11-29T10:09:45.110
> 
> 标签：c#, database, linq, linq-to-sql

我目前正在从事一个使用 linq2sql 作为其数据库访问框架的项目，现在有很多 linq 查询基本上执行以下操作：

```
var result =    from <some_table>
                join <some_other_table>
                join <another_table>
                select <some_other_domain_model> // This is a non linq2SQL poco

return result.Where(<Some_Predicate>); 
```

因此，例如假设您阅读了 3 个表格，然后将内容整理成一个更大的更高级别的模型，以发送到视图。现在忽略域的混合，因为这不会让我太困扰，它是最后一个 where 子句。

现在我之前没有太多使用过 Linq2Sql，所以我可以说会发生什么是正确的：

1.  根据 from、join、join、select linq 生成 SQL
2.  检索所有行
3.  将所有这些数据映射到一个大模型中（在内存中）
4.  循环遍历所有模型，然后只返回适用的模型

由于这是我问题的症结所在，如果上面的流程会发生什么，我认为这是有道理的，但是显然比第 4 步更了解该框架的人一直在争论它以某种方式被纳入 SQL代，所以它不会撤回所有记录，但我不知道它是如何做到的，因为它需要预先所有数据来填充它，然后它会应用一个单独的 where 子句，所以我假设第 4 点行都已被读取并且已经在内存中。

我试图推动他们将他们的 where 子句移动到 linq 中，以便它在数据库级别过滤掉不需要的记录，但是我想知道是否有人可以建议我的上述假设是否正确？

== 编辑 ==

已添加评论以引起更多注意这一事实，即不是 linq2sql 生成的对象，而是在其他地方滚动的一些随机 poco 手，只是为了缩小我主要关注问题上下文的范围。因为这个问题是关于更少的`"does it matter where I put the where clause"`，更多的是关于`"Does the where clause still get factored into the underlying query when it is applied to a non linq2sql object generated from a linq2sql query"`.

这是另一个更简洁的例子，我的意思是希望能更多地指出我缺乏理解的地方：

```
/*
    I am only going to put auto properties into the linq2sql entities,
    although in the real world they would be a mix of private backing
    fields with public properties doing the notiftying.
*/

[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.some_table_1")]
public class SomeLinq2SqlTable1
{
    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="some_table_1_id", AutoSync=AutoSync.OnInsert, DbType="Int NOT NULL IDENTITY", IsPrimaryKey=true, IsDbGenerated=true)]
    public int Id {get;set;}
}

[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.some_table_2")]
public class SomeLinq2SqlTable2
{
    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="some_table_2_id", AutoSync=AutoSync.OnInsert, DbType="Int NOT NULL", IsPrimaryKey=true, IsDbGenerated=true)]
    public int Id {get;set;}

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="some_table_2_name", AutoSync=AutoSync.OnInsert, DbType="Varchar NOT NULL", IsPrimaryKey=false)]
    public string Name {get;set;}
}

[global::System.Data.Linq.Mapping.TableAttribute(Name="dbo.some_table_3")]
public class SomeLinq2SqlTable3
{
    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="some_table_3_id", AutoSync=AutoSync.OnInsert, DbType="Int NOT NULL", IsPrimaryKey=true, IsDbGenerated=true)]
    public int Id {get;set;}

    [global::System.Data.Linq.Mapping.ColumnAttribute(Storage="some_table_3_other", AutoSync=AutoSync.OnInsert, DbType="Varchar NOT NULL", IsPrimaryKey=false)]
    public string Other {get;set;}
}

/*
    This is some hand rolled Poco, has NOTHING to do with Linq2Sql, think of it as 
    a view model of sorts.
*/
public class SomeViewModel
{
    public int Id {get;set;}
    public string Name {get;set;}
    public string Other {get;set;}
}

/*
    Here is psudo query to join all tables, then populate the
    viewmodel item from the query and finally do a where clause
    on the viewmodel objects.
*/
var result =    from // Linq2SqlTable1 as t1
                join // Linq2SqlTable2.id on Linq2SqlTable1.id as t2
                join // Linq2SqlTable3.id on Linq2SqlTable1.id as t3
                select new ViewModel { Id = t1.Id, Name = t2.Name, Other = t3.Other }

return result.Where(viewModel => viewModel.Name.Contains("some-guff")); 
```

因此，鉴于上面的示例，最终的 Where 语句是否会被考虑到底层查询中，或者 viewModel 上的 where 会导致检索然后在内存中进行评估？

很抱歉这个问题很冗长，但是关于它的文档很少，这是一个非常具体的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:13:39.813

您无需将`Where`条款推高。只要`result`是`IQueryable<T>`（对于某些`T`），它在哪里都可以。LINQ 是可组合的。实际上，使用 LINQ 语法与使用扩展方法语法之间绝对没有区别，并且两者的工作方式相同。基本上，当您创建查询时，它**只是**构建所*请求*内容的模型。在您开始迭代之前，什么都不会*执行*`foreach`（ ,`ToList()`等）。所以在最后添加一个额外`Where`的就可以了：它将被内置到组合查询中。

您可以通过监视 SQL 连接来非常简单地验证这一点；您会看到它`where`在 TSQL 中包含该子句，并在 SQL 服务器上进行过滤。

这允许一些有趣的场景，例如灵活的搜索：

```
IQueryable<Customer> query = db.Customers;
if(name != null) query = query.Where(x => x.Name == name);
if(region != null) query = query.Where(x => x.Region == region);
...
if(dob != null) query = query.Where(x => x.DoB == dob);
var results = query.Take(50).ToList(); 
```

就您的假设而言，它们是不正确的-实际上是：

1.  构建可组合查询，（单独）组合，连接，连接，选择
2.  进一步编写查询，添加一个 where （与上述组合没有不同）
3.  稍后，迭代查询
    1.  从完全组合的查询生成 sql
    2.  检索行
    3.  映射到模型
    4.  产生结果

请注意，只有在迭代查询时才会生成 sql；在那之前，您可以整天继续创作它。它在迭代之前不会触及 SQL 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:45:45.550

我对 LINQtoSQL 最佳实践做了一些研究，因为我一直在我的项目中使用这项技术。看看我的博文。也许它可以帮助你。

[http://msguy.net/post/2012/03/20/LINQ-to-SQL-Practices-and-approaches.aspx](http://msguy.net/post/2012/03/20/LINQ-to-SQL-Practices-and-approaches.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T13:47:06.090

提供者知道自定义模型中的填充属性如何映射（由于查询中的 select 子句）到数据库表上的实际列。因此，当您过滤自定义模型的属性时，它知道需要过滤表中的哪一列。将您选择的模型（无论是设计人员定义的具有表的所有列的实体，还是在某处定义的自定义模型，或仅包含您需要的数据的匿名类型）想像为只是 FROM 子句之前的选定列SQL 查询。选择匿名模型可以很容易地识别模型中的字段对应于 SQL 中的 SELECT 列表。

最重要的是：永远记住这`var result = from ...`只是一个查询......直到它被迭代`result.ToArray()`。尝试调用您的变量**`query`**而不是**`result`**，当您再次查看时，世界可能会获得新的新颜色。

# php - 将表单元素ID存储在变量中？

> ID：13623345
> 
> 赞同：1
> 
> 时间：2012-11-29T10:09:45.813
> 
> 标签：php, file, file-upload, forms

我有一个包含以下代码的**HTML表单：**

```
<input id="image_22" name="images[]" type="file"  />
<input id="image_8" name="images[]" type="file"  /> 
```

我希望能够**将表单输入 ID 元素存储在变量中（例如 $imgnumber = 'image_22'）**。这可能吗？在下面的代码中查看我的评论：

**PHP：**

```
for ($i = 0; $i < count($_FILES['images']['name']); $i++) {
        $number_of_file_fields++;
        if ($_FILES['images']['name'][$i] != '') { //check if file field empty or not
            $number_of_uploaded_files++;
            $uploaded_files[] = $_FILES['images']['name'][$i];

            if (move_uploaded_file($_FILES['images']['tmp_name'][$i], $upload_directory . $_FILES['images']['name'][$i])) {

                $number_of_moved_files++;
                // *** COMMENT *** // 
                $imgnumber = CURRENT_FILE_INPUT_ID - this would store e.g. "image_22"
                }

            }

    } 
```

非常感谢您对此的任何帮助:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:14:18.270

只有`name`输入的和值被提交到服务器端。您可以将 ID 编码到名称中，而不是使用文件数组。

```
<input id="image_22" name="image_22" type="file"  />
<input id="image_8" name="image_8" type="file"  /> 
```

PHP端访问：

```
foreach($_FILES as $imageName => $file)
{
    // $imageName contains image_22 or image_8
    // $file contains the full array for this particular file
} 
```

**编辑：**

您更新的 PHP 代码可能是：

```
foreach($_FILES as $imageName => $file)
{
    $number_of_file_fields++;
    if ($file['name'] != '') { //check if file field empty or not
        $number_of_uploaded_files++;
        $uploaded_files[] = $file['name'];

        if (move_uploaded_file($file['tmp_name'], $upload_directory . $file['name'])) {

            $number_of_moved_files++;
            // *** COMMENT *** // 
            $imgnumber = $imageName; // image_22 or image_8
        }
    }
} 
```

否则，您将不得不将 ID 作为单独的变量发送，例如使用隐藏输入或查询字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:14:03.277

您不能在纯 HTML+PHP 中执行此操作，原因很简单，即在提交表单时浏览器不会将 ID 发送到服务器。

最明显的解决方案是在其他地方添加相关信息，例如`name`属性。

**更新：**

而不是：

```
<input id="image_22" name="images[]" type="file"  />
<input id="image_8" name="images[]" type="file"  /> 
```

... 做这个：

```
<input name="images[22]" type="file"  />
<input name="images[8]" type="file"  /> 
```

**更新：**

如果`print_r()`您输入，您将看到它的样子：

```
Array
(
    [images] => Array
        (
            [name] => Array
                (
                    [22] => Test.txt
                    [8] => Blah.exe
                )

            [type] => Array
                (
                    [22] => text/plain
                    [8] => application/octet-stream
                )

            [tmp_name] => Array
                (
                    [22] => D:\Server\PHP\tmp\php7D2D.tmp
                    [8] => D:\Server\PHP\tmp\php7D4E.tmp
                )

            [error] => Array
                (
                    [22] => 0
                    [8] => 0
                )

            [size] => Array
                (
                    [22] => 3695
                    [8] => 432
                )

        )

) 
```

# android - 使用选项卡从其他 Activity 启动 Activity

> ID：13623350
> 
> 赞同：0
> 
> 时间：2012-11-29T10:10:09.710
> 
> 标签：android, android-activity, tabs

我有一个带有 3 个标签的应用程序。每个选项卡都有一个活动，并且有一个活动两个管理选项卡。这工作正常，我可以从选项卡切换到选项卡。但现在我想通过按下另一个选项卡上的按钮来切换到一个选项卡。我试图像这样开始活动：

`final Intent openTabMainActivity = new Intent(this,TabMainActivity.class); startActivity(openTabMainActivity);`

这将启动选项卡前面的活动。但我只想切换到活动。

这是管理选项卡的活动（我是 Android 新手，我从教程中获得了这段代码）：

```
public class MainActivity extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TabHost tabHost = getTabHost();

    // Tab for Main
    TabSpec mainspec = tabHost.newTabSpec("Main");
    // setting Title and Icon for the Tab
    mainspec.setIndicator("Main", getResources().getDrawable(R.drawable.icon_main_tab));
    Intent mainIntent = new Intent(this, TabMainActivity.class);
    mainspec.setContent(mainIntent);

    // Tab for Graph
    TabSpec graphspec = tabHost.newTabSpec("Graph");
    graphspec.setIndicator("Graph", getResources().getDrawable(R.drawable.icon_graph_tab));
    Intent graphIntent = new Intent(this, TabGraphActivity.class);
    graphspec.setContent(graphIntent);

    // Tab for Option
    TabSpec optionspec = tabHost.newTabSpec("Option");
    optionspec.setIndicator("Option", getResources().getDrawable(R.drawable.icon_option_tab));
    Intent optionIntent = new Intent(this, TabOptionActivity.class);
    optionspec.setContent(optionIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(mainspec); 
    tabHost.addTab(graphspec); 
    tabHost.addTab(optionspec); 
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:24:07.943

请为此编写以下代码，它将解决您的问题。

ActivityStack.java

```
private Stack<String> stack;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (stack == null)
        stack = new Stack<String>();
    // start default activity
    push("FirstStackActivity", new Intent(this, Tab_SampleActivity.class));
}

@Override
public void finishFromChild(Activity child) {
    pop();
}

@Override
public void onBackPressed() {
    pop();
}

public void push(String id, Intent intent) {
    Window window = getLocalActivityManager().startActivity(id, intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    if (window != null) {
        stack.push(id);
        setContentView(window.getDecorView());
    }
}

public void pop() {
    if (stack.size() == 1)
        finish();
    LocalActivityManager manager = getLocalActivityManager();
    manager.destroyActivity(stack.pop(), true);
    if (stack.size() > 0) {
        Intent lastIntent = manager.getActivity(stack.peek()).getIntent();
        Window newWindow = manager.startActivity(stack.peek(), lastIntent);
        setContentView(newWindow.getDecorView());
    }
} 
```

TabActivity.java

```
public class TabActivity extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tab_screen);
        TabHost tabHost = getTabHost();
        Intent intent = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.home));
        spec.setContent(intent);

        tabHost.addTab(spec);

        Intent intent1 = new Intent().setClass(this, ActivityStack.class);
        TabHost.TabSpec spec1 = tabHost.newTabSpec("tabId").setIndicator("Temp", getResources().getDrawable(R.drawable.invoice));
        spec1.setContent(intent1);
        tabHost.addTab(spec1);

        tabHost.setCurrentTab(0);
    }
} 
```

第一活动.java

```
public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("Tab Sample Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), SecondActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("SecondActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

SecondActivity.java

```
public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView textView = new TextView(this);
        textView.setText("First Stack Activity ");
        textView.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent();
                intent.setClass(getParent(), ThirdActivity.class);
                ActivityStack activityStack = (ActivityStack) getParent();
                activityStack.push("ThirdActivity", intent);
            }
        });
        setContentView(textView);
    }
} 
```

第三活动.java

```
public class ThirdActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

将以下 XML 文件添加到您的 res/layout 文件夹中。

1) tab_screen.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical"
        android:padding="3dp" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_above="@android:id/tabs"
            android:layout_weight="1" />

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true" />
    </RelativeLayout>

</TabHost> 
```

2) main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/hello" />

</LinearLayout> 
```

AndroidManifest.xml:-

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.tabsample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FirstActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TabActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ActivityStack"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".SecondActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ThirdActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

有关完整示例的更多信息，请参见下面的链接。

[TabActivity 中的多个 Android 活动](http://androidcodeexamples.blogspot.in/2012/08/multiple-android-activities-in.html)

# java - Jboss 上的 JAXWS 客户端超时

> ID：13623351
> 
> 赞同：2
> 
> 时间：2012-11-29T10:10:11.780
> 
> 标签：java, jax-ws, jboss5.x, connection-timeout

我如何为 JAXWS 客户端设置超时，我使用 Jboss 5.1。我试图做到这一点

```
bp.getRequestContext().put("com.sun.xml.ws.connect.timeout", 100);
bp.getRequestContext().put("com.sun.xml.ws.request.timeout", 100); 
```

但它不起作用。它适用于独立客户端。

当我尝试使用

```
bp.getRequestContext().put("com.sun.xml.ws.request.timeout", 100); 
```

我得到了 org.jboss.ws.core.WSTimeoutException: Timeout after: 100ms，但它在 300 (3*100 ms) 之后发生。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:12:48.857

虽然这看起来可能是您的疏忽，但 JAX-WS 超时的设置可能取决于您正在构建的特定 RI。

您可以尝试这些设置（它们成对使用）

```
 BindingProviderProperties.REQUEST_TIMEOUT
   BindingProviderProperties.CONNECT_TIMEOUT 
```

BindingProviderProperties 应该来自`com.sun.xml.internal.WS.client`

或者弦乐

```
 javax.xml.ws.client.connectionTimeout
   javax.xml.ws.client.receive timeout 
```

`getRequestContext()`以毫秒为单位的所有属性。

顺便说一句，你怎么能在没有代码的情况下计时毫秒:)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T16:22:13.477

**JAXWS**使用**JAXB**进行**编组**和解**组**。

在容器中可能需要更多时间，因为它正在`JAXContext`扫描您的类路径。

如果是这种情况，请尝试对 JaxBContext 进行急切的初始化：

> JBossWS 可能在每个服务的第一个方法调用期间执行不同的操作，而当引用巨大的 wsdl 合同（具有数百个导入的 xml 模式）时，接下来的方法调用可能会有所不同。这是由于在第一次调用期间内部执行的一系列操作，其结果数据随后被缓存并在随后的调用中重用。虽然这通常不是问题，但您可能对每次调用具有几乎相同的性能感兴趣。这可以通过设置`org.jboss.ws.eagerInitializeJAXBContextCache` 在服务器端（在 JBoss 启动脚本中）和客户端（在 org.jboss.ws.Constants 中提供了一个方便的常量）的系统属性为 true。JAXBContext 创建通常负责第一次调用期间堆栈所需的大部分时间；这个特性使 JBossWS 在处理第一次调用之前尝试急切地创建和缓存 JAXB 上下文。

[http://www.mastertheboss.com/javaee/jboss-web-services/web-services-performance-tuning](http://www.mastertheboss.com/javaee/jboss-web-services/web-services-performance-tuning)

# c# - C# 图形显示在表单中但不在位图中

> ID：13623362
> 
> 赞同：1
> 
> 时间：2012-11-29T10:10:58.217
> 
> 标签：c#, graphics, bitmap

我正在使用 C#，我想在窗体上绘制一些多边形，然后将图形保存在位图中。

按照[这个问题](https://stackoverflow.com/questions/1535730/convert-graphics-object-to-bitmap-object)的答案，我在我的 Form 类中编写了一个方法：

```
 private void draw_pol()
  {
      Graphics d = this.CreateGraphics();

      // drawing stuff

      Bitmap bmp = new Bitmap(this.Width, this.Height, d);
      bmp.Save("image.bmp");
  } 
```

这样，Form 可以正确显示图形并创建名为“image.bmp”的位图文件，但该文件是白色图像。

为什么 bmp 文件不显示任何图像？我做错了什么？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:17:02.367

您传递给位图的图形参数仅用于指定位图的分辨率。它不会以任何方式绘制到位图。

来自[MSDN](http://msdn.microsoft.com/en-us/library/byca5y1f.aspx)：

> 此方法创建的新位图分别从 g 的 DpiX 和 DpiY 属性获取其水平和垂直分辨率。

相反，使用`Graphics.FromImage()`来获取`Graphics`您可以使用的对象。此外，你应该画后`Dispose`的对象。`Graphics`这是`using`语句的理想用法。

```
Bitmap bmp = new Bitmap(this.Width, this.Height);
using (Graphics g = Graphics.FromImage(bmp))
{
    //paint stuff
}
bmp.Save(yourFile); 
```

如果您还需要将其绘制到表单上，您可以轻松地绘制您创建的位图：

```
Graphics g = this.CreateGraphics();
g.DrawImage(bmp, 0, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:24:40.760

一个`Graphics`实例只在一个上运行`Bitmap`。它要么是您要保存的那个，要么是您表单上的那个。

例如，您可以这样做以在表单上呈现绘制的位图并在之后保存它：

```
private void DrawOnBitmap()
{
    using (var bitmap = new Bitmap(this.Width, this.Height))
    {
        using (var bitmapGraphics = Graphics.FromImage(bitmap))
        {
            // Draw on the bitmap
            var pen = new Pen(Color.Red);
            var rect = new Rectangle(20, 20, 100, 100);
            bitmapGraphics.DrawRectangle(pen, rect);

            // Display the bitmap on the form
            using (var formGraphics = this.CreateGraphics())
            {
                formGraphics.DrawImage(bitmap, new Point(0, 0));
            }

            // Save the bitmap
            bitmap.Save("image.bmp");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:16:06.183

你需要一个代表位图的图形对象，这样你就可以在图像上绘图。这样做：

*   创建位图对象
*   使用 Graphics.FromImage 方法创建图形对象
*   将位图对象作为参数传递给图形对象

    ```
    Bitmap bmp = new Bitmap(this.Width, this.Height, d);
              bmp.Save("image.bmp");//for your need
         Graphics d=Graphics.FromImage(bmp); 
    ```

# sql - postgres 8.4中的正则表达式

> ID：13623363
> 
> 赞同：0
> 
> 时间：2012-11-29T10:11:06.940
> 
> 标签：sql, regex, database, postgresql, postgresql-8.4

我正在尝试编写此查询：

```
SELECT DISTINCT createdcfgid FROM ab WHERE (createdcfgid ~ ‘^[0-9]+$’) 
```

这导致

```
 syntax error at or near "[" LINE 3: WHERE (createdcfgid ~ ‘^[0-9]+$’) 
```

那里的任何人都可以告诉我我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:17:59.197

# php - 如何将配置注入每个控制器 Zend 框架 2

> ID：13623365
> 
> 赞同：1
> 
> 时间：2012-11-29T10:11:20.777
> 
> 标签：php, config, zend-framework2

如何将一些配置作为属性注入 zf2 中的每个控制器？我试图通过从 onBootstrap 或 init 方法设置它来做到这一点，但没有结果......

```
 $config = $e->getApplication();
 $controller = $e->getTarget();
 $controller->configs = $config; 
```

当我尝试将值设置为控制器属性配置的默认值时，它工作得很好，但设置根本不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T06:15:10.707

除了 Sam 的好建议外，另一种选择是编写控制器插件。然后每个控制器都可以访问该插件。此外，插件是由 ServiceManager 延迟加载的，因此如果您的控制器不使用它，那么您不会受到加载它的性能成本的影响。

请参阅：http: [//zf2.readthedocs.org/en/latest/modules/zend.mvc.controllers.html#controller-plugins](http://zf2.readthedocs.org/en/latest/modules/zend.mvc.controllers.html#controller-plugins) 和[http://lab.empirio.no/custom-controller-plugin-in-zf2。 html](http://lab.empirio.no/custom-controller-plugin-in-zf2.html)

# sql - 如何使用 SQL Server 2008 中的 Weekno 获得六个星期的星期日计数？

> ID：13623367
> 
> 赞同：-2
> 
> 时间：2012-11-29T10:11:28.497
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [如何在sql中按每周到最后六个星期日的日期进行分组？](https://stackoverflow.com/questions/12743869/how-to-group-by-the-each-week-upto-last-six-week-sundays-dates-in-sql)

我需要计算周数。它工作正常，但我不知道是 [34]、[35]、[36]、[37]、[38]、[39] 的星期几。weekno 仅在运行时知道。例如，一年中它总共包含 52 周。我在@Bluefeet 的帮助下得到了这个查询，他在同一个stackoverflow 上发布了这个查询。如果我在 between 字段中更改起始日期和截止日期，它将不起作用。因为我在下面的查询中硬编码了 weekno。无论一年中中间字段的日期如何，请给我解决方案。

```
SET DATEFIRST 1 
SELECT case when InstanceType is not null then InstanceType else 'Sum' End InstanceType ,  
  sum([34]) AS FirstWeek, 
  sum([35]) AS SecondWeek, 
  sum([36]) AS ThirdWeek, 
  sum([37]) AS FourthWeek, 
  sum([38]) AS FifthWeek, 
  sum([39]) AS SixthWeek,  
  max(InstanceDescription) AS InstanceDescription 
FROM 
( 
  SELECT [SPGI01_INSTANCE_TYPE_C] AS InstanceType, 
    [34], [35], [36], [37], [38], [39], InstanceDescription  
  FROM 
  ( 
    SELECT I01.[SPGI01_INSTANCE_TYPE_C], 
      DatePart(wk, I01.[SPGI01_CREATE_S]) WeekNo, 
      DATEADD(DAY, 7 -DATEPART(WEEKDAY,I01.[SPGI01_CREATE_S]),  I01.[SPGI01_CREATE_S]) WeekEnd, 
      J03.SPGJ03_MSG_TRANSLN_X InstanceDescription  
    FROM [SUPER-G].[dbo].[CSPGI01_ASN_ACCURACY] I01  
    INNER JOIN [SUPER-G].[dbo].[CSPGI50_VALID_INSTANCE_TYPE] I50 
      ON I50.[SPGI50_INSTANCE_TYPE_C] = I01.[SPGI01_INSTANCE_TYPE_C]  
    LEFT JOIN CSPGJ02_MSG_OBJ J02 
      ON I50.SPGJ02_MSG_K = J02.SPGJ02_MSG_K  
    LEFT JOIN CSPGJ03_MSG_TRANSLN J03 
      ON J02.SPGJ02_MSG_K = J03.SPGJ02_MSG_K  
    where I50.[SPGA04_RATING_ELEMENT_D] = 1  
      and I01.[SPGI01_EXCEPTIONED_F] = 'N' 
      and I01.[SPGI01_DISPUTED_F] != 'Y'  
      AND J03.[SPGJ03_LOCALE_C] =  'en_US'  
      and I01.[SPGA02_BUSINESS_TYPE_C] = 'PROD'  
      and I01.[SPGA03_REGION_C] = 'EU'  
      and I01.[SPGI01_SUB_BUSINESS_TYPE_C] = 'PRD'  
      and I01.[SPGI01_CREATE_S] between '10-08-2012 00:00:00.000' AND '11-18-2012 23:59:59.000'  
  ) x 
  pivot 
  ( 
    count(WeekEnd) 
    FOR weekno IN ([34], [35], [36], [37], [38], [39])  
  ) p 
) x1 
GROUP BY  InstanceType WITH ROLLUP 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:35:53.053

如果您希望能够传入任何日期值以获取符合您条件的数据，那么对于这种类型的`PIVOT`您将需要使用类似于以下的动态 SQL 解决方案：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsRollup AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @StartDate DateTime,
    @EndDate DateTime

Set @StartDate = '10-08-2012 00:00:00.000'
Set @EndDate = '11-18-2012 23:59:59.000'

select @cols = STUFF((SELECT ',' + QUOTENAME(WeekEnd) 
                    from
                    (
                      select DatePart(wk, I01.[SPGI01_CREATE_S]) WeekEnd
                      from [SUPER-G].[dbo].[CSPGI01_ASN_ACCURACY]
                      where I01.[SPGI01_CREATE_S] between @StartDate AND @EndDate
                    ) src
                    group by WeekEnd
                    order by WeekEnd desc
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsRollup = STUFF((SELECT ', Sum(' + QUOTENAME(WeekEnd) +') as WeekNo'+Cast(Weekend as varchar(2))
                    from
                    (
                      select DatePart(wk, I01.[SPGI01_CREATE_S]) WeekEnd
                      from [SUPER-G].[dbo].[CSPGI01_ASN_ACCURACY]
                      where I01.[SPGI01_CREATE_S] between @StartDate AND @EndDate
                    ) src
                    group by WeekEnd
                    order by WeekEnd desc
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = '
             SELECT case when InstanceType is not null then InstanceType else ''Sum'' End InstanceType ,  
                '+@colsRollup+',  max(InstanceDescription) AS InstanceDescription
             FROM
             (
               SELECT SPGI01_INSTANCE_TYPE_C as InstanceType,
                    InstanceDescription, ' + @cols + ' 
               from 
               (
                  SELECT I01.[SPGI01_INSTANCE_TYPE_C], 
                    DatePart(wk, I01.[SPGI01_CREATE_S]) WeekNo, 
                    DATEADD(DAY, 7 -DATEPART(WEEKDAY,I01.[SPGI01_CREATE_S]),  I01.[SPGI01_CREATE_S]) WeekEnd, 
                    J03.SPGJ03_MSG_TRANSLN_X InstanceDescription  
                  FROM [SUPER-G].[dbo].[CSPGI01_ASN_ACCURACY] I01  
                  INNER JOIN [SUPER-G].[dbo].[CSPGI50_VALID_INSTANCE_TYPE] I50 
                    ON I50.[SPGI50_INSTANCE_TYPE_C] = I01.[SPGI01_INSTANCE_TYPE_C]  
                  LEFT JOIN CSPGJ02_MSG_OBJ J02 
                    ON I50.SPGJ02_MSG_K = J02.SPGJ02_MSG_K  
                  LEFT JOIN CSPGJ03_MSG_TRANSLN J03 
                    ON J02.SPGJ02_MSG_K = J03.SPGJ02_MSG_K  
                  where I50.[SPGA04_RATING_ELEMENT_D] = 1  
                    and I01.[SPGI01_EXCEPTIONED_F] = ''N'' 
                    and I01.[SPGI01_DISPUTED_F] != ''Y''  
                    AND J03.[SPGJ03_LOCALE_C] =  ''en_US''  
                    and I01.[SPGA02_BUSINESS_TYPE_C] = ''PROD'' 
                    and I01.[SPGA03_REGION_C] = ''EU''  
                    and I01.[SPGI01_SUB_BUSINESS_TYPE_C] = ''PRD''
                    and I01.[SPGI01_CREATE_S] between '+ convert(varchar(10), @StartDate, 120)+' AND '+ convert(varchar(10), @EndDate, 120)+'
              ) x
              pivot 
              (
                  count(WeekEnd)
                  for weekno in (' + @cols + ')
              ) p 
             ) x1
             GROUP BY InstanceType WITH ROLLUP '

execute(@query) 
```

*注意：这是未经测试的，因为我没有任何样本数据等。*

# java - 从 Java 运行 Powershell

> ID：13623369
> 
> 赞同：2
> 
> 时间：2012-11-29T10:11:33.937
> 
> 标签：java, windows, powershell, processbuilder

我目前正在尝试查看是否可以在 Java 中从 powershell 运行 windows (.lnk) 文件中的程序快捷方式。我知道有更好的工具可以使用，我应该直接与 .exe 交互，但请幽默，这是出于测试目的。

所以本质上，我需要通过 java 的 powershell 运行 .lnk 文件。我目前遇到的主要困境是应该在powershell中工作的命令

```
"start \"C:/Adobe Reader X.lnk\"" 
```

在 IDE 中，这将正确运行 Adob​​e 阅读器，但在 java 中，在初始化 ProcessBuilder 并尝试传递此参数后，它不起作用。但是，它将运行 powershell 进程。这是我传递给我的方法的代码：

```
String[] command2 = { /*"cmd.exe", "/C",*/ "powershell", "-Command","&","start \"C:/Adobe Reader X.lnk\"" }; 
```

如您所见，我也尝试过从 CMD 启动它。这是我的运行代码。我阅读了输出（没有输出）我只是想在一个线程中启动 Adob​​e Reader，然后我可以通过 Tasklist 检查进程是否正在运行。

```
public void run() {
            String line2;
            ProcessBuilder probuilder = new ProcessBuilder(command);
            Process process = null;
            try {
                process = probuilder.start();
            } catch (IOException e2) {
                // TODO Auto-generated catch block
                e2.printStackTrace();
            }

            java.io.InputStream is = process.getInputStream();
            InputStreamReader isr = new InputStreamReader(is);

            BufferedReader br = new BufferedReader(isr);
            // create a reader for the return data from cmd.
            StringBuilder sb = new StringBuilder();
            // create a string builder to automate the string addition 

            try {
                while ((line2 = br.readLine()) != null) {// build the input
                                                            // string from
                                                            // cmd.

                    sb = sb.append(line2);
                    System.out.println(line2);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        } 
```

通过这个之后，我只是让 powershell 进程运行，但是 Adob​​e reader 没有运行，甚至没有启动。任何帮助将不胜感激。

# mysql - Perl 打开多个文件并导入 MySQL 数据库

> ID：13623372
> 
> 赞同：0
> 
> 时间：2012-11-29T10:11:50.460
> 
> 标签：mysql, perl, import

我希望将 600 多个 txt 文件导入 MySQL，并希望使用 perl 和以下代码，但它似乎不起作用。从某种意义上说，它连接，然后断开连接，但似乎没有按照说明打开每个文件和处理，所以我的导入表仍然是空的。该目录存在，因此除非我的代码中存在明显错误，否则不确定可能出现什么问题。当我执行 perl 脚本时，我没有收到任何错误消息。每个文件每行有一个记录，用 \n 字符表示记录的结尾。我希望有人可以提供帮助，这个小问题令人困惑，我看不出任何明显的原因说明它为什么不起作用。

```
use strict;
use warnings;
use DBI;

# Set datasource
my $dsn = "DBI:mysql:host=somehost;database=somedb"
        . ";port=someport";

# Connect to database 
my $dbh = DBI->connect($dsn,"someuser","somepassword");
print "Status: Connected to MySQL.\n";

my $dir = "t:\\some directory";

opendir (DIR, $dir) or die "Unable to open directory";
my @files = grep /\.txt/, readdir(DIR);
closedir(DIR);

foreach my $file (@files) {
open(FH, '<', "$dir\\$file") or die "Unable to open $file - $!\n";
while (<FH>){ 
    my $data = split (/\n$/);
    my $insert = $dbh->prepare('INSERT INTO sometable 
            (TEXTDATA,SOURCEFILE) 
        VALUES (?,?)') or die "Prepare failed: " . $dbh->errstr(); 
$insert->execute($data,$file) or die "Execute failed: " . $dbh->errstr(); 
}
close(FH);
}
print "Status: Processing of complete.\n";

# Disconnect from the database
$dbh->disconnect ();
print "Status: Disconnected from MySQL."; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:35:19.110

你正在做的一些事情已经过时了。

*   使用正斜杠而不是反斜杠作为路径分隔符。Perl 会做正确的事。
*   如果在每次迭代中都准备好您的准备语句，那么它的效果并不好。它应该在循环之外准备一次。
*   默认情况下，新行是记录分隔符。所以，不要使用 split 将一行数据存储到变量中，只需将行分配给变量即可。
*   您也没有检查是否确实在给定路径中找到了任何文件。

我做了如下更正：

```
use v5.12;
use strict;
use warnings;
use DBI;

# Set datasource
my $dsn = "DBI:mysql:host=somehost;database=somedb;port=someport";

# Connect to database 
my $dbh = DBI->connect($dsn,"someuser","somepassword")
    or die "Couldn't connect to MySQL server: $!";
say "Status: Connected to MySQL.";

my $source_dir = "t:/some/directory";

# Store the handle in a variable.
opendir my $dirh, $source_dir or die "Unable to open directory: $!";
my @files = grep /\.txt$/i, readdir $dirh;
closedir $dirh;

# Stop script if there aren't any files in the list
die "No files found in $source_dir" unless @files;

# You can comment out the following two lines
# once you're sure things are working
say 'Importing data from:';
say for @files;

my $insert = $dbh->prepare('INSERT INTO sometable (TEXTDATA,SOURCEFILE) '
                           . 'VALUES (?,?)')
                           or die "Prepare failed: " . $dbh->errstr(); 
for my $file (@files) {
    say "Processing $source_dir/$file";
    open my $fh, '<', "$source_dir/$file"
        or die "Unable to open $source_dir/$file: $!\n";

    # Don't use split. Just assign the line.
    while (my $line = <$fh>) {
       $insert->execute($line,$file)
           or die "Execute failed: " . $dbh->errstr(); 
    }

    close $fh;
}
print "Status: Processing of complete.\n"; 
```

# mysql - 具有差异数据库的 2 台服务器的 MySQL 复制

> ID：13623376
> 
> 赞同：0
> 
> 时间：2012-11-29T10:11:54.437
> 
> 标签：mysql, replication, database-replication

目前我有一个运行以下（虚构）应用程序的服务器集群

Read_App1、Read_App2、Write_App1、Write_App2。前两个应用程序从 MySQL 读取，后两个应用程序顾名思义写入 MySQL。在数据库端，我有 2 台带有大量 RAM 的强大 X86 服务器。我的问题是如何使用这两个服务器来创建高效且有效的数据库布局。我想到的一件事是

DB1 <==双向复制==> DB2

Write_App1 和 Write_App2 写入 DB1，Read_App1 和 Read_App2 从 DB2 读取。我正在使用复制来实现数据冗余。记住我的要求，这是最有效的布局吗？只是分离读取和写入。好心提醒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:14:23.213

这取决于您需要数据的最新程度。是否需要 2 节点集群的额外读取性能容量。无论您使用多主同步复制还是异步复制。

> 只是分离读和写

您可以将执行写入的应用程序分开，但必须在每个数据库上执行写入才能读取数据。

使用异步复制，DB2 的负载将比 DB1 高得多。

# c# - 不显眼的日期时间？MVC4 中的验证

> ID：13623381
> 
> 赞同：11
> 
> 时间：2012-11-29T10:12:14.210
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我将 MVC3 解决方案升级到 MVC4。迁移后，验证器损坏。

如果我选择德语作为语言，我的输入日期是“20.03.2013”​​。我在 MVC4 中收到验证错误，但在 MVC3 中没有。如果我将格式从“20.03.2013”​​替换为“20/03/2013”​​，它在 MVC4 中有效，但在 MVC3 中无效；-)

我将当前线程的 UI 文化设置为德语。ResX 值的输出是正确的语言，~~所以我知道文化应该没有错误。~~，仅适用于网站本身。错误消息是英文的，但该站点是德文的。

我认为这意味着验证器使用了错误的 UI 文化。

这是我使用的代码。

```
[必需(ErrorMessageResourceName = "Error_DepartureDate", ErrorMessageResourceType = typeof(Resx.Query))]
公共日期时间？出发日期{得到; 放; }

```

我认为默认模型绑定器有问题，因为呈现的 html 看起来不错：

```
data-lang="de" data-mindate="3" data-val="true" data-val-required="Bitte geben Sie das gewünschte Reisedatum des Hinflugs ein." id="DepartureDate" name="DepartureDate" tabindex="3" type="text" value="" 

```

当您使用 Visual Studio 2012（安装了 SP1）模板创建新的 Mvc 应用程序时，我将 Jscript 升级到了随附的源代码。这没有影响。

我有一个 CultureModelBinder，它从 Session 中读取当前的文化并使用一个小的帮助函数设置文化。

```
公共静态无效 UpdateThreadCulture（CultureInfo 文化）
{
  Thread.CurrentThread.CurrentUICulture = 文化；            
}        

```

培养模型活页夹是默认活页夹。

```
ModelBinders.Binders.DefaultBinder = new CultureModelBinder();
ModelBinders.Binders.Add(typeof(DateTime?), new DateTimeModelBinder());
// 还有很多很多

```

也许 mvc4 的执行顺序发生了变化导致问题？

更新：该项目使用 .NET Framework 4.5 作为目标。

更新 2：

我有一个组合框，用户可以在其中选择 16 种不同的语言，每种语言都可能有自己的特定格式。

例如 DE-de -> DD.MM.YYYY；zh-cn -> DD/MM/YYYY；en-us -> MM/DD/YYYY

我刚刚得到了关于设置当前文化的提示，这是它应该是正确的证明。当验证器失败时，这段代码不会被命中，看起来它发生在客户端。

```
   公共类 DateTimeModelBinder : IModelBinder
    {
        私有 LogService _log = new LogService();

        公共对象 BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {            
            对象结果 = null;
            ValueProviderResult valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
            如果（值结果！= null）
            {
                尝试
                {
                    var stateHandler = new StateHandler(controllerContext.HttpContext.Session);                    
                    结果 = valueResult.ConvertTo(typeof(DateTime?), stateHandler.Culture);                                       
                }
                抓住
                {
                    尝试
                    {
                        结果 = valueResult.ConvertTo(typeof(DateTime?), CultureInfo.InvariantCulture);
                    }
                    捕捉（例外前）
                    {
                        _log.Error("DateTimeModelBinder 解析异常", ex);
                        _log.KeyValue("AttemptedValue", valueResult.AttemptedValue);                                           
                    }                    
                }
            }
            返回结果；
        }
    }

```

为了完整起见，我的文化模型活页夹：

```
  公共类 CultureModelBinder : DefaultModelBinder
    {      
        公共覆盖对象 BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            StateHandler stateHandler = new StateHandler(controllerContext.HttpContext.Session);
            Helper.UpdateThreadCulture(stateHandler.Culture);

            返回 base.BindModel(controllerContext, bindingContext);
        }        
    }

```

更新：也许与这个问题有关： [http ://connect.microsoft.com/VisualStudio/feedback/details/705643/a-data-val-date-attribute-is-generated-for-time-fields-in -asp-net-mvc-4](http://connect.microsoft.com/VisualStudio/feedback/details/705643/a-data-val-date-attribute-is-generated-for-time-fields-in-asp-net-mvc-4)

更新：阅读以下文章： [http ://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx](http://weblogs.asp.net/scottgu/archive/2010/06/10/jquery-globalization-plugin-from-microsoft.aspx)

尝试了以下方法：

按以下顺序加载脚本：

```
/Scripts/jquery-1.8.3.min.js
/Scripts/globalize.js
/Scripts/cultures/globalize.cultures.js
// 还有更多其他脚本...

```

添加了通话。输出是正确的“DE”。

```
        var currentLanguage = $("#DepartureDate").attr("data-lang");
        警报（当前语言）；       
        $.preferCulture(currentLanguage);

```

对验证器没有影响...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T15:08:53.767

关键是 Mvc3 在客户端的所有日期都没有验证，这就是关键。您只是在服务器端设置文化....但是您的文化设置根本没有反映在客户端...至少 Mvc 引擎不会自动执行此操作。使用不同于英语的文化在客户端正确处理日期和数字的唯一方法是使用一个 javascript 全球化库，该库能够正确解析所有文化中的日期，并将客户端文化设置为服务器端文化，那么您必须正确地重新定义所有验证方法以使用全球化函数。请阅读我博客的这篇文章，其中阐明了如何在客户端正确处理全球化：[http://www.dotnet-programming.com/post/2011/12/14/Globalization-Validation-and-DateNumber-Formats-in-AspNet-MVC.aspx](http://www.dotnet-programming.com/post/2011/12/14/Globalization-Validation-and-DateNumber-Formats-in-AspNet-MVC.aspx)

此外，请不要将 CurrentCulture 与 CurrentUICulture 混淆 CurrentUICulture 不会影响处理数字或日期的所有方式，但只会影响包含文化特定资源的资源文件，例如本地化字符串。

最后，在模型绑定器中设置文化是非常低效的，因为模型绑定器是一个递归函数，所以在模型重建过程中被调用了数百次，而文化设置操作不是简单的变量设置操作，但它有一个不可忽略的成本。最好编写一个全局控制器过滤器来处理文化设置（我总是这样做），因此每个请求只执行一次操作

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T11:39:37.280

尝试覆盖默认日期验证器：

```
// Replace dots so jq validator can understand what's going on
$(function () {
    $.validator.addMethod(
    "date",
    function (value, element) {
        var s = value;
        s = value.replace(/\./g, '/');

        // Chrome requires tolocaledatestring conversion, otherwise just use the slashed format
        var d = new Date();
        return this.optional(element) || !/Invalid|NaN/.test(new Date(d.toLocaleDateString(value))) || !/Invalid|NaN/.test(new Date(s));
    },
    ""
    );
});

$.validator.unobtrusive.parse(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-01T22:18:19.203

使用 ILSpy 查看代码，似乎是新引入的 ClientDataTypeModelValidatorProvider 添加了 data-val-date 属性。

如果您想恢复到 MVC3 风格的功能，那么只需从模型验证提供程序列表中删除该提供程序就可以了。

它并不能解决问题，但在几行代码中可能会消除由于 jquery 验证缺乏全球化而导致的问题。

```
using System.Web.Mvc;

...

protected void Application_Start()
{
  var providers = ModelValidatorProviders.Providers;
  var clientDataTypeModelValidatorProvider = providers.OfType<ClientDataTypeModelValidatorProvider>().FirstOrDefault();
  if ( clientDataTypeModelValidatorProvider != null )
  {
    providers.Remove( clientDataTypeModelValidatorProvider );
  }

  ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T08:46:34.937

Microsoft 建议将 mvc4 中的新 jquery.validate.js 替换为 MVC3 项目模板中的旧 jquery.validate.js。这可行，但有趣的是，该错误不在 MVC4 中，而在 MVC3 中。

我们使用 Francesco 描述的方式，请参阅接受的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T12:48:22.000

如果这只发生在 Chrome 中，那么这是由于 jquery 版本在日期验证中存在文化错误。

# mysql - SQL语言的目的是什么？

> ID：13623384
> 
> 赞同：5
> 
> 时间：2012-11-29T10:12:18.540
> 
> 标签：mysql, sql, nosql, innodb

在发现[HandlerSocket](http://yoshinorimatsunobu.blogspot.com/2010/10/using-mysql-as-nosql-story-for.html)并弄乱了许多 ORM 之后，困扰我的一件事是：

为什么 SQL 存在？有吗？

为什么数据库驱动程序不能直接提供例如 InnoDB 的方式，并将各种操作封装在 ORM 库本身中？

为什么 ORM -> SQL -> DB parse SQL -> Db 引擎操作？

为什么不能 ORM -> Db 引擎操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:23:35.870

SQL 的目的`Structured Query Language`是提供一种`Structured`使用`Query`标准在数据库中获取信息的方法`Language`。

SQL 提供了`global`使用数据库的标准，在不同平台上几乎没有差异。例如，如果您熟悉 SQL，您可以使用主要的 DB，例如`SQL Server` `mySql`语法`Oracle` *上存在一些细微差别，但至少就基本操作而言，它们并不是很突出*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:20:04.097

好吧，在任何类型的 ORM 存在之前，SQL 是第一个。一个简短的历史

*   首先，您将数据存储在顺序文件中
*   后来你使用了直接文件（clients.dat）
*   后来出现了第一个非关系数据库（检查[这个](http://www.personal.psu.edu/glh10/ist110/topic/topic07/topic07_06.html)）

然后有人想到了带有查询语言的关系数据库。幸运的是，我们有一个标准叫做 SQL（即使在 sql server、oracle 等中不同的 SQL 方言之间存在一些小的差异）

很久之后（SQL 已经很老了），有人发明了使用 sql 与 dbs 通信的 ORM。

也有一些努力让 ORM->DB 像 no-sql dbs、面向对象的 dbs (OODBMS) 和文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:12:25.167

使用 ORM 时，您只需将 SQL 替换为其他内容，例如 Hibernate 的 HQL。

SQL 在后台为您做了很多工作，您需要手动实现。SQL 的设计目的是让您声明查询的结果应该是什么。然后让数据库弄清楚如何去做。

想一想：

> *找我所有在 2011 年被录用的员工，他们的工资比他们所在部门的平均工资高 20%。*

在 SQL 中执行此操作并不复杂。

```
select name, 
       salary,
       deptno,
       hire_date
from (
   select name, 
          salary, 
          deptno,
          avg(salary) over (partition by deptno) as avg_detp_salary,
          hire_date
   from employee
   where extract(year from hire_date) = 2011    
) as t
where salary >= avg_dept_salary * 1.20; 
```

现在想想如果你没有查询语言（既没有 SQL 也没有 ORM 查询语言）你会怎么做

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-29T10:39:28.443

它的存在是因为很多人使用它。有许多与 SQL 兼容的非常好的工具。ODBC、JDBC。

我认为 SQL 非常古老，但没有什么比这更好的了，它几乎可以与任何数据库引擎一起使用，并允许您使用 SQL 的功能来操作数据。

有一些现代工具可以处理数据，更适合今天的需求——ORM、Linq、OLAP，但它们有不同的用途，它们不兼容。

还有一件事——你弄乱了许多 ORM。那就是问题所在。ORM的很多，互不兼容，大家互相学习。SQL 是一种语言（不同数据库引擎中的一些小差异。

# c++ - 基于证书的登录

> ID：13623386
> 
> 赞同：2
> 
> 时间：2012-11-29T10:12:24.023
> 
> 标签：c++, windows, winapi, smartcard, credential-providers

我目前正在为 Windows 开发基于智能卡的登录。为此，我开发了一个凭证提供程序，它可以与支持 nfc 的智能手机进行通信，该智能手机用作读卡器的替代品。智能手机和 cp 之间的通信是通过蓝牙和/或标准网络连接完成的。我目前的状态是一切正常，直到我想将收集的凭据发送到 LogonUI 以开始登录尝试。

基本上我的问题是我现在不知道如何使用从智能卡获得的证书登录到 Windows。主要问题是我似乎无法找到相应的api来获取证书。有谁知道如何做到这一点？指向正确文档的链接已经对我有所帮助。据我了解，LogonUI 使用 kerberos。他们在使用 MIT 实现吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T01:46:09.197

取决于传递给 [ICredentialProvider::SetUsageScenario的 CREDENTIAL_PROVIDER_USAGE_SCENARIO](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776044%28v=vs.85%29.aspx)

[ICredentialProviderCredential::GetSerialization](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776026(v=vs.85).aspx)
必须返回以下结构之一的序列化形式 [KERB_CERTIFICATE_LOGON](http://msdn.microsoft.com/en-us/library/windows/desktop/bb545680%28v=vs.85%29.aspx) [KERB_CERTIFICATE_UNLOCK_LOGON](http://msdn.microsoft.com/en-us/library/windows/desktop/bb545681%28v=vs.85%29.aspx)

在网络上搜索每个结构应该会找到用于序列化它们的代码。

# amazon-web-services - 克隆生产 RDS 实例的快速方法

> ID：13623390
> 
> 赞同：8
> 
> 时间：2012-11-29T10:12:30.763
> 
> 标签：amazon-web-services, amazon-rds

我有一个 RDS 实例，目前正在生产中，所有应用程序都使用同一个 RDS 实例。现在，当我想为每个应用程序创建单独的 RDS 实例时，我尝试使用称为恢复到时间点的 RDS 功能，但创建一个新的 RDS 实例需要将近一个小时。

有人可以建议我一些执行它的好方法，以便我可以创建正在运行的 rds 实例的精确副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-12-10T21:43:44.297

您真的应该考虑在克隆用例中使用 Aurora Mysql 而不是 RDS Mysql。您可以在几分钟内启动一个克隆，它甚至不会复制您的数据库页面，除非您对其进行变异（写入时复制协议）。

[https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Aurora.Managing.Clone.html](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Aurora.Managing.Clone.html)

恢复快照肯定不会像克隆那样快，因为它们会导致数据复制过头。如果您需要继续使用 RDS，那么是的，拥有一个热副本备用是最好的选择，尽管我并不完全相信这就是您正在寻找的。

# java - 无法解析的日期

> ID：13623392
> 
> 赞同：1
> 
> 时间：2012-11-29T10:12:40.763
> 
> 标签：java, date

我有一个字符串日期“31-Dec”和模式“dd-MMM”。下一个代码

```
DateFormat formatter = new SimpleDateFormat(pattern);
formatter.setTimeZone(timeZone);
formatter.parse(input); 
```

产生异常

```
java.text.ParseException: Unparseable date: "31-Dec"
    at java.text.DateFormat.parse(DateFormat.java:337).... 
```

我做错什么了？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:27:26.403

一个问题可能是你`Locale`不是英语。试试这个：

```
DateFormat formatter = new SimpleDateFormat("dd-MMM", Locale.ENGLISH);
try {
    System.out.println(formatter.parse("31-Dec"));
} catch (ParseException e) {
    e.printStackTrace();
} 
```

这为我返回：

> 1970 年 12 月 31 日星期四 00:00:00 CET

由于您的日期字符串中缺少年份，您会看到它自动插入`1970`为年份。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:48:08.103

我写了一个可以在我的机器上运行的简单示例。试一试你的，它可能会帮助你查明问题。

```
public class Example {

    public static void main(String[] args) {
        String data = "31-Dec";
        String pattern = "dd-MMMM";

        DateFormat formatter = new SimpleDateFormat(pattern);
        formatter.setTimeZone(TimeZone.getDefault());
        try {
            Date date = formatter.parse(data);
            System.out.println(date.getDate());
            System.out.println(date.getMonth());
        } catch (ParseException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:17:22.693

我认为，您的输入字符串（代表 date ）不是模式中描述的格式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:45:27.610

试试这个 - -

```
 String pattern = "dd-MMM";
SimpleDateFormat dateFormat = new SimpleDateFormat(pattern);
dateFormat.setTimeZone(TimeZone.getDefault());
String input = "31-Dec";
try
{
    dateFormat.parse(input);
    Calendar cal = dateFormat.getCalendar();
    System.out.println("Day "+cal.get(Calendar.DAY_OF_MONTH));
    System.out.println("MONTH "+ cal.get(Calendar.MONTH));

}catch(Exception e)
{

} 
```

# c++ - 如何在 OpenCV 2.4.3 中编写视频文件

> ID：13623394
> 
> 赞同：13
> 
> 时间：2012-11-29T10:12:50.100
> 
> 标签：c++, opencv, video, image-processing

我正在使用 OpenCV 2.4.3 读取和写入视频文件。我的代码是这样的：

```
cv::VideoCapture video;
video.open ( "D:\\testVideo.avi" );
cv::VideoWriter output;
output.open ( "D:\\outputVideo.avi", CV_FOURCC('D','I','V','X'), 120, cv::Size ( 1200,1600), true );
cv::Mat img;

for ( int n = 0; ; n ++ )
{
     video >> img;
     output.write ( img );
 } 
```

然后结果视频是一个空文件，我无法打开它。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T11:18:08.437

问题可能出在您使用的编解码器上。

确保您的东西正常工作的一个简单测试是简单地从网络摄像头检索帧并将它们写入视频文件：

```
// Load input video
cv::VideoCapture input_cap(argv[1]);
if (!input_cap.isOpened())
{
        std::cout << "!!! Input video could not be opened" << std::endl;
        return;
}

// Setup output video
cv::VideoWriter output_cap(argv[2], 
               input_cap.get(CV_CAP_PROP_FOURCC),
               input_cap.get(CV_CAP_PROP_FPS),
               cv::Size(input_cap.get(CV_CAP_PROP_FRAME_WIDTH),
               input_cap.get(CV_CAP_PROP_FRAME_HEIGHT)));

if (!output_cap.isOpened())
{
        std::cout << "!!! Output video could not be opened" << std::endl;
        return;
}

// Loop to read from input and write to output
cv::Mat frame;

while (true)
{       
    if (!input_cap.read(frame))             
        break;

    output_cap.write(frame);
}

input_cap.release();
output_cap.release(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-27T11:14:43.790

您声明`cv::VideoWriter output`帧大小为 1200*1600。所以使用 `cv::resize(img,img,cv::Size(1200,1600));`之前将框架调整为 1200*1600`output.write(img);`

# android - 方形图像视图

> ID：13623397
> 
> 赞同：10
> 
> 时间：2012-11-29T10:13:13.320
> 
> 标签：android, android-layout, android-imageview

我试图`ImageView`在对话框中显示一个始终是方形的。尺寸可能会因显示器的分辨率而异（准确地说是纵向宽度），但 ImageView 需要形成最大的 Square 以在其中容纳方形图像。这是我的 XML 代码。

```
<ImageView
    android:id="@+id/dialog_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="centerInside"
    android:adjustViewBounds="true"
    /> 
```

但问题是`Square`图像是在运行时动态设置的，并且 ImageView 最终成为一个矩形，其宽度与 Square Image 大小相同。我能做些什么来达到同样的效果？

**编辑：**要了解我想要实现的目标，就像在联系人应用程序中选择联系人并单击个人资料图片时显示的内容。它缩小并在活动顶部保持为正方形。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-29T10:32:32.043

在运行时设置图像视图高度，但首先使用此代码获取显示宽度

```
Display  display = getWindowManager().getDefaultDisplay();
int swidth = display.getWidth(); 
```

现在像这样设置图像视图的高度

```
LayoutParams params = eventImage.getLayoutParams();
params.width = LayoutParams.FILL_PARENT;
params.height = swidth ;
eventImage.setLayoutParams(params); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-15T13:19:05.830

创建一个单独的类来为您的 ImageView 动态定义大小，该类应继承 ImageView 类，如下所示：

```
public class SquareImageView extends ImageView {

public SquareImageView(Context context) {
    super(context);
}

public SquareImageView(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public SquareImageView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    super.onMeasure(widthMeasureSpec, widthMeasureSpec);

int width = getMeasuredWidth();
    setMeasuredDimension(width, width);

} 
```

}

setMeasuredDimension(width, width); 将自动将您的高度设置为宽度。

在 xml 文件中，使用此类作为视图代替 ImageView，如下所示：

```
 <com.packagepath.SquareImageView
        android:id="@+id/Imageview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-05T16:37:29.283

您可以使用 ：

```
app:layout_constraintDimensionRatio="1:1" 
```

这样：

```
<android.support.constraint.ConstraintLayout
      android:id="@+id/lyt_img_cover"
      android:layout_width="@dimen/image_top_episode"
      android:layout_height="match_parent"
      android:layout_centerInParent="false"
      android:elevation="0dp"
      android:foregroundGravity="center">

        <ImageView

          android:id="@+id/img_episode"
          android:layout_width="0dp"
          android:layout_height="0dp"
          android:elevation="7dp"
          app:layout_constraintBottom_toBottomOf="parent"
          app:layout_constraintDimensionRatio="1:1"
          app:layout_constraintLeft_toLeftOf="parent"
          app:layout_constraintRight_toRightOf="parent"
          app:layout_constraintTop_toTopOf="parent"
          />
    </ImageView> 
```

它的布局应该是 ConstraintLayout

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-28T03:26:53.590

创建自己的`ImageView`应该继承 ImageView 类，如下所示：

```
public class SquareImageView extends AppCompatImageView {
    public SquareImageView(Context context) {
        super(context);
    }

    public SquareImageView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
    }

    public SquareImageView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        int width = MeasureSpec.getSize(widthMeasureSpec);
        int height = MeasureSpec.getSize(heightMeasureSpec);
        int size;

        //If the layout_width or layout_width of this view is set as match_parent or any exact dimension, then this view will use that dimension
        if(MeasureSpec.getMode(widthMeasureSpec) == MeasureSpec.EXACTLY ^ MeasureSpec.getMode(heightMeasureSpec) == MeasureSpec.EXACTLY) {
            if (MeasureSpec.getMode(widthMeasureSpec) == MeasureSpec.EXACTLY)
                size = width;
            else
                size = height;
        }
        //If the layout_width and layout_width of this view are not set or both set as match_parent or any exact dimension,
        // then this view will use the minimum dimension
        else
            size = Math.min(width, height);
        setMeasuredDimension(size, size);
    }
} 
```

# asp.net - 将视图与模型绑定在 mvc 的命名空间中显示错误

> ID：13623401
> 
> 赞同：1
> 
> 时间：2012-11-29T10:13:18.610
> 
> 标签：asp.net, asp.net-mvc-3

我在将包含少量属性的模型传递给视图时遇到问题。使用此代码，我收到错误

> type 'viewmodel 命名空间中不存在类型名称Entity

**控制器**

```
public ActionResult Index()
   {
       return View(GetProducts());
   }
private static IEnumerable<ProductViewModel> GetProducts()
   {
       var northwind = new NorthwindDataContext();
       return northwind.Products.Select(product => new ProductViewModel
       {
           ProductID = product.ProductID,
           ProductName = product.ProductName,
           UnitPrice = product.UnitPrice ?? 0,
           UnitsInStock = product.UnitsInStock ?? 0,
           UnitsOnOrder = product.UnitsOnOrder ?? 0,
           Discontinued = product.Discontinued,
           LastSupply = DateTime.Today
       });
   } 
```

**视图模型**

```
namespace AutoComplete.Entity
{
 public class ProductViewModel
 {
    [ScaffoldColumn(false)]
    public int ProductID
    {
        get;
        set;
    }

    [Required]
    [DisplayName("Product name")]
    public string ProductName
    {
        get;
        set;
    }

    [Required]
    [DisplayName("Unit price")]
    [DataType(DataType.Currency)]
    [Range(0, int.MaxValue)]
    public decimal UnitPrice
    {
        get;
        set;
    }

    [Required]
    [DisplayName("Units in stock")]
    [DataType("Integer")]
    [Range(0, int.MaxValue)]
    public int UnitsInStock
    {
        get;
        set;
    }

    public bool Discontinued
    {
        get;
        set;
    }

    [DisplayName("Last supply")]
    [DataType(DataType.Date)]
    public DateTime LastSupply
    {
        get;
        set;
    }

    public short UnitsOnOrder { get; set; }
}
} 
```

**看法**

```
@model IEnumerable<AutoComplete.Entity.ProductViewModel> 
```

# java - 需要帮助了解 mySQL、POJO、hibernate 和 JSP

> ID：13623404
> 
> 赞同：0
> 
> 时间：2012-11-29T10:13:33.917
> 
> 标签：java, mysql, database, eclipse, hibernate

谁能帮我举个例子，从头到尾你可以解释我如何创建一个数据库，POJO，然后把它放在可以发送到数据库的 JSP 格式中。像 1 个表、1 个 set/get 方法、JSP inputText 中的 1 个字段和 1 个将其发送到数据库的命令按钮？

我已经处理了几个小时的应用程序。我可以手动将一个字段放入 mySQL 数据库并查询该数据库，以便我可以使用手动放入数据库的凭据登录。但是如何将字段（如用户）添加到数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:28:59.710

我可能有点乐观，但这不是每个普通的 Java EE5 教程都教给你的东西吗？

无论如何，我将从 Sun/Oracle Java EE 5 教程[中的 Web 层中的持久性](http://docs.oracle.com/javaee/5/tutorial/doc/bnbrm.html)一章开始，因为在第 5 版中，他们仍然在讨论 JSP。本章将引导您完成您描述的所有步骤。

有 1 个问题（或者至少在 imo 中不是很明显）：如果您从 Web 层操作数据，则必须手动将更新部分包装在 UserTransaction 中，如此[处](http://docs.oracle.com/javaee/5/tutorial/doc/bnbrm.html#bnbrr)所述，他们的示例代码如下所示：

```
@Resource
UserTransaction utx;
...
try {
    utx.begin();
    bookDBAO.buyBooks(cart);
    utx.commit();
} catch (Exception ex) {
    try {
        utx.rollback();
    } catch (Exception exe) {
        System.out.println("Rollback failed: "+exe.getMessage());
} 
```

另一个说明：现代 IDE 减少了您必须编写的样板数量，例如，它们可以从现有数据库开始生成实体类，为您处理持久性单元的设置等。一次编写所有这些东西可能会很有趣知道它是如何完成的，但在“生产”环境中这是你的 IDE 应该做的事情。

# adsense - 申请未获批准，想更换网站，无能为力？

> ID：13623405
> 
> 赞同：8
> 
> 时间：2012-11-29T10:13:35.413
> 
> 标签：adsense

1.  我有一个 Google 帐户很长时间了。
2.  我使用 Blogspot 创建了一个博客（我们称之为 SITE A）。
3.  我已使用我的姓名、街道地址和电话号码将我的博客注册到 AdSense，并等待批准。
4.  我收到一封电子邮件，说我的申请未获批准

在这一点上，我有以下“可能性”：

a) 取消我的 AdSense 帐户并重新开始
b) 在我的 AdSense 应用程序中更改我的网站（到新的 SITE B）
c) 创建一个新的 Google 帐户并使用新网站 (SITE B) 申请 adsense
d) 删除我的 Google 帐户

但是，我发现这些都没有真正起作用：

a) 我无法取消不存在的帐户。除非 AdSense 申请获得批准，否则我的帐户不存在，因此无法“取消”。
b) 我无法将我的站点更改为站点 B，因为 Web 界面不允许我这样做。

[http://i.imgur.com/nUTw6.png](https://i.imgur.com/nUTw6.png)

c) 应该可以正常工作，除了我不能使用我的姓名、地址或电话号码这一事实，因为如果已经使用该信息提出了另一个应用程序请求，谷歌会拒绝这些请求。

d) 如果我删除我的帐户并稍后创建它，我的应用程序仍然存在。此外，为了这样的事情而删除我过去 6 年使用的帐户是愚蠢的。

所以..

1.  我唯一的希望是有一天，不知何故，站点 A 将被批准，尽管我知道它不会，因为它只是一个空的测试博客..？
2.  经过这次体验，我觉得 Google Adsense 更像 Google Nonsense。
3.  他们应该警告你，一旦你提出申请，它就是永远的。

我也无法通过电子邮件寻求支持，因为他们在任何地方都没有显示任何支持电子邮件。他们有一份支持表格，该表格只能在 Google AdSense 帐户面板中使用，我无法访问，因为我没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:15:01.863

我也面临同样的问题。我有 2 个关于运动的博客，另一个是关于我个人想法的单个 gmail 帐户。首先，我将 adsense 应用到体育博客，但被拒绝（因此我无法将其应用到具有该 gmail 帐户的另一个个人博客）。所以后来我在我的个人博客上创建了另一个 gmail 帐户的管理员，并填写了我之前使用第一个 gmail 帐户申请 adsense 的信息。之后我的adsense被批准了。Adsense 被拒并不意味着您无法重新申请，但如果您创建了一个 Adsense 帐户并且它被禁用，则意味着您以后无法使用相同的姓名和电话号码重新申请。

因此，如果您的博客内容是原创的并且不包含大量外部链接，那么您可以通过创建另一个帐户来申请。另一个有趣的案例也发生在我的朋友身上。即我的一个朋友创建了博客并申请了adsense，但被拒绝了，当他让另一个朋友（例如B）管理员并通过B的帐户申请同一个博客的adsense并获得批准时。我不知道为什么会这样（注意：在这里我添加了我的经验，因为它可以帮助您找出可能的解决方案。）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-29T10:39:05.773

如果您的网站符合该网站的政策和标准，您可以为同一网站重新申请 AdSense。

# java - 如何匿名实例化存储在 Java 中的 Class 对象中的抽象类？

> ID：13623408
> 
> 赞同：6
> 
> 时间：2012-11-29T10:13:42.607
> 
> 标签：java, reflection

如果你有一个抽象类，你可以通过派生一个具体的匿名类来实例化它。这是一个例子：

```
abstract class A {
     abstract void hello ();
}

A say = new A () { void hello () { System.out.println ("hello"); } }

say.hello(); // -> hello 
```

如果类存储在 Class 对象中，如何做同样的事情？这是一个例子：

```
// -*- compile-command: "javac anon.java && java anon"; -*-

class anon
{
    anon () throws Exception {}

    abstract class AbstractClass
    {
        AbstractClass () throws Exception {}
        abstract void id ();
    }

    AbstractClass x = new AbstractClass ()
        {
            void id () { System.out.println ("X"); }
        };

    Class<AbstractClass> abstractclass 
        = (Class<AbstractClass>)Class.forName ("anon$AbstractClass");

    AbstractClass y = abstractclass.getConstructor().newInstance();

    public static void main (String argv[]) throws Exception
    {
        anon main = new anon();
        main.x.id(); // should print "X"
        main.y.id(); // should print "Y"
    }
} 
```

第一个实例化 (x) 工作正常，但第二个 (y) 失败，因为它尝试直接实例化抽象类而不派生具体类。如何在只有 Class 对象的 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:49:23.070

您可能对匿名类的工作原理有误解。匿名类实际上是一个普通类，就像任何其他类一样，并且有自己的类文件。Java-the-language 仅提供了一些语法糖，并允许通过在其自己的文件中声明一个常规命名的顶级类来完全模仿某些东西的不太冗长的语法。这就是为什么您会发现反射 API 对于您想要实现的目标毫无用处。基本上，您希望动态创建一个没有其类文件的类。为此，您需要一个合适的库，例如`javassist`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:34:44.940

如果`A`将是接口而不是抽象类，则可以使用动态代理执行此操作，但这不适用于抽象类。这是如何与接口一起使用的示例：

```
import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

interface A {
    void hello();
}

public class Example {
    public static void main(String[] args) throws Exception {
        @SuppressWarnings("unchecked")
        Class<A> cls = (Class<A>) Class.forName("A");

        InvocationHandler handler = new InvocationHandler() {
            @Override
            public Object invoke(Object proxy, Method method, Object[] args)
                    throws Throwable {
                System.out.println(method.getName());
                return null;
            }
        };

        A instance = (A) Proxy.newProxyInstance(cls.getClassLoader(),
            new Class<?>[] { cls }, handler);

        instance.hello();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T23:51:44.247

正如 Marko 所说，匿名类与文件和字节码级别的任何其他类相同。它只是使小类易于编写的语言级别的语法糖。

在您的示例中，`x.getClass()`不是一个`abstract`类。它是 的子类`AbstractClass`，根据 的定义`id()`，它不再是`abstract`。它可能有一个类似的名字`anon$1`。

当然，如果它是抽象的，你就不能实例化它。这正是您在分配`y`. 您的反射相当于`y = anon.AbstractClass();`with overriding `id()`。反射在运行时出错，就像该语句在编译时出错一样。

以下可能（取决于其他匿名类的存在及其顺序）并且运行没有错误，但打印“X”：

```
Class<AbstractClass> abstractclass 
    = (Class<AbstractClass>)Class.forName("anon$1");  // Note the different class name
AbstractClass y = abstractclass.getConstructor().newInstance();
y.id();  // prints "X", not "Y" 
```

* * *

到那个地步...

```
main.y.id(); // should print "Y" 
```

您的代码中没有任何地方打印“Y”字符，因此不应该有任何理由期待它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T11:46:18.153

抽象类无法实例化，因此您实际上需要一个扩展抽象类的新具体类。类是由 java 编译器从源代码生成的。因此，编写该源代码并运行 java 编译器。动态地做到这一点并不容易，因为 java 编译器需要源代码驻留在文件中，并将编译后的类也放入文件系统，但有可能。查看它应该如何[动态生成 Java 类](http://www.accordess.com/wpblog/an-overview-of-java-compilation-api-jsr-199/)。然后你必须加载编译的类，这是另一回事。

如果您认为这是“java 限制”，可能是您为任务选择了错误的语言（或选择了错误的任务）。尝试基于 JVM 的动态语言：Groovy、JRuby……有很多。

# sql - 使用枢轴将行分成列

> ID：13623414
> 
> 赞同：-2
> 
> 时间：2012-11-29T10:14:07.693
> 
> 标签：sql, sql-server, pivot, unpivot

你能帮我解决这个错误吗

> “nvrchildgender”列的类型与 UNPIVOT 列表中指定的其他列的类型冲突。

表结构：

```
CREATE TABLE [dbo].[tblHRIS_ChildDetails](
    [intCHID] [int],
    [intSID] [int] NOT NULL,
    [nvrChildname] [nvarchar](250) NULL,
    [nvrChildGender] [nvarchar](50) NULL,
    [dttChildDOB] [datetime] NULL,
    [nvrnominee] [nvarchar](50) NULL,
    [nvrChildOccupation] [nvarchar](250) NULL,
    [dttCreatedon] [datetime] NULL,
    [dttModifiedOn] [datetime] NULL,
    [nvrModifiedby] [nvarchar](50) NULL
) ON [PRIMARY] 
```

询问：

```
select *
from
(
  select value, col+'_'+cast(rn as varchar(10)) col
  from
  (
    select nvrchildname,
      nvrchildgender,
      convert(nvarchar(10), dttchildDOB, 120) dttchildDOB,
      nvrchildoccupation,
      row_number() over(partition by intsid order by intCHID) rn
    from tblHRIS_ChildDetails
    where intsid = 463
  ) src
  unpivot
  (
    value 
    for col in (nvrchildname, nvrchildgender, dttchildDOB,  nvrchildoccupation)
  ) unpiv
) src1
pivot
(
  max(value)
  for col in ([nvrchildname_1], [nvrgender_1], 
              [dttchildDOB_1], [occupation_1], 
              [nvrchildname_2], [nvrgender_2], 
              [dttchildDOB_2], [occupation_2]) 
) piv 
```

我无法运行此查询，我认为请解决一些演员问题。

[Sql 小提琴](http://sqlfiddle.com/#!3/84775/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:24:51.633

列表中的`UNPIVOT`列：

```
nvrchildname, nvrchildgender, dttchildDOB,  nvrchildoccupation 
```

有不同的数据类型。

您必须确保列的类型。就像是 ：

```
 ...
  CAST(nvrchildname AS NVARCHAR(10)) nvrchildname,
  CAST(nvrchildgender AS NVARCHAR(10)) nvrchildgender,
  convert(nvarchar(10), dttchildDOB, 120) dttchildDOB,
  CAST (nvrchildoccupation AS NVARCHAR(10)) nvrchildoccupation
 ... 
```

## [更新的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/84775/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:26:30.740

要成功 UNPIVOT，列类型必须匹配。由于 4 列中的两列已经存在`nvarchar(250)`，而另外两列较短，因此将它们提升`nvarchar(250)`为最方便的解决方法。

```
select *
from
(
  select value, col+'_'+cast(rn as varchar(10)) col
  from
  (
    select nvrchildname,
      cast(nvrchildgender as nvarchar(250)) nvrgender,
      convert(nvarchar(250), dttchildDOB, 120) dttchildDOB,
      nvrchildoccupation occupation,
      row_number() over(partition by intsid order by intCHID) rn
    from tblHRIS_ChildDetails
    where intsid = 463
  ) src
  unpivot
  (
    value 
    for col in (nvrchildname, nvrgender, dttchildDOB, occupation)
  ) unpiv
) src1
pivot
(
  max(value)
  for col in ([nvrchildname_1], [nvrgender_1], 
              [dttchildDOB_1], [occupation_1], 
              [nvrchildname_2], [nvrgender_2], 
              [dttchildDOB_2], [occupation_2]) 
) piv 
```

**注意：**您已命名 PIVOT 列`nvrgender`，但基列是`nvrchildgender`. `occupation`枢轴和非枢轴之间的列命名不匹配也存在同样的问题。

# php - 超过当前时间戳或日期时自动删除记录

> ID：13623419
> 
> 赞同：1
> 
> 时间：2012-11-29T10:14:21.537
> 
> 标签：php, mysql, field

我正在编写密码恢复脚本。当用户想要找回自己的密码时，一个50串的随机验证码被写入数据库，用于`$_GET`验证。

这个表叫做`recovery`is`var(50)`和`unique`。接受链接后，该字段将被删除。但是如果用户不打算点击链接呢？这必须从数据库中删除，因为这个随机的 50 个字符串被创建的机会越来越大，并且数据库得到了不必要的数据。

我一直在环顾四周，看到了这个：

`INSERT INTO what_ever ('', '', now(), DATE_ADD(NOW(), INTERVAL 3 DAY));`

这样我输入了一个过期日期，但是MYSQL如何在适当的时候自己删除呢？这甚至可能吗？

如果没有，我最好的选择是什么？

**编辑：**

当然3天太多了。我想了15分钟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:20:11.340

您可以编写一个触发器，在插入新行时删除旧数据。

如果您不知道如何编写触发器，请使用像[HeidiSQL](http://www.heidisql.com/)这样的高级 MySQL 客户端，它会在一些 GUI 方面为您提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:19:57.267

您可以在插入数据库时​​放置一个触发器，以删除任何早于一定数量的记录。

# api - 替换 Google 齿轮位置 API

> ID：13623421
> 
> 赞同：1
> 
> 时间：2012-11-29T10:14:23.903
> 
> 标签：api, location, cell, gears

我使用 google gears location API 来定位 cell-id 和 wifi mac 地址（获取纬度/经度）。但不使用浏览器，使用java代码。我使用了这个 URI：[http ://www.google.com/loc/json](http://www.google.com/loc/json)

现在，这个 API 不再可用了！！--> [https://developers.google.com/gears/](https://developers.google.com/gears/)

我知道替代品是 HTML5，但我的应用程序不能在浏览器上运行......你知道我如何在没有浏览器的情况下使用 HTML5 API（简单的 HTTP 请求）或替代方案吗？

这是我的旧代码，供参考：

```
...
        JSONObject root = new JSONObject();

        root.put("version", "1.1.0");   

        root.put("host", "maps.google.com");

        JSONArray cell_towers = new JSONArray();
        JSONObject cell_tower = new JSONObject();
        cell_tower.put("cell_id", 10104);
        cell_tower.put("location_area_code", 101);
        cell_tower.put("mobile_country_code", 228);
        cell_tower.put("mobile_network_code", 1);
        cell_tower.put("request_address", true);
        cell_tower.put("address_language", "en_GB");
        cell_tower.put("age", new Integer(0));
        cell_towers.put(cell_tower);
        root.put("cell_towers", cell_towers);

        String result = postHttp("http://www.google.com/loc/json", root);
    }

...

    private static String postHttp(String urlToUse, JSONObject data) throws Exception {

        StringBuilder respBuilder = new StringBuilder();
        if (urlToUse.length() == 0) {
            return null;
        }
        URL url;
        try {
            url = new URL(urlToUse);
        } catch (MalformedURLException ex) {
            return null;
        }
        URLConnection urlCon;
        try {
            urlCon = url.openConnection();

            urlCon.setDoOutput(true);
            OutputStream wr = urlCon.getOutputStream();
            if (data != null) {
                String dd = data.toString();
                wr.write(dd.getBytes());
            }
            wr.flush();
            int len = urlCon.getContentLength();
            if (len != 0) {

                BufferedReader reader = new BufferedReader(new InputStreamReader(urlCon.getInputStream(), "UTF-8"));

                String line="";
                while ((line = reader.readLine()) != null) {
                    respBuilder.append(line + "\n");
                }
                return respBuilder.toString().trim();
            } else {
                return null;
            }
        } catch (IOException ex) {
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T18:05:23.380

Google 现在提供付费地理定位 API [https://developers.google.com/maps/documentation/business/geolocation/](https://developers.google.com/maps/documentation/business/geolocation/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-26T01:20:24.800

您可以调用[minigps]： http: [//www.minigps.net/map.html](http://www.minigps.net/map.html) “点击查询”可以使用google json api，只需将ip更改为：http: [//www.minigps.net/minigps/map /谷歌/位置](http://www.minigps.net/minigps/map/google/location)

flflow 是 http 字节：2。这也是，但现在跟随一个代码块：

```
 URL:http://www.minigps.net/minigps/map/google/location
   Request Method:POST
   Status Code:200 OK
   Request Headersview source
   Accept:application/json, text/javascript, */*; q=0.01
   Accept-Charset:GBK,utf-8;q=0.7,*;q=0.3
   Accept-Encoding:gzip,deflate,sdch
   Accept-Language:zh-CN,zh;q=0.8
   Connection:keep-alive
   Content-Length:191
   Content-Type:application/json; charset=UTF-8
   Cookie:bdshare_firstime=1356366713546; JSESSIONID=68243935CD3355089CF07A3A22AAB372
   Host:www.minigps.net
   Origin:http://www.minigps.net
   Referer:http://www.minigps.net/map.html
   User-Agent:Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.4 (KHTML, like Gecko)            Chrome/22.0.1229.94 Safari/537.4
   X-Requested-With:XMLHttpRequest
   Request Payload
   {"version":"1.1.0","host":"maps.google.com","cell_towers":  [{"cell_id":"3721","location_area_code":"9779","mobile_country_code":"460","mobile_network_c       ode":"0","age":0,"signal_strength":-65}]}
    Response Headersview source
   Content-Type:application/json
   Date:Sat, 12 Jan 2013 06:03:15 GMT
   Server:Apache-Coyote/1.1
   Transfer-Encoding:chunked 
```

# android - 如何发送正文包含表单详细信息的电子邮件？

> ID：13623424
> 
> 赞同：0
> 
> 时间：2012-11-29T10:14:24.600
> 
> 标签：android, email

我正在开发基于表单的应用程序。该表格包括客户详细信息。当他单击提交按钮时，表单的详细信息将作为电子邮件正文包含在内。

下面是我的代码：

订单.java

```
import android.app.Activity;    
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class Order extends Activity{
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.order);
        final EditText name   = (EditText)findViewById(R.id.username);
        final EditText mail   = (EditText)findViewById(R.id.email);
        final EditText phone   = (EditText)findViewById(R.id.phone);
        final EditText product   = (EditText)findViewById(R.id.product);
        final String _name = name.getText().toString();
        final String _mail = mail.getText().toString();
        final String _phone = phone.getText().toString();
        final String _product = product.getText().toString();
        System.out.println(_name);
        System.out.println(_mail);
        System.out.println(_phone);
        System.out.println(_product);
        Button email = (Button) findViewById(R.id.Button01);
        email.setOnClickListener(new OnClickListener(){  
                  public void onClick(View v){
                  String[] recipients = new String[]{"b.gadwantikar1@gmail.com", "",};
                      StringBuilder body = new StringBuilder();
                      StringBuilder body1 = new StringBuilder();
                      body1.append("To: " + recipients);
                      body.append("Name: "+name.getText().toString());
                      body.append("\n\n\nMail: "+mail.getText().toString());
                      body.append("\n\n\nPhone: "+phone.getText().toString());
                      body.append("\n\n\nProduct: "+product.getText().toString());
                      Intent i = new Intent(android.content.Intent.ACTION_SEND);
                      i.setType("text/plain");
                      i.putExtra(android.content.Intent.EXTRA_EMAIL, body1.toString());
                      i.putExtra(android.content.Intent.EXTRA_SUBJECT, "Customer Details");
                      i.putExtra(android.content.Intent.EXTRA_TEXT, body.toString());
startActivity(i);
}
});
}
} 
```

xml文件是：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >    

    <EditText
        android:layout_width="60dip"
        android:layout_height="wrap_content"
        android:id="@+id/edit"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/btn"
        android:text="Click"/>    
</LinearLayout> 
```

我得到了程序中“from：”字段中给出的邮件ID，但我想要“to：”字段中的那个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:36:35.880

```
StringBuilder body = new StringBuilder();
body.append("Name: "+nameField.getText().toString());
body.append("\nAge: "+ageField.getText().toString());
body.append("\nGender: "+genderField.getText().toString());

// Sending to admin
Intent i = new Intent(Intent.ACTION_SEND);
i.setType("text/plain");
i.putExtra(Intent.EXTRA_EMAIL, new String[] {"admin@gmail.com"} );
i.putExtra(Intent.EXTRA_SUBJECT, "Customer Details");
i.putExtra(Intent.EXTRA_TEXT, body.toString());
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:28:46.933

您必须使用`StringBuilder`它将管理您的字符串。邮件应为 html 格式，因此您必须使用 html 支持的类的方法，例如`Html.fromHtml(sb.toString());`.

我只是展示了一些将附加到字符串并发送到邮件正文区域的文本，您可以在那里发送表单。

```
 public StringBuilder sb;
 sb= new StringBuilder();

   // This is Mail Format That will be show in Body area and send to be customer. 

   sb.append("<p><b><font color=\"#8CC248\">Title</b></p>");
   sb.append("<p><b><font color=\"#000000\">Dear,"+ edittextvalue in string mode +",</b></p>"); 
```

**现在将此发送到邮件`onClick`事件**

```
Intent i2 = new Intent(android.content.Intent.ACTION_SEND);      
i2.setType("text/html");
i2.putExtra(android.content.Intent.EXTRA_TEXT,Html.fromHtml(sb.toString())); 
```

查看您的输出。

# vb.net - 从查询字符串中拆分请求

> ID：13623425
> 
> 赞同：0
> 
> 时间：2012-11-29T10:14:28.657
> 
> 标签：vb.net

我想知道如何在 VB.net 中拆分查询字符串的一部分以获取发布请求？

因此，如果我有一个如下输出的 URL，我将如何只获取 ID 部分？

```
www.urlhere.com/name=whatever?id=someid 
```

我需要获取 ?id= 的特定部分，并且我认为以下内容可以在 VB.net 中使用。

```
someString = Request.QueryString("?id") 
```

然而，这并没有抓住查询字符串的正确部分。谁能指出我出错的方向？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:19:03.423

如果您有可用的当前上下文（因此，如果您实际上是在需要读取请求查询字符串的 Web 应用程序中执行此操作），您可以执行此操作。

```
Dim id As String = System.Web.HttpContext.Current.Request.QueryString("id") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:33:45.837

如果你想要这个：“?id=34”试试这个：

```
 Dim url As String = "www.urlhere.com/name=whatever?id=someid"

    Dim selectId As String = url.Substring(url.LastIndexOf("?id="), url.Length - url.LastIndexOf("?id=")) 
```

如果你只想要这个：“?id=”

```
 Dim url As String = "www.urlhere.com/name=whatever?id=someid"

   Dim selectId As String = url.Substring(url.LastIndexOf("?id="), 4) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T19:30:03.433

一个彻底的方法来完成它，这样你就可以看到它在哪个阶段出错了：

```
Imports System.Web ' remember to add a reference to System.Web '

Module Module1

    Sub Main()
        Dim s = "http://www.urlhere.com/name=whatever?id=someid"
        Dim u = New Uri(s)
        Dim q = u.Query
        Dim parts = HttpUtility.ParseQueryString(q)
        Console.WriteLine(parts("id"))
        Console.ReadLine()
    End Sub

End Module 
```

输出：someid

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T17:42:43.770

这应该抓住 id 中“=”后面的任何内容

```
Dim id as string
id = Request.QueryString("id") 
```

# c++ - 检查 QTextStream::operator>> 是否失败

> ID：13623426
> 
> 赞同：3
> 
> 时间：2012-11-29T10:14:31.890
> 
> 标签：c++, qt

诸如返回成功读取项目数之类的函数`sscanf`，这对于错误检查很有用，例如下面的代码将打印“失败”，因为 sscanf 将返回 3（读取了 1、2、3，但“文本”不是数字） .

是否`QTextStream`提供等效的错误检查方式？

```
const char *text = "1 2 3 text";
int a, b, c, d;
if (4 != sscanf(text, "%d %d %d %d", &a, &b, &c, &d))
    printf("failed");
QString text2 = text;
QTextStream stream(&text2);
stream >> a >> b >> c >> d; // how do I know that d could not be assigned? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T10:16:00.393

您可以在读取后通过调用查询[流的状态](http://qt-project.org/doc/qt-4.8/qtextstream.html#Status-enum)`stream.status()`：

```
if (stream.status() == QTextStream::Ok) 
{
    // succeeded
} 
else
{
    // failed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-06T18:02:47.110

无论如何，那个 sscanf 检查可能还不够:-(

在很多情况下，开发人员会想要寻找更多的错误，比如溢出等。

```
const char *text = "1 2 3 9999999999";
int a, b, c, d;
if (4 != sscanf(text, "%d %d %d %d", &a, &b, &c, &d))
    printf("failed");
printf("Numbers: %d %d %d %d\n", a, b, c, d);
// But because of an overflow error, that code can
// print something unexpected, like: 1 2 3 1410065407
// instead of "failed" 
```

辅助字符串可用于检测输入错误，例如：

```
const char *text = "1 9999999999 text";
QString item1, item2, item3, item4;
QTextStream stream(text);
stream >> item1 >> item2 >> item3 >> item4;
int a, b, c, d;
bool conversionOk; // Indicates if the conversion was successful
a = item1.toInt(&conversionOk);
if (conversionOk == false)
    cerr << "Error 1." << endl;

b = item2.toInt(&conversionOk);
if (conversionOk == false)
    cerr << "Error 2." << endl;

c = item3.toInt(&conversionOk);
if (conversionOk == false)
    cerr << "Error 3." << endl;

d = item4.toInt(&conversionOk);
if (conversionOk == false)
    cerr << "Error 4." << endl; 
```

将打印“错误 2”、“错误 3”。和“错误 4”。

注意：cin、cout 和 cerr 也可以在那里定义为：

```
QTextStream cin(stdin, QIODevice::ReadOnly);
QTextStream cout(stdout, QIODevice::WriteOnly);
QTextStream cerr(stderr, QIODevice::WriteOnly); 
```

# asp.net - 在 BeginRequest 中停止请求到达控制器

> ID：13623427
> 
> 赞同：1
> 
> 时间：2012-11-29T10:14:33.340
> 
> 标签：asp.net, asp.net-mvc-3

我的一些请求如下所示：

```
http://mydomain.com/?q=value 
```

并在 BeginRequest 中处理。我不希望这些请求到达呈现主页的 Home.Index 控制器操作。

我尝试使用

```
HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

或者

```
Requst.End(); 
```

但问题在于它们切断了管道，完全阻止了其他代码的执行，特别是 NewRelic 完成的分析，它钩住了管道事件。

那么如何在处理 BeginRequest 中的请求后仅阻止控制器执行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:09:30.373

到目前为止我发现的最佳解决方案是添加一个全局动作过滤器

```
GlobalFilters.Filters.Add(new GlobalActionAbortAttribute ()); 
```

在 BeginRequest 我用标志标记当前上下文

```
Context.Items["SkipRequest"] = true; 
```

并在过滤器中过滤掉标志存在时的所有动作

```
public class GlobalActionAbortAttribute : System.Web.Mvc.ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if ((bool?)HttpContext.Current.Items["SkipRequest"] == true)
            filterContext.Result = new EmptyResult();
        else
            base.OnActionExecuting(filterContext);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:59:09.877

这里似乎更简单的选择是允许请求到达控制器并检测这种情况并简单地返回 Content() 而不是您的视图。

您还可以尝试设置一个自定义查询字符串路由约束来查找此参数，如果存在，则重定向到执行您的操作并返回 Content() 的控制器 - 您可以在此处查看查询字符串约束示例代码：[我的 MVC2 应用程序可以指定路由吗对查询字符串参数的限制？](https://stackoverflow.com/questions/4269046/can-my-mvc2-app-specify-route-constraints-on-query-string-parameters)

# symfony - Symfony2 - 在使用 CRUD 生成的表单中使用登录用户

> ID：13623428
> 
> 赞同：2
> 
> 时间：2012-11-29T10:14:35.610
> 
> 标签：symfony, symfony-2.1

我正在 Symfony2 中开发一个博客。我在教义中有两个实体：

*   第一个称为文章包含博客文章的列表：标题、文本、日期和用户，其中用户是帖子的作者。
*   第二个是用户，实际上是用户提供者。包含姓名、电子邮件
    等。

我使用以下命令生成 Article 实体的 CRUD：

```
php app/console doctrine:generate:crud 
```

我在控制器文件中得到以下 updateAction：

```
public function updateAction(Request $request, $id)
{
    $em = $this->getDoctrine()->getManager();        
    $entity = $em->getRepository('BlogBundle:Staticpage')->find($id);

    if (!$entity) {
        throw $this->createNotFoundException('Unable to find Staticpage entity.');
    }

    $deleteForm = $this->createDeleteForm($id);
    $editForm = $this->createForm(new EditStaticPageType(), $entity);
    $editForm->bind($request);

    if ($editForm->isValid()) {

        $em->persist($entity);            
        $em->flush();

        return $this->redirect($this->generateUrl('static_edit', array('id' => $id)));
    }

    return $this->render('BlogBundle:StaticsManagement:edit.html.twig', array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
    ));
} 
```

当我打开表单以创建新文章或编辑现有文章时，会显示一个包含我的 User 实体的用户的框，因此我可以选择其中一个，因为这两个表在实体中使用 ManyToOne 注释链接。但是，我不想选择任何用户。我想在 Articles 表中写入已经登录的用户名（实际上是 ID，因为它们都是链接的），并删除可用用户的列表。

我已经设置了安全环境并且它可以正常工作，所以只有在用户登录时才会始终执行此代码。我想我必须编辑 updateAction 方法，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:11:48.963

首先，如果你还在学习 Symfony，我建议不要使用任何 CRUD 生成器。最好在第一次手动做事，而不是使用某种帮手。无论如何，如果我理解您的问题，您应该将当前登录的用户设置为文章用户：

```
// Get logged user and set it as article user
$loggedUser = $this->get('security.context')->getToken()->getUser();
$entity->setUser($loggedUser);

// Create edit form
$editForm = $this->createForm(new EditStaticPageType(), $entity);

// Bind the request if POST
if('POST' === $request->getMethod()) {
    $editForm->bind($request);
}

// GET or invalid POST form
if('GET' === $request->getMethod() || !$editForm->isValid()) {
    return $this->render('BlogBundle:StaticsManagement:edit.html.twig', array(
        'entity'      => $entity,
        'edit_form'   => $editForm->createView(),
    ));
}

// POST with valid form so persist
$em->persist($entity);            
$em->flush(); 
```

然后`user`从文章编辑表单中删除该字段。

# c++ - 模式匹配 - 在第二张图像中查找参考对象 [OpenCV？]

> ID：13623431
> 
> 赞同：19
> 
> 时间：2012-11-29T10:14:40.663
> 
> 标签：c++, opencv, pattern-matching

我有一个包含参考对象（例如硬币）的参考黑白图像。对象由用户标记，即感兴趣区域。

现在我想分析其他图像并找到该对象或类似对象的位置和旋转。物体被任意放置在相机下方，但从不缩放，视角始终为 90 度。

我评估了一个完全符合我要求的商业图书馆：[Euresys EasyFind](http://www.euresys.com/Products/MachineVisionSoftware/EasyFind.asp "易查找")

您可以在下面找到手头任务的示例图像。当前的实现使用 OpenCV 的特征检测并且不能完美地工作。

模板：

![在此处输入图像描述](../Images/379f9f49f42af556b87c1a121e9ceffb.png)

找到相同硬币的匹配项：

![在此处输入图像描述](../Images/ddca0a0e6ee4a9826da87a441d1e8e4f.png)

比赛因硬币略有不同而失败：

![在此处输入图像描述](../Images/393c529ca41219458297d1e14397ef5a.png)

特征检测似乎是错误的方法。我需要以某种方式简化对象。但如果我这样做（Blur、Canny、CornerHarris）特征检测根本不起作用。

非常感谢任何有关可靠方法的建议。一个替代的图书馆建议也很好。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T09:50:29.247

既然你已经尝试了很多可能的技术，我会要求你通过以下链接（也许你可能已经通过了！！！）

1.  [所有特征检测器和描述符的比较](https://computer-vision-talks.com/2011-08-19-feature-descriptor-comparison-report/)
2.  [冲浪、怪胎和轻快的组合](https://computer-vision-talks.com/2012-08-18-a-battle-of-three-descriptors-surf-freak-and-brisk/)

您失败的第三张图像对比度低，与其余两张完美匹配有点棘手......所以我进行了对比度调整，我得到了以下与 Orb Feature 检测器和 Orb Descriptor Extractor 的匹配......我应用了对比度调整到特征检测之前的所有图像。

**图 1 和图 3**

![在此处输入图像描述](../Images/1bc4647c9f1fbf30cf177855fc2dded4.png)

**图 2 与图 3**

![在此处输入图像描述](../Images/6f4bbfdff7f69a457fe8f23618fd43f5.png)

**图像 1 和图像 2（此组合适用于所有检测器/提取器对）**

![在此处输入图像描述](../Images/73ec0a08fad9e472ff0131f79ba951eb.png)

对于匹配，我使用`BruteForceMatcher<Hamming> matcher` 了虽然点是局部的，但可以很好地猜到方向。需要使用一种以上的技术并首先进行一些圆形检测，以将特征检测限制在尽可能小的 ROI。加上检测点相对于圆心的方向很容易提供新的方向信息。参考第 1 个链接和第 2 个链接，您会注意到 SURF 和 BRIEF 对光线强度和模糊的变化具有很强的抵抗力。因此，您也可以尝试将 SURF 和 Brief 结合使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T19:36:26.217

在输入中应用关键点检测器而不执行任何类型的预处理是查找相关有趣匹配点的一种非常糟糕的方法。

鉴于您的图像，数学形态学提供了很好的工具来预处理它们，并希望在以后的步骤中获得更好的匹配。其中一种工具称为形态重建，其概括称为 Levelings，它将基于标记图像合并和扩展平坦区域。如您所见，您的图像非常有噪点，因为到处都有山谷（那些暗点），所以您想要抑制其中的大部分。实现 Levelings 一点也不难，但由于我不知道免费提供的工具（实际上有一个主要在法国开发的大型框架，我相信它包含它，但我不记得名字了），让我们坚持更标准的形态重建。我们也没有标记图像，但这很容易构建：用一些结构元素腐蚀你的图像并应用形态重建，这被一些作者称为测地线开口。这将抑制一些嘈杂的山谷。

此时您的图像可能适合与某些关键点检测器一起使用，但我建议将其二值化，因为您要匹配的内容与灰度色调无关。典型的自动方法是由 Otsu 给出的，但还有其他的方法，比如用于直方图熵最小化的 Kapur 方法。我没有使用 Otsu 只是因为它很常见，对于 Stackoverflow 的一些新奇，我选择了另一种方法：P（是的，非常糟糕的理由）。最后，二值化后，您可以继续处理您的图像。一个单一的形态关闭在这里可能就足够了，因为您想要移除一些剩余的噪声点（它们不一定与组件断开连接，因此现在移除组件可能是一个糟糕的选择）。

为了简短起见，这里是第一张图像的测地线开口和最终预处理（使用上面的点）：

![在此处输入图像描述](../Images/d43bf45e3c01e2d623b02e1bd7938186.png) ![在此处输入图像描述](../Images/8a573942b984a3ae8c1f07c9bbdd9b50.png)

这是其他两个图像的最终结果（应用完全相同的过程，没有不断修改或其他任何东西）：

![在此处输入图像描述](../Images/f1f0ea9ede5be6a4ef83fcc1a84745bd.png) ![在此处输入图像描述](../Images/0148a0eb0956f57bead52e92e0a0aa2e.png)

如果我现在继续使用典型的 SURF 方法匹配这些，我会得到大部分完美匹配，从而使另一个问题（定位一个相对于另一个）非常容易解决。我不包括我得到的匹配结果（除非有人想比较结果），因为我相信你现在应该使用 OpenCV 或任何其他正确的实现得到相同的结果。

如果重要的话，这里是 Mathematica 中实现上述预处理的单行代码：

```
g = Closing[Binarize[GeodesicOpening[f, DiskMatrix[5]], Method -> "Entropy"], 1] 
```

其中`f`是灰度输入图像，`g`是生成的二值图像。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T21:21:49.727

这个问题非常广泛，有很多方法取决于您想要实现的目标。您可以使用 Hough 变换来检测硬币，因为它是圆形的，尽管它可能会检测到许多圆形元素（所以这取决于您是否有其他类似的东西）。

更一般地说，您需要使用特征检测器（SURF、ORB、FAST、Shi-Tomassi），在包含硬币的参考框架和您正在寻找它的框架之间进行提取和匹配。然后，您可以使用 Homography 变换来确保您找到的点是相同的，因此您找到了您的硬币。

看看这个例子：

[Features2D + Homography 查找已知对象](http://docs.opencv.org/doc/tutorials/features2d/feature_homography/feature_homography.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-09T18:12:47.767

一般来说，您有以下步骤进行更改可能会影响系统性能：

1.  探测器及其配置
2.  描述符及其配置
3.  匹配器及其配置
4.  RANSAC 参数（或您正在使用的任何参数）

您可以尝试[MSER（最大稳定极值区域）](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html)作为检测器。众所周知，该检测器找不到像 SIFT/SURF 等其他检测器那样多的关键点。但它们非常稳定和独特。但我会尝试使用不同的描述符进行匹配。也许[FREAK (Fast Retina Keypoint)](http://docs.opencv.org/modules/features2d/doc/feature_detection_and_description.html#freak)。

应该使用 RANSAC 算法进行过滤，但您始终可以通过设置您喜欢的距离进行调整。如果 RANSAC 不能正常工作，则尝试切换默认阈值，直到它看起来更好。

您可以更改的另一件事是匹配器。FLANN 非常好，但只能近似结果，在高维空间中搜索时表现出色。但是，如果您不关心性能，请尝试使用欧几里得或马氏距离的 BruteForceMatcher。

**[EDIT-1]:** **现在我想给你额外的可以帮助你的建议 =) ** Kampel 等人。在他们的文章“基于图像的古钱币检索和识别”中描述了一些额外的方法来给古钱币一个形状描述符，以增强物品的描述特征。

另一个问题可能是 RANSAC，它是一种非常严格的消除异常值的方法。该方法`Mat findHomography(InputArray srcPoints, InputArray dstPoints, int method=0, double ransacReprojThreshold=3, OutputArray mask=noArray() )`具有附加参数（[单击此链接](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html?highlight=findhomograp#findhomography)）。您可以使用所有点、RANSAC 或最小中值稳健方法。

或者您尝试进行稳健的计算，什么距离可能是检索良好匹配的良好阈值。标准教程使用两倍的最小发现距离，这是一个开始但不是很稳健，因为它取决于*当前*匹配的距离。

标准 OpenCV 中不包含其他几个描述符/检测器。Lindbjerg 在他的论文“寻找最佳特征检测器-描述符组合”中描述了 MSER 与 DAISY-Descriptor 一起工作的发现。或者你可以试试[AGAST](http://www6.in.tum.de/Main/ResearchAgast)或[BRISK](http://www.asl.ethz.ch/people/lestefan/personal/BRISK)。一个真正的大缺点是它们都不包含在标准的 OpenCV 发行版中。有一些实现，但您必须集成它们，这可能意味着大量工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T04:20:51.853

我相信最适合您的是某种版本的蛮力搜索，类似于`cvMatchTemplate`. *所有*基于特征提取的搜索都对噪声非常敏感；除非您有先验理由知道某些类型的特征将在所有感兴趣的图像中突出显示（例如：硬币的轮廓圆/椭圆形），否则特征提取不太可能给您带来良好的性能。蛮力匹配的问题在于它对比例和旋转敏感。也许您可以查看有关无标度匹配和/或蛮力可能的标度和旋转的文献。对于您提供的示例图像，如果旋转几度并缩放几个百分比，它实际上会很好地匹配自己；你“只”需要几百个电话`cvMatchTemplate`找到一个旋转的、缩放的版本。

# android - 当我尝试从数据库表 android 中获取不同的值时出现致命异常

> ID：13623436
> 
> 赞同：1
> 
> 时间：2012-11-29T10:14:53.820
> 
> 标签：android

我在数据库中有一个名为“EMR_PT_REFERNCE”的表，其中包含患者参考详细信息……表中有一个名为“EPR_OUT_HOSPITAL”的列，其中包含外部医院的名称……我试图获取“EPR_OUT_HOSPITAL”的不同值' 从表中...如果所有行都填满了值，那么它工作正常.. 但是如果任何行为空，那么它会触发异常并且我的应用程序被强制关闭...请帮助

------------------------------------这是代码---------- --------------------------

```
 // to load out hospital/ clinic data into spinner
        private void loadOutHospitalListSpinner() {
            // TODO Auto-generated method stub

            Log.v("this is inside load out hospital list spinner------------>","");

            try {

                if (getFirstRun()) {
                    sampleDB = dbAdapter.getDatabase();
                    setRunned();
                } else {
                    sampleDB = dbAdapter.getWritableDatabase();
                }
                Cursor c1 = sampleDB.rawQuery("select DISTINCT EPR_OUT_HOSPITAL from EMR_PT_REFERNCE",null);

                if (c1 != null && c1.getCount() != 0) {

                    hospitalNameListArray.clear();

                    if (c1.moveToFirst()) {

                        do {
                            hospitalNameListArray.add(c1.getString(c1.getColumnIndex("EPR_OUT_HOSPITAL")));

                        } while (c1.moveToNext());
                    }
                }
                c1.close();

                ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item, hospitalNameListArray);

                // dropdownlist
                dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

                spnOutHospitalList.setAdapter(dataAdapter);

            } catch (Exception e) {
                // TODO: handle exception
                System.out.println("CAT LIST ERROR IS: " + e.getMessage());
            }

        }

-----------------------------------here is the Logcat Error--------------------------------

11-29 15:26:38.572: D/AndroidRuntime(18519): Shutting down VM 
11-29 15:26:38.572: W/dalvikvm(18519): threadid=1: thread exiting with uncaught exception (group=0x409c01f8) 
11-29 15:26:38.582: E/AndroidRuntime(18519): FATAL EXCEPTION: main 
11-29 15:26:38.582: E/AndroidRuntime(18519): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.stpl.emr.login/com.stpl.emr.patientlist.PatientList}: java.lang.NullPointerException 
```

11-29 15:26:38.582: E/AndroidRuntime(18519): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 android. app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 android.app.ActivityThread.access$600(ActivityThread.java:123) 11-29 15:26 :38.582: E/AndroidRuntime(18519): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 android.os.Handler。 dispatchMessage(Handler.java:99) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 android.os.Looper.loop(Looper.java:137) 11-29 15:26:38.582: E/ AndroidRuntime(18519)：在 android.app.ActivityThread.main(ActivityThread.java:4424) 11-29 15:26:38.582：E/AndroidRuntime(18519)：在 java.lang。reflect.Method.invokeNative(Native Method) 11-29 15:26:38.582: E/AndroidRuntime(18519): at java.lang.reflect.Method.invoke(Method.java:511) 11-29 15:26:38.582 : E/AndroidRuntime(18519): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 com.android。 internal.os.ZygoteInit.main(ZygoteInit.java:551) 11-29 15:26:38.582: E/AndroidRuntime(18519): at dalvik.system.NativeStart.main(Native Method) 11-29 15:26:38.582 : E/AndroidRuntime(18519): 由: java.lang.NullPointerException 11-29 15:26:38.582: E/AndroidRuntime(18519): at android.content.ContextWrapper.getPackageName(ContextWrapper.java:127) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 com.stpl.emr.database.DataBaseHelper.getDatabasePath(DataBaseHelper.java:241) 11-29 15:26:38.582:E/AndroidRuntime(18519): 在 com.stpl.emr.database.DataBaseHelper.checkDatabase(DataBaseHelper.java:204) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 com.stpl.emr.database .DataBaseHelper.initialize(DataBaseHelper.java:61) 11-29 15:26:38.582: E/AndroidRuntime(18519): at com.stpl.emr.database.DataBaseHelper.getInstance(DataBaseHelper.java:93) 11-29 15 :26:38.582: E/AndroidRuntime(18519): 在 com.stpl.emr.patientlist.PatientList.(PatientList.java:45) 11-29 15:26:38.582: E/AndroidRuntime(18519): 在 java.lang .Class.newInstanceImpl(Native Method) 11-29 15:26:38.582: E/AndroidRuntime(18519): at java.lang.Class.newInstance(Class.java:1319) 11-29 15:26:38.582: E/ AndroidRuntime(18519)：在 android.app.Instrumentation.newActivity(Instrumentation.java:1023) 11-29 15:26:38.582：E/AndroidRuntime(18519)：在 android.app。ActivityThread.performLaunchActivity(ActivityThread.java:1871) 11-29 15:26:38.582: E/AndroidRuntime(18519): ... 11 更多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:23:22.463

试试看：

改变

```
 do {
     hospitalNameListArray.add(c1.getString(c1.getColumnIndex("EPR_OUT_HOSPITAL")));
  } while (c1.moveToNext());
} 
```

到

```
 do {
     if (null!=c1.getString(c1.getColumnIndex("EPR_OUT_HOSPITAL")))
         hospitalNameListArray.add(c1.getString(c1.getColumnIndex("EPR_OUT_HOSPITAL")));
  } while (c1.moveToNext());
} 
```

# c# - 将 HQL 与标准混合

> ID：13623438
> 
> 赞同：2
> 
> 时间：2012-11-29T10:15:04.900
> 
> 标签：c#, nhibernate

据我所知，有很多方法可以在 nhibernate 中访问数据；HQL、Criteria、linq to nhibernate 和 raw sql。

访问数据源时是否可以在 nhibernate 中混合查询技术。例如，将 where 子句作为（分离的）条件，将 select 或 join 作为 HQL？或以上任何其他组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:46:04.587

当前的首选技术是`Linq`和`QueryOver`，它们在内部分别映射到`HQL`和`Criteria`。您可以在项目中使用您觉得更重要的那个，而没有任何特别的缺点，但是当然您不能将它们混合在一个语句中，即您不能将 QueryOver 附加到 Linq 语句，反之亦然。

# android - 无法用前置摄像头扫描条码

> ID：13623440
> 
> 赞同：2
> 
> 时间：2012-11-29T10:15:10.170
> 
> 标签：android, camera, barcode, zbar

我们正在使用 Zbar 库扫描码类型 128 条码，该库适用于 android 设备中的后端摄像头，并且还提供了成功的扫描结果。但是当我们在 android 设备中为前置摄像头使用相同的库时，它会为扫描提供垃圾结果，有时它根本不扫描。

请为此问题提供一些解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:21:27.123

这背后有很多原因，前置摄像头的 MP 非常低，并且在很多情况下它们无法自动对焦。这就是它无法正确扫描条形码的原因。

您可以参考： [链接](https://stackoverflow.com/questions/7901299/zxing-barcode-camera-options)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:24:52.820

因为前置摄像头总是低分辨率。因此它可能无法正确读取条形码。

# javascript - Dan Grossman 的 Bootstrap 日期选择器 - 回调

> ID：13623441
> 
> 赞同：3
> 
> 时间：2012-11-29T10:15:16.187
> 
> 标签：javascript, jquery, twitter-bootstrap, datepicker

我正在使用日期选择器[https://github.com/dangrossman/bootstrap-daterangepicker](https://github.com/dangrossman/bootstrap-daterangepicker)通过 ajax 回调过滤统计信息。

我在页面上有额外的过滤器选项，我还需要*它们*来触发日期选择器的更改回调吗？

有什么想法可以从其他下拉菜单触发回调或抽象回调函数，在这种情况下，我需要从 datepicker 传递开始 + 结束日期作为参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:03:44.967

我不高兴这是最好的解决方案，但我为 start 和 end 设置了 2 个全局变量，然后用回调更新它们，这样我就可以调用 ajax 刷新并从任何地方传递日期。

```
var startDate = Date.today();
var endDate = Date.today();

function refresh_stats(start, end)
{
    // Do ajax refresh
}

$('#reportrange').daterangepicker(
        {
                ranges: {
                        'Today': ['today', 'today'],
                        'Yesterday': ['yesterday', 'yesterday'],
                        'Last 7 Days': [Date.today().add({ days: -6 }), 'today'],
                        'Last 30 Days': [Date.today().add({ days: -29 }), 'today'],
                        'This Month': [Date.today().moveToFirstDayOfMonth(), Date.today().moveToLastDayOfMonth()],
                        'Last Month': [Date.today().moveToFirstDayOfMonth().add({ months: -1 }), Date.today().moveToFirstDayOfMonth().add({ days: -1 })]
                }
        }, 
        function(start, end)
        {
                startDate = start;
                endDate = end;
                refresh_stats(start, end);
        }
);

// Then can call this whenever
refresh_stats(startDate, endDate); 
```

# javascript - javascript中的输入字段样式属性在chrome中工作正常，在firefox中不起作用

> ID：13623442
> 
> 赞同：2
> 
> 时间：2012-11-29T10:15:19.073
> 
> 标签：javascript

在我的文件上传字段页面中，我在 javascript 中设置了属性样式，如下所示

```
choicefile.setAttribute("style", "width: 86px;
                                  position: absolute;
                                  margin-left: 83px;  //This pixels shows the upload field in a correct place
                                  margin-top: 90px;  // This pixels shows the upload field in a correct place
                                  z-index: 1;
                                  opacity: 0;"); 
```

但在 Firefox 中，它显示文件上传在错误的位置。在 Firefox 中，如果我们将这两个属性更改为

```
choicefile.setAttribute("style", "width: 86px;
                                  position: absolute;
                                  margin-left: 35px;  //In Firefox it is the correct pixels
                                  margin-top: 150px;  //In Firefox it is the correct pixels
                                  z-index: 1;
                                  opacity: 0;"); 
```

我怎么解决这个问题。任何人都可以帮助解决这个问题。提前致谢

我的网址是

[http://mytest.php?id=2&mview=69](http://mytest.php?id=2&mview=69)

单击添加新条目后，文件上传器显示在正确的位置，但在 Firefox 中显示在错误的位置。

```
<form name="choiceadd" action="" method="post" enctype="multipart/form-data" onsubmit="return validationaddchoice();">
<span id="addnewcontain">
</span>
<input type="hidden" name="choicecount" value="0" />
<div class="four" style='margin-top:40px;'>
<input type="button" value="Add New Entry" onclick="addnewchoice(document.forms['choiceadd']['choicecount'].value)" >
</div>
<div class="five">
<input type="submit" name="choiceaddsubmit" class="choiceaddsubmit" />
</div>
</form> 
```

以上是主页面中的表格。当点击这个按钮时，函数 addchoice 被调用，它包括上面提到的choicefile 属性样式

功能是

```
function addnewchoice(val)
{choicefile.setAttribute("style", "width: 86px; position: absolute; margin-left: 83px; margin-top: 90px; z-index: 1; opacity: 0;");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:22:09.233

而不是像这样设置样式，您可以像下面那样进行完全跨浏览器兼容性。分配每个样式属性，如下所示

而不是设置样式

```
function addnewchoice(val)
{   
   choicefile.setAttribute("style", "width: 86px; position: absolute; margin-left: 83px; margin-top: 90px; z-index: 1; opacity: 0;");
} 
```

您可以这样设置以实现跨浏览器兼容性

```
function addnewchoice(val)
    choicefile.style.width="86px";
    choicefile.style.position="absolute";
    ... so on..
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:23:48.847

这个问题的完美答案是

```
<style>
   @-moz-document url-prefix() {
                       .testview{
                      width: 86px;
                      position: absolute;
                      margin-left: 35px;
                      margin-top: 90px;
                      z-index: 1;
                      opacity: 0;
                    }
                 }
</style> 
```

如果浏览器是 mozilla firefox，那么带有相应属性的上述样式将应用于页面。如果浏览器是 chrome 意味着将应用默认样式

# jsf - 如何从 HttpSessionListener 访问 JSF 应用程序范围的托管 bean？

> ID：13623443
> 
> 赞同：5
> 
> 时间：2012-11-29T10:15:23.050
> 
> 标签：jsf

我正在运行一个**JSF**应用程序并声明了一些应用程序范围的支持 bean（在**common-beans.xml**中或使用 `@ManagedBean` and `@ApplicationScoped` 注释）。

如何从内部访问这些 bean `javax.servlet.http.HttpSessionListener` ？

我知道 `FacesContext` 会话侦听器中不可用，因此使用：

```
public class AnHTTPSessionListener implements HttpSessionListener {
    ...
    public void sessionDestroyed(HttpSessionEvent e) {
        AppBean appBean = (AppBean) FacesContext.getCurrentInstance()
                                                .getExternalContext()
                                                .getApplicationMap().get("appBean")
       ...
    } 
```

...按预期抛出了NPE。

### 更新：

*（在 BalusC 回答之前）*

我最终做的是使用**env-entry**元素（而不是使用应用程序范围的 bean）在**web.xml中声明我需要访问的应用程序范围的信息，然后使用以下方法检索该信息：**

 **```
 InitialContext ic = new InitialContext();
   Context env = (Context) ic.lookup("java:comp/env");
   appName = (String) env.lookup("appBeanValue"); 
```

这不是我的想法，但这是一种解决方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T11:36:07.347

JSF 将应用程序范围的托管 bean 存储为[`ServletContext`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html).

所以，这应该这样做：

```
public void sessionDestroyed(HttpSessionEvent e) {
    AppBean appBean = (AppBean) e.getSession().getServletContext().getAttribute("appBean");
    // ...
} 
```

### 也可以看看：

*   [在任何 Servlet 相关类中按名称获取 JSF 托管 bean](https://stackoverflow.com/questions/2633112/jsf-get-managed-bean-by-name/2633733#2633733)
*   [从 Session Listener 访问和修改 Application-Scoped Managed Bean 的属性](https://stackoverflow.com/questions/10603357/access-and-modify-propertyies-of-an-application-scoped-managed-bean-from-sessi/10605191#10605191)**

# java - Future.cancel() 方法不起作用

> ID：13623445
> 
> 赞同：5
> 
> 时间：2012-11-29T10:15:29.630
> 
> 标签：java, concurrency, interrupt, interrupt-handling, interrupted-exception

我创建的代码创建了一个 Callable 实例并使用 ExecutorService 创建了一个新线程。如果线程未完成执行，我想在一定时间后终止该线程。在浏览了 jdk 文档后，我意识到 Future.cancel() 方法可以用来停止线程的执行，但令我沮丧的是它不起作用。当然，future.get() 方法会在规定的时间（在我的情况下是 2 秒）之后向线程发送中断，甚至线程正在接收这个中断，但是只有在线程完成执行后才会发生这种中断完全地。但我想在 2 秒后杀死线程。

谁能帮助我如何实现这一目标。

测试类代码：

```
====================================

public class TestExecService {

      public static void main(String[] args) {

          //checkFixedThreadPool();
          checkCallablePool();

          }

      private static void checkCallablePool()
      {
          PrintCallableTask task1 = new PrintCallableTask("thread1");

          ExecutorService threadExecutor = Executors.newFixedThreadPool(1);
          Future<String> future = threadExecutor.submit(task1);

          try {
                System.out.println("Started..");
                System.out.println("Return VAL from thread ===>>>>>" + future.get(2, TimeUnit.SECONDS));
                System.out.println("Finished!");
            }
          catch (InterruptedException e) 
          {
            System.out.println("Thread got Interrupted Exception ==============================>>>>>>>>>>>>>>>>>>>>>>>>>");
            //e.printStackTrace();
          }
          catch (ExecutionException e) 
          {
            System.out.println("Thread got Execution Exception ==============================>>>>>>>>>>>>>>>>>>>>>>>>>");
          }
          catch (TimeoutException e)
          {
            System.out.println("Thread got TimedOut Exception ==============================>>>>>>>>>>>>>>>>>>>>>>>>>");
            future.cancel(true);
          }

          threadExecutor.shutdownNow();

      }
} 
```

可调用类代码：

```
===================================================================
package com.test;

import java.util.concurrent.Callable;

public class PrintCallableTask implements Callable<String> {

      private int sleepTime;
      private String threadName;

    public PrintCallableTask(String name)
    {
        threadName = name;
        sleepTime = 100000;     
    }

    @Override
    public String call() throws Exception {

        try {
              System.out.printf("%s going to sleep for %d milliseconds.\n", threadName, sleepTime);
              int i = 0;

              while (i < 100000)
              {
                  System.out.println(i++);
              }

              Thread.sleep(sleepTime); // put thread to sleep
              System.out.printf("%s is in middle of execution \n", threadName);

            } catch (InterruptedException exception) {
              exception.printStackTrace();
            }

            System.out.printf("%s done sleeping\n", threadName);

            return "success";
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T23:17:51.563

你的代码做的一切都是正确的。`Thread.isInterrupted`唯一的问题是您没有检查`while`循环。线程获取消息的唯一方法是获取`Thread.sleep`将立即抛出的阻塞调用`InterruptedException`。如果循环很长，则可能需要一些时间。这正是您的代码有点反应迟钝的原因。

例如，每 10,000 次迭代检查一次中断状态：

```
while (i < 100000) {

    if (i % 10000 == 0 && Thread.currentThread().isInterrupted())
        return "fail";

    System.out.println(i++);
} 
```

`InterruptedException`适用于冗长的阻塞方法。`Thread.isInterrupted`是为一切。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T13:36:21.217

`cancel()`只是要求`interrupt()`已经执行的线程。

[http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)：

> 中断是对线程的指示，它应该停止正在做的事情并做其他事情。由程序员决定线程如何响应中断，但线程终止是很常见的。

中断的线程只会抛出[InterruptedException](http://docs.oracle.com/javase/6/docs/api/java/lang/InterruptedException.html)

> 当一个线程正在等待、休眠或以其他方式暂停很长时间并且另一个线程使用 Thread 类中的 interrupt() 方法中断它时。

因此，您需要在执行线程时明确地使作业代码意识到可能的中断。

另请参阅[如果我不是，谁在调用 Java 线程的 interrupt() 方法？](https://stackoverflow.com/questions/2126997/who-is-calling-the-java-thread-interrupt-method-if-im-not).

另请参阅[如何取消 Java 8 可完成的未来？](https://stackoverflow.com/questions/23320407/how-to-cancel-java-8-completable-future)因为只有 Java 8 才成熟的 Java 期货。

# vb.net - VS Express 2012 for Desktop 不支持 32 位兼容应用

> ID：13623446
> 
> 赞同：2
> 
> 时间：2012-11-29T10:15:31.967
> 
> 标签：vb.net, visual-studio-2012

最近使用 VS Express 2012 for Desktop，我在 64 位机器上工作，而在 VS 2012 中制作的 vb.net 应用程序不能在 32 位机器上运行！错误消息“不是有效的 32 位应用程序”

在 VS Express 2010 中它运行良好，但在 VS 2012 中，即使我选择了 Any CPU、x86 配置，发布的应用程序也无法在 32 位机器上运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:20:28.470

在我看来，您可能只是在更改 Debug 配置的平台。在设置页面的编译选项卡上有一个配置下拉菜单，将其更改为“所有配置”，然后将平台更改为 x86。保存 > 重新发布。

# rabbitmq - RabbitMQ STOMP 有什么方法可以停止消费消息，直到之前的消息被确认？

> ID：13623448
> 
> 赞同：6
> 
> 时间：2012-11-29T10:15:35.117
> 
> 标签：rabbitmq, stomp

我在我的项目中使用 RabbitMQ Web-STOMP，它对我来说非常好，但它有一个问题。当消费者订阅队列时，它会立即从队列中获取所有消息。就我而言，消息任务可能需要很长时间，并且只有在上一条消息完成后，消费者才需要从队列中获取下一条消息。

一切正常，当消费者订阅后开始发布时，但当队列中已有消息时，第一个订阅的消费者将获得所有消息，其他人将保持免费。是否有类似 node-amqp queue.shift() 方法仅在上一条消息被确认时才使用下一条消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:14:25.930

（您使用的是哪个客户端？）

您的问题的答案是`basic_qos`，请参阅[amqp 参考](http://www.rabbitmq.com/amqp-0-9-1-quickref.html)并搜索`basic.qos`

在 c# API 中，您将执行以下操作：

```
int prefetch = 10;

IModel channel = connection.CreateModel(); //where connection is IConnection
channel.basic_qos(0, prefetch, false); 
```

预取大小可用于告诉rabbitmq 服务器有多少消息要发送给消费者，直到它们被确认。如果设置了 NO-ACK 选项，则忽略预取大小。

请记住，设置此值可能会对性能产生潜在影响，请看一下[这个](http://www.rabbitmq.com/blog/2012/04/25/rabbitmq-performance-measurements-part-2/)。

# c# - 调试托管在本地 IIS Web 服务器上的 ASP.NET MVC3 应用程序

> ID：13623450
> 
> 赞同：3
> 
> 时间：2012-11-29T10:15:38.050
> 
> 标签：c#, asp.net, asp.net-mvc, iis, azure

我已经设法使用本地 IIS Web 服务器来托管我的 MVC3 应用程序，并且我可以*从托管它的机器上调试它和所有内容。*- 但是，当我从另一台机器（我的 Mac，它在 Parallels VM 中运行我的 Windows）发送请求时，我得到了预期的结果，但**调试器不会在我的断点处停止！**

我尝试`Debugger.Break();`在我的操作中添加一个，这会使 w3wp.exe 崩溃。

总结一下：**本地请求正在运行，并且可以调试。外部请求正在工作，但无法调试。**

在我的项目属性中，我设置了`Use Local IIS Webserver`, `Use IIS Express`is **unchecked**。

我正在使用 Visual Studio 2012 Professional。该项目基于 Azure SDK，附加进程为 WaIISHost.exe。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T11:59:35.130

问题在于，由于我已将 IIS 服务器设置为在端口 83 上提供服务，而在本地我将在端口 81 上访问，因此调试器不会监视这些请求。

要解决这个问题（或者，通常是在 Cassini Web 服务器上进行远程调试），请下载一个名为[rinetd](http://www.boutell.com/rinetd/)的工具，这是一个非常简单的流量重定向器守护程序，并在您将其解压缩到的文件夹中创建一个 config.cfg。格式为`<source ip> <source port> <dest. ip> <dest port>`. 所以，在我的 Mac 上，我在 Safari 中访问这个地址： 192.168.1.23:8080/Controller/Action ，然后重定向到 localhost:81/Controller/Action ，就好像它是一个本地请求一样！这是示例 config.cfg：

```
192.168.1.23 8080 127.0.0.1 81 
```

或者，您可以使用您的 PC 名称，以避免在 DHCP 为您提供新地址时必须分配静态 IP 或更改配置：

```
Jeff-PC 8080 127.0.0.1 81 
```

然后，打开命令提示符，`cd`进入 rinetd 文件夹，然后运行`rinetd.exe -c config.cfg`​​.

奇迹般有效。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T10:27:12.440

我可以看到远程请求是由 IIS 提供的，但本地请求是通过“Cassini”服务器或 Visual Studio 的服务器提供的。

确保您使用 IIS 来调试代码，您可以将 Visual Studio 附加到 w3wp.exe 以通过 IIS 进行调试。你应该以管理员身份启动 Visual Studio。

要将 Visual Studio 附加到 w3wp.exe（IIS 进程）：在 Visual Studio 中，从调试菜单中选择“附加到进程...”：

*   选中“显示所有用户的进程”。

*   选中“在所有会话中显示进程”。

*   通过按选择按钮从（附加到）中选择“托管（v....）代码”。

*   按“刷新”按钮

应该显示 w3wp.exe！

![在此处输入图像描述](../Images/56b34dc218763c5d444ff2e827723574.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T10:21:38.800

启动 Visual Studio 时，以管理员身份启动（右键单击并“以管理员身份运行”），然后加载项目的解决方案。

然后从调试菜单中选择“附加到进程...”并确保选中“显示所有用户的进程”和“显示所有会话中的进程”复选框，在“可用进程”面板中，您应该能够滚动浏览并找到与您尝试调试的 IIS 应用程序池相关的进程（通常称为 w3wp.exe）。

附加到此过程并在浏览器中刷新页面，这应该允许您进行调试。

非常感谢。

本杰明

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T10:32:04.247

您可能附加了错误的进程。

尝试执行以下操作以确认您正在调试错误的进程。

*   从本地计算机以调试模式启动 Web 应用程序（按 F5）。
*   继续调试->附加过程

现在，如果您向下滚动，您应该会看到 VS 附加了哪个进程来调试您的应用程序（它应该以不同的颜色显示 - 浅灰色）。如果进程不是，`w3wp.exe`则意味着您没有使用 IIS 来托管您的应用程序，并且当您从另一台机器发出请求时，您可能正在调试错误的进程

# alignment - 如何水平对齐复选框和 ImageButton？

> ID：13623453
> 
> 赞同：1
> 
> 时间：2012-11-29T10:15:44.103
> 
> 标签：alignment

如何水平对齐复选框和 ImageButton？我已经尝试过 TextView 和 EditText 之间的 android:layout_alignBaseline 没问题，但是在 checkBox 和 ImageButton 之间，android:layout_alignBaseline 属性似乎不像以下 xml 布局那样工作：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/RelativeLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/TextView01"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="97dp"
        android:layout_marginTop="133dp"
        android:text="@string/termsheading"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/TextView06"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/TextView01"
        android:layout_below="@+id/TextView01"
        android:layout_marginTop="67dp"
        android:text="@string/telephone"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <EditText
        android:id="@+id/EditText04"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/TextView06"
        android:layout_alignBottom="@+id/TextView06"
        android:layout_marginLeft="96dp"
        android:layout_toRightOf="@+id/TextView06"
        android:ems="10"
        android:inputType="textPersonName" >

        <requestFocus />
    </EditText>

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/TextView06"
        android:layout_below="@+id/EditText04"
        android:layout_marginTop="55dp"
        android:text="@string/terms" />

    <ImageButton
        android:id="@+id/imageButton1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/checkBox1"
        android:layout_alignBottom="@+id/checkBox1"
        android:layout_marginLeft="33dp"
        android:layout_toRightOf="@+id/checkBox1"
        android:src="@drawable/player_controls_bg" />

</RelativeLayout> 
```

# java - Java API 用于在任何一年的印度教日历中的假期日期

> ID：13623454
> 
> 赞同：14
> 
> 时间：2012-11-29T10:15:46.047
> 
> 标签：java, calendar, hindi

是否有任何用于 Swing 的 Java API 可以帮助我在任何一年的印度教日历中给出所有假期日期？

要求：

*   API 应该是开源的或免费的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T14:11:04.820

到目前为止，最简单的方法是下载包含所有印度教假期的公共日历。你肯定可以在谷歌上找到这个。将日历导出为 iCalendar 文件。

然后，使用 iCal4j 解析此文件并恢复所需的所有日期。 [http://ical4j.sourceforge.net/introduction.html](http://ical4j.sourceforge.net/introduction.html)

当然，您不需要在 3000 年之前实施所有用于确定印地语假期的数学规则吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:01:18.367

目前没有直接的方法来计算印度教假期。您可以使用[JollyDay](http://jollyday.sourceforge.net/)。

它允许您在名为“Holidays_[country].xml”的 XML 配置文件中配置假期，其中包含确定一年/国家/地区假期的必要信息。

你可以实现如下

```
URL url = new URL("file:some/path/Holidays_India.xml");

HolidayManager m = HolidayManager.getInstance(url);
Set<Holiday> holidays = m.getHolidays(2012, "in"); 
```

有关详细信息，请参阅API[使用。](http://jollyday.sourceforge.net/usage.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T14:22:38.720

似乎印度教没有什么开箱即用的东西。

但是，[Jollyday](http://jollyday.sourceforge.net/index.html)可能会有所帮助。他们不支持开箱即用的印度教，但是如果您获得带有日期的文件，则可以使用它。

# php - Preg 替换为未按预期工作的模式数组

> ID：13623462
> 
> 赞同：1
> 
> 时间：2012-11-29T10:16:22.867
> 
> 标签：php, regex

为什么这段代码

```
 $my_replacements = array("my dog", "doga");
 $my_string = "doga my dog test";
 $my_patterns = array_map(function($my_text) { return "/(^|[\n\r\f\t \.\,])" . trim($my_text) . "([\n\r\f\t \.\,]|$)/iu"; }, $my_replacements);
 $replaced_string = preg_replace($my_patterns, '', $my_string);
 echo $replaced_string; 
```

返回`dogatest`而不是`test`？

但如果 my_string 更改为`"my dog doga test"`，它会正确替换 my_replacements 中的两个元素？

我想要完成的是，给定一个字符串，找到 $my_replacements 中的所有字符串并将它们从字符串中删除。考虑到 /u 修饰符和 /i 修饰符或 preg_replace，因为子字符串可能是大写的，并且必须以任何一种方式将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:23:30.687

因为您的替换已转换为以下正则表达式：

```
/(^|[\n\r\f\t \.\,])my dog([\n\r\f\t \.\,]|$)/iu
/(^|[\n\r\f\t \.\,])doga([\n\r\f\t \.\,]|$)/iu 
```

在将第一个正则表达式应用于源字符串后`"my dog doga test"`- 它会切断`dog doga` **它周围的空格**。所以你得到`dogatest`.

在那之后，第二个正则表达式不能匹配任何东西，因为它希望`doga`被字符串的开头或结尾、空格或标点符号包围。但在您的情况下，它位于字符串 ( `true`) 的开头，但 ( ) 之后没有空格、标点符号或字符串结尾`false`。

这就是为什么第二个正则表达式不修改字符串并且您得到`dogatest`最终结果的原因。

没有正则表达式的简单解决方案：

```
 $my_replacements = array("my dog", "doga");
 $my_string = "doga my dog test";
 $replaced_string = str_replace($my_replacements, '', $my_string);
 echo $replaced_string; 
```

那种[@Asad](https://stackoverflow.com/users/1726343/asad)创建了脚本的键盘演示：http: [//codepad.org/ywbZR1i8](http://codepad.org/ywbZR1i8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:37:02.213

为什么不使用 str_replace 有什么原因吗？如果是，您可以使用
`$my_replacements = array("doga", "my dog");`
代替
`$my_replacements = array("my dog", "doga");`

原因：在您的字符串中将“doga”替换为“”后，这将变为“dogatest”。因此，不存在带空格的 doga（如您定义的常规 exp）。您也可以用“”代替“”进行替换，
`$replaced_string = preg_replace($my_patterns, ' ', $my_string);`
然后用一个空格修剪和替换所有多个空格（简单的递归替换）。

# javascript - 如何更改 x3dom 中 3d 文本的斜角大小？

> ID：13623471
> 
> 赞同：9
> 
> 时间：2012-11-29T10:17:04.500
> 
> 标签：javascript, webgl, x3dom

如何更改 x3dom 中 3d 文本的斜角大小？现在我有这样的代码

```
<x3d width="392px" height="392px">
<scene>
  <viewpoint position='0 0 11'></viewpoint>
  <background skyColor='0.5 0.5 0.5'></background>
  <shape>
    <appearance>
      <material ambientIntensity='0.0933' diffuseColor='0.32 0.54 0.26' shininess='0.51' specularColor='0.46 0.46 0.46'></material>
    </appearance>
    <text string='Mono bolditalic 32px' solid='false'>
        <fontstyle family="TYPEWRITER" style="BOLDITALIC" size="0.8"></fontstyle>
    </text>
  </shape>
  <transform translation='0 0 -2'>
    <shape>
        <appearance> 
            <material diffuseColor="1 0 0" specularColor="0.5 0.5 0.5"></material>
        </appearance>
        <box></box>
    </shape>
  </transform>
</scene>
</x3d> 
```

有没有可用的示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T16:26:07.637

看起来没有任何单独使用 X3Dom 斜切文本的直接示例。[我知道， three.js](https://github.com/mrdoob/three.js/)似乎是唯一的 webgl 解决方案，您可以在其中轻松更改 3D 文本的斜角。您似乎已经根据您的最新问题找到了这一点。

以下是three.js 的其他一些好的资源/示例。

*   很好的介绍。幻灯片： http: [//fhtr.org/BasicsOfThreeJS](http://fhtr.org/BasicsOfThreeJS)
*   [http://stemkoski.github.com/Three.js/](http://stemkoski.github.com/Three.js/)
*   [http://mrdoob.github.com/three.js/examples/canvas_geometry_text.html](http://mrdoob.github.com/three.js/examples/canvas_geometry_text.html)
*   [https://github.com/mrdoob/three.js/tree/master/examples](https://github.com/mrdoob/three.js/tree/master/examples)

此外，这里有一些 JSFiddle 示例。这些将更容易阅读/体验。

*   [http://jsfiddle.net/theo/VsWb9/](http://jsfiddle.net/theo/VsWb9/)
*   [http://jsfiddle.net/GKCx6/139/](http://jsfiddle.net/GKCx6/139/)

* * *

我在获取 JSFiddle 设置时遇到问题。[一位程序员同事遇到了类似的问题](http://japhr.blogspot.com/2012/09/threejs-textgeometry-and-missing-font.html)，但在他的帮助下，我设置了一个有用的示例。这将使您有机会尝试斜角功能。

**斜面示例：http:** [//jsfiddle.net/VsWb9/674/](http://jsfiddle.net/VsWb9/674/)

**JavaScript**

```
// This is where stuff in our game will happen:
var scene = new THREE.Scene();

// This is what sees the stuff:
var aspect_ratio = window.innerWidth / window.innerHeight;
var camera = new THREE.PerspectiveCamera(45, aspect_ratio, 1, 100000);
camera.position.z = 800;
camera.position.x = 350;

scene.add(camera);

// This will draw what the camera sees onto the screen:
var renderer = new THREE.WebGLRenderer();

// var renderer = new THREE.CanvasRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

// ******** START CODING ON THE NEXT LINE ********
var shape = new THREE.TextGeometry("Game Over", 
                                   {font: 'helvetiker',
                                    bevelThickness: '3',
                                    bevelSize: '3',
                                    bevelSegments: '4',
                                    bevelEnabled: 'true'});
var wrapper = new THREE.MeshNormalMaterial({color: 0x00ff00});
var words = new THREE.Mesh(shape, wrapper);
scene.add(words);

// Now, show what the camera sees on the screen:
renderer.render(scene, camera); 
```

**附加 JS**

```
<script src="http://gamingJS.com/Three.js"></script>
<script src="http://gamingJS.com/ChromeFixes.js"></script>
<script src="http://mrdoob.github.com/three.js/examples/fonts/helvetiker_regular.typeface.js"></script> 
```

# youtube-api - YouTube 无铬播放器未加载

> ID：13623476
> 
> 赞同：2
> 
> 时间：2012-11-29T10:17:25.610
> 
> 标签：youtube-api

今天突然 YouTube 无铬播放器停止工作。我不能再加载它了，“onError”事件在播放器加载后立即触发。Event.data 应该包含错误代码，但不再有数据。事件来自的堆栈是：

```
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at com.google.youtube.application::SwfProxy/onLoaderError() 
```

任何人都可以帮忙吗？

# windows - 在windows上安装svn服务器

> ID：13623477
> 
> 赞同：3
> 
> 时间：2012-11-29T10:17:26.297
> 
> 标签：windows, svn

我想在 Windows 7 64 位机器上安装一个 SVN 服务器（只为我）。

我使用了 Slik SVN 并设置了一个服务：

```
sc create svnserver binpath= "C:\Program Files\SlikSvn\bin\svnserve.exe --service -r H:\svn\repository" displayname= "Subversion" depend= Tcpip start= auto 
```

这在服务列表中列出，但无法启动：

```
C:\Windows\system32>sc create svnserver binpath= "C:\Program Files\SlikSvn\bin\s
vnserve.exe --service -r H:\svn\repository" displayname= "Subversion" depend= Tc
pip start= auto
[SC] CreateService ERFOLG

C:\Windows\system32>net start svnserver
Der Dienst reagiert auf die Kontrollfunktion nicht. 
```

知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-25T03:00:52.887

From [Svnserve Based Server](http://tortoisesvn.net/docs/nightly/TortoiseSVN_en/tsvn-serversetup-svnserve.html) page of TortoseSVN docs, "Run svnserve as a Service" chapter. Your **path have space** in name

> If any of the paths include spaces, you have to use (escaped) quotes around the path, like this:

```
sc create svnserve binpath= "
    \"C:\Program Files\Subversion\bin\svnserve.exe\"
    --service --root c:\repos" displayname= "Subversion"
    depend= tcpip start= auto 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-25T12:07:17.727

您声明您只想为自己安装一个 SVN 服务器，即您将成为该系统的唯一用户。那么在这种情况下安装SVN*服务器的目的是什么？*

*您是否决定设置 svnserve 是因为您认为这是使您的存储库可供客户访问的最简单方法？*如果你这样做了，那么你就错过了访问存储库的更简单方法：

*   *您可以使用直接存储库访问（在本地磁盘上）。* 即您可以使用 URL:`file:///C:\Repositories\MyProject1`或`file:///C:\Repositories\MyProject1\trunk\repo-folder`.

*   如果您需要创建一个干净的存储库，您可以使用命令行：

    `svnadmin create C:\Repositories\MyProject1`

你不需要 svnserve 或 Apache HTTP 服务器。

我可以同意，像 VisualSVN Server 这样的 Subversion 捆绑包使维护存储库变得更加容易，并理解为什么将其安装在笔记本电脑上供个人使用，甚至在本地使用 HTTPS 访问。但是我完全不明白为什么有人想在 Windows 上设置个人基于 svnserve 的 SVN 服务器！恕我直言，没有真正的用例。最好考虑使用专用的 SVN 包或使用直接`file://`访问。

# javascript - jquery document.ready 多重声明

> ID：13623479
> 
> 赞同：4
> 
> 时间：2012-11-29T10:17:31.273
> 
> 标签：javascript, jquery, scope

我意识到我可以指定`$(document).ready(function(){});`不止一次。
假设像这样

```
$(document).ready(function(){
    var abc = "1122";
    //do something..
});

$(document).ready(function(){
    var abc = "def";
    //do something..
}); 
```

1.  这是标准吗？这些代码适用于我的 FF (16.0.2)。我只是有点害怕其他浏览器可能不会。
2.  究竟发生了什么？jQuery 如何处理这些代码？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T10:18:26.233

是的，这是标准和推荐的，jQuery 保证这些函数将按声明顺序执行（有关实现的详细信息，请参阅[此相关答案](https://stackoverflow.com/questions/12797257/call-order-of-jquery-ready-callback/12797330#12797330)）。

该`abc`变量是您的函数的本地变量，不会干扰。您看不到`abc`在另一个回调之一中声明的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:22:58.450

是的，多个 document.ready 函数可以在同一个页面中使用。它不会在任何浏览器中给出任何错误或异常。该函数将按从高到低的顺序执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:01:36.740

即使它是标准的，我宁愿只使用一个 $(document.ready) ... 来保持它干燥，否则你最终可能会在你的页面上说 10 个这样的声明，这将使它看起来像不可维护的意大利面条代码（但 JS 也允许你这样做）

# jsp - 使用 post 请求转发 hashmap

> ID：13623481
> 
> 赞同：0
> 
> 时间：2012-11-29T10:17:46.733
> 
> 标签：jsp, servlets, post, hashmap

我有一个 jsp 页面，我在其中获取数据集，并且该数据还包含哈希图。所以我的问题是如何使用发布请求将该数据转发到我的其他 servlet？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T06:29:35.167

这可以通过使用将 hashmap 作为隐藏参数的自动表单提交技术来实现。

# python - pymongo - 一次更新调用中的多个更新

> ID：13623483
> 
> 赞同：1
> 
> 时间：2012-11-29T10:17:50.993
> 
> 标签：python, mongodb, pymongo

我正在尝试在我的 mongo 集合的文档中插入谷歌搜索的结果（使用谷歌自定义搜索 API）。`'title'`对每个文档的字段值执行搜索。

我昨天进行了测试，但似乎我错误地配置了我的 API 帐户，因为我仍然限制为每天 100 个查询。结果，我有大约 100 个文档，其中`'google_search'`字段包含正确的 API 结果。所有其他文档都有一个`'google_search'`包含以下内容的字段`dict`：

```
 {u'error': {u'code': 403,
  u'errors': [{u'domain': u'usageLimits',
  u'message': u'Daily Limit Exceeded',
  u'reason': u'dailyLimitExceeded'}],
  u'message': u'Daily Limit Exceeded'}} 
```

因此，我想对每个不存在`google_search`字段的文档或包含`google_search.error`dict的文档执行 google_search

我可以这样做：

```
for item in coll.find({'$or': [{'google_search': None}, 
                              {'google_search.error.code': {'$ne': None}}]):
    coll.update({'_id': item['_id']}, {'$set': {'google_search': g_search(item['title'])}}) 
```

但我想知道有什么方法可以用一个``coll.update(..., multi=True)`mongo 调用来做同样的事情，而不是一个 for 循环和几个原子更新调用。我觉得单个方法调用会比冗长的 for 循环更快，但我不确定我是否正确。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:24:39.943

好的。忘记我的帖子。找到[了这个](https://stackoverflow.com/questions/3788256/mongodb-updating-documents-using-data-from-the-same-document/3792958#3792958)。您不能从 update() 中引用当前文档的属性。您必须遍历所有文档并更新它们。

所以这里没有一个巨大的更新。

可以循环执行此类操作。

# objective-c - ios中alertbox中的超链接

> ID：13623489
> 
> 赞同：2
> 
> 时间：2012-11-29T10:18:04.827
> 
> 标签：objective-c, ios5

我正在开发 iPad5 应用程序。在我的应用程序中，我想显示超链接，然后单击该链接应该在 safari 中打开。

我搜索过。但我没有得到适当的解决方案。请帮我。

提前致谢。对于我正在使用的警报： UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"confirmation" message:@"some string and hyperlink here" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil]; [警报显示]；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:44:55.397

为此，您可以在警报中添加按钮作为子视图并将其设置为超链接（带有蓝色文本颜色的自定义按钮），然后单击它，您可以在 safari 中打开该链接。

谢谢

# android - 如何在 Android 列表视图中避免滚动条拉伸

> ID：13623490
> 
> 赞同：0
> 
> 时间：2012-11-29T10:18:04.967
> 
> 标签：android

我尝试使用`android:scrollbarThumbVertical="@drawable/scrollbar"`参数将图像添加为滚动条。滚动条已更改，但问题是，它不会显示原始大小，它是根据列表视图大小（项目）进行拉伸的。如果列表项计数为 20 表示它显示正确的尺寸，它大约 50 表示滚动条在整个视图中拉伸。有没有办法避免拉伸。在这里，我将添加带有滚动条图像的代码以及我的输出。

**主.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#234232"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/hello"
        android:textSize="20sp" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="250dp"
        android:layout_height="fill_parent"
        android:fadeScrollbars="false"
        android:fadingEdge="none"
        android:scrollbarSize="12dip"
        android:scrollbarStyle="outsideInset"
        android:scrollbarThumbVertical="@drawable/scrollbar" >
    </ListView>

</LinearLayout> 
```

**CustomScrollBarAndroidActivity.java**

```
public class CustomScrollBarAndroidActivity extends Activity {
    private ListView list;
    private static List<String> listItems = initListItems();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        list = (ListView) findViewById(R.id.listView1);
        list.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, listItems));
    }

    private static List<String> initListItems() {
        List<String> list = new ArrayList<String>();
        boolean isNotFinish = true;
        int i = 0;
        while(isNotFinish){
            list.add("list item #" + i);
            if (i > 50){
                isNotFinish = false;
            }
            i++;
        }
        return list;
    }
} 
```

![我的输出图像是](../Images/12954885fb42166cee5f144a40bde37d.png),

我的滚动条图像是![在此处输入图像描述](../Images/425678debf3fd71a95ac5fde21419806.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:21:11.037

对此图像使用 draw9 补丁 :)

# asp.net-mvc-3 - 文件上传在 IE 8、IE 9 中不起作用

> ID：13623491
> 
> 赞同：1
> 
> 时间：2012-11-29T10:18:11.757
> 
> 标签：asp.net-mvc-3, file-upload

我有以下代码来上传文件，该文件在 mozilla firefox 和 google chrome 中运行没有错误，但在 IE 8 中出现错误。请提供解决方案。这是我的看法-

```
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <fieldset>
        <div class="input_panelleft">
            <div class="input_panellabel">
                @Html.LabelFor(model => model.DrawingName)
            </div>
            <div class="input_panelinput">
                @Html.EditorFor(model => model.DrawingName)
            </div>
            <div class="input_panellabel">
                Upload Drawing
            </div>
            <div class="input_panelinput">
                <input type="file" name='file' id='file' />
            </div>
            <div class="center">
                <input type="submit" value="Upload" />
            </div>
        </div>
    </fieldset>
} 
```

以及控制器中的以下代码-

```
 [HttpPost]
    public ActionResult Create(DrawingDocumentsModel model, HttpPostedFileBase file)
    {
        if (ModelState.IsValid)
        {
            if (file != null)
            {
                var documentNameParts = file.FileName.Split('.');
                var documentExtension = documentNameParts.Last();
                var documentNameOnly = String.Join(".", documentNameParts.Take(documentNameParts.Length - 1));
                var filename = documentNameOnly + "." + documentExtension;
                if (_drawingDocumentService.IsDrawingNameAvailable(filename))
                {
                    var path = Server.MapPath("~/Uploads/");
                    var Filepath = Path.Combine(path, filename);
                    file.SaveAs(Filepath);

                    var drawingDocuments = new DrawingDocuments();
                    drawingDocuments.ProjectId = 1;
                    drawingDocuments.ProjectName = "Drawing Tag";
                    drawingDocuments.FileName = filename;
                    drawingDocuments.UploadedDate = System.DateTime.Now;
                    drawingDocuments.UploadedBy = _workContext.CurrentUserId;
                    if (model.DrawingName == "" || model.DrawingName == null)
                    {
                        ModelState.AddModelError("CustomError", "Please Enter Drawing Name");
                    }
                    else
                    {
                        drawingDocuments.DrawingName = model.DrawingName;
                        drawingDocuments.Path = ("/Uploads/" + filename);

                        _drawingDocumentService.InsertDrawingDocument(drawingDocuments);
                        return RedirectToAction("DrawingDocuments");
                    }
                }
                else
                {
                    ModelState.AddModelError("CustomError", "Drawing With Same File Name Already Available");
                }
            }
            else
            {
                ModelState.AddModelError("CustomError", "Please Select Drawing");
            }
        }

        return View(model);
    } 
```

# nhibernate - 如何防止 Nhibernate 获取派生类？

> ID：13623492
> 
> 赞同：0
> 
> 时间：2012-11-29T10:18:14.017
> 
> 标签：nhibernate, nhibernate-mapping, fetch, linq-to-nhibernate, class-table-inheritance

我正在使用 Nhibernate，并且在获取具有多个派生类的基类（每个类映射不同的表）时遇到问题。当我查看请求时，Nhibernate 会加入每个派生表，这会对性能产生巨大影响......

这是我的课程的简化视图：

```
public class Animal{
    public virtual int ID { get; set;}
    public virtual string Name { get; set;}
}

public class Dog : Animal{
    //others properties
}

public class Cat: Animal{
    //others properties
}

public class Person{
    public virtual int ID { get; set;}
    public virtual IEnumerable<Animal> Animals { get; set;}
} 
```

一个人有一个动物列表，我只想要他们的名字。这个例子并不完美，而且更复杂（银行程序），但它很好地反映了我的问题。我知道它可以以不同的方式完成等等，但它是一个遗产，所以我别无选择......

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:56:52.557

IMO NHibernate 只会连接包含投影列的表。定义查询但不返回`Person`但将您需要的属性投影到 dto/匿名类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:29:07.587

毕竟，我创建了一个由 Dog、Cat 等继承的类 AnimalBase 和一个没有任何子级的 Animal 类（两者都有接口 IAnimal）。

在我 95% 的请求中，我只需要 Animal，我在我的其他对象（如 Person）中引用了这个类。

不完美，但我没有找到更好的东西......

感谢菲罗的帮助。

# java - 将 GWT-HighChart 转换为图像

> ID：13623494
> 
> 赞同：0
> 
> 时间：2012-11-29T10:18:20.340
> 
> 标签：java, image, gwt, highcharts, smartgwt

我在我的 SmartGWT 项目中使用[GWT-HighCharts](http://www.moxiegroup.com/)，我需要将图表转换为图像以在 TabSet 上显示它。我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T10:20:04.003

这在[GWT Highcharts 用户指南](http://www.moxiegroup.com/moxieapps/gwt-highcharts/userguide.jsp)中有介绍。

默认情况下禁用导出。您需要添加

```
<script type="text/javascript" src="js/modules/exporting.js"></script> 
```

启用导出为 PNG、JPEG、PDF 或 SVG 图像。添加上述 JS 导入启用导出。

# java - 如何解码 TripTracker 发送到服务器的 JSON 数据？

> ID：13623495
> 
> 赞同：0
> 
> 时间：2012-11-29T10:18:24.237
> 
> 标签：java, android, json

我正在使用 PHP MySQL 服务器模型。我想解码此代码发送到服务器的 JSON 数据。任何帮助，将不胜感激。该应用程序将当前 GPS 坐标作为 JSON 数组对象发送到输入的服务器。我想对其进行解码以与其他安卓用户分享。非常感谢。这是安卓代码。

```
public class TrackerService extends Service {
private static final String TAG = "TripTracker/Service";

private final String updatesCache = "updates.cache";

public static TrackerService service;

private NotificationManager nm;
private Notification notification;
private static boolean isRunning = false;

private String freqString;
private int freqSeconds;
private String endpoint;

private final int MAX_RING_SIZE = 15;

private LocationListener locationListener;
private AlarmManager alarmManager;
private PendingIntent pendingAlarm;
private static volatile PowerManager.WakeLock wakeLock;

private AsyncTask httpPoster;

ArrayList<LogMessage> mLogRing = new ArrayList<LogMessage>();
ArrayList<Messenger> mClients = new ArrayList<Messenger>();
ArrayList<List> mUpdates = new ArrayList<List>();
final ReentrantReadWriteLock updateLock = new ReentrantReadWriteLock();
final Messenger mMessenger = new Messenger(new IncomingHandler());

static final int MSG_REGISTER_CLIENT = 1;
static final int MSG_UNREGISTER_CLIENT = 2;
static final int MSG_LOG = 3;
static final int MSG_LOG_RING = 4;

@Override
public IBinder onBind(Intent intent) {
    return mMessenger.getBinder();
}

@Override
public void onCreate() {
    super.onCreate();

    TrackerService.service = this;

    endpoint = Prefs.getEndpoint(this);
    freqSeconds = 0;
    freqString = null;

    freqString = Prefs.getUpdateFreq(this);
    if (freqString != null && !freqString.equals("")) {
        try {
            Pattern p = Pattern.compile("(\\d+)(m|h|s)");
            Matcher m = p.matcher(freqString);
            m.find();
            freqSeconds = Integer.parseInt(m.group(1));
            if (m.group(2).equals("h"))
                freqSeconds *= (60 * 60);
            else if (m.group(2).equals("m"))
                freqSeconds *= 60;
        }
        catch (Exception e) {
        }
    }

    if (endpoint == null || endpoint.equals("")) {
        logText("invalid endpoint, stopping service");
        stopSelf();
    }

    if (freqSeconds < 1) {
        logText("invalid frequency (" + freqSeconds + "), stopping " +
            "service");
        stopSelf();
    }

    readCache();

    showNotification();

    isRunning = true;

    /* we're not registered yet, so this will just log to our ring buffer,
     * but as soon as the client connects we send the log buffer anyway */
    logText("service started, requesting location update every " +
        freqString);

    /* findAndSendLocation() will callback to this */
    locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
            sendLocation(location);
        }

        public void onStatusChanged(String provider, int status,
        Bundle extras) {
        }

        public void onProviderEnabled(String provider) {
        }

        public void onProviderDisabled(String provider) {
        }
    };

    /* we don't need to be exact in our frequency, try to conserve at least
     * a little battery */
    alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);
    Intent i = new Intent(this, AlarmBroadcast.class);
    pendingAlarm = PendingIntent.getBroadcast(this, 0, i, 0);
    alarmManager.setInexactRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP,
        SystemClock.elapsedRealtime(), freqSeconds * 1000, pendingAlarm);
}

@Override
public void onDestroy() {
    super.onDestroy();

    if (httpPoster != null)
        httpPoster.cancel(true);

    try {
        LocationManager locationManager = (LocationManager)
            this.getSystemService(Context.LOCATION_SERVICE);
        locationManager.removeUpdates(locationListener);
    }
    catch (Exception e) {
    }

    /* kill persistent notification */
    nm.cancelAll();

    if (pendingAlarm != null)
        alarmManager.cancel(pendingAlarm);

    isRunning = false;
}

@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    return START_STICKY;
}

/* must be done inside of updateLock */
public void cacheUpdates() {
    OutputStreamWriter cacheStream = null;

    try {
        FileOutputStream cacheFile = TrackerService.this.openFileOutput(
            updatesCache, Activity.MODE_PRIVATE);
        cacheStream = new OutputStreamWriter(cacheFile, "UTF-8");

        /* would be nice to just serialize mUpdates but it's not
         * serializable.  create a json array of json objects, each object
         * having each key/value pair of one location update. */

        JSONArray ja = new JSONArray();

        for (int i = 0; i < mUpdates.size(); i++) {
            List<NameValuePair> pair = mUpdates.get(i);
            JSONObject jo = new JSONObject();

            for (int j = 0; j < pair.size(); j++) {
                try {
                    jo.put(((NameValuePair)pair.get(j)).getName(),
                        pair.get(j).getValue());
                }
                catch (JSONException e) {
                }
            }

            ja.put(jo);
        }

        cacheStream.write(ja.toString());
        cacheFile.getFD().sync();
    }
    catch (IOException e) {
        Log.w(TAG, e);
    }
    finally {
        if (cacheStream != null) {
            try {
                cacheStream.close();
            }
            catch (IOException e) {
            }
        }
    }
}

/* read json cache into mUpdates */
public void readCache() {
    updateLock.writeLock().lock();

    InputStreamReader cacheStream = null;

    try {
        FileInputStream cacheFile = TrackerService.this.openFileInput(
            updatesCache);
        StringBuffer buf = new StringBuffer("");
        byte[] bbuf = new byte[1024];
        int len;

        while ((len = cacheFile.read(bbuf)) != -1)
            buf.append(new String(bbuf));

        JSONArray ja = new JSONArray(new String(buf));

        mUpdates = new ArrayList<List>();

        for (int j = 0; j < ja.length(); j++) {
            JSONObject jo = ja.getJSONObject(j);

            List<NameValuePair> nvp = new ArrayList<NameValuePair>(2);

            Iterator<String> i = jo.keys();
            while (i.hasNext()) {
                String k = (String)i.next();
                String v = jo.getString(k);

                nvp.add(new BasicNameValuePair(k, v));
            }

            mUpdates.add(nvp);
        }

        if (mUpdates.size() > 0)
            logText("read " + mUpdates.size() + " update" +
                (mUpdates.size() == 1 ? "" : "s") + " from cache");
    }
    catch (JSONException e) {
    }
    catch (FileNotFoundException e) {
    }
    catch (IOException e) {
        Log.w(TAG, e);
    }
    finally {
        if (cacheStream != null) {
            try {
                cacheStream.close();
            }
            catch (IOException e) {
            }
        }
    }

    updateLock.writeLock().unlock();
}

/* called within wake lock from broadcast receiver, but assert that we have
 * it so we can keep it longer when we return (since the location request
 * uses a callback) and then free it when we're done running through the
 * queue */
public void findAndSendLocation() {
    if (wakeLock == null) {
        PowerManager pm = (PowerManager)this.getSystemService(
            Context.POWER_SERVICE);

        /* we don't need the screen on */
        wakeLock = pm.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK,
            "triptracker");
        wakeLock.setReferenceCounted(true);
    }

    if (!wakeLock.isHeld())
        wakeLock.acquire();

    LocationManager locationManager = (LocationManager)
        this.getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestSingleUpdate(LocationManager.GPS_PROVIDER,
        locationListener, null);
}

public static boolean isRunning() {
    return isRunning;
}

private void showNotification() {
    nm = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    notification = new Notification(R.drawable.icon,
        "Trip Tracker Started", System.currentTimeMillis());
    PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
        new Intent(this, MainActivity.class), 0);
    notification.setLatestEventInfo(this, "Trip Tracker",
        "Sending location every " + freqString, contentIntent);
    notification.flags = Notification.FLAG_ONGOING_EVENT;
    nm.notify(1, notification);
}

private void updateNotification(String text) {
    if (nm != null) {
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, MainActivity.class), 0);
        notification.setLatestEventInfo(this, "Trip Tracker", text,
            contentIntent);
        notification.when = System.currentTimeMillis();
        nm.notify(1, notification);
    }
}

public void logText(String log) {
    LogMessage lm = new LogMessage(new Date(), log);
    mLogRing.add(lm);
    if (mLogRing.size() > MAX_RING_SIZE)
        mLogRing.remove(0);

    updateNotification(log);

    for (int i = mClients.size() - 1; i >= 0; i--) {
        try {
            Bundle b = new Bundle();
            b.putString("log", log);
            Message msg = Message.obtain(null, MSG_LOG);
            msg.setData(b);
            mClients.get(i).send(msg);
        }
        catch (RemoteException e) {
            /* client is dead, how did this happen */
            mClients.remove(i);
        }
    }
}

/* flatten an array of NameValuePairs into an array of
 * locations[0]latitude, locations[1]latitude, etc. */
public List<NameValuePair> getUpdatesAsArray() {
    List<NameValuePair> pairs = new ArrayList<NameValuePair>(2);

    for (int i = 0; i < mUpdates.size(); i++) {
        List<NameValuePair> pair = mUpdates.get(i);

        for (int j = 0; j < pair.size(); j++)
            pairs.add(new BasicNameValuePair("locations[" + i + "][" +
                ((NameValuePair)pair.get(j)).getName() + "]",
                pair.get(j).getValue()));
    }

    return pairs;
}

public int getUpdatesSize() {
    return mUpdates.size();
}

public void removeUpdate(int i) {
    mUpdates.remove(i);
}

private void sendLocation(Location location) {
    List<NameValuePair> pairs = new ArrayList<NameValuePair>(2);
    pairs.add(new BasicNameValuePair("time",
        String.valueOf(location.getTime())));
    pairs.add(new BasicNameValuePair("latitude",
        String.valueOf(location.getLatitude())));
    pairs.add(new BasicNameValuePair("longitude",
        String.valueOf(location.getLongitude())));
    pairs.add(new BasicNameValuePair("speed",
        String.valueOf(location.getSpeed())));

    /* push these pairs onto the queue, and only run the poster if another
     * one isn't running already (if it is, it will keep running through
     * the queue until it's empty) */
    updateLock.writeLock().lock();
    mUpdates.add(pairs);
    int size = service.getUpdatesSize();
    cacheUpdates();
    updateLock.writeLock().unlock();

    logText("location " +
        (new DecimalFormat("#.######").format(location.getLatitude())) +
        ", " +
        (new DecimalFormat("#.######").format(location.getLongitude())) +
        (size <= 1 ? "" : " (" + size + " queued)"));

    if (httpPoster == null ||
    httpPoster.getStatus() == AsyncTask.Status.FINISHED)
        (httpPoster = new HttpPoster()).execute();
}

class IncomingHandler extends Handler {
    @Override
    public void handleMessage(Message msg) {
        switch (msg.what) {
        case MSG_REGISTER_CLIENT:
            mClients.add(msg.replyTo);

            /* respond with our log ring to show what we've been up to */
            try {
                Message replyMsg = Message.obtain(null, MSG_LOG_RING);
                replyMsg.obj = mLogRing;
                msg.replyTo.send(replyMsg);
            }
            catch (RemoteException e) {
            }

            break;
        case MSG_UNREGISTER_CLIENT:
            mClients.remove(msg.replyTo);
            break;

        default:
            super.handleMessage(msg);
        }
    }
}

/* Void as first arg causes a crash, no idea why
E/AndroidRuntime(17157): Caused by: java.lang.ClassCastException: java.lang.Object[] cannot be cast to java.lang.Void[]
*/
class HttpPoster extends AsyncTask<Object, Void, Boolean> {
    @Override
    protected Boolean doInBackground(Object... o) {
        TrackerService service = TrackerService.service;

        int retried = 0;
        int max_retries = 4;

        while (true) {
            if (isCancelled())
                return false;

            boolean failed = false;

            updateLock.writeLock().lock();
            List<NameValuePair> pairs = service.getUpdatesAsArray();
            int pairSize = service.getUpdatesSize();
            updateLock.writeLock().unlock();

            AndroidHttpClient httpClient =
                AndroidHttpClient.newInstance("TripTracker");

            try {
                HttpPost post = new HttpPost(endpoint);
                post.setEntity(new UrlEncodedFormEntity(pairs));
                HttpResponse resp = httpClient.execute(post);

                int httpStatus = resp.getStatusLine().getStatusCode();
                if (httpStatus == 200) {
                    /* all good, we can remove everything we've sent from
                     * the queue (but not just clear it, in case another
                     * one jumped onto the end while we were here) */
                    updateLock.writeLock().lock();
                    for (int i = pairSize - 1; i >= 0; i--)
                        service.removeUpdate(i);
                    updateLock.writeLock().unlock();
                }
                else {
                    logText("POST failed to " + endpoint + ": got " +
                        httpStatus + " status");
                    failed = true;
                }
            }
            catch (Exception e) {
                logText("POST failed to " + endpoint + ": " + e);
                Log.w(TAG, e);
                failed = true;
            }
            finally {
                if (httpClient != null)
                    httpClient.close();
            }

            if (failed) {
                /* if our initial request failed, snooze for a bit and try
                 * again, the server might not be reachable */
                SystemClock.sleep(15 * 1000);

                if (++retried > max_retries) {
                    /* give up since we're holding the wake lock open for
                     * too long.  we'll get it next time, champ. */
                    logText("too many failures, retrying later (queue " +
                        "size " + service.getUpdatesSize() + ")");
                    break;
                }
            }
            else
                retried = 0;

            int q = 0;
            updateLock.writeLock().lock();
            q = service.getUpdatesSize();
            cacheUpdates();
            updateLock.writeLock().unlock();

            if (q == 0)
                break;
            /* otherwise, run through the rest of the queue */
        }

        return false;
    }

    protected void onPostExecute(Boolean b) {
        if (wakeLock != null && wakeLock.isHeld())
            wakeLock.release();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:25:22.953

您可以使用[json_decode()解码数据](http://php.net/manual/en/function.json-decode.php)

```
<?php

$json  = ""; // JSON data 

$json_obj = json_decode($json); // As Object 
$json_arr = json_decide($json,true) // As Array

var_dump($json_obj);
print_r($json_arr); 
```

// 使用序列化函数将数组存储到数据库

$data = 序列化($json_array); // 数组将被转换为字符串

```
?> 
```

# objective-c - 在音频回调函数中，如何更新 UI/调用视图控制器？

> ID：13623497
> 
> 赞同：0
> 
> 时间：2012-11-29T10:18:34.927
> 
> 标签：objective-c, ios, uiviewcontroller, callback, audioqueueservices

我目前正在学习在 iOS 中使用音频队列服务。为此，我遵循了[音频队列服务编程指南 - 录制音频](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQRecord/RecordingAudio.html#//apple_ref/doc/uid/TP40005343-CH4-SW1)。这行得通。

现在我想在[回调函数](http://developer.apple.com/library/ios/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQRecord/RecordingAudio.html#//apple_ref/doc/uid/TP40005343-CH4-SW11)接收到来自麦克风的输入数据时更新一个 UI 元素（功率计）。这是我遇到问题的地方。

我不确定从回调函数调用视图/视图控制器以更新功率计的好方法是什么。我试过这个：在指南中描述的[管理 state 的自定义结构中](http://developer.apple.com/library/ios/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQRecord/RecordingAudio.html#//apple_ref/doc/uid/TP40005343-CH4-SW15)，我添加了一个指向我的视图控制器的指针：

```
struct AQRecorderState {
    AudioStreamBasicDescription  mDataFormat;                   // 2
    AudioQueueRef                mQueue;                        // 3
    AudioQueueBufferRef          mBuffers[kNumberBuffers];      // 4
    AudioFileID                  mAudioFile;                    // 5
    UInt32                       bufferByteSize;                // 6
    SInt64                       mCurrentPacket;                // 7
    bool                         mIsRunning;                    // 8
    void*                        mViewController; // <- I've added this line
}; 
```

当我开始录制时，我初始化了这个指针。这是在视图控制器的方法中完成的，当开始按钮接收到 TouchUp 事件时会调用该方法：

```
- (IBAction)startAudioRecording:(id)sender {

    struct AQRecorderState* aqData = createAQRecorderState();

    void* pViewControllerAsVoidPointer = (__bridge void*) self;
    aqData->mViewController = pViewControllerAsVoidPointer;

//... 
```

分配结构的方法 createAQRecorderState() 如下所示：

```
struct AQRecorderState* createAQRecorderState() {
    struct AQRecorderState* pAqData = (struct AQRecorderState*) malloc(sizeof(AQRecorderState));

    initializeAQRecorderState(*pAqData); // sets members of the struct; does not set pointer to view controller

    return pAqData;
} 
```

AFAIK，我在开始录制时创建的结构的实例被传递给以后对回调函数的调用。出于这个原因，我在回调函数中添加了以下代码，以便随后调用视图控制器：

```
void HandleInputBuffer(
                       void                                 *aqData,
                       AudioQueueRef                        inAQ,
                       AudioQueueBufferRef                  inBuffer,
                       const AudioTimeStamp                 *inStartTime,
                       UInt32                               inNumPackets,
                       const AudioStreamPacketDescription   *inPacketDesc
                       ) {

//...

NSLog(@"interesting part start");

void* pViewControllerAsVoidPtr = pAqData->mViewController;
NSLog(@"localized pointer to void");

ViewController* pViewController = (__bridge ViewController*) pViewControllerAsVoidPtr;  //EXC_BAD_ACCESS
NSLog(@"localized pointer to ViewController");

//...
} 
```

但是，当我进行桥接指针转换时，我在上面标记行的回调函数中得到了 EXC_BAD_ACCESS (code=1, address=0xffffffff)。然后我用调试器检查了这个，实际上`pViewControllerAsVoidPtr` **并没有**保存我在`pAqData->mViewController`方法执行期间存储的地址`startAudioRecording:`。

为什么那个指针会改变？或者：如何正确地从我的回调函数调用视图控制器来更新 UI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:01:49.400

我发现了我的错误。这就是我如何执行[创建录制音频队列](http://developer.apple.com/library/ios/documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/AQRecord/RecordingAudio.html#//apple_ref/doc/uid/TP40005343-CH4-SW25)的步骤。我完全按照指南中的复制粘贴操作：

```
AudioQueueNewInput (                              // 1
    &aqData.mDataFormat,                          // 2
    HandleInputBuffer,                            // 3
    &aqData, //<------------------ HERE           // 4
    NULL,                                         // 5
    kCFRunLoopCommonModes,                        // 6
    0,                                            // 7
    &aqData.mQueue                                // 8
); 
```

问题是在指南中，变量 aqData 是一个结构，因此需要引用（前导 & 符号）将其转换为指针，而我的变量 aqData 已经是一个指向结构的指针，因此引用（前导 & sign) 将其更改为“指向结构的指针”。因此，我将指针的地址而不是结构的地址传递给了函数`AudioQueueNewInput(...)`，这是错误的，当然，另一个位置的内存具有不同的内容。

编译器不会抱怨这种错误类型，因为它需要一个 (void*)，它可以是任何指针，包括 (struct**)，一个指向结构体指针的指针。

# .net - 多对多 linq 选择遇到问题

> ID：13623500
> 
> 赞同：1
> 
> 时间：2012-11-29T10:18:49.357
> 
> 标签：.net, linq

我这样创建了三个表：

![在此处输入图像描述](../Images/7e657c2208782e9e59bad86f86e0d2c8.png)

我想做的是选择一个参加者，其中给定的参加者 ID 和管理员 ID 存在 AdministratorAttendee 记录。

我试过的是这样的：

```
var result = (from a in dc.Attendees
              from aa in dc.AdministratorAttendees
              where aa.AdministratorId == this.CurrentAdminId && a.AttendeeId == _attendee.AttendeeId
              select a); 
```

但它没有返回任何结果，尽管给定的 ID 存在参加者、管理员和管理员参加者记录。

要使用的正确 linq 查询是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:06:41.007

你试过这种方法吗？

```
var result = (from a in dc.Attendees
                  join aa in dc.AdministratorAttendees
                  on new { aa.AdministratorId, a.AttendeeId } equals 
                     new { this.CurrentAdminId, _attendee.AttendeeId } 
                  select a); 
```

# java - 使用 mongo 的 jongo 驱动程序查询日期

> ID：13623501
> 
> 赞同：4
> 
> 时间：2012-11-29T10:18:49.553
> 
> 标签：java, mongodb, date, jongo

我使用 jongo 驱动程序连接到我的 mongoDB 。

查询的语法 - 例如，某些年龄小于 18 岁 - 是

```
collection.find("{age: {$lt : 18}}"); 
```

但是如何查询日期？

在 mongoDB 中，日期键值对的存储方式如下

```
{"date" : ISODate("2012-11-23T00:12:23.123Z")} 
```

所以我尝试了以下方法：

```
collection.find("{date: {$lt : ISODate(\"2012-11-23T00:13:00.000Z\")}}"); 
```

但是我在运行java代码时遇到了这个异常：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: java.lang.IllegalArgumentException: {dateLastSeen: {$lt: ISODate("2012-11-23T00:13:00.000Z")}} cannot be parsed
        at org.jongo.query.Query.convertToDBObject(Query.java:33)
        at org.jongo.query.Query.<init>(Query.java:26)
        at org.jongo.query.QueryFactory.createQuery(QueryFactory.java:38)
        at org.jongo.Find.<init>(Find.java:42)
        ... 10 more
Caused by: com.mongodb.util.JSONParseException:
{dateLastSeen: {$lt: ISODate("2012-11-23T00:13:00.000Z")}}
                     ^
        at com.mongodb.util.JSONParser.parse(JSON.java:198)
        at com.mongodb.util.JSONParser.parseObject(JSON.java:231)
        at com.mongodb.util.JSONParser.parse(JSON.java:195)
        at com.mongodb.util.JSONParser.parseObject(JSON.java:231)
        at com.mongodb.util.JSONParser.parse(JSON.java:195)
        at com.mongodb.util.JSONParser.parse(JSON.java:145)
        at com.mongodb.util.JSON.parse(JSON.java:81)
        at com.mongodb.util.JSON.parse(JSON.java:66)
        at org.jongo.query.Query.convertToDBObject(Query.java:31) 
```

所以我认为，日期不会被简单地转换为相应的字符串，但是使用日期搜索的语法是不同的。

有jongo知识的人可以帮忙吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T10:32:22.247

Using`java.util.Date`是使用 Jongo 查询日期的标准方法：

```
collection.find("{date: {$lt : #}}", new Date(2012, 11, 30)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T22:30:18.330

通过传递多个参数进行查询 -

```
jongoCollection.find("{date : { $gte : #, $lte : # }}", new Date(1234567890), new Date(1234567890)) 
```

# java - Java Servlet 安全手册验证请求服务器端

> ID：13623503
> 
> 赞同：0
> 
> 时间：2012-11-29T10:18:54.287
> 
> 标签：java, security, authentication, servlets

我有一个提供网站内容的 java servlet，它使用表单身份验证来登录用户并让他们访问内容。每当用户访问受保护的资源时，他都会被重定向到一个登录表单，该表单用于将用户名/密码发布到 Web 服务器中的 j_security_check 路径。其余的由生成用户会话、响应并将他重定向到他尝试访问的初始资源的 java 安全机制处理。到目前为止，一切都很好。

我想要做的是通过以下方式为未登录用户提供对资源的访问： GET www.myserver.com/anotherLoginMethod=aasdfJKL 其中 aasdfJK 是服务器生成的哈希。服务器保持与用户帐户的关联，当用户发送此 GET 请求时，我需要：

1)获取anotherLoginMethod参数值。2）检索关联的用户帐户（凭据）。3) 自动登录用户，就像他在 j_security_check 处理程序中使用他的用户名/密码进行 POST 一样。

那可能吗 ？

我尝试在过滤器中使用 HttpServletRequest 的登录和身份验证方法，但到目前为止没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:29:23.657

它相对简单。您需要决定 1\. 您打算将哈希值及其与用户的关联保存在哪里？2\. 你建议如何将哈希值给用户？确保安全对于此步骤至关重要。

完成此操作后，您可以编写一个可以拦截此请求的 servlet 过滤器，或者您可以在 servlet 本身中包含逻辑，获取与哈希值关联的用户，生成一个会话，就像用户已成功登录一样重定向到所需的 URL。了解与这种方法相关的安全问题很重要。

# c# - 从 Azure 获取 XML 文件作为 C# 中的响应

> ID：13623504
> 
> 赞同：3
> 
> 时间：2012-11-29T10:18:53.927
> 
> 标签：c#, xml, windows-phone-7, azure, reporting-services

我们在 Azure 上有一个 RDL 和 XML 文件。我有一个带有 loginId 和密码（Azure）的路径的完整URI，可以直接下载 xml 文件。

**在浏览器中，此链接 (fullURI) 将** 1\. 打开 Azure 登录页面。2\. 在输入凭据时，它会打开一个对话框，询问您 - 您要打开/保存/取消 xml 文件吗？3\. 如果我们选择打开，那么它将在浏览器中打开 XML 文件。

**在带有 C# 代码的 WP7 应用程序中，我们试图从上面访问 xml。代码片段如下所示。**

```
protected class GetContext
{
    public HttpWebRequest Request;
} 
```

***要求***

```
HttpWebRequest xmlReportRequest;

… …. 
// baseuri is a HTTPS link to azure reporting server.
URI fullUri = new Uri(baseuri + "&rs:Command=Render&rs:Format=XML"); 
xmlReportRequest = (HttpWebRequest)HttpWebRequest.Create(fullUri.Uri);
xmlReportRequest.Credentials = new NetworkCredential(UserName, Password);

// start the asynchronous request
xmlReportRequest.BeginGetResponse(new AsyncCallback(HandleResponse),    new GetContext {   Request = request });

); 
```

***回复***

```
private void HandleResponse(IAsyncResult asyncResult)
{
    var context = (GetFContext)result.AsyncState;
    WebResponse response = context.Request.EndGetResponse(asyncResult);

    //get the stream containing the response from the async call
    Stream streamResult;
    streamResult  =  response.GetResponseStream();

    // load the XML
    _xmlDocument = XElement.Load(streamResult); // EXCEPTION AT THIS LINE NOTSUPPORTEDEXCEPTION

   ….   …         …

} 
```

在这里，GetResponseStream 的输出不是 XML 文件。当流存储到字符串中时，我们会看到它是作为 HTML 的 Azure 登录页面。

***来自 GETRESPONSESTREAM***的响应，我觉得这只是一个 HTML 天蓝色登录页面（带有我们发送的信息）。下面是回复，这里我用 URL_TO_THE_XML_FILE_IN_REPORTING_SERVER 替换了一些机密信息（它基本上是目标 uri），SOME_ENCRYPTED_VALUE。

```
\r\n<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" >\r\n\r\n\r\n<html lang=\"en-US\">\r\n   <head id=\"Head1\"><meta http-equiv=\"Content-Type\" content=\"text/html;charset=ISO-8859-1\" /><link rel=\"Stylesheet\" type=\"text/css\" href=\"Public/Logon.css\" /><title>\r\n\tWindows Azure SQL Reporting\r\n</title></head>\r\n   <body >\r\n      <form name=\"Logon\" method=\"post\" action=\"logon.aspx?ReturnUrl=URL_TO_THE_XML_FILE_IN_REPORTING_SERVER\" id=\"Logon\">\r\n<input type=\"hidden\" name=\"__VIEWSTATE\" id=\"__VIEWSTATE\" value=\"/SOME_ENCRYPTED_VALUE\" />\r\n\r\n<input type=\"hidden\" name=\"__EVENTVALIDATION\" id=\"__EVENTVALIDATION\" value=\"/SOME_ENCRYPTED_VALUE\" />\r\n\r\n        <h1 id=\"Title\"><span id=\"LblTitleContent\">Windows Azure</span></h1>\r\n        <hr />\r\n        <div class=\"ClsIntro\">\r\n            <span id=\"LblIntro\"></span>\r\n        </div>\r\n        <div class=\"ClsInput\">\r\n            <div>\r\n                <label for=\"TxtUser\" id=\"LblUser\">User name</label>\r\n            </div>\r\n            <div>\r\n                <input name=\"TxtUser\" type=\"text\" id=\"TxtUser\" tabindex=\"1\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"ClsInput\">\r\n            <div>\r\n                <label for=\"TxtPwd\" id=\"LblPwd\">Password</label>\r\n            </div>\r\n            <div>\r\n                <input name=\"TxtPwd\" type=\"password\" id=\"TxtPwd\" tabindex=\"2\" />\r\n            </div>\r\n        </div>\r\n        <div class=\"ClsSignIn\">\r\n            <input type=\"submit\" name=\"BtnLogon\" value=\"Sign in\" id=\"BtnLogon\" tabindex=\"4\" /><input type=\"image\" name=\"BtnLogonArrow\" id=\"BtnLogonArrow\" tabindex=\"5\" src=\"Public/WhiteRightArrow.png\" alt=\"Sign in\" align=\"baseline\" border=\"0\" />\r\n        </div>\r\n        <div class=\"ClsErrMsg\">\r\n            <span id=\"lblMessage\"></span>\r\n        </div>\r\n        <hr />\r\n      </form>\r\n   </body>\r\n</html> 
```

***问题***

1.  即使传递了网络凭据，为什么我们会收到带有登录页面的 HTML 响应？

2.  什么可能导致此行中的异常？- _xmlDocument = XElement.Load(streamResult)

3.  我们从 C# 代码访问 Azure 托管的 XML 的方式是否遗漏了什么？

4.  我们是否应该根据您从我们问题描述的前四行中所理解的内容来查看服务器端以更正直接 XML 文件的 URL？

提前致谢，

特里洛克兰根。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T05:52:23.883

获取 html 可能是由于在遇到异常时运行到服务器上的通用错误处理页面而导致的。

因此，请确保在所有情况下都返回 xml，即使出现异常也是如此。

异常可能是由安全问题或服务器上的任何其他错误引起的。

确保服务器设置的内容类型正确。

如果文件存储在 blob-storage 中：[在 blob 存储资源管理器中标记文件的 mime 类型](http://blogs.solidq.com/pdoshi/post.aspx?id=4&title=hosting%20a%20static%20website%20in%20azure%20blobs%20-%20setting%20content%20type%20%5B%20mime%20type%20%5D%20of%20the%20blob%20content)

如果文件是静态内容：[使用 mimeMap 元素在 web.config 中添加 mime 类型](http://blogs.iis.net/bills/archive/2008/03/25/how-to-add-mime-types-with-iis7-web-config.aspx)：

```
<configuration>

    <system.webServer>

        <staticContent>
            <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
            <mimeMap fileExtension=".m4v" mimeType="video/m4v" />
        </staticContent>

    </system.webServer>

</configuration> 
```

# java - 用于冒号分隔标签的 XML 解析器？

> ID：13623505
> 
> 赞同：0
> 
> 时间：2012-11-29T10:18:55.123
> 
> 标签：java, xml, parsing

如果我有冒号分隔的 xml 标签，例如`<my:tag>`，哪个库提供简单的解析和值操作？我需要寻找什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:36:58.817

`my`冒号之前是一个*命名空间前缀*，并且应该`xmlns:my`在同一元素或其封闭元素之一上存在一个属性，该属性将*命名空间 URI*与前缀相关联。所有标准 Java XML 技术都支持命名空间（JRE 提供的 SAX、DOM 和 StAX 以及 JDOM 和 XOM 等第三方库），您需要记住的是，您通常使用命名空间 URI 来引用任何 API 中的元素和本地名称（冒号后的位），而不是具体的前缀。

# java - 配置代理时 Spring 无法连接到本地 Web 服务

> ID：13623508
> 
> 赞同：2
> 
> 时间：2012-11-29T10:19:08.343
> 
> 标签：java, web-services, spring, http, jax-ws

我有一个应用程序，它使用 Spring 通过 JaxWsPortProxyFactoryBean 类与一些 Web 服务通信。一切正常。

我的应用程序的另一部分需要与 Internet 通信（对于一些 RSS 源），所以我需要配置我的代理设置。为此，我将以下系统属性添加到我的 Tomcat 服务器：

```
-Dhttp.proxyHost=webproxy -Dhttp.proxyPort=80 -Dhttp.proxyUser=myUser -Dhttp.proxyPassword=myPass 
```

我的 RSS 提要现在可以工作（所以代理设置都正确），但我的 Web 服务调用失败并出现以下问题：

```
org.springframework.remoting.RemoteAccessException: Could not access remote service at [null]; nested exception is com.sun.xml.internal.ws.client.ClientTransportException: The server sent HTTP status code 403: Forbidden
at org.springframework.remoting.jaxws.JaxWsPortClientInterceptor.doInvoke(JaxWsPortClientInterceptor.java:504)
at org.springframework.remoting.jaxws.JaxWsPortClientInterceptor.invoke(JaxWsPortClientInterceptor.java:481)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202) 
```

看起来我的应用程序正在尝试通过代理进行 web 服务调用（这是本地系统），因此尝试为 web 服务域设置 nonProxyHosts 属性（注意 - 似乎与文档中关于此的错字有些混淆- 因此有 2 个值）：

```
-Dhttp.noProxyHosts="localhost|myDomain.co.uk" -Dhttp.nonProxyHosts="localhost|myDomain.co.uk" 
```

但是，我的 Web 服务调用仍然出现 403 Forbidden 异常。

任何建议，因为我对为什么 http.noProxyHosts/.nonProxyHosts 似乎没有被应用感到有些困惑？

仅供参考 - 我正在使用 Spring 3.1.0.RELEASE 和 Tomcat 6.0.32

# python - selenium：带有href点击行为的标签错误

> ID：13623513
> 
> 赞同：0
> 
> 时间：2012-11-29T10:19:24.147
> 
> 标签：python, selenium

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:28:20.613

正如上述用户所评论的......因为JS与超链接上的点击事件挂钩。

然后建议直接触发 JavaScript 事件，而不是关注超链接上的点击事件。

从您评论的上述网址中，我采用了以下元素

```
<a title="" onmousedown="MI.Bos('btnVaryEntrance1')" onclick="vary('yilanyeh','叶怡兰');" href="javascript:void(0)"> 
```

它有一个 JS 函数***vary('yilanyeh','叶怡兰')***挂钩 Click 事件......所以我的代码看起来像这样（C# 代码）

```
 IWebDriver driver = new InternetExplorerDriver();
        driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10));
        driver.Navigate().GoToUrl("http://t.qq.com/yilanyeh");

        IJavaScriptExecutor jr = (IJavaScriptExecutor)driver;

        jr.ExecuteScript("vary('yilanyeh','叶怡兰');"); 
```

# java - 抽象构造函数 java

> ID：13623522
> 
> 赞同：2
> 
> 时间：2012-11-29T10:19:55.323
> 
> 标签：java, inheritance, constructor, abstract

我如何从第二个和第三个获取子构造函数？由于公共摘要首先不起作用？

```
public abstract class First {

    public Point position;

    public First() {}  //how do i make this constructor like an abstract?
                      // so that it will go get Second constructor or Third
}

public class Second extends First {

    public Second (Point x) {
        position = x;
    }
}

public class Third extends First {

    public Third(Point x) {
        position = x;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:23:16.017

Java 不允许您从抽象类中访问从抽象类派生的具体类的构造函数。但是，您可以从具体类调用超类（抽象类）构造函数。

```
public abstract class First{

    public Point position;

    public Plant(Point x) {
      this.position = x;
    }
}

public class Second extends First {

    public Second(Point x) {
        super(x);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:22:43.160

创建`Second`或 `Third`对象时，程序员必须使用为该类定义的构造函数之一。

`First`构造函数将被隐式调用，如果您不使用`super`. 无需将其抽象化，您可以将其留空或不定义它（Java 将假定没有参数且不执行任何操作的隐式默认构造函数）。

# ruby - 为什么使用 Prawn 的 bounding_box 后原点会改变？

> ID：13623523
> 
> 赞同：0
> 
> 时间：2012-11-29T10:19:55.437
> 
> 标签：ruby, prawn

这段代码产生了意想不到的结果：

```
require 'prawn'
Prawn::Document.generate("test.pdf") do
  move_down 50
  bounding_box [0, cursor], width: bounds.width do
    20.times do
      bounding_box [0,0], width: bounds.width, height: 50 do
        stroke_bounds
      end
    end
  end
end 
```

边界框是堆叠的，彼此下方一个，即使它们的坐标是 [0,0]。我似乎不明白为什么会发生这种情况......它们不应该重叠吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:32:49.910

我想到了：

大虾的坐标系从左下角开始，我知道，但在这个例子中我忽略了它。

当这 20 个框的第一个渲染时，周围的 bounding_box 被放大以适应它。因此，0,0 坐标现在指向包含边界框的左下角，恰好位于第一个框的底部。

然后下一个框渲染的时候，0,0还在左下角，所以渲染在第一个框的底部，以此类推……

注意：我实际上是在框到达页面末尾时尝试开始一个新页面，并且为此发布了[另一个问题](https://stackoverflow.com/questions/13624463/start-new-page-automatically-when-using-stacked-bounding-boxes-in-prawn)。

# javascript - jquery：两个数字的百分比（第 2 部分）

> ID：13623525
> 
> 赞同：0
> 
> 时间：2012-11-29T10:19:57.143
> 
> 标签：javascript, jquery, html

[这是上一个成功主题jquery](https://stackoverflow.com/questions/13620439/jquery-percentage-of-two-numbers)的延续 ：两个数字的百分比

首先，我要感谢您对上一篇文章的及时支持。现在我想让我的脚本更复杂一点。我想实现以下目标：如果我插入 PRICE1 和 PRICE2 以在它们之间设置 RATE，那么我可以将 RATE 更改为其他值，并将 PRICE2 更改为根据 RATE 值的对应值。

我的计算脚本几乎是正确的，但是我对 JQuery 的了解不足让我问你我哪里做错了。谢谢您的支持！

```
<script src="libs/jquery.min.js"></script>

<script type="text/javascript">
$(function() {
    $("#PRICE1, #PRICE2").change(function() {
    var result = parseFloat(parseFloat($("#PRICE1").val(), 10) - parseFloat($("#PRICE1").val(), 10))/ parseFloat($("#PRICE2").val(), 10) * 100;
    $('#RATE').val(result||'');
  })
  else {
   $("#PRICE1, #RATE").change(function() {
    var result = parseFloat(parseFloat($("#PRICE1").val(), 10) *  parseFloat($("#RATE").val(), 10))/ 100 + parseFloat($("#PRICE1").val(), 10);
    $('#PRICE2').val(result||'');
  })}
});
</script> 
```

编辑：

几乎可以正常工作的代码可以帮助其他人：

```
$(document).ready(function(){
$("#priceOne, #priceTwo").change(function() {
  var priceOne = parseFloat($("#priceOne").val());
  var priceTwo = parseFloat($("#priceTwo").val());
  $('#Rate').val((priceTwo - priceOne) / priceOne * 100); // Set the rate
});
// If price one or the rate is changed, adjust price two.
$("#priceOne, #RATE").change(function() {
  var priceOne = parseFloat($("#priceOne").val());
  var rate = parseFloat($("#Rate").val());
  $('#priceTwo').val((priceOne * rate)/ 100 + priceOne);
});
}) 
```

谢谢所有帮助我的人！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:26:35.840

有`else`和没有匹配`if`。我不确定您要达到什么目的，但需要检查一些条件。

我将尝试编写您需要的代码。但我要重命名你的变量，不仅因为大写字母很难输入，而且除非它是常量或宏，否则不应使用它们。

```
// In ready() callback
// @NOTE - This does NO error checking for division by 0 or other NaN operations.

// If price two is changed, adjust the rate.
$("#priceTwo").change(function() {
  var priceOne = parseFloat($("#priceOne").val());
  var priceTwo = parseFloat($(this).val());
  $("#rate").val(priceTwo / priceOne); // Set the rate
});
// If price one or the rate is changed, adjust price two.
$("#rate #priceOne").change(function() {
  var priceOne = parseFloat($("#priceOne").val());
  var rate = parseFloat($("#rate").val());
  $("#priceTwo").val(priceOne * rate);
}); 
```

您的代码有几点需要注意：

*   `parseFloat`不接受*基数*参数，`10`您传递的参数将被忽略。
*   `parseFloat(parseFloat(...`毫无意义，我不确定你为什么这样做。
*   不要使用 jQuery 在同一个范围内多次选择同一个元素。保存价值并重新使用它 - 为自己节省一些周期。
*   正如我所提到的，除非它们是某种永远不应该改变的*常数，否则不要用所有大写字母命名变量，保持简洁的风格习惯是件好事。*

# java - vfs2 DefaultFileMonitor 线程提前终止

> ID：13623537
> 
> 赞同：1
> 
> 时间：2012-11-29T10:20:26.957
> 
> 标签：java, multithreading, vfs, apache-commons-vfs, file-monitoring

我无法保持 vfs2 的 DefaultFileMonitor 线程处于活动状态。在监视器对象启动后，执行的主线程会优雅地终止。我想知道为什么这个对象不会被“监控”，而是直接走到最后。（以日志消息“exitting....”结尾）

```
public static void main(String[] args) {
    try {
        Options options = new Options();

        options.addOption("b", true, "path to the build file");
        options.addOption("d", true, "directory to watch");
        CommandLineParser parser = new PosixParser();
        CommandLine cmd = parser.parse(options, args);

        String dir = cmd.getOptionValue("d");
        String buildFile = cmd.getOptionValue("b");

        if(dir == null) {
            logger.error("No directory specified," +
                          " use [-d 'name_of_dir'] to specify one");
            return;
        }

        if(buildFile == null) {
            logger.error("No build file path specified," +
                          " use [-b 'path_to_build_file'] to specify one");
            return;
        }

        FileSystemManager fsManager = VFS.getManager();
        FileObject listendir = fsManager.resolveFile(dir);

        DefaultFileMonitor fm = new DefaultFileMonitor(new CustomFileListener(buildFile));
        fm.setRecursive(true);
        fm.addFile(listendir);
        fm.start();
    }catch(Exception e){
        logger.error("Exception ", e);
    }
    logger.info("exitting....");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:34:17.607

`DefaultFileMonitor`像守护线程一样工作，即即使监控线程正在运行，虚拟机也会终止。一种解决方法是使用具有无限循环或其他类型的循环的非守护线程，它在您的控制之下。

# javascript - 获取点击的 li id

> ID：13623538
> 
> 赞同：0
> 
> 时间：2012-11-29T10:20:39.167
> 
> 标签：javascript, jquery, html, nested-sortable

我有以下列表：

```
<ol class="sortable ui-sortable">
    <li id="list_1608"><div>One</div></li>
    <li id="list_1609"><div>Two</div></li>
    <li id="list_1610"><div>Three</div></li>
</ol> 
```

我想得到`id`任何`li`被点击的。我尝试了以下代码，但没有收到任何警报。

```
$("li").click(function() {
    var myid = $(this).attr("id");
    alert(myid);
}); 
```

我将它与nestedSortable jQuery 插件结合使用。

我哪里错了？

**好的更多信息，列表项是在加载 dom 后添加的。**

如果项目已加载以开始它确实有效，道歉。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T10:22:57.813

您的代码在[**这里**](http://jsfiddle.net/rajaadil/MqEDF/)工作，您可能需要将其放入`document.ready()`或需要[**添加 jQuery 文件**](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)。在这里使用`this.id`代替`$(this).attr("id")`是更好的选择，因为它是 javascript 并且可以为您带来性能优势。

```
$(document).ready(function(){

     $("li").click(function() {
        //var myid = $(this).attr("id");
        alert(this.id);
     });

}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:22:39.253

您可以通过以下方式获取 id：

```
this.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:25:35.593

这可能会有所帮助。

```
$('ol').click(function(event){
if(event.target.tagName == 'li'){alert(this.id);}
if($(event.target).parent('li').length > 0){$(this).parent().attr('id');}
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:29:17.980

首先检查您是否在`head`标签内正确加载了jquery库

```
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript">
$(function(){
     $("li").click(function() {
        var myid = $(this).attr("id");
        alert(myid);
     });
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T03:48:00.060

仅供日后参考。虽然上面的答案对于静态数据是正确的，但我忘了提到元素是在 DOM 加载后添加的。解决方案实际上是..

```
$("li").live("click", function({
    alert(this.id);
 }); 
```

# c# - 如何在 ASP.NET 中使用带有图标和格式的 JQuery Datepicker

> ID：13623539
> 
> 赞同：3
> 
> 时间：2012-11-29T10:20:44.033
> 
> 标签：c#, javascript, jquery, asp.net, jquery-ui-datepicker

我想为我的文本框使用 jQuery。我想使用带有格式`yyyy-mm-dd`和图标的 Datepicker。

```
<script>
    $( "#txtVon" ).datepicker({
        showOn: "button",
        buttonImage: "images/calendar.gif",
        buttonImageOnly: true     
    });
</script>

<asp:TextBox ID="txtVon" runat="server"></asp:TextBox> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:34:23.160

```
<script>

            $(".txtVon").datepicker({
            showOn: "button",
            buttonImage: "images/calendar.gif",
            buttonImageOnly: true,
            dateFormat: "yy-mm-dd"
            });

</script>
<asp:TextBox ID="txtVon" runat="server" class="txtVon"></asp:TextBox> 
```

正如[@Curt](https://stackoverflow.com/a/13623602/370103)所建议的，使用类名来绑定日期选择器。另外，请确保您的图像存在于上述路径中。您可以用于所需结果的日期格式是`"yy-mm-dd"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:24:27.250

在使用 ASP.NET WebForms 时，您最好在引用元素时使用**类而不是 ID**，因为呈现的 ID 会有所不同：

```
<script>

            $(".txtVon").datepicker({
            showOn: "button",
            buttonImage: "images/calendar.gif",
            buttonImageOnly: true
            });

</script>
<asp:TextBox ID="txtVon" runat="server" class="txtVon"></asp:TextBox> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T10:27:42.133

尝试

```
$.datepicker.formatDate('yyyy-mm-dd', new Date(2012, 1 - 1, 26)); 
```

我认为[这里](http://jqueryui.com/datepicker/#date-formats)和[这里](http://jqueryui.com/datepicker/#icon-trigger)的链接有帮助

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T10:26:32.613

尝试：

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#txtVon.ClientID").datepicker({ showOn: 'button', buttonImageOnly: true, buttonImage: 'images/ui-icon-calendar.png' });
  });
</script> 
```

不要忘记包含`js`文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T10:31:32.380

确保以下文件可供参考。

```
jquery-1.5.1.min.js
jquery.ui.core.js
jquery.ui.widget.js
jquery.ui.datepicker.js
jquery-ui-1.8.14.custom.css 
```

HTML 代码

```
<script>
$( "#txtVon" ).datepicker({
    showOn: "button",
    buttonImage: "images/calendar.gif",
    buttonImageOnly: true,
    dateFormat: 'yyyy-mm-dd'
});
</script>
Date: <asp:TextBox ID="txtVon" runat="server" CssClass="txtVon" /> 
```

# android - Android：登录活动成功后使图标可见

> ID：13623549
> 
> 赞同：0
> 
> 时间：2012-11-29T10:21:18.853
> 
> 标签：android, android-activity

我有两个活动，其中一个是登录活动，当登录成功时，我必须使图标在第二个活动中可见最初我使图标在第二个活动的布局文件中不可见..下面是我的代码

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            setContentView(R.layout.fyelogin);                    
            etPassword = (EditText)findViewById(R.id.password);
            btnLogin = (Button)findViewById(R.id.login_button);
            btnCancel = (Button)findViewById(R.id.cancel_button);
            lblResult = (TextView)findViewById(R.id.result);

            final ImageView details = (ImageView)findViewById(R.id.red); 

            btnLogin.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {

                    String password = etPassword.getText().toString();

                    if(password.equals("guest")){
                        lblResult.setText("password successful.");

              // details.setVisibility(View.VISIBLE);

                    } else {
                        lblResult.setText("password doesn't match.");

                    }                                      
                    finish();}}); 
```

我很震惊，我怎样才能调用第二个活动并使登录活动中的图标可见..任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:28:07.103

在您将图标放入其中的活动中。（我称为act1）

创建一个持有者类（parameters.java）把它放在类中

静态布尔 isIconvisible;

在您的登录活动中

```
if(password.equals("guest")){
   lblResult.setText("password successful.");
   parameters.isIconvisible="false"  // change the value of it
} 
```

act1 onCreate

```
if(parameters.isIconvisible==false){
    details.setVisibility(View.GONE);
}
else
{
    details.setVisibility(View.GONE);
} 
```

![在此处输入图像描述](../Images/56f93c58c2ed05c2ba83328d614d73b4.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:31:08.507

布尔图标状态=假；

如果密码成功设置一个布尔变量

```
iconStatus=true; 
```

在意图中传递一个值，例如

```
Intent intenet=new Intenet(context,SecondActivity.class);
intent.putExtra("icon_status",iconStatus); 
```

在第二个活动 onCreate

```
boolean iconStatus=false;

Bundle bundle=getIntent().getExtras();

if(bundle!=null)
{
iconStatus=true;
}

if(iconStatus)
{
    imageView.setVisibility(View.visible);
} 
```

# installation - 安装程序中可点击的横幅/标题图像

> ID：13623550
> 
> 赞同：5
> 
> 时间：2012-11-29T10:21:22.560
> 
> 标签：installation, inno-setup, nsis

我需要使用 NSIS 或 InnoSetup 制作 Windows 安装程序。客户希望在安装程序对话框/向导页面中显示图像，并且该图像需要可单击，例如单击时打开浏览器窗口。这可能吗？如果是，是否也可以使用动画 GIF？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T11:43:00.360

要使欢迎页面的左侧图像*可点击*，您可以使用以下命令：

```
[Code]
procedure OnBannerClick(Sender: TObject);
var
  ErrorCode: Integer;
begin
  ShellExec('', 'http://www.stackoverflow.com', '', '', SW_SHOW, ewNoWait, 
    ErrorCode);
end;

procedure InitializeWizard;
begin
  WizardForm.WizardBitmapImage.Cursor := crHand;
  WizardForm.WizardBitmapImage.OnClick := @OnBannerClick;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:08:31.583

....对于 NSIS 也是如此：

```
!include MUI2.nsh
!define MUI_PAGE_CUSTOMFUNCTION_SHOW MakeClickableWizardImage
!insertmacro MUI_PAGE_WELCOME
!insertmacro MUI_PAGE_INSTFILES
!define MUI_PAGE_CUSTOMFUNCTION_SHOW MakeClickableWizardImage
!insertmacro MUI_PAGE_FINISH
!insertmacro MUI_LANGUAGE English

Function OnWizardClick
ExecShell "" "http://example.com"
FunctionEnd

Function MakeClickableWizardImage
StrCpy $0 $mui.WelcomePage.Image
${If} $mui.FinishPage.Image <> 0
    StrCpy $0 $mui.FinishPage.Image
${EndIf}
${NSD_OnClick} $0 OnWizardClick
FunctionEnd 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T06:43:45.223

如果你想实现一个 gif 图像，你可以使用这个扩展：

[GifCTRL 2.1](http://restools.hanzify.org/inno/gifctrl/inno_gifctrl_v2.1.zip)

它是中文的，但示例 Inno 脚本显示了您需要的一切。

# apache - Symfony2 Sonata 管理员使 apache 在 Windows 7 上崩溃

> ID：13623552
> 
> 赞同：0
> 
> 时间：2012-11-29T10:21:24.493
> 
> 标签：apache, symfony, windows-7, sonata-admin

我正在学习 Symfony 并安装了**Sonata Admin Bundle**。打开 /admin/login/ 第一次打开后，但重新加载**apache 后出现故障**。所以每次页面重新加载后，我都需要重新启动 apache。

我认为这是我的代码错误，所以在我的本地安装了工作站点，但遇到了同样的问题。

不知道什么信息对提出问题很重要，请告诉我，我会更新问题。

**更新：**

我得到**perl**错误：

```
perl: warning: Setting locale failed.
perl: warning: Please check that your locale settings:
    LC_ALL = (unset),
    LANG = (unset)
    are supported and installed on your system.
perl: warning: Falling back to the standard locale ("C"). 
```

可以找到*Linux*的解决方案，需要运行以下命令：

```
export LANGUAGE=en_US.UTF-8
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8
locale-gen en_US.UTF-8
apt-get install locales
dpkg-reconfigure locales 
```

但对于**Windows 7**没有。

StackOverflow 上还有一些解决方案： [How to fix a locale setting warning from Perl?](https://stackoverflow.com/questions/2499794/how-can-i-fix-a-locale-warning-from-perl)

**解决方案**

问题出在 APC 扩展中，您可以在您的开发服务器上禁用它，因为它只是 cahce 的扩展。没有它对我有用。

# c# - winrt中的并行循环

> ID：13623554
> 
> 赞同：2
> 
> 时间：2012-11-29T10:21:28.067
> 
> 标签：c#, windows-runtime, task-parallel-library, winrt-async

```
for (int j = 0; j < 10; j++)
{
    for (long i = 0; i < bound / 10; i++)
    {
        routeLine.Locations.Add(new Location
        {
            Latitude = ((BingMapsRESTService.Route)(r.ResourceSets[0].Resources[0])).RoutePath.Line.Coordinates[k][0],
            Longitude = ((BingMapsRESTService.Route)(r.ResourceSets[0].Resources[0])).RoutePath.Line.Coordinates[k][1]
        });

        k++;
    }

    await Task.Delay(TimeSpan.FromMilliseconds(1));

    Temp("Drawing Route (" + ((j * 10)/2).ToString() + "%)"); // to show progress,Temp sets text property of a textbox
} 
```

Bound 的值在 60​​00 到 10000 之间。这个循环需要时间并且会挂起 UI，这就是我将循环分成 10 个部分并使用 task.delay 的原因。是否可以并行运行所有十个循环？我不能使用线程，因为我不能在新线程中创建 Location 类的对象。它会引发任务被另一个线程封送的错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:23:58.967

是的，有可能; 您可以使用 TPL 和`Parallel.ForEach`：

[TPL](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/dd460720.aspx)

# java - JSR 303 / ConstraintValidatorContext：参数化错误消息

> ID：13623556
> 
> 赞同：3
> 
> 时间：2012-11-29T10:21:34.337
> 
> 标签：java, validation, bean-validation

如果我有一个`ConstraintValidatorContext`并且我正在构建一个`ConstraintViolationContextBuilder`using `buildConstraintViolationWithTemplate(String messageTemplate)`，是否有可能传递自定义参数值？

相应的属性文件看起来像这样：

```
Foobar.invalidValue.message=Invalid value. Valid values are {VALID_VALUES} 
```

然后我想以编程方式设置`{VALID_VALUES}`.

你有什么想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T23:57:21.257

您只能在消息模板中引用相关约束注释的属性，例如，对于具有属性的约束`min`和`max`：

```
size must be between {min} and {max} 
```

因此，您可以将有效值指定为注释属性。

如果您使用 Hibernate Validator 作为 Bean Validation 提供程序，您可能会实现一个自定义[ResourceBundleLocator](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html/validator-bootstrapping.html#section-resource-bundle-locator)，它返回带有您的值的键的包：

```
public class MyResourceBundleLocator implements ResourceBundleLocator {

    public ResourceBundle getResourceBundle(Locale locale) {
        //return a bundle with keys for your values, e.g. set dynamically
    }
} 
```

然后在获取验证器时设置定位器：

```
Validator validator Validation.byProvider(HibernateValidator.class)
    .configure()
    .messageInterpolator(
        new ResourceBundleMessageInterpolator(
            new MyResourceBundleLocator() ) )
    .buildValidatorFactory()
    .getValidator(); 
```

或者，您可以自己格式化和准备消息并将其传递给`buildConstraintViolationWithTemplate()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T19:20:38.507

我找到了一个允许使用参数化错误消息自定义约束注释的解决方案：有关更多详细信息，请参阅此问题：[javax.validation.constraints.Pattern 注释的参数化错误消息？](https://stackoverflow.com/questions/25651605/parameterized-error-messages-for-javax-validation-constraints-pattern-annotation/25673431#25673431)

# ruby-on-rails - PhoneGap Mobile Rails 身份验证（设计？从头开始身份验证？）

> ID：13623562
> 
> 赞同：3
> 
> 时间：2012-11-29T10:21:49.160
> 
> 标签：ruby-on-rails, ruby, cordova, devise

我有一个带有 Rails 后端的 PhoneGap 应用程序。我试图弄清楚使用 json 从移动应用程序验证用户的最佳方法是什么。

我目前正在使用设计，*但我不必使用它*。修改设计以使用 Phonegap 中的移动应用程序的最简单方法是什么？

我知道有很多关于这个的帖子......但是，其中一些已经过时或者看起来像非常复杂的黑客。希望可以从一些久经考验的项目或教程中获得更多最新信息。

我发现的一篇文章也建议使用 jsonp，但它似乎也是一个非常复杂的 hack。你可以在这里找到它：http: [//vimeo.com/18763953](http://vimeo.com/18763953)

我还想知道我是否会更好地从头开始进行身份验证，如本 Railscast 中所述：[http ://railscasts.com/episodes/250-authentication-from-scratch](http://railscasts.com/episodes/250-authentication-from-scratch)

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-29T18:25:54.493

您应该覆盖设计的[会话](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb)和[注册](https://github.com/plataformatec/devise/blob/master/app/controllers/devise/registrations_controller.rb)控制器。我只会向您展示如何覆盖会话控制器：

首先，转到您的 User 模型并添加 Token Authenticatable 模块。像这样的东西：

```
devise :token_authenticatable

before_save :ensure_authentication_token 
```

然后编辑你的 devise.rb 文件来配置那个模块：

```
# You can skip storage for :http_auth and :token_auth by adding those symbols to the array below.
config.skip_session_storage = [:token_auth]

# Defines name of the authentication token params key
config.token_authentication_key = :auth_token 
```

现在编辑您的路线并指向您的新控制器：

```
devise_for :users, :controllers => { :registrations => 'registrations', :sessions => 'sessions' } 
```

然后像这样创建你的控制器：

```
class SessionsController < Devise::SessionsController
  def create
    respond_to do |format|
      format.html {
        super
      }
      format.json {
        build_resource
        user = User.find_for_database_authentication(:email => params[:user][:email])
        return invalid_login_attempt unless resource

        if user.valid_password?(params[:user][:password])
          render :json => { :auth_token => user.authentication_token }, success: true, status: :created
        else
          invalid_login_attempt
        end
      }
    end
  end

  def destroy
    respond_to do |format|
      format.html {
        super
      }
      format.json {
        user = User.find_by_authentication_token(params[:auth_token])
        if user
          user.reset_authentication_token!
          render :json => { :message => 'Session deleted.' }, :success => true, :status => 204
        else
          render :json => { :message => 'Invalid token.' }, :status => 404
        end
      }
    end
  end

  protected
  def invalid_login_attempt
    warden.custom_failure!
    render json: { success: false, message: 'Error with your login or password' }, status: 401
  end
end 
```

Devise[有一个关于此的页面](https://github.com/plataformatec/devise/wiki/How-To%3a-Simple-Token-Authentication-Example)，但它只指向一些已经过时的指南。但也许它会帮助你。

# php - Symfony2 需要 POST 请求，而是接收 GET

> ID：13623563
> 
> 赞同：0
> 
> 时间：2012-11-29T10:21:51.060
> 
> 标签：php, http, search, symfony, zend-search-lucene

我正在尝试使用干净的 URL 实现搜索模块。类似于 www.website.com/search/ ***searchterm***。我已经用 EWZSearchBundle 创建了一个可搜索的索引，因此不涉及数据库，因此不需要实体。

```
public function searchAction(Request $request)
{
    $form = $this->createFormBuilder()
        ->add('query', 'text')
        ->getForm();

    if('POST' === $request->getMethod()){
        $form->bind($request);
        if ($form->isValid()) {
            return $this->redirect($this->generateUrl('search_process', array('query' => $request->query->get('query'))));
        }

    }

    return array(
        'form'   => $form->createView(),
    );
} 
```

我创建了一个没有实体的简单表单，并将表单操作发送给它自己。如果它是 POST 请求，我会验证表单并使用干净的 URL (www.website.com/search/searchterm) 将其发送到搜索***过程***。

```
public function searchProcessAction($query)
{
    $search = $this->get('ewz_search.lucene');
    $results = $search->find($query);

    return array(
        'results'   => $results,
    );
} 
```

在搜索过程中，我从干净的 URL 中获取搜索词，并在我的索引中搜索它并返回结果。这应该是一个非常简单的过程，只有一个问题。

因为我不需要使用实体，所以它永远不会变成 POST 请求，也永远不会进入`if('POST' === $request->getMethod())`.

我知道我的方式和额外的重定向，但我不知道如何保持一个干净的 URL 进行搜索。我愿意接受有关整个过程的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:44:49.453

一些想法：

*   根据经验，应该通过 GET 方法执行搜索操作：您没有创建任何内容，您只是在查询您的站点以获取一些结果；

*   尽管*干净*的 URL 很好，但搜索功能仍应利用良好的 ol' 查询语法 [ `http://path.to/search?q=termToSearchFor`]；这样查询字符串永远不会被缓存，并且您一定会始终获取更新的内容[无需指定缓存行为服务器端]；

*   如果您关心的是保护您的数据免受某些流量的影响，请考虑在表单中实施身份验证或 CSRF 令牌。

*   关于这个：

> 因为我不需要使用实体，所以它永远不会变成 POST 请求，也永远不会进入 if('POST' === $request->getMethod())，现在它变成了 GET 请求，它也破坏了我保持 URL 清洁的全部内容。

这是完全错误的：POST 请求与实体无关，它只是您在请求标头中指定的一种模式，以便向服务器询问特定行为。

如果您将 url 定义为 ，您的 url 仍将是“干净的” `/search/{query}`，并按如下方式更新您的操作：

```
public function searchAction($query){ ... } 
```

但正如我之前所说，查询语法非常适合搜索行为，不应该将 POST 用于此类任务。

关于 RESTful 原则的精明阅读 - [http://tomayko.com/writings/rest-to-my-wife](http://tomayko.com/writings/rest-to-my-wife)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:34:12.727

您必须使用 POST 方法提交表单。

在 HTML 中

```
<form action="YOUR ACTION" method ="post"> 
```

如果您想确保没有人会以其他方式（GET）访问此链接，请修改路由

```
rule_name:
  pattern: /search/{query}
  defaults: { _controller: AcmeBundle:Search:search }
  requirements:
    _method:  POST 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:23:09.963

我设法让它在不使用表单组件的情况下工作。我手动制作了表格，也接受了@moonwave99 建议的查询字符串格式。使用表单组件会给出更长的名称，例如 form[query] 和 form[_token]，它会在 URL 中发送该表单的 CSRF 令牌。手动制作表单可以更好地控制查询字符串格式的 URL。

**注意：**请注意，与此同时，它会从该特定表单中删除 CSRF 安全性。

感谢所有的答案。

# c# - 如何使用 callisto 库以编程方式打开设置魅力弹出窗口

> ID：13623566
> 
> 赞同：1
> 
> 时间：2012-11-29T10:22:06.080
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我在设置弹出窗口中实现了一个文件选择器。当我单击按钮时，文件选择器窗口打开，选择文件后它会返回应用程序屏幕，但文件选择器按钮所在的设置弹出窗口已关闭。我希望在文件选择期间和之后打开设置弹出窗口。基本上我想要这个设置弹出的 isLightDismissEnabled 属性，但我在 callisto.controls.SettingsFlyout 中找不到任何这样的属性。谁能告诉我如何设置 settinsg 魅力浮出物的 isLightDismissEnabled 属性，或者一般来说如何保持浮出物打开？

在我的 App.xaml.cs 中，我向主设置魅力弹出按钮添加了一个自定义弹出按钮，如下所示 -

```
 AppSettings.Current.AddCommand<AlarmSettingsPaneView>("Alarm", Callisto.Controls.SettingsFlyout.SettingsFlyoutWidth.Narrow); 
```

在我的 AlarmSettingsPaneView 中，我有这个组合选择更改功能，它启用了这个文件选择器。

```
private async void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {

        if ((sender as ComboBox).SelectedItem.ToString() == "Custom")
        {
            FileOpenPicker openPicker = new FileOpenPicker();
            openPicker.ViewMode = PickerViewMode.List;
            openPicker.SuggestedStartLocation = PickerLocationId.MusicLibrary;
            openPicker.FileTypeFilter.Add(".mp3");
            openPicker.FileTypeFilter.Add(".wma");

            StorageFile file = await openPicker.PickSingleFileAsync();
            if (file != null)
            {
                // Application now has read/write access to the picked file
                CustomSound.Text = file.Name;

            }
            else
            {
                CustomSound.Text = "Operation cancelled.";
            }
        }

    } 
```

那么，在选择我的文件后，如何保持此 AlarmSettingsPaneView 是一个自定义设置弹出窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:09:48.760

Callisto 中的 SettingsFlyout 是一个常规控件，在其实现中使用弹出窗口。由于此弹出窗口设置为可关闭且无法更改，因此您必须下载 Callisto 的源代码并自行更改该值。

您还可以呼吁其开发人员将该属性公开访问。从长远来看，这将是有益的。

# format - 从fortran中的数据文件中读取列

> ID：13623569
> 
> 赞同：5
> 
> 时间：2012-11-29T10:22:20.060
> 
> 标签：format, fortran

我编写了以下块以从外部数据文件中读取：

```
 open(unit=338,file='bounnodes.dat',form='formatted') 
      DO I=1,NQBOUN
         DO J=1,NUMBOUNNODES(I)
            read(338,2001) NODEBOUN(i,j)
            write(6,*) 'BOUNDARY NODES',  NODEBOUN(i,j)
         ENDDO
       ENDDO
     2001
     FORMAT(32I5) 
```

据我了解，这应该从`bounnodes.dat`. 但是，我在读取过程中遇到错误`end-of-file`，它会打印第一列。

我尝试使用相同的代码读取 32 x 2 数组，它读取第一列的 32 个元素，但输出`0s`下一列。

你能解释一下发生了什么吗？我的格式错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T11:28:35.187

Fortran 中的每个读取语句都会前进到下一条记录。这意味着普通文本文件中的新行。尝试这个：

```
 DO I=1,NQBOUN
     DO J=1,NUMBOUNNODES(I)
        read(338,2001,advance='no') NODEBOUN(i,j)
        write(*,*) 'BOUNDARY NODES',  NODEBOUN(i,j)
     ENDDO
     read(338,*)
   ENDDO 
```

其中 NQBOUN 是行数，NUMBOUNNODES(I) 是一行中的列数。（我有各种问题，什么是 32x2 与 2x32）

您可以使用隐含的 do 使其更短

```
 DO I=1,NQBOUN
        read(338,2001) ( NODEBOUN(i,j) , j=1,NUMBOUNNODES(I) )
        write(*,*) ( 'BOUNDARY NODES', NODEBOUN(i,j) , j=1,NUMBOUNNODES(I) )
   ENDDO 
```

甚至

```
 DO I=1,NQBOUN
        read(338,2001) NODEBOUN(i,:)
        write(*,*) 'BOUNDARY NODES',  NODEBOUN(i,1:NUMBOUNNODES(I))
   ENDDO 
```

所有这些都使用 Fortran 90 功能。

# delphi - 计算的现场运行总数

> ID：13623572
> 
> 赞同：1
> 
> 时间：2012-11-29T10:22:37.867
> 
> 标签：delphi

我用来计算计算字段的余额。但是当我连接dbgrid时。通过移动滚动计算是错误的。请寻求帮助

```
var
 Form1: TForm1;
 i : Integer;

procedure TForm1.FormShow(Sender: TObject);
 begin
 i := 0;
 DataSource1.DataSet := ADOTable1;
 DBGrid1.DataSource := DataSource1;
end;

 procedure TForm1.ADOTable1CalcFields(DataSet: TDataSet);
  begin
   i := (ADOTable1Debtor.AsInteger - ADOTable1creditor.AsInteger) + i;
   ADOTable1Total.AsInteger := i;
  end; 
```

现在运行应用程序并移动 dbgrid 列数（总数）中的滚动条将会改变。我想知道如何停止更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T21:30:59.770

The calculated fields is designed to **show value calculations at the row level** and is **not designed** to make aggregations (calculations based on a set of rows).

For example, the database layer will fire the `OnCalc` event in no particular order and every time is needed to obtain the value of the field (for display pruposes, for example), since that value is not stored and may (and usually do) depend on the values of other fields.

In a set of 10 rows, you can get it called for rows 1, 2, 3, 4, 5 and then in 1 again...

You can use it, for example, in a line_total column which is the product of `quantity` and `unit_price`, but you can't use it to show e.g. the `sum(line_total)` of all the lines, as I infer you're trying to do in the shown code.

**How to perform aggregations then?**

You may want to link your DataSet to a ClientDataSet, which have AggregateFields, in which you can perform calculations like `SUM(Quantity * Price)` on the entire row-set or sub-sets based on a Index.

To learn more about AggregateFields read [ClientDataSet Aggregates and GroupState](http://edn.embarcadero.com/article/29272) by Cary Jensen in EDN.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:49:46.053

你正在尝试的东西不起作用，因为任何滚动都会改变结果。使用 AdoDataset 代替以下命令文本

```
select ID, creditor, Debtor,(Select sum (Debtor-Creditor) from Table1 t where t.ID<=Table1.ID) as Total
from Table1 order by ID 
```

# android - 如何在android Sqlite中将所有记录从一个表复制到同一数据库中的另一个表

> ID：13623577
> 
> 赞同：0
> 
> 时间：2012-11-29T10:22:55.970
> 
> 标签：android, sqlite

我只想在同一个数据库中将表从 table1 复制到 table2。我四处冲浪，我遇到了一些错误。这是我的源代码：

我点击了这个链接：[复制表](https://stackoverflow.com/questions/3906921/how-to-efficiently-copy-row-data-from-one-table-to-another-in-sqlite-android)

```
public class SelectedCandidatesDB {

public static final String KEY_NAME1 = "name1";
public static final String KEY_NAME2 = "name2";
public static final String KEY_NAME3 = "name3";
public static final String KEY_NAME4 = "name4";
public static final String KEY_NAME5 = "name5";
public static final String KEY_ID = "_id";
private final Context mCtx;
private static final String TAG = "CountriesDbAdapter";
private DatabaseHelper mDbHelper;
private SQLiteDatabase mDb;

// Database Version
private static final int DATABASE_VERSION = 1;
// Database Name
private static final String DATABASE_NAME = "selectedcandidates.db";
// Contacts table name
private static final String TABLE_SELECTED_CAND = "selectedcandids";
private static final String TABLE_RECOUNT1 = "rec1";
private static final String TABLE_RECOUNT2 = "recountedsecond";
private static final String TABLE_RECOUNT3 = "recountedthird";

private static final String CREATE_SELECTED_CAND_TABLE = " CREATE TABLE if not exists "
        + TABLE_SELECTED_CAND
        + "("
        + KEY_ID
        + " integer PRIMARY KEY autoincrement,"
        + KEY_NAME1
        + " TEXT,"
        + KEY_NAME2
        + " TEXT,"
        + KEY_NAME3
        + " TEXT,"
        + KEY_NAME4
        + " TEXT," + KEY_NAME5 + " TEXT" + ")";

private static final String CREATE_SELECTED_CAND_RECOUNT1 = " CREATE TABLE if not exists "
        + TABLE_RECOUNT1
        + "("
        + KEY_ID
        + " integer PRIMARY KEY autoincrement,"
        + KEY_NAME1
        + " TEXT,"
        + KEY_NAME2
        + " TEXT,"
        + KEY_NAME3
        + " TEXT,"
        + KEY_NAME4
        + " TEXT," + KEY_NAME5 + " TEXT" + ")";
private static final String CREATE_SELECTED_CAND_RECOUNT2 = " CREATE TABLE if not exists "
        + TABLE_RECOUNT2
        + "("
        + KEY_ID
        + " integer PRIMARY KEY autoincrement,"
        + KEY_NAME1
        + " TEXT,"
        + KEY_NAME2
        + " TEXT,"
        + KEY_NAME3
        + " TEXT,"
        + KEY_NAME4
        + " TEXT," + KEY_NAME5 + " TEXT" + ")";
private static final String CREATE_SELECTED_CAND_RECOUNT3 = " CREATE TABLE if not exists "
        + TABLE_RECOUNT3
        + "("
        + KEY_ID
        + " integer PRIMARY KEY autoincrement,"
        + KEY_NAME1
        + " TEXT,"
        + KEY_NAME2
        + " TEXT,"
        + KEY_NAME3
        + " TEXT,"
        + KEY_NAME4
        + " TEXT," + KEY_NAME5 + " TEXT" + ")";

private static class DatabaseHelper extends SQLiteOpenHelper {

    DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {

        db.execSQL(CREATE_SELECTED_CAND_RECOUNT1);
        db.execSQL(CREATE_SELECTED_CAND_TABLE);

        Log.d("Selected Candidate DB ",
                "The Table recount 1 has been created :");
        db.execSQL(CREATE_SELECTED_CAND_RECOUNT2);
        db.execSQL(CREATE_SELECTED_CAND_RECOUNT3);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + CREATE_SELECTED_CAND_RECOUNT1);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_SELECTED_CAND);

        db.execSQL("DROP TABLE IF EXISTS " + CREATE_SELECTED_CAND_RECOUNT2);
        db.execSQL("DROP TABLE IF EXISTS " + CREATE_SELECTED_CAND_RECOUNT3);
        onCreate(db);
    }
}

public SelectedCandidatesDB(Context ctx) {
    this.mCtx = ctx;
}

public SelectedCandidatesDB open() throws SQLException {
    mDbHelper = new DatabaseHelper(mCtx);
    mDb = mDbHelper.getWritableDatabase();
    return this;
}

public void close() {
    if (mDbHelper != null) {
        mDbHelper.close();
    }
}

  // ************** 

    public void copyToRecount1() {

    mDb.execSQL(" INSERT INTO " + TABLE_RECOUNT1 + " SELECT * FROM "
            + TABLE_SELECTED_CAND);
} 
```

日志是：

```
 I/SqliteDatabaseCpp(12637): sqlite returned: error code = 1, msg = no
   such table: rec1, db=xxx   D/AndroidRuntime(12637): Shutting down VM 
   threadid=1: thread exiting with uncaught exception (group=0x40c501f8)
   E/AndroidRuntime(12637): 
```

* * *

```
 FATAL EXCEPTION: main 
   E/AndroidRuntime(12637): android.database.sqlite.SQLiteException: ***no such table: rec1: , while compiling: INSERT INTO rec1 SELECT * FROM selectedcandids***   
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)   
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:260)
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:84)
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteDatabase.executeSql(SQLiteDatabase.java:2028)
   E/AndroidRuntime(12637):     at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1968)
   E/AndroidRuntime(12637):     at com.dana.db.SelectedCandidatesDB.copyToRecount1(SelectedCandidatesDB.java:264)
   E/AndroidRuntime(12637):     at com.dana.votecount.VoteRecount$2$1.onClick(VoteRecount.java:91)
   E/AndroidRuntime(12637):     at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:167) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:31:22.357

错误说你没有表'rec1'。也许您稍后在创建数据库后添加了此表。卸载您的应用程序并再次运行。它将再次创建数据库和所有表。

# iphone - 在 iOS 中获取 UIViewController 类名

> ID：13623579
> 
> 赞同：12
> 
> 时间：2012-11-29T10:22:57.560
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我在 navigationController 堆栈上获取 viewControllers，如下所示。现在我需要检查顶部的控制器是否是已知的 vc 之一。如何获取 vc 类名以便进行比较？谢谢你。

```
NSArray *viewContrlls=[[self navController] viewControllers];
[viewContrlls lastObject] 
```

就像是，

```
if ([[viewContrlls lastObject] name] isEqualToString @"viewControllerName"){ 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-29T10:32:24.997

使用这个它可以帮助你

```
 NSString *CurrentSelectedCViewController = NSStringFromClass([[((UINavigationController *)viewController1) visibleViewController] class]); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-29T11:04:57.167

最常见的技术是使用`-isKindOfClass`：

```
if ([[viewContrells lastObject] isKindOfClass:MyViewController.class]]) {
    // ...
} 
```

使用`NSStringFromClass`比较字符串不是一个很好的解决方案，因为如果您重构视图控制器以重命名它，您的代码将会中断。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T10:33:20.120

```
if ([NSStringFromClass([[viewContrlls lastObject] class]) isEqualToString: @"Whatever"]){
} 
```

`-isKindOfClass`如果您更喜欢直接将实例与特定类进行比较，也可以使用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-03-10T11:42:06.203

斯威夫特版本：

```
static func getClassNameAsString(className: AnyObject) -> String {
    return _stdlib_getDemangledTypeName(className).componentsSeparatedByString(".").last!
} 
```

# r - 基于R中的标准去重数据框？

> ID：13623581
> 
> 赞同：3
> 
> 时间：2012-11-29T10:23:04.263
> 
> 标签：r, sorting, duplicates

我有这个数据框：

```
 Name    Country Gender  Age
1   John      GB      M     25
2   Mark      US      M     35
3   Jane      0       0      0
4   Jane      US      F     30
5   Jane      US      F      0
6   Kate      GB      F     18 
```

如您所见，值“Jane”出现了 3 次。我想要做的是根据变量“名称”对列表进行重复数据删除，但是因为其余列对我很重要，所以我想保留其中包含最多信息的行。例如，如果我要在 excel 中对上述文件进行重复数据删除，它将保留“Jane”的第一个值并删除所有其他值。但是“Jane”的第一个值（第 3 行）在其他列中缺少信息。

因此，换句话说，我想按“名称”对列表进行重复数据删除，但添加一个标准以保留“年龄”列中具有不同于“0”的任何其他值的行。这样我会得到的结果是这样的：

```
 Name    Country Gender  Age
1   John       GB     M     25
2   Mark       US     M     35
3   Jane       US     F     30
4   Kate       GB     F     18 
```

我试过这个

```
file3 <- file1[!duplicated(file1$Name),] 
```

但与 excel 一样，它保留“Jane”的值，在其他列中没有可用信息。

如何根据 ZA 顺序中的“年龄”列对行进行排序，以便在对列表进行重复数据删除时，任何具有“0”的内容都将位于底部并被删除？

干杯

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:33:01.190

试试这个技巧

```
ind <- with(DF, 
        Country !=0 &
        Gender %in% c('F', 'M') &
        Age !=0)

DF[ind, ]
  Name Country Gender Age
1 John      GB      M  25
2 Mark      US      M  35
4 Jane      US      F  30
6 Kate      GB      F  18 
```

到目前为止，它运行良好并产生您想要的输出

**编辑**

```
 library(doBy)
    orderBy(~ -Age+Name, DF) # Sort decreasingly by Age and Name

  Name Country Gender Age
2 Mark      US      M  35
4 Jane      US      F  30
1 John      GB      M  25
6 Kate      GB      F  18
3 Jane       0      0   0
5 Jane      US      F   0 
```

或者简单地使用 Base 函数：

```
DF[order(DF$Age, DF$Name, decreasing = TRUE), ]
  Name Country Gender Age
2 Mark      US      M  35
4 Jane      US      F  30
1 John      GB      M  25
6 Kate      GB      F  18
3 Jane       0      0   0
5 Jane      US      F   0 
```

现在您可以通过索引满足您条件的正确行来进行选择，我真的认为第一部分比这两个最后更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:50:58.677

如果所有重复的行在 column 中的值为零`Age`，它将适用于`subset`：

```
# the data
file1 <- read.table(text="Name    Country Gender  Age
1   John      GB      M     25
2   Mark      US      M     35
3   Jane      0       0      0
4   Jane      US      F     30
5   Jane      US      F      0
6   Kate      GB      F     18", header = TRUE, stringsAsFactors = FALSE)

# create a subset of the data
subset(file1, Age > 0)

#   Name Country Gender Age
# 1 John      GB      M  25
# 2 Mark      US      M  35
# 4 Jane      US      F  30
# 6 Kate      GB      F  18 
```

# facebook - Facebook FB.login 对话框因错误而失败

> ID：13623582
> 
> 赞同：0
> 
> 时间：2012-11-29T10:23:13.660
> 
> 标签：facebook, login

```
New to Facebook apps, developing a test app using JavaScript: 
```

1.  我以应用管理员（普通用户）身份登录 Facebook。

2.  我到了 FB.getLoginStatus 返回 response.status === 'not_authorized' 的地步。

    1.  我打电话给 FB.login。
    2.  我收到一个弹出窗口说“发生错误。请稍后再试。”

    3.  FB.login 使用 response.authResponse = null 回调。

    4.  控制台日志显示“LOG：找不到回调 1”。

我在所有浏览器中都遇到相同的错误...帮助？

```
Here is the relevant code - I replaced actual strings by ######:

<div id="fb-root"></div>

<script>

var init_status = 1;
var login_status = 1;
var signedRequest = ' ';

window.fbAsyncInit = function() {
  FB.init({
    appId      : '######', // App ID from the App Dashboard
    channelUrl : 'http://#####/channel.php', // Channel File for x-domain communication
    status     : true, // check the login status upon init?
    cookie     : true, // set sessions cookies to allow your server to access the session?
    xfbml      : false  // parse XFBML tags on this page?
  });
  getLoginStatus();
};

// Load the SDK Asynchronously:
(function(d){
  var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement('script'); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js";
  ref.parentNode.insertBefore(js, ref);
}(document));

call_proceed1_when_ready(); // wait for init_status > 1

function proceed1() {

  // Login the user and/or authenticate with app, if necessary:
  if (init_status > 2) {
    login ();
  } else {
    login_status = 2;
  }

  call_proceed2_when_ready(); // wait for login_status > 1

} //proceed1

function proceed2() {

  alert('DONE');

} //proceed2

////////////////
// FUNCTIONS: //
////////////////

function call_proceed1_when_ready () {
  if (init_status > 1) {
    proceed1();
  } else {
    setTimeout(call_proceed1_when_ready, 500); // 0.5 second
  }
}

function call_proceed2_when_ready () {
  if (login_status > 1) {
    proceed2();
  } else {
    setTimeout(call_proceed2_when_ready, 500); // 0.5 second
  }
}

function getLoginStatus() {
  FB.getLoginStatus(function(response) {
    if (response.status === 'connected') {
      signedRequest = response.authResponse.signedRequest;
      init_status = 2;
    } else if (response.status === 'not_authorized') {
      init_status = 3;
    } else {
      init_status = 4;
    }
  });
}

function login() {
  FB.login(function(response) {
    if (response.authResponse) {
      login_status = 2;
    } else {
      login_status = 3;
    }
  });
}

</script> 
```

# java - 使用 .NET RSAKeyValue XML 字符串时，Java RSA 加密不起作用

> ID：13623583
> 
> 赞同：1
> 
> 时间：2012-11-29T10:23:13.697
> 
> 标签：java, .net, encryption, rsa

我有来自 .NET Web 服务的以下 RSA XML 字符串

```
<RSAKeyValue>
    <Modulus>+Tir6+unMOaQ5tHqjjjwnlAMhccnCSMFEi3a0mhIxbW+O/GukjomGyzckQT2h0Ys70JezHbNq5YS3sYkNF29kCkz4HuNfy9eEjE/clA9/zyfT8ZcbnusLcLz2xNgbTp62fQdzBnReI5+dpj/N24krYvHaYIr8ACxDqBv2TR3E9M=</Modulus>
    <Exponent>AQAB</Exponent>
</RSAKeyValue> 
```

当我使用它在 java 中进行 RSA 加密时，我从他们的 Web 服务返回以下错误

```
javax.xml.ws.soap.SOAPFaultException: Server was unable to process request. ---> Response Code: 100 Message: Invalid authentication credentials ---> Exception of type 'Capita.HSE.GS.Entities.Exceptions.NotificationException' was thrown.
at com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:178)
at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:111)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:108)
at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107)
at $Proxy32.checkEngineerDetailSecure(Unknown Source)
at TestWebService.main(TestWebService.java:98) 
```

奇怪的是，如果他们给我一个我想要加密的字符串的加密版本并将其传回给他们，它就可以工作。我的加密代码是

```
 private static String rsaEncryptPassword(String modulus, String exponent, String password) throws NoSuchAlgorithmException, NoSuchProviderException, InvalidKeySpecException,
        NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {

    byte[] modulusBytes = Base64.decodeBase64(modulus.getBytes());
    byte[] exponentBytes = Base64.decodeBase64(exponent.getBytes());

    BigInteger modulusInt = new BigInteger(1, modulusBytes);
    BigInteger exponentInt = new BigInteger(1, exponentBytes);

    RSAPublicKeySpec rsaPubKey = new RSAPublicKeySpec(modulusInt, exponentInt);
    KeyFactory fact = KeyFactory.getInstance("RSA");
    PublicKey pubKey = fact.generatePublic(rsaPubKey);

    Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
    cipher.init(Cipher.ENCRYPT_MODE, pubKey);

    byte[] cipherData = cipher.doFinal(password.getBytes());

    byte[] encryptedBytes = Base64.encodeBase64(cipherData);

    String encryptedString = new String(encryptedBytes);
    System.out.println(encryptedString);

    return encryptedString;
} 
```

在阅读了所有表格和帮助网站后，我不知道为什么这不起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:15:22.243

我们终于解决了这个问题。事实证明，.Net 服务使用的是 Unicode UTF-16 编码。因此，当我们获取字符串的字节时，我们必须将其设为 UTF-16。但是 UTF-16 字节数组有多种格式。有 UTF-16LE、UTF-16BE 和 UTF-16。

在我们的例子中，当我们将字符串转换为字节数组时，我们必须使用 UTF-16LE。所以最后，解决方案是

```
byte[] cipherData = cipher.doFinal(password.getBytes("UTF-16LE")); 
```

使用加密时，请确保您知道解密系统正在使用什么字符编码，并确保这是您在从要加密的字符串生成字节数组时使用的字符编码。

# python - 用python从dhcpd.leases中删除一个给mac的租约？

> ID：13623593
> 
> 赞同：0
> 
> 时间：2012-11-29T10:23:48.153
> 
> 标签：python, regex, parsing

我正在尝试根据其mac地址使用python从dhcpd.lease中删除一个租约。

这是一个 dhcpd.lease 示例

```
lease 10.14.53.253 {
  starts 3 2012/10/17 09:27:20;
  ends 4 2012/10/18 09:27:20;
  tstp 4 2012/10/18 09:27:20;
  binding state free;
  hardware ethernet 00:23:18:62:31:5b;
} 
lease 10.14.53.252 {
  starts 3 2012/10/17 10:15:17;
  ends 4 2012/10/18 10:15:17;
  tstp 4 2012/10/18 10:15:17;
  binding state free;
  hardware ethernet 70:71:bc:c8:46:3c;
  uid "\001pq\274\310F<";
} 
```

假设我得到'00：23：18：62：31：5b'。然后我应该删除所有属于这个租约的行。删除后，文件应如下所示

```
lease 10.14.53.252 {
  starts 3 2012/10/17 10:15:17;
  ends 4 2012/10/18 10:15:17;
  tstp 4 2012/10/18 10:15:17;
  binding state free;
  hardware ethernet 70:71:bc:c8:46:3c;
  uid "\001pq\274\310F<";
} 
```

我很简单地阅读一个文件并将其放入一个字符串，但我不知道之后该做什么。我试过这个正则表达式但没有用。它只检查文件的第一行。

```
fh = open(DHCPFILE)
lines = fh.read()
fh.close()
m = re.match(r"(.*lease.*%s.*})" % mac ,lines) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:02:51.440

这个问题*不是*正则表达式钉子的形状，所以请放下那个锤子。

正确的工具是将内容解析为 python 结构，过滤掉不需要的项目，然后再次写出剩余的条目。

[pyparsing](http://pyparsing.wikispaces.com/)将使解析工作变得容易；以下基于[现有示例](http://pyparsing.wikispaces.com/file/view/dhcpd_leases_parser.py/33450777/dhcpd_leases_parser.py)：

```
from pyparsing import *

LBRACE,RBRACE,SEMI,QUOTE = map(Suppress,'{};"')
ipAddress = Combine(Word(nums) + ('.' + Word(nums))*3)
hexint = Word(hexnums,exact=2)
macAddress = Combine(hexint + (':'+hexint)*5)
hdwType = Word(alphanums)

yyyymmdd = Combine((Word(nums,exact=4)|Word(nums,exact=2))+
                    ('/'+Word(nums,exact=2))*2)
hhmmss = Combine(Word(nums,exact=2)+(':'+Word(nums,exact=2))*2)
dateRef = oneOf(list("0123456"))("weekday") + yyyymmdd("date") + \
                                                        hhmmss("time")

startsStmt = "starts" + dateRef + SEMI
endsStmt = "ends" + (dateRef | "never") + SEMI
tstpStmt = "tstp" + dateRef + SEMI
tsfpStmt = "tsfp" + dateRef + SEMI
hdwStmt = "hardware" + hdwType("type") + macAddress("mac") + SEMI
uidStmt = "uid" + QuotedString('"')("uid") + SEMI
bindingStmt = "binding" + Word(alphanums) + Word(alphanums) + SEMI

leaseStatement = startsStmt | endsStmt | tstpStmt | tsfpStmt | hdwStmt | \
                                                        uidStmt | bindingStmt
leaseDef = "lease" + ipAddress("ipaddress") + LBRACE + \
                            Dict(ZeroOrMore(Group(leaseStatement))) + RBRACE

input = open(DHCPLEASEFILE).read()
with open(OUTPUTFILE, 'w') as output:
    for lease, start, stop in leaseDef.scanString(input):
        if lease.hardware.mac != mac:
            output.write(input[start:stop]) 
```

上面的代码简洁地定义了`dhcp.leases`文件的语法，然后`scanString()`用来解析文件中的每个租约。`scanString()`返回一系列匹配项，每个匹配项都包含一个解析结果以及原始字符串中的开始和结束位置。

解析结果有一个`.hardware.mac`属性（如果输入中没有硬件语句，您可能希望捕获`AttributeError`异常），从而可以轻松测试要删除的 MAC 地址。如果 MAC 地址不匹配，我们将整个租约写回输出文件，使用`start`和`stop`位置来获取该租约的原始文本（比从解析的信息格式化租约容易得多）。

# asp.net-mvc-3 - RenderPartial (CS1501) 的 Razor 语法问题

> ID：13623594
> 
> 赞同：2
> 
> 时间：2012-11-29T10:23:49.297
> 
> 标签：asp.net-mvc-3, razor, syntax

RenderAction 工作得很好，但只要我用 if 语句包围它，我就会得到一个编译错误：

```
@if (@Model.IsConfigurationAllow)
{
    @{ Html.RenderAction("Save"); } // CS1501: No overload for method 'Write' takes 0 arguments
} 
```

更一般的问题我在哪里可以找到 Razor 视图语法的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:26:58.090

`Html.RenderAction`将 HTML 直接呈现到响应中，因此您不能在代码块中调用它。

对方`Html.Action`返回一个带有结果的字符串。

请参阅[http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx](http://haacked.com/archive/2009/11/17/aspnetmvc2-render-action.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:44:23.553

你试过这个吗？

```
@if (@Model.IsConfigurationAllow)
{
    <text>@{ Html.RenderAction("Save"); }</text>
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:41:34.623

下面有一些（可以通过谷歌搜索找到更多）；

*   [www.w3schools.com](http://www.w3schools.com/aspnet/razor_intro.asp)
*   [快速参考](http://haacked.com/archive/2011/01/06/razor-syntax-quick-reference.aspx)
*   [使用 Razor 语法介绍](http://www.asp.net/web-pages/tutorials/basics/2-introduction-to-asp-net-web-programming-using-the-razor-syntax)

# ios - iOS 触摸在保持时不起作用

> ID：13623595
> 
> 赞同：0
> 
> 时间：2012-11-29T10:23:53.553
> 
> 标签：ios, touch

提前为菜鸟问题道歉。但我对 iOS 开发非常陌生。

我从这里学习了一个简单的 Pong 教程： [http ://www.technobuffalo.com/companies/apple/introduction-to-ios-development-programming-pong-part-4/](http://www.technobuffalo.com/companies/apple/introduction-to-ios-development-programming-pong-part-4/)

我已经设法调试并让应用程序正常工作，但我似乎只能在“重新触摸”屏幕时移动玩家拨片。

即在屏幕上**按住**时，拨片不跟随手指移动。

据我了解，以下是控制触摸事件的方法：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [[event allTouches] anyObject];
CGPoint location = [touch locationInView:touch.view];
self.gameState = kGameStateRunning;

if (location.x > 400) {
    CGPoint yLocation = CGPointMake(playerPaddle.center.x, location.y);
    playerPaddle.center = yLocation;
}
} 
```

任何人都可以请帮助阐明问题可能是什么？

非常感谢提前:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:42:04.307

你错了 ！你不应该使用

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

顾名思义，这仅检测手指触摸屏幕。你应该使用

```
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event 
```

# iphone - MFMailComposeViewController 模型不显示

> ID：13623597
> 
> 赞同：3
> 
> 时间：2012-11-29T10:24:05.820
> 
> 标签：iphone, objective-c, ios, xcode, mfmailcomposeviewcontroller

我在我的电子邮件应用程序中展示 MFMailComposeViewController。但是视图没有得到显示，只显示上部的 SEND 和 CANCEL 按钮。

这是单击“发送电子邮件至订阅”按钮后显示的视图屏幕截图。

![在此处输入图像描述](../Images/2b52cb15f7fbf3a714ae0e25d95d7b20.png)

我已经检查了所有相关的代码。我添加了“MessageUI”框架并导入

```
MessageUI/MessageUI.h , MessageUI/MFMailComposeViewController.h 
```

我使用了以下代码：

```
 - (void)viewWillAppear:(BOOL)animated {

     [self.view setFrame:CGRectMake(0, 62, 320, 418)];

     [APPDELEGATE.window addSubview:self.view];

     [self.navigationController.navigationBar setHidden:NO];
     self.navigationItem.title=@"Free Subscription";
     [super viewWillAppear:animated]; }

 -(void)viewWillDisappear:(BOOL)animated {
     [self.view removeFromSuperview];
     [super viewWillDisappear:animated]; }

     -(IBAction)btnEmailPressed {
         MFMailComposeViewController* Apicker = [[MFMailComposeViewController alloc] init];
         if (Apicker != nil)
         {

         [Apicker setSubject:@"Free Subscription"];

         [Apicker setMessageBody:@" " isHTML:NO];

         NSArray *toRecipients = [NSArray arrayWithObjects:@"info@xyz.com", nil];
         [Apicker setToRecipients:toRecipients];

         Apicker.mailComposeDelegate = self;

         if([MFMailComposeViewController canSendMail])
         {
             [self presentModalViewController:Apicker animated:YES];
         }
         else
         {

         }
         [Apicker release];
     } }

     -(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError
     *)error{

     NSString *message;

     switch (result) {
         case MFMailComposeResultCancelled:
             message =@"You have canceled your email.";
             break;
         case MFMailComposeResultFailed:
             message=@"Your email is failed";
             break;
         case MFMailComposeResultSent:
             message=@"Your email was successfully sent.";
             break;
         case MFMailComposeResultSaved:
             message=@" Your email has been saved";
             break;

         default:
             message=@" Your email is not send";
             break;
     }
     UIAlertView *alt=[[UIAlertView alloc]initWithTitle:@"" message:message delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];

     [alt show];
     [alt release];

     [self dismissModalViewControllerAnimated:YES];
      } 
```

我无法得到这个问题的原因。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T10:47:21.263

它适用于 IOS 6

```
-(void)email{
    MFMailComposeViewController *composer=[[MFMailComposeViewController alloc]init];
    [composer setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) {
        [composer setToRecipients:[NSArray arrayWithObjects:@"xyz@gmail.com", nil]];
        [composer setSubject:@""];

        //    [composer.setSubject.placeholder = [NSLocalizedString(@"This is a placeholder",)];

        [composer setMessageBody:@"" isHTML:NO];
        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentViewController:composer animated:YES completion:nil];
    }
    else {
    }
}
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{
    if (error) {
        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"error" message:[NSString stringWithFormat:@"error %@",[error description]] delegate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil, nil];
        [alert show];
        [self dismissViewControllerAnimated:YES completion:nil];
    }
    else {
        [self dismissViewControllerAnimated:YES completion:nil];
    }
} 
```

你试一试

对于 iOS 5

```
-(void)email:(id)sender{
    MFMailComposeViewController *composer=[[MFMailComposeViewController alloc]init];
    [composer setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) {
        [composer setToRecipients:[NSArray arrayWithObjects:@"xyz@gmail.com", nil]];
        [composer setSubject:@""];

        //    [composer.setSubject.placeholder = [NSLocalizedString(@"This is a placeholder",)];

        [composer setMessageBody:@"" isHTML:NO];
        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentModalViewController:composer animated:YES];
    }
    else {
    }
}
-(void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error{
    if (error) {
        UIAlertView *alert=[[UIAlertView alloc]initWithTitle:@"error" message:[NSString stringWithFormat:@"error %@",[error description]] delegate:nil cancelButtonTitle:@"dismiss" otherButtonTitles:nil, nil];
        [alert show];
        [self dismissModalViewControllerAnimated:YES];
    }
    else {
        [self dismissModalViewControllerAnimated:YES];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:52:18.887

尝试像这样修改您的代码：-

```
-(IBAction)btnEmailPressed 
{ 
    MFMailComposeViewController* Apicker = [[MFMailComposeViewController alloc] init];
    if (Apicker != nil)   
    {
        [Apicker setSubject:@"Free Subscription"];
        [Apicker setMessageBody:@" " isHTML:NO];
        NSArray *toRecipients = [NSArray arrayWithObjects:@"info@xyz.com", nil];
        [Apicker setToRecipients:toRecipients];
        Apicker.mailComposeDelegate = self;

       if([MFMailComposeViewController canSendMail])
       {
           [self presentModalViewController:Apicker animated:YES];
       }
       else
       {
            NSString *recipients = @"mailto:info@xyz.com?cc=&subject=";
            NSString *body = @"&body=";

                NSString *email = [NSString stringWithFormat:@"%@%@", recipients, body];
            email = [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

           [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]];
         }
         [Apicker release];
     } 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:27:24.983

`.h`在文件中添加这两个委托`MFMessageComposeViewControllerDelegate`并`MFMailComposeViewControllerDelegate`

**更新**

```
 if ([MFMailComposeViewController canSendMail]) {
            appDelegate.imgCapture = [self captureView];
            [appDelegate.imgCapture retain];
            MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init];
            NSString *mailBody = @"Set Your Body Message";

            [mailComposeViewController setMessageBody:mailBody isHTML:NO];
            mailComposeViewController.mailComposeDelegate = self;
            [self presentViewController:mailComposeViewController animated:YES completion:nil];
        } else {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"e-Mail Sending Alert"
                                                            message:@"You can't send a mail"
                                                           delegate:nil
                                                  cancelButtonTitle:@"OK" 
                                                  otherButtonTitles:nil];
            [alert show];
            [alert release];
        } 
```

# android - Android 图像上传到 SFTP 服务器

> ID：13623598
> 
> 赞同：0
> 
> 时间：2012-11-29T10:24:10.637
> 
> 标签：android, ftp

这是使用 FTP 在 android 中上传图像的快速有效的方法。我可以在其中创建图像的文件夹重命名文件，请发布 code.SFTP 代码：

```
f.setHost("host");
f.setUser("user");
f.setPassword("pwd");
boolean connected=f.connect();
f.setRemoteFile("server directory");
if(connected){
  f.uploadFile("local file);
} 
```

获取 Ftp 553 错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:40:13.777

将代码更改为使用[JSch](http://www.jcraft.com/jsch/) lib在服务器上上传文件

```
 private File uploadFilePath;
    Session session ;
     Channel channel = null;
    ChannelSftp sftp;
    uploadFilePath=new File(Environment.getExternalStorageDirectory()
                                                     +"/temp.jpg");
    byte[] bufr = new byte[(int) uploadFilePath.length()];
    FileInputStream fis = new FileInputStream(uploadFilePath);
    fis.read(bufr);
    JSch ssh = new JSch();
   try {
        session =ssh.getSession("root", "xx.xxx.xxx.xx");
        System.out.println("JSch JSch JSch Session created.");
        session.setPassword("password");
        java.util.Properties config = new java.util.Properties(); 
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();
        System.out.println("JSch JSch Session connected.");
        System.out.println("Opening Channel.");
        channel = session.openChannel("sftp"); 
        channel.connect();
        sftp= (ChannelSftp)channel;
            // server path where you want to upload file
        sftp.cd("/root/temp/dir/upload/"); 
    }
    catch(Exception e){

    }
ByteArrayInputStream in = new ByteArrayInputStream(bufr);
sftp.put(in, uploadFilePath.getName(), null);
in.close();

if (sftp.getExitStatus()==-1) {
    System.out.println("file uploaded");
    Log.v("upload result", "succeeded");                                    
    } else {
    Log.v("upload faild ", "faild");        
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:28:24.107

在下面的代码中，我能够创建会话，但是我的代码给出了错误

```
I am getting null pointer exception here.

public void uploaddata() throws IOException, SftpException

{
    File uploadFilePath;
    Session session ;
     Channel channel = null;
    ChannelSftp sftp = null;

    uploadFilePath = searchForFileInExternalStorage("video.3gp");  

   /* uploadFilePath=new File(Environment.getExternalStorageDirectory()
                                                     +"/video.3gp");*/
    Log.e("image file path are", uploadFilePath.getPath()+"name"+uploadFilePath.getName()+"length is"+uploadFilePath.length());

    byte[] bufr = new byte[(int) uploadFilePath.length()];
    FileInputStream fis = new FileInputStream(uploadFilePath);
    fis.read(bufr);
    JSch ssh = new JSch();
   try {
        session =ssh.getSession(username, hostName);
        System.out.println("JSch JSch JSch Session created.");
        session.setPassword(password);
        java.util.Properties config = new java.util.Properties(); 
        config.put("StrictHostKeyChecking", "no");
        session.setConfig(config);
        session.connect();
        System.out.println("JSch JSch Session connected.");
        System.out.println("Opening Channel.");
        channel = session.openChannel("sftp"); 
        channel.connect();
        sftp= (ChannelSftp)channel;

        Log.e("chanel is",""+channel+"sftp"+sftp);

            // server path where you want to upload file
        sftp.cd(location); 
    }
    catch(Exception e){

    }
   ByteArrayInputStream in = new ByteArrayInputStream(bufr);
   sftp.put(in, uploadFilePath.getName(), null);
in.close();

if (sftp.getExitStatus()==-1) {
    System.out.println("file uploaded");
    Log.v("upload result", "succeeded");                                    
    } else {
    Log.v("upload faild ", "faild");        
    } 
```

下面的行正在生成错误 sftp.put(in, uploadFilePath.getName(), null);

# python - pydev 交互式控制台总是消失和其他控制台问题

> ID：13623601
> 
> 赞同：6
> 
> 时间：2012-11-29T10:24:23.020
> 
> 标签：python, eclipse, console, pydev

我刚刚开始在 Eclipse 中使用 pydev，我对交互式控制台的工作方式有很多疑问。

我发现了如何启动交互式控制台并使用它来运行功能。我的问题是这样的：

1.  每次我更改代码并重新运行它时，我的交互式控制台都会消失。这很烦人，因为我必须重新打开控制台，并且无法查看/重新运行我以前的历史记录。如果我固定它，它会保留，但是我无法运行任何代码。有什么方法可以让交互式控制台一直保持打开状态，同时还能运行您的代码？我目前花费大量时间关闭和打开控制台！

2.  如何从交互式控制台运行函数，但仍让调试器在断点处停止。如果我从主函数运行代码，我可以使用调试器，但如果我从控制台运行代码，它只会跳过断点。

谢谢尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T17:28:52.620

1.  您可以在所需的 Python 文件处于活动状态时按 Ctrl+Alt+Enter，而不是单击“Python 运行”，控制台将调用`execfile`它。你以前的所有故事都留在那里。您还可以选择代码的某些部分并仅运行它。

2.  据我所知，你不能。请改为检查 pdb 模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-21T12:36:49.110

不确定问题的根源是否相同，但我遇到了类似的问题，即我在脚本编辑器中单击后 PyDev 控制台一直消失，即使单击了控制台的`Pin Console`按钮也是如此。

我通过**双击脚本的 tab**解决了这个问题，这使控制台始终可见。

# wordpress - Wordpress 中如何处理 URL 路由？

> ID：13623603
> 
> 赞同：1
> 
> 时间：2012-11-29T10:24:28.027
> 
> 标签：wordpress, url-routing

我想了解 Wordpress 后端中的 URL 调度是如何发生的？我问了一个相关的问题：[如何找到生成 wordpress 管理页面的 php 文件或函数？](https://stackoverflow.com/questions/13623030/how-to-find-php-file-or-function-that-generates-a-wordpress-admin-page/13623354#13623354)

一个答案说我需要在代码中搜索输出中呈现的一些独特文本。我期待一些逻辑机制，例如 Rails 或 Django 中的 url 调度或路由机制。Wordpress 中没有类似的机制吗？

# javascript - 通过 Javascript 添加的 CSS 链接填充在 IE 中不起作用

> ID：13623607
> 
> 赞同：2
> 
> 时间：2012-11-29T10:24:37.240
> 
> 标签：javascript, css, internet-explorer

我尝试先寻找答案，但这似乎是一个边缘案例。

我正在通过 JavaScript 向链接添加一个类（实际上是 jQuery，但我认为在这种情况下并不重要）。该类添加了一个图标作为背景图像和一些填充。填充和背景图像无法出现在某些链接上。该问题出现在 IE8 中，但令人惊讶的是在 IE7 中运行良好。我无法测试 IE9/10。在 Firefox 中运行良好。

我将代码减少到最低限度，并创建了一个 jsFiddle 来说明问题。 [http://jsfiddle.net/toxalot/fsdcu/](http://jsfiddle.net/toxalot/fsdcu/)

我将尝试在此处添加代码。

```
<style type="text/css">
body { background-color: #fff }
a:hover { background-color: transparent; color: #c30 }
ul { padding-left: 40px }
.iconNewWindowLeave { padding-right: 15px; background-color: #ccc }
</style>
<ul>
    <li style="float: left"><a class="iconNewWindowLeave" href="#">left link</a></li>
    <li style="text-align: right">some stuff on the right</li>
</ul>
<ul>
    <li style="float: left"><a class="linkExternal" href="#">left link</a></li>
    <li style="text-align: right">some stuff on the right</li>
</ul>
<script type="text/javascript">
$('.linkExternal').each(function() {
    $(this).addClass('iconNewWindowLeave');
});
</script> 
```

我已经从示例中删除了图像并添加了背景颜色以进行说明。在 IE 8 中，第二个链接没有正确的填充。将鼠标悬停在链接上，添加填充。如果我删除 a:hover CSS，悬停并不能解决问题。如果我移除浮子，问题就会消失。如果我删除任何其他 CSS，问题就会消失。

所以我已经缩小了原因，但我不知道该怎么办。我不想删除或更改现有代码。这都是网站布局所必需的。如果可能的话，我想*添加*一些 CSS 或 JavaScript 来修复它。这是一个小问题，但它困扰着我。我也很好奇这个问题是否出现在较新版本的 IE 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:27:18.900

尝试添加：a`display:inline-block;`或`display:block;`.iconNewWindowLeave

```
.iconNewWindowLeave { padding-right: 15px; background-color: #ccc; display:inline-block; } 
```

（未测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:38:41.657

每当页面上有一些浮动容器时，请始终清除父容器。在您的情况下，在 ul 上添加样式 clear:left。那应该行得通。

如果您在整个应用程序中使用许多浮点数，最好在父容器上添加一个 clearfix 类。

# image - 在 Windows 8 的 XAML 中悬停或单击时如何更改按钮的背景图像？

> ID：13623610
> 
> 赞同：0
> 
> 时间：2012-11-29T10:24:39.920
> 
> 标签：image, xaml, button, background, windows-8

我有一个关于在单击按钮时更改按钮背景图像的问题。

我尝试在谷歌上搜索，但找不到适合我的东西。

好吧，这是我的代码

```
<Button Grid.Column="0" Grid.Row="0" x:Name="btnHome" VerticalAlignment="Stretch" BorderBrush="{x:Null}" HorizontalAlignment="Stretch" Click="btnHome_Click" PointerEntered="btnHome_PointerEntered">
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="RootElement">
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="CommonStates">
                                    <VisualState x:Name="MouseOver">
                                        <Storyboard>
                                            //I want my background change here
                                        </Storyboard>
                                    </VisualState>
                                    <VisualState x:Name="Pressed">
                                        <Storyboard>
                                            //And here
                                        </Storyboard>
                                    </VisualState>
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <Border.Background>
                                <ImageBrush ImageSource="images/back_button.png"/>
                            </Border.Background>
                        </Border>
                    </ControlTemplate>
                </Button.Template>
            </Button> 
```

我也试过这个

```
private void btnHome_PointerEntered(object sender, PointerRoutedEventArgs e)
    {
        BitmapImage bmp = new BitmapImage();
        Uri u = new Uri("ms-appx:images/back_button_mouseover.png", UriKind.RelativeOrAbsolute);
        bmp.UriSource = u;
        ImageBrush i = new ImageBrush();
        i.ImageSource = bmp;
        btnHome.Background = i;
    } 
```

但不幸的是，这都不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:01:53.763

使用[WinRT Xaml Toolkit](http://winrtxamltoolkit.codeplex.com/)，您可以获得所有效果。从工具包中引用二进制文件。将 xml 命名空间添加到您的页面：

```
xmlns:controls="using:WinRTXamlToolkit.Controls" 
```

使用按钮，如：

```
<controls:ImageButton HorizonalAlignment="Center"
    NormalStateImageSource="normal.png"
    HoverStateImageSource="hover.png"
    PressedStateImageSource="pressed.png" /> 
```

除此之外，它还有很多有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T21:06:35.773

这是一种样式，可以打开和关闭您在 Blend 中添加的一些额外图像的可见性。图像是透明的，并且通过使用“Send to Back”在按钮背景图像后面。换句话说，您可以继续为每个按钮使用不同的背景图像画笔，以及交换的 Normal、Pointer 和 Pressed 图像。所以两个背景图像重叠。

```
 <Style x:Key="qButtonStyle" TargetType="Button">
    <Setter Property="Background" Value="{StaticResource ButtonBackgroundThemeBrush}" />
    <Setter Property="Foreground" Value="{StaticResource ButtonForegroundThemeBrush}" />
    <Setter Property="BorderBrush" Value="{StaticResource ButtonBorderThemeBrush}" />
    <Setter Property="BorderThickness" Value="{StaticResource ButtonBorderThemeThickness}" />
    <Setter Property="Padding" Value="4" />
    <Setter Property="HorizontalAlignment" Value="Left" />
    <Setter Property="VerticalAlignment" Value="Center" />
    <Setter Property="FontFamily" Value="{StaticResource ContentControlThemeFontFamily}" />
    <Setter Property="FontWeight" Value="SemiBold" />
    <Setter Property="FontSize" Value="{StaticResource ControlContentThemeFontSize}" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <Grid x:Name="grid">
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommonStates">
                            <VisualState x:Name="Normal" >
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="imageNormal" d:IsOptimized="True"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="PointerOver">

                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush)" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Null}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderThickness)" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Thickness>0</Thickness>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="imageNormal">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Collapsed</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="imagePressed">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Collapsed</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="imagePointer" d:IsOptimized="True"/>
                                </Storyboard>

                            </VisualState>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Background"
                                        Storyboard.TargetName="Border"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="Foreground"
                                        Storyboard.TargetName="ContentPresenter"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Border.BorderBrush)" Storyboard.TargetName="Border">
                                        <DiscreteObjectKeyFrame KeyTime="0" Value="{x:Null}"/>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill)" Storyboard.TargetName="FocusVisualWhite">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="#7F006400"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Shape.Fill)" Storyboard.TargetName="FocusVisualBlack">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <SolidColorBrush Color="#7F006400"/>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="imagePressed" d:IsOptimized="True"/>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="imagePointer" d:IsOptimized="True"/>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="imageNormal">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Collapsed</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                    <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Visibility)" Storyboard.TargetName="imagePointer">
                                        <DiscreteObjectKeyFrame KeyTime="0">
                                            <DiscreteObjectKeyFrame.Value>
                                                <Visibility>Collapsed</Visibility>
                                            </DiscreteObjectKeyFrame.Value>
                                        </DiscreteObjectKeyFrame>
                                    </ObjectAnimationUsingKeyFrames>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="0.25" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="grid" d:IsOptimized="True"/>
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                        <VisualStateGroup x:Name="FocusStates">
                            <VisualState x:Name="Focused">
                                <Storyboard>
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity"
                                        Storyboard.TargetName="FocusVisualWhite" />
                                    <DoubleAnimation Duration="0" To="1" Storyboard.TargetProperty="Opacity"
                                        Storyboard.TargetName="FocusVisualBlack" />
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Unfocused" />
                            <VisualState x:Name="PointerFocused" />
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Image x:Name="imagePointer" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Source="ms-appx:///Assets/btnBGPointer.png" Opacity="0"/>
                    <Image x:Name="imagePressed" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Source="ms-appx:///Assets/btnBGPressed.png" Opacity="0"/>
                    <Image x:Name="imageNormal" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Source="ms-appx:///Assets/bgButtonBase.png"/>
                    <Border x:Name="Border"
                        Background="{TemplateBinding Background}" Margin="3">
                        <ContentPresenter x:Name="ContentPresenter"
                            ContentTemplate="{TemplateBinding ContentTemplate}"
                            ContentTransitions="{TemplateBinding ContentTransitions}"
                            Content="{TemplateBinding Content}"
                            HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                            Margin="{TemplateBinding Padding}"
                            VerticalAlignment="{TemplateBinding VerticalContentAlignment}" />
                    </Border>
                    <Rectangle x:Name="FocusVisualWhite" IsHitTestVisible="False" Opacity="0"
                        StrokeDashOffset="1.5" StrokeEndLineCap="Square"
                        Stroke="{StaticResource FocusVisualWhiteStrokeThemeBrush}" StrokeDashArray="1,1" />
                    <Rectangle x:Name="FocusVisualBlack" IsHitTestVisible="False" Opacity="0"
                        StrokeDashOffset="0.5" StrokeEndLineCap="Square"
                        Stroke="{StaticResource FocusVisualBlackStrokeThemeBrush}" StrokeDashArray="1,1" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:06:43.853

我找到了这个问题的答案。

您必须编辑控件的模板。

您可以使用 Blend 或“手动”来完成。

检索按钮的默认模板（通过按右键、编辑模板、编辑副本、为其命名并按确定），然后对其进行自定义以满足您的需求

编辑：[这](http://msdn.microsoft.com/en-us/library/ms751600%28v=vs.85%29.aspx)是关于 RadioButton 模板自定义的 MSDN 资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-28T12:32:25.633

我正在使用这段代码：

```
<Button Style="{StaticResource anyButton}" Cursor="Hand" ClickMode="Press" Click="Button_Click_1" /> 
```

风格：

```
 <Style x:Key="anyButton" TargetType="Button">
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Name="border" 
                    BorderThickness="0" 
                    Background="{TemplateBinding Background}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="False">
                            <Setter Property="Background" TargetName="border">
                                <Setter.Value>
                                    <ImageBrush ImageSource="C:\Users\image1.png" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="border">
                                <Setter.Value>
                                    <ImageBrush ImageSource="C:\Users\image2.png" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                        <Trigger Property="IsFocused" Value="True">
                            <Setter Property="Background" TargetName="border">
                                <Setter.Value>
                                    <ImageBrush ImageSource="C:\Users\image3.png" />
                                </Setter.Value>
                            </Setter>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# regex - 反转正则表达式

> ID：13623614
> 
> 赞同：2
> 
> 时间：2012-11-29T10:24:50.823
> 
> 标签：regex, perl, expression

我想在 Perl 中有一个 DNA 字符串的反向补码。所以这很简单，我有以下表达式。

```
$revcomp =~ tr/ACGTacgt[]N/TGCAtgca][./; 
```

然后反转字符串。`[]`照顾模棱两可的角色。但是，如果我想扩展它以允许更复杂的表达式，这个简单的方案就会失败。例如，`C[AG]{7,10}[ACGT]{5,8}ATGC`将导致一个`GCAT{8,5}[ACGT]{01,7}[CT]G`不是我们想要的正则表达式（在花括号之后也被考虑在内）。预期的反向补码是`GCAT[ACGT]{5,8}[CT]{7,10}G`. 我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:52:47.397

要使带有量词的正则表达式正常工作，您需要按元素而不是按字符反转表达式。通过“元素方式”，我的意思是单个字符或字符类以及以下量词（如果有的话）必须被视为一个单元。例如，在您的示例中`C[AG]{7,10}[ACGT]{5,8}ATGC`，有 7 个元素：C-[AG]{7,10}-[ACGT]{5,8}-ATGC。您需要将其分解为该元素列表并反转列表的顺序，而不是将其反转为单个字符串。

**预计到达时间：代码**

```
#!/usr/bin/env perl    

use strict;
use warnings;
use 5.010;

my $re = 'C[AG]{7,10}[ACGT]{5,8}ATGC';

$re =~ tr/ACGTacgt/TGCAtgca/;

my @elem = $re =~ /((?:\[.*?\]|.)(?:\{.*?})?)/g;

my $rev = join '', reverse @elem;

say $rev; 
```

输出：

`GCAT[TGCA]{5,8}[TC]{7,10}G`

# python - 如何检查用户输入是否有这些行？

> ID：13623617
> 
> 赞同：1
> 
> 时间：2012-11-29T10:24:51.610
> 
> 标签：python, easygui

这是我的第二个 Python 程序。我似乎对自己的进步感到满意。我想提出的问题是：

```
choice=eg.ynbox(msg='wat to do')
for["true","1"] in choice:
        print("yes")
for["false","0"] in choice:
        print("no") 
```

问题是这个 for 条件不起作用。我在查找上一个问题的答案时看到了这样的代码，但我忘记了。我试过谷歌搜索，但我不知道如何用语言表达。顺便说一句，需要一点语法帮助：它是一个带有 easygui 0.96 的 gui 程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:30:27.070

```
choice = eg.ynbox(msg='wat to do')
if any(word in choice for word in ["true","1"]):
    print('yes')
elif any(word in choice for word in ["false","0"]):
    print('no')
else:
    print('invalid input') 
```

或者，如果列表很短：

```
choice = eg.ynbox(msg='wat to do')
if 'true' in choice or '1' in choice::
    print('yes')
if 'false' in choice or '0' in choice::
    print('no')
else:
    print('invalid input') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:54:55.717

您可以尝试使用以下代码代替您的代码：

```
def is_accept(word):
    return word.lower() in {'true', '1', 'yes', 'accept'}

def is_cancel(word):
    return word.lower() in {'false', '0', 'no', 'cancel'}

def get_choice(prompt=''):
    while True:
        choice = eg.ynbox(msg=prompt)
        if is_accept(choice):
            print('Yes')
            return True
        if is_cancel(choice):
            print('No')
            return False
        print('I did not understand your choice.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:30:29.213

我假设`eg.ynbox(msg='wat to do')`您的意思是您正在创建一个**是/否**对话框。这意味着存储在其中的值`choice`是**1**代表**True**和**0**代表**False**。这在 Python 2.x 和 Python 3.x 中都是正确的，**只要*****True*****和*****False*****在 Python 2.x 中没有重新分配，**并且是 Python 3.x 中的保留关键字，因此保证不会更改。因此，您只需有一个使用此值的语句：`Integer` **********`True``False``if`**********

 ******```
if choice:
    print 'Yes'
else:
    print 'No' 
```

您不需要匹配`1`and`0`因为它们同时代表`True`and `False`。******

# iphone - 如何手动强制关闭 NSURLConnection？

> ID：13623618
> 
> 赞同：0
> 
> 时间：2012-11-29T10:24:52.010
> 
> 标签：iphone, xcode, cocoa

我正在使用 NSURLConnection 进行 http 下载。根据具体情况，我可能不得不在特定下载后断开连接。比如说，如果我的下载在 30 秒内完成，那么其他明智的下载应该在 30 秒后停止。我还必须记录这些事件。我的问题是，即使在 30 秒后，它也会继续下载数据，并且只有在下载完成后才会记录事件。

简而言之，我想强制关闭下载，还想禁用所有由 http 连接触发的委托事件。我不想在多个位置设置标志，这会使事情进一步复杂化。有任何想法吗？

**更新：完整场景：** 我在 NSURLReqeust 对象中将 timeoutInterval 设置为 10 秒。现在，如果 10 秒内没有收到数据会发生什么情况，连接会在 10 秒后自动断开，工作正常。但是我的软件中有另一个功能需要在给定时间内未完成下载的情况下终止连接。我正在使用单独的 NSTimer。我所能做的就是在触发 NSTimer 事件时设置一个标志。现在，如果通过 NSTimer 设置了标志并且数据停止进入，我没有将在接下来的 10 秒内触发的连接委托。现在我的问题是中止事件和超时事件同时发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:48:40.013

好吧，你“可以”通过发送一个取消事件来取消一个 NSURLConnection：

```
[connection cancel]; 
```

请参阅 Apple[文档](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)。

在此之前，只需 nil 代表，您不应该受到任何代表回调的骚扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:50:52.373

使用object 为您使用此方法`NSURLRequest`下载的 evrey 请求指定超时。[`requestWithURL:cachePolicy:timeoutInterval:`](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLRequest/requestWithURL%3acachePolicy%3atimeoutInterval%3a)

请检查您`NSURLConnection`的委托是否已设置并响应该[`connection:didFailWithError:`](http://developer.apple.com/iphone/library/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/connection%3adidFailWithError%3a)方法。A`NSURLConnection`调用此方法或`connectionDidFinishLoading:`在连接完成时调用。

处理'didFailWithError'方法并使用`NSError`对象检查失败的原因。

但是，如果您从服务器获得响应并且响应时间很慢，则使用`NSTimer`. 创建用于下载数据的 Helper 类，以便您可以通过创建多个实例并在其中设置 NSTimer 来重用该类进行多次下载，如果下载在 30 秒内完成，则使计时器无效，否则取消下载`[self.connection cancel]`。

请检查以下代码：

```
- (void)_startReceive
    // Starts a connection to download the current URL.
{
    BOOL                success;
    NSURL *             url;
    NSURLRequest *      request;

        // Open a connection for the URL.
        request = [NSURLRequest requestWithURL:url];
        assert(request != nil);

        self.connection = [NSURLConnection connectionWithRequest:request delegate:self];
        assert(self.connection != nil);

        // If we've been told to use an early timeout for get complete response within 30 sec, 
        // set that up now.
            self.earlyTimeoutTimer = [NSTimer scheduledTimerWithTimeInterval:30.0 target:self selector:@selector(_earlyTimeout:) userInfo:nil repeats:NO];
    }
}

- (void)_stopReceiveWithStatus:(NSString *)statusString
    // Shuts down the connection and displays the result (statusString == nil) 
    // or the error status (otherwise).
{
    if (self.earlyTimeoutTimer != nil) {
        [self.earlyTimeoutTimer invalidate];
        self.earlyTimeoutTimer = nil;
    }
    if (self.connection != nil) {
        [self.connection cancel];
        self.connection = nil;
    }
}

- (void)_earlyTimeout:(NSTimer *)timer
    // Called by a timer (if the download is not finish)
{
    [self _stopReceiveWithStatus:@"Early Timeout"];
}

- (void)connection:(NSURLConnection *)conn didReceiveResponse:(NSURLResponse *)response
    // A delegate method called by the NSURLConnection when the request/response 
    // exchange is complete.  
{ }

- (void)connection:(NSURLConnection *)conn didReceiveData:(NSData *)data
    // A delegate method called by the NSURLConnection as data arrives.  We just 
    // write the data to the file.
{ }

- (void)connection:(NSURLConnection *)conn didFailWithError:(NSError *)error
    // A delegate method called by the NSURLConnection if the connection fails. 
{
    NSLog(@"didFailWithError %@", error);   
    // stop Receive With Status Connection failed
}

- (void)connectionDidFinishLoading:(NSURLConnection *)conn
    // A delegate method called by the NSURLConnection when the connection has been 
    // done successfully.  We shut down the connection with a nil status.
{
    NSLog(@"connectionDidFinishLoading");
    // If control reach here before timer invalidate then save the data and invalidate the timer
     if (self.earlyTimeoutTimer != nil) {
        [self.earlyTimeoutTimer invalidate];
        self.earlyTimeoutTimer = nil;
    }
}
```

# ruby-on-rails - 调度作业

> ID：13623626
> 
> 赞同：0
> 
> 时间：2012-11-29T10:25:18.700
> 
> 标签：ruby-on-rails, scheduled-tasks

我想知道如何安排一次又一次重复的作业，例如从 api 服务加载数据或发送电子邮件。我发现`resque`，`resque-scheduler`但它使用 Redis 作为后端，这对于定时作业来说是一种过度依赖。

有没有办法在没有外部依赖的情况下在 Rails 环境中安排 ruby​​ 代码块固定时间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:27:13.893

我猜你正在寻找类似的东西：[https ://github.com/javan/whenever](https://github.com/javan/whenever)

它使用 crontab 来安排您的工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T12:09:27.157

您还可以查看 Rufus 调度程序[https://github.com/jmettraux/rufus-scheduler](https://github.com/jmettraux/rufus-scheduler)，它也使用 crontab 进行调度，它还有一些您可能喜欢的额外功能！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:02:17.730

正如 phoet 向您推荐的那样，无论何时都是您需要的宝石。我也会推荐你 sidekiq 而不是 resque。Sidekiq 更新，性能更好。有一个关于 sidekiq 的 Railscast，你应该看看。

# xml - 如何在xml中找到我们是否在MS WORD页面的末尾？

> ID：13623631
> 
> 赞同：1
> 
> 时间：2012-11-29T10:26:01.153
> 
> 标签：xml, ms-word, obiee

我需要找出我们是否在页面底部。我正在使用 BI Publisher 在 WORD 中创建模板，我怎样才能找到我们已经到达页面末尾，我实际上必须检查它是否在页面末尾并且某个条件为真然后停止显示记录。xml中是否使用了任何标签，通过它我可以找到MS word页面的结尾

# c# - 用数据库中的数据填充文本框

> ID：13623632
> 
> 赞同：3
> 
> 时间：2012-11-29T10:26:05.063
> 
> 标签：c#, asp.net, textbox

我的页面上有几个文本框，想用数据库中的数据填充它们。我进行查询并获取（在我的情况下）我用来填充文本框的 Film 对象，但它不起作用。这是我的代码：

```
private void FilmInfo(int gekozenFilm)
{
    BLFilm blFilm = new BLFilm();
    Film film = blFilm.GetFilmById(gekozenFilm);
    TextBoxFilm.Text = film.Naam;
    TextBoxRelease.Text = film.Releasedatum.ToString();
    TextBoxTrailer.Text = film.Filmpje;
    TextBoxAfbeelding.Text = film.Afbeelding;
} 
```

电影中有一个 Film 对象，但由于某种原因，文本框不显示文本。

整个页面的代码（相关）：

```
protected void ListBoxMovies_SelectedIndexChanged(object sender, EventArgs e)
{
    int gekozenFilm;
    gekozenFilm = Convert.ToInt32(ListBoxMovies.SelectedItem.Value);
    FilmInfo(gekozenFilm);
}
private void FilmInfo(int gekozenFilm)
    {
        BLFilm blFilm = new BLFilm();
        Film film = blFilm.GetFilmById(gekozenFilm);
        TextBoxFilm.Text = film.Naam;
        TextBoxRelease.Text = film.Releasedatum.ToString();
        TextBoxTrailer.Text = film.Filmpje;
        TextBoxAfbeelding.Text = film.Afbeelding;
    } 
```

.aspx 页面

```
<form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>
        <section id="context">
            <article id="left">

                <h2>Movie CRUD</h2>
                <div class="seperator">
                    <!-- seperator -->
                    <asp:Label ID="LabelNaam" runat="server" Text="Naam"></asp:Label>
                    <asp:TextBox ID="TextBoxFilm" runat="server" Width="250px"></asp:TextBox>
                    <br />
                    <asp:Label ID="LabelRelease" runat="server" Text="Releasedatum"></asp:Label>
                    <asp:TextBox ID="TextBoxRelease" runat="server" Width="185px"></asp:TextBox>
                    <br />
                    <asp:Label ID="LabelTrailer" runat="server" Text="Trailer"></asp:Label>
                    <asp:TextBox ID="TextBoxTrailer" runat="server" Width="241px"></asp:TextBox>
                    <br />
                    <asp:Label ID="Label1" runat="server" Text="Afbeelding"></asp:Label>
                    <asp:TextBox ID="TextBoxAfbeelding" runat="server" Width="209px"></asp:TextBox>
                </div>
</article>
            <article id="right">
                <h2>Movies</h2>
                <asp:ListBox ID="ListBoxMovies" runat="server" Height="141px" Width="315px" OnSelectedIndexChanged="ListBoxMovies_SelectedIndexChanged" ViewStateMode="Inherit" AutoPostBack="True"></asp:ListBox>
</article>
        </section>

    </form> 
```

我已经尝试在几乎所有地方放置断点并且文本框具有文本值但在页面上它仍然是空的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:21:37.897

检查您的更新模板是否包含您要填充的文本框是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:26:50.957

为什么不使用记录集？它非常易于使用，我认为对您的情况有好处： [这里有更多信息](http://www.w3schools.com/ado/ado_ref_recordset.asp)

# python - Python 3 Map 函数不是调用函数

> ID：13623634
> 
> 赞同：30
> 
> 时间：2012-11-29T10:26:07.857
> 
> 标签：python, python-3.x, functional-programming, map-function

为什么以下代码不打印任何内容：

```
#!/usr/bin/python3
class test:
    def do_someting(self,value):
        print(value)
        return value

    def fun1(self):
        map(self.do_someting,range(10))

if __name__=="__main__":
    t = test()
    t.fun1() 
```

我在 Python 3 中执行上面的代码。我想我错过了一些非常基本但无法弄清楚的东西。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-29T10:28:07.527

[`map()`返回一个迭代器](http://docs.python.org/3/library/functions.html#map)，并且在您要求之前不会处理元素。

将其转换为列表以强制处理所有元素：

```
list(map(self.do_someting,range(10))) 
```

或者`collections.deque()`如果您不需要地图输出，则将长度设置为 0 以不生成列表：

```
from collections import deque

deque(map(self.do_someting, range(10))) 
```

但请注意，`for`对于代码的任何未来维护者来说，简单地使用循环更具可读性：

```
for i in range(10):
    self.do_someting(i) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-05T11:37:15.707

在 Python 3 之前，map() 返回一个列表，而不是迭代器。所以你的例子可以在 Python 2.7 中运行。

list() 通过迭代其参数来创建一个新列表。（ list() 不仅仅是从说元组到列表的类型转换。所以 list(list((1,2))) 返回 [1,2]。）所以 list(map(...)) 向后兼容蟒蛇 2.7。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-27T13:19:41.190

我只想添加以下内容：

`With multiple iterables, the iterator stops when the shortest iterable is exhausted`[ [https://docs.python.org/3.4/library/functions.html#map](https://docs.python.org/3.4/library/functions.html#map) ]

Python 2.7.6（默认，2014 年 3 月 22 日，22:59:56）

```
>>> list(map(lambda a, b: [a, b], [1, 2, 3], ['a', 'b']))
[[1, 'a'], [2, 'b'], [3, None]] 
```

Python 3.4.0（默认，2014 年 4 月 11 日，13:05:11）

```
>>> list(map(lambda a, b: [a, b], [1, 2, 3], ['a', 'b']))
[[1, 'a'], [2, 'b']] 
```

这种差异使得简单包装的答案`list(...)`并不完全正确

同样可以通过以下方式实现：

```
>>> import itertools
>>> [[a, b] for a, b in itertools.zip_longest([1, 2, 3], ['a', 'b'])]
[[1, 'a'], [2, 'b'], [3, None]] 
```

# android - 在 Android 中相对于 ActionBar 定位项目

> ID：13623635
> 
> 赞同：2
> 
> 时间：2012-11-29T10:26:19.660
> 
> 标签：android, android-layout, android-actionbar, android-view

我曾经有一个不使用 ActionBar 的 Activity。布局是一个`RelativeLayout`宽度和高度仅与父级匹配的布局。它允许用户在事件中使用[以下代码的一部分](https://stackoverflow.com/questions/10073304/how-can-i-drag-and-drop-views-within-android-relativelayout/10075146#10075146)拖动按钮`onTouch`：

```
MarginLayoutParams marginParams = new MarginLayoutParams(v.getLayoutParams());
int left = (int) event.getRawX() - (v.getWidth() / 2);
int top  = (int) event.getRawY() - (v.getHeight());
marginParams.setMargins(left, top, 0, 0);
RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(marginParams);
v.setLayoutParams(layoutParams); 
```

所有花花公子 - 按钮在手指下方移动并正确放置在屏幕上的位置。然而，现在我启用了 ActionBar，当单击时，按钮突然在手指*下方移动了约 30 像素。*为了说明这种行为，这是我曾经拥有的（在左侧）和现在发生的事情（在右侧）：

![](../Images/12cb27778ba51c2eaa822deb52bd0732.png)

我认为这是因为 ActionBar 现在用它自己的高度取代了所有东西。当然，我不希望这种情况发生，或者至少纠正这种情况，所以：

*   如何在`setMargins()`不使用硬编码值的情况下根据 ActionBar 的实际大小移动位置？

*   我怎样才能防止 ActionBar 首先改变一切？换句话说，我如何确保我的按钮相对于 ActionBar 的底线和手指指向的位置？

这就是我要的：

![](../Images/448962d7a65ea510db55d3b2148f7477.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T04:45:21.563

（我使用的方法是我的代码并且它有效。我将在这里告诉你同样的）

*   我认为`setMargin()`在这里使用并不是一件聪明的事情。相反，您可以使用`setX()`and`setY()`方法。

*   每当从全屏活动切换到带有操作栏的活动时，就会遇到这样的问题。您将需要调整操作栏的高度。而不是使用`getLayoutParams()`，使用 `getLocationInWindow()`或`getLocationOnScreen()`。由于`getRawX()`并`getRawY()`使用视图的屏幕位置，因此应该使用这些 API。

# error-handling - 当我从控制器操作中抛出异常时，自定义错误处理结果与 InvalidOperationException

> ID：13623636
> 
> 赞同：1
> 
> 时间：2012-11-29T10:26:20.260
> 
> 标签：error-handling

**网络配置：**

```
<customErrors mode="On" defaultRedirect="~/Error/">
    <error statusCode="404" redirect="~/Error/NotFound/"/>
    <error statusCode="403" redirect="~/Error/AccessDenied/"/>
<\customErrors> 
```

**过滤器配置.cs：**

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters) 
{
    filters.Add(new HandleErrorAttribute());
    filters.Add(new LtcAuthorizeAttribute());
} 
```

我从控制器操作中抛出异常以在我的自定义错误视图中查看异常：

```
public ActionResult Index(int id) 
{
    if (id == 69732645)
    {
        throw new Exception("This is just to test an Error.");
    }
    var repository = ClaimsHelper.GetRepository();
    var rfbEntity = repository.Single<RequestForBenefit>(x => x.RfbId == id);
    var rfbModel = Mapper.Map<RequestForBenefit, RequestForBenefitModel>(rfbEntity);
    ViewBag.EobList = Mapper.Map<ICollection<EpisodeOfBenefit>, ICollection<EpisodeOfBenefitModel>>(rfbModel.EpisodeOfBenefit);
    repository.Dispose();
    return View(rfbModel);
} 
```

错误控制器和索引操作：

```
public class ErrorController : Controller 
{
    //
    // GET: /Error/
    public ActionResult Index()
    {
        return View("Error");
    }
} 
```

当抛出异常时，会发生另一个异常，`InvalidOperationException`它会显示在视图上，而不是我故意从 Index 操作中抛出的异常。

这是错误视图中出现的内容：

```
Controller: Error 
Action: Index 
Message: Object reference not set to an instance of an object. 

Controller: 
at ASP._Page_Views_Error_Error_cshtml.Execute() in c:\Workspace\LTCClaims\Branches\Active\LtcClaims-2013Q1\Univita.LtcClaims\Univita.LtcClaims\Views\Error\Error.cshtml:line 12 
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy() 
at System.Web.Mvc.WebViewPage.ExecutePageHierarchy() 
at System.Web.WebPages.StartPage.RunPage() 
at System.Web.WebPages.StartPage.ExecutePageHierarchy() 
at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) 
at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance) 
at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer) 
at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context) 
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult) 
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17() 
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) 
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19() 
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult) 
at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20() 
at System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult) 
```

有人可以告诉我为什么`OperationInvalidException`我的投掷后会发生`Exception`吗？我错过了什么吗？

# windows-phone-7 - WP7如何启动音频代理进程

> ID：13623642
> 
> 赞同：0
> 
> 时间：2012-11-29T10:26:30.663
> 
> 标签：windows-phone-7, audio, process, agent

我正在`BackgroundAudioPlayer`为我的 Windows Phone 7 应用程序使用代理。我知道`AudioPlayer`该类存在于另一个进程中（我们称之为音频代理进程）。

我听说“理论上音频播放器代理的过程可以随时启动和停止”。

有时，当我在 UI 上按下播放时，代理进程似乎没有启动，并且代理代码没有收到任何`OnUserAction`事件。这会导致我的应用程序行为错误。

当我想播放音乐时，我希望代理进程准备好。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T21:32:58.327

也许您需要在调度程序中开始播放音频？类似下一个：

> Dispatcher.BeginInvoke(() => { StartAudioOrSoOn(); });

尝试查看 Microsoft 为 Windows Phone 开发人员提供的示例：

[Windows Phone 示例：通过代码学习](http://code.msdn.microsoft.com/wpapps/site/search?query=BackgroundAudioPlayer&f%5B0%5D.Value=BackgroundAudioPlayer%20&f%5B0%5D.Type=SearchText&ac=8)

# html - 如何阻止 Wordpress 中的下拉菜单突出显示？

> ID：13623647
> 
> 赞同：0
> 
> 时间：2012-11-29T10:26:49.320
> 
> 标签：html, css, wordpress

我有一个带有下拉菜单的 Wordpress 菜单。我遇到的问题是当父页面被突出显示时，下面的下拉项目也被突出显示。这是一个问题，因为父级用图像突出显示。下拉菜单需要用颜色突出显示。当父页面不是当前页面时，它可以正常工作。有人能帮忙吗？

```
#navbar li.current_page_item a {
    background:url(../images/activetab.png);
    width:95px;
    height:30px;    
}

#navbar li li.current_page_item a {
    background:#e9536c;
    font-size:12pt;
    width:150px;    
    color:black;    
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:54:29.613

我很确定您的第二个选择器是错误的。试试这个代码：

```
#navbar li.current_page_item a {
    background:url(../images/activetab.png);
    width:95px;
    height:30px;    
}

#navbar li.current_page_item li a,
#navbar li li.current_page_item a {
    background:#e9536c;
    font-size:12pt;
    width:150px;    
    color:black;    
} 
```

这将针对作为当前页面项目的子元素的 li，以及作为当前页面项目的第二（或更多）级 li。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:39:02.233

或使用

> 背景：#e9536c！重要；

它将覆盖您以前的 css 样式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:31:14.417

也许你可以试试这个

```
#navbar li li.current_page_item a {
background-image:none;
background:#e9536c;
font-size:12pt;
width:150px;    
color:black;   
} 
```

这应该禁用下拉菜单中的背景图像。

# java - Jave EE 应用程序无法识别 Google Visualization API

> ID：13623650
> 
> 赞同：8
> 
> 时间：2012-11-29T10:27:00.123
> 
> 标签：java, jsp, jakarta-ee, import, google-visualization

我想在我的 Java EE 应用程序中包含 Google Visualization API 的图表。但是，无论我做什么，应用程序都无法识别 API。我以前用过这样的，所以我不明白我做错了什么。有人可以看看我的代码并告诉我我做错了什么吗？谢谢！

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>    
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<link type="text/css" href="LOCATION/STYLENAME.css" rel="stylesheet"/>

<script src="/tis/javascript/common/jquery.inlinemenu.js" type="text/javascript"></script>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
 <script type="text/javascript">

      // Load the Visualization API and the piechart package.
      google.load('visualization', '1.0', {'packages':['corechart']});

// Set a callback to run when the Google Visualization API is loaded.
      google.setOnLoadCallback(drawChart);

      // Callback that creates and populates a data table,
      // instantiates the pie chart, passes in the data and
      // draws it.
      function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
          ['Mushrooms', 3],
          ['Onions', 1],
          ['Olives', 1],
          ['Zucchini', 1],
          ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night',
                       'width':400,
                       'height':300};

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      }
    </script>

<!--Div that will hold the pie chart-->
    <div id="chart_div"></div> 
```

错误如下：

1.  ReferenceError：谷歌未定义
2.  方法“setOnLoadCallback”带有下划线并表示：未解析的函数或方法“setOnLadCallback”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-12T07:09:08.663

为什么不尝试禁用浏览器中的所有插件，特别是一个名为“断开连接”的插件。我遇到了同样的问题，删除插件后效果很好。一些插件可能会干扰谷歌 API 库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T15:55:06.533

尝试修改这行代码：

```
google.load('visualization', '1', {packages: ['corechart']}); 
```

对此：

```
google.load('visualization', '1', {packages: ['corechart'], callback : drawChart}); 
```

# c# - 逐行分析，如果符合条件则存储，否则忽略

> ID：13623651
> 
> 赞同：2
> 
> 时间：2012-11-29T10:27:05.327
> 
> 标签：c#, filter, streamreader

我在这个上挖了很多，但没有找到我正在寻找的东西。

输入：多行（数百行，偶尔数千行）ASCII 文本，从 97 个字符长到 500 多个字符。我是否要保留此数据的标准纯粹包含在前 3 个字符中（总是数字 -任意值 100,200 和 300 是我感兴趣的值）。

所需的输出只有以 100、200 或 300 开头的那些，其余的我可以忽略。

这就是我的流式阅读器，目前输出到控制台：

```
using System;
using System.Collections.Generic;
using System.IO;

class Program
{
public void Do
{

    // Read in a file line-by-line, and store in a List.

    List<string> list = new List<string>();
    using (StreamReader reader = new StreamReader("File.dat"))
    {
        string line;
        while ((line = reader.ReadLine()) != null)
        {
            list.Add(line); // Add to list.
            Console.WriteLine(line); // Write to console.
        //    Console.ReadLine();
        }
    }
}
} 
```

我希望写一行字

```
IF {
FIRST3CHAR != (100,200,300) }
then skip, 
```

但我不确定如何定义 FIRST3CHAR 类。这是将对原始数据执行的唯一过滤器。

之后，我将根据其中包含的其他标准分析这个过滤后的数据集，但在寻求任何帮助之前，我会自己试一试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:34:03.457

此代码更具可读性，并且可以执行您想要的操作：

```
var allowedNumbers = new[]{ "100", "200", "300" };
IEnumerable<String> lines = File
                   .ReadLines("File.dat")
                   .Where(l => allowedNumbers.Any(num => l.StartsWith(num))); 
```

现在您可以枚举这些行，例如`foreach`：

```
foreach(string line in lines)
{
    Console.WriteLine(line); // Write to console.
} 
```

由于您想将这些行添加到 a`List<string>`中，您可以使用`Enumerable.ToList`而不是`foreach`：

```
List<string> list = lines.ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:31:09.987

在最简单的级别：

```
if(line.StartsWith("100") || line.StartsWith("200") || line.StartsWith("300"))
{
    list.Add(line); // Add to list.
    Console.WriteLine(line); // Write to console.
} 
```

如果文件很大（如数十万行），那么将其实现为迭代器块也可能值得考虑。但是“开始”测试非常简单。

如果您需要更大的灵活性，我会考虑使用正则表达式；例如：

```
static readonly Regex re = new Regex("^[012]00", RegexOptions.Compiled);

...
while (...)
{
    if(re.IsMatch(line))
    {
        list.Add(line); // Add to list.
        Console.WriteLine(line); // Write to console.
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:30:53.390

您是否有理由不将此条件添加到循环中？

```
while ((line = reader.ReadLine()) != null)
{
    var beginning = line.Substring(0, 3);
    if(beginning != "100" && beginning != "200" && beginning != "300")
        continue;
    list.Add(line); // Add to list.
    Console.WriteLine(line); // Write to console.
} 
```

# javascript - 在 IE8 中关闭子弹出窗口失败

> ID：13623652
> 
> 赞同：1
> 
> 时间：2012-11-29T10:27:09.267
> 
> 标签：javascript, jquery, window

我在关闭子弹出窗口时遇到问题。当我单击父窗口上的链接时，会打开一个新的子窗口（此窗口用于使用 URL 启动正确的软件）。我的目标是在启动所需工具后立即关闭此子窗口，使父窗口保持打开状态。

这是我的代码：

```
<a href="<s:property value="URL" />" rel="notes" target="_self"> 
```

jQuery：

```
$recherche_globale_a_rel.filter('[rel="notes"]').click(function () {
    var myPage = window.open($(this).attr('href'));
    myPage.close();
    return false;
}); 
```

问题是使用firefox时子窗口正确关闭，但在我使用IE（IE8）时没有关闭。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:38:29.023

好像你在这里有问题：

```
<a href="<s:property value="URL" />" rel="notes" target="_self"> 
```

由于双引号中有双引号，请尝试更改它：

```
<a href="<s:property value='URL' />" rel="notes" target="_self"></a> 
```

或者：

```
<a href="<s:property value=\"URL\" />" rel="notes" target="_self"></a> 
```

# iphone - Objective-C 中的自定义 BOOL getter/setter

> ID：13623657
> 
> 赞同：0
> 
> 时间：2012-11-29T10:27:14.400
> 
> 标签：iphone, objective-c, boolean, setter, getter

在我的 iPhone 应用程序中，我有一个名为`isAddressCell`. 这很好用，我可以毫无问题地调用它：

```
[cell setIsAddressCell:YES]; 
```

但是，我环顾四周创建了一个自定义 setter 方法，但没有成功创建一个，看来我的 BOOL 从未真正设置过。我尝试过失败的setter方法代码。

所有我想做的事情，当`setIsAddressCell`被调用时，根据值，某些其他动作会发生。

当前的非功能性设置方法：

```
@property (nonatomic, assign, setter = setIsAddressCell:) BOOL isAddressCell;

-(void)setIsAddressCell:(BOOL)addressCell
{
    if (addressCell)
    {
        //Do stuff...
    }
    else
    {
        //Do different stuff...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:39:42.453

我是一个假人。告诉我是否仍然做错了，但我应该这样：

```
-(void)setIsAddressCell:(BOOL)addressCell
{
    if (addressCell)
    {
        //Do stuff...
    }
    else
    {
        //Do different stuff...
    }

    isAddressCell = addressCell;
} 
```

**isAddressCell = 地址单元；**

那一点是关键，我愚蠢地没有在手动设置方法的末尾设置值。多哈。

# wpf - 无法在同一视图中添加两个用户控件

> ID：13623658
> 
> 赞同：0
> 
> 时间：2012-11-29T10:27:14.653
> 
> 标签：wpf, caliburn.micro, wpf-4.0, caliburn

我有一个列表视图，其中有两个子视图。一个是显示视图，另一个是编辑视图。这是我定义列表（父）视图的方式。请注意，我希望两个子用户控件在父控件中占据不同的空间。

```
<UserControl x:Class="RelayAnalysis_UI.Views.Relays.RelayListView"
    ....

    <ContentControl x:Name="GroupDetail" Grid.Row="2" />
    <TabControl x:Name="Items" Grid.Column="0" Style="{StaticResource TabControlStyle}" Margin="5,0,0,0"/>
</UserControl> 
```

然后在我的视图模型中，我根据用户响应以下列方式激活这些项目

**查看模型**

```
[Export(typeof(RelayListViewModel))]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class RelayListViewModel : Conductor<IScreen>.Collection.OneActive, IHandle<Group> {
    ....
    public void Edit() { //Requested Edit
        RelayEditViewModel viewModel = TryAndLocateViewModel(SelectedRelay.Group.Rack.Id, SelectedRelay.Group.Id);
        ActivateItem(viewModel);
    }
    ....

    public void ViewGroupDetail(Relay relay) { //Requested View
        GroupDetailViewModel viewModel = container.GetExportedValue<GroupDetailViewModel>();
        ActivateItem(viewModel);
    } 
```

上面的代码有效，但细节视图加载在选项卡空间（用于编辑视图的空间）中。实际上，ActivateItem(viewModel) 确实选择了要显示的正确视图类型，但它加载到了显示视图的错误位置，即显示视图加载到了屏幕上的编辑视图空间中。当然，我错过了一些明显的东西。

总之，我们如何让定义在 Parent UserControl 中的两个 UserControl 在自己的空间中激活？

**编辑 - 1：**

这是两个屏幕截图，分别显示了我需要加载**编辑**视图和**详细**视图的位置。

![已加载编辑屏幕](../Images/e08bcfd35066ef8ca57a64cc8c4f4a32.png)

![查看屏幕已加载（不应在编辑区域中加载）](../Images/baa8a103e4bcf791b19f3856b62905e8.png)

正如您在第二个屏幕截图中看到的那样，详细视图被加载到详细信息区域以及编辑区域（选项卡）中。我不希望详细视图仅出现在详细信息区域中。编辑区仅用于编辑视图。

这是我用来生成屏幕截图的代码。

**包含两个视图的主视图**

```
<UserControl x:Class="RelayAnalysis_UI.Views.Relays.RelayListView"
    <Grid>
         ....
                     <ContentControl x:Name="GroupDetail" HorizontalContentAlignment="Left" 
                                        cal:View.Context="GroupDetail" cal:View.Model="{Binding ActiveItem}"/>
                    <TabControl x:Name="Items" Grid.Column="0" Style="{StaticResource TabControlStyle}" Margin="5,0,0,0"
                                cal:View.Context="RelayEdit" cal:View.Model="{Binding ActiveItem}"/>
     </Grid>
</UserControl> 
```

**编辑2：** 我认为我非常接近让它工作。根据您的建议，我修改了 Main(Parent) 容器，如下所示。

```
<UserControl x:Class="RelayAnalysis_UI.Views.Relays.RelayListView"
            <ContentControl x:Name="GroupDetail" HorizontalContentAlignment="Left" />
                <TabControl x:Name="Items" Grid.Column="0" Style="{StaticResource TabControlStyle}" Margin="5,0,0,0" /> 
```

编辑屏幕和详细信息屏幕现在出现在适当的位置。但是，没有调用 Detail ViewModels **OnActivate**，因此我得到了一个空白的详细视图，没有填充任何变量。详细信息视图字段的所有加载都在**OnActivate()**覆盖上完成。这是我的 GroupDetailViewModel 的定义方式

```
[Export(typeof(GroupDetailViewModel))]
[PartCreationPolicy(CreationPolicy.Shared)]
public class GroupDetailViewModel : Screen {
    ...
    protected override void OnActivate() {
        base.OnActivate();
    ..
    } 
```

所以当然，我缺少一些属性。还是我必须在 GroupDetailViewModel 上调用一些方法来手动加载详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:10:06.760

*删除了原始答案，因为它很长并且没有太大帮助*

**编辑：**

好的，请忽略上述内容 - 看起来您正试图在两个不同的视图模型上加载两个不同的视图，据我所知，这不是`Context`设计的目的。该`Context`属性在同一视图模型上加载两个不同的视图，例如在您的 XAML 中：

```
<ContentControl x:Name="GroupDetail" HorizontalContentAlignment="Left" 
    cal:View.Context="GroupDetail" 
    cal:View.Model="{Binding ActiveItem}"/>
<TabControl x:Name="Items" Grid.Column="0" Style="{StaticResource  TabControlStyle}" Margin="5,0,0,0" 
    cal:View.Context="RelayEdit" 
    cal:View.Model="{Binding ActiveItem}"/> 
```

给定名称为`RelayEditViewModel`通过`ActivateItem()`CM 激活的 VM 将尝试加载以下视图：

`RelayEdit.GroupDetail`用于内容控制

`RelayEdit.RelayEdit`用于选项卡控件

看：

[http://caliburnmicro.codeplex.com/wikipage?title=View%2fViewModel%20Naming%20Conventions&referringTitle=Documentation](http://caliburnmicro.codeplex.com/wikipage?title=View%2fViewModel%20Naming%20Conventions&referringTitle=Documentation)

...

如果您尝试加载另一个 ViewModel，则相同的约定将适用于查找视图

`GroupDetailViewModel`结果是

`GroupDetail.GroupDetail`用于内容控制

`GroupDetail.RelayEdit`用于选项卡控件

听起来这不是您想要的（而且我不确定为什么要加载任何内容-您的视图在哪个命名空间中？您是否自定义了视图定位器？）

我仍在尝试了解您需要的生命周期支持，但听起来您希望编辑视图进行生命周期管理（因为您希望加载/保存/保护类型支持）但要阅读详细视图 -只有并且不在乎它是否在没有被看守的情况下关闭

在这种情况下，您可能希望向 ViewModel 添加一个属性，该属性将保存对详细视图模型的引用，但不要激活它......只需设置属性而不调用`ActivateItem(vm)`

例子：

```
[Export(typeof(RelayListViewModel))]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class RelayListViewModel : Conductor<IScreen>.Collection.OneActive, IHandle<Group> {
....
// Backing field + prop to hold the details view - the content control will bind to this
private IScreen _details;
public IViewAware Details { get { } set { } } // Implement standard NotifyOfPropertyChange here for this property

public void Edit() { //Requested Edit
    RelayEditViewModel viewModel = TryAndLocateViewModel(SelectedRelay.Group.Rack.Id, SelectedRelay.Group.Id);
    ActivateItem(viewModel);
}
....

public void ViewGroupDetail(Relay relay) { //Requested View
    GroupDetailViewModel viewModel = container.GetExportedValue<GroupDetailViewModel>();
    // Instead of activating, just assign the VM to the property and make sure Details calls NotifyOfPropertyChange to let CM know to start the binding logic
    Details = viewModel;
} 
```

然后在你的 XAML

```
<!-- Just bind the details view to the Details property -->
<ContentControl x:Name="Details" HorizontalContentAlignment="Left" /> 
<!-- Leave this as-is, as it's working ok -->
<TabControl x:Name="Items" Grid.Column="0" Style="{StaticResource  TabControlStyle}" Margin="5,0,0,0" /> 
```

（我假设您使用的是`TabControl`s 上面的默认约定，但如有必要进行调整）

只要您`Context`相应地设置属性，您就可以将同一 VM 用于详细信息和编辑视图。

让我知道这是否有帮助

编辑：

只是为了回答关于 MVVM 和耦合等的问题......

您所做的只是从几个更简单的视图模型中组合一个更复杂的视图模型（因此从几个更简单的视图中组合一个更复杂的视图）。只要您对详细信息 VM 的引用不是具体类型，VM 之间的耦合就会非常松散。您可以将实现该接口的任何视图模型类型分配到`Detail`主 VM 上的属性中，CM 将尝试为其定位视图并构建接口。这很好（如果需要，您可以使用您的 IoC 获取详细信息窗口的类型）

如果您的详细信息视图需要生命周期，您应该继承 from `Screen`，但我怀疑您的详细信息视图需要激活（因为它只是一个详细信息视图并且只准备好）所以只需实现`IViewAware`和继承 from`PropertyChangedBase`就可以了。然而，编辑视图需要有生命周期，因此应该继承自`Screen.`

`Conductor`已经包含一个`ActiveItem`属性，并为通过激活的子项目提供生命周期管理`ActivateItem()`，您所做的就是为您的导体创建一个额外的“螺栓固定”属性，该属性引用额外的 vm（即您需要`ActiveItem`和`Details`）

# javascript - 我无法在 Javascript 中生成平滑的 Simplex 噪声

> ID：13623663
> 
> 赞同：3
> 
> 时间：2012-11-29T10:27:26.927
> 
> 标签：javascript, textures, perlin-noise, simplex-noise

我已经尝试了所有方法并阅读了我在互联网上看到的关于 Perlin Noise 或 Simplex Noise 的每一个链接，甚至剖析了一些我认为可以正常工作的 Javascript 示例。

但我仍然得到非常随机的图像......基本上只是电视静态图像。

我的代码如下。我正在使用随机数生成器，以便我可以播种一个值，但我也尝试过 Math.random。

据我所知，在不同倍频程生成的不同图像没有正确插值，或者我从噪声函数转换为 RGB 值的方式是错误的（我试图解决这两个问题。 ..)。

```
if (!this.Prng) {
    var Prng = function() {
        var iMersenne = 2147483647;
        var rnd = function(seed) {
            if (arguments.length) {
                that.seed = arguments[0];
            }
            that.seed = that.seed*16807%iMersenne;
            return that.seed;
        };
        var that = {
            seed: 123,
            rnd: rnd,
            random: function(seed) {
                if (arguments.length) {
                    that.seed = arguments[0];
                }
                return rnd()/iMersenne;
            }
        };
        return that;
    }();
}

var CSimplexNoise = function(r)
{
    this.grad3 =    [[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],
                    [1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];
    var p = [];
    for(i = 0; i < 256; i++)
        p[i] = Math.floor(r.random()*256);
    this.perm = new Array();
    for(i = 0; i < 512; i++)
    {   
        this.perm[i] = p[i & 255];
    }

}

CSimplexNoise.prototype.dot = function(g,x,y)
{
    return g[0]*x + g[1]*y;
}

CSimplexNoise.prototype.GenerateSimplexNoise = function(x,y,octaves,persistence)
{
    var total = 0;

    for(i=0; i < octaves-1; i++)
    {
        var freq = Math.pow(2,i);
        var amp = Math.pow(persistence,i);

        total += this.InterpolatedNoise(x*freq,y*freq) * amp;
    }

    return total;
}

CSimplexNoise.prototype.InterpolatedNoise = function(x,y)
{
    var xInt = Math.floor(x);
    var xFrac = x - xInt;
    var yInt = Math.floor(y);
    var yFrac = y - yInt;

    var v1 = this.SmoothNoise(xInt,yInt);
    var v2 = this.SmoothNoise(xInt + 1,yInt)
    var v3 = this.SmoothNoise(xInt,yInt+1)
    var v4 = this.SmoothNoise(xInt + 1, yInt + 1);

    var i1 = this.LinearInterpolate(v1,v2,xFrac);
    var i2 = this.LinearInterpolate(v3,v4,xFrac);

    return this.CosineInterpolate(i1,i2,yFrac);
}

CSimplexNoise.prototype.LinearInterpolate = function(a,b,x)
{
    return a*(1-x) + b*x;
}

CSimplexNoise.prototype.CosineInterpolate = function(a,b,x)
{
    var f = (1 - Math.cos(x*Math.PI)) * 0.5;
    return a*(1-f) + b*f;
}

CSimplexNoise.prototype.SmoothNoise = function(x,y)
{
    var corners = (this.Noise(x-1,y-1) + this.Noise(x+1,y-1) + this.Noise(x-1,y+1) + this.Noise(x+1,y+1)) / 16;
    var sides = (this.Noise(x-1,y) + this.Noise(x+1,y) + this.Noise(x,y-1) + this.Noise(x+1,y+1)) / 8;
    var center = this.Noise(x,y) / 4;
    return corners + sides + center;
}

CSimplexNoise.prototype.Noise = function(xin, yin)
{
    var n0, n1, n2;

    var F2 = 0.5*(Math.sqrt(3)-1);
    var s = (xin+yin)*F2;
    var i = Math.floor(xin+s);
    var j = Math.floor(yin+s);

    var G2 = (3-Math.sqrt(3))/6;
    var t = (i+j)*G2;
    var X0 = i-t;
    var Y0 = j-t;
    var x0 = xin-X0;
    var y0 = yin-Y0;

    var i1,j1;
    if(x0 > y0)
    {
        i1 = 1;
        j1 = 0;
    }
    else
    {
        i1 = 0;
        j1 = 1;
    }

    var x1 = x0 - i1 + G2;
    var y1 = y0 - j1 + G2;
    var x2 = x0 - 1 + 2 * G2;
    var y2 = y0 - 1 + 2 * G2;

    var ii = i & 255;
    var jj = j & 255;
    var gi0 = this.perm[ii + this.perm[jj]] % 12;
    var gi1 = this.perm[ii + i1 + this.perm[jj + j1]] % 12;
    var gi2 = this.perm[ii + 1 + this.perm[jj + 1]] % 12;

    var t0 = 0.5 - x0 * x0 - y0 * y0;
    if(t0 < 0)
        n0 = 0;
    else
    {
        t0 *= t0;
        n0 = t0 * t0 * this.dot(this.grad3[gi0],x0,y0)
    }

    var t1 = 0.5 - x1 * x1 - y1 * y1;
    if(t1 < 0)
        n1 = 0;
    else
    {
        t1 *= t1;
        n1 = t1 * t1 * this.dot(this.grad3[gi1],x1,y1);
    }

    var t2 = 0.5 - x2 * x2 - y2 * y2;
    if(t2 <0 ) 
        n2 = 0;
    else 
    {
        t2 *= t2;
        n2 = t2 * t2 * this.dot(this.grad3[gi2],x2,y2);
    }

    return 70 * (n0 + n1 + n2);
}

$(document).ready(function(){

    var context = $('#screen')[0].getContext("2d");
    var w = 100;
    var h = 100;
    var data = context.createImageData(w,h);

    var simplexNoise = new CSimplexNoise(Prng);

    for(y = 0; y < h; y++)
    {
        for(x = 0; x < w; x++)
        {
        //  var newVal = ((simplexNoise.GenerateSimplexNoise(x,y,5,0.25) - -1) / (1 - -1)) * (255 - 0);
            var newVal2 = simplexNoise.GenerateSimplexNoise(x,y,5,0.5)
            var newVal = Math.floor(newVal2*256);
            newVal = Math.abs(newVal * 2)-0.5;
            data.data[((h * y) + x) * 4] = newVal;
            data.data[((h * y) + x) * 4+1] = newVal;
            data.data[((h * y) + x) * 4+2] = newVal;
            data.data[((h * y) + x) * 4+3] = 255;

        }
    }

    context.putImageData(data,0,0);

}) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T16:05:21.210

尝试采样 simplexNoise.GenerateSimplexNoise(x * 0.05, y * 0.05, 5, 0.5) 问题可能是您的样本相距太远。（这会导致明显的随机行为，因为单纯形噪声在采样之前可能会经过半个波长以上）

修订：更新了上面的数字...您实际上可能需要减少样本，以便在给定波长中有 20 个单纯形噪声。大多数单纯形噪声的平均波长为 1，因此 0.05 应该可以解决问题。此外，您可能希望一开始只使用一个八度音阶进行测试。

# jquery-mobile - 不再为 jQuery Mobile 可折叠内容缩短标题？

> ID：13623672
> 
> 赞同：1
> 
> 时间：2012-11-29T10:27:55.810
> 
> 标签：jquery-mobile

我有以下 jQuery Mobile 的可折叠内容。如何停止缩短标题？

目前文本被截断，所以它显示为“真的很长的标题......”我是否需要使用 css 手动执行此操作，或者是否有我可以更改的 JQB 设置？

```
 <div data-role="collapsible">
        <h4>
            Really long heading goes here thats wider than the page width
        </h4>
        <p>
            Content Content Content Content Content Content 
        </p>
    </div> 
```

这是文档 [http://jquerymobile.com/test/docs/content/content-collapsible.html](http://jquerymobile.com/test/docs/content/content-collapsible.html)

似乎这个 CSS 导致了这种行为。如果没有标准的 JQM 方法来执行此操作，我可以覆盖此规则。

.ui-btn-inner { 空白：nowrap; }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:54:54.763

您需要删除此 css：

```
white-space: nowrap; 
```

从它的内部跨度（跨度女巫包装的文本）。或将其替换为：

```
white-space: normal; 
```

或者更改 jQM css 文件（.ui-btn-inner），但这也会影响使用此类的所有其他元素。

或使用这一行：

```
$('div[data-role="collapsible"] h4 a span span.ui-btn-text').css({'white-space':'normal'}); 
```

没有其他办法，或者至少不买改变一些jQM UI元素属性。

# javascript - AngularJS - 在 $compile 之后，在 html 中调用新函数多次运行

> ID：13623673
> 
> 赞同：2
> 
> 时间：2012-11-29T10:27:56.693
> 
> 标签：javascript, angularjs

问题是，我有一个简单的指令来从支持的（JSP 页面）获取数据（它有一个从角度调用函数来为 js 模型设置一些值，但是当我得到响应时调用函数是 x 次....

这是样本

[http://plnkr.co/edit/OISkbF](http://plnkr.co/edit/OISkbF)

当您看到控制台日志时，然后单击“加载表单 JSP”按钮，

首先是 3 次调用方法，接下来是 6 次......

这是 google grupe angularJS 中的主题 [https://groups.google.com/d/msg/angular/18a_Iqkdbtk/eDuZ4OLfwJMJ](https://groups.google.com/d/msg/angular/18a_Iqkdbtk/eDuZ4OLfwJMJ)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:10:37.997

我在你的例子中修复了一些东西，现在它只调用了两次函数（这实际上是正确的，因为这就是*$digest*的工作方式，它会调用绑定直到没有变化，所以每个至少 2 次。

你的 plunker 的工作叉：[http ://plnkr.co/edit/Aw6S6T?p=preview](http://plnkr.co/edit/Aw6S6T?p=preview)

关键部分在这里：

```
app.directive('angularHtmlBind', function($compile, $http) {
return function(scope, elm, attrs) {
    var $elm = $(elm),
        url = 'search.jsp',
        html,
        currentScope;

    function getHTML(url) {
      $http.get('search.jsp').success(function(data) {
        html = data;
        currentScope = scope.$new();
        $elm.html(html);         
        $compile($elm.contents())(currentScope);       
        }).error(function(data, status, headers, config) {    
            console.log(data);
        }); 
    }        
    scope.$watch(attrs.shown, function(value) {                           
      if (value) {            
        getHTML(url);            
      } else if (currentScope) {            
        $elm.contents().remove();            
        currentScope.$destroy()            
      }          
    });
};
}); 
```

您的实施存在两个问题，您是：

1.  调用*$http*并期待下面行中的结果，这是一个异步调用，所以我已将您的*$compile*移至成功处理程序
2.  每次加载 jsp 文件时重用相同的范围，因此将相同的对象传递给新创建的控制器（每次*$compile*它都会创建控制器的新实例）。我正在为每个 jsp 文件创建一个新范围，然后在不再使用它时将其销毁。

当然，这个例子可以进一步改进，但我假设您多次加载示例文件只是为了说明问题；）如果没有，则调用它一次，然后使用存储内容的*html var。*

# c# - 写入应用程序事件源是否可以接受？

> ID：13623674
> 
> 赞同：9
> 
> 时间：2012-11-29T10:28:06.253
> 
> 标签：c#, event-log

在我们的应用程序中存在某些情况下会发生非致命错误并且应用程序会恢复。

将某些可导入项目填充到选择列表时无法正确识别这些项目的示例。这些错误不会使应用程序崩溃，但会提醒用户某些项目无法加载。

在这种情况下，错误将作为警告记录到应用程序事件日志中。这是应用程序从非致命错误中恢复，但记录到事件日志允许我们在需要时查看原始错误。

我们的问题是该软件需要能够使用高级用户帐户安装。不是管理员帐户，我们将无法为应用程序创建自定义事件源。

目的是将错误写入“应用程序”事件源（已存在出现在应用程序事件日志中）。但是，这样做会导致类似以下的文本也被包含在内。

*找不到来自源应用程序的事件 ID 0 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。*

这是因为我们写的时候EventID是0。这种方法可以完成工作，但是有更好的方法吗？是否有一种非管理员方式来指定应用程序事件源的 EventID 以表明它来自我们的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:42:03.953

您可以将应用程序事件 ID 作为参数传递：（示例：234）

```
EventLog.WriteEntry("Application", "your log message here", EventLogEntryType.Warning,  234); 
```

进一步阅读 EventLog.WriteEntry 方法

[http://msdn.microsoft.com/en-us/library/xzwc042w.aspx](http://msdn.microsoft.com/en-us/library/xzwc042w.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:13:09.557

您看到的错误*为找不到来自源应用程序的事件 ID 0 的描述。引发此事件的组件未安装在本地计算机上，或者安装已损坏。您可以在本地计算机上安装或修复组件。*是应用程序源的注册事件消息文件没有事件 id 0 条目的结果。您看到的消息是从事件消息文件中获取消息 id 的模板并使用事件有效负载对其进行格式化的结果。

我一般不建议您劫持您不拥有的资源。消费这些事件的人对它们的含义和它们携带的信息有特定的期望。

关于*是否有一种非管理员的方式来指定应用程序事件源的 EventID 以表明它来自我们的应用程序？*，您认为事件 id 规范意味着什么？来源决定了事件*的来源。*

编辑：

无论您是否提供 0 以外的事件 ID，您都会在事件查看器中收到错误，因为该源没有注册事件消息文件。即使是这样，您也必须使用在消息文件中有条目的事件 ID（混淆事件的消费者）或没有条目但仍然收到错误的事件 ID。

# actionscript-3 - 在 Actionscript 中调用函数：“术语未定义且没有属性”

> ID：13623677
> 
> 赞同：0
> 
> 时间：2012-11-29T10:28:15.520
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

我正在编写一个遗传适应性程序，我目前正在编写一些代码来计算每个生物体的“适应性”值。

我正在尝试调用一个初始化每个基因型的函数；

```
function random_genotype_initialisation():void 
{
    //stuff
} 
```

通过使用我在 C# 和 Java 中习惯的典型方法调用；

```
random_genotyoe_initialisation(); 
```

但是，这会返回错误：“TypeError: Error #1010: A term is undefined and has no properties。”

我在其他地方寻求帮助，并找到了一些建议，例如声明一个变量并“调用”它。

```
var rep = replicate_new_generation();
rep.call(); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T17:18:11.603

C# 与 AS3 非常相似，我不知道您要做什么，也不知道为什么您的代码不起作用，因为您没有提供一个很好的示例。但是你可以直接调用函数，只要它可以以任何正常方式访问。

比如说，在一个班级里你有：

```
class Boo {
    private function foo():void {
         trace("bar");
    }

    public function foobar():void {
        foo();
    }
}

class FoobarCaller {
    public function FoobarCaller (){
        var asdf:Boo = new Boo();
        asdf.foobar();
    }
} 
```

这很有效，就像在 C# 或任何其他“标准编码语言”中一样。但是，如果没有更好的问题，就不可能说出你做错了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:55:56.297

我假设您的 random_genotype_initialisation() 函数中有一个未定义的值。你是对的，你在 as3 中调用一个函数，就像在 java/c/c++/c#/js/etc 中一样。

该片段有点错误，因为您存储了`replcate_new_generation`into的结果`rep`，但这是一个 void 函数，因此`rep`将是 void 并且因此没有 call()：

```
var rep = replicate_new_generation();//rep = void at this point
rep.call();//call does not exist for rep 
```

你的意思是 ？

```
var rep:Function = replicate_new_generation;
rep.call(); 
```

这与以下内容相同：`replicate_new_generation();` 如果在函数内产生错误，也许您也应该发布函数的主体？

# c#-4.0 - 通过 c# 在统一 3D 中实现速度

> ID：13623678
> 
> 赞同：2
> 
> 时间：2012-11-29T10:28:23.233
> 
> 标签：c#-4.0, unity3d

我目前正在统一制作 3D 网球游戏。当用户击球时，比如在 x=0,y=5,z=0，速度在某个位置，比如 z=10，到达 z=10 后球的 x 和 y 坐标是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T01:16:31.973

虽然 Heilo 的方法可以*完美*运行，但我强调获得直接速度测量的想法，例如距离/时间，时间是 Update() 方法中更新期间的帧。

这实际上非常简单......

只需获取两个更新函数之间的距离，如下所示：

```
var previousPosition : Vector3;
function Update() {
    //Get the difference/distance between the previous position and the current position
    var velocity = Vector3.Distance(previousPosition, transform.position);
} 
```

因为我在单个帧上执行此操作，所以无需计算额外的数学来获得速度。但是，如果您希望超过第二个，则需要获得游戏的 FPS 并对其进行一些数学运算。***所以我建议除非您想使用此直接路线，否则请使用 Heilo 建议的方法。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T13:57:17.187

要获得球的速度，您必须使用球的 RigidBody。

如果您的脚本作为球的一个组件附加，您可以通过`rigidbody.velocity.magnitude`.

# python - 将修改从 Devstack 复制到 Openstack（生产）

> ID：13623679
> 
> 赞同：0
> 
> 时间：2012-11-29T10:28:24.463
> 
> 标签：python, openstack

我通过 DevStack 安装了 openstack，因为我不得不修改一些文件。当我安装 DevStack 时，我拥有 /opt/stack 下的所有文件。那里有服务文件夹（glance、keystone...）和库文件夹（python-glanceclient、python-keystoneclient）。如果我修改这些文件，如何在已经部署的 Openstack 上复制修改？在没有 devstack 的情况下安装 openstack 会构建不同的文件夹结构。

我的意思是，python-'service'client 文件夹在全新的 openstack 安装中在哪里？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T00:44:37.103

devstack 从 github 拉取它的 openstack 软件堆栈。它安装的 git repot 位于 /opt/stack 中。

您可能想要做的是 fork openstack 以及您希望修改的 openstack 项目的 repot，然后让您的 devstack 部署不是从 openstack repot 部署，而是从您自己的分叉 repot 部署。

您可以通过修改 stack.sh 脚本来做到这一点（我相信）。devstack.org 在其站点上对整个脚本进行了逐行解释，这可以为您指明正确的方向。

[http://devstack.org/stack.sh.html](http://devstack.org/stack.sh.html) 阅读此内容。

一旦您使用自己的 git 存储库进行了部署，您当然可以编辑并提交回它。甚至推动它。

那么您拥有的任何其他 devstack 部署也可以设置为从您的存储库中提取，而不是从公共 openstack 存储库中提取。

当然，随着 openstack 开发以相当快的速度发展，以后针对 openstack 进行 rebase 将变得越来越困难。

如果您所做的修改是您想要提交回开源项目的修改，请查看此站点：

[http://wiki.openstack.org/HowToContribute](http://wiki.openstack.org/HowToContribute)

基本上，openstack 有一个基于 gerrit 和 jenkins 的提交审查和持续集成环境。这是提交回开源存储库的方法，在合并之前由其他开发人员进行门控测试和手动审查。

如果您打算将此部署用于生产用途，我建议您不要从 devstack 进行部署。这不是这样做的正确方法。

# java - JAVA_HOME 指向错误的位置 - 从 cmd 提示符运行时

> ID：13623684
> 
> 赞同：0
> 
> 时间：2012-11-29T10:28:38.360
> 
> 标签：java, command-prompt

我面临与以下链接中提到的相同问题 [JAVA_HOME 指向错误的位置](https://stackoverflow.com/questions/1951083/java-home-points-to-the-wrong-place)

但这是日食，我在 DOS 命令提示符 > ant jar 中面对它

注意：我已经正确更新了环境变量（JAVA_HOME 和 ANT_HOME）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T06:44:27.620

检查您的注册表以查看路径是否已在此处更新。我遇到了类似的问题，并且能够通过以下方式解决它：*我正在使用 Windows 7 x64*

开始-> 运行-> “regedit”。

在注册表中转到：

计算机 -> HKEY_LOCAL_MACHINE -> 软件 -> JavaSoft -> Java 运行时环境

检查 JavaHome 是否指向正确的位置，如果需要，您可以对其进行修改。例如，我的内容如下：

**C:\Program Files\Java\jdk1.7.0_45\jre**

和 RuntimeLib 读取：

**C:\Program Files\Java\jdk1.7.0_45\jre\bin\jvm.dll**

至于您的 Ant 安装，请执行相同的检查，但请确保不要忘记路径结尾。希望这可以帮助。

*编辑：*

我对这个答案中提供的工具的易用性感到震惊：[由 Eric 提交](https://stackoverflow.com/a/17270546/2396447)

如果有人在运行 jar 文件时遇到问题，我强烈建议您看看这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T21:47:19.030

如果您绝对确定在计算机 -> ... 环境变量 -> 系统下有 JAVA_HOME，然后重新启动命令提示符以获取新值。

# android - 免费的模糊逻辑库，无法在 android 上解析文件

> ID：13623687
> 
> 赞同：1
> 
> 时间：2012-11-29T10:28:54.667
> 
> 标签：android, c++, android-ndk, android-sdcard

我正在使用 c++ 代码为核心逻辑开发一个适用于 android/iOS/windows 的应用程序。该应用程序使用免费的模糊逻辑库，它在 windows mobile、iOS 和我的本地 Ubuntu 机器上完美运行，但在 android 下不太适用。

应用程序从 sd 卡中读取一个 .fcl 文件，然后使用免费的模糊逻辑库解析器对其进行解析。问题是，解析器卡在随机的解析阶段。

我的项目设置的一些注释：

*   我在 manifest.xml 中为 sdcard 启用了 Android 读/写权限。

*   我尝试运行的代码是来自免费模糊逻辑库网站的基本示例。

*   我正在使用 stlport_static 库来支持 stl 和 -frtti 编译器标志。

**我的问题是**：我是否缺少特定于 android 的内容，例如文件编码或我未设置的某些权限？

我想到的一些笔记：

*   文件压缩应该不是问题，因为据我所知，SD 卡上的文件没有被压缩，我可以部分解析文件。

*   使用其他模糊逻辑库是不可能的，因为我不能使用 GPL 许可的库。我发现的唯一其他库没有手册/如何，也无法解析 fcl 标准。

*   免费的模糊逻辑库使用了很多 wchar_t 的 whitch 可能是个问题。

感谢您抽出宝贵时间，希望能得到一些帮助；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T10:15:40.903

好的，在浏览了一些 android 手册和一些 Google 滥用之后，我发现了问题。目前 Android 不支持 wchar_t 类型。好吧，您可以使用它，但结果与在任何其他操作系统上的结果不同。

通过将免费模糊逻辑库中的所有 wchar_t 和 wstring 类型更改为它们相应的 char 和 string 类型，我能够使解析器工作。好吧，仍然有一些巧妙的不一致之处，但没有什么是我无法处理的；）。

**结论：**不要在 android c++ 程序中使用宽字符。

感谢您的时间和帮助

# c# - 在 ASP.NET ReportViewer 控件中运行带有远程 SSRS 数据源的 LocalReport

> ID：13623691
> 
> 赞同：0
> 
> 时间：2012-11-29T10:29:03.357
> 
> 标签：c#, asp.net, reporting-services, reportviewer

我将尝试描述我到底在做什么：我正在尝试将**ReportViewer**控件合并到我的**ASP.NET**页面中，这将使用户能够查看预定义和用户上传的 RDL 报告、设置参数并最终接收输出（屏幕上和文件中）。

所以我们在远程服务器上有一个**SSRS**，在那里定义了共享数据源。远程服务器上也有**OLAP 多维数据集**，用于存储数据源的数据。

**问题：**让我感到困惑的是，您如何提供本地报表和远程数据源之间的连接以让报表执行它的**mdx 查询**？

到目前为止，我只能使用本地数据源显示 LocalReport，并且根本无法显示 ServerReport（只是从服务器接收结果字节）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:48:50.067

1.  如果您将 LocalReports 部署到某个单独的子文件夹中的远程服务器，您可以解决您的问题。然后您将能够使用共享数据源。

2.  ReportViewer 具有本地或远程[ProcessingMode属性。](http://msdn.microsoft.com/en-US/library/microsoft.reporting.webforms.processingmode%28v=vs.80%29.aspx)它可以用于两者。您可以在页面上添加 2 个 ReportViewer 实例，一个用于本地报告，一个用于远程报告。

# matlab - matlab：使用 lsqcurvefit 和 fmincon 进行约束拟合

> ID：13623698
> 
> 赞同：1
> 
> 时间：2012-11-29T10:29:20.467
> 
> 标签：matlab, constraints, curve-fitting, fminsearch

我有一组数据点（data_x，data_y）。我需要将模型函数拟合到这些数据中。模型是 5 个参数的函数，我这样定义它：

```
function F = model(x,xdata)

fraction1 = x(4);
fraction2 = x(5);
fraction3 = 1-x(4)-x(5);

F=1-(fraction1.*(exp(-(xdata)./x(1)))+(fraction2.*(exp(-(xdata)./x(2))))+(fraction3.*(exp(-(xdata)./x(3))))); 
```

参数 x(4) 和 x(5) 用于定义三个分数，因此它们的总和必须为 1。为了适应这个函数，我使用了 lsqcurvefit，如下所示：

```
%% initial conditions
a0 = [guess1 guess2 guess3 0.3 0.3];

%% bounds
lb = [0 0 0 0 0 ];
ub = [inf inf inf 1 1];

%% Fitting options
curvefitoptions = optimset( 'Display', 'iter' );

%% Fit
a = lsqcurvefit(@model,a0,x,y,lb,ub,curvefitoptions); 
```

问题是不知道如何添加约束，以保持分数之和 = 1。我知道这`lsqcurvefit`不是解决这个问题的最佳方法，但我不知道如何输入`fmincon`这些数据来找到我的参数。非常感谢您的帮助！

编辑：请注意，F 的最大值可能是 1...几乎相等的分数（0.33），根本没有任何意义，因为其他参数被搞砸了......当我使用Origin（具有相同的模型+约束）拟合相同的数据时，它完美地工作......当我使用固定的Origin输出分数参数拟合也很棒，但是......它不是这样做的方法，有很多拟合要做:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T20:31:31.347

如果为此使用 fmincon（并使用另一个参数作为第三部分），则约束非常简单。您可能需要使用 fmincon 选项来获得良好的收敛性。

```
function solution = my_fit_fun(xdata, ydata, a0)

lb = [0 0 0 0 0 0];
ub = [inf inf inf 1 1 1];

%Aeq and beq specify that the last three parameters add to 1
Aeq = [0 0 0 1 1 1];
beq = 1;

solution = fmincon(@objective,a0,[],[],Aeq,beq,lb,ub);

    function F = model(x)

        fraction1 = x(4);
        fraction2 = x(5);
        fraction3 = x(6);

        F=1-(fraction1.*(exp(-(xdata)./x(1)))+(fraction2.*(exp(-(xdata)./x(2))))+(fraction3.*(exp(-(xdata)./x(3)))));

    end

    function f = objective(x)

        yfit = model(x);
        f = sum((yfit - ydata) .^2);
    end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:09:18.373

不幸的是，MATLAB lsqcurvefit 不支持除下限和上限之外的约束。从数学上讲，这是可能的——只是没有实现。不建议使用 fmincon 进行曲线拟合。

在简单的总和约束的情况下，最好的解决方案可能是消除您的变量 x(5)：

```
fraction1 = x(4);
fraction2 = 1-x(4); 
```

这通常需要调整 x(4) 的允许范围，以便 x(5) = 1-x(4) 也将保持在允许范围内。（在您的情况下，对于 x(4) 和 x(5)，这是 0...1，因此无需进行任何调整）。

# mysql - （行到列/枢轴）+ SUM

> ID：13623704
> 
> 赞同：0
> 
> 时间：2012-11-29T10:29:38.970
> 
> 标签：mysql, sql, pivot

我在 MySQL 中有一些表：

```
+---------+--------------+---------+    +---------+----------+
|             TABLE 1              |    |       TABLE 2      |
+---------+--------------+---------+    +---------+----------+
| id_user |  testnumber1 |   score |    | id_user | username |
+---------+--------------+---------+    +---------+----------+
|    1    |       1      |    90   |    |    1    |   aaa    |
|    1    |       2      |    80   |    |    2    |   bbb    |
|    1    |       3      |    70   |    |    3    |   ccc    |
|    2    |       1      |    60   |    +---------+----------+
|    2    |       2      |    66   |
|    2    |       3      |    77   |
|    3    |       1      |    90   |
|    3    |       2      |    80   |
|    3    |       3      |    70   |
+---------+--------------+---------+ 
```

是否有可能得到这个：

```
+---------+--------------+--------------+--------------+
|                      TABLE RESULT                    |
+---------+--------------+--------------+--------------+ 
| id_user |  testnumber1 |  testnumber2 |  testnumber3 |
+---------+--------------+--------------+--------------+
|    1    |      90      |      80      |      70      |
|    2    |      60      |      66      |      77      |
|    3    |      90      |      80      |      70      |
+---------+--------------+--------------+--------------+ 
```

?

我可以使用什么语句来得到这个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:32:18.630

您需要的是`PIVOT`将列转换为行。不幸的是，MySQL 没有`PIVOT`表操作符。但是您可以使用`CASE`表达式来执行此操作，如下所示：

```
SELECT
  id_user,
  MAX(CASE WHEN  testnumber1 = 1 THEN score END) AS testnumber1,
  MAX(CASE WHEN  testnumber1 = 2 THEN score END) AS testnumber2,
  MAX(CASE WHEN  testnumber1 = 3 THEN score END) AS testnumber3
FROM Table
GROUP BY id_user; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!2/b5a60/1)

# maven - 多模块 Maven 构建：来自父模块和模块的不同结果

> ID：13623706
> 
> 赞同：2
> 
> 时间：2012-11-29T10:30:09.807
> 
> 标签：maven, maven-3

我正在将应用程序从 ant build 迁移到 maven 3 build。这个应用程序是由：

*   指定要构建的所有模块的父项目
*   使用 jaxb 生成类并用它们构建 jar 的项目
*   一个构建ejb项目的项目
*   3 个构建战争模块的项目
*   1个建立耳朵的项目

**这是我父母 pom 的摘录：**

```
<groupId>com.test</groupId>
<artifactId>P</artifactId>
<packaging>pom</packaging>
<version>04.01.00</version>

<modules>
    <module>../PValidationJaxb</module> <-- jar
    <module>../PValidation</module> <-- ejb
    <module>../PImport</module> <-- war
    <module>../PTerminal</module> <-- war
    <module>../PWebService</module> <-- war
    <module>../PEAR</module> <-- ear
</modules> 
```

我有几个我认为有相同起源的问题，可能是我无法弄清楚的依赖管理问题：

*   生成的模块会有所不同，具体取决于我是从父 pom 还是单个模块构建的。通常，如果我只构建 PImport，生成的战争类似于我的 ant 构建，如果我从父 pom 构建，我的战争需要 20MB，添加了许多来自其他模块的依赖项。两场战争都进展顺利。

*   我的项目 PWebService 具有要在构建期间执行的单元测试。它使用以 cglib 作为依赖项的 mock-ejb。这个有 ClassNotFound 的问题，我不得不排除它并向 cglib-nodep 添加一个依赖项（参见最后一个 pom 提取）。如果我只构建这个模块，它运行良好。但是如果我从父项目构建，它会失败，因为其他模块中的其他依赖项也对 cglib 有隐式依赖。我必须在每个模块 pom 中排除它，并将依赖项添加到 cglib-nodep 中以使其运行。

我错过了配置中的重要内容吗？

**PValidation pom 提取物：**

它正在创建一个 jar，其中包含一个带有由 xdoclet 生成的接口的 ejb，以及一个客户端 jar。

```
<parent>
    <groupId>com.test</groupId>
    <artifactId>P</artifactId>
    <version>04.01.00</version>
</parent>
<artifactId>P-validation</artifactId>
<packaging>ejb</packaging>

<dependencies>
    <dependency>
        <groupId>com.test</groupId>
        <artifactId>P-jaxb</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate</artifactId>
        <version>3.2.5.ga</version>
        <exclusions>
            <exclusion>
                <groupId>cglib</groupId>
                <artifactId>cglib</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2.2</version>
    </dependency>
    ...
    [other libs]
    ...
</dependencies>

<build>
    ...
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-ejb-plugin</artifactId>
            <configuration>
                <ejbVersion>2.0</ejbVersion>
                <generateClient>true</generateClient>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>xdoclet-maven-plugin</artifactId>
            ... 
```

**PImport pom 提取物：**

它取决于 Jaxb 生成的 jar 和 ejb 客户端 jar。

```
<parent>
    <groupId>com.test</groupId>
    <artifactId>P</artifactId>
    <version>04.01.00</version>
</parent>
<artifactId>P-import</artifactId>
<packaging>war</packaging>

<dependencies>
    <dependency>
        <groupId>com.test</groupId>
        <artifactId>P-jaxb</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>com.test</groupId>
        <artifactId>P-validation</artifactId>
        <version>${project.version}</version>
        <type>ejb-client</type>
    </dependency>
    ...
    [other libs]
    ...
</dependencies> 
```

**PWebService pom 提取：**

```
<parent>
    <groupId>com.test</groupId>
    <artifactId>P</artifactId>
    <version>04.01.00</version>
</parent>

<artifactId>P-webservice</artifactId>
<packaging>war</packaging>

<properties>
    <jersey.version>1.14</jersey.version>
</properties>

<dependencies>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-servlet</artifactId>
        <version>${jersey.version}</version>
    </dependency>
    <dependency>
        <groupId>com.rte.etso</groupId>
        <artifactId>etso-validation</artifactId>
        <version>${project.version}</version>
        <type>ejb-client</type>
    </dependency>
    ...
    [other libs]
    ...
    <dependency>
        <groupId>org.mockejb</groupId>
        <artifactId>mockejb</artifactId>
        <version>0.6-beta2</version>
        <scope>test</scope>
        <exclusions>
            <exclusion>
                <groupId>cglib</groupId>
                <artifactId>cglib-full</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib-nodep</artifactId>
        <version>2.2.2</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

非常感谢

**修改配置后的解决方案：**

当我得到已经 mavenized 的项目时，它不尊重文件夹布局约定，但正如它在 pom 中声明的那样可以找到源代码，我认为它会起作用。无论如何，我改变了它以匹配推荐的结构。

为了构建单个模块，我直接在其级别执行 mvn clean install。正是通过这种方式，我获得了不同的结果（这实际上是我想要的结果）。

无论如何，我的问题已经解决了，我将 PValidation 项目的所有依赖项都按照提供的方式放置，因为我只将生成的客户端包含在其他模块中，并且它们不需要实现所需的所有内容。

但我仍然不明白为什么我对相同的配置有不同的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T11:01:50.733

首先重要的是您应该创建适合模块结构的项目结构，这意味着具有以下文件夹结构：

```
+-- parent
      +-- PValidationJaxb
      +-- PValidation
      +-- PImport
      +-- PTerminal
      +-- PWebService
      +-- PEAR 
```

这意味着有一个 pom.xml，其中包含父文件夹中的模块定义。如果您遵循上述建议，您可以将模块列表简化为以下内容：

```
<modules>
    <module>PValidationJaxb</module> <-- jar
    <module>PValidation</module> <-- ejb
    <module>PImport</module> <-- war
    <module>PTerminal</module> <-- war
    <module>PWebService</module> <-- war
    <module>PEAR</module> <-- ear
</modules> 
```

此外，Maven 中的最佳实践是使用**小写工件**，这意味着在您的情况下是**pvalidationjaxb**而不是**PValidationJaxb**。

另一件重要的事情是您的版本不遵循[Maven 约定](http://mojo.codehaus.org/versions-maven-plugin/version-rules.html)。此外，从 Maven 的角度来看，您的版本将是一个版本，而您正在对此进行开发并非如此。在 Maven 中，您应该使用所谓的**SNAPSHOT**来实现 1.0.0-SNAPSHOT 等目的。

我希望您遵循了[Maven 的文件夹布局建议，](http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html)该建议将生产代码（将打包到生成的 jar 中）放入*src/main/java*中，而将测试代码放入*src/test/java*中。

您描述的具有不同依赖项的问题听起来很奇怪。问题是您如何尝试构建单个模块？这通常可以通过使用父位置的以下内容来实现：

```
mvn -pl module clean package 
```

您的单元测试的问题听起来像是缺少依赖项等，但这里的问题是您如何尝试运行单元测试并配置 maven-surefire-plugin ？或者你有集成测试吗？这只是一个猜测，因为我在您的 poms 中没有看到任何 Maven 插件配置。

# php - 将数组排序为交替的最小最大值？

> ID：13623708
> 
> 赞同：1
> 
> 时间：2012-11-29T10:30:22.770
> 
> 标签：php, arrays

有谁知道如何将数组排序为交替的最小最大值？

IE

```
Array (10, 2, 5, 1, 30, 1, 7) 
```

应该 ：

```
(30, 1, 10, 1, 7, 2, 5) 
```

编辑：

忘了提到数组是关联的，所以：

```
Array("A"=>10, "B"=>2, "C"=>5, "D"=>1, "E"=>30, "F"=>1, "G"=>7) 
```

应该变成：

```
("E"=>30, "D"=>1, "A"=>10, "F"=>1, "G"=>7, "B"=>2, "C"=>5) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:37:23.057

对数组进行排序，然后交替从数组的开头和结尾推送元素：

```
<?php

    $myArray = array(10, 2, 5, 1, 30, 1, 7);
    sort($myArray );
    $count=sizeof($myArray );

    $result= array();

    for($counter=0; $counter * 2 < $count; $counter++){

         array_push($result, $myArray[$count - $counter - 1]);
         //check if same elements (when the count is odd)
         if ($counter != $count - $counter - 1) {
             array_push($result, $myArray[$counter]);
         }

    }
    print_r ($result);

?> 
```

返回：

```
Array ( [0] => 30 [1] => 1 [2] => 10 [3] => 1 [4] => 7 [5] => 2 [6] => 5 ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:39:20.737

我不能告诉你确切的语法，我的 php 很生锈，但你可以做什么：

*   按降序对数组进行排序

*   分成两半，比如说数组 A 和 B；

*   创建一个新数组并按顺序添加 A 和 B 中的每个元素`$A[i], $B[count($B)-1-i]`

这应该给你你需要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:35:16.900

没有预定义的方法可以做到这一点。但是，php 允许用户排序​​功能[`usort`](http://no.php.net/manual/en/function.usort.php) ，您可以自定义该功能以按照您需要的方式对数组进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:43:22.957

```
<?php
$x = array(10, 2, 5, 1, 30, 1, 7);

// First sort
sort($x);

// Then pick highest and lowest from the back and front of the array
// until it is empty.
$z = array();
while (count($x) > 0){
    $z[] = array_pop($x);
    if (count($x) > 0) // <- For arrays with an odd number of elements.
      $z[] = array_shift($x);
}

var_dump($z); 
```

# css - 在 wordpress 中添加自定义菜单

> ID：13623709
> 
> 赞同：0
> 
> 时间：2012-11-29T10:30:24.033
> 
> 标签：css, html, wordpress, wordpress-theming

我只是wordpress的新手。我的设计是这样的（附上示例图片）。所以有人可以告诉我如何获得这样的菜单。您可以在左侧菜单中看到没有下拉菜单。但在右侧，您可以看到下拉菜单。我目前正在使用 wordpress 21 主题。![在此处输入图像描述](../Images/402e519fd077eaddb9f4b47dac6a3620.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:54:34.663

您需要 2 个单独的菜单。在您的主题中添加对 2 个菜单的支持

1）在你的主题的functions.php中添加以下代码

```
register_nav_menu( 'primary', 'Primary Menu');
register_nav_menu( 'secondary', 'Secondary Menu'); 
```

2）然后在 header.php 中并排调用这两个菜单

```
wp_nav_menu( array( 'theme_location' => 'primary' ) );
wp_nav_menu( array( 'theme_location' => 'secondary' ) ); 
```

休息，你必须做 css 使它们出现在同一行并具有不同的字体大小等。

3）从 wp-admin 区域创建两个菜单并将它们分配给主菜单和辅助菜单 4）在您的第二个菜单（出现在右侧的那个）中，确保像“工资软件”、“w2 软件”这样的下拉链接是在菜单项“资源”下

我想应该这样做...

# pdf - 以pdf格式填写xfa表格的免费软件

> ID：13623712
> 
> 赞同：3
> 
> 时间：2012-11-29T10:30:34.073
> 
> 标签：pdf, xfa

我有带有 XFA 表格的 pdf 文件。我需要用数据填充这个 pdf 并将其发送给用户。我正在寻找一个可以帮助我的图书馆。这个库需要： - 免费，这意味着我可以在专有软件中免费使用它， - 用一种语言编写，可以很容易地安装在 linux 机器上（java、python、ruby？）

我已经在看 iText，但它最新的 LGPL 版本已经很老了，并且在我的情况下会生成损坏的 pdf。奇怪的是，iTextSharp 对我有用，但我认为它不适用于单声道。

价格合理的付费解决方案也受到欢迎。

# web-services - Glassfish 仍然使用默认领域

> ID：13623713
> 
> 赞同：0
> 
> 时间：2012-11-29T10:30:35.540
> 
> 标签：web-services, security, jakarta-ee, glassfish, jdbcrealm

我在战争中捆绑了一个安全的 Web 服务（通过 ssl 的消息身份验证），我正在尝试使用 jdbcRealm 来验证用户。jdbcRealm 可以与其他耳朵应用程序一起正常工作，但不适用于这个 .war 实际上 glassfish 仍在使用 fileRealm，尽管在 web.xml 中完成了配置

网页.xml：

```
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>Secure Area</web-resource-name>
            <url-pattern>/xoxoServer/secondWS/*</url-pattern>
            <http-method>POST</http-method>
        </web-resource-collection>
        <!--<auth-constraint>
          <role-name>EMPLOYEE</role-name>
        </auth-constraint>-->
        <user-data-constraint>
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>

    </security-constraint>

    <login-config>
        <auth-method>BASIC</auth-method>
        <realm-name>my_realm</realm-name>
    </login-config>
</web-app> 
```

在控制台中我得到这个：

```
FIN: [Web-Security] hasResource perm: (javax.security.jacc.WebResourcePermission /secondWS POST)
FIN: JMAC: UnsupportedCallback : javax.security.auth.callback.NameCallback
FIN: JMAC: In PasswordValidationCallback Processor
FIN: jmac login user [test] into realm: file using JAAS module: fileRealm
FIN: Login module initialized: class com.sun.enterprise.security.auth.login.FileLoginModule
FIN: JAAS authentication aborted.
INFO: SEC5046: Audit: Authentication refused for [test].
INFO: SEC1201: Login failed for user: test 
```

如何解决这个问题？谢谢。ps：我正在使用带有 jdk6 的 Glassfish 3.1.2.2 b5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:57:35.560

我通过以下方式解决了这个问题：

1.  把战争包装在耳朵里

2.  在 glassfish-application.xml 中添加领域（在耳朵中）

# php - 带有特殊字符的 MySql 搜索

> ID：13623714
> 
> 赞同：1
> 
> 时间：2012-11-29T10:30:52.310
> 
> 标签：php, mysql

我使用 as 从数据库中搜索记录`MySql`-

```
SELECT * FROM tab WHERE col LIKE '%myvalue%'; 
```

这工作正常并显示所有具有`myvalue`.

现在的问题是我有一些记录，例如,`my'value`和并且还想在搜索中包含这些记录。此外，当我搜索then 它应该显示and 。`myva'lue``myval-ue``my-value``my'value``myvalue``my-value`

如何做到这一点？任何帮助。是否可以使用`LIKE`运算符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:49:15.620

当您使用 PHP 时，如果有人使用您的搜索，您应该执行以下操作：

1.  通过 $_POST 获取搜索词
2.  从搜索词中删除所有特殊字符（`my'value`变成`myvalue`）
3.  将搜索词替换为 MySQL 通配符（`myvalue`变成`%m%y%v%a%l%u%e%`）
4.  执行`SELECT * FROM tab WHERE col LIKE '%m%y%v%a%l%u%e%'`

任何其他解决方案都不符合您的所有要求。

SQL 小提琴：[http ://sqlfiddle.com/#!2/20f811/2](http://sqlfiddle.com/#!2/20f811/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:32:56.320

采用

```
SELECT * FROM tab WHERE col LIKE '%myvalue%' OR col LIKE '%my_value%' 
```

下划线`_`是单字符通配符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:36:57.383

这个怎么样？

```
SELECT * FROM tab WHERE col LIKE 'my%' OR col LIKE '%value' 
```

这将检查`col`应该以 my 开头并以 value 结尾。

## [演示](http://sqlfiddle.com/#!2/9a7c4/4)

* * *

## 编辑 1

由于可能有任何特殊字符并且正则表达式不适用于 MySQL，我建议您通过将特殊字符替换为 null 然后将字符串与 myvalue 匹配来做您想要在 PHP 中实现的目标。

希望这对您有所帮助。

* * *

## 编辑 2

我不完全了解 php，但可以告诉你该做什么。

```
mysql = "SELECT id, col FROM tab WHERE col LIKE '%my%' OR col LIKE '%value%'";
rs = mysql.execute();
String newString = "";
while (rs.next()) {
    newString = rs.getString(2);
    newString = new string after replacing special characters using regexp
    if (newString.equals("myvalue")) {
        // your code here..... this is place what you wanted.
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-07T05:34:30.770

收到...

**PHP部分**

```
$term = str_replace('-','',str_replace(',', '', str_replace('\'', '', $term))); 
```

**MySql 部分**

```
SELECT *
FROM tab
WHERE ((REPLACE(REPLACE(REPLACE(col, '\'', ''), ',', ''), '-', '') LIKE "%$term%") 
OR (col LIKE "%$term%")); 
```

请参阅此**[演示](http://sqlfiddle.com/#!2/10476/4)**。

# android - 检测 Home 键按三下

> ID：13623717
> 
> 赞同：0
> 
> 时间：2012-11-29T10:30:53.147
> 
> 标签：android

`android`我想在这个想要执行事件之后从主屏幕检测主页按键三次。有什么办法可以检测到home键按了三下`android`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:32:55.107

您必须在 Android 操作系统中执行`PhoneWindowManager`此操作，这是处理 HOME 按钮的位置。

具体来说：[http ://androidxref.com/4.1.1/xref/frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java#1761](http://androidxref.com/4.1.1/xref/frameworks/base/policy/src/com/android/internal/policy/impl/PhoneWindowManager.java#1761)

要改变这一点，您必须改变和构建 AOSP。并在您的设备上闪烁它。因此，对于应用程序开发人员来说，这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:35:26.460

如果在活动中按下 homekey，它将来到

```
@Override
    protected void onUserLeaveHint() {
        // TODO Auto-generated method stub
        super.onUserLeaveHint();
    } 
```

放置计数器，当它达到 3 时执行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:37:17.523

你`handle key event`必须重写方法`onKeyDown()`和`onKeyUp().`

看到[这个](http://android-coding.blogspot.in/2011/03/detect-key-action.html)链接将指导你，你必须添加你的逻辑。

# java - 如何在 Java 中记录未捕获的异常？

> ID：13623723
> 
> 赞同：0
> 
> 时间：2012-11-29T10:31:33.997
> 
> 标签：java, swing, exception, testing

我的客户正在使用他无法提供给我的数据（隐私原因）测试我的 beta 阶段 Java 应用程序。尽管我实现了大多数异常的处理，但应用程序在极少数情况下崩溃。

我可以将未捕获的异常的堆栈跟踪记录到文件中，以便测试人员可以向我提供它（例如`NullPointerException`）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:34:28.450

设置打印到指定文件的[Thread.UncaughtExceptionHandler 。](http://java.sun.com/javase/6/docs/api/java/lang/Thread.html#setDefaultUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:34:50.493

如果主线程崩溃，JVM 将自动打印堆栈跟踪。

对于其他线程，您可以使用[setUncaughtExceptionHandler](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#setUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:34:55.330

这正是[`UncaughtExceptionHandler`概念的意义所在](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.UncaughtExceptionHandler.html)。

基本上，当异常到达堆栈顶部时，您可以注册一段要执行的代码。

# javascript - 获取 iframe 的内部元素

> ID：13623727
> 
> 赞同：0
> 
> 时间：2012-11-29T10:31:42.217
> 
> 标签：javascript, html

我有一个简单的 html 页面。它有一个指向其他网站的 iframe。我想更改嵌套在该 iframe 中的锚标记的颜色。可以通过 javascript 访问 Iframe 的元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:35:07.360

如果另一个页面在另一个域中，由于跨域安全性，将无法从主页面编辑 iframe 的 HTML 内容。

对此有解决方法，例如在 url 中写入您想要进行的更改。但这真的很脏。

如果它在同一个域中，我建议使用，例如：

```
$('div', $('iframe')[0].contentWindow.document) 
```

用于获取 iframe 中的所有 div 元素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:00:49.690

我通过使用以下代码做到了

函数 loadFrame(){ document.getElementById('pcl_frame').contentWindow.document.getElementsByTagName('a')[0].style.color='blue'; }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:37:10.740

你需要 JavaScript。这与在父页面中执行此操作相同，只是您必须在 JavaScript 命令前加上 iframe 的名称。

请记住，相同的来源策略适用，因此您只能对来自您自己的服务器的 iframe 执行此操作。

```
frame1.$('mydiv').style.border='1px solid #000000' 
```

或者

```
frame1.$('mydiv').addClassName('withborder') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:37:15.333

您可以使用 iframe 获取元素的值

```
 $('#iframeId').contents().find('#id-of-element-inside-iframe'); 
```

但是值不能改变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T10:39:27.197

只有一个简单的解决方案，它仅在您拥有 iframe 中的内容时才有效。

在您的父源中添加：

```
<script type="text/javascript">
    var innerDocument = null;
</script> 
```

在您的 iframe 中添加：

```
<script type="text/javascript">
    parent.innerDocument = document;
</script> 
```

加载 iframe 后，您现在可以使用 innerDocument 定位 iframe 的文档。这绕过了跨域安全。

# apache - htaccess 指定目录和机器人文件

> ID：13623728
> 
> 赞同：2
> 
> 时间：2012-11-29T10:31:56.267
> 
> 标签：apache, .htaccess, robot

我 hanv 一个 htaccess 文件，我通过它来阻止目录

```
Options -Indexes 
```

但我想允许管理目录。上面的代码块管理目录也是如此。

第二件事是一些黑客通过搜索引擎获取我们网站的所有目录名称。如果我不允许搜索引擎搜索 robots.txt 文件中的所有安全目录，那么黑客可以从 robots.txt 中读取目录。

如果我阻止 .txt 扩展

```
<FilesMatch "\.(htaccess|htpasswd|ini|txt|log|sh|inc|bak)$"> 
```

订购 Allow,Deny 拒绝所有人

这个 htaccess 代码可以搜索引擎读取我的 robots.txt 文件以获取其他目录吗？

结论：我想禁止所有目录但允许管理目录。并且还喜欢阻止搜索引擎的安全目录。

我得到了允许目录的答案，但第二个问题不能确认谷歌是否可以阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T19:04:33.443

您将需要密码保护您的 /admin 文件夹并打开该文件夹中的索引。在该文件夹中添加受保护的文件。如果没有您在 中创建和存储的密码，Google 或其他任何人都无法阅读它们`.htpass`。

例如`/admin/.htaccess`

```
AuthUserFile /var/www/vhosts/example.com/httpdocs/.htpass
AuthType Basic
AuthName "Administration"
require valid-user

Options +Indexes 
```

阅读有关[Apache 模块 mod_authn_file的更多信息](http://httpd.apache.org/docs/2.2/mod/mod_authn_file.html)

# c++ - 在初始化列表中使用复杂函数来初始化 const 成员是一个好的设计吗？

> ID：13623731
> 
> 赞同：4
> 
> 时间：2012-11-29T10:32:04.447
> 
> 标签：c++, constructor

最近我在看一个班级的旧的可怕混乱......长话短说，如果一个成员是 const，它将有助于线程安全。
但问题是成员是在 ctor 中初始化的，而且它是非平凡的构造。所以我正在考虑为该成员创建一个特殊的 init 函数。这是一个好的决定吗。超级简单的小例子（真正的代码充满了条件：）和try-s）：

```
class ComplexInitList
{
std::pair<double,double> init_pair(const int first, const int second)
{
    if ((first == 0) || (second == 0))
       throw std::invalid_argument("div by 0");
    return std::make_pair(1.0/first, 1.0/second);
}
const std::pair<double,double> p;
public:
 ComplexInitList(int a, int b):p(init_pair(a,b))
{
    std::cout << p.first << ", " << p.second << std::endl;
}  
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T10:36:46.463

这实际上是该问题的常见且公认的解决方案。如果可能，请考虑将 init 函数设为静态，以便对正在构建的对象的意外操作语义（例如虚拟调用的行为）无法启动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-15T10:10:59.713

迟到了，但要为任何新的搜索引擎添加：

如果`init_pair`不打算在其他任何地方使用，我发现 lambda 是解决这个问题的最优雅的方法：

```
class ComplexInitList
{
const std::pair<double,double> p;

public:
 ComplexInitList(const int a, const int b) : 
    p([](const int a, const int b) {
        if ((first == 0) || (second == 0)) {
            throw std::invalid_argument("div by 0");
        }

        return std::make_pair(1.0/first, 1.0/second);
    }()) // <-- Note the extra '()' with immediately calls the lambda!
{
    std::cout << p.first << ", " << p.second << std::endl;
} 

}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:42:35.453

要初始化 const 数据成员，唯一的方法是在`member initializer list`.

`p`是一个常量，所以它可以被初始化为一个值，但它不能被赋值。从概念上讲，调用构造函数会在括号内的代码执行之前创建一个对象。从而`calling ComplexInitList(int a, int b):p(init_pair(a,b))`使程序首先为 member 分配空间`p`。

然后程序流程进入括号并使用普通赋值将值放入分配的空间。所以如果你想初始化一个 const 数据成员，你必须在`member initializer list`

# android - 我的 sqlite3 CASE 语句有什么问题？

> ID：13623734
> 
> 赞同：1
> 
> 时间：2012-11-29T10:32:14.013
> 
> 标签：android, sqlite, case

我的代码如下：

```
SELECT COUNT(_id) AS count FROM general WHERE _id = 1 CASE WHEN count > 0 THEN UPDATE general SET userGivenId = 'xxx' WHERE _id = 1 ELSE INSERT INTO general (userGivenId) VALUES ('xxx' ) END 
```

出现错误：

```
android.database.sqlite.SQLiteException: near "CASE": syntax error: , while compiling: SELECT COUNT(_id) AS count FROM general WHERE _id = 1 CASE WHEN count > 0 THEN UPDATE general SET userGivenId = 'xxx' WHERE _id = 1 ELSE INSERT INTO general (userGivenId) VALUES ('xxx' ) END 
```

这是我将使用的最短查询。为什么我这样做是因为我的其他查询将有需要更新的行，但有些可能不会被触及。使用 replace 将替换所有数据（至少在我的 Android 手机上它是这样工作的）。例如，我的 File 类将有一个 filePath，但有时来自服务器的响应将返回 null，我只是在服务器返回一个新文件时更新文件。

我忘了写什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:27:51.497

SQLite 没有任何控制逻辑，因为这在嵌入式数据库中没有意义（没有单独的服务器机器/进程，其异步执行可以提高性能）。 `CASE`只能用于表达式，不能用于整个命令。

处理应用程序中的控制逻辑：

```
Cursor c = db.rawQuery("SELECT 1 FROM general WHERE _id = 1", null);
if (c.moveToFirst())
    db.execSQL("UPDATE general SET userGivenId = 'xxx' WHERE _id = 1");
else
    db.execSQL("INSERT INTO general (userGivenId) VALUES ('xxx')"); 
```

对于这些特定命令，如果您对`_id`列有唯一约束（并且主键被约束为唯一），则可以使用[INSERT OR REPLACE](http://www.sqlite.org/lang_insert.html)命令：

```
INSERT OR REPLACE INTO general(_id, userGivenId) VALUES(1, 'xxx') 
```

# gxt - 如何在 GXT 网格中的行中添加按钮

> ID：13623736
> 
> 赞同：1
> 
> 时间：2012-11-29T10:32:16.770
> 
> 标签：gxt

我有一个网格，我想向网格的每一行添加一个按钮并让它重置所需的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T19:46:38.267

假设您使用的是 GXT3，这里是 GXT3 的 Cell Grid 示例的链接。 [http://www.sencha.com/examples/#ExamplePlace:cellgrid](http://www.sencha.com/examples/#ExamplePlace:cellgrid)

如果您查看页面底部，则有两个选项卡；一个用于“演示”，一个用于“源”。这个演示清楚地展示了如何向网格添加按钮。看看他们是如何`TextButtonCell`在`asWidget()`方法中使用的。

这些示例是找出答案的一个很好的起点。下一个最好的事情（如果您想自己弄清楚）是简单地浏览源代码。

希望这可以帮助。

# javascript - 母版页头标记中的 Javascript

> ID：13623741
> 
> 赞同：0
> 
> 时间：2012-11-29T10:32:27.773
> 
> 标签：javascript, asp.net

我已将以下脚本放在我的 asp.net 母版页的 head 标记中。

`Timeout.aspx`在特定的非活动时间过去后，这个脚本应该做什么重定向到页面。
如果用户在页面上滚动/点击，则时间会被重置。在运行页面时出现错误：

```
Jscript engine runtime error: object expected. 
```

代码：

```
var wintimeout;

function SetWinTimeout() {
    wintimeout = window.setTimeout("window.location.href='../Timeout.aspx';",
                                   60000); //after 5 mins i.e. 5 * 60 * 1000  
}

$('body').click(function () {
    window.clearTimeout(wintimeout);
    //when user clicks remove timeout and reset it  
    SetWinTimeout();
});

window.onload = SetWinTimeout; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:38:54.700

您需要更改 setTimeOut 的调用

改变

```
function SetWinTimeout() {
    wintimeout = window.setTimeout("window.location.href='../Timeout.aspx';",
                                   60000); //after 5 mins i.e. 5 * 60 * 1000  
} 
```

至

```
function SetWinTimeout() {
    wintimeout = window.setTimeout(function(){
                       window.location.href='../Timeout.aspx';
                 }, 60000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:59:00.687

如果由于未加载 JQuery 而这不是错误，请在加载页面（以及 JQuery）后尝试以下操作以运行整个脚本：

```
$(function() 
{

    $('body').click(function () {
        window.clearTimeout(wintimeout);
        //when user clicks remove timeout and reset it  
        SetWinTimeout();
    });

    SetWinTimeout();
}); 
```

# iphone - iOS - ABAddressBook - 使用谓词过滤

> ID：13623748
> 
> 赞同：1
> 
> 时间：2012-11-29T10:32:41.423
> 
> 标签：iphone, ios, abaddressbook

我对以下代码中使用的谓词有疑问

```
 NSMutableArray *records = (__bridge NSMutableArray *)ABAddressBookCopyArrayOfAllPeople( addressBook );

    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"record.phoneNumber contains %@",@"123"]; 

    @try {
            [records filterUsingPredicate:predicate];
    }
    @catch (NSException *exception) {
        NSLog(@"%@",exception);
    }
    @finally {
        //
    } 
```

我得到的例外是：

**[<__NSCFType 0x6e2c5e0> valueForUndefinedKey:]：这个类不符合键记录的键值编码。**

我一直在尝试寻找有关地址簿谓词的指南，但没有运气。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T22:12:00.200

您无法使用 过滤通讯簿`NSPredicates`。此外，phoneNumber 不是`ABRecordRef`. 用户可以有多个电话号码，因此您需要检查每个电话号码。

你会做这样的事情：

```
CFArrayRef people = ABAddressBookCopyArrayOfAllPeople(addressBook);

NSMutableArray *matchingPeople = [NSMutableArray array];
for (CFIndex i = 0; i < CFArrayGetCount(people); i++) {
    ABRecordRef person = CFArrayGetValueAtIndex(people, i);
    ABMultiValueRef phones = ABRecordCopyValue(person, kABPersonPhoneProperty);
    int phoneNumbers = ABMultiValueGetCount(phones);
    if (phoneNumbers > 0) {
        for (CFIndex i = 0; i < phoneNumbers; i++) {
            NSString *phone = (NSString *)CFBridgingRelease(ABMultiValueCopyValueAtIndex(phones, i));
            if ([phone rangeOfString:@"123"].location != NSNotFound) {
                [matchingPeople addObject:person];
                break;
            }
        }
    }
    CFRelease(phones);
}
CFRelease(people); 
```

就个人而言，我不会将 ABRecordRefs 添加到数组中——我会创建一个值对象，其中仅包含您想要从记录中获取的字段并添加它，因此当您完成循环时，您可以确保您不要t 有任何悬空的 CFType。

# python - GAE ndb future.done() 永远不会返回 true

> ID：13623749
> 
> 赞同：2
> 
> 时间：2012-11-29T10:32:41.673
> 
> 标签：python, google-app-engine, google-cloud-datastore, app-engine-ndb

以下递归函数无限循环，因为 f.done() 永远不会返回 true。为什么 .done() 永远不会返回 true？

```
 def check(f):
            if f.done():
                logging.info(f.get_result())
            else:
                check(f)

        f = ndb.Key(Entity, 'id').get_async()
        #loops forever
        check(f) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T16:05:09.110

使未来“完成”的代码永远不会有机会运行，因为您永远不会从任务中屈服，也不会在任何事情上调用 get_result() 或 wait()。

NDB 的异步处理不使用线程——它将代码交错在单个线程中，并且仅在进行某些调用（例如 wait()、get_result() 或 yield ）时在*任务之间切换。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:00:26.740

这似乎不可能永远循环。最多循环**60 秒**，这是该方法的默认等待时间参数`get_async`。

此外，除非这是一个相当简单的示例来说明一点，否则您的递归是不必要的。该`get_result`方法将为您完成所有这些工作，将其包装在 a 中`try - except`并在查询不成功时捕获异常。

> get_result() - 必要时等待；然后返回结果或引发异常。

# c++ - 当然，我在 boost:replace_all 上做错了什么。请检查健康？

> ID：13623751
> 
> 赞同：1
> 
> 时间：2012-11-29T10:32:49.117
> 
> 标签：c++, string, replace

我想要一种有效的方法来对字符串执行搜索和替换（实际上它是一个着色器字符串），所以我做了一些研究并提出了 boost::replace_all。我的函数传递了一个字符串和一个向量或对。每对是一对字符串；搜索并替换为字符串。我想迭代这组替换，在过程中修改字符串。这是我想出的：

```
void 
Shader::Read(ShaderTypes type, std::string const & shader, std::vector<std::pair<std::string, std::string>> const & replace)
{
    // Perform search and replace on input string.

    std::string newShader = shader;

    std::for_each(replace.begin(), replace.end(), [newShader](std::pair<std::string, std::string> const & pair) {
        boost::replace_all(newShader, pair.first, pair.second);
    });

    // Create and compile shader.

    Read(type, newShader);
} 
```

现在这不会编译。我从 boost 中得到了很多错误。我认为这与 pair 是 const 有关，但我不是 100% 确定的。当我尝试手动创建一个 std::pair 并用它调用 replace_all 时，它起作用了。虽然不喜欢它从 lambda 到达的形式。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:37:46.550

`newShader`您应该通过引用捕获：

```
std::for_each(replace.begin(), replace.end(), [&newShader](... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:41:27.973

我很确定 newShader 应该通过引用 lambda 来传递。而且你不必给出它的名字，你可以用[&]自动捕获。

# jenkins - 来自 com.cloudbees.jenkins.plugins.license 的 NullPointerException

> ID：13623755
> 
> 赞同：0
> 
> 时间：2012-11-29T10:32:53.403
> 
> 标签：jenkins, jenkins-plugins, cloudbees

使用 ubuntu 软件包升级我在 ubuntu 上安装的 jenkins 后，我收到 cloudbees 许可证插件错误。

```
java.lang.NullPointerException
at com.cloudbees.jenkins.plugins.license.BootHook.innerOnLoaded(BootHook.java:59)
at com.cloudbees.jenkins.plugins.license.BootHook.onLoaded(BootHook.java:49)
at jenkins.model.Jenkins.<init>(Jenkins.java:845)
at hudson.model.Hudson.<init>(Hudson.java:81)
at hudson.model.Hudson.<init>(Hudson.java:77)
at hudson.WebAppMain$2.run(WebAppMain.java:214) 
```

我的詹金斯版本是 1.492

如果我禁用该插件，那可以工作，但我看不到文件夹中的某些项目。我能怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T10:09:16.547

核心的变化影响了插件。

简而言之，核心版本和插件版本之间存在冲突。由于插件必须支持广泛的 Jenkins 版本，它包括一个 Bouncy Castle 版本，并要求将其加载到隔离的类加载器中......在某些情况下，核心在寻找扩展时会以不同的方式解析类加载器，并且扩展最终可能会解析不同版本的 Bouncy Castle ......这会导致找不到扩展（免费许可证插件）和相应的 NPE。

我们在 1.490 发布几天后修复了这个问题。该修复在 cloudbees-license 3.5 和 free-license 3.2 中（也在 nectar-license 3.3 中 - 但只有在您运行任何 Jenkins Enterprise 插件时才有意义）

要让一个破旧的系统恢复工作，需要遵循以下步骤：

1.  停止詹金斯（如果你还没有）
2.  删除以下目录`$JENKINS_HOME/plugins/cloudbees-license`，`$JENKINS_HOME/plugins/free-license`如果存在`$JENKINS_HOME/plugins/nectar-license`
3.  删除以下文件`$JENKINS_HOME/plugins/cloudbees-license.hpi`, `$JENKINS_HOME/plugins/cloudbees-license.jpi`, `$JENKINS_HOME/plugins/free-license.hpi`, `$JENKINS_HOME/plugins/cloudbees-license.jpi`, 如果存在`$JENKINS_HOME/plugins/nectar-license.hpi`或`$JENKINS_HOME/plugins/nectar-license.jpi`(*注意：*通常只会存在`.hpi` *或*文件。哪个`.jpi`存在取决于您最初下载插件时安装的 Jenkins 版本。没关系哪个。
4.  下载您删除的插件的最新版本：（*注意：*`nectar-license`如果您在步骤 2 和 3 中删除了插件，请仅下载该插件）

    *   [cloudbees-许可证](http://jenkins-updates.cloudbees.com/download/plugins/cloudbees-license/3.5/cloudbees-license.hpi)
    *   [免费许可](http://jenkins-updates.cloudbees.com/download/plugins/free-license/3.2/free-license.hpi)
    *   [花蜜许可证](http://jenkins-updates.cloudbees.com/download/plugins/nectar-license/3.3/nectar-license.hpi)（仅在需要时）

    是否将 重命名为 由您`.hpi`决定`.jpi`。Jenkins 会选择任何一种方式，但为了长期兼容性，我建议将它们重命名为`.jpi`扩展。

5.  启动詹金斯

6.  跳[时髦的鸡舞](http://www.youtube.com/watch?v=DH2gGu8cGHY)

# c# - NHProfiler 中的堆栈跟踪窗口不显示源代码

> ID：13623759
> 
> 赞同：0
> 
> 时间：2012-11-29T10:32:59.483
> 
> 标签：c#, nhibernate, nhprof

我使用 NHProf 已经有一段时间了，我发现它真的很有用，但是我无法让 Stack Trace 窗口像我在 tekpub 视频中看到的那样工作，如果它显示了源代码的行和文件发出休眠会话请求的代码。

我的休眠会话设置是

```
private static void InitializeSessionFactory()
    {
        NHibernateProfiler.Initialize();
        sessionFactory = Fluently.Configure()                        
            .Database(MsSqlConfiguration.MsSql2008.ConnectionString(@"Data Source=.\SQLEXPRESS;Initial Catalog=nhibernate;User ID=sa;Password=*****;Pooling=False")) 
            .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Make>())
            .ExposeConfiguration(x => x.SetProperty("current_session_context_class", "thread_static"))
            .ExposeConfiguration(x => x.SetProperty("generate_statistic", "true"))                        .BuildSessionFactory();
    } 
```

我应该进行一些其他配置集以使此功能正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:05:41.653

It should just work.
Can you open a question about this [here](https://groups.google.com/forum/?fromgroups#!forum/nhprof), with a small project that reproduce that issue?

# java - 如果 StringBuilder 从 AbstractStringBuilder 继承，为什么还要实现 CharSequence？

> ID：13623763
> 
> 赞同：3
> 
> 时间：2012-11-29T10:33:06.463
> 
> 标签：java, inheritance, interface, stringbuilder

类`StringBuilder extends AbstractStringBuilder`和`implements java.io.Serializable, CharSequence`.

和`AbstractStringBuilder implements Appendable, CharSequence`。

这两个课程都是从 1.5 开始的。谁能解释为什么`StringBuilder`应该实施`CharSequence`而不是`Appendable`？无论如何它都继承了它们`AbstractStringBuilder`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:38:58.833

`implements CharSequence`在语义上，无论是否指定都完全相同。`StringBuilder`除非通过查看 JDK 代码库的历史，否则无法回答为什么要明确声明这一点，而且无论如何答案都不会提供很多信息。

例如，抽象超类可能是稍后引入的，而早期版本的`StringBuilder`确实需要该`implements`子句。在引入抽象类之后，这本可以被删除，但没有被删除，没有造成任何伤害。

# ruby - 何时在 Github 上增加项目的版本号

> ID：13623767
> 
> 赞同：5
> 
> 时间：2012-11-29T10:33:19.043
> 
> 标签：ruby, git, github, semantic-versioning

这更像是一个哲学问题，但我想知道该怎么做。

好的，让我们举一个具体的例子。我在 Github 上有一个项目，它是一个 Ruby gem。

通常，当我发布新版本时，我会完成所有功能和修复，然后使用 as 消息创建提交，`"Bumping version to v1.2.0"`并且仅包含 Changelog 更新和`VERSION`持续更新。`v1.2.0`标签指向这个提交。

但是之后...

*   我是否应该直接再次修改版本以使其成为`v1.3.0-alpha`回购协议？
*   如果在过程中的某个地方我最终做出了很大的改变，我是否应该将版本重新调整为`v2.0.0`?
*   我应该创建一个`v1.2.x`分支来处理补丁版本吗？

您的流程和在所有这些方面使用的良好做法是什么？有什么额外的建议吗？

谢谢大家！:)

# python - USB 驱动器中的 PyDev 解释器指示

> ID：13623771
> 
> 赞同：2
> 
> 时间：2012-11-29T10:33:33.367
> 
> 标签：python, eclipse, eclipse-plugin

我正在使用安装了可移植 eclipse 和可移植 python 的 PortableApps 应用程序。我已经为我的 Eclipse 配备了 PyDev 插件，使我能够在任何我想要的基于 Windows 的平台上运行和调试我的文件。问题是为了在我的 USB 记忆棒中使用解释器，我需要在 PyDev 设置中解决 python 解释器的正确位置。将 USB 驱动器连接到不同的计算机时，我的 USB 记忆棒得到了不同的驱动器号，这会导致在我的 USB 记忆棒中定位已安装 python 的路径时出现问题。有没有办法强制 eclipse 的 PyDev 插件查找永久安装在我的 USB 内的 python 解释器？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:33:15.507

您是否考虑过将解释器位置作为相对路径？例如： `..\..\..\python\python.exe`。我不确定 PyDev 的工作目录是什么，但如果你放的够多`..`，Windows 会停在驱动器根目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T01:16:29.110

您是否尝试过使用 subst？您可以使用 Z: 或 X: 之类的字母进行配置，并且在插入笔式驱动器的任何计算中，您只需运行带有 subst 的 .bat 并且您的环境已准备好...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-18T22:38:37.340

使用相对 Eclipse 路径变量，例如：{eclipse_home}..\..\..\PortablePython\App\python.exe

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-20T10:43:47.980

我将便携式 Eclipse 置于版本控制之下。然后我初始化了解释器设置。在提交预览中，可以看到更改的设置存储在

> 工作区/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.python.pydev.prefs

我使用搜索/替换将绝对路径替换为相对路径（如其他答案所述），例如

```
D\:\\EclipsePython\\App  => {eclipse_home}\\..\\App\ 
```

保存设置文件后重新启动 Eclipse。

PyDev 的解释器设置对话框显示相对路径（也适用于无法直接编辑的库路径）。（如果弹出窗口要求您应用检测到的更改，请选择忽略它们。）

我能够使用该可移植设置运行我的 python 程序。

[![在此处输入图像描述](../Images/edd5e256e341634847fe48aa41d0b289.png)](https://i.stack.imgur.com/nYrJb.png)

# c# - 异步下载文件到客户端

> ID：13623772
> 
> 赞同：4
> 
> 时间：2012-11-29T10:33:33.593
> 
> 标签：c#, asp.net-mvc, asynchronous, download

我很难完成某件事。

我正在使用 asp.net MVC 4 构建一个邮件客户端。

我现在必须将与消息（而不是附件）相关的图像下载到客户端浏览器。

现在我有了这个设置：

客户端浏览器 -> 控制器/后端 -> 邮件服务器

澄清一下：我有一个客户端请求，其中包含图像的内容 ID、正确的邮箱、消息等。有了这些信息，我可以从邮件服务器下载图像并将其上传到客户端。现在是困难的部分：我想异步执行此操作。我希望能够从邮件服务器下载 512 KB 的块，解码该部分，并将其发送到客户端.. 获取 - 解码 - 发送.. 只要浏览器获得图像的所有数据。

我只是不想先将所有数据下载到服务器，然后使用所有数据创建一个新的内存流并将其作为文件结果返回。我只是太害怕在我的内存中获得太大的文件并阻止其他进程等。

我也计划使用这种方法来上传真实附件（可能是 100 的 MB）。所以我以后会需要那个方法。

现在我只是不知道如何实现这一点，因为我有一个到邮件服务器的连接，并且我有一个到客户端的连接。我必须将数据传递给一个新的流或其他东西来完成这个..

有人可以帮帮我吗？

编辑：澄清：不，我不能引用邮件服务器上的文件。我必须通过套接字将文件下载到服务器。

Edit2：http chuncked 可以解决吗？如果是的话，你能给我一个小例子吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T17:04:14.260

您只需要将数据从一个流（到邮件服务器的 tcp 连接）复制到另一个（到浏览器的 http 连接），对吗？如果要扩展，则需要使用[本文](http://msdn.microsoft.com/en-us/magazine/cc337900.aspx)所述的非阻塞 IO 。因此，您需要从 IHttpAsyncHandler 实现中调用该文章中的代码。你最终会得到这样的东西：

```
class MyHandler : IHttpAsyncHandler
{
    public IAsyncResult BeginProcessRequest(HttpContext context, AsyncCallback cb, object extraData)
    {
        Stream src = null; // remote data source
        Stream dst = context.Response.OutputStream;

        // set content type, etc

        var res = new MyResult();

        AsynchCopy(src, dst, () =>
            {
                ((ManualResetEvent)res.AsyncWaitHandle).Set();
                cb(res);
                src.Close();
                dst.Flush();
            });

        return res;
    }

    public void EndProcessRequest(IAsyncResult result)
    {
    }

    public bool IsReusable
    {
        get { return true; }
    }

    public void ProcessRequest(HttpContext context)
    {
        throw new NotImplementedException();
    }

    class MyResult : IAsyncResult
    {
        public MyResult()
        {
            AsyncWaitHandle = new ManualResetEvent(false);
        }

        public object AsyncState
        {
            get { return null; }
        }

        public WaitHandle AsyncWaitHandle
        {
            get;
            private set;
        }

        public bool CompletedSynchronously
        {
            get { return false; }
        }

        public bool IsCompleted
        {
            get { return AsyncWaitHandle.WaitOne(0); }
        }
    }

    public static void AsynchCopy(Stream src, Stream dst, Action done)
    {
        byte[] buffer = new byte[2560];
        AsyncCallback readCallback = null, writeCallback = null;

        readCallback = (readResult) =>
        {
            int read = src.EndRead(readResult);
            if (read > 0)
            {
                dst.BeginWrite(buffer, 0, read, writeCallback, null);
            }
            else
            {
                done();
            }
        };

        writeCallback = (writeResult) =>
        {
            dst.EndWrite(writeResult);
            src.BeginRead(buffer, 0, buffer.Length, readCallback, null);
        };

        src.BeginRead(buffer, 0, buffer.Length, readCallback, null);
    }
} 
```

上面的代码未经测试，不包含错误处理，但它应该让你开始。

# prolog - Prolog 约束处理 : Packing Squares

> ID：13623775
> 
> 赞同：36
> 
> 时间：2012-11-29T10:33:39.793
> 
> 标签：prolog, constraints, clpfd, sicstus-prolog, clpb

我正在尝试解决 prolog 中的约束处理问题。

我需要在 10x10 的网格中打包 4 个 5x5、4x4、3x3 和 2x2 的正方形。它们可能不会重叠。

我的变量如下所示：

```
Name: SqX(i), i=1..10, domain: 1..10 
```

其中 X 为 5、4、3 或 2。索引 i 表示行，域表示网格中的列。

我的第一个约束尝试定义正方形的宽度和高度。我这样表述：

```
Constraint: SqX(i) > SqX(j)-X /\ i>j-X, range: i>0 /\ j>0 
```

这样可能的点就被限制在彼此之间的 X 行和列内。然而，Prolog 停止这些约束并给出以下结果：

```
Adding constraint "(Sq5_I > Sq5_J-5) /\ (I>J-5)" for values:
        I=1, J=1, 
        I=1, J=2, 
        I=1, J=3, 
        I=1, J=4, 
        I=1, J=5, 
        I=1, J=6, 
=======================[ End Solutions ]======================= 
```

所以它停在那里，甚至没有检查其他方格。我的约束很可能太紧了，但我不明白为什么或如何。有什么建议么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T15:32:08.050

对于每个正方形，定义表示左上角的变量`X`。`Y`这些变量将具有域`1..10-L`，其中`L`是正方形的长度。如果将域设置为`1..10`，则正方形可能会部分放置在 10x10 矩形之外。

然后，您可以为每对矩形发布约束，`(X,Y)`并`(X1,Y1)`声明如果它们在 x 轴上重叠，则它们不能在 y 轴上重叠，反之亦然：

```
(((X  #=< X1) and (X+L   #> X1)) => ((Y+L #=< Y1) or (Y1+L1 #=< Y))),
(((X1 #=< X)  and (X1+L1 #> X))  => ((Y+L #=< Y1) or (Y1+L1 #=< Y))),
(((Y  #=< Y1) and (Y+L   #> Y1)) => ((X+L #=< X1) or (X1+L1 #=< X))),
(((Y1 #=< Y)  and (Y1+L1 #> Y))  => ((X+L #=< X1) or (X1+L1 #=< X))) 
```

（您的特定约束语法可能会有所不同）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-01T11:08:20.770

自 3.8.3 版以来，SICStus Prolog 提供了许多专用的[放置约束](https://sicstus.sics.se/sicstus/docs/latest4/html/sicstus.html/Placement-Constraints.html#Placement-Constraints)，可以很好地匹配您的打包问题。特别是，由于您的打包问题是二维的，您应该考虑使用`disjoint2/1`约束。

以下代码片段用于`disjoint2/1`表示矩形不重叠。主要关系是`area_boxes_positions_/4`。

```
:- use_module(library(clpfd)).
:- use_module(library(lists)).

area_box_pos_combined(W_total*H_total,W*H,X+Y,f(X,W,Y,H)) :-
    X #>= 1,
    X #=< W_total-W+1,
    Y #>= 1,
    Y #=< H_total-H+1.

positions_vars([],[]).
positions_vars([X+Y|XYs],[X,Y|Zs]) :-
    positions_vars(XYs,Zs).

area_boxes_positions_(Area,Bs,Ps,Zs) :-
    maplist(area_box_pos_combined(Area),Bs,Ps,Cs),
    disjoint2(Cs),
    positions_vars(Ps,Zs). 
```

关于一些查询！首先，您的初始包装问题：

```
?- area_boxes_positions_(10*10,[5*5,4*4,3*3,2*2],Positions,Zs),
   labeling([],Zs).
Positions = [1+1,1+6,5+6,5+9],
Zs        = [1,1,1,6,5,6,5,9] ? ... 
```

接下来，让我们最小化放置所有正方形所需的总面积：

```
?- domain([W,H],1,10),
   area_boxes_positions_(W*H,[5*5,4*4,3*3,2*2],Positions,Zs),
   WH #= W*H,
   minimize(labeling([ff],[H,W|Zs]),WH).
W         = 9,
H         = 7,
Positions = [1+1,6+1,6+5,1+6],
Zs        = [1,1,6,1,6,5,1,6],
WH        = 63 ? ... 
```

* * *

### 可视化解决方案

个人解决方案*实际上是*什么样的？ [ImageMagick](http://imagemagick.org/)可以生成漂亮的小位图...

这是一些用于转储正确 ImageMagick 命令的快速而肮脏的代码：

```
:- use_module(library(between)).
:- use_module(library(codesio)).

drawWithIM_at_area_name_label(Sizes,Positions,W*H,Name,Label) :-
    Pix = 20,

    % let the ImageMagick command string begin
    format('convert -size ~dx~d xc:skyblue', [(W+2)*Pix, (H+2)*Pix]),

    % fill canvas 
    format(' -stroke none -draw "fill darkgrey rectangle ~d,~d ~d,~d"', 
           [Pix,Pix, (W+1)*Pix-1,(H+1)*Pix-1]),

    % draw grid
    drawGridWithIM_area_pix("stroke-dasharray 1 1",W*H,Pix),

    % draw boxes
    drawBoxesWithIM_at_pix(Sizes,Positions,Pix),

    % print label
    write( ' -stroke none -fill black'),
    write( ' -gravity southwest -pointsize 16 -annotate +4+0'),
    format(' "~s"',[Label]),

    % specify filename
    format(' ~s~n',[Name]). 
```

上面的代码`drawWithIM_at_area_name_label/5`依赖于两个小助手：

```
drawGridWithIM_area_pix(Stroke,W*H,P) :-   % vertical lines
    write(' -strokewidth 1 -fill none -stroke gray'),
    between(2,W,X),
    format(' -draw "~s path \'M ~d,~d L ~d,~d\'"', [Stroke,X*P,P, X*P,(H+1)*P-1]),
    false.
drawGridWithIM_area_pix(Stroke,W*H,P) :-   % horizontal lines
    between(2,H,Y),
    format(' -draw "~s path \'M ~d,~d L ~d,~d\'"', [Stroke,P,Y*P, (W+1)*P-1,Y*P]),
    false.
drawGridWithIM_area_pix(_,_,_).

drawBoxesWithIM_at_pix(Sizes,Positions,P) :-
    Colors = ["#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff"],
    write(' -strokewidth 2 -stroke white'),
    nth1(N,Positions,Xb+Yb),
    nth1(N,Sizes,    Wb*Hb),
    nth1(N,Colors,   Color),
    format(' -draw "fill ~sb0 roundrectangle ~d,~d ~d,~d ~d,~d"',
           [Color, Xb*P+3,Yb*P+3, (Xb+Wb)*P-3,(Yb+Hb)*P-3, P/2,P/2]),
    false.
drawBoxesWithIM_at_pix(_,_,_). 
```

### 使用可视化工具

让我们使用以下两个查询来生成一些静止图像。

```
?- drawWithIM_at_area_name_label([5*5,4*4,3*3,2*2],[1+1,6+1,6+5,1+6],9*7,
                                 'dj2_9x7.gif','9x7').

?- drawWithIM_at_area_name_label([5*5,4*4,3*3,2*2],[1+1,1+6,5+6,5+9],10*10,
                                 'dj2_10x10.gif','10x10'). 
```

让我们使用以下 hack-query 为在大小板上放置上述矩形的每个解决方案生成一个图像`9*7`：

```
?- retractall(nSols(_)), 
   assert(nSols(1)), 
   W=9,H=7,
   Boxes = [5*5,4*4,3*3,2*2],
   area_boxes_positions_(W*H,Boxes,Positions,Zs),
   labeling([],Zs), 
   nSols(N), 
   retract(nSols(_)), 
   format_to_codes('dj2_~5d.gif',[N],Name),
   format_to_codes('~dx~d: solution #~d',[W,H,N],Label),
   drawWithIM_at_area_name_label(Boxes,Positions,W*H,Name,Label),
   N1 is N+1,
   assert(nSols(N1)),
   false. 
```

接下来，执行上述查询输出的所有 ImageMagick 命令。

最后，使用 ImageMagick 构建第三个查询的解决方案集的动画：

```
$ convert -delay 15  dj2_0.*.gif   dj2_9x7_allSolutions_1way.gif 
$ convert dj2_9x7_allSolutions_1way.gif -coalesce -duplicate 1,-2-1 \
          -quiet -layers OptimizePlus -loop 0 dj2_9x7_allSolutions.gif 
```

### 结果

首先，针对板尺寸 10*10 的一种解决方案：![10x10：一种解决方案](../Images/0c7f3fb01bf83bb4bd3f489b90278612.png)

其次，针对最小尺寸 (9*7) 的板的一种解决方案：![9x7：一种解决方案](../Images/73aa4b70a4035cd305de6b42467a7fec.png)

最后，对于最小尺寸 (9*7) 的板的所有解决方案：![9x7：所有解决方案](../Images/9d3b0b477d381840a1b55d1753a6583d.png)

* * *

### 编辑 2015-04-14

从版本 7.1.36 开始，[SWI-Prolog clpfd 库](http://www.swi-prolog.org/man/clpfd.html)支持约束`disjoint2/1`。

### 编辑 2015-04-22

这是基于`tuples_in/2`约束的替代实现的草图：

1.  对于每对框，确定这两个框不重叠的所有位置。
2.  将有效组合编码为元组列表。
3.  对于每一对框都发布一个`tuples_in/2`约束。

作为一个私人的概念验证，我按照这个想法实现了一些代码；就像@CapelliC 在他的回答中一样，我得到`169480`了针对 OP 所述的盒子和电路板大小的不同解决方案。

运行时间与其他基于 clp(FD) 的答案相当；事实上，它对于小板（10*10 和更小）*非常有*竞争力，但对于更大的板尺寸会变得*更糟。*

请承认，为了体面，我不会发布代码:)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-17T09:20:38.823

这里已经发布了几个很棒的解决方案（全部 +1！），使用 CLP(FD) 约束。

此外，我想展示一种概念上不同的方法来解决此类放置和覆盖任务，使用 CLP( **B** ) 约束。

这个想法是将瓦片的每个可能放置视为网格上特定元素处的一组**TRUE**值，其中每个网格元素对应于矩阵的一列，并且每个可能的瓦片放置对应于一行。然后任务是选择所述矩阵的一组行，使得每个网格元素最多被覆盖一次，或者换句话说，在由所选行组成的子矩阵的每一列中最多有一个**TRUE**值.

在这个公式中，行的选择——以及因此瓷砖在特定位置的放置——由布尔变量表示，一个用于矩阵的每一行。

这是我想分享的代码，它可以在 SICStus Prolog 和 SWI 中工作，最多只做一些小的改动：

```
:- use_module(library(clpb)).
:- use_module(library(clpfd)).

/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
   The tiles we have available for placement.

   For example, a 2x2 tile is represented in matrix form as:

       [[1,1],
        [1,1]]

   1 indicates which grid elements are covered when placing the tile.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */

tile(5*5).
tile(4*4).
tile(3*3).
tile(2*2).

tile_matrix(Rows) :-
        tile(M*N),
        length(Rows, M),
        maplist(length_list(N), Rows),
        append(Rows, Ls),
        maplist(=(1), Ls).

length_list(L, Ls) :- length(Ls, L).

/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
   Describe placement of tiles as SAT constraints.

   Notice the use of Cards1 to make sure that each tile is used
   exactly once. Remove or change this constraint if a shape can be
   used multiple times, or can even be omitted.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */

placement(M, N, Vs, *(Cs) * *(Cards1)) :-
        matrix(M, N, TilesRows),
        pairs_keys_values(TilesRows, Tiles, Rows),
        same_length(Rows, Vs),
        pairs_keys_values(TilesVs0, Tiles, Vs),
        keysort(TilesVs0, TilesVs),
        group_pairs_by_key(TilesVs, Groups),
        pairs_values(Groups, SameTiles),
        maplist(card1, SameTiles, Cards1),
        Rows = [First|_],
        phrase(all_cardinalities(First, Vs, Rows), Cs).

card1(Vs, card([1], Vs)).

all_cardinalities([], _, _) --> [].
all_cardinalities([_|Rest], Vs, Rows0) -->
        { maplist(list_first_rest, Rows0, Fs, Rows),
          pairs_keys_values(Pairs0, Fs, Vs),
          include(key_one, Pairs0, Pairs),
          pairs_values(Pairs, Cs) },
        [card([0,1], Cs)],
        all_cardinalities(Rest, Vs, Rows).

key_one(1-_).

list_first_rest([L|Ls], L, Ls).

/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
   We build a matrix M_ij, where each row i describes what placing a
   tile at a specific position looks like: Each cell of the grid
   corresponds to a unique column of the matrix, and the matrix
   entries that are 1 indicate the grid positions that are covered by
   placing one of the tiles at the described position. Therefore,
   placing all tiles corresponds to selecting specific rows of the
   matrix such that, for the selected rows, at most one "1" occurs in
   each column.

   We represent each row of the matrix as Ts-Ls, where Ts is the tile
   that is used in each case.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */

matrix(M, N, Ms) :-
        Squares #= M*N,
        length(Ls, Squares),
        findall(Ts-Ls, line(N, Ts, Ls), Ms).

line(N, Ts, Ls) :-
        tile_matrix(Ts),
        length(Ls, Max),
        phrase((zeros(0,P0),tile_(Ts,N,Max,P0,P1),zeros(P1,_)), Ls).

tile_([], _, _, P, P) --> [].
tile_([T|Ts], N, Max, P0, P) -->
        tile_part(T, N, P0, P1),
        { (P1 - 1) mod N >= P0 mod N,
          P2 #= min(P0 + N, Max) },
        zeros(P1, P2),
        tile_(Ts, N, Max, P2, P).

tile_part([], _, P, P) --> [].
tile_part([L|Ls], N, P0, P) --> [L],
        { P1 #= P0 + 1 },
        tile_part(Ls, N, P1, P).

zeros(P, P)  --> [].
zeros(P0, P) --> [0], { P1 #= P0 + 1 }, zeros(P1, P). 
```

以下查询说明了哪些网格元素被覆盖 ( `1`)，其中每一行对应于其中一个矩形的位置：

```
?- M = 7, N = 9, placement(M, N, Vs, Sat), sat(Sat),
  labeling(Vs), matrix(M, N, Ms), pairs_values(Ms, Rows),
  pairs_keys_values(Pairs0, Vs, Rows),
  include(key_one, Pairs0, Pairs1), pairs_values(Pairs1, Covers),
  maplist(writeln, Covers).
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0,1,1,1,1,1,0,0,0,0]
[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1,0,0,0,0,0,1,1,1,1]
[0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
[0,0,0,0,1,1,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]
M = 7,
N = 9,
etc. 
```

对应的解决方案：

![原始问题的解决方案](../Images/70fc36e1242d0dbcfb0bf7e073967de5.png)

这样的 CLP(B) 公式通常比 CLP(FD) 版本的可扩展性更小，这也是因为涉及的变量更多。但是，它也有一些优点：

一个重要的优点是它很容易推广到可以*多次*使用部分或全部形状的任务版本。例如，在上面的版本中，我们可以简单地更改`card1/2`为：

```
custom_cardinality(Vs, card([0,1,2,3,4,5,6,7], Vs)). 
```

并获得一个版本，每个图块最多可以使用 7 次，甚至可以完全省略（由于包含`0`）。

其次，我们可以轻松地将其转换为*精确*覆盖问题的解决方案，这意味着*每个*网格元素都被其中一个形状覆盖，只需将其更改`card([0,1], Cs)`为`card([1], Cs)`in即可`all_cardinalities//3`。

连同其他修改，这里是一个使用四个 2x2 矩形的 4x4 网格的覆盖：

```
[1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0]
[0,0,1,1,0,0,1,1,0,0,0,0,0,0,0,0]
[0,0,0,0,0,0,0,0,1,1,0,0,1,1,0,0]
[0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1] 
```

CLP(B) 公式的第三个优点是无需显式枚举解即可计算解的数量。例如，对于原始任务：

```
?- placement(7, 9, Vs, Sat), sat_count(Sat, Count).
Count = 68. 
```

@repeat 已经对这 68 个解决方案进行了精美的说明。

为了比较，这里是每个形状可以使用 0 到 7 次的解决方案的数量：

```
?- placement(7, 9, Vs, Sat), time(sat_count(Sat, Count)).
% 157,970,727 inferences, 19.165 CPU in 19.571 seconds
...
Count = 17548478. 
```

在 10x10 网格上也是如此，在大约 6 分钟内计算（约 20 亿次推理）：

```
?- placement(10, 10, Vs, Sat), sat_count(Sat, Count).
Count = 140547294509. 
```

在 11x11 网格上，大约半小时计算（约 90 亿次推理）：

```
?- placement(11, 11, Vs, Sat), sat_count(Sat, Count).
Count = 15339263199580. 
```

最后，也许最重要的是，这种方法适用于*任何形状*的瓷砖，并且*不限*于正方形或矩形。例如，要处理 1x1 正方形和三角形以及其垂直和水平反射，请使用以下定义`tile_matrix/1`：

```
tile_matrix([[1]]).
tile_matrix(T) :-
        T0 = [[1,1,1,1],
              [1,1,1,0],
              [1,1,0,0],
              [1,0,0,0]],
        (   T = T0
        ;   maplist(reverse, T0, T)
        ;   reverse(T0, T)
        ). 
```

允许这些形状中的每一个在 9x7 板上使用 0 到 7 次，大约一分钟后，我得到了`Count = 58665048314`解决方案。

这是其中之一，随机挑选：

![三角形的例子](../Images/b41e625d265aeacfe817ec0a33f34daa.png)

使用 CLP(B) 以使每个解决方案都具有同等可能性的方式选择解决方案也很容易，即使解决方案的数量太大而无法明确列举它们。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T17:13:56.263

我用 SWI-Prolog 编码

```
/*  File:    pack_squares.lp
    Author:  Carlo,,,
    Created: Nov 29 2012
    Purpose: http://stackoverflow.com/questions/13623775/prolog-constraint-processing-packing-squares
*/

:- module(pack_squares, [pack_squares/0]).
:- [library(clpfd)].

pack_squares :-
    maplist(square, [5,4,3,2], Squares),
    flatten(Squares, Coords),
    not_overlap(Squares),
    Coords ins 1..10,
    label(Coords),
    maplist(writeln, Squares),
    draw_squares(Squares).

draw_squares(Squares) :-
    forall(between(1, 10, Y),
           (   forall(between(1, 10, X),
              sumpts(X, Y, Squares, 0)),
           nl
           )).

sumpts(_, _, [], S) :- write(S).
sumpts(X, Y, [[X1,Y1, X2,Y2]|Qs], A) :-
    ( ( X >= X1, X =< X2, Y >= Y1, Y =< Y2 )
    ->  B is A+X2-X1+1
    ;   B is A
    ),
    sumpts(X, Y, Qs, B).

square(D, [X1,Y1, X2,Y2]) :-
    X1 + D - 1 #= X2,
    Y1 + D - 1 #= Y2.

not_overlap([_]).
not_overlap([A,B|L]) :-
    not_overlap(A, [B|L]),
    !, not_overlap([B|L]).

not_overlap(_, []).
not_overlap(Q, [R|Rs]) :-
    not_overlap_c(Q, R),
    not_overlap_c(R, Q),
    not_overlap(Q, Rs).

not_overlap_c([X1,Y1, X2,Y2], Q) :-
    not_inside(X1,Y1, Q),
    not_inside(X1,Y2, Q),
    not_inside(X2,Y1, Q),
    not_inside(X2,Y2, Q).

not_inside(X,Y, [X1,Y1, X2,Y2]) :-
    X #< X1 #\/ X #> X2 #\/ Y #< Y1 #\/ Y #> Y2. 
```

这是运行时显示的最后几行`?- aggregate_all(count,pack_squares,C).`，特别是 C 计算总展示位置

```
...
0002255555
0002255555
[6,6,10,10]
[7,2,10,5]
[4,3,6,5]
[5,1,6,2]
0000220000
0000224444
0003334444
0003334444
0003334444
0000055555
0000055555
0000055555
0000055555
0000055555
C = 169480. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-02T12:44:54.737

这是一个[解决方案](https://gist.github.com/jburse/3adcda7096d15f05ee44287adb2efeb0#file-place-pl)，其中 disjoint 只占用一行：

```
% disjoint(+Rectangle, +Rectangle)
disjoint([XA1,XA2,YA1,YA2],[XB1,XB2,YB1,YB2]) :-
   XB1 #>= XA2 #\/ XA1 #>= XB2 #\/
   YB1 #>= YA2 #\/ YA1 #>= YB2. 
```

模型设置和标记工作如下：

```
% squares(-List)
squares(L) :-
   maplist(square, [2,3,4,5], L),
   term_variables(L, V),
   place(L),
   label(V).

% square(+Integer, -Rectangle)
square(S, [X1,X2,Y1,Y2]) :-
   X1 in 0..8,
   X2 in 1..9,
   Y1 in 0..6,
   Y2 in 1..7,
   X2 #= X1+S,
   Y2 #= Y1+S.

% place(+List)
place([]).
place([A|L]) :-
   place(L, A),
   place(L).

% place(+List, +Rectangle)
place([], _).
place([A|L], B) :-
   disjoint(A, B),
   place(L, B). 
```

这是一个示例运行：

```
Jekejeke Prolog 3, Runtime Library 1.3.7 (May 23, 2019)

?- squares(L), show(L).
555554444
555554444
555554444
555554444
55555333.
22...333.
22...333.
L = [[0,2,5,7],[5,8,4,7],[5,9,0,4],[0,5,0,5]] 
```

# iphone - PDF阅读器以横向模式显示2页

> ID：13623776
> 
> 赞同：1
> 
> 时间：2012-11-29T10:33:41.633
> 
> 标签：iphone, pdf

我是 iPhone 应用程序开发人员，我想开发应用程序部分来显示 PDF 文件。

我想显示这样的页面，

> *   应用程序将仅使用横向模式，并且
> *   一次显示两页。

我尝试使用 vrf 阅读器：[https ://github.com/vfr/Reader](https://github.com/vfr/Reader)

> *   但一次显示 2 页并不成功。

有什么方法或图书馆或演示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T11:58:00.940

您可以使用[UIPageViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)在横向模式下显示 2 个页面。检查本[教程](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)：

# sql-server - 如何从 SSIS/SQL Server Data Tools 连接到 Oracle db？

> ID：13623779
> 
> 赞同：1
> 
> 时间：2012-11-29T10:33:50.727
> 
> 标签：sql-server, oracle, ssis, odbc, oracleclient

我在运行 Windows Server 2008 r2 的 64 位机器上安装了 Oracle 11g r2 客户端。已安装以下内容： SQL Server 64 位 MS Office 64 位

我尝试从 excel/powerpivot 连接到 oracle db，它工作得非常好。

但是，当我尝试从 SSIS 连接到 Oracle 数据库时，我发现驱动程序和应用程序之间不匹配。

> ## （标题：连接管理器
> 
> 由于初始化提供程序时出错，测试连接失败。错误 [IM014] [Microsoft][ODBC Driver Manager] 指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配）

我该如何克服这个问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:47:07.853

您需要在以下位置配置 Oracle ODBC 驱动程序 32 位：

> c:\windows\sysWOW64\odbcad32.exe

无论 SSIS 怎么说，服务器 2008 r2 的 SSIS 始终在 32 位上运行：）

1.  您需要编辑 SSIS 包的运行时并将其设置为 false 以查找 32 位 ODBC 驱动程序（第一个窗口） [http://sqlblog.com/blogs/john_paul_cook/archive/2010/03/24/running-32-bit-ssis -in-a-64-bit-environment.aspx](http://sqlblog.com/blogs/john_paul_cook/archive/2010/03/24/running-32-bit-ssis-in-a-64-bit-environment.aspx)

2.  在“代理”作业步骤属性“执行选项”选项卡中，您需要检查“使用 32 位运行时”选项。

# ios - 从应用程序创建日历时出现 iCloud 日历同步问题

> ID：13623782
> 
> 赞同：3
> 
> 时间：2012-11-29T10:34:02.127
> 
> 标签：ios, calendar, icloud, icalendar

尝试为 iOS 实现 iCloud 日历同步。这个想法是从我的应用程序创建一个新日历，并在 iCloud 同步实际开启时将其与 iCloud 同步。要获得相应的来源，我使用以下代码：

EKSource* localSource=nil;

for (EKSource* source in self.eventStore.sources) { if(source.sourceType == EKSourceTypeCalDAV && [source.title isEqualToString:@"iCloud"]) { localSource = source; 休息; }

}

然后在该源中创建一个日历并保存。

当 iCloud 同步打开并且 iCloud 的日历同步也打开时，从 iPhone-> 设置-> iCloud-> 日历它工作得很好。从上述设置关闭日历同步后，理论上它不应该允许在该存储中创建日历。但实际上即使在这种情况下，它也允许从我的应用程序中获取相应的 iCloud 存储并创建/保存新日历。创建新日历后，它不会显示在 iPhone 的日历列表中。但是当您登录到 iCloud Web 界面时，您会看到很多与您刚刚添加的名称相同的日历。具有该名称的日历的数量越来越多。就像 iCloud 日历同步中存在无限循环问题一样。到目前为止，像这样的接缝'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T08:56:35.397

不确定您是否想通了，如果您想通了，请发布您的解决方案:-)

但这似乎是一个错误——我刚刚在我的 Mac 上检查了 iCal，它加载了重复的日历。

只是弄清楚，但我认为我正在工作的一些粗略代码是在 EKSource 中创建一个日历，然后检查该日历。

像这样的东西：

```
-(BOOL)testCal {
  BOOL cal = 0;

  NSUInteger counter = 1;
  for (EKCalendar *thisCalendar in [[DGEK eventStore]calendars] ){
    NSLog(@"%@", thisCalendar.title);
    if ([thisCalendar.title isEqualToString:@"YourCalName"]) {
        cal = YES;
        return cal;
    }
    counter++;
  }
  return cal; 
} 
```

我认为这行得通。目前只是做一些更多的测试。

如果 Cal 不存在，我将使用以下内容获取默认源：

```
source = [[[self eventStore] defaultCalendarForNewEvents] source]; 
```

希望有帮助。

# javascript - 使用Javascript实时读取txt文件

> ID：13623784
> 
> 赞同：3
> 
> 时间：2012-11-29T10:34:04.620
> 
> 标签：javascript, jquery, ajax, file

我想知道是否有某种方法可以实时从 Javascript 读取 .txt 文件？我有一个每隔几秒更新一次的日志文件。我想在更新时解析该日志文件中的一些数据并将其显示在 html 中。我可以直播吗？非常感谢你们！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T10:36:57.307

假设该文件是可公开访问的，您可以拥有一个 javascript 函数，该函数每隔几秒发出一个 AJAX 请求以读取该文件。类似于以下内容：

```
function getLog() {
    $.ajax({
        url: 'logfile.txt',
        dataType: 'text',
        success: function(text) {
            $("#containerDiv").text(text);
            setTimeout(getLog, 30000); // refresh every 30 seconds
        }
    })
}

getLog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:39:11.983

不，您不能使用 Javascript 读取/写入文件，因为这将是一个可怕的安全问题。

但是，在您的情况下，您可以对服务器端脚本使用一些 Ajax 调用。

# java - 从 jscript 获取字符串值到 servlet

> ID：13623785
> 
> 赞同：0
> 
> 时间：2012-11-29T10:34:04.387
> 
> 标签：java, javascript, html, servlets

我对此有点怀疑...我如何从 servlet 中名为“z”的 jsp 页面 jscript 字符串中设置/检索值。我需要在 servlet 中使用它...我正在探索新事物 n它对我来说是新事物，因为我对这些东西很陌生...感谢您的快速帮助....如果 pass1 和 pass2 相同，我需要密码的值，然后如果 pass1 我需要在 servlet 中检索它==pass2...告诉我一个方法...为此我写了一个 jscript 来检查 pass1==pass2..

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>New User Registration</title>
    <script>
    function myFunction(){
        var x = document.forms["newForm"]["pass1"].value;
        var y = document.forms["newForm"]["pass2"].value;
    if(x==y){
        document.newForm.submit();var z=x;
        return true;
        }
        else {
        alert("Passwords not matching!!!");}
        }

    </script>
    </head>
    <body>
    <h1>Form</h1>
    <fieldset>
    <form name=newForm action="RegServlet">Username:<input
        type="text" name="username"><br>
    Password:<input type="text" name="pass1" id="pass1"><br>
    Confirm Password:<input type="text" name="pass2" id="pass2"><br>
    <input type="submit" onclick=myFunction() value="Create"></input></form>
    </fieldset>

    </body>
    </html> 
```

小服务程序

```
package myPack;

import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class RegServlet
 */
public class RegServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public RegServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
        String s1=request.getParameter("username");
        System.out.println(s1);

        String s2=request.getParameter("");//HERE I NEED THE PAssword value if PASS!==PASS2
        System.out.println(s2);

        String c="jdbc:mysql://localhost:3306/test";

        Connection con=null;
        System.out.println("Connection OK");
        try{
        Class.forName("com.mysql.jdbc.Driver").newInstance();
            System.out.println("Done2");

            con = DriverManager.getConnection(c, "root", "MyNewPass");
            System.out.println("Done3");

            PreparedStatement ps=null;
            System.out.println("Done4");

            String qs = "insert into userinfo values(?,?);";
            ps = con.prepareStatement(qs);
            ps.setString(1,s1);
            ps.setString(2,s2);
            System.out.println("Success");
            ps.execute();
            con.close();

        }
        catch (Exception e) {
            System.out.println("Failed: " + e.toString());
        // TODO: handle exception
            System.out.println("Failed");}}

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:36:26.197

在表单中创建一个隐藏字段；然后在您的“onsubmit”事件中将该字段的值设置为 z。

```
 <input type="hidden" name="zValue" id="zValue"> 
```

在`onsubmit`事件中

```
document.getElementById("zValue").value="The value I want to send"; 
```

并在您的 servlet 中检索为任何其他参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:52:54.757

以下是我在 tomcat 中使用的示例。它将获取在 POST 或 GET 请求中发送的所有参数。请注意，这不包括多播请求（文件传输所需的）。
我不知道它是否适合你，因为你没有指定你的 servlet 容器。

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.*;
import java.util.*;

@WebServlet(description = "A simple request test.", urlPatterns = { "/requesttest" })

public class RequestTest extends HttpServlet {

public void doGet(HttpServletRequest request,
                    HttpServletResponse response)
      throws ServletException, IOException {
    response.setContentType("text/html");
    PrintWriter out = response.getWriter();
    String title = "Reading All Request Parameters";
    out.println("<BODY BGCOLOR=\"#FDF5E6\">\n" +
                "<H1 ALIGN=CENTER>" + title + "</H1>\n" +
                "<TABLE BORDER=1 ALIGN=CENTER>\n" +
                "<TR BGCOLOR=\"#FFAD00\">\n" +
                "<TH>Parameter Name<TH>Parameter Value(s)");
    Enumeration<String> paramNames = request.getParameterNames();
    while(paramNames.hasMoreElements()) {
      String paramName = (String)paramNames.nextElement();
      out.println("<TR><TD>" + paramName + "\n<TD>");
      String[] paramValues = request.getParameterValues(paramName);
      if (paramValues.length == 1) {
        String paramValue = paramValues[0];
        if (paramValue.length() == 0)
          out.print("<I>No Value</I>");
        else
          out.print(paramValue);
      } else {
        out.println("<UL>");
        for(int i=0; i<paramValues.length; i++) {
          out.println("<LI>" + paramValues[i]);
        }
        out.println("</UL>");
      }
    }
    out.println("</TABLE>\n</BODY></HTML>");

  }

  public void doPost(HttpServletRequest request,
                     HttpServletResponse response)
      throws ServletException, IOException {
    doGet(request, response);
  }
} 
```

**编辑**
看到您使用 servlet 代码编辑问题时，答案应该非常简单。

```
 String s2=request.getParameter("pass1"); 
```

这应该会为您提供在密码字段中传输的值。这与您获取用户名没有什么不同`String s1=request.getParameter("username");`

# java - Android：Java SimpleDateFormat：为什么二月是三月？

> ID：13623799
> 
> 赞同：0
> 
> 时间：2012-11-29T10:34:57.110
> 
> 标签：java, android, simpledateformat

我无法解决这个问题。

我写了这段代码：

```
public static String getMonthName(int year, int month, int day){
    Locale locale = Locale.getDefault();
    SimpleDateFormat sdf = new SimpleDateFormat("MMMM",locale);
    Date date = new Date();
    date.setDate(day);
    date.setMonth(month);
    date.setYear(year);
    return sdf.format(date);
} 
```

它工作得很好，但是当月份 = 1（即二月）时，月份名称是三月而不是二月！为什么？

这段代码在所有其他日子和几个月里都能很好地工作......

还有另一种获取翻译月份名称的方法吗？

请帮我....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T10:36:25.733

根据您调用函数的方式（例如，使用当前日期作为 2 月 29 日，这在 2013 年不存在），您可以使月份自动递增。

我建议使用这个功能来避免这个问题：

```
public static String getMonthName(int month){
    Locale locale = Locale.getDefault();
    SimpleDateFormat sdf = new SimpleDateFormat("MMMM",locale);
    Date date = new Date();
    date.setDate(1);
    date.setMonth(month);
    date.setYear(2012);
    return sdf.format(date);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:48:31.643

这是因为月份从零索引开始，所以你应该使用这个逻辑

```
if(day >0)
{
day =day -1;
} 
```

# heroku - 使用 pgbackups dump 有选择地恢复到 heroku db

> ID：13623803
> 
> 赞同：1
> 
> 时间：2012-11-29T10:35:10.877
> 
> 标签：heroku, rails-postgresql, pg, heroku-postgres

我有一个从 pgbackups 生成的转储文件，我想使用其中的一些数据来填充 heroku 上的新数据库。这不是简单的恢复。

我想使用`-t`选项 from`pg_restore`并且还想将转储表中的`from`属性映射到新表中的属性。`emails``from_email``emails`

我在 heroku run bash 中没有该`pg_restore`实用程序，但是有没有办法得到它或通过它来做到这一点`psql`？Heroku 的 db 结构似乎在某种程度上被打破了，我不知道如何在`psql`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:38:29.397

我认为您不能像这样重新映射列名。我认为您最好的选择是恢复存在的表，然后更改它以更改列名。如果要添加到现有表，请将其还原到不同的模式，然后`INSERT ... SELECT ...`

如果失败，您可以恢复到新的数据库，重新映射，然后再次转储。

# entity-framework - 当我尝试先在 EF5 代码中对数据库进行逆向工程时出现异常

> ID：13623805
> 
> 赞同：19
> 
> 时间：2012-11-29T10:35:13.097
> 
> 标签：entity-framework

该视频向我展示了如何从现有数据库中使用 Code First。 [http://msdn.microsoft.com/en-us/data/jj572367](http://msdn.microsoft.com/en-us/data/jj572367)

所以我使用nuget安装EF Power Tools并选择我的项目，右键单击并选择；实体框架 -> 逆向工程代码优先。我按照概述选择了数据库，但是当我单击“确定”时出现以下异常；

```
System.Data.ProviderIncompatibleException: The provider did not return a ProviderManifestToken string. ---> System.InvalidOperationException: This operation requires a connection to the 'master' database. Unable to create a connection to the 'master' database because the original database connection has been opened and credentials have been removed from the connection string. Supply an unopened connection. ---> System.Data.SqlClient.SqlException: Login failed for user 'ictdev'.
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, SqlConnection owningObject)
   at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, TimeoutTimer timeout)
   at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, TimeoutTimer timeout, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance)
   at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup)
   at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection)
   at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory)
   at System.Data.SqlClient.SqlConnection.Open()
   at System.Data.SqlClient.SqlProviderServices.UsingConnection(SqlConnection sqlConnection, Action`1 act)
   at System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act)
   --- End of inner exception stack trace ---
   at System.Data.SqlClient.SqlProviderServices.UsingMasterConnection(SqlConnection sqlConnection, Action`1 act)
   at System.Data.SqlClient.SqlProviderServices.GetDbProviderManifestToken(DbConnection connection)
   at System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection)
   --- End of inner exception stack trace ---
   at System.Data.Common.DbProviderServices.GetProviderManifestToken(DbConnection connection)
   at System.Data.Entity.Design.EntityStoreSchemaGenerator.GetProviderSchemaMetadataWorkspace(DbProviderServices providerServices, DbConnection providerConnection)
   at System.Data.Entity.Design.EntityStoreSchemaGenerator.CreateStoreSchemaConnection(String providerInvariantName, String connectionString)
   at System.Data.Entity.Design.EntityStoreSchemaGenerator..ctor(String providerInvariantName, String connectionString, String namespaceName)
   at Microsoft.DbContextPackage.Handlers.ReverseEngineerCodeFirstHandler.ReverseEngineerCodeFirst(Project project) 
```

所以问题是我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-29T14:00:03.847

我在EF电动工具产品网页的评论中找到了解决方案； [http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d](http://visualstudiogallery.msdn.microsoft.com/72a60b14-1581-4b9b-89f2-846072eff19d)

在连接向导中，应单击 Advanced，并且 Persist Security Info 的值应为 True。

如果有人可以回答原始问题并解释您这样做时发生了什么，我可能会为他们打勾！

# android - Android蓝牙ArrayAdapter错误

> ID：13623809
> 
> 赞同：0
> 
> 时间：2012-11-29T10:35:18.617
> 
> 标签：android, bluetooth, android-arrayadapter

我正在尝试在 android 智能手机上创建一个应用程序，以通过蓝牙将数据发送到板上。当我尝试从 ArrayAdapter 调用对象时发生错误。

```
package com.example.btfinddevices;

import android.app.ListActivity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.Toast;

public class BtFind extends ListActivity {

    private static final int REQUEST_ENABLE_BT = 1;
    private ConnectThread mConnectThread;
    private BluetoothDevice mbluetoothdevice;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        final ArrayAdapter<BluetoothDevice> btArrayAdapter 
                = new ArrayAdapter<BluetoothDevice>(getApplicationContext(),
                android.R.layout.simple_list_item_1);

        BluetoothAdapter mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
        if (mBluetoothAdapter == null) {
            // Device does not support Bluetooth
            Toast.makeText(this, "Bluetooth not supported", Toast.LENGTH_SHORT).show();
        }
        else{
            if (!mBluetoothAdapter.isEnabled()) {
                Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
            }

                mBluetoothAdapter.startDiscovery();
                BroadcastReceiver btReceiver = new BroadcastReceiver() {
                public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                // When discovery finds a device
                if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                    // Get the BluetoothDevice object from the Intent
                    BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    // Add the name and address to an array adapter to show in a ListView
                    StringBuilder b = new StringBuilder();
                    b.append(device.getAddress());
                    String s = b.toString();

                    if(s.equals("00:06:66:44:E6:00")){
                        btArrayAdapter.add(device);
                    }

                }
            }
        };
        // Register the BroadcastReceiver
        IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
        registerReceiver(btReceiver, filter); // Don't forget to unregister during onDestroy
        setListAdapter(btArrayAdapter);
        }
    }   

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        //make the connetcion and start an intent
        Log.e("Onitemclick", "1");
        final ArrayAdapter<BluetoothDevice> btArrayAdapter2
        = new ArrayAdapter<BluetoothDevice>(getApplicationContext(),
        android.R.layout.simple_list_item_1);
        Log.e("Onitemclick", "2");
        //mbluetoothdevice= btArrayAdapter2.getItem(position);
        Log.e("Onitemclick", "3");
        mConnectThread=new ConnectThread(btArrayAdapter2.getItem(position));
        Log.e("Onitemclick", "4");
        mConnectThread.run();
        Log.e("Onitemclick", "4");

    }

} 
```

该程序可以毫无问题地创建数组，但是当我在 onListItemClick 函数上调用一个对象时，程序失败了......知道可能是什么吗？谢谢

# javascript - 如何获取当前项目位置的当前图像源并突出显示该项目-caroufredsel

> ID：13623814
> 
> 赞同：15
> 
> 时间：2012-11-29T10:35:33.800
> 
> 标签：javascript, jquery, caroufredsel

我想突出显示当前项目，如何获取图像源和当前缩略图？ [http://jsfiddle.net/RL8MV/2/](http://jsfiddle.net/RL8MV/2/)

```
$('#carousel span').append('<img src="http://coolcarousels.frebsite.nl/c/28/img/gui/carousel_glare.png" class="glare" />');
                $('#thumbs a').append('<img src="http://coolcarousels.frebsite.nl/c/28/img/gui/carousel_glare_small.png" class="glare" />');

                $('#carousel').carouFredSel({
                    responsive: true,
                    circular: false,
                    auto: true,
                    items: {
                        visible: 1,
                        width: 200,
                        height: '56%'
                    },
                    scroll: {
                        fx: 'directscroll'
                    }
                });

                $('#thumbs').carouFredSel({
                    responsive: true,
                    circular: true,
                    infinite: true,
                    auto: {
                        play:true
                    },
                    scroll:
                    {
                        items: 1,
                        onBefore: function() {

                            var pos = $("#thumbs").triggerHandler("currentPosition");
                           // alert( "The carousel is at item number " + pos );

                        }

                    },
                    prev: '#prev',
                    next: '#next',
                    items: {
                        visible: {
                            min: 2,
                            max: 6
                        },
                        width: 150,
                        height: '66%'
                    }
                });

                $('#thumbs a').click(function() {
                    $('#carousel').trigger('slideTo', '#' + this.href.split('#').pop() );
                    $('#thumbs a').removeClass('selected');
                    $(this).addClass('selected');
                    return false;
                });​ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T10:28:12.157

终于解决了：）

[http://jsfiddle.net/RL8MV/5/](http://jsfiddle.net/RL8MV/5/)

```
function highlight( items ) {
                items.filter(":eq(0)").css({
                    backgroundColor: "#ff9",
                    width    : 140,
                    height    : 100,
                    margin    : 7
                });
                return items;
            }
            function unhighlight( items ) {
                items.css({
                    backgroundColor: "#fff",

                    margin    : 27
                });
                return items;
            }

$('#carousel span').append('<img src="http://coolcarousels.frebsite.nl/c/28/img/gui/carousel_glare.png" class="glare" />');
                $('#thumbs a').append('<img src="http://coolcarousels.frebsite.nl/c/28/img/gui/carousel_glare_small.png" class="glare" />');

                $('#carousel').carouFredSel({
                    responsive: false,
                    circular: false,
                    auto: false,
                    items: {
                        visible: 1,
                        width: 540,
                        height: '56%'
                    },
                    scroll: {
                        fx: 'directscroll'
                    }
                });

                $('#thumbs').carouFredSel({
                    responsive: true,
                    circular: true,
                    infinite: true,

                    auto: {
                                play:true,
                                onBefore: function( data ) {
                                    unhighlight( data.items.old );
                                },
                                onBefore    : function( data ) {
                                    highlight( data.items.visible );

                                    $('#carousel').trigger('slideTo', '#' + data.items.visible.eq(0).attr("id").split('_').pop() );
                                    $('#thumbs img').removeClass('selected');
                                    $("#curimg").html(data.items.visible.eq(0).attr("id").split('_').pop());
                                    //$(this).addClass('selected');
                                }
                    },

                    scroll:
                    {
                        items: 1,

                    },
                    prev: 
                    {
                        button:'#prev',
                        onAfter: function( data ) {
                                    unhighlight( data.items.old );
                                },
                                onBefore    : function( data ) {
                                    highlight( data.items.visible );

                                    $("#curimg").html(data.items.visible.eq(0).attr("id").split('_').pop());
                                    $('#carousel').trigger('slideTo', '#' + data.items.visible.eq(0).attr("id").split('_').pop() );
                                    $('#thumbs img').removeClass('selected');
                                    $("#curimg").html(data.items.visible.eq(0).attr("id").split('_').pop());
                                    //$(this).addClass('selected');
                                }
                    },
                    next:
                    {
                        button:'#next',
                        onAfter: function( data ) {
                                    unhighlight( data.items.old );
                                },
                                onBefore    : function( data ) {
                                    highlight( data.items.visible );

                                    $("#curimg").html(data.items.visible.eq(0).attr("id").split('_').pop());
                                    $('#carousel').trigger('slideTo', '#' + data.items.visible.eq(0).attr("id").split('_').pop() );
                                    $('#thumbs img').removeClass('selected');
                                    $("#curimg").html(data.items.visible.eq(0).attr("id").split('_').pop());
                                    //$(this).addClass('selected');
                                }
                    },
                    items: {
                        visible: {
                            min: 2,
                            max: 6
                        },
                        width: 150,
                        height: '66%'
                    }
                });

                $('#thumbs img').click(function() {
                    $('#carousel').trigger('slideTo', '#' + this.id.split('_').pop() );    
                    $("#curimg").html( this.id.split('_').pop());
                    $('#thumbs').trigger('slideTo', '#' + this.id);
                    $('#thumbs img').removeClass('selected');
                    $(this).addClass('selected');

                    return false;
                });​ 
```

[此处更新链接](http://jsfiddle.net/RL8MV/10/)

[更新了奇数可见项目的链接以突出显示中间项目](http://jsfiddle.net/RL8MV/12/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T08:06:13.757

您可以通过添加以下内容来获取图像的来源：

`var src = $(this).children('img').attr('src');`

```
$('#thumbs a').click(function() {
  var src = $(this).children('img').attr('src'); 

  $('#carousel').trigger('slideTo', '#' + this.href.split('#').pop() );
  $('#thumbs a').removeClass('selected');
  $(this).addClass('selected');
  return false;
});​ 
```

您将对当前缩略图执行相同的操作，只需调用缩略图支架上的“src”属性

# javascript - 定位父窗口

> ID：13623817
> 
> 赞同：2
> 
> 时间：2012-11-29T10:35:49.533
> 
> 标签：javascript, html

如果您打开一个新窗口，或者在较新的浏览器的情况下打开一个新选项卡，使用 _blank 的目标属性，是否可以在新窗口中定位链接以在原始“父”窗口中打开？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:39:01.530

另一种方法是使用弹出窗口，它可以使用`window.opener`. 我不完全确定，但这也可能适用于使用`_blank`目标打开的窗口。

事实证明这是可能的。这是一个演示：http: [//jsfiddle.net/CftQr/show/](http://jsfiddle.net/CftQr/show/)

按照链接在新选项卡中打开子窗口，然后使用子页面上的链接将父级重定向到[google.com](http://google.com)。

# java - 打印空 Excel 单元格

> ID：13623819
> 
> 赞同：0
> 
> 时间：2012-11-29T10:35:49.800
> 
> 标签：java, excel, apache-poi, loops, xls

这是我的代码

```
import java.io.FileInputStream;
import java.util.Iterator;
import java.util.Vector;

import org.apache.poi.hssf.usermodel.HSSFCell;
import org.apache.poi.hssf.usermodel.HSSFRow;
import org.apache.poi.hssf.usermodel.HSSFSheet;
import org.apache.poi.hssf.usermodel.HSSFWorkbook;
import org.apache.poi.poifs.filesystem.POIFSFileSystem;
import org.apache.poi.ss.usermodel.Cell;
import org.apache.poi.ss.usermodel.Row;

public class ReadExcelFile {

    public static void main(final String[] args) {

        final String fileName = "C:\\temp\\carreras.xls";
        final Vector<Vector<Cell>> dataHolder = ReadCSV(fileName);
        printCellDataToConsole(dataHolder);
    }

    public static Vector<Vector<Cell>> ReadCSV(final String fileName) {
        final Vector<Vector<Cell>> cellVectorHolder = new Vector<Vector<Cell>>();

        try {
            final FileInputStream myInput = new FileInputStream(fileName);
            final POIFSFileSystem myFileSystem = new POIFSFileSystem(myInput);
            final HSSFWorkbook myWorkBook = new HSSFWorkbook(myFileSystem);
            final HSSFSheet mySheet = myWorkBook.getSheetAt(0);
            final Iterator<Row> rowIter = mySheet.rowIterator();
            while (rowIter.hasNext()) {
                final HSSFRow myRow = (HSSFRow) rowIter.next();
                final Iterator<Cell> cellIter = myRow.cellIterator();
                final Vector<Cell> cellStoreVector = new Vector<Cell>();
                while (cellIter.hasNext()) {
                    final HSSFCell myCell = (HSSFCell) cellIter.next();
                    cellStoreVector.addElement(myCell);
                }
                cellVectorHolder.addElement(cellStoreVector);
            }
        } catch (final Exception e) {
            e.printStackTrace();
        }
        return cellVectorHolder;
    }

    private static void printCellDataToConsole(
            final Vector<Vector<Cell>> dataHolder) {
        for (int i = 0; i < dataHolder.size(); i++) {
            final Vector<Cell> cellStoreVector = dataHolder.elementAt(i);
            for (int j = 0; j < cellStoreVector.size(); j++) {
                final HSSFCell myCell = (HSSFCell) cellStoreVector.elementAt(j);
                final String stringCellValue = myCell.toString();
                System.out.print(stringCellValue + "|");
            }
            System.out.println();
        }
    }
} 
```

它按预期工作，除了一个小细节：如果它找到一个空单元格，它将被跳过。预期的输出是：

```
1|2||4
3||7|2 
```

但是输出是

```
1|2|4
3|7|2 
```

如何遍历整个 Excel 文件并获得预期的行为？更正 xls 文件不是一种选择，因为我们需要解析大约 400 个 excel 文件。

# .net - 如何使用 WCF 和 WSE 安全性使用 SOAP 1.1 Web 服务？

> ID：13623821
> 
> 赞同：2
> 
> 时间：2012-11-29T10:36:01.313
> 
> 标签：.net, wcf, soap, wsdl, wse

我们当前正在开发的应用程序要求我们使用过时的 Web 服务。我们无权访问服务器端代码，因此我们必须探查服务以发现其配置。

但是，我们确实可以访问他们的“网络客户端工具”，它允许我们查询服务——我们可以让它以这种方式工作的唯一方法是勾选他们名为“WSE 安全”的框......这似乎非常.Net 不再支持旧且（我认为）？

从我们可以收集到的信息来看，Web 服务似乎需要一个明文格式的用户令牌（使用 WSDL、Fiddler、Soap UI 和 Firebug 的组合）——虽然不是 100% 确定！

有人对我们如何在现代应用程序中使用此服务有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:34:53.890

有一些方法可以配置 WCF 与较旧的（通常是 ASMX，但也有一些 java 服务）Web 服务进行通信，这些 Web 服务使用 WSE 来保证安全性，但它肯定非常晦涩，而且文档很少存在。Rick Stahl[最近发表了一篇关于使用 WSE 的 Web 服务的类似情况的博客。](http://www.west-wind.com/weblog/posts/2012/Nov/24/WCF-WSSecurity-and-WSE-Nonce-Authentication)尽管该帖子可能并不直接适用于您的情况，但您可能会从他为旧版 WSE 服务制作兼容的肥皂消息所采取的步骤中获得一些好处。

# iphone - 可以拒绝使用带有 Mach-O 对象的自定义框架的 iPhone 应用程序吗？

> ID：13623825
> 
> 赞同：0
> 
> 时间：2012-11-29T10:36:24.110
> 
> 标签：iphone, objective-c, app-store

我通过参考以下指南制作了一个自定义框架。

[http://db-in.com/blog/2011/05/creating-universal-framework-to-iphone-ios/](http://db-in.com/blog/2011/05/creating-universal-framework-to-iphone-ios/)

我发现输出库文件不是 ar 库而是 Mach-O 对象。

```
(for architecture armv7):   Mach-O object arm
(for architecture cputype (12) cpusubtype (11)):    Mach-O object arm
(for architecture i386):    Mach-O object i386 
```

幸运的是，这个框架绝对被合并到使用它的最终产品中。但是，我不确定它能否通过苹果的考试。

通过App Store注册考试是否正确？

**更新：最后，我通过引用该站点**[http://code.google.com/p/ios-static-framework/](http://code.google.com/p/ios-static-framework/)
找到了制作 ar 库的方法。但是，我不想使用那个静态框架。因为我想隐藏我在框架中使用的几个符号以避免符号重复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:06:27.727

只要它是原生的和客观的-c，你就不应该有任何问题。虽然我确实找到了这个：

[http://blog.cascadesoft.net/2010/09/10/new-app-store-rules-and-the-objective-c-versus-3rd-party-framework-question-for-iphone-apps/](http://blog.cascadesoft.net/2010/09/10/new-app-store-rules-and-the-objective-c-versus-3rd-party-framework-question-for-iphone-apps/)

# java - 速度模板字符集

> ID：13623828
> 
> 赞同：0
> 
> 时间：2012-11-29T10:36:26.587
> 
> 标签：java, html, character, velocity

我是使用速度模板的新手，在我创建的一些模板中，大多数模板都可以正常工作，但如果我向模板添加不同的字符，它有时会不起作用。

你怎么知道速度模板允许哪些字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:57:13.347

由于您并没有真正提供太多细节，因此盲目地帮助有点困难，但是我自己也穿着同一条裤子，我`0xFF`的感觉是您的默认编码与模板的编码不同时遇到了麻烦。

您应该尽可能*明确地*指定编码，在这种情况下是可能的。使用`encoding`模板时使用参数来使用类中的函数提供所需的编码`org.apache.velocity.app.Velocity`：

```
public static Template getTemplate(String name, String encoding);
public static boolean mergeTemplate( String templateName, String encoding, Context context, Writer writer ); 
```

而不是省略`encoding`参数的函数：

推荐阅读：

*   [国际化的速度模板编码](http://velocity.apache.org/engine/devel/developer-guide.html#Template_Encoding_for_Internationalization)

# linux - sort -u 和 uniq -u 的意外差异

> ID：13623836
> 
> 赞同：0
> 
> 时间：2012-11-29T10:36:45.630
> 
> 标签：linux, sorting, uniq

案例：列出目录中所有唯一的文件名。

```
$ ls 
a.h  a.i  b.h  b.i  c.h  d.i 
```

所以`c`和`d`在这种情况下是独一无二的。对于固定宽度，我们可以这样做：

```
$ ls | uniq -w1 -u
c.h
d.i 
```

`uniq`虽然文件名不是固定宽度并且只能跳过字段*（即从左到右而不是从右到左忽略字段），*但不是很有帮助。

 *```
ls | sort -u -t. -k1,1
a.h
b.h
c.h
d.i 
```

我认为`sort -u`相当于`uniq -u` *（[ref](https://stackoverflow.com/questions/3382936/sort-uniq-in-linux-shell)）*并且`sort`能够排序和给定字段，我希望输出是`c.h`， `d.i`但事实并非如此。

有什么想法吗？

*注意：我不需要帮助来解决问题，例如一种解决方案是将数据反转两次：*

```
$ ls | rev | uniq -u -s1 | rev
c.h
d.i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:53:14.207

`sort -u`相当于`sort | uniq`，即没有`uniq`给定的标志。*

# c# - 如何在 ASP.net C# 中检测图像中的多个人脸？

> ID：13623839
> 
> 赞同：-1
> 
> 时间：2012-11-29T10:36:50.533
> 
> 标签：c#, asp.net, face-detection

我正在做一个项目，我需要在 asp.net 中检查图像是单面还是多面

请任何人建议我怎么做..？或任何算法建议我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:41:11.013

[OpenCV](http://opencv.org/)具有[检测人脸](http://opencv.willowgarage.com/wiki/FaceDetection)的 API和[一些](https://stackoverflow.com/questions/85569/net-dotnet-wrappers-for-opencv).NET 包装器。

# ocean - 删除已实现的裁剪立方体问题

> ID：13623845
> 
> 赞同：4
> 
> 时间：2012-11-29T10:37:03.187
> 
> 标签：ocean

我有一个执行以下操作的代码：给一个输入地震立方体，创建它的一半大小的裁剪版本，然后实现这个裁剪的立方体。

该插件似乎工作正常。但是，如果我尝试使用 Petrel 删除已实现的多维数据集（右键单击已实现的多维数据集并选择“删除...”），多维数据集仍保留在 Petrel 输入树中。

我什至可以打开它的设置对话框，但我无法在任何窗口中显示它，也无法访问它的上下文菜单。除此之外，它下面的任何 Inline、Xline 或 Timeslice 的值都会更改为似乎是坐标值。

这是一个错误还是我做错了什么？

这是我的代码（立方体是输入地震立方体）：

```
 Index3 start = new Index3(0, 0, 0);
        Index3 end = new Index3(cube.NumSamplesIJK / 2);

        SeismicCube croppedCube;
        using (var t = DataManager.NewTransaction())
        {
            t.Lock(cube);
            VolumeCroppingInfo croppingInfo = new VolumeCroppingInfo(start, end, new Index2(0, 0));
            croppedCube = SeismicSystem.SeismicCroppingService.CreateVirtualCroppedVolume(
                cube, croppingInfo);
            t.Commit();
        }

        var realizeWorkstep =
            PetrelSystem.WorkflowEditor.RegisteredWorksteps.Processes.GetGeophysicsGroup().RealizeSeismic;
        RealizeSeismicArguments realizeArgPack =
            (RealizeSeismicArguments)realizeWorkstep.CreateArgumentPackage(DataManager.DataSourceManager);

        realizeArgPack.RealizationQuality = RealizationBitNumber.Bit32;
        realizeArgPack.Seismic = croppedCube;
        realizeArgPack.UseExactSourceValue = true;

       realizeWorkstep.InvokeSimple(realizeArgPack); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:44:57.157

如果您保存项目，然后在 Petrel 中执行删除，则裁剪后的已实现立方体将被删除。在保存项目之前，它不会被删除。我通过使用您的代码创建插件来复制您记录的行为。

我不确定这是否是一个错误，但怀疑它可能是一个功能。当然，您的代码不是问题。

也许更精通 Petrel 的人会评论 Petrel 在这里使用的逻辑。

# jquery - 使用 JQuery 将 PHP 脚本添加到选项标签

> ID：13623849
> 
> 赞同：0
> 
> 时间：2012-11-29T10:37:08.500
> 
> 标签：jquery, html, html-select

我有一个很长的选择标签，其中有很多选项，我需要向它们添加 PHP 脚本。我正在尝试制作一个 JQuery 脚本来帮助我为所有选项标签执行此操作，但不知道如何操作。我需要 jQuery 来改变它：

```
<option value="a">A</option>
<option value="b">B</option>
....
<option value="z">Z</option> 
```

到：

```
<option value="a" <?= isset($array["a"]) ? "selected" : "" ?>>A</option>
<option value="b" <?= isset($array["b"]) ? "selected" : "" ?>>B</option>
....
<option value="z" <?= isset($array["z"]) ? "selected" : "" ?>>Z</option> 
```

我怎样才能在不付出太多努力的情况下实现这一目标？（该列表实际上长约 200 项）

我能够遍历列表，但我似乎无法添加属性或其他任何东西。

```
$(document).ready(function() {
    $("#select option").each(function()
    {
        var attr = " <?=  isset($array['."+$(this).attr("value")+"']) ? 'selected' : '' ?>";
        ///how to add this to the tag??
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:50:31.953

使用 jQuery 进行更改不会神奇地执行 PHP 标记中的内容。你必须处理这个逻辑服务器端。

我建议编写一个 PHP 脚本，对相关文件进行重复更改`.php`。要么，要么使用支持正则表达式的编辑器为您完成。

例如，在 Notepad++ 中，您可以（正则表达式）替换所有出现的：

```
(<option value=")([^"]+)(">.+?</option>) 
```

和：

```
\1\2<?= isset($array["\2"]) ? "selected" : "" ?>\3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:49:46.207

尽管您应该分离关注点并且不应该将 PHP 与 js 混为一谈，但请保持简短：

```
$('#select').val('<?php echo $valueYouNeed; ?>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T11:09:03.203

因为您只想生成一个 php 文件，所以我建议您在 ide/editor 中使用字符串/正则表达式替换

从

```
<option value="a">A</option> 
```

到

```
<option value="a" <?= isset($array["a"]) ? "selected" : "" ?>>A</option> 
```

在 vim 中（但其他编辑器也应该支持这一点）你可以这样做

```
:%s/value=\(".*"\)/value=\1 <?= isset($array[\1]) ? "selected" : "" ?>/g 
```

您搜索的部分在哪里

```
value=\(".*"\) 
```

这是你更换的部分

```
value=\1 <?= isset($array[\1]) ? "selected" : "" ?> 
```

使用

```
\([someregex]\) 
```

您可以“存储”一些变量，并使用 \1 您可以在替换部分 1 中输出它

# android - Android需要将数据从intent保存到文件

> ID：13623851
> 
> 赞同：0
> 
> 时间：2012-11-29T10:37:12.563
> 
> 标签：android, android-intent

我正在编写一个小应用程序，它应该接受来自任何其他应用程序的内容，然后将其保存到文件中并将其通过 FTP 传输到服务器。

我已经做了所有事情，但我无法让这部分工作：

```
 OutputStream f1 = new FileOutputStream("file2.txt");
    f1.write(intent.getExtras().get("data"));
    f1.flush();
    f1.close(); 
```

意图是我从发送操作中得到的，可以是任何东西。

我收到一个编译错误，其中 f1.write 与 get 结果不兼容。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:08:31.290

你在那里做的是

```
OutputStream f1 = new FileOutputStream("file2.txt");
Object data = intent.getExtras().get("data")
f1.write(data); 
```

那是行不通的，因为`OutputStream`只知道如何写入`byte`和`byte[]`数据。

你可以做的事情：

*   通过 放置数据`putByteArray(String key, byte[] value)`并通过 检索数据`getByteArray (String key)`。该数据可以写入文件。仅当数据很小时，此选项才是一个好主意。通过 an 传输大文件`Intent`不起作用。
*   使用`ContentProvider`/`ContentResolver`并使用[`openInputStream(Uri uri)`](http://developer.android.com/reference/android/content/ContentResolver.html#openInputStream%28android.net.Uri%29)您`Uri`放入`Intent`. 那`Uri`应该在`intent.getData()`.
*   将源文件的路径放入Intent中，然后打开文件

您从其他应用程序获得的大多数数据应该`Uri`已经存在。所以使用

```
Uri data = intent.getData();
InputStream in = getContentResolver.getInputStream(data);
OutputStream out = new FileOutputStream(new File(Environment.getExternalStorageDirectoy(), "file2.txt"));
// copy in to out 
```

可能是最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:10:18.203

请使用以下代码将数据保存在文件中，它将解决您的问题。

```
// For Create Files into Internal Memory of Application
public void mCreateAndSaveFile() {
    try {
        FileWriter file = new FileWriter("filename.txt");
        file.write(intent.getExtras().get("data"));
        file.flush();
        file.close();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T10:56:38.230

试试这个

```
try {
            OutputStreamWriter out = new OutputStreamWriter(openFileOutput(
                    "filename", 0));
            out.write("create text file"); //intent.getExtras().get("data")
            out.close();
            Toast.makeText(this, "The contents are saved in the file.",
                    Toast.LENGTH_LONG).show();
        } catch (Throwable t) {
            Toast.makeText(this, "Exception: " + t.toString(),
                    Toast.LENGTH_LONG).show();
        } 
```

这是[示例](http://buildmobile.com/store-user-data-using-simple-text-files-and-apis-in-android/)

# c# - 以编程方式将系统时间设置为 .NET 中的正确服务器时间？

> ID：13623853
> 
> 赞同：3
> 
> 时间：2012-11-29T10:37:15.433
> 
> 标签：c#, .net, unit-testing, datetime, testing

是否可以在 .NET 中将系统时间设置为正确的服务器时间？我有一个弄乱系统时间的测试用例，我想在测试用例的拆解中恢复它。是否可以以编程方式恢复正确的时间（例如从服务器）？

注意：单元测试和验收测试都需要这个。注入假时间不适用于后者。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:43:28.517

这是设置时间（一旦你知道了）：

[以编程方式更改系统日期](https://stackoverflow.com/questions/650849/change-system-date-programatically)

如果您的意思是从有效来源获取时间，那么本讨论中的答案可能会对您有所帮助： [How to Query an NTP Server using C#?](https://stackoverflow.com/questions/1193955/how-to-query-an-ntp-server-using-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-12T14:16:10.737

```
 void setDate(string dateInYourSystemFormat)
    {
        var proc = new System.Diagnostics.ProcessStartInfo();
        proc.UseShellExecute = true;
        proc.WorkingDirectory = @"C:\Windows\System32";
        proc.CreateNoWindow = true;
        proc.FileName = @"C:\Windows\System32\cmd.exe";
        proc.Verb = "runas";
        proc.Arguments = "/C date " + dateInYourSystemFormat;
        try
        {
            System.Diagnostics.Process.Start(proc);
        }
        catch
        {
            MessageBox.Show("Error to change time of your system");
            Application.ExitThread();
        }
    }
void setTime(string timeInYourSystemFormat)
    {
        var proc = new System.Diagnostics.ProcessStartInfo();
        proc.UseShellExecute = true;
        proc.WorkingDirectory = @"C:\Windows\System32";
        proc.CreateNoWindow = true;
        proc.FileName = @"C:\Windows\System32\cmd.exe";
        proc.Verb = "runas";
        proc.Arguments = "/C time " + timeInYourSystemFormat;
        try
        {
            System.Diagnostics.Process.Start(proc);
        }
        catch
        {
            MessageBox.Show("Error to change time of your system");
            Application.ExitThread();
        }
    } 
```

# iphone - 在 iOS 应用程序上对数据库或服务使用单元测试或集成测试

> ID：13623854
> 
> 赞同：1
> 
> 时间：2012-11-29T10:37:16.440
> 
> 标签：iphone, ios, unit-testing, testing

据我所知，单元测试不与数据库对话，不通过网络通信，也不接触文件系统。但问题是：我想为从本地数据库获取数据或从服务获取数据的类编写测试用例，我应该如何为这些类编写测试？我知道我可以使用 mock 对象来模拟从本地数据库或服务获取的数据，但是对于许多大型数据库，如果我们使用 mock 对象，我们会损失很多生成 mock 的成本。所以我的问题是：测试模型以从本地数据库或服务访问和检索数据的最佳方法是什么？使用 mock 进行单元测试或使用真实数据进行集成测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T14:24:17.887

我会去测试集成测试的实时/真实数据！我现在一直在做同样的事情。我有三种独立的测试方法来测试我的整个系统并获得超过 90% 的覆盖率。

> 1.  使用测试存根进行单元测试
> 2.  实时数据的集成测试。
> 3.  [使用KIF](https://github.com/square/KIF)的 UI 自动化

所有这些都将被集成到[Jenkins](http://jenkins-ci.org/)持续集成服务器中

# javascript - tinymce 自动调整大小插件在退格 html img 内容上无法正常工作

> ID：13623856
> 
> 赞同：0
> 
> 时间：2012-11-29T10:37:18.507
> 
> 标签：javascript, tinymce, autoresize

我使用启用了自动调整大小插件的 tinymce 编辑器。它可以正常处理文本，但是当我通过 execCommand 插入 html 内容时，例如

```
 <div>
     <img src="/path/to/image  width="200px" height="160px"/>
 </div> 
```

然后我通过退格键将其删除，tinymce 从 iframe 中正确删除了 html 节点，但 autoresize 插件不会调整大小以缩小 iframe 高度，因为它没有图像的 html 内容。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:42:41.550

看看[这里](https://stackoverflow.com/questions/9588025/change-tinymce-editors-height-dynamically)。我的答案有一个调整tinymce的iframe高度的功能。

# e-commerce - 如何在产品详细信息页面以外的前端显示自定义选项？

> ID：13623857
> 
> 赞同：0
> 
> 时间：2012-11-29T10:37:20.623
> 
> 标签：e-commerce, magento-1.7

我正在开发 magento 1.7 版本。我在管理员的产品中添加了一些自定义选项。现在它们显示在产品详细信息页面上。但我只想显示在另一个页面上。我的意思是当我单击该按钮时，我在产品详细信息页面上有一个按钮，这些自定义选项应该会显示出来，并且在填写该表单后，它应该被重定向到添加到购物车页面。我正在使用如下代码：-

```
$product_id = $_REQUEST['id1'];
$product = Mage::getModel("catalog/product")->load($product_id);
$attVal = $product->getOptions();
foreach($attVal as $optionKey => $optionVal) {
$optStr .= "<select style='display:block; clear:both;' name='options[".$optionVal->getId()."]'>";
foreach($optionVal->getValues() as $valuesKey => $valuesVal) {
$optStr .= "<option value='".$valuesVal->getId()."'>".$valuesVal->getTitle()."</option>";
}
$optStr .= "</select>";
}
echo($optStr ); 
```

我正在使用模块创建器创建`index.phtml`的.in 中执行此过程。`app\design\frontend\base\default\template\form`我得到了价值。`$product_id`但是当我这样做`print_r($attVal)`时，它只显示`array()`在前端。

# asp.net-mvc - DotNetOpenAuth - 客户端标识符和授权

> ID：13623865
> 
> 赞同：0
> 
> 时间：2012-11-29T10:37:44.043
> 
> 标签：asp.net-mvc, oauth, dotnetopenauth

我有一个我遇到问题的 DNOA 实现。我看到的示例中的代码是错误的，无法正常工作，我无法弄清楚如何让它正常工作。

[我在这里](https://groups.google.com/forum/?fromgroups=#!topic/dotnetopenid/juMUa0WH96w)的 DNOA 小组上问了一个类似的问题，但我想知道这是否实际上是一个与 OAuth 相关的更大问题。安德鲁断言这应该可行，但我看到很多人问同样的问题，但没有真正的解决方案。

使用 ExchangeUserCredentialForToken 时，DNOA 将用户名密码凭据发送到授权服务器。在幕后，它使用了一个 NetworkCredential 类，该类似乎擦除了 client_id 和 client_secret 属性（这些显然被移到了基本身份验证 HTTP 标头中，然后又被 HttpWebRequest 擦除。

在 DNOA 示例中，我看到代码检查系统中是否为用户和该客户端保存了有效的授权。

如果没有客户端标识符，就不可能检查有效授权，因为我们无法检查请求的范围是否在用户可能授权或未授权客户端访问的范围内。

我只能假设要么我的理解不正确，要么我看到的样本不正确，要么 DNOA 有问题。

我尝试使用以下方法手动反序列化 access_token：

```
var token = accessTokenAnalyser.DeserializeAccessToken(new Dummy(), authHeader.Replace("Bearer ", "")); 
```

但是，访问令牌中的 clientidentifier 也是 null。

从阅读 DNOA 组上的线程来看，客户端标识符似乎也应该在 CreateAccessToken 方法中可用，但它永远不会 - 它始终为空。

示例中的另一个场景显示授权服务器自动在 TryAuthorizeResourceOwnerCredentialGrant 中添加授权，但这也是不可能的，因为 clientidentifier 始终为空。

任何人都可以就我对使用客户端标识符的假设或将客户端标识符获取到授权服务器的请求中的解决方案提出建议。

此外，如果在此授权过程中我们无法知道客户，我们也无法强制执行任何客户范围检查。

有谁知道如何让 NetworkCredential 类在请求中传递 client_id 而不会使其为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:55:15.910

使用`PostParameterApplicator`DotNetOpenAuth 附带的也应该可以解决这个问题。

默认值在 DotNetOpenAuth 4.1.5 中`NetworkCredentialApplicator` [已修复（截至 2012 年 12 月 2 日尚未发布）](https://github.com/DotNetOpenAuth/DotNetOpenAuth/issues/204)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T17:29:17.670

我通过创建自己的 ClientCredentialApplicator 实现然后在构建客户端时使用它来解决这个问题。

这个类很简单：

```
public class ClientIdentifierApplicator : DotNetOpenAuth.OAuth2.ClientCredentialApplicator
{
    public string ApiKey { get; set; }
    public string ApiSecret { get; set; }

    public ClientIdentifierApplicator(string apiKey, string apiSecret)
    {
        ApiKey = apiKey;
        ApiSecret = ApiSecret;
    }

    public override void ApplyClientCredential(string clientIdentifier, System.Net.HttpWebRequest request)
    {
        base.ApplyClientCredential(clientIdentifier, request);
        request.Credentials = new NetworkCredential(ApiKey, ApiSecret);
    }
} 
```

一旦你有了这个类，你可以像这样构造它：

```
 var clientCred = new ClientIdentifierApplicator(ApiKey, ApiSecret); 
```

然后在实例化您的客户端 WebServerClient 或 UserAgentClient 时，您可以将其作为构造函数参数提供：

```
 var OAuthWebServerClient = new WebServerClient(AuthServerDescription, ApiKey, clientCred); 
```

我尝试使用内部 NetworkCredentialApplicator，但无法按预期工作。

# dns - 设置 Google Apps DNS 以在 cPanel 主机上为网站提供服务

> ID：13623866
> 
> 赞同：0
> 
> 时间：2012-11-29T10:37:44.417
> 
> 标签：dns, google-apps, google-account

我有一个客户，他拥有 Google Apps 帐户并从 Google Apps 中管理他们的 DNS。他们的注册商是 eNom。

他们从我那里委托了一个网站，但由于 Google 协作平台不是真正的网络主机，我们将通过他们在我的 VPS 上使用 HostGator 订阅的 cPanel 帐户来提供该网站。

我遇到了 DNS 设置问题，需要帮助。

他们的 eNom Domain Settings Host 记录如下：

```
Host Name      Address Record      Type
@              216.239.32.21       A
@              216.239.34.21       A
@              216.239.36.21       A
@              216.239.36.21       A
calendar       ghs.google.com.     CNAME
docs           ghs.google.com.     CNAME
mail           ghs.google.com.     CNAME
polaris        ghs.google.com.     CNAME
sites          ghs.google.com.     CNAME
start          ghs.google.com.     CNAME
www            ghs.google.com.     CNAME 
```

我尝试通过进行以下更改来修改记录以将 A 记录添加到 cPanel IP，然后将裸域的 CNAME 和 www 添加到 cPanel：

```
Host Name      Address Record      Type
polarisrm.com  96.125.170.9        A        // Added A record
@              216.239.32.21       A
@              216.239.34.21       A
@              216.239.36.21       A
@              216.239.36.21       A
calendar       ghs.google.com.     CNAME
docs           ghs.google.com.     CNAME
mail           ghs.google.com.     CNAME
polaris        ghs.google.com.     CNAME
sites          ghs.google.com.     CNAME
start          ghs.google.com.     CNAME
www            polarisrm.com.      CNAME    // Updated the www CNAME record 
```

但是，进行这些更改破坏了 DNS。尝试访问该网站时，结果是“主机名不存在”。ping *polarisrm.com*返回的 IP 为 216.239.36.21，这是第一条 @A 记录。因此，我将所做的更改重置为原始设置。

如何正确配置 DNS，以便在 www.polarisrm.com 和 polarisrm.com http 协议指向 cPanel 时，其他 Google 服务（邮件、文档、日历等）都不会中断？

HostGator 无法为我提供解决方案，我现在陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:58:33.377

切勿为根域或任何同时具有 MX 记录的域名创建 CNAME 记录，因为它会覆盖 MX 记录和 CNAME 记录下方的任何子记录。

有关使用 eNom 进行裸域名重定向的说明，请访问： [https ://sites.google.com/site/gsunhelp/step-by-step-guides/cnamealiasmappinghowdoesitallwork/mapping-site-custom-domain/cnames-and-naked -域](https://sites.google.com/site/gsunhelp/step-by-step-guides/cnamealiasmappinghowdoesitallwork/mapping-site-custom-domain/cnames-and-naked-domains)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T01:24:10.603

CNAME 记录不需要使用 Google Apps 重定向裸域。我建议删除 A 记录并使用您的 Hostgator cpanel IP 作为地址记录，您的单个 A 记录（裸域）和 www CNAME 记录（而不是 polarism.com）

```
 Host Name      Address Record      Type
    @              96.125.170.9        A        // single A record

    calendar       ghs.google.com.     CNAME
    docs           ghs.google.com.     CNAME
    mail           ghs.google.com.     CNAME
    polaris        ghs.google.com.     CNAME
    sites          ghs.google.com.     CNAME
    start          ghs.google.com.     CNAME
    www            96.125.170.9        CNAME    // Use IP for the www CNAME record 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-27T19:17:12.483

我遇到了类似的问题并遇到了这篇文章，但我发现 eNom 不允许您为 CNAME 记录输入 IP 地址（至少在 2016 年的这些日子里不会）。

相反，以下工作：

```
Host Name      Address Record      Type
@              96.125.170.9        A
calendar       ghs.google.com.     CNAME
docs           ghs.google.com.     CNAME
mail           ghs.google.com.     CNAME
polaris        ghs.google.com.     CNAME
sites          ghs.google.com.     CNAME
start          ghs.google.com.     CNAME
www            @                   CNAME    //CNAME for web host 
```

Google Apps 和网站现在可以正常运行。

# javascript - 在 javascript 中构建唯一值的嵌套数组的改进方法

> ID：13623869
> 
> 赞同：1
> 
> 时间：2012-11-29T10:37:54.090
> 
> 标签：javascript, jquery, arrays, nested

**设置：**

我有一个嵌套的 html 表结构，它显示分层数据，并且用户可以隐藏或显示各个行。每行都有一个 dom id，它由级别号加上该级别上记录类型的主键组成。我必须两者都有，因为每个级别都来自不同的数据库表，所以单独的主键在 dom 中不是唯一的。

```
example: id="level-1-row-216" 
```

我将可见元素的级别和行存储在 cookie 中，以便在页面重新加载时可以自动显示用户打开的相同行。我不存储 dom id 的完整映射，因为我担心它会变得过于冗长，并且我希望将我的 cookie 保持在 4Kb 以下。

所以我将 dom id 转换为像这样的紧凑 json 对象，每个级别都有一个属性，每个级别下都有一个唯一的主键数组：

```
{
    1:[231,432,7656],
    2:[234,121],
    3:[234,2],
    4:[222,423],
    5:[222]
} 
```

将此结构存储在 cookie 中，我将其提供给我的 show 函数，并在页面加载时恢复用户之前的公开状态。

**需要改进的地方：**

我正在寻找更好的选择来减少我的 id 选择器映射到这种紧凑的格式。这是我的功能：

```
function getVisibleIds(){

    // example dom id: level-1-row-216-sub

    var ids = $("tr#[id^=level]:visible").map(function() {
        return this.id;
    });

    var levels = {};

    for(var i in ids ) { 
        var id    = ids[i];
        if (typeof id == 'string'){
            if (id.match(/^level/)){

                // here we extract the number for level and row
                var level = id.replace(/.*(level-)(\d*)(.*)/, '$2');
                var row   = id.replace(/.*(row-)(\d*)(.*)/, '$2');

                // *** Improvement here? ***
                // This works, but it seems klugy. In PHP it's one line (see below):

                if(levels.hasOwnProperty(level)){
                if($.inArray(parseInt(row, 10) ,levels[level]) == -1){
                        levels[level].push(parseInt(row, 10));
                }
                } else {
                    levels[level] = [parseInt(row, 10)];
                }

            }
        }
    }

    return levels;
} 
```

如果我在 PHP 中执行此操作，我会像这样构建紧凑​​数组，但我无法在 javascript 中弄清楚：

```
foreach($ids as $id) {
    if (/* the criteria */){
         $level = /* extract it from $id */;
         $row   = /* extract it from $id */;
         $levels[$level][$row];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:10:18.677

所以你的函数中有一些重复/不需要的东西：

如果你这样做

```
var ids = $("tr#[id^=level]:visible").map(function() { 
```

还有这个

```
for(var i in ids ) { 
```

你在匹配的 id 上循环了两次

这里不是 id 总是一个字符串吗？？？

```
if (typeof id == 'string'){ 
```

这不应该是必要的，因为您的 jQuery-Selector: "tr#[id^=level]:visible" 您的匹配元素应始终以 'level' 开头

```
if (id.match(/^level/)){ 
```

总而言之，我认为这应该更短（无法测试，请下次提供一个 jsfiddle，会更容易;-)）

```
function getVisibleIds(){

  // example dom id: level-1-row-216-sub
  var level, parsed, levels = {};

  $("tr#[id^=level]:visible").map(function() {
    // here we extract the number for level and row
    level   = this.id.replace(/.*(level-)(\d*)(.*)/, '$2');
    parsed  = parseInt(this.id.replace(/.*(row-)(\d*)(.*)/, '$2'), 10);

    // i like this more
    if(!levels.hasOwnProperty(level)) { levels[level] = []; }            
    if($.inArray(parsed, levels[level]) === -1) {
        levels[level].push(parsed);
    }
  });

  return levels;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T11:14:21.187

我的尝试

```
function getVisibleIds() {

    var parts, level, row, levels = {};

    var ids = $("tr#[id^=level]:visible").each(function (index, el) {

        parts = el.id.split("-"); // no regex :)
        level = parts[1];
        row = parts[3];

        if (!levels[level]) { levels[level] = []; }
        if ($.inArray(row, levels[level]) + 1) { levels[level].push(row); }

    });
    return levels;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T11:02:10.263

```
function getVisibleIds(){

    // example dom id: level-1-row-216-sub

    var levels = {};

    var ids = $("tr#[id^=level]:visible")
                    .map(function() {

                        return this.id;
                    })
                    .each(function (index, id) {

                        if (!id || typeof id !== 'string') {
                            return;
                        }

                        if (id.match(/^level/) === false) {
                            return;
                        }

                        var level = id.replace(/.*(level-)(\d*)(.*)/, '$2');
                        var row   = id.replace(/.*(row-)(\d*)(.*)/, '$2'),
                            primaryKey = parseInt(row, 10);

                        if (!levels[level]) {
                            levels[level] = [];
                        }

                        var arr = levels[level];

                        if (arr.indexOf(primaryKey) === -1) {
                            levels[level].push(primaryKey);

                        }
                    });

    return levels;

} 
```

需要注意的关键点是，您可以使用`. (dot notation)`或作为访问器访问对象的属性`[]`。

# electronic-signature - 电子签直播API集成流程

> ID：13623871
> 
> 赞同：0
> 
> 时间：2012-11-29T10:37:57.380
> 
> 标签：electronic-signature

有人可以建议我如何将电子签名实时集成到我的网络应用程序中吗？集成后，API 将处理哪些内容以及它希望我提供哪些内容才能正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T01:11:58.933

这是一个非常广泛的问题。尝试尽可能简洁，您的应用程序可能需要包含以下内容：

1) 要签名的文件 2) 谁在签名 3) 签名和表单字段的去向

电子签名服务将处理工作流程、文档的呈现，最重要的是审核日志，使其具有法律约束力，即交易实际发生。我为 DocuSign 工作，所以我非常熟悉该电子签名解决方案。您可以在 www.docusign.com/devcenter 上开始使用 DocuSign API

如果您还有其他问题，请告诉我。

-mb

# c++ - 静态库依赖 + VS2010 + SVN

> ID：13623874
> 
> 赞同：3
> 
> 时间：2012-11-29T10:38:01.640
> 
> 标签：c++, visual-studio-2010, visualsvn

这是对使用 SVN 的 Visual Studio 中的解决方案组织的疑问。

为简化起见，假设我有一个名为 Util.lib 的静态库，在 VS2010 项目中编译。

我还有一个名为 Capture.lib 的静态库，在 VS2010 中编译，它依赖于 Util.lib。在 SVN 上，Util.lib 是 Capture.lib 文件夹中的一个外部，Util 项目被添加到 Capture.lib 解决方案中。这完美编译。

现在的问题。我有另一个项目，称为 Native，它编译一个 DLL。此 DLL 依赖于 Capture.lib 和 Util.lib。我已将两者都添加为外部，并将项目添加到本机解决方案中。

问题是：在 Native 编译过程中，Capture.lib 项目无法编译，因为它没有找到 Util.lib。发生这种情况是因为它在 Capture 项目的 externals 文件夹中查找！而 Util 现在不存在。

在这种情况下我该怎么办？我应该将 Util 项目（在 externals/Capture/externals/Util 内）添加到 Native 解决方案吗？这是正确的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T12:01:24.747

这取决于 Util.lib 和 Capture.lib 的更改频率。1) 如果您使用的是 Native.dll 的固定版本，您只需将 Util.lib 和 Capture.lib 及其头文件夹添加到您的 Native 项目（Project->Properties->C/C++->Additional Include Directories , Project->Properties->Linker->Input->Additional Dependencies) 2) 如果 Capture.lib 和 Native.dll 与 Native.dll 并行发生动态变化，您应该以与 (1) 相同的方式调整依赖关系并将项目依赖项添加到 Capture.lib 和 Native.dll（Project->Project Dependencies），您可以在其中告诉 VS 以正确的顺序编译您的项目。

# android - 如何根据微调器中的选定值在片段内动态显示 web 视图

> ID：13623878
> 
> 赞同：0
> 
> 时间：2012-11-29T10:38:11.043
> 
> 标签：android, android-layout

我的应用 2 微调器，基本上是允许用户选择值的下拉列表。Spinner1 在下拉菜单中有 4 个选项，而 Spinner2 在下拉菜单中有 5 个选项。

如果用户从 spinner1 中选择 option1 并从 spinner2 中选择 option1，则项目符号列表 [在此应用程序的 HTML webapp 版本中，我使用 li 标签] 应显示在视图其余部分的片段中。图像将使事情更清楚。
[1]： http: [//imgur.com/qaqHZ](http://imgur.com/qaqHZ) 现在，如果我在片段中使用 webview 来显示文本，我如何在 20 个条件下动态地做到这一点[微调器 1 中的 4 个选项和微调器 2 中的 4 个选项，所以4*5]？

我附上代码

```
package com.temp1.android;
import java.util.ArrayList;
import java.util.List;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Spinner;
import android.widget.Toast;

public class MyAndroidAppActivity extends Activity {

    private Spinner spinner1, spinner2;
    private Button btnSubmit;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        addItemsOnSpinner2();
        addListenerOnButton();
        addListenerOnSpinnerItemSelection();

    }

    //add items into spinner dynamically
    public void addItemsOnSpinner2() {

        spinner2 = (Spinner) findViewById(R.id.spinner2);
        List<String> list = new ArrayList<String>();
        list.add("Equipment");
        list.add("Indications");
        list.add("Illustration");
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,list);
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner2.setAdapter(dataAdapter);
    }

    public void addListenerOnSpinnerItemSelection(){

        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener());
    }

    //get the selected dropdown list value
    public void addListenerOnButton() {

        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner2 = (Spinner) findViewById(R.id.spinner2);

        btnSubmit = (Button) findViewById(R.id.btnSubmit);

        btnSubmit.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Toast.makeText(MyAndroidAppActivity.this,
                        "OnClickListener : " + 
                        "\nSpinner 1 : " + String.valueOf(spinner1.getSelectedItem()) +
                        "\nSpinner 2 : " + String.valueOf(spinner2.getSelectedItem()),
                        Toast.LENGTH_SHORT).show();
            }

        });

    }

}

import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.Toast;

public class CustomOnItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos,
            long id) {
        Toast.makeText(parent.getContext(), 
                "OnItemSelectedListener : " + parent.getItemAtPosition(pos).toString(),
                Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

} 
```

目前我正在使用 toast 来调试事件监听器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:24:45.817

我猜你已经完成了片段部分，所以我假设你`Fragment`的布局文件`R.layout.main`中有一个 id `R.id.webviewfrag`。

该片段的类可能是这样的：

```
public class WebViewerFragment extends Fragment {

    private WebView mWebView;
    // a two dimensional array representing the data to put in the WebView
    private String[][] mData = new String[4][5];// put data in it

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View mainView = (View) inflater.inflate(R.layout.frag_layout, container, false);
        mWebView = (WebView) mainView.findViewById(R.id.webView1); 
        return mainView;
    }

    public void updateWebView(int firstSelection, int secondSelection) {
         if (firstSelection == AdapterView.INVALID_POSITION || secondSelection == AdapterView.INVALID_POSITION) {
              return;  
         } else {
              if (mWebView != null) {
                   mWebView.loadData(mData[firstSelection][secondSelection], "text/html", null);
              }
         }
    }
} 
```

`R.layout.frag_layout`将会：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <WebView
        android:id="@+id/webView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

那么你在`onClick`回调中所要做的就是：

```
@Override
public void onClick(View v) {
       WebViewerFragment wvf = (WebViewerFragment) getSupportFragmentManager().findFragmentById(R.id.webviewfrag);
       if (wvf != null && wvf.getView() != null) { 
            wvf.updateWebView(spinner1.getSelectedItemPosition(), spinner2.getSelectedItemPosition());
       }
} 
```

# objective-c - 了解 Objective-C 中强指针和弱指针的实际应用

> ID：13623884
> 
> 赞同：3
> 
> 时间：2012-11-29T10:38:27.253
> 
> 标签：objective-c, pointers

我刚刚阅读了[这个](https://stackoverflow.com/questions/9262535/explanation-of-strong-and-weak-storage-in-ios5)问题的公认优秀答案，它阐明了 Objective-C 中强指针和弱指针之间的概念差异，我仍在努力理解实际差异。我来自不存在这些概念的 C++ 背景，我无法弄清楚我将在哪里使用一个与另一个。

有人可以提供一个使用Objective-C代码的实际示例来说明强指针和弱指针的不同用途吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T10:47:44.880

## 概念

这都是关于保留计数的。ARC 是一种方便，可以避免开发者担心手动保留和释放。从本质上讲，强变量会将保留计数增加 1，而弱变量则不会。

见下文：

```
@interface Test () {
    NSString* strongVariable; // Instance variables default to strong
    __weak NSString* weakVariable;
}
@end

// This has a retain count of 1, it has been allocated to memory by the user, and stored in a local variable (which is strong)
NSString* str = [[NSString alloc] initWithString:@"Test"];

// The string object will now have a retain count of 2, as the strong variable has increased its retain count
strongVariable = str;

// This weak variable does **not** increase the retain count, and as such it will still be 2
weakVariable = str;

// --

// Now, lets remove some references
// This will reduce the retain count to 1, as a strong variable has lost its link
strongVariable = nil;

// This will also reduce the retain count, as another strong variable has lost it's reference. This means the retain count is 0, and the object can now be considered to not exist
str = nil;

// What happens to weakVariable?
// Because it is referencing an object with a 0 retain count, the runtime will set the value of this variable automatically to nil (iOS 5 and above).
NSLog(@"%@", (weakVariable == nil) ? @"nil" : @"Not nil") // Will print "nil" 
```

您不能遇到强变量引用保留计数为 0 的对象的情况，这违背了强变量的核心概念。值得注意的是，旁边`__weak`还有`__unsafe_unretained`. 这就像一个弱变量，除了它不会在保留计数达到零时自动设置为 nil，这意味着它将包含一个指向内存随机部分的指针（如果你访问它会崩溃，你需要 nil 它你自己）。存在这种情况的原因是由于 iOS 4 支持 ARC，但不支持`__weak`. 在大多数情况下，您会使用`__weak`.

[上面的描述只是一个实用的一瞥，您可以使用此文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)更深入地阅读。

## 实际应用

一切都是`__strong`默认的。如果你想要弱，你需要使用`__weak`.

当您在概念上不想**拥有**特定对象时，通常会使用弱变量。虽然汽车将拥有它的引擎和车轮，但它不会拥有司机。

```
Wheel* wheel;
Engine* engine;
__weak Driver* driver; 
```

相反，司机将拥有汽车。

```
Car* car; 
```

如果汽车拥有司机，我们将有一个**保留周期**。汽车拥有司机，司机拥有汽车。如果我们要释放一个，另一个会发生什么？保留周期的整个概念超出了这个问题的范围，但你可以[在这里阅读。](http://mikeash.com/pyblog/friday-qa-2010-04-30-dealing-with-retain-cycles.html)

同样的概念也适用于编程模式，例如委托。对于表视图，视图控制器将拥有表视图，但表视图不拥有视图控制器（用作委托）

```
//ViewController
UITableView* tableView;
tableView.delegate = self;     

//UITableView
@property (nonatomic, weak) id<UITableViewDelegate> delegate; 
```

## 陷阱

一种严重的用途`__weak`是在块内。没有它们，您将面临在不知不觉中导致保留周期的严重风险。同样，这超出了此问题的范围，但[请参阅此处了解更多信息](http://zearfoss.wordpress.com/2012/05/11/a-quick-gotcha-about-blocks/)。

## 类比 C++

在 TR1 中，您可以使用共享指针，它们允许您将堆分配的对象放入分配的堆栈中，并为我们管理内存。它通过使用引用计数来做到这一点。每次将共享指针传递给另一个变量时，引用计数都会增加。这类似于分配给 Obj-C 中的强变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T10:50:46.680

根据我的发现，弱指针主要用于从子方面的父子关系。通过将指向其父级的指针设置为弱属性，子级将不拥有父级，您将避免所有权关系。

这篇文章帮助我理解了这些新概念，你应该看看它： [http ://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)

# c# - 确定文本代码类型并强制转换为默认值

> ID：13623888
> 
> 赞同：5
> 
> 时间：2012-11-29T10:38:38.783
> 
> 标签：c#, .net, f#

我在外星人编码系统中有一个输入字符串，即： `"\\U+1043\\U+1072\\U+1073\\U+1072\\U+1088\\U+1080\\U+1090\\U+1085\\U+1086\\U+1089\\U+1090\\U+1100"`

我想将它转换为我的默认代码系统（System.Text.Encoding.Default）：

```
-       System.Text.Encoding.Default    {System.Text.SBCSCodePageEncoding}  System.Text.Encoding {System.Text.SBCSCodePageEncoding}
+       [System.Text.SBCSCodePageEncoding]  {System.Text.SBCSCodePageEncoding}  System.Text.SBCSCodePageEncoding
        BodyName    "koi8-r"    string
        CodePage    1251    int
+       DecoderFallback {System.Text.InternalDecoderBestFitFallback}    System.Text.DecoderFallback {System.Text.InternalDecoderBestFitFallback}
+       EncoderFallback {System.Text.InternalEncoderBestFitFallback}    System.Text.EncoderFallback {System.Text.InternalEncoderBestFitFallback}
        EncodingName    "Cyrillic (Windows)"    string
        HeaderName  "windows-1251"  string
        IsBrowserDisplay    true    bool
        IsBrowserSave   true    bool
        IsMailNewsDisplay   true    bool
        IsMailNewsSave  true    bool
        IsReadOnly  true    bool
        IsSingleByte    true    bool
        WebName "windows-1251"  string
        WindowsCodePage 1251    int 
```

我如何确定代码系统以及如何转换它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T12:15:45.447

我不确定我是否真的理解你的问题。

在 .NET 中，当您有一个字符串对象时，您不需要关心不同的编码。所有 .NET 字符串都使用相同的编码：Unicode（或更准确地说：UTF-16）。

只有当您将字符串对象转换为字节序列（例如将其写入文本文件）或反之亦然时，不同的文本编码才会发挥作用。我假设你在谈论这个。要将字节序列从一种编码转换为另一种编码，您可以编写：

```
byte[] input = ReadInput(); // e.g. from a file
Encoding decoder = Encoding.GetEncoding("encoding of input");
string str = decoder.GetString(input);
Encoding encoder = Encoding.GetEncoding("encoding of output");
byte[] ouput = encoder.GetBytes(str); 
```

当然，您需要用正确的编码名称替换`encoding of input`和。`encoding of output`MSDN[列出了所有支持的编码](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)。

您需要知道输入的编码，无论是按照惯例还是基于元数据或其他东西。您无法可靠地确定/猜测未知编码，但您可以应用一些技巧和启发式方法。请参阅[如何检测文本文件的编码/代码页](https://stackoverflow.com/questions/90838/how-can-i-detect-the-encoding-codepage-of-a-text-file)。

**编辑：**

“U+xxxx”是您通常指代特定 Unicode 代码点（分配给 Unicode 字符的数字）的方式，例如字母“A”（拉丁文大写 A）的代码点是 U+0041。

您的输入字符串实际上是“ `\\U+1043...`”（反斜杠、反斜杠、大写 U 等）还是仅像这样显示在调试器窗口中？如果是第一个，那么有人在对文本进行编码时犯了一个错误，可能是通过尝试编写 Unicode 文字并通过编写第二个文字意外转义反斜杠（**Edit2:**或者故意以转义方式保存字符以将它们写入ASCII 编码的文件/流/等）。据我所知，.NET 编码类在这里对您没有帮助；您需要手动解析字符串。

顺便说一句，您示例中的数字很奇怪。在标准符号中，“U+”后面的数字是十六进制数，而不是十进制数。但是，如果您将代码点读取为十六进制数字，那么它们指的是完全不相关的脚本系统（缅甸语、格鲁吉亚语 Mkhedruli、韩语 Jamo）中的字符；读为十进制数字，但它们都指的是西里尔字母。

**Edit3：**要解析它，好吧，在表单中查找子字符串`\\U+xxxx`（x 是数字），转换`xxxx`为 int `n`，使用该代码点（）创建一个 char，`Char.ConvertFromUtf32(n)`然后用该 char 替换整个子字符串。

# c# - 每个配置文件只允许一个 configSections 元素，如果存在，则必须是根配置元素的第一个子元素

> ID：13623896
> 
> 赞同：101
> 
> 时间：2012-11-29T10:39:00.143
> 
> 标签：c#, asp.net, iis-7, console-application, app-config

我正在开发控制台应用程序，当我运行 .exe 文件时，出现以下错误：

> `system.Configuration.ConfigurationErrorsException`：`<configSections>`每个配置文件只允许一个元素，如果存在，则必须是根元素的第一个子`<configuration>`元素。

这是我的`App.config`文件：

```
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0"/>
    </startup>
    <configSections>
        <section name="Reva.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>
    <!-- ... --> 
```

但是，如果我删除以下`startup`部分，则它可以正常工作

```
<startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0"/>
</startup> 
```

* * *

## 回答 #1

> 赞同：241
> 
> 时间：2012-11-29T10:41:10.017

错误消息本身实际上详细说明了正确的修复：

> `configSections`必须是根元素 的*第一个子*：*

^(*强调已添加)

所以只需将 移动`configSections`到顶部：

```
<configuration>
    <configSections>
        <section name="Reva.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
    </configSections>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0"/>
    </startup>
</configuration> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-30T03:29:26.757

**错误 web.config 文件**

```
 <?xml version="1.0" encoding="utf-8"?>   

<configuration>    
   <connectionStrings>   
      <add name="SQLConnect" 
           connectionString="Data Source=SAHIL; Initial Catalog=Demo; Integrated Security=SSPI" 
           providerName="System.Data.SqlClient" />   
   </connectionStrings>     

   <configSections>   
      <sectionnamesectionname="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, 
          Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" /> 
   </configSections>  

   :   
   :   
   :   
   :   
   :   
   :   
   :   
</configuration> 
```

**错误是**

[![在此处输入图像描述](../Images/749bbba6bd2b9da730fd4260618793b6.png)](https://i.stack.imgur.com/tZYXZ.jpg)

**为了修复错误，我重新排列了元素并修复了错误。**

[![在此处输入图像描述](../Images/60b1a1307db37a682f0838d18d60710c.png)](https://i.stack.imgur.com/b4LPS.png)

# java - 从 xml 中排除特定标签？

> ID：13623902
> 
> 赞同：0
> 
> 时间：2012-11-29T10:39:15.633
> 
> 标签：java, xml, jsoup

我正在使用 jsoup 从 xml 文件中提取一些属性`xmlDoc.select("ns|properties")`

问题：它找到所有出现的“属性”标签。我只想要 ns:tests 标签之外的属性。我怎样才能排除它们？

```
<ns:interface>
</ns:interface>

<ns:tests>
  <ns:properties>
   <ns:name>name</ns:name>
   <ns:id>2</ns:id>
  </ns:properties>
</ns:test>

<ns:properties>
  <ns:name>name</ns:name>
  <ns:id>1</ns:id>
</ns:properties> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:10:14.760

你可以试试这两种方法：

```
/*
 * Solution 1: Check if a 'ns:properties' is inside a 'ns:tests'
 */
for( Element element : xmlDoc.select("ns|properties") )
{
    if( element.parent() != null && !element.parent().tagName().equals("ns:tests") )
    {
        /* Only elements outside 'ns:tests' here */
        System.out.println(element);
    }
}

/*
 * Solution 2: removing all 'ns:tests' elements (including all inner nodes.
 * 
 * NOTE: This will DELETE them from 'xmlDoc'.
 */
xmlDoc.select("ns|tests").remove();
Elements properties = xmlDoc.select("ns|properties");

System.out.println(properties); 
```

如果您选择*解决方案 2*，请务必**备份**（例如克隆）`xmlDoc`。

# .htaccess - htaccess 重写两个不同的 url

> ID：13623903
> 
> 赞同：0
> 
> 时间：2012-11-29T10:39:19.973
> 
> 标签：.htaccess, rewrite

这是我当前的 htaccess 文件

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([^/]+)/(.*) /b.php?n=$1&b=$2 [L,QSA] 
```

这会将我的网址**website.com/b.php?n=1&b=1**更改为**website.com/1/1**

我还想将此网址**website.com/g/1/1.gif**更改为**website.com/g/1/1**

我怎么能做到这两点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:05:54.923

You should be able to add to the with another Rule under the last one.

something like

> RewriteRule ([^/]+)?([a-z])/([0-9])/([A-Za-z0-9]*) /$1/$2/$3.gif [L,QSA]

that might need tweak depending on the rest of your urls

You could use a tool like Expresso to make/tweak your regex rules. (http://www.ultrapico.com/Expresso.htm)

# c# - 如何在 ASP.NET MCV4 C# 中锁定 DateTime 的本地化

> ID：13623907
> 
> 赞同：0
> 
> 时间：2012-11-29T10:39:27.473
> 
> 标签：c#, asp.net, datetime, localization, asp.net-mvc-4

我正在与一个项目组合作，该项目有时需要将 DateTime 发布在表单中。我们添加了一个简单的 jquery-ui datepicker 来做到这一点，它在我的英语配置机器上运行良好。但是，当他们尝试在荷兰配置的机器上自己使用它时，DateTime 开始使用不同的格式，而 datepicker 保持相同的英文格式，从而导致错误。

如何将 MVC4 中的 DateTime 本地化（或整体本地化）锁定为英语以解决此问题？或者，我如何检测本地化以使日期选择器使用不同的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:49:39.460

试试这个：

```
<globalization culture="en-US" uiCulture="en-US" /> 
```

1.  [如何在 ASP.NET 全球化中配置不变文化？](https://stackoverflow.com/questions/1100061/how-to-configure-invariant-culture-in-asp-net-globalization)
2.  [如何在 web.config 文件中设置默认语言？](http://forums.asp.net/t/1318941.aspx/1)

这也将解决`float`'s 等的潜在问题（点与逗号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:48:03.273

您可以对 DateTime 对象使用 DataAnnotation

```
[DisplayFormat(DataFormatString = "{0:dd-MM-yyyy HH:mm}")]
public DateTime dateTime; 
```

然后将您的格式字符串编辑为英文标准。如果我是正确的，它将始终使用这种格式。

# objective-c - 完成时 GCD Grand Central Dispatch 异步崩溃

> ID：13623910
> 
> 赞同：0
> 
> 时间：2012-11-29T10:39:33.510
> 
> 标签：objective-c, ios, ipad, grand-central-dispatch

在我的应用程序中，我需要使用 Grand Central Dispatch (CGD) 在后台执行大量操作（调整一组图像的大小）。

我有`EngineViewController`一个应用程序的 rootViewController 类：

**AppDelegate.m**

```
EngineViewController * engineVc = [[EngineViewController alloc]init];
self.window.rootViewController = engineVC; 
```

在我的`viewDidAppear`方法中，`engineVC`我有以下代码：

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //this method resize a set of image and save them in Document Folder of the app
        //this method needs about 40 seconds to perform all operations
        [[JSONParser sharedJSONParser]writeToDiskResizedImage]; 
        NSLog(@"Finished");

    });

} 
```

方法`[[JSONParser sharedJSONParser]writeToDiskResizedImage]`返回后，`NSLog`在控制台中打印消息和应用程序崩溃。我所有的项目都是 ARC，`JSONParser`上课除外。在控制台中没有错误消息；我只有这个：

![在此处输入图像描述](../Images/13ad5306fb88aa93b10d900bc76d7d45.png)

执行的代码`[[JSONParser sharedJSONParser]writeToDiskResizedImage]`如下：

```
CGFloat screenScale = [UIScreen mainScreen].scale;

NSString * imagePath = [[NSBundle mainBundle]pathForResource:imageName ofType:nil];
//UIImage * image = [UIImage imageWithContentsOfFile:imagePath];

UIImage * image = [[UIImage alloc]initWithContentsOfFile:imagePath];

CGSize newImageSize = [image resizeImageSettingWidth:(kArticleImageWidth * screenScale)];

UIGraphicsBeginImageContext(newImageSize);
[image drawInRect:CGRectMake(0,0,newImageSize.width,newImageSize.height)];
UIImage* newImage =UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

if (image) {
    [image release];
}

NSData *jpegData = UIImageJPEGRepresentation(newImage, 0.9f);
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsPath = [paths objectAtIndex:0]; //Get the docs directory

NSString * newImageName;
if ([[UIScreen mainScreen] respondsToSelector:@selector(displayLinkWithTarget:selector:)] &&
    ([UIScreen mainScreen].scale == 2.0)) {

    newImageName = [NSString stringWithFormat:@"%@-article@2x.jpg", [imageName stringByDeletingPathExtension]];

}
else {

    newImageName = [NSString stringWithFormat:@"%@-article.jpg", [imageName stringByDeletingPathExtension]];
}

NSLog(@"newImageName %@", newImageName);

NSString *filePath = [documentsPath stringByAppendingPathComponent:newImageName]; //Add the file name

[jpegData writeToFile:filePath atomically:YES]; //Write the file

if (newImage) {
    [newImage release];
}

if (jpegData) {
    [jpegData release];

} 
```

# .htaccess - 如何在 Hadoop 和 Hbase 的 Cloudera 发行版中启用安全性？

> ID：13623911
> 
> 赞同：0
> 
> 时间：2012-11-29T10:39:34.290
> 
> 标签：.htaccess, security, hadoop, cloudera

我已经安装了 CDH (Cloudera) Hadoop 集群，并且在端口 50070、50060、50030、50075 等上有 Web 管理面板。

如何启用 .htaccess 文件之类的东西来启用任何简单的安全访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:28:23.947

我无法评论新版本的 Hadoop，但 0.x 和 1.x 版本使用 Jetty 来提供 Web 资源。我认为他们没有能力实现您正在寻找的那种开箱即用的安全性。

通常，保护对此类资源（以及一般集群）的访问是通过将所有节点放在一个隔离的网络上来实现的，该网络具有人们 ssh 到的边缘节点。从这一点开始，您可以管理对此边缘节点的登录以防止未经授权的访问，并且您的用户可以通过隧道连接到各种 Web 资源。

这是一种方式，可能还有其他方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:21:52.380

谢谢克里斯，我有想法。

保护 hadoop&hbase 局域网资源的简单方法——我的意思是 web 管理员、浏览文件系统、hbase 健康等是使用 SSH 隧道，

首先你需要：

*   远程 ssh 访问您的一台局域网机器 - 例如：master 有一个 ip -`192.168.10.5`

*   在您制造的本地机器上`ssh -D localhost:12345 user@lan_machine`

*   在 Firefox 中设置 socks 代理 - `localhost:12345`（最好使用 foxy 代理插件）

之后，您可以访问您在此局域网中的局域网资源。例如任务跟踪器：`http://192.168.10.5:50060/tasktracker.jsp`

# oracle - 在编写 SQL 查询时需要帮助

> ID：13623912
> 
> 赞同：0
> 
> 时间：2012-11-29T10:39:37.040
> 
> 标签：oracle, oracle10g, top-n

在为以下功能编写 sql 查询时，我面临一个特殊的问题：考虑下表：

```
---------------------------------
 AccountNumber     JobNumber
---------------------------------
    1234            1111113
    1234            1111112
    1234            1111111
    1212            1111131
    1212            1111132 
```

我想获取传递给查询的帐号的最新工作编号。例如：如果我通过 1234 作为帐号，我需要得到 1111113，如果我通过 1212，我应该得到 1111131。如何编写 PL/SQL 查询来实现这一点？我们将传递多个帐号，例如`AccountNumber IN ('1234','1212')`. 因此，对于每个帐号，我需要获取最新的工作编号。

目前我已经尝试过不使用 IN 这样的：

```
SELECT * 
  FROM (SELECT JobNumber 
          FROM TABLE1 
          WHERE AccountNumber = ?) 
 WHERE ROWNUM = 1 
```

在 Java JDBC 中，我正在遍历帐号 ArrayList 并针对 Oracle db 执行 JDBC。但如您所知，如果有 4000 个帐户性能命中，这不是一个可行的解决方案。

你能帮忙写这个 SQL 查询吗？

编辑：这里最新的意思是最高的工作编号，例如：在 1111113 和 1111112 中。1111113 是最新数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T11:00:08.327

有几种方法：

```
SQL> create table t1(AccountNumber, JobNumber) as
  2  (
  3  select 1234,  1111113 from dual union all
  4  select 1234,  1111112 from dual union all
  5  select 1234,  1111111 from dual union all
  6  select 1212,  1111131 from dual union all
  7  select 1212,  1111132 from dual
  8  )
  9  ;

Table created

SQL> select t.AccountNumber
  2       , max(t.JobNumber) as JobNumber
  3    from t1 t
  4   where AccountNumber in (1212, 1234)  -- for example
  5   group by AccountNumber
  6  ;

ACCOUNTNUMBER  JOBNUMBER
------------- ----------
         1234    1111113
         1212    1111132 
```

或者

```
SQL> select AccountNumber
  2       , JobNumber
  3    from ( select t.AccountNumber
  4                , t.JobNumber
  5                , row_number() over(partition by t.AccountNumber order by t.JobNumber desc) rn
  6             from t1 t
  7            where AccountNumber in (1212, 1234) -- for example
  8         ) t
  9  where t.rn = 1
  10  ;

ACCOUNTNUMBER  JOBNUMBER
------------- ----------
         1212    1111132
         1234    1111113 
```

或者

```
SQL> select AccountNumber
  2       , JobNumber
  3    from ( select t.AccountNumber
  4                , t.JobNumber
  5                , max(JobNumber) over(partition by t.AccountNumber) mjn
  6             from t1 t
  7            where AccountNumber in (1212, 1234)   -- for example
  8         ) t
  9  where t.JobNumber = t.mjn
  10  ;

ACCOUNTNUMBER  JOBNUMBER
------------- ----------
         1212    1111132
         1234    1111113

SQL> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T11:00:59.997

一个简单的 max() 不起作用吗？

```
SELECT max(JobNumber)
FROM TABLE1 
WHERE AccountNumber = ? 
```

对于一个查询中的多个帐户：

```
SELECT AccountNumber, max(JobNumber)
FROM TABLE1 
WHERE AccountNumber IN (?, ?, ?)
GROUP BY AccountNumber; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:54:40.250

我会先从标准 SQL 开始。我希望以下能做到。

```
SELECT JobNumber 
FROM TABLE1 
WHERE id = (SELECT MIN(id)
           FROM TABLE1
           WHERE AccountNumber = ?) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T10:59:44.607

```
select a, j1
from(                
 select 
      id, 
      a, 
      j, 
      first_value(j) over(partition by a order by id) j1
 from (                
    select AccountNumber a, JobNumber j, row_number() over(order by 0) id
    from table1) t
    ) t1
group by a, j1 
```

# android - Android遍历光标需要很多时间

> ID：13623915
> 
> 赞同：0
> 
> 时间：2012-11-29T10:39:43.887
> 
> 标签：android, sqlite

我有一个包含 33 列和 10 行的 Andorid 游标；但是在安卓设备上迭代它需要很多时间。

```
curOutputData.moveToFirst();
        while(curOutputData.isAfterLast()==false);
        {
        //  curOutputData.moveToFirst();
            //curOutputData.moveToNext();
            System.out.println("i am writing data.."+rowIdx);
            cellIdx = 0;
            Row hssfRow = sheet1.createRow(rowIdx++);
            for(int j=0; j<curOutputData.getColumnCount();j++)
            {
                Cell hssfCell = hssfRow.createCell(cellIdx++);
                //String cellValue = curOutputData.getString(j);
                hssfCell.setCellValue(curOutputData.getString(j));
                //System.out.println("cellvalue==="+cellValue);
            }

            curOutputData.moveToNext();
        } 
```

我这样做是为了生成一个excel文件。请告知我哪里出错了。提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T10:45:41.900

您可以首先将 moveToFirst + while(!isAfterLast) + moveToNext 替换为一个`while(curOutputData.moveToNext())`相同的，并在每次迭代时为您节省一次对 isAfterLast 的调用。

然后，我建议使用`traceview`来确定您在哪里花费时间。它可能是光标，但也可能是您的 Excel 格式化程序。（这也可以通过评论测试的 excel 部分来快速识别）。

（另外，这一切都取决于你所说的“花费大量时间”的意思）

备注：为什么使用 cellIdx 和 j，它们具有相同的值和相同的含义？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:08:21.240

另一个答案有一个好处，此外

```
for(int j=0; j < curOutputData.getColumnCount(); j++) 
```

每次迭代`curOutputData.getColumnCount()`都会执行命令。如果结果在循环期间没有改变，您应该在循环之前将值存储在一个整数中。

```
int size = curOutputData.getColumnCount();
for(int j=0; j < size; j++) 
```

您还可以在循环之前创建`Cell hssfCell`引用，这样就不需要在每个循环中都分配它（不确定 dalvik 优化得有多好）

# wordpress - 我真的需要使用 Wordpress MU 域映射吗？

> ID：13623917
> 
> 赞同：1
> 
> 时间：2012-11-29T10:39:53.857
> 
> 标签：wordpress, wpmu, domain-mapping

我正在为客户端设置 Wordpress 多站点安装，所有不同的站点都将位于不同的域下。我使用*子域*选项进行了设置，并且通过谷歌搜索将我指向 Wordpress MU 域映射插件，以将这些子域映射到完整域。但是我也注意到，一旦创建了一个新站点，如果您进入编辑屏幕，您可以指定一个完整的域。从我所做的一些测试来看，将其设置为完全不同的域似乎是可行的。

那么我真的需要使用 Wordpress MU 域映射插件吗？还是这个插件只对需要映射到多个域和子域的站点有用？

![Wordpress 多站点编辑屏幕](../Images/22aaabae2b648dac6853c4d93e17d4e3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T21:16:56.020

我可能弄错了，但是插件开发人员不建议这样做。

前端将使用此方法工作，但如果没有正确设置域映射管理（仪表板）pf 辅助站点将无法工作。

在尝试访问辅助站点管理员端的仪表板时，我也遇到了无休止的登录循环问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:07:21.823

如果没有插件，我无法在多个 TLD 上运行 WP MU。所以我会说“是” - 如果您从一个 WP MU 管理多个域，您需要设置它。

也许有人可以证实这一点:)

# php - 带有查询的 PHP MS_SQL 分页错误

> ID：13623921
> 
> 赞同：0
> 
> 时间：2012-11-29T10:40:05.773
> 
> 标签：php, sql-server, pagination

我是 PHP 新手，甚至是使用 MS SQL 而非 MySQL 的 PHP 新手。在做了一些研究之后，我想出了一个可以考虑使用分页查询的方法，但显然我在某个地方出错了，因为它会引发错误。我不明白为什么。

继承人的查询：

```
SELECT TOP 10 * FROM Products WHERE SubCatID = '".$scid."' and ProductID NOT IN ( SELECT TOP 0 * FROM Products ORDER BY ProductID ASC ) ORDER BY ProductID ASC 
```

继承人的错误：

**`Warning: mssql_query() [function.mssql-query]: message: Only one expression can be specified in the select list when the subquery is not introduced with EXISTS. (severity 16)`**

我知道这是因为子查询，但是任何人都可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:43:05.187

您必须在子查询中只选择一列。例子

```
SELECT TOP 10 * FROM Products WHERE SubCatID = '".$scid."' and ProductID NOT IN ( SELECT TOP 0 ProductID FROM Products ORDER BY ProductID ASC ) ORDER BY ProductID ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:55:19.867

一个更好的分页查询是这样的：

```
SELECT * FROM (
  SELECT Products.*, 
         ROW_NUMBER() OVER (ORDER BY ProductID) AS __RN
    FROM Products WHERE SubCatID = '".$scid."' ORDER BY ProductID
) numberedRows
WHERE __RN BETWEEN 1 and 10 
```

然后，您可以将最后一行的数字替换为所需的行号。通常，您不应该使用 *。实际上，您将在结果集上获得一个额外的列，称为`__RN`. 如果您指定列名，则不会发生这种情况。

# eclipselink - Eclipselink 聚合和构造函数问题

> ID：13623925
> 
> 赞同：1
> 
> 时间：2012-11-29T10:40:14.993
> 
> 标签：eclipselink, aggregate, jpql

我正在使用 Eclipselink 2.2.1.v20110722-r9776

我有以下查询：

```
TypedQuery<FundMasterDTO> secQuery = em.createQuery("SELECT new com.dto.FundMasterDTO("+" sum(appAmount), sum(redemptionPrice) from security", FundMasterDTO.class); 
```

我收到以下错误：

```
Exception Description: Syntax error parsing the query [SELECT new com.dto.FundMasterDTO( sum(app_amount), sum(redemption_price) from security], line 1, column 80: syntax error at [from].

Internal Exception: MissingTokenException(inserted [@-1,0:0='<missing RIGHT_ROUND_BRACKET>',<84>,1:80] at from); nested exception is java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: 
```

如果我不使用聚合函数 SUM，那么一切正常。如果我删除构造函数，那么我会得到一个列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:23:14.397

正如消息所述，您缺少右圆括号：

```
SELECT new com.dto.FundMasterDTO( sum(app_amount), sum(redemption_price)) ...
                                                two parentheses here ---^ 
```

# php - 文本内容未完全写入 csv 文件

> ID：13623928
> 
> 赞同：0
> 
> 时间：2012-11-29T10:40:40.410
> 
> 标签：php, html, file, file-upload, file-io

我正在通过 html 表单编写一个**CSV文件，该文件通过****textarea**发布大量文本内容。

但是，整个文本并未在**csv**中创建，使用此 PHP 代码创建**csv**文件：

```
$fp = fopen('file.csv', 'w');
        foreach($_POST as $value)
        {
            fputcsv($fp, $value);
        }
        fclose($fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T10:47:02.453

如果您的文本区域的名称是“内容”，请使用此

```
if( isset($_POST['content']) ) {
    file_put_contents( 'file.csv', $_POST['content'] );
} 
```

如果 $_POST['content'] 是有效的 CSV 内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T21:25:10.230

此代码将生成一个 CSV 文件

```
 <?php
 /* If file has not been created this will form title header(Use only once)
 file_put_contents('file.csv',"Title,Description\r\n", FILE_APPEND);
 */ 
```

每次发布表单时，剩余的代码都会添加一个新行

```
 if( isset($_POST['Title'],$_POST['desc']) ) {
 file_put_contents('file.csv',$_POST['Title'].",". $_POST['desc']."\r\n", FILE_APPEND); 
 }
 ?> 
```

# html - 如何让父母透明但不让孩子透明？

> ID：13623932
> 
> 赞同：2
> 
> 时间：2012-11-29T10:40:43.687
> 
> 标签：html, css

我正在制作一个包装器 div 包装我的所有内容，我给我的包装器一个背景纹理，我想给它不透明度。但是，当我为我的包装器设置不透明度时，它的所有子级、包含文本和图像的 Web 内容都变成了半透明，我怎样才能只将透明度设置为父级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:43:13.293

不要 user `opacity`，好像会过滤掉。改为使用带有 alpha 的背景颜色。

```
background-color: rgba(255,255,255,0.5); 
```

由于您使用的是图像，因此最好的选择可能是将透明度烘焙到图像中（很糟糕，因为您不能褪色等），或者尝试将孩子移出纹理 css 的级联线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T10:46:45.453

嗨，我提到了可以增加和减少`parent container`背景不透明度的属性，这不会影响`child container`. 很简单，基本上你必须使用`rgba`这里的 css`rgb`作为背景颜色和`a-alpha`不透明度。

**CSS**

`background:rgba(0,0,0,0.1);`

[演示](http://jsfiddle.net/8LFLd/102/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:42:37.130

如果一个元素是透明的，那么它包含的所有内容都是透明的。

听起来你真正想要的是一个半透明的背景。如果它是您正在使用的纹理，那么您需要使用图像编辑工具使纹理半透明并将其保存为 PNG。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-01T07:16:14.417

这两行对我有用。你可以在css中使用它。

**CSS**

```
background-color: rgba(0, 0, 0, 0.3);

opacity: 1; 
```

# ruby-on-rails-3 - 模板继承的视图覆盖在 Rails3 中不起作用

> ID：13623936
> 
> 赞同：0
> 
> 时间：2012-11-29T10:41:08.893
> 
> 标签：ruby-on-rails-3, template-inheritance

我正在尝试在 Rails 3 中使用模板继承。我的 application_controller.rb 中有以下代码：

```
layout :set_layout

def set_layout
  layout_name = Club.find(1).layout.name
  prepend_view_path("views/#{layout_name}")
  layout_name
end 
```

这确实正确地将布局设置为与特定俱乐部关联的布局（在本例中称为“layout1”），但是当我尝试通过创建以下文件夹结构来覆盖视图时：

```
app
-views
--home
---indes.html.erb
--layout1
---home
----index.html.erb 
```

它捕获*views/home/index.html*而不是*views/layout1/home/index.html.erb*。

当我按如下方式打印视图路径时：

```
<% controller.view_paths.paths.each do |t| %>
  <%= t %><br>
<% end %> 
```

*它将正确的views/layout1*打印为第一个，但仍然找不到正确的*index.html.erb*文件的内容。

在位于 layouts 文件夹中的*layout1.html.erb中，我只说产量。*

我是否以某种方式误解了这个概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:07:39.223

经过这么多小时的检查，我发现了问题。我在仅用于设置布局的函数中设置视图路径

```
layout :set_layout

def set_layout
  prepend_view_paths ...
  #return the layout name
end 
```

而我应该在过滤器之前使用来设置不同功能的视图路径。

我之前没有意识到这一点的原因是视图路径在布局中正确打印..

# java - Flyway的多个实例指向Java应用程序中的不同数据源

> ID：13623945
> 
> 赞同：3
> 
> 时间：2012-11-29T10:41:47.120
> 
> 标签：java, eclipse, flyway

我在 Eclipse 工作区的 2 个不同项目中创建了两个不同的 Flyway 实例。

它们指向不同的数据源/2 diff 数据库，并且还有单独的 src.main.resources.db.migration 包。每个包都包含用于各自数据库的不同 sql 文件。

当我启动我的应用程序时，Flyway 仅从一个项目中识别脚本（首先初始化项目）并将脚本从该项目执行到另一个数据库。

Flyway 是否可以同时更新 2 个数据库？

* * *

谢谢回复。但是您能否解释一下如何在 Java 代码中实现这一点。例如：目前我正在使用以下方式......

```
 Flyway flyway = new Flyway();               
            InitialContext ictx = new InitialContext();
            DataSource dataSource = (DataSource) ictx.lookup("DS-name");
            flyway.setDataSource(dataSource);
            flyway.setLocations("main.resources.db.migration");//location under first project
                flyway.migrate();

                 Flyway flywaygen =  new Flyway;

            InitialContext ictx = new InitialContext();
            DataSource dataSource = (DataSource) ictx.lookup("DS-name");
            flywaygen.setDataSource(dataSource);
            flywaygen.setLocations("main.resources.emlogis.migration");//location                       under second project
                flywaygen.migrate(); 
```

问题是flywaygen也在寻找第一个项目位置。因此，如果在第一个位置添加了 3 个 sql 脚本，在第二个位置添加了 2 个脚本，则第二个 flyway 实例显示迁移 3 已完成。所以 flywaygen 也指向 main.resources.db.migration 而不是 main.resources.emlogis.migration。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T12:30:22.543

定义第二个flyway bean。然后向两个 flyway bean 添加不同的[SqlMigrationPrefix](http://flywaydb.org/documentation/javadoc/com/googlecode/flyway/core/Flyway.html#setSqlMigrationPrefix%28java.lang.String%29)属性并相应地命名您的迁移脚本。

例如

```
<bean class="com.googlecode.flyway.core.Flyway" init-method="migrate">
   <property name="dataSource" ref="dataSource1" />
   <property name="sqlMigrationPrefix" value="DB1_" />
</bean>
<bean class="com.googlecode.flyway.core.Flyway" init-method="migrate">
   <property name="dataSource" ref="dataSource2" />
   <property name="sqlMigrationPrefix" value="DB2_" />
</bean> 
```

您的迁移脚本必须遵循以下命名方案：

```
DB1_1.0__initial_setup.sql
DB1_1.1__new_column.sql

DB2_1.0__initial_setup.sql
DB2_1.1__new_column.sql 
```

*编辑 - 通过代码配置：*

在您的代码中，您有两个 Flyway 实例。这个实例相当于定义为一个spring bean。因此，您可以调用以下命令来实现相同的目的：

```
flyway.setSqlMigrationPrefix("DB1_");
flywaygen.setSqlMigrationPrefix("DB2_"); 
```

# exchange-server - 死信交换 RabbitMQ 丢弃消息

> ID：13623947
> 
> 赞同：7
> 
> 时间：2012-11-29T10:41:57.667
> 
> 标签：exchange-server, rabbitmq, amqp, dead-letter

我正在尝试在 RabbitMQ 中实现一个 dlx 队列。场景很简单，我有 2 个队列：1）活着 2）死了（x-dead-letter-exchange: "immediate", x-message-ttl: 5000）

和一个“立即”的交换，它绑定到 1) 活着

我尝试运行此示例： [http](http://blog.james-carr.org/2012/03/30/rabbitmq-sending-a-message-to-be-consumed-later/) ://blog.james-carr.org/2012/03/30/rabbitmq-sending-a-message-to-be-consumed-later/ 但似乎消息在之后被丢弃ttl 过期并且它们不会在交易所上发布，所以我的活动队列总是空的。

我还尝试在管理控制台中手动创建队列，我得到了相同的行为。

我使用 Ubuntu/rabbitmq 3.0.0 以及 Mac OS X 和 rabbitmq 2.8.7 对其进行了测试

我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T11:43:10.253

当消息在 RabbitMQ 中“消失”时，问题通常归结为绑定。因此，为了让您的示例正常工作，我执行了以下操作：

1.  创建了 2 个队列，活的，死的（使用 TTL 和 DLX）

2.  创建了一个名为 immediate 的 DIRECT 类型的交换

3.  在交换“立即”和“活动”队列之间创建了一个绑定，路由键为“死” - 原因是，消息进入死队列的路由键（如果使用默认交换是“死”这个需要在死信交换上的绑定中匹配）。

**这里重要的部分是*即时*交换和*活动*队列之间的绑定。**

为了测试我将消息发布到死队列中，我可以看到它短暂出现在死队列中，然后出现在活动队列中。

# java - CoreData 和 Hibernate 的区别

> ID：13623948
> 
> 赞同：3
> 
> 时间：2012-11-29T10:41:58.393
> 
> 标签：java, ios, hibernate, core-data

CoreData 在 iOS 中被解释为“**模式驱动的对象图管理和持久性框架**”，主要与 SQLite 一起用作持久性存储。不一定，您可以仅在内存中使用它，而无需将任何托管对象保存到 SQLite 之类的持久性存储中。

看看 Hibernate，它似乎有很多相似之处，而我质疑它们之间的主要区别。

# 模式驱动

CoreData 使用一个模式，主要是（在 iOS 中），一个包含实体的 xcdatamodel 文件等等。

据我所知，Hibernate 没有用于 xcdatamodels 的 xcode 之类的图形编辑器，但是由于 JPA，您可以将它用于 XML 文件或直接注释。两者都是计划，恕我直言。

# 对象图管理

CoreData 管理我的对象，包括更改跟踪以及检查我在方案中定义的约束。此外，它还支持通过对象故障等减少内存使用的机制。

我认为Hibernate也是如此。它跟踪在 xml 中或通过注释定义的约束，并支持减少内存使用的机制，如 coredata（延迟加载等）

# 持久性

CoreDate 使用底层数据库 sqlite 作为持久性存储，但也可以在内存中使用。

例如，Hibernate 使用 MySQL 数据库作为持久性存储，但可以使用内存中的存储，如 coredata (hsqldb-mem)

因此，由于我不是 hibernate 的专业人士，所以我很困惑——你能说两者之间的关键概念差异是它们真的很像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:57:37.580

不确定确切的密钥差异，但我的理解之一是

> Core Data 专门用于单个客户端使用，只是自动化模型层，而 Hibernate 用于多个客户端使用（一种企业），并提供比核心数据更多的抽象和功能。

# ajax - 如何使用 will_paginate gem 实现 ajax 分页

> ID：13623953
> 
> 赞同：23
> 
> 时间：2012-11-29T10:42:16.803
> 
> 标签：ajax, ruby-on-rails-3, will-paginate

我`will_paginate`在我的项目中使用 gem`ROR`来显示页面中的记录。

我希望加载下一页而不使用重新加载整个页面`ajax`。

我在网上找到了一些例子，但它们对我不起作用。

这个怎么做？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-12-20T15:25:03.750

创建一个具有以下内容的新助手（例如 app/helpers/will_paginate_helper.rb）：

```
module WillPaginateHelper
  class WillPaginateJSLinkRenderer < WillPaginate::ActionView::LinkRenderer
    def prepare(collection, options, template)
      options[:params] ||= {}
      options[:params]['_'] = nil
      super(collection, options, template)
    end

    protected
    def link(text, target, attributes = {})
      if target.is_a? Fixnum
        attributes[:rel] = rel_value(target)
        target = url(target)
      end

      @template.link_to(target, attributes.merge(remote: true)) do
        text.to_s.html_safe
      end
    end
  end

  def js_will_paginate(collection, options = {})
    will_paginate(collection, options.merge(:renderer => WillPaginateHelper::WillPaginateJSLinkRenderer))
  end
end 
```

然后在您的视图中使用此标签进行 ajax 分页：

```
<%= js_will_paginate @recipes %> 
```

请记住，分页链接将包含 url 的现有参数，您可以排除这些，如下所示。这是标准的分页功能：

```
<%= js_will_paginate @recipes, :params => { :my_excluded_param => nil } %> 
```

希望能解决您的问题。

**更新 1** ：在我发布此解决方案的[原始问题](https://stackoverflow.com/questions/13787431/ajax-call-in-rails-3-2-3-with-will-paginate-gem/13975268)中添加了有关其工作原理的说明。

**更新 2**：我已使其 Rails 4 与 remote: true 链接兼容，并将辅助方法重命名为**js_will_paginate**。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-30T05:16:49.340

嘿，如果您想对产品进行分页，请尝试以下操作：

应用程序/控制器/products_controller.rb

```
def index
  @products = Product.paginate(page: params[:page], per_page: 10)
end 
```

意见/产品/index.html.erb

```
<div class = "sort_paginate_ajax"><%= render 'products' %></div> 
```

意见/产品/_products.html.erb

```
<% @products.each do |product| %>
# your code
<% end %>
<%= will_paginate @products %> 
```

意见/产品/index.js.erb

```
$('.sort_paginate_ajax').html("<%= escape_javascript(render("products"))%>") 
```

资产/javascripts/application.js

```
$(function() {
  $(".sort_paginate_ajax th a, .sort_paginate_ajax .pagination a").on("click", function(){
    $.getScript(this.href);
    return false;
  });
}); 
```

所以首先我们在 Product 上为所有产品调用 paginate 方法，这里将根据选项设置偏移量，`params[:page]`并通过`per_page`选项设置限制。此外，我们正在渲染`products`部分，每次打开其他页面时都会渲染。

在`@products`您想要的部分调用中，然后`will_paginate`在方法上应用方法 `@products`，它还会创建`params[:page]`在控制器中使用的方法。

现在响应 ajax 请求，使用我们创建的部分呈现`div`具有类的内容。`sort_paginate_ajax`

还要发出请求 ajax 请求，在文档中加载所有`a`标签的捕获脚本`div.sort_paginate_ajax`，并返回 false。

现在将使用 ajax 请求调用页面

我希望这会对你有所帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-22T11:01:55.333

对先前答案的补充。

代码串：

```
$(".sort_paginate_ajax th a, .sort_paginate_ajax .pagination a").on("click", function(){ 
```

替换为字符串：

```
$(".sort_paginate_ajax").on("click", ".pagination a", function(){ 
```

onclick 事件仅适用于已存在的元素。因此，对于新出现的链接，需要将父级“.sort_paginate_ajax”的单击事件委托给子级“.pagination a”。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-06-14T00:24:04.280

你可以只使用 JQuery：

控制器：

```
def index
  @posts = Post.paginate(:page => params[:page])      

  respond_to do |format|
    format.html
    format.js
  end
end 
```

然后在 index.html.erb 中：

```
<div id="post-content", posts: @posts >
  <%= j render 'post_content' %>
</div> 
```

在部分“_post_content.html.erb”中：

```
<%= will_paginate @posts %>
<% @posts.each do |post| %>
  <p><%= post.content %></p>
<% end %> 
```

分页.js：

```
$(document).ready(function() {
  $('.pagination > a').attr('data-remote', 'true');
}); 
```

index.js.erb：

```
$('#post-content').html("<%= j render 'post_content' %>") 
```

确保添加

```
$('.pagination > a').attr('data-remote', 'true'); 
```

再次在您的 JS 模板 (index.js.erb) 中，因此它会在 Ajax 运行时再次设置链接数据远程。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-21T16:52:58.457

我想扩展皮埃尔的答案。

如果您将 materialize sass 与 will_paginate_materialize 一起使用，那么您将有一个初始化器来设置分页链接的样式。

`gem 'will_paginate', '~> 3.1.0'`

`gem 'will_paginate-materialize', git: 'https://github.com/mldoscar/will_paginate-materialize', branch: 'master'`

因此，为了让远程 true 在 will_paginate_materialize 初始化程序呈现的链接上工作，我这样做了：

will_paginate_helper.rb

```
module WillPaginateHelper
  class WillPaginateJSLinkRenderer < WillPaginate::ActionView::LinkRenderer
  end
  def js_will_paginate(collection, options = {})
    will_paginate(collection, options.merge(:renderer =>WillPaginateHelper::WillPaginateJSLinkRenderer))
  end
end 
```

我将 will paginate materialize 初始化器更改为如下所示：

will_paginate_materialize.rb

```
MaterializePagination::MaterializeRenderer.module_eval do
  def page_number(page)
    classes = ['waves-effect', ('active' if page == current_page)].join(' ')
    tag :li, link(page, page, :rel => rel_value(page)), class: classes
  end

  def prepare(collection, options, template)
    options[:params] ||= {}
    options[:params]['_'] = nil
    super(collection, options, template)
  end

  protected
  def link(text, target, attributes = {})
    if target.is_a? Fixnum
      attributes[:rel] = rel_value(target)
      target = url(target)
    end

    @template.link_to(target, attributes.merge(remote: true)) do
      text.to_s.html_safe
    end
  end
end

WillPaginate::ViewHelpers::LinkRenderer.class_eval do
  def symbolized_update(target, other, blacklist = nil)
    other.each_pair do |key, value|
      key = key.to_sym
      existing = target[key]
      next if blacklist && blacklist.include?(key)

      if value.respond_to?(:each_pair) and (existing.is_a?(Hash) or existing.nil?)
        symbolized_update(existing || (target[key] = {}), value)
      else
        if value.instance_variable_defined?(:@parameters)
          value = value.instance_variable_get(:@parameters)
        end
        target[key] = value
      end
    end
  end
end 
```

在我看来，我将渲染器留在了将分页链接中：

`= will_paginate results, renderer: MaterializePagination::Rails`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-07T22:12:46.767

为了继续 @Pierre 的出色答案创建助手，我看到了一些关于更新视图的后续问题（我最初遇到的一个问题）。@Pierre 通过说明您需要创建一个 js 响应来跟进该问题。这是我在创建助手后所做的：

在我的 show.html.erb

```
<div id="see-comments">
    <%= render @comments %>
</div>
<div id="pagination-comments">
    <%= js_will_paginate @comments %>
</div> 
```

我创建了另一个名为 show.js.erb 的文件（因此有两种显示格式）

```
// to update comments    
$("#see-comments").html("<%= j render @comments %>");
// to update the pagination links
$("#pagination-comments").html('<%= js_will_paginate @comments %>'); 
```

# android - 搜索街道并在谷歌地图上显示标记。标记渐行渐远

> ID：13623955
> 
> 赞同：0
> 
> 时间：2012-11-29T10:42:28.550
> 
> 标签：android, google-maps

我编写了教程以在谷歌地图中搜索地址。不幸的是，当我缩小时，标记并没有粘在那个地方。标记似乎正在飘走。

```
class MapOverlay extends com.google.android.maps.Overlay {

    public boolean draw(Canvas canvas, MapView mapView, 
    boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);                   

        // translate the GeoPoint to screen pixels
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);

        // add the red marker
        Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.marker_red);            
        canvas.drawBitmap(bmp, screenPts.x, screenPts.y-32, null);         
        return true;
    }
} 
```

我认为它来自将 GeoPoint 转换为屏幕像素这是来自搜索按钮的 onClick 事件的代码：

```
 this.searchButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            followMe = false;

            String temp = searchBar.getText().toString();
            List<Address> addresses = null;
            try {
                addresses = geoCoder.getFromLocationName(temp,5);
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            if (addresses != null) {
                p = new GeoPoint(
                        (int) (addresses.get(0).getLatitude() * 1E6),
                        (int) (addresses.get(0).getLongitude() * 1E6));

                mapController.animateTo(p);
                mapController.setZoom(19);

                MapOverlay mapOverlay = new MapOverlay();
                mapOverlays = mapView.getOverlays();
                mapOverlays.add(mapOverlay);

                mapView.postInvalidate();
                //searchBar.setText("");
            } else {
                AlertDialog.Builder adb = new AlertDialog.Builder(
                        GMapsSubActivity.this);
                adb.setTitle("Google Map");
                adb.setMessage("Please Provide the Proper Place");
                adb.setPositiveButton("Close", null);
                adb.show();
            }
        }
    }); 
```

searchbar 是一个 editText 和 followMe 不相关。我希望标记贴在我缩小时寻找的位置。

图片： http : [//i.imgur.com/iavqa.jpg http://i.imgur.com/dFqIs.jpg](http://i.imgur.com/iavqa.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:47:14.957

不知道我是否正确理解了您的代码......但作为一般答案：在将位置分布在多个图块上时，您不能直接使用纬度和经度值。那是因为地球是一个球体（不知何故），并且在使用线性地图图块并使用相同的线性平移值放大/缩小时会出现一些不准确之处。

有几种算法可以结合这种球形失真，我个人从[http://libwlocate.git.sourceforge.net/git/gitweb.cgi?p=libwlocate/libwlocate;a的 GeoUtils 类中“窃取”了一些有用的代码=tree;f=master/android/LocDemo/src/com/vwp/libwlocate/map;h=3afbc1b212a6824c557cda01ee38f3b0ee6d51ef;hb=HEAD](http://libwlocate.git.sourceforge.net/git/gitweb.cgi?p=libwlocate/libwlocate;a=tree;f=master/android/LocDemo/src/com/vwp/libwlocate/map;h=3afbc1b212a6824c557cda01ee38f3b0ee6d51ef;hb=HEAD)

# kohana - 致命错误：将 Kohana 应用程序移动到生产服务器时未定义的类常量“Log::EMERGENCY”

> ID：13623956
> 
> 赞同：0
> 
> 时间：2012-11-29T10:42:31.623
> 
> 标签：kohana, kohana-3

这是我第一次收到此错误，我使用了本地服务器**和**我自己的个人托管服务提供商，此错误仅在我们的生产服务器上弹出。

错误：

```
Fatal error: Undefined class constant 'Log::EMERGENCY' in {Kohana Directory}\system\classes\Kohana\Kohana\Exception.php on line 140 
```

有人对这个有经验么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T13:18:24.590

可能是 PHP 版本问题。见这里：[http ://dev.kohanaframework.org/issues/4631](http://dev.kohanaframework.org/issues/4631)

使用 install.php 文件在您的产品服务器上运行一些检查。

# codeigniter - Codeigniter onclick 在控制器中触发插入功能

> ID：13623961
> 
> 赞同：0
> 
> 时间：2012-11-29T10:42:39.493
> 
> 标签：codeigniter

我是使用 CI 的新手，我对如何单击链接以调用控制器中的函数以插入数据库有疑问，我发现一些线程不是在视图中调用函数的正确方法，但或者，如何我达到这样的目的？这是更动态的方式。

控制器：

```
class Pages extends CI_Controller{

public function view($page='home'){

    if(!file_exists('application/views/pages/'.$page.'.php')){
        show_404(); 
    }

    $data['title'] = ucfirst($page);

    $this->load->helper('url');
    $this->load->model('getdb');

    $data['results'] = $this->getdb->getAll();

    $this->load->view('templates/header', $data);
    $this->load->view('inc/mainmenu', $data);
    $this->load->view('pages/'.$page, $data);
    $this->load->view('templates/footer', $data);
    //$this->insertValues();

}

function insertValues(){
    $this->load->model('getdb');

    $newRow = array(
        'name' => 'andy'
    );

    $this->getdb->insert1($newRow);
    echo "inserted!";
}

} 
```

模型getdb：

```
class Getdb extends CI_Model {

function getAll(){
    $query = $this->db->query('SELECT * FROM test');

    return $query->result();
}

function insert1($data){
    $this->db->insert('test', $data);
}

} 
```

在视图中，我想点击链接并触发 insertValues() 函数，

```
<h1>Insert into DB</h1>
<p><a href="" >Insert single row</a></p> 
```

请多多指教，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T11:52:59.567

考虑一下你有一个数组中的数据，像这样针对某些名称。

```
$data = array(
      'x' => $a,
      'y' => $b,
      'z' => $c,
);

 The variables x,y and z all are column names which you are using in the database to insert. Those names should be same names in the table also. 
```

现在调用模型函数插入。

```
$this->model->insert_values($data); 
```

在模型文件中编写插入所有值的函数。

```
public function insert_values($data)
 {
     $this->insert_helper('table_name',$data);
 } 
```

这是插入值的通用函数。

```
public function insert_helper($table_name, $data_array){
    $this->db->insert($table_name,$data_array);
    return $this->db->insert_id();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T12:29:55.430

这些答案与如何创建链接的简单问题有什么关系？

```
<h1>Insert into DB</h1>
<p><a href="'.<?php echo base_url();?>.'pages/insertValues" >Insert single row</a></p> 
```

作为记录，base_url() 函数并不是绝对必要的，但我发现它在深入目录时很有帮助。它只是简化了确保您回到正确的控制器的过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T10:54:04.907

从另一个动作调用一个控制器动作是反 MVC。您想要做的是`insertValues`首先调用操作（从您的链接），进行插入并重定向到`view`操作。现在它将包含新记录。

# performance - Oracle select：获取总行数的最快方法

> ID：13623962
> 
> 赞同：0
> 
> 时间：2012-11-29T10:42:53.707
> 
> 标签：performance, oracle, select, count, resultset

我正在执行一个 SQL 查询，它扫描数百万行的几个表。我试图实现的是，只有当结果集只包含一行时，我的选择查询才应该返回结果。我知道这两种方法可以做到这一点：

1) 使用 group by 然后'有 count( * )'

2）使用进一步使用'count（*）over'的内部查询

但是这两种方法都会影响性能。我想知道，是否还有其他更快的方法可以做到这一点。如果您需要更多信息，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:52:44.550

像这样的纯 SQL 方式。

```
select * 
  from (select c.*, count(*) over() cnt 
          from (select * from table where x = 'a' etc) c 
         where rownum <= 2) 
 where cnt = 1; 
```

当然，如果您的查询有 order by，则无论如何它都必须扫描结果集（如果是这种情况，正确的索引 + 也许第一行提示会有所帮助。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:49:53.060

最快的方法是使用停止键选择前两行（如果有超过一行，则丢弃结果，无论是客户端还是将其包装到另一个 SELECT 中）。

就像是

```
SELECT * from (
   SELECT * from 
     THE_MASSIVE_QUERY_WITH_ALL_SORTING_REMOVED_BECAUSE_YOU_DONT_NEED_IT
) WHERE rownum < 3 
```

这样一来，您就告诉 Oracle 在找到第二行后停止。无需确定实际计数（这可能需要很长时间）。

# iphone - 如何增加折线图中plotsymbol和plotsymboltext之间的差距？

> ID：13623964
> 
> 赞同：0
> 
> 时间：2012-11-29T10:42:56.187
> 
> 标签：iphone, core-plot, linechart

我正在使用 core-plot 框架绘制图形，当用户点击 polt 符号时我正在显示文本。但我的问题是，文本在绘图符号上重叠。如何解决这个问题。请帮助我。

![在此处输入图像描述](../Images/30e806de6301e3aea680535729b42d76.png)

我的代码是这样的

```
- (void) scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index{
if ([plot.identifier isEqual:@"Green Plot"]) {
    selectedLineIndex1 = index;
    selectedLineIndex2 = -1;
    [graph reloadData];   
}
else if ([plot.identifier isEqual:@"Blue Plot"]) {
    selectedLineIndex1 = -1;
    selectedLineIndex2 = index;
    [graph reloadData]; 
```

} }

```
- (CPTLayer *) dataLabelForPlot:(CPTPlot *)plot recordIndex:(NSUInteger)index {
// Setup a style for the annotation text
CPTMutableTextStyle *hitAnnotationTextStyle = [CPTMutableTextStyle textStyle];
hitAnnotationTextStyle.color    = [CPTColor blackColor];
hitAnnotationTextStyle.fontSize = 18.0f;
hitAnnotationTextStyle.fontName = @"Verdana-Bold";

// Now add the annotation text to the plot
CPTTextLayer *selectedText = [CPTTextLayer layer];
selectedText.textStyle = hitAnnotationTextStyle;
selectedText.position = CGPointMake(0.0,40.0f);

if (index == selectedLineIndex1 && [plot.identifier isEqual:@"Green Plot"]) {
    selectedText.text = [NSString stringWithFormat:@"%.1f",[[dataForPlot objectAtIndex:index] floatValue]];
}
else if (index == selectedLineIndex2 && [plot.identifier isEqual:@"Blue Plot"]) {
    selectedText.text = [NSString stringWithFormat:@"%.1f",[[yPoints objectAtIndex:index] floatValue]];
}
return selectedText;} 
```

有什么错误告诉我还是有任何其他方式只是建议我请提供一些样品。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:26:08.233

我找到了一个解决方案，就在我创建折线图时，将 labelOffSet 添加到折线图。

示例代码。

```
CPTScatterPlot *boundLinePlot2 = [[[CPTScatterPlot alloc] init] autorelease];
CPTMutableLineStyle *lineStyle2 = [CPTMutableLineStyle lineStyle];
lineStyle2.miterLimit = 1.0f;
lineStyle2.lineWidth = 3.0f;
lineStyle2.lineColor = [CPTColor redColor];
boundLinePlot2.dataLineStyle = lineStyle2;
boundLinePlot2.identifier = @"Green Plot";
boundLinePlot2.dataSource = self;
boundLinePlot2.delegate = self; 
```

我将此线添加到折线图中，以便解决我的问题。

```
boundLinePlot2.labelOffset = 10.0f;
boundLinePlot2.labelRotation = M_PI_4; 
```

# html - 调整浏览器窗口大小时出现水平导航栏出错

> ID：13623969
> 
> 赞同：3
> 
> 时间：2012-11-29T10:43:14.067
> 
> 标签：html, css

我的问题是当我最小化浏览器窗口时，水平导航栏开始返回垂直导航，我不希望这样。我尝试了最小宽度和最大宽度，但它对我的问题没有帮助，否则我只是错误地应用它。这是html：

```
<html>
<head><title></title></head>
<body>
  <!--Navigation Bar-->
  <div id="nav" class="nav">
  <ul>
    <li><a href="#">******</a></li>
    <li><a href="#">*********</a></li>
    <li><a href="#">****</a></li>
    <li><a href="#">***********</a></li>
    <li><a href="#">*********</a></li>
  </ul>
  </div>
  <div id="header"></div>
  <div id="container"></div>
</body>
</html> 
```

我的CSS是：

```
#nav {
  position:fixed;
  text-align:center;
  width:100%;
  height:110px;
}
#nav ul {
  list-style: none;
  display: inline-block;
  text-align:center;
  padding-top:10px;
  font-size:30px;
  font-weight:bold;
}
#nav ul li {
  float:left;
  border-radius:10px;
  display:inline-block;
}
#nav ul li:hover {
  border:2px solid #000000;
  border-radius:10px;
  box-shadow:7px 7px 3.5px #000000;
}
#nav ul li a {
  display: block; 
  padding:10px 70px;
  color: #ff0000;
  text-decoration: none;
} 
```

任何能帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:47:48.843

尝试

```
#nav { white-space: nowrap; } 
```

如果您真正想要的是强制导航始终保持水平。

# html - 在 Heroku 上为 RoR 工作但不在本地开发环境中工作的相对路径

> ID：13623974
> 
> 赞同：2
> 
> 时间：2012-11-29T10:43:31.027
> 
> 标签：html, ruby-on-rails-3, heroku

我在公共目录下有一个名为 foo 的文件夹，并将`domain/foo`我带到`foo/index.html`.

我有`public/foo/assets/css/custom.css`，通过相对链接访问

```
href="./assets/css/custom.css" rel="stylesheet" 
```

当应用程序在 heroku 上加载时，它可以正常加载，并且视图源将指向 CSS 文件的链接显示为`http://example.com/foo/assets/css/custom.css`.

在本地开发环境中，`rails server`运行时（rails 3.2.8），未加载 CSS，并且“查看源代码”将指向 CSS 文件的链接显示为 `http://example.com/assets/css/custom.css`，即**不包括** `foo/`.

# javascript - 从 iOS user.agent 重定向中排除 iPad

> ID：13623976
> 
> 赞同：1
> 
> 时间：2012-11-29T10:43:47.000
> 
> 标签：javascript, redirect, user-agent, tablet

我已将 PHP 移动设备检测脚本重新用于 JS，工作正常，但我想排除平板电脑用户代理。

```
if ((navigator.userAgent.match(/iPhone/i)) ||
     (navigator.userAgent.match(/iPod/i)) ||
     (navigator.userAgent.match(/android/i)) ||
     (navigator.userAgent.match(/opera mini/i)) ||
     (navigator.userAgent.match(/blackberry/i)) ||
     (navigator.userAgent.match(/(pre\/|palm os|palm|hiptop|avantgo|plucker|xiino|blazer|elaine)/i)) ||
     (navigator.userAgent.match(/(iris|3g_t|windows ce|opera mobi|windows ce; smartphone;|windows ce; iemobile)/i)) /*|| (navigator.userAgent.match(/(mini 9.5|vx1000|lge |m800|e860|u940|ux840|compal|wireless| mobi|ahong|lg380|lgku|lgu900|lg210|lg47|lg920|lg840|lg370|sam-r|mg50|s55|g83|t66|vx400|mk99|d615|d763|el370|sl900|mp500|samu3|samu4|vx10|xda_|samu5|samu6|samu7|samu9|a615|b832|m881|s920|n210|s700|c-810|_h797|mob-x|sk16d|848b|mowser|s580|r800|471x|v120|rim8|c500foma:|160x|x160|480x|x640|t503|w839|i250|sprint|w398samr810|m5252|c7100|mt126|x225|s5330|s820|htil-g1|fly v71|s302|-x113|novarra|k610i|-three|8325rc|8352rc|sanyo|vx54|c888|nx250|n120|mtk |c5588|s710|t880|c5005|i;458x|p404i|s210|c5100|teleca|s940|c500|s590|foma|samsu|vx8|vx9|a1000|_mms|myx|a700|gu1100|bc831|e300|ems100|me701|me702m-three|sd588|s800|8325rc|ac831|mw200|brew |d88|htc\/|htc_touch|355x|m50|km100|d736|p-9521|telco|sl74|ktouch|m4u\/|me702|8325rc|kddi|phone|lg |sonyericsson|samsung|240x|x320|vx10|nokia|sony cmd|motorola|up.browser|up.link|mmp|symbian|smartphone|midp|wap|vodafone|o2|pocket|kindle|mobile|psp|treo)/i))*/)
{
   window.location.replace("http://mymobileoptimisedsite.com");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:30:24.120

您可以尝试将第一行更改为：

```
if (!navigator.userAgent.match(/iPad/i) && (navigator.userAgent.match(/iPhone/i)) || 
```

此外，我同意@Gijs 的评论。尝试检测屏幕尺寸和触摸支持以决定是否重定向（或者更好的是，制作响应式布局！）。

# iphone - 如何使用 CIStarShineGenerator？

> ID：13623981
> 
> 赞同：2
> 
> 时间：2012-11-29T10:44:06.990
> 
> 标签：iphone, ios, ios6

我正在尝试新的 CIFilter [CIStarShineGenerator](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CIStarShineGenerator)。

但是输出图像只是空白，我如何检查它是否正常生成？

```
CIColor *blue = [CIColor colorWithString:@"0.1 0.5 0.8 1.0"];
CIFilter *filter = [CIFilter filterWithName:@"CIStarShineGenerator" keysAndValues:@"inputColor", blue, nil];
CIImage *outputImage = [filter outputImage];
UIImage *image = [UIImage imageWithCIImage:outputImage];

_imageView.image = image; 
```

imageView 是在屏幕上显示的图像视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T14:49:10.737

我在 Apple 的网站上找到了这个过滤器，发现它非常适合我正在尝试做的事情，但几乎没有关于它的信息，这个问题是我能找到的唯一参考。

所以在搞砸了很长时间之后，我得到了它的工作。

基本上你在正确的道路上，但还有更多的价值需要设置，你必须创建一个足以保持最终结果`UIImage`的特定值。`CGRect`

以下可能会实现您想要做的事情，使用 10x10 像素的星星（`size`基本上是半径）。

```
CGFloat size = 5;

CIFilter *filter = [CIFilter filterWithName:@"CIStarShineGenerator"];
CIColor *blue = [[CIColor alloc] initWithColor:[UIColor colorBlue]];

[filter setDefaults];
[filter setValue:[NSNumber numberWithFloat:size/2] forKey:@"inputRadius"];
[filter setValue:[NSNumber numberWithFloat:1] forKey:@"inputCrossWidth"];
[filter setValue:[NSNumber numberWithFloat:2] forKey:@"inputCrossScale"];
[filter setValue:blue forKey:@"inputColor"];
[filter setValue:[CIVector vectorWithX:size Y:size] forKey:@"inputCenter"];

CIImage *outputImage = [filter valueForKey:@"outputImage"];

CIContext *context = [CIContext contextWithOptions:nil];

CGFloat UIImageOriginX = 0;
CGFloat UIImageOriginY = 0;
CGFloat UIImageSizeWidth = size * 2;
CGFloat UIImageSizeHeight  = size * 2;

UIImage *image = [UIImage imageWithCGImage:[context createCGImage:outputImage fromRect:CGRectMake(UIImageOriginX, UIImageOriginY, UIImageSizeWidth, UIImageSizeHeight)]];

_imageView.image = image; 
```

上面的一些是矫枉过正的（你可以只定义`CGRect`内联的尺寸），但我试图以一种清晰的方式处理各种变量。

# vb.net - VB.Net Convert ToDecimal 不适用于逗号

> ID：13623984
> 
> 赞同：2
> 
> 时间：2012-11-29T10:44:15.660
> 
> 标签：vb.net, decimal, comma, formatexception

我正在尝试将字符串解析为小数，但我不断收到 formatException

```
Dim row as GridViewRow
    for each row in grdActieRittenActiefAlt.rows
        Dim rbl as RadioButtonList = row.FindControl("tblAddAct")
        'toevoegen = true
        if rbl.SelectedItem.Value = true then
            Dim opgaveIdent as Integer = Convert.ToInt32(grdActieRittenActiefAlt.DataKeys(row.RowIndex).Value.ToString())

            Dim curOldTarief as Decimal = Convert.ToDecimal(lblCuratiefTarief.Text)
            Dim curOldKorting as Decimal = Convert.ToDecimal(lblCuratiefKorting.Text)

            Dim curTariefString as String = row.Cells(4).Text
            Dim curKortingString as String = row.Cells(6).Text

            Dim curTarief as Decimal = Convert.ToDecimal(curTariefString)
            Dim curKorting as Decimal = Convert.ToDecimal(curKortingString)

            lblCuratiefTarief.Text = (curOldTarief + curTarief).ToString()
            lblCuratiefKorting.Text = (curOldKorting + curKorting).ToString()

        end if
    next row 
```

输入是 431,25。

到目前为止，我已经尝试了以下方法：

*   使用 .Replace(",",".") => 将逗号更改为冒号 => 无效*   使用强制 CultureInfo => 无效*   直接使用 row.Cells(4).Text => 没用*   使用子字符串查询仅获取整数 (431) => 有效但没有解决方案

还有其他人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:16:09.047

在做了更多的测试和尝试之后，我找到了解决问题的方法/解决方案。

row.Cells(4).Text 是一个边界域。我已将其更改为带有标签的 TemplateField。通过制作一个局部变量（标签）并使用它来转换它的小数。我不知道为什么，但对我来说这是一个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:35:58.663

您是否尝试过 FormatNumber 函数？

```
FormatNumber(number, 2) 
```

2 是小数位数。

# youtube - YouTube 数据 api 搜索 - 排除直播活动

> ID：13623986
> 
> 赞同：3
> 
> 时间：2012-11-29T10:44:17.747
> 
> 标签：youtube

我们在 YouTube 直播活动之前使用现有的 YouTube API。一般我们的API查询如下：

```
{https://gdata.youtube.com/feeds/api/videos?
 q=football+-soccer
 &orderby=published
 &start-index=11
 &max-results=10
 &v=2} 
```

有什么办法可以过滤掉实时事件吗？我找不到任何这样的过滤器。

# jquery - 分段进度条 (jQuery UI)

> ID：13623987
> 
> 赞同：5
> 
> 时间：2012-11-29T10:44:20.167
> 
> 标签：jquery, jquery-ui, user-interface, progress-bar, progress

我正在尝试将 jQuery UI 进度条划分为多个部分。

有人知道我会怎么做吗？

示例：（2 - 视觉设计：03 [http://wiki.jqueryui.com/w/page/12138028/Progressbar](http://wiki.jqueryui.com/w/page/12138028/Progressbar)）

（我目前正在使用背景图像，但这不实用。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T16:00:13.427

这是我正在研究的原型......

**CSS**：

```
div { margin:10px 10px 0px 10px; height:24px; }
div.progressContainer { clear:both; display:block; }
label { float:left; width:200px; display:block; }
input { float:left; width:100px; text-align:center; display:inline; }
input[type=button] { margin-right:1.5px; } 
```

**HTML**：

```
<!-- Options -->
<div> <!-- Maximum -->
    <label> Maximum ProgressBar Value </label>
    <input id="max" type="text" value="100" />
</div>
<div> <!-- Initial Value -->
    <label> Initial Value </label>
    <input id="val" type="text" value="43" />
</div>
<div> <!-- Width -->
    <label> ProgressBar Width </label>
    <input id="width" type="text" value="304" />
</div>
<div> <!-- Height -->
    <label> ProgressBar Height </label>
    <input id="height" type="text" value="30" />
</div>
<div> <!-- Multiply -->
    <label> Segmented ProgressBar </label>
    <input id="seg" type="text" value="4" />
</div>
<!-- Create ProgressBar by given options -->
<div>
    <input type="button" value="Create" />
</div>
<!-- ProgressBar Container -->
<div class="progressContainer"> </div>
<!-- Action Buttons -->
<div>
    <input type="button" value="Start" /> <input type="button" value="Stop" /> <input type="button" value="Reset" />
</div> 
```

**jQuery** :

```
var i; // Define a global counter
var tmr; // Define timer

// Create Function
function create() {
    var max = parseInt($("input#max").val(),10),
        val = parseInt($("input#val").val(),10),
        seg = parseInt($("input#seg").val(),10),
        width = parseInt($("input#width").val(),10),
        height = parseInt($("input#height").val(),10);
    $(".progressContainer").empty().height(height).width(width);
    // Get size for each progressbar
    var size = max / seg;
    // Get width for each progressbar
    // -2 for left/right borders of progressbars
    // -1 for margin-right
    // = -3px each of their width to fit exact location
    width = (width / seg) - 3;
    for(i=0; i<seg; i++) {
        // Create segmented progressbars
        $(".progressContainer").append(
            '<div class="progress' + i + '"></div>');
        // Add their size
        $(".progress" + i).progressbar({
            max: size, value: 0
        }).css({
            margin: '0 1px 0 0',
            width: width,
            height: height,
            float:'left'
        });
    }
    // Get initial value
    var init = val;
    if (init < size) {
        // if smaller than size
        // than only 1 bar gonna get filled
        $(".progress0").progressbar({ value: init });
    } else if (init > size) {
        // else calgulate how many bars
        // gonna be effected
        var bars = Math.floor(init / size);
        for(i=0; i<bars; i++) {
            init = Math.abs(init - size);
            $(".progress" + i).progressbar({ value: size });
        }
        // fill the value left to the last bar
        $(".progress" + i).progressbar({ value: init });
    }
    // Now get the hell out of here!
}

function inc() {
    // Define required values
    var max = parseInt($("input#max").val(),10),
        seg = parseInt($("input#seg").val(),10),
        val = parseInt($("input#val").val(),10);
    // Get size for each progressbar
    var size = max / seg;
    // Get initial value
    var init = val;
    var next = val + 1;
    // If progress is at max then reset it
    if (init >= max) {
        init = 1;
        next = 1;
        for (i=0;i<seg;i++) {
            $(".progress" + i).progressbar({ value: 0 });
        }
    }
    if (init < size) {
        // if smaller than size
        // than only 1 bar gonna get filled
        $(".progress0").progressbar({ value: init });
    } else if (init > size) {
        // else calgulate how many bars
        // gonna be effected
        var bars = Math.floor(init / size);
        for(i=0; i<bars; i++) {
            init = Math.abs(init - size);
            $(".progress" + i).progressbar({ value: size });
        }
        // fill the value left to the last bar
        // +1 here is just for making bar look fullfilled
        $(".progress" + i).progressbar({ value: init + 1});
    }
    // Next value
    $("input#val").val(next);
    // Loop
    tmr = setTimeout(inc, 1000);
    // Now get the hell out of here!
}

// Start Function
function start() {
    // Set's interval to timer and starts
    tmr = setTimeout(inc, 1000);
    // Now get the hell out of here!
}

// Stop Function
function stop() {
    // Stops the timer
    clearTimeout(tmr);
    // Now get the hell out of here!
}

// Reset Function
function reset() {
    var seg =  parseInt($("input#seg").val(),10);
    // For segmented bars
    $("input#val").val(0);
    // Get initial value
    for(i=0; i<seg; i++) {
        $(".progress" + i).progressbar({ value: 0 });
    }
    // Now get the hell out of here!
}

// Validate Function
function validate(element) {
    var obj = $(element);
    if(!/[0-9]$/.test(obj.val())) {
        // Invalid
        obj.css('box-shadow', '0px 0px 8px #FAC3C3');
        if(!obj.next().hasClass('error'))
        { obj.after('<span class="error error-keyup-1">Please use numbers only</span>'); }
    } else {
        // Valid
        obj.css('box-shadow', '0px 0px 8px lightgreen');
        if(obj.next().hasClass('error'))
        { obj.next().remove(); }
    }
    // Now get the hell out of here!
}

// Document Ready
$(document).ready(function(){
    // Validate Inputs
    $("input[type=text]").each(function() {
        $(this).keyup(function(){
            validate(this);
            $(this).focusout(function() {
                $(this).css('box-shadow', '0px 0px 0px #ffffff');
            });
        });
    });
    // Action Buttons
    $("input[type=button]").each(function() {
        // alert($(this).val());
        $(this).click(function(){
            if ($(this).val() == "Create") { create(); }
            if ($(this).val() == "Start") { start(); }
            if ($(this).val() == "Stop") { stop(); }
            if ($(this).val() == "Reset") { reset(); }
        });
    });
    // Now get the hell out of here!
}); 
```

**jsfiddle**：http: [//jsfiddle.net/BerkerYuceer/QZMMx/](http://jsfiddle.net/BerkerYuceer/QZMMx/)

# google-drive-api - changes.list : startChangeId 和 pageToken 的区别

> ID：13623991
> 
> 赞同：1
> 
> 时间：2012-11-29T10:44:30.010
> 
> 标签：google-drive-api

在 changes.list 端点上使用 API 资源管理器时，我注意到了这一点，`startChangeId`并`pageToken`引起了服务器的相同响应。

假设我使用参数执行请求`startChangeId = 700`。如果我使用 执行请求，我将得到完全相同的响应`pageToken = 700`。

谁能告诉我这两个参数之间是否存在实际差异？如果是，关于这两个参数的最佳实践是什么？

# objective-c - 从外部类调用时，Obj-c UIImageView 为空

> ID：13623992
> 
> 赞同：0
> 
> 时间：2012-11-29T10:44:30.097
> 
> 标签：objective-c, ios, uiimageview

我有一个已正确连接的`UIViewController`包含一个（我可以在控制器内设置图像）。`UIImageView`

我还设置了一个 iVar 使用

```
UIImageView *_imgQRCode; 
```

和使用的属性

```
@property (strong, nonatomic) IBOutlet UIImageView *imgQRCode; 
```

合成使用：

```
@synthesize imgQRCode = _imgQRCode; 
```

但是当我调用类似下面的东西时，图像没有任何反应，当我在 Xcode 中检查时，引用是内存引用是`0x00000000`. 注意代码在 ViewController 中调用时有效。以下是从任何其他视图控制器调用的，控制器实例化如下：

```
QRPopupViewController *qrPop = [[QRPopupViewController alloc] initWithNibName:@"QRPopupViewController" bundle:nil];

[controller.imgView setImage:[UIImage imageNamed:@"sample.png"]]; 
```

任何想法如何解决这个问题以及为什么我会为空？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:51:09.173

第一：网点应该很弱

```
@property (weak, nonatomic) IBOutlet UIImageView *imgQRCode; 
```

您必须将 imgQRCode 插座连接到您的 viewController，并且您可以在 viewDidLoad 中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T11:33:32.503

对于不属于当前可见视图控制器的所有 UI 控件实例，您将获得 null。因此，由于这个原因，您对该 UI 控件的所有调用都不会执行与 UI 相关的操作。

如果要更新不属于当前可见视图控制器的任何 UI 控件，可以使用应用委托。它是唯一集中在所有视图控制器之间的地方。

有一种称为“协议委托”的机制可以调用一些方法来从当前可见的视图控制器更新 UI 部分。您可以通过[此 URL](https://stackoverflow.com/questions/569940/whats-the-best-way-to-communicate-between-view-controllers)了解有关此内容的详细信息。

如果您选择“协议委托”的方法，那么详细探索方法执行流程。当你从当前可见视图控制器的方法调用协议时，调用者方法完成后会调用对应的协议实现方法。所以你需要注意同步。

# java - AuthenticationProvider 在 IE 中进行了两次身份验证，但无法登录

> ID：13623994
> 
> 赞同：1
> 
> 时间：2012-11-29T10:44:32.663
> 
> 标签：java, spring, tomcat, spring-security

我对`AuthenticationProvider`这种`authenticate`方法有一个习惯。

```
 @Override
public Authentication authenticate(Authentication authentication) throws AuthenticationException {

        > Check username, password, throw exceptions where needed

        return new CustomAuthenticationToken(username, grantedAuthorities);
    } 
```

和令牌：

```
public class CustomAuthenticationToken extends UsernamePasswordAuthenticationToken
{
     public CustomAuthenticationToken(ICurrentUserContext currentUser, List<GrantedAuthority> authorities) {
         super(currentUser.getUsername(), currentUser.getPassword(), authorities);
     }
} 
```

当我使用 Chrome、Firefox 登录时，没有任何问题。

在 IE 8/9 中，我遇到了一个非常奇怪的问题。有时它只会调用`authenticate`一次该方法，它会登录并且一切都按预期工作。但时不时会调用`authenticate`两次，登录失败。

有人有任何线索吗？

顺便说一句，我已经在 Tomcat 上对其进行了测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T12:09:44.693

我发现了问题，仔细跟踪了 Spring Security 的调试日志。希望这对将来的人有所帮助。

显然，spring security 默认会在登录后迁移会话。但在 IE 中，它不会将身份验证 cookie 迁移到新会话，从而导致出现登录页面。

修复很简单，可以在 Spring Security xml 中完成：

```
<http use-expressions="true">

    <!-- 
        This settings is for IE. Default this setting is on migrateSession.
        When IE tries to migrate the session, the auth cookie does not migrate,
        resulting in a nice login screen again, after you've logged in.

        This setting ensures that the session will not be invalidated, and thus IE will still work as expected.
     -->
    <session-management session-fixation-protection="none" />
</http> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T13:55:29.220

迁移会话完全是一个服务器端过程，浏览器应该不可见。它应该看到的只是`Set-Cookie`JSESSIONID 的新标头，它应该尊重它。

我最好的猜测是您看到了[这个 tomcat 错误](https://issues.apache.org/bugzilla/show_bug.cgi?id=49158)，它会根据浏览器解释重复标头的方式产生不同的效果。最初报告它是因为与您在此处看到的内容密切相关[的黑莓浏览器存在此问题。](https://jira.springsource.org/browse/SEC-1462)

但是你没有说你正在使用哪个版本的 Spring Security 或 Tomcat（总是一个好主意:-)），所以很难确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T10:51:50.287

访问自定义 weblogic 提供程序时，请查看[Internet Explorer 错误](https://stackoverflow.com/a/3047302/502950)。

也许你可以在你的 Tomcat 上禁用 cookie

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-07T14:07:47.717

目录 快速参考 Spring Security 核心插件 << 17IP 地址限制 19Logout Handlers >> 18 Session Fixation Prevention - 参考文档 作者：Burt Beckwith, Beverley Talbott 版本：2.0-RC3 18 Session Fixation Prevention 为防止 session-fixation 攻击设置 useSessionFixationPrevention属性为 true： grails.plugin.springsecurity.useSessionFixationPrevention = true 成功认证后，将创建一个新的 HTTP 会话，并将前一个会话的属性复制到其中。如果您通过单击由试图破解您帐户的人生成的链接开始您的会话，该链接包含一个活动会话 ID，那么您在登录后将不再共享上一个会话。你有你自己的会话。

由于 Grails 默认情况下 URL 中不包含 jsessionid（请参阅此 JIRA 问题），因此会话固定不再是一个问题，但使用此功能仍然是一个好主意。

请注意，使用 cookie-session 插件时会出现问题；有关更多详细信息，请参阅此问题。

该表显示了会话固定的配置选项。

属性 默认值 含义 useSessionFixationPrevention true 是否使用会话固定预防。sessionFixationPrevention.migrate true 登录后是否将现有会话的会话属性复制到新会话中。sessionFixationPrevention.alwaysCreateSession false 是否始终创建会话，即使在请求开始时不存在会话。

[http://grails-plugins.github.io/grails-spring-security-core/guide/sessionFixation.html](http://grails-plugins.github.io/grails-spring-security-core/guide/sessionFixation.html)

# java - AsyncHttpClient 和超时

> ID：13623995
> 
> 赞同：2
> 
> 时间：2012-11-29T10:44:33.073
> 
> 标签：java, asynchttpclient

在 AsyncHttpClient JDKFuture.get()

```
 public V  [More ...] get(long timeout, TimeUnit unit)  {
        V content = null;
        try {
            if (innerFuture != null) {
                content = innerFuture.get(timeout, unit);
            }
        } catch (TimeoutException t) {
            if (!contentProcessed.get() && timeout != -1 && 
              ((System.currentTimeMillis() -   touch.get()) <= responseTimeoutInMs)) {
                return get(timeout, unit);
            } 
```

为什么我们有 2 次超时？

```
 1\. timeout as param
  2\. responseTimeoutInMs 
```

第二次超时伤害了我们，因为即使在超时到期后呼叫也不会出现。它不断递归地再次调用 get()。

一旦 responseTimeoutInMs 被击中，连接会关闭吗？我们正在尝试将其设置为低于超时。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T20:04:49.390

我假设您指的是我在网上找到的方法：

```
public V get(long timeout, TimeUnit unit) throws InterruptedException, ExecutionException, TimeoutException {
    V content = null;
    try {
        if (innerFuture != null) {
            content = innerFuture.get(timeout, unit);
        }
    } catch (TimeoutException t) {
        if (!contentProcessed.get() && timeout != -1 && ((System.currentTimeMillis() - touch.get()) <= responseTimeoutInMs)) {
            return get(timeout, unit);
        }

        if (exception.get() == null) {
            timedOut.set(true);
            throw new ExecutionException(new TimeoutException(String.format("No response received after %s", responseTimeoutInMs)));
        }
    } catch (CancellationException ce) {
    }

    if (exception.get() != null) {
        throw new ExecutionException(exception.get());
    }
    return content;
} 
```

你可以认为这个类在几个方面是错误的。直接引起注意的第一个错误是使用 of`System.currentTimeMillis()`而不是`System.nanoTime()`。`System.currentTimeMillis()`指计算机系统时钟，在程序执行过程中可以调整，因此可以来回跳动。处理超时的代码应该使用`System.nanoTime()`它给出一个相对于程序执行的值，该值独立于现实世界的时钟。

`responseTimeoutInMs`似乎意味着连接超时，但即使`timeout`传递的参数值已过期，使用它也是违反`Future`合同的。正确的行为是让`get`方法超时，即使由 代表的任务`Future`可能仍在运行。

但是`get`递归调用该方法是一个双重错误。递归不仅是危险的，因为小的超时值可能会导致`StackOverflowError`; 再次将相同的值传递`timeout`给自身意味着无限延迟超时，因为每次重新调用都会将该值视为相对于当前时间。

有趣的是，即使方法到了超时点，它也会在`TimeoutException`内部包装一个`ExecutionException`向调用者报告完全错误的语义。

我不相信您会在 stackoverflow 上找到可以解释此实现背后的基本原理的人（如果有的话）。您必须直接询问该代码的支持者/作者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-08T12:20:03.697

不要使用 JDK 提供程序，它已损坏并在 AHC 2 中被删除。使用 Netty 并升级到现代版本。

# .net - 如何确定引脚是否可以连接？

> ID：13623997
> 
> 赞同：0
> 
> 时间：2012-11-29T10:44:42.897
> 
> 标签：.net, vb.net, directshow, directshow.net, media-type

目前我正在开发基于 DirectShow 的应用程序来配置电视采集卡。它应该适用于那里的大多数采集卡，因此它必须尽可能通用。

由于大多数采集卡制造商似乎提出了不同的配置方式，因此我的应用程序将尝试分析相关的过滤器及其引脚。一个常见的问题是检查某个引脚是否可以直接连接到渲染器，或者它首先需要一个编码器/多路复用器。

**注意**：我在 VB.NET 中使用[DirectShow .NET](http://sourceforge.net/projects/directshownet/)库，但如果您愿意，可以使用 C# 或 C++ 回答。

`AMMediaType`我尝试使用以下功能检查输出引脚是否接受某个：

```
Private Function Check1(filter As IBaseFilter, type As AMMediaType) As Boolean
  Dim enumPins As IEnumPins = Nothing
  If filter.EnumPins(enumPins) = 0 Then
    Dim pin(0) As IPin
    While (enumPins.Next(1, pin, Nothing) = 0)

      Dim accepted As Boolean = (pin(0).QueryAccept(type) = 0)
      Marshal.ReleaseComObject(pin(0))
      If accepted Then Return True

    End While
  End If
  Return False
End Function 
```

这个函数总是返回`False`。经过一些调试，我发现`QueryAccept`总是返回`-2147467259`. [文档](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390428%28v=vs.85%29.aspx)没有提到这样的返回值。经过更多调查，我发现`QueryAccept`它用于提出新的 MediaType，所以我假设 QueryAccept 仅在调用引脚已连接时才有效。[在这里阅读更多](http://msdn.microsoft.com/en-us/library/windows/desktop/dd377488%28v=vs.85%29.aspx)。

`AMMediaType`我可以使用以下函数检查输出引脚是否首选某个选项：

```
Private Function Check2(filter As IBaseFilter, type As AMMediaType) As Boolean
  Dim enumPins As IEnumPins = Nothing
  If filter.EnumPins(enumPins) = 0 Then
    Dim pin(0) As IPin
    While (enumPins.Next(1, pin, Nothing) = 0)

      Dim enumMediaTypes As IEnumMediaTypes = Nothing
      If pin(0).EnumMediaTypes(enumMediaTypes) = 0 Then
        Dim mediaType(0) As AMMediaType
        While (enumMediaTypes.Next(1, mediaType, Nothing) = 0)

          Dim equals As Boolean = (type Is Nothing OrElse
            (type.majorType = Nothing OrElse mediaType(0).majorType = type.majorType) AndAlso
            (type.subType = Nothing OrElse mediaType(0).subType = type.subType) AndAlso
            (type.formatType = Nothing OrElse mediaType(0).formatType = type.formatType))
          DsUtils.FreeAMMediaType(mediaType(0))
          If equals Then
            Return True
          End If

        End While
      End If
    End While
  End If
  Return False
End Function 
```

通过枚举`EnumMediaTypes`，我可以确定某个`AMMediaType`是否被列为*首选*。但是，这并不能保证可以建立连接。通常有一些类型不包含在此枚举中，但仍可用于连接。有时这个枚举是空的。

我正在寻找的是一种方法来确定一个过滤器是否可以直接连接到另一个过滤器，或者它应该首先连接到一个编码器/多路复用器。有人知道我怎么能做到这一点吗？

**注意**：简单地连接过滤器并使用返回值来确定它是否成功，不是一种选择。以我的经验，[ICaptureGraphBuilder::RenderStream](http://msdn.microsoft.com/en-us/library/windows/desktop/dd311924%28v=vs.85%29.aspx)经常`S_OK`在没有建立连接的情况下返回。例如，尝试`MediaType.AnalogVideo`在没有模拟视频引脚时使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T07:41:00.430

要检查是否可以连接引脚，您需要尝试连接它们。但是，“通常”的连接方法`IGraphBuilder::Connect`包括所谓的*智能连接*，它开始尝试在中间插入额外的过滤器。如果你不想要这个，你有`IGraphBuilder::ConnectDirect`方法。不要`IPin::Connect`直接调用：虽然它可能工作得很好，但不应该直接调用它，而是 ConnectDirect 为您调用它。

请注意，对于 ConnectDirect，您还需要提供媒体类型。空媒体类型可能会奏效，或者您可能想尝试从输出引脚上枚举的那些。基本上，这首先是默认行为：输出 pin 将尝试作为参数提供的媒体类型（如果不是 null），然后尝试自己的，然后尝试由对等输入 pin 枚举的那些，然后 Intelligent Connect 开始工作（除非它是ConnectDirect 呼叫）。

所有`RenderStream`和朋友都是上面提到的包装器。

另外，`-2147467259`是[`0x80004005` `E_FAIL`“未指定的错误”](http://alax.info/blog/1383)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:40:03.873

而不是[ICaptureGraphBuilder::RenderStream](http://msdn.microsoft.com/en-us/library/windows/desktop/dd311932%28v=vs.85%29.aspx)，我最终使用[IGraphBuilder::Connect](http://msdn.microsoft.com/en-us/library/windows/desktop/dd390088%28v=vs.85%29.aspx)，但仅用于检查连接是否可能。连接过滤器后，以下函数立即断开过滤器，并使用 HRESULT 确定连接是否成功：

```
Private Function Check3(graph As IGraphBuilder, filterOut As IBaseFilter, filterIn As IBaseFilter, type As AMMediaType) As Boolean
  Dim result As Boolean

  ' Enumerate output pins
  Dim enumPinsOut As IEnumPins = Nothing
  If filterOut.EnumPins(enumPinsOut) = 0 Then
    Dim pinOut(0) As IPin
    While enumPinsOut.Next(1, pinOut, Nothing) = 0

      ' Enumerate output media types
      Dim enumMediaTypes As IEnumMediaTypes = Nothing
      If pinOut(0).EnumMediaTypes(enumMediaTypes) = 0 Then
        Dim mediaType(0) As AMMediaType
        While enumMediaTypes.Next(1, mediaType, Nothing) = 0

          ' Compare media types
          If type Is Nothing OrElse
            (type.majorType = Nothing OrElse type.majorType = mediaType(0).majorType) AndAlso
            (type.subType = Nothing OrElse type.subType = mediaType(0).subType) AndAlso
            (type.formatType = Nothing OrElse type.formatType = mediaType(0).formatType) Then

            ' Enumerate input pins
            Dim enumPinsIn As IEnumPins = Nothing
            If filterIn.EnumPins(enumPinsIn) = 0 Then
              Dim pinIn(0) As IPin
              While enumPinsIn.Next(1, pinIn, Nothing) = 0

                ' Evaluate connection return value
                Dim hr As Integer = graph.Connect(pinOut(0), pinIn(0))
                graph.Disconnect(pinOut(0))
                result = (hr = 0)
                If result = False Then Console.WriteLine(DsError.GetErrorText(hr))

                Marshal.ReleaseComObject(pinIn(0))
                If result = True Then Exit While
              End While
            End If
          End If

          DsUtils.FreeAMMediaType(mediaType(0))
          If result = True Then Exit While
        End While
      End If

      Marshal.ReleaseComObject(pinOut(0))
      If result = True Then Exit While
    End While
  End If

  Return result
End Function 
```