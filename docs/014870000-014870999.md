# StackOverflow 问答 14870000-14870999

# joomla - make non registered users see events in joomsocial

> ID：14870000
> 
> 赞同：0
> 
> 时间：2013-02-14T07:42:57.660
> 
> 标签：joomla

I am using jomsocial on my project and I want to show the events on jomsocial to the public also. That means non registered users can also see events. Is that possible? Any one please help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T08:08:29.260

Find "Events" in the jomsocial menu, and set its access level to public (should be registered now). Also make sure you enable events in the jomsocial configuration

# php - PHP中的日期/时间格式

> ID：14870009
> 
> 赞同：2
> 
> 时间：2013-02-14T07:43:15.423
> 
> 标签：php, mysql, sql, codeigniter

我已经在 mysql 表中存储了一些数据，我分配了他的日期
，我使用列 id 输入`timestamp`，它存储它就像`'2013-02-12 21:42:45'`
我想以这种格式显示它一样，`'Feb-2, 2013 9:42 PM'`
我使用 echo `date('M-d ,Y',$create_date)`然后它显示`'Jan-01 ,1970'`和一些`php eroor`。

有人能帮我吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T07:47:56.587

这将输出您想要的日期时间格式

```
<?php

//Output -- Feb-2, 2013 9:42 PM

$create_date = '2013-02-12 21:42:45';
echo date('M-d ,Y  g:i a',strtotime($create_date)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:45:08.493

```
date('M-d ,Y h:i A',strtotime($create_date)) 
```

试试这个 strtotime 将时间转换为时间戳，然后你可以格式化日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T07:46:04.687

`DATE_FORMAT`如果你想通过查询来使用，

```
SELECT DATE_FORMAT('2013-02-12 21:42:45','%b-%e, %Y %l:%i %p') result 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d41d8/7458)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T07:46:52.163

该[`date()`](http://php.net/manual/en/function.date.php)函数需要一个时间戳作为第二个参数。使用[`DateTime`](http://www.php.net/manual/en/class.datetime.php)对象创建日期，然后创建[`DateTime::format`](http://php.net/manual/en/datetime.format.php)函数。

```
$date = new DateTime($create_date);
echo $date->format('M-d ,Y g:i A'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T07:48:12.290

读取日期的 php 文件：http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

date 函数的第二个参数是 unix 时间戳，而不是字符串（任何格式）

所以你想将你的字符串转换为时间戳（也许考虑到时区），然后用它来按照你想要的方式重新格式化你的日期：

例如

```
date_default_timezone_set('<timezone of create_date>'); 
$date = date('M-d ,Y',strtotime($create_date)): 
```

顺便说一句，此代码将重置所有随后执行的 php 代码的默认时区...不确定这在您的用例中是否重要

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T07:49:34.560

检查`$create_date`你的变量`date('M-d ,Y',$create_date)`。它是空白的。此变量中没有值。为此，它显示 1970。在 中指定日期`$create_date`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T07:50:39.790

但如果您需要以不同格式显示日期，最好将其作为时间戳存储在数据库中。在 php 上，这个值可以由函数 time() 生成；

# java - Android 模拟器和 OpenGL ES 失败

> ID：14870011
> 
> 赞同：1
> 
> 时间：2013-02-14T07:43:21.593
> 
> 标签：java, android, opengl-es, android-emulator

我试图了解 android 模拟器的工作原理。我使用 adt 捆绑包（Eclipse）。昨天模拟器启动时出错，更改内存，堆大小，重新创建，重新启动允许运行模拟器。今天重新启动计算机后 - 模拟器停止再次运行。同样的错误 0x3005 - OpenGLS。安慰：

```
 Android Launch!
 adb is running normally.
 Performing com.android0.MainActivity activity launch
 Automatic Target Mode: Preffered AVD 'em10' is not available. Launching new emulator.
 Launching a new emulator with Virtual Device 'em10'
 Failed to create Context 0x3005
 could not get wgGetExtensionsStringARB
 could not get wgGetExtensionsStringARB
 could not get wgGetExtensionsStringARB
 emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
 could not get wgGetExtensionsStringARB
 could not get wgGetExtensionsStringARB
 could not get wgGetExtensionsStringARB
 could not get wgGetExtensionsStringARB
 could not get wgGetExtensionsStringARB
 emulator: emulator window was out of view and was recentered 
```

.... 在完成应用程序启动和工作。为什么我收到这些错误？如何避开他们？谢谢。

# c++ - 在 C++ 中复制包含基类指针的 QMap 导致堆栈损坏

> ID：14870013
> 
> 赞同：1
> 
> 时间：2013-02-14T07:43:35.977
> 
> 标签：c++, qt, pointers, stack, corruption

我有以下设置：

```
class A {
  public:
  A();
  virtual ~A();
  A(const A&other) {*this = other;}
  A& operator=(const A&) {/*assigne reference members, create new of pointer members*/}

  /* some other stuff */
}

class B : public A {
  public:
  B();
  virtual ~B();
  B(const B&other) {*this = other;}
  B& operator=(const B&rhs) { A::operator=(rhs); /*assigne reference members, create new of pointer members*/}

  /* some other stuff */
}

class C : public A {
  public:
  C();
  virtual ~C();
  C(const C&other) {*this = other;}
  C& operator=(const C&) { A::operator=(rhs); /*assigne reference members, create new of pointer members*/}

  /* some other stuff */
}

class D {
  public:
  D();
  virtual ~D();
  D(const D&other) {*this = other;}
  D& operator=(const D&rhs) {
    /* iterate through map and create new instances of B or C */
    m_list = rhs.m_list;
  }

  QMap<QUuid, A*> GetMap() {return m_map;}
  QList<QUuid> GetList {return m_list;}

  private:
  QMap<QUuid, A*> m_map;
  QList<QUuid> m_list;

  /* some other stuff */
} 
```

现在我将一些*B*和*C*放入映射中，从*D中获取引用，该引用通过**D*的复制构造函数创建 QMap 的深层副本。如果我尝试获取 QMap 的大小，它正在工作，但列表已损坏。在调试器的帮助下，我发现当 QMap 的赋值运算符调用 std::swap 时，*D*中的 QList会损坏。我完全不清楚我的记忆会发生什么。

这与派生和使用基类指针有关吗？如果我将 QMap 更改为 std::map 我的程序也会崩溃，但在另一个问题上。

感谢您的任何建议和提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:51:10.040

> 现在我将一些 B 和 C 放入映射中，从 D 中获取引用，该引用通过 D 的复制构造函数创建 QMap 的深层副本。

地图被复制，但是您有两个指向相同对象的地图，那么问题是谁拥有这些对象。

最好不要存储原始指针，而是使用 shared_ptr 到您的实例

`QMap<QUuid, std::shared_ptr<A>> m_map;`

另请注意，您的方法`GetMap()`返回地图的副本，而不是实际的地图，因此当您调用时，您还有一个映射到相同对象的地图。

# javascript - html5 如何将一个 SVG 变形或动画化为另一个？

> ID：14870014
> 
> 赞同：16
> 
> 时间：2013-02-14T07:43:44.270
> 
> 标签：javascript, html, animation, svg, svg-morphing

我做了一些搜索，但我不得不承认，我对 SVG 的经验为零，我看过一堆现代库，例如 Raphael、PaperJS、KineticJS、EaselJS，但我不知道什么适合这里的目标，也许甚至 CSS 关键帧也能解决问题。

对此问题的指针将不胜感激。

**目标**
在浏览器上，我想使用过渡类型将 svg1 动画化为 svg2`ease-out`

**约束**

*   任何 javascript 库，如果需要的话
*   应该能够将每个元素与具有相同 ID 的其他元素
*   变形形状、路径、填充*、描边*、cx、cy、rc、ry
*   应该在当前的 Firefox 和 Chrome 上工作，IE 10 会很高兴
*   应该适用于新手机，例如 iphone 5、nexus 4 和 7
*   体面的性能，即使在手机上
*   如果呈现为`<svg>`或，则无所谓`<canvas>`

SVG1：

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
 <defs>
  <linearGradient id="svg_6">
   <stop stop-color="#828236" offset="0"/>
   <stop stop-color="#7d7dc9" offset="0.99219"/>
  </linearGradient>
  <linearGradient id="svg_7" x1="0" y1="0" x2="1" y2="1">
   <stop stop-color="#828236" offset="0"/>
   <stop stop-color="#7d7dc9" offset="0.99219"/>
  </linearGradient>
  <linearGradient y2="1" x2="1" y1="0" x1="0" id="svg_1">
   <stop offset="0" stop-color="#828236"/>
   <stop offset="0.99219" stop-color="#7d7dc9"/>
  </linearGradient>
 </defs>
 <g>
  <title>Layer 1</title>
  <ellipse ry="145" rx="116" id="svg_2" cy="201" cx="317" fill-opacity="0.36" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="url(#svg_7)"/>
  <ellipse ry="21" rx="10" id="svg_5" cy="137" cx="274" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="#0cd60c"/>
  <ellipse ry="31" rx="17" id="svg_9" cy="114" cx="346" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="#0cd60c"/>
  <path id="svg_14" d="m235,239c55.66666,-1.33333 133.33334,-71.66667 167,-4l-167,4z" stroke-linecap="null" stroke-linejoin="null" stroke-dasharray="null" stroke-width="5" stroke="#000000" fill="none"/>
 </g>
</svg> 
```

SVG2：

```
<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg">
 <!-- Created with SVG-edit - http://svg-edit.googlecode.com/ -->
 <defs>
  <linearGradient id="svg_6">
   <stop offset="0" stop-color="#828236"/>
   <stop offset="0.99219" stop-color="#7d7dc9"/>
  </linearGradient>
  <linearGradient y2="1" x2="1" y1="0" x1="0" id="svg_7">
   <stop offset="0" stop-color="#828236"/>
   <stop offset="0.99219" stop-color="#7d7dc9"/>
  </linearGradient>
  <linearGradient id="svg_1" x1="0" y1="0" x2="1" y2="1">
   <stop stop-color="#828236" offset="0"/>
   <stop stop-color="#7d7dc9" offset="0.99219"/>
  </linearGradient>
 </defs>
 <g>
  <title>Layer 1</title>
  <ellipse id="svg_2" fill="url(#svg_7)" stroke="#000000" stroke-width="5" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" fill-opacity="0.36" cx="317" cy="201" rx="116" ry="145"/>
  <ellipse id="svg_5" stroke="#000000" fill="#0cd60c" stroke-width="5" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" cx="277.5" cy="132.5" rx="13.5" ry="25.5"/>
  <ellipse id="svg_9" stroke="#000000" fill="#0cd60c" stroke-width="5" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" cx="349.5" cy="110" rx="20.5" ry="35"/>
  <path id="svg_14" fill="none" stroke="#000000" stroke-width="5" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" d="m235,240c21.66666,81.66669 114.33334,96.33331 167,-4l-167,4z" />
 </g>
</svg> 
```

**ps**你可以[在这里可视化](http://svg-edit.googlecode.com/svn/branches/2.6/editor/svg-editor.html)，只需在该区域粘贴代码即可。

我没有要显示的代码，我不想一开始就错了。我的直觉告诉我，最好的解决方案有 50% 的机会不涉及到导航这些节点然后逐个区分！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-30T09:46:51.003

不得不提的是，2015 年为我们带来了几个非常不错的 svg 变形库：

*   [https://alexk111.github.io/SVG-Morpheus/](https://alexk111.github.io/SVG-Morpheus/)
*   [http://greensock.com/morphSVG](http://greensock.com/morphSVG)（可能是最好的，但你必须购买他们的许可证）
*   [https://github.com/gorangajic/react-svg-morph](https://github.com/gorangajic/react-svg-morph)（用于反应）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-14T08:11:56.313

据我所知，您只想变形路径

这是一个很好的教程：[SVG Essentials/Animating and Scripting SVG](https://web.archive.org/web/20171226214422/http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Animating_and_Scripting_SVG)

SVG 路径的 W3C 规范：[w3.org/TR/SVG/paths](https://www.w3.org/TR/SVG/paths.html)

W3C 动画规范：[w3.org/TR/SVG/animate](https://www.w3.org/TR/SVG/animate.html)

这是一个例子：[carto.net/svg/samples/path_morphing](https://web.archive.org/web/20161028120809/https://www.carto.net/svg/samples/path_morphing.shtml)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-23T15:04:23.003

确实，正如达尔文所提到的，有相当多的库允许 svg 变形。

我发现的一些额外内容是：snap.svg、KUTE.js、GSAP。svg.js 有一个 svg morph 插件，我不相信velocity.js 支持这个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-30T05:45:38.160

释义：

*目前，您必须**在两个路径元素中使用相同数量的顶点**，并且它们必须是**相同类型并且在**另一个路径描述中以相同的顺序出现。您还应该将两个多边形定向在同一方向（左右和左右会产生不需要的结果）。*

因此，您可以这样做（请参阅下面的链接以获取示例），但您需要对其进行规划，以便以完全相同的方式创建形状 A 的路径和形状 B 的路径，并使用相同的曲线类型、点等。

这是我制作的一个示例：[动画 svg 路径](http://jaredstanley.com/html5/svg_mask/)
我将右侧的路径设置为图像的蒙版；它也有动画。

1.  我在 illustrator 中创建了一个形状
2.  我复制了那个形状。
3.  我将副本修改为新形状，**注意不要添加顶点或从贝塞尔曲线类型更改为线性曲线类型等**
4.  仅供参考以确认点数，您可以选择路径，然后转到路径>简化，它将显示该路径上的当前点...
5.  我保存该 svg 文件，然后将这些路径复制/粘贴到另一个带有动画信息的 svg 中。
6.  **注意：**路径放置在 svg 文件中的一个元素内，该元素对应于它在 illustrator 中所在的图层名称。如果您在 illustrator 中将这两种形状保存在不同的图层上并清楚地命名它们，这将有助于保持您的 svg 文件井井有条。
7.  **注意＃2：**如果您创建形状并且它非常简单，即只有直线，它可能会保存为 _polygon 而不是我个人认为难以制作动画的 _path，因此我建议至少添加一个贝塞尔手柄单点（以及第二个形状中相同的对应点）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:38:57.080

如果您可以将变形定义为更改列表而不是第二个 SVG，则可以使用 d3 [http://d3js.org/](http://d3js.org/)框架

它的学习曲线有点陡峭，但它给了你很大的力量。如果您想要更简单的东西，我建议 Raphael [http://raphaeljs.com/](http://raphaeljs.com/) - 功能相似，但更容易开始。

# java - 如何安排功能？

> ID：14870016
> 
> 赞同：1
> 
> 时间：2013-02-14T07:43:50.530
> 
> 标签：java, android

我有一个希望在上午 00:00、上午 8:00 和下午 16:00 执行的函数。（每 8 小时一次）。

我怎样才能做到这一点？

我做了一些谷歌和搜索，但我找不到解决方案。

我试过下面的代码，但它不起作用。请帮忙。谢谢。

```
 try {
        date = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss", Locale.ENGLISH).parse("2013/02/13 16:00:00");

        TimerTask updateProfile = new Controller(context);

        timer.scheduleAtFixedRate(updateProfile, date, 28800); //28800second == 8 hour

    } catch (ParseException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:51:05.167

尝试使用 & RND over`Service, AlarmManager, PendingIntent & Intent`和它们的工作组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:51:15.290

您可以使用 AlarmManager 类在特定时间安排任务，有很多 alarammager 示例，[android 文档](http://developer.android.com/reference/android/app/AlarmManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T07:55:22.850

1) 周期应以毫秒为单位，8 小时 = 28800000

2) Locale.ENGLISH 没有区别，去掉以免混淆

3）您的开始日期是过去的，当您启动计时器时，它将运行所有跳过的时间表。如果您不希望它检查 TimerTask.scheduledExecutionTime() 是否在过去，例如

```
 public void run() {
            // truncate time to hours
            long t1 = System.currentTimeMillis() / 3600000 * 3600000;
            long t2 = scheduledExecutionTime() / 3600000 * 3600000;
            if (t2 >= t1) {
                ...
            } 
```

# php - 在 div 中加载新页面

> ID：14870019
> 
> 赞同：0
> 
> 时间：2013-02-14T07:44:01.007
> 
> 标签：php, javascript

我有这个名为“pachete”的div，它生成图像链接（单击图像并从数据库加载相应的地址），它可以工作我被发送到正确的页面，但我想要的是将该页面加载到我所在的页面中在（图片链接正下方）进入 new_page div，而不是重定向到它。“poza_efect”类是一个简单的不透明效果。我有一个 JavaScript 函数，但由于某种原因它不起作用。

```
<script>
    $('.stil_link_img').click(function () {
        $('#new_page').load($(this).attr('href'));

        return false;
    });
</script>

<div id="pachete">
    <?php $result=mysql_query( "SELECT* FROM imagini"); while($data=mysql_fetch_row($result)){ if( ($data[3]==1)&&($data[2]==2) ){ ?>
    <div class="stil_link_img">
        <a href="<?php echo $data[4];?>" class="poza_efect">
            <img src="upload/<?php echo $data[1];?>">
        </a>
    </div>
    <?php } }?>
</div>

<div id="new_page">//some content which should be replaced with my loaded page</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:52:22.493

在您的 Javascript 函数中，引用 $(this) 不是指向 A 元素，而是指向容器 DIV。尝试这样做：

```
 $('.stil_link_img a').click(function() ... 
```

此外，将其包装到 $(document).ready(function() { .... }); 处理程序以确保元素已完全加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T07:52:35.350

stil_link_img 点击事件是在元素加载之前注册的，所以这个事件永远不会被附加。利用

*   `$(".stil_link_img").live(..)`或者
*   在页面完全加载后附加事件
*   在循环之后移动 .click

此外，您应该将点击事件注册到 a-tag 而不是 div（或者，如果您愿意，请务必设置一些可点击的背景..）

# javascript - 如何将链接添加到谷歌饼图切片

> ID：14870025
> 
> 赞同：1
> 
> 时间：2013-02-14T07:44:18.153
> 
> 标签：javascript

这是我一直在工作的代码，我需要通过单击切片重定向到另一个页面。

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>

  // Load the Visualization API and the piechart package.
  google.load('visualization', '1.0', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Topping');    
    data.addColumn('number', 'Slices');
    data.addRows([
      ['Cleaning Completed', $co1],
  ['Denied At Client Place', $co2],
  ['Denied', $co3],
  ['Postponed', $co4],
  ['Careless Driver', $co5],
  ['Cleaning Started', $co6],
  ['Emptyspace', $co22],
  ['Assigned to Vehicle', $co23],
  ['Select', $co24],
  ['Call Not Picked', $co25],
  ['Asked to Call Back', $co26],
    ]);

       // Instantiate and draw our chart, passing in some options.
            var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
       chart.draw(data, options);
   }
       </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T07:51:18.133

我相信谷歌可视化允许你设置一个点击处理程序。所以在你的 drawChart 函数中，添加这个。（在chart.draw之后）

```
google.visualization.events.addListener(chart, 'select', function() {
    var selection = chart.getSelection();
    console.log(selection);  
}); 
```

查看其中的“选择”内容，看看是否有足够的信息来设置浏览器应重定向到的位置。

更多信息：[https ://developers.google.com/chart/interactive/docs/reference#addlistener](https://developers.google.com/chart/interactive/docs/reference#addlistener)

# sql - Windows 2003 服务器在执行检索 lac 记录的查询时变得非常慢

> ID：14870030
> 
> 赞同：0
> 
> 时间：2013-02-14T07:44:52.550
> 
> 标签：sql, sql-server, oracle

我执行了一个`query`，它检索了超过 100,000 条记录，它使用连接来检索记录。
当此查询运行时，整个服务器变得非常慢，这会影响其他站点，这些站点尝试运行正常查询以获取记录。
在这种情况下，为获取那么多记录而运行的查询和同时运行的其他查询属于不同的数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:55:53.403

您检索[数十万](http://en.wikipedia.org/wiki/Lakh)条记录的查询可能会导致大量 IO 并破坏缓冲池。您需要从两个方向解决这个问题：

*   查看您的要求。*为什么*要检索数十万条记录？肯定没有人能看这么多。任何分析都应该推送到服务器上执行，并且只检索聚合结果
*   为什么需要经常分析数十万条记录？也许您需要一个 ETL 管道来每天提取所需的聚合/求和
*   也许查询确实*需要*分析数十万条记录，也许您缺少索引
*   如果以上所有条件都不适用，则仅意味着您需要一艘更大的船。您当前的硬件无法满足要求。

# python - Python / Scipy过滤器离散化

> ID：14870039
> 
> 赞同：6
> 
> 时间：2013-02-14T07:45:25.047
> 
> 标签：python, numpy, scipy, signal-processing

我目前正在尝试从 Matlab 迁移到 Python，并在几个方面取得了成功。然而，我经常使用的 Matlab 信号处理工具箱中的一个函数是[impinvar](http://www.mathworks.com/help/signal/ref/impinvar.html)函数，用于从模拟版本计算数字滤波器。

在[Scipy.signal 中](http://docs.scipy.org/doc/scipy-dev/reference/signal.html)，我只发现[双线性](http://docs.scipy.org/doc/scipy-dev/reference/generated/scipy.signal.bilinear.html)函数可以做类似的事情。但是，与[Matlab 双线性函数](http://www.mathworks.com/help/signal/ref/bilinear.html)相比，它不需要可选参数来对频率进行一些预变形。我在 Scipy 中没有找到任何 impinvar（脉冲不变性）函数。

在我现在开始自己编写代码之前，我想问一下我是否忽略了一些东西？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-23T19:09:01.237

[PyDynamic 包中有一个](https://github.com/PTB-PSt1/PyDynamic/blob/master/PyDynamic/misc/impinvar.py)[Octave impinvar 函数](https://octave.sourceforge.io/signal/function/impinvar.html)的Python 翻译，它应该等同于 Matlab 版本。

# html - display:inline-block 和 overflow:hidden 导致不同的垂直对齐方式

> ID：14870041
> 
> 赞同：8
> 
> 时间：2013-02-14T07:45:51.280
> 
> 标签：html

以下代码在不同浏览器中呈现不同（IE = FF = 高于基线，Chrome = 在基线上）。

1.  是谁的错？我应该在哪里提交错误报告？

2.  你知道如何获得这个解决的跨浏览器的方法吗？如果我更改垂直对齐，我可以让它在某些浏览器中工作，但不能在其他浏览器中工作。

```
<!doctype html>
<html>
<head>
    <style>
        .a {
            display: inline-block;
            overflow: hidden;
            color: red;
        }
    </style>
</head>
<body>
    baseline__<div class="a">test</div>__baseline
</body>
</html> 
```

[http://jsfiddle.net/T2vQj/](http://jsfiddle.net/T2vQj/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T07:56:48.643

是的。您需要执行以下操作：

1.  删除样式`overflow: hidden;`。这里不需要。只有当你给出一个`width`或时你才需要这个`text-overflow: ellipsis;`。

2.  添加`vertical-align: bottom;`. 当显示从 更改为 时，文本的垂直对齐方式将`inline`更改`inline-block`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T08:16:04.547

似乎 Chrome 出错了。CSS [2.1 规范](http://www.w3.org/TR/CSS2/visudet.html#propdef-vertical-align)说

> 'inline-block' 的基线是其在正常流中的最后一个行框的基线，除非它没有流入行框，或者它的 'overflow' 属性具有除 'visible' 之外的计算值，在在这种情况下，基线是底部边距边缘。

由于溢出属性计算为“可见”之外的其他内容，因此内联块的基线是底部边距边缘，它位于包含行框的基线上，因此必须抬起包含的文本以便为该行的下降部分留出空间文本。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T09:13:02.603

试试这个

```
<!doctype html>
<html>
<head>
    <style>
        .a {
            display: inline; 
            overflow: hidden;
            color: red;
        }
    </style>
</head>
<body>
    baseline__<div class="a">test</div>__baseline
</body>
</html> 
```

# c# - 如何拦截客户端上的任何 WCF/Ria 服务调用？

> ID：14870043
> 
> 赞同：1
> 
> 时间：2013-02-14T07:45:55.720
> 
> 标签：c#, .net, wcf, silverlight, wcf-ria-services

我想拦截对 Silverlight 中 Ria 服务的任何调用，以便我可以显示加载程序。是否可以通过一些 WCF Api 或者我必须编写自己的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:06:05.013

您可以创建上下文类的部分类，并在`OnCreated`部分方法中添加一些客户端行为，例如`IClientMessageInspector`提供`BeforeSendRequest`和`AfterReceiveReply`方法。

请参阅[此问题](https://stackoverflow.com/questions/8434357/how-can-i-add-htt-request-header-to-silverlight-ria-requests)或此[博客文章](http://www.lucbos.net/2011/02/normal-0-21-false-false-false-nl-be-x.html)。

# java - Hadoop 与 MongoDB 概念

> ID：14870046
> 
> 赞同：2
> 
> 时间：2013-02-14T07:46:05.050
> 
> 标签：java, mongodb, hadoop, mongodb-hadoop

嗨，我是 Hadoop 和 NoSQL 技术的新手。我开始通过读取存储在 HDFS 中的文件并处理它来学习 world-count 程序。现在我想将 Hadoop 与 MongoDB 一起使用。[从这里](http://docs.mongodb.org/ecosystem/tutorial/getting-started-with-hadoop/)开始程序。

**现在让我感到困惑的是，它将 mongodb 数据存储在我的本地文件系统上，并在 map/reduce 中从本地文件系统读取数据到 HDFS，然后再次将其写入 mongodb 本地文件系统。在我学习HBase的时候，我们可以将其配置为将其数据存储在HDFS上，而hadoop可以直接在HDFS上进行处理（map/reduce）。如何配置 mongodb 将其数据存储在 HDFS 上。**

*我认为将数据存储在 HDFS 中以进行快速处理是更好的方法。不在本地文件系统中。我对吗？如果我走错方向，请清除我的概念。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:13:59.983

HDFS 是一个分布式文件系统，而 HBase 是一个 NoSQL 数据库，它使用 HDFS 作为其文件系统，提供与 Hadoop 的快速高效集成，已被证明可以大规模工作。能够直接在 Hadoop 中处理 HBase 数据或将其推送到 HDFS 是选择 HBase 作为 NoSQL 数据库解决方案的一大优势——我不相信 MongoDB 提供与 Hadoop 和 HDFS 的紧密集成，这会降低任何性能和将数据移出/移入数据库的效率问题。

请查看此博客文章，详细分析 MongoDB 与 Hadoop 的集成程度——其中一个结论是从 MongoDB 写入 HDFS 的性能不佳：[http ://www.ikanow.com/how-well-does -mongodb-integrate-with-hadoop/](http://www.ikanow.com/how-well-does-mongodb-integrate-with-hadoop/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:36:47.447

MongoDB 不是为在 HDFS 之上工作而构建的，而且它并不是真正必要的，因为 Mongo 已经有自己的方法来水平扩展和处理跨多台机器存储的数据。

如果您需要使用 MongoDB 和 Hadoop，更好的方法是使用 MongoDB 作为数据源，但在 Hadoop 中处理所有内容（它将使用 HDFS 进行任何临时存储）。处理完数据后，您可以将其写回 MongoDB、S3 或任何您想要的地方。

我写了一篇博文，详细介绍了如何在此处使用 Mongo 和 Hadoop：http: [//blog.mortardata.com/post/43080668046/mongodb-hadoop-why-how](http://blog.mortardata.com/post/43080668046/mongodb-hadoop-why-how)

# java - 我如何从中获得价值

> ID：14870051
> 
> 赞同：0
> 
> 时间：2013-02-14T07:46:33.683
> 
> 标签：java, jsf

我有一个集合，我在我的 .xhtml 页面中显示`<h:dataTable>`。我想达到几个目标：首先我想将 list.check 值设置为`<h:selectManyCheckbox>`，其次我想要在当前会话结束之前保持选中的任何值。现在它显示正确，但是当我选择某个值时，它不会在 list.check 属性中传输它。我正在使用 JSF v.2.2。

JSF bean 中的代码：

```
private List<AnswerDTO> answerListDto;
//getters and setters 
```

.xhtml 中的代码

```
<h:form> 
    <h:dataTable value="#{main.answerListDto}" var="list">
        <h:column>
            <h:selectManyCheckbox value="#{list.check}">
                <f:selectItem itemValue="1" itemLabel="#{list.ansValue}" />
            </h:selectManyCheckbox> 
        </h:column>
    </h:dataTable>
</h:form> 
```

答DTO类：

```
public class AnswerDTO implements Serializable, DTO {

    private static final long serialVersionUID = 1L;

    private Integer     id;
    private Question    questId;
    private String      ansValue;
    private String      ansStatus;
    private String      check;    

    //getters and setters
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:19:33.357

`selectManyCheckbox`我必须说奇怪的用法。具体问题是 的值`selectManyCheckbox`必须是一个数组。

我的意见是`selectBooleanCheckbox`应该使用`selectManyCheckbox`. 您的`check`属性只能有两个值，一个空数组（如果未选中复选框）和长度为 1 且值等于的数组`ansValue`（如果选中复选框）。

# c - 如何在不抱怨 valgrind 的情况下使结构指向自身

> ID：14870056
> 
> 赞同：0
> 
> 时间：2013-02-14T07:46:52.310
> 
> 标签：c, pointers, structure, valgrind, c99

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<assert.h>

struct Person{
    char *name;
    char sex;
    int age;
    struct Person *ancestor;       
    int n;
};

void p_person(struct Person *this);

struct Person *stack_init()
{
    struct Person *this=malloc(sizeof(struct Person));
    assert(this!=NULL);

    this->name=strdup("NULL");
    this->sex='0';
    this->age=-1;
    this->ancestor=NULL;
    this->n=1;

    return this;
}

struct Person *pushPerson(struct Person *this, char *name, char sex, int age)
{
    assert(this!=NULL);
    int n=this->n+1;
    this=realloc(this,sizeof(struct Person)*n);

    this[n-1].name=strdup(name);
    this[n-1].sex=sex;
    this[n-1].age=age;
    this[n-1].ancestor=&this[n-2];

    printf("pushing new person onto stack\n");
    printf("stack increasing to %d\n",this->n);
    p_person(&this[n-1]);

    this->n=this->n+1;
    /*p_person(this[n-1].ancestor); //it works*/
    printf("----------------\n\n");

    return this;
}

struct Person *popPerson(struct Person *this)
{
    assert(this!=NULL);
    printf("Person being popped:\n");
    p_person(&this[this->n-1]);
    printf("resizing stack to %d\n", this->n-2);
    printf("----------------\n\n");
    free(this[this->n-1].name);
    int n=this->n-1;
    this=realloc(this,sizeof(struct Person)*n);

    this->n=this->n-1;

    return this;
}

void p_person(struct Person *this)
{
    printf("Name: %s\n",this->name);
    printf("Sex: %c\n",this->sex);
    printf("Age: %d\n",this->age);
}

void p_person_stack(struct Person *this)
{
    printf("printing stack...........\n");
    struct Person *current;
    int i;
    for(i=1;i<this->n;i++)
    {
        current=&this[i];
        p_person(current);
        printf("---------\n");
    }
    printf("stack printed~~~~~~~~~~\n\n");
}

void d_person_stack(struct Person *this)
{
    int i;
    for(i=0;i<this->n;i++)
        free(this[i].name);
    free(this);
}

int main(int argc, char *argv[])
{
    struct Person *people=stack_init();

    people=pushPerson(people,"Mojo jojo", 'M', 33);
    people=pushPerson(people,"Ali Zaheeruddin", 'M', 24);
    people=pushPerson(people,"Mahdi Moosa", 'M', 24);
    people=pushPerson(people,"Solid Snake", 'M', 51);  

    d_person_stack(people);

    return 0;
} 
```

p_person(&people[n]) 工作正常，没有 valgrind 抱怨 n 在堆栈范围内的位置

p_person(people[n].ancestor) 使 valgrind 抱怨大小为 x 的无效读取，具体取决于它在结构中读取的内容 Person 例如 char sex 将为 x=1 例外情况是当 n 是堆栈的末尾时（4在这种情况下）valgrind 不会抱怨，对于所有 n 的情况，结果都会被打印出来。

这是一个例子，如果我做 p_person(people[n].ancestor) 其中 n 小于堆栈的末尾，valgrind 会说什么

大小为 8 的无效读取 姓名：Ali Zaheeruddin 大小为 1 的无效读取 性别：M 大小为 4 的无效读取 年龄：24

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:01:10.770

```
this[n-1].ancestor=&this[n-2]; 
```

当数组中有 0 或 1 个现有元素时，n-2 会低于数组的开头，导致对该地址（8 个字节）的内存进行无效读取。

# php - die() 会在 PHP 中结束您的会话吗？

> ID：14870057
> 
> 赞同：12
> 
> 时间：2013-02-14T07:46:53.593
> 
> 标签：php

如果我执行：

```
die(); 
```

它是否也会有效地调用

```
session_write_close(); 
```

因为 die 停止了整个过程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T07:56:48.500

不。正如您在 PHP 页面上看到的那样：[http](http://www.php.net/manual/en/function.exit.php) ://www.php.net/manual/en/function.exit.php （因为*die*相当于*exit*）

> 即使调用了 exit ，也将始终执行关闭函数和对象析构函数。

但是， session_write_close 不是关闭功能。如果您“死”，它将不会运行。我建议您查看**session_register_shutdown**。这会将 session_write_close() 注册为关闭函数，在这种情况下，它将在“die”上运行。

更多信息：[http ://www.php.net/manual/en/function.session-register-shutdown.php](http://www.php.net/manual/en/function.session-register-shutdown.php)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T07:53:17.980

[`die`](http://www.php.net/manual/en/function.die.php)并且[`exit`](http://www.php.net/manual/en/function.exit.php)是等价的。从文档：

> 终止脚本的执行。即使调用了 exit ，也将始终执行关闭函数和对象析构函数。

所以php仍然会去清理例程。无论如何，如果你想在脚本关闭时做一些自定义的事情，你可以使用[`register_shutdown_function`](http://www.php.net/manual/en/function.register-shutdown-function.php).

```
function shutdown()
{
    //Some custom clean-up, logging and so on
}

register_shutdown_function('shutdown'); 
```

**注意：**如果您注册自定义关闭功能，它也会在*发生致命错误*时调用。

# c++ - 基于 32 位和 64 位系统的 C 或 C++ 语言的数据类型大小有何不同

> ID：14870064
> 
> 赞同：2
> 
> 时间：2013-02-14T07:47:17.600
> 
> 标签：c++, c, types, 32bit-64bit

对于 32 位和 64 位系统上的 C 和 C++ 语言的数据类型大小，我几乎没有什么基本问题。我未能在网上得到令人信服的答案，我的问题是。

*   说对于 C++ 语言，数据类型大小是否取决于，
    *   编译器是32位还是64位
    *   计算机架构是32位还是64位
    *   或者，用于 32 位和 64 位系统的 C++ 语言标准。

提前致谢。

问候，维杰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:51:04.473

它们实际上取决于一切，甚至可能取决于编译器标志，所以不要做出假设。要么查找目标平台的文档，要么（在整数的情况下）使用固定宽度的标准类型（`<stdint.h>`在 C 中，`<cstdint>`在 C++ 中）。

# wcf - 调试时从 WCF 服务进入 C DLL

> ID：14870067
> 
> 赞同：0
> 
> 时间：2013-02-14T07:47:42.390
> 
> 标签：wcf, debugging, vba, com, mfc

我做了一个 WCF 服务库项目。我添加了一个 c++ DLL 的引用。WCF 服务公开的方法调用 c++ DLL 函数。客户端是用 VBA(excel) 编写的，我无法进入整个 C++ 代码调试。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:32:38.133

我修好了它。将 C++ 项目添加到 WCF 服务的相同解决方案中并且它工作

# sql-server - 比较没有嵌套 for 循环的行

> ID：14870068
> 
> 赞同：0
> 
> 时间：2013-02-14T07:47:42.950
> 
> 标签：sql-server

我在 mssql 中有一个表，因为我对 sql 有点陌生，所以我遇到了一个问题。该表由以下数据组成。

```
 ID     |     Long     |     Lat      |     TimeStamp
-----------+--------------+--------------+------------------    
    123    |      54      |     18       |    2012-12-02...       
    143    |      31      |     35       |    2011-09-14...
    322    |      53      |     19       |    2012-11-29... 
```

等等...

我写了一个布尔函数，它检查一对长和纬度的条件。我还编写了一个函数，它给出了一对经纬度之间的距离。我想要做的是添加一个与最接近当前行的行的距离的列，并且还通过布尔函数并且在时间上彼此足够接近。数据库表由几百万行组成，因此我避免使用嵌套的 for 循环，你们将如何处理这个大数据集？mssql 有一些聪明的方法吗？

欢迎所有帮助<3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:10:08.843

您基本上需要将函数中的 100 万条记录与 100 万条其他记录进行比较，从而为您提供 1 万亿个值。在我看来，SQL 并不能真正帮助您管理那么多记录，因此您必须自己做一些工作，而且一次只能做一些工作。可能有更好的方法，但我会执行以下操作：

1.  将以下列添加到表中：`calculated` `destination`,`distance`
2.  定期运行算法或添加新记录。该算法只需要为`calculated`错误的记录运行。

该算法可以工作如下：

1.  使用当前记录，遍历具有`calculated`as的每个记录`true`并计算到该位置的距离。如果该位置是迄今为止最短的，则设置一个变量来临时存储`destination`and `distance`。
2.  循环结束后，你有最短的`destination`和`distance`当前的位置。在数据库中更新它并将`calculated`标志设置为`true`.
3.  现在将此距离与目的地记录中的距离进行比较。如果它更短，也更新该记录。

# html - 将数据存储在 HTML 文件中

> ID：14870071
> 
> 赞同：0
> 
> 时间：2013-02-14T07:47:49.747
> 
> 标签：html

想知道以下情况是否可能 -

我有一些数据在 excel 文件中。我想制作一个 html 页面，其中包含这些数据（没有其他数据源）。在 Html 页面内，我是否能够放置文本字段、按钮等供用户输入数据，并基于此，我需要编写查询（我猜是 jqueries）来显示作为这些查询结果的数据

这可以做到吗？到目前为止，我还没有做任何事情。我只是想知道这是否可能，请有人指出正确的方向让我开始。我想自己学习如何做到这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T07:49:46.730

HTML 是一种标记语言 - 它是网页的结构，没有用于存储或处理动态数据的机制。

您将不得不使用客户端语言 JavaScript + cookie，或像 PHP + MySQL 这样的服务器端语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:56:15.870

你想看看在页面中使用 JavaScript。在服务器上（我想）你需要读取 Excel 文件，并在页面上生成包含值的 JS 对象。也就是说，JS 在运行时会创建一个包含其中值的 JS 对象的集合。该脚本可以嵌入到页面中，因此不需要其他数据访问。

然后，您可以编写更多链接到从这些对象中选择数据的按钮的 JS，并将它们显示在页面上。你可能不想从头开始做这件事——有很好的 JS 库和框架可以利用。考虑 GWM 或 YUI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:44:57.563

也许最简单的方法是在 Excel 中打开文件并将其保存为文本（制表符分隔；逗号分隔也可以），然后将此文本数据插入 HTML 文档的标签`<script type="text/plain">`和`</script>`. 然后，您可以以一种相当直接的方式编写 JavaScript 代码，该代码读取该元素的内容并从中构造一个 JavaScript 对象数组（或一些其他合适的数据结构）。然后很容易在 JavaScript 中访问数据。

这将使运行查询和显示数据成为可能。修改数据将是完全不同的事情。

# jquery - 通过代码定义 jQuery Mobile 的版本

> ID：14870078
> 
> 赞同：0
> 
> 时间：2013-02-14T07:48:22.430
> 
> 标签：jquery, url, jquery-mobile, cdn, google-cdn

如何找到 [最新版本的jQuery Mobile 日期：Wed Feb 13 23:27:57 2013 -0500](http://code.jquery.com/mobile/latest/jquery.mobile.min.js)的版本号？

那不是我在其他任何地方都可以找到的文件，试着用谷歌搜索它。

我需要该文件的固定 CDN url 路径，因此它在最近的将来会完全转到此版本，而不是最新版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:11:41.080

**编辑 1**

实际上版本可以在文件中找到，打开文件并搜索版本。在您的问题中，您会发现 jQuery 库的版本为："1.3.0-rc.1"

**旧答案**

您是否尝试过[http://jquerymobile.com/download/](http://jquerymobile.com/download/)页面？您可以指定版本，而不是使用“最新”版本，例如：

[http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js](http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-04T13:56:19.253

打开 jQuery 文件，即 jquery.mobile.min.js 或 jquery.mobile.js。文件顶部，在评论中，它会告诉你它的版本号是这样的：

```
/*! jQuery Mobile 1.4.2 | Git HEAD hash: 9d9a42a <> 2014-02-28T17:32:01Z | (c) 2010, 2014 jQuery Foundation, Inc. | jquery.org/license */ 
```

# msbuild - BuildServer 上没有 Visual Studio 2012 的异步目标包

> ID：14870081
> 
> 赞同：0
> 
> 时间：2013-02-14T07:48:33.740
> 
> 标签：msbuild, visual-studio-2012, async-await, build-server

我正在使用没有安装任何 Visual Studio 的 Buildserver。我使用 TeamCity 和 msbuild Agent 来构建我的应用程序。现在，我需要使用 Async Targeting Pack 来使用 async/await（我无法将应用程序更新到 .NET 4.5，因为它必须在 Windows XP 机器上运行）。

现在，我正在寻找一种方法来继续在这台机器上构建我的应用程序并引用异步目标包但不安装 Visual Studio 2012。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:13:24.950

Aync 目标包现在在 NuGet 上：http: [//nuget.org/packages/Microsoft.Bcl.Async](http://nuget.org/packages/Microsoft.Bcl.Async)

您可以从您的项目中引用该包，这应该使其可以在您的构建服务器上运行，而无需安装 Visual Studio 扩展。

# liferay - Liferay 购物 portlet 和 taglib 的类别集成

> ID：14870084
> 
> 赞同：0
> 
> 时间：2013-02-14T07:48:37.673
> 
> 标签：liferay, taglib, shopping

我的任务是将类别和标签集成到购物项目中，以便我可以使用类别和标签导航让用户对它们进行排序。

我已经成功地实现了标签，它们工作得很好。但是，当我对类别使用相同的方法时，出现了问题，单击类别导航中的类别名称会导致“找不到该类别”。错误信息。具体来说，添加 `<supported-public-render-parameter>categoryId</supported-public-render-parameter` 到portlet-ext.xml 之后。我假设在内部购物 portlet 类别实现中与“categoryId”存在一些名称冲突。

刚刚花了 3 天时间挖掘资源，但仍然不知道该去哪里。

任何建议或“挖掘方向”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:38:18.250

哦，终于自己想通了。Shopping portlet 使用相同的“categoryId”参数并始终检查它。当然，Category Navigation 添加了它自己的“categoryId”参数，并且购物 portlet 无法通过检查并引发异常。

# ios - 获取拖动精灵所在的平铺位置

> ID：14870087
> 
> 赞同：0
> 
> 时间：2013-02-14T07:48:46.883
> 
> 标签：ios, cocos2d-iphone

请帮助我，我被困在：

我正在通过 - (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event 移动精灵

在 40X30 瓷砖尺寸的瓷砖地图上，我想获取我的精灵当前停止的瓷砖位置，并将该精灵设置在该瓷砖上，就像文字史密斯游戏一样。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T07:56:05.227

如果`TILES_X`并且`TILES_Y`是地图上水平和垂直瓦片的数量，这样的事情应该可以解决问题：

编辑：添加`TILE_WIDTH`&`TILE_HEIGHT`以更正位置计算

```
CGPoint position = [sprite position];

// get x and y in tile coordinates
int xTile = position.x / TILES_X;
int yTile = position.y / TILES_Y;

// 'snap' position to tiles
position.x = xTile * TILE_WIDTH;
position.y = yTile * TILE_HEIGHT;
[sprite setPosition:position]; 
```

# c++ - 如何使用 OpenCV 2.4.3 imRotate？

> ID：14870089
> 
> 赞同：4
> 
> 时间：2013-02-14T07:48:54.293
> 
> 标签：c++, opencv, image-processing, rotation

如何使用**OpenCV 2.4.3**实现 imrotate(Mat src,Mat dst,double angle) ？有一个函数**warpAffine()**但它做的更多而且令人困惑。它会裁剪超出范围的内容。

我想让它做一个更大的画布来适应一切。并用黑色填充空白点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T11:45:19.313

我是这样解决的。感谢您的回答。

```
Mat rotateImage(const Mat source, double angle,int border=20)
{
    Mat bordered_source;
    int top,bottom,left,right;
    top=bottom=left=right=border;
    copyMakeBorder( source, bordered_source, top, bottom, left, right, BORDER_CONSTANT,cv::Scalar() );
    Point2f src_center(bordered_source.cols/2.0F, bordered_source.rows/2.0F);
    Mat rot_mat = getRotationMatrix2D(src_center, angle, 1.0);
    Mat dst;
    warpAffine(bordered_source, dst, rot_mat, bordered_source.size());  
    return dst;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:33:58.420

对原始图像使用`copyMakeBorder`scalarAll(0)，然后使用旋转矩阵并使用`warpAffine`. 边框应该足够大以包含旋转后的图像。`warpAffine`与`CV_WARP_FILL_OUTLIERS`, 再次与 scalarAll(0) 一起使用

# linux - 重击 ls | 排序描述 | 取（n）？

> ID：14870093
> 
> 赞同：3
> 
> 时间：2013-02-14T07:49:06.663
> 
> 标签：linux, bash

什么是`ls`按日期降序排序[（](http://msdn.microsoft.com/en-us/library/bb503062.aspx) 4）文件之类的简短方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-14T07:54:01.340

使用`ls -rt | head -n 4`——按时间排序，倒序，抓取前4行

# c++ - 如何在 Windows 7 64 位上设置 MinGw？

> ID：14870097
> 
> 赞同：6
> 
> 时间：2013-02-14T07:49:27.660
> 
> 标签：c++, gcc

在我投反对票之前，我想说我是一个对 C++ 编程有浓厚兴趣的机械人。直到今天，我一直使用 VS 2010 Express & Qt Creator 来满足我的需求。但现在我想在 MinGw 中编译 Qt Creator，因为标准 SDK 仅适用于 32 位。我曾尝试在 MinGW wiki、sourceforge、博客等上搜索明确的说明。但这种语言对我来说几乎是可以理解的。我想要一个标准 C++ 编译器，它可以在我的 Windows 7 64 位笔记本电脑上编译 64 位和 32 位应用程序。最后我下载了

[http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Automated%20Builds/mingw-w32-bin_i686-mingw_20111219.zip/download](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win32/Automated%20Builds/mingw-w32-bin_i686-mingw_20111219.zip/download)

当我把它解压到 C:/MinGw64\. 目标类似于 x86_64-w64-mingw32-gcc.exe、x86_64-w64-mingw32-g++.exe。我将它们添加到 PATH Env 变量中，它编译了我的程序，但名称太长了。此处验证的步骤： [Windows 7 上的 OpenCV 2.4 和 MinGW 入门](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)

在正确答案中，命令是 "g++ -I"C:\opencv\build\include" -L"C:\opencv\build\x86\mingw\lib" loadimg.cpp -lopencv_core243 -lopencv_highgui243 -o loadimg" 但这对我不起作用。我必须输入“x86_64-w64-mingw32-g++”进行编译。我做错什么了吗？& 我用哪个来编译 32 位应用程序？

对不起，如果这对你们来说是一个非常愚蠢的问题，但我对这些东西很陌生。谢谢你1

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T07:57:18.517

`x86_64-w64-mingw32-g++`是编译器的名称，其中应用了目标体系结构的名称。这是为了区分一台机器上不同版本的 gcc。当您没有安装任何其他 gcc 时，您可以将 x86_64-w64-mingw32-g++ 复制到 g++ 并将 x86_64-w64-mingw32-gcc 复制到 gcc。

您可以检查是否有其他版本的 gcc，是否打开终端（开始->运行->cmd），然后在此处键入`gcc -dumpmachine`. 如果它说的内容听起来像是 32 位编译器，则说明您在某处安装了 32 位编译器。如果它说它是一个 64 位编译器，那你什么都做不了。如果它说没有 gcc，你必须复制 x86_64-w64-mingw32* 编译器并将它们的路径添加到系统路径。

# ruby-on-rails - 将实例变量传递给视图

> ID：14870128
> 
> 赞同：0
> 
> 时间：2013-02-14T07:51:22.163
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我在我的控制器中进行了一个 API 调用，它返回一个记录列表，并将响应设置为等于我在视图中调用的实例变量。

我的控制器：

```
@products = Product.find(:all)
    @products.each do |product|
        url          = URI.parse("url{product.id}")
        @response1      = JSON.parse(Net::HTTP.get_response(url).body)
        puts @response1
        @title          = @response1["ProductName"]
        @url            = @response1["ProductUrl"]
    end 
```

我的观点：

```
<div class= "title"><small><b><%= link_to truncate( @title, :length =>30), :target => '_blank' %></b></small></div> 
```

这仅显示收到的响应之一。如何显示在我的视图中收到的所有回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:55:21.183

您可以直接在视图中执行，而不是迭代控制器中的响应。

但是，最好在控制器中组装一个数组并在视图中对其进行迭代，这样可以避免给视图过多的责任，例如：

```
@products = Product.find(:all)
@products_with_Responses = @products.map do |product|
  url = URI.parse("url{product.id}")      
  response = JSON.parse(Net::HTTP.get_response(url).body) 
  {:title          => response["ProductName"],
   :url            => response["ProductUrl"]}
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:56:37.253

您在 @products.each 的每次迭代中重新分配 @response1 和所有其他变量，因此它具有最后一个产品的值。在输出期间，您必须在视图内执行此类循环。

像这样：

```
<% @products.each do |product| %>
  <% @response1 = JSON.parse(Net::HTTP.get_response(URI.parse("url{product.id}")).body) %>
  <div class= "title">
    <small>
      <b>
        <%= link_to truncate( @response1["ProductName"], :length =>30), @response1["ProductUrl"], :target => '_blank' %>
      </b>
    </small>
  </div>
<% end %> 
```

# regular-language - 在 DFA（确定性有限自动机）的定义中，“δ:Q×Σ→Q”如何解读？

> ID：14870130
> 
> 赞同：7
> 
> 时间：2013-02-14T07:51:29.530
> 
> 标签：regular-language, finite-automata, dfa, deterministic

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-18T16:03:57.060

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T08:40:58.060

抱歉，如果条款不完全正确（英文）。大约 3 或 4 年前，我用不同的语言研究过自动机理论，因此这些术语可能并不完全准确。

δ 就像一个带有两个参数的偏函数，它将状态（该自动机的状态；Q 的元素）和“输入动作”（Σ 的元素，它是自动机* 接受的字母表）作为输入并产生新的状态自动机在提供输入动作后应该有。

基本上这可以读作：

> 在 Q 组自动机状态和 sigma 字母表上定义的 delta 转换函数

公式中的 × 表示状态和动作集的[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)，而 → 表示函数返回的内容属于它后面的集合（在您的情况下为 Q）。

*不要与自动机接受的语言相混淆，这将是所有具有有效转换的“输入动作”序列（即定义了 δ(stateX, input)）并引导自动机进入最终的“可接受”状态。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T17:28:16.817

> 从 cue cross sigma 到 cue 的 Delta

或者

> 转换函数 delta 将有序的状态对和输入符号 cue cross sigma 映射到状态 cue。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T08:22:59.913

[从维基百科](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)很容易引用：

δ 是状态转换表：我会将“×”读作表，将“→”读作该表中的条目。

然后用自然语言：指定机器处于指定状态并看到定义的符号（Σ 的元素）将导致哪种状态（Q 的元素）。

# maven-2 - Intellij doesn't load repositories from SonaType repo

> ID：14870135
> 
> 赞同：6
> 
> 时间：2013-02-14T07:51:40.553
> 
> 标签：maven-2, intellij-idea, repository, sonatype

for some reason I cant get Intellij to load repositories from Sonatype. in settings->maven-> repositories I do Add->insert the url "[https://oss.sonatype.org/content/repositories/snapshots](https://oss.sonatype.org/content/repositories/snapshots)"->Ok

then I press the "Test" button - and I get the message "No repositories found".

I dont know what more information to give... please help.

# c++ - Objective-C 属性如何与 C++ 对象一起使用

> ID：14870136
> 
> 赞同：1
> 
> 时间：2013-02-14T07:51:43.920
> 
> 标签：c++, objective-c, objective-c++

所以我真的很好奇不同类型的属性如何与 C++ 对象一起工作。

例如说我有一个我这样声明的属性：

```
@property (atomic,assign) myClass::sp_t propertyName; 
```

当我调用 setter 方法时如何处理这个对象？它是简单地使用 operator=() 分配，从而允许类使用它的 operator=() 方法复制自身吗？

不过，似乎对 C++ 对象属性进行了一些特殊处理，因为我在编译测试程序时遇到了链接器错误。

```
Symbol not found: _objc_copyCppObjectAtomic 
```

这是一个分配属性，那么这里到底发生了什么？

对于 C++ 对象，生成的 getter 和 setter 是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T07:36:49.883

限定符只是告诉编译器生成一个赋值语句，而不涉及`assign`到 Objective-C 的内存管理方面，所以`operator=()`不会被调用。如果您需要调用它，请覆盖设置器并自己执行此操作。至于`atomic`限定符，编译器应该生成一个带有签名的特殊内联函数

```
void objc_copyCppObjectAtomic(void *dest, const void *src, void (*copyHelper) (void *dest, const void *source)); 
```

它只是一个原子设置器，默认情况下为对象执行安全的指针分配，但可以为它[提供一个新的处理程序](https://github.com/j4n0/objc4-532/blob/master/test/atomicProperty.mm)以非常轻松地支持自定义分配。

该链接器错误是旧版本的 clang 中的一个错误，它阻止了编译器找到并内联该特殊 setter 函数。

# hadoop - Sqoop 导出错误 - 原因：org.apache.hadoop.mapreduce.lib.input.InvalidInputException：输入路径不存在

> ID：14870139
> 
> 赞同：0
> 
> 时间：2013-02-14T07:51:55.870
> 
> 标签：hadoop, export, hive, sqoop

我正在开发一个java程序。

java程序将数据从hive导出到mysql。

首先，我编写代码

```
ProcessBuilder pb = new ProcessBuilder("sqoop-export", "export", 
         "--connect",               "jdbc:mysql://localhost/mydb", 
         "--hadoop-home",    "/home/yoonhok/development/hadoop-1.1.1", 
         "--table",                    "mytable", 
         "--export-dir",            "/user/hive/warehouse/tbl_2", 
         "--username",            "yoonhok", 
         "--password",            "1234");

try {
    Process p = pb.start();
    if (p.waitFor() != 0) {
        System.out.println("Error: sqoop-export failed.");
        return false;
    }
} catch (IOException e) {
    e.printStackTrace();
} catch (InterruptedException e) {
    e.printStackTrace();
} 
```

它完美地工作。

但我学会了一种在 java 中使用 sqoop 的新方法。

Sqoop 还不支持客户端 api。

所以我添加了 sqoop lib，只写了 Sqoop.run()

其次，我用新的方式再次编写代码。

```
String[] str = {"export", 
     "--connect",               "jdbc:mysql://localhost/mydb", 
     "--hadoop-home",    "/home/yoonhok/development/hadoop-1.1.1", 
     "--table",                    "mytable", 
     "--export-dir",            "/user/hive/warehouse/tbl_2", 
     "--username",            "yoonhok", 
     "--password",            "1234"
};

if (Sqoop.runTool(str) == 1) {
     System.out.println("Error: sqoop-export failed.");
     return false;
} 
```

但它没有运行。

我有错误......

```
13/02/14 16:17:09 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead. 
13/02/14 17:43:12 WARN sqoop.ConnFactory: $SQOOP_CONF_DIR has not been set in the environment. Cannot check for additional configuration.
13/02/14 16:17:09 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset. 
13/02/14 16:17:09 INFO tool.CodeGenTool: Beginning code generation 
13/02/14 16:17:09 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_2` AS t LIMIT 1 
13/02/14 16:17:09 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_2` AS t LIMIT 1 
13/02/14 16:17:09 INFO orm.CompilationManager: HADOOP_HOME is /home/yoonhok/development/hadoop-1.1.1 
Note: /tmp/sqoop-yoonhok/compile/45dd1a113123726796a4ed4ce10c9110/tbl_2.java uses or overrides a deprecated API. 
Note: Recompile with -Xlint:deprecation for details. 
13/02/14 16:17:10 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-yoonhok/compile/45dd1a113123726796a4ed4ce10c9110/tbl_2.jar 
13/02/14 16:17:10 INFO mapreduce.ExportJobBase: Beginning export of tbl_2 
13/02/14 16:17:10 WARN mapreduce.ExportJobBase: Input path file:/user/hive/warehouse/tbl_2 does not exist 
13/02/14 16:17:11 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable 
13/02/14 16:17:11 INFO mapred.JobClient: Cleaning up the staging area file:/tmp/hadoop-yoonhok/mapred/staging/yoonhok314601126/.staging/job_local_0001 
13/02/14 16:17:11 ERROR security.UserGroupInformation: PriviledgedActionException as:yoonhok cause:org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/user/hive/warehouse/tbl_2 
13/02/14 16:17:11 ERROR tool.ExportTool: Encountered IOException running export job: org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/user/hive/warehouse/tbl_2 
```

我看见`$SQOOP_CONF_DIR has not been set in the environment.`

所以我加了

> SQOOP_CONF_DIR=/home/yoonhok/development/sqoop-1.4.2.bin__hadoop-1.0.0/conf

在里面

> /etc/环境

再试一次，但错误...

```
13/02/14 16:17:09 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead. 
13/02/14 16:17:09 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset. 
13/02/14 16:17:09 INFO tool.CodeGenTool: Beginning code generation 
13/02/14 16:17:09 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_2` AS t LIMIT 1 
13/02/14 16:17:09 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_2` AS t LIMIT 1 
13/02/14 16:17:09 INFO orm.CompilationManager: HADOOP_HOME is /home/yoonhok/development/hadoop-1.1.1 
Note: /tmp/sqoop-yoonhok/compile/45dd1a113123726796a4ed4ce10c9110/tbl_2.java uses or overrides a deprecated API. 
Note: Recompile with -Xlint:deprecation for details. 
13/02/14 16:17:10 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-yoonhok/compile/45dd1a113123726796a4ed4ce10c9110/tbl_2.jar 
13/02/14 16:17:10 INFO mapreduce.ExportJobBase: Beginning export of tbl_2 
13/02/14 16:17:10 WARN mapreduce.ExportJobBase: Input path file:/user/hive/warehouse/tbl_2 does not exist 
13/02/14 16:17:11 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable 
13/02/14 16:17:11 INFO mapred.JobClient: Cleaning up the staging area file:/tmp/hadoop-yoonhok/mapred/staging/yoonhok314601126/.staging/job_local_0001 
13/02/14 16:17:11 ERROR security.UserGroupInformation: PriviledgedActionException as:yoonhok cause:org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/user/hive/warehouse/tbl_2 
13/02/14 16:17:11 ERROR tool.ExportTool: Encountered IOException running export job: org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/user/hive/warehouse/tbl_2 
```

我认为 Export-dir 是个问题。

我使用“/user/hive/warehouse/tbl_2”。

当我运行“hadoop fs -ls /user/hive/warehouse/”时，表“tbl_2”存在。

我觉得

“输入路径不存在：**文件**：/user/hive/warehouse/tbl_2”不正确。

“输入路径不存在：**hdfs** :/user/hive/warehouse/tbl_2”没问题。

但我不知道我该如何解决它。

* * *

好吧，就在我得到提示之前。

我编辑了**'export-dir'**

```
--export-dir   hdfs://localhost:9000/user/hive/warehouse/tbl_2 
```

但是...这是错误... TT

```
13/02/15 15:17:20 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.
13/02/15 15:17:20 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset.
13/02/15 15:17:20 INFO tool.CodeGenTool: Beginning code generation
13/02/15 15:17:20 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_2` AS t LIMIT 1
13/02/15 15:17:20 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_2` AS t LIMIT 1
13/02/15 15:17:20 INFO orm.CompilationManager: HADOOP_HOME is /home/yoonhok/development/hadoop-1.1.1/libexec/..
Note: /tmp/sqoop-yoonhok/compile/697590ee9b90c022fb8518b8a6f1d86b/tbl_2.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
13/02/15 15:17:22 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-yoonhok/compile/697590ee9b90c022fb8518b8a6f1d86b/tbl_2.jar
13/02/15 15:17:22 INFO mapreduce.ExportJobBase: Beginning export of tbl_2
13/02/15 15:17:22 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
13/02/15 15:17:23 INFO input.FileInputFormat: Total input paths to process : 1
13/02/15 15:17:23 INFO input.FileInputFormat: Total input paths to process : 1
13/02/15 15:17:23 INFO mapred.JobClient: Cleaning up the staging area file:/tmp/hadoop-yoonhok/mapred/staging/yoonhok922915382/.staging/job_local_0001
13/02/15 15:17:23 ERROR security.UserGroupInformation: PriviledgedActionException as:yoonhok cause:java.io.FileNotFoundException: File /user/hive/warehouse/tbl_2/000000_0 does not exist.
13/02/15 15:17:23 ERROR tool.ExportTool: Encountered IOException running export job: java.io.FileNotFoundException: File /user/hive/warehouse/tbl_2/000000_0 does not exist. 
```

当我检查hdfs时，

```
hadoop fs -ls /user/hive/warehouse/tbl_2 
```

或者

```
hadoop fs -ls hdfs://localhost:9000/user/hive/warehouse/tbl_2 
```

该文件存在。

> -rw-r--r-- 1 yoonhok 超级组 14029022 2013-02-15 12:16 /user/hive/warehouse/tbl_2/000000_0

我在终端的shell命令中尝试

```
sqoop-export --connect jdbc:mysql://localhost/detector --table tbl_2 --export-dir hdfs://localhost:9000/user/hive/warehouse/tbl_2 --username yoonhok --password 1234 
```

这是工作。

什么问题？

我不知道。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T00:46:32.193

您需要加载并提供您的 Hadoop 配置文件。默认情况下，它们是从类路径中读取的，但您可以通过[Configuration.setDefaultResource](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/conf/Configuration.html#addDefaultResource%28java.lang.String%29)覆盖它（没有保证）。

# java - 无法从 SQLite 检索数据

> ID：14870144
> 
> 赞同：0
> 
> 时间：2013-02-14T07:52:30.190
> 
> 标签：java, android, eclipse, sqlite

请看下面的代码

**数据库处理程序.java**

用于检索数据的代码

```
public List<String> getAllBranches() {
        // TODO Auto-generated method stub

        String selectQuery = "select city from BranchNetwork";

        Cursor cursor = database.rawQuery(selectQuery, null);
        List <String>branches = new ArrayList<String>();

        if(cursor.isFirst())
        {
            do
            {

            }
            while(cursor.moveToNext());

            Toast.makeText(context, "Data Retrieved: "+branches.get(1), Toast.LENGTH_LONG).show();
        }

        return branches;
    } 
```

用于插入数据的代码

```
public String insertData(String city, String streetAddress,String phoneNumber1, String phoneNumber2, String email) 
    {
        String insertQuery = "insert into BranchNetwork ('city','streetAddress','phoneNumber1','phoneNumber2','email') values('"+city+"','"+streetAddress+"','"+phoneNumber1+"','"+phoneNumber2+"','"+email+"');";

        try
        {  
            database.execSQL(insertQuery);

            return "Data Successfully Inserted";

        }
        catch(Exception e)
        {
            Toast.makeText(context, "Exception: "+e.getMessage(), Toast.LENGTH_LONG).show();
            return "Data Insertion Failed";
        }

    } 
```

**表单.java**

第一个活动。在这里，我检索数据并插入数据。以下是我检索数据的方式

```
public class Form extends Activity {
    private List<String>branches = new ArrayList<String>();
        private DatabaseConnector databaseConnector;
    String[]arr;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_form);

            databaseConnector = DatabaseHandler.getInstance(this);
            databaseConnector.createConnection();

            branches = databaseConnector.getAllBranches();

             arr = branches.toArray(new String[branches.size()]);
    }
} 
```

但是，我什么都得不到！在 DatabaseHandler.java 中，我创建了一个`Toast`在检索代码时应该生成消息的位置。但它没有产生任何东西！我正在将数据加载到 a`ListView`但它也是空的！为什么是这样？请帮忙！

PS：下面是DatabaseConnector.java，DatabaseHandler的插入面

```
package com.example.esoftcallmanager;

import java.util.List;

import android.content.Context;

public interface DatabaseConnector 
{
    public void createConnection();
    public void closeConnection();
    public String getPhoneNumber();
    public String insertData(String city, String streetAddress, String phoneNumber1, String phoneNumber2, String email);
    public List<String>getAllBranches();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:56:53.853

如果您确定您的数据库已经有数据，请尝试更改`if(cursor.isFirst())`为`if(cursor.moveToFirst())`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T07:58:43.223

试试 cursor.moveToFirst() 条件

```
if(cursor.moveToFirst())
    {
        do
        {

        }
        while(cursor.moveToNext());

        Toast.makeText(context, "Data Retrieved: "+branches.get(1), Toast.LENGTH_LONG).show();
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:00:34.210

那是因为你并没有真正对数据做任何事情。

首先，您必须将光标的位置移动到自己的第一个位置： cursor.moveToFirst() 之后，您可以开始一个 while 循环，因为您正在尝试这样做。

其次，你从来没有真正将数据放在你的列表分支中，你必须先把光标中的数据放在那里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T08:02:29.293

希望这有效。

```
public List<String> getAllBranches() {
            // TODO Auto-generated method stub

            String selectQuery = "select city from BranchNetwork";
            Cursor cursor = database.rawQuery(selectQuery, null);
            List <String>branches = new ArrayList<String>();

             if(cursor != null){
              cursor.moveToFirst();

               Toast.makeText(context, "Data Retrieved: ", Toast.LENGTH_LONG).show();

              do
                {

                }
                while(cursor.moveToNext());

             }

                return branches;
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:02:30.417

您忘记在列表数组中添加数据。尝试如下：

> ```
>  String selectQuery = "select city from BranchNetwork";
>     Cursor cursor = database.rawQuery(selectQuery, null);
>     List <String> branches = new ArrayList<String>();
>     String str=null;
>     cursor.moveToFirst();
>         do
>        {
>          str= m_cursor.getString(m_cursor.getColumnIndex("city"));
>           branches.add(str);
>        }
>         while(cursor.moveToNext());
>         Toast.makeText(context, "Data Retrieved: "+branches.get(1), Toast.LENGTH_LONG).show();
>     }
>         return branches; 
> ```

# objective-c - 按扩展名注册新的 OS X 文件类型并与 Cocoa 应用程序关联

> ID：14870155
> 
> 赞同：3
> 
> 时间：2013-02-14T07:53:15.760
> 
> 标签：objective-c, macos, cocoa, package, plist

好的，所以这是交易：

*   我有一个新的应用程序，我想将它与一个新的文件类型相关联——比如说`.xyz`
*   `.xyz`文件 - 如果这很重要 - 是一个**包**文件。

现在，我的文件类型特定部分`info.plist`如下所示：

```
CFBundleDocumentTypes = (
        {   
            CFBundleTypeExtensions = ( "xyz" );
            CFBundleTypeIconFile = "xyz-icon";
            CFBundleTypeName = "XYZ file";
            CFBundleTypeRole = "Viewer";
            LSTypeIsPackage = "1";
        }
    ); 
```

但是，`.xyz`包文件仍显示为文件夹，而不是单个文件（“包”）。我究竟做错了什么？

* * *

***提示：**我过去曾设法做到这一点，但我根本不记得我是否遗漏了什么。也许必须重新启动系统？我不知道...*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-01-11T20:05:58.233

如果您发现此 stackoverflow 页面`LSTypeIsPackage`不适合您，可能是因为您正在使用`LSItemContentTypes`声明文档类型。的使用`LSItemContentTypes`使系统忽略`LSTypeIsPackage`（在这个stackoverflow问题中不是这种情况）。

如果您正在使用`LSItemContentTypes`，则需要使导出的类型符合`com.apple.package`. 例子：

```
CFBundleDocumentTypes
  LSItemContentTypes
    Item 0 = com.example.xyz
  CFBundleTypeExtensions
    Item 0 = xyz
  CFBundleTypeRole = Editor
  etc.

UTExportedTypeDeclarations
  Item 0
    UTTypeIdentifier = com.example.xyz
    UTTypeConformsTo
      Item 0 = public.data // or whatever
      Item 1 = com.apple.package          <-------------
    UTTypeDescription = XYZ Document
    etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-02T16:27:05.680

您需要导出您的类型。

```
UTExportedTypeDeclarations = (
  {
    UTTypeDescription = "Your File Type Description";
    UTTypeIconFile = "xyz-icon";
    UTTypeIdentifier = "your.uti.xyz"
    UTTypeTagSpecification = {
      public.filename-extension = ("xyz")
    }
  } 
```

免责声明：我习惯了 XML plist 语法，所以上面可能有语法错误，但它应该基本上是正确的结构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:22:37.030

我认为您必须设置“包位”，也称为“捆绑位”，以向操作系统发出该文件夹是一个包的信号。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-29T06:38:44.497

如果您安装您的应用程序，我相信您导出的类型（来自您的 Info.plist）会让系统知道您的包。

在开发过程中，您可能希望设置 Walt 提到的“包位”，例如：

```
 if !directoryURL.setResourceValue(true, forKey: NSURLIsPackageKey, error: &error) {
        println("Soft warning: cannot set package bit for \(directoryURL)")
    } 
```

因为我认为 Finder 不会在您的开发目录中查找新的通用类型。

# c# - 用棱镜设置数据上下文

> ID：14870157
> 
> 赞同：4
> 
> 时间：2013-02-14T07:53:18.023
> 
> 标签：c#, wpf, dependency-injection, prism, unity-container

我正在尝试使用 PRISM 创建一个模块，现在我在 View 中设置了 DataContext，这意味着我只能使用无参数构造函数，但这意味着我不能在我想要的构造函数中使用依赖注入（我使用 Unity）

如果可能的话，我不希望视图或虚拟机彼此了解并想使用类似的东西

```
private void RegisterServices()
{
    var employeeViewModel = new EmployeeViewModel();

    _container.RegisterType<IEmployeeViewModel, EmployeeViewModel>();
    _container.RegisterType<EmployeeView>();

    EmployeeView.Datacontext = employeeViewModel;
} 
```

我将在 EmployeeModule 中注册

这是可能的还是我应该使用后面的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T07:57:38.260

您可以将 的接口传递`ViewModel`给`View`构造函数中的 。这样，`View`只知道接口`ViewModel`，`ViewModel`对`View`.

前任。

```
public class EmployeeView : UserControl
{
    public EmployeeView(IEmployeeViewModel vm)
    {
         this.DataContext = vm; //// better to set the ViewModel in the Loaded method
    }
} 
```

有关 MVVM 实例化的多种方法，请参阅[此博客文章](http://www.paulstovell.com/mvvm-instantiation-approaches)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:09:05.967

[Prism 文档](http://msdn.microsoft.com/en-us/library/gg405494%28v=pandp.40%29.aspx)为您提供了一个选项

> 通常，您会发现定义控制器或服务类来协调视图和视图模型类的实例化很有用。这种方法可以与依赖注入容器一起使用，例如 MEF 或 Unity，或者当视图显式创建其所需的视图模型时。

对于我的模块，我将执行以下
操作为模块内的服务创建一个接口

```
public interface ICustomModuleUiService
{
    void ShowMainView();
    void ShowExtraView();
} 
```

同一模块中的生产实现：

```
class CustomModuleUiService : ICustomModuleUiService
{
    private readonly IEventAggregator _eventAggregator;

    public CustomModuleUiService(IEventAggregator eventAggregator)
    {
        _eventAggregator = eventAggregator;
    }

    public void ShowMainView()
    {
        var ddsViewModel = new DdsViewModel(_eventAggregator, this);
        DdsForm form = new DdsForm();
        form.DataContext = ddsViewModel;
        form.Show();
    }

    public void ShowExtraView()
    {
        //some code here
    }
} 
```

最后是模块代码

```
[ModuleExport("DssModule", typeof(DssModuleImpl))]
public class DssModuleImpl : IModule
{
    private readonly IEventAggregator _eventAggregator;
    private ICustomModuleUiService _uiService;

    [ImportingConstructor]
    public DssModuleImpl(IEventAggregator eventAggregator)
    {
        _eventAggregator = eventAggregator;
        _uiService = new CustomModuleUiService(_eventAggregator);
    }

    public void Initialize()
    {
        _eventAggregator.GetEvent<OpenDdsFormEvent>().Subscribe(param => _uiService.ShowMainView());
    }
} 
```

使用这种方法我会得到

*   ViewModel 可以进行单元测试
*   我可以通过替换 ICustomModuleUiService 的实现来动态更改对 OpenDdsFormEvent 的反应

# asp.net-mvc - 为什么我的 MVC 应用程序试图作为我的机器登录我的数据库，而不是作为应用程序池身份？

> ID：14870158
> 
> 赞同：12
> 
> 时间：2013-02-14T07:53:18.537
> 
> 标签：asp.net-mvc, database, asp.net-mvc-4, impersonation

当我尝试访问我新部署的（到 lcoal IIS 7.5）MVC4 应用程序时，我收到错误消息：

> 用户 'DOMAIN\MACHINE-NAME$' 登录失败

其中“$”是附加的，而不是机器名称的一部分。

web.config 中的连接字符串如下所示：

```
<add name="ComairRIEntities"
     connectionString="metadata=res://*/Data.ComairRI.csdl|res://*/Data.ComairRI.ssdl|res://*/Data.ComairRI.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=(local);initial catalog=MyDB;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;"
     providerName="System.Data.EntityClient" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T06:39:01.417

这是正在发生的事情：

在您的连接字符串中，您有以下设置：**integrated security=True** 这意味着 SQL Server 连接将使用启动连接的**进程的凭据进行身份验证。**由于您在 IIS 下运行并且 IIS 使用应用程序池，因此连接将通过运行应用程序池的 Windows 用户进行身份验证。默认情况下，这是一个几乎没有权限的用户，称为 NetworkService。NetworkService（或者在 IIS7.5 中可能是不同的）永远不会拥有对您的数据库的访问权限。您的特定场景的细微差别可能会有所不同，因为 IIS 中有一堆不同的安全继承，并且您的进程可能最终会出现一堆不同的用户，但是，基本问题是您有**Integrated security=True**并且运行 IIS 进程的用户是几乎没有权限的标准用户。

要解决此问题，您有几个选择：

1.  将 Integrated security=True 更改为 username\password 身份验证。这将 100% 解决，但您可能不想将密码明文存储在 web.config 文件中。
2.  在您的 IIS 虚拟目录设置中，将匿名用户配置为对您的数据库具有访问权限的有意义的用户。这最终会有所帮助，但您必须使用不同的设置才能正确设置。

如果您需要关于 #2 的更多帮助，您必须提供以下信息：

1.  AppPool 的身份
2.  虚拟目录的身份和虚拟目录的所有身份验证设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T09:28:05.633

这个问题有很多很好的信息：[Login failed for user 'DOMAIN\MACHINENAME$'](https://stackoverflow.com/questions/2806438/login-failed-for-user-domain-machinename)。

> 如果您看到用户 'DOMAIN\MACHINENAME$' 的登录失败，这意味着作为 NETWORK SERVICE 或 LocalSystem 运行的进程访问了远程资源，已将自己验证为机器帐户并被拒绝授权。

这里看起来很奇怪的是您仍在尝试访问本地数据库，但用户名`DOMAIN\MACHINENAME$`暗示它正在访问非本地数据库。

您确定您发布的连接字符串实际上是使用的连接字符串吗？

您可以考虑做的另一件事是为您的站点运行的应用程序池创建一个特定的用户帐户 - 它很可能需要读取和写入权限。

用户帐户的类型将取决于您的环境：如果您在域中运行，您可以创建一个域用户并继续`integrated security=True`在您的连接字符串中使用，或者如果不是，您可以使用 SQL 身份验证进行调查。

**编辑：**

我曾经遇到过这个确切的错误，做几乎完全相同的事情。在我的情况下，数据库位于单独的服务器上（即，与您的情况不同的机器），但解决方案是：

1.  创建域帐户。
2.  将其添加到 SQL Management Studio 中的 Security\Logins and Security\Users。
3.  在 SQL Management Studio 中为其提供角色成员`db_datareader`身份。`db_datawriter`
4.  在 Web 服务器上，运行`aspnet_regiis -ga domain\account_name`
5.  将此帐户设置为用于匿名访问的帐户。
6.  为此 Web 应用程序创建一个新的应用程序池。
7.  将应用程序池的标识设置为该帐户。

请注意，这是针对 IIS 6 的，因此如果您使用的是 IIS 7+，则可能不需要步骤 4、5 和 6。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T20:57:05.217

需要注意的一件事是`DOMAIN\MACHINE-NAME$`用于表示域上机器凭据的语法。与您拥有用户帐户的方式类似，还有一个几乎相同的机器帐户（除了权限显着不同）。

既然你得到`DOMAIN\MACHINE-NAME$`你没有模仿问题。首先要做的是查看应用程序池以查看它以什么身份运行。

您可以通过打开 IIS 管理器并选择应用程序池来执行此操作。接下来选择应用程序池并单击右侧的“查看应用程序”，这使您可以验证所有设置是否正确。

如果配置正确然后单击“高级设置...”，在“流程模型”标题下有一个“身份”字段，它应该是以下之一：

*   应用程序池身份
*   本地服务
*   本地系统
*   网络服务
*   域\帐户

如果它是 ApplicationPoolIdentity 它是按照您的预期设置的，如果它是非自定义的，否则您可能会得到`DOMAIN\MACHINE-NAME$`您所体验的。自定义帐户是值得怀疑的，因为它会显示为该帐户。

如果它是 ApplicationPoolIdentity 并且 SQL 机器不在同一台机器上（或者可能如果您使用主机名或 IP 地址），您可能会得到`DOMAIN\MACHINE-NAME$`，因为那是 ApplicationPoolIdentity 的网络凭据。ApplicationPoolIdentity`IIS AppPool\ApplicationPool`用于本地访问，但`DOMAIN\MACHINE-NAME$`用于远程访问，因为前者仅在本地可用。

还要确保您实际上使用的是确切的连接字符串，因为我在上面详细介绍了访问方法很重要的原因。

如果这不能解决它，如果您详细说明您设置的身份以及是否启用了 ASP.Net 模拟，将会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T09:41:06.060

你确定这个位需要有"吗？

```
 provider connection string=&quot 
```

它不应该像字符串的其余部分一样只是一个引号吗？

字符串的末尾也有一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-22T09:16:54.387

这是应用程序池标识在连接到 SQL Server 时显示的本地用户帐户。尝试更改应用程序池以使用网络服务并向您的数据库授予网络服务权限，或授予`IUSR_YOUR-MACHINE`数据库权限。当您在本地工作时，将网络服务 db_owner 设置为本地数据库可能会更容易。显然，在生产中这样做存在安全问题！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-25T18:49:18.663

检查您的应用程序的 AppPool 在 IIS 管理器中运行的标识。它可能是 AppPoolIdentity。然后检查您是否已在 SQL Server 中为该身份创建了一个登录名，它是否已映射到您的数据库，并且它是否具有应用程序所需的必要角色成员资格/权限。身份名称将为“IIS AppPool\[AppPoolName]”。（有关更多信息，请参阅[http://www.iis.net/learn/manage/configuring-security/application-pool-identities](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)）。

如果这不起作用，请说明您配置应用程序数据库连接的方式，包括是否启用了模拟。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-01T03:41:33.203

我将回顾以下内容。

而不是“数据源=（本地）”使用数据库所在的计算机名称。检查 DNS 解析以确保名称正确。

确保运行应用程序池的用户有权连接到数据库服务器。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-03-01T05:21:31.950

您需要将应用程序池身份添加到 sql server 作为登录名。阅读： [http ://www.iis.net/learn/manage/configuring-security/application-pool-identities-and-sql-server-express](http://www.iis.net/learn/manage/configuring-security/application-pool-identities-and-sql-server-express)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-20T12:08:47.243

只需转到 IIS 并创建一个新的应用程序池或更改当前的应用程序池。转到应用程序池的高级设置。在流程模型下，将身份更改为您要使用的用户，默认值为`ApplicationPoolIdentity`。然后转到您在 IIS 中的网站设置，选择基本设置并更改为新创建的应用程序池（如果已创建）。

1.  应用程序池=>高级设置=>更改身份
2.  站点=>默认网站=>您的站点=>基本设置=>如果不同则更改应用程序池

# javascript - 在第一次出现模式时停止并在 JavaScript 中搜索下一行

> ID：14870159
> 
> 赞同：0
> 
> 时间：2013-02-14T07:53:19.603
> 
> 标签：javascript, html, regex

```
function fun() {
    var temp = document.getElementById('DIV2').innerHTML;
    var str = temp;
    var res = str.replace(/(\s(\S*m)\s)/gi, ' <span class="red">$1</span> '); // 0.5 -- 1m -- etc 
    var res2 = res.replace(/\s(\S*metre)\s/gi, '<span class="red">$1</span> '); // 1meter 2meter
    var res3 = res.replace(/\s(\S\s*metre)\s/gi, '<span class="red">$1</span> '); // 1 meter 2 meter
    document.body.innerHTML = res3;
} 
```

```
<body>
    <div id="text">
    The Basic High Speed HDMI 0.5m Cables with Ethernet are 0.5m suitable for use with HDMI.
    Home Theater, 1m Games Consoles (including Nintendo Wii U), 1m Blu-rays, Cable or Satelite 1m boxes and Projectors. 
    HDMI Cables provides the most reliable digital signal transfer and the purest picture. 
    </div>
</html> 
```

上面的代码匹配`"0.5m, 1m, 1 metre"`字符串中的等，但它搜索一行中的所有出现，我想在模式的第一次出现时停止并在下一行继续。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:04:36.920

这应该做你想要的：

```
var s = "1m 2m 3m\n2m 1m 5m",
re = /^.*?([\d.]+(?:m|metre))/gim;

console.log(s.replace(re, '<span class="red">$1</span>'));

"<span class="red">1m</span> 2m 3m
<span class="red">2m</span> 1m 5m" 
```

它使用`/m`修饰符，因此`^`具有“行首”的含义，而不仅仅是“主题的开始”。然后，它会查找第一个匹配的内容`<digits-or-dot>m`并执行替换。

如果您的内容包含`<br>`，这些显然不会算作换行符，因此您需要先替换那些：

```
s = s.replace('<br>', "<br>\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:56:02.757

如何删除`g`正则表达式之后的？

# android - 如何为 weka 构建一个 arff 文件？

> ID：14870160
> 
> 赞同：2
> 
> 时间：2013-02-14T07:53:29.000
> 
> 标签：android, classification, weka, document-classification

我是 weka 的新手，我必须从社交网络中提取状态并使用 weka 分析它们，如何构建包含这些状态的 arff 文件？weka 是否包含词干、停用词和 n-gramm 的算法，或者我必须使用其他软件在开始分类之前消除不必要的数据？以及适用于 android 和 java 的 weka 的实用程序，这个软件的使用有什么不同吗……你们有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:14:12.170

我不知道脸书，但你可以在[这里](https://docs.google.com/file/d/0B1pvkpCwTsiSd1pyTFZkdWVRdEs5Q1NiQW1mRmF1Zw/edit?pli=1)使用 arff 文件获取推特数据 至于如何创建它们，网上有数百个教程：看看[这个](http://weka.wikispaces.com/Creating+an+ARFF+file)，看看它是否对你有帮助。

希望这可以帮助

雷切尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:24:08.127

您不必担心将数据保存为`arff`文件，因为 Weka 支持其他输入格式。您可以简单地将数据作为`csv`文件导入 Weka。您可以根据需要从 Weka 导出它`arff`。

有一个 Weka 到 android 的端口，你可以[在这里下载](https://github.com/rjmarsan/Weka-for-Android)，我确实在我的项目中使用它没有问题。您可以在 PC 中训练您的模型并将其导出，然后在 android 中使用它，[请在此处查看我的答案](https://stackoverflow.com/questions/14209510/loding-a-weka-model-to-a-java-code)以获取示例代码。

是的，Weka 支持[Stemmer 算法](http://weka.wikispaces.com/Stemmers)

# rest - 从 Java 客户端对 HTTPS 服务器的 RESTful 调用

> ID：14870163
> 
> 赞同：1
> 
> 时间：2013-02-14T07:53:50.877
> 
> 标签：rest, https

我在本地机器上配置了一个 Bobcat 服务器，分别在端口 8000 和 8001 上侦听 HTTP 和 HTTPS 请求。

虽然我可以从 Java 客户端使用 HTTP 调用 RESTful 服务 -

```
URL url = new URL("http://localhost:8000/helloworld");
HttpURLConnection connection = (HttpURLConnection)url.openConnection(); 
```

我无法使用 HttpsURLConnection 对象在端口 8001 上调用相同的服务。我是否需要配置 SSL 或获取安全证书之类的？

我的主要动机是开发 RESTful 服务，我使用 Web 客户端 (JSP) 来简单地测试服务。有人可以帮我使用 HTTPS 调用服务端点吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T09:55:12.223

您可以在 Firefox 上使用 RESTClient 插件进行测试。它允许您向端点发出所有 GET、POST 请求。

下载链接：[https ://addons.mozilla.org/en-us/firefox/addon/restclient/](https://addons.mozilla.org/en-us/firefox/addon/restclient/)

其他浏览器也可以使用类似的插件。我试过了 ：

高级休息客户端：谷歌浏览器

# mysql - 如何在 Mysql 查询中选择随机 ID

> ID：14870169
> 
> 赞同：0
> 
> 时间：2013-02-14T07:54:11.260
> 
> 标签：mysql, database, relationship

```
SELECT e.ent_seq, 
        GROUP_CONCAT(DISTINCT kei.keb SEPARATOR'; ')AS kebs, 
        GROUP_CONCAT(DISTINCT rei.reb SEPARATOR '; ') AS rebs,
        GROUP_CONCAT(DISTINCT sei.mean SEPARATOR '; ') AS means,
FROM entry e
    LEFT JOIN k_ele kei ON e.entry = kei.entry
    LEFT JOIN r_ele rei ON e.entry = rei.entry
    LEFT JOIN sense se ON e.entry = se.entry 
    LEFT JOIN s_gloss_eng sei ON se.SID = sei.SID
WHERE mn_null = 1
GROUP BY e.entry 
```

如何随机选择e.entry？e.entry 是一个整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T14:01:59.100

```
 SELECT e.ent_seq, 
    GROUP_CONCAT(DISTINCT kei.keb SEPARATOR'; ')AS kebs, 
    GROUP_CONCAT(DISTINCT rei.reb SEPARATOR '; ') AS rebs,
    GROUP_CONCAT(DISTINCT sei.mean SEPARATOR '; ') AS means

FROM entry e

LEFT JOIN k_ele kei ON e.entry = kei.entry
LEFT JOIN r_ele rei ON e.entry = rei.entry
LEFT JOIN sense se ON e.entry = se.entry 
LEFT JOIN s_gloss_eng sei ON se.SID = sei.SID

WHERE e.ent_seq IN (SELECT jt5.jlpt5_seq FROM jlptn5 jt5
                   WHERE jt5.jlpt5_null = 0
                   ORDER BY RAND())
GROUP BY e.entry    
ORDER BY RAND()
LIMIT 20 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T07:56:36.753

您可以使用此解决方案 -

```
SELECT e.ent_seq, 
        GROUP_CONCAT(DISTINCT kei.keb SEPARATOR'; ')AS kebs, 
        GROUP_CONCAT(DISTINCT rei.reb SEPARATOR '; ') AS rebs,
        GROUP_CONCAT(DISTINCT sei.mean SEPARATOR '; ') AS means,
FROM (SELECT * FROM entry ORDER BY RAND() LIMIT 1) e
    LEFT JOIN k_ele kei ON e.entry = kei.entry
    LEFT JOIN r_ele rei ON e.entry = rei.entry
    LEFT JOIN sense se ON e.entry = se.entry 
    LEFT JOIN s_gloss_eng sei ON se.SID = sei.SID
WHERE mn_null = 1
GROUP BY e.entry 
```

如果是表中的字段，则`WHERE mn_null = 1`向`e`表别名添加条件。`mn_null``entry`

# hive - “SELECT DISTINCT”忽略 Hive 中的不同情况

> ID：14870172
> 
> 赞同：2
> 
> 时间：2013-02-14T07:54:40.237
> 
> 标签：hive, hiveql

我需要以下查询的输出：

```
SELECT DISTINCT * FROM ("A", "a", "b", "B") 
```

O/P 应该是：

```
"A", "B" 
```

从`'A'`并且`'a'`只有一个条目应该成为。

但在蜂巢中我有：

```
"A", "a", "b", "B" 
```

在sql中有类似的东西：

```
Select distinct col1 COLLATE sql_latin1_general_cp1_cs_as
From dbo.myTable; 
```

有没有类似的东西：`'sql_latin1_general_cp1_cs_as'`在蜂巢或任何替代查询中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:26:21.953

可能你必须忽略下面的情况。

**从 myTable 中选择不同的 ucase(id)；**

请参阅hive 中的[字符串函数](https://cwiki.apache.org/confluence/display/Hive/LanguageManual+UDF#LanguageManualUDF-StringFunctions)。

如果它不能解决您的目的，那么您必须在 Java中创建[自定义用户定义函数](http://learnthejava.blogspot.in/2012/02/hive-custom-user-defined-function-udf.html)

# c# - MVC 应用程序中的 Web 服务

> ID：14870187
> 
> 赞同：1
> 
> 时间：2013-02-14T07:55:44.410
> 
> 标签：c#, asp.net-mvc, web-services

我对 MVC 应用程序中包含的 Web 服务有一个大问题。我制作了一个 MVC 应用程序，它托管在 IIS 7.0 上。一切都很完美。比我必须向这个项目添加 Web 服务（当然它可以是一个 WCF，因为 WS 已经存在）。所以在 Visual Studio 2010 中，我添加了新项目，为当前项目选择了一个 Web 服务。在开发机器上，没关系。一切都很好。但是当我尝试将整个项目发布到 IIS（它在另一台服务器上）时，MVC 应用程序看不到 WS。

这就是我在 MVC 中调用 WS 的方式：

```
 $('#test').click(function test2() {
     alert('start');

     $.ajax({
         type: "POST",
         url: "/../WebServicePrzeczytany.asmx/HelloWorld",
         data: "{}",
         dataType: "xml",

         success: function suc(msg) {
                alert("recieved: " + msg.text);
                 },
         faild: fail
     });

     alert('stop');
 });

 function fail() {
     alert("doesn't work");
 }; 
```

如您所见，它是 jquery。但我的问题是：为什么它不起作用？我应该在 IIS 上设置或配置一些东西吗？

我会感谢任何帮助或线索。

马尔钦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:08:16.743

您的网络服务网址不正确。“/../WebServicePrzeczytany.asmx/HelloWorld”您的应用程序应该指向已发布的 Web 服务，而不是像上面那样的相对 url。网址应该类似于 `http://someipaddressordomainname/WebServicePrzeczytany.asmx/HelloWorld`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:03:12.117

你的网址看起来很奇怪。您是否尝试在发布之前指定绝对 url ( [http://example.com/some/path/WebServicePrzeczytany.asmx/HelloWorld](http://example.com/some/path/WebServicePrzeczytany.asmx/HelloWorld) )？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:15:27.967

您正在执行一种违反跨域策略的方法，即您正在通过 javascript 调用或执行对 Web 服务的客户端调用。但是，如果您想使用 JSONP 通过 ajax 执行或调用服务，则已经存在现有方法，前提是您满足以下条件：

***您可以控制您的网络服务代码，即您可以修改代码并为 JSONP 自定义它**

***您将所有 Web 服务响应包装到 JSONP 回调中。**

有关更多信息，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

如果没有 JSONP，它可以在本地工作，但如果你在现场环境中，那将无法工作。

# sql-server - SSIS 截断/删除所有行并重新插入与插入/更新增量

> ID：14870194
> 
> 赞同：3
> 
> 时间：2013-02-14T07:56:19.827
> 
> 标签：sql-server, oracle, ssis, data-migration

我需要编写一个 SSIS 包，每隔 15 天从大约 1400 个表中导入数据，每个表包含数百万条记录，从 Oracle 到 SQL Server。推荐哪种方法：

每次导入时，SQL Server 中的 foreach 表

*   截断/删除所有记录，并从 Oracle 导入所有记录
*   SQL Server中每个表中的每一行，检查它是否在相应的Oracle表中更新，如果是，更新它，如果有的话插入新行。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T16:44:31.073

曾经考虑过使用[Microsoft SQL Server Migration Assistant for Oracle](http://www.microsoft.com/en-ca/download/details.aspx?id=28766)吗？

# c# - 将文件从一个项目上传到同一域上的另一个项目

> ID：14870212
> 
> 赞同：0
> 
> 时间：2013-02-14T07:57:14.650
> 
> 标签：c#, io, directory

我有 2 个项目说。MyProject 和 MyProject.Admin

我已将这两个项目发布到 IIS。

树结构是

本地主机/我的项目

本地主机/我的项目/管理员。

现在我必须从 MyProject.Admin 将文件上传到 MyProject，

所以我想知道如何将文件从 MyProject.Admin 上传到 MyProject。

在 MyProject 中创建目录时，我使用的是路径

```
if (Directory.Exists("/MyProject/Files/someFolderName"))
{
    Response.Write("Directory Already Exists");
    Response.Write("<br />"+Server.MapPath("/MyProject/Files/someFolderName"));
}
else
{
    Directory.CreateDirectory("/MyProject/Files/someFolderName");                
} 
```

它说该目录已经存在，但是当我导航到该位置时..但我没有找到任何目录？

# actionscript-3 - 为什么我在 event.target 之后得到实例名称，而不是 Sprite 名称？

> ID：14870215
> 
> 赞同：0
> 
> 时间：2013-02-14T07:57:26.473
> 
> 标签：actionscript-3, instance, addeventlistener

我在两个班上做过同样的事情。我看不出我做了什么不同的事情，但必须有。因为在一个中，当我使用 trace(event.target) 而不是我在另一个类中获得的 Spritename 时，单击后我会得到“Instance54”或其他东西。现在我已经做了一个解决方法，但是有人可以解释事件监听器何时获取实例名称而不是 Sprite 名称吗？

```
private var fly:Sprite = new Sprite;
private var flyArea:Sprite = new Sprite; 
```

...

```
public function()
{
fly.addChild(new R.fly);
flyArea.addChild(new R.bg);
flyArea.addChild(fly);
fly.addEventListener(MouseEvent.CLICK,flyClick, false, 0, true); 
```

...

```
private function changeFlikOrder(event:MouseEvent):void
trace (event.target); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:09:24.787

这些年来我一直在做 Flash，我从来不需要依赖 name 属性。您应该为您创建的任何对象设置一个 var 并使用它来引用您的对象：

```
// not sure why you don't have () in your example but here goes
fly.addChild(new R.fly()); 
```

但是现在没有对 R.fly 的引用，如果你这样做了：

```
var myFly:YourTypeHere = new R.fly();
fly.addChild(myFly); 
```

现在您可以在代码中的任何位置引用 myFly。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:17:16.853

如果您在创建对象后没有为对象提供“名称”属性，那么它会收到一个自动生成的名称“实例”+数字。很可能是`getChildByName()`为了确定只有一个孩子有这个特定的名字。当您在 Flash CS 的图形设计器中编辑实例属性时，您会隐含地为实例命名，因此我希望返回“Sprite-name”的对象是预先放置的对象。

# css - 只有部分 CSS 文件在 Chrome 中加载

> ID：14870218
> 
> 赞同：10
> 
> 时间：2013-02-14T07:57:50.080
> 
> 标签：css, google-chrome, google-chrome-devtools

出于某种原因，我的页面只加载了一部分（大约是我`CSS`文件的 1/3）。它是一个连接和缩小的。如果我去**[http://staging.easyuniv.com/styles/dbf42ab5.main.css](http://staging.easyuniv.com/styles/dbf42ab5.main.css)** 我可以看到整个事情。

最奇怪的部分是，如果查看 Chrome 开发工具中的源代码，大约三分之一的地方会变成空白（就在类名的中间），但是你可以滚动剩下的地方，就好像文本在那里一样.

我正在将其加载到我的页面上，其中包含以下内容：

```
<link rel="stylesheet" href="styles/dbf42ab5.main.css"> 
```

有人遇到过这样的事情吗？我已经没有东西可以尝试了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-14T10:24:35.240

该文件[远非有效](http://jigsaw.w3.org/css-validator/validator?uri=http://staging.easyuniv.com/styles/dbf42ab5.main.css&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)，可能应该查看但这是我发现的......

*   我无法将您的 CSS 文件的内容粘贴到[http://cssbeautify.com/](http://cssbeautify.com/) - CSS 在几乎与 Chrome 相同的位置被切断
*   我可以粘贴到[http://www.codebeautifier.com/](http://www.codebeautifier.com/)，它可以生成一个可以正常加载的 CSS 文件！很奇怪。

**通过一些试验和错误，在使用 Chrome 开发人员工具时，连接在一行上**的 CSS 文件看起来像是被切断了。该文件似乎已被解析为使用`Ctrl`++并在文件末尾搜索某些内容（我正在搜索`Shift`） ，然后 Chrome 报告它已找到，尽管找到的计数似乎错误。`F``zag-divider`

具体来说，似乎该 CSS 文件中**任何**>= 66,537 个字符的行都会被截断！例如：

*   单行 CSS 文件 <= 66,536 个字符不会被截断
*   单行 CSS 文件 >= 66,537 个字符将被截断
*   多行 CSS 文件 >= 66,537 个字符将只有 >= 66,537 的行将被截断

我有一行正好 66,537 个字符的 CSS 被截断，但是通过在第一个选择器和重新加载后添加一个回车符，整个文件在控制台中正确显示。

总而言之……任何行 >= 66,537 个字符的 CSS 文件看起来像是在 Chrome 开发人员工具中被截断了一部分，尽管该文件实际上已完全加载。我通过在 Chrome 应用的行尾添加一条规则来测试这一点。

*^(注意：如果看似神奇的数字是 2 16)，我会更开心*

*编辑：对 Chrome 23.0.1271.97 m 进行的调查*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-30T00:02:25.867

对于遇到此问题但并非专门使用 Google Chrome 的谷歌用户，验证截断不是[由 Nginx 和虚拟化的已知缺陷](https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/#virtualbox)造成的结果可能很有用，这可以通过`sendfile`在您的服务器块中禁用来解决。

您可以在本文中找到有关此问题的更多信息：http: [//www.conroyp.com/2013/04/25/css-javascript-truncated-by-nginx-sendfile/](http://www.conroyp.com/2013/04/25/css-javascript-truncated-by-nginx-sendfile/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:41:23.860

我尝试通过一些解析器运行它：

[http://www.codebeautifier.com](http://www.codebeautifier.com)

[http://www.cssportal.com/css-validator](http://www.cssportal.com/css-validator)

不幸的是，它们似乎无法完全阅读您的 css 文件，您应该通过它们运行 css，因为结果太大而无法在此处发布。我认为当您缩小时，可能会发生很多事情，错误的编码，移动的空格实际上是必要的。

根据解析器提供的结果，我建议您恢复到未缩小的版本并重新开始，因为我在这里看到的错误太多（已识别出超过 900 个），您无法尝试“修复”css。

# magento - Magento Solr 搜索对包含挪威字符的查询不返回任何内容

> ID：14870220
> 
> 赞同：1
> 
> 时间：2013-02-14T07:58:02.730
> 
> 标签：magento, solr, special-characters

我已经在我的 Magento 安装中设置了 Solr 搜索，但是在搜索包含挪威字符的单词时它不会返回任何结果，例如“læring”（学习），而且我有很多产品的标题中带有“læring”。

我无法弄清楚这一点，并希望得到任何帮助。

schema.xml[位于此处](http://pastebin.com/zr5gMj9N)。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:21:16.483

对于 ASCII 字符集之外的字符，您必须更新 Tomcat 连接器：

```
<Server ...>
 <Service ...>
   <Connector ... URIEncoding="UTF-8"/>
     ...
   </Connector>
 </Service>
</Server> 
```

[http://wiki.apache.org/solr/SolrTomcat#line-90](http://wiki.apache.org/solr/SolrTomcat#line-90)

# sql - 查找最有效数据的 SQL 查询

> ID：14870222
> 
> 赞同：5
> 
> 时间：2013-02-14T07:58:06.633
> 
> 标签：sql, tsql, sql-server-2012

我想编写查询以查找最有效的行。我有这些表：

```
Sellers
Id   Name
1    Mark
2    Julia
3    Peter

Stocks
 Id   SellerId   ProductCode   StockCount
 1       1         30A            10
 2       2         20A             4
 3       1         20A             2
 4       3         42B             3 
```

还有 sqlfiddle [http://sqlfiddle.com/#!6/fe5b1/1/0](http://sqlfiddle.com/#!6/fe5b1/1/0)

我的意图是为库存找到最佳卖家。

如果客户需要 30A、20A 和 42B 产品。我需要返回“Mark”和“Peter”，因为 Mark 有两种产品（30A 和 20A），所以不需要 Julia。

我如何在 sql 中解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T10:06:10.320

在临时表的帮助下让它工作

```
SELECT
  s.SellerId,
  ProductList = STUFF((
                       SELECT ',' + ProductCode FROM Stocks
                        WHERE s.SellerId = Stocks.SellerId
                        ORDER BY ProductCode FOR XML PATH('')
                       )
                      , 1, 1, ''), COUNT(*) AS numberOfProducts
INTO #tmptable
FROM
  Stocks s
WHERE
  s.ProductCode IN ('30A','20A','42B')
  AND s.StockData > 0
GROUP BY s.SellerId;

/*this second temp table is necessary, so we can delete from one of them*/
SELECT * INTO #tmptable2 FROM #tmptable; 

DELETE t1 FROM #tmptable t1
WHERE EXISTS (SELECT 1 FROM #tmptable2 t2
               WHERE t1.SellerId != t2.SellerId
                 AND t2.ProductList LIKE '%' + t1.ProductList + '%'
                 AND t2.numberOfProducts > t1.numberOfProducts)
;

SELECT Name FROM #tmptable t INNER JOIN Sellers ON t.SellerId = Sellers.Id; 
```

**更新：**

请尝试使用静态表：

```
CREATE TABLE tmptable (SellerId int, ProductList nvarchar(max), numberOfProducts int); 
```

tmpTable2 相同。然后把上面的代码改成

```
INSERT INTO tmpTable
SELECT
  s.SellerId,
  ProductList = STUFF((
                       SELECT ',' + ProductCode FROM Stocks
                        WHERE s.SellerId = Stocks.SellerId
                        ORDER BY ProductCode FOR XML PATH('')
                       )
                      , 1, 1, ''), COUNT(*) AS numberOfProducts
FROM
  Stocks s
WHERE
  s.ProductCode IN ('30A','20A','42B')
  AND s.StockData > 0
GROUP BY s.SellerId;

INSERT INTO tmpTable2 SELECT * FROM tmpTable;

DELETE t1 FROM tmptable t1
WHERE EXISTS (SELECT 1 FROM tmptable2 t2
               WHERE t1.SellerId != t2.SellerId
                 AND t2.ProductList LIKE '%' + t1.ProductList + '%'
                 AND t2.numberOfProducts > t1.numberOfProducts)
;

SELECT * FROM tmpTable;
DROP TABLE tmpTable, tmpTable2; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-14T08:53:59.053

我想这可能是你正在寻找的？

```
Select name,sum(stockdata) as stockdata from sellers s1 join Stocks s2 on s1.id=s2.sellerid
where ProductCode in ('30A','20A','42B')
group by name
order by sum(stockdata) desc 
```

我希望它有所帮助。

如果你只想要前 2 名。你写

```
Select top 2 name,sum(stockdata) as stockdata from sellers s1 join Stocks s2 on s1.id=s2.sellerid
where ProductCode in ('30A','20A','42B')
group by name
order by sum(stockdata) desc 
```

我想这就是你要找的，因为我怎么看，你想选择stockdata最高的两个人？

# html - 如何在目标c中从html打开浏览器

> ID：14870223
> 
> 赞同：0
> 
> 时间：2013-02-14T07:58:17.100
> 
> 标签：html, objective-c, xcode

所以我有加载到 web 视图中的 HTML，在那个 html 里面我有这样的链接

```
a href="http://www.google.com/" target="_blank">google</a> 
```

所以我是否让该链接在默认浏览器中打开，而不是在我的网络视图中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:07:26.000

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request    navigationType:(UIWebViewNavigationType)navigationType {
       if (navigationType == UIWebViewNavigationTypeLinkClicked) {
          [[UIApplication sharedApplication] openURL:[request URL]];
          return NO;
       }
       return YES;
 } 
```

我从[这里](https://stackoverflow.com/questions/4452719/how-do-i-open-links-in-safari-instead-of-uiwebview)和[这里](https://stackoverflow.com/questions/10390479/open-mobile-safari-from-a-link-in-a-webview)得到它。

# wordpress - Wordpress小部件中的复选框数组？

> ID：14870224
> 
> 赞同：1
> 
> 时间：2013-02-14T07:58:18.470
> 
> 标签：wordpress

我正在尝试创建一个小部件，使用户能够选择将显示哪些类别。以下是我创建的一段代码，但无法保存复选框状态的更改。只有两个值：所选类别的标题和列表。

```
function form($instance) {
    $instance = (array)$instance;
    if( empty($instance['title']) ) $instance['title'] = 'Category';
    $selected_categories = (array)$instance['category'];
    var_dump($selected_categories); 
    ....
    $categories = get_categories( array('exclude'=> 1) );
    foreach($categories as $category) : ?>
    <div>
        <input type="checkbox" name="<?php echo $this->get_field_name('category'); ?>"
            value="<?php echo $category->cat_ID; ?>"
            <?php echo $category->cat_name; ?>
    </div>
    <?php endforeach; ?>
}

function update($new_instance, $old_instance) {
    $instance = $old_instance;
    $instance['title'] = strip_tags($new_instance['title']);
    $instance['category'] = $new_instance['category'];

    return $instance;
} 
```

我通过 var_dump($selected_categories) 观察变化。该值始终为 array(size=0) 忽略我检查了多少复选框。

我不知道如何在 $instance 变量中传递数组。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T20:33:54.757

我在这个确切的问题上花了很多时间。关于这个主题的在线搜索并不令人满意。我想了解 Widget 扩展 WP_Widget 对象是如何工作的。就像原来的帖子一样，我也想让我的管理员从所有帖子类别的动态检查列表中进行选择。在我的网站上，我用它来做宣传，我希望有很多这只小狗的实例。一个健壮的实例存储系统对我来说是必不可少的。

有几个愚蠢的问题困扰着我。1) =.. 的时髦标签是怎么回事。我在每个在线示例中看到的类别名称/标签。（注意'标签'被左/右符号包围..在这里不能这样做..）这是必需的，还是只是有人复制以前做过的事情（在 WordPress 源代码中的文件 defaults-widgets.php 中） ? 答：完全浪费时间。少即是多，编码正确。

2）我真的很想了解系统如何保存用户选择的机制。后端页面上似乎没有明显的编码来捕获选择。我花了很长时间在这里搜索，包括尝试在调试器上单步执行代码，结果很糟糕。我花了很多时间使用 var_dump($instance) 来了解结果。该系统有效，但我真的不明白为什么。

我让这个系统工作的逻辑是创建一个复选框变量，让它工作。下一步是创建一个复选框变量数组，但只使用其中一个并让它工作。最后利用整个复选框变量数组。成功。

代码摘录如下：

```
/*Saves the settings. */
function update( $new_instance, $old_instance ){

    $args = array(
        //your selections here.
    ); 
    $categories = get_categories( $args );   // returns an array of category objects
    $arrlength=count($categories);

    for($x=0;$x<$arrlength;$x++){
        $tempArray[$categories[$x]->slug] = '';  
    }
    $instance = $old_instance;       
    $new_instance = wp_parse_args( (array) $new_instance, $tempArray );

    for($x=0;$x<$arrlength;$x++){
        $instance[$categories[$x]->slug] = $new_instance[$categories[$x]->slug] ? 1 : 0;
    }
    return $instance;
}

/*Creates the form for the widget in the admin back-end. */
function form( $instance ){
     echo '<p>Choose your categories of interest. Multiple selections are fine.</p> ';

    $args = array(
         //your selections here.  Use same args as update function, duh.
    ); 
    $categories = get_categories( $args );   // returns an array of category objects
    $arrlength=count($categories);

    for($x=0;$x<$arrlength;$x++){
        $tempArray[$this->get_field_id($categories[$x]->slug)] = '';
    }
    $instance = wp_parse_args( (array) $instance, $tempArray );

    for($x=0;$x<$arrlength;$x++){
        $tempCheckFlag[$categories[$x]->slug] = $instance[$categories[$x]->slug]  ? 'checked="checked"' : '';   
        // could also use 'checked()' function    
        // Yup, this could be combined with the for loop below, 
        // listed here seperately to enhance understanding of what's going on.
    }

    for($x=0;$x<$arrlength;$x++)
    {
        echo '<p><input class ="checkbox" type="checkbox" value="1" id="'.$this->get_field_id($categories[$x]->slug).'" name="'.$this->get_field_name($categories[$x]->slug).'"'.$tempCheckFlag[$categories[$x]->slug].'>'.$categories[$x]->name.'  (Category # '.$categories[$x]->term_id.' )</p>';  
    }
} 
```

当我需要在我的小部件函数中使用选择时，我会从 $instance 变量中检索管理员的选择。

```
/* Displays the Widget in the front-end */
function widget( $args, $instance ){
    //.... 

    foreach($instance as $key=>$value)
    {
        if ($value){
            $category_array[]=$key;
        }
    }
 // Now I have a simple array of just those categories that had a check mark... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T07:38:25.233

如果未设置数组中的值，您是否有一个验证函数来填充它们？这就是小部件的 »update« 方法。也许您应该添加：

```
'<input name="..." value="..." id="'.$this->get_field_id( 'category' ).'" />'; 
```

到您的输入元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-25T10:07:57.960

这是使用复选框数组的第二种解决方案。我在我的小部件[最近更新的帖子小部件](https://wordpress.org/plugins/recently-updated-posts-widget/)的新版本 1.8 中使用复选框数组解决了这个问题。我使用第二种形式的foreach

```
foreach (array_expression as $key => $value). 
```

**$key**允许为每个复选框获取一个**唯一的 id 。**这里 $id 是一个由 foreach 本身递增的数字。

```
function form($instance) {
$term_taxonomy_id = (isset($instance['term_taxonomy_id']) ? array_map('absint', $instance['term_taxonomy_id']) : array("0"));
<?php       
    $categ = get_categories();
    foreach($categ as $id => $item) :  
?>
<br/>
<input  type="checkbox"
    id="<?php echo $this->get_field_id('term_taxonomy_id') . $id; ?>" 
    name="<?php echo $this->get_field_name('term_taxonomy_id'); ?>[]" 
    <?php   if (isset($item->term_taxonomy_id)) {
                if (in_array($item->term_taxonomy_id,$term_taxonomy_id)) 
                    echo 'checked'; 
                };      
            ?>  
    value="<?php echo $item->term_taxonomy_id; ?>" />
<label for="<?php echo $this->get_field_id('term_taxonomy_id') . $id; ?>" >
<?php echo $item->name ?>
</label>
    <?php endforeach; ?> 
```

我为我的插件存储**了 term_taxonomy_id**而不是**cat_ID**，但是您几乎可以存储**cat_ID**，它也可以工作。

数组数据由 php 函数 array_map() 清理。更新函数为：

```
 function update($new_instance, $old_instance) {
// Par défaut, aucune catégorie n'est exclue
    $instance['term_taxonomy_id'] =  (isset($new_instance['term_taxonomy_id']) ? array_map( 'absint', $new_instance['term_taxonomy_id']) : array('0')); 
```

为了在 MySQL 查询中使用它们，我将其内爆为一组值：

```
// écriture de la liste des objects sélectionnées en langage MySQL
    if (isset($instance['term_taxonomy_id'])) 
        $selected_object = "('".implode(array_map( 'absint',$instance['term_taxonomy_id']),"','")."')"; 
    else $selected_object = "('0')"; 
```

# c# - Javascript 错误：对象必需

> ID：14870227
> 
> 赞同：0
> 
> 时间：2013-02-14T07:58:32.993
> 
> 标签：c#, javascript, asp.net

我的页面上有一个 Dropdown、Panel1、panel2 和一个按钮。
在 Panel1 里面有 gridview1 和在 panel2 中类似我们有 gridview2

但是我在 javascript onload 中得到一个错误，在下面提到的行中说“需要对象”
if (parseInt($('#<%= gvSelectedInstitutelist.ClientID %>').length) == 0)

当网格没有数据时抛出错误..或长度为零..
错误是：“预期对象”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:07:58.347

将javascript放入您的html文件中。在此之后，如果可能，请使用 jQuery。

/edit：我已经启动了一个 webforms 项目来测试这一点：内容是一个 asp：面板包含一个 GridView 元素。我用一行虚拟数据创建了一个数据集，并将脚本粘贴在 aspx 代码下方。

```
<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
<asp:Panel ID="Panel1" runat="server">
    <asp:GridView ID="GridView1" runat="server">
    </asp:GridView>
</asp:Panel>
<script type = "text/javascript">
     $(document).ready(function () {
        if ($('#<%= GridView1.ClientID %>').length == 0) {
            $('#<%= Panel1.ClientID %>').hide();
            console.log("Length == 0");
        }
   }); 
```

后面的代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        DataSet ds = new DataSet();

        DataTable dt = new DataTable();
        dt.Columns.Add("Name");
        dt.Columns.Add("Branch");
        dt.Columns.Add("Officer");
        dt.Columns.Add("CustAcct");
        dt.Columns.Add("Grade");
        dt.Columns.Add("Rate");
        dt.Columns.Add("OrigBal");
        dt.Columns.Add("BookBal");
        dt.Columns.Add("Available");
        dt.Columns.Add("Effective");
        dt.Columns.Add("Maturity");
        dt.Columns.Add("Collateral");
        dt.Columns.Add("LoanSource");
        dt.Columns.Add("RBCCode");

        dt.Rows.Add(new object[] { "James Bond, LLC", 120, "Garrison Neely", "123 3428749020", 35, "6.000", "$24,590", "$13,432",
        "$12,659", "12/13/21", "1/30/27", 55, "ILS", "R"});

        ds.Tables.Add(dt);

        GridView1.DataSource = ds;
        GridView1.DataBind();
    } 
```

这完全适合我。如果 dummydata 在后面的代码中被注释掉，我会返回 Length < 2。如果我使用虚拟数据，控制台中的返回值为 Length > 2。

请在此处发布您的整个 aspx + js 代码。

# python - django中的表格搜索

> ID：14870228
> 
> 赞同：1
> 
> 时间：2013-02-14T07:58:33.807
> 
> 标签：python, django

这是我的模型结构。

```
class  Category(models.Model):
    name      = models.CharField(max_length=100)

class SUBCategory(models.Model):
    name      = models.CharField(max_length=100)
    cat       = models.ForeignKey(Category,related_name = 'scat',null = True,blank=True)

class Tags(models.Model):
    name      = models.CharField(max_length=100)

class FullProfile(models.Model):
    user            = models.OneToOneField(User)
    birthday        = models.DateField(null = True,blank=True)
    first_name      = models.CharField(max_length=100,null = True,blank=True)
    middle_name     = models.CharField(max_length=100,null = True,blank=True)
    last_name       = models.CharField(max_length=100,null = True,blank=True)
    token           = models.CharField (max_length=200,null = True,blank=True)
    status          = models.CharField(max_length=100,null = True,blank=True)
    tags            = models.ManyToManyField(Tags,related_name = 'tg',null = True,blank=True)
    category        = models.ForeignKey(Category,related_name = 'cat',null = True,blank=True)
    facebook_url    = models.CharField(max_length=100,null = True,blank=True)
    twitter_url     = models.CharField(max_length=100,null = True,blank=True)
    mobile          = models.CharField(max_length=100,null = True,blank=True)
    landline        = models.CharField(max_length=100,null = True,blank=True)
    country         = models.CharField(max_length=100,choices = COUNTRIES,null=True,blank =True,default='INDIA')
    state           = models.CharField(max_length=100,null = True,blank=True)
    city            = models.CharField(max_length=100,null = True,blank=True) 
```

基本上一个用户可以属于一个类别和子类别。

我正在寻找一种方法来搜索属于特定类别、子类别或标签的用户，

我只是在尝试基本的东西，比如

```
get_all = FullProfile.objects.filter(
                       Q(category__id__iexact=cat) |
                       Q(user__username__icontains=keyword) |
                       Q(first_name__icontains=keyword)
                        ).distinct() 
```

请告诉我让这个搜索模块有效的更好方法。因为其他人要管理这个应用程序，所以我不想使用 Haystack 进行这个小搜索。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:45:21.193

如果您只需要根据这 3 个字段进行搜索，那么您做得很好。如果表变大，您可能应该在正在搜索的字段上创建一个索引，只要该索引能够与`LIKE`SQL 语句一起使用。

如果潜在字段集变大，请考虑使用[django-filter](https://github.com/alex/django-filter)之类的工具对表单进行过滤。

# bash - 使用 root 帐户但在不同用户下在多个服务器上推送公钥

> ID：14870236
> 
> 赞同：0
> 
> 时间：2013-02-14T07:59:21.717
> 
> 标签：bash, public-key

我正在尝试使用 root 帐户在一大堆服务器上推送一些公钥，但我想将这些新密钥放在“postgres”用户下。

我正在这样做：

```
$ cat new_dba_keys.pub | ssh -l root 10.224.1.16 "su - postgres |cat >> ~/.ssh/authorized_keys"
-bash: line 2: ssh-rsa: command not found
-bash: line 4: ssh-rsa: command not found 
```

如您所见，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:02:31.817

而不是`su - postgres | cat ...`你可以使用`su - postgres -c "cat ..."`并将文本放置在 postgre 的目录中：

```
cat new_dba_keys.pub | ssh -l root 10.224.1.16 "su - postgres -c \"cat >> ~/.ssh/authorized_keys\"" 
```

# delphi - 发件人作为案例的 TObject ... 使用 Delphi

> ID：14870246
> 
> 赞同：3
> 
> 时间：2013-02-14T08:00:17.533
> 
> 标签：delphi

想使用 Sender 作为 TObject 作为我的案例的选择标准...声明

```
procedure TForm.ShowGUI (Sender: TObject);
begin
  case sender of
      ToolButton1: begin
          do_something;         
        end;

      ToolButton2: begin
          /// 
        end;

      ToolButton3: begin
          do_stufff_here; 
        end;

      ToolButton3: begin 
          /// 
        end;

      else ;

  end;
end; 
```

根据 case 语句的要求使发件人成为序数类型的技巧？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T08:03:56.090

您可以`Sender`通过将其转换为整数来轻松地将其转换为序数（例如：`NativeUInt(Sender)`- 但这对您没有好处，因为该`case`语句需要“分支”的常量表达式，并且`ToolButton1`..`ToolButton3`不是常量，它们是变量。

例如，您可以对按钮的属性进行案例；例如，给每个人`ToolButton`一个`Tag`对它有意义的属性。然后你可以做这样的事情：

```
case (Sender as TToolButton).Tag of
  1: ; // ToolButton1 was pressed
  2: ; // ToolButton2 was pressed        
end; 
```

*正如大卫所建议的那样：*除非您使用的控件具有与其功能直接相关的属性（非常不可能），否则简单的链式 if 语句可能更易于阅读。我的第一个建议中的`Tag`属性需要专门配置，这只是引入错误的另一种方式。示例：也许您复制粘贴一个按钮但忘记更改它的标签，您现在有两个具有相同标签的按钮。

首先，您应该从代码中重命名您正在使用的所有组件，给它们正确的名称。然后你可以写这样的东西：

```
if (Sender = tbAlignTextLeft) then
  begin
     // The tool-button for left text alignment was pressed
  end
else if (Sender = tbAlignTextCenter) then
  begin
    // Center-alignment button was pressed
  end
else
  begin
    // This would be the default action. If it were me, I'd raise an exception here.
  end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-14T08:54:50.777

考虑添加一些运行时支持以将枚举与控件相关联。

首先创建一个枚举类型：

```
type
  TControlID = (cidAlignTextLeft, cidAlignTextRight, ....); 
```

然后将字典添加到您的表单中：

```
FControlIDs: TDictionary<TControl, TControlID>; 
```

然后在表单的构造函数中创建并填充字典：

```
FControlIDs := TDictionary<TControl, TControlID>.Create;
FControlIDs.Add(tbAlignTextLeft, cidAlignTextLeft);
FControlIDs.Add(tbAlignTextRight, cidAlignTextRight);
.... 
```

这部分代码应该放在单独的本地帮助函数中，而不是内联在表单的构造函数中。

现在你可以写你的case语句：

```
case FControlIDs[Sender as TControl] of
cidAlignTextLeft:
  ....
cidAlignTextRight:
  .... 
```

# javascript - JavaScript 仅显示浏览器特定的 CSS 前缀，即使添加了其他前缀

> ID：14870249
> 
> 赞同：0
> 
> 时间：2013-02-14T08:00:22.910
> 
> 标签：javascript, html, css, browser, vendor-prefix

我通过 Javascript 将 CSS 规则直接添加到样式表中：

```
document.styleSheets[0].cssRules[4].style.borderRadius="10px";
document.styleSheets[0].cssRules[4].style.webkitBorderRadius="10px";
document.styleSheets[0].cssRules[4].style.mozBorderRadius="10px"; 
```

我需要稍后显示这些规则：

```
document.write(document.styleSheets[0].cssRules[4].cssText); 
```

但是每个浏览器只显示自己的前缀，例如，当我在 Chrome 上时，我只得到：

```
-webkit-border-radius:10px; 
```

当我在 Firefox 上时，我只得到：

```
-moz-boder-radius:10px; 
```

无论我使用的是什么浏览器，如何将它们全部显示出来？

**PS：**我不能使用`document.getElementById("foo").style.width;`显示 CSS 之类的东西，使用`styleSheets[]`and`cssRules[]`是必须的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:02:43.630

你不能，因为它们不存在。浏览器会忽略它无法识别的样式，因此它们永远不会添加到样式表中。

# c - 如何实现 zmsg_recv_nowait？

> ID：14870251
> 
> 赞同：0
> 
> 时间：2013-02-14T08:00:38.733
> 
> 标签：c, zeromq

CZMQ 库为和类（和）提供`nowait`选项，但没有像. 有什么解决办法吗？而不是与标志一起使用。我的代码是：`zstr``zframe``zstr_recv_nowait()``zframe_recv_nowait()``zmsg_recv_nowait()``zmq_msg_recv``ZMQ_DONTWAIT`

```
zmq_pollitem_t items[] = { {sock, 0, ZMQ_POLLIN, 0} };
zmq_poll(items, 1, 10);
/* now receive all pending messages */
while (1) {
    zmsg_t *msg = zmsg_recv(sock); /* this will block after the last message received */
    /* consume message here */
}
/* sending bunch of messages */ 
```

我正在做异步`REQ/REP`。发送多个请求然后在它们准备好时接收回复。此代码将阻止我的应用程序。`zmq_poll`对我来说，做一个，收到一条消息等等似乎很难看……因为当`zmq_poll`返回时，其他回复已经到达。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T06:21:05.687

将投票代码放入循环中。对一个套接字使用 poll 很好。

一个例子可能会有所帮助：

```
while (1) {
    /* now receive all pending messages */
    zmq_pollitem_t items[] = { {sock, 0, ZMQ_POLLIN, 0} };

    /* this will block for 10msec, ZMQ_POLL_MSEC is for compatibility for v2.2 */
    int rc = zmq_poll(items, 1, 10 * ZMQ_POLL_MSEC );
    if (rc == -1)
      break; // some error occured, check errno...

    if (items [0].revents & ZMQ_POLLIN) {
      /* there's something to receive */
      zmsg_t *msg = zmsg_recv(sock);
    }

    /* sending bunch of messages */
} 
```

# javascript - 连续滚动不工作时轮播触发

> ID：14870255
> 
> 赞同：0
> 
> 时间：2013-02-14T08:00:52.490
> 
> 标签：javascript, jquery, jquery-plugins, plugins, caroufredsel

旋转木马 (caroufredsel)不断向左滚动（[例如，选中此项）。](http://caroufredsel.dev7studios.com/examples/continuously-scrolling.php)当我将鼠标悬停在右侧的箭头上时，它会停止滚动，然后它会反转它的方向。我尝试使用自定义事件，但似乎它不起作用。这是轮播的代码。

```
$('#gallery').carouFredSel({
    width: "variable",

    auto: {
        items                   : 4,
        duration                :"40000",
        easing                  :"linear",
        timeoutDuration         :0,
        pauseOnHover        :"immediate"
        },
    items: {
        visible: 3
    }

}); 
```

现在我的自定义事件将导致轮播反转是方向是这样的。但直到完成滚动的整个项目才起作用。我想要实现的是在悬停时瞬间反转方向。

```
$('a.prev').hover(function()
{
    $('#gallery').trigger("pause");
    $('#gallery').trigger("configuration",["direction",right]);
    $('#gallery').trigger("play");
} 
```

上面的代码不起作用，我尝试了不同的事件来模拟滚动的反转，但没有运气。

如果没有解决方法。我愿意更改另一个可以轻松完成工作的插件。如果您知道可以轻松完成的事情，请留下您的建议。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:55:14.340

这完全取决于轮播是如何实现的。一个可能的解决方案可能是停止`eventPropagation`. 它可能会或可能不会工作，具体取决于轮播的实施。

```
$('a.prev').hover(function(event)
{
    event.stopPropagation();
    $('#gallery').trigger("pause");
    $('#gallery').trigger("configuration",["direction",right]);
    $('#gallery').trigger("play");
} 
```

# ado.net - AcceptRejectRule 和 EnforceConstraints 需要什么？

> ID：14870258
> 
> 赞同：1
> 
> 时间：2013-02-14T08:01:50.853
> 
> 标签：ado.net, constraints

net 并且一直在尝试了解这种约束机制如何与表和数据集一起工作。当我知道 ForeignKeyConstraint 有 DeleteRule/UpdateRule 可以设置 None 时，一切都变得如此混乱。然后

为什么我们有 AcceptRejectRule？它的级联如何用于接受和拒绝？那么 EnforceConstraints 到底是为了什么？

所有这些 DeleteRule/UpdateRule = None、AcceptRejectRule = None 和 EnforceConstraints = false 在我看来都是一样的。谁能告诉我有什么区别。有没有我可以阅读和理解的资源以使事情更清楚。MSDN 不适用于那件事。

这可能不是问这个问题的正确地方。为同样的道歉。但请给我资源..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T00:44:36.867

不同之处在于*何时*应用这些规则：

*   AcceptRejectRule：当调用 DataTable.AcceptChanges 或 DataTable.RejectChanges
*   DeleteRule：一旦行被删除
*   UpdateRule：一旦行被修改

EnforceConstraints 是一个更广泛的设置，它禁止检查任何约束，但它不影响更改的级联方式。

# android - 使用图像作为 GoogleMap

> ID：14870259
> 
> 赞同：6
> 
> 时间：2013-02-14T08:01:51.853
> 
> 标签：android, google-maps, android-mapview

我从 json 获取纬度和经度，我想在地图上显示它们。我已经使用正常的方式完成了它，比如使用 googleMap 和 Overlays。但实际上我希望它像下图一样。

![在此处输入图像描述](../Images/15ac20997a68cc9fc015578e621d054c.png)

我已经搜索并得到了一些提示，例如在 webView 中显示地图和使用 Javascript。但找不到任何教程或示例代码。

它是静态图像，不会放大或缩小。只是我想在图像上放置位置坐标。

所以我的问题是，是否可以将图像作为 gooleMap？

提前致谢。

![在此处输入图像描述](../Images/18ad038ce88c669d978b8e48372c311f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T14:11:51.963

如果您愿意离开 Google 地图，我建议您尝试使用 jVector Map，这是一个使用 jQuery 的基于 JavaScript 的地图解决方案。

下面是代码示例，显示了美国的失业率：

以下源代码将帮助您获得此输出：

```
$(function(){
  $.getJSON('/data/us-unemployment.json', function(data){
    var val = 2009;
        statesValues = jvm.values.apply({}, jvm.values(data.states)),
        metroPopValues = Array.prototype.concat.apply([], jvm.values(data.metro.population)),
        metroUnemplValues = Array.prototype.concat.apply([], jvm.values(data.metro.unemployment));

    $('#world-map-gdp').vectorMap({
      map: 'us_aea_en',
      markers: data.metro.coords,
      series: {
        markers: [{
          attribute: 'fill',
          scale: ['#FEE5D9', '#A50F15'],
          values: data.metro.unemployment[val],
          min: jvm.min(metroUnemplValues),
          max: jvm.max(metroUnemplValues)
        },{
          attribute: 'r',
          scale: [5, 20],
          values: data.metro.population[val],
          min: jvm.min(metroPopValues),
          max: jvm.max(metroPopValues)
        }],
        regions: [{
          scale: ['#DEEBF7', '#08519C'],
          attribute: 'fill',
          values: data.states[val],
          min: jvm.min(statesValues),
          max: jvm.max(statesValues)
        }]
      },
      onMarkerLabelShow: function(event, label, index){
        label.html(
          ''+data.metro.names[index]+''+
          'Population: '+data.metro.population[val][index]+''+
          'Unemployment rate: '+data.metro.unemployment[val][index]+'%'
        );
      },
      onRegionLabelShow: function(event, label, code){
        label.html(
          ''+label.html()+''+
          'Unemployment rate: '+data.states[val][code]+'%'
        );
      }
    });

    var mapObject = $('#world-map-gdp').vectorMap('get', 'mapObject');

    $("#slider").slider({
      value: val,
      min: 2005,
      max: 2009,
      step: 1,
      slide: function( event, ui ) {
        val = ui.value;
        mapObject.series.regions[0].setValues(data.states[ui.value]);
        mapObject.series.markers[0].setValues(data.metro.unemployment[ui.value]);
        mapObject.series.markers[1].setValues(data.metro.population[ui.value]);
      }
    });
  });
}); 
```

上面的代码将呈现如下地图：

![美国失业](../Images/ab52d319a8f4111e431f91dc21474981.png) [**链接到 JVECTORMAP**](http://jvectormap.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T08:53:22.013

我建议您覆盖 ImageView#onDraw() 并在图像顶部绘制位置点。主要任务是将坐标从地理空间转换到 ImageView 空间。因此，您需要了解地图图像在地理空间中的边界。

我在谷歌地图上截取了美国的截图。使用`Right click -> What is here?`菜单我找到了我的截图的地理范围。我还选择了国家边界周围的一些测试点。

这是一个简单的例子。自定义图像视图：

```
public class MapImageView extends ImageView {
    private float latitudeTop, latitudeBottom, longitudeRight, longitudeLeft;
    private List<Float> points = new ArrayList<Float>();
    private Paint pointPaint;
    private Matrix pointMatrix = new Matrix();

    public MapImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
        init();
    }

    private void init() {
        pointPaint = new Paint();
        pointPaint.setAntiAlias(true);
        pointPaint.setStrokeCap(Cap.ROUND);
        pointPaint.setColor(Color.RED);
        pointPaint.setStrokeWidth(8.0f);
    }

    public void setBounds(float latitudeTop, float latitudeBottom, float longitudeLeft, float longitudeRight) {
        this.latitudeTop = latitudeTop;
        this.latitudeBottom = latitudeBottom;
        this.longitudeLeft = longitudeLeft;
        this.longitudeRight = longitudeRight;
    }

    public void addPoint(float latitude, float longitude) {
        points.add(longitude);
        points.add(latitude);
        invalidate();
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        pointMatrix.reset();
        pointMatrix.postTranslate(-longitudeLeft, -latitudeTop);
        pointMatrix.postScale(
                getMeasuredWidth()/(longitudeRight-longitudeLeft), 
                getMeasuredHeight()/(latitudeBottom-latitudeTop));
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        canvas.drawPoints(mapPoints(), pointPaint);
    }

    private float[] mapPoints() {
        float[] pts = new float[points.size()];

        for (int i = 0; i < points.size(); i++) {
            pts[i] = points.get(i);
        }

        pointMatrix.mapPoints(pts);

        return pts;
    }
} 
```

在您的布局中：

```
<com.example.stackoverflow.MapImageView
    android:id="@+id/img_map"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/map"
    android:scaleType="fitXY" /> 
```

请注意，这`scaleType="fitXY"`很重要，因为坐标映射到 ImageView 边界，而不是地图图片。

在您的活动中：

```
MapImageView mapView = (MapImageView)findViewById(R.id.img_map);
mapView.setBounds(52.734778f, 19.979026f, -130.78125f, -62.402344f);

mapView.addPoint(42.163403f,-70.839844f);
mapView.addPoint(42.163403f,-70.839844f); 
```

结果：

![在此处输入图像描述](../Images/850a3b22a00594d1515d17bac3c45187.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T05:26:03.297

这不只是一个缩放问题吗？

放入平面图像，然后按照通常的方式绘制点，但按比例绘制。

IE。

```
h_scale=(real_america_width/image_america_width)
v_scale=(real_america_height/image_america_height)
lat = lat_from_json*h_scale)
lon = lon_from_json*v_scale) 
```

然后只需敲打标记。

抱歉，这不是真正的代码，但我不知道你想要它使用什么语言。一天结束，这是一个相当简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T08:18:40.747

请按照以下步骤操作：

首先复制要用作图像映射的图像并为每个部分着色。不用说，每个部分都有不同的颜色：D。然后在您的布局中创建两个 ImageView。将第一个的背景设置为要在屏幕上显示的图像，将第二个的背景设置为一个彩色。

然后将第二个 ImageView 的可见性设置为不可见。如果此时运行该程序，您应该会看到要显示的图像。然后使用 OnTouch 侦听器并获取您触摸的像素的颜色。颜色将对应于彩色图像的颜色。

下面的 getColour 方法需要传递触摸事件的 x 和 y 坐标。R.id.img2 是不可见的图像。

```
private int getColour( int x, int y)
{
    ImageView img = (ImageView) findViewById(R.id.img2);
    img.setDrawingCacheEnabled(true); 
    Bitmap hotspots=Bitmap.createBitmap(img.getDrawingCache()); 
    img.setDrawingCacheEnabled(false);
    return hotspots.getPixel(x, y);
} 
```

希望这对您有所帮助:)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T07:53:14.760

android google map api 的替代方案是 google Static Maps API ( [https://developers.google.com/maps/documentation/staticmaps/](https://developers.google.com/maps/documentation/staticmaps/) )。只需获取具有您坐标的地图图像并相对指向其他坐标。

# android - setOnClickListener 和 findByViewId

> ID：14870267
> 
> 赞同：1
> 
> 时间：2013-02-14T08:02:17.233
> 
> 标签：android

我的这部分代码有问题

```
insertButton = (Button) findByViewId(R.id.button1);  
insertButton.setOnClickListener(new OnClickListener(); 
```

它一直说 findByViewId 的方法未定义，setOnClickListener 的方法不适用并且 OnClickListener 无法解决这里是我的完整代码

```
package edu.nyp.project;

import android.os.Bundle;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class AddData extends Activity {
    Button insertButton = null;
    EditText shopText= null;
EditText dealText= null;
EditText locationText= null;
EditText websiteText= null;
EditText categoryText= null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.adddata);

    insertButton = (Button) findByViewId(R.id.button1);
    insertButton.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            DBAdapter dbAdapter = new
                    DBAdapter(getApplicationContext());
            try{
                dbAdapter.open();

                String shop = shopText.getText().toString(); 
                String deal = dealText.getText().toString(); 
                String location = locationText.getText().toString(); 
                String website = websiteText.getText().toString(); 
                String category = categoryText.getText().toString(); 
            }
            catch(Exception e){
                Log.d("Add Data ", e.getMessage());
            }
            finally{
                if (dbAdapter != null)
                    dbAdapter.close();
            }
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.adddata, menu);
    return true;
}
} 
```

我可以知道有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:06:26.530

**改变：**

```
insertButton.setOnClickListener(new OnClickListener(); 
```

反而：

```
insertButton.setOnClickListener(new View.OnClickListener(); 
```

**和**

```
insertButton = (Button) findByViewId(R.id.button1); 
```

反而：

```
 insertButton = (Button) findViewById(R.id.button1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:07:42.140

尝试

```
insertButton.setOnClickListener(new View.OnClickListener()
{
        public void onClick(View v)
        {
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:15:20.200

在您的活动中导入以下行

> ```
> import android.view.View.OnClickListener; 
> ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T08:27:29.120

关于上述代码，我唯一能发现的不寻常之处是：

```
insertButton = (Button) findByViewId(R.id.button1); 
```

所以将其替换为：

```
insertButton = (Button) findViewById(R.id.button1); 
```

其余的代码都很好。我的意思是下面的代码非常好：

```
 insertButton.setOnClickListener(new OnClickListener()
    {
        public void onClick(View v)
        {
            DBAdapter dbAdapter = new
                    DBAdapter(getApplicationContext());
            try{
                dbAdapter.open();

                String shop = shopText.getText().toString(); 
                String deal = dealText.getText().toString(); 
                String location = locationText.getText().toString(); 
                String website = websiteText.getText().toString(); 
                String category = categoryText.getText().toString(); 
            }
            catch(Exception e){
                Log.d("Add Data ", e.getMessage());
            }
            finally{
                if (dbAdapter != null)
                    dbAdapter.close();
            }
        }
    }); 
```

上述语法总是对我有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:05:36.500

使用 `findViewById`方法而不是`findByViewId`.

```
insertButton = (Button) findViewById(R.id.button1);  
insertButton.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v)
    {
       //Code for action listener.
    }
 }); 
```

# sql - SQL：假设只有两个列，如何比较不同行中的数据并只选择唯一的“对”？

> ID：14870268
> 
> 赞同：2
> 
> 时间：2013-02-14T08:02:18.417
> 
> 标签：sql, select, group-by, selection

我有几个表（**粗体**表示主键）：

> 舞者（舞者**姓名、**性别、年龄）
> 
> 舞蹈（**舞者姓名、dvd_id、**歌曲标题）
> 
> Dvd（**dvd_id，** song_title，成本）
> 
> 歌曲（**舞者姓名，歌曲标题，**流派）
> 
> 启动（**舞者名称，dvd_id，**年份）

我想选择其歌曲一起出现在一个或多个 dvd 中的舞者对，并且每对只打印一次。

这是我能得到的最接近的结果，它两次打印出同一对，但它们的名称在不同的列中：

```
select distinct DANCER1.dancer_name, DANCER2.dancer_name, count(*) as count
  from Dancer DANCER1, Dancer DANCER2, Dance DANCE1, Dance DANCE2
 where DANCER1.dancer_name = DANCE1.dancer_name 
   and DANCER2.dancer_name = DANCE2.dancer_name 
   and DANCER1.dancer_name <> DANCER2.dancer_name
   and DANCE1.dvd_id = DANCE2.dvd_id
 group by DANCER1.dancer_name, DANCER2.dancer_name; 
```

**所以而不是得到**

```
Tom Jon
Jon Tom
Bob Sam
Sam Bob 
```

**我只是想**

```
Tom Jon
Bob Sam 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:24:05.810

如果您将测试从 更改`DANCER1.dancer_name <> DANCER2.dancer_name`为`DANCER1.dancer_name < DANCER2.dancer_name`，您应该得到您想要的结果。

但是，由于您在 Dance 表中使用名称作为键，因此不需要加入 Dancer 表，查询可以简化为：

```
SELECT DANCE1.dancer_name, DANCE2.dancer_name, count(*) as count
FROM Dance DANCE1
INNER JOIN Dance DANCE2
ON DANCE1.dvd_id = DANCE2.dvd_id
WHERE DANCE1.dancer_name < DANCE2.dancer_name
GROUP by DANCE1.dancer_name, DANCE2.dancer_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-22T07:59:07.047

```
declare @tmpTable table
(
    ID BIGINT IDENTITY(1,1),
    User1 BIGINT,
    User2 BIGINT
)

declare @tmpParticipants table
(
    Participant1 BIGINT,
    Participant2 BIGINT
)

insert into @tmpTable
Select distinct SendByID, SendToID
from InternalMessaging

declare @cnt bigint, @i bigint = 1, @user1 bigint, @user2 bigint

select @cnt = count(*) from @tmpTable

While(@i <= @cnt)
begin
        select @user1 = User1, @user2 = User2 from @tmpTable where ID = @i

        if not exists(select 1 from @tmpParticipants where Participant1 = @user1 and Participant2 = @user2)
        if not exists(select 1 from @tmpParticipants where Participant1 = @user2 and Participant2 = @user1)
        begin
                insert into @tmpParticipants
                select @user1, @user2
        end

        set @i = @i + 1
end

select * from @tmpParticipants 
```

它对我有用。我希望，这将有助于解决您的问题。

# c++ - Qt：在 Windows、Visual Studio 2010 (VS2010) 上编译 Qt 5.0.1 时出错

> ID：14870272
> 
> 赞同：0
> 
> 时间：2013-02-14T08:02:33.393
> 
> 标签：c++, visual-studio-2010, qt, compiler-errors, qmake

我正在尝试在 Visual Studio 2010 (VS2010) 下为 Windows 编译 Qt 5.0.1，因为 OpenGL 的著名问题是，OpenGL 的唯一 ES 版本是 Qt 的预编译版本。

我在 qeglplatformcontext_p.h 收到错误：

```
fatal error C1083: Cannot open include file 'EGL/egl.h': No such file or directory 
```

但是，指定的文件和目录存在于qtbase\src\3rdparty\angle\include 中Qt 源码的3rdparty 文件中。

我使用的 Qt 是 qt-everywhere-opensource-src-5.0.1.zip

我遵循的编译步骤是

1-解压 D:\Qt\Qt5.0.1 中的文件

2- 打开 Visual Studio 命令提示符

3- 在步骤 1 中提到的目录中运行以下命令：

```
set QMAKESPEC=win32-msvc2010
set QTDIR=D:\Qt\Qt5.0.1\qtbase
set PATH=%PATH%;D:\Qt\Qt5.0.1\qtbase\bin

configure -opensource -debug-and-release -developer-build -accessibility -opengl desktop -openvg -platform win32-msvc2010

..\jom\jom.exe -j 32 
```

然后在大约之后发生 EGL/egl.h 的错误。5分钟。

我应该怎么做才能修复这个编译错误？请指教。

我的另一个问题是关于例外的。如何在这个版本的 Qt 中启用异常？命令 -exceptions 或 -no-exceptions 不再有效。有任何想法吗？

感谢您的任何努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:20:43.283

我可以修复它。我使用 Git 下载了存储库版本，然后使用以下命令并且它工作。可能没有必要从存储库下载它，但这是我到目前为止所做的工作（半小时以来仍在编译，没有错误）。

```
set QMAKESPEC=win32-msvc2010
set QTDIR=D:\Qt\Qt5.0.1
set PATH=D:\Qt\Qt5.0.1\bin;%PATH%

configure -debug-and-release -opensource -platform win32-msvc2010 -exceptions

C:\Qt\jom\jom.exe -j 32 
```

默认情况下，这将包括 OpenGL 和其他库。没有必要明确定义它们。

祝大家好运 ：）

# java - Mdpi 和 Ldpi Android 手机中的缓慢渲染

> ID：14870273
> 
> 赞同：0
> 
> 时间：2013-02-14T08:02:34.177
> 
> 标签：java, box2d, libgdx

*你好*，我在**LibGDX**的帮助下开发了一款游戏，并在其中使用了**Box2d**。问题是，当我在 hdpi 或平板电脑上运行我的游戏时，它运行良好，但在**ldpi**和**mdpi**的情况下，box2d 主体没有相应地运行。

我认为，在这些手机上渲染需要更多时间。那么，如何针对 ldpi 和 mdpi 手机优化我的游戏。我在 world.step 中传递的值是`worldbox.step(Gdx.graphics.getDeltaTime(), 10, 2000);`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:44:02.657

使用帧速率作为时间步长是个坏主意。Box2D 手册说：

> 可变的时间步长会产生可变的结果，这使得调试变得困难。所以不要将时间步与你的帧速率联系起来（除非你真的，真的必须）。

此外，您对速度和位置迭代使用了太大的值。Box2D 手册说：

> Box2D 的建议迭代次数是速度为 8 次，位置为 3 次。

尝试固定时间步长和推荐的迭代次数，如下所示：

```
float mAccomulated = 0;
float mTimeStep = 1.0f / 60.0f;
int mVelocityIterations = 8;
int mPositionIterations = 3;

void updatePhysicWorld()
{
    float elapsed = Gdx.graphics.getDeltaTime();

    // take into account remainder from previous step
    elapsed += mAccomulated;

    // prevent growing up of 'elapsed' on slow system
    if (elapsed > 0.1) elapsed = 0.1;
    float acc = 0;

    // use all awailable time
    for (acc = mTimeStep; acc < elapsed; acc += mTimeStep)
    {
        mWorld->Step(mTimeStep, mVelocityIterations, mPositionIterations);
        mWorld->ClearForces();
    }

    // remember not used time
    mAccomulated = elapsed - (acc - mTimeStep);
} 
```

# html - 如何更改 struts 中的备用表格行颜色

> ID：14870274
> 
> 赞同：4
> 
> 时间：2013-02-14T08:02:39.960
> 
> 标签：html, css, struts

我正在使用`<logic:iterator>`标签来显示这样的表格数据

```
 <logic:iterate id="LT" name="lastToken" scope="request">
        <tr>
          <td class="TblHometd"><bean:write name="LT"  property="tokennumber" format="#"/></td>
          <td class="TblHometd"><bean:write name="LT"  property="adjustmenttime" format="hh:mm:ss"/></td>
          <td class="TblHometd"><bean:write name="LT"  property="actualfinishedtime" format="hh:mm:ss"/></td>
          <td class="TblHometd"><bean:write name="LT"  property="consultationtype"/></td>
          <td class="TblHometd"><bean:write name="LT"  property="mobileno" format="#"/></td>
          <td class="TblHometd"><bean:write name="LT"  property="consultationstatus"/></td>
          <td class="TblHometd"><bean:write name="LT"  property="smsstatus"/></td>
        </tr>
   </logic:iterate> 
```

现在我想改变`background color for alternate rows`我该怎么做？？？？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:05:16.217

CSS：

```
table#LT tr:nth-child(odd) {
    background-color: #F00; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:34:20.340

用这个

```
 tr td{
       background:yellow
    }
   tr:nth-child(odd) td{    
      background:red
    } 
```

**[演示](http://jsfiddle.net/qk2Lp/2/)**

# ios - iOS，多个 IAP（应用内购买）产品，调用支付方式太快

> ID：14870278
> 
> 赞同：1
> 
> 时间：2013-02-14T08:02:59.667
> 
> 标签：ios, in-app-purchase

在我以前的应用程序中，只有一个 IAP，所以我没有意识到我的代码有问题。今天我有一个包含多个 IAP 产品的应用程序，我发现了问题。

我遵循了[Troy 的 IAP 教程](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)，并且几乎复制了他的代码。这对我以前的应用程序很有效，因为每个应用程序中只有一个 IAP 产品。本教程也使用一个 IAP 产品作为示例。我试图在他的博客上发帖问我的问题，但是我的帖子太长而且没有格式，而且我认为这里的专家可以帮助我了解更多，并检查我是否误解了某些内容或遗漏了某些内容。

现在有两件事我必须处理（除非我错过了，本教程没有提到多个 IAP 产品的案例）。

1、不知道是不是我理解错了，教程里有一个loadStore方法的注释，像这样

```
//
// call this method once on startup
//
- (void)loadStore {
    // restarts any purchases if they were interrupted last time the app was open
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];

    // get the product description (defined in early sections)
    [self requestProUpgradeProductData];
} 
```

所以我在我的应用程序开头的 ViewController.m 文件中调用了这个方法。我的理解是，此方法需要检查是否有任何先前的交易挂在那里，并且需要在应用程序重新启动时处理它。这是这个 loadStore 方法的第一条语句。该方法继续调用 requestProUpgradeProductData，如下所示：

```
- (void)requestProUpgradeProductData {
   NSSet *productIdentifiers = [NSSet setWithObject:@"com.runmonster.runmonsterfree.upgradetopro" ];
    productsRequest = [[SKProductsRequest alloc] initWithProductIdentifiers:productIdentifiers];
    productsRequest.delegate = self;
    [productsRequest start];

    // we will release the request object in the delegate callback
} 
```

注意这里，该方法中的第一条语句是获取 IAP 产品 ID。这对于单 IAP 产品应用程序来说一切都很好，因为产品 ID 是固定的，并且可以在应用程序开始运行时调用 loadStore。实际上， loadStore 可能必须在运行应用程序的开始时运行，因为这是第二个问题。

2、如果 loadStore 在用户想要购买 IAP 的时候运行，而不是在应用程序开始时运行，那么问题是当 [productRequest start] 运行时，会运行以下方法：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSArray *products = response.products;
    proUpgradeProduct = [products count] == 1 ? [[products firstObject] retain] : nil;
    if (proUpgradeProduct)
    {
    NSLog(@"Product title: %@" , proUpgradeProduct.localizedTitle);
    NSLog(@"Product description: %@" , proUpgradeProduct.localizedDescription);
    NSLog(@"Product price: %@" , proUpgradeProduct.price);
    NSLog(@"Product id: %@" , proUpgradeProduct.productIdentifier);
    }

    for (NSString *invalidProductId in response.invalidProductIdentifiers)
    {
    NSLog(@"Invalid product id: %@" , invalidProductId);
    }

   // finally release the reqest we alloc/init’ed in requestProUpgradeProductData
   [productsRequest release]; //I didn't do this because of ARC

    [[NSNotificationCenter defaultCenter] postNotificationName:kInAppPurchaseManagerProductsFetchedNotification object:self userInfo:nil];
} 
```

这将运行并返回产品响应。然后我需要开始付款，但我不确定 HRER 应该如何调用以下方法。这是启动 IAP 付款的方法。正如我所提到的，一旦 loadStore 在应用程序的开头运行，productRequest..response 方法（右上方）有“充足”的时间来完成并发送回通知，因为用户点击这里和那里一秒钟。正如我所说，对于单一 IAP 产品应用程序，这很好，我可以在开头指定产品 ID。现在对于具有多个 IAP 产品的应用程序，我需要向用户展示多个产品，并且用户选择其中一个。在此之后，我需要按顺序做两件事：A，通过 loadStore -> productRequest 方法（右上方）指定哪个 IAP 产品，以及 B，调用以下方法来发起付款。

```
- (void)purchaseProUpgrade
{
    SKPayment *payment = [SKPayment paymentWithProductIdentifier:kInAppPurchaseProUpgradeProductId];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
} 
```

但是，在我调用付款发起方法时，productRequest.....response 方法可能还没有返回。我将无法开始付款。我想在大约一秒钟之间放置一个延迟功能，但我认为这种方法从根本上是错误的。然而，如何解决问题？

有人可以在这里帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:39:27.217

关键是您不能允许用户购买任何东西，直到您从`productsRequest`. 首先，`initWithProductIdentifiers:`采用一组标识符。因此，在应用程序启动时或在向用户提供购买选项之前的任何其他时间，您可以使用您可能允许用户购买的所有产品的标识符/skus 调用它。在启动时调用它对我来说似乎很浪费，但它也应该可以工作，并且可能是某些应用程序的唯一选择。

只有在您获得`productsRequest:didReceiveResponse:`包含产品对象的回调后，您才允许用户单击/触摸或以其他方式调用该产品的购买操作。在允许用户尝试购买之前，您必须检查响应以确保产品存在。我有一个购买屏幕，当用户进入它时，我会调用`productsRequest`与应用程序当前状态相关的所有产品（例如，忽略已购买的项目或按级别限制产品）。我还创建了购买屏幕，但我没有使用任何产品填充它。在响应委托中，我实际上用可购买的对象填充了屏幕。这样，用户就不能尝试购买无效产品。

当用户点击/点击时，您使用响应中的产品对象来创建支付对象：

```
[SKPayment paymentWithProduct:product] 
```

请注意，这是对您当前使用的设置的更改`paymentWithProductIdentifier:`- 不推荐使用的方法。

# ruby-on-rails - 将我的 rails 2.3.3 项目升级到 2.3.17 时出现 active_support/whiny_nil.rb:52:in `method_missing' 错误

> ID：14870279
> 
> 赞同：0
> 
> 时间：2013-02-14T08:03:03.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-2

我们的 rails 项目版本是 2.3.3。然而，最近我们决定将 rails 版本升级到 2.3.17 以修补安全漏洞。

但是在升级我的 rails gem 之后，我得到了以下错误。有没有人有同样的问题？

```
benjamins-iMac:webapp benjamin$ script/server
=> Booting WEBrick
=> Rails 2.3.17 application starting on http://0.0.0.0:3000
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/rails-2.3.17/lib/rails/gem_dependency.rb:21.
/Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/activerecord-2.3.17/lib/active_record/associations.rb:48: warning: already initialized constant HasManyThroughCantAssociateThroughHasManyReflection
/Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-2.3.17/lib/active_support/whiny_nil.rb:52:in `method_missing': undefined method `name' for nil:NilClass (NoMethodError)
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/rails-2.3.17/lib/initializer.rb:445:in `initialize_database_middleware'
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/rails-2.3.17/lib/initializer.rb:182:in `process'
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/rails-2.3.17/lib/initializer.rb:113:in `send'
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/rails-2.3.17/lib/initializer.rb:113:in `run'
  from /Users/benjamin/clue/webapp/config/environment.rb:6
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:182:in `require'
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:182:in `require'
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:547:in `new_constants_in'
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/activesupport-2.3.17/lib/active_support/dependencies.rb:182:in `require'
  from /Users/benjamin/.rvm/gems/ruby-1.8.7-p370/gems/rails-2.3.17/lib/commands/server.rb:84
  from script/server:3:in `require'
  from script/server:3
benjamins-iMac:webapp benjamin$ 
```

的`ruby-1.8.7-p370/gems/rails-2.3.17/lib/initializer.rb:445`代码是

```
ActionController::Base.session_store.name == 'ActiveRecord::SessionStore' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:20:12.313

我解决了这个问题。答案就在这里。
[http://johnpwood.net/2009/09/04/disabling-sessions-in-rails-2-3-4/](http://johnpwood.net/2009/09/04/disabling-sessions-in-rails-2-3-4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:15:11.337

错误永远不足以单独解决。然而，这么简单的事情，你跑了吗： `sudo rake gems:install`已经？

此外，您的 ActiveRecord 模型必须存在数据库列才能获取。如果初始状态是“无数据库”并且随后的 rake 任务调用模型，那么它将在 nils 上阻塞。我`environment.rb`在堆栈跟踪中看到，所以我认为它已经到了那么远......

所以你应该注意，如果你从旧版本升级到新版本，那么`environment.rb`文件也需要与其他文件分开更改。仔细查看您需要专门完成`initializer`任务的更改，因为根据错误日志，所有问题都存在。

# c# - 将控件与后面代码中的资源键相关联

> ID：14870284
> 
> 赞同：1
> 
> 时间：2013-02-14T08:03:25.693
> 
> 标签：c#, asp.net

有什么方法可以将诸如 a 之类的控件`nameLabel`与后面代码中的本地资源键相关联。

我通常使用如下属性从*html*`meta:resourcekey`执行此操作：

```
<asp:Label ID="nameLabel" runat="server" 
    meta:resourcekey="nameLabel" /> 
```

谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:07:10.477

利用：

```
nameLabel.Text = Resources.Resource1.nameLabel; 
```

这里：

Resource1 是位于 App_GlobalResources 文件夹中的资源文件 (Resource1.resx) 的名称

检查此以获取详细信息：

[如何：以编程方式检索资源值](http://msdn.microsoft.com/en-us/library/ms227982%28v=vs.80%29.aspx)

[ASP.NET 本地化](http://www.codeproject.com/Articles/38907/ASP-NET-Localization-Quick-Reference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T10:40:28.610

利用：

```
btn.Text = GetLocalResourceObject("Resource Key").ToString(); 
```

您将自动从 App_Localresources 中的期望资源键中获取值。

# android - 我可以以编程方式触发 Google Play 的接受和购买按钮吗？

> ID：14870286
> 
> 赞同：0
> 
> 时间：2013-02-14T08:03:34.750
> 
> 标签：android, in-app-billing, google-play-services

我从 android 开发者那里下载了用于应用内计费的 v3 示例项目并开始使用它。它工作正常。我可以在不单击 Accept & Buy 按钮的情况下执行 PerformClick() 吗？

专门针对视力低下的人。

![在此处输入图像描述](../Images/6d7c4b432f51592ff0b6ecd260c12578.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T08:10:33.160

你不能那样做。`Google API`会处理的。您将在金融交易完成后（如果 apptype 已支付）作为 nonce 对象获得响应。根据响应，您必须处理应用程序状态。

[在此处](http://developer.android.com/intl/ja/google/play/billing/billing_overview.html#checkout)查看应用购买流程

# java - 登录后取回CAS票

> ID：14870287
> 
> 赞同：1
> 
> 时间：2013-02-14T08:03:42.223
> 
> 标签：java, spring-mvc, spring-security, single-sign-on, cas

我有一个 cassified Spring 应用程序（带有过滤器并且运行正常）。

此应用程序必须通过 REST 查询多个外部服务（Bonita、W4 等）。这些其他服务也被分类了。

好的。

现在，我需要从 Spring 应用程序中恢复 CAS TICKET 以生成这些其他服务的代理票证，但我不知道如何获得票证。我尝试使用此 URL 为这些服务请求票证：

```
https://[cas-service]/login?service=[service]&gateway=true 
```

此命令返回票证（通过重定向），但 Spring 应用程序的 CAS 过滤器拦截此重定向，我无法获取返回的参数。

```
http://[service-url]?ticket=ST-.... 
```

重定向到

```
http://[service-url] 
```

如何检索票证以验证当前用户是否进入其他服务？

谢谢！！

PD：对不起我有限的英语...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:22:31.753

```
SecurityContext ctx=SecurityContextHolder.getContext();
CasAuthenticationToken casToken=(CasAuthenticationToken) ctx.getAuthentication();
Assertion assertion=casToken.getAssertion();
user_fullName=(String) assertion.getAttributes().get("FullName"); 
```

从安全上下文中，您可以获取经过身份验证的 CAS 令牌对象。其中有 SAML 响应。CAS 令牌对象具有 SAML 响应的详细信息。您可以查询 CAS 令牌对象以获取 ASSERTION，您可以在您的应用程序中使用它。

# java - 抛出异常表单覆盖方法，没有在 org 方法接口上定义异常

> ID：14870288
> 
> 赞同：1
> 
> 时间：2013-02-14T08:03:56.293
> 
> 标签：java, exception, exception-handling, eclipse-emf

我正在从 org.eclipse.emf.transaction.RecordingCommand 扩展类 RecordingCommand；我需要重写受保护`doExecute()`的方法，方法定义不包含任何要抛出的异常，但是在我的代码中有一个选项，我有异常，我想捕获它并引发它，我应该如何处理这种异常，在这里我抛出消息`e`，但我不确定这是正确的方法。

我希望你能理解这个问题，因为**我认为抛出 E 更复杂**

iethrow 异常

```
@Override 
protected void doExecute() {
    try { 
        //my logic
   } catch(Exception e) {
        throw e;
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T08:06:15.903

你总是可以`UncheckedException`从一个方法中抛出一个不需要在`throws`子句中声明的方法。

因此，您将异常包装在任何未经检查的异常中，例如扩展[`RuntimeException`](http://docs.oracle.com/javase/7/docs/api/java/lang/RuntimeException.html)甚至`RuntimeException`本身。

```
try {
    //my logic
} catch(Exception e) {
     throw new RuntimeException(e);
} 
```

并且为了完整起见，使用单个`catch`块 for是一个坏主意`Exception`，它将捕获所有异常。相反，您应该`catch`阻止您的方法可能抛出的特定类型的异常。

# jsf - 从支持 bean 添加 JSF 自定义组件

> ID：14870291
> 
> 赞同：0
> 
> 时间：2013-02-14T08:04:07.893
> 
> 标签：jsf, jsf-2, primefaces

我想知道是否可以从支持 bean 将自定义复合组件添加到视图中？

我在 /resources/comp/component1.xhtml 中有自定义组件，带有基本`<cc:interface>`和`<cc:implementation>`. 然后我有一个创建 Primefaces 仪表板的 bean（工作正常；[http](http://www.wobblycogs.co.uk/index.php/computing/jee/49-dynamic-dashboard-with-primefaces) ://www.wobblycogs.co.uk/index.php/computing/jee/49-dynamic-dashboard-with-primefaces ）。我现在想从仪表板的支持 bean 将 component1 添加到仪表板。这是可能的还是我必须创建仪表板面板并使用“渲染”属性来隐藏组件以备不时之需？

这样做的主要思想是创建用户特定的仪表板，以便用户可以在仪表板中添加自定义小部件和更改顺序。

谢谢！

# shell - Shell 脚本不编码 ASCII

> ID：14870293
> 
> 赞同：0
> 
> 时间：2013-02-14T08:04:09.887
> 
> 标签：shell, character-encoding, ascii

我下载了一个 shell 脚本，用于将 OpenVPN 文件和证书转换为 .apc 文件，以便与 Sophos UTM 9 一起使用。可以在[此处](https://www.gitorious.org/admintools/ovpn-to-apc)找到该脚本，并且看起来运行良好。

问题是输出似乎没有被编码（我相信这是正确的术语）。

当我将脚本的输出与从 Notepad++ 中的 UTM 下载的 .apc 文件进行比较时，脚本输出以

```
\x04\x06\x04 
```

而正确编码的文件看起来像

```
EOT BEL EOT 
```

当我尝试导入脚本的输出时它失败了，我相信这是因为 ASCII 字符没有被正确编码。

无论如何我可以编码所有的 \x?? 到正确的字符？或者有什么办法可以让 .sh 输出已经编码的字符？

作为参考，shell脚本具有以下功能

```
write_header() {
    printf "\x04\x06\x041234\x04\x04\x04\x08\x03\x0c\x00\x00\x00\x0a" > ${ApcFile}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:07:48.127

`\x04`您不应该在生成的文件中看到任何字符。该脚本仅对控制字符使用十六进制表示。

如果你`printf "\x04\x06test"`在你的 shell 上执行，你应该看到“test”，如果你把它输入到一个 hexdumper，`xxd`你应该得到以下

```
# printf "\x04\x06test" | xxd
0000000: 0406 7465 7374                           ..test 
```

标头序列

```
printf "\x04\x06\x041234\x04\x04\x04\x08\x03\x0c\x00\x00\x00\x0a" 
```

转换为（包含在 [] 括号中以进行说明的控制字符）

```
[EOT] [ACK] [EOT] 1234 [EOT] [EOT] [EOT] [BS] [ETX] [FF] [NUL] [NUL] [LF] 
```

有趣的是：您说工作文件以 开头`EOT BEL EOT (\x04 \x07 \x08)`，脚本生成的输出文件以 开头`EOT ACK EOT`（这是有道理的）

反问：

*   在 vi 等文本编辑器中查看输出文件时，您是否看到了十六进制表示形式的控制字符？
*   您在哪种操作系统上执行此操作？
*   有趣的问题：`.- .-. . / -.-- --- ..- / .-. . .-.. .- - . -.. / - --- / ... .- -- ..- . .-.. / -- --- .-. ... . / ... - --- .--.`

# php - Javascript字符串压缩和PHP/Ruby解压

> ID：14870296
> 
> 赞同：6
> 
> 时间：2013-02-14T08:04:35.640
> 
> 标签：php, javascript, ruby, compression

是否有用于字符串的 Javascript 压缩和 PHP/Ruby 解压缩库？我需要它，因为我需要使用 Ajax 在慢速上传链接上向使用 PHP/Ruby 作为服务器端语言的 Web 服务器发送一个很长的文本字符串。

```
var x = $('#sources').html();
// a very-very long text
var xo = x, o = {};
if(x.length>512*1024) {
  x = compress(x);
  o.c = 1;
}
o.x = x;
$.post('target.php',o,function(res){alert(res==xo)}); 
```

在服务器端（例如 PHP）：

```
<?php
  if(isset($_POST['c']) && $_POST['c']=='1') {
    $x = decompress($_POST['x']);
  } else {
    $x = $_POST['x'];
  }
  echo $x; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T08:05:56.603

最常见的压缩算法 Zip 有许多 JS 实现。

例如[zip.js](http://gildas-lormeau.github.com/zip.js/)

PHP当然也[支持](http://php.net/manual/en/zip.examples.php)Zip 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T08:07:50.443

应该这样做

[http://webdevwonders.com/lzw-compression-and-decompression-with-javascript-and-php/](http://webdevwonders.com/lzw-compression-and-decompression-with-javascript-and-php/)

LZW 适用于实际包含人类可读文本的字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T04:15:43.393

运行谷歌搜索“ruby decompress string”会得到这个：[How to decompress Gzip string in ruby​​?](https://stackoverflow.com/questions/1361892/how-to-decompress-gzip-string-in-ruby) 这就是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T08:13:37.160

假设您通过 http 发送文件，我建议您让 Web 服务器通过发送带有 gzip 内容编码的文件来处理此问题。

例如，如果您使用 Apache，则可以启用[`mod_deflate`](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)

如果由于某种原因您无法更改 Web 服务器配置，则 php 也有一个内置的 gzip 处理程序，您可以使用它来代替。看：[`ob_gzhandler`](http://php.net/manual/en/function.ob-gzhandler.php)

编辑：

至于客户端到服务器，任何 XmlHttpRequest 实现似乎都不直接支持这一点。您也许可以为 Javascript 找到一个自定义的 gzip 压缩算法，然后设置请求标头以指示它已压缩。这样它就可以被 Web 服务器透明地解码，您不必在 php.ini 中做任何特殊的事情。

请参阅此页面：[Gzip 的 JavaScript 实现](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)。

# jasper-reports - 跨越多个页面的详细信息带

> ID：14870299
> 
> 赞同：1
> 
> 时间：2013-02-14T08:04:50.103
> 
> 标签：jasper-reports, ireport

我正在使用 ireports 5.0.1。我有一个非常大的细节带（高度 2313）。导出为 PDF 后，生成的文件不适合打印。如何跨越多个页面？（只需 2 页即可）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T11:59:13.880

条带的最大高度是没有顶部和底部边距的页面高度，不可能将单个条带拆分到多个页面上。根据您的报告设计，您可能会添加第二个详细信息带并在那里移动第二页的项目。为了强制执行分页符，您可以使用分页符元素。

# ios - 一行中的两个 UITableViewCells

> ID：14870300
> 
> 赞同：1
> 
> 时间：2013-02-14T08:04:50.540
> 
> 标签：ios, uitableview

有人可以解释如何将两个 uitableview 单元格放在一行中，根据下面的带有 +353 和电话号码的 whatsapp 屏幕截图吗？谢谢

![在此处输入图像描述](../Images/748b86731cfb8ea84a25cef31d8728ff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:10:10.060

它们可能只是`UITextField`单个表格单元格中的两个 s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:11:29.273

有几种方法可以实现这一点。

1.  您可以像在 UIView 中一样设计整体并添加到单元格中。
2.  创建仅创建用于电话号码输入的视图并添加到表格的页脚并将其他保留为单元格。

# solr - Solr 3.5 字段类型

> ID：14870302
> 
> 赞同：0
> 
> 时间：2013-02-14T08:05:01.130
> 
> 标签：solr, lucene, zend-search-lucene

我在当前工作的应用程序中使用 Solr 3.5。我已经将一些字段类型定义为自定义，它们将是一个前缀值。

大多数情况下，它们是每个前缀都不同的价格。

示例 123_34.99 将定义商店“123”中的价格“34.99”。

我需要知道 Solr 4.1.0 中是否有任何确切/类似的 Out of Box 字段类型来处理上述字段类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T05:11:10.883

我想存储数据的更好方法是使用[Solr 动态字段](https://wiki.apache.org/solr/SchemaXml#Dynamic_fields)。与其将数据存储为 123_34.99，不如将其存储在类似的`price_STOREID`字段中

```
price_123 = 34.99 
```

或者是否有特定原因要将其存储为`123_34.99`？

# android - Android 3.0及以上版本无法从res中获取xml数据

> ID：14870304
> 
> 赞同：4
> 
> 时间：2013-02-14T08:05:16.403
> 
> 标签：android, dom, xml-parsing

[类似问题](https://code.google.com/p/android/issues/detail?id=38929)

`xml`我现在保留了一些预定义的内容，我`res>raw>first.xml`在运行时获取并显示如下数据：

```
NodeList nodes = MainActivity.commonmethod.GetDocumentFile(ProductActivity.this,_intRowID).getElementsByTagName("string");

for (int i = 0; i < nodes.getLength(); i++) {                           

            Element e = (Element)nodes.item(i);
            e.normalize();

                    _ArrProductName.add( MainActivity.commonmethod.getValue(e, "string"));              
            } 
```

*使用文档获取 XML 文件（Plist 文件）的方法*

```
public Document GetDocumentFile(Context context, int rawID) {
    DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
    builderFactory.setNamespaceAware(true);
    DocumentBuilder builder = null;
    try {
        builder = builderFactory.newDocumentBuilder();

        document = builder.parse(context.getResources().openRawResource(
                rawID));
        document.getDocumentElement().normalize();
    } catch (Exception e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
    return document;
} 
```

*获取值方法*

```
public String getValue(Element item, String str) {
        NodeList n = item.getElementsByTagName(str);

        try {
            StringWriter sw = new StringWriter(); 
            Transformer serializer = TransformerFactory.newInstance().newTransformer(); 
            serializer.transform(new DOMSource(n.item(0)), new StreamResult(sw));   
            String result = sw.toString(); 

            System.out.println("result="+result);

        } catch (Exception e) {
            e.printStackTrace();
        }

        return CommonMethod.getElementValue(n.item(0));
    }

    public final static String getElementValue(Node elem) {
        Node kid;
        if (elem != null) {
            if (elem.hasChildNodes()) {
                for (kid = elem.getFirstChild(); kid != null; kid = kid
                        .getNextSibling()) {
                    if (kid.getNodeType() == Node.TEXT_NODE) {
                        return kid.getNodeValue();
                    }
                }
            }
        }
        return "";
    } 
```

**测试.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>

    <array>
       <!-- PrdocuName -->
       <string>Android ICS 4.0™&lt;/string>

     <!-- PrdocutDescription -->
       <string>Mobile</string>

       <!-- PrdocuImage -->
       <string>Mobile.png</string>

      <!-- PrdocuAddress -->
       <string>url</string>

        <!-- Conversion -->
       <integer>400</integer>

      <!-- ThicknessNames -->
       <string>skim</string>

       <!-- ThicknessValues -->
       <string>1</string>

      <!-- LongDescription -->
       <string>Android is the market leader in terms of total number of device sold and soon it will be leader in terms of total number of application available in the market.</string>

    </array> 
```

以上整个代码在 4.0 以下但不高于 4.0 时工作良好，getElementsByTagName`在 4.0 以上返回 null 结果。

结果低于4.0

```
<?xml version="1.0" encoding="UTF-8"?><string>Android ICS 4.0™&lt;/string> 
```

结果高于 4.0

```
<?xml version="1.0" encoding="UTF-8"?> 
```

`String tag`在 4.0 以上测试时丢失，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:09:53.497

最后我实现了，对`getvalue`函数内部进行了修改；

更改代码：

```
public String getValue(Element item, String str) {

        String strResponse="";
        Node kid;
        if(item!=null)
        {
            if(item.hasChildNodes())
            {
                for(kid=item.getFirstChild(); kid!=null; kid =kid.getNextSibling())
                {
                    if (kid.getNodeType() == Node.TEXT_NODE) {
                        strResponse =kid.getNodeValue();
                        return strResponse;
                    }
                }
            }else
            {
                NodeList n = item.getElementsByTagName(str);
                n = item.getChildNodes();

                if(((Node) n.item(0))!=null)
                {
                    if(((Node) n.item(0)).getNodeValue() !=null)
                    {
                        strResponse =((Node) n.item(0)).getNodeValue();
                        return strResponse;
                    }else
                    {
                        strResponse ="";
                    }
                }

            }
        }

        return strResponse;

    } 
```

它的作品完美！

# java - Java：寻找一个库来读取 LDAP 数据

> ID：14870306
> 
> 赞同：3
> 
> 时间：2013-02-14T08:05:21.097
> 
> 标签：java, ldap

我需要编写一个应用程序，它将从 LDAP 服务器导出一些数据并将其存储在 MySQL DB 中。有没有合适的Java库？

到目前为止，我发现的只是在 SO 问题之一中提到了 jLDAP，但是我发现的站点提供了两个 jldap 二进制文件：一个用于 Windows，一个用于 Unix，而不是我预期的单个 jar 文件。

将感谢有关使用 Java 导出 LDAP 数据的任何提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:13:01.347

看看[Apache Directory Client API](http://directory.apache.org/api/five-minutes-tutorial.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T09:23:13.170

UnboundID LDAP SDK for Java 是免费的、开源的、功能丰富的、积极开发的，并且没有任何外部依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:44:07.490

您还可以尝试[Novell LDAP java 库](http://www.novell.com/developer/ndk/ldap_classes_for_java.html)

# sql-server - sql server x64 访问 x86 COM 对象

> ID：14870308
> 
> 赞同：1
> 
> 时间：2013-02-14T08:05:29.853
> 
> 标签：sql-server

我想将数据库从 SQL Server 2000 x86 转移到 SQL Server 2008 R2 x64，但它使用了一个我不知道的 x86 COM 对象。我知道有一些关于同一主题的文章，但我的问题略有不同。

为代理激活注册 DLL 服务器后，我可以使用 sp_OACreate 连接到 COM 对象而没有错误，但是 sp_OASetProperty 返回 -2147352565 并且 sp_OAGetErrorInfo 返回错误源“ODSOLE 扩展过程”和错误描述“无效索引”。

# android - Android在禁用它后重新启用listview中的listitem

> ID：14870311
> 
> 赞同：2
> 
> 时间：2013-02-14T08:05:56.947
> 
> 标签：android, listview, android-view, listitem, viewgroup

我有一个`BaseActivity`which extends`Activity`和所有其他活动都扩展了 this `BaseActivity`。

我所做的是处于我的应用程序状态，我想禁用屏幕上的所有项目，`BaseActivity`然后使用以下代码再次启用它们：

```
private void DisableChildClickEvents(ViewGroup viewGroup, boolean enabled) {
    for (int i = 0; i < viewGroup.getChildCount(); i++) {
        View childView = viewGroup.getChildAt(i);
        childView.setClickable(enabled);
        childView.setEnabled(enabled);
        if (childView instanceof ViewGroup) {
            DisableChildClickEvents((ViewGroup)childView, enabled);
        }
    }
} 
```

我`ListView`在其中一个活动中遇到的问题是此代码禁用它并单击它的项目，但它无法再次单击它们。这`ListItem`表明它可以被单击并且在单击时它的颜色会发生变化，但是在禁用它们之后应该执行的操作是不可访问的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:52:43.897

试试这个：

```
if (childView instanceof ListView) {
               if (enabled == true) {
                   ListView list = (ListView) childView;
                   list.getOnItemClickListener();
               } 
```

# php - IPN Post 数据、来自 IPN 模拟器的提交和来自实际购买的提交包含不同的键名

> ID：14870314
> 
> 赞同：0
> 
> 时间：2013-02-14T08:06:01.053
> 
> 标签：php, paypal, paypal-ipn

我最初认为我的 IPN 脚本在从沙盒用户生成的事务中发送时根本没有收到任何发布数据，但数据实际上是存在的，与 IPN 模拟器相比，该数组对于每个变量都有不同的键名. 我在 Google 上进行了搜索，但并没有真正找到任何有相同问题或解决方案的人。

我在来自用户事务的发布数据中注意到它有一个未设置的“版本”变量，你认为 IPN 模拟器使用的是更高版本的密钥不同的名称吗？

以前有没有人遇到过这种情况，或者也许可以阐明造成这种情况的原因？

这是来自 IPN 模拟器的发布数据：

```
 ["test_ipn"]=>
  string(1) "1"
  ["payment_type"]=>
  string(7) "instant"
  ["payment_date"]=>
  string(25) "22:58:32 Feb 13, 2013 PST"
  ["payment_status"]=>
  string(9) "Completed"
  ["address_status"]=>
  string(9) "confirmed"
  ["payer_status"]=>
  string(8) "verified"
  ["first_name"]=>
  string(4) "John"
  ["last_name"]=>
  string(5) "Smith"
  ["payer_email"]=>
  string(23) "buyer@paypalsandbox.com"
  ["payer_id"]=>
  string(13) "TESTBUYERID01"
  ["address_name"]=>
  string(10) "John Smith"
  ["address_country"]=>
  string(13) "United States"
  ["address_country_code"]=>
  string(2) "US"
  ["address_zip"]=>
  string(5) "95131"
  ["address_state"]=>
  string(2) "CA"
  ["address_city"]=>
  string(8) "San Jose"
  ["address_street"]=>
  string(15) "123, any street"
  ["business"]=>
  string(24) "seller@paypalsandbox.com"
  ["receiver_email"]=>
  string(24) "seller@paypalsandbox.com"
  ["receiver_id"]=>
  string(13) "TESTSELLERID1"
  ["residence_country"]=>
  string(2) "US"
  ["item_name"]=>
  string(9) "something"
  ["item_number"]=>
  string(7) "AK-1234"
  ["quantity"]=>
  string(1) "1"
  ["shipping"]=>
  string(4) "3.04"
  ["tax"]=>
  string(4) "2.02"
  ["mc_currency"]=>
  string(3) "USD"
  ["mc_fee"]=>
  string(4) "0.44"
  ["mc_gross"]=>
  string(5) "12.34"
  ["mc_gross_1"]=>
  string(4) "9.34"
  ["txn_type"]=>
  string(10) "web_accept"
  ["txn_id"]=>
  string(8) "32214658"
  ["notify_version"]=>
  string(3) "2.1"
  ["custom"]=>
  string(6) "xyz123"
  ["charset"]=>
  string(12) "windows-1252"
  ["verify_sign"]=>
  string(56) "A2O3KRKURYa65AG.dmp.MoIqMpDwAmL2IgMH3fAcOss.ur6ERwozl2ty"
} 
```

这是我在沙盒帐户上的交易数据：

```
 ["transaction%5B0%5D.is_primary_receiver"]=>
  string(4) "true"
  ["transaction%5B0%5D.id_for_sender_txn"]=>
  string(17) "5SF603183Y786454Y"
  ["log_default_shipping_address_in_transaction"]=>
  string(5) "false"
  ["transaction%5B0%5D.receiver"]=>
  string(37) "sell1_1360732717_biz@derp.com.au"
  ["action_type"]=>
  string(3) "PAY"
  ["ipn_notification_url"]=>
  string(45) "http://portal.derp.com.au/ipn.php"
  ["transaction%5B1%5D.paymentType"]=>
  string(7) "SERVICE"
  ["transaction%5B0%5D.amount"]=>
  string(10) "AUD 199.00"
  ["charset"]=>
  string(12) "windows-1252"
  ["transaction_type"]=>
  string(20) "Adaptive Payment PAY"
  ["transaction%5B1%5D.id_for_sender_txn"]=>
  string(17) "60334361SH094251D"
  ["transaction%5B1%5D.is_primary_receiver"]=>
  string(5) "false"
  ["transaction%5B0%5D.status"]=>
  string(9) "Completed"
  ["notify_version"]=>
  string(11) "UNVERSIONED"
  ["transaction%5B0%5D.id"]=>
  string(17) "8WL542056F860892D"
  ["cancel_url"]=>
  string(38) "http://portal.derp.com.au/"
  ["transaction%5B1%5D.status_for_sender_txn"]=>
  string(9) "Completed"
  ["transaction%5B1%5D.receiver"]=>
  string(37) "sell2_1360732814_biz@derp.com.au"
  ["verify_sign"]=>
  string(56) "An5ns1Kso7MWUdW4ErQKJJJ4qi4-A-p4knnXsUdoGkBReiFAIhHXAyN9"
  ["sender_email"]=>
  string(36) "buy1_1360732893_per@derp.com.au"
  ["fees_payer"]=>
  string(12) "EACHRECEIVER"
  ["transaction%5B0%5D.status_for_sender_txn"]=>
  string(9) "Completed"
  ["return_url"]=>
  string(53) "http://portal.derp.com.au/?p=paypalreturn"
  ["transaction%5B0%5D.paymentType"]=>
  string(7) "SERVICE"
  ["transaction%5B1%5D.amount"]=>
  string(9) "AUD 10.00"
  ["reverse_all_parallel_payments_on_error"]=>
  string(5) "false"
  ["tracking_id"]=>
  string(9) "9ZZVg7JNp"
  ["transaction%5B1%5D.pending_reason"]=>
  string(4) "NONE"
  ["pay_key"]=>
  string(20) "AP-6P166651K3308681V"
  ["transaction%5B1%5D.id"]=>
  string(17) "66117669L4710640J"
  ["transaction%5B0%5D.pending_reason"]=>
  string(4) "NONE"
  ["status"]=>
  string(9) "COMPLETED"
  ["transaction%5B1%5D.status"]=>
  string(9) "Completed"
  ["test_ipn"]=>
  string(1) "1"
  ["payment_request_date"]=>
  string(28) "Wed Feb 13 22:41:09 PST 2013"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T03:59:40.147

你朝着正确的方向前进。这取决于您要模拟的 IPN 类型。IPN 模拟器已经存在了一段时间，它出现在自适应支付之前。因此，它不会生成来自自适应支付的 IPN POST。这可能会在未来实现，但目前这不允许您通过它模拟 AP 交易。如果您想通过自适应支付测试 IPN，您需要通过流程并使用您的测试沙盒买家账户向您的测试沙盒卖家账户付款。IPN 模拟器正在返回您使用 DoDirectPayment API、Web Accept 等看到的变量。

# c# - 选择更改时显示来自 datagridview 的图像

> ID：14870315
> 
> 赞同：0
> 
> 时间：2013-02-14T08:06:03.577
> 
> 标签：c#, winforms, datagridview, oledb

我有一个带有数据源 MS Access 的 datagridview，我使用 Ole Object 数据类型。数据显示在datagridview中，但是我希望在单击行/项目时将图像放置在图片框中，我尝试了此代码，但没有任何反应

```
private void dataGridView1_SelectionChanged(object sender, EventArgs e)
        {
            if (dataGridView1.SelectedRows.Count > 0)
            {
                pictureBox2.Image = (Image)dataGridView1.SelectedRows[0].Cells["Picture"].Value;
            }
        } 
```

你能帮我解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:25:10.857

试试这个

```
private void dataGridView1_SelectionChanged(object sender, EventArgs e)
        {
            if (dataGridView1.SelectedRows.Count > 0)
            {
                MemoryStream ms = new MemoryStream(dataGridView1.SelectedRows[0].Cells["Picture"].Value);
                pictureBox2.Image = Image.FromStream(ms);
            }
        } 
```

# .net - VC++ 2012 中的 Windows 窗体应用程序‏

> ID：14870317
> 
> 赞同：0
> 
> 时间：2013-02-14T08:06:09.413
> 
> 标签：.net, winforms, visual-c++, visual-studio-2012, c++-cli

我想知道在 MS Visual Studio 2012 中删除“Windows 窗体应用程序”选项的问题。我看到[此页面](http://connect.microsoft.com/VisualStudio/feedback/details/747648/no-windows-forms-aplication-project-template-for-c-in-vs2012-rc-ultimate)中的评论说：

> C++/CLI 是一个很好的互操作解决方案，但我们不建议使用 C++/CLI 创建全新的 UI 应用程序。

为什么不推荐使用 C++/CLI 创建全新的 UI 应用程序？我曾经通过 C++/CLI 创建我的 UI 应用程序。

# jquery - 手风琴与图像作为开关按钮

> ID：14870319
> 
> 赞同：0
> 
> 时间：2013-02-14T08:06:11.897
> 
> 标签：jquery, html, css, accordion

我有一个代码示例，用于手风琴

就在这儿

[http://jsfiddle.net/hDRMP/18/](http://jsfiddle.net/hDRMP/18/)

问题是，

我想将 Lorem/Ipsum 更改为图像。
所以它就像打开关闭按钮，
点击 image1，手风琴打开 + image1 变成 image2。
image2 点击，手风琴关闭 + image2 变成 image1

我已经通过它做了一些修改。

CSS

```
.accordionButton a{
    display: inline-block;
    position: absolute;
    width: 44px;
    height: 44px;
    background:url(image1.png) 0 0 no-repeat;
    text-indent: -9999px;
    cursor:pointer;
    }
.on{
    background:url(image2.png) 0 0 no-repeat;
    float: left;
    cursor:pointer;
    }
.over{
    background:url(image1.png) 0 0 no-repeat;
    float: left;
    cursor:pointer;
    } 
```

有人可以帮忙吗？
谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:08:53.083

您可以通过`a`从容器中完全删除元素`accordionButton`并使用示例中显示的背景图像来做到这一点。然后你只需要添加正确的 CSS 样式。

HTML

```
<div class="accordion">
    <div class="accordionButton"></div>
    <div class="accordionContent">
        ...
    </div>
    <div class="accordionButton"></div>
    <div class="accordionContent">
        ...
    </div>
</div> 
```

CSS

```
.accordionButton, .accordionContent {
    text-align: center;
    width: 100%;
}
.accordionButton {
    width: 136px; /* height of the image used */
    height: 23px; /* width of the image used */
    margin: 0 auto;
    cursor: pointer;
    background: url(accordionbutton.png) no-repeat;
}
.accordionButton.over,
.accordionButton.on.over {
    background: url(accordionbutton_hover.png) no-repeat;
}
.accordionButton.on {
    background: url(accordionbutton_active.png) no-repeat;
} 
```

**建议：**为了更具响应性的交互，我建议为按钮状态图像使用[精灵表](http://webdesign.tutsplus.com/tutorials/htmlcss-tutorials/css-sprite-sheets-best-practices-tools-and-helpful-applications/)，这样当您第一次更改状态时就不会出现明显的负载转换。

[jsfiddle](http://jsfiddle.net/BWMXx/2/)

# java - 为什么这个“如果”是“死代码”？

> ID：14870323
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:06:30.737
> 
> 标签：java

我有以下代码：

```
/** Width of each brick in pixels */
    private static final int BRICK_WIDTH = 11; 

/** Width of each brick in pixels */
    private static final int BRICK_HEIGHT = 12;

/** Number of bricks in the base of the pyramid */
    private static final int BRICKS_IN_BASE = 14;

public void run () {

    int LowerLeftSide;
    if (BRICK_WIDTH / 2 == 0)
    {
         LowerLeftSide = ((getWidth()/2) - (BRICK_WIDTH*(BRICKS_IN_BASE/2)));
    }else 
         LowerLeftSide = ((getWidth()/2) - (BRICK_WIDTH*(BRICKS_IN_BASE/2-1))); 
```

eclipse 将整个标记`if`为死代码。我在 run 方法的最开始初始化值。

谢谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-14T08:11:01.520

看起来`BRICK_WIDTH`是一个常量，因此`BRICK_WIDTH/2`在编译时就知道了，eclipse 知道将采用哪条路径，所以另一个是死代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-14T08:11:57.053

当您使用大写字母时，`BRICK_WIDTH`我假设您将其定义为常数（`final`）？然后，除非`BRICK_WIDTH == 0`（或 1 并且可能 -1 假设它是一个`int`），`BRICK_WIDTH / 2`永远不会是 0。因此永远不会到达 if 下的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:10:27.430

编辑：我的回答完全错误。

的价值是`BRICK_WIDTH`多少？如果它为零，那么那个井总是执行，它永远不会进入`else`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T08:54:03.777

@oalsing 你是对的，但是在 BRICK_WIDTH = 1 的情况下，eclipse 会说 else 块是死代码并比较相同的表达式，因为值是硬编码的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T09:46:13.687

当您为循环提供的条件永远不会为真时，您的 IDE 会调用代码死代码，因此程序永远不会使用条件块中的代码。

因此，编写一些语法正确但永远不会使用的代码行是不合逻辑的。这就是为什么按照惯例将其称为 DEAD CODE 。

你可能会遇到类似的情况

```
while(false){}
if(false){} 
```

在你的情况下

```
private static final int BRICK_WIDTH = 11;
if (BRICK_WIDTH / 2 == 0){} 
```

因为你的变量是最终定义的，所以编译器知道它永远不会改变它的值，因此条件永远不会是真的。所以按照惯例，它被称为死代码。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-02-14T08:09:52.513

```
{   
int LowerLeftSide;
if ((BRICK_WIDTH / 2) == 0) {
     LowerLeftSide = ((getWidth()/2) - (BRICK_WIDTH*(BRICKS_IN_BASE/2)));
} else {
     LowerLeftSide = ((getWidth()/2) - (BRICK_WIDTH*(BRICKS_IN_BASE/2-1)));
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-14T08:13:49.867

如果（我假设 BRICK_WIDTH 是一个正整数）您将输入的唯一时间是 BRICK_WIDTH = 1;

由于值 / 2 从不为 0，但在 java 中 1/2 = 0，因为它是处理整数的方式。

编辑：我不知道为什么它说它是死代码，但这是一个普遍的想法。

# mdx - 如何使用 mdx 中的二维获取前 30 条计数记录和剩余总数

> ID：14870327
> 
> 赞同：0
> 
> 时间：2013-02-14T08:06:45.810
> 
> 标签：mdx

我能够获得基于航空公司和 DMA 的前 30 条记录，但我无法总结其余记录。

```
select {[Measures].[Sum]} on columns,
  Generate({[V Airline].[Airline Ds].members},
         {TopCount(Order(
            HIERARCHIZE(crossjoin([V Airline].[Airline Ds].currentmember ,
                                  [v RPTS TRNS Visits].[DMA Ds].members)),
            [Measures].[Sum],BDESC),30,[Measures].[Sum])}) 
on rows from [Cube_ATA] 
where ([v RPTS TRNS Visits].[Country Cd].&[USA]) 
```

它正在检索前 30 条记录。如何总结剩余的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:22:01.467

您可以使用[EXCEPT](http://msdn.microsoft.com/en-us/library/ms144900.aspx)功能。然后声明你的 TopCount 集

```
EXCEPT([FULLSET], [TOPCOUNT_SET]) 
```

将返回您剩余的记录。

# json - Kendo UI + Spring MVC 集成

> ID：14870331
> 
> 赞同：0
> 
> 时间：2013-02-14T08:07:21.740
> 
> 标签：json, rest, spring-mvc, kendo-ui

我在哪里可以找到与**Spring MVC**集成的**Kendo UI** (Web) 的工作示例？我已经开始开发一个具有复杂业务逻辑的应用程序（由 Spring 管理并作为一个 restful 服务访问）。

 **我只看到了一些集成剑道和 ASP.NET 的示例，但没有看到与 Spring 集成的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:09:13.103

JSP 的 Kendo UI 带有一个工作的 Spring MVC 应用程序。您可以立即下载公开测试版。**

# javascript - 未捕获的类型错误：无法读取未定义的属性“dom”

> ID：14870336
> 
> 赞同：0
> 
> 时间：2013-02-14T08:07:45.450
> 
> 标签：javascript, extjs

如何解决`Uncaught TypeError: Cannot read property 'dom' of undefined`extjs中的这个错误？

我正在使用 dnd 并将 dnd 代码放入布局浏览器

代码 ：

```
// Generic fields array to use in both store defs.
var fields = [{
    name: 'id',
    type: 'string',
    mapping: 'id'
}, {
    name: 'lab_name',
    type: 'string',
    mapping: 'lab_name'
}, {
    name: 'lab_address1',
    type: 'string',
    mapping: 'lab_address1'
}, {
    name: 'lab_address2',
    type: 'string',
    mapping: 'lab_address2'
}, {
    name: 'lab_poskod',
    type: 'string',
    mapping: 'lab_poskod'
}, {
    name: 'lab_bandar',
    type: 'string',
    mapping: 'lab_bandar'
}, {
    name: 'lab_negeri',
    type: 'string',
    mapping: 'lab_negeri'
}, {
    name: 'lab_tel',
    type: 'string',
    mapping: 'lab_tel'
}, {
    name: 'lab_fax',
    type: 'string',
    mapping: 'lab_fax'
}];

// create the data store
var gridStore = new Ext.data.JsonStore({
    fields: fields,
    autoLoad: true,
    url: '../industri/layouts/getLab.php'
});

// Column Model shortcut array
var cols = [{
    id: 'name',
    header: "Id",
    width: 10,
    sortable: true,
    dataIndex: 'id'
}, {
    id: 'name',
    header: "Laboratory Name",
    width: 200,
    sortable: true,
    dataIndex: 'lab_name'
}, {
    id: 'name',
    header: "Laboratory Name",
    width: 200,
    sortable: true,
    dataIndex: 'lab_address1'
}];
// declare the source Grid
var grid = new Ext.grid.GridPanel({
    ddGroup: 'gridDDGroup',
    store: gridStore,
    columns: cols,
    enableDragDrop: true,
    stripeRows: true,
    autoExpandColumn: 'name',
    width: 325,
    margins: '0 2 0 0',
    region: 'west',
    title: 'Data Grid',
    selModel: new Ext.grid.RowSelectionModel({
        singleSelect: true
    })
});

// Declare the text fields.  This could have been done inline, is easier to read
// for folks learning :)
var textField1 = new Ext.form.TextField({
    fieldLabel: 'Laboratory Name',
    name: 'lab_name'
});

// Setup the form panel
var formPanel = new Ext.form.FormPanel({
    region: 'center',
    title: 'Generic Form Panel',
    bodyStyle: 'padding: 10px; background-color: #DFE8F6',
    labelWidth: 100,
    margins: '0 0 0 3',
    width: 325,
    items: [textField1]
});

var displayPanel = new Ext.Panel({
    width: 650,
    height: 300,
    layout: 'border',
    padding: 5,
    items: [
        grid,
        formPanel
    ],
    bbar: [
        '->', // Fill
        {
            text: 'Reset Example',
            handler: function() {
                //refresh source grid
                gridStore.loadData();
                formPanel.getForm().reset();
            }
        }
    ]

});

// used to add records to the destination stores
var blankRecord = Ext.data.Record.create(fields);

/****
 * Setup Drop Targets
 ***/

// This will make sure we only drop to the view container
var formPanelDropTargetEl = formPanel.body.dom;

var formPanelDropTarget = new Ext.dd.DropTarget(formPanelDropTargetEl, {
    ddGroup: 'gridDDGroup',
    notifyEnter: function(ddSource, e, data) {

        //Add some flare to invite drop.
        formPanel.body.stopFx();
        formPanel.body.highlight();
    },
    notifyDrop: function(ddSource, e, data) {

        // Reference the record (single selection) for readability
        var selectedRecord = ddSource.dragData.selections[0];

        // Load the record into the form
        formPanel.getForm().loadRecord(selectedRecord);

        // Delete record from the grid.  not really required.
        ddSource.grid.store.remove(selectedRecord);

        return (true);
    }
});

var tabsNestedLayouts = {
    id: 'tabs-nested-layouts-panel',
    title: 'Industrial Effluent',
    bodyStyle: 'padding:15px;',
    layout: 'fit',
    items: {
        border: false,
        bodyStyle: 'padding:5px;',
        items: displayPanel
    }
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-27T19:21:52.420

如果您尝试将组件呈现给`dom`未找到的元素（或未找到`dom`的 ID），您将收到该错误。请参阅下面的示例以重现错误 - 然后注释掉错误的 renderTo 并取消注释`renderTo: Ext.getBody()`以解决问题。

看到这个**[小提琴](https://fiddle.sencha.com/#view/editor&fiddle/2evn)**

**代码片段**

```
Ext.onReady(function () {
    // Generic fields array to use in both store defs.
    var fields = [{
        name: 'id',
        type: 'string',
        mapping: 'id'
    }, {
        name: 'lab_name',
        type: 'string',
        mapping: 'lab_name'
    }, {
        name: 'lab_address1',
        type: 'string',
        mapping: 'lab_address1'
    }, {
        name: 'lab_address2',
        type: 'string',
        mapping: 'lab_address2'
    }, {
        name: 'lab_poskod',
        type: 'string',
        mapping: 'lab_poskod'
    }, {
        name: 'lab_bandar',
        type: 'string',
        mapping: 'lab_bandar'
    }, {
        name: 'lab_negeri',
        type: 'string',
        mapping: 'lab_negeri'
    }, {
        name: 'lab_tel',
        type: 'string',
        mapping: 'lab_tel'
    }, {
        name: 'lab_fax',
        type: 'string',
        mapping: 'lab_fax'
    }];

    // create the data store
    var gridStore = new Ext.data.JsonStore({
        fields: fields,
        autoLoad: true,
        url: '../industri/layouts/getLab.php'
    });

    // Column Model shortcut array
    var cols = [{
        id: 'name',
        header: "Id",
        width: 10,
        sortable: true,
        dataIndex: 'id'
    }, {
        id: 'name',
        header: "Laboratory Name",
        width: 200,
        sortable: true,
        dataIndex: 'lab_name'
    }, {
        id: 'name',
        header: "Laboratory Name",
        width: 200,
        sortable: true,
        dataIndex: 'lab_address1'
    }];
    // declare the source Grid
    var grid = new Ext.grid.GridPanel({
        ddGroup: 'gridDDGroup',
        store: gridStore,
        columns: cols,
        enableDragDrop: true,
        stripeRows: true,
        autoExpandColumn: 'name',
        width: 325,
        margins: '0 2 0 0',
        region: 'west',
        title: 'Data Grid',
        selModel: new Ext.grid.RowSelectionModel({
            singleSelect: true
        })
    });

    // Declare the text fields.  This could have been done inline, is easier to read
    // for folks learning :)
    var textField1 = new Ext.form.TextField({
        fieldLabel: 'Laboratory Name',
        name: 'lab_name'
    });

    // Setup the form panel
    var formPanel = new Ext.form.FormPanel({
        region: 'center',
        title: 'Generic Form Panel',
        bodyStyle: 'padding: 10px; background-color: #DFE8F6',
        labelWidth: 100,
        margins: '0 0 0 3',
        width: 325,
        items: [textField1]
    });

    var displayPanel = new Ext.Panel({
        width: 650,
        height: 300,
        layout: 'border',

        renderTo:Ext.getBody(),

        padding: 5,

        items: [
            grid,
            formPanel
        ],
        bbar: [
            '->', // Fill
            {
                text: 'Reset Example',
                handler: function () {
                    //refresh source grid
                    //gridStore.loadData();
                    formPanel.getForm().reset();
                }
            }
        ]

    });

    // used to add records to the destination stores
    var blankRecord = Ext.data.Record.create(fields);

    /****
     * Setup Drop Targets
     ***/

    // This will make sure we only drop to the view container
    var formPanelDropTargetEl = formPanel.body.dom;

    var formPanelDropTarget = new Ext.dd.DropTarget(formPanelDropTargetEl, {
        ddGroup: 'gridDDGroup',
        notifyEnter: function (ddSource, e, data) {

            //Add some flare to invite drop.
            formPanel.body.stopFx();
            formPanel.body.highlight();
        },
        notifyDrop: function (ddSource, e, data) {

            // Reference the record (single selection) for readability
            var selectedRecord = ddSource.dragData.selections[0];

            // Load the record into the form
            formPanel.getForm().loadRecord(selectedRecord);

            // Delete record from the grid.  not really required.
            ddSource.grid.store.remove(selectedRecord);

            return (true);
        }
    });

    var tabsNestedLayouts = {
        id: 'tabs-nested-layouts-panel',
        title: 'Industrial Effluent',
        bodyStyle: 'padding:15px;',
        layout: 'fit',
        items: {
            border: false,
            bodyStyle: 'padding:5px;',
            items: displayPanel
        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-17T20:16:05.783

我在执行验证的代码中看到了类似的错误。我所做的与直接访问 DOM 无关，但是我仍然遇到类似的情况。上面的答案是不完整的，dom属性在3.x中的一些ui元素上可用...

在 Extjs (3.x) 的早期版本中，该属性是 mainBody.dom 而不是 body.dom

直接来自 3.4 中网格的 hasRows() 源：

```
var fc = this.**mainBody.dom**.firstChild;
return fc && fc.nodeType == 1 && fc.className != 'x-grid-empty'; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-14T08:11:01.750

这意味着您希望具有该`dom`属性的对象未定义。

*编辑：*
错误在这一行生成：

```
formPanel.body.dom 
```

这意味着`formPanel`由于您正在尝试访问其[`body`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.Panel-property-body)属性，因此未呈现 。此属性**可用自：Ext 4.1.3**

# html - 在标签前添加复选框

> ID：14870338
> 
> 赞同：1
> 
> 时间：2013-02-14T08:07:51.657
> 
> 标签：html, css, twitter-bootstrap

我想在引导程序上标记简单的表单。来自引导文档的这段代码：

```
<form class="form-horizontal">
    <div class="control-group">
        <label class="control-label" for="inputEmail">Email</label>
        <div class="controls">
            <input type="text" id="inputEmail" placeholder="Email">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="inputPassword">Password</label>
        <div class="controls">
            <input type="password" id="inputPassword" placeholder="Password">
        </div>
    </div>      
</form> 
```

如何在标签前添加复选框？这是[jsfiddle](http://jsfiddle.net/HWaKm/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:13:39.237

试试这个：

```
<div class="control-group">
    <div class="controls">
        <label><input type="checkbox" /> A checkbox</label>
    </div>
</div> 
```

# unicode - 规范和兼容性分解_映射值图表/表格

> ID：14870343
> 
> 赞同：1
> 
> 时间：2013-02-14T08:08:10.363
> 
> 标签：unicode, normalization, unicode-normalization

我一直致力于 NFKC 的[Unicode 规范化](http://www.unicode.org/reports/tr15/)。在第 1.3 节中，我发现了以下行-

> 对于 NFKC 或 NFKD，进行完全兼容性分解，它利用规范和兼容性 Decomposition_Mapping 值。

从哪里可以获得规范和兼容性的 Decomposition_Mapping 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-03T07:41:16.773

根据[http://old.kpfu.ru/eng/departments/ktk/test/perl/lib/unicode/UCDFF301.html](http://old.kpfu.ru/eng/departments/ktk/test/perl/lib/unicode/UCDFF301.html)，以下文件的第 5 个字段包含 Decomposition_Mapping 值：

[http://www.unicode.org/Public/UNIDATA/UnicodeData.txt](http://www.unicode.org/Public/UNIDATA/UnicodeData.txt)

# mongodb - Pymongo：连接到副本集

> ID：14870345
> 
> 赞同：0
> 
> 时间：2013-02-14T08:08:18.130
> 
> 标签：mongodb, pymongo

我正在使用下面的代码很好地连接到 replicaSet。

今天早上，我们拥有的 2 个副本集实例之一出现故障。

仍然当我使用下面的代码时，在某些情况下我得到了与崩溃的副本集的连接，在其他情况下我得到了与正在运行的副本集的连接。

有什么方法可以防止连接到崩溃的实例。

这是我使用的代码：

```
 from pymongo import ReplicaSetConnection
    from pymongo import ReadPreference

    # assume I have defined the used variables
    db = ReplicaSetConnection('%s:%s' %(host, port), replicaSet=r_set)[db_name]
    db.read_preference = ReadPreference.SECONDARY_ONLY 
```

谢谢！！

# c - C - 使用带有无序数组的链表进行插入排序

> ID：14870348
> 
> 赞同：0
> 
> 时间：2013-02-14T08:08:46.230
> 
> 标签：c, linked-list, insertion-sort, unordered

```
void insert(struct EMP* emp[])
{
    struct EMP* previous = NULL;
    struct EMP* current = top;

    int i;
    int j;

    previous = current;
    current = current -> next;

    for(i = 1; i < numEmps; i++)
    {
        j = i;
        while(j > 0 && previous -> id > current -> id)
        {
            previous = current;
            j--;
        }

        current = current -> next;
    }
} 
```

所以，参数是一个无序数组，我想使用插入排序对其进行排序。我遇到的问题是它需要链接列表。有什么建议么？以上是我现有的不起作用的插入排序功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:51:52.623

我认为您需要更仔细地查看插入排序算法。本质上，它需要一个新的目标列表来添加元素（特别是在构建第二个列表时将元素插入到正确的位置）。因此，您误解的核心是认为这可以在单个列表上“就地”完成。

将第二个列表实现为链表会更明智、更容易，因为您需要能够在任意点有效地将元素插入到列表中。

# sql-server - 保持不同的数据库环境同步

> ID：14870349
> 
> 赞同：4
> 
> 时间：2013-02-14T08:08:49.350
> 
> 标签：sql-server, project-management, development-environment, change-management

目前我们手动将更改从我们的 DEV SQL 环境推送到测试和生产（使用 Visual Studio 中的模式比较，加上我们在更改 DEV 时创建的一些脚本），但这非常耗时且容易出错。

我们想知道是否有更好的方法来做到这一点，**以及我们需要如何实现这一点。**

我读过可能使用版本控制（这将如何工作？），或者可能使用 RED GATES 的 SQL 源代码控制（但这可以用于将更改推送到 TEST，还是仅用于跟踪本地更改？ )

我们想要一种可靠的方式来更新我们的测试和生产服务器，这样数据就不会损坏/丢失......我们使用 SQL Server 2008 R2 和 Visual Studio 2012。

我们正在开始一个新项目，所以是时候做出改变了！感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:32:02.533

一种简单的方法是在数据库中有一个简单的版本表，其中一行一列存储版本号。

现在每次将更改推送到 dev 时，创建增量 sql 脚本，拥有一个基于当前 db 版本的主脚本，将调用必要的增量 sql 脚本将架构升级到最新版本。

请注意在增量脚本中删除列、更改列类型或减小列大小，例如 varchar(100) 到 varchar(10)，因为如果计划不当，可能会导致数据丢失。

您的增量脚本应该是幂等的，它们可以一遍又一遍地运行，以防万一升级期间数据库崩溃的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T18:27:01.320

尽管使用 SQL 源代码控制有很多好处（我希望您试一试，因为我是产品经理！），但它的目的仅限于版本控制，而不是管理和部署到您的各种环境。正确的 Red Gate 工具是 Deployment Manager。

[http://www.red-gate.com/delivery/deployment-manager/](http://www.red-gate.com/delivery/deployment-manager/)

部署管理器项目团队在这里维护了一个博客，它应该让您了解该工具的发展方向：

[http://thefutureofdeployment.com/](http://thefutureofdeployment.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:21:00.570

VS 中的模式比较是否有 CLI？如果是这样，您可能可以自动化它在一天中运行几次。如果不是，您可以尝试使用其他一些支持 CLI 的 3rd 方工具，例如用于模式的 ApexSQL Diff 和[用于](http://www.apexsql.com/sql_tools_diff.aspx)同步数据的[ApexSQL Data Diff 。](http://www.apexsql.com/sql_tools_datadiff.aspx)

# ios - 如何获取uiwebview的内容宽度？

> ID：14870356
> 
> 赞同：0
> 
> 时间：2013-02-14T08:09:23.187
> 
> 标签：ios, uiwebview, gif

我像这样加载 Gif 图像

```
[webView2 loadData:[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Apple_jumps" ofType:@"gif"]] MIMEType:@"image/gif" textEncodingName:nil baseURL:nil]; 
```

我想设置为 uiwebview 的中心位置，但我无法获得内容的宽度。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:19:02.960

您可以使用`document.height`或`document.width`从 javascript

```
// in init
_WebView.delegate = YourClass; // probably self

- (void) webViewDidFinishLoad:(UIWebView *)webview
{
  int w = [[_WebView stringByEvaluatingJavaScriptFromString:@"document.width"] floatValue];
  _WebView.userInteractionEnabled = w > 200;
} 
```

更多信息在这里：[https ://www.albertopasca.it/whiletrue/objective-c-get-uiwebview-html-page-size/](https://www.albertopasca.it/whiletrue/objective-c-get-uiwebview-html-page-size/)

# c# - 使用 RegisterStartupScript 的 ASP.net 警报框，生成 javascript 代码但出现错误

> ID：14870359
> 
> 赞同：0
> 
> 时间：2013-02-14T08:09:49.580
> 
> 标签：c#, asp.net, alert

我的课堂上有这个 C# 代码：

```
private static void error_message(Sybase.Data.AseClient.AseException salah)
    {
        Page executingPage = HttpContext.Current.Handler as Page;
        Type cstype = HttpContext.Current.GetType();

        // Get a ClientScriptManager reference from the Page class.
        ClientScriptManager cs = executingPage.ClientScript;

        // Check to see if the startup script is already registered.
        if (!cs.IsStartupScriptRegistered(cstype, "PopupScript"))
        {
            String cstext = "alert('" + salah.Message + "');";
            cs.RegisterStartupScript(cstype, "PopupScript", cstext, true);
        }
    } 
```

产生此代码

```
 <script type="text/javascript">
 //<![CDATA[
alert('ua_services not found. Specify owner.objectname or use sp_help to check whether the object exists (sp_help may produce lots of output).
');//]]>
</script> 
```

但是警告框没有出现，并且 Chrome 记录了一个错误“Uncaught SyntaxError: Unexpected token ILLEGAL”

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:17:23.700

您`salah.Message`包含一个 CRLF。修剪它或逃避它。

或者包装`RegisterStartupScript`在一个方法中。

# javascript - jQuery 活动按钮子项

> ID：14870368
> 
> 赞同：0
> 
> 时间：2013-02-14T08:10:10.827
> 
> 标签：javascript, jquery

```
$(document).ready(function(){
  $("#menu ul").children('li').each(function(){
    var href = $(this).find('a').attr('href');
    var wpl = window.location.pathname;
    if( href.indexOf(wpl) != -1 ){
      if( wpl.indexOf( "category" ) != -1){
        $("#products").attr('id','prodon');
      }
      if( wpl.indexOf( "news" ) != -1){
        $("#news").attr('id','newson');
      }
      if( wpl.indexOf( "wheretobuy" ) != -1){
        $("#WTB").attr('id','WTBon');
      }.... 
```

它会持续更长的时间，不同的按钮。我之所以这样做，是因为每个按钮都是一个图像，所以它们都是独一无二的。这是 HTML 的一个片段：

```
<li><a href="/news/index" id="news"></a></li>
<li>
  <a href="/site/wheretobuy" id="WTB"></a>
  <ul>
    <?php echo '<li>'.CHtml::link(CHtml::encode("Showrooms"), array('/showroom/index')).'</li>'; ?>
    <?php echo '<li>'.CHtml::link(CHtml::encode("Dealers"), array('/dealers/index')).'</li>'; ?>
    <?php echo '<li>'.CHtml::link(CHtml::encode("Hypermarket and Merchants"), array('/hyper/index')).'</li>'; ?>
  </ul>
</li> 
```

所以父节点都很好。此外，如果孩子的 URL 包含父母的 URL（即类别/猫），它会显示活动按钮。我想知道如何应用父母的活动img，如果它的孩子之一是URL，但措辞不同。我可以做更多的 IF，但我认为有更简单的方法。

编辑....再次

```
 if( wpl.indexOf( "wheretobuy" ) != -1 || $('#menu ul').find('.WTBon').parent().closest('li').indexOf( "wheretobuy" ) != -1 ) { 

    $('.WTB').addClass('WTBon');

} 
```

所以我要检查的是节点的父节点是否在 URL 中有 wheretobuy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:30:46.633

试试这个：

而是添加 ids `add as class name`。

```
$('#menu ul').find('.idon').parent()
             .closest('li').addClass('.idon'); // <--id like //newson// 
```

## 最新更新：

```
if($('#menu li a[href*="wheretobuy"]').length){
   $('#menu a[href*="wheretobuy"]').parent('li').addClass('WTBon');
} 
```

## 笔记：

不鼓励在单个页面上为多个元素使用相同的 id。这不是一个好习惯。

`This applies in your case too`因为`you have applied it by making the active one as id`，你可以`use it as a class instead`。

# emacs - 只转置三个的两个外部单词

> ID：14870369
> 
> 赞同：2
> 
> 时间：2013-02-14T08:10:10.847
> 
> 标签：emacs

如何以最少的击键次数在emacs中的“foo and bar”中转置“foo”和“bar”？

输入：

```
foo and bar 
```

输出：

```
bar and foo 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-14T11:50:49.270

另一种方式：

数字前缀 0 to`M-t`会将标记后的单词转置为点后的单词。

所以，如果`^`是标记和`|`是点：

```
f^oo and ba|r 
```

按下后会变成`M-0 M-t`：

```
|bar and ^foo 
```

因此，在您的示例中，如果您正在键入`foo and bar|`，则键序列可以是`C-space M-3 M-b M-0 M-t`（在行尾设置标记，将 3 个单词返回到 foo，转置这些单词）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:43:07.123

这是一种方式（从短语的开头开始）：`M-t` `M-t` `M-m` `M-t`.

如果前一行有文字`foo`，请替换`M-m`为`M-b` `M-b`。

# ruby-on-rails - 水豚填写错误的字段

> ID：14870370
> 
> 赞同：1
> 
> 时间：2013-02-14T08:10:12.680
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, capybara, integration-testing

奇怪的问题。

我正在尝试使用 Capybara 和 RSpec 测试登录，但似乎 Capybara 填写了错误的字段，因此登录的用户未经过身份验证。

我使用 FactoryGirl 创建了测试用户：

```
#factories.rb

FactoryGirl.define do

    #...

    factory :user do
        name "guest"
        password "pwordtest"
        password_confirmation "pwordtest"
    end

end 
```

然后我写了以下测试（其中有很多“放置”的东西来调试这个问题）：

```
#posts_spec.rb

describe "Valid post submission" do

 it "should log in a user and let him make a post" do
  User.destroy_all
  visit '/access' #My Login page
  user = FactoryGirl.create(:user)
  puts "name"
  puts user.name
  fill_in :name, with: "guest" # I did these literally to make sure FactoryGirl wasn't the problem.
  fill_in :password, with: "pwordtest"
  click_on "Log In"
  assert User.count == 1
  puts "authing test"
  current_path.should eq(new_post_path)
 end
#...
end 
```

在我的会话控制器中（更多调试）：

```
def create
    user = User.find_by_name(params[:name])
    puts "all"
    puts params
    puts "pre-inspect"
    puts user.inspect
    if user && user.authenticate(params[:password])
        session[:user_id] = user.id
      puts "In IF"
        redirect_to new_post_path
    else
        flash.now[:error] = "Invalid password/username combo."
      puts "there"
        render 'new' 
    end
  end 
```

当我尝试运行测试时，出现以下错误：

```
name
guest
all
{"utf8"=>"✓", "name"=>"pword", "password"=>"", "commit"=>"Log In", "action"=>"create", "controller"=>"sessions"}
pre-inspect
nil
there
authing test
F

Failures:

  1) Posts Valid post submission should log in a user and let him make a post
     Failure/Error: current_path.should eq(new_post_path)

       expected: "/posts/new"
            got: "/sessions"

       (compared using ==)
     # ./spec/requests/posts_spec.rb:28:in `block (3 levels) in <top (required)>' 
```

换句话说，我的调试提示表明 FactoryGirl 用户很好，但不知何故，Capybara 未能将这些值分配给正确的字段，因此参数（在调试打印中的“全部”之后）被分配为“pword”作为name 和 "" 作为密码，而不是 "guest" 作为名称和 "pword" 作为密码。因此，测试用户未通过身份验证，并且会话未启动。这特别奇怪，因为这些字段的名称肯定是正确的：

```
#sessions/new.html.erb

<div class="center_login">
    <h1>Log In</h1>
    <%= form_tag sessions_path do %>
      <div class="field">
        <%= label_tag :name %>
        <%= text_field_tag :name, params[:name] %><br />
      </div>
      <div class="field">
        <%= label_tag :password %>
        <%= password_field_tag :password %><br />
      </div><br>
      <div class="actions"><%= submit_tag "Log In", class: "btn" %></div>
    <% end %>
</div> 
```

知道发生了什么吗？我和另外两个人搞砸了一个小时+，就是想不通。

编辑——应该提到的是，当我作为一个真实的人浏览网站时，这一切都很完美。如，我在名称字段中输入的用户名和我在密码字段中输入的密码对应于数据库中的那些，并且我登录很好。因此，我怀疑某些 Capybara 未能填写正确的内容是错误的。

编辑 2——根据请求，以下一项测试的 Test.log 输出：

```
Connecting to database specified by database.yml
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
Started GET "/posts/new" for 127.0.0.1 at 2013-02-14 07:29:55 -0800
Processing by PostsController#new as HTML
Redirected to http://www.example.com/
Filter chain halted as :authorize rendered or redirected
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)
Started GET "/" for 127.0.0.1 at 2013-02-14 07:29:55 -0800
Processing by StaticsController#resume as HTML
  Rendered statics/_stars.html.erb (1.0ms)
  Rendered statics/_stars.html.erb (0.4ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_stars.html.erb (0.3ms)
  Rendered statics/_skills.html.erb (14.9ms)
  Rendered statics/_collapse_start.html.erb (0.6ms)
  Rendered statics/_collapse_start.html.erb (0.1ms)
  Rendered statics/_collapse_start.html.erb (0.1ms)
  Rendered statics/_collapse_start.html.erb (0.1ms)
  Rendered statics/_collapse_start.html.erb (0.1ms)
  Rendered statics/resume.html.erb within layouts/application (68.4ms)
  Rendered layouts/_shim.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (1.0ms)
Completed 200 OK in 163ms (Views: 162.3ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (12.1ms)[0m  SELECT "users".* FROM "users" 
Started GET "/access" for 127.0.0.1 at 2013-02-14 07:29:55 -0800
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.2ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
Completed 200 OK in 32ms (Views: 32.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT 1 AS one FROM "users" WHERE LOWER("users"."name") = LOWER('guest') LIMIT 1
Binary data inserted for `string` type on column `password_digest`
  [1m[36mSQL (30.0ms)[0m  [1mINSERT INTO "users" ("created_at", "name", "password_digest", "updated_at") VALUES (?, ?, ?, ?)[0m  [["created_at", Thu, 14 Feb 2013 15:29:55 UTC +00:00], ["name", "guest"], ["password_digest", "$2a$10$Y9NfnYjForrfufZOaqgQj.BdcHYLh.tkYomCVfHiJ4McbWMem445e"], ["updated_at", Thu, 14 Feb 2013 15:29:55 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/sessions" for 127.0.0.1 at 2013-02-14 07:29:55 -0800
Processing by SessionsController#create as HTML
  Parameters: {"utf8"=>"✓", "name"=>"pword", "password"=>"[FILTERED]", "commit"=>"Log In"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'pword' LIMIT 1[0m
  Rendered sessions/new.html.erb within layouts/application (0.7ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
Completed 200 OK in 21ms (Views: 2.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "users" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m 
```

如您所见，从底部传递给会话控制器的第 6 行的“参数”包括名称“pword”（以及过滤后的可能为空的密码），这很奇怪/令人沮丧。

编辑 3——在我的测试组中使用最新版本的 Capybara。在这篇新帖子中，我在另一个控制器的规范中遇到了一个基本相同的问题。也就是说，我会告诉 Capybara 用“A”填充字段 1，用“B”填充 2，用“C”填充 3，来自该控制器的参数将显示 1 用“B”填充，2 用“C”填充" 和 3 空，好像 Capybara在我告诉它的字段*之前*填写每个字段。

编辑 4——按照 Dave S 的建议，我截取了登录过程的屏幕截图（以及发布过程的屏幕截图，如编辑 2 中所述，该过程具有相同的错误）。

*两种不同的事情正在发生*！在登录页面，看起来（因为密码被屏蔽了），实际上是在填写正确的信息（姓名==客人，密码==五颗星，与密码（和客人）的字符数相同)，但是如果我保存页面而不是屏幕截图并单击，它会进入会话和错误，就像测试人员一样。

在我保存的页面/发布页面的屏幕截图中，Capybara 肯定填写了错误的字段。名称字段填写了我说的应该是内容，内容字段为空。我认为这是因为我为登录而不是为发布创建了新的唯一 ID，如果我为两者都这样做，我会看看会发生什么。我还会将密码更改为与“访客”不同的密码，然后再报告。

编辑 5——新的截图：

![在此处输入图像描述](../Images/f5130df7eb929d256b95099cb067bd16.png)

![在此处输入图像描述](../Images/9fdff33bdae64a073a20268f023c5931.png)

以及两个视图的代码，以了解这里可能有什么不同。（我还更改了上面的工厂代码，以使屏幕截图中的（正确）密码长度有意义。

```
# new posts _form.html.erb
<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name, id: "post_name" %>
  </div>
  <div class="field text-area">
    <%= f.label :content %><br />
    <%= f.text_area(:content, :size => '50x20', id: "post_content") %>
  </div>

    <div class="actions btn-group">
      <%= f.submit 'Post It', class: "btn" %>
    </div>

<% end %> 
```

并登录：

```
# login (new.html.erb in sessions)

<div class="center_login">
    <h1>Log In</h1>
    <%= form_tag sessions_path do %>
      <div class="field">
        <%= label_tag :name %>
        <%= text_field_tag :name, params[:name], id: "sessions_name" %><br /> 
        # The above name change seemed to possibly fix it. The weird thing, though, is that
        # a similar change in the posts form above did NOT fix that problem.
      </div>
      <div class="field">
        <%= label_tag :password %>
        <%= password_field_tag :password %><br />
      </div><br>
      <div class="actions"><%= submit_tag "Log In", class: "btn" %></div>
    <% end %>
</div> 
```

现在（在登录名中使用名为 seeions_name 的名称），登录工作 100%。参数是正确的，等等。但发布没有，因为（*尽管我做了基本相同的更改*）Capybara 仍然填写错误的字段。这是否使问题更清楚？我难住了。

编辑 6——完整的 repo 可以在[这里找到](http://github.com/sashafklein/sashafklein)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T07:43:49.073

我正好遇到了这个问题：使用 fill_in 时填写了错误的字段。

解决方案是遵循文档并使用字符串而不是匹配器的符号：

我替换了这个：

```
fill_in :email, with: email
fill_in :password, with: password 
```

和：

```
fill_in "Email", with: email
fill_in "Password", with: password 
```

然后它按预期工作

文档：[https ://github.com/jnicklas/capybara#using-capybara-with-rspec](https://github.com/jnicklas/capybara#using-capybara-with-rspec)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T15:13:57.787

我在测试我的应用程序的登录功能时遇到了类似的问题：当我手动登录时它工作正常，但在使用 Capybara 测试它时登录失败。

您似乎遇到了一些我没有遇到的问题，即 Capybara 错误地填写字段。我不确定这是什么原因造成的，但您可能遇到的问题不止一个。调试后，我发现我的问题是由于一个错误的用户工厂。

我所拥有的是：

需要“摘要/sha1”

```
FactoryGirl.define do
  factory :user do
    login      'hitchcock'
    fname      'Alfred'
    lname      'Hitchcock'
    email      'alfred.hitchcock@example.com'
    password   Digest::SHA1.new << 'MacGuffin'
  end
end 
```

设置密码的字段不正确。这是正确的版本：

```
 password   (Digest::SHA1.new << 'MacGuffin').to_s 
```

User 类的“密码”字段实际上包含密码摘要，而不是密码，但我正在使用旧数据库。无论如何，我错误地计算了密码的摘要，忘记了`to_s`方法，这导致我的测试用例使用用户名“hitchcock”和密码“MacGuffin”的登录尝试失败。

现在，看看你的工厂，在我看来你可能有类似的问题。您的迁移文件`20130206234907_create_users.rb`如下所示：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.string :password_digest
      t.timestamps
    end
  end
end 
```

这表明您正在存储密码的摘要，而不是密码本身，这是正确和正确的。但是，您的用户工厂在 file`factories.rb`中是：

```
factory :user do
  name "guest"
  password "pwordtest"
  password_confirmation "pwordtest"
end 
```

您的工厂没有`password_digest`为其创建的用户指定字段，因此在您`posts_spec.rb`创建用户时，您可以通过命令

```
user = FactoryGirl.create(:user) 
```

我想知道是否在数据库中创建了一个用户，或者如果是，它的`password_digest`字段将是什么？请记住，在运行测试时，首先会清除测试数据库的内容，因此如果您的测试代码没有在数据库中创建有效用户，那么您的登录测试将无法进行。

# java - 如何从 Apache CXF 访问存储在数据库中的 SSL 证书

> ID：14870371
> 
> 赞同：2
> 
> 时间：2013-02-14T08:10:15.773
> 
> 标签：java, rest, https, cxf

我有一个使用**带有 HTTPS 身份验证的 Apache CXF**实现的 Rest 服务。目前，证书存储在密钥库文件中。

有没有办法从数据库而不是从文件中获取证书？

# azure - 在 Windows Azure 上安装 Windows 服务的最佳实践

> ID：14870372
> 
> 赞同：2
> 
> 时间：2013-02-14T08:10:17.737
> 
> 标签：azure, windows-services, azure-worker-roles

在 Internet 上搜索后，我找到了两种在 Windows Azure 上安装现有 Windows 服务项目的方法。

1.  创建设置并将其添加 web/worker 角色的启动任务并启动该角色，以便安装窗口服务
2.  将窗口服务的逻辑迁移到工作角色并启动

我的目的是在云上获得 Windows 服务，因为我已经在 Windows azure 网站（WAWS）上应用了，所以**从上面将 Windows 服务放在云上的最佳方法应该是什么**。

以及**当我将上述情况从 1 扩展到更多实例时会发生什么**。

提前感谢您的帮助。

/阿伦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T09:12:02.230

我建议迁移到工人角色是更好的方法，因为它更符合平台的设计目标。例如 - 这将使与平台事件（例如启动和停止）的交互更容易集成，更易于使用日志记录等。

两个选项的横向扩展故事或多或少相同 - 您最终将在多台机器上运行多个代码实例，因此您必须有一个支持并从中受益的设计。

这意味着什么实际上取决于您的确切情况，但通常协调哪个实例做什么，处理失败实例的不完整操作等......

# xslt - xslt 将 XML 字符串解析为变量并使用 Xpath

> ID：14870373
> 
> 赞同：1
> 
> 时间：2013-02-14T08:10:20.730
> 
> 标签：xslt, dom, internet-explorer-9, xslt-1.0, jscript

我的（简化的）输入 XML 文件包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<main>
    <DATA_RECORD>
        <MESSAGE>&#60;pd&#62;&#10;    &#60;cdhead version&#61;&#34;13&#34;/&#62;&#10;&#60;/pd&#62;</MESSAGE>
    </DATA_RECORD>
</main> 
```

MESSAGE 元素值是一个字符转义的 XML 实例。它表示以下 XML：

```
<pd>
    <cdhead version="13"/>
</pd> 
```

我想对输入 XML 应用 xsl 转换，并以某种方式将 MESSAGE 内容解析为变量并使用 Xpath 表达式来访问其详细信息。
我尝试如下添加一个 javascript 函数，但脚本返回的对象显然是不正确的 DOM 子类（请参见下面的结果）。为了完整起见，我添加了一个额外的函数，它将 DOM 内容作为字符串返回。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ms="urn:schemas-microsoft-com:xslt"
    xmlns:my="http://example.com/my"
    exclude-result-prefixes="ms my">

    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <ms:script language="JScript" implements-prefix="my">
        <![CDATA[
        function parseToDOM (input) {
        var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
        doc.loadXML (input);
        return doc.documentElement;
        };
        function parseToXMLString (input) {
        var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
        doc.loadXML (input);
        return doc.documentElement.xml;
        };
        ]]>
    </ms:script>

    <xsl:template match="/">
        <root>
            <xsl:apply-templates/>
        </root>
    </xsl:template>

    <xsl:template match="DATA_RECORD">
            <xsl:variable name="DOM"><xsl:copy-of select="my:parseToDOM (MESSAGE)"/></xsl:variable>
            <xsl:variable name="XML"><xsl:copy-of select="my:parseToXMLString (MESSAGE)"/></xsl:variable>

            <msg1><xsl:value-of select="$XML"/></msg1>
            <msg2><xsl:value-of select="$XML" disable-output-escaping="yes"/></msg2>
            <dom><xsl:copy-of select="$DOM"/></dom>
            <version><xsl:value-of select="$DOM/pd/cdhead/@version"/></version>
    </xsl:template>

    <xsl:template match="text()"/>
</xsl:stylesheet> 
```

结果：

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <msg1>&lt;pd&gt;
    &lt;cdhead version="13"/&gt;
&lt;/pd&gt;</msg1>
    <msg2><pd>
    <cdhead version="13"/>
</pd></msg2>
    <dom/>
    <version></version>
</root> 
```

如何使 Jscript 函数返回允许使用 Xpath 的结果？
顺便说一句，是否有一些 XSLT 1.0 函数允许将转义的 XML 字符串解析为允许使用 Xpath 的结果？

**添加**

我一直在尝试一些变化并更接近解决方案。首先，Altova XMLSpy 允许选择 xsl 处理器，使用内置处理器时会出现上述情况。当然，我需要MSXML 6.0，并且在选择一个时，错误会出现错误，因为我不得不解析Input.text。但是我只是在 javascript 中做了额外的事情之后才成功地在结果中使用了 Xpath 表达式。事实证明，虽然`&#60;`等被解析成`&lt;`等等，但这还不足以得出正确的 DOM 结果。所以我首先求助于对输入字符串进行转义。
但是我遇到了另一个障碍：下面的工作正常，当我使用`input.text`而不是下面的文字时它就不行了。

请参阅下面的 xslt。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ms="urn:schemas-microsoft-com:xslt"
    xmlns:my="http://example.com/my"
    exclude-result-prefixes="ms my">

    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <ms:script language="JScript" implements-prefix="my">
        <![CDATA[
        function parseToDOM (input) {
            var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
            doc.loadXML (unescapeXML ('&#60;pd&#62;&#10;    &#60;cdhead version&#61;&#34;13&#34;/&#62;&#10;&#60;/pd&#62;'));
            //doc.loadXML (unescapeXML (input.text));
            return doc;
        };
        function unescapeXML (str) {
            var ostr = str;
            ostr = ostr.replace (/&#34;/g, '"');
            ostr = ostr.replace (/&#60;/g, '<');
            ostr = ostr.replace (/&#61;/g, '=');
            ostr = ostr.replace (/&#62;/g, '>');
            return ostr;
        };
        ]]>
    </ms:script>

    <xsl:template match="/">
        <root>
            <xsl:apply-templates/>
        </root>
    </xsl:template>

    <xsl:template match="DATA_RECORD">
        <xsl:variable name="msg" select="my:parseToDOM (MESSAGE)"/>
        <tst><xsl:value-of select="$msg/pd/cdhead/@version"/></tst>
   </xsl:template>

</xsl:stylesheet> 
```

现在结果

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<tst>13</tst>
</root> 
```

这正是我想要的。

但如上所述，当我评论文字的解析并改用输入时，如下所示：

```
//doc.loadXML (unescapeXML ('&#60;pd&#62;&#10;    &#60;cdhead version&#61;&#34;13&#34;/&#62;&#10;&#60;/pd&#62;'));
doc.loadXML (unescapeXML (input.text)); 
```

我收到以下错误（在 Altova XML Spy 中使用 MSXML 6.0 作为 xslt 解析器）：

```
XSL transformation failed due to following error:

Microsoft JScript runtime error
'undefined' is null or not an object
line = 10, col = 3 (line is offset from the start of the script block).
Error returned from property or method call. 
```

这指向第一个 javascript 替换语句。

此外，IE9 无法正确处理以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="test.xslt"?>
<main>
  <DATA_RECORD>
    <MESSAGE>&#60;pd&#62;&#10;    &#60;cdhead version&#61;&#34;13&#34;/&#62;&#10;&#60;/pd&#62;</MESSAGE>
  </DATA_RECORD>
 </main> 
```

当我在 IE9 中打开这个文件时（其中 test.xslt 是转换的版本，其中输入被忽略，而是处理文字，因此在 XML Spy 中是可以的），我得到一个处理错误：

```
XML5001: Applying Integrated XSLT Handling. 
XSLT8690: XSLT processing failed. 
```

为什么这一切，我该如何纠正？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:55:44.987

从上面的**添加**开始，我通过微调得到了一个解决方案。
为了避免不得不这样做`input.text`并使用plain ，xsl 必须通过应用xslt **string**`input`函数来包含元素到字符串的转换（我认为它已经是一个字符串，但显然情况并非如此）。此外，现在不再需要应用替换语句。 因此

 **```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:ms="urn:schemas-microsoft-com:xslt"
    xmlns:my="http://example.com/my"
    exclude-result-prefixes="ms my">

    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>

    <ms:script language="JScript" implements-prefix="my">
        <![CDATA[
        function parseToDOM (input) {
            var doc = new ActiveXObject('Msxml2.DOMDocument.6.0');
            doc.loadXML (input);
            return doc;
        };
        ]]>
    </ms:script>

    <xsl:template match="/">
        <root>
            <xsl:apply-templates/>
        </root>
    </xsl:template>

    <xsl:template match="DATA_RECORD">
        <xsl:variable name="msg" select="my:parseToDOM (string(MESSAGE))"/>
        <tst><xsl:value-of select="$msg/pd/cdhead/@version"/></tst>
   </xsl:template>

</xsl:stylesheet> 
```

作品：当应用于

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="test.xslt"?>
<main>
  <DATA_RECORD>
    <MESSAGE>&#60;pd&#62;&#10;    &#60;cdhead version&#61;&#34;13&#34;/&#62;&#10;&#60;/pd&#62;</MESSAGE>
  </DATA_RECORD>
 </main> 
```

结果是

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
<tst>13</tst>
</root> 
```

不幸的是，IE9 仍然无法使用引用的 XSLT 加载 XML；我发现了原因。
我必须勾选 Internet 选项/高级/安全/允许活动内容在我的电脑上的文件中运行 - 并重新启动 IE - 这使得 IE9 可以正确处理文件。当然，结果不是 html 意味着只能在 F12/Script 选项卡中查看结果，但这只是一个示例，我会将其合并到生成正确 html 的 xslt 中。**

# class - 你如何重构一个上帝类？

> ID：14870377
> 
> 赞同：26
> 
> 时间：2013-02-14T08:10:44.667
> 
> 标签：class, refactoring, anti-patterns, god-object

有谁知道重构上帝对象的最佳方法？

它不像将其分解为许多较小的类那么简单，因为存在高度的方法耦合。如果我退出一种方法，我通常最终会退出所有其他方法。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-02-14T15:06:37.563

就像积木一样。您将需要耐心和稳定的手，否则您必须从头开始重新创建所有内容。这本身还不错 - 有时需要丢弃代码。

**其他建议：**

*   抽出方法前想一想：这个方法对什么数据进行操作？它有什么责任？
*   首先尝试维护上帝类的接口，并将调用委托给新提取的类。归根结底，上帝类应该是一个没有自己逻辑的纯门面。然后你可以为了方便而保留它或扔掉它并开始只使用新的类
*   单元测试帮助：在提取每个方法之前为每个方法编写测试，以确保您不会破坏功能

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-03-18T11:22:23.973

我假设“上帝对象”是指一个巨大的类（以代码行衡量）。

基本思想是将其部分功能提取到其他类中。

为了找到那些你可以寻找的

*   经常一起使用的字段/参数。他们可能会一起搬进一个新班级

*   仅使用类中字段的一小部分子集的方法（或方法的一部分），可能会移动到仅包含这些字段的类中。

*   原始类型（int、String、boolean）。他们在出来之前往往是真正有价值的对象。一旦它们成为价值对象，它们通常会吸引方法。

*   看神物的用法。不同的客户使用不同的方法吗？这些可能会进入单独的界面。这些接口可能又具有单独的实现。

为了实际进行这些更改，您应该有一些基础设施和工具可供您使用：

*   测试：准备好一组（可能生成的）详尽的测试，您可以经常运行这些测试。对未经测试的更改要格外小心。我做了这些，但将它们限制在提取方法之类的东西上，我可以用一个 IDE 操作完全完成。

*   版本控制：您希望有一个版本控制，允许您每 2 分钟提交一次，而不会真正减慢您的速度。SVN 并没有真正起作用。吉特可以。

*   天皇法：天皇法的理念是尝试改变。如果效果很好。如果不注意发生了什么问题，请将它们作为依赖项添加到您开始的更改中。回滚您的更改。在结果图中，使用尚无依赖关系的节点重复该过程。[http://mikadommethod.wordpress.com/book/](http://mikadomethod.wordpress.com/book/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-01-03T16:26:52.363

根据 Lanza 和 Marinescu 的《实践中的面向对象度量》一书，God Class 设计缺陷是指倾向于集中系统智能的类。一个上帝类自己完成了太多的工作，只将次要的细节委托给一组琐碎的类，并使用来自其他类的数据。

上帝类的检测基于三个主要特征：

1.  它们直接或使用访问器方法大量访问其他更简单类的数据。
2.  它们庞大而复杂
3.  它们有很多非交流行为，即属于该类的方法之间的内聚度很低。

重构上帝类是一项复杂的任务，因为这种不和谐通常是在方法级别发生的其他不和谐的累积效应。因此，执行这样的重构需要关于类方法的额外和更细粒度的信息，有时甚至需要关于其继承上下文的信息。第一种方法是识别捆绑在一起的方法和属性的集群，并将这些岛提取到单独的类中。

《面向对象的再造模式》一书中的Split Up God Class 方法建议将God Class 的职责逐步重新分配给它的协作类或从God Class 中拉出的新类。

《Working Effectively with Legacy Code》一书介绍了一些技术，例如 Sprout Method、Sprout Class、Wrap Method，以便能够测试可用于支持 God Classes 重构的遗留系统。

我要做的是对上帝类中的方法进行分组，这些方法使用与输入或输出相同的类属性。之后，我会将类拆分为子类，其中每个子类将包含子组中的方法以及这些方法使用的属性。

这样，每个新类将更小且更连贯（这意味着它们的所有方法都将适用于相似的类属性）。此外，我们生成的每个新类的依赖性都会减少。在那之后，我们可以进一步减少这些依赖，因为我们现在可以更好地理解代码。

一般来说，我会说根据手头的情况有几种不同的方法。例如，假设您有一个名为“LoginManager”的上帝类，它验证用户信息，更新“OnlineUserService”以便将用户添加到在线用户列表中，并返回特定于登录的数据（例如欢迎屏幕和一次提供）给客户。

所以你的课程看起来像这样：

```
import java.util.ArrayList;
import java.util.List;

public class LoginManager {

public void handleLogin(String hashedUserId, String hashedUserPassword){
    String userId = decryptHashedString(hashedUserId);
    String userPassword = decryptHashedString(hashedUserPassword);

    if(!validateUser(userId, userPassword)){ return; }

    updateOnlineUserService(userId);
    sendCustomizedLoginMessage(userId);
    sendOneTimeOffer(userId);
}

public String decryptHashedString(String hashedString){
    String userId = "";
    //TODO Decrypt hashed string for 150 lines of code...
    return userId;
}

public boolean validateUser(String userId, String userPassword){
    //validate for 100 lines of code...

    List<String> userIdList = getUserIdList();

    if(!isUserIdValid(userId,userIdList)){return false;}

    if(!isPasswordCorrect(userId,userPassword)){return false;}

    return true;
}

private List<String> getUserIdList() {
    List<String> userIdList = new ArrayList<>();
    //TODO: Add implementation details
    return userIdList;
}

private boolean isPasswordCorrect(String userId, String userPassword) {
    boolean isValidated = false;
    //TODO: Add implementation details
    return isValidated;
}

private boolean isUserIdValid(String userId, List<String> userIdList) {
    boolean isValidated = false;
    //TODO: Add implementation details
    return isValidated;
}

public void updateOnlineUserService(String userId){
    //TODO updateOnlineUserService for 100 lines of code...
}

public void sendCustomizedLoginMessage(String userId){
    //TODO sendCustomizedLoginMessage for 50 lines of code...

}

public void sendOneTimeOffer(String userId){
    //TODO sendOneTimeOffer for 100 lines of code...
}} 
```

现在我们可以看到这个类将是巨大而复杂的。它还不是书籍定义的上帝类，因为类字段现在在方法中普遍使用。但是为了论证，我们可以把它当成神类，开始重构。

解决方案之一是创建单独的小类，用作主类中的成员。您可以添加的另一件事可能是在不同的接口及其各自的类中分离不同的行为。通过使这些方法“私有”来隐藏类中的实现细节。并在主类中使用这些接口来进行竞标。

所以最后，RefactoredLoginManager 将如下所示：

```
public class RefactoredLoginManager {
    IDecryptHandler decryptHandler;
    IValidateHandler validateHandler;
    IOnlineUserServiceNotifier onlineUserServiceNotifier;
    IClientDataSender clientDataSender;

public void handleLogin(String hashedUserId, String hashedUserPassword){
        String userId = decryptHandler.decryptHashedString(hashedUserId);
        String userPassword = decryptHandler.decryptHashedString(hashedUserPassword);

        if(!validateHandler.validateUser(userId, userPassword)){ return; }

        onlineUserServiceNotifier.updateOnlineUserService(userId);

        clientDataSender.sendCustomizedLoginMessage(userId);
        clientDataSender.sendOneTimeOffer(userId);
    }
} 
```

解密处理程序：

```
public class DecryptHandler implements IDecryptHandler {

    public String decryptHashedString(String hashedString){
        String userId = "";
        //TODO Decrypt hashed string for 150 lines of code...
        return userId;
    }

}

public interface IDecryptHandler {

    String decryptHashedString(String hashedString);

} 
```

验证处理程序：

```
public class ValidateHandler implements IValidateHandler {
    public boolean validateUser(String userId, String userPassword){
        //validate for 100 lines of code...

        List<String> userIdList = getUserIdList();

        if(!isUserIdValid(userId,userIdList)){return false;}

        if(!isPasswordCorrect(userId,userPassword)){return false;}

        return true;
    }

    private List<String> getUserIdList() {
        List<String> userIdList = new ArrayList<>();
        //TODO: Add implementation details
        return userIdList;
    }

    private boolean isPasswordCorrect(String userId, String userPassword) 
    {
        boolean isValidated = false;
        //TODO: Add implementation details
        return isValidated;
    }

    private boolean isUserIdValid(String userId, List<String> userIdList) 
    {
        boolean isValidated = false;
        //TODO: Add implementation details
        return isValidated;
    }

} 
```

这里要注意的重要一点是，interfaces() 只需要包含其他类使用的方法。所以 IValidateHandler 看起来就像这样简单：

```
public interface IValidateHandler {

    boolean validateUser(String userId, String userPassword);

} 
```

OnlineUserServiceNotifier：

```
public class OnlineUserServiceNotifier implements 
    IOnlineUserServiceNotifier {

    public void updateOnlineUserService(String userId){
        //TODO updateOnlineUserService for 100 lines of code...
    }

}

public interface IOnlineUserServiceNotifier {
    void updateOnlineUserService(String userId);
} 
```

客户端数据发送器：

```
public class ClientDataSender implements IClientDataSender {

    public void sendCustomizedLoginMessage(String userId){
        //TODO sendCustomizedLoginMessage for 50 lines of code...

    }

    public void sendOneTimeOffer(String userId){
        //TODO sendOneTimeOffer for 100 lines of code...
    }
} 
```

由于这两种方法都在 LoginHandler 中访问，因此接口必须包含这两种方法：

```
public interface IClientDataSender {
    void sendCustomizedLoginMessage(String userId);

    void sendOneTimeOffer(String userId);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-10T16:46:15.890

这里实际上有两个主题：

*   给定一个上帝类，如何将其成员合理划分为子集？基本思想是通过概念一致性（通常通过客户端模块中的频繁共同使用）和强制依赖来对元素进行分组。显然，这方面的细节是特定于要重构的系统的。结果是上帝类元素的所需分区（一组组）。

*   给定所需的分区，实际进行更改。如果代码库有任何规模，这很困难。手动执行此操作，您几乎被迫保留 God 类，同时修改其访问器以调用由分区形成的新类。当然，您需要测试、测试、测试，因为手动进行这些更改时很容易出错。当对 God 类的所有访问权限都消失时，您终于可以将其删除。这在理论上听起来不错，但如果您面对数千个编译单元，则在实践中需要很长时间，并且您必须让团队成员在您执行此操作时停止添加对上帝界面的访问。但是，可以应用自动重构工具来实现这一点；使用这样的工具，您可以指定该工具的分区，然后它会以可靠的方式修改代码库。[重构 C++ God Classes](http://www.semdesigns.com/Products/RefactoringTools/SplitInterface.html?site=StackOverflow)，并已被用于跨具有 3,000 个编译单元的系统进行此类更改。

# iphone - 将 FBLoginView 放入 ViewDidLoad 使应用程序崩溃

> ID：14870394
> 
> 赞同：2
> 
> 时间：2013-02-14T08:12:12.097
> 
> 标签：iphone, facebook

我已经把 Facebook loginview 代码像这样

```
 (void)viewDidLoad {    
    [super viewDidLoad];

    // Create Login View so that the app will be granted "status_update" permission.
    loginview = [[FBLoginView alloc] init];

    loginview.frame = CGRectOffset(loginview.frame, 5, 5);
    loginview.delegate = self;

    [self.view addSubview:loginview];

    [loginview sizeToFit];

  } 
```

在我第一次登录时它工作正常。但是登录后，当我从另一个视图跳转到这个视图时，它会使应用程序崩溃。

有什么问题？我没明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-15T17:23:25.563

我有同样的问题。我通过这样做来修复它：

```
-(void)viewWillDisappear:(BOOL)animated{
    [super viewWillDisappear:animated];
    // This isn't public, so you need to use performSelector...
    [fbLoginView performSelector:@selector(unwireViewForSession)]; 
} 
```

这是基于此处的错误报告： [https ://github.com/buzztabapp/facebook-ios-sdk/commit/2301de144958a5502f9dae0a1bb7c234873581ba](https://github.com/buzztabapp/facebook-ios-sdk/commit/2301de144958a5502f9dae0a1bb7c234873581ba)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-02T11:03:44.373

也许你可以试试这个：

```
-(void)viewDidLoad
{
   ...
   static id sharedInstance = self;
   loginview.delegate = sharedInstance;
   ...
} 
```

通过将委托视图实例创建为静态，您将其存储在与 facebook 登录视图（在静态范围内创建）相同的范围内。您可以避免错误的访问错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-10T00:09:19.510

在使用 FBLoginView 关闭 ViewController 时，我已经退出了同样的问题。我通过`FBLoginView`在调用之前将委托设置为 nil解决了这个问题`dismissViewControllerAnimated:completion:`

```
...
self.loginFBView.delegate = nil;
[self dismissViewControllerAnimated:NO completion:nil]; 
```

# php - 如果查询结果很大，TCPDF 显示空白 PDF

> ID：14870397
> 
> 赞同：2
> 
> 时间：2013-02-14T08:12:33.787
> 
> 标签：php, tcpdf

我有一个搜索表单，只要您在其中输入搜索查询，它就允许下载 PDF。这里的问题是，如果结果数量很少，我只能下载 PDF。

如果结果超过 80 条记录，则显示空白页。

请指教，谢谢！

这是我的代码：

```
// set default monospaced font
$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);

//set margins
$pdf->SetMargins(PDF_MARGIN_LEFT, PDF_MARGIN_TOP, PDF_MARGIN_RIGHT);
$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);
$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);

//set auto page breaks
$pdf->SetAutoPageBreak(TRUE, PDF_MARGIN_BOTTOM);

//set image scale factor
$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);

//set some language-dependent strings
$pdf->setLanguageArray($l);

// ---------------------------------------------------------

// add a page
$pdf->AddPage();

$pdf->Write(0, $order_type, '', 0, 'L', true, 0, false, false, 0);

$pdf->SetFont('helvetica', '', 7);

// -----------------------------------------------------------------------------

ob_start();

if(!($query = mysql_query($this->sql)))
    throw new Exception(mysql_error());

if(($field_name=mysql_num_fields($query)) > 0) {
    $tableheader = '<table>';
    $tableheader .= '<tr>';
    $tableheader .= '<td>Rows</td>';
    for($x=0;$x<$field_name;$x++) {
        $tableheader .= '<td>'.mysql_field_name($query,$x).'</td>';
        if($x==10)
            break;
    }
    $tableheader .= "</tr>";
}

if(mysql_num_rows($query)) {
    $row = 1;
    while($field = mysql_fetch_assoc($query)) {
        if($row == 1) {
            echo $tableheader;
        }

        echo "<tr>";
        echo "<td>{$row}</td>";
        foreach($field as $val) {
            echo "<td>{$val}</td>";
        }
        echo "</tr>";

        if($row==85) {
            break;
        }
        $row++;
    }
    echo "</table>";
}

$html = ob_get_contents();
ob_end_clean();

$pdf->writeHTML($html, true, false, true, false, '');
$pdf->lastPage();

// -----------------------------------------------------------------------------

//Close and output PDF document
$pdf->Output("memberdata.pdf", 'I'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-26T03:47:34.457

我知道这是一个老问题，但是对于通过谷歌搜索到这里的人，请在代码的开头添加以下内容：

```
// Increase max_execution_time. If a large pdf fails, increase it even more.
ini_set('max_execution_time', 180);
// Increase this for old PHP versions (like 5.3.3). If a large pdf fails, increase it even more.
ini_set('pcre.backtrack_limit', 1000000); 
```

由于 TCPDF 使用了 preg_replace()，报告生成终止。这是旧版本的 PHP 错误（我的是 5.3.3），当字符串太长时 preg_replace() 会静默返回 null。看到这个：http:
[//sourceforge.net/p/tcpdf/discussion/435311/thread/f7f96b04](http://sourceforge.net/p/tcpdf/discussion/435311/thread/f7f96b04)

# windows - 自动化 R 脚本时的不同结果

> ID：14870400
> 
> 赞同：7
> 
> 时间：2013-02-14T08:12:52.720
> 
> 标签：windows, r, redirect, automation, ghostscript

以下命令在 pdf 文件上执行 ghostscript。（`pdf_file`变量包含该pdf的路径）

```
bbox <- system(paste( "C:/gs/gs8.64/bin/gswin32c.exe -sDEVICE=bbox -dNOPAUSE -dBATCH -f", pdf_file, "2>&1" ), intern=TRUE) 
```

执行后`bbox`包括以下字符串。

```
GPL Ghostscript 8.64 (2009-02-03)
Copyright (C) 2009 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
%%BoundingBox: 36 2544 248 2825
%%HiResBoundingBox: 36.395015 2544.659922 247.070032 2824.685914
Error: /undefinedfilename in (2>&1)
Operand stack:

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push
Dictionary stack:
   --dict:1147/1684(ro)(G)--   --dict:1/20(G)--   --dict:69/200(L)--
Current allocation mode is local
Last OS error: No such file or directory
GPL Ghostscript 8.64: Unrecoverable error, exit code 1 
```

然后对该字符串进行操作，以便隔离 BoundingBox 尺寸 (36 2544 248 2825) 并用于裁剪 pdf 文件。到目前为止一切正常。

但是，当我在任务管理器中安排这个脚本（使用 Rscript.exe 或 Rcmd.exe BATCH），或者当脚本在 R 块中并且我按`knit HTML`时，bbox 会获取以下缺少 BoundingBox 信息的字符串，并使其不可用：

```
GPL Ghostscript 8.64 (2009-02-03)
Copyright (C) 2009 Artifex Software, Inc.  All rights reserved.
This software comes with NO WARRANTY: see the file PUBLIC for details.
Processing pages 1 through 1.
Page 1
Error: /undefinedfilename in (2>&1)
Operand stack:

Execution stack:
   %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push
Dictionary stack:
   --dict:1147/1684(ro)(G)--   --dict:1/20(G)--   --dict:69/200(L)--
Current allocation mode is local
Last OS error: No such file or directory 
```

我怎样才能克服这个问题并让脚本自动运行？

（脚本来自[该问题](https://stackoverflow.com/questions/14827853/latex-to-png-conversion)的公认答案）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T04:14:31.780

`2>&1`您在命令末尾添加的将发送到 ghostscript 解释器，而不是 shell 。[Ghostscript 将其解释为 file](http://ghostscript.com/doc/9.07/Use.htm#General_switches)，因此出现错误。我使用 procmon 来查看进程创建：

![stderr 重定向被 ghostscript 视为文件](../Images/22f12bba29c059e3bfadadb82bb24d15.png)

要让 shell 解释它，你必须在命令前加上**`cmd /c`**，像这样

```
> bbox <- system(paste("cmd /c C:/Progra~1/gs/gs9.07/bin/gswin64c.exe -sDEVICE=bbox -dNOPAUSE -dBATCH -q -f",pdf_file,"2>&1"), intern=TRUE)
> print (bbox)
[1] "%%BoundingBox: 28 37 584 691"                                  "%%HiResBoundingBox: 28.997999 37.511999 583.991982 690.839979" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T08:44:26.480

设备的输出将输出到标准输出，错误将输出到标准错误。在终端中，这些显然都被发送到终端并一起显示，在第二种情况下，它们显然不是并且标准输出丢失了。

这并不奇怪，因为您在 (2>&1) 上收到错误消息。这看起来像是将标准输出重定向到一个文件，但有两个问题。首先，您没有为要发送到的输出提供文件名，其次，您没有在命令外壳中运行，因此命令处理器不会执行重定向。

我对 R 一无所知，所以我无法告诉你如何做到这一点，但无论如何你都应该从命令行中删除 '2>&1' 开始。您可能还想考虑使用不到 4 年的 Ghostscript 版本。当前版本是 9.07，刚刚发布。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T07:04:21.700

试试这个。

使用 [环境变量设置输出文件](https://stackoverflow.com/questions/12533113/setting-environment-variables-programmatically)

然后使用 %envvar% 表示法，根据上面的链接将是 %TODAY% ，它将被替换为文件名 friday。-f 不是必需的，但不应该受到伤害。如果要路由输出，请设置第二个环境变量并将其路由 >%outenv%。

这样您就可以进行简单的系统调用（请参阅使用变量而不是固定字符串的链接），

```
Sys.setenv(envvar= "pdf.file")  
Sys.setenv(outenv= "out.file")
"C:/gs/gs8.64/bin/gswin32c.exe -sDEVICE=bbox -dNOPAUSE -dBATCH %envvar% >%outenv%" 
```

# eclipse - 带有未提交更改的 egit pull

> ID：14870405
> 
> 赞同：1
> 
> 时间：2013-02-14T08:13:01.377
> 
> 标签：eclipse, git, pull

我正在 Eclipse 中处理一个从 GIT 远程存储库克隆的项目。Eclipse eGit 插件允许您在不真正了解 GIT 的情况下开始工作，而这正是我所在的地方。我最终意识到，当我进行“与 HEAD 修订比较”时，我并不是像我最初想的那样与远程存储库进行比较，而是与我的本地存储库进行比较。我现在明白我需要从远程存储库中提取更新，但不清楚我的本地更改会发生什么。我没有提交这些更改，部分原因是我认为我可能会更新远程存储库（我现在意识到我不会），但部分原因是我发现 Package Explorer 文件修饰（>“）在识别文件方面很有用我已经修改了。如果我承诺，那么我认为这些迹象将消失。

我的问题：

1.  如何在不丢失更改的情况下更新本地存储库？
2.  我可以在不丢失修改后的文件指示器的情况下执行此操作吗？

**更新**：我以为我了解其中的一些工作原理，但我现在真的迷路了，特别是工作空间和（本地）存储库之间的关系。

我使用 Team->Pull 来更新我的存储库。由于我没有提交任何更改，我希望这可以正常工作，但它会将工作区和 repo 之间的所有更改标记为冲突（混淆 #1）。

我假设我需要使用 Team->Synchronize 将更改带入工作区，就像使用其他 VCS 一样。当我这样做时，我看到了更改，但甚至没有将非冲突更新应用到工作区，并且没有“更新”操作来执行此操作，所以我不知道如何应用它们（混淆 #2） .

对于有冲突的更新，我手动将更改合并到工作区副本中并使用“标记为合并”，但这似乎无济于事。冲突未清除。我希望此时的更改只是工作区中未提交的更改（混淆＃3）。

我在别处读到，为了消除冲突，我应该使用 Team->Add 和 Team->Commit，但我不想像最初解释的那样提交我的更改（混淆 #4）。

你可以看到我很困惑！任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:52:04.683

如果 git pull 不起作用，你可以使用这个：

```
git stash
git pull
git stash apply 
```

不确定 Eclipse 是否支持 stash，因此您可能必须使用命令行。

# bash - Bash for 循环 - 以 n 命名（这是用户的输入）

> ID：14870406
> 
> 赞同：5
> 
> 时间：2013-02-14T08:13:04.293
> 
> 标签：bash

我正在使用循环遍历命令`for i in {1..n}`并希望输出文件具有`n`扩展名。

例如：

```
 for i in {1..2}
  do cat FILE > ${i}_output
  done 
```

然而`n`，用户的输入是：

```
 echo 'Please enter n'
  read number
  for i in {1.."$number"}
  do 
    commands > ${i}_output
  done 
```

循环滚动`n`多次 - 这工作正常，但我的输出看起来像这样`{1..n}_output`。

如何在这样的循环中命名我的文件？

**编辑**

也试过这个

```
 for i in {1.."$number"} 
  do
    k=`echo ${n} | tr -d '}' | cut -d "." -f 3`
    commands > ${k}_output
  done 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T08:21:55.477

使用[“C 风格”`for`循环](http://tldp.org/LDP/abs/html/loops1.html#FORLOOPC)：

```
echo 'Please enter n'
read number
for ((i = 1; i <= number; i++))
do 
    commands > ${i}_output
done 
```

请注意，在-loop 标头之前或中`$`不需要，但需要[双括号](http://tldp.org/LDP/abs/html/dblparens.html#DBLPARENSREF)。`number``i``for`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T08:21:13.943

for 循环中的 range 参数仅适用于常量值。所以`{1..$num}`用一个类似的值替换：`{1..10}`。

或者

将 for 循环更改为：

```
 for((i=1;i<=number;i++)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:24:20.060

您可以使用一个简单的 for 循环（类似于 C、C++ 等语言中的循环）：

```
echo 'Please enter n'
read number
for (( i=1; i <= $number; i++ ))
do
  commands > ${i}_output
done 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T08:16:07.030

尝试`seq (1)`改用。如`for i in $(seq 1 $number)`.

# iphone - 在 iTunes 连接中删除新版本的应用程序

> ID：14870408
> 
> 赞同：43
> 
> 时间：2013-02-14T08:13:29.253
> 
> 标签：iphone, ios, ipad, itunes, app-store-connect

我在 iTunes Connect 中上传了我的应用程序的新版本，但我不想要和/或不需要它 - 我该如何摆脱它？

目前状态显示为黄点**准备上传..**

我想删除显示**准备上传**状态的应用程序的新版本，而不是显示**准备好销售**状态的旧应用程序，并且新版本已在商店中可用。

是否可以在不影响旧版本的情况下删除 iTunes Connect 中的新版本应用程序？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2016-11-03T11:38:57.077

另一种解决方法是简单地转到您要删除的版本并更新版本号。

即，在我的例子中，我们为 3.1.2 版创建了更新，但现在希望更新为 3.2 版。我们没有删除新创建的 3.1.2 版本（我认为不可能），而是更新了版本号。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-27T12:40:01.343

在上传二进制文件之前，您无法删除从 iTunesConnect 创建的新版本。您只能删除完整的应用程序 - 在审核之前或之后。

[苹果对这里](https://developer.apple.com/library/ios/documentation/LanguagesUtilities/Conceptual/iTunesConnect_Guide/Chapters/ReplacingYourAppWithANewVersion.html#//apple_ref/doc/uid/TP40011225-CH14-SW1)发生的事情给出了相当完整的描述，但没有明确表示您不能删除版本。他们确实说一旦创建平台就不能删除 - 而且它们似乎像版本一样工作。

我想他们从没想过人们会错误地或作为练习创建一个新版本——但我们做到了！

我能想到的唯一原因是作为一种安全措施，这样您就不能将购买了您的应用程序的人搁置在一个平台上，然后您将其删除。我猜版本在后台像平台一样工作，所以苹果不能给我们一个功能而不是另一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T09:36:08.513

您不必担心，**准备上传**状态意味着 iTunes 要求您告知您已准备好上传二进制文件，然后单击按钮**Ready to Upload Binary** .. 您的构建必须被某人拒绝，或者您还没有尚未上传任何。

如果你想上传一个新的构建，你必须点击**Ready to Upload Binary**，然后状态会变成**Waiting for Upload**，然后如果你上传二进制文件成功它会变成**Upload Received**，然后它会进入**Waiting for Review**，下一步进来**Review**，那么您的状态可能是**Rejected**，或**Ready For Sale**，或**Approved**（需要手动发布）..

我希望以上可以消除您的疑问..

**更新 -**

这个过程已经改变了很多，虽然**你不能删除二进制**文件，如果你不想改变版本号，你需要通过改变版本号来上传新的二进制文件。对于上传的过程，我们没有选项让它**准备上传**了..您按照以下步骤..

1.  从 XCode 上传特定版本的二进制文件。
2.  检查应用程序的itunesconnect中的Activity选项卡，它应该在处理模式下显示上传的二进制文件，它会在某个时候得到处理。
3.  单击可能处于准备提交状态的应用程序版本，进入并添加您最近上传和处理的构建，然后单击保存。
4.  然后**提交审核**

干杯。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-14T08:16:57.003

您必须去管理您的应用程序并转到您的应用程序。有一个详细信息按钮，然后单击标题链接下的二进制详细信息。该屏幕上应该有类似“拒绝二进制文件”的内容。

# c# - 根据通过 http 加载的修改日期刷新缓存的 xml 文件

> ID：14870411
> 
> 赞同：0
> 
> 时间：2013-02-14T08:13:42.177
> 
> 标签：c#, xml, caching, linq-to-xml

我有一些数据存储在一个 xml 文件中，我希望避免在每个请求上都加载和解析。可以随时直接修改文件。它由一个通过 http（通过`XDocument.Load`）的 asp.net mvc 应用程序使用。我正在考虑使用 asp.net 缓存存储文件，但需要在更新 xml 文件时刷新缓存。

**我可以找出存储在远程服务器上的文件的最后修改日期吗？**

该文件实际上存储在一个虚拟目录中，该目录可能与 mvc 应用程序位于同一台服务器上，但我不能依赖它。

**如果没有，是否有另一种机制可以让我知道是使用缓存版本还是重新加载实际文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:22:07.700

我想您应该能够使用`IF-MODIFIED-SINCE`http 标头。[在这里查看其他 SO 问题。](https://stackoverflow.com/questions/998791/if-modified-since-vs-if-none-match)或[此处的 w3c 定义。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

# bash - 在后台启动任务的 shell 启动脚本的返回码

> ID：14870417
> 
> 赞同：1
> 
> 时间：2013-02-14T08:13:59.187
> 
> 标签：bash, shell

我正在寻求有关从 shell 脚本启动（java）程序的最佳实践的建议。

目前，我们公司的做法似乎是有一个 shell 脚本，它设置所有环境变量并在后台启动 java（在这种情况下并不重要）进程，类似于：

```
nohup $JAVA_CMD > $LOG_DIR/$LOG_FILE 2>&1 & 
```

这是脚本的最后一行。我们正在启动单一进程。

我的一个疑问是，即使在程序由于某些异常/错误而无法启动的情况下，此类 shell 进程的返回码始终为 0。这使得监控工具变得很困难——例如，它们不能依赖 shell 退出代码。

我发现这可以通过等待过程结束来解决，例如：

```
nohup $JAVA_CMD > $LOG_DIR/$LOG_FILE 2>&1 &
wait $! 
```

但我的理解是，这使得最后一个`&`自运行以来完全没用：

```
nohup $JAVA_CMD > $LOG_DIR/$LOG_FILE 2>&1 
```

会有同样的效果。

所以我的问题是：从 shell 启动程序的最佳实践是什么？在后台运行是否有一些我忽略的好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:18:53.187

您应该查看并批处理，可能还有 cron。这些都是以非交互方式运行命令脚本、作业流的工具。at 运行作业，然后将 stderr 输出通过电子邮件发送回用户 - 默认行为。

```
at -k now <<!
$JAVA_CMD > $LOG_DIR/$LOG_FILE 2>&1
! 
```

批处理命令将让您将一系列命令写入文件，然后像执行标准输入一样执行文件，您也可以交互地执行此操作。

cron 作业 (crontab) 在指定的时间和日期运行，例如每周一 0200。这似乎不适合您的问题。

尝试这个：

```
http://www.thegeekstuff.com/2010/06/at-atq-atrm-batch-command-examples/ 
```

# python - -1 的逻辑或运算

> ID：14870421
> 
> 赞同：3
> 
> 时间：2013-02-14T08:14:18.733
> 
> 标签：python, python-2.7, logical-operators

为什么我在 python 中尝试的以下逻辑操作的输出不同？

```
-1 or 1
 1 or -1 
```

第一次退货`-1`和第二次退货`1`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T08:16:00.970

`and`并且`or`都很*懒惰*；他们评估操作数，直到他们可以决定结果（`and`在第一个操作数处停止`False`；`or`在第一个`True`操作数处停止）。它们返回评估的最后一个操作数，如[文档中所述](http://docs.python.org/2/reference/expressions.html#boolean-operations)：

> 请注意，既不限制`and`也不`or`限制它们返回的值和类型`False`，`True`而是返回最后评估的参数。这有时很有用，例如，如果`s`字符串为空，则应将其替换为默认值，则表达式会`s or 'foo'`产生所需的值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T08:16:05.647

阅读[文档](http://docs.python.org/3/reference/expressions.html#boolean-operations)：

> 表达式`x or y`首先计算`x`; 如果`x`为真，则返回其值；否则，`y`评估并返回结果值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T08:15:18.987

第一部分`-1`和`1`都被评估`True`并因此返回。第二部分被忽略。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-14T08:15:55.533

`or`操作员短路。它返回`True`布尔上下文中的第一个值，否则返回最后一个计算的表达式。`-1`并且`1`都`True`在布尔上下文中，所以你得到第一个数字。

`0`，`None`并且所有空容器评估为`False`。

例如：

```
>>> 0 or 5
5
>>> '' or []
[] 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-02-14T08:16:03.623

如果`or`第一个条件为真，则不评估第二个条件，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-15T16:01:47.647

我认为 OP 期望“或”的返回值是 True 或 False（就像其他一些语言中的布尔运算符一样。）

Python 和 Perl 一样，只返回第一个“真”值（其中“真”表示数字非零，字符串非空，非无等）

类似地，当且仅当两者都为“真”时，'and' 返回最后一个值。

他可能会对类似的结果感到更加惊讶

```
{'x':1} or [1,2,3] 
```

Perl 程序员经常习惯性地使用这种结构（如`open(FILE, "foo.txt") || die`; 我不知道这在 Python 中是否常见。

（见[人](http://docs.python.org/2/library/stdtypes.html)）

# regex - 为什么非单词字符在我的正则表达式中不匹配？

> ID：14870422
> 
> 赞同：2
> 
> 时间：2013-02-14T08:14:25.457
> 
> 标签：regex, perl

我需要在引号字符（`"`）之间捕获字符串以更改花哨的引号，因此我创建了替换，我的代码：

```
my $pk = qq|IV Baltic Sea NGO Forum "Challenges for Baltic Sea civil society"|;
$pk =~ s/"(\p{Word}+.?+)"/«$1»/g;
say $pk; 
```

我的意思是正则表达式：

1.  引用字符
2.  后跟至少一个单词 char
3.  后跟任何字符
4.  直到下一个引用字符（非贪婪捕获）

当引号之间有任何非单词字符时，我不会被捕获。为什么？

我也找到[了另一个解决方案](https://stackoverflow.com/a/694356/196241)，但我想了解，为什么我的正则表达式不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T08:17:37.570

`.?+`不是勉强量词。它实际上是一个*所有格* `? quantifier`。

你需要`.+?`改用。

所以，试试这个：

```
$pk =~ s/"(\p{Word}+.+?)"/«$1»/g; 
```

或者，您甚至可以使用`[^"]+`而不是`reluctant quantifier`. 它将在第一个`"`字符处自动停止：

```
$pk =~ s/"(\p{Word}+[^"]+)"/«$1»/g; 
```

# c++ - 符号是多重定义的

> ID：14870423
> 
> 赞同：6
> 
> 时间：2013-02-14T08:14:29.413
> 
> 标签：c++

我有一个 .h 文件

测试.h

```
std::list<std::string> RegisterList; 
```

我想在 2 个 .c 文件中访问此列表

交流电

```
#include "test.h"

RegisterList.push_back(myString); 
```

公元前

```
#include "test.h"

RegisterList.push_back(myString2); 
```

当我编译这段代码时，我得到一个错误 ld: fatal: symbol `RegisteredList' is multiply-defined:

可能是什么问题？RegsiterList 是否在 test.h 中默认初始化，这导致了这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T08:15:56.797

因为你在头文件中定义了对象，违反了一个定义规则。永远不要在头文件中定义对象。

如果要使用全局对象，则需要将其声明为 extern 并将其定义在一个且只有一个源文件中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T08:17:53.023

你需要类似的东西：

测试.h

```
extern std::list<std::string> RegisterList; 
```

交流电

```
#include "test.h"

RegisterList.push_back(myString); 
```

公元前

```
#include "test.h"

std::list<std::string> RegisterList;

RegisterList.push_back(myString2); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T08:52:50.123

您的代码通过一个链：`preprocessor`-> `compiler`-> `linker`。您的问题源于预处理器，但直到链接器才会出现。

`#include`是一个预处理器指令。

预处理器不会编译您的`.cpp`文件，而是从中合成另一个文件，并粘贴到任何包含的文件中。

然后编译器编译合成文件，生成一个包含数据定义等的目标文件。

您将预处理器定向到`#include`两个不同文件中的头文件`.cpp`，这会生成两个不同的目标文件，其中定义了相同的数据。

`ld: fatal: symbol 'RegisteredList' is multiply-defined`

此错误消息是链接器 ( `ld`) 抱怨一个全局符号被定义了多次，并且它不知道该使用哪一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-14T08:15:42.857

不要在头文件中实例化变量。始终在代码文件中实例化它，并在头文件中引用实例化。

# php - PHP登录系统会话

> ID：14870428
> 
> 赞同：0
> 
> 时间：2013-02-14T08:15:10.333
> 
> 标签：php, session

我是一个新手，我正在尝试构建一个 PHP Session 登录系统。

但是我有几个问题，我应该在会话中存储什么？

我已经下载了一些 php 登录脚本来进行一些实验，它们似乎将用户名和密码存储在会话中。

为什么需要存储密码？我可以将用户标识存储在会话中吗？

最后，进行身份验证：

我是否只需检查 isset 会话用户名和 id 是否显示内容，否则回显请登录？

对不起我的新手问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:23:43.820

我总是在会话中保存用户 ID 和 IP 地址。这不是坚如磐石，但这样您就可以额外检查会话是否连接到该 IP。如果我在会话中保存密码，我只保存哈希。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:24:36.020

那么密码不需要存储在会话ID中。这是个人喜好的问题。或者您正在使用的登录脚本可能正在尝试优化他们的查询。可能他们可能会要求用户重新验证自己，而不是对数据库进行另一个查询，它可以只使用 php 进行检查。尽管这可能不是最安全的方法。

一个简单的 isset 方法应该可以很好地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:30:33.630

您需要在会话中存储的重要内容是已登录用户的 ID，因为您可以使用已登录的用户在整个网站上解决问题，通过此您可以检查用户是否已登录，例如 $_SESSION ['user_id'] 设置用户在会话中的值已登录并在注销时销毁会话 user_id ，除了 user_id 之外，您还可以存储您在网站上经常需要的姓名和年龄等，您可以在会话中也存储这些东西，希望你会发现它很容易，

# drupal - 如何对分类学 ul 应用额外的类？

> ID：14870443
> 
> 赞同：0
> 
> 时间：2013-02-14T08:15:45.553
> 
> 标签：drupal, drupal-theming, drupal-taxonomy

在 Drupal 中，我在节点模板中呈现分类项目列表，使用

```
print render($content['field_my_taxonomy']); 
```

它显示如下列表：

```
<ul class="links">
  <li class="taxonomy-term-reference-0">
       <a property="rdfs:label skos:prefLabel" typeof="skos:Concept" href="somewhere">
         Tomaten
       </a>
   </li>
   (...) 
```

到现在为止还挺好。现在，我想将我自己的一些类应用于**li**标签和**ul**标签。

我设法通过**theme_preprocess_node为每个****li**标签添加了一个类：

 **```
$vars['content']['field_my_taxonomy'][$i]['#options']['attributes']['class'] = "my-li-class"; 
```

*（其中 $i 包含 li-item 的索引）。*

但是，我找不到将类添加到**UL的类似程序**

我发现了涉及为特定字段创建模板文件，或涉及完全覆盖分类项目的主题功能的灵魂。我不喜欢这些解决方案，因为这涉及为我的主题添加相当多的“臃肿”。我只想向数组中添加一个新项目，让 Drupal 负责渲染。当然，必须可以将 **['attributes']['class']='my-ul-class**添加到某处的数组中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T09:38:56.147

您可以覆盖`theme_item_list($variables)`主题函数**或**实现`hook_preprocess_item_list($variables)`我认为的 hook_preprocess_HOOK 函数。第一个将在主题本身中进行更改，第二个将在进入正常主题功能之前进行更改。

链接：

[http://api.drupal.org/api/drupal/includes!theme.inc/function/theme_item_list/7](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme_item_list/7)

[http://api.drupal.org/api/drupal/modules!system!theme.api.php/function/hook_preprocess_HOOK/7](http://api.drupal.org/api/drupal/modules!system!theme.api.php/function/hook_preprocess_HOOK/7)**

# java - 获取同一页面上的内容标签

> ID：14870447
> 
> 赞同：0
> 
> 时间：2013-02-14T08:16:00.903
> 
> 标签：java, tags, liferay, portlet

我正在为liferay 门户开发portlet。我需要在我的 portlet 中获取其他 portlet 中的内容标签。此刻我所拥有的只是页面上所有 portlet 的 portlet ID。例如，如果我有 ID 为 33（博客）的 portlet，我需要获取博客条目的标签吗？在博客 portlet 中打开。有任何想法吗？那是未来的答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T08:06:01.193

我找到了很好的解决方案：我为博客 portlet 编写了钩子插件。在这个插件中，我修改了 init-ext.jsp，在其中将 AssetEntry 对象添加到共享会话参数中。在我的自定义 portlet 中，我只使用此参数并可以以任何方式使用它。我现在考虑的问题是portlet 的执行顺序。没有指定顺序，所以我不能确定，该博客首先执行，在我的自定义 portlet 中，我可以在公共会话参数中访问 AssetEntry。无论如何，它是有效的解决方案。

# php - 需要在php的单个文档中创建多个json对象

> ID：14870454
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:16:11.043
> 
> 标签：php, json

我已经使用此代码制作`json`对象

```
if(mysql_num_rows($result)) {
    while($document = mysql_fetch_assoc($result)) {
      $documents[] = $document;
        }
  }

header('Content-type: application/json');
echo json_encode(array('documents'=>$documents)); 
```

它在这样的文档中给了我单个 json

```
{"document":[{"document":{"id":"2","name":"test","pages":"name","img":"path","lines":"data"}]} 
```

但是我需要

```
{"document":[{"document":{"id":"2","name":"test",pages":[{"img":"first img","lines":" <p>first line"}],pages":[{"img":"second img","lines":" <p>second line"}]}]} 
```

现有 json 中的手段需要另一个包含更多 img 和行的 json 名称页面。它可以怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:38:40.873

如果你做这样的事情：

```
if(mysql_num_rows($result)) {
    while($document = mysql_fetch_assoc($result)) {
      $document["pages"] = array();
      $document["pages"][] = array("img" => "first img", "lines" => "first line");
      $document["pages"][] = array("img" => "second img", "lines" => "second line");
      $documents[] = $document;
    }
} 
```

`json_encode(array('documents'=>$documents));`将返回 JSON 对象，其中每个文档将包含一个页面数组，其中包含字段`img`和`lines`. 基本上，您只需要在 PHP 中创建所需的结构，即可在 JSON 中获得相同的结构。

上面的代码应该返回如下内容：

```
{"document": [{"document" : {"id":"2",
                             "name":"test", 
                             "pages":[{"img":"first img","lines":" <p>first line"},
                                     {"img":"second img","lines":" <p>second line"}]
                            }}
              ]} 
```

# sql - 在 (Oracle) 数据库中归档（旧）应用程序数据

> ID：14870455
> 
> 赞同：1
> 
> 时间：2013-02-14T08:16:12.103
> 
> 标签：sql, database, oracle, archive

我有一个相当大的与订单管理相关的业务应用程序，其数据在 Oracle 数据库中。

所有数据都可以与订单相关。现在，数据量很大，表中有数百万条记录 - 从而减慢了我的应用程序 SQL 查询速度。

我正在计划我的主要“订单模式”的副本模式，比如“归档订单模式”。并编写 SQL 查询以将（旧订单）数据从主要模式移动到存档模式，一次一个（旧）订单。

但是 SQL 查询非常慢，并且移动（旧）订单的所有数据（跨这么多表）需要很长时间。

欢迎任何设计/方法/优化输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T16:28:24.577

首先，正如其他人所指出的，订单管理表中的几百万行是没有意义的。即使是几亿行或数十亿行也不是挑战。我们毫不费力地管理具有更大订单管理表的 EBS。确保您使用 EBS 并发请求（而不是 DBA 工具）收集模式统计信息；尽管您可能会咨询您的 DBA 以重建索引。还要确保您已打补丁，因为 Oracle EBS 补丁通常包含不同的索引，以提高记录问题的性能。运行一些 AWS 统计数据甚至 SQL 跟踪来查找您的瓶颈并与 Oracle Support 合作。

接下来，**不要**使用 SQL 来归档种子表。你*会*遇到问题，然后甲骨文不会帮助你。相反，您应该做一些研究并使用 Oracle 的**内置**和支持的归档和清除过程。首先阅读 My Oracle Support 上的 Note 752322.1，它将指导您在订单管理中管理您的数据。

# html - 调整大小时 div 浮出窗口

> ID：14870456
> 
> 赞同：0
> 
> 时间：2013-02-14T08:16:12.180
> 
> 标签：html, resize, window, floating

如果您调整它的大小，我想防止我的 div 浮出浏览器窗口。查看这个站点，然后调整窗口大小，您会看到 div 浮出。[见这里](http://ain.henricson.net/)。怎么了？我试图在没有运气的情况下将 div 设置在包装器中。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:23:09.983

这个页面有很多问题，但这里有一些你应该做的事情（一些与修复 div 问题无关）

*   将所有 <link/> && <script/> && <style/> 标签放在开头。

你需要的css（虽然你可能会告诉我你在应用这个之后想要更多的东西）是：

```
.content {
  clear: both;
  margin: 0 auto;
  overflow: auto;
  top: 100px;
  width: 1000px;
} 
```

# objective-c - 获得 IAP 产品响应后的 Objective-C 错误

> ID：14870457
> 
> 赞同：3
> 
> 时间：2013-02-14T08:16:22.163
> 
> 标签：objective-c, cordova

此代码来自 Phonegap 代码：IAP 插件。错误发生在“sent js”之后的代码行上。除了最后一个“nil”之外，发送到函数的所有元素都是非零的。我什至将它们注销以确保它们已发送。此代码就在插件之外（[https://github.com/usmart/InAppPurchaseManager-EXAMPLE](https://github.com/usmart/InAppPurchaseManager-EXAMPLE)），除了日志记录之外没有被修改。在调试器中，我看到没有一个对象为零，所以我不明白为什么会发生错误。

这是错误：

> [__NSArrayI JSONRepresentation]：无法识别的选择器发送到实例 0xdc542d0 2013-02-13 23:26:17.209 GoblinSlots[4519:707] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSArrayI JSONRepresentation]：发送了无法识别的选择器到实例 0xdc542d0'

这是代码：

```
 - (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:   (SKProductsResponse *)response
      {
        NSLog(@"got iap product response");
        for (SKProduct *product in response.products) {
            NSLog(@"sending js for %@", product.productIdentifier);
            NSLog(@"  title %@", product.localizedTitle );
            NSLog(@"  desc%@ - %@", product.localizedDescription, product.localizedPrice );

NSArray *callbackArgs = [NSArray arrayWithObjects:
                                 NILABLE(product.productIdentifier),
                                 NILABLE(product.localizedTitle),
                                 NILABLE(product.localizedDescription),
                                 NILABLE(product.localizedPrice),
                                 nil ];
        NSLog(@"sent js");

        NSString *js = [NSString stringWithFormat:@"%@.apply(plugins.inAppPurchaseManager, %@)", successCallback, [callbackArgs JSONSerialize]];
        NSLog(@"js: %@", js);
        [command writeJavascript: js];
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T02:38:25.543

所有进行 JSON 序列化的东西似乎都已包含在 Cordova 插件中。无需下载和安装另一个 JSON 库。[（一种）](http://codemonger.tumblr.com/post/11098641444/encoding-json-in-objective-c-with-phonegap)

PhoneGap 似乎正在从 SBJson 切换到 JSONKit。[(二)](https://github.com/phonegap/phonegap-plugins/pull/217)

PhoneGap 还在更改所有 JSON 方法以使用“cdvjk_”前缀。[（C）](https://github.com/phonegap/phonegap-plugins/pull/876)

据我所知，在这些变化期间，有些事情并不顺利。我所做的是编辑文件 Plugins/InAppPurchaseManager.m ，我在其中进行了这些更改：

*   添加行

`#import <Cordova/CDVJSON.h>`

*   换行

`return [self respondsToSelector:@selector(cdvjk_JSONString)] ? [self cdvjk_JSONString] : [self cdvjk_JSONRepresentation];`

和

`return [self JSONString];`

. （将这个或更好的错误修复推回给可爱的 PhoneGap 人的正确方法是什么？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:26:02.867

`JSONRepresentation`是一个`SBJson`添加的类别，因此您必须将其包含`SBJson.h`在使用它的类中。

# wpf - WPF 将许多项目加载到 Grid 并显示在新的可用行/列上

> ID：14870464
> 
> 赞同：3
> 
> 时间：2013-02-14T08:16:43.603
> 
> 标签：wpf, grid

我在我的 WPF 应用程序上创建了一个带有 4 行和列的网格来显示媒体：

```
 <Grid Name="ControlsGrid">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="33*" />
                <ColumnDefinition Width="33*" />
                <ColumnDefinition Width="33*" />
                <ColumnDefinition Width="33*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="33*" />
                <RowDefinition Height="33*" />
                <RowDefinition Height="33*" />
                <RowDefinition Height="33*" />
            </Grid.RowDefinitions>
        </Grid> 
```

从另一种方法我添加到网格中：

```
 WindowsFormsHost formhost = new WindowsFormsHost();
            formhost.Child = new System.Windows.Forms.Control();
            formhost.Child = control;
            ControlsGrid.Children.Add(formhost); 
```

对象加载正常，在调试期间我看到集合的大小增加了..但是控件显示在第一个 0,0 网格上，并且当添加新控件时，它会覆盖那里的控件。
如何将控件设置在网格上的空白位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:24:38.313

您将需要一种方法来确定下一个空白空间，然后您需要设置网格行和列附加属性：

```
 Grid.SetRow(control, row);
        Grid.SetColumn(control, column); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:39:16.907

您只需要设置`Grid.Column`和`Grid.Row`让控件位于每个空间中。

但是我注意到您将所有网格列/行设置为相同的大小，所以也许 UniformGrid 会是一个更好的选择

xml:

```
<Window x:Class="WpfApplication16.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Name="UI">
    <UniformGrid Name="ControlsGrid" Rows="4" Columns="4" />
</Window> 
```

代码：

```
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
        AddWinformControls();
    }

    private void AddWinformControls()
    {
        for (int i = 0; i < 12; i++)
        {
            WindowsFormsHost formhost = new WindowsFormsHost();
            formhost.Child = new System.Windows.Forms.Label() { Text = "Hello" };
            ControlsGrid.Children.Add(formhost);
        }
    }
} 
```

# android - 使用分页器视图滑动部分页面

> ID：14870475
> 
> 赞同：3
> 
> 时间：2013-02-14T08:17:23.993
> 
> 标签：android, android-viewpager

我有`ViewPager`，`PagerTabStrip`当从一个页面滑动到另一个页面时，寻呼机和选项卡都将一起移动。（如谷歌支付）

它工作正常。现在所有的页面都有共同的数据，并且滑动时会改变一部分，所以我不想滑动整个页面，只是要改变的区域。

正如您在下图中看到的那样，滑动页面时只会影响红色区域，绿色区域不会移动。

我已经搜索了很多，但我找不到任何有用的东西，任何帮助将不胜感激。

![](../Images/b2e14524c3100c8d75f7d6264c478bca.png)

浏览器代码：

```
<android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <android.support.v4.view.PagerTabStrip
                android:id="@+id/pager_title_strip"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:background="#FFFFFF"
                android:textColor="#003366"
                android:paddingTop="4dp"
                android:paddingBottom="4dp"/>
    </android.support.v4.view.ViewPager> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T11:43:18.787

使用`swipeyTabs`就是答案。使用时的问题`PagerTabStrip`是，`PagerTabStrip`将在`ViewPager`标签内，请参阅以下代码：

```
<android.support.v4.view.ViewPager
            android:id="@+id/pager"
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <android.support.v4.view.PagerTabStrip
                android:id="@+id/pager_title_strip"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:background="#FFFFFF"
                android:textColor="#003366"
                android:paddingTop="4dp"
                android:paddingBottom="4dp"/>
    </android.support.v4.view.ViewPager> 
```

所以你不能把它们分开。但是当使用 SwipeyTabs 时，每个标签将作为一个单独的部分，请参见以下代码：

```
<net.peterkuterna.android.apps.swipeytabs.SwipeyTabs
        android:id="@+id/swipeytabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        swipeytabs:bottomBarColor="#ff96aa39"
        swipeytabs:bottomBarHeight="2dip"
        swipeytabs:tabIndicatorHeight="3dip"
        android:background="#ff3b3b3b"/>

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_width="fill_parent"
        android:layout_height="0px"
        android:layout_weight="1" /> 
```

在这种情况下，您可以通过处理`ViewPager`和`SwipeyTabs`作为两个部分来自定义您的布局。

在您的情况下，我想您可以将`SwipeyTabs`and`ViewPager`放在图像中的红色位置，而在绿色区域中，您必须根据需要调整它们。

我发现这些链接可能会对您有所帮助。祝你好运。

*   [滑动标签示例](http://code.google.com/p/android-playground/source/browse/trunk/SwipeyTabsSample/#SwipeyTabsSample%253Fstate%253Dclosed)
*   [ViewPager 遇到 Swipey 选项卡](http://blog.peterkuterna.net/2011/09/viewpager-meets-swipey-tabs.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:20:31.037

免责声明：我误读了您的帖子。将 与 分开`ViewPager`可能`PagerTabStrip`行不通，或者可能需要另一种方法。我会在这里留下答案，以防万一它可能有帮助。

您可以通过将 嵌入到`ViewPager`单独的片段中并在下方放置另一个独立的片段来实现这一点，这不受`ViewPager`.

基本上，您的主要活动由两个片段组成：一个包含`ViewPager`（包含更多片段），另一个包含您的固定视图。

要正确地做到这一点，这需要对嵌套片段的支持，这仅在 Android 4.2 或最新支持库（修订版 11）中可用。

请注意，在为 实例化适配器时`ViewPager`，您需要使用`FragmentManager`返回的`getChildFragmentManager()`.

# c# - 编写一个设计良好的异步/非异步 API

> ID：14870478
> 
> 赞同：57
> 
> 时间：2013-02-14T08:17:40.483
> 
> 标签：c#, asynchronous

我面临着设计执行网络 I/O（对于可重用库）的方法的问题。我读过这个问题

[c# 5 API 设计中的等待/异步模式](https://stackoverflow.com/questions/6528517/c-sharp-5-await-async-pattern-in-api-design)

以及其他更接近我的问题的人。

所以，问题是，如果我想同时提供**异步和非异步**方法，我该如何设计它们？

例如，要公开方法的非异步版本，我需要执行类似的操作

```
public void DoSomething() {
  DoSomethingAsync(CancellationToken.None).Wait();
} 
```

我觉得这不是一个伟大的设计。我想要一个关于如何定义可以包装在公共方法中以提供两个版本的私有方法的建议（例如）。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-02-14T13:54:32.017

如果您想要最可维护的选项，只需提供一个`async`API，该 API 的实现无需进行任何阻塞调用或使用任何线程池线程。

如果您真的想要同时拥有`async`和同步 API，那么您将遇到可维护性问题。你真的需要实现它两次：一次`async`和一次同步。这两种方法看起来几乎相同，因此初始实现很容易，但是您最终会得到两个几乎相同的独立方法，因此维护是有问题的。

特别是，没有一种简单的方法来制作`async`或同步“包装器”。Stephen Toub 有关于这个主题的最佳信息：

1.  [我应该为同步方法公开异步包装器吗？](https://devblogs.microsoft.com/pfxteam/should-i-expose-asynchronous-wrappers-for-synchronous-methods/)
2.  [我应该为异步方法公开同步包装器吗？](https://devblogs.microsoft.com/pfxteam/should-i-expose-synchronous-wrappers-for-asynchronous-methods/)

（这两个问题的简短回答都是“否”）

但是，如果您想避免重复实现，可以使用一些技巧；最好的通常是[布尔参数 hack](https://docs.microsoft.com/en-us/archive/msdn-magazine/2015/july/async-programming-brownfield-async-development#the-flag-argument-hack)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T10:42:25.627

我同意马克和斯蒂芬（克利里）的观点。

（顺便说一句，我开始写这篇文章作为对斯蒂芬答案的评论，但结果太长了；让我知道是否可以将其写为答案，并随时从中获取一些信息并添加本着“提供一个最佳答案”的精神，它对斯蒂芬的回答。

它真的“取决于”：就像 Marc 所说，了解 DoSomethingAsync 是如何异步的很重要。我们都同意让“sync”方法调用“async”方法和“wait”是没有意义的：这可以在用户代码中完成。拥有单独方法的唯一优点是获得实际的性能提升，并拥有一个在底层不同且针对同步场景量身定制的实现。如果“异步”方法正在创建线程（或从线程池中获取），则尤其如此：您最终会得到下面使用两个“控制流”的东西，而“有希望”的同步看起来会在调用者的上下文。这甚至可能存在并发问题，具体取决于实现。

同样在其他情况下，比如 OP 提到的密集 I/O，可能值得有两种不同的实现。大多数操作系统（当然是 Windows）对于 I/O 具有针对这两种场景量身定制的不同机制：例如，异步执行和 I/O 操作从操作系统级机制（如 I/O 完成端口）中获得了很大优势，这增加了一点内核中的开销（不显着，但不为空）（毕竟它们必须做簿记、调度等），以及更直接的同步操作实现。代码复杂度也有很大差异，尤其是在完成/协调多个操作的函数中。

我会做的是：

*   有一些典型用法和场景的示例/测试
*   查看使用了哪个 API 变体、使用位置和测量。还测量“纯同步”变体和“同步”之间的性能差异。（不是针对整个 API，而是针对选定的几个典型案例）
*   根据测量，决定增加的成本是否值得。

这主要是因为两个目标在某种程度上相互对比。如果您想要可维护的代码，显而易见的选择是根据异步/等待（或相反）实现同步（或者，更好的是，只提供异步变体并让用户“等待”）；如果你想要性能，你应该以不同的方式实现这两个功能，以利用不同的底层机制（来自框架或来自操作系统）。我认为从单元测试的角度来看，您实际实现 API 的方式不应该有所不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-06T18:17:01.923

我遇到了同样的问题，但使用关于异步方法的两个简单事实设法在效率和可维护性之间找到折衷：

*   不执行任何等待的异步方法是同步的；
*   仅等待同步方法的异步方法是同步的。

最好在示例中显示：

```
//Simple synchronous methods that starts third party component, waits for a second and gets result.
public ThirdPartyResult Execute(ThirdPartyOptions options)
{
    ThirdPartyComponent.Start(options);
    System.Threading.Thread.Sleep(1000);
    return ThirdPartyComponent.GetResult();
} 
```

为了提供此方法的可维护同步/异步版本，它已分为三层：

```
//Lower level - parts that work differently for sync/async version.
//When isAsync is false there are no await operators and method is running synchronously.
private static async Task Wait(bool isAsync, int milliseconds)
{
    if (isAsync)
    {
        await Task.Delay(milliseconds);
    }
    else
    {
        System.Threading.Thread.Sleep(milliseconds);
    }
}

//Middle level - the main algorithm.
//When isAsync is false the only awaited method is running synchronously,
//so the whole algorithm is running synchronously.
private async Task<ThirdPartyResult> Execute(bool isAsync, ThirdPartyOptions options)
{
    ThirdPartyComponent.Start(options);
    await Wait(isAsync, 1000);
    return ThirdPartyComponent.GetResult();
}

//Upper level - public synchronous API.
//Internal method runs synchronously and will be already finished when Result property is accessed.
public ThirdPartyResult ExecuteSync(ThirdPartyOptions options)
{
    return Execute(false, options).Result;
}

//Upper level - public asynchronous API.
public async Task<ThirdPartyResult> ExecuteAsync(ThirdPartyOptions options)
{
    return await Execute(true, options);
} 
```

这里的主要优点是最有可能更改的中间层算法只实现一次，因此开发人员不必维护两段几乎相同的代码。

# android - Android多视图切换，没有Activity的

> ID：14870479
> 
> 赞同：0
> 
> 时间：2013-02-14T08:17:50.093
> 
> 标签：android, multiple-views

我正在制作一个游戏，我正在制作一个具有 3 个不同视图（监狱、院子和沙子）的 LevelSelect 类，我曾经有多个意图，但如果我这样做，就没有好的方法来关闭我的应用程序，并且它不会很好地返回。

我也尝试使用该`setContentView()`方法，但事实证明它无法加载与视图相关的类，然后我尝试组合该类，但该类无法初始化当前视图之外的对象。所以我的问题是：如何在不启动新活动的情况下使用多个视图？

```
package com.muttgames.shadowpuzzle;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.LinearLayout;

public class LevelSelect extends Activity implements OnClickListener{

protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jail_level_view);

    //Defining Inflater
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    //Defining sandView layout
    RelativeLayout jailView =  (RelativeLayout) findViewById(R.id.jail_level);
    View innerViewsJailView = inflater.inflate(R.id.yard_level, jailView, true);

    View jailMenu = innerViewsJailView.findViewById(R.id.jail2menu);
    jailMenu.setOnClickListener(this);

    //Defining sandView layout
    RelativeLayout yardView =  (RelativeLayout) findViewById(R.id.yard_level);
    View innerViewsYardView = inflater.inflate(R.id.yard_level, yardView, true);

    View yardMenu = innerViewsYardView.findViewById(R.id.yard2menu);
    yardMenu.setOnClickListener(this);

    //Defining sandView layout
    RelativeLayout sandView =  (RelativeLayout) findViewById(R.id.sand_level);
    View innerViewsSandView = inflater.inflate(R.id.sand_level, sandView, true);

    View sandMenu = innerViewsSandView.findViewById(R.id.sand2menu);
    sandMenu.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    switch(v.getId()){
    case R.id.jail2menu:
        finish();
        break;
    case R.id.yard2menu:
        finish();
        break;
    case R.id.sand2menu:
        finish();
        break;
    }
}
} 
```

我确实意识到这是一个非常小的课程，但我会做一些小试，以防止自己不得不一次又一次地编写大量代码。

这部分的错误是我初始化了 yardMenu 和 sandMenu 按钮，而它们不在`R.layout.jail_level_view`xml 文件中。

这段代码是为了在有人想要返回时停止 levelselect 活动`main_activity`。

我怎么能改变它，而不是关闭活动，我可以将它更改为`activity_main`xml 文件。

xml 文件（它们看起来几乎都一​​样，颜色等方面的细微调整......：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/jail_level"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/app_bg"
android:orientation="vertical" >

<TextView
    android:id="@+id/view_title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="30dp"
    android:text="Jail Levels"
    android:textSize="30sp" />

<Button
    android:id="@+id/level1"
    style="@drawable/jail_button"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_below="@id/view_title"
    android:layout_marginLeft="45dp"
    android:layout_marginTop="30dp"
    android:background="@drawable/jail_button"
    android:text="1" />

<Button
    android:id="@+id/level2"
    style="@drawable/jail_button"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_below="@id/view_title"
    android:layout_marginLeft="40dp"
    android:layout_marginTop="30dp"
    android:layout_toRightOf="@id/level1"
    android:background="@drawable/jail_button"
    android:text="2" />

<Button
    android:id="@+id/level3"
    style="@drawable/jail_button"
    android:layout_width="50dp"
    android:layout_height="50dp"
    android:layout_below="@id/view_title"
    android:layout_marginLeft="40dp"
    android:layout_marginTop="30dp"
    android:layout_toRightOf="@id/level2"
    android:background="@drawable/jail_button"
    android:text="3" />

<Button
    style="@drawable/yard_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="30dp"
    android:layout_marginLeft="225dp"
    android:background="@drawable/yard_button"
    android:text="Next" />

<Button
    android:id="@+id/jail2menu"
    style="@drawable/menu_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="30dp"
    android:layout_marginLeft="122dp"
    android:background="@drawable/menu_button"
    android:text="Menu" />

</RelativeLayout> 
```

日志猫：

```
02-14 12:27:58.309: E/AndroidRuntime(8647): FATAL EXCEPTION: main

02-14 12:27:58.309: E/AndroidRuntime(8647): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.muttgames.shadowpuzzle/com.muttgames.shadowpuzzle.LevelSelect}: android.content.res.Resources$NotFoundException: Resource ID #0x7f08000d type #0x12 is not valid

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.ActivityThread.access$600(ActivityThread.java:141)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.os.Handler.dispatchMessage(Handler.java:99)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.os.Looper.loop(Looper.java:137)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.ActivityThread.main(ActivityThread.java:5039)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at java.lang.reflect.Method.invokeNative(Native Method)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at java.lang.reflect.Method.invoke(Method.java:511)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-14 12:27:58.309: E/AndroidRuntime(8647):     at dalvik.system.NativeStart.main(Native Method)

02-14 12:27:58.309: E/AndroidRuntime(8647): Caused by: android.content.res.Resources$NotFoundException: Resource ID #0x7f08000d type #0x12 is not valid

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:2144)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.content.res.Resources.getLayout(Resources.java:853)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.view.LayoutInflater.inflate(LayoutInflater.java:394)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at com.muttgames.shadowpuzzle.LevelSelect.onCreate(LevelSelect.java:25)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.Activity.performCreate(Activity.java:5104)
02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)

02-14 12:27:58.309: E/AndroidRuntime(8647):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)

02-14 12:27:58.309: E/AndroidRuntime(8647):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:28:24.747

你需要一个布局充气器和一个容器。制作例如“sandMenu”一个LinearLayout，然后在代码中：

```
sandMenu.removeAllViews();
LayoutInflater inflater = (LayoutInflater) .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View innerViewsSandMenu = inflater.inflate(R.layout.yourLAYOUT, sandMenu, true); 
```

稍后您可以通过这种方式访问​​ sandMenu 的内部视图：

```
innerViewsSandMenu.findViewById(R.id..... 
```

# android - 在eclipse中创建活动后无法解析活动名称

> ID：14870482
> 
> 赞同：1
> 
> 时间：2013-02-14T08:18:20.523
> 
> 标签：android

我刚刚在名为**Dlg**的 Eclipse 中向我的项目*（来自选项）*添加了一个活动，结果一个文件与. 还添加了活动，但是 eclipse 在文件旁边放置了一个小十字，并在**`Dlg.java``activity_dlg.xml``AndroidManifest.xml``Dlg.java``activity_dlg`**

 **```
setContentView(R.layout.activity_dlg); 
```

它指出`activity_dlg`无法解决或不是一个字段。为什么会突然出现这种情况。我不久前添加了活动，它们很好。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:28:24.573

类上的“无法解析或不是字段”错误`R`表明您所做的更改（添加布局 xml）未反映在生成的文件中。您可以使用菜单 Project -> Clean... 来清理项目以强制重新生成`R`类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:24:57.007

这可能意味着无论出于何种原因，自动生成的 R.java 文件都没有生成或不完整。

这通常意味着您的 xml 文件中有错误。

假设 activity_dlg.xml 确实存在，您可能在那里有错误。也许它引用了不存在的图像或字符串？

打开它并仔细检查，xml 阅读器并不总是会在错误下划线。

如果您找不到任何东西，您可以随时尝试清理您的项目或重新启动 Eclipse，但这可能无济于事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:35:34.063

我认为新添加的 activity_dlg.xml 与 R.java 文件中的 id 无关。通过转至 R.java 确认这一点。在此之下，您有以下内容：

```
 public static final class layout {
        public static final int activity_dlg=0x7f030000;//This is some id to your layout
    } 
```

如果这不存在，那么您可以右键单击 Eclipse 中的项目目录并刷新。或 Project->Clean 重新生成 R.java 文件。**

# xsd - Xjc 通过指定的包创建子文件夹

> ID：14870485
> 
> 赞同：0
> 
> 时间：2013-02-14T08:18:34.377
> 
> 标签：xsd, xjc

我正在尝试使用 xjc 生成 xsd 模式。问题是 xjc 通过 -p （包）标志创建子文件夹。

例子：

如果从 c: 运行 xjc 不正常，使用 -p abc 如下：

```
C:>xjc.exe -p a.b.c schema.xsd 
```

xjc 将创建 a,b,c 文件夹，生成的文件将位于 c:/a/b/c

即使错误地指定了 -d （目录）标志 像这样：

```
C:>xjc.exe -p a.b.c -d c:/files schema.xsd 
```

这些文件将位于 c:/files/a/b/c

如何让 xjc 不创建此文件夹？

如果我执行：

```
C:>xjc.exe -p a.b.c -d c:/files schema.xsd 
```

这些文件将位于 c:/files 中，带有 package `a.b.c`。

# apache - 如何在htaccess中强制www？

> ID：14870488
> 
> 赞同：1
> 
> 时间：2013-02-14T08:18:48.700
> 
> 标签：apache, .htaccess, mod-rewrite, codeigniter-2

我需要为我的网站强制使用 www，我的网站是使用 codeigniter 框架构建的。

这是我的 htaccess

```
RewriteEngine on
RewriteCond $1 !^(index\.php|css|images|js|plugins|Scripts|pirobox|applications-assets|user-assets|robots\.txt)
RewriteCond %{HTTP_HOST} !^www\.(.*)
RewriteRule (.*) http://www.%{HTTP_HOST}/$1 [R=301,L]
RewriteRule ^(.*)$ /index.php?/administrator/$1 [L] 
```

但它不起作用你能告诉我这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T15:08:21.480

尝试类似的东西

```
RewriteEngine On                          
#This rewrites your host name to include www
RewriteCond %{HTTP_HOST} !^www\.domain\.com [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,NC,L]
RewriteCond %{REQUEST_FILENAME} !-f  
RewriteCond %{REQUEST_FILENAME} !-d  
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# php - Windows Prompt 通过 COM 端口读取和发送文本

> ID：14870490
> 
> 赞同：1
> 
> 时间：2013-02-14T08:18:56.803
> 
> 标签：php, serial-port, command-prompt, hyperterminal

我需要一个程序来通过 COM 端口发送和接收一些文本。我想通过 exec 命令（命令行）启动它。我试图查看是否可以通过命令行使用 Hyperterminal 或 putty，但我找不到解决方案。

这将是通过 PHP 网络服务器发送和接收文本的一种解决方法，我将使用 php exec 函数来运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T21:46:04.347

我在我的博客上发布了两个名为 SerialSend 和 ComPrinter 的小型命令行应用程序，它们通过串行端口发送和接收文本。我不确定他们是否会完全满足您的需求，因为一个只发送而另一个只接收，但也许您可以让他们做您想做的事。它们是完全免费的，您可以下载二进制文件或源代码（它们真的很容易编译），而且它们都非常易于使用。

以下是链接：

*   [串行发送网页](http://batchloaf.wordpress.com/serialsend/)
*   [ComPrinter 网页](http://batchloaf.wordpress.com/comprinter/)

# sql - 使用 SQL 更新 MS_Access 中的表

> ID：14870495
> 
> 赞同：1
> 
> 时间：2013-02-14T08:19:14.183
> 
> 标签：sql, ms-access, ms-access-2007

我有几个数据库，我需要在一些值前面插入一个字符串值。我有以下代码：

```
UPDATE DB_AlarmTest SET DB_AlarmTest.Address = "DB40," & [Address]
WHERE DB_AlarmTest.Address 
NOT LIKE '%DB40%'; 
```

我不希望我的地址像这样出现：“DB40,DB40,DB40,2.0”如果我多次执行查询，所以我添加了“NOT LIKE '%DB40%'”部分

有人可以告诉我为什么这不起作用吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:52:52.723

With the usual ANSI options in MS Access, the wildcard is *, not %, so:

```
UPDATE DB_AlarmTest 
SET DB_AlarmTest.Address = "DB40," & [Address]
WHERE DB_AlarmTest.Address Not Like "*DB40*" 
```

# android - Android，甜甜圈形状的法力条

> ID：14870508
> 
> 赞同：-3
> 
> 时间：2013-02-14T08:20:37.267
> 
> 标签：android, graphics

我想做一个甜甜圈形状的法力条。随着时间的流逝，法力在增加，它会按顺时针方向填满甜甜圈，当我施放东西时，它会回落。

我有两个小问题。我不知道如何画一个甜甜圈形状，我不知道我怎么能把它填满。

所以我想请求你们的帮助，

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:37:11.840

查看环的形状：

[http://idunnolol.com/android/drawables.html#shape](http://idunnolol.com/android/drawables.html#shape)

您可以绘制部分弧线。如果您想要多种颜色，请尝试在下方绘制一个完整的环（可能是空的），然后在顶部更改当前状态。

# c# - 大量数据插入表中

> ID：14870512
> 
> 赞同：0
> 
> 时间：2013-02-14T08:20:52.580
> 
> 标签：c#, sql-server

我必须将数据从数据表传输到数据库。总记录约为每次 15k。我想减少数据插入的时间。我应该使用***SqlBulk***吗？还是别的什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:46:03.047

如果您只追求速度，那么批量复制可能适合您。根据要求，您还可以降低日志记录级别。

[http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/edf280b9-2b27-48bb-a2ff-cab4b563dcb8/](http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/edf280b9-2b27-48bb-a2ff-cab4b563dcb8/)

[SQL Server如何将一个巨大的表数据复制到另一个表中](https://stackoverflow.com/questions/5296106/copying-a-huge-table-data-into-another-table-in-sql-server)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:10:00.193

SQL 批量复制在这种样本大小下无疑是最快的，因为它流式传输数据，而不是实际使用常规 sql 命令。这使它的启动时间稍长，但一次有超过 120 行（根据我的测试）

如果您想了解有关 sql 大容量复制如何与其他一些方法叠加的统计信息，请查看我的帖子，了解如何到达此处。

[http://blog.staticvoid.co.nz/2012/8/17/mssql_and_large_insert_statements](http://blog.staticvoid.co.nz/2012/8/17/mssql_and_large_insert_statements)

![在此处输入图像描述](../Images/99c508e1459ffe64ef639b0460f03b10.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:13:34.483

15k 条记录实际上并没有那么多。我有一台配备 i5 CPU 和 4GB 内存的笔记本电脑，它可以在几秒钟内插入 15k 条记录。我真的不会花太多时间来寻找理想的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T08:41:02.050

如果你使用`C#`看看[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类。CodeProject上有一篇[很好的文章](http://www.codeproject.com/Articles/16922/SQL-Bulk-Copy-with-C-Net)关于如何使用它`DataTable`

# python - TaggedCorpusReader 如何编码？默认参数处理

> ID：14870513
> 
> 赞同：0
> 
> 时间：2013-02-14T08:20:56.840
> 
> 标签：python, nltk

我正在使用 Python 的 NLTK 中的 TaggedCorpusReader。我想读取一个 utf8 编码的文件。为此，我想将默认编码“无”（关于文档）设置为“utf8”。因此，我需要交出到达编码参数的默认参数。

```
__init__(self, root, fileids, sep='/', 
        word_tokenizer=WhitespaceTokenizer(pattern='\\s+',
                   gaps=True, discard_empty=T..., 
        sent_tokenizer=RegexpTokenizer(pattern='\n', 
        gaps=True, discard_empty=True, f..., 
        para_block_reader=<function read_blankline_block at 0x132be70>, 
        encoding=None, tag_mapping_function=None) 
```

这是来自[googlecode](http://www.nltk.org/_modules/nltk/corpus/reader/tagged.html#TaggedCorpusReader)的定义。

我现在所做的，我这样调用构造函数：

```
TaggedCorpusReader('.' ,  filelist, '/', 
        WhitespaceTokenizer(u'\s+', True, True, 56), 
        RegexpTokenizer('n', True, True, 56), 
        <function read_blankline_block at 0x5b731b8>, 
        'utf8', None) 
```

然后我得到这个错误

```
Traceback (most recent call last):
  File "nlpenhg.py", line 2, in <module>
    from BonnerCorpus import *
  File "path/code/BonnerCorpus.py", line 27
    self.corpus = TaggedCorpusReader('.' ,  filelist, '/', WhitespaceTokenizer(u'\s+', True, True, 56), RegexpTokenizer('n', True, True, 56), <function read_blankline_block at 0x5b731b8>, 'utf8', None) 
```

我猜这个错误来自这个`<function ...`声明。这是错误的原因吗？那是怎样的一种表达方式？谷歌很难`<`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:51:10.197

这：

```
<function read_blankline_block at 0x5b731b8> 
```

不是表达式，它只是 python 如何将函数表示为字符串*：*

```
>>> def my_function(): pass
... 
>>> my_function
<function my_function at 0x12c05f0> 
```

所以，既然你不想使用不同的功能，那就别管它了。

`TaggedCorpusReader`您可以使用关键字参数以这种方式实例化：

```
TaggedCorpusReader('.' ,  filelist, '/', 
        WhitespaceTokenizer(ur'\s+', True, True, 56), 
        RegexpTokenizer('n', True, True, 56), 
        encoding='utf8') 
```

如果您想将函数作为参数传递，只需使用标识符：

```
TaggedCorpusReader('.' ,  filelist, '/', 
        WhitespaceTokenizer(u'\s+', True, True, 56), 
        RegexpTokenizer('n', True, True, 56), 
        some_function_name, 
        'utf8', None) 
```

# node.js - 从 Node.js 后端向 iPhone 前端发送 JSON 错误：“错误：发送后无法设置标头。”

> ID：14870515
> 
> 赞同：0
> 
> 时间：2013-02-14T08:21:10.790
> 
> 标签：node.js, mongodb, express, mongoose

我是 Node.js 的新手。我将它用作 iPhone 客户端的服务器后端。我正在使用 JSON 调用 POST：{firstname: "bob", email : bob@someemail.com}

node.js 代码如下所示（使用 Express 和 Mongoose）：

```
var User = new Schema({
    firstname   : { type: String, required: true}
    , email     : { type: String, required: true, unique : true}

});
var User = mongoose.model('User', User); 
```

对于 POST，

```
app.post('/new/user', function(req, res){

    // make a variable for the userData
    var userData = {
        firstname: req.body.firstname,
        email: req.body.email
    };

    var user = new User(userData);

    //try to save the user data
    user.save(function(err) {
        if (err) {
            // if an error occurs, show it in console and send it back to the iPhone
            console.log(err);
            res.json(err);
        }
        else{
            console.log('New user created');
        }
    });

    res.end();
}); 
```

现在，我正在尝试使用相同的电子邮件创建重复用户。由于我对电子邮件的“独特”约束，我希望这会引发错误——确实如此。

但是，node.js 进程以“错误：发送后无法设置标头”而终止。

我希望能够在诸如此类的情况下将消息发送回 iPhone 客户端。例如，在上面，我希望能够将 JSON 发送回 iphone，说明新用户创建的结果（成功或失败）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:39:49.457

这是因为您的代码的异步性质。在你`res.end()`的回调函数之前运行`user.save`应该把`res.end()`回调放在里面（最后）。

这边走：

```
 user.save(function(err) {
    if (err) {
        // if an error occurs, show it in console and send it back to the iPhone
        console.log(err);
        return res.json(err);
    }
    console.log('New user created');
    res.end();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T08:41:42.050

使用适当的 http 状态发送错误，您有很多 4xx 可以做到这一点。

```
 res.json(420, err); 
```

这样，您只需解析 http fetch 中的消息，使用 jquery 它会给出如下内容：

```
jQuery.ajax({
  ...
  error: function (xhr, ajaxOptions, thrownError) {
    if(xhr.status == 420) {
      JSON.parse(xhr.responseText);
    }
  } 
```

# awk - 基于一些共同领域合并2个文件的内容

> ID：14870521
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:22:03.253
> 
> 标签：awk

**文件 1**

```
a,b, c, d,session-111, e, f
p,f, y, j,session-222, e, o
p,e, c, j,session-333, e, r
t,y, u, j,session-444, r, r
t,y, u, j,session-555, e, w
e,g, m, j,session-555, e, m
e,e, m, j,session-555, e, m 
```

**文件 2**

```
session-111, data-123, 123, erwt
session-222, data-234, 345, fghjf
session-333, data-345, 456, aasdf
session-555, data-567, 789, aasdf
session-555, data-890, 121, aasdf
session-666, data-678, 121, aasdf 
```

**输出**

```
a,b, c, d,session-111, e, f, data-123, 123
p,f, y, j,session-222, e, o, data-234, 345
p,e, c, j,session-333, e, r, data-345, 456
t,y, u, j,session-444, e, r, NODATA
t,y, u, j,session-555, e, r, date-567, 789
t,y, u, j,session-555, e, r, date-890, 121
e,e, m, j,session-555, e, m, NODATA 
```

应打印来自 file1 的所有数据 - 无论是否在 file2 中找到引用，如果在文件 2 中找到引用，则特定字段（字段 2 和 3）将在输出文件中连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:36:41.647

如果我理解正确，您希望将 file1 中的字段 5 和 1 分别依次匹配到 file2，如果不匹配，则应使用“NODATA”字段。以下内容接近您想要的，我认为您列出的输出有一些错误，请参阅 sudo_O 的评论：

*解析.awk*

```
BEGIN { FS = OFS = "," }
FNR == NR { 
  lines[$1][++count[$1]] = $2 FS $3
  next
} 

count[$5] == 0 { print $0, " NODATA" } 
count[$5]  > 0 {
  count[$5]--
  print $0, lines[$5][++prn[$5]]
} 
```

像这样运行它：

```
awk -f parse.awk file2 file1 
```

输出：

```
a,b, c, d,session-111, e, f, data-123, 123
p,f, y, j,session-222, e, o, data-234, 345
p,e, c, j,session-333, e, r, data-345, 456
t,y, u, j,session-444, r, r, NODATA
t,y, u, j,session-555, e, w, data-567, 789
e,g, m, j,session-555, e, m, data-890, 121
e,e, m, j,session-555, e, m, NODATA 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:25:25.430

试试这个单行：

```
awk -F, 'NR==FNR{k[$1]=$2 OFS $3;next} {if($5 in k)print $0,k[$5];else print $0," NODATA"}'  OFS="," file2 file1
a,b, c, d,session-111, e, f, data-123, 123
p,f, y, j,session-222, e, o, data-234, 345
p,e, c, j,session-333, e, r, data-345, 456
t,y, u, j,session-444, r, r, NODATA
t,y, u, j,session-555, e, w, data-890, 121
e,g, m, j,session-555, e, m, data-890, 121
e,e, m, j,session-555, e, m, data-890, 121 
```

# wordpress - wordpress 发布第一张图片

> ID：14870528
> 
> 赞同：0
> 
> 时间：2013-02-14T08:22:15.273
> 
> 标签：wordpress, filter

我将如何在 WordPress 中过滤我的帖子或第一张图片，然后再显示添加到主题的 CSS 类。我看到我可以在我的functions.php 中使用API​​ 中的add_filter() 函数，但是我在获取每个帖子的第一张图片时遇到了问题。

```
<a href="http://localhost/wordpress/wp-content/uploads/2012/10/test.jpg">
<img class="alignnone size-full wp-image-95" width="540" height="300" alt="dell-vs-apple" src="http://localhost/wordpress/wp-content/uploads/2012/10/dell-vs-apple1.jpg">
</a>

<div class = "my_class">
<a href="http://localhost/wordpress/wp-content/uploads/2012/10/dell-vs-apple1.jpg">
<img class="alignnone size-full wp-image-95" width="540" height="300" alt="dell-vs-apple" src="http://localhost/wordpress/wp-content/uploads/2012/10/dell-vs-apple1.jpg">
</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:11:14.173

这是从帖子中获取第一张图片的一种方法..

```
 // Get URL of first image in a post
    function o99_find_first_post_image() {
        global $post, $posts;
        $first_img = '';
        ob_start();
        ob_end_clean();
        $output = preg_match_all('/<img.+src=[\'"]([^\'"]+)[\'"].*>/i', $post->post_content, $matches);
        $first_img = $matches [1] [0];

        // if no image found we can choose to display some default image instead
        if(empty($first_img)){
            $first_img = "/images/default.jpg";// path to default image
        }
        return $first_img;
    } 
```

# php - 如何将 for 循环存储在变量中？

> ID：14870529
> 
> 赞同：0
> 
> 时间：2013-02-14T08:22:30.947
> 
> 标签：php, variables, for-loop

如何将其存储在`$_var`变量中？

```
$s_number = 5;
$spn      = '6';

echo "'Landscapes':[";
for ($i = 1; $i <= $s_number; $i++)
{
    echo "'".$spn."/"."content"."/".$i.".png"."'".", ";
}
echo "]"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:25:46.660

问题有点模糊，尽管您似乎正在寻找这个，

```
 $string = "'Landscapes':[";
 for ($i = 1; $i <= $s_number; $i++) {
     $string .= "'".$spn."/"."content"."/".$i.".png"."'".", ";
 } 
 $string .= "]";
 echo $string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:30:03.770

其他使用字符串的建议很好，但我更喜欢为这样的任务创建数组：

```
$s_number = 5;
$spn = '6';
$landscapes_array = array();
for ($i = 1; $i <= $s_number; $i++) {
    $landscapes_array[] = "'".$spn."/"."content"."/".$i.".png"."'".", ";
}
$landscapes = "'Landscapes':[" . implode('', $landscapes_array) . "]"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T10:30:34.230

您还可以尝试将 for 循环放在传递变量的函数中，然后将值返回给新变量。这就像在变量中保存一个循环。

# dotnetnuke - 将 DNN 4.0 数据库数据导出到 dnn07.02

> ID：14870530
> 
> 赞同：0
> 
> 时间：2013-02-14T08:22:31.787
> 
> 标签：dotnetnuke

我有一个用 dnn 4.0 开发的网站。我想将此站点的所有数据导出到全新安装的站点（dnn 7.0.2）。我们该怎么做..请给出一个想法或任何工具，模块。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T17:01:33.330

您不会找到可以为您执行此操作的工具。在我看来，你有两个选择。

1) 将 4.0 站点升级到 7.0（这是我推荐的选项） 您只能在对站点和数据库进行完整备份后执行此操作，并且应先在测试环境中执行此操作。2) 手动将所有页面和内容从 4.0 站点迁移到新的 7.0 站点。

# android - 在 SurfaceView 上渲染位图会影响性能

> ID：14870535
> 
> 赞同：0
> 
> 时间：2013-02-14T08:23:02.070
> 
> 标签：android, bitmap, render, android-canvas, surfaceview

我有一个扩展 SurfaceView（Android 应用程序 API 级别 8）的活动。需要将位图绘制到背景而不是简单的颜色。我能够在画布上绘制位图 --> 使用 void 渲染（画布画布）中的注释代码，但它导致性能太低。

如果我们使用位图，渲染会变得很慢，但是如果我们只绘制颜色，那么一切都很好。

代码有问题吗？我们如何在不影响性能的情况下设置背景图像？

```
public class MainGamePanel extends SurfaceView implements
        SurfaceHolder.Callback {
public void render(Canvas canvas) {

        canvas.drawColor(Color.WHITE);
        /*
        Rect dest = new Rect(0, 0, getWidth(), getHeight());
        Paint paint = new Paint();
        paint.setFilterBitmap(true);

        Bitmap myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.background_play);
        canvas.drawBitmap(myBitmap, null, dest, paint);
        */
        droid.draw(canvas);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:32:19.733

也许您应该将您的位图创建为一个字段并在您的渲染方法（）之外对其进行解码，例如：

```
public class MainGamePanel extends SurfaceView implements
    SurfaceHolder.Callback {

    private Bitmap myBitmap; //creating a field

    public MainGamePanel() {

        myBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.background_play); //decode bitmap in constructor

    }

    public void render(Canvas canvas) {

    canvas.drawColor(Color.WHITE);

    Rect dest = new Rect(0, 0, getWidth(), getHeight());
    Paint paint = new Paint();
    paint.setFilterBitmap(true);

    canvas.drawBitmap(myBitmap, null, dest, paint); //draw your bitmap

    droid.draw(canvas);
    }
} 
```

# c++ - Rcpp中的元素矩阵乘法

> ID：14870537
> 
> 赞同：2
> 
> 时间：2013-02-14T08:23:06.897
> 
> 标签：c++, r, rcpp

我正在尝试使用长度为 L (psi) 的向量和维度矩阵 (L,L) 并执行一些元素操作的代码来加速一些`R`代码。`Rcpp`有没有更有效的方法来使用 Rcpp 进行这些元素操作？

r：

```
 UpdateLambda <- function(psi,phi){
                                      # updated full-day infection probabilites
    psi.times.phi <- apply(phi,1,function(x) x*psi)
    ## return Lambda_{i,j} = 1 - \prod_{j} (1 - \psi_{i,j,t} \phi_{i,j})
    apply(psi.times.phi,2,function(x) 1-prod(1-x))
  } 
```

cp:

```
#include <Rcpp.h>
#include <algorithm>
using namespace Rcpp;

// [[Rcpp::export]]
NumericVector UpdateLambdaC(NumericVector psi,
                NumericMatrix phi
                ){

  int n = psi.size();
  NumericMatrix psi_times_phi(n,n);
  NumericVector tmp(n,1.0);
  NumericVector lambda(n);

  for(int i=0; i<n;i++){
    psi_times_phi(i,_) = psi*phi(i,_);
   }

  for(int i=0; i<n;i++){
     // \pi_{j} (1- \lambda_{i,j,t})
    for(int j=0; j<n;j++){
      tmp[i] *= 1-psi_times_phi(i,j);
    }
     lambda[i] = 1-tmp[i];
  }

  return lambda;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T14:11:36.523

您可以`apply`用矢量化替代品替换您的循环。

第一个相当于：

```
t(phi)*psi 
```

第二个：

```
1-exp(colSums(log(1-psi.times.phi)))

#test data
phi <- matrix(runif(1e6),1e3)
psi <- runif(1e3)

#new function
UpdateLambda2 <- function(psi,phi) 1-exp(colSums(log(1-t(phi)*psi)))

#sanity check
identical(UpdateLambda(psi,phi),UpdateLambda2(psi,phi))
[1] TRUE

#timings
library(rbenchmark)
benchmark(UpdateLambda(psi,phi),UpdateLambda2(psi,phi))
                     test replications elapsed relative user.self sys.self
1  UpdateLambda(psi, phi)          100   16.05    1.041     15.06     0.93
2 UpdateLambda2(psi, phi)          100   15.42    1.000     14.19     1.19 
```

好吧，看起来它并没有太大的区别，这非常令人惊讶，因为`colSums`它通常比`apply`. 我不确定我使用的测试数据是否相关，因为输出是 all`1`的第二部分中小于 1 的乘法数。如果您想注意这些小数字的细节，无论如何您最好使用对数刻度。

# php - 相当于 php 或 mysql 中的 java "Color.decode"

> ID：14870548
> 
> 赞同：0
> 
> 时间：2013-02-14T08:24:03.737
> 
> 标签：php, mysql

我有一个mysql数据库，其中有一个来自java的名为“color”的字符串字段，我保留了这个值：

```
// (2=color field)
pst.setString (2, objeto.getBackground (). getRGB ()) 
```

然后我这样读：

```
objeto.setBackground (Color.decode (rs.getString ("color"))) 
```

mysql或php中有什么函数可以读取颜色吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:42:59.717

你到底想要什么？

将 int 转换为 #RRGGBB 格式的颜色？

```
sprintf('#%06X', $color); 
```

或获取 R、G、B 值？

```
$r = ($color >> 16) & 0xFF;
$g = ($color >> 8) & 0xFF;
$b = ($color >> 0) & 0xFF; 
```

或从 rgb 值创建一个 int

```
$color = ($r & 0xFF) << 16 | ($g & 0xFF) << 8 | $b & 0xFF 
```

# c# - C# 从字符串中获取具有特定模式的子字符串

> ID：14870551
> 
> 赞同：7
> 
> 时间：2013-02-14T08:24:07.737
> 
> 标签：c#, .net, string, list, substring

我有一个这样的字符串列表：

```
List<string> list = new List<string>();
list.Add("Item 1: #item1#");
list.Add("Item 2: #item2#");
list.Add("Item 3: #item3#"); 
```

如何获取子字符串 #item1#、#item2# 等并将其添加到新列表中？

如果它包含“#”，我只能通过执行以下操作获得完整的字符串：

```
foreach (var item in list)
{
    if(item.Contains("#"))
    {
        //Add item to new list
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-14T08:29:50.333

你可以看看[`Regex.Match`](http://msdn.microsoft.com/en-us/library/0z2heewz.aspx)。如果您对正则表达式有所了解（在您的情况下，这将是一个非常简单的模式：） ，您可以使用它来提取所有以任意数量的其他字符`"#[^#]+#"`开头和结尾的项目，而不是介于两者之间。`'#'``'#'`

例子：

```
Match match = Regex.Match("Item 3: #item3#", "#[^#]+#");
if (match.Success) {
    Console.WriteLine(match.Captures[0].Value); // Will output "#item3#"
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T08:46:10.173

这是在 LINQ 中使用正则表达式的另一种方法。（不确定您的确切要求是否引用了正则表达式，所以现在您可能遇到两个问题。）

```
var list = new List<string> ()
{
    "Item 1: #item1#",
    "Item 2: #item2#",
    "Item 3: #item3#",
    "Item 4: #item4#",
    "Item 5: #item5#",
};

var pattern = @"#[A-za-z0-9]*#";

list.Select (x => Regex.Match (x, pattern))
    .Where (x => x.Success)
    .Select (x => x.Value)
    .ToList ()
    .ForEach (Console.WriteLine); 
```

输出：

> #项目1#
> 
> #项目2#
> 
> #项目3#
> 
> #项目4#
> 
> #项目5#

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T08:32:56.113

LINQ 可以很好地完成这项工作：

```
var newList = list.Select(s => '#' + s.Split('#')[1] + '#').ToList(); 
```

或者，如果您更喜欢查询表达式：

```
var newList = (from s in list
               select '#' + s.Split('#')[1] + '#').ToList(); 
```

或者，您可以按照 Botz3000 的建议使用正则表达式，并将它们与 LINQ 结合使用：

```
var newList = new List(
    from match in list.Select(s => Regex.Match(s, "#[^#]+#"))
    where match.Success
    select match.Captures[0].Value
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T08:33:57.693

该代码将解决您的问题。但如果字符串**不包含** `#item#`，则将使用原始字符串。

```
var inputList = new List<string>
    {
        "Item 1: #item1#",
        "Item 2: #item2#",
        "Item 3: #item3#",
        "Item 4: item4"
    };

var outputList = inputList
    .Select(item =>
        {
            int startPos = item.IndexOf('#');
            if (startPos < 0)
                return item;

            int endPos = item.IndexOf('#', startPos + 1);
            if (endPos < 0)
                return item;
            return item.Substring(startPos, endPos - startPos + 1);
        })
    .ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:30:17.960

这个怎么样：

```
List<string> substring_list = new List<string>();
foreach (string item in list)
{
    int first = item.IndexOf("#");
    int second = item.IndexOf("#", first);
    substring_list.Add(item.Substring(first, second - first);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-14T08:30:47.080

你可以通过简单地使用来做到这一点：

```
 List<string> list2 = new List<string>();
    list.ForEach(x => list2.Add(x.Substring(x.IndexOf("#"), x.Length - x.IndexOf("#")))); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-14T08:31:47.130

试试这个。

```
var itemList = new List<string>();
foreach(var text in list){
string item = text.Split(':')[1];
itemList.Add(item);

} 
```

# python - 使用基于 MySQL 数据库的 Flask 更新网页。

> ID：14870553
> 
> 赞同：3
> 
> 时间：2013-02-14T08:24:33.027
> 
> 标签：python, mysql, client-server, flask, webpage

我有一个网页（使用 HTML 和 jQuery 构建），它显示来自 MySQL 数据库的数据。我正在使用 Flask 将 HTML 与我的数据库连接起来。但是，我的数据库每 15 分钟更新一次（使用单独的 Python 脚本）。目前，我停止烧瓶服务器，更新数据库并重新启动烧瓶以更新网页。我的问题如下：

有没有办法在后台更新 MySQL 数据库而无需停止烧瓶服务器？我阅读了有关 AJAX 和 CRON 的概念，但是我无法理解如何将它们与烧瓶异步使用。

注意：我是 Web 应用程序的新手，这是我第一个涉及连接客户端和服务器端的项目。任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-15T02:34:17.303

你最有可能做这样的事情：

```
from flask import Flask, render_template
from yourMySqlLibrary import connect_to_mysql

conn = connect_to_mysql()
# This is only executed when you start the script
data = conn.execute("SELECT * FROM MySemiRegularlyUpdatedTable")

app = Flask(__name__)

@app.route("/")
def view_data():
    return render_template("view_data.html", data=data)

if __name__ == "__main__":
    app.run() 
```

如果是这种情况，那么您的解决方案就是将您的连接和查询调用移动*到*您的控制器中，以便每次点击页面时都重新查询数据库：

```
@app.route("/")
def view_data():
    # Removed from above and placed here
    # The connection is made to the database for each request
    conn = connect_to_mysql()
    # This is only executed on every request
    data = conn.execute("SELECT * FROM MySemiRegularlyUpdatedTable")
    return render_template("view_data.html", data=data) 
```

这样，您的视图将在您的数据更新时更新 - 您无需重新启动服务器即可获取对数据的更改。

# ruby-on-rails - 使用 ActiveRecords 和 Rails 获取大量记录的最快方法（find_each 很慢）

> ID：14870557
> 
> 赞同：2
> 
> 时间：2013-02-14T08:24:55.193
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rails-activerecord

我有一个包含超过 50 万条记录的表，我现在正在以这种方式获取数据：

```
 Account.find_each(:conditions =>{:status =>STATUS[:waiting]}) do |user|    
    unless user.games.include? game
      begin
        user.account_games.create!(:game_id => game.id,:status  => STATUS[:waiting])
        user.activate            
      rescue Exception => e
        $LOG.error "Error : #{e.to_s}"
      end          
    end
  end 
```

现在我不确定我在这里做错了什么，但可以肯定的是，这很慢，我不知道是 find_each 还是其他任何东西，但如果你能给我任何提示，我将不胜感激使这更快。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:32:05.230

发生了两件事：

首先是选择查询-

```
 @account = Account.where(:status =>STATUS[:waiting]) 
```

其次是在每个上创建-

```
@account.each do |user|

 unless user.games.include? game
      begin
        user.account_games.create!(:game_id => game.id,:status  => STATUS[:waiting])
        user.activate            
      rescue Exception => e
        $LOG.error "Error : #{e.to_s}"
      end          
    end  
  end 
```

更新：

有一个著名的[Rails 性能提示：Query Optimization](http://tenmiles.com/blog/2011/07/rails-performance-tip-query-optimization/) by `Anand`.

还要检查[QueryReviewer gem](https://github.com/nesquena/query_reviewer)。

除此之外，还有许多因素可以提高性能，例如[Active Record Query Interface Optimization](http://rails-bestpractices.com/posts/80-active-record-query-interface-optimization)中的一些因素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T11:59:18.123

对您的模型使用 find_by_sql 子句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T12:57:11.567

我想到了2个选项：

1) 在 Active Record 中全选然后使用 ruby​​ 进行迭代，将需要大量内存。

2）用sql编写查询并将其放入存储过程并调用该过程。

# html - 两个水平对齐、垂直居中的 div

> ID：14870560
> 
> 赞同：1
> 
> 时间：2013-02-14T08:25:10.777
> 
> 标签：html, css

我有一个让我发疯的问题。

我有一个包装器`div`，其中包含一个带有一些文本的 div 和一个图像。图像和 div 的大小各不相同。包装器 div 调整为较大的尺寸。

它们都应该垂直对齐，如下所示：

![在此处输入图像描述](../Images/c35b50b2bb85a535f761c9c16a44516e.png)

我遇到了这篇文章：
[http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

正如您在这里的小提琴中看到的那样：http:
[//jsfiddle.net/nBXNg/4/](http://jsfiddle.net/nBXNg/4/)
它没有按预期工作

如果有人能帮我解决这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:37:50.350

您所要做的就是将每个内容包装到`.container`div 中。[更新了 jsfiddle](http://jsfiddle.net/nBXNg/6/)

# php - Checking Key in multiple dimensional array

> ID：14870563
> 
> 赞同：0
> 
> 时间：2013-02-14T08:25:18.857
> 
> 标签：php, arrays, key, key-value

M having multidimensional array and i want to check the key `"Apple"` if exist in it , if it is exist then i wan to get the `Price` of that Apple.

I have tried [Array_key_exists()](http://php.net/manual/en/function.array-key-exists.php) function , but it is applicable to only one dimensional array,

```
array(1) {
    [0]=>
        array(1) {
            ["Apple"]=>
                array(2) {
                    ["Color"]=>"Red"
                    ["Price"]=>int(50)
                }
            }
} 
```

How can I get the price of the Apple if it exist in array?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T08:30:50.330

Use a recursive function to achive this

```
function getPrice($array, $name) {
    if (isset($array[$name])) {
        return $array[$name]["Price"];
    }

    foreach ($array as $value) {
        if (is_array($value)) {
            $price = getPrice($value, $name);
            if ($price) {
                return $price;
            }
        }
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:33:50.880

Just iterate (in a recursive way) over all yours array(s) and check for each if `array_key_exists()` or (maybe better) `isset()`

Just like

```
function myFinder($bigArray)
{
 $result = false;
 if(array_key_exist($key,$bigArray)) return $bigArray[$key];
 foreach($bigArray as $subArray)
 {
  if(is_array($subArray)
  {
   $result = $result or myFinder($subArray);
  }
 }
 return $result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:31:28.363

Use foreach to loop over the array.

```
foreach ($array AS $fruit) {
    if(isset($fruit['Apple'])) {
        echo $fruit['Apple']['Price'];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T08:36:40.113

```
$rows=array(
         array(
               'Apple'=>array('Color'=>'Red', 'Price'=>50)
              )
        );

function get_price($rows, $name)
{
   foreach($rows as $row) {
     if(isset($row[$name])) return $row[$name]['Price'];
   }
   return NULL;
}

echo get_price($rows, 'Apple'); 
```

# asp.net - 如何在点击超链接时调用cs函数

> ID：14870564
> 
> 赞同：1
> 
> 时间：2013-02-14T08:25:21.403
> 
> 标签：asp.net

在gridview 的rowbound 事件内的cs 文件中，我创建了一个超链接。

`Hyperlink hy = new Hyperlink()`

如果特定条件为真，我已将超链接添加到网格中的一列，例如

`e.Row.cell[2].Controls.add(hy)`

它工作正常。我想从`onclick`超链接事件而不是 javascript 中调用 cs 文件函数。

```
hy.Attributes.Add("onclick","return display()") 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:32:37.543

我假设“CS”是指“C#”而不是“JS”。

您将客户端脚本与服务器端操作混淆了。

看起来您正在使用 WebForms - 这对初学者来说并不是最友好的，因为它人为地将无状态 Web 与带有事件和控件的“表单”混为一谈。

ASP.NET 服务器代码在响应传入的 HTTP 请求（通常是 GET 或 POST）时执行。例如，GET 请求通常来自超链接或用户输入地址；而 POST 总是来自`<form>`提交。

您需要设置您的项目，以便您的 C# 代码将被调用以响应某个请求 - 在 WebForms 中这并不容易，因为默认情况下请求被映射到`*.aspx`文件。您要做的最简单的事情是实现`IHttpHandler`，即直接调用您的代码来处理传入请求。

我建议您阅读这篇文章，它应该可以帮助您自己解决问题：http: [//www.codeproject.com/Articles/335968/Implementing-HTTPHandler-and-HTTPModule-in-ASP-NET](http://www.codeproject.com/Articles/335968/Implementing-HTTPHandler-and-HTTPModule-in-ASP-NET)

我还建议避免使用 WebForms 并直接转向 ASP.NET MVC。

# javascript - 获取 Google 购物中最畅销的产品

> ID：14870565
> 
> 赞同：0
> 
> 时间：2013-02-14T08:25:23.307
> 
> 标签：javascript, google-shopping-api

[我一直在到处寻找，只是为了在Google 购物](http://www.google.com/shopping)中获得最畅销的产品。我知道在他们的[主页](http://www.google.com/shopping)上有“本周流行”这个部分，我真的很想通过他们的 API 获得那个部分，但在进行研究时我没有找到。

有没有办法通过 API 获得本周在 Google 购物中的畅销产品或热门产品？

我也在考虑抓取他们主页的 HTML，但这似乎是不可能的，因为他们的主页内容是通过 Ajax 加载的。

对你的帮助表示感谢！

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T02:50:56.070

研究使用无头浏览器 PhantomJS。然后，您可以在加载页面后轻松进行 DOM 操作。

# html - Chrome - 保持最小列宽

> ID：14870566
> 
> 赞同：0
> 
> 时间：2013-02-14T08:25:24.523
> 
> 标签：html, css, google-chrome, html-table

我有一个具有“有限宽度”和“宽”列的表格。预期的行为是在调整表格大小时，有限宽度的列变得尽可能小，而宽列适合可用空间。

```
<!DOCTYPE html>
<style>
.limited {width:0;overflow:hidden;}
.wide {overflow:hidden;}
.limited div, .wide div {max-width:10em;white-space:nowrap;}
table {width:100%;}
</style>
<table id="example" border="1">
    <thead>
        <tr>
            <td class="limited"><div>veeeeeeee eeeeeeee eeeeee eeeeeeeeery</div></td>
            <td class="wide"><div>looooooooo ooooooooooo oooooooooooooooooo ooooooooooooooooo ooooooong</div></td>
            <td class="limited"><div>text</div></td>
        </tr>
    </thead>
</table> 
```

复制的代码在 Firefox 和 IE9 中的行为符合预期，但在 Chrome 中没有。如何在 Google chrome 中获得预期的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:53:20.797

```
.limited {width:1px;overflow:hidden;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:22:59.487

.limited { 宽度：1%; 溢出：隐藏；}

# asp.net-mvc - asp.net mvc 没有找到我的视图

> ID：14870567
> 
> 赞同：3
> 
> 时间：2013-02-14T08:25:26.957
> 
> 标签：asp.net-mvc, model-view-controller

我遇到了这些烦人的问题之一，这些问题非常简单，但我似乎仍然找不到问题。

我有一个简单的“测试”控制器。这是代码：

```
public class testController : Controller
{
    //
    // GET: /test/

    public ActionResult Index(int id)
    {
        ItemModel item = null;
        item = CommonLib.ReturnFullItem(id);

        return View("~/Views/Emails/ItemRecordedEmail", item);
    }

} 
```

我确实有文件夹*/Views/Emails/*里面有*ItemRecordedEmail.cshtml*视图。但我收到以下错误消息：

> 未找到视图“/Views/Emails/ItemRecordedEmail”或其主视图，或者没有视图引擎支持搜索的位置。搜索了以下位置：/Views/Emails/ItemRecordedEmail

当我将*ItemRecordedEmail.cshtml*移动到某个共享文件夹并相应地更改代码时，一切似乎都正常。任何想法我做错了什么？

编辑：我将路径更改为 ' **~** /Views/Emails. 这是最初的路径，经过我的所有尝试后，我不小心把它遗漏了。同样的错误消息仍然是同样的问题，只是这次它在“~/Views/Emails”文件夹中查找它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T09:35:27.817

当使用波浪号语法提供视图的完整路径时，您必须提供视图的文件扩展名，因为这会绕过视图引擎的内部查找机制来查找视图。所以应该是

```
return View("~/Views/Emails/ItemRecordedEmail.cshtml", item); 
```

参考：[专业的 ASP.NET MVC 4](http://books.google.com.tr/books?id=ZscWT8HzDVAC&pg=PT58&lpg=PT58&dq=When%20using%20the%20tilde%20syntax,%20you%20must%20supply%20the%20%EF%AC%81%20le%20extension%20of%20the%20view%20because%20this%20bypasses%20the%20view%20engine%E2%80%99s%20internal%20lookup%20mechanism%20for%20%EF%AC%81%20nding%20views.&source=bl&ots=GrEt8tVFiY&sig=bdV8prUk1Qr0Q5E3xrxRTIqqy7E&hl=en&sa=X&ei=RrIcUaXeIsaS4ASvnYGQBA&ved=0CCsQ6AEwAA)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-01-10T20:06:30.540

对于 Google 员工来说，这里还有另一个可能的解决方法：

[https://stackoverflow.com/a/31345035/591097](https://stackoverflow.com/a/31345035/591097)

确保视图文件的属性 Build Action 设置为 Content 而不是 None。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-14T08:27:01.350

我认为您打算使用此代码：

```
public ActionResult Index(int id)
    {
        ItemModel item = null;
        item = CommonLib.ReturnFullItem(id);

        return View("ItemRecordedEmail", item);
    } 
```

或者这个：

```
public ActionResult Index(int id)
    {
        ItemModel item = null;
        item = CommonLib.ReturnFullItem(id);

        return View("~/Views/Emails/ItemRecordedEmail.cshtml", item);
    } 
```

您需要在路径中相对添加一个视图，然后它将搜索`area/test/view.html`到`area/shared/view.html`然后到没有区域的路径的其余部分。就像您收到此错误消息的错误消息中显示的路径一样。

编辑：如果你有一个视图使用这个

```
return View("~/Views/Emails/ItemRecordedEmail.cshtml", item); 
```

或者如果您有部分观点：

```
return Partial("~/Views/Emails/ItemRecordedEmail.cshtml", item); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-26T16:18:04.083

当我复制并重命名现有视图时遇到了这个问题。MVC 找不到新视图。我通过首先删除复制和重命名的文件来解决它，然后添加一个全新的视图并从现有视图中复制粘贴内容。

# cakephp - 上传后在 cakephp 中回显图像

> ID：14870571
> 
> 赞同：0
> 
> 时间：2013-02-14T08:25:49.703
> 
> 标签：cakephp

上传到 app 文件夹下的 logos 文件夹后，我试图回显图像。上传工作正常，但我现在面临的挑战是在视图中回显图像。下面是我的上传功能和查看代码

```
function uploadFile() {
$file = $this->data['Logo']['file'];
if ($file['error'] === UPLOAD_ERR_OK) {
$id = String::uuid();
if (move_uploaded_file($file['tmp_name'], APP.'logos'.DS.$id)) {
$this->request->data['Logo']['filename'] = $file['name'];
$this->request->data['Logo']['filesize'] = $file['size'];
$this->request->data['Logo']['filemime'] = $file['type'];
return true;
}
}
return false;
} 
```

对于视图代码，我使用此代码。

```
<?php echo $this->Html->image(APP. 'logos' . DS. $logo['Logo']['filename']); ?> 
```

感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:16:21.427

有一个 .htaccess `app folder`，它不允许直接访问 webroot 文件夹之外的任何内容。为了便于使用，您应该在某处的 webroot 文件夹中上传图像。

# javascript - 用于 jquery 的 datetimepicker，如 silverlight

> ID：14870572
> 
> 赞同：0
> 
> 时间：2013-02-14T08:25:57.033
> 
> 标签：javascript, jquery, silverlight, datetimepicker

我需要单独编辑日期和时间，比如这个[链接](http://www.pitorque.de/MisterGoodcat/post/Silverlight-Making-a-DateTimePicker.aspx)。我将在 jquery 中创建一个应用程序，它需要像在 silverlight datetimepicker 中一样编辑日期和时间，所以我需要像上面的链接一样的 datetimepicker。日期和时间应该单独编辑，但在编辑之后它应该在同一个文本框中显示日期和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:05:00.977

**使用引导程序或 jQuery UI** 只需从 jquery 网站下载并包含脚本

jqueryui.com/download/

然后

```
<script>
$(function() {
$( "#datepicker" ).datepicker();
});
</script>

<body>
<p>Date: <input type="text" id="datepicker" /></p>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:11:50.257

我认为您可以使用许多可用作日期时间选择器的 jquery 插件。

> [http://umcdatetimepicker.codeplex.com/](http://umcdatetimepicker.codeplex.com/)
> 
> [http://www.jquery4u.com/plugins/10-jquery-time-picker-plugins/](http://www.jquery4u.com/plugins/10-jquery-time-picker-plugins/)
> 
> [http://www.javascriptkit.com/script/script2/timestamp.shtml](http://www.javascriptkit.com/script/script2/timestamp.shtml)
> 
> [http://www.dhtmlx.com/docs/products/dhtmlxCalendar/](http://www.dhtmlx.com/docs/products/dhtmlxCalendar/)

# c++ - 使用 std::unique_ptr 的指南

> ID：14870573
> 
> 赞同：0
> 
> 时间：2013-02-14T08:26:02.260
> 
> 标签：c++, stl, smart-pointers

使用指南是什么`std::unique_ptr`？

当指针在其他对象、模块之间共享时，肯定不应该使用它。但是meybe还有其他一些指导方针吗？

*   对于 pImpl
*   对于类内的成员指针
*   还有什么？

希望这个问题不是重复的。

# android - 为 GCM 手动注册设备

> ID：14870583
> 
> 赞同：2
> 
> 时间：2013-02-14T08:26:54.243
> 
> 标签：android, google-cloud-messaging

因此，无论我在哪里，注册设备都涉及使用谷歌的 Tomcat 服务器，设置它，然后针对它注册设备。这是注册设备的唯一方法吗？是否有其他语言的绑定或在不使用其 Tomcat 服务器的情况下重现注册功能的方法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T08:29:07.337

你可以用任何语言构建 GCM 注册服务器，我有我的，`PHP`所以它根本不需要是 Java。

GCM API 使用`JSON`消息与 Google 服务进行通信，因此几乎任何语言都能够发送`JSON`HTTP 请求。

`PHP`这是一个处理`GCM`注册的示例服务器

```
 $apiKey = "YOUR KEY";
    $registrationIDs = "REGISTRATION IDs";

    $url = 'https://android.googleapis.com/gcm/send';

    $fields = array(        
            'collapse_key' => $collapse_key,
            'registration_ids'  => $registrationIDs,
            'data'              => $data_array,
            'time_to_live' => $time_to_live
            );

    $headers = array( 
                'Authorization: key=' . $apiKey,
                'Content-Type: application/json'
            );

    // Open connection
    $ch = curl_init();

    // Set the url, number of POST vars, POST data
    curl_setopt( $ch, CURLOPT_URL, $url );

    curl_setopt( $ch, CURLOPT_POST, true );
    curl_setopt( $ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );

    curl_setopt( $ch, CURLOPT_POSTFIELDS, json_encode( $fields ) );

    // Execute post
    $result = curl_exec($ch); 
```

[这是一个 Python GCM 服务器](https://github.com/geeknam/python-gcm)

# batch-file - Windows 批量变量扩展无法正常工作

> ID：14870586
> 
> 赞同：3
> 
> 时间：2013-02-14T08:27:07.840
> 
> 标签：batch-file, cmd

当我将驱动器号存储`%0`到变量中时，我面临一些意外的输出。

以下代码段从**C:\Temp\Test**运行：

```
@echo off
for %%I in ("%~0") do set "Target=%%~dI"
echo Target:  %Target%
pushd %Target% && echo Current: %CD% || echo Failed to change dir! 
```

这会为当前目录打印正确的值，`Target`但不会为当前目录打印：

```
Target:  C:
Current: C:\Temp\Test 
```

预期输出：

```
Target:  C:
Current: C:\ 
```

我也尝试了延迟扩展的相同代码，但这也不起作用。谁能解释这里发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T10:14:07.427

您的问题不在于变量扩展，而在于`pushd`行为。

这种情况可以解释`pushd`（或`cd`顺便说一句）如何工作

```
C:\>cd temp
C:\temp>_ 
```

现在`%cd%`是`c:\temp`。如果您“移动”到另一个驱动器

```
C:\temp>e: 
```

并尝试

```
E:\>pushd c:
C:\temp>_ 
```

看到现在`%cd%`又回来了`C:\temp`，而不是`C:\`像您期望的那样。

但

```
C:\temp>e:
E:\>pushd c:\
C:\>_ 
```

如您所料`%cd%`。`C:\`

因此，您的 .BAT 文件可以简单地写为

```
pushd %~d0\ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:19:20.793

你为什么期待`Current: C:\`？
您从`C:\Temp\Test`.
所以`%CD%`扩展为是正确的`C:\Temp\Test`。

如果您希望`%CD%`在使用时会发生变化，则`PUSHD %target%`需要拆分行，或使用延迟扩展 for `!CD!`，因为首先解析完整行并完成百分比扩展，然后再`PUSHD`执行您的。

另一个问题是`pushd C:`不改变路径，因为`C:`是相对路径，你需要使用`C:\`

```
@echo off
set "Target=%~d0\"
setlocal EnableDelayedExpansion
echo Target:  %Target%
pushd %Target% && echo Current: !CD! || echo Failed to change dir^^! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:44:07.370

我无法向您解释这种行为，但您可以使用以下方法模仿它：

```
pushd %Target%
if %ERRORLEVEL%==0 (echo Current: %CD%) else (echo Failed to change dir!) 
```

# javascript - 使用 javascript 和 PhoneGap 的 HTML5 移动应用本地化

> ID：14870587
> 
> 赞同：5
> 
> 时间：2013-02-14T08:27:11.260
> 
> 标签：javascript, html, cordova, localization

我正在创建一个在所有 3 个移动平台（Android、iOS a、d Windows Mobile 8）上运行的 HTML5 移动应用程序。我正在使用 javascript 进行本地化（[https://github.com/eligrey/l10n.js/#readme](https://github.com/eligrey/l10n.js/#readme)）。

该应用程序在浏览器上运行良好。但是当我在移动模拟器上部署它时，本地化不起作用。

我认为问题在于 javascript 从浏览器获取语言信息，但在移动设备中，我们使用 PhoneGap 运行 HTML5。

有什么方法可以在 PhoeGap 中使用 javascript 启用本地化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:33:48.513

您可以编写自己的 JavaScript 来获取本地化语言。这是我在其他地方写的完全相同的回复。

一般来说，JavaScript`window.navigator.language`通常适用于 iOS 和更新的 Android，但早期版本的 Android 已将其硬编码为`en`.

对于较旧的 Android，我建议从 UserAgent 字符串中提取语言参数（是的嗅探！），例如

```
if (navigator && navigator.userAgent && (androidLang = navigator.userAgent.match(/android.*\W(\w\w)-(\w\w)\W/i))) {
   lang = androidLang[1];
} 
```

在这里， lang 可能还包含国家代码（例如“en-IE”），因此您可能还必须删除它：

```
if (lang.indexOf('-') != -1) lang = lang.substring(0, lang.indexOf('-')); 
```

这是我在最近的应用程序中使用的，使用 HTML5 和 PhoneGap，它运行良好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T08:42:17.510

我刚刚通过为每个仅返回用户当前语言环境的平台创建自定义 PhoneGap 插件解决了同样的问题。

例如，在 Android 上，插件只检查：

`var message = Locale.getDefault().getLanguage();`

然后在 Javascript 方面，当您获得该语言名称时，例如。`en`，您将使用它以该语言命名的 JSON 对象。JSON 对象的示例如下所示：

```
MyApp.Language = en: {
    'Player'  : 'Player',
    'Players' : 'Players',
    'Not Set' : 'Not Set'
},
fi: {
    'Player'  : 'Pelaaja',
    'Players' : 'Pelaajat',
    'Not Set' : 'Ei määritetty'
} 
```

Android的插件很简单：

**JS文件**

```
window.localizeMe = {
    getDefaultLocale: function( callback ) {
        cordova.exec(
            callback,
            function(err) {
                callback( 'Error: ' + err.code );
            },
            "LocalizeMe",
            "getDefaultLocale",
            []);
    }
} 
```

**Java 文件**

```
public class LocalizeMe extends CordovaPlugin {
    @Override
    public boolean execute(String action, JSONArray args, CallbackContext callbackContext) throws JSONException {
        if (action.equals("getDefaultLocale")) {
            String message = Locale.getDefault().getLanguage();
            this.getDefaultLocale(message, callbackContext);
            return true;
        }
        return false;
    }

    private void getDefaultLocale(String message, CallbackContext callbackContext) {
        if (message != null && message.length() > 0) { 
            callbackContext.success(message);
        } else {
            callbackContext.error("Expected one non-empty string argument.");
        }
    }

} 
```

**最后，在您的主 JS 文件中，设置应用程序的语言：**

```
window.localizeMe.getDefaultLocale( function( result ) {
    if ( result != null && result.length > 0 ) {
        if ( result.toLowerCase().indexOf( 'fi' ) !== -1 ) {
            MyApp.Lang = MyApp.Language.fi;
        } else {
            MyApp.Lang = MyApp.Language.en;
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T21:16:55.527

本地化有一个常见的陷阱，也许这是您的问题：许多设备以,等
形式报告语言环境- 请注意**下划线**。`de_DE``en_GB`

 **l10n （或者在我的情况下，[globalize.js](https://github.com/jquery/globalize)）使用**连字符**来分隔语言和国家 - 因此没有找到匹配的文化并且它提供了默认的后备。

在您的应用程序中放置一个`console.log`以转储您正在获取的语言环境字符串，然后转到控制台并检查`adb logcat`您的设备上是否可能出现这种情况。然后只需修改字符串以允许匹配（例如`locale.value.replace('_', '-')`）**

# r - knitr (R) - 如何不在 HTML 文件中嵌入图像？

> ID：14870589
> 
> 赞同：25
> 
> 时间：2013-02-14T08:27:14.740
> 
> 标签：r, markdown, knitr

这可能很容易，但我似乎无法在文档中找到它。我不想将生成的图像嵌入 HTML 文件本身。

所以基本上我希望 knit2html() 生成一个带有单独图像文件的 HTML 文件（然后链接到/显示在 HTML 中）。基本行为是脚本将图像嵌入为 base64 字符串。这样做的问题是在 IE 中，大图像不会显示（即似乎丢失了）。知道如何将图像与 HTML 输出分开吗？

我的示例 .Rmd 文件（'knit.Rmd'）：

```
```{r}
plot(3)
``` 
```

我的 .R 文件由此生成 HTML：

```
library(knitr)

knit2html('knit.Rmd') 
```

此示例生成一个 HTML，其中该图作为嵌入的 base64 字符串。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-14T08:57:17.560

如果您查看`knit2html` 帮助页面，您会看到：

```
This is a convenience function to knit the input markdown source and
call ‘markdownToHTML()’ in the ‘markdown’ package to convert the
result to HTML. 
```

然后您查看`markdownToHTML`帮助页面并阅读以下参数：

```
 options: options that are passed to the renderer.  see
           ‘markdownHTMLOptions’. 
```

因此，您查看`markdownHTMLOptions`（仍然没有丢失？）并查看以下选项：

```
 ‘'base64_images'’ Any local images linked with the ‘'<img>'’ tag
      to the output HTML will automatically be converted to base64
      and included along with output. 
```

使用以下命令，您应该会看到系统上的默认选项：

```
R> markdownHTMLOptions(default=TRUE)
[1] "use_xhtml"      "smartypants"    "base64_images"  "mathjax"       
[5] "highlight_code" 
```

因此，您可能可以尝试使用以下方式编织您的降价文件：

```
knit2html("knit.Rmd", options=c("use_xhtml","smartypants","mathjax","highlight_code")) 
```

虽然没有测试...

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-08-11T08:27:52.910

您可以`self_contained: no`在 .Rmd 标头中添加输出选项。例如：

```
---
title: "Data visualisation with ggplot"
output:
  html_document:
    self_contained: no
    toc: yes
    toc_float: yes
--- 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-14T08:56:39.587

它不是`knitr`这样做的，只是在运行块`knitr`后生成一个修改后的降价文件。`R`因此，您需要查看`markdown`软件包的帮助以弄清楚...

它的`base64_images`选择。咖啡还没有开始，所以我还没有完全弄清楚如何设置/重置单个降价选项，但将它们全部清除对我来说很有效：

```
 > knit2html("foo.Rmd",options="") 
```

生产

```
 <p><img src="figure/unnamed-chunk-1.png" alt="plot of chunk unnamed-chunk-1"> </p> 
```

在`foo.html`.

如果清除所有这些选项会破坏其他内容，请继续阅读`markdownHTMLOptions`。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-08-14T23:31:11.237

这是一种将图形放在单独的 html 文件中的简单方法，这将显着减小其大小。

在 *.rmd 文件的开头添加这个块：

```
```{r global_options, include=FALSE}
#suppress the warnings and other messages from showing in the knitted file.
knitr::opts_chunk$set(fig.width=8, fig.height=6, fig.path='Figs/',
                      echo=TRUE, warning=FALSE, message=FALSE)
``` 
```

选项 'fig.path' 告诉 R 将图片保存到 'Figs' 文件夹中。该任务不需要其余选项。

单击此按钮：

[![单击此按钮](../Images/163ba8b150006cd8ba234d7c78b959ee.png)](https://i.stack.imgur.com/kKI0h.png)

确保未选中该复选框：

[![确保未选中复选框](../Images/e624957636735df7a29bd887e70fb059.png)](https://i.stack.imgur.com/0RBKr.png)

# mysql - 获取mysql中的字段长度进行查询

> ID：14870590
> 
> 赞同：0
> 
> 时间：2013-02-14T08:27:16.237
> 
> 标签：mysql, cakephp-1.2

我正在使用 cakephp 1.2，我有这种情况：
我有一个表，它有一个“类”字段，其中类可以是“A”、“B”、“C”、“G”或三个字符串字母 'DBB'、'ABA' 等。
每个字符串都有意义（例如，A = Article，B = Book 等）。
我写了这段代码：

```
if ($_GET['classificazione']!="art0")
{
    $classificazione=$_GET['classificazione'];
    if ($classificazione=="A"||$classificazione=="B"||$classificazione=="C"||$classificazione=="G")
                $conditions[]=array('classe =' => "$classificazione"); 
```

这适用于“一个字母”的情况，但我不知道如何处理 2 个或更多字母。
因为我不在乎它们是否相等（'DBB' 和 'ABA' 都是文档），所以我想检查长度，所以我尝试了这个：

```
else
    $conditions[]=array('LENGTH(classe) > 1'); } 
```

我测试了else，现在它正在工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:19:37.767

使用 LENGTH() 检查字节长度：

```
SELECT str FROM sometable WHERE LENGTH(str) = 5; 
```

或 CHAR_LENGTH() 用于检查字符数的长度（对多字节字符串有用）：

```
SELECT str FROM sometable WHERE CHAR_LENGTH(str) = 5; 
```

# java - 如果结果在一行中不为空，则附加到字符串？（干净/好看）

> ID：14870594
> 
> 赞同：1
> 
> 时间：2013-02-14T08:27:36.750
> 
> 标签：java, string, constructor, null

我有一个带有 5 个内部字符串变量的对象，但其中 3 个是可选的。我可以为每个可能的组合创建一个构造函数，或者我可以调用通用构造函数并将一些空字符串传递给它。后一种情况对我来说很有趣，如果我在调用构造函数时可以执行以下操作：

```
String a = "Mandatory";
...
String e = "" + getVariableE(); //getVariableX() could return null, 
                                //then it would be "".
                                //This is a "long" fetch statement.

new objectA(a, b, c, d, e); 
```

另一种选择：

```
String d = "";
String e = "";
if(getVariableD!=null)  //Remember pretty long fetch statement (ugly looking)
     d = getVariableD();
if(getVariableE!=null)
    e = getVariableE();

new objectA(a, b, c, d, e); 
```

我看不到在不使用多个 if 语句的情况下使用多个构造函数。

```
new objectA(a, b, c);
new objectA(a, b, c, d) 
```

我认为构造函数在这里可能不是一个因素，而只是将线条设置为“”或其他东西的方式；尽管如此，我还是留下了它，以防我错过了什么。

这是简单的 objectA 类

```
public class objectA {
String a; //Needed
String b; //Needed
String c; //Optional
String d; //Optional
String e; //Optional
/*
 * Possible constructor
*/
    void object(String a, String b, String c, String d, String e) {
    this.a = a;
    ...
    this.e = e;
    } 
```

注意：getVariableX() 从 XML 文件中获取一个属性，所以我可以强制它必须包含一个字符串，但我不认为这会很好。更好地赋予 XML 文件灵活性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:34:29.260

```
if(getVariableD!=null) {
    d = getVariableD();
} 
```

可以转换为三元运算符：

```
d = getVariableD != null ? getVariableD() : ""; 
```

注意：您应该始终更喜欢代码可读性而不是简洁性。

[Elvis 运算符](http://blogs.infosupport.com/java-7-and-the-elvis-operator)是为 Java 7 提出的语法糖，但从未成功。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T10:39:31.883

如果`getVariableD()`返回一个字符串，您还可以使用[Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Strings.html#nullToEmpty%28java.lang.String%29)`Strings.nullToEmpty()`中的方法来避免键入（和评估）getVariableD() 两次。

当然，您可以为任意对象编写类似的实用方法：

```
/** Returns {@code obj.toString()}, or {@code ""} if {@code obj} is {@code null}. */
static String safeToString(@Nullable Object obj) {
  return obj == null ? "" : obj.toString();
} 
```

然后做：

```
String d = safeToString(getVariableD()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-06T06:49:08.967

您可以使用 Java 8 中包含的 Optional 类。

```
this.d = Optional.ofNullable(d).orElse(""); 
```

# java - android.annotation 无法解析

> ID：14870596
> 
> 赞同：37
> 
> 时间：2013-02-14T08:27:44.010
> 
> 标签：java, android, eclipse

我正在尝试在 Eclipse 中运行示例 android 代码，但是当我尝试时：

```
import android.annotation.SuppressLint; 
```

我不断收到与此行相关的错误，例如：

```
the import android.annotation cannot be resolved 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-14T09:15:17.247

您在项目中引用了哪个 API。

因为

android.annotation.SuppressLint - 自从在 API 级别 16 中添加

[http://developer.android.com/reference/android/annotation/SuppressLint.html](http://developer.android.com/reference/android/annotation/SuppressLint.html)

你需要下一步

您项目 rigth mouse click->Properties 并检查下一张图片为您选择 API Level >=16 的 Project Build Target

![在此处输入图像描述](../Images/ae7b0dd3862cd1e1b1878e49cad246af.png)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-16T21:53:54.437

正如 Artem 建议的那样，您可能需要将 annotations.jar 文件包含到您的项目中，但请注意您的 Android SDK 中有两个 annotations.jar 文件：

**android-sdk/tools/support/annotations.jar** - 其中包括以下注释：

*   抑制棉绒
*   目标API

**android-sdk/extras/android/support/annotations/annotations.jar** - 其中包括许多其他注释：

*   动画资源
*   AnimatorRes
*   任何资源
*   ArrayRes
*   属性
*   布尔值
*   颜色分辨率
*   维度资源
*   可绘制资源
*   分数分辨率
*   IdRes
*   定义
*   整数分辨率
*   插值器资源
*   布局资源
*   菜单资源
*   非空
*   可空的
*   复数
*   原始分辨率
*   字符串定义
*   字符串资源
*   风格资源
*   StyleableRes
*   XmlRes

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-21T07:48:17.323

在您的`android-sdk/tools/support/annotations.jar`中，它包含`android.annotation.SuppressLint`and`android.annotation.TargetApi's` 定义。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-11T07:18:34.073

Dmitry Nelepov 的回答是正确的，尽管有时您的项目已经在所需的项目构建目标上（这发生在我的案例中）。只需将构建案例切换到不同的构建案例，按“确定”，然后重做步骤将其设置回正确的项目构建目标。

# android - 是否可以将 iOS db 文件用于 Android 项目？

> ID：14870599
> 
> 赞同：1
> 
> 时间：2013-02-14T08:27:58.480
> 
> 标签：android, sqlite, android-sqlite

我正在为 Android 实现一个与数据库相关的应用程序。同样的项目也在 iOS 中实现。我可以将此 iOS db 文件用于我的 Android 项目吗？

## 编辑

以下是我的代码和日志，我在日志中收到错误，但我的应用程序没有崩溃。我唯一关心的是我在哪里做错了。

我的代码是：

```
public class DataBaseHelper extends SQLiteOpenHelper{

//The Android's default system path of your application database.
private static String DB_PATH = "/data/data/com.example.test/databases/";

private static String DB_NAME = "testdb.sql";

private SQLiteDatabase myDataBase;

private final Context myContext;
public DataBaseHelper(Context context) {

    super(context, DB_NAME, null, 1);
    this.myContext = context;
    } 
private void copyDataBase() throws IOException
{

    //Open your local db as the input stream
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0)
    {
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException
{

    //Open the database
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

}

@Override
public synchronized void close()
{

    if(myDataBase != null)
    myDataBase.close();

    super.close();

}

@Override
public void onCreate(SQLiteDatabase db)
{

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{

}
public void createDataBase() throws IOException
{

    boolean dbExist = checkDataBase();

    if(dbExist)
    {
    //do nothing - database already exist
    }
    else
    {

    //By calling this method and empty database will be created into the default system path
    //of your application so we are gonna be able to overwrite that database with our database.
        this.getReadableDatabase();

        try 
        {

            copyDataBase();

        } 
        catch (IOException e) 
        {

            throw new Error("Error copying database");

        }
    }

}
private boolean checkDataBase()
{

    SQLiteDatabase checkDB = null;

    try
    {
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }   
    catch(SQLiteException e)
    {

    //database does't exist yet.

    }

    if(checkDB != null)
    {

    checkDB.close();

    }

    return checkDB != null ? true : false;
}

} 
```

**错误日志：**

```
02-14 04:42:01.358: E/SQLiteLog(1552): (14) cannot open file at line 30176 of  [00bb9c9ce4]
02-14 04:42:01.378: E/SQLiteLog(1552): (14) os_unix.c:30176: (2) open(/data/data/com.example.test/databases/testdb.sql) - 
02-14 04:42:01.508: E/SQLiteDatabase(1552): Failed to open database '/data/data/com.example.test/databases/testdb.sql'.
02-14 04:42:01.508: E/SQLiteDatabase(1552): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at com.example.test.DataBaseHelper.checkDataBase(DataBaseHelper.java:126)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at com.example.test.DataBaseHelper.createDataBase(DataBaseHelper.java:90)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at com.example.test.LoginActivity.onCreate(LoginActivity.java:59)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.app.Activity.performCreate(Activity.java:5104)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.os.Looper.loop(Looper.java:137)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at android.app.ActivityThread.main(ActivityThread.java:5039)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at java.lang.reflect.Method.invokeNative(Native Method)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at java.lang.reflect.Method.invoke(Method.java:511)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
02-14 04:42:01.508: E/SQLiteDatabase(1552):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:41:28.573

简短的回答是：是的。但也有一些考虑。

1.  如果 iOS 项目使用 Core Data，生成的 db 文件的架构将难以理解。另请参阅下一点。

2.  如果 iOS 项目使用没有 Core Data 的 sqlite db，你可以这样使用它，但你需要确保：

    *   表的 id 字段被命名`_id`
    *   有一个名为 android_metada 的表是使用它创建`CREATE TABLE "android_metadata" ("locale" TEXT DEFAULT 'en_US')`的，它有一个使用创建的行`INSERT INTO "android_metadata" VALUES ('en_US')`

（来源：[reigndesign：在 Android 应用程序中使用自己的 SQLite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)）

# python - Google App Engine python中的UnicodeDecodeError

> ID：14870600
> 
> 赞同：1
> 
> 时间：2013-02-14T08:27:58.773
> 
> 标签：python, google-app-engine, xlwt

我正在谷歌应用程序引擎中编写 excel 文件，我收到以下错误，代码有什么问题？

```
UnicodeDecodeError: 'utf8' codec can't decode byte 0xd0 in position 706: invalid continuation byte 
```

这是代码，

```
myworkbook = xlwt.Workbook()
ws = myworkbook.add_sheet('Sheet1')
ws.write(0, 0, 'Cell of my sheet') 
myworkbook.save(self.response.out)
self.response.headers['Content-Type'] = 'application/excel'
self.response.out.write(self.response.out) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T10:01:17.387

您需要删除以下行：

```
self.response.out.write(self.response.out) 
```

`myworkbook.save(self.response.out)` *已经打电话了`self.response.out.write`*。`self.response.out`是一个文件对象；再写`self.response.out`一遍是没有意义的。

# javascript - 杀死一个无限运行的 JavaScript 函数

> ID：14870602
> 
> 赞同：5
> 
> 时间：2013-02-14T08:28:02.853
> 
> 标签：javascript, dom-events

举个例子

```
var runInfinite = function(){
    while(1)
    {
       // Do stuff;
    }
};

setTimeout(runInfinite, 0); 
```

是否有可能打破这个 runInfinite 函数形式无限运行？我的意思是可以在不使用标志或返回语句的情况下从另一个函数中**杀死这个函数吗？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T08:32:21.630

答案是不。由于 JavaScript 是单线程的（除非您使用一些我怀疑的不太常见的实现），没有什么可以从外部破坏循环（或任何其他代码块）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T08:58:05.677

没有直接的方法可以“杀死”正在运行的 javascript 函数。

可能的解决方法，尽管您需要更换`while(1)`循环：

```
var i = 0; // for testing purposes

var toCall = "runInfinite()";
function runInfinite(){
    // do stuff
    console.log(i++);
    setTimeout(function(){ eval(toCall); }, 100); // or whatever timeout you want
}

setTimeout(function(){ eval(toCall); }, 0); // start the function
setTimeout(function(){ toCall = ""; }, 5000); // "kill" the function 
```

我知道使用`eval()`被认为是不好的做法，但是这个想法应该很清楚。该函数`setTimeout()`使用变量调用自身（不是递归的，因此是 ）`toCall`。一旦这个变量被取消设置，你就从外面杀死它。

你可以将这些变量和函数包装在一个类中，这样你就可以实现你的“kill”函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:33:03.963

我刚刚在我的浏览器上进行了测试。

AFAIK，while(1) 块实际上会阻塞线程并且不允许其他任何东西运行。除了经验之外，我没有其他来源，但是使用 Chrome 开发人员工具包的东西`ctrl+shift+i`键入`while(1){}`会阻止其他所有内容，因为 browser-javascript 是单线程的。

但是，如果您正在使用`node.js`，您可能可以使用它，因为它具有多线程功能。如果有人足够熟悉`node.js`并愿意回答/编辑，那就去吧。我从来没有完全使用过它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T08:33:12.083

你想要的不是真的。但也许你做错了。如果可能，尽量不要使用`while(1)`，如果触发了外部标志但未设置某个中断按钮，则在函数结束时再次调用该函数，否则返回

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:33:52.817

**return** 可用于停止函数的当前执行，但不适用于您的情况。

在您的情况下，您可以尝试将您的函数包装在一个**try / catch 块**中，您可以在您的函数将无限时找到它，基于您可以终止其当前执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-01T03:51:20.947

我承认这并不完全相同，但是[ECMA-262](https://www.ecma-international.org/ecma-262/9.0/index.html)中有 Javascript 生成器和 Javascript 迭代器。如果您可以用生成器功能替换您的功能，那么您可以轻松实现可破坏功能。

```
function execWithTimeout(iter, timeout = 100) {
    const limit = Date.now() + timeout
    for (const output of iter) {
        console.log(output)
        if (Date.now() > limit) throw(new Error("Timeout reached"))
    }
}

let runInfinite = function * () {
    let i = 0
    while (1) {
        yield i++
    }
}

execWithTimeout(runInfinite())
```

# shell - 我如何知道 bash kill 将使用 pid 还是 jobspec？

> ID：14870603
> 
> 赞同：12
> 
> 时间：2013-02-14T08:28:08.393
> 
> 标签：shell, syntax, process, sh, kill

从精美的手册页：

```
kill [-s sigspec | -n signum | -sigspec] [pid | jobspec] ...
kill -l [sigspec | exit_status]
    Send  the  signal  named  by sigspec or signum to the processes named by pid or 
    jobspec.  sigspec is etc. etc.... 
```

那么是什么决定了是`kill 1`杀死init进程还是jobspec 1呢？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-14T08:32:43.573

使用 kill 1 您将使用 pid 1 向进程发送信号。要杀死作业 1，您必须输入

```
 kill %1 
```

工作规范是 %

# javascript - 如何在 php 循环中使用 jquery 更改 css

> ID：14870608
> 
> 赞同：0
> 
> 时间：2013-02-14T08:28:39.830
> 
> 标签：javascript, jquery, html, css, loops

我想更改我的文本框的 css 并禁用 php 循环中的提交按钮，如果它满足某些条件。

我已成功设法通过 php 循环数据，但仅更改了第一个文本框

我会放一些 php 代码，因为 php 部分已经成功完成

脚本

```
<style type="text/css">
.first
{
  color:#0C0
}
.second
{
   color:#F00
}

</style>

 <script src="js/jquery-1.8.3.js"></script>
 <script src="js/jquery-ui.js" > </script>
 <script> var $j = jQuery.noConflict();

 function changeClass(str)
 {
      if ($j('#status').val()== "No")
      {
          $j('#status').addClass('first');
      }
  else
  {
         $j('#status').removeClass('first');                                
         $j('#status').addClass('second');                   
         $j('#submit').prop('disabled', true);
       }              
return true;
 }
  </script> 
```

## HTML

```
 <table width="800" border="0" align="center" bordercolor="#000000" 
          onmousemove="changeClass(this);"> 
 <?php do { ?>
     <tr bgcolor="#FFFFCC">
       <th  align="center" bgcolor="#3366FF" class="style68" >Status</th>
       <th  align="center" bgcolor="#3366FF" class="style68" >Submit</th>
       <td  align="center" bgcolor="#CCCCCC">
          <form  > <input type="text"  id="status" name="status" 
           value="<?php echo$data['status']; ?>" >
       </td> 
       <td  align="center" bgcolor="#CCCCCC">
         <button id="submit" name="submit" type="submit" > Submit</button>
    </form>
   </td>
         </td>
                 </tr>   
                  <?php } while ($data = mysql_fetch_assoc($re)); ?>
                </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:54:50.313

```
 $(document).ready(function(){
  $('table').hover(function(){
    $( ".changeClass" ).each(function() {
    if($(this).val()=='No')
    {
    $(this).addClass( "second" );
    $(this).parent().parent().find('.submitClass').prop('disabled', true);
    }
    else
    {
    $(this).addClass( "first" );
    }
    });
    return true;
    })
});

  <input type="text" class="changeClass"  name="status"  value="<?php echo$data['status']; ?>" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:53:28.547

HTML 中的元素 id 必须是唯一的。您应该使用表 id 并通过表 td children 来执行此操作。或者您可以使用 td 类状态并将它们称为 .status 而不是 jquery 中的 #status。

# c# - 不使用 Linq 对 DataTable 行进行分组和求和

> ID：14870612
> 
> 赞同：0
> 
> 时间：2013-02-14T08:29:07.253
> 
> 标签：c#, asp.net, datatable

我有这样的数据表

```
Name           Price
product1        10
product1        12
product2        3
product2        5
product2        7
product3        22 
```

我想对相同名称的产品进行分组并像这样总结价格--->

```
Name           Price
product1        10
product1        12
                22

product2        3
product2        5
product2        7
                15

product3        22
                22 
```

我不应该用 linq 做到这一点。我如何区分名称的不同值并像表中一样对它们进行汇总。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:07:07.737

您将获得字典，其中键是产品名称，值是所有相同产品价格的总和。

```
var allProducts = context.Products.Where(.....what products you want to take from     db).ToList();

   Dictionary<String, Int32> dictionary = new Dictionary<String, Int32>();
   foreach(var product in allProducts)
   {
      Int32 value = 0;
      if(!dictionary.TryGetValue(product.Name, out value))
      {
         dictionary.Add(product.Name, product.Price);
         continue;
      }
            value += product.Price;
            dictionary[product.Name] = value;
   } 
```

# javascript - 添加 onclick 事件以调用 rapahael 中的某些超链接

> ID：14870614
> 
> 赞同：0
> 
> 时间：2013-02-14T08:29:14.927
> 
> 标签：javascript

基于演示[http://raphaeljs.com/australia.html](http://raphaeljs.com/australia.html)，我想在演示中添加 onclick 事件。我的想法是，每当用户点击某个状态时，它都会指向某个网站。例如，如果用户单击新南威尔士州，我希望将用户定向到网站[http://en.wikipedia.org/wiki/New_South_Wales](http://en.wikipedia.org/wiki/New_South_Wales)。

有人可以分享一些解决方案吗？

提前致谢。沙拉德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:31:06.700

可能的解决方案：

首先将状态的所有链接和存储项（与 div id 相同）放入 assoc 数组中：

```
var links = { 'nsw':'http://en.wikipedia.org/wiki/New_South_Wales','sa':'http://en.wikipedia.org/wiki/South_Australia'}; //i am too lazy to find all links, just fill till the end in same style 
```

然后在 onmouseevent 之后调用此方法（在索引页面中）：

```
st[0].onclick = function(){ 
    window.open(links[current]); //current contain same value as div id (for example wa for Western Australia. this would open new window. 
} 
```

# c# - 从代码隐藏访问 javascript 动态属性

> ID：14870615
> 
> 赞同：0
> 
> 时间：2013-02-14T08:29:15.577
> 
> 标签：c#, javascript, webforms, code-behind

我是 ASP 的新手，我被我的 ascx 控件困住了。我有一个带有以下初始化代码的控件 Upload.ascx

```
 <%@ Control Language="C#" AutoEventWireup="true" CodeFile="Uploader.ascx.cs" Inherits="Uploader" %>
 <script type="text/javascript" > 
 $(function ()
 {
    var guid = GUID();//GUID() - js function which generates GUID
    $('#' + '<%= OuterId %>').attr('guid', guid);
 }
 </script>
 <div class="buttonNoHover" runat="server" id="current">Upload</div> 
```

和 cs 初始化代码（部分）

```
 protected void Page_Load(object sender, EventArgs e)
 {
    current.ID = this.ID;
 } 
```

我的控件声明如下所示

```
 <my:Uploader ID="upload" OuterId="upload" ClientIDMode="Static" runat="server" /> 
```

在我的 JS 中，我可以访问属性 $('#upload').attr('guid') 并提供正确的值。但是当我提交表单时，我的 upload.Attributes["guid"] 在代码隐藏中变为 null。我怎样才能访问它，我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:35:09.263

你不能这样做：

有两种方法：

从服务器传递 GUID 并存储在一些文字中并使用 JQuery 等访问文字

或者

创建服务器端隐藏字段并分配值。

```
<asp:HiddenField runat="server" ID="hidden" />

$('[id$=hidden]').val(guid); 
```

在提交访问隐藏字段

# java - 在哪里使用本地内部类

> ID：14870618
> 
> 赞同：0
> 
> 时间：2013-02-14T08:29:34.117
> 
> 标签：java

您能否清楚地解释一下“我们需要在哪里使用本地内部类”？

例子：

```
public class LocalTest
{

    int b=30;
    void display()
    {
        class Local{ 
            void msg()
            {

                 System.out.println(b);
            }       
        }

        Local l = new Local();
        l.msg();
    }

    public static void main(String args[])
    {
        LocalTest lt = new LocalTest();
        lt.display();
    }
} 
```

这`Local class`是一个本地内部类。它仅对 `display()`. 我们在哪种情况下使用这些本地内部类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:37:24.727

主要原因是当我们需要在本地实现一些接口并将其传递到某个地方，但我们想在实现中添加更多方法，所以匿名实现不适合：

```
public static void Main (String [] args) throws Exception
{
    class MyRunnable extends Runnable
    {
        private boolean complete = false;

        public synchronized void waitComplete () throws InterruptedException
        {
            while (!complete) wait ();
        }

        @Override
        public void run ()
        {
            // Do something useful

            synchronized (this)
            {
                complete = true;
                notifyAll ();
            }
        }
    }

    MyRunnable r = new MyRunnable ();
    new Thread (r).start ();

    // Do something in parallel with new thread

    r.waitComplete (); // We forgot about Thread.join ()
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T08:36:07.067

我认为它可能有两个用途：

*   您不想用一个只在函数内部使用的类来污染函数外部的命名空间。
*   您想使用`final`函数内声明的任何 ( ) 变量，而不必通过构造函数显式传递它们。

# python - Python：动态列表名称

> ID：14870622
> 
> 赞同：0
> 
> 时间：2013-02-14T08:29:52.427
> 
> 标签：python, list, dynamic

我正在尝试将一个文件放在一起，该文件接受用户对他们想要分析的许多文本文件的输入。作为第一步，我只想获取他们输入的每个文档的内容（可以是任意数量，没有限制）并将文档每一行的内容记录为列表中的一个项目。我想为用户输入的每个文档都有一个单独的列表，但这就是我苦苦挣扎的地方。以下是我到目前为止所得到的。

```
def user_input():
    prompt = raw_input("Please input the full name (e.g. text_file.txt) or path of a text file:")
    global lst
    lst = {}
    lst[0] = prompt
    global file_count
    file_count = 1
    while len(prompt) > 0:
        prompt = raw_input("Please input any additional text files or simply press enter to continue:")
        if len(prompt) > 0:
            lst[file_count] = prompt
            file_count = file_count+1
    return lst

def read_in():
    for x in lst.values():
        file = open(x)
        x = file.readlines() 
```

我现在被困在这部分，因为我不确定如何为每个列表动态分配名称。任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:39:00.347

```
def get_filenames():
    filelist = []
    prompts = [
        "Please input the full name (e.g. text_file.txt) or path of a text file:",
        "Please input any additional text files or simply press enter to continue:"
    ]
    while True:
        filename = raw_input(prompts[len(filelist) > 0]).strip()
        if not filename:
            break
        filelist.append(filename)
    return filelist

def get_filelines(filelist):
    files = {}
    for filename in filelist:
        with open(filename, 'rb') as fp:
            files[filename] = fp.readlines()
    return files

if __name__=='__main__':
    print get_filelines(get_filenames()) 
```

# sql - 插入语句查询

> ID：14870627
> 
> 赞同：0
> 
> 时间：2013-02-14T08:30:20.307
> 
> 标签：sql, tsql, insert

我的表中有 882 行，这些列是（StartDate、EndDate、Capacity、PitchType_Skey、Site_Skey），这些行基于 2010 年的日期，我想做的是在 2011 年再插入 882 行，但我想不出如何做到这一点，你能帮忙吗？我已经开始了我的插入语句：

```
INSERT INTO Cap1 (StartDate, EndDate, Capacity, PitchType_Skey, Site_Skey)

SELECT
Add 1 YEAR to StartDate,
Add 1 YEAR to EndDate,
Capacity,
Pitch_Type_Skey,
Site_Skey
FROM Cap1
WHERE YEAR StartDate = 2010 
```

提前致谢

韦恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:32:28.840

假设`StartDate`and`EndDate`的数据类型为日期或日期时间，那么您可以使用该[`DATEADD`](http://msdn.microsoft.com/en-us/library/ms186819.aspx)函数将年份增加 1，如下所示：

```
INSERT INTO Cap1 (StartDate, EndDate, Capacity, PitchType_Skey, Site_Skey)

SELECT
  DATEADD(yy, 1, StartDate),
  DATEADD(yy, 1, EndDate),
  Capacity,
  Pitch_Type_Skey,
  Site_Skey
FROM Cap1
WHERE YEAR(StartDate) = 2010; 
```

* * *

**请注意：**正如@Bridge 所指出的，@brykneval 该[`YEAR`函数](https://stackoverflow.com/a/799616/722783)不是[***sargable***](http://en.wikipedia.org/wiki/Sargable)，因此 SQL Server 优化器不能在`YEAR`函数内的该字段上使用索引。为了获得更好的性能，请使用谓词`BETWEEN`, or `<=`,`>=`代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:34:54.987

```
INSERT INTO Cap1 (StartDate, EndDate, Capacity, PitchType_Skey, Site_Skey)

                 SELECT
                     DateAdd(yy,1,StartDate),
                     DateAdd(yy, 1,EndDate),
                     Capacity,
                     Pitch_Type_Skey,
                     Site_Skey
                     FROM Cap1
                      WHERE YEAR(StartDate) = 2010 
```

# jquery - 将背景 div 与原始 div 拖动

> ID：14870638
> 
> 赞同：1
> 
> 时间：2013-02-14T08:30:57.263
> 
> 标签：jquery, html, jquery-ui, jquery-ui-sortable

有一些带有背景 div 的 div。通过单击设置，当前 div 隐藏并显示背景 div。当我重新排列 div 时（Div 是可排序的）。背景 div 保留其原始位置。然后当我想查看它的背景（设置 div）时，它会从旧位置旋转它

旋转的脚本

```
 $('.flip_div').click(function() {
        var div1 = $(this).parent();
        var div2 = $('#'+$(this).attr('attached-with'));
        var toHide = div1.is(':visible') ? div1 : div2;
        var toShow = div2.is(':visible') ? div1 : div2;

        toHide.removeClass('flip in').addClass('flip out').hide();
        toShow.removeClass('flip out').addClass('flip in').show();
    }); 
```

**[小提琴](http://jsfiddle.net/ranasaani/AFfNV/2/)**

重新排列div然后点击设置查看问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:53:33.513

您可以简单地用单个元素包装后面板和前面板，并将其作为排序目标。所以，HTML（见`<div class="single_panel">`前后部分）：

```
<div class="single_panel">
            <section id="pannel_front_1" class="pannel">
                <h4 class="pannel_title">Pannel 1</h4>
                <span class="flip_div div_menu" attached-with="pannel_back_1" >Settings</span>
                    <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, consequat.</p>
            </section>

            <section id="pannel_back_1" class="pannel" style="display:none">
                <h4 class="pannel_title">Back Side 1</h4>
                <span class="flip_div div_menu" attached-with="pannel_front_1">back</span>
                    <p>Back Side.</p>
             </section>
        </div> 
```

该新元素的 CSS：

```
.single_panel{
    overflow:hidden;
    width: 100px;
    float:left;
} 
```

并更新了可排序的初始化代码：

```
$(document).ready(function(){
    $(function() {
        $( "#sidebar" ).sortable({
          connectWith: ".single_panel",
        }).disableSelection();
      }); 
```

演示：http: [//jsfiddle.net/AFfNV/3/](http://jsfiddle.net/AFfNV/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:27:47.533

由于 class=panel 和 sortable 你面临这个问题所以我做了两个改变。1\. 添加了一个带有 class=panel 的 div，并从所有部分中删除了 class=panel 2\. 将 java 脚本更改了一点 HTML

```
<!doctype html>

<body>

<div id="pagewrap"> 
    <aside id="sidebar">
<div class="pannel">
        <section id="pannel_front_1" >
            <h4 class="pannel_title">Pannel 1</h4>
            <span class="flip_div div_menu" attached-with="pannel_back_1" >Settings</span>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, consequat.</p>
        </section>

        <section id="pannel_back_1" style="display:none">
            <h4 class="pannel_title">Back Side 1</h4>
            <span class="flip_div div_menu" attached-with="pannel_front_1">back</span>
                <p>Back Side.</p>
         </section>
        </div>
        <div class="pannel">
        <section id="pannel_front_2" >
            <h4 class="pannel_title">Pannel 2</h4>
            <span class="flip_div div_menu" attached-with="pannel_back_2" >Settings</span>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit,</p>
        </section>

        <section id="pannel_back_2"  style="display:none">
            <h4 class="pannel_title">Back Side 2</h4>
            <span class="flip_div div_menu" attached-with="pannel_front_2">back</span>
                <p>Back Side.</p>
         </section>
        </div>
                <div class="pannel">
        <section id="pannel_front_3" >
            <h4 class="pannel_title">Pannel 3</h4>
            <span class="flip_div div_menu" attached-with="pannel_back_3" >Settings</span>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit.</p>
        </section>

        <section id="pannel_back_3" style="display:none">
            <h4 class="pannel_title">Back Side 3</h4>
            <span class="flip_div div_menu" attached-with="pannel_front_3">back</span>
                <p>Back Side.</p>
         </section>
        </div>
                     <div class="pannel">
        <section id="pannel_front_4" >
            <h4 class="pannel_title">Pannel 4</h4>
            <span class="flip_div div_menu" attached-with="pannel_back_4" >Settings</span>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
        </section>

        <section id="pannel_back_4" style="display:none">
            <h4 class="pannel_title">Back Side 4</h4>
            <span class="flip_div div_menu" attached-with="pannel_front_4">back</span>
                <p>Back Side.</p>
         </section>
        </div>
                            <div class="pannel">
        <section id="pannel_front_5" >
            <h4 class="pannel_title">Pannel 5</h4>
            <span class="flip_div div_menu" attached-with="pannel_back_5" >Settings</span>
                <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit</p>
        </section>

        <section id="pannel_back_5" style="display:none">
            <h4 class="pannel_title">Back Side 5</h4>
            <span class="flip_div div_menu" attached-with="pannel_front_5">back</span>
                <p>Back Side.</p>
         </section>
        </div>

        <!-- pannel end -->
    </aside>
    <!-- sidebar ends-->

</div>
<!-- pagewrap ends-->

</body>
</html> 
```

脚本

```
$(document).ready(function(){
    $(function() {
        $( "#sidebar" ).sortable({
          connectWith: ".pannel",
        }).disableSelection();
      });

      $('.flip_div').click(function() {               
        var div1 = $(this).parent();
        var div2 = $('#'+$(this).attr('attached-with'));

         $(div1).removeClass('flip in').addClass('flip out').hide();          
         $(div2).removeClass('flip out').addClass('flip in').show();          

    });

}); 
```

它已经完成了。试试看。

# iphone - 通知后在主线程上执行选择器时显示加载覆盖

> ID：14870639
> 
> 赞同：0
> 
> 时间：2013-02-14T08:30:58.203
> 
> 标签：iphone, objective-c, selector, nsnotificationcenter

我正在开发一个 iPhone 应用程序。

我正在从服务器进行异步更新。更新完成下载后，我发出 NSNotification

```
[[NSNotificationCenter defaultCenter] postNotificationName:NOTIFICATION_DATA_RECEIVED object:self userInfo:@{ @"updateKey": updateKey }]; 
```

在我的 viewController 我声明了观察者

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateReceived:) name:NOTIFICATION_DATA_RECEIVED object:nil]; 
```

收到通知时将执行的选择器：

```
- (void) updateReceived:(NSNotification *)notification
{
    [self performSelectorOnMainThread:@selector(updateData:) withObject:nil waitUntilDone:NO];
} 
```

`updateData`需要在主线程上执行，因为它会更改核心数据中的实体，并且除非我们使用某些特定的库，否则无法针对不同的威胁执行此操作。我不想改变它。

**我的问题：**

`updateData`需要一段时间，它正在冻结 UI，因为它位于主线程上。完成后，我需要显示“正在加载数据...”叠加层。

我在视图控制器中有 2 个方法将显示覆盖：`showLoadingOverlay`和`hideLoadingOverlay`

我需要在调用和完成`showLoadingOverlay`时调用。`updateData``hideLoadingOverlay`

问题是，由于它是在主线程上执行的，所以我不知道如何在更新数据时显示覆盖。我尝试在发送通知之前直接显示它并在`updateData`方法结束时将其隐藏，但它不起作用。

任何帮助是极大的赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:44:58.050

也许，只是也许，您正在使用也安排在主线程上但在执行 updateData 之后的动画。在这种情况下，请确保动画在调用 updateData 之前开始。例如，您可以执行以下操作：

```
- (void)updateReceived:(NSNotification*)notification {
    [self startAnimationOnComplete: ^{
        [self performSelectorOnMainThread:@selector(updateData:) withObject:nil waitUntilDone:NO];
    }]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:58:56.077

我找到了一种方法。在显示叠加层 1 毫秒后，我最终使用 NSTimer 运行 updateReceived 方法。

```
- (void) updateReceived:(NSNotification *)notification
{
    [self showLoadingOverlay];
    [NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(updateDataOnMainThread:) userInfo:nil repeats:NO];
}

- (void) updateDataOnMainThread:(NSTimer *)timer
{
    [self performSelectorOnMainThread:@selector(updateData:) withObject:nil waitUntilDone:NO];
} 
```

# c - time() 调试（JTAG）时正常，片上运行时不正常。如何使用嵌入式 proc 计时？

> ID：14870640
> 
> 赞同：0
> 
> 时间：2013-02-14T08:30:59.223
> 
> 标签：c, time, arm, benchmarking, processor

我正在“玩”rm48 板（Texas Instrument RM48L952，ARM CORTEX-R4F），我想为循环计时（例如）。

```
char message[20];
int temp=0;
time_t start, end, elapsed; 
sciInit();  

start = time(NULL);
  for(temp=0;temp<0xAAAAAAA;temp++);
end = time(NULL);
elapsed=end-start;
snprintf(message,20,"Duree = %f \r\n",(double)elapsed);
sciSend(scilinREG,20,(unsigned char *)message); 
```

当我使用 JTAG 链接和 CodeComposerStudio（类似于 C 的 eclipse）运行程序时，显示是正确的（~4s）。但是当我在片上运行程序（独立）时，显示不正确（~637488s）并且无论延迟是多少都一样！

所以为什么？我认为时间计算取决于系统......如何在嵌入式处理器上计时（基准程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:09:33.517

您正在使用的时钟频率是多少？您是否启用了任何中断？如果是这样，那么您的程序可能会被中断并经常跳转到 ISR，从而增加循环时间..对不起，我无权发表评论. 另外，如果您想为周期计时，最好使用内置计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T13:00:17.330

根据 ARM 关于[ARM Cortex 处理器的 Dhrystone 基准测试](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dai0273a/ar01s03s01.html)的 PDF ：

> 大多数现代 ARM 处理器都包含性能计数器。它们可以被编程来计算处理器周期的数量，这可以用来准确地计算经过的时间。必须重新定位clock() 函数才能使用此功能。[...] 在没有性能计数器和重定向的 clock() 函数的情况下，使用标准 C 库中的半主机 clock() 函数。必须连接能够支持半主机的调试器，例如 ARM RealView 调试器 (RVD) 或 DS-5 调试器。

然后，我认为 clock() 不会在芯片上运行。我将使用硬件计时器。你怎么看？我可以在片上使用clock()吗？为什么它会返回如此奇怪的持续时间（63488 等）？

# jsf - 如何在 PrimeFaces 应用程序中对 JSF 资源设置字符编码？

> ID：14870645
> 
> 赞同：1
> 
> 时间：2013-02-14T08:31:36.227
> 
> 标签：jsf, servlets, encoding, primefaces, websphere

我在**WebSphere 7上使用****PrimeFaces 3.4**和**MyFaces 2.0.7**。我正在使用过滤器将响应编码设置为 UTF-8：

 **```
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
<filter-mapping>
    <filter-name>CharsetEncodingFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

在日志中，我看到每个 JSF 资源集都调用了过滤器，包括以下资源：

```
http://localhost:9080/myapp/javax.faces.resource/myscript.js.xhtml?ln=mylib 
```

但是，当我看到响应标头时，未设置 charset，仅`Contet-Type`设置为`application/x-javascript`. 我的过滤器在 web.xml 中声明为 first，我使用的唯一其他过滤器`org.primefaces.webapp.filter.FileUploadFilter`对字符编码没有任何作用。

JavaScript 文件默认被视为 UTF-8，因为消息显示正确，但是我希望正确设置字符集。

我该怎么做？过滤器总是为我工作，为什么不在 JSF/PrimeFaces 中？我错过了这种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:46:16.307

`<filter>`我认为您的/`<servlet>`声明有些混乱

`Servlet`应该是

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping> 
```

并且`Filter`应该是

```
<filter>
    <filter-name>Your filter</filter-name>
    <filter-class>com.yourpackage.YourFilterClass</filter-class>
</filter>
<filter-mapping>
    <filter-name>Your filter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping> 
```

此外，当您使用 JSF 时，标题会在您的视图中设置，很可能是`*.xhtml`文件。您可以在那里显式设置字符编码：

```
<h:head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF8" />
</h:head> 
```

**编辑**

这是我对你的问题的误解。

Primefaces 中似乎存在一个源于使用`<h:form enctype="multipart/form-data">`. `MultipartRequest`对象使用平台的默认编码，而不是过滤器在请求对象上设置的编码。

请参阅[此答案以进行分析和解决方法](https://stackoverflow.com/questions/11190081/primefaces-fileupload-filter-with-utf8-characters-filter)。另一种解决方法是设置`UTF-8`为服务器的默认编码。**

# python - 奇怪的“对象没有属性”错误

> ID：14870649
> 
> 赞同：0
> 
> 时间：2013-02-14T08:31:48.603
> 
> 标签：python

我正在使用类进行一些 python 编码，并且遇到了一些奇怪的错误。

我有 4 个文件正在运行，每个文件都有它们的类和方法。它们运行良好，但一段时间后我得到错误，例如`CLASS_1`对象没有属性`validate`（崩溃的文件并不总是同一个文件，有时更多的文件同时崩溃）。

```
class CLASS_1(object):
    def __init__(self,SOURCE_OBJS,TARGET_OBJ):
        self.s_objList = SOURCE_OBJS
        self.t_obj = TARGET_OBJ
        self.flag = None

    def validate(self):
        for obj in self.s_objList:
            if GetElementStateBySysId(obj,2**15) == 2**15:
                if self.flag != True:
                    SetCtcEventBySysId(self.t_obj,5009)
                    SetCtcEventBySysId(self.t_obj,5011)
                    self.flag = True
                break
        else:
            if self.flag != False:
                SetCtcEventBySysId(self.t_obj,5008)
                self.flag = False

class1_list = []
class1_list.append(CLASS_1([72922,72923,72924,72925,72970,72971,72972,72973],70101))
class1_list.append(CLASS_1([72926,72927,72928,72929],70102))
class1_list.append(CLASS_1([72930,72931,72932,72933],70103))
class1_list.append(CLASS_1([72944,72945,72946,72947,72948,72949,72974,72975,72976,72977,72978,72979],70104))
class1_list.append(CLASS_1([72950,72951,72952,72953],70105))

while True:
    for obj in class1_list :
        obj.validate()
    wait(1) 
```

其他文件具有相同的功能，但类的名称是`CLASS_2`,`CLASS_3`和`CLASS_4`- 此外，它们被附加到自己的数组 (`class2_list`和`class3_list`)`class4_list`中。

# click - 调用一个新添加的 dom 元素的点击

> ID：14870650
> 
> 赞同：3
> 
> 时间：2013-02-14T08:31:58.787
> 
> 标签：click, coffeescript, jquery

我试图点击这个新创建的锚点：

```
$('.file-status').html("Finished downloading <a class='download' download href='#{fileEntry.toURL()}'>#{name}</a>")
$('.download').click() 
```

但是没有调用点击事件。不知道这是为什么？

我试图强制下载，而不是在浏览器中打开链接。像 Dropbox 一样

**编辑**

这是代码，所以更清楚：

```
fileEntry.createWriter ((fileWriter) ->
    fileWriter.onwriteend = (e) ->
        $('.file-status').html("Finished downloading <a class='download' download href='#{fileEntry.toURL()}'>#{name}</a>")
        $('.download').trigger('click');
    fileWriter.onerror = (e) ->
        console.log "Write failed: " + e.toString()
    fileWriter.write blob

), errorHandler 
```

**更新：**

因此，在从下面的答案中了解到这实际上是不可能的之后，除非服务器使用标头 Content-disposition: 附件将数据发送给我。但在我看来，这对于纯 HTML5 JS 应用程序来说是一个非常糟糕的解决方案，可能是离线的。

所以我发现了这个，它处理得非常棒！它工作得很好。链接在这里：

[http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side](http://updates.html5rocks.com/2011/08/Saving-generated-files-on-the-client-side)

希望这可以帮助那些想做同样事情的人，因为我相信有很多人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:46:13.573

向用户显示下载已完成，然后在 1 秒后重定向到下载。

```
$('.file-status').html("Finished downloading <a class='download' download href='#{fileEntry.toURL()}'>#{name}</a>");

setTimeout(function () {
   window.location.href = $('.download').attr('href');  
},1000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:40:21.603

如果我理解正确，您想模拟用户点击？如果是这种情况，您可以这样做：

```
$('.file-status').html("Finished downloading <a class='download' download href='#{fileEntry.toURL()}'>#{name}</a>");

// simulate/trigger a click
$('.download').trigger('click'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T08:38:33.663

尝试将点击事件绑定到锚标记并调用点击事件。

```
$(".download").bind("click", function (e) {
            var $a = $(this);

                    window.location = $a.attr("href");

            });

 $(".download").click(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T08:42:12.537

您还没有将事件传递给锚点，试试这个： http: [//fiddle.jshell.net/gnumA/](http://fiddle.jshell.net/gnumA/)

```
$('.file-status').html("Finished downloading 
                        <a class='download' onclick='alert(123);' href='#'>#{name}</a>")
$('.download').click(); 
```

## 更新：

```
$('.download').click(function () {
    window.location.href = $(this).attr('href');
}).click(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T08:46:57.207

试试这个插件[livequery](http://docs.jquery.com/Plugins/livequery)

```
$('.download').livequery(function(){
    $(this).click();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-06T10:55:24.783

由于这个问题是用 CoffeeScript 标记的，因此这里是 CoffeeScript 的有效答案（尽管仍然使用 jQuery）。

```
itemId = $('.modal__product-info').attr('data-item-id')
$('#size-' + itemId).click() 
```

# javascript - 如何检查每个浏览器中的缩放级别低于 100%（ctrl 和 - ）？

> ID：14870651
> 
> 赞同：4
> 
> 时间：2013-02-14T08:31:59.093
> 
> 标签：javascript, jquery, html, browser, zooming

默认情况下，在浏览器中，用户可以使用 ctrl +/- 或 ctrl scroll 来放大或缩小页面。我想知道有什么方法可以检查缩放级别低于 100% 并且不做任何事情

例如。我的代码

```
$(window).resize(function() {
    if ($(window).height() > 500 && $(window).width() > 600 && $('.royalSlider:visible').length < 1 && !isiPhone()){

        //Not allow the page size < 0
        Book.zoom_auto();
        Book.book_position();
        Book.dragdrop_init();   

        if ($(".viewportBinder").length){                   
                $("#view").css('height',$(window).height());
                $("#view").css('width',$(window).width());  
                content = element.viewport('update');     
        }
    }
calculate_zoom_factor();
}); 
```

目前窗口调整大小正在实现一些功能，但我想添加条件**仅缩放级别 >= 100%** ，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:59:51.923

[使用此参考](http://htmldoodads.appspot.com/dimensions.html)检查窗口大小

从网站上，您可以发现缩放级别低于 100%，如果

```
$(window).width() >= screen.width 
```

# qt - Qpainter drawimage不可预测的位置与旋转

> ID：14870656
> 
> 赞同：1
> 
> 时间：2013-02-14T08:32:10.077
> 
> 标签：qt, qpainter

我正在尝试在现有画家上绘制旋转图像。每次的旋转和位置都会不同。旋转工作正常，但我似乎无法预测位置。奇怪的是，如果我绘制文本而不是图像，它的工作方式会有所不同。

文本似乎从 'point' 开始的 LEFT BOTTOM 开始绘制，而图像从 'point' 的 LEFT TOP 开始。但是在旋转之后，我不明白图像会发生什么......

例子：

```
QPoint point = QPoint( 80, 200 );
painter->rotate(45);

painter->drawImage(point, QImage("/srv/...."));  // i can't predict where this goes
painter->drawText(point, "Rotated text");        // but I can predict exactly where this goes! 
```

我在想也许我需要使用 translate(x,y) 以防我使用 drawImage，但我不知道我需要使用哪种 x 和 y，具体取决于旋转及其工作原理用drawText很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T20:42:23.103

对于任何阅读的人-我又一次脑漏...我应该首先将坐标系转换到我希望图像结束的位置，然后旋转然后在 0,0 处绘制图像...

代码变为：

```
painter->translate(80,200);  // this will be our point of origin
painter->rotate(45);         // now do the rotation at this point

painter->drawImage(0,0,QImage("/srv/....")); // since we're already at our point enter 0,0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-13T03:52:31.100

对于转换，您需要执行以下操作，例如：

```
painter->translate(m_bound.width()/2.0,m_bound.height()/2.0);
painter->rotate(m_angle);
painter->translate(-m_bound.width()/2.0,-m_bound.height()/2.0);
//.... Paint what you want as normal ....// 
```

它只是平移到左上角，然后旋转并最终平移回原始位置。
***请注意，这种转换是矩阵，因此影响是相反的（line1：向后平移，line2：旋转，line3：平移到左上角）***

# macos - 为 OSX 扩展 MDM 解决方案

> ID：14870657
> 
> 赞同：1
> 
> 时间：2013-02-14T08:32:11.490
> 
> 标签：macos, mdm

我已经成功地为我的组织开发了一个适用于 iOS 设备的 MDM 平台作为 BYOD 解决方案。但是，我找不到任何资源或参考资料来说明如何根据 AirWatch 和 Mobile Iron 所做的工作将此 MDM 功能扩展到 OSX 设备。

有人愿意分享资源/参考吗？

或者我需要购买 OSX 开发者帐户才能访问这些文档？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T18:56:50.890

看看这个文件（它不是你要找的，但很接近） [http://training.apple.com/pdf/wp_osx_configuration_profiles.pdf](http://training.apple.com/pdf/wp_osx_configuration_profiles.pdf)

# php - 请求 url 并获取加密文本

> ID：14870659
> 
> 赞同：0
> 
> 时间：2013-02-14T08:32:14.877
> 
> 标签：php, encryption, request

我在 mysite 中有缓存文件，我想从远程获取所有这些文件。我在我的网站上写了一个小应用程序，这会用查询字符串回显加密文本。从远程获取文本正常，但文本有一些坏字符或某些错误。我的远程代码：

```
$req = file_get_contents($website.'Cache.php?cacheid='.$filename.'&action=getContent');
        $req = trim($req);
        $req = str_replace (array("\r\n", "\n", "\r"), '', $req);

        $decryptedText = decrypt(trim($req),'mypass') ;

    array_push($fileNameTexts,'<div style="color:red;">'.$filename.'</div><div>'.$decryptedText.'</div>');
}
$template->data['decryptedCaches'] = $fileNameTexts;   
}

 function decrypt($encrypted, $password, $salt='mysalt') {

     **file_put_contents(DIR_SYSTEM.'test'.'.txt',$encrypted );**

     $key = hash('SHA256', $salt . $password, true);
     $iv = base64_decode(substr($encrypted, 0, 22) . '==');
     $encrypted = substr($encrypted, 22);
     $decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $key, base64_decode($encrypted), MCRYPT_MODE_CBC, $iv), "\0\4");
     $hash = substr($decrypted, -32);
     $decrypted = substr($decrypted, 0, -32);
     if (md5($decrypted) != $hash) return false;
     return $decrypted;

} 
```

file_put_contents 保存正确的数据但不返回真正的解密数据。

当我尝试

```
$decryptedText = decrypt(trim('kjsfkdsjflkdsflksdjfsl'),'mypass') ; 
```

它运行正确。我尝试对某些字符进行修剪和 str_replace，但它不起作用。从请求返回的数据是否有任何错误字符？什么是问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:42:00.150

您必须转换所有坏字符，但 base64 不起作用。

解决方案：将您的字符串转换为十六进制。而不是`base64_encode`使用`bin2hex($yourvalue)`和解密它`pack("H*" ,$string);`

希望我的回答能对你有所帮助。

# php - 如何在有或没有 curl 的情况下获取 https 的内容？

> ID：14870663
> 
> 赞同：0
> 
> 时间：2013-02-14T08:32:31.043
> 
> 标签：php, curl

谁能告诉我如何使用 curl 或不使用 curl 获取 https 的内容？

# javascript - 如何在 JavaScript 函数中模拟 F1 按下

> ID：14870665
> 
> 赞同：0
> 
> 时间：2013-02-14T08:32:37.767
> 
> 标签：javascript, jquery, keyboard-shortcuts

我正在开发一个在客户现有门户中运行的 Web 解决方案。在此门户中，他们已经以不同于默认行为的方式处理 F1。

我想在我的解决方案中添加一个“帮助”图标，单击该图标会模拟按 F1。当然，我希望解决方案尽可能跨浏览器兼容，但最终版本将仅在 Internet Explorer 8 中运行（并且实际上按下了兼容性按钮 - GRRRR）。

我发现了许多处理按下 F1 的函数，但没有描述如何以编程方式模拟按下 F1。

如果有帮助，我正在使用 jQuery 1.8.2...

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:40:11.100

您可以使用它来捕获 IE 中的事件：

*   [Internet Explorer 或任何浏览器 F1 按键显示您自己的帮助](https://stackoverflow.com/questions/3405412/internet-explorer-or-any-browser-f1-keypress-displays-your-own-help)

并使用这些来触发事件：

*   [是否可以以编程方式模拟按键事件？](https://stackoverflow.com/questions/596481/simulate-javascript-key-events)
*   [http://openwritings.net/public/javascript/simulate-pressing-key](http://openwritings.net/public/javascript/simulate-pressing-key)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:42:53.033

```
jQuery.event.trigger({ type : 'keypress', which : 112 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:41:59.883

在此页面[https://github.com/jeresig/jquery.hotkeys#readme](https://github.com/jeresig/jquery.hotkeys#readme)上有这样的引用： *“其他，（IE）要么让你处理内置的快捷方式，但会在你的代码执行后添加它们的功能. 或者 (Opera/Safari) 根本不会将这些事件传递给 DOM。因此，如果您绑定 Ctrl-Q 或 Alt-F4 并且您的 Safari/Opera 窗口已关闭，请不要感到惊讶。”*

这意味着您可能无法做您想做的事情，因为按 F1 将启动 Windows 的帮助。

# php - 哪个 Joomla 版本低于 2 并接近 1.5。支持 PHP 5.4？

> ID：14870668
> 
> 赞同：3
> 
> 时间：2013-02-14T08:32:50.140
> 
> 标签：php, mysql, joomla, version, joomla1.5

我的网络托管服务提供商说他们正在从 5.2.17 更改为 php 5.4，我尝试使用 php 5.4 在本地运行我的网站，我遇到了很多问题

像这样

> 严格标准：不应静态调用非静态方法 JError::isError()，假设 $this 来自第 721 行 D:\xampp\htdocs\indoor\libraries\joomla\application\application.php 中的不兼容上下文

所以我需要升级我接近 1.5 的 joomla 版本，目前我使用的是 1.5.24

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T10:14:34.243

严格标准模式是一种 PHP 设置，它告诉它在代码执行某些技术上不正确的事情时抛出警告消息。

然而，PHP 可以处理这些问题——根据问题中的消息，PHP 能够对这种情况下的代码做出假设并继续进行。

这些严格模式警告一直存在；您在 5.4 而不是 5.2 中获取它们的原因是因为在 5.4 中它们默认启用，而在 5.2 中它们默认为关闭。

基本上，随着每个新版本的发布，PHP 对过时或糟糕的编程实践逐渐变得更加严格。这通常是一件好事，但在升级时确实会给旧代码留下问题。

但是严格模式不是强制性的；它可以被禁用。因此，如果您得到的只是有关严格模式的警告，那么解决问题的最快方法就是将其关闭。

您可以在`PHP.ini`or`.htaccess`文件中执行此操作，也可以在 PHP 本身中使用`ini_set()`.

*   PHP.ini：`error_reporting=30719`
*   .ht 访问：`php_value error_reporting 30719`
*   在您的 PHP 代码中：`error_reporting(E_ALL & ~E_STRICT);`

（30719 等价于`E_ALL`(32767) 减`E_STRICT`(2048)，但名称 E_ALL 和 E_STRICT 在 ini 文件中无效，因此您必须使用数值）

一般来说，最好将系统升级到不会导致严格模式警告的软件；也许更新版本的 Joomla 会对此有所帮助。但在短期内，这将防止出现严格模式警告，并希望能帮助您过渡到新的 PHP 版本。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T02:29:40.213

PHP 严格标准：

`"Non-static method JTable::getInstance() should not be called statically, assuming $this from incompatible context"`

[来源：http://mytecharticle.com/?p=1484](http://mytecharticle.com/?p=1484)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:37:28.203

这是您在静态调用全局函数时的内部 joomla 错误。使用调试器并在调试模式下运行您的页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T07:55:25.803

是的，最好现在升级您的 joomla 版本，因为 joomla 1.5 没有安全更新。还要记住，所有开发的新扩展都与 joomla 2.5 兼容，您不能将它用于 1.5。

# ios - 如何在cordova应用程序中存储ios应用程序状态

> ID：14870678
> 
> 赞同：0
> 
> 时间：2013-02-14T08:33:13.173
> 
> 标签：ios, jquery-mobile, cordova

我正在为ios应用程序使用cordova-2.1.0和jqueryMobile。我在应用程序中添加了电话功能。但是当我结束电话应用程序时，由于我在appName.plist中设置了UIApplicationExitsOnSuspend并且无法删除该键因为我想在用户按下主页按钮时退出应用程序。我认为电话结束后恢复应用程序的替代方法是在通话前存储应用程序状态并在通话结束后恢复该状态下的应用程序。我正在使用一个简单的插件拨号号码。请给我建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T08:24:19.907

不是 100% 确定你需要什么，但你可能想看看

1.  [SQLite 存储](http://docs.phonegap.com/en/2.8.0/cordova_storage_storage.md.html#Storage)
2.  [HTML5 离线存储](http://www.w3schools.com/html/html5_webstorage.asp)

我不知道是否有任何东西可以“序列化”你的整个应用程序并让你存储它（作为 JSON/XML/二进制文件）——如果这就是你所追求的……或者这是否可能。

# ruby - 向 Hash.new([]) 注入元素时 << 和 += 有什么区别？

> ID：14870679
> 
> 赞同：4
> 
> 时间：2013-02-14T08:33:13.977
> 
> 标签：ruby, arrays, hash

这段代码：

```
[{:id => 1,:key => 3},{:id => 2,:key => 4},{:id => 3, :key => 5}].
     inject(Hash.new([])){|h,i| h[i[:key]] << i; h} 
```

返回：

```
{} 
```

虽然这样：

```
[{:id => 1,:key => 3},{:id => 2,:key => 4},{:id => 3, :key => 5}].
     inject(Hash.new([])){|h,i| h[i[:key]] += [i]; h} 
```

返回：

```
{3=>[{:id=>1, :key=>3}, {:id=>3, :key=>3}], 4=>[{:id=>2, :key=>4}]} 
```

为什么第一个案例的工作方式不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T08:44:20.677

在您的第一个示例中，您正在修改作为散列默认值返回的数组，但该数组未定义为散列的值，并且被丢弃。

在您的第二个示例中，您正在修改默认数组，并通过方法将结果作为值分配给哈希`Hash#[]=`。请注意，这`foo += bar`是 的语法糖`foo = foo + bar`，这意味着它`hash[foo] += bar`与`hash[foo] = hash[foo] + bar`.

# android - 如何在android中通过静态图像跟踪用户的状态？

> ID：14870680
> 
> 赞同：0
> 
> 时间：2013-02-14T08:33:14.683
> 
> 标签：android, gps, maps

![在此处输入图像描述](../Images/f78cf32dfcd97eb4301973d7bccd888b.png)

如图所示，静态图像覆盖在地图视图上，我想使用 GPS 跟踪用户状态，无论他是黄色还是红色，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:37:22.103

我认为这很容易实现，但是您需要深入研究数学才能做到这一点。

不要将其视为“某人的颜色”，而是要找到您的图像中心坐标，然后查看用户与该坐标的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:41:47.477

您可以使用[`Projection`](https://developers.google.com/maps/documentation/android/v1/reference/com/google/android/maps/Projection)在屏幕上的像素与坐标之间进行转换，例如`mapView.getProjection().toPixels()`. 如果您绘制这些圆圈，您应该能够知道它在屏幕上的位置并确定用户在哪个圆圈中。

例如，您知道每个圆的直径，并且由于它们都具有相同的中心，如屏幕截图所示，您可以通过比较圆中心与三个圆的直径。

# objective-c - Cocoa - 绑定 - Tableview - 如何计算列的总和

> ID：14870689
> 
> 赞同：0
> 
> 时间：2013-02-14T08:33:55.897
> 
> 标签：objective-c, macos, core-data, cocoa-bindings

假设我有一个名为**Values**的实体，它具有三个属性：**A、B 和 SUM**。

我有一个表格视图，其中**A**列和**B 列**绑定到属性**A**和**B**。用户可以将第一列的值更改为列 ( **A,B** )，但不能更改第三列 ( **SUM** )。

现在我的问题是：用户不应该能够编辑第三列（**SUM**）。该列应仅显示**A * B**的总和。我怎样才能做到这一点？我也可以在 IB 中使用绑定吗？

非常感谢。

![总和 = A*B](../Images/e022bf8368e73bcc451102df12fb81c4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:58:15.217

我通过向我的实体子类添加一个变量来修复它：

```
- (NSUInteger) sumOf1And2 {
    NSUInteger value1 = [self.a intValue];
    NSUInteger value2 = [self.b intValue];

    return value1 + value2;
} 
```

# python - 如何使用scrapy将来自多个页面的数据收集到单个数据结构中

> ID：14870694
> 
> 赞同：9
> 
> 时间：2013-02-14T08:34:20.350
> 
> 标签：python, json, scrapy, web-crawler

我正在尝试从站点中抓取数据。数据结构为多个对象，每个对象都有一组数据。例如，有姓名、年龄和职业的人。

我的问题是这些数据在网站中分为两个级别。
例如，第一页是姓名和年龄列表，其中包含指向每个人的个人资料页面的链接。
他们的个人资料页面列出了他们的职业。

我已经有一个用 python 写的爬虫，它可以从顶层收集数据并爬过多个分页。
但是，如何从内页收集数据，同时将其链接到适当的对象？

目前，我的输出结构为 json

```
 {[name='name',age='age',occupation='occupation'],
   [name='name',age='age',occupation='occupation']} etc 
```

解析功能可以跨页面吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-14T09:11:23.407

这是您需要处理的一种方式。当 item 具有所有属性时，您需要一次 yield/return item

```
yield Request(page1,
              callback=self.page1_data)

def page1_data(self, response):
    hxs = HtmlXPathSelector(response)
    i = TestItem()
    i['name']='name'
    i['age']='age'
    url_profile_page = 'url to the profile page'

    yield Request(url_profile_page,
                  meta={'item':i},
    callback=self.profile_page)

def profile_page(self,response):
    hxs = HtmlXPathSelector(response)
    old_item=response.request.meta['item']
    # parse other fileds
    # assign them to old_item

    yield old_item 
```

# javascript - Array.prototype.slice.appy(arguments, 1) 的问题

> ID：14870695
> 
> 赞同：4
> 
> 时间：2013-02-14T08:34:25.483
> 
> 标签：javascript, node.js

1）我有以下代码：

> ```
> var callIt = function(fn) {
>     return fn.apply(this, Array.prototype.slice.apply(arguments, 1));
> }; 
> ```

在 nodejs 中调用 callIt 时，它会抱怨：

```
 return fn.apply(this, Array.prototype.slice.apply(arguments, 1));
                                                ^
TypeError: Function.prototype.apply: Arguments list has wrong type 
```

2）如果我将 callIt 更改为：

> ```
> var callIt = function(fn) {
>     return fn.apply(this, Array.prototype.slice.apply(arguments));
> }; 
> ```

Nodejs 没有抱怨，但结果不是预期的，传入了额外的第一个参数。

3）如果我将 callIt 更改为：

> ```
> var callIt = function(fn) {
>     var args = Array.prototype.slice.apply(arguments);
>     return Function.prototype.apply(fn, args.slice(1));
>     //return fn.apply(this, args.slice(1)); //same as above
> 
> }; 
> ```

它按预期工作。

4）如果我像这样在 Chrome 开发者工具控制台中运行测试：

> ```
> > var o={0:"a", 1:"asdf"}
> undefined
> > o
> Object
> 0: "a"
> 1: "asdf"
> __proto__: Object
> > Array.prototype.slice.call(o,1)
> []
> > Array.prototype.slice.call(o)
> [] 
> ```

现在 slice 不适用于类似数组的对象。

我对这些感到困惑。请解释。

我引用了以下内容： [Array_generic_methods](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array#Array_generic_methods)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T08:40:37.083

你的问题是[`apply`函数的方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)需要一个数组作为它的第二个参数——这就是你的 TypeError 来自哪里，你传递了`1`. 相反，使用`[1]`或更好的[`call`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/call)：

```
fn.apply(this, Array.prototype.slice.call(arguments, 1)); 
```

The reason why it didn't work on `{0:"a", 1:"asdf"}` is that this is *not* an array-like object - it has no `length` property. `[].slice.call({0:"a", 1:"asdf", length:2}, 0)` would do it.

# git - 在 mercurial 子存 储库中使用特定 (git) 分支

> ID：14870698
> 
> 赞同：5
> 
> 时间：2013-02-14T08:34:35.643
> 
> 标签：git, mercurial, branch, subrepos, mercurial-subrepos

我有一个善变的项目，我想在其中使用 jQuery-File-Upload。我将以下内容添加到我的`.hgsub`文件中，以便为此插件创建一个子存储库：

```
public/assets/common/js/filedrop = [git]git://github.com/blueimp/jQuery-File-Upload.git 
```

我遇到的问题是我需要`jquery-ui`在我的项目中使用这个 git repo 的分支。

有没有办法指定 git repo 的分支名称作为 hg subrepo 拉？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:14:02.923

是我自己发现的。

事实上，你不需要做任何特别的事情。在编辑`.hgsub`添加子存储库并克隆它之后，您所要做的就是将目录更改为该存储库，签出所需的分支或 rev 并使用 mercurial 提交。

就我而言，整个过程是（在终端中）：

```
$ echo "public/assets/common/js/jQuery-File-Upload = [git]git://github.com/blueimp/jQuery-File-Upload.git" >> .hgsub
$ cd public/assets/common/js/
$ git clone git://github.com/blueimp/jQuery-File-Upload.git
$ cd jQuery-File-Upload
$ git checkout jquery-ui
$ hg commit -m"ADDED: jQuery-File-Upload subrepo (jquery branch)" 
```

# c++ - 使用默认值参数丢弃函数指针上的参数会起作用吗？

> ID：14870699
> 
> 赞同：6
> 
> 时间：2013-02-14T08:34:37.283
> 
> 标签：c++, function-pointers, default-value, overloading

我正在尝试调用一个重载函数，该函数对具有默认值参数的函数指针进行操作。

```
void originalFunction1 (int a = 0) {printf("I'm #1 and a is %d",a);}
void originalFunction2 () {printf("I'm #2");}

void overloadedFunction (void (*fptr)(void))
{
  fptr();
}

void overloadedFunction (void (*fptr)(int))
{
  overloadedFunction( (void(*)(void)) fptr);
}

int main() 
{
  overloadedFunction(originalFunction1);
  overloadedFunction(originalFunction2);

  // output is:
  // I'm #1 an a is -1073743272
  // I'm #2
} 
```

正如[这个问题](https://stackoverflow.com/questions/2576411/function-pointers-with-default-parameters-in-c)的答案所指出的，默认值不是函数签名的一部分，也不能在 (function pointer -) 参数定义期间重复。正如我的示例所示，它们可以被丢弃以进行调用，但它们不会被初始化为其默认值。

有没有办法解决这个问题？

我无法修改原始函数，但我知道默认值。我可以修改主要的重载函数以及重定向。fptr 将始终只在没有参数的情况下被调用。实际上，有更多的重载函数，因为返回类型也不同，但我可以更容易地抛弃它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:54:50.510

最简洁的答案是不。强制转换是合法的，但您唯一能对结果做的就是将它们转换回原始类型。默认参数不会更改函数的签名。它们只在调用站点考虑，如果客户端不提供参数，它们将被传递。函数本身总是用完整的参数集调用，如果你通过强制转换的结果调用它显然不会。

如果您可以控制源，这里通常的答案是使用重载而不是默认参数。（我听说你应该总是使用重载而不是默认参数。）所以

```
void originalFunction1( int a ) { ... }
void originalFunction1() { originalFunction1( 0 ); } 
```

而不是你所拥有的。

或者，您也许可以使用模板玩游戏：

```
template <typename FunctionPtr>
void overloadedFunction( FunctionPtr fptr )
{
    fptr();
} 
```

但是，如果您可以使用它，我更喜欢第一个解决方案。

# ruby-on-rails - 检查延迟的作业是否在rails中运行

> ID：14870700
> 
> 赞同：16
> 
> 时间：2013-02-14T08:34:39.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

我正在设计一个状态页面，我需要在其中显示延迟的作业是否正在运行。请帮助我在代码中找到它。

我正在使用 Rails 3.0.20、ruby 1.8.7（2011-06-30 补丁级别 352）和延迟作业 3.0.4

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-07T22:02:45.210

使用**Rails 5.x**，您可以 ssh 进入您的服务器并进入应用程序中的 /current 文件夹并运行：

```
RAILS_ENV=production bin/delayed_job status 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-04-14T11:54:14.567

您可以使用

```
RAILS_ENV=production script/delayed_job status 
```

如果您在生产模式下检查

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-02-17T10:56:28.113

检查delayed_job 是否正在运行的最简单方法是在`locked_by`字段中检查。

该字段将包含工作人员或进程锁定/处理作业。

如果有作业正在运行，运行`Delayed::Job.where('locked_by is not null')` 会给你一些结果。

除此之外，您可以让**发条任务**执行此查询，以检查状态。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-14T08:40:44.723

目前，我能想到的确保`delayed_job daemon`始终运行的最佳方法是`initializer`向我们的 Rails 应用程序添加一个检查守护程序是否正在运行的应用程序。如果它没有运行，则`initializer`启动`daemon`，否则，它就让它保持原样。

因此，现在的问题是，我们如何检测到`Delayed_Job daemon`是从脚本内部运行的？

**最简单的方法——**

检查守护进程是否存在`PID file`（File.exist? ...）。如果它在那里，则假设它正在运行，否则启动它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-14T09:23:26.353

要检查作业状态等，您可以使用[delayed_job_web](https://github.com/ejschmitt/delayed_job_web) gem，它会列出所有排队的作业。并确保其始终运行安装 monit。[这是](http://railscasts.com/episodes/375-monit)railscast。[这是](https://stackoverflow.com/a/1285611/1087546)有关如何为延迟作业配置监控的更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-03T06:31:04.823

```
#!/usr/bin/env ruby

pid = ARGV[0].to_i

begin
  Process.kill(0, pid)
  puts "#{pid} is running"
rescue Errno::EPERM                     # changed uid
  puts "No permission to query #{pid}!";
rescue Errno::ESRCH
  puts "#{pid} is NOT running.";      # or zombied
rescue
  puts "Unable to determine status for #{pid} : #{$!}"
end 
```

检查[如何确定是否在 Linux 上使用 Java 或 JRuby 运行不同的进程 ID？](https://stackoverflow.com/questions/141162/how-can-i-determine-if-a-different-process-id-is-running-using-java-or-jruby-on/200568#200568)

# objective-c - 给定两个矩形，返回另一个表示重叠区域的矩形

> ID：14870703
> 
> 赞同：5
> 
> 时间：2013-02-14T08:35:06.120
> 
> 标签：objective-c, algorithm

我需要为矩形类创建一个相交方法，它接受一个矩形并返回另一个表示重叠区域的矩形。

例如，给定：

![在此处输入图像描述](../Images/76fd2ef149f7c10c87065862e2b80fef.png)

如果它们重叠，我应该返回一个点 (400,420) 宽度 = 50 高度 = 60 的矩形。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T08:41:26.470

尝试使用该`CGRectIntersection`函数，它将返回两个`CGRect`实例的交集：

```
CGRect CGRectIntersection (
   CGRect r1,
   CGRect r2
); 
```

这里详细介绍了很多有用的功能：

[http://blogs.oreilly.com/iphone/2008/12/useful-core-graphics-functions.html](http://blogs.oreilly.com/iphone/2008/12/useful-core-graphics-functions.html)

# android - 应用程序没有指定主题时会发生什么

> ID：14870705
> 
> 赞同：1
> 
> 时间：2013-02-14T08:35:10.473
> 
> 标签：android, themes

我被要求让一个新的 android 应用程序看起来与我们的一个旧应用程序相同，旧产品基于 SDK 8 版。在清单文件中没有指定主题，但是，由于某种原因，主题看起来像是正在应用，所有活动的背景都是黑色的，按钮控件和进度条是黄色的。我在应用程序中看不到指定主题的任何地方，除了清单文件之外，还有其他地方可以查看吗？

我试图在没有指定主题的情况下创建一个针对 SDK 8 的新应用程序，但它似乎默认为具有白色背景和蓝色进度条并突出显示的标准 android 主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:40:52.460

SDK 中使用的主题不一定与设备上出现的主题相同。

当您没有指定“这是您的情况”的主题时，将使用默认主题。几乎每个安卓设备都有自己的默认主题。

因此，如果您追求统一的外观，则必须创建自己的主题。

# javascript - 当在 div 中删除动态选项卡时，至少有一个活动类

> ID：14870706
> 
> 赞同：0
> 
> 时间：2013-02-14T08:35:15.063
> 
> 标签：javascript, jquery, html, css

我会尽量具体一点。我有一个导航栏，它可以动态添加选项卡，单击附加选项卡后，也可以通过单击关闭按钮删除这些附加选项卡。这是HTML：

```
<ul id="nav-tabs" data-tabs="tabs" >
 <li id="test"  class="active">
  <a href="#home" data-toggle="tabs" >
   <img src="assets/img/button_home_selected3.png" class="hover" width="83" />
    <span>Home<button type="button" class="close">&times;</button></span>
  </a>
 </li>
</ul> 
```

li 标签是动态添加和删除的，li 标签中的活动类显示不同的图像，使标签可区分，因此活动类在 li 标签之间切换。

要关闭选项卡，脚本是：

```
$('.close').click(function(e) {
 e.preventDefault();
 var panelId = $(this).closest("li").remove().attr("aria-controls");
 $("#tab" + panelId).remove();
}); 
```

即使用户删除了活动选项卡，我也只想要一个活动选项卡。目前，当我关闭活动选项卡时，没有活动类，使选项卡相似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:49:31.587

你可以试试这个：

```
$('.close').click(function(e) {
    e.preventDefault();
    var panelId = $(this).closest("li").remove().attr("aria-controls");
    $("#tab" + panelId).remove();
    $("#nav-tabs").children("li").last().addClass("active");
}); 
```

如果您希望第一个选项卡处于活动状态，请将其替换为`.last()`。`.first()`:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:52:49.170

关闭选项卡时，获取选项卡的索引。如果是最后一个，则将活动类添加到最后一个选项卡，如果是第一个，则首先，如果在中间的某个位置，则从关闭的选项卡的左侧或右侧取一个。

```
$(".close").on("click", function() {
      var elem = $(this).closest("li");

      if (elem.hasClass("active")) {
          var idx = elem.index(),
              remainingTabs = $("li");

          if (idx <= remainingTabs.length) {
              $(remainingTabs.get(idx - 1)).addClass("active");
          } else if (idx == 0) {
              $(remainingTabs.get(0)).addClass("active");
          }
      }

      // remove current tab
      $(".close", elem).unbind();
      elem.remove();
} 
```

# php - 为移动应用构建的 REST API

> ID：14870713
> 
> 赞同：2
> 
> 时间：2013-02-14T08:35:47.010
> 
> 标签：php, android, ios, api

*我不确定如何正确解决这个问题，但我知道我在这里很困惑。我并不是要您为我编写代码或提供脚本，我所要求的只是指导。*

我已经设置了一个 API（用 PHP 构建的框架）来为应用程序提供资源，主要是 iOS 和 Android。我还阅读了有关 Amazon REST API、Facebook oAuth、Twitter xAuth 等的实现。我关心的是从应用程序的角度来看的身份验证*（可能是加密） 。*

因此，最初，用户将下载该应用程序然后安装它。用户在应用程序中看到的第一件事是登录页面：**用户名**和**密码**。用户填写后提交。这就是我的问题所在。我担心应用程序如何将用户名和密码传递给 API。当然，凭据必须加密，以便我可以在服务器上对其进行解密，但我对具体过程感到困惑。

我不是移动开发人员，所以也许这就是我对这个过程一无所知的原因。请赐教。

编辑：

登录时的用户名和密码不是用于访问 API 的凭据，而是他帐户的凭据，因此 API 知道用户是否有效，然后返回其个人资料的详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:00:05.080

除了滚动您自己的身份验证之外，您可能还想利用其他登录提供程序，例如 Facebook 和 Twitter。这将要求您在这些提供程序中设置应用程序配置，以重定向回您的应用程序。[https://softwareengineering.stackexchange.com/questions/78587/facebook-and-twitter-authentication-from-mobile-applications](https://softwareengineering.stackexchange.com/questions/78587/facebook-and-twitter-authentication-from-mobile-applications)

我还在 REST 中的身份验证基本指南上找到了此页面 - [http://www.infoq.com/news/2010/01/rest-api-authentication-schemes](http://www.infoq.com/news/2010/01/rest-api-authentication-schemes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:45:57.743

当然，这取决于您对安全性的需求，处理汇款的银行将进一步扩展以提供安全性，但总的来说，以下内容至少应该为您的 API 提供安全性，以防任何不会花费数百小时的人它或者是专业黑客；

首先，您可以通过 https 进行通信，这几乎不需要您付出任何努力。其次，您可以使用只有您和您的 API 知道的散列和盐（在其之前和/或之后的随机字符，包括散列**之前的盐）对密码进行散列。**你不解密它 - 你没有理由知道某人的密码，即使是管理员。实际上，如果你使用一些标准的东西，比如 MD5 或 SHA1，你甚至无法解密它。您可以简单地比较 hashed+salted 值以了解是否允许某人登录。

我想你可以对用户名做同样的事情，但不是必须的。

再说一遍：这不是完全证明的反黑客和安全方法，但它可以满足大多数 API 的安全需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:54:34.270

许多应用程序使用 HTTP 身份验证来使用 API - HTTP 基本就是它所说的，非常基本且不是很安全。更好的是使用 http-auth，它可以安全地使用用户名和密码来保护通信。

基本上你只需要配置你必须使用 http-auth 进行 API 调用的任何服务器，并确保它知道你的帐户。

在 iOS 端，使用像 AFNetworking 这样的库来处理与服务器的通信，您可以向库传递用户名/密码以用于验证调用。

我还建议将用户名/密码存储在应用程序钥匙串中，这样用户就不必每次都输入它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:09:44.260

正如其他人所说，您可以使用哈希算法（如 MD5）对密码进行哈希处理。请注意[，这不是加密，而是散列](https://stackoverflow.com/questions/4948322/fundamental-difference-between-hashing-and-encryption-algorithms)。您无需将明文密码发送到服务器（或存储它，您存储哈希）。您没有说明用户可以如何以及在何处创建他们的帐户，但您需要确保用于创建密码哈希的算法是相同的。

# assembly - 在缓冲区溢出中清理堆栈

> ID：14870715
> 
> 赞同：1
> 
> 时间：2013-02-14T08:35:55.380
> 
> 标签：assembly, gdb, stack-trace, buffer-overflow, x86

我仅出于教育目的执行缓冲区溢出。我有一个名为的函数，它使用gets 接收来自终端的输入。我想强制此函数将特定值“ `0x524ddf1e`”返回给调用它的函数，并使其不知道堆栈已被修改。这是在 IA32 上运行的 C 代码。我的思考过程如下：

```
1\. b8 1e df 4d 52       mov    $0x524ddf1e,%eax
2\. bd f8 72 ff ff       mov    $0xffff72f8,%ebp
3\. 68 12 8a 04 08       push   $0x8048a12
4\. c3                   ret 
```

第 1 行。我想将我的特定值移动到 %eax。

第 2 行。我中断函数并将 ebp 读取为 0xffff72f8，因此我想将其返回以保持堆栈清洁。

第 3 行。我想返回在正确位置调用我的函数。

第 4 行，返回。

我的堆栈冻结进入函数的转储是：

```
(gdb) x /16wx 0xffff72a4
0xffff72a4: 0x00681fc4  0x00671a62  0x00682ab0  0xf7ffc6b0
*(VVVV 0xffff72b4 is where my exploit code is written VVVV)*
0xffff72b4: 0x00000001  0x00000001  0xffff7304  0x080483c8
0xffff72c4: 0x0804a108  0xffff72f8  0x08048a12  0x00000000
0xffff72d4: 0x00000000  0xffff72f8  0x006ce7d0  0xffffd5b8 
```

%ebp 和 %esp 是：

```
esp            0xffff72a0   0xffff72a0
ebp            0xffff72c8   0xffff72c8 
```

当我考虑编写原始字节码（稍后被解释）时，我执行以下操作：

```
b8 1e df 4d 52 db f8 72 ff ff 68 12 8a 04 08 c3 08 a1 04 08 f8 72 ff ff b4 72 ff ff
|---------------exploit code-------------------||------keep same------||-where exploit code starts-| 
```

`Keep same`是我刚刚决定在上面的堆栈转储中保持原始值与以前相同的地方。

我想我在编写程序集时或在尝试编写要注入的字节码时误解了一些东西。我在 0xffff72b9 看到一个 SIGILL。任何建议表示赞赏。

# maven - org.apache.catalina.LifecycleException: PWC2769: Manager 尚未在 maven glassfish 插件 (3.1) 中启动

> ID：14870718
> 
> 赞同：3
> 
> 时间：2013-02-14T08:36:09.920
> 
> 标签：maven, glassfish-3, glassfish-embedded

我使用了 maven glassfish 插件（3.1），我得到了这个错误。所以帮助我......

错误 ：

```
Feb 14, 2013 1:54:31 PM org.apache.catalina.core.StandardContext start
SEVERE: PWC1305: Exception during cleanup after start failed
org.apache.catalina.LifecycleException: PWC2769: Manager has not yet been started
        at org.apache.catalina.session.StandardManager.stop(StandardManager.java:872)
        at org.apache.catalina.core.StandardContext.stop(StandardContext.java:5509)
        at com.sun.enterprise.web.WebModule.stop(WebModule.java:529)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5323)
        at com.sun.enterprise.web.WebModule.start(WebModule.java:500)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:755)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1980)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1630)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:100)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:286)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:360)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
        at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.executeCommand(CommandExecutorImpl.java:118)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:97)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:88)
        at org.glassfish.maven.PluginUtil.doDeploy(PluginUtil.java:106)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.glassfish.maven.AbstractDeployMojo.doDeploy(AbstractDeployMojo.java:171)
        at org.glassfish.maven.RunMojo.execute(RunMojo.java:62)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)

Feb 14, 2013 1:54:31 PM org.apache.catalina.core.ContainerBase addChildInternal
SEVERE: ContainerBase.addChild: start:
org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/Str
ing;[Ljava/lang/Object;Ljava/lang/Throwable;)V
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5328)
        at com.sun.enterprise.web.WebModule.start(WebModule.java:500)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:917)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:755)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1980)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1630)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:100)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:286)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:360)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
        at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.executeCommand(CommandExecutorImpl.java:118)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:97)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:88)
        at org.glassfish.maven.PluginUtil.doDeploy(PluginUtil.java:106)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.glassfish.maven.AbstractDeployMojo.doDeploy(AbstractDeployMojo.java:171)
        at org.glassfish.maven.RunMojo.execute(RunMojo.java:62)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/
lang/Throwable;)V
        at org.apache.commons.logging.impl.SLF4JLocationAwareLog.info(SLF4JLocationAwareLog.java:159)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:272)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.contextListenerStart(StandardContext.java:4690)
        at com.sun.enterprise.web.WebModule.contextListenerStart(WebModule.java:534)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:5305)
        ... 50 more

Feb 14, 2013 1:54:31 PM com.sun.enterprise.web.WebApplication start
WARNING: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.slf4j.spi.Lo
cationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwa
reLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:921)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:901)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:755)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1980)
        at com.sun.enterprise.web.WebContainer.loadWebModule(WebContainer.java:1630)
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:100)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:286)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:360)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
        at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.executeCommand(CommandExecutorImpl.java:118)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:97)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:88)
        at org.glassfish.maven.PluginUtil.doDeploy(PluginUtil.java:106)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.glassfish.maven.AbstractDeployMojo.doDeploy(AbstractDeployMojo.java:171)
        at org.glassfish.maven.RunMojo.execute(RunMojo.java:62)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)

Feb 14, 2013 1:54:31 PM org.glassfish.internal.data.ModuleInfo start
SEVERE: Exception while invoking class com.sun.enterprise.web.WebApplication start method
java.lang.Exception: java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.
slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
        at com.sun.enterprise.web.WebApplication.start(WebApplication.java:130)
        at org.glassfish.internal.data.EngineRef.start(EngineRef.java:130)
        at org.glassfish.internal.data.ModuleInfo.start(ModuleInfo.java:269)
        at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:286)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
        at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
        at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:360)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:370)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1067)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:96)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1247)
        at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1235)
        at com.sun.enterprise.admin.cli.embeddable.CommandExecutorImpl.executeCommand(CommandExecutorImpl.java:118)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:97)
        at com.sun.enterprise.admin.cli.embeddable.DeployerImpl.deploy(DeployerImpl.java:88)
        at org.glassfish.maven.PluginUtil.doDeploy(PluginUtil.java:106)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.glassfish.maven.AbstractDeployMojo.doDeploy(AbstractDeployMojo.java:171)
        at org.glassfish.maven.RunMojo.execute(RunMojo.java:62)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)

Feb 14, 2013 1:54:31 PM org.glassfish.api.ActionReport failure
SEVERE: Exception while loading the app
Feb 14, 2013 1:54:31 PM org.glassfish.deployment.admin.DeployCommand execute
SEVERE: Exception while loading the app : java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.No
SuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V
PlainTextActionReporterFAILUREDescription: deploy AdminCommandError occurred during deployment: Exception while loading the app : java.lang.IllegalStateExcept
ion: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Mark
er;Ljava/lang/String;ILjava/lang/String;[Ljava/lang/Object;Ljava/lang/Throwable;)V. Please see server.log for more details.
    [name=server 
```

# c# - 带有表单的mvc4 webgrid单元格，代码不会呈现 标签

> ID：14870719
> 
> 赞同：0
> 
> 时间：2013-02-14T08:36:11.840
> 
> 标签：c#, asp.net-mvc, webgrid, html.beginform

我在 MVC4 中有一个 webgrid，我想要一个自定义列有提交按钮 - 将消息重新发送给特定的人。

列格式的代码如下所示：

```
format: @<text>
@foreach (DataEntity entity in item.Entities)
{
    using (Html.BeginForm("Resend", "Messages", new {MsgId = entity.MsgID }, FormMethod.Post))
    {
        <input Type="submit" value="@entity.PersonName" />
    }
}
</text> 
```

此代码是从另一台 PC 手动复制的，因此请忽略任何明显的语法错误。

我的问题是 HTML 页面没有任何表单标签，尽管您可以看到我正在使用 Html.BeginForm ...

有谁知道为什么会这样？

谢谢，阿维。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:51:48.617

Html.BeginForm 不返回字符串，它直接写入页面。这就是为什么您没有在列内容中获得表单标签的原因。

解决方案是手动编写标签。

编辑：

```
<form action="/Messages/Resend" method="post">
    <input type="hidden" name="outgoingMsgId" value="@entity.MsgID" />
    <input type="submit" value="@entity.PersonName" />
</form> 
```

# c# - 将 XML 数据转换为列表

> ID：14870722
> 
> 赞同：0
> 
> 时间：2013-02-14T08:36:23.427
> 
> 标签：c#, xml

如何将[http://www.floatrates.com/daily/USD.xml](http://www.floatrates.com/daily/USD.xml)转换为 c# 中的列表

到目前为止，我有：

```
protected void btnUpdate_Click ( object sender, EventArgs e ) {

    XmlDocument xmlDoc = new XmlDocument ( );
    xmlDoc.Load ( "http://www.floatrates.com/daily/USD.xml" );
    XmlNodeList itemNodes = xmlDoc.SelectNodes ( "//channel/title/link/description/language/pubDate/lastBuildDate/item" );
    foreach ( XmlNode itemNode in itemNodes ) {

        XmlNode currencyNode = itemNode.SelectSingleNode ( "targetCurrency" );
        XmlNode rateNode = itemNode.SelectSingleNode ( "exchangeRate" );

        GridView2.DataSource = lstdata;
        GridView2.DataBind ( );
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:59:47.200

我将创建一个对象来保存这些值并使用 Linq2XML 来查询 xml 文档。

```
 protected void btnUpdate_Click ( object sender, EventArgs e ) 
    {
        GridView2.DataSource = GetFloatRates();
        GridView2.DataBind ( );
    }

    private List<FloatRateItem> GetFloatRates()
    {
        XDocument xmlDoc = XDocument.Load("http://www.floatrates.com/daily/USD.xml");
        var floatRates = xmlDoc.Descendants("channel");

        var items = from i in floatRates.Elements("item")
                    select new FloatRateItem
                    {
                        Title = i.Element("title").Value,
                        Link = i.Element("link").Value,
                        Description = i.Element("description").Value,
                        PubDate = i.Element("pubDate").Value,
                        BaseCurrency = i.Element("baseCurrency").Value,
                        TargetCurrency = i.Element("targetCurrency").Value,
                        ExchangeRate = i.Element("exchangeRate").Value
                    };

        return items.ToList();
    }

    class FloatRateItem
    {
        public string Title { get; set; }
        public string Link { get; set; }
        public string Description { get; set; }
        public string PubDate { get; set; }
        public string BaseCurrency { get; set; }
        public string TargetCurrency { get; set; }
        public string ExchangeRate { get; set; }

        public override string ToString()
        {
            return string.Format(@"<item>
<title>{0}</title>
<link>{1}</link>
<description>{2}</description>
<pubDate>{3}</pubDate>
<baseCurrency>{4}</baseCurrency>
<targetCurrency>{5}</targetCurrency>
<exchangeRate>{6}</exchangeRate>
</item>", Title, Link, Description, PubDate, BaseCurrency, TargetCurrency, ExchangeRate);
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:50:12.947

这将做你想要的。修改该`ds.Tables[0].Rows`行以从 XML 中获取所需的数据。

```
 public static List<string> ProcessXMLDoc()
 {
      XmlDocument xDoc = new XmlDocument();
      xDoc.Load("http://www.floatrates.com/daily/USD.xml");
      List<string> xmlList = new List<string>();
      StringReader sr = new StringReader(xDoc.OuterXml);

      DataSet ds = new DataSet();
      ds.ReadXml(sr);

      foreach (DataRow row in ds.Tables[0].Rows)
      {
           if (!string.IsNullOrWhiteSpace(row[0].ToString()))
           {
                xmlList.Add(row[0].ToString());
           }
      }

      return xmlList;
  } 
```

# java - Eclipse远程调试，看不到对象的属性

> ID：14870725
> 
> 赞同：1
> 
> 时间：2013-02-14T08:36:48.420
> 
> 标签：java, eclipse, debugging

我正在调试我的远程应用程序，但我很困惑，因为我看不到某些对象的属性。该对象的来源是可用的。

它表明没有属性！

你能给我一些建议吗？

顺便说一句，我可以看到其他对象的属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:45:06.103

Java 编译器有一个功能可以编译带有或不带有“行号”等调试信息的类。

如果您正在调试的类是在没有调试 if 规范的情况下编译的，则无法调试源代码。您只会看到 *.class 描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:45:09.083

这可能有 3 个原因。

1.  您的某些类是`-g:none`使用`javac`. 例如，它与 JDK 类有关。
2.  您的 IDE 和您尝试调试的应用程序中有不同版本的类。
3.  Eclipse 调试器中的错误。

所以，这里有解决方案。

1.  使用调试信息编译类。如果这些不是你的课，请接受我的哀悼。
2.  确保您在 IDE 中运行相同版本的类。
3.  再次尝试调试，重新启动 Eclipse，刷新，清理工作区，创建新的工作区...

# iphone - 如何在 iOS 中创建“扩展”菜单？

> ID：14870726
> 
> 赞同：0
> 
> 时间：2013-02-14T08:36:50.777
> 
> 标签：iphone, ios, menu, customization

我需要在我的应用程序上有一个菜单选项，但是我的应用程序的各种选项太多，无法放入屏幕。

我发现微妙的是，我在各种应用程序中看到的选项就像扩展按钮，按下时会显示更多设置。

我附上了一张“扩展”菜单的图片，在点击之前和之后。

![在此处输入图像描述](../Images/2caa6e8bd1a81a1cd875a7cfce9abd36.png)

![在此处输入图像描述](../Images/a30228aa8da12373da6e461a6fc04e61.png)

如您所见，这样的选项看起来更加微妙。
有谁知道我如何在我的应用程序中实现类似的东西？
它是完全定制的吗？
有没有你知道的教程，关于如何在这种效果上取得成功？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:54:33.670

[这里](https://github.com/raihan/Drop-Down-Demo-iOS)和[这里](https://github.com/katokichisoft/KSPopoverView)有一些很好的例子可以满足你的要求，当然还有一些修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:56:47.260

我建议使用 TableView，每个单元格都有设置选项，并在单击单元格时添加和删除带有动画的行；）或创建不同的视图并最初隐藏它们，然后点击任何设置按钮，只需添加带有打开动画的视图并设置框架也。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:39:03.970

试试这个[https://github.com/mrdepth/tools/tree/master/CollapsableTableView](https://github.com/mrdepth/tools/tree/master/CollapsableTableView)

您可以使用此控件显示和隐藏菜单。

# jquery - 形成嵌套对象

> ID：14870728
> 
> 赞同：1
> 
> 时间：2013-02-14T08:37:00.227
> 
> 标签：jquery, json, backbone.js

我需要创建一个这样的 JSON 结构：

```
name: 'xyz',
relatives: [ {name:'abc',age:'123'},{name:'def',age:'123'}..... ] 
```

目前我有这个`window.Persons.name='xyz'`

我有一个循环，在每次迭代中给我“亲戚”属性。我需要做这样的事情：

```
window.Persons.items= //add some structure here 
```

这应该怎么做？如果需要，将其嵌套到任何级别的过程是什么。我的循环结构是这样的：

```
this.$('form').each(function(){
window.Persons.items= // add some structure here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:45:56.490

如果您从`form`某处获得亲属信息，则可以将信息附加到亲属数组

```
this.$('form').each(function(){
    var relative = $(this)....;
    window.Persons.relatives.push({ name: relative.name, age: relative.age });
} 
```

如果你想在一个`items`数组中收集多个人，你可以追加一个人

```
window.Persons.items.push({ name: 'xyz', relatives: [] }); 
```

然后将亲属附加到这个`relatives`数组中。

# themes - 使用从标题栏到工具栏底部的单个光栅图像

> ID：14870730
> 
> 赞同：1
> 
> 时间：2013-02-14T08:37:05.377
> 
> 标签：themes, gtk3

关于 GTK3 主题.. 我想使用一个单一的 png 图像，将标题栏覆盖到工具栏的底部。有什么办法可以做到这一点？谢谢。

# regex - 正则表达式匹配 Java 源文件的成员声明

> ID：14870742
> 
> 赞同：1
> 
> 时间：2013-02-14T08:37:46.097
> 
> 标签：regex, parsing, apex-code

在不存在解析器和其他高级方法的类 Java 语言中，我想解析和评估源文件。它是[专有云平台 Salesforce.com 的 Apex 语言](http://www.salesforce.com/us/developer/docs/apexcode/index.htm)。我知道它基于 Antrl/Java，但无法从平台内部解析它，因为我想用 Apex 代码解析 Apex 代码，唯一的方法是正则表达式。

在读取源文件时，我希望（通过使用正则表达式）匹配并提取所有有趣的部分以绘制 UML 类图：

*   类声明
*   方法声明
*   内部类声明

我想找到它们，并通过使用正则表达式组，我希望能够直接访问匹配字符串的一部分。这些部分是：

*   是公有的还是私有的？
*   它是静态的、抽象的还是默认的？
*   是类还是接口？
*   方法名是什么？
*   返回类型是什么？
*   参数列表是什么？

# version-control - Mercurial ssh 在某个标签名称处发送修订

> ID：14870745
> 
> 赞同：0
> 
> 时间：2013-02-14T08:37:55.080
> 
> 标签：version-control, mercurial, dvcs

我希望 mercurial 服务器在任何用户设置的特定标签名称上通过 ssh 向某个生产服务器（客户方）发送一些修订。与持续集成平台非常相似的东西，它按特定标准向代理推送更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:57:50.687

首先，如果有人设置标签，您将无法集中执行任何操作。Mercurial 是去中心化的，因此除非您的所有开发人员在他们的机器上为此安装挂钩，否则您无法从他们的本地操作中启动任何操作。

另一方面，您可以在他们推送到的服务器上安装一个钩子，如果 .hgtags 文件在最新版本中发生了更改，则将修订推送到其他客户端或服务器（并且您可以准确检查它是如何更改的从钩子代码）。

# magento - 添加一个简单到可配置的自动

> ID：14870748
> 
> 赞同：3
> 
> 时间：2013-02-14T08:38:09.343
> 
> 标签：magento, add, configurable

我有这样的代码：

```
$product_config = new Mage_Catalog_Model_Product_Type_Configurable();
$product_config->setProduct($product_grouped);
$assigned_products = $product_config->getUsedProducts(); 
```

所以我创建了一个新配置，设置产品并获取所有使用过的产品。

这是我的问题：我想将另一个产品添加到“二手产品”的“列表”中，所以当我稍后保存产品时，新产品也应该以新价格添加为新的“可配置选项”。

使用分组产品更容易，但我也找不到任何方法可以使用可配置产品来做到这一点:(

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:33:01.257

您可以使用产品可配置类型资源模型将简单产品添加到可配置中，例如：

```
$configurableId = 135;
$simpleId = 91;
$configurableProduct = Mage::getModel('catalog/product')->load($configurableId);

$simples = $configurableProduct->getTypeInstance('configurable', $configurableProduct)
    ->getUsedProductIds();
$simples[] = $simpleId;

Mage::getResourceModel('catalog/product_type_configurable')
    ->saveProducts($configurableProduct, $simples); 
```

# javascript - 正则表达式的一部分在 javascript 中不匹配

> ID：14870750
> 
> 赞同：0
> 
> 时间：2013-02-14T08:38:38.627
> 
> 标签：javascript, regex, replace

我在另一个问题中发布了这个，但我认为它是分开的，所以我做了另一个。

replace 方法中有正则表达式。表达式都正确匹配并替换。这个`replace(/\(he\/\she\)/g,"he")`和这个`replace(/\(he\/\she\)/g,"she")`

不要替换...我不知道为什么。这是代码。

```
function replaceGender(name, gender, comment) {

  if(gender == "m")
  {
    comment = comment.replace(/\(name\)/g, name).replace(/\(He\/She\)/g,"He").replace(/\(His\/\Her\)/g,"His").replace(/\(his\/\her\)/g,"his").replace(/\(he\/\she\)/g,"he").replace(/\(him\/\her\)/g,"him");
  }
  else if(gender == "f")
  {   
    comment = comment.replace(/\(name\)/g, name).replace(/\(He\/She\)/g,"She").replace(/\(His\/\Her\)/g,"Her").replace(/\(his\/\her\)/g,"her").replace(/\(he\/\she\)/g,"she").replace(/\(him\/\her\)/g,"her");
  }

  return comment;
}; 
```

这是一些输入“她阅读清晰且自信。她的写作技巧非常适合她的水平。我相信如果 Jenna 继续努力（他/她）将来会成为一个强大的英语演讲者。”

其他所有东西都替换好了..只是（他/她）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:54:31.767

`/\(he\/\she\)/g`将替换“（他/他）”（因为`\s`匹配任何空格）。

`/\(he\/she\)/g`如果您想替换“（他/她）” ，应该是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:18:58.640

这将工作..

```
function replaceGender(name, gender, comment) {

  if(gender == "m")
  {
    comment = comment.replace(/\(name\)/g, name).replace(/\(He\/She\)/g,"He").replace(/\(His\/Her\)/g,"His").replace(/\(his\/her\)/g,"his").replace(/\(he\/she\)/g,"he").replace(/\(him\/her\)/g,"him");
  }
  else if(gender == "f")
  {   
    comment = comment.replace(/\(name\)/g, name).replace(/\(He\/She\)/g,"She").replace(/\(His\/Her\)/g,"Her").replace(/\(his\/her\)/g,"her").replace(/\(he\/she\)/g,"she").replace(/\(him\/her\)/g,"her");
  }
  return comment;
}; 
```

# python - Windows 上的默认模拟器

> ID：14870752
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:38:41.103
> 
> 标签：python, windows

在 Windows 机器上安装 Python 时默认附带的 Python 模拟器的名称是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:45:46.553

没有 Python 模拟器。但是，如果您指的是解释器，那么它的文件名是`python.exe`或`pythonw.exe`- 应用程序没有嵌入实际程序名称的元数据。该项目本身被称为*CPython*，因为它是用 C 编写的 Python 实现。

# x++ - 抓不抓

> ID：14870756
> 
> 赞同：1
> 
> 时间：2013-02-14T08:39:14.290
> 
> 标签：x++, dynamics-ax-2009

我在 X++ 中创建一个 ODBCConnection，访问一个非 AX-SQL 对象。一切正常，如果通过 Windows-Auth 或用户名/密码组合建立连接，已授予对 db 的访问权限。

唯一的不足是，`catch`-part 不会被调用，当

```
connection = new OdbcConnection( loginProperty ); 
```

被调用并抛出错误。

```
try
{
    connection = new OdbcConnection( loginProperty );
}
catch ( Exception::CLRError ) 
// also tried Exception::Error and catch without brackets
{
    info ('error occured...' );
} 
```

我想，也许 Exception-type 没有被明智地选择，对吧？但是不应该`Exception::Error`或没有参数的情况下捕获**所有**内容吗？ [MSDN 说，如果无法建立连接](http://msdn.microsoft.com/en-us/library/aa554029%28v=ax.50%29.aspx)，则会引发异常。我不应该抓住它吗？

有什么错误/误解？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T10:23:18.423

以下链接描述了正确的 CLR 和互操作异常捕获：

[http://msdn.microsoft.com/en-us/library/ee677495(v=ax.50).aspx](http://msdn.microsoft.com/en-us/library/ee677495%28v=ax.50%29.aspx)

# mysql - 尽管被告知停止，Windows MySQL 服务仍继续启动

> ID：14870758
> 
> 赞同：1
> 
> 时间：2013-02-14T08:39:19.430
> 
> 标签：mysql, windows, service

我在 Windows Server 2008（64 位）上运行的 MySQL Server 5.5.11（64 位）有问题。

我进行了全新安装，选择默认选项并将其安装为 Windows 上的服务。服务器运行时一切正常。然后将服务器设置为主服务器的从属服务器。

由于该服务器是从服务器，因此我想偶尔将其关闭以备份数据库（不需要有关如何进行热备份的有用提示:)）。

**我使用“NET STOP MYSQL”命令，服务器停止。**

**问题：服务器停止几分钟后，它会自动重新启动！没有发出任何命令（据我所知由我发出）这样做！**

检查 Windows 服务，我看到它被设置为“自动”启动类型，但我也尝试将其设置为手动 - 几分钟后它仍然重新启动。MySQL 错误日志中没有错误。我看到关闭完成消息，然后在大约 2 分钟后看到服务器启动时收到的正常消息。

任何人都知道使 MySQL 服务在 Windows 上自动重新启动的任何其他设置吗？

编辑：找到罪魁祸首.. 动机未知：根据事件查看器不断重启服务的是服务控制管理器。然而，触发它启动服务的原因仍然未知。

编辑 2：删除并重新安装了该服务，尽管被告知停止，它仍会继续重新启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:39:28.110

事实证明，这是我们的托管合作伙伴提供的一项监控服务，它通过自动启动（他们认为）应该运行的服务来“帮助”我们。

我使用 netstat 发现了这条线索，并看到一台未知的计算机不断连接到服务器。

# cart - Woocommerce：尝试通过 SKU 在自定义产品页面上对产品进行排序

> ID：14870759
> 
> 赞同：0
> 
> 时间：2013-02-14T08:39:24.007
> 
> 标签：cart, woocommerce

WooCommerce：创建了一个自定义产品页面并使用 Woocommerce 短代码来显示产品。我需要按特定顺序购买产品。尝试对 SKU 编号进行升序和降序。没运气。

例如。[产品 skus="SKU4100,SKU4101,SKU4102,SKU4103" orderby="SKU" order="desc" ]

尽管这些数字在页面和数据库中都是按顺序排列的，但它并没有按此顺序显示。

任何想法，（有 500 多个项目分布在 12 页上。这个问题只出现在某些页面上。）猜猜主要问题是，我如何专门订购产品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T15:05:57.363

我在我的页面上遇到了同样的问题，只是更正了它。我只有一个产品类别无法正确排序，它与任何其他产品的唯一区别是它以与另一种产品和类别相同的字母开头，并且按字母顺序排在第二位。我更改了产品和类别的名称（我单独留下了链接）并且它自己更正了。

# vbscript - 在 VB 脚本中使用 VB 接口

> ID：14870761
> 
> 赞同：0
> 
> 时间：2013-02-14T08:39:32.893
> 
> 标签：vbscript, vb6, hp-quality-center

我从事 HPQC 的工作流脚本，并希望将示例中给出的一些 VB 代码移植到 VB 脚本中。我无法让接口在 VB 脚本中工作。

VB代码：

```
 Dim iscp           As ISupportCopyPaste 
 Dim clipboard      As String

 clipboard = iscp.CopyToClipBoard(sourceFolder.NodeID, 0, sourceFolderPath) 
```

我无法在 VB 脚本中将 iscp 声明为 ISupportCopyPaste。

我尝试了一些网络参考，但无法了解它在 VB 脚本中的工作原理。

请分享你的想法..可能会指出我正确的方向..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T16:14:49.663

[我在http://go-gaga-over-testing.blogspot.com/2011/04/code-to-copy-test-set-from-one-folder.html](http://go-gaga-over-testing.blogspot.com/2011/04/code-to-copy-test-set-from-one-folder.html)找到了下面的代码示例它演示了 iSupportCopyPaste 的使用所以也许你可以适应它。

1.  在 excel vba 编辑器中添加以下代码。
2.  将“OTA COM 类型库”添加为工具 -> 来自 excel 的引用下的引用。
3.  奔跑并享受魔法:-) 3。

解决方案：

```
Public Function CopyPasteTestSetFolder(sourceFolderPath, destFolderPath)

    strServer = "http://xyz/qcbin"
    strDomain = ""
    strProject = ""
    strUser = ""
    strPassword = ""

    Set objTDConnection = CreateObject("tdapiole80.TDCONNECTION")
    objTDConnection.InitConnection strServer, strDomain
    objTDConnection.ConnectProject strProject, strUser, strPassword

    Set objTreeManager = objTDConnection.TestSetTreeManager
    Set sourceFolder = objTreeManager.NodeByPath(sourceFolderPath)
    Set destFolder = objTreeManager.NodeByPath(destFolderPath)

    Dim iscp As ISupportCopyPaste

    Set iscp = sourceFolder

    clipboard = iscp.CopyToClipBoard(sourceFolder.NodeID, 0, sourceFolderPath)

    Set iscp = destFolder
    iscp.PasteFromClipBoard clipboard, destFolder.NodeID, 0, -1

    Set treeMng = Nothing
    Set sourceFolder = Nothing
    Set destFolder = Nothing
    Set iscp = Nothing

End Function 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-02-01T18:01:27.877

enterSearchContent = Inputbox("输入搜索内容") entersearchterm = Inputbox("输入搜索词")

调用 funcSearchContentMatchCount(enterSearchContent,entersearchterm)

函数 funcSearchContentMatchCount(strsearchcontent,strsearchterm)

```
If Typename(enterSearchContent) = "String"  Then
    If len(enterSearchContent) >0 Then
        strsearchcontent = Lcase(cstr(enterSearchContent))
    else
        msgbox "Content is blank"
    End If
Else
    msgbox "Not a valid string"
End If

If Typename(entersearchterm) = "String"  Then
    If len(entersearchterm) >0  and len(enterSearchContent)>len(entersearchterm) Then
        strsearchterm = Lcase(cstr(entersearchterm))
    else
        msgbox "Search Term is blank or Search Term Length is greater than Search Content"
    End If
Else
    msgbox "Not a valid string"
End If

arrstrsearchcontent = split(strsearchcontent," ")
intsearchterm = 0
intsearchtermExactMatch = 0
For i = 0 To Ubound(arrstrsearchcontent) Step 1
    If instr(arrstrsearchcontent(i),strsearchterm)<>0 Then
        intsearchterm = intsearchterm+1
        If strcomp(arrstrsearchcontent(i),strsearchterm,0) = 0 Then
            intsearchtermExactMatch = intsearchtermExactMatch+1
        End If
    End If
Next
TotalMatchCount = intsearchterm
TotalExactMatchCount = intsearchtermExactMatch
Msgbox "Total Number of occurences of Search Term is "&TotalMatchCount
Msgbox "Total Number of Exact occurences of Search Term is "&TotalExactMatchCount 
```

结束功能

# javascript - Mootools - 将 type="text" 设置为 type="password" 的输入在 IE8 中不起作用

> ID：14870765
> 
> 赞同：0
> 
> 时间：2013-02-14T08:39:59.197
> 
> 标签：javascript, passwords, mootools

我有以下 Mootools 代码，用于在密码字段中添加焦点/模糊值：

```
 $$('#connect_login_box #password-element > input').set('value','Password').set('type', 'text').addEvents({
    focus: function(){ 
      if (this.value=='Password') this.set('type', 'password').addClass('input_active').value=''; },
    blur: function(){
      if (this.value=='') this.set('type', 'text').removeClass('input_active').value='Password'; } 
```

此代码在 IE8 中不起作用，它破坏了页面上的所有其他 JS。我很确定当它到达 set('type', 'text') 时会产生错误

知道如何解决这个问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:43:57.370

输入元素的类型一旦设置就无法更改。

删除输入元素并创建一个新元素来替换它。

# apache-flex - 如何在 flex HGroup 中选择一个对象？

> ID：14870771
> 
> 赞同：0
> 
> 时间：2013-02-14T08:40:28.930
> 
> 标签：apache-flex, containers

我有一个按钮可以在每次单击时创建一个图像对象并将该图像对象添加到 Hgroup 中。Hgroup 可以包含一些图像对象。还有另一个按钮来旋转对象。

我想做的事 ：

1.  能够选择一个对象。
2.  这样每次单击旋转按钮时**，所选对象可以围绕一个点旋转 90 度。**
3.  还想限制容器/Hgroup中添加的项目数。（必须带边框）
4.  哪个是我可以用于上述目的的最佳容器（列表、边框容器、Hgroup）？

目前我的代码可以做什么： 1\. 在每个按钮单击时将图像对象添加到 HGroup 2\. 我只能旋转 HGroup 中的第一个项目。

我对 flex 很陌生。我不知道该怎么做。请有人帮我举个例子。你可以运行我的代码来了解我想要做什么。

请帮助我..谢谢:)

这是我目前拥有的全部代码（如果你愿意，你可以在你的电脑上运行它）：

```
 <fx:Declarations>   
    <s:Rotate id="rotAnim" angleBy="90" duration="1000" target="{myImage}"
              autoCenterTransform="true" />
</fx:Declarations>
<fx:Script>
    <![CDATA[
        import spark.components.Image;

        private function generateImage():Image{
            var image:Image = new Image();
            [Embed(source='assets/test_Image.png')]             
            var myImg1:Class;
            image.source = myImg1;
            image.scaleX = 0.5; 
            image.scaleY = 0.5;             
            return image;
        }
        private function addImageToContainer(event:MouseEvent):void{
            var image1:Image = new Image();             
            image1 = generateImage();               
            holdingArea.addElement(image1);         
        }

        [Bindable]
        private var myImage:Image;          
        private function rotateImage():void {
            myImage = holdingArea.getElementAt(0) as Image;
            if (rotAnim.isPlaying) return;
            rotAnim.play();
        }

    ]]>
</fx:Script>
<s:BorderContainer x="216" y="53" width="319" height="367">

    <s:BorderContainer x="10" y="10" width="297" height="298" >
        <s:HGroup id="holdingArea" x="4" y="5" width="287" height="285">
        </s:HGroup>
    </s:BorderContainer>

    <s:Button x="23" y="324" label="Add Image Object" click="addImageToContainer(event)"/>
    <s:Button x="149" y="324" label="Rotate" click="rotateImage()"/>    

</s:BorderContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T15:12:45.743

这是一个如何使用 List 组件实现此目的的示例。
首先创建一个模型对象，它将成为图像状态的表示模型。

```
public class MyImage {

    [Bindable]
    public var source:Class;

    [Bindable]
    public var rotation:Number = 0;

} 
```

现在使用自定义 ItemRenderer 创建您的列表。请注意，我使用 List 而不是 DataGroup（正如我在评论中建议的那样），因为您需要知道选择了哪个项目。

```
<s:List id="imageList" dataProvider="{dp}" 
        x="216" y="53" width="319" height="367">

    <s:itemRenderer>
        <fx:Component>
            <s:ItemRenderer width="20" height="20">
                <s:Image source="{data.source}" rotation="{data.rotation}"
                         horizontalCenter="0" verticalCenter="0" 
                         scaleX=".5" scaleY=".5"/>
            </s:ItemRenderer>
        </fx:Component>
    </s:itemRenderer>

    <s:layout>
        <s:HorizontalLayout/>
    </s:layout>
</s:List>

<s:Button x="23" y="324" label="Add Image Object" click="addImage()"/>
<s:Button x="149" y="324" label="Rotate" click="rotateImage()"/> 
```

ItemRenderer 中的`data`属性将填充 和 的实例，`MyImage`如您所见，我们绑定到它的`source`和`rotation`属性。
请注意，为了简洁起见，我在这里使用了 ItemRenderer 的内联定义，但我建议您在现实世界的情况下将它移到单独的类中。为了清楚起见，我还省略了效果。
Horizo​​ntalLayout 将告诉列表水平显示其项目，而不是默认的垂直布局。

现在为 List 创建 dataProvider（它已经在前面的代码中绑定，请参阅`{dp}`）：

```
[Bindable]
public var dp:IList = new ArrayCollection(); 
```

并在单击 Button 时向其中添加一些项目：

```
[Embed(source='assets/CalendarIcon.png')] var myImg1:Class;

private function addImage():void {
    var image:MyImage = new MyImage();
    image.source = myImg1;
    dp.addItem(image);
} 
```

List 将自动创建一个新的 ItemRenderer 以在 dataProvider 中反映这个新项目。

现在让我们通过单击第二个按钮来旋转它：

```
private function rotateImage():void {
    if (imageList.selectedItem) imageList.selectedItem.rotation += 90;
} 
```

您更新`rotation`所选`MyImage`实例的 。Binding 将完成其余的工作并`Image`在 ItemRenderer 中旋转实际。

# java - 自定义渲染器后 JTable 列不可编辑

> ID：14870778
> 
> 赞同：1
> 
> 时间：2013-02-14T08:40:58.760
> 
> 标签：java, swing, jtable, jcalendar, jdatechooser

[这是对此处](https://stackoverflow.com/questions/14835742/rendering-toedters-jdatechooser-in-jtable-column)发布的问题的跟进。

我已经按照答案中的说明进行操作，它就像一个魅力。但是，无法编辑日期列：我无法`JDateChooser`在填充的表格中选择任何内容。

正如前面问题中提到的，我使用的是 MVC 模式。当我从视图中填充`JTable`and时，它工作正常。`setCellRenderer`只有当我填充并`setCellRenderer`从我的控制器中时，日期列才启用。

这是渲染器：

```
public class JDateChooserRenderer extends JDateChooser implements TableCellRenderer{

Date inDate;

@Override
public Component getTableCellRendererComponent(JTable table, Object value,
        boolean isSelected, boolean hasFocus, int row, int column) {
    // TODO Auto-generated method stub

    if (value instanceof Date){
        this.setDate((Date) value);
    } else if (value instanceof Calendar){
        this.setCalendar((Calendar) value);
    }
    this.setEnabled(true);
    return this;
} 
```

这是我认为有效的代码：

```
scrollPanePermits = new JScrollPane();
    tableVehiclePermitHeader = new String[] {"Name", "Expiration Date"};
    tableVehiclePermitData = new Object[0][0];

    Calendar tempDate = new GregorianCalendar(2008, 1, 1);
    Date tempDate1 = new Date(2008, 1, 1);
    tempDate1.setYear(tempDate1.getYear() - 1900);
    tableVehiclePermitData = new Object [][] {{"Hello", tempDate}, {"Hello", tempDate1}};

    tableVehiclePermitDefaultTableModel = new DefaultTableModel(tableVehiclePermitData, tableVehiclePermitHeader);
    tableVehiclePermit = new JTable(tableVehiclePermitDefaultTableModel){
        public Class getColumnClass(int c) {
            return getValueAt(0, c).getClass();
         }
        @Override
        public boolean isCellEditable(int rowIndex, int colIndex){
            if (colIndex == 0){
                return false;
            } else {
                return true;
            }
        }
    };

    tableVehiclePermit.getColumn("Expiration Date").setCellRenderer(new JDateChooserRenderer());
    tableVehiclePermit.getColumn("Expiration Date").setCellEditor(new JDateChooserCellEditor()); 
```

最后，这是我的控制器中填充表格的代码，但日期列不可编辑：

```
permitListData = new Object[vehPermit.size()][3];
        Iterator it = vehPermit.iterator();
        int i = 0;
        while (it.hasNext()){
            permitData = (VehiclePermitExpirationByVehicleDao) it.next();
            permitListData[i][0] = permitData.getVehiclePermitName();
            permitListData[i][1] = permitData.getExpirationDate();
            permitListData[i][2] = permitData.getVehiclePermitId();
            i++;

        }
        gui.setTableVehiclePermitData(permitListData);
        gui.getTableVehiclePermitDefaultTableModel().setDataVector(gui.getTableVehiclePermitData(), gui.getTableVehiclePermitHeader());
        gui.getTableVehiclePermit().setModel(gui.getTableVehiclePermitDefaultTableModel());

//      TableColumn dateColumn = gui.getTableVehiclePermit().getColumnModel().getColumn(1);
//      dateColumn.setCellRenderer(new JDateChooserRenderer());

        gui.getTableVehiclePermit().getColumn("Expiration Date").setCellRenderer(new JDateChooserRenderer());

        gui.getTableVehiclePermit().setEnabled(true); 
```

其中 gui 是我的观点的一个实例。

我只知道在创建表格时重写 isCellEditable 方法，以便将单元格设置为可编辑或不可编辑。关于如何解决这个问题的任何想法，或者我做错了什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T17:32:46.180

从 的测试开始可能会有所帮助`com.toedter.calendar.demo.DemoTable`，如下所示。注意线如何

```
table.setDefaultEditor(Date.class, new JDateChooserCellEditor()); 
```

为 type 的模型值指定默认[编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)`Date.class`：

```
@Override
public Class getColumnClass(int c) {
    return getValueAt(0, 1).getClass();
} 
```

![图片](../Images/5e64855152f1cfe7c528963096a49540.png)

```
import com.toedter.calendar.demo.DemoTable;
import java.awt.EventQueue;
import java.awt.GridLayout;
import javax.swing.JFrame;

/** @see http://stackoverflow.com/a/14880675/230513 */
public class TableTest {

    private void display() {
        JFrame f = new JFrame("TableTest");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(new DemoTable());
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TableTest().display();
            }
        });
    }
} 
```

# jquery - 延迟加载水平滚动jQuery

> ID：14870780
> 
> 赞同：3
> 
> 时间：2013-02-14T08:41:06.787
> 
> 标签：jquery, fadein, horizontal-scrolling, lazy-loading

所以，我正在为一个真正希望她的照片在浏览器窗口中出现时淡入淡出的客户制作这个摄影作品集网站。所以我做了一些研究，看起来 jquery 插件`lazyload`会很完美。问题是她也真的希望她的照片在水平滚动上，而且似乎`lazyload`只想在垂直滚动的网页上工作。我四处搜索，显然`lazyload`应该使用此脚本在侧滚动 div 中工作：

```
 $("img").lazyload({
     container: $("#container")
 }); 
```

但它似乎没有做任何事情。

目前这是我的代码的样子：

```
<head>
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="js/jquery.lazyload.min.js"></script>
<script>
$(function() {          
$("#content img.fadeload").lazyload({
    container: $("#content"),
    placeholder : "images/white.jpg",
    effect      : "fadeIn",
    effectspeed: 1000 
});
});
</script>
<style>
#content {
font-size: 100%;
position: absolute;
height: 574px;
width: 750px;
margin-top: -277px;
margin-bottom: 0px;
padding-left: 240px;
padding-top: 0px;
padding-bottom: 0px;
top: 50%;
overflow-x: scroll;
white-space: nowrap;
}
</style>
</head>
<body>
<div id="content">
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo01.jpg" alt="photo01"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo02.jpg" alt="photo02"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo03.jpg" alt="photo03"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo04.jpg" alt="photo04"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo05.jpg" alt="photo05"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo06.jpg" alt="photo06"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo07.jpg" alt="photo07"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo08.jpg" alt="photo08"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo09.jpg" alt="photo09"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo10.jpg" alt="photo10"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo11.jpg" alt="photo11"/>
    <img class="fadeload" src="images/white.jpg" data-original="images/liveStuffHotStuff/photo12.jpg" alt="photo12"/>
</div>
</body> 
```

如果您想查看插件在当前状态下的功能（或缺少功能），这里有一个正在运行[的网站的临时链接。](http://thefuhrl.com/jennaSpitz/album01.html)`lazyload`

任何有关让lazyload 以我想要的方式运行的建议或对图像淡入效果的另一种方法的推荐将不胜感激。万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T19:36:33.920

您的图像缺少宽度和高度属性。没有它们，延迟加载将无法正常工作。`document.ready`在不知道宽度和高度的情况下，浏览器无法知道事件触发时图像在布局中的位置。正确的图像标签如下所示：

```
<img class="lazy" src="img/grey.gif" data-original="img/example.jpg"  width="640" heigh="480"> 
```

# actionscript-3 - 收听 Swf 面板关闭

> ID：14870781
> 
> 赞同：2
> 
> 时间：2013-02-14T08:41:07.260
> 
> 标签：actionscript-3, air, jsfl

我正在为 flash pro cs 开发一个项目，我想知道 Flash Pro 用户何时关闭 SWF 面板。面板需要在关闭之前知道并在此之前执行功能。

有没有办法做到这一点？

我知道这在 Air 中是可能的，但它不能用作 flash pro 面板。

澄清一下，我的意思是通过“AppData\Local\Adobe\Flash CS6\en_US\Configuration”下的 WindowSWF 库将 swf 面板作为扩展添加到 flash Professional 中。

基本上，如果没有办法通过 JSFL 调用来做到这一点，我需要找到一种方法来从 swf 本身中监听关闭事件。

有任何想法吗？黑客更受欢迎......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:04:05.600

也许在子 SWF 中监听 addedToStage 和 removedFromStage 事件并采取相应措施？

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event:addedToStage](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event:addedToStage)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event:removedFromStage](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObject.html#event:removedFromStage)

# c# - 图片框不显示其他图像

> ID：14870788
> 
> 赞同：0
> 
> 时间：2013-02-14T08:41:38.077
> 
> 标签：c#, winforms, datagridview, oledb

我已经完成了如何将图像从 datagridview 插入图片框中的代码，但问题是，它只显示第一行的图像，这是我的代码

```
private void dataGridView1_SelectionChanged(object sender, EventArgs e)
        {
            if (dataGridView1.SelectedRows.Count > 0)
            {
                byte[] imagebyte = (byte[])dataGridView1.Rows[0].Cells["Picture"].Value;

                MemoryStream ms = new MemoryStream();
                ms.Write(imagebyte, 0, imagebyte.Length);
                Bitmap bmp = new Bitmap(ms);
                pictureBox2.Image = bmp;
            }
        } 
```

我认为问题出在`byte[] imagebyte = (byte[])dataGridView1.Rows[0].Cells["Picture"].Value;`代码中，我不知道将行 [0] 替换为选定索引的代码。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:43:28.463

在你的`if`声明之后这样做：

```
var row = dataGridView1.SelectedRows[0];
byte[] imagebyte = (byte[])row.Cells["Picture"].Value; 
```

# java - 石英仅在偶数分钟内运行

> ID：14870789
> 
> 赞同：0
> 
> 时间：2013-02-14T08:41:39.120
> 
> 标签：java, quartz-scheduler

我正在使用石英调度程序。当我为我的工作创建触发器时，我正在使用`trigger.setStartTime()`. 现在我的问题是在第一次火灾时间它运行到最近的偶数时间。让我们用一个例子来解释上面的情况。我的触发器开始时间是：`Thu Feb 14 13:53:00 IST 2013`. 重复 cron 表达式是每两分钟一次。所以，第一次点火时间是`Thu Feb 14 13:55:00 IST 2013`。但它被解雇了`Thu Feb 14 13:54:00 IST 2013`。从那里它每两分钟运行一次，即`13:56:00,13:58:00`等等。但我想从触发器的开始时间每两分钟触发一次工作。请帮助我实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:58:04.393

您使用的是哪个版本的 Quartz，您是如何构建触发器的？如果您使用的是 2.0 或更高版本，您可能应该使用类似 DSL 的 TriggerBuilder 和 SimpleTrigger/SimpleSchedule 来快速构建触发器，并且不易出错。

[石英教程第 5 课](http://quartz-scheduler.org/documentation/quartz-2.x/tutorials/tutorial-lesson-05)

你的触发器最终会像这样：

```
trigger = newTrigger()
    .withIdentity("my-trigger", "my-group")
    .withSchedule(simpleSchedule()
        .withIntervalInMinutes(2)
        .repeatForever())
    .build(); 
```

# php - PHP 正则表达式匹配除正斜杠之外的任何内容

> ID：14870797
> 
> 赞同：0
> 
> 时间：2013-02-14T08:41:59.590
> 
> 标签：php, regex

我将有 2 组不同的 URLS

```
/marketplace/producer/123-producer-name
/marketplace/producer/123-producer-name/5-genre/500-max-price/0-added/newest/1-page 
```

我知道第二个的正则表达式，但对于第一个我发现它很棘手。我正在尝试匹配表达式，但我想确保它也不匹配第二个。我正在使用以下内容；

```
/\/marketplace\/producer\/([0-9]+)\-[^\/]/ 
```

最后我的逻辑是匹配除正斜杠之外的每个字符，这意味着它可能匹配第二个字符。但是当我测试它时，即使使用正斜杠它也会返回 true。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T08:44:21.347

像这样做：

```
/^\/marketplace\/producer\/([0-9]+)-[^\/]+$/ 
```

您的正则表达式搜索以 / 开头的字符串**，****后跟**市场/**生产者 /**后跟 1 个或多个数字，后跟**-**后跟一个或多个不是**/**的字符，并在那里结束。

 ******我认为问题在于没有锚定字符并且它也匹配输入的子字符串。您还错过了**+**，它使正则表达式引擎查找单个非正斜杠字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:47:51.310

只需使用这个正则表达式`[^/]+$`。它将匹配最后一个正斜杠之后的所有内容。******

# java - 输出整数数组

> ID：14870801
> 
> 赞同：0
> 
> 时间：2013-02-14T08:42:11.400
> 
> 标签：java, arrays, class

```
public class Set {
    private int[] num;

    public Set(int ... nums){
        this.num = nums;
    }
    public int getSet(){

        for (int results : this.num){
            return results;
        }
    }

} 
```

我写了这个类作为测试，看看尝试使用一种方法输出一个整数数组，但我遇到了麻烦

这是驱动程序：

```
public class SetTest {
public static void main(String[] args) {

    Set set = new Set();

    set.Set(1,2,3);

    set.getSet();

   }
   } 
```

我不知道该怎么做，我也收到此错误“方法 IntegerSet(int, int, int) 未定义 Set 类型”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:45:53.887

您的类型似乎被称为`Set`not `IntegerSet`，但即使我们假设这是`set.IntegerSet(1,2,3);`main 中下一行（）上的错字，您也明确地调用了构造函数，而您永远不应该这样做。而是在构造时传递参数`IntegerSet`：

```
IntegerSet set = new IntegerSet(1,2,3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T08:45:44.757

您定义了一个构造函数，如下所示

```
public Set(int ... nums){
        this.num = nums;
    } 
```

要使用上面的构造函数创建一个新的 Set 实例，你想做

```
Set objSet = new Set(1,2,3);
objSet.getSet(); 
```

您的代码中的 IntegerSet 类似乎不存在，这使您的代码无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:46:55.180

首先，如果您澄清与您提供`IntegerSet`的课程相反的内容，这将有所帮助。`Set`但是，您的问题是您试图调用*构造函数*，就好像它是一种方法一样。所以这是有效的：

```
IntegerSet set = new IntegerSet(1, 2, 3); 
```

请注意，参数必须在*创建类时*传递给类——这是构造函数的定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:07:40.193

```
public class Set {
private int[] num;

public Set(int a, int b, int c) {
    num = new int[] { a, b, c };
}

public void getSet() {

    for (int results : this.num) {
        System.out.println(results);
    }

}

} 
```

你的 Set 类应该和上面一样。SetTest 应该如下所示。

```
public class SetTest {
public static void main(String[] args) {
    Set set = new Set(1, 2, 3);

    set.getSet();
}

} 
```

# android - 通过指定名称播放声音文件

> ID：14870806
> 
> 赞同：0
> 
> 时间：2013-02-14T08:42:29.463
> 
> 标签：android

我正在尝试通过从用户那里获取文件名来在 Android 中播放声音文件。如何使用其名称查找和播放位于 Raw 文件夹中的声音文件？

我知道这样做的过程与通过运行代码使用其名称获取位图相同：

```
Bitmap bitmap = `BitmapFactory.decodeResource(con.getResources(),con.getResources().getIdentifier(name_of_file, "drawable", con.getPackageName()));` 
```

但我不知道如何处理声音文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:48:48.560

试试这个：

```
public static int getResId(String drawableName) {    
    try {
        Class res = R.drawable.class;
        Field field = res.getField(drawableName);
        int drawableId = field.getInt(null);
        System.out.println("resource ids****"+drawableId);
        return drawableId;
    } catch (Exception e) {
        Log.e("MyTag", "Failure to get drawable id.", e);
        return 0;
    }
} 
```

我以这种方式使用它：

```
ImageView my_image = (ImageView) findViewById(R.id.my_imageView);
my_image.setBackgroundResource(getResId("ic_launcher")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:50:31.297

您可以尝试获取资源的 id，然后使用该 id 启动 Mediaplayer

类似的东西

```
int resId = getResources().getIdentifier(name,folder,packagename);
MediaPlayer mp = MediaPlayer.create(context, resId);
mp.start(); 
```

# java - Collections.emptyList() 和 Collections.EMPTY_LIST 有什么区别

> ID：14870819
> 
> 赞同：113
> 
> 时间：2013-02-14T08:43:21.710
> 
> 标签：java, list, collections

在 Java 中，我们有[Collections.emptyList()](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#emptyList%28%29)和[Collections.EMPTY_LIST](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#EMPTY_LIST)。两者具有相同的属性：

> 返回空列表（不可变）。这个列表是可序列化的。

那么使用其中一个或另一个之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-02-14T08:44:52.207

*   `Collections.EMPTY_LIST`返回旧式**`List`**
*   `Collections.emptyList()`使用类型推断，因此返回 **`List<T>`**

**Collections.emptyList() 是在 Java 1.5 中添加的，它可能总是更可取**的。这样，您无需在代码中进行不必要的转换。

`Collections.emptyList()`本质上*为你*做演员。

```
@SuppressWarnings("unchecked")
public static final <T> List<T> emptyList() {
    return (List<T>) EMPTY_LIST;
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-14T08:45:59.843

让我们找到源头：

```
 public static final List EMPTY_LIST = new EmptyList<>(); 
```

和

```
@SuppressWarnings("unchecked")
public static final <T> List<T> emptyList() {
    return (List<T>) EMPTY_LIST;
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-03-01T07:08:09.937

换句话说，EMPTY_LIST 不是类型安全的：

```
 List list = Collections.EMPTY_LIST;
  Set set = Collections.EMPTY_SET;
  Map map = Collections.EMPTY_MAP; 
```

相比于：

```
 List<String> s = Collections.emptyList();
    Set<Long> l = Collections.emptySet();
    Map<Date, String> d = Collections.emptyMap(); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-02-14T08:45:29.660

它们是绝对相等的对象。

```
public static final List EMPTY_LIST = new EmptyList<>();

public static final <T> List<T> emptyList() {
    return (List<T>) EMPTY_LIST;
} 
```

唯一的一个是`emptyList()`返回 generic `List<T>`，因此您可以将此列表分配给通用集合而不会发出任何警告。

# google-apps-script - Apps 脚本：将回调传递给 ServerHandler 的回调

> ID：14870820
> 
> 赞同：1
> 
> 时间：2013-02-14T08:43:27.350
> 
> 标签：google-apps-script

我在谷歌电子表格中有一个登录表单，允​​许我登录到外部应用程序。我的电子表格允许我不断地与这个外部应用程序通信，这样我就可以用它来执行任务 1、任务 2 等等。我需要先验证我是否已登录外部应用程序，然后才能执行任务 1 或任务 2。

所以我的用例是：

1.  用户调用 task1
2.  我的代码检查他是否已经登录。如果没有，则显示登录表单。
3.  然后表单首先检查登录，然后调用 task1。
4.  稍后，用户调用 task2。
5.  我的代码需要再次检查相同的场景以显示登录表单。
6.  我的表单再次检查用户的登录凭据，这次调用 task2。

这是我的代码的外观：

```
function invokeTask1()
{
    //if user not logged in
        loginForm("performTask1");
    //else
        performTask1();//works fine.
} 
```

我的 loginForm 如下所示：

```
function loginForm(sCallbackFn)
{
    //Code to create UiInstance and populate it with username and password fields
    //for now, I tried hidden field storing callback for me.
    var hdnCallback = app.createHidden("executeAfterLogin", sCallbackFn).setName("proceedWithExecution");
    //then I already have ServerHandler for Ok Button Click
    var handler = app.createServerHandler('OkButtonEvent');
    handler.addCallbackElement(abcPanel);
    btnOk.addClickHandler(handler);
} 
```

然后我的 OkButtonEvent 就是我检查登录然后执行相应任务的地方：

```
function OkButtonEvent(e)
{
    //code to pick out e.parameter values and check login on external server application
    //I don't know how to invoke e.parameter.proceedWithExecution here. 
    //This has failed to run without any errors though.
    eval(e.parameter.proceedWithExecution);
} 
```

最后，我有这些：

```
function performTask1()//and also performTask2()
{
    //doing something. But not getting invoked via login form's ServerHandler.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:38:39.180

尝试`this[e.parameter.proceedWithExecution]();`

不过，这本身并不是一个 UiApp 问题——这就是您在 JavaScript 中通过字符串名称调用函数的方式。

# sed - 如何重写程序的终端输出

> ID：14870822
> 
> 赞同：0
> 
> 时间：2013-02-14T08:43:46.383
> 
> 标签：sed, terminal, output

我正在从终端运行一个应用程序（CoronaSDK Simulator），该应用程序在每一行输出前面都放置了一个非常长的时间戳。

有没有办法使用 sed 之类的东西来切断它，而不是在它进来时输出其他所有东西（即不必等到程序结束）？

我已经尝试了几件事，但到目前为止没有运气......

以下是一些示例行：

```
2013-02-14 12:39:49.028 Corona Simulator[40803:707] |timer created
2013-02-14 12:39:49.029 Corona Simulator[40803:707] __in deck.lua__
2013-02-14 12:39:49.030 Corona Simulator[40803:707] storyboard.roomData.layout=A1 (room.lua) 
```

我想看起来像这样：

```
|timer created
__in deck.lua__
storyboard.roomData.layout=A1 (room.lua) 
```

我试过了

```
coronasim ./ | sed 's/Corona Simulator//' 
```

作为测试，和

```
coronasim ./ | sed -e 's/^.* //' 
```

如下所示，甚至

```
coronasim ./ > /dev/null 
```

但似乎没有任何改变输出。

解决方案是这样的：

```
coronasim ./ 2>&1 | sed -e 's/^.*] //' 
```

根据下面 choroba 的建议。似乎 Corona SDK 模拟器将输出发送到 stderr 而不是 stdout。

对于其他感兴趣的人，创建了一个简单的 bash 脚本，在模拟器的当前导向器中运行该程序，去除时间戳：

```
/Applications/CoronaSDK/Corona\ Simulator.app/Contents/MacOS/Corona\ Simulat
or ./ 2>&1 | sed -e 's/^.*] //' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:10:00.110

是的，`sed`作为*流编辑器*应该是适合这项工作的工具。只需将应用程序的输出重定向到它：

```
myapp | sed -e 's/^.* //' 
```

但是，您可能会遇到问题：

1.  如果应用程序写入标准错误而不是标准输出，则必须使用重定向流

    我的应用程序 2>&1 | sed -e ...

2.  如果未连接到终端，应用程序可能会缓冲其输出。除非有一个特定的选项来改变行为，否则在这种情况下你很不走运。

# c# - c# winform 显示工作站锁定后

> ID：14870823
> 
> 赞同：0
> 
> 时间：2013-02-14T08:43:53.383
> 
> 标签：c#, winforms, winapi

我正在使用 Winforms 屏幕保护程序应用程序 .NET 3.5，除了锁定工作站外一切正常。应用程序在后台运行良好（登录面板结束），但我想在用户指定时间后显示 Winform。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:55:51.387

您可以使用时间戳，使用计时器控件。

前任-

初始化 WinForm 60 秒后执行 Timer 命令

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:53:18.833

我试图在用户会话中运行我的应用程序。我必须将我的应用程序放入注册表 [如何以编程方式更改屏幕保护程序？](https://stackoverflow.com/questions/8383589/how-do-i-change-the-screensaver-programatically) [http://www.harding.edu/fmccown/screensaver/screensaver.html](http://www.harding.edu/fmccown/screensaver/screensaver.html)

# python - py2exe：错误：libzmq.pyd：没有这样的文件或目录

> ID：14870825
> 
> 赞同：5
> 
> 时间：2013-02-14T08:43:57.993
> 
> 标签：python, py2exe, pyzmq

在 py2exe 构建期间，我收到以下错误：

```
creating python loader for extension 'win32clipboard' (C:\Python27\lib\site-packages\win32\win32clipboard.pyd -> win32clipboard.pyd)
creating python loader for extension '_rl_accel' (C:\Python27\lib\site-packages\_rl_accel.pyd -> _rl_accel.pyd)
*** finding dlls needed ***
error: libzmq.pyd: No such file or directory 
```

谁能解释我是否真的需要它，在哪里可以找到它或如何排除它。

谢谢麦兹

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-20T07:07:23.457

要使其工作，需要三个步骤：

*   使用选项`libzmq.pyd`从 dll 中排除。`dll_excludes`这样可以避免“缺少 pyzmq.pyd”错误。
*   从`zmq.libzmq`带有`excludes`. 这跳过了 py2exe 所做的通常的 .pyd 重命名和代理。
*   显式添加`zmq.backend.cython`with `includes`option，因为 py2exe 无法通过 pyzmq 后端选择代码看到它。如果您不这样做，您将收到“没有名为 cffi 的模块”错误。

例子：

```
import zmq.libzmq

setup(
    # ...
    zipfile='lib/library.zip',
    options={
        'py2exe': {
            'includes': ['zmq.backend.cython'],
            'excludes': ['zmq.libzmq'],
            'dll_excludes': ['libzmq.pyd'],
        }
    },
    data_files=[
        ('lib', (zmq.libzmq.__file__,))
    ]
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T14:36:16.100

不幸的是，这不是一个好的答案，但我认为这是一个不错的诊断。

[py2exe wiki](http://www.py2exe.org/index.cgi/Py2exeAndzmq)不是最新的（至少我认为）。我相信版本 13.0.0 进行了更改，其中 libzmq.pyd 替换了 libzmq.dll。Py2exe 对扩展模块的正常处理将其重命名为“zmq.libzmq.pyd”，但这会破坏 Windows dll 的发现，因为（例如）zmq.core._device.pyd 明确链接到 libzmq.pyd。

这激发了将 zmq.libzmq.pyd 复制到 py2exe 生成的 dist 文件夹中的 libzmq.pyd 的另一种丑陋修复。通过此修复，我的 py2exe 输出 exe 可以正常运行，不会出现导入错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-14T10:51:17.510

我不确定这是一个最佳解决方案，但它对我有用：

*   [从http://pypi.python.org/pypi/pyzmq](http://pypi.python.org/pypi/pyzmq)下载 pyzmq
*   使用 easy_install 安装 egg
*   将 libzmq.dll 从 C:\Python27\Lib\site-packages\pyzmq-2.2.0.1-py2.7-win32.egg\zmq 复制到 C:\Python27\dlls\

麦兹

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T11:00:52.203

一个更简单的解决方案，如上所述，一个解决方案需要编译 libzmq - 但 Im-lzy。

1.  将 libzmq.pyd 从 C:\python27\Lib\sites-packages\zmq 复制到 c:\python27\DLLs import zmq.libzmq
2.  在您的设置中包含以下包含和数据文件。而已

    **setup( # ... options={ 'py2exe': { 'includes': [' zmq.backend.cython** '] } }, data_files=[ ('lib', (zmq.libzmq.file ,)) ] )

# matlab - 一次设置多个字段/将新字段添加到单元结构

> ID：14870828
> 
> 赞同：3
> 
> 时间：2013-02-14T08:44:15.653
> 
> 标签：matlab, octave

我有一个 1xn 结构。结构包含一些带有数字单元格的字段。并非每个结构都具有相同的字段。所以我想将缺少的字段添加到结构中。但我没明白。

```
%  Mimimal example
%  I have same cells, imported from csv by csv2cell()

clear

dataCell{1}={"field_a","field_b","field_c"; ...
    1,2,3; ...
    4,5,6};

dataCell{2}={"field_a","field_b","field_d"; ...
    1,2,4; ...
    4,5,8};

%   Then I convert them to a struct
for ii=1:numel(dataCell)    
DataStruct{ii}=cell2struct((dataCell{ii}(2:end,:)),[dataCell{ii}(1,:)],2);
  try fields=[fields, fieldnames(DataStruct{ii})']; % fails for the first loop, because 'fields' doesn't exist yet
  catch
   fields=[fieldnames(DataStruct{ii})']; % create 'fields' in the first loop
  end
end

% Create a list of all existing fields
fields=unique(fields);

% Now look for the missing fields and add them to the struct
for jj=1:numel(DataStruct)
  missing_fields{jj} = setdiff(fields,fieldnames(DataStruct{jj}));
  for kk=1:numel(missing_fields)
    DataStruct{jj}.(missing_fields{jj}{kk})=NaN*zeros(numel(dataCell{jj}(2:end,1)),1); % Execution fails here!
  end
end 
```

这会导致错误：

八度误差

```
error: invalid assignment to cs-list outside multiple assignment
error: called from:
error:   ~/example.m at line 29, column 44 
```

Matlab 错误

```
Insufficient outputs from right hand side to satisfy comma separated
list expansion on left hand side.  Missing [] are the most likely cause. 
```

问题是，的输出`DataStruct{1}.field_a`不是矩阵或单元格，而是多个ans。是否有可能将单元格转换为矩阵或导入 csv 的更好可能性？

另一个很好的可能性是这样的

```
 DataStruct{jj}=setfields(missing_fields{jj},NaN_Values{jj}) 
```

where`missing_fields{jj}`和`NaN_Values`都是具有相同长度的单元格，因此我可以一次设置多个字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:05:26.843

在您的最后一个[问题](https://stackoverflow.com/questions/14842561/cat-of-two-struct-not-the-same-fields/14843440#comment20847913_14843440)之后- 您可以使用 deal 命令。

片段：

```
a=struct('f1',num2cell(1:10))
missing_field = 'test'
[a.(missing_field)]=deal(NaN) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T09:18:55.643

您使用该`deal`函数将输出分配给输入。对于您的示例：

```
% Now look for the missing fields and add them to the struct
for jj=1:numel(DataStruct)
  missing_fields{jj} = setdiff(fields,fieldnames(DataStruct{jj}));
  for kk=1:numel(missing_fields)
    [DataStruct{jj}.(missing_fields{jj}{kk})] = deal(NaN*zeros(numel(dataCell{jj}(2:end,1)),1));
  end
end 
```

请注意，您将得到一个`Index exceeds matrix dimensions`，但这是由于另一个问题 - 我相信您将能够解决这个问题！

# c# - for循环中的新类

> ID：14870831
> 
> 赞同：7
> 
> 时间：2013-02-14T08:44:22.907
> 
> 标签：c#, .net, class

目前我有以下代码：

```
 DecisionVariable[] attributes = 
        {
            new DecisionVariable("Var1", 2),
            new DecisionVariable("Var2", 4),
            new DecisionVariable("Var3", 1),
            new DecisionVariable("Var4", 2),
            new DecisionVariable("Var5", 5),
        }; 
```

但我想使用 For 循环创建它们：

```
 DecisionVariable[] attributes = 
        {
            for (int i=0;i<49;i++)
            {
                new DecisionVariable ("Var" + i, iValues[i]);
            }
        }; 
```

在第二个版本中，C# 告诉我“For”的表达式无效。

在构造函数中使用 for 循环，我是否在某处有错字，或者通常不允许这样的错字？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-14T08:45:28.750

您不能在[集合初始化程序](http://msdn.microsoft.com/en-us/library/bb384062%28v=vs.110%29.aspx)`for`中使用循环。请改用此代码：

```
DecisionVariable[] attributes = new DecisionVariable[49];
for (int i = 0; i < 49; i++)
    attributes[i] = new DecisionVariable ("Var" + i, iValues[i]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T08:46:04.793

```
 DecisionVariable[] attributes = new DecisionVariable[49];  

    for (int i=0; i<49; i++)
    {
        attributes[i] = new DecisionVariable("Var" + i, iValues[i]);
    } 
```

您还可以使用`generics`并执行以下操作：

```
 List<DecisionVariable> attributes = new List<DecisionVariable>();

    for (int i=0; i<49; i++)
    {
        attributes.Add(new DecisionVariable("Var" + i, iValues[i]));
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-14T08:48:03.073

您可以使用 LINQ 语法来执行此操作：

```
DecisionVariable[] attributes = 
                      Enumerable.
                      Range(0, 49).
                      Select(i => new DecisionVariable("Var" + i, iValues[i])).
                      ToArray(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T08:49:21.640

[使用Enumerable.Range 方法](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.range.aspx)很方便：

```
DecisionVariable[] attributes = Enumerable
    .Range(0, 49)
    .Select(i => new DecisionVariable("Var" + i, iValues[i]))
    .ToArray(); 
```

如果`iValues`数组具有与数组**相同数量的元素**，请`attributes`考虑以下代码：

```
DecisionVariable[] decisionVariables = iValues
    .Select((value, index) => new DecisionVariable("Var" + index, value))
    .ToArray(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-14T09:00:56.550

你可以做这样的事情。

```
Class1[] c1 = new Class1[12];
for (int i = 0; i < 12; i++)
{
       c1[i] = new Class1(i);
} 
```

# python - 使用 100% CPU 的 RabbitMQ python worker 脚本

> ID：14870832
> 
> 赞同：6
> 
> 时间：2013-02-14T08:44:24.950
> 
> 标签：python, ubuntu, amazon-ec2, rabbitmq

[我编写了这个 python 脚本，它通过修改此处](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)找到的 RabbitMQ 教程中的默认 RPC 示例来充当 RPC 服务器。它在我的笔记本电脑上运行良好。但是当我在具有这些规格的亚马逊 ec2 高 CPU 中型实例中运行它时：

> 1.7 GiB 内存
> 
> 5 个 EC2 计算单元（2 个虚拟内核，每个内核有 2.5 个 EC2 计算单元）
> 
> 350 GB 的实例存储

它占用100％的CPU。尽管我的笔记本电脑配置几乎相同，但 CPU 使用率不到 4%。我在笔记本电脑和亚马逊的 Ubuntu-12.04 中运行它。

这是我的代码

```
 #!/usr/bin/env python
    import pika
    import commands
    import socket
    import base64

    connection = pika.BlockingConnection(pika.ConnectionParameters(
             host='localhost'))
    channel = connection.channel()
    channel.queue_declare(queue='rpc_queue')
    def on_request(ch, method, props, body):
        #print body
        body = base64.b64decode(body)
        print body
        run = commands.getoutput(body)
        response = socket.gethostname()
        print response
        ch.basic_publish(exchange='',
                        routing_key=props.reply_to,
                        properties=pika.BasicProperties(correlation_id = \
                                                      props.correlation_id),
                        body=str(response))
        ch.basic_ack(delivery_tag = method.delivery_tag)
    channel.basic_qos(prefetch_count=1)
    channel.basic_consume(on_request, queue='rpc_queue')
    print " [x] Awaiting RPC requests"
    channel.start_consuming() 
```

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-15T06:38:47.190

终于发现问题了。这是 Pika 中的一个错误，我从 rabbitmq 的邮件列表中获得了这些信息。我已经通过 pypi 安装了 pika。`pip install pika`.

为了解决这个问题，我卸载了 pika

`pip uninstall pika`

并从 git 重新安装

`pip install git+https://github.com/pika/pika.git`.

这解决了它。

# javascript - html 'inception' 跨浏览器问题

> ID：14870837
> 
> 赞同：2
> 
> 时间：2013-02-14T08:44:49.457
> 
> 标签：javascript, html, iframe

我必须使用 iframe 从 textarea 显示 html 代码的预览（整个 html 页面当然以 html 标记...等开头）。它适用于 webkit 浏览器，但不适用于 Firefox。

文本区域：

```
<textarea id="document_token_body">the source code of a html page here</textarea> 
```

预览区：

```
<iframe id="result" width="680px" frameborder="0"></iframe> 
```

和javascript代码：

```
document.getElementById('result').contentWindow.document.documentElement.innerHTML = document.getElementById('document_token_body').value; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:51:25.033

尝试[`contentDocument`](https://developer.mozilla.org/en-US/docs/DOM/HTMLIFrameElement)代替`contentWindow.document`.

在 Firefox 20 中为我工作：http: [//jsfiddle.net/7vyDa/](http://jsfiddle.net/7vyDa/)

# vb.net - DataGridTableStyle VB.Net

> ID：14870844
> 
> 赞同：0
> 
> 时间：2013-02-14T08:45:08.633
> 
> 标签：vb.net, visual-studio-2008, datagrid

我正在使用以下代码尝试将样式应用于我的数据网格，但没有发生任何事情，根本没有创建任何列，我只是得到一个空白的 DataGrid：

有人可以告诉我我做错了什么吗？

```
 adapter.Fill(ds, "dttest")

    DataGrid1.DataSource = ds.Tables("dttest")

    Dim ts As New DataGridTableStyle()
    ts.MappingName = "dttest"

    Dim column1 As New DataGridTextBoxColumn()
    column1.MappingName = "serv"
    column1.Width = 25
    column1.HeaderText = "Serv"
    ts.GridColumnStyles.Add(column1)

    Dim column2 As New DataGridTextBoxColumn()
    column2.MappingName = "op"
    column2.Width = 50
    ts.GridColumnStyles.Add(column2)

    Dim column3 As New DataGridTextBoxColumn()
    column3.MappingName = "deptime"
    column3.Width = 50
    ts.GridColumnStyles.Add(column3)

    Me.DataGrid1.TableStyles.Add(ts) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:56:31.587

看起来您没有调用 DataGrid1.DataBind()。

# mysql - 表单 Mysql 加入

> ID：14870857
> 
> 赞同：1
> 
> 时间：2013-02-14T08:45:58.690
> 
> 标签：mysql

我的表结构是：

```
SELECT * FROM `MYTABLE` WHERE `USERID` = 148 ORDER BY `TABLEDATE` DESC;

ID  USERID STATE_ID   TABLEDATE              
96  148    13         2013-01-08 06:11:34   
554 148     3         2013-01-03 04:46:08   
25  148     2         2013-01-02 04:46:07 
```

我希望在表“MYTABLE”（=> order by STATE_ID DESC limit 1,1）中的用户的第二个最高条目，其日期最后一个条目是日期“2013-01-08”。

我尝试形成查询但失败了。请帮忙？

```
SELECT F1.USERID,
  MAX(F2.TABLEDATE),
  F2.STATE_ID
FROM MYTABLE F1 
 JOIN MYTABLE F2 ON F1.USERID = F2.USERID WHERE
   F1.STATE_ID = 13 AND
   F2.TABLEDATE < F1.TABLEDATE AND
   F1.TABLEDATE <= '2013-01-08 23:59:59' AND
   F1.TABLEDATE >=  '2013-01-08 00:00:00' 
 GROUP BY F1.USERID 
```

输出

```
148 2013-01-03 04:46:08 2 
```

预期产出

```
148 2013-01-03 04:46:08 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:52:13.860

如果您想要具有第二高值的行，`State_ID`您可以简单地执行以下操作：

```
SELECT *
FROM 
(
   SELECT *
   FROM yourTable
   LIMIT 2
) AS sub
ORDER BY State_ID 
LIMIT 1; 
```

# hadoop - 如何使用 Pig 访问远程机器上的 HDFS？

> ID：14870862
> 
> 赞同：0
> 
> 时间：2013-02-14T08:46:10.373
> 
> 标签：hadoop, apache-pig, hdfs

远程机器 (example.host.com) 上安装了 Hadoop。Pig 也安装在该机器上。

如何从其他机器访问该机器上的 hdfs？

我不想从远程复制文件。我只想对那些以 avro 格式存储且具有架构的文件运行查询。

我在本地机器上安装了 Pig，并将以下几行添加到 pig.properties 文件中

```
fs.default.name=hdfs://example.host.com:8020
mapred.job.tracker=example.host.com:8021 
```

但是当我开始 pig 它给出了以下错误

```
2013-02-15 12:35:26,534 [main] INFO  org.apache.pig.Main - Apache Pig version 0.10.1-SNAPSHOT (rexported) compiled Feb 14 2013, 17:55:12
2013-02-15 12:35:26,535 [main] INFO  org.apache.pig.Main - Logging error messages to: /log/path/pig_1360911926530.log
2013-02-15 12:35:26,818 [main] INFO  org.apache.pig.backend.hadoop.executionengine.HExecutionEngine - Connecting to hadoop file system at: hdfs://example.host.com:8020
2013-02-15 12:35:26.907 java[2346:1c03] Unable to load realm info from SCDynamicStore
2013-02-15 12:35:27,574 [main] ERROR org.apache.pig.Main - ERROR 2999: Unexpected internal error. Failed to create DataStorage
Details at logfile: /log/path/pig_1360911926530.log 
```

而在日志文件“/log/path/pig_1360911926530.log”的内容中是

```
Error before Pig is launched
----------------------------
ERROR 2999: Unexpected internal error. Failed to create DataStorage

java.lang.RuntimeException: Failed to create DataStorage
        at org.apache.pig.backend.hadoop.datastorage.HDataStorage.init(HDataStorage.java:75)
        at org.apache.pig.backend.hadoop.datastorage.HDataStorage.<init>(HDataStorage.java:58)
        at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.init(HExecutionEngine.java:205)
        at org.apache.pig.backend.hadoop.executionengine.HExecutionEngine.init(HExecutionEngine.java:118)
        at org.apache.pig.impl.PigContext.connect(PigContext.java:208)
        at org.apache.pig.PigServer.<init>(PigServer.java:246)
        at org.apache.pig.PigServer.<init>(PigServer.java:231)
        at org.apache.pig.tools.grunt.Grunt.<init>(Grunt.java:47)
        at org.apache.pig.Main.run(Main.java:487)
        at org.apache.pig.Main.main(Main.java:111)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:156)
Caused by: org.apache.hadoop.ipc.RPC$VersionMismatch: Protocol org.apache.hadoop.hdfs.protocol.ClientProtocol version mismatch. (client = 61, server = 63)
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:401)
        at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:379)
        at org.apache.hadoop.hdfs.DFSClient.createRPCNamenode(DFSClient.java:119)
        at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:238)
        at org.apache.hadoop.hdfs.DFSClient.<init>(DFSClient.java:203)
        at org.apache.hadoop.hdfs.DistributedFileSystem.initialize(DistributedFileSystem.java:89)
        at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1386)
        at org.apache.hadoop.fs.FileSystem.access$200(FileSystem.java:66)
        at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1404)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:254)
        at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:123)
        at org.apache.pig.backend.hadoop.datastorage.HDataStorage.init(HDataStorage.java:72)
        ... 14 more
================================================================================ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:33:27.577

如您所见，您获得的异常是版本不匹配。你确定 XXX 有 $HADOOP_HOME init 的类路径吗？看起来它确实指向了错误的罐子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T16:21:26.497

在本地机器上提取Hadoop tar文件，然后将配置文件指向集群中的NameNode，然后使用`hadoop fs -get`命令将文件从远程机器获取到本地机器。

# php - 标头位置在 php 5.3.21 中不起作用

> ID：14870866
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:46:19.350
> 
> 标签：php, header, location, switch-statement

我的标头位置无法在使用 php 5.3.21 的服务器上工作。它确实适用于 5.4.7 的本地主机。它向后兼容..有人能告诉我为什么这是错误的吗？

```
switch ($table) {
    case "hardcover":
    header('location:hardcover.php?type=Aanvraag&relID='.$relID.'');
    break;
} 
```

它是 switch case 的一部分，它决定在您从 HTML 选项列表中输入某个值之后去哪里。当我回显`$relID`时，`$table`在同样的情况下，它确实回显了这些项目。但不知何故，它不会重定向到标题..

结果来自：`ini_set("display_errors", "On");`

`Warning: Cannot modify header information - headers already sent by (output started at /customers/f/f/e/tdmdev.nl/httpd.www/graficrm/htmlheader.php:7) in /customers/f/f/e/tdmdev.nl/httpd.www/graficrm/aanvradd.php on line 47`

第 47 行是标题所在的行。第 7 行是将会话回显到 html 标题区域的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:01:44.567

`ob_start()`在页面的开头尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:57:13.650

```
switch ($table) {
    case "hardcover":
    header('Location:hardcover.php?type=Aanvraag&relID='.$relID.'');
    exit();   // <-stop and allow header to do its thang!
    break;
} 
```

# sql - 在 SQL SERVER 中使用 TSQL 打开行进行编辑，类似于 Oracle SELECT ... FOR UPDATE

> ID：14870867
> 
> 赞同：0
> 
> 时间：2013-02-14T08:46:26.707
> 
> 标签：sql, sql-server, sql-server-2008

为了在 SQL Server 中编辑表行，我们右键单击并编辑前 200 行。但是如果你有很多桌子，那会很乏味。是否有任何 TSQL 命令可以打开打开的行进行编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:51:27.047

不，没有。TSQL 是一种“后端”语言。“编辑前 200 行”是 SSMS 的前端功能。

# database - 持续集成中的数据库变更管理

> ID：14870873
> 
> 赞同：1
> 
> 时间：2013-02-14T08:46:48.040
> 
> 标签：database, scripting, tfs, continuous-integration

将数据库更改管理添加到持续集成场景的最佳方法是什么？我已经阅读了一些问题和答案，但它们是从 2009 年开始的，并且肯定有一些同时开发的技术和工具。

我正在使用 TFS 2010，但这不是重点。我对如何在持续集成的同时管理数据库更改的概念感兴趣。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T15:54:48.873

我会推荐带有 SQL Source and Compare 的 Red Gate 堆栈——它绝对可以为拥有一个完整的带有 sql 集成的 CI 环境大有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-14T18:21:58.367

我们已经成功地将[Liquibase](http://www.liquibase.org/)用于数据库变更管理。

使用[最佳实践，](http://www.liquibase.org/bestpractices)您可以为数据库定义多个更改日志，并在 CI 服务器（在我们的示例中为 TeamCity）的帮助下使所有环境保持最新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T09:34:09.753

除了 Red Gate 工具，您还可以尝试使用[ApexSQL Diff](http://www.apexsql.com/sql_tools_diff.aspx)和[A​​pexSQL 版本](http://www.apexsql.com/sql_tools_version.aspx)来完成同样的事情。

这些工具中的任何一个都不会出错，如果您想要第三个选项，您可以查看 Idera 的工具。

请注意，尽管所有这些都是商业工具，但它们都有 14-30 天的试用期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T19:36:05.243

我们刚刚发布了用于 SQL Server 的数据库强制变更管理解决方案（商业解决方案）DBmaestro TeamWork。

它对真实的数据库对象（而不是与数据库断开连接的脚本）强制执行版本控制过程

它使用基线感知分析生成 sql 脚本以促进更改，该分析了解更改的性质，例如：更改应该被忽略，因为它来自不同的分支或关键修复，或者存在冲突，您必须合并过程代码。

免责声明——我在 DBmaestro 工作。

话虽如此，我鼓励您阅读资深数据库专家 Ben Taylor 对数据库强制管理解决方案的全面、公正的评论，他在 LinkedIn [https://www.linkedin.com/pulse/article/20140907002729-287832-solve-数据库更改管理与 dbmaestro](https://www.linkedin.com/pulse/article/20140907002729-287832-solve-database-change-mangement-with-dbmaestro)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-12T20:21:35.027

我们有一个采用以下方法的新解决方案：

1.  开发人员编写单独的 SQL 更改脚本并将其提交到源代码控制。
2.  我们的程序 ( [OneScript](https://www.onescript.com/) ) 从源代码管理中提取更改脚本文件，对其进行过滤和排序，并生成单个发布脚本文件。（效果比听起来好。）
3.  然后将该发布脚本文件应用于数据库以进行发布。

我们的主页更详细[地](https://www.onescript.com/)解释了这个过程。它还有一个示例的链接，该示例从 Subversion 挂钩自动执行这些步骤（但这也可能来自 TFS）。提交后不久，开发人员会收到一封电子邮件，说明发布是成功还是有错误。包括 PowerScript 代码。

这个想法是，最终您将拥有一个经过全面测试的发布脚本，并且完全相同的脚本会在您的所有 pre-prod 环境中移动，并最终用于将发布应用到您的 prod 数据库。

免责声明 - 我为制作 OneScript 的公司工作。

# javascript - 需要帮助修复我的页面加载微调器

> ID：14870879
> 
> 赞同：2
> 
> 时间：2013-02-14T08:47:11.253
> 
> 标签：javascript, jquery, html

我有一个隐藏的 div，当单击显示微调器的按钮时会显示该 div，但是如果您在离开页面后单击后退按钮，微调器仍然可见。我认为 javascript 需要，`$(document).ready(function() {`但我不知道如何实现它。如果用户按下后退按钮，我不希望微调器可见。

这就是我到目前为止所拥有的。Javascript

```
<script type="text/javascript">

function showDiv() {
   document.getElementById('spinner').style.display = "block";
}

</script> 
```

用于显示 div 的 div 和链接

```
<div id="spinner"  style="display:none;" class="spinner" ><img src="images/loader2.gif" alt="Loading"/></div>

<a class="index_buttons" href="search_members.php" onclick="showDiv()">Search Members </a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:51:21.287

要在页面加载时隐藏微调器，请执行以下操作：

```
 $(document).ready(function() {
       $("#spinner").hide();
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:50:38.963

由于您将其标记为 jQuery..

```
/* Calls this function on ready */
$(function() {
  /* Hide the spinner whenever the page loads */
  $("#spinner").hide();
      ;
  $(".index_buttons").click(function() { $("#spinner").show(); });
}); 
```

现在，每次单击该类`index_buttons`的按钮时，该按钮都将可见。如果您想切换微调器，您可能需要查看`toggle()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T08:53:04.860

使用准备好的文档如下：

```
$(document).ready( function() {
    hideSpinner(); // Initiates the hide function when document is ready.
});

function hideSpinner() {
   $('#spinner').hide();
} 
```

# wicket - 使用 Atmosphere 和 Wicket 的配置 + 代码示例？

> ID：14870883
> 
> 赞同：2
> 
> 时间：2013-02-14T08:47:31.687
> 
> 标签：wicket, atmosphere

[这个问题](https://stackoverflow.com/questions/13984687/example-of-wicket-atmosphere-with-channel)的答案指向了一个无效的示例，并且 [邮件列表上的对话](http://osdir.com/ml/users-wicket.apache.org/2012-06/msg00248.html)非常模糊。有没有将 Wicket 6.5.0 与 Atmosphere 一起使用的工作示例？

或者是否有任何其他可行的服务器推送技术与 wicket 集成？

具体来说，我正在寻找一个完整的 web.xml（如果需要，可以使用 atmosphere.xml）、Application 和 Page 类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T10:00:53.763

github 项目 RJo 链接到对我来说很好。 [检票口气氛快速入门](https://github.com/papegaaij/wicket-atmosphere-quickstart)

我使用嵌入式码头服务器来运行它并去了`http://localhost:8080/app/`

# javascript - PhoneGap - 按下谷歌地图“使用条款”时如何返回？

> ID：14870884
> 
> 赞同：5
> 
> 时间：2013-02-14T08:47:34.607
> 
> 标签：javascript, android, google-maps, cordova

我在包含地图的 PhoneGap 上制作这个应用程序。在标准的谷歌地图上，它的右下角有一个“使用条款”。如果我单击它，则会打开一个全新的屏幕。但我不能使用集成的 Android 后退按钮。

我该怎么办？

在项目的其他地方，我使用了这个（在这个下面）javascript 返回上一个屏幕 - 但由于“使用条款”屏幕不是 JS 文件，我如何告诉它它可以/不能做（回到前一个屏幕）？

```
document.addEventListener("backbutton", function(e){
    e.preventDefault();
    navigator.app.backHistory();
}, true); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-15T21:46:54.743

如果你仍然有这个问题。我的解决方案是将点击事件捕获到地图画布中的链接，防止默认，获取链接 url，然后在 InAppBrowser 中打开 url。

```
$('#map_canvas').on('click', 'a', function(e){
    e.preventDefault();
    window.open($(this).attr('href'), '_blank');
}); 
```

[http://docs.phonegap.com/en/2.7.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.7.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

# python - 使用 Django 模板的前端 HTML

> ID：14870885
> 
> 赞同：0
> 
> 时间：2013-02-14T08:47:35.293
> 
> 标签：python, html, django

我在 Django 中编写了这个视图来显示电影名称列表。

```
def index(request):
    latest_movie_list = MoviesDB.objects.values('movie_name').distinct()
    t = loader.get_template('movies/index.html')
    c = Context({
        'latest_movie_list': latest_movie_list,
    })
    return HttpResponse(t.render(c)) 
```

然后我写了一个模板如下。

```
{% if latest_movie_list %}
    <ul>
    {% for movie in latest_movie_list %}
        <li>
        <a href="/movies/{{ movie.id }}/">{{ movie.movie_name }}</a>
        </li>
    {% endfor %}
    </ul>
{% emdif %} 
```

现在我需要如何为此编写前端 HTML？

请参阅我编写的以下代码。

```
<html>
<head><title>Home</title></head>
<body>
<ul>
How to get the movie names returned by the view to display here..?
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:31:22.173

您可以使用`include`标记将模板包含到您的 HTML 文件中。例如

```
{% include movie_list_template %} 
```

看[这里](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#include)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T16:14:58.073

根据

```
<html>
<head><title>Home</title></head>
<body>
    {% block content %}{% endblock %}
</body>
</html> 
```

电影列表

```
{% extends "base.html" %}

{% block content %}
{% if latest_movie_list %}
    <ul>
    {% for movie in latest_movie_list %}
        <li>
        <a href="/movies/{{ movie.id }}/">{{ movie.movie_name }}</a>
        </li>
    {% endfor %}
    </ul>
{% endif %}
{% endblock %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T16:02:17.683

我不明白你所说的“整合”是什么意思。Django 模板*是*HTML。另一个模板也是 HTML。如果您希望您的电影列表出现在`ul`主模板中的标签之间，那么只需将该代码放在那里。

（最终，您需要了解模板继承，但由于您在第一步看起来很困惑，所以现在可能太远了。）

# c# - 如何在操作中重命名参数

> ID：14870892
> 
> 赞同：1
> 
> 时间：2013-02-14T08:48:10.220
> 
> 标签：c#, asp.net-mvc

我有一个动作：

```
 public JsonResult IsAwesome(string value){...} 
```

但在我的表单中，这个参数看起来像“ **ViewModelName.SomePropValue** ”，我不能在那里改变它。如何使其工作以使“ViewModelName.SomePropValue”中的值位于“ **value** ”操作参数中。

例如：

```
<input name="ViewModelName.SomePropValue" value="MYDATA" />

public JsonResult IsAwesome(string value){
      value=="MYDATA"; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:51:18.533

一种方法是使用一个`FormModel`类，以便模型绑定器可以绑定到每个属性。因此，在您的情况下，您的表单将采用 ViewModel 输入

```
class ViewModel
{
  public FormModel FormModel{get;set;}
}
public class FormModel
{
  public string SomePropValue{get;set;}
}
public void action(ViewModel FormViewModel) 
```

**另一种选择**是使用局部视图。

在采用 ViewModel 的视图中，呈现部分内容：

```
@Html.RenderPartial("Form",Model.FormModel) 
```

在渲染的空间视图中：

```
@Html.EditorFor(model=>model.SomePropValue); 
```

这意味着您的操作现在可以获取一个`FormModel`对象：

```
public void action(FormModel formModel) 
```

# ios - 将我的应用程序迁移到 iPhone 5 分辨率

> ID：14870894
> 
> 赞同：0
> 
> 时间：2013-02-14T08:48:19.330
> 
> 标签：ios, objective-c, ios6, iphone-5

我正在将我的应用程序迁移到 iPhone 应用程序到 iPhone 5 分辨率。我从stackoverflow中的其他问题中看到了这一点：

例子：

```
CGRect screenBounds = [[UIScreen mainScreen] bounds];
if (screenBounds.size.height == 568) {
    // code for 4-inch screen
} else {
    // code for 3.5-inch screen
} 
```

但似乎，我需要为我的所有图像添加此代码。有没有更简单的方法？意思是更通用的方式。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:53:04.213

Build an app using iOS 6 as the Base SDK and use the Auto Layout feature to make screens that can scale for all type of screens. You'll need Xcode 4.5 to do this. Add a splash image named `Default-568h@2x.png`

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations

    switch (interfaceOrientation) {

        case UIInterfaceOrientationPortrait:
        case UIInterfaceOrientationPortraitUpsideDown:
            //[self ArrangeControllsFor_Protrate];
            [self performSelector:@selector(ArrangeControllsFor_Protrate) withObject:Nil afterDelay:0.005f];
            return YES;
            break;
        case UIInterfaceOrientationLandscapeLeft:
        case UIInterfaceOrientationLandscapeRight:
            [self performSelector:@selector(ArrangeControllsFor_LandScape) withObject:Nil afterDelay:0.005f];
            return YES;
            break;
    }
}
-(void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration{

    switch (toInterfaceOrientation){

        case UIInterfaceOrientationPortrait:
        case UIInterfaceOrientationPortraitUpsideDown:
            [self performSelector:@selector(ArrangeControllsFor_Protrate) withObject:Nil afterDelay:0.005f];
            break;
        case UIInterfaceOrientationLandscapeLeft:
        case UIInterfaceOrientationLandscapeRight:
            [self performSelector:@selector(ArrangeControllsFor_LandScape) withObject:Nil afterDelay:0.005f];
            break;
    }
}
-(NSUInteger)supportedInterfaceOrientations{

    return UIInterfaceOrientationMaskAll;
}
-(BOOL)shouldAutorotate{

    return YES;
}
-(void)ArrangeControllsFor_Protrate{

    [[UIApplication sharedApplication] setStatusBarHidden:NO];
    [self.view setBounds:CGRectMake(0, 0, 320,568)];
    [self.view setFrame:CGRectMake(0, 0, 320, 568)];
}

-(void)ArrangeControllsFor_LandScape{

    [[UIApplication sharedApplication] setStatusBarHidden:YES];
    [self.view setBounds:CGRectMake(0, 0, 568, 320)];
    [self.view setFrame:CGRectMake(0, 0,  568, 320)];
}
- (void)viewWillAppear:(BOOL)animated{

    UIInterfaceOrientation statusBarOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    if(UIInterfaceOrientationIsPortrait(statusBarOrientation))
    {
        [self ArrangeControllsFor_Protrate];
    }
    else
    {
        [self ArrangeControllsFor_LandScape];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:06:26.460

为 UIImage 类创建一个类别。将此逻辑移至 UIImage 类。

现在将现有的 UIImage 创建函数更改为您在类别中创建的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:06:30.937

如果您是注册的 Apple 开发人员，您可以使用 AutoLayout 我推荐您可以从去年的 WWDC 中找到的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T09:28:38.327

检查并在`prefix.h`文件中写入

```
#define IPHONE5 ( fabs( ( double )[ [ UIScreen mainScreen ] bounds ].size.height - ( double )568 ) < DBL_EPSILON ) 
```

每当您想检查时，只需检查

```
if (IPHONE 5) {
     // Code for iPhone 5 Device
      enter code here
} else if (!IPHONE5) {
    // Code for 3.5 inch (iphone 4 nad less)
     enter code here
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-24T09:57:35.180

1.  首先，您必须创建尺寸为 640 x 1136 和视网膜质量的启动图像。
2.  然后将图像命名为 Default-568h@2x.png 并将其设置为您的 iphone 应用程序中的启动图像。
3.  然后你必须设置自动调整大小的蒙版。
4.  创建您希望与 iPhone 5 屏幕分辨率兼容的所有必需图像。
5.  在你的 iPhone 5 上运行你的应用程序，一切都应该按要求运行。

# php - 防止时间/内存密集型 php 脚本不断崩溃/减速

> ID：14870899
> 
> 赞同：1
> 
> 时间：2013-02-14T08:48:59.243
> 
> 标签：php

我有一个使用 PHPExcel 插件将结果导出到 excel 中的 php 脚本。现在由于结果有大约 40 列和超过 15k+ 行，它似乎需要很多时间，这对我来说不是问题。

但是我发现（我的 WAMPserver 安装的）apache 服务器在一定时间间隔后不断崩溃，并且它也减慢了我的机器速度（脚本在我的机器本地运行）。

这里有两件事我需要帮助 1) 阻止 apache 服务器崩溃 2) 防止 PC 变慢

我有 set_time_limit(0);ini_set('memory_limit', '-1'); 在我的代码中，所以我删除了脚本超时的限制以及施加的内存限制。

导出时间对我来说不是一个因素......如果在 excel 中导出结果也需要 20 分钟以上，那应该没问题（尽管如果有更快的替代方案，我更愿意；））。只是脚本应该在不减慢我的机器速度的情况下执行（所以我可以多任务处理）并且 apache 不应该继续崩溃

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:05:05.057

以下是一些可能会有所帮助的提示：

1.  不要使用阿帕奇。使用[PHP 命令行界面](http://php.net/manual/en/features.commandline.php)。
2.  [将 PHP 脚本编译为](http://www.bambalam.se/bamcompile/)可执行文件以加快执行速度。
3.  降低 Apache（或命令行）进程的优先级。
4.  考虑[将脚本转换](http://www.numiton.com/products/ntile-ptoj/ptoj-overview.html)为更快（或更稳定）的语言（Java、C#、C++、...）

# capistrano - 如何找到流浪IP？

> ID：14870900
> 
> 赞同：62
> 
> 时间：2013-02-14T08:49:05.987
> 
> 标签：capistrano, vagrant

我一直在使用 Capistrano 开发自动化部署，并使用 Vagrant 作为我的测试虚拟服务器。

问题是，我需要 Vagrant 的 IP 才能“`ssh`融入其中”。

我尝试`ifconfig`并获得了 IP，但看起来它不是确切的流浪 IP。

任何人都可以帮我获得 Vagrant IP 吗？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2016-09-28T23:31:46.473

默认情况下，vagrant box 没有任何 IP 地址。为了找到 IP 地址，您只需在`Vagrantfile`then 调用中分配 IP 地址`vagrant reload`

如果您只需要从主机访问 vagrant 机器，那么您只需要设置“私有网络”即可。取消注释 default 中的相应行`Vagrantfile`，或添加此代码段。如果您希望您的虚拟机出现在`172.30.1.5`它上面，则如下所示：

`config.vm.network "private_network", ip: "172.30.1.5"`

了解有关专用网络的更多信息。[https://www.vagrantup.com/docs/networking/private_network.html](https://www.vagrantup.com/docs/networking/private_network.html)

如果您需要在主机之外访问 vagrant，例如针对 iOS 或 Android 等移动设备进行开发，则必须启用公共网络，您可以使用静态 IP（例如`192.168.1.10`DHCP）或 DHCP。

`config.vm.network "public_network", ip: "192.168.1.10"`

了解有关配置公共网络的更多信息[https://www.vagrantup.com/docs/networking/public_network.html](https://www.vagrantup.com/docs/networking/public_network.html)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-03-11T18:15:44.777

我发现我**确实**需要 IP 才能`/etc/hosts`在主机系统上配置以指向新 VM 上的服务。

这是我用来获取 IP 的粗略版本。让 Vagrant 发挥它的 SSH 魔法，向虚拟机询问它的地址；根据您的需要进行调整。

```
new_ip=$(vagrant ssh -c "ip address show eth0 | grep 'inet ' | sed -e 's/^.*inet //' -e 's/\/.*$//'") 
```

* * *

我刚刚在[Vagrant Docs](https://docs.vagrantup.com/v2/networking/private_network.html)中找到了这个。看起来他们认为这是一种有效的方法：

> 这将自动从保留的地址空间分配一个 IP 地址。可以通过使用 vagrant ssh SSH 进入机器并使用适当的命令行工具（例如 ifconfig）找到 IP 地址来确定 IP 地址。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-02-14T17:51:45.753

跑：

```
vagrant ssh-config > .ssh.config 
```

然后在`config/deploy.rb`

```
role :web, "default"     
role :app, "default"
set :use_sudo, true
set :user, 'root'
set :run_method, :sudo

# Must be set for the password prompt from git to work
default_run_options[:pty] = true
ssh_options[:forward_agent] = true
ssh_options[:config] = '.ssh.config' 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-12-20T21:57:18.247

打开一个终端，cd 到你的 Vagrantfile 的路径并写下这个

(Linux)

```
vagrant ssh -c "hostname -I | cut -d' ' -f2" 2>/dev/null 
```

(OS X)

```
vagrant ssh -c "hostname -I | cut -d' ' -f2" 2>/dev/null | pbcopy 
```

Linux 的命令也适用于 Windows。我没有办法测试，对不起。

来源：[https ://coderwall.com/p/etzdmq/get-vagrant-box-guest-ip-from-host](https://coderwall.com/p/etzdmq/get-vagrant-box-guest-ip-from-host)

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2015-02-11T18:30:41.467

我为此开发了一个小型**vagrant-address**插件。它简单、跨平台、跨供应商，并且不需要编写脚本。

[https://github.com/mkuzmin/vagrant-address](https://github.com/mkuzmin/vagrant-address)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-08-02T15:46:22.630

在终端类型中：

```
ip addr show 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2015-02-03T22:48:39.820

我在 VagrantFile 做过：

```
REMOTE_IP = %x{/usr/local/bin/vagrant ssh-config | /bin/grep -i HostName | /usr/bin/cut -d\' \' -f4}
run "ping #{REMOTE_IP}" 
```

如您所见，我使用了 "%x{}" ruby​​ 函数。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-14T22:05:19.120

终止打开的连接`vagrant ssh`将显示地址，因此可以执行虚拟或空命令：

```
$ vagrant ssh -c ''
Connection to 192.168.121.155 closed. 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-01-02T18:50:52.567

我们使用 VirtualBox 作为提供者，对于虚拟盒子，您可以使用它`VBoxManage`来获取 IP 地址

```
VBoxManage guestproperty get <virtual-box-machine-name> /VirtualBox/GuestInfo/Net/1/V4/IP 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-07T13:09:37.273

我需要知道这一点来告诉用户要向其主机的主机文件添加什么。这仅使用 bash 在 vagrant 中对我有用：

```
external_ip=$(cat /vagrant/config.yml | grep vagrant_ip | cut -d' ' -f2 | xargs)
echo -e "# Add this line to your host file:\n${external_ip}     host.vagrant.vm" 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-22T12:10:56.623

因为我还没有在这里看到它......当你`vagrant ssh`进入盒子时，我意识到它实际上告诉你接口的IP地址。你可以在那里得到它。例如。

```
 {~/Documents/jupyterhub-ansible} (features *%)$  vagrant ssh
Welcome to Ubuntu 18.04.2 LTS (GNU/Linux 4.15.0-50-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/advantage

  System information as of Wed May 22 12:00:34 UTC 2019

  System load:  0.12              Processes:             101
  Usage of /:   56.5% of 9.63GB   Users logged in:       0
  Memory usage: 19%               IP address for enp0s3: 10.0.2.15
  Swap usage:   0%                IP address for enp0s8: 192.168.33.10

10 packages can be updated.
1 update is a security update.

Last login: Wed May 22 12:00:04 2019 from 192.168.33.1
vagrant@ubuntu-bionic:~$ 
```

在我的流浪文件中，我分配了这样的地址：

`config.vm.network "private_network", ip: "192.168.33.10"`

如你所见， `IP address for enp0s8: 192.168.33.10`

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-04-01T07:58:19.123

我遇到了这样的事情，所以我在 Vagrant 框中添加了运行 bash 脚本，并在主机文件夹中输出公共 IP 地址文件。

> 在 Vagrantfile 中添加这个

```
...
  config.vm.provision "shell", path: "public-ip.sh"
  config.vm.synced_folder '.', '/vagrant'
... 
```

> 在同一个 Vagrantfile 文件夹中创建 bash 脚本名称 public-ip.sh

```
 #!/bin/bash 

# change eth1 to your desired network interface, in my vagrantfile i have first NAT and second is bridge dhcp network and i want to know random dhcp IP.

box_ip=$(ip address show eth1 | grep 'inet ' | sed -e 's/^.*inet //' -e 's/\/.*$//')" 

echo "$box_ip" | tee public_ip.txt

echo "add box ip to your host machine /etc/hosts entry so you can connect the box using box hostname" 
```

当您执行 vagrant up 时，您将看到公共 ip 或私有 ip 框的 vagrant 输出，您可以在任何时候使用将其添加到主机条目

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2018-04-19T17:37:04.900

我知道这篇文章很旧，但我想对此补充几点！

你可以试试

```
vagrant ssh -c "ifconfig | grep inet" hostname 
```

如果您为您的客人单独设置了一个名字，这将很容易！

# linux - 如何使用 ramdisk 减少嵌入式 linux 中的“缓存”内存

> ID：14870905
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:49:44.183
> 
> 标签：linux, caching, memory, embedded

我运行一个小型 linux 嵌入式系统（2.6.29.6）。内核从 Flash 加载到 ramdisk (tmpfs)。我需要找到更多的内存。

从 /proc/meminfo 我看到我有一个“缓存：”使用大量内存。我的理解是这是磁盘缓存。但是，我没有传统的硬盘。我有一个内存盘。所以我认为，就我的情况而言，这个缓存只是在消耗我宝贵的内存。

有没有办法减少这个缓存的大小？

提前致谢！

磅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:37:22.377

Linux 将 tmpfs 内容使用的内存显示为“缓存”。因此，如果您有大量 tmpfs 数据，它将占用大量内存。

此外，如果您从任何其他介质加载了任何内容（可能是稍后存储到 tmpfs 的数据），它也可能进入“缓存”池。但这不用担心——当需要其他任何东西时，内存会被释放。

# mysql - Mysql优化问题

> ID：14870908
> 
> 赞同：0
> 
> 时间：2013-02-14T08:49:59.113
> 
> 标签：mysql, query-optimization

任何猜测为什么在处理 300 000 行时此语句花费的时间太长。基本上，此查询用于查找重复项。

```
SELECT DISTINCT 
    a.Id,
    b.Id as sid
FROM 
    csv_temp a
INNER JOIN 
    csv_temp b ON a.firstname = b.firstname AND 
    a.lastname = b.lastname  AND 
   ((a.address = b.address) OR 
    (a.zip = b.zip) OR 
    (a.city = b.city AND a.state = b.state) )
WHERE 
    a.Id <> b.Id AND 
    a.status=2 AND 
    b.status=1 AND 
    a.flag !=1 AND 
    b.flag !=1 
```

![在此处输入图像描述](../Images/8e22628952a3dfe947b711294b3f1557.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:31:39.657

OR 的性能似乎通常很差，在 JOIN 条件下，我预计情况会更糟。尝试使用 3 个 SELECT（每个 ORed 条件一个）并将结果合并在一起。如果这样做，则怀疑不需要 DISTINCTS：-

```
SELECT  
    a.Id,
    b.Id as sid
FROM 
    csv_temp a
INNER JOIN 
    csv_temp b ON a.firstname = b.firstname AND 
    a.lastname = b.lastname  AND 
   a.address = b.address
WHERE 
    a.Id <> b.Id AND 
    a.status=2 AND 
    b.status=1 AND 
    a.flag !=1 AND 
    b.flag !=1
UNION
SELECT  
    a.Id,
    b.Id as sid
FROM 
    csv_temp a
INNER JOIN 
    csv_temp b ON a.firstname = b.firstname AND 
    a.lastname = b.lastname  AND 
    a.zip = b.zip
WHERE 
    a.Id <> b.Id AND 
    a.status=2 AND 
    b.status=1 AND 
    a.flag !=1 AND 
    b.flag !=1
UNION
SELECT  
    a.Id,
    b.Id as sid
FROM 
    csv_temp a
INNER JOIN 
    csv_temp b ON a.firstname = b.firstname AND 
    a.lastname = b.lastname  AND 
    a.city = b.city AND a.state = b.state
WHERE 
    a.Id <> b.Id AND 
    a.status=2 AND 
    b.status=1 AND 
    a.flag !=1 AND 
    b.flag !=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:29:01.800

现在在比较中使用的列上添加索引后检查使用解释计划

# velocity - 按名称调用速度宏

> ID：14870909
> 
> 赞同：3
> 
> 时间：2013-02-14T08:50:02.013
> 
> 标签：velocity

是否可以通过名称调用速度宏，例如：

```
#macro (sayHello)
 Hello!
#end

#set ($macroName = "sayHello")

#$macroName() 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T00:05:45.037

```
#set( $call = "#${macroname}()" )
#evaluate($call) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:14:45.797

快速浏览[文档](http://velocity.apache.org/engine/1.5/user-guide.html#velocimacros)并不表示对此的支持。但是您可以执行以下操作：

```
#macro(myMacro1 $param1 $param2)
    ## stuff here...
#end

#macro(myMacro2 $param1 $param2)
    ## stuff here...
#end

#if($condition)
    #myMacro1
#else
    #myMacro2
#end 
```

或者，您的宏可能需要采用其他参数来考虑所有情况。

# java - Spring 身份验证：不同的登录表单

> ID：14870912
> 
> 赞同：0
> 
> 时间：2013-02-14T08:50:19.813
> 
> 标签：java, spring, authentication

我有一个带有弹簧安全性的网络项目。我有不同的角色，例如 ROLE_ADMIN、ROLE_USER、ROLE_TESTER、ROLE_ANONYMOUS，具有不同的拦截 URL，例如：

```
<intercept-url pattern="/secure/admin/**" access="ROLE_ADMIN" />
<intercept-url pattern="/secure/**" access="ROLE_USER,ROLE_ADMIN" />
<intercept-url pattern="/**" access="ROLE_ANONYMOUS,ROLE_USER,ROLE_ADMIN" /> 
```

现在，如果有人试图访问 /secure/admin/user/list.mvc，我希望他被重定向到另一个登录表单，而不是正常的登录表单：

```
<form-login  login-processing-url="/j_spring_security_check" login-page="/start.mvc"
       authentication-success-handler-ref="authenticationSuccessHandler"
       authentication-failure-handler-ref="authenticationFailureHandler" 
/> 
```

有没有可能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T12:25:50.180

使用 Spring Security >= 3.1，您可以拥有多个`http`类似于此的元素：

```
<!-- Configure realm for system administration users -->
<security:http pattern="/secure/admin/**" create-session="stateless">
    <security:intercept-url pattern="/**" access='ROLE_ADMIN' requires-channel="https" />
    ...form login... etc
</security:http>

<!-- Configure realm for standard users -->
<security:http auto-config="true" access-denied-page="/error/noaccess" use-expressions="true" create-session="ifRequired">
    <security:form-login login-page="/login"
            ...
            ...
</security:http> 
```

# actionscript-3 - 拼接函数在数组中添加额外元素

> ID：14870913
> 
> 赞同：0
> 
> 时间：2013-02-14T08:50:20.830
> 
> 标签：actionscript-3, apache-flex, flex3

当我使用 splice 函数时，它会插入点，但会复制数组最后一个元素的副本。

```
 for(indexpoint=0;indexpoint<intpoints.length;indexpoint++)

    { 

            temp.points[indexpoint].x = intpoints[indexpoint].x+this.x;

            temp.points[indexpoint].y = intpoints[indexpoint].y+this.y;

    }

    const point:Point = new Point();
    point.x = (intpoints[2].x+intpoints[3].x)/2+this.x;
    point.y = (intpoints[2].y+intpoints[3].y)/2+this.y;

    temp.points.splice(3,0, point); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:02:45.510

那不应该发生。

我试过这个：

```
var a:Array = new Array(new Point(0,0), new Point(0, 1), new Point(0, 2));
var p:Point = new Point(0, 3);
a.splice(3, 0, p);
trace(a); 
```

这可以正确跟踪： (x=0, y=0),(x=0, y=1),(x=0, y=2),(x=0, y=3)

您可以在调用 splice 之前尝试跟踪 temp.points 数组吗？

# java - 解析 Tomcat 日志文件

> ID：14870914
> 
> 赞同：0
> 
> 时间：2013-02-14T08:50:20.900
> 
> 标签：java, file, logging

大家好，我从一个星期左右开始一直在尝试这个。但想不出办法。我使用 tomcats，我的客户定期向我发送 2 到 3GB 的日志文件，说明存在文件未找到等问题。有时他们没有正确的信息来 grep 通过日志文件。所以我决定构建一个可以解析所有日志文件并可以对日志进行相应分类的工具。现在我无法在内存中存储 4 GB 的数据，也无法将其放回文件中，因为读取 4GB 将花费大量时间。即使我正在使用文件通道和线程。数据库当然不是一种选择，因为它会再次减慢系统速度。所以我想知道是否有任何其他方法来存储解析的内容，这样每当我想检查 404 错误时，我必须在列表中获取所有 404 错误。

我不想使用数据库。所以数据库当然不是这个问题的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:09:07.353

“您是否想使用数据库”并不重要。您所做的实际上是构建数据图。这就是数据库的设计目的。现在您可以选择使用其他人编写的并且经过广泛测试的版本，或者您可以选择自己制作。无论您是否愿意，您都在使用数据库。

如果你想要一个轻量级、可嵌入、性能良好的文档/图形“无 SQL”数据库，它与 Maven 配合得很好，OrientDB 是你的朋友，使用它非常直观。此外，您还可以根据需要选择是要使用内存数据库、文件支持的数据库还是更传统的客户端/服务器解决方案。最好的部分是它有一个对象抽象层，所以你甚至不必弄乱 ORM 框架。

你真的应该试试。它会让你所有的痛苦消失。

链接：[http ://www.orientdb.org/](http://www.orientdb.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:48:54.440

您可以使用[Apache Lucene](https://lucene.apache.org)。使用 nio 文件处理程序将文件划分为卡盘，并使用 Apache Lucene 进行索引和文本搜索。这可能无法解决您的完整问题，但如果您不想使用数据库，这是一个更好的解决方案。

# javascript - 为什么“从模型中获取”不起作用？

> ID：14870922
> 
> 赞同：0
> 
> 时间：2013-02-14T08:51:04.747
> 
> 标签：javascript, kendo-ui

这两个记录有什么区别？它们应该同样有效。

```
<span data-bind="text: fullName"></span>
<script>
var viewModel = kendo.observable({
    firstName: "John",
    lastName: "Doe",
    fullName: function() {
        //return this.firstName + " " + this.lastName;
        return this.get("firstName") + " " + this.get("lastName");
    }
});

kendo.bind($("span"), viewModel);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:30:17.277

get 和 set 方法对于[MVVM 框架](http://docs.kendoui.com/documentation/getting-started/framework/mvvm/overview)至关重要。它们用于通知 ui 有应用于视图模型的更改。

# css - 数据表（jquery）样式页码错误

> ID：14870923
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:51:06.220
> 
> 标签：css, jquery-datatables

我正在使用主题 UI 黑暗的数据表。除了右下角的页码外，该表看起来很棒。

它看起来像这样：

![在此处输入图像描述](../Images/513413eb1fa65a93e420a2543acdaaef.png)

我在正确的路径上有样式和图像。有任何想法吗？

已解决：我添加了 jquery.dataTables_themeroller.css 然后它起作用了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T08:55:06.713

也许你的一个css文件用他自己的覆盖了主题样式，你得到了这个。查看萤火虫以了解这一点。

# mysql - 事务是否涵盖子程序？

> ID：14870926
> 
> 赞同：2
> 
> 时间：2013-02-14T08:51:16.990
> 
> 标签：mysql, sql, sql-server, tsql, transactions

当我`begin transaction`和`exec`一个存储过程时，该事务是否涵盖了我执行的存储过程所做的更改？是否会`rollback transaction`取消执行的存储过程所做的更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:58:02.220

是的，它确实涵盖了。在同一事务范围内对数据库执行的所有操作都将回滚。

# blackberry - 如何以编程方式删除 BlackBerry 中的 Service Book？

> ID：14870933
> 
> 赞同：2
> 
> 时间：2013-02-14T08:51:46.873
> 
> 标签：blackberry, java-me, blackberry-jde

我正在编写一个应用程序，它将在手机启动时删除某个服务簿。但我找不到实现这一目标的方法。

如何以编程方式删除服务手册？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T16:01:29.737

BlackBerry java SDK 不提供任何 API 来删除 ServiceBook。

作为一个选项，使用 EventInjector 并注入一系列关键事件，以模拟用户活动，以删除服务手册。但这不是一种简单的方式，也不是一种优雅的方式。

# android - 滚动视图内的多个Edittext

> ID：14870935
> 
> 赞同：0
> 
> 时间：2013-02-14T08:51:49.203
> 
> 标签：android

嗨，我在垂直滚动视图中有多个编辑文本，当我滚动时无法转到最后一个编辑文本，中间的编辑文本总是得到关注。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:00:01.623

```
 <EditText
        android:id="@+id/EmailET"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:inputType="textEmailAddress" >

        <requestFocus /> <!--add this line to the first EditText where you want to get focus-->
    </EditText> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:53:25.277

检查属性**android:focusable**和**android:focusableintouchmode。**

```
<EditText
    android:id="@+id/etFirst"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:focusable="true"
     android:focusableintouchmode="true">

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/etSecond"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:focusable="true"
     android:focusableintouchmode="true">
</EditText> 
```

# ruby-on-rails - 两个 ActiveRecord 模型关联

> ID：14870936
> 
> 赞同：1
> 
> 时间：2013-02-14T08:51:52.617
> 
> 标签：ruby-on-rails, database, rails-activerecord

我现在有两个活动记录模型，`User`并且`Event` 有很多事件，用户可以选择对事件感兴趣或决定参加事件。

如何编写迁移和模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:03:54.843

但是谁创造了这些事件？我认为这个协会对你有好处：

```
models/event.rb 
   has_many :users, :dependent => :destroy
models/user.rb
   belongs_to :event 
```

用户迁移应该是这样的：

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.integer :event_id

      t.timestamps
    end

    add_index :users, :event_id
  end
end 
```

事件迁移：

```
class CreateEvents < ActiveRecord::Migration
  def change
    create_table :events do |t|
      t.string :name

      t.timestamps
    end
  end
end 
```

您可以在本指南中阅读有关 Rails 关联的更多信息：http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:35:06.623

**用户模型**

```
 has_many :events, :dependent => :destroy 
```

**事件模型**

```
belongs_to :user 
```

**事件迁移：**

```
class CreateEvents < ActiveRecord::Migration
  def change
    create_table :events do |t|
      t.string      :name
      t.references  :user
      t.boolean :participant, :default => true, :null => false # the user is participant by default set, default to true
      t.timestamps
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T18:12:01.450

正如 Shweta 所建议的，您需要多对多关系。实际上，您似乎需要两个，一个用于兴趣，一个用于参与。最简单的实现依赖于 has_and_belongs_to_many：

用户模型

```
has_and_belongs_to_many :interests, :class_name => Event, :join_table => "interests_users"
has_and_belongs_to_many :participations, :class_name => Event, :join_table => "participations_users" 
```

事件模型

```
has_and_belongs_to_many :followers, :class_name => User, :join_table => "interests_users"
has_and_belongs_to_many :participants, :class_name => User, :join_table => "participations_users" 
```

在您的连接表迁移中：

```
def change
  create_table :interests_users, :id => false do |t| 
    t.integer :event_id
    t.integer :user_id
  end 

  create_table :participations_users, :id => false do |t| 
    t.integer :event_id
    t.integer :user_id
  end 
end 
```

你应该可以从这里继续

# mysql - 无法在左连接上检索内容

> ID：14870939
> 
> 赞同：0
> 
> 时间：2013-02-14T08:51:55.790
> 
> 标签：mysql, sql, join, left-join

我有一个带有以下数据的表loan_repayed

```
l_id   i_no  dif     interval   amt
===================================  
32     33   735      3        27774
32     34   707      3        27774
32     35   676      3        27774 
```

我有以下数据的其他表格间隔

```
id  min max
============
1   30   60
2   60   90
3   90   9999 
```

当我执行以下查询时

```
 select 
    lpt.l_Id, 
    d.id, 
    ifnull(sum(lpt.amt),0) 
 from 
     loan_repayed lpt 
 left join 
     interval d on lpt.interval = d.id 
 where 
     lpt.loan_id = 32
 group by 
     lpt.l_id, d.id; 
```

我期待得到

```
 l_id      interval   amt
   =========================
    32       1           0
    32       2           0
    32       3           83322 
```

但我只排了 1 行

```
 l_id      interval     amt
 ===========================
   32        3         333298 
```

有人可以建议我在哪里出错....谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T09:03:04.950

尝试这个：

```
SELECT
  IFNULL(lpt.l_id, 32) AS L_ID, 
  d.id, 
  IFNULL(SUM(lpt.amt),0) 
FROM `interval` AS d 
LEFT JOIN loan_repayed AS lpt ON lpt.interval = d.id 
GROUP BY lpt.l_id, d.id; 
```

[**SQL 小提琴演示**](http://www.sqlfiddle.com/#!2/b8ab8/10)。

* * *

## 更新 1

对于多个值，您可以这样做：

```
SELECT DISTINCT
  d.l_id,
  d.id,
  IFNULL(l.totalamt, 0) AS totalamt
FROM
(
  SELECT l.l_id, d.id
  from 
  (             -- <---------- here you list the values you want
    SELECT 32 AS L_ID
    UNION ALL 
    SELECT 32
    UNION ALL
    SELECT 33
    UNION ALL
    SELECT 34
  ) AS l CROSS JOIN(SELECT id from `interval`) as d
) AS d
LEFT JOIN
(
select 
    lpt.L_ID, 
    d.id, 
    ifnull(sum(lpt.amt),0) AS totalamt
 from `interval` AS d
 INNER JOIN loan_repayed lpt on lpt.interval = d.id 
group by lpt.l_id, d.id
) AS l ON l.l_id = d.l_id AND d.id = l.id ; 
```

## [更新的 SQL Fiddle 演示](http://www.sqlfiddle.com/#!2/b8ab8/57)

这会给你：

```
| L_ID | ID | TOTALAMT |
------------------------
|   32 |  1 |        0 |
|   32 |  2 |        0 |
|   32 |  3 |    83322 |
|   33 |  1 |        0 |
|   33 |  2 |        0 |
|   33 |  3 |        0 |
|   34 |  1 |        0 |
|   34 |  2 |        0 |
|   34 |  3 |        0 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:56:59.787

```
 select lpt.l_Id, d.id, ifnull(sum(lpt.amt),0) from 
 loan_repayed lpt left join interval d on lpt.interval = d.id 
 where lpt.loan_id = 32
 group by d.id,lpt.l_id; 
```

或.. 使用`having`而不是`where`

```
select lpt.l_Id, d.id, ifnull(sum(lpt.amt),0) from
loan_repayed lpt left join interval d on lpt.interval = d.id
group by d.id,lpt.l_id having lpt.loan_id = 32; 
```

# javascript - 用于求和质数的Javascript崩溃

> ID：14870940
> 
> 赞同：0
> 
> 时间：2013-02-14T08:51:58.440
> 
> 标签：javascript, recursion, for-loop, while-loop, primes

我有以下练习代码，我试图计算 1-10 中所有因递归而崩溃的素数之和。
我的 for 和 while 循环有问题，因为代码似乎没有循环通过我的**var i**，并且卡在**i = 3**的初始分配上。
我不是在寻找正确的答案或最有效的答案，但我正在寻找帮助我理解问题所在的人。
这是代码：

```
var array = [2];
var total = 0; 
var j = 0;
function isPrime(i, j) {
if ( i%array[j] === 0 ) {
        console.log("i was " + i + " and j was " + j);
        console.log(i + " is not a prime");
        j = array.length;
    }
    else if ((j + 1) === array.length) {
        console.log(i + " is a prime");
        total += i;
        console.log("total so far is " + total);
        array.push(i);
        console.log(array);
        j = array.length;
        console.log(j);
    }
    else {
        j++;
        isPrime(i,j);
    }
}

for(var i = 3; i <=10; i++) {
   while(j < array.length) {
       console.log("i is " + i + " and j is " +j);
       isPrime(i, j);
   }
}

console.log(total);
console.log(array); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:00:26.090

```
var j = 0;
function isPrime(i, j) { … 
```

意味着你有两个不同的`j`变量：一个在函数之外，一个在函数内部，它会影响另一个。从内部你永远无法分配或读取外部变量。因此，外层`j`永远`0`存在并且`while (j < array.length)`将无限循环。

# node.js - node.js 事件循环诊断

> ID：14870945
> 
> 赞同：18
> 
> 时间：2013-02-14T08:52:22.623
> 
> 标签：node.js, event-loop

是否可以查看事件循环进行诊断？

我想知道当前有多少事件正在等待执行（不包括 setTimeout/interval）。

更新：我想从正在运行的节点进程中执行此操作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-14T21:42:14.320

*使用 setImmediate() 为 nodejs 0.10 更新*

虽然我无法找到队列中等待事件的数量，但我发现了另一个可能有用的健康指标：

```
var ts=Date.now();
setImmediate(function()
{
  var delay=Date.now()-ts;
}); 
```

延迟将包含从排队事件到执行它所花费的毫秒数。

这也考虑了 CPU 密集型事件（仅通过查看事件数是不可能的）。

测量本身也会影响事件队列，但这应该比完整的分析器具有低得多的开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:52:45.363

NodeFly 的代理监控整个 Node.js 性能，包括事件循环。您可以阅读一些关于此功能的博客文章：

[http://blog.nodefly.com/post/41119237822/monitoring-the-event-loop-in-node-js](http://blog.nodefly.com/post/41119237822/monitoring-the-event-loop-in-node-js)

[http://blog.nodefly.com/post/41201793716/just-another-friday-night-chat-scaling-node-js-and](http://blog.nodefly.com/post/41201793716/just-another-friday-night-chat-scaling-node-js-and)

您可以在这里找到并试用代理：

[http://www.nodefly.com](http://www.nodefly.com)

# c# - 在asp.net的图表控件中绘制条形图和折线图

> ID：14870946
> 
> 赞同：4
> 
> 时间：2013-02-14T08:52:27.127
> 
> 标签：c#, asp.net

```
<asp:Chart ID="chartSellThru" runat="server" Height="400px" Width="1200px" >
    <Series>                       
        <asp:Series Name="ActualsQTD">
        </asp:Series>
        <asp:Series Name="ForecastQTD">
        </asp:Series>
        <asp:Series Name="QTDRatio" ChartType="Line">
        </asp:Series>
        <asp:Series Name="TargetAttain" ChartType="Line">
        </asp:Series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="SellThruChartArea">
        </asp:ChartArea>
    </ChartAreas>

chartSellThru.Series["ActualsQTD"].XValueMember = "ProductGroup";
chartSellThru.Series["ActualsQTD"].YValueMembers = "ActualsQTD"; 
```

我在default.aspx页面中写了上面几行代码，最后两行代码写在default.aspx.cs页面中。数据绑定到图表。

如何编写折线图的代码。确保值是从数据库绑定的。如何将值从 sql server 绑定到折线图。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T09:51:35.013

我想你是否需要两个系列应该绑定到图表如果我放置下面的代码

在 aspx 页面中

```
 <asp:Chart ID="ChartDemo" runat="server" Height="400px" Width="1200px">
                <Series>
                    <asp:Series Name="ActualsQTD">
                    </asp:Series>
                    <asp:Series Name="ForecastQTD">
                    </asp:Series>
                    <asp:Series Name="QTDAttainMent">
                    </asp:Series>
                    <asp:Series Name="QTDRatio">
                    </asp:Series>
                </Series>
                <ChartAreas>
                    <asp:ChartArea Name="SellThruChartArea">
                    </asp:ChartArea>
                </ChartAreas>
            </asp:Chart> 
```

并在 aspx.cs 页面中

```
 DataSet ds = new DataSet();
        ds = SrcObj.GetSellThruChartData(ddlFiscalMonth.SelectedValue.ToString(), ddlReportWeek.SelectedValue.ToString(), ddlArea.SelectedValue.ToString());
        //Column Chart
        ChartDemo.Series["ActualsQTD"].ChartType = SeriesChartType.Column;
        ChartDemo.Series["ActualsQTD"]["PointWidth"] = "0.9";            
        ChartDemo.Series["ActualsQTD"]["BarLabelStyle"] = "Center";
        ChartDemo.Series["ActualsQTD"]["PixelPointDepth"] = "99";
        ChartDemo.Series["ActualsQTD"]["DrawingStyle"] = "Cylinder";
        ChartDemo.Series["ForecastQTD"].ChartType = SeriesChartType.Column;
        ChartDemo.Series["ForecastQTD"]["PointWidth"] = "0.9";            
        ChartDemo.Series["ForecastQTD"]["BarLabelStyle"] = "Center";
        ChartDemo.Series["ForecastQTD"]["PixelPointDepth"] = "99";
        ChartDemo.Series["ForecastQTD"]["DrawingStyle"] = "Cylinder";
        ChartDemo.ChartAreas["SellThruChartArea"].AxisX.Interval = 1;            
        ChartDemo.ChartAreas["SellThruChartArea"].AxisX.MajorGrid.Enabled = false;
        //ChartDemo.ChartAreas["SellThruChartArea"].AxisY.MajorGrid.Enabled = false;

        ChartDemo.Series["ActualsQTD"].XValueMember = "ProductGroup";
        ChartDemo.Series["ActualsQTD"].YValueMembers = "ActualsQTD";            
        ChartDemo.Series["ForecastQTD"].XValueMember = "";
        ChartDemo.Series["ForecastQTD"].YValueMembers = "ForecastQTD";
        ChartDemo.Series["ActualsQTD"].IsValueShownAsLabel = true;            
        ChartDemo.Series["ForecastQTD"].IsValueShownAsLabel = true;

        //Line Chart
        ChartDemo.Series["QTDAttainMent"].ChartType = SeriesChartType.Line;
        ChartDemo.Series["QTDRatio"].ChartType = SeriesChartType.Line;           

        ChartDemo.Series["QTDAttainMent"].XValueMember = "";
        ChartDemo.Series["QTDAttainMent"].YValueMembers = "QTDAttainMent";
        ChartDemo.Series["QTDRatio"].XValueMember = "";
        ChartDemo.Series["QTDRatio"].YValueMembers = "QTDRatio";

        ChartDemo.Series["QTDAttainMent"].IsValueShownAsLabel = true;
        ChartDemo.Series["QTDRatio"].IsValueShownAsLabel = true;

        ChartDemo.Series["QTDAttainMent"].BorderWidth = 3;
        ChartDemo.Series["QTDAttainMent"].Color = Color.Green;
        ChartDemo.Series["QTDRatio"].BorderWidth = 3;
        ChartDemo.Series["QTDRatio"].Color = Color.Red;

        ChartDemo.Series["QTDAttainMent"].YAxisType = AxisType.Secondary;
        ChartDemo.Series["QTDRatio"].YAxisType= AxisType.Secondary;           

        ChartDemo.DataSource = ds;
        ChartDemo.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T12:40:55.257

代码非常简单：

```
using (SqlConnection conn = new SqlConnection("OMG look a connection string"))
{
    using (SqlCommand cmd = new SqlCommand("SELECT xValue, yValue FROM chartPoints"))
    {
        try
        {
            conn.Open()

            using (SqlDataReader rdr = cmd.ExecuteReader())
            {
                chartSellThru.Series["QTDRatio"].Points.DataBindXY(rdr, "xValue", rdr, "yValue");
            }
        }
        catch(Exception ex)
        {
            //handle errors
        }
    }
} 
```

您还可以将此命令设置为`SelectCommand`for an`SqlDataSource`并将其绑定到图表，然后以与之前相同的方式选择带有`XValueMember`and的点：`YValueMembers`

```
<asp:SqlDataSource runat="server" ID="dsLinePoints" ConnectionString="OMG look a connection string" SelectCommand="SELECT xValue, yValue FROM chartPoints" />

<asp:Chart ID="chartSellThru" runat="server" Height="400px" Width="1200px" DataSourceID="dsLinePoints">
    <Series>                       
        <asp:Series Name="ActualsQTD">
        </asp:Series>
        <asp:Series Name="ForecastQTD">
         </asp:Series>
        <asp:Series Name="QTDRatio" ChartType="Line">
        </asp:Series>
        <asp:Series Name="TargetAttain" ChartType="Line">
        </asp:Series>
    </Series>
    <ChartAreas>
        <asp:ChartArea Name="SellThruChartArea">
        </asp:ChartArea>
    </ChartAreas>
</asp:Chart>

chartSellThru.Series["QTDRatio"].XValueMember = "xValue";
chartSellThru.Series["QTDRatio"].YValueMembers = "yValue"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T13:47:40.803

您可以先简单地完成，然后再进行多个系列。

**代码后面的页面：**

```
Values[]={10,20,30,40,50}

weekworkline1.Series.Add(new AjaxControlToolkit.LineChartSeries { Data = values, LineColor = "#2fd1f9", Name = "Working Hours" }); 
```

**ASP 代码：**

```
<asp:LineChart ID="weekworkline1" runat="server" ChartHeight="300" ChartWidth="900" ChartType="Stacked"></asp:LineChart> 
```

# ios - 更快地重新连接 CBPeripheral

> ID：14870948
> 
> 赞同：3
> 
> 时间：2013-02-14T08:52:33.517
> 
> 标签：ios, objective-c, core-bluetooth, bluetooth-lowenergy, cbperipheral

我正在开发一个应用程序，它可以多次连接和断开不同的蓝牙低功耗外围设备。在互联网上进行了大量研究后，我没有找到一种方法来存储已经发现的服务和特征，以便我可以更快地重新连接。目前，我在每次重新连接后发现所需的服务和特征，这花费了我 1.5 到 2 秒。

是否有人有存储/缓存 CBService 或 CBCharacteristic 的经验或解决方案，或者是否有人知道更快重新连接的方法？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T03:52:34.547

我尝试在内存中缓存外围设备、服务和特征对象，**但手动缓存不起作用**。一旦与外围设备断开连接，服务和特征对象将不再有效使用。事实上，即使是 CBPeripheral 也可以从你下面改变——CoreBluetooth 有一个内部行为，设备 UDID 每隔几分钟就会改变一次（如果 CBPeripheral 是另一个 iOS 设备）。

但是，如果您正在为 iOS 6 进行开发，有一种方法可以加快速度。如果您[观看](http://developer.apple.com/videos/wwdc/2012/)WWDC 2012 上的高级蓝牙演讲，您会看到一张关于缓存服务和特性的幻灯片。本质上，操作系统可以为您缓存它们，**但仅限于配对设备。**要配对，您需要以身份验证不足错误响应写入请求。例如，对于 iOS 外围设备，您可以编写如下内容：

```
- (void)peripheralManager:(CBPeripheralManager *)peripheralManager didReceiveWriteRequests:(NSArray *)requests {
      ...

      [peripheralManager respondToRequest:request withResult:CBATTErrorInsufficientAuthentication];

      ...
} 
```

这将在 iOS 外围设备上弹出一个配对对话框，之后您将进行配对。除此之外，您不必更改代码——只需像往常一样调用discoverServices 等，它们会更快地响应（即立即）。

我还在 10.8.3 上测试了这种行为，但它似乎不起作用。所以，我不知道在 OS X 上加快速度的方法（除了保持与外围设备的连接）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-14T19:31:19.877

iOS 7 添加了额外的缓存（[iOS 7：Bluetooth LE 中的新增功能](http://www.doubleencore.com/2013/09/whats-new-in-bluetooth-le-ios-7/)）。我看到重新连接到外围设备、发现服务、发现特征和读取单个特征值的总时间不到 100 毫秒（平均约 80 毫秒）。

我的测试配置是连接 iPad 3 的 iPad Air。

# mysql - 我们如何从其他设备连接到 mysql 数据库

> ID：14870957
> 
> 赞同：-2
> 
> 时间：2013-02-14T08:52:54.193
> 
> 标签：mysql, mysql-connector

我们如何从连接到网络的其他设备连接到 mysql 数据库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:07:39.377

如果您的本地计算机上已经有一个工作连接，那么在您的代码中的某处您将拥有文本**localhost**或**127.0.0.1**。您只需将此代码更改为托管数据库的计算机的 IP 地址。

您是否有更多详细信息，例如您如何尝试连接？还是你的操作系统？

# linux - 用于日志分析的 shell 脚本

> ID：14870958
> 
> 赞同：2
> 
> 时间：2013-02-14T08:52:54.623
> 
> 标签：linux, shell

我在我的 linux 服务器上以特定格式获取日志

```
id \t IP \t login-id \t login-error Code \t attempts 
```

我想知道用户可能遇到的所有可能的登录错误代码。

示例文件是：

```
123  10.12.34.234 anshul     11 1
432  10.12.34.234 ra     11 2
342  10.12.34.234 anshul     12 1
445  10.12.34.234 yahoo  3  1 
```

输出应该是：

```
anshul: 11,12 
```

我努力了：

```
cat aaa | sort +2 -3 | grep anshul | awk -F"\t" {' print $4'} 
```

这将打印

```
11

12 
```

但我希望输出格式为`anshul: 11,12`

我们可以将值存储在一些变量中并根据需要显示吗？这段代码的问题是它是否捕获了所有的 anshul，无论是 anshulg 还是 anshuln 还是 anshulp？任何解决此问题的建议。

我已经在登录时进行了排序，只是为了验证我得到的数据是否正确，因为所有唯一名称都将被排序为单个块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T22:57:13.080

```
#% cat t
123  10.12.34.234 anshul     11 1
432  10.12.34.234 ra     11 2
342  10.12.34.234 anshul     12 1
445  10.12.34.234 yahoo  3  1 
```

一行 Perl。

```
 perl -ane 'BEGIN{$x='anshul';}push @{$X{@F[2]}}, $F[3];END{print "$x: ",join(",",@{$X{$x}}),"\n";}' < t 
```

给出：

```
anshul: 11,12 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:08:49.020

```
awk '{a[$3]=a[$3]","$4;next}END{for(i in a)print i,substr(a[i],2)}' <your_file>|grep anshul 
```

或者您可以直接使用 awk 而无需 grep。

```
awk '{a[$3]=a[$3]","$4;next}END{print "anshul",substr(a["anshul"],2)}' <your_file> 
```

测试如下：

```
> cat temp
123  10.12.34.234 anshul     11 1
432  10.12.34.234 ra     11 2
342  10.12.34.234 anshul     12 1
445  10.12.34.234 yahoo  3  1

> awk '{a[$3]=a[$3]","$4;next}END{for(i in a)print i,substr(a[i],2)}' temp
anshul 11,12
ra 11
yahoo 3

> awk '{a[$3]=a[$3]","$4;next}END{for(i in a)print i,substr(a[i],2)}' temp|grep anshul
anshul 11,12
> 
> awk '{a[$3]=a[$3]","$4;next}END{print "anshul",substr(a["anshul"],2)}' temp
anshul 11,12 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:12:44.530

1）简单的解决方案，但最后你会得到额外`,`的：

```
cat aaa | grep "anshul" | awk '{print $4}' | tr '\n' ',' 
```

输出：`11,12,`

2）没有额外的`,`：

```
tmp=`cat aaa | grep "anshul" | awk '{print $4}' | tr '\n' ','`
echo ${tmp%?} 
```

输出：`11,12`

当然，您可以轻松地将其转换为以用户名作为参数并输出类似“user: anshul error(s): 11,12”的脚本

# c# - 将 TimeSpan 转换为浮点数

> ID：14870966
> 
> 赞同：5
> 
> 时间：2013-02-14T08:53:30.200
> 
> 标签：c#, asp.net, sql-server-2008

如何将 TimeSpan 转换为 float ，考虑到所有处理单位（小时分钟），例如如果（单位 = 小时）将 TimeSpan 转换为浮点小时

在另一种情况下，SQL Server 中是否没有数据类型“Timespan”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-14T08:55:52.477

使用 上的`Total*`属性`TimeSpan`，例如[`TimeSpan.TotalHours`](http://msdn.microsoft.com/en-us/library/system.timespan.totalhours.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T08:56:16.160

分钟示例：

```
var t = new TimeSpan();
var total = t.TotalMinutes; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:00:05.400

你可以做这样的事情

```
TimeSpan elapsedTime = new TimeSpan(125000);
float floatTimeSpan;
int seconds, milliseconds;
seconds = elapsedTime.Seconds;
milliseconds = elapsedTime.Milliseconds;
floatTimeSpan = (float)seconds + ((float)milliseconds / 1000);
Console.WriteLine("Time Span: {0}", floatTimeSpan); 
```

程序输出如下所示：

```
Time Span: 0.012 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T15:15:46.733

```
internal static string TimeSpanToDouble(TimeSpan timeSpan, string unit)
    {
        double result = 0;
        if (unit.Equals("MINUTES"))
            result = timeSpan.TotalMinutes;
        else if (unit.Equals("HOURS"))
            result = timeSpan.TotalHours;
        else if (unit.Equals("DAYS"))
            result = timeSpan.TotalHours / 24;
        else
            throw new Exception();
        return Convert.ToString(result);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-25T10:49:23.277

```
double TsToHoursDouble(TimeSpan ts) => ts.TotalMinutes / 60;

double TsToMinsDouble(TimeSpan ts) => ts.TotalMinutes; 
```

使用：

```
var hrs = TsToHoursDouble(someTimeSpan); 
```

如果您需要更准确的结果，可以在此类计算中使用 TotalSeconds

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-13T13:35:05.413

您可以使用`Convert.ToSingle`，如下所示：

```
var ts = new Timespan(0, 1, 1, 30);
var minutes = Convert.ToSingle(ts.TotalMinutes);
var hours = Convert.ToSingle(ts.TotalHours); 
```

结果`minutes`和`hours`将分别`61.5`是`1.025`

看看这个 dotnetfiddle：[https ://dotnetfiddle.net/uSQfk0](https://dotnetfiddle.net/uSQfk0)

# java - 是否有用于 java 的 shell 框架，我可以在其中添加自定义命令？我正在寻找命令解释器而不是命令行 args 解析器

> ID：14870968
> 
> 赞同：0
> 
> 时间：2013-02-14T08:53:32.750
> 
> 标签：java, web-services, shell, command-line, frameworks

我想知道是否有一个健壮且易于使用的 Java 框架，我可以使用它来定义我的自定义命令并将它们添加到 shell，而不必担心 shell 框架的内部结构以及命令执行的阶段和行为. 我的要求很简单。我编写的大多数应用程序都需要 CLI。对于它们中的每一个，我不想编写特定于应用程序的外壳。但是，如果我有一个 shell 框架，我可以使用它来创建我的命令并将它们添加到 shell 中，那将非常有帮助。

自定义命令将是这样的：

```
class MyCommand implements ShellCommand{

        @Override
        public void run(){
                // application logic goes here
        }

        @Override
        public String getUsage(){
                return "Usage: foo [bar] [bar]";
        }

        @Override
        public String getDescription(){
                return "shows all files in the directory.. blah blah";
        }
} 
```

如果 shell 有一个内置的 HTTP 服务器，它可以通过 web 服务执行来自 HTTP 请求的命令，那么它会很棒。

# javascript - 自定义 highcharts 图例

> ID：14870971
> 
> 赞同：-1
> 
> 时间：2013-02-14T08:53:41.200
> 
> 标签：javascript, highcharts

我正在使用 HighCharts v2.3.1 可视化一些数据，我对图例有疑问：

是否可以有一个与图表中的数据系列没有特别关联的图例？我有几个图表用于可视化移动网络数据。在这些图表中，我将系统（GSM、UMTS、LTE 等）上的数据分开，对于其中大多数，默认图表图例正是我所需要的。在这些情况下，每个系统在图表中都有一个单独的数据系列，因此当您切换系统时，您会切换数据系列的可见性。

然而，对于其中一个图表，我希望拥有相同类型的选择器控件，但这次系统选择被用于服务器端数据访问算法中来计算要可视化的数据。是否可以为此使用与图例类似的控件，或者我是否必须为此创建一个单独的控件？我认为让所有图表的系统选择控件看起来都一样会很好，即使它在“幕后”使用不同。

所以总结一下：在一种情况下，系统选择控件直接绑定到数据系列，所有系列都加载到客户端。这是在 highcharts 中开箱即用的支持。在另一种情况下，每个系统都没有直接映射到一个数据系列，当您打开/关闭系统时，我想去服务器并为整个图表生成新数据。

创建一个像这样的控件似乎可行，它基本上看起来和行为与图例相同，但使用方式不同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T12:12:58.780

应该可以使用[legendItemClick](http://api.highcharts.com/highcharts#plotOptions.series.events.legendItemClick)事件处理程序，因此在回调中您可以调用 AJAX 来获取新数据。

# php - 从数据库中查询 UserID

> ID：14870977
> 
> 赞同：0
> 
> 时间：2013-02-14T08:54:22.917
> 
> 标签：php, sql

我一直在努力解决这个问题，但我做不到。

```
$sqluser = "--";
$sqlpass = "--";
$hostname = "localhost"; 

$clientuser = $_COOKIE['user'];
//connection to the database
$dbhandle = mysql_connect($hostname, $sqluser, $sqlpass) 
 or die("Unable to connect to MySQL");
//select a database to work with
$selected = mysql_select_db("clhtechn_si1",$dbhandle) 
  or die("Could not select database!");
//execute the SQL query
$idfinder = mysql_query("SELECT id FROM `si_customers` WHERE username='$clientuser'") or die(mysql_error());
$clientid = mysql_fetch_assoc($idfinder);
$query = "SELECT invoice_id, date, SUM(total) as invoiceTotal
          FROM si_invoices
          LEFT JOIN si_invoice_items ON si_invoices.id = si_invoice_items.invoice_id
          WHERE si_invoices.customer_id='$clientid'
          GROUP BY invoice_id
          ORDER BY invoice_id";
$result = mysql_query($query);

$row=0;
while ($record = mysql_fetch_assoc($result))
{
    $class = 'd' . ($row % 2);
    $inv_date=substr($record['date'], 0, -9);
    $inv_total=$record['invoiceTotal'];
    $invoice_total=number_format($inv_total, 2);

    echo "<tr class=\"{$class}\">";
    echo "<td valign='top'>{$inv_date}</td>";
    echo "<td valign='top'>{$record['invoice_id']}</td>";
    echo "<td valign='top'>$invoice_total</td>";
    echo "<td><a href='invoices/Invoice_{$record['invoice_id']}.pdf' target='_blank'>";
    echo "<img src='urlhere' width='17' height='17' alt='PDF File' border='0' /></a></td>";
    echo "</tr>";
    $row++;
}
//close the connection

mysql_close($dbhandle); 
```

这是我的客户表的对齐方式： [链接到图片。](https://dl.dropbox.com/u/33604790/phptable.png)

我的代码有什么问题，我可以使用什么代码来修复它？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:56:45.867

$clientid 是一个数组，因为 mysql_fetch_assoc() 返回此类型。

```
$row = mysql_fetch_assoc($idfinder);
$clientid = $row['id']; 
```

此外，您需要在将 $clientuser 放入查询之前正确格式化它。
所以，完整的代码将是

```
$user = mysql_real_escape_string($_COOKIE['user']);
$sql = "SELECT id FROM `si_customers` WHERE username='$user'";
$res = mysql_query($sql) or trigger_error(mysql_error());
$row = mysql_fetch_assoc($res);
$clientid = $row['id']; 
```

为了使它成为你想要的方式，你必须使用一些抽象库
，你可以将你的 id 放在一行中（实际上是 2 行只是为了便于阅读）

```
$sql = "SELECT id FROM si_customers WHERE username=?s";
$clientid = $db->getOne($sql,$_COOKIE['user']); 
```

在这里您可以看到这样一个[Mysql 抽象库](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php)的示例。

# helicontech - Helicon Ape build 0098：启用许可证时“拒绝访问路径”

> ID：14870978
> 
> 赞同：0
> 
> 时间：2013-02-14T08:54:23.980
> 
> 标签：helicontech

我刚刚将 Helicon Ape 升级到最新版本 0098。然后我打开 Helicon Ape 管理器，转到“帮助”->“许可证管理器”，选择我的一个站点并选择“启用免费许可证”。出现此消息：**"Access to the path is denied"**。

在尝试在该特定站点上启用它之前，我确保我有可用的免费许可证。我还在网站文件夹的安全设置中授予了“所有人”的权限。也可以在 Helicon Ape Manager 中浏览网站文件夹。

有没有人遇到同样的问题或知道这可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:34:29.487

你安装的是完整版还是免费版？你的 Windows 版本是多少？我们为什么不在 Helicon Tech 帮助台上继续调查问题：http: [//support.helicontech.com/helpdesk/](http://support.helicontech.com/helpdesk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T20:33:33.807

就我而言，它只是在 Windows 更新后停止工作。我升级到版本 3.1.0.105 并按照故障排除步骤进行操作。我必须将我的组的`read`&`list folder`权限添加到.`IIS_USERS``Helicon``program files(x86)`

这仍然没有解决它。所以我玩了一些设置，在这个过程中的某个时刻，我从应用程序池配置中删除了 .Net Framework v2.0xxxx（将其设置为无托管代码。）在尝试了调试器和我能想到的所有其他东西之后，我决定重新开始。

我卸载了helicon。从头开始重新安装它。我将 IIS_USERS 权限重新添加到 Program Files (x86) 中的 Helicon 应用程序文件夹。它仍然没有工作。然后我通过 .net 重新路由了应用程序池，果然一切正常……这是有道理的，因为 APE 是一个 .net 应用程序并使用 .net 挂钩进入 iis。

无论如何，在完成所有这些之后，它现在对我有用。

# android - 使用 firefox 渲染或引擎的 android webview

> ID：14870979
> 
> 赞同：1
> 
> 时间：2013-02-14T08:54:28.750
> 
> 标签：android, android-webview

我的网站是 html 5，如果网站在 Firefox 浏览器中打开，效果会很好。那么是否可以使用 firefox 渲染引擎或者我可以更改默认 webkit 或者是否有任何第三方库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:05:29.923

不可以。网站无法决定应该使用什么渲染引擎来渲染它。最好的方法是修复您的网站，使其在所有主要浏览器上都能正确呈现。

# dependencies - Grunt.js 依赖管理

> ID：14870981
> 
> 赞同：4
> 
> 时间：2013-02-14T08:54:32.837
> 
> 标签：dependencies, gruntjs, recompile

有没有办法在 Grunt 中指定文件依赖项？即如果我有：

```
global/page.jade
project/index.jade -- includes global/page.jade
project/about.jade -- includes global/page.jade
project/test.jade 
```

我改变`global/page.jade`然后我想`project/index|about.jade`重新编译。我检查了插件，但找不到任何可以提供该功能的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-13T09:27:59.133

[grunt watch](https://github.com/gruntjs/grunt-contrib-watch)以下列方式在你的 gruntfile.js 中使用

```
...

  watch: {
    scripts: {
      files: 'src/**/*',
      tasks: ['buildDevelopment'],
      options: {
        interrupt: true,
      },
    }

grunt.registerTask('buildDevelopment', ['clean'
                        ,'jade'
                        ,'copy:development'
                        ,'bowercopy:development'
                        ]);

... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-14T21:45:51.923

我建议增强 Atillas 解决方案。在每次更改时重新构建所有模板并不是最优的，并且会在大型项目中惹恼您。

### 以下是应该有帮助的：

### *使用较新的插件仅处理更改的文件*

**安装：** npm install grunt-newer --save-dev
**文档：** [https ://www.npmjs.org/package/grunt-newer#optionsoverride](https://www.npmjs.org/package/grunt-newer#optionsoverride)
**用法：**

*   以较新的任务为前缀：

*   添加 grunt.loadNpmTasks('grunt-newer'); 到 gruntfile

*   使用覆盖选项来检查包含（你正在寻找的魔法）

`newer: { options: { override: function (detail, include) { if (detail.task === 'jade') { checkForModifiedImports(detail.path, detail.time, include); } else { include(false); } } } }`

### *使用 watch 检测文件更改*

**安装：** npm install grunt-contrib-watch --save-dev **文档：** [https ://www.npmjs.org/package/grunt-contrib-watch](https://www.npmjs.org/package/grunt-contrib-watch)
**用法：**

*   添加 grunt.loadNpmTasks('grunt-contrib-watch'); 到 gruntfile
*   任务看起来像这样

`watch: { scripts: { files: '**/*.jade', tasks: ['newer:jade'], options: { interrupt: true }, }, }`

# javascript - 相邻 HTML div 中的两个浮动图表导致问题

> ID：14870983
> 
> 赞同：2
> 
> 时间：2013-02-14T08:54:33.733
> 
> 标签：javascript, jquery, html, xslt, flot

我编写了一个 jquery 插件，它使用 Flot 将 HTML 表格转换为图表。HTML 是从 XSLT 生成的，在 XSLT 中我有以下代码来调用我的插件。此代码尝试在 blah1 和 blah2 HTML div 中并排显示两个图表（每个 div 中一个）：

```
<div id="blah1" style="width:50%;height:100px;float:left;position:relative; padding: 0px">
    <script language="javascript" defer="true">
        <xsl:comment>
            <![CDATA[$(document).ready($('#blah1').myPlugin()));]]>
        </xsl:comment>
    </script>
</div>

<div id="blah2" style="width:50%;height:100px;float:right;position:relative; padding: 0px">
    <script type="javascript" defer="true">
        <xsl:comment>
            <![CDATA[$(document).ready($('#blah2').myPlugin()));]]>
        </xsl:comment>
    </script>
</div> 
```

虽然通过浏览器查看 HTML 的方式存在问题。左侧 div (blah1) 正确生成了 HTML，包含画布元素和所有内容（并在浏览器中显示图表），但是右侧 div(blah2) 生成以下内容：

```
<script type="javascript" defer="true">
    <!--$(document).ready($('#blah2').myPlugin());   //-->
</script> 
```

知道这里发生了什么吗？为什么一个 div 可以工作，而另一个不能..？另一个奇怪的事情是出现在 blah1 中的图表实际上是应该出现在 blah2 中的图表。blah2 图表覆盖了 blah1 中代码绘制的图表。如果我注释掉 blah 2 jquery 调用，那么 blah1 div 会正确显示预期的图表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T11:05:49.280

正如@PabloPozo 所说，看起来语言属性已被贬值，将您的脚本标签更改为

```
<script type="text/javascript" defer="true">

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T13:15:07.583

谢谢大家，我发现了问题......我在jquery自定义插件中将div的值硬编码为“blah1”，所以无论我调用什么div，插件代码每次都应用于同一个div。这个睡了 4 个小时后对我来说变得很明显..（我不敢相信睡眠剥夺会让你做什么）

# android - Android进程在被杀死时不会从“菜单按钮视图”中删除

> ID：14870989
> 
> 赞同：1
> 
> 时间：2013-02-14T08:54:46.523
> 
> 标签：android, cordova, menu, kill, terminate

我试图杀死我的应用程序，这也很好。但是，当我在我的 nexus 7 上按下菜单键时，该过程仍然显示黑屏。当我单击该进程时，它从一开始就运行应用程序，因此看起来终止进程工作得很好。

这是我在单击按钮时调用的方法。我也希望将应用程序从菜单中删除，我该怎么做？

```
 public void TerminateAndroid()
{

    android.os.Process.killProcess(android.os.Process.myPid());
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:38:49.030

尝试添加

```
<activity android:name=".MainActivity"
    android:excludeFromRecents="true" 
```

对于您的清单，这将使您的应用程序被添加到您正在谈论的最近的应用程序菜单中。

请注意，它永远不会被添加：p

# css - 当字体为粗体时更改为大写并更改字体大小

> ID：14870990
> 
> 赞同：0
> 
> 时间：2013-02-14T08:54:47.977
> 
> 标签：css

我的博客需要这个。当我的字体为粗体时，我希望我的文本变为大写。当字体为粗体时，我还想更改字体大小。我知道如何在 CSS 中使你的字体加粗，但这个不同。

*原因：*我的博客中有很多帖子都以粗体显示艺术家姓名。但我也希望它们是大写的并且更大以从文本的其余部分中脱颖而出。'欣赏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T08:56:13.950

CSS：

```
b, strong {
   text-transform: uppercase;
   font-size: 1.2em;
} 
```

# rest - RESTFul HATEOAS API 中的 HTTP POST 请求

> ID：14870994
> 
> 赞同：11
> 
> 时间：2013-02-14T08:54:58.627
> 
> 标签：rest, hateoas

我正在编写一个 RESTful HATEOAS API。我有复合实体，我必须 GET、POST 和 PUT。GET 部分很简单，并且有很多示例。响应包含实体的原始属性和嵌套实体的链接。例如：

```
{
 "id":"2",
 "firstName":"Brad",
 "lastName":"Pitt",
 "balance":1234.5,
 "transactions":"http://localhost:8080/jersey-poc/api/v1.1/account/1/transactions",
 "self":"http://localhost:8080/api/v1.1/account/1",
 "accountType":"http://localhost:8080/api/v1.1/account/1/accountType"
} 
```

当我想创建或修改帐户时会出现问题。我需要将帐户与 accountType 相关联。我可以发送一个 POST 请求，如下所示：`{"firstName":"Michael","lastName":"Jackson","balance":300.0,"accountTypeId":5}`
但这会破坏 HATEOAS 范式。POST/PUT 复合实体的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-14T09:40:39.107

与 HATEOAS 相悖的有效载荷没有什么特别之处；唯一真正的问题是它`accountTypeId`不是很容易被发现。（Magic ID 总是最好映射成简短的描述性字符串；将它们想象成一个枚举。）在使用 HATEOAS 模型时要记住的关键事项之一是用户发布的实体不需要是正是创建资源的实体；你可以修改它，注释它，翻译它。*它在概念上*应该仍然是相同的，但这*与完全相同*是完全不同的。（添加 ID 和创建时间戳将是扩展完全合理的绝佳示例。）

对我来说，听起来你真正的问题是你需要重新考虑客户在做 POST 时应该提交什么信息，以及你打算如何*告诉*客户他们应该在做 POST 时提交这些信息。我自己，我很喜欢在这里使用 XML 上传，因为我可以很容易地告诉客户他们的 POST 有效负载应该符合特定的模式（XML Schema 和 RELAX NG 都足够丰富，我可以描述约束）。我确信这不是唯一的方法。

# sql - 字符串替换 sql 选择

> ID：14870996
> 
> 赞同：0
> 
> 时间：2013-02-14T08:55:03.043
> 
> 标签：sql, select, replace, prepend

嗨，我试图找到答案，但找不到。

我想删除一些字符并在 SQL 查询的结果前面加上一个井号，如下所示（它已经使用替换命令我可以堆叠这些）吗？：

```
select fundraiser.Company_Name, 
       replace(Just_Giving_Campaign,'"label":',''),  
       sum(fundraising_campaigns.Total_Collected) as donations
from fundraising_campaigns, 
     fundraiser
where Charity_Name = 'WaterAid' 
  and fundraising_campaigns.Campaigners_ID = fundraiser.id
group by fundraiser.Company_Name 
```

谁能确认我将如何添加（£符号）并从选择语句中删除几组字符。当然似乎无法堆叠替换语句（例如

替换（替换（字符串，匹配什么，替换成什么），匹配什么，替换成什么）

欣赏任何想法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T09:04:38.917

我不确定你的问题。如果我是正确的，你想预先`£`做一些嵌套替换。希望下面的例子有所帮助。

```
select '£'+replace(replace('YourText','x','s'),'You','U') 
```

# c# - 我可以覆盖子类中的类变量并将其类型更改为子类吗

> ID：14870997
> 
> 赞同：0
> 
> 时间：2013-02-14T08:55:04.623
> 
> 标签：c#, inheritance

有没有办法覆盖子类中的变量，但也可以将类型更改为该类型的子类。IE。

```
public class BaseClass
{
    public BaseClass() { }
    protected virtual MyBase WorkField { get { return new MyBase(); } }
    public int WorkProperty
    {
        get { return WorkField.Value; }
    }
}

public class DerivedClass : BaseClass
{
    public DerivedClass():base() { }

    /* I get an error here saying that WorkField needs to be MyBase type*/
    protected override MyExtend WorkField 
    { 
        get 
        { 
            return new MyExtend(); 
        }
    }

    //public new int WorkProperty
    //{
    //    get { return 0; }
    //}
}

public class MyBase
{
    public int Value = 1;
}

public class MyExtend : MyBase
{
    public int value = 20;
} 
```

有没有办法与此类似，但有效？所以我可以有一个超类在 MyBase 上执行任务，然后有一个子类在它的 MyEntend 版本上执行任务。每次我使用它时都不需要投射它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T08:58:28.760

在这种情况下，没有理由更改签名。只需返回派生类型：

```
public class DerivedClass : BaseClass
{
    public DerivedClass():base() { }

    protected override MyBase WorkField 
    { 
        get 
        { 
            return new MyExtend(); 
        }
    }

    //public new int WorkProperty
    //{
    //    get { return 0; }
    //}
} 
```

您的子类的多态行为将允许您返回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-14T09:42:19.003

对于覆盖签名应该是基本的基本方法。

```
public class BaseClass<T> where T : MyBase, new()
{
    public BaseClass() { }
    protected virtual T WorkField { get { return new T(); } }
    public int WorkProperty { get { return WorkField.Value; } }
}

public class DerivedClass : BaseClass<MyBase>
{
    public DerivedClass() : base() { } 
```

// 发生同样的错误，因为基础属性是“MyBase”类型

> protected override MyExtend WorkField { get { return new MyExtend(); } }

```
 //public new int WorkProperty
    //{
    //    get { return 0; }
    //}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T09:00:10.680

```
 public class BaseClass<T> where T: MyBase, new()
    {
        public BaseClass() { }
        protected virtual T WorkField { get { return new T(); } }
        public int WorkProperty { get { return WorkField.Value; } }
    }

    public class DerivedClass : BaseClass<MyExtend>
    {
        public DerivedClass() : base() { }
        protected override MyExtend WorkField { get { return new MyExtend(); } }

        //public new int WorkProperty
        //{
        //    get { return 0; }
        //}
    }

    public class MyBase
    {
        public MyBase()
        {

        }
        public int Value = 1;
    }
    public class MyExtend : MyBase
    {
        public int value = 20;
    } 
```

# c# - 是否可以检查 FileSystemWatcher 缓冲区有多满？

> ID：14870998
> 
> 赞同：1
> 
> 时间：2013-02-14T08:55:05.783
> 
> 标签：c#, buffer, filesystemwatcher

我正在调试 FileSystemWatcher 处理大量文件更改的（似乎很常见）问题。我知道您可以使用 InternalBufferSize 将缓冲区大小设置为 64K。

但是有没有办法检查使用了多少缓冲区？

谢谢