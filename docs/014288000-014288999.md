# StackOverflow 问答 14288000-14288999

# json - 如何将部分 JSON 结果合并到一个对象/变量中？

> ID：14288000
> 
> 赞同：0
> 
> 时间：2013-01-11T22:55:50.017
> 
> 标签：json, perl, duplicates

拥有一个返回部分 JSON 响应的应用程序，我如何将对象/变量组合成一个？

* * *

我在用

```
$json = JSON->new->utf8->decode($response->content); 
```

将响应转换为对象/变量，但这是针对每个单独的。

* * *

现在我需要它将几个部分响应合并为一个。

如何做到这一点以及如何处理可能的重复项以避免覆盖？

* * *

***更新：***

*为了更好地理解上述问题，请参阅下面的示例响应。*

*每个部分响应具有相同的结构，但 和 部分中的* `'Groups'` *数据* `'Message'` *不同* `'Data'` *。最后一个响应带有* `'Finished' = true`*.*

```
$VAR1 = {
  'answer' => {
    'Error' => bless( do{\(my $o = 0)}, 'JSON::XS::Boolean' ),
    'Id' => 12345,
    'Finished' => $VAR1->{'answer'}{'Error'},
    'Groups' => [
      {
        'Code' => 'ABC',
        'RegNum' => 123,
        'Name' => 'John Doe'
      },
      {
        ...
      }
    ],
    'Message' => undef,
    'Data' => [
      {
        'Column1' => 'c1',
        'Column2' => 'c2'
      },
      {
        ...
      }
    ],
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:16:31.330

您可以通过[Hash::Merge合并哈希](http://search.cpan.org/~dmuey/Hash-Merge-0.12/Merge.pm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:57:59.617

这与 JSON 完全无关。您想要合并两个数据结构。从你说的一点点来看，有三个数组要合并。您没有指定如何，所以也许您只是想将新响应的元素附加到原始响应的元素。

```
for (qw( Groups Message Data )) {
   push @{ $orig->{answer}{$_} }, @{ $new->{answer}{$_} }
      if $new->{answer}{$_};
} 
```

# r - 使用 ggmap 和 geom_point 时 geom_text 不起作用

> ID：14288001
> 
> 赞同：11
> 
> 时间：2013-01-11T22:55:50.637
> 
> 标签：r, plot, ggplot2, ggmap

嗨，我正在使用 ggmap 和 gg_point 函数来显示河口的测量数据。

我使用的代码如下：

> ```
>  library(ggmap)
> al1 <- get_map(location = c(lon = -87.525, lat = 30.35), zoom = 12, maptype = 'terrain')
> 
> lon<- c(-87.604474,-87.55)
> lat<- c(30.362563,30.35)
> label <- c("A","B")
> df<-data.frame(lon,lat,label)
> 
> p <- ggmap(al1)+geom_point(data=df,aes(x=lon,y=lat,shape=label,label=label),size=3)
> p <- p + xlab("Longitude")+ylab("Latitude")
> p <- p +geom_text(aes(label=label, size=3,vjust=0))
> p <- p + labs(title="Monitoring stations ")
> p
> 
> ggsave("plot.pdf") 
> ```

在这里，当我使用 geom_text 时，我收到以下错误，“美学长度必须为 1，或与 dataProblems:label 的长度相同”。

我想将标签放在图中的点旁边。我想同时放置点和标签，并留有一些间距，以便更容易阅读。

我查看了这篇文章“ [ggplot legend issue w/ geom_point and geom_text](https://stackoverflow.com/questions/4221168/ggplot-legend-issue-w-geom-point-and-geom-text) ”并尝试修复我的代码，如您在上面看到的，但我不知道为什么会遇到这个问题。

还有另一篇文章[如何说服 ggplot2 geom_text 在时间序列图中标记指定日期？](https://stackoverflow.com/questions/7578536/how-can-i-persuade-ggplot2-geom-text-to-label-a-specified-date-in-a-time-series)其中谈到了类似的问题。我是否因为我也在使用 ggmap 而得到不同的结果？

请帮我解决这个问题。非常感谢。

贾巴巴

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-11T23:11:52.523

您的问题是您没有`geom_text`正确指定美学：

```
geom_text(data = df, aes(x = lon, y = lat, label = label), 
          size = 3, vjust = 0, hjust = -0.5) 
```

您没有告诉`geom_text`使用数据框中的变量`df`。如果你不这样做，所有的美学都继承自 main 调用。最后，当将美学设置为单个值时，不要在 内部执行此操作`aes()`，而是在外部执行此操作。

我对`hjust`设置进行了修改以使标签可见。

# javascript - Konami 代码帮助 – 两种不同的 KeyDown 输入

> ID：14288003
> 
> 赞同：1
> 
> 时间：2013-01-11T22:55:59.717
> 
> 标签：javascript, keydown

我想在我的网页上实现 Konami 代码。我遇到了这个易于使用的javascript：

```
<script type="text/javascript">
if ( window.addEventListener ) {
  var state = 0, konami = [38,38,40,40,37,39,37,39,66,65];
  window.addEventListener("keydown", function(e) {
    if ( e.keyCode == konami[state] ) state++;
    else state = 0;
    if ( state == 10 )
      window.location = "http://www.konami.com/";
    }, true);
}
</script> 
```

但是，在我的网页上，我希望必须有两个不同的输入，从而导致两个不同的网站。例如：如果有人在他们的键盘上输入 [38,38,40,40,37,39,37,39,66,65] Konami 序列，那么我希望他们被重定向到“ [http://www.konami .com/](http://www.konami.com/) ”。但是如果有人在他们的键盘上输入**google**（即 71、79、79、71、76、69），那么我希望他们被重定向到“ [http://www.google.com/](http://www.google.com/) ”。

有人可以告诉我如何通过更改上面的 javascript 来实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:02:45.933

试试这个：

```
<script type="text/javascript">
if ( window.addEventListener ) {
  var state1 = 0, konami = [38,38,40,40,37,39,37,39,66,65];
  var state2 = 0, google = [71,79,79,71,76,69];
  window.addEventListener("keydown", function(e) {
    if ( e.keyCode == konami[state1] ) state1++;
    else state1 = 0;
    if ( e.keyCode == google[state2] ) state2++;
    else state2 = 0;
    if ( state1 == 10 )
      window.location = "http://www.konami.com/";
    if ( state2 == 6 )
      window.location = "http://www.google.com/";
    }, true);
}
</script> 
```

# firebase - 当 Firebase 节点同步时，是完整的新值发送到服务器还是只是差异？

> ID：14288008
> 
> 赞同：3
> 
> 时间：2013-01-11T22:56:14.597
> 
> 标签：firebase

当通过回调更新对象时，它的工作方式是否相同`ref.on('value', ...`？

我试图在 Chrome 开发工具中自己弄清楚，但没能做到。

这对我来说很重要，因为我正在开发一个用户可能存储大量文本的应用程序。如果只通过网络发送差异，它会更轻量级，并且我可以更频繁地同步。如果发送了完整的值，我不想这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:24:08.770

写入数据时，Firebase 服务器当前会将所有正在写入的数据发送到服务器。如果您编写一个大对象，然后再次用同一个对象重写整个对象，则整个对象将通过网络发送（这可能会在未来发生变化，但这是当前的实现）。

当从服务器将数据发送回其他客户端时，我们会进行一些优化并且不会传输一些重复的数据。

Firebase 旨在让您能够精细地访问数据。我强烈建议您解决正在发生变化的数据并仅更新相关部分。例如：

```
//inefficient method:
ref.set(HUGE_BLOCK_OF_JSON);

//efficient method:
ref.child("a").child("b").child("c").set(SOME_SMALL_PIECE_OF_DATA); 
```

当您寻址到一段数据时，只有那一小段被传输并重新广播给其他客户端。

Firebase 适用于真正的实时应用程序，一旦数据发生变化，就会立即进行更新。如果您发现自己故意将更改缓存一段时间并出于性能原因将它们保存为大 blob，则您可能应该分解数据并仅写入相关部分。

# php - Weather Underground API：通过 IP 查询 API

> ID：14288012
> 
> 赞同：0
> 
> 时间：2013-01-11T22:56:35.397
> 
> 标签：php, api, wunderground

我正在构建一个允许按 IP 地址搜索的 Weather 类。我正在尝试将 Wunderground API 实现为要使用的选项之一。但是，我似乎找不到使用 IP 地址查询 API 的方法。我试过这个：`autocomplete.wunderground.com/aq?query={IP ADDRESS HERE}`- 但正如你所看到的，它没有找到任何结果。关于这个问题的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:20:26.277

我建议您改用 World Weather Online API。它易于使用，具有易于解析的面向公众的 JSON 响应。您只需为每个查询提供您的 API 密钥，它支持 IP 地址查询、纬度、经度、区域设置名称等。试试看人。[在这里](http://www.worldweatheronline.com/free-weather-feed.aspx)找到它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T01:45:27.890

尝试`http://api.wunderground.com/api/Your_Key/forecast/geolookup/conditions/q/autoip.json?geo_ip=Your_IP`，而不是。

有关详细信息，请参阅链接：[http](http://www.wunderground.com/weather/api/d/docs?d=data/index) ://www.wunderground.com/weather/api/d/docs?d=data/index 。

# javascript - 为什么我不能使用 javascript 验证用户输入？

> ID：14288023
> 
> 赞同：-3
> 
> 时间：2013-01-11T22:57:51.227
> 
> 标签：javascript, html

我正在尝试使用 JavaScript 验证用户在 Web 登录表单上的输入，但有些东西让我发疯了，我不知道出了什么问题。限制：参考。number 必须是数字，并且 postcode 只能包含数字和字母。所以我通过几个函数来检查这个和输入字段的长度。此外还有 HTML 表单和 JavaScript 文件。编辑：所有验证方法都会失败，即使我没有在字段中输入值，它也会将我重定向到成功的登录页面。

```
<html>
<form method"POST" id="loginform"  action="thank-you.html">
<table>
    <tr>
<td>  Post Code :  <input id="postcode" type="text"  required="required" /></td>
<td>   Ref. Number :<input id="passw" type="password"  required="required" /></td>
<td> <input type="submit" class="submit"value="Submit"  </td>
    </tr>
</table>
</form>
</html 
```

和 javascrit 代码：

```
function formValidation() {
    document.getElementById("loginform").onsubmit = function () {
        var uid = document.loginform.postcode;
        var passid = document.loginform.passw;
        if (postcode_validation(uid, 5, 7)) {
            if (passid_validation(passid, 4, 6)) {
                if (alphanumeric(uid)) {
                    if (allnumeric(passid)) {}
                }
            }
        }
    }
    return false;
}

function userid_validation(uid, mx, my) {
    var uid_len = uid.value.length;
    if (uid_len == 0 || uid_len >= my || uid_len < mx) {
        alert("Postcode should not be empty / length be between " + mx + " to " + my);
        uid.focus();
        return false;
    }
    return true;
}

function passid_validation(passid, mx, my) {
    var passid_len = passid.value.length;
    if (passid_len == 0 || passid_len >= my || passid_len < mx) {
        alert("Password should not be empty / length be between " + mx + " to " + my);
        passid.focus();
        return false;
    }
    return true;
}

function alphanumeric(uid) {
    var letters = /^[0-9a-zA-Z]+$/;
    if (uid.value.match(letters)) {
        return true;
    } else {
        alert('postcode must have alphanumeric characters only');
        uid.focus();
        return false;
    }
}

function allnumeric(passid) {
    var numbers = /^[0-9]+$/;
    if (passid.value.match(numbers)) {
        return true;
    } else {
        alert('REf number must have numeric characters only');
        passid.focus();
        return false;
    }
}
window.onload = function () {
    formValidation();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:02:05.183

提交标签未关闭。查看突出显示 Stackoverflow 的代码，提交标签上缺少它。

```
<td> <input type="submit" class="submit"value="Submit"  </td> 
```

应该：

```
<td> <input type="submit" class="submit" value="Submit" /></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T13:35:07.487

Change your code to the following:

```
<html>
<form method"POST" onSubmit="return formValidation(this)" id="loginform"  action="thank-you.html">
<table>
    <tr>
<td>  Post Code :  <input name="postcode" id="postcode" type="text"  required="required" /></td>
<td>   Ref. Number :<input name="passw" id="passw" type="password"  required="required" /></td>
<td> <input type="submit" class="submit"value="submit">  </td>
</tr>
</table>
</form>
</html> 
```

And:

```
function formValidation(theForm) {
    if (postcode_validation(theForm.postcode, 5, 7)) {
        if (passid_validation(theForm.passwd, 4, 6)) {
            if (alphanumeric(this.postcode)) {
                if (allnumeric(theForm.passwd)) {
                    return true;
                }
            }
        }
    }
    return false;
} 
```

This way you don't have to fetch elements by ID, because you have everything you need inside the added parameter theForm. If you don't use the IDs for layout just remove them entirely.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:22:36.183

我认为您可以尝试在最里面的 if 块中添加最终的 return 语句。

```
function formValidation() {
    document.getElementById("loginform").onsubmit = function () {
        var uid = document.loginform.postcode;
        var passid = document.loginform.passw;
        if (postcode_validation(uid, 5, 7)) {
            if (passid_validation(passid, 4, 6)) {
                if (alphanumeric(uid)) {
                    if (allnumeric(passid)) {
                        return true;
                    }
                }
            }
        }
    }
    return false;
} 
```

我知道这看起来太简单了，但是您的代码中显然缺少它。如果没有 return 语句，Javascript 默认为**undefined**，什么会阻止您的表单提交。

# c++ - 将 3d 对象排列成圆形

> ID：14288024
> 
> 赞同：0
> 
> 时间：2013-01-11T22:58:02.987
> 
> 标签：c++

我正在使用 c++ 和 g3d 绘制一个简单的球体，但不知道如何将多个对象/球体排列成圆形。

```
for(i = 0.0f;i<1.4f;i+=0.2f){ 
    sphere->position = (Vector3(2,i,0));
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:00:56.940

```
// num_points is the number of points/objects in 
// the circle and coords is just the center location of where to draw
static void draw_circle_loop(float radius, int num_points, struct vector2d *coords)
{
    int i;
    float x, y;
    float angle;

    for (i = 0; i < num_points; i++)
    {
        angle = i * (2.0f * M_PI / num_points);
        x = coords->x + cosf(angle) * radius;
        y = coords->y + sinf(angle) * radius;
        glVertex2f(x, y);
    }
     glVertex2f(coords->x + radius, coords->y);
} 
```

尝试这样的事情。而不是调用`glVertex2f`使用这些坐标来循环放置东西。

# c# - 如何在C#中从阅读器中获取零的十进制值

> ID：14288028
> 
> 赞同：0
> 
> 时间：2013-01-11T22:58:38.913
> 
> 标签：c#, decimal

我如何定义小数的精度和小数位数。我需要获取十进制值，包括小数点后的零。

ex:store proc 返回数字 50.00，但是在将该值分配给十进制时，它被截断为 50。我希望将整个 50.00 分配给变量。

# c# - 用 DateTimeContinuousAxis 排列多个 RadCartesianChart

> ID：14288030
> 
> 赞同：0
> 
> 时间：2013-01-11T22:58:44.187
> 
> 标签：c#, telerik

我希望我的所有图表都使用`DateTimeContinuousAxis`. 我有几个带有时间戳的值。我解析文件并存储每个时间戳的值。现在，我如何使用 Telerik 创建几个排列起来就像看起来像时序图的图表`RadChartView`？请注意，除了设置的任何样式之外，这一切都需要务实地完成。

这里有一些要考虑的事情：

*   当`VerticalAxis`标签有 4 个字符 (-900) 与 2 个字符 (10) 时，所有图表的垂直轴不对齐
*   当我像我想要`Hide`的`HorizontalAxis.Visibility`那样摆脱轴时，但随后`LineSeries`一直延伸到网格的右侧，因此它们不会与最底部的图表对齐`HorizontalAxis`

这是我正在谈论的屏幕截图（实际上我在此屏幕截图中部分固定了垂直轴标签，请参阅我如何做到的答案）：

![在此处输入图像描述](../Images/98daef702cd5e56bde58509486862b66.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T22:58:44.187

首先，您已将每个图表添加到网格中。这是我的 XAML 的样子：

```
<Grid Name="layout" /> 
```

接下来，我在循环中初始化并设置了几个（并非全部显示）组件——它遍历我想要绘制图表的集合或值——我将添加到表格/图表中

```
LineSeries lineSeries = new LineSeries();
lineSeries.VerticalAxis = new LinearAxis() 
{ //set additional properties here 
    LabelStyle = Resources["AdjustedLabelVerticalAxis"] as Style
};

lineSeries.ItemsSource = collection.Values;
lineSeries.CategoryBinding = new PropertyNameDataPointBinding() { PropertyName = "Date" };
lineSeries.ValueBinding = new PropertyNameDataPointBinding() { PropertyName = "Value" };

RadCartesianChart chart = new RadCartesianChart();

chart.HorizontalAxis = new DateTimeContinuousAxis() { LabelFormat = "HH:mm:ss" };
chart.Series.Add(lineSeries); 
```

然后我“破解”我的水平轴消失：

```
chart.HorizontalAxis.MajorTickStyle = Resources["HideTicksHorizontalAxis"] as Style;
chart.HorizontalAxis.LabelStyle = Resources["HideShiftHorizontalAxisLabel"] as Style;
chart.HorizontalAxis.LineThickness = 0; 
```

现在我们需要在循环结束时以编程方式将图表添加到网格中，因此每个图表都在自己的行中，这有助于自动调整大小。

```
layout.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(chart.MinHeight, GridUnitType.Star) }); 
```

接下来我们在 Grid 中设置我们要放置图表的行，并添加它：

```
Grid.SetRow(chart, i); //where i is the loop counter
layout.Children.Add(chart); 
```

循环完成后，我们所有的图表都在`collection`网格中，没有水平轴标签。我们需要一个 DateTimeContinousAxis，所以让我们变得狡猾。

我们首先需要添加最后一行，因为我们将创建另一个图表并填充相同的数据，然后隐藏并调整所有内容。

所以在我的循环之外我做了：

```
layout.RowDefinitions.Add(new RowDefinition() { Height = new GridLength(30) }); //add last row
DateTimeContinuousAxis graph = new DateTimeContinuousAxis();
graph.MinHeight = 12;
graph.Maximum = collection.Values[collection.Values.Count - 1].Date; //max/min DateTime values
graph.Minimum = collection.Values[0].Date;

graph.LabelInterval = 2;
graph.MaximumTicks = 3;
graph.LabelFormat = "hh:mm:ss";
graph.MajorStepUnit = Telerik.Charting.TimeInterval.Second;
graph.LineThickness = 1; 
```

然后继续创建一个极简主义`LinearAxis`, `LineSeries`, 和`RadCartesianChart`

```
LinearAxis axis = new LinearAxis();
LineSeries ls = new LineSeries();
RadCartesianChart blankChart = new RadCartesianChart();

ls.ItemsSource = collection.Values;  //Set up for binding
ls.CategoryBinding = new PropertyNameDataPointBinding() { PropertyName = "Date" };
ls.ValueBinding = new PropertyNameDataPointBinding() { PropertyName = "Value" };
ls.Visibility = System.Windows.Visibility.Hidden; //hide the line from being plotted

axis.LabelStyle = Resources["TextBlockStyle2"] as Style;
axis.Opacity = 0; //make it invisible
axis.MinHeight = 0; //make it able to resize to 0 if ever needed

blankChart.MinHeight = 0; 
blankChart.HorizontalAxis = graph;
blankChart.VerticalAxis = axis;

blankChart.Series.Add(ls);
Grid.SetRow(blankChart, collection.Count);
layout.Children.Add(blankChart); 
```

有了它，窗口中的最后一个 Grid 将只包含一个可见的 DateTimeContinuous 轴，它将与您的其他图表对齐。这是相当的黑客，所以它不是最漂亮或修改过的。下面是可以在 XAML 中使用的样式以及最终结果。

```
<Style x:Key="AdjustedLabelVerticalAxis" TargetType="{x:Type TextBlock}">
    <Setter Property="Width" Value="30"/>
    <Setter Property="Margin" Value="0,0,2,0"/>
    <Setter Property="HorizontalAlignment" Value="Left"/>
    <Setter Property="TextAlignment" Value="Right"/>
</Style>
<Style x:Key="HideShiftHorizontalAxisLabel" TargetType="{x:Type TextBlock}">
    <Setter Property="Margin" Value="4,-15,4,0"/>
    <Setter Property="Foreground" Value="Transparent"/>
</Style>
<Style x:Key="HideTicksHorizontalAxis" TargetType="{x:Type Rectangle}">
    <Setter Property="Visibility" Value="Hidden"/>
</Style> 
```

![在此处输入图像描述](../Images/dce9f67e1efc41a043e26d3723628629.png)

有任何问题，请提出。

# jquery - jQuery for 循环切换 id

> ID：14288031
> 
> 赞同：2
> 
> 时间：2013-01-11T22:58:44.723
> 
> 标签：jquery

我正在尝试使用 jquery waypoint 插件动态更改页面的背景（它会告诉您元素何时位于视口的顶部或底部）。我的 HTML 很简单 - 我有多个标题，其 id 为`#part1',`#part2' 等等。什么时候`part[x]`在视口的顶部，我想`img[x]`显示。

以下代码有效：

```
$("#part2").waypoint(function(event, direction) {
   if (direction === 'down') {
      $(".container").attr("id", "img2");
   }
   else {
      $(".container").attr("id", "img2");
   }
}); 
```

但是，我有 18 个“部分”，我不希望这个代码 18 次。我尝试使用这样的`for`循环：

```
var chapters = $("[id^='part']");

for (var i=1; i<=chapters.length; i++){

    $("#part[i]").waypoint(function(event, direction) {
       if (direction === 'down') {
          $(".container").attr("id", "img[i]");
       }
       else {
          $(".container").attr("id", "img[i]");
       }
    });
} 
```

但同样，不起作用。是否可以像我所做的那样用方括号转义选择器？如果不是，那么实现这一目标的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:07:03.323

假设航点插件编写正确并处理多个元素：

```
$("[id^='part']").waypoint(function(event, direction) {
    $(".container").attr('id', this.id.replace('part', 'img'));
}); 
```

根据需要添加方向检查。

我不熟悉这个插件，但关键部分是你应该能够将航点插件绑定到多个元素，然后在事件处理程序中`this` *应该*是触发事件的元素，其 ID 为`this.id`.

注意：只是更改 ID`.container`通常不会更改其上的图像，除非您有一堆 CSS 规则，如下所示：

```
#img1 { background-image: ... }
#img2 { background-image: ... }
... 
```

但是，在这种情况下，您应该使用类而不是 ID - 元素的 ID 在其生命周期内保持不变并且其 CSS 类发生变化更为正常。

如果没有其他 CSS 类，则给它一个固定的 ID并使用上述代码的变体是`.container`有意义的：`container`

```
$("[id^='part']").waypoint(function(event, direction) {
    $("#container").attr('class', this.id.replace('part', 'img'));
}); 
```

没有任何其他 CSS 类的限制是，由于`class`可以包含多个值，因此完全覆盖类列表比删除前一个类（无论是什么）然后添加新类要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:03:06.003

你可以这样试试

```
for (var i=1; i<=chapters.length; i++){

    $("#part" + i).waypoint(function(event, direction) {
       if (direction === 'down') {
          $(".container").attr("id", "img" + i);
       }
       else {
          $(".container").attr("id", "img" + i);
       }
    });
} 
```

而不是单独的ID，我会使用css类并且这样做你不需要循环

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:02:28.393

相反，如果使用方括号，为什么不：

```
$("#part" + i)
"img" + i 
```

然后，您只需按 id 选择，并动态创建 id。

# python - 模拟线程上的死锁

> ID：14288039
> 
> 赞同：3
> 
> 时间：2013-01-11T22:59:26.223
> 
> 标签：python, process, deadlock

我有 3 个线程，它们当前同时运行。

```
def f1():
    print "running first thread\n"
    sleep(10)

def f2():
    print "running second thread\n"
    sleep(10)

def f3():
    print "running third thread\n"
    sleep(10)

if __name__ == "__main__":
    thread1 = Thread(target = f1)
    thread2 = Thread(target = f2)
    thread3 = Thread(target = f3)

    try:
        thread1 = Thread(target = f1)
        thread1.start()

        thread2 = Thread(target = f2)
        thread2.start()

        thread3 = Thread(target = f3)   
        thread3.start()

        while(thread1.isAlive() or thread2.isAlive() or thread3.isAlive()): 
            thread1.join()
            thread2.join()
            thread3.join()  
    except (KeyboardInterrupt, SystemExit):
        sys.exit() 
```

如何模拟死锁？另外，我怎样才能让每个线程一个接一个地运行？我还可以列出当前在我的脚本中运行的所有线程吗？还是给他们优先权？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:13:05.103

> 如何模拟死锁？

死锁意味着一个或多个线程被阻止取得任何进展，因此您可以使用单个线程来模拟它。只需`while True:`在`sleep(10)`.

在实际情况下，您通常有两个线程同时阻止彼此的进程。例如，也许他们以相反的顺序获取了一对锁，所以线程 1 在获得锁 2 之前不会释放锁 1，但线程 2 在获得锁 1 之前不会释放锁 2。所以，它可能最好通过让两个线程永久阻塞来模拟它。

如果你想实际创建一个死锁，最简单的方法是让线程相互阻塞：add `thread2.join()`to`f1`和`thread1.join()`to `f2`。然后`f1`不能完成，直到`f2`做，`f2`不能完成，直到`f1`做，所以谁都不能完成。

然而，如果你想创建一个现实的死锁，你几乎肯定会想要使用同步对象[`threading.Lock`](http://docs.python.org/library/threading.html#lock-objects)来做类似上面描述的两锁场景的事情。

> 另外，我怎样才能让每个线程一个接一个地运行？

好吧，最简单的方法是首先不使用线程。但如果你真的想要，只需这样做：

```
thread1.start()
thread1.join()
thread2.start()
thread2.join()
thread3.start()
thread3.join() 
```

> 我还可以列出当前在我的脚本中运行的所有线程吗？

请参阅[threading.enumerate()](http://docs.python.org/library/threading.html#threading.enumerate)。除了调试目的，您通常不想使用它；如果您想稍后访问它们（就像您正在做的那样），请在创建线程时跟踪它们。

> 还是给他们优先权？

正如文档所说：

> 目前，没有优先级，没有线程组，线程不能被销毁、停止、挂起、恢复或中断。

如果你想要这个，你必须走出去`threading`，例如，通过 , 等使用原生`ctypes`API `win32api`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-31T19:18:22.060

**如何模拟死锁？**

```
import threading
import time

l1=threading.Lock()
l2 = threading.Lock()

def f1(name):
    print('thread',name,'about to lock l1')
    with l1:
        print('thread',name,'has lock l1')
        time.sleep(0.3)
        print('thread',name,'about to lock l2')
        with l2:
            print('thread',name,'run into deadLock,\nthis line will never run')

def f2(name):
    print('thread',name,'about to lock l2')
    with l2:
        print('thread',name,'has lock l2')
        time.sleep(0.3)
        print('thread',name,'about to lock l1')
        with l1:
            print('thread',name,'run into deadLock,\nthis line will never run')

if __name__ == '__main__':
    t1=threading.Thread(target=f1, args=['t1',])
    t2=threading.Thread(target=f2, args=['t2',])

    t1.start()
    t2.start() 
```

*输出：*

```
$ python tmpThread.py
thread t1 about to lock l1
thread t2 about to lock l2
thread t1 has lock l1
thread t2 has lock l2
thread t1 about to lock l2
thread t2 about to lock l1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-04T20:17:17.923

经典的银行转账僵局示例。

```
from threading import Lock, Thread

accountone = Lock()
accounttwo = Lock()

def transfer(accountone, accounttwo):
    accountone.acquire()
    accounttwo.acquire()
    print("Transaction done")
    accountone.release()
    accounttwo.release()

def transfer_do(accountone, accounttwo):
    while True:
        transfer(accountone, accounttwo) # send money from first account to second
        transfer(accounttwo, accountone) # send money from second account to first

for x in range(30):
    t = Thread(target=transfer_do, args=(accountone, accounttwo))
    t.start() 
```

# android - 调用 onLayout 时，Android 刷新的 UI 重叠而不是替换旧图像

> ID：14288041
> 
> 赞同：0
> 
> 时间：2013-01-11T22:59:48.477
> 
> 标签：android, android-layout, android-ui

我编写了一个相当简单的应用程序来提高我的 JNI 和多线程技能，它需要将一串 ascii 字符转换为二进制字符串或将二进制字符串转换为一个 ascii 字符串。每次转换背后的数学都是通过本机库处理的，并且每次调用本机代码都使用 AsyncTask 在其自己的线程上运行，以免破坏 UI。问题在于，当 UI 小部件需要更改大小或位置时，每当调用 onLayout 时，新图像都会放置在仍然可见的旧图像之上，而不是替换它。我尝试删除可能的罪魁祸首（JNI 模块、AsyncTask 模块），但即使它的功能被剥离并且只保留 UI，我也看到新 UI 视图重叠而不是替换旧视图的相同结果。从我下面的代码中可以看出，除了我现在活跃的更灵活的自定义 addView 模型之外，我还尝试了旧的 setContentView(...) 方法进行 UI 层次建模，但结果仍然相同。注意：这只发生在设备上（Nexus 7 运行最新的 4.2.1 和 Nexus S 运行 4.0.2）；在模拟器中一切正常。这似乎与 GLES 调用有关，但我在这个应用程序中没有自己做任何事情，而且显然这不会发生在设备上的每个应用程序上，所以它看起来不像是操作系统问题...... 在模拟器中一切正常。这似乎与 GLES 调用有关，但我在这个应用程序中没有自己做任何事情，而且显然这不会发生在设备上的每个应用程序上，所以它看起来不像是操作系统问题...... 在模拟器中一切正常。这似乎与 GLES 调用有关，但我在这个应用程序中没有自己做任何事情，而且显然这不会发生在设备上的每个应用程序上，所以它看起来不像是操作系统问题......

活动课：

```
package cresco.ai.asciitobinstring.core;

import android.app.Activity;
import android.os.Bundle;

public class AsciiToBinActivity_Minimalist extends Activity{

private AsciiToBin_Main hMain;

@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    hMain = new AsciiToBin_Main(this);
    hMain.init();
}
@Override
protected void onResume(){
    super.onResume();

}
@Override
protected void onPause(){
    super.onPause();

}
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState){
    super.onRestoreInstanceState(savedInstanceState);

}
@Override
protected void onRestart(){
    super.onRestart();

}
@Override
protected void onDestroy(){
    super.onDestroy();

}
} 
```

主要经理阶层：

```
package cresco.ai.asciitobinstring.core;

import cresco.ai.asciitobinstring.gui.ConversionViewController;
import cresco.ai.asciitobinstring.gui.DefineLayoutParams;
import cresco.ai.asciitobinstring.gui.TutorialViewController;
import cresco.ai.asciitobinstring.math.StringConverter;
import android.app.Activity;
import android.content.res.AssetManager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.RelativeLayout;
import android.widget.ViewFlipper;

public class AsciiToBin_Main {

private Activity hAct;
private View mvMainView;
private ViewFlipper mvRootViewFlipper; 

private ConversionViewController mvConversionViewController;
private TutorialViewController mvTutorialViewController;
private RelativeLayout mvRootRL;
private AssetManager mvAssetManager;
private LayoutInflater mvInflater;

private StringConverter mvConverter;

public AsciiToBin_Main(Activity act){
    hAct = act;

    mvConverter = new StringConverter(this);

    mvRootRL = new RelativeLayout(hAct);
    hAct.addContentView(mvRootRL, 
DefineLayoutParams.getParams(DefineLayoutParams.getMM()));
    //hAct.setContentView(mvRootRL);
    ///hAct.setContentView(R.layout.conversion_layout);
}

public void init(){

    //Add the viewgroup subclass viewflipper to the rootRL
    mvRootViewFlipper = new ViewFlipper(hAct);
    mvRootRL.addView(mvRootViewFlipper);

    //Instantiate our conversion view controller
    mvConversionViewController = new ConversionViewController(this);
    mvTutorialViewController = new TutorialViewController(this);

    //Fire up the conversion view
    mvConversionViewController.initGUI();
    mvConversionViewController.initSpinnerElements();

    //Fire up the tutorial view
    mvTutorialViewController.initGUI();

}

public RelativeLayout getRootRL(){
    return mvRootRL;
}

public ViewFlipper getRootViewFlipper(){
    return mvRootViewFlipper;
}

public View getMainView(){
    return mvMainView;
}
public Activity getAct(){
    return hAct;
}
public void setMainView(View v){
    mvMainView = v;
}
public void setActivity(Activity a){
    hAct = a;
}
public StringConverter getConverter(){
    return mvConverter;
}
public void setConverter(StringConverter sc){
    mvConverter = sc;
}
} 
```

转换视图控制器：

```
package cresco.ai.asciitobinstring.gui;

import cresco.ai.asciitobinstring.core.AsciiToBin_Main;
import cresco.ai.asciitobinstring.core.R;
import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.os.AsyncTask;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.TextView;

public class ConversionViewController extends View implements OnClickListener,   
OnItemSelectedListener{

private AsciiToBin_Main hMain;
private LayoutInflater mvInflater;
private View mvConversionView;
private Button mvConvertB;
private Button mvToTutorialB;
private Spinner mvConversionTypeSP;
private EditText mvAsciiStringET;
private EditText mvBinStringET;
private ArrayAdapter<CharSequence> mvSpinnerAdapter;

public ConversionViewController(AsciiToBin_Main main) {
    super(main.getAct());
    hMain = main;

}

public void initGUI(){

    mvInflater = (LayoutInflater) 
hMain.getAct().getSystemService(hMain.getAct().LAYOUT_INFLATER_SERVICE);
    mvConversionView = mvInflater.inflate(R.layout.conversion_layout, 
hMain.getRootViewFlipper(),false);
    hMain.getRootViewFlipper().addView(mvConversionView);

    //hMain.getRootRL().addView(mvConversionView);

    mvConvertB = (Button)hMain.getAct().findViewById(R.id.convertB);
    mvToTutorialB = 
(Button)hMain.getAct().findViewById(R.id.conversion_To_Tutorial_B);
    mvAsciiStringET = 
(EditText)hMain.getAct().findViewById(R.id.asciiStringET);
    mvBinStringET = (EditText)hMain.getAct().findViewById(R.id.binStringET);
    mvConversionTypeSP = 
(Spinner)hMain.getAct().findViewById(R.id.conversionTypeSP);

    mvConvertB.setOnClickListener(this);
    mvToTutorialB.setOnClickListener(this);
    mvConversionTypeSP.setOnItemSelectedListener(this);

}

public void initSpinnerElements(){
    mvSpinnerAdapter = ArrayAdapter.createFromResource(hMain.getAct(), 
R.array.conversion_choices_array, android.R.layout.simple_spinner_item);
    mvSpinnerAdapter.setDropDownViewResource
(android.R.layout.simple_spinner_dropdown_item);
    mvConversionTypeSP.setAdapter(mvSpinnerAdapter);
    mvConversionTypeSP.setSelection(0);

    //Now that that the UI is ready, display it
    ////hMain.getRootViewFlipper().showNext();
}

@Override
protected void onDraw(Canvas c){
    super.onDraw(c);

}

@Override
public void onClick(View v) {
    if(v==mvConvertB){
        Log.d("me", "button pressed! Conversion type selected currently is 
"+mvSpinnerAdapter.getItem(mvConversionTypeSP.getSelectedItemPosition()));
        if(mvConversionTypeSP.getSelectedItemPosition() == 0){

            //This is the convert ascii to binary string choice
            //Calls the native method calculateBinFromAsciiStringJNI
            //Not a terribly heavy process, but since it is disparate 
                            //from
            //the UI we should probably grant it its own thread...
            //Uncomment when UI overlay bug is solved
            new 
NativeStringConversionTask(0).execute(mvAsciiStringET.getText().toString());

//mvBinStringET.setText(hMain.getConverter().
//calculateBinFromAsciiStringJNI(mvAsciiStringET
//.getText().toString())); //all on the UI thread, not good
        }
        else if(mvConversionTypeSP.getSelectedItemPosition() == 1){
            //This is the convert binary to ascii string choice

            //Uncomment when UI overlay bug is solved
            new 
NativeStringConversionTask(1).execute(mvBinStringET.getText().toString());

//mvAsciiStringET.setText(hMain.getConverter().
//calculateAsciiFromBinStringJNI(mvBinStringET
//.getText().toString())); //all on the UI thread.  Not good
        }
    }
    else if(v==mvToTutorialB){
        //hMain.getRootViewFlipper().setDisplayedChild(1);
        hMain.getRootViewFlipper().showNext();
        //hMain.getAct().setContentView(R.layout.tutorial_layout);
    }

}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    Log.d("me", "itemselectedlistener received a callback! the position 
selected is "+arg2);

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    Log.d("me", "itemselectedlistener received a no items slected callaback");

}

//Uncomment once the UI overlay issue is solved
private class NativeStringConversionTask extends AsyncTask<String,Integer,String>{
    private int taskID = 0;

    public NativeStringConversionTask(int id){
        taskID = id;
    }

    @Override
    protected void onPreExecute(){
        Log.d("me","in the preExecute of the nativeStringConversion Async 
                    task");
    }

    @Override
    protected String doInBackground(String... s) {
        //NB: if we wanted onProgressUpdate to be called with something we 
                    //would
        //invoke publishProgress(something) in this function

        Log.d("me", "bg task started with taskID "+taskID);
          if(taskID == 0){
            publishProgress(taskID);
            return 
hMain.getConverter().calculateBinFromAsciiStringJNI(s[0].toString());
          }
          else if (taskID == 1){
              publishProgress(taskID);
            return 
hMain.getConverter().calculateAsciiFromBinStringJNI(s[0].toString());
          }
          else{
              publishProgress(taskID);
              return "This shouldn't appear.  if it does... may the 
gods below help us all";
          }

    }

    @Override
    protected void onProgressUpdate(Integer... progress){
        Log.d("me", "progressUpdate called!");
    }

    @Override
    protected void onPostExecute(String result){

        Log.d("me", "calling postExecute...");
        if(taskID == 0){
            mvBinStringET.setText((String)result);
          }
          else if (taskID == 1){
              mvAsciiStringET.setText((String)result);
          }
          else{
              mvBinStringET.setText("This shouldn't appear.  if it 
does... may the gods below help us all");
              mvAsciiStringET.setText("This shouldn't appear.  if it 
does... may the gods below help us all");
          }
        //mvBinStringET.setText(s);
    }

}

} 
```

教程视图控制器：

```
package cresco.ai.asciitobinstring.gui;

import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import cresco.ai.asciitobinstring.core.AsciiToBin_Main;
import cresco.ai.asciitobinstring.core.R;

public class TutorialViewController extends View implements OnClickListener{

private AsciiToBin_Main hMain;
private LayoutInflater mvInflater;
private View mvTutorialView;
private Button mvToConversionB;

public TutorialViewController(AsciiToBin_Main main){
    super(main.getAct());
    hMain = main;

}

public void initGUI(){

    mvInflater = (LayoutInflater) 
hMain.getAct().getSystemService(hMain.getAct().LAYOUT_INFLATER_SERVICE);
    mvTutorialView = mvInflater.inflate(R.layout.tutorial_layout, 
hMain.getRootViewFlipper(),false);
    hMain.getRootViewFlipper().addView(mvTutorialView);

    mvToConversionB = 
(Button)hMain.getAct().findViewById(R.id.tutorial_Conversion_B);

    mvToConversionB.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    if(v==mvToConversionB){
        //hMain.getRootViewFlipper().setDisplayedChild(0);
        hMain.getRootViewFlipper().showNext();
        //hMain.getAct().setContentView(R.layout.conversion_layout);
    }
}

} 
```

字符串转换器：

```
package cresco.ai.asciitobinstring.math;

import cresco.ai.asciitobinstring.core.AsciiToBin_Main;

public class StringConverter {

private AsciiToBin_Main hMain;

public StringConverter(AsciiToBin_Main main){
    hMain = main;

}
//Uncomment once the UI overlay issue is solved
public native String calculateBinFromAsciiStringJNI(String s);
public native String calculateAsciiFromBinStringJNI(String s);

 static {
        System.loadLibrary("stlport_shared");
        System.loadLibrary("ascii2bin");
    }

} 
```

转换布局.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<EditText
    android:id="@+id/asciiStringET"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/conversionTypeSP"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="71dp"
    android:hint="Your ASCII string goes here"
    android:text="" />

<EditText
    android:id="@+id/binStringET"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/asciiStringET"
    android:layout_below="@+id/asciiStringET"
    android:layout_marginTop="61dp"
    android:hint="Your binary string goes here"
    android:text="" />

<Button
    android:id="@+id/convertB"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/binStringET"
    android:text="Convert Strings!" />

<Button
    android:id="@+id/conversion_To_Tutorial_B"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_below="@+id/convertB"
    android:text="Read the tutorial on binary numbers" />

<Spinner
    android:id="@+id/conversionTypeSP"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="57dp" />

</RelativeLayout> 
```

tutorial_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/tutorial_Conversion_B"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:layout_marginBottom="204dp"
    android:text="Return to Conversion" />

</RelativeLayout> 
```

清单.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="cresco.ai.asciitobinstring.core"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="cresco.ai.asciitobinstring.core.AsciiToBinActivity_Minimalist"

        android:label="@string/app_name"
        android:theme="@style/FullscreenTheme" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

我看到的结果如下： ![UI_overlay](../Images/2160dfe1dd56a46495ebdd6e6dcd8e5d.png) ![UI_overlay2](../Images/88fd65159a2cbcaed2f7d86bb0a20868.png)

现在奇怪的是，如果我将应用程序放在后台然后重新打开它（因此调用 onPause 和 onResume），加载的 UI 会正确刷新，并删除旧的视图工件。当然，尝试调整 edittext 小部件大小的新字符串转换会再次创建重叠。

![正确视图](../Images/9d448a25b70921d5431a7e4a713af856.png)

有谁知道这背后可能是什么？我的目标是 sdk 修订版 17，minSDK 为 8 的标准库。当我第一次看到这个时，我认为这是新的全息 UI 方案的奇怪副作用，所以我将 styles.xml 回滚到 2.3 兼容UI 方案，但我没有看到任何改进。可能是单独搞砸了一些东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T16:00:31.040

这本身并不是一个很好的答案，因为它当然不能解释首先发生的事情，但我发现从头开始创建一个新项目可以解决我看到的奇怪错误；因此，这个问题很可能是由于我对 UI 样式的混乱造成的……希望我有比这更技术性的解释，但目前我没有。无论如何，如果其他人遇到这种情况，重新创建您的项目似乎可以解决问题。如果有人想添加更多解释性细节，请随意！

# c++ - 在 C++ 的派生类中重载二元运算符>

> ID：14288045
> 
> 赞同：0
> 
> 时间：2013-01-11T23:00:29.553
> 
> 标签：c++, binary, overloading, operator-keyword, derived

我已经广泛搜索了这个问题的具体答案，但找不到。我正在尝试使用可以在派生类中覆盖的虚拟运算符> 创建一个基类。目前我遇到了问题，因为声明函数只需要一个输入变量（如“bool operator>（Derived & a）”但试图在 cpp 文件中定义它告诉我它需要两个输入（如“bool operator >（派生和a，派生和b））

我尝试过定义内联运算符，但随后我得到错误，它认为派生类仍然是抽象的，因为我将派生类型传递给运算符，如上所示，而不是基类。但是，如果我通过基类，那么我无法访问派生成员变量，我需要进行比较。

我想我在这里遗漏了一些简单的东西，但我似乎无法弄清楚它是什么。

希望您能提供帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:31:08.543

```
#include <iostream>
using namespace std;
class base{
public :
        virtual bool operator> (base& obj) { cout<<"b\n";return true;}
        virtual ~base(){}
};

class derived: public base{
public:
        virtual bool operator> (derived& obj) { cout<<"d\n";return true;}
        ~derived(){}
};

int main()
{

base *a=new derived(),b;
if(*a>b) { delete a; cout<<"Done!\n"; }

return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:09:35.023

要从基的引用/指针进行虚拟调用，您将需要在函数中使用基类型，例如

```
class Derived : public Base
{
    .... 
    bool operator>(Base &a)
    {
         Derived *pa = dynamic_cast<Derived *>(&a);
         return this->something > pa->something;   // Or whatever... 
    }

   .... 
}; 
```

如果你改变类型，它变成一个不同的函数，当你使用基指针或引用来引用operator>时，它将使用基类中的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:13:06.743

你为什么不离开`operator>()`非虚拟，并让它调用一个私有虚拟函数？

像这样：

```
class Base {
public:
    bool operator>(Base &a) {
        return implementingFunction(a);
    }

private:
    virtual bool implementingFunction(Base &a) = 0;
}; 
```

# html - 将 HTML 更改为 CSS 时从哪里开始

> ID：14288049
> 
> 赞同：0
> 
> 时间：2013-01-11T23:01:16.333
> 
> 标签：html, css

我正在尝试学习 CSS，到目前为止，将 HTML 更改为 CSS 似乎更多地只是将字体、颜色、文本大小、表格和背景更改为一些 CSS 语句。

我的问题是我不确定我还需要什么 HTML 以及要删除什么。我在哪里放 CSS 的东西？尝试通过这个简单的 HTML 来学习基本的 HTML：

```
<html>
<head>
<title>CSS practice</title>
</head>

<body style="background-color:white;">

<table border="1" width="990" bgcolor="#99CCFF">
  <tr>
    <td width="990"><p align="center"><font face="Arial Black" size="6" color="#680000">DDDD</font></td>
</tr>
</table>
<table border="0" width=990 bgcolor="#000000" cellspacing="0" cellpadding="0">
<tr>
<td width="990"><font color="#FFFFFF" face="Arial" size="2"><b> Personal Portfolio</b>    </font></td>
</tr>
</table>
<table border="0" width=990 cellspacing="0" cellpadding="0">
<tr>
<td width="18%" bgcolor="#99CCFF" valign="top">&nbsp;
  <p style="margin-left: 20"><b><font face="Arial" size="2" color="#000000">
  <a href="index.html"> Home </a><br><br>
  <a href="about.html"> About Me </a><br><br>
  <a href="outreach.html"> Outreach </a><br><br>
  <a href="contact.html"> Contact Me </a><br><br>
  <a href="experience.html"> Experience </a><br><br>
  <a href="education.html"> Education </a><br><br> 
  <a href="skills.html"> Skills </a><br><br>

<td width="61%" valign="top">
  <blockquote>
    <p><br>
    <font face="Arial" size="5">Welcome</font></p>
    <p><font size="2" face="Arial"> Aspiring CSS programmer </font></p>
    <img src="me.jpg" alt="US"/>
  </blockquote><br><br>
  <p align="center"><font face="Arial" size="1">© COPYRIGHT 2012 ALL RIGHTS
  RESERVED </font></td>

<table border="0" width="990" bgcolor="#000000" cellspacing="0" cellpadding="0">
<tr>
<td width="100%"><font size="1">&nbsp;</font></td>
</tr>
</table>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:21:31.517

白手起家。构建语义 HTML*只关注内容*，您会发现它比制作 ol'table HTML 要容易得多。

# 无表的语义 HTML

您的新 HTML 应如下所示：

```
<html>
  <head>
    <title>CSS practice</title>
    <link rel="stylesheet" href="css-file.css" type="text/css">
  </head>

  <body>
    <span>DDDD</span>
    <h1>Personal Portfolio</h1>
    <nav>
      <a href="index.html"> Home </a>
      <a href="about.html"> About Me </a>
      <a href="outreach.html"> Outreach </a>
      <a href="contact.html"> Contact Me </a>
      <a href="experience.html"> Experience </a>
      <a href="education.html"> Education </a>
      <a href="skills.html"> Skills </a>
    </nav>
    <p>Welcome <span>Aspiring CSS programmer</span></p>
    <img src="me.jpg" alt="US"/>
    <span>© COPYRIGHT 2012 ALL RIGHTS RESERVED</span>
  </body>
</html> 
```

看？只是内容，与样式无关。简单多了！

因此，在那之后，您可以开始使用新*分隔的 CSS（查看* *标签*`css-file.css` *内的 css 声明`head`*） 。

# CSS 样式

CSS 就是找到 HTML 元素的路径，然后对其进行样式设置。这真的很容易。

例如，您可以像这样**发现**和设置标题的**样式：**

```
h1 {
  font-family: "Verdana";
  font-weight: bold;
} 
```

...您的菜单按钮，例如：

```
nav a {
  color: blue;
  text-style: italic;
} 
```

`nav a`意味着您要为`a`标签内的每个标签设置样式`nav`，而将未设置样式的标签留在标签`a`外`nav`。

嗯……这是一条路！自由构建路径，只要它们满足各自的目标（HTML 元素）。

## 类和 ID

HTML 中的每个标签都可以同时具有 a`class`和`id`属性。将它们自由地应用到您的 HTML 标签中，以帮助您发现您的元素。像这样使用它们：

```
<span class="class_name" id="id_name">content</span> 
```

*在您的 CSS 中，您可以通过在名称前加一个点*来引用一个类，例如：

```
nav a.class_name {
  color: blue;
  text-style: italic;
} 
```

因此，样式将应用于每个`a`具有`class-name`类的标签，位于`nav`标签内。

`Id`'s 的工作方式相同，但在 CSS 中，您通过放置一个哈希 ( `#`) 而不是我们用于 class 的点来引用它们。

***就是这样，你已经开始了。:)***

我个人建议您从这里开始：[如何制作网站](https://developer.mozilla.org/en-US/learn)。请记住...使用大量的[Google](https://www.google.com/search?client=safari&rls=en&q=HTML+CSS&ie=UTF-8&oe=UTF-8)。你很快就会到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T23:05:49.150

css 应该处理大小/位置/颜色/字体——简而言之，任何不是结构的东西。 [w3schools](http://www.w3schools.com/css/css_intro.asp)是一个很好的资源。

使用[jsfiddle](http://www.jsfiddle.net)来尝试测试实现。

[这是一个粗略的剪辑，我用我的小提琴](http://jsfiddle.net/Zqsv7/)演奏了几分钟

html:

```
<html>

  <head>
    <title>CSS practice</title>
  </head>

  <body>
    <div class='header'>DDDD</div>
    <div class='subHeader'>Personal Portfolio</div>
    <div class='links'>
      <ul>
        <li><a href="index.html"> Home </a></li>
        <li><a href="about.html"> About Me </a></li>
        <li><a href="outreach.html"> Outreach </a></li>
        <li><a href="contact.html"> Contact Me </a></li>
        <li><a href="experience.html"> Experience </a></li>
        <li><a href="education.html"> Education </a</li>
        <li><a href="skills.html"> Skills </a></li>
      </ul>
    </div>
    <p class='welcome'>Welcome</p>
    <p class='welcome2'>Aspiring CSS programmer</p>
    <img src="me.jpg" alt="US" />
    <div class='copyright'>© COPYRIGHT 2012 ALL RIGHTS RESERVED</div>
  </body>
</html> 
```

CSS：

```
:root{
    background-color:white;
    font-family: Arial;
  }
  .header {
    border: 1px;
    width: 990px;
    background-color: #99CCFF;
    text-align: center;
    font-size: 16pt;
    color: #680000;
  }
  .subHeader {
    background-color: black;
    color: white;
    font-weight: bold;
  }
  .links {
    width: 200px;
    background-color: #99CCFF;
    font-size: 12pt;
    padding-left: 20px;
    float:  left;
  }
  .welcome {
    font-size: 15pt;
  }
  .welcome2 {
    font-size:12pt;
  }
  .copyright {
    float: left;
    width: 990px;
    text-align: center;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:09:17.583

一般概念是 CSS 替换了 HTML 中的所有样式信息，因此 HTML 应该只作为一种“标记”语言存在，它只为您的内容提供数据结构。

所有涉及颜色/大小/位置等的属性都应重新制作为 CSS 语句，并将一个类添加到这些 HTML 元素中。

例如，表格标签将更改为`<table class="mytable">.`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T23:08:50.737

如果我正确理解您的问题，您正试图用 CSS 替换 HTML 中的样式。

这是您添加 css 的地方（请注意，我正在给出示例，它们可能在语法上也不正确）

```
<head>
<title>CSS practice</title>
<style>
//Your CSS styles - e.g.:
.body {
attribute1: value1,
attribute2: value2
}

</style>
</head> 
```

并且，删除 HTML 标记中的所有`style`, `border`,`width`等属性 - 基本上任何添加任何样式的东西，如高度、颜色、字体、宽度、边框等，都将被移到 CSS 代码中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T23:11:04.650

基本上，您几乎不再需要 HTML 标记上的任何属性，除了 id 和 class，有时还需要内联样式的样式（这不好，但如果您遇到麻烦并且没有时间，可以很方便）。

然后边框、宽度、背景颜色、字体大小和颜色等……都是通过 CSS 管理的，还有数百种其他东西。

对于唯一元素的基本内容，您可以使用 ID 属性，对于页面中重复的元素，使用类。

在 CSS 中，使用 ID 引用

**#myID** { 颜色：红色；}

, 上课

**.myClass** { 颜色：红色；}

以及具有元素名称的元素，例如

**div** {颜色：红色；}

祝你好运，玩得开心:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T23:15:45.730

上面提到的 w3schools 是一个非常好的资源。尝试将您的 css 代码放在单独的“css”文件中。此外，如果您只是想看看事物是如何交互的，浏览器上的开发人员工具非常方便，如果您在 windows/linux 上使用 firefox 或 chrome，您可以尝试 Ctrl+F12。希望这可以帮助。

# c++ - 如何在不相关的类型上实现动态多态性（运行时调用调度）？

> ID：14288050
> 
> 赞同：14
> 
> 时间：2013-01-11T23:01:21.530
> 
> 标签：c++, c++11, runtime, polymorphism, boost-variant

**目标：**

我想**在不相关的类型上实现****类型安全的动态多态性**（即函数调用的运行时分派）- 即在*没有公共基类的类型*上。在我看来，这是可以实现的，或者至少在理论上是合理的。我将尝试更正式地定义我的问题。

 *****问题定义：**

鉴于以下情况：

*   两个或多个**不相关**的类型`A1, ..., An`，每个类型都有一个名为 的方法`f`，可能具有不同的签名，但**具有相同的返回类型** `R`；和
*   一个`boost::variant<A1*, ..., An*>`对象`v`（或任何其他类型的变体），它可以而且*必须*在任何时候假设任何这些类型的一个值；

我的目标是编写在概念上等同于`v.f(arg_1, ..., arg_m);`将**在运行时调度以运行的**指令，`Ai::f`如果其中包含的值的*实际类型*`v`是`Ai`. **如果调用参数与每个**函数的形式参数不兼容`Ai`，编译器应该引发错误。

当然我不需要拘泥于语法`v.f(arg_1, ..., arg_m)`：例如，类似的东西`call(v, f, ...)`也是可以接受的。

我试图在 C++ 中实现这一点，但到目前为止我还没有想出一个**好的**解决方案（我确实有很多不好的解决方案）。下面我澄清一下我所说的“好的解决方案”是什么意思。

**约束：**

一个**好的解决方案**是任何让我模仿`v.f(...)`成语的东西，例如`call_on_variant(v, f, ...);`，并*满足以下约束*：

1.  不需要为必须以这种方式调用的每个函数（例如）或任何可以在代码中的其他地方以多态方式处理的不相关类型列表（例如）进行任何类型的**单独声明，尤其是在全局范围内；**`f``ENABLE_CALL_ON_VARIANT(f)``A1, ..., An``ENABLE_VARIANT_CALL(A1, ..., An)`
2.  调用时不需要**显式命名输入参数的类型**（例如`call_on_variant<int, double, string>(v, f, ...)`）。命名*返回*类型是可以的，所以例如`call_on_variant<void>(v, f, ...)`是可以接受的。

遵循一个示范性的例子，希望能阐明我的愿望和要求。

**例子：**

```
struct A1 { void f(int, double, string) { cout << "A"; } };
struct A2 { void f(int, double, string) { cout << "B"; } };
struct A3 { void f(int, double, string) { cout << "C"; } };

using V = boost::variant<A1, A2, A3>;

// Do not want anything like the following here:
// ENABLE_VARIANT_CALL(foo, <whatever>)

int main()
{
    A a;
    B b;
    C c;

    V v = &a;
    call_on_variant(v, f, 42, 3.14, "hello");

    // Do not want anything like the following here:
    // call_on_variant<int, double, string>(v, f, 42, 3.14, "hello");

    V v = &b;
    call_on_variant(v, f, 42, 3.14, "hello");

    V v = &c;
    call_on_variant(v, f, 42, 3.14, "hello");
} 
```

这个程序的输出应该是：`ABC`.

**最佳（失败）尝试：**

我最接近所需解决方案的是这个宏：

```
#define call_on_variant(R, v, f, ...) \
[&] () -> R { \
    struct caller : public boost::static_visitor<void> \
    { \
        template<typename T> \
        R operator () (T* pObj) \
        { \
            pObj->f(__VA_ARGS__); \
        } \
    }; \
    caller c; \
    return v.apply_visitor(c); \
}(); 
```

**如果本地类中只允许模板成员**（请参阅[此问题](https://stackoverflow.com/questions/4299314/member-template-in-local-class)），这将完美地工作。有没有人知道如何解决这个问题，或者提出一种替代方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-10T20:55:39.020

一段时间过去了，C++14 正在完成，编译器正在增加对新特性的支持，比如通用 lambda。

泛型 lambda 与下面显示的机制一起，允许使用不相关的类实现所需的（动态）多态性：

```
#include <boost/variant.hpp>

template<typename R, typename F>
class delegating_visitor : public boost::static_visitor<R>
{
public:
    delegating_visitor(F&& f) : _f(std::forward<F>(f)) { }
    template<typename T>
    R operator () (T x) { return _f(x); }
private:
    F _f;
};

template<typename R, typename F>
auto make_visitor(F&& f)
{
    using visitor_type = delegating_visitor<R, std::remove_reference_t<F>>;
    return visitor_type(std::forward<F>(f));
}

template<typename R, typename V, typename F>
auto vcall(V&& vt, F&& f)
{
    auto v = make_visitor<R>(std::forward<F>(f));
    return vt.apply_visitor(v);
}

#define call_on_variant(val, fxn_expr) \
    vcall<int>(val, [] (auto x) { return x-> fxn_expr; }); 
```

让我们把它付诸实践。假设有以下两个不相关的类：

```
#include <iostream>
#include <string>

struct A
{
    int foo(int i, double d, std::string s) const
    { 
        std::cout << "A::foo(" << i << ", " << d << ", " << s << ")"; 
        return 1; 
    }
};

struct B
{
    int foo(int i, double d, std::string s) const
    { 
        std::cout << "B::foo(" << i << ", " << d << ", " << s << ")"; 
        return 2;
    }
}; 
```

可以通过`foo()`这种方式多态调用：

```
int main()
{
    A a;
    B b;

    boost::variant<A*, B*> v = &a;
    auto res1 = call_on_variant(v, foo(42, 3.14, "Hello"));
    std::cout << std::endl<< res1 << std::endl;

    v = &b;
    auto res2 = call_on_variant(v, foo(1337, 6.28, "World"));
    std::cout << std::endl<< res2 << std::endl;
} 
```

正如预期的那样，输出是：

```
A::foo(42, 3.14, Hello)
1
B::foo(1337, 6.28, World)
2 
```

该程序已在 VC12 上使用 2013 年 11 月的 CTP 进行了测试。不幸的是，我不知道任何支持通用 lambda 的在线编译器，所以我无法发布一个实时示例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-11T23:59:44.897

好的，这是一个狂野的镜头：

```
template <typename R, typename ...Args>
struct visitor : boost::static_visitor<R>
{
    template <typename T>
    R operator()(T & x)
    { 
        return tuple_unpack(x, t);   // this needs a bit of code
    }

    visitor(Args const &... args) : t(args...) { }

private:
    std::tuple<Args...> t;
};

template <typename R, typename Var, typename ...Args>
R call_on_variant(Var & var, Args const &... args)
{
    return boost::apply_visitor(visitor<R, Args...>(args...), var);
} 
```

用法：

```
R result = call_on_variant<R>(my_var, 12, "Hello", true); 
```

我已经隐藏了通过解包元组来调用函数所需的一定数量的工作，但我相信这已经在 SO 的其他地方完成了。

此外，如果您需要存储引用而不是参数的副本，则可以这样做，但需要更加小心。（你可以有一个引用元组。但你必须考虑是否也允许临时对象。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-12T11:06:38.490

不幸的是，这不能在 C++ 中完成（但 - 见结论）。遵循一个证明。

**考虑1：[关于模板的需要]**

为了确定在满足表达式（或其任何等效形式）`Ai::f`时在运行时调用的正确成员函数，有必要在给定变量 object的情况下检索所持有的值的类型。这样做**必然需要定义至少一个（类或函数）模板**。`call_on_variant(v, f, ...)``v``Ai``v`

 **这样做的原因是，无论如何*完成*，都需要**遍历**变体可以包含的所有类型（类型列表公开为`boost::variant<...>::types`，检查变体是否包含该类型的值（通过`boost::get<>`），并且（如果是这样）将该值检索为必须执行成员函数调用的*指针*`boost::apply_visitor<>`（在内部，这也是这样做的）。

对于列表中的每个单一类型，可以通过以下方式完成：

```
using types = boost::variant<A1*, ..., An*>::types;
mpl::at_c<types, I>::type* ppObj = (get<mpl::at_c<types, I>::type>(&var));
if (ppObj != NULL)
{
    (*ppObj)->f(...);
} 
```

哪里`I`是**编译**时常量。不幸的是，C++**不允许**使用允许编译器基于**编译时 for loop**生成一系列此类片段的[`static for`惯用语](https://stackoverflow.com/questions/14261183/how-to-make-generic-computations-over-heterogeneous-argument-packs-of-a-variadic)。相反，必须使用**模板元编程**技术，例如：

 ****```
mpl::for_each<types>(F()); 
```

where`F`是一个带有模板调用运算符的函子。直接或间接地，**至少需要定义一个类或函数模板**，因为缺乏`static for`强制程序员编写必须为每种类型*通用*重复的例程。

**考虑 2：[根据地方需要]**

所需解决方案的限制之一（问题文本中“ *CONSTRAINTS* ”部分的要求 1）是不需要在函数调用所在的范围之外的任何其他范围内添加全局声明或任何其他声明完毕。因此，无论是宏扩展还是模板元编程，需要做的事情都**必须在函数调用发生的地方做**。

这是有问题的，因为上面的“*考虑1* ”已经证明需要定义至少一个模板来执行任务。问题是 C++**不允许在本地范围内定义模板**。类模板和函数模板都是如此，没有办法克服这个限制。根据§14/2：

*“模板声明只能作为命名空间范围或类范围声明出现”*

因此，为了完成这项工作，我们*必须*定义的通用例程**必须在调用站点以外的其他地方定义**，并且必须在调用站点使用适当的参数进行*实例化。*

**考虑 3：[关于函数名称]**

由于`call_on_variant()`宏（或任何等效结构）必须能够处理任何可能的函数`f`，因此必须将*名称*作为`f`参数传递给我们基于模板的类型解析机制。重要的是要强调**只传递函数的名称**，因为需要调用的*特定函数必须由模板机制确定。* `Ai::f`

但是，*名称*不能是模板参数，因为它们不属于类型系统。

**结论：**

综合以上三个考虑，证明这个问题在今天的 C++ 中是无法解决的。它需要使用名称作为模板参数的可能性或定义本地模板的可能性。虽然第一件事至少是不可取的，但第二件事可能是有道理的，但标准化委员会没有考虑到这一点。但是，*可能会承认**一个**例外***。

**未来的机会：**

*为进入下一个 C++ 标准而大力推动的通用 lambdas*实际上是**具有模板调用运算符的本地类**。

因此，即使我在问题文本末尾发布的宏仍然不起作用，另一种方法似乎是可行的（处理返回类型需要进行一些调整）：

```
// Helper template for type resolution
template<typename F, typename V>
struct extractor
{
    extractor(F f, V& v) : _f(f), _v(v) { }

    template<typename T>
    void operator () (T pObj)
    {
        T* ppObj = get<T>(&_v));
        if (ppObj != NULL)
        {
            _f(*ppObj);
            return;
        }
    }

    F _f;
    V& _v;
};

// v is an object of type boost::variant<A1*, ..., An*>;
// f is the name of the function to be invoked;
// The remaining arguments are the call arguments.
#define call_on_variant(v, f, ...) \
    using types = decltype(v)::types; \
    auto lam = [&] (auto pObj) \
    { \
        (*pObj)->f(__VA_ARGS__); \
    }; \
    extractor<decltype(lam), decltype(v)>(); \
    mpl::for_each<types>(ex); 
```

**最后的话：**

这是一个有趣的类型安全调用案例，（遗憾的是）C++ 不支持。[Mat Marcus、Jaakko Jarvi 和 Sean Parent 的这篇论文](http://aszt.inf.elte.hu/~gsd/s/cikkek/abel/Jarvi.pdf)似乎表明，无关类型的动态多态性对于实现编程中重要的（在我看来是基本的和不可避免的）**范式转变至关重要。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T02:44:40.830

我曾经通过模拟 .NET 委托解决了这个问题：

```
template<typename T>
class Delegate
{
    //static_assert(false, "T must be a function type");
};

template<typename ReturnType>
class Delegate<ReturnType()>
{
private:
    class HelperBase
    {
    public:
        HelperBase()
        {
        }

        virtual ~HelperBase()
        {
        }

        virtual ReturnType operator()() const = 0;
        virtual bool operator==(const HelperBase& hb) const = 0;
        virtual HelperBase* Clone() const = 0;
    };

    template<typename Class>
    class Helper : public HelperBase
    {
    private:
        Class* m_pObject;
        ReturnType(Class::*m_pMethod)();

    public:
        Helper(Class* pObject, ReturnType(Class::*pMethod)()) : m_pObject(pObject), m_pMethod(pMethod)
        {
        }

        virtual ~Helper()
        {
        }

        virtual ReturnType operator()() const
        {
            return (m_pObject->*m_pMethod)();
        }

        virtual bool operator==(const HelperBase& hb) const
        {
            const Helper& h = static_cast<const Helper&>(hb);
            return m_pObject == h.m_pObject && m_pMethod == h.m_pMethod;
        }

        virtual HelperBase* Clone() const
        {
            return new Helper(*this);
        }
    };

    HelperBase* m_pHelperBase;

public:
    template<typename Class>
    Delegate(Class* pObject, ReturnType(Class::*pMethod)())
    {
        m_pHelperBase = new Helper<Class>(pObject, pMethod);
    }

    Delegate(const Delegate& d)
    {
        m_pHelperBase = d.m_pHelperBase->Clone();
    }

    Delegate(Delegate&& d)
    {
        m_pHelperBase = d.m_pHelperBase;
        d.m_pHelperBase = nullptr;
    }

    ~Delegate()
    {
        delete m_pHelperBase;
    }

    Delegate& operator=(const Delegate& d)
    {
        if (this != &d)
        {
            delete m_pHelperBase;
            m_pHelperBase = d.m_pHelperBase->Clone();
        }

        return *this;
    }

    Delegate& operator=(Delegate&& d)
    {
        if (this != &d)
        {
            delete m_pHelperBase;
            m_pHelperBase = d.m_pHelperBase;
            d.m_pHelperBase = nullptr;
        }

        return *this;
    }

    ReturnType operator()() const
    {
        (*m_pHelperBase)();
    }

    bool operator==(const Delegate& d) const
    {
        return *m_pHelperBase == *d.m_pHelperBase;
    }

    bool operator!=(const Delegate& d) const
    {
        return !(*this == d);
    }
}; 
```

您可以像 .NET 委托一样使用它：

```
class A
{
public:
    void M() { ... }
};

class B
{
public:
    void M() { ... }
};

A a;
B b;

Delegate<void()> d = Delegate<void()>(&a, &A::M);
d(); // calls A::M

d = Delegate<void()>(&b, &B::M);
d(); // calls B::M 
```

这适用于没有参数的方法。如果可以使用 C++11，则可以对其进行修改以使用可变参数模板来处理任意数量的参数。如果没有 C++11，您需要添加更多的 Delegate 特化来处理特定数量的参数：

```
template<typename ReturnType, typename Arg1>
class Delegate<ReturnType(Arg1)>
{
    ...
};

template<typename ReturnType, typename Arg1, typename Arg2>
class Delegate<ReturnType(Arg1, Arg2)>
{
    ...
}; 
```

使用这个 Delegate 类，您还可以模拟基于委托的 .NET 事件。*********

# iphone - 将pdf文件保存在设备中

> ID：14288052
> 
> 赞同：1
> 
> 时间：2013-01-11T23:01:36.010
> 
> 标签：iphone, ios, pdf, save

我在我的程序中生成了一个 pdf 文件，我在这里：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSString *file = [documentsDirectory stringByAppendingFormat:@"/CEX.pdf"];
    NSData *data = [NSData dataWithContentsOfFile:file]; 
```

我知道如何将照片保存在照片库中，但不知道我应该如何处理 pdf 文件以及如何以及将其保存在设备中的何处。谁能帮帮我？！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:41:25.887

`Documents`您发布的代码用于从目录中读取现有的 PDF 文件。

如果你想写PDF，你需要获取`NSData`代表PDF的对象，创建文件的路径，然后使用`NSData writeToFile:options:error:`方法将数据保存到文件中。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *file = [documentsDirectory stringByAppendingPathComponent:@"MyDocument.pdf"];

NSData *pdfData = ... // data representing your created PDF
NSError *error = nil;
if ([pdfData writeToFile:file options:NSDataWritingAtomic error:&error]) {
    // file saved
} else {
    // error writing file
    NSLog(@"Unable to write PDF to %@. Error: %@", file, error);
} 
```

顺便说一句 - 在您的原始代码中，替换：

```
NSString *file = [documentsDirectory stringByAppendingFormat:@"/CEX.pdf"]; 
```

和：

```
NSString *file = [documentsDirectory stringByAppendingPathComponent:@"CEX.pdf"]; 
```

除非您确实有要处理的字符串格式，否则不要使用字符串格式。

# jquery - 根据图像尺寸添加属性

> ID：14288054
> 
> 赞同：0
> 
> 时间：2013-01-11T23:01:38.963
> 
> 标签：jquery, height, width, addattribute

我正在为使用第三方平台的客户工作，该平台只允许我覆盖 CSS 并部分编辑 HTML 模板。我还可以通过添加 Javascript 来进行更改，在这种情况下，我需要根据缩略图图像的尺寸附加类和 ID，在列表项中表示为图像。我开始了小提琴，用 div 替换图像。

[http://jsfiddle.net/dbudell/SYTsP/4/](http://jsfiddle.net/dbudell/SYTsP/4/)

这是HTML：

```
<ul>
  <li><div class="item item1"></div></li>
  <li><div class="item item2"></div></li>
</ul> 
```

和CSS。如您所见，我已将 .item1 设置为“纵向”尺寸，将 .item2 设置为“横向尺寸”。我想根据这些尺寸附加到 ID：

```
li {
   display:inline-block;
   margin:5px;
}

.item1, .item2 {
  border:1px solid #333;
}

.item1 {
   width:100px;
   height:200px;
}

.item2 {
    width:200px;
    height:100px;
}

#fill-portrait {
  background:#333;
}

#fill-landscape {
  background:#888;
} 
```

这是 JQuery 代码，它在语法上似乎是正确的，但没有产生任何结果。不确定是什么问题。

```
var itemWidth = $('.item').width();
var itemHeight = $('.item').height();

if (itemWidth > itemheight) {
  $('.item', this).addAttr('id','fill-landscape');
} else {
  $('.item', this).addAttr('id','fill-portrait');
} 
```

同样，指向小提琴的链接是[http://jsfiddle.net/dbudell/SYTsP/4/](http://jsfiddle.net/dbudell/SYTsP/4/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:17:44.683

有几件事看起来不正确：

*   您当前代码中的错字`itemheight`应该是`itemHeight`
*   `addAttr("id, "value")`应该`attr("id", "value")`
*   `this`在您的选择器`$("li", this)`中指的是`window`不能在这样的选择器中使用的`$("li", this).length`= 0
*   您只访问`li`您遇到的第一个`li`元素，而不是`ul`

* * *

[**DEMO**](http://jsfiddle.net/c3Dj2/) - 结合以上所有

* * *

我在上面的 DEMO 和以下脚本中使用了您现有的 HTML 和 CSS：

```
var $listItems = $("ul>li");

$listItems.each(function () {
  var $item = $(this);
  var itemWidth = $item.width();
  var itemHeight = $item.height();

  if (itemWidth > itemHeight) {
    $item.attr('id', 'fill-landscape');
  } else {
    $item.attr('id', 'fill-portrait');
  }
}); 
```

* * *

> **关于 id 与 class 的旁注**
> 如果您计划让其中几个元素使用相同的`id`值，您可能希望将它们切换为 classes，即：`.addClass("fill-landscape")`而不是`attr("id", "fill-landscape")`. `id`值必须是唯一的。这将是无效的 HTML 和 jQuery 选择器也只匹配第一个匹配`id`并且不会返回集合。当然，这意味着您还必须将 CSS 更新`#fill-landscape`为`.fill-landscape`.

* * *

[**演示**](http://jsfiddle.net/WYgYX/)- 使用类而不是 id 以防万一

* * *

上面的 DEMO 使用了以下更改的 CSS（#fill-x 现在是 .fill-x）：

```
.fill-portrait {
  background:#333;
}
.fill-landscape {
  background:#888;
} 
```

更改的脚本（使用`.addClass()`代替`.attr()`）：

```
var $listItems = $("ul>li");

$listItems.each(function () {
  var $item = $(this);
  var itemWidth = $item.width();
  var itemHeight = $item.height();

  if (itemWidth > itemHeight) {
    $item.addClass('fill-landscape');
  } else {
    $item.addClass('fill-portrait');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:03:43.030

您需要选择要获取其尺寸的单个元素。否则，您的 $('li') 选择器正在选择页面上的每个“li”元素。例如：

```
$('.item1').height(); 
```

然后你可以添加一个id，如下所示：

```
$('.item1').attr('id', 'blah'); 
```

一个明确的例子[http://jsfiddle.net/SYTsP/7/](http://jsfiddle.net/SYTsP/7/)：

```
var $item1 = $('.item1');
var $item2 = $('.item2');

setId($item1);
setId($item2);

function setId($item){
  var itemWidth = $item.width();
  var itemHeight = $item.height();

  if (itemWidth > itemHeight) {
    $item.parent('li').attr('id','fill-landscape');
  } else {
    $item.parent('li').attr('id','fill-portrait');
  }
} 
```

现在有更多的迭代！！

[http://jsfiddle.net/SYTsP/9/](http://jsfiddle.net/SYTsP/9/)

# php - 一对多然后急切地使用 Laravel Eloquent ORM 加载一个数组

> ID：14288065
> 
> 赞同：10
> 
> 时间：2013-01-11T23:02:31.590
> 
> 标签：php, orm, laravel, eloquent

使用 Laravel 和雄辩的 ORM，我想创建一个数组或对象，其中包含属于特定用户（已登录用户）的所有帖子和相应评论。然后将结果与 Response::eloquent(); 一起使用。返回 JSON。

基本上是伪代码：

```
All Posts by user ::with('comments'). 
```

或者

```
Posts by Auth::user()->id ::with('comments'). 
```

我按照通常的用户表、评论表和帖子表设置了我的数据库。comments 表有一个 post_id，posts 表有一个 user_id。

在没有 Laravel 的情况下这样做的漫长方法是：

```
SELECT * FROM posts WHERE user_id = 'user_id'
foreach($result as $post) {
    SELECT * FROM comments WHERE posts_id =  $post->id
    foreach($query as $comment) {
        $result[$i]->comments[$n] = $comment
    }
} 
```

但我想用 Laravel 的 Eloquent ORM 来完成它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T05:12:52.827

看起来你甚至不需要嵌套的急切加载，你只需要修改返回的查询，所以：

```
$posts = Post::with('comments')->where('user_id', '=', 1)->get(); 
```

您可以将 Eloquent 系统中的大多数方法进行菊花链式连接，通常它们只是返回一个 Fluent 查询对象。

（我还没有测试过它，但我相当肯定它会起作用。另外，你不能在 ::all() 上这样做，因为它会为你调用 ->get() 。你必须挖掘源代码找到这个的代码，我认为 Eloquent 文档没有提到它正在做的事情。）

[Eager Loading Documentation](http://laravel.com/docs/eloquent#eager-loading)还涵盖了嵌套的Eager Loading ，因此您可以加载所有用户及其帖子和评论：

> 您甚至可以急切地加载嵌套关系。例如，假设我们的 Author 模型具有“联系人”关系。我们可以像这样从 Book 模型中急切地加载这两个关系：

```
$books = Book::with(array('author', 'author.contacts'))->get(); 
```

# javascript - 使用 Math.random() 获得通常排除的上限的几率

> ID：14288066
> 
> 赞同：3
> 
> 时间：2013-01-11T23:02:36.953
> 
> 标签：javascript

这可能看起来更像是一个数学问题，但由于它专门链接到 Javascript 的伪随机数生成器，我想它非常适合 SO。如果没有，请随时将其移至其他地方。

首先，我知道 ES 没有指定要在伪随机数生成器中使用的算法 - `Math.random()`-，但它确实指定了范围应该具有近似均匀分布：

> ## [15.8.2.14 随机（ ）](http://www.ecma-international.org/ecma-262/5.1/#sec-15.8.2.14)
> 
> 返回一个带正号的数值，大于或等于 0 但小于 1，随机或伪随机选择，**在该范围内近似均匀分布**，使用与实现相关的算法或策略。此函数不接受任何参数。

到现在为止还挺好。现在我最近偶然发现了来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/random)的这条数据：

> 请注意，由于 JavaScript 中的数字是具有舍入到最近偶数行为的 IEEE 754 浮点数，因此这些范围（不包括其`Math.random()`本身的范围）并不准确，并且取决于边界，在极少数情况下（在**1 in 2^62**的顺序）来计算通常排除的上限。

好的。它使我进行了一些测试，结果（显然）在 Chrome 控制台和 Firefox 的 Firebug 上是相同的：

```
>> 0.99999999999999995
1
>> 0.999999999999999945
1
>> 0.999999999999999944
0.9999999999999999 
```

让我们把它放在一个简单的实际例子中，以使我的问题更清楚：

```
Math.floor(Math.random() * 1) 
```

考虑到上面的代码，具有舍入到最近偶数行为的 IEEE 754 浮点数，在`Math.random()`范围均匀分布的评估下，我得出结论，它返回通常被排除的上限（`1`在我上面的代码中）的几率会是`0.000000000000000055555...`，也就是大约`1/18,000,000,000,000,000`。

现在查看 MDN 编号，`1/2^62`计算结果为`1/4,611,686,018,427,387,904`，即比我的计算结果小 200 多倍。

我做错数学了吗？Firefox 的伪随机数生成器是否分布不够均匀，无法产生这 200 倍的差异？

我知道如何解决这个问题，而且我知道甚至不应该考虑每天使用这么小的几率，但我很想了解这里发生了什么以及我的数学是否被破坏或 Mozilla 的（我希望它是前者）。`=]`任何输入表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:26:59.647

您不必担心将 Math.random() 中的数字四舍五入到 1。

当我查看当前版本的 IE、Chrome 和 FF 中的实现（从我得到的结果推断）时，有几个观察结果几乎可以肯定意味着你应该总是在 0 到 0.111111111111111111111111111111111111111111111111111111 的区间内获得一个二进制数（`0.999999999999999944.toString(2)`顺便说一句，还有一些较小的十进制数字。）。

**Chrome：**这里很简单。它通过生成 32 位数字并将其除以 1 << 32 来生成数字。（您可以看到它`(1 << 30) * 4 * Math.random()`总是返回一个整数）。

**FF：**这里似乎总是生成的数字最多为 0.11...（53x 1），它实际上只使用了这 53 个小数位。（可以看到`Math.random().toString(2).length - 2`返回不超过 53）。

**IE：**这里和FF很像，只是小数点后的第一个数字为0，位数可以多一些，肯定不会四舍五入为1。（可以看到`Math.random().toString(2).match(/1[01]*$/)[0].length`返回不超过 53）。

我认为（尽管我现在无法提供任何证据）任何实现都应该属于所描述的组之一，并且四舍五入到 1 没有问题。

# scala - 如何从演员内部获取绝对远程演员网址？

> ID：14288068
> 
> 赞同：10
> 
> 时间：2013-01-11T23:03:00.127
> 
> 标签：scala, akka

我想做这样的事情。

演员甲：

```
 actorB ! "info"

     def receive()={
     case _ => {
          println("Remote address is "+ _)

        }
} 
```

演员 B：（远程部署）

```
def receive()={
 case "info" => {
      sender tell self.path.address.toString

    }

} 
```

我希望它返回字符串 akka://10.4.20.40:2555/slave/user/slaverunner 。但我得到的只是 akka://slave。如何获取远程主机和端口？. 地址对象上的属性主机、端口和主机端口不返回任何内容

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T02:49:53.883

如果你打电话

```
sender.path.toString 
```

在演员 A 中，您将获得发件人的地址。因此，只要您可以向它发送消息，您就不需要将地址传递给另一个参与者系统。

Akka 不会为您提供本地系统中演员的远程路径，这就是`self.path.address.toString`演员 B 不起作用的原因。

如果您真的想将主机和端口从 B 发送到 A，那么您需要`RemoteActorRefProvider`通过`ExtendedActorSystem`. 官方的方法是通过[Extension](http://doc.akka.io/docs/akka/2.1.0/scala/extending-akka.html)。例如：

```
class MyExtensionImpl(system: ExtendedActorSystem) extends Extension {
  def address = system.provider match {
    case rarp: RemoteActorRefProvider => rarp.transport.address
    case _ => system.provider.rootPath.address
  }
}

object MyExtension extends ExtensionKey[MyExtensionImpl]

val address = MyExtension(system).address 
```

这将为您提供与 B 进行远程通信所需的确切地址。

（注意此代码适用于 Akka 2.0.x。在 2.1.x 中，您可以避免`RemoteActorRefProvider`使用`system.provider.getDefaultAddress`）

在 Akka 中，如果您使用这种方式构建参与者地址以供使用，`actorFor`那么您需要确保主机名完全匹配。

例如，如果 ActorSystem 认为主机是`foo.bar.com`，那么它将忽略远程主机发送给`actorFor("akka://slave@foo:2555/user/slaverunner")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-22T10:25:53.997

**对于最近的 akka 版本（2.1+），请使用：**

```
class RemoteAddressExtensionImpl(system: ExtendedActorSystem) extends Extension {
  def address = system.provider.getDefaultAddress
}

object RemoteAddressExtension extends ExtensionKey[RemoteAddressExtensionImpl]

val remoteAddr = RemoteAddressExtension(context.system).address
val remotePath = self.path.toStringWithAddress(remoteAddr)) 
```

remotePath 是您要查找的内容：

> 我希望它返回字符串 akka://10.4.20.40:2555/slave/user/slaverunner

**对于更新的 akka 版本（2.5.3），请使用：**

```
class RemoteAddressExtensionImpl(system: ExtendedActorSystem) extends Extension {
  def address = system.provider.getDefaultAddress
}

object RemoteAddressExtension extends ExtensionId[RemoteAddressExtensionImpl]
with ExtensionIdProvider {
  override def lookup = RemoteAddressExtension
  override def createExtension(system: ExtendedActorSystem) = new RemoteAddressExtensionImpl(system)
  override def get(system: ActorSystem): RemoteAddressExtensionImpl = super.get(system)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T00:35:50.133

我得到了这个包裹`String`：

```
 ConfigString("akka://serversys@127.0.0.1:2552") 
```

使用`system.settings`：

```
context.system.settings.config.getValue("akka.actor.deployment.\"/root\".remote") 
```

Actor 是一个“根”actor，这是 Viktor Klang 在邮件组讨论“确定 actor 是否死亡”时建议的结构方案。它是这样创建的：

```
lazy val rootActor = actorSystem.actorOf(Props[Root], "root") 
```

从那`ActorSystem`是这样创建的：

```
lazy val actorSystem = ActorSystem("serversys", ConfigFactory.parseString(""" 
akka {
  loglevel = "DEBUG"
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
  }
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
  }
}
serverconf {
  include "common"
  akka {
    actor {
      deployment {
        /root {
          remote = "akka://serversys@127.0.0.1:2552"
        }    
      }
    }
    remote {
      netty {
        hostname = "127.0.0.1"
        port = 2552
      }
    }
  }
}
""").getConfig("serverconf")) 
```

在 Scala 2.9.2 REPL 中使用我仍然使用的 Akka 2.0.3 进行了测试。

`Config`在此处使用文档展开实际值：http: [//typesafehub.github.com/config/v0.3.0/](http://typesafehub.github.com/config/v0.3.0/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T14:54:12.230

请参阅[actorsystem 的公共地址](https://groups.google.com/d/topic/akka-user/BROmkhpfHBY/discussion)。阅读完整的讨论，并注意“通常”您不需要获取主机/端口。

# ajax - 在ajax中清除一个表单，而不清除另一个

> ID：14288070
> 
> 赞同：0
> 
> 时间：2013-01-11T23:03:11.623
> 
> 标签：ajax, forms

有一个聊天室，问题是，当您提交某些内容时，表单框中的消息会保留。我想要的是，当它使用按钮提交时，消息会被清除。所以，我添加了 $('#mbody').val(''); 并将 id mbody 添加到包含消息的表单中。但由于某种原因，它清除了另一种形式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:08:25.577

您不需要更改 FORM 的不存在值（表单输入具有值）。您只需要重置它。

```
var form = document.getElementById('mbody');
form.reset(); 
```

确保每个表单都有一个唯一的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:06:07.417

我会看到你的模糊问题缺少示例代码，并给你一个模糊的答案。ID 必须是唯一的 - 您可能有重复的 ID 或引用了不正确的 ID。

# delphi - 检测图片中的多个形状并计算中间

> ID：14288072
> 
> 赞同：6
> 
> 时间：2013-01-11T23:03:18.240
> 
> 标签：delphi, image-processing, pixel, pixels, shapes

这个问题可以用任何类型的编程语言来回答，因为我想要一些算法方面的帮助，但我更喜欢 Delphi。我的任务是检测和计算随机图片的多个形状（在 1 和 N 之间 - 主要是圆形或椭圆形）并计算它们的中间并将它们作为图片的坐标返回。每个形状的中间可以有一个填充物（但没关系）。这些形状彼此相距至少 1+ 像素。没有一个形状会喜欢与另一个形状或图片的角落融合在一起。图片的背景始终具有相同的背景颜色，这实际上并不重要，因为与背景相比，形状的边框/框架始终是不同的颜色。这使得检测形状变得容易。我正在考虑逐个像素地收集坐标，然后在每个形状周围绘制一个不可见的矩形/正方形来计算中间。然后我也听说过scanline，但我认为在这种情况下它不会更快。所以我的问题是，我该如何计算：

1.  图中有多少个形状。
2.  我如何（或多或少）计算它们的确切中间值。

几张图片来可视化任务：

这是一张随机形状的图片（大部分是封闭的圆圈）正如你所看到的，它们彼此分开就好了。

![图片中的形状](../Images/201a6e344f6b75af8baed24bc12bb233.png)

然后我可以轻松地在每个形状周围绘制/计算一个虚构的矩形/正方形，并像这样计算它的中间： ![图片中的形状，周围有矩形/正方形](../Images/f5eb14f2bf3919ade45c05ff22b168cb.png)

在我有了矩形/正方形之后。我可以很容易地计算出中间。我该如何开始？

PS.：我在 mspaint 中画了一些圆圈。我必须补充一点，所有形状都是封闭的，这使得可以毫无问题地填充图片中的每个形状！

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:11:07.340

计算图像的 MSER（最大稳定极值区域）。我无法在这里解释该算法。有关该算法的更多信息，您可以参考[最大稳定极值区域](http://en.wikipedia.org/wiki/Maximally_stable_extremal_regions)一文。

这也会给你质心。

该算法在 OpenCv 工具和 Matlab 2012b 中作为内置函数实现。

我能想到的另一种方法，可能比以前的方法简单，是应用连通分量算法并计算对象的数量。更多信息可以在 Gonzalez 和 Woods 关于数字图像处理的书中找到。

# c# - 使用 DynamicProxy 拦截对异步方法的调用

> ID：14288075
> 
> 赞同：30
> 
> 时间：2013-01-11T23:03:27.110
> 
> 标签：c#, reflection, aop, async-await, castle-dynamicproxy

下面是实现[Castle Dynamic Proxy](http://www.castleproject.org/projects/dynamicproxy/)库的`Intercept`自定义类型的方法中的代码。此片段来自一个基于[AOP](http://en.wikipedia.org/wiki/Aspect-oriented_programming)的日志记录概念验证控制台应用程序，该应用程序发布[在此处](https://github.com/floydpink/LoggerPoc)。`IInterceptor`

```
 public void Intercept(IInvocation invocation)
    {
        if (Log.IsDebugEnabled) Log.Debug(CreateInvocationLogString("Called", invocation));
        try
        {
            invocation.Proceed();
            if (Log.IsDebugEnabled)
                if (invocation.Method.ReturnType != typeof(void))
                    Log.Debug("Returning with: " + invocation.ReturnValue);
        }
        catch (Exception ex)
        {
            if (Log.IsErrorEnabled) Log.Error(CreateInvocationLogString("ERROR", invocation), ex);
            throw;
        }
    } 
```

这在常规方法调用上按预期工作，但在尝试使用`async`方法时（使用`async/await`C# 5.0 中的关键字）则不行。我相信，我也理解这背后的原因。

为了`async/await`工作，编译器将方法的功能体添加到幕后的状态机中，一旦`awaitable`遇到第一个无法同步完成的表达式，控制就会返回给调用者。

此外，我们可以询问返回类型并确定我们是否正在处理`async`这样的方法：

```
 if (invocation.Method.ReturnType == typeof(Task) || 
                (invocation.Method.ReturnType.IsGenericType && 
                 invocation.Method.ReturnType.GetGenericTypeDefinition() == typeof(Task<>)))
                Log.Info("Asynchronous method found..."); 
```

这仅适用于那些`async`返回`Task`或`Task<>`不返回的方法，`void`但我对此很好。

必须在`Intercept`方法中进行哪些更改`awaiter`才能返回到那里而不是原始调用者？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-11T23:14:29.887

大概“问题”是它只是记录它正在返回一个任务 - 你想要那个任务中的*值*吗？

假设是这种情况，您仍然必须立即将任务返回给调用者 - 无需等待它完成。如果你打破了它，你从根本上把事情搞砸了。

但是，在将任务返回给调用者之前，您应该添加一个延续（通过[`Task.ContinueWith`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.continuewith.aspx)），它将*在任务完成时*记录结果（或失败） 。这仍然会提供结果信息，但当然您可能会在其他一些日志记录之后记录它。您可能*还想*在返回之前立即登录，从而导致类似这样的日志：

```
Called FooAsync
Returned from FooAsync with a task
Task from FooAsync completed, with return value 5 
```

从任务中获取结果（如果它成功完成）的业务必须通过反射来完成，这有点痛苦 - 或者您可以使用动态类型。（无论哪种方式，它都会对性能产生一点影响。）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-12T00:22:36.887

感谢乔恩的回答，这就是我最终得到的结果：

```
public void Intercept(IInvocation invocation)
{
    if (Log.IsDebugEnabled) Log.Debug(CreateInvocationLogString("Called", invocation));
    try
    {
        invocation.Proceed();

        if (Log.IsDebugEnabled)
        {
            var returnType = invocation.Method.ReturnType;
            if (returnType != typeof(void))
            {
                var returnValue = invocation.ReturnValue;
                if (returnType == typeof(Task))
                {
                    Log.Debug("Returning with a task.");
                }
                else if (returnType.IsGenericType && returnType.GetGenericTypeDefinition() == typeof(Task<>))
                {
                    Log.Debug("Returning with a generic task.");
                    var task = (Task)returnValue;
                    task.ContinueWith((antecedent) =>
                                          {
                                              var taskDescriptor = CreateInvocationLogString("Task from", invocation);
                                              var result =
                                                  antecedent.GetType()
                                                            .GetProperty("Result")
                                                            .GetValue(antecedent, null);
                                              Log.Debug(taskDescriptor + " returning with: " + result);
                                          });
                }
                else
                {
                    Log.Debug("Returning with: " + returnValue);
                }
            }
        }
    }
    catch (Exception ex)
    {
        if (Log.IsErrorEnabled) Log.Error(CreateInvocationLogString("ERROR", invocation), ex);
        throw;
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-09-30T06:25:49.860

试图用一个通用和干净的解决方案来澄清：

*   拦截`async`方法添加自定义代码作为延续任务。

我认为最好的解决方案是使用关键字绕过编译器类型检查并在运行时`dynamic`解决Task和Task之间的区别：`<T>`

```
public void Intercept(IInvocation invocation)
{
    invocation.Proceed();
    var method = invocation.MethodInvocationTarget;
    var isAsync = method.GetCustomAttribute(typeof(AsyncStateMachineAttribute)) != null;
    if (isAsync && typeof(Task).IsAssignableFrom(method.ReturnType))
    {
        invocation.ReturnValue = InterceptAsync((dynamic)invocation.ReturnValue);
    }
}

private static async Task InterceptAsync(Task task)
{
    await task.ConfigureAwait(false);
    // do the logging here, as continuation work for Task...
}

private static async Task<T> InterceptAsync<T>(Task<T> task)
{
    T result = await task.ConfigureAwait(false);
    // do the logging here, as continuation work for Task<T>...
    return result;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-08T15:41:32.400

我的 2 美分：

已经正确地确定，对于`async`方法，拦截器的目的是通过延续来**“增强”调用返回的任务。**

现在，**正是这个任务延续必须返回**以完成拦截器的工作。

因此，基于上述讨论和示例，这对于常规方法和“原始”`async Task`方法都非常有效。

```
public virtual void Intercept(IInvocation invocation)
{
    try
    {
        invocation.Proceed();
        var task = invocation.ReturnValue as Task;
        if (task != null)
        {
            invocation.ReturnValue = task.ContinueWith(t => {
                if (t.IsFaulted)
                    OnException(invocation, t.Exception);
            });
        }
    }
    catch (Exception ex)
    {
        OnException(invocation, ex);
    }
}

public virtual void OnException(IInvocation invocation, Exception exception)
{
    ...
} 
```

1.  但是在处理`async Task<T>`方法的时候，上面会错误的把拦截返回的任务的类型，从`Task<T>`改为常规`Task`

2.  请注意，我们正在调用`Task.ContinueWith()`而不是`Task<TResult>.ContinueWith()`，这是我们想要调用的方法。

这将是最终等待此类拦截时产生的异常：

> System.InvalidCastException：无法将“System.Threading.Tasks.ContinuationTaskFromTask”类型的对象转换为“System.Threading.Tasks.Task”类型

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-12-16T22:35:06.697

下面是我正确处理异步方法的异步拦截器适配器实现。

```
abstract class AsyncInterceptor : IInterceptor
{
    class TaskCompletionSourceMethodMarkerAttribute : Attribute
    {

    }

    private static readonly MethodInfo _taskCompletionSourceMethod = typeof(AsyncInterceptor)
        .GetMethods(BindingFlags.NonPublic | BindingFlags.Instance)
        .Single(x => x.GetCustomAttributes(typeof(TaskCompletionSourceMethodMarkerAttribute)).Any());

    protected virtual Task<Object> InterceptAsync(Object target, MethodBase method, object[] arguments, Func<Task<Object>> proceed)
    {
        return proceed();
    }

    protected virtual void Intercept(Object target, MethodBase method, object[] arguments, Action proceed)
    {
        proceed();
    }

    [TaskCompletionSourceMethodMarker]
    Task<TResult> TaskCompletionSource<TResult>(IInvocation invocation)
    {
        var tcs = new TaskCompletionSource<TResult>();

        var task = InterceptAsync(invocation.InvocationTarget, invocation.Method, invocation.Arguments, () =>
        {
            var task2 = (Task)invocation.Method.Invoke(invocation.InvocationTarget, invocation.Arguments);
            var tcs2 = new TaskCompletionSource<Object>();
            task2.ContinueWith(x =>
            {
                if (x.IsFaulted)
                {
                    tcs2.SetException(x.Exception);
                    return;
                }
                dynamic dynamicTask = task2;
                Object result = dynamicTask.Result;
                tcs2.SetResult(result);
            });
            return tcs2.Task;
        });

        task.ContinueWith(x =>
        {
            if (x.IsFaulted)
            {
                tcs.SetException(x.Exception);
                return;
            }

            tcs.SetResult((TResult)x.Result);
        });

        return tcs.Task;
    }
    void IInterceptor.Intercept(IInvocation invocation)
    {
        if (!typeof(Task).IsAssignableFrom(invocation.Method.ReturnType))
        {
            Intercept(invocation.InvocationTarget, invocation.Method, invocation.Arguments, invocation.Proceed);
            return;
        }
        var returnType = invocation.Method.ReturnType.IsGenericType ? invocation.Method.ReturnType.GetGenericArguments()[0] : typeof(object);
        var method = _taskCompletionSourceMethod.MakeGenericMethod(returnType);
        invocation.ReturnValue = method.Invoke(this, new object[] { invocation });
    }
} 
```

和示例用法：

```
class TestInterceptor : AsyncInterceptor
{
    protected override async Task<Object> InterceptAsync(object target, MethodBase method, object[] arguments, Func<Task<object>> proceed)
    {
        await Task.Delay(5000);
        var result = await proceed();
        return DateTime.Now.Ticks % 2 == 0 ? 10000 :result;
    }
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-27T11:02:36.593

由于需要拦截返回的方法`Task<TResult>`，我创建了一个扩展来`Castle.Core`简化流程。

[Castle.Core.AsyncInterceptor](https://github.com/JSkimming/Castle.Core.AsyncInterceptor)

该软件包可在[NuGet](https://www.nuget.org/packages/Castle.Core.AsyncInterceptor)上下载。

该解决方案主要基于[@silas-reinagel的这个](https://stackoverflow.com/users/4009517/silas-reinagel)[答案](https://stackoverflow.com/a/28374134)，但通过提供一个新接口来实现[IAsyncInterceptor](https://github.com/JSkimming/Castle.Core.AsyncInterceptor#option-1--implement-iasyncinterceptor-interface-to-intercept-invocations)来简化它。还有进一步的抽象使拦截类似于实现。`Interceptor`

有关详细信息，请参阅项目的[自述文件](https://github.com/JSkimming/Castle.Core.AsyncInterceptor#castlecoreasyncinterceptor)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-04-19T20:46:38.387

> ```
>  void IInterceptor.Intercept(IInvocation invocation) {
>        try {
>            invocation.Proceed();
>            var task = invocation.ReturnValue as Task;
>            if (task != null && task.IsFaulted) throw task.Exception;
>        }
>        catch {
>            throw;
>        }
>    } 
> ```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-06-24T01:27:59.447

代替：

```
tcs2.SetException(x.Exception); 
```

你应该使用：

```
x.Exception.Handle(ex => { tcs2.SetException(ex); return true; }); 
```

冒泡真正的例外......

# javascript - 将值从一个文件传递到另一个 javascript

> ID：14288078
> 
> 赞同：0
> 
> 时间：2013-01-11T23:03:34.787
> 
> 标签：javascript

我有一个名为 functions.js 的文件，其中有计算学生考试分数的函数总和。我希望将该总和打印到文件 admin.php 中的表格中，以便管理员查看每个学生的所有分数。

那么如何将 sum 变量传递给另一个文件呢？我尝试使用 onlick 操作调用该函数，但这不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:05:12.777

Javascript 在客户端运行，PHP 在服务器端运行。因此，您必须在 javascript 中编写一些代码来更改 PHP 脚本返回的 HTML 页面，并显示结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:14:00.463

一旦您的所有文件都加载到客户端上，就没有单独的 js 文件的概念了。客户端（浏览器 + javascript）和服务器（php）是 2 个独立的实体。当您的数据在一个地方时，另一个地方不知道它的存在。要么研究 ajax 作为在 2 个位置之间进行通信的方法，要么使用表单并将页面提交到服务器。

很好地概述了服务器和浏览器的通信方式：[浏览器和 Web 服务器之间的通信是如何发生的？](https://stackoverflow.com/questions/1764597/how-does-the-communication-between-a-browser-and-a-web-server-take-place)

表单提交的基础知识：http: [//www.htmlgoodies.com/tutorials/forms/article.php/3479121/So-You-Want-A-Form-Huh.htm](http://www.htmlgoodies.com/tutorials/forms/article.php/3479121/So-You-Want-A-Form-Huh.htm)

Ajax 基础：[http](http://webdesign.about.com/od/ajax/a/aa101705.htm) ://webdesign.about.com/od/ajax/a/aa101705.htm Ajax 与 PHP：[http ://www.switchonthecode.com/tutorials/simple-ajax-php-and-javascript](http://www.switchonthecode.com/tutorials/simple-ajax-php-and-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:33:14.667

我猜你可能想要这样的东西

```
document.getElementById('saveScoreButton').onclick = {
  var r = new XMLHttpRequest,
    message = document.getElementById('message'),
    score = sum();
  message.innerHTML = 'Saving your score; please wait a second';
  r.open('get', 'savescore.php?score=' + score, true);
  r.send(null);
  r.onreadystatechange = function () {
    if (r.readyState == 4 && r.status == 200) {
      message.innerHTML = 'Saved your score';
    }
  }
} 
```

`savescore.php`当您单击带有 id 的按钮时，这会将分数传递给 PHP 程序`saveScoreButton`。然后 PHP 程序必须使用`$_GET["score"]`.

请注意，如果用户了解 javascript 并查看发生了什么，这将很容易被用户欺骗。他们可以在浏览器的地址栏中输入“savescore.php?score=100”。如果您想要一个安全的解决方案，javascript 应该只将用户的答案传递给 PHP 程序，然后 PHP 程序会标记测试并汇总结果。

也可以使用 POST 方法而不是 GET 来传递值：

```
 ...
  r.open('post', 'savescore.php?score=' + score, true);
  r.send('score=' + score);
  ... 
```

然后在 PHP 程序中使用`$_POST["score"]`.

如评论中所述，如果您想比较/制表分数，则`savescore.php`需要将值存储在数据库或文件中，以便可以通过`admin.php`.

# hibernate - 什么 Postgres 类型将映射到休眠中 Float 类型的列？

> ID：14288083
> 
> 赞同：3
> 
> 时间：2013-01-11T23:03:52.667
> 
> 标签：hibernate, postgresql, jpa

什么 postgres 列类型将映射到基于休眠的列中的 Java Float 类型？

我的旧 postgres 数据库中有 float(19)，但如果启用了休眠模式验证，我会收到此错误消息。

```
Wrong column type in realtorprint.templatetype for column height.
Found: float8, expected: float4 
```

有任何想法吗？我的专栏是 float(8) 而不是 float(19) 我可能可以在我们的旧数据库中进行更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T23:22:31.977

hibernate 如何将 Java 类型映射到 SQL 类型由与 RDBMS 对应的[Dialect子类控制。](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/dialect/Dialect.html)您使用哪一个可能取决于您的 Hibernate 和 Postgres 版本。

但我怀疑在大多数情况下，Java float 映射到 float(4)，Java double 映射到 float(8)。

这是开源的，您可以获得代码并检查以确定您的情况发生了什么。

您也可以通过配置替换您自己的方言，尽管它很少适合。（它偶尔适用于错误修复。）

# iphone - 计算器程序中的断言失败

> ID：14288085
> 
> 赞同：0
> 
> 时间：2013-01-11T23:04:25.080
> 
> 标签：iphone, ios, objective-c, macos, cocoa

所以我正在开发一个简单的计算器程序来习惯可可和目标 C。我已经多次重做整个事情，每次我完成编码时，我第一次构建它，它工作正常，但每次之后窗口不会启动，它给了我这些错误：

```
2013-01-11 10:32:14.760 Visual Caluclator Fix[39892:403] *** Assertion failure in -[NSTextFieldCell _objectValue:forString:errorDescription:], /SourceCache/AppKit/AppKit-1138.47/AppKit.subproj/NSCell.m:1564
2013-01-11 10:32:14.762 Visual Caluclator Fix[39892:403] Ignoring exception raised in __-[NSPersistentUIManager restoreAllPersistentStateWithTalagentWindows:registeringAsReadyWhenDone:completionHandler:]_block_invoke_3: Invalid parameter not satisfying: aString != nil 
```

我得出的结论是问题出在我的 textEdited 方法上，因为当我将其中的代码注释掉时，程序运行没有问题；但是，我不知道为什么会这样，或者为什么它会第一次运行而不是任何后续时间。当我放入异常断点时，它会将我指向 updateUI 方法中的一行以及 textEdited 方法中对 [self updateUI] 的调用。下面的代码是 textEdited 方法和它引用的其他方法。（我很确定 solve 方法没有任何问题，因为我在命令提示符计算器中使用它并且效果很好。另外，我知道这是一个非常复杂的用字符串和所有东西编写计算器的方法，但我只是试图将我已经拥有的命令提示程序代码集成到可可程序中。）

在 AppDelegate 类中：

```
- (void)updateUI{
    [self.calculationView setStringValue: self.calculation.calcString];//Exception breakpoint points here
}

- (IBAction)textEdited:(id)sender {
    self.calculation.calcString = self.calculationView.stringValue;
    [self.calculation solve];
    [self updateUI];//Exception breakpoint points here
} 
```

在计算类中：

```
- (NSString*)solve{
    for (int i = 0; i < [self.calcString length]; i++) {
        NSRange nextChar = NSMakeRange(i, 1);
        if ([[self.calcString substringWithRange: nextChar] isEqualToString: @"*"]||
            [[self.calcString substringWithRange: nextChar] isEqualToString: @"/"])
            [self calcTerm: i];
    }
    for (int i = 0; i < [self.calcString length]; i++) {
        NSRange nextChar = NSMakeRange(i, 1);
        if ([[self.calcString substringWithRange: nextChar] isEqualToString: @"+"]||
            [[self.calcString substringWithRange: nextChar] isEqualToString: @"-"])
            [self calcTerm: i];
    }
    return self.calcString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:58:06.563

这可能有助于解决您的问题：

[http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2](http://www.raywenderlich.com/10505/my-app-crashed-now-what-part-2)

该站点解释了断言错误是如何工作的，并演示了如何修复这样的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T17:36:52.737

在我看来，其中的某些东西`calcTerm:`正在设置`calcString`为`nil`. 因此，当您稍后检索它以将字段的字符串值设置为它时，您最终将字段的字符串值设置为`nil`，这是它不喜欢的。

`calcString`您可以通过在结束之前记录 的值来检查这一点`solve`。然后，开始将日志语句和/或断点串起来，`calcTerm:`以了解如何将字符串换成`nil`.

# c# - 关于执行分解功能的非常简单的解决方案的逻辑问题

> ID：14288090
> 
> 赞同：0
> 
> 时间：2013-01-11T23:05:08.003
> 
> 标签：c#, logic

这个解决方案分解了一个数字（numInput），它工作得很好，除了一个逻辑错误，无论我多少跟踪解决方案，我似乎都找不到。无论为 numInput 初始化的值如何，逻辑错误都会导致返回结果为 0。

```
using System;

namespace factorizer
{
     class Program
{

    static void Main(string[] args)
    {

        Console.WriteLine(factorialise());
        Console.ReadKey();
    }

    private static int factorialise()
    {
        int numInput = int.Parse(Console.ReadLine());

        int[] number = new int[numInput];

        for (int i = 1; i < numInput; i++) //stores the (n-1)...(n-i) value for the number input'd in the array number[i]
        {
            number[i - 1] = numInput - i; //the element indicating the index number is 'i - 1' index values start from zero
        }

        for (int index = 0; index < number.Length; index++) //multiplies the element corresponding the index number with the number input'd
        {
            numInput = numInput * number[index];
        }

        return numInput;

    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:10:44.583

您在数组中的最后一项保持未初始化（即等于零）。更改项目计数：

```
int[] number = new int[numInput-1]; 
```

* * *

另外为什么不简单地使用 for 循环？

```
int result = 1;

for(int i = 1; i <= numInput; i++)
    result *= i; 
```

另一个样本只是为了好玩

```
Enumerable.Range(1, numInput).Aggregate(1, (a,i) => a * i) 
```

# php - PDO::FETCH_ASSOC 不工作？

> ID：14288091
> 
> 赞同：0
> 
> 时间：2013-01-11T23:05:10.380
> 
> 标签：php, mysql

我有这个代码，基本上我需要从最近插入的行中获取新 ID...我有这个代码，但它对我不起作用...

```
$sql = "INSERT INTO `cd_photo` (id, album, date) VALUES (NULL, '" .mysql_real_escape_string($_POST['album']) . "', '" . $date . "')";

if (@mysql_query($sql)) {
$result = $sql->fetch(PDO::FETCH_ASSOC);
$pageid = $result['id'];
echo $pageid;
echo header('Location: newimg.php?id=' .$pageid);
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:21:27.060

您正在混合两种不同的 PHP-MySQL API。我建议你使用 PDO，因为 mysql_ 已被淘汰。这是您在[PDO](http://php.net/manual/en/class.pdo.php)中的操作方式：

```
$dsn = 'mysql:dbname=dbname;host=dbhost';
$user = 'dbusername';
$pass = 'dbpass';
$pdo = new PDO($dsn, $user, $pass);

$sql = "INSERT INTO `cd_photo` (album, date) VALUES (:album,:date)"
$stmt = $pdo->prepare($sql);
$stmt->bindParam(':album', $album);
$stmt->bindParam(':date', $date);
$stmt->execute();
$pageid = $pdo->lastInsertId(); 
```

# ruby-on-rails - 错误：错误运行“GEM_PATH=”qhen 运行“sudo rvm install 1.9.3-p194”

> ID：14288097
> 
> 赞同：0
> 
> 时间：2013-01-11T23:05:35.360
> 
> 标签：ruby-on-rails, ruby, installation, rvm

> **可能重复：**
> [使用 RVM 安装了 Ruby 1.9.3，但命令行不显示 ruby​​ -v](https://stackoverflow.com/questions/9056008/installed-ruby-1-9-3-with-rvm-but-command-line-doesnt-show-ruby-v)

我尝试运行此命令-> sudo rvm install 1.9.3-p194

但出现此错误并且安装不成功

```
Installing Ruby from source to: /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194, this may take a while depending on your cpu(s)...

ruby-1.9.3-p194 - #fetching 
ruby-1.9.3-p194 - #downloading ruby-1.9.3-p194, this may take a while depending on your connection...
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 9610k  100 9610k    0     0   181k      0  0:00:53  0:00:53 --:--:--  235k
ruby-1.9.3-p194 - #extracting ruby-1.9.3-p194 to /usr/share/ruby-rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #extracted to /usr/share/ruby-rvm/src/ruby-1.9.3-p194
ruby-1.9.3-p194 - #configuring 
ruby-1.9.3-p194 - #compiling 
ruby-1.9.3-p194 - #installing 
Removing old Rubygems files...
-e:1: Use RbConfig instead of obsolete and deprecated Config.
Installing rubygems dedicated to ruby-1.9.3-p194...
Retrieving rubygems-latest-1.8
Extracting rubygems-latest-1.8 ...

ERROR: Error running 'gunzip < /usr/share/ruby-rvm/archives/rubygems-latest-1.8.tgz | tar xf - -C /usr/share/ruby-rvm/src', please read /usr/share/ruby-rvm/log/ruby-1.9.3-p194/rubygems.extract.log
Installing rubygems for /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/bin/ruby

ERROR: Error running 'GEM_PATH="/usr/share/ruby-rvm/gems/ruby-1.9.3-p194:/usr/share/ruby-rvm/gems/ruby-1.9.3-p194@global:/usr/share/ruby-rvm/gems/ruby-1.9.3-p194:/usr/share/ruby-rvm/gems/ruby-1.9.3-p194@global" GEM_HOME="/usr/share/ruby-rvm/gems/ruby-1.9.3-p194" "/usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/bin/ruby" "/usr/share/ruby-rvm/src/rubygems-latest-1.8/setup.rb"', please read /usr/share/ruby-rvm/log/ruby-1.9.3-p194/rubygems.install.log`

WARN: Installation of rubygems did not complete successfully.
ruby-1.9.3-p194 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p194 - #importing default gemsets (/usr/share/ruby-rvm/gemsets/)
Install of ruby-1.9.3-p194 - #complete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:13:19.817

您正在使用与 Ubuntu 一起打包的非常旧版本的 RVM，请确保遵循此答案中的说明[https://stackoverflow.com/a/9056395/497756](https://stackoverflow.com/a/9056395/497756) - `gunzip`RVM 中不再使用此问题，因此应该解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:30:56.923

首先你为什么在rvm之前使用sudo命令？此链接将在 rvm.io/rubies/rubygems 中为您提供帮助。我不认为你必须使用 sudo。
您还可以[在使用 rvm 安装 ruby​​ 1.9.3 时查看此问题错误](https://stackoverflow.com/questions/11642632/error-while-installing-ruby-1-9-3-using-rvm)
此外，“rvm install ruby​​”将为您安装最新的稳定版 ruby​​。

# python - Python - Pygame - 处理动画的角度和速度

> ID：14288107
> 
> 赞同：1
> 
> 时间：2013-01-11T23:06:05.170
> 
> 标签：python, animation, 2d, pygame

我正在学习 Pygame，并且像大多数人一样（我认为）正在编写一个小游戏来掌握它。话虽如此，请随时回答我的问题，并批评其他任何事情，如果它很糟糕。

所以，问题在于我的“老板”对象。它应该从上方进入游戏，然后开始在 360 度圆圈内随机射击。它有时会起作用，但我注意到发生了一些我没想到的事情。1）子弹应该以恒定的速度移动，但它们似乎会随着时间的推移而减慢，并且沿 Y 平面的移动速度比 X 更快。 2）尽管至少有 8 发子弹，但我经常只看到 3-4 发（相当当然有些是重叠的，因为我经常看到一个看起来更大的镜头），有些会向下和向右射击，而一个会朝相反的方向射击。它不应该那样做。所以，这里是代码。我将发布射击计算，然后是子弹（火球）实例。从我所看到的来看，其余的都很典型。

```
def shoot (self, shots, time_passed):

    angle = (math.pi*2)/shots
    for i in xrange(shots):
        bullet = Fireball("fireball.png", self.direction, 100)
        bullet.angle = angle
        bullet.pos = ((math.sin(bullet.angle) * bullet.speed) * time_passed,
                      (math.cos(bullet.angle) * bullet.speed) * time_passed)
        Fireball.container.remove(bullet)
        EnemyFireball.container.add(bullet)
        bullet.rect.center = self.rect.center
        angle += angle 
```

这是子弹：

```
class Fireball (pygame.sprite.Sprite):

    container = pygame.sprite.Group()

    def __init__ (self, image, direction, speed):
        pygame.sprite.Sprite.__init__ (self, self.container)

        self.image = pygame.image.load(image).convert_alpha()
        self.rect = self.image.get_rect()
        self.radias = ((self.rect.width/2 + self.rect.height/2)/2)
        self.speed = speed
        self.direction = direction
        self.angle = -1

    def update (self, time_passed):

        if self.angle != -1:
            self.rect.move_ip(self.pos)
        else:
            self.rect.move_ip(0, (self.speed*time_passed) * self.direction)
        if self.rect.bottom < 0: self.kill()
        if self.rect.top > 2000: self.kill() 
```

如果我可以画一张图... 0 <-- 老板，以及子弹线。

我的期望：

```
\|/  
-0-  
/|\ 
```

我所看到的：

```
\  
 0-  
 |\ 
```

...而且子弹直接向下看起来总是更大，所以我认为有一些重叠，但我不明白为什么。Time_passed 只是 Clock.tick(60) 之间计算的时间，shots 参数是 8-16 之间的随机数。

我希望一切都说得通。如果没有，请告诉我。我会尽力澄清。在此先感谢您的帮助。

如果需要更多上下文，这里是源的链接。别担心，没有多少。[http://code.google.com/p/scroller-practice/source/browse/](http://code.google.com/p/scroller-practice/source/browse/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:15:17.137

你需要在两个变量中保持角度。

正确的做法是

```
curr_angle = 0
angle_step = (math.pi*2)/shots 
```

然后在每个循环结束时

```
curr_angle += angle_step 
```

按照您的操作方式，您最终会得到角度角度，然后是 2*角度，然后是 4*角度，依此类推。

如果你拿走所有其他部分，只剩下一个循环

```
angle = (math.pi*2)/shots
for i in xrange(shots):
    angle += angle 
```

应该清楚的是，您每次都在加倍角度而不是增加它。

# android - Android：在本机电子邮件中打开自定义文件附件的问题

> ID：14288113
> 
> 赞同：1
> 
> 时间：2013-01-11T23:07:05.217
> 
> 标签：android, android-intent, email-attachments

我有一个扩展名为 .abc 的文件，我试图在我的个人应用程序中读取这个文件。我的清单 xml 中有以下意图过滤器。

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />        
  <data android:scheme="file" />
  <data android:scheme="content" />
  <data android:mimeType="*" />
  <data android:pathPattern=".*\\.abc" />
  <data android:host="*" />
</intent-filter> 
```

此过滤器捕获从文件浏览器、第 3 方电子邮件客户端等发送的所有意图，但本机电子邮件客户端除外。文件浏览器应用程序和本机电子邮件客户端之间的唯一区别是，文件浏览器的方案是“文件”，而本机电子邮件客户端的方案是“内容”。当我在本机电子邮件客户端的附件中单击扩展名为 .abc 的文件时，它甚至不会下载该文件，也不会触发任何意图。关于问题可能出在哪里的任何建议？

如果我遗漏任何信息，我很乐意补充问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:55:19.513

这是解决问题的方法。具有自定义扩展名的文件的 mime 类型是 application/。将以下过滤器添加到清单文件解决了该问题。

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />        
  <data android:scheme="file" />
  <data android:mimeType="application/abc" />
  <data android:host="*" />
</intent-filter> 
```

# google-app-engine - YouTube Direct - 入门 - 运行 eclipse 后失败

> ID：14288114
> 
> 赞同：0
> 
> 时间：2013-01-11T23:07:21.133
> 
> 标签：google-app-engine, eclipse-plugin, youtube-api

我疯了。我想直接使用 google youtube，并且我完全按照 code.google.com/p/youtube-direct/wiki/GettingStarted 的说明进行操作

但最后，当我尝试在 eclipse 中运行（调试）YTD 以在本地测试它时，我得到以下故障代码而不是消息，服务器在

`(localhost:8080/)`

我已经安装了 - jdk 1.6.0.38 和 jdk 1.7.0.10 也是最新的 google eclipse 插件我已经修改了 appengine-web.xlm 文件，如我的 ID 和开发人员密钥所述

我现在完全迷失了。愿你能帮忙。谢谢

`11.01.2013 22:41:39 com.google.apphosting.utils.jetty.JettyLogger info INFO: Logging to JettyLogger(null) via com.google.apphosting.utils.jetty.JettyLogger 11.01.2013 22:41:39 com.google.apphosting.utils.config.AppEngineWebXmlReader readAppEngineWebXml INFO: Successfully processed C:\Users\martin\workspace1\ytd\war\WEB-INF/appengine-web.xml 11.01.2013 22:41:39 com.google.apphosting.utils.config.AbstractConfigXmlReader readConfigXml INFO: Successfully processed C:\Users\martin\workspace1\ytd\war\WEB-INF/web.xml 11.01.2013 22:41:39 com.google.appengine.tools.development.SystemPropertiesManager setSystemProperties INFO: Overwriting system property key 'java.util.logging.config.file', value 'D:\eclipse\plugins\com.google.appengine.eclipse.sdkbundle_1.7.4\appengine-java-sdk-1.7.4\config\sdk\logging.properties' with value 'WEB-INF/logging.properties' from 'C:\Users\martin\workspace1\ytd\war\WEB-INF\appengine-web.xml' 11.01.2013 22:41:39 com.google.apphosting.utils.jetty.JettyLogger info INFO: jetty-6.1.x 11.01.2013 22:41:40 com.google.apphosting.utils.jetty.JettyLogger warn WARNUNG: failed com.google.appengine.tools.development.DevAppEngineWebAppContext@4a1c2f8c{/,C:\Users\martin\workspace1\ytd\war}: java.lang.UnsupportedClassVersionError: com/google/ytd/guice/GuiceServletConfig : Unsupported major.minor version 51.0 11.01.2013 22:41:40 com.google.apphosting.utils.jetty.JettyLogger warn WARNUNG: failed JettyContainerService$ApiProxyHandler@75b657: java.lang.UnsupportedClassVersionError: com/google/ytd/guice/GuiceServletConfig : Unsupported major.minor version 51.0 11.01.2013 22:41:40 com.google.apphosting.utils.jetty.JettyLogger warn WARNUNG: Error starting handlers java.lang.UnsupportedClassVersionError: com/google/ytd/guice/GuiceServletConfig : Unsupported major.minor version 51.0 at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631) at java.lang.ClassLoader.defineClass(ClassLoader.java:615) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141) at java.net.URLClassLoader.defineClass(URLClassLoader.java:283) at java.net.URLClassLoader.access$000(URLClassLoader.java:58) at java.net.URLClassLoader$1.run(URLClassLoader.java:197) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:190) at java.lang.ClassLoader.loadClass(ClassLoader.java:306) at com.google.appengine.tools.development.IsolatedAppClassLoader.loadClass(IsolatedAppClassLoader.java:213) at java.lang.ClassLoader.loadClass(ClassLoader.java:247) at org.mortbay.jetty.handler.ContextHandler.loadClass(ContextHandler.java:1101) at org.mortbay.jetty.webapp.WebXmlConfiguration.initListener(WebXmlConfiguration.java:630) at org.mortbay.jetty.webapp.WebXmlConfiguration.initWebXmlElement(WebXmlConfiguration.java:368) at org.mortbay.jetty.webapp.WebXmlConfiguration.initialize(WebXmlConfiguration.java:289) at org.mortbay.jetty.webapp.WebXmlConfiguration.configure(WebXmlConfiguration.java:222) at org.mortbay.jetty.webapp.WebXmlConfiguration.configureWebApp(WebXmlConfiguration.java:180) at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1247) at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) at org.mortbay.jetty.Server.doStart(Server.java:224) at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) at com.google.appengine.tools.development.JettyContainerService.startContainer(JettyContainerService.java:205) at com.google.appengine.tools.development.AbstractContainerService.startup(AbstractContainerService.java:232) at com.google.appengine.tools.development.DevAppServerImpl.start(DevAppServerImpl.java:157) at com.google.appengine.tools.development.DevAppServerMain$StartAction.apply(DevAppServerMain.java:333) at com.google.appengine.tools.util.Parser$ParseResult.applyArgs(Parser.java:48) at com.google.appengine.tools.development.DevAppServerMain.<init>(DevAppServerMain.java:269) at com.google.appengine.tools.development.DevAppServerMain.main(DevAppServerMain.java:245) 11.01.2013 22:41:40 com.google.apphosting.utils.jetty.JettyLogger info INFO: Started SelectChannelConnector@127.0.0.1:8888 11.01.2013 22:41:40 com.google.appengine.tools.development.DevAppServerImpl start INFO: The server is running at http://localhost:8888/ 11.01.2013 22:41:40 com.google.appengine.tools.development.DevAppServerImpl start INFO: The admin console is running at http://localhost:8888/_ah/admin`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:52:33.007

您是否检查过它正在运行的服务器的端口，您的 Eclipse 控制台消息说它正在**http://localhost:8888/**上运行，并且您正在尝试在**http://localhost:8080/上运行它**

**您可以在http://localhost:8888/admin**下看到 YTD管理员

# ios - 使用 OpenGL ES 2.0 for iOS 的线性代数库

> ID：14288115
> 
> 赞同：10
> 
> 时间：2013-01-11T23:07:30.237
> 
> 标签：ios, opengl-es, opengl-es-2.0, gpgpu, metal-performance-shaders

有谁知道 iOS 的线性代数库在幕后使用 OpenGL ES 2.0？

具体来说，我正在寻找一种在 iOS 设备上使用 GPU 对任意大小的矩阵（例如，比 4x4 大得多，更像是 5,000 x 100,000）进行矩阵乘法的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T04:04:24.923

您是否有特定原因要求“在幕后使用 OpenGL ES 2.0”？或者你只是想要一个快速的、硬件优化的线性代数库，比如[BLAS](https://developer.apple.com/library/ios/#documentation/Accelerate/Reference/BLAS_Ref/Reference/reference.html)，它内置在 iOS 中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-15T22:06:03.977

MetalPerformanceShaders.framework 提供了一些经过调整的类似 BLAS 的功能。它不是 GLES。它是金属的，在 GPU 上运行。请参阅 MetalPerformanceShaders/MPSMatrixMultiplication.h

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-02-19T11:43:56.853

iOS 上的 OpenGL 可能是错误的方法。如果您要使用 GPU，iOS 上的金属支持将是更好的选择。

## 金属

您可以使用 Apple 对 Metal Compute 着色器的支持。我已经为我的博士学位编写了高性能代码。[我使用 Metal](https://github.com/palmerc/Pretty-Pictures)计算一些分形的早期实验可能会给你一些开始的想法

归根结底，这个问题太宽泛了。您打算将该库用于什么用途，或者您打算如何使用它？是一次性乘法吗？您是否使用当前库进行了测试，发现性能太慢？如果是这样，多少？

一般来说，您可以针对算法 X 在 CPU 与 GPU 与专用硬件上的性能进行教育性或纯信息性实验，但大多数情况下，您会遇到[阿姆达尔定律](https://en.wikipedia.org/wiki/Amdahl's_law)和您的代码与该领域的专家团队的对比。

## 加速

您还可以查看提供 BLAS 的 Accelerate 框架。

根据 WWDC 2014 演讲[What's new in the Accelerate Framework](https://developer.apple.com/videos/wwdc/2014/#703)，Apple 已经针对当前一代硬件手动调整了线性代数库。它们不仅速度快，而且节能。也有更新的谈话。

# php - Symfony 的简单守护进程

> ID：14288117
> 
> 赞同：1
> 
> 时间：2013-01-11T23:07:37.570
> 
> 标签：php, symfony, daemon

我有一个 symfony2（php 框架）应用程序，为此我编写了一个可以从命令行调用的命令。此命令只是检查数据库中的表中的任务，然后执行该任务。我需要的是一个类似守护进程的生物，只要将一行插入到这个（mysql）数据库表中，它就可以在后台运行这个命令。我不能用 cron 作业来做到这一点，因为所需的任务需要尽快发生，并且通常需要并行发生。

我看这一切都错了吗？

服务器：Ubuntu 11.10 PHP：5.3 Symfony：2.1 mysql：5.1.66

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:45:02.383

我假设您正在使用某种 ORM 来实现持久性。[然后我可能会在Propel](http://symfony.com/doc/current/book/propel.html)中使用像 postInsert() 这样的钩子

> 插入新对象后执行的 postInsert() 代码

[或Doctrine](http://symfony.com/doc/current/book/doctrine.html)中的 postPersist() 。

> postPersist - postPersist 事件在实体被设置为 >persistent 后发生。它将在数据库插入操作之后被调用。生成的主键值在 postPersist 事件中可用。

[这是有关生命周期事件](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html#lifecycle-events)的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T08:02:31.813

即使这是一个非常古老的问题......我找到了[https://github.com/mac-cain13/daemonizable-command](https://github.com/mac-cain13/daemonizable-command)

可能对您需要做的事情有用。

# windows - 当我尝试启动脚本时，它会打开然后立即关闭

> ID：14288118
> 
> 赞同：1
> 
> 时间：2013-01-11T23:07:44.827
> 
> 标签：windows, command-prompt

我正在尝试制作一个简单的 ruby​​ 脚本。但是，当我运行它时，命令行会打开，然后几乎立即关闭。我在使用 Visual Basic 控制台应用程序时遇到了同样的问题，所以我不确定这是否是命令提示符的问题。

我正在使用 Ruby 1.9.3 运行 Windows 8。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:14:26.863

这是在 Windows 上开发命令行应用程序时的常见症状，尤其是在使用 IDE 时。

解决问题的正确方法是手动打开命令行提示符或者PowerShell，导航到程序所在目录，通过命令行手动执行：

```
ruby your_program.rb 
```

这就是命令行程序从一开始就被设计为执行的方式。当您从 IDE 运行代码时，它会打开一个终端并告诉它执行您的程序。但是，一旦您的程序完成执行，终端就不再有任何事情可做，因此会关闭。

但是，如果*您*打开终端，那么*您*是告诉它要做什么的人，而不是 IDE，因此即使在程序完成后，终端也希望您提供更多输入。它不会关闭，因为*您*没有告诉它关闭。

您还可以在 Ruby 脚本的末尾使用此解决方法：

```
gets 
```

这将从标准输入中读取一行并将其丢弃。它会阻止您的程序以及终端完成，直到您按下回车键。

类似的解决方法可用于任何语言，例如 C 和 C++，但我认为它们并不能解决实际问题。

**但是，不要让这让您灰心！**`gets`在你学习的时候随意使用。这是一个非常方便的解决方法，您应该使用它。

请注意，这些黑客不应该出现在生产代码中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:09:34.617

您是从命令行运行还是作为可执行文件运行。尝试在末尾放置一个繁忙的循环以查看输出或等待键盘输入。如果您在命令行之外运行，则命令行在脚本完成后退出。

# javascript - 使谷歌地图响应调整大小

> ID：14288120
> 
> 赞同：0
> 
> 时间：2013-01-11T23:07:57.460
> 
> 标签：javascript, html, css, google-maps-api-3

> **可能重复：**
> [根据浏览器调整大小调整谷歌地图](https://stackoverflow.com/questions/11598955/resizing-google-map-according-to-browser-resizing)

所以通常使用 js api 的谷歌地图看起来像这样......

![在此处输入图像描述](../Images/7a2eacfe41264c8550a0c12489b0270a.png)

现在，如果我要刷新页面，打开开发人员工具，然后将开发人员工具放下一点，它看起来像这样。

![在此处输入图像描述](../Images/bd5f5e2a0d1cbe2c878e8c501668d4f9.png)

所以我想知道如何在调整窗口大小时重绘控件并调整地图大小。我在这里尝试了这段代码。但是没办法...

```
#map_canvas {width:100%;height:100%;position: absolute; top: 42px; left: 0; right: 0;
 bottom:0; z-index: 1; overflow: hidden; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:16:27.820

当 window.onresize 事件发生时，在 #map_canvas 上设置样式属性：

```
window.onresize = function(event) {
    var style = document.getElementById('map_canvas').style;
    style.width = '100%';
    style.height = '100%';
    style.position = 'absolute';
    style.top = '42px';
    style.left = '0';
    style.right = '0';
    style.bottom = '0';
    style.z-index = '0';
    style.overflow = 'hidden';
    google.maps.event.trigger(map, 'resize');
    map.setZoom(map.getZoom());
} 
```

考虑到顶部 42px 的 jQuery equiv

```
window.onresize = function(event) {
    var el = $("#map_canvas");
    el.css("position", "absolute");
    el.css("top", "42px");
    el.css("left", "0px");
    el.css("right", "0px");
    el.css("bottom", "0px");
    el.css("width", "100%");
    el.css("height", $("body").height() - 42);
    el.css("overflow", "hidden");
    google.maps.event.trigger(Maps.map, 'resize');
    Maps.map.setZoom(Maps.map.getZoom());
} 
```

# nhibernate - 流畅的休眠一级缓存未按预期工作

> ID：14288121
> 
> 赞同：4
> 
> 时间：2013-01-11T23:08:15.890
> 
> 标签：nhibernate, fluent-nhibernate, linq-to-nhibernate, nhibernate-caches

我有一个在一个会话中被多次调用的函数。根据我对 NHibernate 一级缓存的理解，无论调用次数如何，同一会话中的精确查询只会执行一次。

但事实并非如此。下面是代码片段，我可以看到在 NHProfiler 中执行的查询与调用该函数的次数一样多。

```
 public List<CustomerType> GetAllActiveCustomerTypes()
    {
        return _unitOfWork.CurrentSession.QueryOver<CustomerType>().Where(x => x.Active).List();
    } 
```

我在这里理解 NHibernate 是否遗漏了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T06:25:32.107

你的经验是正确的。会话一级缓存不缓存查询。为了加深理解，请阅读：[NHibernate 中的第一级和第二级缓存](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)

一级缓存的摘录：

> ...第一级缓存也称为身份映射，不仅用于减少到数据库的往返次数以提高应用程序的速度，而且还用于保证不存在对象的两个不同实例拥有相同的ID...

和

> ...*当使用 NHibernate 时，只要使用标准会话对象，就会自动启用第一级缓存*...当 NHibernate 通过其唯一 id 从数据库加载实体时，它会自动放入所谓的身份映射中。 ..

如前所述，它用于`entity`缓存目的。

二级缓存提取：

*   ...可以在二级缓存中缓存单个实体或整个聚合。
*   ... 还可以在二级缓存中缓存（复杂和/或耗时的）查询。

# php - php登录给出？>

> ID：14288126
> 
> 赞同：-1
> 
> 时间：2013-01-11T23:08:31.440
> 
> 标签：php, sql-server, login, login-script

我正在尝试编写一个 php 登录脚本。当我将它上传到我的网页时，它会显示：？>

我迷路了，我尝试谷歌搜索和阅读 abt php 错误，甚至多次尝试查看我的代码，但我无法弄清楚发生了什么。

```
<?php

$host = 'myhost';
$user = 'user';
$pass = 'mypass';
$db = 'dbname';

$connect = mssql_connect($host,$user,$pass) or die('Unable to connect');
$database = mssql_select_db($db,$connect) or die('Unable to connect to selected database');

?> 
```

这是我与数据库部分连接的代码。具有表格的部分似乎有效。但是当我点击注册时，它就不起作用了。希望大家能帮忙。谢谢。

干杯库姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:40:56.693

> **PHP 可能未在网络服务器上正确配置。**

尝试运行此代码并查看是否获得输出。

```
<?php
phpinfo();
?> 
```

快乐编码！

# iphone - iOS 提供什么版本的 sqlite？

> ID：14288128
> 
> 赞同：30
> 
> 时间：2013-01-11T23:08:45.410
> 
> 标签：iphone, ios, sqlite

iOS 包含什么版本的 Sqlite？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2016-03-14T17:06:08.877

[这个 wiki](https://github.com/yapstudios/YapDatabase/wiki/SQLite-version-(bundled-with-OS))有最新的列表，目前是：

```
╔═════════════╦════════════════╗
║ iOS Version ║ SQLite Version ║
╠═════════════╬════════════════╣
║ 2.2         ║ 3.4.0          ║
║ 3.1.3       ║ 3.6.12         ║
║ 4.0.2       ║ 3.6.22         ║
║ 4.1.0       ║ 3.6.23.2       ║
║ 4.2.0       ║ 3.6.23.2       ║
║ 5.1.1       ║ 3.7.7          ║
║ 6.0.1       ║ 3.7.13         ║
║ 7.0         ║ 3.7.13         ║
║ 7.0.6       ║ 3.7.13         ║
║ 8.0.2       ║ 3.7.13         ║
║ 8.2         ║ 3.8.5          ║
║ 9.0         ║ 3.8.8          ║
║ 9.3.1       ║ 3.8.10.2       ║
║ 10.0 beta 2 ║ 3.13.0         ║
║ 10.0 GM     ║ 3.14.0         ║
║ 10.2        ║ 3.14.0         ║
║ 10.3.1      ║ 3.16.0         ║
║ 11.0        ║ 3.19.3         ║
║ 12.0        ║ 3.24.0         ║
║ 12.1        ║ 3.24.0         ║
║ 13.1.3      ║ 3.28.0         ║
║ 14.1        ║ 3.32.3         ║
║ 14.2        ║ 3.32.3         ║
╚═════════════╩════════════════╝ 
```

```
╔═══════════════╦════════════════╗
║ macOS Version ║ SQLite Version ║
╠═══════════════╬════════════════╣
║ 10.9          ║ 3.7.13         ║ 
║ 10.10         ║ 3.8.5          ║ 
║ 10.10.3       ║ 3.8.5          ║ 
║ 10.11         ║ 3.8.10.2       ║ 
║ 10.12         ║ 3.14.0         ║ 
║ 10.13         ║ 3.19.3         ║ 
║ 10.14.2       ║ 3.24.0         ║ 
╚═══════════════╩════════════════╝ 
```

*Iulian Onofrei 于 2020 年 12 月 1 日编辑了该维基*

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-11T23:08:45.410

在各种 iOS 版本上使用 SELECT sqlite_version()：

来自互联网：

```
2.2: 3.4.0
3.1.3: 3.6.12
4.0.2: 3.6.22
4.1.0: 3.6.23.2
4.2.0: 3.6.23.2 
```

我现在刚刚测试：

```
6.0.1: 3.7.13 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-20T03:39:26.087

我刚刚检查了 iOS 7：

```
7.0: 3.7.13 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2014-10-07T20:59:44.213

做就是了：

```
p (const char*) sqlite3_libversion() 
```

在您想知道 sqlite 版本的设备上运行应用程序（链接到 sqlite lib）的调试器中。

在 iOS 8.0.2 iPhone 5s 上，我得到了 3.7.13，所以根据其他答案中的报告，6.0 版使用相同版本，他们似乎有一段时间没有更改版本。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-05T17:42:41.057

SQLite has been updated in iOS 8.2 to version `3.8.5`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-11-14T23:13:02.983

使用以下内容打印代码中的版本。您可以将以下定义为单独的仅调试功能，并`didFinishLaunchingWithOptions`在您的 appDelegate 中调用它。

```
#if DEBUG
// Int representing version; e.g. "3016000" for macOS 10.12.4
int sqliteVersion = sqlite3_libversion_number();
NSLog(@"Sqlite Version: %d", sqliteVersion);

// String representing version; e.g. "3.19.3" for iOS 11
const char *sqliteLibVersion = sqlite3_libversion();
NSString *sqliteLibVersionStr = [NSString stringWithUTF8String:sqliteLibVersion];
NSLog(@"Sqlite Lib Version: %@", sqliteLibVersionStr);

// String representing sourceId; e.g. "2017-06-27 16:48:08 2b09...2e2377b" on iOS11
const char *sqliteSourceid = sqlite3_sourceid();
NSString *sqliteSourceidStr = [NSString stringWithUTF8String:sqliteSourceid];
NSLog(@"Sqlite SourceID: %@", sqliteSourceidStr);
#endif 
```

或者，`sqlite3.h`直接在 Xcode 中查看。对于 iOS 11：

```
#define SQLITE_VERSION        "3.19.3"
#define SQLITE_VERSION_NUMBER 3019003
#define SQLITE_SOURCE_ID      "2017-06-27 16:48:08 2b09...2e2377b" 
```

`sqlite3.h`还有其他可用于调试目的的方法。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-14T17:08:24.540

使用 iOS 14 更新 2020 年 11 月

```
 ╔═════════════╦════════════════╗
  ║ iOS Version ║ SQLite Version ║
  ╠═════════════╬════════════════╣
  ║ 13.1.3      ║ 3.28.0         ║
  ╠═════════════╬════════════════╣
  ║ 14.1        ║ 3.32.3         ║
  ╚═════════════╩════════════════╝ 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-28T03:48:48.913

在 iOS 9.0 中，SQLite 版本是`3.8.10.2`

# php - PHPUnit 安装

> ID：14288134
> 
> 赞同：0
> 
> 时间：2013-01-11T23:08:56.617
> 
> 标签：php, phpunit, wamp

我已经使用 pear 安装了 PHPUnit，但是当我尝试进行测试时，在包含 phpunit 框架时出现以下错误。

这是php测试脚本

```
<?php
require_once ('PHPUnit/Framework');

class Mytest extends PHPUnit_Framework_TestCase
{
    private $o;
    protected function setUp()
    {
        $this->o=new Myclass();
    }
    public function testId()
    {
        $this->assertEquals(null,$this->o->getID());
    }
}

class Myclass{
    private $_id;
    public function getID()
    {
        return $this->_id;
    }
} 
```

结束错误是代码是：

```
require_once(C:\wamp\bin\php\php5.3.8\pear\PHPUnit\Framework): failed to open stream: Permission denied 
```

我尝试了很多东西，但没有得到任何结果！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:13:09.527

需要一次需要一个文件。最有可能的更改是替换：

```
require_once ('PHPUnit/Framework'); 
```

和：

```
require_once 'PHPUnit/Framework.php'; 
```

请注意，[require_once](http://php.net/manual/en/function.require-once.php)是一个语句，而不是一个函数 - 括号没有任何作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T23:16:08.317

PHP 中的`require`函数包含当前文件中的文件。`require`这与您在 Ruby 中正确使用的函数不同，它的意思是“加载库”。

但是您可以从这种情况下删除完整的 require 功能。如果您测试完整的测试套件（使用`phpunit`），PHPunit 类将自动包含在内，因此您可以直接使用它们。

# javascript - 动态更改 datatables.net 结构

> ID：14288139
> 
> 赞同：0
> 
> 时间：2013-01-11T23:09:34.197
> 
> 标签：javascript, jquery-datatables

我正在使用[Datatables](http://datatables.net)网格通过 AJAX 在服务器端动态显示来自不同数据源的数据。这些数据源具有不同的列名和数量。

动态更改数据表配置的更好方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:01:21.780

实际上，我正在按照您现在的建议动态填充从服务器响应返回的表头，然后再使用数据表网格初始化数据表。

可能的伪代码可以是：

```
function initDataTable() {
    var theadSetup = loadColumnSetup(); // load thead setup from server
    // construct thead which are required to initialise a datatable
    constructTableHead(theadSetup); // manipulate TH elements here
    $('.dataTable').dataTable( {
        aaData: dataSrc, // may also be retrieved from server
        // other settings...
    } );
} 
```

# javascript - 防止点击动作

> ID：14288142
> 
> 赞同：0
> 
> 时间：2013-01-11T23:09:47.507
> 
> 标签：javascript, jquery, popup, bpopup

我正在为 jQuery 使用 bPopup 插件，除了单击之外一切正常。当我点击一个链接时，它会打开一个弹出窗口。然后，当我单击另一个链接时，它会再次打开一个弹出窗口。

所以我看到 e.preventdefault 不起作用。如何使它起作用以防止点击其他链接？

```
// Semicolon (;) to ensure closing of earlier scripting
// Encapsulation
// $ is assigned to jQuery
;(function($) {

// DOM Ready
$(function() {

    // Binding a click event
    // From jQuery v.1.7.0 use .on() instead of .bind()
    $('#PopUpItUp').live('click', function(e) {

    // Prevents the default action to be triggered. 
    e.preventDefault();

    // Triggering bPopup when click event is fired
    $('#popup').bPopup({follow: [false, false], position: [310, 25]});

        });

    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:43:13.910

谢谢大家的帮助。但是我在 Fiddle 中看到代码可以工作（Jigar Patel），但在我的 index.php 中它不起作用......所以我启动了 firebug 并看到错误 Reference Error e.PreventDefault()。e 未定义。因此，在其他没有 PopUpItUp id 的链接上会触发 bpopup 窗口，下面是 firebug 中断并显示错误的代码：

```
function ShowIMDBInfo(id)
{
$.ajax({
url: 'http://myurladdress/external.php?id='+id,
success: function(data) {
$('#popup').html('<div>' + data + '</div>');
},
error: function(request, error, errormessage) {
$("#messages").html(error + '\n' + errormessage);
}
});
e.preventdefault();
return false;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:18:25.663

`preventDefault()`方法不会验证您的弹出窗口是否已经打开！`a`它只是阻止元素的默认操作。

**不推荐使用 Live 方法**

我认为你需要这个：

```
$(function() {

    var opened = false;

    $('#PopUpItUp').click(function(e) {

      // Prevents the default action to be triggered. 
      e.preventDefault();

      if(!opened) {
        // Triggering bPopup when click event is fired
        $('#popup').bPopup({follow: [false, false], position: [310, 25]});
        opened = true;
      }
    });
})(jQuery); 
```

我不知道你为什么选择使用`.live()`方法..你只需要使用`.click()`方法，因为你不能拥有超过一个`#PopItUp`id的元素

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:24:50.767

首先你必须了解 e.preventDefault(); 它只阻止默认动作，例如超链接、表单提交动作动作。

这是您想要的工作示例。

[http://plnkr.co/edit/v2yx7amBuv2SDCJ0YchB](http://plnkr.co/edit/v2yx7amBuv2SDCJ0YchB)

# css - CSS：如果选中则不悬停

> ID：14288145
> 
> 赞同：0
> 
> 时间：2013-01-11T23:09:54.340
> 
> 标签：css, hover, focus, css-selectors

大多数情况下，这听起来很简单，但我是这方面的新手。

```
input.input-text:hover {color:red}
input.input-text:focus {color:blue} 
```

我想如果`input-text`是专注的，它在悬停时一定不会变红。我们可以这样做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:23:29.883

您可以堆叠伪

```
input.input-text:focus:hover {
  color:green;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:18:24.323

我会使用 jquery 来完成此操作，因为您正在尝试有条件地设置 css。你可以保留你的css，然后在你的html页面上添加它

```
$("input.input-text:focus").hover().css('color', 'black'); 
```

如果您没有包含 jquery 脚本，请将其添加到文档的开头：

```
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

# wordpress - 在 wordpress 中获取类别的帖子

> ID：14288146
> 
> 赞同：0
> 
> 时间：2013-01-11T23:10:19.673
> 
> 标签：wordpress

我正在使用 WP 3.4.2 ，一个 211 的子主题。我创建了一个名为“特色媒体”的类别。

我想获取并显示具有此类别的帖子。
在来这里之前我检查了一下，我在论坛中发现了相同答案的变体。一般建议我写：

```
$args = array('category'=> x); 
get_posts($args); 
```

我不知道类别 ID。一些论坛建议我转到仪表板-> 帖子-> 类别，找到我的类别并将鼠标悬停在“编辑”链接上，然后从状态栏中读取类别 ID。我的浏览器显示了这个地址：`localhost/myblog/wp-admin/edit-tags.php?action=edit&taxonomy=category&tag_ID=7&post_type=post`

这显然意味着我的类别 id 是 7。上面的代码返回和空数组。这对我来说真的很令人沮丧。我相信方法是正确的。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:52:49.427

你在设置全局 $post 吗？

这是他们网站上的 WordPress 示例：

```
 <ul>
<?php
global $post;
$args = array( 'numberposts' => 5, 'offset'=> 1, 'category' => 1 );
$myposts = get_posts( $args );
foreach( $myposts as $post ) :  setup_postdata($post); ?>
    <li><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></li>
<?php endforeach; ?>
</ul> 
```

[http://codex.wordpress.org/Template_Tags/get_posts](http://codex.wordpress.org/Template_Tags/get_posts)

# excel - Apache-POI / XSSF - 读取大文件 (5 MB)

> ID：14288151
> 
> 赞同：0
> 
> 时间：2013-01-11T23:10:53.210
> 
> 标签：excel, apache-poi, readfile, xssf

我有一个包含 10000 行的大文件...打开它，持续一个永恒... 10 分钟后我停止了程序...

```
OPCPackage opcPackage = OPCPackage.open(item.getFilePath());
workbook = new XSSFWorkbook(opcPackage);
sheet = workbook.getSheet(item.sheet);
evaluator = new XSSFFormulaEvaluator(workbook);
itRows = sheet.rowIterator(); 
```

它`itRows = sheet.rowIterator(); newer finishes...`需要这么多时间...

这么大的文件怎么读？

# iphone - 如何获得正确大小的 UIView？

> ID：14288152
> 
> 赞同：0
> 
> 时间：2013-01-11T23:10:59.560
> 
> 标签：iphone, ios, ipad, cocoa-touch, uiview

**问题一：**

如何获得正确大小的 UIView？

我正在创建一个 CGRect 来使用平铺层显示一些图像。当我创建 CGRect 时，我基本上需要它的大小与我的 UIView 的大小完全相同。事实证明这很困难.. 当我 NSLog() 输出 my`mainView.bounds.size.width`或 my`mainView.frame.size.width`时，它们在横向时总是错误的！他们总是像在纵向一样注销值，即使我可以看到实际视图更宽。颠倒它们也将是错误的。在横向时将宽度设置为高度是不够的，反之亦然，我需要正确的值。

我能够使它看起来正确的唯一方法是在横向时手动输入 1024 的宽度，但这也并不总是有效，因为：

**问题2：**

检查设备是否处于横向状态的正确方法是什么？

我一直在使用

```
if([UIDevice currentDevice].orientation == UIDeviceOrientationLandscapeLeft || [UIDevice currentDevice].orientation == UIDeviceOrientationLandscapeRight) 
```

但这并不总是有效。如果我在启动时将设备保持在横向模式，这是正确的，但是如果我将其设为横向，则将 iPad 平放，将仪表板保持为横向，然后启动它，然后会出现横向飞溅，但该代码认为它是纵向的。该代码也根本不适用于 iPad 模拟器..

**编辑**

出于某种原因，当我决定添加对横向方向的支持时，仅检查目标摘要页面中的横向方向是不够的，我实际上必须将我的 TabBarController 子类化并以物理方式告诉它旋转和

```
-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    return YES;
} 
```

我不应该这样做..对吗？如果我创建一个这样的空项目，它就不需要它。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:21:22.967

问题1：是的，没错。:)

问题 2：我刚回到家并检查了自己的代码。我用：

```
UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation]; 
```

检查当前界面的方向。然后，你可以使用类似的东西：

```
if(UIInterfaceOrientationIsPortrait(self.interfaceOrientation)) {
    // Do something
} else if(UIInterfaceOrientationIsLandscape(self.interfaceOrientation)){
    // Do something else
} 
```

**但是**，如果您正确处理旋转事件，您真的不需要这样做。

当我需要根据方向调整代码中的 UI 元素位置时，这是我处理旋转的典型方式：

```
#pragma mark - View rotation methods

// Maintain pre-iOS 6 support:
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

// Make sure that our subviews get moved on launch:
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    UIInterfaceOrientation orientation = [[UIApplication sharedApplication] statusBarOrientation];
    [self moveSubviewsToOrientation:orientation duration:0.0];
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{
    [super willRotateToInterfaceOrientation:toInterfaceOrientation duration:duration];

    [self moveSubviewsToOrientation:toInterfaceOrientation duration:duration];
}

// Animate the movements
- (void)moveSubviewsToOrientation:(UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration
{
    [UIView animateWithDuration:duration
                     animations:^{
                         [self.tableView reloadData];
                         if (UIInterfaceOrientationIsPortrait(orientation))
                         {
                             [self moveSubviewsToPortrait];
                         }
                         else
                         {
                             [self moveSubviewsToLandscape];
                         }
                     }
                     completion:NULL];
}

- (void)moveSubviewsToPortrait
{
    // Set the frames/etc for portrait presentation
    self.logoImageView.frame = CGRectMake(229.0, 21.0, 309.0, 55.0);
}

- (void)moveSubviewsToLandscape
{
    // Set the frames/etc for landscape presentation
    self.logoImageView.frame = CGRectMake(88.0, 21.0, 309.0, 55.0);
} 
```

我也投入`moveSubviewsToOrientation`让它`viewWillAppear`旋转

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:31:39.477

我对此有点挣扎，以下是我发现的一些事实：

1- 当设备正面朝上或朝下时，设备会恢复到正面朝上或朝下之前的最后一个方向，因为这两个方向不一定会告诉您设备是纵向还是横向。例如，如果您处于横向模式，然后将设备平面朝上，然后启动应用程序，它将以横向启动。

2- 调用 viewDidLoad 时，尚未设置边界，因此您需要在 viewWillAppear 或 viewDidLayoutSubviews 中放置与方向有关的任何调用。

3-如果出于某种奇怪的原因，您需要在 viewDidLoad 之前使用边界，或者可能在模型中执行某些操作，我发现放置与方向有关的设置的最佳方法是信任状态栏，您可以例如如下调用。

```
if(UIInterfaceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation])) 
```

PS：关于你添加的问题，参考： [https ://developer.apple.com/library/ios/#qa/qa2010/qa1688.html](https://developer.apple.com/library/ios/#qa/qa2010/qa1688.html)

您很可能是最后两颗子弹中的一颗。我之前遇到过这个问题，坦率地说，我发现它最容易实现：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation; 
```

对于所有 VC 来说，只是为了安全起见，尤其是行为已从 iOS5 更改为 iOS6。

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW1](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html#//apple_ref/doc/uid/TP40007457-CH7-SW1)

希望这可以帮助

# core-data - CoreData 非常慢

> ID：14288153
> 
> 赞同：1
> 
> 时间：2013-01-11T23:11:03.573
> 
> 标签：core-data

所以这是我的问题，我是 iOS 的 CoreData 的新手，所以我不太确定如何优化，但我在这里看到了很多其他问题，我已经尽我所能进行优化，但由于某种原因，获取 100 行仍然需要将近 5 秒！这是它被调用的代码：

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
    [self titles:searchText];
}
-(NSArray *)titles:(NSString *)toMatch
{
    NSMutableArray * retval = [[NSMutableArray alloc] init];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if(toMatch.length>2)
    {
        NSString *LabelText =toMatch;
        NSString *compareString = @"";
        for (int i = 0; i<LabelText.length; i++)
        {
            int letter = [LabelText characterAtIndex:i];
            NSString *blah;
            if(letter<100)
            {
                blah = [NSString stringWithFormat:@"0"];
                blah = [blah stringByAppendingFormat:@"%d", letter];
            }
            else
                blah = [NSString stringWithFormat:@"%d", letter];
            compareString= [compareString stringByAppendingString:blah];
            compareString = [compareString stringByAppendingString:@","];
        }
        NSFetchRequest *request = [[NSFetchRequest alloc] init];
        [request setEntity:entity];
        NSPredicate *predicate;
        if ([defaults boolForKey:@"FLS"])
            predicate = [NSPredicate predicateWithFormat:@"first_letter_start BEGINSWITH %@", compareString];
        else
            predicate = [NSPredicate predicateWithFormat:@"first_letter_start CONTAINS %@", compareString];
        [request setPredicate:predicate];
        [request setFetchLimit:100];
        [request setFetchBatchSize:1];
        [request setPropertiesToFetch:[NSArray arrayWithObject:@"gurmukhi"]];
        [request setReturnsObjectsAsFaults:NO];
        NSError *error;
        NSArray *fetchedObjects = [managedObjectContext executeFetchRequest:request error:&error];
        for (Gurbani *shabad in fetchedObjects)
        {
            [retval addObject:shabad.gurmukhi];
        }
        searchResults = retval;
        [searchResultsTable reloadData];
    }
    return retval;
}; 
```

这是放入调试参数后的日志：

```
2013-01-11 18:04:57.195 GurbaniKhoj[2833:907] CoreData: sql: pragma cache_size=200
2013-01-11 18:04:57.199 GurbaniKhoj[2833:907] CoreData: sql: SELECT Z_VERSION, Z_UUID, Z_PLIST FROM Z_METADATA
2013-01-11 18:05:01.139 GurbaniKhoj[2833:907] CoreData: sql: SELECT 0, t0.Z_PK FROM ZSHABAD t0 WHERE  NSCoreDataStringSearch( t0.ZFIRST_LETTER_START, ?, 8, 0)  LIMIT 100
2013-01-11 18:05:06.705 GurbaniKhoj[2833:907] CoreData: annotation: sql connection fetch time: 5.5652s
2013-01-11 18:05:06.707 GurbaniKhoj[2833:907] CoreData: annotation: total fetch execution time: 5.5682s for 92 rows. 
```

这是怎么回事？我能做些什么来让它更快？

编辑：我注意到的另一件事是这个速度并不一致。对于某些查询，它是 5.5 秒，对于其他查询是 1.8 秒。我不知道是什么导致了波动。

编辑 2：发现我的索引没有被创建。创建了一个版本化的数据模型，确保它们被索引，现在这就是日志的样子

```
2013-01-15 03:06:29.671 GurbaniKhoj[1212:907] CoreData: sql: SELECT 0, t0.Z_PK FROM ZSHABAD t0 WHERE  NSCoreDataStringSearch( t0.ZFIRST_LETTER_START, ?, 8, 0)  LIMIT 100
2013-01-15 03:06:31.130 GurbaniKhoj[1212:907] CoreData: annotation: sql connection fetch time: 1.4588s
2013-01-15 03:06:31.132 GurbaniKhoj[1212:907] CoreData: annotation: total fetch execution time: 1.4607s for 92 rows. 
```

编辑3：有什么办法可以让这更快吗？尽管我正在对每个字符串进行这些字符串比较，但我仍然觉得 1.5 秒不是很快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T14:46:54.907

穆基，

首先，您是否已经完成了显而易见的事情并为您的领域编制了索引？

其次，iOS 设备的获取时间非常慢。这在技术上并不是 Core Data 的缺陷。（尽管 CD 在这里也可能是性能下降的罪魁祸首。）因此，只要有可能，您应该在 RAM 中进行大量提取并在那里细化您的搜索。例如，当第一个字符是“b”时，获取所有这些字符，然后使用后续键入的字符从 RAM 中的该子集中进行细化。你会发现这是相当快的。

第三，您看到的性能变化可能是由于 SQLite 行缓存以及可能是填充的 MOC。

安德鲁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:26:28.387

尝试将 fetch batch size 从 1 更改为 20。

```
[request setFetchBatchSize:20]; 
```

# facebook - facebook getLogoutUrl（）不起作用

> ID：14288161
> 
> 赞同：0
> 
> 时间：2013-01-11T23:12:06.987
> 
> 标签：facebook, facebook-php-sdk

我现在尝试了几个小时来解决这个问题，但我什么也没找到。

生成了与 php facebook SDK 的 getLogoutUrl() 的链接，但是当我单击它时，只会将我重定向到 facebook 主页，而无需注销或重定向...

你能帮我吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T08:30:45.793

是的，它是这样完成的

```
if ($facebook->getUser()) {
               $logoutParams = array('next'  =>  '/users/logout/');
               echo '<li><a href="'.$logoutUrl.'" ">facebook logout</a></li></ul></li>';
                          } 
```

# ios - 用于 iOS 消费的安全 ASP.NET Web API

> ID：14288162
> 
> 赞同：2
> 
> 时间：2013-01-11T23:12:14.947
> 
> 标签：ios, rest, asp.net-web-api

因此，我正在尝试保护 ASP.NET Web API 服务，以便 iOS (iPhone 4/5) 应用程序可以使用其 Windows 用户名和密码以 REST 方式访问它（不要问 :)），并且我已经关注了这篇[文章在这里](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)，并且在大多数情况下它可以工作，我只是对其进行了一些修改以使用 Active Directory 服务来验证用户名和密码，但我想知道是否有更好的方法来保护将要使用的 ASP.NET Web API可能来自非浏览器客户端以及浏览器？

这是由 IIS7 托管的，所以我应该让 IIS 控制身份验证吗？

需要一点指导...谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:24:03.010

根据我的经验，假设我正在针对服务器进行身份验证，那么您正在寻找的具体内容有点不清楚

*   访问 https 后面的 API
*   通过 POST 发送请求。

如果您还在编写 iOS 端代码，请确保正确实施身份验证挑战。这是iOS端的一篇文章：http: [//mobiledevelopertips.com/networking/handling-url-authentication-challenges-accessing-password-protected-servers.html](http://mobiledevelopertips.com/networking/handling-url-authentication-challenges-accessing-password-protected-servers.html)

# asp.net - 如何根据来自asp.net GridView的单击按钮获取行索引？

> ID：14288168
> 
> 赞同：2
> 
> 时间：2013-01-11T23:12:45.410
> 
> 标签：asp.net, gridview

我有一些记录（1 记录=1 行）的 Gridview。

在每一行上，我添加了一个按钮来从我的 mysql 数据库中删除这条记录。

每行都有相同的按钮。

问题是我需要知道**按钮是在哪一行被点击的**？我需要这个来获取行索引以获取该行中我的记录的 id。

我怎样才能以最简单的方式做到这一点？

网格视图：

```
 <asp:GridView ID="GridView1" runat="server" 
        CellPadding="6" EnableModelValidation="True" ForeColor="#333333" 
        GridLines="None" Caption="TWOJE WIZYTY" Font-Bold="True" 
        onrowcreated="GridView1_RowCreated" style="text-align: left">
        <AlternatingRowStyle BackColor="#AEAEAE" />
        <EditRowStyle BackColor="Blue" />
        <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#868686" Font-Bold="True" ForeColor="White" />
        <PagerStyle BackColor="Blue" ForeColor="#333333" HorizontalAlign="Center" />
        <RowStyle BackColor="#C7C7C7" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
    </asp:GridView> 
```

按钮是这样添加的：

```
 protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
    {
        Button b1 = new Button();
        b1.Text = "usuń";
        b1.OnClientClick = "return potwierdzenie()";
        b1.Click+=new EventHandler(b1_Click);
        TableCell cel = new TableCell();
        cel.Width = Unit.Pixel(180);
        if (e.Row.RowType == DataControlRowType.Header)
        {
            e.Row.Cells[0].Visible = false;
            e.Row.Cells[1].HorizontalAlign = HorizontalAlign.Right;
            e.Row.Cells[2].Text = "";
            e.Row.Cells.Add(cel);
        }
        else
        {
            //HERE IS MY BUTTON ADDED! *********************
            cel.Controls.Add(b1);
            cel.HorizontalAlign = HorizontalAlign.Right;
            e.Row.Cells[0].Visible = false;
            e.Row.Cells[1].HorizontalAlign = HorizontalAlign.Right;
            e.Row.Cells[2].HorizontalAlign = HorizontalAlign.Left;
            e.Row.Cells.Add(cel);
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T23:24:30.813

您可以使用`NamingContainer`按钮的属性来获取`GridViewRow`. 然后，您就拥有了查找其他控件所需的一切（如果您使用，则为带有 ID 的控件`TemplateFields`）。

```
protected void button_Delete_click(Object sender, EventArgs e)
{
    Button btn = (Button) sender;
    GridViewRow row = (GridViewRow) btn.NamingContainer;
    // assuming you store the ID in a Hiddenield:
    Hiddenield hiddenID = (HiddenField) row.FindControl("HiddenID");
    int ID = int.Parse(hiddenID.Value);
    // delete the record
} 
```

您还可以获得`row-index`via `row.RowIndex`。

# algorithm - 物品拾取竞赛的 AI 算法

> ID：14288170
> 
> 赞同：0
> 
> 时间：2013-01-11T23:12:54.290
> 
> 标签：algorithm, machine-learning, artificial-intelligence, neural-network

我想为以下游戏构建一个 AI：

*   *M x N*棋盘上有两个玩家
*   每个玩家都可以向上/向下或向左/向右移动
*   板上有不同的项目
*   在尽可能多的类别中拥有比其他玩家更多物品的玩家获胜（在一个类别中拥有更多物品使您成为该类别的赢家，拥有更多类别的玩家赢得游戏）
*   在一个回合中，您可以拿起您站立的物品或移动
*   玩家动作同时进行
*   站在同一个场地上的两名球员如果都这样做，则有 0.5 的拾取机会

如果满足以下条件之一，则游戏结束：

*   所有物品都已被拾起
*   已经有一个明显的赢家，因为一名玩家拥有超过一半类别的一半以上的物品

我对人工智能一无所知，但我前段时间上过一门机器学习课程。

1.  我该如何着手解决这样的问题？

2.  有这个问题的概括吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:49:42.017

解决任何此类问题的通常方法是与现场对手玩足够长的时间以找到一些启发式解决方案（短期目标），从而使您取得胜利。然后在您的解决方案中实施这些启发式方法。从非常小的棋盘 (1x3) 和少量类别 (1) 开始，玩它们，看看会发生什么，然后进入更复杂的案例。

如果不玩游戏，我只能想象物品较少的类别更有价值，还有目前离你更近的物品的类别，以及离你最远但离你比对手更近的物品的类别。

每个类别都有一个成本，即控制它所需的移动次数，但你的成本与对手的成本不同，它随着每一步的变化而变化。如果您的成本接近对手的成本，但仍低于对手的成本，则类别对您具有更大的价值。

每次您进行移动时，类别都会更改其值，因此您必须重新计算棋盘并从那里开始决定下一步。目标是最大化你的价值并最小化对手的价值，假设对手使用与你相同的算法。

如果您提前探索不止一回合，则寻找最佳移动会变得更加复杂，但也会更有效。在这种情况下，您必须使用相同的算法模拟对手的动作，然后选择对手的反动作最弱的动作。这种策略称为[minimax](http://en.wikipedia.org/wiki/Minimax)。

所有这一切都不是真正的人工智能，而是算法的路线图。另一个答案中提到的神经网络更像人工智能，但我对它们一无所知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T02:44:26.957

像您提出的对抗性搜索游戏（称为两人零和游戏）的典型选择称为[Minimax](http://en.wikipedia.org/wiki/Minimax)搜索。根据维基百科，Minimax 的目标是

> 最小化最坏情况（最大损失）情况下的可能损失。或者，它可以被认为是最大化最小增益。

因此，它被称为极小极大或极大极小。本质上，您构建了一个`Max`和`Min`级别的树，其中每个节点都有一个分支因子，该因子等于每轮可能动作的数量，在您的情况下为 4。每个级别对应于玩家的一个回合，并且树一直延伸到游戏结束，允许您在每个回合搜索**最佳**选择，假设对手也在*最佳*发挥。如果你的对手打得不好，你只会得分更高。本质上，在每个节点上，您都模拟了*所有可能的游戏*，并为当前回合选择最佳动作。

如果生成所有可能的游戏似乎需要很长时间，那么您是对的，这是一种指数复杂度算法。从这里你会想要研究[alpha-beta pruning](http://en.wikipedia.org/wiki/Alpha%E2%80%93beta_pruning)，它本质上允许你根据你目前发现的值消除一些你正在枚举的可能的游戏，并且是对 minimax 的一个相当简单的修改。这个解决方案仍然是**最佳**的。我遵从维基百科的文章以获得进一步的解释。

从那里开始，您可能希望尝试使用不同的启发式方法来消除节点，这可能会修剪大量节点的树以进行遍历，但是请注意，通过启发式方法消除节点可能会产生**次优**但仍然**很好的**解决方案，具体取决于在你的启发式。一种常见的策略是限制搜索树的深度，本质上你搜索可能向前 5 步以确定当前最佳移动，使用对每个玩家在 5 步向前的得分的估计。再一次，这是一个你可以调整的启发式方法。简单地计算游戏的分数就好像它在那个回合结束一样可能就足够了，而且绝对是一个很好的起点。

最后，对于涉及概率的节点，Minimax 有一个轻微的修改，称为[Expectiminimax](http://en.wikipedia.org/wiki/Expectiminimax_tree)，它通过添加一个为您选择随机选项的“第三个”玩家来处理概率问题。第三个玩家的节点将随机事件的期望值作为它们的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T02:04:28.347

AI 的目标是始终寻求保持获胜条件。

如果可行（取决于物品位置的存储方式），在每一回合开始时，AI 应该知道到所有剩余物品的距离。理想情况下，这将在游戏开始时计算一次，然后根据 AI 移动的位置简单地“调整”，而不是在每回合重新计算。如果 AI 不会只考虑自己的情况，让 AI 为玩家做同样的事情也是不明智的。

从那里确定应该选择什么项目作为对以下考虑的优化：

*   AI目前有哪些物品和物品类别？
*   玩家目前拥有哪些物品和物品类别？
*   AI 附近有哪些物品和物品类别？
*   播放器附近有哪些物品和物品类别？

你如何做到这一点在很大程度上取决于你希望人工智能有多难击败。

一种简单的方法是使用贪婪的方法并简单地追求“当前”的最佳选择。这可以通过简单地找到最接近的项目来完成，该项目不在玩家当前通过这么多项目（可能是 1-3 个）赢得的类别中。这会产生一个试图获胜但不会提前考虑的人工智能，这使得预测变得相当容易。

允许贪心算法检查前面的多个转弯将改进算法，并考虑玩家将做什么将进一步改进算法。

启发式将导致更逼真的 AI 和难以击败的 AI。甚至几乎不可能被击败。

# ruby-on-rails - Ruby on Rails WEBrick SSL 连接错误

> ID：14288176
> 
> 赞同：2
> 
> 时间：2013-01-11T23:13:11.243
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ssl, https, webrick

请帮助实施ssl

导轨版本 - 3.2.8

我编辑了以下文件：

```
# Gemfile
gem 'rack-ssl'

 # config/application.rb
require 'rack/ssl'
config.middleware.use Rack::SSL 
```

我也尝试使用

```
# config/application.rb
config.force_ssl = true 
```

但它显示

```
SSL connection error 
```

当我访问 mysite:3000/

但如果转到 https:mysite 则显示正常页面

请帮忙，

谢谢，

D

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-11T23:43:38.793

根据这个：

[如何使用停用 Webrick 的 SSL](https://stackoverflow.com/questions/5943647/how-to-use-deactivate-webricks-ssl)

该问题是由`config.force_ssl = true`. 即使您删除了您可能不想要的那个，您可能仍然会遇到 WEBrick 给您此错误的问题。您可以尝试清除 cookie，但这仍然可能不起作用。

如果您可以选择，更好的选择是切换到使用瘦服务器：

```
group :development do
   gem "thin"
end 
```

然后：

```
$ bundle
$ thin start --ssl 
```

另请参阅[https://stackoverflow.com/a/11614213](https://stackoverflow.com/a/11614213)

# python - 使用 Python 与其他程序交互

> ID：14288177
> 
> 赞同：26
> 
> 时间：2013-01-11T23:13:18.717
> 
> 标签：python, automation, interop, concept

我正在考虑使用 Python 编写一个程序，该程序将找到一首我提供的歌曲的歌词。我认为整个过程应该归结为以下几件事。这些是我希望程序在运行时执行的操作：

*   提示我输入歌曲名称
*   复制那个名字
*   打开网络浏览器（例如谷歌浏览器）
*   将该名称粘贴到地址栏中并查找有关歌曲的信息
*   打开包含歌词的页面
*   复制那歌词
*   运行文本编辑器（例如 Microsoft Word）
*   粘贴歌词
*   用歌曲名称保存新的文本文件

当然，我不是要代码。我只是想知道关于如何使用python与其他程序交互的概念或想法

更具体地说，我想我想知道，狐狸示例，我们如何指出 Google Chrome 中的地址栏在哪里，并告诉 python 将名称粘贴到那里。或者我们如何告诉 python 如何复制歌词并将其粘贴到 Microsof Word 的工作表中然后保存。

我一直在阅读（我还在阅读）几本关于 Python 的书：《Python 字节》、《艰难地学习 Python》、《Python for dummies》、《Beginning Game Development with Python and Pygame》。但是，我发现我似乎只（或几乎只）学习创建可自行运行的程序（我无法告诉我的程序使用已安装在我计算机上的其他程序执行我想做的事情）

我知道我的问题在某种程度上听起来很傻，但我真的很想知道它是如何工作的，我们告诉 Python regconize 谷歌 chrome 浏览器的这一部分是地址栏并且它应该将歌曲的名称粘贴到它。让 python 与另一个程序交互的整个想法对我来说真的很模糊，我只是非常想掌握这一点。

谢谢大家，谁花时间阅读我这么长的问题。

ttriet204

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2013-01-11T23:32:24.300

如果您真正想要的是一个自学如何与其他应用程序交互的好借口，那么这可能不是最好的。Web 浏览器很混乱，时间无法预测，等等。所以，你已经承担了一项非常艰巨的任务——如果你按照通常的方式来做这件事会很容易（直接与服务器对话，创建文本文件直接等，都无需触及任何其他程序）。

但是，如果您确实想与其他应用程序交互，则有多种不同的方法，哪种方法合适取决于您需要处理的应用程序类型。

*   一些应用程序旨在从外部实现自动化。在 Windows 上，这几乎总是意味着它们是一个 COM 接口，通常带有一个 IDispatch 接口，您可以为此使用`pywin32`的 COM 包装器；在 Mac 上，它表示一个 AppleEvent 接口，您可以使用`ScriptingBridge`或`appscript`; 在其他平台上没有通用标准。IE（但可能不是 Chrome）和 Word 都有这样的界面。

*   一些应用程序有一个非 GUI 界面——无论是您可以使用的命令行`popen`，还是您可以通过`ctypes`. 或者，理想情况下，其他人已经为您编写了 Python 绑定。

*   有些应用程序只有 GUI，而且没有办法实现 GUI 自动化。您可以在低级别执行此操作，方法是在 Windows 上制作 WM_ 消息以发送`pywin32`，使用 Mac 上的辅助功能 API 等，或者在更高级别使用库`pywinauto`，或者可能在非常高级别`selenium`或类似工具旨在自动化特定应用程序。

因此，您可以使用任何东西来做到这一点，从 Chrome 的 selenium 和 Word 的 COM 自动化，到自己制作所有 WM_ 消息。如果这是一个学习练习，那么问题是你今天想学习哪些东西。

* * *

让我们从 COM 自动化开始。使用[`pywin32`](http://sourceforge.net/projects/pywin32/)，您可以直接访问应用程序自己的脚本界面，而无需从用户那里控制 GUI，弄清楚如何导航菜单和对话框等。这是编写“Word 宏”的现代版本——宏可以是外部脚本而不是 Word 内部，它们不必用 VB 编写，但它们看起来非常相似。脚本的最后一部分看起来像这样：

```
word = win32com.client.dispatch('Word.Application')
word.Visible = True
doc = word.Documents.Add()
doc.Selection.TypeText(my_string)
doc.SaveAs(r'C:\TestFiles\TestDoc.doc') 
```

如果您查看[Microsoft Word Scripts](http://www.activexperts.com/activmonitor/windowsmanagement/scripts/msoffice/word/)，您会看到一堆示例。但是，您可能会注意到它们是用 VBScript 编写的。如果您四处寻找教程，它们都是为 VBScript（或更旧的 VB）编写的。大多数应用程序的文档都是为 VBScript（或 VB、.NET，甚至低级 COM）编写的。以及我所知道的从 Python 中使用 COM 自动化的所有教程，例如[客户端 COM 和 Python 的快速入门](http://docs.activestate.com/activepython/2.7/pywin32/html/com/win32com/HTML/QuickStartClientCom.html), 是为那些已经了解 COM 自动化的人编写的，并且只是想知道如何从 Python 中做到这一点。Microsoft 不断更改所有内容的名称这一事实使得搜索变得更加困难——您如何猜测在谷歌上搜索 OLE 自动化、ActiveX 脚本、Windows Scripting House 等与学习 COM 自动化有什么关系？所以，我不知道该推荐什么开始。我可以保证，一旦你学会了所有的废话，这一切就像上面那个例子看起来一样简单，但我不知道如何克服最初的障碍。

无论如何，并非每个应用程序都是可自动化的。有时，即使是这样，描述 GUI 操作（用户在屏幕上单击的内容）也比考虑应用程序的对象模型更简单。“选择第三段”很难用 GUI 术语来描述，但“选择整个文档”很容易——只需按 control-A，或转到“编辑”菜单并选择所有。GUI 自动化比 COM 自动化要困难得多，因为您要么必须向应用程序发送与 Windows 本身发送的相同消息以表示您的用户操作（例如，请参阅“[菜单通知](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646977%28v=vs.85%29.aspx)”），或者更糟糕的是，制作鼠标消息，如“go (32 , 4) 从左上角的像素点，单击，鼠标向下16个像素点，再次单击”表示“打开文件菜单，然后单击新建”。

幸运的是，有类似的工具[`pywinauto`](http://code.google.com/p/pywinauto/)将这两种 GUI 自动化的东西都包起来，使它变得更简单。并且有类似的工具[`swapy`](http://code.google.com/p/swapy/)可以帮助您确定要发送的命令。如果您不喜欢 Python，那么还有像[`AutoIt`](http://www.autoitscript.com/)and[`Actions`](http://app.jbbres.com/actions/)这样的工具，它们甚至比使用`swapy`and更容易`pywinauto`，至少在您开始使用时是这样。这样一来，脚本的最后一部分可能如下所示：

```
word.Activate()
word.MenuSelect('File->New')
word.KeyStrokes(my_string)
word.MenuSelect('File->Save As')
word.Dialogs[-1].FindTextField('Filename').Select()
word.KeyStrokes(r'C:\TestFiles\TestDoc.doc')
word.Dialogs[-1].FindButton('OK').Click() 
```

最后，即使使用了所有这些工具，Web 浏览器也很难实现自动化，因为每个网页都有自己的菜单、按钮等，它们不是 Windows 控件，而是 HTML。除非你想一路下降到“将鼠标移动 12 像素”的水平，否则很难处理这些。这就是它的`selenium`用武之地——它编写 Web GUI 的方式与`pywinauto`编写 Windows GUI 的方式相同。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-13T14:35:54.110

以下脚本使用[Automa](http://www.getautoma.com "自动机")完全按照您的意愿进行操作（在 Word 2010 上测试）：

```
def find_lyrics():
    print 'Please minimize all other open windows, then enter the song:'
    song = raw_input()
    start("Google Chrome")
    # Disable Google's autocompletion and set the language to English:
    google_address = 'google.com/webhp?complete=0&hl=en'
    write(google_address, into="Address")
    press(ENTER)
    write(song + ' lyrics filetype:txt')
    click("I'm Feeling Lucky")
    press(CTRL + 'a', CTRL + 'c')
    press(ALT + F4)
    start("Microsoft Word")
    press(CTRL + 'v')
    press(CTRL + 's')
    click("Desktop")
    write(song + ' lyrics', into="File name")
    click("Save")
    press(ALT + F4)
    print("\nThe lyrics have been saved in file '%s lyrics' "
          "on your desktop." % song) 
```

要亲自尝试一下，请从其[下载页面](http://www.getautoma.com/download "自动下载页面")下载 Automa.zip，然后解压缩为`c:\Program Files`. 您将获得一个名为`Automa 1.1.2`. 在该文件夹中运行`Automa.exe`。复制上面的代码并通过右键单击控制台窗口将其粘贴到 Automa 中。按 Enter 两次以摆脱`...`窗口中的最后一个并返回提示符`>>>`。关闭所有其他打开的窗口并键入

```
>>> find_lyrics() 
```

这将执行所需的步骤。

Automa[是一个 Python 库](http://www.getautoma.com/features/python_integration "Automa 的 Python 集成")：要这样使用它，您必须添加以下行

```
from automa.api import * 
```

到你的脚本的顶部和`library.zip`从 Automa 的安装目录到你的环境变量的文件`PYTHONPATH`。

如果您有任何其他问题，请告诉我:-)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-01-15T12:42:48.160

这是[@Matteo Italia 评论](https://stackoverflow.com/questions/14288177/interact-with-other-programs-using-python/14338006#comment19842264_14288177)的 Python 实现：

> 当您应该从“程序员的角度”处理问题时，您是从“用户的角度”处理问题；你不需要打开浏览器、复制文本、打开 Word 或其他任何东西，你需要执行适当的 HTTP 请求、解析相关的 HTML、提取文本并将其从 Python 脚本中写入文件。执行此操作的所有工具都可以在 Python 中使用（特别是您需要 urllib2 和 BeautifulSoup）。

```
#!/usr/bin/env python
import codecs
import json
import sys
import urllib
import urllib2

import bs4  # pip install beautifulsoup4

def extract_lyrics(page):
    """Extract lyrics text from given lyrics.wikia.com html page."""
    soup = bs4.BeautifulSoup(page)
    result = []
    for tag in soup.find('div', 'lyricbox'):
        if isinstance(tag, bs4.NavigableString):
            if not isinstance(tag, bs4.element.Comment):
                result.append(tag)
        elif tag.name == 'br':
            result.append('\n')
    return "".join(result)

# get artist, song to search
artist = raw_input("Enter artist:")
song = raw_input("Enter song:")

# make request
query = urllib.urlencode(dict(artist=artist, song=song, fmt="realjson"))
response = urllib2.urlopen("http://lyrics.wikia.com/api.php?" + query)
data = json.load(response)

if data['lyrics'] != 'Not found':
    # print short lyrics
    print(data['lyrics'])
    # get full lyrics
    lyrics = extract_lyrics(urllib2.urlopen(data['url']))
    # save to file
    filename = "[%s] [%s] lyrics.txt" % (data['artist'], data['song'])
    with codecs.open(filename, 'w', encoding='utf-8') as output_file:
        output_file.write(lyrics)
    print("written '%s'" % filename)
else:
    sys.exit('not found') 
```

### 例子

```
$ printf "Queen\nWe are the Champions" | python get-lyrics.py 
```

### 输出

```
我已经支付了会费
一次又一次
我已经完成了我的句子
但没有犯罪

和糟糕的错误
我做了几个
我的那份沙子被踢了 [...]
写“[女王] [我们是冠军]歌词.txt”

```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-11T23:28:58.233

如果您真的想打开浏览器等，请查看[selenium](http://pypi.python.org/pypi/selenium)。但这对于您的目的来说太过分了。Selenium 用于模拟按钮点击等，用于测试网站在各种浏览器上的外观等[。Mechanize](http://wwwsearch.sourceforge.net/mechanize/)对此并没有太大的杀伤力

您真正想要做的是了解浏览器（或任何其他程序）如何在幕后工作，即当您单击鼠标或在键盘上键入或点击`Save`时，程序在幕后做了什么？您希望 Python 代码执行的正是这些幕后工作。

所以，使用`urllib`, `urllib2`or [`requests`](http://pypi.python.org/pypi/requests/1.1.0)（或者见鬼，甚至[`scrapy`](http://scrapy.org/)）来请求一个网页（学习如何将 url 放在一起谷歌搜索或`GET`歌词网站的 php 请求）。Google 还有一个[搜索 API](https://developers.google.com/web-search/docs/)，您可以利用它来执行 google 搜索。

`xml`从页面请求中获得结果后，使用、`beautifulsoup`、等对其进行解析`lxlml`，并找到包含您所追求信息的请求结果部分。

现在您有了歌词，最简单的做法是打开一个文本文件并将歌词转储到其中并写入磁盘。但是如果你真的想用 MS Word 来做，那么`doc`在记事本或记事本++中打开一个文件并查看它的结构。现在，使用python构建一个类似结构的文档，其中内容将是下载的歌词。
如果此方法失败，您可以查看[pywinauto](http://pypi.python.org/pypi/pywinauto/0.4.0)等自动将文本粘贴到 MS Word 文档中并单击`Save`

引用：Matteo Italia，来自 OP 评论的 gddc

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T23:16:20.130

您应该查看一个`selenium`用于与 Web 浏览器交互的包

# linux - 在 Linux eclipse 和 MS Visual Studio 之间共享源代码

> ID：14288180
> 
> 赞同：1
> 
> 时间：2013-01-11T23:13:24.387
> 
> 标签：linux, eclipse, visual-studio, svn, windows-xp

我有一个 linux eclipse 项目签入我们公司的 svn。效果很好。

该项目旨在在 Windows 上进行交叉编译。

到目前为止，我只是在操作系统之间移动了源文件。但是，我想我想让 svn 为我做这件事。应该很简单，只需将 eclipse linux src 检出到 VS 项目目录中，对吗？错误的！

从 svn 中检查了正确的源，它工作正常。但是当我试图重新检查它时，我不断收到“提交未完成的*文件名*仍然存在冲突”错误。我什至什么都没改变！

做了一点检查。原来 linux src 目录几乎只是源代码和标题。在 MSVS 端，项目目录包含源代码和标头，但还包含一堆文件，这些文件由 VS 使用，名称如 projname.vcproj 等。

所以，我检查了一个临时目录，.\fred。检查 .\fred 回来。没问题。向 .fred、xxx.xxx 添加了一个新文件。入住报告：

```
svn: E200009: Commit failed (details follow):
svn: E200009: 'C:\Projects\fred\xxx.xxx' is not under version control 
```

让我想知道那些未提交的 Visual Studio 文件。

那么，这些文件是我的问题吗？他们是否破坏了提交操作？

作为替代解决方案，我正在考虑将 VS 文件添加到 svn 中的 src 目录中。如果 linux/eclipse 检查它们，我可以告诉 eclipse 忽略它们（我认为它会为我忽略它们）。对这种方法有什么想法或建议吗？

（顺便说一句，我在 linux 方面仍然有新的资源，所以任何被破坏的东西都可以安全地恢复。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:21:26.307

所以这是我目前正在工作的一个解决方案。我不确定它有多稳定。

警告：我使用的项目已经作为 MSVS 项目存在。

在 MSVS 解决方案目录中，将源目录（MSVS 喜欢源目录名称以匹配解决方案目录名称，因此这意味着源目录可能不命名为 src）重命名为解决方案中不涉及的内容，例如*temp*。

SVN 签出 src（eclipse 喜欢调用 source dirs *src*）。

cd 进入源目录。发出命令：

```
svn changelist msvs *.cpp *.h 
```

如果需要，添加 *.c。“msvs”是变更列表名称。它可以是你想要的任何东西。

这将为签出的目录创建一个更改列表。

*现在，将临时*目录中的剩余文件复制到源目录中。

当您需要进行签入时，请 cd 进入源目录并发出以下命令：

```
svn ci --changelist msvs 
```

笔记。你必须在 src 目录中才能工作。

# php - Zend Framework：控制器动作之后，视图渲染之前的方法

> ID：14288181
> 
> 赞同：0
> 
> 时间：2013-01-11T23:13:32.553
> 
> 标签：php, zend-framework

我是 Zend 框架的新手，对此找不到明确的答案。我本质上希望在控制器的页面逻辑*之后，但在呈现布局和视图之前执行一些代码。*

例如，我想自动刷新 flash 消息并将它们自动提供给布局/视图，这样我就不需要在每个控制器中都这样做。这显然需要在控制器代码执行后发生，因为它可能会添加消息。

```
$this->view->messages = $this->_helper->flashMessenger->getMessages(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:38:14.783

最简单的方法是使用控制器插件，请参阅[http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html](http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html)。该`postDispatch()`方法在您的控制器代码之后但在呈现页面之前运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:21:45.753

我只是使用：

```
public function init()
{
    if ($this->getHelper('FlashMessenger')->hasMessages()) {
        $this->view->messages = $this->getHelper('FlashMessenger')->getMessages();
    }
} 
```

我使用它`init()`，它工作正常。你可以使用它`postDispatch()`，`preDispatch()`或者`dispatchLoopShutdown()`如果你喜欢。[控制器插件](http://framework.zend.com/manual/1.12/en/zend.controller.plugins.html)不会出格，我只是还没有开始做一个。

# .net - 在 HTMLDocument 中查找特定文本的父 div

> ID：14288183
> 
> 赞同：0
> 
> 时间：2013-01-11T23:13:42.983
> 
> 标签：.net, html-agility-pack

我想返回包含特定文本的 div 的完整 InnerText。

例如：我正在 HTMLDocument (HTMLAgilityPack) 中搜索“hello world”，并希望返回找到“hello world”的 div 的完整 InnerText。

这是我尝试过的：

```
HtmlNode textNode = doc.DocumentNode.SelectNodes("//text()[contains(., 'hello world')]/..") 
```

这将返回找到特定文本的 HtmlNode。

现在我想获取 textNode 的第一个父 div 以返回完整的 InnerText。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:02:12.607

这会做我认为...

```
var nodes2 = doc.DocumentNode.SelectNodes("//div[contains(.//text(), 'Hello World')]"); 
```

这可能是一个更好的解决方案：

```
var nodes3 = doc.DocumentNode.SelectNodes("//text()[contains(., 'Hello World')]/ancestor::div[1]"); 
```

或使用 Linq-to-XML 表示法：

```
 var nodes =
            doc.DocumentNode.Descendants("div")
               .Where(
                   div =>
                   div.DescendantsAndSelf("text()").Where(text => text.InnerHtml.Contains("Hello World")).Any()) 
```

或者

```
 var nodes4 = from div in doc.DocumentNode.Descendants("div")
                     from text in div.DescendantsAndSelf("text()")
                     where text.InnerText.Contains("Hello World")
                     let firstParent = text.AncestorsAndSelf("div").First()
                     select firstParent; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:54:24.717

虽然我没有使用 HTMLAgilityPack 的经验，但这看起来确实像 XPath 语法。在这种情况下，“..”应该返回找到的元素的父元素。

我用这个网站来测试这个： http: [//ponderer.org/download/xpath/](http://ponderer.org/download/xpath/)

如果你输入

```
//li[contains(., 'about')]/../.. 
```

在文本框中，它将以绿色突出显示包含 ul 元素（包含 li 元素）的 div。

这是你要找的吗？

# javascript - 使 Javascript 代码等待用户在 jAlert 框上单击“确定”以提交

> ID：14288184
> 
> 赞同：0
> 
> 时间：2013-01-11T23:13:47.550
> 
> 标签：javascript, submit, alert

给定一个特定条件，我希望在用户继续之前弹出警报并向用户传达一条消息。但是我不确定如何做到这一点。现在，警报只是弹出来，您几乎没有时间在页面刷新之前阅读文本。有什么建议么？

```
if ((address != 'undefined' && googleValue != "ROOFTOP") &&
       !(address == "" && googleValue == "APPROXIMATE")) {
    jAlert("Exact request could not be processed, results have been returned at an approximate level.");
}

$("#Latitude").val(latlng.lat());
$("#Longitude").val(latlng.lng());
$("#formSearch").submit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T15:13:59.347

很久以前就有人问过这个问题，为了完整起见，这个功能现在存在于 jAlert 中。

您可以使用 jAlert 调用注册回调，以允许在单击确定按钮后执行代码。

```
if ((address != 'undefined' && googleValue != "ROOFTOP") &&
             !(address == "" && googleValue == "APPROXIMATE")) {
        jAlert("Exact request ...", function(answer) { 
                $("#Latitude").val(latlng.lat());
                $("#Longitude").val(latlng.lng());
                $("#formSearch").submit();
            });
        } 
```

# java - 检测 Windows 还是 Linux？

> ID：14288185
> 
> 赞同：143
> 
> 时间：2013-01-11T23:13:51.110
> 
> 标签：java, linux, windows, platform-detection

我正在寻求在 Windows 和 Linux 中运行一个通用的 Java 程序。

该程序需要在每个平台上做一些不同的事情。

那么我的 Java 程序如何/应该检测到它是在 Linux 还是在 Windows 下运行？

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-01-12T00:35:32.177

[apache commons lang](http://commons.apache.org/lang/)有一个类[SystemUtils.java](http://grepcode.com/file/repo1.maven.org/maven2/commons-lang/commons-lang/2.6/org/apache/commons/lang/SystemUtils.java) 你可以使用：

```
SystemUtils.IS_OS_LINUX
SystemUtils.IS_OS_WINDOWS 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2013-01-11T23:25:20.597

尝试：

```
System.getProperty("os.name"); 
```

[http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#getProperties%28%29)

* * *

## 回答 #3

> 赞同：61
> 
> 时间：2014-07-21T09:02:01.967

你可以使用这个有用的简单[类](https://gist.github.com/AMDG2/9c657ed4efe102313831)：

```
public class OSValidator {

    private static String OS = System.getProperty("os.name").toLowerCase();

    public static void main(String[] args) {

        System.out.println(OS);

        if (isWindows()) {
            System.out.println("This is Windows");
        } else if (isMac()) {
            System.out.println("This is MacOS");
        } else if (isUnix()) {
            System.out.println("This is Unix or Linux");
        } else if (isSolaris()) {
            System.out.println("This is Solaris");
        } else {
            System.out.println("Your OS is not supported!!");
        }
    }

    public static boolean isWindows() {
        return OS.contains("win");
    }

    public static boolean isMac() {
        return OS.contains("mac");
    }

    public static boolean isUnix() {
        return (OS.contains("nix") || OS.contains("nux") || OS.contains("aix"));
    }

    public static boolean isSolaris() {
        return OS.contains("sunos");
    }

    public static String getOS(){
        if (isWindows()) {
            return "win";
        } else if (isMac()) {
            return "osx";
        } else if (isUnix()) {
            return "uni";
        } else if (isSolaris()) {
            return "sol";
        } else {
            return "err";
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2015-05-08T19:06:50.223

我认为这是使用 Apache lang 依赖项来决定您通过 Java 以编程方式运行哪个操作系统的最佳方法

```
import org.apache.commons.lang3.SystemUtils;

public class App {
    public static void main( String[] args ) {
        if(SystemUtils.IS_OS_WINDOWS_7)
            System.out.println("It's a Windows 7 OS");
        if(SystemUtils.IS_OS_WINDOWS_8)
            System.out.println("It's a Windows 8 OS");
        if(SystemUtils.IS_OS_LINUX)
            System.out.println("It's a Linux OS");
        if(SystemUtils.IS_OS_MAC)
            System.out.println("It's a MAC OS");
    }
} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-08-28T05:29:29.967

您可以使用“system.properties.os”，例如：

```
public class GetOs {

  public static void main (String[] args) {
    String s = 
      "name: " + System.getProperty ("os.name");
    s += ", version: " + System.getProperty ("os.version");
    s += ", arch: " + System.getProperty ("os.arch");
    System.out.println ("OS=" + s);
  }
}

// EXAMPLE OUTPUT: OS=name: Windows 7, version: 6.1, arch: amd64 
```

以下是更多详细信息：

*   [http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

# c++ - 查询中的 SQLite Int 到 Hex 和 Hex 到 Int

> ID：14288186
> 
> 赞同：7
> 
> 时间：2013-01-11T23:13:54.987
> 
> 标签：c++, visual-c++, sqlite

我有一些以表格形式提供给我的数字数据`INTEGER`。我将它与其他数据一起插入到 SQLite 中，但是当我写出来时，`INTEGER`数字需要是`Hex`带有前导零的 8 位数字。

## 前任。

**输入**

```
400 
800 
25 
76 
```

**输出**

```
00000190 
00000320 
00000019 
0000004C 
```

最初我在读入它们并`TEXT`像这样存储它们时正在转换它们。

```
stringstream temp;
temp << right << setw(8) << setfill('0') << hex << uppercase << VALUE; 
```

`INTEGER`但是生活从来都不是一件容易的事，现在我必须以not的形式创建第二个输出`HEX`。有没有办法将`INTEGER`数字转换为SQLite 中的数字`HEX`或`HEX`数字？`INTEGERS`

我想避免在 SQLite 中使用 C++ 来更改数据，因为我编写了一些修道院导出函数，它们获取查询结果并将它们打印到文件中。如果我需要在查询返回期间触摸数据，我将无法使用它们。

我查看了`HEX()`SQLite 中的函数，但没有得到想要的结果。我可以做一个函数还是效率很低？我正在对一个非常大的数据集执行此操作，因此应该避免任何昂贵的事情。

注意：我在 Visual Studios 2010 中使用 SQLites C/C++ 接口。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-07-31T12:57:08.673

您可以使用 sqlite3 printf() 函数：

```
CREATE TABLE T (V integer);
insert into T(V) values(400), (800), (25), (76);
select printf('%08X', V) from T; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T14:03:09.647

您可以使用`sqlite3_create_function`. 看一个[例子](http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T03:56:26.437

好吧，这不是我最喜欢的答案，我决定在表中添加一个作为 INTEGER 值的列。

如果有人找到更好的方法来做到这一点，我会全力以赴。

**编辑：**

在实现了这个答案并查看了它对程序的影响之后，这似乎是一种在不增加运行时负载的情况下获取数据的好方法。这个答案确实增加了数据库的大小，但它不需要任何额外的处理来从 SQLite 获取值，因为这只是在查询中获取不同的列。

另外因为我有这些值开始，这个答案通过将它们添加到表格中而不是稍后处理来获得我在程序早期通过的值，从而节省了**巨大的成本。**

# azure - Windows Azure SQL 报告门户在哪里？

> ID：14288188
> 
> 赞同：1
> 
> 时间：2013-01-11T23:14:26.310
> 
> 标签：azure, azure-sql-reporting

根据[Windows Azure SQL Reporting Services](http://msdn.microsoft.com/en-us/library/hh403967.aspx)的 MSDN 文档，报告门户应该可以从主 Azure 门户访问：

> Windows Azure 管理门户包括 Windows Azure SQL 数据库、SQL 报告和 Windows Azure 上可用的其他服务的门户。在门户主页中，单击 Reporting 以启动 SQL Reporting 管理门户

这似乎是指旧的 Azure 门户。无论如何，我的门户网站没有这样的链接。我所看到的都是

*   网站
*   虚拟机器
*   云服务
*   sql数据库
*   贮存
*   网络
*   服务总线
*   媒体服务
*   活动目录
*   附加组件
*   设置

我已经使用搜索功能搜索 Azure 门户，检查了我的 SQL Azure 数据库服务器配置，并且通常浏览了很长一段时间，但我找不到任何访问报告门户的方法。如何到达那里和/或激活此功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:19:21.050

Windows Azure 门户当前使用新的 HTML 版本。您必须切换到旧的 Silverlight 版本。

要返回旧门户，您必须单击您的帐户（右上角）并单击“上一个门户”

![以前的门户](../Images/75bf191a19bac0609ef850769865fc2f.png)

## 编辑

`Previous portal`选项不再存在。Windows Azure 正在准备全新的门户。与当前类似，它将使用 HTML5 和 JavaScript，而不是[Silverlight](https://www.microsoft.com/silverlight/)技术。

![Azure 预览门户](../Images/271043dadbf8b849a23a072955134787.png)

# r - 情节内情节

> ID：14288194
> 
> 赞同：10
> 
> 时间：2013-01-11T23:14:37.460
> 
> 标签：r, graph, plot

我有情节1

```
curve(exp(x), from=1, to=5, lwd=5)
curve(150-exp(x), from=1, to=5, lwd=5, col="darkblue",add=T) 
```

在里面我想添加以下情节2

```
par(mar=c(7,7,1,1))
curve(exp(x), from=1, to=5, lwd=7, xlab="chi", ylab="exp(x)", cex.lab=4,axes=F)
axis(1, labels=NA,at=c(0,5))
axis(2, labels=NA,at=c(0,150))
text(1,120,"Alpha",adj=c(0,0),cex=3)
text(3.5,10,"Beta",adj=c(0,0),cex=3) 
```

为了获得以下

![结合](../Images/c85c6ee3f814842c00ca57d671be59c0.png)

我还想让情节 2 透明，这样如果情节 2 后面有情节 1 的某些元素，它们仍然会显示（就像蓝线一样）。同样重要的是情节 2 的较大标签以及它的轴上没有标签和刻度。

这可能吗？请仅基于 R 解决方案（无 ggplot2 / 无 lattice）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T00:58:32.380

好的，这是一个示例，我将其绘制为 10 x 10 英寸的 pdf。（使用 et al. 令人沮丧的部分原因`par(fig = )`是它们的效果在很大程度上取决于绘图设备的大小。）

* * *

**编辑添加一些解释：**

基本图形绘图参数`par("fig")`将图形区域的位置描述/设置为“绘图区域”（通常是整个设备，对于单个图形绘图）的一部分。它采用长度为 4 的向量，其形式由和`c(xmin, xmax, ymin, ymax)`之间的数字（比例）组成。`0``1`

在这里，我使用`grconvertX()`and`grconvertY()`将 xy 位置以较大图自己的（aka `"user"`）坐标系表示的坐标系转换为`"ndc"`（标准化设备坐标）坐标系。坐标系对`"user"`人类用户更友好，而. 这些调用只是为了在它们之间执行翻译。`"ndc"``par("fig")``grconvert*()`

```
## pdf("fig-in-fig.pdf", width=10, height=10)
curve(exp(x), from=1, to=5, lwd=5)
curve(150-exp(x), from=1, to=5, lwd=5, col="darkblue",add=T)

## Here's the bit I added.
par(fig = c(grconvertX(c(1, 3), from="user", to="ndc"),
            grconvertY(c(50, 125), from="user", to="ndc")),
    mar = c(4,6,1,1),
    new = TRUE)

curve(exp(x), from=1, to=5, lwd=7, xlab="chi", ylab="exp(x)", cex.lab=4,axes=F)
axis(1, labels=NA,at=c(0,5))
axis(2, labels=NA,at=c(0,150))
text(1,120,"Alpha",adj=c(0,0),cex=3)
text(3.5,10,"Beta",adj=c(0,0),cex=3)
## dev.off() 
```

![在此处输入图像描述](../Images/b6434f407a619495fba1f180d0ac5f55.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-11T23:58:18.513

这是一种方法：

```
curve(exp(x), from=1, to=5, lwd=5)
curve(150-exp(x), from=1, to=5, lwd=5, col="darkblue",add=T)
par(new=TRUE)
par(oma=c(1,4,5,1))
par(mfcol=c(2,2), mfg=c(1,1))
par(mar=c(7,7,1,1))
curve(exp(x), from=1, to=5, lwd=7, xlab="chi", ylab="exp(x)", cex.lab=2,axes=F)
axis(1, labels=NA,at=c(0,5))
axis(2, labels=NA,at=c(0,150))
text(1,120,"Alpha",adj=c(0,0),cex=1.5)
text(4,10,"Beta",adj=c(0,0),cex=1.5) 
```

给我这个：

![在此处输入图像描述](../Images/0f18f9a81274e669318bb0032da4f78c.png)

使用各种选项（尤其是`oma`和`mar`）将结果格式化为您喜欢的格式。

# objective-c - 从 UITextField 获取 NSString

> ID：14288202
> 
> 赞同：-2
> 
> 时间：2013-01-11T23:15:36.123
> 
> 标签：objective-c, variables, nsstring, uitextfield

我正在尝试为自己编写一个小体重观察者积分计算器应用程序。我知道你可以从 appstore 下载一个，但我正在尝试学习 Objective-c，并认为这将是一个相当简单的第一个应用程序。我只想使用输入到文本框中的文本并将其保存为变量并使用所述变量通过 intValues 执行基本数学运算。我试过使用 UITextField 的“文本”属性但没有成功，有人可以帮忙告诉我我在这里做错了什么吗？好吧，这很尴尬……看来我忘了告诉你问题出在哪里。我已经将我收到的错误包含在相应的行中。我从这些错误中得到的是我不应该使用“NSString”来定义我的变量，也许是“int”？

.h 文件：

```
#import <UIKit/UIKit.h>

@class FirstViewController;
NSString*txtProtein = nil;
NSString *txtCarbs = nil;
NSString *txtFat = nil;
NSString *txtFiber = nil;
NSString *txtPoints = nil;
NSString *txtproteinCalc = nil;
NSString *txtcarbCalc = nil;
NSString *txtfatCalc = nil;
NSString *txtfiberCalc = nil;
@interface AppDelegate : NSObject
<UIApplicationDelegate> {
    UIWindow *window;
    FirstViewController
*viewController;

    UITextField *protein;
    UITextField *carbs;
    UITextField *fat;
    UITextField *fiber;
    UITextView *points;
}

@property (nonatomic, retain)
IBOutlet UIWindow *window;
@property (nonatomic, retain)
IBOutlet FirstViewController *viewController;

@end 
```

和 .m 文件：

```
#import "FirstViewController.h"
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window;
@synthesize viewController;

#pragma mark -
#pragma mark Application lifecycle 

- (BOOL)application:(UIApplication *)application
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    //Here is where all of the textboxes are defined.
    //All of the strings are in the viewController.h

    //This is the protein part
    txtProtein = [[[UITextField alloc] initWithFrame:CGRectMake(10.0, 10.0, 50.0, 25.0)]; (expected identifier)
    txtProtein.backgroundColor = [UIColor whiteColor]; (property "backgroundcolor" not found on object of type 'NSString')
    txtProtein.placeholder = @"Protein"; (property "placeholder" not found on object of type 'NSString')
    [viewController.view addSubview:txtProtein]; (property 'view' can not be found in forward class object "FirstViewController")

    //This is the carbs part
    txtCarbs = [[[UITextField alloc] initWithFrame:CGRectMake(30.0, 10.0, 50.0, 25.0)];
    txtCarbs.backgroundColor = [UIColor whiteColor];
    txtCarbs.placeholder = @"Carbs";
    [viewController.view addSubview:txtCarbs];

    //This is the Fat part
    txtFat = [[[UITextField alloc] initWithFrame:CGRectMake(50.0, 10.0, 50.0, 25.0)];
    txtFat.backgroundColor = [UIColor whiteColor];
    txtFat.placeholder = @"Fat";
    [viewController.view addSubview:txtFat];

    //This is the Fiber
    txtFiber = [[[UITextField alloc] initWithFrame:CGRectMake(70.0, 10.0, 50.0, 25.0)];
    txtFiber.backgroundColor = [UIColor whiteColor];
    txtFiber.placeholder = @"Fiber";
    [viewController.view addSubview:txtFiber];

    //Total Points
    txtPoints = [[[UITextField alloc] initWithFrame: CGRectMake(150.0, 10.0, 50.0,           25.0)]autorelease];
    txtPoints.backgroundColor = [UIColor greenColor];
    txtPoints.editable = NO;
    [viewController.view addSubview:txtPoints];

    //Protein divided by 10.9375
    txtproteinCalc = [txtProtein.text intValue] / [10.9375];

    //Carbs divided by 9.2105
    txtcarbCalc = [txtCarbs.text intValue] / [9.2105];

    //Fat divided by 3.8889
    txtfatCalc = [txtFat.text intValue] / [3.8889];

    //Fiber divided by 12.5
    txtfiberCalc = [txtFiber.text intValue] / [12.5];

    [[NSNotificationCenter defaultCenter] addObserver:self

selector:@selector(calculatePoints)
name:UITextFieldTextDidChangeNotification
                                               object:nil];
    //Add the view controller's view to the window and display
    [self.window addSubview:viewController.view];
    [self.window makeKeyAndVisible];

    //Make keyboard show up in the Protein (The first) box
    [txtProtein becomeFirstResponder];

    return YES;
}

#pragma mark -
#pragma mark Memory management

- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    /*
     Free up as much Memory as possible by purging cached data objects that can be     recreated (or reloaded from disk) later/
     */
}

-(void)dealloc {
    [txtProtein release];
    [txtFiber release];
    [txtFat release];
    [txtCarbs release];
    [txtPoints release];
    [viewController release];
    [window release];
    [super dealloc];
}

#pragma mark -
#pragma mark Other Methods

-(void)calculatePoints {
     NSLog(@"Calculating FoodTrakr Value...");
    txtPoints.text = @"";
    if (txtProtein.text.length > 0 && [txtProtein.text intValue]>0 && txtFiber.text.length      >0 && [txtFiber.text intValue]>0 && txtFat.text.length >0 && [txtFat.text intValue]>0 && txtCarbs.text.length >0 && [txtCarbs.text intValue]>0
        )
    {
        int Points = [txtproteinCalc.text intValue] + [txtcarbCalc.text intValue] + [txtfatCalc.text intValue] - [txtfiberCalc.text intValue];
        txtPoints.text = [[NSNumber numberWithInt:points] stringValue];
    }
}

@end 
```

提前感谢您的帮助！另外，如果你们有任何推荐的用于学习目标 c 的书籍，我已经阅读了一些书，但我知道我显然需要阅读更多内容，如果你能留下任何帮助你学习的建议，那就太棒了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:12:02.517

坦率地说，发布的代码有很多严重的问题。让我们从直接的编译错误开始。

你有：

```
txtProtein = [[[UITextField alloc] initWithFrame:CGRectMake(10.0, 10.0, 50.0, 25.0)]; (expected identifier)
txtProtein.backgroundColor = [UIColor whiteColor]; (property "backgroundcolor" not found on object of type 'NSString')
txtProtein.placeholder = @"Protein"; (property "placeholder" not found on object of type 'NSString')
[viewController.view addSubview:txtProtein]; (property 'view' can not be found in forward class object "FirstViewController") 
```

第一行有一个太多的左括号。另一个主要问题是您正在创建 a`UITextField`但您将其分配给 a 的变量`NSString`。而不是`txtProtein`您应该使用`protein`具有属性类型的变量。所以代码应该是：

```
protein = [[UITextField alloc] initWithFrame:CGRectMake(10.0, 10.0, 50.0, 25.0)];
protein.backgroundColor = [UIColor whiteColor];
protein.placeholder = @"Protein";
[viewController.view addSubview:protein]; 
```

您在此代码中一遍又一遍地重复相同的问题。

下一个大问题是为什么所有这些代码都在您的应用程序委托中？大多数（如果不是全部）代码都属于该`FirstViewController.m`文件。您的应用程序委托不应该负责设置视图控制器。让视图控制器自行设置。

接下来，为什么你有所有这些全局变量？

我建议你先找到一些关于 Objective-C 编程的好教程，然后再找到一些关于 iOS 应用程序开发的好教程。

# jquery - 位置：固定在侧边栏中 - 如何在页脚之前停止它？

> ID：14288204
> 
> 赞同：1
> 
> 时间：2013-01-11T23:15:56.463
> 
> 标签：jquery

我在我的侧边栏中使用 jQuery 作为浮动小部件 - 链接到我的帖子[http://www.product-investigation.com/fat-loss-factor-review](http://www.product-investigation.com/fat-loss-factor-review) - 如果你向下滚动，你会明白我的意思..我想要在页脚之前在侧边栏中停止我的 adsense 小部件..感谢您的帮助 :)

我的 javascript

```
<script>
$(document).ready(function() {
        function isScrolledTo(elem) {
            var docViewTop = $(window).scrollTop(); //num of pixels hidden above current screen
            var docViewBottom = docViewTop + $(window).height();
            var elemTop = $(elem).offset().top; //num of pixels above the elem
            var elemBottom = elemTop + $(elem).height();
            return ((elemTop <= docViewTop));
        }
        var catcher = $('#catcher');
        var sticky = $('#sticky');
        $(window).scroll(function() {
            if(isScrolledTo(sticky)) {
                sticky.css('position','fixed');
                sticky.css('top','100px');
            }
            var stopHeight = catcher.offset().top + catcher.height();
            if ( stopHeight > sticky.offset().top) {
                sticky.css('position','absolute');
                sticky.css('top',stopHeight);
            }
        });
    });
    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:18:41.453

I've updated your [jsfiddle](http://jsfiddle.net/k56yR/91/). I changed something in your conditions:

```
return ((elemTop <= docViewTop || elemTop >= docViewTop)); //Changed your return in isScrolledTo 
```

Explanation: The code that I added below will position the `sticky` div at the top of the `footer`, If I use your original `return` statement and scroll up, the `sticky` div's position will still be `absolute` on top of the `footer`. It's because your `return` statement will only check if the `top` position of the element is less or equal to the `scrollTop()` value, which can only be used during `scrolldown`. In my case where the `sticky` is already at the bottom part, the `isScrolledTo()` should also check if the `top` of the `sticky` div is greater or equal to the `scrollTop()` value.

and added some things in the `.scroll()`

```
$(window).scroll(function() {
    if(isScrolledTo(sticky)) {
      sticky.css('position','fixed');
      sticky.css('top','2px');
    }
    var stopHeight = catcher.offset().top + catcher.height();
    var stickyFoot = sticky.offset().top + sticky.height();

    if(stickyFoot > footTop -10){ //Check if sticky's foot passes footer's top
      console.log("Top of Footer");
      sticky.css({
        position:'absolute',
        top: (footTop - 20) - sticky.height()
      });
    } else {
      if ( stopHeight > sticky.offset().top) {
        console.log("Default position");
        sticky.css('position','absolute');
        sticky.css('top',stopHeight);
      }
    }
}); 
```

Hope it helps.

# php - jquery 文件上传小部件

> ID：14288205
> 
> 赞同：0
> 
> 时间：2013-01-11T23:15:58.520
> 
> 标签：php, jquery-ui, jquery-file-upload

我正在尝试使用 jquery 文件上传小部件。我已将演示代码复制到我的网站。当它运行时，我收到以下错误（根据 Firebug）：

“网络错误：500 内部服务器错误 - [http://24.xxx.xxx.xxx/server/php/](http://24.xxx.xxx.xxx/server/php/) ”

我要上传的文件会毫无问题地转储到 files/ 目录中。httpd 错误日志没有列出任何错误。如果我直接从浏览器运行 server/php/index.php，我会看到格式正确的 JSON 字符串。

我已将所有 URL 更改为指向我的网站，而不是 jqueryupload.apppoint.com。

任何指导将不胜感激。我正在运行 Linux、Apache 2.4、PHP 5.4.10。

帖子数据为：

```
-----------------------------314262861723757 Content-Disposition: form-data; name="files[]"; filename="004.JPG" Content-Type: image/jpeg ÿØÿà�JFIF��H�H��ÿá&.Exif��MM�*�������

(lots of this)

$óîxÕéº4kq¡ÞÚj7¯i34à)13�Çn{ó^}­@·öåå[k+÷@Úã`ÿ�­MNYEÁSGÿÙ -----------------------------314262861723757-- 
```

index.php 代码是：

```
<?php
/*
 * jQuery File Upload Plugin PHP Example 5.14
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
error_reporting(E_ALL | E_STRICT);
require('UploadHandler.php');
$upload_handler = new UploadHandler(); 
```

Uploadhandler.php 未修改演示中提供的原始版本，可在此处获得：[https ://github.com/blueimp/jQuery-File-Upload#download](https://github.com/blueimp/jQuery-File-Upload#download)

**编辑：附加信息。** 我可以毫无问题地上传非图像文件。只有在上传图像文件时才会出现问题。/server/php/thumbnails 目录具有读写权限，由 daemon 用户拥有。我在代码中看到对 file.thumbnail_url 的引用，但我在哪里看不到 index.html 程序或支持的 javascript 程序中定义的变量。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-05-03T08:32:43.697

你需要 GD 库：

```
apt-get install php-gd 
```

# c# - Log4Net 多个项目

> ID：14288206
> 
> 赞同：9
> 
> 时间：2013-01-11T23:16:05.013
> 
> 标签：c#, visual-studio-2010, log4net, mstest, log4net-configuration

我在我们的一个解决方案中使用*log4net*。该解决方案包含多个项目，每个项目都是一个*单元测试*项目。我正在使用本文中描述的方法[将](http://blog.falafel.com/Blogs/josh-eastburn/2012/04/10/using-log4net-with-multi-project-solutions)日志记录添加到各种项目中。

我正在使用滚动文件附加程序将所有测试记录到一个基于大小滚动的日志文件中。

我的每个项目都成功记录到日志文件中，但是，如果我从多个项目*（多个测试程序集）*运行测试，我只会看到第一个程序集的日志记录。

例如，如果我从*`Project_A`*和运行测试*`Project_B`*，我只会看到来自的日志语句*`Project_A`*（假设`Project_A's`测试在测试运行中首先运行）

我已经检查过的事情：

*   我在每个项目中都包含了配置文件作为链接

*   我已经添加*`[assembly: log4net.Config.XmlConfigurator(ConfigFile = "Log4Net.config", Watch = true)]`*到每个项目的程序集文件中。

*   我已经分别测试了每个项目，以确保它们在自己运行时成功登录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-14T17:52:18.337

弄清楚了这个问题，并认为我会为处于同样困境的其他人报告。

每个项目的链接配置文件的属性需要从 Copy Never 更改为 Copy If Newer。一旦我进行了这个更改，所有项目都按预期记录到同一个文件中。

# sublimetext2 - 将选项卡弹出到单独窗口的键盘快捷键是什么？

> ID：14288209
> 
> 赞同：1
> 
> 时间：2013-01-11T23:16:17.163
> 
> 标签：sublimetext2

在 Sublime Text 2 中，将选项卡弹出到单独窗口的键盘快捷键是什么？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2013-01-11T23:25:06.960

不幸的是，没有一个。您的操作系统可能会提供能够创建它的功能 - 例如 MacOSX 中的系统偏好设置 > 键盘快捷方式 > 应用程序快捷方式。

# java - 空光标返回

> ID：14288215
> 
> 赞同：0
> 
> 时间：2013-01-11T23:16:31.907
> 
> 标签：java, android

我正在尝试开发一个 android 程序，让用户从列表菜单中选择一个项目......然后将此项目的 ID 传递给第二个类的意图，然后将 ID 存储在一个变量中并输入到一个 DBhelper 方法，用于获取一个人的姓名和年龄，并在 XML 中的相关 EditTexts 中显示此数据。

一切正常，直到我尝试开始第二个意图。我收到以下错误：

```
01-11 22:21:28.448: E/AndroidRuntime(274): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.example.sqliteexample/com.example.sqliteexample.DisplayContents}: android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

请注意，我已经初始化了以“0”传递的“id”变量。这不是被传递给类方法来获取名称和年龄吗？

希望有人可以推动我朝着正确的方向前进。

再次

这是我的代码。我的数据库助手类中的 2 种方法从数据库中获取名称和年龄：

```
public String showData(long id) {

        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_HOTNESS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + id, null, null, null, null);
        if(c != null)
        {
            // move to the selected row
        c.moveToFirst();
        String namePass = c.getString(1);
        return namePass;
        }
        return null;

        }

    public String showAge(long id) {

        String [] columns = new String[]{KEY_ROWID, KEY_NAME, KEY_HOTNESS};
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + id, null, null, null, null);
        if(c != null)
        {
            // move to the selected row
        c.moveToFirst();
        String agePass = c.getString(2);
        return agePass;
        }
        return null; 
```

列表视图的类，传递 id 变量并启动意图：

```
public void onListItemClick(ListView list, View v, int list_posistion, long item_id)
{

    long id = item_id;
    Intent i = new Intent("com.example.sqliteexample.DisplayContents");
    i.putExtra("passID", id);
    startActivity(i);
} 
```

从意图打开并在 onCreate 上显示名称和年龄的最后一个类：

```
package com.example.sqliteexample;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.content.Intent;

public class DisplayContents extends Activity implements OnClickListener  {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

setContentView(R.layout.displaycontents);

long id = 0;
EditText namePassed;
EditText agePassed;

namePassed = (EditText) findViewById(R.id.nameShow);
agePassed = (EditText) findViewById(R.id.ageShow);
HotOrNot display = new HotOrNot(this, null, null);

    Bundle extras = getIntent().getExtras(); 
    if (extras != null) {
        id = extras.getLong("passedID"); 
    }
    display.open();
    String returnedName = display.showData(id);
    String returnedAge  = display.showAge(id);

    namePassed.setText(returnedName);
    agePassed.setText(returnedAge); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:21:39.913

你能发现你的错误吗？

```
 i.putExtra("passID", id);
 id = extras.getLong("passedID"); 
```

将`Extra`-names 存储为常量以消除拼写错误可能是明智之举

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:46:40.810

除了[@Ole](https://stackoverflow.com/users/742660/ole)对额外内容的评论之外，您可能会发现如果您获得一个空的`Cursor`（即，您得到一个零行的行），您会接触到边界异常，因为您的 ID 是不正确）。

为了防止这种情况，最好检查 A）游标中的行数，或 B）任何`.move*()`操作的结果。

如果您预计只有一行（例如从唯一 ID 查找），那么以下内容就足够了：

```
Cursor c = someDatabase.query(...);
if (c != null && c.moveToFirst()) { // null check (if error), and valid row check
    // Your row operation
} 
```

否则，对于多行，您将需要另一种方法（有很多，这是一个相当简单的方法）：

```
Cursor c = someDatabase.query(...);
if (c != null) { // Will hit if there is an error
    if (c.moveToFirst()) { // If we have rows
        do {
            // Your row operation
        } while (c.moveToNext()); // Step into next row
    }
} 
```

# uiviewcontroller - 从 UIKit/Cocoa-Touch 运行 Cocos2D 场景，但场景没有接收到触摸输入

> ID：14288216
> 
> 赞同：0
> 
> 时间：2013-01-11T23:16:43.060
> 
> 标签：uiviewcontroller, cocos2d-iphone, uikit

弄清楚如何让 UIKit 和 Cocos2D 一起工作。我正在从 UITableViewCell 启动我的游戏场景（应该使用 Cocos2D）。问题是，运行此方法后...

```
// MainViewController.h

MainViewController : UIViewController <CCDirectorDelegate,
                                      UITableViewDelegate, 
                                      UITableViewDataSource, 
                                      GKGameCenterControllerDelegate>

// MainViewController.m

-(void)launchGamePlay {
    [self.tableView removeFromSuperview];

    // ... also removing buttons and other assets with removeFromSuperview

    [mainNavBar removeFromSuperview];
    [underView removeFromSuperview];

    CCTransitionRotoZoom *transition = [CCTransitionRotoZoom transitionWithDuration:1.0 scene:[CCGamePlayLayer node]];
    [[CCDirector sharedDirector] runWithScene:transition];
} 
```

...我无法在显示的 CCGamePlayLayer 上接收触摸输入。我已经尝试在呈现视图控制器和呈现的 cocos 场景中使用 zOrders，但无济于事。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:22:14.733

您的 MainViewController 很可能正在接收触摸输入。

覆盖MainViewController中的各种touchesBegan/Moved/Ended方法，转发给cocos2d的视图：

```
[[CCDirector sharedDirector].view touchesBegan:touches event:event]; 
```

# php - MySQL 无法识别韩文字符

> ID：14288218
> 
> 赞同：1
> 
> 时间：2013-01-11T23:17:07.680
> 
> 标签：php, mysql, encode

我需要将韩文文本插入到我的数据库中，这是通过 url 获取请求来的。但是，MySQL 无法识别插入的值。请，需要快速指导。谢谢。

```
setlocale(LC_CTYPE, 'ko_KR.utf8');
mb_internal_encoding("UTF-8");    
mb_http_output('utf-8');   

$p_text = rawurldecode($_GET["text"]); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T23:22:16.780

在您的 mysql 连接之后立即进行此查询

```
$mysqli->query("SET NAMES 'UTF8'"); 
```

或者

```
mysql_query("SET NAMES 'UTF8'"); 
```

还要确保您的字段具有`utf8_general_ci`排序规则

# java - Java中的开关

> ID：14288221
> 
> 赞同：1
> 
> 时间：2013-01-11T23:17:36.290
> 
> 标签：java, string, variables, switch-statement

前几天我在练习，我遇到了这个错误，带有一个用于切换的字符串：

```
Cannot switch on a value of type String. Only int values or enum constants are permitted 
```

我不确定如何解决这个问题，所以我来这里寻求帮助。我正在使用 Eclipse。这是源代码，第二个变量（大写）是我得到错误的地方：

```
public class Switch {
public static void main(String[] args) {

    Scanner input = new Scanner(System.in);

    System.out.println("Please enter a command: ");
    String VARIABLE = input.nextLine();

    switch (VARIABLE) {
    case "start":
        System.out.println("Machine started!");
        break;

    case "stop":
        System.out.println("Machine stopped!");
        break;

    default:
        System.out.println("Invalid command");
    }

}
} 
```

如果有人可以帮助我，那就太好了。我对此比较陌生，所以我不确定这是否有意义。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T23:18:20.073

```
switch (VARIABLE) { 
```

`switch``Strings`从 Java 7 开始支持with 。我猜您使用的是较低版本的 java，您需要将您的 java 版本升级到 7（或）从 switch 中删除 String 并使用支持的类型。

这是[关于 switch 语句的 oracle 教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T23:22:32.250

除了 Nambari 的回答：当然，您可以将 if-else 构造与字符串一起使用，以使字符串具有类似开关的逻辑。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-11T23:45:03.240

您的代码是正确的，但是在 java7 (jdk1.7) 中引入了对 switch-case 构造的 String 支持，因此您的错误意味着您的 java 版本较旧，您必须对其进行升级。如果您不想升级 Java，则需要使用多个 if-else 构造：

```
[...]
if(VARIABLE.equals("start")){
    System.out.println("Machine started!");
} else if(VARIABLE.equals("stop")){
    System.out.println("Machine stopped!");
} else {
    System.out.println("Invalid command");
}
[...] 
```

# android - Android YouTube 播放器 API + compatlib

> ID：14288224
> 
> 赞同：0
> 
> 时间：2013-01-11T23:17:47.240
> 
> 标签：android, youtube-api

由于[Android YouTube Player API](http://apiblog.youtube.com/2012/12/no-webview-required-with-native-youtube.html)需要 Activity 来扩展[YouTubeBaseActivity ，因此除了全屏播放器或使用](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeBaseActivity)[compatlib](http://developer.android.com/tools/extras/support-library.html)的 YouTube Intent 之外，很难支持任何内容。

是否可以使用嵌入式[YouTubePlayerView](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView)或[YouTubePlayerFragment](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerFragment)但仍向后兼容 FroYo（即使用 compatlib 或 ActionBarSherlock）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T03:51:43.950

如果您查看[示例应用程序](https://developers.google.com/youtube/android/player/sample-applications)，您会发现它使用了兼容性库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-07T10:18:26.170

无需扩展**YouTubeBaseActivity**。相反，您可以使用 YouTubePlayerSupportFragment 来实现相同的目的。通过这样做，您可以使用 compatlibs。

这是示例：

```
public class HomeScreen extends AppCompatActivity implements YouTubePlayer.OnInitializedListener {

private  YouTubePlayer mYouTubePlayer;
private final String VIDEO_CODE="repalce with video code";
private final String API_KEY="replace with your api key ";
private  YouTubePlayerSupportFragment mYouTubePlayerSupportFragment;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);
    youTubePlayerSetup();
}

private void youTubePlayerSetup(){

    mYouTubePlayerSupportFragment =
            (YouTubePlayerSupportFragment) getSupportFragmentManager().findFragmentById(R.id.youtube_player_fragment);
    mYouTubePlayerSupportFragment.initialize(API_KEY, this);
}

@Override
public void onInitializationSuccess(YouTubePlayer.Provider provider, YouTubePlayer youTubePlayer, boolean b) {
    if (!b) {
        mYouTubePlayer = youTubePlayer;
        mYouTubePlayer.loadVideo(VIDEO_CODE);
}}

@Override
public void onInitializationFailure(YouTubePlayer.Provider provider, YouTubeInitializationResult youTubeInitializationResult) {

}} 
```

并在您的 {layout}.xml 中将 YoutubePlayerView 替换为片段。

```
 <?xml version="1.0" encoding="utf-8"?>
<android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ui.activity.HomeScreen">
    <fragment
        android:id="@+id/youtube_player_fragment"
        android:name="com.google.android.youtube.player.YouTubePlayerSupportFragment"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />
</android.support.constraint.ConstraintLayout> 
```

# django - Django - 如何将电子邮件添加到所需的东西

> ID：14288232
> 
> 赞同：0
> 
> 时间：2013-01-11T23:19:12.947
> 
> 标签：django, django-forms, django-views

我创建注册表：

```
#urls.py
from django.conf.urls import patterns, url
from django.views.generic import TemplateView
from account.views import Register

urlpatterns = patterns('',
    url(r'^register/$', Register.as_view(template_name='account/register.html')),
)

#views.py
from django.views.generic import CreateView
from django.contrib.auth.models import User

class Register(CreateView):
    model = User
    success_url = '/account/' 
```

我有一个问题：如何添加该电子邮件（现在我必须输入用户名、密码和 2 次时间）。

@edit
如何“修复”密码？当我创建用户（以这种形式）然后转到管理面板时，在用户中我看到“无效的密码格式或未知的哈希算法。”。我怎样才能修复这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:40:35.937

不需要 email 的原因是因为您使用的是 a `ModelForm`，它从底层`User`模型中获取了很多线索。具体来说，该`required=True`属性不存在于`email`模型的字段中。

一种解决方案是创建您自己的具有必要属性的表单，可能通过使用 ModelForm 并添加必需的电子邮件字段。

另一种解决方案，可能是更好的解决方案，是使用Aamir Adnan 在对您的问题的评论中提到的[django-registration之类的东西。](https://bitbucket.org/ubernostrum/django-registration)它会为您简化很多事情。

就您`repair password`而言，您无法将密码设置为原始字符串值，就像您对`CreateView`. 要设置密码，您必须调用`user.set_password(raw_string)`which 将为您处理散列和加盐。看看内置的[UserCreationForm](https://github.com/django/django/blob/master/django/contrib/auth/forms.py#L61)是如何工作的，如果您决定自己构建表单，而不是使用库（您不应该），请尝试模仿它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:06:08.937

要解决这两个问题，您可以使用如下形式：

```
class UserCreationForm(forms.ModelForm):    
    class Meta:
        model = User

    def __init__(self, *args, **kwargs):
        super(UserCreationForm).__init__(*args, **kwargs)
        self.fields['email'].required = True

    def save(self, commit=True):
        user = super(UserCreationForm, self).save(commit=False)
        user.set_password(self.cleaned_data["password"])
        if commit:
            user.save()
        return user

class Register(CreateView):
    model = User
    form_class = UserCreationForm
    success_url = '/account/' 
```

但是还会有其他问题，例如用户名重复。

# c# - 如何定义子类也使用的常量？

> ID：14288235
> 
> 赞同：0
> 
> 时间：2013-01-11T23:19:23.600
> 
> 标签：c#, .net, constants

我需要定义一些将由基类及其子类使用的常量。不确定定义它们的正确方法是什么。

我了解 const、readonly、static const 以及 public、protected 和 private 的区别（虽然我很少看到在 C# 中使用“protected”）。这些常量应该如何定义？它们应该是公共常量、公共只读、私有常量还是私有只读，并使用公共 getter/setter 供子类使用，还是应该将它们定义为受保护？

另一个问题是关于 BaseClass 中的变量 FilePath。FilePath 将被 BaseClass 中的某些函数用作占位符（实际值将由子类提供），我应该将其定义为虚拟吗？

有人可以提供一般规则吗？以下是我所拥有的示例：

```
public class BaseClass
{
    public const string Country = "USA";
    public const string State = "California";
    public const string City = "San Francisco";

    public virtual string FilePath
    {
        get
        {
            throw new NotImplementedException();
        }
         set
        {
            throw new NotImplementedException();
        }
    }
}

public class Class1 : BaseClass {

     public Class1() {
         FilPath = "C:\test";
     }

     public string GetAddress() {
       return City + ", " + State + ", " + Country; 
     }

     public void CreateFile() {
       if (!Directory.Exist(FilePath)) {
            //create folder, etc 
        }
     }         
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T23:29:38.170

如果您可以定义常量，`const`那么就这样做。如果这不可能，请使用`static readonly`.

如果要在类之外使用常量，那么它们需要是`internal`or `public`。如果只有基类及其后代要使用它们，那么请制作它们`protected`。

如果`FilePath` *可以*由子类提供，那么它必须是`virtual`. 如果它*必须*由子类提供，它应该是`abstract`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:29:23.707

我会让 BaseClass 成为一个抽象类（参见[http://msdn.microsoft.com/en-us/library/sf985hc5(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/sf985hc5(v=vs.71).aspx)）。至于 const 与 static readonly，主要是口味问题。

```
public abstract class BaseClass
{
    // ... constant definitions

    // Members that must be implemented by subclasses
    public abstract string FilePath { get; set; }
} 
```

# c# - C# Winstore 应用程序可以访问电子邮件应用程序吗？

> ID：14288237
> 
> 赞同：0
> 
> 时间：2013-01-11T23:19:25.893
> 
> 标签：c#, windows-8, .net-4.5, windows-store-apps

我特别希望能够使用 C# Winstore (Metro) 应用程序搜索存储在本地设备上的电子邮件。

考虑一个应用程序，该应用程序需要查找存储在此特定 Windows 8 设备上的电子邮件中是否存在特定文本（例如，使用内置邮件应用程序）以做出决定。

是否有某种被动共享合约（可以从另一个应用程序调用）？

**或者**

能够调用远程命令以使邮件应用程序搜索有问题的应用程序并返回结果（类似于.NET Remoting）......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:52:37.540

您可以做的最好的事情是使用[SearchPane.Show](http://msdn.microsoft.com/en-us/library/windows/apps/br225096.aspx)调出“搜索”窗格并为正确的查询播种。用户需要从“搜索”窗格中选择“邮件”应用程序才能完成搜索。然后，用户可以选择电子邮件中的数据并将其分享给您（如果您是分享目标）。一个商店风格的应用程序无法访问存储在另一个本地存储中的数据。

每条评论：确保清单中有正确的搜索声明。您可以使用[Manifest Designer](http://msdn.microsoft.com/en-us/library/windows/apps/br230259%28v=vs.110%29.aspx#Declarations)添加它。然后您可以按如下方式调用 SearchPane.Show ...

```
Windows.ApplicationModel.Search.SearchPane.GetForCurrentView().Show("Foo"); 
```

# c++ - 在多继承场景中使用虚拟基类时，是否所有派生类都必须引用虚拟基类？

> ID：14288240
> 
> 赞同：0
> 
> 时间：2013-01-11T23:19:37.347
> 
> 标签：c++, virtual-inheritance

美国空军的 JSF C++ 编码标准要求为访问虚拟基的每个派生类声明虚拟基类。

例如，在以下层次结构中：

```
 A
 / \
B1  B2
C1  C2
 \ /
  D 
```

...他们在本标准中强加的规则（AV Rule 88.1，供参考）要求类声明如下：

```
class A;
class B1 : virtual A;
class B2 : virtual A;
class C1 : B1, virtual A;
class C2 : B2, virtual A;
class D  : C1, C2, virtual A; 
```

我的问题如下：

1.  这在语义上是否与仅在声明 @ B1/B2 中虚拟继承，而不是`virtual A`在每个后​​续类声明中指定？
2.  如果它在语义上有所不同，为什么会有人/想要/离开它？对我来说，您绝对必须在每一层继承中都这样做似乎很愚蠢，因为这会增加潜在的故障点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:23:23.850

它在语义上是相同的，因为每个派生类都将有*一个*类型为 的虚拟基类`A`。显式提及虚基非常好，因为派生最多的类构造虚基（与非虚基不同），并且在编写派生类的构造函数时要牢记构造顺序很重要。

我没有（2）的技术答案。你不必这样做，但如果你这样做会很好。就像打电话给你的父母一样，我想。与许多事情一样，C++ 不会强迫你保持理性。

# cross-compiling - 如何为 ARM 嵌入式 linux 环境编译标准 linux 包（./configure；make；make install）

> ID：14288243
> 
> 赞同：2
> 
> 时间：2013-01-11T23:20:28.570
> 
> 标签：cross-compiling, embedded-linux

我已经有了一个使用 MontaVista 的功能性嵌入式 linux 系统。我的嵌入式板子启动 linux 并运行包含的二进制文件就好了。我知道如何制作一个小的 C 程序并使用`Makefile`调用`arm_v5t_le-gcc`而不是`gcc`.

这一切都很简单，但你到底是如何配置和安装一个需要`./configure`、`make`和的“标准” linux 软件包的`make install`？

我遇到的主要概念问题是`./configure`收集有关您当前系统的数据，例如编译器和包含文件等。当我运行时`./configure`，它只会收集有关我的桌面 linux 环境的信息，而不是我的嵌入式环境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T23:20:28.570

我正在回答我自己的问题。事实证明，您可以运行`./configure -h`查看一些选项，其中一些选项允许您描述您的嵌入式（或交叉编译）环境。

在我的具体情况下，我想为运行 MontaVista 的嵌入式 ARM 环境编译 libvisca（索尼 RS232 相机控制库）。我运行了以下命令以使其正常工作：

```
export CC=arm_v5t_le-gcc
export AR=arm_v5t_le-ar

./configure --host=arm

make 
```

只要您的 . 文件中有上述编译器`$PATH`，就一切就绪。编译愉快。

# vba - 是否有将 Excel 文件格式/设置保存到对象的标准过程？

> ID：14288245
> 
> 赞同：12
> 
> 时间：2013-01-11T23:21:01.640
> 
> 标签：vba, object, excel, formatting

在完成繁重的后端、前端工作负载时，有时维护 Excel 工作簿的格式/设置可能很麻烦。有时（甚至经常）工作簿崩溃了。但是我不记得由于格式化而避免发生这种情况的代码或过程是什么。我很清楚，在工作簿中进行任何数据检索和处理之前，我将工作簿的格式/设置保存到一个对象中。一切都完成后，调用该对象进行恢复。它很可能是自定义/用户编写的类之一。

在使用工作簿管理某些公司标准/徽标/调色板/格式/保护设置/代码设置等时，该代码非常方便。

所以我只想问社区中是否有人遇到过这样的过程？我在网上搜索并感到失望，我无法在附近找到任何东西 - 否则我真的对关键词搜索失去了理智；）

PS：这不是我的家庭作业或工作。所以请放一些光。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T02:46:58.353

如果您正在谈论创建符合您的品牌标准的电子表格，为什么不创建一个模板文件：

[http://office.microsoft.com/en-us/excel-help/save-a-workbook-or-worksheet-as-a-template-HA010218874.aspx](http://office.microsoft.com/en-us/excel-help/save-a-workbook-or-worksheet-as-a-template-HA010218874.aspx)

# visual-studio - Magento API 不能与 wsdl.exe 一起使用，但可以与 Soap UI 一起使用

> ID：14288247
> 
> 赞同：1
> 
> 时间：2013-01-11T23:21:12.943
> 
> 标签：visual-studio, magento, wsdl, soapui, wsdl.exe

我正在尝试将 Magento 1.7 与 C# 应用程序集成。

当我尝试在 Visual Studio 中使用“添加服务引用”功能时，它会找到服务和所有操作，但是当我单击“确定”时，它不会生成任何内容。即 Reference.cs 文件几乎是空的（只有一行带有命名空间）。

我尝试使用 wsdl.exe 在命令提示符下生成代理，但出现以下错误：

> R2718：描述中的 wsdl:binding 必须具有与其引用的 wsdl:portType 相同的一组 wsdl:operations。- 命名空间“urn:Magento”中端口类型“Mage_Api_Model_Server_Wsi_HandlerPortType”的操作“catalogProductAttributeRemove”没有匹配的绑定。
> 
> 有关 WS-I Basic Profile v1.1 的更多详细信息，请参阅[http://www.ws-i.org/Profiles/BasicProfile-1.1.html](http://www.ws-i.org/Profiles/BasicProfile-1.1.html)上的规范。
> 
> 错误：无法从命名空间“urn:Magento”导入绑定“Mage_Api_Model_Server_Wsi_HandlerBinding”。- 命名空间“urn:Magento”中端口类型“Mage_Api_Model_Server_Wsi_HandlerPortType”的操作“catalogProductAttributeRemove”出现以下语法错误：该操作没有匹配的绑定。检查 Binding 部分中的操作、输入和输出名称是否与 PortType 部分中的相应名称匹配。

然后我尝试使用 Soap UI 加载相同的 wsdl，它工作正常。代理已生成，我可以毫无问题地拨打电话。

原始的 wsdl 文件在这里：[https](https://gist.github.com/4514723) ://gist.github.com/4514723 除了我用示例 url 替换了第 6297 行。

所以我的问题是为什么 Soap UI 能够生成代理并毫无问题地进行调用，但 Visual Studio 不能？我该如何解决？

![在此处输入图像描述](../Images/3d5308d9e530c10943110fc52d2b1719.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T01:15:06.620

请参阅[以 WS-I 遵从模式生成 Web 服务客户端](https://stackoverflow.com/questions/12250037/generate-a-web-service-client-in-ws-i-compliance-mode)。

您需要修改 Magento 代码以更正`app\code\core\Mage\Catalog\etc\wsi.xml`.

与其他 .NET/Java 工具相比，SOAP UI 可能更能容忍 WSDL 中的错误。

# javascript - jquery ajax调用未在引导类型头中触发

> ID：14288248
> 
> 赞同：0
> 
> 时间：2013-01-11T23:21:18.880
> 
> 标签：javascript, jquery, ajax, bootstrap-typeahead

我尝试使用 Ajax 做一个 twitter 引导类型头，但没有发生任何错误。没有错误没有输出这是我的 jquery ajax 代码

```
 function CallData() {

    $('input.typeahead.local.remote').typeahead({
        source: function (typeahead,query) {
            $.ajax({
                type: "GET",
                url: "http://cs-api-sandbox.herokuapp.com/v1/challenges/search?keyword=r&callback=my_callback",
                jsonpCallback: "my_callback",
                dataType: "jsonp",
                error: function (xhr, errorType, exception) {
                    var errorMessage = exception || xhr.statusText;
                    alert("Excep:: " + exception + "Status:: " + xhr.statusText);
                }
            });
        }
    });

}

function my_callback(data) {
    alert('hi');
} 
```

这是我的html代码

```
<input type="text" id="txt" runat="server" class="span4 typeahead local remote" placeholder="Search..." /> 
```

我`CallData()`在每次按键时调用 ajax 函数，但没有任何反应

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:25:53.527

您需要将 ajax 请求的结果传递给 source 的第二个参数（这是一个用于预先填充类型的回调）。一个人为的例子：

```
$('#mytypeahead').typeahead({
    source: function(query, process){
        $.ajax({
            url: '/some/url?query='+query,
            success: function(response){
                process(response);
            }
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-17T10:02:39.980

尝试添加`async: false`到 $.ajax - 因为 javascript 的机制是不同步的。希望这有帮助

# asp.net-mvc - 想要使用 NHibernate 将选定的（即超过 1 个）枚举保存为字符串

> ID：14288249
> 
> 赞同：2
> 
> 时间：2013-01-11T23:21:20.377
> 
> 标签：asp.net-mvc, nhibernate, orchardcms

我一辈子都无法让它与我现有的代码一起使用，但我正在尝试将我的`enum`选择保存为 NHibernate 中的字符串。基本上，我有一个 UI 复选框，如果用户选择多个复选框，我想存储这些选择。现在，我可以让 NHibernate 存储一个选择（例如，从下拉列表或单选按钮列表中，用户仅限于一个选择）。

这是我对枚举的主要内容：

```
public enum IncomeType
{
    [Display(Name = "Full-Time Employment")]
    FullTime,
    [Display(Name = "Part-Time Employment")]
    PartTime,
    [Display(Name = "Self-Employment")]
    SelfEmployed,
    [Display(Name = "Rental")]
    Rental,
    [Display(Name = "Social Security Payments")]
    SocialSecurity,
    [Display(Name = "Retirement / Pension Payments")]
    Retirement,
    [Display(Name = "Child Support Payments")]
    ChildSupport,
    [Display(Name = "Spousal Maintenance")]
    Maintenance,
    [Display(Name = "Other")]
    Other
} 
```

我使用一种方法来“选择”是否显示复选框列表（如果 my`BulkItemThreshold`等于选项数，则显示复选框列表）。这是那个方法：

```
public static IEnumerable<SelectListItem> GetItemsFromEnumString<T>
    (T selectedValue = default(T)) where T : struct
{
    return from name in Enum.GetNames(typeof(T))
       let enumValue = Convert.ToString((T)Enum.Parse(typeof(T), name, true))

    select new SelectListItem
    {
        Text = GetEnumDescription(name, typeof(T)),
        Value = enumValue,
        Selected = enumValue.Equals(selectedValue)
    };
} 
```

（注意：其中的一些项目是助手，但我认为它们不相关；此外，所选输入使用模板`.cshtml`文件显示 - 再次，不确定这是否相关）

现在，我这样称呼它：

```
public class IncomeTypeSelectorAttribute : SelectorAttribute
{
    public override IEnumerable<SelectListItem> GetItems()
    {
        return Selector.GetItemsFromEnumString<IncomeType>();
    }
} 
```

最后，我们到达了`virtual`属性（使用代理），但这是 NHibernate 抛出扳手的地方（注意：在 NHibernate 之前这对我来说工作得很好，现在我试图让许多代码行使用它而不必重新做所有事情；如果我重新做所有事情，我可能会将我已经必须让它工作的代码增加三倍）：

财产（记录）：

```
[IncomeTypeSelector(BulkSelectionThreshold = 9)]
public virtual List<string> IndividualIncomeTypeCheckBox { get; set; } 
```

代理（部分）：

```
public List<string> IndividualIncomeTypeCheckBox
{
    get { return Record.IndividualIncomeTypeCheckBox; }
    set { Record.IndividualIncomeTypeCheckBox = value; }
} 
```

同样，这就是我做事的方式，并且在 NHibernate 之前它工作得很好。但现在我必须使用 NHibernate。没有绕过它。

我正在使用一个服务类，它将两者结合在一个 Create 方法中，以使用 NHibernate 保存在数据库中，对于上面的内容，它通常看起来像这样：

```
 part.IndividualIncomeTypeCheckBox = record.IndividualIncomeTypeCheckBox; 
```

如果它只是一个选择，这将起作用。

好吧，我花了整整两 (2) 个月的时间试图让它发挥作用。这很困难，因为我有很多代码，用户只能做出一个选择（例如使用单选按钮列表），而且效果很好——即使使用 NHibernate。让我给你举个例子：

```
public virtual IncomeType? IndividualIncomeTypeCheckBox { get; set; } 
```

如果我执行上述操作，它将显示一个下拉列表，NHibernate 会将用户选择的 ONE 允许选项存储在数据库中，这没有问题。但是一个以上的选项`List<string>`不起作用。

现在，我已经尝试了在这里或其他地方能找到的一切，但没有任何效果。是的，我知道它应该是`IList<IncomeType>`或其他一些变体。但是如果我使用它，那么 NHibernate 需要它`IncomeType`是数据库中的另一个表。对于我相信的这么简单的事情，编写的代码太多了。我们不是在谈论多对多关系，因为这不是具有多个地址的用户（其中​​地址将具有街道、城市、州、邮政编码等）。

我尝试了不同类型的代理`get`和`set`代码，但没有任何效果。我已经尝试过`[Flags]`和其他东西一起工作`string`，但无济于事。那些最后的解决方案将“工作”，但只能保存从多个中选择的第一个项目（即，在我的场景中，如果用户选择“FullTime”和“Rental”作为收入类型，那么只会`string`保存“FullTime”（）或“1”（`[Flags]`/ `int`），而不是两个项目都被选中。

`ReadOnly`我有一种情况，我使用这样的属性重新显示选择：

```
[IncomeTypeSelector]
[ReadOnly(true)]
public List<string> IndividualIncomeTypeCheckBoxPost
{
    get { return IndividualIncomeTypeCheckBox; }
} 
```

这将显示在 UI 上，但我尝试用 NHibernate 做这样的事情，但它不起作用。

`enum`谁能告诉我，使用上面的内容，我怎样才能让 NHibernate在这个复选框列表场景中存储多个？

**更新：** 更多在这里和网络上戳，我想出了以下（仍然不起作用）。

财产（记录）：

```
[IncomeTypeSelector(BulkSelectionThreshold = 9)]
public virtual IList<IncomeTypeRecord> IndividualIncomeTypeCheckBox
{ 
    get { return incomeType; } 
    set { incomeType= value; } 
}
private IList<IncomeTypeRecord> incomeType = 
    new List<IncomeTypeRecord>(); 
```

代理（部分）：

```
public IList<IncomeTypeRecord> IndividualIncomeTypeCheckBox
{
    get { return Record.IndividualIncomeTypeCheckBox; }
    set { Record.IndividualIncomeTypeCheckBox= value; }
} 
```

以及对枚举的更改：

```
public enum IncomeType : int // removing int & value still gives validate error
{
[Display(Name = "Full-Time Employment")]
FullTime = 1,
[Display(Name = "Part-Time Employment")]
PartTime,
....
} 
```

我添加了这个类来支持`IncomeTypeRecord`

```
public class IncomeTypeRecord
{
    public virtual int Id { get; set; }
    public virtual IncomeType Value { get; set; }
} 
```

但是，当我进入 UI 屏幕并选择一个或多个选项时，我收到验证错误（值无效）。例如，假设我单独选择 FullTime，或者选择 FullTime 和 Retirement，那么 UI 将显示以下错误：

> 'FullTime' 值无效。
> 
> 'FullTime,Retirement' 值无效。

（分别）

即使我删除了`int`声明`enum`并摆脱了以“1”开头的值，我仍然会收到此验证错误。我尝试弄乱并添加不同的模型活页夹（现在让我很难过我原来的问题是否仍然存在，现在我有一个不同的问题 - 但你仍然可以获得赏金:)）。

把我的头发拉出来。如果我能提供更多的赏金，我会的。我需要一个明确的解决方案。我很感激任何帮助。

**更新** 这是我到目前为止所拥有的：

记录：

```
public virtual string IndividualIncomeTypeCheckBox{ get; set; } 
```

部分：

```
//If I do IEnumberable<string> my .Select throws a cast error
public IEnumerable<IncomeType> IndividualIncomeTypeCheckBox
    {
        get
        {
            return Record
                .IndividualIncomeTypeCheckBox
                .Split(',')
                .Select(r => (IncomeType)Enum.Parse(typeof(IncomeType), r));
        }
        set { Record.IndividualIncomeTypeCheckBox= value 
            == null ? null : String.Join(",", value); }
    } 
```

服务等级：

```
public SimplePart CreateSimple(SimplePartRecord record)
{
    SimplePart simple = Services.ContentManager.Create<SimplePart>("Simple");
    ...
    //How I would save a FirstName property (example Part / PartRecord below)
    //public virtual string FirstName { get; set; } - PartRecord
    //public string FirstName - Part
    //{
    //    get { return Record.FirstName ; }
    //    set { Record.FirstName= value; }
    //}
    simple.FirstName = record.FristName;
    ...
    //I obviously cannot do the following with the above IncomeType
    //Getting cannot convert string to IEnumerable error
    //How would I write this:
    simple.IndividualIncomeTypeCheckBox = record.IndividualIncomeTypeCheckBox;
    ...
} 
```

这就是它在控制器中的调用方式（这持续到数据库）：（**更新控制器代码）**

```
public ActionResult Confirm(string backButton, string nextButton)
{
    if (backButton != null)
        return RedirectToAction("WrapUp");
    else if ((nextButton != null) && ModelState.IsValid)
    {
        _myService.CreateSimple(myData.SimplePartRecord);
        return RedirectToAction("Submitted");
    }
    else
        return View(myData);
} 
```

**更新附加代码（序列化和视图模型）：**

“myData”在控制器（使用序列化）中定义为：

```
private MyViewModel myData;
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    var serialized = Request.Form["myData"];
    if (serialized != null)
    {
        myData = (MyViewModel)new MvcSerializer().Deserialize
            (serialized, SerializationMode.Signed);
        TryUpdateModel(myData);
    }
    else
        myData = (MyViewModel)TempData["myData"] ?? new MyViewModel();
    TempData.Keep();
}
protected override void OnResultExecuted(ResultExecutedContext filterContext)
{
   if (filterContext.Result is RedirectToRouteResult)
        TempData["myData"] = myData;
} 
```

我使用序列化是因为我在前端设置了一个多步骤向导（如控制器操作“backButton”“nextButton”中所示）。我没有使用驱动程序（只能显示 Admin 或在前端但然后仅在 ~/Views 文件夹下的 .cshtml 文件上（而不是像我正在使用的结构化文件夹列表中）。没有驱动程序 = 没有更新视图模型类型代码 = 没有在数据库中“创建”数据的机制。如果我不使用一些“创建”类型的方法，表单会提交，但所有数据都是“NULL”。

当您说数据应该自动持久化时，我很抱歉，但我不知道如何。我阅读的所有内容或我查看的代码都有一些方法可以使用表单中输入的任何内容来更新数据库。如果我遗漏了什么，我很抱歉。

“MyViewModel”非常简单：

```
[Serializabel]
public class MyViewModel
{
    public SimplePartRecord SimplePartRecord { get; set; }
} 
```

而且，以防万一，这里是迁移的相关部分（返回 1 是一个完全独立且不相关的表）：

```
public int UpdateFrom1()
{
SchemaBuilder.CreateTable("SimplePartRecord",
    table => table
    .ContentPartRecord()
        ...
        .Column("IndividualIncomeTypeCheckBox", DbType.String)
        ...
    );
ContentDefinitionManager.AlterPartDefinition("SimplePart",
    part => part
    .Attachable(false));
return 2;
} 
```

我得到的错误是

> 无法将类型“字符串”隐式转换为“System.Collections.Generic.IEnumerable””

当我在我的服务类的“创建”方法中执行以下操作时：

```
simple.IndividualIncomeTypeCheckBox = record.IndividualIncomeTypeCheckBox; 
```

**另一个想法：**我尝试使用 nn Relation 示例来处理这种情况。除了我认为应该简单明了的大量额外代码之外，由于我使用序列化的方式，我有很多对象引用错误，并且无法弄清楚如何正确编码我的控制器来处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T17:46:56.567

这里有很多信息需要浏览，所以希望我没有错过重点。在我看来，目标是：

*   业务类有一个集合属性，`IList<IncomeType>`不需要额外的表
*   该集合中的值应保留为枚举名称的分隔字符串

最好的方法是使用自定义用户类型（的实现`NHibernate.UserTypes.IUserType`）来映射属性。下面是一个泛型`IUserType`，它将类型的枚举`T`从`IList<T>`属性映射到数据库中的逗号分隔字符串并再次返回。没有简单的方法将 T 限制为枚举，但代码仅适用于枚举。

使用 Fluent NHibernate 使用自定义类型映射属性很简单：

```
public class Person
{
    public Person()
    {
        IncomeTypes = new List<IncomeType>();
    }

    public virtual int PersonId { get; protected set; }
    public virtual string FirstName { get; set; }
    public virtual string LastName { get; set; }

    public virtual IList<IncomeType> IncomeTypes { get; protected set; }
}

public class PersonMap : ClassMap<Person>
{
    public PersonMap()
    {
        Table("Person");
        Id(x => x.PersonId).GeneratedBy.Identity();
        Map(x => x.FirstName);
        Map(x => x.LastName);
        Map(x => x.IncomeTypes).CustomType<EnumAsDelimitedStringType<IncomeType>>();
    }
} 
```

这是用户类型的代码：

```
public class EnumAsDelimitedStringType<T> : IUserType
{
    public new bool Equals(object x, object y)
    {
        if (ReferenceEquals(x, y))
        {
            return true;
        }
        var xList = x as IList<T>;
        var yList = y as IList<T>;
        if (xList == null || yList == null)
        {
            return false;
        }
        // compare set contents
        return xList.OrderBy(xValue => xValue).SequenceEqual(yList.OrderBy(yValue => yValue));
    }

    public int GetHashCode(object x)
    {
        return x.GetHashCode();
    }

    public object NullSafeGet(IDataReader rs, string[] names, object owner)
    {
        var outValue = NHibernateUtil.AnsiString.NullSafeGet(rs, names[0]) as string;
        if (string.IsNullOrEmpty(outValue))
        {
            return new List<T>();
        }
        var getValueArray = outValue.Split(new[] {','}, StringSplitOptions.RemoveEmptyEntries);
        return Array.ConvertAll(getValueArray, s => (T)Enum.Parse(typeof(T), s)).ToList();
    }

    public void NullSafeSet(IDbCommand cmd, object value, int index)
    {
        var inValue = value as IList<T>;
        // set to string.Empty if you prefer to store that instead of null when the collection is null or empty
        object setValue = null;
        if (inValue != null && inValue.Any())
        {
            var setValueArray = Array.ConvertAll(inValue.ToArray(), v => Enum.GetName(typeof(T), v));
            setValue = string.Join(",", setValueArray);
        }
        NHibernateUtil.AnsiString.NullSafeSet(cmd, setValue, index);
    }

    public object DeepCopy(object value)
    {
        return value;
    }

    public object Replace(object original, object target, object owner)
    {
        return original;
    }

    public object Assemble(object cached, object owner)
    {
        return cached;
    }

    public object Disassemble(object value)
    {
        return value;
    }

    public SqlType[] SqlTypes
    {
        get { return new[] {new SqlType(DbType.AnsiString)}; }
    }
    public Type ReturnedType
    {
        get { return typeof(IList<T>); }
    }

    public bool IsMutable
    {
        get { return false; }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T23:42:32.690

我认为你在追求`[Flags]`枚举的正确轨道上。您可能已经这样做了，但以防万一——使枚举标志有价值不仅仅是添加属性。您还必须以二进制友好的方式指定项目的值。我发现最简单的方法如下：

```
[Flags]
public enum IncomeType : long // you'll need the room with several options
{
    FullTime = 1,
    PartTime = 1 << 1,
    SelfEmployed = 1 << 2
    // And so on
} 
```

如果您不这样做，那么您将获得连续的整数值，这会破坏允许您在单个整数中执行多个值的按位比较。

您创建`SelectList`外观的代码很好。您的选项应该构造以相同名称回发的表单值。如果你想使用默认的模型绑定器，这意味着你的视图模型上的关联属性需要是`List<int>`. 如果您不使用视图模型（您可能应该），您可以将其从表单集合中拉出。

一旦你完成了这个设置，那么从你的视图模型转换到你的 NHibernate 实体是很简单的，如果有点烦人的话。您基本上必须循环遍历列表中的值并将`|=`它们放到您的 NHibernate 实体的单个枚举属性中。

所以让我们假设你有一个这样的视图模型：

```
public class MyEditViewModel
{
    public string Name { get; set; }
    public List<int> IncomeSelections { get; set; }

    // You'll probably have this to populate the initial view rendering
    public SelectList AllIncomeOptions { get; set; }
} 
```

您将使用您的助手和所有这些构建您的视图，然后使用构建复选框，`SelectList` *但确保输入名称为* `IncomeSelections`，然后当它被回发时，您会将视图模型数据推送到您的 NHibernate 实体中，如下所示：

```
var myNHEntity = new NHEntity(); 
// If you're editing an existing entity, then be sure to reset the enum
// value to 0 before going into the following foreach loop...

foreach (var incomeSelection in viewModel.IncomeSelections)
{
    myNHEntity.IncomeSelection |= incomeSelection;
} 
```

可能有一种更聪明的方法可以做到这一点，您可能必须将其`int`转换为您的枚举类型，但您会弄清楚的（我会为您做的，但现在是星期五，我已经打开了啤酒） .

NHibernate 应该坚持它，而您不必在 NH 方面做任何时髦的事情。

## 总之...

与 NHibernate 方面相比，这似乎更像是您如何处理已发布数据的问题。如果你实现了这样的东西，那么一定要使用 Fiddler 或 FireBug 来检查发布的值，以确保 1）它们是整数和 2）名称相同，因此它们将被添加到列表中。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T00:00:43.320

问题很简单，如果不与中间关联表建立完整关系，它将无法映射列表。让记录将值存储为逗号分隔的字符串更简单（因此您的记录属性是字符串，而不是字符串列表），并且您的部分可以在字符串和列表之间来回映射。

你可以在这里找到一个非常接近的例子：

[https://bitbucket.org/bleroy/nwazet.commerce/src/d722cbebea525203b22c445905c9f28d2af7db46/Models/ProductAttributesPartRecord.cs?at=default](https://bitbucket.org/bleroy/nwazet.commerce/src/d722cbebea525203b22c445905c9f28d2af7db46/Models/ProductAttributesPartRecord.cs?at=default)

[https://bitbucket.org/bleroy/nwazet.commerce/src/d722cbebea525203b22c445905c9f28d2af7db46/Models/ProductAttributesPart.cs?at=default](https://bitbucket.org/bleroy/nwazet.commerce/src/d722cbebea525203b22c445905c9f28d2af7db46/Models/ProductAttributesPart.cs?at=default)

它没有使用枚举值，而是一个 id 列表，但这应该让您对如何相当简单地进行这项工作有一个很好的了解：解析您已经知道该怎么做的枚举。

如果您需要更多详细信息，请告诉我，但我认为这就是您解除封锁所需要的。

# c++ - 从 sourceCpp 移动到带有 Rcpp 的包

> ID：14288254
> 
> 赞同：14
> 
> 时间：2013-01-11T23:21:37.513
> 
> 标签：c++, r, rcpp

我目前有一个`.cpp`可以使用`sourceCpp()`. 正如预期的那样，创建了相应的 R 函数并且代码按预期工作。

这里是：

```
#include <Rcpp.h> 
using namespace Rcpp;

// [[Rcpp::export]]
NumericVector exampleOne(NumericVector vectorOne, NumericVector vectorTwo){

    NumericVector outputVector = vectorOne + vectorTwo; 

    return outputVector;
} 
```

我现在正在将我的项目转换为使用`Rcpp`. 所以我用 rStudio 创建了骨架，并开始研究如何转换。

在 Hadley[关于 Cpp 的优秀入门](https://github.com/hadley/devtools/wiki/Rcpp)书中，他在“在包中使用 Rcpp”一节中说：

> 如果您的包使用 Rcpp::export 属性，则需要在包构建过程中增加一个步骤。compileAttributes 函数扫描包中的源文件以查找 Rcpp::export 属性，并生成将函数导出到 R 所需的代码。
> 
> 每当添加、删除或更改其签名时，您都应该重新运行 compileAttributes。请注意，如果您使用 RStudio 或 devtools 构建包，则此步骤会自动发生。

所以看起来编译的代码`sourceCpp()`应该像在包中一样工作。

我创建了相应的 R 文件。

```
exampleOne <- function(vectorOne, vectorTwo){
    outToR <- .Call("exampleOne", vectorOne, vectorTwo, PACKAGE ="testPackage")
    outToR
} 
```

然后我（重新）构建了这个包，我得到了这个错误：

`Error in .Call("exampleOne", vectorOne, vectorTwo, PACKAGE = "voteR") : C symbol name "exampleOne" not in DLL for package "testPackage"`

**有没有人知道在获取使用 sourceCpp() 编译的代码然后在包中使用它时我还需要做什么？**

*我应该注意到我已阅读：“编写使用 Rcpp 的包” [http://cran.rstudio.com/web/packages/Rcpp/vignettes/Rcpp-package.pdf](http://cran.rstudio.com/web/packages/Rcpp/vignettes/Rcpp-package.pdf)并了解那里提供的基本结构。但是，在查看`RcppExamples`源代码后，似乎小插图中的结构与示例包中使用的结构并不完全相同。例如，没有使用 .h 文件。此外，小插图和源代码都没有使用 [[Rcpp::export]] 属性。这一切都让我很难准确追踪我的错误在哪里。*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T22:05:49.540

这是我关于如何从使用 sourceCpp() 到使用 Rcpp 的包的“演练”。如果有错误，请随时编辑或让我知道，我会编辑它。

[注意：我强烈建议在此过程中使用 RStudio。]

所以你有 sourceCpp() 的东西，现在你需要构建一个包。这并不难，但可能有点棘手，因为那里有关使用 Rcpp 构建包的信息范围从您想要的任何 R 包的详尽彻底的文档（但对于新手来说，这超出了您的头顶），以及新手敏感介绍（可能会遗漏您碰巧需要的细节）。

在这里，我使用`oneCpp.cpp`和`twoCpp.cpp`作为您将在包中使用的两个 .cpp 文件的名称。

这是我的建议：

A. 首先，我假设您有一个`theCppFile.cpp`使用 sourceCpp() 编译的版本，并且可以按照您的预期工作。这不是必须的，但如果您是 Rcpp OR 包的新手，最好确保您的代码在这种简单的情况下工作，然后再转到下面更复杂的情况。

B. 现在使用`Rcpp.package.skeleton()`或使用 RStudio 中的 Project>Create Project>Package w/Rcpp 向导构建您的包（强烈推荐）。`Rcpp.package.skeleton()`您可以在[hadley/devtools](https://rdrr.io/github/hadley/devtools/)或[Rcpp Attributes Vignette](https://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-attributes.pdf)中找到有关使用的详细信息。使用 Rcpp 编写包的完整文档在[编写使用 Rcpp 的包中](https://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-package.pdf)，但是本文假设您非常了解 C++ 的方式，并且不使用执行 Rcpp 的新“属性”方式。但是，如果您转向制作更复杂的软件包，这将是非常宝贵的。

您现在应该有一个类似于以下内容的包目录结构：

```
yourPackageName
- DESCRIPTION
- NAMESPACE
- \R\
    - RcppExports.R 
- Read-and-delete-me
- \man\
    - yourPackageName-package.Rd
- \src\
    - Makevars
    - Makevars.win
    - oneCpp.cpp 
    - twoCpp.cpp
    - RcppExports.cpp 
```

一切设置好后，如果使用 RStudio，或者`compileAttributes()`您不在 RStudio 中，请执行“构建和重新加载”。

C. 您现在应该在您的`\R`目录中看到一个名为`RcppExports.R`. 打开它并检查一下。您应该会看到目录中所有文件`RcppExports.R`的 R 包装函数。很甜，嗯？`.cpp``\src`

D) 尝试与您在 中编写的函数相对应的 R 函数`theCppFile.cpp`。它有效吗？如果是这样继续。

E）您现在可以在创建目录时将新`.cpp`文件添加`otherCpp.cpp`到`\src`目录中。然后你只需要重建包，R 包装器就会`RcppExports.R`为你生成和添加。在 RStudio 中，这只是 Build 菜单中的“Build & Reload”。如果您不使用 RStudio，您应该运行`compileAttributes()`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-01T16:54:36.100

简而言之，诀窍是`compileAttributes()`从包的根目录中调用。所以例如对于包`foo`

```
$ cd /path/to/foo
$ ls
DESCRIPTION  man  NAMESPACE  R  src
$ R
R> compileAttributes() 
```

此命令将生成缺少的`RcppExports.cpp`和`RcppExports.R`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T01:32:14.323

你只见树木不见森林。

`sourceCpp()`是最近的函数；它是我们所谓的“Rcpp 属性”的一部分，它有自己的小插图（在包中、我的网站和 CRAN 上具有相同的标题），您可能想阅读它。除其他外，它*详细说明了如何将您编译和运行的内容`sourceCpp()`转换为包*。这就是你想要的。

在文档之间随机跳转对您没有帮助，并且包作者在真正源文档的末尾可能更可取。或者换个说法：您使用的是新功能，但旧文档没有反映它。试着用 Rcpp 写一个基本的包，也就是从另一端来。

最后，有一个邮件列表...

# tfs - TFS 2010 工作项状态更改日期/由用户更改的字段意外更新

> ID：14288255
> 
> 赞同：0
> 
> 时间：2013-01-11T23:21:39.120
> 
> 标签：tfs

我们公司正在迁移到 TFS 来管理开发活动，状态更改日期和更改字段是审计谁做了什么/什么时间的重要组成部分。

我遇到的问题是默认工作项模板 (CMMI) 假定根据状态下拉列表中的临时选择而不是用户在保存时选择的实际状态转换来更改这些值。

示例：工作项处于活动状态。用户打开状态下拉菜单，意外选择“已关闭”但未保存，选择“已解决”，将状态更改从“活动到已解决”保存。

问题/错误：由于他们不小心将鼠标悬停并选择了“已关闭”，TFS 还设置了“关闭者”和“关闭日期”字段，即使工作项从未关闭，并且用户从未打算或保存从活动到关闭的转换。这发生在所有状态。

由于无法禁止在下拉列表中意外选择状态，这不仅会带来主要的用户体验问题，而且还会对审计跟踪的完整性造成严重破坏，因为这些字段随时可能被覆盖，即使用户从来没有真正保存从一种状态到另一种状态的转换。

还有其他人遇到这种情况并知道要解决的模板更新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:45:46.800

您可以通过使用限制来解决此问题。例如：

*   `Bugs`只能`Activated`通过`Testers`
*   如果`Work Item Type`= ，则`Bug`设置`Assign to`为`Tester`和`State``Active`

从上面的示例中，您可以限制您的开发人员激活错误。您也可以使用相同的方法来限制开发人员解决错误，因为开发人员不应该能够将错误设置为`Resolved`.

通过这种类型的限制，您可以防止错误选择`Assign to`和`State`字段以及意外保存`Work Item`非法值。

谢谢

如果这有帮助，请投票！

# jquery - 如何在两个单独的对象上创建悬停效果？

> ID：14288266
> 
> 赞同：1
> 
> 时间：2013-01-11T23:22:45.077
> 
> 标签：jquery, html, jquery-hover

我有两个 div，A 和 B。我想将鼠标悬停在 DIV A 上并显示 DIV B，但我不希望 DIV B 隐藏，直到鼠标从 DIV B 上移动。

```
<div id="a"><img src="images...." class="profile" id="options" /></div>
<div id="b"> //some information</div> 
```

jQuery：

```
<script>
$(document).ready(function(){
$('#a').hover(function(){
$('#b').show();
},
function(){
$('#b').hide();
});
}); 
```

我的 CSS：

```
<style type="text/css">
<!--
.profile{ position: absolute; top: 0px; width: 20px; height: 20px;}
#id{ position: absolute; top: 20px; width: 300px; height: 400px;}
-->
</style> 
```

我提供了 css 用于解释目的。我正在考虑更改课程，以便 DIV A 和 DIV B 具有相同的课程。这是不可能的，因为我的 DIV B 将变成聊天图像的大小。

下面是我试图描述的图像：

![我想将鼠标悬停在 DIV A 上并显示 DIV B，仅当鼠标从 DIV A 和 DIV B 上移动时才应隐藏 DIV B](../Images/376bc7ad591f75722f719c3eb11b28cc.png)

有人可以解释我的代码哪里出错了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T23:25:58.027

尝试这个：

```
$(document).ready(function(){

  $('#a').mouseenter(function(){
    $('#b').show();
  });

  $('#b').mouseleave(function(){
    $(this).hide();
  });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:24:19.143

编辑你可以用 CSS 做所有的事情。请参阅更新的 JSFiddle 链接： [JSFiddle 示例](http://jsfiddle.net/Mk5dp/1/)

```
#a,#b {
width: 200px;
height: 200px;
background: red;
}
#b {
background: blue;
display: none;
}
#a:hover + #b {
display: block;
}
#b:hover {
display: block;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:33:03.180

据我了解，您想在光标位于 A OR B 上时显示 B，并在光标离开 A 和 B 时隐藏 B。

```
$("#a, #b").hover(
    function(){$("#b").show();},
    function(){$("#b").hide();}
); 
```

小提琴：http: [//jsfiddle.net/7akEc/](http://jsfiddle.net/7akEc/)

也可能您可以将 B 放入 A 中并仅使用 css 显示/隐藏它

```
#a:hover #b {
    display:block;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T23:31:32.717

我不太确定你要做什么？，你是不是想在你 h 时显示 div #b

```
 (function(){

      $('#a').hover(function(){
       $('#b').show();
      }

      $('#b').mouseleave(function(){
       $(this).hide();
      }

    })() 
```

在你的 CSS 中

```
#b {
  opacity: 0;
} 
```

# c# - 更改 PropertyTagImageDescription 的值

> ID：14288268
> 
> 赞同：0
> 
> 时间：2013-01-11T23:22:46.263
> 
> 标签：c#, image, bitmap

我正在尝试解决更改 Bitmap 对象的值 PropertyTagImageDescription (0x010E) 的问题。为文件添加描述。搜索相关主题，并没有找到解决方案。我的用途：

```
Bitmap image = new Bitmap(Image.FromFile(fileName));
var data = System.Text.Encoding.UTF8.GetBytes("My comment");
PropertyItem propItem = image.GetPropertyItem(Convert.ToInt32(0x010E));
propItem.Len = data.Length;
propItem.Value = data;
image.SetPropertyItem(propItem); 
```

但是有一个错误：“在 GDI+ 中发生泛型错误”。

帮我理解！我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:10:05.693

我无法解决您的错误我没有找到设置了 0x010E 属性的图像。但是我已经构建了一个可以工作的小控制台应用程序：

```
using System;
using System.Drawing;
using System.IO;
using System.Linq;
using System.Text;

class Program
{
    static void Main(string[] args)
    {
        string imageLocation = @"C:\Users\Jens\Desktop\image.jpg";
        string newImageLocation = @"C:\Users\Jens\Desktop\newImage.jpg";

        // http://msdn.microsoft.com/en-us/library/ms534415(VS.85).aspx
        Int32 ImageDescription = 0x010E;

        // get file stream and create Image
        using (var fs = new FileStream(imageLocation, FileMode.Open, FileAccess.ReadWrite))
        using (var img = Image.FromStream(fs, false, false))
        {
            var data = Encoding.UTF8.GetBytes("My comment");

            // get a property from the image file and use it as container  
            var propItem = img.PropertyItems.FirstOrDefault();

            // set the values that u like to add
            // http://msdn.microsoft.com/en-us/library/system.drawing.imaging.propertyitem.aspx
            propItem.Type = 2;
            propItem.Id = ImageDescription;
            propItem.Len = data.Length;
            propItem.Value = data;

            // add property to Image and save it to the system
            img.SetPropertyItem(propItem);
            img.Save(newImageLocation);
        }
    }
} 
```

# cvs - 从 CVS 自动部署到 WebServer

> ID：14288274
> 
> 赞同：0
> 
> 时间：2013-01-11T23:23:25.220
> 
> 标签：cvs

一个小介绍：我们正在使用 CVS 作为我们的存储库来开发 HTML 原型（html、css、图像、js 文件）。我们需要向客户展示几乎每一个变化，并与他们讨论这些变化。这些客户在另一栋建筑或另一个国家，因此我们需要以某种方式发送原型。为了避免大量带有 zip 和更多 zip 的邮件，我们开发了一个脚本，它每 10 分钟从工作分支“结帐”一次，并且我们使用网络服务器“共享”更新的文件夹。使用此解决方案，我们仅通过 HTTP 共享一个链接，该链接包含我们原型的最后一个工作副本。

我们不能使用 SVN/Git 或其他“不那么痛苦”的修订控制系统。

问题：

*   有什么办法可以改进这个过程？
*   我们可以用另一种方式监控 CVS 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T10:45:50.800

您可以使用 CVS 的 loginfo 挂钩在每次签入后执行操作。但请注意，脚本将为提交期间触及的每个文件运行。

# jquery - 平滑的 div 滚动与 div 包装

> ID：14288279
> 
> 赞同：0
> 
> 时间：2013-01-11T23:23:42.810
> 
> 标签：jquery, css, html, smooth-scrolling

所以...我正在使用此处找到的 Smooth Div Scroll 插件... [http://www.smoothdivscroll.com/](http://www.smoothdivscroll.com/)

这是简单的实现...所以我使用触摸示例唯一的区别是...我使用 Divs 而不是图像...滚动。

```
<div id="makeMeScrollable">
  <div class='item'>One</div>
  <div class='item'>Two</div>
  <div class='item'>Three</div>
  <div class='item'>Four</div>
  <div class='item'>Five</div>
  <div class='item'>Six</div>
  <div class='item'>Seven</div>
  <div class='item'>Eight</div>
  <div class='item'>Nine</div>
  <div class='item'>Ten</div>
</div> 
```

我的js在这里

```
$(document).ready(function() {
  $("#makeMeScrollable").smoothDivScroll({
    hotSpotScrolling : false,
    touchScrolling : true,
    manualContinuousScrolling : false,
    mousewheelScrolling : false
}); 
```

CSS

```
.item {
  height: 35px;
  width: 245px;
}

#makeMeScrollable {
  width: 100%;
  position: relative;
  border: solid 1px black;
  margin: 43% 0% 0% 0%;
}

#makeMeScrollable div.scrollableArea div {
  position: relative;
  display: block;
  float: left;
  margin: 0;
  padding: 0;
  border: black solid 1px;
  color: white;
  background-color: #1E90FF;
  text-align: center;
} 
```

问题是，当我这样做时……我前九个 div……一个接一个……最多大约 6 个，我可以单击并滚动查看其余部分。最多 9 ......问题是 Div 10 出于某种原因环绕并位于 Div 1 下方。

我认为这样做的原因是因为通过调用可滚动函数放置在我的 10 个 div 周围的 scollableArea 包装器 div 太短了几个像素。它设置为自动，所以它应该（我假设）自动将自己设置为足够大......

我想我可以破解它并动态扩展它几个像素，这会很好......因为我尝试在 chrome 开发人员中增加它的像素......

所以是的......我发布截图......但我不能......因为我是新人哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T07:32:38.783

如果从 CSS 中删除边框，会发生什么情况吗？

```
#makeMeScrollable div.scrollableArea div {
  position: relative;
  display: block;
  float: left;
  margin: 0;
  padding: 0;
  border: none;
  color: white;
  background-color: #1E90FF;
  text-align: center;
} 
```

是否可以给 div 一个固定的宽度？就像是：

```
#makeMeScrollable div.scrollableArea div {
  position: relative;
  display: block;
  float: left;
  margin: 0;
  padding: 0;
  border: black solid 1px;
  color: white;
  background-color: #1E90FF;
  text-align: center;
  width: 300px;
} 
```

# c++ - C++ 中的对象/类的动态数组

> ID：14288280
> 
> 赞同：1
> 
> 时间：2013-01-11T23:23:50.433
> 
> 标签：c++, arrays, object, pointers, dynamic

我会切入正题，为大家省去一些无聊的多余阅读：

我试图在互联网上搜索关于对象/类的动态数组的教程，其中解释了如何在此处实现指针。特别是：`TheClass **foo[10];`或类似的东西，我不明白两颗星/星号有什么好处以及它们是如何使用的。总的来说，这整个事情。

我确实知道如何声明动态数组，如何使用常规指针，如何制作类，如何制作类的动态数组。但这一切加在一起让我感到困惑。

所以我的问题是：

1.  这是做什么的，它是如何工作的？

2.  你能推荐一个你知道可以找到示例/教程的网站吗？

3.  这是否具有特定名称而不是“具有双指针的动态对象数组”或诸如此类的名称？

4.  如果没有想到教程，如果您能举一个非常非常简短的示例，我将不胜感激。

比如像

```
int *something;
int somethingElse = 10;
something = &somethingElse; /*Now when you change "somethingElse","something" 
                              will also change to the same number*/ 
```

一个超级简短的例子和这样的解释将不胜感激。=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:41:53.457

使用指向指针的指针的最简单、或多或少有用的示例是二维数组。所以例如

```
//Create a pointer to (an array of) pointers to (an array of) ints
int** array2D;

//Create a array of pointers to (an array of) ints and assign it to the pointer
array2D = new int*[10];

//Assign each of the pointers to a new array of 10 ints
for(size_t i =0; i<10;i++) {
    array2D[i] = new int[10];
}

//Now you have an 2 dimensional array of ints that can be access by
array2D[1][3] = 15;
int test = array2D[1][3]; 
```

我希望这能解释一下指向指针的指针是什么以及它们是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:03:14.963

好吧，我看到你的目标是完整的答案，我会给出一个简短的例子。

如果您定义一个指向指针的指针数组，例如在“class foo**[10]”示例中，假设：

```
int numX = 100;
int numY = 1000;

Node **some[10];
    some[0] = new Node*[numX];
    some[0][0] = new Node[numY]; 
```

那么它的意思是：

您的第一级有 10 个节点**。因此，您有 10 个指向 Node** 类型的指针，但它们还没有指向任何有用的地方。

这只是用于存储指针的 10 个相邻内存位置。在这种情况下，它们指向的内容无关紧要，主要是它只是 10 个包含指针空间的字段。

然后取这 10 个“空格”中的第一个，并将 100 个指针数组的地址分配给类型 Node*

```
some[0] = new Node*[numX]; //numX = 100 
```

这是在运行时完成和评估的，因此您可以使用用户输入或某些应用程序逻辑给出的变量值来定义数组的维度，即内存字段。

现在您有 10 个指针中的 1 个指向 100 个指向 Node* 类型的指针，但仍然指向一个黑洞。

在最后一步中，创建 1000 个 Node 类型的对象，并将它们的地址附加到 100 个指针中的第一个。

```
some[0][0] = new  Node[numY]; //numY = 1000 
```

在上面的示例中，这意味着只有 [0][0][0] 到 [0][0][999] 是对象，您创建的 1000 是：

这样您就可以构建具有指定类型的多维数组。使整个事情奏效的原因是您在最后一个维度 (3) 中实例化您需要的内容并创建指针以唯一索引从 [0][0][0] 到 [9][99][999] 创建的每个字段.

```
some[0][1]; // memory violation not defined
some[0][0]; // good -> points to a *Node 
some[0][0][0]; // good -> actually points to Node (data)
some[1][0][0]; // memory violation not defined 
```

据我所知，您通常使用一维数组和一些小数学来模拟二维数组。就像说元素 [x][y] = [x+y*width];

无论你想使用你的记忆，最终这一切都归结为一些记忆地址及其内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T00:03:38.527

指针就是指针。它指向某物。时期。如果你理解了这么多，那么你应该能够理解指向指针的指针是什么。它只是一个指针，其值是另一个变量的内存地址，该变量本身就是指向其他东西的指针。就这样。每次添加 a`*`时，它只是另一个级别的指针间接。例如：

```
int i;
int* p_i = &i; // p_i is a pointer to an int and points at i
int** pp_i = &p_i; // pp_i is a pointer to an int* and points at p_i
int*** ppp_i = &pp_i; // ppp_i is a pointer to an int** and points at pp_i 
```

现在将该概念应用于`TheClass **foo[10];`（实际上是`TheClass** foo[10];`从编译器的角度来看）。它声明了一个名为的数组`foo`，其中包含 10 个`TheClass**`指向指针的元素。每个都`TheClass*`可能是指向特定`TheClass`对象的指针，也可能是`TheClass`元素的动态数组（没有更多上下文无法知道），然后每个`TheClass**`都是指向特定指针的`TheClass*`指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-11T23:40:09.797

```
TheClass** foo[10]; 
```

这行代码告诉编译器创建一个包含`foo`10 个类型元素的数组`pointer to (pointer to Theclass )`。

通常，当您想找出涉及多个星号、& 符号的类型时。从左到右阅读。所以我们可以把上面的代码分解成这样：

```
 (  (Theclass)  *  )  *  foo[10] 
          ^       ^     ^    ^   ^
          5       4     3    2   1

#1 an array of 10 elements named #2 foo #3 of type pointer #4 to pointer #5 to Theclass 
```

# java - WinRun4J 服务示例不运行

> ID：14288281
> 
> 赞同：1
> 
> 时间：2013-01-11T23:23:51.003
> 
> 标签：java, service, winrun4j

有谁知道如何[运行 WinRun4J 服务示例](http://winrun4j.sourceforge.net/)（随软件分发的 ServiceTest 类）？我在一个 64 位的 Windows 7 机器上，并且安装了 Java 7 JDK 和 JRE。

我执行了以下操作：

1.  复制`WinRun4J64c.exe`到`C:\test`，重命名`service64.exe`
2.  复制`service.ini`到C:\test，重命名`service64.ini`
3.  最后，我复制`WinRun4JTest.jar`到`C:\test`.

首先，您必须以管理员身份运行命令提示符，否则您无法注册该服务。因此，在以管理员身份打开的命令提示符下，我输入了以下命令：

```
C:\Test>service64.exe --WinRun4J:RegisterService 
```

到目前为止，一切都很好。但是当我去 Windows 服务面板启动服务时，我得到了错误：

> “错误 1053：服务没有及时响应……”

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-27T18:03:01.627

我有同样的问题。您还需要将 WinRun4j.jar 复制到该目录或在类路径中可以找到的某个位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-12T12:23:19.280

据我了解，您可能忘记复制`WinRun4JTest.jar`到`C:\test`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-12T23:05:32.427

您可能还想检查是否为 32 和/或 64 位版本的 WinRun4J 安装了适当的 java JRE。

快速找出这一点的方法是通过将以下内容添加到 service.ini 来启用日志记录：

日志=C:/log.txt log.overwrite=true

如果您的问题与 JVM 有关，则日志应注明。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-02T21:52:32.313

你设置了 JAVA_HOME 吗？我遇到了同样的问题，这解决了我的问题。

# php - 网站即时上传将文字和图像文件转换为 html 或 pdf

> ID：14288282
> 
> 赞同：0
> 
> 时间：2013-01-11T23:24:03.923
> 
> 标签：php, api, file, converter, file-conversion

一个客户让我创建一个能够将他们上传的文件转换为 html 或 pdf 以存储在 Web 服务器上的站点的任务。我希望他们能够上传（.doc、.tiff、.jpg 等），并让它再次将这些文件即时转换为 html 或 pdf。

我对可以解决问题的软件和 api 持开放态度，但文件必须在转换后存储在客户端网络服务器上。如果有帮助，客户正在使用带有 ssl 的 Godaddy。非常感谢任何输入，因为我一直在寻找可以在未来项目中使用的这个问题的长期解决方案。

我研究过的事情，但在使用这种方式时遇到了麻烦...... Scribd，开放式办公室 api

到目前为止我在[这里找到最多帮助的地方](http://davidwalsh.name/read-pdf-doc-file-php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:31:38.763

嗯......将文件存储为 HTML 的问题......当您上传图像时，您需要做的就是将文件存储在某个地方，然后创建一个看起来像这样的 HTML 文件：

```
<html>
    <body>
         <img src="path/to/the/image/file.png" />
    </body>
</html> 
```

将大文件（尤其是 TIFF）转换为另一种格式可能是值得的。转换 .doc 文件可能有点棘手。看看这里：[在 php 中将 .doc 转换为 html](https://stackoverflow.com/questions/253834/convert-doc-to-html-in-php)

也许还可以看看[Document zetaComponent](http://zetacomponents.org/documentation/trunk/Document/tutorial.html)，它能够在不同的文档类型之间进行转换，尽管目前还没有你提到的所有这些都受支持。

创建 PDF 应该几乎和有几个可以帮助您的 PHP 库一样简单。随便看看 SO：[Convert HTML + CSS to PDF with PHP?](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

总的来说，你必须混合很多东西才能完成这项工作。对此没有“简单”的解决方案。

# jsf - 在 webcontext 之外将静态上下文 jboss 服务为 7.1

> ID：14288283
> 
> 赞同：0
> 
> 时间：2013-01-11T23:24:05.043
> 
> 标签：jsf, jakarta-ee, jboss

[问题与此](https://stackoverflow.com/questions/4543936/load-the-image-from-outside-of-webcontext-in-jsf/4543951#4543951)非常相似，遗憾的是答案不是 Jboss 特定的。

最近的这篇[文章](http://jojovedder.blogspot.com/2012/11/configuring-static-resources-in-jboss.html)和这个[问题](https://stackoverflow.com/q/8575964/1341526)让我得出结论，在 Jboss AS 7 中有 3 种方法可以实现这一点：

1.  自定义[servlet](http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html)。
2.  添加一个 Jboss[模块](https://community.jboss.org/wiki/HowToPutAnExternalFileInTheClasspath)。
3.  只需安装另一个网络服务器，如 Apache/Nginx。

每个人的优点/缺点是什么？

具体目的是为用户先前上传的存储在文件系统中的图像提供服务。

# c# - 关于在 XNA 中绘制 2D 子弹路径的问题

> ID：14288285
> 
> 赞同：1
> 
> 时间：2013-01-11T23:24:17.333
> 
> 标签：c#, xna

所以基本上它是一个 2D 平台射击游戏。我想画出每个子弹的路径。每个子弹后面应该有一条白线，并且 alpha 值应该从子弹到它被发射的位置递减。

我怎样才能创造出这样的效果？

编辑：我只是要求一个基本的方法而不是详细的代码。我想我可能需要使用粒子效果来做到这一点？

**编辑2：**谢谢！但是我可以改变渐变线纹理的源矩形而不是缩放它吗？

如果我在某处弄错了，请纠正我，谢谢！

Texture2D 渐变线应如下所示：![在此处输入图像描述](../Images/1040afa92a222c71e75eefe9c1ad142e.png)

（据我记得在使用 Math.Atan2 求向量的角度时，0 度应该在 Y 轴的正方向）

我正在使用这种方法来查找向量的度数。由于正 Y 在窗口坐标系中沿着窗口向下，我在这里改为 -vector.Y ：（这对我来说更有意义）

```
protected float VectorToRadians(Vector2 vector)
{
    return (float)Math.Atan2(vector.X, -vector.Y);
} 
```

而且我还需要找到子弹与发射位置之间的距离，以确定源矩形的高度。所以我有这样的方法

```
protected int GetRectangleHeight(Vector2 startingPos, Vector2 currentPos, int lineTextureLength)
{
    float distance = (startingPos - currentPos).Length();
    if (distance < lineTextureLength)  // if distance is smaller than the texture length, only draw part of it
        return distance;
    else                        // if distance is larger or equal to the texture length, draw the entire texture
        return lineTextureLength;
} 
```

最后在平局

```
spriteBatch.Draw(
  gradline,
  bulletCurrentPos,
  new Rectangle(0, 0, gradline.Width, GetRectangleHeight(bulletStartingPos, bulletCurrentPos),
  Color.White,
  VectorToRadians(bulletCurrentPos - bulletStartingPos),
  Vector2.Zero,     // actually i think setting the top-center as origin might look better
  1f,                  // full scale
  SpriteEffects.None,
  0f); 
```

当子弹击中某物并消失时，路径仍应绘制到屏幕上。在此期间，源矩形的 y（以及高度，我认为，以确保矩形不会超出纹理）应更改为仅绘制轨迹的末端部分，直到 y 达到质地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T23:17:22.450

您可以使用渐变为透明颜色的线条图像来执行此操作。像这样：

![在此处输入图像描述](../Images/33cc96e59875fe757fb7418eb34d169f.png)

这是一个从屏幕中心到光标（激光瞄准器）绘制轨迹的版本：

（如果您希望它从其他地方绘制，您可以用您喜欢的 Vector2 替换`centerScreen`和`cursor_v2`，例如子弹的当前位置和该子弹最初发射的位置。为此，我的答案末尾的代码片段可能是最好的。）

```
Texture2D gradline; // set this var to your fading line texture in LoadContent 

Vector2 centerScreen = new Vector2(
  GraphicsDevice.Viewport.Width, GraphicsDevice.Viewport.Height);
Vector2 cursor_v2 = new Vector2(currentMouseState.X, currentMouseState.Y);

spriteBatch.Draw(           // this is one of many Draw overloads
  gradline,                // your line texture
  centerScreen,           // we just set this to be at your game window center
  null,                  // this means entire texture will be drawn
  Color.White,                        // no tinting
  GetAngle(centerScreen, cursor_v2), // this rotates texture, see my code below
  Vector2.Zero,      // texture will be drawn from screen center without offset
  new Vector2(GetDistance(centerScreen, cursor_v2) / gradline.Width, 1),
    // ↑ This is scaling vector, X scales texture to distance from screen center
   //  to cursor and then divides by the texture's length.
  //  See how Y is set to 1, which means texture height will not be changed.

  SpriteEffects.None,  // this can mirror the texture, we don't do this now
  0f);                // everybody leaves this zero :p 
```

再来一次没有评论：

> spriteBatch.Draw(gradline, centerScreen, null, Color.White, GetAngle(centerScreen, cursor_v2), Vector2.Zero, new Vector2(GetDistance(centerScreen, cursor_v2) / gradline.Width, 1), SpriteEffects.None, 0f);

我获取角度值的代码：（只需将其放在 Game 类中的某个位置）

```
public float GetAngle(Vector2 v1, Vector2 v2)
{
    Vector2 v = Vector2.Normalize(Vector2.Subtract(v2, v1));

    return (float)Math.Atan2(v.Y, v.X);
} 
```

或者，您可以制作一个恒定长度的纹理，然后使用以下代码对其进行旋转：

```
spriteBatch.Draw(gradline, centerScreen, null, Color.White,
  GetAngle(centerScreen, cursor_v2), Vector2.Zero, 1, SpriteEffects.None, 0f);
                                      // look here ↑
  // this Draw overload takes float value instead of Vector2 for scaling textures
  //   so with 1 the texture size will not be scaled 
```

* * *

另一种方法是在游戏中每颗子弹的位置每半秒左右创建一次粒子，当粒子过期后，将其删除。我怀疑你的子弹在直线上移动，而不是抛物线，所以它可能不值得在性能方面。

如果你的子弹经常改变它们的方向，你可以绘制它们的完整路径，但这需要绘制一个列表`VertexPositionColor`，这更复杂，但可能会产生很好的结果。

# git - Gitlab 仓库镜像

> ID：14288288
> 
> 赞同：66
> 
> 时间：2013-01-11T23:24:24.307
> 
> 标签：git, version-control, mirroring, gitlab

是否可以将[gitlab](http://gitlabhq.com/)设置为自动同步（镜像）托管在另一个位置的存储库？

目前，我知道的最简单的方法是手动推送到两个（gitlab 和另一个）存储库，但这既费时又容易出错。

最大的问题是，如果两个用户同时将更改推送到两个不同的存储库，镜像可能会重新同步。我能想出的防止此问题的最佳方法是确保用户只能推送到其中一个存储库。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-12T08:33:43.630

2016 年 12 月更新：GitLAb EE 8.2+ 支持镜像：请参阅“[存储库镜像](https://gitlab.com/help/workflow/repository_mirroring.md)”。

正如齐晓东评论的[那样](https://stackoverflow.com/users/4454315/xiaodong-qi)：

> 这个答案可以在不使用任何命令行的情况下简化（只需在 Gitlab repo 管理界面上设置）

* * *

原始答案（2013 年 1 月）

如果您的远程镜像仓库是一个[*裸*仓库，那么您可以在您的gitlab](http://sitaramc.github.com/concepts/bare.html)管理的仓库中添加一个 post-receive 挂钩，并在其中推送到您的远程仓库。

```
#!/bin/bash
git push --mirror slave_user@mirror.host:/path/to/repo.git 
```

正如 Gitolite（Gitlab 使用）[提到](http://sitaramc.github.com/gitolite/cust.html#hooks)的那样：

> 如果您只想在几个特定的​​存储库中安装挂钩，请直接在服务器上进行。

这将是：

```
~git/repositories/yourRepo.git/hook/post-receive 
```

* * *

警告（2014 年 10 月更新）

[Ciro Santilli](https://stackoverflow.com/users/895245/ciro-santilli)[在评论中](https://stackoverflow.com/questions/14288288/gitlab-repository-mirroring/14291690#comment41606464_14291690)指出：

> **今天（2014 年第四季度）这将失败**，因为 GitLab 自动将 github.com/gitlabhq/gitlab-shell/tree/... 符号链接到它管理的每个存储库中。
> 因此，如果您进行此更改，您修改的每个存储库都将尝试推送。
> 更不用说升级时可能发生的冲突`gitlab-shell`，并且当前脚本是 ruby​​ 脚本，而不是 bash（而且你不应该删除它！）。
> 
> 您可以通过读取当前目录名称并确保它与远程之间的双射来纠正此问题，但我建议人们远离这些东西

请参阅（并投票支持）[反馈“**推送到 GitLab 存储库后自动推送到远程镜像**存储库”](http://feedback.gitlab.com/forums/176466-general/suggestions/4614663-automatic-push-to-remote-mirror-repo-after-push-to)。

* * *

2016 年 7 月更新：我看到为 GitLab EE（企业版）添加了这种功能：[MR 249](https://gitlab.com/gitlab-org/gitlab-ee/merge_requests/249/builds)

*   添加在镜像存储库设置下输入远程推送 URL 的功能
*   添加实现代码以推送到远程存储库
*   添加新的后台工作人员
*   显示最新的更新日期和同步错误（如果存在）。
*   每小时同步远程镜像。

请注意，最近的`Remote Mirror Repository`（[问题 17940](https://gitlab.com/gitlab-org/gitlab-ce/issues/17940)）可能很棘手：

> 我目前正在尝试将我公司 Lossless GmbH ( [https://www.npmjs.com/~lossless](https://www.npmjs.com/~lossless) ) 的开源 npm 模块的主要开发从 GitHub.com 转移到 GitLab.com
> 
> 我正在从 GitHub 导入所有存储库，但是当我尝试关闭`Mirror Repository`并`Remote Mirror Repository`使用原始 GitHub URL 打开时，我收到一条错误消息：

```
Remote mirrors url is already in use 
```

这是失败的存储库之一：[https:](https://gitlab.com/pushrocks/npmts) //gitlab.com/pushrocks/npmts 2 个月前编辑

> 事实证明，它只需要多个步骤：
> 
> *   禁用镜像存储库
> *   按保存
> *   删除网址
> *   按保存
> *   然后添加远程镜像

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-07-11T09:00:31.753

如果没有托管您自己的 GitLab，值得知道 GitLab.com 直接引入了此功能，没有任何变通方法。

1.  在项目中使用齿轮图标选择**Mirror Repository**
2.  向下滚动到**推送到远程存储库**
3.  勾选**远程镜像存储库**：每小时自动从该存储库更新远程镜像的分支、标签和提交。
4.  输入要更新的存储库；对于 GitHub，至少您可以在 URL 中包含您的用户名和密码，如下所示：`https://yourgithubusername:yourgithubpassword@github.com/agaric/guts_discuss_resource.git`

请注意，如果您从远程存储库中提取，它仍将推送到此处设置的远程存储库。我还没有尝试过，但是您应该能够从同一个存储库中推送和拉取。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-09-27T19:19:51.907

## 使用 GitLab 和 GitHub配置**镜像存储库**的快速总结

1.  **[GitHub](https://github.com/)**：设置>开发人员设置>个人访问令牌
    *   您需要启用：`public_repo`
2.  **[GitLab](https://gitlab.com/)**：GitLab 项目 > 设置 > 存储库 > 镜像存储库

### 推

*   **Git 存储库 URL**：`https://username@github.com/username/repo.git`
*   **镜像方向**：`Push`
*   **认证方式**：`Password`
    *   **密码**：`your_github_token`

### 拉

*   **Git 存储库 URL**：`https://github.com/username/repo.git`
*   **镜像方向**：`Pull`
*   **认证方式**：`leave_empty`

[GitLab 官方文档](https://docs.gitlab.com/ee/workflow/repository_mirroring.html#setting-up-a-push-mirror-from-gitlab-to-github)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-16T14:54:20.007

我还通过 API 创建了一个项目来镜像 GitLab 6 中的存储库（API 主要用于项目创建）。

[https://github.com/sag47/gitlab-mirrors](https://github.com/sag47/gitlab-mirrors)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-11-05T08:52:35.847

今天最好的选择是使用 GitLab CI。它本质上是一个已经为 webhook 实现的服务器，它会自动为您克隆并让您运行任意 shell 命令：您所要做的就是推送。

[如果有人实现它们，服务](https://github.com/gitlabhq/gitlabhq/tree/d7c50b4a95b5530ae0e2f5249cfd9a419dd940c6/app/models/project_services)是最好的选择：它们存在于源代码树中，会进行一次推送，并且不需要额外的部署开销。

现在的关键实现困难是如何安全地存储推送凭据：可能 GitHub 的最佳选择是以某种方式获取密钥（通过服务在 UI 上进行 Oauth 将是完美的）并存储该明文。

刚刚添加的另一个选项是[自定义挂钩](https://github.com/gitlabhq/gitlabhq/pull/8276)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-11T23:29:51.827

您可以使用挂钩来自定义在某些提交后运行的脚本。有了它，您可以将新更改发送到另一个存储库。在以下页面中查找有关钩子的更多信息：http: [//git-scm.com/book/en/Customizing-Git-Git-Hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-08-16T23:23:30.463

**2020 年更新**

> 众所周知，对于外部私有存储库的免费 G​​itlab 镜像支持已于 3 月 22 日结束。

使用 cron 自动化，这里的 php 代码很少：-

[https://github.com/DeepLinkCode/GithubToGitlab](https://github.com/DeepLinkCode/GithubToGitlab)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-03-15T09:10:56.503

最好的选择不是使用 post-receive 钩子，而是通过 rsync 执行同步的部署命令，如果你喜欢 Ruby，使用[Capistrano](http://capistranorb.com/) ，如果你喜欢 Javascript (Grunt) ，使用[Shipit 。](https://github.com/shipitjs/shipit-deploy)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-15T13:01:49.753

[GitBitLabHub](https://github.com/karser/gitbitlabhub)允许您使用简单的 webhook 在 Bitbucket / Gitlab / Github 之间自动镜像存储库。

1.  为源和目标存储库生成 ssh 密钥：

```
ssh-keygen -t rsa -f ~/.ssh/project_id_rsa 
```

*   它将生成 2 个密钥，即 ~/.ssh/project_id_rsa 的 PRIVATE 密钥和 ~/.ssh/project_id_rsa.pub 的 PUBLIC 密钥。
*   PUBLIC 密钥用作部署密钥，而 PRIVATE 密钥应在 SRC_DEPLOY_KEY 和 DEST_DEPLOY_KEY 环境变量中使用。

2.  将此 PUBLIC 密钥添加为源和目标存储库的部署密钥。根据平台，它被称为部署密钥或访问密钥。了解如何将 Deploy/Access Key 添加到[bitbucket](https://bitbucket.org/blog/deployment-keys)、[bitbucket 访问密钥](https://confluence.atlassian.com/bitbucketserver/ssh-access-keys-for-system-use-776639781.html)、 [gitlab](https://docs.gitlab.com/ee/user/project/deploy_keys/index.html)、[github](https://docs.github.com/en/developers/overview/managing-deploy-keys#deploy-keys)。

*   将 PUBLIC 密钥添加到具有**只读**访问权限的源存储库。
*   将 PUBLIC 密钥添加到具有**写入**权限的目标存储库。

3.  在 docker 中运行此容器，并正确配置所有环境变量。

```
docker run -it \
    -e SRC_REPO=git@bitbucket.org:vendor/src_repo.git \
    -e DEST_REPO=git@gitlab.example.com:2222/vendor/dest_repo.git \
    -e SRC_DEPLOY_KEY=base64_encoded_key== \
    -e DEST_DEPLOY_KEY=base64_encoded_key== \
    -p 8181:8080/tcp \
    karser/gitbitlabhub 
```

*   对 SRC_DEPLOY_KEY 和 DEST_DEPLOY_KEY 环境变量使用 PRIVATE 密钥。不要忘记使用 base64 对其进行编码： `base64 -w 0 < ~/.ssh/project_id_rsa`
*   如果您正确配置了所有内容，它应该在第一次启动后镜像 repo。如果它没有在容器输出中看到日志。

4.  在源存储库中创建 webhook。使用默认设置就足够了。了解如何在[bitbucket](https://confluence.atlassian.com/bitbucket/manage-webhooks-735643732.html)、 [gitlab](https://docs.gitlab.com/ce/user/project/integrations/webhooks.html)、[github](https://docs.github.com/en/developers/webhooks-and-events/webhooks/creating-webhooks#setting-up-a-webhook)中创建 webhook 。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-12-29T18:54:53.013

GitLab 企业版现在支持版本 8.2 的存储库镜像。有关如何配置它的信息，请参见[Repository Mirroring 帮助主题](https://gitlab.com/help/workflow/repository_mirroring.md)。

# c# - 如何使用响应式扩展来缓存、限制和中继多个事件？

> ID：14288293
> 
> 赞同：4
> 
> 时间：2013-01-11T23:24:59.223
> 
> 标签：c#, events, caching, system.reactive, reactive-extensions-js

我正在尝试为 .Net 学习新的 Reactive Extensions 框架，这听起来像是我的应用程序的完美解决方案。在研究了示例之后（并且仍然对 LINQ 相当薄弱），我正在努力弄清楚如何利用 RX 框架来完成以下任务。

目标是在自定义数据源和 GUI 之间创建一个可配置的事件“中继”。中继将使用 LINQ 测试和过滤传入的事件，将合格的事件缓存在列表中，同时等待下一个时间间隔，然后同步到 GUI 线程并按照接收到的顺序播放事件。

如何使用 RX 来协调缓存、过滤和中继多个事件，例如添加、更改和删除自定义数据源中的值的事件？

这可能会问很多，但非常感谢任何有关如何解决此问题的指导。请参阅下面的示例代码...

```
public delegate void EventDelegateAdd(Thing thing);
public delegate void EventDelegateChange(Thing thing);
public delegate void EventDelegateRemove(Thing thing);

public delegate void EventDelegateBulkChangesStart();
public delegate void EventDelegateBulkChangesEnd();

// The "Things" that are stored in MyCustomDataSource

public class Thing
{
    public string Key { get; set; }
    public string Title { get; set; }
    public object OtherStuff { get; set; }
}

// A custom observable data source with events that indicate when Things are
// added, changed, or removed.

public class MyCustomDataSource
{
    public event EventDelegateAdd AddingThing;
    public event EventDelegateChange ChangingThing;
    public event EventDelegateRemove RemovingThing;

    // The rest of the class that manages the database of Things...
}

// This class forms a configurable event bridge between the MyCustomDataSource and
// the GUI.  The goal is to cache, filter, and throttle the events so that the GUI
// updates only occasionally with bulk changes that are relevant for that control.

public class MyEventCachingBridge
{
    private MyCustomDataSource mSource;

    public event EventDelegateAdd AddingThing;
    public event EventDelegateChange ChangingThing;
    public event EventDelegateRemove RemovingThing;

    public event EventDelegateBulkChangesStart BulkChangesStart;
    public event EventDelegateBulkChangesEnd BulkChangesEnd;

    public MyEventCachingBridge(MyCustomDataSource source, int eventRelayInterval)
    {
        mSource = source;

        // Magical Reactive Extensions code goes here that subscribes to all 3 events...
        //
        //   mSource.AddingThing
        //   mSource.ChangingThing
        //   mSource.RemovingThing
        // 
        //  ...filters and records a list of the events as they are received ( maintaining order of events too ),
        //  then every eventRelayInterval milliseconds, plays back the events in bulk to update the GUI 
        //  ( on the GUIs thread ).  Note that LINQ will be used to filter the Things so that a subset of
        //  Thing changes are relayed to the GUI - i.e. - not all Thing events are observed by the GUI.

    }

    public void PlayBackCachedEvents()
    {
        BulkChangesStart();   // Raise Event to notify GUI to suspend screen updates

        // Play back the list of events to push changes to ListView, TreeView, graphs, etc...
        //
        //  this.AddingThing(Thing);        // Fire events in order received
        //  this.ChangingThing(Thing);      // Fire events in order received
        //  this.RemovingThing(Thing);      // Fire events in order received

        BulkChangesEnd();   // Raise Event to notify GUI to allow control refresh
    } 
```

鉴于所描述的任务，我不确定在一般类代码中应该协调什么，以及应该在 RX 语句中隐藏什么。

我也很欣赏这样一个事实，将 3 个事件组合成一个事件并通过一个指示事件目的的枚举来大大简化事情，但是在实际应用程序中缓存的不仅仅是 3 个事件。我不希望必须使用常量 Switch 语句测试来识别每个事件的开销。将有大量事件路由到潜在的众多 GUI 界面。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T20:33:54.367

啊，我喜欢和 Rx 一起玩……这是一种方法；先是部分，然后是全部：

编辑：修改以适应评论

首先，您需要为事件设置流 - 当我们这样做的时候，让我们用 Rx 的“新的 hawtness”替换桥暴露的“旧”.NET 事件模式：

```
public Subject<Thing> BufferedAdds {get; private set;}
public Subject<Thing> BufferedChanges {get; private set;}
public Subject<Thing> BufferedRemoves {get; private set;}

_adds = Observable.FromEvent<EventDelegateAdd, Thing>(
    ev => new EventDelegateAdd(ev),
    h => mSource.AddingThing += h,
    h => mSource.AddingThing -= h);
BufferedAdds = new Subject<Thing>();

_changes = Observable.FromEvent<EventDelegateChange, Thing>(
    ev => new EventDelegateChange(ev),
    h => mSource.ChangingThing += h,
    h => mSource.ChangingThing -= h);
BufferedChanges = new Subject<Thing>();

_removes = Observable.FromEvent<EventDelegateRemove, Thing>(
    ev => new EventDelegateRemove(ev),
    h => mSource.RemovingThing += h,
    h => mSource.RemovingThing -= h);
BufferedRemoves = new Subject<Thing>(); 
```

我们还将把所有事情都与`IScheduler`现在联系起来——`IScheduler`使用是测试这个血腥东西的关键方面，而`Thread.Sleep`不是到处乱跑——我强烈建议研究这个主题！

```
public MyEventCachingBridge(
    MyCustomDataSource source, 
    int eventRelayInterval, 
    IScheduler scheduler)
{ 
```

然后，您需要将所有传入事件合并到一个流中，然后根据时间窗口“分块”该流 - 该`Buffer`运算符非常适合此操作：

```
_buffer = Observable.Merge(scheduler,
        _adds.Select(e => Tuple.Create(e, ThingEventType.Add)), 
        _changes.Select(e => Tuple.Create(e, ThingEventType.Change)), 
        _removes.Select(e => Tuple.Create(e, ThingEventType.Remove)))
    .Buffer(TimeSpan.FromMilliseconds(eventRelayInterval), scheduler); 
```

请注意，我将事件的类型打包回流中 - 这样我们就可以在播放期间采取适当的行动 - 枚举是：

```
private enum ThingEventType
{
    Add,
    Change,
    Remove
} 
```

所以现在我们需要一些东西来监听和保存批处理事件 - 这里有很多选项，但让我们使用一个简单`List`的同步：

```
private Queue<IList<Tuple<Thing,ThingEventType>>> _eventQueue;
private static object SyncRoot = new object();

_eventQueue = new Queue<IList<Tuple<Thing,ThingEventType>>>();

// A serial disposable is a sort of "Disposable holder" - when you change it's
// Disposable member, it auto-disposes what you originally had there...no real
// need for it here, but potentially useful later
_watcherDisposable = new SerialDisposable();
_watcherDisposable.Disposable = _buffer
    .ObserveOn(_scheduler)
    .Subscribe(batch => 
    { 
        lock(SyncRoot) { _eventQueue.Enqueue(batch); }
    });
    _disposables.Add(_watcherDisposable); 
```

让我们也“自动连线”播放突发脉冲以每`eventRelayInterval`毫秒脉冲一次：

```
var pulse = Observable.Interval(
       TimeSpan.FromMilliseconds(eventRelayInterval), 
       _scheduler);
_disposables.Add(pulse
      .ObserveOn(_scheduler)
      .Subscribe(x => PlayBackCachedEvents())); 
```

订阅始终是 IDisposable 的，您*会*想要处理它们，所以让我们为此添加一些内容：

```
public class MyEventCachingBridge : IDisposable
{
    CompositeDisposable _disposables;

    public void Dispose()
    {
        _disposables.Dispose();
    } 
```

现在播放：

```
public void PlayBackCachedEvents()
{
    BulkChangesStart();   // Raise Event to notify GUI to suspend screen updates

    // Play back the list of events to push changes 
    lock(SyncRoot)
    {
        foreach(var batch in _eventQueue)
        {
            // Play back the list of events to push changes to ListView, TreeView, graphs, etc...            
            foreach(var evt in batch)
            {
                switch(evt.Item2)
                {
                    case ThingEventType.Add: BufferedAdds.OnNext(evt.Item1); break;
                    case ThingEventType.Change: BufferedChanges.OnNext(evt.Item1);break;
                    case ThingEventType.Remove: BufferedRemoves.OnNext(evt.Item1);break;
                }
            }
        }
        _eventQueue.Clear();
    }
    BulkChangesEnd();   // Raise Event to notify GUI to allow control refresh
} 
```

现在——我们也想在消费者方面表现得淋漓尽致，所以让我们模拟一个 UI 窗口（这是 WPF，进行相应调整）：

```
public class BridgeConsumer : Window, IDisposable
{
    private readonly CompositeDisposable _disposables;
    private IScheduler _scheduler;
    private StackPanel _panel;

    public void OnLoaded(object sender, RoutedEventArgs ea)
    {
        _panel = new StackPanel();
        this.Content = _panel;
    }

    public BridgeConsumer(MyEventCachingBridge bridge, IScheduler scheduler)
    {
        // for cleanup of any subscriptions
        _disposables = new CompositeDisposable();
        _disposables.Add(bridge);
        _scheduler = scheduler;

        Loaded += OnLoaded;

        // setup a listener for the bulk start/end events on the bridge
        var bulkStart = Observable.FromEvent(
                h => bridge.BulkChangesStart += new EventDelegateBulkChangesStart(h),
                h => bridge.BulkChangesStart -= new EventDelegateBulkChangesStart(h));
        var bulkEnd = Observable.FromEvent(
                h => bridge.BulkChangesEnd += new EventDelegateBulkChangesEnd(h),
                h => bridge.BulkChangesEnd -= new EventDelegateBulkChangesEnd(h));

        // the "meaty bit" - 
        //    1\. create a "window" defined by bulk start/end events
        //    2\. inside that "window", trap any occurrences on a 
        //          merged view of adds/changes/removes
        //    3\. foreach event in that window, select that event
        //         (i.e., give us window contents as a stream of sorts)
        var bridgeWatcher =
            from thingEventWindow in 
                Observable.Merge(
                    bridge.BufferedAdds.Select(t => Tuple.Create("add", t)), 
                    bridge.BufferedChanges.Select(t => Tuple.Create("change", t)), 
                    bridge.BufferedRemoves.Select(t => Tuple.Create("remove", t))
                )
                .Window(bulkStart, start => bulkEnd)
            from thingEvent in thingEventWindow
            select thingEvent;

        // this could just as easily be a method, a bound call to the viewmodel, etc
        Action<Thing, string, DateTimeOffset> addToList = (thing, msg, ts) => 
        {
            var text = new TextBlock() 
            { 
                Text = string.Format(
                    "At:{0} Key:{2} Msg:{3} - nowTime = {1}", 
                    thing.TimeStamp, 
                    ts, 
                    thing.Key, 
                    msg) };
            _panel.Children.Add(text);
        };

        _disposables.Add(bridgeWatcher
            // CAREFUL! "ObserveOn" means what you'd think "SubscribeOn" would
            .ObserveOnDispatcher()
            .Subscribe(tup => 
            {
                addToList(tup.Item2, tup.Item1, _scheduler.Now);
            }));
    }

    public void Dispose()
    {
        // clean up
        if(_disposables != null) _disposables.Dispose();
    }
} 
```

整个shebang：

```
void Main()
{
    var scheduler = Scheduler.Default;
    var rnd = new Random();
    var canceller = new CancellationTokenSource();

    var source = new MyCustomDataSource();    
    var eventRelayInterval = 2000;
    var bridge = new MyEventCachingBridge(source, eventRelayInterval, scheduler);

    var window = new BridgeConsumer(bridge);
    window.Closed += (o,e) => { canceller.Cancel(); window.Dispose(); };
    window.Show();

    Task.Factory.StartNew(
        () => 
        {
            while(true)
            {
                var thing = new Thing() 
                { 
                    Key = "added thing " + rnd.Next(0, 100), 
                    Title = "title for added thing", 
                    TimeStamp = scheduler.Now.DateTime 
                };
                source.FireAdd(thing);
                Thread.Sleep(rnd.Next(1,10) * 100);
            }
        }, canceller.Token);            
}

public class BridgeConsumer : Window, IDisposable
{
    private readonly CompositeDisposable _disposables;
    private StackPanel _panel;

    public void OnLoaded(object sender, RoutedEventArgs ea)
    {
        _panel = new StackPanel();
        this.Content = _panel;
    }

    public BridgeConsumer(MyEventCachingBridge bridge)
    {
        _disposables = new CompositeDisposable();
        _disposables.Add(bridge);

        Loaded += OnLoaded;

        var bulkStart = Observable.FromEvent(
                h => bridge.BulkChangesStart += new EventDelegateBulkChangesStart(h),
                h => bridge.BulkChangesStart -= new EventDelegateBulkChangesStart(h));
        var bulkEnd = Observable.FromEvent(
                h => bridge.BulkChangesEnd += new EventDelegateBulkChangesEnd(h),
                h => bridge.BulkChangesEnd -= new EventDelegateBulkChangesEnd(h));
        var bridgeWatcher =
            from thingEventWindow in 
                Observable.Merge(
                    bridge.BufferedAdds.Select(t => Tuple.Create("add", t)), 
                    bridge.BufferedChanges.Select(t => Tuple.Create("change", t)), 
                    bridge.BufferedRemoves.Select(t => Tuple.Create("remove", t))
                )
                .Window(bulkStart, start => bulkEnd)
            from thingEvent in thingEventWindow
            select thingEvent;

        Action<Thing, string> addToList = (thing, msg) => 
        {
            var text = new TextBlock() 
            { 
                Text = string.Format(
                    "At:{0} Key:{1} Msg:{2}", 
                    thing.TimeStamp, 
                    thing.Key, 
                    msg) 
            };
            _panel.Children.Add(text);
        };

        _disposables.Add(bridgeWatcher.ObserveOnDispatcher().Subscribe(tup => 
            {
                addToList(tup.Item2, tup.Item1);
            }));
    }

    public void Dispose()
    {
        if(_disposables != null) _disposables.Dispose();
    }
}

public delegate void EventDelegateAdd(Thing thing);
public delegate void EventDelegateChange(Thing thing);
public delegate void EventDelegateRemove(Thing thing);

public delegate void EventDelegateBulkChangesStart();
public delegate void EventDelegateBulkChangesEnd();

// The "Things" that are stored in MyCustomDataSource

public class Thing
{
    public DateTime TimeStamp {get; set;}
    public string Key { get; set; }
    public string Title { get; set; }
    public object OtherStuff { get; set; }
    public override string ToString()
    {
        return string.Format("At:{0} Key:{1} Title:{2}", this.TimeStamp, this.Key, this.Title);        
    }
}

// A custom observable data source with events that indicate when Things are
// added, changed, or removed.

public class MyCustomDataSource
{
    public event EventDelegateAdd AddingThing = delegate { };
    public event EventDelegateChange ChangingThing = delegate { };
    public event EventDelegateRemove RemovingThing = delegate { };

    // The rest of the class that manages the database of Things...
    public void FireAdd(Thing toAdd)
    {
        AddingThing(toAdd);
    }
    public void FireChange(Thing toChange)
    {
        ChangingThing(toChange);
    }
    public void FireRemove(Thing toRemove)
    {
        RemovingThing(toRemove);
    }
}

// This class forms a configurable event bridge between the MyCustomDataSource and
// the GUI.  The goal is to cache, filter, and throttle the events so that the GUI
// updates only occasionally with bulk changes that are relevant for that control.

public class MyEventCachingBridge : IDisposable
{
    private enum ThingEventType
    {
        Add,
        Change,
        Remove
    }

    private MyCustomDataSource mSource;
    private IScheduler _scheduler;

    public event EventDelegateBulkChangesStart BulkChangesStart = delegate { };
    public event EventDelegateBulkChangesEnd BulkChangesEnd = delegate { };

    public IObservable<Thing> RawAdds {get; private set;}
    public IObservable<Thing> RawChanges {get; private set;}
    public IObservable<Thing> RawRemoves {get; private set;}

    public Subject<Thing> BufferedAdds {get; private set;}
    public Subject<Thing> BufferedChanges {get; private set;}
    public Subject<Thing> BufferedRemoves {get; private set;}

    private readonly IObservable<IList<Tuple<Thing,ThingEventType>>> _buffer;
    private List<IList<Tuple<Thing,ThingEventType>>> _eventQueue;
    private static object SyncRoot = new object();

    private readonly CompositeDisposable _disposables;
    private readonly SerialDisposable _watcherDisposable;

    public MyEventCachingBridge(MyCustomDataSource source, int eventRelayInterval, IScheduler scheduler)
    {
        _disposables = new CompositeDisposable();
        mSource = source;
        _scheduler = scheduler;
        _eventQueue = new List<IList<Tuple<Thing,ThingEventType>>>();

        // Magical Reactive Extensions code goes here that subscribes to all 3 events...
        //
        //   mSource.AddingThing
        //   mSource.ChangingThing
        //   mSource.RemovingThing
        // 
        //  ...filters and records a list of the events as they are received ( maintaining order of events too ),
        //  then every eventRelayInterval milliseconds, plays back the events in bulk to update the GUI 
        //  ( on the GUIs thread ).  Note that LINQ will be used to filter the Things so that a subset of
        //  Thing changes are relayed to the GUI - i.e. - not all Thing events are observed by the GUI.
        RawAdds = Observable.FromEvent<EventDelegateAdd, Thing>(
            ev => new EventDelegateAdd(ev),
            h => mSource.AddingThing += h,
            h => mSource.AddingThing -= h);
        BufferedAdds = new Subject<Thing>();

        RawChanges = Observable.FromEvent<EventDelegateChange, Thing>(
            ev => new EventDelegateChange(ev),
            h => mSource.ChangingThing += h,
            h => mSource.ChangingThing -= h);
        BufferedChanges = new Subject<Thing>();

        RawRemoves = Observable.FromEvent<EventDelegateRemove, Thing>(
            ev => new EventDelegateRemove(ev),
            h => mSource.RemovingThing += h,
            h => mSource.RemovingThing -= h);
        BufferedRemoves = new Subject<Thing>();

        _buffer = Observable.Merge(
                    _scheduler,
                    RawAdds.Select(e => Tuple.Create(e, ThingEventType.Add)), 
                    RawChanges.Select(e => Tuple.Create(e, ThingEventType.Change)), 
                    RawRemoves.Select(e => Tuple.Create(e, ThingEventType.Remove)))
            .Buffer(TimeSpan.FromMilliseconds(eventRelayInterval), _scheduler);

        _watcherDisposable = new SerialDisposable();
        _watcherDisposable.Disposable = _buffer
            .ObserveOn(_scheduler)
            .Subscribe(batch => 
            { 
                lock(SyncRoot) { _eventQueue.Add(batch); }
            });
        _disposables.Add(_watcherDisposable);

        var pulse = Observable.Interval(TimeSpan.FromMilliseconds(eventRelayInterval), _scheduler);
        _disposables.Add(pulse.ObserveOn(_scheduler).Subscribe(x => PlayBackCachedEvents()));
    }

    private void PlayBackCachedEvents()
    {
        BulkChangesStart();   // Raise Event to notify GUI to suspend screen updates

        try
        {            
            //_eventQueue.Dump();
            lock(SyncRoot)
            {
                foreach(var batch in _eventQueue)
                {
                    // Play back the list of events to push changes to ListView, TreeView, graphs, etc...            
                    foreach(var evt in batch)
                    {
                        switch(evt.Item2)
                        {
                            case ThingEventType.Add: BufferedAdds.OnNext(evt.Item1); break;
                            case ThingEventType.Change: BufferedChanges.OnNext(evt.Item1);break;
                            case ThingEventType.Remove: BufferedRemoves.OnNext(evt.Item1);break;
                        }
                    }
                }
                _eventQueue.Clear();
            }
        }
        catch(Exception ex)
        {
            Console.WriteLine("Exception during playback:" + ex);
        }
        BulkChangesEnd();   // Raise Event to notify GUI to allow control refresh
    }

    public void Dispose()
    {
        _disposables.Dispose();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T14:41:01.193

我对这个特定的节目有点晚了，但我认为您需要的是一个可观察的缓存/列表，它将提供所有添加、更新和删除的更改集。

我已经实现了它并使其开源：

博客：[http ://dynamicdataproject.wordpress.com/](http://dynamicdataproject.wordpress.com/)

演示：[https ://github.com/RolandPheasant/TradingDemo](https://github.com/RolandPheasant/TradingDemo)

# php - 在 Magento 中删除产品的问题

> ID：14288299
> 
> 赞同：2
> 
> 时间：2013-01-11T23:25:35.910
> 
> 标签：php, magento, magento-1.6

我正在尝试从目录中**删除产品。**

每当我尝试使用管理界面（批量或单一操作）删除产品时，它都会向我抛出**500 internal server error**。每当我尝试使用脚本（以编程方式）删除产品时，它都会**挂在 delete 方法调用上**。

即使打开了日志记录，也不会显示错误输出，不会抛出异常并且日志是静默的。

这是我在脚本中使用的示例代码：

```
//...
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToSelect('sku')
    ->addStoreFilter($store_id);
$collection->load();

// collection is not empty I checked
foreach ($collection as $product) {
    try {
        $product->delete(); // this is the line where it hangs
        print $product->getSku() . " deleted" . PHP_EOL;
    } catch (Exception $e) {
        print $e->getMessage();
    }
} 
```

有没有人有过这样的经历，可能是什么原因？

据我所知，它是 Magento Enterprise 1.11，它对应于 Magento Community 1.6。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:32:08.720

Magento 产品必须从 php 中的 'admin' 中删除。您必须声明要从安全区域中删除。在外部脚本中，您通常会使用 Mage::app('admin'); 但是您可以像我在下面那样声明“isSecureArea”。

此外，捕获 Mage_Core_Exception 以查看问题可能是什么。

```
try {

    $collection = Mage::getModel('catalog/product')->getCollection();
    $collection->addAttributeToSelect('sku')->addStoreFilter($store_id);
    $collection->load();

    // collection is not empty I checked
    foreach ($collection as $product) {
        try {
                    // Register a secure area to simulate 'admin'
            Mage::register('isSecureArea', true);
            $product->delete(); // this is the line where it hangs
            Mage::unregister('isSecureArea');         

            print $product->getSku() . " deleted" . PHP_EOL;
        } catch (Exception $e) {
            print $e;
        }
    }
} catch (Mage_Core_Exception $e) {
    echo( $e->getMessage() );
} 
```

编辑：快速谷歌搜索导致另一个解决方案。

[http://www.fortwaynewebdevelopment.com/magento-delete-products-programmatically/](http://www.fortwaynewebdevelopment.com/magento-delete-products-programmatically/)

这个看起来应该位于您的 magento 根目录中的文件中。它会删除所有产品，所以要小心，但它的处理方式不同。它不使用集合，而是通过首先解析产品 id 来加载每个产品对象，然后再解析它们。我考虑过先提出这个建议，但收集模型始终是“magento 方式”，并且是一个很好的第一次尝试！

我注意到有时作为集合一部分的对象与加载的对象模型有点不同。Magento 就是这样有点古怪。希望这可能会有所帮助。

```
<?php
function deleteAllProducts()
{
    require_once 'app/Mage.php';
    Mage :: app("default") -> setCurrentStore( Mage_Core_Model_App :: ADMIN_STORE_ID );
    $products = Mage :: getResourceModel('catalog/product_collection')->setStoreId(1)->getAllIds();
    if(is_array($products))
    {
        foreach ($products as $key => $pId)
        {
            try
            {
                $product = Mage::getModel('catalog/product')->load($pId)->delete();
                echo "successfully deleted product with ID: ". $pId ."<br />";
            }
            catch (Exception $e)
            {
                echo "Could not delete product with ID: ". $pId ."<br />";
            }
        }
    }
}
deleteAllProducts();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T10:52:52.997

我们找到了解决此问题的方法，可以帮助遇到此问题的任何人完成任务。

导出您要删除的所有产品，然后使用“删除实体”操作导入它们。

从管理员界面或自定义脚本中删除产品的问题仍然存在，我将继续对此进行调查，并将相应地更新答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T05:56:42.583

要按产品 SKU 删除产品，请使用以下代码：

```
<?php
//...
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToSelect('sku')
    ->addStoreFilter($store_id);
$collection->load();

// collection is not empty I checked
foreach ($collection as $product) {
    try {

        $product = Mage::getModel('catalog/product')->loadByAttribute('sku', $product->getSku());

        $product->delete();
        echo $product->getSku() . " deleted" . PHP_EOL;

    } catch (Exception $e) {
        echo $e->getMessage();
    }
} 
```

# sql - 表之间的交叉记录

> ID：14288300
> 
> 赞同：1
> 
> 时间：2013-01-11T23:25:51.637
> 
> 标签：sql, oracle

我有这个查询：

```
select pa.id,pa.name 
from patients pa 
where (select count(distinct co.doctorID) 
       from consults co 
       where co.patientID=pa.id) = (select count(do.id) 
                                    from doctors do); 
```

我在其中选择了咨询过所有医生的患者。

我正在计算不同医生的数量，看看是否等于医生总数。

但是我怎么能用`exists`和/或`in`不使用计数来做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:36:20.477

您可以使用嵌套`NOT EXISTS`：

```
select pa.id,pa.name 
from patients pa 
where NOT EXISTS
(
   select 1 FROM doctors do
   where NOT EXISTS
   (
      SELECT 1 FROM consults co
      WHERE co.doctorID=do.id
      AND pa.id=co.patientID
   )
) 
```

换句话说，选择所有没有咨询过医生的患者。至少它应该给你这个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:47:12.123

我认为您可以尝试更好的解决方案`NOT EXISTS`，根本不需要计数：

```
SELCT pa.id,pa.name 
FROM patients pa 
WHERE NOT EXISTS (SELECT *  
                  FROM doctors do 
                       LEFT JOIN consults co  
                             ON co.doctorID ON do.id
                  WHERE co.patientID=pa.id 
                      AND co.doctorID IS NULL

    ) 
```

在子查询中，我们获取所有医生并查看他们是否都为当前患者咨询过。如果 co.doctorID 为 NULL，则患者未访问该医生。

# gnuplot - gnuplot：3d 表面，在 y、z 轴墙上带有 2d 线图

> ID：14288301
> 
> 赞同：0
> 
> 时间：2013-01-11T23:25:52.603
> 
> 标签：gnuplot

我在 gnuplot 中制作了一个 3d 曲面图，我想知道是否可以在 y、z 轴的“墙”上绘制一个不相关的 2d 折线图。所以本质上，我把我的 x,y 线图粘贴到 y,z 轴上。

类似于 x,y 上的等高线图，在 3d 表面下，但不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:23:12.987

这可能不是您正在寻找的东西，但它是一种在 splot 框的“墙上”绘制函数的方法：

```
#!/usr/bin/env gnuplot

set term png 
set output 'test.png'

# this is the function you want on the wall
myfun(x,y) = y**2

# set the ranges manually
xmin = -10 
xmax = 10
ymin = -10 
ymax = 10

x_range = xmax - xmin
y_range = ymax - ymin

scaler = 0.001
x1 = xmin - x_range*scaler
x2 = xmin + x_range*scaler
x3 = xmax - x_range*scaler
x4 = xmax + x_range*scaler
y1 = ymin - y_range*scaler
y2 = ymin + y_range*scaler
y3 = ymax - y_range*scaler
y4 = ymax + y_range*scaler

xminwall(x,y) = (x > x1 && x < x2) ? myfun(x,y) : 1/0 
xmaxwall(x,y) = (x > x3 && x < x4) ? myfun(x,y) : 1/0 
yminwall(x,y) = (y > x1 && y < x2) ? myfun(x,y) : 1/0 
ymaxwall(x,y) = (y > x3 && y < x4) ? myfun(x,y) : 1/0 

splot sin(x), xminwall(x,y) 
```

结果如下：

![在此处输入图像描述](../Images/ed372de3e6cddb3ea232d320c0a17949.png)

该脚本所做的是绘制您想要在墙上绘制的函数 (myfun(x,y)) 并对其进行绘制，仅限于非常靠近墙壁的值。表面网格具有一定数量的网格点，其中一个点始终位于 x 和 y 范围内。

在这个例子中，如果我刚刚完成`splot sin(x), y**2`，我会得到两个重叠的表面。

我制作了四个函数（`xminwall`等），因此您可以在 x/y 范围的最小/最大墙壁上绘制墙壁。请注意，`mufun(x,y)`它必须是正确 x 和 y 的函数，才能使绘图正确显示在墙上，否则您可能会得到一条直线。

# c# - 如何指定表达式树的返回类型？

> ID：14288307
> 
> 赞同：2
> 
> 时间：2013-01-11T23:26:08.537
> 
> 标签：c#, lambda, expression-trees

如果我手动构建表达式树，运行时似乎会自动确定返回类型。因此，如果我构建一个如下所示的表达式树：

```
// Order contains a navigation property for Customer
(Order o) => o.Customer; 
```

运行时将返回类型确定为客户，本质上是这样的：

```
Expression<Func<Order, Customer>> efd = (Order o) => o.Customer; 
```

我如何构建它 - 或更改我构建的内容，因此返回是对象，即表达式为：

```
Expression<Func<Order, object>> ef = (Order o) => o.Customer; 
```

这是通用的，我在编译时不知道返回类型是 Customer；它可以是（在这种情况下）订单中的任何导航属性。

**澄清**

假设我从这样的表达式开始：

```
Expression<Func<OrderDTO, object>> ef = (OrderDTO o) => o.Customer; 
```

我有一个例程正在重建它，通过遍历树来更改类型，`OrderDTO`并`Order`根据从/到类型的映射更改类型。这就是我所做的一切，但结果表达式是

```
Expression<Func<Order, Customer>> ef = (Order o) => o.Customer; 
```

因此，当我重建树时，我需要以某种方式指定返回类型 - 看起来系统正在自动确定返回类型，因为我没有指定它。谢谢，雷

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T19:51:02.273

如果没有实际看到您的代码，很难说，但看起来您使用的版本[`Expression.Lambda()`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.lambda.aspx)不允许您指定创建的表达式的类型。如果你这样做，那么委托类型将自动决定是对的。

要解决此问题，您需要使用`Expression.Lambda()`允许您使用类型参数（例如`Expression.Lambda<Func<Order, object>>(…)`）指定委托类型的版本，或者在您的情况下更可能的是，将委托类型指定为类型的普通参数的版本`Type`（`Expression.Lambda(funcType, …)`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-03T04:15:28.170

```
public class ReturnTypeVisitor<TSource, TReturnValue> : ExpressionVisitor{

    protected override Expression VisitLambda<T>(Expression<T> node)
    {
        var delegateType = typeof(Func<,>).MakeGenericType(typeof(TSource), typeof(TReturnValue));
        return Expression.Lambda(delegateType, Visit(node.Body), node.Parameters);
    }

    protected override Expression VisitMember(MemberExpression node)
    {
        if (node.Member.DeclaringType == typeof(TSource))
        {
            return Expression.Property(Visit(node.Expression), node.Member.Name);
        }
        return base.VisitMember(node);
    }
} 
```

用法：

```
public class Foo{
    public Bar Bar { get; set; }
}

public class Bar { }

Expression<Func<Foo, object>> expression = p => p.Bar;
Expression<Func<Foo, Bar>> stronglyTypedReturnValue =(Expression<Func<Foo, Bar>>) new ReturnTypeVisitor<Foo, Bar>().Visit(expression); 
```

# iphone - UIWebView 和书签加载

> ID：14288309
> 
> 赞同：1
> 
> 时间：2013-01-11T23:26:35.430
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uiwebview

我尝试在 UIWebView 中加载书签（可读性）。但我有一些问题......你能告诉我，这里有什么问题吗？

文章加载，但不可读。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *searchURL = @"(function(){window.baseUrl='https://www.readability.com';window.readabilityToke‌​n='';var s=document.createElement('script');s.setAttribute('type','text/javascript');s.se‌​tAttribute('charset','UTF-8');s.setAttribute('src',baseUrl+'/bookmarklet/read.js');document.documentElemen‌​t.appendChild(s);})()";

    //NSURL *url =  [NSURL URLWithString:[searchURL stringByAddingPercentEscapesUsingEncoding: NSUTF8StringEncoding]];
    NSURL *article = [NSURL URLWithString:@"http://www.nytimes.com/2013/01/12/world/asia/us-can-speed-afghan-exit-obama-says.html?hp&_r=0"];

    // NSURL *url = [NSURL URLWithString:searchURL];
    [webview loadRequest:[NSURLRequest requestWithURL:article]];
    //[webview loadRequest:[NSURLRequest requestWithURL:url]];
    [webview stringByEvaluatingJavaScriptFromString:searchURL];

    // Do any additional setup after loading the view from its nib.
} 
```

我将感谢您的帮助！

# php - PHP 和 MySQL 选择

> ID：14288312
> 
> 赞同：1
> 
> 时间：2013-01-11T23:26:48.613
> 
> 标签：php

好的，所以我正在制作 php，它将从与您在文本框中输入的名称匹配的数据库中提取每个条目。所以这里是数据库的图像 [http://i.stack.imgur.com/LvmrM.png](http://i.stack.imgur.com/LvmrM.png) < 数据库的屏幕截图

因此，如果我将“DigitalNuke”放在文本框中并点击提交按钮，我只想要第二列“referrer”中具有“DigitalNuke”作为值的行

```
<form ACTION="" METHOD=post>
<div class="input-append">
  <input class="span2" id="youruser" type="text" name="youruser" placeholder="Your Username">
  <button class="btn btn-success" type="submit">Retrive</button>
</div>
</form>
<?php
   require_once 'connect.php';
   $name = isset($_POST['youruser']);
   $conn=  mysqli_connect ($dbhost,$dbuser,$dbpass,$dbname)or die(mysqli_error());
   $query1 = "SELECT 'id', 'referrer', 'username', 'brigade', 'faction', 'activity' FROM refmems WHERE referrer='$name";
   $result = mysqli_query($conn, $query1)
      or die('Error querying the database: ');
  echo '<table class="table table-bordered">';
  echo '<caption>Your Referred Members</caption>' . '<thead><tr><th>ID</th>' . '<th>Username</th>' . '<th>Brigade</th>' . '<th>Faction</th>' . '<th>Activity</th>' . '</tr></thead>';
      while ($row = mysqli_fetch_array($result)) {
  echo "<tr class='success'><td>" . $row['id'] . "</td><td>" . $row['username'] . "</td><td>" . $row['brigade'] . "</td><td>" . $row['faction'] . "</td><td>" . $row['activity'] ."</td></tr>";     
}
?> 
```

所以到目前为止，当我点击提交按钮时它什么也没做。嗯，它有点工作，除了不是从表中提取数据之外，它只是在生成的表的每一行中放置 id、用户名、旅、派系、活动。 [http://i.stack.imgur.com/XF71h.png](http://i.stack.imgur.com/XF71h.png) < 截图

任何帮助将不胜感激，如果您需要其他任何帮助，请告诉我，我会发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:31:42.653

```
 $query1 = "SELECT 'id', 'referrer', 'username', 'brigade', 'faction', 'activity' FROM refmems WHERE referrer='$name"; 
```

应该：

```
 $query1 = "SELECT `id`, `referrer`, `username`, `brigade`, `faction`, `activity` FROM refmems WHERE referrer='$name'"; 
```

还学习如何为 MySQLi 使用准备好的语句。您的代码对 SQL 注入开放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:31:59.847

你的语法坏了。

```
"SELECT id, referrer, username, brigade, faction, activity FROM refmems WHERE referrer='$name" 
```

之后没有结束单引号`$name`，并且字段没有被引用（或使用反引号，但不是必需的）。

另外，你是在自找麻烦。你有没有验证/清理的用户输入。

# python - 如何在 pip 中安装具有公共依赖项的私有模块？

> ID：14288313
> 
> 赞同：3
> 
> 时间：2013-01-11T23:26:48.877
> 
> 标签：python, pip, pypi

我找到了一些与[dependency_links 相关](https://stackoverflow.com/questions/3472430/how-can-i-make-setuptools-install-a-package-thats-not-on-pypi)的答案，但不幸的是它们还没有为我工作。我正在编写一个 python 模块。它存储在私有 pypi 存储库中，并依赖于存储在同一个私有存储库和[公共 pypi 存储库](http://pypi.python.org/pypi)中的一些依赖项：

```
setup(
# some other setup
name = 'mymodule',
install_requires = [
    'kazoo',
    'privateDependencyA',
    'privateDependencyB'
],
dependency_links = [
    "http://my.private.repo/eggs/#privateDependencyA",
    "http://my.private.repo/eggs/#privateDependencyB"
]) 
```

我存储`mymodule`在我的私人存储库中，因此我尝试安装它：

```
pip install -i http://my.private.repo/eggs/ mymodule 
```

这工作得很好，但找不到`kazoo`公共图书馆。因此我尝试了`-f`标志：

```
$ pip install -i http://my.private.repo/eggs/ -f http://pypi.python.org/ mymodule                                                                                                                                                                                                                                      
Downloading/unpacking mymodule
  Downloading mymoudle-<version>.tar.gz (unknown size): 3.1kB downloaded
  Running setup.py egg_info for package mymodule

Downloading/unpacking kazoo (from mymodule)
  Could not find any downloads that satisfy the requirement kazoo (from mymodule)

Downloading/unpacking kazoo (from mymodule)
  Could not find any downloads that satisfy the requirement kazoo (from mymodule) 
```

如何从公共 pypi 存储库下载依赖项，同时从我的私人存储库安装我的模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T18:45:18.397

添加`--extra-index-url https://pypi.python.org/simple`到您的命令中。它将首先查看[http://my.private.repo/eggs/](http://my.private.repo/eggs/)，然后查看[https://pypi.python.org/simple](https://pypi.python.org/simple)。

[在https://pip.pypa.io/en/stable/cli/pip_wheel/#cmdoption-extra-index-url](https://pip.pypa.io/en/stable/cli/pip_wheel/#cmdoption-extra-index-url)查看更多信息

# html - HTML/CSS：绝对定位

> ID：14288314
> 
> 赞同：1
> 
> 时间：2013-01-11T23:26:53.007
> 
> 标签：html, css, css-float, css-position

我正在使用`position: absolute;`，所以我的 div 可以放在底部，但我还需要使用`float: left;`，以便将每个新 div 放在它旁边，但它们只是被放置在同一个位置，有什么建议吗？

```
<!DOCTYPE html>
<html>
<head>
   <style type="text/css">

        .media_container{
                min-width:  800px; max-height: 800px; 
                min-height: 300px; max-height: 300px;
                border: 2px solid #f00; 
                position: relative;
                }

        .media_header{
                min-width:  220px; max-width:  220px;
                min-height: 50px; max-height: 50px;
                border: 2px solid #f00;
                float: left;
                /*position: absolute;*/
                margin-left: 30px;
                bottom: 30px;
                }

    </style>
  <title>Test</title>
</head>

<body>

  <div class='media_container'>

    <div class='media_header'>Header 1</div>
    <div class='media_header'>Header 2</div>
    <div class='media_header'>Header 3</div>

  </div>

 </body>] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:56:48.150

[**jsFiddle 演示**](http://jsfiddle.net/HeAXf/)

为了在网页底部浮动 div，您的容器需要设置`absolute`并放置在`bottom`.

然后，此容器中的所有内容都`relative`与您的浮动要求一起。完毕！

```
.media_container {
  position: absolute;
  bottom: 0;
  min-width: 800px;
  max-height: 800px;
  min-height: 300px;
  max-height: 300px;
  border: 2px solid #f00;
}
.media_header {
  position: relative;
  float: left;
  margin-left: 30px;
  margin-top: 30px;
  min-width: 220px;
  max-width: 220px;
  min-height: 50px;
  max-height: 50px;
  border: 2px solid #f00;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T23:38:13.557

如果所有 div 具有相同的`position:absolute`属性，那么它们都将重叠。

为要在底部显示的 div 设置一个父 div。`position:absolute`并使用and设置这个父 div 的样式`bottom:0`

[继承人](http://jsfiddle.net/5GMrj/)JSFIDDLE 。我希望这是你想要的。

# iphone - 如何在 iOS 设备上围绕触摸显示一个圆圈？

> ID：14288320
> 
> 赞同：0
> 
> 时间：2013-01-11T23:28:00.137
> 
> 标签：iphone, ios, location, touch, point

我有一个演示文稿，我想在其中演示我的应用程序。我正在使用 AirServer 将我的 iPod 镜像到我将连接到投影仪的 mac。

Android 有一个开发者选项，当你触摸屏幕时会显示一个圆圈，这样观众就可以看到演示者触摸屏幕的位置。有没有办法在 iPod touch 上做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:05:41.610

这可能不是最好的解决方案，但您可以创建一个淡入淡出的图像，除了您想要的触摸/焦点之外，它会在屏幕上放置一个半透明的覆盖物。

在图像上将touchedEnabled设置为NO仍然允许您或用户单击按钮，此时您可以检查图像是否显示，如果显示，将其淡出并继续演示

*如果这是您想保留在应用程序中的功能，我建议设置一个 NSUserDefault 值来标记它已显示或未显示的值。一旦用户看到引导访问，将该值设置为 true 并且不再显示。

# msbuild - 在 TFS 2012 升级后，TFS 构建失败并在升级的 MSBuild 构建脚本中执行任务

> ID：14288321
> 
> 赞同：2
> 
> 时间：2013-01-11T23:28:02.030
> 
> 标签：msbuild

我们有一个项目，我们在 TFS 2008 中自定义了 TFS 构建脚本，当时构建基于 MSBuild，而不是工作流文件。这个自定义脚本使用[`<Exec>`任务](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx)调用 NAnt 进行一些打包。

将我们的 TFS 2010 安装迁移到新服务器并升级到 TFS 2012 后，TFSBuild.proj 文件中的该行导致错误：

```
Target "AfterCompile: (TargetId:321)" in project "C:\Builds\2\Proj\Continuous Integration (Proj)\BuildType\TFSBuild.proj" (target "Compile" depends on it):
Using "Exec" task from assembly "Microsoft.Build.Tasks.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a".
Task "Exec" (TaskId:209)
  Task Parameter:Command=C:\Tools\NAnt\bin\Nant.exe (TaskId:209)
  Task Parameter:WorkingDirectory=..\Sources\ (TaskId:209)
  Command: (TaskId:209)
  C:\Tools\NAnt\bin\Nant.exe (TaskId:209)
C:\Builds\2\Proj\Continuous Integration (Proj)\BuildType\TFSBuild.proj(225,5): error MSB6003: The specified task executable "cmd.exe" could not be run. The directory name is invalid
Done executing task "Exec" -- FAILED. (TaskId:209)
Done building target "AfterCompile" in project "TFSBuild.proj" -- FAILED.: (TargetId:321) 
```

该行如下所示：

```
<Target Name="AfterCompile">
  <Exec Command="C:\Tools\NAnt\bin\Nant.exe" WorkingDirectory="..\Sources\" />
  <!-- ... -->
</Target> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T18:38:58.267

检查您的工作目录。我希望这指向一个不存在的位置。

具体来说，默认名称`Sources`和`Binaries`目录名称在 TFS 2012 中更改为`src`和`bin`. 使用属性`$(SourcesSubdirectory)`并`$(BinariesSubdirectory)`获得正确的值。

# javascript - 所有标签的第一级子级向左浮动破坏默认显示值

> ID：14288323
> 
> 赞同：1
> 
> 时间：2013-01-11T23:28:31.553
> 
> 标签：javascript, html, css

我需要`float:left`为所有第一级子级设置，但是在添加此样式元素后，添加`display:inline/inline-block/ other not block` 后跟`#root`选择器后具有默认值 display = `display:block`; 之前添加的元素`#root`具有标准的默认显示值。

```
#root > * {
     float:left;
} 
```

* * *

```
<div id="root">
    <div></div>
<div> 
```

* * *

```
var aBefore = document.createElement("a");
var aAfter = document.createElement("a");
var root = document.getElementById("root");

document.body.insertBefore(aBefore,root);
root.appendChild(aAfter);

display(aBefore);
display(aAfter);

function display(element){
    alert(window.getComputedStyle(element).display);
} 
```

## 例子：

[http://jsfiddle.net/LpQ5V/1/](http://jsfiddle.net/LpQ5V/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:29:54.487

给一个元素一个`float`值本质上意味着`display: block`。

规范的[操作部分：](http://www.w3.org/TR/CSS2/visuren.html#propdef-float)

> 该元素生成一个向左浮动的块框。

*编辑*——Esailija 正确地指出这`display: none`实际上会隐藏一个浮动元素 :-)

*再次编辑*——我上面所说的可能过于简单化了。与其说是力量，不如说是`float`力量`display: block`；就是它会产生与元素*相同的效果。* `display: block`它实际上只适用/适用于无论如何都是“盒子”元素的元素（根据规范）。我还没有进行详尽的经验测试来查看浮动 a`<span>`或`<em>`元素是否会做任何事情。

# ios - UIImage 可拉伸图像以生成消息气泡状结果

> ID：14288324
> 
> 赞同：0
> 
> 时间：2013-01-11T23:28:33.280
> 
> 标签：ios, uiimage

我正在尝试实现一个类似于对话框气泡的可拉伸图像但是我没有做对，

使用以下代码：

UIImage *ballon = [[UIImage imageNamed:@"strech.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(12, 11, 12, 9)];

我得到以下结果：

![在此处输入图像描述](../Images/1cab0ae3ba077b817d89a115b41c8426.png) 这是我原来的 leftBubble.png

![在此处输入图像描述](../Images/1b04867c953c98e9c436092ec857de44.png)

我可能做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:20:52.260

您不应该在整个图像上使用渐变。这就是线条的来源。图像的中心（被拉伸的部分必须是纯色，因为它不仅水平地重复，而且垂直地重复。

如果您只是水平拉伸图像，那么您的图像可能工作得很好。

试试我为你制作的这张图片，并使用一些不同的 capInsets：

![在此处输入图像描述](../Images/38fe51b3c53dfa6d656c400ed56248af.png)

```
UIImage *ballon = [[UIImage imageNamed:@"strech.png"]resizableImageWithCapInsets:UIEdgeInsetsMake(12, 20, 22, 12)]; 
```

请注意，我所有的造型都发生在气泡的边缘，而中心是实心的。

编辑：

这是图像的较小版本。我做了一个更大的，这样你就可以看到我在做什么。

![在此处输入图像描述](../Images/f689852a5e1136bb2acd69d7294aaaea.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T01:02:16.267

我无法评论 jhilgert00 的回答，但我想补充一点：`-[UIImage resizableImageWithCapInsets:]` *平铺*内部像素，而不是*拉伸*，这就是渐变不起作用的原因，正如 jhilgert00 所说。

如果您使用的是 iOS 6.0 或更高版本，则可以使用`-[UIImage resizableImageWithCapInsets:capInsets resizingMode:UIImageResizingModeStretch]`

来自[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)

> -(UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets
> 
> [每个方向上未被帽覆盖的]像素区域从左到右和从上到下平铺，以调整图像大小。

和

> -(UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets resizingMode:(UIImageResizingMode)resizingMode
> 
> 如果您特别希望使用 UIImageResizingModeStretch 调整大小模式调整图像大小，则应仅调用此方法代替其对应方法。

# php - PHP MySQL Yii - 数据库读取而不是写入

> ID：14288327
> 
> 赞同：2
> 
> 时间：2013-01-11T23:29:07.687
> 
> 标签：php, mysql, yii, lamp

我的本地灯组上有一个可用的 Yii 应用程序。现在，当我将应用程序放在灯服务器上时，应用程序读取数据库并运行，但应用程序没有成功写入数据库。我没有收到任何错误日志。有什么想法吗？

这是我更新数据库的方式：

```
public function actionIndex()
{
    if ($_GET["yep"] == "") {
      pd_error("You are not logged in!");
    }
    list($uid, $domain) = preg_split("/@/",$_GET["yep"],2);
    $model=$this->loadModel($uid);
    $this->redirect($model->URL."?".$model->Unique_ID);     
}

public function loadModel($uid)
{
    $model=People::model()->findByPk($uid);
    $model->Login_Count++;
    $model->Last_Logged=date('Y-m-d H:i:s');
    if ($model->validate()) {
         $model->save();
    } else { 
        $this->render('notice');
    }
    return $model;
} 
```

奇怪的是，即使数据库没有更新 Login_Count 和 Last_Logged 用户仍然会被重定向到他们的 url，所以 sql 必须是有效的，因为通知页面永远不会加载。有什么想法吗？

## 更新+解决方案

问题最终是 mysql 服务器将自动提交设置为 false。要在应用程序级别覆盖它，将以下行添加到 config/main.php 数据库数组：

```
'db'=>array(
    ...
    'initSQLs'=>array('SET AUTOCOMMIT=1',),
    ...
); 
```

[Yii：在 mysql 服务器上使用活动记录并关闭自动提交](https://stackoverflow.com/questions/14330815/yii-using-active-record-with-autocommit-off-on-mysql-server)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T18:03:48.677

页面的呈现`notice`不会停止您的重定向。它可能会被渲染，但由于重定向，您将无法看到它。尝试重构您的代码。

*   您正在验证您的模型两次，并且可能会跳过验证，因为没有来自 App 用户的数据。
*   您不检查是否`People`确实找到了模型。
*   您可以覆盖一些`CWebUser::afterLogin`方法来执行此类操作（更新登录计数和上次登录日期）

也许这种方式（快速修复）会起作用：

```
function actionIndex()
{
    if ($_GET["yep"] == "") {
      pd_error("You are not logged in!");
    }
    list($uid, $domain) = preg_split("/@/",$_GET["yep"],2);
    if (null === ($model=People::model()->findByPk($uid))
        throw new CHttpException(404);
    $model->Login_Count++;
    $model->Last_Logged=date('Y-m-d H:i:s');
    if ($model->save()) {
         $this->redirect($model->URL."?".$model->Unique_ID);
    } else {
        // echo CHtml::errorSummary($model)
        $this->render('notice');
    }       
} 
```

# c++ - 一个类是 POD 从二进制中读取它就足够了吗？

> ID：14288328
> 
> 赞同：0
> 
> 时间：2013-01-11T23:29:11.087
> 
> 标签：c++, class

对于客户端/服务器应用程序，我需要发送和接收 c++ 对象。我不需要相应的类来做任何花哨的事情，但想要获得最大的性能（关于网络流量和计算）。所以我想简单地将它们作为二进制字符串传输。基本上我希望能够做到以下几点

```
//Create original object
MyClass oldObj();

//save to char array
char* save = new char[sizeof(MyClass)];
memcpy(save, &oldObj, sizeof(MyClass));

//Somewhere of course there would be the transfer to the client/server

//Read back from char array
MyClass newObj();
memcpy(&newObj, save, sizeof(MyClass)); 
```

我的问题：我的班级需要完成什么才能使它起作用？Naturaly Pointers 作为成员在转移到另一个应用程序时将不起作用。但是，我的 Class 被认为是 POD（在 c++03 和/或 c++11 中）并且没有任何指针或等价物（如 STL 容器）作为成员就足够了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T23:31:55.067

两台机器都需要：

1.  具有相同的字节序（对于 int）
2.  相同的浮点表示（双精度）
3.  所有类型的尺寸相同。
4.  同一个编译器
5.  用于构建应用程序的相同标志。
6.  指针不能很好地转移。

**但是**网络将是这里最慢的部分。
与传输成本相比，序列化大多数对象的成本将无关紧要。当然，您的对象越大，成本就越高，但需要一段时间才能产生重大影响。

更高的维护成本也是您应该考虑的因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:32:04.100

> 我的班级需要完成什么才能使其发挥作用？

*   它不能有指针成员，你已经提到了。
*   它不能有大小由实现定义的成员，例如`int`.
*   由于字节顺序不同，它不能有整数成员。
*   由于表示不同，它不能有浮点成员。
*   ......可能还有更多！

基本上，除了非常特别受限的情况外，您不能这样做。您必须选择一个协议并使您的数据符合它，才能安全地通过网络发送。

没什么大不了的，因为性能将受网络速度和延迟的限制，而不是受您的值符合协议所需的操作的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T00:09:18.220

您对运行它的硬件/操作系统有多少控制权？您是在编写超级便携的代码，还是仅在 32 位和 64 位 x86 Windows [例如] 上运行？

如上所述，要完全“超级便携”，您不能拥有任何形式的“实现定义”大小的对象（例如可以是 16、18、32、36 或 64 位的 int）。此类项目需要存储为已定义数字和顺序的字节，以确保在传输时不会被切断/重新排序。浮点数可能更糟......

许多“超级便携”应用程序将其数据存储为文本。它有点慢，但它使它易于移植，因为文本只是一个字节流，无论您在何种架构上运行它，并且无论您使用哪种机器，它的排序方式都相同（只要您坚持 0-9，A- Za-z, !?<>,.()*& 和其他一些字符——注意 EBCDIC 编码的机器，但它们倾向于处理“ascii-to-ebcdic”转换）。另一端只需要将文本转换回字符串/整数/浮点数/双精度，无论您需要什么。从整数到数字字符串的转换需要对每个数字进行一次除法（使用十六进制或 base-36 会更好一些，但会降低人类可读性 - 有时是好事，有时是坏事）。这显然比存储 4 个字节要慢。另一个缺点是它' s（取决于所使用的值）在文本中存储数字通常比二进制存储时间更长。所以你的网络数据包会大一点。这将比转换产生更大的影响，因为处理器可以在使用 10Gbit 网卡发送 1KB 所需的时间内进行大量数学运算。当然，您需要一些额外的字节（空格、逗号、换行符或其他任何可能的字符），以便您可以区分一个数字 123456 和三个 12、34、56。[当然，不需要使用“ ，“在每个之间]。一旦它到达，你需要一些代码来解析另一端的整个事情。因为处理器可以在使用 10Gbit 网卡发送 1KB 的时间内进行大量数学运算。当然，您需要一些额外的字节（空格、逗号、换行符或其他任何可能的字符），以便您可以区分一个数字 123456 和三个 12、34、56。[当然，不需要使用“ ，“在每个之间]。一旦它到达，你需要一些代码来解析另一端的整个事情。因为处理器可以在使用 10Gbit 网卡发送 1KB 的时间内进行大量数学运算。当然，您需要一些额外的字节（空格、逗号、换行符或其他任何可能的字符），以便您可以区分一个数字 123456 和三个 12、34、56。[当然，不需要使用“ ，“在每个之间]。一旦它到达，你需要一些代码来解析另一端的整个事情。

如果您知道您的系统总是有 32 位整数和 IEEE-754 浮点数 [这些非常常见！]，那么您可能只需担心字节顺序即可。如果你知道它总是在“x86”或类似的地方，你也不必担心字节顺序。但是，当您决定“在 iphone 上运行我的代码将是一个好主意”时，您现在可能不得不修改您的代码。当然，您可以将其留给 iphone 方面以符合其余要求。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-11T23:47:41.637

`class`其他答案已经提到如何为此目的使用 a 。就个人而言，我更喜欢使用 a`struct`代替。在 C++ 中，a`struct`可以像 a 一样拥有成员方法/运算符、构造函数/析构函数、支持继承等`class`。但是，a`struct`具有定义明确且可预测的内存布局，并且可以通过`#pragma`语句显式对齐该布局以添加/删除编译器的隐式填充（我之前从未尝试过对齐 a `class`，但我认为它是受支持的）。`struct`对于必须在应用程序进程之外交换的数据，我总是使用 8 位对齐。出于所有意图和目的，在现代编译器中， a`struct`基本上与 a 相同`class`，只是其成员的默认可见性是`public`而不是`private`. 但我喜欢为了不同的目的而保留`struct`和`class`分开。A`struct`只是一个原始数据容器，您可以在内存中自由操作、覆盖等。A`class`是一个对象，其内存布局和填充是编译器定义的，不应被弄乱。

# rest - CakePHP REST 插件不返回数据

> ID：14288331
> 
> 赞同：1
> 
> 时间：2013-01-11T23:29:29.333
> 
> 标签：rest, cakephp

我正在考虑在此处使用 REST 插件：[https](https://github.com/kvz/cakephp-rest-plugin) ://github.com/kvz/cakephp-rest-plugin以提供可用于开发 PhoneGap 应用程序的 API。

我已经设法按照文档中所示设置插件，但是我的 JSON 中没有返回任何数据......我在这里看到了一些提到相同问题的问题：[https ://github.com/kvz/ cakephp-rest-plugin/issues?state=closed](https://github.com/kvz/cakephp-rest-plugin/issues?state=closed)我尝试实施但无济于事。

有没有人自己遇到过这个问题？该插件已经一年没有更新了，所以我想知道 Cake 的内部工作是否发生了变化，导致它崩溃了？

无论如何，这是我的代码：

```
// UsersController
public $components = array (
        'Rest.Rest' => array(
            'catchredir' => true,
            'actions' => array(
                'extract' => array(
                    'test' => array('users'),
                ),
            ),
            'ratelimit' => array(
                'enable' => false
            )
        ),
    );

public function test(){
        $users = array(
            array('name' => 'user-1'),
            array('name' => 'user-2'),
            array('name' => 'user-3')
        );
        $this->set(compact('users'));
    } 
```

在我的路线中：

```
Router::mapResources(array('users'));

Router::parseExtensions('rss','json','xml'); 
```

这是返回的 JSON：

```
{
    "data": {
        "User": []
    },
    "meta": {
        "status": "ok",
        "feedback": [],
        "request": {
            "http_host": "sample.com",
            "http_user_agent": "Mozilla\/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit\/537.22 (KHTML, like Gecko) Chrome\/25.0.1364.29 Safari\/537.22",
            "server_addr": "##.##.###.###",
            "remote_addr": "##.###.###.###",
            "server_protocol": "HTTP\/1.1",
            "request_method": "GET",
            "request_uri": "\/users\/test.json",
            "request_time": 1357946870
        },
        "credentials": {
            "class": null,
            "apikey": null,
            "username": null
        },
        "time_epoch": "1357946871",
        "time_local": "Fri, 11 Jan 2013 15:27:51 -0800",
        "version": "0.3"
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:43:23.790

Kevin 的插件是为 Cake 1.3 构建的（我不久前用它构建了一个应用程序）。Cake 2.x 恕我直言，它几乎已经过时了。只有在需要日志记录或速率限制或 http 身份验证时才应使用它。

不久前我回答了一个类似的问题，解释了简化的 REST Cake 2.x 提供： [https ://stackoverflow.com/questions/10099449/creating-a-rest-api-with-cakephp/10099878#10099878](https://stackoverflow.com/questions/10099449/creating-a-rest-api-with-cakephp/10099878#10099878)

更新：在设置中检查您的提取数组。格式随着上一个 1.3 版本而改变，但部分 readme.md 没有得到更新（即 tweets 示例是错误的）。请参阅“警告 - 向后兼容性损坏”部分或仅检查组件源代码`$settings`数组以获取正确的格式。

适合您的正确格式：

```
public $settings = array(
    'actions' => array(
        'test' => array(
            'extract' => array('users') 
```

# templates - 错误：“模板”（作为消歧器）只允许在模板中使用

> ID：14288333
> 
> 赞同：2
> 
> 时间：2013-01-11T23:29:46.810
> 
> 标签：templates, gcc

我正在尝试使用当前的 c 编译器编译一些旧代码（大约 2003 年的 robocup 足球模拟服务器）：

`gcc-c++-4.7.2-2.fc17.x86_64`

下面的函数会在这个问题的主题中产生错误。任何关于如何修改函数以消除错误的建议将不胜感激。

```
int getInt( const std::string& param ) const
{ return rcss::conf::Builder::template get< int >( param ); } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:56:32.917

我假设这`Builder`是一个类，并且`get`是该类的静态模板方法。

关键字`template`告诉编译器这`get`是一个模板方法。但是，`gcc`如果它不在模板中，则表示您不应该使用该关键字。

因此，删除`template`关键字应该可以使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T10:45:10.903

从 C++03、14.2.4

> 当成员模板特化的名称出现在postfix *-expression*`.`之后或之后，或者在*限定 id*中的*nested-name-specifier*之后，并且 postfix-expression 或qualified-id 显式依赖于模板参数（14.6.2 )，成员模板名称必须以关键字模板为前缀。`->`

 ***在您的示例中，`rcss::conf::Builder`不明确依赖于模板参数，这使得`template`关键字无用（VC 允许）。***

# c++ - 为什么 C++ 允许在具有指针成员的类中编译默认的复制构造函数/赋值运算符重载？

> ID：14288338
> 
> 赞同：2
> 
> 时间：2013-01-11T23:30:30.720
> 
> 标签：c++, copy-constructor, assignment-operator

在使用 C++ 时，我注意到赋值运算符/对象复制的标准编译器行为令人头疼。虽然当类的每个成员都具有已定义/默认复制/分配行为时，我可以理解默认代码生成，但我不知道为什么编译器会冒着生成以愚蠢方式复制指针的代码而**没有单一警告**的风险......在这种情况下，为什么编译器会为用户做出决定？真的有任何情况下默认指针重写是有意义的吗？

@编辑：

在这被作为诱饵关闭之前，我想指出我并不是要咆哮。正如我在评论中所说，我还想问一下[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)是否有例外。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T23:37:25.847

> 我不知道为什么编译器会冒着生成以愚蠢方式复制指针的代码的风险

将指针作为成员的类没有错，浅拷贝这些类也没有错。

混乱的地方是**资源所有权**。

动态内存分配是真正的罪魁祸首，没有指针成员。这只是一个单一的具体案例。其他可以包括锁、流、连接......

如果指向的内存不属于该类，则没有区别。与文件流相同——你可以复制类并且两个副本都引用同一个流——但是你什么时候关闭流？哪个副本关闭它？（“哪个副本删除了内存？”）

拥有三个有效的规则会让你彻底思考这些东西。

总而言之-我认为在您拥有一个指针或流或您拥有的任何其他资源的成员的任何地方都有警告是不现实的-会有很多警告，而且大多数都没用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:24:00.867

如果所指向的东西不属于所讨论的类（一点也不罕见），那么浅拷贝正是您想要的。编译器无法从类定义中分辨出所有权语义是什么，因此它做出了一个合理的猜测：*一切*都是浅拷贝的。

如果您的类具有指针的所有权语义，那么您应该使用适当的智能指针（`unique_ptr`、、`shared_ptr`等）来记录所有权。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:35:15.490

普通（或哑）指针*确实*具有定义的复制和分配行为。

如果您的指针始终指示所有权，您应该使用*智能*指针。然后，复制和分配行为更有可能（或至少*可以成为*）您想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T23:35:39.437

举个例子：
如果你有一个树形数据结构，其中每个节点都拥有它的子节点，那么这些子指针就是智能指针——但是如果你想保存一个指向父节点的指针，它就是一个原始指针，因为它是不管理它所指向的生命周期。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T23:38:26.830

为了速度和力量。

非天真的副本可能需要很长时间。如果这对您的程序来说是一个问题，那么您选择退出三规则是非常现实的。

欢迎使用 C++。你应该知道你在做什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-11T23:38:48.893

> 在这种情况下，为什么编译器会为用户做出决定？

关键是编译器*不会*决定。他们让程序员做出决定。无论如何，你期望什么？要制作深拷贝？这并不完全可能。考虑以下：

```
// This isn't necessarily "good" code, but it's legal
struct MyStruct
{
    void* p;
    const char* str;
};

MyStruct m1, m2;

m1.p = (void*)&m2;
m1.array = "Hello world!";
m2 = m1; // Now what do you expect to happen? 
```

C++ 不会强迫你写出好的代码，所以上面的代码是完全合法的。虽然上面的代码不是很好，但它确实显示了结构中指针的一些常见用例。将`m1`其分配给`m2`. 如果深拷贝是默认行为，那会很糟糕，因为上面的内容将无法编译。

# c# - 启用 t4 模板以查看相关文件夹

> ID：14288344
> 
> 赞同：1
> 
> 时间：2013-01-11T23:31:25.217
> 
> 标签：c#, asp.net, t4

在我的 t4 模板文件中，我有以下行肯定会在构建模式下中断。

> <#@ 程序集名称="$(SolutionDir)\MYNAMESPACE.MYLIBRARY\bin\debug\MYLIBRARY.dll"> #>

为了从我的 asp.net web 项目运行这个模板，我必须在上面的路径中硬编码**bin\debug 。**

最初我有以下行，

> <#@ 程序集名称="$(SolutionDir)\MYNAMESPACE.MYLIBRARY\$(OutDir)\MYLIBRARY.dll"
> 
> # >

但是拥有**(OutDir)**不起作用，因为我的**Web 项目输出路径是 bin\ 文件夹，并且它一直在****bin 文件夹**中查找 MYLIBRARY.DLL，而不是**bin\debug 文件夹。**我收到以下错误：

> 编译转换：找不到元数据文件 mynamespace.mylibrary\bin\mylibrary.dll'

我无法将我的 Web 项目输出路径属性更新为 bin\debug 而不是 bin\，因为这样 Web 项目就不会按照[文章](https://stackoverflow.com/questions/2005747/could-not-load-type-namespace-global-causing-me-grief)中的说明运行。

> **问.. 我怎样才能摆脱 t4 模板文件中硬编码的 bin\debug 路径？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-18T19:36:06.217

无论您的项目或构建配置如何，您都可以使用 ProjectDir 和 OutputPath 变量来完成此操作。

`<#@ assembly name="$(ProjectDir)$(OutputPath)MyLibrary.dll" #>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:38:45.040

我更新了 t4 模板文件中的第一行，如下所示：

> <#@ 程序集名称="$(SolutionDir)\MyNameSpace.MyLibrary\bin\$(ConfigurationName)\MyLibrary.dll"
> 
> # >

因为，t4 模板仅在我以调试模式开发软件时执行，并且我使用它来生成类，甚至可以将其硬编码为 bin\debug。使用 t4 模板生成类后，将其签入并准备好部署到构建机器。

# javascript - google.maps.Polyline - 如何获得透明/不可见的折线？

> ID：14288358
> 
> 赞同：4
> 
> 时间：2013-01-11T23:32:00.980
> 
> 标签：javascript, google-maps-api-3, colors, transparent, polyline

我有以下代码用于动画进行的路线，所以我需要折线，但我不想显示它：

```
[..]
    this.polyline = new google.maps.Polyline({
                path: [],
                strokeColor: '#ffffff',
                strokeWeight: 0
            });
[..] 
```

折线与该代码一起显示。但我想让折线透明 - 不可见！我该怎么做？

我将**strokeColor**设置为“透明” - 什么不起作用，或者当我完全删除该选项时。我还将**strokeWeight**设置为 0 - 但这些参数无效。我还尝试了从 0.0 到 1.0 的**strokeOpacity - 也没有效果。**知道有人解决方案吗？- PS：当我将颜色更改为#ff0000 时，颜色应该是红色的，对吗？但似乎这些选项根本不起作用 - 但显示了折线并且我在 console.log 中没有 JavaScript 错误......？

[这里](https://developers.google.com/maps/documentation/javascript/reference#PolylineOptions)的参考链接与几乎相同的例子......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:46:51.447

这对我有用：

```
 var flightPath = new google.maps.Polyline({
      path: flightPlanCoordinates,
      strokeColor: '#FF0000',
      strokeOpacity: 0.00001,
      strokeWeight: 0
    }); 
```

由于某些未知原因 strokeOpacity: 0.0 不起作用。

[Google Maps API v3 文档中的简单折线示例](http://www.geocodezip.com/v3_GoogleEx_polyline_simple.html)

[带有透明折线的相同代码](http://www.geocodezip.com/v3_GoogleEx_polyline_simple_transparent.html)

[关于 FusionTablesLayers 上的透明折线的类似问题](https://stackoverflow.com/questions/14004656/fusion-tables-dynamic-maps-strokeopacity/14005835#14005835)

# actionscript-3 - ActionScript 3 中的 CircularList

> ID：14288362
> 
> 赞同：0
> 
> 时间：2013-01-11T23:32:41.683
> 
> 标签：actionscript-3, list, generics, nodes, circular-list

我从事*AS3*项目已经有一段时间了，但我认为我已经碰壁了。我的项目需要将一系列元素排列在一个*Circular List*中，所以我将自己复制到`Circular List`我之前在 C# 中完成的一个中。

问题是，这严重依赖于*Generics*的使用。现在我没有这些。

这是代码。`T`变量类型代表我希望存在的泛型。

节点.as：

```
包裹
{
    公共类节点
    {
        变量节点内容：T；
        变量下一个节点：节点；

        功能节点（节点元素：T）
        {
            this.nodeContent = nodeElement;
        }
    }
}

```

循环列表.as：

```
package 
{
    public class CircularList
    {
        var head:Node;
        var tail:Node;
        var listLength:int;

        function CircularList()
        {
            this.head = null;
            this.tail = null;
            this.listLength = 0;
        }

        function Add(addition:T)
        {
            adding:Node = new Node(addition);

            if(this.head == null)
            {
                this.head = adding;
                this.tail = adding;
                head.nextNode = tail;
                tail.nextNode = head;
            }
            else
            {
                tail.nextNode = adding;
                tail = adding;
                tail.nextNode = head;
            }
            listLength++;
        }

        function Find(requested:T):Node
        {
            var finder:Node = null;
            var searching = head;
            var i:int;
            while(i <= listLength)
            {
                if(searching.nodeContent == requested)
                {
                    finder = searching;
                }
                searching = searchig.nextNode;
                i++;
            }
            return finder;
        }
    }
} 
```

有没有办法让这个东西在没有泛型的情况下工作？

编辑：真正的问题是我希望 Node 类中的*NodeContent*是一个对象。基本上，我想列出坐在圆桌上的人，但我想要一个我可以重用的代码，而不是专门为这个问题制作的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:28:56.330

从评论看来，您最好的选择是使用界面。

不是使用类型，而是让所有类 T 实现类似的接口`INode`。在此接口中，您可以定义类型 T 所需的所有功能，并根据需要在每个实现类中实现它。通过这种方式，您可以将函数签名更改为采用 type`INode`而不是`Class`or`*`并拥有一组这些函数可以执行的通用方法。

```
function Add(addition:INode){
  //add logic on INode
}

function Find(requested:INode):Node{
   //find logic on INode
} 
```

编辑：关于接口的一些信息，

[http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-to-interfaces/](http://active.tutsplus.com/tutorials/actionscript/as3-101-oop-introduction-to-interfaces/)

假设我们有两个类，A，B，每个类都有一个相似的方法，`doTrace`需要以不同的方式实现。我们可以定义一个接口，在这两个类中实现它，并将该类型传递给任何想要调用的方法`doTrace`

从名为 ITraceable 的接口开始，

```
public interface ITraceable{
   function doTrace():void //all methods defined in interfaces are seen as public
} 
```

现在我们的两个类，A 和 B

```
public class A implements ITraceable { //implementing our interface, when we do this we need to define all methods in ITraceable

     public function doTrace():void{
          trace("I am A");
     }

} 
```

为 B 做类似的事情

```
 public class B implements ITraceable {

     public function doTrace():void{
         trace("I am B");
     }

 } 
```

现在在一些外部课程中，我们想使用它

```
 public function letsTrace():void{
      doTheTrace(new A()) //I am A
      doTheTrace(new B()) //I am B

 }

 public function doTheTrace(object:ITraceable):void { //now we can pass both A and B into this function
     object.doTrace(); //since ITraceable requires all objects that implement it have this method we can guarantee it will be here
 } 
```

希望这可以帮助您完成您的申请

# jquery - 单击以使用截断帮助器显示其余文本

> ID：14288368
> 
> 赞同：0
> 
> 时间：2013-01-11T23:33:34.447
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, truncate

我想知道是否可以在 rails 的 truncate helper 方法上使用 jquery。我已经将省略符号设置为 link_to 像这样

```
<%= raw(truncate(@book.description, :length => 1000, :omission => (link_to' (continued)', :id => 'revealMore'))) %> 
```

我已经给它一个 ID，因为我假设这就是我需要在 jquery 中选择它，我只是有点不确定如何去做以及在使用帮助方法截断时是否存储了所有文本

任何人以前这样做过

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:01:30.577

我不认为你可以直接使用 truncate ，但你可以编写另一个调用它的助手。这不完全是您正在寻找的（它不会回到关闭状态），但类似于您所要求的。您也许可以对其进行调整和改进。

```
 def more(string, length, separator = nil)
    return '' if !string
    if string.length > (length * 1.2)
      out = content_tag(:span, truncate(string, length: length, separator: separator))
      out += link_to_function('more', "$(this).prev().hide(); $(this).hide(); $(this).next().show();")
      out += content_tag(:span, string, :style => 'display:none')
      out
    else
      string
    end
  end 
```

# python - Python 错误 - 安装损坏？

> ID：14288369
> 
> 赞同：2
> 
> 时间：2013-01-11T23:33:37.003
> 
> 标签：python, python-3.x

每次我使用 help() 然后调用“模块”时，我都会得到回溯。我虽然我的安装被破坏了所以我从activestate（python 32）重新下载并安装。有什么建议么？它仍在做同样的事情。

```
ActivePython 3.2.2.3 (ActiveState Software Inc.) based on
Python 3.2.2 (default, Sep  8 2011, 10:56:38) [MSC v.1500 32 bit (Intel)] on win32
Type "copyright", "credits" or "license()" for more information.
>>> help()

Welcome to Python 3.2!  This is the online help utility.

If this is your first time using Python, you should definitely check out
the tutorial on the Internet at http://docs.python.org/tutorial/.

Enter the name of any module, keyword, or topic to get help on writing
Python programs and using Python modules.  To quit this help utility and
return to the interpreter, just type "quit".

To get a list of available modules, keywords, or topics, type "modules",
"keywords", or "topics".  Each module also comes with a one-line summary
of what it does; to list the modules whose summaries contain a given word
such as "spam", type "modules spam".

help> modules

Please wait a moment while I gather a list of all available modules...

AutoComplete        abc                 logging             symtable
AutoCompleteWindow  aboutDialog         macosxSupport       sys
AutoExpand          activestate         macpath             sysconfig
Bindings            adodbapi            macurl2path         tabbedpages
CallTipWindow       afxres              mailbox             tabnanny
CallTips            aifc                mailcap             tarfile
ClassBrowser        antigravity         marshal             telnetlib
CodeContext         argparse            math                tempfile
ColorDelegator      array               mimetypes           test
Debugger            ast                 mmap                testcode
Delegator           asynchat            mmapfile            textView
EditorWindow        asyncore            mmsystem            textwrap
FileList            atexit              modulefinder        this
FormatParagraph     audioop             msilib              threading
GrepDialog          base64              msvcrt              time
HyperParser         bdb                 multiprocessing     timeit
IOBinding           binascii            netbios             timer
IdleHistory         binhex              netrc               tkinter
MultiCall           bisect              nntplib             token
MultiStatusBar      builtins            nt                  tokenize
ObjectBrowser       bz2                 ntpath              trace
OutputWindow        cProfile            ntsecuritycon       traceback
ParenMatch          calendar            nturl2path          tty
PathBrowser         cgi                 numbers             turtle
Percolator          cgitb               odbc                turtledemo
PyParse             chunk               opcode              types
PyShell             cmath               operator            unicodedata
RemoteDebugger      cmd                 optparse            unittest
RemoteObjectBrowser code                os                  urllib
ReplaceDialog       codecs              os2emxpath          uu
RstripExtension     codeop              parser              uuid
ScriptBinding       collections         pdb                 virtualenv
ScrolledList        colorsys            perfmon             warnings
SearchDialog        commctrl            pickle              wave
SearchDialogBase    compileall          pickletools         weakref
SearchEngine        concurrent          pip                 webbrowser
StackViewer         configDialog        pipes               win2kras
ToolTip             configHandler       pkg_resources       win32api
TreeWidget          configHelpSourceEdit pkgutil             win32clipboard
UndoDelegator       configSectionNameDialog platform            win32com
WidgetRedirector    configparser        plistlib            win32con
WindowList          contextlib          poplib              win32console
ZoomHeight          copy                posixpath           win32cred
__future__          copyreg             pprint              win32crypt
_abcoll             csv                 profile             win32cryptcon
_ast                ctypes              pstats              win32event
_bisect             curses              pty                 win32evtlog
_codecs             datetime            py_compile          win32evtlogutil
_codecs_cn          dbi                 pyclbr              win32file
_codecs_hk          dbm                 pydoc               win32gui
_codecs_iso2022     dde                 pydoc_data          win32gui_struct
_codecs_jp          decimal             pyexpat             win32help
_codecs_kr          difflib             pypm                win32inet
_codecs_tw          dis                 pythoncom           win32inetcon
_collections        distutils           pythonselect        win32job
_compat_pickle      doctest             pywin               win32lz
_csv                dummy_threading     pywin32_testutil    win32net
_ctypes             dynOptionMenuWidget pywintypes          win32netcon
_ctypes_test        easy_install        queue               win32pdh
_datetime           email               quopri              win32pdhquery
_dummy_thread       encodings           random              win32pdhutil
_elementtree        errno               rasutil             win32pipe
_functools          filecmp             re                  win32print
_hashlib            fileinput           regcheck            win32process
_heapq              fnmatch             regutil             win32profile
_io                 formatter           reprlib             win32ras
_json               fractions           rlcompleter         win32rcparser
_locale             ftplib              rpc                 win32security
_lsprof             functools           run                 win32service
_markupbase         gc                  runpy               win32serviceutil
_md5                genericpath         sched               win32timezone
_msi                getopt              select              win32trace
_multibytecodec     getpass             servicemanager      win32traceutil
_multiprocessing    gettext             setuptools          win32transaction
_pickle             glob                shelve              win32ts
_pyio               gzip                shlex               win32ui
_random             hashlib             shutil              win32uiole
_sha1               heapq               signal              win32verstamp
_sha256             hmac                site                win32wnet
_sha512             html                smtpd               winerror
_socket             http                smtplib             winioctlcon
_sqlite3            idle                sndhdr              winnt
_sre                idlelib             socket              winperf
_ssl                idlever             socketserver        winreg
_string             imaplib             sqlite3             winsound
_strptime           imghdr              sre_compile         winxpgui
_struct             imp                 sre_constants       winxptheme
_subprocess         importlib           sre_parse           wsgiref
_symtable           inspect             ssl                 xdrlib
_testcapi           io                  sspi                xml
_thread             isapi               sspicon             xmlrpc
_threading_local    itertools           stat                xxsubtype
_tkinter            json                string              zipfile
_warnings           keybindingDialog    stringprep          zipimport
_weakref            keyword             struct              zlib
_weakrefset         lib2to3             subprocess          
_win32sysloader     linecache           sunau               
_winxptheme         locale              symbol              

Enter any module name to get more help.  Or, type "modules spam" to search
for modules whose descriptions contain the word "spam".

Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    help()
  File "C:\Python32\lib\site.py", line 465, in __call__
    return pydoc.help(*args, **kwds)
  File "C:\Python32\lib\pydoc.py", line 1757, in __call__
    self.interact()
  File "C:\Python32\lib\pydoc.py", line 1769, in interact
    request = self.getline('help> ')
  File "C:\Python32\lib\pydoc.py", line 1780, in getline
    return input(prompt)
  File "C:\Python32\lib\site-packages\Pythonwin\pywin\framework\app.py", line 367, in Win32RawInput
    ret=dialog.GetSimpleInput(prompt)
  File "C:\Python32\lib\site-packages\Pythonwin\pywin\mfc\dialog.py", line 223, in GetSimpleInput
    if title is None: title=win32ui.GetMainFrame().GetWindowText()
win32ui.error: The frame does not exist
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-30T21:08:44.140

[我也遇到过这个问题，当您还安装了pywin32](http://sourceforge.net/projects/pywin32/ "pywin32")软件包时，它与在 IDLE 中运行 help() 有关。该软件包还安装了一个使用 Windows MFC 窗口构建的名为 Pythonwin 的编辑器。当您在 IDLE 中运行 help() 时，Pythonwin 会拦截调用，就好像它是从 Pythonwin 调用的一样，并试图为不存在的窗口设置标题。因此错误。

为了解决这个问题，我进入了 site-packages 目录并删除了 Pythonwin 目录。根据您收到的错误代码，尝试删除该`C:\Python32\lib\site-packages\Pythonwin`目录。它将保留其余的 win32 实用程序。

# javascript - 使用动态创建的 dom 元素和我似乎无法传递的变量创建软件合成器

> ID：14288370
> 
> 赞同：0
> 
> 时间：2013-01-11T23:33:38.973
> 
> 标签：javascript, dom, web-audio-api

这是一个 JSfiddle。[http://jsfiddle.net/ZttnJ/5/](http://jsfiddle.net/ZttnJ/5/)

问题是我只需要一个范围内的变量可以访问另一个范围，但是如果我将变量放在更高的范围内，它会破坏元素的动态创建。这似乎是动态创建的 dom 元素和我很好奇是否有一种样板方法来解决这个问题，而无需将代码重新创建到带有原型或其他东西的构造函数中。为了清楚起见，我评论了代码。只有一条评论。

```
var SynthCreationModule = (function(){

context = new webkitAudioContext(); 
var orangeButton;
var applicationArea = document.getElementById("applicationArea"),
orangeButton = document.getElementById("orangeButton"),         
counterSynth = 1;
counterSynthMuteButton = 1;
counterSynthParameters = 1;
counterPitchInput = 1;
orangeButton.addEventListener("click",createSynth, false);     

function createSynth () {
    var pitchInput = document.createElement('input').value; // I need this to be accessible to the function called synth.onmousedown
    pitchInput.type = "range";
    pitchInput.className  = "pitchInputClass";
    pitchInput.id = "pitchInput" + (counterPitchInput++);   
    var synth = document.createElement("div"); 
    synth.className  = "synth";                        
    synth.id = "synth" + (counterSynth++);
    var synthMute = document.createElement("div");
    synthMute.className  = "synthMute";   
    synthMute.id = "synthMute" + (counterSynthMuteButton++);
    applicationArea.appendChild(synth);
    synth.appendChild(synthMute);
    synth.appendChild(pitchInput);
    $(synth).draggable({ snap: true });
    $(synth).draggable({ grid: [ 20,20 ]});

    synth.onmousedown= function () {
    oscillator = context.createOscillator(), 
    oscillator.type = 2;  
    oscillator.frequency.value = pitchInput;                   
    oscillator.connect(context.destination);  
    oscillator.noteOn(0); 

    };

    synth.onmouseup = function ()    {  
    oscillator.disconnect(); 

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T07:59:23.890

答案是像这样修改上面的代码：

```
function createSynth () {

    var pitchInput = document.createElement('input');
    pitchInput.type = "range";
    pitchInput.className  = "pitchInputClass";
    pitchInput.id = "pitchInput" + (counterPitchInput++);  
    var synth = document.createElement("div"); 
    synth.className  = "synth";                          
    synth.id = "synth" + (counterSynth++);

    var synthMute = document.createElement("div");
    synthMute.className  = "synthMute";   
    synthMute.id = "synthMute" + (counterSynthMuteButton++);
    applicationArea.appendChild(synth);
    synth.appendChild(synthMute);
    synth.appendChild(pitchInput);
    $(synth).draggable({ snap: true });
    $(synth).draggable({ grid: [ 20,20 ]});

  synth.addEventListener("mousedown",playSynth, false);

function playSynth() {
//var pitchState = document.getElementById('oscPitch1').value;
oscillator = context.createOscillator(),  // Creates the oscillator 
oscillator.type = 2;  
oscillator.frequency.value = pitchInput.value;                   
oscillator.connect(context.destination);  // Connects it to output
oscillator.noteOn(0); 

}; 
```

# php - 页面不会出现在 codeigniter 制作的网站中

> ID：14288374
> 
> 赞同：0
> 
> 时间：2013-01-11T23:33:56.350
> 
> 标签：php, codeigniter-2

您好，我对 codeIgniter 很陌生，我已经创建了一个带有控制器和视图的联系页面。唯一的问题是当我转到链接[http://www.mydomain.nl/index时我什么也没有得到.php/联系人](http://www.mydomain.nl/index.php/contact)

我的控制器如下

```
 <?php 
class Contact extends CI_Controller {

    public function index()
    {
        $this->load->helper('form');
        $this->load->library('form_validation');

        $data['title'] = 'Contact';

        $this->form_validation->set_rules('name', 'Naam', 'trim|required');
        $this->form_validation->set_rules('beschrijving', 'Beschrijving', 'trim');
        $this->form_validation->set_rules('email', 'Email', 'trim|required|valid_email')

        if ($this->form_validation->run() === FALSE)
        {
            $this->load->view('templates/header', $data);   
            $this->load->view('contact/index');
            $this->load->view('templates/footer');

        }
        else
        {
            $this->load->view('templates/header', $data);   
            $this->load->view('contact/formsucces');
            $this->load->view('templates/footer');
        }
    }
} 
```

使用这个控制器，我还在我的视图中创建了一个名为contact的文件夹，在这个文件夹中我有2个文件index.php和一个formsucces.php，用于提交表单时。

我的问题是我做错了什么？我已经查看了我能找到的所有示例，但没有任何帮助..

编辑：添加更多代码

这是新闻部分的控制器。控制器和视图与接触控制器和视图相同。

```
<?php
class News extends CI_Controller {

public function __construct()
{
    parent::__construct();
    $this->load->model('news_model');
}

public function index()
{
    $data['news'] = $this->news_model->get_news();
    $data['title'] = 'News archive';

    $this->load->view('templates/header', $data);
    $this->load->view('news/index', $data);
    $this->load->view('templates/footer');
} 
```

并且要真正确定我的目录、路径等是否正确，这里是我的目录的打印屏幕

![在此处输入图像描述](../Images/ac6c31946ebd58582a53f5c09d03865b.png)

# python-2.7 - 带有二维参数的 Scipy.optimize.minpack.leastsq

> ID：14288376
> 
> 赞同：2
> 
> 时间：2013-01-11T23:34:12.590
> 
> 标签：python-2.7, scipy

我正在尝试根据本文[http://cronos.rutgers.edu/~meer/TEACHTOO/PAPERS/zhang.pdf](http://cronos.rutgers.edu/~meer/TEACHTOO/PAPERS/zhang.pdf)（第 2.3 节）中描述的 2D 到 3D 点对应关系计算相机的 3x3 校准矩阵 P蟒蛇2.7。我已经能够找到 P 的初始估计值，但现在需要使用 Levenberg-Marquardt 算法 (2.3.4) 对其进行细化。在我看来，这可以通过 scipy.optimize.minpack.leastsq 来完成。但是，我实现此功能的尝试失败了。这是我所拥有的简化版本（M 是格式为 (x,y,z,1) 的均质化 3d 点的 numpy 数组，形状为 (18,4)，m 是均质化 2d 点的 numpy 数组格式为 (u,v,1)，形状为 (18,3))：

```
import numpy as N
from scipy.optimize.minpack import leastsq

def e(P,M,m):
    a = P.dot(M.T) 
    print a.shape
    b = m.T-a
    b1 = b[0]
    b2 = b[1]
    b3 = b[2]
    dist = sqrt((b1**2)+(b2**2)+(b3**2))
    return dist

P = N.array( [ [4.66135353e+01,1.24341518e+02,-9.07923056e+00,9.59292826e+02],
               [-3.60062368e+01,3.56319152e+01,1.14245572e+02,2.32061401e-02],
               [-4.04188199e-02,4.00793699e-02,-9.48804649e-03,1.00000e+00] ] )

m = []
M = []
#define m list and M list
for i in range(0,len(uv)):        
    uv[i].append(1) #uv is unhomogenized uv coordinate list (source left out to      simplify)
    xyz[i].append(1) #xyz is unhomogenized xyz coordinate list (source left out to simplify)
    m.append(N.array( [ [uv[i][0]],[uv[i][1]],[uv[i][2]] ] ))    
m = N.array( uv )
M = N.array( xyz )
#the shape of m is (18,3) and the shape of M is (18,4)

P_new, success = leastsq(e, P, args=(M,m)) 
```

我认为问题在于 M 和 m 变量，即向量数组。我查看了 scipy.optimize.lstsq 函数的示例，我可以让它工作，但它只有一个维度的 args。

有谁知道我在这里做错了什么？我对编程还很陌生，所以如果这是白痴哈哈，请放轻松。非常感谢所有阅读本文的人，如果我能提供更多信息，请告诉我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T07:05:30.640

似乎`leastsq`不知道如何优化多维变量，这是一个很容易解决的问题：

```
def e2(P, M, m) :
    return np.sqrt(np.sum((m.T - np.dot(P.reshape(3,4), M.T))**2, axis=0))

P = P.reshape((12,))

P_new, success = leastsq(e2, P, args=(M, m)) 
```

这个运行，虽然我的随机数据很难收敛。基本思想是将矩阵`P`视为一个 12 项长的向量，并在需要转换`M`为`m`.

我还冒昧`e`地以更 numpythonic 的方式重写了你的函数......

# c# - 同步多个进程以同时开始工作？

> ID：14288377
> 
> 赞同：0
> 
> 时间：2013-01-11T23:34:15.260
> 
> 标签：c#, process, synchronization

我正在使用 C# 中的 .NET 4 工作。我有 LauncherProgram.exe，它将创建 WorkerProgram.exe 的多个实例，让它们对创建进程时提供的参数做一些工作，然后 LauncherProgram.exe 将启动一组新的 WorkerProgram.exe 实例来做一些不同的工作.

每个 WorkerProgram.exe 都会使用一些参数来启动，这些参数告诉它要处理什么，并且可以同时启动一个或多个 WorkerProgram.exe。WorkerProgram.exe 读取提供的参数，执行一些初始化，然后就可以开始工作了。

我想弄清楚的是如何让每组 WorkerProgram.exe 同时启动“告诉”或“信号”或“我无法弄清楚正确的术语”每个进程都有的 LauncherProgram.exe完成初始化步骤并准备开始。我想在一组启动的 WorkerProgram.exe 实例中同步“做你的工作”的开始。

我正在将我的 LauncherProgram.exe 设置为像这样工作（暂时忽略类型）：

```
while (there are sets of work to do)
{
  for each set of work
  {
    for each group data in set
      create and launch a WorkerProgram.exe for a single set of data
    wait for all created WorkerProgram.exe to indicate init is complete
    send signal to start processing 
  }
} 
```

实际上，我有一个小型测试程序，我在其中使用命名事件来指示多个生成的进程同时启动某些东西。

（希望以上所有内容都有意义）

我只是想不通“等待 N 个进程告诉我它们的初始化已准备好”位。

我搜索了“进程同步”和“集合点”，并查看了使用命名事件和命名信号量。我可以找到一堆关于线程的东西，但关于单独的进程却很少。

LauncherProgram.exe 使用 System.Diagnostics.Process 类创建 WorkerProgram.exe 进程，如果有帮助的话。

如果你能给我更好的术语来帮助缩小我的搜索范围，或者给我指出一个设计模式或机制，或者一个有帮助的库或类，我将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:46:46.450

您可以使用`System.Threading.Mutex`该类进行进程间通信。请参阅[http://msdn.microsoft.com/en-us/library/system.threading.mutex(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/system.threading.mutex(v=vs.110).aspx)。命名每个 Mutex 可能是最简单的，将 WorkerProgram.exe 的进程 ID 或其他一些区别特征作为名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:36:59.313

您可以使用一些进程间通信，但简单的方法是写入临时文件，例如将 DONE 写入某个文件并让 Launcher 定期读取，直到所有 WorkerProgram 将 DONE 写入各自的文件等......甚至创建一个`FileMapping`in windows 在具有文件支持的进程之间共享内存。

其他方法包括远程过程调用、套接字和简单文件映射。

# python - Python：系统命令中的 unicode

> ID：14288379
> 
> 赞同：5
> 
> 时间：2013-01-11T23:34:35.457
> 
> 标签：python, unicode, encoding

假设我在 Python (2.7) 中有一个神秘的 unicode 字符串，我想将它提供给诸如 imagemagick 之类的命令行程序（或者实际上只是以任何方式*从*Python 中获取它）。字符串可能是：

*   阿道夫·洛佩斯·马特奥斯
*   斯坦尼斯瓦瓦瓦拉谢维奇
*   约根·琼森

所以在 Python 中，我可能会做一个像这样的小命令：

```
cmd = u'convert -pointsize 24 label:"%s" "%s.png"' % (name, name) 
```

如果我只是打印`cmd`并获取`convert -pointsize 24 label:"Jörgen Jönsson" "Jörgen Jönsson.png"`然后自己运行它，一切都很好。

*   阿道夫·洛佩斯·马特奥斯.png
*   [示例 1 http://4u.jeffcrouse.info/stackoverflow/A-01.png](http://4u.jeffcrouse.info/stackoverflow/A-01.png)
*   Stanisława Walasiewicz.png
*   [示例 2 http://4u.jeffcrouse.info/stackoverflow/A-02.png](http://4u.jeffcrouse.info/stackoverflow/A-02.png)

但如果我这样做`os.system( cmd )`，我会得到这个：

*   Adolfo L√≥pez Mateos.png
*   [示例 4 http://4u.jeffcrouse.info/stackoverflow/B-01.png](http://4u.jeffcrouse.info/stackoverflow/B-01.png)
*   Stanis≈Çawa Walasiewicz.png
*   [示例 5 http://4u.jeffcrouse.info/stackoverflow/B-02.png](http://4u.jeffcrouse.info/stackoverflow/B-02.png)

我知道这不是 imagemagick 问题，因为文件名也很混乱。我知道当 Python 将命令传递给 os.system 时，它会将命令转换为 ascii，但为什么它的编码如此错误？为什么将每个非 ASCII 字符解释为 2 个字符？ [根据](http://www.joelonsoftware.com/articles/Unicode.html) [我读过](http://blog.lumino.so/2012/08/20/fix-unicode-mistakes-with-python/)[的几篇](http://docs.python.org/2/howto/unicode.html) [文章](http://packages.python.org/kitchen/unicode-frustrations.html) ，这可能是因为它被编码为 latin-1 但它被读取为 utf-8，但我尝试在它们之间来回编码它并没有帮助。

当我尝试将其手动编码为 ascii 而没有替换参数时，我得到了 Unicode 异常，但是如果我这样做 name.encode('ascii','xmlcharrefreplace')，我会得到以下信息：

*   [示例 4 http://4u.jeffcrouse.info/stackoverflow/C-01.png](http://4u.jeffcrouse.info/stackoverflow/C-01.png)
*   [示例 5 http://4u.jeffcrouse.info/stackoverflow/C-02.png](http://4u.jeffcrouse.info/stackoverflow/C-02.png)

我希望有人认识到这种特殊的编码问题并可以提供一些建议，因为我几乎没有想法。

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T00:39:39.777

改用[subprocess.call](http://docs.python.org/2/library/subprocess.html#subprocess.call)：

```
>>> s = u'Jörgen Jönsson'
>>> import subprocess
>>> subprocess.call(['echo', s])
Jörgen Jönsson
0 
```

# python - 检查在 matplotlib 中未触发的按钮

> ID：14288384
> 
> 赞同：0
> 
> 时间：2013-01-11T23:35:03.883
> 
> 标签：python, matplotlib

我使用此示例作为构建复选框按钮集的指南；但是，它并没有为我开火。在一个类中，我有一个由按钮组成的函数：

```
check = CheckButtons(rax,('Button 1', 'Button 2', 'Button 3'), (True,False,False)) 
```

然后我在一个类中有这个函数......它看起来像：

```
def clickButtons(self,label): 
```

在同一个类的另一种方法中，我试图用以下方法调用它......

```
self.check.on_clicked(self.clickButtons()) 
```

从这个网站： http: [//matplotlib.org/examples/widgets/check_buttons.html](http://matplotlib.org/examples/widgets/check_buttons.html)

matplotlib 按钮页面状态：

> on_clicked(func) 当按钮被点击时，调用带有按钮标签的func
> 
> 返回一个连接ID，可用于断开连接

但是，我当前的错误说：

> TypeError: clickButtons() 正好需要 2 个参数（1 个给定）

有人可以向我解释发生了什么......我怎么知道正在按下哪个按钮？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:22:14.260

该函数`check.on_clicked`用于注册当复选框被单击时的回调。您需要将它作为参数传递一个带有一个参数的函数对象`label`。您要使用的语法是：

```
check.on_clicked(my_obj.clickButtons) 
```

这里有两件重要的事情需要理解。首先，在 Python 中，*一切*都是对象。函数只是碰巧具有属性的对象`__call__`。第二，当您将成员函数绑定到类的实例时，实例对象是隐式的第一个参数，因此`my_obj.clickButtons`是一个对象，它作为一个接受一个参数的函数。

当您调用时，`check.on_clicked(self.clickButtons())`您是在说“使用调用结果作为参数调用`on_clicked`对象上的函数”。调用会引发您看到的错误，因为它需要 2 个参数（隐式和），而您只使用一个参数（隐式）调用它。 `check``self.clickButtons()``clickButtons``self``label``self`

如果你有一个类`A`，带有函数`f(self,b)`，并且在实例`a`中`A`，下面两个是等价的

```
a.f(1)      # call member function f on a
A.f(a,1)    # call member function f on a 
```

# wordpress - 已在 WP 上发送的 Wordpress 标头

> ID：14288385
> 
> 赞同：0
> 
> 时间：2013-01-11T23:35:09.783
> 
> 标签：wordpress, header

我在我的新主题上使用 Ajax 滚动条，这就是为什么我必须在我的索引页面以及 wp-blog-header.php 页面中包含一些代码。经过几次更改后，这就是我的 wp-blog-header pge 的样子

```
if ( !isset($wp_did_header) ) {

$wp_did_header = true;

require_once( dirname(__FILE__) . '/wp-load.php' );

wp();
require_once( ABSPATH . WPINC . '/template-loader.php' );
header("HTTP/1.1 200 OK");} 
```

这段代码真的很有帮助，特别是代码的最后一行（ header("HTTP/1.1 200 OK"); ）节省了我的时间。但是，当我使用此代码时，它会在页脚方面出现错误：

```
Warning: Cannot modify header information - headers already sent by (output started at /home/xxxx/public_html/xxxx/blog/wp-content/plugins/all-in-one-seo-pack/aioseop.class.php:221) in /home/xxxx/public_html/xxxx/blog/wp-blog-header.php on line 11 
```

另外，如果我禁用该插件，则会出现此错误：

```
 Warning: Cannot modify header information - headers already sent by (output started at /home/xxxx/public_html/xxx/blog/wp-content/themes/z/header.php:5) in /home/xxxx/public_html/xxxx/blog/wp-blog-header.php on line 11 
```

当我将其删除或更改其行号时，错误会消失，但主题无法按预期工作。

我在我的主题中使用这个代码来调用那个函数

```
<?php require('/home/xxx/public_html/xxx/blog/wp-blog-header.php'); ?> 
```

有没有办法解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T19:50:50.247

我有类似的问题，您需要做的就是在`function.php`文件的前几行中查找，看看是否有任何格式为标记`<!--your comment-->`外的注释。`<?php`它可能会导致问题，因为我在删除评论并将`function.php`文件开头的评论移动到`<?php`标签中并`//`改为使用后解决了我的问题。

我还听说文件开头的多余空间`function.php`也可能导致问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-04T23:10:27.827

虽然这是很多年前的事了，但我最近也遇到了同样的问题。

要修复，（这会有所不同）-首先确保functions.php文件中没有直接输出标签-因为除非直接输出数据，否则不需要它们。

最后，确保您的 add_action 或 add_filter 运行正确！最好在函数开始之前放置它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-15T21:18:02.873

如果您正在执行**回调**，请这样做：

我试图重定向到 Zoom Oauth Api，我是这样实现的

```
 if(!isset($_GET['callback'])) {
  include_once get_template_directory() . "/page-templates/meetings/index.php";

  $url = "https://zoom.us/oauth/authorize?response_type=code&client_id=" . CLIENT_ID . "&redirect_uri=" . REDIRECT_URI;

  wp_redirect($url);
  exit;
 } 
```

其余代码在上述代码之后

# c++ - 导致崩溃的矩阵

> ID：14288386
> 
> 赞同：8
> 
> 时间：2013-01-11T23:35:11.417
> 
> 标签：c++, matrix, direct3d11, xna-math-library

我的 Direct3D11 应用程序有一个奇怪的问题，我已经尝试解决了几个小时。问题在于该方法：

```
void CameraClass::Render()
{
    XMFLOAT3 sUp, sLookAt, sRotationInRadians;

    sUp.x = 0.0f;
    sUp.y = 1.0f;
    sUp.z = 0.0f;

    sLookAt.x = 0.0f;
    sLookAt.y = 0.0f;
    sLookAt.z = 1.0f;

    sRotationInRadians.x = m_Rotation.x * 0.0174532925f;
    sRotationInRadians.y = m_Rotation.y * 0.0174532925f;
    sRotationInRadians.z = m_Rotation.z * 0.0174532925f;

    XMVECTOR vecLookAt = XMVectorSet( sLookAt.x, sLookAt.y, sLookAt.z, 0.0f );
    XMVECTOR vecUp = XMVectorSet( sUp.x, sUp.y, sUp.z, 0.0f );
    XMVECTOR vecPosition = XMVectorSet( m_Position.x , m_Position.y, m_Position.z, 0.0f );

    XMMATRIX RotationMatrix( XMMatrixRotationRollPitchYaw( sRotationInRadians.x, sRotationInRadians.y, sRotationInRadians.z ));

    vecLookAt = XMVector3TransformCoord( vecLookAt, RotationMatrix );
    vecUp = XMVector3TransformCoord( vecUp, RotationMatrix );

    vecLookAt += vecPosition;   

    m_ViewMatrix = XMMatrixLookAtLH( vecPosition, vecLookAt, vecUp );
} 
```

一切都很好，直到它到达那条线：

```
m_ViewMatrix = XMMatrixLookAtLH( vecPosition, vecLookAt, vecUp ); 
```

不知何故，它会导致应用程序崩溃（切换到不响应是正确的）。

以下是实际调用的样子：

```
XMMATRIX ViewMatrix;
XMMATRIX ProjectionMatrix;
XMMATRIX WorldMatrix;

m_D3D->BeginScene( 0.0f, 0.0f, 0.0f, 1.0f );

m_Camera->Render();

m_D3D->GetWorldMatrix( WorldMatrix );
m_D3D->GetProjectionMatrix( ProjectionMatrix ); 
```

事先，顶点和像素着色器编译得很好，所以这不是问题。很可能我在 xnamath 上做错了（我对它完全陌生），但我不知道这可能是什么。提前致谢。如果需要，我会提供更多信息。

**编辑**@1：通过数十项更改，我设法让投影和世界矩阵工作。虽然我仍然无法设置视图矩阵。我更改了代码，使其与实际代码匹配，并去掉了不重要的部分。

**编辑**@2：最后一分钟的突发新闻：XMMatrixLookAtLH 函数没有问题，因为我决定将结果保存到局部变量并且它可以工作，但是如果我想将结果矩阵分配给类成员，那么我会崩溃. 这当然很有趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T07:38:43.393

经过数小时试图解决这个问题，我相信我终于解决了它。

XMMATRIX 表示一个 16 字节对齐的矩阵，当您尝试复制该值时，XMMATRIX 的未对齐分配会导致此错误。这可以解释为什么它并不总是发生以及为什么它在不同的模式下工作。

我发现这个问题的最佳解决方案是使用 XMFLOAT4X4 来存储值。

这是一个简单的例子：

```
#include <windows.h>
#include <xnamath.h>

class Camera
{
protected:
    XMFLOAT4X4  view_;
public:
    XMFLOAT4X4  const& Update()
    {
        XMStoreFloat4x4(&this->view_ , XMMatrixIdentity());
        return this->view_;
    }
};

int main()
{
    Camera* cam = new Camera;
    XMFLOAT4X4 const& mat = cam->Update();
    XMMATRIX x = XMLoadFloat4x4(&mat);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-12T03:42:32.633

由于崩溃发生在分配： m_ViewMatrix = XMMatrixLookAtLH(...

并且 x64 中的构建比 x86 更好我会假设 m_ViewMatrix 甚至它的容器 m_Camera 被映射到与其他东西共享的内存空间中。内存破坏。转向 64 位是另一个指标，因为可能已经移动内存以隐藏问题。

您如何分配 m_Camera 字段？什么是所有东西的主要容器？

发布完整的 CameraClass 标头以及分配它的位置。另外，尝试在田地周围撒上一些阵列，看看是否有帮助。这也表明内存崩溃。

# php - 使用动态链接时如何将变量（存储字符串）从一页传递到下一页？

> ID：14288389
> 
> 赞同：0
> 
> 时间：2013-01-11T23:35:23.513
> 
> 标签：php, get, dynamic-links

在我的第一页上，我以这种方式创建了动态链接：

```
do
{
   $FilterModule = $row_mysql['Module']; /* Say it's value is 'xyz' for particular case */
   echo "<a href='filterquery.php?filter=$FilterModule'>$FilterModule</a>";
} while($row = mysql_fetch_array($QueryResult)); 
```

现在，当我从第一页单击上面的链接时，它会将我带到带有 url: 的第二页`filterquery.php?filter=xyz`。在这个页面上，我`$FilterModule = $_GET['FilterModule'];`用来获取值（`='xyz'`）。但我收到一个错误：

> '未定义的索引：FilterModule'。

不知道我犯了什么错误？请帮忙..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:38:28.767

您应该使用`$_GET['filter'];`，因为这就是您在 URL 中调用的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:38:39.803

您需要使用`$_GET['filter']`而不是`$_GET['FilterModule']`因为这是您在 URL 中为其分配值的参数的名称。

当你访问`GET`数组时，它使用 URL 中传递的变量，所以

`filterquery.php?filter=xyz&filter2=abc`

将在数组中生成以下键值对`_GET`：

```
$_GET = array(
   [filter]  = 'xyz',
   [filter2] = 'abc'
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:39:35.913

您可以获得该值，`$_GET['filter']`其中给出的参数是`filterquery.php?filter=xyz`

# web-services - 一种检查网站本地版本是否已完全翻译的工具（用于持续集成）

> ID：14288390
> 
> 赞同：0
> 
> 时间：2013-01-11T23:35:27.787
> 
> 标签：web-services, localization, translation, web-crawler

我正在做一个项目，在这个项目中，我们为另一个国家（不是说英语的国家）设计一个现有网站的本地化版本（用英语编写）。业务要求是“所有可能和不可能的情况都没有英文文本”。

有谁知道是否有一个检查软件/服务可以检查一个网站是否已完全翻译，即检查其中没有英文文本。

我知道有一些网站可以检查损坏的链接、html 有效性等，我需要类似[http://validator.w3.org/checklink](http://validator.w3.org/checklink)的东西，但要检查网站的所有页面上是否没有英文文本。

我认为需要这种方式的原因是：
1\. 所有国家/地区都有很多通用代码（后端和前端）
2\. 如果有人向通用代码提交任何内容，我需要确保这不会导致本地化版本出现英文文本问题。
3\. 从业务角度来看，网站最好不支持某些功能，而不是显示英文文本（法律问题）
4\. 前端和后端的代码变化很大
5\. 有很多影响文本的文件在客户端的屏幕上。不幸的是，不仅仅是一个带有消息的消息。并且一些消息来自后端，但大部分都在前端
6\. 由于所有这些事实，目前有人手动填写所有表格并亲眼观看，那就是在每次部署之前......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:53:14.767

如果你想走爬虫的路，我不知道现有的爬虫可以做到这一点，但这听起来像是两个简单问题的结合：

1.  为网络爬虫查找现有的开源代码应该非常简单
2.  如果文本可以使用的语言数量有限，那么通过 n-gram 分析识别语言是微不足道的。

唯一困难的部分是确保分析器始终有大量文本可供使用。您可以逐段提取内容。对于表单，您可能必须组合多个表单标签的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T20:42:37.093

我认为您从错误的方向解决问题。您正在寻找可以检测任何文本是否为英文的算法或网络爬虫？我不知道，但我怀疑这样的事情是否存在。

如果您已经翻译了网站，您就可以完全访问代码库和/或翻译文本，对吗？您不能在 Notepad++ 之类的比较工具中同时打开英文和非英文字符串文件（.resx 或您正在使用的任何文件）来检查差异以查看是否缺少任何字符串？并检查源代码并验证所有可以输出用户可显示文本的部分是否使用 meta:resourceKey 属性（或您正在使用的任何内容）。

# ios - 是否可以通过 iOS 纹理缓存 API 从 OpenGL ES 帧缓冲区中读取浮点数？

> ID：14288391
> 
> 赞同：3
> 
> 时间：2013-01-11T23:35:34.227
> 
> 标签：ios, opengl-es, opengl-es-2.0, gpgpu

这与[带有 float 或 half_float 纹理的 OpenGL ES 2.0 :glReadPixels() 有关](https://stackoverflow.com/questions/5788197/opengl-es-2-0-glreadpixels-with-float-or-half-float-textures/5800747#5800747)。

我想在渲染后从帧缓冲区对象中读出浮点值。

在 iOS 上，以下

```
 GLint ext_type;
    glGetIntegerv(GL_IMPLEMENTATION_COLOR_READ_TYPE, &ext_type); 
```

真的只是告诉我们`glReadPixels`只允许读出 GL_UNSIGNED_BYTE。

有没有办法使用[本文](http://allmybrain.com/2011/12/08/rendering-to-a-texture-with-ios-5-texture-cache-api/comment-page-1/#comment-1297)中相关的纹理缓存技术来解决这个问题？

背后的故事是，我正在尝试使用 OpenGL ES 2.0 片段着色器（类似于 Dominik Göddeke 的可信赖的 ol'[教程示例](http://www.mathematik.uni-dortmund.de/~goeddeke/gpgpu/tutorial.html#arrays3)）为任意大小的矩阵（例如，100,000 x 100,000）实现通用矩阵乘法例程。 `glReadPixel`这里并不是特别合作，因为它将帧缓冲区浮点数转换为 GL_UNSIGNED_BITS，导致精度损失。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T04:50:55.987

我问[了一个类似的问题](https://stackoverflow.com/questions/14228230/are-cvopenglestexturecaches-incompatible-with-floating-point-formats)，我认为答案是**否定**的，只是因为纹理缓存（作为 API）使用 CoreVideo 像素缓冲区并且它们目前不支持浮点格式。

# iphone - 核心动画和 UIImageView 返回起始位置

> ID：14288394
> 
> 赞同：2
> 
> 时间：2013-01-11T23:35:55.323
> 
> 标签：iphone, ios

我有一个 UIImageView，我正在根据用户滑动在屏幕上移动。我使用核心动画完成了这个：

```
 [UIView beginAnimations:nil context:nil];
 [UIView setAnimationDuration:1.0];

 movingView.frame = theRect;

 [UIView commitAnimations]; 
```

它一开始总是很好，但是在从其原始位置到“theRect”位置的中途，它停止并且 UIImageView 跳回到它的起点。它永远不会在同一点上。有时在跳回来之前几乎完全通过，有时只是几乎不动然后跳回来。在此之后没有其他代码正在运行。我试过改变持续时间，但这似乎并不重要。

如果我添加：

```
 [UIView setAnimationDidStopSelector:@selector(completeAnimation:finished:context:)];
 [UIView setAnimationDelegate:self]; 
```

然后它实际上会延迟直到 Duration 完成并运行选择器，即使图像本身几乎立即停止并返回其起点。

希望有人能给我一些关于这里可能发生的事情的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:03:03.587

如果使用自动布局，您可以动画约束的变化，而不是动画帧的变化（因为重新应用约束时，原始位置将恢复）。有关示例，请参阅[动画图像视图以向上滑动。](https://stackoverflow.com/questions/14189362/animating-an-image-view-to-slide-upwards/14190042#14190042)

# assembly - 如何为 x86 中的程序设置一个新的堆栈段以与我的内核分离？

> ID：14288399
> 
> 赞同：3
> 
> 时间：2013-01-11T23:36:23.633
> 
> 标签：assembly, x86, stack, osdev, segments

我正在开发一个 32 位操作系统，我需要能够为程序设置新的数据段/堆栈段。但是我找不到任何关于如何在保护模式下使用这些段寄存器的好信息。我真的需要能够设置一个新的堆栈段，这样我的程序就不会与内核共享同一个堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T10:24:56.717

在 x86 保护模式下，段寄存器指向 GDT 选择器。

1\. 所以我们需要在远跳转到保护模式之前为每个段设置适当的选择器，特别是cs、ds、ss。2\. 选择器的长度为 8 字节，它定义了基本、限制和访问权限。请参阅以下链接以供参考[http://en.wikibooks.org/wiki/X86_Assembly/Global_Descriptor_Table](http://en.wikibooks.org/wiki/X86_Assembly/Global_Descriptor_Table) , [http://www.jamesmolloy.co.uk/tutorial_html/4.-The%20GDT%20and%20IDT.html](http://www.jamesmolloy.co.uk/tutorial_html/4.-The%20GDT%20and%20IDT.html) , [http://en.wikipedia.org/wiki/Global_Descriptor_Table](http://en.wikipedia.org/wiki/Global_Descriptor_Table)。3\. 如果您需要更多信息，请回复我，我可以向您展示我的简单操作系统代码，它设置正确的 GDT 并进入保护模式。

# c# - 在 .NET 中禁用 ChromeDriver 扩展

> ID：14288400
> 
> 赞同：1
> 
> 时间：2013-01-11T23:36:35.333
> 
> 标签：c#, .net, selenium, webdriver, selenium-chromedriver

我的问题是关于 [如何在 selenium 中禁用 chrome 扩展](https://stackoverflow.com/questions/14049151/how-to-disable-chrome-extension-in-selenium)。与此等效的 C# 是什么？以下是我迄今为止尝试过的。

```
 ChromeOptions options = new ChromeOptions();
    options.AddAdditionalCapability("chrome.switches", Arrays.asList("--disable-extensions"));
    var driver = new ChromeDriver(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T22:57:46.513

```
ChromeOptions options = new ChromeOptions();
options.AddArgument("--disable-extensions");
var driver = new ChromeDriver(options); 
```

非常适合我。

# shopify - 有条件地在 Shopify 集合网格中嵌入非产品元素

> ID：14288403
> 
> 赞同：3
> 
> 时间：2013-01-11T23:37:14.277
> 
> 标签：shopify

这似乎很容易，但是在研究和敲打了几个小时之后，我仍然无法弄清楚。我的目标是在 Shopify 集合网格中插入一个非产品 HTML 块，例如此处第 1 行第 3 列中的“享受免费陆运”块：

[http://www.katespade.com/designer-handbags/handbags,default,sc.html](http://www.katespade.com/designer-handbags/handbags,default,sc.html)

我的收藏网格设置为每页 3 列乘以 4 行，我希望用 3 个或更多产品替换所有收藏页面第 2 行第 1 列的块。

我需要修改的液体循环是：

```
 <ul class="product-grid clearfix">
    {% for product in collection.products %}
      <li{% cycle '', '', ' class="last-in-row"' %}>
        {% include 'product-grid-item' %}
      </li>
    {% endfor %}
    </ul> 
```

有没有人有任何见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:57:51.877

欢迎来到堆栈溢出！:-)

首先，让我对其进行伪编码以确保我们在同一页面上，并且我的逻辑是正确的。

```
for each product in collection
{
    is this the 4th iteration of the loop?
    (in other words, is it the first item in the second row)
    {
        Add an <li> for the custom non-product block.
    }

    Add an <li> for the standard product block
} 
```

如果该逻辑符合您的要求，那么这就是 Liquid 中的真实内容。

```
<ul class="product-grid clearfix">

{% for product in collection.products %}

    {% if forloop.index == 4 %}
        <li{% cycle '', '', ' class="last-in-row"' %}>
            {% include 'your-custom-block-element' %}
        </li>
    {% endif %}

    <li{% cycle '', '', ' class="last-in-row"' %}>
        {% include 'product-grid-item' %}
    </li>

{% endfor %}

</ul> 
```

您可能已经注意到 Shopify 默认处理基于 1 的索引。这就是我们寻找`forloop.index == 4`. 在几乎所有其他语言中，我们都会处理从零开始的索引并检查是否`forloop.index == 3`.

如果这个约定让你感到困惑，你总是可以用`forloop.index0`零来检查循环的索引。;-)

请让我知道这是否对您有用。祝你好运！

# c# - .NET 中的父子用户帐户

> ID：14288405
> 
> 赞同：1
> 
> 时间：2013-01-11T23:37:29.077
> 
> 标签：c#, asp.net-mvc, security, membership-provider

我正在开发一个系统，我已经实现了会员提供程序来处理帐户。

我需要的是一种让各种用户说“管理员”为他们的员工创建子帐户的方法。我猜这是某种层次结构设计。

以前我已经这样做了，应用程序的身份验证/安全性已经完全自定义，因此不涉及成员资格提供者。

用户数量将达到数十万，我想使用该提供程序，因为它可以节省开发自定义解决方案的时间。

我应该使用提供者还是开发自定义解决方案来处理这种类型的父/子用户数据，或者扩展提供者添加额外的字段，比如“创建者”并使用首先创建用户的人的 ID，这样我就可以获得管理员使用其 ID 登录时的用户列表。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:53:52.560

我会尽量避免弄乱会员表。在数据库中创建一个单独的`UserData`表。这应该`UserId`与成员用户表具有相同的主键，然后包含其他自定义信息。特别是一`ParentId`列。对于子用户，这可以参考相应的管理员，对于管理员，它可以设置为`null`。

在 ASP.NET 中，当用户登录时，让会员系统对他们进行身份验证，然后查询`UserData`表以查找其他信息（在这种情况下，他们的父用户是谁）。

# python - 获取lxml中的项目符号列表

> ID：14288408
> 
> 赞同：1
> 
> 时间：2013-01-11T23:38:03.073
> 
> 标签：python, python-3.x, lxml

所以我有一个这样的html：

```
...
<ul class="myclass">
    <li>blah</li>
    <li>blah2</li>
</ul>
... 
```

我想从类名“myclass”的 ul 中获取文本“blah”和“blah2”

所以我尝试使用innerhtml()，但由于某种原因它不适用于lxml。

我正在使用 Python 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:44:40.100

我会尝试：

```
doc.xpath('.//ul[@class = "myclass"]/li/text()')
# out: ["blah","blah2"] 
```

*编辑：*

*`what if there was a <a> in the <li>? for example, how would I get "link" and text" from <li><a href="link">text</a></li>?`*

```
link = doc.xpath('.//ul[@class = "myclass"]/li/a/@href')
txt= doc.xpath('.//ul[@class = "myclass"]/li/a/text()') 
```

*如果你愿意，你可以将它们结合起来，如果我们以@larsmans 为例，你可以使用它`'//'`来获取整个文本，因为我相信 lxml 不支持`string()`表达式中的方法。*

```
doc.xpath('.//ul[@class="myclass"]/li[a]//text() | .//ul[@class="myclass"]/li/a/@href')
# out: ['I contain a ', 'http://example.com', 'link', '.'] 
```

此外，您可以使用以下`text_content()`方法：

```
html=\
"""
<html>
<ul class="myclass">
    <li>I contain a <a href="http://example.com">link</a>.</li>
    <li>blah</li>
    <li>blah2</li>
</ul>
</html>
"""
import lxml.html as lh
doc=lh.fromstring(html)
for elem in doc.xpath('.//ul[@class="myclass"]/li'):
    print elem.text_content() 
```

*印刷：*

```
#I contain a link.
#blah
#blah2 
```

# ruby-on-rails - Rails 开发环境加载每个资产文件需要 5-10 秒

> ID：14288417
> 
> 赞同：1
> 
> 时间：2013-01-11T23:38:29.747
> 
> 标签：ruby-on-rails, performance

使用 Rails 3，加载每个页面可能需要 10 秒到几分钟的时间；查看输出，似乎在幕后发生了一些事情，因为绝大多数这些文件的服务时间被列为 0 毫秒，但在每个文件之间需要 5-10 秒以上才能进入下一个文件. 几个来源推荐 RailsDevTweaks，我已经安装并运行了它，它确实打印了一条消息“RailsDevTweaks: Skipping ActionDispatch::Reloader hooks for this request.”，但这似乎没有多大作用。这里有什么想法吗？让我知道我可以提供哪些信息来帮助解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T17:20:59.560

> 确保您没有使用**host.local**顶级域名。

查看这些答案以获取更多详细信息：

[慢速资产 ruby​​ 1.9.3、macos、rails 3.2](https://stackoverflow.com/questions/9720572/slow-assets-ruby-1-9-3-macos-rails-3-2)

[https://serverfault.com/questions/322747/can-a-long-etc-hosts-file-slow-dns-lookup](https://serverfault.com/questions/322747/can-a-long-etc-hosts-file-slow-dns-lookup)

# c# - WPF中两个分离视图之间的通信

> ID：14288423
> 
> 赞同：0
> 
> 时间：2013-01-11T23:39:08.567
> 
> 标签：c#, wpf, xaml, mvvm

我*`MainWindows.xaml`*包含两个 Controls 元素。第一个与 连接，`MapView.xaml` *`<Controls:MapView />`*第二个与连接`InfoView.xaml` *`<Controls:InfoView />`*。现在我想从Object的`InfoView dataContext`对象执行方法。*`InfoViewModel`**`MapView DataContext`**`MapViewModel`*

我怎样才能做到这一点？

MapView.xaml.cs

```
public MapView()
    {
        InitializeComponent();
        _mapViewModel = new MapViewModel();
        this.DataContext = _mapViewModel;
    } 
```

InfoView.xaml.cs

```
public InfoView()
    {
        InitializeComponent();
        _infoViewModel = new InfoViewModel();
        this.DataContext = _infoViewModel;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:47:33.670

一种方法是使用 EventAggregator 和您自己的事件从源发送通知并在订阅者中捕获它。

这种方法的一个优点是它是通用的，你可以从任何地方发送任何消息到任何地方来完成任何事情，你从源发送消息并在订阅者中捕获它。

EventAggregator 内置于 Prism 中。

# r - r 的显着差异

> ID：14288427
> 
> 赞同：2
> 
> 时间：2013-01-11T23:39:34.620
> 
> 标签：r, statistics, significance

所以这是我的问题：

我有一堆关于声音制作以及重点放在一个词中的数据。我要做的是确定重读音节和非重读音节的产生之间的差异是否显着。问题是当我尝试使用 cor() 函数时，数据集的长度不同。我有大约 500 个重读音节，但只有 400 个非重读音节。我对 r 很陌生，但这是我尝试过的代码：

```
data <- read.csv('D:/blaaah/Stressed.csv', header=TRUE)
var1 <- data$intdiff
data <- read.csv('D:/blaaah/Unstressed.csv', header=TRUE)
var2 <- data$intdiff
cor(var1, var2) 
```

当然，我得到一个错误，因为数据集的长度不同。那么如何在不让它们具有相同长度的情况下检查集合之间的重要性呢？

非常感谢！

PS只要问我的问题是否不清楚。恐怕我有时会假设每个人都知道我在做什么...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T00:25:21.003

*如果您希望var1*和*var2*之间存在关系，则使用 cor() 将是合适的，例如，如果您希望*var2中的项目的值更大，而**var1*中的相应项目更大。当数据集的长度不同时会出现困难，因为一旦超过较短数据集的末尾，就没有相应的项目可以比较。

我认为，在这种情况下，比较两个数据集以确定它们的均值是否不同更有可能对您有用。为此，您希望在测试中使用 R 中的示例，如前所述，请参见[此处](https://stats.stackexchange.com/questions/15724/how-to-compare-group-means-for-two-samples-with-t-test-using-r)。您还想确认使用 t 检验的假设对于这种情况是有效的，例如，请参见[此处](http://en.wikipedia.org/wiki/Student%27s_t-test)。

# sql - 从两个关联表中查询数据

> ID：14288429
> 
> 赞同：0
> 
> 时间：2013-01-11T23:39:39.087
> 
> 标签：sql, ruby-on-rails, rails-activerecord

对于我的应用程序：

*   用户有_许多图像，图像属于_用户
*   图像 has_one 位置，位置 belongs_to 图像

也许位置的字段应该只是图像的一部分。但无论如何，我正在尝试在 Rails 中编写此查询：

```
 SELECT image.caption, location.latitude, location.longitude 
    FROM   image, location 
    WHERE  location.image_id = image.id 
    AND    image.user_id = 5 
```

或者，如果它更容易：

```
 SELECT  image.*, location.*
    FROM    image, location
    WHERE   location.image_id = image.id 
    AND     image.user_id = 5 
```

我将如何将其编写为 ActiveRecord 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:44:38.180

我认为您想阅读有关**[Eager Loading Associations](http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations)**的信息。

```
@images = Image.includes(:location).where("images.user_id = ?", 5) 
```

这将`Image`找到`user_id = 5`. 然后它运行第二个查询，该查询将`JOIN`构建关联的`Location`实例*（这就是`.includes(:location)`将为您做的）*。

这更接近您的替代查询，因为它确实从表中选择所有`images`列`location`。

您可以基于此构建一个包含哈希的数组，其中仅包含您感兴趣的键。

```
@hash_object = @images.collect { |i| { caption: i.caption, latitude: i.location.latitude, longitude: i.location.longitude } } 
```

* * *

如果你只想用一个查询来构建它，你可以`.joins(:location)`结合使用`.includes(:location)`

```
Image.joins(:location).includes(:location).where("images.user_id = ?", 5) 
```

**重要提示：**这将省略`Image`没有关联的实例`Location`。您可以修改`joins()`一点来帮助解决这个问题，但上面会有这个遗漏。

* * *

如果您**真的**只想选择特定的列，请阅读**[Selecting Specific Columns](http://guides.rubyonrails.org/active_record_querying.html#selecting-specific-fields)**尽管有使用此功能的警告

> 如果使用 select 方法，所有返回的对象都将是只读的。

和

> 请小心，因为这也意味着您正在初始化一个仅使用您选择的字段的模型对象。

* * *

在 Rails master（不在 3.2.11 中）中，您可以将*多个*列传递给，[`.pluck()`](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/calculations.rb#L111)但这似乎仅限于单个表*（您将无法获取`locations`表的`:latitude`和`:longitude`从 中提取时`Image`）*。不过很高兴知道。

# azure - 为什么添加新实例不会增加 azure 中的内存？

> ID：14288433
> 
> 赞同：-2
> 
> 时间：2013-01-11T23:40:07.350
> 
> 标签：azure

今天我的网站因内存不足而被暂停（我处于共享模式 - 试用期）。因此，我不得不等待将近一个小时才能看到我的网站再次正常工作。

但是一个站点永远不应该关闭，也不应该持续这么长时间。

此外，在第一阶段，我的流量非常低（内存不足让我很吃惊）。当我内存不足时，我立即扩展了我的资源。首先，我尝试添加一个实例（传递给 2），但内存仍然是 512MB，我无法看到分配的资源有任何变化。所以，我通过了保留，但它仍然被暂停。

问题：是否可以保持共享模式并增加资源？为什么如果我添加实例我看不到我的资源有任何差异（显示在仪表板中）？如果我的网站已关闭，如何通知我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T06:14:55.623

增加网站实例不会增加资源。它只会增加您网站的负载平衡副本的数量。资源不跨实例共享。如果您正在进行大量缓存，那么您可能需要迁移到云服务 Web 角色。

网站非常有限。它们是最基本的网站。如果您的网站内存超过 512mb 且使用率较低，并且您希望留在 Azure 网站上，那么您需要进行一些分析并查看您的应用程序中的哪些内容正在消耗资源。

# javascript - ng:disabled 不适用于选择 html 元素

> ID：14288436
> 
> 赞同：4
> 
> 时间：2013-01-11T23:40:19.417
> 
> 标签：javascript, angularjs

我正在编写 web 基础项目，我正在使用 angularjs。我在选择 html 元素上发现了 ng:disabled 指令的小错误。如果元素被禁用，我仍然可以使用向下和向上的键盘箭头更改其值。所以我想实现的是禁用select元素并消除这个小东西。

有人可以解释一下这个指令是如何工作的吗？我看过 angularjs 但无法弄清楚。

这是错误还是正常行为，我无法理解？

感谢您提前回答。

示例：http: [//jsfiddle.net/kickwce/m23Gr/1/](http://jsfiddle.net/kickwce/m23Gr/1/)

```
<select class="select input-large" id="listType" name="listType"
                        ng-model="listType" ng-disabled="listType">
                        <option value="">- choose -</option>
                        <option value="item1">List of tracks</option>
                        <option value="item2">List of collections</option>
                    </select> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T02:21:07.700

问题似乎是选择框不会失去焦点。一个指令可以解决这个问题：

```
myApp.directive('blur', function () {
  return function (scope, element, attrs) {
    attrs.$observe('blur', function (newValue) {
      newValue != "" && element[0].blur();
    });
  }
}); 
```

HTML：

```
<select ... ng-model="listType" ng-disabled="listType" blur="{{listType}}"> 
```

[小提琴](http://jsfiddle.net/mrajcok/53yHW/)。

您可能应该在选择列表中使用[ng-options 。](http://docs.angularjs.org/api/ng.directive%3aselect)

# objective-c - 广告网络中介展示位置 adMob

> ID：14288437
> 
> 赞同：1
> 
> 时间：2013-01-11T23:40:26.117
> 
> 标签：objective-c, xcode, admob

我一直在谷歌上试图弄清楚如何在 adMob SDK 中打开中介！！！在自己的页面（https://developers.google.com/mobile-ads-sdk/docs/admob/mediation#ios）上，他们有一个分步指南，但也许我很愚蠢或者缺少什么。该指南指出：

> 将您的中介 ID（而不是 AdMob 网站 ID）指定为 GADBannerView 的 adUnitID。您可以在您创建的中介展示位置的设置页面上找到您的中介 ID

这应该在 GADBannerView.h 中，如果是的话……在哪里？

```
//  GADBannerView.h
//  Google AdMob Ads SDK
//
//  Copyright 2011 Google Inc. All rights reserved.
//

#import <UIKit/UIKit.h>
#import "GADAdSize.h"
#import "GADRequest.h"
#import "GADRequestError.h"
#import "GADBannerViewDelegate.h"

// The view that displays banner ads.  A minimum implementation to get an ad
// from within a UIViewController class is:
//
//   // Create and setup the ad view, specifying the size and origin at {0, 0}.
//   GADBannerView *adView =
//       [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
//   adView.rootViewController = self;
//   adView.adUnitID = @"ID created when registering my app";
//
//   // Place the ad view onto the screen.
//   [self.view addSubview:adView];
//   [adView release];
//
//   // Request an ad without any additional targeting information.
//   [adView loadRequest:nil];
//
@interface GADBannerView : UIView

#pragma mark Initialization

// Initializes a GADBannerView and sets it to the specified size, and specifies
// its placement within its superview bounds. If |size| is invalid, an
// instance of GADBannerView is not created and nil is returned instead.
- (id)initWithAdSize:(GADAdSize)size origin:(CGPoint)origin;

// Initializes a GADBannerView and sets it to the specified size, and specifies
// its placement at the top left of its superview. If |size| is invalid, an
// instance of GADBannerView is not created and nil is returned instead.
- (id)initWithAdSize:(GADAdSize)size;

#pragma mark Pre-Request

// Required value created in the AdSense website.  Create a new ad unit for
// every unique placement of an ad in your application.  Set this to the ID
// assigned for this placement.  Ad units are important for targeting and stats.
// Example values for different request types:
//     AdMob: a0123456789ABCD
//       DFP: /0123/ca-pub-0123456789012345/my-ad-identifier
//   AdSense: ca-mb-app-pub-0123456789012345/my-ad-identifier
// Mediation: AB123456789ABCDE
@property (nonatomic, copy) NSString *adUnitID;

// Required reference to the current root view controller.  For example the root
// view controller in tab-based application would be the UITabViewController.
@property (nonatomic, assign) UIViewController *rootViewController;

// Required to set this banner view to a proper size. Never create your own
// GADAdSize directly. Use one of the predefined standard ad sizes
// (such as kGADAdSizeBanner), or create one using the GADAdSizeFromCGSize
// method. If not using mediation, then changing the adSize after an ad has
// been shown will cause a new request (for an ad of the new size) to be sent.
// If using mediation, then a new request may not be sent.
@property (nonatomic) GADAdSize adSize;

// Optional delegate object that receives state change notifications from this
// GADBannerView.  Typically this is a UIViewController, however, if you are
// unfamiliar with the delegate pattern it is recommended you subclass this
// GADBannerView and make it the delegate.  That avoids any chance of your
// application crashing if you forget to nil out the delegate.  For example:
//
//   @interface MyAdView : GADBannerView <GADBannerViewDelegate>
//   @end
//
//   @implementation MyAdView
//   - (id)initWithFrame:(CGRect)frame {
//     if ((self = [super initWithFrame:frame])) {
//       self.delegate = self;
//     }
//     return self;
//   }
//
//   - (void)dealloc {
//     self.delegate = nil;
//     [super dealloc];
//   }
//
//   @end
//
@property (nonatomic, assign) NSObject<GADBannerViewDelegate> *delegate;

#pragma mark Making an Ad Request

// Makes an ad request.  Additional targeting options can be supplied with a
// request object.  Refresh the ad by calling this method again.
- (void)loadRequest:(GADRequest *)request;

#pragma mark Ad Request

// YES, if the currently displayed ad (or most recent failure) was a result of
// auto refreshing as specified on server.  This will be set to NO after each
// loadRequest: method.
@property (nonatomic, readonly) BOOL hasAutoRefreshed;

#pragma mark Mediation

// Gets the underlying ad view of the mediated ad network.
// You may use this to find out the actual size of the ad and adjust
// GADBannerView to fit the underlying ad view.
@property (nonatomic, readonly) UIView *mediatedAdView;

@end 
```

如果没有，是否应该有一个 .m 文件？

请帮忙...我快疯了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T10:38:04.760

不，它应该是您提出请求的地方。在视图控制器中，它将显示广告。我的工作代码：

```
 GADAdSize adSize;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        adSize = kGADAdSizeBanner;
    }else {
        adSize = kGADAdSizeLeaderboard;
    }
    CGPoint origin = CGPointMake(0.0,
                                 self.view.frame.size.height + 20 - 50 -
                                 CGSizeFromGADAdSize(adSize).height);
    bannerView = [[GADBannerView alloc] initWithAdSize:adSize origin:origin];
    // Specify the ad's "unit identifier." This is your AdMob Publisher ID.
    bannerView.adUnitID = @"39ca7331d2c4436a";

    bannerView.rootViewController = self;
    bannerView.delegate = self;

    GADRequest *request = [GADRequest request];

    [bannerView loadRequest:request]; 
```

您应该替换`39ca7331d2c4436a`为您的`Mediation ID`.

# macos - 检测 CGAssociateMouseAndMouseCursorPosition

> ID：14288438
> 
> 赞同：63
> 
> 时间：2013-01-11T23:40:33.327
> 
> 标签：macos, core-graphics, mouseevent, quartz-graphics

我们正在为 OS X 制作一个使用 Quartz 事件移动光标的用户空间设备驱动程序，当游戏（尤其是在窗口模式下运行的游戏）无法正确捕获鼠标指针*（= 包含/保持在他们窗户的边界内）*。例如，它会走出游戏窗口并单击桌面或附近的非活动应用程序。

如果我们能够检测到活动应用程序何时调用 CGAssociateMouseAndMouseCursorPosition，我们就可以解决这个问题。

你会怎么做？任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T15:19:26.823

我不知道这是否可以帮助你

有一个选项叫做焦点跟随鼠标

焦点跟随鼠标 - 如果您将鼠标悬停在此应用程序上，鼠标指针将自动将焦点更改为新窗口，而不必单击窗口以获得焦点，然后单击执行某些操作。

[http://wineskin.urgesoftware.com/tiki-index.php?page=Manual+4.6+Advanced+-+Options](http://wineskin.urgesoftware.com/tiki-index.php?page=Manual%204.6%20Advanced%20-%20Options)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-24T07:00:14.910

我写了几个不同的鼠标逻辑层（用于桥接不同的输入设备等）。我发现挂钩到操作系统级别的 WM_INPUT 事件是获取**非常**实时的鼠标位置信息的可靠方法。还有一个不太严格的解决方案，即从 Windows 的一个非常原始的 DLL 中轮询您需要的鼠标数据。他们快如闪电。您可以在 10 毫秒计时器上进行轮询，并且永远不会在现代机器上看到性能损失。

# jpa - 获取错误原因：org.hibernate.AnnotationException：使用@OneToMany 或@ManyToMany 针对未映射的类

> ID：14288439
> 
> 赞同：2
> 
> 时间：2013-01-11T23:41:07.183
> 
> 标签：jpa, jaxb, hibernate-mapping, hyperjaxb

我是 JPA/Hyperjaxb 领域的新手。我的目标是在 Author 和 Book 表（postgres 数据库）之间生成多对多映射。

在数据库中 - Author 表有列 - id、name 和 Book 表有列 - id、title。我有一个联结（链接）表 AUTHORS_BOOKS ，它具有栏aid、bid（其中aid 映射到 Author 表中的 id 字段和bid 映射到 Book 表中的 id 字段）。

我们正在公开一个 web 服务（让我们不要关注为什么要使用 web 服务），以允许客户查询/浏览作者和书籍。对于 web 服务，我正在使用 hyperjaxb 表示法创建 pojos（这就是它的本来面目）。

这是我的 types.xsd 文件：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?> 
```

```
<xs:complexType name="author">
    <xs:sequence>
        <xs:element name="id" type="xs:long"/>
        <xs:element name="name" type="xs:string" />
        <xs:element name="books" type="tns:book" minOccurs="0" maxOccurs="1000"/>
    </xs:sequence>
</xs:complexType>

<xs:complexType name="book">
    <xs:sequence>
        <xs:element name="id" type="xs:long"/>
        <xs:element name="title" type="xs:string"/>
        <xs:element name="authors" type="tns:author" minOccurs="0" maxOccurs="1000"/>
    </xs:sequence>
</xs:complexType> 
```

这是 bindings.xjb 文件：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<jaxb:bindings schemaLocation="sampletypes.xsd"
    node="/xs:schema">
    <jaxb:bindings node="xs:complexType[@name='author']">
        <hj:entity>
            <orm:table name="AUTHORS">
                <orm:unique-constraint>
                    <orm:column-name>NAME</orm:column-name>
                </orm:unique-constraint>
            </orm:table>
        </hj:entity>        
    </jaxb:bindings>

    <jaxb:bindings node="xs:complexType[@name='cocom']">
        <hj:entity>
               <orm:table name="BOOKS">
                     <orm:unique-constraint>
                            <orm:column-name>NAME</orm:column-name>
                     </orm:unique-constraint>
               </orm:table>
        </hj:entity>        
     </jaxb:bindings>

    <jaxb:bindings
            node="xs:complexType[@name='author']//xs:element[@name='books']">
                   <hj:many-to-many name="books">
                         <orm:join-table name="AUTHORS_BOOKS">
                                <orm:join-column name="aid" referenced-column-name="ID" />
                                <orm:inverse-join-column name="bid" referenced-column-name="ID" />
                         </orm:join-table>
                   </hj:many-to-many>
     </jaxb:bindings>

     <jaxb:bindings
                node="xs:complexType[@name='book']//xs:element[@name='authors']">
                       <hj:many-to-many name="authors" mappedBy="books">
                       <hj:cascade>
                       <hj:cascade-persist/>
                       </hj:cascade>
                       </hj:many-to-many>
      </jaxb:bindings>

    <jaxb:bindings
        node="xs:complexType[@name='author']//xs:element[@name='id']">
        <hj:id>
            <orm:generated-value strategy="AUTO" />
        </hj:id>
    </jaxb:bindings>

    <jaxb:bindings
        node="xs:complexType[@name='book']//xs:element[@name='id']">
        <hj:id>
            <orm:generated-value strategy="AUTO" />
        </hj:id>
    </jaxb:bindings>

</jaxb:bindings> 
```

这是生成的 Author.java （部分）：

```
 @XmlAccessorType(XmlAccessType.FIELD)
 @XmlType(name = "author", propOrder = {
"id",
"name",
"books"
})
@Entity(name = "Author")
@Table(name = "AUTHOR", uniqueConstraints = {
@UniqueConstraint(columnNames = {
    "NAME"
})
})
 @Inheritance(strategy = InheritanceType.JOINED)
 public class Author
implements Serializable, Equals, HashCode, ToString
{

 //some othe stuff

@ManyToMany(targetEntity = Book.class, cascade = {
    CascadeType.ALL
})
@JoinTable(name = "AUTHORS_BOOKS", joinColumns = {
    @JoinColumn(name = "aid", referencedColumnName = "ID")
}, inverseJoinColumns = {
    @JoinColumn(name = "bid", referencedColumnName = "ID")
})
public List<Book> getBooks() {
    if (books == null) {
        books = new ArrayList<Book>();
    }
    return this.books;
}

} 
```

这是生成 Book.java 的（部分）：

```
 @XmlAccessorType(XmlAccessType.FIELD)
 @XmlType(name = "book", propOrder = {
"id",
"title",
"authors"
})
@Entity(name = "Book")
@Table(name = "BOOK", uniqueConstraints = {
@UniqueConstraint(columnNames = {
    "NAME"
})
})

@Inheritance(strategy = InheritanceType.JOINED)
public class Book
implements Serializable, Equals, HashCode, ToString
{

private final static long serialVersionUID = 1L;
protected long id;
@XmlElement(required = true)
protected String title;
protected List<Author> authors;

/**
 * Gets the value of the id property.
 * 
 */
@Id
@Column(name = "ID", scale = 0)
@GeneratedValue(strategy = GenerationType.AUTO)
public long getId() {
    return id;
}

/**
 * Sets the value of the id property.
 * 
 */
public void setId(long value) {
    this.id = value;
}

@Basic
@Column(name = "NAME_", length = 255)
public String getName() {
    return name;
}

public void setName(String value) {
    this.name = value;
}

@ManyToMany(targetEntity = Book.class, cascade = {
    CascadeType.ALL
})
@JoinTable(name = "AUTHORS_BOOKS", joinColumns = {
    @JoinColumn(name = "PARENT_AUTHOR_ID")
}, inverseJoinColumns = {
    @JoinColumn(name = "CHILD_BOOK_ID")
})
public List<Book> getBooks() {
    if (books == null) {
        books = new ArrayList<Book>();
    }
    return this.books;
} 
```

我不确定我做错了什么，但是当我将war文件部署到tomcat时出现以下错误（7.0.34，还尝试了其他几个7.0.x版本）

```
Error Message: 
Caused by: org.hibernate.AnnotationException: Use of @OneToMany or @ManyToMany targeting an unmapped class:com.mycompany.Author.books[com.mycompany.Book] 
```

我一直在网上搜索答案，要么没有解决方案，要么大多数错误是由于 @ManyToMany 标记中缺少 @Entity 或 @Id 或 targetEntity 字段。我真的可以在这方面使用一些指针！非常感谢您的时间和帮助！谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T19:29:41.633

谢谢大家的帮助！原来这是一个映射问题。在 /src/main/resources/persistence.xml 文件中，我忘记添加完整的类路径（对于 Book.java），所以 Hibernate 找不到它。所以这更像是一个集成问题。再次感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T17:00:45.630

有同样的。原来我愚蠢到在 oneToMany 类中写 List 而不是 List ......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:12:30.507

问题是，为什么 Hibernate 认为 com.mycompany.Book 没有映射。

我会怀疑重复类或类似的问题。首先尝试运行一个独立的往返测试（HJ3 对此提供了一些支持）。这显然与Tomcat版本等无关。

# visual-studio-lightswitch - Lightswitch 1 到 0..1 的关系，如何在编辑屏幕中添加支持行？

> ID：14288440
> 
> 赞同：1
> 
> 时间：2013-01-11T23:41:12.717
> 
> 标签：visual-studio-lightswitch

有一个 Lightswitch 2012 项目，其中包含两个表，它们之间具有 1 到 0..1 的关系。当我打开“1”一侧的行的编辑屏幕并且该行在“0..1”一侧尚不存在时，我会禁用该数据的文本框。但是没有按钮可以在“0..1”一侧添加新行。有没有办法做到这一点，或者不得不求助于代码？

**第一次尝试**

尝试了以下代码：

```
partial void Bill_Loaded(bool succeeded)
{
    if (this.Bill.Summary == null)
    {
        Summary summary = this.DataWorkspace.Data.Summaries.AddNew();
        brief.ID = this.Bill.ID;
        this.DataWorkspace.Data.SaveChanges();
        this.Refresh();
    }               
    this.SetDisplayNameFromEntity(this.Bill);
} 
```

它可以工作，但似乎我正在加载屏幕，添加`Summary`然后刷新屏幕。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:41:48.580

这应该有效：

```
partial void Bill_Loaded(bool succeeded)
{
    if (this.Bill.Summary == null)
        this.Bill.Summary = new Summary();
} 
```

# php - 从 PHP 正确回显 HTML

> ID：14288441
> 
> 赞同：-1
> 
> 时间：2013-01-11T23:41:12.980
> 
> 标签：php, html, echo

我有一个类，它有一个方法，`paint()`所以我调用`$object->paint();`它，它返回 html 代码以我喜欢的方式显示对象。在一个函数中，我有一个这些对象的数组，所以我做这样的事情：

```
$code = '<p class="wrapper">';
foreach( $object_arr as $object ){
    $code .= $object->paint();
}
$code .='</p>';
echo $code; 
```

但我得到的结果是这样的：

```
<p class="wrapper"></p>
<figure id="f1">Figure 1</figure>
<figure id="f2">Figure 2</figure>
...
<figure id="fn">Figure n</figure> 
```

函数paint() 返回绘制对象的代码，我期待看到：

```
<p class="wrapper">
    <figure id="f1">Figure 1</figure>
    <figure id="f2">Figure 2</figure>
    ...
    <figure id="fn">Figure n</figure>
</p> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:48:21.107

更多代码会有所帮助，但这可能会让您走上正确的道路。

$object_arr 是什么数组。您可以在对象数组中发布对象的示例吗？

在我的示例中，您还必须传入索引才能获得 id="fnn"。

如果您发布更多代码，我可以澄清我的答案。

```
<?php
function paint($str){
    return '<figure id="fn">'.$str.'</figure>';
}
$object_arr =Array('happy','beans');
$code = '<p class="wrapper">';
foreach( $object_arr as $object ){
    $code .= paint($object);
}
$code .='</p>';
echo $code; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:54:00.110

您正在查看的结果可能会被您的浏览器更正。`p`不接受`figure`作为孩子，因此浏览器可能会通过关闭您的第一个`<p class="wrapper">`.

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-11T23:44:06.893

如果您使用单引号，则在方法调用之前放置一个制表符：

```
$code .= '    ' . $object->paint(); 
```

但这会更容易：

```
$code .= "\t" . $object->paint(); 
```

# python - 用python检查windows用户是否存在

> ID：14288447
> 
> 赞同：-1
> 
> 时间：2013-01-11T23:41:53.187
> 
> 标签：python, pywin32

我正在尝试验证用户是否有权访问该机器。

我正在尝试按照[此处](http://timgolden.me.uk/python/win32_how_do_i/check-a-users-credentials.html)所述使用[LogonUser](http://timgolden.me.uk/pywin32-docs/win32security__LogonUser_meth.html)：

```
 logging.info("checking credentials")
    try:
        win32security.LogonUser (
            name, 
            domain,
            password,
            win32security.LOGON32_LOGON_NETWORK,
            win32security.LOGON32_PROVIDER_DEFAULT
        )
    except win32security.error, e:
        logging.warn(e)
        raise e
    else:
        logging.info('pass') 
```

但是，无论我输入什么`name`或`password`（比如说`domain = None`）它总是通过。

我错过了什么吗？

**更新**：重现：

```
import win32security

print win32security.LogonUser (
                "asdasdasdasdfagf", 
                None,
                "asdasdasdasdasda",
                win32security.LOGON32_LOGON_NETWORK,
                win32security.LOGON32_PROVIDER_DEFAULT
            ) 
```

输出：

```
<PyHANDLE at 34009576 (276)> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:26:40.827

尽管我怀疑这实际上是您所追求的答案，但我能看到的唯一区别是您所做的测试与我在我使用的应用程序中成功使用的方式是使用`LOGON32_LOGON_NETWORK`标志而不是`LOGON32_LOGON_INTERACTIVE`标志。但是，对于我们的产品所做的事情，我们对桌面交互性有特定的要求，我怀疑这实际上是一个会影响您的结果的更改。

```
def testLogin(self):
  try:
    LogonUser(self.wrappers['User'].GetValue(),
              self.wrappers['Domain'].GetValue(),
              self.wrappers['Password'].GetRawValue(),
              LOGON32_LOGON_INTERACTIVE,
              LOGON32_PROVIDER_DEFAULT)
    RevertToSelf()
  except Exception, e:
    wx.MessageBox(unicode(e), _("Error"))
    return False
  return True 
```

域值`None`应该查看当前域，因此如果您*真的*能够使用系统上的*任何*用户名和密码运行此代码，那么您的系统有问题，或者您的域有问题。

# java - 从 Java 写入 HDFS，得到“只能复制到 0 个节点而不是 minReplication”

> ID：14288453
> 
> 赞同：23
> 
> 时间：2013-01-11T23:43:15.483
> 
> 标签：java, hadoop, hdfs

我已经为 CDH4 下载并启动了 Cloudera 的 Hadoop Demo VM（运行 Hadoop 2.0.0）。我正在尝试编写一个 Java 程序，它将在我的 Windows 7 机器上运行（与运行 VM 相同的机器/操作系统）。我有一个示例程序，例如：

```
public static void main(String[] args) {
    try{
        Configuration conf = new Configuration();
        conf.addResource("config.xml");
        FileSystem fs = FileSystem.get(conf);
        FSDataOutputStream fdos=fs.create(new Path("/testing/file01.txt"), true);
        fdos.writeBytes("Test text for the txt file");
        fdos.flush();
        fdos.close();
        fs.close();
    }catch(Exception e){
        e.printStackTrace();
    }

} 
```

我的 config.xml 文件仅定义了属性：fs.default.name=hdfs://CDH4_IP:8020。

当我运行它时，我得到以下异常：

```
org.apache.hadoop.ipc.RemoteException(java.io.IOException): File /testing/file01.txt could only be replicated to 0 nodes instead of minReplication (=1).  There are 1 datanode(s) running and 1 node(s) are excluded in this operation.
    at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget(BlockManager.java:1322)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2170)
    at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:471)
    at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:297)
    at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44080)
    at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1687)
    at org.apache.hadoop.ipc.Client.call(Client.java:1160)
    at org.apache.hadoop.ipc.ProtobufRpcEngine$Invoker.invoke(ProtobufRpcEngine.java:202)
    at $Proxy9.addBlock(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invokeMethod(RetryInvocationHandler.java:164)
    at org.apache.hadoop.io.retry.RetryInvocationHandler.invoke(RetryInvocationHandler.java:83)
    at $Proxy9.addBlock(Unknown Source)
    at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolTranslatorPB.addBlock(ClientNamenodeProtocolTranslatorPB.java:290)
    at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.locateFollowingBlock(DFSOutputStream.java:1150)
    at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.nextBlockOutputStream(DFSOutputStream.java:1003)
    at org.apache.hadoop.hdfs.DFSOutputStream$DataStreamer.run(DFSOutputStream.java:463) 
```

我环顾了互联网，似乎当磁盘空间不足时会发生这种情况，但当我运行“hdfs dfsadmin -report”时，情况并非如此，我得到以下信息：

```
Configured Capacity: 25197727744 (23.47 GB)
Present Capacity: 21771988992 (20.28 GB)
DFS Remaining: 21770715136 (20.28 GB)
DFS Used: 1273856 (1.21 MB)
DFS Used%: 0.01%
Under replicated blocks: 0
Blocks with corrupt replicas: 0
Missing blocks: 0

-------------------------------------------------
Datanodes available: 1 (1 total, 0 dead)

Live datanodes:
Name: 127.0.0.1:50010 (localhost.localdomain)
Hostname: localhost.localdomain
Decommission Status : Normal
Configured Capacity: 25197727744 (23.47 GB)
DFS Used: 1273856 (1.21 MB)
Non DFS Used: 3425738752 (3.19 GB)
DFS Remaining: 21770715136 (20.28 GB)
DFS Used%: 0.01%
DFS Remaining%: 86.4%
Last contact: Fri Jan 11 17:30:56 EST 201323 EST 2013 
```

我也可以在 VM 中很好地运行此代码。我不确定问题是什么或如何解决。这是我第一次使用 hadoop，所以我可能缺少一些基本的东西。有任何想法吗？

# 更新

我在日志中看到的唯一一件事是一个类似于客户端上的异常：

```
java.io.IOException: File /testing/file01.txt could only be replicated to 0 nodes instead of minReplication (=1).  There are 1 datanode(s) running and 1 node(s) are excluded in this operation.
    at org.apache.hadoop.hdfs.server.blockmanagement.BlockManager.chooseTarget(BlockManager.java:1322)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.getAdditionalBlock(FSNamesystem.java:2170)
    at org.apache.hadoop.hdfs.server.namenode.NameNodeRpcServer.addBlock(NameNodeRpcServer.java:471)
    at org.apache.hadoop.hdfs.protocolPB.ClientNamenodeProtocolServerSideTranslatorPB.addBlock(ClientNamenodeProtocolServerSideTranslatorPB.java:297)
    at org.apache.hadoop.hdfs.protocol.proto.ClientNamenodeProtocolProtos$ClientNamenodeProtocol$2.callBlockingMethod(ClientNamenodeProtocolProtos.java:44080)
    at org.apache.hadoop.ipc.ProtobufRpcEngine$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine.java:453)
    at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:898)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1693)
    at org.apache.hadoop.ipc.Server$Handler$1.run(Server.java:1689)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:396)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1332)
    at org.apache.hadoop.ipc.Server$Handler.run(Server.java:1687) 
```

我尝试更改数据目录（/var/lib/hadoop-hdfs/cache/hdfs/dfs/data）的权限，但并没有解决它（我什至让每个人都可以完全访问）。

我注意到，当我通过 HUE Web 应用程序浏览 HDFS 时，我看到文件夹结构已创建并且文件确实存在但它是空的。我尝试使用将文件放在默认用户目录下

```
FSDataOutputStream fdos=fs.create(new Path("testing/file04.txt"), true); 
```

代替

```
FSDataOutputStream fdos=fs.create(new Path("/testing/file04.txt"), true); 
```

这使得文件路径变为“/user/dharris/testing/file04.txt”（“dharris”是我的 Windows 用户）。但这给了我同样的错误。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-04-04T02:36:24.710

我遇到了同样的问题。
就我而言，问题的关键在于错误消息。
有 1 个数据节点正在运行，并且在此操作中排除了 1 个节点。

这意味着您的 hdfs-client 无法使用 50010 端口连接到您的数据节点。当您连接到 hdfs namenode 时，您可以获得数据节点的状态。但是，您的 hdfs-client 将无法连接到您的数据节点。

（在 hdfs 中，namenode 管理文件目录和 datanodes。如果 hdfs-client 连接到 namnenode，它将找到包含数据的目标文件路径和 datanode 地址。然后 hdfs-client 将与 datanode 通信。（您可以使用 netstat 检查那些 datanode uri。因为 hdfs-client 将尝试使用 namenode 通知的地址与 datanodes 通信）

我通过以下方式**解决**了这个问题：

1.  在防火墙中打开 50010(dfs.datanode.address) 端口。
2.  添加属性`"dfs.client.use.datanode.hostname", "true"`
3.  在我的客户端 PC 中将主机名添加到主机文件。

我为我糟糕的英语水平感到抱歉。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-02T07:34:03.493

转到 linux VM 并检查主机名和 iP 地址（使用 ifconfig cmd）。然后在 linux vm 中编辑 /etc/host 文件

IPADDRESS (SPALCE) 主机名

示例：192.168.110.27 clouderavm

并更改所有 hadoop 配置文件，例如

核心站点.xml

hdfs-site.xml

mapred-site.xml

纱线站点.xml

将**localhost 或 localhost.localdomain 或 0.0.0.0**更改为**您的主机名**

然后重启cloudera manager。

在 windows 机器中编辑**C:\Windows\System32\Drivers\etc\hosts**

在末尾添加一行

您的 vm 机器 ip 和主机名（与您在 vm 中的 /etc/host 文件上所做的相同）

**VMIPADDRESS VM主机名**

例子 ：

192.168.110.27 clouderavm

然后现在检查，它应该可以工作，请按照您的视频进行详细配置检查

*[https://www.youtube.com/watch?v=fSGpYHjGIRY](https://www.youtube.com/watch?v=fSGpYHjGIRY)*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-29T06:28:55.127

添加给定的属性`hdfs-site.xml`

```
<property>
   <name>dfs.replication</name>
   <value>1</value>
 </property> 
```

并将此文件也添加到您的程序中

```
conf.addResource("hdfs-site.xml"); 
```

停止 hadoop

```
stop-all.sh 
```

然后开始

```
start-all.sh 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-02T00:39:06.690

我遇到了类似的问题，有两条信息可以帮助你。

1.  我意识到的第一件事是我使用 ssh 隧道访问名称节点，当客户端代码尝试访问数据节点时，由于隧道以某种方式破坏了通信，它找不到数据节点。然后我在与 hadoop 名称节点相同的盒子上运行客户端，它解决了这个问题。简而言之，非标准的网络配置混淆了hadoop寻找数据节点。

2.  我使用ssh隧道的原因是我无法远程访问name node，我认为这是由于管理员的端口限制，所以我使用ssh隧道绕过限制。但事实证明这是hadoop的错误配置。

在我更改后的 core-site.xml 中

```
<name>fs.defaultFS</name>
<value>hdfs://localhost:9000</value> 
```

至

```
<value>hdfs://host_name:9000</value> 
```

我不再需要 ssh turnnel，我可以远程访问 hdfs。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-03T12:58:20.363

由于我在寻找完全相同的问题时发现了很多类似的问题，所以我想我会分享最终对我有用的方法。我在 Hortonworks 上找到了这个论坛帖子：[https ://community.hortonworks.com/questions/16837/cannot-copy-from-local-machine-to-vm-datanode-via.html](https://community.hortonworks.com/questions/16837/cannot-copy-from-local-machine-to-vm-datanode-via.html)

答案是真正理解调用 new Configuration() 的含义并根据需要设置正确的参数。就我而言，这正是那篇文章中提到的那个。所以我的工作代码看起来像这样。

```
try {
    Configuration config = new Configuration();
    config.set("dfs.client.use.datanode.hostname", "true");
    Path pdFile = new Path("stgicp-" + pd);
    FileSystem dFS = FileSystem.get(new URI("hdfs://" + HadoopProperties.HIVE_HOST + ":" + HadoopProperties.HDFS_DEFAULT_PORT), config, 
            HadoopProperties.HIVE_DEFAULT_USER);
    if (dFS.exists(pdFile)) {
        dFS.delete(pdFile, false);
    } 
    FSDataOutputStream outStream = dFS.create(pdFile);
    for (String sjWLR : processWLR.get(pd)) {
        outStream.writeBytes(sjWLR);
    }     
    outStream.flush();
    outStream.close();

    dFS.delete(pdFile, false);
    dFS.close();
} catch (IOException | URISyntaxException | InterruptedException e) {
    log.error("WLR file processing error: " + e.getMessage());
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-02T08:35:51.243

您可以尝试手动删除数据（dfs/data）文件夹并格式化namenode。然后就可以启动hadoop了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T09:52:34.387

在 hadoop 配置中，默认复制设置为 3。检查一次并根据您的要求进行更改

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-30T10:11:16.280

从错误消息复制因子似乎很好 ie1。似乎 datanode 运行正常或存在权限问题。检查权限并检查用户的datanode状态，您正在尝试运行hadoop。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-08T14:20:24.337

我有一个类似的问题，就我而言，我只是清空了以下文件夹`${hadoop.tmp.dir}/nm-local-dir/usercache/{{hdfs_user}}/appcache/`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-10T05:13:57.537

FS好像有点问题。cross-site.xml 中的参数与它尝试读取的文件不匹配

或者

路径中有一些常见的不匹配*（我看到有一个 WINDOWS 参考）。*

您可以使用 cygwin 工具设置路径并将其放置在放置数据节点和临时文件位置的位置，这应该足以解决问题 Location : $/bin/cygpath.exe

> **在我看来， PS**复制似乎不是这里的主要问题

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-12T06:45:30.563

这是我在 HDFS 中创建文件的方法：

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.Path;

FileSystem hdfs = FileSystem.get(context.getConfiguration());
Path outFile=new Path("/path to store the output file");

String line1=null;

if (!hdfs.exists(outFile)){
            OutputStream out = hdfs.create(outFile);
            BufferedWriter br = new BufferedWriter(new OutputStreamWriter(out, "UTF-8"));
            br.write("whatever data"+"\n");
            br.close();
            hdfs.close();
        }
else{
            String line2=null;
            BufferedReader br1 = new BufferedReader(new InputStreamReader(hdfs.open(outFile)));
            while((line2=br1.readLine())!=null){
                line1=line1.concat(line2)+"\n";
            }
            br1.close();
            hdfs.delete(outFile, true);
            OutputStream out = hdfs.create(outFile);
            BufferedWriter br2 = new BufferedWriter(new OutputStreamWriter(out, "UTF-8"));
            br2.write(line1+"new data"+"\n");
            br2.close();
            hdfs.close();
        } 
```

# unit-testing - NUnit 是否支持组装拆卸的概念？

> ID：14288454
> 
> 赞同：9
> 
> 时间：2013-01-11T23:43:21.067
> 
> 标签：unit-testing, nunit, resource-cleanup

NUnit 是否支持类似于可应用于静态方法的[Microsoft.VisualStudio.TestTools.UnitTesting.AssemblyCleanupAttribute的 Assembly Teardown 概念？](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.assemblycleanupattribute%28v=vs.110%29.aspx)

这将在程序集中的所有测试完成后运行。我目前正在使用 NUnit 2.6.0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T04:53:16.220

事实证明，这个功能确实存在于 NUnit 中，只是不是很明显或直观。

根据 Charlie Poole 在我为此功能提出的功能请求中的说法[，](http://bugs.launchpad.net/nunitv2/+bug/1098766)他声明以下内容将起作用，这是他的直接引用。

> 使用 [SetUpFixture] 装饰任何命名空间之外的类。用 [TearDown] 装饰该类的方法。如果您愿意，可以用 [SetUp] 装饰另一个。
> 
> 与您要求的差异：
> 
> 1.  这个名字使它在这种用法中有点不明显。
>     
>     
> 2.  NUnit 允许任意数量的这些并调用它们，没有任何顺序保证。这是设计使然。
>     
>     
> 3.  它可以应用于静态或实例方法。如果它是实例方法，则该类必须具有默认构造函数，并且它将在整个测试运行的生命周期内创建。这也是设计使然。

现在这不是很漂亮，但它应该实现相同的功能，也许他会在 3.0 中使它更干净一些。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:51:38.147

NUnit 中没有这样的概念。但是您可以申请`TestFixtureTearDownAttribute`方法来释放 TestFixture 获得的资源。

# asp.net-mvc - 访问数据存储以验证自身的业务实体：违反 SRP？

> ID：14288457
> 
> 赞同：1
> 
> 时间：2013-01-11T23:43:27.807
> 
> 标签：asp.net-mvc, oop, nhibernate, solid-principles, single-responsibility-principle

考虑以下业务实体类。为了验证自己，它需要了解数据库的状态，也许是为了防止某种冲突。因此，为了检索这些数据，它依赖于数据访问层。

拥有一个封装状态、​​验证状态并访问数据存储的类是否违反了单一职责原则？

```
class MyBusinessObject
{
    private readonly IDataStore DataStore;

    public MyBusinessObject(IDataStore dataStore)
    {
        this.DataStore = dataStore;
    }

    public virtual int? Id { get; protected set; }
    public virtual string Name { get; set; }
    // ... Other properties...

    public IEnumerable<ValidationResult> Validate()
    {
        var data = this.DataStore.GetDataThatInfluencesValidation();
        return this.ValidateUsing(data);
    }

    // ... ValidateUsing method would be in here somewhere ...
} 
```

它给我扔了一面红旗，因为：

*   在 ASP.NET MVC 控制器的 Create 方法的上下文中，我可能会创建一个新实例并将其传递给我的 View() 方法而不打算进行验证，那么为什么需要我传入 IDataStore？
*   我正在使用 NHibernate（而且我是菜鸟），看起来我必须创建一个 IInterceptor 来在 NH 创建实体时注入依赖项。也许这会很好，但对我来说感觉有点不对劲。

我开始认为我应该为 NHibernate 使用贫血/DTO 类型的对象，并将其包装在其他知道所有业务规则的东西中，并且如果它依赖于一个数据存储，则可以访问它。现在我已经输入了我的问题和标题，StackOverflow 推荐了一些有趣的资源：[here](https://stackoverflow.com/a/2842975/674077)和[here](https://stackoverflow.com/a/2360275/674077)。

[我的问题看起来也与这个](https://stackoverflow.com/questions/949264/business-rules-where-do-they-go-in-oop)问题非常相似，但我想我会以一种更符合我情况的不同方式来问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T14:25:30.793

“拥有一个封装状态、​​验证状态并访问数据存储的类是否违反了单一职责原则？” ——你列出了三个职责，所以我会回答是。

验证的困难在于它取决于上下文。例如，创建客户记录可能只需要他们的姓名，但向他们销售产品需要付款信息和送货地址。

在 MVC 中，我使用视图模型中的数据注释进行低级别（数据大小和可空性）验证。更复杂的验证是使用[规范模式](http://devlicio.us/blogs/jeff_perrin/archive/2006/12/13/the-specification-pattern.aspx)完成的。规范模式易于实现且灵活。

# php - 如何从大型播放列表中发送随机歌曲的客户端数据？

> ID：14288460
> 
> 赞同：0
> 
> 时间：2013-01-11T23:44:06.277
> 
> 标签：php, algorithm, node.js

我创建了一个 API，它返回关于我的服务器上的一首歌曲的数据，包括流 URL。当客户端调用 API 时，它将获取数据，并开始在其播放器中流式传输歌曲。

但是现在我有多个客户端调用 API，返回有关播放列表中他们最近没有听过的**随机歌曲的数据的最佳方式是什么？**有几千首歌曲并且还在扩展。

所以我的**问题**是以下是否是一个好方法：

这是我打算做的事情。为每个客户端设置会话，在初始请求中，我获取所有歌曲，生成一个随机列表，将其与会话 ID 一起保存在缓存中，然后在每个后续请求中，我检查他们的会话 ID，然后抓取返回下一首歌曲数据？

至于确保不播放最近播放的歌曲，我将在数据库中记录之前听过的50首歌曲的历史，并进行歌曲ID比较，如果匹配则获取下一首歌曲？

这会是一种可行的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:29:51.153

**已编辑：**获取有关服务器的更多信息。

在用户的收听历史中存储 X 数量的歌曲（缓冲区，大小 X）。实现一个请求随机歌曲的函数。当客户需要一首新的随机歌曲时：

1.  从您的数据库中选择一首随机歌曲
2.  将歌曲 ID 推送到收听历史缓冲区。
3.  将数据返回给客户端

如果您打算将用户数据存储在服务器上，则实际上无需维护随机生成的歌曲列表。

否则，你就很准了。使用会话来识别用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T02:26:57.753

假设您使用的是 mysql 之类的数据库，或者任何与歌曲相关联和 ID 的数据库，您可以生成一个随机数并使用它从数据库中选择一首随机歌曲。任何基于 ID 的数据存储都适用于此，并且可以很好地扩展。

如果您知道您的最高歌曲 ID 是 X，则生成一个介于 1 和 X 之间的随机数，称为 Y。执行如下查询：

```
SELECT * FROM songs WHERE song_id>=Y LIMIT 1 
```

这将允许您的 ID 出现空白，并且速度会非常快。您可以记录在另一个表中播放的歌曲并将其过滤掉。如果查询没有返回结果，则反转随机数，如 Y = XY，然后再次运行查询。

# jquery - jquery href 和点击事件同步

> ID：14288466
> 
> 赞同：0
> 
> 时间：2013-01-11T23:44:39.817
> 
> 标签：jquery, click, location, href, delay

伙计们，我在两个动作之间的同步有问题。在第一个链接：

```
<a href="#mytag1">Link 1</a>
<a href="#mytag2">Link 2</a>
<a href="#mytag3">Link 3</a> 
```

和 JQuery 事件绑定：

```
$('a').click(function(){recognize_content_by_link()}); 
```

此函数使用其他函数（让它成为 geturl()）window.location.href，解析它以从中获取“#mytagX”并加载内容。

问题是：我需要先设置href，然后从window.location获取url在绑定函数中解析。我曾试图通过在recognize_content_by_link() 中使用的geturl() 函数上的setTimenterval 来延迟它，但这是一个糟糕的解决方案。有任何想法吗？非常需要它 - 考试时间:(非常感谢您的帮助！

（对不起我的语言）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T23:49:38.520

在事件发生后使用带延迟的超时将其排队`0`。

```
$('a').click(function() {
  setTimeout(function() {
    recognize_content_by_link();
  }, 0);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:50:04.680

我认为你需要这个：

```
$('a').click(function(e){
   e.preventDefault();
   recognize_content_by_link();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:26:45.240

您可以使用命名函数执行此操作：

```
$('a').click(recognize_content_by_link);

function recognize_content_by_link(event) {
    event.preventDefault();
    var hash = this.hash.replace(/^[#]/, '');
    ....
} 
```

或匿名函数：

```
$('a').click(function(event) {
    event.preventDefault();
    var hash = this.hash.replace(/^[#]/, '');
    ....
}); 
```

# ruby - 如何在 ruby 中解析文本文件并删除选项卡和新行

> ID：14288472
> 
> 赞同：-2
> 
> 时间：2013-01-11T23:45:04.220
> 
> 标签：ruby

如何解析文本文件

```
name   id
name   id 
```

并保存在 ruby​​ 中的数组数组中。

到目前为止，我有：

```
content = []
File.open("my/file/path", "r").each_line do |line|
    person << line.chop
end 
```

它给出的输出为：

```
"name\tID", "name2\tID" .... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:52:02.063

这是我解决这个问题的方法：

```
class Person
  attr :name, :id

  def initialize(name, id)
    @name, @id = name.strip, id.strip
  end
end

class << Person
  attr_accessor :file, :separator

  def all
    Array.new.tap do |persons|
      File.foreach file do |line|
        persons.push new *line.split(separator)
      end
    end
  end
end

Person.file = 'my/file/path'
Person.separator = /\t/

persons = Person.all

persons.each do |person|
  puts "#{person.id} => #{person.name}"
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T23:49:27.140

使用 ruby​​ 的[字符串#split](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-split)

```
pry(main)> "foo\tbar".split("\t")
=> ["foo", "bar"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:50:02.983

这应该工作：

```
content = []
File.open("my/file/path", "r").each_line do |line|
   person << line.chop.split("\t")
end 
```

编辑：要创建单独的数组，请执行以下操作：

```
content = []
persons = []
ids = []
File.open("my/file/path", "r").each_line do |line|
   temp = line.chop.split("\t")
   persons << temp[0]
   ids << temp[1]
end 
```

# r - 在ggplot中为变量分配容差

> ID：14288473
> 
> 赞同：0
> 
> 时间：2013-01-11T23:45:13.800
> 
> 标签：r, plot, ggplot2

我有两组时间序列数据。我想把它们放在一个情节中。我使用了以下代码：

```
temp <- data.frame(HMn29_29$avg_val, HMn28_29$avg_val, HMn29_29$h)
ggplot(temp, aes(HMn29_29.h)) + ylim(-2, 13) +
    geom_line(aes(y = HMn28_29.avg_val, colour = "Tempratur")) + 
    geom_line(aes(y = HMn29_29.avg_val, colour = "TempratureA")) +
    opts(title = 'chart_title') 
```

我想`HMn29_29$avg_val`在情节中分配 +.6 和 -.6 的容差。

的样本数据`HMn29_29`：

```
 h    avg_val
1  2007-09-29 00:00:00 -1.3250000
2  2007-09-29 01:00:00 -0.4670000
3  2007-09-29 02:00:00 -0.4426667
4  2007-09-29 03:00:00 -0.6396667
5  2007-09-29 04:00:00 -0.7843333
6  2007-09-29 05:00:00 -0.5563333
7  2007-09-29 06:00:00 -0.7276667
8  2007-09-29 07:00:00 -0.6260000
9  2007-09-29 08:00:00 -0.7290000
10 2007-09-29 09:00:00  0.4976667 
```

的样本数据`HMn28_29`：

```
 h    avg_val
1  2007-09-29 00:00:00 -1.9225000
2  2007-09-29 01:00:00 -1.6676667
3  2007-09-29 02:00:00 -1.5820000
4  2007-09-29 03:00:00 -1.5716667
5  2007-09-29 04:00:00 -1.8290000
6  2007-09-29 05:00:00 -1.6153333
7  2007-09-29 06:00:00 -1.8093333
8  2007-09-29 07:00:00 -1.9303333
9  2007-09-29 08:00:00 -1.3980000
10 2007-09-29 09:00:00  1.2270000 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:54:32.427

我已经玩了一点数据并想出了这个。

我将 x29_29 重命名为 A，将 x28_29 重命名为 B。

我使用了 geom_ribbon 函数，看起来这就是你要找的。[您可以在Geom Ribbon](http://docs.ggplot2.org/0.9.3/geom_ribbon.html)上找到有关 geom_ribbon 选项的更多详细信息

我使用的代码如下：

```
data <- read.csv("datafromstackoverflow.csv",header=TRUE,sep=",")
data
p <- ggplot(data,aes(x=h))
p <- p+ geom_ribbon(aes(ymin=A-0.06,ymax=A+0.06),fill="blue")
p <- p + geom_ribbon(aes(ymin=B-0.06, ymax=B+0.06),fill="red")
p 
```

我得到的图表如下：

![在此处输入图像描述](../Images/777b6624284aaa14c5e76495a9248c26.png)

蓝线代表 A，红线代表 B。您可以根据需要添加图例。

贾巴巴

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:10:48.470

我将您的数据合并为一个并命名为“datafromstackoverflow.csv”。修改后的数据如下：

```
高 x29_29 x28_29
2007 年 9 月 29 日 0:00 -1.325 -1.9225
2007 年 9 月 29 日 1:00 -0.467 -1.6676667
2007 年 9 月 29 日 2:00 -0.4426667 -1.582
2007 年 9 月 29 日 3:00 -0.6396667 -1.5716667
2007 年 9 月 29 日 4:00 -0.7843333 -1.829
2007 年 9 月 29 日 5:00 -0.5563333 -1.6153333
2007 年 9 月 29 日 6:00 -0.7276667 -1.8093333
2007 年 9 月 29 日 7:00 -0.626 -1.9303333
2007 年 9 月 29 日 8:00 -0.729 -1.398
2007 年 9 月 29 日 9:00 0.4976667 1.227

```

我用来绘制的代码如下：

```
data <- read.csv("datafromstackoverflow.csv",header=TRUE,sep=",")
p <- ggplot(data,aes(h,x29_29))  
p <- p + geom_point(data=data,aes(x=h,y=x29_29),color="blue")  
p <- p + geom_point(data=data,aes(x=h,y=x28_29),color="red")  
p 
```

我希望这能帮到您。

贾巴巴

# css - 有没有办法缩短css选择器？

> ID：14288474
> 
> 赞同：0
> 
> 时间：2013-01-11T23:45:15.300
> 
> 标签：css, css-selectors, sass

我正在使用 SCSS。我有要指定列宽和文本对齐方式的表格。现在，我有一堆这样的 CSS 选择器：

```
.some-table-class{
  &>colgroup>col{
    &:nth-child(1){width: /* some value */}
    &:nth-child(2){width: /* ... */}
    ...
  }
  &>tbody>tr>td{
    &:nth-child(1)>*{text-align: /* some value */}
    &:nth-child(2)>*{text-align: /* ...*/}
    ...
  }
} 
```

有没有办法使用 SCSS 的某些功能来简化这一点，这样我就不必重复编写`&>colgroup>col`、`&>tbody>tr>td>`和`>*`？有没有办法将函数应用于 css 选择器，以便我可以编写如下内容：

```
some_function(.some-table-class){
  &:nth-child(1){width: /* some value */, text-align: /* some value */}
  &:nth-child(2){width: /* ... */, text-align: /* ...*/}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:14:33.820

除非您希望有嵌套表或实例，而您只想针对 colgroups 内（而不是外部）的 cols，否则您会有很多冗余。

```
table.test {
    // must the col appear within a colgroup?
    col {
        $i: 1;
        @each $w in (10em, 5em, 10em, 20em, 15em) {
            &:nth-child(#{$i}) {
                width: $w;
            }
            $i: $i + 1;
        }
    }

    // a td can't appear outside of a tr
    tbody td {
        $i: 1;
        @each $a in (left, left, center, right, left) {
            // is the alignment only for direct descendants of the td necessary?
            &:nth-child(#{$i}) {
                text-align: $a;
            }
            $i: $i + 1;
        }
    }
} 
```

生成：

```
table.test col:nth-child(1) {
  width: 10em;
}

table.test col:nth-child(2) {
  width: 5em;
}

table.test col:nth-child(3) {
  width: 10em;
}

table.test col:nth-child(4) {
  width: 20em;
}

table.test col:nth-child(5) {
  width: 15em;
}

table.test tbody td:nth-child(1) {
  text-align: left;
}

table.test tbody td:nth-child(2) {
  text-align: left;
}

table.test tbody td:nth-child(3) {
  text-align: center;
}

table.test tbody td:nth-child(4) {
  text-align: right;
}

table.test tbody td:nth-child(5) {
  text-align: left;
} 
```

或者...

```
$list: 10em left, 5em left, 10em center, 20em right, 15em left;

table.test {
    // must the col appear within a colgroup?
    $i: 1;
    @each $child in $list {
        col {
            &:nth-child(#{$i}) {
                width: nth($child, 1);
            }
        }

        // a td can't appear outside of a tr
        tbody td {
            // is the alignment only for direct descendants of the td necessary?
            &:nth-child(#{$i}) {
                text-align: nth($child, 2);
            }
        }
        $i: $i + 1;
    }
} 
```

生成：

```
table.test col:nth-child(1) {
  width: 10em;
}

table.test tbody td:nth-child(1) {
  text-align: left;
}

table.test col:nth-child(2) {
  width: 5em;
}

table.test tbody td:nth-child(2) {
  text-align: left;
}

table.test col:nth-child(3) {
  width: 10em;
}

table.test tbody td:nth-child(3) {
  text-align: center;
}

table.test col:nth-child(4) {
  width: 20em;
}

table.test tbody td:nth-child(4) {
  text-align: right;
}

table.test col:nth-child(5) {
  width: 15em;
}

table.test tbody td:nth-child(5) {
  text-align: left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:06:24.447

我会建议：

```
.some-table-class {

  > colgroup > col
    @for $i from 1 through N {
      &:nth-child($i) {width: /* some value */}
    }
  }

  > tbody > tr > td {
    @for $i from 1 through N {
      &:nth-child($i) > * {text-align: /* some value */}
    }
  }

} 
```

关于什么？

# gwt - 与 GWT/Vaadin 集成的良好流程图（或 bpmn）可视化库？

> ID：14288477
> 
> 赞同：3
> 
> 时间：2013-01-11T23:46:16.907
> 
> 标签：gwt, vaadin

我正在使用 GWT（与 Vaadin）进行项目，我正在寻找一个好的、最好的集成流程图库。该库可以是商业的，最好与 Vaadin 集成。

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T03:31:44.883

我会使用带有 vaadin 的 mx-graph gwt 包装器：

[http://forum.jgraph.com/questions/4390/using-mxgraph-with-vaadin](http://forum.jgraph.com/questions/4390/using-mxgraph-with-vaadin) [http://jgraph.github.io/mxgraph/docs/manual.html#2.2.2.1](http://jgraph.github.io/mxgraph/docs/manual.html#2.2.2.1)

# java - 在 jExcel API 中创建多个工作表

> ID：14288487
> 
> 赞同：5
> 
> 时间：2013-01-11T23:47:10.730
> 
> 标签：java, excel, jexcelapi

`jExcel API`如果一张表已满，我需要在 Java 中创建多个 excel 表`(65536 rows)`。假设如果一张纸已满，那么在下一张纸中，它应该从第一张纸上停止的地方自动开始书写。我只是坚持放置逻辑以在一张纸已满时动态创建它。下面是我到目前为止所做的代码。

```
public void write() throws IOException, WriteException {
    File file = new File(inputFile);
    WorkbookSettings wbSettings = new WorkbookSettings();

    wbSettings.setLocale(new Locale("en", "EN"));

    WritableWorkbook workbook = Workbook.createWorkbook(file, wbSettings);

    writingToExcel(workbook);
}

//Logic to create sheet dyanmically if one is full should be done here I guess?
private void writingToExcel(WritableWorkbook workbook) {

    workbook.createSheet("Report", 0);
    WritableSheet excelSheet = workbook.getSheet(0);
    try {
        createLabel(excelSheet);
        createContent(excelSheet);
    } catch (WriteException e) {
        e.printStackTrace();
    } finally {
        try {
            workbook.write();
            workbook.close();   
        } catch (IOException e) {
            e.printStackTrace();
        } catch (WriteException e) {
            e.printStackTrace();
        }

    }
}

private void createLabel(WritableSheet sheet) throws WriteException {

    WritableFont times10pt = new WritableFont(WritableFont.TIMES, 10);
    times = new WritableCellFormat(times10pt);
    times.setWrap(true);

    WritableFont times10ptBoldUnderline = new WritableFont(WritableFont.TIMES, 10, WritableFont.BOLD, false,UnderlineStyle.SINGLE);
    timesBoldUnderline = new WritableCellFormat(times10ptBoldUnderline);
    timesBoldUnderline.setWrap(true);

    CellView cv = new CellView();
    cv.setFormat(times);
    cv.setFormat(timesBoldUnderline);
    cv.setAutosize(true);

    // Write a few headers
    addCaption(sheet, 0, 0, "Header 1");
    addCaption(sheet, 1, 0, "This is another header");

}

private void createContent(WritableSheet sheet) throws WriteException,
        RowsExceededException {

    for (int i = 1; i < 70000; i++) {
        addNumber(sheet, 0, i, i + 10);
        addNumber(sheet, 1, i, i * i);
    }
}

private void addCaption(WritableSheet sheet, int column, int row, String s)
        throws RowsExceededException, WriteException {
    Label label;
    label = new Label(column, row, s, timesBoldUnderline);
    sheet.addCell(label);
}

private void addNumber(WritableSheet sheet, int column, int row,
        Integer integer) throws WriteException, RowsExceededException {
    Number number;
    number = new Number(column, row, integer, times);
    sheet.addCell(number);
} 
```

我不确定如何在我的代码中添加该逻辑。

有什么建议会有很大帮助吗？

或者在任何情况下，谁能给我一个简单的例子，如果一张纸已满，它应该开始自动写入另一张纸（第二张纸）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T04:28:59.710

我对以下两种方法进行了更改：-

```
private void writingToExcel(WritableWorkbook workbook) {
    try {
        // don't create a sheet now, instead, pass it in the workbook
        createContent(workbook);
    }
    catch (WriteException e) {
        e.printStackTrace();
    }
    finally {
        try {
            workbook.write();
            workbook.close();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
        catch (WriteException e) {
            e.printStackTrace();
        }

    }
}

// instead of taking a sheet, take a workbook because we cannot ensure if the sheet can fit all the content at this point
private void createContent(WritableWorkbook workbook) throws WriteException {

    int excelSheetIndex = 0;
    int rowIndex = 0;
    WritableSheet excelSheet = null;

    for (int i = 1; i < 70000; i++) {

        // if the sheet has hit the cap, then create a new sheet, new label row and reset the row count
        if (excelSheet == null || excelSheet.getRows() == 65536) {
            excelSheet = workbook.createSheet("Report " + excelSheetIndex, excelSheetIndex++);
            createLabel(excelSheet);
            rowIndex = 0;
        }

        // instead of using i for row, use rowIndex
        addNumber(excelSheet, 0, rowIndex, i + 10);
        addNumber(excelSheet, 1, rowIndex, i * i);

        // increment the sheet row
        rowIndex++;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T07:16:54.240

公共类 DscMigration {

```
private WritableCellFormat timesBoldUnderline;
private WritableCellFormat times;
private String inputFile;

public void setOutputFile(String inputFile) {
    this.inputFile = inputFile;
}

public void write() throws IOException, WriteException {
    File file = new File(inputFile);
    WorkbookSettings wbSettings = new WorkbookSettings();

    wbSettings.setLocale(new Locale("en", "EN"));

    WritableWorkbook workbook = Workbook.createWorkbook(file, wbSettings);
    workbook.createSheet("Report", 0);
    WritableSheet excelSheet = workbook.getSheet(0);
    createLabel(excelSheet);
    createContent(excelSheet);

    workbook.write();
    workbook.close();
}

private void createLabel(WritableSheet sheet) throws WriteException {
    // Lets create a times font
    WritableFont times10pt = new WritableFont(WritableFont.TIMES, 10);
    // Define the cell format
    times = new WritableCellFormat(times10pt);
    // Lets automatically wrap the cells
    times.setWrap(true);

    // Create create a bold font with unterlines
    WritableFont times10ptBoldUnderline = new WritableFont(
            WritableFont.TIMES, 10, WritableFont.BOLD, false,
            UnderlineStyle.SINGLE);
    timesBoldUnderline = new WritableCellFormat(times10ptBoldUnderline);
    // Lets automatically wrap the cells
    timesBoldUnderline.setWrap(true);

    CellView cv = new CellView();
    cv.setFormat(times);
    // cv.setFormat(timesBoldUnderline);
    // cv.setFormat(cf)
    cv.setAutosize(true);

    // Write a few headers
    addCaption(sheet, 0, 0, "COM_ID");
    addCaption(sheet, 1, 0, "OBJECTID");
    addCaption(sheet, 2, 0, "GNOSISID");

}

private void createContent(WritableSheet sheet) throws WriteException,
        RowsExceededException {

    /**
     * Create a new instance for cellDataList
     */
    List<DataObj> cellDataListA = new ArrayList<DataObj>();
    List<DataObj> nonDuplicateA = new ArrayList<DataObj>();
    List<DataObj2> cellDataListB = new ArrayList<DataObj2>();
    List<DataObj2> nonDuplicateB = new ArrayList<DataObj2>();
    List<DataObj> nonDuplicateAB = new ArrayList<DataObj>();
    List<DataObj> misMatchAB = new ArrayList<DataObj>();
    List<DataObj> copyA = new ArrayList<DataObj>();
    List<DataObj2> comID = new ArrayList<DataObj2>();

    try {
        /**
         * Create a new instance for FileInputStream class
         */
        // input1--> col1 -livelink id ; col2->livlink filename; col3-> gnosis id; col4-> filename
        FileInputStream fileInputStream = new FileInputStream(
                "C:/Documents and Settings/nithya/Desktop/DSC/Report/input1.xls");
    //input2 --> col1 comid all, col2 -> object id for common
        FileInputStream fileInputStream2 = new FileInputStream(
        "C:/Documents and Settings/nithya/Desktop/DSC/Report/input2.xls");

        /**
         * Create a new instance for POIFSFileSystem class
         */
        POIFSFileSystem fsFileSystem = new POIFSFileSystem(fileInputStream);
        POIFSFileSystem fsFileSystem2 = new POIFSFileSystem(fileInputStream2);
        /*
         * Create a new instance for HSSFWorkBook Class
         */
        HSSFWorkbook workBook = new HSSFWorkbook(fsFileSystem);
        HSSFSheet hssfSheet = workBook.getSheetAt(0);
        HSSFWorkbook workBook2 = new HSSFWorkbook(fsFileSystem2);
        HSSFSheet hssfSheet2 = workBook2.getSheetAt(0);
        /**
         * Iterate the rows and cells of the spreadsheet to get all the
         * datas.
         */
        Iterator rowIterator = hssfSheet.rowIterator();
        Iterator rowIterator2 = hssfSheet2.rowIterator();
        while (rowIterator.hasNext()) {
            HSSFRow hssfRow = (HSSFRow) rowIterator.next();

            if ((hssfRow.getCell((short) 0) != null)
                    && (hssfRow.getCell((short) 1) != null)) {
                cellDataListA.add(new DataObj(hssfRow.getCell((short) 0)
                        .toString().trim(), hssfRow.getCell((short) 1)
                        .toString().trim()));
            }

            if ((hssfRow.getCell((short) 2) != null)
                    && (hssfRow.getCell((short) 3) != null)) {
                cellDataListB.add(new DataObj2(hssfRow.getCell((short) 2)
                        .toString().trim(), hssfRow.getCell((short) 3)
                        .toString().trim()));
            }

        }
        // Replace Duplicate in Livelink Startd
        Set set = new HashSet();
        List newList = new ArrayList();
        nonDuplicateA.addAll(cellDataListA);
        for (int i = 0; i < nonDuplicateA.size(); i++) {
            DataObj b = nonDuplicateA.get(i);
            if (set.add(b.getCol1()))
                newList.add(nonDuplicateA.get(i));
        }

        nonDuplicateA.clear();
        nonDuplicateA.addAll(newList);
        for (int i = 0; i < nonDuplicateA.size(); i++) {
            DataObj a = nonDuplicateA.get(i);
        }
        System.out.println("nonDuplicateA=="+nonDuplicateA.size());
        // Replace Duplicate in Livelink End

        // Replace Duplicate in Gnosis Startd
        Set set2 = new HashSet();
        List newList2 = new ArrayList();
        System.out.println("cellDataListB=="+cellDataListB.size());
        nonDuplicateB.addAll(cellDataListB);
        for (int i = 0; i < nonDuplicateB.size(); i++) {
            DataObj2 b = nonDuplicateB.get(i);
                if (set2.add(b.getCol1()))
                newList2.add(nonDuplicateB.get(i));
        }

        nonDuplicateB.clear();
        nonDuplicateB.addAll(newList2);

        System.out.println("nonDuplicateB=="+nonDuplicateB.size());
        // Replace Duplicate in Gnosis End

        // Common record
        //System.out.println("------Common----");
        for (int i = 0; i < nonDuplicateA.size(); i++) {
            DataObj a = nonDuplicateA.get(i);
            for (int j = 0; j < nonDuplicateB.size(); j++) {
                DataObj2 b = nonDuplicateB.get(j);

                    if((a.getCol2()!=null && b.getCol2()!=null )){
                        //System.out.println("---------");
                if (a.getCol2().equalsIgnoreCase(b.getCol2())) {

                //  System.out.println(a.getCol2() +"--"+i+"--"+b.getCol2());
                    nonDuplicateAB.add(new DataObj(a.getCol1().toString()
                            .trim(), b.getCol1().toString().trim()));
                    //addLabel(sheet, 0, i, a.getCol1().toString().trim());
                    // addLabel(sheet, 1, i, b.getCol1().toString().trim());
                    break;
                }

            }

            }

        }
        System.out.println("nonDuplicateAB=="+nonDuplicateAB.size());
        TreeMap misA = new TreeMap();
        //System.out.println("------Missing----");
        for (int i = 0; i < nonDuplicateA.size(); i++) {
            DataObj a = nonDuplicateA.get(i);
            for (int j = 0; j < nonDuplicateB.size(); j++) {
                DataObj2 b = nonDuplicateB.get(j);
                    if((a.getCol2()!=null && b.getCol2()!=null )){
                    if (!(a.getCol2().equals(b.getCol2()))) {
                    //System.out.println(a.getCol1() +"="+b.getCol1());

                    //break;

                    if(misA.containsValue(a.getCol2())){
                        misA.remove(a.getCol1());
                    }
                    else
                    {
                        misA.put(a.getCol1(), a.getCol2());
                    }
                }

            }

            }
        }
        //System.out.println("SIze mis="+misA);
        TreeMap misB = new TreeMap();

        for (int i = 0; i < nonDuplicateB.size(); i++) {
            DataObj2 a = nonDuplicateB.get(i);
            for (int j = 0; j < nonDuplicateA.size(); j++) {
                DataObj b = nonDuplicateA.get(j);
                    if((a.getCol2()!=null && b.getCol2()!=null )){
                    if (!(a.getCol2().equals(b.getCol2()))) {
                    //System.out.println(a.getCol1() +"="+b.getCol1());

                    if(misB.containsValue(a.getCol2())){
                        misB.remove(a.getCol1());
                    }
                    else
                    {
                        misB.put(a.getCol1(), a.getCol2());
                    }
                }

            }

            }
        }
    //  System.out.println("SIze misB="+misB);
        //Getting ComID and Object Id from excel start
        while (rowIterator2.hasNext()) {

            HSSFRow hssfRow2 = (HSSFRow) rowIterator2.next();

            if ((hssfRow2.getCell((short) 0) != null)
                    && (hssfRow2.getCell((short) 1) != null)) {
                comID.add(new DataObj2(hssfRow2.getCell((short) 0)
                        .toString().trim(), hssfRow2.getCell((short) 1)
                        .toString().trim()));
            }
        }
        System.out.println("Size ComID="+comID.size());
        TreeMap hm = new TreeMap(); 
        System.out.println("Please wait...Data comparison.. ");
        for (int i = 0; i < nonDuplicateAB.size(); i++) {
            DataObj a = nonDuplicateAB.get(i);
            for(int j=0;j<comID.size();j++ ){
                DataObj2 b = comID.get(j);
                //System.out.println((b.getCol2()+"---"+a.getCol1()));

                if(b.getCol2().equalsIgnoreCase(a.getCol1())){
                    hm.put(b.getCol1(), b.getCol2());
                    break;
                }
            }
        }
        System.out.println("Size HM="+hm.size());
        //Getting ComID and Object Id from excel End

        //Data Base Updation
        Connection conn = null;
        try {

            DriverManager.registerDriver(new oracle.jdbc.driver.OracleDriver());
                       conn =   DriverManager.getConnection(
                      "jdbc:oracle:thin:@cxxxxx:5487:dev", "",
                      "");

        System.out.println("after calling conn");

                Set set6 = hm.entrySet(); 
                Iterator i = set6.iterator(); 
                String gnosisNodeId="";
                int update=1;
                while(i.hasNext()) { 
                Map.Entry me = (Map.Entry)i.next(); 
                //System.out.print(me.getKey() + ": "); 
                //System.out.println(me.getValue()); 
        //  System.out.println("nonDuplicateAB="+nonDuplicateAB.size());
                for(int m=0;m<nonDuplicateAB.size();m++){
                    DataObj a = nonDuplicateAB.get(m);
                    if(me.getValue().toString().equalsIgnoreCase(a.getCol1())){
                    gnosisNodeId=a.getCol2().toString();
                    nonDuplicateAB.remove(m);
                    break;
                    }
                }
                //System.out.println("nonDuplicateAB="+nonDuplicateAB.size());
                if(gnosisNodeId!=null){
                    //System.out.println("LOOP");
                String s1="UPDATE component SET com_xml =  UPDATEXML(com_xml, '*/url/value/text()', '";
                String s2="http://dmfwebtop65.pfizer.com/webtop/drl/objectId/"+gnosisNodeId;
                String s3="') where com_id="+me.getKey().toString().substring(1)+"";
                Statement   stmt1=null;
                //http://dmfwebtop65.pfizer.com/webtop/drl/objectId/0901201b8239cefb
                    try {
                        String updateString1 = s1+s2+s3; 
                        stmt1 = conn.createStatement();

                        int rows =stmt1.executeUpdate(updateString1);
                 if (rows>0) {
                     addLabel(sheet, 0, update, me.getKey().toString().substring(1));
                        addLabel(sheet, 1, update, me.getValue().toString().substring(1));
                        addLabel(sheet, 2, update,gnosisNodeId );
                        update++;   
                    System.out.println("Update Success="+me.getKey().toString().substring(1)+ "-->" +me.getValue().toString().substring(1));
                 }
                 else
                 {
                 System.out.println("Not Updated="+me.getKey().toString().substring(1)+ "-->" +me.getValue().toString().substring(1));
                 }

                    } catch (SQLException e) {
                        System.out.println("No Connect" + e);
                            } catch (Exception e) {
                            System.out.println("Error "+e.getMessage());
                        } 
                }
                else{System.out.println("No gnosis id found for ObjectID="+me.getKey().toString().substring(1)); }

            }//While 
        } //try
     catch (Exception e) {
        e.printStackTrace();
    }

}//Main try
     catch (Exception e) {
            e.printStackTrace();
        }
} //method

private void addCaption(WritableSheet sheet, int column, int row, String s)
        throws RowsExceededException, WriteException {
    Label label;
    label = new Label(column, row, s, timesBoldUnderline);
    sheet.addCell(label);
}

private void addNumber(WritableSheet sheet, int column, int row,
        Integer integer) throws WriteException, RowsExceededException {
    Number number;
    number = new Number(column, row, integer, times);
    sheet.addCell(number);
}

private void addLabel(WritableSheet sheet, int column, int row, String s)
        throws WriteException, RowsExceededException {
    Label label;
    label = new Label(column, row, s, times);
    sheet.addCell(label);
}

public static void main(String[] args) throws WriteException, IOException {
    DscMigration test = new DscMigration();
    test.setOutputFile("C:/Documents and Settings/nithya/Desktop/DSC/Report/Mapping.xls");
    test.write();
    System.out
            .println("Please check the result file under C:/Documents and Settings/nithya/Desktop/DSC/Report/Report.xls ");
} 
```

} XXXXInternal Use based on WTTE-0043 ELC Maintenance Release and Bug Fix Plan Template Version 4.0 Effective Date: 01-Jul-2010 //Bug Fix Plan

作者：1 批准签名 目录 我已编写此交付物以记录执行维护版本或项目错误修复的计划。姓名 日期 我已编写此交付物以记录执行 XXX Plus v4.5 的维护版本或错误修复的计划。名称日期

我批准此更改并同意此记录代表执行维护版本或错误修复的准确和完整的计划，并完全支持此项目的实施、测试和发布活动。姓名 日期 我已查看此记录的内容，发现它符合适用的 BT 合规要求。名称日期

签名 2 简介 该项目可交付文件记录了维护版本或项目错误修复的请求变更、计划方法、开发解决方案、测试计划、测试结果和发布批准。

3 变更请求请求者姓名：

XX 对象/系统名称：

项目优先级（高/中/低）：

高变更请求编号：NA 变更请求日期：

2011 年 11 月 22 日

问题或请求更改的描述：

预计需要的开发时间：

1 天（大约）

4)4 维护发布和错误修复方法 5 开发解决方案 8 支持参考 9 修订历史

# z3 - Z3/SMT：什么时候我应该更喜欢推/弹出来重置？

> ID：14288488
> 
> 赞同：3
> 
> 时间：2013-01-11T23:47:11.870
> 
> 标签：z3, smt

我正在使用 Z3 解决由符号执行器产生的路径条件，它以深度优先顺序探索状态空间，与 CUTE、DART 或（可能）SAGE 非常相似。我们正在尝试使用 Z3 的不同方式。在一个极端情况下，我们将每个查询发送到 Z3 并立即（重置）它。另一方面，我们（推）每个额外的分支约束，并且（弹出）（弹出）回溯正确削弱路径条件所需的最小值。问题是，在所有情况下，似乎没有一种策略比其他任何策略都更有效。推送似乎提供了最大的优势，但我们遇到了一些情况，每次查询后重置 Z3 比推送/弹出快一个数量级以上。请注意，通信开销可以忽略不计：几乎所有时间都花在 check-sat 中。

有没有人有任何经验可以分享，或者关于 Z3 内部保存的状态的一些指示（引理等），这可以帮助澄清它的行为？那么其他 SMT 求解器的行为呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T18:24:59.203

下一个版本 (v4.3.2) 将公开一个可能对您有用的功能。在 Z3 中，默认求解器结合了非增量求解器和增量求解器。当使用`push`/`pop`时（或使用多个`check`s 而不调用`reset`），Z3 将使用增量求解器。在下一个版本中，我们可以为增量求解器提供超时。如果增量求解器在给定的超时时间内不能解决问题，Z3 会自动切换到非增量求解器。也许，如果您使用此功能，您将能够获得“两全其美”的优势。要获取下一个候选版本的源代码，您应该使用

```
git clone https://git01.codeplex.com/z3 -b rc 
```

为了编译它，我们使用

```
cd z3
python scripts/mk_make.py
cd build
make 
```

要为增量求解器设置超时，我们必须提供以下命令行选项：

```
 combined_solver.solver2_timeout=<time in milliseconds> 
```

如果您使用的是编程 API，则可以使用新 API：

```
Z3_global_param_set(Z3_string param_id, Z3_string param_value) 
```

请注意，下一个版本将有一个用于设置参数的新框架。它允许用户为内部 Z3 模块设置参数。

# java - java中数组的循环arraylist

> ID：14288490
> 
> 赞同：-1
> 
> 时间：2013-01-11T23:47:13.373
> 
> 标签：java, string, for-loop, arraylist, foreach

*   我想循环遍历字符串数组的数组列表。

*   这些字符串数组只有两个元素。在循环内部，我想比较每个数组的这两个元素。

*   我想以一种干净简单的方式做到这一点（如果可能的话，避免使用经典的 for、迭代器类等 - 我知道如何以这些方式做到这一点，但我正在寻找一种更清洁的方式 - 。

*   我更喜欢 for-each 循环（或 for + ":"）

*   我附上了一个示例代码，向您展示我想要做什么。

这样做的最佳方法是什么？

```
ArrayList<String[]> myLst = new ArrayList<String[]>();

// the array of strings has two elements

public String getSecondField(String query)
{
    for (String[] binArray : myLst)
    {
        if (binArray[0].equals(query))
        {
            return binArray[1];
        }
    }
    return "";
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T23:51:39.907

而不是两个元素的数组，并且由于每个数组的所有第一个元素都是唯一的，请使用 a `Map<String, String>`。这样，您的代码将变为：

```
public String getSecondField(String query)
{
    String ret = map.get(query);
    return ret != null ? ret : "";
} 
```

# python - 从 Matplotlib 中的双循环枚举中保存数字

> ID：14288495
> 
> 赞同：0
> 
> 时间：2013-01-11T23:48:25.557
> 
> 标签：python, numpy, matplotlib

我正在尝试构建一个循环遍历范围的脚本，并保存一个主成分与其他主成分的所有图形，没有重复，没有相同与相同，---例如，如果我生成 3 乘 3 的对称矩阵，我将拥有3 个有意义的数字：fig_1_2、fig_1_3 和 fig_2_3。我带来了那个有问题的解决方案

```
#!/usr/env python
import mdp
import numpy as np
import matplotlib.pyplot as plt
#
set1 = 'set1_smthing.txt'
set2 = 'set2_smthing.txt'
set3 = 'set3_smthing.txt'
bname = set1.split(".")[0].split("_")[0]
set1d = np.loadtxt(set1, delimiter=',')
set2d = np.loadtxt(set2, delimiter=',')
set3d = np.loadtxt(fchembl, delimiter=',')
set_comb = np.vstack([set1d,set2d,set3d])
# performing PCA with MDP
set_comb_pca = mdp.pca(set_comb,svd=True)
pcan = mdp.nodes.PCANode(output_dim=3)
pcar = pcan.execute(set_comb)
# graph the results - lower triangle
for i in range(1,6):
    for j in range(1,6):
            if i != j and i < j:
                fig = plt.figure()                                              
                ax = fig.add_subplot(111)
                ax.plot(pcar[(len(set1d)+1):(len(set1d)+len(set2d)), i], pcar[(len(set1d)+1):(len(set1d)+len(set2d)), j], marker='.', color='grey',linestyle="None")
                ax.plot(pcar[(len(set1d)+len(set2d)):, i], pcar[(len(set1d)+len(set2d)):, j], marker='.', color='blue',linestyle="None")
                ax.plot(pcar[1:len(set1d),i], pcar[1:len(set1d), j], marker='.', color='red',linestyle="None")
                # labels and title
                ax.set_xlabel('PC' + str(i) + '(%.3f%%)' % (pcan.d[i]))
                ax.set_ylabel('PC' + str(j) + '(%.3f%%)' % (pcan.d[j]))             
                plt.title(gname)                
                gname = bname + "_pc" + str(i) + "_vs_" + "pc" + str(j)             
                plt.title(bname)
                # saving image
                fig.savefig(gname + ".png")
                plt.close(fig) 
```

该脚本仅生成 1 个图形 PC1 vs PC2 并退出。看来我的错误在枚举中。你能建议我更正吗？我用以下方法对其进行了测试： print gname - 一切正常。错误脚本的输出如下。

```
<matplotlib.text.Text object at 0x11817e10>
[<matplotlib.lines.Line2D object at 0x11814610>]
[<matplotlib.lines.Line2D object at 0xd2d7710>]
[<matplotlib.lines.Line2D object at 0xd2d7bd0>]
<matplotlib.text.Text object at 0x11812690>
<matplotlib.text.Text object at 0x11814d10>
<matplotlib.text.Text object at 0x11817e10>
<matplotlib.text.Text object at 0xd2ff090>
Traceback (most recent call last):
  File "<stdin>", line 9, in <module>
IndexError: invalid index 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T08:26:34.503

我可以告诉你，你是一名前 Matlab 程序员。您将学会爱上基于 0 的索引！

您有一个 IndexError 但很难调试，因为您要索引很多不同的东西，通常每行多次。将代码放入脚本并运行它（`run main.py`在 ipython 中或`python main.py`从终端），至少您会知道错误发生在哪里。我怀疑您有一个错误，因为您似乎正在使用基于 1 的索引。

怎么样：

```
# Extract PCA components for each set
pca1 = pcar[:len(set1d)]
pca2 = pcar[len(set1d):len(set1d)+len(set2d)]
pca3 = pcar[-len(set3d):]

# Iterate over each pair of components
for i in range(3):
    for j in range(i+1, 3):
        f = plt.figure()
        ax = f.add_subplot(111)

        ax.plot(pca1[:, i], pca1[:, j], 'b.')
        ax.plot(pca2[:, i], pca2[:, j], 'r.')
        ax.plot(pca3[:, i], pca3[:, j], 'g.')

        ax.set_xlabel('PC%d' % i)
        ax.set_ylabel('PC%d' % j)

        plt.savefig('PC%d_vs_PC%d.png' % (i, j))
        plt.close(f) 
```

顺便说一句，总的来说，我发现将计算代码与绘图代码分开非常有用。这就是为什么我建议在进入循环之前分离数据集。您希望您的绘图代码专注于绘图，而不是复杂的索引。

# python - 为两个日期创建循环

> ID：14288498
> 
> 赞同：5
> 
> 时间：2013-01-11T23:49:08.317
> 
> 标签：python, date, for-loop, python-2.7

> **可能重复：**
> [在 Python 中遍历一系列日期](https://stackoverflow.com/questions/1060279/iterating-through-a-range-of-dates-in-python)

我有两个条目：

```
date1 = 2004.09.25
date2 = 2004.10.08 
```

我想用 Python 编写一个脚本来识别日期范围并打印它们。像这样的东西：

```
for i in range(date1:date2):
    print i 
```

我是否需要以特定格式为日期定义日期？预期的输出如下：

```
2004.09.25
2004.09.26
.
.
.
2004.10.08 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-12T00:01:56.527

您的第一步应该是查看 python 日期时间库。

总体而言，您的第一个解决方案可能如下所示：

```
date1 = datetime.date(2004, 9, 25)
date2 = datetime.date(2004, 10, 8)
day = datetime.timedelta(days=1)

while date1 <= date2:
    print date1.strftime('%Y.%m.%d')
    date1 = date1 + day 
```

（需要注意的一件事：这显然会破坏你的`date1`变量）

我稍后会将它重构为一个 daterange 函数，以便您可以做一些更接近您所做的事情；它看起来像

```
for d in daterange(date1, date2):
    print d.strftime('%Y.%m.%d') 
```

稍后，当你发展你的 Python 技能时，它可能是这样的：

```
for i in range((date2 - date1).days + 1):
    print (date1 + datetime.timedelta(days=i)).strftime('%Y.%m.%d') 
```

或者这个，这将是我的最终版本：

```
def daterange(d1, d2):
    return (d1 + datetime.timedelta(days=i) for i in range((d2 - d1).days + 1))

for d in daterange(date1, date2):
    print d.strftime('%Y.%m.%d') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T00:04:43.843

使用内置[`datetime`](http://docs.python.org/2/library/datetime.html)模块。

首先，将您的日期（假设它是一个字符串）分开`.`并将列表传递给`datetime.date`

```
date1 = datetime.date(*date1.split('.'))
date2 = datetime.date(*date2.split('.')) 
```

然后获取`ordinal`每个日期的 （自 0001 年 1 月 1 日以来的天数）

```
date1 = date1.toordinal()
date2 = date2.toordinal() 
```

然后，使用`for`循环和`fromordinal`函数将序数转换为日期

```
for i in range(date1, date2 + 1):
    print date.fromordinal(i).strftime('%Y.%m.%d') 
```

把它们放在一起：

```
date1 = datetime.date(*date1.split('.')).toordinal()
date2 = datetime.date(*date2.split('.')).toordinal()
for i in range(date1, date2 + 1):
    print date.fromordinal(i).strftime('%Y.%m.%d') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T22:52:04.613

使用序数函数会是这样的：

```
import datetime

DATE1 = datetime.date(2004,9,25)
DATE2 = datetime.date(2004,10,8)
D1 = datetime.date.toordinal(DATE1)
D2 = (datetime.date.toordinal(DATE2))+1

for i in range(D1,D2):
    print datetime.date.fromordinal(i) 
```

# php - Cookie 无法在不同的计算机上运行

> ID：14288503
> 
> 赞同：-1
> 
> 时间：2013-01-11T23:49:43.730
> 
> 标签：php, cookies

我的网站和 cookie 在我的计算机上的每个浏览器中都适用于该网站。但对于某些人来说，我的网站的 cookie 不起作用。他们在浏览器中启用cookies，下载新版本的浏览器，什么都没有。有什么问题？

我使用此代码设置 cookie：

```
 setcookie("local","en",time()+126144000,"/","www.example.com"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:50:47.907

您确定您的网站总是通过“www”访问吗？如果不是，您的 cookie 将无法正常工作。请尝试使用以下方法：

```
setcookie("local","en",time()+126144000,"/",".example.com"); 
```

# java - java中元素递归计数的堆栈溢出

> ID：14288505
> 
> 赞同：5
> 
> 时间：2013-01-11T23:49:59.167
> 
> 标签：java, recursion, count

我正在尝试计算整数二进制表示中的个数。我需要递归地执行此操作。我认为我的逻辑是正确的，但我继续得到堆栈溢出。我在第 2 天进行故障排除。这是我的代码：

```
 static int CountRecursive(int n) {
    int sum = 0;
    if (n >= 0) {
        if (n%2 == 1) {
            sum ++;
        } sum += CountRecursive(n/2);
    } return sum;
} 
```

我的逻辑基于以下信息：“从十进制转换为二进制的标准机制是重复将十进制数除以 2，并在每次除法时输出余数（0 或 1）。”

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T23:52:13.743

删除 if 中的等号。0 除以 2 仍然是零 - 你进入无限递归。

我的意思是做这个：

`if (n >= 0)`

严格比较即：

`if (n > 0)`

# git - 如何维护一个流行项目的 Github 分支

> ID：14288511
> 
> 赞同：21
> 
> 时间：2013-01-11T23:50:59.810
> 
> 标签：git, github, git-fork

我分叉了一个流行的 github 项目，以根据我的需要进行一些小的调整。但是，我想使我的分叉与主存储库保持同步。我最初所做的是通过 github ui fork，然后将我的更改直接从我的开发环境推送到这个 fork。我不完全相信我应该这样做，因为我认为这使得从主存储库中提取更新变得困难。

以这种方式维护分叉的推荐方法是什么？我必须对当前设置进行哪些更改？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T23:58:37.363

您可以配置到远程存储库以在 git 中使用。在从你的 fork 克隆的项目中，键入以下命令：`git remote add name url`其中 name 是代表主存储库的 url 的别名。

有了它，要从主存储库中获取新更新，只需键入：`git pull name master`。要将更改发送到您的 fork 存储库：`git push origin master`.

# algorithm - 在压缩有向图中检测循环？

> ID：14288512
> 
> 赞同：2
> 
> 时间：2013-01-11T23:51:01.357
> 
> 标签：algorithm, data-structures, graph-theory

我正在为考试而学习，但无法解决这个问题：

> 我们得到一个 n <= 300 000 个节点的图，但是是压缩形式的。这种形式由 m <= 300 000 行组成，每行由三个数字给出：a_i, b_i, c_i，这意味着从节点 a_i 到区间 [b_i, c_i] 内的所有节点都有有向边。问题是确定给定图中是否存在循环。

例如输入：（数字 n，m，然后是描述图形的 m 行）

> 4 5
> 
> 1 2 3
> 
> 1 4 4
> 
> 2 3 4
> 
> 3 4 4
> 
> 4 1 1

答案是YES（例如循环：1->2->3->4->1）

对于这个输入：

> 4 4
> 
> 1 2 3
> 
> 1 4 4
> 
> 2 3 4
> 
> 3 4 4

答案是不。

所以主要的问题是这个图可能真的很大，我负担不起创建它和运行 DFS。它必须做得更快。我的第一个想法是使用拓扑排序算法。如果它有效，则给定图中没有循环，否则存在循环。但是更新节点的度数很困难（为了在该算法的每一步中选择deg_in = 0的节点）。我在想也许使用区间树会有所帮助 - 当我删除节点 v 时，我可以看到他的邻接列表（这个列表的元素将被赋予间隔）并且对于所有间隔递减这些点的 deg_in。所以我可以在对数时间内检查节点度数是多少，但我仍然无法快速更新 deg_in = 0 的节点列表。我不知道，也许我正在尝试一个无法修复的解决方案？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:49:50.527

我将尝试为该算法制作一个元代码。这将是图旅行算法的一个特例。专长是关于生产线的包装存储。

```
// Outer loop to check all nodes
CheckedNodes = (empty)
for n1 in 1 .. n {
    if (not(CheckedNodes contains n1)) {
        add n1 to CheckedNodes
        VisitedNodes = (empty) // initialization
        VisitableNodes = { n1 } // start the walk from here
        // Inner loop to walk through VisitableNodes
        While (VisitableNodes is not empty) {
            n2 := select one from VisitableNodes
            remove n2 from VisitableNodes
            add n2 to CheckedNodes // this will stop processing again
            for all lines starting from n2 { // we add all points for all lines
                for n3 in line.start .. line.end { 
                    if (VisitedNodes contains n3) { 
                        // we found an already visited node
                        return "Circle found in Graph!" 
                    } else {
                        // otherwise we should visit that later
                        add n3 to VisitableNodes
                    }
                }
             }
        }
    }
}
// we have not found a circle
return "No circle found in Graph!" 
```

问题是执行。在我使用集合的算法中`CheckedNodes`，`VisitedNodes`它们 - 带有整数索引 - 可以通过布尔数组（或类似的东西）轻松实现。这`VisitableNodes`是一个列表，它应该由一个类似列表的结构来实现。

# javascript - 跟踪输出了哪些 JSON 对象

> ID：14288513
> 
> 赞同：3
> 
> 时间：2013-01-11T23:51:02.133
> 
> 标签：javascript, jquery, json

我通过`randomNumber()`在页面加载时将索引设置为 a 来随机输出 20 个左右的 JSON 对象。

我正在单独刷新已经在 timeInterval 上输出的每个 JSON 对象。为了跟踪输出了哪些 JSON 项目，我将每个项目的索引存储到一个数组中`arrUsed.push[index]`

现在尝试编写将`update()`每个 JSON 对象单独设置的函数，目前我停留在如何使用来自尚未输出的新 JSON 对象的信息更新每个 div（推送到`arrUsed[]`）。

这是我到目前为止的功能：

```
function reloadItems() {
    var itemTotal = $('div.item').length; // Total number of items loaded initially
    var randomNumber=Math.floor(Math.random()*301) //returns number 
    index = randomNumber; // Sets index to be used in JSON data to random number
} 
```

包含已输出索引的数组是全局声明的：`arrUsed = [];`当页面加载时最初输出的每个项目都很好地存储到数组中，因此该部分被覆盖。选择一个随机 JSON 对象，检查以确保它不在数组中/尚未输出，然后更新页面上的 div。

这是导致我这一点的[上一个问题](https://stackoverflow.com/questions/14264647/use-json-data-outside-of-initial-ajax-call-access-leftover-json-data/14265131#comment19826534_14265131)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T23:47:31.437

这是一个 JSON/AJAX Ticker 的工作示例：

*   **[http://ticker.weisser.co/](http://ticker.weisser.co/)**

根据 twhyler 的规范，它每 4.5 秒随机交换一个项目，跟踪已经看到的项目。一旦他们都被看到，它会重新开始：

![JSON/AJAX 代码](../Images/4639771e97324111738db507dd8f0f27.png)

代码文件：

*   **[default.html](http://ticker.weisser.co/default.html)**（主程序）
*   **[template.html](http://ticker.weisser.co/template.html)**（产品模板）
*   **[UK.top.20.html](http://ticker.weisser.co/UK.top.20.html)**（JSON 数据）
*   **[ticker.js](http://ticker.weisser.co/ticker.js)** (jQuery)
*   **[ticker.css](http://ticker.weisser.co/ticker.css)**（样式表）

首先，我们应该将 template.html 存储在我们的全局`template`变量中并触发`getJson()`函数：

```
template = '';
....
$(document).ready(function () {
    $.get('template.html', function(html) { template = html; getJson(); });
}); 
```

然后，我们将 JSON 存储到我们的`data`变量中并触发`initialize()`函数：

```
data = ''; // JSON data will be stored here
myurl = 'UK.top.20.html';
....
function getJson() { 
$.getJSON(myurl, function (JSON) { data = JSON; initialize(); });
} 
```

在这里，我们将调用该`load()`函数 3 次以立即使用数据填充我们的 3 个产品 div。然后我们`i`回到`2`（这样它会首先更改第 3 个 DIV），并安排`tick()`在 4.5 秒内触发：

```
tick_time = 4500;
....
function initialize() { // Start with the first 3
for (i = 1; i < 4; i++) { load(); }
i = 2;
setTimeout('tick()', tick_time);
} 
```

在解释`load()`函数之前，我们先说一下脚本底部的 `String.prototype.f'：

```
String.prototype.f = function () { var args = arguments; return this.replace(/\{(\d+)\}/g, function (m, n) { return args[n]; }); }; 
```

此函数的工作方式与`String.Format(formatstring, arg1, arg2, arg3...)`C# 或`sprintf($formatstring, arg1, arg2, arg3...)`PHP 中的类似。这是一个例子：

```
formatstring = 'Roses are {0}, Violets are {1}, String.Format {2} and so do {3}!';
result = formatstring.f('red', 'blue', 'rocks', 'you');
alert(result); 
```

如您所见，此`String.prototype.f`功能非常方便！

该`load()`函数要做的第一件事就是设置`rid = randomId();`。下面我们来看看`randomId()`函数。它做的第一件事是获取一个 1-20 的数字（基于我们的 JSON 数据的长度）。然后，它检查我们的`seen`数组是否与我们的 JSON 数据大小相同，如果是，则将其设置回 0。接下来，它确保我们`rid`最近没有被看到，如果有，函数递归地再次调用自己，直到它得到一个唯一的随机 id。否则，我们将 存储`rid`在我们的`seen`数组中并返回值。

```
function randomId() {
rid = Math.floor(Math.random() * data.results.length);
if (seen.length == data.results.length) { seen.length = 0; }
if ($.inArray(rid, seen) == -1) {
    seen.push(rid);
    return rid;
} else { return randomId(); }
} 
```

接下来在我们的`load()`函数中获得该随机 ID 后，我们设置`item`和`plat`作为方便的快捷方式。 `plat_html`是平台元素的临时存储位置。for 循环查看我们 JSON 中的所有平台数据，并使用我们的 String.Format 函数来填充我们的 plat_html 字符串。

最后，我们允许 i 的当前值（它是全局的）确定哪个`#product_`被更新，并`template.f`用 JSON 数据填充我们的模板，这要归功于`.fadeIn()`.

```
function load() {
rid = randomId();
item = data.results[rid];
plat = item.Platform;
plat_html = '';
for (var j = 0; j < plat.length; j++) {
    plat_html += plat_fmt.f(
        plat[j].Hardware, 
        plat[j].Market
    );
}
$('#product_' + i).html(
    template.f(
        item.Image, 
        item.id, 
        item.AgeRating,
        item.WikiUrl,
        item.Title,
        item.Source,
        item.Genre,
        plat_html
    )
).fadeIn();
} 
```

最后，让我们看一下递归`tick()`函数。它首先增加我们的全局`i`变量并在它达到 4 时将其设置回 1。然后我们`fadeOut()`对我们的`#product_`元素执行动画并等待它完成直到我们`load()`再次调用。然后，它安排自己在另外 4.5 秒内再次运行。

```
function tick() {
i++; if (i == 4) { i = 1; }
$('#product_' + i).fadeOut(function() { load(); });
setTimeout('tick()', tick_time);
} 
```

就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:01:51.503

使用`$.inArray()`：[http ://api.jquery.com/jQuery.inArray/](http://api.jquery.com/jQuery.inArray/)

```
$.inArray(indexInQuestion, arrUsed); 
```

`-1`如果元素不在数组中，它将返回，因此您将知道是否`indexInQuestion`已添加到`arrUsed`.

# sql - 访问女士 | INNER JOIN 查询的问题

> ID：14288515
> 
> 赞同：2
> 
> 时间：2013-01-11T23:51:33.290
> 
> 标签：sql, database, ms-access, ms-access-2010

所以，我正在做一个电影数据库，我有一张演员表和一张电影标题表。

在电影表中，我得到了演员的三列。Actor_1、Actor_2、Actor_3。在这些字段中，我只写了与 Actors 表中的一行相对应的数字。

每个演员都有这些列：

```
Actor_ID, Firstname, Surname 
```

现在，如果我执行此查询：

```
SELECT movie.titel, firstname + ' ' + surname AS name

FROM Movie

INNER JOIN Actors ON movie.actor_1=actor.actor_id 
```

然后我几乎得到了我想要的。我得到了电影片名，但每部电影只有一个演员。对于我有两三个演员的电影，我不知道该怎么做。

我必须翻译成代码，这样会更容易理解。原始形状的代码有效，所以不要介意这里不是 100%。只是希望能得到一些关于我该怎么做的指示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T23:53:43.120

您需要更改表设计以包含连接表。所以你会有

```
Movies
ID
Etc

Actors
ID
Etc

MoviesActors
MovieID
ActorID
Etc 
```

您的查询可能是：

```
SELECT m.MovieTitle, a.ActorName
FROM Actors a 
INNER JOIN (Movies 
INNER JOIN MoviesActors ma
ON m.ID = ma.MovieID) 
ON a.ID = ma.ActorID 
```

[关系数据库设计](http://r937.com/relational.html)
[联结表](http://en.wikipedia.org/wiki/Junction_table)

# wordpress - 检索未附加的 Wordpress 3.5 图库图片

> ID：14288522
> 
> 赞同：0
> 
> 时间：2013-01-11T23:52:21.730
> 
> 标签：wordpress, gallery, attachment

我正在尝试找出如何使用此代码来[引用此处问题的答案：](https://stackoverflow.com/questions/13873532/get-images-from-posts-gallery-wordpress-3-5/)

```
`global $post;
$post_subtitrare = get_post( $post->ID );
$content = $post_subtitrare->post_content;
$pattern = get_shortcode_regex();
preg_match( "/$pattern/s", $content, $match );
if( isset( $match[2] ) && ( "gallery" == $match[2] ) ) {
    $atts = shortcode_parse_atts( $match[3] );
    $attachments = isset( $atts['ids'] ) ? explode( ',', $atts['ids'] ) : get_children( 'post_type=attachment&post_mime_type=image&post_parent=' . $post->ID .'&order=ASC&orderby=menu_order ID' );
}` 
```

检索与 get_children() 相同的数据？目前，只检索 id，但我尝试过 get_post() 和 get_posts()。

get_children 数组中的序列化数据：

```
{i:229;O:7:"WP_Post":24:{s:2:"ID";i:229;s:11:"post_author";s:1:"1";
s:9:"post_date";s:19:"2012-12-27 21:01:49";s:13:"post_date_gmt";
s:19:"2012-12-27 21:01:49";s:12:"post_content";s:0:""
;s:10:"post_title";s:8:"DSCN0703";s:12:"post_excerpt";
s:0:"";s:11:"post_status";s:7:"inherit";
s:14:"comment_status";s:6:"closed";
s:11:"ping_status";s:4:"open";s:13:"post_password";s:0:"";
s:9:"post_name";s:10:"dscn0703-6";s:7:"to_ping";s:0:"";s:6:"pinged";s:0:"";
s:13:"post_modified";s:19:"2012-12-27 21:01:49";s:17:"post_modified_gmt";
s:19:"2012-12-27 21:01:49";s:21:"post_content_filtered";s:0:"";
s:11:"post_parent";i:223;s:4:"guid";s:81:"http:/exampleurl.com/wp-content/uploads/2012/12/DSCN07031.jpg";s:10:"menu_order";i:1;s:9:"post_type";s:10:"attachment";s:14:"post_mime_type";s:10:"image/jpeg";s:13:"comment_count";s:1:"0";s:6:"filter";s:3:"raw";} 
```

来自代码的序列化数据：a:7:{i:0;s:3:"229";i:1;s:3:"225";i:2;s:3:"228";i:3 ;s:3:"230";i:4;s:3:"226";i:5;s:3:"227";i:6;s:3:"232";}

有人可以指出 wp 钩子，它会给我与上面代码生成的 ids 中的 get_children 相同的数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T17:51:01.363

不是 100% 确定你在追求什么，但这是我使用的代码的副本（基于该答案并添加了一些内容）......它可能会有所帮助

```
 $post_subtitrare = get_post( $post->ID );
            $content = $post_subtitrare->post_content;
            $pattern = get_shortcode_regex();
            preg_match( "/$pattern/s", $content, $match );
            if ( isset( $match[2] ) && ( "gallery" == $match[2] ) ) {
                $atts = shortcode_parse_atts( $match[3] );
                $images = isset( $atts['ids'] ) ? explode( ',', $atts['ids'] ) : get_children( 'post_type=attachment&post_mime_type=image&post_parent=' . $post->ID .'&order=ASC&orderby=menu_order ID' );
            }

            if ( $images ) :                
                $first_element = array_shift(array_values($images));
                if ( ! is_object($first_element)) {
                    $image_count = count( $images );
                    $first_image = $images[0];
                    $featured = wp_get_attachment_image( $first_image, 'blog-featured-image' );
                }
                else {
                    $image_count = count( $images );
                    $first_image = array_shift(array_values($images));
                    $imageID = $first_image->ID;
                    $featured = wp_get_attachment_image( $imageID, 'blog-featured-image' );
                } 
```

...这给了我一些我可以使用的变量，包括 $featured。

# php - PHP字符串转换规则

> ID：14288524
> 
> 赞同：0
> 
> 时间：2013-01-11T23:52:27.473
> 
> 标签：php

PHP中字符串到整数的转换规则是什么？

例如，我有以下返回 0：

```
var_dump((int)"test0");
var_dump((int)"test1");
var_dump((int)"test2"); 
```

并且看起来如果字符串以数字开头，那么它将修剪字符并仅使用数字部分。如下：

```
var_dump((int)"1test");
var_dump((int)"2test");
var_dump((int)"3test"); 
```

它们分别返回 1、2 和 3。

现在，这是一个明确的规则，还是有例外？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T00:02:03.080

这在 PHP 的手册中有解释：

[http://php.net/manual/en/language.types.string.php#language.types.string.conversion](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)

摘录：

> 该值由字符串的初始部分给出。如果字符串以有效的数字数据开头，这将是使用的值。否则，该值将为 0（零）。有效的数字数据是一个可选的符号，后跟一个或多个数字（可选地包含一个小数点），后跟一个可选的指数。指数是“e”或“E”后跟一位或多位数字。

# jquery - 将不同的事件和不同的选择器连接到相同的功能

> ID：14288525
> 
> 赞同：0
> 
> 时间：2013-01-11T23:52:33.827
> 
> 标签：jquery, event-delegation

假设我有一些这样的代码：

```
$('#mywrapper')
    .on('click', 'button', myFunction)
    .on('change', 'input', myFunction)
; 
```

是否有更有效的方法将事件和选择器连接到相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T23:58:51.660

您可以使用“普通对象”同时传递两者：

```
$('#mywrapper').on({
    click: myFunc,
    mouseenter: myFunc
}); 
```

[jQuery .on()](http://api.jquery.com/on/)（底部示例）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T23:54:42.030

不，实际上不是。这里唯一真正的变化是您可以将一个对象传递给 .on() ，它将一次性定义您的所有事件：

```
$("div.test").on({
  click: myFunc,
  mouseenter: myFunc
}); 
```

# parsing - antlr：如何 [有时] 解析引号中的内容？

> ID：14288528
> 
> 赞同：0
> 
> 时间：2013-01-11T23:52:47.630
> 
> 标签：parsing, antlr, antlr3

我有一种情况，我的语言允许引用字符串，但有时我想将引用字符串的内容解释为语言结构。可以把它想象成 eval 函数。

因此，为了支持带引号的字符串，我需要一个词法分析器规则，它会覆盖我尝试使用语法规则评估引号中的内容（如果前缀为“eval”）。有没有办法在语法中处理这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:01:49.197

IMO 您不应该尝试直接通过词法分析器处理这种情况。
我想我会将字符串保留在词法分析器中，并在解析器的 eval 规则中添加一些代码，该规则在字符串内容上调用子解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:49:25.597

如果你想实现一个 eval 函数，你真的在​​寻找一个运行时解释器。

唯一需要“eval”函数的时候是当您想要构建内容以在运行时编译时。如果你在编译时有可用的内容，你可以解析它而不是一个字符串......

所以......将其保留为字符串，然后在运行时使用相同的解析器来解析/编译其内容。

# iphone - 拍照时应用程序崩溃 UIImagePickerController

> ID：14288532
> 
> 赞同：2
> 
> 时间：2013-01-11T23:53:22.950
> 
> 标签：iphone, objective-c

当我尝试使用 UIImagePickerController 拍摄多张照片时，我的应用程序崩溃了。所以，我第一次拍照时一切都很好，第二次应用程序崩溃时没有任何错误消息。我确实第一次得到这个：

```
2013-01-11 16:36:24.178 DoodleStash[26778:907] Received memory warning. 
```

这是我用来拍照的代码：

```
- (IBAction)takePhoto:(id)sender {

if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {

    UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
    imagePicker.delegate = self;
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *) kUTTypeImage, nil];

    [self presentViewController:imagePicker animated:YES completion:nil];
    self.isNewDoodle = TRUE;
}} 
```

这是我用来保存照片的

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

[self dismissViewControllerAnimated:YES completion:nil];

if ([mediaType isEqualToString:(NSString *) kUTTypeImage]) {
    self.doodleImage = [info objectForKey:UIImagePickerControllerOriginalImage];

    // Check to make sure the image is new
    if (self.isNewDoodle == TRUE) {
        UIImageWriteToSavedPhotosAlbum(self.doodleImage, self, @selector(image:finishedSavingWithError:contextInfo:), nil);
    }

    [self performSegueWithIdentifier:@"confirmUploadSegue" sender:self];
}} 
```

非常感谢您对此的任何帮助。完整代码在这里[https://gist.github.com/4515007](https://gist.github.com/4515007)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:19:38.953

这不是崩溃，而是内存警告（应用程序在内存不足的情况下被系统杀死）。如果不查看所有代码，很难说出您的应用程序使用过多内存的原因。您应该使用探查器进行调查。

在给出的代码中，您可以通过仅在写入图像 (in ) 后执行 segue 并在不再需要图像后`image:finishedSavingWithError:contextInfo:`归零(可能 in )来减少内存使用量。如果您重用控制器，后者尤其重要（因为第二次使用它时，您仍然持有对先前拍摄的图像的引用，有效地使内存使用量增加了一倍）。`doodleImage``prepareForSegue:sender:``TakePhoto`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T08:19:47.643

首先对于相机打开尝试以下行：

```
UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;

imagePicker.delegate = self;

[self presentViewController:imagePicker animated:YES completion:nil]; 
```

尝试在相机点击后保存图像：

```
 **UPDATED ANSWER**  

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
        {
           UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
        if (self.isNewDoodle == TRUE) 
       {
        UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:finishedSavingWithError:contextInfo:), nil);}
    [self performSegueWithIdentifier:@"confirmUploadSegue" sender:self];
    }
   [self dismissViewControllerAnimated:YES completion:nil];
      }

- (void)image:(NSString*)videoPath didFinishSavingWithError:(NSError*)error contextInfo:(void*)contextInfo
{
    if (error)
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Photo Saving Failed"  delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles: nil, nil];
        [alert show];
    }
    else
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Photo Saved" message:@"Saved To Photo Album"  delegate:self cancelButtonTitle:@"Ok" otherButtonTitles: nil];
        [alert show];
    }
} 
```

现在试试这个并检查。

# mysql - Sql 查询中的错误 - 找不到解决方案

> ID：14288533
> 
> 赞同：1
> 
> 时间：2013-01-11T23:53:35.507
> 
> 标签：mysql, sql, database

我很难在我的 sql 查询中找到错误。

```
CREATE FUNCTION freeSeats(bookingID INT)
RETURNS VARCHAR(30)
BEGIN
DECLARE numberBooked INT ;
DECLARE status VARCHAR(30);

SELECT count(*) FROM passenger WHERE Booking IN(SELECT Id FROM booking WHERE
Flight = (SELECT Flight FROM booking WHERE Id = bookingID)) INTO numberBooked;

IF (numberBooked > 59) THEN SET status =”No free seats”;
ELSE SET status =”OK”;
END IF;

RETURN status;
END; 
```

我收到此错误消息：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“免费座位”附近使用的正确语法；其他设置状态 =“OK”；万一;
> 
> 返回状态；END' 在第 10 行

我会很感激一些帮助。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:48:49.937

*   不要为了得到改变`DELIMITER`
*   使用单引号

例子，

```
DELIMITER $$
CREATE FUNCTION freeSeats(bookingID INT)
RETURNS VARCHAR(30)
BEGIN
    DECLARE numberBooked INT ;
    DECLARE status VARCHAR(30);

    SET numberBooked =
    (
    SELECT count(*) 
    FROM passenger 
    WHERE Booking IN 
        (   SELECT  Id 
            FROM    booking 
            WHERE   Flight = (SELECT Flight FROM booking WHERE Id = bookingID)
        ) 
    );

    IF (numberBooked > 59) THEN 
        SET status = 'No free seats';
    ELSE 
        SET status = 'OK';
    END IF;

    RETURN status;
END $$
DELIMITER ; 
```

# php - php比较字母位置？

> ID：14288534
> 
> 赞同：0
> 
> 时间：2013-01-11T23:53:37.653
> 
> 标签：php

我有两个变量，例如：

```
var1 =  "z";
var2 = "A"; 
```

如何检查 var1 在字母表中是否在 var2 之后（在这种情况下它应该返回 true）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:23:52.860

我认为回答过的每个人都同意 strcmp() 是正确的答案，但是到目前为止提供的每个答案都会给您错误的结果。例子：

```
echo strcmp( "Z", "a" ); 
```

结果：-1

```
echo strcmp( "z", "A" ); 
```

结果：1

strcmp() 正在根据您的需要比较每个字符的二进制 (ord) 位置，而不是字母表中的位置。如果您想要正确的结果（我假设您这样做），您需要在进行比较之前将您的字符串转换为相同的大小写。例如：

```
if( strcmp( strtolower( $str1 ), strtolower( $str2 ) ) < 0 )
{
  echo "String 1 comes before string 2";
} 
```

编辑：您也可以使用[strcasecmp()](http://php.net/manual/en/function.strcasecmp.php)，但我倾向于避免这种情况，因为它表现出我没有花时间理解多字节字符串的行为。如果您总是使用全拉丁字符集，那可能没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T23:56:34.070

你尝试了什么？......很确定这有效

```
<?php
if(strcmp($var1,$var2) > 0) {
   return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T23:56:43.003

`return strcmp($var1,$var2) > 0`?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T00:00:38.243

如果要比较单个字符，可以使用[`ord(string)`](http://php.net/manual/en/function.ord.php). 请注意，大写值比较小于小写值，因此在进行比较之前将 char 转换为小写。

```
function earlierInAlphabet($char1, $char2)
{
    $char1 = strtolower($char1);
    $char2 = strtolower($char2);

    if(ord($char1) < ord($char2))
        return true;
    else
        return false;
}

function laterInAlphabet($char1, $char2)
{
    $char1 = strtolower($char1);
    $char2 = strtolower($char2);

    if(ord($char1) > ord($char2))
        return true;
    else
        return false;
} 
```

如果您正在比较一个字符串（甚至是一个字符），那么您也可以使用[`strcasecmp(str1, str2)`](http://php.net/manual/en/function.strcasecmp.php)：

```
if(strcasecmp($str1, $str2) > 0)
  // str1 is later in the alphabet 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-11T23:56:40.447

你应该使用[http://php.net/manual/en/function.strcmp.php](http://php.net/manual/en/function.strcmp.php)

> 如果 str1 小于 str2，则返回 < 0；> 0 如果 str1 大于 str2，如果它们相等则为 0。

所以

```
return strcmp(var1, var2) > 0  // will return true if var1 is after var2 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T00:02:23.720

该解决方案可能仅适用于两个变量；但是，如果您需要解决一堆变量（2+）的顺序是否正确，那么这是永远的......

```
 <?php
    $var1='Z';
    $var2='a';
    $array1 = array();
    $array[] = $var1;
    $array1[] = $var2;

    $array2 = sort($array1);
    if($array2 === $array1){
    return true;
    }else{
    return false;
    }
    ?> 
```

除此之外，如果您只想使用两个变量来执行此操作，这应该可以正常工作。

```
 <?php
        return (strcmp($var1,$var2) > 0);
    ?> 
```

# html - 我需要将旧 HTML 更改为新的 HTML5 标准吗？

> ID：14288542
> 
> 赞同：0
> 
> 时间：2013-01-11T23:54:16.573
> 
> 标签：html, browser, cross-browser, html-table

所以说我有一个使用表格和特别是宽度标签构建的网站（我知道很糟糕）。根据[w3schools](http://www.w3schools.com/tags/att_table_width.asp)的说法，该网站没有使用 HTML5，因为不再支持宽度。我的问题是我是否需要更改该代码，因为现代浏览器不支持它？或者可能是因为以后不会支持它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T09:06:22.587

HTML 中从来没有宽度标签。对于某些元素，可以使用`width` *属性。*浏览器支持没有变化；HTML5 草稿*要求*浏览器支持旧属性，即使这些草稿声明它们已过时。W3schools 不可靠且具有误导性；见[w3fools](http://w3fools.com)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T23:55:33.860

这一切都取决于您希望您的网站支持哪些浏览器。但是，实际上，大多数浏览器都会向后兼容一段时间。大多数现代浏览器仍然支持非常早期的 HTML 版本，可以追溯到 90 年代中期。

也就是说，确保您`doctype`在页面上正确设置标签始终是一个好主意，以便浏览器知道它正在获取什么并可以适应它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T23:57:55.453

作为一般规则，我会说不。我还没有阅读规范或任何内容，但听起来宽度标签在桌子上正在贬值？

如果这个站点打算持续 6 到 7 年而不进行重大更改，那么也许您可能希望对它进行未来验证，但浏览器供应商似乎不太可能很快停止支持。太多的网络会被破坏。

# msbuild - Target 内的 ItemGroup 不执行

> ID：14288543
> 
> 赞同：1
> 
> 时间：2013-01-11T23:54:24.483
> 
> 标签：msbuild, msbuild-4.0

我无法理解这种行为：项目组直接放在项目标签下工作正常：

```
 <ItemGroup>
    <!-- Copy the Dev Config files -->  
<Robocopy Include="$(INETROOT)\private\CASI\Reporting\Config\Dev">
      <DestinationFolder>$(DevBranch)\Reporting</DestinationFolder>
      <FileMatch>*</FileMatch>
</Robocopy> 
```

但是当作为子对象包含在目标中时，项目组不会被执行：

```
<!-- Create the Dev Branch -->
<Target Name="CreateDevBranch" AfterTargets="Build">
    <CreateItem Include="$(AppRoot)\**\*.*">
        <Output TaskParameter="Include" ItemName="CompileOutput" />
    </CreateItem>

<Copy SourceFiles="@(CompileOutput)" 
    DestinationFolder="$(DevBranch)\hello\%(RecursiveDir)"></Copy>
    <ItemGroup>
    <!-- Copy the Dev Config files -->  
<Robocopy Include="$(INETROOT)\private\CASI\Reporting\Config\Dev">
      <DestinationFolder>$(DevBranch)\Reporting</DestinationFolder>
      <FileMatch>*</FileMatch>
</Robocopy> 
```

```
</Target> 
```

奇怪的是复制操作有效，即使我评论复制操作，ItemGroup 操作仍然没有被执行

我想我在这里遗漏了一些概念

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:27:35.853

itemgroup 可能是空的，id 看看你创建的item group 有没有值？createitem 也是旧的 msbuild，并且使用 msbuild 3.5 取消了该任务。使用创建项目组

# ios - 使用 @implementation 在 XCode 中创建“实例方法冲突”警告

> ID：14288547
> 
> 赞同：0
> 
> 时间：2013-01-11T23:54:44.873
> 
> 标签：ios, xcode, cocoa

在我的 iOS 应用程序中，我有 5 个视图控制器，它们都处理相同的功能（组）。这些视图控制器可以在几种不同的配置中相互叠加。我制作了一个名为 GroupViewHelper.h 的文件，它使用 @implementation 为组功能提供一些功能。这些函数查看视图控制器堆栈并向特定类型的视图控制器发送“刷新”消息。该文件如下所示：

```
@implementation UIViewController (GroupViewHelper)
- (void) refreshManageGroupsParent
{
   // ...
}

- (void) refreshGroupDetailsParent
{
   // ...
}
@end 
```

我的代码运行良好，一切都按预期运行，但在构建时我收到了 14 个与此非常相似的警告：

```
ld：警告：来自/Users/x/Library/Developer/Xcode/DerivedData/myapp-ayshzmsyeabbgqbbnbiixjhdmqgs/Build/Intermediates/myapp.build/Debug-iphonesimulator/myapp-dev.build/Objects-normal 类别中的实例方法“refreshGroupDetailsParent” /i386/GroupMembersController.o 与另一个类别的相同方法冲突

```

我想我得到这个是因为我使用了一个包含在多个地方的 .H，但是在这种情况下如何正确使用 @implementation 呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T00:07:19.033

> 我想我得到这个是因为我正在使用一个包含在多个地方的 .H

好吧，有点，但真正的问题是您首先将 放入`@implementation`文件`.h`中。如果你只将那个`.h`文件包含在一个地方，你会侥幸逃脱——但这仍然不是正确的做法。

> 但是在这种情况下如何正确使用@implementation？

`GroupViewHelper.m`把它`@interface`放在一个名为`GroupViewHelper.h`.

或者，理想情况下，将它们称为`UIViewController+GroupViewHelper.m`and `UIViewController+GroupViewHelper.h`，因为这是命名类别文件的惯用方式。（如果你使用 Xcode 的“New File…”菜单项来创建一个新的 Objective-C 类别文件，这就是它会给你的。）

换句话说，现有类上的类别的接口和实现与新类的接口和实现完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:24:48.373

I have encountered exactly this issue. I had imported a reference to a header file, on a .m page. However, it also contained a reference to another header file, which contained a reference to another header file - that also referenced the conflicted header file. So indirectly the same header file was imported twice, causing the error.

In my case, the .m file did not need this reference. I was able to delete it, removing the error. My advice is check the files where you have included a reference to the offending header file, and verify that it actually is required.

# jquery - jQuery 和 .Load() 函数挂起，我该如何解决这个问题？

> ID：14288548
> 
> 赞同：0
> 
> 时间：2013-01-11T23:54:51.190
> 
> 标签：jquery, html, dynamic

我正在做一个项目，我绝对别无选择，只能使用只提供静态网页的网络服务器。

这是一个临时解决方案（希望如此），但该站点足够复杂，我需要能够将至少一些菜单分成单独的代码片段以嵌入到每个页面中。

我以为我通过使用 jQuery .load() 函数找到了解决方案。如果我只加载一个东西，这很好用，但如果我尝试加载两个......它只是挂在那里告诉我正在下载图像，没有错误，什么都没有。

这是我正在尝试使用的代码

```
<!DOCTYPE html>
<html>
<head>
  <title>Test Site</title>
  <script type="text/javascript" src="Scripts/jquery-1.4.1.js"></script>
  <link rel="icon" href="Graphics/Icons/favicon.ico" type="image/vnd.microsoft.icon" />
  <link rel="Shortcut Icon" href="Graphics/Icons/favicon.ico" />
  <link rel="Stylesheet" type="text/css" href="StyleSheets/Main.css" />
  <script type="text/javascript">
    $(document).ready(function () {

      $("#footer").load("WebParts/Footer.html"); 
      $("#header1").load("WebParts/Header.html");     
    });
  </script>
</head>
<body>
  <div id="header1" />
  <div id="content">
    &nbsp;
  </div>
  <div id="footer" />
</body>
</html> 
```

其中有一个带有 .html 文件名的目录 WebParts

footer.html 文件看起来像

```
 <div>HI! I'm a footer <img src="someimage.png" alt="image description" /></div> 
```

header.html 文件看起来像

```
 <div>HI! I'm a header! yay look at me</div> 
```

它会加载一个 div，但永远不会再加载任何其他内容。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T23:58:49.747

您必须做的一件事是在您的 jQuery 代码中使用哈希正确定位 div：

```
$("#footer").load("WebParts/Footer.html"); 
$("#header1").load("WebParts/Header.html"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T02:07:12.987

我遇到了几件事。希望这会有所帮助：

1）正如其他人所说，我认为您的意思是在*content*`<div id="content">`前面不使用 # 。如果这是故意的，那么不要在 ids 中使用 # 可能是个好主意 - 人们可能会将其混淆为错字

 *2) 在您的 jQuery 中，使用 # 来识别这样的 id：

```
$("#footer").load("WebParts/Footer.html"); 
$("#header1").load("WebParts/Header.html"); 
```

如果您使用不带 # 的 id，则意味着您在 DOM 中引用这些虚构元素：

```
<footer>...</footer>
<header1>...</header1> 
```

这显然不是你想要的

3）这个应该修复你的代码。代替：

```
<div id="header1" />
  <div id="#content">
    &nbsp;
  </div>
  <div id="footer" /> 
```

利用：

```
<div id="header1"></div>
  <div id="content">
    &nbsp;
  </div>
  <div id="footer"></div> 
```

上面的代码修复了 id 中的 # 并去掉了自闭合的 div 标签，取而代之的是显式闭合的 div 标签。

我不完全确定 jquery 两者之间的区别是什么，但它使我得到了您的代码的预期结果。希望其他人可以对此有所了解*

# .htaccess - 如何使用 localhost 作为“目录”目录？

> ID：14288550
> 
> 赞同：1
> 
> 时间：2013-01-11T23:54:57.690
> 
> 标签：.htaccess, directory, localhost, directory-structure, tableofcontents

我的兄弟和我正在使用 Dropbox 作为共享网站项目的一种方式。我在包含以下内容的主文件夹中放置了一个小的 html 页面：

```
<a href="project1/index.php">Project 1</a><br />
<a href="project2/index.html">Project 2</a><br />
<a href="project3/index.html">Project 3</a><br /> 
```

使用 WAMP，我将 localhost 设置为这个页面，这样我就可以通过这种方式方便地访问我们所有的项目。这是我的问题：

这些链接仅在指定目录时才有效。在这些页面中，导航链接没有指定目录，因此它链接到“localhost/about.php”而不是“localhost/project1/about.php”。使用“file:///C:/ ...”将不起作用，因为 WAMP 将不再运行 php.ini。

我不知道如何寻找这个问题的解决方案，因为我不知道我所说的“目录”的技术名称。然而，在搜索了这个问题的变体之后，我认为可以用 htaccess 来安装一些东西。感谢您花时间阅读我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:06:44.673

您应该做的是移动您的保管箱。如果我记得你可以选择你的保管箱文件夹它。将您的投递箱放在 C:\website 中，这样它将同步您的 WAMP 安装。让你的麻烦做同样的事情，然后它应该工作。

# java - sphinx facet search: 'with_all' 类似物用于 php/java

> ID：14288551
> 
> 赞同：1
> 
> 时间：2013-01-11T23:55:24.290
> 
> 标签：java, sphinx, thinking-sphinx, faceted-search

我有一个带有 MVA 的文档集，我需要过滤具有所有必需属性的文档（假设我需要所有具有“java”和“oracle”标签的“新闻”文档，假设我有标签 id）。

在 ThinkingSphinx ( [http://pat.github.com/ts/en/searching.html#filters](http://pat.github.com/ts/en/searching.html#filters) ) 我发现了一个有用的符号：

> 为了匹配多值属性中的多个值， :with 并不能完全满足您的要求。试试 :with_all 吧：

```
Article.search 'pancakes',   :with_all => {:tag_ids => @tags.collect(&:id)} 
```

据我猜测，这允许过滤具有所有提供的属性的文档，而不是获取具有任何提供的属性列表以供`SetFilterRange`使用的文档。

任何人都可以至少在标准 PHP 接口方面提出解决方案吗？希望我能把它转换成java。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:27:37.280

对 setFilter 的多次调用是 ANDed。正如您所注意到的，为一个呼叫指定多个 ID 是 ORed。

```
$cl->setFilter('tag_ids',array($tag_id1));
$cl->setFilter('tag_ids',array($tag_id2));
$cl->setFilter('tag_ids',array($tag_id3)); 
```

抱歉不能帮助使用 java 语法。

# c++ - 使用元组和 boost.fusion，有什么理由使用结构吗？

> ID：14288553
> 
> 赞同：1
> 
> 时间：2013-01-11T23:55:46.837
> 
> 标签：c++, struct, boost-fusion, boost-tuples, stdtuple

元组类似于结构（这里讨论：[Boost::Tuples vs Structs for return values](https://stackoverflow.com/questions/409827/boosttuples-vs-structs-for-return-values)）。似乎唯一的优点是编写 struct 更方便，因为它更短且通过键而不是数字。

还可以使用 fusion map 和 structs 通过键[Boost::Tuples vs Structs 访问返回值](https://stackoverflow.com/questions/409827/boosttuples-vs-structs-for-return-values)来模拟结构。这是一个多一点的写作。

似乎也没有性能损失。好吧，融合可能会更快，因为它使用视图。

所以使用结构的唯一原因是如果您不想再编写几行代码并保持代码可读性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:11:18.020

> 所以使用结构的唯一原因是如果您不想再编写几行代码并保持代码可读性？

此外，还有可扩展性/可维护性 - 在元组中放置/修改/删除任何额外的位置参数将非常困难，但是使用“键值”结构查找非常容易。

*代码质量*是性能、可读性、清晰性、可扩展性等的组合。忽略任何这些值都会使您的代码变得更糟。这是一件坏事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T01:37:30.540

结构可以被子类化，并且可以包含方法、虚函数、枚举、typedef、子结构等。

元组只能表示 的最微不足道的功能`struct`，即值的集合。它甚至不能给他们正确的名字。他们是一个非常糟糕的替代品。

# c - 在 C linux 中使用 fork 管道两次

> ID：14288559
> 
> 赞同：0
> 
> 时间：2013-01-11T23:56:18.377
> 
> 标签：c, linux, ubuntu, pipe, systems-programming

我正在尝试重写执行类似 ls|wc|wc 的 ac 程序，我已经为 ls|wc 做过，它工作正常，但我无法弄清楚为什么我的程序在指示行中的子节点处停止。请帮忙！

```
int main (void)
{
    pid_t pid_fils, pid_pfils;

    int fd[2], fd2[2];

    if(pipe(fd)==-1 || pipe(fd2)==-1)
    {
        printf("pipe failed!");
        return 1;
    }

    printf("program started\n");
    pid_fils=fork();
    if(pid_fils==0)
    {
        pid_pfils=fork();
        if(pid_pfils==0)
        {
            //action3
            printf("I am the grandson\n");
            close(fd[0]);//close read side
            dup2(fd[1],1);//connect write with stdout
            close(fd[1]);//close write side
            execlp("ls","ls",(char*)0);
            //execvp("ls",argv3);
            return 0;/*actions grandson*/
        }
        else
        {
            //action2
            printf("I am the son\n");
            wait();
            printf("son, wait ok\n");
            >close(fd[1]);  //close read side
            >dup2(fd[0],0); //connect write with stdin
            >close(fd[0]);  //close read side

            ///////pipe2////
           > close(fd2[0]);  //close read side
            >dup2(fd2[1],1); //connect write with stdout/*it stops here -can't display "ok!"*/
            printf("ok!\n");    
            >close(fd2[1]);  //close write side

            execlp("wc","wc",(char*)0);
            printf("error exec returned!\n");    
            return 0;
        }
    }
    else
    {
        ///action1
        printf("I am the parent\n");
        wait();
        printf("parent,wait ok\n");
        close(fd2[1]);  //close write side, 
        dup2(fd2[0],0); //connect read with stdin
        close(fd2[0]);  //close read side
        execlp("wc","wc",(char*)0);
        return 0;/*the parent*/
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:16:03.580

确保关闭所有未使用的描述符。在您的情况下，最简单的解决方案是将 pipe(fd) 的创建移动到第一个 if 块中（在第一个子进程中）。问题是只要任何进程都可能写入管道，阅读器就不会得到 EOF，因此不会终止。

```
if(pipe(fd2)==-1)
{
    printf("pipe failed!");
    return 1;
}

printf("program started\n");
pid_fils=fork();
if(pid_fils==0)
{
    if(pipe(fd)==-1)
    {
        printf("pipe failed!");
        return 1;
    }
    pid_pfils=fork(); 
```

我还应该提到，您可能需要重新考虑等待电话。不确定您打算对它们做什么，但您不希望“ls”进程阻止输出，因为尚未启动阅读器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:17:29.763

```
dup2(fd2[1],1); 
```

上面的行将首先关闭描述符 1 处的文件，然后将描述符从 fd2[1] 复制到 1。

1 是标准输出。这意味着调用关闭标准输出。

printf 打印到标准输出，这意味着 printf 打印到现在分配给管道 fd2 的 1

所以你的确定进入管道而不是屏幕上。

尝试

```
 //action2
        printf("I am the son\n");
        wait();
        printf("son, wait ok\n");
        close(fd[1]);  //close read side
        dup2(fd[0],0); //connect write with stdin
        close(fd[0]);  //close read side

        ///////pipe2////
        int my_terminal_out = dup(1);
        close(fd2[0]);  //close read side
        dup2(fd2[1],1); //connect write with stdout/*it stops here -can't display "ok!"*/
        fprintf(my_terminal_out, "ok!\n");    
        close(fd2[1]);  //close write side 
```

未测试。此外，您应该测试其余代码是否存在类似的错误。

+ DrC 所说的。

# node.js - EC2 托管的 Node.js 应用程序 - 无法远程连接到端口

> ID：14288567
> 
> 赞同：5
> 
> 时间：2013-01-11T23:56:47.077
> 
> 标签：node.js, proxy, amazon-ec2, node-http-proxy

**更新**：原来唯一的问题是我在防火墙后面阻止了一些端口，但不是 8000。

* * *

编辑：**TL；DR：**无法远程连接到端口 9000，但端口 8000 没问题，我不知道为什么 :(

* * *

我有这个 node.js 应用程序在端口**8000**上运行，另一个（[http-proxy](https://npmjs.org/package/http-proxy)）在端口**9000**上运行。

在我的机器上运行它们很好，但是当我将它们放在服务器上时我遇到了一些问题（**EC2**实例 - 我确实在 Web 控制台安全组^([1])中打开了端口）。该应用程序运行良好，但我无法从外部连接到代理。我试图`$ telnet localhost 9000`在服务器上连接，所以我想这是一个好兆头。

我注意到的另一件事是，如果我尝试单独运行应用程序，我会得到相同的结果，即：8000 - OK，9000 - NOTOK :<。但是，如果我将代理使用的端口从 9000 更改为 8000，它就可以工作。如果我切换端口，即应用程序：9000 和代理：8000，我可以连接到代理，但不能连接到应用程序。我也尝试过其他数字，但这也无法解决。

我想有一些非常愚蠢的东西与应用程序本身无关并且我错过了，但我不能指望它，所以有人知道为什么这个设置不起作用吗？

**服务器.js**

```
var express = require('express.io');
var app = module.exports = express();

require('./proxy');

app.http().io();
app.listen(8000);
// ... 
```

**代理.js**

```
var httpProxy = require('http-proxy');
var url = require('url');

httpProxy.createServer(function(req, res, proxy) {

    // ... 
    proxy.proxyRequest(req, res, {
        host: destination.host,
        port: 80
    });

}).listen(9000); 
```

`$ netstat -pln | grep node`输出

```
tcp   0      0      0.0.0.0:9000    0.0.0.0:*       LISTEN  1487/node
tcp   0      0      0.0.0.0:8000    0.0.0.0:*       LISTEN  1487/node 
```

**安全组规则**

![1](../Images/f7f9659cf8a23288898702c75517128a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:37:33.203

事实证明，问题与应用程序或 EC2 实例设置无关。

我在测试时所在的网络阻塞了一些端口。这就是为什么将代理移动到端口`8000`时它工作正常，但在`9000`我尝试过的任何其他随机代理上却没有。哦！

# agda - Agda：Conor 堆栈示例的运行函数

> ID：14288569
> 
> 赞同：10
> 
> 时间：2013-01-11T23:56:49.070
> 
> 标签：agda

在 ICFP 2012 上，Conor McBride 发表了主题演讲，主题为“Agda-curious？”。

它具有小型堆栈机器实现。

该视频在 youtube 上： [http ://www.youtube.com/watch?v=XGyJ519RY6Y](http://www.youtube.com/watch?v=XGyJ519RY6Y)

代码也在线： http: [//personal.cis.strath.ac.uk/conor.mcbride/ICFP12Code.tgz](http://personal.cis.strath.ac.uk/conor.mcbride/ICFP12Code.tgz)

我想知道`run`第 5 部分的功能（即“Part5Done.agda”，如果您下载了代码）。`run`在解释功能之前谈话停止。

```
data Inst : Rel Sg SC Stk where
  PUSH  : {t : Ty} (v : El t) -> forall {ts vs} ->
            Inst (ts & vs) ((t , ts) & (E v , vs))
  ADD   : {x y : Nat}{ts : SC}{vs : Stk ts} ->
            Inst ((nat , nat , ts) & (E y , E x , vs))
              ((nat , ts) & (E (x + y) , vs))
  IFPOP : forall {ts vs ts' vst vsf b} ->
          List Inst (ts & vs) (ts' & vst)  -> List Inst (ts & vs) (ts' & vsf)
          -> Inst ((bool  , ts) & (E b , vs)) (ts' & if b then vst else vsf)

postulate
  Level : Set
  zl : Level
  sl : Level -> Level

{-# BUILTIN LEVEL Level #-}
{-# BUILTIN LEVELZERO zl #-}
{-# BUILTIN LEVELSUC sl #-}

data _==_ {l : Level}{X : Set l}(x : X) : X -> Set l where
  refl : x == x

{-# BUILTIN EQUALITY _==_ #-}
{-# BUILTIN REFL refl #-}

fact : forall {T S} -> (b : Bool)(t f : El T)(s : Stk S) ->
         (E (if b then t else f) , s) ==
         (if b then (E t , s) else (E f , s))
fact tt t f s = refl
fact ff t f s = refl

compile : {t : Ty} -> (e : Expr t) -> forall {ts vs} ->
   List Inst (ts & vs) ((t , ts) & (E (eval e) , vs))
compile (val y)     = PUSH y , []
compile (e1 +' e2)  = compile e1 ++ compile e2 ++ ADD , []
compile (if' e0 then e1 else e2) {vs = vs}
  rewrite fact (eval e0) (eval e1) (eval e2) vs
  = compile e0 ++ IFPOP (compile e1) (compile e2) , []

{- 
-- ** old run function from Part4Done.agda
run : forall {ts ts'} -> List Inst ts ts' -> List Elt ts [] -> List Elt ts' []
run []              vs              = vs
run (PUSH v  , is)  vs              = run is (E v , vs)
run (ADD     , is)  (E v2 , E v1 , vs)  = run is (E 0 , vs)
run (IFPOP is1 is2 , is) (E tt , vs) = run is (run is2 vs)
run (IFPOP is1 is2 , is) (E ff , vs) = run is (run is1 vs)
-}

run : forall {i j} -> List Inst i j -> Sg Stack (λ s -> s == i) → (Sg SC Stk)
run {vs & vstack} [] _
   = (vs & vstack)
run _ _ = {!!} -- I have no clue about the other cases...

--Perhaps the correct type is:
run' : forall {i j} -> List Inst i j -> Sg Stack (λ s -> s == i) → Sg (Sg SC Stk) (λ s → s == j)
run' _ _ = {!!} 
```

该函数的正确类型签名是`run`什么？功能应该如何`run`实现？

编译功能[在演讲开始后大约 55 分钟进行了](https://www.youtube.com/watch?v=XGyJ519RY6Y#t=55m40)解释。

完整代码[可从 Conor 的网页获得](http://personal.cis.strath.ac.uk/conor.mcbride/ICFP12Code.tgz)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T08:06:08.500

被指控有罪，`run`函数的类型`Part4Done.agda`是

```
run : forall {ts ts'} -> List Inst ts ts' -> List Elt ts [] -> List Elt ts' []
run []              vs              = vs
run (PUSH v  , is)  vs              = run is (E v , vs)
run (ADD     , is)  (E v2 , E v1 , vs)  = run is (E 0 , vs)
run (IFPOP is1 is2 , is) (E tt , vs) = run is (run is2 vs)
run (IFPOP is1 is2 , is) (E ff , vs) = run is (run is1 vs) 
```

这相当于说“给定从堆栈配置开始`ts`并在堆栈配置中完成的代码以及在配置中`ts'`的堆栈`ts`，您将在配置中获得一个堆栈`ts'`。“堆栈配置”是推入堆栈的事物类型的列表。

在`Part5Done.agda`中，代码不仅由堆栈最初和最终保存的类型索引，而且由值索引。因此，该`run`函数被编织到代码的定义中。然后对编译器进行键入以要求生成的代码必须具有`run`对应于`eval`. 也就是说，编译代码的运行时行为必然要尊重引用语义。如果您想运行该代码，以亲眼看看您知道什么是正确的，请沿相同的行键入相同的函数，除了我们需要从索引的类型和值对中单独选择类型代码。

```
run : forall {ts ts' vs vs'} -> List Inst (ts & vs) (ts' & vs') -> 
        List Elt ts [] -> List Elt ts' []
run []              vs              = vs
run (PUSH v  , is)  vs              = run is (E v , vs)
run (ADD     , is)  (E v2 , E v1 , vs)  = run is (E (v1 + v2) , vs)
run (IFPOP is1 is2 , is) (E tt , vs) = run is (run is1 vs)
run (IFPOP is1 is2 , is) (E ff , vs) = run is (run is2 vs) 
```

或者，您可以应用明显的擦除函数，它将类型和值索引的代码映射到类型索引的代码，然后使用旧`run`函数。我与 Pierre-Évariste Dagand 在*装饰品*上的工作使这些模式自动化，即在一个类型上系统地分层由程序诱导的额外索引，然后将其擦掉。这是一个通用定理，如果您擦除计算的索引然后从擦除的版本重新计算它，您会得到（GASP！）您擦除的索引。在这种情况下，这意味着`run`输入同意的代码`eval`实际上会给您与 相同的答案`eval`。

# c++ - 访问作为结构成员的对象的模板化成员函数

> ID：14288570
> 
> 赞同：0
> 
> 时间：2013-01-11T23:56:52.060
> 
> 标签：c++, templates, struct, shared-ptr

所以我有一个包含许多成员的结构，包括一个指向 PCLVisualizer 对象的 boost 共享指针。PCLVisualizer 类是具有成员函数 updatePointcloud 的模板类。我正在尝试为模板 PointType 调用 updatePointCloud。请看下面的代码：

```
template <typename PointType>
class A {
    struct gt_data_type {
        model_struct line;
        PointCloudTPtr input;
        PointCloudTPtr output;
        int step_size;
        int segment_min_pts;
        vector<float> directions;
        float current_direction;
        vector<line_segment> seeds;
        Eigen::Vector4f prev_vector;
        Eigen::Vector4f current_vector;
        Eigen::Vector4f p;
        typename pcl::search::KdTree<PointType>::Ptr tree;
        pcl::visualization::PCLVisualizer::Ptr viewer;
        line_segment prev_segment;

    };

    gt_data_type gt_data;

    void foo(PointCloudTPtr output) {
        pcl::visualization::PCLVisualizer::Ptr viewer(new pcl::visualization::PCLVisualizer("Track Viewer"));
        gt_data.output = output;
        gt_data.viewer = viewer;
        // next line causes compile error
        gt_data.viewer->updatePointCloud<PointType>(gt_data.output,"rail");
    }

} 
```

请注意，PointCloudTPtr 只是不同 shared_ptr 的 typedef。我在指示的行收到以下错误： `expected primary-expression before '>' token`

如果我省略结构并通过这样做直接调用查看器成员函数： `viewer->updatePointCloud<PointType>(gt_data.output,"rail");`

我的代码编译。我不明白为什么通过结构访问查看器会有什么不同。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:00:31.347

您发布的示例应该可以正常工作。**除非您实际上打算调用`viewer`类型而不是变量**。但是，如果`gl_data`它本身是*模板*或依赖于*模板参数*，那么编译器将不知道您是在编写函数调用还是比较表达式。从您的代码的外观来看，它似乎依赖于模板参数`PointType`。

正如`typename`需要在类型和变量之间`template`消除歧义一样，需要在模板和比较之间消除歧义：

```
data.viewer->template updatePointCloud<PointType>(data.output,"rail"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:00:31.817

您需要一个对象类型`gt_data`，而不是直接使用类的名称。

# wpf - 多平板屏幕合并

> ID：14288578
> 
> 赞同：1
> 
> 时间：2013-01-11T23:57:50.880
> 
> 标签：wpf, screen, tablet

我想合并两个平板电脑屏幕（制作一个大屏幕）。我正在使用 Windows Surface 平板电脑。知道我应该如何在 wpf 中特别处理它吗？

# javascript - jQuery 在 Wordpress 3.5 中不起作用

> ID：14288579
> 
> 赞同：-1
> 
> 时间：2013-01-11T23:57:53.253
> 
> 标签：javascript, jquery, wordpress, themes, wordpress-theming

所以我似乎对我的一个旧 Wordpress 主题有疑问。我刚刚把我的一个主题从黑暗中拿出来用作我的作品集，并立即意识到我的 jQuery 侧边栏已经完全停止工作，我不知道为什么。现在请注意，我在 WordPress 实现他们自己的“自定义”侧边栏实现之前编写了这段边栏代码（所以我非常不确定这是否与此相关，但非常怀疑它。我想我是在 Wordpress 3.1 左右开发的） . 故障的具体代码位于此处

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript" src="js/sliding_effect.js"></script> <!-- code for jquery menu -->

<?php wp_head(); ?>  

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript">

$(document).ready(function()
{
    $(".button-slide").click(function()
    {
        $("#slide-panel").slideToggle("slow");
    });
});

</script>

</head> 
```

我知道 jQuery 版本已经过时了，但是即使在更新之后我仍然没有成功。有没有人知道我做错了什么。如果需要，我会很乐意提供更多代码。以上所有内容都位于我的主题中的 header.php 文件中。

这是实现的一部分

```
<ul id="sliding-navigation">

<br/>

<!-- Panel -->

<li class= "sliding-element"><a href="http://www.facebook.com/pages/TheEntertainmentArt/208687212498902" target="_TOP" " title="TheEntertainmentArt">Join Us On Facebook!</a></li>

     <li class="sliding-element"><h3>Menu</h3></li>

     <li class="sliding-element"><a href= "http://theentertainmentart.info/category/ps3">Playstation 3</a></li>
     <li class="sliding-element"><a href= "http://theentertainmentart.info/category/360">Xbox 360</a></li>
     <li class="sliding-element"><a href= "http://theentertainmentart.info/category/wii">Wii</a></li>
     <li class="sliding-element"><a href= "http://theentertainmentart.info/category/film">Film</a></li>
     <li class="sliding-element"><a href= "http://theentertainmentart.info/category/music">Music</a></li>
     <li class="sliding-element"><a href= "http://theentertainmentart.info/category/art">Art</a></li>
     <li class="sliding-element"><a href= "http://theentertainmentart.info/category/coding">Coding</a></li>
      <li class="sliding-element"><a href= "http://theentertainmentart.info/category/uncategorized">Misc</a></li> 
```

和一些 CSS

```
 #navigation-block {
        position:relative;
        /*top:100px;
        left:100px;*/
    }

    #hide {
        position:absolute;
        top:30px;
        left:-190px;
    }

    ul#sliding-navigation
    {

        list-style: none;
        /*font-size: .75em;*/
        font-size: 1em;
        /*margin: 30px 0;*/
        padding: 0;
        width: 175px;

    }
ul#sliding-navigation li.sliding-element h3,
ul#sliding-navigation li.sliding-element a
{
    display: block;
    width: 175px;

    padding: 5px 10px;
    margin: 0;
    margin-bottom: 5px;
    /* corner code */
    /*border-bottom-right-radius: 50px;
    border-top-right-radius: 50px;
    border-top-left-radius: 50px;
    -moz-border-radius-topright: 50px;
    -moz-border-radius-topleft: 50px;
    -moz-border-radius-bottomright: 50px;*/
    -moz-border-radius: 1em 4em 1em 4em;
    border-radius: 1em 4em 1em 4em;
    border: outset;

} 
```

滑动效果.js

```
$(document).ready(function()
{
    slide("#sliding-navigation", 25, 15, 150, .8);
});

function slide(navigation_id, pad_out, pad_in, time, multiplier)
{
    // creates the target paths
    var list_elements = navigation_id + " li.sliding-element";
    var link_elements = list_elements + " a";

    // initiates the timer used for the sliding animation
    var timer = 0;

    // creates the slide animation for all list elements 
    $(list_elements).each(function(i)
    {
        // margin left = - ([width of element] + [total vertical padding of element])
        $(this).css("margin-left","-180px");
        // updates timer
        timer = (timer*multiplier + time);
        $(this).animate({ marginLeft: "0" }, timer);
        $(this).animate({ marginLeft: "15px" }, timer);
        $(this).animate({ marginLeft: "0" }, timer);
    });

    // creates the hover-slide effect for all link elements         
    $(link_elements).each(function(i)
    {
        $(this).hover(
        function()
        {
            $(this).animate({ paddingLeft: pad_out }, 150);
        },      
        function()
        {
            $(this).animate({ paddingLeft: pad_in }, 150);
        });
    });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:38:38.110

您确定在同一页面上包含 2 个不同版本的 jQuery 不会导致任何问题吗？

WordPress 附带的 jQuery 版本（当您调用 wp_head(); 时可能会包含它）以无冲突模式加载。这在[这里](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)解释：

基本上你需要用

```
jQuery(document).ready(function($) {
  // $() will work as an alias for jQuery() inside of this function
}); 
```

# c - FreeBSD 上的 sem_wait 中断信号

> ID：14288580
> 
> 赞同：0
> 
> 时间：2013-01-11T23:57:53.230
> 
> 标签：c, semaphore, freebsd

我注意到在我的 FreeBSD9 副本中，来自 sempahore.h 的 sem_wait 的手册页没有 EINTR 错误返回值。我目前有一些具有信号处理程序的代码，并且我正在发出 SIGINT 信号。这似乎并没有唤醒我的 sem_wait() 所以我可以检查返回值，因此使用 sem_wait 运行函数的线程被无限期挂起。

根据 linux 手册页，我应该能够提高信号，测试执行 sem_wait 的线程中的 EINTR 值，但这似乎在 FreeBSD 中缺失。

解决此问题的正确方法是什么？

在psuedo这就是我所拥有的

```
signal_handler() //handles SIGINT
{
loopvar = 0;
} 
```

线程1：

```
while(loopvar)
{

    if((r = sem_wait())
    {
    check error value
     continue
    }

    ..
    sem_post()
} 
```

线程2：

```
raise(SIGINT); 
```

所以我期待当 thread2 引发 SIGINT 时，它会导致 sem_wait 返回一个值，循环将继续，但现在 loopvar 将为零，所以我将退出我的无限循环。

编辑：要清楚，我没有使用 SA_RESTART 标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:42:47.830

`raise`引发调用线程的信号，而不是进程。如果你想给整个过程发信号（传递给一个没有屏蔽信号的随机线程），你需要这个`kill`函数。如果要向特定线程发出信号，则需要`pthread_kill`.

# c++ - 使用 TPACKET_V2 时 Vlan id 设置为 0

> ID：14288582
> 
> 赞同：2
> 
> 时间：2013-01-11T23:57:57.217
> 
> 标签：c++, linux, network-programming, libpcap, raw-sockets

我对此 TPACKET_V2 的使用有疑问。

我的问题是，在套接字上设置了这种类型的数据包后，当我尝试接收一些数据包时，我无法从数据包中读取 vlan id（当然是从数据包的头部），vlan_tci 永远为 0。

现在我正在使用 open suse sp1，当我在 sless sp2 上运行我的程序时，我能够使用在**sless sp1**上不起作用的同一程序获得 vlan id，但奇怪的是 tcpdump 能够获得vlan id（在这个 sless 上）和 tcpdump 设置了 TPACKET_V2（所以这意味着支持 TPACKET_2）

我的简单项目是基于这些函数，全部由函数**createSocket**调用，然后有一个简单的方法是读取套接字上的数据包，然后我尝试获取有关 vlan id 的信息（还有之前使用的相关部分） TPACKET_V1)

```
#include <linux/if_packet.h>
#include <linux/if_ether.h>

#include <netinet/in.h>
#include <netinet/if_ether.h>
#include <netinet/ether.h>

#include <linux/filter.h>
#include <net/if.h>
#include <arpa/inet.h>

    enum INTERFACE_T
    {
        RX_INTERFACE,
        TX_INTERFACE
    };

    static const char* PKT_TYPE[];

    // BLOCK_NUM*BLOCK_SIZE = FRAME_NUM*FRAME_SIZE
    enum { RX_BLOCK_SIZE = 8192,
        RX_BLOCK_NUM  = 256,
        RX_FRAME_SIZE = 2048,
        RX_FRAME_NUM  = 1024
    };

    enum { TX_BLOCK_SIZE = 8192,
        TX_BLOCK_NUM  = 256,
        TX_FRAME_SIZE = 2048,
        TX_FRAME_NUM  = 1024
    };

    struct RxFrame {
        struct tpacket2_hdr tp_h;  // Packet header
        uint8_t tp_pad[TPACKET_ALIGN(sizeof(tpacket2_hdr))-sizeof(tpacket2_hdr)];
        struct sockaddr_ll sa_ll; // Link level address information
        uint8_t sa_ll_pad[14];    //Alignment padding
        struct ethhdr eth_h;
    } __attribute__((packed));

    struct TxFrame
    {
        struct tpacket_hdr tp_h; // Packet header
        uint8_t tp_pad[TPACKET_ALIGN(sizeof(tpacket_hdr))-sizeof(tpacket_hdr)];
//      struct vlan_ethhdr vlan_eth_h;
//      struct arp arp;
    } __attribute__((packed));

    struct ring_buff {
        struct tpacket_req req;
        size_t  size;  // mmap size
        size_t  cur_frame;
        struct iovec *ring_buffer_;
        void *buffer;  // mmap
    };

int setIfFlags(short int flags)
{
    struct ifreq    ifr;

    memset(&ifr, 0, sizeof(ifr));
    strncpy(ifr.ifr_name, if_name_.c_str(), sizeof(ifr.ifr_name));

    ifr.ifr_hwaddr.sa_family=getIfArptype();

    ifr.ifr_flags |= flags;
    if ( ioctl(socket_, SIOCSIFFLAGS, &ifr) == -1)
    {
        std::cout << "Error: ioctl(SIOSIFFLAGS) failed!" << std::endl;
        return 1;
    }
    return 0;
}

int bindSocket()
{
    struct sockaddr_ll sll;

    memset(&sll, 0, sizeof(sll));

    sll.sll_family   = AF_PACKET;
    sll.sll_protocol = htons(ETH_P_ALL);
    sll.sll_ifindex  = ifIndex_;
    sll.sll_hatype   = 0;
    sll.sll_pkttype  = 0;
    sll.sll_halen    = 0;

    if (bind(socket_, (struct sockaddr *)&sll, sizeof(sll)) < 0) {
        std::cout << "Error: bind() failed!" << std::endl;
        return 1;
    }
    return 0;
}

int packetMmap(ring_buff * rb)
{
    assert(rb);

    rb->buffer = mmap(0, rb->size, PROT_READ | PROT_WRITE, MAP_SHARED, socket_, 0);
    if (rb->buffer == MAP_FAILED) {
        std::cout << "Error: mmap() failed!" << std::endl;
        return 1; 
    }
    return 0;
}

void packetMunmap(ring_buff * rb)
{
    assert(rb);

    if (rb->buffer)
    {
        munmap(rb->buffer, rb->size);
        rb->buffer = NULL;
        rb->size = 0;
    }
}

int frameBufferCreate(ring_buff * rb)
{
    assert(rb);

    rb->ring_buffer_ =  (struct iovec*) malloc(rb->req.tp_frame_nr * sizeof(*rb->ring_buffer_));
    if (!rb->ring_buffer_) {
        std::cout << "No memory available !!!" << std::endl;
        return 1;
    }

    memset(rb->ring_buffer_, 0, rb->req.tp_frame_nr * sizeof(*rb->ring_buffer_));

    for (unsigned int i = 0; i < rb->req.tp_frame_nr; i++) {
        rb->ring_buffer_[i].iov_base = static_cast<void *>(static_cast<char *>(rb->buffer)+(i*rb->req.tp_frame_size));
        rb->ring_buffer_[i].iov_len = rb->req.tp_frame_size;
    }

    return 0;
}

void setRingBuffer(struct ring_buff *ringbuf) { rb_ = ringbuf; }

int setVlanTaggingStripping()
{
    socklen_t len;
    int val;
    unsigned int sk_type, tp_reserve, maclen, tp_hdrlen, netoff, macoff;
        unsigned int tp_hdr_len;
    unsigned int frame_size = RX_FRAME_SIZE;

    val = TPACKET_V2;
    len = sizeof(val);
    if (getsockopt(socket_, SOL_PACKET, PACKET_HDRLEN, &val, &len) < 0) {
        std::cout << "Error: getsockopt(SOL_PACKET, PACKET_HDRLEN) failed (can't get TPACKET_V2 header len on packet)" << std::endl;
                return 1;

    }
        tp_hdr_len = val;
    std::cout << "TPACKET_V2 header is supported (hdr len is " << val << ")"<< std::endl;
    std::cout << "tpacket2_hdrs header is supported (hdr len is " << sizeof(tpacket2_hdr) << ")"<< std::endl;

    val = TPACKET_V2;
    if (setsockopt(socket_, SOL_PACKET, PACKET_VERSION, &val, sizeof(val)) < 0) {
        std::cout << "Error: setsockopt(SOL_PACKET, PACKET_VERSION) failed (can't activate TPACKET_V2 on packet)" << std::endl;
        return 1;
    }
    std::cout << "TPACKET_V2 version is configured !!! " << std::endl;

    /* Reserve space for VLAN tag reconstruction */
    val = VLAN_TAG_LEN;
    if (setsockopt(socket_, SOL_PACKET, PACKET_RESERVE, &val, sizeof(val)) < 0) {
        std::cout << "Error: setsockopt(SOL_PACKET, PACKET_RESERVE) failed (can't set up reserve on packet)" << std::endl;
        return 1;
    }
    std::cout<< "Reserve space for VLAN tag reconstruction is configured !!! " << std::endl;

    return 0;
}

int setSoBufforce(int optname, int buffSize)
{
    if (setsockopt(socket_, SOL_SOCKET, SO_SNDBUFFORCE, &buffSize, sizeof(buffSize)) == -1)
    {
        std::cout << "Error: setsocketopt("<< (optname == SO_SNDBUFFORCE ? "SO_SNDBUFFORCE" : "SO_RCVBUFFORCE") << ") failed!" << std::endl;
        return 1;
    }
    return 0;
}

 createSocket(std::string ifName, INTERFACE_T ifType)
{
    if (ifName.empty())
    {
        std::cout << "Error: interface is empty!" << std::endl;;
        return NULL;
    }

    //Create the socket
    if ( (socket_ = socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL))) == -1 )
    {
        std::cout << "Error: calling socket(AF_PACKET, SOCK_RAW, htons(ETH_P_ALL)) failed!" << std::endl;
    }

    std::cout << "Creating Socket on interface= " << ifName << " to listen to ETH_P_ALL"<<std::endl;;

    s->setIfFlags(IFF_PROMISC|IFF_BROADCAST);

    //allocate space for ring buffer
    ring_buff *rb = (ring_buff *) malloc(sizeof(ring_buff));

    //  use the same size for RX/TX ring

    //set the version , here I insert the use of TPACKET_V2!
    setVlanTaggingStripping();

    rb->req.tp_block_size = RX_BLOCK_SIZE;
    rb->req.tp_block_nr   = RX_BLOCK_NUM;
    rb->req.tp_frame_size = RX_FRAME_SIZE;
    rb->req.tp_frame_nr   = RX_FRAME_NUM;

    setPacketRing(PACKET_RX_RING,&rb->req);

    rb->size = (rb->req.tp_block_size)*(rb->req.tp_block_nr);
    rb->cur_frame = 0;

    // Tweak send/rcv buffer size
    int sndBufSz = 4194304; // Send buffer in bytes
    int rcvBufSz = 4194304; // Receive buffer in bytes

    if (setSoBufforce(SO_SNDBUFFORCE, sndBufSz))
    {
      //close socket
    }

    if (setSoBufforce(SO_RCVBUFFORCE, rcvBufSz))
    {
        //close socket
    }

    // Add ARP filter so we will only receive ARP packet on this socket
    struct sock_filter BPF_code[6];
    struct sock_fprog filter;

    bindSocket();

    if (packetMmap(rb))
    {
        std::cout << "Error: mmap() failed!" << std::endl;
        //close socket
    }

    frameBufferCreate(rb);
    setRingBuffer(rb);
} 
```

在我的接收数据包函数中，我尝试读取信息，特别是 h_vlan_TCI，但我收到了 0x00 ！有什么建议么？

```
struct vlan_ethhdr* vlan_eth_h = (struct vlan_ethhdr*)&frame->eth_h

void readRawSocket(socket_)
{

    while (*(unsigned long*)rb->ring_buffer_[rb->cur_frame].iov_base)
    {
              RxFrame* frame = (RxFrame *)rb->ring_buffer_[rb->cur_frame].iov_base;
#if 0
                tpacket_hdr* h = &frame->tp_h;
                char buffer[256];
                sprintf (buffer, " -tpacket(v1): status=%ld,len=%d,snaplen=%d,mac=%d,net=%d,sec=%d,usec=%d",
                         h->tp_status, h->tp_len, h->tp_snaplen, h->tp_mac,h->tp_net, h->tp_sec, h->tp_usec);
                std::cout << std::string(buffer) << std::endl;
#else
                tpacket2_hdr* h = &frame->tp_h;
                char buffer[512];
                sprintf (buffer, " -tpacket(v2): status=%d,len=%d,snaplen=%d,mac=%d,net=%d,sec=%d,nsec=%d,vlan_tci=%d (vlan_tci=0x%04x)",
                         h->tp_status, h->tp_len, h->tp_snaplen, h->tp_mac, h->tp_net,  h->tp_sec, h->tp_nsec, h->tp_vlan_tci,  ntohs(h->tp_vlan_tci));
                std::cout << std::string(buffer) << std::endl;
#endif

        if ( ETH_P_8021Q == ntohs(frame->eth_h.h_proto) )
        {
                    struct vlan_ethhdr* vlan_eth_h = (struct vlan_ethhdr*)&frame->eth_h;
                    int vlan_tag = VLAN_TAG(ntohs(vlan_eth_h->h_vlan_TCI));
                   std::cout << " -Vlan " << vlan_tag << " packet to this host received";

                }

        rb->cur_frame = ( rb->cur_frame+1) % rx_socket_->getFrameNum();
    } // while()

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T13:56:12.520

当内核删除 vlan 时，它也会`eth_h.h_proto`在 de vlan 标记之后更改为协议，因此`ETH_P_8021Q == ntohs(frame->eth_h.h_proto)`很可能是错误的。

此外，如果您在标记接口（即 eth0.100）而不是物理接口（eth0）中监听，您将看不到标记。

# sql - 2 查询模型时的连接

> ID：14288584
> 
> 赞同：0
> 
> 时间：2013-01-11T23:58:10.340
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有这个方法可以返回属于该类别的所有类别和分组书籍

```
def self.user_categories_list
joins(:books).
select('categories.id, categories.name, count(*) AS books_count').
group('categories.id, categories.name').
order('books_count DESC')
end 
```

请原谅我的问题，但我不确定如何加入用户表以按类别获取属于用户的所有书籍，或者我可以通过属于用户的 book_id 来完成吗？

任何帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T06:11:04.577

我认为你应该有一个 where 子句：

```
def self.user_categories_list(user)
  joins(:books).
  where('books.user_id = ?', user.try(:id) || user).
  select('categories.id, categories.name, count(*) AS books_count').
  group('categories.id, categories.name').
  order('books_count DESC')
end 
```

**注意：**此代码假定您的 Book 模型`user_id`在其表中具有该属性。

# jquery - head.js 和 jQuery $.noConflict() 没有按预期工作

> ID：14288586
> 
> 赞同：1
> 
> 时间：2013-01-11T23:58:18.853
> 
> 标签：jquery, head.js

我试图弄清楚为什么会这样：

```
<script src="js/head.js"></script>
<script>head.js(<import-several-libraries-here>);</script>

<script src="code.jquery.com/jquery-1.8.3.js"></script>
<script src="code.jquery.com/ui/1.9.2/jquery-ui.js"></script>

<script>
    var j183 = $.noConflict(true);
</script> 
```

但这些不：

```
<script src="js/head.js"></script>

<script>
    head.js(<import-several-libraries-here>);
    head.js("http://code.jquery.com/jquery-1.8.3.js");
    head.js("http://code.jquery.com/ui/1.9.2/jquery-ui.js");

    var j183 = $.noConflict(true);
</script> 
```

**和**

```
<script src="js/head.js"></script>

<script>
    head.js(<import-several-libraries-here>);
    head.js("http://code.jquery.com/jquery-1.8.3.js");
    head.js("http://code.jquery.com/ui/1.9.2/jquery-ui.js");
</script>

<script>
    var j183 = $.noConflict(true);
</script> 
```

我已经阅读并尝试了变化，但无济于事：

[HeadJS 和 jQuery 用法](https://stackoverflow.com/questions/5033878/headjs-and-jquery-usage)

**更新**

我尝试了一个建议的答案：

```
head.js("http://code.jquery.com/ui/1.9.2/jquery-ui.js");
head.js("http://code.jquery.com/jquery-1.8.3.js", function() {
            var j183 = $.noConflict(true);
        }); 
```

它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:12:48.183

您需要在回调中执行依赖于通过 head.js 加载的依赖项的任何代码：

```
head.js("/path/to/jquery.js", function() {

   var j183 = $.noConflict(true);

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:25:45.027

根据[http://headjs.com/](http://headjs.com/)

也许你应该尝试这样的事情，它会加载两个 jQuery 库，然后调用匿名函数，它将 jQuery 库重新分配给全局变量以供以后使用。

```
<script src="js/head.js"></script>

<script>
    head.js(<import-several-libraries-here>);

    head.js("http://code.jquery.com/jquery-1.8.3.js", 
            "http://code.jquery.com/ui/1.9.2/jquery-ui.js", function() {

         window.j183 = $.noConflict(true);

         head.js(<import-several-libraries-here>, function(){
            init();
         });  //that depend on j183

    });

    function init(){
         var $ = window.j183;

         $('body').each(function(){
             //do something
         });

         j183('body').each(function(){
             //do something else
         });

    }
</script> 
```

**更新：**展示如何初始化库。

# html - 如何让徽标进入/覆盖屏幕顶部的黑条？

> ID：14288588
> 
> 赞同：0
> 
> 时间：2013-01-11T23:58:44.443
> 
> 标签：html, css, twitter-bootstrap

我希望将徽标延伸到将沿整个屏幕顶部运行的黑条中，如下例所示： ![我想要实现的图像示例](../Images/4c33ea2b7d3e00ffaae20d1f78b639f2.png)

我最初的想法是，有一种方法可以将 CSS 添加到正文中，只需在顶部做一个边框，类似于：

```
body {
    border-top: .5em solid #000;
} 
```

由于我不相信这是解决方案，因此我在考虑以下 HTML 的内容，但无法使其正常工作。

```
<div id="topBlackBar">
    <div class="container"><!--Per Bootstrap-->
        <div class="span2">
            <img src="img/logo.png" alt="Bachner+Co Logo" />
        </div>
    </div>
</div> 
```

但后来我不知道如何让徽标出现在它上面。

我使用 Twitter Bootstrap 2.2.2 作为构建它的框架。我宁愿主要在 CSS 中执行此操作，如果可能的话，不必使用黑色图像。

感谢大家在这方面的时间和帮助。我非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:04:01.310

怎么样：设置一个顶部边框，然后设置一个相同数量的负边距。您的图片需要是透明的，这与我在示例中使用的 Google 徽标不同。

[演示](http://jsbin.com/azesuw/2/edit/)

```
#topBlackBar {
  border-top: 50px solid #000;
}

#logoContainer {
  margin-top: -50px;
}

<div id="topBlackBar">
  <div class="container" id="logoContainer"><!--Per Bootstrap-->
    <div class="span2">
      <img src="https://www.google.com/logos/2012/birthday12-hp.jpg" alt="Bachner+Co Logo" />
  </div>
</div> 
```

# java - Java resultSet.updateRow() 不更新数据库

> ID：14288589
> 
> 赞同：2
> 
> 时间：2013-01-11T23:58:46.247
> 
> 标签：java, derby, resultset

抱歉，如果我的问题微不足道，但我是 Java 编程新手。

我有以下问题：我使用 NetBeans IDE 创建了一个 derby 数据库（我转到“服务”选项卡 -> JavaDB -> 创建数据库）。然后我创建了我的 java 项目并添加了对 derbyclient.jar 的引用。使用这些参数：

```
String host = "jdbc:derby://localhost:1527/Employees";
String username = "jarek";
String pass = "aaa"; 
```

我设法创建了 jdbc Connection，并能够使用表Employees 中的数据填充ResultSet。接下来我想使用这个结果集更新数据库，所以我写道：

```
rs.absolute(rowtoupdate);
rs.updateObject("FIRST_NAME", updatedvalue);
rs.updateRow(); 
```

一切正常（数据实际上已在数据库中更新）。

现在到我的问题。我希望将此数据库嵌入到我的应用程序中，因此我将其文件复制到项目位置的文件夹“DB”中（我复制了员工文件夹以及 derby.log 和 derby.properties）。我将项目 jar 文件中的引用从 derbyclient.jar 更改为 derby.jar。之后我使用了不同的论点：

```
String host = "jdbc:derby:DB//Employees";
String username = "jarek";
String pass = "aaa";
String driver = "org.apache.derby.jdbc.EmbeddedDriver";
Class.forName( driver );
connection = DriverManager.getConnection( url, username, password ); 
```

我再次能够使用数据库中的数据填充结果集（所以一切似乎都有效）但是当我尝试执行完全相同的更新时：

```
rs.absolute(rowtoupdate);
rs.updateObject("FIRST_NAME", updatedvalue);
rs.updateRow(); 
```

更改不会保存在数据库中。

我究竟做错了什么？这可能是由于我将数据库文件复制到我的项目位置引起的吗？但是在对 Statement 运行查询后再次 resultSet 包含来自数据库的正确数据，因此它似乎可以工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T07:33:40.890

调用 connection.commit() 解决了这个问题。

# ios - 有没有更好的方法来计算重复间隔通知的时间代码的顶部？

> ID：14288593
> 
> 赞同：0
> 
> 时间：2013-01-11T23:58:57.367
> 
> 标签：ios, objective-c, uilocalnotification, alarm, hardcode

我已经硬编码了这个小时，以帮助我在每个小时的顶部触发本地通知，但是出了点问题。不过，我不知道这是我测试它的方式、我的 Xcode 行为还是代码本身。无论如何，这是我制作的代码，请看一下，并请指导我以更简单或更好的方式编写此类代码。谢谢你。

```
NSCalendar *calendar1 = [NSCalendar currentCalendar];
NSDateComponents *components = [calendar1 components:(NSHourCalendarUnit |NSMinuteCalendarUnit | NSSecondCalendarUnit) fromDate:[NSDate date]];
hour = [components hour];
min =[components minute];
sec =[components second];
NSLog(@"hour is %i",hour);

NSLog(@"min is %i",min);

NSLog(@"sec is %i",sec);
if (hour < 24) {
 hour=hour+1;
 } else {
     hour=0; 
```

接着..

```
[[UIApplication sharedApplication] cancelAllLocalNotifications];
NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar] ;
NSDateComponents *componentsForReferenceDate = [[NSDateComponents alloc] init];
[componentsForReferenceDate setHour:hour];
[componentsForReferenceDate setMinute:0];
[componentsForReferenceDate setSecond:0];

 NSDate *fireDateOfNotification = [calendar dateFromComponents: componentsForReferenceDate];

// Create the notification 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T01:15:43.817

这里有一些事情需要考虑：

*   在询问日期时，您无需询问分钟和秒数，因为无论如何您都将它们废弃。
*   您可能应该设置一个 timeZone
*   当小时为 23 时，您将添加 1，这使 24 不正确
*   您无需创建新`NSDateComponents`对象，只需配置您拥有的对象即可

    ```
    NSCalendar *calendar = [NSCalendar currentCalendar];
    calendar.timeZone = [NSTimeZone timeZoneWithName:@"GMT"];

    NSDateComponents *components = [calendar components:NSHourCalendarUnit fromDate:[NSDate date]];
    components.hour   = (components.hour + 1) % 24;
    components.minute = 0;
    components.second = 0;

    NSDate *fireDate = [calendar dateFromComponents:components];
    NSLog(@"%@", fireDate); 
    ```

设置小时的使用`%`可以防止我们超过 23

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:09:22.683

您没有展示如何创建通知，但每小时重复一次的最佳方式是使用`NSHourCalendarUnit`重复间隔。

类型为的本地通知对象`UILocalNotification`有一个名为repeatInterval 的属性，该属性确定通知传递的重复间隔。

```
notification.repeatInterval = NSHourCalendarUnit; 
```

您的通知将根据您指定的时间每隔一小时重复一次，因此您在 中正确设置了所有内容`NSDate`，我认为只需要设置repeatInterval。

# c++ - 有没有办法在 C++ 的类之外调用基函数？

> ID：14288594
> 
> 赞同：18
> 
> 时间：2013-01-11T23:59:06.707
> 
> 标签：c++, oop

这个问题很相似，但是是关于从类内部调用函数：[如果我要覆盖它，我可以调用基类的虚函数吗？](https://stackoverflow.com/questions/672373/can-i-call-a-base-classs-virtual-function-if-im-overriding-it)

在这种情况下，您将指定`Base::function()`而不是`function()`，这将调用被覆盖的定义。

但是有没有办法在课堂之外做到这一点？我的类没有定义复制构造函数，所以我不知道如何转换为基类：

```
Base( derived_object ).function() 
```

在这里做的适当的事情是 cast `& derived_object`as`Base*`然后调用`->function()`吗？

感谢您的洞察力。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-12T00:08:11.023

尝试`derived_object.Base::function();`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-12T00:03:40.133

我相信语法：

```
derived_ptr->Base::function(); 
```

工作得很好。虽然我真的质疑你为什么要在一个不属于你的类的函数中这样做。特别是如果`function`碰巧是一个虚函数。

这是一个有问题的想法的原因是，您所做的任何使用该表示法的东西都取决于您的类的继承层次结构。此外，函数通常被重写是有原因的。你可以通过使用这种语法来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T04:27:40.597

You probably want to use pointers to member functions of a class. Those give you the ability to map different base class functions to the pointer as needed, and the ability to use it as a variable or function parameter.

The syntax for a pointer to a member function looks like

```
class Base
{
public:
    virtual bool Function();
    virtual bool OtherFunction();
};

typedef bool (Base::*)() BaseFunc; 
```

The list of caveats for using these things is a mile long- there is plenty online on how to use them (most of the answers are "don't"). However, they do give you a way of clearly binding to and calling a base class member function.

# jquery - 使用 jquery 在容器外单击时隐藏 div

> ID：14288596
> 
> 赞同：0
> 
> 时间：2013-01-11T23:59:38.023
> 
> 标签：jquery, hide, show-hide

当他们点击它时，我想隐藏一个 div。为此，我有这个完美运行的代码：

```
var box3=$(".despcnt");
box3.mouseup（函数（）{
    返回假；
});

$(this).mouseup(function (a) {
    if(!($(a.target).parent(".despcnt").length>0)){
        box3.removeClass("dino");box3.hide()
    }
});

```

但我想从课堂上排除。Despcnt 具有类 despcnt 的链接，因此当在书房外单击或关闭相同的链接时...未尝试放置它不起作用。

任何想法？

HTML

```
<a class="desplcnt" href="#">Link</a>
<div class="despcnt">
    <ul>
        <li><a data-value="1" href="#">Title</a></li>
    </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:23:17.597

```
var $despcnt = $(".despcnt"); 
```

```
/* Hide the popup whereas clicking outside */
$(document).on("click", function() {
  $despcnt.hide();
}); 
```

```
/* Don't hide the popup whereas clicking inside */
$despcnt.on("click", function(evt) {
    evt.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:23:53.803

因此，当您单击标题时，您希望隐藏链接。但是当你点击其他任何地方时，你想隐藏标题吗？如果是这样，您可以分配`Title`一个`mouseup`事件，然后从那里隐藏链接，然后`e.stopPropagation()`在`mouseup`您使用`this`. 这是一个演示：http: [//jsfiddle.net/pUnvR/1/](http://jsfiddle.net/pUnvR/1/)

这是代码：

html

```
<a class="desplcnt" href="#">Link</a>
<div class="despcnt">
 <ul>
    <li><a data-value="1" href="#">Title</a></li>
 </ul>
</div> 
```

js

```
var box3=$(".despcnt");
box3.mouseup(function (e) {
    $(".desplcnt").hide();
    e.stopPropagation();
});

$(this).mouseup(function (a) {
    if(!($(a.target).parent(".despcnt").length>0)){
        box3.removeClass("dino");
        box3.hide();
    }
}); 
```

# javascript - OpenLayers 正在发出 HTTP OPTION 请求？

> ID：14288600
> 
> 赞同：0
> 
> 时间：2013-01-12T00:00:01.070
> 
> 标签：javascript, http, openlayers, yql, gml

不久前，由于stackoverflow，我让这个小提琴工作了：http: [//jsfiddle.net/AUbZn/16/](http://jsfiddle.net/AUbZn/16/)现在它不再是了：/

似乎无论出于何种原因，请求都以 OPTION 方法发送到雅虎。这是相关部分，因为这个 url 正在被选择：

```
var layer = new OpenLayers.Layer.Vector("GML", {
strategies: [new OpenLayers.Strategy.Fixed()],
protocol: new OpenLayers.Protocol.HTTP({
    url: "http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20xml%20where%20url%3D'http%3A%2F%2Fopenlayers.org%2Fdev%2Fexamples%2Fgml%2Fpolygon.xml'",
    format: new OpenLayers.Format.GML(),
}),
eventListeners: {
    "featuresadded": dataLoaded
},
}); 
```

知道为什么以及如何纠正它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:46:28.043

找到了解决方案:)

在此示例之后使用 OpenLayers.Protocol.Script 而不是 OpenLayers.Protocol.HTTP：http: [//openlayers.org/dev/examples/cross-origin-xml.html](http://openlayers.org/dev/examples/cross-origin-xml.html)

工作代码：

```
var layer = new OpenLayers.Layer.Vector("GML", {
    strategies: [new OpenLayers.Strategy.Fixed()],
    protocol: new OpenLayers.Protocol.Script({
        url: "http://query.yahooapis.com/v1/public/yql",
        params: {
            q: "select * from xml where url='http%3A%2F%2Fopenlayers.org%2Fdev%2Fexamples%2Fgml%2Fpolygon.xml'",
        },
        format: new OpenLayers.Format.GML(),
        parseFeatures: function(data) {
            return this.format.read(data.results[0]);
        },
    }),
    eventListeners: {
        "featuresadded": featuresLoaded
    },
}); 
```

# javascript - 以编程方式显示 SVG 工具提示

> ID：14288601
> 
> 赞同：1
> 
> 时间：2013-01-12T00:00:02.327
> 
> 标签：javascript, html, svg, tooltip

我有一个 svg:circle，它下面有一个 svg:title 元素，这样标题就显示为圆的工具提示。如何以编程方式（使用 javascript）显示和隐藏此工具提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T12:21:24.583

由于标题元素本身不能以编程方式显示，因此您必须创建一个`<text>`元素并适当地定位它。由于文本没有背景，您要么需要创建一个`<rect>`作为背景，要么使用过滤器来绘制背景。此外，目前没有可靠的跨浏览器换行（除非您使用 HTML `<foreignObject>`）。

所以，这里有一个粗略的建议作为起点：

```
<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
  <filter x="0" y="0" width="1" height="1" id="tooltipBackground">
     <feFlood flood-color="rgba(200,200,200,.5)"/>
     <feComposite in="SourceGraphic"/>
  </filter>

  <circle r="50" cx="100" cy="100">
    <title>my tooltip</title>
  </circle>

  <script type="text/javascript">
    function showCircleTooltip(circle) {
      var title = circle.getElementsByTagName("title")[0];
      if (title) {
        var tooltip = document.createElementNS("http://www.w3.org/2000/svg","text");
        tooltip.textContent = title.textContent;
        tooltip.setAttribute("filter","url(#tooltipBackground)");
        // We're putting the tooltip at the same place as the circle center.
        // Modify this if you prefer different placement.
        tooltip.setAttribute("x",circle.getAttribute("cx"));
        tooltip.setAttribute("y",circle.getAttribute("cy"));
        var transform = circle.getAttribute("transform");
        if (transform) {
          tooltip.setAttribute("transform",transform);
        }
        circle.parentNode.insertBefore(tooltip, circle.nextSibling);
      }
    }

    showCircleTooltip(document.getElementsByTagName("circle")[0])
  </script>
</svg> 
```

[在 Tinkerbin 上试用](http://tinkerbin.com/iXtB2wE5)。

# php - 尝试解决查询中有关 ORDER BY 的问题

> ID：14288602
> 
> 赞同：1
> 
> 时间：2013-01-12T00:00:03.237
> 
> 标签：php, mysql

我已经创建了一个从查询中填写的*HTML 表，并将查询设置为按**降序排序，*但是查询运行并且结果显示在表中我无法获取运行*降序*的日期。

数据库已为名为 walk_date 的日期字段正确设置。我也习惯`strtotime`将日期排序为人类友好。

> 05.10.2012
> 07.10.2012
> 18.08.2012
> 21.10.2012
> 22.09.2012

这是他们出来的顺序，以下是我的代码：

```
<h1>A Photographic Diary</h1>
    <p>&nbsp;</p>

<div id="about-text">

<p>All walks are listed in order with the latest at the top. Walks can be filtered by area using the drop-down box. The abbreviated Area ID's are as follows:<br/>
YD  -   Yorkshire Dales<br/>
LD  -   Lake District<br/>
FB  -   Forest of Bowland<br/>
WPM -   West Pennine Moors<br/>
PD  -   Peak District<br/>
LOC -   Local<br/>
O   -   Other<br/></p>
</div>
 <!--Selects walk area -->
<br /> <form id="form1" name="form1" method="post" action="walk_results.php">
<label>Area</label>
<select name="area_id">
<option value="">All</option>

<?php
$sql_result = mysql_query("SELECT * FROM walk GROUP BY area_id ORDER BY walk_date DESC");
while ($row = mysql_fetch_assoc($sql_result)) {
        echo "<option value='".$row["area_id"]."'".($row["area_id"]==$_REQUEST["area_id"]? " selected" : "").">".$row["area_id"]."</option>";
};

?>
<!-- Submits walk area -->
</select>
  </label>

  <input type="submit" name="button" id="button" class="styled-button" value="Select Area" /></form> 
   <style type="text/css">
   .styled-button {
    -webkit-box-shadow:rgba(0,0,0,0.2) 0 1px 0 0;
    -moz-box-shadow:rgba(0,0,0,0.2) 0 1px 0 0;
    box-shadow:rgba(0,0,0,0.2) 0 1px 0 0;
    border-bottom-color:#333;
    border:1px solid #6470ED;
    background-color:#6470ED;
    border-radius:3px;
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    color:#fff;
    font-family:Verdana, Arial, Helvetica, sans-serif;
    font-size:12px;
    text-shadow:#b2e2f5 0 1px 0;
    padding:2px
}

  </style>
</select>
  </label>  

<!-- Walk area results table -->
<div id= "result">
<br /><br />
<table width="900" border="1" cellspacing="1" cellpadding="4">
  <tr>
    <td width="84" bgcolor="#6470ED" align="center"><strong>Select Walk</strong></td>
    <td width="75" bgcolor="#6470ED" align="center"><strong>Walk Date</strong></td>
    <td width="360" bgcolor="#6470ED" align="center"><strong>Title</strong></td>
    <td width="64" bgcolor="#6470ED" align="center"><strong>Distance (Miles)</strong></td>
    <td width="85" bgcolor="#6470ED" align="center"><strong>Ascent</strong></td>
    <td width="78" bgcolor="#6470ED" align="center"><strong>Time</strong></td>
    <td width="67" bgcolor="#6470ED" align="center"><strong>Area Id</strong></td>
  </tr>

<?php

if ($_REQUEST["area_id"]<>'') {
    $search_area_id = "AND area_id='".mysql_real_escape_string($_REQUEST["area_id"])."'";
}

if ($_REQUEST["from"]<>'' and $_REQUEST["to"]<>''){

}

else {
    $sql = "SELECT * FROM walk  WHERE walk_id>\"\"".$search_string.$search_area_id ;

}

$sql_result= mysql_query ($sql) or die ('request"Error"'.$sql);
#echo "SQL $sql";  --- to view info ---

$clicked =$_REQUEST["area_id"];
$sql= "SELECT * FROM walk  WHERE area_id = '$clicked'";

if (mysql_num_rows($sql_result)>0) {

    while ($row = mysql_fetch_assoc($sql_result)) {
    $id = $row['walk_id'];
    $date_of_walk = $row['walk_date']; 
    $date_of_walk = date("d.m.Y", strtotime($date_of_walk));
#echo "id $id<br>";  --- to view info ---

?>  
<!-- Table Results -->
  <tr>
    <td><?php echo "<a href='walk_info.php?walk_id=$id'>Select Walk"?></a></td>
    <td><?php echo $row['walk_date']=$date_of_walk;?></td>
    <td><?php echo $row["title"]; ?></td>
    <td><?php echo $row["distance"]; ?></td>
    <td><?php echo $row["ascent"]; ?></td>
    <td><?php echo $row["time"]; ?></td>
    <td><?php echo $row["area_id"]; ?></td>
  </tr>

<?php
    }
} else {  

$row= mysql_fetch_assoc($sql_result);$sql_result= mysql_query ($sql);
?>
<tr><td colspan="5">No results found.</td>
<?php   
 }
mysql_close()?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:10:45.820

如果您将日期存储为标准 MySQL 日期格式 (YYYY-MM-DD)，那么使用 SQL 就可以轻松完成。只需将子句中的`DESC`关键字与字段一起使用：`ORDER BY``walk_date`

```
 SELECT *
     FROM table_name
 ORDER BY walk_date DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:10:34.513

更改使用`DESC`查询中的关键字。

例如，如果这是您的查询

```
Select someDate from someTable ORDER BY someDate 
```

将其更改为

```
Select someDate from someTable ORDER BY someDate DESC 
```

编辑：好的，现在您已经显示了您的代码。以下是将上述内容应用于您的确切查询的方法

```
SELECT * FROM walk WHERE walk_id ORDER BY walk_date={...} DESC 
```

这里的所有都是它的。

# c - “volatile void function(...)”有什么作用？

> ID：14288603
> 
> 赞同：23
> 
> 时间：2013-01-12T00:00:13.780
> 
> 标签：c, function, aes, volatile, void

从语法的角度来看，我已经看到[“volatile”关键字在 C++ 函数中有多少用法？](https://stackoverflow.com/questions/7643528/how-many-usage-does-volatile-keyword-have-in-c-function-from-grammar-perspe)关于在函数上使用 volatile 关键字，但没有明确解释该问题中的案例 1 做了什么。只有一位受访者表示这似乎毫无意义/无用。

然而我不能完全接受这种说法，因为 GNUC 的 AES 软件实现已经使用了多年，并且它们具有许多如下功能：

```
INLINE volatile void functionname( /* ... */ ) {
    /* ... */
    asm( /* ... */ ) // embedded assembly statements
    /* ... */
} 
```

这种用法一定是有原因的。任何人都可以：

**一个**。告诉我原来的原因是什么；和

**乙**。现在如何达到预期的效果？

我正在使用 Ubuntu 和 GCC 4.6.3。

* * *

*注意：* 我最接近的解释是在 GCC 2.5 之前，您可以通过以下方式欺骗在 2.5 中实现的“noreturn”属性：

```
void fatal( /* ... */ ) { /* ... */ exit(1); }

typedef void voidfn ();

volatile voidfn fatal; 
```

这将允许编译器识别“致命”不会返回。

但这种情况似乎不适用于 AES 代码。我已经很久没有在装配中做任何事情了，但我想我会认出跳跃或类似的东西。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T00:56:51.743

根据[gcc 文档（直到 2015 年 2 月）](https://web.archive.org/web/20150210170435/http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#index-g_t_0040code_007bnoreturn_007d-function-attribute-2626)， `volatile void`作为 C （但不是 C++）中的函数返回值等同`__attribute__((noreturn))`于函数，并告诉编译器该函数永远不会返回。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-12T00:18:23.967

C99 标准在 §6.7.3/3 中说明了这一点：

> 与限定类型关联的属性仅对作为左值的表达式有意义。^(114))
> 
> 114) 实现可能会放置一个`const`不在`volatile`只读存储区域中的对象。此外，如果从未使用过此类对象的地址，则实现不需要为此类对象分配存储空间

§6.2.5/19 说：

> 该`void`类型包含一组空值；它是一个不完整的类型，无法完成。

§6.3.2.1/1 说：

> *左值*是具有对象类型或不完整类型的表达式，而不是`void`; ^(53)) [...]

因此，`void`不是左值，因此类型限定符（`const`、、`volatile`和`restrict`）对于类型的表达式没有意义`void`。因此，在任何符合 C99 的编译器中，`const void`and`volatile void`都是没有意义的（尽管*指向*`const void`and`const volatile` *的指针是*有意义的）。

此外，§6.9.1/3 的约束不允许函数返回限定类型`void`：

> 函数的返回类型应该是`void`数组类型以外的对象类型。

由于这是一个约束，因此符合要求的编译器*必须*发出诊断（§5.1.1.3/1）。`volatile void`所以在 C99 中不允许函数返回。

至于`volatile void`可能曾经做过什么，我不知道，也无法真正推测。我猜你正在查看的 AES 代码可能只是有一些从未清理过的旧代码。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-14T19:21:20.573

# 参考

*   [https://github.com/nmoinvaz/minizip/blob/master/aes/aes_via_ace.h](https://github.com/nmoinvaz/minizip/blob/master/aes/aes_via_ace.h) 请参见第 323 到 333 行和第 399 到 492 行。还有很多其他地方可以找到此代码，这只是第一个我绊倒了。

*   [http://www.open-std.org/jtc1/sc22/wg14/docs/rr/dr_113.html](http://www.open-std.org/jtc1/sc22/wg14/docs/rr/dr_113.html) 谢谢@ouah！

*   [http://opencores.org/ocsvn/openrisc/openrisc/trunk/gnu-old/binutils-2.18.50/gas/testsuite/gas/i386/padlock.d](http://opencores.org/ocsvn/openrisc/openrisc/trunk/gnu-old/binutils-2.18.50/gas/testsuite/gas/i386/padlock.d) 搜索“f3 0f a7”，然后将操作码标识为专门的加密操作。

*   GCC 的“信息”文档。

# 证据

*   `volatile void function(...)`不严格符合 C99。（感谢@Adam 和@ouah。@Adam 深入研究 C99 规范，@ouah 将我指向上面列出的 DR。）

*   GCC`__attribute__((noreturn))`在 2.5 版中`volatile void`作为`volatile void`. （GCC 文档。）

*   上面引用的代码确实将控制权返回到调用它的位置，因为这些指令似乎没有操纵地址寄存器，也没有执行跳转命令。相反，它们将各种值加载到 32 位寄存器中。（代码检查。）

*   第 323 到 333 行中的命令实现了支持加密操作的特殊操作码。（密码检查加上“挂锁”密码。）

*   使用汇编函数的代码显然希望它们返回。（代码检查。）

*   该`noreturn`属性告诉编译器该函数不会返回，因此编译器可以基于此进行优化。（GCC 文档。）

*   来自 GCC 文档：不要假设调用函数保存的寄存器在调用 noreturn 函数之前已恢复。

# 解决方案

这是与一位同事的讨论，最终让我明白了。当一个函数声明它不会返回时，编译器必须做一些不同的事情。对 GCC 文档的检查证实了这一点。

## A. 原由

你需要问自己以下问题。

**问：** AES 代码专门将值加载到 32 位寄存器中，并对它们执行操作。***它如何将答案返回到代码的其余部分？***

**回答：** GCC 优化意味着调用函数的寄存器，否则会在返回时覆盖值，不会被保存。汇编语言函数中的计算结果保留在寄存器中以供后续代码使用。

## B. 现在达到预期效果：

几乎不管它。您唯一可以做的就是用 simple 替换`volatile void`返回类型`void`，并将`noreturn`属性添加到函数中。从理论上讲，这应该具有完全相同的效果。在实践中，它没有坏，不要修复它。

# 愿望

绝对不鼓励广泛使用这种技术。首先，它取决于每个编译器的定制。其次，这取决于那些编译器不会改变他们处理“不返回”情况的方式。第三，它可能会让后续的维护者感到困惑。

唯一有意义的情况是，当您利用高度专业化的机器代码来实现原本不可能的速度提升时。即便如此，也应该权衡取舍。

在这个例子中，正好支持两个编译器，并且只有当机器有特定的硬件支持可以利用时。否则，这一切都通过标准 C 代码处理。这是一个很大的努力。在你做之前确保它会得到回报。

# php - Javascript - 不受欢迎的警报框行为

> ID：14288604
> 
> 赞同：-2
> 
> 时间：2013-01-12T00:00:25.700
> 
> 标签：php, javascript, html

我在一个包含两个单选按钮的网站上有一个简单的表单，并且我添加了一些 Javascript 表单验证，用于在没有单击这两个单选按钮时进行。（谢谢）但是，当用户单击确定按钮时，页面将重定向到表单的“处理”页面。当用户单击警报框中的“确定”按钮时，我更喜欢仅重新加载页面或关闭警报框的行为。

要进一步了解我在说什么，您可以访问 chrisrjones.com，它应该会将您重定向到 chrisrjones.com/splash.php，然后单击 Enter。（不选择单选按钮）应该会出现一个警告框，一旦*按下*确定按钮，页面就会重定向到表单处理页面（不是我想要的）。

```
<!DOCTYPE html>

<html lang="en">

<head>
<title>chrisRjones.com - Splash</title>

 <?php
function getImagesFromDir($path) {
    $images = array();
    if ( $img_dir = @opendir($path) ) {
        while ( false !== ($img_file = readdir($img_dir)) ) {
            // checks for gif, jpg, png
            if ( preg_match("/(\.gif|\.jpg|\.png)$/", $img_file) ) {
                $images[] = $img_file;
            }
        }
        closedir($img_dir);
    }
    return $images;
}

function getRandomFromArray($ar) {
    mt_srand( (double)microtime() * 1000000 ); // php 4.2+ not needed
    $num = array_rand($ar);
    return $ar[$num];
}

/////////////////////////////////////////////////////////////////////
// This is the only portion of the code you may need to change.
// Indicate the location of your images 

$root = '';
// use if specifying path from root
//$root = $_SERVER['DOCUMENT_ROOT'];

$path = 'pics/';

// End of user modified section 
/////////////////////////////////////////////////////////////////////

// Obtain list of images from directory 
$imgList = getImagesFromDir($root . $path);
$img = getRandomFromArray($imgList);
?> 

<!-- begin google analytics PHP include -->

<?php include_once("analyticstracking.php") ?>

<!-- end google analytics PHP include -->

<!-- Javascript radiobutton form validation -->

<script type="text/javascript">
function valForm(form) {
    var btn1 = parseInt(form.splash.value, 10) || 0;
    btn = (btn1 )
    if (btn < 3) {
        alert('You either like splash pages or hate em, choose one ...please');
        return false; }
    else {
     alert('Button value ' + btn + ' selected');
    }
}
</script>

<!-- Javascript radiobutton form validation END -->

</head>

<body>
<img src="<?php echo $path . $img ?>" alt="" width="640" height="auto"  />
<h1>Hello Javascript redirection.</h1><br />
<p>

<form name="tosplashornottosplash" action="splash-process.php" method="post">
Splash pages are stupid 

<input type="radio" name="splash" value="false" /> No
<input type="radio" name="splash" value="true" /> Yes

<input type="submit" name="formSubmit" onClick="valForm(tosplashornottosplash)" value="Enter" />
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:03:19.040

在您想留在同一页面上的情况下，从 valform 返回 false。

例如：

```
function valForm(form) {
var btn1 = parseInt(form.splash.value, 10) || 0;
btn = (btn1 )
if (btn < 3) {
   alert('You either like splash pages or hate em, choose one ...please');
   return false;
}
else {
     alert('Button value ' + btn + ' selected');
} 
} 
```

您可能还需要更改您的标记，如下添加`return`语句。

```
<input type="submit" value="Enter" onclick="return valForm(tosplashornottosplash)" name="formSubmit"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:04:22.373

你只需要`return false`在那里做一个防止默认操作。

```
function valForm(form) {
    var btn1 = parseInt(form.splash.value, 10) || 0;
    btn = (btn1 )
    if (btn < 3) { 
        alert('You either like splash pages or hate em, choose one ...please');
        return false;
    } else {
        alert('Button value ' + btn + ' selected');
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T00:07:03.380

你可以使用 JQuery。

```
function valForm(){
  if (!$("input[name=splash]:selected").length)
    alert('please select');
    return false;
  } else { return true; }
} 
```

# r - 随机抽样网格不替换

> ID：14288607
> 
> 赞同：2
> 
> 时间：2013-01-12T00:00:35.573
> 
> 标签：r, random, sampling

我想随机抽取一个数据集而不进行替换，并认为这很容易。对我来说不幸的是它不是，我无法在互联网上找到 R 代码来做到这一点。最终我得到了这个代码工作。它似乎过于复杂，但似乎确实有效。

```
set.seed(1234)

n.samples <- 10

my.grid <- read.table(text = '
state county y2000 y2001 y2002 y2003 y2004 y2005 y2006
  A      A      5    10    15    20    25    30    35
  A      B     15    20    25    30    35    40    45
  A      C     45    40    35    30    25    20    15
  A      Q      1     2     3     4     5     6     7
  B      A      9     8     7     6     5     4     3 
  B      B     90    91    92    93    94    95    96
  B      G     10    20    30    40    50    60    70
  B      H    100   200   300   400   500   600   700
  C      J    900   850   800   750   700   650   600
  C      K      2     4     6     8    10    12    14
  C      M      3     6     9    12    15    18    21
  C      P     50    45    40    35    30    25    20
', header = TRUE)

my.grid

population <- expand.grid(row  = c(seq(1,nrow(my.grid))), 
                          col  = c(seq(3,ncol(my.grid))))

rows <- seq(1, nrow(population))

sample <- sample(rows, n.samples, replace=FALSE)

use.these <- population[sample,]
use.these

measurement <- rep(NA, nrow(use.these))
my.area     <- my.grid[use.these[,1], c(1:2)]
my.year     <- names(my.grid)[use.these[,2]]

for(i in 1:nrow(use.these)) {

   measurement[i] <- my.grid[use.these[i,1], use.these[i,2]]

}

my.samples <- data.frame(use.these, my.area, my.year, measurement)
my.samples 
```

输出`my.samples`：

```
 row col state county my.year measurement
10  10   3     C      K   y2000           2
52   4   7     A      Q   y2004           5
50   2   7     A      B   y2004          35
51   3   7     A      C   y2004          25
69   9   8     C      J   y2005         650
81   9   9     C      J   y2006         600
1    1   3     A      A   y2000           5
18   6   4     B      B   y2001          91
79   7   9     B      G   y2006          70
39   3   6     A      C   y2003          30 
```

有没有更好的方法，特别是在基地？我听说过这个`sampling`包裹。由于我的代码似乎可以工作，而且我只是在寻求可能的更好方法，也许我不应该在此处发布此内容，尽管它似乎是一个常见且重要的主题。如果这不是一个合适的帖子，我可以删除它并将代码放在我的维基百科用户页面上。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:45:14.247

将年份列转换为矩阵；来自 row * col ( = length ) 的样本作为索引。使用 1+(idx %/% nrow(.)) 作为原始行的索引，使用 1 + (idx %% ncol(.)) 作为年份名称的索引。那么你将不需要“没有 steenking 循环”。这是一个非常好的问题，也许可以让你超越循环思维。

```
set.seed(1234)
n.samples <- 10
 size <- length(mat); picks <- sample(size, n.samples)
 picks
# [1] 10 52 50 51 69 81  1 18 79 39
 cbind(my.grid[ 1+(picks %/% nrow(my.grid) ), 1:2] , 
       names(my.grid)[-(1:2)][1+(picks %% 7)],  
       mat[picks])
#---------------------------------------
    state county names(my.grid)[-(1:2)][1 + (picks%%7)] mat[picks]
1       A      A                                  y2003          2
5       B      A                                  y2003          5
5.1     B      A                                  y2001         35
5.2     B      A                                  y2002         25
6       B      B                                  y2006        650
7       B      G                                  y2004        600
1.1     A      A                                  y2001          5
2       A      B                                  y2004         91
7.1     B      G                                  y2002         70
4       A      Q                                  y2004         30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:30:23.487

当我尝试使用 DWin 的答案时，我意识到它返回了正确的`measurement`，但似乎没有返回正确的`state`，`county`或者`year`. 我修改了 DWin 的代码如下，它似乎返回了与我原始帖子中的代码相同的答案。我与自己争论是写评论还是发布第二个答案。如果其他人在 DWin 审核后认为合适，我可以删除此答案。

```
set.seed(1234)

n.samples <- 10

my.grid <- read.table(text = '
state county y2000 y2001 y2002 y2003 y2004 y2005 y2006
  A      A      5    10    15    20    25    30    35
  A      B     15    20    25    30    35    40    45
  A      C     45    40    35    30    25    20    15
  A      Q      1     2     3     4     5     6     7
  B      A      9     8     7     6     5     4     3 
  B      B     90    91    92    93    94    95    96
  B      G     10    20    30    40    50    60    70
  B      H    100   200   300   400   500   600   700
  C      J    900   850   800   750   700   650   600
  C      K      2     4     6     8    10    12    14
  C      M      3     6     9    12    15    18    21
  C      P     50    45    40    35    30    25    20
', header = TRUE)

my.grid

mat <- as.matrix(my.grid[,3:ncol(my.grid)])
mat

size <- length(mat)

picks <- sample(size, n.samples)
picks

# [1] 10 52 50 51 69 81  1 18 79 39

my.column <- 2 + (1 + (picks %/% (nrow(my.grid))))
my.row    <- picks - (picks %/% nrow(mat)) * nrow(mat)

my.samples2 <- cbind(my.row, my.column, my.grid[my.row, 1:2], names(my.grid)[my.column], mat[picks])
names(my.samples2) <- c('row','column','state','county','year','measurement')
my.samples2 
```

给出：

```
 row column state county  year measurement
10   10      3     C      K y2000           2
4     4      7     A      Q y2004           5
2     2      7     A      B y2004          35
3     3      7     A      C y2004          25
9     9      8     C      J y2005         650
9.1   9      9     C      J y2006         600
1     1      3     A      A y2000           5
6     6      4     B      B y2001          91
7     7      9     B      G y2006          70
3.1   3      6     A      C y2003          30 
```

# java - 未调用 App Engine Blobstore 回调并返回 302

> ID：14288610
> 
> 赞同：2
> 
> 时间：2013-01-12T00:00:38.643
> 
> 标签：java, google-app-engine, rest, blobstore

我正在尝试在 Google App Engine 上创建一个允许将视频上传到 Blobstore 的 REST API。在我的本地开发服务器上一切正常，但在部署到 GAE 时失败。在 GAE 上，它存储视频，但不调用我的回调 URL。相反，它返回一个 302，并将位置标头设置为我的回调 URL。我尝试从客户端手动访问回调 URL，但 GAE 然后抛出异常：`java.lang.IllegalStateException: Must be called from a blob upload callback request`. 我正在使用 Spring MVC。

## 客户端上传代码：

```
/**
 * URL has been generated by going to /game/{gameId}/video
 */
private void uploadVideo(String uploadUrl) throws Exception {
    HttpClient httpClient = new DefaultHttpClient();
    httpClient.getParams().setBooleanParameter(ClientPNames.HANDLE_REDIRECTS, false);
    HttpPost post = new HttpPost(uploadUrl);
    MultipartEntity mp = new MultipartEntity();
    File video = new File("src/test/resources/video.mp4");
    assertTrue("Couldn't find video file.", video.exists());
    mp.addPart("video", new FileBody(video));
    post.setEntity(mp);
    HttpResponse resp = httpClient.execute(post);
    //Getting 302 here.
    assertEquals("Unexpected HTTP status code.", 200, resp.getStatusLine().getStatusCode());
} 
```

## 服务器代码：

```
private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

/**
 * Create a video entity and generate an upload URL.
 */
@RequestMapping(value = "/game/{gameId}/video", method=RequestMethod.POST)
@ResponseBody
public VideoMeta createVideo(@PathVariable Long gameId, @RequestBody VideoMeta meta, Principal auth) {
    //Omitted authentication and video creation logic

    //Get blobstore upload URL.  Callback is /video/{videoId}/blob.
    String uploadUrl = blobstoreService.createUploadUrl("/video/" + video.getId() + "/blob");

    //Create response
    VideoMeta videoMeta = new VideoMeta();
    videoMeta.setVideoId(video.getId());
    videoMeta.setUploadUrl(uploadUrl);
    return videoMeta;
}

/**
 * This method is never called on GAE!
 */
@RequestMapping(value = "/video/{videoId}/blob", method=RequestMethod.POST)
@ResponseBody
public VideoMeta uploadVideo(@PathVariable Long videoId, HttpServletRequest req) {
    Map<String, List<BlobKey>> blobs = blobstoreService.getUploads(req);
    List<BlobKey> blobKeys = blobs.get("video");
    blobstoreService.getByteRange(req);

    int numBlobs = blobKeys.size();
    if(numBlobs != 1) {
        throw new RestException(HttpServletResponse.SC_NOT_ACCEPTABLE, "You should upload exactly one blob.");
    }
    BlobKey blobKey = blobKeys.get(0);

    //Omitted video update logic

    VideoMeta videoMeta = new VideoMeta();
    videoMeta.setVideoId(video.getId());
    return videoMeta;
} 
```

# php - PHP随机变量集

> ID：14288612
> 
> 赞同：0
> 
> 时间：2013-01-12T00:01:26.667
> 
> 标签：php, variables

我将如何设置 PHP 在这两组变量之间随机选择使用：

```
$key = goop;
$john = heck yeah; 
```

和这个

```
$key = roop;
$john = reck reah; 
```

非常感谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:04:12.097

例如：

```
if ( rand(0,1) )
{
    $key = "goop";
    $john = "heck yeah";
}
else
{
    $key = "roop";
    $john = "reck reah";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:05:15.180

我建议使用数组：

```
$selection = array(
    array('goop', 'heck yeah'),
    array('roop', 'reck reah')
);

shuffle($selection);

list($key, $john) = array_pop($selection); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:04:54.850

将值存储在数组中，然后用于`rand()`生成值：

```
$key_vals = array('goop', 'roop', 'toop');
$john_vals = array('heck yeah', 'reck reah', 'leck leah');

$key = $key_vals[rand(0, (count($key_vals) - 1))];
$john = $john_vals[rand(0, (count($john_vals) - 1))]; 
```

您可以通过将值添加到相应的数组并增加最大随机数（即 中的第二个参数`rand()`）来轻松扩展它。

# python - 在 couchdbkit 中解析

> ID：14288615
> 
> 赞同：0
> 
> 时间：2013-01-12T00:01:38.797
> 
> 标签：python, django, parsing, couchdbkit

从 couchdb 检索到的数据如下：

```
{'value': 'UMMC', 'id': 'ef688c440131f59262f2c4f80d001c87', 'key': 'ef688c440131f59262f2c4f80d001c87'}
{'value': 'test', 'id': 'fc2c556010c5167c4a32a7ea4d001d8b', 'key': 'fc2c556010c5167c4a32a7ea4d001d8b'}
{'value': 'Travis', 'id': 'fc2c556010c5167c4a32a7ea4d02889d', 'key': 'fc2c556010c5167c4a32a7ea4d02889d'}
{'value': 'testing', 'id': 'fc2c556010c5167c4a32a7ea4d02b3f8', 'key': 'fc2c556010c5167c4a32a7ea4d02b3f8'} 
```

我正在使用以下代码来提取数据

```
projects = db.view('projects/name') 
```

我的问题是：我可以以任何方式解析该输出以便只有测试、UMMC、Travis、测试

我查看了[couchdbkit 文档](http://couchdbkit.org/docs/api/couchdbkit.client.ViewResults-class.html)中的 viewresults 对象，但没有找到任何可以帮助解析该输出的有用属性或函数。我想知道我可以使用什么。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:10:39.647

使用`json`模块，例如：

```
import json
obj = json.loads("{'value': 'UMMC', 'id': 'ef688c440131f59262f2c4f80d001c87', 'key': 'ef688c440131f59262f2c4f80d001c87'}")
# now obj["value"] == "UMMC"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T04:44:13.097

感谢每一个人的帮助。

在我的views.py中，我有以下内容：

```
projects = db.view('projects/name') 
```

我试图在我的 django 模板 base_site.html 中显示“值”属性的内容

```
{'value': 'UMMC', 'id': 'ef688c440131f59262f2c4f80d001c87', 'key': 'ef688c440131f59262f2c4f80d001c87'} 
```

所以我做了：

```
{%for p in projects%}
   <td>{{p.value }} </td>
{% endfor %} 
```

它准确地显示了“价值”属性的内容，再次感谢，您的反馈真的指导了我。

# json - AngularJS、MVC4、Web API、Json 反序列化 $ref

> ID：14288616
> 
> 赞同：2
> 
> 时间：2013-01-12T00:01:39.460
> 
> 标签：json, asp.net-mvc-4, angularjs, asp.net-web-api

通过 HttpResponseMessage MVC4 成功发送了一个 AngularJs 控制器 $scope 的 GetAllFolders()。

**集合中的文件夹除其他外还有与 Photo 类的关联。**

**文件夹可以是其他文件夹的文件夹（自引用）。**

从 MVC4 端调试显示一切正常，并返回了正确的详细信息。

但是通过 Angular/Json，某些属性是 $ref 标签，看不到，例如：

![在此处输入图像描述](../Images/5dd72822721133637b4d2c537fc9c26d.png)

当我知道图像名称已经在第一个响应中发送时，我不太关心在 FkPhotoId 上创建方法调用并点击服务器获取图像名称。

有任何想法吗？

**更新：解决方案**

此代码已添加到 global.asax 中：（确保在 start 方法中引用它）

```
 public static void ConfigureApi(HttpConfiguration config)
    {
        var json = config.Formatters.JsonFormatter;
        config.Formatters.Remove(config.Formatters.XmlFormatter);
        config.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore; 
    } 
```

![在此处输入图像描述](../Images/bebd4616f03e3ebc75ef939f9657886d.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T20:50:37.447

来自 OP 的解析（housecleaning - 标记所以可以标记已回答）此代码已添加到 global.asax 中：（确保在 start 方法中引用它）

```
public static void ConfigureApi(HttpConfiguration config)
{
    var json = config.Formatters.JsonFormatter;
    config.Formatters.Remove(config.Formatters.XmlFormatter);
    config.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-14T22:49:16.957

我厌倦了看到这个答案“只是禁用一些东西并解决它。” 这是懒惰的，它是错误的，并且难以置信地减少了保留这些数据的用处。

这是一个三部分的答案。第一部分是禁用集合引用并仅保留对象。

就我而言，我想不出我会共享集合引用并且附加代码很混乱的情况。如果您需要收集参考，请编写消费 FE 逻辑。不要只是禁用它。只是碰巧我不需要它。

```
config.Formatters.JsonFormatter.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Serialize;
config.Formatters.JsonFormatter.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects;
config.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver(); 
```

第二部分在这里。我从另一个答案中得到了这个，并添加了一个缺少的调整。（这是[来自 JSON 对象的原始 Resolve 循环引用](https://stackoverflow.com/questions/15312529/resolve-circular-references-from-json-object)）：

```
function resolveReferences(json) {
    if (!json)
        return json;

    if (typeof json === 'string')
        json = JSON.parse(json);

    var byid = {}, // all objects by id
        refs = []; // references to objects that could not be resolved
    json = (function recurse(obj, prop, parent) {
        if (typeof obj !== 'object' || !obj) // a primitive value
            return obj;
        if (Object.prototype.toString.call(obj) === '[object Array]') {
            for (var i = 0; i < obj.length; i++)
                // check also if the array element is not a primitive value
                if (typeof obj[i] !== 'object' || !obj[i]) // a primitive value
                    continue;
                else if ("$ref" in obj[i])
                    obj[i] = recurse(obj[i], i, obj);
                else
                    obj[i] = recurse(obj[i], prop, obj);
            return obj;
        }
        if ("$ref" in obj) { // a reference
            var ref = obj.$ref;
            if (ref in byid)
                return byid[ref];
            // else we have to make it lazy:
            refs.push([parent, prop, ref]);
            return;
        } else if ("$id" in obj) {
            var id = obj.$id;
            delete obj.$id;
            if ("$values" in obj) // an array
                obj = obj.$values.map(recurse);
            else // a plain object
                for (var prop in obj)
                    obj[prop] = recurse(obj[prop], prop, obj);
            byid[id] = obj;
        }
        return obj;
    })(json); // run it!

    for (var i = 0; i < refs.length; i++) { // resolve previously unknown references
        var ref = refs[i];
        ref[0][ref[1]] = byid[ref[2]];
        // Notice that this throws if you put in a reference at top-level
    }
    return json;
}
```

第二部分是在发回数据之前重新处理和重新建立循环依赖关系。我的 FE 是一个有角度的应用程序，所以我个人在 ajax 帖子之前在注入的 HTTP 拦截器中调用它。（注意我正在检查一个名为“typeName”的属性，因为所有具有该属性的对象都被假定为将是在后端反序列化）。

```
function processReferenceEstablishment(data) {
    if (!data || typeof (data) === 'function')
        return undefined;

    var processData = [];
    var tiers = {};
    var refKey = 1;
    if (Array.isArray(data)) {
        data = jQuery.extend([], data);
    } else {
        data = jQuery.extend({}, data);
    }

    var retVal = (function recurse(obj, tier) {
        tiers[tier] = tiers[tier] || {};
        tiers[tier].width = tiers[tier].width ? tiers[tier].width + 1 : 1;
        if (obj) {
            if (typeof obj !== 'object' || typeof (obj) === 'function') {
                return obj;
            }

            for (var key in data) {
                var val = data[key];
                if (key.indexOf("$") > -1 || typeof(val) === 'function') {
                    delete data[key];
                }
            }
            if (Array.isArray(obj)) {
                obj = jQuery.extend([], obj);
                for (var ix = 0; ix < obj.length; ix++) {
                    obj[ix] = recurse(obj[ix], tier);
                }
            }
            else if ('typeName' in obj) {
                if (obj.skipSend) {
                    return undefined;
                }
                obj = jQuery.extend({}, obj);
                var found = false;
                for (var pdIx = 0; pdIx < processData.length; pdIx++) {
                    var item = processData[pdIx];
                    if (item.id === obj.id && item.typeName === obj.typeName) {
                        found = true;
                        if (!item.jsonTier || item.jsonTier > tier) {
                            item.jsonTier = tier;
                            item.jsonWidth = tiers[tier].width;
                        }
                        if (tier === item.jsonTier && item.jsonWidth > tiers[tier].width) {
                            item.jsonWidth = tiers[tier].width;
                        }
                        if (tier > item.jsonTier || (tier === item.jsonTier && item.jsonWidth < tiers[tier].width)) {
                            return { $ref: item.$id.toString() };
                        }
                        break;
                    }
                }
                if (!found) {
                    obj.$id = refKey;
                    refKey++;
                    processData.push({$id:obj.$id, id: obj.id, typeName: obj.typeName, jsonTier: tier, jsonWidth: tiers[tier].width });
                }
                var keys = Object.keys(obj);
                keys.sort();
                for (var key in keys) {
                    key = keys[key];
                    obj[key] = recurse(obj[key], tier + 1);
                }
            }
        }
        return obj;
    })(data, 1);

    retVal = (function recurse(obj, tier) {
        tiers[tier] = tiers[tier] || {};
        tiers[tier].destWidth = tiers[tier].destWidth ? tiers[tier].destWidth + 1 : 1;
        if (typeof obj !== 'object' || !obj) {
            return obj;
        }
        if (Array.isArray(obj)) {
            for (var ix = 0; ix < obj.length; ix++) {
                obj[ix] = recurse(obj[ix], tier);
            }
        }
        else if ('typeName' in obj) {
            var found = false;
            for (var pdIx = 0; pdIx < processData.length; pdIx++) {
                var item = processData[pdIx];
                if (item.id === obj.id && item.typeName === obj.typeName) {
                    found = true;
                    if (item.jsonTier < tier || (item.jsonTier === tier && item.jsonWidth < tiers[tier].destWidth)) {
                        return { $ref: item.id.toString() };
                    }
                }
            }
            var keys = Object.keys(obj);
            keys.sort();
            for (var key in keys) {
                key = keys[key];
                obj[key] = recurse(obj[key], tier + 1);
            }
        }
        return obj;
    })(retVal, 1);
    return retVal;
}
```

现在，要清楚。我对 $ref 和 $id 的重新建立经常发生乱序，并且我在后端得到了奇怪的集合对象引用或导航属性对象引用，这些引用返回 null。我仍在努力。我真的需要拉下 NewtonSoft.JSON 库并将它们分开以找出处理对象图的顺序，这样我就可以在反序列化后消除空引用。

对我来说，这是一个真正的解决方案，而不是因为懒惰而放弃并禁用循环引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-02T08:42:02.607

只是加我的两分钱。我的代码中有这条额外的行也导致了这个问题

```
config.Formatters.JsonFormatter.SerializerSettings.PreserveReferencesHandling = Newtonsoft.Json.PreserveReferencesHandling.Objects; 
```

感谢 digger69 的这个。

# slf4j - logback 外部化

> ID：14288623
> 
> 赞同：15
> 
> 时间：2013-01-12T00:02:06.150
> 
> 标签：slf4j, logback

目前我有 logback 配置文件`logback.xml` ，即`src/main/resources`. 我想设置日志记录级别，但我想在战争之外进行控制。

我能想到的一种解决方案是将其外部化到属性文件中，在服务器启动时加载它并替换占位符。有没有更好的方法呢？我们不能保持`logback.xml`在战争档案之外吗？

```
 <configuration>
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${catalina.base}/logs/logFile.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <!-- daily rollover -->
            <fileNamePattern>logFile.%d{yyyy-MM-dd}.log</fileNamePattern>
            <!-- keep 7 days' worth of history -->
            <maxHistory>7</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>%date [%thread] %-5level %logger{35} - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="DEBUG">
        <appender-ref ref="FILE"/>
    </root>
</configuration> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T15:56:28.553

如果您只想更改不需要覆盖整个文件的日志级别，可以这样做：

```
<root level="${log.level:-INFO}"> 
```

然后，如果您设置系统属性：

```
-Dlog.level=DEBUG 
```

它将覆盖默认的“信息”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-03T22:15:33.213

我建议你使用 2 个 logback 配置文件。类路径中的第一个定义为：

```
<configuration scan="true">
    <property file="/otherfolder/project.properties" />
    <include file="/otherfolder/logback.xml"/>
</configuration> 
```

然后你把所有的配置放在另一个里面。Logback 将扫描这两个文件以获取更新。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-12T00:09:36.707

外部属性是从外部控制日志记录级别的一种方式。Logback 的[文件包含](http://logback.qos.ch/manual/configuration.html#fileInclusion)功能是另一个。顺便说一句，[自动重新加载](http://logback.qos.ch/manual/configuration.html#autoScan)功能适用于包含的配置文件，但不适用于属性文件。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-10T09:13:24.517

我已经设法用 tomcat/Spring logback 放置了一个外部配置文件

tomcat 的上下文文件：

```
<?xml version='1.0' encoding='utf-8'?>
<Context path="/appName">
<Environment name="pathCfg" value="${user.home}/applications/appName/cfg" type="java.lang.String" override="false" />
</Context> 
```

网页.xml：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:/web-application-context.xml
    </param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<!-- Listener for external logback configuration file -->
<listener>
    <listener-class>com.package.client.servlet.LogbackConfiguratorContextListener</listener-class>
</listener> 
```

web-application-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:jee="http://www.springframework.org/schema/jee" xmlns:util="http://www.springframework.org/schema/util"
xsi:schemaLocation="http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.2.xsd
http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.2.xsd">
<!-- Configuration -->
<jee:jndi-lookup id="configurationPath" jndi-name="pathCfg"></jee:jndi-lookup>
<bean id="configurationPathResource" class="org.springframework.core.io.FileSystemResource">
    <constructor-arg ref="configurationPath" />
</bean>
<util:properties id="environnementProperties" location="file:${java:comp/env/pathCfg}/environnement.properties" />
</beans> 
```

logback 配置器类：

```
package com.package.client.servlet;

import java.io.File;
import java.io.IOException;

import javax.servlet.ServletContext;
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

import org.apache.commons.lang.StringUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.core.io.FileSystemResource;
import org.springframework.core.io.Resource;
import org.springframework.web.context.support.WebApplicationContextUtils;

import ch.qos.logback.classic.BasicConfigurator;
import ch.qos.logback.classic.LoggerContext;
import ch.qos.logback.classic.joran.JoranConfigurator;
import ch.qos.logback.classic.util.ContextInitializer;
import ch.qos.logback.core.joran.spi.JoranException;

/**
 * Servlet context listener in order to use an external configuration file for logback.
 * 
 */
public class LogbackConfiguratorContextListener implements ServletContextListener
{

    private static final Logger LOGGER = LoggerFactory.getLogger(LogbackConfiguratorContextListener.class);

    /**
     * Logback configuration file uri.
     */
    @Value("#{environnementProperties['logback.configuration.file.uri']}")
    private String logbackConfigurationUri;

    /**
     * Configuration path resource for configuration files.
     */
    @Value("#{configurationPathResource}")
    private Resource configurationPathResource;

    /**
     * initialize logback with external configuration file.
     */
    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent)
    {
        autowireThis(servletContextEvent.getServletContext());
        Resource logbackConfigurationResource = null;
        if (StringUtils.isNotBlank(logbackConfigurationUri))
        {
            if (StringUtils.containsAny(logbackConfigurationUri, new char[] { '/', '\\' }))
            {
                logbackConfigurationResource = new FileSystemResource(logbackConfigurationUri);
            }
            else if (configurationPathResource != null)
            {
                try
                {
                    logbackConfigurationResource = new FileSystemResource(new File(configurationPathResource.getFile(),
                            logbackConfigurationUri));
                }
                catch (IOException exception)
                {
                    LOGGER.error("Can't read resource " + configurationPathResource.getFilename(), exception);
                }
            }
        }
        if (logbackConfigurationResource != null)
        {
            if (logbackConfigurationResource.exists())
            {
                LOGGER.info("Found logback configuration " + logbackConfigurationResource.getDescription()
                        + " - Overriding default configuration");
                JoranConfigurator configurator = new JoranConfigurator();
                LoggerContext loggerContext = (LoggerContext) LoggerFactory.getILoggerFactory();
                loggerContext.reset();
                configurator.setContext(loggerContext);
                try
                {
                    configurator.doConfigure(logbackConfigurationResource.getFile());
                    LOGGER.info("default configuration overrided by logback configuration "
                            + logbackConfigurationResource.getDescription());
                }
                catch (Exception exception)
                {
                    try
                    {
                        new ContextInitializer(loggerContext).autoConfig();
                    }
                    catch (JoranException e)
                    {
                        BasicConfigurator.configureDefaultContext();
                        LOGGER.error("Can't configure default configuration", exception);
                    }
                    LOGGER.error(
                            "Can't configure logback with specified " + logbackConfigurationResource.getDescription()
                                    + " - Keep default configuration", exception);
                }
            }
            else
            {
                LOGGER.error("Can't read logback configuration specified file at "
                        + logbackConfigurationResource.getDescription() + " - Keep default configuration");
            }
        }
        else
        {
            LOGGER.info("No logback configuration file specified - Keep default configuration");
        }
    }

    /**
     * Autowire this bean by spring
     * @param servletContext le contexte de la servlet
     */
    private void autowireThis(ServletContext servletContext)
    {
        WebApplicationContextUtils.getRequiredWebApplicationContext(servletContext).getAutowireCapableBeanFactory()
                .autowireBean(this);
    }

    @Override
    public void contextDestroyed(ServletContextEvent sce)
    {
    }
} 
```

最后是 environment.properties

```
# Configuration file
logback.configuration.file.uri=C:/Users/olejacques/applications/appName/cfg/log.xml 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-26T19:23:33.637

它对我们有用的一种方法是将配置文件外部化，如下所示。如果这不适用于您，请忽略弹簧型材部分。因此，一旦您在 中更新配置`logback-include.xml`，假设将根级别更改为 info，应用程序会在 30 秒内将其拾取（可配置）。

参考：[https ://logback.qos.ch/manual/configuration.html#fileInclusion](https://logback.qos.ch/manual/configuration.html#fileInclusion)

**web.xml**
我们使用了 spring 配置文件，但即使没有它也可以工作。

```
 <context-param>
        <param-name>spring.profiles.active</param-name>
        <param-value>dev</param-value>
    </context-param>
    <listener>
        <listener-class>ch.qos.logback.ext.spring.web.LogbackConfigListener</listener-class>
    </listener>
    <context-param>
        <param-name>logbackConfigLocation</param-name>
        <param-value>classpath:properties/${spring.profiles.active}/logback.xml</param-value> <!-- with profiles, config file in classpath includes ext. file -->
<!--        <param-value>file:logback-ext-config-path/logback.xml</param-value> --> <!-- directly using external config -->
<!--        <param-value>classpath:logback.xml</param-value> --> <!-- without profiles -->
    </context-param> 
```

**logback.xml**（在类路径中）
注意`debug="true"`配置更新时会告诉你的。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE configuration>
<configuration debug="true" scan="true" scanPeriod="30 seconds">
    <include file="${logback-ext-config-include-file-path}/logback-include.xml"/>
</configuration> 
```

**logback-include.xml** （外部位置）注意使用`<included>`代替配置。不要错过这部分！

```
<included>
        <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
            <file>${logfile-path}/log-file.log</file>
            <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
                <!-- daily rollover -->
                <fileNamePattern>logFile.%d{yyyy-MM-dd}.log</fileNamePattern>
                <!-- keep 7 days' worth of history -->
                <maxHistory>7</maxHistory>
            </rollingPolicy>
            <encoder>
                <pattern>%date [%thread] %-5level %logger{35} - %msg%n</pattern>
            </encoder>
        </appender>

        <root level="DEBUG">
            <appender-ref ref="FILE"/>
        </root>
</included> 
```

# c++ - 获取监视器的设备信息集：返回的句柄始终为 INVALID_HANDLE_VALUE

> ID：14288626
> 
> 赞同：0
> 
> 时间：2013-01-12T00:02:28.507
> 
> 标签：c++, winapi, device, guid

我正在尝试列出当前连接到计算机的所有显示器的设备信息。我有一个可以执行此操作的函数，并且完成了 90%，除非我`SetupDiGetClassDevs()`使用第二个参数集（非 NULL）调用该函数，然后该函数总是失败（返回 INVALID_HANDLE_VALUE）。

当我打电话时，`GetLastError()`我收到错误 13（十进制），即，`"The data is invalid"`我不确定这意味着什么？

**出了什么问题？你能就发生的事情以及我如何解决它提供任何建议吗？**

[功能信息：](http://msdn.microsoft.com/en-us/library/windows/hardware/ff551069)

```
HDEVINFO SetupDiGetClassDevs(
  _In_opt_  const GUID *ClassGuid,
  _In_opt_  PCTSTR Enumerator,     // According to MSDN this param MUST be set if I want Device Information for a specific class(Monitors)
  _In_opt_  HWND hwndParent,
  _In_      DWORD Flags
); 
```

我的函数尝试仅获取监视器的设备信息集并输出每个监视器的详细信息（错误行已注释）：

```
void printDeviceData(GUID guID)
{
    // Device Classes:        http://msdn.microsoft.com/en-us/library/windows/hardware/ff553426
    // System Device Classes: http://msdn.microsoft.com/en-us/library/windows/hardware/ff553428
    // Monitor Class GUI:     {4d36e96e-e325-11ce-bfc1-08002be10318}

    DWORD dataT                    = 0;
    PCTSTR monitorGuID             = _T("");
    SP_DEVINFO_DATA deviceInfoData = {0};
    deviceInfoData.cbSize          = sizeof(SP_DEVINFO_DATA);
    deviceInfoData.ClassGuid       = guID;

    // Step 1: Get Device Information Set for Monitors only
    // ERROR OCCURS HERE: SetupDiGetClassDevs() always fails
    // Also tried these values for param 2: "Monitor" "PCI" but all cause the function to return INVALID_HANDLE_VALUE
    HDEVINFO hDevInfo = SetupDiGetClassDevs(&guID, _T("{4d36e96e-e325-11ce-bfc1-08002be10318}"), NULL, DIGCF_PRESENT | DIGCF_DEVICEINTERFACE);
    if (hDevInfo == INVALID_HANDLE_VALUE) {
        //outputLastError(_T("Fail 1"));
        printf("hDevInfo == INVALID_HANDLE_VALUE\n");
        return;
    }
    else printf("SUCCESS 1\n");

    if (SetupDiGetSelectedDevice(hDevInfo, &deviceInfoData) == FALSE) {
        //outputLastError(_T("SetupDiGetSelectedDevice(hDevInfo, &deviceInfoData) == FALSE"));
        printf("SetupDiGetSelectedDevice(hDevInfo, &deviceInfoData) == FALSE, %d, %x\n", GetLastError(), GetLastError());
        return;
    }
    else printf("SUCCESS 2\n");

    // Step 2: For each Monitor: Output Device information
    const unsigned int FLAG_NUM = 30;
    DWORD flags[] = {SPDRP_FRIENDLYNAME, SPDRP_ENUMERATOR_NAME, SPDRP_PHYSICAL_DEVICE_OBJECT_NAME, SPDRP_DEVICEDESC,
                        SPDRP_ADDRESS, SPDRP_BUSNUMBER, SPDRP_BUSTYPEGUID, SPDRP_CHARACTERISTICS, SPDRP_CLASS, SPDRP_CLASSGUID,
                        SPDRP_COMPATIBLEIDS, SPDRP_CONFIGFLAGS, SPDRP_DEVICE_POWER_DATA, SPDRP_DEVTYPE, SPDRP_DRIVER,
                        SPDRP_ENUMERATOR_NAME, SPDRP_EXCLUSIVE, SPDRP_HARDWAREID, SPDRP_INSTALL_STATE, SPDRP_LEGACYBUSTYPE,
                        SPDRP_LOCATION_INFORMATION, SPDRP_LOCATION_PATHS, SPDRP_LOWERFILTERS, SPDRP_MFG, 
                        SPDRP_PHYSICAL_DEVICE_OBJECT_NAME, SPDRP_UI_NUMBER, SPDRP_UI_NUMBER_DESC_FORMAT, SPDRP_UPPERFILTERS, 
                        SPDRP_SECURITY_SDS, SPDRP_SECURITY, SPDRP_SERVICE };

    for (int i=0; i<=FLAG_NUM; i++) {
        DWORD buffersize = 0;
        LPTSTR buffer    = NULL;

        while (!SetupDiGetDeviceRegistryProperty(hDevInfo,  &deviceInfoData, flags[i], &dataT,
                                                    (PBYTE)buffer, buffersize, &buffersize))
        {
            if (GetLastError() == ERROR_INSUFFICIENT_BUFFER) {
                // Change the buffer size.
                if (buffer) 
                    LocalFree(buffer);
                buffer = (LPTSTR)LocalAlloc(LPTR, buffersize);
            }
            else {
                // Insert error handling here.
                break;
            }
        }

        printf("Data: %d: %s\n", i, buffer);
        if (buffer) 
            LocalFree(buffer);
    }

    SetupDiDestroyDeviceInfoList(hDevInfo);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:32:44.700

根据文档，Enumerator 必须设置为有效的设备实例 ID，根据[http://msdn.microsoft.com/en-us/library/windows/hardware/ff541327](http://msdn.microsoft.com/en-us/library/windows/hardware/ff541327)必须像这样指定

"PCI\VEN_1000&DEV_0001&SUBSYS_00000000&REV_02\1&08"

我还没有测试过，但我认为这就是无效数据的来源。

# php - PHP 确认电子邮件链接将我带到错误的页面

> ID：14288628
> 
> 赞同：0
> 
> 时间：2013-01-12T00:03:02.047
> 
> 标签：php, email, activation

我有一个 php 脚本 :) 基本上，注册用户会收到一封电子邮件，然后单击激活链接。当他们点击激活链接时，它会将他们带到 activate.php 页面，一切都完成了。他们收到的电子邮件中的链接问题看起来像

您好，用户名，现在这里是您的登录信息：

用户名：computing
密码：computing

**下一步是点击此链接激活您的帐户：点击这里**

您可以在上面的最后一行中看到，该网站的名称已连接到该链接应该将它们带到的 activate.php 页面。所以我猜我的错误还不错，我只是缺少正斜杠或类似的东西。无论如何，我认为问题来自下面的代码。我尽量缩短了代码。

```
<?

// send email
$myname = $contact_name;
$myemail = $contact_email;

$contactname = $signup[fname];
$contactemail = $signup[email];
$message = "Hello ".$signup[fname].",<BR>".
"Get ready to start getting the hits you deserve. Now here is your login info:<BR>     <BR>".
"username: ".$signup[username]."<BR>".
"password: ".$signup[password]."<BR><BR>".
"<B>The next step is to click on this link to activate your account:<a href=".$siteUrl."activate.php?username=".$signup[username].">CLICK HERE</a></b>";
$subject = $title;

$headers .= "MIME-Version: 1.0\r\n";
$headers .= "Content-type: text/html; charset=iso-8859-1\r\n";
$headers .= "From: ".$myname." <".$myemail.">\r\n";
$headers .= "To: ".$contactemail." <".$contactemail.">\r\n";
$headers .= "Reply-To: ".$myname." <".$myemail.">\r\n";
$headers .= "X-Priority: 1\r\n";
$headers .= "X-MSMail-Priority: High\r\n";
$headers .= "X-Mailer: Just My Server";

mail($contactemail, $subject, $message, $headers);
$signup[username] = "";
?> 
```

如果有人能对此有所了解，那就太好了。以为我会提到我正在使用 PHP 5.3 我认为我自己的问题来自 href=".$siteUrl."activate.php?username=".$signup[username].">CLICK HERE"; $subject = $title ;

但我需要一些有效的输入 :) 来自某个知道的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:07:44.870

您需要在消息中的“a”和“href”之间留一个空格。

此外，所有现代电子邮件客户端都会自动将 URL 转换为链接，因此可能根本不需要使用 href 标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:07:25.270

我注意到，当您分配使用 .$siteUrl 的链接时。你真的设置了那个变量吗？

此外，由于您将来自外部来源（电子邮件托管网站），因此“硬编码”您的链接与您的完整网站地址一样好。前任：

```
<a href="http://www.yourwebsite.com/yourdirectories/activate.php?username=".$signup[username].">Click Here</a> 
```

因此，您的消息值的值可能是。

```
$message = "Hello ".$signup[fname].",<BR>".
"Get ready to start getting the hits you deserve. Now here is your login info:<BR>     <BR>".
"username: ".$signup[username]."<BR>".
"password: ".$signup[password]."<BR><BR>".
"<B>The next step is to click on this link to activate your account:<a href='http://www.yourwebsite.comactivate.php?username=".$signup[username]."'>CLICK HERE</a></b>"; 
```

双斜杠不应该有问题，但如果你有问题，你可以使用：

```
$message = "Hello ".$signup[fname].",<BR>".
"Get ready to start getting the hits you deserve. Now here is your login info:<BR>     <BR>".
"username: ".$signup[username]."<BR>".
"password: ".$signup[password]."<BR><BR>".
"<B>The next step is to click on this link to activate your account:<a  href='http:/"."/www.yourwebsite.com/activate.php?username=".$signup[username]."'>CLICK HERE</a></b>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:12:36.287

因为它在字符串 "s 中，所以您需要转义它们或使用单引号。

这是一个固定版本：

```
$message = "Hello ".$signup[fname].",<br>".
  "Get ready to start getting the hits you deserve. Now here is your login info:<br>     <br>".
  "username: ".$signup[username]."<br>".
  "password: ".$signup[password]."<br><br>".
  "<b>The next step is to click on this link to activate your account: 
  <a href='".$siteUrl."activate.php?username=".$signup[username].'>CLICK HERE</a></b>"; 
```

# php - 我可以将我当前的 PHP 脚本集成到 wordpress 中吗？

> ID：14288632
> 
> 赞同：-2
> 
> 时间：2013-01-12T00:03:15.730
> 
> 标签：php, html, mysql, wordpress

我的网站有 php 脚本，但我想开始使用 wordpress 并获得一个新的网络主机。长篇大论，别问！哈哈。

问题是，我当前的 php 脚本（这些都是耗时的任务）能否与 wordpress 一起使用？这些脚本访问 mysql 数据库并显示信息。这就是我的网站。我讨厌不得不使用 WP 重新编码所有内容！

谢谢，戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:07:10.467

答案是“是”和“否”。您也许可以利用您所做的一些事情，但是要准备好修改您的代码以使其在 Wordpress 的上下文中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:17:35.120

查看 WP 模板文件中的 functions.php。

# rest - 任务队列的休息设计

> ID：14288633
> 
> 赞同：6
> 
> 时间：2013-01-12T00:03:17.947
> 
> 标签：rest

我正在设计一个任务队列休息界面并想知道最佳实践。

一个动作是接受队列中的“下一个”任务。

通过接受这份工作，只有第一个工人会得到这份工作。

工作人员在接受工作之前不会知道任务或任务 ID。

现在我想我不能使用 GET 因为它不是幂等的。如果调用 nextTask 两次，你会得到两个不同的工作。所以我想它应该是一个POST。

POST //rest/taskqueue?action=acceptTask

还是我看错了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T10:47:56.317

基本上：

*   GET - 读取数据而不修改资源（幂等）。您可以根据需要执行任意数量的 GET，它永远不会修改资源。
*   PUT - 将数据显式放入资源中（非幂等）
*   POST - 在资源中追加数据（非幂等）
*   DELETE - 从资源中删除数据（非幂等）

我就是这样做的。

将新任务排入队列：

```
--> POST http://api.crazyjoes.com/v1/tasks/
--> {"data":{"lulcat":true}}
<-- 202 Accepted 
```

将具有特定 ID 的新任务排入队列：

```
--> PUT http://api.crazyjoes.com/v1/tasks/393ee7f6-c44a-4b34-86ac-92c9f31a4bc6/
--> {"data":{"lulcat":true}}
<-- 202 Accepted 
```

检索最旧的任务：

```
--> GET http://api.crazyjoes.com/v1/tasks/oldest/
<-- 200 OK
<-- {"id":123,"data":{"lulcat":true}} 
```

如果队列为空：

```
--> GET http://api.crazyjoes.com/v1/tasks/oldest/
<-- 204 No Content 
```

出列特定任务：

```
--> DELETE http://api.crazyjoes.com/v1/tasks/123/
<-- 200 OK
<-- {"id":123,"data":{"lulcat":true}} 
```

如果任务已经处理...

```
--> DELETE http://api.crazyjoes.com/v1/tasks/123/
<-- 410 Gone 
```

如果你想直接出列最旧的项目......

```
--> DELETE http://api.crazyjoes.com/v1/tasks/oldest/
<-- 200 OK
<-- {"id":123,"data":{"lulcat":true}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T02:47:44.250

怎么样：

`/tasks`和`/tasks/{taskId}`分别是所有任务和单个任务的通常集合。

`/tasksqueue`是队列中的任务，while`/tasksqueue/top`是队列的顶部，并且只支持 GET。让我们假设所有任务都有一个唯一的 id。

然后发出`GET /tasksqueue/top`以获取队列顶部任务的 id，并发出 a`DELETE /tasksqueue/{taskId}`尝试将其从队列中弹出。

如果失败，即返回非 20x，则意味着其他人在您的呼叫之间弹出队列。

如果成功，它将在其主体中返回任务，并且您可以对它做任何您想做的事情，因为您知道您已经成功弹出它。或者因为你知道它的 id，你可以从`/tasks/{taskId}`.

它不应该成功不止一次。

`DELETE /tasksqueue/{taskId}`并且您可以多次发出与其中一次相同的系统整体效果，因此`DELETE`它应该是幂等的。（所有或除第一个之外的所有`DELETE`调用都返回非 20x 的事实并没有改变这一事实。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T07:52:23.457

POST 是“追加”动词，也是 HTTP 规范中的“数据处理”动词。因此，从概念上讲，您将任务附加到任务列表以进行处理。POST 刚刚好。

GET 不正确的另一个原因是 GET 不应该对资源进行更改。但是传入的请求*将*进行更改……它将添加一项。

我会放弃“action=acceptTask”。在 REST 中，HTTP 动词指定您的意图，而 URI 指定目标。所以你正在做的是将一个新任务附加到队列中......“action”参数不会添加任何内容。

一般来说，如果你想为请求提供额外的信息，你可以添加参数来提供关于做什么的修饰符。但另一种约定是或多或少作弊，然后将意图放在 URI 的末尾，并将其视为子资源（即，而不是参数）。例如：

```
ht_p://.../taskqueue/fold
ht_p://.../taskqueue/roll
ht_p://.../taskqueue/rattle
(hm. not sure how many things you can actually do with a queue...) 
```

但是，您永远不应该重复 HTTP 动词……这是对底层协议的滥用，也是 REST 中的禁忌：

```
ht_p://.../taskqueue/get
ht_p://.../taskqueue/update
ht_p://.../taskqueue/delete
...ack! 
```

# qt - 使用 Qt 在设置中存储停靠寡妇布局和大小的任何简单方法？

> ID：14288635
> 
> 赞同：5
> 
> 时间：2013-01-12T00:03:33.830
> 
> 标签：qt, docking

我有一个带有一些内部可停靠窗口的主窗口。我可以移动、调整大小和重新停靠那些可停靠的窗口。关闭并重新打开程序后，我希望保留移动、大小和重新对接。有什么简单的方法来实现它吗？我认为它将使用设置。但是哪些信息应该保存在设置中。以及如何设置所有这些停靠窗口的默认布局？当点击一个动作按钮时，它可以被恢复。谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-25T11:54:07.300

查看 QMainWindow::saveState/restoreState。它正是这样做的。

保存：

```
QSettings settings;
settings.setValue("DOCK_LOCATIONS",this->saveState(SOME_VERSION_DEFINE)); 
```

恢复：

```
QSettings settings;
this->restoreState(settings.value("DOCK_LOCATIONS").toByteArray(),SOME_VERSION_DEFINE); 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-12T00:23:59.667

不幸的是，不，没有内置的方法可以做到这一点。

您需要遍历所有工具栏和可停靠小部件，并将它们的位置（可能还有它们的可见性）写入文件。要恢复，您可以读取该文件并根据您读取的内容设置您的位置。

好消息是，一旦您设置了这样的系统，制作默认布局很容易 - 将所有小部件移动到您想要的位置，然后保存您的布局文件，就像您在上面执行用户布局一样。你甚至可以有多个布局，只要它们都有单独的文件。

# xml - 将虚拟包含转换为 php 包含

> ID：14288642
> 
> 赞同：1
> 
> 时间：2013-01-12T00:04:35.413
> 
> 标签：xml, xslt, xml-parsing, xslt-2.0

我正在尝试对注释进行模板匹配，以便它查找虚拟包含并将其转换为 php 包含：

```
<node>
<!--#include virtual="/abc/contacts.html" -->
<!-- some random comment -->
</node> 
```

到

```
<node>
<?php include($_SERVER[DOCUMENT_ROOT]."/abc/contacts.html"); ?>
<!-- some random comment -->
</node> 
```

我正在尝试做类似的事情：

```
<xsl:template match="comment()" >
<xsl:analyze-string select="." regex="^[\s\S]*&lt;!">
<xsl:matching-substring>
<xsl:text disable-output-escaping="yes">&lt;?php&nbsp;</xsl:text> <xsl:value-of select="." /> <xsl:text disable-output-escaping="yes">&nbsp;?&gt;</xsl:text>
</xsl:matching-substring>
</xsl:analyze-string>
</xsl:template> 
```

非常感谢解决此问题的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T04:25:58.477

**为此，您不需要 XSLT 2.0**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "comment()[starts-with(normalize-space(),'#include virtual=')]">

  <xsl:processing-instruction name="php">
   <xsl:text>include($_SERVER[DOCUMENT_ROOT].</xsl:text>
   <xsl:value-of select=
   "substring-after(normalize-space(),'#include virtual=')"/>
   <xsl:text>);</xsl:text>
  </xsl:processing-instruction>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<node>
    <!--#include virtual="/abc/contacts.html" -->
    <!-- some random comment -->
</node> 
```

**产生了想要的正确结果：**

```
<node>
    <?php include($_SERVER[DOCUMENT_ROOT]."/abc/contacts.html");?>
    <!-- some random comment -->

</node> 
```

**说明**：

正确使用**[标识规则](http://www.dpawson.co.uk/xsl/sect2/identity.html)**、模板匹配模式、XPath 函数和**[`normalize-space()`](http://www.w3.org/TR/xpath/#function-normalize-space)**XSLT指令。**[`starts-with()`](http://www.w3.org/TR/xpath/#function-starts-with)****[`xsl:processing-instruction`](http://www.w3.org/TR/xslt#section-Creating-Processing-Instructions)**

# r - 对于 K 个观测值，将 N 个变量变成 1 个维度为 KxN 的变量

> ID：14288644
> 
> 赞同：-3
> 
> 时间：2013-01-12T00:04:52.833
> 
> 标签：r

我正在为 R 中的 pls pacakege 中的 plsr() 准备数据集。我的数据集 A 被导入为 62 个 obs.of 2001 变量。运行该 plsr 功能。我必须将 2000 个变量变成 1 个变量，其尺寸为 62 x 2000。这样数据框 B 就有 62 个 obs。2个变量。一个变量的维度为 62x1，另一个变量的维度为 62x2000 如何在 R 中执行此操作？请....谢谢！！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:56:38.333

也许：

```
 cbind( resp=dfrm[ , 1, drop=FALSE], mat = as.matrix(dfrm[, 2:2001] ) ) 
```

目前尚不清楚@LeeTaylor 表达的反对意见。如果您将此类对象分配给名称`mydat`并运行：

```
 plsr(resp~mat, data=mydat) 
```

....我认为成功的可能性是合理的。在没有适当示例的情况下，这仍然未经检验，其责任在于提问者。

# iphone - Facebook 按钮转到 Facebook iPhone 应用程序，但未加载正确的 Facebook 页面

> ID：14288646
> 
> 赞同：0
> 
> 时间：2013-01-12T00:04:55.867
> 
> 标签：iphone, facebook, mobile-safari, uiapplication, openurl

> **可能重复：**
> [新 Facebook iOS 应用的自定义 URL 方案](https://stackoverflow.com/questions/12125780/custom-url-scheme-for-new-facebook-ios-app)

我的 iPhone 应用程序中有一个 Facebook 按钮。当它被触摸时，我希望它转到 Facebook iPhone 应用程序并加载一个 Facebook 页面，如果 Facebook iPhone 应用程序在设备上，如果没有，则转到 Safari 并转到这个 facebook 页面。下面的代码将您带到 facebook 应用程序，但它只是转到提要。但是当没有安装 Facebook iphone 应用程序时，它可以按照我的方式工作

此代码确实运行。

如何通过单击按钮直接进入页面？

```
NSString *urlStr = @"https://www.facebook.com/MYFACEBOOKPAGE";

NSURL *url = [[NSURL alloc] initWithString:urlStr];

if (![[UIApplication sharedApplication] openURL:url]) NSLog(@"%@%@",@"Failed to open url:",[url description]); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T17:10:50.400

也许尝试使用它。

`https://apps.facebook.com/YOUR-NAMESPACE-HERE`

我可以使用上述 URL 访问我自己的画布应用程序，但使用`www.`不起作用。

# javascript - 在javascript中的字符串后使用[]

> ID：14288649
> 
> 赞同：-1
> 
> 时间：2013-01-12T00:05:39.623
> 
> 标签：javascript

以下警报 100。我希望它警报 200，但显然我错过了一些东西。

```
$blah[1] = 100;
function updateBlah(e) {
    $blah[e] = 200;
    alert($blah[e]);
}
updateBlah(1); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:09:05.017

你需要先声明 $blah。如：

```
var $blah = []; // <-- Declare $blah as an array
$blah[1] = 100; // <-- Set array index 1 to 100
function updateBlah(e) {
    $blah[e] = 200;
    alert($blah[e]);
}
updateBlah(1); 
```

这将显示`200`。

[例子](http://jsfiddle.net/khRN3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:09:36.833

您的代码将无法正常工作。您需要先初始化数组，然后才能开始操作它。

```
$blah = []; // You need this!
$blah[1] = 100;
function updateBlah(e) {
    $blah[e] = 200;
    alert($blah[e]);
}
updateBlah(1); 
```

警报`200`，正如预期的那样。

以下是 Javascript 中数组的一些参考：

*   [Javascript 教程 - 数组](http://www.tizag.com/javascriptT/javascriptarray.php)
*   [数组 - Javascript | MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)

# ruby-on-rails-3 - Rails 表单将 JSON 对象编辑为文本

> ID：14288650
> 
> 赞同：1
> 
> 时间：2013-01-12T00:05:43.410
> 
> 标签：ruby-on-rails-3, json, forms, mongoid

我想制作一个表单，让用户将 mongoid 对象的一个​​字段编辑为呈现的 JSON 文本。模型中有一个字段是我的 rails 应用程序不应该理解的，但我想公开一个通用编辑器。所以对于这个字段，我想将它呈现为漂亮的 JSON，并以大的形式公开它，`<textarea>`然后在进行任何编辑后重新解析 JSON。

我可以想出十几种方法来做到这一点，但我想知道什么最符合 Rails 哲学，并且与普通脚手架的分歧最小。我应该在控制器中将对象呈现为 JSON 文本吗？然后我必须在 and 方法中重复该代码，以及在and`new`方法`edit`中的解析代码，这似乎有点笨拙。有没有办法定义一个更可重用的助手或自定义表单小部件？或者也许已经写好了？`update``create``_form.html.erb`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T12:58:19.510

您可以在模型中创建自己的属性写入器/读取器：

```
 attr_accessible the_field_raw

  def the_field_raw
    self.the_field.to_s
  end

  def the_field_raw=(value)
    self.the_field = JSON(value)
  end 
```

whitch 应该与表单生成器兼容，并且控制器中没有额外的代码。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-12T19:19:10.953

将值序列化为 JSON。

```
class Price < ActiveRecord::Base
   serialize :values, JSON

   validates :start, :end, :values, :presence => true
end 
```

# wpf - 以编程方式导航焦点时焦点视觉未显示

> ID：14288665
> 
> 赞同：4
> 
> 时间：2013-01-12T00:07:27.063
> 
> 标签：wpf, wpf-controls

每当我尝试以编程方式移动焦点时，焦点视觉（虚线矩形）不会显示。

可以做些什么来强制显示此视觉效果？

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525" Loaded="OnLoaded">
    <StackPanel>
        <TextBlock x:Name="a" Focusable="True">A</TextBlock>
        <TextBlock Focusable="True">B</TextBlock>
        <Button Focusable="False" Click="OnClick">Move Focus</Button>
    </StackPanel>
</Window>

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void OnLoaded(object sender, RoutedEventArgs e)
    {
        Keyboard.Focus(a);
    }

    private void OnClick(object sender, RoutedEventArgs e)
    {
        var request = new TraversalRequest(FocusNavigationDirection.Next);
        var elementWithFocus = Keyboard.FocusedElement as UIElement;
        if (elementWithFocus != null)
            elementWithFocus.MoveFocus(request);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T13:51:34.567

如果您（在反射器/ilspy 中）查看 KeyboardNavigation 的 ShowFocusVisual，您会发现框架仅在最后一次输入来自键盘时才显示它（或者如果基于 KeyboardCues 系统参数信息的内部静态属性为真）。所以我认为除了使用反射来临时设置该属性或异步聚焦元素并强制键盘操作（可能使用 winforms SendKeys 或 keybd_event api）之外，没有什么好的方法，但我也不推荐.

# ios - 模式打开时视图消失

> ID：14288667
> 
> 赞同：1
> 
> 时间：2013-01-12T00:07:35.287
> 
> 标签：ios, objective-c, animation, uiview, modal-dialog

我有基本的故事板，其中包含一个带有一些标签的子视图来显示信息。此视图隐藏在屏幕外，并在用户播放/暂停音乐时上下弹出。此视图从底部的屏幕开始并相应地进行动画处理。

屏幕上的另一个按钮打开一个模式窗口。当此模式打开时，带有标签的子视图将返回其初始状态关闭屏幕。我的主视图控制器中有通知中心，成功检测到此模式何时关闭，但如果正在播放音乐，它会调用适当的函数以再次显示子视图。但是，即使我在没有动画的情况下直接设置值，视图也不会因某种原因设置动画。然而，在按下暂停/播放后，它将再次按预期出现。

我假设我必须使用一些适当的回调，以便仅在视图准备好重绘后调用动画或其他什么？在下面找到打开我的模式的方法以及关闭时调用的方法。

```
// open modal from a .xib
- (IBAction)openModal:(id)sender {
    ifmSettingsViewController* svc = [[ifmSettingsViewController alloc] initWithNibName:@"Settings" bundle:nil];
    [svc setModalPresentationStyle:UIModalPresentationFullScreen];
    [svc setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];

    [[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(didDismissSecondViewController)
        name:@"SecondViewControllerDismissed"
        object:nil];
    [self presentViewController:svc animated:TRUE completion:nil];
}
// called when modal window dismissed
-(void)didDismissSecondViewController {
    NSLog(@"Dismissed SecondViewController");
    [self viewDidAppear:TRUE];
    // calculate appropriate distance from screen bottom
    float yer = [[UIScreen mainScreen] bounds].size.height - 101.0;
    self.infoview.center = yer;
} 
```

在模态框内，它会按如下方式自行关闭：

```
- (IBAction)backHit:(id)sender {
    [self dismissViewControllerAnimated:TRUE completion:^{
        [[NSNotificationCenter defaultCenter] postNotificationName:@"SecondViewControllerDismissed"
            object:nil
            userInfo:nil
        ];
        return;
    }];
} 
```

# java - NetBeans IDE：有没有办法使文件只读或锁定内容？

> ID：14288668
> 
> 赞同：2
> 
> 时间：2013-01-12T00:07:36.353
> 
> 标签：java, netbeans, ide, readonly, file-locking

在 Netbeans IDE 中，有没有办法使文件成为只读文件或防止文件内容被编辑，即使该文件是作为源代码、测试包或数据文件的项目的一部分？

请注意：我知道任何类型的项目都应该使用版本控制系统，并且在将更改提交到存储库之前，我会将任何文件与版本控制副本进行比较；我只是想知道是否有办法在此编辑器/IDE 中“锁定”文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:07:28.320

经过进一步研究，此功能似乎已作为附加功能添加：

[http://plugins.netbeans.org/plugin/23133/switch-file-read-write-access](http://plugins.netbeans.org/plugin/23133/switch-file-read-write-access)

[http://kenai.com/projects/file-rw-switcher/pages/Home](http://kenai.com/projects/file-rw-switcher/pages/Home)

# python - 删除文件每一行中不需要的字符，然后将剩下的字符匹配到 Python 中的另一个文件

> ID：14288669
> 
> 赞同：0
> 
> 时间：2013-01-12T00:07:43.850
> 
> 标签：python, matching

我想编写一个解决以下问题的python脚本：

我有两个制表符分隔的文件，一个只有一列各种单词。另一个文件有一列包含相似的单词，以及其他信息。但是，在第一个文件中，有些行包含多个单词，用“ /// ”分隔。另一个文件也有类似的问题，但分隔符是“|”。

**文件 #1**

```
RED
BLUE /// GREEN
YELLOW /// PINK /// PURPLE
ORANGE
BROWN /// BLACK 
```

**文件 #2**（其中包含其他测量的附加列）

```
RED|PINK 
ORANGE
BROWN|BLACK|GREEN|PURPLE
YELLOW|MAGENTA 
```

我想解析每个文件并匹配相同的单词，然后也附加额外测量的列。但我想忽略`///`第一个文件中`|`的 和第二个文件中的 ，以便将每个单词单独与另一个列表进行比较。输出文件应该只有一列出现在两个列表中的任何单词，然后是文件 2 中附加的附加信息。有帮助吗？

* * *

**添加信息/更新：**

这是文件 #1 的 8 行，我在上面使用了颜色名称以使其更简单，但这才是真正的文字：这些是“符号”：

```
ANKRD38  
ANKRD57  
ANKRD57
ANXA8 /// ANXA8L1 /// ANXA8L2  
AOF1  
AOF2  
AP1GBP1  
APOBEC3F /// APOBEC3G 
```

这是文件 #2 的一行：我需要做的是从 file1 运行每个符号，看看它是否与 file2 中第 5 列中的任何一个“同义词”匹配（这里的同义词是 A1B|ABG|间隙|HYST2477）。如果 file1 中的任何符号与 col 5 文件 2 中的任何同义词匹配，那么我需要将附加信息（file2 中的其他列）附加到 file1 中的符号上并创建一个大输出文件。

```
9606  '\t'    1 '\t'    A1BG  '\t'   -   '\t'       A1B|ABG|GAB|HYST2477'\t'    HGNC:5|MIM:138670|Ensembl:ENSG00000121410|HPRD:00726    '\t' 19   '\t'  19q13.4'\t' alpha-1-B glycoprotein '\t' protein-coding '\t' A1BG'\t'    alpha-1-B glycoprotein'\t'  O '\t'  alpha-1B-glycoprotein '\t'  20120726 
```

File2 为 22,000 KB，文件 1 小得多。我曾想过像建议的那样创建一个字典，但我一直被每个文件中的不同分隔符所困扰。到目前为止，感谢大家提出的问题和帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:20:48.970

1.  查看[http://docs.python.org/2/tutorial/inputoutput.html](http://docs.python.org/2/tutorial/inputoutput.html)文件 i/o

2.  循环遍历每个文件中的每一行

    file1set = set(file1line.split(' /// '))

    file2set = set(file2line.split('|'))

    wordsineach = list(file1set & file2set)

split 将创建一个颜色名称数组

set() 把它变成一个集合，这样我们就可以很容易地比较每一行的差异

1.  循环“wordsineach”并写入您的新文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:30:42.280

**编辑**

在您在下面发表评论后，我认为这就是您想要做的。我已将原始帖子留在下面，以防万一其中的任何内容对您有用。

所以，我认为你想做以下事情。首先，此代码会将 file1 中的每个单独的同义词读入 a `set`- 这是一个有用的结构，因为它会自动删除所有重复项，并且查找速度非常快。它就像一本字典，但只有键，没有值。如果您*不想*删除重复项，我们需要稍作更改。

```
file1_data = set()
with open("file1.txt", "r") as fd:
    for line in fd:
        file1_data.update(i.strip() for i in line.split("///") if i.strip()) 
```

然后你想通过 file2 寻找匹配：

```
with open("file2.txt", "r") as in_fd:
    with open("output.txt", "w") as out_fd:
        for line in in_fd:
            items = line.split("\t")
            if len(items) < 5:
                # This is so we don't crash if we find a line that's too short
                continue
            synonyms = set(i.strip() for i in items[4].split("|"))
            overlap = synonyms & file1_data
            if overlap:
                # Build string of columns from file2, stripping out 5th column.
                output_str = "\t".join(items[:4] + items[5:])
                for item in overlap:
                    out_fd.write("\t".join((item, output_str))) 
```

所以它的作用是打开 file2 和一个输出文件。它遍历 file2 中的每一行，并首先检查它是否有足够的列以至少有第 5 列 - 如果没有，它会忽略该行（您可能想要打印错误）。

然后它将第 5 列拆分`|`并从该列表中构建一个`set`（称为`synonyms`）。这`set`很有用，因为我们可以非常快速地找到this 与 file1 中所有同义词的前一组的*交集*- 这个交集存储在`overlap`.

然后我们要做的是检查是否有任何重叠 - 如果没有，我们忽略这一行，因为在 file1 中找不到同义词。这个检查主要是为了速度，所以如果我们不打算将它用于这一行，我们就不会费心构建输出字符串。

如果有重叠，我们构建一个字符串，它是我们要附加到同义词的完整列列表 - 即使有多个匹配项，我们也可以将其构建为一个字符串一次，因为每个匹配项都是相同的，因为它all 来自 file2 中的行。这比每次都将其构建为字符串要快。

然后，对于在 file1 中匹配的每个同义词，我们将一行作为同义词写入输出，然后是一个制表符，然后是 file2 中该行的其余部分。因为我们按标签拆分，所以我们必须将它们放回`"\t".join(...)`. 这是假设我是正确的，您想删除第 5 列 - 如果您不想删除它，那么它会更容易，因为您可以使用 file2 中的行，最后去掉换行符。

希望这更接近您的需求？

**原帖**

您没有给出文件大小的任何指示，但我将假设它们足够小以适合内存 - 如果没有，您的问题会变得有点棘手。

因此，第一步可能是打开文件#2 并读入数据。你可以用这样的代码来做到这一点：

```
file2_data = {}
with open("file2.txt", "r") as fd:
    for line in fd:
        items = line.split("\t")
        file2_data[frozenset(i.strip() for i in items[0].split("|"))] = items[1:] 
```

这将创建`file2_data`一个字典，将一个单词映射到该行上剩余项目的列表。正如我在之前的评论中提到的，您还应该考虑单词是否可以重复以及您希望如何处理。

在此之后，您可以读取第一个文件并将数据附加到该文件中的每个单词：

```
with open("file1.txt", "r") as fd:
    with open("output.txt", "w") as fd_out:
        for line in fd:
            words = set(i.strip() for i in line.split("///"))
            for file2_words, file2_cols in file2_data.iteritems():
                overlap = file2_words & words
                if overlap:
                    fd_out.write("///".join(overlap) + "\t" + "\t".join(file2_cols)) 
```

您最终应该得到的是每一行，`output.txt`其中两个文件中的单词列表至少有一个共同的单词，第一项是共同的单词，由`///`. 该输出文件中的其他列将是文件#2 中匹配行的其他列。

如果这不是你想要的，你需要更具体一点。

顺便说一句，可能有比我上面概述的 O(N^2) 方法更有效的方法（即它在一个整个文件中运行的次数与另一个文件中的行数一样多），但这需要更详细有关如何匹配线条的信息。

例如，您可以构建一个字典，将一个单词映射到该单词出现的行列表 - 这使得检查匹配行比上面执行的完整扫描快得多。但是，由于您似乎想要行之间的重叠，这显得有些繁琐，因此我认为上面概述的简单方法就足够了，无需更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:24:16.203

使用`str.replace`功能

```
with open('file1.txt', 'r') as f1:
    content1 = f1.read()
    content1 = content1.replace(' /// ', '\n').split('\n')
with open('file2.txt', 'r') as f2:
    content2 = f2.read()
    content2 = content1.replace('|', '\n').split('\n') 
```

然后使用列表理解

```
common_words = [i for i in content1 if i in content2] 
```

但是，如果您已经知道每个文件中的单词都不相同，则可以使用设置交集来使生活更轻松

```
common_words = list(set(content1) & set(content2)) 
```

然后将剩余部分输出到另一个文件：

```
common_words = [i + '\n' for i in common_words]  #so that we print each word on a new line

with open('common_words.txt', 'w') as f:
    f.writelines(common_words) 
```

至于您的“附加信息”，除非您告诉我们它的格式等，否则我无法为您提供帮助。

# actionscript-3 - 这种行为是预期的还是某种逻辑缺陷？

> ID：14288675
> 
> 赞同：0
> 
> 时间：2013-01-12T00:08:12.590
> 
> 标签：actionscript-3, setter, getter

我得到了这个私有变量，比如说 _var:int，它有一个 setter 和 getter。到目前为止，一切都很好。

var 的初始值为 500。

当我做一个 var -= 5; 不是从 var 中减去 5，而是减去 505，我在 getter 中放置了一个断点，并且确实到了那里。

那么，我对 setter 和 getter 的理解很差，还是这种行为不合逻辑？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:13:04.350

我假设您只是使用***var***作为您问题的快速示例，因为***var***是一个受限关键字。

下面是一个如何在 ActionScript 中使用 setter 和 getter 的示例。

```
var bar:Bar = new Bar();
trace(bar.foo); //500
bar.foo -= 5;
trace(bar.foo); //495

package
{   
    //Class
    public class Bar
    {
        //Variables
        private var _foo:int;

        //Constructor
        public function Bar()
        {
            _foo = 500;
        }

        //Set Foo
        public function set foo(value:int):void
        {
            _foo = value;
        }

        //Get Foo
        public function get foo():int
        {
            return _foo;
        }
    }
} 
```

您还可以通过将函数签名更改为***setFoo(value:int):void***和***getFoo():int***来避免使用***set***和***get***关键字。一些开发人员更喜欢这种方法，因为更明显的是，显式调用函数会建议进行额外的编程，而传统的 ActionScript setter 和 getter 则不会。

# ruby - 安装 Homebrew 时出错 - 未找到 Brew 命令

> ID：14288682
> 
> 赞同：34
> 
> 时间：2013-01-12T00:08:38.610
> 
> 标签：ruby, bash, terminal, osx-mountain-lion, homebrew

我周五的大部分时间都在尝试在我的新 MacBook Air（安装了 Mountain Lion）上安装最新版本的 Ruby。

我拥有所有最新版本的 XCode 和命令行工具。但我似乎无法让 Homebrew 工作！[这是我一直卡住的屏幕截图](https://imgur.com/of1Sa)（我是新用户，所以无法嵌入此图像）。

如您所见，我使用以下内容安装 Homebrew：

```
ruby -e "$(curl -fsSkL raw.github.com/mxcl/homebrew/go/install)" 
```

虽然有一个“警告”，但似乎安装工作正常：

```
Warning: /usr/local/bin is not in your PATH.
==> Installation successful! 
```

尽管如此，当我尝试运行“brew doctor”时，我收到了以下信息：

```
-bash: brew: command not found 
```

再一次，我正在尝试安装自制软件，这样我就可以安装最新版本的 ruby​​——我正在寻找学习用 ruby​​ 编写代码，但是如果我什至可以让开发环境运行，那就有点搞砸了！:)

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-12T00:15:47.820

警告告诉你出了什么问题。问题是`brew`保存在`/usr/local/bin`

所以，你可以试试`/usr/local/bin/brew doctor`

要永久修复它，请更改您的 bash 配置文件（主目录中的 .bashrc 或 .profile）并添加以下行：

```
export PATH=/usr/local/bin:$PATH 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-02-03T19:49:38.017

检查 XCode 是否安装。

```
gcc --version
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
brew doctor
brew update 
```

[http://techsharehub.blogspot.com/2013/08/brew-command-not-found.html](http://techsharehub.blogspot.com/2013/08/brew-command-not-found.html) “点击这里获取确切的指令更新”

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-10-18T17:32:07.567

```
nano ~/.profile 
```

添加这些行：

```
export PATH="$HOME/.linuxbrew/bin:$PATH"
export MANPATH="$HOME/.linuxbrew/share/man:$MANPATH"
export INFOPATH="$HOME/.linuxbrew/share/info:$INFOPATH" 
```

保存文件：

`Ctrl + X`然后`Y`然后`Enter`

然后渲染更改：

`source ~/.profile`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-06-27T13:52:38.470

这只是发生在我身上，但上面的建议都没有奏效。我更改了目录（“cd ~/tmp”），突然命令

ruby -e "$(curl -fsSL [https://raw.github.com/Homebrew/homebrew/go/install](https://raw.github.com/Homebrew/homebrew/go/install) )"

为我工作。在更改目录之前，我一直在一个 Git 存储库的目录中。也许这会干扰 Brew 安装脚本中的 ruby​​ 和 Git 命令。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-29T13:33:08.430

您可以在终端中运行

`ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/linuxbrew/go/install)"`

然后安装`https://github.com/robbyrussell/oh-my-zsh`.

当那些 complate 运行时，即 pico 编辑器`pico .zshrc`并通过这些行：

```
export PATH="$HOME/.linuxbrew/bin:$PATH"
export MANPATH="$HOME/.linuxbrew/share/man:$MANPATH"
export INFOPATH="$HOME/.linuxbrew/share/info:$INFOPATH" 
```

记住使用`brew doctor`:)

![在此处输入图像描述](../Images/2a5fcea0330e444315a7853f0209dfe2.png)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-19T17:27:28.890

尝试这个

```
ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Linuxbrew/linuxbrew/go/install)" 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2013-12-24T13:05:28.320

你可以使用这个：

```
ruby -e "$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)" 
```

安装自制软件。

# google-closure - 大豆文件中的当前日期和时间

> ID：14288683
> 
> 赞同：2
> 
> 时间：2013-01-12T00:08:39.220
> 
> 标签：google-closure

有没有办法在大豆模板本身中获取当前日期和时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T23:07:14.400

我相当有信心你不能这样做。您可以实现自己的[自定义函数](https://developers.google.com/closure/templates/docs/plugins#functions)，但将当前日期/时间字符串作为参数传递给模板可能会容易得多。

# java - 试图从另一个类调用一个号码并通过 jlabel 显示它

> ID：14288684
> 
> 赞同：0
> 
> 时间：2013-01-12T00:08:49.707
> 
> 标签：java, swing, gaussian

您好，我在这里遇到了一个小问题，我正在尝试调用在另一个类中生成的随机数并通过第二类（jform）中的 jlabel 显示它，我有点迷路了。数字生成是双倍的。代码

```
GaussianGenerator num = new GaussianGenerator();//calling another class
CriminalDetails() 
{
    initComponents();
    double number = 0;
    num.GaussianGenerator(number);
    CriminalID.setText(Double.toString(number));//CriminalID jfield
} 
```

我在 jfield 上得到的数字是在“双数”中初始化的 0，但我想获得在 GaussianGenerator 类中生成的数字。感谢您的观看和您的时间，感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:15:16.543

num 是数字生成器的一个实例。您应该通过在数字生成器对象的实例上调用方法并将其分配给数字来设置数字的值。像这样（我不熟悉你的其他班级）：

```
GaussianGenerator num = new GaussianGenerator();//calling another class
CriminalDetails() 
{
    initComponents();
    double number = 0;
    number = num.getNextValue();
    CriminalID.setText(Double.toString(number));//CriminalID jfield
} 
```

还是 GaussianGenerator 也是方法的名称？从设计的角度来看是个坏主意。该方法不应将其作为参数传递给方法，而应仅返回生成的值：

数字 = 数字.GaussianGenerator();

在 Java 中，如果这是您想要做的，您不能通过引用传递原语。但是，您可以使用对象（例如 Double）来执行此操作，但这是糟糕的设计，因为 double 就足够了。您还应该阅读有关 Java 编码约定的优秀教程，以便学习如何正确命名和大写方法。所以你会看到这是更好的编码：

```
number = num.getNextValue(); 
```

# google-chrome - 在从 bash 启动的 google chrome 中激活 liveReload 监控 chrome-extension

> ID：14288687
> 
> 赞同：1
> 
> 时间：2013-01-12T00:09:06.623
> 
> 标签：google-chrome, google-chrome-extension, livereload

我正在尝试开发一个 bash 脚本，该脚本启动 google-chrome 并安装了名为 LiveReload 的扩展程序，该扩展程序用于监视 Web 更改。关键是当网页打开时，您必须触发 LiveReload 才能开始监控，而我想自动执行此操作。

是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:51:47.777

最直接的方法是在开发过程中直接将[livereload.js](https://github.com/livereload/livereload-js/raw/master/dist/livereload.js)脚本嵌入到您的页面中：

```
<script src="js/vendor/livereload.js?host=localhost&port=32579"></script> 
```

如果你省略`host`和`port`参数，LiveReload 将根据标签的`src`属性推断它们。`script`如果将查询参数添加到*页面*`LR-verbose`的 URL （而不是标签），LiveReload 会将有用的调试信息转储到附加到页面的控制台中。例如，*`livereload.js``http://localhost:8080/nextbigthing/ideas.html?LR-verbose`*

 *由于您只是手动加载与 LiveReload 扩展程序相同的文件（从其内部后备副本或从您的 LiveReload 服务器），这就像您单击浏览器操作按钮一样。*

# ruby - Ruby json gem 安装后不显示

> ID：14288688
> 
> 赞同：1
> 
> 时间：2013-01-12T00:09:14.960
> 
> 标签：ruby, json, rubygems

所以我`json`使用以下方法安装了gem：

```
sudo gem install json 
```

一切似乎都安装正确，但是当我打电话时，`gem list`我得到了这个：

```
bundler (1.2.1)
hpricot (0.8.6)
i18n (0.6.1)
mail (2.4.4)
mime-types (1.19)
polyglot (0.3.3)
rack (1.4.1)
rack-protection (1.2.0)
rake (10.0.0)
rubygems-bundler (1.1.0)
rvm (1.11.3.5)
sinatra (1.3.3)
tilt (1.3.3)
treetop (1.4.12) 
```

正如你所看到的，没有`json`gem，它正在制作它，所以我可以运行我的`Ruby`程序。任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:22:40.883

您使用安装了 JSON，`sudo`但您似乎正在运行 RVM。在 RVM 下，`sudo`用于安装 gems 是[一个很大的 NO-NO](https://rvm.io/rubies/rubygems/)并导致此类问题。

`sudo gem install json`将它安装在系统中预先存在的 JSON 上，而不是安装到 RVM 控制的 Ruby 中。

再做一次，但不要使用`sudo`，看看会发生什么。

而且，除非您了解发生了什么`sudo gem install json`或其他一些 gem，否则不要使用`sudo gem install`or `sudo gem remove`。

编辑：

根据 RVM 网站上的[故障排除页面](https://rvm.io/support/troubleshooting/)，以下是删除系统范围安装的方法：

```
#!/bin/bash
/usr/bin/sudo rm -rf $HOME/.rvm $HOME/.rvmrc /etc/rvmrc /etc/profile.d/rvm.sh /usr/local/rvm /usr/local/bin/rvm
/usr/bin/sudo /usr/sbin/groupdel rvm
/bin/echo "RVM 已删除。请检查所有 .bashrc|.bash_profile|.profile|.zshrc 中的 RVM 源代码行并删除
或注释掉这是否是每用户安装。”

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T18:56:15.983

如果您需要`sudo`安装权限，`gem`您应该使用：`rvmsudo`

在这种情况下，它解决了我的问题，而无需重新安装所有东西。

# spring - Spring MVC 和注释，如何在表单包含不同字段的情况下执行验证器，具体取决于组合框

> ID：14288695
> 
> 赞同：0
> 
> 时间：2013-01-12T00:09:38.943
> 
> 标签：spring, spring-mvc, annotations, hibernate-validator

我正在尝试完成以下任务：

我有一个以组合框开头的表单，假设用户必须选择“学生”或“教师”。

“学生”和“教师”都将在表单中显示相同的字段，但如果选中“教师”，我将显示更多字段（起初是隐藏的，当用户选择时我将使用 jQuery 显示“老师”）。

问题是我希望这些字段只有在选择“教师”时才是强制性的。

我不知道如何管理它，我认为使用以下注释是不可能的：

```
@NotBlank
private String teacherCourse; 
```

因为当用户选择“学生”单选按钮时，该字段将始终为空白。

任何想法？我可以做一个自定义验证方法吗？如何做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T08:52:51.600

您可以使用[验证组](http://docs.jboss.org/hibernate/stable/validator/reference/en-US/html/validator-usingvalidator.html#validator-usingvalidator-validationgroups)来区分应用于两个实体的约束和仅应用于其中一个实体的约束：

```
public interface TeacherConstraints {}

@NotBlank(groups=TeacherConstraints.class)
private String teacherCourse; 
```

验证对象时，根据组合框中选择的类型指定要验证的组：

```
//teacher
Set<ConstraintViolation<Object>> violations = validator.validate(object, TeacherConstraints.class);

//student
Set<ConstraintViolation<Object>> violations = validator.validate(object, Default.class); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T05:38:49.507

过去我采取了两种方法。

使用提交上的枚举字段来确定要执行的验证类型。这是灵活的并且允许任意数量的自定义验证方法。

另一种方法是使用学生和教师类都扩展的基本命令对象。这允许这两种类型扩展和覆盖验证和字段。这要求使用单独的方法来绑定每种类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T05:26:55.430

您可以使用 javascript 或 JQuery 进行前端验证...取决于您的组合框值。如果是老师或学生

```
function validate(){

 var combox_value = document.getElementbyID("combo_box").value;

     if(combox_value == "Teacher"){
     //Validate for Teacher fields
        var input_text1 = document.getElementbyID("input_text"2).value;
        if(input_text1=="" || input_text1==null){
        alert("Field cannot be empty");
        return false;
        }
        return true;
     }
     else if(combox_value == "Student"){
     //Validate for Student fields
        var input_text2 = document.getElementbyID("input_text2").value;
        if(input_text2=="" || input_text2==null){
        alert("Field cannot be empty");
        return false;
        }
        return true;
     }

} 
```

对于 JQuery，请尝试这些链接以获取实时示例...
[http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/](http://speckyboy.com/2009/12/17/10-useful-jquery-form-validation-techniques-and-tutorials-2/)
[http://www.jeasyui .com/tutorial/form/form3.php](http://www.jeasyui.com/tutorial/form/form3.php)
[http://www.camcloud.com/blog/jquery-form-validation-tutorial](http://www.camcloud.com/blog/jquery-form-validation-tutorial)

# latex - pandoc 没有正确转换乳胶样式的引用

> ID：14288699
> 
> 赞同：12
> 
> 时间：2013-01-12T00:10:06.150
> 
> 标签：latex, markdown, pandoc, biblatex

我想`\cite{key}`在我的降价中使用乳胶风格的引用，这样我就可以使用 pandoc 很好地创建 tex 和 pdf 文档。但是，当我引用某些内容时，它会在括号中显示关键字而不是引用样式，例如作者姓名或引用编号。换句话说，我希望它在 PDF 中显示为“这是我的引文 [1]”，而是显示为“这是我的引文 [mykey]”。`# References`此外，添加标题后，我的参考列表没有显示。这里发生了什么？

下面是用于生成此命令的示例命令以及示例文件和我当前不正确的输出文件 ( `test.pdf`)。

`pandoc test.md --biblatex --biblio test.bib --csl chicago-author-date.csl -o test.pdf`

**测试.md**

```
% My test pandoc-ument

I want to reference this: \cite{Gepasi1993}

# References 
```

**测试.bib**

```
@ARTICLE{Gepasi1993,
    Author         = {P. Mendes},
    Journal        = {Comput. Applic. Biosci.},
    Pages          = {563--571},
    Title          = {GEPASI: A software package for modelling the dynamics, steady states and control of biochemical and other systems.},
    Volume         = {9},
    Year           = {1993}
} 
```

**测试.pdf**

```
I want to reference this: [Gepasi1993] 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-12T17:58:35.737

该`--biblatex`选项不适用于直接在 markdown 中编写 biblatex。它的作用是转换原生 pandoc markdown 引用，比如

```
[@Gepasil1993, p. 5] 
```

到 LaTeX 输出中的 biblatex 引用。

如果您使用 pandoc markdown 引用而不是 LaTeX 引用，您会发现引用有效。使用这个命令：

```
pandoc test.md --biblio test.bib --csl chicago-author-date.csl -o test.pdf 
```

使用此输入：

```
I want to reference this: [@Gepasi1993] 
```

Pandoc 的引用格式记录在[Pandoc 用户指南](http://johnmacfarlane.net/pandoc/README#automatic-citations)中。

如果您真的想在降价输入中使用原始 biblatex 引文，可以，但是您需要自己处理参考书目内容。你会这样做：

```
pandoc test.md --parse-raw -t latex -s > test.tex 
pdflatex test 
biber test 
pdflatex test 
pdfltatex test 
```

# javascript - 为什么 $(document).ready() 的位置很重要？

> ID：14288701
> 
> 赞同：1
> 
> 时间：2013-01-12T00:10:17.860
> 
> 标签：javascript, jquery, dom, document-ready

我认为 $(document).ready(...) 中的脚本总是会在加载 DOM 后执行。因此，如果 $(document.ready(...) 进入头部或主体，则无关紧要。但是，下面的代码不会像我想要的那样在屏幕上生成“苹果”。如果我不过，在页面底部找到 giveApples() 函数，它可以工作。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" 
                "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(giveApples());
function giveApples() {
    $("#appleTree").html("apples");
}
</script> 
</head>
<body>
<div id="appleTree"></div>
</body>
<script>
//$(document).ready(giveApples());
</script>
</html> 
```

谁能纠正我对 DOM、页面加载、脚本标签位置、(document).ready() 或导致此问题的任何其他内容的误解？我对网络编程还是很陌生。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-12T00:12:37.387

那是因为您实际上并没有将事件处理程序绑定到`ready`事件。您`giveApples`立即调用并将其返回值 ( `undefined`) 作为事件处理程序传递给绑定（静默失败）。您需要将函数*传递*`.ready()`给，而不是*调用*它！

```
$(document).ready(giveApples); 
```

注意缺少的括号。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-12T00:12:56.393

但事实并非如此。问题是你不是`giveApples`作为参数传递，而是它的返回值，因为你正在调用它（因为`()`）。为了使它工作，不要放括号：

```
$(document).ready(giveApples); 
```

根据您当前的代码，传递给的值`$(document).ready`is `undefined`，因为`giveApples`不返回任何值。

你也可以这样做：

```
$(document).ready(function(){
    giveApples();    //However, if you access the 'this' keyword inside the giveApples function, it will point to 'window', and not 'document'
}); 
```

`alert`如果你有这两个值，你可以看到我上面解释的内容：

```
alert(giveApples);    //Shows the giveApples function body, properly
alert(giveApples());  //Shows undefined, since giveApples is being called and does not return any value 
```

当您使用 DOM 事件（`onload`,`onclick`等）时也是如此。你这样做：

```
window.onload = myFunction; 
```

并不是：

```
window.onload = myFunction(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T00:13:42.617

## 你缺少一个功能

使用这种语法：

```
$(document).ready(giveApples()); 
```

您将 giveApples 的结果作为要在文档准备好时执行的代码传递。此外，在调用它的时候，这个函数还没有被声明。

## 正确的语法

这会起作用：

```
$(document).ready(function() {
    giveApples();
}); 
```

就像这样：

```
$(document).ready(giveApples); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T00:12:26.493

回答你的名义问题，因为其他人已经用与 document.ready() 的位置无关的代码确定了你的问题的根源......

这并不重要。这只是很多人遵循的标准惯例。

很多人也支持将`<script>`标签作为标签中的最后一个元素`<body>`。

证明：看到了吗？这是有争议的。我什至投了反对票。=)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T00:42:41.510

您可以将 srcipt 放在您想放置的任何位置。html 将从上到下执行。是的，$(document).ready(...) 将始终在 DOM 加载后执行。但是在您的代码中，您有将函数放在 $(document).ready 之外。这意味着它将在 DOM 加载时执行。也许你可以这样做：$(document).ready(function giveApples(){$("#appleTree").html （“苹果”）;}）。如果你想学习JQuery，我会给你一个链接，我也是新手。非常棒。所以玩得开心。

[30 天学习 jquery](https://tutsplus.com/course/30-days-to-learn-jquery/)

[w3school](http://www.w3school.org/)

# image - 如何完美对齐 2 个扫描的多项选择纸图像？(Matlab)

> ID：14288705
> 
> 赞同：1
> 
> 时间：2013-01-12T00:10:43.810
> 
> 标签：image, matlab, image-processing, alignment, compare

有没有办法对齐 2 个扫描的多项选择纸图像？也许通过使用条形码自动对齐它们或使用特定的形状，以便我可以在 Matlab 中比较或找到两篇论文之间答案的差异？

这是[参考图像](http://tinypic.com/view.php?pic=24pmgbb&s=6)。

这是[我要更改的图像](http://tinypic.com/view.php?pic=2ntjqiq&s=6)，它将覆盖参考图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T01:37:07.797

您的问题有时被称为“刚性图像注册”，并且有许多软件包可以解决此问题。例如，在 MATLAB Central 上查看以下内容。

[http://www.mathworks.com/matlabcentral/fileexchange/19086-automatic-2d-rigid-body-image-registration](http://www.mathworks.com/matlabcentral/fileexchange/19086-automatic-2d-rigid-body-image-registration)

这里是“刚性”而不是“弹性”，因此只考虑平移和旋转，但不考虑拉伸，因为您使用纸张。

# c++ - 类中的 C++ 枚举 - 声明的顺序很重要？

> ID：14288713
> 
> 赞同：2
> 
> 时间：2013-01-12T00:11:24.493
> 
> 标签：c++, visual-studio-2010

我正在使用 Visual Studio 2010，但不太明白，这个类怎么错了（语法错误：标识符 'EnumType'）并且无法编译：

```
class BrokenClassWithEnum
{
private:
    void useEnum (EnumType enumType); //syntax error : identifier 'EnumType '
public:
    enum EnumType 
    {
        VAL1,
        VAL2,
        VAL3
    };
} 
```

这没关系：

```
class WorkingClassWithEnum
{
public:
    enum EnumType 
    {
        VAL1,
        VAL2,
        VAL3
    };
private:
    void useEnum (EnumType enumType);
} 
```

班级范围发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T00:16:09.547

我不认为定义的顺序（不是声明）很重要，但是前向声明将解决这个错误 - 至少在 MSVC++ 6 中。在 MSVC++ 6 之外，您应该指定存储类型来前向声明枚举（指定前向枚举中的存储类型符合 C++0x 标准）

注意：VC++ 6 将允许省略存储类型，但如果您正向声明枚举，则应声明存储类型（见下文）：

### 这将解决 VC++6 中的错误。但是，VC++6 似乎不支持 C++0x 标准要求的类内枚举的存储类型：

```
class BrokenClassWithEnum {
public:
    enum EnumType;

private:
    void useEnum (EnumType enumType); 
public:
    enum EnumType {
        VAL1,
        VAL2,
        VAL3
    };
}; 
```

* * *

### 通常在符合 C++0x 的编译器中的 IE，你会使用类似的东西：

```
class BrokenClassWithEnum {
public:
    enum EnumType : int;

private:
    void useEnum (EnumType enumType);
public:
    enum EnumType : int {
        VAL1,
        VAL2,
        VAL3
    };
}; 
```

**注意：**枚举的前向声明在某些但不是所有 C++ 版本中是可能的：

[在 C++ 中转发声明一个枚举](https://stackoverflow.com/questions/71416/forward-declaring-an-enum-in-c)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T00:16:37.263

在类定义本身中，项目必须按顺序出现（依赖项目出现在依赖它们的项目之前），就像它们在任何其他范围内一样。在类方法*体内*（即使是内联的），类的整个定义都是可用的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T01:35:29.923

在 C++ 中，任何引用的非内置名称都必须在更早的地方声明。

这条规则似乎对类定义有一个例外，因为以下工作正常：

```
struct S
{
    void foo() { cout << x_ << endl; }
    int x_;
    S(): x_( 42 ) {}
}; 
```

但是，关于使用前声明的规则适用于转换后的代码

```
struct S
{
    inline void foo();
    int x_;
    inline S();
};

void S::foo() { cout << x_ << endl; }
S::S() : x_( 42 ) {} 
```

这是编译器“正确”看到的。在这里，没有使用任何尚未声明的东西。

解决您的问题的正确 C++03 解决方案是在第一次使用之前定义枚举类型。使用 C++11，您可以选择前向声明它，但必须指定基础类型，

> **C++11 §7.2/3**：
> “*不透明枚举声明*要么是在当前范围内重新声明枚举，要么是声明新枚举。[*注意：*由*opaque-enum-declaration 声明的枚举*具有固定的底层类型，并且是完整的类型。枚举器列表可以在稍后的重新声明中使用*枚举说明符*提供。*—结束注释*] 以后不应将范围枚举重新声明为无范围或具有不同的基础类型。以后不应将无范围的枚举重新声明为有范围的枚举，并且每个重新声明都应包括一个*枚举库*，指定与原始声明中相同的基础类型。”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2022-02-03T22:54:52.453

我相信可以在类中的声明之前访问成员变量，因为类验证或编译是在两遍中完成的。

# mysql - Phpmyadmin 无法连接到 mysql：2054 - 不支持连接到 3.22、3.23 和 4.0 服务器

> ID：14288714
> 
> 赞同：0
> 
> 时间：2013-01-12T00:11:29.497
> 
> 标签：mysql, phpmyadmin, xampp

我已经安装了新的 XAMPP，版本 1.8.1，它可以工作，但我无法从 phpmyadmin 连接到数据库。错误消息说我有旧的 mysql 数据库。我下载了 5.5 版并安装了它，但我仍然遇到同样的错误。在 XAMPP 中启动 apacha 和 mysql。当我安装 mysql 时，我为 root 创建了密码，但没有创建第二个用户。也许在 phpmyadmin 配置中我也应该更改 root 的密码？

错误：

错误

MySQL 说：文档

# 2054 - 不支持连接到 3.22、3.23 和 4.0 服务器

配置中定义的 controluser 连接失败。phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T10:03:25.227

更改为新的mysql服务器或更改phpmyadmin的版本

# javascript - Backbone.Marionette.ItemView 渲染后元素没有准备好？

> ID：14288715
> 
> 赞同：5
> 
> 时间：2013-01-12T00:12:05.817
> 
> 标签：javascript, ajax, twitter-bootstrap, backbone.js, marionette

即使在 Backbone.Marionette.ItemView 的 onRender 方法中，我也无法访问元素。

例如，我有：

模板：

```
<input type="text" id="searchBox">` 
```

项目视图：

```
View = Backbone.Marionette.ItemView.extend
    template: searchTemplate
    onRender:
        @setTypeahead ['a', 'b', 'c', 'd']
    setTypeahead: (valueArray) ->
        console.log $('#searchBox')
        $('#searchBox').typeahead
            source: valueArray 
```

出乎意料的是，记录到控制台的对象不包含输入元素。选择器不起作用。这是为什么？

Marionette 的 github 上的小代码块内的注释提到“在这里操作[。](https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.itemview.md#render--onrender-event)`el`它已经被渲染，并且充满了视图的 HTML，准备好了。” 除非我误解了这一点，否则我认为模板将被渲染并准备好在 ItemView 的 onRender 函数中进行操作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T04:34:26.700

您需要将 jQuery 选择器的范围限定为视图，因为 HTML 元素尚未添加到 DOM。

```
 View = Backbone.Marionette.ItemView.extend
    template: searchTemplate
    onRender:
        @setTypeahead ['a', 'b', 'c', 'd']
    setTypeahead: (valueArray) ->
        console.log $('#searchBox')

        @$('#searchBox').typeahead
            source: valueArray 
```

之所以使用`onShow`有效，是因为元素此时已添加到 DOM 中。但这是一个坏主意，因为它会允许选择器在页面中找到具有指定查询的所有元素，而不仅仅是针对此特定视图实例的元素。通过使用`@$("#searchBox")`，您将 jQuery 选择器的范围限定为视图实例，并且`$el`即使视图尚未添加到 DOM 也能够在视图中找到元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T00:22:42.240

好的，当然，一旦我最终决定在这里提问，我就自己回答这个问题。

我应该使用`onShow`而不是`onRender`. IMO，木偶文档似乎仍然具有误导性。

# sql-server-2008 - 休眠日期映射到 SQL Server 日期时间的周期为 1 毫秒

> ID：14288724
> 
> 赞同：1
> 
> 时间：2013-01-12T00:12:37.910
> 
> 标签：sql-server-2008, hibernate-mapping, java.util.date

我在 stackoverflow 上进行了很多搜索，发现将 java.util.Date 映射到 SQL 数据库通常会导致问题，可能的解决方案是

*   创建自己的（使用 jodatime）休眠用户类型
*   在持久化 db 之前截断 java.util.Date（失去精度）

然而，在我见过的所有情况下，问题是当保存日期时，最后一个字段（例如毫秒）丢失了（例如 000）。就我而言，它有点不同，请考虑以下代码：

```
public class TestDateTime implements Serializable {
    private long id;
    private Date created;
    private Calendar published;

    public TestDateTime(Date created, Date published) {
        this.created = created;
        this.published = GregorianCalendar.getInstance();
        this.published.setTime(published);
    }
}

<class name="TestDateTime" table="TestDateTime">
    <id name="id" type="long" column="id">
        <generator class="identity" />
    </id>
    <property name="created" column="created"/>
    <property name="published" column="published"/>
</class>

private void testSaveDate(HibernateTemplate hibernateTemplate) {
    long time = 1357747095488l;

    TestDateTime tdt = new TestDateTime(new Date(time), new Date(time));

    System.out.println("Before saving created:" + tdt.getCreated().getTime() + " (" + tdt.getCreated() + ")"
        + ", published:" + tdt.getPublished().getTime().getTime() + " (" + tdt.getPublished().getTime() + ")");
    Serializable id = hibernateTemplate.save(tdt);

    TestDateTime saved = hibernateTemplate.get(TestDateTime.class, id);

    System.out.println("After saving created:" + saved.getCreated().getTime() + " (" + saved.getCreated() + ")"
        + ", published:" + saved.getPublished().getTime() + " (" + saved.getPublished() + ")");
} 
```

在控制台上产生以下输出：

```
[INFO] Before saving created:1357747095488 (Wed Jan 09 16:58:15 CET 2013), published:1357747095488 (Wed Jan 09 16:58:15 CET 2013)
[INFO] Hibernate: insert into TestDateTime (created, published) values (?, ?)
[INFO] Hibernate: select testdateti0_.id as id42_0_, testdateti0_.created as created42_0_, testdateti0_.published as published42_0_ from TestDateTime testdateti0_ where testdateti0_.id=?
[INFO] After saving created:1357747095487 (2013-01-09 16:58:15.487), published:Wed Jan 09 16:58:15 CET 2013 (java.util.GregorianCalendar[time=1357747095487,areFieldsSet=true,areAllFieldsSet=true,lenient=true,zone=sun.util.calendar.ZoneInfo[id="Europe/Berlin",offset=3600000,dstSavings=3600000,useDaylight=true,transitions=143,lastRule=java.util.SimpleTimeZone[id=Europe/Berlin,offset=3600000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=2,startMonth=2,startDay=-1,startDayOfWeek=1,startTime=3600000,startTimeMode=2,endMode=2,endMonth=9,endDay=-1,endDayOfWeek=1,endTime=3600000,endTimeMode=2]],firstDayOfWeek=2,minimalDaysInFirstWeek=4,ERA=1,YEAR=2013,MONTH=0,WEEK_OF_YEAR=2,WEEK_OF_MONTH=2,DAY_OF_MONTH=9,DAY_OF_YEAR=9,DAY_OF_WEEK=4,DAY_OF_WEEK_IN_MONTH=2,AM_PM=1,HOUR=4,HOUR_OF_DAY=16,MINUTE=58,SECOND=15,MILLISECOND=487,ZONE_OFFSET=3600000,DST_OFFSET=0]) 
```

因此，将日期保存到 SQL 服务器后，它将 1ms 从**1357747095488**更改为**1357747095487**。这是 SQL Server 日期时间类型的预期行为吗？

此外，我不得不提一下，Date 对象是由 JackRabbit 在签入期间创建的，因此我无法在 JackRabbit 中截断该日期，以使其与存储在 SQL Server 中的值同步。

问题是，在我的应用程序中，我必须比较这些日期，一些来自 JackRabbit，一些来自数据库（最初也是由 jackrabbit 创建的）。由于 sql server 中的日期版本与 JackRabbit 中的不同，我无法正确比较它们。

对我来说最好的解决方案是什么，即多数据库兼容（我们同时使用 MySql 和 MsSql 2008 R2）。是否有标准方法将 java.util.Date 映射到 bigint 列，以便我可以自己存储 long 值？或者我应该创建我的用户类型？这是一个坏主意，因为我仍然可以比较查询中的 long（我假设 Hibernate 也有正确的映射）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T03:04:03.407

SQL Server 中数据类型的准确度`DateTime`约为 3ms。见[这里](http://msdn.microsoft.com/en-us/library/ms187819.aspx)。`DateTime2`数据类型更准确。见[这里](http://msdn.microsoft.com/en-us/library/ms186724.aspx)。

# java - 我不知道这个线程有什么问题，我试图理解多线程

> ID：14288725
> 
> 赞同：3
> 
> 时间：2013-01-12T00:12:39.710
> 
> 标签：java, multithreading

很抱歉，这太长了，而且似乎要求太多，但是如果您一眼就能找出问题所在，请告诉我。

在这个程序中，我尝试在每次获取一个标记时从键盘输入一些单词（短语）并将其分配给一个对象`sharedStorer`（然后打印分配的值以跟踪输入的内容，因为我有一系列单词要单独输入） . 这是由一个线程完成的（`Retriever`哪个类的线程`implements` `Runnable`）

还有另一个线程`class TokenReader`读取`sharedStorer`并打印出来。`TokenReader`等待`Retriever`输入，当`Retriever`尝试输入而`TokenReader`尚未读取前一个令牌时`Retriever`等待。

我的问题是，最后`TokenReader`永远等待`Retriever`它完成了它的任务，所以程序永远不会终止。

这是我用来执行所需任务的所有 4 个类（和 1 个接口）。

```
package Multithreads;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class ExerciseTest {

public static void main(String[] args) {

    ExecutorService app=Executors.newFixedThreadPool(2);

    Storer st=new SyncStorer();

    System.out.println("Operation performed\t\t Value");
    try{
    app.execute(new Retriever(st));
    app.execute(new TokenReader(st));
    }catch(Exception e){
        e.printStackTrace();
    }
    app.shutdown();
}

} 
```

* * *

```
package Multithreads;

public interface Storer {

public void set(String token);
public String get();
} 
```

* * *

```
package Multithreads;

import java.util.NoSuchElementException;
import java.util.Random;
import java.util.Scanner;
import java.util.StringTokenizer;

public class Retriever implements Runnable {

private Scanner scanner;
private String token;
private String currentToken;
private Storer sharedStorer;
private Random rd=new Random();
public int tokenLength=0;

public Retriever(Storer st) {

    sharedStorer=st;

}
public Retriever() {

}
@Override
public void run() {

    System.out.println("Enter a phrase");
    scanner = new Scanner(System.in);
    token=scanner.nextLine();
    StringTokenizer tokenizer=new StringTokenizer(token);

    while(tokenizer.hasMoreTokens())
    {
        tokenLength++;
        currentToken=tokenizer.nextToken();
        try{

        Thread.sleep(10*rd.nextInt(2000));
        sharedStorer.set(currentToken);

        }catch(NoSuchElementException e){
            e.printStackTrace();

        }catch(InterruptedException e){
            e.printStackTrace();
        }
    }
    System.out.println("Done Inputting The phrase");

}

} 
```

* * *

```
package Multithreads;

import java.util.Random;

public class TokenReader implements Runnable {

private Random rd=new Random();

private Storer sharedStorer;
Retriever rtr=new Retriever();
private int count=rtr.tokenLength;

public TokenReader(Storer st) {
    sharedStorer=st;
}

@Override
public void run() {
String str="null";
    int i=0;
    try {
        while(i &lt;= count){
        Thread.sleep(15*rd.nextInt(2000));
        str=sharedStorer.get();

        }
    } catch (InterruptedException e) {

        e.printStackTrace();
    }

    System.out.println("Consumer done reading");
}

} 
```

* * *

```
package Multithreads;

import java.util.concurrent.locks.Condition;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class SyncStorer implements Storer {

private Lock accessLock=new ReentrantLock();

private Condition canInput = accessLock.newCondition();
private Condition canRead = accessLock.newCondition();

private String string="null";
private boolean isEmpty=false;

@Override
public void set(String token) {
    accessLock.lock();
    try
    {
        while(isEmpty){
            System.out.println("Retriever waiting");
            canInput.await();
        }
        string=token;
        isEmpty=true;
        System.out.println("Retriever inputs\t\t "+string);

        canRead.signal();
    }catch(InterruptedException e){
        e.printStackTrace();
    }finally{
        accessLock.unlock();
    }

}

@Override
public String get() {

    accessLock.lock();
    try{
        while(!isEmpty)
        {               
            System.out.println("No token to read");
            canRead.await();
        }
        isEmpty=false;
        System.out.println("TokenReader reads\t\t "+string);

        canInput.signal();
    }catch(InterruptedException e)
    {
        e.printStackTrace();
    }finally{
        accessLock.unlock();
    }
    return string;
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T00:32:31.127

导致应用程序永远运行的问题是这是一个无限循环：

```
 while(i <= count){
        Thread.sleep(15*rd.nextInt(2000));
        str=sharedStorer.get();

    } 
```

因为你没有递减`i`。您试图用来跳出循环的基于中断的机制（通过异常！）也被破坏了。

该`Thread.sleep(15*rd.nextInt(2000))`行看起来像一个hack，因此您可以`InterruptedException`在任务被中断时得到一个，但是：

*   *随机*数毫秒的睡眠点让我逃脱了，并且
*   打电话会更简单`Thread.interrupted()`。

此外，该*方法*无论如何都不可靠，因为中断有可能*在*您等待/测试它之后发生；即在`get()`通话中。如果那个`get()`调用永远不会返回，因为它`store`是空的并且检索器已经结束......那么你将“永远”等待。

最后还有一个问题。`app.shutdownNow()`如果您希望执行程序服务中断工作线程，则需要调用...

* * *

如果我试图实现这个（使用中断），我会改变它，这样`get`就`set`不会“吞噬”中断。如果他们看到中断，他们应该：

*   允许`InterruptedException`传播（在相关清理之后），或
*   在异常处理程序中再次设置线程的中断标志。

# javascript - 如何将逗号分隔的字符串转换为数组？

> ID：14288727
> 
> 赞同：15
> 
> 时间：2013-01-12T00:12:54.620
> 
> 标签：javascript

> **可能重复：**
> [将 JS 对象转换为 JSON 字符串将](https://stackoverflow.com/questions/4162749/convert-js-object-to-json-string)
> [逗号分隔的值存储到数组中](https://stackoverflow.com/questions/4526459/store-comma-separate-values-into-array)

我有一个包含用逗号分隔的值的字符串：

```
"1,4,5,11,58,96" 
```

我怎么能把它变成一个对象？我需要这样的东西

```
["1","4","5","11","58","96"] 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-12T00:16:02.463

这会将其转换为一个数组（这是您指定的 JSON 表示形式）：

```
var array = myString.split(','); 
```

如果您需要字符串版本：

```
var string = JSON.stringify(array); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T04:44:11.847

在 JSON 中，数字不需要双引号，因此您可以将`[`and附加`]`到字符串的任一端，从而生成字符串，`"[1,4,5,11,58,96]"`并且您将拥有一个 JSON 数字数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T00:17:18.960

使它成为一个数组

```
var array = myString.split(','); 
```

# ios - 是否可以在背景层下放置一个 CAGradientLayer？

> ID：14288729
> 
> 赞同：1
> 
> 时间：2013-01-12T00:13:02.680
> 
> 标签：ios, xamarin.ios

我正在向自定义按钮添加渐变层，`this`以下代码中的引用：

```
//a custom gradient
var layerGradient = new CAGradientLayer();

//the gradient colors are the base color to the modified version
layerGradient.Colors = new CGColor[]{color.CGColor, color2.CGColor};

//add the gradient as a sublayer in the button
this.Layer.InsertSublayer(layerGradient, 0); 
```

这工作正常，渐变做它应该做的。但是，如果按钮有背景图像，则不会显示背景。渐变似乎位于背景上方的一层上，将其遮蔽。有什么办法可以解决这个问题，还是我需要在自己的图层上绘制背景并手动添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T23:12:33.483

我通过将背景图像添加为自己的图层来解决此问题，然后在其下方添加渐变图层：

```
mImageView = new UIImageView();
this.Layer.InsertSublayer(mImageView.Layer, 0);
mImageView.Image = mImage; 
```

所以这使得 UIImageView 层来保存图像。然后我像我的问题一样调用代码，在这个 ImageView 层**下面插入渐变层，它就可以工作了。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:36:57.717

没有尝试过，但可能`insertSublayer:below:`是您正在寻找的。

```
- (void)insertSublayer:(CALayer *)aLayer below:(CALayer *)sublayer 
```

# css - 基于 Web 的开发过程中的背景图像路径

> ID：14288733
> 
> 赞同：5
> 
> 时间：2013-01-12T00:13:23.053
> 
> 标签：css, image, background, divshot, jetstrap

我正在与一个名为 Jetstrap 和 Divshot 的基于云的前端开发人员一起玩。在使用像这样的基于 Web 的软件时，我想如何为 css“背景图像”编写 PATH 有点困惑。我在哪里存储图像以及如何调用它？我想在导出前预览背景图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T09:10:07.053

由于我在两个站点上都找不到任何上传功能，我想您只能分配一个他们可以通过网络访问该图像的图像。

你可以这样做：

1.  单击一个元素。

2.  为该元素分配一个类。

3.  单击右下角的“编辑 CSS”或“CSS/HTML”。

4.  为第 2 步分配的类编写 css 规则。

屏幕截图：

![divshot 快照](../Images/d5687bf4dd8614ab8f6d27bcd86d1f63.png)

![喷气机快照](../Images/baf0a9d5128d9eae60fc10af023a1e8e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T09:17:28.727

目前 Divshot 仅支持外部图像。我们计划在不久的将来提供图片上传。我建议现在使用[Dropbox 上的公共文件夹或可共享链接](https://www.dropbox.com/help/16/en)来托管您的网站资产。复制背景图片的公共链接并将其用作 CSS 编辑器中的背景图片路径：

![Divshot 中的 Dropbox 外部图像](../Images/653ab7724c0dbd71f8cf310a5194d54b.png)

# javascript - 使用 jQuery 或纯 js 捕获键和触发函数

> ID：14288737
> 
> 赞同：-1
> 
> 时间：2013-01-12T00:13:45.267
> 
> 标签：javascript, jquery

我在表单中有一个文本区域：

```
<textearea id="message"></textarea> 
```

键入时，每当用户在文本区域内键入字符**#**时，我想为之后键入的每个字符触发一个函数，直到用户按 Enter 键或空格键。

使用 jQuery 或纯 JS 怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:30:43.627

你可以使用这个：

```
var myCallback = function () {
    //put your code here
}

(function (callback) {
    var jMessage = $('#message'),
        callbackCallable = false,
        keycodeEnter = 13,
        keycodeSpace = 32;

    jMessage.keyup(function (e) {
        var lastLetter = jMessage.val().slice(-1);
        if (lastLetter === '#') {
            callbackCallable = true;
        } else if (e.keyCode === keycodeEnter || e.keyCode === keycodeSpace) {
            callbackCallable = false;
        } else if (callbackCallable) {
            callback();
        }
    });
}(myCallback)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:26:21.367

如果您只想检测打字，您可以监听按键事件。

```
var anyHitYet = false;
jQuery('#massage').keydown(function (event) {

    if (anyHitYet) return;

    var key = event.keyCode;
    if (key === 51) {
        //call your function here
    } else if (key === 13 || key === 32) {
        anyHitYet = true;
    }
}); 
```

基本上如果它是 51 然后`#`被击中所以调用你的函数如果`space`或被`enter`击中你的-when-pressed-function 直到你再次`#`make 才会执行`anyHitYet=false`

有人可能会粘贴一些东西，所以这是一个不同的故事

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:58:20.217

不确定上述答案是否符合 OP 的要求。我认为第二个或第三个 # 也应该被监控，直到空格或返回结束监控。

```
// have a flag somewhere and initialize it to FALSE
var doMonitor = FALSE; 

$('#message').keydown(function(event){

    // trigger monitoring after # was tipped
    // (only once till space or return reset)
    if(event.keyCode == 51 && !doMonitor){
       doMonitor = TRUE;
    }
    else if(event.keyCode == 32 || event.keyCode == 13)
       doMonitor = FALSE;
    else if(doMonitor){
        // do whatever needs to be done
    }
}); 
```

您还可以向#message textarea 添加属性并将其删除（或更改其值），而不是使用变量。

```
// for setting an attribute
.attr( attributeName, value )

// for removing it
.removeattr( attributeName ) 
```

看这里[http://api.jquery.com/removeAttr/](http://api.jquery.com/removeAttr/)和这里[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

# jquery - jQuery 帮助 - 验证

> ID：14288742
> 
> 赞同：0
> 
> 时间：2013-01-12T00:14:31.240
> 
> 标签：jquery, html, css

我正在尝试为订单创建一个允许用户输入值的表单。加载表单时，它需要突出显示所有没有任何内容的行，或者值大于 100 的行，然后在更正时取消突出显示它们。

此外，还有一个提交按钮 - 当任何文本框突出显示时，需要禁用此按钮

这是我到目前为止的代码 - 有人有什么想法吗？

```
$(':text').focusin(function() {
    var inp = $(this).val();
    if (inp > 100) {
        $(this).css('background-color', 'red');
    }
    if (inp.length < 1) {
        $(this).css('background-color', 'red');
    }
    if (inp.length > 0 && inp <= 100) {
        $(this).css('background-color', 'white');
    }
});

$(':text').change(function() {
    var inp = $(this).val();
    if (inp > 100) {
        $(this).css('background-color', 'red');
    }
    if (inp.length < 1) {
        $(this).css('background-color', 'red');
    }
    if (inp.length > 0 && inp <= 100) {
        $(this).css('background-color', 'white');
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:28:15.120

我对您的建议是在更改元素时向元素添加一个类（即“red_bg”）。这将为您提供确定何时启用提交按钮（即`$('.red_bg').length == 0`）的简单方法。

这样的事情应该做：

```
function validateField(jqSelector) {
    var inp = jqSelector.val();
    var regex = new RegExp(/^\d+$/);
    if (regex.test(inp) && parseInt(inp) <= 100) {
        $(this).removeClass('red_bg');
    } else {
        $(this).addClass('red_bg')
    }
    setSubmit();
}

function setSubmit() {
    $('.red_bg').length == 0) {
        $('#submit_id').removeAttr('disabled');
    }  else {
        $('#submit_id').attr('disabled', 'disabled');
    }
}

$(function () {
    $(':text').focusin(function() {
        validateField($(this));
    }).change(function() {
        validateField($(this));
    }).each(function() {
        validateField($(this));
    });
}); 
```

请注意，您可能会考虑使用更深入的验证，正如我现在使用正则表达式所展示的那样，您没有做任何事情来验证输入的值是否为数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:29:31.980

我认为这很好，[http://jsfiddle.net/fr85u/](http://jsfiddle.net/fr85u/)

HTML

```
<form>
  <input />
  <input value="101"/>
  <input value="99"/>
  <button disabled="disabled"> submit </button>
</form> 
```

JS

```
$('input').each(function(){
  var $this = $(this),
      val = $this.val();

  if(val > 100 || val === ''){
     $this.addClass('red');
  }
}).on('blur', function(){
  var $this = $(this),
      val = $this.val();

  $this.toggleClass('red', val === '' || val > 100);

  $('button').prop('disabled', $("input.red").length > 0);  
}); 
```

CSS

```
.red{
   background-color: red;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:29:39.517

由于您的事件处理程序功能完全相同，您可以将代码重写为

```
function test() {
    var inp = $(this).val();
    if (inp > 100) {
        $(this).css('background-color', 'red');
    }
    if (inp.length < 1) {
        $(this).css('background-color', 'red');
    }
    if (inp.length > 0 && inp <= 100) {
        $(this).css('background-color', 'white');
    }
};

$(':text').focusin(test).change(test);
test(); 
```

倒数第二行将事件处理程序附加到两个事件，最后一行第一次执行突出显示功能。

# html - 使 CSS 导航栏覆盖顶部

> ID：14288744
> 
> 赞同：-1
> 
> 时间：2013-01-12T00:14:36.627
> 
> 标签：html, css, navigation, nav

```
 <html>
 <head>
 <link rel="stylesheet" type="text/css" href="stylesheets\sets1.css">
 </head>
 <style type="text/css"> 
body                                                                   /* site bg color    */
     {
     margin: 0; 
     background-color:#b0c4de
     }

 #navbar ul { 
    margin: 0; 
    padding: 5px; 
    cellspacing: 0;
    cellpadding: 0;
    border: 0;
    list-style-type: none; 
    background-color: #8B008B; 
    } 

#navbar ul li {  
    display: inline; 
    } 

#navbar ul li a { 
    text-decoration: none; 
    padding: .2em 1em; 
    color: white; 
    background-color: #8B008B; 
    } 

#navbar ul li a:hover { 
    color: #0EC6D7; 
    background-color: #8B008B; 
    } 

</style> 
</head> 
 <body> 
  <div id="navbar"> 
     <ul> 
     <li><a href="http://"><img src="images/logo.png" alt="Site Logo" height="50" width="68"></img></a></li> 
     <li><a href="#">Forum's</a></li> 
     <li><a href="#">Chat's</a></li> 
     <li><a href="#">Login</a></li> 
     <li><a href="#">Sign up</a></li> 
  </ul> 
</div> 
</body> 
</html> 
```

添加边距：0；到body标签，它就像fb header覆盖整个页面顶部没有空白或无知的破坏或任何类似的东西也是它的跨浏览器所以非常感谢。感谢所有帮助我的用户

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:20:12.760

如果您的意思是“粘性”标题，则使用 position:fixed

```
#navbar{
    position:fixed;
    top:0;
    left:0;
} 
```

您可能需要定义宽度、z-index 或任何其他特定于您的设计的内容，但这是基本思想。

如果您的意思不是粘性，那么也许威廉的答案是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T00:27:47.347

在正文中将边距设置为 0px

```
 body{
 margin:0px;
 background-color:#b0c4de
 } 
```

这将删除身体周围的任何空白

如果您希望导航栏跨越整个页面的顶部，请尝试将宽度设置为 100%

```
 #navbar{
 position:relative;
 width:100px;
 height:auto;
 background-color: #8B008B; 
 } 
```

这将在页面顶部制作一个洋红色条。不确定您想要什么高度，所以我将其设置为自动，因此它将根据内容重新调整大小。然后，您可以将徽标图像放在此 div 中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-12T00:21:38.517

您需要放入`margin: 0;`body 标签。我建议使用您可以在 google 中找到的重置样式来重置浏览器放置的所有空间。

# javascript - 从父窗口关闭模态窗口

> ID：14288749
> 
> 赞同：0
> 
> 时间：2013-01-12T00:15:38.110
> 
> 标签：javascript, jquery, iframe, joomla, modal-dialog

我有一个正在加载外部 HTML 页面的模式窗口。我试图弄清楚如何在内容加载后关闭此模式窗口。由于这是一个外部页面，我将无法更改此内容，所以我猜测我需要在父页面上放置一个事件侦听器，以检测模式窗口内容何时加载？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T20:53:23.967

我假设您正在使用 Joomla 的核心模式功能。另一个假设是控制逻辑位于模态窗口内。这就是为什么答案不像它可能的那样直截了当，因为我不确定打开您希望在之后触发事件的外部 HTML 页面的工作流程。但是，在触发打开外部 HTML 页面的逻辑之后，您可以使用嵌入在模态窗口呈现的 HTML 中的以下 JavaScript 来关闭模态窗口：

```
window.parent.SqueezeBox.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:19:31.433

您是否使用`.load()`加载外部 HTML 页面？如果是这样，您可以在函数中放置一个回调`load()`函数。像这样：

```
$('#someDiv').load(function(){
    //Put code to close the modal
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:20:32.370

JS：

要从模态调用父窗口中的方法：

```
window.opener.document.globalMethodInOpeningFile(param1, param2); 
```

要关闭模态窗口，请在加载内容后调用此函数（您可以使用它`.load(callbackFn)`来检查 load`）：

```
window.close(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T12:57:43.980

如果您要打开此模式页面，`window.showModalDialog()`则不能。正如它自己的名字所表明的那样，它打开了一个*模式*窗口。在您的主（打开器）页面中执行 javascript 将暂停，直到模式关闭（因为模式对话框可以返回值，所以调用者必须等待对话框关闭才能继续）。由于您打开的页面是一个外部页面（我假设在另一个域中），它关闭的唯一方法是用户关闭它。

如果这是不可接受的，那么您需要使用`window.open`jQuery UI 提供的 HTML 模态窗口。

# jquery - 日期选择器不适用于 dd.mm.yyyy

> ID：14288751
> 
> 赞同：-1
> 
> 时间：2013-01-12T00:15:53.900
> 
> 标签：jquery, jquery-ui, user-interface, datepicker

Jquery UI 日期选择器不适用于 dd.mm.yyyy 格式。有什么办法让它工作吗？

请测试

```
Date 1: <input type="text" name="date1" id="date1" class="date" value="">
Date 2: <input type="text" name="date2" id="date2" class="date" value="">
$(document).ready(function(){ 
$('.date').each(function(){
        $(this).datepicker({ changeMonth: true,changeYear: true,maxDate: "+0D"});
        $(this).datepicker( "option", "dateFormat", "dd.mm.yyyy" );
    });  }); 
```

[http://jsfiddle.net/sateeshchandrach/T2u5v/3/](http://jsfiddle.net/sateeshchandrach/T2u5v/3/)

抱歉再次更新了问题，有什么方法可以让 Jquery UI 使用 4y 的日期格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:20:46.643

您的日期格式错误。

JS：

```
$( "#datepicker" ).datepicker();
$( "#datepicker" ).datepicker( "option", "dateFormat", "dd.mm.yy" ); 
```

HTML

```
<p>Date: <input type="text" id="datepicker" size="30" /></p> 
```

小提琴示例：http: [//jsfiddle.net/9EhDx/](http://jsfiddle.net/9EhDx/)

可以在 JQuery [formatdate](http://docs.jquery.com/UI/Datepicker/formatDate)文档中找到有效日期格式字符串的列表。

```
The format can be combinations of the following:
    d - day of month (no leading zero)
    dd - day of month (two digit)
    o - day of the year (no leading zeros)
    oo - day of the year (three digit)
    D - day name short
    DD - day name long
    m - month of year (no leading zero)
    mm - month of year (two digit)
    M - month name short
    MM - month name long
    y - year (two digit) 
    yy - year (four digit)
    @ - Unix timestamp (ms since 01/01/1970)
    ! - Windows ticks (100ns since 01/01/0001)
    '...' - literal text
    '' - single quote
    anything else - literal text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:24:21.893

您可以将自己的自定义格式传递给 Jquery UI。

在您的 dateFormat 中，您使用的是 YYYY 而不是 YY，

[http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)上的文档包含正确的格式：

y - 年（两位数） yy - 年（四位）

您的代码应该是：

前任：

```
$(document).ready(function(){ 
   $("#date").datepicker({ changeMonth: true,changeYear: true,maxDate: "+0D",dateFormat: "dd.mm.yy" });
  }); 
```

[http://jsfiddle.net/T2u5v/4/](http://jsfiddle.net/T2u5v/4/)

# spring - 我应该对这些域类使用依赖注入吗？

> ID：14288753
> 
> 赞同：3
> 
> 时间：2013-01-12T00:16:01.947
> 
> 标签：spring, dependency-injection

我是否在以下示例中使用依赖注入：

```
@Scope("prototype")
@Component
public class Order{
    @Autowired
    public Order(User user,List<OrderItem> items,.......){ 
```

现在在别的地方：

```
@Component
public class PersistOrder{
    @Autowired
    Provider<Order> orderProvider;

    public void prepareOrder() {
        Order order = orderProvider.get(); 
```

正如 JSR-330 所述，[Provider](http://docs.oracle.com/javaee/6/api/javax/inject/Provider.html)的 get() 方法返回一个新的 Order 实例，但是将哪些对象传递给新订单的构造函数？如您所见，订单有自己的依赖项，必须在将实际订单对象检索到方法之前注入这些依赖项。

如果没有 DI，我只需创建所有必要的参数并将它们传递给新订单的构造函数。那么我应该在这里使用 DI 吗？

**编辑：**

这就是没有 DI 的代码：

```
@Component
public class PersistOrder{

    public void prepareOrder() {
        User user=userDao.get(userId);
        List<OrderItem> orderItems=orderItemDao.getAll(orderItemIds);
        Order order = new SmartPhoneOrder(user,orderItems); 
```

如您所见，我有用户和订单项目的 ID，并且可以从 DAO 获取它们的实例。然后我将这些实例传递给 Order 的子类的构造函数以获取实例。这个过程对我来说似乎很清楚。我的意思是如何使用 DI 完成这项工作，以便我的代码享受 PersistOrder 和 Order 类之间的解耦？或者在这个例子中使用 DI 会使逻辑更复杂？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:21:58.430

如果没有依赖注入，域对象可以被认为是贫血的，这可以说是一种反模式。由于拥有数据结构而没有相关行为，您正在失去 OO 的许多好处。例如，要评估 Order.isValid() 您可能需要注入一些依赖项来执行验证。

您可以使用以下方法对 Spring 容器上下文之外的类进行依赖注入：

```
@Configurable 
```

然后，您将 bean 的配方声明为原型，Spring 将使用 AOP 调动构造函数并查找所需的依赖项。. 即使它查找依赖项，对您的最终效果是依赖项注入，因为您只需更改一行即可注入其他评估 Order.isValid() 的内容。

这样，当您执行新订单或从持久性工厂获取它时，它已经“注入”了依赖项。

为此需要 aspectJ 编织，而不仅仅是默认的 Proxy/CGLib 编织。您可以使用带有 Java 代理的运行时编织或构建时编织。. . 我推荐前者用于集成测试，后者用于部署。. .

**服务与域对象：**

现在您可以选择丰富的域对象，问题就变成了将东西放在哪里。服务与实体？我的看法是，该服务应该基于可重用的域对象来编排一个特定于用例的流程。该服务是外部订阅者进入您系统的非 OO 网关。

. . Google Spring @Configurable 以获取有关基于 AspectJ 的域类依赖注入的更多信息和教程。

# c# - ImageButton 图像未调整大小

> ID：14288758
> 
> 赞同：2
> 
> 时间：2013-01-12T00:16:31.463
> 
> 标签：c#, xaml, windows-runtime, imagebutton

我有一个 ImageButton：

```
<toolkit:ImageButton Style="{StaticResource transportButtonStyle}" Click="SeekBackwardClick"
                                 NormalStateImageSource="/Assets/Images/rewind.png"
                                 HoverStateImageSource="/Assets/Images/rewind.png"
                                 PressedStateImageSource="/Assets/Images/rewind.png">
</toolkit:ImageButton> 
```

但是，当我更改宽度或高度参数时，图像不会按比例缩放。当它涉及一个

```
<Image ...> 
```

标记，它工作正常，因为我可以设置 Stretch 属性，但 ImageButton 中缺少此属性。在 ImageButton 上获得此功能的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:26:54.567

编辑控件模板以使里面的图像拉伸。我想我让它们没有被拉伸，这样我就可以交换图像资源而无需更新按钮的大小。我想我可以将一些属性添加到绑定到图像的按钮类中，以实现一种简单的控制方法。但是现在更改模板应该适合您。

# php - 在Android中从MySQL结果制作折线图的简单方法？

> ID：14288762
> 
> 赞同：0
> 
> 时间：2013-01-12T00:17:06.607
> 
> 标签：php, android, mysql

我需要做一个活动，在折线图中显示 MySQL 查询的结果。有谁知道初学者的教程或我可以查看的示例代码来完成此操作？如果重要的话，我所有的结果都将是 0-10 的整数，以保持简单。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:58:44.543

如果您想从头开始创建折线图，这可能会让您入门：

[如何在android中画一条线](https://stackoverflow.com/questions/3616676/how-to-draw-a-line-in-android)

这真的取决于你想自己做多少这项工作。您可能也可以在某处找到一个开源折线图库。

# javascript - 使用多个 $.getJSON 调用从 $.when 返回数据

> ID：14288763
> 
> 赞同：1
> 
> 时间：2013-01-12T00:17:08.330
> 
> 标签：javascript, jquery, deferred

在以下代码中，我正在使用`$.getJSON`（从存储库返回）检索数据，`$.when`因为最后一次调用取决于第一次调用的数据：

```
var getData =

    function () {

        var data = { userData: null, userTitles: null, userPage: null };

        $.when(repository.getUserDetails().done(f1)),
                    repository.getUserPolicyTitles().done(f2)
            .then(repository.getUserPage().done(f3));

        function f1(userData) { data.userData = userData; console.log(data.userData) };
        function f2(userTitles) { data.userTitles = userTitles; console.log(data.userTitles) };
        function f3(userPage) { data.userPage = userPage; console.log(data.userPage) };

        return data;
    }

   return {
       getData: getData
   }; 
```

其中大部分工作正常。但是，我想将数据返回给调用模块，但它会在数据准备好之前返回，正如我想你所期望的那样。

实现这一目标的最佳方法是什么？

谢谢

戴维

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:08:32.423

您对 deferred 的使用似乎不正确。这是我的解释。

此外，您需要考虑，一旦您开始调用异步方法，就无法进行同步返回调用，这就是您正在做的事情。您需要返回一个promise，而不是返回数据；然后你为 promise 提供一个回调来处理数据

```
var getData = function () {
    var myDeferred = $.Deferred();
    var data = { userData: null, userTitles: null, userPage: null };

    $.when(repository.getUserDetails().done(f1),
           repository.getUserPolicyTitles().done(f2),
           repository.getUserPage().done(f3)).then(
        function(){ myDeferred.resolve(data); },
        function(){ myDeferred.reject.apply(myDeferred, arguments); });

    //... f1, f2, f3

    return myDeferred.promise();
}

return {
    getData: getData
}; 
```

然后，当您想实际使用数据时，您可以

```
your_library.getData().then(function(data){
        // magic goes here
    }, function(errors_of_some_sort) {
        // error handling magic goes here
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:02:01.273

使用 $.when 时，您只能在所有 AJAX 调用都返回后才能获取数据。例如：

```
$.when($.getJSON('somewhere'), $.getJSON('somewhere2'))
.done(function(r1, r2){
    //set your data object with the responses from the server here
}); 
```

所以简短的回答是你不能“返回”你从服务器检索到的数据，但是当数据准备好时，你可以分配一个回调来使用数据（或设置为你的模块的某个实体）。

# android - 使用 Proguard 剥离未使用的 Support lib 类

> ID：14288769
> 
> 赞同：4
> 
> 时间：2013-01-12T00:17:55.983
> 
> 标签：android, proguard

我正在将 Android 支持库添加到我的项目中，并且我注意到生成的 APK 文件的大小膨胀了很多。

我想要做的是使用 Proguard 删除库中我不使用的类，例如 backword 兼容的 Notification builder 类（事实上，我甚至没有使用 Support 库中的任何东西就对其进行了测试，我只是放弃了它在我的 /libs 文件夹中）。

我的 proguard.cfg 正是`<sdktools>\tools\proguard\proguard-android.txt`我自己添加的内容`-dontobfuscate`（因为我真的不需要混淆），但是，我没有看到我的 .APK 文件变得更小。我的 proguard.cfg 如下：

```
# 这是 ProGuard 的配置文件。
# http://proguard.sourceforge.net/index.html#manual/usage.html

-不要混淆
-dontusemixedcase类名
-dontskipnonpubliclibraryclasses
-详细

# 优化默认关闭。Dex 不喜欢代码运行
# 通过 ProGuard 优化和预验证步骤（并执行一些
# 这些优化本身）。
-不要优化
-dontpreverify
# 注意，如果你想启用优化，你不能只
# 在您自己的项目配置文件中包含优化标志；
# 相反，您需要指向
# "proguard-android-optimize.txt" 文件而不是你的这个文件
# project.properties 文件。

-keepattributes *注解*
-保持公共类 com.google.vending.licensing.ILicensingService
-保持公共类 com.android.vending.licensing.ILicensingService

# 原生方法见 http://proguard.sourceforge.net/manual/examples.html#native
-keepclasseswithmembernames 类 * {
    本国的 ;
}

# 在 Views 中保留 setter 以便动画仍然可以工作。
# 见 http://proguard.sourceforge.net/manual/examples.html#beans
-keepclassmembers 公共类 * 扩展 android.view.View {
   无效集*（***）；
   *** 得到*（）;
}

# 我们希望在 Activity 中保留可以在 XML 属性 onClick 中使用的方法
-keepclassmembers 类 * 扩展 android.app.Activity {
   公共无效*（android.view.View）；
}

# 枚举类见http://proguard.sourceforge.net/manual/examples.html#enumerations
-keepclassmembers 枚举 * {
    公共静态 **[] 值（）；
    公共静态 ** valueOf(java.lang.String);
}

-keep 类 * 实现 android.os.Parcelable {
  公共静态最终 android.os.Parcelable$Creator *;
}

-keepclassmembers 类 **.R$* {
    公共静态;
}

# 支持库包含对较新平台版本的引用。
# 不要警告那些如果这个应用程序链接到旧版本
# 平台版本。我们知道他们，他们是安全的。
-不要警告 android.support.**

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:03:28.877

Android SDK 仅在发布版本中应用 ProGuard，而不是在调试版本中。

此外，Android SDK（r20 或更高版本）通常会`proguard-project.txt`在您的项目中查找而不是 proguard.txt。该文件一般可以为空，因为构建过程还会读取全局文件 proguard-android.txt。您可能想要更新您的项目

```
android update project -p MyProjectDirectory 
```

最后，Android SDK（r20 或更高版本）默认禁用 ProGuard 的优化步骤（这可以改进其缩小步骤）。您可以通过指向`proguard-android-optimize.txt`而不是 proguard-android.txt来启用它`project.properties`。

# android - 在电池耗尽实验中测量和导出 Android 手机上的系统性能

> ID：14288772
> 
> 赞同：2
> 
> 时间：2013-01-12T00:18:20.197
> 
> 标签：android, battery

我正在进行一项实验，该实验需要测量 android 应用程序的电池消耗和系统性能影响。该应用程序具有多个可以单独打开和关闭的功能，因此我可以独立测量每个组件的影响。

该应用程序是一种连接监控工具，可收集有关信号强度的信息，对移动和 Wi-Fi 连接执行 QoS 测试，记录有关通话时间和 GPS 信息等的信息。

为了测量功耗（因此电池耗尽），我将使用连接到 PC的[Monsoon Power Monitor运行手机以收集所需的数据。](http://www.msoon.com/LabEquipment/PowerMonitor/)我将首先为我将用于实验的每部 Android 手机建立一个基线，然后执行应用程序组件测量。

但是，我仍然没有找到可以帮助我满足以下要求的测量系统性能指标（内存使用、CPU 负载等）的最佳方法：

*   外部测量：测量需要独立于我的应用程序。也就是说，我不想在我的应用程序中添加代码来记录系统性能信息。
*   可导出：测量值需要与时间相关联，也可以与季风功率监视器的测量值一起导出以进行分析。
*   手机root：测量手机系统性能指标的方法不能是需要手机root的方法。模拟的环境是典型的最终用户，他们通常不会 root 手机。

据我了解，没有办法通过外部（完全硬件外部）方法来收集性能信息。因此，下一个最佳方法是使用另一个应用程序并为该应用程序建立基线。但是，考虑到上述要求，什么应用程序（或可能是不同的方法）可以帮助我实现所描述的目标？

谢谢！

# python - if 语句每次都采用相同的路径；可能的 str 诉 int 冲突

> ID：14288774
> 
> 赞同：1
> 
> 时间：2013-01-12T00:18:28.603
> 
> 标签：python, if-statement

我正在开发一个程序，要求用户选择两个洞穴之一进入​​。用户可以选择洞穴 1 或洞穴 2。该数字与答案（由 random.randint (1,2) 生成）进行比较。如果用户的选择等于答案，则他获胜；否则，他就输了。问题是程序永远不会分支到获胜条件。无论用户做出什么选择，他总是输。我试过调试，但我看不到caveAnswer 和caveChoice 之间的变量比较值。

```
def gameCore (name):
    print ('You stand before the entrances of two caves.')
    print ('Choose a cave, either cave 1 or cave 2.')
    print ( )

    caveAnswer = random.randint (1,2)
    caveChoice = input ('Enter either 1 or 2\. ')

    if caveAnswer == caveChoice:  [# I suspect the problem occurs at this comparison]
        print ('You enter the black mouth of the cave and...')
        time.sleep (1)
        print ( )
        print ('You find a hill of shining gold coins!')
        playAgain (name)

    else:
        print ('You enter the black mouth of the cave and...')
        time.sleep(1)
        print ( ) 
        print ('A wave of yellow-orange fire envelopes you. You\'re toast.')
        playAgain (name) 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:25:56.093

```
caveChoice = int(input ('Enter either 1 or 2\. ')) 
```

您还应该这样做，以便如果它不是 int 时它会再试一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T00:36:07.433

您应该将输入转换为 int：

```
caveChoice = int(input('Enter either 1 or 2\. ')) 
```

但是，如果您不希望程序在输入 时崩溃`'foo'`，那么您需要一个`try-except`块，它本身位于一个`while`循环中，因此您可以再试一次。

```
while True:
    try:
        caveChoice = int(input('Enter either 1 or 2\. '))
        break
    except ValueError:
        print('Try again.') 
```

此外，您可能想检查输入是否实际上是`1`或`2`。

```
while True:
    try:
        caveChoice = int(input('Enter either 1 or 2\. '))
        if caveChoice not in (1, 2):
            raise ValueError
        break
    except ValueError:
        print('Invalid input. Try again.') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:36:25.737

我试过你的程序蚂蚁它肯定有效。要对其进行测试，只需`caveAnswer`在输入之前打印出来即可`caveChoice`。如果您有错误，则不在此功能中。

```
import random,time
def gameCore (name):
    print ('You stand before the entrances of two caves.')
    print ('Choose a cave, either cave 1 or cave 2.')
    print ( )

    caveAnswer = random.randint (1,2)
    print caveAnswer
    caveChoice = input ('Enter either 1 or 2\. ')

    if caveAnswer == caveChoice:  
        print 'You enter the black mouth of the cave and - answer=%d - your answer=%d' % (caveAnswer, caveChoice)
        time.sleep (1)
        print ( )
        print 'You find a hill of shining gold coins!'
        # playAgain (name) 

    else:  
        print ('You enter the black mouth of the cave and - answer=%d - your answer=%d')% (caveAnswer, caveChoice)
        time.sleep(1)
        print ( ) 
        print ('A wave of yellow-orange fire envelopes you. You\'re toast.')
        # playAgain (name)

gameCore('Test') 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-12T00:29:55.883

尝试转换为 int。

CaveChoice = input ('输入 1 或 2。')

# mysql - 带有教义的symfony2无法连接到远程mysql数据库

> ID：14288776
> 
> 赞同：2
> 
> 时间：2013-01-12T00:18:33.020
> 
> 标签：mysql, symfony, doctrine

我正在部署我的 symfony2 项目，但与远程 mysql 服务器的数据库连接出现问题。似乎 symfony 仍在尝试连接到本地 mysql 实例（使用套接字而不是 tcp），并且没有考虑到正确设置所在的 parameteres.yml。

**参数.yml**

```
parameters:
  database_driver:   pdo_mysql
  database_host:     subdomain-example.dotcloud.net
  database_port:     44569
  database_name:     db_platform
  database_user:     root
  database_password: [intentionally hidden] 
```

**配置.yml**

```
imports:
  - { resource: parameters.yml }

doctrine:
  dbal:
    default_connection:       default
    connections:
        default:
            driver:           %database_driver%
            dbname:           %database_name%
            user:             %database_user%
            password:         %database_password%
            host:             %database_host%
            port:             %database_port%
            charset:          UTF8 
```

**错误堆栈跟踪**（当我尝试清除缓存时由控制台或 http 浏览器显示）

```
PDOException: SQLSTATE[28000] [1045] Access denied for user 'root'@'localhost' (using password: YES)
in /var/www/Symfony/app/cache/dev/appDevDebugProjectContainer.php line 2336
at PDO->__construct('mysql:dbname=db_platform', 'root', '****') in /var/www/Symfony/app/cache/dev/appDevDebugProjectContainer.php line 2336
at appDevDebugProjectContainer->getPdoService() in /var/www/Symfony/app/bootstrap.php.cache line 209
at Container->get('pdo') in /var/www/Symfony/app/cache/dev/appDevDebugProjectContainer.php line 3027
at appDevDebugProjectContainer->getSession_Handler_PdoService() in /var/www/Symfony/app/bootstrap.php.cache line 209
at Container->get('session.handler.pdo') in /var/www/Symfony/app/cache/dev/appDevDebugProjectContainer.php line 3053
at appDevDebugProjectContainer->getSession_Storage_NativeService() in /var/www/Symfony/app/bootstrap.php.cache line 209
at Container->get('session.storage.native') in /var/www/Symfony/app/cache/dev/appDevDebugProjectContainer.php line 3014
at appDevDebugProjectContainer->getSessionService() in /var/www/Symfony/app/bootstrap.php.cache line 209
at Container->get('session') in /var/www/Symfony/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/EventListener/SessionListener.php line 52
........ 
```

正如您在上面看到的，配置文件中没有“localhost”，并且在错误堆栈跟踪中，构造方法没有将主机和端口数据传递给 PDO 类：

```
PDO->__construct('mysql:dbname=db_platform', 'root', '****') 
```

我已经手动删除了缓存文件夹。

**作曲家.json**

```
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.1.0",
    "doctrine/orm": ">=2.3.0,<2.4.*-dev",
    "doctrine/doctrine-bundle": ">=2.1",
    "doctrine/mongodb": "1.0.1",
    "doctrine/mongodb-odm-bundle": "3.0.*",
    "twig/extensions": "1.0.*",
    "symfony/assetic-bundle": "2.1.*",
    "symfony/swiftmailer-bundle": "2.1.*", 
    "symfony/monolog-bundle": "2.1.*",
    "sensio/distribution-bundle": "2.1.*",
    "sensio/framework-extra-bundle": "2.1.*",
    "sensio/generator-bundle": "2.1.*",
    .... more
}, 
```

有什么建议吗？

提前致谢， 毛罗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T03:48:22.493

我可以找出问题所在，它是 config.yml 中的 PDO 服务参数：

```
services:
    pdo:
        class: PDO
        arguments:
            - "mysql:host=%database_host%;port=%database_port%;dbname=%database_name%"
            - %database_user%
            - %database_password% 
```

我必须添加主机和端口参数。

感谢您的回复。
毛罗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-22T13:32:01.000

在较新版本的 symfony ( > 3 ) 上，您可以简单地执行 (在您的 .env 文件中)：

```
DATABASE_URL=mysql://mysql_user_name:your_password@www.theHost.domainName:3306/your_database 
```

# java - JNA Win7 找不到指定的模块

> ID：14288779
> 
> 赞同：1
> 
> 时间：2013-01-12T00:19:52.017
> 
> 标签：java, jna

我一直在使用 JNA 加载本机 dll，并且可以在 XP 上成功开发应用程序。当我尝试在 Win7 机器上运行相同的程序时，我收到错误，**找不到指定的模块。我无法加载 DLL。**

使用依赖walker，我查看了DLL依赖项，所有其他必要的DLL都存在于C:\Windows\system32下，它已经添加到PATH环境变量中。

我是不是错过了什么。请提出建议。

谢谢 ！

# java - 将图片添加到卡值？

> ID：14288781
> 
> 赞同：-1
> 
> 时间：2013-01-12T00:20:14.670
> 
> 标签：java, image, slick2d

我目前正在制作一个纸牌游戏（制作一个定制的而不是la脚扑克），基本上我想根据卡片的价值添加图片。它分为 a/b（a 是花色，b 是价值）。

我假设的代码块将更改为添加图片（或者它是卡片类？）

```
cards = new ArrayList < > ();
   for (int a = 0 ; a <= 3 ; a++)
    {
        for (int b = 0 ; b <= 12 ; b++)
        {
            cards.add (new Card (a, b));
        }
    }
}

//Method to draw a card and remove card from the current deck
public Card PlayerCardDraw ()
{
    Random generator = new Random ();
    int index = generator.nextInt (cards.size ());
    return cards.remove (index);
} 
```

//将一张牌添加到保存在数组列表中的玩家 1 的手上，以将牌分组给单个玩家

```
public ArrayList <Card> p1Hand;
public ArrayList  Card> P1CardDraw ()
{
    p1Hand = new ArrayList < > ();
    p1Hand.add (PlayerCardDraw ());
    return p1Hand;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:35:30.840

当我输入以下答案时，提问者写道他正在使用 slick2D。这改变了事情。

## 新答案

您应该将 slick2d 添加为您的问题的标签之一，以引起正确人群的注意。

## 旧答案

似乎您已经开始使用底层算法，但您还没有完成任何图形或 UI（用户界面）代码。

这意味着您需要决定将使用什么技术来编写代码。

如果您想编写一个位于计算机（台式机/笔记本电脑）上的游戏作为应用程序并在其上运行，那么您的选择是 Swing/AWT 或 Eclipse/SWT。它们具有相当的可比性，所以我会说你可以找到专家的任何技术。

另一种选择是，这是一款位于网络服务器中的游戏，人们将通过网络浏览器玩它。在这种情况下，您需要查看 javascript 或 Swing/AWT。谷歌有一项称为 GWT 的技术，它可以在 web 上运行并将 java 和 javascript 很好地集成在一起。这可能是满足您需求的绝佳选择。

另一方面，您可能正在编写手机游戏。如果它是 android，那么我建议您查看它的 sdk 并做出决定。我相信您可以为 android 编写 java 应用程序。它也可能在使用 GWT，但不确定。

或者它可能是一个 iPhone 应用程序。我不认为 iPhone 应用程序可以用 Java 编写。您需要获取 iPhone 的 SDK 并学习它。

一旦你决定了你的平台和技术，那你就快要问你现在问的问题了。

在你问这个问题之前，你需要弄清楚你的主窗口会是什么样子，那里会有什么样的按钮和其他小部件。

简而言之，你离把那张照片写在卡片上还有很长的路要走，但是通过努力工作和对技术的研究，你可以做到。

# linux - 如果绑定到 localhost/127.0.0.1 而不是外部，OpenJDK 7 AsynchronousServerSocketChannel 仅接受 localhost

> ID：14288784
> 
> 赞同：-1
> 
> 时间：2013-01-12T00:20:47.330
> 
> 标签：linux, networking, nio, openjdk, nio2

```
> java -version
java version "1.7.0_09"
OpenJDK Runtime Environment (IcedTea7 2.3.3) (suse-3.16.1-x86_64)
OpenJDK 64-Bit Server VM (build 23.2-b09, mixed mode) 
```

在 openSUSE 12.2 (x86_64) 上，AppArmor**没有**运行，防火墙被**禁用**。

如果使用 AsynchronousServerSocketChannel 的服务器正在侦听连接并且我指定 localhost 或 127.0.0.1，那么**它只**接受来自 localhost 的连接，如果我尝试从另一台机器连接它，它会拒绝它。**怎么回事？！**如果我将其实际机器的主机名或 IP 地址而不是 localhost 或 127.0.0.1 放入 Java 服务器，那么它确实接受来自其他地方的连接。**双WTF？！**

当我使用老式同步服务器时没有这样的问题——当我将它绑定到本地主机端口时，它接受来自本地机器和外部机器的连接。此外，当我都设置为绑定到 localhost 时，我注意到同步和 NIO2 之间的以下差异：

```
> netstat -ltupn | grep
tcp      0    0 :::2340               :::*              LISTEN    6749/java
tcp      0    0 127.0.0.1:12401       :::*              LISTEN    6767/java 
```

这对我来说是一个**大问题**，因为我计划将此服务器部署到多台机器上，并且必须更改每台机器上的配置文件以添加实际的主机名/IP 而不是拥有 localhost，这将是一个很大的痛苦。如果我指定 localhost 应该有什么解决方法，它会起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:24:57.363

> 我指定 localhost 或 127.0.0.1，然后它只接受来自 localhost 的连接，如果我尝试从另一台机器连接它会拒绝它。怎么回事？！

这正是它应该做的。您指定了 127.0.0.1，它是环回接口，对外部主机不可见。

> 如果我将其实际机器的主机名或 IP 地址而不是 localhost 或 127.0.0.1 放入 Java 服务器，那么它确实接受来自其他地方的连接。双WTF？！

这正是应该发生的事情。我不知道你为什么这么惊讶。

> 当我使用老式同步服务器时没有这样的问题——当我将它绑定到本地主机端口时，它接受来自本地机器和外部机器的连接。

事实并非如此。你的观察是错误的。

在这两种情况下，正确的解决方案是绑定到`0.0.0.0`或 null`InetAddress`或省略参数，所有这些都具有与绑定到相同的效果，`INADDR_ANY`这意味着在这种情况下接受通过任何接口的连接。

我建议这就是你在有效的情况下所做的事情。

# mysql - 从多列按日期分组？

> ID：14288787
> 
> 赞同：1
> 
> 时间：2013-01-12T00:20:56.473
> 
> 标签：mysql, sql

首先对这个标题感到抱歉，但我不知道如何描述它：

我将会话保存在我的表中，我想了解每小时的会话数，以了解一天中有多少会话处于活动状态。会话由两个时间戳指定：开始和结束。

希望你能帮助我。

我们开始吧： [http ://sqlfiddle.com/#!2/bfb62/2/0](http://sqlfiddle.com/#!2/bfb62/2/0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:47:42.003

虽然我仍然不确定您想如何比较开始日期和结束日期，但看起来像使用`COUNT`, `YEAR`, `MONTH`,`DAY`和`HOUR`，但您可以得出您想要的结果。

可能与此类似：

```
SELECT COUNT(ID), YEAR(Start), HOUR(Start), DAY(Start), MONTH(Start)
FROM Sessions
GROUP BY YEAR(Start), HOUR(Start), DAY(Start), MONTH(Start) 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/bfb62/6)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T06:32:15.477

好的，这是索引表可以解决的另一个问题。

索引表是每个人都应该在他们的工具包中拥有的东西，最好是在主数据库中。它是一个带有单个`id int primary key`索引列的表，其中包含从 0 到 n 的序号，其中 n 是一个足够大的数字，可以满足您的需要，100,000 很好，1,000,000 更好。您只需要创建此表一次，但一旦创建，您会发现它具有各种应用程序。

对于您的问题，您需要每小时考虑一次，如果我理解您的问题，您需要计算在该小时结束之前开始并且在该小时开始之前尚未结束的每个会话。

这是解决方案的[SQL 小提琴](http://sqlfiddle.com/#!2/428aa/6)。

它的作用是使用索引表中的已知序列号（这个小提琴只有 0 到 100 - 刚刚超过 4 天 - 你可以看到为什么你需要一个大的 n）在小时的顶部和底部与你的数据链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T01:00:48.987

你想做的事情在 MySQL 中是相当困难的。但是，您可以轻松获得近似值。以下统计一天内开始和停止的用户：

```
select date(start), hour,
       sum(case when hours.hour between hour(start) and hours.hour then 1 else 0
           end) as GoodEstimate             
from sessions s cross join
     (select 0 as hour union all
      select 1 union all
      . . .
      select 23
     ) hours
group by date(start), hour 
```

当用户跨越多天时，查询会更难。这是一种方法，它假设存在一个每小时开始的用户：

```
select thehour, count(*)
from (select distinct date(start), hour(start),
             (cast(date(start) as datetime) + interval hour(start) hour as thehour
      from sessions
     ) dh left outer join
     sessions s
     on s.start <= thehour + interval 1 hour and
        s.end >= thehour
group by thehour 
```

注意：这些未经测试，因此可能存在语法错误。

# r - R FactoMineR 包：coord.ellipse 函数的 level.conf 选项

> ID：14288788
> 
> 赞同：1
> 
> 时间：2013-01-12T00:21:06.860
> 
> 标签：r, pca, confidence-interval

我之前[回答](https://stackoverflow.com/questions/14269435/pca-in-r-prcomp-and-confidence-ellipses)了一个关于为 PCA（主成分分析）图绘制置信椭圆的问题。

最终起作用的是 FactoMineR 包（PCA、coord.ellipse 和 plot.PCA 函数的组合）。虽然我现在可以绘制置信椭圆，但我不明白 coord.ellipse 函数的 level.conf 选项实际上做了什么。我期待更小的椭圆具有更高的置信水平，但相反的情况正在发生。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:54:18.283

如果您希望您的椭圆包含“真实”值（在参数估计的情况下）或它包含更高比例的总体（在预测椭圆的情况下），那么您使用更高的置信度信心数字。这个原则应用非常广泛。更高的置信度需要更宽的间隔才能满足您指定的要求。

# input - 调用（读取）函数时 Allegro CL 冻结

> ID：14288789
> 
> 赞同：3
> 
> 时间：2013-01-12T00:21:36.960
> 
> 标签：input, common-lisp, allegro-cl

每当我`(read)`在 Allegro Common Lisp 9.0 中调用该函数时，调试窗口就会“中断”（我想不出一个更清晰的术语，抱歉）：鼠标变成了旋转的蓝色死亡轮，窗口拒绝评估任何新的输入, 虽然它仍然可以输入。IDE 的其他部分不受影响。屏幕如下所示：

```
International Allegro CL Free Express Edition
9.0 [Windows] (Jan 8, 2013 8:45)
Copyright (C) 1985-2012, Franz Inc., Oakland, CA, USA.  All Rights Reserved.

This development copy of Allegro CL is licensed to:
   Allegro CL 9.0 Express user

CG version 9.0 / IDE version 9.0
Loaded options from C:\Users\Noah Dove\Documents\allegro-prefs-9-0-express.cl.

;; Optimization settings: safety 1, space 1, speed 1, debug 2.
;; For a complete description of all compiler switches given the current
;; optimization settings evaluate (EXPLAIN-COMPILER-SETTINGS).

[changing package from "COMMON-LISP-USER" to "COMMON-GRAPHICS-USER"]
CG-USER(1): (read) ; <--- causes window to malfunction. 
                   ;  any further input is not evaluated. 
```

窗口底部的状态文本卡在：

```
"reading and evaluating 'read'..." 
```

知道发生了什么吗？我要做的只是基本的控制台 io。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T12:38:10.833

**[补丁cg_cg-text-edit-pane_001](http://www.franz.com/support/patches/log/9.0/#cg_cg-text-edit-pane_001)**似乎解决了这个问题：

```
Date posted: Mon Jan 28 09:26:04 PST 2013
Patch names: code/cg-text-edit-pane.001,
             update/pjk001.001,
             update/pjl002.001
Description: The code for doing lisp reading in text-edit-pane windows and
             widgets was out-of-date with the conversion of Common Graphics
             to the Unicode version of the Windows API.
             fresh-line erroneously printed a newline just after a blocking
             read.
             Lisp reading was broken in IDE listeners.
Impact:      recommended 
```

下载并安装新补丁：

*   选择菜单“安装”->“新补丁”
*   单击“列出新补丁”
    确保您看到这些补丁
*   保持选中“下载所有新的和更新的补丁”单选按钮
    我建议这样做，这样您就可以获得所有当前的修复和改进
    或者，您可以：
    *   只检查这些补丁
    *   选中“仅下载选定的补丁（上面选中的补丁）”单选按钮
*   点击“下载”

将出现一条消息，指出该过程尚未结束：

*   关闭所有 Allegro CL 实例
*   运行`update.exe`
    它将使用下载的补丁重建官方图像

现在，`(read)`在 IDE 侦听器中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:29:14.880

`(read)`期望您输入一个 s 表达式并按回车键。

```
* (read)
(1 2 3 a b c) 
(1 2 3 A B C) 
```

# c - malloc 内存分配

> ID：14288791
> 
> 赞同：0
> 
> 时间：2013-01-12T00:21:49.523
> 
> 标签：c, malloc

我有一个初学者问题，我需要将一个指针传递给一个函数，然后为这个指针分配动态内存。我在主函数中创建指针，然后将它传递给应该分配内存的特定函数。但我收到此错误：“hist_array 可能未在此函数中使用”

这是程序中的相关行：来自主要：

```
 int* hist_array;
    fillHistogram(first_image,hist_array,max_value+1); 
```

功能：

```
 void fillHistogram(int image[M][N], int* hist, int histLen){
    hist=(int*)malloc(sizeof(histLen)*(histLen)); 
```

我无法更改函数的签名，它是作为结构化文件提供给我们的。所以我想知道我做错了什么。

和另一个问题。我用 malloc 创建的新数组，我希望它的所有值一开始都是 0。我该如何以最短的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:24:37.777

意图似乎是调用代码将在调用之前进行分配`fillHistogram`。

您的解决方案的问题是`hist`in`fillHistogram`是您传入的指针的副本。当您更改副本时，原始文件仍然未初始化。

你可能的意思是`sizeof(int)*histLen`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T04:31:56.397

首先，我认为您缺少括号`sizeof`。sizeof 是一个函数，它需要它的参数。并且做`sizeof(histLen)*(histLen)`的是告诉 malloc '保留' sizeof(maxvalue+1)，histlen 次。我认为你可能想要`hist_array`的是分配一个整数向量，因为它是一个指向 int 的指针。这是通过以下方式完成的：

```
hist=malloc(histlen*sizeof(int)); /*I think it gets more easy to read with the lenght multiplier on the left*/ 
```

这告诉 malloc 为 histlen 整数“保留”内存。

另一件事，因为你`hist_array`作为参数传递并且你没有返回 malloc 返回指针 for `hist_array`，你应该在你的函数中说你想在主函数中修改它的值。这称为通过引用传递参数，并且要在函数内更改其值，您需要说您要更改变量的值而不是变量的副本。这看起来像这样：

```
*hist=malloc(histlen*sizeof(int)); /*The pointed by hist, which hist_array, is equal to malloc etc..*/ 
```

希望这可以帮助。

# ruby-on-rails - 使用 ajax 来回切换状态的 Ruby on rails 按钮

> ID：14288793
> 
> 赞同：3
> 
> 时间：2013-01-12T00:22:05.317
> 
> 标签：ruby-on-rails, ajax

我对 Rails 很陌生，我试图有两个部分 form_for 按钮，通过 ajax replaceWith 在单击时来回切换。

我的目标是有一个关注按钮，单击该按钮会切换为“取消关注”，并切换底层按钮操作。第一个开关效果很好（我可以在数据库中看到它经过），但是当我单击新制作的“取消关注”按钮时，不会出现相同的想法（切换到“关注”），而是打印文本我的 .js.erb 文件（但是我可以看到取消关注操作已提交到数据库）。基本上在第二次单击时不会发生正确的渲染，我很不确定为什么。

我将在下面发布一些代码，如果这不是一个好问题，我很抱歉，我在理解很多 Ajax 方法时遇到了一些麻烦。

太感谢了！丽莎

_unfollow.html.erb

```
<%= form_for(@user,:remote => true,method: :delete, format: 'js') do |f| %>
<%= f.submit "Unfollow", class: "btn btn-large", id: "Submit"%>
<% end %> 
```

_follow.html.erb

```
<%= form_for(@user, :remote=>true,      format: 'js') do |f| %>
<%= f.submit "Follow", class: "btn btn-large btn-primary", id: "Submit" %>
<% end %> 
```

控制器调用的创建/销毁（我希望它们在上面的两个部分之间切换）

创建.js.erb

```
$('#Submit').replaceWith("<%= escape_javascript(raw render :partial => 'follow' )%>"); 
```

销毁.js.erb

```
$('#Submit').replaceWith("<%= escape_javascript(render( :partial => 'unfollow')) %>"); 
```

同样，无论我最初在页面上有哪个部分/表单，第一次点击正确切换，第二次点击 .js.erb 并将其打印出页面（插入 html）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:15:17.523

尝试替换整个表单而不仅仅是提交按钮，如下所示：

_unfollow.html.erb

```
<%= form_for(@user,:remote => true,method: :delete, format: 'js', html: { id: "button-form" }) do |f| %>
  <%= f.submit "Unfollow", class: "btn btn-large" %>
<% end %> 
```

_follow.html.erb

```
<%= form_for(@user, :remote=>true, format: 'js', html: { id: "button-form" }) do |f| %>
  <%= f.submit "Follow", class: "btn btn-large btn-primary" %>
<% end %> 
```

创建.js.erb

```
$('#button-form').replaceWith("<%= escape_javascript(render :partial => 'follow' )%>"); 
```

销毁.js.erb

```
$('#button-form').replaceWith("<%= escape_javascript(render( :partial => 'unfollow')) %>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:29:18.177

尝试删除`raw`create.js.erb 中的调用。

# javascript - 表单验证，div 标签中的错误不会显示

> ID：14288794
> 
> 赞同：0
> 
> 时间：2013-01-12T00:22:06.967
> 
> 标签：javascript, html, validation

好的，我有几个查询的表格。我开始为它编写验证代码，但我的错误不会显示。它发现错误是因为它将 div 的状态从隐藏更改为可见，但不会显示错误类型。

这是我的 valform.js

```
reason = "";
function validateForm(form) 
{
    reason += validateAge(form.age);
    if (reason != "") 
    {
        document.getElementById('erbox').style.visibility = 'visible';
        return false;
    }
    return true;
}

function validateAge(fld)
{
    function isNumber (o) 
    {
        return ! isNaN (o-0);
    }

    var error ="";
    var x=fld.value;
    if (x==null || x=="" )
    {
        error="Age must be filled";
    }
    else if (isNumber(x)==false) 
    {
        error="Your age is not numeric value!";
    }
    else if (x<18) 
    {
        error = "You need to be 18 or older!";
    }
    return error;
} 
```

这是我的html表单：

```
<div id="upform">
<form name="lastcheck" action="lastcheck.php" method="post" onsubmit="return  
    validateForm(this);">
    Location: <input type="text" name="locationcity">
    Country:  <input type="text" name="country">
    Gender:  <input type="radio" name="group1" value="w"> Woman<br>
    <input type="radio" name="group1" value="m"> Man<br>
    Age: <input type="number" name="age" size="4" maxlength="2">
    <input type="submit" value="Submit">
    <div style="visibility:hidden" id="erbox">Next error(s) occured: 
    <script type="text/javascript"> document.write.lastcheck('reason');
    </script>
    </div>
    </form> 
</div> 
```

我在标头中包含了 js 文件，如下所示：

```
<script src="js/valform.js"></script> 
```

所以现在当它在 AGE 字段中发生错误时，我隐藏的错误表单变得可见，但没有关于错误的信息。

我还有一个问题，还在学习javascript：

所以想添加单选按钮验证，它打破了我的整个验证：

```
function vGender(fld) {

var x = fld.value;

var i = 0;
while (i < x.length) {
    if (x[i].checked) formValid = true;
    i++;        
}

if (!formValid) error = "blabla";
return error;
}​ 
```

我在顶部添加了另一个原因，如下所示：

```
reason += vGender(form.radios); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:25:10.877

```
document.write.lastcheck('reason'); 
```

这将**在加载时**填充您的 div - 您的验证功能仅显示它，但不会用新消息填充它，因此它是空的。

尝试这个：

```
if (reason != "") {
    var box = document.getElementById('erbox');
    box.style.visibility = 'visible';
    box.innerHTML = 'Next error(s) occurred: ' + reason; // here you go
    return false;
} 
```

# elasticsearch - 设置 ElasticSearch Logstash

> ID：14288796
> 
> 赞同：7
> 
> 时间：2013-01-12T00:22:19.907
> 
> 标签：elasticsearch, logstash

我正在尝试为集中式日志记录设置 LogStash/Redis/ElasticSearch 管道，我有几个问题，

1.  我相信要让它工作，你需要一个特定版本的 elasticsearch 和 logstash，有没有一个地方我可以找到一个一对一的映射，什么版本的 elasticsearch 和 logstash 结合在一起。

2.  这听起来可能很傻，但是在`elasticsearch.yml`文件中所有行都以 开头`#`，我是否需要去掉`#`一些最小值。

3.  最后我设置了整个管道，但我看到以下错误，

    ```
    NativeException - org.elasticsearch.cluster.block.ClusterBlockException: blocked by: [SERVICE_UNAVAILABLE/1/state not recovered / initialized];[SERVICE_UNAVAILABLE/2/no master];:
        org/elasticsearch/cluster/block/ClusterBlocks.java:138:in `globalBlockedException'
        org/elasticsearch/cluster/block/ClusterBlocks.java:128:in `globalBlockedRaiseException' 
    ```

我还安装了 elasticsearch head 插件，但无法加载，我看到的只是 Chrome 选项卡中的一个旋转轮。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-14T14:36:17.743

1 查看[logstash elasticsearch 输出](http://logstash.net/docs/1.1.9/outputs/elasticsearch)

它说对于logstash 1.1.9，您应该使用elasticsearch 0.20.2。

2 取决于您的需求和环境，但最初您不需要更改 elasticsearch 中的任何内容即可使其正常工作。

3 听起来您在查找节点时遇到问题，可能与多播发现和您的环境配置有关。

看[elasticsearch zen发现](http://www.elasticsearch.org/guide/reference/modules/discovery/zen.html)

尝试禁用多播以改用单播，只需在您的 elasticsearch.yml 配置文件中取消注释此行：

```
discovery.zen.ping.multicast.enabled: false 
```

并设置单播主机以匹配您的环境：

```
discovery.zen.ping.unicast.hosts: ["localhost"] 
```

也许[这个线程](http://elasticsearch-users.115913.n3.nabble.com/Java-client-unable-to-connect-ClusterBlockException-td4019825.html)可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-03T06:34:11.747

如果您正在运行@cluster，请导航到配置目录。它在您的弹性目录中

在 elasticsearch.yml 启用：-

```
discovery.zen.ping.multicast.enabled: false 
```

默认情况下是

```
#discovery.zen.ping.multicast.enabled: false 
```

# javascript - 通过ajax加载javascript

> ID：14288797
> 
> 赞同：3
> 
> 时间：2013-01-12T00:22:29.730
> 
> 标签：javascript, jquery, ajax

我对 AJAX 还很陌生

我有一个网页（比如网页 A），在按下某个按钮后，通过 AJAX 调用网页 B。网页 B 包含 2 个 javascript 文件。现在，每当我单击按钮时，都不会加载 javascript 文件。其相应的 CSS 文件已被 AJAX 成功加载。这是我检查后得到的-

![错误在 jquery.js 的第 7372 行](../Images/94ccfa8a04e4c74c851e2e0ab8eee760.png)

这里出现了我的问题 1-它是如何调用 wdm.js 的？=*一些随机数*？？

现在，对于解决方法，我尝试通过`jQuery.getScript()`使用此代码的函数来加载 javascript 文件-

```
$.ajax({
     type: "POST", url: "webpageB.php", data: "id="+id,
         complete: function(data){
                           //some code

                           $.getScript('js/wdm.js');

                           // some code
                }
           }); 
```

我现在仍然收到此错误-

现在我的问题 2 出现在这里 - 为什么随机数突然出现在 ajax GET 请求中？

由于某些原因，我无法在网页 A 上使用 javascript，所以剩下的唯一选择是动态加载 javascript（与网页 B 的 DOM 元素同步）。任何人都可以提出一些方法吗？

![url 仍然有那个随机数](../Images/50f7ee45246189e8c990bf0c03cda308.png)

已编辑 - 使用该函数`ajaxsetup`确实删除了 URL 中出现的随机数，但现在我看到该文件仍然没有被 ajax 加载，即使 chrome 检查器（我用来监视 ajax 调用）没有显示任何错误。现在情况有点复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:25:54.507

随机数是时间戳，用于防止浏览器缓存。如果这不是您想要的，`cache : true`请在 ajax 调用中添加选项。例如：`$.ajax({url: "url", success: callback, cache: true});`。如果你想阻止所有未来的 AJAX 请求被默认缓存（这实际上是 jQuery 中的默认设置）：

```
$(document).ready(function() {
  $.ajaxSetup({ cache: true });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:26:32.370

为什么突然出现的随机数出现在 ajax GET 请求中？

以这种方式应用的这个随机数，在其内容上是完全没有用的。它用于缓存清除。基本上，将查询字符串附加到文件引用将确保永远不会使用文件的缓存版本。

# css - 滚动图像未显示在浏览器中

> ID：14288822
> 
> 赞同：0
> 
> 时间：2013-01-12T00:24:25.703
> 
> 标签：css, html, image

我一直在建立一个网站。我刚刚在本地进行了测试，一切正常，但是当我在线测试时，有些图像没有加载。

这些图像不仅是图像，而且是 css 翻转链接，其中有 10 个，都有相同的问题。

这是CSS代码：

```
.art-links{
width:150px;
height:150px;
display:block;
}
.art-links:hover{
background-position:left 150px;
}

#art1{
margin: -300px 0 0 -300px;
background-image:url

('https://dl.dropbox.com/u/70582811/Website/Artwork/Buttons/art1.jpg');
} 
```

这是HTML代码：

```
<a href="#art1" onclick="toggle_on('art1_big'); toggle_on('artbg'); toggle_on('back_off'); 
toggle_on('next1'); toggle_on('prev1'); toggle_off('artwork')">
<div class="centre art-links" id="art1">
</div>
</a> 
```

那只是其中一张图像的代码。

图像不会在 Chrome、Firefox 或 IE 中显示。在 Chrome 和 Firefox 中，按钮仍然存在并且可用，但图像不可用。然而在 IE 中什么都没有。

您可以在此处查看问题：http: [//testerwebby.tumblr.com/](http://testerwebby.tumblr.com/)（单击左上角图片，以解决问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:30:38.860

您的`background-image`财产中不应有 和 之间`url`的空间`(`。删除空间和设置：

```
background-image: url('https://dl.dropbox.com/u/70582811/Website/Artwork/Buttons/art2.jpg'); 
```

对我来说工作得很好。

# c++ - set::find() 没有找到

> ID：14288825
> 
> 赞同：4
> 
> 时间：2013-01-12T00:24:43.783
> 
> 标签：c++

我对这段代码有疑问（cubeBoxData 是一组 cubeBox）：

```
cubeBox temp(bx,by,bz);
cubeBoxData.insert(temp);
set<cubeBox>::iterator i = cubeBoxData.find(temp);
const_cast<cubeBox&>(*i).addCube(x,y,z); 
```

问题是 cubeBoxData.find(temp); 没有找到 temp，然后程序尝试调用 addCube() 失败，我不知道为什么，因为这段代码工作正常（只需更改第三行）：

```
cubeBox temp(bx,by,bz);
cubeBoxData.insert(temp);
set<cubeBox>::iterator i = find(cubeBoxData.begin(),cubeBoxData.end(),temp);
const_cast<cubeBox&>(*i).addCube(x,y,z); 
```

cubeBox 的运算符 < 是：

```
bool operator<(const cubeBox& c) const {
    return x<c.x ? true : y<c.y ? true : z<c.z ? true : false;
} 
```

addCube 不会改变 x、y 或 z。

我认为我的 operator< 是错误的，我错过了一些愚蠢的东西，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T00:36:21.083

您定义的`operator<`没有建立[严格的弱排序](http://en.wikipedia.org/wiki/Strict_weak_ordering)。例如，根据您的比较器，that`{1,0,1} < {0,1,0}`和 that都是这种情况`{0,1,0} < {1,0,1}`。结果，对 的所有操作`set`都具有未定义的行为。

您应该重写您的比较操作，以便它确实建立严格的弱排序。最简单的（？）方法是使用`std::tuple`：

```
bool operator<(const cubeBox& c) const {
    return std::tie(x,y,z) < std::tie(c.x,c.y,c.z);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:07:07.533

整合前面的答案：

集合的元素是 const 是有原因的，你不能只是 const_cast 和修改，因为这样做你并没有告诉集合它应该重新排序你的元素。由于您的`addCube`函数可能会更改元素的排序顺序，因此正确的方法是：

```
cubeBox cpy = *i;
cubeBoxData.erase(i);
cpy.addCube(x,y,z);
cubeBoxData.insert(cpy); 
```

# algorithm - 用于查找合适的替代词、缩写词或单词速记的算法或 API

> ID：14288832
> 
> 赞同：2
> 
> 时间：2013-01-12T00:25:26.093
> 
> 标签：algorithm, api, word, linguistics

我们想为给定的单词生成一个合适的缩写或速记。例如，如果有人给我们“图片”，我们会产生“pix”，或者如果有人给我们“票”，我们会产生“tix”。

是否有任何 API 或算法可以帮助解决这个问题？我们知道 Wordnik，但它并没有提供我们正在寻找的东西。

目前最好的选择是手动编译字典。好像没那么热

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T01:36:13.737

我推荐一种半自动方式：通过 API（例如 Wordnik 的 API）以编程方式检索所有缩写，然后手动编辑结果集以满足您的需要。

# google-drive-api - Google Docs/Drive API 不允许将新文档插入新的 Google 帐户

> ID：14288836
> 
> 赞同：3
> 
> 时间：2013-01-12T00:25:50.133
> 
> 标签：google-drive-api, google-docs-api

我们发现了 Google Docs/Drive API 的一个问题，该问题始终可重现，并且似乎是几周前引入的一个新错误。要查看问题，请执行以下步骤：

1.  创建一个全新的 Google 帐户，但不要在该帐户中执行任何操作（不要单击 Drive 以查看 Google Drive）——只需创建它并关闭该窗口即可。
2.  尝试通过 Google Docs API（我们使用 Zend GData）或新的 Google Drive API 插入一个新的（空的）文档。

结果：使用旧的 Google Docs API，会抛出错误“**预期响应代码 200，得到 400。无法转换文档**”（当我们只是创建新文档而不是上传内容时，这是没有意义的）。使用新的 Google Drive API，同样的事情会产生错误“**发生错误：调用 POST googleapis.com/drive/v2/files 时出错：(500) 内部错误**”

这种情况继续发生，直到我进入新的 Google 帐户并单击“Drive”进入 Google Drive。这样做会为该用户“初始化”Google Drive，此时插入新文档的代码可以正常工作。

这只是最近才开始发生（在过去几周内）。在这种情况下，相同的代码已经存在多年，没有任何问题。在学校环境中，管理员正在创建新的学生帐户（如 Google Apps for Education 帐户），当他们使用我们的服务时，此问题会非常频繁地出现。这会被修复吗？有解决办法吗？帮助，谷歌 API 人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T06:32:52.573

一个快速的解决方法是：

添加到范围：**https ://www.googleapis.com/auth/drive.apps.readonly**

在尝试创建新文档之前，请调用列出已安装的应用程序**$service->apps->listApps();** 或文件列表**$service->files->listFiles();**

试试看这是否适合你。

# php - 有没有办法缩短 PHP 的 HTTP 响应？

> ID：14288840
> 
> 赞同：1
> 
> 时间：2013-01-12T00:26:20.120
> 
> 标签：php, http, get

我正在使用嵌入式数据采集系统，该系统使用 Telit GSM 调制解调器将传感器数据传输到网络。我目前正在使用简单的 GET 请求将数据发送到 php 脚本。我遇到的问题是 HTTP 响应相当大（~220 字节）。我目前有一个非常便宜的 8Mb/mo 数据计划，并且正在尝试最小化每次传输所需的字节数。我考虑过压缩一些传出数据，但那里的潜在收益相当小。由于响应没有用，除了表明请求成功（我什至不解析或使用它），我很想把它剪掉或至少缩短它（只是响应代码例子）。

有谁知道如何从 PHP 做到这一点？到目前为止，我已经查看了 header() 函数但无济于事。我考虑的另一个选项是将请求发送到服务器程序（比如端口 15000 而不是 80），然后从那里向我的 php 脚本发出另一个请求，但这似乎很麻烦。我在用来访问 mysql 的学生服务器上没有合适的库，而且我也在使用 phpCurl，否则我可以使用一个简单的服务器程序来完成整个事情。

有任何想法吗？我们的服务器正在运行 PHP 版本 5.4.4

卢克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:53:15.370

您可以改为通过 TCP 连接发送数据吗？当然，在这种情况下，我假设您拥有自己的服务器计算机。我使用 Python 中的 Twisted 编写了一个简单的 TCP 服务器来与我的 Telit GM862-GPS 模块通信。然后，您可以对 TCP 服务器进行编码以将其上传到其他地方。

如果您将数据上传到其他网站（如 twitter），我认为您没有很多选择可以最小化大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:29:51.980

为了缩短您的响应，我会检查 HTTP 服务器本身。话虽这么说，你不会变得太小。

我可能会研究[MQTT](http://mqtt.org/)用于传感器传输，它是一个非常轻量级的协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T00:35:25.940

一旦你的 PHP 脚本完成了它的工作，你应该能够简单地告诉它：

```
die(); 
```

或者

```
$status = 1;
die($status); 
```

然后您可以查找数字状态（或只是来自服务器的 200 响应）。在捕获响应数据之前，您可能必须检查代码以确保响应数据不会输出到代码的其他位置。输出缓冲可能会有所帮助 - [http://us3.php.net/manual/en/ref.outcontrol.php](http://us3.php.net/manual/en/ref.outcontrol.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T00:48:59.543

也许您可以托管一些应用程序来实现您的设备将其数据发送到的侦听套接字？

您可以使用分隔符或指示消息大小的前缀来组成一些只读协议。这样你就可以只发送你想要的数据，没有任何开销（就像 HTTP 一样）。

# java - 加载另一个 jar 文件中包含的 jar 文件不起作用

> ID：14288842
> 
> 赞同：0
> 
> 时间：2013-01-12T00:26:23.730
> 
> 标签：java, resources, classloader

我一直在玩动态加载 jar 文件，但我无法让它工作。我在 Eclipse 的源文件夹中有一个 jar 文件（resource.jar），所以它位于类路径中。我试图将它作为加载小程序、将其添加到 jframe 并运行它的资源。由于某些未知的原因，这对我自己不起作用。这是我正在尝试的代码。

```
URL jarURL = getClass().getClassLoader().getResource("resource.jar");
ClassLoader urlLoader = new URLClassLoader(new URL[]{jarURL});
applet = (Applet) urlLoader.loadClass("test.TestClassApplet").newInstance();
jframe.add(applet);
applet.init();
applet.start(); 
```

尝试获取资源时没有错误，错误是在加载类时。我得到一个 ClassNotFoundException，即使 jar 文件中的类是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:35:02.350

URLClassLoader 旨在用于加载通过搜索一组 URL 访问的类和资源。它不会为您提取 jar 文件中的类。

请参阅[JarClassLoader](http://docs.oracle.com/javase/tutorial/deployment/jar/jarclassloader.html)教程。

# css - CSS：内容前两种颜色

> ID：14288847
> 
> 赞同：2
> 
> 时间：2013-01-12T00:26:52.233
> 
> 标签：css, xml, html, semantic-markup

我有一个想要显示的结构化语义数据，并使用 CSS 对其进行样式设置。这是一个示例：

```
...<user name="John">...</user>... 
```

我希望它像这样呈现：

```
...
User John ...
... 
```

如果我希望“用户”和“约翰”具有相同的颜色，我可以使用以下 CSS：

```
user:before{
  content: 'User ' attr(name);
} 
```

但是，我希望“用户”为蓝色，而“约翰”为红色。如何使用 CSS 实现这一点？

PS我不想转换我的数据表示。我知道我可以通过将数据转换为具有额外的 div 等来轻松获得这种格式，但我想直接以它的形式显示我的纯语义数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:41:13.337

如果`user`元素为空，则可以使用以下 CSS：

```
user::before {content:"User "; color:blue;}
user::after {content:attr(name); color:red;} 
```

如果`user`元素包含内容，您可以使用：

```
user::before {content:"User "; color:blue; float:left; margin-right:0.5em;}
user::after {content:attr(name); color:red; float:left; margin-right:0.5em;} 
```

（`float`用于获取“User John”字符串后面的元素内容；`margin`用于获取单词之间的空格；可能有更简洁的方法来解决这些问题）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:34:32.430

您不能在 CSS 中以不同的方式设置*部分*`:before`伪内容的样式。您需要一个额外的元素（如 a `span`）某处。`:first-letter`和`:first-line`（以及`:before`整体的内容）是例外，但这不是您想要实现的目标。

# ios - 滑动不适用于导航控制器

> ID：14288850
> 
> 赞同：1
> 
> 时间：2013-01-12T00:27:05.033
> 
> 标签：ios, uistoryboardsegue

我是 IOS 开发的新手，并在故事板上简单地使用作为开始。我将导航控制器链接到我的主视图控制器。我创建了一个按钮并添加了一个链接到 info1 视图控制器的 Push segue。在里面我添加了一个 UIImageView 来显示图像。然后我在 info1 视图控制器中添加一个滑动手势识别器以滑动到 info2 视图控制器。

到目前为止，按下 info1 viewcontroller 的按钮有效。但是滑动到 info2 viewcontroller 不起作用。

任何提示我如何解决这个问题？

我尝试删除 UIImageView 可能无济于事，但仍然无法识别滑动。我没有添加任何代码。只需使用带有导航控制器的情节提要。

谢谢

# ios - UIWebView 没有完成加载？

> ID：14288852
> 
> 赞同：1
> 
> 时间：2013-01-12T00:27:17.803
> 
> 标签：ios, uiwebview

我的应用程序中有一个 webview。它加载了大部分页面，并且在加载完成时调用了函数 webViewDidFinishLoad。但是尽管页面似乎已加载，但某些页面加载并未完成。在这些情况下，既不会 - `(void)webViewDidFinishLoad:(UIWebView *)webView`也不会`(void)webView:(UIWebView *)webView didFailLoadWithError`被调用。例如：转到站点[http://www.mynevadacounty.com/](http://www.mynevadacounty.com/)，当您单击任何项​​目（例如移动设备）时，页面加载不会在 UIWebView 中完成。

这可能是什么原因？

编辑：我试图加载的这些网站中的大多数都是共享点网站

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T03:52:21.503

我最初在这里对这个异常进行了问答：[UIWebView show UIActivityIndi​​cator for loading but ignore additional load requests (eg javascript loaded ads) after page initial loading](https://stackoverflow.com/questions/13466621/uiwebview-show-uiactivityindicator-for-loading-but-ignore-additional-load-reques)

问题是网页将完成加载，然后开始加载其他元素（即广告、iFrame 等）。解决方案是在页面加载开始时存储当前 URL，如果 url 下次“加载”与加载的最后一个 URL 相同，而不是误报...

（在下面的代码中，网页真正开始加载`//show UIActivityIndicator`并真正完成加载主要内容（而不是您正在努力处理的额外内容）`//hide UIActivityIndicator`）

```
//Define the NSStrings "lastURL" & "currentURL" in the .h file.
//Define the int "falsepositive" in the .h file. (You could use booleans if you want)
//Define your UIWebView's delegate (either in the xib file or in your code)

- (void)webViewDidFinishLoad:(UIWebView *)webView {
    lastURL = [[NSString alloc] initWithFormat:@"%@", webView.request.mainDocumentURL];
    if (falsepositive != 1) {
        NSLog(@"Loaded");
        //hide UIActivityIndicator
    } else {
        NSLog(@"Extra content junk (i.e. advertisements) that the page loaded with javascript has finished loading");
        //This method may be a good way to prevent ads from loading hehe, but we won't do that
    }
}

-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; {
    NSURL *requestURL =[request mainDocumentURL];
    currentURL = [[NSString alloc] initWithFormat:@"%@", requestURL]; //not sure if "%@" should be used for an NSURL but it worked...
    return YES;
}

- (void)webViewDidStartLoad:(UIWebView *)webView {
    if ([currentURL isEqualToString:lastURL]) {
        falsepositive = 1;
        NSLog(@"The page is loading extra content with javascript or something, ignore this");
    } else {
        falsepositive = 0;
        NSLog(@"Loading");
        //show UIActiviyIndicator
    }
} 
```

# c++ - C++ toString 输出整数

> ID：14288854
> 
> 赞同：0
> 
> 时间：2013-01-12T00:27:34.040
> 
> 标签：c++, operator-overloading, tostring

我正在复习我的 C++，并试图弄清楚为什么我的 toString 函数没有输出我定义的格式化字符串。

我指的功能是：`friend std::ostream& operator<<(std::ostream&, const Employee&);`

**员工.cpp**

```
#include <iostream>
#include <stdio.h>
using namespace std;

class Employee {
  private:
    string name;
    double rate;
    double hours;
    double getPay() const;
    friend std::ostream& operator<<(std::ostream&, const Employee&);
  public:
    Employee(string, double);
    void setHours(double);
};

Employee::Employee(string name, double rate) {
  this->name = name;
  this->rate = rate;
  this->hours = 0;
}

void Employee::setHours(double hours) {
  this->hours = hours;
}

double Employee::getPay() const {
  double gross = this->hours * this->rate;
  double overtime = this->hours > 40 ? 
      (this->hours - 40) * (this->rate * 1.5) : 0;
    return gross + overtime;
}

// toString
std::ostream& operator<<(std::ostream &strm, const Employee &e) {
  char buff[64];
  return strm << sprintf(buff, "Name: %s, Salary: $%.2f\n",
    e.name.c_str(), e.getPay());
}

int main (int* argc, char** argv) {
  Employee emp1("Bob", 28);
  Employee emp2("Joe", 32);
  emp1.setHours(44);
  emp2.setHours(25);
  cout << emp1 << endl;
  cout << emp2 << endl;
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T00:30:21.580

`sprintf`返回：

*   成功时，返回写入的字符总数。此计数不包括在字符串末尾自动附加的额外空字符。
*   失败时，返回一个负数。

在任何情况下它都不会返回一个字符串，它总是返回一个`int`，这就是您要求打印的内容。大概你想要这个：

```
char buff[64];
sprintf(buff, "Name: %s, Salary: $%.2f\n",
  e.name.c_str(), e.getPay());
return strm << buff; 
```

虽然如果你坚持使用*流*而不是混合*C*和*C++*标准库会更好：

```
return strm << "Name: " << e.name << ", Salary: $" << std::setprecision(2) << e.getPay() << "\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:31:49.130

这真的不是 ostreams 的工作方式。事实上，如果您查看 sprintf，您会发现您实际上并不想将其返回值打印到 strm。相反，您应该打印 buf。就像是：

```
std::ostream& operator<<(std::ostream &strm, const Employee &e) {
  char buff[64];
  sprintf(buff, "Name: %s, Salary: $%.2f\n",
    e.name.c_str(), e.getPay());
  return strm << buff;
} 
```

混合 sprintf 和 ostream 不是一个好主意，但至少可以让你的代码工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T00:34:43.940

将 C/C++ 代码混合在一起是不好的做法，只需编写纯 C++ 代码，

```
std::ostream& operator<<(std::ostream &strm, const Employee &e) 
{  
  strm << "Name: " << e.name << " Salary: $" << std::setprecision(2) << e.getPay();
  return strm;
} 
```

# java - 用于多部分表单数据的 Jersey 2 注入源

> ID：14288856
> 
> 赞同：30
> 
> 时间：2013-01-12T00:27:47.720
> 
> 标签：java, jersey, tomcat7, jax-rs, multipartform-data

我有一个方法：

```
@POST
@Consumes("multipart/form-data")
@Produces( {"text/xml"})
public Response processForm(
    @FormDataParam("myparam") InputStream is,
    @FormDataParam("myparam") FormDataContentDisposition detail) 
```

与 Jersey 1.x 一起工作得很好。

我正在升级到 2.0 m11。

现在我收到以下错误：

```
12/01/2013 11:15:04 AM org.glassfish.jersey.server.ApplicationHandler initialize
INFO: Initiating Jersey application, version Jersey: 2.0-m11 2012-12-21 12:34:15...
12/01/2013 11:15:04 AM org.glassfish.jersey.internal.Errors processErrors
SEVERE: The following errors and warnings have been detected:
WARNING: No injection source found for a parameter of type public javax.ws.rs.core.Response com.plutext.FileUpload.processForm(java.io.InputStream,org.glassfish
.jersey.media.multipart.FormDataContentDisposition) at index 0. 
```

我发现 [http://java.net/jira/browse/JERSEY-1413](http://java.net/jira/browse/JERSEY-1413)并提交[http://java.net/projects/jersey/lists/commits/archive/2012-09/message/126](http://java.net/projects/jersey/lists/commits/archive/2012-09/message/126)这似乎相关，但它对我来说如何解决这个问题并不明显。

**更新**

我制作了一个 servlet，它在 org.glassfish.jersey.server.ApplicationHandler 初始化之前在 Tomcat 中运行：

```
public class Jersey2Init extends HttpServlet {

    private static final Logger jul = Logger.getLogger(Jersey2Init.class
        .getName());

    static {    
        System.out.println("\n\nrunning Jersey2Init\n\n");

        final ResourceConfig resourceConfig1 = new ResourceConfig(XFormService.class);
        resourceConfig1.registerInstances(new LoggingFilter(jul, true));
        resourceConfig1.register(MultiPartFeature.class);       

        final ResourceConfig resourceConfig2 = new ResourceConfig(AssembleService.class);
        resourceConfig2.registerInstances(new LoggingFilter(jul, true));
        resourceConfig2.register(MultiPartFeature.class);       
    }
} 
```

它肯定首先运行：

```
INFO: Deploying web application archive C:\Java\apache-tomcat-7.0.29\webapps\Foo-Services.war

running Jersey2Init

18/01/2013 9:09:51 PM org.glassfish.jersey.server.ApplicationHandler initialize
INFO: Initiating Jersey application, version Jersey: 2.0-m11 2012-12-21 12:34:15...
18/01/2013 9:09:52 PM org.glassfish.jersey.internal.Errors processErrors
SEVERE: The following errors and warnings have been detected: 
```

但我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-18T06:47:44.710

您需要在您的应用程序上启用 MultiPart 功能。启用此功能会向 Jersey 2 应用程序注入必要的消息正文阅读器和编写器。以下是您注册它们的方法：

### 在服务器端（http-server）：

```
final ResourceConfig resourceConfig = new ResourceConfig(MultiPartResource.class);
resourceConfig.register(MultiPartFeature.class); 
```

### 在服务器端（servlet 部署）：

```
import org.glassfish.jersey.filter.LoggingFilter;
import org.glassfish.jersey.media.multipart.MultiPartFeature;

import javax.ws.rs.core.Application;
import java.util.HashSet;
import java.util.Set;

public class MyApplication extends Application {
    @Override
    public Set<Class<?>> getClasses() {
        final Set<Class<?>> classes = new HashSet<Class<?>>();
        // register resources and features
        classes.add(MultiPartFeature.class);
        classes.add(MultiPartResource.class);
        classes.add(LoggingFilter.class);
        return classes;
    }
} 
```

### web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
    <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
    <servlet>
        <servlet-name>Jersey Servlet</servlet-name>
        <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>javax.ws.rs.Application</param-name>
            <param-value>com.aruld.jersey.multipart.MyApplication</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Jersey Servlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

### 在客户端：

```
final ClientConfig clientConfig = new ClientConfig();
clientConfig.register(MultiPartFeature.class);
Client client = ClientFactory.newClient(clientConfig); 
```

[我在这里](https://github.com/aruld/jersey2-multipart-sample)的 Github 中整理了一个端到端的 Jersey 2 MultiPart 示例。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-08-14T16:06:58.767

我试图使用 Jersey 2 进行文件上传。我想避免创建自定义 Application 或 ResourceConfig 类来启用 MultiPart。它没有很好的文档记录，但是如果你想添加 Multipart 功能，你所要做的就是将它添加到 web.xml 中的 Jersey servlet 配置中：

```
<init-param>
    <param-name>jersey.config.server.provider.classnames</param-name>
    <param-value>org.glassfish.jersey.filter.LoggingFilter;org.glassfish.jersey.media.multipart.MultiPartFeature</param-value>
</init-param> 
```

如您所见，我还添加了一个日志过滤器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-31T17:18:14.177

并使用带注释的应用程序实例......

```
@ApplicationPath("restAPI")
public class ServiceApplication extends ResourceConfig {
    public ServiceApplication() {
        register(JAXBContextResolver.class);
        register(JacksonFeature.class);
        register(MultiPartFeature.class);
        registerInstances(new LoggingFilter(Logger.getLogger(ServiceApplication.class.getName()), true));
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-01T05:02:42.873

经过很多努力，我发现你必须导入`import org.glassfish.jersey.media.multipart.FormDataParam;`而不是`import javax.ws.rs.FormParam;`这样你才能使用`@FormDataParam`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-01T14:07:15.423

我使用的是 Jersey 2.7 并且遇到了同样的错误。它通过升级到 Jersey 2.9 自行解决

# android - 将PC中的文件传输到Android

> ID：14288858
> 
> 赞同：0
> 
> 时间：2013-01-12T00:28:07.313
> 
> 标签：android, file, sockets, transfer

好吧，我想开始一个新项目，但一开始我有一个问题。

我必须使用什么技术将文件从电脑传输到安卓手机？我已经做了一个项目，我使用套接字和服务器套接字将文件 prom pc 传输到 pc，但现在我不知道这是否是更好的方法。

你觉得我应该用什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:30:44.473

下载管理器可能吗？

[http://developer.android.com/reference/android/app/DownloadManager.Request.html#DownloadManager.Request%28android.net.Uri%29](http://developer.android.com/reference/android/app/DownloadManager.Request.html#DownloadManager.Request%28android.net.Uri%29)

写个例子太累了，去睡觉了，但结帐例如：

[http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/](http://www.vogella.com/blog/2011/06/14/android-downloadmanager-example/)

# php - php中的执行错误

> ID：14288861
> 
> 赞同：0
> 
> 时间：2013-01-12T00:28:59.527
> 
> 标签：php, exec

我需要从登录用户那里获取 sso（员工编号）号码才能完成查询，但它告诉我第 12 行有错误，我无法弄清楚问题有人可以帮助我吗？

```
include_once('../../include/config.inc.php');

session_start();
if($_SESSION['utype']=='Manager'){
    //Se buscan todos los datos de los empleados q pertenecen a el área lidereada por el usuario
    //Se extrae el id del jefe
    $query='select HIGH_PRIORITY userId from mgit_users.users where hrOracleNumber='.$_SESSION['sso'];
    $exec=$conn->execute ($query) or die ("Error $query".$conn->errorMsg());        
    $chiefId=$exec->fields['userId'];   
    $exec->Close();
    }
//Despliega la tabla principal
function cargar(){
    $respuesta = new xajaxResponse('ISO-8859-1');
    include('../connection/connection.php');
    //Se extrae la información de todos los records existentes
$query="SELECT HIGH_PRIORITY cc.name ccname, cc.description ccdesc, CONCAT(u.firstName,' ',u.lastName) ccowner, cc.ownerSSO osso, cc.initialBudget abudget, cc.actualBudget cbudget, cc.plannedBudget pbudget  
        FROM hr_cost_centers cc, mgit_users.users u
        WHERE cc.ownerSSO = hrOracleNumber
    ORDER BY ccname"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:41:02.073

这个...

> 致命错误：在第 12 行的 /usr/local/apache/htdocs/areas/psae/psae_tools/TrainingNeedsAssesment/modules/co‌​stCentersStatus/index.php 中调用非对象的成员函数

...意味着 $conn 在这一点上不是一个类的实例。通常通过在类上调用 new 来实例化：

```
$conn = new databaseClass; 
```

*编辑*

此资源的示例显示“执行”而不是“执行”——这可能很重要。 [http://phplens.com/lens/adodb/docs-adodb.htm#ex1](http://phplens.com/lens/adodb/docs-adodb.htm#ex1)

所以你的线路应该是：

```
$exec=$conn->Execute($query) or die ("Error $query".$conn->errorMsg()); 
```

# python - 在不更改顺序的情况下重新索引

> ID：14288864
> 
> 赞同：2
> 
> 时间：2013-01-12T00:29:30.550
> 
> 标签：python, pandas

我有以下数据框：

```
in  year   ni  d  m   x    y        q
1   2012   1   2  0  NaN  NaN       3
6   2012   2   1  1    9    9       1
5   2012   3   1  1   17   17       1
3   2012   4   0  3   37   37       0
5   2012   5   1  0  NaN  NaN       3
2   2012   6   3  1   15   15       3 
```

当我使用 df.reindex(index=[1,2,3,4,5,6]) - 基本上是列 'ni' （我想使用的索引） - 那么这将改变我的数据框的顺序，我尽量避免。我知道我可以通过重命名来做到这一点，但是数据有 5,0000 行，写这样一个字典很累......

那么有没有办法保持顺序但更改索引，或者是否有技巧可以更快地重命名或简单地将 ni 调整为索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T02:53:53.953

假设您的 DataFrame 如下（带有 index `'in'`），您可以使用[`set_index`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.set_index.html)：

```
In [1]: df = pd.read_csv('ni.csv', sep='\s+', index_col=0)

In [2]: df
Out[2]: 
    year  ni  d  m   x   y  q
in                           
1   2012   1  2  0 NaN NaN  3
6   2012   2  1  1   9   9  1
5   2012   3  1  1  17  17  1
3   2012   4  0  3  37  37  0
5   2012   5  1  0 NaN NaN  3
2   2012   6  3  1  15  15  3

In [3]: df.set_index('ni', drop=False)
Out[3]: 
    year  ni  d  m   x   y  q
ni                           
1   2012   1  2  0 NaN NaN  3
2   2012   2  1  1   9   9  1
3   2012   3  1  1  17  17  1
4   2012   4  0  3  37  37  0
5   2012   5  1  0 NaN NaN  3
6   2012   6  3  1  15  15  3 
```

虽然在很多情况下这可能没问题，但如果您担心速度和内存使用情况，您可以这样做`inplace`（即更改`df`而不创建副本）。

```
In [4]: df.set_index('ni', drop=False, inplace=True) 
```

*`inplace`似乎快了 30% 左右。*

# php - PHP 函数 unique_id()，我在哪里可以看到函数的代码？

> ID：14288872
> 
> 赞同：0
> 
> 时间：2013-01-12T00:30:21.127
> 
> 标签：php

我找不到实际函数的代码，因为我对它如何创建 id 感兴趣，例如它从哪里获取时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T00:44:23.333

如果您仍然对源代码感兴趣，它位于公共 git 存储库中： [https ://github.com/php/php-src/blob/master/ext/standard/uniqid.c](https://github.com/php/php-src/blob/master/ext/standard/uniqid.c)

```
gettimeofday((struct timeval *) &tv, (struct timezone *) NULL);
sec = (int) tv.tv_sec;
usec = (int) (tv.tv_usec % 0x100000);

/* The max value usec can have is 0xF423F, so we use only five hex
* digits for usecs.
*/
if (more_entropy) {
    spprintf(&uniqid, 0, "%s%08x%05x%.8F", prefix, sec, usec, php_combined_lcg(TSRMLS_C) * 10);
} else {
    spprintf(&uniqid, 0, "%s%08x%05x", prefix, sec, usec);
}

RETURN_STRING(uniqid, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:43:58.300

哪个功能？我不相信`unique_id()`PHP 中有函数。的代码`uniqid()`在[ext/standard/uniqid.c](https://github.com/php/php-src/blob/master/ext/standard/uniqid.c)中。

你可以通过缩小存储库在 Github 上搜索这种东西。例如，搜索[repo:php/php-src uniqid](https://github.com/search?q=+uniqid+repo%3Aphp%2Fphp-src&p=1&ref=searchbar&type=Code&l=)将在 php repo 中找到对 uniqid 的引用。

[在这个早先问题的答案中](https://stackoverflow.com/questions/3616221/search-code-inside-a-github-project)有一个这样的例子，以及其他 Github 搜索语法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T00:40:17.200

您可以在 [https://github.com/php/php-src/blob/master/ext/standard/uniqid.c中找到 uniqid() 的源代码](https://github.com/php/php-src/blob/master/ext/standard/uniqid.c)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T00:31:56.173

这可能对手册有所帮助：http: [//php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php)

它解释了唯一性是从以微秒为单位的时间获取的。

# php - 用于基于 Web 的音频/音乐处理的库/包

> ID：14288883
> 
> 赞同：0
> 
> 时间：2013-01-12T00:31:48.973
> 
> 标签：php, javascript, audio, web, audio-player

在线音乐专辑和音乐播放器对于许多文件格式非常常见。但是，使用 Web 界面处理音乐文件和应用不同的效果（比如构建卡拉 OK）需要一个库/包。网络上有没有为音乐处理构建的好的包/库（与图像的 IMAGEMAGIC 类似）？我正在寻找可以集成到 Web 开发平台中的开源（PHP、JS 或类似）代码。是否有任何音乐播放器具有此类内置功能以支持此类功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T09:31:41.030

您可以尝试网络音频 API：

[http://www.w3.org/TR/webaudio/](http://www.w3.org/TR/webaudio/)

或这些库：

Audiolib.js [http://docs.audiolibjs.org/](http://docs.audiolibjs.org/)

Audiolet.js [https://github.com/oampo/Audiolet/](https://github.com/oampo/Audiolet/)

WebPD.js [https://github.com/sebpiq/WebPd](https://github.com/sebpiq/WebPd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:57:04.453

尝试[http://dashersw.github.com/pedalboard.js/](http://dashersw.github.com/pedalboard.js/) ...它会产生某些吉他效果 - 不完全确定您在寻找什么

# logic - 我的程序出现逻辑错误。谁能发现什么问题？

> ID：14288893
> 
> 赞同：0
> 
> 时间：2013-01-12T00:33:14.490
> 
> 标签：logic

下面的列表应该是我的程序的结果。不过，对于＃2，我得到“荷马开门”。我不知道我是否正盯着错误。我已经研究了一段时间的代码并且困了绝对没有帮助。任何帮助表示赞赏！

1.  //巴特锁门。
2.  //荷马试图打开门，但不能因为它锁着。
3.  //荷马打开门。
4.  //荷马开门。
5.  //Bart 试图打开门，但不能，因为它已经打开了。
6.  //玛吉关上门。
7.  //Homer 试图关门，但不能，因为它已经关上了。
8.  //丽莎开门。
9.  //亚伯拉罕试图锁门，但不能，因为它开着。
10.  //玛吉关上门。
11.  //亚伯拉罕锁上了门。
12.  //Bart 试图打开门，但不能因为它锁着。
13.  //丽莎试图打开门，但不能因为它锁着。
14.  //荷马试图打开门，但不能因为它锁着。
15.  //亚伯拉罕打开门。
16.  //荷马开门。
17.  //玛吉关上门。

    ```
    //in a separate method:

    bart.lockDoor();
    homer.openDoor();
    homer.unlockDoor();
    homer.openDoor();
    bart.openDoor();
    marge.closeDoor();
    homer.closeDoor();
    lisa.openDoor();
    abraham.unlockDoor();
    marge.closeDoor();
    abraham.lockDoor();
    bart.openDoor();
    lisa.openDoor();
    homer.openDoor();
    abraham.unlockDoor();
    homer.openDoor();
    marge.closeDoor();

     boolean locked;
     boolean open;

     public void lockDoor()
    {
        if(locked == true)
            out.println( name + " tries to lock the door, but can't because its already locked.");
            else
                if(open == false)
                {
                    locked = true;
                    out.println( name + " locks the door.");

                }
    }

    public void unlockDoor()
    {
        if(open == true)
            out.println( name + " tries to unlock the door, but can't because its open.");
                else
                    if(locked == false)
                        out.println( name + " tries to unlock the door, but can't because its already unlocked.");
                        else
                            if(locked == true)
                            {
                                out.println( name + " unlocks the door.");
                                locked = false;
                            }

    }

    public void openDoor()
    {
        if(open == true)
            out.println( name + " tries to open the door, but can't because its already open.");
            else
                if( locked == true )
                    out.println( name + " tries to open the door, but can't because its locked.");
                    else
                        if(locked == false)
                        {
                            out.println( name + " opened the door.");
                            open = true;
                        }

    }

    public void closeDoor()
    {
        if(open == false)
            out.println( name + " tries to close the door, but can't because its already closed.");
            else
            {
                if(open == true)
                {
                    out.println( name + " closed the door.");
                    open = false;
                }

            }
    } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:40:02.680

您没有指定语言或完整的程序，但看起来问题在于每个人（有效地）都有自己的门，独立于彼此的门，因为每个人都有自己的锁定/打开标志来跟踪他们的门.

如果您希望只有一扇门，您需要让所有人共享一个锁定和单个打开的标志。根据您使用的语言，您可以通过制作 flags 来做到这一点`static`。或者，您可以将它们放在单独的“门”对象中，并让所有“人”对象引用该“门”

# android - 安卓登录网页

> ID：14288894
> 
> 赞同：1
> 
> 时间：2013-01-12T00:33:21.790
> 
> 标签：android, http, login, web

我想登录网站并从中读取数据，但我的代码不起作用

这是我要登录的网站的 html 的一部分。要登录，您必须输入卡号并单击“Nastavak”按钮

```
<span id="rightframe_Label1" class="smalltextcell" style="display:inline-block;width:50px;">Kartica:</span>
<input name="ctl00$rightframe$TextBox1" type="text" value="601983" maxlength="19" id="rightframe_TextBox1" title="Upisati broj kartice">
<input type="submit" name="ctl00$rightframe$ProvjeraSaldoButton" value="Nastavak" id="rightframe_ProvjeraSaldoButton"> 
```

这是代码

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
            // Create a new HttpClient and Post Header
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost("webpage");

            try {
                // Add your data
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
                nameValuePairs.add(new BasicNameValuePair("rightframe_TextBox1", "numberOfCard"));
                nameValuePairs.add(new BasicNameValuePair("rightframe_ProvjeraSaldoButton", "Nastavak"));
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                // Execute HTTP Post Request
                HttpResponse response = httpclient.execute(httppost);

                String html = inputStreamToString(response.getEntity().getContent()).toString();
                Log.e(Constants.TAG, html);

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            }   
    }

    private StringBuilder inputStreamToString(InputStream is) throws IOException {
        String line = "";
        StringBuilder total = new StringBuilder();

        // Wrap a BufferedReader around the InputStream
        BufferedReader rd = new BufferedReader(new InputStreamReader(is));

        // Read response until the end
        while ((line = rd.readLine()) != null) { 
            total.append(line); 
        }

        // Return full string
        return total;
        } 
```

当我登录时，该代码仅从登录屏幕打印我的 html，但没有从屏幕打印 html。我不知道问题出在哪里

# c# - 如何在 Windows Phone 中使 TextBlock 可编辑

> ID：14288895
> 
> 赞同：0
> 
> 时间：2013-01-12T00:33:29.223
> 
> 标签：c#, windows-phone-7, textblock

我想让 TextBox 可编辑，怎么做？确切地说，当用户点击它时，会有一个键盘让他插入一个字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:39:14.337

`TextBlock`还是`TextBox`？TextBlock 不可编辑 - 它类似于 Label 控件。如果您是可编辑的文本控件，请使用`TextBox`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T13:49:17.493

你可以做一些非常简单的事情。您需要同时创建一个 TextBlock 和一个 TextBox。您必须从代码中控制它们的可见性。您必须将 TextBox 的文本属性绑定（两种方式）到 xaml 中的 TextBlock。单击 textBlock 进行编辑后，将其从代码中隐藏，使 TextBox 可见。textBlock 中的文本将在您绑定后出现。编辑您的文本并可能将注意力移开或进行交互以运行可以折叠 TextBox 并再次显示 TextBlock 的事件。现在使用自绑定后的编辑文本。你需要一个代码吗？

# icloud - 在 NSSavePanel/NSOpenPanel 中排除 iCloud 作为选项

> ID：14288899
> 
> 赞同：4
> 
> 时间：2013-01-12T00:33:56.947
> 
> 标签：icloud, nssavepanel

我在幕后使用 iCloud 文件同步来使我的 Mac 应用程序的实例保持同步，因此我为此设置了权利。不幸的是，这意味着当我调用 NSSavePanel 时，iCloud 也会显示为可能的保存位置。

因为我的应用程序不会生成打算重复使用或重新导入我的应用程序的文件，所以我没有 iCloud 打开面板。但是，我的应用确实允许用户导出简单的 HTML 或 CSV 报告。我不希望一个合理的用户在我的应用程序中导出报告时选择 iCloud 作为他们的保存目的地，但 Apple 现在已将此标记为拒绝该应用程序的理由，因为他们可能会这样做，然后这些文件实际上被搁置在云。

当用户保存文件时，如何从潜在选项中抑制 iCloud？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T10:44:16.780

我的应用程序也因为能够将导出的文档保存到 iCloud 而被拒绝。我在给审阅者的说明中指出，保存到 iCloud 是不合理的，但他们第二次拒绝了。我在评论反馈和 Apple 的开发者板上询问了示例代码，但没有得到回应。最后我放弃了，只是关闭了 iCloud 支持。这很方便，但不是必需的。

如果您在 TextEdit 中创建文档，并在 iCloud 中导出为 PDF，您会创建一个 TextEdit 无法打开的文件。（Preview 可以。）按照 Apple 自己的规则，TextEdit 应该被拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-19T11:47:34.800

如果您完全使用 iCloud 并且有一个保存面板，那么 iCloud 将作为保存位置的一个选项。希望将来这将是可选的，但现在我的解决方案是在我的应用程序菜单中添加一个“打开”选项，允许我的应用程序使用该项目的系统默认应用程序打开我保存的文件。

例如，我的应用程序允许用户将报告保存为 txt 文件。因此，当他们再次在 iCloud 中打开它们时，它们会在 TextEdit 中打开。

这是一个简单的方法，您可以添加到 AppDelegate 并链接到“打开”菜单项。

```
- (IBAction)openDocument:(id)sender {
    NSOpenPanel *openPanel = [[NSOpenPanel alloc] init];
    if ([openPanel runModal] == NSOKButton)
    {
        NSURL *aFilePath = [[openPanel URLs] objectAtIndex:0];
        NSWorkspace *workspace = [NSWorkspace sharedWorkspace];
        [workspace openURL:aFilePath];
    }
} 
```

# c# - C# 单元测试 - 包含多个测试的 XML 数据源

> ID：14288902
> 
> 赞同：8
> 
> 时间：2013-01-12T00:34:04.373
> 
> 标签：c#, unit-testing

我是单元测试框架的新手。使用 VS 2010，我使用 XML 作为我的数据源。

假设我的 XML 看起来像这样：

```
<testgroup>
  <test>
    <param1>100</param1>
    <param2>200</param2>
  </test>
  <test>
    <param1>333</param1>
    <param2>222</param2>
  </test>
</testgroup> 
```

所以一个测试组可以包含很多测试。将它们分解为单独的 xml 文件效率不高。为简单起见，假设 param1 是一个 int，param2 是另一个 int，我的测试是验证 param2 > param1。

是否可以编写单个 TestMethod 以便它遍历 XML 中的各种测试，以便单元测试框架将为每个测试显示一个测试？

到目前为止我还没有找到解决方案。也许数据源并不意味着以这种方式驱动测试数据。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T00:41:47.337

使用 NUnit，您可以执行以下操作：

```
[TestMethod]
public void TestDerpMethod(int a, string b, bool c)
{
    //...test code...
} 
```

您可以像这样执行多个测试用例：

```
[TestMethod]
[TestCase(12, "12", true)]
[TestCase(15, "15", false)]
public void TestDerpMethod(int a, string b, bool c)
{
    //...test code...
} 
```

您还可以使用此方法将此方法与 XML 一起[使用](http://codeclimber.net.nz/archive/2008/01/18/How-to-simulate-RowTest-with-MS-Test.aspx)：

```
<Rows>
    <Row>
        <A1>1</A1>
        <A2>1</A2>
        <Result>2</Result>
    </Row>
    <Row>
        <A1>1</A1>
        <A2>2</A2>
        <Result>3</Result>
    </Row>
    <Row>
        <A1>1</A1>
        <A2>-1</A2>
        <Result>1</Result>
    </Row>
</Rows> 
```

和 C#：

```
[TestMethod]
[DeploymentItem("ProjectName\\SumTestData.xml")]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.XML",
                   "|DataDirectory|\\SumTestData.xml",
                   "Row",
                    DataAccessMethod.Sequential)]
public void SumTest()
{
    int a1 = Int32.Parse((string)TestContext.DataRow["A1"]);
    int a2 = Int32.Parse((string)TestContext.DataRow["A2"]);
    int result = Int32.Parse((string)TestContext.DataRow["Result"]);
    ExecSumTest(a1, a2, result);
}

private static void ExecSumTest(int a1, int a2, int result)
{
    Assert.AreEqual(a1 + a2, result);
} 
```

# mysql - mySQL“不在”查询抛出错误

> ID：14288904
> 
> 赞同：-1
> 
> 时间：2013-01-12T00:34:19.037
> 
> 标签：mysql

我基本上是在 mySQL 查询期间尝试使用 NOT IN 函数两次 我的新当前查询如下

```
SELECT `o`.`id`, `o`.`name`, `o`.`url`, `o`.`type`, `o`.`desc` FROM `offers` as `o` 
WHERE `o`.country_iso = '$country_iso' AND `o`.`id` not in 
(select distinct(offer_id) from conversions where ip = '$_SERVER[REMOTE_ADDR]' 
and converted != '0') AND `o`.`id` not in 
(select `offer_id` from `aff_disabled_offers` where `offer_id` = 'o.id' 
and `user_id` = '1') ORDER by rand() LIMIT $limit 
```

该查询有效，但由于某种原因它完全忽略了这一点

```
AND `o`.`id` not in 
(select `offer_id` from `aff_disabled_offers` where `offer_id` = 'o.id') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:41:09.027

您需要在条件之间指定一个运算符，例如 AND 或 OR。您还需要在 NOT IN 子句中进行有效查询。

```
SELECT `o`.`id`, `o`.`name`, `o`.`url`, `o`.`type`, `o`.`desc` 
FROM `offers` as `o` 
WHERE `o`.country_iso = '$country_iso' 
AND `o`.`id` not in (select distinct(offer_id)
                     from converstions where
                     from conversions 
                     where ip = '$_SERVER[REMOTE_ADDR]' 
                     and converted != '0')
AND `o`.`somevar` not in (select `somevar` from 
                          `sometable` where `offer_id` = 'o.id')
ORDER by rand() LIMIT 0,6 
```

# mysql - 从内部连接中检索不同的记录

> ID：14288906
> 
> 赞同：1
> 
> 时间：2013-01-12T00:34:33.703
> 
> 标签：mysql, sql, greatest-n-per-group

我需要从中检索第一张图像`portfolio_images`，而我的以下查询没有这样做。当我只需要它找到的第一条记录时，它会返回找到的每条`portfolio`记录的所有图像（这适用于 DISTINCT） 。`portfolio_images.fullsize`

**文件夹**

```
id | project_name | location_id | project_type | is_active 
```

**投资组合图像**

```
id | portfolio_id | fullsize

 SELECT DISTINCT p.project_name, pi.fullsize
    FROM portfolio p
    INNER JOIN portfolio_images pi ON p.id = pi.portfolio_id
    AND p.is_active = 1
    AND p.project_type = 'project' AND p.location_id = 3
    ORDER BY p.oindex 
```

我想避免必须先查询`portfolio`，然后遍历这些结果并执行嵌套循环以`portfolio_images`根据当前投资组合 ID 查询第一个返回的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:37:41.440

添加一个子查询，获取`portfolio_id`table 上每个的最后一个 ID `portfolio_images`。这将确保您将为每个`project_name`.

```
SELECT  p.project_name, pi.fullsize
FROM    portfolio p
        INNER JOIN portfolio_images pi 
            ON p.id = pi.portfolio_id AND 
                p.is_active = 1 AND 
                p.project_type = 'project' AND 
                p.location_id = 3
        INNER JOIN
        (
            SELECT  portfolio_id, MAX(ID) max_ID
            FROM    portfolio_images 
            GROUP BY portfolio_id
        ) a ON pi.portfolio_id = a.portfolio_id AND
                pi.ID = a.max_ID
ORDER   BY p.oindex 
```

# c# - Year、Month 和 Day 参数描述了无法表示的 DateTime

> ID：14288908
> 
> 赞同：4
> 
> 时间：2013-01-12T00:34:44.047
> 
> 标签：c#, datetime

当单击表单的提交按钮而不填写任何表单字段时，它应该返回一个验证横幅 panel1.visible 它适用于除生育控制日期之外的所有其他字段，它是日期、月份的 3 个不同选择框和年份。等等 ct... 因为默认值是 01/01/0001 00:00:00 它给出错误。如何验证日期时间？？？

```
Stack Trace:

at System.DateTime.DateToTicks(Int32 year, Int32 month, Int32 day)
at System.DateTime..ctor(Int32 year, Int32 month, Int32 day)
at _Default.sb_Click(Object sender, EventArgs e) in k:\WebSites\WebSite10\Default.aspx.cs:line 27
at System.Web.UI.ImageClickEventHandler.Invoke(Object sender, ImageClickEventArgs e)
at System.Web.UI.HtmlControls.HtmlInputImage.OnServerClick(ImageClickEventArgs e)
at System.Web.UI.HtmlControls.HtmlInputImage.RaisePostBackEvent(String eventArgument)
at System.Web.UI.HtmlControls.HtmlInputImage.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument)
at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument)
at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

Server Side: 

SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);

protected void sb_Click(object sender, EventArgs e)
{

DateTime age = new DateTime(Convert.ToInt32(year.Value), Convert.ToInt32(date.Value), Convert.ToInt32(day.Value));

SqlCommand cmd = new SqlCommand("insert into Register values ( '" + em.Value + "','" + ln.Value + "','" + select.Value + "','" + fn.Value + "','" + pwr.Value + "','" + age + "','" + pw.Value + "')", con);

if (em.Value == "" || ln.Value == "" || select.Value == "" || fn.Value == "" || pwr.Value == "" || pw.Value == "")
{

panel1.Visible = true;
con.Close();
}

else

cmd.ExecuteNonQuery();
con.Close();

Client Side: 

<select name="month" id="date" runat="server">
<option value="0">Month</option>
<option value="1">January</option>
<option value="2">February</option>
<option value="3">March</option>
<option value="4">April</option>
<option value="5">May</option>
<option value="6">June</option>
<option value="7">July</option>
<option value="8">August</option>
<option value="9">September</option>
<option value="10">October</option>
<option value="11">November</option>
<option value="12">December</option>
</select>

<select name="day" id="day" runat="server">
<option value="0">Day</option>
<option value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
<option value="9">9</option>
<option value="10">10</option>
<option value="11">11</option>
<option value="12">12</option>
<option value="13">13</option>
<option value="14">14</option>
<option value="15">15</option>
<option value="16">16</option>
<option value="17">17</option>
<option value="18">18</option>
<option value="19">19</option>
<option value="20">20</option>
<option value="21">21</option>
<option value="22">22</option>
<option value="23">23</option>
<option value="24">24</option>
<option value="25">25</option>
<option value="26">26</option>
<option value="27">27</option>
<option value="28">28</option>
<option value="29">29</option>
<option value="30">30</option>
<option value="31">31</option>
</select>

<select name="year" id="year" runat="server">
<option value="0">Year</option>
<option value="2009">2009</option>
<option value="2008">2008</option>
<option value="2007">2007</option>
<option value="2006">2006</option>
<option value="2005">2005</option>
<option value="2004">2004</option>
<option value="2003">2003</option>
<option value="2002">2002</option>
<option value="2001">2001</option>
<option value="2000">2000</option>
<option value="1999">1999</option>
<option value="1998">1998</option>
<option value="1997">1997</option>
<option value="1996">1996</option>
<option value="1995">1995</option>
<option value="1994">1994</option>
<option value="1993">1993</option>
<option value="1992">1992</option>
<option value="1991">1991</option>
<option value="1990">1990</option>
<option value="1989">1989</option>
<option value="1988">1988</option>
<option value="1987">1987</option>
<option value="1986">1986</option>
<option value="1985">1985</option>
<option value="1984">1984</option>
<option value="1983">1983</option>
<option value="1982">1982</option>
<option value="1981">1981</option>
<option value="1980">1980</option>
<option value="1979">1979</option>
<option value="1978">1978</option>
<option value="1977">1977</option>
<option value="1976">1976</option>
<option value="1975">1975</option>
<option value="1974">1974</option>
<option value="1973">1973</option>
<option value="1972">1972</option>
<option value="1971">1971</option>
<option value="1970">1970</option>
<option value="1969">1969</option>
<option value="1968">1968</option>
<option value="1967">1967</option>
<option value="1966">1966</option>
<option value="1965">1965</option>
<option value="1964">1964</option>
<option value="1963">1963</option>
<option value="1962">1962</option>
<option value="1961">1961</option>
<option value="1960">1960</option>
<option value="1959">1959</option>
<option value="1958">1958</option>
<option value="1957">1957</option>
<option value="1956">1956</option>
<option value="1955">1955</option>
<option value="1954">1954</option>
<option value="1953">1953</option>
<option value="1952">1952</option>
<option value="1951">1951</option>
<option value="1950">1950</option>
<option value="1949">1949</option>
<option value="1948">1948</option>
<option value="1947">1947</option>
<option value="1946">1946</option>
<option value="1945">1945</option>
<option value="1944">1944</option>
<option value="1943">1943</option>
<option value="1942">1942</option>
<option value="1941">1941</option>
<option value="1940">1940</option>
<option value="1939">1939</option>
<option value="1938">1938</option>
<option value="1937">1937</option>
<option value="1936">1936</option>
<option value="1935">1935</option>
<option value="1934">1934</option>
<option value="1933">1933</option>
<option value="1932">1932</option>
<option value="1931">1931</option>
<option value="1930">1930</option>
<option value="1929">1929</option>
<option value="1928">1928</option>
<option value="1927">1927</option>
<option value="1926">1926</option>
<option value="1925">1925</option>
<option value="1924">1924</option>
<option value="1923">1923</option>
<option value="1922">1922</option>
<option value="1921">1921</option>
<option value="1920">1920</option>
<option value="1919">1919</option>
<option value="1918">1918</option>
<option value="1917">1917</option>
<option value="1916">1916</option>
<option value="1915">1915</option>
<option value="1914">1914</option>
<option value="1913">1913</option>
<option value="1912">1912</option>
<option value="1911">1911</option>
<option value="1910">1910</option>
<option value="1909">1909</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:04:39.487

```
if (em.Value == "" || ln.Value == "" || select.Value == "" || fn.Value == "" || pwr.Value == "" || pw.Value == "" || year.Value == "0" || date.Value == "0" || day.Value == "0" )
{
    panel1.Visible = true;
}
else
{
    DateTime age = new DateTime(Convert.ToInt32(year.Value), Convert.ToInt32(date.Value), Convert.ToInt32(day.Value));

    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand("insert into Register values ( '" + em.Value + "','" + ln.Value + "','" + select.Value + "','" + fn.Value + "','" + pwr.Value + "','" + age + "','" + pw.Value + "')", con);
    cmd.ExecuteNonQuery();
    con.Close();   
} 
```

# java - 布尔逻辑转换规则解释此切换到 Java ==?

> ID：14288912
> 
> 赞同：1
> 
> 时间：2013-01-12T00:35:12.110
> 
> 标签：java, logical-operators, boolean-logic

我正在通过 CodingBat 上的练习。在此[页面](http://codingbat.com/prob/p181646)上，解决方案中有此提及：

```
 // The above can be shortened to:
  //   return ((aSmile && bSmile) || (!aSmile && !bSmile));
  // Or this very short version (think about how this is the same as the above)
  //   return (aSmile == bSmile); 
```

是否有任何规则可以解释简短版本？你如何从逻辑 AND 到等于？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T00:40:52.597

第一个条件基本上是说：如果两者都为真或都为假。只有当它们相等时才会发生这种情况。

请注意，在 Java 中，布尔对象存在一个陷阱，其中将打印以下两个内容：

```
Boolean aSmile=new Boolean(true),bSmile=new Boolean(true);
if((aSmile & bSmile) || (!aSmile && !bSmile)) { System.out.println("SAME"); }
if(aSmile!=bSmile)                            { System.out.println("NOT THE SAME"); } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T00:43:57.317

解释这两个表达式等价的最简单方法是创建一个逻辑表：

```
aSmile  |  bSmile
   0         0     1
   0         1     0
   1         0     0
   1         1     1 
```

将 a & b 的所有组合插入第一个表达式，您可以看到第一个表达式仅在 aSmile 和 bSmile 相等时为真。所以 aSmile == bSmile 只有在它们相等时才会返回 true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T00:44:12.963

如果`(aSmile && bSmile)`评估为真，则两者都为真。

如果`(!aSmile && !bSmile)`评估为真，那么两者都是假的。

因此，如果这些条件之一（均为 TRUE，或均为 FALSE）为真，则长版本返回 TRUE。

最简单地问（如在简短版本中），aSmile 和 bSmile 是否等效？

# ruby - Selenium-Webdriver：找到元素后获取属性

> ID：14288917
> 
> 赞同：7
> 
> 时间：2013-01-12T00:35:42.863
> 
> 标签：ruby, selenium-webdriver

我对自动化的东西还是很陌生，所以这听起来像是一个愚蠢的问题。在发布问题之前，我确实谷歌搜索了它：）

无论如何，这是问题所在

我在 Android 设备上进行自动化测试其中一项测试是验证一个项目是否已被标记为“收藏”页面的代码片段是：

```
<li class = "resultItem isFavorite" data-index="2">
<div class="name" data-cis="4ced6feb-3b5c-415a-ae1c-0b8bca8e3c85" onclick="return true">f,f</div>
</li> 
```

我可以在列表中找到元素`el = @driver.find_element(:xpath, "//*[class='name' and text() ='f,f']")`。我希望 el.class 会告诉我 resultItem isFavorite。相反，我得到的是： Selenium:WebDriver::Element

如果项目未标记为收藏，则不会在字段中添加 isFavorite 标志。我希望使用 isFavorite 来验证一个项目是否被标记为收藏，但我似乎无法将它放入一个变量中。

任何帮助，将不胜感激。

谢谢，

杰夫

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-12T18:53:49.403

您真正想要的是以下内容：

```
# Note: Possibly incorrect Ruby code here. 
# Written from memory.
el = @driver.find_element(:xpath, "/your/xpath/here")
# Could also your el["class"]
element_class_attribute = el.attribute("class") 
```

通常，使用大多数属性名称`src`（如`el.src`）会给您一个运行时错误。但是，碰巧`class`在 Ruby 中具有特殊的含义，每个对象都有一个`class`属性，即 Ruby 类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-05-23T00:15:59.817

我在这里读了两个问题。第一，简短，简单。

***问：现在我找到`el`了，如何访问它的 class HTML 属性？***

A：使用`el.attribute('class')`，或者它的简写`el['class']`。请参阅[Selenium::WebDriver::Element.attribute](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#attribute-instance_method)。

现在更长的。

***问：如何测试由 表示的项目`el`是否被标记为收藏？***

答：见下文。

为了给出更好的答案，我需要更多关于我们正在测试的页面组成的信息。我做了一些基本假设：

*   该页面有一个或多个`li`具有类的元素`'resultItem'`，其中一些也具有类`'isFavorite'`。
*   这些`li`元素中的每一个都有一个或多个子元素，其中一个保证是`div`with class `'name'`。
*   只有一个这样的孩子`div`会有文本`'f,f'`。

从广义上讲，我们有两种方法可以解决这个问题。

1.  我们可以找到相关的`div`，然后验证其父级是否`li`有类`'isFavorite'`。
2.  我们可以找到所有`li`具有 class 的元素`'isFavorite'`，然后验证其中一个是否包含相关的`div`.

这里有很多事情我们需要注意。

对于 Selenium，XPath 选择器擅长按文本查找，但[不擅长按类查找](https://stackoverflow.com/questions/8808921/selecting-a-css-class-with-xpath)。CSS 选择器擅长按类查找，但[不能按文本查找](https://stackoverflow.com/questions/5441680/css-selector-based-on-element-text)。这些都不是找到`div`我们所追求的理想选择。

如上所述，我们可以使用`element['class']`. 正如我们发现的那样，`element.class`打电话`Object#class`给我们`Selenium::WebDriver::Element`。 `el['class']`，在这种情况下，给了我们 String `'name'`。如果在其父元素上调用，我们会得到`'resultItem isFavorite'`.

我们可以使用`element.text`. 在这种情况下`el.text`会给我们。`'f,f'`与[JavaScript 的 textContent 函数](https://developer.mozilla.org/en-US/docs/Web/API/Node/textContent)一样，它返回元素的文本及其所有后代，因此调用`text()`父元素也会给我们`'f,f'`. 请注意，此方法可能很慢，并且如果元素以某种方式不可见，则会返回一个空字符串。谨慎使用。有关更多信息，请参阅[Selenium::WebDriver::Element.text](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#text-instance_method)。

鉴于上述情况，让我们看看方法#1 和#2 是如何发挥作用的。（以下是 Ruby 1.9.3。）

方法#1

```
div_elements = @driver.find_elements(:css, 'li > div.name').select { |e| e.text == 'f,f' }
div_element = div_elements.first

parent_li = div_element.find_element(:xpath, './..')
parent_li_classes = parent_li['class'].scan(/\S+/)
if parent_li_classes.include?('isFavorite')
  # PASS
else
  # FAIL
end 
```

方法#2

```
favorite_items = @driver.find_elements(:css, 'li.isFavorite')
if favorite_items.any? { |item| item.find_element(:css, 'div.name').text == 'f,f' }
  # PASS
else
  # FAIL
end 
```

方法 #2，重构

```
if @driver.find_elements(:css, 'li.isFavorite').any? { |item| item.text == 'f,f' }
  # PASS
else
  # FAIL
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-24T14:04:28.153

**红宝石**

```
element.attribute("attribute name") 
```

**Python**

```
element.get_attribute("attribute name") 
```

**爪哇**

```
element.getAttribute("attribute name") 
```

**C＃**

```
element.GetAttribute("attribute name"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T19:49:55.400

我能够通过另一种方式解决这个问题：

```
element = @driver.find_elements(:class, "isFavorite")
element.each do |t|
   if t.text() == 'f,f' then
       result = "pass"
   end
end 
```

我觉得这可能真的很慢，如果有一个很长的列表......但至少它有效:)

谢谢

杰夫

# php - Foreach() 没有在数组中循环

> ID：14288927
> 
> 赞同：0
> 
> 时间：2013-01-12T00:36:25.067
> 
> 标签：php, arrays, json, foreach

基本上我有一个`file_get_contents`得到json，然后我解码json。我的问题是使用`Foreach()`循环遍历所有数组，它似乎没有这样做，我通过使用确保数组不为空`print_r()`。该脚本与我拥有的可以正常工作的脚本非常相似，但由于某种原因，这个脚本不起作用。

```
foreach($items['item'] as $ind=>$d2){                   
      $id = $d2['id'];
} 
```

那是我的代码，我真的不知道为什么它不起作用。

PS。我试着做

```
$i = 0; 
foreach($items[$i] as $ind=>$d2){
        $id = $d2['id'];
        $i++;
} 
```

在没有错误停止之前，它只到达了第 9 个数组。

谢谢，

阿奇

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:43:19.033

```
foreach($items as $ind=>$d2){
        $id = $d2['id'];
} 
```

你能试试这个吗？我认为您不需要填写该密钥。

[http://php.net/foreach](http://php.net/foreach)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:45:49.670

json_decode 可能返回 ua stdClass 而不是数组

# jquery - 由于 js，切换列表中的链接不可点击

> ID：14288931
> 
> 赞同：0
> 
> 时间：2013-01-12T00:37:07.890
> 
> 标签：jquery, css, list, hyperlink, toggle

我知道这是导致问题的javascript，但我不知道。当我滚动链接时，它显示为好像可以点击但不会点击。我也没有在我的 CSS 中使用任何 z-index。我试图设置它，但它没有任何区别。这个js中有什么可能的原因吗？

```
$(function(){
$('li.an_item').css('pointer','default').css('list-style-image','none');
$('li.an_item:has(ul)').click(function(event){
        if (this == event.target) {
            $(this).css('list-style-image',
                (!$(this).children().is(':hidden')) ? 'url(/wp-content/themes/theme/images/arrow_sideways.png)' : 'url(/wp-content/themes/theme/images/arrow_down.png)');
            $(this).children().toggle('slow');
        }
        return false;
    })
    .css({cursor:'pointer', 'list-style-image':'url(/wp-content/themes/theme/images/arrow_sideways.png)'})
    .children().hide();
$('li:not(:has(ul))').css({cursor:'default', 'list-style-image':'none'});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:53:51.697

摆脱`return false;`.

`return false;`相当于：

```
event.preventDefault();
event.stopPropagation(); 
```

`preventDefault`阻止您的链接充当链接，这就是它不起作用的原因。

# vb.net - 如何在 Visual Basic 中重新排序选项卡？当我隐藏然后显示一个选项卡时，它出现在最后而不是第一个

> ID：14288933
> 
> 赞同：0
> 
> 时间：2013-01-12T00:37:42.320
> 
> 标签：vb.net, winforms, forms, tabs

如何在 Visual Basic 中重新排序选项卡？当我隐藏然后显示一个选项卡时，它出现在最后而不是第一个。

代码：

```
Dim tab As TabPage
Dim checktab As Integer = 0
Private Sub HideTabPage(tabPage As TabPage)
    tab = tabPage
    Me.SearchExtras.TabPages.Remove(tabPage)
    checktab = 1
End Sub

Private Sub UnHideTabPage()
    If checktab = 1 Then
        Me.SearchExtras.TabPages.Add(tab)
        checktab = 0
    End If
End Sub 
```

回复报价

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:49:06.220

您可以使用[TabPageCollection.Insert](http://msdn.microsoft.com/en-us/library/7te5wzay.aspx)而不是 Add，并指定要插入选项卡的索引，因此在您的情况下，它可能如下所示：

```
Me.SearchExtras.TabPages.Insert(0, tab) 
```

# java - 日食内容辅助泛型不再起作用

> ID：14288934
> 
> 赞同：2
> 
> 时间：2013-01-12T00:37:54.410
> 
> 标签：java, eclipse, content-assist

Eclipse 曾经为我自动完成泛型......现在它不再存在了，我不知道为什么。

我用来打字

```
List<String> foo = new Arr 
```

然后按 Ctrl+Space 我会在建议中选择 ArrayList 我会得到

```
List<String> foo = new ArrayList<String>(); 
```

因此。

但是今天日食不是完全的，我只得到

```
List<String> foo = new ArrayList<>(); 
```

我完全不知道我可能做了什么......而且我不知道如何恢复我非常习惯的这种好行为......

Eclipse 版本：Indigo Service Release 2 构建 ID：20120216-1857

任何帮助表示赞赏:)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-05T08:42:00.153

第二个构造（在初始化中没有泛型）是 Java7 的新特性，称为菱形运算符。Eclipse 反映了这一点，如果您在项目中使用 JDK7，它将用于自动完成。如果您尝试切换回 JDK6，自动完成将使用旧结构。

更多信息：关于钻石运算符和 Eclipse 的
[Oracle 文档](http://docs.oracle.com/javase/tutorial/java/generics/types.html)
[博客](http://fahdshariff.blogspot.co.uk/2011/07/java-7-diamond-operator.html)

# linq - GroupBy + Case 当 Sum(x) > 0 然后 Sum(x) else 0

> ID：14288940
> 
> 赞同：0
> 
> 时间：2013-01-12T00:38:43.533
> 
> 标签：linq, group-by, sum, case-when

如何在 LINQ 中复制以下内容

```
SELECT KEY_COLUMN,
        CASE WHEN SUM(COLUMN2) < 0 THEN SUM(COLUMN2) ELSE 0 END AS NewColumn
FROM TABLE
GROUP BY KEY_COLUMN 
```

到目前为止，我可以想出以下

```
var result = from a in source
               group a by a.Key_Column
                   into g
                   select new
                   {
                       Key_Column = g.Key,
                       NewColumn = g.Where(item => item.Column2 < 0)
                                    .Sum(item => item.Column2)
}; 
```

在决定它是否为负数之前，上面的代码并没有真正总结 Column2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:44:30.633

```
var query = from a in db.Table
            group a by a.Key_Column into g
            let sum = g.Sum(item => item.Column2)
            select new {
               Key_Column = g.Key,
               NewColumn = sum < 0 ? sum : 0
            }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:51:26.067

这不一样吗？

```
var query = from r in db.Table
  group r by r.KEY_COLUMN into g
  select new {
    KEY_COLUMN = g.Key,
    NewColumn = g.Sum(x => x.COLUMN2) < 0 ? g.Sum(x => x.COLUMN2) : 0
}; 
```

# ios - Facebook SDK 从 iOS 登录到 App Engine

> ID：14288955
> 
> 赞同：4
> 
> 时间：2013-01-12T00:41:02.857
> 
> 标签：ios, facebook, google-app-engine

以下是正确的方法吗，使用 Facebook 帐户登录到运行 App Engine（可能是任何）的后端。

场景一：

1.  登录脸书
2.  从 Facebook SDK 获取令牌（如何获取令牌？）
3.  使用 Facebook 令牌发送到后端服务器
4.  在后端，使用从客户端发送的令牌来验证 Facebook 上的用户
5.  如果**4**是有效用户，则使用用户名和令牌在后端创建用户。
6.  与后端的任何进一步通信 - 然后后端可以仅在后端使用在后端创建的用户和令牌验证用户。

有一次，我想到了做以下事情：

1.  登录脸书
2.  让 facebook 将信息重定向到后端
3.  让后端从任何 Facebook 信息创建用户
4.  让facebook登录过程返回client/ios
5.  然后用户应该使用这个令牌和用户信息登录到后端。

希望它有意义。

# c# - 获取日期之间最畅销的 10 种产品

> ID：14288957
> 
> 赞同：3
> 
> 时间：2013-01-12T00:41:20.523
> 
> 标签：c#, .net, linq

我想在用户指定的日期内退回前 10 名最畅销的产品（数量最多）。

我来自数据库的表：

**订单**

```
OrderId | OrderDate 
```

**订购_产品**：

```
ProductID | OrderID | Quantity 
```

**产品**

```
ProductID | ProductName | ProductDescription 
```

代码：

```
return (from product in this.Entities.Products
        from orderProduct in this.Entities.Order_Product 
        from order in this.Entities.Orders
        where order.OrderId = orderProduct.ProductID && orderProduct.ProductID == product.ProductID
        where (order.OrderDate >= date1 &&  <= date2)
        select product).OrderByAscending(COUNT(Quantity)).Distinct().Take(10); 
```

代码到现在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:34:46.297

我可以想到两种方法来做到这一点

这会对每个产品进行子查询，以总结日期范围之间的销售数量。这对我来说似乎最清楚，但可能表现不佳

```
 var query = 
   (from p in Entities.Products
    let totalQuantity = ( from op in Entities.Order_Product
                          join o in Entities.Orders on op.OrderID equals o.OrderId
                          where op.ProductID == p.ProductID && o.OrderDate >= date1 && o.OrderDate <= date2
                          select op.Quantity ).Sum()
    where totalQuantity > 0
    orderby totalQuantity descending
    select p).Take(10); 
```

或者作为单个查询获取日期范围内的所有订单，按产品对它们进行分组，并对数量求和。

```
 var query = 
   (from p in Entities.Products
    join op in Entities.Order_Product on p.ProductID equals op.ProductID
    join o in Entities.Orders on op.OrderID equals o.OrderId
    where o.OrderDate >= date1 && o.OrderDate <= date2
    select new { Product = p, Quantity = op.Quantity } into productQty
    group productQty by productQty.Product into pg
    let totalQuantity = pg.Sum(prod => prod.Quantity)
    orderby totalQuantity descending
    select pg.Key).Take(10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:53:45.203

```
var query = 
   (from p in Entities.Products
    join op in Entities.Order_Product on p.ProductID equals op.ProductID
    join o in Entities.Orders on op.OrderID equals o.OrderId
    where o.OrderDate >= date1 && o.OrderDate <= date2
    select new { Product = p, op.Quantity } into pq
    group pq by pq.Product.ProductID into g
    select g.OrderByDescending(x => x.Quantity).First().Product).Take(10); 
```

# android - EditText & Enter 键

> ID：14288958
> 
> 赞同：3
> 
> 时间：2013-01-12T00:41:19.837
> 
> 标签：android, keyevent, editview

我想要功能

1.  只需 Enter -- EditText 返回并提交文本
2.  shift+Enter -- EditText 中的新行

这是代码，但它不起作用。Enter 和 shift+Enter 之间没有区别（没有换行）：

```
EditText text=(EditText)findViewById(R.id.text);

text.setOnEditorActionListener（新的 OnEditorActionListener（）{

        @覆盖
        公共布尔 onEditorAction（TextView v，int actionId，KeyEvent 事件）{

            if ( (actionId == EditorInfo.IME_ACTION_DONE) ||
                ( ((event.isShiftPressed()==false) &&
                (event.getKeyCode() == KeyEvent.KEYCODE_ENTER) &&
                (event.getAction() == KeyEvent.ACTION_DOWN))){

                可编辑 buff=(Editable)v.getText();
                writeText(buff.toString());

                context.finish(); // texten sparad här o activity avslutas

                返回真；
            }
            返回假；
            }
    });

```

在 layout.xml 中：

```
android:inputType="text|textMultiLine"
android:imeOptions="actionDone" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T00:49:24.747

我认为您需要使用 shift 键侦听器并保持布尔值来检测何时按下 shift 键，如下所示：

[Android shift键监听器](https://stackoverflow.com/questions/7749750/android-shift-key-listener)

```
@Override
public boolean onKey(View v, int keyCode, KeyEvent event) 
{
    switch (v.getId()) 
    {
        case R.id.myEditTextId:
        if(keyCode==59)//59 is shift's keycode
        //do your stuff here against pressing shift key
        break;
    }
} 
```

# c# - 可重复使用的自动滚动画布

> ID：14288959
> 
> 赞同：0
> 
> 时间：2013-01-12T00:41:26.170
> 
> 标签：c#, wpf, animation, scroll

好吧，我做了一个 Scolling 画布（有时我在里面放了一些按钮来打开我的程序或做其他事情）它工作得很好。但我尝试将其制作成 .dll，但我注意到我使用的方法对 .dll 毫无价值，因为它会在放置时自动滚动，我无法添加更多内容。所以我想要的是一个空的画布（或任何东西），它可以自动滚动内容并让我在其中添加更多项目。例如：按钮、文本块、标签等，它将滚动所有这些。

编辑：我希望能够将控件从工具箱拖到窗口中，然后在上面添加按钮等，它会自动滚动它们。

下面的例子。仅限 xaml .. 想按照我想要的方式进行编码，必须用 c# 而不是 xaml。因为一旦将其添加为用户控件，您就无法向其添加其他控件、工具箱项目并期望它们自动滚动..

```
<Canvas ClipToBounds="True" x:Name="scrollerCanvas" Height="588">
    <Grid x:Name="OurContainer" Height="588" Background="{x:Null}" ClipToBounds="False">
        <Grid.Clip>
            <RectangleGeometry Rect="0,0,1087,588" RadiusX="30" RadiusY="30" />
        </Grid.Clip>
        <StackPanel Height="800" Margin="1">
            <StackPanel.RenderTransform>
                <TranslateTransform x:Name="scroll" />
            </StackPanel.RenderTransform>

        </StackPanel>

        <Grid.Triggers>
            <EventTrigger RoutedEvent="Canvas.Loaded">
                <EventTrigger.Actions>
                    <BeginStoryboard>
                        <Storyboard RepeatBehavior="Forever">
                            <DoubleAnimation 
                                From="620" To="-450"
                                Storyboard.TargetName="scroll" Storyboard.TargetProperty="Y"
                                Duration="0:0:28" SpeedRatio=".8" />
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger.Actions>
            </EventTrigger>
        </Grid.Triggers>
    </Grid>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T13:38:24.120

您可以在其中使用带有 Canvas 的 ScrollViewer。

# css - 简单的 CSS3 媒体查询不起作用

> ID：14288961
> 
> 赞同：0
> 
> 时间：2013-01-12T00:41:53.647
> 
> 标签：css, media-queries

应该很简单的东西根本不起作用。我只想设置一个 div 在宽度大于 980px 之前不显示。但是，它仅在屏幕为 980 像素时才有效，但仅此而已！

```
/* Should work while screen is 980px or less */
    @media (max-width: 980px) {
    .large-screen-hide{
        display: none;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:55:18.417

我认为您需要检查最小宽度和最大宽度。

尝试

```
/* Should work while screen is 980px or less */
   @media screen and (min-width: 1px) and (max-width: 980px) {
      .large-screen-hide{
          display: none;
      }
   } 
```

来自Mozilla 开发者网络上的[CSS 媒体查询。](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-12T00:46:44.490

你需要设置媒体类型

```
@media screen and (max-width:980px){
    .large-screen-hide {
        display:none;
    }
} 
```

# scala - 合并两个相同类型的案例类，除了一些字段

> ID：14288964
> 
> 赞同：3
> 
> 时间：2013-01-12T00:42:55.483
> 
> 标签：scala, case-class

如果您有一个案例类，例如：

```
case class Foo(x: String, y: String, z: String) 
```

您有两个实例，例如：

```
Foo("x1","y1","z1")
Foo("x2","y2","z2") 
```

是否可以将实例 1 合并到实例 2 中，字段 z 除外，这样结果将是：

```
Foo("x1","y1","z2") 
```

* * *

我的用例只是我通过 Scala API 将 JSON 对象提供给 Backbone 应用程序，而 Backbone 应用程序返回给我一个相同结构的 JSON，以便我可以保存/更新它。这些 JSON 对象被解析为案例类，以便于 Scala 操作。但是客户端永远不应该更新某些字段（例如creationDate）。现在我正在进行手动合并，但我想要一个更通用的解决方案，有点像增强的复制功能。

我想要的是这样的：

```
instanceFromDB.updateWith(instanceFromBackbone, excludeFields = "creationDate" ) 
```

但我希望它是类型安全的:)

**编辑：** 我的案例类有更多字段，除非我明确表示不合并字段，否则我希望默认行为合并字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T11:18:58.787

你想要的已经在那里了；您只需要以另一种方式解决问题。

```
case class Bar(x: String, y: String)
val b1 = Bar("old", "tired")
val b2 = Bar("new", "fresh") 
```

如果您想要`b2`没有特别提及的所有内容，则应从`b2`;复制 `b1`您想保留的任何内容都可以明确提及：

```
def keepY(b1: Bar, b2: Bar) = b2.copy(y = b1.y)

scala> keepY(b1, b2)
res1: Bar = Bar(new,tired) 
```

只要您在同一个案例类的两个实例之间进行复制，并且字段是不可变的，就像默认情况下一样，这将满足您的需求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T00:49:59.857

```
case class Foo(x: String, y: String, z: String)

Foo("old_x", "old_y", "old_z")
// res0: Foo = Foo(old_x,old_y,old_z)

Foo("new_x", "new_y", "new_z")
// res1: Foo = Foo(new_x,new_y,new_z)

// use copy() ...
res0.copy(res1.x, res1.y)
// res2: Foo = Foo(new_x,new_y,old_z)

// ... with by-name parameters
res0.copy(y = res1.y)
// res3: Foo = Foo(old_x,new_y,old_z) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T13:41:52.597

您可以通过柯里化的复制方法从自动复制中排除类参数：

```
case class Person(name: String, age: Int)(val create: Long, val id: Int) 
```

这清楚地表明哪些是客户端设置的普通值字段，哪些是特殊字段。你不能不小心忘记提供一个特殊的字段。

对于从一个实例获取值字段并从另一个实例获取特殊字段的用例，通过使用默认参数或原始参数的特殊成员反射调用副本：

```
import scala.reflect._
import scala.reflect.runtime.{ currentMirror => cm }
import scala.reflect.runtime.universe._
import System.{ currentTimeMillis => now }

case class Person(name: String, age: Int = 18)(val create: Long = now, val id: Int = Person.nextId) {
  require(name != null)
  require(age >= 18)
}
object Person {
  private val ns = new java.util.concurrent.atomic.AtomicInteger
  def nextId = ns.getAndIncrement()
}

object Test extends App {

  /** Copy of value with non-defaulting args from model. */
  implicit class Copier[A: ClassTag : TypeTag](val value: A) {
    def copyFrom(model: A): A = {
      val valueMirror = cm reflect value
      val modelMirror = cm reflect model
      val name = "copy"
      val copy = (typeOf[A] member TermName(name)).asMethod

      // either defarg or default val for type of p
      def valueFor(p: Symbol, i: Int): Any = {
        val defarg = typeOf[A] member TermName(s"$name$$default$$${i+1}")
        if (defarg != NoSymbol) {
          println(s"default $defarg")
          (valueMirror reflectMethod defarg.asMethod)()
        } else {
          println(s"def val for $p")
          val pmethod = typeOf[A] member p.name
          if (pmethod != NoSymbol) (modelMirror reflectMethod pmethod.asMethod)()
          else throw new RuntimeException("No $p on model")
        }
      }
      val args = (for (ps <- copy.paramss; p <- ps) yield p).zipWithIndex map (p => valueFor(p._1,p._2))
      (valueMirror reflectMethod copy)(args: _*).asInstanceOf[A]
    }
  }
  val customer  = Person("Bob")()
  val updated   = Person("Bobby", 37)(id = -1)
  val merged    = updated.copyFrom(customer)
  assert(merged.create == customer.create)
  assert(merged.id == customer.id)
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T01:57:02.627

```
case class Foo(x: String, y: String, z: String)

val foo1 = Foo("x1", "y1", "z1")
val foo2 = Foo("x2", "y2", "z2")

val mergedFoo = foo1.copy(z = foo2.z) // Foo("x1", "y1", "z2") 
```

如果您`Foo`稍后更改为：

```
case class Foo(w: String, x: String, y: String, z: String) 
```

无需进行任何修改。明确地：

```
val foo1 = Foo("w1", "x1", "y1", "z1")
val foo2 = Foo("w2", "x2", "y2", "z2")

val mergedFoo = foo1.copy(z = foo2.z) // Foo("w1", "x1", "y1", "z2") 
```

# php - 从 PHP 数组中获取数据

> ID：14288966
> 
> 赞同：1
> 
> 时间：2013-01-12T00:43:13.603
> 
> 标签：php, arrays, json

我有这个使用 json_decode 创建的数组。这是我的代码：

```
$obj = json_decode($json);
$results = $obj->{"results"}; // This selects the results section
echo $results[artistName]; 
```

$results 是数组

数组如下所示：

```
array(1) { 
   [0]=> object(stdClass)#5 (8) { 
      ["wrapperType"]=> string(6) "artist"    
      ["artistType"]=> string(6) "Artist" 
      ["artistName"]=> string(5) "Human"
      ["artistLinkUrl"]=> string(56) "https://itunes.apple.com/us/artist/human/id35761368?uo=4" 
      ["artistId"]=> int(35761368) 
      ["amgArtistId"]=> int(1173165) 
      ["primaryGenreName"]=> string(3) "Pop" 
      ["primaryGenreId"]=> int(14) 
   } 
} 
```

但它没有回应任何东西。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T00:45:26.913

它仍然是一个对象，因此您需要像这样访问密钥。

```
echo $results[0]->artistName; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T00:47:31.820

```
echo $results[0]->artistName 
```

注意，你有 stdClasses 数组

# javascript - div1 隐藏到 div2 显示返回到 div1 定时不刷新页面

> ID：14288968
> 
> 赞同：0
> 
> 时间：2013-01-12T00:43:35.127
> 
> 标签：javascript, jquery, html, refresh, timed

我正在开发一个基于 Web 的信息亭，但不知道如何在 jquery 中完成

我使用 2 个 div div1 是起始页 div2 菜单，如果他们将鼠标悬停在图像上，div1 隐藏并且 div2 出现并显示菜单。但是当人们不使用菜单并走开时，它需要切换回 div 1 而不刷新整个页面。div1 的定时切换也必须在 div2 处于活动状态时启动。

```
<div 
id="start" 
style="display:none; 
  position:absolute; 
  right:0px; 
  top:0px;
  width:1680px;
  height:1050px; 
  background-image:url(start/images/overlays/start_overlay.png);
  background-color:;
  padding: 0px;
  z-index:7;
  "> start content here <br> <a 
  onmouseover="ShowContent('menu'); return true;"
  href="javascript:ShowContent('menu'); HideContent('start'); ">
  [image]</a>
  <div>

<div 
id="menu" 
style="display:none; 
  position:absolute; 
  right:0px; 
  top:0px;
  width:1680px;
  height:1050px; 
  background-image:url(start/images/overlays/menu_overlay.png);
  background-color:;
  padding: 0px;
  z-index:7;
  "> Menu Content here </div>

<script type="text/javascript" language="JavaScript"><!--
function HideContent(d) {
if(d.length < 1) { return; }
document.getElementById(d).style.display = "none";
}
function ShowContent(d) {
if(d.length < 1) { return; }
document.getElementById(d).style.display = "block";
}
function ReverseContentDisplay(d) {
if(d.length < 1) { return; }
if(document.getElementById(d).style.display == "none") 
{ document.getElementById(d).style.display = "block"; }
else { document.getElementById(d).style.display = "none"; }
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T01:04:52.810

据我了解，您希望默认显示 div1，然后在用户开始与页面交互时显示 div2，并在用户不活动一段时间后返回 div1。

```
$(function(){
  var activeTime = 3000,
      activeTO;

  $(document).on("mousemove keydown scroll", function(){
    $("#div1").hide();
    $("#div2").show();
    clearTimeout(activeTO);
    activeTO = setTimeout(kioskIdle, activeTime);
  });

  function kioskIdle(){
    $("#div1").show();
    $("#div2").hide();
  }
}); 
```

工作演示：http: [//jsfiddle.net/rXjMV/](http://jsfiddle.net/rXjMV/)

# c - C 中的编译错误：错误：“。”之前的预期表达式 令牌

> ID：14288970
> 
> 赞同：0
> 
> 时间：2013-01-12T00:43:54.650
> 
> 标签：c, gcc

我是 C 的新手（就像 2 天前开始的那样），由于语法问题，我遇到了编译问题，但我从 gcc 收到的错误消息对我没有多大帮助。我编译如下：`gcc -ansi -Wall -pedantic line.c`

整件事是我 101 课的一个简单的介绍性练习。这些值只是相互测试，以确保它们在 line_test.c 文件中正确分配。但在我解决那个人的编译问题之前，我需要解决这个文件。

这是我的代码：

```
#include "line.h"

struct line2d create_line2d (double x1, double y1, double x2, double y2) {
    struct line2d line;
    line.x1=1;
    line.y1=2;
    line.x2=3;
    line.y2=4;
    return line;
} 
```

和 line.h 代码：

```
#ifndef line
#define line

struct line2d {
    double x1;
    double y1;
    double x2;
    double y2;
};

struct line2d create_line2d(double x1, double y1, double x2, double y2);

#endif 
```

这是它抛出的错误

```
line.c: In function ‘create_line2d’:
line.c:5: error: expected expression before ‘.’ token
line.c:6: error: expected expression before ‘.’ token
line.c:7: error: expected expression before ‘.’ token
line.c:8: error: expected expression before ‘.’ token
line.c:9: warning: ‘return’ with no value, in function returning non-void 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T00:58:54.390

在你定义为空的头文件`line`中。在 C 文件中，您使用它，预处理器将单词的每个实例都替换为`line`空。所以基本上，你正在尝试编译：

```
struct line2d create_line2d (double x1, double y1, double x2, double y2) {
    struct line2d line;
    .x1=1;
    .y1=2;
    .x2=3;
    .y2=4;
    return ;
} 
```

显然，这是行不通的:)

您应该始终使用一些不会在其他任何地方使用的字符串作为`#ifdef`警卫。像这样的东西`LINE__H___`会是更好的选择。

```
#ifndef LINE__H___
#define LINE__H___

struct line2d {
    double x1;
    double y1;
    double x2;
    double y2;
};

struct line2d create_line2d(double x1, double y1, double x2, double y2);

#endif//!LINE__H___ 
```

在通用编译器的更新版本中，您可以完全使用`#pragma once`并避免整个名称冲突问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T01:00:51.217

你已经`#define line`在你的标题中完成了 - 所以预处理器替换`line`为“”（什么都没有）。

所以你的C代码是：

```
.x1=1; 
```

可能最好的事情是让包含保护定义一些更独特的东西：`INCLUDE_GUARD_LINE_H`也许。无论如何，它应该是大写的。

# ios - 无法在 UIAlertView 中使用键盘进行输入

> ID：14288978
> 
> 赞同：0
> 
> 时间：2013-01-12T00:44:37.673
> 
> 标签：ios, uialertview

最近我用了一个`UITextFied`in a`UIAlertView`来提示用户输入密码。但是在`UIAlertView`呈现之后，我发现键盘被某些层重叠/覆盖，我无法通过键盘输入任何内容。

你能告诉我如何解决这个问题吗？非常感谢。

![UIAlertView 截图][1]

[http://i.stack.imgur.com/CMvMz.png](http://i.stack.imgur.com/CMvMz.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T05:19:41.803

请不要继承或混淆 UIAlertView 中的元素。 [苹果的文档是这样说的：](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html#//apple_ref/doc/uid/TP40006802-CH3-DontLinkElementID_2)

> **子类化注释**
> 
> UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。

您需要创建自己的 UIView（带有文本字段和按钮），您可以将其作为子视图添加到当前可见视图中的任何其他内容之上。

# ember.js - 使用 Ember 的全局通知视图

> ID：14288980
> 
> 赞同：17
> 
> 时间：2013-01-12T00:44:46.333
> 
> 标签：ember.js

我有一个通知视图，负责在页面顶部显示全局消息（信息、警告、确认消息......）

为此，我创建了一个 NotificationView，定义了它的 content 属性并提供了两个处理程序来显示和隐藏视图。

```
APP.NotificationView = Ember.View.extend({
    templateName: 'notification',
    classNames:['nNote'],
    content:null,

    didInsertElement : function(){                
    },

    click: function() {
        var _self = this;
        _self.$().fadeTo(200, 0.00, function(){ //fade
            _self.$().slideUp(200, function() { //slide up                    
                _self.$().remove(); //then remove from the DOM
            });
        });
       _self.destroy();
    },

    show: function() {
        var _self = this;
        _self.$().css('display','block').css('opacity', 0).slideDown('slow').animate(
            { opacity: 1 },
            { queue: false, duration: 'slow' }
        );          
    }
}); 
```

理想情况下，我应该能够从任何控制器或路由发送事件以显示具有正确内容和样式的视图。构建这个的最佳方法是什么

我想在我的应用程序模板中使用命名插座，但是插座不太适合动态视图。

```
<div id="content">
    {{outlet notification}}
    {{outlet}}
</div> 
```

我还考虑将通知视图构建为对“应用程序”或“模块”状态的响应。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-13T05:55:16.013

因为您有想要在通知更改时运行的动画，所以您需要创建一个`Ember.View`（“小部件”）的子类：

```
App.NotificationView = Ember.View.extend({
  notificationDidChange: function() {
    if (this.get('notification') !== null) {
      this.$().slideDown();
    }
  }.observes('notification'),

  close: function() {
    this.$().slideUp().then(function() {
      self.set('notification', null);
    });
  },

  template: Ember.Handlebars.compile(
    "<button {{action 'close' target='view'}}>Close</button>" +
    "{{view.notification}}"
  )
}); 
```

这个小部件将期望有一个`notification`属性。您可以从`application`模板中设置它：

```
{{view App.NotificationView id="notifications" notificationBinding="notification"}} 
```

这将从 中获取其`notification`属性`ApplicationController`，因此我们将在控制器上创建几个方法，其他控制器可以使用它们来发送通知：

```
App.ApplicationController = Ember.Controller.extend({
  closeNotification: function() {
    this.set('notification', null);
  },

  notify: function(notification) {
    this.set('notification', notification);
  }
}); 
```

现在，假设我们想在每次进入`dashboard`路由时创建一个通知：

```
App.DashboardRoute = Ember.Route.extend({
  setupController: function() {
    var notification = "You have entered the dashboard";
    this.controllerFor('application').notify(notification);
  }
}); 
```

视图本身管理 DOM，而应用程序控制器管理`notification`属性。[您可以在这个 JSBin](http://jsbin.com/uqafis/3/edit)上看到这一切。

请注意，如果您只想显示通知，而不关心动画，则可以这样做：

```
{{#if notification}}
  <div id="notification">
    <button {{action "closeNotification"}}>Close</button>
    <p id="notification">{{notification}}</p>
  </div>
{{/if}} 
```

在您的`application`模板中，使用相同的`ApplicationController`，一切都会正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T20:59:42.023

我不同意通知应该是一个视图，我认为它们应该是一个组件。然后它们也更灵活地在您的应用程序中使用。

您可以使用通知组件**代替**此处回答：[如何使用 Ember.js 制作警报通知组件？](https://stackoverflow.com/questions/27070102/how-can-i-make-an-alert-notifications-component-using-ember-js/)

# vb.net - dos cmd \cmd 提示 vb.net 2010

> ID：14288985
> 
> 赞同：0
> 
> 时间：2013-01-12T00:45:41.320
> 
> 标签：vb.net

我使用此示例从 vb.net 2010 中打开命令提示符

[链接到 stackoverflow 文档](https://stackoverflow.com/questions/10261521/how-to-run-dos-cmd-command-prompt-commands-from-vb-net)

命令提示符按预期打开，我可以毫无问题地执行目录打开命令，如 regedit 等

但我真正想要的是 tftp.exe，当我查找它时它没有显示，当我在命令提示符下键入 tftp 时，它没有列出，我得到了 to recognized 命令

在运行行通过键入 cmd 与普通命令提示符进行比较时，我可以在 windows\system32 文件夹中看到它

同样，当我从普通命令提示符执行 dir 并与 vb.net 打开的 cmd 提示符中的 dir 进行比较时，在接近 3000 个文件中存在 400+ 数量的文件差异

试图找出为什么我在这里看不到所有文件是我使用的实际代码

```
Private Sub Button30_Click(sender As System.Object, e As System.EventArgs) Handles Button30.Click
        Dim command As String = "tftp -i 192.168.10.177 put test1.bin"
        Dim arguments As String = ""
        Dim permanent As Boolean = True
        Dim p As Process = New Process()
        Dim pi As ProcessStartInfo = New ProcessStartInfo()
        pi.Arguments = " " + If(permanent = True, "/K", "/C") + " " + command + " " + arguments
        pi.FileName = "cmd.exe"
        p.StartInfo = pi
        p.Start()
    End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T00:53:45.890

这似乎是您正在采用的一个非常令人费解的方法，但要直接回答您的问题，您可能需要像这样设置工作目录：

```
pi.WorkingDirectory = "c:\windows\system32" 
```

不过我不得不说，您可能需要重新考虑打开 DOS 窗口让用户键入命令的整个方法。看起来不是很用户友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T20:41:35.143

好的，找到了答案，这是因为我正在运行 64 位 Windows，当它寻找 tftp.exe 时，它​​实际上是在 syswow64 目录中查找，而 tftp.exe 不在该目录中。

因为我有这个运行和编译为 x86 而不是 64 位这里是解决方法

```
Public Declare Function Wow64DisableWow64FsRedirection Lib "kernel32" (ByRef oldvalue As Long) As Boolean 
```

然后

```
Wow64DisableWow64FsRedirection(0) 
```

将 tthis 添加到我的代码后，tftp 上传工作完美

# ruby-on-rails - Rails SCORM LMS

> ID：14288986
> 
> 赞同：2
> 
> 时间：2013-01-12T00:45:42.023
> 
> 标签：ruby-on-rails, scorm

是否有任何用 Ruby on Rails 编写的 LMS（托管 SCORM）Rails gem 或应用程序？我将使用 Articulate 来创建 SCORM。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T02:50:07.077

有 Canvas LMS。它似乎处于非常积极的开发中，昨天对 master 进行了最新更新：

[https://github.com/instructure/canvas-lms/wiki](https://github.com/instructure/canvas-lms/wiki)

[http://guides.instructure.com/m/4214/l/41907](http://guides.instructure.com/m/4214/l/41907)

我没有任何个人经验，所以我无法评论它的质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T15:27:26.993

您可以使用 SCORMCloud 从 Rails 提供 SCORM 内容。

有一个 github repo 实现了一些 API：

[https://github.com/aeseducation/scorm-cloud](https://github.com/aeseducation/scorm-cloud)

请小心在那里运行 rake 测试.....它会尝试删除您的所有课程（如果它指向 prod 环境则不好）。

我的公司为 SCORMCloud 构建集成，我们的 Bright 服务使用 Rails 后端和 AES 库的分支（我们计划很快将其重新提交回 github）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-10T17:46:37.870

另一个值得探索的选择是 Fedena。有关它的更多信息，[请访问 http://www.projectfedena.org/](http://www.projectfedena.org/)或[https://github.com/projectfedena/fedena](https://github.com/projectfedena/fedena)。我不确定它如何与 Canvas LMS 叠加。但如果有人在这里可以分享，我很想知道。

标签 - [ror](/questions/tagged/ror "显示标记为“ror”的问题") [scorm](/questions/tagged/scorm "显示标记为“scorm”的问题") [lms](/questions/tagged/lms "显示标记为“lms”的问题")

# php - 在 PHP 中使用 PDO 来计算数据库中的所有数据，而“WHERE”是一个必须清理的变量

> ID：14288987
> 
> 赞同：0
> 
> 时间：2013-01-12T00:45:45.293
> 
> 标签：php, mysql, pdo, count

我正在尝试计算 id 与用户输入匹配的项目列表中的所有行。我正在将所有代码从 mysql 切换到 PDO，因为我了解到它要好得多。

下面的代码是我发现在我的情况下工作的。

```
$id = '0';
$sql="SELECT count(*) FROM item_list WHERE item_id = $id";
$data=$connMembers->query($sql)->fetchcolumn();     
echo $data; 
```

但是，由于 sql 注入，对于实时站点来说并不安全。

我想知道如何将其更改为可以处理用户输入的工作。

我更喜欢使用准备和执行函数，以便单独保存变量。

那么有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:24:04.097

这是您开始绑定参数的地方。我更喜欢使用`?`一个数组作为输入。

假设`$connMembers`是您的 PDO 对象：

```
$sql="SELECT COUNT(*) FROM item_list WHERE item_id = ?";
$input=array($id); //Input for execute should always be an array

$statement=$connMembers->prepare($sql);
$statement->execute($input);
$data=$statement->fetchObject();

var_dump($data); 
```

要向您的 sql 添加更多变量，只需`?`在查询中添加另一个变量并将变量添加到您的输入中。

```
$sql="SELECT COUNT(*) FROM item_list WHERE item_id = ? AND item_name=?";
$input=array($id, $name); //Input for execute should always be an array

$statement=$connMembers->prepare($sql);
$statement->execute($input);
$data=$statement->fetchObject();

var_dump($data); 
```

或者你可以使用 bindParam：

```
$sql="SELECT COUNT(*) FROM item_list WHERE item_id = :itemID";

$statement=$connMembers->prepare($sql);
$statement->bindParam(':itemID', $id);
/*Here I am binding parameters instead of passing
an array parameter to the execute() */

$statement->execute();
$data=$statement->fetchObject();

var_dump($data); 
```

# android - 公交车时刻表安卓

> ID：14288990
> 
> 赞同：0
> 
> 时间：2013-01-12T00:46:36.017
> 
> 标签：android, timetable

对于一个项目，我正在尝试实现一个公交车时间表 Android 应用程序。我对 Android 开发相当陌生，需要以有效的方式存储时间表。

是否有任何体面的方法来实现在应用程序中查看时清晰的表，并且内存足够小以使其平稳运行？

此外，是否有一种简单的方法可以在创建表格后通过触摸按钮自动更新而不创建新活动？即您当前正在查看路线 1 的时间表，并通过按下按钮查看路线 2 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T00:52:35.023

您应该为时间表使用[Android 内容提供程序。](http://developer.android.com/guide/topics/providers/content-providers.html)

至于您的更新，您可以向您的内容提供商提出请求`onResume()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:52:31.477

来自[http://mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/](http://mobile.tutsplus.com/tutorials/android/android-sdk_table-layout/)

> 您还可以在 Java 中以编程方式创建和配置表格布局。这是使用 TableLayout 和 TableRow 类（android.widget.TableLayout 和 android.widget.TableRow）完成的。

# bash - 将信息从 bash 脚本发送到程序

> ID：14288997
> 
> 赞同：0
> 
> 时间：2013-01-12T00:47:42.293
> 
> 标签：bash, command-line, pipe

我正在制作一个 bash 脚本来向启动的程序发送命令，我在互联网上创建的唯一方法是通过[命名管道](http://www.linuxjournal.com/content/using-named-pipes-fifos-bash)。

有没有更简单的方法可以在同一个脚本中完成所有操作？因为命名管道的问题是我必须有 3 个脚本，一个用于管理程序，另一个从 main 发送信息，然后阅读器将信息解析到程序（如果我正确理解了上面的链接）。

这是一个问题，因为经理必须打电话给其他人，因为我需要读者接收一组文件作为输入，我发现没有办法这样做，如果你知道如何请[回答这个其他问题。](https://askubuntu.com/questions/240151/passing-an-array-as-command-input)

谢谢

--- 26/01/2012 ---

卡尔发帖后我试过了

```
#!/bin/bash

MUS_DIR="/home/foo/dir/music"

/usr/bin/expect <<-_EOF_
spawn vlc --global-key-next n $MUS_DIR
sleep 5
send 'n'
sleep 5
send "n"
_EOF_ 
```

但它不起作用，它只是产生 vlc 但它不会跳过这首歌

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:57:29.300

您可能想检查一下[`expect(1)`](http://www.manpagez.com/man/1/expect/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T01:30:38.913

有关您要与之通信的程序的更多详细信息将很有用。

本质上，您只需要某种进程间通信。可以使用文件/管道/信号/套接字。例如，写入脚本中的特定文件，然后向程序发送中断，以便它知道检查文件。

取决于你选择的语言，以及你可以花多少时间在这个/这个项目有多大。您可以让启动的程序使用线程在端口上侦听 TCP 数据包并对其做出反应。然后在您的 bash 脚本中，您可以 netcat 信息，或使用 curl 发送 HTTP POST。

您确定应用程序不可能由脚本启动吗？允许脚本只传递参数或定义一些环境变量。