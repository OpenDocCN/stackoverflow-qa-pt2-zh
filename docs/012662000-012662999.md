# StackOverflow 问答 12662000-12662999

# php - fb身份验证无休止的循环

> ID：12662001
> 
> 赞同：1
> 
> 时间：2012-09-30T14:30:52.520
> 
> 标签：php, facebook

试图退出简单的身份验证，给了我无尽的循环。

最奇怪的是，当使用 Mixed js 和 Php api 时，它可以工作。

```
 <?Php
//uses the PHP SDK.  Download from https://github.com/facebook/php-sdk
require 'src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => '306597542762982',
  'secret' => '88XXXXXXf1',
));

if(!$facebook->getUser())
    header("location: ".$facebook->getLoginUrl ());

var_dump($facebook->getUser()); 
```

上面的代码给了我无限循环。但！如果您删除了标头重定向，并且我仅将 js sdk 用于登录过程，则它可以工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:47:07.550

**编辑：**好的，这不是问题解决方案，对不起

据我了解，标头已设置，但脚本并未停止。想象一个不同的标题（不是`Location`），如果脚本在那时停止，那就太糟糕了。所以尝试以下方法：

```
if(!$facebook->getUser()) {
    header("location: ".$facebook->getLoginUrl ());
    die();
} 
```

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T14:47:15.337

在做任何事情之前，请确保您拥有最新的 SDK。我已经使用过时的 SDK 看到了这种行为。并且代码中的注释指向已弃用的版本。确保您的代码来自[https://github.com/facebook/facebook-php-sdk](https://github.com/facebook/facebook-php-sdk)而不是来自[https://github.com/facebook/php-sdk](https://github.com/facebook/php-sdk)，正如您在评论中所说的那样。

此外，您正在跳过几个步骤，您可以[在 github 上的 Facebook 示例](https://github.com/facebook/facebook-php-sdk/blob/master/examples/example.php)中看到这些步骤。试着像他们一样做。

```
$user = $facebook->getUser();
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
} 
```

进而

```
if (!$user) {
  $loginUrl = $facebook->getLoginUrl();
  header("Location: " . $loginUrl);
} 
```

我仍然不确定这`header`会起作用，所以您可能还想尝试使用 javascript 重定向：

```
echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>"; 
```

# r - 如何从具有混合元素的列表中提取元素

> ID：12662005
> 
> 赞同：31
> 
> 时间：2012-09-30T14:32:18.680
> 
> 标签：r, list, vector

我在 R 中有一个包含以下元素的列表：

```
[[812]]
[1] ""             "668"          "12345_s_at" "667"          "4.899777748" 
[6] "49.53333333"  "10.10930207"  "1.598228663"  "5.087437057" 

[[813]]
[1] ""            "376"         "6789_at"  "375"         "4.899655078"
[6] "136.3333333" "27.82508792" "2.20223398"  "5.087437057"

[[814]]
[1] ""             "19265"        "12351_s_at" "19264"        "4.897730912" 
[6] "889.3666667"  "181.5874908"  "1.846451572"  "5.087437057" 
```

我知道我可以使用类似`list_elem[[814]][3]`的方式访问它们，以防我想提取位置 814 的第三个元素。我需要提取所有列表的第三个元素，例如`12345_s_at`，我想将它们放入向量或列表中所以我可以稍后将它们的元素与另一个列表进行比较。下面是我的代码：

```
elem<-(c(listdata))
lp<-length(elem)
for (i in 1:lp)
{
    newlist<-c(listdata[[i]][3]) ###maybe to put in a vector
    print(newlist)
 } 
```

当我打印结果时，我得到了第三个元素，但是像这样：

```
 [1] "1417365_a_at"
  [1] "1416336_s_at"
  [1] "1416044_at"
  [1] "1451201_s_at" 
```

所以我不能用像这样的索引来遍历它们`newlist[3]`，因为它会返回`NA`。我的错误在哪里？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-09-30T14:36:51.830

如果要提取每个列表元素的第三个元素，可以执行以下操作：

```
List <- list(c(1:3), c(4:6), c(7:9))
lapply(List, '[[', 3)  # This returns a list with only the third element
unlist(lapply(List, '[[', 3)) # This returns a vector with the third element 
```

使用您的示例并考虑到@GSee 评论，您可以执行以下操作：

```
yourList <- list(c("","668","12345_s_at","667", "4.899777748","49.53333333",
       "10.10930207", "1.598228663","5.087437057"),
     c("","376", "6789_at",  "375",  "4.899655078","136.3333333",
       "27.82508792", "2.20223398",  "5.087437057"),
     c("", "19265", "12351_s_at", "19264", "4.897730912",
       "889.3666667", "181.5874908","1.846451572","5.087437057" ))

sapply(yourList, '[[', 3)
[1] "12345_s_at" "6789_at"    "12351_s_at" 
```

下次您可以使用`dput`部分数据集提供一些数据，以便我们轻松重现您的问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-08-17T11:33:42.300

您可以提取元素并`purrr`确保数据类型一致性：

```
library(purrr)

listdata <- list(c("","668","12345_s_at","667", "4.899777748","49.53333333",
       "10.10930207", "1.598228663","5.087437057"),
     c("","376", "6789_at",  "375",  "4.899655078","136.3333333",
       "27.82508792", "2.20223398",  "5.087437057"),
     c("", "19265", "12351_s_at", "19264", "4.897730912",
       "889.3666667", "181.5874908","1.846451572","5.087437057" ))

map_chr(listdata, 3)
## [1] "12345_s_at" "6789_at"    "12351_s_at" 
```

还有其他`map_`功能也可以强制类型一致性，并且`map_df()`最终可以帮助结束`do.call(rbind, …)`疯狂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-18T15:13:26.103

如果您想使用您在问题中键入的代码，以下是修复：

```
listdata <- list(c("","668","12345_s_at","667", "4.899777748","49.53333333",
       "10.10930207", "1.598228663","5.087437057"),
     c("","376", "6789_at",  "375",  "4.899655078","136.3333333",
       "27.82508792", "2.20223398",  "5.087437057"),
     c("", "19265", "12351_s_at", "19264", "4.897730912",
       "889.3666667", "181.5874908","1.846451572","5.087437057" ))

v <- character() #creates empty character vector
list_len <- length(listdata)
for(i in 1:list_len)
    v <- c(v, listdata[[i]][3]) #fills the vector with list elements (not efficient, but works fine)

print(v)
[1] "12345_s_at" "6789_at"    "12351_s_at" 
```

# c++ - 数组到 C++ 函数（使用 ASM）读取错误

> ID：12662006
> 
> 赞同：0
> 
> 时间：2012-09-30T14:32:27.417
> 
> 标签：c++, c, visual-studio, assembly

我有问题。我在函数中发送一个指针，首先将数组的最后 3 个元素替换为 3。我应该使用 unsigned char 数组发送，它应该与 ASM 一起使用。

```
 int main(int argc, char* argv[])
{
    unsigned char arr[24]={
        1,2,3,4,5,6,
        7,8,9,10,11,12,
        13,14,15,16,17,18,
        19,20,21,22,23,24
        };// example

        AsmFlipVertical(arr);
};
void AsmFlipVertical(unsigned char  *arr)
{
_asm
    {
        les esi,arr ; esi=adress of first elem
        mov eax,esi
        add eax,21  
        mov edi,eax ; edi=adress of first elem+21;edi is a adress of 21th elem of array
        cld 
        mov ecx,3
        rep movsb 
    }
} 
```

从 esi 到 edi 的 movsb 我在“rep movsb”中有错误 怎么了？如果在主函数中使用这个 ASM 代码没关系，但我必须在函数中使用 ASM 代码...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:44:41.293

指令是错误的`les esi, arr`（你也不想改变 es reister）你应该只使用`mov esi, arr` （经过测试 - 有效）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:46:44.740

您不应使用任何影响`flat`内存模型中的段寄存器的指令。所以，替换`les esi,arr`为`mov esi,arr`

# java - 在 Java 中，如果我在递归调用期间更改对象引用，它会传播吗？

> ID：12662008
> 
> 赞同：0
> 
> 时间：2012-09-30T14:32:47.130
> 
> 标签：java, recursion

例如，我进行下面定义的递归调用。该方法从最后一个元素中查找第 k 个元素。如果找到，它将当前节点分配给我传递给递归调用的对象。由于某种原因，节点 kth 为空。你不能这样做吗？为什么？

```
public void findKthFromLast(Node head, int k){
    Node kth;     
    recrusiveHelper(head, k, kth);
    System.out.println(kth.data); //this is null
}

public int recursiveHelper(Node n, int k, Node kthFromLast){
    (if n == null){
        return 0;
    }
    val = 1 + recursiveHelper(n.next, k, kthFromlast);
    if(k == val){
        kthFromLast = n;
    }
    return val;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:37:47.563

如果对象引用是方法的本地引用，那么调用者或其他任何人都不会看到对它的更改。

例如：

```
void caller()
{
    obj = new String("asdf");
    doStuff(obj)
    System.out.println(obj) // still prints "asdf"
}

void doStuff(String obj)
{  
   // obj is a local reference, changing it wont affect caller's ref 
   obj = new String("ghj");
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T14:39:34.380

首先，该代码不应编译，因为`kth`未初始化，因此不能用作`recursiveHelper`方法调用的参数。

其次，对被调用方法中的引用所做的任何更改都不会传播给 Java 中的调用者，即

```
private void caller()
{
    StringBuilder s = new StringBuilder();
    s.append("test");
    calledMethod1(s);
    System.out.println(s.toString());
    calledMethod2(s);
    System.out.println(s.toString());
}

private void calledMethod1(StringBuilder buffer)
{
    buffer = new StringBuilder();
    buffer.append("calledMethod1");
    return;
}

private void calledMethod2(StringBuilder buffer)
{
    buffer.append(", calledMethod2");
    return;
} 
```

输出：

```
test
test, calledMethod2 
```

原因是，`calledMethod1`您只是在更改`buffer`引用指向的内容，而不是`buffer`在调用方法时对引用指向的内容进行任何更改。在`calledMethod2`中，您正在对引用的对象进行更改`buffer`，因此更改在调用者中可见。

如果您是来自`C`或`C++`背景的人，这相当于在被调用方法中分配指针参数，这不会影响调用者中传递的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T14:38:57.850

```
public void findKthFromLast(Node head, int k){
    Node kth;     
    recrusiveHelper(head, k, kth);
    System.out.println(kth.data); //this is null
} 
```

您将 null 传递给该方法，无论您在该方法内做什么，在该方法之外都将保持为 null。您不能以在方法之外可见的方式更改参考值。

# php - PHP中的CURL脚本用于使用XPATH的ip黑名单

> ID：12662013
> 
> 赞同：0
> 
> 时间：2012-09-30T14:33:23.127
> 
> 标签：php, xml, xpath, curl

我想制作一个小脚本，根据 ip 被列入黑名单的数量返回结果。

结果必须像`23/100`23 已将该 ip 或`45/100` `2/100`... 列入黑名单等等。

[首先，我从http://whatismyipaddress.com/blacklist-check](http://whatismyipaddress.com/blacklist-check)通过CURL 获取发送 post 请求一些数据：

```
<?php
/**
 * Get a web file (HTML, XHTML, XML, image, etc.) from a URL.  Return an
 * array containing the HTTP server response header fields and content.
 */

function get_web_page($url,$argument1)
{
    $options = array(
        CURLOPT_RETURNTRANSFER => true,     // return web page
        CURLOPT_HEADER         => false,    // don't return headers
        CURLOPT_FOLLOWLOCATION => true,     // follow redirects
        CURLOPT_ENCODING       => "",       // handle all encodings
        CURLOPT_USERAGENT      => "Mozilla/5.0 (Windows; U; Windows NT 5.1; de; rv:1.9.2.3) Gecko/20100401 Firefox/3.6.3 (FM Scene 4.6.1)", // who am i
        CURLOPT_AUTOREFERER    => true,     // set referer on redirect
        CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
        CURLOPT_TIMEOUT        => 120,      // timeout on response
        CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
        CURLOPT_POST => 1,
        CURLOPT_POSTFIELDS => "LOOKUPADDRESS=".$argument1,
    );

    $ch      = curl_init( $url );
    curl_setopt_array( $ch, $options );
    $content = curl_exec( $ch );
    $err     = curl_errno( $ch );
    $errmsg  = curl_error( $ch );
    $header  = curl_getinfo( $ch );
    curl_close( $ch );

    $header['errno']   = $err;
    $header['errmsg']  = $errmsg;
    $header['content'] = $content;
    return $header;
}

echo "<pre>";
$result = get_web_page("http://whatismyipaddress.com/blacklist-check","75.122.17.117");

// print_r($result['content']);
// in $result['content'] we have the whole pag

// Creating xpath and fill it with data
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTMLFile($result['content']); // loads your html
$xpath = new DOMXPath($doc);

// Get that table
$value = $xpath->evaluate("string(/html/body/div/div/div/table/text())"); 
echo "Table with blacklists: [$value]\n"; // prints your location

die;

?> 
```

现在我想要的是用 XPATH 解析数据，`/html/body/div/div/div/table/text()`并且我看到图像`(!)`将其标记为黑名单，否则什么也不做。

谁能帮我？

我还观察到查看`(!)`图像需要一个令牌，我可能会切换到另一个站点，但我喜欢那个特定的网站，因为它拥有所有的网站。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:37:47.633

绝对你需要这个:) [简单的 DOM 解析器](http://simplehtmldom.sourceforge.net/)

# macos - mkvtoolnix 构建失败，在 Mac OS 10.8 上出现“架构 x86_64 的未定义符号”

> ID：12662014
> 
> 赞同：4
> 
> 时间：2012-09-30T14:33:26.793
> 
> 标签：macos, gcc, ld

我正在尝试[`mkvtoolnix`](http://www.bunkus.org/videotools/mkvtoolnix/)从 Mountain Lion（Mac OS 10.8）上的源代码编译。我相信所有先决条件都已安装，可以`./configure`正常工作。不过，我确实必须更改我的 ./configure 命令行：

```
./configure ZLIB_CFLAGS="-l/usr/lib/libz.dylib" ZLIB_LIBS="-L/usr/lib" \
CURL_CFLAGS="-l/usr/lib/libcurl.dylib" CURL_LIBS="-L/usr/lib" 
```

然后我运行`rake`，一切都编译到最后，我收到这条消息：

```
LINK src/mkvmerge

Undefined symbols for architecture x86_64:
  "libmatroska::KaxCueDuration::ClassInfos", referenced from:
      cluster_helper_c::postprocess_cues()       in libmtxmerge.a(cluster_helper.o)
  "libmatroska::KaxCueRelativePosition::ClassInfos", referenced from:
      cluster_helper_c::postprocess_cues()       in libmtxmerge.a(cluster_helper.o)
  "libebml::EbmlString::SetValue(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      void FixMandatoryElement<libmatroska::KaxTagName, libmatroska::KaxTagLangue, libmatroska::KaxTagDefault>(libebml::EbmlMaster*) in libmtxcommon.a(tags.o)
      mtx::xml::ebml_converter_c::parse_string(mtx::xml::ebml_converter_c::parser_context_t&) in libmtxcommon.a(ebml_converter.o)
      mtx::xml::ebml_chapters_converter_c::fix_display(libmatroska::KaxChapterDisplay&) const   in libmtxcommon.a(ebml_chapters_converter.o)
  "libebml::EbmlSInteger::SetValue(long long)", referenced from:
      kax_reference_block_c::UpdateSize(bool, bool) in libmtxmerge.a(libmatroska_extensions.o)
      mtx::xml::ebml_converter_c::parse_int(mtx::xml::ebml_converter_c::parser_context_t&) in libmtxcommon.a(ebml_converter.o)
  "libebml::EbmlUInteger::SetValue(unsigned long long)", referenced from:
      adjust_chapter_timecodes(libebml::EbmlMaster&, long long) in libmtxcommon.a(chapters.o)
      remove_entries(long long, long long, long long, libebml::EbmlMaster&) in libmtxcommon.a(chapters.o)
      cluster_helper_c::postprocess_cues()       in libmtxmerge.a(cluster_helper.o)
      fix_mandatory_tag_elements(libebml::EbmlElement*)       in libmtxcommon.a(tags.o)
      void FixMandatoryElement<libmatroska::KaxTagName, libmatroska::KaxTagLangue, libmatroska::KaxTagDefault>(libebml::EbmlMaster*) in libmtxcommon.a(tags.o)
      mtx::xml::ebml_chapters_converter_c::fix_atom(libmatroska::KaxChapterAtom&) const  in libmtxcommon.a(ebml_chapters_converter.o)
      mtx::xml::ebml_chapters_converter_c::fix_edition_entry(libmatroska::KaxEditionEntry&) const   in libmtxcommon.a(ebml_chapters_converter.o)
      ...
  "libebml::EbmlUnicodeString::SetValueUTF8(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&)", referenced from:
      set_simple_tag_name(libmatroska::KaxTagSimple&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in libmtxcommon.a(tags.o)
      set_simple_tag_value(libmatroska::KaxTagSimple&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in libmtxcommon.a(tags.o)
      set_simple_tag(libmatroska::KaxTagSimple&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in libmtxcommon.a(tags.o)
      convert_old_tags(libmatroska::KaxTags&)       in libmtxcommon.a(tags.o)
      mtx::xml::ebml_converter_c::parse_ustring(mtx::xml::ebml_converter_c::parser_context_t&) in libmtxcommon.a(ebml_converter.o)
  "libebml::EbmlUnicodeString::SetValue(libebml::UTFstring const&)", referenced from:
      void FixMandatoryElement<libmatroska::KaxTagName, libmatroska::KaxTagLangue, libmatroska::KaxTagDefault>(libebml::EbmlMaster*) in libmtxcommon.a(tags.o)
  "libebml::EbmlString::GetValue() const", referenced from:
      kt_get_codec_id(libmatroska::KaxTrackEntry&)        in libmtxcommon.a(ebml.o)
      kt_get_language(libmatroska::KaxTrackEntry&)        in libmtxcommon.a(ebml.o)
      dump_ebml_elements(libebml::EbmlElement*, bool, unsigned int) in libmtxcommon.a(output.o)
      void FixMandatoryElement<libmatroska::KaxTagName, libmatroska::KaxTagLangue, libmatroska::KaxTagDefault>(libebml::EbmlMaster*) in libmtxcommon.a(tags.o)
      kax_reader_c::read_headers_tracks(mm_io_c*, libebml::EbmlElement*, long long) in libmtxinput.a(r_matroska.o)
      kax_reader_c::handle_attachments(mm_io_c*, libebml::EbmlElement*, long long) in libmtxinput.a(r_matroska.o)
      mtx::xml::ebml_converter_c::format_string(pugi::xml_node&, libebml::EbmlElement&)       in libmtxcommon.a(ebml_converter.o)
      ...
  "libebml::EbmlSInteger::GetValue() const", referenced from:
      dump_ebml_elements(libebml::EbmlElement*, bool, unsigned int) in libmtxcommon.a(output.o)
      kax_reader_c::process_block_group(libmatroska::KaxCluster*, libmatroska::KaxBlockGroup*)  in libmtxinput.a(r_matroska.o)
      mtx::xml::ebml_converter_c::format_int(pugi::xml_node&, libebml::EbmlElement&)       in libmtxcommon.a(ebml_converter.o)
  "libebml::EbmlUInteger::GetValue() const", referenced from:
      get_chapter_start(libmatroska::KaxChapterAtom&, long long) in libmtxcommon.a(chapters.o)
      get_chapter_end(libmatroska::KaxChapterAtom&, long long) in libmtxcommon.a(chapters.o)
      get_chapter_uid(libmatroska::KaxChapterAtom&)        in libmtxcommon.a(chapters.o)
      find_edition_with_uid(libmatroska::KaxChapters&, unsigned long long) in libmtxcommon.a(chapters.o)
      find_chapter_with_uid(libmatroska::KaxChapters&, unsigned long long) in libmtxcommon.a(chapters.o)
      move_chapters_by_edition(libmatroska::KaxChapters&, libmatroska::KaxChapters&) in libmtxcommon.a(chapters.o)
      adjust_chapter_timecodes(libebml::EbmlMaster&, long long) in libmtxcommon.a(chapters.o)
      ...
  "libebml::EbmlUnicodeString::GetValueUTF8() const", referenced from:
      dump_ebml_elements(libebml::EbmlElement*, bool, unsigned int) in libmtxcommon.a(output.o)
      get_simple_tag_value(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, libebml::EbmlMaster&) in libmtxcommon.a(tags.o)
      get_simple_tag_name(libmatroska::KaxTagSimple const&)   in libmtxcommon.a(tags.o)
      get_simple_tag_value(libmatroska::KaxTagSimple const&)   in libmtxcommon.a(tags.o)
      convert_old_tags(libmatroska::KaxTags&)       in libmtxcommon.a(tags.o)
      kax_reader_c::read_headers_info(libebml::EbmlElement*&, libebml::EbmlElement*&, int&) in libmtxinput.a(r_matroska.o)
      kax_reader_c::read_headers_info_writing_app(libmatroska::KaxWritingApp*&)          in libmtxinput.a(r_matroska.o)
      ...
  "libebml::EbmlUnicodeString::GetValue() const", referenced from:
      void FixMandatoryElement<libmatroska::KaxTagName, libmatroska::KaxTagLangue, libmatroska::KaxTagDefault>(libebml::EbmlMaster*) in libmtxcommon.a(tags.o)
      kax_reader_c::read_headers_info(libebml::EbmlElement*&, libebml::EbmlElement*&, int&) in libmtxinput.a(r_matroska.o)
      kax_reader_c::read_headers_tracks(mm_io_c*, libebml::EbmlElement*, long long) in libmtxinput.a(r_matroska.o)
      kax_reader_c::handle_attachments(mm_io_c*, libebml::EbmlElement*, long long) in libmtxinput.a(r_matroska.o)
  "libebml::EbmlFloat::GetValue() const", referenced from:
      kt_get_a_sfreq(libmatroska::KaxTrackEntry&)        in libmtxcommon.a(ebml.o)
      kt_get_a_osfreq(libmatroska::KaxTrackEntry&)        in libmtxcommon.a(ebml.o)
      dump_ebml_elements(libebml::EbmlElement*, bool, unsigned int) in libmtxcommon.a(output.o)
      kax_reader_c::read_headers_track_audio(kax_track_t*, libmatroska::KaxTrackAudio*)          in libmtxinput.a(r_matroska.o)
      kax_reader_c::read_headers_track_video(kax_track_t*, libmatroska::KaxTrackVideo*)          in libmtxinput.a(r_matroska.o)
      kax_reader_c::read_headers_info(libebml::EbmlElement*&, libebml::EbmlElement*&, int&) in libmtxinput.a(r_matroska.o)
  "std::ctype<char>::_M_widen_init() const", referenced from:
      __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > boost::io::detail::skip_asterisk<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::ctype<char> >(__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::ctype<char> const&) in mkvmerge.o
      bool boost::io::detail::parse_printf_directive<char, std::char_traits<char>, std::allocator<char>, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::ctype<char> >(__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >&, __gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > const&, boost::io::detail::format_item<char, std::char_traits<char>, std::allocator<char> >*, std::ctype<char> const&, unsigned long, unsigned char) in mkvmerge.o
      boost::io::detail::stream_format_state<char, std::char_traits<char> >::apply_on(std::basic_ios<char, std::char_traits<char> >&, std::locale*) const in mkvmerge.o
      void boost::io::detail::put<char, std::char_traits<char>, std::allocator<char>, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&>(std::basic_string<char, std::char_traits<char>, std::allocator<char> >&, boost::io::detail::format_item<char, std::char_traits<char>, std::allocator<char> > const&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::string_type&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::internal_streambuf_t&, std::locale*) in mkvmerge.o
      void boost::io::detail::put<char, std::char_traits<char>, std::allocator<char>, unsigned int const&>(unsigned int const&, boost::io::detail::format_item<char, std::char_traits<char>, std::allocator<char> > const&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::string_type&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::internal_streambuf_t&, std::locale*) in mkvmerge.o
      void boost::io::detail::put<char, std::char_traits<char>, std::allocator<char>, char const*&>(char const*&, boost::io::detail::format_item<char, std::char_traits<char>, std::allocator<char> > const&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::string_type&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::internal_streambuf_t&, std::locale*) in mkvmerge.o
      void boost::io::detail::put<char, std::char_traits<char>, std::allocator<char>, std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&>(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, boost::io::detail::format_item<char, std::char_traits<char>, std::allocator<char> > const&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::string_type&, boost::basic_format<char, std::char_traits<char>, std::allocator<char> >::internal_streambuf_t&, std::locale*) in mkvmerge.o
      ...
  "std::domain_error::~domain_error()", referenced from:
      boost::bad_rational::~bad_rational() in libmtxcommon.a(mpeg4_p10.o)
      boost::bad_rational::~bad_rational() in libmtxcommon.a(mpeg4_p10.o)
  "std::__detail::__prime_list", referenced from:
      __GLOBAL__sub_I_output_control.cpp in libmtxmerge.a(output_control.o)
      std::__detail::_Prime_rehash_policy::_M_next_bkt(unsigned long) const in libmtxmerge.a(pr_generic.o)
      std::__detail::_Prime_rehash_policy::_M_next_bkt(unsigned long) const in libmtxmerge.a(cluster_helper.o)
  "std::__detail::_List_node_base::_M_hook(std::__detail::_List_node_base*)", referenced from:
      qtmp4_reader_c::detect_interleaving()       in libmtxinput.a(r_qtmp4.o)
      M2VParser::AddTimecode(long long) in libmpegparser.a(M2VParser.o)
  "std::__detail::_List_node_base::_M_unhook()", referenced from:
      M2VParser::FlushWaitQueue()      in libmpegparser.a(M2VParser.o)
      M2VParser::StampFrame(MPEGFrame*)      in libmpegparser.a(M2VParser.o)
  "std::__throw_bad_function_call()", referenced from:
      at_scope_exit_c::~at_scope_exit_c() in mkvmerge.o
      bool parse_number<boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >(boost::sub_match<__gnu_cxx::__normal_iterator<char const*, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > const&, double&) in mkvmerge.o
      mxinfo(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in libmtxcommon.a(output.o)
      mxinfo(std::basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&) in libmtxcommon.a(output.o)
      mxwarn(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in libmtxcommon.a(output.o)
      mxerror(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&) in libmtxcommon.a(output.o)
      mxinfo(boost::basic_format<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> > const&) in libmtxcommon.a(output.o)
      ...
  "_curl_easy_cleanup", referenced from:
      url_retriever_c::retrieve(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&) in libmtxcommon.a(curl.o)
  "_curl_easy_init", referenced from:
      url_retriever_c::retrieve(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&) in libmtxcommon.a(curl.o)
  "_curl_easy_perform", referenced from:
      url_retriever_c::retrieve(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&) in libmtxcommon.a(curl.o)
  "_curl_easy_setopt", referenced from:
      url_retriever_c::retrieve(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&) in libmtxcommon.a(curl.o)
  "_curl_global_init", referenced from:
      url_retriever_c::retrieve(std::basic_string<char, std::char_traits<char>, std::allocator<char> > const&, std::basic_string<char, std::char_traits<char>, std::allocator<char> >&) in libmtxcommon.a(curl.o)
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

不太确定在这里做什么。有什么建议么？

# html - 均匀分布的固定宽度列 - 在响应式设置中

> ID：12662018
> 
> 赞同：2
> 
> 时间：2012-09-30T14:33:59.517
> 
> 标签：html, css, multiple-columns

我正在尝试创建一些均匀间隔的列（an `ol`），列本身的宽度是固定的。

到目前为止，我已经设法通过使用`table`布局和在列表项中嵌套一个附加元素来达到预期的效果。

**HTML：**

```
<ol>
    <li><div></div></li>
    <li><div></div></li>
    <li><div></div></li>
    <li><div></div></li>
    <li><div></div></li>
</ol>​ 
```

**CSS：**

```
ol {
    display: table;
    width: 100%;
}

li {
    display: table-cell;
}

div {
    margin: 0 auto;
    width: 100px;
    height: 250px;
} 
```

这[很好](http://jsfiddle.net/gDws8/)用，但有以下两个缺点：

1.  正如您[在演示中看到的那样](http://jsfiddle.net/gDws8/)，第一列和最后一列不与父级的外边缘对齐。
2.  这不能真正用于响应式。在较小的宽度下您唯一可以做的就是[将它们堆叠起来](http://jsfiddle.net/gDws8/1/)，但我想将它们分开（每行 2 或 3 个）。

* * *

我所追求的甚至可能仅在 CSS 中实现吗？我知道在 JS 中有很多方法可以实现这一点，但我追求的是纯 CSS 的解决方案。

* * *

**PS**我不关心IE7-，但我确实需要支持IE8。不过 CSS3 选择器还可以，因为无论如何[`selectivizr`](http://selectivizr.com/)我都在项目中使用（我知道那是 JS ;-)）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T10:27:47.927

[回收“如何*真正*证明水平菜单”](https://stackoverflow.com/q/49536/1081234)似乎适合您。基本上，您所描述的行为是`text-align:justify`应用了相同宽度的内联块元素：

```
ol {
  /*force the desired behaviour*/
  text-align: justify;
  /*remove the minimum gap between columns caused by whitespace*/
  font-size: 0;
}

li {
  /*make text-align property applicable*/
  display: inline;
}

/*force "justify" alignment that requires text to be at least over 2 lines*/
ol:after {
  content: "";
  display: inline-block;
  position: relative;
  width: 100%;
  height: 0;
}

div {
  display: inline-block;
  width: 100px;
  height: 250px;
} 
```

[工作小提琴](http://jsfiddle.net/ovfiddle/RwU2N/1/)。

**注意：**您可能必须根据您使用的重置重新申请所需的`font-size`和`text-align`后代（即防止这些属性被继承）`ol`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T13:03:06.860

好的，我的第一个想法是使用媒体查询来获得一种响应方法，以便在不同的屏幕尺寸上每行显示多少个，我的第二个想法是使用

```
 box-sizing:border-box;
-moz-box-sizing:border-box;
-webkit-box-sizing:border-box; 
```

这将停止您稍后可能添加到盒子模型尺寸上的填充。

希望这接近你所追求的。

# asp.net - 如何使用 Razor 在 ASP.NET 网页中的属性内写入 at-sign？

> ID：12662027
> 
> 赞同：4
> 
> 时间：2012-09-30T14:35:45.543
> 
> 标签：asp.net, razor, escaping

我有一个这样的 HTML：

```
<img src="..." alt="Find me on twitter as @username" /> 
```

但是，这会产生一个错误，即变量“用户名”不存在。在 HTML 属性之外，at-sign 可以转义为，`@@`但这在属性内部不起作用。什么是正确的语法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T14:58:05.837

在 MVC3（例如 Razor 1.0）中，例如的双精度`@@`正在工作：

```
<img src="..." alt="Find me on twitter as @@username" /> 
```

但是在 MVC4（例如 Razor 2.0）中，有些东西发生了变化，它不再工作了（也许这是一个错误......）。

因此，因为它只允许在属性内有一个代码块，所以您需要编写一个代码块`@(...)`，您可以在其中返回`@`：

```
<img src="..." alt="Find me on twitter as @("@username")" /> 
```

或者

```
<img src="..." alt="Find me on twitter as @("@")username" /> 
```

据我所知，Web Pages 2.0 使用 Razor 2.0。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T14:51:42.540

为什么不 html 转义 @-sign？

```
<img src="..." alt="Find me on twitter as &#64;username" /> 
```

# c# - 我可以尝试从 BlockingCollection 中提取一组项目吗 ?

> ID：12662030
> 
> 赞同：3
> 
> 时间：2012-09-30T14:35:54.727
> 
> 标签：c#, multithreading, parallel-processing, task-parallel-library, parallel-extensions

在我正在处理的应用程序中，每秒接收到数千个更新。立即将这些更新一一反映在 UI 上是性能过大的。

以下代码会产生非常糟糕的性能，因为处理每个更新都需要调用 UI 线程并将新项目添加到 ObservableCollection 中，这反过来又会触发 CollectionChanged 事件。

```
foreach (var update in updates.GetConsumingEnumerable())
{
    // Handle Update
} 
```

我要做的是让消费者等待一点时间（即50毫秒），让发布者有机会添加更多项目，然后分块处理这些更新。

目前，我正在使用以下代码，但我发现很难预测项目在被消费之前会在集合中停留多长时间，我担心这种方法可能会产生另一个性能瓶颈。

```
List<Tuple<T, List<string>>> updatesToHandle = new List<Tuple<T, List<string>>>();
while (!updates.IsAddingCompleted)
{
    Tuple<T, List<string>> item = null;
    if (updates.TryTake(out item, 5)) // Try Take for 5 Milliseconds
    {
        updatesToHandle.Add(item);
    }
    else
    {
        var newItems = new List<T>(updatesToHandle.Count);
        var updatedItems = new List<Tuple<T, List<string>>>(updatesToHandle.Count);
        foreach (var update in updatesToHandle)
        {
            try
            {
                // Handle Update
            }
            finally
            {
                updatesToHandle.Clear();
                Thread.Sleep(50);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:41:02.883

我会考虑使用 Reactive Extensions [ReactiveExtensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)。此链接解决了类似的问题[股票交易示例](http://enumeratethis.com/2011/07/26/financial-charts-reactive-extensions/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T22:25:32.770

我建议对您的代码进行两项更改。

首先，与其让线程休眠，不如创建一个每 50 毫秒触发一次的计时器。然后，该计时器处理程序将`TryTake`毫无延迟地循环，收集当前在集合中的所有项目（或最多某个最大值）。没有延迟，`TryTake`如果集合为空，将立即返回。

其次，不要为每次更新调用一次“更新 UI”。修改更新处理程序，使其接受整个更新列表，而不是一次接受一个更新。这将避免等待 UI 线程所涉及的时间。

当然，以上假设您已经修改了更新处理程序，以便它可以`ObservableCollection`一次性添加多个项目，从而防止多个`CollectionChanged`事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T19:54:52.817

我第二个 Rx。具体来说，您需要 BufferByTime（如果在传入速率高时进行聚合）或 Throttle（如果在传入速率太高时丢弃值）。此外，您的 UI 可能应该绑定到 BehaviorSubject，它将始终缓存最后一个值，以便新订阅者在订阅时立即获得最后一个缓存的值。

# android - 将 sqlite 数据保存到手机上

> ID：12662039
> 
> 赞同：0
> 
> 时间：2012-09-30T14:37:01.420
> 
> 标签：android, sqlite, database-connection

我目前正在尝试使用我的 android 手机访问我的数据库，但它不起作用。它确实适用于模拟器。所以我想知道是否需要通过使用将数据复制到手机的内存中

```
try{
    InputStream myInput = myContext.getAssets().open(DB_NAME);

    // Path to the just created empty db
    String outFileName = DB_PATH + DB_NAME;

    //Open the empty db as the output stream
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfile
    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    //Close the streams
    myOutput.flush();
    myOutput.close();
    myInput.close();
    }catch(SQLiteException e){ 
```

另一个问题是我没有使用“SQLiteOpenHelper”，那么上面的方法仍然有效吗？我只是做了一个

```
 private final String DB_NAME = "MemberData";
private final String TABLE_NAME = "MemberDB";    
sampleDB =  this.openOrCreateDatabase(DB_NAME, MODE_PRIVATE, null);
        Cursor c = sampleDB.rawQuery("SELECT companyNameEng FROM " +
                TABLE_NAME + " ORDER BY companyNameEng ASC", null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:46:26.003

是的，您必须将 db 文件从 apk 复制到您的应用程序数据库目录（或您的应用程序可以访问的其他位置）。在创建 .apk 文件时，assets 目录并不是真正的目录……它只是框架中的某些函数 ( `getAssets()`) 知道如何访问的数据。要允许其他需要真实路径的功能工作，您需要将数据复制到设备上的适当目录中。

数据库的通常目的地是“data/data/your.package.name/databases/”。

您的方法看起来可以正常工作……它是标准的 java io。SQLiteOpenHelper 更多的是帮助您进行升级和创建新的数据库。我总是使用一个（即使我最初不需要它，我也不知道我是否会改变我做事的方式），但你当然不必这样做。

# ipad - Monotouch - UIActionSheet 无法在 iPad 上正确显示

> ID：12662048
> 
> 赞同：2
> 
> 时间：2012-09-30T14:38:55.683
> 
> 标签：ipad, mono, xamarin.ios, uiactionsheet

我有一个在 iPhone 模拟器上运行良好的 UIActionSheet。它在用户触摸 UIButton 时呈现。

使用 iPad，我相信 UIActionSheets 被包装到 UIPopupController 中。

当我使用 iPad 模拟器调用相同的代码时，会显示一条细“线”，它看起来像 UIPopupController（您可以看到通常指向控件的小箭头）。看不到任何内容。

使用带有 MonoTouch 的 iPad 使用 UIActionSheet 的正确方法是什么？这是我一直在测试的一些示例代码 - 创建 UIActionSheet：

```
var actionSheet = new UIActionSheet () { Style = UIActionSheetStyle.BlackTranslucent };
        actionSheet.Frame = actionSheetFrame;
        actionSheet.Clicked += (s, e) => { Console.WriteLine ("Clicked on item {0}", e.ButtonIndex); };
actionSheet.AddSubview (doneButton); 
```

然后，我通过从按钮调用以下命令来显示操作表：

```
btnSay.TouchUpInside += (sender, e) => {
            actionSheet.ShowFrom(tmpBtn.Frame, tmpView, false);
        }; 
```

使用 iPad 模拟器时，我得到了类似于所附屏幕截图的内容。

![iPad UIActionSheet 示例](../Images/c868ad17e9c2c47eeb082ad29833a897.png)

作为参考，这是使用 iPhone 模拟器时 UIActionSheet 的外观。

![iPhone UIActionSheet 示例](../Images/b66dca4a7650b8efd26b241f7a5973fb.png)

注意：该项目是一个通用的单视图 MonoTouch c# 项目。

任何指示或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T01:35:00.410

我最近发布到应用商店的应用程序也遇到了同样的问题。

当您`UIActionSheet`在 iPad 上显示 a 时，iOS`UIActionSheet`会将`UIPopoverView`.

我用下面的代码来检测这是否是iPad，如果是，调整popover view的frame：

```
const int CHROMEWIDTHLEFT = 9;
const int CHROMEWIDTHRIGHT = 8;
const int MARGIN = 50;

UIActionSheet _actionSheet;

...

if (UIDevice.CurrentDevice.UserInterfaceIdiom == UIUserInterfaceIdiom.Pad) {
    var popover = _actionSheet.Superview.Superview;
    if (popover != null)
    {
        var x = _actionSheet.Frame.X + MARGIN;
        var y = (UIScreen.MainScreen.ApplicationFrame.Height - _actionSheet.Frame.Height) / 2;
        var width = _actionSheet.Frame.Width - (MARGIN * 2);
        var height = _actionSheet.Frame.Height;

        popover.Frame = new RectangleF (x, y, width, height);
        _actionSheet.Frame = new RectangleF (x, y, width - (CHROMEWIDTHLEFT + CHROMEWIDTHRIGHT), height - (CHROMEWIDTHLEFT + CHROMEWIDTHRIGHT));
    }
} 
```

该示例基于[此处的 Xamarin ActionSheet 日期选择器](http://docs.xamarin.com/ios/recipes/Standard_Controls/ActionSheet/ActionSheet_Date_Picker)

我把这些作为一个[要点](https://gist.github.com/4053306)（Normal 和 DatePicker）

# sql - 直接加入或存储

> ID：12662050
> 
> 赞同：2
> 
> 时间：2012-09-30T14:38:59.767
> 
> 标签：sql, database, database-design, rdbms

我有一个表 A，其中包含我经常处理的条目并将结果存储在表 B 中。现在我想为 A 中的每个条目确定其在 B 中的最新处理日期。

我当前的实现是加入两个表并检索最新日期。然而，另一种可能不太灵活的方法是直接将日期存储在表 A 中。

我可以考虑这两种情况的优缺点（性能、可扩展性......），但还没有这样的情况，并且想看看 stackoverflow 上的某个人是否有类似的情况，并且对任何一种情况都有建议一个具体的原因。

下面是一个快速的架构设计。

```
Table A
id, some-data, [possibly-here-last-process-date]

Table B
fk-for-A, data, date 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:43:37.863

Based on your description, it sounds like Table B is your historical (or archive) table and it's populated by batch.

I would leave Table A alone and just introduce an index on id and date. If the historical table is big, introduce an auto-increment PK for table B and have a separate table that maps the B-Pkid to A-pkid.

I'm not a fan of UPDATE on a warehouse table, that's why I didn't recommend a CURRENT_IND, but that's an alternative.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T19:56:26.840

This is a fairly typical question; there are lots of reasonable answers, but there is only one correct approach (in my opinion).

You're basically asking "should I denormalize my schema?". I believe that you should denormalize your schema only if you really, really have to. The way you know you have to is because you can prove that - under current or anticipated circumstances - you have a performance problem with real-life queries.

On modern hardware, with a well-tuned database, finding the latest record in table B by doing a join is almost certainly not going to have a noticable performance impact unless you have HUGE amounts of data.

So, my recommendation: create a test system, populate the two tables with twice as much data as the system will ever need, and run the queries you have on the production environment. Check the query plans, and see if you can optimize the queries and/or indexing. If you really can't make it work, de-normalize the table.

Whilst this may seem like a lot of work, denormalization is a big deal - in my experience, on a moderately complex system, denormalized data schemas are at the heart of a lot of stupid bugs. It makes introducing new developers harder, it means additional complexity at the application level, and the extra code means more maintenance. In your case, if the code which updates table A fails, you will be producing bogus results without ever knowing about it; an undetected bug could affect lots of data.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T14:45:47.627

我们在项目跟踪系统中也遇到过类似的情况，项目的最新状态存储在`projects`表`(Cols: project_id, description etc.,)`中，项目的历史记录存储在`project_history`表中`(Cols: project_id, update_id, description etc.,)`。每当项目有新的更新时，我们需要找出最新的更新号并将其加 1 以获得下一次更新的序列号。我们可以通过`project_history`在列上对表进行分组`project_id`并获得来做到这一点`MAX(update_id)`，但是考虑到项目更新的数量（几十万）和更新的频率，成本会很高。因此，我们决定将值存储在`projects`表本身的`max_update_id`列中，并在给定项目有新更新时不断更新它。HTH。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-30T15:00:12.607

如果我理解正确，您有一个表，其每一行都是一个参数，另一个表在时间序列中历史记录每个参数值。如果这是正确的，我目前在我正在构建的产品之一中遇到了同样的情况。我的参数表包含一个度量列表（29K 记录），历史参数值表每 1 小时具有该参数的值 - 因此该表当前有 4M 行。在任何给定的时间点，对最新值的请求都将比对历史记录的请求多得多，因此除了参数值表中的最后一条记录之外，我确实在参数表中存储了最新值。虽然这看起来像是数据重复，但从性能的角度来看，它是完全合理的，因为

1.  To get a listing of all parameters and their CURRENT VALUE, I do not have to make a join and more importantly
2.  I do not have to get the latest value for each parameter from such a huge table

So yes, I would in your case most definitely store the latest value in the parent table and update it every time new data comes in. It will be a little slower for writing new data but a hell of a lot faster for reads.

# joomla - joomla 3.0 扩展管理器未找到模块更新

> ID：12662053
> 
> 赞同：7
> 
> 时间：2012-09-30T14:39:11.857
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla3.0

我开发了一个可以在 Joomla 2.5 Extension Manager 中更新的模块。
我在任何地方都找不到表明某些东西需要有所不同才能在 Joomla 3.0 中正常工作的信息

我不打算通过提供链接来宣传这个模块，我只是想寻求帮助来解决这个问题。
这是您可以下载的页面：
[http ://code.google.com/p/mod-random-article/downloads/list](http://code.google.com/p/mod-random-article/downloads/list)

如果您在 Joomla 2.5 上安装 v1.1，扩展管理器将找到新的更新 v1.2。
如果您在 Joomla 3.0 上安装它，扩展管理器将找不到新版本。

任何人都可以帮忙吗？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:38:32.753

我找到了解决我的问题的方法。这看起来很容易..我不知道我之前怎么找不到这个。

我必须在针对 Joomla 3.0 的更新服务器上的清单文件中添加另一个标签，如下所示：

```
<updates>  
    ...
    <update>
        ...
        <targetplatform name="joomla" version="3.0"/>
        ...
    </update>
</updates> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T16:34:06.740

我已将所有内容重命名为相应的插件名称，但 joomla 仍然没有找到我创建的新复制和修改的插件。

最后我发现`plugin`XML对象的属性，需要和插件同名。所以假设新的插件名称是`xxyyzz`，如下所示，随着其他相应的变化，插件属性也应该更新。

```
<files>
    <filename plugin="xxyyzz">xxyyzz.php</filename>
</files> 
```

# php - Nicedit 在本地上传图片失败

> ID：12662062
> 
> 赞同：3
> 
> 时间：2012-09-30T14:40:19.910
> 
> 标签：php, javascript, upload, nicedit

这就是我对编辑器的称呼：

```
new nicEditor({
           buttonList : ['bold','italic','underline','upload'],
           iconsPath:'img/nicedit.png',
           uploadURI : 'http://server.com/integracion/files/nicUpload.php'
}).panelInstance(textareaId); 
```

并且 .php 文件存在（我是[Docs](http://wiki.nicedit.com/w/page/515/Configuration%20Options)中的文件，我更新了目标路径）

```
/* I want them here http://server.com/integracion/files/uploads/ so... */   
    define('NICUPLOAD_PATH', './uploads'); // Set the path (relative or absolute) to
                                              // the directory to save image files                  
    define('NICUPLOAD_URI', '/uploads');   // Set the URL (relative or absolute) to
                                              // the directory defined above 
```

但是我在上传完成时做出回应（以及来自nicedit的警报..）

```
<script>
        try {
            top.nicUploadButton.statusCb({"error":"Invalid Upload ID"});
        } catch(e) { alert(e.message); }
    </script> 
```

我错过了什么？

-编辑

我认为问题可能出在 php 文件中：

```
$id = $_POST['APC_UPLOAD_PROGRESS'];  /* APC is installed and enabled */
if(empty($id)) {
    $id = $_GET['id'];
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-30T15:19:01.727

最终编辑：

我已经成功地完成了这项工作！

**这是一个工作示例：**
[http ://simplestudio.rs/yard/nicedit/](http://simplestudio.rs/yard/nicedit/)

**上传的图像将存储在这里：**
[http ://simplestudio.rs/yard/nicedit/images/](http://simplestudio.rs/yard/nicedit/images/)

**这是整个代码，只需将其解压缩并放在您的服务器上，主要我需要调整nicEdit.js，因为它有一些问题。**
[http://simplestudio.rs/yard/nicedit/nicedit.rar](http://simplestudio.rs/yard/nicedit/nicedit.rar)

只需使用该 js 文件编写代码，然后查看我的示例，它将起作用:)

*   您还需要安装 php APC 以便此脚本可以工作： http:
    [//php.net/manual/en/apc.installation.php](http://php.net/manual/en/apc.installation.php)

如果您有任何问题，我会在这里解决。

*   我不会在我的服务器上删除此示例，以便遇到此问题的每个人都可以免费下载它...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T14:01:03.400

负责图片上传的代码是method `uploadFile`，它在寻找`uploadURI`option参数。

您将需要修改`onUploaded`事件处理程序来解析您的自定义响应，而不是 imgur 的（[示例](http://pastie.org/4902518)）。默认情况下，它至少需要`{"upload": { "links": {"original": "http://..."}, "image": {"width": "123" } }}`.

很抱歉，但我无法帮助[FormData()](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/FormData)使用 PHP 处理服务器端。

有关更多信息，您可以使用 Firebug 或 WebInspector 试用 nicEdit[网站](http://nicedit.com/demos.php)上的演示页面来窥探网络请求，当然还有源代码。

# ruby - 如何使用 Ruby 和 Sequel 将图像存储在数据库中？

> ID：12662065
> 
> 赞同：4
> 
> 时间：2012-09-30T14:40:47.657
> 
> 标签：ruby, image, blob, sequel, ramaze

我正在使用 Ruby，或者更具体地说是带有[Sequel ORM的](http://sequel.rubyforge.org/)[Ramaze](http://ramaze.net)框架。所以请不要告诉我[Paperclip](https://github.com/thoughtbot/paperclip) gem，因为它只与 ActiveRecord 兼容。

考虑到这一点，如何使用 Ruby 和 Sequel 将图像存储在数据库中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T15:05:23.470

```
require "sequel"

DB = Sequel.sqlite

DB.create_table :images do
  primary_key :id
  String :name
  File :data
end

images = DB[:images]
images.insert(name: 'foo', data: Sequel.blob(File.read('/mydir/myimage.jpg'))) 
```

# java - Java JAR 包含自己的依赖项是正确还是错误？

> ID：12662068
> 
> 赞同：4
> 
> 时间：2012-09-30T14:41:28.287
> 
> 标签：java, ant, jar, classpath, manifest.mf

我想这是一个两部分的问题。我正在尝试编写我自己的 Ant 任务 ( `MyFirstTask`)，它可以在其他项目的构建文件中使用`build.xml`。为此，我需要将我的 Ant 任务编译并打包到它自己的 JAR 中。因为我写的这个 Ant 任务相当复杂，它有大约 20 个依赖项（其他 JAR 文件），例如使用 XStream 进行 OX 映射，使用 Guice 进行 DI 等。

我目前正在MyFirstTask 项目内`package`的文件中编写任务`build.xml`（将打包的构建文件`myfirsttask.jar`，这是可重用的 Ant 任务）。

我突然意识到我并不完全理解 Java JAR 的*意图*。是不是 JAR 不应该*包含*依赖项，而是将其留给运行时配置（应用程序容器、运行时环境等）来为其提供所需的依赖项？我会假设如果是这种情况，可执行 JAR 是规则的例外，是吗？

或者， Java JAR 是否也*打算*包含它们的依赖项？

无论哪种方式，我都不想强迫我的用户将 25 个以上的 JAR 复制粘贴到他们的 Ant 库中；这太残忍了。我喜欢 WAR 文件的设置方式，其中依赖项的类路径在`classes/`目录下定义。

我想，最终，我希望我的 JAR 结构看起来像：

```
myfirsttask.jar/
    com/  --> the root package of my compiled binaries
    config/  --> config files, XML, XSD, etc.
    classes/  --> all dependencies, guice-3.0.jar, xstream-1.4.3.jar, etc.
    META-INF/
        MANIFEST.MF 
```

我*假设*为了完成这个（并让运行时类路径也查看`classes/`目录），我需要以某种方式修改 MANIFEST.MF（我知道有一个名为 的清单属性`ClassPath`，我相信？）。我只是很难将所有东西放在一起，并且有一个关于 JAR 最初意图的迫在眉睫/挥之不去的问题。

有人可以确认 Oracle 是否打算让 JAR 包含它们的依赖项吗？而且，无论哪种方式，我必须在清单（或其他任何地方）中做些什么来确保在运行时类路径可以找到存储在`classes/`目录下的依赖项？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:59:05.847

目的 (AFAIU) 是让 JAR 文件表现得像本机代码共享对象文件（`.so`在 Unix 上，`.dll`在 Windows 上）。通常，应用程序将安装几个共享对象文件作为同级文件，以及用于启动它们的可执行文件。

可执行 JAR 更像是一个独立的可执行文件，因此包含所有依赖项更为常见（类似于静态链接的本机代码可执行文件直接包含其所有依赖对象的方式）。

不幸的是，默认的 ClassLoader 无法从嵌套的 JAR 中加载类。可以编写一个 ClassLoader。或者你可以使用别人写的。从您的问题描述来看，听起来[Jar Jar Links](http://code.google.com/p/jarjar/)正是您正在寻找的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T16:37:19.023

术语“JAR 文件”可能意味着至少两件事，或者更确切地说，它的含义至少有两个方面。基本上，它意味着一种容器格式：基本上，一个带有 META-INF 目录的 ZIP 文件。更准确地说，它意味着这个容器被用作打包类文件的一种方式。

在作为容器的意义上，没有关于内容的意图；该文件可能包含类文件、其他 JAR（在任何一种意义上！）等。但就作为代码的打包而言，我相信 JAR 文件的目的是让它们不包含任何依赖项。

如果您阅读过[JAR 文件规范](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html)，您会发现有几个关于类文件存储的典故，但没有提到存储其他 JAR 文件。相应地，如果您查看 JRE 中 JAR 文件类加载器的实现，它无法对嵌套 JAR 做任何有用的事情。

此外，JAR 规范确实详细说明了一种处理非嵌套依赖项的机制[：`Class-Path`属性](http://docs.oracle.com/javase/6/docs/technotes/guides/jar/jar.html#Main%20Attributes)。这允许 JAR 文件对文件系统中的其他 JAR 文件进行相对引用。

现在，包装意义上的 JAR 文件并不是容器意义上的 JAR 文件的唯一用途。WAR、EAR 和 RAR 文件（以及更多）都是用于特定目的的 JAR 文件。其中的每一个*都*能够包含其他 JAR：WAR 可以包含包装意义上的 JAR 文件，EAR 可以包含这些以及 WAR。然而，这些与打包 JAR 文件完全不同。值得注意的是，需要使用 Java 标准库中没有的特殊类加载器才能使用它们。

WAR 等可以将许多 JAR 文件一起收集的方式确实非常有用，而且在 Java EE 之外的 Java 中没有通用机制来执行此操作，这真是太可惜了。拥有一个简单地捆绑了一些 JAR 的“应用程序存档”或“元存档”格式会很棒。

因此，您会遇到用户需要 25 个 JAR 才能使用您的插件的问题。你大概有两个选择。

首先，您接受痛苦，并将您的插件作为一个充满 JAR 的 zip 文件分发，用户必须将其解压缩。

其次，你加入了 21 世纪，并使用自动处理依赖关系的构建工具和分发机制：在实践中，这意味着使用 Gradle、Maven 或其他工具（如 Ant）与 Ivy 配合，从Maven Central，然后发布您的代码以及列出这些依赖项的 POM 文件。然后，用户可以下载您的 JAR 和 POM，并让他们自己的构建工具获取依赖项。

如果您确实采用第二条路线，那么为了不使用自动依赖项管理的用户的利益，还发布依赖项的 zip 可能是明智的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-30T20:05:33.567

> **Java JAR 包含自己的依赖项是正确还是错误？**

在某些用例中，JAR 文件包含自己的依赖项是正确的。如果您想支持不使用现代依赖项管理的用户，您可能需要提供一个 JAR 文件，其中包含您的 Ant 任务代码以及所有依赖项。更强大、更灵活和模块化的方法是将版本化的 JAR 文件发布到仅包含项目代码的[Maven 存储库。](http://mvnrepository.com/)

# 1) 包含您的项目代码和所有依赖项的 JAR 文件

## 优点

*   易于下载，最终用户的唯一设置是 [`<taskdef>`](http://ant.apache.org/manual/Tasks/taskdef.html)在他们的 Ant 构建文件中包含
*   [发布 Maven 工件](http://apache.org/dev/publishing-maven-artifacts.html)无需设置

### 用于构建 JAR 的示例 Ant 目标

```
<target name="jar" depends="compile"
    description="Creates a standalone JAR of all class files and dependencies.">
  <jar destfile="${my.ant.task.jar.file}" update="true">
    <fileset dir="${build.classes.dir}" />
    <zipfileset src="${lib.dir}/javax.inject.jar" />
    <zipfileset src="${lib.dir}/guice-3.0.jar" />
    <zipfileset src="${lib.dir}/guice-multibindings-3.0.jar" />
    <zipfileset src="${lib.dir}/guice-assistedinject-3.0.jar" />
  </jar>
</target> 
```

## 缺点

*   如果您的 Ant 任务的最终用户已经在他们的项目中包含了部分或全部依赖项，那么他们最终将获得依赖项的冗余副本
*   JAR 文件可能非常大

# 2) JAR 文件仅包含发布到[Maven 存储库的项目代码](http://mvnrepository.com/)

## 优点

*   用户可以获取您发布到[Maven 存储库](http://mvnrepository.com/)的任何版本的 Ant 任务，这为发布任务的新版本提供了更大的灵活性，同时允许现有用户继续使用以前的版本以避免可能的回归
*   避免常见依赖项的重复副本（除非依赖项的不同版本导致错误）
*   JAR 文件会很小

## 缺点

需要了解以下内容：

*   [Maven 存储库](http://mvnrepository.com/)
*   [发布 Maven Artifacts](http://apache.org/dev/publishing-maven-artifacts.html) - 见 [Ant + Ivy 具体准备和程序](http://apache.org/dev/publishing-maven-artifacts.html#ant)
*   [Apache Ivy](http://ant.apache.org/ivy/) - 与 Apache Ant 集成的依赖管理器

作为参考，Java™ 教程提供了一个很好的 JAR 文件摘要。

### [课程：在 JAR 文件中打包程序](http://docs.oracle.com/javase/tutorial/deployment/jar/)

> Java™ Archive (JAR) 文件格式使您能够将多个文件捆绑到单个存档文件中。**通常，JAR 文件包含与...** ***应用程序***相关联的类文件和辅助资源。
> 
> JAR 文件格式提供了许多好处：
> 
> *   *安全*性：您可以对 JAR 文件的内容进行数字签名...
> *   *减少下载时间*：如果您的小程序捆绑在 JAR 中...
> *   *压缩*：JAR 格式允许您压缩文件以进行有效存储。
> *   *扩展打包*：扩展框架提供了一种向 Java 核心平台添加功能的方法，JAR 文件格式定义了扩展的打包...
> *   *包密封*：可以选择密封存储在 JAR 文件中的包，以便包可以强制执行版本一致性。将包密封在 JAR 文件中意味着必须在同一个 JAR 文件中找到该包中定义的所有类。
> *   *包版本控制*：JAR 文件可以保存有关它包含的文件的数据，例如供应商和版本信息。
> *   *可移植性*：处理 JAR 文件的机制是 Java 平台核心 API 的标准部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T15:24:55.653

“Jar Jar Links”仅适用于独立应用程序。但不适用于蚂蚁。如果您的项目具有相同的依赖项，并且它们稍后升级到较新的版本，例如 xstream-*.jar，那么就会发生冲突，并且可能会选择错误的版本。在最坏的情况下会出现 MethodNotFoundException。这就是为什么在单个 jar 中包含依赖项是一种不好的做法。

“我不想强迫我的用户复制粘贴 25 个以上的 JAR”有什么问题？

这是最简单的解决方案。最好的，因为您将避免将来出现问题。

现在，当您看到 Ant 的不便之处时，您可能想将其与 Gradle 进行比较。使用 Gradle，您可以获得与 Ant 有点相似的任务，并且您不需要提供任何依赖项 jar。您的所有依赖项都将解析 Gradle。就像在 Ant 中一样，您仍然可以创建您的任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T18:42:46.123

一些 java 应用程序供应商使用以下场景来分发依赖于其他 jar 的应用程序，这让人想起**静态链接**。在构建 jar 的阶段，所有依赖项（也是 jar）都被解包。在构建最终 jar 时，它们包括新编译的类和从依赖项中提取的类。

可能的问题：

1.  应用程序不能重用这些库，因为它们包含在应用程序中。通常的静态链接问题。
2.  必须尊重重新打包的库的许可证。通常可以重新打包它们，但有时必须额外注意它们的许可证文件，这些文件可能恰好在他们的罐子里。

AFAIK不可能在罐子里放罐子，否则就不可能为它们指定类路径。因此，重新包装程序。

# c# - 什么是受保护的虚拟新

> ID：12662072
> 
> 赞同：17
> 
> 时间：2012-09-30T14:42:32.213
> 
> 标签：c#

我正在阅读有关制作自定义主体的教程，并且遇到了代码：

```
public class BaseController : Controller
{
    protected virtual new UserPrincipal User
    {
        get { return HttpContext.User as UserPrincipal; }
    }
} 
```

“受保护的虚拟新”究竟是如何工作的？

关键词“新”是最让我困惑的。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-30T14:44:17.923

`protected`意味着它只在这个类和从它派生的类中可见。

`virtual`意味着它可以在派生类中被覆盖。

`new`意味着在这里您创建了新的覆盖层次结构，即您停止覆盖基类中定义的方法并用此方法替换它。

更多细节可以在[这里找到](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/versioning-with-the-override-and-new-keywords)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T14:43:58.283

`new`用于成员隐藏。

与重写方法不同，`new`方法不会通过对基类的引用来调用。

请参阅[文档](http://msdn.microsoft.com/en-us/library/435f1dw2.aspx)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-07-02T14:23:36.217

**你的关键问题：** “关键字`new`是最让我困惑的。”

**简短的回答：** `new`并且`override`是相互排斥的。`new`用于**替换**从基类继承的类成员。相反，`override`用于**扩展**基类实现的一个成员。

从新[的修饰符（C# 参考）](http://msdn.microsoft.com/en-us/library/435f1dw2%28v=vs.120%29.aspx) *（Visual Studio 2013）*：

> It is an error to use both **new** and [override](http://msdn.microsoft.com/en-us/library/ebca9ah3.aspx) on the same member, because the two modifiers have mutually exclusive meanings. The **new** modifier creates a new member with the same name and causes the original member to become hidden. The **override** modifier extends the implementation for an inherited member.

# sql - 无法从 sql 数据库中检索带点符号的数据

> ID：12662076
> 
> 赞同：1
> 
> 时间：2012-09-30T14:43:40.860
> 
> 标签：sql, database, vb.net, special-characters

在我的项目（vb.net）中，我将网站的 ip 地址存储在类型为列的表中`nvarchar`。但我无法从表中检索它。我想知道“点”符号是否有问题。请帮忙。

这是我使用的命令

```
 query = "select *from restricted_sites where site_address='" + webip + "'" 
```

`webip`是网站的IP地址。

 `````
Imports System.Data.SqlClient
Imports System.Net
Public Class restrict
    Private Sub clear_button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles clear_button.Click
        site_TextBox1.Text = ""
        addr_TextBox1.Text = ""
    End Sub
    Private Sub submit_button_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles submit_button.Click
        Dim connectionstr As String
        Dim query As String
        Dim conn As SqlConnection
        Dim cmd As SqlCommand
        Dim webip As String
        Dim hostname As IPHostEntry = Dns.GetHostByName(addr_TextBox1.Text)
        Dim ip As IPAddress() = hostname.AddressList
        Try
            webip = ip(0).ToString
            connectionstr = "Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\URLTrack.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"
            conn = New SqlConnection(connectionstr)
            conn.Open()
            query = "insert into restricted_sites values('" + site_TextBox1.Text + "','" + webip + "')"
            cmd = New SqlCommand(query, conn)
            cmd.ExecuteNonQuery()
            MsgBox("Website added for restriction", MsgBoxStyle.Information)
            conn.Close()
        Catch ex As SqlException
        End Try
    End Sub
End Class 
````  ````
Private Sub Combox1_KeyPress(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) Handles Combox1.KeyPress
        If e.KeyChar = Convert.ToChar(Keys.Enter) Then
            Dim connectionstr As String
            Dim query As String
            Dim cmd As SqlCommand
            Dim reader As SqlDataReader
            Dim conn As SqlConnection
            Dim url As String = ""
            Dim webip As String
            Dim hostname As IPHostEntry = Dns.GetHostByName(Combox1.Text)
            Dim ip As IPAddress() = hostname.AddressList
            webip = ip(0).ToString
            connectionstr = "Data Source=.\SQLEXPRESS;AttachDbFilename=C:\Program Files\Microsoft SQL Server\MSSQL10.SQLEXPRESS\MSSQL\DATA\URLTrack.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True"
            conn = New SqlConnection(connectionstr)
            conn.Open()
            query = "select * from restricted_sites where site_address='" + webip + "'"
            cmd = New SqlCommand(query, conn)
            reader = cmd.ExecuteReader
            While (reader.Read())
                url = reader(2)
            End While
            reader.Close()
            MsgBox(url, MsgBoxStyle.Information)
            If webip <> url Then
                AxWebBrowser1.Navigate(Combox1.Text)
                Combox1.Text = AxWebBrowser1.LocationURL
            Else
                MsgBox("This Web Page is Restricted.Contact the ADMIN for Further Info", MsgBoxStyle.Critical)
            End If
        End If
        If e.KeyChar = Convert.ToChar(Keys.Escape) Then
            AxWebBrowser1.Stop()
        End If
    End Sub 
```

第二个代码是比较部分。query = "select * from restricted_sites where site_address='" + webip + "'" 这个代码是问题所在。这是我在浏览 url 时通过与存储在数据库中的 ip 地址匹配来限制网站的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:44:57.813

您的查询有语法错误。你忘记了 和 之间的`*`空格`from`。

```
select *from restricted_sites
       ^ here 
```

它应该是

```
select * from restricted_sites 
```

旁注，由于您使用的是 VBNet，因此请使用`adonet` *命令和参数*对查询进行参数化，因为您当前的查询易受`SQL Injection`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:24:43.940

如果您所做的只是检查一个 IP 地址字符串是否在数据库中，您只需要计算该字符串的出现次数：

```
query = "SELECT COUNT(*) FROM restricted_sites WHERE site_address = @WebIp;"
cmd = New SqlCommand(query, conn)
' assumes the ip address column is 15 chars '
cmd.Parameters.Add(New SqlParameter With {.ParameterName = "@WebIp", _
                                          .SqlDbType = SqlDbType.NVarChar, _
                                          .Size = 15, _
                                          .Value = webip})

conn.Open()
Dim nFound = CInt(cmd.ExecuteScalar)
conn.Close()

If nFound = 0 Then
    ' site is not in restricted list
End If 
```

此外，您不应该`SELECT *`在测试以外的代码中使用 - 使用列名而不是 * 并且只检索您需要的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T14:44:33.010

您需要在等之间放置一个空格`*`，`from`这样：

```
query = "select * from restricted_sites where site_address='" + webip + "'" 
```

点符号（大概是您在 webip 中的意思）不会有问题，因为它在字符串中``

# php - XAMPP 更改 PHP 版本

> ID：12662082
> 
> 赞同：6
> 
> 时间：2012-09-30T14:44:20.963
> 
> 标签：php, xampp

我正在开发一个旧项目，该项目使用我的 XAMPP 版本中包含的较新 PHP 版本不支持的功能。

我想暂时更改为旧版本的 PHP，所以我正在寻找一种在 XAMPP 中的 PHP 版本之间切换的方法。

不幸的是，重构以使用较新版本的 PHP 不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:50:08.600

我不敢“暂时”转移我的开发机器。

我建议安装像[VirtualBox](https://www.virtualbox.org/)这样的虚拟机管理器，然后在其中安装[旧版本的 XAMPP](http://www.oldapps.com/xampp.php)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-07-24T15:14:07.883

我在 Windows 上执行了以下步骤：

1.  使用所需的 PHP 版本（VC-11.zip 版本）下载 XAMPP

2.  在 C:/xamppXXXX/ 上解压缩（例如，XXXX -> 您的 PHP 版本），这样您将拥有 C:/xampp/（您的第一个安装版本）和新版本。

3a。从 xamppXXXX 文件夹*/xampp/*中查找所有*.conf*、*.ini*、*.bat*文件并替换为*C:/xamppXXXX/*。您可以使用任何 IDE（如 SublimeText）来查找字符串。

 **3b。从 xamppXXXX 文件夹*\xampp\*中查找所有 .conf 文件并替换为*\xamppXXXX\*

4.  您可以从已安装的版本控制面板启动 MySQL，然后打开 C:/xamppXXXX/xampp-control.exe 并从该面板启动 Apache。

我安装了 php7 并从 zip 安装了 php5 并且工作正常。打开不同的 XAMPP 控制面板实例是将所有数据库放在一起并且不会在版本之间丢失它们的最佳方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T22:04:58.960

我对这方面的回应感到非常失望。

WAMP 允许您非常轻松地在 PHP 和 MySQL 版本之间切换......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-15T01:45:07.817

不要为此使用 XAMPP。使用 MAMP。只需单击一下

[![在此处输入图像描述](../Images/4bbc30e982c68ac8bcdcf6740d9e5971.png)](https://i.stack.imgur.com/rFgm9.png)**

# hash - 如何评估哈希生成算法

> ID：12662091
> 
> 赞同：4
> 
> 时间：2012-09-30T14:45:00.793
> 
> 标签：hash, hashcode

除了生成大量值并查看值的分布之外，您还知道哪些方法可以评估哈希函数的效率？效率是指散列函数生成的密钥分布均匀。有没有办法在不实际测试实际值的情况下证明这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T15:33:30.700

散列函数甚至仅*在被散列的数据的上下文中*

考虑两个数据集：

设置 1

```
1, 3, 6, 2, 7, 9, 5, 8, 4 
```

设置 2

```
65355, 96424664, 86463624, 133, 643564,  24232, 88677, 865747, 2224 
```

一个集合的良好散列函数（即集合 1 的 mod 10）不会产生冲突，并且可以被视为该数据集的完美散列

但是将其应用于第二组，到处都有碰撞

```
Hash = (x * 37) mod 256 
```

第二组要好得多，但可能不太适合第一组……尤其是在为少量桶划分散列时。

您可以做的是针对您“期望”您的函数必须处理的随机数据评估散列......但这是在做出假设......

过早的优化是在你有足够的真实数据来评估*之前*寻找完美的哈希函数。

您应该在重新散列的成本变得无法更改散列函数之前获得足够的数据

## 更新

假设我们正在寻找一个生成输入数据的 8 位散列的散列函数。让我们进一步假设散列函数应该采用不同长度的字节流。

如果我们*假设*字节流中的字节是均匀分布的，我们可以对不同的散列函数进行一些评估。

```
int hash = 0;
for (byte b in datastream) hash = hash xor b; 
```

该函数将为指定的数据集生成均匀分布的散列值，因此在这种情况下将是一个很好的散列函数。如果您不明白为什么会这样，那么您可能还有其他问题。

```
int hash = 37;
for (byte b in datastream hash = (31 * hash + b) mod 256; 
```

该函数将为指定的数据集生成均匀分布的散列值，因此在这种情况下将是一个很好的散列函数。

现在让我们将数据集从 0 到 255 范围内的可变长度随机数字符串更改为包含编码为 US-ASCII 的英文句子的可变长度字符串。

然后 XOR 是一个糟糕的哈希，因为输入数据从来没有设置第 8 位，因此只生成 0-127 范围内的哈希，而且由于英文中的字母频率，一些“热”值的可能性更高单词和 XOR 的取消效果。

这对素数作为散列函数仍然相当不错，因为它使用整个输出范围，并且素数初始偏移量加上不同的素数乘数往往会分散值。但是由于英语语言的结构，碰撞仍然很弱......只有使用真实数据进行测试才能显示的东西。

# ios - 安装 XCode 4.5 后，如何编译 iOS 4.3 之前的版本

> ID：12662092
> 
> 赞同：0
> 
> 时间：2012-09-30T14:45:15.443
> 
> 标签：ios, xcode, xcode4.5

我升级到 Xcode 4.5，发现我无法支持/编译 4.3 之前的设备。我无法使用旧版本的 XCode 4.2，因为升级到 Mountain Lion 后它不再启动。我用 iOS 4.xx 测试设备。我想在这些设备上安装应用程序进行测试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:45:15.443

我发现 Xcode 4.4.1 支持 iOS 4.3 之前的设备，它也适用于 Mountain Lion。所以，我下载了 Xcode 4.4.1

[这个问题](https://stackoverflow.com/questions/11746735/how-to-change-deployment-target-from-ios-5-1-to-4-2-in-xcode-4-4)帮助我弄清楚了这一点。

ps：即使我下载了框架并尝试通过 iTunes 安装它，我也无法将我的测试设备升级到 iOS 4.3。

# android - 以编程方式恢复应用程序数据

> ID：12662093
> 
> 赞同：5
> 
> 时间：2012-09-30T14:45:17.333
> 
> 标签：android, backup, restore

如何以编程方式从有根设备上的 SDCard 恢复应用程序数据？？？

我从事备份/恢复应用程序，我做了以下步骤：

-备份案例我将数据应用程序从 /data/data/PackageName/ 复制到 SDcard

然后我删除了应用程序并重新安装它

- 恢复案例我将备份中的相同数据应用程序从 SD 卡复制到 /data/data/PackageName/

但是当我启动它时应用程序停止了？

***对不起我的英语***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:49:53.820

如果应用程序将数据存储在 SDCard 中，那么您还必须备份该数据......该数据的路径是“/mnt/sdcard/Android/data/Packagename/”。

# php - 选择 COUNT 列和 GROUP BY

> ID：12662099
> 
> 赞同：0
> 
> 时间：2012-09-30T14:46:17.333
> 
> 标签：php, mysql, select, group-by

在这里，我遇到了一个我自己无法解决的问题。

我的问题是：

我需要 SELECT 列的计数，但我还需要在同一列上进行 GROUP BY。到目前为止我所尝试的并没有像我预期的那样返回。

这是我尝试过的：

```
'SELECT COUNT(user_id) AS total_donors
    FROM ' . DONATION_SECURITY_TABLE .
    " WHERE payment_status = 'Completed' 
    GROUP BY user_id" 
```

这就是我的桌子的样子：

```
id    user_id    payment_status
1     20         Completed
2     33         Completed
3     44         Completed
4     20         Pending
5     33         Pending
6     44         Completed
7     20         Completed 
```

如您所见，单个 user_id 可以多次处于 Pending 或 Completed 状态，但我希望我的查询返回**3**（基于上面的表示例）。

因此，如果付款状态已完成，我希望查询到 COUNT GROUPED user_ids。

想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:48:48.407

您可以使用`DISTINCT`关键字来选择唯一的用户 ID，就像这样

```
"SELECT COUNT(DISTINCT user_id) AS total_donors
FROM " . DONATION_SECURITY_TABLE .
" WHERE payment_status = 'Completed' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T14:49:04.497

听起来像一个独特的计数是你需要的。扔掉小组，试试这个：

```
SELECT
  COUNT(DISTINCT user_id) AS total_donors
FROM
  mytable
WHERE
  payment_status = 'Completed' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T15:07:37.367

对于 3 的结果，将您的替换`Count(user_id)`为`Count(distinct user_id)`并删除 group by。

这为您提供了付款状态为已完成的唯一 user_id 的计数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T14:49:26.610

由于您只对 的计数感兴趣`user_ID`，因此您不需要使用`GROUP BY`子句

```
SELECT COUNT(DISTINCT user_ID)
FROM tableName
WHERE payment_status = 'completed' 
```

当您尝试添加`GROUP BY`子句时。结果与您的预期大相径庭。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-30T14:50:00.577

用这个：

```
SELECT COUNT(DISTINCT `user_id`) as `Total` FROM `Donation_Table`
WHERE `payment_status` = 'Completed' 
```

# xcode - 从 Xcode 中选择的 GEOJson 文件变灰

> ID：12662100
> 
> 赞同：0
> 
> 时间：2012-09-30T14:46:23.383
> 
> 标签：xcode, geojson, ios6-maps

你好，我想测试我的应用程序的转向配置，所以我想将我的 GEOJson 文件加载到 Xcode。然而，当我打开 Routing App Coverage File 下拉菜单并尝试选择我的多边形时，它显示为灰色，就像我的文件系统中的所有其他文档一样。它应该有某种特定的形式或结尾，还是其他什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:50:00.073

您是否尝试过使用另一个 xcode 项目访问该文件？我过去曾遇到过 XCode 项目文件的问题，不得不重新创建项目或完全删除我的所有资源并将它们重新添加以更新目录引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T15:40:05.503

我通过尝试在 iTunes 连接上上传文件并收到一个讲故事的错误来附加正确的文件结尾，从而解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-16T15:52:04.930

我也无法让 XCode 找到该文件 .. 但我将文件重命名为`GeoJSON`没有任何文件扩展名，然后通过模拟器运行我的应用程序，而没有按照 Apple 文档的描述首先将其与我的方案相关联。这奏效了。

作为参考，我的`GeoJSON`文件包含丹麦，例如

```
{
    "type": "MultiPolygon",
    "coordinates": [
        [
            [
                [
                    6.592041015625,
                    58.029833609102994
                ],
                [
                    13.952880859375,
                    57.924973963067735
                ],
                [
                    13.886962890625,
                    52.89389531877394
                ],
                [
                    5.910888671875,
                    53.21087169635909
                ],
                [
                    6.592041015625,
                    58.029833609102994
                ],
                [
                    6.592041015625,
                    58.029833609102994
                ],
                [
                    6.592041015625,
                    58.029833609102994
                ]
            ]
        ]
    ]
} 
```

# jquery - 为什么 jQueryMobile 对话框关闭按钮有时会让我回到主页？

> ID：12662102
> 
> 赞同：4
> 
> 时间：2012-09-30T14:46:39.777
> 
> 标签：jquery, jquery-mobile

我有一个包含两个主要页面（登录页面和地图页面）的应用程序，它们生成用作对话框的动态页面，其中大多数都有子页面，在链式对话框结构中。

所以一个完全正常的做法是：

登录 -> 地图 -> 对话框 -> 子对话框

最初，我使用界面上的一个按钮从 Map 移动到 Dialog，如下所示：

```
<a href="#dialogID" data-icon="arrow-r" data-iconpos="right" data-rel="dialog" data-role="button" data-theme="b" class="ui-btn-right">Info</a> 
```

使用该系统，我可以使用对话框上的关闭按钮或浏览器上的后退按钮完美地从 Login 导航到 Sub-Dialog 并再次返回。地址栏更新如下：

```
Login Page: http://serverName/
Maps Page: http://serverName/#page-map
Dialog: http://serverName/#page-map&ui-state=dialog
Sub-Dialog: http://serverName/#page-map&ui-state=dialog&ui-state=dialog 
```

这是完全正常的行为，只要我点击带有 data-rel="dialog" 的链接，它就可以正常工作。

但我想改变我网站的行为，这样当你点击一个谷歌地图标记对象时，它会直接打开对话框。我用以下方法做到这一点：

```
$.mobile.changePage($("#dialogID"), { role: "dialog" }); 
```

当我这样做时，导航返回或点击子对话框上的关闭按钮会让我回到查看登录页面。但是，URL 是 Dialog 状态的 URL。所以 URL 是正确的，但我在屏幕上看到的内容是错误的。

因此，我现在不是通常能够进入 ABCD->DCBA，而是进入 ABCD->DA 并跳过中间的这两页。

这是 jQueryMobile 中的错误吗？还是我使用 changePage 错误？

**编辑：**这是一个展示行为的深入 JSFiddle：http://jsfiddle.net/LxFJq/14/ 它似乎是由于动态页面而出现的。当它们是静态页面（http://jsfiddle.net/hgb7s/2/）时，一切都按预期工作。动态页面会破坏导航，但仅在从事件处理程序单击的边缘情况下。至少我已经缩小了范围。

**已解决：**我自己解决了这个问题。

<a data-rel="dialog"> 标记会自动将 data-url 属性添加到新页面。changePage() 函数不会。所以我自己添加了它们，一切正常。工作结果，数据相关属性位于[http://jsfiddle.net/LxFJq/15/](http://jsfiddle.net/LxFJq/15/)

根据前两条评论找到此信息：[https ://gist.github.com/1037934](https://gist.github.com/1037934)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T02:19:37.873

我自己解决了这个问题。

<a data-rel="dialog"> 将自动将 data-url 属性添加到新页面。changePage() 函数不会。所以我自己添加了它们，一切正常。[http://jsfiddle.net/LxFJq/15/](http://jsfiddle.net/LxFJq/15/)的工作结果

根据前两条评论找到此信息：[https ://gist.github.com/1037934](https://gist.github.com/1037934)

我已将此作为错误提交给 jQueryMobile 的 GitHub 存储库。（现在我必须等待两天才能接受我自己的答案。）

# qt - 使用 Qt 设计器绘制 Qt

> ID：12662106
> 
> 赞同：1
> 
> 时间：2012-09-30T14:46:53.477
> 
> 标签：qt, drawing, qt-designer

我曾尝试在互联网和这里搜索，但没有成功。我正在使用 Qt 4.8.2 并在 Designer 中设计我的应用程序，然后我在 VS2010 中编写代码。我想根据应用程序创建的一些数据在应用程序窗口上显示一个图表，例如[http://www.infocaptor.com/user_help/help_img/dashboard_line_chart_screen.png 。](http://www.infocaptor.com/user_help/help_img/dashboard_line_chart_screen.png)

在 Designer 的 Widget Box 中，我找不到任何与绘图相关的小部件。所以我尝试创建一个 QTextEdit 并使用 QPainter 在其上绘图。但是，这不起作用。我可以在整个 appwindow 上绘图，而不仅仅是在文本编辑上。所以问题是：可以在设计器的应用程序窗口中添加什么小部件，这将允许我使用 QPainter 在其上绘图？

我被避开了，因为文档特别指出 QPainter 可以在 QTextEdit 所在的任何 QWidget 上绘制......

非常感谢任何帮助，丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:33:49.743

“绘图”的功能太复杂/不特定，无法作为专门的小部件包含在内。您必须自己创建它并实现所需的绘图功能。

这是您可以从中学习的示例， scribblearea 类可能正是您要寻找的。在这种情况下，您可以将它复制到您的项目中，并通过将小部件提升到此类来在 Qt-Designer 中使用。

# scala - Scala Continuations - 为什么我的转移呼叫不能在 try-catch 块内？

> ID：12662113
> 
> 赞同：4
> 
> 时间：2012-09-30T14:47:30.890
> 
> 标签：scala, exception-handling, try-catch, continuations, try-catch-finally

我是 Scala 延续的新手，对 scala 语言一般来说相对较新。

我尝试使用 Scala continuation 并编写了以下代码：

```
case class MyException(msg:String) extends Exception

def go:Int = reset {
  println("enter your input")
  val my_check = //try 
  {
    val user_input = readLine()
    if (!user_input.matches("\\w+")) {
      throw new MyException("illegal string: " + user_input) 
    }
    shift {
      k: (Boolean => Int) => {
        if (user_input == "true") {
          k(true)
        }
        else if (user_input == "false") {
          k(false)
        }
        else {
          // don't even continue
          0
        }
      }
    }
  } 
//  catch {
//    case MyException(msg) => false
//  }
  if (my_check) {
    println("TRUE")
    1
  }
  else {
    println("FALSE")
    -1
  }
}

println(go) 
```

代码按预期工作：当用户输入非字母数字字符串`MyException`时，抛出 a，当用户输入“true”时，代码继续`my_check = true`，当用户输入“false”时，代码继续`my_check = false`，当用户输入字母数字时不是“true”或“false”的字符串，`go`函数以 0 退出。

然后我尝试将一些代码包装在 try-catch 块中（注释所在的位置），编译失败：

> 错误：在非 cps 位置找到 cps 表达式
> 
> val my_check = 尝试

我知道将异常“注入”到延续中存在问题，但是为什么我不能简单地将转移的调用放在 try-catch 块中？

我在我计划的框架中需要这个，程序员不会意识到他的代码是以延续形式使用的（他会调用一些他认为是“正常”的函数，但实际上会执行`shift`）。

显然，我需要他能够在 try-catch 块中调用该函数，即使转移调用本身不会引发异常。

这个问题可以用[ControlContext](http://www.scala-lang.org/archives/downloads/distrib/files/nightly/docs/library/index.html#scala.util.continuations.ControlContext)解决吗？如果我在值上添加一些“打字”规则（可能使用*@cps[..]*）会有帮助吗？

我已经考虑过使用 Actors 的替代方案，因此您不会因此获得任何功劳:)

谢谢，

（PS 我使用的是 Scala 2.9.2，显然使用了*-P:continuations:enable*标志）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T03:05:18.370

感谢@som-snytt，但您的解决方案与通用解决方案相去甚远。我不能要求框架用户编写`def my_check`而不是`val my_check`每次它使用 try-catch 块。

但是，我使用了您的解决方案，并构建了以下代码：

```
import scala.util.continuations._

case class MyException(msg:String) extends Exception

object try_protector {
  def apply[A,B](comp: => A @cps[B]):A @cps[B] = {
    comp
  }
}

object Test extends App {
  def go: Int = reset {
    println("enter your input")
    val my_check = try_protector { 
      try {
        val user_input = readLine()
        if (!user_input.matches("\\w+")) {
          throw new MyException("illegal string: " + user_input)
        }
        shift {
          k: (Boolean => Int) => {
            user_input match {
              case "true"   => k(true)
              case "false"  => k(false)
              case _        => 0
            }
          }
        }
      } catch {
        case MyException(msg) => false
      }
    }

    if (my_check) {
      println("TRUE")
      1
    } else {
      println("FALSE")
      -1
    }
  }
  println(go)
} 
```

它有效！（在 Scala 2.9.2 上）

用户只需要用 a 包裹他的 try-catch 块，`try_protector`代码就会编译。

不要问我如何或为什么......它看起来像我的 VODOU 编译......

我还没有在 scala 2.10 上尝试过。

# sql-server - SQL Server Analysis Services 中的安全视图

> ID：12662114
> 
> 赞同：2
> 
> 时间：2012-09-30T14:47:49.033
> 
> 标签：sql-server, security, ssas

我们有一个 SSAS 2012 实例，其中包含一系列度量表和维度表。其中一个维度表与客户相关，用于按客户组织信息。

最近我们被要求保护一个客户端免受另一个客户端的查看，即，用户将被授予对给定客户端的“访问”权限，因此只能查看该客户端的数据。

我想知道实现这一目标的最佳方法是什么。目前，任何人都可以为任何客户在 excel 中创建一个支点。我只能看到创建和保护单独的数据库并最终为每个客户端单独的多维数据集的可能性。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:21:21.927

tecnet上贴了一些信息

[SSAS 上的角色管理](http://technet.microsoft.com/en-us/library/bb500251.aspx)

具体来说，我认为[授予单元权限](http://technet.microsoft.com/en-us/library/ms175408.aspx)的部分是您最感兴趣的部分。请注意，设置所述权限需要了解 MDX 查询。

# javascript - “this”是否缓存在本地？

> ID：12662118
> 
> 赞同：2
> 
> 时间：2012-09-30T14:48:16.067
> 
> 标签：javascript, performance, caching, scope

[建议](http://www.slideshare.net/madrobby/extreme-javascript-performance)在本地缓存全局变量以获得更好的性能，如下所示：

```
function showWindowSize() {
    var w = window;
    var width = w.innerWidth;
    var height = w.innerHeight;
    alert("width: " + width + " height: " + height);
} 
```

使用“this”关键字时也是如此，还是已经缓存？

例子：

```
Game.prototype.runGameLoop = function() {
  var self = this;
  self.update();
  self.draw();
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:51:46.653

该符号始终是本地引用，因此*出于性能原因*`this`无需“缓存”它。但是，可能还有其他原因将其值保留在另一个局部变量中。当有一个本地函数需要访问其包含函数的值时，包含函数必须制作该值的副本，因为总是在任何函数调用时设置。*`this``this`*

 *（调用“本地引用”可能并不完全准确`this`；关键是关键字总是引用与本地函数激活记录相关的值。）*

# database - 保护用于数据库访问的凭据

> ID：12662122
> 
> 赞同：2
> 
> 时间：2012-09-30T14:48:41.043
> 
> 标签：database, security, postgresql

我需要确保将在用户机器（应用程序和数据库）中运行的软件中的数据安全（没有不必要的读取或写入）。

我确信存储硬编码的数据库凭据不是一个好方法，但在这种情况下，我似乎没有其他选择。如果我无法避免这种情况，PostgreSQL 是否有办法保护访问日志免受用户修改？

避免用户访问存储在自己机器中的数据库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:21:10.110

我很确定他们总是可以访问自己机器上的数据库。即使他们不知道密码，他们也可以让自己成为 root 并更改密码。

你为什么不加密数据呢？

用你的公钥加密它。将您的公钥保存在他们的机器上。

将数据发送到您自己的服务器。使用您的私钥对其进行解密。

# google-api - 使用google oauth登录后如何获取用户ID

> ID：12662127
> 
> 赞同：5
> 
> 时间：2012-09-30T14:49:53.483
> 
> 标签：google-api, youtube-api

我使用 Google oAuth 通过 YoutubeAPI 获取用户信息，但我不知道在`access_token`获取用户 ID 后我需要做什么，请任何人帮助我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T15:04:33.327

有关如何获取有关已登录用户的信息，请参阅 Google 的[OAuth2 文档。](https://developers.google.com/accounts/docs/OAuth2Login#userinfocall)

`https://www.googleapis.com/oauth2/v1/userinfo`它基本上只是一个带有正确访问令牌的 GET 调用。在响应中包含用户 ID。

请注意，您还需要在第一次重定向到 Google 时包含正确的范围：

```
https://www.googleapis.com/auth/userinfo.profile 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T19:25:41.967

如果您询问如何获取当前经过身份验证的用户的 YouTube 用户名或 YouTube 用户 ID，可以在对[正确身份验证](https://developers.google.com/youtube/2.0/developers_guide_protocol_authentication)请求的响应中找到

[http://gdata.youtube.com/feeds/api/users/default?v=2](http://gdata.youtube.com/feeds/api/users/default?v=2)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-04T20:59:03.963

您可以执行以下操作之一：

1.  执行 GET`www.googleapis.com/oauth2/v1/userinfo`
2.  `id_token`使用 JWT 库解码您在初始请求中获得的内容

我推荐后者，因为它更强大并且不需要额外的调用。

有关更多信息，请参阅此线程：[如何识别 Google OAuth2 用户？](https://stackoverflow.com/questions/8311836/how-to-identify-a-google-oauth2-user)

# android - 统计android应用程序中http响应的总数

> ID：12662134
> 
> 赞同：0
> 
> 时间：2012-09-30T14:50:25.473
> 
> 标签：android

在我的应用程序中，我会知道从设备发送到服务器的 HTTP 请求总数。我已经尝试过了，但我无法得到正确的解决方案。

我该如何解决这个问题。？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:37:33.147

如果这些是您自己的 HTTP 请求，请自己计算它们，使用`int`某处

如果这些不是您自己的 HTTP 请求，则您无法知道它们正在发出，因此无法计算它们。

# c# - 我无法在两个表单之间传递数据

> ID：12662136
> 
> 赞同：0
> 
> 时间：2012-09-30T14:51:03.477
> 
> 标签：c#, winforms

我的表单中有一个 GridView，当我单击一个按钮打开另一个表单并用 GridView 中选定行的信息填充它时，我想要。

这是我在包含 GridView 的表单中尝试的代码：

```
private void barButtonItem13_ItemClick(object sender, DevExpress.XtraBars.ItemClickEventArgs e)
{
   DataRow getRow = gridView1.GetDataRow(gridView1.GetSelectedRows()[0]);
   using (Collections_.ModifierCollection modifierCollection = new Collections_.ModifierCollection((string)getRow[1],(string)getRow[2]))
   {
      var result = modifierCollection.ShowDialog();
      if (result == DialogResult.OK)
      {
          // Just some code that I used
      }
   }
} 
```

这是我以其他形式尝试过的代码：

```
public ModifierCollection(String getKeyWordCollectionName, String getKeyWordEditeurName)
{
  collectionBox.Text = String.IsNullOrEmpty(getKeyWordCollectionName) ?
                                 "unknown" :
                                 getKeyWordCollectionName;
        editeurBox.Text = String.IsNullOrEmpty(getKeyWordEditeurName) ?
                              "unknown" :
                              getKeyWordEditeurName;
  InitializeComponent();
} 
```

但它在这一行给了我一个错误：`collectionBox.Text = getKeyWordCollectionName;`

> 你调用的对象是空的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:38:51.747

很可能您`collectionBox`没有创建。尝试移动后`InitializeComponent()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:58:43.860

在 datagridviewRow 的 Cell 中使用 Value 属性

# actionscript-3 - AS3 对象移动到舞台 onClick 内的随机位置

> ID：12662143
> 
> 赞同：0
> 
> 时间：2012-09-30T14:51:37.897
> 
> 标签：actionscript-3, object, random

我正在尝试制作一个对象，红色圆圈移动反弹到我舞台 onCLick 内的随机位置，并显示消息`you touched my circle`。我不太清楚我做错了什么。

这是我想出的

```
import flash.events.MouseEvent;

myCircle.addEventListener(MouseEvent.MOUSE_DOWN, onClick);

function onClick(e:MouseEvent):void
{
  trace("you touched myCircle");
  Math.floor(Math.random()*(1+High-Low))+Low;
}
var High = stage.stageWidth == 550, stage.stageHeight == 400;
var Low = stage.stageWidth == 0, stage.stageHeight == 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:56:44.380

```
var HighH:int=stage.stageHeight;
var HighW:int=stage.stageWidth;
var LowH:int=0; var LowW:int=0;
....
function onClick(e:MouseEvent):void
{
trace("you touched myCircle");
myCircle.x=Math.floor(Math.random()*(1+HighW-LowW))+LowW;
myCircle.y=Math.floor(Math.random()*(1+HighH-LowH))+LowH;
} 
```

您需要为此设置圆圈的新坐标、用途`x`和`y`属性。

# java - Ajax 登录请求在 jquery 中使用 $.post() 方法不起作用

> ID：12662151
> 
> 赞同：0
> 
> 时间：2012-09-30T14:52:23.603
> 
> 标签：java, jquery, ajax, servlets

我有一个登录表单，我想将用户名密码发送到 servlet 并从那里返回响应，但我的用户名和密码甚至不会发送到 servlet 我已经搜索了很多但没有得到任何东西，请帮帮我..我的代码如下：

```
<script type="text/javascript">
$(document).ready(function () {
    $(".mloginform").submit(function () {
        var uName = $("#usernameInputField").val();
        var passwd = $("#passwordInputField").val();

        $.post("/LoginServlet", {
            username: uName,
            password: passwd
        }, function (data) {
            if (data.success) {
                alert("hello");
            }
        }, 'json');

        return false;
    });
});     
</script> 
```

在 LoginServlet doPost 方法内部：

```
String userName=request.getParameter("username");
String passwd=request.getParameter("password");

Gson gSon=new Gson();

Map<String, Object> data = new HashMap<String, Object>();

data.put("success", true);

JsonObject myJson=new JsonObject();
myJson.add("data", gSon.toJsonTree(data));
response.setContentType("application/json");
PrintWriter out = response.getWriter();
out.write(myJson.toString()); 
```

**我错了。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:42:12.970

$(文档).ready(函数 () {

var uName = $("#usernameInputField").val();

var passwd = $("#passwordInputField").val();

var params={用户名：uName，密码：passwd}；

```
$.ajax({
    url : "LoginServlet",
    type : "post",                      
    cache : false,
    async : false,          
    dataType : "json",
    data : params,
    contentType : "application/json; charset=utf-8",
    success : function(data) {
                  alert("hello");
            }
       }); 
```

});

# database - 如何使用信号量锁定表？

> ID：12662152
> 
> 赞同：0
> 
> 时间：2012-09-30T14:52:24.907
> 
> 标签：database, concurrency, transactions, semaphore

我想在事务执行时锁定 MDB 表以防止读取。我会使用`dbDenyRead`，但显然这是不可靠的，并不总是锁定表：

[http://www.office-archive.com/32-ms-access/c2bd1a2553e79c60.htm](http://www.office-archive.com/32-ms-access/c2bd1a2553e79c60.htm)

如何使用信号量解决方案来实现对表的虚拟锁定？

如果我将信号量存储在另一个表中，其中一行包含表名和将在事务结束时清除的进程/工作站 ID，我该如何防止以下序列？

> 1.  进程 A 查询信号量表，发现它是空白的。
> 2.  进程 B 查询信号量表，发现它是空白的。
> 3.  进程 A 使用进程 A ID 更新信号量表。
> 4.  进程 B 使用进程 B ID 更新信号量表。
> 5.  进程 A 和 B 都执行事务（不是我想要的）。

请不要包含使用`IF`SQL 语句的答案，因为我的 JET-SQL 版本不能使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:28:22.143

我不确定这是否会解决您的*所有*问题。但是使用非自动生成的主键创建一个表。如果可能，还使用某种检查/规则声明同一列，强制该列只能包含一个可能的值。

您现在有一个可以包含 0 或 1 行的表。要获得“信号量”，请在表中插入一行，具有单个固定的 PK 值。如果此插入成功，则您拥有信号量。如果插入由于主键冲突而失败，那么您没有获得信号量。关键是*不要*先执行初步检查 - 只需尝试插入。

如果您的技术如此糟糕以至于无法保证保持 PK 约束，那么您非常需要考虑更改技术。

如果您*未能*插入该行，那么您可以开始定期轮询该表 - 在任何看起来合适的时间间隔。

* * *

另一种选择是让表有一个自动编号 PK 列 - 当您想要获取信号量时，在表中插入一行。然后，查询该表以找到具有最低 PK 列值的行。如果该行是*您的*行，那么您现在拥有信号量。您仍然需要投票，但您实际上在此表中记录了“保留”。

与前一种情况一样，一旦您完成了受信号量保护的工作，您就可以从表中删除您的行。第二种方法应该“更公平”（因为每个进程都按照严格的请求顺序获得访问权限），但在实践中可能看起来更混乱。它确实依赖于*所有*进程保持“活动”。

# loops - SPSS：遍历变量的值

> ID：12662153
> 
> 赞同：0
> 
> 时间：2012-09-30T14:52:44.680
> 
> 标签：loops, spss

我有一个数据集，其中包含根据他们访问我们移动诊所的站点的患者数据。我现在已经编写了一系列命令，例如 freqs 和 crosstabs 来生成我需要的分析，但是我希望为每个站点的患者完成此操作，而不是整个数据集。如果我只有一个站点，那么仅仅一个带有指定患者站点的变量的过滤命令就足够了，但是我有 19 个站点，所以我想找到一种方法来循环我的代码以为每个站点生成这些输出。也就是说，对于 1 到 19 中的 i： 1\. 取第 i 个站点 2\. 计算第 i 个站点的过滤器 3\. 使用过滤后的第 i 个站点的患者数据运行表格

这是我第一次尝试使用 DO REPEA。我也尝试过使用 LOOP 早期。但是它不起作用，即使这些是闭环，我也会不断收到错误消息。有没有办法在 SPSS 语法中做到这一点？请记住，我不太了解 Python，无法使用该插件执行此操作。

```
*LOOP #ind= 1 TO 19 BY 1.
DO REPEAT #ind= 1 TO 20.
****8888888888888888888888888888888888888888888888888888888   Select the Site here.
COMPUTE filter_site=(RCDSITE=#ind).
USE ALL.
FILTER BY filter_site.
**********************Step 3: Apply the necessary code for tables

*********Participation in the wellness screening, we actually do not care about those who did FP as we are not reporting it.

COUNT BIO= CheckB (1).
 * COUNT FPS=CheckF(1).

 * COUNT BnF= CheckB CheckF(1).
  VAL LABEL BIO 
1 ' Has the Wellness screening'
0 'Does not have the wellness screening'.
*VAL LABEL FPS
1 'Has the First patient survey'.
 * VAL LABEL BnF
1 'Has either Wellness or FPS'
2 'Has both surveys done'.

FREQ BIO.

*************************Use simple math to calcuate those who only did the Wellness/First Patient survey FUB= F+B -FnB.
*******************************************************Executive Summary.

 ***********Blood Pressure.
FREQ BP.

*******************BMI.
FREQ BMI.

******************Waist Circumference.

FREQ OBESITY. 

******************Glucose.

FREQ GLUCOSE.

*******************Cholesterol.

FREQ TC.

************************ Heamoglobin.

FREQ HAEMOGLOBIN.

*********************HIV.

FREQ HIV.

******************************************************************************I Lifestyle and General Health.
MISSING VALUES Gender GroupDep B8 to B13 ('').
******************Graphs 3.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:58:06.447

这只是您正在生产的频率吗？通过变量 RCDSITE 尝试 SPLIT 过程。应该够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:19:07.597

SPLIT FILES 允许您按最多八个变量对数据进行分区。然后每个过程将自动迭代每个组。

如果您需要在比过程更高的级别上对结果进行分组，也就是说，在移动到下一个之前为每个组运行一堆过程，以便一个组的所有输出都在一起，您可以使用SPSSINC SPLIT DATASET 和 SPSSINC PROCESS 文件扩展命令来执行此操作。

这些命令需要 Python Essentials。如果您的版本至少为 18，则可以从 SPSS 社区网站 (www.ibm.com/developerworks/spssdevcentral) 下载该命令和命令。

HTH，乔恩·派克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T11:55:33.230

一个简单但可能不是很优雅的方法是从菜单中选择：数据/选择案例/如果条件，在那里输入站点 1 的过滤器并按粘贴，而不是确定。

这会将使用的过滤器作为语法代码提供。

因此，通过一些复制/粘贴/替换/重复，您可以获得基于不同站点的频率和所有其他结果。

# c++ - 文本框为空时 C++ Windows 窗体应用程序未处理的异常错误

> ID：12662155
> 
> 赞同：0
> 
> 时间：2012-09-30T14:52:46.270
> 
> 标签：c++, winforms, c++-cli

> **可能重复：**
> [文本框为空时 C++ Windows 窗体应用程序未处理异常错误](https://stackoverflow.com/questions/12662951/c-windows-forms-application-unhandled-exception-error-when-textbox-empty)

我正在 Visual Studio 中为 C++ 课程构建温度转换应用程序。这是一个 Windows 窗体应用程序，我编写的代码如下。当然还有其他代码，但我不确定你是否需要它来帮助我。

我的问题是，当我运行应用程序时，如果我没有在 txtFahrenheit 或 txtCelsius2 文本框中输入任何内容，我会收到以下错误：

“在 mscorlib.dll 中发生了“System.FormatException”类型的未处理异常”

只有在两个文本框中都输入了数字时，该应用程序才能立即运行。

```
private: System::Void btnFtoC_Click(System::Object^  sender, System::EventArgs^  e) 
             {               
                // Convert the input in the Fahrenheit textbox to a double datatype named fahrenheit for manipulation
                double fahrenheit = Convert::ToDouble(txtFahrenheit->Text);
                // Set the result string to F * (5/9) -32
                double result = fahrenheit * .5556 - 32;
                // Set the Celsius text box to display the result string
                txtCelsius->Text = result.ToString();
             }

private: System::Void btnCtoF_Click(System::Object^  sender, System::EventArgs^  e) 
             {
                // Convert the input in the Celsius textbox to a double datatype name celsius for manipulation
                double celsius = Convert::ToDouble(txtCelsius2->Text);
                // Set the result2 string to C * (9/5) + 32
                double result2 = celsius * 1.8 + 32;
                // Set the Fahrenheit text box to display the result2 string
                txtFahrenheit2->Text = result2.ToString();
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:57:07.943

您不能将空字符串转换为`Double`.

您应该使用`if`语句来代替执行其他操作。

# html - 在某些内容的顶部和底部创建边框

> ID：12662157
> 
> 赞同：1
> 
> 时间：2012-09-30T14:52:59.383
> 
> 标签：html, css

我正在尝试使用 CSS

```
 ---------------------
      SOME CONTENT HERE
    --------------------- 
```

所以我基本上想要的是边框位于内部任何内容的顶部和底部（最好是 <p></p>） 这是我正在使用的一些代码，但它绝对不起作用它的意思是。

```
padding: 5px 1px;
box-shadow: 0 2px 5px black,
    0 -2px 5px #800000,
    0 0 5px black,
    0 0 5px #800000; 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T15:07:57.423

你想要边框还是阴影？你的代码告诉我你想要一个阴影，你的问题问一个边界。如果边框：

```
border-top: 1px solid black;
border-bottom: 1px solid black; 
```

如果阴影：

```
-webkit-box-shadow: 0px 6px 2px -1px #000,  0px -6px 2px -1px #000;
box-shadow: 0px 6px 2px -1px #000,  0px -6px 2px -1px #000; 
```

示例：http: [//jsfiddle.net/pGGXH/69/](http://jsfiddle.net/pGGXH/69/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:01:48.057

您可以将以下代码用于顶部和底部边框

```
 border-top:1px dashed black;
  border-bottom:1px dashed black; 
```

对于阴影效果，请通过此**[链接](http://css-tricks.com/snippets/css/css-box-shadow/)**

sebass代码的一些修改

```
-webkit-box-shadow: 0px 1px 15px -1px #000,  0 -1px 15px -1px #000;
 box-shadow: 0px 1px 15px -1px #000,  0 -1px 15px -1px #000; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T14:58:13.360

如果你想要一个边框，那么你可以这样做。

```
.div {
    border-top: 1px solid black; 
    border-bottom: 1px solid black;
    width: 50px;
    height: 50px;
}​ 
```

演示 - [http://jsfiddle.net/9VCZU/](http://jsfiddle.net/9VCZU/)

# django - Django db.connection.cursor.fetchone() 返回意外结果

> ID：12662159
> 
> 赞同：0
> 
> 时间：2012-09-30T14:53:12.867
> 
> 标签：django, rawsql

我的models.py中有这个经理

```
class ItemManager(models.Manager):
 def get_fee(self):
 from django.db import connection
    cursor = connection.cursor()
    cursor.execute("""
        SELECT fee
        FROM item
        WHERE itemID = %d AND item.type = %d 
        """, [self.myItemID, self.myItemType])
    fee = cursor.fetchone()
    return fee 
```

和班级

```
Sample(models.Model):
sampleID = models.AutoField(primary_key=True)
itemID = models.ForeignKey(Item)
item.type  = models.ForeignKey(Item)
    ...

def save(self, *args, **kwargs):
    is_new = self.pk is None
    super(Sample, self).save(*args, **kwargs)
    if is_new:
        cd.amount = MonthlyFeeManager() 
        cd.save() 
```

然后它会产生一个错误：

```
Cannot convert <myapp.models.ItemManager object at 0xa6f07ec> to Decimal 
```

一般来说，我想在管理器中执行 RAW SQL 查询并使用它从查询中获取结果。我试图搜索，但大多数返回是元组，而不是一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:05:59.320

这不是你使用经理的方式。即使有一个完全正常的类实例，您的尝试也不会给您想要的东西：您需要实例化它并调用`get_fee()`实例。

使用管理器，您不需要实例化它，因为这已经作为`objects`模型上的属性为您完成了。但是你仍然需要调用相关的方法：

```
cd.amount = Sample.objects.get_fee() 
```

但是，这*仍然*行不通。那是因为您引用了`self.myItemId`and `self.myItemType`，它在 Manager 对象中不存在。这使我得出结论，您根本不需要 Manager 对象：您只需要标准模型方法。而且也不需要原始 SQL：您的代码可以使用正常的模型查询语法完全轻松地表达。

（我无法准确地向您展示它的外观，因为您示例中的 ForeignKeys 没有任何意义，并且不清楚`fee`应该从哪里来。）

# android - GLSurfaceView onResume - 选项卡式应用程序创建上下文

> ID：12662164
> 
> 赞同：1
> 
> 时间：2012-09-30T14:53:43.993
> 
> 标签：android, opengl-es, glsurfaceview

我有一个使用`GLSurfaceView`. 如果我第一次使用选项卡，则会创建并显示视图。如果我点击它两次，表面正在被破坏，但不是新创建的。方法`onStop()`和`onResume()`被调用。如果我按下主页按钮，表面就会被破坏。当我再次打开应用程序时，正在创建一个新的表面。

`eglContext`我现在的问题是：当我想第二次显示视图时，为什么没有创建蜜蜂？为什么没有新的`GLThread`创造？或者我怎样才能强制重新创建`EGLSurface`and `GLThread`？在我的三星 Galaxy mini 上它不起作用。在我的三星 Galaxy SII 上它可以工作。我用谷歌搜索了这个问题，发现了一个错误`GLSurfaceView`，但没有有效的修复。

感谢您提供一些有用的答案，请原谅我的英语:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T10:36:43.160

你拿到了`IllegalArgumentException`吗？

```
10-08 18:05:36.490: E/GLSurfaceView(3440): eglCreateWindowSurface
10-08 18:05:36.490: E/GLSurfaceView(3440): java.lang.IllegalArgumentException: Make sure the SurfaceView or associated SurfaceHolder has a valid Surface
10-08 18:05:36.490: E/GLSurfaceView(3440): at com.google.android.gles_jni.EGLImpl._eglCreateWindowSurface(Native Method)
10-08 18:05:36.490: E/GLSurfaceView(3440): at com.google.android.gles_jni.EGLImpl.eglCreateWindowSurface(EGLImpl.java:90)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$DefaultWindowSurfaceFactory.createWindowSurface(GLSurfaceView.java:798)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$EglHelper.createSurface(GLSurfaceView.java:1065)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1433)
10-08 18:05:36.490: E/GLSurfaceView(3440): at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216) 
```

如果是，你应该修补你的`GLSurfaceView`.

从：

```
 if (createEglSurface) {
                    if (LOG_SURFACE) {
                        Log.w("GLThread", "egl createSurface");
                    }
                    gl = (GL10) mEglHelper.createSurface(getHolder());
                    if (gl == null) {
                        // Couldn't create a surface. Quit quietly.
                        break;
                    }
                    sGLThreadManager.checkGLDriver(gl);
                    createEglSurface = false;
                } 
```

至：

```
 if (createEglSurface) {
                    if (LOG_SURFACE) {
                        Log.w("GLThread", "egl createSurface");
                    }
                    gl = (GL10) mEglHelper.createSurface(getHolder());
                    if (gl == null) {
                        // If we escape, GLThread ends up. Don't escape.
                        continue;
                    }
                    sGLThreadManager.checkGLDriver(gl);
                    createEglSurface = false;
                } 
```

我创建了我的[GLSurfaceView 类](https://gist.github.com/3890965)并像上面一样修补它。

它已在 JellyBean 中修复。另请参阅此[提交](https://github.com/android/platform_frameworks_base/commit/7d73df83f9a28950f404e957eb2e4ea1e8525c55)。

# java - 使多类 jar 更容易

> ID：12662165
> 
> 赞同：0
> 
> 时间：2012-09-30T14:53:47.683
> 
> 标签：java, jar, compilation

我正在开发一个项目，其中包含大量要编译到 jar 中的类。我知道入口点和 manifest.txt 以及我的 jar 中所有需要的项目，我的类都已编译并具有 .class 文件和所有内容，但问题是我必须将所有类文件添加到最终jar 通过命令提示符中的一行进行编译。我想知道并偶然发现互联网上没有任何东西是否可以以更简单的方式完成，因为我将不断更新我的工作，并且必须重新编译和重新编译我的工作。我听说过可以解决问题的第三方程序，但是某些网站上有人说它们可能会导致问题和其他东西，所以我很快就放弃了这个想法。既然我处于一个非常紧张的境地，我想听听对此的意见和建议。所以总结一下：

*   我想要一种在单个 jar 中编译一大堆 .class 文件的方法，而无需在编译之间一遍又一遍地键入所有这些文件，从而节省时间和挫败感。

*   如果甚至可以做到这一点，我会更喜欢本机的东西——例如，JDK 的 jar 编译器而不是任何第三方。如果有办法在编译时参数中使用清单或任何其他文件来做到这一点，让我听听。

*   任何愿意建议、讨论或给我一个充分理由为什么要使用或不使用第三方应用程序的人都将受到欢迎。
*   请记住，我在 Windows 上工作，但我的应用程序将是跨平台的，因此不要建议将某些编译解决方案作为主要选项，这些解决方案将生成带有 .exe 扩展名的最终文件（尽管如果有人知道如何做到这一点，我想在评论中听到它，因为我也想知道这一点）。

在此先感谢您，如果您觉得有必要问我什么来帮助您回复，请开枪！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T14:58:46.233

看看这个 ant 教程，它展示了如何编写一个可以编译和 jar 的简单 build.xml。

[http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html](http://ant.apache.org/manual/tutorial-HelloWorldWithAnt.html)

然后，您可以根据自己的需要对其进行调整。

注意：ant 只适用于像你这样的小型项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T14:59:07.150

解决此问题以及相关问题的方法是停止在命令行输入并使用构建工具。这里用于 Java 构建的常用工具是：

*   阿帕奇蚂蚁[http://ant.apache.org](http://ant.apache.org)
*   阿帕奇 Maven [http://maven.apache.org](http://maven.apache.org)

还有其他不太常见的。这两种工具都会为您提供所需的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T12:37:17.070

只是想添加一些关于 Ant 和 Maven 的信息。

在您的情况下，您需要自动构建应用程序。基本的解决方案是某种脚本，但根本没有使用。存在更好的解决方案：

如果您从脚本来自动化构建的想法，您可以使用像 Ant 这样的工具，它有点像 C 世界中的 make 和此类工具，您可以在配置文件中定义构建所需的任务。这种解决方案的问题在于它允许您为构建定义自己的结构，并且项目的新成员可能难以理解构建的逻辑。

另一种方法是描述你想要做什么样的构建，组织你的源和资源，就像在大多数情况下所做的那样（实际上是遵循一个约定）。例如，java 源在 src/main/java，测试在 src/test/java，配置文件在 src/main/resources，等等。在您的构建描述中，您只会说：这是一个 java 项目，我想构建一个 War web 应用程序并使用 jUnit 4 执行我的测试。我的项目的依赖项是 apache xerces 和 hibernate 4。然后，该工具将不需要说怎么做就知道该做什么。这是maven的做法。

简而言之，在 Ant 方法中，您将说明如何做您想做的事情，而在 Maven 方法中，您将定义您想要做什么，并且该工具默认知道如何做。

您可能还对某种混合方法感兴趣，例如 Gradle 等工具提供的方法。

了解更多信息 ：

*   [http://ant.apache.org/](http://ant.apache.org/)
*   [http://maven.apache.org/](http://maven.apache.org/)
*   [http://www.gradle.org/](http://www.gradle.org/)

希望能帮助到你

# json - Spring Roo AJAX POST：“java.lang.Integer 无法转换为 java.util.Map”

> ID：12662167
> 
> 赞同：0
> 
> 时间：2012-09-30T14:53:53.663
> 
> 标签：json, post, spring-roo

我有一个标准 Spring Roo 项目，我正在尝试将其用作数据库的 REST API，使用 Web MVC 和自动生成的 JSON 控制器。我正在尝试发送 POST 请求以通过表单数据或 JSON（最好是 JSON）创建对象，但我收到了相当奇怪的行为。

我的分层实体有一个可选的对自身作为父级的引用。它看起来像这样：

```
public class LandType {
    private String name;
    private String description;

    @ManyToOne
    private LandType parent;

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "parent")
    private Set<LandType> children = new HashSet<LandType>();

    @ManyToMany(cascade = CascadeType.ALL)
    private Set<Param> params = new HashSet<Param>();
} 
```

当我尝试通过*没有*父值的 JSON POST 请求（只有名称和描述）创建新实例时，它可以工作。当我尝试*使用*父值创建它时（我使用父 ID 作为整数，因为这就是股票 Roo 表单所做的），我收到 Spring 错误：

```
java.lang.Integer cannot be cast to java.util.Map 
```

我不知道它在尝试将任何东西转换为地图时在做什么，并且使用调试器进行跟踪是没有意义的。它通过控制器进入 fromJsonToLandType，然后尝试反序列化并最终抛出异常：

```
flexjson.factories.BeanObjectFactory.instantiate(BeanObjectFactory.java:17)
flexjson.ObjectBinder.bind(ObjectBinder.java:86)
flexjson.ObjectBinder.bindIntoObject(ObjectBinder.java:139)
flexjson.factories.ClassLocatorObjectFactory.instantiate(ClassLocatorObjectFactory.java:38)
flexjson.ObjectBinder.bind(ObjectBinder.java:86)
flexjson.ObjectBinder.bind(ObjectBinder.java:65)
flexjson.JSONDeserializer.deserialize(JSONDeserializer.java:158)
... 
```

当我尝试将参数数组作为 {..., 'params': [10, 11]} 传递时，也会发生同样的事情。似乎 Spring Roo 不太知道如何处理非原始类型的 JSON 输入，*或者*我不知道以什么格式提供它们。我在这里做错了什么？

**编辑**

我主要是用 curl 来测试这个以准确控制输入的内容。一个示例调用是：

```
> curl -i -X POST -H "Content-type: application/json" -d "{'name':'test', 'description': 'test', 'parent': 8}" http://localhost:8080/mutopia-server/landtypes 
```

... 其中 8 是现有 LandType 的 ID，并且再次删除`parent`使其工作。奇怪的是，我已经通过标准 Roo 控制器（`-H "Content-type: application/json"`用 `-H "Accept: text/html"`添加`Accept: application/json`也无济于事，因为此时调用了 JSON 控制器，但内部正在发生一些奇怪的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:30:04.440

所以原因是 Flexjson（反序列化器）需要一个集合（或 JSON 数组）或 Param 对象（以 JSON 对象形式），但它却找到了一个整数数组。由于 Flexjson 对 Spring 或 Roo 一无所知，因此它不会将整数识别为 ID，并使用适当的 Finder 来查找它们，就像我天真希望的那样。

解决方案似乎是*在*调用`JSONDeserializer.deserialize()`. 也许有一天这可能会成为`@RooJson`插件的一项功能（[相关问题](https://jira.springsource.org/browse/ROO-2716#comment-84142)），但还没有。

# mongodb - 如何规范化/减少 mongoDB 中的时间数据？

> ID：12662169
> 
> 赞同：3
> 
> 时间：2012-09-30T14:54:12.893
> 
> 标签：mongodb, mapreduce

我在 MongoDB 中存储了详细的性能数据，每个集合都是一种性能报告，每个文档都是阵列上端口在该时间点的测量值：

```
{
  "DateTime" : ISODate("2012-09-28T15:51:03.671Z"),
  "array_serial" : "12345",
  "Port Name" : "CL1-A",
  "metric" : 104.2
} 
```

每个“array_serial”最多可以有 128 个不同的“端口名称”条目。

随着数据的老化，我希望能够在越来越长的时间跨度内对其进行平均：

*   最多 1 周：分钟
*   1 周至 1 个月：5 分钟
*   1 - 3 个月：15 分钟

等等。这是我平均时间的方法，以便减少它们：

```
var resolution = 5; // How many minutes to average over     
var map = function(){
        var coeff = 1000 * 60 * resolution;
        var roundTime = new Date(Math.round(this.DateTime.getTime() / coeff) * coeff);
        emit(roundTime, { value : this.metric, count: 1 } );
 }; 
```

我将对 reduce 函数中的值和计数求和，并在 finalize 函数中获得平均值。

正如您所看到的，这将在省略“端口名称”值的时间内平均数据，并且我需要对每个“array_serial”上的每个“端口名称”随时间平均这些值。

那么如何在上面的 map 函数中包含端口名称呢？发射的键是否应该是我稍后拆分的复合“array_serial，PortName，DateTime”值？或者我应该使用查询功能来查询每个不同的串行、端口和时间？我是否正确地将这些数据存储在数据库中？

另外，据我所知，这些数据被保存到它自己的集合中，用这个平均数据替换集合中的数据的标准做法是什么？

* * *

这就是你的意思阿莎吗？因为它没有将四舍五入到下 5 分钟的文档分组（顺便说一句，我将 'DateTime' 更改为 'datetime'）：

```
 $project: {
                "year" : { $year : "$datetime" },
                "month" : { $month : "$datetime" },
                "day" : { $dayOfMonth : "$datetime" },
                "hour" : { $hour : "$datetime" },
                "minute" : { $mod : [ {$minute : "$datetime"}, 5] },
                array_serial: 1,
                port_name: 1,
                port_number: 2,
                metric: 1
} 
```

据我所知，“$mod”运算符将返回分钟的剩余部分除以五，对吗？

如果我可以让聚合框架而不是 mapreduce 来执行此操作，这将真的对我有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T20:26:46.873

以下是在聚合框架中如何做到这一点。我正在使用一个小的简化——我只对年、月和日期进行分组——在你的情况下，你需要添加小时和分钟来进行更细粒度的计算。如果您获得的数据样本中的点分布不均匀，您还可以选择是否进行加权平均。

```
project={"$project" : {
        "year" : {
            "$year" : "$DateTime"
        },
        "month" : {
            "$month" : "$DateTime"
        },
        "day" : {
            "$dayOfWeek" : "$DateTime"
        },
        "array_serial" : 1,
        "Port Name" : 1,
        "metric" : 1
    }
};
group={"$group" : {
        "_id" : {
            "a" : "$array_serial",
            "P" : "$Port Name",
            "y" : "$year",
            "m" : "$month",
                    "d" : "$day"
        },
        "avgMetric" : {
            "$avg" : "$metric"
        }
    }
};

db.metrics.aggregate([project, group]).result 
```

我用一些随机样本数据运行它并得到了这种格式的东西：

```
[
    {
        "_id" : {
            "a" : "12345",
            "P" : "CL1-B",
            "y" : 2012,
            "m" : 9,
            "d" : 6
        },
        "avgMetric" : 100.8
    },
    {
        "_id" : {
            "a" : "12345",
            "P" : "CL1-B",
            "y" : 2012,
            "m" : 9,
            "d" : 7
        },
        "avgMetric" : 98
    },
    {
        "_id" : {
            "a" : "12345",
            "P" : "CL1-A",
            "y" : 2012,
            "m" : 9,
            "d" : 6
        },
        "avgMetric" : 105
    }
] 
```

如您所见，这是每个 array_serial、端口名称、年/月/日组合的一个结果。您可以使用 $sort 将它们放入您想要从那里处理它们的顺序。

以下是您如何扩展项目步骤以包括小时和分钟，同时将分钟四舍五入以平均每五分钟：

```
{
    "$project" : {
        "year" : {
            "$year" : "$DateTime"
        },
        "month" : {
            "$month" : "$DateTime"
        },
        "day" : {
            "$dayOfWeek" : "$DateTime"
        },
        "hour" : {
            "$hour" : "$DateTime"
        },
        "fmin" : {
            "$subtract" : [
                {
                    "$minute" : "$DateTime"
                },
                {
                    "$mod" : [
                        {
                            "$minute" : "$DateTime"
                        },
                        5
                    ]
                }
            ]
        },
        "array_serial" : 1,
        "Port Name" : 1,
        "metric" : 1
    }
} 
```

希望您能够将其扩展到您的特定数据和要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:33:38.310

“用这个平均数据替换集合中的数据的标准做法是什么？”

标准做法是保留原始数据并单独存储所有派生数据。

在您的情况下，这意味着：

*   不要删除原始数据
*   使用另一个集合（在同一个 MongoDB 数据库中）来存储平均值

# java - 如何从 ImageView 获取图像 ID？

> ID：12662170
> 
> 赞同：0
> 
> 时间：2012-09-30T14:54:12.900
> 
> 标签：java, android

有这样的代码：

```
case R.id.button:
int id=randImage();
imgView1.setImageResource(id);
public int randImage() {
Random rand= new Random();
int randomNumber=rand.nextInt(24)+1;
String randomImage="img"+randomNumber;
int id = getResources().getIdentifier(randomImage, "drawable", getPackageName());
return id;

}
case R.id.imgView1:
Intent i= new Intent(); 
i.putExtra("imgId", id); //IS UNREACHABLE 
```

设置后如何获得可绘制的ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:30:51.320

不确定设置后是否可以恢复，但是可以将标签与组件关联：

```
int id = randImage();
imgView1.setImageResource(id);
imgView1.setTag(id); 
```

当您需要获取 id 时，您只需：

```
int id = imgView1.getTag(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:16:32.577

先保存：

```
int Id=randImage();
imgView1.setImageResource(Id); 
```

# jquery - 当用户选择“正确”值时产生错误 div .fadeOut

> ID：12662171
> 
> 赞同：-1
> 
> 时间：2012-09-30T14:54:13.820
> 
> 标签：jquery

我几乎完成了一个模型，我需要一个小技巧来解决这个问题：

```
<form>
    <div class="line">
        <label>Embarque:</label>
        <select>
        <option value="first">Selecione a Estação</option>
            <option value="second" >Trianon-Masp | Linha 2 - Verde</option>
        </select>
        <div class="error">Selecione a estação de embarque</div>
    </div><!-- end line -->
</form> 
```

当用户选择第二个选项时，.error 将 fadeOut(); 有人知道如何滚动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T14:56:25.007

给标签一个`id`。`<select>`

```
<select id="lineSelect"> 
```

用这个：

```
$("select#lineSelect").change(function(){
    if ($(this).val() == "correct")
        $(".error").fadeOut();
}); 
```

或者，您可以使用：

```
$(".line select").change(function(){
    if ($(this).val() == "correct")
        $(".error").fadeOut();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T14:58:17.280

当然：

```
$('div.line select').on('change', function() {
    if (this.value == this.options[1].value) {
        $(this).next('div.error').hide('slow');
    }
}); 
```

[jsFiddle 示例在这里](http://jsfiddle.net/3ENWw/)

# jsp - <%@ page pageEncoding="UTF-8"%> 从另一个 jsp 包含时被忽略

> ID：12662172
> 
> 赞同：13
> 
> 时间：2012-09-30T14:54:21.463
> 
> 标签：jsp, encoding, include, tomcat7, jsp-tags

我有代码（现在在[github](https://github.com/Utumno/ted2012/tree/GitHub2/WebContent/WEB-INF/jsp/include)中），例如：

**my.jsp**（一个通用的 jsp——我所有的 jspS 或多或少都遵循这个模式）**：**

```
<%@ include file="include/top.jsp" %>
<title>THE TITLE</title>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ include file="include/head.jsp" %>
<%@ include file="include/no_menu.jsp" %>
CONTENT
<%@ include file="include/bottom.jsp" %> 
```

在哪里 ：

**顶部.jsp：**

```
<%@ page session="false"%>
<%@ include file="tag_libs.jsp"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

**头.jsp：**

```
<link href="${pageContext.request.contextPath}/css/twoColFixLtHdr.css" rel="stylesheet" type="text/css" />
</head>
<body>
    <div class="container"><!-- closes in bottom -->
        <div class="header"><!-- closes in menu -->
            <p>
                <a href="home"> <img src="${pageContext.request.contextPath}/images/logo7.jpg"
                    alt="Ted 2012 Logo" name="Ted 2012 Logo" id="Ted_2012_Logo"
                    style="background: display:block; padding: 5px 20px; margin-left: 150px; border-style: solid" /></a>
            </p>
            <hr /> 
```

**no_menu.jsp：**

```
</div>
<div class="content"> 
```

**底部.jsp：**

```
 </div>
        <div class="footer">
            <p>
                blah
            </p>
        </div>
    </div>
</body>
</html> 
```

如您所见-或者您可以相信我的话-标签正确平衡。我的问题是 -*为什么我不能包括*

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%> 
```

*`top.jsp`我的文件中的指令*？相信我，它什么也没做。*我应该担心`<%@ page session="false"%>`同样被忽略*吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-30T15:58:01.760

您不需要将`@page`指令放在每个包含的 JSP 文件中。严格来说，它们不是 JSP，它们是包含在 JSP中的*文本文件。*`@include`相当于将包含页面中的文本剪切并粘贴到主 JSP 中。这就像`#include`C 中的指令。

请尝试将其放在主 JSP 文件`<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>`的*第一*行（即包含其他文件的那个），并且不要将它放在其他任何地方。
希望能帮助到你。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-08-24T15:53:17.060

**在 HTTP 标头中设置 Content-Type**

这是为单个页面设置 Content-Type 的最佳方式，因为它在 Precedence Rules 列表中最高。托管您的 FeedSweep 小部件的网页的 HTTP 标头值可以使用以下任何一种服务器端脚本语言设置：

**。网**

内容类型和字符集在响应对象上设置。要设置字符集，请使用：

*   Response.ContentType = "文本/html; charset=UTF-8";

**Perl**

在实际页面的任何部分之前输出正确的标题。在最后一个标题之后，使用双换行符。

*   print "Content-Type: text/html; charset=utf-8\n\n";

**Python**

使用与 Perl 相同的解决方案（除了最后不需要分号）。

*   print "内容类型: text/html; charset=utf-8\n\n"

**PHP**

在生成任何内容之前使用 header() 函数。

*   header('内容类型: text/html; charset=utf-8');

**Java 小服务程序**

在获取用于输出的任何对象（Stream 或 Writer）之前，在 ServletResponse 上使用 setContentType 方法。

*   resource.setContentType("text/html;charset=utf-8");

如果您使用 Writer，Servlet 会自动处理从 Java 字符串到所选编码的转换。

**JSP**

使用页面指令：

*   <%@ page contenttype="text/html; charset=UTF-8"%>

out.println() 或表达式元素 (<%= object%>) 的输出会自动转换为所选编码。此外，页面本身被解释为处于这种编码中。

**ASP**

内容类型和字符集在响应对象上设置。要设置字符集，请使用：

*   <%Response.charset="utf-8"%>

# wpf - ViewModels 成员未在 Command 上更新

> ID：12662175
> 
> 赞同：2
> 
> 时间：2012-09-30T14:55:13.023
> 
> 标签：wpf, mvvm-light

我正在使用 MVVM 灯光工具包来处理按钮单击。如果我做：

```
CustomerSaveCommand = new RelayCommand(
    () => CustomerSave(),
    ()=> true);

private void CustomerSave() {
    customer.Address="My Street";
} 
```

该函数被调用，但 UI 中绑定的地址字段未更新。

如果我放入`customer.Address="1234"`ViewModel 构造函数，则 UI 会更新。我究竟做错了什么？

编辑：

问题真的很奇怪：如果我`viewModel.customer.City = "CITY1"`在窗口加载它运行，如果我添加一个按钮，并且在代码隐藏点击中，我添加`viewModel.customer.City = "CITY2"`它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:00:24.500

viewmodel 中的客户对象需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口。

然后在地址属性设置器中，您将调用 PropertyChanged 事件。

或者，您的 viewModel 可以实现 INotifyPropertyChanged 接口，并且可以包装 Address 属性并调用 PropertyChanged 事件。您必须更新绑定，但您的模型对象不必实现任何接口。

您在构造函数中修改对象时看到显示地址的原因是因为尚未发生绑定。为了更新 UI，您需要指示绑定引擎属性绑定已更改。为此，您使用 INotifyPropertyChanged 接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T14:57:56.527

尝试这样的事情：

```
 public class AutoDelegateCommand : RelayCommand, ICommand
{
    public AutoDelegateCommand(Action<object> execute)
        : base(execute)
    {
    }

    public AutoDelegateCommand(Action<object> execute, Predicate<object> canExecute)
        : base(execute, canExecute)
    {
    }

    event EventHandler ICommand.CanExecuteChanged
    {
        add { CommandManager.RequerySuggested += value; }
        remove { CommandManager.RequerySuggested -= value; }
    }
} 
```

# javascript - 浏览器自动滚动到窗体

> ID：12662179
> 
> 赞同：0
> 
> 时间：2012-09-30T14:56:19.543
> 
> 标签：javascript, jquery, html, css

我设计了一个包含大量内容的单页主页，其中底部实现了一个联系表单（请参阅[http://neu.logopaedie-scheithauer.de/](http://neu.logopaedie-scheithauer.de/)）。第一次打开页面时，大多数浏览器（IE、FF、Safari）会向下滚动到联系表单的第一个字段，这可能是由于自动对焦。

这种不受欢迎的行为会导致糟糕的用户体验，因为用户希望从上到下阅读页面。但是，我不知道如何阻止它。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T14:59:01.153

这是因为该`runonload`功能，只需删除代码即可解决问题。让我们知道它是否已修复。只需从文件中删除此代码`contactform.js`：

```
runOnLoad(function(){
    $("input#name").select().focus();
}); 
```

# iphone - 如何以正确的比例从 iOS AVAudioRecorder 读取分贝？

> ID：12662183
> 
> 赞同：11
> 
> 时间：2012-09-30T14:56:44.457
> 
> 标签：iphone, audio, avaudiorecorder, decibel

我正在尝试使用 AVAudioRecorder 在我的 iOS 应用程序中获取噪音级别。

我正在使用的代码是：

```
 [self.recorder updateMeters];
    float decibels = [self.recorder averagePowerForChannel:0]; 
    // 160+db here, to scale it from 0 to 160, not -160 to 0\. 
    decibels = 160+decibels; 
    NSLog(@"Decibels: %.3f", decibels); 
```

当电话放在我的桌子上时，我得到的读数约为 90-100dB。

我检查了[这个链接](http://www.physicsclassroom.com/class/sound/u11l2b.cfm)，我在那里看到的表格显示：

吸尘器 - 80dB
大型管弦乐队 - 最大音量 98dB
随身听 - 100dB
摇滚音乐会前排 - 110dB

现在，尽管我的办公室看起来很吵，但它不在最大级别的随身听附近。

我应该在这里做些什么来获得正确的读数吗？看来我的 iPhone 的麦克风非常敏感。这是一部 iPhone4S，如果它有所作为的话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T09:29:11.747

忘记我之前的回答。我想出了一个更好的解决方案（如果我错了，请纠正我）。我认为我们俩都想要达到的是分贝声压级，但 averagePowerChannel 方法为我们提供了麦克风的输出电压。分贝 SPL 是表示比率的对数单位。我们需要将该输出转换为分贝 SPL，这并不容易，因为您需要参考值。换句话说，您需要一个 DB SPL 值和相应的电压值。您还可以尝试通过将结果与分贝 Ultra 等应用程序进行比较来估算它们。直截了当：您需要的公式如下：

```
SPL = 20 * log10(referenceLevel * powf(10, (averagePowerForChannel/20)) * range) + offset; 
```

您可以将 referenceLevel 设置为 5。这在我的 iPhone 上给了我很好的结果。averagePowerForChannel 是您从方法 averagePowerForChannel: 方法获得的值，range 表示范围的上限。我将其设置为 160。最后，偏移量是您可以添加以进入所需区域的偏移量。我在这里加了 50 个。

不过，如果有人对此有更好的解决方案。那会很好！

# php - PHP：检查电子邮件是否包含“@”和“。”

> ID：12662186
> 
> 赞同：2
> 
> 时间：2012-09-30T14:56:54.677
> 
> 标签：php, if-statement

我是 php 新手，这应该很容易制作，但我现在不知道。我想检查 $address 是否有字符“@”和“。”

```
<?php 
    function testEmail($address){
        $a = strpos("/@/", $address);
        $b = strpos("/./", $address);
        if (($a != false) && ($b != false)) {
            echo "Email is OK";
        } else {
            echo "Email is NOT OK";
        }
    }
    testEmail("testmail@gmail.com");
?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T15:00:26.887

您可以简单地使用 filter_var 来检查电子邮件的有效性。

```
$email = 'gaurang@gmail.com'
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
// Email correct
}
else {
//Email not correct
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:02:58.027

您对这段特定的代码有疑问吗？那么@wroniasty 的回答是正确的。但是你真的不想使用正则表达式来测试电子邮件的有效性，除非你想使用像[这样](http://www.regular-expressions.info/email.html)的怪物。

但是，如果您的问题确实是*“我如何验证电子邮件地址？”* ，然后看看[`filter_var()`](http://php.net/manual/en/function.filter-var.php)。

您可以将 filter 传递给它[`FILTER_VALIDATE_EMAIL`](http://php.net/manual/en/filter.filters.validate.php)，因此它将验证电子邮件地址是否会捕获相当多的边缘情况。

您可以使用以下代码检查地址：

```
if (filter_var($email_address, FILTER_VALIDATE_EMAIL)) {
    // valid email
} else {
    // invalid email
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T14:59:34.833

```
<?php
function testEmail($address) {
    if (preg_match ( "/\.|@/", $address)) 
       echo "Email OK";
    else
       echo "Email not OK";
}
?>

a better way to check for valid email address:

<?
function isValidEmail($email){
return preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/", $email);
}
?> 
```

# xml - XML 模式中的多重赋值

> ID：12662187
> 
> 赞同：0
> 
> 时间：2012-09-30T14:56:59.983
> 
> 标签：xml, syntax, relaxng

有没有办法在 Relax NG compact 中编写如下标记（似乎它在 Relax NG XML 中没有对应项）

```
bar = foo =  element title {text} 
```

将来有人可能想为 bar 和 foo 分配不同的值，但在那之前他想使用上面的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T16:43:21.200

采用

```
bar = foo
foo = element title {text} 
```

另请参阅RELAX NG Compact Syntax Tutorial 中的[Named Patterns](http://relaxng.org/compact-tutorial-20030326.html#id2814516)条目，它讨论了这个确切的语法：

```
start = e
e = element element { text } 
```

# asp.net - 使用 c# 凭据连接到 Visual Studio 2010 中的数据库

> ID：12662190
> 
> 赞同：0
> 
> 时间：2012-09-30T14:57:07.437
> 
> 标签：asp.net

我对 c# asp.net 等还是很陌生，所以请耐心等待:) 我一直在互联网上寻找正确的语法，以便可以连接到计算机上的数据库。

我试过这个：

```
 SqlConnection myConnection = new SqlConnection("server=localhost;" +
                                               "Trusted_Connection=yes;" +
                                               "database=mmcinfo.mdf;"); 
```

但我在 myConnection.Open(); 上得到一个错误；说：

> SqlException is unhandled by user code 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）

我知道我在调用正确的数据库/服务器等方面做错了，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:06:32.027

您使用的是 SQL Express 吗？如果是这样，连接字符串可能需要是 localhost\sqlexpress

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:06:33.913

尝试`.mdf`从连接字符串中删除

```
 SqlConnection myConnection = new SqlConnection("server=localhost;" +
                                           "Trusted_Connection=yes;" +
                                           "database=mmcinfo;"); 
```

您还可以使用探索的服务器来获取/验证正确的连接

## 更新

```
SqlConnection myConnection = new SqlConnection(@"Data Source=./SQLEXPRESS;
            AttachDbFilename=C:\Users\Tim\Documents\Visual Studio 2010\Projects\WebApplication2\WebApplication2\App_Data\mmcinfo.mdf;
            Integrated Security=True;Connect Timeout=30;User Instance=True"); 
```

或者更好的可移植性，因为 db 文件位于您的 Web 应用程序文件夹中

```
SqlConnection myConnection = new SqlConnection(@"Data Source=./SQLEXPRESS;
            AttachDbFilename=|DataDirectory|\mmcinfo.mdf;
            Integrated Security=True;Connect Timeout=30;User Instance=True"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:08:06.823

在任何地方创建一个 .udl 扩展名文件并双击它，按照向导连接到您的数据库。完成后，将文件拖到记事本复制并将连接字符串粘贴到您的程序上。答对了

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:21:41.187

好的，几周后我发现它不是连接字符串，正如你们中的许多人所建议的那样。sql server 好像是windows 上的用户，需要权限才能访问文件。在我的情况下，这些设置不正确..

# spring-data - Spring Data MongoTemplate 不抛出 DataAccessException

> ID：12662193
> 
> 赞同：1
> 
> 时间：2012-09-30T14:57:42.677
> 
> 标签：spring-data

我正在尝试学习 MongoDB，同时使用 Spring 框架编写一个简单的 REST 应用程序。

我有一个简单的模型：

```
@Document
public class Permission extends documentBase{

@Indexed(unique = true)
private String name;

public   Permission(String name) {
    this.name = name;       
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}
} 
```

然后我有一个简单的 DAO：

```
@Repository
@Transactional 
@Profile({"production","repositoryTest","mongoIntegrationTest"})
public class DaoImpl   implements DAO  {

@Autowired
protected MongoTemplate mongoTemplate;

public <T> T addObject(T object) {               
     mongoTemplate.insert(object);        
     return object; 
} 
```

我有我的集成测试：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:mvc-dispatcher-servlet.xml", classpath:IntegrationContext.xml"},loader = TestXmlContextLoader.class)
@ActiveProfiles("mongoIntegrationTest")
public class RepositoryIntegrationTest extends AccountTestBase{

    @Autowired DAO repository;
    @Autowired WebApplicationContext wac;

    @Test
public void AddPermission() { 
    Permission permission_1 = new Permission("test");           
    Permission permission_2 = new Permission("test");           
    repository.addObject(permission_1);
    repository.addObject(permission_2);
}
} 
```

我的配置：

```
 <!-- MongoDB host -->
 <mongo:mongo host="${mongo.host.name}" port="${mongo.host.port}"/> 

 <!-- Template for performing MongoDB operations -->
 <bean id="mongoTemplate" class="org.springframework.data.mongodb.core.MongoTemplate" 
c:mongo-ref="mongo" c:databaseName="${mongo.db.name}"/> 
```

我预计，在添加“permission_2”时，它们将是从 MongoDB 抛出的异常，该异常将由 Spring 翻译，并在 DAO 中作为 DataAccessException 捕获。

查看来自 MongoDb 的日志文件，我可以看到引发了重复的异常，但它从未到达我的 DAO。

所以，我想我做错了什么，，但此刻，我对自己的错误视而不见。

//lg

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:33:40.730

确保将`WriteConcern`的配置`MongoTemplate`为非默认值（例如`WriteConcern.SAFE`）。默认情况下，MongoDB 处于即发即弃模式，通常不会在索引违规或服务器错误时引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T17:51:34.500

仍在为此苦苦挣扎。最后我成功地让例外翻译工作。MongoDb 抛出一个异常，该异常被转换为 Spring Data 异常。

现在我遇到了另一个问题。

上面显示的我的 DAO 也有以下代码：

```
 @ExceptionHandler(DataAccessException.class)
     public void handleDataAccessException(DataAccessException ex) {
            // For debug only
                            DataAccessException test = ex;
            test.printStackTrace();

      } 
```

我希望这段代码能够捕获抛出的异常，但事实并非如此。

为什么不？

//lasse

# extjs - extjs 添加项目以存储在控制器中

> ID：12662198
> 
> 赞同：0
> 
> 时间：2012-09-30T14:58:12.937
> 
> 标签：extjs, extjs4

在我的控制器中，我有。

```
 'panel > button':{
                    click:function(){
                        console.log('button clicked')

                        var view = Ext.ComponentQuery.query('#alexPanel')[0];

                        var modelItem = view.getPostValue() // i get the data from the form
                        //here i would like to update my store with a new item
                    }
                } 
```

谢谢你们帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:25:48.357

应该很简单：

```
getXXXStore().add(modelItem); 
```

其中 XXX 是控制器`stores`属性中配置的商店名称。

# c# - backgroundWorker_RunWorkerCompleted 在后面的代码中如何重复backgroundWorker_DoWork？

> ID：12662217
> 
> 赞同：0
> 
> 时间：2012-09-30T15:00:38.253
> 
> 标签：c#, visual-studio-2010, .net-4.0, backgroundworker, windows-applications

有一个如下所示的按钮：

```
 private void btnStartAdventure_Click(object sender, EventArgs e)
    {
        if (backgroundWorker5.IsBusy)
        {
            btnStartAdventures.Enabled = false;
            lblStatusValueInAdventures.Text = "Canceling...";
            backgroundWorker5.CancelAsync();
        }
        else
        {
            txtLogInAdventures.Text = string.Empty;
            btnStartAdventures.Text = "Cancel";
            lblUsersDoneCountValueInAdventures.Text = "---";
            lblStatusValueInAdventures.Text = "Running...";

            backgroundWorker5.RunWorkerAsync();
        }
    } 
```

我想在工作`btnStartAdventure_Click`后再次打电话给活动`backgroundWorker_RunWorkerCompleted`！
所以会有一个永远不会结束的循环。
我放：

```
Thread.Sleep(3600000); 
```

在结束时`backgroundWorker_RunWorkerCompleted()`。
现在我应该使用什么代码`btnStartAdventure_Click`再次调用？
Timer 是否适合我的目的？
我怎样才能通过做这项工作来防止挂起和崩溃？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:08:26.993

要以编程方式触发`btnStartAdventure_Click`事件处理程序，您可以调用

```
// Call the Click event of btnStartAdventure.
btnStartAdventure.PerformClick(); 
```

只需将该代码放在`backgroundWorker_RunWorkerCompleted`事件的末尾即可。

有关更多信息，请参阅[本文](http://msdn.microsoft.com/en-us/library/hkkb40tf%28v=vs.90%29.aspx)。

# flash - 使用 ActionScript2 Flash 更改按钮颜色

> ID：12662218
> 
> 赞同：0
> 
> 时间：2012-09-30T15:00:41.397
> 
> 标签：flash, actionscript, actionscript-2

我有一个带有按钮的 Flash 文件，当 Flash 加载时，这些按钮的颜色会动态变化，颜色代码取自 XML 文件，它会改变按钮的颜色

```
color.setRGB(color_code_from_xml); 
```

这里一切正常。问题在于这些按钮上的悬停颜色，它应该始终为白色，但我无法实现，在`setRGB()`加载颜色后，按钮的所有状态（over、down、hit）都是相同的颜色。

如何使按钮保持悬停颜色为白色？

希望这是可以理解的，我对 Flash 完全陌生。非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:04:49.637

```
var color_code_from_xml:Number = 0xFF0000; // here you will pass your value from XML

var my_color:Color = new Color(my_button); 
my_color.setRGB(color_code_from_xml); // my_button turns to color (red) from XML

my_button.onRollOver = function() { // on mouse roll over
    my_color.setRGB(0xFFFFFF); // my_button turns white
}

my_button.onRollOut = function() { // on mouse roll out
    my_color.setRGB(color_code_from_xml);  // my_button restores to color (red) from XML
}

my_button.onPress = function() { // on mouse press
    my_color.setRGB(0x0066FF); // my_button turns blue
} 
```

# android - 活动结束后如何保持亮度设置？

> ID：12662219
> 
> 赞同：1
> 
> 时间：2012-09-30T15:00:47.347
> 
> 标签：android, seekbar, brightness

我正在尝试制作一个可以改变屏幕亮度的滑块。我已经设法用上面的代码做到了

亮度代码：

```
BackLightControl.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {

        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {
            // TODO Auto-generated method stub
            float BackLightValue = (float)progress/100.0f;
            int brightnessMode;
            try {
                brightnessMode = Settings.System.getInt(getContentResolver(), 
                        Settings.System.SCREEN_BRIGHTNESS_MODE);

            if (brightnessMode == Settings.System.SCREEN_BRIGHTNESS_MODE_AUTOMATIC) {
                Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_BRIGHTNESS_MODE, 
                        Settings.System.SCREEN_BRIGHTNESS_MODE_MANUAL);
            }
              BackLightSetting.setText(String.valueOf(BackLightValue));
              WindowManager.LayoutParams layoutParams = getWindow().getAttributes();
              layoutParams.screenBrightness = BackLightValue;
              getWindow().setAttributes(layoutParams);
            } catch (SettingNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }   
        }           

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }

        public void onStartTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }
    });

} 
```

}

问题是它正在工作，我可以在滑动滑块时看到亮度发生变化，但是一旦活动完成，它就会恢复到以前的亮度级别，这是没有意义的。使用滑块时禁用的自动背光设置仍然存在。我做错了什么？另外，如何防止滑块为 0，因为屏幕关闭，并且只有强制关闭应用程序才能重置更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:26:49.603

**为防止滑块为 0**，如果结果为 0，只需将 1 添加到您的语句中：

```
float BackLightValue = (float)progress/100.0f;
if(BackLightValue == 0){
   BackLightValue++
} 
```

* * *

**要保存亮度**，请使用以下代码并尝试将您的活动中的完成语句延迟几百毫秒。出于某种原因，这通常可以解决问题。

```
System.putInt(getContentResolver(), System.SCREEN_BRIGHTNESS, brightness); 
```

只需将此行添加到您想要更改亮度的位置。第三个参数“亮度”应替换为搜索栏中的值。在您的情况下，BackLightValue。请记住，亮度值的范围是 1 到 255。

* * *

您可能需要通过此 hack 刷新屏幕：

*   *开始一项活动并立即完成*

设置亮度后开始此活动：

```
context.startActivity(new Intent(context, Bright.class)); 
```

虚拟活动可能是：

```
public class Bright extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);

finish();
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:22:05.673

为防止滑块的值为 0，您可以使用类似于此的版本： [Prevent SeekBar from move through a dynamic point](https://stackoverflow.com/questions/4731727/prevent-seekbar-from-moving-past-a-dynamic-point)，但将其修改为使用 min 的静态值，例如：

```
//We want a minimum om 20 percent screen brightness
private static int MY_MIN_VALUE = 20;

@Override
public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser) {
    if (progress > MY_MIN_VALUE){
        seekBar.setProgress(progress);
        saveScreenBrightness(progreess);
    }

    else
        seekBar.setProgress(MY_MIN_VALUE);     
} 
```

其中方法`saveScreenBrightness()`是更新亮度的方法。

要将亮度保存到系统，请尝试使用以下代码：

```
System.putInt(getContentResolver(), System.SCREEN_BRIGHTNESS, brightness); 
```

我还没有测试过这种方法，但它应该可以工作。您也可以尝试阅读这篇文章：[以编程方式更改屏幕亮度（与电源小部件一样）](https://stackoverflow.com/questions/7646865/changing-screen-brightness-programmatically-as-with-the-power-widget)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-15T00:13:50.570

为防止亮度为 0 值（您希望亮度为 1-255）： seekBar.setMax(254); //0-254

//然后使用进度（0-254）代替od，始终使用++进度（1-255）

//并且在设置seekBar进度时使用--brightness

# jquery - Jquery ajax 不会删除以前的 div 样式

> ID：12662221
> 
> 赞同：0
> 
> 时间：2012-09-30T15:01:16.440
> 
> 标签：jquery, css, ajax

我有 2 个 ajax 调用，并且两个 ajax 调用都使用相同的 div id="result"。第一个 ajax 调用是显示 Google 地图，第二个 ajax 是从我的数据库中检索数据。

在任何 ajax 调用之前。div是

```
<div id="result"> 
```

然后先调用谷歌地图ajax。div更改为

```
<div id="result" style="background-color: rgb(229, 227, 223); overflow: hidden; "> 
```

注意* - 谷歌地图自动在上面添加属性。

之后，调用第二个ajax。样式属性不会删除。

```
<div id="result" style="background-color: rgb(229, 227, 223); overflow: hidden;"> 
```

如何将结果 div 重置为默认值并显示结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:06:39.600

您可以使用以下代码

**重置样式**

```
$("#result").attr("style",""); 
```

**甚至添加你的新风格**

```
$("#result").attr("style",newStyleCode); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:03:19.523

```
$('#result').removeAttr('style'); 
```

# parsing - 结合自上而下和自下而上的解析

> ID：12662222
> 
> 赞同：0
> 
> 时间：2012-09-30T15:01:21.317
> 
> 标签：parsing

我正在为类似于 C# 的语言创建解析器，并决定自上而下和自下而上的组合是最好的。基本上，我想在除个别语句之外的任何地方使用自上而下的解析。这样做的原因是操作顺序 - 自下而上实现它们要容易得多，而使用自上而下的解析器实现其他所有东西要容易得多。

这个的实际实现如下：从自上而下的解析开始，像往常一样匹配。然后，在其中一条规则中，有一条规则被标记为“自下而上”。`X`标记从输入 lex 数组中取出，用自下而上（又名 shift-reduce）“压缩”成单个标记，然后将该标记放入自上而下的匹配中。自上而下的比赛继续进行。

我的问题/问题是如何获得这个号码`X`。我要从输入令牌流中取出多少个令牌以进行移位减少？我最初的解决方案很简单——把它们带到分号为止。但是，if 语句之类的东西呢？这些表达式的末尾没有分号。

我将为我最初的计划举一个例子，因为它可能听起来像胡言乱语。假设语法集如下：

```
(top-down) statement ::= <expression> ";"
(bottom-up) expression =
    multiplication ::= <number> "*" <number>
    addition ::= <number> "+" <number> 
```

然后它会像这样减少：

```
3 + 4 * 2 ;
((bottom-up) 3 + 4 * 2) ;
    3 + 4 * 2
    3 + multiplication
    addition
addition ;
statement 
```

我的问题再次是如何获得要减少的令牌数量？我怎么知道我希望将所有“3 + 4 * 2”放入移位减速器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:46:28.823

我怀疑与其为“个人陈述”切换策略，不如只为*表达式*做。这样您就不需要从流中取出固定数量的令牌；您只需将语法定义为表达式的任何内容视为原子单元，然后将其传递给子解析器。

# python - Timestamp.week 与 datetime.isocalendar

> ID：12662223
> 
> 赞同：1
> 
> 时间：2012-09-30T15:01:23.083
> 
> 标签：python, pandas, datetime

我想知道为什么

```
>>> pandas.Timestamp(dt.datetime(2009,1,6)).week 
```

和

```
>>> datetime.datetime(2009,1,6).isocalendar()[1] 
```

不要给出相同的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T15:43:03.507

First -- you need to get out of the habit of starting integers with `0`s. This means they'll be interpreted as octal (base-8) constants, which leads to confusion:

```
>>> 10
10
>>> 010
8 
```

As for why they give two different answers, there are two reasons:

(1) You're not comparing the week numbers. As the documentation says, `isocalendar` "[r]eturn[s] a 3-tuple containing ISO year, week number, and weekday." So `isocalendar()[2]` will give you the ISO weekday, not the week.

(2) ISO dates are defined a little differently than you might expect (explained [here](http://en.wikipedia.org/wiki/ISO_week_date)). For example, in the most severe case:

```
>>> dt.datetime(2010,1,1).isocalendar()
(2009, 53, 5)
>>> pd.Timestamp(dt.datetime(2010,1,1)).week
1 
```

so there will often be a difference.

# css - 当鼠标悬停在“位置：固定”元素上时，为什么不会触发滚轮滚动事件？

> ID：12662226
> 
> 赞同：7
> 
> 时间：2012-09-30T15:01:35.110
> 
> 标签：css, scroll, css-position, mousewheel

这是我的问题的简单测试用例：

[http://jsfiddle.net/JZmvf/20/](http://jsfiddle.net/JZmvf/20/)

*   将鼠标放在红色方块上
*   用鼠标滚轮滚动
*   父 div 不滚动

即使鼠标悬停在 position: fixed element 上，如何使父 div 正常滚动鼠标滚轮？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-10-15T13:44:54.857

答案很晚，但我能够通过向`pointer-events: none`“固定”div 添加样式来克服这个问题。

像这样：http: [//jsfiddle.net/JZmvf/55/](http://jsfiddle.net/JZmvf/55/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T03:05:46.163

元素`position: fixed;`相对于视口定位，因此在这种情况下`scrollable`div 不是 div 的父级`fixed`，尽管如果您只是查看输出，它可能会以这种方式出现。

如果您将光标放在`fixed`div 上并向下滚动，则会告诉您的浏览器向下滚动`fixed`div。固定元素本质上是不可滚动的，所以什么也不会发生。

您可能想要添加更多关于您正在尝试完成的内容的详细信息。希望有帮助！

# opengl-es-2.0 - 用于 FBO 渲染的 OpenGL ES2.0 屏幕外上下文

> ID：12662227
> 
> 赞同：8
> 
> 时间：2012-09-30T15:01:39.717
> 
> 标签：opengl-es-2.0, fbo, off-screen, windowless

我想使用 FBO 进行屏幕外渲染（在没有任何 WS 的控制台环境中）。我知道有必要创建一个 OpenGL 上下文，并且至少为任何操作创建一个虚拟窗口，因此我进行了以下初始化：

```
// Step 1 - Get the default display.
eglDisplay = eglGetDisplay((EGLNativeDisplayType)0);

// Step 2 - Initialize EGL.
EGLint iMajorVersion, iMinorVersion;
if (!eglInitialize(eglDisplay, &iMajorVersion, &iMinorVersion))
{
    printf("Error: eglInitialize() failed.\n");
    goto cleanup;
}

// Step 3 - Make OpenGL ES the current API.
eglBindAPI(EGL_OPENGL_ES_API);
if (!TestEGLError("eglBindAPI"))
{
    goto cleanup;
}

// Step 4 - Specify the required configuration attributes.
EGLint pi32ConfigAttribs[5];
pi32ConfigAttribs[0] = EGL_SURFACE_TYPE;
pi32ConfigAttribs[1] = EGL_WINDOW_BIT;
pi32ConfigAttribs[2] = EGL_RENDERABLE_TYPE;
pi32ConfigAttribs[3] = EGL_OPENGL_ES2_BIT;
pi32ConfigAttribs[4] = EGL_NONE;

// Step 5 - Find a config that matches all requirements.
int iConfigs;
if (!eglChooseConfig(eglDisplay, pi32ConfigAttribs, &eglConfig, 1, &iConfigs) || (iConfigs != 1))
{
    printf("Error: eglChooseConfig() failed.\n");
    goto cleanup;
}

// Step 6 - Create a surface to draw to.
EGLSurface eglSurface;
eglSurface = eglCreateWindowSurface(eglDisplay, eglConfig, (EGLNativeWindowType)NULL, NULL);
if (!TestEGLError("eglCreateWindowSurface")) goto cleanup;

// Step 7 - Create a context.
eglContext = eglCreateContext(eglDisplay, eglConfig, NULL, ai32ContextAttribs);
if (!TestEGLError("eglCreateContext")) goto cleanup;

// Step 8 - Bind the context to the current thread
eglMakeCurrent(eglDisplay, eglSurface, eglSurface, eglContext);
if (!TestEGLError("eglMakeCurrent")) goto cleanup; 
```

这种类型的初始化适用于目标系统，但如果我在 FBO 中画了一些东西，并且在读回它（getReadPixels）后总是只能得到一个黑色图像。我在 X11 上尝试了相同的代码，它（已经）在 eglCreateWindowSurface 调用上失败并出现错误：EGL_BAD_NATIVE_WINDOW WORKS，但是如果我将一个真正的 X11window 本机窗口处理程序传递给这个调用，它就可以工作（这种情况下我可以读回有效的渲染图像还）

请澄清我应该使用哪种类型的表面进行 FBO 渲染？或者我做错了什么？

其余绘制代码： //init 并启动 opengl es shanders Shaders_Init();

```
{
    // create a framebuffer object
    glGenFramebuffers(1, &fboId);
    glBindFramebuffer(GL_FRAMEBUFFER, fboId);

    // create a texture object
    GLuint textureId;
    glGenTextures(1, &textureId);
    glBindTexture(GL_TEXTURE_2D, textureId);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR); //GL_LINEAR_MIPMAP_LINEAR
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    //glTexParameteri(GL_TEXTURE_2D, GL_GENERATE_MIPMAP_HINT, GL_TRUE); // automatic mipmap
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, renderBufferWidth, renderBufferHeight, 0,
                    GL_RGB, GL_UNSIGNED_BYTE, 0);
    //glBindTexture(GL_TEXTURE_2D, 0);

    // attach the texture to FBO color attachment point
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0,
                           GL_TEXTURE_2D, textureId, 0);

    // check FBO status
    GLenum status = glCheckFramebufferStatus(GL_FRAMEBUFFER);
    if(status != GL_FRAMEBUFFER_COMPLETE) {
        printf("Problem with OpenGL framebuffer after specifying color render buffer: \n%x\n", status);
    } else {
        printf("FBO creation succedded\n");
    }
}

// Sets the clear color.
// The colours are passed per channel (red,green,blue,alpha) as float values from 0.0 to 1.0
glClearColor(0.6f, 0.8f, 1.0f, 1.0f); // clear blue

// We're going to draw a triangle to the screen so create a vertex buffer object for our triangle
{
    // Interleaved vertex data
    GLfloat afVertices[] = {    -0.4f,-0.4f,0.0f, // Position
                            0.4f ,-0.4f,0.0f,
                            0.0f ,0.4f ,0.0f};
    // Generate the vertex buffer object (VBO)
    glGenBuffers(1, &ui32Vbo);

    // Bind the VBO so we can fill it with data
    glBindBuffer(GL_ARRAY_BUFFER, ui32Vbo);

    // Set the buffer's data
    unsigned int uiSize = 3 * (sizeof(GLfloat) * 3); // Calc afVertices size (3 vertices * stride (3 GLfloats per vertex))
    glBufferData(GL_ARRAY_BUFFER, uiSize, afVertices, GL_STATIC_DRAW);
}

// Draw a triangle
{
    glClear(GL_COLOR_BUFFER_BIT);
    if (!TestEGLError("glClear")) goto cleanup;

    // First gets the location of that variable in the shader using its name
    int i32Location = glGetUniformLocation(uiProgramObject, "myPMVMatrix");

    // Then passes the matrix to that variable
    glUniformMatrix4fv( i32Location, 1, GL_FALSE, pfIdentity);

    /*
        Enable the custom vertex attribute at index VERTEX_ARRAY.
        We previously binded that index to the variable in our shader "vec4 MyVertex;"
    */
    glEnableVertexAttribArray(VERTEX_ARRAY);

    // Sets the vertex data to this attribute index
    glVertexAttribPointer(VERTEX_ARRAY, 3, GL_FLOAT, GL_FALSE, 0, 0);

    /*
        Draws a non-indexed triangle array from the pointers previously given.
        This function allows the use of other primitive types : triangle strips, lines, ...
        For indexed geometry, use the function glDrawElements() with an index list.
    */
    glDrawArrays(GL_TRIANGLES, 0, 3);
    if (!TestEGLError("glDrawArrays")) goto cleanup;

        // get the image data
        long imageSize = x * y * 3;
        unsigned char *data = new unsigned char[imageSize];
        glReadPixels(0,0,x,y,GL_RGB,GL_UNSIGNED_BYTE,data); 
```

提前致谢！！！！！问候， 盖萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:49:30.867

解决方案如下（没有错误处理）：

```
 #ifdef CONTEXT_ES20
    EGLint ai32ContextAttribs[] = { EGL_CONTEXT_CLIENT_VERSION, 2, 
                                                           EGL_NONE };
    #endif

// Step 1 - Get the default display.
    eglDisplay = eglGetDisplay((EGLNativeDisplayType)0);

// Step 2 - Initialize EGL.
    eglInitialize(eglDisplay, 0, 0);

    #ifdef CONTEXT_ES20
// Step 3 - Make OpenGL ES the current API.
    eglBindAPI(EGL_OPENGL_ES_API);

// Step 4 - Specify the required configuration attributes.
    EGLint pi32ConfigAttribs[5];
    pi32ConfigAttribs[0] = EGL_SURFACE_TYPE;
    pi32ConfigAttribs[1] = EGL_WINDOW_BIT;
    pi32ConfigAttribs[2] = EGL_RENDERABLE_TYPE;
    pi32ConfigAttribs[3] = EGL_OPENGL_ES2_BIT;
    pi32ConfigAttribs[4] = EGL_NONE;
    #else
    EGLint pi32ConfigAttribs[3];
    pi32ConfigAttribs[0] = EGL_SURFACE_TYPE;
    pi32ConfigAttribs[1] = EGL_WINDOW_BIT;
    pi32ConfigAttribs[2] = EGL_NONE;
    #endif

// Step 5 - Find a config that matches all requirements.
    int iConfigs;
    eglChooseConfig(eglDisplay, pi32ConfigAttribs, &eglConfig, 1, 
                                                          &iConfigs);

    if (iConfigs != 1) {
        printf("Error: eglChooseConfig(): config not found.\n"); 
        exit(-1);
    }

// Step 6 - Create a surface to draw to.
    EGLSurface eglSurface;
    eglSurface = eglCreateWindowSurface(eglDisplay, eglConfig, 
                                        (EGLNativeWindowType)NULL, NULL);

// Step 7 - Create a context.
    #ifdef CONTEXT_ES20
    eglContext = eglCreateContext(eglDisplay, eglConfig, NULL, 
                                                     ai32ContextAttribs);
    #else
    eglContext = eglCreateContext(eglDisplay, eglConfig, NULL, NULL);
    #endif

// Step 8 - Bind the context to the current thread
    eglMakeCurrent(eglDisplay, eglSurface, eglSurface, eglContext); 
```

# jquery - 循环 jquery 动画

> ID：12662229
> 
> 赞同：0
> 
> 时间：2012-09-30T15:02:00.310
> 
> 标签：jquery, animation, loops

我要疯了，试图弄清楚这一点。

我有两个带有雨背景图像的 div，我用 jquery 对其进行了动画处理，从顶部：-100% 到顶部：100%。我希望 div 循环，所以视觉效果是连续的雨流下来。

我可以让动画循环播放，但它会等到整个循环完成后再开始，所以有一两秒钟你会看到动画结束。

我的解决方案是有两个相同的 div。第一个 div 将开始动画，然后当它达到 top:0% 时，我希望第二个 div 开始。当第二个 div 也达到 top:0% 时，第一个 div 需要循环，依此类推。

我可以创建一个变量来给出 div 位置的值，但首先它以像素为单位（我需要百分比），其次它只在准备好文档时给我一个数字（我需要它不断更新）

这是可以实现的吗？到目前为止，这是我的代码：

```
$(document).ready(function(){
        //RAIN
        function rain1() {
            $("#rain1").animate({ top: '100%'}, 4000, 'linear', function() {
                $(this).css("top", "-100%").delay(4000);
                rain1();
    });
        }

        function rain2() {
            $("#rain2").delay(4000).animate({ top: '100%'}, 4000, 'linear', function() {
                $(this).css("top", "-100%");
                rain2();
    });
        }

        $('a.control-rain').click(function(){
            rain1();
            rain2();
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:59:01.683

我只是在您的代码 iso -100% 中将顶部重置为 0%。我不确定这是否是你想要的。

在这里工作小提琴：http: [//jsfiddle.net/ZHSKj/1/](http://jsfiddle.net/ZHSKj/1/)

# bash - Bash“内联”条件

> ID：12662230
> 
> 赞同：6
> 
> 时间：2012-09-30T15:02:11.027
> 
> 标签：bash, conditional

如果存在 bash 变量，我的目标是向正在执行的程序添加一个参数，如下所示：

`bob -a some_arg (( if we have ${VAR} defined add '-b ${VAR}' as an argument ))`

我想避免这样的事情：

```
if [[ -z ${VAR} ]]; then
    bob -a some_arg
else
    bob -a some_arg -b ${VAR}
fi 
```

虽然，这是唯一的选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T15:16:21.063

使用 bash*参数扩展*：

```
bob -a some_arg ${VAR:+-b "$VAR"} 
```

一些好的文档：[http ://wiki.bash-hackers.org/syntax/pe](http://wiki.bash-hackers.org/syntax/pe)

并且`LANG=C man bash | less +/'Parameter Expansion'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:06:41.923

您可以为此使用数组（请参阅[Arrays](http://tldp.org/LDP/abs/html/arrays.html)）：

```
args=( -a some_args )
if [ ... ] ; then
  args+=( -b "${VAR}" )
fi
bob "${args[@]}" 
```

# php - 在 php WP 插件中设置日期格式

> ID：12662235
> 
> 赞同：0
> 
> 时间：2012-09-30T15:03:09.933
> 
> 标签：php, wordpress, date

我知道当您手头没有所有各种文件时，这可能并不容易回答。但我只是想知道有人能提供一个线索，告诉我在哪里可以找到改变wordpress插件（leaguemanager）中日期格式的地方。

在一张桌子上我有`echo $match->date." "`

我环顾四周，在 for 循环的另一个文件中找到了这个......

```
$match->date = ( substr($match->date, 0, 10) == '0000-00-00' ) ? 'N/A' :         
mysql2date(get_option('date_format'), $match->date); 
```

我知道这有点含糊，但我仍处于学习 php 的早期阶段，而且我只是在寻找关于我应该寻找什么的线索，而不是实际的答案本身，我知道如何改变日期格式与 php，但我只是不知道在哪里可以找到这个特定的更改。目前显示为 September 28, 2012 ，我只想要 dm ，即 28/09

编辑：我在一个名为 ajax.php 的文件中找到的更多信息

```
$date_format = $_POST['date_format']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:07:19.653

我认为您正在寻找[strtotime](http://php.net/manual/en/function.strtotime.php)函数：

```
echo date('j/m', strtotime($match->date)); 
```

参考日期格式： http: [//php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# algorithm - 电脑订票系统：如何高效订票？

> ID：12662236
> 
> 赞同：2
> 
> 时间：2012-09-30T15:03:14.133
> 
> 标签：algorithm

计算机预订系统或中央预订系统 (http://en.wikipedia.org/wiki/Computer_reservations_system) (CRS) 是一种计算机化系统，用于存储和检索信息并进行与资源预订相关的交易，例如机票、酒店房间， ETC。

现在，如果这是一个开放的系统，意味着每个旅行社都可以登录来预订、预订或取消座位，如何进行高效的设计？

如何让预订准确高效？- 准确，意味着一个座位只能出售一次；- 高效，意味着无论使用何种锁定/保留，它都不能阻塞系统。

是否有一些“设计模式”或“最佳实践”或“圣经书籍”可供阅读？

嗯，一些背景......这不是一个学生项目。这是关于一个国家的火车预订系统。

显然每个座位只能出售一次。但是由于数百万人同时登录，服务器无法优雅地处理它，并且存在相当多的延迟和超时。所以现在我们被要求对设计进行头脑风暴。我以为所有的航空公司预订系统都面临着同样的问题，那么他们是如何解决的呢？我想机票预订系统允许在短时间内预订座位，但它们如何提高效率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:13:32.250

它们是相互矛盾的要求。您必须阻止以保证“仅售出一次”。

您唯一的解决方案是最小化需要阻止的代码。您必须使其具有事务性和隔离性。

我假设这是一个学生项目。你引用了维基百科，世界不需要开放的预订系统。西南航空公司不会很快为您放弃他们的系统。

# iphone - 状态栏活动指示器未显示在情节提要中包含的单独 .xib 文件注释上

> ID：12662238
> 
> 赞同：1
> 
> 时间：2012-09-30T15:03:23.670
> 
> 标签：iphone, ios, xcode, uiactivityindicatorview

我在不属于我的故事板的视图中显示活动指示器时遇到问题。它是一个包含在项目中的 .xib 文件，但我用来在情节提要视图中显示活动指示器的代码（没有问题）**不适**用于那个额外的 .xib 文件。我用来显示活动指示器的代码如下：

```
- (void)webViewDidStartLoad:(UIWebView *)webView{
UIApplication* app = [UIApplication sharedApplication];
app.networkActivityIndicatorVisible = YES;

} 
```

正如我之前所说，它适用于我故事板中的所有视图，但不适用于额外的 .xib 视图。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:34:57.097

使用它，可能对你有帮助:)

```
- (void)webViewDidStartLoad:(UIWebView *)webView
    {    

        UIApplication* app = [UIApplication sharedApplication];
        app.networkActivityIndicatorVisible = YES;

        [self.ActiveIndicatorName startAnimating];
    } 
```

# ios - 如何使应用程序在 iOS 6 中完全正常运行以实现自动旋转？

> ID：12662240
> 
> 赞同：17
> 
> 时间：2012-09-30T15:03:48.220
> 
> 标签：ios, uiviewcontroller, ios6, autorotate

在 iOS6 中，`shouldAutorotateToInterfaceOrientation`已弃用。我尝试使用 `supportedInterfaceOrientations`并使`shouldAutorotate` 应用程序正常工作以进行自动旋转，但失败了。

这个 ViewController 我不想旋转，但它不起作用。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

有任何想法吗？提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-30T15:29:10.370

弄清楚了。

**1）子类UINavigationController**（层次结构的顶部视图控制器将控制方向。）确实将其设置为self.window.rootViewController。

```
- (BOOL)shouldAutorotate
{
    return self.topViewController.shouldAutorotate;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return self.topViewController.supportedInterfaceOrientations;
} 
```

**2）如果你不想让视图控制器旋转**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

-(BOOL)shouldAutorotate
{
    return NO;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

**3）如果你希望它能够旋转**

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
}

-(BOOL)shouldAutorotate
{
    return YES;
} 
```

顺便说一句，根据您的需要，另一种相关方法：

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
     return UIInterfaceOrientationMaskPortrait;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T00:50:13.703

如果您使用标签栏控制器而不是导航控制器作为根控制器，则需要类似地继承 UITabBarController。

语法也会有所不同。我成功地使用了以下内容。然后，我在要覆盖的视图控制器上成功使用了上述示例。就我而言，我希望主屏幕不旋转，但我有一个带有电影的常见问题解答屏幕，我自然希望启用横向视图。工作完美！只需注意对 self.modalViewController 的语法更改（如果您尝试使用导航控制器的语法，您会收到编译器警告。）希望这会有所帮助！

```
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (BOOL)shouldAutorotate
{
    return self.modalViewController.shouldAutorotate;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return self.modalViewController.supportedInterfaceOrientations;
} 
```

# java - 在 JMonkey Engine 中编辑启动屏幕

> ID：12662241
> 
> 赞同：5
> 
> 时间：2012-09-30T15:03:50.043
> 
> 标签：java, splash-screen, openjdk, jmonkeyengine

我想编辑默认 JMonkey 项目的启动屏幕，以便可以用自定义图像（我们的项目徽标）替换显示 JMonkey 的图像。`SimpleApplication`我的意思是执行项目时出现的屏幕。我在 Linux 机器上运行 JMonkey SDK（如果重要的话是 Linux Mint 13）和 OpenJDK 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T09:48:52.000

您必须在 app.start 之前更改 main 方法中的 appsettings。为此，首先 import `com.jme3.system.AppSettings;`，然后使用参数 true 或 false 创建一个新`AppSettings`对象，之后您可以通过 指定新图像的位置`yourAppSettingsObject.setSettingsDialogImage(path/to/image)`。

要将这些设置设置为您的 App 对象的设置，请键入`app.setSettings(yourAppSettingsObject);`。

# javascript - CSS下拉框菜单关闭时间延迟？

> ID：12662243
> 
> 赞同：0
> 
> 时间：2012-09-30T15:04:11.930
> 
> 标签：javascript, css

我有一个网站，它有一个管理区域，用户需要在其中查看通知。

我用 CSS 下拉菜单设置了整个通知想法，但是一旦光标离开菜单，我似乎无法让菜单保持打开状态

我已将文件上传到 JSbin 希望有人可以帮助我

[http://jsbin.com/ecegiy/1](http://jsbin.com/ecegiy/1)

它在那里看起来并不多，因为不包括所有图像和 mysql 连接文件，但链接中包含 css 菜单的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:48:32.257

Ok, if you want to let the menu stay open I'll suggest:

*   Delete the css part of hover on sub-menu
    `#menu li:hover ul.sub-menu { display: block; }`
*   Give your menu an id
    `<ul id="childDisplay" class="sub-menu">`
*   Add the javascript to upper element that it's always visible
    `<li onmouseover="menuVis.visible('childDisplay');" onmouseout="setTimeout('menuVis.unvisible(\'childDisplay\')',1000);">`
*   Add the javascript class and method:

    ```
    function vis(){
        this.flag=0;
        this.flagUnv=0;

        this.visible=function(x){
          this.flag=this.flag+1;
          document.getElementById(x).style.display="block";

        }

        this.unvisible= function (x){
              this.flagUnv=this.flagUnv+1;
              if(this.flagUnv==this.flag)
                   document.getElementById(x).style.display="none";    
            }
    }
    menuVis=new vis();
    } 
    ```

With this, the sub-menu will become invisible after 1000ms. If you want to keep it visibile "forever" just delete onmouseout section and the unvisible function.

# php - PDO 使用条件 SQL 执行错误

> ID：12662247
> 
> 赞同：0
> 
> 时间：2012-09-30T15:04:40.427
> 
> 标签：php, pdo

我想有条件地构建一个 SQL 语句并且遇到了问题。在这种情况下，可能有或没有 WHERE 子句。

```
$sql=null;
$arr='';

if( $id != 'all' ){
    $sql = '  WHERE type = :type AND id=:id';
    $arr = array(':type'=>$type,':id'=>$id);
}

$stmt = $dbh->prepare("SELECT * FROM table $sql");
$stmt->execute($arr);
... 
```

如果 id 等于 'all'，那么我只想重写没有 WHERE 子句的 sql。由于我必须传递 $arr 才能执行，所以当 id = 'all' 时出现以下错误，因为 execute 需要一个值：PHP 警告：PDOStatement::execute() 期望参数 1 是数组，给定字符串

我尝试传递执行一个空数组，但也出现错误。如何在不必重写两个完整的 sql 块的情况下做到这一点，每个块都有自己的执行语句？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:07:35.043

看起来您需要将该`prepare`语句移动到该`if`部分，为第二种情况添加第二条准备语句。如果您还添加了`else`for when可能会更好（为了便于阅读） `id === 'all'`。

# asp.net - 实时贝宝错误

> ID：12662249
> 
> 赞同：2
> 
> 时间：2012-09-30T15:04:54.527
> 
> 标签：asp.net, paypal, paypal-ipn, paypal-sandbox

我在 ASP.net 中使用 PayPal，当我在沙盒中测试时，一切都是正确的，但是当我使用实时部分时，我收到了这个错误：

> 这笔付款无法完成，您的帐户也没有被扣款。请联系您的商家以获取更多信息。我们目前无法使用您的 PayPal 帐户处理您的付款。请返回商家网站并尝试使用其他付款方式（如果有）。

这是我的网络配置

```
 <add key="token" value="*************************"/>
  <add key="paypalemail" value="*************@gmail.com"/>
  <add key="PayPalSubmitUrl" value="https://www.paypal.com/cgi-bin/webscr"/>
  <add key="FailedURL" value="http://www.stockholmsbygg.net/Failed.aspx"/>
  <add key="SuccessURL" value="http://www.stockholmsbygg.net/FindOpenRequests.aspx"/>
  <add key="Notification" value="http://www.stockholmsbygg.net/Notification.aspx"/> 
```

并重定向到贝宝

```
 public static string RedirectToPaypal(string invoiceNumber, string requestId, string userId, string customId, string itemName, string amount)
        {

            string redirecturl = "";
            redirecturl += "https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=" + ConfigurationManager.AppSettings["paypalemail"].ToString();
            redirecturl += "&first_name=" + userId;
            redirecturl += "&item_name=" + itemName;
            redirecturl += "&amount=5.00";
            redirecturl += "&quantity=1";
            redirecturl += "&currency=SEK";
            redirecturl += "&invoice=" + invoiceNumber;
            redirecturl += "&custom=" + requestId;
            redirecturl += "&on0=" + HttpContext.Current.Request.UserHostAddress;
            redirecturl += "&return=" + ConfigurationManager.AppSettings["SuccessURL"].ToString() + "?Type=ShowDetail";
            redirecturl += "&cancel_return=" + ConfigurationManager.AppSettings["FailedURL"].ToString();
            redirecturl += "&notify_url=" + ConfigurationManager.AppSettings["Notification"].ToString();
            return redirecturl;
        } 
```

这是我从贝宝返回到我的地址后检查的所有内容

```
if (Request.QueryString["cm"] != null)
                        {

                             const string authToken = "*********************************";
                             string txToken = Request.QueryString["tx"];
                             string query = "cmd=_notify-synch&tx=" + txToken + "&at=" + authToken;

                             //const string strSandbox = "https://www.sandbox.paypal.com/cgi-bin/webscr";
                           string strSandbox = "https://www.paypal.com/cgi-bin/webscr";
                             var req = (HttpWebRequest)WebRequest.Create(strSandbox);

                            req.Method = "POST";
                            req.ContentType = "application/x-www-form-urlencoded";
                             req.ContentLength = query.Length;

                             var streamOut = new StreamWriter(req.GetRequestStream(), System.Text.Encoding.ASCII);
                           streamOut.Write(query);
                           streamOut.Close();
                           var streamIn = new StreamReader(req.GetResponse().GetResponseStream());
                           string strResponse = streamIn.ReadToEnd();
                             streamIn.Close();

                             var results = new Dictionary<string, string>();
                             if (strResponse != "")
                             {
                                 var reader = new StringReader(strResponse);
                                 string line = reader.ReadLine();

                                 if (line == "SUCCESS")
                                 {

                                     while ((line = reader.ReadLine()) != null)
                                     {
                                         results.Add(line.Split('=')[0], line.Split('=')[1]);

                                     }
                                     var userId = Convert.ToInt64(Session["UserID"]);
                                     var item = Convert.ToInt64(Request.QueryString["cm"]);
                                     context = new entities();
                                     var existUser = context.Payments.Where(u => u.UserID == userId).ToList();
                                     var existItem = existUser.Where(i => i.RequestID == item).ToList();
                                     var paypalInvoice = results["invoice"];
                                     var txn_id = results["txn_id"];
                                     var sameInvoice =
                                         existItem.Where(i => i.invoice== paypalInvoice).FirstOrDefault();
                                     if (sameInvoice != null)
                                     {
                                         var currentAmount = Request.QueryString["amt"];
                                         var dbAmount = Convert.ToDecimal(sameInvoice.Amount).ToString();
                                         var currentIp = HttpContext.Current.Request.UserHostAddress;

                                         if (dbAmount != null)
                                         {
                                             if (currentAmount == dbAmount)
                                             {

                                                 if (currentIp == sameInvoice.IP)
                                                 {

                                                     sameInvoice.Status = true;
                                                     sameInvoice.PaypalTX = txn_id;
                                                     pnlSearch.Visible = false;
                                                     pnlShowDetail.Visible = true;
                                                     ShowDetail(Request.QueryString["cm"], true);
                                                     btnBack.Visible = false;
                                                     PrivateDetail.Visible = true;
                                                     interested.Visible = false;
                                                     context.SaveChanges();
                                                 }

                                             }
                                         }

                                     }

                                 }
                                 else if (line == "FAIL")
                                 {
                                     // Log for manual investigation
                                     Response.Write("Unable to retrive transaction detail");
                                 }
                             }
                             else
                             {
                                //unknown error
                                 Response.Write("ERROR");
                             }
                         } 
```

问题是什么？同样在第一次测试时，我付了钱，但什么也没发生。发票状态仍然是假的，而自从我付款后它应该变成真的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:33:02.197

这个函数是错误的 100%`RedirectToPaypal()`

没有重定向到贝宝。只有`post`带有发布参数的地址，而不是 `get`（重定向）。

这是合乎逻辑的，因为如果您将所有敏感数据放在 url 上，那么任何在中间的 ether 代理都会暴露给任何将 url 与所有数据一起保存的东西。

对我来说，如果您使用该数据进行重定向而不是发布，则在贝宝上找不到任何有关该帐户的信息，因为没有发布数据，这就是您收到该错误的原因。

# postgresql - 如何在文件头中指定 SQL 产品

> ID：12662252
> 
> 赞同：1
> 
> 时间：2012-09-30T15:05:12.557
> 
> 标签：postgresql, emacs

在 emacs 中，我可以使用以下表示法指定文件是 SQL：

```
-- -*- mode: SQL -*- 
```

但是 SQL 有特定的子模式：postgresql、mysql、ansi 等。我可以在打开文件时使用 emacs 菜单设置产品。但我想在标题中添加一些内容来帮助 emacs 自动选择产品。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T13:43:31.760

-*- sql 产品：ansi；-*-

或者

-*- sql-产品：mysql；-*-

等等

# javascript - 如何在选择/取消选择该行的复选框时在表格单元格内添加或删除值，尝试通过 Jquery 提交值？

> ID：12662256
> 
> 赞同：0
> 
> 时间：2012-09-30T15:05:41.360
> 
> 标签：javascript, ruby-on-rails-3, jquery

这是表格：

```
<%= form_tag '', :id => "costs" do %>
<table class="table table-bordered" id="service_cost">
    <% @services.each do |service|  %>
    <tbody>
        <tr>
            <td><%= check_box_tag :open_service,  {}, false, :class => 'checkable' %></td>  
            <td><%= service.phone %></td>
            <td><%= service.internet %></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td><%= service.house_keeping  %> </td>
            <td>0.0 </td>
            <td><%= service.laundry %></td>
            <td><%= text_field_tag "service_cost", service.total, :class => "input-small" %></td>
        </tr>
    </tbody>
    <% end %>
</table>
<% end %> 
```

当表单被提交时，javascript 开始起作用：

```
$("#costs").submit(function(){
  formData=$("#costs").serializeArray();
  processFormData(formData)
  return false;
}); 
```

这可确保在选中复选框时提交表单：

```
$('.checkable').live('change', function() {
  $(this).parents('form:first').submit();
}); 
```

但是，我正在寻找的是基于复选框选择/取消选择添加或删除单元格值并提交它，请提出一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:23:19.090

如果表有多行，但如果它执行以下操作，则不确定 hide 是否适用于 td：

```
<table>
    <tr>
        <td class="data">data</td>
        <td><input type="checkbox" class="checkable" value="data"></td>
    </tr>
</table

$('.checkable').live('change', function() {
      $(this).closest('tr.data').hide();
      $(this).parents('form:first').submit();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:29:01.810

```
<%= check_box_tag :check %>
<%= form_tag '', :id => "costs" do %>
  <%= text_field_tag, :detbycb, :size=>20 %>
<% end %>

$('#check').on('change', function() {
   if ( $('#check').is(':checked') )
      $('#detbycb').val('I Am Checked');
   else
      $('#detbycb').val('I AM NOT checked');
}

OR

$('#check').on('change', function() {
   if ( $(this).is(':checked') )
      $('#detbycb').val('I Am Checked');
   else
      $('#detbycb').val('I AM NOT checked');
}

The first better illustrates,  the second is the real way, faster execution 
```

# java - 检查变量是否等于字符串

> ID：12662257
> 
> 赞同：4
> 
> 时间：2012-09-30T15:05:44.890
> 
> 标签：java, string, equals

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [Java字符串比较？](https://stackoverflow.com/questions/995918/java-string-comparison)

```
import java.util.*;

public class whatever
{

    public static void main(String[] args)
    {

        Scanner test = new Scanner(System.in);
        System.out.println("Input: ");
        String name = test.nextLine();

        if (name == "Win")
        {
            System.out.println("Working!");
        }

        else
        {
            System.out.println("Something is wrong...");
        }

        System.out.println("Value is: " + name);

    }

} 
```

上面的代码非常不言自明。我假设`==`只能用于数字？我想要“工作！” 要打印。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T15:06:45.403

`==`通过引用比较对象。

要确定两个不同`String`的实例是否具有相同的值，请调用`.equals()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T15:07:03.990

你应该使用

```
if (name.equals("Win")){
    System.out.println("Working!");
} 
```

编辑建议由 RC 在评论中避免空问题：

```
if ("Win".equals(name)){
    System.out.println("Working!");
} 
```

# javascript - 如何在 Angularjs 中广播对象？

> ID：12662258
> 
> 赞同：8
> 
> 时间：2012-09-30T15:05:44.573
> 
> 标签：javascript, angularjs

如何通过事件广播对象？

目前我正在尝试：

```
app.run ($rootScope) ->
    message = {type: 'channel', action: 'create', data: { name: "ssss", id: 0}}
    $rootScope.$broadcast('message', message)

angular.module('WebChat').controller 'ChannelController', ($scope) -> 
    $scope.$on 'message', (message) ->
        console.log message
        console.log 'hi' 
```

但我没有得到任何输出

**编辑** 我让它工作了。看来回调函数的第一个参数是作用域。我不得不将控制器更改为：

```
angular.module('WebChat').controller 'ChannelController', ($scope) -> 
    $scope.$on 'message', (scope, message) ->
        console.log message
        console.log 'hi' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T15:26:00.667

在您的情况下，您没有得到任何输出，因为您**在控制器准备好接受消息之前进行广播**。模块的 run 方法在应用程序生命周期的早期执行，在控制器的作用域准备好监听消息之前。

这是说明这一点的 jsFiddle，检查控制台以查看在侦听器准备好之前发生广播：http: [//jsfiddle.net/vPq2P/3/](http://jsfiddle.net/vPq2P/3/)

# asp.net-mvc - 从 ASP.NET Web API 返回一些字段

> ID：12662259
> 
> 赞同：6
> 
> 时间：2012-09-30T15:05:56.580
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, json.net

如果我只想从模型中返回一些字段，我应该使用什么方法？我希望能够询问一些字段，例如：

> ?fields=email,expiration_date,头像(thumb_width,thumb_height,thumb_url)

此表达式也可以是请求中的标头。我也有嵌套对象，比如用户内部的头像。

这将为我节省数百 MB 的流量，因为我的一些模型非常重。

更新：字段选择应该适用于 Json 和 XML 响应。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-09T17:29:36.093

I found a nuget package that does this for you

[WebApi.PartialResponse](https://www.nuget.org/packages/WebApi.PartialResponse/)

Git hub source code:
[https://github.com/dotarj/PartialResponse](https://github.com/dotarj/PartialResponse)

It essentially wraps the formatter discussed above, so that you only have to configure it like this:

```
GlobalConfiguration.Configuration.Formatters.Clear();
GlobalConfiguration.Configuration.Formatters.Add(new PartialJsonMediaTypeFormatter() { IgnoreCase = true }); 
```

Then, you can specify `?fields=<whatever>` in your request, and it will return the model with only those fields specified.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:52:51.363

我会用自定义的替换默认的合同解析器（参见[http://frankapi.wordpress.com/2012/09/09/going-camelcase-in-asp-net-mvc-web-api/](http://frankapi.wordpress.com/2012/09/09/going-camelcase-in-asp-net-mvc-web-api/)），覆盖 GetSerializableMembers来自 Newtonsoft.Json.Serialization.DefaultContractResolver 类的方法，并使用查询字符串字段的值过滤其结果。

是否可以从该类访问查询字符串是另一个问题，您可以使用静态 httpcontext.current 来获取它，但可能有更清洁的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-19T14:22:29.870

您也可以使用 OData。它在查询方式和 API 方面为您提供了很大的灵活性。 [http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/odata-v4/create-an-odata-v4-endpoint](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/odata-v4/create-an-odata-v4-endpoint)

在您的情况下，您将使用**$select**。我也猜测 Avatar 是另一个类，所以你会使用**$expand**。

```
/api/endpoint?$select=email,expiration_date&$expand=avatar($select=thumb_width,thumb_height,thumb_url) 
```

如果子选择的语法正确，我不是 100%，但我认为它是正确的。

# php - 使用 mb_ereg_replace() 去除除字母数字 unicode 字符之外的所有内容

> ID：12662260
> 
> 赞同：0
> 
> 时间：2012-09-30T15:06:07.220
> 
> 标签：php, regex, pcre, multibyte

我的 apache web 服务器上有 PHP 5.2.9，所以`preg_replace`不能用它。

我需要剥离除字母数字 unicode 字符之外的所有内容。

下面与`mb_ereg_replace`作品一致，但它不会去除特殊字符，如 #、@ 以及 ╘、╙、╥、...位数。它们是数字的۹-0和字母的ی-ا。

我不知道，我是否需要以十六进制格式引入 unicode 字符，如果是，我该怎么做。

`$str = mb_ereg_replace("[^\w ]", "", $str);`

非常感谢

# excel - 以编程方式添加引用会导致运行时错误

> ID：12662262
> 
> 赞同：2
> 
> 时间：2012-09-30T15:06:26.453
> 
> 标签：excel, vba, macos

我编写了两个 VBA 插件`Excel (Office 2011, Mac)`：第一个“基本”插件还为第二个插件提供功能。以后还会有其他插件使用基本插件的功能……应该可以只运行基本插件，第二个插件是可选的。

在第二个插件中，我试图添加这样的引用：

```
Public Sub Workbook_Open()
    Application.VBE.VBProjects("SecondAddin").References.AddFromFile ("BasicAddin.xlam")
    UseFunctionFromBasicAddin
End Sub

Private Sub UseFunctionFromBasicAddin()
    FunctionFromBasicAddin
End Sub 
```

但是，这在启动 Excel 时给了我一个运行时错误：`Run-time error 91: Object variable or With block variable not set.`

当我在出现此错误后打开 VBA 编辑器时，我可以看到现在在 SecondAddin 中正确引用了 BasicAddin.xlam - 当我`UseFunctionFromBasicAddin()`在 VBA 编辑器中执行它时，它可以工作。它只是在启动 Excel 时不起作用。

在 VBA 编辑器 (Tools->References) 中添加引用时，加载了两个加载项，但有一个`MsgBox: "This workbook is currelty referenced by another workbook and cannot be closed."`

但是，我想以编程方式添加引用，因为我怀疑在具有不同路径的不同计算机上使用插件时链接会中断？

我很乐意提供有关如何消除运行时错误的建议（或者是否有更好的方法来管理不同的加载项？）...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T22:10:39.313

我认为不可能修改当前工作簿的 VBA 项目引用。

这是一个 ozgrid 链接，它讨论了删除损坏的引用，他说要以编程方式执行此操作，您必须从另一个工作簿中执行此操作。

[http://www.ozgrid.com/forum/showthread.php?t=23866](http://www.ozgrid.com/forum/showthread.php?t=23866)

> 嗨芭芭拉，
> 
> 1 参考 ISMISSING 已添加到工作簿 VB 项目参考中。（本身应该不是问题，除非您通过代码调用它或尝试安装它，然后将显示错误消息。
> 
> **2 必须从不同的工作簿执行以下过程，并且必须打开目标工作簿。**
> 
> VB：

```
Sub Del_Broken_Ref() 
      'Add a reference to the Microsoft Visual Basic for Applications Extensibility 5.3
     Dim VBReferens As VBIDE.Reference 
     Dim VBProjekt As VBIDE.VBProject 
     Dim stBok As String 

     stBok = Workbooks("Test.xls").Name 

     Set VBProjekt = Workbooks(stBok).VBProject 

     For Each VBReferens In VBProjekt.References 
         If VBReferens.IsBroken Then VBProjekt.References.Remove VBReferens 
     Next VBReferens 

 End Sub 
```

> 如果运行 Excel 2002 及更高版本，您必须允许通过工具 - 宏... - 安全访问 VB 项目。
> 
> [编辑]如果加载项 VB 项目已关闭，那么你就不走运了......

# windows - Windows 包装图标

> ID：12662279
> 
> 赞同：0
> 
> 时间：2012-09-30T15:08:09.217
> 
> 标签：windows, icons, packaging, tidesdk

我能够毫无问题地将我的桌面应用程序打包到我的 Windows 机器上并且应用程序运行。这一切都很棒。但是在我从生成的 MSI 文件运行安装后分配给该文件的图标是默认的 Titanium 图标。

我正在运行 Win7、1.2.0.RC4

我正在使用的打包命令是： `%APPDATA%\titanium\sdk\win32\1.2.0.rc4\tibuild.py" -p PACKAGE -d "%HOMEPATH%\desktop" -t bundle "%HOMEPATH%\Documents\Titanium Studio Workspace\myApp`

是否可以将该图标更改为我在资源目录中为应用程序使用的图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T03:29:13.840

tiapp.xml 使用 XML 语法提供应用程序配置。只需在图标标签之间分配您的图标。这是 HelloWorld 应用程序的示例：

```
 <?xml version='1.0' encoding='UTF-8'?>
    <ti:app xmlns:ti='http://ti.appcelerator.org'>
    <id>com.example.helloworld</id>
    <name>HelloWorld</name>
    <version>0.1.0</version>
    <publisher>prattd</publisher>
    <url>http://example.com</url>
    <icon>default_app_logo.png</icon>
    <copyright>2012 by prattd</copyright>
    <window>
    <id>initial</id>
        <title>HelloWorld</title>
        <url>app://index.html</url>
        <width>700</width>
        <max-width>3000</max-width>
        <min-width>0</min-width>
        <height>500</height>
        <max-height>3000</max-height>
        <min-height>0</min-height>
        <fullscreen>false</fullscreen>
        <resizable>true</resizable>
        <chrome scrollbars="true">true</chrome>
        <maximizable>true</maximizable>
        <minimizable>true</minimizable>
        <closeable>true</closeable>
    </window>
    </ti:app> 
```

应用程序的结构是这样的：

```
 ├── CHANGELOG.txt
    ├── LICENSE.txt
    ├── README.md
    ├── Resources
    │   ├── app.js
    │   ├── default_app_logo.png
    │   └── index.html
    ├── manifest
    └── tiapp.xml 
```

使用上述内容，您可以设置应用程序图标，但不能设置应用程序打包时创建的安装程序品牌。

对于安装程序，可以通过将 SDK 本身中的一些文件替换为您自己的文件来自定义它。我们将在我们的新 TideBuilder 中做更多的工作来公开这些，在即将发布的版本中，潮汐构建器 CLI 以覆盖默认值。

如您所知，在 Windows 7 上，1.2.0.RC4 SDK 位于 C:\ProgramData\Titanium。安装程序艺术和图标位于 C:\ProgramData\Titanium\sdk\win32\1.2.0.RC4

您对 Windows 安装程序感兴趣的文件如下：

*   default_banner.bmp
*   default_dialog.bmp
*   钛.ico

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:11:40.127

不知道这是否仍然相关但为了使图标转换至少在 v 1.3.1 上工作，您需要安装 ImageMagick，否则它不会使用您配置的图标更新您的应用程序图标。这当然是在 Windows 下，但我想其他平台也是如此。

[关联](https://www.imagemagick.org/script/download.php#windows)

安装二进制发行版并重启 TideSDK Developer，重新打包您的应用程序，图标应该会更新。检查包装的输出。

# php - 如何使用 MySQL 数据库中的记录动态分配类属性？

> ID：12662281
> 
> 赞同：1
> 
> 时间：2012-09-30T15:08:17.663
> 
> 标签：php, dynamic, properties

```
<?php

class User {

// properties

public $table = 'users';
public $id;
public $username ;
public $password ; 
public $first_name ;
public $last_name ; 
```

上面的 (id, username..., last_name) 是MySQL 数据库中**users表的列。****在使用 id 从用户**表中获取（我正在使用 PDO）特定记录后，我如何将所有记录动态分配给它们各自的属性（一个函数可能会帮助搜索所有可用属性并在结果关联数组中搜索这些属性然后将这些特定值分配给它们各自的属性）？

```
// methods

public function set_user($id){
    global $dbh;
    // sql
    $sql = "SELECT * FROM $this->table WHERE id = {$id}";
    // return result array
    $result_arr = $dbh->pdo_query_fetch($sql);
} 
```

`$result_arr`包含 id、username、password、first_name 和 last_name 的关联数组。

注意：这`pdo_query_fetch()`是一个用户定义的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T15:19:33.070

您正在使用 PDO，它具有`PDO::FETCH_INTO`：

```
PDO::query ( string $statement , int $PDO::FETCH_INTO , object $object ) 
```

请参阅[PDO::query^(*文档*)](http://php.net/manual/en/pdo.query.php)。

可能是您的“自己的”数据库类“拥有”您，因为您太早开始封装事物。这可能需要你向你的`$dbh`类添加一个额外的函数和/或你可能想要开始重构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T15:18:08.407

我建议向您的用户类添加一个方法：

```
public function Assign( $vars = array( ) )
{
    if( is_object( $vars )) {
      $this->Assign( get_object_vars( $vars ));
      return;
    }

    foreach ( $vars as $key => $value )
      if ( property_exists( $this, $key ) )
        $this->$key = $value;
} 
```

使用此方法，您可以将另一个对象或数组的属性设置为现有对象。

你可以像这样使用它：

```
myUser = new User();
myUser->Assign($result_arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T15:18:28.150

您可以使用[`get_object_vars`](http://www.php.net/manual/en/function.get-object-vars.php)

```
$properties = get_object_vars($this);
foreach ($properties as $property => $property_value) {
  if (isset($result_arr[$property])) 
    $this->$property = $result_arr[$property];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T15:22:29.387

最好是使用`PDOStatement::fetchObject`（[docs](http://www.php.net/manual/en/pdostatement.fetchobject.php)）或`PDO::query`带有`PDO::FETCH_INTO`标志（[docs](http://www.php.net/manual/en/pdo.query.php)），但如果由于某些原因无法做到这一点：

```
foreach ($result_arr as $key => $value) {
    if (property_exists($user, $key)) {
       $user->$key = $value;
    }
} 
```

您也可以使用 __set 扩展 User 类：

```
public function __set($key, $value) {
    // do nothing
} 
```

它将在每个不可访问的属性调用（私有或未定义）上调用

# asp.net-mvc-3 - HTTP 请求的内容长度 > 正文大小

> ID：12662282
> 
> 赞同：6
> 
> 时间：2012-09-30T15:08:22.907
> 
> 标签：asp.net-mvc-3, http, jquery, iis-7, httpwebrequest

我正在管理一个网站，该网站在过去几个月通过使用 MVC 3.0 ASP.net 构建的 IIS 7.5 运行良好。当我们的 AJAX POST 请求（通过 jQuery 触发）失败时，我们会时不时地面临一个问题，因为正在发布的 JSON 被截断。

到目前为止，我们发现对于所有此类请求，请求的“Content-Length”标头包含的数据比我们实际在请求中获得的数据多。

我们已经在 web.config 中将**maxRequestLength**设置为 51200，并且我相信**maxAllowedContentLength**的值有一个相当大的默认值（我们没有在我们的配置中设置它）。我也有一个失败的请求，“内容长度”低至 7301（字节），但我们设法只得到了 2179 个字节。所以我不怀疑这会达到任何限制。

有问题的请求的请求标头如下

*   缓存控制：无缓存
*   连接：保持活动
*   Pragma：无缓存
*   内容长度：7301
*   内容类型：应用程序/json；字符集=utf-8；
*   接受：应用程序/json、文本/javascript、*/*；q=0.01
*   接受编码：gzip，放气
*   接受语言：en-us,en;q=0.5
*   用户代理：Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1
*   X-Requested-With: XMLHttpRequest

有任何想法吗 ？？

* * *

**更新**：我已经能够进一步将问题与我们的代码隔离开来。编写了一个独立的控制器，它接受 JSON 字符串并将其反序列化。如果出现错误，它会记录错误。

当我在 50 个请求的循环中与 150 个并发线程并行访问此控制器时，我会遇到一些失败，其中此控制器接收的 JSON 被截断。现在我们非常专注于优化 IIS 并阅读有关可能相关的各种参数的更多信息（目前我们在 IIS 上使用默认参数运行）。

我强烈认为 150 个并发连接应该没什么大不了的，我真诚地希望调整一些参数我们应该能够解决这个问题。一旦我们解决了这个问题，将分享我的发现。

* * *

**更新 2（10 月 8 日） **：我进一步缩小了问题的范围。我在 IIS 中打开错误日志，发现我失败的请求在读取数据时出现以下错误

```
BytesReceived = 0
ErrorCode = 2147943395
Error Description = "The I/O operation has been aborted because of either a thread exit or an application request.(0x800703e3)" 
```

我在 iis 论坛上找到有关此错误的信息，但尚未尝试给出（多个）建议。以下链接可以作为搜索更多内容的良好起点

[http://forums.iis.net/p/1149787/1917288.aspx](http://forums.iis.net/p/1149787/1917288.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T05:20:11.573

我终于找出了解决方案的原因和解决方法。不幸的是，它不适用于我的所有环境，但有助于生产环境。在下面找到详细信息

事实证明这是由于 Windows 2008 R2 中的一个错误造成的，它使 asp.net 相信客户端已断开连接，即使它没有断开连接。可以在[http://support.microsoft.com/kb/977453](http://support.microsoft.com/kb/977453)找到相同的修补程序。该修复程序已经是 Windows 2008 R2 SP1 的一部分（可从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=269)找到）。

虽然该修补程序在运行 Windows 2008 R2 的一个环境中对我有效，但它不能应用于带有 SP1 的 Windows 2008 R2。不幸的是，该问题仍然可以在 SP1 上运行的环境中重现，并且仍未解决。[我已在 IIS 论坛上针对此问题在http://forums.iis.net/t/1192310.aspx](http://forums.iis.net/t/1192310.aspx)上打开了一个新案例，并将在那里进行跟踪。

要了解有关此问题的更多信息 - 您可以关注[http://forums.iis.net/p/1149787/1917288.aspx上的主题](http://forums.iis.net/p/1149787/1917288.aspx)

# css - @font-face 质量问题

> ID：12662284
> 
> 赞同：2
> 
> 时间：2012-09-30T15:08:26.643
> 
> 标签：css, fonts, font-face

我在 Photoshop 中设计了一个网站，并且对结果很满意，所以我开始编写它。但是，我在字体渲染方面遇到了一些麻烦。与 Photoshop 相比，该字体在浏览器中看起来很糟糕。然而，字体从一开始就在 Opera 中顺利渲染。

经过一番搜索，我还设法让它在 Chrome 和 Safari 中顺利呈现。我通过在我的 CSS 中将“svg”移动到 @font-face 的顶部来修复它。

但是，我仍然在使用 Firefox 和 Internet Explorer 时遇到问题。我相信这两个最新版本。

**一张图片（[原图](https://i.imgur.com/czRvD.png)）：** ![在此处输入图像描述](../Images/ace2100bee5263aef5fd16ccba5e98d5.png) 蓝色的文字是问题所在。

**@font-face 代码：**

```
@font-face {
    font-family: 'MuseoSlab500Regular';
    src: url('../fonts/Museo_Slab_500-webfont.eot');
    src: url('../fonts/Museo_Slab_500-webfont.svg#MuseoSlab500Regular') format('svg'),
         url('../fonts/Museo_Slab_500-webfont.woff') format('woff'),
         url('../fonts/Museo_Slab_500-webfont.eot?#iefix') format('embedded-opentype'),
         url('../fonts/Museo_Slab_500-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
} 
```

到目前为止，我找到并尝试过的唯一解决方案是重新排列 @font-face 中的行。正如我所说，这解决了某些浏览器的问题，但没有解决 Firefox 和 Internet Explorer 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:45:08.330

我认为文本在浏览器中呈现略有不同是可以的。在不同的操作系统上，您会收到更多不同的渲染（尝试检查 OS X 或 Ubuntu）。这也没关系。Photoshop 在这里是一个不好的参考，浏览器提供了最终外观，浏览器将您的网站显示给您的用户。

相反，我相信你应该更正你的语法，因为它不适用于 IE 8-。您正在`src`使用 EOT 字体声明属性 - 这将起作用，但仅适用于 IE 6+。然后你重新声明它，因为你包含了不止一种格式，IE 将无法加载它并备份到默认字体。

您可能感兴趣的补充阅读：

*   [仔细看看字体渲染](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)
*   [新的防弹@Font-Face 语法](http://www.fontspring.com/blog/the-new-bulletproof-font-face-syntax)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:06:55.560

渲染不同的原因有很多，而且大多数情况下您无能为力。尝试使用字体格式只会给主题增加一些变化——不同的系统仍然会以不同的方式呈现字体。

看起来 Firefox 正在应用字距调整（例如，“ä” 比其他浏览器更接近前面的“V”）。但是，至少 fonts.com 提供的 Museo 字体没有紧缩对。但是您没有指定从哪里获得字体-

# cocos2d-iphone - 触摸按钮移动 Box2d 对象？

> ID：12662291
> 
> 赞同：1
> 
> 时间：2012-09-30T15:09:19.843
> 
> 标签：cocos2d-iphone, box2d-iphone

我在屏幕上有一个播放器 box2d 对象，它应该由两个按钮控制，一左一右。当你按下右键时，播放器应该向右移动，但是当你按下左键时，播放器应该**立即**停止向右移动并向左移动。反之亦然。我试图这样做以向右移动，b2Vec2脉冲（4, 0）; body->ApplyLinearImpulse(impulse, body->GetWorldCenter());

这向左移动 b2Vec2 脉冲(4, 0); body->ApplyLinearImpulse(impulse, body->GetWorldCenter());

这可行，但是当我按右然后左时，播放器不会立即向左移动，而是继续向右移动一段时间，然后向左移动。我如何确保不会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:28:49.753

在应用新力之前将身体的 linearVelocity 设置为 b2Vec2_zero – LearnCocos2D 昨天

# excel - 从查找的行/范围中获取最大值列

> ID：12662293
> 
> 赞同：1
> 
> 时间：2012-09-30T15:09:39.033
> 
> 标签：excel, excel-2007, excel-formula

经过多次不成功的尝试，我需要你的帮助来制定一个公式。

我试图在应该以某种方式查找的单元格范围内获取最大值。

我有每个项目编号的销售表，其中包含四个国家中每个国家的销售额

```
 SE   DK  FI  NO
#1  10%  20% 70% 0%
#2  20%  20% 50% 10% 
```

所以，这张桌子被称为“Salessplit”。

在另一张表中，我有带有项目编号的行，我想返回该项目的最高销售国家/地区。

```
#1 Look up #1 from Salessplit and return "FI"(that has the highest sales)
#2 Look up #2 from Salessplit and return "FI" here as well 
```

知道如何管理这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:28:39.430

假设您的表格在 Sheet1!A1:E10 中，标题在第 1 行，项目编号在 A 列，然后在 sheet2!B2 中尝试这个公式，假设项目编号在 Sheet2!A2

`=INDEX(Sheet1!B$1:E$1,MATCH(MAX(INDEX(Sheet1!B$2:E$10,MATCH(A2,Sheet1!A$2:A$10,0),0)),INDEX(Sheet1!B$2:E$10,MATCH(A2,Sheet1!A$2:A$10,0),0),0))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:48:19.193

假设相同，但方法略有不同，使用偏移量而不是几个索引。

`=INDEX(Sheet1!A1:E1,,MATCH(MAX(OFFSET(Sheet1!A1:E1,MATCH(Sheet1!A2,Sheet1!A:A,0),0,1,)),OFFSET(Sheet1!A1:E1,MATCH(Sheet1!A2,Sheet1!A:A,0),0,1,),0))`

# jquery - 使用 JQuery 通过鼠标单击更改图像

> ID：12662296
> 
> 赞同：1
> 
> 时间：2012-09-30T15:10:05.517
> 
> 标签：jquery

我正在尝试制作图像幻灯片。我没有使用 Jquery 的经验，我需要一些帮助。所以基本上我在 div#slideshow 中有一张图片。我想在其中放置多个图像，并借助 Jquery 的强大功能，当用户单击左/右按钮时，它将更改为下一个图像。这是我的 HTML 部分代码 -

```
<!DOCTYPE html>
<html lang="en">
<head>
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<style>
body {
background: url(bg.png);
width: 999px;
font-family: 'Open Sans', sans-serif;
margin: 0 auto;
}
p {
color: #222;
}
a {
color: #777;
font-size: 14px;
font-weight: bold;
text-decoration: none;
padding: 10px;
}
#nav {
float: right;
}
#slideshow {
width: 999px;
margin: 100px -50px;
}
#content {
background: #FFF;
padding: 50px;
height: 500px;
border-radius: 1px;
margin: 50px auto;
}
</style>
</head>
<body>
<div id="content">
<div id="nav">
<a href="..">Home</a>
<a href="..">About</a>
<a href="..">Work</a>
<a href="..">Contact</a>
</div>
<div id="slideshow">
<img src="image.jpg" />
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:13:21.013

查看[`SlidesJS`](http://www.slidesjs.com/)jQuery 的插件。这是示例页面：[http ://www.slidesjs.com/#examples](http://www.slidesjs.com/#examples)

有更多的插件可以做到这一点（[`ResponsiveSlides`](http://responsive-slides.viljamis.com/)例如），但是这个非常简单，你应该能够弄清楚。

# javascript - 本地主机上的 Node.js（和 socket.io）

> ID：12662298
> 
> 赞同：0
> 
> 时间：2012-09-30T15:10:35.507
> 
> 标签：javascript, node.js, socket.io

在我的服务器上，我可以使用 socket.io 很好地运行我的节点服务器。但是，当我在 localhost 上尝试几乎完全相同的代码时，我无法让它工作。

**客户端.js**

```
$(function() {

  /* Check for a <canvas> */
  if (! ("getContext" in document.createElement("canvas"))) {
    alert("Sorry, it looks like your browser does not support canvas!");
    return false;
  }

  /* The URL of your web server and the port */
  //var url = "http://57o9.org:8081";
  var url = "localhost:8081";

  var doc = $(document);
  var win = $(window);
  var canvas = $("#canvas");
  var ctx = canvas[0].getContext("2d");

  /* Generate an unique ID based on time */
  var id = Math.round($.now() * Math.random());

  var drawing = false;

  var clients = {};
  var cursors = {};
  var socket = io.connect(url);

  socket.on("moving", function(data) {
    /* Create a new cursor for new users */
    if (! (data.id in clients)) {
      cursors[data.id] = $("<div class=\"cursor\">").appendTo("#cursors");
    }

    /* Update mouse pointer data */
    cursors[data.id].css({
      "left" : data.x,
      "top" : data.y
    });

    /* Is the user drawing? */
    if (data.drawing && clients[data.id]) {

      /* Draw a line on the canvas. clients[data.id] holds
         the previous position of this user"s mouse pointer */

      drawLine(clients[data.id].x, clients[data.id].y, data.x, data.y);
    }

    /* Save the current client state */
    clients[data.id] = data;
    clients[data.id].updated = $.now();
  });

  var prev = {};

  canvas.on("mousedown", function(e) {
    e.preventDefault();
    drawing = true;
    prev.x = e.pageX;
    prev.y = e.pageY;
  });

  doc.bind("mouseup mouseleave", function() {
    drawing = false;
  });

  var lastEmit = $.now();

  doc.on("mousemove",function(e) {
    if ($.now() - lastEmit > 30) {
      socket.emit("mousemove", {
        "x": e.pageX,
        "y": e.pageY,
        "drawing": drawing,
        "id": id
      });

      lastEmit = $.now();
    }

    /* Draw a line for the current user"s movement */
    if (drawing) {
      drawLine(prev.x, prev.y, e.pageX, e.pageY);

      prev.x = e.pageX;
      prev.y = e.pageY;
    }
  });

  /* Remove inactive clients after 10 seconds of inactivity */
  setInterval(function() {
    for (ident in clients) {
      if ($.now() - clients[ident].updated > 10000) {
        cursors[ident].remove();
        delete clients[ident];
        delete cursors[ident];
      }
    }

  }, 10000);

  function drawLine(fromx, fromy, tox, toy) {
    fromx -= canvas[0].offsetLeft;
    tox -= canvas[0].offsetLeft;
    fromy -= canvas[0].offsetTop;
    toy -= canvas[0].offsetTop;

    ctx.moveTo(fromx, fromy);
    ctx.lineTo(tox, toy);
    ctx.stroke();
  }
}); 
```

**服务器.js**

```
/* Include libraries */
var app = require('http').createServer(handler);
var io = require('socket.io').listen(app);
io.set("log level", 1); // Disable socket.io logging
var nodeStatic = require('node-static');

/* This will make all the files in the current folder accessible from the web */
var fileServer = new nodeStatic.Server("./");

/* Set up server port */
app.listen(8081);

/* Check if the URL of the socket server is opened in a browser */
function handler(request, response) {
  request.addListener("end", function() {
    fileServer.serve(request, response); // Return the correct file
  });
}

/* Listen for incoming connections from clients */
io.sockets.on("connection", function (socket) {
  socket.on("mousemove", function (data) {
    socket.broadcast.emit("moving", data);
  });
}); 
```

这是一个基本的协作绘图程序。在我的服务器上它可以工作 - 我可以画画，其他人可以看到我画的东西，我们可以一起画画。但是，在 localhost:8081 上它不起作用。

我尝试调试 socket.io，每次我在 localhost:8081 上打开一个新页面时，我得到的唯一结果就是以下行。

调试 - 提供静态内容 /socket.io.js

我当前的目录如下所示：

```
node_modules  js  index.html  assets 
```

在 Firefox Aurora 上，Web 控制台没有给出任何错误，但在 Chromium 上我得到这个错误：

```
Failed to load resource http://0.0.31.145:8081/socket.io/1/?t=1349017485579 
```

我在项目目录上和项目目录上都安装了 socket.io `~/node_modules/`。我正在运行节点服务器`node js/server.js`。

有任何想法吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:30:49.257

错误出现在 client.js 上。“localhost:8081”不对，要写“http://localhost:8081”。

# iphone - iOS：在屏幕上显示来自 XML (DTD) 文件的信息？

> ID：12662299
> 
> 赞同：0
> 
> 时间：2012-09-30T15:10:37.010
> 
> 标签：iphone, ios, xml

我对这个领域很陌生，但我被分配了这个任务。我已经为此工作了三周，但没有成功，希望有人可以帮助我或为我指明正确的方向。

我正在尝试将 DTD 文件中的信息显示到我的 iOS 屏幕上。DTD 文件位于 Web 服务器上。我可以很好地解析文件，到目前为止一切似乎都在工作。但是当我去显示信息时（在 tableView 内）它出现空白。

我需要知道的是：

*   显示文件输出的最佳方式是什么（tableView、视图等？）

我已经查看了有关此主题的示例代码、阅读文章等，并且对如何显示输出感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:04:09.660

任何可能的原因......在您的问题中发布表格数据源代码可能会很有用。我认为最常见的原因是表视图上未连接的数据源插座。请检查 xib/storyboard 中表视图的连接，并确保它的数据源出口连接到具有数据源代码（[这些方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UITableViewDataSource)）的类，可能是包含表的视图控制器。

连接的检查器是 xcode 右侧窗格中最右侧的选项卡。

# jpa - 在 JPQL 查询（或使用 FetchType）中隐藏用户中的密码字段

> ID：12662301
> 
> 赞同：1
> 
> 时间：2012-09-30T15:11:02.443
> 
> 标签：jpa, persistence, jpql, openjpa

我有一个这样的实体：

```
public class User {
    @Column(name = "password")
    @Element(name = "pass", data = true)
    private String password;
} 
```

我想要的是默认情况下不会在查询中读取/填充字段密码。但在某些情况下，我当然想检查 PWD，在这种特殊情况下，应该由 openJPA 在 User 对象中读取和填充 PWD。

我可以使用哪种 Fetch 策略或 JPQL 查询来实现这一点？我认为 FetchType.Lazy 仅适用于加入表而不是单个字段。我也无法想象一个 JPQL 查询，我可以告诉 openJPA 覆盖这个 FetchType 并加载这个字段，以防我真的需要它来进行 PWD 检查。

非常感谢！塞巴斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:07:40.567

实际上，可以将单个字段设置为延迟加载。只需使用惰性获取策略添加 @Basic 注释，如下所示：

```
public class User {
    @Basic(fetch = FetchType.LAZY)
    @Column(name = "password")
    @Element(name = "pass", data = true)
    private String password;
} 
```

此处提供更多详细信息：http: [//openjpa.apache.org/builds/1.1.0/docs/jpa_overview_meta_field.html#jpa_overview_meta_fetch](http://openjpa.apache.org/builds/1.1.0/docs/jpa_overview_meta_field.html#jpa_overview_meta_fetch)

# javascript - 替换 javascript 值

> ID：12662306
> 
> 赞同：-1
> 
> 时间：2012-09-30T15:12:27.627
> 
> 标签：javascript, jquery, image, replace

我发现了这个很酷的脚本，它可以放大图像（我想在我的博客上使用它）但我想使用更多的图片，而不仅仅是脚本上的图片。所以我实际上想在 mouseUp 上替换这个脚本中的值。因此 pic1、pic2、pic3 等的按钮必须替换“大图像”和正文中的。

希望可以有人帮帮我。

```
jQuery(document).ready(function($){

    $('#image2').addimagezoom({
        zoomrange: [2, 2],
        magnifiersize: [460,430],
        magnifierpos: 'right',
        cursorshade: false,
        cursorshadecolor: 'pink',
        cursorshadeopacity: 0.3 ,
        cursorshadeborder: '1px solid white',
        largeimage: 'http://www.rat-bikes.com/ratbikes/vanmoof-rotterdam.jpg' //<-- No comma after last option!
    })

}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:15:47.703

这样做......让所有图像都带有一个`class`和一个`alt`带有大图像的值。

```
<img src="thumb1.png" class="zoom" alt="full1.png" />
<img src="thumb2.png" class="zoom" alt="full2.png" /> 
```

现在在脚本中，附加所有 的事件处理程序，并在 的值`.zoom`的帮助下提供大图像的 URL 。`attr``alt`

```
jQuery(document).ready(function($){
    $('.zoom').addimagezoom({
        zoomrange: [2, 2],
        magnifiersize: [460,430],
        magnifierpos: 'right',
        cursorshade: false,
        cursorshadecolor: 'pink',
        cursorshadeopacity: 0.3 ,
        cursorshadeborder: '1px solid white',
        largeimage: $(this).attr("alt")
    });
}); 
```

# c - 使用内联 asm 在 C 中强制消除尾调用

> ID：12662311
> 
> 赞同：2
> 
> 时间：2012-09-30T15:13:02.457
> 
> 标签：c, gcc, assembly, x86

我有一个我一直在设计的小型编程语言，我想要一个相对简单的后端选项。由于所有通常的原因（例如“我不能遵循好的建议”和“我不知道汇编”），C 是一个相对不错的选择，更重要的是，我的语言中并没有太多的事实不能轻易地用 C 表示（更多的是关于类型检查器，没有 GC 或重型运行时来适应） - 除了一件事：优化的尾调用。

这不是一个交易破坏者：我真的不需要它，因为该语言具有循环结构，但它也应该是功能性的，所以如果可能的话，TCO 似乎是一个有价值的东西。Trampoline 或lazy-thunk 解决方案会起作用，但似乎（从文献中，我还**没有**分析过，而且无论如何也没有任何使用信息）对性能有明显的影响。不希望实现阻止用户以有效的方式表达问题。

[这个问题](https://stackoverflow.com/questions/3467180/direct-call-using-gccs-inline-assembly)让我认为应该可以创建一个相对简单的特定于平台的“tailcall”块，以替换“return”并强制执行我想要的行为。但是，由于对 x86 不够熟悉，我不知道如何控制 C 的自动堆栈操作，我应该将跳转的目标放在哪里等等。（在我看来，它在函数启动后扩展了堆栈。 ..所以我需要在尾调用之前缩小堆栈，这有点不必要，或者在堆栈操作之后以某种方式瞄准目标主体的开头，这听起来几乎不可能**编辑：**对于静态未知目标 ..？）

所以：

*   可以这样做吗？
*   可以安全地完成吗？
*   这是否明智？

我应该重复一遍，我知道可以实现在 C 中*工作*的尾调用消除（也就是说，我的高级语言，而不是 C 语言），我只想添加一个编译器和平台特定的优化，以帮助它或多或少与“真实事物”无法区分。而且我主要想使用 C，因为我对它非常有信心，而我从未使用过 LLVM，并且只有最基本的 x86 阅读知识，所以我希望跳过这一步并让输出正常工作。我知道在将来的某个时候我将不得不正确地学习这两者，但是......

（即我问这个是因为这个想法卡在我的脑海里，它让我觉得可能有更好的方法来做它（tm），而不是因为我*需要*解决方案来获得一个工作后端。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:44:04.793

> 可以这样做吗？

是的。

> 可以安全地完成吗？

是的。

> 这是否明智？

不。gcc 已经[为您做了 TCO，](https://stackoverflow.com/questions/490324/how-do-i-check-if-gcc-is-performing-tail-recursion-optimization)并且还支持[计算 goto](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Labels-as-Values.html)，所以绝对没有理由这样做。

# c# - 如何将数据表转换为列表 使用反射

> ID：12662318
> 
> 赞同：5
> 
> 时间：2012-09-30T15:14:05.800
> 
> 标签：c#, linq, c#-4.0, reflection

我有一个类的通用列表，我使用`Reflection`和扩展方法自动将其转换为 DataTable。现在我想反向执行它。我想转换`DataTable`为 List。更好地说我需要帮助编写一个期望`DataTable`并`Type`根据列名自动查找该类型（类）的属性并将值分配给该类型（类）的对象。就像这个psodu代码：

```
private List<T> ConvertToList<T>(DataTable dt)
{
    List<string> AllColumns = // Get All Column Names of a DataTable
    for(int i=0;i<dt.Rows.Count;i++)
    {
        foreach(var item in AllColumns )
        {
             //Get Property According To **ITEM**
             //Get Data Of Rows[i][item] and assign it to T.property
        }
    }
} 
```

我怎么能做到这一点？

* * *

**编辑 1)**

我像这样使用@Cuong Le的答案：

```
var properties = typeof(CustomType).GetProperties().ToList();
List<CustomType> list = ConvertToList<CustomType>(dt, properties); 
```

和 ：

```
private List<T> ConvertToList<T>(DataTable dt,List<PropertyInfo> fields) where T : class
{
    return dt.AsEnumerable().Select(Convert<T>(fields)).ToList();  <------
}

private T Convert<T>(DataRow row,List<PropertyInfo> fields) where T : class
{
    var properties = typeof(T).GetProperties().ToList();

    var objT = Activator.CreateInstance<T>();
    foreach (var pro in properties)
    {
        pro.SetValue(objT, row[pro.Name],null);
    }

    return objT;
} 
```

但是在行中我在它前面放了一个箭头我得到了这两个错误：

> 'Convert' 方法没有重载需要 1 个参数

和

> 无法从用法中推断方法“System.Data.EnumerableRowCollectionExtensions.Select(System.Data.EnumerableRowCollection, System.Func)”的类型参数。尝试明确指定类型参数。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T15:23:44.190

使用`AsEnumerable()`方法来支持 LINQ：

```
 private List<T> ConvertToList<T>(DataTable dt)
    {
        var columnNames = dt.Columns.Cast<DataColumn>()
            .Select(c => c.ColumnName)
            .ToList();

        var properties = typeof(T).GetProperties();

        return dt.AsEnumerable().Select(row =>
            {
                var objT = Activator.CreateInstance<T>();

                foreach (var pro in properties)
                {
                    if (columnNames.Contains(pro.Name))
                        pro.SetValue(objT, row[pro.Name]);
                }

                return objT;
            }).ToList();

    } 
```

> `GetProperties`使用指定的绑定约束搜索当前类型的属性。

此处的链接：http: [//msdn.microsoft.com/en-us/library/kyaxdd3x.aspx](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)

# javascript - Win8：在 default.js 之外访问 default.html 中的页面元素

> ID：12662321
> 
> 赞同：0
> 
> 时间：2012-09-30T15:15:31.953
> 
> 标签：javascript, windows-8, microsoft-metro

**我在default.html**中有以下页面元素：

```
<div id ="content">
   <div id="output"></div>
</div> 
```

在**default.js 中：**

```
...     
args.setPromise(WinJS.UI.processAll().done(function()
{
   var theOutput = document.getElementById("output");
   theOutput.innerText = "This is the output";
}));
.... 
```

这成功地生成了只有文本“这是输出”的应用程序

但是如果我把它移到一个新的脚本**script.js 中：**

```
(function ()
{
  "use strict";

  var theOutput = document.getElementById("output");
  theOutput.innerText = "This is the output";
}()); 
```

并在 default.html 中添加 script.js 作为脚本引用：

```
<script src="/js/script.js"></script><script src="/js/script.js"></script> 
```

我得到错误

> JavaScript 运行时错误：无法设置未定义或空引用的属性“innerText”

如何在 default.js 之外的其他脚本中访问输出 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:36:24.283

事实证明，script.js 需要等到页面元素被完全处理完。以下代码运行良好：

```
(function ()
{
   "use strict";
   WinJS.Utilities.ready(function ()
   {
     var theOutput = document.getElementById("output");
     theOutput.innerText = "This is the output";
   });
}()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:59:40.113

您还可以处理 DOMContentLoaded 事件，该事件会在 DOM 构建后触发（尽管图像可能尚未完全加载）。这就是我在很多基于画布的 Windows 应用商店游戏中所做的。

将此添加到主函数中：

```
document.addEventListener("DOMContentLoaded", initialize, false); 
```

然后只需执行您想要在初始化中触发的代码：

```
function initialize() {
    //Init Canvas
    canvas = document.getElementById("canvas");
    ctx = canvas.getContext("2d"); 
```

# jquery - p2p 网络上的第 3 方 API 的 AJAX 同源策略问题

> ID：12662323
> 
> 赞同：1
> 
> 时间：2012-09-30T15:16:08.350
> 
> 标签：jquery, xml, ajax, post, same-origin-policy

我正在开发一个 HTML5 webapp，用于控制具有用于接受命令的 TXAS XML API Web 服务的第 3 方机器人设备。我无权更改第 3 方 API，而且它非常基础。它具有具有基本授权的结构化 XML 命令格式，它不理解 JSON 或 JSONP，只是直接的 XML。

我正在尝试尽可能优雅地编写此代码，并将应用程序完全独立地包含在要加载到控制设备（平板电脑/智能手机）上的文件中，而无需在加载后与远程服务器进行任何交互。即，这将是平板电脑和它所控制的设备之间的 p2p 应用程序。

我认为我立即遇到了导致问题的 SOP 限制，但我不确定如何解决它，因为代码是平板电脑本地的，而我控制的设备不是。

这是我要执行的代码：

```
function postXML(strIN){            
    $.ajax({ 
        type: "POST", 
        url: "http://1.1.1.1/putxml",
        contentType: "text/xml",
        datatype: "xml",
        data: strIN,
        processData: false,
        beforeSend: function (xhr){ xhr.setRequestHeader("Authorization","Basic " + btoa("user:pass")); },
        error: function(request, error) { alert("error:" + error);}
        }); 
    }
$("#preset1").click(function(){
    var str = '<Command><Preset><Activate><PresetId>1</PresetId></Activate></Preset></Command>';
    postXML(str);
    }); 
```

当从本地驱动器启动时，代码在 safari 中执行干净；但是，当以相同方式启动时（触发错误事件），它将不适用于 chrome、firefox 或 IE。

由于大多数将使用它的设备都是 iPhone/ipad，我认为这没什么大不了的，但是，我将页面加载到设备上的方法是通过 HTTP，然后在本地保存。当以这种方式完成时，它也会在 safari 上失败。我使用了一个 diff-merge 程序来验证 HTTP 加载的代码和本地源代码是否相同并且它们是相同的，但是由于某种原因，HTTP 加载的代码将不会执行（触发错误事件）。

我在这里达到了 SOP 限制吗？我已经寻找解决此问题的可能方法，但它们似乎都需要外部服务器或代理，这不是我的部署方案的选项。

我还应该注意，我不希望从设备返回任何东西，也不需要与它进行任何其他交互，除了将 XML 发布到它的 web 服务。

来自 Chrome 的一些额外调试数据：

```
Failed to load resource: Resource failed to load http://1.1.1.1/putxml

OPTIONS http://1.1.1.1/putxml Resource failed to load jquery-1.8.2.min.js:2
send                  jquery-1.8.2.min.js:2
p.extend.ajax         jquery-1.8.2.min.js:2
postXML               index-working.html:35
(anonymous function)  index-working.html:53
p.event.dispatch      jquery-1.8.2.min.js:2
g.handle.h            jquery-1.8.2.min.js:2 
```

# c - 文件不会在 MS Visual Studio 中编译，但会在 GCC 中编译。为什么？

> ID：12662326
> 
> 赞同：0
> 
> 时间：2012-09-30T15:16:28.240
> 
> 标签：c, visual-studio, gcc, c89

我写了这样的示例代码：

```
#include <stdio.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>

char* print_errno_msg(int value);

int main(void){
    struct stat buffer;
    int status;
    status = stat("./main.c", &buffer);
    char *msg = print_errno_msg(errno); /* syntax error : missing ';' before 'type' */

    printf("status = %i; errno = %i; %s\n", status, errno, msg); /* 'msg' : undeclared identifier */
    errno = 0;
    int ch = getchar(); /* syntax error : missing ';' before 'type' */
    return 0;
}

char* print_errno_msg(int value){
    static char *messages[] = {
        "",
        "Operation not permitted",
        "No such file or directory",
        "No such process"
    };
    return messages[value];
} 
```

它通过 gcc 在 Ubuntu 12.04 中很好地编译和执行。我尝试通过 MS Visual Studio 2012 在 Windows 8 中编译和运行它。我创建了空的 c++ 项目并创建了新文件：main.c。但是我在编译过程中遇到错误（请阅读代码中的注释）。

我不明白那个错误信息。我的语法不对吗？为什么会这样？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:23:20.373

您正在使用 Windows 上不可用的 Unix 头文件。

另一件事是VC++的C编译器只支持C89。这不允许混合声明和代码。所有声明都必须位于范围的开头。

# iphone - nsarray 升序排序

> ID：12662328
> 
> 赞同：2
> 
> 时间：2012-09-30T15:16:35.750
> 
> 标签：iphone, ios, xcode, ipad

我有一个具有以下键值的 NSditonary 对象

密钥：1.infoKey、2.infoKey、3.infoKey、4.infoKey、5.infoKey、6.infoKey、7.infoKey、8.infoKey、9.infoKey、10.infoKey、11.infoKey

请注意，它们没有排序，可以按任何顺序排列，即 3.infoKey、7.infoKey、2.infoKey 等

我要做的是对键值进行排序，即 1,2,3,4,5,6,7,8,9,10,11 .... 这是我迄今为止使用的代码，但每次我做了一个排序，它按我不想要的顺序排序（见下文）

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *stringsPlistPath = [[paths objectAtIndex:0] stringByAppendingPathComponent:@"talkBtns.plist"];

        NSMutableDictionary *dictionary2 = [[NSMutableDictionary alloc] initWithContentsOfFile:stringsPlistPath];

        NSArray *myKeys = [dictionary2 allKeys];

//This didn't give the right results
        //sortedKeys = [myKeys sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

//This didn't give the right results either
        NSSortDescriptor* sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:nil ascending:YES selector:@selector(localizedCompare:)];
        sortedKeys = [myKeys sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];

    // ***********
        // GET KEY VALUES TO
        // LOOP OVER
        // ***********
        /* */
        for (int i = 0; i < [sortedKeys count]; i++) 
        {
            NSLog(@"[sortedKeys objectAtIndex:i]: %@", [sortedKeys objectAtIndex:i]);
        }

    //output I get
    [sortedKeys objectAtIndex:i]: 1.infoKey
    [sortedKeys objectAtIndex:i]: 10.infoKey
    [sortedKeys objectAtIndex:i]: 11.infoKey
    [sortedKeys objectAtIndex:i]: 2.infoKey
    [sortedKeys objectAtIndex:i]: 3.infoKey
    [sortedKeys objectAtIndex:i]: 4.infoKey
    [sortedKeys objectAtIndex:i]: 5.infoKey
    [sortedKeys objectAtIndex:i]: 6.infoKey
    [sortedKeys objectAtIndex:i]: 7.infoKey
    [sortedKeys objectAtIndex:i]: 8.infoKey
    [sortedKeys objectAtIndex:i]: 9.infoKey 
```

我尝试了两种方法，它们都给出了相同的结果。我搜索了堆栈溢出和谷歌的每个地方，但找不到适合我的需求。

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-30T15:29:54.810

您应该能够使用`sortedArrayUsingComparator`with`options:NSNumericSearch`对其进行排序以按实际数字顺序获取它，因为在严格的字母排序中，10 在 2 之前；

```
NSArray * sortedKeys = 
    [myKeys sortedArrayUsingComparator:^(id string1, id string2) {
        return [((NSString *)string1) compare:((NSString *)string2) 
                                      options:NSNumericSearch];
}]; 
```

# apache - 使用 Apache 将一个域的所有子域代理到另一个域

> ID：12662329
> 
> 赞同：2
> 
> 时间：2012-09-30T15:16:34.893
> 
> 标签：apache, reverse-proxy, subdomain, wildcard-subdomain

我正在尝试使用 Apache 构建反向代理。我的目标是将表单的所有请求代理`<subdomain>.domain.com/file.html`到`www.domain.com/<subdomain>/file.html`.

我不知何故需要捕获`<subdomain>`原始 URL 并使用它来构造目标 URL。

我假设我需要一个 Apache 指令，它可以匹配整个 URL 上的正则表达式，而不是 url 之后的部分`%{HTTP_HOST}`，因为我的目标 URL 包含原始 URL 的子域。出于这个原因，我不能使用该`ProxyPassMatch`指令，因为它只匹配 URL 之后的部分`%{HTTP_HOST}`。

另一种选择是使用`VirtualHost`与我的子域一样多的部分。但是当然这个解决方案没有意义，因为我的子域会不断增加。

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:27:08.257

好的，我设法使用重写规则解决了它。

```
# Requires Apache module ``proxy_http``, ``rewrite``
<VirtualHost *:80>
    ServerName primary.domain.com
    ServerAlias *.domain.com

    ProxyRequests Off
    <Proxy *>
         Order deny,allow
         Allow from all
    </Proxy>

    RewriteEngine On

    RewriteCond %{HTTP_HOST}/%{REQUEST_URI} ^(.*)\.domain\.com/(.*)$
    RewriteRule (.*)    http://www.domain.com/%1%2 [P]

 </VirtualHost> 
```

基本上发生的事情是这样的：

*   `RewriteCond`*匹配 URL 与.domain.com/*匹配的所有传入请求
**   `RewriteRule`将请求代理到 URL `http://www.domain.com/%1/%2`，其中`%1` 和`%2`分别是原始请求的子域和请求 uri。*

# java - 使用本地类变量处理句柄/线程

> ID：12662331
> 
> 赞同：0
> 
> 时间：2012-09-30T15:17:11.047
> 
> 标签：java, android, multithreading

我正在用 android 编程，我想创建一个延迟。当我添加到我的活动类线程时，应用程序堆栈在将数据实现到变量后，但是当我使用处理程序（带有 postDelay）时它工作正常。1.为什么？

代码（mapView 和 userPointOverlay 是类私有局部变量）：

使用线程：

```
 new Thread(new Runnable()       //2.5sec delay between switches
                {

                    @Override
                    public void run()
                    {
                        try
                        {
                            Thread.sleep(5000);             
                            mapView.getOverlays().remove(userPointOverlay); 
                        } catch (InterruptedException e)
                        {
                            e.printStackTrace();
                        }                           
                    }
                }).start(); 
```

使用处理程序：

```
 handler.postDelayed(new Runnable()
                {

                    @Override
                    public void run()
                    {
                        mapView.getOverlays().remove(userPointOverlay);                     
                    }
                }, 5000); 
```

2.线程和处理程序之间的主要区别是什么？我知道处理程序在我从它调用他的线程上运行（与主线程 cpu 时间共享），它是正确的吗？

1.  看起来我可以从处理程序访问类局部变量。但是在线程中，eclipse让我在线程中编写局部类变量，但是当它启动时，这个局部变量的地址不是线程局部变量，当线程运行时我无法访问这个类局部变量。

谢谢你！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:20:55.580

对于第一个选项，禁止从 UI 线程以外的其他线程访问诸如 mapView 或任何 UI 组件之类的视图，这就是 Thread 版本会失败的原因。

对于延迟，使用 Handler 的第二个选项是更好的方法，并且不会失败，因为 Handler 是在 UI 线程上声明的，这带来了关于 Handlers 的重要一点 - 处理程序在创建它们的线程上运行，但是那个线程必须初始化为Looper线程，比如UI线程。

如果您可以发布例外以清楚起见，那也很棒。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:02:51.710

我不明白第一个问题。请改写

`Handler`a和a的区别`Thread`很大。Android SDK 只允许从它运行的线程更改 UI / Activity 线程。

换句话说，您不能对不同的线程`TextView`或`Button`从不同的线程进行更改。

Android 提供了`Handler`该类，它允许您将消息从一个线程发送到另一个线程。

您应该做的是在您的主要活动中放置一个公共静态处理程序成员，并`handleMessage`在类中的某处实现该方法。

现在，当您在一个单独的线程中时，调用您的处理程序。

该类提供了几种方法`Handler`，例如`sendEmptyMessage(int)`和`sendMessage(Message)`。使用最适合您的应用程序。

此外，在您提供的示例中，您正在使用该`Handler.post()`方法。在这种情况下，它只会`Runnable`在您的主线程上创建一个新线程，并且不会调用该`handleMessage`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:26:16.563

类中的私有字段只能在声明它们的类和该类的内部类中访问。您的处理程序是您的类的一个字段，处理程序代码本身是一个内部类。因为您的可运行文件是在新线程上创建的，所以它无法访问声明类的私有字段。你可以这样做：

```
class MyClass {

   private MapView mapView;
   private Boolean usePointerOverlay;

   private static Thread thread;

   void method(){

      thread = new Thread(new Runnable.....

   }
} 
```

# design-patterns - SSIS - 集成业务规则的最佳方式？

> ID：12662332
> 
> 赞同：1
> 
> 时间：2012-09-30T15:17:12.870
> 
> 标签：design-patterns, metadata, ssis

将数据转换中的业务规则与 SSIS 中的数据加载/提取分开的最佳方法是什么？

SSIS 中是否有支持这种设计的已知模式？（没有外部技术，例如使用 c# 的自定义任务）。

根据我的经验，这两个是同时使用派生列、条件拆分等完成的。

感谢分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T22:03:54.147

以下是加载数据仓库的常见模式...

1.  从源系统中提取数据。在下一步之前是否将原始源数据暂存到单独的暂存区域取决于几个因素，我不会在这里讨论。

2.  根据需要转换数据以适合您的目的地 - 这通常是星型模式数据模型。这是除了代理键查找之类的正常内容之外还应用业务规则的时候。

3.  将数据加载到数据集市/仓库

从这个意义上说，因为业务规则/逻辑的应用发生在转换步骤中……它与提取/加载步骤是分开的。

*你有没有更具体的事情想要完成？（我问是因为“元数据”标签）*

# php - 在 PHP 中选择设计模式？

> ID：12662334
> 
> 赞同：1
> 
> 时间：2012-09-30T15:17:21.657
> 
> 标签：php, design-patterns

我使用 PHP 开发 Web 应用程序。我有很多使用数据库连接的类。

这是我通常使用的结构；

```
class SomeClass {
    private $db;

    function __construct(mysqli $db) {
        $this->db = $db;
    }

    function SomeFunction() {
        $this->db->query(...);
    }
} 
```

这就是我想用的；

```
class Common {
    public static DB = new mysqli(...);
}

class SomeClass {
    function SomeFunction() {
        Common::DB->query(...);
    }
} 
```

我的问题有两个部分；

1.  哪一个是更好的实践？如果我使用第一个，我必须将数据库对象传递给每个使用 db 的类。如果我使用第二个，每个使用 db 的类都将依赖于 Common 类。

2.  我使示例更简单。实际上我有一个数据库类扩展了 mysqli 和一个使用数据库类的 DatabaseTableManager 类。我将 GetTable() 函数添加到数据库类。我在这个函数 () 中创建了 DatabaseTableManager 对象，`return new DatabaseTableManager($this, $tableNameFromArgument)`因此我不必每次都传递 db 对象。在 DatabaseTableManager 类中，我构建了一些查询以使我的工作更轻松。

例如向表中插入一条记录；

```
$DB = new Database(...);
$myTable = $DB->GetTable('myActualTableNameInDatabase');
$myTable->Insert( array('col1' => 'val1', 'col2' => 'val2') ); 
```

所以我在其他课程中经常使用这个课程。自然地，所有这些类都依赖于 DatabaseTableManager 类。更好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:41:59.103

> 更好的解决方案是什么？

问题是什么？:) 所以首先从一般设计的角度来看，据说我们受益于不引入全局静态状态。这取消了单例和使用全局变量的资格。

这大大减轻了选择的负担。通过它的构造函数将所需的 Mysqli 连接对象传递给需要它的类是可以的。如果您担心“一直通过它”，请定义创建这些对象的位置。

实际上，对于“表管理器”，您已经这样做了（也许管理器不是一个好词（它不管理数据库中的表，它只是代表它们），但让我们先关注结构）。该类将生成表示表格的对象。

对于使用这些的应用程序的那部分，甚至不需要知道背后是哪种类型的数据库，因为您已经封装了这些细节。

当然，表管理器本身仍然需要具备这些知识。然而这没有问题，因为如果你需要改变它，你可以在一个中心位置改变它。

所以实际上我必须说，即使你热衷于寻找问题，你创造的东西实际上看起来也很不错。

当然，与往常一样，您可能会遇到问题，但是如果您在应用程序中使用数据库的方式通常是基于表的，那么在我看来这并没有那么错误。您实现的模式可能会朝着[*Active Record*](http://martinfowler.com/eaaCatalog/activeRecord.html)的方向发展。[*众所周知，这适用于具有事务脚本*](http://martinfowler.com/eaaCatalog/transactionScript.html)的中小型应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:29:17.457

1.  这取决于。你想继承行指针的状态吗？如果是这样，请继续创建 Common 类。从设计的角度来看，依赖于数据库的代码被迫依赖于某种抽象，所以选择对你来说最灵活的东西。我个人只会有一个 DB 对象并传递它。单一类可能有优势。如果你能写一个更充实的例子，我们也许能提供更好的答案。

2.  为什么不将方法放在数据库类中，而不是不必要地创建两个类和/或添加继承？将对象或变量传递给函数是正常行为，除非有东西在跟踪状态。您能否提供一个更完整的 Database 和 DatabaseTableManager 类示例？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:40:43.870

我会按照您现在的方式保留它：

*   你`Someclass`不依赖于任何其他类。
*   在构造时注入数据库。这是测试的最佳选择。
*   这是关注点分离。
*   这个构造是最容易转换为真正的依赖注入器的，与控制反转容器结合使用。

# api - REST API“无事可做”响应

> ID：12662335
> 
> 赞同：2
> 
> 时间：2012-09-30T15:17:45.020
> 
> 标签：api, rest, api-design

我有一个 API，其中 put 请求可能不会导致底层数据发生变化。如果发生这种情况，我将发送 200 并且 ETag 保持不变，如果没有发生任何事情。但是，客户可能没有意识到没有任何改变，因为他们不一定会跟踪 ETag 值。200 值表示操作成功完成，虽然它确实没有，因为意图是 PUT，但没有真正 PUT 的数据。

所以，我想知道是否有更好的处理方法来提醒客户“无事可做”，因为他们的请求实际上并没有修改数据。我正在考虑发送一个额外的 X-Request 标头，但这似乎不优雅。我是否缺少任何可能适合此用例的状态代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:35:54.383

考虑一下[`204 No Content`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)- 这是一个 OK 代码，您可以将缺少正文解释为仅仅是确认。

# ios - 如何使用 RubyMotion 以编程方式有条件地显示新的 UI 视图

> ID：12662336
> 
> 赞同：0
> 
> 时间：2012-09-30T15:17:45.260
> 
> 标签：ios, storyboard, transition, rubymotion

我有一个用 2 个视图创建的故事板。视图控制器 1 和视图控制器 2。我想要做的是在用户填写特定字段并单击 view1 上的“登录”按钮后，将用户转换到 view2。

我将按钮成功链接到按下它时执行的方法我只是不确定如何进行转换。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:45:54.803

这是标准 IOS`Utility`模板的模式：

1）在您的故事板中，设置从视图控制器 1 到 2 的模态转场。通过控制从视图控制器 1 图标（视图控制器底部右侧的图标）拖动到视图控制器 2 来执行此操作。选择`modal`作为转换类型并给这个 segue 一个标识符，例如`ShowViewController2`.

2) 在视图控制器 1 的实现文件中，当用户按下时调用它`Log In`

```
self.performSegueWithIdentifier("ShowViewController2", sender:self) 
```

然后`prepareForSegue`在viewController1中实现来设置viewController2：

```
def prepareForSegue(segue, sender:sender)
    # call setters to pass data to the second view controller

    # set up a delegate pointer so that you can get back to VC1
    segue.destinationViewController.delegate = self
end 
```

此外，在视图控制器 1 中实现一个方法，以便在视图控制器 2 完成时调用

```
# Come back here when view controller 2 is done, for instance if the
# user logs off.
def view_controller_2_is_done(sender)
    self.dismissModalViewControllerAnimated(true)
end 
```

对于视图控制器 2，您需要为`delegate`with设置一个设置器

```
attr_accessor :delegate 
```

当需要返回视图控制器 1 时（即用户注销时），调用：

```
@delegate.view_controller_2_is_done(self) 
```

# javascript - javascript中有没有办法知道指定时区的上午9点是几点？

> ID：12662343
> 
> 赞同：2
> 
> 时间：2012-09-30T15:18:50.510
> 
> 标签：javascript

好吧，与我的时区相比，我需要知道用户时间上午 9 点的时间。

喜欢：

> 我来自巴西 格林威治标准时间上午 9 点 -0300

即：来自“开罗”的一些用户访问我的网站，然后我需要知道他的时间是上午 9 点，而我的时间“开罗”的时间是 +0200。

有没有办法用 Javascript 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:31:51.330

您可能正在寻找`getTimezoneOffset()`方法（请参阅[http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp](http://www.w3schools.com/jsref/jsref_gettimezoneoffset.asp)）：

```
var d = new Date()
var n = d.getTimezoneOffset(); 
```

`n`将以分钟为单位的 UTC 和本地时间之间的时区差异。

更全面的指南在这里：[http](http://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/) ://www.onlineaspect.com/2007/06/08/auto-detect-a-time-zone-with-javascript/ 。

编辑：哦，我忘记了未来的时间部分。在这种情况下，使用扩展构造函数之一创建自定义日期实例就足够了：

```
var d = new Date(year, month, day, hours, minutes, seconds, milliseconds); 
```

它可以用来确定当时的时区差异。您可以轻松地确定`o`某个时间的偏移量，指定时间的最终偏移量是`o`, `o + 60`或 `o - 60`，可以在使用扩展构造函数创建`getTimezoneOffset()`的对象上轻松检查。`Date`

在最坏的情况下，您可能需要执行 2-3 个计算步骤才能确定最终结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T15:27:36.450

结帐：[javascript timezone converter](https://stackoverflow.com/questions/9539561/javascript-timezone-converter)，那里已经有关于您询问的主题的公开讨论。

# asp.net - “<%:”是做什么的？

> ID：12662346
> 
> 赞同：7
> 
> 时间：2012-09-30T15:19:06.627
> 
> 标签：asp.net

我已经看到以下标签作为问题的答案：

```
<%: Model.FirstName %> 
```

“<%:”是做什么的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T15:21:39.653

它对 Firstname 的输出进行 html 编码，这可以防止诸如跨端脚本 (XSS) 之类的编码攻击。

Html 编码：

```
<%: Model.FirstName %> 
```

正常输出：

```
<%= Model.FirstName %> 
```

可以在此博客文章中找到更多信息：

[ASP.NET 4（和 ASP.NET MVC 2）中 HTML 编码输出的新 <%: %> 语法](http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net-mvc-2.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:23:07.590

有一些有用的信息：[http ://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net- 4-and-asp-net-mvc-2.aspx](http://weblogs.asp.net/scottgu/archive/2010/04/06/new-lt-gt-syntax-for-html-encoding-output-in-asp-net-4-and-asp-net-mvc-2.aspx)

# php - 使用 preg_match 或其他东西从 metacafe 返回视频的 id

> ID：12662350
> 
> 赞同：1
> 
> 时间：2012-09-30T15:19:29.727
> 
> 标签：php, regex, preg-match

我正在尝试编写插件，只需从浏览器复制和粘贴 url，即可从各种视频网站捕获视频详细信息。

但我对 metacafe 视频有疑问。要从示例中获取详细信息，此视频 url

[http://www.metacafe.com/watch/cb-V9EJSvnKvTcH/confronting_fear_in_virtual_reality/](http://www.metacafe.com/watch/cb-V9EJSvnKvTcH/confronting_fear_in_virtual_reality/)

我需要去 metacafe [http://www.metacafe.com/api/item/cb-V9EJSvnKvTcH/](http://www.metacafe.com/api/item/cb-V9EJSvnKvTcH/)并从这个视频 ID 解析 xml。

我认为这很容易，但问题是 metacafe 仅将视频 id 用于 xml 数据，并且 url 在 id 之后还包含视频名称。

只嵌入我使用的视频

```
$video_grab_url = 'http://www.metacafe.com/watch/cb-V9EJSvnKvTcH/confronting_fear_in_virtual_reality/';
$embed_vid_url = parse_url( $video_grab_url );
$metacafe = mb_substr( $embed_vid_url['path'], 7, -1 ); 
```

有了这个，我得到了带有嵌入名称的视频 ID。但正如我对其他细节所说，我需要从 url 解析 xml 数据并获取 xml 数据的 url，我只需要没有名称的视频 id。

我不是 php pro，所以我在使用 preg_match 时几乎没有迷失我如何使用 preg_match 来只获取这个“cb-V9EJSvnKvTcH”，这样我就可以提取 xml 数据并解析持续时间、拇指、标签等信息...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:22:40.370

试试这个。也许这可以帮助你。

```
(?<=watch/).*?(?=/) 
```

示例 PHP 代码，

```
<?php
$subject = "theLINKhere";
$pattern = "#(?<=watch/).*?(?=/)#"; // edit: Added modifiers
preg_match($pattern, $subject, $matches, PREG_OFFSET_CAPTURE, 3);
print_r($matches);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:32:49.717

或者你也可以使用这样的东西：

```
$url = 'http://www.metacafe.com/watch/cb-V9EJSvnKvTcH/confronting_fear_in_virtual_reality/';
$path = parse_url($url, PHP_URL_PATH);
$pieces = explode('/', $path);

$video_id = $pieces[2]; 
```

# ios - 启动时要验证的内容以查看非消耗性应用内购买是否为盗版

> ID：12662354
> 
> 赞同：3
> 
> 时间：2012-09-30T15:19:54.993
> 
> 标签：ios, in-app-purchase, piracy

假设我有一个应用程序进行应用程序内购买并验证收据是否适合非消耗性购买。

在购买时，应用程序会写入一些存储，例如 NSUserDefaults，它本质上是一个解锁额外内容的 BOOL。

然后，海盗可以从中制作一个其他越狱设备可以安装的 ipa，通过在原版中购买一次来绕过副本中的应用内购买。

似乎根据设备或用户的唯一标识符制作一些哈希/校验和，并在启动时验证这一点将是一个合理的盗版检查（并不是要阻止所有破解者，而是停止基于平均副本的 ipa 的流血安装盗版）。但是，我知道苹果不赞成访问 UDID，并且有人说出于这个原因要避免使用 MAC 地址。还有什么我可以用的吗？MAC还是游戏吗？这种级别的检查似乎对用户来说是非侵入性的，并且会将数据存储为（有损）单向哈希/校验和。

也许有一种完全不同的、更好的方法来处理基于 ipa 的非消耗品盗版？

# javascript - 如何结合定制的 Twitter Bootstrap 和 H5BP？

> ID：12662356
> 
> 赞同：0
> 
> 时间：2012-09-30T15:20:45.753
> 
> 标签：javascript, css, twitter-bootstrap, less, html5boilerplate

我正在寻找将**定制**的Twitter Bootstrap 和 H5BP (HTML5 Boilerplate) 结合起来的最佳实践。我尝试使用这个 shell 脚本在这个[链接](https://gist.github.com/1422879)和[Initializr](http://www.initializr.com/)生成器上快速设置一个项目。

*Ps：自定义包括选择颜色和大小...使用 Twitter Bootstrap 自定义变量*

任何帮助表示赞赏:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:31:03.483

我愿意

`git clone git://github.com/twitter/bootstrap.git`.

在较少的文件中进行一些更改`less/*.less`

您可能想要更改一些值`variables.less`

并`make bootstrap`在 git cloned 文件夹中运行。

它将`bootstrap`在您的引导文件夹中创建文件夹。

在创建的文件夹中使用该文件`bootstrap`。

# php - 新行如何使用 php 在 textarea 中工作？

> ID：12662363
> 
> 赞同：1
> 
> 时间：2012-09-30T15:21:16.317
> 
> 标签：php, textarea, newline

我正在创建一个新闻发布网站，我唯一不能在网站上做的就是输入并显示换行符。

网站上有一个textarea可以写文章，如果我在打字的时候按ENTER，它会带我进入一个新行，但是在提交完所有之后，然后查询mysql来提取和回显我输入的内容，新行不显示。所有文本彼此相邻。所以，我想知道我是否可以在 PHP 的帮助下在 textarea 中输入和输出换行符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:23:23.910

当您提交表单时，您正在提交**文本**。

当您将该文本放入 HTML 文档时，它就是**HTML**。

在 HTML 中，新行只是一块空白，其意义与空格或制表符相同。

如果要显示新行，则需要用标记将它们包装起来，以使它们被呈现（例如`<pre>`元素或具有`white-space`属性设置为使它们呈现的元素），或者您需要用合适的替换它们标记。

一个非常原始的替代品是 PHP 的[`nl2br`function](http://php.net/nl2br)。更高级的选项将生成`<p>`元素并以不同的方式处理不同数量的连续新行（例如，[Markdown](http://en.wikipedia.org/wiki/Markdown)解析器，例如 Stackoverflow 使用的解析器）。

# java - 从另一个类传递值

> ID：12662366
> 
> 赞同：0
> 
> 时间：2012-09-30T15:21:26.330
> 
> 标签：java, constructor

我有三个班。

Input.java（这是 gui 类）该类通过文本字段接收 3 个值，并具有触发事件的按钮，最后是显示值结果的标签（双值）

```
package javalearning;

import javax.swing.JOptionPane;

public class Input extends javax.swing.JFrame {

    /**
     * Creates new form Input
     */
    public Input() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        result_lbl = new javax.swing.JLabel();
        value1 = new javax.swing.JTextField();
        value2 = new javax.swing.JTextField();
        value3 = new javax.swing.JTextField();
        btn1 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        result_lbl.setText("jLabel1");

        btn1.setText("jButton1");
        btn1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(99, 99, 99)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(btn1)
                    .addComponent(result_lbl)
                    .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                        .addComponent(value1, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, 61, Short.MAX_VALUE)
                        .addComponent(value2, javax.swing.GroupLayout.Alignment.TRAILING)
                        .addComponent(value3, javax.swing.GroupLayout.Alignment.TRAILING)))
                .addContainerGap(100, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addGap(44, 44, 44)
                .addComponent(value1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(value2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addComponent(value3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btn1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(result_lbl)
                .addGap(23, 23, 23))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap(15, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>

    private void btn1ActionPerformed(java.awt.event.ActionEvent evt) {
        // TODO add your handling code here:
         JOptionPane.showMessageDialog(null, "hello");
         Computation actual_triangle = new Computation(Double.parseDouble(value1.getText()),Double.parseDouble(value2.getText()),Double.parseDouble(value3.getText()));

    }

    public static void main(String args[]) {

        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /*
         * If Nimbus (introduced in Java SE 6) is not available, stay with the
         * default look and feel. For details see
         * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(Input.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(Input.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(Input.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(Input.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /*
         * Create and display the form
         */
        java.awt.EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Input().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JButton btn1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JLabel result_lbl;
    private javax.swing.JTextField value1;
    private javax.swing.JTextField value2;
    private javax.swing.JTextField value3;
    // End of variables declaration
} 
```

Computation.java 这是计算所有值以产生结果的地方

```
package javalearning;
public class Computation {

    private double side_a, side_b, side_c,result;

   public Computation(double side_a, double side_b, double side_c)
   {
       this.side_a = side_a;
       this.side_b = side_b;
       this.side_c = side_c;
      valueException ive = new valueException();
      //here if there is a message being sent from the valueException method then the message have to be relayed back to the Input.result_lbl.setText()
      ive.checkvalidation(side_a, side_b, side_c);

   }

   public double getsSide_A()
   {
       return side_a;
   }

   public void setsSide_A(double side_a)
   {
       this.side_a = side_a;
   }

   public double getsSide_B()
   {
       return side_b;
   }

   public void setsSide_B(double side_b)
   {
       this.side_b = side_b;
   }

   public double getsSide_C()
   {
       return side_c;
   }

   public void setsSide_C(double side_c)
   {
       this.side_c = side_c;
   }

   public double calculateArea()
    {
        result = Math.sqrt(side_a*side_b*side_c);
        return result;
    }

} 
```

值异常.java

这是根据用户输入输出各种错误的类，例如 1：用户为一个或所有文本字段输入一个字符串，然后一条消息将返回到标签类。但这是一个转折点，这个类必须从Computation.java**而不是****Input.java 调用**

```
package javalearning;
public class valueException {

    String message;
    double a_side, b_side,c_side,result;

    public String checkvalidation(double a_side, double b_side, double c_side)
    {
        if((a_side + b_side > c_side)||(a_side + c_side > b_side)||(c_side + b_side > a_side))
        {

           //NOTHING TO DO JUST PROCEED BACK TO COMPUTATION and go the Computation.calculatearea() method

        }

        else
        {
            message = "The values you entered cannot form a shape";
        }
      return message;  
    }

} 
```

问题 1：所以我很难弄清楚如何将消息从 valueException 类传递回 Computation 类，然后从那里传递到 Input 类？

问题 2：如果 Input.java 中输入的值没有问题，则将进程恢复到 Computation 类以执行程序的其余部分，因为这是唯一调用 valueException 类的类，我不确定要输入的确切代码。

我已经评论了我面临问题的问题，我将这些评论放在了我认为应该存在的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:24:04.253

您有一个视图 ( `Input`) 和一个模型 ( `Computation`)。你需要一个`Controller`介于两者之间的人，并且知道如何告诉下一步该做什么。这将完成 MVC 模式。

将`Controller`接受来自`View`、验证和打包输入值、编组服务和`Model`对象的事件以完成用例，并根据用例的结果决定下一步`View`应该做什么。

考虑一个面向服务的架构：控制器可以调用以实现用例的基于接口的服务。我认为最好将用例封装在服务中而不是控制器中，因为控制器往往与特定视图密切相关。如果您决定使用基于 Web 的视图，则必须在没有服务的情况下从头开始，但如果您拥有它们，新的 Web（或移动设备或平板电脑）控制器可以简单地访问您的服务层并继续运行.

更新：

好的，在阅读了您对“简单”的抗议之后，这就是我的建议。我认为问题是你的异常类。你把它写成一个验证器类。我认为只有在我推荐的控制器完成其工作并发现无效情况时，您才应该抛出该异常。

```
package controller;

// Making the Controller the ActionListener is the key.  Take it away from the View.
public class ShapeController implements ActionListener {
    private Input inputView;

    public Controller() {
        this.inputView = new Input();
        this.addActionListener(this);  // Make the Controller respond to action events from the View.
    }

    public void actionPerformed(ActionEvent e) {
        double a_side, b_side, c_side;
        // Get the input values from the input view
        if((a_side + b_side > c_side)||(a_side + c_side > b_side)||(c_side + b_side > a_side)) {
            Computation comp = new Computation()
           // perform your calculation; all is well    
        } else {
            // Problem; throw an exception
            throw new InvalidShapeException();
        }
        // figure out where to go next
    }
} 
```

我认为您的 value_exception 类是错误的。像我上面展示的那样使用它并像这样写：

```
package controller;

public class InvalidShapeException extends RuntimeException {
    // Add whatever you want for messages and details.
    public InvalidShapeException() { super(); }
    public InvalidShapeException(String s) { super(s); }
    public InvalidShapeException(Throwable t) { super(t); }
    public InvalidShapeExceptionI(String s, Throwable t) { super(s, t); }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T01:12:33.820

Well I think the reason you are confused is because, you are not sure how to pass values between classes. Since you say you are starting to learn programming (appreciate you for that). But you have take every opportunity to learn and explore new things, but not too much as this might deviate you from the objective. So what you can do for your problem 1: You can relay back the message from the exception class to computation class then again relay back to the input class

problem 2: a simple break; will break the statement and returns back control to the original point of code where this loop/or in your case the class it is called from.

I am assuming you know how to code the rest.

# python - 进行各种分组

> ID：12662367
> 
> 赞同：0
> 
> 时间：2012-09-30T15:21:28.810
> 
> 标签：python

我的数据集是一起工作或单独工作的人员列表。

我为每个项目设置了一行，并在列中列出了参与该项目的所有人员的姓名。如果第 2 列是一行中的第一个空列，则它是一个单独的工作。如果第 4 列是连续的第一个空列，则有 3 个人一起工作。

我有找到所有对的代码。在输出数据集中，创建了一个 N x N 的正方形，每个参与者都标记了列和行。单元格 (A,B) 和 (B,A) 包含该对一起工作的次数。A 与 B 一起工作的处理方式与 B 与 A 一起工作的处理方式相同。

以逗号分隔的输入数据示例：

```
A,.,.
A,B,.
B,C,E
B,F,.
D,F,.
A,B,C
D,B,.
E,C,B
X,D,A
F,D,.
B,.,.
F,.,.
F,X,C
C,F,D 
```

我正在使用 Python 3.2。执行此操作的代码：

```
import csv
import collections
import itertools

grid = collections.Counter()

with open("connect.csv", "r") as fp:
    reader = csv.reader(fp)
    for line in reader:
        # clean empty names
        line = [name.strip() for name in line if name.strip()]
        # count single works
        if len(line) == 1:
            grid[line[0], line[0]] += 1
        # do pairwise counts
        for pair in itertools.combinations(line, 2):
            grid[pair] += 1
            grid[pair[::-1]] += 1

actors = sorted(set(pair[0] for pair in grid))

with open("connection_grid.csv", "w") as fp:
    writer = csv.writer(fp)
    writer.writerow([''] + actors)
    for actor in actors:
        line = [actor,] + [grid[actor, other] for other in actors]
        writer.writerow(line) 
```

我的问题是：

1.  如果我有一个包含月份和年份的列，是否可以为每个月份制作一个矩阵电子表格？（即，对于 2011 年，我将有 12 个矩阵）？

2.  对于我使用的任何细分，是否可以创建一个变量，使变量名是所有一起工作的人的组合？例如，“ABD”表示 A、B 和 D 一起工作的项目，并且等于 ABD 作为三人一组工作的次数，无论顺序如何。项目最多可容纳 20 人，因此必须能够以 2 到 20 人为一组。此外，如果变量应按字母顺序排列，那将是最简单的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:31:00.587

1）按月和年对您的项目进行排序，然后为每个月创建一个新的“网格”。例如：

从每一行中提取月份和年份。从行中删除月份和年份，然后将剩余数据添加到字典中。最后你会得到类似 {( *month* , *year* ): [ *line* , *line* , ...]} 的东西。从那里，很容易循环每个月/年并创建一个网格、输出电子表格等。

2)`''.join(sorted(list)).replace('.','')`为您提供按字母顺序列出的一起工作的人员。

```
import csv
import collections
import itertools

grids = dict()
groups = dict()

with open("connect.csv", "r") as fp:
    reader = csv.reader(fp)
    for line in reader:
        # extract month/year from the last column
        date = line.pop(-1)
        month,year = date.split('/')
        # clean empty names
        line = [name.strip() for name in line if name.strip()]
        # generate group name
        group = ''.join(sorted(line)).replace('.','')
        #increment group count
        if group in groups:
            groups[group]+=1
        else:
            groups[group]=1
        #if grid exists for month, update else create
        if (month,year) in grids:
            grid = grids[(month,year)]
        else:
            grid = collections.Counter()
            grids[(month,year)] = grid
        # count single works
        if len(line) == 1:
            grid[line[0], line[0]] += 1
        # do pairwise counts
        for pair in itertools.combinations(line, 2):
            grid[pair] += 1
            grid[pair[::-1]] += 1

for date,grid in grids.items():
    actors = sorted(set(pair[0] for pair in grid))
    #Filename from date
    filename = "connection_grid_%s_%s.csv" % date
    with open(filename, "w") as fp:
        writer = csv.writer(fp)
        writer.writerow([''] + actors)
        for actor in actors:
            line = [actor,] + [grid[actor, other] for other in actors]
            writer.writerow(line)

with open('groups.csv','w') as fp:
    writer = csv.writer(fp)
    for item in sorted(groups.items()):
        writer.writerow(item) 
```

# php - 在子函数的静态调用中，为什么父函数会运行？

> ID：12662370
> 
> 赞同：0
> 
> 时间：2012-09-30T15:21:47.067
> 
> 标签：php, class, inheritance, static

让我们看看这个类的构造：

```
class A
{
    public static function aa() { }
}

class B extends A
{
    public static function bb() { }
} 
```

在这里，`B:bb();`并且`A:aa();`是有效的。但为什么`B:aa();`仍然有效？不是说我直接调用的`aa`方法`B`吗？为什么继承和覆盖在这里起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T15:28:00.737

作为`class B` *extends* `class A`，类 B 具有 A 也具有的所有*受保护*和*公共*方法。

通过调用`B:aa()`编译器查看是否`B:aa()`在 B 类中被覆盖，如果没有，它会调用父类，在本例中为 A 类。

在面向对象编程 (OOP) 中，扩展类也称为继承，B 类从 A 类继承所有公共和受保护方法

# php - php用户图像上传创建指定文件夹唯一图像名称

> ID：12662372
> 
> 赞同：1
> 
> 时间：2012-09-30T15:21:52.913
> 
> 标签：php, image-upload, special-folders, phpthumb

我（php 的新手）仍在从事休假项目，但出现了另一个问题，我找不到解决方案。因此，我希望你们能帮助我！上次我在这里发布东西时工作得很好！我真的很感谢你的帮助......谢谢！

**我的问题**：我希望用户能够在登录时上传图片。他们的个人资料上有几个小按钮，上面有图片......他们应该能够更改它们......我想要它喜欢this -> 当用户上传图片时，脚本将在服务器上创建一个新文件夹。这将发生在“user_images”文件夹（已经存在）中。因此，例如“id=55”的用户在上传图像时会在“user_images”中创建一个文件夹“55”。我尝试了又尝试了又尝试了...在行中使用不同的语法->“$upload_dir =”但没有任何成功：-/我只是无法正常工作...

这是脚本的一部分：

```
<?php
include 'dbconfig.php';
page_protect();

$rs_settings = mysql_query("select * from user where id='$_SESSION[user_id]'");
while ($row_settings = mysql_fetch_array($rs_settings));

error_reporting (E_ALL ^ E_NOTICE);
session_start();
//only assign a new timestamp if the session variable is empty
if (!isset($_SESSION['user_id']) || strlen($_SESSION['user_id'])==0){
$_SESSION['user_id'] = mysql_query("select * from user where id='$_SESSION[user_id]'");         
//assign the timestamp to the session variable
$_SESSION['user_file_ext']= "";
}

$upload_dir = "user_images/";
$upload_path = $upload_dir;             
$large_image_prefix = "Large_";         
$thumb_image_prefix = "button_";            
$large_image_name = $large_image_prefix.$_SESSION['user_id'];    
image (append the timestamp to the filename)
$thumb_image_name = $thumb_image_prefix.$_SESSION['user_id'];     
image (append the timestamp to the filename)
$max_file = "1";    // Maximum file size in MB
$max_width = "";    // Max width allowed for the large image
$thumb_width = "87"; // Width of thumbnail image
$thumb_height = "35";   // Height of thumbnail image
// Only one of these image types should be allowed for upload
$allowed_image_types =     
array('image/pjpeg'=>"jpg",'image/jpeg'=>"jpg",'image/jpg'=>"jpg",'image/png'=>"png",
'image/x-png'=>"png",'image/gif'=>"gif");
$allowed_image_ext = array_unique($allowed_image_types); // do not change this
$image_ext = "";    // initialise variable, do not change this.
foreach ($allowed_image_ext as $mime_type => $ext) {
$image_ext.= strtoupper($ext)." ";
}

function resizeImage($image,$width,$height,$scale) {
list($imagewidth, $imageheight, $imageType) = getimagesize($image);
$imageType = image_type_to_mime_type($imageType);
$newImageWidth = ceil($width * $scale);
$newImageHeight = ceil($height * $scale);
$newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
switch($imageType) {
case "image/gif":
$source=imagecreatefromgif($image); 
break;
case "image/pjpeg":
case "image/jpeg":
case "image/jpg":
$source=imagecreatefromjpeg($image); 
break;
case "image/png":
case "image/x-png":
$source=imagecreatefrompng($image); 
break;
}
imagecopyresampled($newImage,$source,0,0,0,0,$newImageWidth,$newImageHeight,
$width,$height);
switch($imageType) {
case "image/gif":
imagegif($newImage,$image); 
break;
case "image/pjpeg":
case "image/jpeg":
case "image/jpg":
imagejpeg($newImage,$image,90); 
break;
case "image/png":
case "image/x-png":
imagepng($newImage,$image);  
break;
}
chmod($image, 0777);
return $image;
}

function resizeThumbnailImage($thumb_image_name, $image, $width, $height, $start_width,   
$start_height, $scale){
list($imagewidth, $imageheight, $imageType) = getimagesize($image);
$imageType = image_type_to_mime_type($imageType);

$newImageWidth = ceil($width * $scale);
$newImageHeight = ceil($height * $scale);
$newImage = imagecreatetruecolor($newImageWidth,$newImageHeight);
switch($imageType) {
case "image/gif":
$source=imagecreatefromgif($image); 
break;
case "image/pjpeg":
    case "image/jpeg":
    case "image/jpg":
        $source=imagecreatefromjpeg($image); 
        break;
    case "image/png":
    case "image/x-png":
        $source=imagecreatefrompng($image); 
        break;
}
imagecopyresampled($newImage,$source,0,0,$start_width,$start_height,$newImageWidth,
$newImageHeight,$width,$height);
switch($imageType) {
case "image/gif":
imagegif($newImage,$thumb_image_name); 
break;
case "image/pjpeg":
case "image/jpeg":
case "image/jpg":
imagejpeg($newImage,$thumb_image_name,90); 
break;
case "image/png":
case "image/x-png":
imagepng($newImage,$thumb_image_name);  
break;
}
chmod($thumb_image_name, 0777);
return $thumb_image_name;
}

function getHeight($image) {
$size = getimagesize($image);
$height = $size[1];
return $height;
}

function getWidth($image) {
$size = getimagesize($image);
$width = $size[0];
return $width;
}

$large_image_location = $upload_path.$large_image_name.$_SESSION['user_file_ext'];
$thumb_image_location = $upload_path.$thumb_image_name.$_SESSION['user_file_ext'];

if(!is_dir($upload_dir)){
mkdir($upload_dir, 0777);
chmod($upload_dir, 0777);
}

if (file_exists($large_image_location)){
 if(file_exists($thumb_image_location)){
    $thumb_photo_exists = "<img
src=\"".$upload_path.$thumb_image_name.$_SESSION['user_file_ext']."\" alt=\"Thumbnail   
Image\"/>";
}else{
 $thumb_photo_exists = "";
}
$large_photo_exists = "<img  
src=\"".$upload_path.$large_image_name.$_SESSION['user_file_ext']."\" alt=\"Large   
Image\"/>";
} else {
$large_photo_exists = "";
$thumb_photo_exists = "";
}

if (isset($_POST["upload"])) { 
//Get the file information
$userfile_name = $_FILES['image']['name'];
$userfile_tmp = $_FILES['image']['tmp_name'];
$userfile_size = $_FILES['image']['size'];
$userfile_type = $_FILES['image']['type'];
$filename = basename($_FILES['image']['name']);
$file_ext = strtolower(substr($filename, strrpos($filename, '.') + 1));

//Only process if the file is a JPG, PNG or GIF and below the allowed limit
if((!empty($_FILES["image"])) && ($_FILES['image']['error'] == 0)) {

    foreach ($allowed_image_types as $mime_type => $ext) {
        //loop through the specified image types and if they match the     
extension then break out
        //everything is ok so go and check file size
        if($file_ext==$ext && $userfile_type==$mime_type){
            $error = "";
            break;
        }else{
            $error = "Only <strong>".$image_ext."</strong> images accepted for upload<br />";
        }
    }
    //check if the file size is above the allowed limit
    if ($userfile_size > ($max_file*1048576)) {
        $error.= "Images must be under ".$max_file."MB in size";
    }

}else{
    $error= "Select an image for upload";
}
//Everything is ok, so we can upload the image.
if (strlen($error)==0){

    if (isset($_FILES['image']['name'])){
        //this file could now has an unknown file extension (we hope it's one of the ones set above!)
        $large_image_location = $large_image_location.".".$file_ext;
        $thumb_image_location = $thumb_image_location.".".$file_ext;

        //put the file ext in the session so we know what file to look for once its uploaded
        $_SESSION['user_file_ext']=".".$file_ext;

        move_uploaded_file($userfile_tmp, $large_image_location);
        chmod($large_image_location, 0777);

        $width = getWidth($large_image_location);
        $height = getHeight($large_image_location);
        //Scale the image if it is greater than the width set above
        if ($width > $max_width){
            $scale = $max_width/$width;
            $uploaded = resizeImage($large_image_location,$width,$height,$scale);
        }else{
            $scale = 1;
            $uploaded = resizeImage($large_image_location,$width,$height,$scale);
        }
        //Delete the thumbnail file so the user can create a new one
        if (file_exists($thumb_image_location)) {
            unlink($thumb_image_location);
        }
    }
    //Refresh the page to show the new uploaded image
    header("location:".$_SERVER["PHP_SELF"]);
    exit();
}
?> 
```

如果有人能帮我解决这些问题，那就太好了……当你还是个菜鸟的时候，你可能知道这有多难！如果那里有更奇怪的语法......让我知道，我只是一个初学者（就像我们一开始一样）并试图变得更好:)

感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:11:15.310

请记住，允许任何用户将内容上传到您的服务器会产生一个需要特别注意的安全漏洞，这是我过去用于内部使用应用程序的一些代码：

```
$folderPath = "/uploads/" . $folderName;
$exist = is_dir($folderPath);

if(!$exist) {
mkdir("$folderPath");
chmod("$folderPath", 0755);
}
else { echo "Folder already exists"; } 
```

您也可以直接从 mkdir 进行 chmod，但在此特定服务器配置上执行此操作时遇到问题。

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

**更新**了更完整的示例：

```
// Define path where file will be uploaded to
//   User ID is set as directory name
$folderPath = "/uploads/$userID";

// Check to see if directory already exists
$exist = is_dir($folderPath);

// If directory doesn't exist, create directory
if(!$exist) {
mkdir("$folderPath");
chmod("$folderPath", 0755);
}
else { echo "Folder already exists"; }

// PROCESS FILE UPLOAD

// Set initial/temporary upload location
//   temp_uploads must have proper read/write permissions (755 or 777)
$target_path = "/uploads/temp_uploads/";

// Append the name of the uploaded file to the temp directory
$target_path .= basename( $_FILES['uploadedfile']['name']);

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
$filename = basename( $_FILES['uploadedfile']['name']);

// Location where temporary file is being stored
$temp_location = '/uploads/temp_uploads/' . basename( $_FILES['uploadedfile']['name']);

// Final destination where file will be located
$destination = "/uploads/$folderPath/$filename";

rename($temp_location, $destination);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:23:57.423

您正在将 mysql 查询资源分配给`$_SESSION["user_id"]`

```
$_SESSION['user_id'] = mysql_query("select * from user where id='$_SESSION[user_id]'"); 
```

我认为您想从该查询中获取用户 ID

此外，如果您的代码产生任何错误，如果您将它们包含在您的问题中，那就太好了

附言。不要使用 mysql_* 函数，如果使用不当，它们将被弃用并造成不必要的安全漏洞，学习 dibi、pdo 或任何其他较新的数据库层

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T19:09:51.323

```
$file_name=basename($_FILES['uploadedfile']['name']);
mkdir("upload/".$username,0777);
$target_path = "upload/$username/". $file_name; 
```

# java - 在面板上绘制 JTable 行和列

> ID：12662373
> 
> 赞同：3
> 
> 时间：2012-09-30T15:21:54.257
> 
> 标签：java, swing, graphics

我正在编写一个应用程序，其中我必须在画布上绘制 JTable 组件。但是经过我的几次尝试，仍然无法绘制出一张完全完美的 JTable 图。我尝试使用 getCellRect api 使用 JTable 的特定单元格的大小进行绘制，但是当数据很大时无法在画布上绘制特定单元格。这是示例代码：-

```
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.*;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.table.*;
import java.util.*;
import java.awt.*;

public class SimpleTableDemo extends JPanel {
    private boolean DEBUG = false;
      private int spacing = 6;
      private Map columnSizes = new HashMap();
      String[] columnNames = {"First Name",
                                "Last Name",
                                "Sport",
                                "# of Years",
                                "Vegetarian"};

        Object[][] data = {
        {"Kathy", "Smith",
         "SnowboardingXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX", new Integer(5), new Boolean(false)},
        {"John", "Doe",
         "Rowing", new Integer(3), new Boolean(true)},
        {"Sue", "Black",
         "Knitting", new Integer(2), new Boolean(false)},
        {"Jane", "White",
         "Speed reading", new Integer(20), new Boolean(true)},
        {"Joe", "Brown",
         "Pool", new Integer(10), new Boolean(false)}
        };

        final JTable table = new JTable(data, columnNames);
        Panel1 panel;

    public SimpleTableDemo() {
        super(new GridLayout(3,0));

        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        //table.setFillsViewportHeight(true);

        if (DEBUG) {
            table.addMouseListener(new MouseAdapter() {
                public void mouseClicked(MouseEvent e) {
                    printDebugData(table);
                }
            });
        }

        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);

        //Add the scroll pane to this panel.
        add(scrollPane);

        panel = new Panel1();
        Rectangle rect = table.getCellRect(0,0,true);

        panel.setX(table.getWidth());
        panel.setY(0);
        panel.setWidth(rect.width);
        panel.setHeight(rect.height);
        panel.setStr(table.getModel().getValueAt(0,0).toString());
        panel.setModel(table);

        add(panel);

        final JComboBox jNumberComboBoxSize = new JComboBox();
        jNumberComboBoxSize.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "11", "12", "14", "16", "18", "20", "24", "30", "36", "48", "72" }));
        jNumberComboBoxSize.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
               jNumberComboBoxSizeActionPerformed(jNumberComboBoxSize);
            }
        });

        JPanel panel2 = new JPanel();
        panel2.add(jNumberComboBoxSize);

        add(panel2);
        adjustColumns();

    }

    private void jNumberComboBoxSizeActionPerformed(JComboBox jNumberComboBoxSize)
    {
        int fontSize = Integer.parseInt(jNumberComboBoxSize.getSelectedItem().toString());
        table.setRowHeight(fontSize);
        table.setFont(new Font("Serif", Font.BOLD, fontSize));
        Rectangle rect = table.getCellRect(0,0,true);
        panel.setX(0);
        panel.setY(0);
       // panel.setWidth(rect.width);
        panel.setHeight(rect.height);
        panel.setStr(table.getModel().getValueAt(0,0).toString());
        panel.setModel(table);
        panel.repaint();
        table.revalidate();
    }

    private void printDebugData(JTable table) {
        int numRows = table.getRowCount();
        int numCols = table.getColumnCount();
        javax.swing.table.TableModel model = table.getModel();

        System.out.println("Value of data: ");
        for (int i=0; i < numRows; i++) {
            System.out.print("    row " + i + ":");
            for (int j=0; j < numCols; j++) {
                System.out.print("  " + model.getValueAt(i, j));
            }
            System.out.println();
        }
        System.out.println("--------------------------");
    }

     /*
     *  Adjust the widths of all the columns in the table
     */
    public void adjustColumns()
    {
        TableColumnModel tcm = table.getColumnModel();

        for (int i = 0; i < tcm.getColumnCount(); i++)
        {
            adjustColumn(i);
        }
    }

    /*
     *  Adjust the width of the specified column in the table
     */
    public void adjustColumn(final int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        int columnHeaderWidth = getColumnHeaderWidth( column );
        int columnDataWidth   = getColumnDataWidth( column );
        int preferredWidth    = Math.max(columnHeaderWidth, columnDataWidth);
        panel.setWidth(preferredWidth);
        updateTableColumn(column, preferredWidth);
    }

    /*
     *  Calculated the width based on the column name
     */
    private int getColumnHeaderWidth(int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        Object value = tableColumn.getHeaderValue();
        TableCellRenderer renderer = tableColumn.getHeaderRenderer();

        if (renderer == null)
        {
            renderer = table.getTableHeader().getDefaultRenderer();
        }

        Component c = renderer.getTableCellRendererComponent(table, value, false, false, -1, column);
        return c.getPreferredSize().width;
    }

    /*
     *  Calculate the width based on the widest cell renderer for the
     *  given column.
     */
    private int getColumnDataWidth(int column)
    {
        int preferredWidth = 0;
        int maxWidth = table.getColumnModel().getColumn(column).getMaxWidth();

        for (int row = 0; row < table.getRowCount(); row++)
        {
            preferredWidth = Math.max(preferredWidth, getCellDataWidth(row, column));

            //  We've exceeded the maximum width, no need to check other rows

            if (preferredWidth >= maxWidth)
                break;
        }

        return preferredWidth;
    }

    /*
     *  Get the preferred width for the specified cell
     */
    private int getCellDataWidth(int row, int column)
    {
        //  Inovke the renderer for the cell to calculate the preferred width

        TableCellRenderer cellRenderer = table.getCellRenderer(row, column);
        Component c = table.prepareRenderer(cellRenderer, row, column);
        int width = c.getPreferredSize().width + table.getIntercellSpacing().width;

        return width;
    }

    /*
     *  Update the TableColumn with the newly calculated width
     */
    private void updateTableColumn(int column, int width)
    {
        final TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        width += spacing;

        //  Don't shrink the column width

        width = Math.max(width, tableColumn.getPreferredWidth());

        columnSizes.put(tableColumn, new Integer(tableColumn.getWidth()));
        table.getTableHeader().setResizingColumn(tableColumn);
        tableColumn.setWidth(width);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        SimpleTableDemo newContentPane = new SimpleTableDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
}

class Panel1 extends JPanel
{
    int x;
    int y;
    int width;
    int height;
    String str;
    JTable model;

    public void setModel(JTable model)
    {
       this.model = model;
    }

    public void setX(int x)
    {
        this.x = x;
    }

    public void setY(int y)
    {
        this.y = y;
    }

    public void setWidth(int w)
    {
        this.width = w;
    }

    public void setHeight(int h)
    {
        this.height = h;
    }

    public void setStr(String s)
    {
        this.str = s;
    }

    public void paint(Graphics g)
    {
        super.paint(g);
        int initX= 0;
        for(int row=0;row < 5; ++row)
        {
            initX = x;
            for (int col=0;col < 5;++col)
            {
                g.drawRect(x,y,width,height);
                g.drawString(model.getModel().getValueAt(row,col).toString(),x + 10,y + 10);
                x = x + width;
            }
            x = initX;
            y = y + height;

        }

    }
}; 
```

* * *

我修改了此代码以重绘具有字体大小和边框的列单元格。我想绘制所有这些表格自定义，请看一下并提出一些建议。

谢谢

**简单表演示.java**

```
 package com.swing.data;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.GridLayout;
import java.awt.Rectangle;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.util.HashMap;
import java.util.Map;

import javax.swing.BorderFactory;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

public class SimpleTableDemo extends JPanel 
{
    private boolean DEBUG = false;
    private int spacing = 6;
    private Map columnSizes = new HashMap();
    String[] columnNames = {"First Name","Last Name","Sport","# of Years","Vegetarian"};

    Object[][] data = 
        {
            {"Kathy", "Smith","SnowboardingXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX", new Integer(5), new Boolean(false)},
            {"John", "Doe","Rowing", new Integer(3), new Boolean(true)},
            {"Sue", "Black","Knitting", new Integer(2), new Boolean(false)},
            {"Jane", "White","Speed reading", new Integer(20), new Boolean(true)},
            {"Joe", "Brown","Pool", new Integer(10), new Boolean(false)}
        };

    JTable table = new JTable(data, columnNames);
    Panel1 panel;

    public SimpleTableDemo() 
    {
        super(new GridLayout(3,0));      
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        if (DEBUG) 
        {
            table.addMouseListener(new MouseAdapter() {
                public void mouseClicked(MouseEvent e) {
                    printDebugData(table);
                }
            });
        }
        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);

        //Add the scroll pane to this panel.
        add(scrollPane);

        panel = new Panel1();
//      Rectangle rect = table.getCellRect(0,0,true);
//
// 
//      panel.setX(table.getWidth());
//
//      panel.setY(0);
//      panel.setWidth(rect.width);
//      panel.setHeight(rect.height);
//      panel.setStr(table.getModel().getValueAt(0,0).toString());

        panel.setModel(table);

        add(panel);

        final JComboBox jNumberComboBoxSize = new JComboBox();
        jNumberComboBoxSize.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "11", "12", "14", "16", "18", "20", "24", "30", "36", "48", "72" }));
        jNumberComboBoxSize.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
               jNumberComboBoxSizeActionPerformed(jNumberComboBoxSize);
            }
        });

        JPanel panel2 = new JPanel();
        panel2.add(jNumberComboBoxSize);

        add(panel2);
        adjustColumns();
    }

    private void jNumberComboBoxSizeActionPerformed(JComboBox jNumberComboBoxSize)
    {
        int fontSize = Integer.parseInt(jNumberComboBoxSize.getSelectedItem().toString());
        table.setRowHeight(fontSize);
        setBorder(new Font("Serif", Font.BOLD, fontSize));
        table.setFont(new Font("Serif", Font.BOLD, fontSize));
        panel.setFont(new Font("Serif", Font.BOLD, fontSize));
        Rectangle rect = table.getCellRect(0,0,true);
        panel.setX(0);
        panel.setY(0);
        panel.setHeight(rect.height);
        panel.setStr(table.getModel().getValueAt(0,0).toString());
        panel.setModel(table);
        panel.repaint();
        table.revalidate();
    }

    public void setBorder(Font f)
    {
        BorderCellRenderer cellRenderer = new BorderCellRenderer();
        cellRenderer.setColumnBorder(BorderFactory.createLineBorder(Color.BLACK, 2)); 
        cellRenderer.setFont(f);
        table.getColumnModel().getColumn(0).setCellRenderer(cellRenderer);
        table.getColumnModel().getColumn(1).setCellRenderer(cellRenderer);

    }
    private void printDebugData(JTable table) 
    {
        int numRows = table.getRowCount();
        int numCols = table.getColumnCount();
        javax.swing.table.TableModel model = table.getModel();

        System.out.println("Value of data: ");
        for (int i=0; i < numRows; i++) 
        {
            System.out.print("    row " + i + ":");
            for (int j=0; j < numCols; j++) 
            {
                System.out.print("  " + model.getValueAt(i, j));
            }
            System.out.println();
        }
        System.out.println("--------------------------");
    }

     /*
     *  Adjust the widths of all the columns in the table
     */
    public void adjustColumns()
    {
        TableColumnModel tcm = table.getColumnModel();

        for (int i = 0; i < tcm.getColumnCount(); i++)
        {
            adjustColumn(i);
        }
    }

    /*
     *  Adjust the width of the specified column in the table
     */
    public void adjustColumn(int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        int columnHeaderWidth = getColumnHeaderWidth( column );
        int columnDataWidth   = getColumnDataWidth( column );
        int preferredWidth    = Math.max(columnHeaderWidth, columnDataWidth);
        panel.setWidth(preferredWidth);
        updateTableColumn(column, preferredWidth);
    }

    /*
     *  Calculated the width based on the column name
     */
    private int getColumnHeaderWidth(int column)
    {
        TableColumn tableColumn = table.getColumnModel().getColumn(column);
        Object value = tableColumn.getHeaderValue();
        TableCellRenderer renderer = tableColumn.getHeaderRenderer();

        if (renderer == null)
        {
            renderer = table.getTableHeader().getDefaultRenderer();
        }

        Component c = renderer.getTableCellRendererComponent(table, value, false, false, -1, column);
        return c.getPreferredSize().width;
    }

    /*
     *  Calculate the width based on the widest cell renderer for the
     *  given column.
     */
    private int getColumnDataWidth(int column)
    {
        int preferredWidth = 0;
        int maxWidth = table.getColumnModel().getColumn(column).getMaxWidth();

        for (int row = 0; row < table.getRowCount(); row++)
        {
            preferredWidth = Math.max(preferredWidth, getCellDataWidth(row, column));

            if (preferredWidth >= maxWidth)
                break;
        }

        return preferredWidth;
    }

    /*
     *  Get the preferred width for the specified cell
     */
    private int getCellDataWidth(int row, int column)
    {
        //  Inovke the renderer for the cell to calculate the preferred width

        TableCellRenderer cellRenderer = table.getCellRenderer(row, column);
        Component c = table.prepareRenderer(cellRenderer, row, column);
        int width = c.getPreferredSize().width + table.getIntercellSpacing().width;

        return width;
    }

    /*
     *  Update the TableColumn with the newly calculated width
     */
    private void updateTableColumn(int column, int width)
    {
        final TableColumn tableColumn = table.getColumnModel().getColumn(column);

        if (! tableColumn.getResizable()) return;

        width += spacing;

        //  Don't shrink the column width

        width = Math.max(width, tableColumn.getPreferredWidth());

        columnSizes.put(tableColumn, new Integer(tableColumn.getWidth()));
        table.getTableHeader().setResizingColumn(tableColumn);
        tableColumn.setWidth(width);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI()
    {
        //Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        SimpleTableDemo newContentPane = new SimpleTableDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) 
    {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
}

**Panel1.java**

    package com.swing.data;

import java.awt.Font;
import java.awt.Graphics;
import java.awt.Rectangle;

import javax.swing.JPanel;
import javax.swing.JTable;

class Panel1 extends JPanel
{
    int x;
    int y;
    int width;
    int height;
    String str;
    JTable model;
    Font font;

    public Font getFont() {
        return font;
    }
    public void setFont(Font font) {
        this.font = font;
    }
    public void setModel(JTable model)
    {
       this.model = model;
    }
    public JTable getModel()
    {
        return model;
    }

    public void setX(int x)
    {
        this.x = x;
    }

    public void setY(int y)
    {
        this.y = y;
    }

    public void setWidth(int w)
    {
        this.width = w;
    }

    public void setHeight(int h)
    {
        this.height = h;
    }

    public void setStr(String s)
    {
        this.str = s;
    }

    public void paint(Graphics g)
    {
        super.paint(g);
//      int initX= 0;
//      for(int row=0;row < 5; ++row)
//      {
//          initX = x;
//          for (int col=0;col < 5;++col)
//          {
//              g.drawRect(x,y,width,height);
//              String str = model.getModel().getValueAt(row, col).toString();
//              int xloc =  (x+10);
//              int yloc = y +10;
////                System.out.println("xloc : "+xloc);
////                System.out.println("yloc : "+yloc);
////                System.out.println("width : "+width);
////                System.out.println("height : "+height);
////                System.out.println("str : "+str);
//              
//              g.drawString(model.getModel().getValueAt(row,col).toString(),x + 10,y + 10);
//              x = x + width;
//          }
//            x = initX;
//          y = y + height;
// 
//      }

        System.out.println("Inside paint() >>>>>>>>>>>>>>>>>>>>>");

        JTable table = getModel();
        int columnCount = table.getModel().getColumnCount();
        int rowCount = table.getModel().getRowCount();
        int yLoc = 10;
        int rowHeight = 0 ;
        int columnWidth  = 0 ;
        g.setFont(font);
        for(int r = 0 ; r < rowCount; r++)
        {
            int xLoc = 0 ;
            for(int c= 0 ; c< columnCount; c++)
            {
                Rectangle rect = table.getCellRect(r, c, true);
                columnWidth = rect.width;
                rowHeight = rect.height;
                g.drawRect(xLoc, yLoc, columnWidth, rowHeight);
                String displayString = table.getValueAt(r, c).toString(); 
                System.out.println("displayString ::"+displayString);
                g.drawString(displayString, xLoc+5, yLoc+15);
                xLoc+= columnWidth; 
            }
            yLoc+= rowHeight;
        }
    }
}

**BorderCellRenderer.java**
package com.swing.data;

import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.border.*;

/**
 * @version 1.0 03/06/99
 */
public class BorderCellRenderer extends JLabel
    implements TableCellRenderer {
  protected Border noFocusBorder; 
  protected Border columnBorder; 
  protected Font font;

  public Font getFont() {
    return font;
}

public void setFont(Font font) {
    this.font = font;
}

public BorderCellRenderer() {
    noFocusBorder = new EmptyBorder(1, 2, 1, 2);
    setOpaque(true);
  }

  public Component getTableCellRendererComponent(JTable table, Object value,
                 boolean isSelected, boolean hasFocus, int row, int column) {
      setText((value == null) ? "" : value.toString());
      setBorder(columnBorder);
      setFont(font);
    return this;
  }

  public void setColumnBorder(Border border) {
    columnBorder = border;
  }

  public Border getColumnBorder() {
    return columnBorder;
  }
} 
```

请提出一些建议来重新绘制适当的 JTable 字体和边框。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T18:45:48.430

几个问题显而易见：

![图片](../Images/29cf38e739e5a7eae90ae3f587c1fa21.png)

1.  您似乎正在使用现有的几何图形创建自己的表格视图`JTable`；这些尺寸可能直到之后才有效`pack()`。

2.  您遍历 中的列`adjustColumns`，但仅在 中设置最后一列宽度`panel`，然后将其变为表格中看到的恒定宽度。

3.  `JTable`与使用[享元渲染](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)的自身相比，您的实现将无法扩展，如图[所示](https://stackoverflow.com/a/7776211/230513)。

4.  `panel`调整框架大小时，您的消失；您应该`repaint`显式调用、收听`TableModel`或使用`JTable`它自己。

5.  从 Java 5 开始，[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)允许以下操作；相比：

    ```
    {"John", "Doe", "Rowing", new Integer(3), new Boolean(true)}
    {"John", "Doe", "Rowing", 3, true} 
    ```

6.  不要*替换*内容窗格；`add()`你的面板；相比：

    ```
    frame.setContentPane(newContentPane);
    frame.add(newContentPane); 
    ```

7.  您的使用`GridLayout(3,0)`表明存在误解；要在一列中获得任意数量的行，请使用`GridLayout(0, 1)`.

8.  当您扩展`JPanel`时，请注意“Swing 程序应该覆盖`paintComponent()`而不是覆盖`paint()`；” 另请参阅[*AWT 和 Swing 中的绘画：绘画方法*](http://www.oracle.com/technetwork/java/painting-140037.html#callbacks)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-09T01:32:05.657

另一种方法是将表格呈现为`JLabel`.

![HTML 表格演示。](../Images/be6e1be9bdb2aed7d048ec4d4ff443dd.png)

```
import java.awt.*;
import javax.swing.*;

public class HTMLTableDemo {

    HTMLTableDemo() {
        StringBuilder sb = new StringBuilder();
        sb.append("<html><body><table border=1>");

        sb.append("<tr>");
        for ( String columnName : columnNames ) {
            sb.append("<th>");
            sb.append(columnName);
            sb.append("</th>");
        }
        sb.append("</tr>");
        for (Object[] row : data) {
            sb.append("<tr>");
            for (Object value : row) {
                sb.append("<td>");
                sb.append(value);
                sb.append("</td>");

            }
            sb.append("</tr>");
        }
        sb.append("</table>");
        JLabel html = new JLabel(sb.toString());

        JOptionPane.showMessageDialog(null, html);
    }

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                new HTMLTableDemo();
            }
        };
        SwingUtilities.invokeLater(r);
    }

    String[] columnNames = {
            "First Name",
            "Last Name",
            "Sport",
            "# of Years",
            "Vegetarian"
    };

    Object[][] data = {
            {"Kathy", "Smith", "Snowboarding", new Integer(5), new Boolean(false)},
            {"John", "Doe", "Rowing", new Integer(3), new Boolean(true)},
            {"Sue", "Black", "Knitting", new Integer(2), new Boolean(false)},
            {"Jane", "White", "Speed reading", new Integer(20), new Boolean(true)},
            {"Joe", "Brown", "Pool", new Integer(10), new Boolean(false)}
    };
} 
```

要将其渲染到`Graphics`实例，请参阅[此答案](https://stackoverflow.com/a/5853992/418556)`LabelRenderTest.java`的来源。

![](../Images/b7c0f850e0b42d0b8cc83f84d5598571.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T16:29:39.753

我使用以下代码成功地映射了一对一的绘图：-

Panel1.java

```
package com.swing.data;

import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Rectangle;
import java.awt.font.FontRenderContext;

import javax.swing.JPanel;
import javax.swing.JTable;

class Panel1 extends JPanel
{
    int x;
    int y;
    int width;
    int height;
    String str;
    JTable model;
    Font font;

    public Font getFont() {
        return font;
    }
    public void setFont(Font font) {
        this.font = font;
    }
    public void setModel(JTable model)
    {
       this.model = model;
    }
    public JTable getModel()
    {
        return model;
    }

    public void setX(int x)
    {
        this.x = x;
    }

    public void setY(int y)
    {
        this.y = y;
    }

    public void setWidth(int w)
    {
        this.width = w;
    }

    public void setHeight(int h)
    {
        this.height = h;
    }

    public void setStr(String s)
    {
        this.str = s;
    }

    public void paint(Graphics g)
    {
        super.paint(g);
//      int initX= 0;
//      for(int row=0;row < 5; ++row)
//      {
//          initX = x;
//          for (int col=0;col < 5;++col)
//          {
//              g.drawRect(x,y,width,height);
//              String str = model.getModel().getValueAt(row, col).toString();
//              int xloc =  (x+10);
//              int yloc = y +10;
////                System.out.println("xloc : "+xloc);
////                System.out.println("yloc : "+yloc);
////                System.out.println("width : "+width);
////                System.out.println("height : "+height);
////                System.out.println("str : "+str);
//              
//              g.drawString(model.getModel().getValueAt(row,col).toString(),x + 10,y + 10);
//              x = x + width;
//          }
//            x = initX;
//          y = y + height;
// 
//      }

        System.out.println("Inside paint() >>>>>>>>>>>>>>>>>>>>>");
        FontMetrics fm = g.getFontMetrics(font);
        JTable table = getModel();
        int columnCount = table.getModel().getColumnCount();
        int rowCount = table.getModel().getRowCount();
        int yLoc =10;
        int rowHeight = 0 ;
        int columnWidth  = 0 ;
        double w = 0;
        double h = 0;
        FontRenderContext frc = fm.getFontRenderContext();

        g.setFont(font);
        for(int r = 0 ; r < rowCount; r++)
        {
            int xLoc = 0 ;
            int yPad = 0;
            for(int c= 0 ; c< columnCount; c++)
            {
                Rectangle rect = table.getCellRect(r, c, true);
                String displayString = table.getValueAt(r, c).toString(); 
                columnWidth = rect.width;
                rowHeight = rect.height;

                w = (double)font.getStringBounds(displayString, frc).getWidth();
                h = (double)font.getStringBounds(displayString, frc).getHeight();
                //yPad = (int) Math.ceil((rowHeight - h)/2); 
                yPad = Math.abs((int)(rowHeight - h)/2);
                System.out.println("displayString ::"+displayString + "rowHeight:" + rowHeight +"String height:" + h+"yPad:"+yPad +"xLoc:"+xLoc+"yLoc:"+yLoc);
                g.drawString(displayString, xLoc , yLoc + rowHeight - yPad);
                g.drawRect(xLoc, yLoc, columnWidth, rowHeight);
                xLoc+= columnWidth + table.getIntercellSpacing().width; 
            }
            yLoc+= rowHeight + table.getIntercellSpacing().height;
        }
    }
} 
```

谢谢

# javascript - 在自动更正时跟踪文本字段中光标位置的更好方法？

> ID：12662376
> 
> 赞同：2
> 
> 时间：2012-09-30T15:22:10.450
> 
> 标签：javascript, performance, algorithm, optimization, autocorrect

我正在开发一个 jQuery 插件，用于实时（自动更正）将拉丁字符转换为日文假名符号（[实时示例](http://lab.cmikavac.net/autokana/)），如果我输入的速度不是太快，它可以正常工作。这是一个问题。

例如：

> wakaimasu -> わかります</p>

但是，当我以正常速度打字时，我得到了这个：

> wakarimasu -> わかりあすm （实际上是 wakariasum，光标在最后“す”和“m”之间）

如果我在没有“su”的情况下键入它，我会得到：

> wakarima -> わかりあm（实际上是 wakariam，光标在最后“あ”和“m”之间）

我弄清楚了为什么以及如何发生这种情况。基本上，“ri - り”符号仍在从拉丁文转换为日文假名，而我已经输入了“m”并且它在我设法输入“a”之前完成了一点点。因为我的函数在每次转换后定位光标，它将光标定位在“ri”和“m”之间，这就是我的“a”结束的地方。

其他词也会发生这种情况，但我以这个为例。

有没有一种方法可以以更智能的方式跟踪光标位置，或者有没有一种方法可以仅更新/转换/替换部分文本字段而不更新整个文本字段（它现在的工作方式是获取文本字段中的内容，替换函数内部变量中带有假名的拉丁文，使用变量中的新字符串更新文本字段，然后定位光标）？告诉访问者不要打字太快并不是真正的方法。

> 图注：wa=わ ka=か ri=り ma=ま su=す a=あ</p>

来源可以在我提供的链接中查看。谢谢。

*编辑：要考虑的另一件事是用户可能会左右移动光标以添加或删除字符/符号。这使定位有点复杂，但它目前有效。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T21:21:06.567

```
function translateWord( textarea, oldText, newText ) {
  var ctpos   = getCaretPosition( textarea );

  var textStr = textarea.value;

  var oldTextLen  = oldText.split("").length;
  var newTextLen  = newText.split("").length;

  var txtDiffLen  = ( newTextLen - oldTextLen );

  var escText = oldText.replace( /([()\[\]\\\/+*?.-])/g, "\\$1" );
  var regExpr = new RegExp( "\\b"+escText+"\\b", 'gi' );
  var diffStr = textStr.match( regExpr );
      diffStr = ( diffStr ) ? diffStr.length : 1;

  var newStr  = textStr.replace( regExpr, newText );
      ctpos   = ( ctpos + ( txtDiffLen * diffStr ) );

  textarea.value = newStr;
  setCaretPosition( textarea, ctpos );
}

function getCaretPosition( textarea ) {
  if ( textarea.selectionStart ) {
    return textarea.selectionStart;
  }
  else if ( !document.selection ) {
    return 0;
  }

  var c   = "\001",
      sel = document.selection.createRange(),
      dul = sel.duplicate(),
      len = 0;

  dul.moveToElementText( textarea );
  sel.text  = c;
  len = dul.text.indexOf( c );
  sel.moveStart( 'character', -1 );
  sel.text  = "";
  return len;
}

function setCaretPosition( textarea, pos ) {
  if ( textarea.setSelectionRange ) {
    textarea.focus();
    textarea.setSelectionRange( pos, pos );
  }
  else if ( textarea.createTextRange ) {
    var range = textarea.createTextRange();
        range.collapse( true );
        range.moveEnd( 'character', pos );
        range.moveStart( 'character', pos );
        range.select();
  }
}

translateWord( document.getElementById('text-input'), 'wakarimasu', 'わかります' ); 
```

**我知道这是一个老问题，但这段代码会帮助像我这样的菜鸟:) 来自其他答案的混合函数:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T00:28:59.367

为了结束这个，我设法弄清楚问题实际上是第三个字符（在这种情况下是“m”）进入了与“ri”相同的 .keyup 迭代，而不是像我之前认为的那样（相同的症状） ，但不同的原因）..

为了解决这个问题，我只是修改了 .keyup 代码，在偏移量上添加 +1，以便在转换后字符串中还有一个拉丁字符（罗马字）时将光标向右移动一个位置。

# c - 在c中找到一个数字的回文

> ID：12662378
> 
> 赞同：0
> 
> 时间：2012-09-30T15:22:30.747
> 
> 标签：c, palindrome

这段代码没有给我正确的答案，我找不到错误。我该如何修复代码？

场景：首先确定数字的位数，然后回文数。

```
#include<stdio.h>
#include<conio.h>
#include<math.h>

int main()
{
    int number=42321,j=0,dig,temp;
    long long pal= 0LL;

    temp=number;     
    while(temp>0)
    {
          temp/=10;
          j++;
    }

    while (number>0)
    {          
          dig=number%10;
          pal+=dig*(int)pow(10,j);
          number/=10;
          j--;  
    }

    printf("%d",pal);
    getch();   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:26:25.547

在

```
while(temp>0)
{
      temp/=10;
      j++;
} 
```

您正在计算具有的位数`number`，这比不超过 10 的最高幂的指数大一`number`。之后你需要减量`j`。

但是使用`pow()`不是最好的方法，更好的是逐步构造倒数：

```
while(temp > 0)
{
    pal = 10*pal + temp%10;
    temp /= 10;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:31:51.990

你定义`pal`为`long long`。之后你对编译器撒谎，告诉它你将传递一个类型的值`int`但发送`pal`：一个类型的值`long long`

```
 printf("%d",pal); /* WRONG */ 
```

不要那样做。使用正确的转换说明符

```
 printf("%lld", pal); /* preferred */ 
```

或将值转换为正确的类型

```
 printf("%d", (int)pal); /* UGH! */ 
```

# php - 意外的 T_FUNCTION，但在哪里？

> ID：12662380
> 
> 赞同：3
> 
> 时间：2012-09-30T15:22:38.237
> 
> 标签：php

我已经让我的网站在我的本地机器上完美运行。但是，在迁移到生产环境时，我遇到了“意外的 T_FUNCTION ...”错误。

我已经删除了以下代码之前的所有内容，但仍然收到第 3 行报告的错误。我只是想不通。

```
<?php
// Auth Check.
$authCheck = function() use ($app) {         <---- Line 3 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T15:33:06.580

你得到：

> **解析错误：语法错误，第****4**行**[...][...]**中的意外 T_FUNCTION

 **因为您使用的 PHP 版本低于`PHP 5.3.0`升级您的 php 或尝试使用`globals`

`PHP 5.3.0+`

```
$app = "Hello Wolrd";
$authCheck = function () use($app) {
    echo $app;
};
$authCheck(); 
```

`Below PHP 5.3.0`

```
$app = "Hello Wolrd";
$authCheck = function () {
    global $app;
    echo $app;
};
$authCheck(); 
```

两者都会输出

```
 Hello Wolrd 
```**

# android - Android：滚动视图问题

> ID：12662389
> 
> 赞同：0
> 
> 时间：2012-09-30T15:23:47.997
> 
> 标签：android, user-interface, scrollview

我正在尝试使用静态背景图像使大图像视图可滚动。我面临的问题是即将到来的图像视图上方有很多可用空间，我必须向下滚动才能看到我的图像。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/background_mdpi"
    android:gravity="top"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_margin="11dp"
        android:gravity="top"
        android:background="@drawable/panel" >

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            >

            <ImageView
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_gravity="top"
                android:src="@drawable/help_screen" />
        </ScrollView>
    </LinearLayout>

</LinearLayout> 
```

我怎样才能摆脱这个额外的空间并查看我的图像并将其向下滚动，因为它是长图像。

感谢 Abhinav Tyagi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:41:47.330

见 android:scaleType [http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

```
<ImageView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:sourceType="fitStart"
            android:src="@drawable/help_screen" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T15:40:45.803

正如西蒙所说：

我在 ImageView 中使用了 android:scaleType="fitStart" 这解决了我的问题

# php - 我想做一个查询，从 mysql 数据库中选择行，但这些行有阿拉伯语数据？

> ID：12662391
> 
> 赞同：0
> 
> 时间：2012-09-30T15:24:02.833
> 
> 标签：php, mysql, utf-8

我有一个带有阿拉伯数据的 mysql 表。数据看起来像

```
Ø´Ù‚Ø© ØªÙ…Ù„ÙŠÙƒ Ø¨Ù…ÙˆÙ‚Ø¹ Ù…ØªÙ…ÙŠØ² 
```

在数据库中。

当我进行查询时：

```
select * 
from table 
where tit = "arabic letters" 
```

它给了我以下错误：

> 警告：mysql_num_rows()：提供的参数不是第 1437 行 D:\LocalHost\Websites\Megadiv_Clients\immes_Realestate\website\admin\tours.php 中的有效 MySQL 结果资源

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:28:17.937

mysql_num_rows 需要一个mysql 资源（即查询结果）。

你是在传递一个资源，还是只是一个字符串？

它应该是：`mysql_num_rows(mysql_query("SELECT ... "));`

注意：[不鼓励使用 mysql 扩展](http://php.net/manual/en/function.mysql-num-rows.php)，支持 mysqli。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T22:05:37.990

如果`mysql_query`由于某种原因失败，它将返回`FALSE`而不是结果集，并且您不能使用 num_rows。你可以打电话`mysql_error()`来找出错误是什么。例如：

```
$x=mysql_query("select * from table where title='كلام نموذج'");
if (!$x) {
    die("Error from MySQL: ".mysql_error());
}
$y=mysql_num_rows($x); 
```

# css - IE9 + 背景图像 (PNG24) + 背景重复 + 背景位置 = BUG

> ID：12662394
> 
> 赞同：0
> 
> 时间：2012-09-30T15:24:35.470
> 
> 标签：css, internet-explorer, png, alpha

假设你有这样的代码：

```
<div id="pattern"> </div>

#pattern {
 height: 400px;    
 background: #000 url(url_to_semitransparent_png); 
 background-repeat: repeat-x;
 background-position: 100px 0;   
} 
```

它在每个浏览器中都按预期运行，但 IE 除外。在 IE 中，它看起来像重复的背景与自身重叠，而它应该只是坚持。这个问题在我们尝试制作动画时表现出来`background-position`。您可以在 fiddle 中看到代码：http: [//jsfiddle.net/Ya2AF/10/](http://jsfiddle.net/Ya2AF/10/)（比较 IE 和 Chrome 来见证它）。请务必取消注释`animate()`功能以使其移动。

有没有人遇到过这样的行为？我们能与之抗争吗？

# performance - 如何让 PhoneGap 中的输入/选择焦点更快？

> ID：12662395
> 
> 赞同：0
> 
> 时间：2012-09-30T15:24:51.603
> 
> 标签：performance, cordova, jqmobi

单击输入元素（文本、texarea、选择等）在 PhoneGap 中有明显的延迟......有没有办法克服这个问题？

我知道用户在触摸屏幕时可能会拖动/滚动，这就是延迟存在的原因，我已经能够通过使用 onTouchStart 事件而不是 onClick 来克服这个问题，但我不知道如何应用其他输入也一样。

我正在使用 jqMobi（一个精简的 jQuery 框架，它摇滚！）。

似乎您不能在输入元素上调用 .focus() 或在选择元素上调用 .click() ，这是我通过像这样点击 onTouchStart 事件所尝试的：

```
<input type="text" name="email" ontouchstart="$(this).focus();" />
<select name="country" ontouchstart="$(this).click();">...</select> 
```

任何帮助将不胜感激！

* * *

迟缓是在设备上，而不是在浏览器上。我们目前的目标是 iOS，我在 iPhone 4、4s、iPad 2 和新 iPad 上体验过迟缓。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T16:41:36.820

如果您使用的是 jqMobi 的 jqUi，那么应该已经解决了。

否则，您可以激活 $.ui.touchLayer 插件，该插件应该可以解决该问题以及其他跨浏览器和触摸相关问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-21T08:00:51.937

如何应用触摸事件而不是单击。当您将 html 动态绑定到 dom 时。

```
[1] href = "<a class='applymenutouch' data-ele='" + i + "' >";
[2] $('.applymenutouch').on('touchstart', function () { alert(render_submenu_link($(this).attr('data-ele'))); }) 
```

# azure - Azure 如何中断辅助角色以进行部署？

> ID：12662397
> 
> 赞同：4
> 
> 时间：2012-09-30T15:25:05.543
> 
> 标签：azure, azure-worker-roles

我正在将一些后台处理从 Azure Web 角色转移到辅助角色。我的工人需要每分钟左右完成一项任务，可能会产生任务：

```
while(true){
    //start some tasks

    Thread.Sleep(60000);
} 
```

一旦我部署，它将永远开始运行。那么稍后，当我重新部署时，**Azure 如何停止我的重新部署进程？**

它会立即杀死它吗？有没有办法得到它正在关闭的警告？我只需要确保一切都是事务性的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T15:53:05.430

当一个角色（worker 或 web）被要求正常关闭时（因为它正在缩小或因为您要求重新部署），将调用[RoleEntryPoint](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx)类的 OnStop 方法。这是具有 Run 方法的同一类，该方法可能包含您的循环或调用包含该循环的代码。

这里需要注意几点： OnStop 有 5 分钟的实际停止时间，之后该进程被简单地终止。如果您必须调用其他东西来异步关闭，您将需要 OnStop 中的线程一直忙于等待，直到其他进程关闭。一旦执行离开 OnStop，平台就会假定机器可以关闭。

如果您需要正常停止处理但不需要关闭机器，那么您可以在服务配置文件中放置一个设置，您可以更新该设置以指示应该完成的工作或注意。因此，例如一个布尔值，上面写着“ProcessQueues”。然后在 RoleEntryPoint 的 onStart 中挂钩[RoleEnvironmentChanging](http://msdn.microsoft.com/en-us/library/windowsazure/gg432963.aspx)事件。然后，您的事件处理程序会查找要发生的 RoleEnvironmentConfigurationSettingChange，然后检查 ProcessQueues 布尔值。如果为真，则启动或继续处理，如果为假，则优雅地停止处理。然后，您可以进行配置更改以控制事情何时运行。这是处理此问题的一种选择，还有更多取决于您需要多快停止处理等。

# android - 如何在 android 2.2 的 mnt/sdcard 中创建目录

> ID：12662403
> 
> 赞同：0
> 
> 时间：2012-09-30T15:26:17.360
> 
> 标签：android

```
 File dir = Environment.getExternalStorageDirectory();
        if (dir.exists() && dir.isDirectory()) {
            String exStoragePath = Environment.getExternalStorageDirectory().getAbsolutePath();
            File appPath = new File(exStoragePath + "/mbrc/");
            appPath.mkdirs();
            String tempFilename = "tmp.wav";
            String tempDestFile = appPath.getAbsolutePath() + "/" + tempFilename;

            return tempDestFile;
        } 
```

我在装有 Android 2.2 的 HTC 上尝试了这个，但没有创建目录，也没有创建文件。如果我在 SAMSUNG S2 wuth android 4 上尝试这个，那就可以了。

为什么这不适用于 HTC 和 android 2.2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:33:19.493

您需要创建文件。

[http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile) ()

```
File dir = Environment.getExternalStorageDirectory();
    if (dir.exists() && dir.isDirectory()) {
        String exStoragePath = Environment.getExternalStorageDirectory().getAbsolutePath();
        File appPath = new File(exStoragePath + "/mbrc/");
        appPath.mkdirs();
        String tempFilename = "tmp.wav";
        String tempDestFile = appPath.getAbsolutePath() + "/" + tempFilename;

        File newFile = new File(tempDestFile);
        newFile.createNewFile();

        return tempDestFile;
    } 
```

# css - Opera 9 浮动：左侧位置：相对导致问题

> ID：12662409
> 
> 赞同：0
> 
> 时间：2012-09-30T15:26:45.830
> 
> 标签：css, css-float, position, opera

我得到了带有`float:left;`内部 div 的锚点`position:relative;margin-bottom:15px;`。
由于某种原因，margin-bottom 不适用，当我测试它时，我认为问题与浮动和相对位置有关。

我不知道如何解决它，我会感谢你的帮助。

[摆弄 HTML](http://jsfiddle.net/EC2yw/)

它的外观和实际外观的屏幕截图： ![在此处输入图像描述](../Images/5e40246ad0102771e7de06b4f07dd9cc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:31:01.383

浮动元素的边距通常比它们的价值更麻烦。改用填充。

# node.js - RabbitMQ 和 node-amqp：确认模式下的交换不确认 - 为什么？

> ID：12662413
> 
> 赞同：6
> 
> 时间：2012-09-30T15:27:00.010
> 
> 标签：node.js, rabbitmq, node-amqp

我正在编写一个依赖于 RabbitMQ 的 Node.js 应用程序。我使用 node-amqp 作为连接到 RabbitMQ 的首选库。

一旦我建立了与 RabbitMQ 的连接，我要做的第一件事就是创建一个交换：

```
var options = { autoDelete: false, confirm: true, durable: true, type: 'direct' };
connection.exchange('myExchange', options, function (myExchange) {
  // ...
}); 
```

这完美地工作。如您所见，我正在使用创建交换`confirm: true`，因此我希望交换之后处于确认模式。

现在，一旦我尝试发布消息，就会出现问题：

```
var options = {};
myExchange.publish('', { data: 'foobar' }, options, function () {
  // ...
}); 
```

问题是`publish`函数的回调从未被调用——尽管消息已成功发布（正如我在 RabbitMQ 的 Web 管理工具中看到的那样）。

我是否以错误的方式理解确认模式？这是 node-amqp 的错误吗？

任何帮助，将不胜感激 ：-）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T18:15:46.573

在相应的[GitHub 问题](https://github.com/postwait/node-amqp/issues/134)中回答的问题：npm 上的 node-amqp 是旧版本...当前的解决方法是直接使用`master`来自 GitHub 的分支。

这意味着，`https://github.com/postwait/node-amqp/tarball/master`在安装时使用`npm`.

* * *

**2013 年 11 月更新**

由于这些天我再次使用 RabbitMQ（大约在我最初提出问题的一年后），我认为更新 node-amqp 的现状可能是个好主意。

不幸的是，node-amqp 的状态与一年前完全相同：npm 发布的版本几乎无法使用。我一年前遇到的一些错误仍然存​​在（包括我的问题中的错误），因此给定的解决方法仍然有效：从 GitHub 获取最新的大师。

# java - java.awt.image.DataBufferInt 不能转换为 java.awt.image.DataBufferByte

> ID：12662415
> 
> 赞同：3
> 
> 时间：2012-09-30T15:27:04.830
> 
> 标签：java, image, bufferedimage

```
private static byte[] get_byte_data(BufferedImage image)
{
    //WritableRaster raster   = image.getRaster();
    DataBufferByte buffer = (DataBufferByte)image.getRaster().getDataBuffer();
    return buffer.getData();
} 
```

在执行上述代码时，我得到了声明的类转换异常。我需要返回 byte[] 数组。即缓冲图像的字节数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:39:12.283

栅格数据不一定是字节。

`if (image.getRaster().getDataTypeSize() == 1)`，然后您可以`getElem(int bank, int i)`用于所有银行和所有元素，并将结果存储在所需的数组中。我没有看到任何更直接的东西。

# ruby - 如何提取段落的含义？

> ID：12662417
> 
> 赞同：1
> 
> 时间：2012-09-30T15:27:42.350
> 
> 标签：ruby, regex, rubygems

我需要开发一种方法，从字符串中提取数据库中记录的含义。以下是 a 字符串的示例：

```
MyString = "Purse $75,000\. (up To $14,250 Nysbfoa) For Maidens, Fillies And Mares Three Years Old And Upward. Three Year Olds, 118 Lbs.; Older, 123 Lbs. One And One Eighth Miles. (Inner turf)" 
```

给定字符串，我需要以可以创建race_record的方式处理它：

```
race_record[:purse] = 75000 
race_record[:race_type] = "Maidens"
race_record[:sex] = "Fillies And Mares"
race_record[:age] = "Three Year Old And Upward"
race_record[:distance] = "One And One Eighth Miles"
race_record[:surface] = "inner turf" 
```

我打算使用 ruby​​ 和一系列正则表达式来提取数据。例如：

```
race_record[:purse] = Mystring.scan(/(?<=\Purse\s[$])(.*?)(?=\.)/)
race_record[:race_type] = Mystring.sub(....)
etc. 
```

我的问题不是正确的正则表达式是什么。鉴于目标，我提出的方法是正确的方法，还是有更好的方法，甚至是可以完成繁重工作的宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:43:29.547

You could use one regex to extract all the relevant parts into capturing groups at once;

```
regexp = 
    /Purse\s\$          # Leading text
    ([\d,]+)            # Group 1
    .*?For\s            # Intervening text
    (\w+)               # Group 2
    ,\s                 # Intervening text
    (\w+\sAnd\s\w+)     # Group 3, etc. etc.
    \s
    ([^.]*)
    \.[^;]*;[^.]*\.\s
    ([^.]*)
    \.\s\(
    ([^()]*)
    \)/x 
```

Then you can do

```
irb(main):025:0> match = regexp.match(mystring)
=> #<MatchData "Purse $75,000\. (up To $14,250 Nysbfoa) For Maidens, Fillies And    Mares Three Years Old And Upward. Three Year Olds, 118 Lbs.; Older, 123 Lbs. One And One Eighth Miles. (Inner turf)" 
   1:"75,000" 2:"Maidens" 3:"Fillies And Mares" 4:"Three Years Old And Upward" 
   5:"One And One Eighth Miles" 6:"Inner turf">
irb(main):026:0> match[1]
=> "75,000"
irb(main):027:0> match[2]
=> "Maidens"
...etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:50:36.963

如果您的输入是相当结构化的，即它具有特定且已知的语法，您可以构建一个“解析器”来解析语法。

在过去，我们会使用 yacc 和 lex 这两个旧的 unix 工具来构建编译器。Yacc 和 Lex 有 Ruby 实现。虽然最初的意图是输出较低级别的代码（例如构建真正编译器时的机器汇编代码），但当您的解析器识别出特定的语法结构时，没有什么可以阻止您调用任何 ruby​​ 代码。

注意：即使有一个 Yacc/lex Ruby gem，我不会说它会“做重活”，学习 yacc 和 lex 的学习曲线很小。从长远来看，使用 yacc/lex 之类的东西会让你的生活更轻松，特别是如果你有一个很大的语法并且必须不断调整它。

# javascript - 通过 src 删除图像

> ID：12662418
> 
> 赞同：1
> 
> 时间：2012-09-30T15:27:53.873
> 
> 标签：javascript, jquery, image

我需要使用特定的删除某些图像`src`：

[http://ukn.cs-mtc.com/wp-content/plugins/download-monitor/page-addon/thumbnail.gif](http://ukn.cs-mtc.com/wp-content/plugins/download-monitor/page-addon/thumbnail.gif)

`<img>`有没有办法用 JavaScript删除整个标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T15:31:58.777

你使用 jQuery 吗？如果是这样，

`$('img[src="http://ukn.cs-mtc.com/wp-content/plugins/download-monitor/page-addon/thumbnail.gif"]').remove();`应该管用。

否则...

```
var img = document.getElementsByTagName('img');
for(var i=0,i<img.length;i++) {
if(img[i].src == 'http://ukn.cs-mtc.com/wp-content/plugins/download-monitor/page-addon/thumbnail.gif') {
img[i].parentNode.removeChild(img[i]);
}
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T19:02:21.907

我有一些空闲时间（以及编写一些 JavaScript 的奇怪冲动......），所以我想我会提供这种功能性方法：

```
function removeNeighbour(el, elType) {
    if (!el) {
        return false;
    }
    else if (el.nextElementSibling) {
        var nxt = el.nextElementSibling;
    }
    else {
        var nxt = el.nextSibling;
        while (nxt.nodeType !== 1 && nxt.nextSibling) {
            nxt = nxt.nextSibling;
        }

    }
    if (elType && nxt.tagName.toLowerCase() == elType.toLowerCase()) {
        nxt.parentNode.removeChild(nxt);
    }
    else if (!elType) {
        nxt.parentNode.removeChild(nxt);
    }
}

function clearElsWithAttrEquals(el, attr, val, andNeighbour, neighbourType) {
    if (!el || !attr || !val) {
        return false;
    }
    else if (document.querySelectorAll) {
        var matchingElems = document.querySelectorAll(el + '[' + attr + '="' + val + '"]'),
            neighbourType = neighbourType || '';
        for (var i = matchingElems.length - 1; i >= 0; i--) {
            if (andNeighbour === true) {
                removeNeighbour(matchingElems[i], neighbourType);
            }
            matchingElems[i].parentNode.removeChild(matchingElems[i]);
        }
    }
    else {
        var matchingElems = document.getElementsByTagName(el),
            len = (matchingElems.length - 1);
        for (var i = len; i >= 0; i--) {
            if (matchingElems[i][attr] == val) {
                matchingElems[i].parentNode.removeChild(matchingElems[i]);
            }
        }
    }
}

clearElsWithAttrEquals('img', 'src', 'http://ukn.cs-mtc.com/wp-content/plugins/download-monitor/page-addon/thumbnail.gif', true, 'p');​​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/qpmVW/2/)。

*快速指南（也是我可能编写的*唯一文档）`clearElsWithAttrEquals()`功能：

`clearElsWithAttrEquals(el, attr, val[, andNeighbour[, neighbourType]])`;

1.  `el`: ( **string** ) 标识元素类型 ('img','p','span'...)。
2.  `attr`: ( **string** ) 标识您要搜索的属性（'id'、'src' 等...）
3.  `val`: ( **string ) 仅当值***完全*等于字符串时才会匹配
4.  `andNeighbour`: ( **Boolean** , *optional* ) 你也想删除相邻的元素吗？通过`true`（如果是）或`false`（如果不是）。
5.  `neighbourType`: ( **string** , *optional* ) 仅当它是此元素类型（'div'、'hr'、'span' 等）时才删除邻居；*如果省略，则无论*其类型如何，都将删除下一个兄弟元素。

参考：

*   [`document.querySelectorAll()`](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)（[兼容性](http://www.quirksmode.org/dom/w3c_core.html#t13)）。
*   [`nextElementSibling`](https://developer.mozilla.org/en-US/docs/DOM/Element.nextElementSibling)（[兼容性](http://www.quirksmode.org/dom/w3c_core.html#t83)）。
*   [`nextSibling`](https://developer.mozilla.org/en-US/docs/DOM/Node.nextSibling)（[兼容性](http://www.quirksmode.org/dom/w3c_core.html#t74)）。
*   [`node.nodeType`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)（[兼容性](http://www.quirksmode.org/dom/w3c_core.html#t21)）。
*   [`parentNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)（[兼容性](http://www.quirksmode.org/dom/w3c_core.html#t75)）。
*   [`removeChild()`](https://developer.mozilla.org/en-US/docs/DOM/Node.removeChild)（[兼容性](http://www.quirksmode.org/dom/w3c_core.html#t93)）。
*   [`String.toLowerCase()`](http://mdn.beonex.com/en/Core_JavaScript_1.5_Reference/Global_Objects/String/toLowerCase.html).
*   [`while (condition) {/*...*/}`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/while).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T15:30:07.670

这可以使用[jQuery](http://jquery.com/)轻松完成：

```
$('img[src="<path>"]').remove(); 
```

# c# - 如何将 DataTemplates 添加到 ScatterViewItem

> ID：12662422
> 
> 赞同：1
> 
> 时间：2012-09-30T15:28:01.163
> 
> 标签：c#, wpf, pixelsense

我正在尝试使用 ScatterViewItem 构建一种向导。下部区域是 Next、Back 和 Cancel 按钮。当按下 Next 或 Back 按钮时，上部应显示下一个“页面”。我尝试使用 DataTemplate，但 DataTemplate 没有显示在上部区域。我只得到一个空白区域。我对 WPF 和 Surface 还是新手，也许尝试一些不起作用的东西。愿你有更好的想法。这是代码：

```
<s:SurfaceWindow.Resources>
  <DataTemplate x:Key="LoadProject">
    <StackPanel Orientation="Vertical">
                    <Label Name="lbl_Database" Content="Database" />
                    <s:SurfaceTextBox Name="txt_Database"/>
                    <Label Name="lbl_Project" Content="Project" />
                    <s:SurfaceTextBox Name="txt_Project"/>
    </StackPanel>
  <DataTemplate x:Key="LoadProject">
</s:SurfaceWindow.Resources>

<s:ScatterView>
    <s:ScatterViewItem Width="300" Height="300">      
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="40" />
            </Grid.RowDefinitions>

            <ItemsControl x:Name="DynamicArea" ItemTemplate="{StaticResource LoadProject}" Grid.Column="1">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Grid />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
            </ItemsControl>
            <StackPanel Orientation="Horizontal" Grid.Row="1">
                <s:SurfaceButton Name="btn_Next" Content="Next" />
                <s:SurfaceButton Name="btn_Back" Content="Back" />
                <s:SurfaceButton Name="btn_Cancel" Content="Cancel" />
            </StackPanel>
        </Grid>
    </s:ScatterViewItem>
</s:ScatterView> 
```

# c# - 如何使用 UI 自动化库单击“窗格”？

> ID：12662426
> 
> 赞同：2
> 
> 时间：2012-09-30T15:28:28.800
> 
> 标签：c#, ui-automation, microsoft-ui-automation

我们有一个应用程序，我需要在其中单击窗格。我尝试使用以下代码来单击按钮，但它给出了不支持的模式异常。

`InvokePattern click_pattern = (InvokePattern)adjust_button.GetCurrentPattern(InvokePattern.Pattern); click_pattern.Invoke();`

还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T22:50:16.813

即使对象是可点击的，根据内部处理点击的方式，您可能不一定能够使用 InvokePattern 来执行点击。这里似乎就是这种情况。

作为替代方案，您可以使用一些代码将鼠标光标移动到窗格上并使用 P/Invoke 发出单击。像这样的东西：

```
private const UInt32 MOUSEEVENTF_LEFTDOWN = 0x0002;
private const UInt32 MOUSEEVENTF_LEFTUP = 0x0004;

[DllImport("user32.dll")]
private static extern void mouse_event(UInt32 dwFlags, UInt32 dx, UInt32 dy, UInt32 dwData, IntPtr dwExtraInfo);

...
...

AutomationElement paneToClick;

...
...

Cursor.Position = paneToClick.GetClickablePoint();
mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, new IntPtr());
mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, new IntPtr()); 
```

# java - 信号量不起作用

> ID：12662428
> 
> 赞同：0
> 
> 时间：2012-09-30T15:28:47.917
> 
> 标签：java, multithreading, semaphore

我正在尝试创建一个演示信号量使用的小程序。我创建了 2 个线程，它们运行两个 Farmer 实例：一个使用字符串“north”作为参数，一个使用“south”。它们似乎同时完成，而不是先完成 1 个线程，然后再完成第 2 个线程（如输出所示：

农夫过桥，往北
农夫过桥，往南
农夫过桥，现在往北
农夫过桥，现在往南

谁能告诉我我在这里做错了什么？

```
import java.util.concurrent.Semaphore;
public class Farmer implements Runnable
{
    private String heading;
    private final Semaphore bridge = new Semaphore(1);
    public Farmer(String heading)
    {
        this.heading = heading;
    }

    public void run() 
    {
        if (heading == "north")
        {
            try 
            {
                //Check if the bridge is empty
                bridge.acquire();
                System.out.println("Farmer going over the bridge, heading north");
                Thread.sleep(1000);
                System.out.println("Farmer has crossed the bridge and is now heading north");
                bridge.release();
            } 
            catch (InterruptedException e) 
            {
                e.printStackTrace();
            }
            //Farmer crossed the bridge and "releases" it

        }
        else if (heading == "south")
        {
            try 
            {
                //Check if the bridge is empty
                bridge.acquire();
                System.out.println("Farmer going over the bridge, heading south");
                Thread.sleep(1000);
                //Farmer crossed the bridge and "releases" it
                System.out.println("Farmer has crossed the bridge and is now heading south");
                bridge.release();
            } 
            catch (InterruptedException e) 
            {
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T15:31:46.407

每个 Farmer 都在创建自己的信号量，这意味着它可以独立于任何其他人获取和释放它。

改变这个：

```
private final Semaphore bridge = new Semaphore(1); 
```

对此：

```
private final static Semaphore bridge = new Semaphore(1); 
```

然后信号量将在所有 Farmer 实例之间共享。

# linux - 设置 termios linux 内核

> ID：12662430
> 
> 赞同：1
> 
> 时间：2012-09-30T15:29:01.457
> 
> 标签：linux, networking, serial-port, driver, usbserial

我试图从一开始就描述我的问题。我是 linux 潜水员开发的新手，所以请指出我在项目中考虑的问题。

我现在正在为调制解调器开发一个 linux 驱动程序，但不是一个典型的驱动程序。我希望它可以用作网络适配器，而不是调制解调器。它通过串口与电脑相连。由于我的问题的性质，我必须使用 USB 串行转换器。大多数答案建议改用用户空间驱动程序。但是，由于我想提供像 eth0 这样的网络接口，所以我必须在内核中实现它。除了打开/读/写 ttyUSB0 文件之外，我没有任何其他想法解决这个问题。

我现在正在使用这样的代码

```
struct file *f; 
mm_segment_t oldfs; 
struct tty_struct *tty; 
struct termios term; 
unsigned char buffer[255]; 

f=filp_open("/dev/ttyS0",O_RDWR | O_NDELAY,0); 
oldfs=getfs(); 
set_fs(KERNEL_DS); 
f->f_pos=0; 
tty=(struct tty_struct*)f->private_data; 

tty->termios->c_flag=B9600 | CRTSCTS | CS8 | CLOCAL | CREAD; 
```

这时候tty->termios是NULL，所以最后一步就做不了了。我要做的是：

```
struct ktermio term;
//setting the termio
tty->termios = &term; 
```

这样做的结果是该设置未应用于串行端口。即使我将其更改为绝对错误的波特率，我仍然会收到碎片。其中一些是正确的，而另一些则不是。有什么问题，我该怎么办。

# css - CSS 过渡仅适用于 FF Nightly (18.0a1)？

> ID：12662432
> 
> 赞同：0
> 
> 时间：2012-09-30T15:29:08.357
> 
> 标签：css, rotation, css-transitions, css-transforms

[我创建了一个简单的 CSS 过渡来在此页面](http://lksonorizacao.com.br/newsite)（光盘菜单）中将div 旋转 360 度，但它似乎只适用于 Firefox Nightly。我还在 Firefox 15（发布版本）和 Google Chrome 中进行了尝试。两者都只是将图像向左移动一点，并在覆盖的文本周围显示一些图形伪影。这是与光盘相关的 CSS（旋转图像实际上是在真实菜单 div 中设置大小的空 div）：

```
#menuDisco {
    transition: all 0.8s;
    -webkit-transform: rotate(0deg);  
    -moz-transform: rotate(0deg);
    -ms-transform: rotate(0deg);
    -o-transform: rotate(0deg);
    transform: rotate(0deg);
    background: url("img/disco.png");
    background-size: 100% 100%;
    position: relative;
    top: 0%; left: 0%;
    width: 100%; height: 100%;
    color: rgba(0,0,0,0);
}
#menu:hover #menuDisco {
    transition: all 0.8s;
    -webkit-transform: rotate(360deg);  
    -moz-transform: rotate(360deg);
    -ms-transform: rotate(360deg);
    -o-transform: rotate(360deg);
    transform: rotate(360deg);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:10:12.050

确保包括所有前缀。 在 FF16 和 Opera 12.5 中，[过渡没有前缀。](https://developer.mozilla.org/en-US/docs/CSS/transition#Browser_compatibility)（-ms-transition 没有用，因为 IE9 不支持它并且 IE10 没有前缀）。

```
-webkit-transition: all 0.8s;
-moz-transition: all 0.8s;
-o-transition: all 0.8s;
transition: all 0.8s; 
```

您也不需要第二个样式声明中的转换规则，因为它与第一个相同。

# iphone - 应用程序使用

> ID：12662439
> 
> 赞同：3
> 
> 时间：2012-09-30T15:29:48.857
> 
> 标签：iphone, objective-c, ios, appirater

我已将[Appirater](https://github.com/arashpayan/appirater)添加到我的一个项目中。据我所知，Appirater 是开箱即用的 ARC，但我遇到了委托的问题，我必须自己合成它。但这不是问题。

这是我添加到我的应用程序委托中的代码：

```
[Appirater setAppId:@"0101010101"];
    [Appirater setDaysUntilPrompt:-1];
    [Appirater setUsesUntilPrompt:-1];
    [Appirater setTimeBeforeReminding:2];
    [Appirater setDebug:YES];
    [Appirater appLaunched:YES]; 
```

就我所见，在我按下应用程序评分后，Appirater 不应再要求对应用程序进行评分，其中没有任何功能可以设置用户按下“评分”。按稍后提醒我按钮应该禁用 Appirater 警报 2 天（请参阅 setTimeBeforeReminding :) 但这也不起作用。每次我重新打开应用程序时，它只会提示我对我的应用程序进行评分，无论我点击什么。关于如何使用这个类或演练的任何想法？

注意：使用 23 天前更新的当前版本的 appirater，还有一个我没有使用过的类 AppiraterDelegate。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T16:15:47.307

如果您将调试设置为`YES`它会在您每次打开应用程序时要求评分。将其设置为`[Appirater setDebug:NO];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-09T03:33:19.800

确保在真实设备而不是模拟器上进行测试，并按照@jcesar 的建议进行设置`[Appirater setDebug:NO];`

```
- (void)applicationWillEnterForeground:(UIApplication *)application
{
    [Appirater appEnteredForeground:YES];
} 
```

# apache - Mod_rewrite 未按预期运行

> ID：12662441
> 
> 赞同：1
> 
> 时间：2012-09-30T15:30:03.007
> 
> 标签：apache, mod-rewrite

我想创建一个重写规则，以便

```
www.example.com/whatever/here 
```

将映射到

```
www.example.com/index.php/whatever/here 
```

所以这`$_SERVER['PATH_INFO']`是可用的。为此，我创建了以下规则集：

```
RewriteEngine On
RewriteCond {%REQUEST_FILENAME} !-f
RewriteCond {%REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 
```

只有这给了我一个 500 服务器错误。Apache 错误日志指出

> [Sun Sep 30 17:23:08.758705 2012] [core:error] [pid 2584:tid 1704] [client ::1:58591] AH00124：由于可能的配置错误，请求超出了 10 个内部重定向的限制。如有必要，使用“LimitInternalRecursion”增加限制。使用“LogLevel debug”获取回溯。

但我看不到递归。当我尝试它时，让我们说一个查询：

```
RewriteRule ^(.*)$ index.php?route=$1 
```

它按预期工作，但`$_SERVER['PATH_INFO']`不可用。

* * *

此外，在任何人问之前，我想要，`$_SERVER['PATH_INFO']`因为这样，我可以有像这样的复杂路径：

```
www.example.com/controller/action/data?more=data 
```

如果我需要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:32:42.000

`RewriteCond`如果那是您的真实代码，则您的服务器环境变量在 中指定不正确。如果不是一个完全 500 的解析错误，这将导致条件被忽略并且重写发生在每个请求上，从而导致循环。

```
RewriteEngine On
# The % goes outside the {}
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# And add a [L] flag
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# apache - 将文件上传到 EC2 时权限被拒绝

> ID：12662447
> 
> 赞同：1
> 
> 时间：2012-09-30T15:30:22.820
> 
> 标签：apache, amazon-ec2

我已经在 linux 中安装了 apache webserver apache，我使用以下代码上传文件，但我的权限被拒绝

```
scp -i adjmp.pem index.html ec2-user@ec2-50-17-88-33.compute-1.amazonaws.com:/var/www/html/hi 
```

如何将文件上传到 EC2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:22:25.783

您很可能需要更改文件系统权限。这通常使用`chmod`命令来完成。您可能还需要修改文件所有权（使用`chown`命令）。

如果您需要有关具体步骤的帮助，您可以提供以下两个命令的输出，我会尽力提供帮助：

```
sudo ls -al /var/www/html/hi
id 
```

# javascript - jQuery.hover 导致闪烁效果

> ID：12662449
> 
> 赞同：1
> 
> 时间：2012-09-30T15:30:32.943
> 
> 标签：javascript, jquery, html

我有两张图像，其中一张非常小并且叠加在另一张上。当我将鼠标悬停在较大的图像上时，第二个图像应该出现在它的顶部。这很好用。不幸的是，当我将鼠标移到较小的图像上（请记住，它位于较大的图像之上）时，屏幕会疯狂闪烁。系统认为我正在离开较大的图像，而实际上我并没有。让我发布一些代码。

```
<li id="li-{{ photo.id }}">
    <div class="photo-container">
        <img class="photo" src="{{ photo.thumbnailFile.url }}"/>
        <img class="delete-button" src="{{ STATIC_URL }}delete_photo.jpg "/>
    </div>
</li>

function DisplayPhotoOptions() {
$("#personal-photo-list .photo").hover(function(event) {
    $(this).fadeTo("fast", 0.5);
    $(this).next(".delete-button").css("visibility", "visible");
}, function() {
    $(this).fadeTo("fast", 1.0);
    $(this).next(".delete-button").css("visibility", "hidden");
});

(function() {
    $(document).ready(function() {
         DisplayPhotoOptions()
    });
    })(); 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T15:33:27.017

光标留下更大的图像，因为`.delete-photo`不是它的孩子。

尝试绑定`hover`到`.photo-container`.

# objective-c - uitableview的预加载单元

> ID：12662450
> 
> 赞同：10
> 
> 时间：2012-09-30T15:30:33.103
> 
> 标签：objective-c, uitableview

我承认 UITableview 在用户滚动时动态加载一个单元格。我想知道是否有一种方法可以预加载所有单元格，以便在滚动时不加载每个单元格。我需要预加载 10 个单元格。这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T15:40:09.723

您可以初始化表格视图单元格，将它们放入数组`precomputedCells`中，并在数据源委托方法`tableView:cellForRowAtIndexPath:`中从数组中返回预先计算的单元格，而不是调用`dequeueReusableCellWithIdentifier:`. （类似于您在静态表格视图中所做的事情。）

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    return [self.precomputedCells objectAtIndex:indexPath.row];
} 
```

看看 WWDC 2012 Session 211 “Building Concurrent User Interfaces on iOS”可能也很有用，其中展示了如何在后台线程中填充表格视图单元格的内容，同时保持用户界面响应。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-12-12T14:13:25.307

我正在寻找原始问题的解决方案，我想我会分享我的解决方案。

就我而言，我只需要预加载下一个单元格（我不会详细说明原因，但有一个很好的理由）。

似乎 UITableView 呈现尽可能多的单元格，以适应分配给它的 UITableView 框架。

因此，我将 UITableView 框架超大了 1 个额外单元格的高度，将过大的区域推到了屏幕外（或者如果需要，它可以进入剪辑的 UIView）。当然，这意味着当我滚动表格视图时，最后一个单元格将不可见（因为 UITableView 框架大于它的超级视图）。因此，我在单元格高度的 tableFooterView 中添加了一个额外的 UIView。这意味着当表格滚动到底部时，最后一个单元格很好地位于其超级视图的底部，而添加的 tableFooterView 保持在屏幕外。

这当然可以应用于任何数量的细胞。如果需要，甚至可以通过将 UITableView 框架超大到 iOS 最初计算的 contentSize，然后添加相同大小的 tableFooterView 来应用它来预加载所有单元格。

希望这可以帮助其他有同样问题的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-22T09:47:02.593

正如 Mark 所建议的，我还临时更改了 UITableView 的高度，以便表格视图创建足够的可重用单元格。然后我重置了我的表格视图的高度，以便它在滚动时停止创建可重用的单元格。

为此，我创建了一个默认设置为 false 的 helper bool：

```
var didPreloadCells = false 
```

当我的表格视图第一次重新加载数据并因此创建第一个可重用单元格时，它设置为 true。

```
resultsHandler.doSearch { (resultDict, error) -> Void in
    [...]

    self.tableView.reloadData()

    self.didPreloadCells = true

    [...]
} 
```

真正的技巧发生在我的 viewDidLayoutSubviews 方法中。在这里，我根据布尔值设置表格视图的框架。如果尚未创建可重用单元格，我会增加表格视图的框架。在另一种情况下，我设置了正常框架

```
override func viewDidLayoutSubviews() {

    super.viewDidLayoutSubviews()

    self.tableView.frame = self.view.bounds

    if !didPreloadCells
    {
        self.tableView.frame.size.height += ResultCellHeight
    }
} 
```

借助该表视图创建的初始可重用单元格比正常情况多，并且滚动流畅流畅，因为不需要创建额外的单元格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T03:39:57.033

Change the dequeueReusableCellWithIdentifier when you are reusing the table view otherwise it will load the old data

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-11T20:49:43.413

自动调整单元格的解决方案。将“estimatedRowHeight”更改为较低的值

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.tableView.rowHeight = UITableViewAutomaticDimension;
    self.tableView.estimatedRowHeight = 32; //Actual is 64
} 
```

实际估计高度为 64。32 用于添加更多单元格以供重复使用，以避免滚动开始时出现滞后

# php - 查询字符串安全和变量插值

> ID：12662458
> 
> 赞同：2
> 
> 时间：2012-09-30T15:31:11.027
> 
> 标签：php, string-interpolation

对PHP不是很熟悉，能不能让用户利用变量插值来获取secret的值？

```
<?php 
    $secret = 'hidden data';
    echo $_GET['id'];
?> 
```

我尝试传入 id：$secret, %24secret, ${secret}, {$secret}, %7D%24secret%7D, %24%7Dsecret%7D。到目前为止，它似乎是安全的，但只是想确保我没有遗漏任何东西。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:32:53.960

不，用户不可能以这种方式检索硬编码的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:38:40.473

不。

但`htmlentities($_GET["id"])`无论如何都要使用，否则我们可以使用跨站点脚本攻击（窃取登录 cookie、会话数据等）。

# python - 返回多个结果

> ID：12662459
> 
> 赞同：0
> 
> 时间：2012-09-30T15:31:11.223
> 
> 标签：python, wiki

我正在使用以下代码：

```
def recentchanges(bot=False,rclimit=20):
    """
    @description: Gets the last 20 pages edited on the recent changes and who the user who     edited it
    """
    recent_changes_data = {
        'action':'query',
        'list':'recentchanges',
        'rcprop':'user|title',
        'rclimit':rclimit,
        'format':'json'
    }
    if bot is False:
        recent_changes_data['rcshow'] = '!bot'
    else:
        pass
    data = urllib.urlencode(recent_changes_data)
    response = opener.open('http://runescape.wikia.com/api.php',data)
    content = json.load(response)
    pages = tuple(content['query']['recentchanges'])
    for title in pages:
        return title['title'] 
```

当我这样做时，`recentchanges()`我只会得到一个结果。如果我打印它，所有页面都会打印出来。
我只是误解还是这与python有关？

此外，开瓶器是：

```
cj = CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:46:02.573

Once a return statment is reached in a function, that functions execution ends, so the second return does not get executed. In order to return both values you need to pack them in a list or tuple:

```
...
returnList = [title['title'] for title in pages]
return returnList 
```

This uses list comprehension to make a list of all the object you want the function to return and then returns it.

Then you can unpackage individual results from the return list:

```
answerList = recentchanges()
for element in answerList:
    print element 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:39:16.513

您遇到的问题是函数在它看到的第一个返回行处结束。

所以。在行中

```
for title in pages:
    return title['title'] 
```

它只返回第一个值：`pages[0]['title']`.

解决此问题的一种方法是使用列表理解，即

```
return [ title['title'] for title in pages ] 
```

另一种选择是制作`recentchanges`一个生成器并使用`yield`.

```
for title in pages:
    yield title['title'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:38:55.040

`return`结束函数。所以循环只执行一次，因为你`return`在循环中。想一想：一旦返回第一个值，调用者将如何获得后续值？他们是否必须再次调用该函数？但这将重新开始。Python 是否应该等到循环完成才能一次返回所有值？但是他们会去哪里，Python 怎么知道这样做呢？

`yield`您可以在这里通过ing 而不是ing 来提供生成器`return`。你也可以只返回一个生成器：

```
return (page['title'] for page in pages) 
```

无论哪种方式，调用者都可以根据需要将其转换为列表，或者直接对其进行迭代：

```
titles = list(recentchanges())

# or

for title in recentchanges():
    print title 
```

或者，您可以只返回标题列表：

```
return [page['title'] for page in pages] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T15:38:58.497

由于您使用`return`，您的函数将在返回第一个值后结束。

有两种选择；

*   您可以将标题附加到列表并返回，或者
*   你可以使用`yield`而不是`return`将你的函数变成一个[生成器](http://wiki.python.org/moin/Generators)。

后者可能更 Pythonic，因为你可以像这样使用它：

```
for title in recentchanges():
   # do something with the title
   pass 
```

# c++ - 为向量类编写 sort() 方法

> ID：12662460
> 
> 赞同：3
> 
> 时间：2012-09-30T15:31:13.583
> 
> 标签：c++, templates, sorting, vector, operator-keyword

我正在编写自己的向量类 Vector，其中包含以下数据成员：T* 数组、size_t vector_size 和 size_t 容量。我正在尝试创建一个 sort() 方法：

```
template <class T>                                                                                                 
void Vector<T>::sort(bool ascending)                                                                                 
{                                                                                                                   
    std::sort(array,array+vector_size);                                                                              
    if(ascending==false)                                                                                             
        std::reverse(array,array+vector_size);                                                                      
} 
```

当数组中的元素是 int、char 等类型时，它可以正常工作。但是当我尝试对由 Vector 元素组成的向量进行排序时，它不会编译。根据我的阅读，我需要以`<`某种方式定义运算符，但我真的不知道该怎么做......

我努力了：

```
template <class T>
bool Vector<T>::operator<(Vector<T> & source) const
{
    return (vector_size < source.vector_size);
} 
```

我的主要外观是这样的：

```
int main() {
    Vector<int> v1(5,1);
    Vector<int> v2(7,2);
    Vector<int> v3(3,3);
    Vector<Vector<int>> v4;
    v4 = {v1,v2,v3};
    v4.sort(1);
return 0;
} 
```

这是我得到的错误之一：

/usr/include/c++/4.6/bits/stl_algo.h:2212:4：错误：'* __first < __pivot'中的'operator<'不匹配</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:35:01.507

您提供了带有错误签名的比较方法。您需要接受 const 引用或值，但不是对您的类型的（可修改）引用，而前者应该是首选，除非它是原始类型。因此，您的比较方法的签名应如下所示：

```
template <class T>
bool Vector<T>::operator<(const Vector<T> & source) const
{
    return (vector_size < source.vector_size);
} 
```

这是因为`std::sort`（以及许多其他方法）旨在不修改内容。如果它们采用值（但对于大型类型来说这会很慢）或 const 引用，则可以保证这一点。

请注意，您定义了比较方法来比较*向量的大小*，而不是它们的内容。你所有的向量都是等长的。因此它们被视为相等`std::sort`。所以`std::sort`不会改变`v4`...如果您打算以类似于字符串比较的方式比较内容（第一个条目首先计数，如果相等则取下一个，依此类推...），请使用：

```
template <class T>
bool Vector<T>::operator<(const Vector<T> & source) const
{
    for(int i = 0; i < size && i < source.size; ++i) {
        if(*this[i] < source[i])
            return true;
        else if(source[i] < *this[i])
            return false;
    }
    // You have to decide what to do if the length isn't equal.
    // But if the vectors are really equal than return false:
    if(size == source.size)
        return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:34:57.263

你忘了一个常量！

```
template <class T>
bool Vector<T>::operator<(const Vector<T> & source) const // <- here
{
    return (vector_size < source.vector_size);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T15:39:03.403

您需要的一件事是`const`在参数中使用运算符，否则它无法匹配任何只读的内容（这将是常见情况）。

请记住，尽管每次交换发生时对向量的向量进行排序都会复制*整个向量。*这不会特别有效。如果向量是分开存储的，并且你有类似向量的指针到向量的东西，至少排序会更快。

请务必阅读“严格弱排序”的定义。排序与自身保持一致非常重要，否则标准算法（如 std::sort() 可能会出现严重的错误行为（在某些实现中会破坏内存））。

# objective-c - 如何对给定的 UITableView 设置背景图像进行单元测试

> ID：12662462
> 
> 赞同：1
> 
> 时间：2012-09-30T15:31:40.310
> 
> 标签：objective-c, uitableview, ocunit

我正在使用 ocunit，我正在尝试验证我在 UITableView 上设置了背景图像

在下面的测试中，我的断言失败了

```
- (void)testNumberOfRowsInSectionSetsBackgroundViewOnTableView
{
    UIImageView *expectedBackground = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"foo.png"]];
    UITableView *tableView = [[UITableView alloc] init];
    [self.sut tableView:tableView numberOfRowsInSection:0];
    STAssertEqualObjects(tableView.backgroundView, expectedBackground, @"");
} 
```

***下面的断言错误***

```
'<UIImageView: 0xe65c2a0; frame = (0 0; 0 0); opaque = NO; autoresize = W+H; userInteractionEnabled = NO; layer = <CALayer: 0xe65cb40>>' should be equal to '<UIImageView: 0xe65bcf0; frame = (0 0; 320 480); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xe65bd50>>' 
```

生产代码如下

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    [tableView setBackgroundView:[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"foo.png"]]]; //untested
    return [self.options count];
} 
```

我只想验证 png （如果可能的话，不是整个 UIImageView ）

先感谢您

# select - 增加 FD_SETSIZE

> ID：12662468
> 
> 赞同：5
> 
> 时间：2012-09-30T15:32:23.557
> 
> 标签：select, glibc

我需要将 FD_SETSIZE 值从`1024`增加到`4096`。我知道使用它会更好，`poll()/epoll()`但我想了解什么是优点/缺点。主要问题是：我必须重新编译`glibc`吗？我阅读了几个线程，其中更改后.h 的更改`FD_SETSIZE`仅重新编译用户应用程序。阅读`glibc`代码（以及内核），实际上在我看来，如果我想使用 select()、FD_* 宏等，我必须重新编译所有内容，因为大小`fd_set`已更改。在这一点上，我不仅要重新编译*我*的应用程序，因为如果系统中有另一个使用 select 和 Friends 的“通用”应用程序，我可能会遇到问题。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-09-15T18:00:34.497

从技术上讲，您不必重新编译 glibc。使用你自己的版本就足够了，`<sys/select.h>`它有一个更大的`fd_set_t`，但在其他方面是兼容的。它将神奇地工作，因为该`select`函数接收最大的文件描述符（加一），因此它可以计算出设置的大小。其他函数和宏要么是内联的，要么不关心实际的集合大小。

这仍然是一个坏主意，所以你真的应该使用`poll`or`epoll`代替。

过去，一些 libcs​​ 支持`FD_SETSIZE`在包含之前定义`<sys/select.h>`以获得更大的集合大小，但我不认为对这一点的支持曾经是主线 glibc 的一部分。

# javascript - Google Maps Javascript API：marker.setPosition 问题

> ID：12662469
> 
> 赞同：3
> 
> 时间：2012-09-30T15:32:38.980
> 
> 标签：javascript, google-maps, marker

这可能是显而易见的……但我看不到。以下代码对除 marker.setPosition 操作之外的所有内容均按预期工作：

```
<head>
<title>Test Simulation</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"  src="http://maps.googleapis.com/maps/api/js?key=x&sensor=false">
</script>

<script type="text/javascript">
  var marker = null;
  var myLatlng = null;
  var map = null;
  var image = null;
  var mapOptions = null

  function movemarker()
  {
    xmlhttp=new XMLHttpRequest();
    xmlhttp.open("GET","http://x.com/x13/?testloc=1",false);
    xmlhttp.send();

    var data = xmlhttp.responseText;
    vals = data.split(',');
    latv = parseFloat(vals[0]);
    lonv = parseFloat(vals[1]);
    myLatlng = new google.maps.LatLng(latv,lonv);

    var fld = document.getElementById('before_map');
    fld.innerText = ' ' + 'lat:' + latv + ', lon: ' + lonv + ' ' + myLatlng.toString();
    marker.setPosition = myLatlng;
  }

  function initialize()
  {
    myLatlng = new google.maps.LatLng(44.809122,-36.650391);
    mapOptions = 
    {
      center: myLatlng,
      zoom: 3,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map_canvas"),
      mapOptions);

    image = 'http://x.com/x_icon.gif';
    marker = new google.maps.Marker(
    {
      position: myLatlng,
      map: map,
      icon: image,
      title:"Hello World!"
    })

    window.setInterval("movemarker()",5000);
  }
</script>
</head>
<body onload="initialize(); ">
<div id="before_map">Test area...</div>
<div id="map_canvas" style="align:right; width:600; height:500"></div> 
```

“before_map”测试区域显示新的纬度和经度值——每 5 秒更新一次。

我已经根据类似问题的答案进行了调整，但我仍然卡住了。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-30T15:39:33.980

setPosition 是一种方法。您需要将代码修改为

```
marker.setPosition(myLatlng); 
```

请检查它是否有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-30T15:40:44.357

marker.setPosition 是一个函数，而不是一个属性，我想你想要

`marker.setPosition(myLatlng);`

# python - Windows：如何在空闲状态下在任务栏中静默运行任何 python 应用程序

> ID：12662481
> 
> 赞同：-1
> 
> 时间：2012-09-30T15:33:24.830
> 
> 标签：python, windows, pywin32, win32com

> **可能重复：**
> [快速简单：带有python的trayicon？](https://stackoverflow.com/questions/6389580/quick-and-easy-trayicon-with-python)

python有没有办法在空闲状态下在任务栏中静默运行基于python的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:21:02.400

您可以正常启动您的应用程序，然后通过 pywin32 魔术隐藏它。

或者，您可以使您的程序成为服务，但我不确定这是如何完成的。

# android - Android 4.0.4 未显示在我的 Android SDK 管理器中

> ID：12662486
> 
> 赞同：4
> 
> 时间：2012-09-30T15:33:56.403
> 
> 标签：android, eclipse

我的手机是带有 Android 4.0.4 的三星 Galaxy S3。我无法在手机上运行应用程序（来自 Eclipse），因为在 Android SDK Manager 中，我只能安装 Android 4.0.3 或 Android 4.1。Android 4.0.4 没有列出，所以我不能在我的 Eclipse 项目中选择它作为目标。据我了解，我需要在 SDK Manager 中安装 Android 4.0.4，否则我无法在我的 Android 设备上运行应用程序。有解决方法吗？为什么 Android 4.0.4 不在 Android SDK Manager 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T15:39:28.467

4.0.4 是您设备上的构建版本。SDK 管理器中列出的版本是对 API 进行更改的版本，无论是错误修复还是功能添加/删除。

只要指定的最低 SDK 等于或低于您的手机运行的版本，您就可以针对任何 Android SDK 并仍然在您的设备上运行。您可以[在此处](http://developer.android.com/about/dashboards/index.html)查看 API 版本及其相应的 Android 版本。

# c# - 使用没有 DLL 的 Log4Net

> ID：12662487
> 
> 赞同：0
> 
> 时间：2012-09-30T15:34:05.843
> 
> 标签：c#, winforms, embed, log4net

我的 C# WinForms 应用程序设计为易于部署，我不喜欢 log4net.dll 成为要部署的附加文件的事实。有没有办法可以将它嵌入到我的应用程序中，以便所有用户都可以查看主 .exe 文件和后端 SQL CE 数据库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T15:36:37.573

是的。您可以使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)来做到这一点。

> ILMerge 是一个实用程序，可用于将多个 .NET 程序集合并为一个程序集。ILMerge 采用一组输入程序集并将它们合并到一个目标程序集中。输入程序集列表中的第一个程序集是主程序集。当主程序集是可执行文件时，目标程序集被创建为具有与主程序集相同入口点的可执行文件。

[这是 ILMerge 的 GUI](http://ilmergegui.codeplex.com/)，可让您更轻松

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T15:46:03.463

Well, as a side approach (other than ILMerge),

You can log everything in your server where you have deployed your application using log4net. When you want to retrieve your log, use Webrequest to get the data from the server.

Provided everything will need internet connection to log.

# android - 科尔多瓦 2.0.0 下载文件 Android

> ID：12662488
> 
> 赞同：3
> 
> 时间：2012-09-30T15:34:31.133
> 
> 标签：android, download, file-transfer, cordova-2.0.0

我尝试使用cordova 2.0.0 API FileTransfer().download()，我得到2个连续错误1）下载错误源文件2）下载错误目标文件

这是我的代码...

```
 function downloadMaterial() {

    var fileTransfer = new FileTransfer();
    var serverURL = 'http://img.youm7.com/images/NewsPics/large/S2200921125437.jpg';  

    var uri = encodeURI(serverURL);
    var filePath = persistent_root.fullPath+"/" + fileName;
    //filePath = file:///data/data/com.example.studyapp/S2200921125437.jpg

    var onSuccess = function (entry) {
        console.log("download complete: " + entry.fullPath);
    };
    var onError = function (error) {
        console.log("download error source " + error.source);
        console.log("download error target " + error.target);
        console.log("upload error code " + error.code);
    };
    fileTransfer.download(uri, filePath , onSuccess, onError);
} 
```

你知道我该怎么做吗？提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:04:48.367

嗨我已经解决了上面的问题..我已经安装了新的cordova 2.1.0版并且我没有添加任何代码行然后它可以正常工作所以我认为这是cordova 2.0.0 API中的一个错误或类似的东西它。

谢谢！

# c# - 如何匹配自定义 PropertyGrid BrowsableAttributes 条目？

> ID：12662496
> 
> 赞同：4
> 
> 时间：2012-09-30T15:35:47.497
> 
> 标签：c#

我有一个带有此代码的类（KeywordProperties）：

```
public class KeywordProperties
    {
        [DisplayMode("0-1,0-2,0-3,1-1,1-2,1-3,1-6,1-9,1-10,1-11,1-12,2-1,2-2,2-3,2-9,2-10,2-12,3-1,3-2,3-3,3-10,3-12,4-13,5,6")]
        public string Onvaan { get; set; }

        [DisplayMode("0-1,0-2,0-3,1-1,1-2,1-3,1-6,1-9,1-10,1-11,1-12,2-1,2-2,2-3,2-9,2-10,2-12,3-1,3-2,3-3,3-10,3-12,4-13,5,6")]
        public string MozooKolli { get; set; }

        [DisplayMode("0-10,1-10,3-10,3-12,5,6")]
        public string EsmeDars { get; set; }

        [DisplayMode("0-1,1-1,2-1,2-2,3-1,6")]       
        public string Sokhanraan { get; set; }

        [DisplayMode("0-10,1-2,2-1,2-10,3-10,6")]
        public string Modares { get; set; }
} 
```

我还有另一个检查属性：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false, Inherited = true)]
public class DisplayModeAttribute : Attribute
{
    private readonly string mode;
    public DisplayModeAttribute(string mode)
    {
        this.mode = mode ?? "";
    }
    public override bool Match(object obj)
    {
        var other = obj as DisplayModeAttribute;
        if (other == null) return false;

        if (other.mode == mode) return true;

        // allow for a comma-separated match, in either direction
        if (mode.IndexOf(',') >= 0)
        {
            string[] tokens = mode.Split(',');
            if (Array.IndexOf(tokens, other.mode) >= 0) return true;
        }
        else if (other.mode.IndexOf(',') >= 0)
        {
            string[] tokens = other.mode.Split(',');
            if (Array.IndexOf(tokens, mode) >= 0) return true;
        }
        return false;
    }
} 
```

我想使用以下代码在 propertygrid 中显示属性：

```
String Code = "":
KeywordProperties Kp = new KeywordProperties();
propertygrid1.SelectedObject = Kp;
propertygrid1.BrowsableAttributes = new AttributeCollection(new DisplayModeAttribute(Code)); 
```

当 Code vlue 为“0-1”或“5”或...（单个值）时，我可以看到我的属性。但是，当对代码使用“0-1,1-2”时，我的属性网格中看不到任何东西。

我怎样才能看到这些数据：

1- 具有代码**0-1 和**代码**1-2**的所有属性：

结果是：**Onvaan，MozooKolli**

2- 具有代码**0-1 或**代码**1-2**的所有属性：

结果是：**Onvaan、MozooKolli、Sokhanraan、Modares**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:03:18.367

看来您的代码仅`DisplayModeAttributes`在两者都具有单个值或一个包含单个值而另一个包含多个值时才匹配；当两者都包含多个值时，它不会匹配它们，除非值列表相同。

要按原样使用代码，您可以更改填充*PropertyGrid.BrowsableAttributes*的方式：

```
propertygrid1.BrowsableAttributes = new AttributeCollection(
    new DisplayModeAttribute("0-1"),
    new DisplayModeAttribute("1-2")
    // etc.
); 
```

或者，要修复您的匹配代码，您可以将其替换为以下内容：

```
public override bool Match(object obj)
{
    var other = obj as DisplayModeAttribute;

    if (other == null)
        return false;

    if (other.mode == mode)
        return true;

    string[] modes = mode.Split(',');
    string[] others = other.mode.Split(',');

    var matches = modes.Intersect(others);

    return matches.Count() > 0;
} 
```

这使用[LINQ Intersect](http://msdn.microsoft.com/en-us/library/bb302032.aspx)方法，该方法返回两个列表共有的元素。

# javascript - 未定义参数的性能损失

> ID：12662497
> 
> 赞同：10
> 
> 时间：2012-09-30T15:36:11.477
> 
> 标签：javascript, performance, arguments

我经常在函数中有可选参数，但一些测试显示它们在 Firefox 和 safari (70-95%) 中对它们的性能造成了巨大影响。*奇怪的是，如果我传入未定义*的字面值，那么就没有惩罚。这里会发生什么？我不会认为这是一个作用域链问题，因为它们本质上是函数本地的。我要开始将*undefined*传递给每个可选参数吗？

jsPerf：http: [//jsperf.com/function-undefined-args/2](http://jsperf.com/function-undefined-args/2)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T16:12:42.263

对于这样的功能：

```
function threeArgs(x, y, z) {
  return x + y + z;
} 
```

就是这样称呼的：

```
threeArgs(1, 2, 3); 
```

优化器可以自由选择不生成任何代码。它很容易确定没有副作用，因为该函数只是引用其参数值并返回简单表达式的结果。由于返回值被忽略，运行时根本没有理由做任何事情。

除此之外，如果代码是：

```
something += threeArgs(1, 2, 3); 
```

优化器可能决定生成大致相当于：

```
something += 6; 
```

为什么？因为调用是用数字常量进行的，它可以在代码生成时安全地折叠它们。这可能是保守的，因为数字很奇怪，但这里它们都是整数，所以它可以很好地做到这一点。即使没有，它也可以安全地内联函数：

```
something += 1 + 2 + 3; 
```

但是，当缺少参数时，优化器可能会退出并生成真正的函数调用。对于这样一个简单的函数，函数调用的开销很容易导致性能上的巨大差异。

通过在测试中使用变量而不是常量，并且通过实际使用函数的返回值，您可以“混淆”优化器并防止它跳过调用或预先计算结果，但您不能阻止它内联。由于这个原因，我仍然认为您的结果很有趣：它暴露了这样一个事实，即（无论如何）这些优化器对调用函数的方式很敏感。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T16:10:57.303

我认为可以解释性能差异的原因是参数传递给函数对象的方式：通过`arguments`对象。当不传递任何参数时，JS 将首先扫描任何给定参数的 arguments 对象，当这些参数未定义时，`arguments`原型链将被扫描，一直到`Object.prototype`. 如果这些都缺少所需的属性，JS 将返回`undefined`. 然而，显式传递 undefined ，将其设置为直接在 arguments 对象上的属性：

```
function foo(arg)
{
    console.log(arguments.hasOwnProperty('0'));
}
foo();//false'
foo('bar');//true
foo(undefined);//true 
```

我认为这就是为什么明确传递未定义往往更快的原因。

# asp.net - 使用 VS2012 RC 创建的 ASP.NET Webforms 项目不能在 VS2012 RTM 中运行

> ID：12662501
> 
> 赞同：1
> 
> 时间：2012-09-30T15:36:49.607
> 
> 标签：asp.net, .net-4.0, visual-studio-2012, webforms

我使用 RC 版本的 Visual Studio 2012 创建了一个 ASP.NET Webforms 项目，我特意使用了 4.0 版本的 .Net 和项目模板以避免 VS2012 发布后的复杂性。

现在我无论如何都遇到了这个问题，这在以下错误消息中有所揭示：

```
'jquery' is not a valid script name.  The name must end in '.js'. 
```

正如我在参考资料中注意到的那样，以下程序集参考资料已损坏：

*   Microsoft.ScriptManager.jQuery
*   Microsoft.ScriptManager.jQuery.UI.Component
*   System.Web.Providers

我尝试使用 NuGet 重新安装 jQuery，但没有找到这些程序集。如果我现在在 Visual Studio 2012 中创建一个新的 .Net 4.0 ASP.NET Webforms 项目，我会得到很多我当前不存在的新引用（最初在 RC 版本中创建，现在在 VS2012 RTM 中打开），例如：

*   AspNet.ScriptManager.jQuery
*   AspNet.ScriptManager.jQuery.UI.Combined

但是如果我尝试为我的原始项目添加新的参考，我无法在参考源中找到它们。

如何使我的应用程序在 VS2012 中可运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T09:11:59.393

检查包裹

```
AspNet.ScriptManager.jQuery.1.7.1
AspNet.ScriptManager.jQuery.UI.Combined.1.8.20 
```

确保以下 dll 在 lib 文件夹中

```
AspNet.ScriptManager.jQuery.dll
AspNet.ScriptManager.jQuery.UI.Combined.dll 
```

并检查项目中的引用以确保所有引用都已解决。

有时，dll 没有添加到源代码管理中，当您从源代码管理中获取最新信息时，这两个 dll 丢失了。

# android - 在 ActionBar 中使用 ProgressDialog (Android)

> ID：12662502
> 
> 赞同：9
> 
> 时间：2012-09-30T15:37:13.503
> 
> 标签：android, android-actionbar, progressdialog

我正在尝试将 ProgressDialog 移动到我的 ActionBar。

我知道如何将它放在操作栏中并为其设置动画（我认为），如下所示：

进行中.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="1" >

    <ProgressBar
        android:id="@+id/progress"
        style="?android:attr/progressBarStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >
    </ProgressBar>

</LinearLayout> 
```

在 menu.xml 中

```
<item
    android:id="@+id/Refresh"
    android:icon="@drawable/ic_menu_refresh"
    android:showAsAction="always"
    android:title="Refresh"/> 
```

在我的活动中

```
 case R.id.Refresh:
        item.setActionView(R.layout.progress);
        return true; 
```

这是我在AsyncTask`onPreExecute`中的当前 PD（在活动中） ：`onPostExecute`

```
// Pre  
dialog = new MyProgressDialog(---.this);
dialog.show(---.this);

// Post    
dialog.dismiss(---.this); 
```

那么如何移动它以使操作栏指示器激活`onPreExecute`然后停止`onPostExecute`？

编辑：当您第一次加载活动（或执行需要 PD 激活的操作）时，我不仅在寻找刷新，而且在寻找“加载”指示器。它应该默认隐藏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-04T20:04:16.317

我想我将不得不回答我自己的问题。这其实很简单。

在活动中，就在上面`setContentView`

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS); 
```

`AsyncTask`

```
// pre
setProgressBarIndeterminateVisibility(true);

// Get Data

// post
setProgressBarIndeterminateVisibility(false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T13:25:56.790

如果你必须在 **onCreate()**

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);  
setProgressBarIndeterminateVisibility(true); 
```

或者如果您使用的是**支持包**，它将是

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);  
setSupportProgressBarIndeterminateVisibility(true); 
```

如果您发现任何问题，请发表评论。

# twitter-bootstrap - 与 input-prepend/append 结合使用时，字体大小为 0 的输入

> ID：12662504
> 
> 赞同：4
> 
> 时间：2012-09-30T15:37:17.947
> 
> 标签：twitter-bootstrap, ruby-on-rails-3.2

我正在尝试在 Rails 应用程序中使用引导程序，并且我已经尝试直接包含引导程序 CSS 或使用 bootstrap-sass/anjlab-boostrap-rails。

在他们三个中，我面临着一个我不理解的奇怪问题。

我有以下html代码：

```
<div class="input-append">
  <input type="text" /><a href="#" class="btn">?</a>
</div> 
```

渲染没问题，但是当我在现场打字时，什么都没有出现。进一步调查，我发现 input-prepend/append 将字体大小设置为 0，然后文本似乎消失了。

我在编写 HTML 代码时是否忘记了什么？这是对的吗 ？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-18T22:17:53.223

我刚刚也注意到了这个问题，并能够追查原因。

Bootstrap（版本 2）的 css 规则`.input-append`并将`.input-prepend`字体大小设置为 0 以消除水平空白。然后将几个元素重置为正确的字体大小，但`.btn`不包括在重置中。通过添加`.btn`到获得恢复字体大小的元素列表中，我能够解决这个问题。

**注意：**这在 Bootstrap 3 中不再是问题，因为新`.input-group`样式依赖于浮动而不是以前的内联块方法（使用空白 hack）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T05:44:49.217

最后，我发现了这个问题。我没有意识到我有另一个样式表与我的这部分代码冲突。冲突中隐含的代码如下：

```
input, textarea {
  font-size: 1.1em !important;
} 
```

当我评论这个风格声明时，它再次像魅力一样起作用。我不明白为什么这会导致我有一些奇怪的行为。就我而言，这个定义是在包含 bootstrap.css 之后出现的。

# c# - 如何获取 ENVDTE CodeInterface 的泛型类型参数？

> ID：12662506
> 
> 赞同：9
> 
> 时间：2012-09-30T15:37:31.347
> 
> 标签：c#, .net, visual-studio, t4, envdte

我正在 Visual Studio 2010 中编写 T4 模板，并根据项目中的现有类生成代码。我需要生成的代码取决于类实现的接口的泛型类型参数，但我看不到通过 Visual Studio 核心自动化 EnvDTE 访问该信息的方法。这是我需要分析的一个类的示例：

```
public class GetCustomerByIdQuery : IQuery<Customer>
{
    public int CustomerId { get; set; }
} 
```

根据这个定义，我想生成如下所示的代码（使用 T4）：

```
[OperationContract]
public Customer ExecuteGetCustomerByIdQuery(GetCustomerByIdQuery query)
{
    return (Customer)QueryService.ExecuteQuery(query);
} 
```

目前，我的 T4 模板中的代码看起来有点像这样：

```
CodeClass2 codeClass = GetCodeClass();

CodeInterface @interface = codeClass.ImplementedInterfaces
    .OfType<CodeInterface>()
    .FirstOrDefault();

// Here I want to do something like this, but this doesn't work:
// CodeClass2[] arguments = @interface.GetGenericTypeArguments(); 
```

但是如何获得 a 的泛型类型参数`CodeInterface`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T11:58:14.700

它不漂亮，但这对我有用：

```
CodeInterface @interface;

// FullName = "IQuery<[FullNameOfType]>
string firstArgument = @interface.FullName.Split('<', '>')[1]; 
```

# objective-c - 需要 0 或 1 个参数的可变参数宏？

> ID：12662508
> 
> 赞同：3
> 
> 时间：2012-09-30T15:38:28.183
> 
> 标签：objective-c, c, c-preprocessor

你将如何编写一个可以接受 1 个或 0 个参数的可变参数宏。即是这样的：

```
GREET()         // returns @"Hello World"
GREET(@"John")  // returns @"Hello John" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T15:57:31.177

这很简单，你有这样的东西：

```
#define __NARGS(unused, _1, _2, _3, _4, _5, VAL, ...) VAL
#define NARGS(...) __NARGS(unused, ## __VA_ARGS__, 5, 4, 3, 2, 1, 0)

#define __GREET(ARGC, ARGS...) GREET_ ## ARGC (ARGS)
#define _GREET(ARGC, ARGS...) __GREET(ARGC, ARGS)
#define GREET(...) _GREET(NARGS(__VA_ARGS__), __VA_ARGS__)

#define GREET_0(...) @"Hello World!"
#define GREET_1(ARG, ...) @"Hello, " ARG // strings are auto-concatenated in objc

int main()
{
    NSLog(@"%@", GREET());
    NSLog(@"%@", GREET(@"John"));
} 
```

**输出：**

```
2012-09-30 11:56:48.478 TestProj[51823:303] 你好世界！
2012-09-30 11:56:48.480 TestProj[51823:303] 你好，约翰

```

现在，这相当复杂，但假设您基本了解预处理器的工作原理，您应该能够很好地了解正在发生的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T17:17:23.240

我不知道这是否适用于目标 C，但对于 C99 和 C11，您可以使用具有元宏的[P99](http://p99.gforge.inria.fr)`P99_IF_EMPTY`

```
#define GREET(...) P99_IF_EMPTY(__VA_ARGS__)("Hello World")("Hello " __VA_ARGS__) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T15:53:42.387

一个很好的方法是构建一个带有重复元素的数据结构，例如：

```
union greet_arg {
  char *string;
};
struct greet_args {
  union greet_arg *arg[2];
};
void greet_function(struct greet_args *x); 
```

然后可以像这样实现您的宏：

```
#define GREET(x...)  greet_function(&(struct greet_args){0, x}) 
```

现在它起作用的原因是，如果你打电话，`GREET("foo")`那么你会得到：

```
greet_function(&(struct greet_args){0, "foo"}); 
```

而如果你打电话`GREET()`，你会得到：

```
greet_function(&(struct greet_args){0, }); 
```

仍然*有效*；“0”只是空填充数组的其余部分。

然后您`greet_function()`只需检查`x->arg[1]`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T15:46:28.210

宏要么具有可变参数，要么具有固定数量的参数。要获得所需的结果，请声明 2 个宏，一个带有 0 个参数，一个带有 1 个参数。

# python - Python PIL 在渲染文本时添加了额外的字符

> ID：12662509
> 
> 赞同：1
> 
> 时间：2012-09-30T15:38:29.160
> 
> 标签：python, django, python-imaging-library

当我使用 PIL 在图像上呈现文本时，当 ® 在文本中时，它会添加一个额外的字符。

示例输入：品牌名称®

示例输出：Brand NameA®

它似乎总是字母 A。

这是我的代码：

```
font = ImageFont.truetype(os.path.join(settings.SITE_ROOT, "fixtures/fonts/%s.otf" % font), int(font_size * 10), encoding="unic")
image = Image.new("RGBA", (width * 10, height * 10), convert_hex_color(background))
draw = ImageDraw.Draw(image)
draw.text((0, 0), text, convert_hex_color(foreground), font=font) 
```

在这一点上，我不知道为什么额外的字符在那里。我正在使用 PIL 1.1.7

“文本”被传递给方法。当打印到控制台时，它看起来像这样：

```
About the REALTOR® Content Resource 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:51:05.807

尝试`text`先转换为 unicode 对象。

什么时候`text`是 unicode：

```
import Image
import ImageFont
import ImageDraw

font = ImageFont.truetype('/usr/share/fonts/truetype/msttcorefonts/Arial.ttf', 20)
image = Image.new("RGBA", (300,20), color = (0, 0, 0, 255))
draw = ImageDraw.Draw(image)
text = u'About the REALTOR® Content Resource'
draw.text((0, 0), text, (255, 0, 0, 255), font=font)
image.save('/tmp/out.png') 
```

产量

![在此处输入图像描述](../Images/38cce4acaadf6c5ee2c0310593005818.png)

但当

```
text = 'About the REALTOR® Content Resource' 
```

代码产生

![在此处输入图像描述](../Images/cf8c07236d3608e1e45e4fa1ba38b381.png)

* * *

If `text`is a `str`, 将其转换为`unicode`do

```
text = text.decode(encoding) 
```

where`encoding`必须替换[为字符串的实际编码](http://docs.python.org/library/codecs.html?highlight=codecs#standard-encodings)。要使用的正确编码取决于`text`定义或生成的方式。

# php - Google Open ID 中缺少信息

> ID：12662515
> 
> 赞同：0
> 
> 时间：2012-09-30T15:39:08.813
> 
> 标签：php, openid

我在我的网站上使用 php lightopenID 来验证 Google 用户。我需要电子邮件地址、名字和姓氏。它在 99% 的情况下都有效，但有几次我没有获得所需的信息，有时名字和/或姓氏是空的。

我认为我得到空的名字和空的姓氏的原因是因为用户忘记将这些详细信息放在他的谷歌帐户中，但我认为谷歌为什么会允许这样的事情发生。我的假设正确吗？

当 Google 不返回名字/姓氏时，我可以从服务器端做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:42:59.963

> 当 Google 不返回名字/姓氏时，我可以从服务器端做些什么吗？

提示他们在此处输入名称，或在 stackoverflow 上将它们分配为 User123456。

您应该将您的应用程序设计为即使对于不想分享的人也能工作，@MathieuImbert 是正确的，您不应该强迫用户提供个人信息。创建一个引人入胜的网站/界面并鼓励您的用户完成个人资料。

# android - 将 GPS 距离映射到 jpg 图像

> ID：12662518
> 
> 赞同：0
> 
> 时间：2012-09-30T15:39:18.747
> 
> 标签：android, bitmap, gps, dpi

我正在尝试开发一个 Android 应用程序来在用户插入的地图的 jpg 图像上显示用户位置。使用两个位置的 gps 坐标，我计算两个位置之间的距离。我需要在两个位置之间的地图 jpg 图像上设置该距离。我尝试获取图像的 DPI（我假设它与设备的显示 DPI 值相同）并计算 jpg 图像的像素距离。但输出似乎是错误的。输出的像素距离每次都在变化。我认为发生这种情况是因为方位角和 DPI 错误。你们有任何想法如何实现这一目标。如果您有任何示例代码，请让我参考

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:15:00.823

我相信您正在提出与本主题相同的问题。

在那里查看我的答案：[在离线静态图像（jpeg）上显示用户的当前位置 - Android](https://stackoverflow.com/questions/12655639/show-current-location-of-user-on-an-offline-static-image-jpeg-android/12656874#12656874)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:08:05.403

看起来您正在尝试做这两个其他 Android 应用程序已经在做的事情：

Martin Ohlin 的[MapCalibrator](https://play.google.com/store/apps/details?id=com.Martin.MapCalibrator&feature=search_result)

Marko Teittinen 的[自定义地图](https://play.google.com/store/apps/details?id=com.custommapsapp.android&feature=nav_result#?t=W251bGwsMSwyLDNd)

无论如何，如您所见，您不能简单地依赖 DPI。寻找一个真正的图形/图像库，它支持您需要的那种操作（两点之间的距离等）。

# android - 更新试用版数据库而不删除旧数据库

> ID：12662519
> 
> 赞同：-1
> 
> 时间：2012-09-30T15:39:20.837
> 
> 标签：android

我正在实现一个 android 应用程序，但我不知道如何解决这个问题

我正在尝试使用现有的 SQLite 数据库部署应用程序。

当用户第一次安装应用程序时，数据库将下载但作为试用版，只有很少的记录，当用户选择购买其中一个时，除了试用版还有10个功能，数据库应该使用来自服务器的新记录进行更新，新记录有试用版数据库的相同架构，所以我想将购买的记录插入旧数据库而不删除旧版本并安装具有购买功能的新记录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:03:00.553

似乎最直接的方法是使用包含 SQL 命令的单独文本文件来为每个不同的升级插入数据。

然后您的应用程序可以下载该文件，读取文本文件并执行其中包含的 SQL 命令，添加必要的数据。

您可以在文件中包含原始 SQL 并使用该`rawQuery()`方法（IMO 有点危险），或者您可以创建一个数据结构以供您的应用程序读取，该数据结构获取数据并将其放入可以参数化的方法中，例如`.insert()`.

# exception - xslt 转换期间的“属性名称使用了非法值”

> ID：12662524
> 
> 赞同：0
> 
> 时间：2012-09-30T15:40:07.243
> 
> 标签：exception, xslt, transformation

我正在尝试使用 XSLT 将 XML 转换为另一个 XML。由于我使用的 XSLT 和 XML 要大得多，我无法提供数据。转换时，我可以看到“用于属性名称的非法值”。在结果 XML 中，我可以看到一些标签出现了两次。下例：

```
<xslt:variable name="index" select="@Index">
<xslt:element name="EquipmentID-{$index}">
Hello
</xslt:element> 
```

结果，我得到的结果是，

```
<EquipmentID-EquipmentID-1>
Hello
</EquipmentID-Equipment-ID-1> 
```

无论我在哪里使用 $index，我都会得到一些尴尬的值。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T20:49:10.757

如果没有看到更多的代码和源数据，就不可能帮助您。您的代码是完全合理的，并且完全能够在给定合适的输入（特别是属性 @Index 的值）的情况下产生您所显示的输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-08T19:00:26.053

我知道这是一个非常古老的问题，但这就是我的情况。

我莫名其妙地看到了同样的错误（即，属性名称没有任何问题，并且错误发生在随机位置），事实证明这是由于使用 Xalan 版本 2.7.0 在不同线程中同时执行 XSL 转换，这显然有一些错误，在它应该是完全线程安全的时候。

我正在使用一个通用`Templates`但每个线程`Source`的 s、`Result`s 和`Transformer`s。这应该是线程安全的。

不知道究竟是什么错误，但无论如何升级到 Xalan 2.7.2 解决了这个问题。

# ajax - How to send data to client browsers when a server side change occurs

> ID：12662527
> 
> 赞同：0
> 
> 时间：2012-09-30T15:40:16.000
> 
> 标签：ajax, codeigniter, server-side, crm

I have an intranet based CRM application developed in CodeIgniter 2.1 where the application is running on a local Apache server and around 20 clients are accessing it over LAN. This is to be connected to a call center setup where the call center application (running on a separate server) will do a HTTP post with caller's number as well as terminal number of the agent where the call is arriving to a URL of my Codeigniter application. I am using this data to populate a database table of call records.

Now from the terminal number (each terminal has static IP, and a session in Codeigniter is linked to IP as well) I can find out which user (login session) of my application is about to receive the call. **I want to find a way out how I can send data from server side** (it will be regarding the call like the number who is calling, past call records etc.) **to that specific user's browser** via AJAX or something similar? The agent's browser needs to display this information sent from server. Periodic polling from browser by jquery etc. is not possible as the data needs to be updated almost instantaneously and rapid polling up to this extent will lead to high CPU usage at client end as well as extra load on network.

P.S.: I only want to know how to modify the browser data from server end.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:22:49.793

在 AJAX 中，异步请求/响应不涉及轮询；只有一个开放的 TCP 连接和非阻塞 I/O。客户端发出请求但立即返回；当服务器发送响应时，会通知客户端。因此，您可以使用 AJAX 的 XMLHttpRequest 实现您想要的，而无需轮询[1]。您所需要的只是一个用于提供通知的 URL。你可以有一个请求线程和一个通用的调度方法，或者每个都有不同的 url 和不同的线程，这取决于你需要如何扩展。

[1] 好吧，老实说，投票*很少。*您确实需要确定会话/全局超时是什么，并在该时间限制内重新发出请求。

# mysql - How to filter a mysql database with user input on a website and then spit the filtered table back to the website?

> ID：12662534
> 
> 赞同：1
> 
> 时间：2012-09-30T11:22:06.590
> 
> 标签：mysql, database, web-applications, web-hosting

I've been researching this on google for literally 3 weeks, racking my brain and still not quite finding anything. I can't believe this is so elusive. (I'm a complete beginner so if my terminology sounds stupid then that's why.)

I have a database in mysql/phpmyadmin on my web host. I'm trying to create a front end that will allow a user to specify criteria for querying the database in a way that they don't have to know sql, basically just combo boxes and checkboxes on a form. Then have this form 'submit' a query to the database, and show the filtered tables.

This is how the SQL looks in Microsoft Access:

```
PARAMETERS TEXTINPUT1 Text ( 255 ), NUMBERINPUT1 IEEEDouble;
// pops up a list of parameters for the user to input

SELECT DISTINCT Table1.Column1, Table1.Column2, Table1.Column3,*
// selects only the unique rows in these three columns

FROM Table1
// the table where this query is happening

WHERE (((Table1.Column1) Like TEXTINPUT1] AND ((Table1.Column2)<=[NUMBERINPUT1] AND ((Table1.Column3)>=[NUMBERINPUT1]));
// the criteria for the filter, it's comparing the user input parameters to the data in the rows and only selecting matches according to the equal sign, or greater than + equal sign, or less than + equal sign 
```

What I don't get: WHAT IN THE WORLD AM I SUPPOSED TO USE (that isn't totally hard)!?

I've tried google fusion tables - doesn't filter right with numerical data or empty cells in rows, can't relate tables

I've tried DataTables.net, can't filter right with numerical data and can't use SQL without a bunch of indepth knowledge, not even sure it can if you have that..

I've looked into using jQuery with google spreadsheets, doesn't work at all either

I have no idea how I'm supposed to build a front end with my database. Every place that looks promising (like zohocreator) is asking for money, and is far too simplified to be able to do the LIKE criteria or SELECT DISTINCT stuff.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T11:57:28.570

I assume you have php & MySQL on server and will be using HTML and ajax as front end . A simplified scenario for your example is.

HTML has 3 inputs and sends an ajax request to a php file.

php has

```
// Get parameters from URL
$input1 = $_GET["input1"];
$input2 = $_GET["input2"];
$input3 = $_GET["input3"];
//connect to database

 $query = sprintf("SELECT *  FROM tablename WHERE column = %s  AND column2 <= %s AND column3 = >%s",$input1,$input2,input3); 
```

This query is then executed.

A more complex query can be generated by building it in blocks.

If this is what you are looking for I can elaborate on the whole technique

# javascript - 图像背景 onclick

> ID：12662536
> 
> 赞同：1
> 
> 时间：2012-09-30T15:41:42.107
> 
> 标签：javascript, html, css

我正在尝试创建一个函数，在该函数中单击按钮并为 div 选择背景图像。这是我在下面开始的内容，但它似乎不起作用任何人都可以指出我哪里出错了...... :)

```
<style type="text/css">
#txt{
    width: auto;
    height: auto;
    border: solid #000;
    }
</style>

<script type="text/javascript">

    function backg1(){
        var test = new string ();
        test = document.getElementById('txt');
        test.style.backgroundImage="url('cloud.jpg')";
    }

</script>
</head>

<body>
<div id="txt">
<input type="button" value="BG1" onclick="backg1()"/>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:11:53.923

由于您`<div>`最初只包含按钮输入，因此它在该按钮的边界之外没有任何大小。您需要设置明确的宽度和高度（连同`position: relative`）才能看到背景。

我建议将它们设置为与您的图像相同的尺寸。

```
/* in the CSS */
#txt{
    /* use the width, height of your image */
    width: 400px;
    height: 250px;
    position: relative;
    border: solid #000;
} 
```

或者，如果您需要动态设置它们：

```
function backg1() {
    test = document.getElementById('txt');
    test.style.backgroundImage="url('cloud.jpg')";

    // <div>  needs a width & height for the background image to be visible outside the 
    // bounds of the one element contained in the div.
    test.style.width = "400px";
    test.style.height = "250px";
    test.style.position = "relative";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:14:01.660

此行存在 javascript 错误。var test = 新字符串 ();

你可以让它像 var test = new String(); 然后它应该工作。

此外，我观察到您正在创建字符串对象，然后您正在使用 DOM 对象覆盖。不知道为什么会这样。您可以只创建一个变量，如 var test;

# c++ - 是否可以从 clang 的解析树中提取预处理器信息？

> ID：12662540
> 
> 赞同：6
> 
> 时间：2012-09-30T15:42:02.963
> 
> 标签：c++, parsing, serialization, clang, c-preprocessor

考虑以下简单的头文件 demo.h：

```
#define PERSIST
struct Serialised
{
    int someTransientValue ;
    PERSIST int aNumberToPersist ;
}; 
```

我使用以下代码和 Clang 的 python API 来迭代标头：

```
import sys, clang.cindex
def callexpr_visitor(node, parent, userdata):
    if node.location.file: print node.location.file, node.displayname, node.kind
    return 2
tu = clang.cindex.Index.create().parse(sys.argv[1], args=['-x', 'c++'])
clang.cindex.Cursor_visit(tu.cursor, clang.cindex.Cursor_visit_callback(callexpr_visitor), None) 
```

这会打印出 Clang 的 AST 的元素，产生以下输出：

> demo.h 序列化 CursorKind.STRUCT_DECL
> demo.h someTransientValue CursorKind.FIELD_DECL
> demo.h aNumberToPersist CursorKind.FIELD_DECL

有谁知道我如何提取与名为“aNumberToPersist”的成员变量关联的预处理器声明？是否有更好的方法以在解析树中清晰显示的方式“标记”变量？

Xubuntu 12.04，clang 版本 3.1（tags/RELEASE_31/final），目标：x86_64-unknown-linux-gnu 线程模型：posix。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T16:09:37.013

我可能会说：不是这样。

AST 本身没有表示宏。类型、属性等...所有具有*语义*值的元素都被表示（和注释），并且您可以选择查询其中一些是否从宏扩展并取回原来的宏拼写；但是，宏本身根本不会出现在 AST 中。

如果可以的话，使用新**属性***扩展*Clang 可能会更有趣，尤其是在 C++11:中。C++11 要求编译器忽略他们不知道的属性，所以通过“命名空间”你自己的属性，你几乎可以保证只有你会关心它们的含义。**`[[gearoid::persist]]`**

 **不幸的是，我不知道您是否需要向 Clang 教授您的属性以便它们在 AST 中表示（[Michael Han](http://lists.cs.uiuc.edu/pipermail/cfe-dev/2012-October/024637.html)一直在努力记住它们）。无论如何，您可能会在[Clang DEV](http://lists.cs.uiuc.edu/mailman/listinfo/cfe-dev)邮件列表中获得更多有用的答案（不幸的是，没有 Clang 用户邮件列表）。

**编辑**：今天刚刚[降落](http://llvm.org/viewvc/llvm-project?view=rev&revision=165082)！Clang 现在将在其 AST 中保留所有属性（即使是它不理解的属性）。**

# c# - 如何以编程方式为 ComboBox 创建 ItemTemplate？

> ID：12662541
> 
> 赞同：3
> 
> 时间：2012-09-30T15:42:04.320
> 
> 标签：c#, wpf, xaml

我想以编程方式创建一个`ItemTemplate`（`ComboBox`如主题所述）。

目前我`ItemTemplate`在 XAML 中有一个：

```
<Style x:Key="ComboBox_EntityCreation_GroupSelect_Style" TargetType="{x:Type ComboBox}">
    <Setter Property="ItemTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBlock>
                        <TextBlock.Text>
                            <MultiBinding StringFormat="{}{0}    {1} Mitglied(er)">
                                <Binding Path="Name"/>
                                <Binding Path="MemberCount"/>
                            </MultiBinding>
                        </TextBlock.Text>
                </TextBlock>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

由于我对 XAML 的仇恨，我想在没有 XAML 的情况下得到结果。

是否有可能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:09:46.493

我刚刚转换了这个。请检查它是否有效。

```
Style style = new Style(typeof(ComboBox));
var d = new DataTemplate();

MultiBinding mb = new MultiBinding();
mb.StringFormat = "{0} {1} Mitglied(er)";
mb.Bindings.Add(new Binding("Name"));
mb.Bindings.Add(new Binding("MemberCount"));

FrameworkElementFactory textElement = new FrameworkElementFactory(typeof(TextBlock));
textElement.SetBinding(TextBlock.TextProperty, mb);
d.VisualTree = textElement;

style.Setters.Add(new Setter(ComboBox.ItemTemplateProperty, d));
this.Resources.Add("ComboBox_EntityCreation_GroupSelect_Style", style); 
```

您可以使用 FrameworkElementFactory 将 DataTemplate 分配给其 VisualTree。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:01:46.760

通过代码生成模板是通过工厂（即 FrameworkElementFactory）完成的。您可以通过 FrameworkElement 类型生成工厂并通过工厂上的方法设置绑定等。

msdn上给出了类似的问题和一个简单的例子：http: [//social.msdn.microsoft.com/Forums/en-US/wpf/thread/f230804d-fc0f-4321-a61e-69a2c890b28d/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/f230804d-fc0f-4321-a61e-69a2c890b28d/)

# objective-c - How to get Push Segues, Containment controllers, and storyboards to work together

> ID：12662545
> 
> 赞同：1
> 
> 时间：2012-09-30T15:42:42.027
> 
> 标签：objective-c, ios

I'm building an app with the following page flows (it's a big complex so I will try to be as clear as possible):

Login -> MainViewController

Now, MainViewController uses controller containment in iOS 5 to host two views/controllers:

```
 MainViewController
     /               \
FirstController    SecondController --> DetailsController 
```

From SecondController, I want to segue to a separate View Controller (you can think of it as "details" if you think of MainViewController as "master").

From SecondController, I can segue using "modal" segue to DetailsController. But when I "pop" back, iOS reloads MainViewController. I don't want it to do that.

If I use "push" segue, I get a runtime error saying there are no UINavigationControllers on the stack. Fine.

So what I tried next was I tried to make MainViewController the root controller of a new UINavigationController:

```
 Login --> UINavigationController --> DetailsController (but "initiated" by Second)
                   |
            MainViewController
              /               \
      FirstController    SecondController 
```

And then from SecondController, I tell UINavigationController to perform the "push" segue. But I still get the same runtime error - no UINavigationController found.

I must not understand how the navigation stack works - it's probably not checking the caller, because I'm sure I'm calling performSegueWithIdentifier: from the UINavigationController.

I was using the "Your second iOS app" as a guide, and they prescribe this method (modal segue). But I really do not want to re-load the MainViewController if at all possible (it's doing some expensive things). I would prefer iOS to "cache" my view/controller/data. I could of course write code to cache my data when I load the details page, and reload the cache instead of re-computing the data when I pop back, but I was hoping the "push" segue would do this for me automatically.

If you guys have any ideas, I would be grateful. Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:14:36.743

为了使推送工作，您需要在 IB 中选择将进行调用的视图并将其嵌入到编辑器菜单中的导航控制器中。

编辑器 > 嵌入 > 导航控制器

# php - what is the error in MySql query?

> ID：12662548
> 
> 赞同：0
> 
> 时间：2012-09-30T15:43:07.903
> 
> 标签：php, mysql, sql, database

Whenever I visit the page I get: *You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1*

It has to do with the second while loop

```
<html>
<body>
<?php
mysql_connect("mysql.1freehosting.com", "u533288591_sdc", "mypass") or die(mysql_error());
mysql_select_db("u533288591_sdc");
$name = $_POST['name'];
$probably_needed = "questions";
$grade = $_POST['class'] ;
$answers ="answers" ;
$query = mysql_query("SELECT * FROM $probably_needed ") or die(mysql_error()); 
$otherquery = mysql_query("select * from $ANSWERS ") or die (mysql_error()) ;

while($row = mysql_fetch_array($query)){
echo "<a href=\"answer.php?name=" . $name .  "&subject=" . $row['Subject'] .  "&grade=" . $grade . "\">" . $row['Subject'] ."</a>" ;
    while($answerrow = mysql_fetch_array($otherquery)){
        if ($answerrow['name'] == $name){
            if ($answerrow['subject'] == $row['Subject']){
                echo "success" ;
                }
          }
      }

}
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:46:39.527

A. In php `$answers` is not `$ANSWERS`

[Form PHP Doc](http://www.php.net/manual/en/language.variables.basics.php)

> Variables in PHP are represented by a dollar sign followed by the name of the variable. The variable name is case-sensitive.

Try

```
$answers ="answers" ;
mysqli_query($link,sprintf("Select * from %s",$answers)); 
```

B. From PHP Doc on `mysql_query`

> Suggested alternative Use of this extension is discouraged. Instead, the MySQLi or PDO_MySQL extension should be used. See also MySQL: choosing an API guide and related FAQ for more information. Alternatives to this function include:

You should upgrade to `mysqli` or `PDO`

C. Due to XSS Injection flaw in your code you should use `filter_var`

What i think your code should look like

```
$mysqli = new mysqli("mysql.1freehosting.com", "u533288591_sdc", "mypass", "u533288591_sdc");

$name = filter_var($_POST['name'], FILTER_SANITIZE_STRING);
$grade = filter_var($_POST['class'],FILTER_SANITIZE_STRING);

$tableQuestion = "questions"; // not sure where this would come from
$tableAnswer = "answers";

$resultQuestion = $mysqli->query(sprintf("SELECT * FROM  `%s`", $tableQuestion));
$resultAnswer = $mysqli->query(sprintf("SELECT * FROM  `%s`", $tableAnswer));

$template = "<a href=\"answer.php?name=%s&subject=%s&grade=%s\">%s</a>";

while ( $rowQuestion = $resultQuestion->fetch_assoc() ) {
    printf($resultAnswer, $name, $rowQuestion['Subject'], $grade, $rowQuestion['Subject']);
    while ( $rowAnswer = $resultAnswer->fetch_assoc() ) {
        if ($rowAnswer['name'] == $name && $rowAnswer['subject'] == $rowQuestion['Subject']) {
            echo "success";
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:47:12.850

Variable names in PHP are [case sensitive](http://php.net/manual/en/language.variables.basics.php).

You define: `$answers ="answers"` ;

but use `"select * from $ANSWERS "`

$answers is not $ANSWERS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:44:55.267

wrap your variables with backtick. `lowercase` your variable `$ANSWERS`

```
SELECT * FROM `$probably_needed` 
select * from `$answers` 
```

PHP is case sensitive.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T15:47:46.320

May be I mistake, but you should do so:

```
$queryText1 = "SELECT * FROM " + $probably_needed;
$queryText1 = "SELECT * FROM " + $ANSWERS;
$query = mysql_query($queryText1) or die(mysql_error()); 
$otherquery = mysql_query($queryText1) or die (mysql_error()) ; 
```

Other words, you should concatenate string and variable.

# php - 在 jquery 对话框中提交表单

> ID：12662552
> 
> 赞同：1
> 
> 时间：2012-09-30T15:43:25.570
> 
> 标签：php, jquery, ajax, user-interface, dialog

我知道以前有人问过这个问题，但似乎没有一个解决方案对我有用。

我在 jquery ui 对话框中有一个表单：

```
<!-- Dialog: Register new user-->
<div id="dialogForUser" title="Register new user">
    <form id="target" action="" method="post" style="HEIGHT: 100%">
  <div class="form_settings">
    <h3>Enter user details:</h3>

    <p><span>name</span>
      <input width=150px id ="edName" name="edName" value="<?php echo htmlentities($name); ?>" />
    </p>
    <p><span>surname</span>
      <input width=150px id ="edSurname" name="edSurname" value="<?php echo htmlentities($surname); ?>" />
    </p>
    <p><span>username</span>
      <input width=150px id ="edUsername" name="edUsername" value="<?php echo htmlentities($username); ?>" />
    </p>
    <p><span>password</span>
      <input width=150px id ="edPassword" name="edPassword" value="<?php echo htmlentities($password); ?>" />
    </p>
    <p><span>confirm password</span>
      <input width=150px name="edConfirmPassword" />
    </p>
    <p><span>security question 1</span>
      <input width=150px name="edSecurityQuestion1" />
    </p>
    <p><span>answer</span>
      <input width=150px name="edSecurityAnswer1" />
    </p>
    <p><span>security question 2</span>
      <input width=150px name="edSecurityQuestion21" />
    </p>
    <p><span>answer</span>
      <input width=150px name="edSecurityAnswer2" />
    </p>
    <p><span>security question 3</span>
      <input width=150px name="edSecurityQuestion3" />
    </p>
    <p><span>answer</span>
      <input width=150px name="edSecurityAnswer3" />
    </p>
    <p><span>company name</span>
      <input width=150px name="edCompanyName" value="<?php echo htmlentities($companyName); ?>" />
    </p>
    <p><span>address line 1</span>
      <input width=150px name="edAddress1" value="<?php echo htmlentities($address1); ?>" />
    </p>
    <p><span>address line 2</span>
      <input width=150px name="edAddress2" value="<?php echo htmlentities($address2); ?>" />
    </p>
    <p><span>address line 3</span>
      <input width=150px name="edAddress3" value="<?php echo htmlentities($address3); ?>" />
    </p>
    <p><span>city</span>
      <input width=150px name="edCity" value="<?php echo htmlentities($city); ?>" />
    </p>
    <p><span>county</span>
      <input width=150px name="edArea" value="<?php echo htmlentities($area); ?>" />
    </p>
    <p><span>post code</span>
      <input width=150px name="edPostalCode" value="<?php echo htmlentities($postalCode); ?>" />
    </p>
    <p><span>country</span>
      <input width=150px name="edCountry" value="<?php echo htmlentities($country); ?>" />
    </p>
    <p><span>telephone</span>
      <input width=150px name="edTelephone" value="<?php echo htmlentities($telephone); ?>" />
    </p>
    <p><span>fax</span>
      <input width=150px name="edFax" value="<?php echo htmlentities($fax); ?>" />
    </p>
    <p><span>e-mail</span>
      <input width=150px name="edEmail" value="<?php echo htmlentities($email); ?>" />
    </p>
    <p><span>website</span>
      <input width=150px name="edWebsite" value="<?php echo htmlentities($website); ?>" />
    </p>
  </div>
</form> 
```

一个简单的表格，几乎没有编辑。然后我有一些 jquery 代码在用户按下“注册按钮”时调用一个 php 文件（Users_cntr.php）进行处理：

```
$( "#dialogForUser" ).dialog({
            autoOpen: false,
            show: "blind",
            hide: "explode",
            buttons:[
                                {text: "Register", click: function() { 
                                    $.ajax({url:Users_cntr.php ,success:function(result){$("button").html(result);}});
                                                                                                            }
                                },
                                {text: "Cancel", click: function() { $(this).dialog("close"); }},
                            ]
    });

    $( "#openerForUser" ).click(function() {
        var dialogWidth = $(this).attr('dialogWidth');
        var dialogHeight = $(this).attr('dialogHeight');

        $( "#dialogForUser" ).dialog( "option", "width", dialogWidth );
        $( "#dialogForUser" ).dialog( "option", "height", dialogHeight );
        $( "#dialogForUser" ).dialog( "open" );
        return false;
    }); 
```

如您所见，使用 ajax 调用调用了 php 文件（我不得不承认我不明白它是如何工作的！）。

php 所做的只是创建一个新用户并将其插入数据库。我的问题是我不知道如何将 ui 对话框的值传递给 php 文件。我假设我需要做一些发布，我尝试使用过去建议的一些代码，但没有结果。

你有没有尝试在你的项目中做类似的事情？你能帮我吗？

非常感谢你，

迪诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:51:26.520

您需要在按钮处理程序中发送要提交的数据：

```
$.post('Users_cntr.php', $('#target').serialize(), function(result){
    $("button").html(result);
}); 
```

这只是调用服务器上的 php 文件，但第二个“可选”参数是要发送的数据。在这种情况下，我们使用了您的表单`id` `target`并告诉 jQuery 它需要被[序列化](http://api.jquery.com/serialize/)

我将您的`$.ajax`方法更改`$.post`为，因为它是同一事物的快捷方式并包装了`data-type`and`type`属性。你可以在这里阅读更多： [jQuery Post](http://api.jquery.com/jQuery.post/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:51:54.447

如果你想传递数据，`ajax`那么你可以使用[serialize()](http://api.jquery.com/serialize/)，即

```
$.ajax({
    url:'Users_cntr.php',
    type:'post',  
    data: $("#target").serialize(),
    success:function(result){
        $("button").html(result);
    }
}); 
```

`php`然后从`$_POST`as中检索您的数据

```
$edName=$_POST['edName'];
$edSurname=$_POST['edSurname']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:35:50.307

对不起，伙计们，我正在为我自己的问题添加一些注释。

首先感谢大家的帮助，非常感谢。

我的代码有另一个错误：它只提交一次。这是因为您需要更改以下内容；

```
$(this).dialog("close"); 
```

有了这个：

```
$(this).dialog("destroy").remove(); 
```

迪诺

# mysql - Query to fetch multiple fields in same column in mysql

> ID：12662553
> 
> 赞同：0
> 
> 时间：2012-09-30T15:43:28.410
> 
> 标签：mysql

I am using mysql db.

```
 id | comment       
--------+--------------- 
   1121 |    Accounting
   1121 |    Shipping  
   1121 |    Receiving
   1121 |    Testing
   1122 |    Accounting
   1122 |    Receiving 
```

I want to write such a query so that o/p will be like this-:

```
 id | comment       
--------+--------------- 
   1121 |    Accounting
   1121 |    Shipping  
   1121 |    Receiving
   1121 |    Testing 
```

So I want Accounting, Shiping, Receiving and testing comments.

Can anybody plz guide me??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T10:48:34.920

*   如果您只想要`id`包含所有四个评论的记录，您可以`id`对包含必要数量记录的那些组进行分组和过滤：

    ```
    SELECT   id
    FROM     my_table
    WHERE    comment IN ('Accounting', 'Shipping', 'Receiving', 'Testing')
    GROUP BY id
    HAVING   COUNT(*) = 4 
    ```

    在[sqlfiddle](http://sqlfiddle.com/#!2/99a27/1/0)上查看。

*   如果您想要此类对的完整记录`(id, comment)`，您可以将结果与原始表连接：

    ```
    SELECT * FROM my_table NATURAL JOIN (
      SELECT   id
      FROM     my_table
      WHERE    comment IN ('Accounting', 'Shipping', 'Receiving', 'Testing')
      GROUP BY id
      HAVING   COUNT(*) = 4
    ) t
    WHERE comment IN ('Accounting', 'Shipping', 'Receiving', 'Testing') 
    ```

    在[sqlfiddle](http://sqlfiddle.com/#!2/99a27/2/0)上查看。

请注意，如果您的数据模型不保证`(id, comment)`对的唯一性，则需要在上述查询中替换`COUNT(*)`为（性能较低的） 。`COUNT(DISTINCT comment)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:22:38.407

是否要选择所有包含 4 条评论的 ID？在您的示例中，1121 有 4 个不同的评论（就像“状态”，对吗？），而 1122 只有 2 个状态（评论）。

```
select T1.id from mytable T1, mytable T2, mytable T3, mytable T3 where T2.id=T1.id and T3.id=T1.id and T4.id=T1.id and T1.comment='Accounting' and T2.comment='Shipping' and T3.comment='Receiving' and T4.id='Shipping' 
```

# ruby - 请解释这个 ruby Fiber 示例背后的逻辑

> ID：12662556
> 
> 赞同：4
> 
> 时间：2012-09-30T15:43:46.600
> 
> 标签：ruby, eventmachine, fiber

示例代码来自[这里](http://www.igvita.com/2010/03/22/untangling-evented-code-with-ruby-fibers/)：

```
def http_get(url)
  f = Fiber.current
  http = EventMachine::HttpRequest.new(url).get

  # resume fiber once http call is done
  http.callback { f.resume(http) }
  http.errback  { f.resume(http) }

  return Fiber.yield
end

EventMachine.run do
  Fiber.new{
    page = http_get('http://www.google.com/')
    puts "Fetched page: #{page.response_header.status}"

    if page
      page = http_get('http://www.google.com/search?q=eventmachine')
      puts "Fetched page 2: #{page.response_header.status}"
    end
  }.resume
end 
```

因此，在 EM 运行块的上下文中，作者创建了一个纤程并立即使用`resume`. 但是，我不明白为什么`http_get`逻辑是这样构造的。我的意思是，它使用当前的纤程（在这种情况下应该是在 EM 运行块中创建的纤程），它启动一个可能失败或成功的 http 请求，然后恢复当前的纤程。之后它只调用`yield`光纤。自从他打电话给yield之后，究竟会发生什么？有人可以解释一下为什么这样`http_get`写吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:35:32.757

1.  Fiber 在 EventMachine 中创建和触发
2.  目标是（a）获取页面并（b）处理它
3.  Fiber应该暂停直到页面被抓取，这是的作用`http_get`
4.  `http = EventMachine::HttpRequest.new(url).get`不会触发任何东西：EventMachine 需要重新控制，这就是`Fiber.yield`
5.  一旦 EventMachine 完成获取页面的工作，它就会触发回调并恢复停止的 Fiber`puts ...`

更清晰？

# path - Raphaeljs 间隔后动画路径

> ID：12662557
> 
> 赞同：1
> 
> 时间：2012-09-30T15:43:46.927
> 
> 标签：path, jquery-animate, raphael, intervals

我有一条我想每 5 秒制作一次动画的路径。我在下面的代码中尝试了使用 setInterval，但它一直在复制画布。有更简单的解决方案吗？

JS小提琴[链接](http://jsfiddle.net/DRQDP/1/)

```
window.onload= function aa () {

    paper = Raphael(0,0,900,900);    

    var p=paper.path("M10,10 h20 v10 h-20z");
    p.animate({path:"M10,10 h300 v10 h-300z"},5000);

    //window.setInterval(aa(), 5000);
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:59:17.327

您正在重复初始化拉斐尔论文 ( )的整个`aa`函数。`paper = Raphael(0,0,900,900);`这就是你的画布被复制的原因。
此外，最好使用回调（您可以查看[文档](http://raphaeljs.com/reference.html#Element.animate)）而`animate`不是`setInterval`触发您的动画。
这就是我的编码方式：

```
function init(){
    var paper = Raphael(0, 0, 900, 900),
        pathsString = ["M10,10 h20 v10 h-20z","M10,10 h300 v10 h-300z"],
        p = paper.path(pathsString[0]),
        animationCounter = 0, 
        animationDuration = 5000,
        animate = function(){
            animationCounter++;
            p.animate({path : pathsString[animationCounter %2]}, animationDuration, animate);
        };

    animate();
};
window.onload = init;​ 
```

这是上述代码的[一个工作示例。](http://jsfiddle.net/DRQDP/3/)

# java - 错误：找不到主类

> ID：12662559
> 
> 赞同：3
> 
> 时间：2012-09-30T15:43:57.097
> 
> 标签：java, compilation, main-method

编译程序时出现错误

**找不到主类：解决方案。程序将会退出。**

该程序是：

```
import java.util.*;

public class Solution{
   public static long[] factors(long a){
     long[] b;
     b=new long[50];
     int count=0;
     for(long i=1L;i<=a/2;i++)
       if(a%i==0) b[count++]=i;
     return b;
   }

   public static void main(String[] args) {

        Scanner in=new Scanner(System.in);

        int N=in.nextInt();
        long K=in.nextInt();
        long[] fact=factors(K);
        l1:
        for(int i=0;i<N;i++)
        {
            long num=in.nextInt();
            for(int j=0;j<fact.length;j++)
                if(num%fact[j]==0 && fact[j]!=1) {fact[j]=1;continue l1;}

        }
        int result=0;
        for(int i=0;i<fact.length;i++)
            if(fact[i]!=1) ++result;
        System.out.println(result);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:48:35.657

这不会编译，因为该`main`方法不属于某个类。把`main`方法放到类里面来解决问题。你的代码抛出算术异常`divide by zero`应该这样修复。

```
for(int j=0;j<fact.length;j++)
  if (fact[j] != 0)
    if(num%fact[j]==0 && fact[j]!=1) {
      fact[j]=1;continue l1;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:51:54.683

您的代码是正确的 - 它在 ideone 上编译并运行良好（[链接](http://ideone.com/Aijmd)）。

您看到的问题与您编译和运行应用程序的方式有关。在命令行提示符下，执行以下操作：

```
javac Solution.java 
```

这将产生`Solution.class`文件。运行如下：

```
java Solution 
```

此时，正在运行的程序将读取输入并在控制台上生成输出。如果预期的输入不可用，它会抛出异常，因为你在`nextInt`没有检查的情况下调用`hasInt`，但如果你给它预期的输入，它会产生一个结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:51:00.000

> 编译程序时出现错误
> 
> **找不到主类：解决方案。程序将会退出。**

*编译*不需要任何主类：您可以独立编译辅助类。所以问题显然是你试图*运行*一个你还没有编译的类。例如，如果您正在使用命令行工具，那么您很可能在您打算运行`java`时正在运行`javac`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T15:51:32.593

Java 编程模型中***没有***独立的函数；每个过程/函数都*必须*是某个类的方法，包括`static void main`方法。

# powershell-remoting - Powershell 工作流程中缺少 System.EnterpriseServies.Wrapper.dll

> ID：12662561
> 
> 赞同：0
> 
> 时间：2012-09-30T15:44:30.660
> 
> 标签：powershell-remoting, powershell-3.0

我将 Server 2008 R2 作为工作站运行（主要是为了获得 Hyper-V IIS 7.5）。我一直在玩这个系统一段时间，它几乎不是纯粹的！;-)

今天，我加载了最新的一组补丁，并借重启的机会添加了 PowerShell v3 的 rtm 版本。我适时删除了 PowerShell V3 测试版，应用了每月的补丁，重新启动，然后添加了新版本的 PowerShell 并再次重新启动。

但是，我现在有一个问题：每当我尝试运行工作流时，我都会得到：

**PSH [C:\foo]: Provision-AD # 运行工作流无法启动工作流“Provision-AD”：无法加载文件或程序集“System.EnterpriseServices.Wrapper.dll”或其依赖项之一。试图加载格式不正确的程序。在 line:321 char:21 + throw (New-Object System.Management.Automation.ErrorRecord $ ... + ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ~~~~~ + CategoryInfo : InvalidArgument: (System.Manageme...etersDictionary:PSBoundParametersDictionary) [], RuntimeException + FullyQualifiedErrorId : StartWorkflow.InvalidArgument**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:13:50.937

解决方案很简单。我重新安装了 .NET Framework 4.0，现在一切正常！

# shell - 如何使用变量更改 shell 脚本中的目录

> ID：12662565
> 
> 赞同：0
> 
> 时间：2012-09-30T15:44:58.317
> 
> 标签：shell, active-directory, directory

这个脚本文件名为“1sr”，我可以在终端“.1sr”中工作

我想更改目录“home/byram/workspace/1/src/com/seri/*”

```
#!bin/sh
f=$(basename $0 | tr -d "sr")
pth="/home/byram/workspace/$f"
my1=$(ls $pth/src/com/seri)
cd $etc/src/com/seri/$my1 
```

在“.1sr”命令 f 变量集“bash”之后我该如何修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:58:35.720

我建议将一个名为“prj”的函数放入您的`.bashrc`：

```
prj () {
    cd /home/byram/workspace/"$1"/src/com/seri
} 
```

然后像这样使用它

```
prj 1    # Switch to ...1/src/com/seri
prj 2    # Switch to ...2/src/com/seri 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:42:05.180

我在`.bashrc`这行添加：

```
wr (){
cd /home/byram/workspace/"$1"/w
v1=$(ls /home/byram/workspace/"$1"/src/*/*)
v2=$(ls /home/byram/workspace/"$1"/src/*)
v3=$(ls /home/byram/workspace/"$1"/src/)
echo "$v3.$v2.$v1"    
} 
```

适用于任何项目，例如。com.example.abc,org.samp.xyz

感谢@chepner

# c++ - Differences between certain standards of C and C++

> ID：12662567
> 
> 赞同：0
> 
> 时间：2012-09-30T15:45:05.523
> 
> 标签：c++, c, c++11, c++03, c11

Where can i see all differences between C++11 and C99?

I think that C++98 and C++03 based on C89 / C90\. Is there any differences between them? And what about C++11 and C99? Some features from C99 were added to C++11, but others not (like compound literals, VLAs, etc). Can i see complete list of this changes or not?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:45:39.753

C++ 标准有附录 C，其中列出了 C 和 C++ 之间的差异。它针对 C++11 进行了更新，它确实通过引用包含了 C99 的大部分内容。附录不完整；它触及了主要差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T17:10:01.447

我认为这次采访将对您的目的有用：

[C 语言家族：Dennis Ritchie、Bjarne Stroustrup 和 James Gosling 访谈](http://www.gotw.ca/publications/c_family_interview.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:25:54.120

说法`I think that C++98 and C++03 based on C89 / C90.`是错误的。Stroustrup 在 80 年代中期创建了 C++。从那时起，这两条线出现了分歧。他们在互相影响。但不止于此。2 个不同的团队正在开发这 2 个标准。他们之间没有义务。

# php - htaccess 超过 9 个变量

> ID：12662571
> 
> 赞同：1
> 
> 时间：2012-09-30T15:45:46.717
> 
> 标签：php, regex, .htaccess

我的 url 中有超过 9 个参数被映射到特定的 php 文件中。网址是

> [http://abc.com/USA/NY/male/NY/all-status/all-religion/all-ethnicity/all-cast/all-professions/all-educations/recent_posted](http://abc.com/USA/NY/male/NY/all-status/all-religion/all-ethnicity/all-cast/all-professions/all-educations/recent_posted)

我的 htaccess 规则是

> RewriteRule ^USA/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+ )/([^/]+)/([^/]+)/([^/]+)/([^/]+)/?$ search.php?count=USA&state=$1&gender=$2&r_city= $3&r_mstatus=$4&r_religion=$5&r_ethnicity=$6&r_cast=$7&r_profession=$8&r_education=$9&sort_by=$10 [NC]

它不工作

请问有人可以解决这个问题吗？我需要正确的正则表达式规则和 URL

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T15:57:07.583

创建这样的规则是受限制的，也是不好的做法，更糟糕的是，您将参数传递给搜索脚本；随着脚本的进展，您最有可能希望传递除美国以外的其他参数，这意味着您需要对每条路线进行新的重写。

真的，您应该将整个 url 传递给您的 php 脚本来处理路由。

```
RewriteEngine On
Options -Indexes
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^search/(.*)$ search.php?route=$1 [L,QSA] 
```

这样您就可以`explode('/',$_GET['route'])`在脚本中为您提供所有路由参数的数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T15:55:33.153

就像 Gumbo 所说，只需将全部内容发送到页面并处理：

```
$segments = explode('/', $_SERVER['REQUEST_URI']);
    list($country, $state, $gender, [etc etc.]) = $segments; 
```

# c# - 命令源禁用和启用

> ID：12662580
> 
> 赞同：0
> 
> 时间：2012-09-30T15:46:54.573
> 
> 标签：c#, .net, wpf

我阅读了有关 WPF 命令的所有内容，并且理解了 GoF 命令模式，但我仍然认为，我对这个过程有一个问题：命令目标（例如文本框）如何告诉命令源（例如按钮）它有更改状态（例如，插入文本框中的一些文本），以便源可以禁用或启用自身或它希望做的任何事情。换句话说，命令目标如何让 ICommand 实现类（例如 cut 命令）触发它的 CanExecuteChangedEvent 以便该类可以反过来让命令源知道状态更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:09:01.240

有一个名为[CommandManager](http://msdn.microsoft.com/en-us/library/ms616838.aspx)的类负责执行逻辑。您可以调用 CommandManager.InvalidateRequerySuggested 方法让系统检查您的 CanExecute 方法。

# asp.net-mvc - 如何使用实体框架和成员表初始化数据库

> ID：12662587
> 
> 赞同：22
> 
> 时间：2012-09-30T15:48:01.747
> 
> 标签：asp.net-mvc, entity-framework, asp.net-membership, asp.net-mvc-4, entity-framework-5

我有一个使用 Entity Framework 5.0 Code First 的 MVC4 Web 应用程序。

在 Global.asax.cs 我有一个初始化 Entity.Database 的引导程序，强制初始化数据库并为成员资格初始化数据库。代码是这样的：

```
System.Data.Entity.Database.SetInitializer(new DatabaseContextInitializer());
Database.Initialize(true);
WebSecurity.InitializeDatabaseConnection(DEFAULTCONNECTION, "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

DatabaseContextInitializer 目前非常简单：

```
public class DatabaseContextInitializer : DropCreateDatabaseIfModelChanges<DatabaseContext>
{
    protected override void Seed(DatabaseContext dbContext)
    {
        base.Seed(dbContext);
        db.Set<Workout>().Add(new Workout {Id = 1, Name = "My First workout user1"})

    }
} 
```

问题是我无法通过以下方式为会员创建用户：

```
WebSecurity.InitializeDatabaseConnection(DEFAULTCONNECTION, "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

因为我有一个问题是没有创建数据库。如何使用 Entity Framework 5.0 和 Asp.Net MVC 4 为数据库初始化一些默认用户？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-30T16:24:55.067

请查看[以下文章](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)，了解使用迁移为数据库播种的推荐方法。

以下是步骤：

1.  使用 Internet 模板创建一个新的 ASP.NET MVC 4 应用程序
2.  在您的包管理器控制台中键入以下命令：

    ```
    enable-migrations 
    ```

3.  这将创建一个`~/Migrations/Configuration.cs`文件，您可以在其中播种数据库：

    ```
    using System.Data.Entity.Migrations;
    using System.Linq;
    using System.Web.Security;
    using WebMatrix.WebData;

    internal sealed class Configuration : DbMigrationsConfiguration<MvcApplication1.Models.UsersContext>
    {
        public Configuration()
        {
            AutomaticMigrationsEnabled = true;
        }

        protected override void Seed(MvcApplication1.Models.UsersContext context)
        {
            WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true);

            if (!Roles.RoleExists("Administrator"))
            {
                Roles.CreateRole("Administrator");
            }

            if (!WebSecurity.UserExists("john"))
            {
                WebSecurity.CreateUserAndAccount("john", "secret");
            }

            if (!Roles.GetRolesForUser("john").Contains("Administrator"))
            {
                Roles.AddUsersToRoles(new[] { "john" }, new[] { "Administrator" });
            }
        }
    } 
    ```

4.  在 web.config 中指定成员和角色提供者：

    ```
    <roleManager enabled="true" defaultProvider="SimpleRoleProvider">
      <providers>
        <clear/>
        <add name="SimpleRoleProvider" type="WebMatrix.WebData.SimpleRoleProvider, WebMatrix.WebData"/>
      </providers>
    </roleManager>
    <membership defaultProvider="SimpleMembershipProvider">
      <providers>
        <clear/>
        <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
      </providers>
    </membership> 
    ```

5.  在包管理器控制台中运行迁移：

    ```
    update-database -verbose 
    ```

# c# - 向 NopCommerce 添加控制器

> ID：12662593
> 
> 赞同：0
> 
> 时间：2012-09-30T15:49:12.380
> 
> 标签：c#, asp.net-mvc, nopcommerce

我正在为 NopCommerce 编写自己的付款方式（准确地说是 Datacash，如果有人可以指出我的 NopCommerce 的 IPaymentMethod 的 Datacash 实现，也可以回答我的问题）。

[NopCommerce 提供的用于执行此](http://www.nopcommerce.com/docs/76/how-to-code-my-own-payment-method.aspx)操作的文档很棒，这就是我用作参考的文档，但我对 MVC 非常陌生，第一步是创建一个新控制器。

我知道，关于 MVC，你有模型、视图和控制器。模型与您网站的数据如何建模有关，视图是您所看到的（您的 HTML 等），控制器是您所看到的背后的编程逻辑。

到目前为止，在我所做的任何 MVC Hello World 应用程序中，您通常都有一个文件夹用于模型，一个用于视图，一个用于控制器，如下所示：

![MVC](../Images/8b9d75c74aa421e42f903fa25c22ae3a.png)

但是，NopCommerce 看起来像这样：

![NopCommerce](../Images/d67e1d79d12b12da32fa285f9a518014.png)

所以我的问题是我将要创建的控制器放在哪个文件夹中（或者它甚至重要）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:21:22.237

一项观察：看起来您没有下载 nopCommerce 的源版本，它确实有“Controllers”文件夹：![nopCommerce Nop.Web 控制器文件夹](../Images/0aca281a443ec0022c3d37d4eb1019aa.png) ![nopCommerce PayPalDirect 插件](../Images/21d2de2cde5535e70d1aedb526e970d5.png)

在 nopCommerce 下载页面 ( [http://www.nopcommerce.com/downloads.aspx](http://www.nopcommerce.com/downloads.aspx) ) 上，如果您要进行任何类型的定制，请查找“带有源代码”的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:57:43.077

您不必这样做*，*但最好/明智的做法。像你说的约定是有一个视图、模型和控制器。因此，创建一个 Controller 文件夹，您可以将 Controller 类直接放在文件夹中，或者做更好的事情并创建一个 NOPCommerceController 文件夹，如下所示：

```
Controller/NOPCommerceController/SomeController.cs 
```

干净整洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T10:48:56.267

您应该在插件项目中创建控制器和模型：

![在此处输入图像描述](../Images/133bf4dda7acce73c9d2f97b4f1586ae.png)

# pdf - PDF 规范中的最小 PDF 示例

> ID：12662596
> 
> 赞同：12
> 
> 时间：2012-09-30T15:49:17.507
> 
> 标签：pdf, pdf-generation

我从[PDF Specification](https://www.adobe.com/content/dam/acom/en/devnet/pdf/pdfs/PDF32000_2008.pdf)中提取了 PDF 规范中的最小 PDF 示例，将其复制到记事本，将文件重命名为具有扩展名*.pdf*。

我可以用其他 PDF 查看器（PDF-XChange、SumatraPDF、MuPDF）打开它。但是当我用 Adob​​e Reader 打开它时，它说文件已损坏。

我不确定其他查看者是否将此“损坏”文件视为空白文件。

该文件应该显示一个空白页，因为它是一个最小的示例。

事实上，我修改了最小的例子。*因为当我将它从 PDF 规范复制到记事本，并通过十六进制编辑器打开 .txt 文件时，我看到.txt*文件中的新行给了我 2 个空间。例如，

```
1 0 obj
<< /Type /Catalog 
```

给我（在十六进制编辑器中）

```
1 0 obj  << /Type /Catalog 
```

这是（十六进制值）

```
31 20 30 20 6F 62 6A 0D 0A 3C 3C 20 2F 54 79 70
65 20 2F 43 61 74 61 6C 6F 67 
```

`j`和之间的 2 个空格`<`是`0D 0A`。

因此，我不会在记事本中创建新行，并修改`xref`部分中的值。

下面是完整的代码。

你知道这个例子有什么问题吗？为什么 Adob​​e Reader 说它坏了？这是因为我在 中给出了错误的值`xref`吗？

```
%PDF-1.4 1 0 obj << /Type /Catalog /Outlines 2 0 R /Pages 3 0 R >> endobj 2 0 obj << /Type Outlines /Count 0 >> endobj 3 0 obj << /Type /Pages /Kids [4 0 R] /Count 1 >> endobj 4 0 obj << /Type /Page /Parent 3 0 R /MediaBox [0 0 612 792] /Contents 5 0 R /Resources << /ProcSet 6 0 R >> >> endobj 5 0 obj << /Length 35 >> stream … Page-marking operators … endstream endobj 6 0 obj [/PDF] endobj xref 0 7 0000000000 65535 f 0000000009 00000 n 0000000074 00000 n 0000000119 00000 n 0000000176 00000 n 0000000295 00000 n 0000000373 00000 n trailer << /Size 7 /Root 1 0 R >> startxref 395 %%EOF 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-30T16:55:26.940

# r - 条板格子

> ID：12662597
> 
> 赞同：4
> 
> 时间：2012-09-30T15:49:23.273
> 
> 标签：r, lattice

我的问题是用格子框架剥离我的面板。

```
testData<-data.frame(star=rnorm(1200),frame=factor(rep(1:12,each=100))
                     ,n=factor(rep(rep(c(4,10,50),each=100),4))
                     ,var=factor(rep(c("h","i","h","i"),each=300))
                     ,stat=factor(rep(c("c","r"),each=600))
 )
levels(testData$frame)<-c(1,7,4,10,2,8,5,11,3,9,6,12)# order of my frames
histogram(~star|factor(frame), data=testData
            ,as.table=T
            ,layout=c(4,3),type="density",breaks=20
            ,panel=function(x,params,...){
               panel.grid()
               panel.histogram(x,...,col=1)     
               panel.curve(dnorm(x,0,1), type="l",col=2)
              }
 ) 
```

我正在寻找的是： ![条纹图](../Images/96af5dd9a1337d2b365eafc5f072c7a2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:19:06.523

当它们已经是因子时，您不需要在公式的条件部分中的项目周围添加因子调用。如果您想在两个因素之间进行交叉，则该`interaction`函数是最好的方法。它甚至有一个“sep”参数，可以接受一个换行符。这是我能生产的最接近的：

```
h<-histogram(~star|interaction(stat, var,  sep="\n") + n, data=testData  , 
              as.table=T ,layout=c(4,3), type="density", breaks=20 ,  
panel=function(x,params,...){ panel.grid() 
panel.histogram(x,...,col=1) 
panel.curve(dnorm(x,0,1), type="l",col=2) } ) 
plot(h) 
useOuterStrips(h,strip.left = strip.custom(horizontal = FALSE), 
                  strip.lines=2, strip.left.lines=1) 
```

当我尝试分别输入三个因素然后尝试使用`useOuterStrips`. 它不会接受三个单独的条件因素。我在 Rhelp 中搜索过帖子，但唯一完美的问题得到了一个未经测试的建议，当我尝试它时，它惨遭失败。

# html - html表单中的按钮定位

> ID：12662599
> 
> 赞同：0
> 
> 时间：2012-09-30T15:49:24.193
> 
> 标签：html, css, forms, position

基本上我有一个表单，两个输入名称和密码，下面我有提交按钮。

出于某种原因，无论我如何定位提交按钮，我都无法更改它的宽度或弄清楚如何居中！在这个阶段开始变得非常沮丧，因为我知道这可能只是一些简单的事情，所以如果有人可以在这里帮助我，我将不胜感激！

[http://jsfiddle.net/DannyW86/3kywX/](http://jsfiddle.net/DannyW86/3kywX/)

希望这个指向小提琴的链接有效

在小提琴中有 2 个按钮，因为我试图看看我是否可以以不同的方式定位按钮，但当我能弄清楚这一点时，我最终只会使用一个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T15:55:41.023

### 里面只有三样东西`#feeder_bm_main input, #feeder_bm_main select`：

```
#feeder_bm_main input, #feeder_bm_main select {
    margin: 5px auto;
    float: none;
    display: block;
} 
```

### 演示：http: [//jsfiddle.net/3kywX/1/](http://jsfiddle.net/3kywX/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:31:12.273

1.  添加`text-align: center`到`.login_container .feeder_bm_login`
2.  `float:left`从中删除`#feeder_bm_main input, #feeder_bm_main select`
3.  `width:220px`on`#feeder_bm_main input, #feeder_bm_main select`控制按钮的宽度

# asp.net - asp.net 按钮图像对齐

> ID：12662602
> 
> 赞同：0
> 
> 时间：2012-09-30T15:49:32.833
> 
> 标签：asp.net, css, button

我有一个带有图像的 ASP.net 按钮。我不是也不想使用 Imagebutton。这是一个标准的 asp.net 按钮。图像加载完美，但：

1.  我希望图像在按钮的中心垂直对齐
2.  我希望图像距离按钮的左边缘 5 px

这可能吗？谢谢达摩

**HTML**

```
<asp:Button CssClass="Button" ID="btnLogin" runat="server" Text="Login" onclick="btnLogin_Click" /> 
```

**CSS**

```
.Button
{

         -moz-border-radius: 5px;
         -webkit-border-radius: 5px;
         -khtml-border-radius: 5px; 
          border-radius: 5px; 

          text-align:left;

          padding-left:20px;       
          background-repeat: no-repeat;
          background-image: url(/assets/img/action.gif);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:06:55.030

这取决于图像大小..

但是在这里你得到代码，

```
.button{
background: url(/assets/img/action.gif) no-repeat 5px 50%;
padding:5px 5px 5px 20px;
border-radius:5px;
text-align:left;
} 
```

# c++ - C++ 简单钩子和隐藏命令提示符

> ID：12662606
> 
> 赞同：0
> 
> 时间：2012-09-30T15:50:00.250
> 
> 标签：c++, winapi, hook

我是 C++ 新手，刚刚了解了钩子，所以我有一个 C++ 程序，它在 KeyEvent 发生时运行一个函数：

```
LRESULT WINAPI KeyEvent(int nCode, WPARAM wParam, LPARAM lParam)
{  
  //Do C++ stuff
} 
```

这是我迄今为止唯一的钩子。

但是我想隐藏执行我的代码时弹出的命令提示符。

有人告诉我可以使用这个片段来隐藏它：

```
HWND Stealth;
AllocConsole();
Stealth = FindWindowA("ConsoleWindowClass", NULL);
ShowWindow(Stealth,0); 
```

但是，如果我把它放在钩子中，它不会隐藏提示，直到按下一个键（不理想），如果我把它放在钩子上方（靠近程序顶部）我得到一个错误......

所以我的问题是，是否有任何其他类型的钩子可以在程序运行后放置代码片段以隐藏命令提示符？- 或者有没有像我的代码片段一样隐藏我可以使用的命令提示符的任何其他方式？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:10:55.187

更改项目设置以构建“GUI”应用程序（这会更改一些链接器选项），并提供[WinMain](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633559%28v=vs.85%29.aspx)入口点而不是 main。这样就不会有控制台窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T20:31:48.603

您始终可以使用 WM_CREATE 消息来做您想做的事情。在里面调用：

```
if(MSG == WM_CREATE)
  ShowWindow( GetConsoleWindow(), SW_HIDE ); 
```

这可能对您有用，如果您再次需要控制台，只需将 SW_HIDE 更改为 SW_SHOW。

通常你会为消息类型使用 switch 语句。

# java - JPanel 作为码头

> ID：12662607
> 
> 赞同：1
> 
> 时间：2012-09-30T15:50:16.737
> 
> 标签：java, swing, layout-manager, docking, dockpanel

我想制作一个由一个主 JPanel 组成的电视窗口（*当我双击它时，它应该变成全屏*），以及主框架右侧和底部的更多小 JPanel。我不知道怎么做。我想得到这个主题的主要向量。

谷歌说：使用DockingFrames v1.1.1！可能这是实现这一目标的最佳方式，但我不知道。任何人都帮助我！

我还打算让小窗口可以拖动并替换主窗口。 ![在此处输入图像描述](../Images/63d0cc1cb1c6cef374542ec91962f824.png)

如果有人能给我一些例子并解释如何使这个简单有用，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:18:58.900

这里有一些代码可以帮助您入门。我把它们都放在一个类中，但是你应该为 large`JPanel`和 small单独设置类`JPanels`。这使您能够为小型`JPanels`.

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.Point;
import java.awt.Toolkit;

import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;
import javax.swing.border.Border;

public class TVGrid implements Runnable {

    protected static final Insets noInsets    = new Insets(0, 0, 0, 0);

    protected Dimension screenSize;

    protected JFrame frame;

    protected JPanel largePanel;
    protected JPanel mainPanel;

    protected JPanel[] smallPanels;

    protected Point[] smallPanelOrigins;

    public TVGrid() {
        this.smallPanels = new JPanel[7];
        setSmallPanelOrigins();
        this.screenSize = Toolkit.getDefaultToolkit().getScreenSize();      
    }

    protected void setSmallPanelOrigins() {
        this.smallPanelOrigins = new Point[7];
        this.smallPanelOrigins[0] = new Point(3, 0);
        this.smallPanelOrigins[1] = new Point(3, 1);
        this.smallPanelOrigins[2] = new Point(3, 2);
        this.smallPanelOrigins[3] = new Point(0, 3);
        this.smallPanelOrigins[4] = new Point(1, 3);
        this.smallPanelOrigins[5] = new Point(2, 3);
        this.smallPanelOrigins[6] = new Point(3, 3);
    }

    @Override
    public void run() {
        Border border = BorderFactory.createLineBorder(Color.BLACK, 3);

        frame = new JFrame();
        frame.setTitle("TV Frame");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        mainPanel = new JPanel();
        mainPanel.setLayout(new GridBagLayout());

        largePanel = new JPanel();
        largePanel.setPreferredSize(getLargePanelPreferredSize());
        largePanel.setBackground(Color.GREEN);
        largePanel.setBorder(border);

        addComponent(mainPanel, largePanel, 0, 0, 3, 3, noInsets,
                GridBagConstraints.LINE_START, GridBagConstraints.BOTH);

        for (int i = 0; i < 7; i++) {
            smallPanels[i] = new JPanel();
            smallPanels[i].setPreferredSize(getSmallPanelPreferredSize());
            smallPanels[i].setBackground(Color.YELLOW);
            smallPanels[i].setBorder(border);

            int x = smallPanelOrigins[i].x;
            int y = smallPanelOrigins[i].y;

            addComponent(mainPanel, smallPanels[i], x, y, 1, 1, noInsets,
                    GridBagConstraints.LINE_START, GridBagConstraints.BOTH);
        }

        frame.add(mainPanel);
        frame.pack();
        frame.setVisible(true);
    }

    protected Dimension getLargePanelPreferredSize() {
        Dimension d = new Dimension();
        d.width = ((screenSize.width - 30) * 3) / 4;
        d.height = ((screenSize.height - 90) * 3) / 4;
        return d;
    }

    protected Dimension getSmallPanelPreferredSize() {
        Dimension d = new Dimension();
        d.width = (screenSize.width - 30) / 4;
        d.height = (screenSize.height - 90) / 4;
        return d;
    }

    protected void addComponent(Container container, Component component,
            int gridx, int gridy, int gridwidth, int gridheight, 
            Insets insets, int anchor, int fill) {
        GridBagConstraints gbc = new GridBagConstraints(gridx, gridy,
                gridwidth, gridheight, 1.0D, 1.0D, anchor, fill, insets, 0, 0);
        container.add(component, gbc);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new TVGrid());
    }

} 
```

# php - 使用 javascript 或 php 在网站上查找 Box，它将在 iframe 上搜索单词

> ID：12662608
> 
> 赞同：0
> 
> 时间：2012-09-30T15:50:21.380
> 
> 标签：php, javascript, search, find

是否可以在我的网站上放置一个查找框，该框将从 iframe 中搜索特定单词，如果用户键入“健康”，它将返回所有与之相关的单词，或者至少像 chromes 查找框一样突出显示所有单词?

来源在同一个域上！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:55:20.843

[如果 IFRAME 位于不同的域中，则由于相同的来源策略](http://en.wikipedia.org/wiki/Same_origin_policy)，您无法使用 JavaScript 执行此操作

您将需要创建一个 PHP 脚本，该脚本将获取 IFRAME 的页面源，对其进行处理并返回带有突出显示的单词的输出 HTML。

查看[cURL](http://php.net/manual/en/book.curl.php)和[DOM](http://php.net/manual/en/class.domdocument.php)文档，了解检索和解析 HTML 源的方法。

# jquery - 如何在 jquery 事件处理程序中传递对象方法？

> ID：12662610
> 
> 赞同：2
> 
> 时间：2012-09-30T15:50:35.010
> 
> 标签：jquery

我有一堆调用特定 jQuery 插件的处理程序。我想重构代码并创建一个对象，其属性和方法可以传递给包装器，然后调用插件。

问题：我难以模拟以下语句：

```
 $("li", opts.tgt).live("click", function () { GetContact(this); }); 
```

有人对如何进行有一些建议吗？TIA。

```
function InitAutoCompleteTest() { // Init custom autocomplete search
    var opts = {
        tgt: "#lstSug", crit: "#selCrit", prfxID: "sg_", urlSrv: gSvcUrl + "SrchForContact",
        fnTest: function (str) { alert(str) }, 
        fnGetData: function (el) { GetContact(el) } 
    }

    $("input", "#divSrchContact").bind({
        "keypress": function (e) { // Block CR (keypress fires before keyup.)
            if (e.keyCode == 13) { e.preventDefault(); }; 
        },
        "keyup": function (e) { // Add suggestion list matching search pattern.               
            opts.el = this; $(this).msautocomplete(opts); e.preventDefault();
        },
        "dblclick": function (e) { // Clear search pattern.
            $(this).val("");
        }
    });

    opts.fnTest("Test"); // Works. Substituting the object method as shown works.

    // Emulation attempts of below statement with object method fail:
    // $("li", opts.tgt).live("click", function () { GetContact(this); });   

    $("li", opts.tgt).live({ "click": opts.fnGetData(this) }); // Hangs.
    $("li", opts.tgt).live({ "click": opts.fnGetData });  // Calls up GetContact(el) but el.id in GetContact(el) is undefined
}

function GetContact(el) {
    // Fired by clicking on #lstSug li. Extract from selected li and call web srv.
    if (!el) { return };

    var contID = el.id, info = $(el).text();
    ...
    return false;
} 
```

**编辑**

感谢您的反馈。我终于使用了 Thiefmaster 提出的变体。我只是想知道为什么该方法必须嵌入匿名 fn 中，因为 "opts.fnTest("Test");" 可以说，开箱即用。

```
 $("li", opts.tgt).live({ "click": function () { opts.fnGetData(this); } }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T15:52:16.567

只需将它们包装在一个匿名函数中：

```
function() {
    opts.fnGetData();
} 
```

另一个需要现代 JS 引擎的选项是使用`.bind()`：

```
opts.fnGetData.bind(opts) 
```

完整示例：

```
$("li", opts.tgt).live({ "click": opts.fnGetData.bind(opts) });
$("li", opts.tgt).live({ "click": function() { opts.fnGetData(); }}); 
```

然后在回调`this`中用于访问对象。

* * *

如果你想将元素作为参数传递，你可以这样做：

```
$("li", opts.tgt).live({ "click": function() { opts.fnGetData(this); }}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:08:12.803

从文档

```
.live( events, data, handler(eventObject) ) 
```

***events***包含 JavaScript 事件类型的字符串，例如“click”或“keydown”。从 jQuery 1.4 开始，字符串可以包含多个以空格分隔的事件类型或自定义事件名称。

***data***将传递给事件处理程序的数据映射。

***handler(eventObject)***在事件触发时执行的函数。

例子：

```
$('#id').live('click', {"myValue":"someValue"}, function(evt){
    console.log(evt.data["myValue"]); // someValue
});​ 
```

[jQuery直播](http://api.jquery.com/live/)

# python - Python：为什么这个 Python 代码会给我一个错误？我错过了什么？

> ID：12662615
> 
> 赞同：-2
> 
> 时间：2012-09-30T15:51:05.737
> 
> 标签：python, oop

问题 1\. 当我运行代码 ( [http://codepad.org/kAADoUks](http://codepad.org/kAADoUks) ) 时，我收到一个错误，即第 129 行缺少 1 个参数。“问题，答案 = 转换（片段，短语）”

我检查了无数次代码，但我不知道如何修复它。做错了什么？

1.  Python 如何知道代码在命令行上可以接受超过 2 个参数

2.  convert(snippet, phrase) 是预定义的 Python 函数吗？

3.  这些符号“###”、“ *** ”是什么？它们在 Python 中是如何调用的？他们是占位符吗？

4.  “片段”未在代码中声明为总体/列表单词。Python 解释器如何知道“snippet”指的是列表 WORDS？“片段”是一种特殊的 Python 内置元素吗？

5.  "for i in range(0, snippet.count("@@@")):"（第 75 行）URL 文件中没有 "###"、" ***"、"@@@" 符号：如何***当源文件中没有***“###”或“”时，Python解释器能够计算“###”或“”的数量吗？***

6.  第 85 行的代码是如何工作的？“for sentence in snippet, phrase:” 是“sentence” 循环遍历 2 个不同的列表吗？我在代码中没有看到“片段”和“短语”被定义为列表的任何地方。

7.  变量“问题”和“答案”具有相同的值。第 135 行中的 if 子句的目的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:17:38.127

以艰难的方式学习代码。

这一切不都已经名存实亡了吗？

本着善意的精神回答您的一些问题：

1.  python不知道，有问题的代码应该检查参数的数量

2.  不，convert 不是 Python 中的预定义函数

3.  “#”是一个数字符号，也称为哈希键，它们用于Python中的注释，但在这种情况下它们只是字符串数据的一部分，我想这些是你的功课。

4.  片段在 Python 中不是任何特殊名称

5.  你的工作是弄清楚我想

6.  第 85 行的代码只循环了 2 个项目，片段和短语，类似`for i in x, y: foo(i)`的代码只是`foo(x); foo(y)`. 你是对的，在这种情况下它有点假。我想纠正这个代码是你的功课，这样它才能真正做一些有用的事情。它被称为以困难的方式学习代码是有原因的，对吗？

7.  嗯？135还是137？

8.  您没有询问的异常，很可能是临时网络错误，我没有得到这样的异常。

# javascript - 比较变量

> ID：12662618
> 
> 赞同：0
> 
> 时间：2012-09-30T15:51:48.333
> 
> 标签：javascript, variables

我看到了一些这样的变量：

```
var comparison = <condition> || /* It could be "&&" too */ <condition>; 
```

我不知道它是什么，它可以做什么？太感谢你了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T15:55:59.137

它主要用于将函数参数初始化为某个默认值。

```
function foo(arg1,arg2)
{
    arg1 = arg1 || 'Default for arg1';
    arg2 = arg2 || 'Default for arg2';
} 
```

这段代码的作用，实际上和下面的一样：

```
if (!(arg1))
{//if arg1 is falsy
    arg1 = 'Default for arg1';//assign
} 
```

就目前`&&`而言，这几乎是相同的故事：

```
function foo(arg1,arg2)
{
    var areBothArgsTrue  = arg1 && arg2;//sets true is both args were truthy, else assigns false
    arg1 = arg1 || 'Default for arg1';
    arg2 = arg2 || 'Default for arg2';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:56:36.337

它们被称为[逻辑运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)(MDN)：

> **`expr1 && expr2`**: 如果可以转换为 false，则返回 expr1；否则，返回 expr2。因此，当与布尔值一起使用时，如果两个操作数都为真，则 && 返回真；否则，返回 false。
> 
> **`expr1 || expr2`**：如果可以转换为true则返回expr1；否则，返回 expr2。因此，当与布尔值一起使用时，|| 如果任一操作数为真，则返回真；如果两者都为假，则返回假。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T15:54:56.980

代码将评估这两个条件并返回一个布尔值。

`var comparison = 2 > 1 && 3 < 1;`

在这种情况下，`comparison`将设置为`false`。

`&&``true`仅当两个条件都为真时`||`才会返回，而`true`如果至少有一个条件为真则返回`true`。

# javascript - 在 CouchDB 中获取数据库的所有文档

> ID：12662619
> 
> 赞同：3
> 
> 时间：2012-09-30T15:51:50.943
> 
> 标签：javascript, node.js, couchdb, cradle

Cradle 库的`get()`方法需要我提供一个`_id`. CouchDB 提供了一个`_all_docs`视图，但在 Cradle 文档中没有关于此的任何内容。

如何使用 Cradle 从单个 CouchDB 数据库中获取所有文档？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T07:55:38.363

Cradle 提供了[`all()`](https://github.com/cloudhead/cradle#database-level)一种作用于数据库的方法。它查询`_all_docs`视图并返回结果。

它应该看起来像这样。

```
var cradle = require('cradle'),
    db = new(cradle.Connection)().database('your-db');

db.all(function(err, res) {
    if (err) {
        console.log('Error: %s', err)
    } else {
        console.log(res);
    }
}); 
```

# ms-access - Microsoft Access - 根据另一个查询的结果创建查询

> ID：12662620
> 
> 赞同：1
> 
> 时间：2012-09-30T15:51:53.223
> 
> 标签：ms-access

此查询生成一个客户 ID 表：

```
SELECT Transactions.customerId
FROM Transactions 
WHERE Transactions.purchaseDate <#9/1/2012#
GROUP BY Transactions.customerId
HAVING  Sum(Transactions.amountPaid)<>0; 
```

此查询生成事务表：

```
SELECT Customers.firstName, Customers.lastName, Transactions.transactionId, Transactions.product, Transactions.purchaseDate, Transactions.amountPaid, Customers.customerId
FROM Customers INNER JOIN Transactions ON Customers.customerId = Transactions.customerId
WHERE (((Transactions.refundTransaction)=False)); 
```

我想仅从第一个查询生成的用户中选择所有事务（第二个查询）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:06:19.230

使用 MS Access，可以保存这两个查询，然后按查询名称将它们添加到查询设计窗口。添加后，您可以通过将相关字段名称从一个拖放到另一个来在两个查询之间创建一个 INNER JOIN。下一个阶段，如果可以继续，是用查询名称替换派生表，即查询的 sql 内容。

例如：

查询1

```
SELECT ID, CustName FROM Table1 WHERE SomeField > 2 
```

查询2

```
SELECT CustID, TranName FROM Table2 WHERE SomeField > Date() 
```

查询3

```
SELECT * FROM Query1 INNER JOIN Query2 ON Query1.ID = Query2.CustID 
```

替代：

```
SELECT * FROM (
   SELECT ID, CustName 
   FROM Table1 
   WHERE SomeField > 2) As Q1
INNER JOIN (
   SELECT CustID, TranName 
   FROM Table2 WHERE SomeField > Date()) As Q2
ON Q1.ID = Q2.CustID 
```

# scala - 我怎样才能省略这个 Nil Case

> ID：12662623
> 
> 赞同：5
> 
> 时间：2012-09-30T15:51:57.127
> 
> 标签：scala, sorting, functional-programming

我正在用 scala 实现一些常见的算法。在尝试重新创建冒泡排序时，我遇到了这个问题

这是一个内部循环的实现，它将值冒泡到顶部：

```
def pass(xs:List[Int]):List[Int] = xs match { 
  case Nil => Nil 
  case x::Nil => x::Nil 
  case l::r::xs if(l>r) => r::pass(l::xs)
  case l::r::xs => l::pass(r::xs)
} 
```

我的问题是 case `Nil => Nil`。我知道我需要这个是因为我可以申请`Nil`这个功能。有没有办法确保`Nil`不能以满足编译器的方式作为参数提供，以便我可以消除这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:09:19.837

List 有两个子类型，Nil 和 ::，所以 :: 表示一个至少有一个元素的列表。

```
def pass(xs: ::[Int]):List[Int] = xs match { 
  case x::Nil => x::Nil 
  case l::r::xs if(l>r) => r::pass(new ::(l,xs))
  case l::r::xs => l::pass(new ::(r, xs))
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T15:55:30.993

这大致对应于对原始类型的*改进*，您将编写一个类型，其成员是初始类型的子集。然后，您将证明，对于`x`您的函数的每个输入，它`x`都是 non `Nil`。由于这需要大量的证明（您可以在 Coq 中使用*子集*类型使用依赖类型来实现这一点），在这种情况下最好的做法是引入一个新类型，它是一个没有`Nil`构造函数的列表，只有一个cons 和单个元素的构造函数。

编辑：由于 Scala 允许您在 List 类型上使用子类型来强制执行此操作，因此您可以在类型系统中确定地使用该子类型来证明它。这*仍然*是一个证明，从某种意义上说，任何类型检查都对应于证明程序确实存在某种类型的证明，这只是编译器可以完全证明的东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T16:34:48.357

在这种情况下，您可以简单地使用`case`子句顺序：

```
def pass(xs:List[Int]):List[Int] = xs match { 
  case l::r::xs if(l>r) => r::pass(l::xs)
  case l::r::xs => l::pass(r::xs)
  case xs => xs
} 
```

前两个子句将仅匹配具有一个或多个元素的列表。最后一个子句将在其他地方匹配。

# regex - Vim，在一个正则表达式中删除空白和注释行

> ID：12662624
> 
> 赞同：21
> 
> 时间：2012-09-30T15:52:13.997
> 
> 标签：regex, vim

我想一次删除空白和评论。我已经找到了关于删除空行的类似问题，所以对于我使用的空行：

```
:g/^$/d 
```

对于注释行：

```
:g/^#/d 
```

我很好奇有没有办法将这些正则表达式合并为一个？就像是

```
:g/^[$#]/d 
```

但显然它在 vim 中不起作用。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-30T15:56:10.793

你可以试试这个命令：

```
:g/^\(#\|$\)/d 
```

或者

```
:g/\v^(#|$)/d 
```

* * *

*   `$`匹配 [...] 中的文字 '$'（输入`:help /$`帮助）
*   `\|`用于交替
*   `\v`非常神奇（最小的反斜杠转义）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T18:32:09.053

解决此问题的另一种方法是保留未注释的行：

`:g!/^[^#]/d`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-30T15:58:42.393

您可以将正则表达式模式与“或”运算符结合使用：`\|`，例如：

```
:g/^\(#.*\|$\)/d 
```

虽然，在这种特殊情况下，您实际上只需要指定它`#.*`是可选的，例如：

```
:g/^\(#.*\)\?$/d 
```

最后，请注意，您可以将大多数命令与 VIM（不是正则表达式）的“管道”运算符链接在一起`|`，例如：

```
:g /^#/d | /^$/d 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-30T15:58:07.897

尝试以下操作：

```
:g/^$/d | /^#/d 
```

可以同时`|`组合多个命令。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-11-14T11:12:27.413

扩展 kevs 答案：
如果有人还想删除选项卡式配置文件中的注释，
例如：

```
server {
    listen 80 default_server;
    listen [::]:80 default_server;

    # SSL configuration
    #
    # listen 443 ssl default_server;
    # listen [::]:443 ssl default_server;
    #
    # Self signed certs generated by the ssl-cert package
    # Don't use them in a production server!
    #
    # include snippets/snakeoil.conf;
    ... 
```

你可以试试这个：

```
:g/\v^(#|$|\t#)/d 
```

# android - Android设备配置更改和setRetainInstance，第二次crash

> ID：12662632
> 
> 赞同：0
> 
> 时间：2012-09-30T15:53:51.340
> 
> 标签：android

我正在编写一个包含单个片段的活动。此片段显示一组带有“AdapterViewFlipper”和“SimpleCursorAdapter”的照片。

为了快速响应设备的方向变化，我使用了片段“setRetainInstance”功能。

它在第一次方向变化时工作得很快，效果很好，无需从网络重新加载图像。

问题出现在第二次方向更改时，片段“onDetach”中出现“IllegalArgumentException”：

```
09-30 13:50:36.374: W/System.err(8310): java.lang.IllegalArgumentException: Receiver not   registered: android.widget.AdapterViewFlipper$1@424512f8
09-30 13:50:36.384: W/System.err(8310):     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:654)
09-30 13:50:36.384: W/System.err(8310):     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:1134)
09-30 13:50:36.384: W/System.err(8310):     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:378)
09-30 13:50:36.384: W/System.err(8310):     at android.widget.AdapterViewFlipper.onDetachedFromWindow(AdapterViewFlipper.java:112)
09-30 13:50:36.384: W/System.err(8310):     at android.view.View.dispatchDetachedFromWindow(View.java:11789)
09-30 13:50:36.384: W/System.err(8310):     at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:2534)
09-30 13:50:36.384: W/System.err(8310):     at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:2532)
09-30 13:50:36.384: W/System.err(8310):     at android.view.ViewGroup.removeAllViewsInLayout(ViewGroup.java:3819)
09-30 13:50:36.384: W/System.err(8310):     at android.view.ViewGroup.removeAllViews(ViewGroup.java:3765)
09-30 13:50:36.384: W/System.err(8310):     at debut.telebox.FragPhoto.onDetach(FragPhoto.java:117)
09-30 13:50:36.384: W/System.err(8310):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:991)
09-30 13:50:36.384: W/System.err(8310):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
09-30 13:50:36.384: W/System.err(8310):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1017)
09-30 13:50:36.384: W/System.err(8310):     at android.app.FragmentManagerImpl.dispatchDestroy(FragmentManager.java:1826)
09-30 13:50:36.384: W/System.err(8310):     at android.app.Activity.performDestroy(Activity.java:5171)
09-30 13:50:36.384: W/System.err(8310):     at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1109)
09-30 13:50:36.394: W/System.err(8310):     at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3260)
09-30 13:50:36.394: W/System.err(8310):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3291)
09-30 13:50:36.394: W/System.err(8310):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3489)
09-30 13:50:36.394: W/System.err(8310):     at android.app.ActivityThread.access$700(ActivityThread.java:130)
09-30 13:50:36.394: W/System.err(8310):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1201)
09-30 13:50:36.394: W/System.err(8310):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-30 13:50:36.394: W/System.err(8310):     at android.os.Looper.loop(Looper.java:137)
09-30 13:50:36.394: W/System.err(8310):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-30 13:50:36.394: W/System.err(8310):     at java.lang.reflect.Method.invokeNative(Native Method)
09-30 13:50:36.394: W/System.err(8310):     at java.lang.reflect.Method.invoke(Method.java:511)
09-30 13:50:36.394: W/System.err(8310):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-30 13:50:36.394: W/System.err(8310):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-30 13:50:36.394: W/System.err(8310):     at dalvik.system.NativeStart.main(Native Method) 
```

FragPhoto 第 117 行位于“((ViewGroup) principale.getParent()).removeAllViews();”上

这是我的活动代码：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle etatSauve) {
    super.onCreate(etatSauve);
    setContentView(R.layout.mainphoto);
    }

@Override
public void onDestroy () {
    super.onDestroy();
} 
```

活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/toutenhaut"
     android:layout_width="match_parent"
     android:layout_height="match_parent" >

<fragment
     android:id="@+id/activitePhotoFrag"
     android:name="debut.telebox.FragPhoto"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
     />

</LinearLayout> 
```

该片段的代码包含：

```
private View principale;
private SimpleCursorAdapter monAdapter;
private AdapterViewFlipper vuele;

@Override
public void onCreate(Bundle etatSauve) {
    super.onCreate(etatSauve);
    this.setHasOptionsMenu(true);
    this.setRetainInstance(true);
    }

@Override
public View onCreateView(LayoutInflater inflateur, ViewGroup container,
        final Bundle etatSauve) {

    if (principale == null) {
        principale = inflateur.inflate(R.layout.fragmentphoto, container, false);
        vuele = (AdapterViewFlipper) principale.findViewById(R.id.photoflipper);

    }

    return principale;
}

public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (getLoaderManager().getLoader(0) == null)
        getLoaderManager().initLoader(0, getArguments(), this);
}

public void onAttach (Activity activity) {
    super.onAttach(activity);
}

public void onDetach() {
    super.onDetach();
    try {
        ((ViewGroup) principale.getParent()).removeAllViews();
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    }
} 
```

看来第二次fragment view parent不好...为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T11:25:42.543

通过用简单的“ImageView”和“Cursor”替换“AdapterViewFlipper”解决了问题

# php - 在运行模块 mod_fcgid 的 Apache 服务器中上传错误

> ID：12662633
> 
> 赞同：1
> 
> 时间：2012-09-30T15:54:11.140
> 
> 标签：php, apache, ubuntu, fastcgi

我在 ubuntu 10LTS 上使用 nginx 作为反向代理运行 apache 服务器。我通过 apache 模块 fcgid 以快速 cgi 运行 php。当我尝试上传大于 16MB 的文件时，它给了我内部服务器错误。这是

[警告] [client 59.99.25.15] mod_fcgid：HTTP 请求长度 16784462（到目前为止）超过 MaxRequestLen（16777216），引用者：www..com/upload.php

表示 fcgid mod 有问题，所以我更改了 /etc/apache2/mods-available/fcgid.conf 中的 fcgid.conf

我试过

FcgidMaxRequestLen 1073741824

还有 MaxRequestLen 1073741824

我仍然遇到同样的错误，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T15:59:14.087

添加 FcgidMaxRequestLen 1073741824 后重新启动 Apache 服务器。

# ruby-on-rails - What happens if I don't $redis = Redis.new in after_fork?

> ID：12662634
> 
> 赞同：2
> 
> 时间：2012-09-30T15:54:37.127
> 
> 标签：ruby-on-rails, redis, unicorn

What's the negative impact of not putting `$redis = Redis.new` in Unicorn's after_fork, since redis-rb is thread safe? Assuming I have more than one worker.

As opposed to just putting that line of code in the environment.rb or an intializer?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T07:33:55.480

`after_fork` has little to do with thread safety. It it used when a parent process forks a child process, not when spawning a thread.

**Why you should care**

If you never fork, you probably don't.

When you fork, the parent and child processes share file and socket descriptors (db connections, redis connections). If you don't re-open the connection to Redis in the child, data from the parent can be interleaved on the socket with data from the child.

Read [A Unix Shell in Ruby Pipes](http://jstorimer.com/2012/03/18/a-unix-shell-in-ruby-pipes.html) for a much more detailed description of what's going on.

# c++ - 擦除使用 const_iterator 的向量的元素

> ID：12662636
> 
> 赞同：2
> 
> 时间：2012-09-30T15:55:04.607
> 
> 标签：c++, vector, iterator, erase

我有一个 Car 对象的向量，声明为

```
vector<Car> vCars 
```

在我的一个函数中，我需要擦除向量的第一个元素。听起来很简单吧？引发错误的行：

```
vCars.erase( vCars.begin() ); 
```

和错误：

```
no matching function for call to 'std::vector<Car>::erase(std::vector<Car>::const_iterator) const' 
```

我理解擦除通常只需要一个迭代器作为它的参数，而不是一个 const_iterator。我一直在寻找错误的解决方案或解决方法，例如擦除删除成语，但从我所看到的情况来看，当我需要按位置删除时，它只会按值删除元素 - 足够简单，只是第一个位置的元素！（我知道这对于矢量来说性能不好，但我需要为此使用矢量）

编辑：为了澄清情况，调用包含的函数如下：

```
 /// Removes the Car at the front of the garage without returning the instance.
    void Garage::pop() const {
        if ( !empty() ) {
          vCars.erase( vCars.begin() );
        }
    } 
```

编辑：我现在知道我哪里出错了。有很多方法都是 const 的，而我只是盲目地将 pop() 设置为 const 方法！一旦我删除了 const，问题就解决了。感谢您为我指明正确的方向！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:02:14.297

这[`erase`](http://en.cppreference.com/w/cpp/container/vector/erase)不仅适用于`iterator`s，它也适用`const_iterator`于 C++11 中的 s。毕竟，要调用擦除，您需要对向量的可修改引用，如果有的话，您总是可以`iterator`从一个中获得一个正常的非常量`const`。这就是为什么他们将成员更改为`const_iterator`.

问题是，只有当你调用它的对象也是`const_iterator`合格的——在这种情况下，你的. 反过来，这意味着您只能在其上调用合格的函数，这是编译器尝试的：`begin()``const``vCars``const`

```
... 调用 'std::vector::erase(std::vector::const_iterator) const'
                                                             ^^^^^

```

我认为你同意合格`erase`是`const`没有意义的。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T15:58:57.910

错误信息：

> 没有匹配函数调用 'std::vector::erase(std::vector::const_iterator) const'

意味着`vCars.begin()`产生 a `const_iterator`，这反过来又意味着 that`vCars`是一个常量对象或引用。不允许您通过该引用修改向量。如果函数需要修改向量，则不能采用常量引用。

请注意，在声明为`const`隐式`this`指针的成员函数中是类型`T const *`（即您不能在 const 函数中修改对象）。如果是这种情况，则需要`const`从函数中删除限定符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T15:57:18.100

看来您的参数“vCars”是对向量的 const 引用。您可以通过 const_cast 使其可变或更改您的函数设计。

# javascript - 检测外部断开的链接

> ID：12662638
> 
> 赞同：2
> 
> 时间：2012-09-30T15:55:05.257
> 
> 标签：javascript

问题是我的网站上有很多外部下载链接，有些链接已经过期，所以我想自动检测过期的链接。

对我来说，有效链接是指向我的一个文件服务器的直接文件下载链接。损坏的链接会导致一个带有错误消息的简单 html 页面。

我的第一个想法是获取下载链接的html源代码，看看它是否包含错误但它不起作用。我也尝试过 javascript，但问题是 js 不处理外部链接。

有任何想法吗？？多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:07:56.820

这不是前端的任务，而是后端的任务。正如超新星所说，每天从您的服务器检查一次。AJAX 请求不会是您的答案，因为[浏览器安全策略](http://en.wikipedia.org/wiki/Same_origin_policy)不允许对不同域的请求。

* * *

解决方案：

好的，根据您的评论，检查此解决方案：

```
<html>
<head>
  <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
  <script>
    $(document).ready(function(){
      var linksDiv = $('#links');

      $('#generateLinks').click(function(){
        //I don't know your logic for this function, so I'll try to reproduce the same behavior
        var someURLs = ['http://www.google.com','http://www.djfhdkjshjkfjhk.com', 'http://www.yahoo.com'];
        linksDiv.html('');

        for(var i = 0; i < someURLs.length; i++){
          var link = $('<a/>').attr('href', someURLs[i]).append('link ' + i).css('display','block');
          linksDiv.append(link);
        }

      });

      $('#getLinksAndSend').click(function(){
        var links = linksDiv.find('a');

        var gatheredLinks = [];

        $(links).each(function(){
          gatheredLinks.push(this.href);
        });

        sendLinks(gatheredLinks);
      });

      var sendLinks = function(links){
        $.ajax({
          url: "your_url",
          type: "POST",
          data: {
            links: links
          }
        }).done(function(resp) { 
          alert('Ok!')
        });
      }
    });
  </script>
</head>
<body>
  <div id="links">

  </div> 
  <button id="generateLinks">Generate all links</button>
  <button id="getLinksAndSend">Get links and send to validator</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T16:41:37.703

如果您不介意让客户端完成工作，您可以尝试使用 javascript 来完成。

我有一个greasemonkey 脚本，它会自动检查打开页面中的所有链接，并根据服务器响应（未找到、禁止等）标记它们。

看看你能不能从中得到一些想法： http: [//userscripts.org/scripts/show/77701](http://userscripts.org/scripts/show/77701)

我知道跨域策略不适用于 GM_xmlhttprequest，如果想使用 javascript 解决方案，可能必须尝试解决方法，例如：

*   [是否可以跨域使用 XMLHttpRequest](https://stackoverflow.com/questions/8524052/is-it-possible-to-use-xmlhttprequest-across-domains)
*   [跨域进行 JavaScript 调用](https://stackoverflow.com/questions/3771840/making-javascript-call-across-domains?rq=1)
*   [跨域 XMLHttprequest](https://stackoverflow.com/questions/3144093/cross-domain-xmlhttprequest)

如果您想要服务器端解决方案，我相信上述答案可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-20T18:12:07.117

这可能有点矫枉过正，但 linux kde 中有一个名为 klinkstatus 的程序可以在网站中找到损坏的链接：

[https://www.kde.org/applications/development/klinkstatus/](https://www.kde.org/applications/development/klinkstatus/)

# ms-access - Access 2010 - 我使用什么控件名称来重新查询此子表单？

> ID：12662639
> 
> 赞同：6
> 
> 时间：2012-09-30T15:55:08.147
> 
> 标签：ms-access, ms-access-2010

我现在正在学习 MS Access，但遇到了问题。我发现了类似的问题，但在尝试过之后我仍然无法弄清楚。

我在表单上添加了一个按钮，用于更新子表单后面的表格，现在我需要该子表单来显示新数据。谁能告诉我使用什么作为控件名称，或者我是否在正确的轨道上得到我想要的？

我的主表单是“EnterEmployeeSales”，我的子表单是“RetailSalesSubform”。

以下是我正在尝试做的一些屏幕截图：

![在此处输入图像描述](../Images/4e0453f52b391e913853a6d8f1a12663.png) ![在此处输入图像描述](../Images/747f5aff1e53fd5334be3296521ec6a7.png) ![在此处输入图像描述](../Images/c312fdba80a6ed82e7da3f793ea82d71.png)

**编辑：我想通了。我把它弄得太复杂了！**

我一直在尝试输入诸如“Forms！Yadda！Yadda”之类的内容，但我只需要在上面屏幕截图上的“重新查询”“控件名称”字段中输入子表单控件的**名称。**设想！这是关于如何确定子表单控件名称的屏幕截图（对于像我这样的其他失败者新手）： ![在此处输入图像描述](../Images/1dd199deef6df14b30b3ffc61e050c12.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:00:16.720

子表单有两个部分，子表单控件和包含的表单。重要的是使用子窗体控件的名称来重新查询，而不是包含的窗体的名称。所以：

```
 Forms!MyMainForm!MySubformControlName.Form.Requery 
```

或者在表单模块中编写代码时：

```
 Me.MySubformControlName.Form.Requery 
```

在表单模块中使用 Me 的一个优点是智能感知将为您提供子表单控件的名称。

更多信息：[http ://access.mvps.org/access/forms/frm0031.htm](http://access.mvps.org/access/forms/frm0031.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T18:35:19.503

宏是一种方法。VBA 也可以做到这一点。在您的情况下，您可以在“onclick”事件中放置代码： `Docmd.Requery "ServiceSalesSubform"` 它做同样的事情，但有时在 VBA 代码中包含所有内容是件好事。当代码和宏混合在一起时，很难知道发生了什么以及何时发生。

# php - 如何制作在网站中创建新 URL 的表单？

> ID：12662640
> 
> 赞同：1
> 
> 时间：2012-09-30T15:55:07.403
> 
> 标签：php, html, forms

例如，在 Craigslist 上，用户填写一份他们正在寻找的表格，一旦提交，它就会自动创建一个托管在网站 URL 上的新 URL。抱歉，我不知道该怎么做或它叫什么。任何人？我该怎么做？它叫什么？=) 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T15:59:45.360

你的意思是 StackOverflow 有这个问题的 URL 吗？

```
http://stackoverflow.com/questions/12662640/how-to-make-form-that-creates-a-new-url-in-a-website 
```

只需要一个简单的 .htaccess 文件，例如：

```
RewriteEngine on
RewriteRule /questions/([0-9]+).*$ /question.php?id=$1 
```

整个“如何制作……”这件事只是问题的名称。我不完全确定为什么许多网站将其放在 URL 中，可能是出于 SEO 目的，但如果您将其省略，它会自动填写，所以我假设它是可选的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:01:19.400

这是由 (mysql-) 数据库、php 和 .htaccess 完成的，从而产生动态 url。

动态 URL 是搜索数据库驱动的网站或运行脚本的网站的 URL 产生的页面地址。与静态 URL 相比，其中网页的内容保持不变，除非将更改硬编码到 HTML 中，而动态 URL 是从对站点数据库的特定查询生成的。动态页面基本上只是一个模板，在其中显示数据库查询的结果。不是在 HTML 代码中更改信息，而是在数据库中更改数据。

# c# - 更新 SQL 命令 C#

> ID：12662645
> 
> 赞同：3
> 
> 时间：2012-09-30T15:55:33.973
> 
> 标签：c#, sql, database, sql-update

我正在尝试从 C# 中的程序更新数据库。

`date`这是我连接到数据库的代码以及更新表中列的尝试`RoomsTable`。对我来说看起来不错，但数据库中没有任何反应。

```
updateConnection = new System.Data.OleDb.OleDbConnection();
updateConnection.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\users\spreston\documents\visual studio 2012\Projects\roomChecksProgram\roomChecksProgram\roomsBase.accdb";
updateConnection.Open();

MessageBox.Show("Connected");

string updateCommand = "UPDATE RoomsTable SET Date Checked='9/27/2012'";
updateAdapter = new OleDbDataAdapter(updateCommand, updateConnection);

updateConnection.Close();
updateConnection.Dispose(); 
```

我不知道为什么它不起作用。在我看来，一切都在那里。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T15:58:29.063

利用`OleDBCommand`

```
string updateCommand = "UPDATE RoomsTable SET [Date Checked]='9/27/2012'";
updateCommand = new OleDbCommand(updateCommand, updateConnection);

updateCommand.ExecuteNonQuery();
updateConnection.Close(); 
```

也许你可以使用`Using statement`和*参数化查询*来重构代码。并且列名`Date Checked`应该用括号*转义。*

```
string updateCommand = "UPDATE RoomsTable SET [Date Checked]=@checkedDate WHERE ID = @id"; // '9/27/2012'
using (OleDbConnection conn = new OleDbConnection("connectionStringHERE"))
{
    using (OleDbCommand comm = new OleDbCommand())
    {
        comm.Connection = conn;
        comm.CommandText = updateCommand;
        comm.CommandType = CommandType.Text
        comm.Parameters.AddWithValue("@checkedDate", this.dateTimePicker1.Value)
        comm.Parameters.AddWithValue("@id", row.roomID);
        try
        {
            comm.Open();
            conn.ExecuteNonQuery();
        }
        catch(OleDbException ex)
        {
            MessageBox.Show(ex.Message.ToString());
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T16:46:15.373

你必须这样写：

```
updateConnection = new System.Data.OleDb.OleDbConnection();
updateConnection.ConnectionString = @"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=c:\users\spreston\documents\visual studio 2012\Projects\roomChecksProgram\roomChecksProgram\roomsBase.accdb";

updateConnection.Open();

MessageBox.Show("Connected");

string updateCommand = "UPDATE RoomsTable SET Date Checked= '"+9/27/2012+"' ";

updateAdapter = new OleDbDataAdapter(updateCommand, updateConnection);

updateConnection.Close();
updateConnection.Dispose(); 
```

# android - 如何在 Android ContextMenu 中创建条件列表项

> ID：12662650
> 
> 赞同：0
> 
> 时间：2012-09-30T15:56:30.117
> 
> 标签：android, contextmenu

我在 ListView 上有一个上下文菜单。

我想为登录用户添加一个特殊情况的上下文列表项。

假设有一个评论列表。但仅针对登录用户的评论，有一个名为“编辑”的特殊上下文列表项（显然您不希望其他用户能够编辑他们自己之外的评论。

这是我的类扩展应用程序，我通常在其中签入登录用户：

```
public class MyApp extends Application {

    public static boolean isUserLoggedIn = false;
    public static String username = null;
    public static SharedPreferences logInState;
    public static int ratescreen = 0;

    public static boolean userLogin() {

        return MyApp.isUserLoggedIn = true;
    }

    public static boolean userLogout() {

        return MyApp.isUserLoggedIn = false;
    }

    public static void setUser(String s) {

        MyApp.username = s;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        String PREFS_NAME = "LoginState";
        logInState = getSharedPreferences(PREFS_NAME,
                MODE_PRIVATE);
    }

} 
```

这是我的上下文菜单：

```
@Override
        public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo) {

            super.onCreateContextMenu(menu, v, menuInfo);
            MenuInflater inflater = getActivity().getMenuInflater();
            inflater.inflate(R.menu.reviews_context, menu);
            menu.setHeaderTitle("Mark Comment as ...");
        }

        @Override
        public boolean onContextItemSelected(MenuItem item) {

            switch (item.getItemId()) {
            case R.id.helpful:

                new HelpfulTask().execute();

                Toast.makeText(getActivity(), "You have voted this up!",
                        Toast.LENGTH_SHORT).show();

                return true;
            case R.id.unhelpful:

                new UnHelpfulTask().execute();

                Toast.makeText(getActivity(), "You have voted this down!",
                        Toast.LENGTH_SHORT).show();

                return true;

            case R.id.spam:

                new SpamTask().execute();

                Toast.makeText(getActivity(),
                        "You have reported this as Spam or Offensive.",
                        Toast.LENGTH_SHORT).show();

                return true;

                    // Would like to add fourth option here but conditional if it is a comment from the currently logged in user.

            }
            return false;

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T01:49:54.673

简单地添加您的`Edit`项目取决于用户登录状态`onCreateContextMenu`

```
 @Override
        public void onCreateContextMenu(ContextMenu menu, View v,
                ContextMenuInfo menuInfo) {
            // TODO Auto-generated method stub

            super.onCreateContextMenu(menu, v, menuInfo);
    // check if user logged-in so add Edit item to context menu.
            if (userLogin()) {
                menu.add(0, MENU_ITEM_EDIT, 0, R.string.menu_edit);
            }
//Add normall others menu items
            menu.add(0, MENU_ITEM_CALL, 0, R.string.menu_callContact);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:12:17.480

您可以将 ContextMenuInfo 转换为 ListView 的 AdapterView.AdapterContextMenuInfo ，而不是将其内容访问适配器（您自己的实现）。

```
AdapterView.AdapterContextMenuInfo contextMenuInfo = (AdapterView.AdapterContextMenuInfo)menuInfo;
        MyAdapter adapter = (MyAdapter)getListView().getAdapter();
adapter.remove(contextMenuInfo.position); 
```

# forms - 播放 2：将表单绑定到 List[Model] 的惯用方法

> ID：12662653
> 
> 赞同：3
> 
> 时间：2012-09-30T15:56:37.627
> 
> 标签：forms, scala, binding, collections, playframework-2.0

我有几个 CRUD 操作要执行，每个操作都在一组模型上（例如比赛时间表、球队名单、比赛结果、比赛统计等）。

到目前为止，在我的 Play 体验中（仅几个月，1 个项目上线），我一直在使用一对一的表单绑定到模型实例。

我知道我可以对表单字段名称进行数字索引，但是如何将发布的表单绑定到 List[Model]？

这是我的一对一绑定的样子：

```
// abstract away bindFromRequest to make binding more concise in controllers
def bindForm[T](f: play.api.data.Form[T])(implicit r: play.api.mvc.Request[_]) =
  f.bindFromRequest fold(e=> Left(e.errorsAsJson), Right(_)) 
```

然后在控制器中：

```
val result = for {
  model <- bindForm(form).right
  id    <- dao.create(model) as json
} yield id 
```

我想做的是相同的，但不是模型绑定在成功时返回单个模型，而是让它返回一个 List[Model]，并传递给重载的 DAO 创建/编辑/删除操作。

我看到有一种`list`方法可以用作表单映射的一部分，但我感觉这会对我的 JDBC 查询包装器 (ScalaQuery/Slick) 造成严重破坏，其案例类/伴随对象映射可能不会发挥作用很好的集合属性。

例如，游戏时间表的现有映射如下所示：

```
object CompositeForm {
  import play.api.data.{Form, Forms}, Forms._
  import utils.Validator.Bindings.jodaLocalTimeFormat
  val mapper = mapping(
    'id   -> ignored(0),
    'gameDate -> jodaDate,
    'gameType -> optional(text),
    'location -> optional(text),
    'team1    -> number,
    'team2    -> number
  )(Composite.apply)(Composite.unapply)
  val form = Form( mapper )
} 
```

使用`list(gameDate), list(gameType)`instead 意味着表单绑定将返回一个 Composite 实例，其属性都是集合 - 也许它会工作，但看起来不像使用模型实例集合那样干净/直接。

想法赞赏;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:44:44.817

`seq()`@Julien Richard-Foy 在 Play google 小组中向我指出了游戏形式映射中尚未记录的选项

使用`repeat()`and`seq()`一起可以重复表单映射，从而创建索引 foo.bar[n] formfield 元素的集合。

例子

```
object ScheduleForm {
  import play.api.data.{Form, Forms}, Forms._
  val mapper = mapping(
    'composite -> seq(CompositeForm.mapper), 
    'note -> seq(ScheduleNoteForm.mapper)
  )(Schedule.apply)(Schedule.unapply)
  val form = Form( mapper )
} 
```

然后在视图中：

```
@repeat(_form("composite"), min=@numGames) { f=>
    @inputDate(f("gameDate"), '_label-> "Game Date", 'class-> "required")
...
} 
```

# javascript - Node.js：在客户端连接上创建增量监视文件侦听器并分别删除它们

> ID：12662657
> 
> 赞同：2
> 
> 时间：2012-09-30T15:57:10.777
> 
> 标签：javascript, node.js

我目前有一个客户端连接事件，它在触发时会开始观看文件。当第二个客户端连接时，会再次监视相同的文件。（`fs.watchFile()`被使用）

在客户端断开连接事件中，文件未被监视。（`fs.unwatchFile()`使用）因此，如果第一个客户端断开连接，则第二个客户端也不会监视该文件。

我该如何解决这个问题？我尝试使用 and 的侦听器功能，`fs.watchfile`但`fs.unwatchFile()`我不知道如何在客户端连接上以不同的方式命名每个侦听器。

据我所知，创建侦听器是通过分配如下变量来完成的：

```
var listener1 = function (curr, prev) {
  console.log('touched 1');
}); 
```

然后可以监视或不监视侦听器：

```
fs.watchfile('data.log', listener1);
fs.unwatchFile('data.log', listener1); 
```

每次客户端连接时，如何唯一地命名该侦听器？那么我可以*通过侦听*器而不是文件来取消观看文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:24:42.090

创建一个对象，以您用来识别客户端的任何内容为键，其值是各个侦听器：

```
var listeners = {};
...
// When client connects
listeners[clientId] = function(curr, prev) {
...
};
fs.watchfile('data.log', listeners[clientId]);
...
// When client disconnects
fs.unwatchfile('data.log', listeners[clientId]); 
```

作为一般规则，如果您发现自己想要一堆名称相似的变量，每个实例都有一个变量，那么您真正想要的是像数组或对象这样的数据结构。

# hex - 十六进制转储分析器

> ID：12662659
> 
> 赞同：1
> 
> 时间：2012-09-30T15:57:18.440
> 
> 标签：hex

是否有任何工具可以帮助分析未知的十六进制转储（以查找可能的数据类型）。

我拥有的是一个字符串，它是一些十六进制网络数据的转储。网络数据不是常规网络数据，因此wirehsark无法识别。

我需要一个工具来帮助我解析十六进制并细化其中的数据类型。

我确实拥有的十六进制转储可能如下所示： `00 00 00 00 04 B4 FD 43 90 88 BA 44 06 A3 30 C4 00 00 00 00 CE 3B 54 BF 44 27 0F 3F 00 00 00 00 02 00`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:14:16.763

如果您使用的是 Windows，您可能需要查看[010Editor](http://www.sweetscape.com/010editor/)。它支持非常丰富的格式模板语言，并且可以处理非常大的转储。它适用于网络转储和正常的文件逆向工程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T16:38:35.433

您可以尝试将这些 hexdump 转换为常规二进制文件。有一个名为 的工具`xxd`，请参见[http://linuxcommand.org/man_pages/xxd1.html](http://linuxcommand.org/man_pages/xxd1.html)

您还可以使用自定义脚本进行转换。使用 PHP，它可能是：

```
<?php
$in = fopen("input", "rt");
$out = fopen("output", "wb");
while ($line = fgets($in)) {
  foreach (explode(" ", $line) as $number) {
    fwrite($out, chr(hexdec($number)));
  }
} 
```

然后您使用经典的数据恢复工具并扫描这些二进制文件的数据类型：

*   [解剖刀](http://www.irongeek.com/i.php?page=backtrack-r1-man-pages/scalpel)
*   [PhotoRec](http://www.cgsecurity.org/wiki/PhotoRec)（适用于多个平台）
*   [最重要的](http://foremost.sourceforge.net/)

# php - MySQL查找给定长度的所有周期而没有相关记录

> ID：12662667
> 
> 赞同：2
> 
> 时间：2012-09-30T15:58:06.190
> 
> 标签：php, mysql, sql

我正在使用 PHP/MySQL 制作预订系统。

我希望能够选择一个月，选择预订时长，并找出该月内有多少给定时长可用（即未标记为已预订）。

我首先创建了一个天表，每一天都有一个字段指示它是否被保留，以及一个日期。这两个表是：

```
CREATE TABLE `day` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `date` date NOT NULL,
  `booking` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) 

CREATE TABLE `booking` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `start` date DEFAULT NULL,
  `end` date DEFAULT NULL,
  PRIMARY KEY (`id`)
) 
```

到目前为止，我已经能够计算出一个月*中有多少天没有*被预订 - 但这并不一定告诉我是否连续 7 天：

```
SELECT  
    EXTRACT(YEAR FROM date) as year,
    EXTRACT( MONTH FROM date) as month,
    count(day.id)
FROM
    day
WHERE booking IS NULL
GROUP BY year, month 
```

在这一点上，我正在考虑加载给定月份的所有天数，并在 PHP 中遍历它们以弥补我的数字，但这似乎有点愚蠢和低效。有没有人建议我如何直接从 MySQL 中找到这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:47:23.077

假设您希望 2012 年 7 月的范围至少为 7 天，则：

```
SELECT
  DATE_FORMAT(start, '%Y-%m-%d') start,
  MAX(days) AS days,
  DATE_FORMAT(start + INTERVAL MAX(days) - 1 DAY, '%Y-%m-%d') end
FROM (  
  SELECT
    d2.`date` start,
    (@days := IF(IFNULL(d2.booking, 0) = 0, @days + 1, 1)) AS days
  FROM
    (SELECT @days := 1) a,
    day d1
  LEFT JOIN  
    day d2 on d2.`date` = d1.`date` + INTERVAL 1 DAY
  WHERE
    IFNULL(d1.booking, 0) = 0
) d1
GROUP BY
  start
HAVING
  (
    EXTRACT(YEAR_MONTH FROM start) = 201207 OR
    EXTRACT(YEAR_MONTH FROM (start + INTERVAL MAX(days) - 1 DAY)) = 201207
  ) AND
  days >= 7
ORDER BY
  start 
```

将产生这个输出：

```
|      START | DAYS |        END |
----------------------------------
| 2012-06-25 |   13 | 2012-07-07 |
| 2012-06-26 |   12 | 2012-07-07 |
| 2012-06-27 |   11 | 2012-07-07 |
| 2012-06-28 |   10 | 2012-07-07 |
| 2012-06-29 |    9 | 2012-07-07 |
| 2012-06-30 |    8 | 2012-07-07 |
| 2012-07-01 |    7 | 2012-07-07 |
| 2012-07-23 |    8 | 2012-07-30 |
| 2012-07-24 |    7 | 2012-07-30 | 
```

该条款

```
(  
    EXTRACT(YEAR_MONTH FROM start) = 201207 OR
    EXTRACT(YEAR_MONTH FROM (start + INTERVAL MAX(days) - 1 DAY)) = 201207
) 
```

用于包括所有范围，即使范围延伸到上个月或下个月。如果您想要仅在一个月内的范围，请使用：

```
EXTRACT(YEAR_MONTH FROM start) = 201207 AND
EXTRACT(YEAR_MONTH FROM (start + INTERVAL MAX(days) - 1 DAY)) = 201207 
```

有关交互式演示，请参阅[http://sqlfiddle.com/#!2/4e36a/4 。](http://sqlfiddle.com/#!2/4e36a/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:02:07.680

你可以试试这个：

```
SELECT EXTRACT(YEAR_MONTH FROM date) AS year_month, COUNT(*) AS cnt
FROM day
LEFT JOIN booking ON booking.start <= day.date + INTERVAL 6 DAY
                  AND booking.end >= day.date
WHERE booking.start IS NULL
GROUP BY year_month 
```

这个想法是，您正在寻找那些`day`没有与从`booking`那天开始的 7 天范围重叠的行。

# c++ - 应用程序错误 - 调试 exe 无法运行

> ID：12662669
> 
> 赞同：5
> 
> 时间：2012-09-30T15:58:25.920
> 
> 标签：c++, visual-studio-2010, linker, assimp

我最近下载[了 Assimp](http://assimp.sourceforge.net/)，但遇到了一些麻烦。

我已经链接了这些库，我可以让程序编译并且它运行良好`Release mode`；但是，`Debug` `.exe`我遇到了这个错误：

> *应用程序无法正确启动 (0xc0150002)。单击确定关闭应用程序。*

![错误](../Images/b86733783a9dd326fa0400e996470d83.png)

**更多细节：**

*   我正在使用 VS2010，目标机器设置为`x86`.

*   我正在使用`Assimp32d.dll`提供的 32 位调试 dll ()，并且尝试将运行时库设置为`/MT`、`/MTd`、`/MD`，`/MDd`但没有成功。

我从应该在 上运行`Dependency Walker`的其他类似线程中读取`.exe`，但我不确定输出的含义。如果这对你们有帮助，我会把它贴在这里。

> 错误：“c:\users\-----\documents\visual studio 2010\projects\AssimpTest\debug\ASSIMP32D.DLL”的并排配置信息包含错误。应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息 (14001)。错误：未找到至少一个必需的隐式或转发依赖项。错误：由于隐式依赖模块中缺少导出函数，至少一个模块具有未解析的导入。错误：发现具有不同 CPU 类型的模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T13:22:35.273

我没有重建库，而是下载了一组不同的库（它是 SDK 安装程序），并且其中的调试 dll 运行良好。

以防万一有人在使用相同的软件时遇到同样的问题，这是对我有用的安装程序的确切名称：assimp-sdk-3.0-setup.exe

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T15:14:43.673

我在使用 Assimp 3.0 时尝试在调试模式下运行 64 位项目时遇到了同样的问题。

我所做的是去 assimp/workspaces/vc9，在 Visual Studio 10 中打开 assimp.sln，转换项目，然后重建 32 位和 64 位 dll。请注意，您还必须为此安装 boost，并编辑项目属性，使其指向包含的 boost 目录。

可能也有一种使用 CMake 的方法，但我发现整个过程太麻烦了，一开始就麻烦。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T03:13:32.613

我的解决方案只是将调试版本链接到发布的 .dll 文件。没有更多的问题，而且我对调试 Assimp 库也没有兴趣！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-24T14:59:20.137

我遇到了同样的问题，后来我下载了“assimp-sdk-3.0-setup.exe”文件并将其安装为标准的 Windows 应用程序。

我将 Visual Studio Solution Include & Lib 目录指向新安装位置的相应文件夹，将 DLL 复制到我的应用程序位置。问题已解决。希望这可以帮助某人。

干杯。

# java - 带有 ActionBarActivity 的 NoClassDefFoundError Android

> ID：12662673
> 
> 赞同：3
> 
> 时间：2012-09-30T15:58:45.630
> 
> 标签：java, android, android-activity, noclassdeffounderror

我目前有一个`ActionBarActivity`总是返回一个`NoClassDefFoundError`. 我已经读到这可能是 ADT 的问题，但我不能确定，因此我提出了问题。我已经从下面的 Android 示例中导入了 ActionBar 示例

`android-sdk\samples\android-14\ActionBarCompat`

我已将 ActionBarCompat 项目标记为 Project -> Properties 下的库，但我仍然收到错误消息。

重申：

```
public class SearchActivity extends ActionBarActivity { // Doesn't work, yields exception

public class SearchActivity extends Activity { // Works perfectly 
```

有没有其他人遇到过类似的错误，也许找到了解决方案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T06:13:59.570

[http://developer.android.com/tools/support-library/setup.html](http://developer.android.com/tools/support-library/setup.html) “使用资源添加库”部分可能会有所帮助，因为这不在最常见的 v4 支持库中

仅包含 android-support-v4.jar 是不够的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T10:08:11.500

[此链接](http://developer.android.com/tools/support-library/features.html#v7-appcompat) 可能会对您有所帮助。该库位于 /extras/android/support/v7/appcompat/ 目录中。包含在 eclipse 中并添加为库。这将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T05:06:33.297

就在今天早上，谷歌发布了 Android 4.3。他们还更新了允许`ActionBar`在较低版本上实现的支持库。只得延长`ActionBarActivity`。请参阅此处的指南[和](http://developer.android.com/tools/support-library/setup.html)[此处](http://developer.android.com/guide/topics/ui/actionbar.html)的教程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T14:03:13.257

我有同样的问题。我解决了获取 android-support-v7-appcompat.jar 库的问题。

请参阅此处[http://developer.android.com/tools/support-library/setup.html#using-apis](http://developer.android.com/tools/support-library/setup.html#using-apis)如何安装它。

为了简单起见，我建议关注“添加没有资源的库”而不是“添加有资源的库”。

执行此操作时，不要忘记将此库导入到您的 Activity Java 源中。你可以声明 import android.support.v7.app.ActionBarActivity;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T13:23:05.793

最终改用 ActionBarSherlock 并在项目属性下以及构建路径中添加了项目引用。似乎已经修复了与我的问题有关的所有错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-22T13:09:02.107

我这样解决了这个问题，当你添加库时，确保它没有 android-support-v4 （在库的 libs 文件夹中，取消检查 android 依赖项和 android-support-v4），这是如果您的项目已经具有 android-support-v4，这就是您找不到课程的原因`ActionBarActivity`

# python - 编写 GIMP python 脚本

> ID：12662676
> 
> 赞同：14
> 
> 时间：2012-09-30T15:59:10.153
> 
> 标签：python, subprocess, gimp, python-fu, gimpfu

我想要做的是从一个python程序（也许是subprocess.Popen）打开gimp，同时，gimp将从一个python脚本开始，该脚本将打开一个图像并添加一个层......好吧，如何我能做到吗（我希望 GIMP 有更好的文档……）？

**更新：**

我这样做了：`subprocess.Popen(["gimp", "--batch-interpreter" , "python-fu-eval" , "-b" ,"\'import sys; sys.path.append(\"/home/antoni4040\"); import gimpp; from gimpfu import *; gimpp.main()\'"])`，但是，即使控制台说“批处理命令执行成功”，也没有任何反应......

**更新2：**

```
from gimpfu import *

def gimpp():
    g = gimp.pdb
    images = gimp.image_list() 
    my_image = images[0]
    layers = my_image.layers
    new_image = g.gimp_file_load_layer("/home/antoni4040/Έγγραφα/Layout.png")
    my_image.add_layer(new_image)
    new_layer = g.gimp_layers_new(my_image,  1024, 1024, RGBA_IMAGE, "PaintHere", 0, NORMAL_MODE)
    my_image.add_layer(new_layer)

register('GimpSync', "Sync Gimp with Blender", "", "", "", "", "<Image>/SyncWithBlender", '*', [], [], gimpp)

main() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-30T18:22:30.720

好的，我终于让它工作了。我使用[GIMP Python 脚本](http://www.gimp.org/docs/python/index.html)创建了一个 gimp 插件，它可以做很多事情，包括你提到的图层。然后，您可以从命令行运行 gimp，将参数传递给 python gimp 脚本。文章[Using Python-Fu in Gimp Batch Mode](http://www.exp-media.com/content/extending-gimp-python-python-fu-plugins-part-4)是学习如何从命令行调用 gimp 插件的绝佳资源。下面的示例将指定图像加载到 gimp 中，水平翻转，保存并退出 gimp。

flip.py 是 gimp 插件，应该放在你的插件目录中，在我的例子中是 ~/.gimp-2.6/plug-ins/flip.py。

**翻转.py**

```
from gimpfu import pdb, main, register, PF_STRING
from gimpenums import ORIENTATION_HORIZONTAL

def flip(file):
    image = pdb.gimp_file_load(file, file)
    drawable = pdb.gimp_image_get_active_layer(image)
    pdb.gimp_image_flip(image, ORIENTATION_HORIZONTAL)
    pdb.gimp_file_save(image, drawable, file, file)
    pdb.gimp_image_delete(image)

args = [(PF_STRING, 'file', 'GlobPattern', '*.*')]
register('python-flip', '', '', '', '', '', '', '', args, [], flip)

main() 
```

从终端可以运行这个：

```
gimp -i -b '(python-flip RUN-NONINTERACTIVE "/tmp/test.jpg")' -b '(gimp-quit 0)' 
```

或从 Windows cmd：

```
gimp-console.exe -i -b "(python-flip RUN-NONINTERACTIVE """<test.jpg>""")" -b "(gimp-quit 0)" 
```

或者您可以使用以下命令从 python 脚本运行相同的命令：

```
from subprocess import check_output
cmd = '(python-flip RUN-NONINTERACTIVE "/tmp/test.jpg")'
output = check_output(['/usr/bin/gimp', '-i', '-b', cmd, '-b', '(gimp-quit 0)'])
print output 
```

我测试了两者以确保它们工作。您应该会在每个脚本运行后看到图像翻转。

# javascript - Opa流控制，线程？

> ID：12662677
> 
> 赞同：1
> 
> 时间：2012-09-30T15:59:11.860
> 
> 标签：javascript, multithreading, node.js, asynchronous, opa

Node.js 本身支持工作线程和子进程的创建。使用过 Node.js 的人可能熟悉 Async.js 或 Step 等流控制库。

现在由于 Opa 在 Node.js 堆栈上运行，有没有办法将 Async.js 库用作 javascript 模块？

Opa 语言是否有任何绑定以允许线程或某种异步流控制？我怀疑不是，但我很好奇**在 Opa 中实现线程或异步流控制的可能选项是什么**？

*现在我知道我可以用非 Opa 语言完成并将我的工作转交给另一个脚本，但这是我唯一的选择吗？

在此先感谢，因为我是 Opa 的新手，并且正在尝试了解它的功能！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T09:19:31.323

Opa 编译器自动将您的代码重写为异步 Javascript 代码。

这是 Opa 的特性之一，你不应该关心线程管理，它默认由编译器处理。

此外，Opa 提供了一些并发原语来访问其控制流。

```
@callcc : continuation('a) -> 'a
@spawn : 'a -> Cps.future('a)
@wait : Cps.future('a) -> 'a 
```

Where`@callcc`允许访问当前的延续。这是一个使用示例，从异步函数构建了一个同步函数：

```
function ('a -> 'b) to_sync(('a, ('b -> void) -> void) fasync){
    function (a){
        @callcc(function(k){
           fasync(a, Continuation.return(k, _))
        })
    }
} 
```

并`@spawn`在另一个“线程”上启动一个值的计算。并`@wait`用于获取生成的值。作为伪示例：

```
function example(){
    future = @spawn(
        x = fibo(30); 
        jlog("End of spawn computation {x}");  
        {result : x}
    )
    // ...
    jlog("do something before wait")   
    result = @wait(future).result
    jlog("the result is [resulr}")
}

//Output of example is :
// do something before wait
// the result is 832040 
```

[您还可以使用模块](http://doc.opalang.org/module/stdlib.core.rpc.core/Scheduler)访问调度原语`Scheduler`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T19:39:00.330

Opa 内置了对异步服务器调用的支持。不幸的是，目前没有很好的记录。但请考虑：

```
@async server function my_async_function() {
  Scheduler.wait(2000);
  #done = "async function done!"
}

function clicked() {
  my_async_function();
  #clicked = "you clicked me!"
}

function go() {
  Resource.page("hello", (
    <>
     <p>click this button:</p>
     <button onclick={function(_) { clicked() }}>
      clickme</button>
     <div id=#clicked/>
     <div id=#done/>
    </>
  ))
}

Uri.relative -> resource function start(uri) {
  match (uri.path) {
    | _ : go()
  }
}

Server.start(Server.http,
  { dispatch: start }
) 
```

（这与[这个邮件列表线程](https://lists.owasp.org/pipermail/opa/2012-January/000658.html)中的示例类似，但对当前默认的 Opa 语法进行了一些简化和更新。）

# c - 计算 C 中的表达式（例如 1+2.5*3）

> ID：12662681
> 
> 赞同：1
> 
> 时间：2012-09-30T15:59:48.010
> 
> 标签：c

[这是我在按照本书](https://rads.stackoverflow.com/amzn/click/com/0393979504)学习 c 编程时遇到的一个问题。

```
Enter an expression : 1+2.5*3
Output: 10.5 
```

这是我到目前为止想出的。 **编辑**

```
#include<stdio.h>

int main (void)

{
char c;

float f1=0.0f,f2=0.0f;

c = getchar();
while(c != '\n')

{

  if(c!='+' && c!='-' && c!='*' && c!='/')
      {
          if (f1 == 0.0f)
          {
              f1 = c - '0';
              c = getchar();
          }
          else
          {
              f2 = c - '0';
              c = getchar();
          }

      }

 switch (c)
      {
          case '+': c = getchar(); f2 = c - '0' ; f1 = f1+f2; break;
          case '-': c = getchar(); f2 = c - '0' ; f1 = f1-f2; break;
          case '*': c = getchar(); f2 = c - '0' ; f1 = f1*f2; break;
          case '/': c = getchar(); f2 = c - '0' ; f1 = f1/f2; break;
         // case '.':
          default: break;
      }

 c = getchar();

 }
 printf("\n Value of the expression: %.2f", f1);
 return 0;
 } 
```

该代码仅在假设所有操作数都是一位数字时被暗示。我如何为**多个数字/浮点数隐含它？**我应该采取什么方法来解决这个问题。

我没有教练可以咨询（自学和第 7 章），我被困在这几个小时。所以任何帮助都将不胜感激。

谢谢你

注意

有人提到了 atoi() ...但我正在寻找其他东西/手册

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:01:38.480

```
f2 = c; // this will convert ascii charecter value of c into f2\. 
         // How do i convert the character '2' into the digit 2 ? 
```

这边走：

```
f2 = c - '0'; 
```

保证字符`'0'`在`'9'`C 中具有顺序值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:30:23.580

如果您在“C”中工作，要将“数字”的文本表示形式转换为实际数字 - 无论长度如何 - 使用 atoi() 之类的东西。仅转换一个字符时可能出现的“快捷方式”不可扩展或推广，最终必须删除。另一方面，使用 atoi() 之类的东西，您可以从单字符数字移动到多字符数字，而无需更改任何代码。

atoi() 系统库代码已经存在了几十年，并且完全处理所有边缘情况（负零有人吗？）；尝试自己滚动需要付出巨大的努力才能产生同样清晰的结果。

# .net - 连接池是 ODP.NET 中的必备工具吗？

> ID：12662686
> 
> 赞同：1
> 
> 时间：2012-09-30T16:00:22.453
> 
> 标签：.net, oracle, odp.net

我正在编写一个夜间作业，使用 ODP.NET 将数据从 SQL Server 移动到 Oracle。

我们使用大约 100 个连接对象（与数据无关），并且我们预计单次运行中传输的行数不会超过 1500 行（总共）。我读过的 ODP.NET 笔记和资料从不谈论保持连接池关闭。

在开发中，我关闭了连接池，它工作正常。

在给定的场景中是否建议关闭连接池，（假设所有连接在使用后都正确处理），因为：

1.  这是一项夜间工作，Oracle 服务器上不会有太多负载。

2.  连接池可能会返回陈旧的连接，需要对其进行验证设置/异常处理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T22:01:24.197

池化的唯一原因是性能，因此如果您的夜间作业在它的窗口内运行，那么您所做的事情并没有错，特别是因为它不必担心死连接，从而使您的实现变得简单。

也就是说，我不会做这个标准的做法。我很少编写代码来处理陈旧的连接，即使那样它也是一个简单的工厂。问题从为什么你有过时的连接开始？通常，这与终止空闲连接的防火墙或 DBA 作业有关，对于应用程序帐户，这两者都应更改或放宽。即使在这种情况下，您也可以执行以下操作：

*   在连接字符串中指定 Min Pool Size=0。这样做可以让 ODP.net 清理您的应用程序的最后一个连接，让您的应用程序在空闲足够长的时间后完全断开连接。
*   在连接字符串中指定更高的 Decr 池大小。这将允许 ODP.net 每 3 分钟关闭更多空闲连接。
*   您可以尝试设置 Validate Connection = true - 我的猜测是验证连接的开销比打开连接的开销要少。

更多信息可以在这里找到：http: [//docs.oracle.com/cd/E15296_01/doc.111/e15167/featConnecting.htm#i1006228](http://docs.oracle.com/cd/E15296_01/doc.111/e15167/featConnecting.htm#i1006228)

# c++ - C++11 lambda 表达式末尾的括号

> ID：12662688
> 
> 赞同：7
> 
> 时间：2012-09-30T16:00:25.987
> 
> 标签：c++, lambda, c++11, parentheses

我对使用 C++11 lambda 时遇到的一些示例感到困惑。例如：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{ 
        cout << []()->string{return "Hello World 1!";}() << endl;

        []{cout << "Hello World 2!" << endl;}();

        string result = [](const string& str)->string {return "Hello World " + str;}("2!");
        cout << "Result: " << result << endl;

        result = [](const string& str){return "Hello World " + str;}("3!");
        cout << "Result: " << result << endl;

        string s;
        [&s](){s = "Hello World 4!";};   // does not work
        cout << s << endl; 
        [&s](){s = "Hello World 4!";}(); // works!
        cout << s << endl;

        return 0;
} 
```

我无法弄清楚最后的括号在做什么。他们是否作为构造函数实例化了一个 lambda？鉴于 lambda 的模板是：

```
[capture_block](parameters) mutable exception_specification -> return_type {body} 
```

让我感到困惑的是，这些实例需要这些括号才能工作。有人可以解释为什么需要它们吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T16:05:11.907

好吧，鉴于 lambda 表达式基本上是一个匿名函数，最后的括号只是调用这个函数而已。所以

```
result = [](const string& str){return "Hello World " + str;}("3!"); 
```

就相当于

```
auto lambda = [](const string& str){return "Hello World " + str;};
string result = lambda("3!"); 
```

这对于没有参数的 lambda 也是一样的，比如

```
cout << []()->string{return "Hello World 1!";}() << endl; 
```

否则（如果不调用）会尝试输出一个 lambda 表达式，它本身不起作用。通过调用它，它只会输出结果`std::string`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-30T16:05:23.657

他们正在调用函数对象！

分两个阶段：

```
auto l = []()->string{return "Hello World 1!";}; // make a named object
l(); // call it 
```

一个 lambda 表达式的计算结果是一个函数对象。由于没有`operator<<`采用这样一个函数对象的重载，因此如果您没有调用它来生成一个`std::string`.

# unit-testing - 如何在 Visual Studio 2012 RC 中创建单元测试项目

> ID：12662690
> 
> 赞同：-1
> 
> 时间：2012-09-30T16:00:37.080
> 
> 标签：unit-testing, visual-studio-2012

我有一个项目，现在我想为它创建新的单元测试项目。但我不知道如何做到这一点。我已经将新的测试项目添加到解决方案中，如何将此测试项目指向我的目标。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T00:04:55.997

您执行此操作的方式与添加对任何其他项目的引用相同...

添加一个新的测试项目，然后通过单击 References 文件夹并选择 Add Reference 添加对现有项目的引用

# php - 存储过程两次返回结果

> ID：12662694
> 
> 赞同：1
> 
> 时间：2012-09-30T16:01:13.463
> 
> 标签：php, sql-server, stored-procedures

我正在尝试使用存储过程从我的数据库中查询一些数据，但我为每个字段获得了两次结果。

存储过程如下所示（创建代码）：

```
PROCEDURE [dbo].[msp_Query_Information]
@category_id tinyint
AS
BEGIN
        SET NOCOUNT ON;
        SELECT  ,[Name]
                ,[Status_ID]
                ,CONVERT(char(19), [Update_Time], 120)
                ,[Max_Value]
                ,[Current_Value]
        FROM [dbo].[MyTable]
        WHERE [Category_ID] = @category_id
END 
```

我正在使用以下 PHP 调用存储过程（减去错误检查和调试代码）：

```
<?php
    //define db connection
    $serverName = '(local)';
    $connectionInfo = array("Database"=>"MyDatabase");

    //connect to database
    $dbConn = sqlsrv_connect($serverName, $connectionInfo);

    //execute procedure to query servers status
    $spSql = "{call [dbo].[msp_Query_Information](?)}";
    $id = 2;
    $params = array($id);

    $result = sqlsrv_query($dbConn, $spSql, $params);

    //show results
    while ($row = sqlsrv_fetch_array($result))
    {
        foreach ($row as $key => $value) 
        {
            echo $value.'<br/>';
        }
    }

    //close connection to database
    $closeConn = sqlsrv_close($dbConn);

    echo '<br/>Database connection closed.';
?> 
```

这些是我得到的结果：

```
TEST
TEST
2
2
2012-09-30 16:03:00
2012-09-30 16:03:00
200
200
0
0 
```

MyTable 中只有一条记录，Category_ID 设置为 2。所有数据都是正确的，我只是获取了两次。

我在这里做错了吗？

这是一种正常的行为，我只是一个新手，不知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:15:52.363

修改**[fetchType](http://php.net/manual/en/function.sqlsrv-fetch-array.php)**：

```
while ($row = sqlsrv_fetch_array($result, SQLSRV_FETCH_ASSOC )) 
```

引用文档：

> 一个预定义的常量，指定要返回的数组类型。可能的值为 SQLSRV_FETCH_ASSOC、SQLSRV_FETCH_NUMERIC 和 SQLSRV_FETCH_BOTH（默认值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:13:43.953

尝试按照此处所述重写您的代码：http: [//php.net/manual/en/function.sqlsrv-fetch-array.php](http://php.net/manual/en/function.sqlsrv-fetch-array.php)

# tfs - 使用 FTP 设置 TFS？

> ID：12662698
> 
> 赞同：0
> 
> 时间：2012-09-30T16:01:44.047
> 
> 标签：tfs

> **可能重复：**
> [如何通过 Internet 连接 TFS](https://stackoverflow.com/questions/9555349/how-to-connect-tfs-through-internet)

我有一个我一直在做的项目，我想对其进行源代码控制，以便我的朋友可以加入并与我一起工作。我从来没有做过任何类型的 Windows 服务器管理，所以这让我很困惑。

我们有一个托管我们网站的服务器，我可以在该服务器上创建一个目录并在那里托管项目构建吗？如果是这样，我该如何设置？

我应该在该服务器上安装一个 TFS 实例，还是可以只在该服务器上的目录中托管项目构建而不在其上安装任何东西？

我正在寻找一种简单而安全的方式来与我的朋友一起开展该项目。我以前使用过 TFS，所以我知道如何连接到 tfs 服务器等，但如何设置它超出了我的范围。任何人都可以用外行的方式告诉我如何进行此设置，我是一个服务器新手。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T02:03:29.803

TFS 需要使用专用服务器，它不是您可以（应该）添加到生产网络服务器的东西，而且它比为它创建一个文件夹要复杂得多。

如果你真的需要它在你的网络主机上运行，​​那么看看像 GIT 这样的东西，我相信你可以做到（http://stackoverflow.com/questions/51619/how-to-setup-git-bare-http- available-repository-on-iis-machine) - 注意我没有这方面的经验。

如果您真的想要 TFS，那么我建议您使用 TFSPreview.com 并让 Microsoft 为您托管它。与 git 相比的优势在于你有一个集成的工作项存储库和构建服务器，如果你想要 Git 的这些功能，你需要研究另一个软件（cruise control.net 等），它也不会在网络服务器，因此您无论如何都需要获得服务器或在线服务。

# ios - 在 StoryBoard 中重新排列选项卡栏控制器顺序

> ID：12662700
> 
> 赞同：181
> 
> 时间：2012-09-30T16:01:58.077
> 
> 标签：ios, xcode

在我的应用 iPhone 应用中，我有一个标签栏控制器，它与 4 个不同的表视图控制器有 4 个关系。有没有办法以图形方式重新排列 StoryBoard 中的关系顺序？我找不到办法做到这一点，我敢肯定我一定错过了一些东西！

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-11-10T12:28:37.723

在 4.5 添加控制器后保存情节提要，切换到另一个文件，然后返回情节提要，选项卡拖动应该再次起作用。

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2014-01-02T19:54:24.033

您可以通过拖放标签栏控制器中的图标来重新排列顺序

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2018-10-08T22:21:12.813

**SHIFT + DRAG**适用于 Xcode 10.0

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-02-04T21:07:26.953

我无法使用 XCode 4.6 拖放（使用任何提到的组合）。我已经解决了它以“**源代码**”模式打开故事板，找到**tabBarController**并重新排列**序列**标签。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-02-19T14:22:39.477

我知道 OP 正在使用 Xcode 界面生成器并要求以图形方式执行此操作，但是对于使用 Xamarin iOS Designer 的开发人员，这是我使用的一种解决方法。

在文本编辑器或使用 Xcode 中打开 .storyboard 文件，右键单击 Project Navigator 中的故事板项目并选择*Open As* Source Code。在情节提要 XML 中找到该`<tabBarController ...>`节点。然后我重新排列该`<connections>`部分中segues的顺序：

```
<connections>
    <segue destination="274" kind="relationship" relationship="viewControllers" id="286"/>
    <segue id="943" destination="910" kind="relationship" relationship="viewControllers"/>
    <segue destination="147" kind="relationship" relationship="viewControllers" id="159"/>
</connections> 
```

在 XML 中搜索`destination=`属性值以确定 segue 元素指向的视图控制器。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2019-02-05T18:34:09.693

XCODE 10.1：缩放故事板。只需拖动选项卡项目。（没有班次没有其他）

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2012-09-30T16:06:59.643

只需在标签栏中拖放标签图标即可。

即属于标签栏控制器的主标签栏。

高温高压

::EDIT:: 所以这似乎不起作用......我敢肯定它曾经。

无论如何，我发现的最简单的方法是删除选项卡并按照您希望它们显示的顺序添加它们。

希望这可以帮助。

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2012-10-11T16:22:29.697

As noted in comments, drag & drop doesn't currently work (Xcode 4.5) after adding a navigation controller. However, **restarting Xcode** after adding the controller seems to get drag & drop working again.

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2013-02-13T18:38:16.833

如果您将情节提要作为“源代码视图”打开，然后将其关闭并作为 IB 视图打开，它似乎可以修复错误。

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2016-06-01T04:55:44.617

添加到每个人提供的拖放方法。我将此作为答案发布，以便我可以包含图像。在 Xcode 7.3 上试过

如果您使用 custom `tab bar item`，即使场景显示灰色条，您仍然可以拖放以重新排序`Tab Bar Controller`，条项仍然存在。当您的所有栏项都是自定义项时，这一点尤其不显眼

[![在此处输入图像描述](../Images/717525044142d7905d7308d9b797a244.png)](https://i.stack.imgur.com/odw8g.png) [![描述](../Images/0e2262e072af90bb7666ffca443d379d.png)](https://i.stack.imgur.com/xEkVd.png)

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-04-25T04:11:59.757

我正在使用 XCode 5.1 开发 iOS 7.1，我发现以下方法适用于重新排列选项卡栏控制器中的选项卡。

要重新排列选项卡栏控制器中的选项卡，请删除选项卡栏控制器到子视图控制器的转接。然后按照您想要标签的顺序重新绘制segues。要“重新绘制”，我的意思是您控制从选项卡栏控制器到子视图控制器的拖动，并选择关系 Segue（在列表底部）=> 视图控制器。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-07-26T14:52:18.563

添加导航控制器后我遇到了同样的问题。

修复：关闭情节提要 (Ctrl+Cmd+W) 并执行清理构建文件夹 (Option+Cmd+Shift+K) 和常规清理 (Cmd+Shift+K)。重新打开情节提要，您将能够再次拖动项目。

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2013-06-23T12:17:25.340

您可以确保主情节提要中的 Tab Controller Dock 选项设置为“First Responder”，这为我解决了这个问题！

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2021-03-15T16:19:40.130

您可以将标签栏项目拖放到您想要的位置，如下图所示

[![在此处输入图像描述](../Images/9f1710b23e2d32be8d3f35c79a5027bc.png)](https://i.stack.imgur.com/wgchL.png)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2013-03-28T21:21:36.030

在 xCode 4.6 中也是如此。我最初是在关注关于[在 ios 中开始故事板的](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)教程 在 切换 TabBarController 上的项目时，我无法更改顺序。我试图保存它 - 没有用；但是，一旦我关闭 XCode 并再次打开 - 它确实有效。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-04-22T10:39:19.887

Control + 拖动 Storyboard 中 TabBarController 中的项目并重新排列到所需位置。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2013-04-17T22:44:42.760

我也在关注故事板的 raywenderlich 教程，并意识到在添加选项卡控制器后，我无法通过拖动来重新排列选项卡。好吧，显然它只是xcode中的一些错误。所以只需退出 xcode，重新启动它，这一次，您将能够拖动选项卡。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-12-04T13:17:24.980

删除所有带有标签栏的视图控制器。您首先需要先查看控制器，然后再将另一个视图控制器与标签栏连接。

无需重新启动 xcode，也无需更改明确的源代码文件。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-08-12T09:12:48.800

对我来说，拖动在 XCode 7.3.1 中也不起作用。重新启动 XCode 没有帮助。上面提到的解决方案都不适合我。

什么帮助了我：我删除了与第二个项目的关系，并从该项目 ctrl 拖动到选项卡栏控制器并创建了另一个关系。它现在自动排在第二位。

# actionscript-3 - AS3，闪存 - 错误

> ID：12662701
> 
> 赞同：0
> 
> 时间：2012-09-30T16:02:00.630
> 
> 标签：actionscript-3, flash

之后，我让我的 AS3 向我的 PHP 发送变量，我收到以下错误：

```
Error: Error #2101: The String passed to URLVariables.decode() must be a URL-encoded query     string containing name/value pairs.
    at Error$/throwError()
    at flash.net::URLVariables/decode()
    at flash.net::URLVariables()
    at flash.net::URLLoader/onComplete()
Cannot display source code at this location. 
```

知道该怎么做吗？仅当我直接从闪存文件运行它时才会发生这种情况？

这是因为我在我的机器上使用 localhost 来执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:20:11.640

这通常意味着从 PHP 传回的信息（到您的 onComplete 处理程序函数）没有以名称/值对格式设置。

例如名称=标记

如果您打算让 PHP 传回名称/值对，则应将 URLLoader 设置为：

```
yourLoaderName.dataFormat = URLLoaderDataFormat.VARIABLES; 
```

或者如果响应不是名称/值对：

```
yourLoaderName.dataFormat = URLLoaderDataFormat.TEXT; 
```

# c# - 为什么我的 ModelState.IsValid 在 Asp.Net MVC4 中不返回 true？

> ID：12662705
> 
> 赞同：4
> 
> 时间：2012-09-30T16:02:50.667
> 
> 标签：c#, .net, asp.net-mvc

我有一个看起来像的控制器；

```
[HttpPost]
[Authorize(Roles = "Admin")]
public ActionResult ProjectAdd(PortfolioViewModel model, int[] categories, HttpPostedFileBase thumbnail, HttpPostedFileBase image)
{
    model.ProjectImage = System.IO.Path.GetFileName(image.FileName);
    model.ProjectThubmnail = System.IO.Path.GetFileName(thumbnail.FileName);
    using (PortfolioManager pm = new PortfolioManager())
    {
        using (CategoryManager cm = new CategoryManager())
        {
            if (ModelState.IsValid)
            {
                bool status = pm.AddNewProject(model, categories);
            }
            ViewBag.Categories = cm.GetAllCategories();
            ViewBag.ProjectsList = pm.GetAllProjects();
        }
    }
    return View(model);
} 
```

我的观点是；

```
@using (Html.BeginForm("projectAdd", "home", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Add New Project</legend>

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjectHeading)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjectHeading)
            @Html.ValidationMessageFor(model => model.ProjectHeading)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjecctUrl)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjecctUrl)
            @Html.ValidationMessageFor(model => model.ProjecctUrl)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.ProjectLongDescription)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProjectLongDescription)
            @Html.ValidationMessageFor(model => model.ProjectLongDescription)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.PromoFront)
        </div>
        @Html.EditorFor(model => model.PromoFront)
        @Html.ValidationMessageFor(model => model.PromoFront)

        <div class="editor-label">
            <label for="thumbnail">Thumbnail</label>
        </div>
        <div class="editor-field">
            <input type="file" name="thumbnail" id="thumbnail" /> 
        </div>
        <div class="editor-label">
            <label for="image">Image</label>
        </div>
        <div class="editor-field">
            <input type="file" name="image" id="image" /> 
        </div>
        <div class="editor-label">
            <label for="categories">Categories</label>
        </div>
        @foreach (var c in categories)
        {
            <input type="checkbox" name="categories" value="@c.CategoryId">
            @c.CategoryName
        }
        <p>
            <input type="submit" value="Create" class="submit" />
        </p>
    </fieldset>
} 
```

当我尝试这段代码时，该`ModeState.IsValid`属性变为假（我通过调试看到了）。但是，当我删除时`ModeState.IsValid`，插入成功完成，一切都完全符合我的要求。
我需要 ModeState.IsValid 属性来验证我的视图。
**更新：我的视图模型是；**

```
[Key]
public int ProjectId { get; set; }
[Required(ErrorMessage="Please enter project heading")]
public string ProjectHeading { get; set; }
[Required(ErrorMessage = "Please enter project Url")]
public string ProjecctUrl { get; set; }
[Required(ErrorMessage = "Please enter project description")]
public string ProjectLongDescription { get; set; }
public string ProjectShortDescription
{
    get
    {
        var text = ProjectLongDescription;
        if (text.Length > ApplicationConfiguration.ProjectShortDescriptionLength)
        {
            text = text.Remove(ApplicationConfiguration.ProjectShortDescriptionLength);
            text += "...";
        }
        return text;
    }
}
public bool PromoFront { get; set; }
[Required(ErrorMessage = "You must sepcify a thumbnail")]
public string ProjectThubmnail { get; set; }
[Required(ErrorMessage = "You must select an image")]
public string ProjectImage { get; set; }
public int CategoryId { get; set; }
public IEnumerable<Category> Categories { get; set; } 
```

**更新2：**我发现了错误。问题是

```
{System.InvalidOperationException: The parameter conversion from type 'System.String' to type 'PortfolioMVC4.Models.Category' failed because no type converter can convert between these types.
   at System.Web.Mvc.ValueProviderResult.ConvertSimpleType(CultureInfo culture, Object value, Type destinationType)
   at System.Web.Mvc.ValueProviderResult.UnwrapPossibleArrayType(CultureInfo culture, Object value, Type destinationType)
   at System.Web.Mvc.ValueProviderResult.ConvertTo(Type type, CultureInfo culture)
   at System.Web.Mvc.DefaultModelBinder.ConvertProviderResult(ModelStateDictionary modelState, String modelStateKey, ValueProviderResult valueProviderResult, Type destinationType)} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T16:19:48.160

在调试时，检查`ModelState`错误。它是一个键/值字典，包含使模型有效所需的所有属性。如果您检查`Values`-property，您可以找到`Errors`-list 不为空的值并查看错误是什么。

![ModelState 错误示例](../Images/f8e3a5ba92a91916b2faa075009aa95c.png)

或者在 action 方法中添加这行代码来获取模型的所有错误：

```
var errors = ModelState.Where(v => v.Value.Errors.Any()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T16:31:34.833

您应该将您的`categories`操作参数重命名为其他名称，因为您的`PortfolioViewModel`模型已经有一个名为的属性`Categories`，它的类型完全不同，并且会混淆模型绑定器：

```
[HttpPost]
[Authorize(Roles = "Admin")]
public ActionResult ProjectAdd(
    PortfolioViewModel model, 
    int[] categoryIds, 
    HttpPostedFileBase thumbnail, 
    HttpPostedFileBase image
)
{
    ...
} 
```

现在显然您还必须更新您的视图以匹配复选框名称。

虽然这可能会解决您的问题，但我强烈建议您使用视图模型并停止将域模型传递给视图。

# sprockets - 中间人链轮指纹

> ID：12662707
> 
> 赞同：2
> 
> 时间：2012-09-30T16:03:10.443
> 
> 标签：sprockets, middleman

我正在使用带链轮的中间人将我的 js 和 css 文件打包到一个文件中。这工作正常。但我想知道是否可以从中间人的链轮中启用指纹功能。

例如，我的文件`all.js`，其中所有内容都被编译，被重命名为`all-4e17d33ff76d744900c2691a71ed83e4.js`.

如果图像可以做到这一点，那也很棒。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-10T21:28:12.610

利用

```
activate :asset_hash 
```

在您的中间人配置中（[提高可缓存性](http://middlemanapp.com/advanced/improving-cacheability/)）。

（您需要使用**其中一个** `:asset_hash`或 `:cache_buster`，而不是两者。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-21T08:26:10.710

我还没有找到开箱即用的解决方案，但我制定了自己的解决方案。在`config.rb`我正在运行的`after_build`钩子。不是最好的方法，但它有效：

```
after_build do
  require 'fileutils'
  delete_except "build/javascripts/", "all.js"
  delete_except "build/stylesheets/", "all.css"

  require 'digest/sha1'
  sha1 = Digest::SHA1.hexdigest Time.now.getutc.to_i.to_s
  allJS = "all-" + sha1 + ".js"
  allCSS = "all-" + sha1 + ".css"
  File.rename("build/javascripts/all.js", "build/javascripts/" + allJS)
  File.rename("build/stylesheets/all.css", "build/stylesheets/" + allCSS)

  index_file = "build/index.html"
  html = File.read(index_file)
  html = html.gsub(/all\.js/, allJS)
  html = html.gsub(/all\.css/, allCSS)

  File.open(index_file, "w") { |file| file.puts html }
end 
```

我正在执行以下操作：

*   删除不必要的生成 .js 和 .css 文件
*   根据时间生成一个 sha1 哈希（这对我来说已经足够了）
*   将哈希附加到文件
*   `index.html`用新的文件名更新

# android - 将安卓手机用作触摸板时出现延迟

> ID：12662709
> 
> 赞同：2
> 
> 时间：2012-09-30T16:03:20.270
> 
> 标签：android

我制作了一个应用程序，可以将安卓手机用作触摸板。它按应有的方式正常工作。但唯一困扰我的是有滞后。笔记本电脑上的鼠标有时会滞后，即与 android 上的触摸不完全同步。

我能想到滞后的唯一原因是用于计算下一个坐标的逻辑。

这是发送触摸事件坐标的Android应用程序代码：（t是TextView）

```
t.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            if(event.getAction()==MotionEvent.ACTION_DOWN){
                startX = event.getX();
                startY = event.getY();
            }

            if(event.getAction() == MotionEvent.ACTION_MOVE)
            {

            out.println("X:"+(event.getX()-startX)+"Y:"+(event.getY()-startY));
                startX=event.getX();
                startY=event.getY();
            }

            return true;
        }
    }); 
```

我使用的逻辑是我发送坐标的差异。在 serverside ，发生的基本事情是（'in' 是 BufferedReader ）：

```
PointerInfo a = MouseInfo.getPointerInfo();
 Point b = a.getLocation();
 currX = (int)b.getX();
 currY=(int)b.getY();
    while ((inputLine = in.readLine()) != null) {
         if(inputLine.equals("LeftClick"))
         {
            robot.mousePress(InputEvent.BUTTON1_MASK);
            robot.mouseRelease(InputEvent.BUTTON1_MASK);

          }
          else if(inputLine.equals("RightClick")){
            robot.mousePress(InputEvent.BUTTON3_MASK);
           robot.mouseRelease(InputEvent.BUTTON3_MASK);

          }
          else{
              outputLine = kkp.processInput(inputLine);
    //To break the string into X cordi and Y cordi.
           yloc = inputLine.indexOf("Y");
             float xcord = Float.parseFloat(inputLine.substring(2,yloc));   
                 float ycord = Float.parseFloat(inputLine.substring(yloc+2));

                 robot.mouseMove(currX+Math.round(xcord),currY+Math.round(ycord)); 
                 currX+=Math.round(xcord);
                 currY+=Math.round(ycord);
               }
 } 
```

延迟是否正常，无法改善。或者可以通过更改上述代码中的计算来改进。PS：我没有使用 UDP。

# backbone.js - 嵌套 Marionette 区域、布局和视图

> ID：12662712
> 
> 赞同：9
> 
> 时间：2012-09-30T16:04:06.187
> 
> 标签：backbone.js, marionette

我试图让我的 Marionette 视图与应用程序区域和布局结合使用，但我似乎无法让布局中的嵌套视图呈现。

**编辑：**我希望`OptionsView`和都在`BreadcrumbsView`中呈现`NavigationLayout`，应该在导航区域中呈现。但是，导航区域根本不会呈现。控制台不显示任何错误。

我的结构如下：

```
- Navigation region
  - Navigation layout
    - Options region 
    - Breadcrumbs region
- Content region 
```

将 an 分配`ItemView`给导航区域按预期工作。

```
App = new Backbone.Marionette.Application();
App.addRegions({
    'nav': '#nav',
    'content': '#content'
});

var NavigationLayout = Backbone.Marionette.Layout.extend({
    template: '#nav-template',
    regions: {
        'breadcrumbs': '#breadcrumbs',
        'options': '#options'
    }
});

var BreadcrumbsView = Backbone.Marionette.ItemView.extend({
    template: '#breadcrumbs-template'
});

var OptionsView = Backbone.Marionette.ItemView.extend({
    template: '#options-template'
});

var ContentView = Backbone.Marionette.ItemView.extend({
    template: '#content-template'
});

App.addInitializer(function(options) {
    var navigationLayout = new NavigationLayout();

    App.nav.show(navigationLayout);
    App.content.show(new ContentView());

    navigationLayout.breadcrumbs.show(new BreadcrumbsView());
    navigationLayout.options.show(new OptionsView());
});

$(function() {
    App.start();
}); 
```

可以在[此处找到简化的测试用例](http://pastie.org/4889632)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-01T13:49:21.630

好的，终于找到问题了：布局中不能命名区域`options`。

布局中定义的所有区域都直接附加到布局实例。因此，一个区域定义如下：

```
 Layout.extend({
  regions: {
    options: "#options"
  }
}); 
```

最终将 设置`layoutInstance.options`为 Region 实例。这是一个问题，因为 Backbone.View 定义并`options`用于其他目的。

将区域重命名为任何现有视图使用的现有关键字或属性以外​​的任何内容都可以解决此问题。

```
 Layout.extend({
  regions: {
    optionRegion: "#options"
  }
}); 
```

在这里工作 JSFiddle：http: [//jsfiddle.net/tegon/64ovLf64/](http://jsfiddle.net/tegon/64ovLf64/)

# android - 如何从选项菜单项启动上下文菜单？

> ID：12662713
> 
> 赞同：0
> 
> 时间：2012-09-30T16:04:48.307
> 
> 标签：android, menu, contextmenu

我使用以下代码添加了 2 个选项菜单项。

```
onCreateOptionsMenu(Menu menu)
{
     menu.add("ITEM1");
     menu.add("ITEM2");
     ...    
} 
```

如何为这些菜单项之一设置上下文菜单。通常对于按钮等我会使用 RegisterForContextMenu() 并从

```
onCreateContextMenu(ContextMenu menu,View v,ContextMenuInfo menuinfo)
{
       menu.add("ITEM1");
       menu.add("ITEM2");
       menu.add("ITEM3");
} 
```

由于我无法找到获取 OptionsMenu View 对象的方法，我该如何设置 registerforcontextmenu()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:20:15.133

当您单击选项菜单的某些项目时，只需为上下文视图注册一些按钮并调用显示上下文视图并在 oncreatecontextview 方法中取消注册上下文视图，如下所示：-

```
registerForContextMenu(b2);//When wanna use Options menu to open a context menu                           
openContextMenu(b2);//Call register for context menu thing 
unregisterForContextMenu(b2);//////like buttton and make it invisible or out of frame 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:17:50.267

似乎长按侦听器不适用于选项菜单项。所以我想唯一的选择是使用 SubMenu。

# meteor - 模板中的反应式集合查询

> ID：12662715
> 
> 赞同：0
> 
> 时间：2012-09-30T16:05:01.003
> 
> 标签：meteor

我有一个`Template`named `movies`，它有一个从集合中返回对象列表的方法。生成该对象列表的查询是使用来自另一个模板方法的数据动态创建的。

每当过滤器数据更改时，我想重新渲染模板，或者只是与该特定模板方法关联的组件。

以下是使用的两种方法：

```
 Template.movies.filter = function () {                                             
    if (Session.equals("filter", undefined)) {                                       
      return {};
    }
    return Session.get("filter");                                                    
  };                                                                                 

  Template.movies.movies = function () {                                             
    return Movies.find(Template.movies.filter(), {sort: [["Poster", "desc"]]});
  }; 
```

在 HTML 方面`{{#each movies}}{{> movie}}{{/each}}`，显示该`movies`方法的结果很简单。

**问题**是，当`Session.get("filter")`发生变化时`Template.movies.filter()`，依赖`Template.movies.movies()`数据的 HTML 组件不会被新的查询结果更新。

我将如何实现这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T23:45:47.010

最简单的方法是制作一个两个助手都使用的 javascript 函数：

```
var getFilter = function() {
  if (Session.equals("filter", undefined)) {                                       
    return {};
  }
  return Session.get("filter")
}

Template.movies.filter = function() { return getFilter(); }
Template.movies.movies = function () {                                             
  return Movies.find(getFilter(), {sort: [["Poster", "desc"]]});
}; 
```

这将按您的预期做出反应。

# autohotkey - AutoHotKey：制作（大写字母+键）->特殊字符？

> ID：12662716
> 
> 赞同：1
> 
> 时间：2012-09-30T16:05:02.237
> 
> 标签：autohotkey

在 Linux 中，我使用具有以下配置的 xmodmap：

```
clear lock
keycode 66 = Mode_switch

keycode 34 = bracketleft braceleft aring Aring
keycode 47 = semicolon colon oslash Ooblique
keycode 48 = apostrophe quotedbl ae AE

keycode 21 = equal plus
keycode 35 = bracketright braceright 
```

我怎样才能在 AutoHotKey 中做同样的事情？

换句话说，我怎样才能使 (Caps+[certain key]) -> [certain character]？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T10:22:42.020

基督教，

试试这个作为 CapsLock + F1 的例子：

```
CapsLock & F1::Send, abcdefg
CapsLock & a::Send, Æ ; to send lowercase Æ, CapsLock+Shift+a is uppercase 
```

希望这就是你要找的。

# xcode - Xcode 错误？改变阴影不透明度也会改变背景高光

> ID：12662720
> 
> 赞同：0
> 
> 时间：2012-09-30T16:05:34.127
> 
> 标签：xcode, highlight, shadow

我正在运行 Xcode 版本 4.4.1，并且我读到更改阴影设置和文本突出显示颜色会随之自动更改存在一些问题。我想更改按钮的阴影，如果不更改整个按钮背景颜色，我似乎无法这样做。这可能可以在代码中修复，但我希望能够在 xib 中执行此操作。任何想法如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T10:35:27.213

这是 Xcode 中的一个错误，不用担心。现在已经有几个版本了。只需在设置阴影颜色后再次更改背景颜色。

# php - 输出缓冲区 + Pdf - PHP

> ID：12662721
> 
> 赞同：1
> 
> 时间：2012-09-30T16:05:44.340
> 
> 标签：php, pdf, stdout

我有一个页面，它使用 glob 函数和 file_get_contents 来拥有一些 html 文件并将它们存储在缓冲区中。

所以我想将此缓冲区 ob_get_contents() 转换为 pdf 文件。

最好的方法是什么？如何？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:55:18.290

要从 HTML 和 CSS 创建 PDF 文件，请查看[DOMpdf](https://code.google.com/p/dompdf/)。

虽然这个解决方案不支持全部范围的 HTML 和 CSS，而且它的渲染有时会很痛苦，但它有一个优点：它不需要安装任何特殊的二进制文件（如 wkhtmltopdf）。它应该在您的普通共享 PHP 主机上运行。

使用示例：

```
<?php
require_once("dompdf_config.inc.php");

$html =
  '<html><body>'.
  '<p>Put your html here, or generate it with your favourite '.
  'templating system.</p>'.
  '</body></html>';

$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf");

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:51:44.580

如果`ob_get_contents`包含 html 文件，那么它们有很多解决方案可以实现您想要的。我认为你应该看看以下

*   [王子XML](http://princexml.com/)
*   [FPDF](http://www.fpdf.org/ "FPDF")
*   [TCPDF](http://www.tecnick.com/public/code/cp_dpage.php?aiocp_dp=tcpdf "TCPDF")
*   [HTML 到 PDF 转换器 (PHP5)](http://code.google.com/p/dompdf/)
*   [wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)

[使用 PHP 的简单 HTML 2 PDF](http://html2fpdf.sourceforge.net/)示例

```
$html = ob_get_contents();
ob_end_clean();
$pdf = new HTML2FPDF();
$pdf->SetTopMargin(1);
$pdf->AddPage();
$pdf->WriteHTML($html);
$pdf->Output('test.pdf','D'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T16:23:23.530

为什么要为此使用输出缓冲区？您可以在变量中使用它，`file_get_contents`并且可以使用变量中的数据简单地创建您的 pdf。当使用`ob_get_contents`它所做的只是返回输出缓冲区并且您通常对结果执行的操作是将结果保存到变量中......

顺便提一句。你想把html转换成pdf吗？如果是，请查看[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)

# zend-framework - Zend_Auth 身份不在控制器之间持续存在

> ID：12662729
> 
> 赞同：0
> 
> 时间：2012-09-30T16:07:34.450
> 
> 标签：zend-framework, frameworks, identity, zend-auth

Zend Framework 1.11 和 Doctrine 2 相当新。

我已经使用 Doctrine 成功创建了登录等。

不过，我当前的问题是，当我留在登录所在的控制器中时，Zend_Auth 实例工作正常。

如果我尝试在任何其他控制器中确定 Zend_Auth::getInstance->HasIdentity() 的状态，它会返回空白。

如果我然后返回到包含登录/身份验证的控制器内的任何页面，hasIdentity 工作正常。

我什至尝试过写入存储，但这并没有带来任何乐趣。

我的身份验证代码如下，这是单击登录后调用的操作（在 MembersareaController 中）

```
public function authAction()
{
    $this->_helper->viewRenderer->setNoRender(true);

    $loginForm = new Application_Model_Login();

    if($this->getRequest()->isPost()){
        $usr = "";
        $pwd = "";
        $KeepLoggedIn = false;
        $message = "";

        $usr = $this->_getParam('username'); 
        $pwd = $this->_getParam('password');
        $pwdMd5 = md5($pwd);

        if($usr !== "" && $pwd !== ""){

            $GDSAdaptor = new ZC_Auth_Adapter($usr, $pwdMd5);

            $result = \Zend_Auth::getInstance()->authenticate($GDSAdaptor);

            if(\Zend_Auth::getInstance()->hasIdentity()){
                $this->flashMessenger->addMessage(LOGIN_SUCCESS);
                $this->_redirect('/membersarea/index');
            }else{
                $this->flashMessenger->addMessage(LOGIN_INVALID);
            }
        }else{
            $this->flashMessenger->addMessage(LOGIN_MISSING_FORMVAL);
            $this->_redirect('/membersarea/login');
        }
    } 
```

尝试查看使用以下代码登录 IndexController 的人不会产生任何结果。hasIdentity 返回一个空值。

```
public function indexAction()
{

    if(Zend_Auth::getInstance()->hasIdentity())
    {
        $msg = "hasIdentity: YES";
    }else{
        $msg = "hasIdentity: NO";
    }

    $this->view->msg = $msg;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:42:16.763

Zend_Session::rememberMe(); 在引导程序中解决了这个问题

# objective-c - 提取时 PSYouTubeExtractor 错误

> ID：12662733
> 
> 赞同：1
> 
> 时间：2012-09-30T16:07:50.650
> 
> 标签：objective-c, ios, youtube

我正在尝试在我的项目中使用[PSYouTubeExtractor](https://github.com/steipete/PSYouTubeExtractor#readme)，它应该通过下载 mp4 或在 Web 视图中显示它来帮助内联显示 YouTube 视频。

到目前为止，这是我实现它的方式：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    [PSYouTubeExtractor extractorForYouTubeURL:[deskUrls objectAtIndex:indexPath.row] success:^(NSURL *URL) {
        NSLog(@"Finished extracting: %@", URL);
        // show the movie!
    } failure:^(NSError *error) {
        NSLog(@"Failed to query mp4: %@", error);
    }];
} 
```

`deskUrl`是：例如[此链接](http://www.youtube.com/watch?v=BMsLArefSOw)，并且在提取错误时发生：

```
[PSYouTubeExtractor doRetry_] [Line 105] Trying to load page...
2012-09-30 17:50:40.054 Tube[3378:907] -[__NSCFString absoluteURL]: unrecognized selector sent to instance 0x21027eb0 
```

好吧，我不明白为什么，因为这就是应该这样做的方式。[在此处](https://github.com/steipete/PSYouTubeExtractor)开发人员的 github 页面上，这只是相同的代码。

任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:34:23.793

它需要一个`NSURL`实例，但您显然正在提供一个`NSString`实例。

使用以下调用将您的字符串转换为 URL；

```
NSURL *youTubeURL = [NSURL URLWithString:[deskUrls objectAtIndex:indexPath.row]]; 
```

然后你可以使用你的例子中已经完成的提取器工厂/单例；

```
[PSYouTubeExtractor extractorForYouTubeURL:youTubeURL success:^(NSURL *URL) {
        NSLog(@"Finished extracting: %@", URL);
        // show the movie!
    } failure:^(NSError *error) {
        NSLog(@"Failed to query mp4: %@", error);
    }]; 
```

# ruby - 如何使用 Ruby 和 Sequel 显示 BLOB 存储的图像

> ID：12662739
> 
> 赞同：0
> 
> 时间：2012-09-30T16:08:25.000
> 
> 标签：ruby, blob, sequel, ramaze

我没有使用 Rails，所以很`send_data`遗憾，该功能不起作用。

```
image = User.select("image, image_mime").where("username = '#{params[:name]}'").first
  send_data( image.image,
             :type => image.image_mime,
             :disposition => 'inline') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T18:33:30.050

查看[`send_file`](http://ramaze.net/documentation/Ramaze/Helper/SendFile.html)方法的来源：

```
def send_file(filename, content_type = nil, content_disposition = nil)
  content_type ||= Rack::Mime.mime_type(::File.extname(filename))
  content_disposition ||= File.basename(filename)

  response.body = ::File.open(filename, 'rb')
  response['Content-Length'] = ::File.size(filename).to_s
  response['Content-Type'] = content_type
  response['Content-Disposition'] = content_disposition
  response.status = 200

  throw(:respond, response)
end 
```

您可以尝试做同样的事情，只将正文设置为`image.image`而不是从文件中读取它。

# ruby - 比较不同数组中的多个对象属性

> ID：12662742
> 
> 赞同：0
> 
> 时间：2012-09-30T16:09:06.240
> 
> 标签：ruby

我试图找出一种方法来迭代并从四个不同的来源中删除重复记录。

```
first_source = [#<Customer:0x007f911e307ad0 @id="123", @name="Whitehall">,#       <Customer:0x007f911e307ad0 @id="124", @name="Whitehall">#<Customer:0x007f911e307ad0 @id="125", @name="Whitehall">]
second_source =  [#<Customer:0x007f911e307ad0 @id="5000", @name="Whitehall">,#<Customer:0x007f911e307ad0 @id="5500", @name="Whitehall">#<Customer:0x007f911e307ad0 @id="123", @name="Whitehall">]
third_source =  [#<Customer:0x007f911e307ad0 @id="800", @name="Whitehall">,#<Customer:0x007f911e307ad0 @id="5000", @name="Whitehall">#<Customer:0x007f911e307ad0 @id="124", @name="Whitehall">]
fourth_source =  [#<Customer:0x007f911e307ad0 @id="4300", @name="Whitehall">,#<Customer:0x007f911e307ad0 @id="800", @name="Whitehall">#<Customer:0x007f911e307ad0 @id="125", @name="Whitehall">] 
```

我试过

```
customers = []

dup_customers = first_source + second_source + third_source + fourth_source

dup_customers.combination(2).each do |cs1, cs2|
  customers << cs1 unless cs1.id != cs2.id
end 
```

但这确实行不通。

有人可以帮我建议一种方法/策略来遍历这四个集合并找到相等的客户 ID，然后用它做点什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:17:20.997

[Array#uniq](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-uniq)怎么样？

```
customers = (first_source + second_source + third_source + fourth_source).uniq 
```

`uniq`[使用Object#eql](http://ruby-doc.org/core-1.9.3/Object.html#method-i-eql-3F)通过逐元素比较丢弃重复项？，因此要使此方法起作用，您需要实现`Customer#eql?`.

```
class Customer
  def eql?(other)
    id == other.id #or however you define equality
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:53:12.720

```
dup_customers = 
[first_source, second_source, third_source, fourth_source]
.combination(2).flat_map{|s1, s2| s1 & s2} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T20:40:33.693

`eql`不需要像@pje 那样覆盖。`uniq`接受一个块（[最后一个例子](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-uniq)）：

```
customers = [first_source ,second_source, third_source, fourth_source ].flatten
p customers.uniq{|c| c.id} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-30T16:13:57.027

您可以使用[数组#|](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-7C) （联合运算符）：

```
customers = first_source | second_source | third_source | fourth_source 
```

它在删除重复项的同时返回两个数组合并的结果：

```
 ["a", "b", "c" ] | [ "c", "d", "a" ]
 #=> [ "a", "b", "c", "d" ] 
```

# android - .setEnabled 不断崩溃的应用程序

> ID：12662743
> 
> 赞同：0
> 
> 时间：2012-09-30T16:09:17.683
> 
> 标签：android, android-view, android-button

为什么这一行会使我的应用程序崩溃？它甚至发生在 set clickable 上。没有这条线，这很好，但有了它 - 它甚至不会进入活动。

```
continueButton.setEnabled(false); 
```

这是日志猫。

```
09-30 16:05:09.352: E/AndroidRuntime(755): FATAL EXCEPTION: main
09-30 16:05:09.352: E/AndroidRuntime(755): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mangodeveloper.mcathomie/com.mangodeveloper.mcathomie.McatActivityGame}: java.lang.NullPointerException
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.os.Looper.loop(Looper.java:123)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.app.ActivityThread.main(ActivityThread.java:3683)
09-30 16:05:09.352: E/AndroidRuntime(755):  at java.lang.reflect.Method.invokeNative(Native Method)
09-30 16:05:09.352: E/AndroidRuntime(755):  at java.lang.reflect.Method.invoke(Method.java:507)
09-30 16:05:09.352: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
09-30 16:05:09.352: E/AndroidRuntime(755):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
09-30 16:05:09.352: E/AndroidRuntime(755):  at dalvik.system.NativeStart.main(Native Method)
09-30 16:05:09.352: E/AndroidRuntime(755): Caused by: java.lang.NullPointerException
09-30 16:05:09.352: E/AndroidRuntime(755):  at com.mangodeveloper.mcathomie.McatActivityGame.onCreate(McatActivityGame.java:40)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-30 16:05:09.352: E/AndroidRuntime(755):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
09-30 16:05:09.352: E/AndroidRuntime(755):  ... 11 more 
```

这是截至目前的整个活动：

```
package com.mangodeveloper.mcathomie;

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TextView;
import android.widget.Toast;

public class McatActivityGame extends Activity {

    private static int GAME_PREFERENCES_MAXROUNDS = 1, GAME_PREFERENCES_CURRENTROUND;
    private Cursor c;
    private RadioGroup radioGrp;
    private Button continueButton, pauseButton, explainButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        radioGrp = (RadioGroup) findViewById(R.id.radioGroup1);
        continueButton = (Button) findViewById(R.id.button_continue); 
        pauseButton = (Button) findViewById(R.id.button_pause); 
        explainButton = (Button)findViewById(R.id.button_explanation);  

        setContentView(R.layout.activity_game);
        McatDatabase dbHelper = new McatDatabase(this);
        c = dbHelper.getQuestions();

        c.moveToFirst();
        fillQuestions();
        continueButton.setEnabled(false);

//      radioGrp.setOnClickListener(new OnClickListener() {
//          
//          public void onClick(View v) {
//              continueButton.setEnabled(true);
//          }
//      });

//      continueButton.setOnClickListener(new OnClickListener() {
//          public void onClick(View v) {
//              int selectedId = radioGrp.getCheckedRadioButtonId();
//              RadioButton radioBttnSelected = (RadioButton) findViewById(selectedId);
//              if (radioBttnSelected.getText() == answer1) {
//                  Toast.makeText(McatActivityGame.this, "Correct Answer!", Toast.LENGTH_SHORT).show();
//              }else{Toast.makeText(McatActivityGame.this, "Not correct, please try again", Toast.LENGTH_SHORT).show();
//              }
//          }
//      });

//      nextquestionButton.setOnClickListener(new OnClickListener() {
//
//          public void onClick(View v) {
//              GAME_PREFERENCES_CURRENTROUND++;
//              GAME_PREFERENCES_MAXROUNDS = getIntent().getExtras().getInt("MAXROUNDS");
//
//              if (GAME_PREFERENCES_CURRENTROUND > GAME_PREFERENCES_MAXROUNDS) {
//                  Toast.makeText(McatActivityGame.this, "Alert Dialog stuff", Toast.LENGTH_SHORT).show();
//              }else{
//                  c.moveToNext(); 
//                  fillQuestions();
//              }
//          }
//      });     
//      

    }

    private void fillQuestions() {  
//      shuffle questions
        List<String> shuffAnswr = new ArrayList<String>(4);
        shuffAnswr.add(c.getString(3));
        shuffAnswr.add(c.getString(4));
        shuffAnswr.add(c.getString(5));
        shuffAnswr.add(c.getString(6));
        Collections.shuffle(shuffAnswr);        

//      instantiate 
        TextView questionTv = (TextView) findViewById(R.id.textView0);  
        RadioButton rd0 = (RadioButton)findViewById(R.id.radio0),
                rd1 = (RadioButton)findViewById(R.id.radio1),
                rd2 = (RadioButton)findViewById(R.id.radio2),
                rd3 = (RadioButton)findViewById(R.id.radio3);

//      set questions
        questionTv.setText(c.getString(2));
        rd0.setText(shuffAnswr.get(0));
        rd1.setText(shuffAnswr.get(1));
        rd2.setText(shuffAnswr.get(2));
        rd3.setText(shuffAnswr.get(3));
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:18:51.887

将您的 onCreate 更改为以下内容：

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_game);//This got moved up

        radioGrp = (RadioGroup) findViewById(R.id.radioGroup1);
        continueButton = (Button) findViewById(R.id.button_continue); 
        pauseButton = (Button) findViewById(R.id.button_pause); 
        explainButton = (Button)findViewById(R.id.button_explanation);  

        McatDatabase dbHelper = new McatDatabase(this);
        c = dbHelper.getQuestions();

        c.moveToFirst();
        fillQuestions();
        continueButton.setEnabled(false);
        ....... //Rest of your code 
```

您收到错误是因为您试图在布局膨胀之前获取对布局中视图的引用。`setContentView()`在使用之前，您必须始终调用`findViewById()`。

# java - 在 Java 上寻找统计时尚。帮助我找出代码中的错误

> ID：12662752
> 
> 赞同：-1
> 
> 时间：2012-09-30T16:10:25.857
> 
> 标签：java, statistics

我需要编写自己的函数来返回数组中重复次数最多的值。我有一个数组，我需要统计统计时尚（模式，这是数组中重复次数最多的值），我不知道为什么它不起作用。

我创建了 2 个数组：

第一个包含值，第二个数组我想插入第一个数组中的每个值重复多少次，然后通过我的函数，`findmax`搜索重复值的最大索引，最后显示一条带有模式的消息.

```
public int findmax(Integer [] somearray) { 
    int max = somearray[0];
    int z=0;

    for (int i = 0; i < somearray.length; i++) {
        if (somearray[i]>max){
            max = somearray[i];
            z = i;
        }
    }        

    return z;
}

private void myModaActionPerformed(java.awt.event.ActionEvent evt) {
    Double [] myarray = new Double[dsTable.getRowCount()];
    Integer [] myarray2 = new Integer[dsTable.getRowCount()];

    for (int i=0; i < myarray.length; i++){
        myarray[i] = (Double)dsTable.getModel().getValueAt(i, 0);
    }

    java.util.Arrays.sort(myarray);
    for (int i = 0; i < myarray.length; i++){
        JOptionPane.showMessageDialog(this.mainPanel,((Double)myarray[i]));
    }
    for (int i = 0; i < myarray2.length; i++){
        myarray2[i]=0;
    }
    for (int i = 0; i < myarray.length; i++){
        for (int j = 0; j < myarray.length; j++){
            if (myarray[i] == myarray[j]){
                myarray2[i]++;
            }
        }  
    }
  JOptionPane.showMessageDialog(this.mainPanel,myarray[findmax(myarray2)]);              
} 
```

程序的结果是第一个数组的第一个值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:36:19.897

看起来像你的作业，所以我会给你一些建议来帮助你。

*   考虑使用[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)。这里的键是你的第一个数组中的数字，值是你遇到的每个值的*计数*。*所以当你第一次遇到一个数字时，将它添加到地图中，之后的每一次，你只需增加值*

*   一旦你有了这张地图，找出具有最大值的键将是微不足道的。另请注意，可能有不止一个键可以具有该最大值，因此您可能也希望处理这种情况。

另一个提示：*您增加第二个数组的方式似乎不正确。您可能还想在那里重新审视您的逻辑。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:27:39.490

是作业吗？因为你正在糟糕地重新发明轮子。你为什么不试试[Commons Math](http://commons.apache.org/math/userguide/stat.html)呢？他们有许多统计类可以为你做大部分事情，而且非常简单：

```
DescriptiveStatistics statistics = new DescriptiveStatistics(someArray.lentgh);

for( Integer value : someArray){
  statistics.addValue( value.doubleValue() );
}

// magick here
statistics.getMax(); 
```

# php - 我无法验证 $_POST[''];

> ID：12662754
> 
> 赞同：0
> 
> 时间：2012-09-30T16:10:45.643
> 
> 标签：php, post

我写了这段代码，但我有一个问题。当有人点击提交时，我无法验证是否没有上传文件，我无法具体说明允许的扩展，例如“.jpg”。我怎么能在“foreach”中做到这一点，当我只上传一张图片时我可以做到这一点，但是这个代码用于多上传，如果你注意到我在表单中使用了数组。

```
<?php 
mysql_connect('localhost','root','root')or die (mysql_error());
mysql_select_db('storeimage');
?>
<?
if ($_POST['submit'] ){
  $file=$_FILES['file'];
  $name=$_FILES['file']['name'];
  $tmp_name=$_FILES['file']['tmp_name'];

  foreach($name as $key=>$value){
    $name_file=$name[$key];
    $tmp_file=$tmp_name[$key];
    $imgpath = rand().'.jpeg'; 

    move_uploaded_file($tmp_file,'images/'.$imgpath);

    $insert=mysql_query("insert into  imagelocation values('','images/$imgpath')")or die (mysql_error());
    $id=mysql_insert_id();

    $select=mysql_query("select * from  imagelocation where id='$id' ");

    while ($row=mysql_fetch_object($select)){
      echo "<center><img src='$row->images'/></center><br/>";
    }
  }
}
?>
<form action='' method='post' enctype='multipart/form-data'>
<input type='file' name='file[]' multiple />
<input type='submit' name='submit'/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:26:07.883

从来没有那样做，但大概就像

```
foreach ($_FILES['file'] as $file) {

    // echo $file['name'] . '<br>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:33:14.133

您使用多个文件，您需要做这样的事情

```
$allowedExt  = array("jpg");
if (isset($_FILES['file'])) {
    foreach ( $_FILES['file']['tmp_name'] as $key => $file ) {
        if ($_FILES["file"]["error"][$key] == UPLOAD_ERR_OK) {
            $fileName = $_FILES['file']['name'][$key];
            $fileSize = $_FILES['file']['size'][$key];
            $fileTemp = $_FILES['file']['tmp_name'][$key];
            $fileType = $_FILES["file"]["type"][$key];
            $fileExt = pathinfo($fileName, PATHINFO_EXTENSION);
            $fileExt = strtolower($fileExt);

            if(!in_array($fileExt, $allowedExt))
            {
                // extention not supported ;
                continue;
            }

            // do your magic

        } else {
            // Somethign bad happend 
        }
    }
} 
```

# iphone - 在应用程序中显示我自己的 iad

> ID：12662755
> 
> 赞同：1
> 
> 时间：2012-09-30T16:10:46.043
> 
> 标签：iphone, objective-c, iad

我想在我的应用程序中展示我自己的广告。Acutally 广告横幅是静态图像，它们会在延迟后加载。是否应该为显示这些 iad 的应用启用 iad 网络。因为我不想从苹果加载iads。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:30:53.543

不可以。iAd 仅用于`ADBannerView`在您的应用中显示来自 Apple iAd 网络的广告。如果您只是向用户展示您创建的横幅图像，那么无论它做什么，您都无需接触或担心与 iAd 有任何关系。

来自[Apple 的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UserExperience/Reference/ADBannerView_Ref/Reference/Reference.html)：

> ADBannerView 类提供了一个独立的视图。您的应用程序不应继承 ADBannerView，您的应用程序也不应尝试更改横幅视图的行为。例如，您的应用程序不应该将子视图添加到横幅视图。

如果您使用的`ADBannerview`不是显示来自 Apple 的 iAd，那么您做错了。您似乎想展示自己的静态图片广告。用于此的正确类是`UIImageView`. 如果您使用 a 显示自己的图像，`ADBannerView`您将被 App Store 拒绝。

# html - 在css中使图像的白色背景透明

> ID：12662759
> 
> 赞同：32
> 
> 时间：2012-09-30T16:11:23.907
> 
> 标签：html, css

我有两张图片，其中一张是叠加在第一张图片上的小图标。我的图标有一个白色背景，所以当图标放在另一个图像上时，我们会得到这样的效果，即在图像上出现一个白色方块。理想情况下，我不想在我的其他图像之上显示这个白色背景。是否有一个 CSS 属性可以应用于我的图标以使其白色背景透明？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2015-12-15T19:41:28.303

实际上有一种方法，虽然目前只在 Chrome、Firefox 和 Safari 上支持。如果背景颜色为白色，则可以添加 CSS 属性：

```
mix-blend-mode: multiply; 
```

你可以在这里阅读更多关于它的信息：[https ://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode](https://developer.mozilla.org/en-US/docs/Web/CSS/mix-blend-mode)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-09-08T16:38:17.290

# 遮光剂

`mix-blend-mode`确实适用于某些浏览器，但我们发现它会导致 chrome 出现性能问题，*我不知道为什么*。

我团队的一位设计师想出了这个天才的技巧，您可以在其中创建一个大部分透明的图层，但是当它覆盖在白色背景上时，它的颜色将与周围背景的颜色相匹配。

> 发现这种“神奇”颜色的方式；是通过计算每个颜色轴应该为去除的不透明度量而变暗多少。这个公式是`255 - ( 255 - x ) / opacity`。问题是：如果不透明度设置得太低，公式会给你负数（不能使用）。如果不透明度太高，您会在图像的非白色部分获得一些颜色。
> 最初，我们使用电子表格进行计算，通过手动试验和错误，我们会发现 Goldilox 颜色。
> 一旦我们开始使用 sass，我意识到这可以通过二分搜索来完成。所以我创建了一个为我们工作的 sass 函数。

在[sassmeister](http://www.sassmeister.com/gist/e659d4e7cead1676c86c4f396e4d7b18)上查看[这个要点](https://gist.github.com/dovidweisz/e659d4e7cead1676c86c4f396e4d7b18)。将背景颜色传递给sass 代码第 56 行的函数。并在 div（或伪元素）中使用生成的 rgba 颜色来覆盖图像。`opacitator`

我还在[codepen 上创建了一个工作示例](https://codepen.io/dovidweisz/pen/PyyZbe?editors=1100)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-14T16:23:53.130

还没有...

*不过，它已经非常接近可能了*。查看这篇关于 CSS 过滤器的文章，这是一个实验性的 css 功能，它可以在客户端做一些简洁的事情。

[CSS 过滤器](https://developer.mozilla.org/en-US/docs/Web/CSS/filter)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-05-10T19:06:27.387

由于没有可靠的方法来使用 CSS 删除背景，所以分享一个我如何使用 JS 完成的代码片段：

```
public async removeImageBackground(image) {
  const backgroundColor = { red: 255, green: 255, blue: 255 };
  const threshold = 10;

  const imageElement = new Image();
  imageElement.src = image;
  await new Promise(function(resolve) { imageElement.addEventListener('load', resolve); });

  var canvas = document.createElement('canvas');
  canvas.width = imageElement.naturalWidth;
  canvas.height = imageElement.naturalHeight;

  var ctx = canvas.getContext('2d');
  ctx.drawImage(imageElement, 0, 0);
  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  for (var i = 0; i < imageData.data.length; i += 4) {
    const red = imageData.data[i];
    const green = imageData.data[i + 1];
    const blue = imageData.data[i + 2];
    if (Math.abs(red - backgroundColor.red) < threshold &&
      Math.abs(green - backgroundColor.green) < threshold &&
      Math.abs(blue - backgroundColor.blue) < threshold) {
      imageData.data[i + 3] = 0;
    }
  }

  ctx.putImageData(imageData, 0, 0);
  return canvas.toDataURL(`image/png`);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-15T02:43:44.570

您可以为您的图像制作一个容器。然后对于容器的css：

```
overflow:hidden; height: (depends on your image, then make it a smaller px); width:100%; 
```

希望能帮助到你。:)

# qt - 选择新项目后 Qt 创建者崩溃

> ID：12662760
> 
> 赞同：4
> 
> 时间：2012-09-30T16:11:23.937
> 
> 标签：qt, crash

Qt 创建者在选择新项目后崩溃（实际上，当我点击第三个以下的项目时）没有错误。有时会有内部 Ubuntu 错误标记在哪里：

> qtcreator 在 raise() 中因 SIGABRT 而崩溃。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T16:35:47.707

根据： [http](http://code.google.com/p/clementine-player/issues/detail?id=1706) ://code.google.com/p/clementine-player/issues/detail?id=1706 删除 qt-at-spi 包解决了问题（它实际上对我来说！） sudo apt-get删除 qt-at-spi

# java - 使用 Play 框架的 Akka 未来

> ID：12662762
> 
> 赞同：0
> 
> 时间：2012-09-30T16:11:31.097
> 
> 标签：java, playframework-2.0, akka, future

我正在尝试将 Akka 未来与游戏框架一起使用来连接到远程 akka 系统。运行系统后，akka 未来会警告我留下一个参数。

代码如下：

这是 [lay 控制器代码：p

```
ackage controllers;

import com.typesafe.config.ConfigFactory;

import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import play.*;
import play.mvc.*;

import views.html.*;

public class Application extends Controller {

  public static Result index() throws InterruptedException { 

      System.out.println(" Local Node Called0");

      ActorSystem csystem = ActorSystem.create("Application", ConfigFactory.load().getConfig("LocalNode"));
      ActorRef localNode = csystem.actorOf(new Props(LocalNode.class));

        System.out.println(" Local Node Called1");
        localNode.tell("Hello");
        System.out.println(" Local Node Called2");

        Thread.sleep(5000);
        csystem.shutdown();
        return ok(index.render("I am OK"));
  }           
} 
```

这是播放框架本地演员节点

包控制器；

导入 akka.actor。*; 导入 akka.dispatch.Await；导入 akka.dispatch.Future；导入 akka.event.Logging；导入 akka.event.LoggingAdapter；导入 akka.util.Duration；导入 akka.util.Timeout；导入 akka.pattern。*;

公共类 LocalNode 扩展 UntypedActor {

```
 LoggingAdapter log = Logging.getLogger(getContext().system(), this);
    Timeout timeout = new Timeout(Duration.parse("20 seconds"));

    ActorRef masterActor;

    public void preStart()
    {
        /* Get reference to Master Node*/
         masterActor = 

    getContext().actorFor("akka://MasterNode@127.0.0.1:2552/user/masterActor");
    }

    @Override
    public void onReceive(Object message) throws Exception {
        System.out.println(" Future called  ");

         Future<Object> future = Patterns.ask(masterActor , message.toString(), timeout);

            String result = (String) Await.result(future, timeout.duration());

            log.info("Messagefrom Server", result.toString());  
    }
   } 
```

这是远程akka系统master nide

```
package Rubine_Cluster;

import com.typesafe.config.ConfigFactory;

import akka.actor.ActorRef;
import akka.actor.ActorSystem;
import akka.actor.Props;
import akka.actor.UntypedActor;
import akka.kernel.Bootable;

/**
 * Hello world!
 *
 */
public class MasterNode implements Bootable
{
     final ActorSystem system;

      public MasterNode() {
        system = ActorSystem.create("MasterNode", ConfigFactory.load()
            .getConfig("masterNode"));
        ActorRef masterActor = system.actorOf(new Props(MasterActor.class),"masterActor");
        System.out.println(" Master Node is called ");
      }

      public void startup() {

      }

          public void shutdown() {
            system.shutdown();
          }
} 
```

这是akka远程系统MasterActor

```
package Rubine_Cluster;

import akka.actor.*;

public class MasterActor extends UntypedActor {

    @Override
    public void onReceive(Object message) throws Exception {

         if (message instanceof String) {
                // Get reference to the message sender and reply back
                getSender().tell(message + " got something");       
    }
  }  
} 
```

这是来自播放框架的消息

```
[INFO] [09/30/2012 16:47:25.669] [Application-akka.actor.default-dispatcher-1] [
akka://Application/user/$a] Messagefrom Server WARNING arguments left: 1 
```

需要帮助，因为我想在作业截止日期前完成

谢谢大家

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-15T03:02:36.057

“arguments left: 1”警告是由于以下行：

```
log.info("Messagefrom Server", result.toString()) 
```

您正在将未使用的参数传递给记录器。应该是这样的：

```
log.info("Messagefrom Server {}", result.toString()) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-30T18:01:46.673

尝试在 Play 中为您的演员命名：

```
ActorRef localNode = csystem.actorOf(new Props(LocalNode.class), "localNode"); 
```

并且还要注意，如果你需要从 Play 访问 Akka 系统，最好使用：

```
ActorSystem csystem = Akka.system(); 
```

代替：

```
ActorSystem csystem = ActorSystem.create("Application", ConfigFactory.load().getConfig("LocalNode")); 
```

# android - ExpandableListView：将子视图膨胀到父组视图中

> ID：12662763
> 
> 赞同：2
> 
> 时间：2012-09-30T16:11:51.320
> 
> 标签：android, expandablelistview

我有`ExpandableListView`一个自定义的`CursorTreeAdapter`. 组行布局有一个框架（可绘制形状）作为背景。我希望子行出现在该框架内而不是在其下方。如何在父组视图中膨胀子视图？

# c - 如何获取 errno 值（C 语言）的错误消息？

> ID：12662765
> 
> 赞同：12
> 
> 时间：2012-09-30T16:11:53.640
> 
> 标签：c, c89

如何获取 errno 值（C 语言）的错误消息？例如，我可以编写这样的文件（errno_messages.h）：

```
#include <errno.h>

char* get_errno_message(void){
    switch (errno) {
    case 0:
        return "";
        break;
    case EPERM:
        return "Operation not permitted";
        break;
    case ENOENT:
        return "No such file or directory";
        break;
    case ESRCH:
        return "No such process";
        break;
        /* e.t.c. */
    default:        
        break;
    }
} 
```

但也许这样的功能已经存在？

此致

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-30T16:14:36.897

我认为您正在寻找的是[strerror()](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strerror.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T16:22:41.417

除了 strerror() 之外，一个有用的函数是 perror，它还可以使用给定的前缀直接打印错误。通常，您会想做类似的事情

```
int fd = 打开（文件名，O_READ）；
如果（fd < 0）{
  错误（文件名）；
  退出（EXIT_FAILURE）；
}

```

# mysql - VB.NET - 使用文本框和组合框的搜索功能

> ID：12662768
> 
> 赞同：5
> 
> 时间：2012-09-30T16:12:09.210
> 
> 标签：mysql, sql, vb.net

今天是个好日子！我想在这里寻求有关我的代码的帮助。主要关注的是从 MySQL 数据库中搜索文本框提供的关键字。这是我的GUI供参考。

![我的程序的 GUI](../Images/5fac34dc4a899eb3097b5c7a14d6ea39.png)

当我在文本框上键入搜索键并在组合框中选择一列时，搜索查询将在列表视图中输出。我尝试了多种组合来获得输出，但无济于事。

这是我的代码，您可以帮助我。

```
Private Sub Search()

    lviClientList.Items.Clear()
    Dim strSqlSearch As String = "SELECT code, Company, StAdd, City, ContactPerson, Phone, Mobile, Email, Remarks FROM tblclients WHERE '@Column' LIKE '%" & txtSearchCriteria.Text & "%'"

    Dim item As New ListViewItem()

    If cboColumns.SelectedIndex = 0 Then
        column = "code"
    ElseIf cboColumns.SelectedIndex = 1 Then
        column = "Company"
    ElseIf cboColumns.SelectedIndex = 2 Then
        column = "StAdd"
    ElseIf cboColumns.SelectedIndex = 3 Then
        column = "City"
    ElseIf cboColumns.SelectedIndex = 4 Then
        column = "ContactPerson"
    ElseIf cboColumns.SelectedIndex = 5 Then
        column = "Phone"
    ElseIf cboColumns.SelectedIndex = 6 Then
        column = "Mobile"
    ElseIf cboColumns.SelectedIndex = 7 Then
        column = "Email"
    ElseIf cboColumns.SelectedIndex = 8 Then
        column = "Remarks"
    End If

    Dim mysqlCommand As New MySqlCommand(strSqlSearch, mysqlConnection)
    mysqlCommand.Parameters.AddWithValue("@Column", column)

    Try
        mysqlConnection.Open()
        mysqlReader = mysqlCommand.ExecuteReader()

        Do While mysqlReader.Read()

            item = lviClientList.Items.Add(mysqlReader("code").ToString)
            item.SubItems.Add(mysqlReader("Company").ToString)
            item.SubItems.Add(mysqlReader("StAdd").ToString)
            item.SubItems.Add(mysqlReader("City").ToString)
            item.SubItems.Add(mysqlReader("ContactPerson").ToString)
            item.SubItems.Add(mysqlReader("Phone").ToString)
            item.SubItems.Add(mysqlReader("Mobile").ToString)
            item.SubItems.Add(mysqlReader("Email").ToString)
            item.SubItems.Add(mysqlReader("Remarks").ToString)

        Loop

    Catch ex As Exception

        MsgBox("No results found.", MsgBoxStyle.OkOnly, "Project Analysis System")

    Finally

        mysqlReader.Close()
        mysqlConnection.Close()

    End Try

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-21T06:58:06.010

目前尚不清楚为什么您的代码不能正常工作。尝试更改`Catch`子句中的代码

```
MsgBox("No results found.", MsgBoxStyle.OkOnly, "Project Analysis System") 
```

进入

```
Msgbox(ex.Message.ToString(), MsgBoxStyle.OkOnly, "Project Analysis System") 
```

所以你会知道确切的错误是什么。

您可以连接 的值，`ColumnName`因为它是在您的代码中静态设置的。但是 on 的值`WHERE`应该被参数化，因为它是用户输入的值。

试试这个修改后的代码，

```
Private Sub Search()

    lviClientList.Items.Clear()
    Dim item As New ListViewItem()
    Dim _isFound As Boolean = False

    Dim colName() As String = {"code", "Company", "StAdd", "City", "ContactPerson", "Phone", "Mobile", "Email", "Remarks"}

    Dim strSqlSearch As String = "SELECT code, Company, StAdd, City, " & _
                                    "ContactPerson, Phone, Mobile, Email, Remarks " & _
                                    "FROM tblclients " & _
                                    "WHERE " & colName(cboColumns.SelectedIndex) & " LIKE CONCAT('%', @valueName, '%')"

    Using myConn As New MySqlConnection("connectionStringHere")
        Using myComm As New MySqlCommand()
            With myComm
                .Connection = myConn
                .CommandType = CommandType.Text
                .CommandText = strSqlSearch
                .Parameters.AddWithValue("@valueName", txtSearchCriteria.Text);
            End With
            Try
                myConn.Open()
                Dim myReader As MySqlDataReader = myComm.ExecuteReader()

                While myReader.Read()
                    _isFound = True
                    item = lviClientList.Items.Add(myReader("code").ToString)
                    item.SubItems.Add(myReader("Company").ToString)
                    item.SubItems.Add(myReader("StAdd").ToString)
                    item.SubItems.Add(myReader("City").ToString)
                    item.SubItems.Add(myReader("ContactPerson").ToString)
                    item.SubItems.Add(myReader("Phone").ToString)
                    item.SubItems.Add(myReader("Mobile").ToString)
                    item.SubItems.Add(myReader("Email").ToString)
                    item.SubItems.Add(myReader("Remarks").ToString)
                End While

                If Not _isFound Then
                    MsgBox("No results found.", MsgBoxStyle.OkOnly, "Project Analysis System")
                End If

            Catch ex As MySqlException
                Msgbox(ex.Message.ToString(), MsgBoxStyle.OkOnly, "Project Analysis System")
            End Try
        End Using
    End Using

End Sub 
```

# android - android应用程序的最大大小？

> ID：12662769
> 
> 赞同：0
> 
> 时间：2012-09-30T16:12:12.970
> 
> 标签：android, size

我很难为此找到更新的答案。

到目前为止，我的目标是让我的资源<16mb。但是随着我走得越远，这变得越来越难，我的意思是，一个 1000x1000 .Png 文件使用大约 1mb。

显然我的目标是让它尽可能小，但我应该开始担心什么尺寸？计划为 android >2.1 发布

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:14:49.223

您将获得的最低堆空间是`16 MB`IIRC。您可能会被分配到`64 MB`，甚至更多，但您应该始终尝试在 16 MB 以下进行操作。请记住，如果您可以获得更多堆空间，并且您确实尝试使用它，您最终可能会从内存中替换其他应用程序，并给用户带来一些小问题或在某些情况下是大问题。

并不是你不能获得更多的空间。事实是，您应该尽可能让您的应用成为 Android 公民，并尽可能对设备友好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:58:08.550

您可以通过以下方式获得最大的 hep 大小：

```
 Log.d(TAG,"Memory Class: " + ((ActivityManager) getSystemService(ACTIVITY_SERVICE)).getMemoryClass());
    Log.d(TAG,"Heap size: " + Runtime.getRuntime().maxMemory()); 
```

如果您正在加载大 PNG 文件，您应该寻找有关如何在 Android 上处理大图像的最佳实践，但请记住，您的一些 BitmapFactory 选项对图像的加载方式有巨大影响：

-inScaled 设置后可能会在具有高屏幕密度的新设备中将位图内存大小增加 2 或 3 倍，

-ARGB 类型可能会从每像素 2 个字节（RGB_565 和 ARGB_4444）变为 4 个字节（ARGB_8888），因此再次乘以 2。

祝你好运。

# c# - 仅第一次使用 BackgroundWorker 报告报告进度

> ID：12662773
> 
> 赞同：0
> 
> 时间：2012-09-30T16:12:25.717
> 
> 标签：c#, winforms

我希望我的应用程序将在我的表单上显示我的类属性，所以我开始我的类`BackgroundWorker`并创建`ProgressChanged`.

我的课：

```
public class DumpFile
{
    PacketDevice _device;
    public int _packetsCount;
    public double _bitsPerSecond;
    public double _packetsPerSecond;
    public DateTime _lastTimestamp;
    public delegate void dlgPackProgress(int progress);
    public event dlgPackProgress evePacketProgress;

    public DumpFile(PacketDevice device, string pcapPath)
    {
        _device = device;
        _pcapPath = pcapPath;
        _packetsCount = 1;
    }

    public void startCapturing()
    {
OnPacketProgress(_packetsCount++);

        using (PacketCommunicator communicator = _device.Open(65536, PacketDeviceOpenAttributes.Promiscuous, 1000)) //open the device
        {
            ThreadStart starter = delegate { openAdapterForStatistics(_device); };
            new Thread(starter).Start();

            using (PacketDumpFile dumpFile = communicator.OpenDump(_pcapPath)) //open the dump file
            {
                communicator.ReceivePackets(0, dumpFile.Dump); //start the capture                    
            }
        }
    }
private void OnPacketProgress(int packet)
{
    var handler = evePacketProgress;
    if (handler != null)
    {
        handler(packet);
    }
}

    public void openAdapterForStatistics(PacketDevice selectedOutputDevice)
    {
        using (PacketCommunicator statCommunicator = selectedOutputDevice.Open(100, PacketDeviceOpenAttributes.Promiscuous, 1000)) //open the output adapter
        {
            ThreadStart start = delegate { test(selectedOutputDevice); };
            new Thread(start).Start();

            statCommunicator.SetFilter("tcp"); //compile and set the filter
            statCommunicator.Mode = PacketCommunicatorMode.Statistics; //put the interface in statstics mode                
            statCommunicator.ReceiveStatistics(0, StatisticsHandler);

        }
    }

    public void test(PacketDevice selectedOutputDevice)
    {
        using (PacketCommunicator communicator = selectedOutputDevice.Open(65536, PacketDeviceOpenAttributes.Promiscuous, 1000))
        {
            communicator.ReceivePackets(0, PacketHandler);
        }
    }

    private void PacketHandler(Packet packet)
    {
        string result = _packetsCount.ToString() + ". " + packet.Timestamp.ToString("yyyy-MM-dd hh:mm:ss.fff") + " length:" + packet.Length;
        _packetsCount++;
    }

    private void StatisticsHandler(PacketSampleStatistics statistics)
    {
        DateTime currentTimestamp = statistics.Timestamp; //current sample time
        DateTime previousTimestamp = _lastTimestamp; //previous sample time
        _lastTimestamp = currentTimestamp; //set _lastTimestamp for the next iteration

        if (previousTimestamp == DateTime.MinValue) //if there wasn't a previous sample than skip this iteration (it's the first iteration)
        {
            return;
        }

        double delayInSeconds = (currentTimestamp - previousTimestamp).TotalSeconds; //calculate the delay from the last sample
        _bitsPerSecond = statistics.AcceptedBytes * 8 / delayInSeconds; //calculate bits per second
        _packetsPerSecond = statistics.AcceptedPackets / delayInSeconds; //calculate packets per second
    }
} 
```

开始捕获的开始按钮：

```
private void btnStartCapture_Click(object sender, EventArgs e)
{
    timerSniffer.Start();
    btnStartTabSniffer.Enabled = false;
    btnStopTabSniffer.Enabled = true;
    groupBoxSelectTabSniffer.Enabled = false;

    bgWorker = new BackgroundWorker();
    bgWorker.WorkerReportsProgress = true;
    bgWorker.ProgressChanged += new ProgressChangedEventHandler(bgWSniffer_ProgressChanged);
    bgWorker.DoWork += new DoWorkEventHandler(
        (s3, e3) =>
        {
            DumpFile dumpFile = new DumpFile(deviceForCapturing, pcapFilePathSniffer);

            tshark.evePacketProgress += new DumpFile.dlgPackProgress(
                (packet) =>
                {
                    bgWorker.ReportProgress(packet, dumpFile);
                });

            dumpFile.startCapturing();
        });

    bgWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s3, e3) =>
        {
            groupBoxSelectTabSniffer.Enabled = true;
        });

    bgWorker.RunWorkerAsync();
} 
```

进度改变：

```
private void bgWSniffer_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
    var dumpFile = (DumpFile)e.UserState;
    lblNumberOfPacketsTabSniffer2.Text = dumpFile._packetsCount.ToString("#,##0");
    lblTrafficRateTabSniffer2.Text = (dumpFile._bitsPerSecond * 0.000001).ToString("0.##") + " Mbit/sec" + " (" + dumpFile._bitsPerSecond.ToString("#,##0") + " Bits/sec" + ")";
    lblPacketsRateTabSniffer2.Text = dumpFile._packetsPerSecond.ToString("#,##0") + " Packets/sec";
} 
```

问题是我的应用程序“进入” ProgressChanged 函数，但只有一次。

我想我在课堂上漏掉了一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:28:35.390

我只能找到一个对`OnPacketProgress()`的调用，它在任何循环之外。

```
public void startCapturing()
{
   OnPacketProgress(_packetsCount++);
   ....
} 
```

所以是的，那只会被调用一次。
你需要内在的东西`ReceivePackets()`

# c# - 模板方法模式 - 防止派生类中的直接方法调用

> ID：12662776
> 
> 赞同：3
> 
> 时间：2012-09-30T16:12:46.463
> 
> 标签：c#, algorithm, design-patterns, abstract-class, template-method-pattern

我不确定我是否正确理解模板方法模式。

这是我简化的基类实现：

```
public abstract class AlgorithmBase
{
    protected void AlgorithmMethod()
    {
        if(!OnSimulationStart())
        {
            OnSimulationEnd(false);
            return;
        }

        if(!DoSomeStep())
        {
            OnSimulationEnd(false);
            return;
        }

        OnSimulationEnd(true);
    }

    protected abstract bool OnSimulationStart();
    protected abstract bool DoSomeStep();
    protected abstract void OnSimulationEnd(bool result);
} 
```

据我了解，基类知道算法流程并对其进行管理。问题是在实际项目中我有许多抽象方法，如果我能以某种方式阻止在派生类中直接调用它们会很好。当多个类管理算法流时，它是不可读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:39:12.917

可以使用基于接口显式实现的技巧来防止意外调用基本算法实现所需的方法。然而，这是一种安全措施，可以被打破，但开发人员知道他会做什么的可能性很高。

声明所需方法的接口`AlgorithmMethod`：

```
public interface IAlgorithmMethodImpl
{
    bool OnSimulationStart();
    bool DoSomeStep();
    void OnSimulationEnd(bool result);
} 
```

使用此接口的基本抽象类，传递到其构造函数中，以调用所需的方法：

```
public abstract class AlgorithmBase
{
    protected AlgorithmBase(IAlgorithmMethodImpl impl)
    {
        Impl = impl;
    }

    // can be a property reasonable cases; however, a field 
    // fits well into our scenario
    private IAlgorithmMethodImpl Impl; 

    protected void AlgorithmMethod()
    {
        if(!Impl.OnSimulationStart())
        {
            Impl.OnSimulationEnd(false);
            return;
        }

        if(!DoSomeStep())
        {
            Impl.OnSimulationEnd(false);
            return;
        }

        Impl.OnSimulationEnd(true);
    }

    // no abstract method declarations here — they are provided by 'Impl'
} 
```

然后继承自的特定算法类`AlgorithmBase`使用显式接口实现来封装必要方法（如在基中声明的抽象方法）类的实现，同时防止它们被意外调用：

```
public class MySuperAlgorithm : AlgorithmBase, IAlgorithmMethodImpl
{
    public MySuperAlgorithm()
        // pass a reference to this instance as the class 
        // that implements the required methods
        : base(this) 
    {
    }

    // explicit implementation of IAlgorithmMethodImpl
    bool IAlgorithmMethodImpl.OnSimulationStart() { ... implementation ... }
    bool IAlgorithmMethodImpl.DoSomeStep() { ... implementation ... }
    void IAlgorithmMethodImpl.OnSimulationEnd(bool result) { ... implementation ... }
} 
```

这种方法的优点——除了防止意外调用实现方法——是您可以选择是将实现封装在后代中，还是将其分解为单独的类。

# c# - 如何获取拖放到控制台应用程序窗口的项目的文件路径？

> ID：12662778
> 
> 赞同：8
> 
> 时间：2012-09-30T16:12:52.013
> 
> 标签：c#, path, drag-and-drop, console-application

我希望能够让用户将文件拖放到我的控制台应用程序的窗口中，这样他们就不会被迫将文件拖放到应用程序的图标（或链接，或者更糟糕的是在控制台中编写命令行）上。如何获取拖放到应用程序窗口中的文件路径列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-30T16:20:37.003

你可以只听键盘。将文件拖到控制台窗口时，窗口会收到键盘事件，就像直接输入文件名一样。

这就是您可以在`cmd`PowerShell 窗口或 PowerShell 窗口上拖放文件并获取完整文件名的方式，就像直接输入一样，它也适用于您自己的应用程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-30T16:20:26.587

控制台应用程序不拥有它的窗口，`csrss.exe`但确实如此。因此，即使您找到了 window `HANDLE`，您也无法注册拖放或处理丢弃消息。因此，您的控制台应用程序仅限于`csrss.exe`通过控制台 API 转发的消息类型。它们在这里列出：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms683499.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683499.aspx) 拖放不在其中，尽管控制台内的鼠标事件是。

您最好的选择可能是制作一个看起来像控制台应用程序但不使用 Windows 控制台的应用程序。相反，您会在屏幕上绘制文本和光标，并接受键盘输入，从而创建命令行界面。

这种东西被称为“控制台模拟器”，您可能会找到一个已经构建的满足您需求的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:40:50.423

**你不能**因为控制台应用程序没有窗口。它具有标准输入、输出和错误流。

包含控制台应用程序的窗口是 CMD 应用程序 (cmd.exe) 的窗口，您无法更改 Windows 控制台的基本行为。

CMD 像终端（putty、telnet、ssh 等）一样工作——它将字符从键盘发送到应用程序（准确地说——它将字符发送到“标准输入”）并显示由应用程序的“标准输出”生成的字符。

阅读一些关于标准流的信息。 [http://en.wikipedia.org/wiki/Standard_streams](http://en.wikipedia.org/wiki/Standard_streams)

**我的 Windows 7 下 CMD.exe 的行为**

我可以通过拖放传递文件名（带完整路径）。在 cmd 窗口上放置一个“文件图标”将“键入”文件名 - 但没有 CR/LF（换行）字符，因此“readline”功能将不起作用。

删除多个文件图标只会传递一个文件。

对不起，如果我犯了一些语言错误。

# mysql - 最后排序空值

> ID：12662780
> 
> 赞同：5
> 
> 时间：2012-09-30T16:13:13.520
> 
> 标签：mysql, null, sql-order-by

想要最后对 Nulls 和 Blanks 进行排序，并且已经阅读了所有使用 Coalesce 函数或 If 按列排序的解决方案。

我的问题对我来说不是这些工作，因为我正在排序的列是由创建查询的 PHP 脚本动态指定的，并且我的一些列在我的联接中的两个表中。

```
 $sortcol="boat";
   $sql= "SELECT fleet,b.boat as boat,owner FROM boats as b 
   LEFT JOIN owners as o ON  b.boat=o.boat 
   ORDER BY $sortcol"; 
```

这很好用，我可以更改变量 $sortcol 并且我的输出列表很好用，除了顶部的空值和空白。

根据其他帖子我试过这个

```
 $sortcol="boat";
   $sql= "SELECT fleet,b.boat as boat,owner FROM boats as b 
   LEFT JOIN owners as o ON  b.boat=o.boat 
   ORDER BY IF($sortcol is NULL,1,0), $sortcol"; 
```

这会引发错误“ORDER BY 子句中的列船不明确”。显然它希望 b.boat 按顺序排列，但由于我不会涉及的原因，这是有问题的。看来，每当我尝试在 orderby 子句中使用函数时，我都无法使用列别名。

有什么想法可以优雅地解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:29:44.273

你是对的。出于我无法理解的原因，只要*您提供的名称没有以任何方式处理*（我想不出任何方式。也许其他人存在），MySQL 就会**接受**模棱两可的名称。`ORDER BY`

 *一旦出现，模棱两可就会被拒绝。

这是被接受的（并且是多余的）：

```
select b.id, a.name as name
    FROM client AS a JOIN client AS b ON (a.id = b.id)
    ORDER BY name, name; 
```

而`COALESCE(name, '')`, `name IS NULL`,`name OR NULL`都被拒绝。

显而易见的解决方案是为别名使用不同的名称，该名称不会出现在任一表中。

另一种可能性是创建一个嵌套查询：

```
SELECT * FROM ( your query here, without ORDER ) AS original
ORDER BY IF($sortcol is NULL,1,0), $sortcol; 
```

那是：

```
$sortcol="boat";
$sql = <<<SQL
   SELECT * FROM (
      SELECT fleet,b.boat as boat,owner FROM boats as b 
         LEFT JOIN owners as o ON  b.boat=o.boat 
   ) AS original
   ORDER BY IF($sortcol is NULL,1,0), $sortcol;
SQL; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:28:53.767

`ORDER BY`如果您有两个相似的列名，您必须在表中指定。就是这么简单。

您应该能够在`SELECT`其中使用不同的别名来消除两`boat`列的歧义，然后在

```
$sortcol = "bboat";
$sql= "
  SELECT 
    fleet,
    /* Alias as bboat to disambiguate from b.boat and o.boat
    b.boat as bboat,
    owner 
  FROM 
    boats as b
    LEFT JOIN owners as o ON  b.boat=o.boat 
  ORDER BY IF($sortcol is NULL,1,0), $sortcol"; 
```

注意：如果`$sortcol`是任何类型的用户输入的结果，则有必要将其与可接受的列名白名单进行比较，以防止 SQL 注入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T19:12:44.320

根据 ANSI SQL，如果在`ORDER BY`子句中使用列别名，则只能由它们自己使用 - 您不能使用别名来投影其他列或表达式。

因此，当`name`按列表顺序使用并且不在表达式中时，它被解释为对别名的引用。一旦在表达式中使用，它就无法解析为别名，因此 MySQL 尝试找到一个列来解析它。您的查询范围内有两个这样的列，因此您会得到关于歧义的错误。

这种解析行为可以从下面看出（在 MySQL 和 SQL Server 中测试过）

```
CREATE TABLE T
(
C INT,
D INT
)

INSERT INTO T
SELECT 1, 2 UNION ALL
SELECT 2, 1 
```

* * *

```
SELECT C AS D, D AS C
FROM T 
ORDER BY D 
```

返回（按别名排序）

```
D           C
----------- -----------
1           2
2           1 
```

* * *

```
SELECT C AS D, D AS C
FROM T 
ORDER BY D + 0 
```

返回（按基列排序）

```
D           C
----------- -----------
2           1
1           2 
```*

# javascript - 使用 websocket 上传文件（龙卷风）

> ID：12662782
> 
> 赞同：0
> 
> 时间：2012-09-30T16:13:40.703
> 
> 标签：javascript, websocket, tornado

我在我的项目中使用了 tornado 的 websocket，我想使用 websocket 将文件（图像）发送到服务器并将其保存在本地服务器上。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:09:38.673

这是完全低效的。看看这个[答案](https://stackoverflow.com/questions/11080112/large-file-upload-with-websocket)。

此外，它主要是客户端解决方案 - 您需要按切片发送文件并按切片将其写入服务器。如果您将切片视为消息，您可以做到这一点。

# c# - 通知双向绑定中目标更改的源

> ID：12662785
> 
> 赞同：1
> 
> 时间：2012-09-30T16:13:53.260
> 
> 标签：c#, .net, xaml, binding, microsoft-metro

我正在构建一个 Windows 应用商店应用程序，并且我有一个 TextBox 绑定（双向模式）到我的 TaskItem 对象的字符串“title”属性。

在对此 TextBox 进行 UI 更改并将其传播回源*之后*，我需要进行一些处理。

我想知道是否有办法检测目标（TextBox 的 Text 属性）何时发生变化。我知道我可以通过处理 TextBox 的 LostFocus 事件来捕获这个事件，但是这个事件是在源更新*之前触发的。*

**更新：**

捆绑：

```
<ScrollViewer
            x:Name="itemDetail"
            DataContext="{Binding SelectedItem, ElementName=itemListView}">
    <TextBox x:Name="itemTitle" Text="{Binding Title, Mode=TwoWay}"/>
</ScrollViewer> 
```

类和属性：

```
class TaskItem
{
    public string Title { get; set; }
} 
```

我没有实现 INotifyPropertyChanged 因为我实际上不需要将更改从源传播到目标。

我可以想到两个解决方案：

*   有没有办法在属性的设置器上使用 [CallerMemberName] ？如果有，我也许能够确定“标题”是由我自己的代码更改还是由于绑定而更改。
*   在 LostFocus 事件期间，放弃双向绑定并手动更新源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T20:04:48.267

```
class TaskItem, INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    internal void NotifyPropertyChanged(String info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

    private string title;
    public string Title 
    { 
       get { return title; } 
       set 
       { 
           if (title == value) return;
           title = value;
           NotifyPropertyChanged("Title");
       }
    }
    public TaskItem (string -title) 
    { title = _title; }  
    // does not fire setter title lower case 
    // but the UI will have this value as ctor fires before render 
    // so get will reference the assigned value of title 
} 
```

[构造函数设计](http://msdn.microsoft.com/en-us/library/ms229060%28v=vs.100%29.aspx)

# ruby - 未定义的方法 `error_on' for false:FalseClass

> ID：12662789
> 
> 赞同：0
> 
> 时间：2012-09-30T16:14:35.933
> 
> 标签：ruby, rspec

运行我的规范后出现此错误，我的 /support 目录中有一个名为“validations.rb”的文件，在 spec_helper.rb 中有这一行

```
 Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f} 
```

所以它应该包括我的validations.rb文件，但我仍然收到未定义方法的错误，我做错了什么？

**验证.rb**

```
 ```
module ::ActiveModel::Validations
  def errors_on(attribute)
    self.valid?
    [self.errors[attribute]].flatten.compact
  end
  alias :error_on :errors_on
end 
``` 
            回答 #1

赞同：0

时间：2012-09-30T16:29:18.307

重新定义`errors_on`为`self.errors_on`

```

# html - 样式不适用于此表

> ID：12662792
> 
> 赞同：0
> 
> 时间：2012-09-30T16:14:47.807
> 
> 标签：html, css, asp.net-mvc-3

我暂时忽略了这一点，只是为了专注于工作部分。但是现在我更关心这部分并且它不会消失

```
<table cellspacing="0" cellpadding="0" style="border:none">
    <tr>
            <td class="editor-label" width="140px">
                @Html.LabelFor(model => model.UserName)
            </td>
            <td class="editor-field">
                @Html.DisplayFor(model => model.UserName)
            </td>
    </tr>
    ....

</table> 
```

如您所见，我将删除的单元格填充，单元格间距，添加的边框=无，但这些都没有修复它。为什么这个表对css没有响应？

行线不会消失。我想删除线条。

我还删除了所有类属性，`td`但这仍然不起作用

## 更新

我在 Style.css 中删除了它，它起作用了。**但是为什么我不能使用内联样式来覆盖样式表设置呢？**

```
table td {
    padding: 5px;
    border: solid 1px #e8eef4;
} 
```

现在，我将拥有自己的风格。为什么假设每个表都必须有行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:30:12.047

您的 CSS 中的某些内容是在您的 s上设置`border`属性或在. 如果没有在某处粘贴 CSS 和 HTML，就很难确定问题出在哪里。`td``border-collapse``table`

如果您想避开 CSS 文件，可以设置 CSS 内联。尝试其中一些：

```
<table style="border-collapse: collapse !important; border-spacing: 0 !important;"> 
```

或者

```
<td style="border: 0 !important;"> 
```

该`!important`关键字将覆盖外部样式表中设置的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:20:19.343

这将是

```
style="border:none;" 
```

如果有的话 - 用分号。

删除边框

```
table{
      border-collapse: collapse;
      border-spacing: 0;
} 
```

# php - 简单的逻辑错误

> ID：12662800
> 
> 赞同：-3
> 
> 时间：2012-09-30T16:16:16.167
> 
> 标签：php, mysql

我是php和mysql的新手，所以请告诉我我错在哪里。

这是我的 php 文件：

```
<?php
$c=mysql_connect("localhost","sanjay","");
if(!$c)
{
    die("Error in connecting to database");
}
else
{
    print("Success");
}

$e="CREATE DATABASE db1";
if(!mysql_query($e,$c))
{
    print("Error Creating Database");
}
else
{
    echo "Database Created";
}
mysql_select_db("db1",$c);

$e1="create table t1(id int,firstname varchar(15),lastname varchar(15),age int)";
if(!mysql_query($e1,$c))
{
    echo "Error creating table.";
}
else
{
    echo "table created";
}
?> 
```

我得到以下输出 -

```
SuccessError Creating DatabaseError creating table. 
```

我究竟做错了什么？正确的代码应该是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:30:19.420

我看不出您的代码有什么问题，所以我认为问题出在授予帐户的**访问权限上。**您应该[修改 mysql 访问权限](http://dev.mysql.com/doc/refman/5.1/en/grant.html)和**CREATE**`Grant`的用户权限（这是两者的特权：数据库和表创建）

# database - matlab数据访问数据库

> ID：12662801
> 
> 赞同：0
> 
> 时间：2012-09-30T16:16:30.707
> 
> 标签：database, matlab

## 我想将 exData 变量的数据（来自 MATLAB）导出到“DBS.accdb”Access 2007 数据库（表名：sayi，列名：toplam）。我试图在下面运行代码。但是它们导致了“无效连接”错误。

```
dataEx=sum_Up-sum_Down;
dbpath = ['C:\Users\t\Documents\DBS.accdb']; 
url = [['jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DSN='';DBQ='] dbpath];
con = database('','','','sun.jdbc.odbc.JdbcOdbcDriver', url);     
colnames={'toplam'};
fastinsert(con,'sayi',colnames,dataEx); 
```

* * *

哪里有问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T18:31:24.740

我不熟悉数据库部分，但 url 中的引号对我来说有点可疑。 `['DSN='';']`将呈现为`DSN=';`因为内部引号被转义，但我怀疑它应该是双引号，在这种情况下你需要`['DSN='''';']`. 所以我会尝试：

```
url = [['jdbc:odbc:Driver={Microsoft Access Driver (*.mdb, *.accdb)};DSN='''';DBQ='] dbpath]; 
```

# c# - QuartzTypeLib 库和字幕

> ID：12662802
> 
> 赞同：1
> 
> 时间：2012-09-30T16:16:45.133
> 
> 标签：c#, subtitle

我想用 C# 制作一个简单的媒体播放器，我使用 QuartzTypeLib 库来阅读视频，这很完美。但是，在下一步中，我希望我的播放器支持为电影添加字幕的功能。

我用谷歌搜索了它，但我没有找到任何对我来说简单和有用的东西。任何人都可以帮助，请。

提前致谢。

# c++ - 生成真正的随机数

> ID：12662810
> 
> 赞同：5
> 
> 时间：2012-09-30T16:17:24.313
> 
> 标签：c++, random, unique

> **可能重复：**
> [有效地生成随机数](https://stackoverflow.com/questions/8278907/generating-random-numbers-effectively)

我需要`random numbers`在我的`C++`应用程序中生成。看了这两篇文章就知道了——

[http://www.cprogramming.com/tutorial/random.html](http://www.cprogramming.com/tutorial/random.html)

[编写 ac 函数，生成一个随机数，或一对随机数，或给定特定范围的三组随机数](https://stackoverflow.com/questions/3786389/write-a-c-function-that-generates-one-random-number-or-a-pair-of-random-numbers/3786809#3786809)

- 可以使用生成随机数`srand()`，`rand()`但在这两种情况下，根据 的当前时间`system clock`用作`seed`. 但我在第一篇文章中读到，`rand()`如果种子相同，将创建相同的随机数。因此，如果两个不同的用户同时运行我的应用程序，那么他们将拥有相同的随机数。这将毫无意义，因为我需要随机数在大多数情况下是唯一的。（我知道如果它们是随机生成的，它们就不能真正 100% 唯一）

所以我的问题是我可以创建一个不基于系统时间的随机种子吗？如果可以，为什么`rand()`用相同的种子产生相同的数字，有没有办法`rand()`用相同的种子产生不同的数字，或者还有其他的吗生成随机数的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T16:24:00.380

如果不使用特殊的硬件（即使那样，它也值得商榷），就没有计算机生成的真正随机数这样的东西。

话虽如此; 您唯一的问题是：您如何生成种子，以使两个程序不会生成相同的数字。使用当前时间作为种子的*一部分*是合理的，但正如您所理解的，这还不够，因为两个程序可以同时生成它们的种子......所以您需要根据在程式。可能性包括进程 ID（如果两个程序在同一台计算机上会有所不同），硬件 MAC 地址（如果两个程序在不同的计算机上会有所不同），或计时用户执行某项任务所需的时间（通常只要用户是人，而不是自动化，就会有所不同）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T16:27:08.183

根据您的具体要求，您的解决方案可能很简单：

```
struct timeval;
gettimeofday(&time, NULL);
srand(hash3(time.tv_sec, time.tv_usec, getpid())); 
```

您可以使用任何三个整数散列函数，例如这个：

```
unsigned int hash3(unsigned int h1, unsigned int h2, unsigned int h3)
{
    return ((h1 * 2654435789U) + h2) * 2654435789U) + h3;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-30T16:28:57.203

除了其他答案之外，在 Linux（和其他一些 Unix）系统上，您可以从[/dev/random](http://en.wikipedia.org/wiki//dev/random)或`/dev/urandom`伪设备读取几个字节（至少为您的 PNRG 播种）。另请仔细阅读[random(4)](http://www.kernel.org/doc/man-pages/online/pages/man4/random.4.html)`/dev/random`手册页（其中也解释了和之间的重要区别`/dev/urandom`）

[如果为最新的C++2011](http://en.wikipedia.org/wiki/C++11)标准（而不是以前的标准）编码，您可能会对它的`<random>`标题感兴趣。然后使用最新的[GCC](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html)编译器（例如 4.7）和`libstdc++`库

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T16:33:56.750

实现真正的随机数生成器是不可能的，但有许多不错的伪随机函数实现可能会对您有所帮助：

1.  Boost.Random： http: [//www.boost.org/doc/libs/1_51_0/doc/html/boost_random.html](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_random.html)
2.  C++11`<random>`头文件：[http ://www.cplusplus.com/reference/std/random/](http://www.cplusplus.com/reference/std/random/)
3.  `<stdlib.h>`包含`rand()`函数的 C头文件： [http ://www.cplusplus.com/reference/clibrary/cstdlib/rand/](http://www.cplusplus.com/reference/clibrary/cstdlib/rand/)

# matlab - matlab中的pcolor映射

> ID：12662815
> 
> 赞同：1
> 
> 时间：2012-09-30T16:17:39.613
> 
> 标签：matlab, color-mapping

在matlab中，我们可以用pcolor来用颜色来表示数据的大小。我正在尝试以下数据

```
 A=[1:10; 16:25; 86:95];
 pcolor(A); 
```

它只显示两行。为什么会这样以及如何显示所有这三个数据集？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:49:25.830

来自[pcolor的文档](http://www.mathworks.se/help/matlab/ref/pcolor.html)

> > 在默认着色模式 'faceted' 中，每个单元格都有一个恒定的颜色，并且不使用 C 的最后一行和最后一列。

改用 imagesc

```
imagesc(A); 
```

# xslt - 用于合并具有相同名称和属性值的同级元素的 XSLT 2.0 解决方案

> ID：12662816
> 
> 赞同：4
> 
> 时间：2012-09-30T16:17:43.760
> 
> 标签：xslt, xslt-2.0

我正在寻找一种解决方案

```
<p>
<hi rend="bold">aa</hi>
<hi rend="bold">bb</hi>
<hi rend="bold">cc</hi>
Perhaps some text.
<hi rend="italic">dd</hi>
<hi rend="italic">ee</hi>
Some more text.
<hi rend="italic">ff</hi>
<hi rend="italic">gg</hi>
Foo.
</p> 
```

进入

```
<p>
<hi rend="bold">aabbcc</hi>
Perhaps some text.
<hi rend="italic">ddee</hi>
Perhaps some text.
<hi rend="italic">ffgg</hi>
Foo. 
</p> 
```

但我的解决方案不应该硬编码元素和属性值的名称（斜体、粗体）。XSLT 应该真正连接所有具有相同名称和相同属性值的兄弟元素。其他一切都应该保持不变。

我查看了已经存在的解决方案，但似乎没有一个能满足我的所有要求。

如果有人为此提供了方便的 XSLT 样式表，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T12:46:04.983

这个 XSLT 2.0 样式表将合并相邻元素与共同的rend 属性。

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output omit-xml-declaration="yes" indent="yes" />
<xsl:strip-space elements="*" />  

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:template match="*[*/@rend]">
  <xsl:copy>
    <xsl:apply-templates select="@*" />
    <xsl:for-each-group select="node()" group-adjacent="
       if (self::*/@rend) then
           concat( namespace-uri(), '|', local-name(), '|', @rend)
         else
           ''">
      <xsl:choose>
        <xsl:when test="current-grouping-key()" >
          <xsl:for-each select="current-group()[1]">
            <xsl:copy>
              <xsl:apply-templates select="@* | current-group()/node()" />
            </xsl:copy>
          </xsl:for-each>
        </xsl:when>
        <xsl:otherwise>
         <xsl:apply-templates select="current-group()" />
        </xsl:otherwise>
      </xsl:choose>
    </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

## 该解决方案相对于 Martin 解决方案的优势在于：

*   这会合并所有父元素，而不仅仅是 p 元素。
*   快点。合并是通过一个 xsl:for-each 而不是两个嵌套的 xsl:for-each 完成的
*   头部可合并元素的非渲染属性被复制到输出。

## 另请注意：

*   xsl:strip-space 指令完全消除了对纯空白节点的测试，该测试是为了确定具有通用名称和rend 属性值的“相邻”元素而排除的。因此 xsl:for-each 指令相当简单易读。
*   作为 group-adjacent 属性值的替代方案，您可以使用...

    ```
    <xsl:for-each-group select="node()" group-adjacent="
       string-join(for $x in self::*/@rend return
         concat( namespace-uri(), '|', local-name(), '|', @rend),'')"> 
    ```

    使用您个人认为更具可读性的任何形式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:30:09.007

该属性的名称（例如`rend`）是否已知？在那种情况下，我想你想要

```
<xsl:template match="p">
  <xsl:copy>
    <xsl:for-each-group select="*" group-adjacent="concat(node-name(.), '|', @rend)">
      <xsl:element name="{name()}" namespace="{namespace-uri()}">
         <xsl:copy-of select="@rend"/>
         <xsl:apply-templates select="current-group()/node()"/>
      </xsl:element>
     </xsl:for-each-group>
  </xsl:copy>
</xsl:template> 
```

[编辑]如果元素之间可以有带有内容的文本节点，如您在输入的编辑中所示，那么您需要嵌套到示例中的分组

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs">

<xsl:template match="p">
  <xsl:copy>
    <xsl:for-each-group select="node() except text()[not(normalize-space())]" group-adjacent="boolean(self::*)">
      <xsl:choose>
        <xsl:when test="current-grouping-key()">
          <xsl:for-each-group select="current-group()" group-by="concat(node-name(.), '|', @rend)">
            <xsl:element name="{name()}" namespace="{namespace-uri()}">
               <xsl:copy-of select="@rend"/>
               <xsl:apply-templates select="current-group()/node()"/>
            </xsl:element>
          </xsl:for-each-group>
        </xsl:when>
        <xsl:otherwise>
          <xsl:apply-templates select="current-group()"/>
        </xsl:otherwise>
      </xsl:choose>
     </xsl:for-each-group>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-06T15:43:23.080

In case a casual visitor should come along and wonder if there is an XSLT 1.0 solution for this problem, I offer the following. *Note that I am not trying to diminish from Sean and Martin's correct answers; I am merely offering some flavor.*

**When this XSLT 1.0 solution:**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key
     name="kFollowing" 
     match="hi" 
     use="concat(@rend, '+', generate-id(following-sibling::text()[1]))" />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <p>
      <xsl:apply-templates 
        select="
          hi[generate-id() = 
             generate-id(
           key('kFollowing', 
             concat(@rend, '+', generate-id(following-sibling::text()[1])))[1])]" />
    </p>
  </xsl:template>

  <xsl:template match="hi">
    <xsl:copy>
      <xsl:apply-templates 
        select="@*|key('kFollowing', 
          concat(@rend, '+', generate-id(following-sibling::text()[1])))/text()" />
    </xsl:copy>
    <xsl:apply-templates select="following-sibling::text()[1]" />
  </xsl:template>

</xsl:stylesheet> 
```

**...is applied to the OP's original XML:**

```
<p>
<hi rend="bold">aa</hi>
<hi rend="bold">bb</hi>
<hi rend="bold">cc</hi>
Perhaps some text.
<hi rend="italic">dd</hi>
<hi rend="italic">ee</hi>
Some more text.
<hi rend="italic">ff</hi>
<hi rend="italic">gg</hi>
Foo.
</p> 
```

**...the desired result is produced:**

```
<p>
<hi rend="bold">aabbcc</hi>
Perhaps some text.
<hi rend="italic">ddee</hi>
Perhaps some text.
<hi rend="italic">ffgg</hi>
Foo. 
</p> 
```

# jquery - AJAX返回null？

> ID：12662817
> 
> 赞同：5
> 
> 时间：2012-09-30T16:17:50.170
> 
> 标签：jquery, ajax

我正在尝试使用 ajax 从我的服务器获取信息。页面 xxx.php 是一个只有 123 的页面。但是，当我想返回该页面的内容时，它返回 null。

```
function myFunct(){
    $.ajax({
        url: 'xxx.php',
        success: function(data) {
            return data;
        }
    });
}

var data = myFunct(); //nothing. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T16:21:44.477

请注意，ajax 是“异步的”。因此，当 myFunct() 完成执行时，可能不会收到对服务器调用的响应。您可以将处理来自服务器调用的数据的逻辑放在 ajax 的“成功”中。

```
function myFunct(){
    $.ajax({
        url: 'xxx.php',
        success: function(data) {
           // processMyData(data);
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-30T16:27:19.497

AJAX 是**异步**的。

只有在其余代码完成运行**后**的某个时间，您才会收到响应。

相反，您需要使用回调返回值，就像这样`$.ajax`做：

```
function myFunct(callback){
    $.ajax({
        url: 'xxx.php',
        success: function(data) {
            // Do something to the data...
            callback(data);
        }
    });
}

myFunct(function(result) {
    ...
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T16:37:21.727

您可以在同步模式下使用（尽管建议使用异步回调以避免“冻结”代码）。

使用同步：

```
function myFunct(callback){
   return $.ajax({
        url: 'xxx.php',
        async: false
    }).responseText;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T16:31:46.223

尝试使用 ajax 错误处理，检查您的响应

```
function myFunct(){
$.ajax({
    url: 'xxx.php',
    success: function(data) {
        alert(data);
    },
    error:  function(jqXHR, textStatus){
       alert("Status: "+ jqXHR.status);
       alert("textStatus: " + textStatus);
    }

}); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T16:20:21.747

```
var globalVal;

    function myFunct(){
        $.ajax({
            url: 'xxx.php',
            success: function(data) {
                alert(data); // you can see you data
                globalVal= data;
            }
        });
    } 
```

// 它是对服务器的响应，响应稍后执行，您分配值

```
myFunct(); //nothing.
alert(globalVal) 
```

# ruby-on-rails - 尽管自定义验证无效，但 Mongoid 保存文档

> ID：12662818
> 
> 赞同：5
> 
> 时间：2012-09-30T16:17:52.110
> 
> 标签：ruby-on-rails, ruby, validation, associations, mongoid

我不确定这是 Mongoid 还是标准 Rails 验证器的问题，但无效的文档仍在保存到数据库中。

我的模型设置为：

```
class League
  include Mongoid::Document

  has_many :teams

  validate do
    if teams.size > 12
      errors.add(:teams, 'too many teams')
    end
  end
end

class Team
  include Mongoid::Document

  belongs_to :league
end 
```

我希望以下测试能够通过，但事实并非如此。而不是我的自定义验证阻止超过 12 支球队被添加到一个联赛中，联赛得到了 13 支球队的保存。

```
# Factory for a League.
FactoryGirl.define do
  factory :league do
  name "Test League"

  factory :league_with_teams do
    ignore do
      teams_count 5
    end

    after(:create) do |league, evaluator|
      FactoryGirl.create_list(:team, 
                              evaluator.teams_count, 
                              league: league)
    end
  end
end

describe League do
  it "should not allow more than 12 teams" do
    league = FactoryGirl.create(:league_with_teams, teams_count: 12)
    league.teams << FactoryGirl.create(:team)
    league.should_not be_valid # passes
    League.find(league.id).teams.size.should eq(12) # fails
  end
end 
```

有趣的是，如果我在测试中更改添加第 13 个团队的行以使用 build 而不是 create, `league.teams << FactoryGirl.build(:team)`，那么测试通过。然而，这不是一个解决方案，因为我想保证一个联赛不能超过 12 支球队，无论添加的球队是新的还是已经在数据库中。

有没有办法保证这一点？

**编辑**

像我在下面所做的那样，向 Team 模型添加验证器似乎也不起作用。

```
class Team
  include Mongoid::Document

  belongs_to :league

  validate do |team|
    if league.teams.size > 12
      errors.add :base, "cannot have more than 12 teams in a league"
    end
  end
end 
```

我认为问题与`<<`and`push`是原子操作有关，因此它们跳过回调和验证。话虽这么说，这一定是一个相当常见的用例，不是吗？那么其他人如何验证被引用的文档数量呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T02:00:55.143

我不认为问题出在方法上`<<`，`push`因为它们都应该触发模型的验证。

尝试使用：

`league.teams << FactoryGirl.create(:team, league: league)`

# java - 引入新警告时如何使构建失败

> ID：12662822
> 
> 赞同：12
> 
> 时间：2012-09-30T16:18:31.953
> 
> 标签：java, maven-2, continuous-integration, build-automation

我们正在开发一些旧的 java 项目。该代码有很多警告，但我想避免引入新警告。有没有办法用maven，bamboo来做到这一点。我们无权在竹子（公司）上安装新插件，因此首选 maven 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:42:07.110

好吧，我同意没有插件可以做到这一点，但您可以使用 java 1.7 以简单的步骤做到这一点。

在编译时使用处理器来编译您的代码并维护在日志文件中生成的警告。每次您触发构建时，它都会启动，您可以将旧日志文件与新日志文件进行比较。

注意：在 jdk 1.6 和 1.5 中，您可以使用 APT 工具进行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:06:29.917

您可以使用[checkstyle](http://checkstyle.sourceforge.net/)任务，在报告生成完成后，您可以使用 xslt 提取警告数量（如果报告是 xml，我相信其他报告格式也可用）。

然后，使用 ant 任务，您可以比较当前构建中的警告数量与可接受的警告数量（如果您想花哨的话，它可以是某处的硬编码数字或从以前的构建工件中获取）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T13:09:36.593

如果您使用的是 eclipse，则可以添加注释 (@IgnoreWarnings) 以忽略现有警告。但是你必须在任何有警告的地方修改源代码。

使用 PMD (http://pmd.sourceforge.net/) 和/或 findbugs (http://findbugs.sourceforge.net/) 可能有更智能的解决方案。许多环境都可以作为插件使用。

您还可以决定修复您修改的类中的所有警告。当然，这意味着每个开发人员都倾向于这样做......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T15:07:50.150

这里重要的词是“**新**”——
您正在构建日志中寻找*新的警告*，无论它们的严重性或来源如何。

为此，您需要拥有当前警告集的“快照”：

*   复制“良好”构建的输出及其所有警告。

*   在每个新构建之后（假设它没有失败），将新日志与保存的日志进行比较 - 日志中的
    *任何更改都意味着您有一个新的警告*。

干杯

# twitter-bootstrap - Twitter bootstrap typeahead 多个值？

> ID：12662824
> 
> 赞同：46
> 
> 时间：2012-09-30T16:18:36.863
> 
> 标签：twitter-bootstrap, typeahead

我正在使用带有 Jquery 的 Twitter Bootstrap。我想将*TYPEAHEAD*函数用于 textarea，我可以非常轻松地工作。但我也需要它来允许*多项选择*。

我的意思是，在我从自动完成中选择一个单词后，它会带我回到 textarea 并留出一个额外的空间，然后如果我再次开始输入，它会让我再次输入。

这是一个 JS bin： http: [//jsbin.com/ewubuk/1/edit](http://jsbin.com/ewubuk/1/edit) （里面没什么特别的）。

**是否有一个简单的解决方案可以通过预先输入进行多项选择？如果是，如何？**

提前致谢。

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-30T17:39:25.317

**编辑**已经有一个拉动：[https ://github.com/twitter/bootstrap/pull/2007](https://github.com/twitter/bootstrap/pull/2007)

* * *

您可以通过使用 typeahead 的代理来接近所需的行为：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/BwDmM/2/)

```
var $myTextarea = $('#myTextarea');

$('.typeahead').typeahead({
    source: source,
    updater: function(item) {
        $myTextarea.append(item, ' ');
        return '';
    }
}); 
```

我认为该`updater`方法适用于这种事情，您只需返回将显示的内容。

* * *

或者**，如果您真的希望所有内容都在同一个输入元素**中，则必须覆盖更多方法，使其仅匹配当前键入的元素：[Demo (jsfiddle)](http://jsfiddle.net/Sherbrow/BwDmM/300/)

```
function extractor(query) {
    var result = /([^,]+)$/.exec(query);
    if(result && result[1])
        return result[1].trim();
    return '';
}

$('.typeahead').typeahead({
    source: source,
    updater: function(item) {
        return this.$element.val().replace(/[^,]*$/,'')+item+',';
    },
    matcher: function (item) {
      var tquery = extractor(this.query);
      if(!tquery) return false;
      return ~item.toLowerCase().indexOf(tquery.toLowerCase())
    },
    highlighter: function (item) {
      var query = extractor(this.query).replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, '\\$&')
      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {
        return '<strong>' + match + '</strong>'
      })
    }
}); 
```

这不是白痴证明，因为您必须在特殊字符之后键入最后。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-17T12:18:02.980

这是选择框的绝佳替代品：

[http://ivaynberg.github.io/select2/](http://ivaynberg.github.io/select2/)

（如果您使用多值版本。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-10-17T15:15:14.363

最佳答案似乎不再适用于最新的[typeahead](https://twitter.github.io/typeahead.js)，所以我提供以下内容。

[小提琴](https://jsfiddle.net/qoafyw16/)

```
function MultiTypeahead(id, data, trigger, vertAdjustMenu)
{
    trigger = (undefined !== trigger) ? trigger : '';
    var validChars = /^[a-zA-Z]+$/;

    function extractor(query)
    {
        var result = (new RegExp('([^,; \r\n]+)$')).exec(query);
        if(result && result[1])
            return result[1].trim();
        return '';
    }

    var lastUpper = false;
    function strMatcher(id, strs) 
    {
        return function findMatches(q, sync, async) 
        {
            var pos = $(id).caret('pos');
            q = (0 < pos) ? extractor(q.substring(0, pos)) : '';

            if (q.length <= trigger.length)
                return;

            if (trigger.length)
            {
                if(trigger != q.substr(0, trigger.length))
                    return;

                q = q.substr(trigger.length);
            }

            if (!q.match(validChars))
                return;

            var firstChar = q.substr(0, 1);
            lastUpper = (firstChar === firstChar.toUpperCase() && firstChar !== firstChar.toLowerCase());

            var cpos = $(id).caret('position');
            $(id).parent().find('.tt-menu').css('left', cpos.left + 'px');
            if (vertAdjustMenu)
                $(id).parent().find('.tt-menu').css('top', (cpos.top + cpos.height) + 'px');

            var matches = [];
            var matches = [], substrRegex = new RegExp(q, 'i');
            $.each(strs, function(i, str) 
            {
                if (str.length > q.length && substrRegex.test(str))
                    matches.push(str);
            });

            if (!matches.length)
                return;

            sync(matches);
        };
    };

    var lastVal = '';
    var lastPos = 0;
    function beforeReplace(event, data)
    {
        lastVal = $(id).val();
        lastPos = $(id).caret('pos');
        return true;
    }

    function onReplace(event, data)
    {            
        if (!data || !data.length)
            return;

        if (!lastVal.length)
            return;

        var root = lastVal.substr(0, lastPos);
        var post = lastVal.substr(lastPos);

        var typed = extractor(root);
        if (!lastUpper && typed.length >= root.length && 0 >= post.length)
            return;

        var str = root.substr(0, root.length - typed.length);

        str += lastUpper ? (data.substr(0, 1).toUpperCase() + data.substr(1)) : data;
        var cursorPos = str.length;

        str += post;

        $(id).val(str);
        $(id).caret('pos', cursorPos);      
    }

    this.typeahead = 
        $(id).typeahead({hint: false, highlight: false}, {'limit': 5, 'source': strMatcher(id, data)})
                .on('typeahead:beforeselect', beforeReplace)
                .on('typeahead:beforeautocomplete', beforeReplace)
                .on('typeahead:beforecursorchange', beforeReplace)
                .on('typeahead:selected', function(event,data){setTimeout(function(){ onReplace(event, data); }, 0);})
                .on('typeahead:autocompleted', onReplace)
                .on('typeahead:cursorchange', onReplace)
                ;
} 
```

**编辑：**意识到以前的代码有太多额外的东西，我把它缩小到一个最小的工作示例。

[这](http://bl.ocks.org/wheresjames/9643ce9d0a83ef30b36fc16d5a18e0ac)是之前发的。。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-30T16:58:31.673

我想您可以编辑插件以允许多项选择（只是不要关闭下拉菜单）并添加以逗号分隔的选定值。我看到的唯一问题是您不知道何时关闭下拉菜单。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-04-01T18:56:15.780

我迟到了，但这是我为 Bootstrap v4 提出的。它还需要 d3（因为我对 jQuery 不太熟悉）。

[您可以在http://sumneuron.gitlab.io/multitags/](http://sumneuron.gitlab.io/multitags/)看到一个运行示例 [![在此处输入图像描述](../Images/a5c40f40b65e11d2f9812629bf2d2e00.png)](https://i.stack.imgur.com/OxZCN.png)

它有一些有用的功能，写得很清楚，应该让任何发现这一点的人有一个好的开始。特别是如果您对如何实现标记感到好奇。

[![在此处输入图像描述](../Images/b93c9d32f382cbfb0874de594084571b.png)](https://i.stack.imgur.com/gVHoG.png)

代码可在[https://gitlab.com/SumNeuron/multitags/pipelines](https://gitlab.com/SumNeuron/multitags/pipelines)

逻辑大致如下：

```
if keydown in [enter, ","]:
    // logic of function "doneTyping" 
    text = parse(text) // get text from textarea and grab latest value
    if text is valid:
        renderTag(text) // put the text in a tag element
        updateHiddenForm(text) // update the hidden form to include the tag
    else:
        notifyUserOfInvalidTag(text) // alert user
else:
    // logic of function "stillTyping" 
    suggest = bloodhoundSearch(text) // use twitter typeahead
    updateSuggestionBox(suggest) // display results from typeahead 
```

# objective-c - 为二维数组的大小声明常量

> ID：12662828
> 
> 赞同：2
> 
> 时间：2012-09-30T16:19:02.903
> 
> 标签：objective-c, arrays, constants

我正在开始使用 Objective-C，我正在尝试创建一个多维数组`integers`，这就是我的做法：

**文件 Constants.h（添加在 Prefix.pch 文件中）**

```
typedef enum {
    BOARD_WIDTH=10,
    BOARD_HEIGHT=20
} BoardSizeEnum; 
```

**文件板.m**

```
@implementation Board
{
    NSInteger mBoard[BOARD_WIDTH][BOARD_HEIGHT];
} 
```

我尝试了许多为我创建常量的方法`width`，`height`并且这种方法是唯一一种看起来（相当）正确的方法......我也尝试过，`define`但我不喜欢这个，因为它没有输入（我想错了吗？ )...

有没有更好的方法来创建这个？感觉不是很干净。。。

**编辑：** `NSInteger*`到`NSInteger`，我显然想要一个数组`integers`，而不是指针。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:21:36.223

你不应该这样声明尺寸。当您有多个选项并且想要为每个选项命名（而不仅仅是使用数字）时，通常会使用枚举。

要为您的数组声明常量，您有几个选择。

1.  使用**预处理器宏**：

    `#define BOARD_WIDTH 10`

2.  使用**常量**：

    `static const int boardWidth = 10;`

你的声明是错误的。您正在声明一个二维`NSInteger` **指针**数组。它应该是这样的：

```
// assuming width and height is declared as described above.
NSInteger mBoard[width][height]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:23:28.343

```
NSMutableArray *words[26];
    for (i = 0;i<26;) {
    words[i] = [[NSMutableArray alloc] init];
    } 
```

你可以像这样使用它

```
[words[6] addObject:myInt];
[words[6] insertObject:myInt atIndex:4];
[words[6] objectAtIndex:4];
//in this case 6 is the column number and 4 is the row. 
```

# android - 链接到网站的按钮不起作用

> ID：12662829
> 
> 赞同：0
> 
> 时间：2012-09-30T16:19:13.197
> 
> 标签：android, button

我有 2 个按钮，一个指向 Twitter URL，一个指向 Play Store URL。Twitter 可以工作，但 Play 商店按钮却不行。代码如下。

```
 //TWITTER BUTTON
    Button bt1 = (Button) findViewById(R.id.bTwitter);
    bt1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
                sendToTwitter();
        }
    });
}
            protected void sendToTwitter() {
                    String url = "http://twitter.com/neilk27";
                    Intent i = new Intent(Intent.ACTION_VIEW);
                    i.setData(Uri.parse(url)); 
                    startActivity(i);

    //DONATE BUTTON    
    Button bd1 = (Button) findViewById(R.id.bDonate);
    bd1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                    sendToStore();
            }
        });
    }
                protected void sendToStore() {
                        String url1 = "https://play.google.com/store/apps/developer?id=NK+Apps";
                        Intent i1 = new Intent(Intent.ACTION_VIEW);
                        i1.setData(Uri.parse(url1)); 
                        startActivity(i1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:23:27.627

我不确定，但你的花括号似乎引起了一些问题。尝试这个 ：

```
Button bt1 = (Button) findViewById(R.id.bTwitter);
bt1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        sendToTwitter();
    }
});
protected void sendToTwitter() {
    String url = "http://twitter.com/neilk27";
    Intent i = new Intent(Intent.ACTION_VIEW);
    i.setData(Uri.parse(url)); 
    startActivity(i);
}
//DONATE BUTTON    
Button bd1 = (Button) findViewById(R.id.bDonate);
bd1.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        // TODO Auto-generated method stub
        sendToStore();
    }
});
protected void sendToStore() {
    String url1 = "https://play.google.com/store/apps/developer?id=NK+Apps";
    Intent i1 = new Intent(Intent.ACTION_VIEW);
    i1.setData(Uri.parse(url1)); 
    startActivity(i1);
} 
```

# javascript - 如果此项目有背景，则更改菜单项的字体颜色

> ID：12662833
> 
> 赞同：0
> 
> 时间：2012-09-30T16:20:01.950
> 
> 标签：javascript, css, menu, navigation, menuitem

我在这个域 keksik.com 上创建了一个新站点，在这里您可以看到顶部的导航菜单。

问题是我需要活动菜单项的字体颜色为黑色，即使它没有悬停。当我将鼠标悬停在子项上时，同样的事情应该应用于父菜单项。

所以，如果菜单项有背景图像，我想我需要在这里使用 javascript 将字体颜色动态更改为黑色。

我试图将此代码添加到头部，但没有任何变化：

```
<script type="text/javascript">

$(document).ready(function(){
    if ($(#top #nav li).css('background') == 'url(images1/mtbg.gif) no-repeat left center') {
    $(#top #nav li a).css('color', 'black');
  }  

});
</script> 
```

所以，我希望你能帮助我解决这个问题。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:45:18.550

嗯..不确定我是否理解，但也许这样的事情会起作用：

```
var strBG = "url(images1/mtbg.gif) no-repeat left center";
$("#top #nav li a").live("hover", function(){
    if ($(this).parent().css("background") == strBG)
    {
        $(this).css("color", "black");
        $(this).parent().css("color", "black");
    }
});
$("#top #nav li").live("hover", function(){
    if ($(this).css("background") == strBG)
    {
        $(this).css("color", "black");
        $(this).find("a").css("color", "black");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:49:49.130

我不太确定你在问什么，但你为什么不能用这个：

```
#top #nav li.active, 
#top #nav li.active:hover {
    color: black;
} 
```

那有什么问题？

# c# - 从字符串参数生成代码

> ID：12662845
> 
> 赞同：0
> 
> 时间：2012-09-30T16:21:22.390
> 
> 标签：c#, asp.net, .net, code-behind

我有一个名为 Template 的类在类中我有方法`Render(string)`；

我必须向这个方法模板发送数据，例如，我发送了：

```
<% for ( int i = 0; i < 5; i++ ) { Console.WriteLine("*") } %> 
```

方法 Render 得到这个字符串并在我的 cmd 上写*****我需要说，我可以用这种方式声明局部变量、循环和语言 C# 的其他语法（ <% %> ）

请告诉我，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T16:57:39.117

我想你的意思是：

```
private void Render(string words)
{
    for (int i = 0; i < 5; i++)
    {
        Console.WriteLine(words);
    }
} 
```

然后以您的形式：

```
<% Render("hello, world") %> 
```

# windows - Windows Aero 窗口预览自定义按钮

> ID：12662850
> 
> 赞同：2
> 
> 时间：2012-09-30T16:22:06.480
> 
> 标签：windows, qt

Windows 7 上的某些应用程序（不确定 Vista）在其 Aero 窗口预览中具有自定义按钮，位于实际窗口预览图像下方，如下所示：

![在此处输入图像描述](../Images/fa08b7df73f5f0711810453b5762ff92.png)

如果可能的话，我将如何在 Qt 应用程序中实现它？我也愿意接受任何可能需要我玩弄本机 WinAPI 东西的解决方案。

感谢你们可能有的任何想法/指针/回复。

# html - 将带有 HTML 代码的字符串注入和解释到 JSF 页面的组件

> ID：12662851
> 
> 赞同：17
> 
> 时间：2012-09-30T16:22:37.393
> 
> 标签：html, jsf, jsf-2, primefaces, escaping

我正在使用带有 JSF 2.0 的 PrimeFaces 来构建一个应用程序。我正在使用 PrimeFaces`<p:editor>`组件使用户能够创建富文本。但是这个组件的输出是 HTML 源代码，看起来像这样：

```
String text = "<p>This text <i>contains</i> some <b>HTML</b> code.</p>"; 
```

当我`<h:outputText>`如下所示时：

```
<h:outputText value="#{bean.text}" /> 
```

然后它将 HTML 代码显示为纯文本：

> <p>此文本<i>包含</i>一些<b>HTML</b>代码。</p>

是否有任何组件可以解释 HTML 源代码，以便例如`<i>`实际显示为斜体和`<b>`粗体？

> 此文本*包含*一些**HTML**代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-30T17:05:26.233

JSF 默认从支持 bean 属性中转义 HTML 以防止 XSS 攻击漏洞。要禁用此功能，只需将 的`escape`属性设置`<h:outputText>`为`false`。

```
<h:outputText ... escape="false" /> 
```

这样 HTML 就不会被转义，因此会被网络浏览器解释。

* * *

**与具体问题无关**，请注意 XSS 攻击，因为您在这里基本上重新显示未转义的用户控制输入。您可能需要事先对其进行消毒。

*   [XSS 背后的一般概念是什么？](https://stackoverflow.com/questions/2233015/what-is-the-general-concept-behind-xss/)
*   [JSF中的CSRF、XSS和SQL注入攻击防范](https://stackoverflow.com/questions/7722159/csrf-xss-and-sql-injection-attack-prevention-in-jsf/)
*   [JSF 的服务器端 HTML 清理程序/清理程序](https://stackoverflow.com/questions/23167104/html-sanitizer-for-jsf)
*   [在 h:outputText 中转义除换行符之外的所有内容](https://stackoverflow.com/questions/20543857/escape-everything-but-linebreaks-in-houtputtext/)

# objective-c - EXEC_BAD_ACCESS（代码=1）

> ID：12662854
> 
> 赞同：0
> 
> 时间：2012-09-30T16:22:45.927
> 
> 标签：objective-c, ios

一切正常，直到我添加了一个新的 NSNUmber 变量。

我的 .h 文件看起来有这个 -

```
NSNumber *foodPriceTotal;
@property (assign, readwrite) NSNumber *foodPriceTotal; 
```

在我的 .m 文件中，我有 -

```
@synthesize foodPriceTotal; 
```

在我的 Initwithnibname 方法中，我这样做 -

```
foodPriceTotal = [[NSNumber alloc] init]; 
```

在我的 cellForRowAtIndexPath 函数中，我这样做

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
CGFloat deliveryCharge = [prefs floatForKey:@"deliveryCharge"];
foodPriceTotal = [NSNumber numberWithFloat:([foodPriceTotal floatValue] + deliveryCharge)]; 
```

上下滚动时出现错误 EXEC_BAD_ACCESS(Code=1) -

错误的线是 -

```
foodPriceTotal = [NSNumber numberWithFloat:([foodPriceTotal floatValue] + deliveryCharge)]; 
```

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T16:33:25.620

正如 Till 指出的那样，您的所有权限定符 ( `assign`) 不是您想要的。在 99% 用`NSNumber`你想要的`copy`代替。

然后稍后，使用访问器方法：

```
self.foodPriceTotal = ... 
```

根本没有理由将该`NSNumber *foodPriceTotal`声明放入您的 .h 文件中，只需删除该行即可。

关于您的`init`方法，您可能需要重新考虑您的逻辑。这里没有任何值的数字是什么？可能`nil`同样好，更清晰。

# sml - SML 中的 If Else 中的多个语句

> ID：12662858
> 
> 赞同：3
> 
> 时间：2012-09-30T16:23:25.660
> 
> 标签：sml, smlnj

我想使用 if (condition) then Statement 1 , statement 2, ... else statement 1, statement 2,... ; 在 SML 编程语言中。我不能使用简单的空格或,。如果这可能的话，有什么建议吗？注意：我不是说嵌套 if else。不过很清楚。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T16:32:51.567

您可以使用该构造`(expr1; expr2; ... ; exprn)`按顺序执行多个表达式。所以：

```
if condition then (
  expression1;
  expression2
) else (
  expression1;
  expression2
) 
```

# mysql - mysql_stmt_close 时的段错误

> ID：12662868
> 
> 赞同：3
> 
> 时间：2012-09-30T16:24:40.083
> 
> 标签：mysql, c, linux, segmentation-fault, prepared-statement

我正在尝试使用 C API 查询 mysql 5.5。
dbutil.c 包含样板代码：

```
#include "../include/dbutil.h"
#include "../include/logging.h"
#include "../include/common.h"

MYSQL get_connection(char *host, char *user, char *passwd, char *db) {
    MYSQL conn;
    mysql_init(&conn);
    if (!mysql_real_connect(&conn, host, user, passwd, db, 0, NULL, 0)) {
        log_to_console("Cannot connect to MySQL server: %s", mysql_error(&conn));
        exit(1);
    }
    return conn;
}

MYSQL_STMT prepare_stmt(MYSQL *conn, char *sql) {
    MYSQL_STMT *stmtP = mysql_stmt_init(conn);
    if (!stmtP) {
        log_to_console("Cannot create statement, out of memory.");
        exit(1);
    }

    MYSQL_STMT stmt = *stmtP;

    if (mysql_stmt_prepare(&stmt, sql, strlen(sql))) {
        log_to_console("Preparing statement failed: %s", mysql_error(conn));
        exit(1);
    }

    return stmt;
}

void bind_param(MYSQL_BIND *param, enum enum_field_types fieldType, char* buffer, my_bool *isNull, unsigned long *length) {
    param->buffer_type = fieldType;
    param->buffer = buffer;
    param->is_null = isNull;
    param->length = length;
}

void bind_string_param(MYSQL_BIND *param, int stringSize, char* buffer, my_bool *isNull, unsigned long *length) {
    bind_param(param, MYSQL_TYPE_STRING, buffer, isNull, length);
    param->buffer_length = stringSize;
}

void bind_result(MYSQL_BIND *result, enum enum_field_types fieldType, char* buffer, my_bool *isNull, unsigned long *length) {
    bind_param(result, fieldType, buffer, isNull, length);
}

void bind_string_result(MYSQL_BIND *result, int stringSize, char* buffer, my_bool *isNull, unsigned long *length) {
    bind_string_param(result, stringSize, buffer, isNull, length);
} 
```

这是实际运行查询的代码：

```
#include "../include/dbutil.h"

int main() {
    MYSQL conn = get_connection("localhost", "user", "pass", "test");
    MYSQL_STMT stmt = prepare_stmt(&conn, "SELECT hostname from hosts where id = ?");
    MYSQL_BIND param[1], result[1];

    memset(param, 0, sizeof(param));
    memset(result, 0, sizeof(result));

    int in = 1;
    unsigned long length = 200;
    my_bool isNull[2];
    isNull[0] = 0;

    char out[200];
    bind_param(&param[0], MYSQL_TYPE_LONG, (char *) &in, &isNull[0], (unsigned long *)0);
    bind_string_result(&result[0], 200, (char *) &out, &isNull[1], &length);

    mysql_stmt_bind_param(&stmt, param);
    mysql_stmt_execute(&stmt);
    mysql_stmt_bind_result(&stmt, result);
    mysql_stmt_store_result(&stmt);
    mysql_stmt_fetch(&stmt);

    printf("Restult %s\n", out);

    mysql_stmt_close(&stmt);
    mysql_close(&conn);

    return 0;
} 
```

语句执行并返回预期结果，但代码在命中时出现段错误

```
mysql_stmt_close(&stmt); 
```

我浏览了核心转储，发现段错误是由 libc free() 语句引起的，我认为它是在 libmysql.c 的 free_root() 中调用的，在

```
my_bool STDCALL mysql_stmt_close(MYSQL_STMT *stmt)
{
  MYSQL *mysql= stmt->mysql;
  int rc= 0;
  DBUG_ENTER("mysql_stmt_close");

  free_root(&stmt->result.alloc, MYF(0));
  free_root(&stmt->mem_root, MYF(0));
  free_root(&stmt->extension->fields_mem_root, MYF(0));
... 
```

再具体一点。核心转储说 *stmt.extension 是语句关闭发生的时间。任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T01:41:28.153

在此处查看 out 参数：

```
char out[200];
...
bind_string_result(&result[0], 200, (char *) &out, &isNull[1], &length); 
```

如果您看到您的 bind_string_result 声明：

```
void bind_string_result(MYSQL_BIND *result, int stringSize, char* buffer, my_bool *isNull, unsigned long *length) { 
```

该函数期望`char *`在您发送指向 a 的指针时接收类型参数，`char *`换句话说`char **`

由于您将参数转换为，编译器不会给您任何警告，`char *`但它可能会在您的内存中产生冲突。尝试调用你的函数：

```
bind_string_result(&result[0], 200, out, &isNull[1], &length); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:00:05.250

听起来代码/库正在尝试`free()`一些已经释放的内存。

经过一番谷歌搜索，我找到[了这个链接。](http://bugs.mysql.com/bug.php?id=73)看来您应该`stmt`在调用`mysql_stmt_close()`. 如果`stmt`已为 NULL，则库已将其清理干净，无需调用`mysql_stmt_close()`.

# ruby - Ruby 的 Test::Unit 2.x 测试 - 如何生成 xml 报告？

> ID：12662874
> 
> 赞同：1
> 
> 时间：2012-09-30T16:25:45.297
> 
> 标签：ruby, testunit, xunit

我很好奇是否可以生成一个包含测试结果的文件？完美，它将是一个 xUnit 可移植的 xml 文件。实际上没关系，因为它可以解析它（html或其他）并自己创建一个xml文件。

换句话说，我想知道如何为 Ruby Test::Unit 生成输出测试文件。

# java - Google App Engine (Java)：servlet、数据存储和多线程

> ID：12662875
> 
> 赞同：1
> 
> 时间：2012-09-30T16:25:51.883
> 
> 标签：java, google-app-engine, servlets

我正在使用谷歌应用引擎制作一个网站，但我对服务器端 servlet 以及它们如何与数据存储数据库交互有疑问。

基本上，它回到了传统的 read-modify-write 竞争条件；即我正在从数据存储中读取一个实体，可能会对其进行更新，然后如果有更新则写入更新。

基本上，我可以同步对数据存储的访问吗？我需要吗？据我了解，服务器可以根据需要生成尽可能多的 servlet 实例；我在“幕后”的东西中使用了静态方法，所以我确实认为我可以将静态方法与静态锁对象同步。

基本上，我不知道我需要/不需要采取哪些针对竞争条件/等的防御措施。如果某处有方便的指南，那就太好了，但我似乎找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:28:23.270

在这里没有任何`synchronized`策略可以帮助您，因为 GAE 不仅可以（仅）生成许多 servlet 实例，还可以生成许多不同的 VM。为了解决有关防止数据存储一致性问题的基本问题，您必须在原子事务中访问您的数据。在这里检查：[交易](https://developers.google.com/appengine/docs/python/datastore/transactions)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T20:17:47.903

我不知道 GAE 和他们的数据存储，但在标准 servlet 中，容器只创建每个 servlet 的一个实例并同时访问该 servlet。这对您的问题没有太大变化。

同步对数据存储的访问是一个坏主意。首先，这将很快成为一个瓶颈，因为只有一个客户端可以访问数据库，而其他所有客户端都必须等待。这是无法接受的。如果您的应用程序部署在多台服务器上，您的解决方案也会中断。`synchronized`块不聚集。

您正在寻找的是**交易**- 似乎[App Engine Datastore 支持它们](https://developers.google.com/appengine/docs/java/datastore/transactions?hl=pl)。

# c# - 有没有办法告诉哪些 c# 对象没有被垃圾收集？

> ID：12662879
> 
> 赞同：0
> 
> 时间：2012-09-30T16:26:45.200
> 
> 标签：c#, .net, memory-leaks, garbage-collection, profiling

> **可能重复：**
> [哪些策略和工具可用于查找 .NET 中的内存泄漏？](https://stackoverflow.com/questions/134086/what-strategies-and-tools-are-useful-for-finding-memory-leaks-in-net)

我有一个程序在运行一段时间后出现“内存不足”异常。这是一个相当复杂的程序，涉及很多异步的东西。与其从代码开始诊断问题，我认为如果我能分辨出哪些对象在没有被垃圾收集的内存中弄乱了，这可能会给我一个先机。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:03:01.607

如果您使用线程来异步您对线程的代码控制，例如同时运行特定线程，例如在完成此运行后仅同时运行 10 个线程，则运行下一个 10 个线程，并且如果您正在创建任何非托管对象，请显式处理它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:33:37.573

即使您可以使用分析器来检查对象，但有时当您有很多异步内容时，您无法相应地更改您的逻辑。

通常，我们通过使用事件处理程序模式在不知不觉中造成内存泄漏。

我有一些关于此的帖子：http: [//www.codeproject.com/Articles/123448/GC-Algorithm-and-Story-of-WeakReference](http://www.codeproject.com/Articles/123448/GC-Algorithm-and-Story-of-WeakReference)

[http://www.abhisheksur.com/2012/02/optimizing-inpc-objects-against-memory.html](http://www.abhisheksur.com/2012/02/optimizing-inpc-objects-against-memory.html)

它们不是针对您的问题的，但它可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T03:35:57.207

我肯定会使用分析器，我用于内存分析的最好的之一是 SciTech 的内存分析器[Scitech .NET Memory Profiler](http://memprofiler.com/)

# php - 如何使用 ajax 发送具有输入类型图像的表单以防止重定向/重新加载

> ID：12662884
> 
> 赞同：3
> 
> 时间：2012-09-30T16:27:12.103
> 
> 标签：php, jquery, html

我对 ajax 请求以及它如何处理输入类型图像有疑问。我有一个图像列表，全部显示在某个特定位置，我需要用户单击他或她想要的图像，当这种情况发生时，它会被添加到他们自己的自定义列表中。该列表显示在屏幕底部，这意味着他们选择的所有图像都将出现在屏幕底部的自己的框中。所以这个概念是我有一个表格，输入为“图像”类型。这是标记：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>userList</title>
<link type="text/css" rel="stylesheet" href="style.css" />
</head>
<body>
//choose div containg all the images:
<div id="choose"><div id="inside">PICK AN IMAGE:<hr>
//the images will be loaded here in this form
<form type="" method="post" action="">
<input type="image" id="send" name="send" value="images/Woman-02-june.png" src="images/Woman-02-june.png"/>
<input type="image" id="send" name="send" value="images/Man-01-June.png" src="images/Man-01-June.png"/>
</form>
</div></div>
//list div that would display the images the user has chosen
<div id="list"><?php
if(file_exists("list.html") && filesize("list.html") > 0){
    $handle = fopen("list.html", "r");
    $contents = fread($handle, filesize("list.html"));
    fclose($handle);

    echo $contents;
}
?></div>
</body>
</html> 
```

因此，当用户单击图像时，应该将其发送到脚本，该脚本将发送的数据写入文件。然后该文件被加载并显示在“列表”中。这是脚本：

```
<?php
//get data from array
$pikc=$_POST['send'];
//open file to append
$fp=fopen("list.html", 'a');
//write data to file
fwrite($fp,  "<div class='msgln'>"."<img src=\"".$pikc."\">"."<br>"."</div>");
//close the file        
fclose($fp);

?> 
```

如您所见，发送的数据是单击的图像的“值”，以便获取并执行连接以将其包含在图像的标记中。我知道我需要使用 ajax 来做到这一点，所以这里是它的 ajax：

```
<script type="text/javascript" src="jquery-1.8.0.min (1).js"></script>
<script type="text/javascript">
$(document).ready(function(){
//If user submits the form
$("#send").click(function(){    
    var clientmsg = $("#send").val();
    $.post("post.php", {send: clientmsg});              

    return false;
});

});
</script> 
```

然后我包含另一个功能，该功能可以自动滚动和不断显示“列表”，我对此没有任何问题，它工作正常，所以我不会发布它。问题是，每当我点击第一张图片时，一切似乎都很好，数据被发送到脚本而无需重新加载，但每当我点击第二张图片时，我的浏览器都会将我带到脚本页面，虽然文件随内容更新。我该如何解决这个问题，以停止任何重新加载或重定向？请注意，这只是一个“模拟测试”，真实的东西将从 mysql 数据库加载数据，这就是为什么我对两个图像使用相同的 id。它看起来像这样：

```
//after establishing mysql connection, loading data from database, etc
echo "<form method="post" action="">
//fetch array that is holding the loaded data
while ($row=mysql_fetch_array)
{
$row['img_path']=$image;    
//echo the data within the form
echo "<input id="send" type="image" value=\"".$image."\">"."<img src=\"".$image."\">";
}

echo "</form>" 
```

以便选择数据库中的所有图像路径并使用它们显示相应的图像，其中有300多个。然后，我需要通过 ajax 将表单发送到脚本，并且应该发生与我的示例中相同的事情。如果问题出在 id 上，我不能手动为三百张图片编写 id！，我也没有'不要认为给表单一个id然后在ajax进程中使用它就可以了，我担心不会发送任何图像，或者会发送所有图像，除非我错了）。那么，我该如何解决这个问题？提前谢谢你，我对编程很陌生，所以我请求帮助。（请注意，每个用户，在真实版本中都有自己的“列表”文件和帐户）。谢谢，任何事情都会受到赞赏，甚至是完成同一件事的不同方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T22:07:06.277

几件事：

从表面上看，您似乎有点*[divitis](http://en.wiktionary.org/wiki/divitis)*：`<div>`周围的2`<form>`可能不是必需的（特别是因为它们只包含一个元素 - 形式）。

您注意到您知道您重新使用了 id `send`，并且它会在实际实现中发生变化；但是，从您发布的 php 来看，看起来多个`input`相同的 s`id`仍然会被回显：这可能会导致您的 javascript 出现许多问题（它可能不会做任何事情，或者可能会产生意想不到的结果）。如果不使用`id`you used`class="send"`怎么办？

```
<form id="choose" method="post">
    <input type="image" class="send" name="send[]" value="Woman-02-june.png" src="images/Woman-02-june.png" />
    <input type="image" class="send" name="send[]" value="Man-01-June.png" src="images/Man-01-June.png" />
</form> 
```

然后当你需要在 jQuery 中引用它们时，你可以使用`$('#choose').find('.send')`. 此外，如果您希望表单元素的数据成为组的一部分，您可以使用`name="send[]"`创建一个数组：`$_POST["send"]`将是一个数字数组（或者，您可以将其设置为一个关联数组，如下所示：`name="send[FOO]"`-注意**不**`FOO`应该被包围在引号中）。

 **但是，在这种情况下对输入进行分组将是多余的，因为一次只会提交一个输入的值。如果您更改表单以允许用户在提交表单之前选择多个图像（当用户取消/单击图像时使用通过 jquery 取消/选中的不可见复选框），它将适用。如果您在提交之前允许多项选择，那么您的 AJAX 将如下所示：

```
$(function(){//short-hand for $(document).ready()
    $('#choose').submit(function(event){
        var form_data = $(this).serialize();
        $.post("post.php", {data:form_data}, function(){
            //stuff to do upon successful AJAX call
            var items;
            for ( var bio_img in form_data.send )
                { items += '<li>'+bio_img+'</li>'; }
            //replace contents of <div id="list">
            //with the values of the input elements
            $('#list').html('<ul>'+items+'</ul>');
        });//$.post()
        event.preventDefault(); return false;//I double up just to be sure
    });//form submit
});//document.ready 
```

除此以外：

```
$(function(){//short-hand for $(document).ready()
    $('#choose').submit(function(event){
        var form_data = $(this).serialize();//has data from only 1 input
        $.post("post.php", {data:form_data}, function(){
            //stuff to do upon successful AJAX call
            //assuming 'send' was not made an array in the input's name:
            //eg name="send" and not name="send[]"
            $('#list').find('ul').append('<li>'+form_data.send+'</li>');
        });//$.post()
        event.preventDefault(); return false;//I double up just to be sure
    });//form submit
});//document.ready 
```

最后，您似乎正在使用基本的 php mysql 函数，这些函数不安全（请参阅[mysql-fetch-array](http://www.php.net/manual/en/function.mysql-fetch-array.php)的 PHP 文档中的警告消息）。您可能会考虑[PHP 数据对象 (PDO)](http://www.php.net/manual/en/ref.pdo-mysql.php)

**编辑：**从您的问题编辑来看，您似乎担心通过 AJAX 发送图像文件。但是，您的代码中没有文件上传输入；用户所做的只是选择一个选项，并且您已经拥有该文件（因为您通过 引用它`<input type="image" … src="…"`）。您只是发送用户的选择，而不是图像文件本身。**

# c++ - 在 C++ 中使用 String 类的 .substr 获取无效参数

> ID：12662886
> 
> 赞同：1
> 
> 时间：2012-09-30T16:27:31.590
> 
> 标签：c++, eclipse, string

我正在尝试使用 Eclipse 通过 C++ 中的以下函数测试字符串输入是否合法：

```
#include <string>

bool testLegal::checkData(std::string &input, int &reg) {

    //test to see if pitchnames are legal

    std::string toneClasses = "CDEFGAB";
    std::string accidentals = "#b";
    std::string toTest;

    try {
        //TEST 1 IS the pitch name legal?
        toTest = input.substr(0, 1);
        if (_isLegal(toTest, toneClasses) == false)
            throw dataClean(2, "The pitch name you entered is illegal. Please correct it!");

        //TEST 2 to see if there is a second character in the pitch name and whether it is a sharp or flat
        toTest = input.substr(1);
        if (input.length() == 2 && _isLegal(toTest, accidentals) == false)
            throw dataClean(3, "The second character in the pitch name must be a sharp or flat");

    } catch (const cExceptions& e) {    
        throw dataClean(4, "There is an error in the data you inputed. Please re-enter");
    }
    return true;
} 
```

但是，我收到关于 .substr 参数的“无效参数”错误。我尝试了各种解决方案但没有成功。奇怪的是，该函数在 Netbeans 和 Codelite 中运行都没有任何问题。我将不胜感激任何想法是如何解决这个问题。期待中的Thx...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T09:31:19.063

使用 NDK 时，我在 Eclipse 上遇到了类似的子字符串问题。我不得不将整数转换为**string::size_type**

```
string twoLetters = hexStr.substr((string::size_type)i,(string::size_type)2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:03:28.637

我看不到任何检查来验证您的输入是否包含足够的字符：尝试获取超过字符串大小的子字符串可能会产生您引用的错误。同样，从无效索引开始也可能导致此问题。也就是说，我猜你`input`实际上是空的。尝试添加：

```
if (input.empty()) {
    throw std::runtime_error("received an empty string");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-03T18:09:20.203

这就是我为 Eclipse CDT 修复它的方式。打开属性并进入路径和符号部分。如果 C++ 代码的其余部分工作正常，您可能有某种行来包含 C++ 头文件。例如，在我的 Mac 上是这样的：

```
/usr/include/c++/4.2.1 
```

现在，添加一个包含“tr”子目录的新条目：

```
/usr/include/c++/4.2.1/tr 
```

之后重建索引，你就完成了。

# python - 如何使此功能适用于文件中的每个单词？

> ID：12662889
> 
> 赞同：-1
> 
> 时间：2012-09-30T16:27:50.887
> 
> 标签：python

我不会详细介绍不必要的细节，但我有一个`convert`将单词转换为其他内容的函数。现在我希望它读取文件并转换每个单词。假设我已经有了读取文件和转换的代码。唯一的问题是，对于我给出的论点，convert 似乎只能在非常笼统的术语中起作用。例如，我写

```
return convert("string") 
```

并且文件中的每个单词都被转换为“字符串”的转换。这不是我想要做的。

我想要的是转换适当地应用于每个单词。我怎样才能使它转换接受我给它的字符串以外的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:50:56.780

```
word = ["dog", "cat", "cow", "mouse"]

for i in word:
    print convert("string") 
```

显然会打印出“字符串”转换的四个副本，而不是四个单词的转换。您需要提供更多详细信息，说明为什么要传递常量值“字符串”，而不是要转换的单词（在本例中`i`为 ），作为转换函数的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:59:30.107

让我们假设`convert`反转一个字符串（即，“hello”变成“olleh”）。

```
def convert(input):
    return input[::-1] 
```

现在，要应用于`convert`数组中的每个字符串，请使用 Python 的`map`函数。

```
s = "this is a string of words"
a = s.split()
# a contains ['this', 'is', 'a', 'string', 'of', 'words']
output = map(convert, a)
# output contains ['siht', 'si', 'a', 'gnirts', 'fo', 'sdrow'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T12:39:45.900

该程序将随机打乱所有输入单词中的字母：

```
import random
import sys

def convert(item):
        ret=[x for x in item]
        random.shuffle(ret)
        return "".join(ret)

with open(sys.argv[1]) as f:
        for line in f:
                print " ".join(convert(word) for word in line.rstrip().split()) 
```

如您所见，`convert`应用于每个输入单词。这是您需要的应​​用程序类型吗？

# c++ - 如何在需要自由函数的地方传递成员函数？

> ID：12662891
> 
> 赞同：155
> 
> 时间：2012-09-30T16:28:02.050
> 
> 标签：c++, arguments, parameter-passing, function-pointers, pointer-to-member

问题如下：考虑这段代码：

```
#include <iostream>

class aClass
{
public:
    void aTest(int a, int b)
    {
        printf("%d + %d = %d", a, b, a + b);
    }
};

void function1(void (*function)(int, int))
{
    function(1, 1);
}

void test(int a,int b)
{
    printf("%d - %d = %d", a , b , a - b);
}

int main()
{
    aClass a;

    function1(&test);
    function1(&aClass::aTest); // <-- How should I point to a's aClass::test function?
} 
```

如何使用`a`'s`aClass::test`作为参数`function1`？我想访问班级的成员。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-09-30T16:36:51.903

使用函数指针没有任何问题。但是，指向非静态成员函数的指针与普通函数指针不同：成员函数需要在作为隐式参数传递给函数的对象上调用。上面的成员函数的签名是，因此

```
void (aClass::*)(int, int) 
```

而不是您尝试使用的类型

```
void (*)(int, int) 
```

一种方法可能是创建成员函数`static`，在这种情况下，它不需要调用任何对象，您可以将它与 type 一起使用`void (*)(int, int)`。

如果您需要访问您的类的任何非静态成员 *并且*您需要坚持使用函数指针，例如，因为该函数是 C 接口的一部分，您最好的选择是始终将 a 传递`void*`给您的函数以获取函数指针并调用您的成员通过转发函数获取对象`void*`，然后调用成员函数。

在适当的 C++ 接口中，您可能希望查看让函数采用函数对象的模板化参数以使用任意类类型。如果不希望使用模板化接口，您应该使用类似的东西`std::function<void(int, int)>`：您可以为这些创建适当的可调用函数对象，例如，使用`std::bind()`.

使用类类型或合适的模板参数的类型安全方法`std::function<...>`比使用`void*`接口更可取，因为它们消除了由于转换为错误类型而导致错误的可能性。

为了阐明如何使用函数指针来调用成员函数，下面是一个示例：

```
// the function using the function pointers:
void somefunction(void (*fptr)(void*, int, int), void* context) {
    fptr(context, 17, 42);
}

void non_member(void*, int i0, int i1) {
    std::cout << "I don't need any context! i0=" << i0 << " i1=" << i1 << "\n";
}

struct foo {
    void member(int i0, int i1) {
        std::cout << "member function: this=" << this << " i0=" << i0 << " i1=" << i1 << "\n";
    }
};

void forwarder(void* context, int i0, int i1) {
    static_cast<foo*>(context)->member(i0, i1);
}

int main() {
    somefunction(&non_member, nullptr);
    foo object;
    somefunction(&forwarder, &object);
} 
```

* * *

## 回答 #2

> 赞同：116
> 
> 时间：2012-09-30T16:42:26.370

@Pete Becker 的回答很好，但您也可以在不将`class`实例作为显式参数传递给`function1`C++ 11 的情况下这样做：

```
#include <functional>
using namespace std::placeholders;

void function1(std::function<void(int, int)> fun)
{
    fun(1, 1);
}

int main (int argc, const char * argv[])
{
   ...

   aClass a;
   auto fp = std::bind(&aClass::test, a, _1, _2);
   function1(fp);

   return 0;
} 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-09-30T16:35:18.813

指向成员函数的指针不同于指向函数的指针。为了通过指针使用成员函数，您需要一个指向它的指针（显然）和一个对象来应用它。所以适当的版本`function1`是

```
void function1(void (aClass::*function)(int, int), aClass& a) {
    (a.*function)(1, 1);
} 
```

并称之为：

```
aClass a; // note: no parentheses; with parentheses it's a function declaration
function1(&aClass::test, a); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-08-10T16:03:35.460

自 2011 年以来，如果您可以更改`function1`，请这样做，如下所示：

```
#include <functional>
#include <cstdio>

using namespace std;

class aClass
{
public:
    void aTest(int a, int b)
    {
        printf("%d + %d = %d", a, b, a + b);
    }
};

template <typename Callable>
void function1(Callable f)
{
    f(1, 1);
}

void test(int a,int b)
{
    printf("%d - %d = %d", a , b , a - b);
}

int main()
{
    aClass obj;

    // Free function
    function1(&test);

    // Bound member function
    using namespace std::placeholders;
    function1(std::bind(&aClass::aTest, obj, _1, _2));

    // Lambda
    function1([&](int a, int b) {
        obj.aTest(a, b);
    });
} 
```

### （[现场演示](http://coliru.stacked-crooked.com/a/472635310a395dfc)）

另请注意，我修复了您损坏的对象定义（`aClass a();`声明了一个函数）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-11-08T13:38:09.987

我问了一个类似的问题（[C++ openframeworks 从其他类传递 void](https://stackoverflow.com/q/53116783/5338658)），但我找到的答案更清楚，所以这里是对未来记录的解释：

使用 std::function 更容易，如下所示：

```
 void draw(int grid, std::function<void()> element) 
```

然后调用为：

```
 grid.draw(12, std::bind(&BarrettaClass::draw, a, std::placeholders::_1)); 
```

甚至更简单：

```
 grid.draw(12, [&]{a.draw()}); 
```

您在其中创建一个 lambda，该 lambda 调用通过引用捕获它的对象

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-03-28T02:48:15.583

不知道为什么这个非常简单的解决方案被放弃了：

```
#include <stdio.h>

class aClass
{
public:
    void aTest(int a, int b)
    {
        printf("%d + %d = %d\n", a, b, a + b);
    }
};

template<class C>
void function1(void (C::*function)(int, int), C& c)
{
    (c.*function)(1, 1);
}
void function1(void (*function)(int, int)) {
  function(1, 1);
}

void test(int a,int b)
{
    printf("%d - %d = %d\n", a , b , a - b);
}

int main (int argc, const char* argv[])
{
    aClass a;

    function1(&test);
    function1<aClass>(&aClass::aTest, a);
    return 0;
} 
```

输出：

```
1 - 1 = 0
1 + 1 = 2 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-15T12:12:11.310

我将成员函数设为静态并且一切正常：

```
#include <iostream>

class aClass
{
public:
    static void aTest(int a, int b)
    {
        printf("%d + %d = %d\n", a, b, a + b);
    }
};

void function1(int a,int b,void function(int, int))
{
    function(a, b);
}

void test(int a,int b)
{
    printf("%d - %d = %d\n", a , b , a - b);
}

int main (int argc, const char* argv[])
{
    aClass a;

    function1(10,12,test);
    function1(10,12,a.aTest); // <-- How should I point to a's aClass::test function?

    getchar();return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-15T06:07:10.477

如果您实际上不需要使用该实例`a` （即您可以像@mathengineer 的[回答](https://stackoverflow.com/a/53792233/5980430)一样将其设为静态），您可以简单地传入一个非捕获 lambda。（衰减到函数指针）

* * *

```
#include <iostream>

class aClass
{
public:
   void aTest(int a, int b)
   {
      printf("%d + %d = %d", a, b, a + b);
   }
};

void function1(void (*function)(int, int))
{
    function(1, 1);
}

int main()
{
   //note: you don't need the `+`
   function1(+[](int a,int b){return aClass{}.aTest(a,b);}); 
} 
```

[魔杖盒](https://wandbox.org/permlink/q3Rd1VXp0EUPmdpQ)

* * *

注意：如果`aClass`构建成本高或有副作用，这可能不是一个好方法。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2018-08-07T10:24:37.587

你现在可以停止敲打你的头了。这是成员函数的包装器，以支持将普通**C**函数作为参数的**现有函数。**指令是这里的关键。**`thread_local`**

 **[http://cpp.sh/9jhk3](http://cpp.sh/9jhk3)

```
// Example program
#include <iostream>
#include <string>

using namespace std;

typedef int FooCooker_ (int);

// Existing function
extern "C" void cook_10_foo (FooCooker_ FooCooker) {
    cout << "Cooking 10 Foo ..." << endl;
    cout << "FooCooker:" << endl;
    FooCooker (10);
}

struct Bar_ {
    Bar_ (int Foo = 0) : Foo (Foo) {};
    int cook (int Foo) {
        cout << "This Bar got " << this->Foo << endl;
        if (this->Foo >= Foo) {
            this->Foo -= Foo;
            cout << Foo << " cooked" << endl;
            return Foo;
        } else {
            cout << "Can't cook " <<  Foo << endl;
            return 0;
        }
    }
    int Foo = 0;
};

// Each Bar_ object and a member function need to define
// their own wrapper with a global thread_local object ptr
// to be called as a plain C function.
thread_local static Bar_* BarPtr = NULL;
static int cook_in_Bar (int Foo) {
    return BarPtr->cook (Foo);
}

thread_local static Bar_* Bar2Ptr = NULL;
static int cook_in_Bar2 (int Foo) {
    return Bar2Ptr->cook (Foo);
}

int main () {
  BarPtr = new Bar_ (20);
  cook_10_foo (cook_in_Bar);

  Bar2Ptr = new Bar_ (40);
  cook_10_foo (cook_in_Bar2);

  delete BarPtr;
  delete Bar2Ptr;
  return 0;
} 
```

请评论此方法的任何问题。

其他答案无法调用**现有的**普通`C`函数：[http ://cpp.sh/8exun](http://cpp.sh/8exun)**

# mysql - MySQL查询以查找相似但不重复的行

> ID：12662892
> 
> 赞同：2
> 
> 时间：2012-09-30T16:28:02.557
> 
> 标签：mysql, sql

我需要一个查询来检索机械停止代码和故障描述，它们看起来像一个重复的搜索查询，但它完全不同。

这是我的源表

![在此处输入图像描述](../Images/cf9c4605f8e7d9c781739235fef08985.png)

我正在使用这个查询

```
SELECT `TestDups`.`MachineID`
     , `TestDups`.`Code`
     , `TestDups`.`StopTime`
  FROM `TestDups`
 WHERE `TestDups`.`Code` IN ( SELECT `TestDups`.`Code`
                                FROM `TestDups`
                               GROUP BY `TestDups`.`Code`
                              HAVING COUNT(*) > 0 )
 ORDER BY `TestDups`.`MachineID` 
```

它返回这个：

![在此处输入图像描述](../Images/b47f1639a922de1126d915aa21590b40.png)

但我希望它返回这个：

![在此处输入图像描述](../Images/0fd3fab0bb2146cd86f83363536d2af8.png)

我怎样才能达到我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:42:22.473

像下面这样的东西会起作用；

```
SELECT ... SUM(StopTime), COUNT(*) as Num FROM ... GROUP BY MACHINEID, CODE 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T18:47:11.910

希望这个查询会产生你想要的结果。我也给出了演示的链接

```
select MachineID,Code,sum(stoptime) as StopTime, count(*) as Num from 
TestDups group by MachineID,code order by machineid 
```

[**SQL Fiddle 演示链接**](http://sqlfiddle.com/#!2/1f81e/2)

# opencl - OpenCL - 大字符串和内存性能？

> ID：12662893
> 
> 赞同：0
> 
> 时间：2012-09-30T16:28:10.010
> 
> 标签：opencl, bioinformatics

我是一名 OpenCL 新手，但我在网上找到的许多示例都取得了很好的成功。我的应用程序是非常基本的生物信息学，所以我关心很长的“ACTCGAAAGGTA....”字符串，可能有 1-3MB 长。一个简单的计算是计算 A、T、C、G 元素的数量，这似乎非常适合 OpenCL。[因此，如果我从此处](http://opencl.codeplex.com/wikipage?title=OpenCL%20Tutorials%20-%201)找到的规范“添加两个向量”示例开始

```
__kernel void vector_add_gpu (__global const float* src_a,
                     __global const float* src_b,
                     __global float* res,
               const int num)
{
   const int idx = get_global_id(0);
   if (idx < num)
      res[idx] = src_a[idx] + src_b[idx];
} 
```

我的问题是，我是否需要以任何方式在工作组或工作单元之间拆分原始字符串？我确实理解对 idx < num 的检查，所以我得到了工作项“知道”它是否在范围内的概念。为我管理这个是 OpenCL 的工作吗？是否存在我需要明确管理将全局数据拆分为块的情况？也许如果它们超过一定大小？（可能是由我的硬件限制决定的？）

在浪费大量时间之前，我想弄清我的基本 OpenCL 概念 :)

TL;DR：我是否必须拆分“大”输入数据字符串？还是 OpenCL 为我做了所有这些魔法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:56:36.017

您可以像在纯 C 代码中一样访问这些数组，不一定需要以任何方式对输入数组进行分区。如果您通过全局线程 id 访问数组，它将是全局工作池中的唯一索引，它会为您处理分区。

需要注意的事情是确保您不会阅读超出数组末尾的内容，因为您可能必须填充最后的工作组，但您似乎很好地理解了那部分。

# javascript - 验证多个表格并计算值

> ID：12662895
> 
> 赞同：0
> 
> 时间：2012-09-30T16:28:26.090
> 
> 标签：javascript, html, validation

我在验证表格时遇到了一些麻烦。表单的设计已提供给我，但我必须编写脚本来验证表单。当我开始验证状态以及之后的所有内容时，它不起作用。在计算应付总额时，它应该会随着注册费和其他一切而改变，但我无法显示和计算价值。请帮忙。这是一个加速的 javascript 类，我已经习惯了 java。

**我需要做以下事情：** 当用户更改参加宴会的人数时，计算总的宴会费用，显示金额，并重新计算并显示总计。

当用户单击注册按钮时，验证必填字段是否已填写。仅当必填字段满足以下条件时才应提交表格：

*   名字、姓氏、街道和城市不能为空
*   必须选择一个州
*   必须输入 5 位邮政编码（可选 - 可以使用 5 位或 9 位表格）
*   电子邮件地址必须包含“@”符号（可选 - 找到并应用正则表达式以验证电子邮件地址的格式）
*   必须使用 3 位数的区号、3 位数的前缀和 4 位数的交换机输入电话号码

这是表格的样子： [https ://angel.aacc.edu/AngelUploads/Content/CSI1498752012FA/Misc/Lab5.htm](https://angel.aacc.edu/AngelUploads/Content/CSI1498752012FA/Misc/Lab5.htm)

到目前为止只得到了这个

```
function validateForm()
{
    var valid = false;

    if(document.registration.fname.value == "")
    {
        alert("First name must be entered.");
        return valid;
    }
    else if(document.registration.lname.value ==  "")
    {
        alert("Last name must be entered.");
        return valid;
    }
    else if(document.registration.street.value ==  "")
    {
        alert("Sreet address must be entered.");
        return valid;
    }
    else if(document.registration.city.value ==  "")
    {
        alert("City must be entered.");
        return valid;
    }
    else if(document.registration.zip.value == /(^\d{5}$)|(^\d{5}-\d{4}$)/)
    {
        alert("Enter a valid zip code.");
        return valid;
    }
}

function calcTotal()
{
    // some code here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T17:56:38.103

你错过了很多......下面有一些代码我认为应该让你更接近。我注意到的几个问题是，City 正在寻找 != 而不是 ==，提交按钮应该只在验证成功时才返回，所以不是

```
onclick="validateForm()"

onclick="return validateForm()" 
```

我在 HTML 的正文中添加了对 CalcTotal 的调用，以便它始终设置为某个值。

然后我让你开始处理小计字段，我认为你需要在那里进行一些编辑，但希望这能让你足够接近以完成它。

```
<html>
<head>
<title>Registration Form</title>
<style>
#main h1 {font-size: 18pt; color: rgb(83,183,51); letter-spacing: 4;
       border-top: 2px solid rgb(83,183,51); font-weight: bold}
#main p {font-size: 9pt;}
#main #intro {text-align: right; font-weight: bold}
span {color: red}

table {font-size: 8pt; width: 510px; padding: 10px;
       border-bottom: 2px solid rgb(83,183,51)}

#lname, #fname, #city, #email, #memberid {width: 198px}
#street {width: 432px}
#zip {width: 88px}
#regFee, #banq, #options, #grandTotal {width: 60px}
</style>
<script type="text/javascript">

function validateForm()
{

    if(document.registration.fname.value == "")
    {
        alert("First name must be entered.");
        return false;
    }
    else if(document.registration.lname.value ==  "")
    {
        alert("Last name must be entered.");
        return false;
    }
    else if(document.registration.street.value ==  "")
    {
        alert("Street address must be entered.");
        return false;
    }
    else if(document.registration.city.value ==  "")
    {
        alert("City must be entered.");
        return false;
    }
    else if(document.registration.state.value ==  "Choose")
        {
            alert("Please select a state");
            return false;
    }
    else if(document.registration.zip.value == /(^\d{5}$)|(^\d{5}-\d{4}$)/)
    {
        alert("Enter a valid zip code.");
        return false;
    }
    return true;          
}

function calcMeals()
{
    var mealTotal = 0.00;

    if(document.getElementById("optBreakfast").checked)
        mealTotal = mealTotal + 5.00;
    if(document.getElementById("optLunch").checked)
        mealTotal = mealTotal + 10.00;
    document.getElementById("options").value = mealTotal.toFixed(2);
    calcTotal();
}

function calcBanq()
{
    var banqTotal = 0
    var numGuests = document.getElementById("guest").value;
    if(numGuests > 0)
        document.getElementById("banq").value = (30 * numGuests);
    else
        document.getElementById("banq").value = 0.00;
}

function calcTotal()
{
    var regFee = 125.00;
    var options = document.getElementById("options");
    var banquet = document.getElementById("banq");
    var total = regFee + Number(options.value) + Number(banquet.value);

    document.getElementById("grandTotal").value = parseFloat(total).toFixed(2)
}

</script>
</head>

<body>
<div id="main">
<p id="intro">15th Annual JavaScript Conference<br />
   Anne Arundel Community College<br />
   April 26<br />
   Conference Fee: $125
</p>
<h1>Conference Registration Form</h1>

<form id="registration" name="registration" >

<table>
<tr>
   <td><span>*</span>First Name</td>
   <td><input name="fname" id="fname" /></td>
   <td><span>*</span>Last</td>
   <td colspan="3"><input name="lname" id="lname" /></td>
</tr>

<tr>
   <td><span>*</span>Street</td>
   <td colspan="5"><input type="text" id="street" name="street" /></td>
</tr>

<tr>
   <td><span>*</span>City</td>
   <td><input type="text" id="city" name="city" /></td>
   <td><span>*</span>State</td>
   <td><select id="state" name="state">
              <option value="" selected>Choose</option>
              <option value="AK" >AK</option>
              <option value="AL" >AL</option>
              <option value="AR" >AR</option>
              <option value="AZ" >AZ</option>
              <option value="CA" >CA</option>
              <option value="CO" >CO</option>

              <option value="CT" >CT</option>
              <option value="DC" >DC</option>
              <option value="DE" >DE</option>
              <option value="FL" >FL</option>
              <option value="GA" >GA</option>
              <option value="HI" >HI</option>

              <option value="IA" >IA</option>
              <option value="ID" >ID</option>
              <option value="IL" >IL</option>
              <option value="IN" >IN</option>
              <option value="KS" >KS</option>
              <option value="KY" >KY</option>

              <option value="LA" >LA</option>
              <option value="MA" >MA</option>
              <option value="MD" >MD</option>
              <option value="ME" >ME</option>
              <option value="MI" >MI</option>
              <option value="MN" >MN</option>

              <option value="MO" >MO</option>
              <option value="MS" >MS</option>
              <option value="MT" >MT</option>
              <option value="NC" >NC</option>
              <option value="ND" >ND</option>
              <option value="NE" >NE</option>

              <option value="NH" >NH</option>
              <option value="NJ" >NJ</option>
              <option value="NM" >NM</option>
              <option value="NV" >NV</option>
              <option value="NY" >NY</option>
              <option value="OH" >OH</option>

              <option value="OK" >OK</option>
              <option value="OR" >OR</option>
              <option value="PA" >PA</option>
              <option value="RI" >RI</option>
              <option value="SC" >SC</option>
              <option value="SD" >SD</option>

              <option value="TN" >TN</option>
              <option value="TX" >TX</option>
              <option value="UT" >UT</option>
              <option value="VA" >VA</option>
              <option value="VT" >VT</option>
              <option value="WA" >WA</option>

              <option value="WI" >WI</option>
              <option value="WV" >WV</option>
              <option value="WY" >WY</option>
              <option value="AA" >AA</option>
              <option value="AE" >AE</option>
              <option value="AP" >AP</option>

              <option value="AS" >AS</option>
              <option value="FM" >FM</option>
              <option value="GU" >GU</option>
              <option value="MP" >MP</option>
              <option value="MH" >MH</option>
              <option value="PR" >PR</option>

              <option value="PW" >PW</option>
              <option value="VI" >VI</option>
            </select></td>
   <td><span>*</span>Zip</td>
   <td><input type="text" id="zip" name="zip" /></td>
</tr>

<tr>
   <td><span>*</span>E-mail</td>
   <td colspan="5"><input name="email" id="email" /></td>
</tr>

<tr>
   <td><span>*</span>Phone Number</td>
   <td colspan="5">
       ( <input id="phone1" name="phone1" size="3" /> )
       <input id="phone2" name="phone2" size="3" /> -
       <input id="phone3" name="phone3" size="4" />
   </td>
</tr>

<tr><td colspan="6">&nbsp;</td>
</tr>

<tr>
   <td colspan="5">Registration Fee</td>
   <td>$<input type="text" id="regFee" name="regFee" value="125.00" readOnly="true" />
</tr>

<tr>
   <td colspan="6">Optional (additional fees may apply)</td>
</tr>

<tr>
   <td colspan="5">
       <input type="checkbox" onchange="calcMeals()" name="opt1" id="optBreakfast" value="5" /> Breakfast ($5)
       <input type="checkbox" onchange="calcMeals()" name="opt2" id="optLunch" value="10" /> Lunch ($10)
       <input type="checkbox" onchange="calcMeals()" name="opt3" id="optHappyHour" checked value="0" /> Happy Hour (free!)
   </td>
   <td>$<input type="text" id="options" name="options" value="0.00" readOnly="true" /></td>
</tr>

<tr>
   <td colspan="2">Number attending dinner banquet ($30 per person)</td>
   <td>&nbsp;</td>
   <td>
       <select id="guests" name="guests" onchange="CalcBanq()">
       <option>0</option>
       <option>1</option>
       <option>2</option>
       <option>3</option>
       <option>4</option>
       <option>5</option>
       </select>
   </td>
   <td>&nbsp;</td>
   <td>$<input type="text" id="banq" name="banq" value="0.00" readOnly="true" /></td>
</tr>

<tr><td colspan="6">&nbsp;</td>
</tr>

<tr>
   <td colspan="5">Grand Total Due</td>
    <td>$<input type="text" id="grandTotal" name="grandTotal" readOnly="true" /></td>
</tr>
</table>

<p><span>* Required Information</span></p>
<p style="text-align: center"><input id="sbutton" type="submit" value="Register" onclick="return validateForm()" /></p>

</form>

</div>
<script type="text/javascript">
    calcTotal();
</script>
</body>
</html> 
```

# f# - 学习 F#：有哪些使用其他编程语言的书籍可以翻译成 F# 来学习函数式概念？

> ID：12662896
> 
> 赞同：9
> 
> 时间：2012-09-30T16:28:28.060
> 
> 标签：f#, functional-programming

我现在已经学习 F# 几个月了，学习[F#](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/)的最大资产是将John Harrison[的“实用逻辑和自动推理手册](http://www.cambridge.org/gb/knowledge/isbn/item2327697/?site_locale=en_GB)”（[WorldCat ）中的](http://www.worldcat.org/title/handbook-of-practical-logic-and-automated-reasoning/oclc/408024373&referer=brief_results)[OCaml](http://caml.inria.fr/)代码翻译成 F#。

由于这是一种如此有效的学习方法，我计划将更多书籍中的代码翻译成 F#，但书籍主要侧重于[功能概念](http://en.wikipedia.org/wiki/Functional_programming#Concepts)或[现实世界应用程序](http://homepages.inf.ed.ac.uk/wadler/realworld/)，这些应用程序通常以使用诸如[AI](http://en.wikipedia.org/wiki/Artificial_intelligence)、[编译器](http://en.wikipedia.org/wiki/Compiler)、[定理证明器等功能语言编写而闻名](http://en.wikipedia.org/wiki/Automated_theorem_proving)和[推理助理](http://en.wikipedia.org/wiki/Proof_assistant)。

虽然人们会认为将程序从一种语言翻译成另一种语言可能是一项微不足道的任务，但实际上，在进行这种翻译时，不仅会遇到语言差异，而且还必须学习和理解进行翻译的环境和工具。需要探索两种语言及其环境的深度，而这些深度在阅读时通常不会被考虑在内。例如，在将 Ocaml 转换为 F# 时，我学习了[顶级](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual023.html)、[ocamldebug](http://caml.inria.fr/pub/docs/manual-ocaml/manual030.html)和时间旅行、[跟踪](http://caml.inria.fr/resources/doc/guides/debug.en.html)和希望 F# 有这个、[camlp4](http://caml.inria.fr/pub/docs/tutorial-camlp4/index.html)以及它在 F# 中不存在的原因、[异常处理性能差异](https://stackoverflow.com/questions/12160390/ocaml-performance-of-exceptions)和[类型推断](https://stackoverflow.com/questions/12341767/converting-ocaml-to-f-differences-between-typing-and-type-inference)以某种方式迫使我以一种我无法通过仅用 F# 进行试验或阅读书籍来理解 F# 对应物的方式。

您是否知道任何其他使用/包含源代码的书籍，最好是函数式，涵盖函数式编程的概念，或者是通常用函数式语言编写的现实世界应用程序，并且通过翻译源代码有助于学习函数式编程到F＃？

为了保持客观而不是主观，答案必须解释为什么它很重要，并且您必须使用过这本书而不仅仅是浏览过这本书。我正在寻找那些从事函数式编程多年的人的答案，他们发现通读这本书是他们在函数式编程方面取得成功的关键。答案示例：

*   [类型推断](http://en.wikipedia.org/wiki/Type_inference)- Benjamin C. Pierce 的“[类型和编程语言](http://www.cis.upenn.edu/~bcpierce/tapl/)”（[WorldCat](http://www.worldcat.org/title/types-and-programming-languages/oclc/47705787&referer=brief_results)）。重要性：有助于了解如何解决类型推断编译器错误，从而找到解决错误的更好方法并生成更好的代码。

*   [CPS](http://en.wikipedia.org/wiki/Continuation-passing_style) - “ [Compiling with Continuations](http://www.cambridge.org/us/knowledge/isbn/item1116671/?site_locale=en_US) ” ( [WorldCat](http://www.worldcat.org/title/compiling-with-continuations/oclc/24175143&referer=brief_results) ) by Andrew W. Appel - 重要性：有助于消除递归中堆栈的使用，从而避免堆栈溢出并提高性能。我认为尾调用优化是优化函数，而 CPS 是优化程序。

*   [术语重写](http://en.wikipedia.org/wiki/Rewriting#Term_rewriting_systems)——Franz [Baader](http://en.wikipedia.org/wiki/Automated_theorem_proving)[和](http://en.wikipedia.org/wiki/Proof_assistant)Tobias Nipkow 的“[术语重写和所有这些](http://www4.in.tum.de/~nipkow/TRaAT/)”（[WoldCat](http://www.worldcat.org/title/term-rewriting-and-all-that/oclc/37315354&referer=brief_results) ）无效的。

*   [Lambda Calculus](http://en.wikipedia.org/wiki/Lambda_calculus) - Greg Michaelson 撰写的“[通过 Lambda 演算进行函数式编程的介绍](http://store.doverpublications.com/0486478831.html)”( [WorldCat](http://www.worldcat.org/title/introduction-to-functional-programming-through-lambda-calculus/oclc/18350194&referer=brief_results) ) 重要性：Lambda 演算是函数式编程的基础。理解这个基本概念可以更好地理解函数式编程。

编辑

虽然我想推迟并等待一个更好的答案来接受，但我了解到，在 SO 上几天后，观点大大减少了。

我发现这两个答案对于不熟悉这些书籍的人来说都很棒，如果我还不知道并拥有大多数书籍的副本，我会认真考虑购买它们。

由于 PAD 注意到我所追求的更高级的书籍，我给了他接受投票。如果可以分开接受我会的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-30T18:02:59.370

你的名单对我来说看起来很可怕。我建议一些更基本的：

1.  [Okasaki 的纯函数式数据结构](http://www.cs.cmu.edu/~rwh/theses/okasaki.pdf)书。本书使用 SML 符号；由于缺乏函子，将其示例翻译成 F# 具有挑战性。但好处是巨大的；在这个过程中你会学到很多东西，另一方面也会极大地帮助 F# 社区。正如@Jack P. 所提到的，其中许多数据结构已被[移植到 F#](http://lepensemoi.free.fr/index.php/tag/purely-functional-data-structures)；他们对你来说可能是一个很好的开始。

2.  [ML for the Working Programmer](http://www.cl.cam.ac.uk/~lp15/MLbook/) by Paulson。我特别喜欢使用归纳法来证明程序正确性的部分。书中的一些重要示例，例如为*lambda 演算编写解释器*和*战术定理证明器*，很有趣，并且与您感兴趣的领域很接近。

3.  Hudak[的哈斯克尔表达学院。](http://www.cs.yale.edu/homes/hudak/SOE/)这本书会给你非常有趣的时间和成就感，因为你用真实的和令人兴奋的应用程序完成了它。此外，书中还有很多关于设计 DSL 的有用信息。

我真的很佩服你通过反复试验过程学习 F# 的坚持。如果你能在约翰哈里森的书之后幸存下来，我认为很少有人会对你有挑战性。我建议您使用另一种函数式语言找到一个真正的应用程序，我们在 F# 中没有这种应用程序并将其移植。例如，从书中的例子来看，用 F# 编写一个类似于[Coq](http://coq.inria.fr/)、[Isabelle](http://www.cl.cam.ac.uk/research/hvg/isabelle/)或[Hol-light](http://code.google.com/p/hol-light/)的简单证明助手还不是很远。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T17:30:26.897

考虑到您的问题中列出的标题，您已经远远领先于基础知识。但谈到基本面，我建议考虑：

[Richard Bird，Philip Wadler - 函数式编程简介，第一版 ISBN：0134841891](https://rads.stackoverflow.com/amzn/click/com/0134841891)（本书的 FP 语言是 Miranda）

和历久弥新的经典

[Harold Abelson 和 Gerald Jay Sussman - Structure and Interpretation of Computer Programs，第 2 版 ISBN:0262011530](https://rads.stackoverflow.com/amzn/click/com/0262011530)（本书的 FP 语言是 Scheme）

# core-plot - Core-Plot 能否/如何推断散点以适应固定的标签策略？

> ID：12662898
> 
> 赞同：0
> 
> 时间：2012-09-30T16:28:36.503
> 
> 标签：core-plot, scatter-plot

**情况：**分散点/日期，每个月可能包含*可变数量*的数据（点）。
**期望：**沿 x 轴具有固定宽度的月份，其列包含各自的点（即*相同数量*的点/月）。

Core-Plot 能否推断缺失的数据点以均衡数据/月的分布？
那怎么做？ *我希望固定宽度的月份与它们各自的数据点一致/同步（因此，可能需要填写缺失的数据点；即，用外推*点/数据

填充点较少的月份）。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:49:08.960

轴标签独立于绘图数据。标记位置仅取决于绘图范围和使用的标记策略。Core Plot 不会修改您的绘图数据——绘图仅显示您提供的内容。*

# ruby - Ruby OpenSSL 非对称加密 - 使用两个密钥对

> ID：12662902
> 
> 赞同：6
> 
> 时间：2012-09-30T16:29:09.317
> 
> 标签：ruby, openssl

我想使用两个密钥对来实现两个通信系统之间不可否认的安全消息传递。我使用以下方法生成并存储了两组密钥对：

```
sys1_key = OpenSSL::PKey::RSA.generate( 2048 )
sys2_key = OpenSSL::PKey::RSA.generate( 2048 ) 
```

这两个密钥对都将其单独的公钥和私钥保存到文件中：

*   sys1.pub.pem
*   sys1.priv.pem
*   sys2.pub.pem
*   sys2.priv.pem

系统 1 拥有自己的公钥和私钥以及系统 2 的公钥。系统 2 拥有自己的公钥和私钥以及系统 1 的公钥。

在系统 1 上，我想获取消息“Hello world”并使用系统 1 的私钥和系统 2 的公钥对其进行加密。该消息只能由系统 2 使用它自己的私钥和系统 1 的公钥解密。

我们目前使用 GPG 实现了一个类似的过程，但我想自动化这个过程——感谢任何帮助。我们在 Ruby 1.9.2 上。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T14:49:50.943

私钥用于解密，公钥用于加密。

因此，如果系统 1 打算向系统 2 发送加密文本。

系统 1 应该获取系统 2 的公钥并使用系统 2 的公钥加密文本。系统 2 可以接收文本并使用自己的私钥进行解密。在发送端，您可以使用这样的代码。

```
#!/usr/bin/env ruby

require 'openssl'
require 'base64'

public_key_file = 'server2_public.pem';
string = 'Secret!';

public_key =
OpenSSL::PKey::RSA.new(File.read(public_key_file))
encrypted_string = Base64.encode64(public_key.public_encrypt(string))
print encrypted_string, "\n" 
```

Base 64 编码只是一个可选步骤，具体取决于您是否要通过网络发送二进制数据等。

在接收方

```
#!/usr/bin/env ruby

require 'openssl'
require 'base64'

key = 'my_private_key.pem';

private_key = OpenSSL::PKey::RSA.new(File.read(key),'password')
data = private_key.private_decrypt(Base64.decode64(encrypted_data_received))

puts data 
```

如果您有 n 个系统，您应该使用约定来查找公钥名称。例如公钥名称可以与消息的目标机器名称相同，并且可以从密钥服务器中查找。私钥应该只存在于相应的系统上。

非对称加密的目的是双重的。

1）如果您使用公钥加密。只有拥有相应私钥的人才能解密。这实现了消息安全。2）如果您使用私钥签名，则可以使用公钥来验证真实性。每个有权访问公钥的人都可以验证消息的真实性。它证明了只有你才能加密它。这称为签名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-13T19:43:37.747

几个月前我写了一个非常有用的库，它是一个非常易于使用的支持*RSA的**OpenSSL*包装器。该界面非常可读且易于理解。

 *```
public_key, private_key = Encryption::Keypair.generate( 2048 )
plaintext = 'some secret data'
securetext = public_key.encrypt( plaintext )
private_key.decrypt( securetext ) == plaintext # true 
```

它被称为**加密**：
[GitHub 上](https://github.com/itay-grudev/encryption/)的加密。
[Rubygems 上的加密](http://rubygems.org/gems/encryption)。
[文档](https://github.com/itay-grudev/encryption/wiki)*

# html - “%u00AB”是什么类型的语法？

> ID：12662908
> 
> 赞同：4
> 
> 时间：2012-09-30T16:29:59.967
> 
> 标签：html, security, unicode, syntax, xss

在[本文](http://www.barracudalabs.com/wordpress/index.php/2009/06/05/unicode-encoding-for-bypassing-xss-filters/)中，我收到了 XSS 攻击向量的警告`"%u00ABscript%u00BB"`。我想知道什么类型的语法`"%u00AB"`。在我对 Chromium 的简短测试中，它实际上并没有被渲染到标签中，这让我相信 SQL 引擎或服务器端编程语言都使用了该语法。我不关心存储/反射的 XSS，只关心基于 DOM 的。我不认识它，所以也许它像 ruby​​ 或 python 之类的？

另外，有谁知道它在其他浏览器中是否存在问题？我只测试了 Chromium，但可能其他版本和浏览器的行为不同，因此很容易受到攻击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T18:38:25.263

该`%uhhhh`语法是众所周知的百分比编码的非标准变体，其中可以直接通过其代码点而不是通过其编码的代码点来指定 Unicode 字符，就像某些语言支持一样`\uhhhh`。`unescape`JavaScript 的函数以及 Microsft 的 IIS Web 服务器都支持这种语法。

但这可能不是`%u00AB`映射到的原因`«`。造成这种情况的原因是某种音译，[例如*iconv*供应](http://ideone.com/rpGXC)：

```
iconv('UTF-8', 'ASCII//TRANSLIT', '«') === '<<'
iconv('UTF-8', 'KOI8-R//TRANSLIT', '«') === '<<' 
```

并且根据[Jeremiah Grossman 的博文*Results, Unicode Left/Right Pointing Double Angel Quotation Mark*](http://jeremiahgrossman.blogspot.de/2009/06/results-unicode-leftright-pointing.html)提到这个漏洞，易受攻击的应用程序的数量总结如下：

> [Arian 承诺在使用WhiteHat Sentinel](http://www.whitehatsec.com/home/services/services.html)扫描数百个生产网站后返回3APA3A 。该平台的巨大研发优势。两年后有数据可以分享。我们一直很忙，但是，嘿，迟到是最好的，对吧？:) 事实证明 3APA3A 是正确的！Arian 发现少数 Web 应用程序容易受到编码技术的影响，如果样本池足够大，它们就会累加起来。样本范围从 300 到大约 1000 个网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:08:55.403

这是一种称为[非标准 unicode](http://en.wikipedia.org/wiki/Percent-encoding#Non-standard_implementations)的百分比编码机制，或者`%u encoding`，在 2004 年被拒绝。

简而言之，您应该意识到`all the possible combinations of the character "<"`. 最好的起点是[OWASP XSS Filter Evasion Cheat Sheet](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet#Character_Encoding)。

# android - 在长线程过程中更新 TextView

> ID：12662912
> 
> 赞同：0
> 
> 时间：2012-09-30T16:30:11.733
> 
> 标签：android, multithreading

需要明确的是，这个问题不是关于*如何*从线程更新 TextView，它工作正常。问题是，即使我在整个线程中多次调用更新 TextView，更新也只会在线程完成后才会出现。这是一个例子：

```
公共类 NDThread 扩展线程 {

    受保护的 LogActionListener log_listener;
    私人处理程序处理程序=新处理程序（）；

    公共无效运行（）{
        logAction("开始");
        // 做很多事情..
        logAction("中途");
        // 还有很多东西..
        日志操作（“完成”）；
    }

    公共接口 LogActionListener {
        公共无效onLogAction（字符串参数字符串）；
    }

    公共无效 logAction（最终字符串 str）{
        if(log_listener != null) handler.post(new Runnable() {
            @覆盖
            公共无效运行（）{
                log_listener.onLogAction(str);          
            }       
        });
    }
}

```

在我的主要活动中，我实现`LogActionListener`接收字符串并更新 TextView：

```
NDThread 线程 = 新的 NDThread();
thread.setOnLogActionListener(this);
线程.run();

// 其他地方..
@覆盖
公共无效onLogAction（最终字符串味精）{
        handler.post(new Runnable() {

            @覆盖
            公共无效运行（）{
                textView.append(msg);
            }

        });
}

```

如您所见，我`Handler`在 Thread 和 Activity 中都使用了 s，因为我不确定哪个正确使用。但是，结果始终是整个 Thread 的空白 TextView，然后在最后它将打印 3 行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:52:43.793

避免线程并使用**AsyncTask**

您正在寻找的是**onProgressUpdate(Progress...) ， publishProgress(Progress...)**的 AsyncTask

谷歌他们的代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:36:27.833

尝试使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)并在其中更新 textview

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:45:07.240

尝试将 onLogAction() 的定义替换为：

```
@Override
public void onLogAction(final String msg) {
  textView.append(msg);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T17:17:59.490

问题就在这里

```
NDThread thread = new NDThread();
thread.setOnLogActionListener(this);
thread.run(); 
```

它应该是

```
NDThread thread = new NDThread();
thread.setOnLogActionListener(this);
thread.start(); 
```

因为“start() 方法创建了一个新线程，它执行 run() 方法。run() 方法只在当前线程中执行，而不启动新线程。”

同样正如其他人已经提到的那样，您不需要两个处理程序。做就是了：

```
 public void logAction(final String str) {
        if(log_listener != null) log_listener.onLogAction(str);          
    } 
```

在主要活动中

```
 @Override
    public void onLogAction(final String msg) {
       MyActivity.this.runOnUiThread( new Runnable() {
          @Override
          public void run() {
           textView.append(msg);
          }
       });
    } 
```

# html - 在 mailto 的大正文内容中出现错误

> ID：12662914
> 
> 赞同：0
> 
> 时间：2012-09-30T16:30:19.400
> 
> 标签：html, email, mailto

我正在编写以下脚本，用于邮寄用户动态输入的数据。这适用于数据较少的内容，并且 Outlook 窗口可以正确打开数据。但是当我对较大的数据使用相同的逻辑时。打开 Outlook 窗口时出现错误，提示“命令行参数无效。验证您正在使用的开关”。请参阅此链接了解错误 ( [http://support.citrix.com/article/CTX123773](http://support.citrix.com/article/CTX123773) ) 发生了什么可能是这个问题的原因。请帮助解决这个问题。

提前致谢 。

```
<html>
<head>
  <script>
    var bodyScript = " ";
    var json = " ";

    function ajaxCall() {
      ajax {
        url: function: loadDetails,
        error: ,
      }
    }

    function loadDetails() {
      bodyScript += "Hi" + json.Name;
      .....
      bodyScript += "%0D%0Awelcome to our Camp .Your ID is " + json.ID;
      .....
    }

    function sendEmail() {
      var link = "mailto:" +
        +"?cc=Sam&subject=test&body=" + bodyString;
      alert('bodyString before mailing ' + bodyString);
      window.location.href = link;
    }
  </script>

  <body>
    <div id=”btnSubmit” onclick=sendEmail()”&gt;click me</div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T19:39:48.017

试试`encodeURIComponent(bodyString)`，似乎有一些字符（可能的引号）与命令行选项混淆：

```
var link = "mailto:"+
+"?cc=Sam&subject=test&body="+encodeURIComponent(bodyString); 
```

我在示例中看到，您已经以某种方式对换行符进行了 urlencode。因此，`encodeURIComponent(bodyString)`您可能不得不将其变成`encodeURIComponent(decodeURIComponent(bodyString))`

演示：http: [//jsfiddle.net/H9ERc/](http://jsfiddle.net/H9ERc/)

# c++ - 是否有任何交互式控制台 B-Tree 实现？

> ID：12662915
> 
> 赞同：0
> 
> 时间：2012-09-30T16:30:29.903
> 
> 标签：c++, c, data-structures

我一直在尝试用 C 编写和实现 B 树，不幸的是，我在插入时遇到了一些问题。这就是为什么我希望看到 B 树的其他 C 实现。

问题是，我在网上找到的大多数实现更多的是在文件 IO/数据库上。我知道这是正确的做法，但是您知道交互式控制台上的 BTree 实现吗？仅限 C

通过这种输出进行交互：

```
(Asks the user)
Tree Order: 3
Choose (I)nsert - (D)elete - (S)earch: I

Data: 5
and so on... 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T12:59:52.097

您真正想要的不是交互式 B-Tree 实现。

您正在用 C 编写 B-Tree。从技术上讲，您正在实现一个 In-Memory B-Tree，因此您需要一个实现良好的 B-Tree 来学习。尝试使用谷歌搜索“in memory btree”以找到您的需要。

这可能是一个：“STX B+ 树 C++ 模板类” [http://idlebox.net/2007/stx-btree/](http://idlebox.net/2007/stx-btree/)。你可以有一个并编写一些小测试来插入一个或多个数字，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T19:03:16.617

正常编码并在调试器中运行。在需要的地方设置断点，并使用设置和打印变量的能力来执行控制台 I/O。

# java - 插入重复键时的Java HashMap

> ID：12662917
> 
> 赞同：2
> 
> 时间：2012-09-30T16:30:49.187
> 
> 标签：java, hashmap

当插入重复键时，我对 Java HashMap 有一个非常基本的疑问。

我的意图是创建 4 个 Emp 对象。2 个对象（e1 和 e2）具有相同的 hashCode。因此，当插入 e1（在 e2 之后插入）时，hashmap 会意识到已经存在具有相同哈希值的对象（对象 e2）。然后它将槽中所有对象的键与相同的哈希值进行比较。如果它找到一个具有匹配键的对象（通过调用下面 Emp 类的 equals 方法），它将用新值替换旧值。

请看下面的测试代码：

```
import java.util.Map;
import java.util.HashMap;
import java.util.Set;

class Emp {
        String name;
        int age;

        public Emp(String name, int age) {
                this.name = name;
                this.age = age;
        }

        public boolean equals(Object s) {
                if(s instanceof Emp) {
                        Emp s1 = (Emp) s;
                        return ((s1.name.compareToIgnoreCase(this.name) == 0));
                }
                return false;
        }

        public int hashCode() {
                //return (this.name.hashCode() + this.age);
                return this.name.hashCode();
        }
}

public class HashTest {
        public static void main(String[] args) {
                Emp e1 = new Emp("Terry", 26);
                Emp e2 = new Emp("Terry" , 60);
                Emp e3 = new Emp("John", 21);
                Emp e4 = new Emp("Test", 60);

                Map<Emp,Emp> emp = new HashMap<Emp, Emp>();
                emp.put(e2,e2);
                Emp v2 = emp.put(e1,e1);
                emp.put(e3,e3);
                emp.put(e4,e4);

                System.out.println("Replaced Record Name: " + v2.name + " , age: " + v2.age);
                for(Emp e: emp.keySet())
                        System.out.println("Name: " + e.name + " , age: " + e.age);
        }
} 
```

我期待的输出： **替换记录名称：特里，年龄：60** 名称：测试，年龄：60 **名称：特里，年龄：26** 名称：约翰，年龄：21

我得到的输出： **Replaced Record Name: Terry , age: 60** Name: Test , age: 60 **Name: Terry , age: 60** Name: John , age: 21

我期待 (Terry, 60) 被 (Terry, 26) 对象取代。这似乎正在发生，因为我得到**Replaced Record Name: Terry, age: 60**作为输出。但是，地图包含记录**Name: Terry , age: 60**而不是**Name: Terry , age: 26**。

编辑：谢谢大家的建议。事实证明我犯了一个非常粗心的错误。我没有打印与键关联的值，而是仅打印键。

正如每个人都指出的那样，解决方案是：

```
 for(Emp e: emp.keySet())
  {
        Emp empVal = emp.get(e);
        System.out.println("Name: " + empVal.name + " , age: " + empVal.age);
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:40:15.673

您的输出是打印键，而不是值。在您的代码中，键不会改变，但值会改变。

例如，如果您将输出循环更改为：

```
for (Emp emp : emp.values()) {
  System.out.println("Name: " + e.name + " , age: " + e.age);
} 
```

我怀疑你会看到你所期待的答案。

但是：总的来说，我建议不要在这里做你正在做的事情。各种代码都期望 if `a.equals(b)`then`a`和`b`根本没有任何有意义的差异，并且您的`Emp`类的`equals`实现不符合该合同。例如，如果你使用 a`HashSet`而不是 a`HashMap`你会得到更奇怪的行为并且没有办法修复它。

实现这一点的更好方法可能是让`Emp`'s`hashCode`和`equals`方法正确尊重姓名和年龄，并使您的地图成为`Map<String, Emp>`键是员工姓名而值是`Emp`记录的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:41:27.830

我稍微修改了您的代码 - 见下文。新值被放入映射中，但由于键是相等的，第二个放入重用现有键。

```
public static void main(String[] args) {
    Emp e1 = new Emp("Terry", 26);
    Emp e2 = new Emp("Terry", 60);

    Map<Emp, Emp> emp = new HashMap<Emp, Emp>();
    emp.put(e2, e2);
    Emp v2 = emp.put(e1, e1);

    System.out.println("Replaced Record Name: " + v2.name + " , age: " + v2.age);
    for (Emp e : emp.keySet()) {
        System.out.println("[key] Name: " + e.name + " , age: " + e.age);
        System.out.println("[value] Name: " + emp.get(e).name + " , age: " + emp.get(e).age);
    }
} 
```

输出：

```
[key] Name: Terry , age: 60
[value] Name: Terry , age: 26 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:42:17.227

在下面的语句中，您实际上是在打印键。通过调用`keySet()`，您会在`Set`中获得一个键`map`，然后遍历这些键并打印它们。您需要从映射中获取这些键的值并打印它们。所以，更改以下语句： -

```
System.out.println("Name: " + e.name + " , age: " + e.age); 
```

和 ： -

```
System.out.println("Name: " + emp.get(e).name + " , age: " + emp.get(e).age); 
```

# macos - Java程序的UNIX命令，从另一个目录输入文本

> ID：12662918
> 
> 赞同：0
> 
> 时间：2012-09-30T16:30:52.233
> 
> 标签：macos, io-redirection

我通常会在当前目录中使用输入文件运行我的 Java 程序。

```
java myClass < input.txt > output.txt 
```

但是，如果我的输入文件在另一个目录（例如拇指驱动器）中，我应该输入什么，并且我也想将我的输出文件保存到同一个外部目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:43:11.977

您是否尝试过指定完整路径，例如

```
java myClass < /media/thumbdrive/input.txt > /media/thumbdrive/output.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:43:34.247

其实我真的不知道如何写一个绝对路径。但后来我记得你可以将东西拖放到 Mac 的终端中。

因此，要读取/写入另一个目录，只需提供绝对路径。

```
java TestShell < /Users/me/Downloads/intput.txt  > /Users/me/Downloads/output.txt 
```

# scala - 匹配 abc/? 在路由文件中

> ID：12662920
> 
> 赞同：1
> 
> 时间：2012-09-30T16:30:59.630
> 
> 标签：scala, playframework-2.0

你如何匹配 abc/？在游戏 2 中？播放 1 的文档显示这将起作用，但我找不到播放 2 的资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T15:38:27.297

In routes file, just use this:

```
GET   /abc          controllers.Clients.show() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:37:12.143

这是一个修复：

在`conf/routes`资源之前和更具体的休息调用之后添加此行。

```
# Detrail url
GET     /*path/                     controllers.BlogController.redirectUntrailed(path: String) 
```

然后在控制器中，添加这个动作。

```
def redirectUntrailed(path: String) = Action {
  MovedPermanently("/" + path)
} 
```

# perl - Perl on Modules-继承、多态

> ID：12662924
> 
> 赞同：-8
> 
> 时间：2012-09-30T16:31:28.587
> 
> 标签：perl

这是来自面向对象的 Perl 的一个问题。我应该设计一个模块：
1）存储值
2）计算总数，平均值，计数。
我应该在面向对象的 Perl 中找到与方法覆盖或多态性或继承相关的代码。

我的代码是这样的：

```
package Stats;
use strict;
use warnings;
sub new {
  my $class = @_;
  my $self = {};
  bless $self, $class;
  $self->clear();
  return $self;
}
sub clear {
  my $self = $_[0];
  $self->{'numlist'} = undef;
  $self->{'x_sum'} = 0;
  $self->{'x2_sum'} = 0;
}
sub addValue {
  my $self = $_[0];
  my $num = $_[1];
  if (defined $num) {
    push @{$self->{'numlist'}}, $num;
    $self->{'x_sum'} += $num;
    $self->{'x2_sum'} += $num**2;
  }
}
sub getTotal {
  my $self = $_[0];
  return $self->{'x_sum'};
}
sub getMean {
  my $self = $_[0];
  my @numlist = @{$self->{'numlist'}};
  if (!@numlist) { return 0; }
  return $self->getTotal()/@numlist;
}
sub getValueList {
  my $self = $_[0];
  return @{$self->{'numlist'}};
}
1;

sub results {
my $obj = new Stats(13,4,56,43,33);
print "Number of values: ", scalar($obj->getValueList()), "\n";
print "Total: ", $obj->getTotal(), "\n";
print "Mean: ", $obj->getMean(), "\n";
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:22:20.637

好的。您使用的对象构造函数语法有点笨拙，我更喜欢

```
my $obj = Stats->new(13,4,56,43,33); 
```

在 Perl 中，`new`不是一个普通的关键字，而是一个简单的 sub，应该这样使用。`Foo->sub(@args)`语法完全等同于，因此`Foo::sub('Foo', @args)`负责传递正确的类名并调用正确的`new`子类。

然后，您应该使用传递给`Stats`构造函数的数字。这个构造函数应该可以解决问题：

```
sub new {
  my ($class, @args) = @_;
  my $self = {};
  bless $self, $class;
  $self->clear();
  $self->addValue($_) foreach @args;
  return $self;
} 
```

我将构造函数的所有参数填充到`@args`数组中，然后循环它们并将这些值添加到我们的 stats 对象中。

另外，不要忘记实际调用`results()`来执行您的测试。它将打印：

```
Number of values: 5
Total: 149
Mean: 29.8 
```

# javascript - NodeJS - 如何打破一个功能？

> ID：12662930
> 
> 赞同：3
> 
> 时间：2012-09-30T16:32:47.570
> 
> 标签：javascript, node.js, callback, return, break

最近有一个类似的问题，但仍然无法得到它。在添加新用户之前，我必须验证注册页面。

```
app.post('/signup', function(req, res) {
    //checking if first name is filled
    if (req.body.first_name = "" || req.body.first_name = null || req.body.first_name = undefined) {
      res.render('signup', { "title": "Ttitle", "menu": "signup", user: req.user, "error" : "empty_first_name" });
      break;
    }
    //checking if last name is filled
    if (req.body.last_name = "" || req.body.last_name = null || req.body.last_name = undefined) {
      res.render('signup', { "title": "Ttitle", "menu": "signup", user: req.user, "error" : "empty_last_name" });
      break;
    }
    //checking if email is filled
    if (req.body.email = "" || req.body.email = null || req.body.email = undefined) {
      res.render('signup', { "title": "Ttitle", "menu": "signup", user: req.user, "error" : "empty_email" });
      break;
    }
    //checking if passwords match
    if (req.body.password != req.body.repassword) {
      res.render('signup', { "title": "Ttitle", "menu": "signup", user: req.user, "error" : "pass_missmatch" });
      break;
    }
    ...
    ...
    ...
    //and finally if everything seems to be OK...
    addUser(req.body.email, req.body.password, req.body.first_name, req.body.last_name, req.body.country, function(status) {
        res.render('signup', { "title": "Ttitle", "menu": "signup", user: req.user, "success" : 1 });
    });
}); 
```

Node.JS 告诉我所有的中断都是非法的。但是我应该如何以适当的方式打破我的功能呢？它不返回任何东西。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-30T16:34:31.537

语句用于`return`停止函数。

你可以提供一个可选的返回值，但在这种情况下，我相信它会被忽略，所以你应该能够`break;`用`return;`.

* * *

旁注，但是您有很多重复的代码，并且您的`if`条件有分配。您通常可以排除重复。`return`此外，如果您使用`if/else if/else`语句，您可以完全摆脱它。

这是一个例子。

```
function isEmpty(val) {
    return val === "" || val == null;
}

function renderWithError(req, res, msg) {
    res.render('signup', { "title": "Ttitle", "menu": "signup", user: req.user, "error" : msg });
}

app.post('/signup', function(req, res) {
    if (isEmpty(req.body.first_name)) {
      renderWithError(req, res, "empty_first_name");
    }
    else if (isEmpty(req.body.last_name)) {
      renderWithError(req, res, "empty_last_name");
    }
    else if (isEmpty(req.body.email)) {
      renderWithError(req, res, "empty_email");
    }
    else if (req.body.password != req.body.repassword) {
      renderWithError(req, res, "pass_missmatch");
    }
    ...
    ...
    ...
    else {
        addUser(req.body.email, req.body.password, req.body.first_name, req.body.last_name, req.body.country, function(status) {
            res.render('signup', { "title": "Ttitle", "menu": "signup", user: req.user, "success" : 1 });
        });
    }
}); 
```

* * *

# c# - 使用 SQL Server 和 ASP.NET 链接用户响应

> ID：12662932
> 
> 赞同：0
> 
> 时间：2012-09-30T16:32:57.773
> 
> 标签：c#, asp.net, .net, sql-server, sql-server-2008

我不太确定如何解决这个问题，所以认为最好问一下，看看是否有人有任何可能有帮助的想法。

我有一个存储在 SQL Server 中的表，它使用此架构存储 Exchange 2010 邮箱服务器性能数据：

```
CREATE TABLE [dbo].[2010_Perfmon_MBX]
(
    [ID] [int] IDENTITY(1,1) NOT NULL,
    [Server] [varchar](50) NULL,
    [ObjectName] [varchar](100) NULL,
    [CounterName] [varchar](100) NULL,
    [InstanceName] [varchar](100) NULL,
    [Value] [decimal](18, 3) NULL,
    [DateTime] [datetime] NULL
) 
```

我还有一个用 C# 编写的 ASP.NET 网站。我想允许用户选择级联答案，最终将请求的数据返回到 GridView/Graph 中。

现在，我的主要挑战是如何确保在最终用户从所有列中选择值之前不返回数据。

我想这样上演：

要求用户提供服务器以从中提取数据

```
SELECT DISTINCT(Server)
FROM 2010_Perfmon_MBX 
```

让我们假设他们选择了服务器`MailboxServer.domain.com`：

```
SELECT DISTINCT(ObjectName)
FROM 2010_Perfmon_MBX
WHERE Server = 'MailboxServer.domain.com' 
```

然后根据服务器向用户询问`MailboxServer.domain.com`ObjectName。他们选择`'msexchangeis mailbox'`例如：

```
SELECT DISTINCT(CounterName)
FROM 2010_Perfmon_MBX
WHERE Server = 'MailboxServer.domain.com'
AND ObjectName = 'msexchangeis mailbox' 
```

接下来要求用户输入`CounterName`. 他们选择`'active rpc threads'`：

```
SELECT DISTINCT(InstanceName)
FROM 2010_Perfmon_MBX
WHERE Server = 'MailboxServer.domain.com'
AND ObjectName = 'msexchangeis mailbox'
AND CounterName = 'active rpc threads' 
```

最后他们选择了`InstanceName`. 在这个例子`'Database20'`中。然后运行完整的查询，根据所做的选择拉回所有数据：

```
SELECT *
FROM 2010_Perfmon_MBX
WHERE Server = 'MailboxServer.domain.com'
AND ObjectName = 'msexchangeis mailbox'
AND CounterName = 'active rpc threads'
AND InstanceName = 'Database20' 
```

什么是最优雅的方式来确保选择流程正常工作而不跳进和链接选择？

我需要确保选择是动态的，并且基于所选服务器的 SQL Server 表中的可用数据，因此只能选择有效数据。

谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:54:20.067

相当广泛的问题，所以这里有一个广泛的答案。我将假设您的 Web 应用程序是 ASP.NET WebForms。

1.  使用 DropDownList 控件进行用户选择，使用 RequiredFieldValidator 控件来确保用户从每个选项中做出有效选择。
2.  将下拉列表与您的 SELECT DISTINCT 数据绑定
3.  有一个提交按钮，在回发检查 Page.IsValid 时，如果为真，则获取数据并绑定 GridView。

**更新**

好的，我认为您是说可用的选择取决于前一个，从服务器开始。在这种情况下，一次呈现每个 DropDownList（使其可见），将它们的 autopostback 属性设置为 true。每次索引更改都会重新绑定所有后续依赖的 DropDownLists。您还可以使用验证器控件来确保用户在提交之前已在所有列表中做出选择：

aspx

```
<asp:DropDownList ID="ddlObjectName" runat="server" DataSourceId="dsObjectName" 
    OnDataBound="ddlObjectName_DataBound"></DropDownList>
<asp:RequiredFieldValidator ID="ddlObjectNameRequired" runat="server" 
        ControlToValidate="ddlObjectName" InitialValue="-1"
        ErrorMessage="Please select an Object Name.">
</asp:RequiredFieldValidator>

<asp:Button ID="Submit" runat="server" Text="Submit" OnClick="Submit_Click" /> 
```

aspx.cs

```
protected void ddlObjectName_DataBound(object sender, EventArgs e)
{
    ddlObjectName.Items.Insert(0, new ListItem("Please Select...", "-1"));
}

protected void Submit_Click(object sender, EventArgs e)
{
    if(Page.IsValid)
    {
        //Bind the data grid ...
    }
} 
```

# java - 当宽度与父 Jframe 相同时，jpanel 变成一个小框

> ID：12662934
> 
> 赞同：2
> 
> 时间：2012-09-30T16:33:00.643
> 
> 标签：java, swing

我正在与 JFrame 内的 JPanel 创建一个接口，其中 JPanel 的宽度设置为等于 JFrame 的宽度。与我的预期相反，当我运行程序查看显示时，JPanel 显示为一个非常小的框，小于所需大小，其宽度应等于 JFrame 的宽度。但是，当我将 JPanel 的宽度减小大约 6 时，它可以很好地显示它在 JFrame 中的确切大小。在我看来，JFrame 可能有某种边距或填充，但我真的不知道。请帮助并说明为什么我不能使 JPanel 宽度与父 JFrame 的宽度相同，以及如果可能的话如何做到这一点。我真的希望它们具有相同的宽度，因为这就是我的设计设置方式。我的代码如下：

```
`import java.awt.*; //importing awt package
import javax.swing.*; //importing swing package

//class definition
public class PMSysClient {

//declaration of variables
private JFrame lgFrame; //login frame
private JFrame fdFrame; //frame for front desk
private JFrame docFrame; //frame for doctor
private JPanel logHeadPan; //header panel in login
private JPanel logAreaPan; //login area panel

//constructor definition
public PMSysClient() {
    initialise();
}//end of constructor

//method to initialise class
public void initialise() {
    lgFrame = new JFrame();
    Container cont = lgFrame.getContentPane();
    lgFrame.setSize(863, 569);
    lgFrame.setLocationRelativeTo(null);
    lgFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    cont.setBackground(new Color(231, 228, 204));
    cont.setLayout(new GridBagLayout());

    logHeadPan = new JPanel();
    logHeadPan.setBackground(new Color(204, 153, 255));
    logHeadPan.setPreferredSize(new Dimension(863, 210));
    GridBagConstraints c1 = new GridBagConstraints();
    c1.weighty = 0.1;
    c1.weightx=0.1;
    c1.gridx = 0;
    c1.gridy = 0;
    c1.anchor = GridBagConstraints.FIRST_LINE_START;

    lgFrame.add(logHeadPan, c1);
    lgFrame.setVisible(true);
}//end of initialise

//main method definition
public static void main(String[] args) {
    try {
        UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");
    } catch (Exception e) {
    }
    new PMSysClient();
}//end of main method
}` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:48:40.343

由于您的目标是使`JPanel`宽度与您的 parent 的宽度相同`JFrame`，您可以将填充设置`GridBagConstraints`为：

```
c1.fill = GridBagConstraints.HORIZONTAL; 
```

虽然这会产生一个薄的水平面板，但为了让高度在 Y 轴上扩展，您也可以使用：

```
c1.fill = GridBagConstraints.BOTH; 
```

最好将尺寸留给 Layoutmanagers，避免为组件设置首选尺寸。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-30T16:50:04.293

只用合适的`LayoutManager`，[不要用`setXXXSize`方法](https://stackoverflow.com/q/7229226/1076463)。如果您有一个子组件应该接管其父组件的完整宽度，a`BorderLayout`对于父组件来说已经足够了，您可以将子组件添加到`NORTH`. 引用[布局管理器教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

> 如果窗口被放大，中心区域将获得尽可能多的可用空间。其他区域仅根据需要扩展以填充所有可用空间。通常一个容器只使用 BorderLayout 对象的一个​​或两个区域——只是中心，或者中心和底部。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-30T16:38:09.090

添加 setMinimumSize() 并保留 setPreferredSize()。尺寸可以不同。但是你需要同时使用这两种方法。

```
logHeadPan.setMinimumSize(...) 
```

# facebook - html页面上iframe中的Facebook请求对话框

> ID：12662938
> 
> 赞同：2
> 
> 时间：2012-09-30T16:33:23.077
> 
> 标签：facebook, iframe, dialog, request

我想在我的 html 页面上将 facebook 请求对话框显示为 iframe。目前我有以下代码：

```
<div id="fb-root"></div>
    <script type="text/javascript">
    //<![CDATA[
           window.fbAsyncInit = function() {
               FB.init({appId: 'xyz', 
                  status: true, 
                  cookie: true, 
                  xfbml: true,
                  oauth: true});
            };

                FB.ui({ method: 'apprequests',
                    display: 'iframe',
                    title: 'Invitation to join game',
                    data: '1234',
                    new_style_message: true,
                    message: 'invitation to join game'});

            (function() {
                var e = document.createElement('script');
                e.type = 'text/javascript';
                e.src = document.location.protocol +
                    '//connect.facebook.net/en_US/all.js';
                e.async = true;
                document.getElementById('fb-root')
                                       .appendChild(e);
            }());
          //]]>
    </script> 
```

不应该 display:'iframe' 在页面加载时将该内容显示为 iframe？还是我在这里做错了什么？

**我可以让它看起来像这样（我不想要）： http:** [//forumbilder.se/images/b1620121110025243.jpg](http://forumbilder.se/images/b1620121110025243.jpg)

**这就是我希望它的样子： http:** [//forumbilder.se/images/3f62012111130ff92.jpg](http://forumbilder.se/images/3f62012111130ff92.jpg)

# javascript - 使用 Jquery 删除文本输入框

> ID：12662949
> 
> 赞同：-2
> 
> 时间：2012-09-30T16:34:56.587
> 
> 标签：javascript, jquery, input

请看看这个

[http://jsfiddle.net/tt13/CFbpt/](http://jsfiddle.net/tt13/CFbpt/)

我需要的是，

1.  当用户单击 + 按钮时，添加新的文本输入
2.  当文本框数达到 3 时隐藏第一个文本框的 + 按钮（用户最多可以添加 2 个文本框），当文本框数 < 3 时取消隐藏
3.  当用户单击 x 按钮时，删除父文本框（位于按钮左侧）

我的 + 按钮效果很好：它可以动态添加文本框。但是 x（删除）按钮没有。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:47:41.207

是的，这表明您当前正在设置您在按钮实际存在之前删除事件。而是将删除处理程序放在添加按钮事件中：

[http://jsfiddle.net/CFbpt/1/](http://jsfiddle.net/CFbpt/1/)

但实际上，您应该将代码放入问题中，以便其他人可以找到它...

```
$(document).ready(function(){

    var addCvBtn    = $(".addCvBtn"),
    rmCvBtn    = $(".rmCvBtn"),
    rcmText     = $(".rcmText"),
    btncount    = 0,
    inputhtml = '<div class="cvInputContainer withRemBtn"><input placeholder="CV Linkini daxil edin" name="cvlinks[]" type="text" /><button class="btn btn-medium btn-danger rmCvBtn " type="button"><i class="icon-remove icon-white"></i></button></div>';

addCvBtn.click(function(){
        if(btncount == 3)  addCvBtn.hide();
        else
        {
            $(this).parent().parent().append(inputhtml);
            btncount++;
            rmCvBtn    = $(".rmCvBtn");
            $(".withRemBtn").on('click', ".rmCvBtn", function(){
               addCvBtn.show();
               $(this).parent().remove(); //EDITED
               btncount--;
               alert('deleted');
            });
        }        
    });

 }); 
```

编辑：我认为您可能一直在尝试实现的 .on() 更动态的使用是： $(document).ready(function(){

```
 var addCvBtn    = $(".addCvBtn"),
    rmCvBtn    = $(".rmCvBtn"),
    rcmText     = $(".rcmText"),
    btncount    = 0,
    inputhtml = '<div class="cvInputContainer withRemBtn"><input placeholder="CV Linkini daxil edin" name="cvlinks[]" type="text" /><button class="btn btn-medium btn-danger rmCvBtn " type="button"><i class="icon-remove icon-white"></i></button></div>';

addCvBtn.click(function(){
        if(btncount == 3)  addCvBtn.hide();
        else
        {
            $(this).parent().parent().append(inputhtml);
            btncount++;
            rmCvBtn    = $(".rmCvBtn");
        }        
    });

 $(document).on('click', ".withRemBtn .rmCvBtn", function(){
               addCvBtn.show();
               $(this).parent().remove(); //EDITED
               btncount--;
               alert('deleted');
            });  
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:40:57.610

您需要在 中声明您`delete`的事件`click`。在您编写代码时，您首先设置删除事件，然后添加它。它不会起作用，因为 btn delete 不会在添加 'enter code heredelete' 事件的步骤中退出

# c++ - 文本框为空时 C++ Windows 窗体应用程序未处理的异常错误

> ID：12662951
> 
> 赞同：0
> 
> 时间：2012-09-30T15:37:36.513
> 
> 标签：c++, winforms, c++-cli

我正在 Visual Studio 中为 C++ 课程构建温度转换应用程序。这是一个 Windows 窗体应用程序。

我的问题是，当我运行应用程序时，如果我没有在 txtFahrenheit 或 txtCelsius2 文本框中输入任何内容，我会收到以下错误：

“在 mscorlib.dll 中发生了“System.FormatException”类型的未处理异常”

只有在两个文本框中都输入了数字时，该应用程序才能立即运行。

有人告诉我尝试使用它：

```
Double::TryParse() 
```

但我是 C++ 的新手，即使查看了 MSDN 库，也不知道如何使用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:43:18.043

这将检查文本框中的条目是否可转换为数字。

```
double val;
bool result = System::Double::TryParse(txtFahrenheit->Text,val);

if (result)
{
    //Converted successfully, you can use val
}
else
{
    //Error
} 
```

# sql - SQL 中列名不明确的查询错误

> ID：12662954
> 
> 赞同：45
> 
> 时间：2012-09-30T16:35:47.603
> 
> 标签：sql, sql-server, tsql

此查询 (InvoiceID) 出现不明确的列名错误。我不知道为什么。它们似乎都已正确连接，那么为什么 SSMS 不知道显示 VendorID？

询问：

```
SELECT 
    VendorName, InvoiceID, InvoiceSequence, InvoiceLineItemAmount
FROM Vendors 
JOIN Invoices ON (Vendors.VendorID = Invoices.VendorID)
JOIN InvoiceLineItems ON (Invoices.InvoiceID = InvoiceLineItems.InvoiceID)
WHERE  
    Invoices.InvoiceID IN
        (SELECT InvoiceSequence 
         FROM InvoiceLineItems
         WHERE InvoiceSequence > 1)
ORDER BY 
    VendorName, InvoiceID, InvoiceSequence, InvoiceLineItemAmount 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-09-30T16:45:36.570

当我们通过连接表从**多个表中选择数据并且****至少一个选定的列**（使用 * 选择所有列时也会发生）**在多个表中存在同名**时，我们会遇到此错误（我们选择的/加入的表）。在这种情况下，我们必须指定从哪个表中选择列。

*以下是上述概念的示例解决方案实现*

我认为您只有在`InvoiceID`存在于`InvoiceLineItems`和`Invoices`其他领域似乎不同时才有歧义。所以试试这个

我只是用 Invoices.InvoiceID 替换 InvoiceID

```
 SELECT 
        VendorName, Invoices.InvoiceID, InvoiceSequence, InvoiceLineItemAmount
    FROM Vendors 
    JOIN Invoices ON (Vendors.VendorID = Invoices.VendorID)
    JOIN InvoiceLineItems ON (Invoices.InvoiceID = InvoiceLineItems.InvoiceID)
    WHERE  
        Invoices.InvoiceID IN
            (SELECT InvoiceSequence 
             FROM InvoiceLineItems
             WHERE InvoiceSequence > 1)
    ORDER BY 
        VendorName, Invoices.InvoiceID, InvoiceSequence, InvoiceLineItemAmount 
```

您可以在不使用任何别名的情况下对所有列（在选择、位置、分组依据和排序依据）使用 tablename.columnnae。但是，您可以按照其他答案的指导使用别名

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-30T16:38:36.840

`InvoiceID`您在`Invoices`表格和表格中都有一列`InvoiceLineItems`。查询执行引擎无法知道您想要返回哪一个。

添加表别名将有助于：

```
SELECT V.VendorName, I.InvoiceID, IL.InvoiceSequence, IL.InvoiceLineItemAmount
FROM Vendors V
JOIN Invoices I ON (...)
JOIN InvoiceLineItems IL ON (...)
WHERE ...
ORDER BY V.VendorName, I.InvoiceID, IL.InvoiceSequence, IL.InvoiceLineItemAmount 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-30T16:40:49.673

因为您要连接两个表 Invoices 和 InvoiceLineItems，它们都包含 InvoiceID。更改为 Invoices.InvoiceID 以使其正确。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-30T16:39:05.250

很可能两个表都有同名的列。给每个表起别名，并用表别名调用每一列。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-30T16:39:48.687

这是因为两个表上都存在某些字段（特别是*Invoices 表*和 InvoiceLineItems 上的*InvoiceID* *） 。*回答问题的方法是在其上添加一个。**`ALIAS`**

 **```
SELECT 
    a.VendorName,  Invoices.InvoiceID, .. -- or use full tableName
FROM Vendors a   -- This is an `ALIAS` of table Vendors
JOIN Invoices ON (Vendors.VendorID = Invoices.VendorID)
JOIN InvoiceLineItems ON (Invoices.InvoiceID = InvoiceLineItems.InvoiceID)
WHERE  
    Invoices.InvoiceID IN
        (SELECT InvoiceSequence 
         FROM InvoiceLineItems
         WHERE InvoiceSequence > 1)
ORDER BY 
    VendorName, InvoiceID, InvoiceSequence, InvoiceLineItemAmount 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-08-26T07:50:34.710

如果您连接 2 个或更多表并且它们的列具有相似的名称，SQL 服务器希望您限定它们所属的列。

```
SELECT  ev.[ID]
    ,[Description]
    FROM   [Events] as ev 
    LEFT JOIN  [Units] as un ON ev.UnitID = un.UnitId 
```

如果 Events 和 Units 表具有相同的列名 (ID) SQL 服务器希望您使用别名。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-27T00:40:06.497

它不仅仅发生在带有连接的查询中。

当您在单个表查询上使用 ORDER BY 且列名在查询中出现两次时，可能会发生这种情况。

例如。

```
SELECT firstname, * FROM person ORDER BY firstname;` 
```

因为`firstname`在结果集中出现了两次，所以您要按哪个排序是不明确的（即使它们都是相同的）。

您可以使用这些别名中的任何一个来解决它

```
 SELECT firstname AS fn, * FROM person ORDER BY firstname;

SELECT p.firstname, * FROM person p ORDER BY firstname;

-- Its not really clear to me why this next one works but it does
SELECT p.firstname, p.* FROM person p ORDER BY p.firstname; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-29T10:01:15.447

您的一个表具有相同的列名，这会在查询中导致您所指表的哪些列的混淆。复制此代码并运行它。

```
SELECT 
    v.VendorName, i.InvoiceID, iL.InvoiceSequence, iL.InvoiceLineItemAmount
FROM Vendors AS v
JOIN Invoices AS i ON (v.VendorID = .VendorID)
JOIN InvoiceLineItems AS iL ON (i.InvoiceID = iL.InvoiceID)
WHERE  
    I.InvoiceID IN
        (SELECT iL.InvoiceSequence 
         FROM InvoiceLineItems
         WHERE iL.InvoiceSequence > 1)
ORDER BY 
    V.VendorName, i.InvoiceID, iL.InvoiceSequence, iL.InvoiceLineItemAmount 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-19T11:18:51.903

发生这种情况是因为在多个表中存在具有相同名称的字段，在查询中，由于连接，因此您应该以不同的方式引用字段，为表提供名称（别名）。**

# c# - 什么会导致 GetFileAsync 挂起？

> ID：12662955
> 
> 赞同：0
> 
> 时间：2012-09-30T16:36:02.060
> 
> 标签：c#, windows-8, microsoft-metro

我有一个用于 Windows Store 应用程序（又名 Metro）的简单实用程序集合，但我发现它`ApplicationData.Current.LocalFolder.GetFileAsync`在连续调用时似乎挂起（即，一旦我尝试调试它并逐步执行，问题就消失了） .

```
 public static async Task<LocalCache<T>> LoadCache()
    {
        try
        {
            // Get the input stream for the cache
            StorageFile file = await ApplicationData.Current.LocalFolder.GetFileAsync(GetFileNameForType());
            using (IInputStream inStream = await file.OpenSequentialReadAsync())
            {
                // Deserialize the cache
                DataContractSerializer serializer = new DataContractSerializer(typeof(LocalCache<T>));
                return (LocalCache<T>)serializer.ReadObject(inStream.AsStreamForRead());
            }
        }
        catch (FileNotFoundException)
        {
            return new LocalCache<T>();
        }
    } 
```

似乎没有任何过载来指定打开文件的模式，而且它似乎没有返回，这让我有点难过。我能做些什么来防止这种僵局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-30T16:55:59.673

最可能的原因是您的调用堆栈更进一步；我猜可能有调用`Wait`or `Result`。这[将导致死锁](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)（如我的博客所述）。

如果您因为这是初始化或构造函数的一部分而阻塞，那么您可能对[异步延迟初始化](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)感兴趣（也在我的博客中描述）。

# c++ - 从输入流中读取

> ID：12662956
> 
> 赞同：1
> 
> 时间：2012-09-30T16:36:04.353
> 
> 标签：c++, string, inputstream, istringstream

我有一个涉及流的 C++ 课程的编程作业，我试图更好地理解为什么某些函数会以它们的方式工作。

我正在从带有空格的字符串流中读取文本后的输入。为什么最后一个词在输出中重复？

```
istringstream is;
string inputstring = "The cliched statement regarding the big brown dog and foobar or something    ";
string outputstring;
is.str(inputstring);
while (is.good())
{
    is >> outputstring;
    cout << outputstring << endl;
} 
```

因此，我现在不是在 good 标志上循环，而是将提取作为 while 条件进行：

```
while (is >> outputstring)
... 
```

这很好用，不会重复最后一句话。这个语句在读完后跳出 while 循环的原因是什么？提取返回对同一流的引用，但它是否检查标志或其他内容？

是否有一个标题可以让您包含所有流？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T16:49:20.737

> 这个语句在读完后跳出 while 循环的原因是什么？提取返回对同一流的引用，但它是否检查标志或其他内容？

提取运算符返回对流的引用是绝对正确的。任何用作`while`循环控制条件的表达式（还有`for`and `do`-`while`循环和`if`语句）都被强制`bool`输入。它算作一次`explicit`转换，所以`ios_base::operator bool()`称为，它返回`!this->fail()`. 这就是检查标志的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:40:52.743

> 为什么最后一个词在输出中重复？

这就是发生的情况：因为您在 末尾有空格，所以`inputstring`读取最后一个单词不会翻转 good() 位。程序在最后一个单词后面找到一个空格字符，认为还有更多单词，所以`is.good()`仍然返回`true`。`is.good()`仅当程序尝试读取字符串末尾之后才返回 false；这还没有发生。

然后，下一次你通过循环并从 中读取时`is`，程序意识到没有更多的单词，**不会覆盖** `outputstring`，因此你再次写入`outputstring`之前的内容，这是最后一个单词。

尝试打印`is.good()`读取之前和之后的结果`is`，并删除末尾的空格字符，`inputstring`看看有什么变化……</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:41:53.240

您总是需要**在**阅读后检查，因为流可能处于良好状态但尝试读取某些内容可能会失败：毕竟，流无法知道您将要阅读的内容。因此，当您检查最后一个元素之后的流时，它仍然是`good()`. 然后您尝试读取哪个失败并且`good()`是`false`但是您仍然打印该值。

此外，您**不**希望将`.good()`其用作条件，因为`false`即使在读取成功后，如果到达流的末尾，它也可能会变为条件。例如，如果读取了一个数字并且文件末尾的数字后面没有空格，则`std::ios_base::eofbit`设置。只需像这样使用 idomatic 循环：

```
while (in >> value) {
    std::cout << "read value='" << value << "'\n";
} 
```

它看起来太简单了以至于无法正确，但实际上做的是正确的事情！

# php - 从另一个类中调用 PHP 类

> ID：12662962
> 
> 赞同：4
> 
> 时间：2012-09-30T16:36:51.637
> 
> 标签：php, oop

我猜真的很简单，但为什么下面的不起作用？我猜这是一个范围的事情，从 class1 中看不到 class2。是的，我收到“调用非对象的成员函数”错误。

```
class class1 {
    function func1() {
        $class2->func3();
    }
    function func2() {
        $this->func1();
    }
}

class class2 {
    function func3() {
        echo "hello!";
    }
}

$class1 = new class1();
$class2 = new class2();

$class1->func1; 
```

如果有人能给我解决这个问题，我将不胜感激。我已经搜索了一段时间，但我得到了很多其他人试图在其他类和类似的类中实例化新类的例子，而不是我遇到的这个特殊问题。

你会认为我在课堂上没有做很多事情是对的！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-30T16:42:35.710

PHP 不像 JavaScript 那样冒泡，所以你`$class2`是未定义的：

> 变量的范围是定义它的上下文。大多数情况下，所有 PHP 变量都只有一个作用域。这个单一范围也涵盖了包含和必需的文件 […] 在用户定义的函数中，引入了本地函数范围。默认情况下，函数内部使用的任何变量都仅限于本地函数范围。

来源： http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

换句话说，PHP 中只有全局作用域和函数/方法作用域。因此，要么将`$class2`实例作为协作者传递给方法

```
class class1 
{
    function func1($class2) {
        $class2->func3();
    }
}

$class1 = new class1();
$class2 = new class2();
$class1->func1($class2); 
```

或通过构造函数注入它：

```
class class1 
{
    private $class2;        

    public function __construct(Class2 $class2)
    {
        $this->class2 = $class2;
    }

    function func1() 
    {
        $this->class2->func3();
    }
}

$class2 = new class2();
$class1 = new class1($class2);
$class1->func1(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T16:43:22.087

我建议您看一下静态函数/属性。基本上你不需要实例化class2，你只需要将其中的函数定义为静态的。看看下面的实现：

```
<?php
class class1 {
    function func1() {
        class2::func3();
    }
    function func2() {
        $this->func1();
    }
}

class class2 {
    public static function func3() {
        echo "hello!";
    }
}

$class1 = new class1();

$class1->func1();

?> 
```

尽可能避免实例化对象总是很好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T16:39:23.523

```
class class1 {
    function func1() {
        //Initialize before using it.
        $class2 = new class2();
        $class2->func3();
    }
    function func2() {
        $this->func1();
    }
}

class class2 {
    function func3() {
        echo "hello!";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T16:41:02.140

两件事情：

在函数调用中添加括号并使用 global 将变量放入范围

```
class class1 {
    function func1() {
        global $class2; // Get variable into scope
        $class2->func3();
    }
    function func2() {
        $this->func1();
    }
}

class class2 {
    function func3() {
        echo "hello!";
    }
}

$class1 = new class1();
$class2 = new class2();

$class1->func1(); // Add brackets for function call 
```

# c# - 可滚动区域顶部的绝对位置元素并一次滚动两个不同的元素

> ID：12662963
> 
> 赞同：0
> 
> 时间：2012-09-30T16:37:00.067
> 
> 标签：c#, windows-phone-7, position

基本上我想要做的是有两个条带，一个在左侧，一个在网格顶部（两个列表框都将包含文本元素）。当用户在我的网格内滚动时，我希望这两个列表保持可见。

例如，这些条可以是标尺（上面只有数字和线条），当用户向右滚动时，顶部的“标尺”会随着网格一起滚动，但左侧的标尺仍然可见。用户垂直滚动时也是如此：侧面标尺上的数字增加，但顶部的标尺仍然可见。

这是一张图像（虽然只有一个标尺，但它显示了我想要做的事情。蓝色方块基本上是窗口，如果它水平滚动，侧边栏仍然可见，但如果它垂直滚动，侧边栏颜色会改变。

![在此处输入图像描述](../Images/55d9f3834be4775829088784cff502a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:27:42.833

在您的 xaml 中定义两个网格。

```
 <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
     <Grid x:Name="Grid1">
       //scrollviewer code
     </Grid>
     <Grid x:Name="Grid2">
       //sidebar code
     </Grid>
 </Grid> 
```

网格 1 包含滚动视图，网格 2 包含侧边栏。这两个网格应该在同一个父级中定义。这将使它们相互重叠。在操纵事件中，您可以使用它们的可见性。我希望这有帮助。

# tags - OpenMPI：使用标签：这些可以用来创建虚拟通道吗？

> ID：12662965
> 
> 赞同：1
> 
> 时间：2012-09-30T16:37:17.930
> 
> 标签：tags, openmpi

我在不同的地方问过这个问题，包括 OpenMPI 邮件列表。到目前为止，我没有运气。因此，如果有人可以提供帮助，我将不胜感激，无论这个问题看起来多么愚蠢。

问题：

考虑在两个不同的处理器上运行的两个进程 A 和 B。没有其他进程运行。进程 A 有两条消息要发送，M1（大小：Large，标记 T1）和 M2（1 字节，标记 T2）。进程 B 使用 MPI_Probe 选择性地过滤和接收消息。当它没有 MPI_Recv 消息 M1 时，是否保证进程 B 仍然可以接收消息 M2？考虑进程A首先发送了M1。所有进程都是单线程的。

此外，OpenMPI 是否确保可以以任何顺序接收来自同一来源、带有相同标签的两条不同消息？

基本上，我想了解 OpenMPI 的系统缓冲区是否发挥了任何作用：如果一条消息设法填满它，那么可能永远不会收到来自同一源但带有另一个标签的另一条消息。正确的？

非常感谢您的任何想法。

德文德拉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T08:16:49.400

我在 Open MPI 用户列表上回复了您，但也会在此处发布，以防其他人发现它有用。我相信 Jeff Squyres 已经在 Open MPI 邮件列表中回答了您的问题，或者至少暗示了可能存在的问题。MPI 消息按照它们发送的顺序被接收，但只在特定的（标签、通信器）元组内。这基本上意味着：

*   在同一个通信器中，如果它们带有不同的标签，您可能会收到乱序的消​​息；
*   如果它们在不同的上下文（通信器）中通信，则带有相同标签的消息可能会被乱序接收。

但这里有一个问题：如果尚未发布发送操作，您将无法收到消息。如果您有两个连续的发送操作，您必须确保第一个不会永远阻塞。标准的 MPI 发送操`MPI_Send`​​作可以以多种方式实现（标准没有具体说明如何），但在大多数 MPI 实现中，它的行为类似于非常小的消息的缓冲发送和大型消息的同步发送。如果您的发件人进程中有以下两个调用：

```
MPI_Send(largedata, largecount, MPI_INT, dest, tag1, MPI_COMM_WORLD);
MPI_Send(smalldata, smallcount, MPI_INT, dest, tag2, MPI_COMM_WORLD); 
```

可能会发生第一个`MPI_Send`实际上表现为同步的，即除非匹配的接收操作发布在接收方一侧，否则它不会返回。假设您的接收者代码是：

```
MPI_Probe(src, tag2, MPI_COMM_WORLD, &status);
MPI_Recv(largedata, largecount, MPI_INT, src, tag1, MPI_COMM_WORLD, &status); 
```

这很可能会死锁，因为这`MPI_Probe`是一个阻塞调用，即它不会在匹配的发送被发布之前返回，即第二个`MPI_Send`必须执行，这只会在第一个发送返回后发生，但它不会发生，除非`MPI_Recv`在接收者被执行...我想你明白了

为了防止死锁，您可以修改发件人的代码以使用非阻塞发送：

```
MPI_Request req;
MPI_Isend(largedata, largecount, MPI_INT, dest, tag1, MPI_COMM_WORLD, &req);
MPI_Send(smalldata, smallcount, MPI_INT, dest, tag2, MPI_COMM_WORLD);
MPI_Wait(&req, MPI_STATUS_IGNORE); 
```

使用非阻塞操作，发送调用立即返回，操作在后台继续，因此第二次发送将在此之后立即执行。现在会有两条待处理的消息，它们可以按任何顺序接收，因为它们带有不同的标签。

# objective-c - Objective-C 的标准命名约定

> ID：12662969
> 
> 赞同：6
> 
> 时间：2012-09-30T16:37:44.597
> 
> 标签：objective-c, cocoa, naming-conventions

在 Objective-C 项目的开始，我正在收集不同类型的信息，我想找到一个好的命名约定。

这种资源存在吗？

*   官方的
*   非官方但仍被广泛使用

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-30T16:37:44.597

这是[Cocoa 官方文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html#//apple_ref/doc/uid/20001281-BBCHBFAH)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-30T17:17:49.033

除了 Apple 发布的标准编码约定之外，我想提示一下[Matt Gemmell 关于 API 设计的精彩文章](http://mattgemmell.com/2012/05/24/api-design/)，该文章还涵盖了委托中使用的协议的命名约定。

# python - 使用谷歌应用引擎部署瓶子应用程序的问题

> ID：12662972
> 
> 赞同：2
> 
> 时间：2012-09-30T16:38:05.163
> 
> 标签：python, google-app-engine, bottle

新手在这里——我一直在尝试使用谷歌应用引擎在瓶子中创建一个“Hello World”。我得到了“hello world”部分显示，但即​​使在索引页面上，我也会得到以下输出：“Hello world！Status：500”
如果我尝试添加新路由（如'/page'路由），然后我导航到新路线，我收到“服务器错误：网站在检索时遇到错误......它可能因维护而关闭或配置不正确。” 在我导航到配置不正确的页面后，如果我尝试返回“/”，我也会收到服务器错误。我已将bottle.py 放在我的根目录中。有人可以帮我正确配置我的文件吗？谢谢！

```
import bottle 
from bottle import route, template, request, error, debug

@route('/')
def index():
    return "Hello World!"

@route('/page')
def page():
    return 'page!'

bottle.debug(True)
bottle.run(server='gae') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T20:41:08.890

这是关于 GAE 瓶的一个很好的教程：http: [//blog.rutwick.com/use-bottle-python-framework-with-google-app-engine](http://blog.rutwick.com/use-bottle-python-framework-with-google-app-engine)

免责声明：我没有运行本教程，但它看起来是正确的。

主要.py：

```
from framework import bottle
from framework.bottle import route, template, request, error, debug
from google.appengine.ext.webapp.util import run_wsgi_app

@route('/')
def DisplayForm():
    message = 'Hello World'
    output = template('templates/home', data = message)
    return output

def main():
    debug(True)
    run_wsgi_app(bottle.default_app())

@error(403)
def Error403(code):
    return 'Get your codes right dude, you caused some error!'

@error(404)
def Error404(code):
    return 'Stop cowboy, what are you trying to find?'

if __name__=="__main__":
    main() 
```

应用程序.yaml：

```
application: my-bottle-app
version: 1
runtime: python
api_version: 1

handlers:
- url: /styles
  static_dir: styles

- url: /.*
  script: main.py 
```

如您所见，与您的示例代码有许多不同之处。本教程很好地解释了它们，所以我不会在这里详细介绍。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-17T20:14:59.137

这可能会有所帮助：

应用程序.yaml：

```
application: my-app
version: 1
runtime: python27
api_version: 1
threadsafe: yes

- url: .*
  script: main.app 
```

主要.py：

```
import bottle

@bottle.route('/')
def root():
    return 'hello!'

bottle.run(server='gae', debug=True)
app = bottle.app() 
```

这是来自 GitHub 的原始答案。 [https://github.com/defnull/bottle/issues/401](https://github.com/defnull/bottle/issues/401)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-24T20:39:04.213

[当在App Engine + Bottle 启动代码](https://github.com/GoogleCloudPlatform/appengine-bottle-skeleton/archive/master.zip)中使用 WSGI时，您可以`bottle.debug()`在您的代码在开发服务器上运行时调用：

```
import bottle
import os

DEBUG = os.environ.get('SERVER_SOFTWARE','').startswith('Development')  
bottle.debug(DEBUG)
app = bottle.Bottle() 
```

并在`app.yaml`：

```
handlers:
- url: .*
  script: main.app 
```

# javascript - OnMouseOver this, show this but OnMouseOut, hide it

> ID：12662974
> 
> 赞同：1
> 
> 时间：2012-09-30T16:38:16.557
> 
> 标签：javascript, jquery

```
<div class="profile-banner" onMouseOver="fadeIn('edit-banner');" onMouseOut="fadeOut('edit-banner');">
    <div id="edit-banner">
        Edit Banner
    </div>
</div> 
```

（格式化在stackoverflow上很奇怪..所以忽略格式化。）

无论如何，我遇到的问题是第二次我将鼠标放在“编辑横幅”区域上，它识别出我在另一个元素上，所以它会淡出。只要我在那个个人资料横幅区域，我就需要它留下来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:46:18.553

**[jsBin 演示](http://jsbin.com/evomez/1/edit)**

使用类`.edit-banner`

```
<div class="profile-banner">
    <div class="edit-banner">
        Edit Banner
    </div>
</div> 
```

```
$('.profile-banner').on('mouseenter mouseleave',function( e ){
    var inOut = e.type=='mouseenter' ? 1 : 0;
    $(this).find('.edit-banner').stop().fadeTo(500, inOut);
}); 
```

# android - Android 如何去除文字阴影？

> ID：12662978
> 
> 赞同：3
> 
> 时间：2012-09-30T16:38:54.977
> 
> 标签：android, android-widget, textview

我有一个带有一堆文本视图的 android 程序。最初，所有这些视图都没有影子。

当我按下特定的切换按钮时，我希望这些 textViews 脱颖而出。

理想情况下，我想为它们添加文本阴影发光效果。我已经成功完成了 textView.setShadowLayer(radius, dx, dy, color)

问题是，如果我再次按下相同的切换按钮（这会使阴影出现），我需要删除阴影，以便不再突出显示文本。

我尝试将阴影层设置为半径 0 和透明颜色 #00FFFFFF、#00000000 和颜色 #FFFFFFFF、#FF000000。但是，这些都没有将 textView 设置回它出现的原始方式。

关于如何去除阴影的任何想法。（我真的不必删除它，我只是希望文本以与添加之前相同的方式出现）

主要目标是使用切换按钮打开/关闭特定文本视图的文本突出显示，我对使用阴影以外的其他方法持开放态度。理想情况下，我想使用阴影，但任何其他突出文本的想法都可以。

（这部分是在我收到 textLayer.setShadow(0,0,0,0) 的答案之后附加的；

我在布局 xml 中将这种样式用于 textView

```
<style name="second">
    <item name="android:textColor">@drawable/buttonBabyBlue</item>
    <item name="android:textStyle">bold</item>
    <item name="android:textSize">@dimen/second_text_size</item>
    <item name="android:lines">1</item>
    <item name="android:background">@drawable/baseGray</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">0dip</item> 
    <item name="android:layout_weight">8.5</item> 
    <item name="android:gravity">bottom|left</item>
    <item name="android:layout_gravity">bottom</item>
</style> 
```

当我按下使视图有阴影的按钮时

```
text.setShadowLayer(GLOW_RADIUS, GLOW_DX, GLOW_DY, R.drawable.buttonBabyBlue);
text.setTextColor(R.drawable.baseGray); 
```

然后去除阴影

```
text.setShadowLayer(0, 0, 0, 0);
text.setTextColor(R.drawable.buttonBabyBlue); 
```

这很烦人，我有图片要展示并上传，但他们不会让我展示它们，因为害怕垃圾邮件

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-30T17:02:03.800

调用`textview.setShadowLayer(0,0,0,0)`清除阴影层。

* * *

类中有一个`clearShadowLayer()`方法`Paint`，但在内部它也`setShadowLayer`使用全零参数调用 。所以看起来这对你不起作用。

我能想到的唯一其他方法是覆盖该`onDraw`方法。维护一个`TextPaint`使用阴影参数设置的对象。

```
@Override
void setShadowLayer(.....) {                  // do not call super
    paintWithShadowLayer.setShadowLayer(....); // the other with shadow layer set
}

@Override
void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    ...
    if (bToggleON) {
         canvas.drawText(text, index, count, x, y, paintWithShadowLayer);
    } else {
         canvas.drawText(text, index, count, x, y, getPaint());
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-12T12:47:23.290

```
textView.getPaint().clearShadowLayer();
textView.invalidate(); 
```

这对我有用。

# django - 获取外键的值

> ID：12662979
> 
> 赞同：0
> 
> 时间：2012-09-30T16:38:56.110
> 
> 标签：django, foreign-keys

```
class Sample(models.model):
sampleID = models.AutoField(primary_key=True)
    something = models.IntegerField()
    .
    .
    .

def save(self, *args, **kwargs):
    is_new = self.pk is None
    super(Sample, self).save(*args, **kwargs)
    if is_new:
        alpha = AnotherSample()
        alpha.asampleID =  self.pk
        alpha.say = "Lolz"
        alpha.save() 
```

我无法将我的主键分配给 AnotherSample 的 Sample 引用键。它总是说

```
Cannot assign "1L": "AnotherSample.asampleID" must be a "Sample" instance. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:53:21.200

从[文档](https://docs.djangoproject.com/en/dev/ref/models/fields/#database-representation)：

> 在幕后，Django 附加`"_id"`到字段名称以创建其数据库列名称。

```
alpha.asampleID_id = self.pk 
```

这就是为什么不适合使用“ID”后缀的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T17:03:50.290

从给定的错误消息中，您似乎正在尝试保存关系。您应该传递实际对象，而不是其主键。

```
def save(self, *args, **kwargs):
    is_new = self.pk is None
    super(Sample, self).save(*args, **kwargs)
    if is_new:
        alpha = AnotherSample()
        alpha.asampleID =  self
        alpha.say = "Lolz"
        alpha.save() 
```

# jquery - JQuery 按钮在单击时消失而不是激活其预期功能

> ID：12662986
> 
> 赞同：0
> 
> 时间：2012-09-30T16:39:19.493
> 
> 标签：jquery

我目前正在制作一个图片库，它正在做一些我不太理解的非常奇怪的事情。当我单击我想要的“下一个图像”或“上一个图像”按钮时，该按钮会消失而不是显示下一个/上一个图像。

[我已经上传到这里了，试试看](http://designbykai.com/test/index.html)

按钮功能如下所示：

```
var nextbutton= $('.next');
var prevbutton= $('.prev');

nextbutton.click(function(){
    $(this).parent(images).hide(0).next().show(0);
    return false;
});

prevbutton.click(function(){
    $(this).parent(images).hide(0).prev().show(0);
    return false;
}); 
```

工作正常，但后来我决定添加另一个功能，让您单击当前正在查看的图像，然后具有与“下一个图像”按钮相同的功能，将您带到下一个图像。很简单，我想，只需复制我用于按钮的“下一张图片”功能，但使用不同的选择器：

```
var imagebutton= $('#imagecontainer img:not(:last)');

imagebutton.click(function(){
    $(this).parent(images).hide(0).next().show(0);
    return false;
}); 
```

它做了应该做的事情，您单击图像并显示下一个图像。但是，现在下一个/上一个按钮在单击时会消失，并且它们不会将您带到下一个/上一个图像。很奇怪！

我在这里忽略了一些明显的东西吗？我对 JQuery 很陌生，所以非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T17:20:50.450

虽然我不确定下一个按钮消失的原因是什么，但请尝试使用以下代码进行绑定：

```
$(".next, #imagecontainer img:not(:last)").on("click", function(e){
    $(this).closest("div").hide().next().show();
    e.preventDefault();
});

$(".prev").on("click", function(e){
    $(this).closest("div").hide().prev().show();
    e.preventDefault();
}); 
```

在控制台中播放您的页面说它可以工作。

# java - Java按位右移255到字节值

> ID：12662988
> 
> 赞同：0
> 
> 时间：2012-09-30T16:39:23.190
> 
> 标签：java, bit-manipulation

我有一个短计数器，它递增并用作标识符。我需要将标识符作为网络套接字上的二进制数据发送。

因此，如果我有一个短值，我可以这样做以“打包”两个字节：

```
short id = 1;
byte val = (byte)(id & 0xFF);
byte val2 = (byte)((id >>> 8) & 0xFF);
System.out.printf("id=%d, val = id & 0xFF = %d, val2 = (id >>> 8) & 0xFF = %d\n", 
                   id, val, val2); 
```

现在当 id = 1 这工作正常。

但是当 id = 255 我得到：

```
short id = 255;
byte val = (byte)(id & 0xFF);           //val = -1
byte val2 = (byte)((id >>> 8) & 0xFF);  //val2 = 0 
```

现在我知道二进制中的 255 是 11111111，这意味着 java 字节值的 -1。我是否正确地认为java如何解释它是无关紧要的，如果我作为字节二进制发送 11111111 那么在另一端它可以解释它但是它想要吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:44:10.460

是的，你的想法是对的。

仅供您参考：有一个非常好的课程可以为您执行此操作。它被称为[`DataInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)和[`DataOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/DataOutputStream.html)。

```
Socket socket = ...;
DataInputStream dis = new DataInputStream(socket.getInputStream());
DataOutputStream dos = new DataOutputStream(socket.getOutputStream());

/* Write a short */
short out = 255;
dos.writeShort(out);

/* Read a short */
short in = dis.readShort(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:59:17.680

在 Java 中，所有数据类型都被解释为带符号的。也就是说，任何最高有效位等于 1 的数都是负数。当您通过网络发送数字时，Java 如何解释它并不重要，因为您仍然发送相同的位。所以是的，您的代码将按预期工作。

# c - 为什么这两个 MPI 发送行为不同？

> ID：12662991
> 
> 赞同：1
> 
> 时间：2012-09-30T16:39:48.493
> 
> 标签：c, mpi

我在 MPI 进程之间有一个类似于模式通信的管道。其中进程作为管道阶段相互发送消息。以下示例显示了以这种模式进行通信的三个进程。

```
 #include "mpi.h"
    #include <stdlib.h>
    #include <stdio.h>

    //declare stage function
    void* testcall(void* d);

    int main(int args, char** argv){
        int rank, size;
        MPI_Status status;
        MPI_Init(&args,&argv);
        MPI_Comm_rank(MPI_COMM_WORLD,&rank);
        MPI_Comm_size(MPI_COMM_WORLD,&size);

        if(rank==0){ 
            int k;  
            int x[3] = {10,11,12};
            void* data = malloc(sizeof(int));             
            for( k=0 ; k< 3;k++){           
                data = &x[k];           
                MPI_Send(data,4,MPI_BYTE,1,0,MPI_COMM_WORLD);   
            }
        }

        if(rank==1){                                
            void* rcv = malloc(sizeof(int));
            void* snd = malloc(sizeof(int));
            int k;
            for( k=0 ; k< 3;k++){
                MPI_Recv(rcv,4,MPI_BYTE,0,0,MPI_COMM_WORLD,&status);              
                snd = testcall(rcv);                        
                int z = *(int *) snd;  
                printf("RCV 1: %d \n",z);
                MPI_Send(&snd,4,MPI_BYTE,2,0,MPI_COMM_WORLD);
            }
        }

        if(rank==2){
            void* rcv2 = malloc(sizeof(int));
            void* snd2 = malloc(sizeof(int));
            int k;
            for( k=0 ; k< 3;k++){
                MPI_Recv(rcv2,4,MPI_BYTE,1,0,MPI_COMM_WORLD,&status);
                snd2 = testcall(rcv2);
                int z = *(int *) snd2;
                printf("RCV 2: %d \n",z);
            }
        }

        MPI_Finalize();
        return 0;
    }

    void* testcall(void* d){
        int z = *(int *) d;
        int k = z * 2;
        void* rslt = malloc(sizeof(int));
        rslt = &k;
        return rslt;
    } 
```

输出：

RCV1：20

RCV1：22

RCV1：24

车牌号：2136566600

车牌号：2136566600

车牌号：2136566600

我的代码有一个问题。从进程 0 发送到进程 1 成功，并在我打印时给我正确的信息。

虽然从进程 1 发送到进程 2 似乎成功，但是当我尝试打印时它只是一个意外数字（如上面的输出所示）。

我不明白为什么这两个发送行为不同。（两者都在发送一个由 void 指针指向的值。为什么第二次发送是错误的）？？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:43:39.030

```
void* testcall(void* d){
    int z = *(int *) d;
    int k = z * 2;
    void* rslt = malloc(sizeof(int));
    rslt = &k;
    return rslt;
} 
```

此代码不符合您的预期。该`rslt = &k;`行用地址覆盖`rslt`指针的值`k`（您在其他几个语句中这样做）。首先，这会导致内存泄漏，因为由 分配的内存区域的地址`malloc`会丢失。其次，它所在位置的自动（堆栈）变量一旦返回`k`就会被用于其他目的。它仅适用于您的情况，因为和`testcall`之间不存在其他函数调用。正确的功能应该是：`testcall()``int z = *(int *) snd;`

```
void* testcall(void* d){
    int z = *(int *) d;
    int k = z * 2;
    int* rslt = malloc(sizeof(int));
    *rslt = k;
    return rslt;
} 
```

然后是 1 级代码中的这一行：

```
MPI_Send(&snd,4,MPI_BYTE,2,0,MPI_COMM_WORLD); 
```

`snd`本身就是一个指针。您正在发送指针的地址，这就是为什么 rank 2 会打印奇怪的值。正确的说法应该是：

```
MPI_Send(snd,4,MPI_BYTE,2,0,MPI_COMM_WORLD); 
```

输出：

```
RCV 1: 20
RCV 1: 22
RCV 1: 24
RCV 2: 40
RCV 2: 44
RCV 2: 48 
```

# php - 忽略php中mysql记录的顺序

> ID：12662993
> 
> 赞同：0
> 
> 时间：2012-09-30T16:39:50.133
> 
> 标签：php, mysql

我有这段代码，目前*几乎*可以满足我的需要。它需要从表中选择所有记录，然后将它们格式化以准备好编码为 JSON。但是，一个记录将有一个“类型”字段设置为“默认”。这条记录首先放在 JSON 文件中，格式略有不同。

目前，如果设置为默认值的记录是数据库表中的最后一个条目，则此方法非常有效。但是，如果不是，则在编码为 JSON 时格式会中断。

任何人都可以帮助建议一个修复程序，迫使它忽略默认条目的位置，但保留格式？

```
// Get the data from the DB.

$query = 'SELECT  type, headline, startDate, text, media, caption, credits FROM #__timeline_entries'.$table.'';
$db->setQuery($query);
// Load it and put it into an array

$list = $db->loadObjectList();

$len = count($list);

$data = array();

for ($i = 0; $i < $len; $i++) {
$temp = (array) $list[$i];

$temp["asset"] = array(
    "media" => $temp["media"],
    "credit" => $temp["credits"],
    "caption" => $temp["caption"]
);
unset($temp["media"]);
unset($temp["credits"]);
unset($temp["caption"]);

if ($temp["type"] == "default") {
    $data = $list[$i];
    unset($list[$i]);

    $list[$i] = $temp;
  }
}

// Prep it for JSON
$data->date = &$list;

// Loop it once more!
$dataTwo->timeline = &$data;

// Encode the data to JSON.
$jsondata = json_encode($dataTwo); 
```

这是 Joomla 组件的一部分，但它并没有真正使用数据库连接之外的任何 Joomla 框架。我想我会提到它以防万一它有什么不同，虽然我不明白如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T17:29:33.667

添加 ORDER BY 子句：

```
ORDER by (type = "default") 
```

对于除默认值 1 之外的所有记录，这将为 0，因此它将放在最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-30T16:45:50.100

在 MySQL 语句中添加 WHERE 子句：

```
$query = 'SELECT  type, headline, startDate, text, media, caption, credits FROM #__timeline_entries'.$table.' WHERE type <> default'; 
```

# c++ - libnetfilter_queue 中没有 NF_REJECT 判断

> ID：12662996
> 
> 赞同：1
> 
> 时间：2012-09-30T16:40:10.633
> 
> 标签：c++, linux, network-programming, iptables, netfilter

libnetfilter_queue 似乎只支持两个判断： NF_ACCEPT 和 NF_DROP 。NF_REJECT 是否有任何解决方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T08:58:30.340

我认为你可以使用 NF_Drop。它应该提供您正在寻找的功能。

[http://netfilter.org/projects/libnetfilter_queue/doxygen/group__Queue.html](http://netfilter.org/projects/libnetfilter_queue/doxygen/group__Queue.html)

# c# - 如何在计时器的滴答声中更改标签的文本（GUI 正忙）

> ID：12662998
> 
> 赞同：0
> 
> 时间：2012-09-30T16:40:21.090
> 
> 标签：c#, .net-4.0, timer, backgroundworker, windows-applications

我有一个奇怪的情况。
请看`backgroundWorker5_RunWorkerCompleted`活动：

```
 private void backgroundWorker5_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        btnStartAdventures.Text = "Start Adventure";
        btnStartAdventures.Enabled = true;

        if (e.Error != null)
        {
            MessageBox.Show(e.Error.Message);
            return;
        }
        if (e.Cancelled)
        {
            lblStatusValueInAdventures.Text = "Cancelled...";
        }
        else
        {
            lblStatusValueInAdventures.Text = "Completed";
            timer1.Enabled = true;
            timer1.Start();
            // MessageBox.Show("start timer");
            Thread.Sleep((int.Parse(txtDelayInAdventures.Text)) * 60000);
            //MessageBox.Show("end timer");
            timer1.Enabled = false;
            timer1.Stop();
            lblTimer.Text = "0";
            btnStartAdventures.PerformClick();
        }
    } 
```

那个计时器是：

```
private void timer1_Tick(object sender, EventArgs e)
{
    this.Invoke(new MethodInvoker(delegate { lblTimer.Text = (int.Parse(lblTimer.Text) + 1).ToString(); }));
} 
```

但是这个定时器不能改变`lblTimer's Text`。
我该如何解决这个问题？

**编辑：**
Thread.Sleep 是必要的，我无法删除它。
我想要一个永无止境的循环，而这些代码就是为此而设计的。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T16:42:02.873

> ```
> Thread.Sleep 
> ```

有你的问题。

永远不要调用`Thread.Sleep`UI 线程；它会冻结用户界面。

摆脱它，它会正常工作。

您可以将其余的工作放在计时器回调中。

您还可以使用 C# 5 async 来简化此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-30T16:42:55.403

您必须刷新项目。

```
lblTimer.Refresh() 
```

你也可以刷新表格

```
frmName.Refresh(); 
```

并使线程休眠 0 毫秒，从而为其他进程提供空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-30T17:13:12.713

按照要求;

“永无止境的循环”是什么意思？UI 线程上的A `Thread.Sleep`（RunWorkerCompleted 事件在 UI 线程上执行）将有效地冻结 UI 线程，这意味着不会显示与 UI 线程的交互。

评论：

> 你想达到什么目的？据我所知，您正在后台线程 - backgroundWorker5 - （UI线程是响应式的）中做一些工作。当 backgroundWorker5 完成后，您想启动一个计时器并在 UI 仍然响应时在标签中显示一个计数器（也许有人要停止计时器？）。类似的东西？– 马里奥 3 分钟前 编辑
> 
> 是的，你是对的。我想要一个循环，它永远不会停止，直到用户单击取消按钮。– MoonLight 1 分钟前

所以，试试这样的事情：

```
int time = 0;

private void backgroundWorker5_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    btnStartAdventures.Text = "Start Adventure";
    btnStartAdventures.Enabled = true;

    if (e.Error != null)
    {
        MessageBox.Show(e.Error.Message);
        return;
    }
    if (e.Cancelled)
    {
        lblStatusValueInAdventures.Text = "Cancelled...";
    }
    else
    {
        lblStatusValueInAdventures.Text = "Completed";
        timer1.Interval = 1000; //<--- Tick each second, you can change this.
        timer1.Enabled = true;
        timer1.Start();
        // MessageBox.Show("start timer");
    }
}

private void timer1_Tick(object sender, EventArgs e)
{
    lblTimer.Text = (time + 1).ToString();
}

private void button_Cancel_Click(object sender, EventArgs e)
{
    //MessageBox.Show("end timer");
    timer1.Enabled = false;
    timer1.Stop();
    lblTimer.Text = "0";
    btnStartAdventures.PerformClick();
} 
```