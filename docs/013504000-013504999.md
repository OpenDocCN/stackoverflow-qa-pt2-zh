# StackOverflow 问答 13504000-13504999

# chm - 最初强制 CHM 帮助窗口移动到索引或搜索选项卡

> ID：13504013
> 
> 赞同：0
> 
> 时间：2012-11-22T00:00:58.513
> 
> 标签：chm

如何在 CHM 文件中添加该功能以在帮助窗口最初弹出时强制 HTML 帮助窗口移动到“索引”或“搜索”选项卡？

HtmlHelp API 具有指定“HH_DISPLAY_INDEX”或“HH_DISPLAY_SEARCH”命令的选项，因此 CHM 帮助窗口将专注于移动到指定的选项卡（索引或搜索选项卡）。

感谢帮助。

CK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T18:32:05.057

Afaik 窗口部分对此有选项，但这意味着您必须定义一个窗口。

看着

[http://chmspec.nongnu.org/latest/INI.html#HHP](http://chmspec.nongnu.org/latest/INI.html#HHP)

第 5.6.2.2.2 段。第 18 项

# android - Android - 带有配置活动的小部件，延迟一步更新

> ID：13504014
> 
> 赞同：0
> 
> 时间：2012-11-22T00:01:01.057
> 
> 标签：android, android-widget, sharedpreferences, onupdate

我有一个带有配置活动的应用程序小部件。当我在配置活动中单击“完成”时，小部件就会出现。如果这是我第一次使用小部件，它将是空白的，因为这不是第一次，它会使用我之前使用配置活动的数据进行更新。小部件从 SharedPrefences 获取其数据。小部件的先前实例不会使用新数据进行更新。LogCat 上没有错误。这是一些代码：AppWidgetProvider

```
public class DogTagWidgetProvider extends AppWidgetProvider {

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    for (int widgetId : appWidgetIds)
    {
        updateWidget(context, appWidgetManager, widgetId);
    }
}

public  void updateWidget(Context context, AppWidgetManager appWidgetManager, int appWidgetId){
    //Get RemoteViews and SharedPreferences
    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.dogtag_widget);
    SharedPreferences settings = context.getSharedPreferences(DogTagConfigure.PREFS_NAME, Context.MODE_MULTI_PROCESS);

    //Check Name
    String name = settings.getString("name", null);
    boolean nameB = settings.getBoolean("nameB", false);
    if(!nameB){
        views.setViewVisibility(R.id.llName, View.GONE);
    }else {
        views.setTextViewText(R.id.tvName, name);
    }
    //Check Address
    String address = settings.getString("address", null);
    boolean addressB = settings.getBoolean("addressB", false);
    if(!addressB){
        views.setViewVisibility(R.id.llAddress, View.GONE);
    }else {
        views.setTextViewText(R.id.tvAddress, address);
    }
    //Check Phone Number
    String phoneNumber = settings.getString("phoneNumber", null);
    Boolean phoneNumberB = settings.getBoolean("phoneNumberB", false);
    if(!phoneNumberB){
        views.setViewVisibility(R.id.llNumber, View.GONE);
    }else {
        views.setTextViewText(R.id.tvNumber, phoneNumber);
    }

    //TODO Show Owner Photo
    String photoUri = settings.getString("photoUri", null);
    if(!(photoUri==null)){
        Uri photoURI = Uri.parse(photoUri);
        views.setImageViewUri(R.id.ivPhoto, photoURI);
    }else{
        views.setViewVisibility(R.id.ivPhoto, View.GONE);
    }

    //TODO Cancel the remove and write code for this action
    views.setViewVisibility(R.id.llSend, View.GONE);
    /*
    Intent labelIntent = get_ACTION_APPWIDGET_UPDATE_Intent(context);
    PendingIntent labelPendingIntent = PendingIntent.getBroadcast(context,
            appWidgetId,
            labelIntent,
            PendingIntent.FLAG_UPDATE_CURRENT);
     */
    Log.d("updateAppWidget", "Updated ID: " + appWidgetId);

    //Update Widget
    appWidgetManager.updateAppWidget(appWidgetId, views);
} 
```

配置活动（部分）：

```
 //DONE pressed
public void done(){
    savePref();

    Intent firstUpdate = new Intent(context, DogTagWidgetProvider.class);
    firstUpdate.setAction("android.appwidget.action.APPWIDGET_UPDATE");
    firstUpdate.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds);
    context.sendBroadcast(firstUpdate);
    Log.d("Ok Button", "First onUpdate broadcast sent");

    Intent resultValue = new Intent();
    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetID);
    setResult(RESULT_OK, resultValue);
    finish();
}

//DISCARD pressed
public void discard(){
    Intent resultValue = new Intent();
    resultValue.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, widgetID);
    setResult(RESULT_CANCELED, resultValue);
    finish();

}

//Save new preferences
private void savePref() {
    name = etName.getText().toString();
    address = etAddress.getText().toString();
    phoneNumber = etNumber.getText().toString();

    SharedPreferences.Editor editor = settings.edit();
    editor.putString("name", name);
    editor.putBoolean("nameB", nameB);
    editor.putString("address", address);
    editor.putBoolean("addressB", addressB);
    editor.putString("phoneNumber", phoneNumber);
    editor.putBoolean("phoneNumberB", phoneNumberB);
    editor.putString("photoUri", photoUri);
    editor.putBoolean("ownerFound", ownerFound);
    editor.commit();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T09:14:25.807

SharedPreferences 是滞后的。您可以在 AppWidgetProvider 的 onUpdate 中获取该代码并在 ConfigurationActivity 中调用它（这将确保至少在第一次部署后立即显示该值）。

# c# - 将一行从 C# 翻译成 C？

> ID：13504016
> 
> 赞同：0
> 
> 时间：2012-11-22T00:01:04.847
> 
> 标签：c#, c

我以前从未使用过 C#，我试图将一个函数转换为 C，一切都很顺利，直到我到达这条奇怪的线。有人帮忙吗？

```
out Int128 remainder;

remainder._lo |= 1; ??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:04:23.317

假设在 C 中你有一个相同性质的 Int128 结构......在 C 中它将是

```
remainder._lo |= 1; 
```

这只是说用 1 进行按位或

一些 C 编译器提供您可以使用的 128 位整数，在这种情况下，您最终只会做`remainder |= 1;`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T00:04:39.110

这意味着

```
remainder._lo 
```

是某种类型的整数，|= 运算符是按位或。

所以这相当于

```
reminder._lo = reminder._lo | 1 
```

根据您的上下文，这可能是合法的 C，但这应该为您提供它的关键。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T00:08:13.127

它相当于

```
remainder._lo = remainder._lo | 1; 
```

哪里`|`是按位或运算符，但`|=`应该按原样在 C 中支持。

`Int128`大概是一个结构体，有`_hi`和`_lo`成员来存储 128 位整数的高 64 位和低 64 位。这条线只是按位或低 64 位为 1，有效地打开最低有效位。

# math - 过零次数 - 方程

> ID：13504019
> 
> 赞同：1
> 
> 时间：2012-11-22T00:01:51.180
> 
> 标签：math, signal-processing, equation, speech, wave

我编写了一个算法来计算信号中过零的数量。我的意思是一个值从 + 变为 - 的次数，反之亦然。

算法解释如下：

如果有以下元素：

```
v1 = {90, -4, -3, 1, 3} 
```

然后将该值乘以它旁边的值。(i * i+1)

然后取符号值 sign(val) 确定这是正数还是负数。例子：

```
e1 = {90 * -4} = -360 -> sigum(e1) = -1 
e2 = {-4 * -3} =  12  -> signum(e2) = 1
e3 = {-3 *  1} =  -3  -> signum(e3) = -1
e4 = {1 *   3} =  3   -> signum(e4) = 1 
```

因此，从负数变为正数的值的总数为 = 2 ..

现在我想把这个论坛的算法放到一个方程中，这样我就可以呈现它了。

我问了一个类似的问题，但真的很困惑，所以离开并考虑了一下并想出了（我认为方程式应该是什么样子）..这可能是错误的，好吧，可笑的错误。但这里是：

![在此处输入图像描述](../Images/aaae0912ff08ca16ac0e06f229c229a2.png)

现在它背后的逻辑：

我传入一个 V (val)

我通过计算 (Vi * Vi+1) 得到符号总和的绝对值。符号 (Vi * Vi+1) 应该产生 -1, 1, ..., 值

当且仅当值为 -1 时（因为我只对穿越零的次数感兴趣，因此，零值。

这看起来是否正确，如果不是，任何人都可以提出改进建议吗？

谢谢 ：）！

编辑：

![在此处输入图像描述](../Images/ddbb4f15f015267a3661db334b96ff9c.png)

现在这正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:17:40.010

您在这里做的是正确的事情，但您的方程式是错误的，因为您只想在相邻元素的乘积为负数时计算它的符号。不要对产品的符号求和，因为应该忽略正号产品。出于这个原因，一个明确的数学公式是棘手的，因为相邻元素之间的正积应该被忽略。你想要的是一个函数，它接受 2 个参数，当它们的乘积为负时计算为 1，当它们的乘积为非负时计算为 0

```
f(x,y) = 1 if xy < 0
       = 0 otherwise 
```

那么你的交叉点数由下式给出

```
sum(f(v1[i],v1[i+1])) for i = 0 to i = n-1 
```

其中`n`是向量/数组的长度`v1`（使用基于零索引的 C 样式数组访问表示法）。您还必须考虑边缘条件，例如 4 个连续点 {-1,0,0,1} - 您想将其视为简单的一个过零还是 2？只有您可以根据问题的具体情况来回答这个问题，但无论您的答案如何，都会相应地调整您的算法。

# php - 复选框 - 似乎无法检查它们

> ID：13504021
> 
> 赞同：1
> 
> 时间：2012-11-22T00:02:03.177
> 
> 标签：php, checkbox

我已经看到了一千种不同的复选框方法，但是我的眼睛已经厌倦了试图弄清楚为什么当值为真时我根本无法回显已检查的变量（它们是我从 db 中检索它们并打印出来的）：

```
<input type="checkbox" name="headlines" value="true" <?php if($headlines=="true"){ echo "checked=checked";} ?> /> Headlines<br /> 
```

标题已从数据库中提取，并基于该行设置了一个变量，我已经打印了它并且它是真的，所以它必须在上面的代码中。

我也试过：

`<input type="checkbox" name="headlines" <?php if($row['headlines'] === TRUE){ echo "checked=checked";} ?>/>Headlines<br />`

我哪里错了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:06:27.163

你需要引号中的第二个“检查”

```
<input checked="checked" /> 
```

您可以使用单人或双人，但您需要在回声中处理这一点。

```
<input type="checkbox" name="headlines" value="true" <?php if($headlines=="true"){ echo 'checked="checked"'; } ?> /> Headlines<br /> 
```

（请注意，这假设您正在编写 XHTML。如果您正在编写 HTML，那么您只需要 'checked' 而不是完整的 'checked="checked"'。您也可能会错过关闭 /`<br />`等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:07:57.023

```
if($headlines=="true") 
```

"true" 是一个字符串，您是否想检查它是否为真？

```
if($headlines==true) 
```

以下在 chrome 中对我有用：

```
<?php $headlines = true; ?>

<input type="checkbox" name="headlines" value="true" <?php if($headlines==true){ echo "checked=checked";} ?> /> Headlines<br /> 
```

正如 Robbie 所说，您还应该将选中的值括在引号中。

# c++ - 从 XCode 调试控制台打印 C 数组索引内容

> ID：13504025
> 
> 赞同：3
> 
> 时间：2012-11-22T00:02:25.360
> 
> 标签：c++, objective-c, c, audio, buffer

我正在寻找一种将 C 样式数组索引的内容打印到 XCode 4.5 中的控制台窗口的方法。换句话说，当我的音频缓冲区（一个 C 数组）填充了浮点数据时，我在填充后放置了一个断点，我只想打印我的数组 [] 中的内容值。我尝试了以下方法：

```
// Just an example of what I'm doing. The following is a buffer that I am declaring:
int total = 235377;
float tmpArr[total];

// gives me the first index [0] contents value only when I type this in the console window in Xcode
p tmpArr

// gives the following error:
// error: subscripted value is not an array, pointer, or vector
// error: 1 errors parsing expression
p tmpArr[3]

// gives me the address as expected
p &tmpArr

// the following seems to access contents but is casting them to ints and therefore truncating anything after the decimal...in audio programming, the float data is between 0 and 1 sooo....
frame variable -ffloat tmpArr
frame variable -ffloat tmpArr[3] 
```

我试图找到为什么我无法访问数组索引的内容的答案。我在这里错过了什么吗？每次我想调试时都必须将 printf() 放在 for 循环中吗？谢谢！

**更新**

正如@Daniel Fischer 指出的那样，在 XCode 控制台中键入 p *(tmpArr + indexNumber) 可以成功访问 tmpArr[indexNumber] 并将其打印到调试控制台。

# knockout.js - 如何添加到现有的 Knockout JS 映射对象？

> ID：13504031
> 
> 赞同：0
> 
> 时间：2012-11-22T00:02:46.997
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个来自 api 的 JSON 数据，如下所示：

```
var dataTotalInit = { dataTotal: [{ Cost: 0, Quantity: 0, Security: "" }] };
var mappingResult = ko.mapping.fromJS(dataTotalInit, {}, self); 
```

稍后当我从 buttonClick 获取数据时，我想将其添加到我的 JSON 中。

```
ko.utils.arrayForEach(self.AnotherObject(),function(item) {
     self.dataTotal.push({Cost:item.Cost(),Quantity:item.Quantity(),Security:item.Security()});
}); 
```

当我逐步执行我的代码时，它确实将值添加到 dataTotal 但数据不可观察，因此我的视图不会更新。请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:13:20.897

它应该是

```
var dataTotalInit = ko.observableArray(); 
```

无需预先填充数组，但您可以这样做：

```
var dataTotalInit = ko.observableArray([[{ Cost: 0, Quantity: 0, Security: "" }]); 
```

然后，就像您在示例中所做的那样，将项目推送到 observableArray 中：

```
ko.utils.arrayForEach(self.AnotherObject(),function(item) {
     self.dataTotal.push({Cost:item.Cost(),Quantity:item.Quantity(),Security:item.Security()});
}); 
```

更多信息： http:
[//knockoutjs.com/documentation/observableArrays.html](http://knockoutjs.com/documentation/observableArrays.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:39:59.170

您还需要使新对象的所有属性都可观察：

```
ko.utils.arrayForEach(self.AnotherObject(),function(item) {
    self.dataTotal.push(ko.mapping.fromJS({Cost:item.Cost(),Quantity:item.Quantity(),Security:item.Security()}));
}); 
```

# ruby-on-rails - 如何将我的布尔输出更改为 ruby 中的字符串值

> ID：13504034
> 
> 赞同：9
> 
> 时间：2012-11-22T00:03:06.250
> 
> 标签：ruby-on-rails, ruby

我有一个表单，我的用户在其中输入一个人来回复婚礼邀请。他们输入名称、菜单选项，然后选择：参加 - 是/否 - 然后我计算带有标签的真假金额，以便用户可以看到有多少人参加或不参加。

我的问题出在表本身。RSVP 专栏所在的位置，我现在只是得到“真”或“假”。无论如何，在 Ruby 中我可以将其更改为我的 index.html.erb 的字符串值吗？

**指数**

```
<% @replies.each do |reply| %>
  <tr>
    <td><%= reply.name %></td>
    <td><%= reply.menu %></td>
    <td><%= reply.rsvp %></td>
    <td><%= link_to 'Show', reply, class: "btn" %></td>
    <td><%= link_to 'Edit', edit_reply_path(reply), class: "btn" %></td>
    <td><%= link_to 'Delete', reply, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %></td>
    <td><%= reply.user.full_name %></td>
  </tr>
<% end %> 
```

**回复.rb**

```
class Reply < ActiveRecord::Base
  attr_accessible :menu, :name, :rsvp, :user_id
  belongs_to :user

  def self.find_attending
    Reply.where(:rsvp => "true").count
  end

  def self.find_not_attending
    Reply.where(:rsvp => "false").count
  end
end 
```

**_form.html.erb**

```
<%= f.input :user_id, collection: User.all, label_method: :full_name, :label => 'Added By' %>
<%= f.input :name, :label => 'Person(s) Name' %>
<%= f.input :menu, :label => 'Menu Choice' %>
<%= f.collection_radio_buttons :rsvp, [[true, 'Attending'] ,[false, 'Not Attending']], :first, :last %> 
```

**D b**

```
class CreateReplies < ActiveRecord::Migration
  def change
    create_table :replies do |t|
      t.string :name
      t.text :menu
      t.boolean :rsvp, :default => false

      t.timestamps
    end
  end
end 
```

我对 Ruby 很陌生，任何指针都将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-04-12T00:57:51.227

怎么样`"#{reply.rsvp}"`？看起来更干净，不是吗？

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-22T00:08:22.217

只需使用三元：

```
reply.rsvp ? "true" : "false" 
```

用您要显示的任何字符串替换“true”和“false”。

# c++ - C++ 弹道轨迹

> ID：13504037
> 
> 赞同：1
> 
> 时间：2012-11-22T00:03:31.100
> 
> 标签：c++, opengl, projectile

我正在使用 OpenGL 创建 3D 空间。我有一艘可以发射激光的宇宙飞船。

到目前为止，我已经拥有它，这样激光一旦发射就可以简单地深入 Z 轴。但是我正在尝试用十字准线制作一个适当的瞄准系统，以便您可以向任何方向瞄准和射击，但我未能成功尝试更新激光的路径。

我有一个基于激光末端和起始末端的方向矢量，它是从瞄准中获得的。

我应该如何正确更新激光的 X、Y、Z 值（或矢量）以使其看起来自然？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:37:42.700

我想我明白了。

假设您从瞄准方向作为 3D 矢量开始，称之为“aimDir”。然后在您的更新循环中将所有 3 个（x、y 和 z）添加到射弹“位置”。（好吧，在光速下你实际上看不到任何运动，但我想我明白你在这里要做什么）。

```
void OnUpdate( float deltaT )
{
    // "move" the laser in the aiming direction, scaled by the amount of time elapsed
    // since our last update (you probably want another scale factor here to control
    // how "fast" the laser appears to move)

    Vector3 deltaLaser = deltaT * aimDir;  // calc 3d offset for this frame
    laserEndpoint += deltaLaser;           // add it to the end of the laser
} 
```

然后在渲染例程中将激光从发射点绘制到新端点：

```
void OnRender()
{
    glBegin(GL_LINES);
    glVertex3f( gunPos.x, gunPos.Y, gunPos.z );
    glVertex3f( laserEndPoint.x, laserEndPoint.y, laserEndPoint.z );
    glEnd();
} 
```

我冒昧了，因为我不知道您使用的是 glut、sdl 还是什么。但我敢肯定你至少有一个更新功能和一个渲染功能。

警告，只是从枪到激光末端画一条线可能会在视觉上令人失望，但它将是添加更好效果（粒子系统、布隆过滤器等）的关键参考。一个快速的改进可能是使激光（线）的正面颜色明亮，背面为黑色。和/或像机关枪一样制作多条线。随意尝试;-)

此外，如果激光源直接在观察者面前，您只会看到一个点！所以你可能想稍微作弊，从观察者的正下方或右侧开火，然后稍微向上或向内开火。特别是如果你每侧都有一个（机翼？），看起来像传统机器一样会聚枪。

希望这会有所帮助。

# java - 如何使用向上转换或其他方法从子类中获取超类的实现？

> ID：13504039
> 
> 赞同：0
> 
> 时间：2012-11-22T00:03:47.760
> 
> 标签：java, downcast, upcasting

例如，我只是想知道如何使用子类来实现超类。

```
class Animal {
    void poo() {
        System.out.println("general poo");
    }
}

class Horse extends Animal{
    void poo() {
        System.out.println("horse poo");
    }
}

Animal animal1 = new Horse(); 
// using this I get the implementation of the Horse class's methods
animal1.poo(); //should return horse poo 
```

试图向上转换它以获得超类实现但无济于事

```
((Animal)animal1).poo() // still returns the horse class's implementation of the method 
```

如何使用 animal1 对象获取超类实现？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T00:11:36.560

在 Java 中，您不应覆盖超类方法，除非新方法旨在完全替代对该方法的所有外部调用。

在 sublcas 实现中，您可以使用例如 super.toString() 来引用直接超类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:13:16.303

除了这是不可能的，它没有意义，尝试重新设计你的班级。

# javascript - 尝试在问号后追加时表单出错

> ID：13504040
> 
> 赞同：2
> 
> 时间：2012-11-22T00:03:54.727
> 
> 标签：javascript, jquery, ajax

我正在尝试将访问者发送到[http://www.facebook.com/plugins/comments.php?href=http://google.com?c](http://www.facebook.com/plugins/comments.php?href=http://google.com?c)

给出错误

> 评论插件需要一个href参数。

这部分渲染正确： http: [//www.facebook.com/plugins/comments.php](http://www.facebook.com/plugins/comments.php)

但是问号后面的东西没有被包括在内

```
<script>
function go(){
    var uri = 'http://www.facebook.com/plugins/comments.php' 
        + encodeURI('?href=http://google.com?c');

    window.frames[0].document.body.innerHTML = 
        '<form target="_parent" method="get" action="' 
        + uri 
        + '"></form>';
    window.frames[0].document.forms[0].submit();
}    
</script>
<iframe onload="window.setTimeout('go()', 99)" src="about:blank" style="visibility:hidden"> </iframe>? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:12:00.657

改成：

```
var uri = 'http://www.facebook.com/plugins/comments.php?' 
    + encodeURIComponent('href=http://google.com?c'); 
```

如果您对第一个进行编码，`?`则它不再用于将 URL 与其参数分开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T04:35:57.050

只有查询的键和值应该被编码，而不是 ?,& 或 =，因为这些是构成查询的字符。

```
var uri = 'http://www.facebook.com/plugins/comments.php?href=' 
    + encodeURIComponent('http://google.com?c'); 
```

# android - AsyncTask 混淆

> ID：13504043
> 
> 赞同：2
> 
> 时间：2012-11-22T00:04:22.720
> 
> 标签：android, networking, android-asynctask

我一直在尝试编写一个允许用户从互联网上提取图像的 android。发布此应用程序后，有人告诉我，我需要 AsyncTask 以允许我使用网络命令。我一直在研究 Android 开发者网站 (developer.android.com/reference/android/os/AsyncTask.html) 上的 AsycTask 页面。这让我完全迷失了。我不知道我需要把这段代码放在哪里。这是我的原始代码，目前正在使用，直到发布。我怎样才能在这里实现 AsyncTask ？

代码：

```
public void firstbutton(View view) 
    {
        InputMethodManager inputMgr = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
        EditText editText = (EditText)findViewById(R.id.editText1);
        inputMgr.hideSoftInputFromWindow(editText.getWindowToken(), 0);

        EditText idnumber=(EditText)findViewById(R.id.editText1);
        String idnumber2= idnumber.getText().toString();
        int i = Integer.parseInt(editText.getText().toString());
        idnum=i;
        setContentView(R.layout.viewer);
        Context context = view.getContext();
        Drawable image = ImageOperations(context, "HIDDEN FOR PRIVACY"+idnumber2);
        ImageView icon = new ImageView(context);
        icon = (ImageView)findViewById(R.id.imageView1);
        icon.setImageDrawable(image);
};

public Drawable ImageOperations(Context ctx, String url) {
    try {
        InputStream is = (InputStream) this.fetch(url);
        Drawable d = Drawable.createFromStream(is, "src");
        return d;
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}

public Object fetch(String address) throws MalformedURLException,IOException
{
URL url = new URL(address);
Object content = url.getContent();
return content;
} 
```

特瓦丁顿的 LOGCAT

```
11-21 20:02:30.987: E/AndroidRuntime(343): java.lang.RuntimeException: An error occured while executing doInBackground()
11-21 20:02:30.987: E/AndroidRuntime(343):  at android.os.AsyncTask$3.done(AsyncTask.java:200)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.lang.Thread.run(Thread.java:1096)
11-21 20:02:30.987: E/AndroidRuntime(343): Caused by: java.lang.ClassCastException: [Ljava.lang.Object;
11-21 20:02:30.987: E/AndroidRuntime(343):  at com.phil.avatarview.AvatarViewActivity$FetchImageAsyncTask.doInBackground(AvatarViewActivity.java:1)
11-21 20:02:30.987: E/AndroidRuntime(343):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
11-21 20:02:30.987: E/AndroidRuntime(343):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
11-21 20:02:30.987: E/AndroidRuntime(343):  ... 4 more
11-21 20:02:31.330: I/Process(61): Sending signal. PID: 343 SIG: 3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:13:35.623

像这样的东西，但我仍然建议（我为每个人都这样做）只看并使用[加载](http://developer.android.com/guide/components/loaders.html)器。例如[AsyncTaskLoader](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)

```
new AsyncTask<String, Void, Drawable>() {

    @Override
    protected Drawable doInBackground(String... params) {
        return ImageOperations(getApplicationContext(), params[0]);
    }

    @Override
    protected void onPostExecute(Drawable result) {
        super.onPostExecute(result);
        ImageView icon = new ImageView(context);
        icon = (ImageView) findViewById(R.id.imageView1);
        icon.setImageDrawable(image);
    }
}.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, "HIDDEN FOR PRIVACY" + idnumber2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:18:35.453

这样的事情应该让你开始：

```
/** A custom AsyncTask for downloading images in the background. */
private static class FetchImageAsyncTask extends AsyncTask<Void, Void, Drawable> {
    private final String mUrl;
    private final ImageView mImageView;

    public FetchImageAsyncTask(ImageView view, String url) {
        mUrl = url;
        mImageView = view;
    }

    @Override
    protected Drawable doInBackground(Void... params) {
        // This aptly named method will run on a background Thread. This
        // means your user interface will not be interrupted while the
        // image is downloaded.

        try {
            URL url = new URL(mUrl);

            // Instead of URL#getContent() you might consider using the
            // DefaultHttpClient class.
            return Drawable.createFromStream(
                    (InputStream) url.getContent(), "src");
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onPostExecute(Drawable result) {
        // The result of doInBackground will be passed to this method, which
        // is run on the UI Thread. This is important because you cannot
        // update an ImageView with a new image from a background Thread.
        if (result != null) {
            mImageView.setImageDrawable(result);
        }
    }
}

public void firstbutton(View view) {
    InputMethodManager inputMgr = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
    EditText editText = (EditText)findViewById(R.id.editText1);
    inputMgr.hideSoftInputFromWindow(editText.getWindowToken(), 0);

    EditText idnumber=(EditText)findViewById(R.id.editText1);
    String idnumber2= idnumber.getText().toString();
    int i = Integer.parseInt(editText.getText().toString());
    idnum=i;
    setContentView(R.layout.viewer);
    Context context = view.getContext();

    // Get your image view
    ImageView iconView = (ImageView) findViewById(R.id.imageView1);

    // Create a new background task
    FetchImageAsyncTask task = new FetchImageAsyncTask(iconView, "YOUR_URL_HERE");

    // Start the background task
    task.execute();
} 
```

# jquery - jquerymobile listview 以编程方式过滤

> ID：13504054
> 
> 赞同：1
> 
> 时间：2012-11-22T00:05:29.023
> 
> 标签：jquery, jquery-mobile

我正在努力完成这项任务。

我有两列网格

```
<div class="ui-grid-a">
    <div class="ui-block-a" style="width:35%">
        <div data-role="controlgroup" data-type="horizontal">
            <a href="#" data-role="button">A</a>
            <a href="#" data-role="button">B</a>
            <a href="#" data-role="button">C</a>
            <a href="#" data-role="button">D</a>
            <a href="#" data-role="button">E</a>
            <a href="#" data-role="button">F</a>
        </div>        
        <div data-role="controlgroup" data-type="horizontal">
            <a href="#" data-role="button">G</a>
            <a href="#" data-role="button">H</a>
            <a href="#" data-role="button">I</a>
            <a href="#" data-role="button">J</a>
            <a href="#" data-role="button">K</a>
            <a href="#" data-role="button">L</a>
        </div> 
        <div data-role="controlgroup" data-type="horizontal">
            <a href="#" data-role="button">M</a>
            <a href="#" data-role="button">N</a>
            <a href="#" data-role="button">Ñ</a>
            <a href="#" data-role="button">O</a>
            <a href="#" data-role="button">P</a>
            <a href="#" data-role="button">Q</a>
        </div> 
        <div data-role="controlgroup" data-type="horizontal">
            <a href="#" data-role="button">R</a>
            <a href="#" data-role="button">S</a>
            <a href="#" data-role="button">T</a>
            <a href="#" data-role="button">U</a>
            <a href="#" data-role="button">V</a>
            <a href="#" data-role="button">W</a>
        </div>         
        <div data-role="controlgroup" data-type="horizontal">
            <a href="#" data-role="button">X</a>
            <a href="#" data-role="button">Y</a>
            <a href="#" data-role="button">Z</a>
            <a href="#" data-role="button" onclick="buscar();">BUSCAR</a>
        </div>         
    </div>       
    <div class="ui-block-b" style="width:65%; top:0; position:relative;">
        <ul id ="milista" data-role="listview" data-filter="true" style="left:1em; width:95%; ">
            <li><a href="index.html">Acura</a></li>
            <li><a href="index.html">Audi</a></li>
            <li><a href="index.html">BMW</a></li>
            <li><a href="index.html">Cadillac</a></li>
            <li><a href="index.html">Chrysler</a></li>
            <li><a href="index.html">Dodge</a></li>
            <li><a href="index.html">Ferrari</a></li>
            <li><a href="index.html">Ford</a></li>
            <li><a href="index.html">GMC</a></li>
            <li><a href="index.html">Honda</a></li>
            <li><a href="index.html">Hyundai</a></li>
            <li><a href="index.html">Infiniti</a></li>
            <li><a href="index.html">Jeep</a></li>
            <li><a href="index.html">Kia</a></li>
            <li><a href="index.html">Lexus</a></li>
            <li><a href="index.html">Mini</a></li>
            <li><a href="index.html">Nissan</a></li>
            <li><a href="index.html">Porsche</a></li>
            <li><a href="index.html">Subaru</a></li>
            <li><a href="index.html">Toyota</a></li>
            <li><a href="index.html">Volkswagon</a></li>
            <li><a href="index.html">Volvo</a></li>
        </ul>        
    </div>
</div> 
```

就像在[http://jsfiddle.net/jupagose/sugfP/](http://jsfiddle.net/jupagose/sugfP/)上的节目一样，我想在用户类型位于左侧面板上时以编程方式过滤列表视图。我不想强迫用户加载操作系统键盘。

用jquery可以吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:18:37.503

你去：

```
 $("[data-role=button]").click(function(e){
        var filter_el = $(".ui-input-text");
        var filter_val = filter_el.val();
        var filter_query = filter_val+$(this).text();
        filter_el.val(filter_query);
        filter_el.trigger("change")
    }); 
```

理想情况下，我会为每个按钮添加一个类并将该类用于按钮单击事件，例如`$(".keyboard-btn").click ...`过滤器也是如此。

这是一个小提琴： http: [//jsfiddle.net/sugfP/14/](http://jsfiddle.net/sugfP/14/) ​</p>

**更新：**

这是使用键盘类的示例：http: [//jsfiddle.net/sugfP/15/](http://jsfiddle.net/sugfP/15/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T10:41:10.813

理查德的回答很完美，但是 JQM 1.4 有更新。

[jquerymobile 重新过滤](https://stackoverflow.com/questions/9213992/jquerymobile-refiltering)。

仅触发“更改”事件不会过滤列表。您将不得不单独调用“可过滤”小部件及其“刷新”方法

```
$(".listselector").filterable("refresh"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-28T09:20:28.813

如果您有多个输入，请使用

```
ui-input-text 
```

将选择所有这些。使用它来只选择过滤器

```
var filter_el = $("[data-type='search']"); 
```

# javascript - Magento 等级价格 - 等级价格的等级声明在 BUY x for Y - javascript

> ID：13504056
> 
> 赞同：6
> 
> 时间：2012-11-22T00:06:02.503
> 
> 标签：javascript, magento

There is an outstanding bug in 1.6+ versions of Magento where the % savings for tier prices defaults to 100% when an option is selected. 其他贡献者建议从第 747 行更改 product.js

```
for (var i = 0; i < this.tierPrices.length; i++) { 
```

成为

```
for (var i = 0; i > this.tierPrices.length; i++) { 
```

这解决了节省百分比的问题，但该代码块永远不会执行。I am by no means a Javascript expert but this block appears to be updating the tier price and % savings when options are selected. 我想找到问题的根源，而不是“评论它”。

从我在 Firebug 中的调试中，我注意到 product.js 中的等级价格类是错误的，因此检索到的等级价格为 0，这解释了为什么 % 节省总是 100%。Firebug 显示价格为

```
class="tier-prices product-pricing">   
        Buy 10 for  
        <span class="price">$40.00</span> 
```

而 product.js 正在尝试使用

```
$$('.price.tier-' + i).each(function (el) { 
```

如果您将以上内容更改为

```
$$('.tier-prices .price).each(function (el) { 
```

检索等级价格，但对于产品的多个等级价格，无法单独引用它们。上面的“价格”类没有声明唯一标识符或迭代数。

等级价格的 class="price" 声明在哪里？在 tierprices.phtml 的代码中，它看起来像这样

```
<?php echo $this->__('Buy %1$s for %2$s each', $_price['price_qty'], $_price['formated_price'])?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T18:58:35.693

我刚刚在这上面花了一些时间，因为在我将客户的 Magento 站点升级到 1.7.0.2 之后，它真的开始困扰我。

这有两个部分，我将说明位置和修复，但这些不会是升级证明（因为你会想要创建文件的副本并将它们放在你的主题特定文件夹中，尽管我'我不确定是否可以使用有问题的 JS 文件）。

**1) 查看修复**

在文件中`/design/frontend/base/default/template/catalog/product/view/tierprices.phtml`

你需要换行`32-34`

```
$_product = $this->getProduct();
$_tierPrices = $this->getTierPrices();
$_finalPriceInclTax = $this->helper('tax')->getPrice($_product, $_product->getFinalPrice(), true); 
```

使用以下代码：

```
$_product = $this->getProduct();
$_tierPrices = array();

foreach($this->getTierPrices() as $index => $info) {
    $_tierPrices[$index] = $info;
    $_tierPrices[$index]['formated_price'] = str_replace('class="price"', 'class="price tier-'.$index.'"', $info['formated_price']);
    $_tierPrices[$index]['formated_price_incl_tax'] = str_replace('class="price"', 'class="price tier-'.$index.' tier-'.$index.'-incl-tax"', $info['formated_price_incl_tax']);
}
$_finalPriceInclTax = $this->helper('tax')->getPrice($_product, $_product->getFinalPrice(), true); 
```

这解决了您已经发现的类未正确呈现的问题。[这是我找到这段代码的地方](http://www.integer-net.de/magento-bug-individuelle-optionen-und-staffelpreise-100-prozent-ersparnis/)——尽管它没有解决所有问题，因此 JS 发生了变化。

**2）JS修复**

在`js/Varien/product.js`您需要替换行的文件中`757-769`：

```
$$('.benefit').each(function (el) {
    var parsePrice = function (html) {
        return parseFloat(/\d+\.?\d*/.exec(html));
    };
    var container = $(this.containers[3]) ? this.containers[3] : this.containers[0];
    var price = parsePrice($(container).innerHTML);
    var tierPrice = $$('.price.tier-' + i);
    tierPrice = tierPrice.length ? parseInt(tierPrice[0].innerHTML, 10) : 0;
    var $percent = Selector.findChildElements(el, ['.percent.tier-' + i]);
    $percent.each(function (el) {
        el.innerHTML = Math.ceil(100 - ((100 / price) * tierPrice));
    });
}, this); 
```

有了这个：

```
//
// Code fixed to prevent the redundant inner loop and to use actual tiered pricing in calculation
// It also takes the optional price variants into consideration (eg: +£2 for a blue tshirt)
// Note: I've made this comment deliberately large, to keep the line numbers in sync
//
var parsePrice = function (html) {
    return parseFloat(/\d+\.?\d*/.exec(html));
};
var container = $(this.containers[3]) ? this.containers[3] : this.containers[0];
var price = parsePrice($(container).innerHTML);
$$('.percent.tier-' + i).each(function (el) {
    el.innerHTML = Math.ceil(100 - ((100 / price) * (this.tierPrices[i] + parseFloat(optionPrices))));
}, this); 
```

我希望这至少可以为一个人节省几个小时的生命。

吨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T20:05:27.897

该部分是价格格式化时或在更深的模型层中`class="price"`的结果`Mage_Directory_Model_Currency::formatPrecision()`和执行`$this->formatPrice()``Mage::helper('core')->formatPrice();`

您可以通过扩展（和重写）来添加唯一标识符，`Mage_Directory_Model_Currency`但请注意它`formatPrecision`无处不在。因此，您可以编写自己的帮助程序/模型逻辑来格式化层级价格。

# android - 暂停的活动在方向更改时闪烁黑色

> ID：13504058
> 
> 赞同：2
> 
> 时间：2012-11-22T00:06:18.020
> 
> 标签：android

在我的应用程序中，我使图像可点击，一旦点击它们，就会启动另一个对话类型的活动，其中包含更大版本的图像。问题是每当方向改变时，背面的 Paused 活动都会闪烁黑色。似乎它没有为其方向更改设置动画。只有暂停的活动呈黑色闪烁。

这是正在运行的 Activity 的代码。

```
public class ImageDialog extends Activity {

    private ImageView mDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.image_dialog);
        mDialog = (ImageView)findViewById(R.id.imageView2);
        boolean tabletSize = getResources().getBoolean(R.bool.isTablet);
        if (tabletSize) {
            // do something
        } else {
            int orientationMode = getResources().getConfiguration().orientation;
            if (orientationMode == 1) {
               changeViewPlease();
            }
        }

    }
    public void onScreenClickClose(View view) {
        finish();
    }
    public void changeViewPlease() {
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    }
} 
```

以及正在使用的样式：

```
 <style name="myDialogTheme" parent="@android:style/Theme.Dialog">
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowFrame">@null</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">true</item>
    <item name="android:backgroundDimAmount">.8</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowFullscreen">true</item>
   </style> 
```

布局 xml 表：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/image_dialog_root"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:onClick="onScreenClickClose" >

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_gravity="center"
        android:src="@drawable/image1largerotated" />

</FrameLayout> 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:43:46.083

> 问题是每当方向改变时，后面的 Paused 活动都会闪烁黑色

这可能是因为您的后台活动在方向更改时被破坏并重新创建。这是活动的默认行为。

`android:configChanges="orientation"`您可以通过在后台活动标签的 AndroidManifest 中处理来避免重新创建后台活动来尝试此操作。

你也可以试试这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:16:10.230

这是一个半途而废的解决方案，它仍然没有考虑 onCreate() 之后的方向变化。

将此添加到暂停的活动中：

```
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
int orientationMode = getResources().getConfiguration().orientation;
if (orientationMode == 1) {
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} else {
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
}
}

@Override
protected void onResume() {

    super.onResume();
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
} 
```

和 android:screenOrientation="landscape" 到 Manifest ：

```
<activity android:name=".ImageDialog" android:theme="@style/myDialogTheme" 
   android:screenOrientation="landscape"> 
```

我不太明白为什么会这样！

# jquery - 使用带有 JQuery 可拖动的内联块时如何阻止列表项跳转？

> ID：13504059
> 
> 赞同：4
> 
> 时间：2012-11-22T00:06:23.500
> 
> 标签：jquery, draggable, jquery-ui-sortable, css

刚刚发现了 JQuery 的“可拖动”API 的乐趣，但我想使用 inline-block 显示我的列表。当你拖动它们时，这会使列表项跳转，有谁知道如何解决这个问题？

我正在使用的代码是：

```
 $(function() {
        $( "#sortable1, #sortable2" ).sortable({
            connectWith: ".connectedSortable"
        }).disableSelection();
    });​ 
```

[http://jsfiddle.net/VVaqu/](http://jsfiddle.net/VVaqu/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-08-04T18:49:50.597

如果您不能使用浮动，另一种解决方案：

```
#sortable1 li, #sortable2 li{
    display: inline-block;
    vertical-align: top;
} 
```

垂直对齐：顶部很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T00:19:06.250

## *[小提琴演示](http://jsfiddle.net/VVaqu/6/)*

只需将 : 添加`float:left;`到您的`li`元素中

```
#sortable1 li, #sortable2 li {
 float:left;
 /*other styles...*/
} 
```

# android - 以编程方式将子视图添加到 Android 中的自定义视图

> ID：13504064
> 
> 赞同：2
> 
> 时间：2012-11-22T00:07:15.717
> 
> 标签：android, layout, webview, imagebutton, custom-view

我要做的只是在右上角添加一个 imageButton 视图作为自定义视图的子视图。我的自定义视图扩展了 Webview。我将 imageButton 添加到我的自定义视图中没有问题，我只是无法将它移动到右上角。我需要以编程方式执行此操作，而不是在 xml 中。我永远不会想到这么简单的事情会需要我在这里发帖，但我真的想不通。

这是我目前用来将 imageButton 添加到自定义视图的方法，但它位于左上角：

```
 public class customView extends WebView {

      private void imageButtonInit() {
         ImageButton closeImageButton = new ImageButton(getContext());
         Drawable image = getResources().getDrawable(com.package.image);
         closeImageButton.setBackgroundDrawable(image);
         closeImageButton.setLayoutParams(new RelativeLayout.LayoutParams(25, 25));
         closeImageButton.bringToFront();
         customView.this.addView(closeImageButton);
      }
    } 
```

我为将其移动到右上角所做的尝试：

```
 RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(25, 25);
    lp.addRule(RelativeLayout.ALIGN_PARENT_RIGHT, -1);
    closeImageButton.setLayoutParams(lp);
    customView.this.addView(closeImageButton); 
```

也：

```
 FrameLayout.LayoutParams lp = new FrameLayout.LayoutParams(25, 25, Gravity.RIGHT|Gravity.TOP);
    closeImageButton.setLayoutParams(lp);
    customView.this.addView(closeImageButton); 
```

所有这些都导致 imageButton 被放置在左上角。这是我在这个网站上的第一篇文章，所以我希望问题的格式正确。请不要使用 xml 解决方案。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:38:53.790

我认为您在其他两种方法中所做的实际上是将您的*CustomView*设置为具有这些布局参数。您应该尝试使用此方法设置孩子的布局参数；

```
 customView.this.addView(child, params); 
```

其中 child 是您的图像按钮，params 是布局参数。

# php - AWS PHP SDK 版本 2 S3 putObject 错误

> ID：13504065
> 
> 赞同：1
> 
> 时间：2012-11-22T00:07:22.310
> 
> 标签：php, sdk, amazon-s3, amazon-web-services

所以最近推出了 AWS php sdk 2.x 库，我花了一天时间从 1.5x 升级。我的第一个是升级我的 S3 备份类。我很快遇到了一个错误：

```
Fatal error: Class 'EntityBody' not found in /usr/share/php/....my file here 
```

尝试将压缩文件上传到 S3 存储桶时。我写了一个类来抽象一点写作以允许多区域备份，所以下面引用 $this 的代码就是这样。

```
$response1 = $s3->create_object(
        $this->bucket_standard,
        $this->filename,
        array(
         'fileUpload'  => $this->filename,
         'encryption' => 'AES256',
         //'acl'         => AmazonS3::ACL_PRIVATE,
         'contentType' => 'text/plain',
         'storage'     => AmazonS3::STORAGE_REDUCED,
         'headers'     => array( // raw headers
                              'Cache-Control'    => 'max-age',
                              //'Content-Encoding' => 'gzip',
                              'Content-Language' => 'en-US'
                              //'Expires'       => 'Thu, 01 Nov 2012 16:00:00 GMT'
                            ),
          'meta'     => array(
                              'param1' => $this->backupDateTime->format('Y-m-d H:i:s'),     // put some info on the file in meta tags
                              'param2' => $this->hostOrigin
                            ) 
            )
      ); 
```

以上在 1.5.x 上运行良好。

现在，在 2.x 中，我正在查看他们的文档，他们几乎改变了一切（伟大的......最大的讽刺）

```
$s3opts=array('key'=> $this->accessKey, 'secret' => $this->secretKey,'region' => 'us-east-1');
$s3 = Aws\S3\S3Client::factory($s3opts); 
```

所以现在我有了一个新的 S3 对象。这是我的 2.x 语法来做同样的事情。我的问题出现在他们（险恶地）将旧的“文件上传”更改为“正文”并使其在如何实际附加文件方面更加抽象！我已经尝试了这两种方法，我认为它与依赖项（Guzzle 或 Smyfony 等）有关，但每当我尝试执行此操作时，我都会收到上面的错误（或者如果你愿意，可以替换 Stream）。

我已经尝试将 Composer 与 composer.json 和 aws.phar 一起使用，但在我开始之前，我是否缺少一些愚蠢的东西？

```
$response1 = $s3->putObject(array(
        'Bucket' => $this->bucket_standard,
        'Key'    => $this->filename,
        'ServerSideEncryption' => 'AES256',
        'StorageClass' => 'REDUCED_REDUNDANCY',
        'Body' => EntityBody::factory(fopen($this->filename, 'r')),
        //'Body' => new Stream(fopen($fullPath, 'r')),

        'MetaData' => array(
                              'BackupTime' => $this->backupDateTime->format('Y-m-d H:i:s'),     // put some info on the file in meta tags
                              'HostOrigin' => $this->hostOrigin
                            ) 
      )); 
```

一如既往地感谢，

R

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T01:28:20.270

您是否将 EntityBody 导入您的命名空间？

```
use Guzzle\Http\EntityBody; 
```

否则，你必须这样做

```
'Body' => \Guzzle\Http\EntityBody::factory(fopen($this->filename, 'r')), 
```

# authentication - Cloudbees 身份管理

> ID：13504066
> 
> 赞同：1
> 
> 时间：2012-11-22T00:07:34.240
> 
> 标签：authentication, cloudbees, identity-management

是否有身份管理机制可用于控制/管理用户对运行在 cloudbees RUN@cloud 平台上的服务的访问，即强制登录/注册等？

谢谢，/W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:42:39.677

In my opinion you should consider Identity access management solutions from [TeleSign](http://www.telesign.com/products-demos/). You should be able to control user access to services running on Cloudbees Run@cloud platform with ease.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:36:25.383

据我所知，CloudBees 平台没有特别支持对您的应用程序的用户进行身份验证：这只是您可以根据语言和 Web 框架使用众多可用库中的任何一个在您的应用程序中实现的东西，使用的身份验证系统您的选择，例如 OpenID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T08:22:31.100

您添加到 cloudbees 域（“帐户”）的用户可以访问所有服务。对于 FOSS 帐户，无需身份验证即可只读访问资源，但在所有其他情况下都需要登录平台。只有管​​理员可以订阅新服务。DEV@Cloud 上的 Jenkins 添加了 RBAC 插件，因此您可以控制对作业和文件夹的细粒度访问。

# c# - Windows 桌面大小更改事件？

> ID：13504067
> 
> 赞同：2
> 
> 时间：2012-11-22T00:07:36.087
> 
> 标签：c#, winforms, events, desktop

> **可能的重复：**
> [检测分辨率的变化c#WinForms](https://stackoverflow.com/questions/442337/detect-change-of-resolution-c-sharp-winforms)

我有一个应用程序写在`C#`我的窗口停靠在屏幕边缘的地方。

我需要知道在哪里可以找到`event`if ，`resolution has changed`这样我就可以调用 Dock 方法来重新绘制我的窗口。

在表单对象上我只能看到`SystemColorsChanged`事件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T00:11:25.060

您正在寻找[`SystemEvents.DisplaySettingsChanged`活动](http://msdn.microsoft.com/en-us/library/microsoft.win32.systemevents.displaysettingschanged.aspx)。

# html - 是否有可靠且最新的资源列表浏览器/浏览器版本错误可用？

> ID：13504073
> 
> 赞同：9
> 
> 时间：2012-11-22T00:08:40.013
> 
> 标签：html, css, browser, browser-bugs

我很惊讶无法找到记录浏览器 CSS、HTML 和 Javascript 错误的可靠资源。显然有一些像[http://caniuse.com/](http://caniuse.com/)和[http://www.quirksmode.org/](http://www.quirksmode.org/)这样的网站从另一个方向着手，记录功能实现，有时会注意到错误和部分实现的功能，但是有一个网站可以列出每个浏览器/浏览器版本的已知错误和解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T19:01:15.850

我找到 [http://caniuse.com/](http://caniuse.com/)

对于了解哪些浏览器支持哪些功能非常有用。希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:52:03.607

What I found pretty interesting are the different doctypes. Not only that you can trigger QuirksMode (an IE 5.5-like rendering in InternetExplorer - don't know how other browsers handle that) but also that you can have an Almost-Standard-Mode. [http://hsivonen.iki.fi/doctype/#Sending%20XHTML%20as%20text/html%20Considered%20Harmful](http://hsivonen.iki.fi/doctype/#Sending%20XHTML%20as%20text/html%20Considered%20Harmful)

Here's a list of bugs in IE8: [http://jhop.me/ie8-bugs](http://jhop.me/ie8-bugs)

All the other stuff I found is most likely gone. IE6 is nearly dead ([http://www.ie6countdown.com/#chart](http://www.ie6countdown.com/#chart)), IE7 is also used by just a minority ([http://theie7countdown.com/](http://theie7countdown.com/)) ... now it's just depending on what you want to support. If you still want/have to support IE7 or IE6, I'd look at the links posted by Pedr. That's where I found all the css-bugs, excepted by one - the IE6 PNG bug. But Safari also has his problems with the PNG transparency and the gamma channel :)

PNG Problem (IE6, IE7 and Safari): [http://morris-photographics.com/photoshop/articles/png-gamma.html](http://morris-photographics.com/photoshop/articles/png-gamma.html)

That's all coming to my mind. I mostly skip the PNG problem by minifying the png and gif files before uploading them into a live-system by using [http://imageoptim.com/](http://imageoptim.com/).

I don't know if anyone listed the JS-Bugs ... I just know of missing functions and that's where you could use a framework like jQuery or something not that blown-up :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T11:31:49.867

只是为了让事情更容易找到，这里是迄今为止在评论中建议的资源：

> [http://www.positioniseverything.net/explorer.html](http://www.positioniseverything.net/explorer.html)

– IE 5+ 错误，但自 2009 年以来未更新

> [http://www.paulirish.com/2009/browser-specific-css-hacks](http://www.paulirish.com/2009/browser-specific-css-hacks)

– Paul Irish 的常见浏览器黑客列表，自 2009 年以来再次未更新。

# android - 在 Android 的 OpenGL ES 中，将对象转换到地图上的最佳方式是什么？

> ID：13504074
> 
> 赞同：2
> 
> 时间：2012-11-22T00:09:01.737
> 
> 标签：android, opengl-es

我已经开始使用android，所以我正在开发一个小游戏（主要用于学习目的）。我的游戏有一个简单的 2d 非滚动地图，并且我有许多将放置在地图中的对象。对象已经在它们的类中进行了静态建模，我了解如何将它们转换为浮点缓冲区并将它们发送到着色器。

我了解模型、视图和项目矩阵的要点，但我听说在着色器中进行翻译或为每个对象传递特定模型矩阵效率低下。

我如何以最佳方式获取建模对象，并将它们放置在地图上的适当位置（世界坐标）？该转换应该发生在哪里（在着色器之前或期间？作为模型矩阵的一部分？）

（如有必要，伪代码足以回答。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:28:44.543

这一切都归结为（模型的）多少顶点与单个平移（变换的变化）的比率。作为一般规则，为了渲染大部分几何图形，如果您想最大化管道，则应该为给定的制服发送至少 100 个顶点。请注意，如果您的顶点总数相对较少，大约低于 10000，您可能不会注意到现代系统上的任何性能损失。

所以，如果你的对象是不平凡的，即有大量的顶点，改变制服是要走的路。如果您的对象很简单，则将它们放入共享顶点数组中，并在一个统一的变换数组中添加一个额外的顶点属性索引将更好地利用管道。

这实际上取决于您的对象有多复杂。

# google-dfp - 在 DFP 标准版中使用 1 个广告素材和 2 个广告单元时会发生什么？

> ID：13504086
> 
> 赞同：2
> 
> 时间：2012-11-22T00:10:24.860
> 
> 标签：google-dfp

我正在寻找有关我们作为 DFP 标准版客户最近遇到的一个问题的说明。

我们有一个包含 2 个广告单元和 1 个广告的订单项。我们试图在同一页面上呈现两个单元。通过以下设置，第一个单元将显示广告素材，而第二个单元将不显示任何内容。通过复制广告素材（现在是 2 个广告素材和 2 个广告位），现在两个单元都已填充。

我只是在寻找有关 DFP 的任何见解或他们网站上的文档链接以获取更多知识。我们一直确信单个广告素材会同时用于两个广告位，但显然情况并非如此。

**设置**
-*类型*：赞助

**调整投放**
-*展示广告素材*：一个或多个
-*轮播广告素材*：优化
-*目标*：100% 的展示次数
-*日期和时间*：所有日期和时间
-*频率*：未选中“为每个用户设置频率上限”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:14:23.517

[如本页](http://support.google.com/dfp_sb/bin/answer.py?hl=en&answer=82245)所强调的那样，DFP 将在每个页面上显示一个广告不超过一次……因此，像您一样复制广告是解决问题的正确方法。

# java - 删除添加到 System.out 的最后一个字符

> ID：13504090
> 
> 赞同：0
> 
> 时间：2012-11-22T00:11:05.510
> 
> 标签：java, printing, console, command-line-interface, system.out

我正在用 java 编写一个简单的客户端-服务器协议，现在正在处理服务器 CLI。我想要做的是`>`在用户输入行的开头有一个。我`>`在控制台中打印字符的功能是 consoleWriteln：

```
public static void consoleWriteln(String message) {
    System.out.println(message);
    System.out.print(">");
} 
```

使用此功能，服务器启动，但字符显示在每一行的开头。

```
Server running, listening on port 25565
>Tim has connected
>Boom
Server: Boom
>That's nice
Server: That's nice
>Tim: I agree!
> 
```

当从客户端传入任何内容或从服务器 CLI 广播某些内容时，将调用上述函数。

我怎样才能只在用户输入行上使用它？IE：

```
Server running, listening on port 25565
Tim has connected
>Boom
Server: Boom
>That's nice
Server: That's nice
Tim: I agree!
> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:18:57.340

您可以捕获 System.out，添加一个侦听任何输出的线程，处理您的任务，然后执行 setOut(PrintStream out)

然后你让服务器直接输出到你在 setOut 中使用的 PrintStream

这是我的一个项目中的一些代码：在服务器中，您将执行 serverOut.println()...

```
 if(OUTPUT_IN_OVERLAY_CONSOLE || OUTPUT_IN_FILE || !OUTPUT_IN_CONSOLE) {
        try {
            JFrame console = new JFrame("Console");
            console.setSize(720,320);
            final JTextArea tarea = new JTextArea();
            JScrollPane scroll = new JScrollPane(tarea);
            console.add(scroll);                

            final OutputStream consoleOut = System.out;
            final OutputStream fileOut  = new FileOutputStream("output.txt");
            final OutputStream o = new OutputStream() {
                StringBuilder sb = new StringBuilder();
                @Override
                public void write(int b) throws IOException {
                    sb.append((char)b);
                    tarea.setText(sb.toString());
                    tarea.setCaretPosition(sb.length());
                    //tarea.requestFocus();
                }
            };

            OutputStream overrideOut = new OutputStream() {

                @Override
                public void write(int b) throws IOException {
                    if(OUTPUT_IN_CONSOLE) consoleOut.write(b);
                    if(OUTPUT_IN_OVERLAY_CONSOLE) o.write(b);
                    if(OUTPUT_IN_FILE)  fileOut.write(b);
                }
            };
            System.setOut(new PrintStream(overrideOut));

            if(OUTPUT_IN_OVERLAY_CONSOLE) {
                console.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
                console.setVisible(true);
            } 
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        }
    } 
```

不要这样做`System.setOut(new PrintStream(overrideOut));`，而是创建一个扩展 PrintStream 的类并覆盖 println(String str) 方法以始终在开头添加一个“>”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:49:06.607

根据`console`您使用的方式，您可以通过在服务器行前加上退格符来模拟您想要的行为`\b`。这是一个测试程序

```
public class Prompt
{
   public static void main(String [] args)
   {
      System.out.print(">");
      System.out.println("line1");
      System.out.print(">");
      System.out.println("line2");
      System.out.print(">");
      System.out.println("\bline3");
      System.out.print(">");
      System.out.println("");
   }
} 
```

当我在我的 bash shell 中运行这个程序时，我得到以下输出：

```
>line1
>line2
line3
> 
```

请注意，程序确实打印出提示符，`line3`但是`ate`通过将光标移回一个字符并覆盖该字符，退格符是提示符字符。

在您的情况下，当您从服务器广播某些内容时，只需`\b`在调用 consoleWriteln 之前添加到消息中。

然而，这并不总是有效。它在我的 Intellij 控制台窗口中肯定不起作用——它似乎只是忽略了退格字符。因此，这种方法的成功取决于您使用的控制台以及您的控制台如何处理退格。

如果您使用系统提供的控制台程序（bash 或 cmd.exe）来运行您的程序，它应该可以在 Mac、Linux 和 Windows 上运行。

# ruby-on-rails - to_json 和 to_xml 在 rails 中给出不同的输出

> ID：13504093
> 
> 赞同：1
> 
> 时间：2012-11-22T00:11:28.013
> 
> 标签：ruby-on-rails, ruby, xml, json, activesupport

在这里开始 Rails 程序员。我正在尝试将哈希转换为 xml 和 json，但输出不同。

这是哈希：

```
{:exchangeRates=>[{:baseCurrency=>"USD", :quoteCurrency=>"EUR", :amount=>1, :nprices=>1, :conversions=>[{:date=>Tue, 20 Nov 2012 21:00:00 +0000, :ask=>"0.7813", :bid=>"0.7813"}]}, {:baseCurrency=>"CAD", :quoteCurrency=>"EUR", :amount=>1, :nprices=>1, :conversions=>[{:date=>Tue, 20 Nov 2012 21:00:00 +0000, :ask=>"0.7839", :bid=>"0.7837"}]}]} 
```

这是相应的渲染代码

```
format.json { render :json => { :response => rates.to_hash() } } 
```

这是JSON（这就是我想要的）

```
{"response": {"exchangeRates": [
    {
        "baseCurrency": "USD",
        "quoteCurrency": "EUR",
        "amount": 1,
        "nprices": 1,
        "conversions": [{
            "date": "2012-11-20T21:00:00+00:00",
            "ask": "0.7813",
            "bid": "0.7813"
        }]
    },
    {
        "baseCurrency": "CAD",
        "quoteCurrency": "EUR",
        "amount": 1,
        "nprices": 1,
        "conversions": [{
            "date": "2012-11-20T21:00:00+00:00",
            "ask": "0.7839",
            "bid": "0.7837"
        }]
    }
]}} 
```

这是我的 xml 渲染代码：

```
format.xml { render :xml => rates.to_hash(), :root => 'response' } 
```

这是 xml 输出（我在数组中放置了额外的标签）：

```
<response>
    <exchangeRates type="array">
        <exchangeRate>
            <baseCurrency>USD</baseCurrency>
            <quoteCurrency>EUR</quoteCurrency>
            <amount type="integer">1</amount>
            <nprices type="integer">1</nprices>
            <conversions type="array">
                <conversion>
                    <date type="datetime">2012-11-20T21:00:00+00:00</date>
                    <ask>0.7813</ask>
                    <bid>0.7813</bid>
                </conversion>
            </conversions>
        </exchangeRate>
        <exchangeRate>
            <baseCurrency>CAD</baseCurrency>
            <quoteCurrency>EUR</quoteCurrency>
            <amount type="integer">1</amount>
            <nprices type="integer">1</nprices>
            <conversions type="array">
                <conversion>
                    <date type="datetime">2012-11-20T21:00:00+00:00</date>
                    <ask>0.7839</ask>
                    <bid>0.7837</bid>
                </conversion>
            </conversions>
        </exchangeRate>
    </exchangeRates>
</response> 
```

如您所见，它添加了额外的“数组”属性标签，即exchangeRates 和conversions。我如何让它的格式与 json 相同？我也不想要任何标签上的属性。我知道你可以传入属性，例如 :root => 'response'，但是在寻找了相当长的一段时间后，我似乎无法在网上找到这些属性的列表。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:59:45.807

在这种情况下，最好直接访问源代码。该`to_xml`方法在`ActiveModel::Serializer`模块中，这里是[内联文档](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/serializers/xml.rb#L169)，其中没有提及有关`type="array"`属性标签的任何内容。再深入一点，你会发现它们出现在同一个文件的第 130 行，方法名为[`add_associations`](https://github.com/rails/rails/blob/master/activemodel/lib/active_model/serializers/xml.rb#L130).

**rails/activemodel/lib/active_model/serializers/xml.rb:130**

```
type = options[:skip_types] ? { } : {:type => "array"} 
```

这告诉我们有一个名为 的选项`skip_types`，它似乎没有记录在任何地方。尝试将其传递给`to_xml`，您将获得所需的行为：

```
a = [1, 2, 3]
a.to_xml
#=> "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<fixnums type=\"array\">\n  <fixnum type=\"integer\">1</fixnum>\n  <fixnum type=\"integer\">2</fixnum>\n  <fixnum type=\"integer\">3</fixnum>\n</fixnums>\n"
a.to_xml(:skip_types => true)
#=> "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<fixnums>\n  <fixnum>1</fixnum>\n  <fixnum>2</fixnum>\n  <fixnum>3</fixnum>\n</fixnums>\n" 
```

您会注意到所有添加的`type`属性都消失了。

因此，只需将相同的选项传递给`render`，您将获得所需的结果：

```
format.xml { render :xml => rates.to_hash(), :root => 'response', :skip_types => true } 
```

# python - Python self：我是否必须将 self 传递给函数来引用 self？

> ID：13504096
> 
> 赞同：0
> 
> 时间：2012-11-22T00:11:55.900
> 
> 标签：python

问题令人困惑。这是一个例子。

```
class some_class():
  some_var = 5
  def some_fun(self):
     def another_fun():
         return self.some_var 
```

这没问题吧？我不必： another_fun(self) 调用self？我实际上测试了它并且它有效。我只是想澄清一下，因为这让我有点不确定。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T00:16:35.237

在您的情况下，它是不需要的，因为`another_fun`它嵌套在其他函数中，因此它从该函数中*捕获*本地名称，其中包括`self`. 实际上，任何可访问的名称都可以从`some_fun`访问`another_fun`。

这就是一些人所说的*闭包*，编写创建函数的函数很棒。经典的例子是：

```
def MultiplyBy(x):
    def M(y):
        return x * y
    return M

Double = MultiplyBy(2)
Triple = MultiplyBy(3)

print Double(10), Triple(10) 
```

那将打印`20 30`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T00:16:21.487

是的，当您在另一个函数中定义一个函数时，内部函数可以从外部函数读取变量。这不是特定于`self`. 它适用于所有函数中的所有变量：

```
>>> def outer():
...     a = 2
...     def inner():
...         print a
...     inner()
>>> outer()
2 
```

在 Python 2 中，您不能在内部函数中重新绑定外部变量（即，您不能`a = 3`在`inner`上面执行操作）。在 Python 3 中，您可以使用`nonlocal`语句执行此操作。

然而，你为什么要这样做？首先，您上面的代码甚至没有调用`another_fun`，所以它的作用无关紧要。一般来说，在其他函数中定义函数有点奇怪。这样做肯定有合法的案例（例如，装饰器），但在许多情况下，它可能会引起混淆。

# c++ - 谐波级数和 c++ MPI

> ID：13504098
> 
> 赞同：3
> 
> 时间：2012-11-22T00:12:00.737
> 
> 标签：c++, c, parallel-processing, mpi, openmpi

我正在尝试使用 MPI制作并行版本的“ **Harmonic Progression Sum ”问题。**但我是 MPI 的新手，我不知道如何使用 MPI 运行此方法，因为它不起作用。

**并行程序：**

```
//#include "stdafx.h"
#include <stdio.h>
#include <time.h>
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include <mpi.h>

#define d 10    //Numbers of Digits (Example: 5 => 0,xxxxx)
#define n 1000  //Value of N (Example: 5 => 1/1 + 1/2 + 1/3 + 1/4 + 1/5)

using namespace std;

int numProcess, rank, msg, source, dest, tag, qtd_elemento;

int escravo(long unsigned int *digits, int ValueEnd)
{
    MPI_Status status;

    MPI_Recv(digits, (d + 11), MPI_INT, MPI_ANY_SOURCE, MPI_ANY_TAG, MPI_COMM_WORLD, &status);

    for (int i = 1; i <= ValueEnd; ++i) {
        long unsigned int remainder = 1;
        for (long unsigned int digit = 0; digit < d + 11 && remainder; ++digit) {
            long unsigned int div = remainder / i;
            long unsigned int mod = remainder % i;
            digits[digit] += div;
            remainder = mod * 10;
        }
    }

    MPI_Send(&digits, 1, MPI_INT, 0, 1, MPI_COMM_WORLD);
}

void HPSSeguencial(char* output) {
    long unsigned int digits[d + 11];
    int DivN = n / 4; //Limiting slave.

    for (int digit = 0; digit < d + 11; ++digit)
        digits[digit] = 0;

    if (rank != 0){
        escravo(digits, (DivN * 1 ) );
        escravo(digits, (DivN * 2 ) );
        escravo(digits, (DivN * 3 ) );
        escravo(digits, (DivN * 4 ) );
    }

    for (int i = d + 11 - 1; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    if (digits[d + 1] >= 5) {
        ++digits[d];
    }

    for (int i = d; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    stringstream stringstreamA;
    stringstreamA << digits[0] << ",";

    for (int i = 1; i <= d; ++i) {
        stringstreamA << digits[i];
    }
    string stringA = stringstreamA.str();
    stringA.copy(output, stringA.size());
}

int main() {
    MPI_Init(&argc,&argv);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    MPI_Comm_size(MPI_COMM_WORLD, &numProcess);

    char output[d + 10];
    HPSSeguencial(output);
    cout << output << endl;

    MPI_Finalize();

    system("PAUSE");
    return 0;
} 
```

**原始代码**

```
#include "stdafx.h"
#include <iostream>
#include <sstream>
#include <time.h>

#define d 10    //Numbers of Digits (Example: 5 => 0,xxxxx)
#define n 1000  //Value of N (Example: 5 => 1/1 + 1/2 + 1/3 + 1/4 + 1/5)

using namespace std;

void HPS(char* output) {
    long unsigned int digits[d + 11];

    for (int digit = 0; digit < d + 11; ++digit)
        digits[digit] = 0;

    for (int i = 1; i <= n; ++i) {
        long unsigned int remainder = 1;
        for (long unsigned int digit = 0; digit < d + 11 && remainder; ++digit) {
            long unsigned int div = remainder / i;
            long unsigned int mod = remainder % i;
            digits[digit] += div;
            remainder = mod * 10;
        }
    }

    for (int i = d + 11 - 1; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    if (digits[d + 1] >= 5) {
        ++digits[d];
    }

    for (int i = d; i > 0; --i) {
        digits[i - 1] += digits[i] / 10;
        digits[i] %= 10;
    }
    stringstream stringstreamA;
    stringstreamA << digits[0] << ",";

    for (int i = 1; i <= d; ++i) {
        stringstreamA << digits[i];
    }
    string stringA = stringstreamA.str();
    stringA.copy(output, stringA.size());
}

int main() {

    char output[d + 10];
    HPS(output);
    cout << output<< endl;

    system("PAUSE");
    return 0;
} 
```

**例子：**

***输入：***

```
#define d 10
#define n 1000 
```

***输出：***

```
7,4854708606╠╠╠╠╠╠╠╠╠╠╠╠ 
```

***输入：***

```
#define d 12
#define n 7 
```

***输出：***

```
2,592857142857╠╠╠╠╠╠╠╠╠╠╠╠╠╠ÀÂ♂ü─¨@ 
```

**问候**

***原始代码***

[http://regulus.pcs.usp.br/marathon/current/warmup.pdf](http://regulus.pcs.usp.br/marathon/current/warmup.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:37:29.073

我假设你想并行化这部分：

```
for (int i = 1; i <= ValueEnd; ++i) 
{
        long unsigned int remainder = 1;
        for (long unsigned int digit = 0; digit < d + 11 && remainder; ++digit)
        {
            long unsigned int div = remainder / i;
            long unsigned int mod = remainder % i;
            digits[digit] += div;
            remainder = mod * 10;
        }
} 
```

您可以按每个 MPI 进程划分每个迭代：

```
int idP = getProcessId(), numP = numberProcess();
for (int i = idP; i <= ValueEnd; i+=numP)
{
  ...
} 
```

) 为您提供`getProcessId(`进程 ID 并`numberProcess()`为您提供进程号：

```
int getProcessId(){
    int rank;
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);
    return rank;
}
// Get number of process
int numberProcess(){
    int numProc;
    MPI_Comm_size(MPI_COMM_WORLD, &numProc);
    return numProc;
} 
```

每个进程都会有一个数组数字的副本；在并行处理之后，主进程使用[MPI_reduce](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Reduce.html)从所有从属进程收集结果。或者，如果您想组合来自所有进程的值并将结果分发回所有进程，您可以使用[MPI_Allreduce](http://www.mcs.anl.gov/research/projects/mpi/www/www3/MPI_Allreduce.html)。

```
 long unsigned int digits[d + 11];
    int DivN = n / 4; //Limiting slave.

    for (int digit = 0; digit < d + 11; ++digit)
        digits[digit] = 0;

    if (rank != 0){
        escravo(digits, (DivN * 1 ) );
        escravo(digits, (DivN * 2 ) );
        escravo(digits, (DivN * 3 ) );
        escravo(digits, (DivN * 4 ) );
    } 
```

根据上面的代码，进程0不会执行该方法`escravo`。此外，您没有在流程之间正确分配工作。进程 1 将在方法内`escravo`从 1 到 n/4 执行 out for 循环，但随后进程 2 将从 1 到 2n/4 执行......因此，当你真正想要的是不同的进程执行相同的迭代时在进程之间划分这些迭代。

# mysql - myISAM 和 InnoDB 表的外键

> ID：13504099
> 
> 赞同：10
> 
> 时间：2012-11-22T00:12:02.640
> 
> 标签：mysql, innodb

我有一个数据库表 myISAM，用于全文搜索。我还有一个 InnoDB 表。我的 myISAM 表中有一个列，我想与我的 InnoDB 表中的一个列匹配。可以这样做吗？我似乎无法解决它！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T00:18:45.897

[http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.0/en/innodb-foreign-key-constraints.html)

外键定义受以下条件约束：

两个表都**必须**是 InnoDB 表，并且不能是 TEMPORARY 表。

所以，我担心你将无法实现你想要做的事情。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T00:26:33.930

我建议更改您的数据库架构，以便您拥有一组设计用于写入的数据完整性的表（所有 InnoDB），以及另一组设计用于搜索的表 - 可能在不同的盒子上，甚至可能不使用 MySQL，但也许是像 Solr 或 Sphinx 这样的搜索服务器，其性能应该优于全文 MySQL 表。然后，您可以定期从您的写入数据库中填充您的搜索数据库。

# html - 无法在 div 中垂直居中文本

> ID：13504100
> 
> 赞同：3
> 
> 时间：2012-11-22T00:12:10.053
> 
> 标签：html, css

我想让两个文本标签位于文本区域字段旁边，并在该文本区域字段的中心垂直对齐。

我试过做

[如何在 HTML 中垂直对齐元素](https://stackoverflow.com/questions/4414034/how-to-vertically-align-elements-in-html/4414069#4414069)

和

[http://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

但无济于事。

我将发布两次尝试的代码-

尝试 1 -

HTML-

```
 <div class="optionGroup">
    <div class="response">
        <div class="outer">
            <div class="middle">
                <div class="inner">
                    <textarea class="correctResponse"></textarea>
                    <text class="closeButton centerVertically">&#10006;</text>
                    <text class="addButton centerVertically">&#43;</text>
                </div>
            </div>
        </div> 
```

CSS-

```
.outer{
    display:table;
    position:static;
}

.middle{
    display:table-cell;
    vertical-align:middle;
    width:100%;
} 
```

尝试2-

HTML-

```
<textarea class="correctResponse"></textarea>
<text class="closeButton centerVertically">&#10006;</text>
<text class="addButton centerVertically">&#43;</text> 
```

CSS-

```
 .centerVertically{
    line-height:100%;
    vertical-align:middle;
} 
```

我哪里错了？如何获得它以便两个文本标签位于文本区域旁边并且从文本区域顶部垂直向下？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:24:42.557

当您应用于`vertical-align:middle`文本而不是 textarea 时，最终文本元素相对于彼此居中，而不是相对于它们与 textarea 一起放入的整行。如果您还使文本区域居中，它应该可以工作，如下所示：

HTML-

```
<textarea class="correctResponse centerVertically"></textarea>
<text class="closeButton centerVertically">&#10006;</text>
<text class="addButton centerVertically">&#43;</text>​​​​​​​​ 
```

CSS-

```
 .centerVertically{
    line-height:100%;
    vertical-align:middle;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:36:41.783

尝试这个：

```
<style>
.centerVertically{
   height:100%;
    /*vertical-align:middle;*/
margin: 50% 0 50% 0;

position: absolute;
}
</style>

<div class="centerVertically">
<textarea class="correctResponse"></textarea>
<text class="closeButton">&#10006;</text>
<text class="addButton">&#43;</text>
</div> 
```

# c++ - 调用嵌套结构的成员，ERROR 没有类类型

> ID：13504101
> 
> 赞同：1
> 
> 时间：2012-11-22T00:12:37.433
> 
> 标签：c++

在 main.CI 中，我尝试访问嵌套结构成员（g.Fp1.d_status）并收到错误消息：

'g.GridPt::Fp1' 没有类类型

下面是我的代码。我真的可以使用一些帮助。谢谢。我尝试了诸如 g.MarchingDirection::Fp1.d_status, g.&MarchingDirection::Fp1.d_status, ... 之类的东西，但没有成功。

* * *

```
//Filename: main.C

#include "GridPt.h"

int main()
{   
    GridPt g;

    g.d_lstDistFn;
    g.Fp1.d_status; \\ERROR: 'g.GridPt::Fp1' does not have class type

    return 0;
} 
```

* * *

```
//Filename: MarchingDirection.h

#ifndef included_MarchingDirection
#define included_MarchingDirection

struct MarchingDirection
{
    MarchingDirection(double FValue);   

    double d_F;              
    int d_inOut;             
    char d_status;          
};
#endif 
```

* * *

```
//Filename: MarchingDirection.C

#include "MarchingDirection.h"

MarchingDirection::MarchingDirection(double FValue)  
: d_F(FValue),
  d_inOut(static_cast<int>(FValue)),
  d_status('d'){} 
```

* * *

```
//Filename: Grid2D.h

#ifndef included_GridPt
#define included_GridPt

#include "MarchingDirection.h"
#include <cstddef>

struct GridPt
{   
    GridPt();    

    double d_x, d_y; 
    MarchingDirection Fp1(double F=1.0), Fm1(double F=-1.0);
    double d_lstDistFn;    
};

#endif 
```

* * *

```
//Filename: GridPt.C

#include "GridPt.h"

GridPt::GridPt() 
: d_lstDistFn(0.0){} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:14:35.813

您在 GridPt 结构中声明了 Fp1、Fm1 函数，它们不是成员

您可以更改为：

```
struct GridPt
{   
    GridPt();   

    double d_x, d_y; 
    MarchingDirection Fp1, Fm1;
    double d_lstDistFn;    
}; 
```

初始化所有结构成员，如下所示：

```
GridPt::GridPt() 
: d_x(0.0), 
  d_y(0.0), 
  Fp1(1.0),
  Fm1(-1.0),
  d_lstDistFn(0.0)
{} 
```

# visual-studio-2010 - 将 SharePoint 2010 工作流导入 Visual Studio：如何查看背后的代码？

> ID：13504102
> 
> 赞同：0
> 
> 时间：2012-11-22T00:12:41.220
> 
> 标签：visual-studio-2010, sharepoint-2010, sharepoint-workflow

我已将工作流 (SharePoint 2010) 导入 VS2010。我发现所有活动都被锁定（左上角有一个黄色挂锁）。如何解锁它们或如何查看背后的代码？

先感谢您！

截屏：

![在此处输入图像描述](../Images/db11f6a817f9f87b7f8e03d0c010057b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:48:56.480

如果工作流是使用 SharePoint 设计器制作的，则不能。悲伤但真实。

# objective-c - Objective C 中带有条件值的常量

> ID：13504104
> 
> 赞同：2
> 
> 时间：2012-11-22T00:13:15.133
> 
> 标签：objective-c, ios, xcode

[我已经使用这个问题中的建议](https://stackoverflow.com/questions/538996/constants-in-objective-c)在我的 Xcode 项目中设置了一些常量，它工作得很好。但是，现在我想根据它是 iPad 还是 iPhone，为其中两个常量设置不同的值。

这是我的 Constants.h 文件：

```
extern integer_t const kFontSize;
extern integer_t const kFontSizeMicro; 
```

和我的.m：

```
integer_t const kFontSize = 16;
integer_t const kFontSizeMicro = 11; 
```

现在我想根据我的 .pch 文件中的 #define 宏设置来更改这些值。但这不起作用：

```
if (IS_IPAD) {
    integer_t const kFontSize = 25;
    integer_t const kFontSizeMicro = 15;
} 
```

我得到的错误是“如果”上的“预期标识符或（”。

有人知道在这种情况下如何允许条件语句吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:21:27.447

C 语言的`if`语句不能在函数体之外使用来控制这样的全局声明。您可以改用预处理器`#if`：

```
#if (IS_IPAD)
    integer_t const kFontSize = 25;
    integer_t const kFontSizeMicro = 15;
#else
    integer_t const kFontSize = 20;
    integer_t const kFontSizeMicro = 12;
#endif 
```

`#define`不过，这与使用 -d 常量并没有太大区别。如果您想在运行时使常量可设置，例如在初始化期间，您将需要`const`从声明中删除，并将常规`if`放入初始化函数中 - 例如，`application:didFinishLaunchingWithOptions:`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:22:22.423

你也可以使用三元运算符，它会给你这样的东西：

```
integer_t const kFontSize = (IS_IPAD)? 25 : 20;
integer_t const kFontSizeMicro = (IS_IPAD)? 15 : 12; 
```

这就像一个 if(IS_IPAD){ kFontSize = 25 }else{ kFontsize = 20} 声明

如果你在计算中使用你的常数，你可能需要把它放在 () 之间，否则你可能会因为操作优先级问题而收到一些警告。

所以类似的东西：(kFontSize)*2+1

# wireshark - dhcp 发现和提供消息未出现

> ID：13504110
> 
> 赞同：1
> 
> 时间：2012-11-22T00:13:51.613
> 
> 标签：wireshark, dump, dhcp, tcpdump

我正在使用wireshark 转储DHCP 消息并运行`dhclient interface_name`以强制重新配置dhcp 客户端。

第一次运行时，`dhclient`我会收到所有常见的消息：discover、offer、request、ack。从第二次开始，我只收到请求和确认消息。

机器是否在某处存储/缓存丢失数据包中的内容？如果是这样，我如何强制整个消息交换？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:04:22.217

您还可以使用以下命令

```
 ipconfig /release

 ipconfig /renew 
```

Wireshark 将在第一个之后看到 DHCP 释放数据包，在第二个之后看到完整的 DHCP 序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T14:27:39.633

> dhclient 接口名称

实际上这个命令只更新接口的IP；如果它没有 IP，那么您将看到完整的 DHCP 序列以便获得一个。

如果您总是想强制执行完整的 DHCP 序列（DISCOVERY、OFFER 等），请尝试该序列

> dhclient -r 接口名称
> 
> dhclient 接口名称

# grails - 来自字符串 groovy 的引用对象

> ID：13504111
> 
> 赞同：-1
> 
> 时间：2012-11-22T00:13:55.803
> 
> 标签：grails, groovy

如何从groovy中的字符串引用对象？我有很多对象 - reviewSyd1、reviewSyd2..reviewSyd30 我需要添加到对象 - sydney。我有循环

```
for(i in 1..30){
  sydney.addToReviews("reviewSyd$i")
} 
```

这是行不通的。如何使它工作？

谢谢你

更新澄清（对不起，如果我不清楚）

```
class Review{
   String email
   String Content

}

def rev1 = new Review(email:'one@homail.com',content:'i really like it')
def rev2 = new Review(email:'two@homail.com',content:'i really like it')
def rev3 = new Review(email:'three@homail.com',content:'i really like it')
def rev4 = new Review(email:'four@homail.com',content:'i really like it')

for(i in 1..4){
   println rev$i.email
} 
```

如何引用对象 -revX 其中 x 是迭代器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:03:41.740

```
println rev$i.email 
```

并不是那种动态是时髦的。这不是一个有效的 groovy 语法。将您想要稍后在代码中访问的那些对象放在一个集合中。

```
def revs = []
revs << new Review(email:'one@homail.com',content:'i really like it')
revs << new Review(email:'two@homail.com',content:'i really like it')
revs << new Review(email:'three@homail.com',content:'i really like it')
revs << new Review(email:'four@homail.com',content:'i really like it') 
```

那么您将参考它们：

```
revs.each{
   println it.email
} 
```

# gallery - plonetruegallery：下载链接或按钮，以便用户可以下载查看过的图像？

> ID：13504114
> 
> 赞同：0
> 
> 时间：2012-11-22T00:14:05.693
> 
> 标签：gallery, plone, image-gallery

我将[collective.plonetruegallery](http://pypi.python.org/pypi/collective.plonetruegallery)用于Plone 中的图片库，我喜欢它。但是，我想念的是一个“下载”按钮或一个简单的“链接”，以便让用户实际下载图像。plonetruegallery 的“Galleria”显示视图似乎确实提供了这样的链接/按钮——其他显示视图有吗？或者任何其他无需自己破解 plonetruegallery 插件的解决方案？

我知道您可以右键单击，然后在首选浏览器中的其他几个选项中选择“下载图像”——但是，对于愚蠢的用户来说，这很麻烦；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:39:42.550

我在collective.ptg.contactsheet (1.1.2) 中添加了一个选项，让您可以选择访问内容还是下载内容。埃斯彭

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T22:23:36.090

没有内置的“功能”可以做到这一点。您可以查看哪些画廊视图可能具有此功能；看起来你已经找到了。我相信您可以轻松地自定义另一个以包含这样的链接，只需按照 Galleria 中的示例进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:46:38.727

这很容易制作。下载图像的 url 可能是：/path/to/image/download

一种选择可能是只添加一个动作。如果你想为特定的画廊提供这个，我可能会修复它。（转到[https://github.com/collective/collective.ptg.contactsheet](https://github.com/collective/collective.ptg.contactsheet)或您想要的任何画廊类型并添加“问题”

埃斯彭

# php - 是否有一种简短的方法可以将 DateTime 修改为“今天”但保留以前存储的时间？

> ID：13504118
> 
> 赞同：6
> 
> 时间：2012-11-22T00:15:01.697
> 
> 标签：php, datetime

有一个`DateTime`对象。我想把它设置为**今天**并保持时间。

例如：

*   设置为*2012-10-12 10:30:00*
*   它应该变成*2012-11-22 10:30:00*

这当然行不通：

```
// this obviously changes it to 2012-11-22 00:00:00
$date->modify('today')); 
```

这将起作用，但似乎需要付出很多努力：

```
$clone = clone $date();
$date->modify('today')->setTime($clone->format('H'), $clone->format('i')); 
```

有没有更短/更有效的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T00:29:10.963

好不了多少：

```
$newDate = new DateTime('today '.$date->format('H:i')); 
```

# java - 动态加载jar

> ID：13504120
> 
> 赞同：0
> 
> 时间：2012-11-22T00:15:28.483
> 
> 标签：java, jar, classloader, urlclassloader

在我的 java 应用程序中，我将一个 jar 文件（使用 Maven shade 插件打包）读入一个字节流。在 jar 中定义了一个入口点类`POM.xml`

```
<build>
  ...
  <plugins>
    ...
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-jar-plugin</artifactId>
      <configuration>
        <archive>
          <manifest>
            <mainClass>com.mycompany.TheEntryPoint</mainClass>
          </manifest>
        </archive>
      </configuration>
    </plugin>
  </plugins>
</build> 
```

如何将此类动态加载到我的 java 应用程序中？

**更新：**

*   jar 作为字节流加载，不驻留在文件系统或 URL 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T00:28:33.963

最简单的方法是使用 a[`URLClassLoader`](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html#URLClassLoader%28java.net.URL%5B%5D,%20java.lang.ClassLoader%29)而不是尝试从字节流中从头开始执行此操作。您始终可以将 .jar 写入临时文件并为其创建 URL。

代码看起来像：

```
URLClassLoader loader = new URLClassLoader(
    new URL[] {new URL("file://...")},
    Thread.currentThread().getContextClassLoader());

loader.loadClass("com.mycompany.TheEntryPoint"); 
```

您还可以使用自动检测主类名（或调用它）[`JarURLConnection`](http://docs.oracle.com/javase/7/docs/api/java/net/JarURLConnection.html)。（Oracle 也有[使用这个类的教程](http://docs.oracle.com/javase/tutorial/deployment/jar/jarclassloader.html)。）

# ruby-on-rails - Rails Devise 登录后重定向

> ID：13504124
> 
> 赞同：4
> 
> 时间：2012-11-22T00:15:33.880
> 
> 标签：ruby-on-rails, redirect, login, devise

我正在使用带有 Rails 的 Devise 进行用户登录。这一切都很好，但是，我无法让特定的重定向工作。

我是 Rails 新手，所以我做事的方法可能不正确。

本质上，举个例子，我允许用户喜欢一个帖子。但是，他们需要登录才能这样做。我在我的控制器中创建了一个名为“like”的操作，并且控制器具有设计过滤器

```
before_filter :authenticate_user!, :except => [:index, :show] 
```

输入，从而显示登录页面。一旦用户登录，我想将他们重定向回他们喜欢的帖子，并调用了“喜欢”操作。

我的控制器看起来像

```
def like

  @post = Post.find(params[:id]) 
  @like = Like.new;
  @like.user_id = current_user.id;
  @like.post_id = params[:id];
  respond_to do |format|
    if @like.save
      format.html { redirect_to @post, notice: 'You have like this post' }
      format.json { head :no_content }
    else 
      format.html { redirect_to @post, notice: 'Sorry you like was not saved  } 
      format.json { render json: @post.errors, status: :unprocessable_entity }
    end
  end  
end 
```

自然，我不能使用 after_sign_in_path_for 对路径进行硬编码

```
def after_sign_in_path_for(resource)    
  #path to somewhere
end 
```

但我已经读到我可以使用会话变量，也许可以在上面的代码中调用它。我可以在 Rails 的哪个部分编写会话变量，因为它在控制器操作中为时已晚（因为设计在它遇到类似操作之前接管）并且我看不到如何在视图中设置它。

我的链接也看起来像

```
<%= link_to "Like", {:controller => :posts, :action => :like, :id => @post.id}, {:method => :post } %> | 
```

PS 使用创建新“帖子”时的重定向工作正常，即用户登录并被重定向到新的帖子视图。

任何帮助和提示将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:17:17.517

您遇到这种情况是因为点赞操作是专门为 POST 设计的。因此，您应该确保用户在POST 到该 URL**之前**已登录，并且使用 session 执行此操作很棘手：

*   您必须通过将其排除在外来取消保护类似的方法`before_filter`
*   然后手动检查是否`user_signed_in?`（请注意，这是一个辅助方法），
*   然后（如果用户**未登录**），在会话中存储您喜欢的内容并重定向到带有返回 URL 的登录页面
*   在用户访问此返回 URL（它将是**GET**而不是**POST**）时，您必须查找会话信息并执行原始 Like 应该执行的操作（但届时用户将登录）。

看到所有这些舞蹈都将以**GET**请求结束，为什么不首先对 GET 请求进行 Like 操作以及在查询字符串中传递参数呢？它将需要 0 次代码更改，并且不会让您面临安全威胁，因为 Like 受 before_filter 保护。您只需要通过在标签上使用[rel="nofollow"](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=96569)来确保搜索引擎不会跟踪您的 Like 链接。`<a>`

有关相关讨论，请参阅[redirect_to 在 rails 中使用 POST](https://stackoverflow.com/questions/985596/redirect-to-using-post-in-rails)。在那里，其中一个建议是通过 JavaScript 在客户端上构建和提交表单。一旦用户通过身份验证，这将必须在返回 URL 视图上发生。如果您反对将您的类似操作公开为 GET（这违反了 REST 原则），这可能是最好的折衷方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T13:33:36.600

这很容易解决：

进入应用程序控制器：

```
 # after login redirect
 after_filter :store_location

 def store_location
   # previous url save when its not a admin or user url
   session[:previous_url] = request.fullpath unless request.fullpath =~ /\/users/ || request.fullpath =~ /\/admin/ || request.fullpath =~ /\/admin\/login/ || 
   request.fullpath =~ /\/login/
 end 
```

# ruby - 如何允许 Ruby 别名的语法？

> ID：13504128
> 
> 赞同：12
> 
> 时间：2012-11-22T00:16:02.700
> 
> 标签：ruby

这个让我夜不能寐有一段时间了。

```
class Foo
  def bar
    'bar'
  end

  # What the hell is going on here?!?
  alias :baz :bar
end

Foo.new.baz #=> 'bar' 
```

为什么`alias`将 2 个符号作为参数，但没有逗号分隔它们？在任何其他上下文中，这似乎都不是任何形式的有效语法。事实上，如果你确实使用了逗号，它实际上*会引发*语法错误。

```
alias :bar, :baz
# syntax error, unexpected ',' 
```

但是，如果我尝试以相同的方式将 2 个符号传递给我自己的方法，它也会爆炸：

```
def somemethod(*args)
  :whatever
end
somemethod :a :b
# syntax error, unexpected ':', expecting $end 
```

1.  那么，为什么`alias`get 方法使用了没有其他方法可以使用的语法呢？
2.  是否可以在任何其他上下文中使用此语法？
3.  当语言中没有其他东西以这种方式工作时，使用这种奇怪的语法怪癖有什么好处？我认为这种语言不一致没有明显的好处。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T00:30:14.737

之所以`alias`有效是因为它是一个 Ruby 关键字，类似于`class`,`def`等。它不是一个方法。

`alias`关键字不需要逗号，因为 Ruby 设计者决定不需要逗号。关键字本质上是在解释器中硬编码的。

`alias`当您需要确定别名发生在解析时而不是运行时时，这是有充分理由的。

`alias`关键字可能令人困惑或令人惊讶。对于典型的开发，我认为最好使用 Ruby 方法[`Module#alias_method`](http://ruby-doc.org/core-1.9.3/Module.html#method-i-alias_method)，它使用逗号并在运行时工作。

[这是一篇](http://blog.bigbinary.com/2012/01/08/alias-vs-alias-method.html)关于`alias`and的好博文`alias_method`：

> 这是因为`alias`is 一个关键字并且它是词法范围的。这意味着它被视为读取源代码时`self`的值。`self`相反，`alias_method`视为`self`在运行时确定的值。
> 
> 总的来说，我的建议是使用`alias_method`. 由于 `alias_method`是在类中定义的方法，`Module`它可以在以后被覆盖，并提供更大的灵活性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T00:31:11.507

它不是一种方法，那些也不是论据。`alias`是 Ruby 中为数不多的关键字之一（请[在此处](http://ruby-doc.org/docs/keywords/1.9/)查看所有关键字！）。它也困扰着我，所以我切换到`alias_method`（并且还有[其他论点](http://blog.bigbinary.com/2012/01/08/alias-vs-alias-method.html)）。

# c# - C#如何通过集中存储console.writeline消息使代码干净

> ID：13504131
> 
> 赞同：0
> 
> 时间：2012-11-22T00:16:20.457
> 
> 标签：c#

我是一名初学者程序员并正在创建 ac# 应用程序。我有几个 console.writeline 消息。

问题是在 console.writeline 中传递的所有字符串在代码中看起来都很讨厌。

有人可以告诉我集中存储字符串/消息的最佳方法是什么。

这样代码看起来更干净，代码中没有那么多字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T00:20:26.200

如果您只想清理代码，请将此字符串移动到以下一些单独的类（常量或消息）中：

```
 public static class Constants
    {
        public static readonly string SomeMessage = "Hello world!";

        public static readonly string OtherMessage = "Goodbye world!";

        ...
    } 
```

然后使用它们：

```
Console.WriteLine(Constants.SomeMessage); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:21:22.467

我不确定你在这里看什么，但也许你可以创建一个字符串列表？

```
static List<string> myList = new List<string> { "string1", "string2" };
console.writeline(myList[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T05:58:57.153

扩展方法可能会很有趣。这不是标准模式，但打字较少。写入控制台时，您可能会进入日志记录，应该考虑使用 log4net 或 NLog。

```
// Extension Method example

public static class ConstantExtensions
{
       public static void WriteToConsole(this string constant)
       {
          Console.WriteLine(constant);
       }

}

public static class Constants
{
    public static readonly string SomeMessage = "Hello world!";

    public static readonly string OtherMessage = "Goodbye world!";

    ...
}

Constants.SomeMessage.WriteToConsole(); 
```

# php - 一个登录脚本，两个表

> ID：13504132
> 
> 赞同：0
> 
> 时间：2012-11-22T00:16:34.700
> 
> 标签：php

我有一个我正在设计的学校的网站。

我正在努力如何为我的脚本工作，但该网站有两个部分。如果教师登录，从表课程教师，它应该将他们重定向到课程.php。如果学生从表 users 登录，它会将他们重定向到 home.php。

我认为教师表的选择查询可能是这样的：

```
 SELECT id FROM lesson_teachers WHERE username='$user_login' AND password='$md5password_login' LIMIT 1 
```

我正在尝试将该选择语句放入下面的登录脚本中，以便在两个表中都有用户名和密码的人可以登录到一个脚本。

```
 if (isset($_POST["user_login"]) && isset($_POST["password_login"])) {
$user_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["user_login"]); // filter everything but numbers and letters
$password_login = preg_replace('#[^A-Za-z0-9]#i', '', $_POST["password_login"]); // filter everything but numbers and letters
$md5password_login = md5($password_login);
$sql = mysql_query("SELECT id FROM users WHERE username='$user_login' AND password='$md5password_login' LIMIT 1"); // query the person
//Check for their existance
$userCount = mysql_num_rows($sql); //Count the number of rows returned
if ($userCount == 1) {
    while($row = mysql_fetch_array($sql)){ 
         $id = $row["id"];
}
     $_SESSION["id"] = $id;
     $_SESSION["user_login"] = $user_login;
     $_SESSION["password_login"] = $password_login;
     exit("<meta http-equiv=\"refresh\" content=\"0\">");
    } else {
    echo 'That information is incorrect, try again';
    exit();
}
      } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T00:28:40.650

您的用户表应该在您的用户表中具有角色关系或至少一个 tinyint 1 字段（0 代表学生，1 代表教师），因此您不必使用 2 个表来实现此目的。

假装我同意这个查询，它可能看起来像这样：

```
SELECT id, level FROM users WHERE username='$user_login' AND password='$md5password_login' LIMIT 1 
```

其中学生级别为0，教师级别为1。任何与学生或教师本身相关的数据都可以存储在关系表中。

然后你可以说：

```
if($row['level'] == 1)
{
    header('Location: /teacher-url');
    exit;
}
else
{
    header('Location: /student-url');
    exit;
} 
```

现在是额外的掘金：请不要使用这种方法来比较密码。如果您试图破解，您基本上可以不小心或偶然以另一个用户身份登录，因为它会剥离字符。所以`"pa_s$sw==0ord"`变成`"password"`

只需对发布的输入与数据库中存储的 sha1 加密密码进行 sha1（或更好）加密比较。这是用户密码与输入的最佳真实比较。在 $_SESSION 中存储密码是没有意义的。为什么你会这样使用它？也许如果您告诉我们，我们可以为您指明一个更好的方向。

正如 Elias 所说，使用 PDO 或 mysqli。在使用它们而不是 mysql_ 函数的许多其他原因中，它们将正确清理。

我应该补充一点，我们都知道如何实际回答您的问题。我们知道你想知道如何用你所拥有的东西来做这件事。但我们拒绝。因为这个习惯应该在它变成噩梦之前被清除。不要试图故意粗鲁或任何事情，但精心策划的数据库结构和 PDO 或 mysqli 的使用将为您节省大量的数据库和代码时间。查看关系表、“角色”的概念和清理用户输入。由此，您可以以一种有意义的方式构建用户系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:32:24.267

首先，您只能找到每个用户/密码对 1 个匹配项，所以不是

```
while($row = mysql_fetch_array($sql)){ 
    $id = $row["id"];
} 
```

你可以简单地做

```
$row = mysql_fetch_array($sql);
$id = $row["id"]; 
```

至于教/学生重定向，您需要在登录中添加一个隐藏变量，从身份类型 = 教师或学生

然后基于这个变量，你可以做

```
if ($type=='student')
  header('location:home.php');
if ($type=='teacher')
  header('location:lession.php'); 
```

设置会话变量后。

# api - 通过 dotnetopenauth 获取令牌秘密值

> ID：13504136
> 
> 赞同：0
> 
> 时间：2012-11-22T00:17:17.080
> 
> 标签：api, twitter, dotnetopenauth, tokenize

我尝试使用 dotnetopenoauth 获取令牌秘密。我在里面搜索并找到

> SimpleConsumerTokenManager

类有

> GetTokenSecret()

这对我来说似乎很好，但由于它依赖于“AuthenticationOnlyCookieOAuthTokenManager”而无法创建它的对象

如果你知道如何初始化这个类，你能指导我吗，或者这是否是获取秘密令牌来制作我的 twitter 签名字符串的正确方法？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T02:05:36.633

DotNetOpenAuth 不存储令牌机密。您找到的 SimpleConsumerTokenManager 仅用于在身份验证期间临时存储单个令牌和机密。IConsumerTokenManager 接口是 DNOA 与您的应用程序交互的方式，以便您的应用程序可以存储和检索令牌和机密。

所以换句话说，我不知道您为什么要寻找一种使用 DNOA 来检索令牌机密的方法。

# django - 如何在 neo4django 中使用 ModelForm？

> ID：13504138
> 
> 赞同：2
> 
> 时间：2012-11-22T00:17:22.573
> 
> 标签：django, neo4j, neo4django

这似乎是一个错误，但我只是想确保我正确使用 API。

neo4django 似乎不支持对 django 的模型形式的支持。这是我所拥有的：

简单类：

> 从 neo4django.db 导入模型
> 
> 类人（models.NodeModel）：名称=models.StringProperty（）

模型形式：

> 类 PersonForm(forms.ModelForm): 类 Meta: 模型 = 人

会触发异常：

> “超级”对象没有“可编辑”属性

我将详细信息发布为问题： [https ://github.com/scholrly/neo4django/issues/135](https://github.com/scholrly/neo4django/issues/135)

因为当 Django 使用模型的 _meta 信息查找字段信息时，它会找到一个 BoundProperty 而不是 StringProperty 或 Property（它有一个名为 'editable' 的成员，但 BoundProperty 没有）。

是否有解决方法，或者这是一个实际的错误？关于如何修复错误的任何想法？我不熟悉库代码库。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:27:48.367

对于任何使用 Django 的 neo4j 的人，以下是一个合理（且快速）的解决方法。

此解决方案**要求表单上的字段名称与模型的属性名称完全相同**。

从该类继承表单，并将模型设置在表单类 Meta 类下：

```
class NeoModelForm(forms.Form):
    def __init__(self, *args, **kwargs):
        super(NeoModelForm, self).__init__(*args, **kwargs)
        self._meta = getattr(self, 'Meta', None)
        if not self._meta:
            raise Exception('Missing Meta class on %s' % str(self.__class__.__name__))
        if not hasattr(self._meta, 'model'):
            raise Exception('Missing model on Meta class of %s' % str(self.__class__.__name__))

    def save(self, commit=True):
        if not self.is_valid():
            raise Exception('Failed to validate')
        instance = self._meta.model(**self.cleaned_data)
        if commit:
            instance.save()
        return instance 
```

现在您可以像这样创建一个表单类：

```
class PersonForm(NeoModelForm):
    name = forms.CharField(widget=forms.TextInput())
    class Meta:
        model = Person 
```

并且仍然能够从有效表单中保存模型实例：

```
form = formclass(request.POST)
if form.is_valid():
    obj = form.save() 
```

另外，commit 参数将为您提供与 django 的 modelform 类相同的解决方案——但我没有费心去实现 save_m2m 功能（这似乎与作为后端的 neo4j 无关）。

# java - 将 ArrayList 作为参数传递

> ID：13504141
> 
> 赞同：11
> 
> 时间：2012-11-22T00:17:30.473
> 
> 标签：java, arrays, arraylist

首先让我说我不能在这里放任何代码，因为我的笔记本电脑上的互联网无法正常工作，所以我通过手机发布了这个。好的，问题是说我有两个班：一班和二班。第一类`ArrayList`的属性之一是它，它从第二类调用一个 void 方法并将其`ArrayList`作为参数传递。现在该方法初始化另一个`ArrayList`并使其等于我传递的参数并对新的`ArrayList`. 有趣的是，即使是我原来作为参数传递的 ArrayList 也在发生变化。可能的原因是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T00:20:51.703

问题是当您使用 = 使新的 ArrayList 成为原始的副本时，您只是在创建对同一 ArrayList 的新引用。将其视为指向同一对象的两个变量。

看看这个，它可能会帮助您了解正在发生的事情：[Java 是“按引用传递”还是“按值传递”？](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)

为了解决您的问题，您需要使用“new”关键字创建一个新的 ArrayList，然后添加所有对象，或者使用 clone() 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T00:22:29.737

原因是当您将 ArrayList 作为参数传递时，被调用的方法可以更改数组的内容。ArrayList 包含对对象的引用。如果您想避免某些类会更改 ArrayList 的内容，则必须返回 ArrayList 的副本，其中所有对象都是列表中对象的 clone()。

使用 object.clone()

```
ArrayList clonedCopy = new ArrayList(list1.size());
for (Object obj : list1) {
  clonedCopy.add(obj.clone());
} 
```

现在把这个 clonedCopy 还给他。但要确保 obj 是可克隆的！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-12-22T17:22:05.777

**示例代码：**

```
public class MethodArguments {

public static void main(String args[]) {

    ArrayList<String> a = new ArrayList<String>();

    a.add("Steve");

    a.add("Daniel");
    a.add("John");
    a.add("Maxi");
    a.add("Jeni");

    System.out.println(a);

    display(a);

    getSize(a);

}

static void display(ArrayList<String> arrayList1) {

    arrayList1.add("Pollard");

    System.out.println(arrayList1); // passing the arraylist values and
                                    // adding the element

}

static void getSize(ArrayList<String> arrayList1) {

    System.out.println(arrayList1.size()); // getting the size of arraylist
                                            // by passing arguments to
                                            // method
 }

} 
```

**输出：**

> [史蒂夫、丹尼尔、约翰、马克西、珍妮]
> 
> [史蒂夫、丹尼尔、约翰、马克西、杰妮、波拉德]
> 
> 6

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T00:20:06.083

因为它们指向相同的引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T00:37:49.783

Java 中的`=`操作符只会复制`ArrayList`引用（所有对象都一样）。请参阅[此答案](https://stackoverflow.com/a/7042258/716076)以制作 ArrayList 的深层副本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T00:39:37.313

这是因为当你使新数组列表等于时，它指向同一个旧数组。

这个小例子应该澄清它。

```
import java.util.ArrayList;
import java.util.List;

public class JavaApplication1 {

    public static void main(String[] args) {

        List <String> origList = new ArrayList<>();
        origList.add("a");
        origList.add("b");

        JavaApplication1 app = new JavaApplication1();
        app.addToList(origList);

        for(String str:origList){            
            System.out.println(str);
        }

    }

    private void addToList(List<String> strList){
        System.out.println("inside addToList");
        List <String> newList = new ArrayList<>();
        // newList = strList; //This is how you are doing it
        newList.addAll(strList); //This is how you should do it.

        newList.add("x");
    }
} 
```

# forms - 如何在 CRM 电子邮件活动中显示 SendOn / ReceivedOn 字段

> ID：13504143
> 
> 赞同：0
> 
> 时间：2012-11-22T00:17:44.513
> 
> 标签：forms, dynamics-crm, microsoft-dynamics

使用 Dynamics CRM 我想将 SendOn 和 ReceivedOn 字段添加到电子邮件活动表单。

我了解实际开始和实际结束显示这些值，但我似乎找不到任何 MSDN 或权威来源进行确认。

另外 - 我无法将现有字段重命名为 SendOn/ReceivedOn，因为根据电子邮件方向是传出还是传入，含义会有所不同。

有没有地方可以处理这个要求OOB？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T14:57:13.970

我不确定是否有针对这种情况的 OOB 解决方案。您可以尝试使用 JScript 或插件。

如果你更喜欢 JavaScript，你可以添加 JS webresource 方法来检查邮件是传出还是传入。基于 ActualStart 和 ActualEnd 字段（sendOn、receivedOn）的设置显示名称。当然，如果你找到了这个的权威来源（我没有:)）这个方法将在电子邮件表单加载时调用。

我会尝试添加两个 DateTime 字段（sendOn、 receivedOn）和一个用于电子邮件实体的插件，该插件将在电子邮件状态更改时执行。取决于新状态，更新相应的 DateTime 字段

希望能帮助到你

# perl - 将 perl 拆分正则表达式转换为 C#

> ID：13504147
> 
> 赞同：0
> 
> 时间：2012-11-22T00:18:06.530
> 
> 标签：perl, c#-4.0, windows-7

我有一个像这样定义的旧 perl 正则表达式

```
my @data = split(/^[0-9]{1,3}\)?\t/m, $CLIP->GetText()); 
```

C# 不喜欢正则表达式并说无法识别转义序列？我怎样才能解决这个问题？

我在 C# 中试过这个

```
Regex rex = new Regex("/^[0-9]{1,3}\)?\t/m"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:30:49.563

问题是`\)`。解决问题的最简单方法是将字符串更改为逐字字符串，如下所示：

```
Regex rex = new Regex(@"^[0-9]{1,3}\)?\t"); 
```

此外，在这种情况下，您不需要斜杠和尾随 m。

# database - 使用什么数据库或存储引擎来存储许多独特的项目？

> ID：13504148
> 
> 赞同：0
> 
> 时间：2012-11-22T00:18:23.630
> 
> 标签：database, storage

我正在考虑编写一个网络爬虫，它只收集页面的 URL，仅此而已（用于归档项目），但我在找到存储结果的正确方法方面遇到了问题。

要求是无论使用什么存储引擎，都可以处理数十万个项目（最好能够将元数据添加到每个条目，尽管不是必需的），并且可以忽略现有项目（以避免重复）而无需显着的性能打击。

我看过的引擎：

*   **MySQL**：随着数据库变大，检查现有项目的速度明显变慢。
*   **SQLite**：与上述相同的问题，甚至更糟糕的性能命中。
*   **memcache 和 Redis**：数据集可能变得足够大，以至于 RAM 存储不可行。
*   **MongoDB ：根据**[他们网站](http://docs.mongodb.org/manual/faq/fundamentals/#does-mongodb-require-a-lot-of-ram)上的解释，不确定如果大部分数据集存储在磁盘上，性能是否可以接受。

您对 MongoDB 的适用性有何看法（因为我没有在 MongoDB 中处理大型数据集的经验），您是否知道为此目的存在任何更好的（免费）存储引擎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:48:20.553

如果您使用传统的 RDBMS，您可以根据数据的散列创建唯一键（例如：使用 md5 或 sha1 对 URL 进行散列）。这将使唯一密钥保持较小（ish），并且应该有助于提高性能。

我喜欢 PostgreSQL——你可能想用它做一些测试。

*编辑：（见评论）*好的，也许在这个时代避免使用 md5（：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:01:51.650

听起来 NoSQL 解决方案很适合您。

特别是因为您只想在某个地方在 URL 的“id”下转储各种灵活的数据。

我用过 lucene，但 mongo 也是一个不错的选择。

# javascript - 函数引用而不是函数体 - 在循环中（带参数）

> ID：13504157
> 
> 赞同：4
> 
> 时间：2012-11-22T00:19:02.647
> 
> 标签：javascript

我想替换这个：

```
for( var i=0; i<elementArray.length; i++ )
   elementArray[i].click(function(){
      console.log("element clicked - selectedElementIndex = " + i);                    
   }); 
```

有类似的东西：

```
for( var i=0; i<elementArray.length; i++ )
    elementArray[i].click( onElementClick(i) );

function onElementClick( i ){
   console.log("element clicked - selectedElementIndex = " + i ); 
} 
```

我该怎么做 ？:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:24:26.893

由于（据我所知）单击处理程序不能接受参数，因此您需要使用范围内的变量创建一个函数，该函数应如下所示：

```
for( ... ) {
    elementArray[i].click( onElementClick(i) );
    ...
}

function onElementClick( id ){
   return function() {
       console.log("element clicked - selectedElementIndex = " + id ); 
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:20:59.160

代替：

```
elementArray[i].click( onElementClick(i) ); 
```

和：

```
elementArray[i].click( onElementClick(elementArray[i].id)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T00:27:20.697

将其包装在函数表达式中：

```
elementArray[i].click(function() {

    onElementClick(i);

}); 
```

您还需要将代码包装在函数表达式中以避免棘手的问题：

```
(function() {

    ...

    for ( ... ) (function(i) {

        elementArray[i].click(function() {

            onElementClick(i);

        });

    })(i);

})(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T00:32:58.180

使用`data`它可能看起来像：

```
for (... {

  elementArray[i].click( onElementClick ).data('id',i);
}

function onElementClick(){
       console.log("element clicked - selectedElementIndex = " + $(this).data('id') ); 
} 
```

# matlab - 在matlab中绘制结构

> ID：13504165
> 
> 赞同：0
> 
> 时间：2012-11-22T00:19:28.113
> 
> 标签：matlab

我有一个像这样已知（但长度可变）的结构-

```
1 0 1
0 1 1 
```

我想将此结构绘制为彩色方块-将每个 1 着色为绿色方块，将 0s 着色为红色方块

就像是

```
[green][red][green]
[red][green][green] 
```

在每个方块上添加一些可选文本会很好。

另外，我有另一个相同长度的数据结构，数字从 0.0 到 1.0 .. 类似于

```
0.99 0.09 1.0
0.09 0.87 1.0 
```

我想根据相应数字与 0 或 1 的接近程度来改变上图中红色和绿色的强度。

任何建议都是有帮助的。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:43:38.530

您可以将`colormap`矩阵显示为缩放图像后设置：

```
Z = [1 0 1; 0 1 1];
figure; imagesc(Z); 
colormap([1 0 0; 0 1 0]);
axis off; axis image; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:25:32.520

本质上，您希望将 2-d 结构转换为 3-d 结构，最后一个维度是 x3，每个 RGB 颜色一个维度。从这段代码开始，并使用它，直到它完成你想要的。

```
map=zeros(2,2,3);
map(:,:,1)=[1 1; 0 0];
map(:,:,2)=[1 0; 1 0];
map(:,:,3)=[0 0; 0 0];

figure;image(map); 
```

或者，您可以有一个颜色图，它将像素数转换为强度。我已经有一段时间没有这样做了，但我至少可以为你指出正确的方向。运行第一个命令，然后查看颜色图。您希望逐渐从绿色变为红色。将其格式化为您想要的格式，使用最后一个命令将其传回，然后看看您会得到什么。

```
cmap = colormap;
%You'll want to change cmap to meet your needs
imagesc([.1 .2; .8 .9]);
colormap(cmap); 
```

# c++ - 带有浮点数据的 C 数组在 Objective C 类中崩溃 (EXC_BAD_ACCESS)

> ID：13504170
> 
> 赞同：1
> 
> 时间：2012-11-22T00:20:21.813
> 
> 标签：c++, objective-c, c, audio, core-audio

我正在做一些音频处理，因此混合了一些 C 和 Objective C。我设置了一个类来处理我的 OpenAL 接口和我的音频处理。我已将类后缀更改为

。毫米

...如 Core Audio 书中的许多在线示例中所述。

我有一个在 .h 文件中声明并在 .mm 文件中实现的 C 风格函数：

```
static void granularizeWithData(float *inBuffer, unsigned long int total) {

    // create grains of audio data from a buffer read in using ExtAudioFileRead() method.

    // total value is: 235377
    float tmpArr[total];

    // now I try to zero pad a new buffer:
    for (int j = 1; j <= 100; j++) {
        tmpArr[j] = 0;
        // CRASH on first iteration EXC_BAD_ACCESS (code=1, address= ...blahblah)
    }
} 
```

奇怪的？？？是的，我完全不知道为什么这不起作用，但以下是有效的：

```
 float tmpArr[235377];

    for (int j = 1; j <= 100; j++) {
        tmpArr[j] = 0;
        // This works and index 0 - 99 are filled with zeros
    } 
```

有没有人知道为什么我不能声明一个大小为“total”且具有 int 值的数组？我的项目使用 ARC，但我不明白为什么这会导致问题。当我调试时打印'total'的值时，它实际上是正确的值。如果有人有任何想法，请帮忙，这让我发疯！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T00:26:03.137

问题是该数组被分配在堆栈上而不是堆上。堆栈大小是有限的，因此您无法`235377*sizeof(float)`在其上分配字节数组，它太大了。改用堆：

```
float *tmpArray = NULL;

tmpArray = (float *) calloc(total, sizeof(float)); // allocate it

// test that you actually got the memory you asked for

if (tmpArray)
{
  // use it

  free(tmpArray); // release it
} 
```

**请注意，您始终负责释放在堆上分配的内存，否则您将产生泄漏。**

在您的第二个示例中，由于大小是先验已知的，因此编译器将该空间保留在程序的静态空间中的某个位置，从而允许它工作。但是在您的第一个示例中，它必须即时执行，这会导致错误。但无论如何，在确保您的第二个示例有效之前，您应该尝试访问数组的所有元素，而不仅仅是前 100 个。

# c++ - gcnew Image CLI/C++ 时操作无效

> ID：13504174
> 
> 赞同：0
> 
> 时间：2012-11-22T00:20:33.097
> 
> 标签：c++, image, dll, command-line-interface

在构建图像时，我得到了关于`invalidOperationException`in的奇怪信息。`PresentationCore.dll``gcnew Image()`

我附上项目和JPG文件（可以放入`C:\`）它实际上无法以其他方式检查，因为项目（引用）的配置需要很长时间，并且只是复制代码不起作用。

[http://www.speedyshare.com/Vrr84/Jpg.zip](http://www.speedyshare.com/Vrr84/Jpg.zip)

我该如何解决这个问题？

![在此处输入图像描述](../Images/c8740634fe4c0b793c6e8a5577755a97.png)

* * *

```
 // Jpg.cpp : Defines the entry point for the console application.
    //

#include "stdafx.h"
#using <mscorlib.dll> //requires CLI
using namespace System;
using namespace System::IO;
using namespace System::Windows::Media::Imaging;
using namespace System::Windows::Media;
using namespace System::Windows::Controls;
int _tmain(int argc, _TCHAR* argv[])
{

    // Open a Stream and decode a JPEG image
        Stream^ imageStreamSource = gcnew FileStream("C:/heart.jpg", FileMode::Open, FileAccess::Read, FileShare::Read);

        JpegBitmapDecoder^ decoder = gcnew JpegBitmapDecoder(imageStreamSource, BitmapCreateOptions::PreservePixelFormat, BitmapCacheOption::Default);
        BitmapSource^ bitmapSource = decoder->Frames[0];//< --mamy bitmape

        // Draw the Image
        Image^ myImage = gcnew Image();//<----------- ERROR
        myImage->Source = bitmapSource;
        myImage->Stretch = Stretch::None;
        myImage->Margin = System::Windows::Thickness(20);
        //

        int width = 128;
        int height = width;
        int stride = width / 8;
        array<System::Byte>^ pixels = gcnew array<System::Byte>(height * stride);

        // Define the image paletteo
        BitmapPalette^ myPalette = BitmapPalettes::Halftone256;

        // Creates a new empty image with the pre-defined palette.
        BitmapSource^ image = BitmapSource::Create(
           width, height,
           96, 96,
           PixelFormats::Indexed1,
           myPalette,
           pixels,
           stride);

        System::IO::FileStream^ stream = gcnew System::IO::FileStream("new.jpg", FileMode::Create);
        JpegBitmapEncoder^ encoder = gcnew JpegBitmapEncoder();
        TextBlock^ myTextBlock = gcnew System::Windows::Controls::TextBlock();
        myTextBlock->Text = "Codec Author is: " + encoder->CodecInfo->Author->ToString();
        encoder->FlipHorizontal = true;
        encoder->FlipVertical = false;
        encoder->QualityLevel = 30;
        encoder->Rotation = Rotation::Rotate90;
        encoder->Frames->Add(BitmapFrame::Create(image));
        encoder->Save(stream);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:36:26.523

核心问题在那里：

> 调用线程必须是 STA [...]

您的主线程必须标记为*单线程单元*（简称 STA），WPF 才能正常运行。修复？添加`[System::STAThread]`到您的`_tmain`，从而通知运行时主线程必须是 STA。

```
[System::STAThread]
int _tmain(int argc, _TCHAR* argv[])
{
    // the rest of your code doesn't change
} 
```

# ruby-on-rails - Ruby on Rails 无法在应用程序中显示回形针头像

> ID：13504191
> 
> 赞同：2
> 
> 时间：2012-11-22T00:22:44.560
> 
> 标签：ruby-on-rails, devise, paperclip

我最近开始学习 ruby​​ on rails 并且我能够成功地创建一个应用程序并使用设计添加用户，还可以使用回形针向用户添加一个头像。

现在我遇到了如何在整个应用程序中显示头像的问题。头像仅显示在`http:localhost:3000/users/...`（在设计文件夹中）例如，但如果我尝试`http://localhost:3000/profile/`使用标签创建新页面、模型、控制器例如

```
<%= image_tag @user.avatar.url(:thumb) %> 
```

页面将无法加载并返回此错误

```
undefined method 'avatar?' for nil:NilClass 
```

这可能很简单，但我不知道如何解决它。

我的模型`user.rb`如下所示：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  validates_uniqueness_of :username

  has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" }

  attr_accessible :name, :username, :email, :password, :password_confirmation, :remember_me, :avatar
  attr_accessor :current_password
end 
```

我的控制器看起来像这样：

```
class UserController < ApplicationController
  def profile
  end
end 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T17:18:03.113

在 routes.rb 上，你应该有这样的东西：

```
match "profile" => "user#profile" 
```

在你的`UserController`，你应该有这样的东西：

```
class UserController < ApplicationController
  def profile
    @user = current_user
  end
end 
```

然后你就可以使用 `@user.avatar.url`. 另外，请注意，如果您没有登录用户， current_user 将为`nil`，然后您将遇到您描述的错误，因此请在您的控制器上添加如下内容：

```
class UserController < ApplicationController
  before_filter :authenticate_user!

  def profile
    @user = current_user
  end
end 
```

然后，当未经身份验证的帐户尝试访问`/profile`时，它将被重定向到登录表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:54:23.040

我还是 Rails 的新手，如果我错了，请纠正我，但我认为这可能对你有用。

```
class UserController < ApplicationController
  def profile
    @user = User.find(current_user.username)
  end
end 
```

# c# - 将包含 int 和 int[] 的结构从 C# 编组到 C++

> ID：13504195
> 
> 赞同：4
> 
> 时间：2012-11-22T00:23:51.863
> 
> 标签：c#, c++, visual-c++, pinvoke, marshalling

我有一个带有非托管代码和 C# UI 的 C++ DLL。有一个从 C++ DLL 导入的函数，它以我编写的结构作为参数。

在将由我编写的结构 (MyImage) 从 C# 编组到 C++ 之后，我可以访问其中的 int[] 数组的内容，但内容不同。我不知道我在这里缺少什么，因为我花了很多时间并尝试了一些技巧来解决这个问题（显然还不够）。

C# 中的 MyImage 结构：

```
[StructLayout(LayoutKind.Sequential)]
struct MyImage
{
    public int width;
    public int height;
    public int[] bits; //these represent colors of image - 4 bytes for each pixel
} 
```

C++ 中的 MyImage 结构：

```
struct MyImage
{
    int width;
    int height;
    Color* bits; //typedef unsigned int Color;

    MyImage(int w, int h)
    {
         bits = new Color[w*h];
    }

    Color GetPixel(int x, int y)
    {
          if (x or y out of image bounds) return UNDEFINED_COLOR;
          return bits[y*width+x];
    }
} 
```

以 MyImage 作为参数的 C# 函数声明：

```
[DLLImport("G_DLL.dll")]
public static extern void DisplayImageInPolygon(Point[] p, int n, MyImage texture, 
                                                  int tex_x0, int tex_y0); 
```

C++ 实现

```
DLLEXPORT void __stdcall DisplayImageInPolygon(Point *p, int n, MyImage img,
                                               int imgx0, int imgy0)
{
    //And below they have improper values (i don't know where they come from)
    Color test1 = img.GetPixel(0,0);
    Color test2 = img.GetPixel(1,0);
} 
```

因此，在调试问题时，我注意到 c++ 结构中的 MyImage.bits 数组包含不同的数据。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T01:06:42.873

由于该`bits`字段是指向在本机代码中分配的内存的指针，因此您需要像`IntPtr`在 C# 代码中一样声明它。

```
struct MyImage
{
    public int width;
    public int height;
    public IntPtr bits;
} 
```

如果您想访问 C# 代码中的单个像素，您需要编写一个`GetPixel`方法，就像您在 C++ 代码中所做的那样。

请注意，由于该`bits`字段是指向在本机代码中分配的内存的指针，因此我希望实际代码具有调用`delete[] bits`. 否则你的代码会泄露。

这也意味着您将需要在本机代码中创建和销毁实例，而永远不要在托管代码中这样做。这是您目前遵循的政策吗？我怀疑不是基于我可以在这里看到的代码。

您还需要重新考虑传递`struct`按值。当您调用该函数时，您真的要复制它吗？这样做意味着你有两个结构的实例，它们的`bits`字段都指向同一个内存。但是，谁拥有那段记忆呢？这个结构确实需要通过引用来传递。

我认为您的设计存在一些问题，但我看不到足够的代码，或者对您的问题了解得不够多，无法给您具体的建议。

* * *

在评论中，您声明您的主要目标是将这些位从 C# 代码传输到 C++ 代码。我建议你这样做：

```
MyImage* NewImage(int w, int h, Color* bits)
{
    MyImage* img = new MyImage;
    img->w = w;
    img->h = h;
    img->bits = new Color[w*h];
    for (int i=0; i<w*h; i++)
        img->bits[i] = bits[i];
    return img;
}

void DeleteImage(MyImage* img)
{
    delete[] img->bits;
    delete img;
}

void DoSomethingWithImage(MyImage* img)
{
    // do whatever it is you need to do
} 
```

在 C# 方面，您可以像这样声明它：

```
[DllImport(@"dllname.dll", CallingConvention=CallingConvention.Cdecl)]
static extern IntPtr NewImage(int w, int h, int[] bits);

[DllImport(@"dllname.dll", CallingConvention=CallingConvention.Cdecl)]
static extern void DeleteImage(ImtPtr img);

[DllImport(@"dllname.dll", CallingConvention=CallingConvention.Cdecl)]
static extern void DoSomethingWithImage(ImtPtr img); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T00:48:27.123

您应该尝试的第一件事是将 C# 代码也声明为 unsigned int 类型。一位可能被解释为您的 int 的符号。

所以在 C# 中是这样的（只需注意现在的位`uint[]`）：

```
[StructLayout(LayoutKind.Sequential)]
struct MyImage
{
    public int width;
    public int height;
    public uint[] bits; //these represent colors of image - 4 bytes for each pixel
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-22T09:54:53.633

您可以使用[PInvoke 互操作助手](http://clrinterop.codeplex.com/releases/view/14120)。您只需粘贴您的结构和函数声明，它就会为您生成 C# 代码。好几次都帮了我很多。

# macos - 使用 launchd 安排应用程序在 45 天后打开

> ID：13504196
> 
> 赞同：2
> 
> 时间：2012-11-22T00:24:17.973
> 
> 标签：macos, plist, schedule, launchd

我正在制作一个已启动的 plist 以在 45 天后打开某些应用程序，但是我被困在 Day 并想知道为什么不再支持 cron。还想知道是否可以通过卸载和加载 .plist 文件来重新启动“倒计时”以打开应用程序？提前感谢您的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T12:26:43.623

Use `StartCalendarInterval` in launchd plist file.

> **StartCalendarInterval** This optional key causes the job to be started every calendar interval as specified. Missing arguments are considered to be wildcard. The semantics are much like crontab(5). Unlike cron which skips job invocations when the computer is asleep, launchd will start the job the next time the computer wakes up. If multiple intervals transpire before the computer is woken, those events will be coalesced into one event upon wake from sleep.

# c# - 具有虚拟具体策略的策略模式

> ID：13504199
> 
> 赞同：1
> 
> 时间：2012-11-22T00:24:41.653
> 
> 标签：c#, design-patterns, strategy-pattern

[参考此处](https://stackoverflow.com/q/13503015/1255664)发布的问题，如果这是通过使用组合而不是继承来解决扩展类的可选行为的好方法，请您发表评论。`Plannable`行为在这里由策略模式扩展。

因此，类`Task`可以选择具有各种行为的任意组合。`Plannable`只是其中之一，因此继承在这里显然没有意义。

问题是当 Task 没有特定行为时该怎么办？我看到几种可能的方法：

1.  为每个任务实例化具体的策略，并在`Task`不是时实施“虚拟”策略`Plannable`（此替代方案如下所示）。在这种情况下，整个代码中都有奇怪的可为空`Start`和`Finish`变量...
2.  在案例任务中拥有`nullable`IPlanningStrategy 变量将不会被计划，并且仅当它被“提升”为时才使用具体的 Strategy 实例化`Plannable`。

替代方案（1）应该是这样的：

```
public class Task
{
    public string Title { get; set; }

    private IPlanningStrategy planningStrategy;

    public Task()
    {
        planningStrategy = new NoPlanStrategy();
    }

    public Task(IPlanningStrategy initialPlanningStrategy)
    {
        planningStrategy = initialPlanningStrategy;
    }

    public void SetPlanningStrategy(IPlanningStrategy newPlanningStrategy)
    {
        planningStrategy = newPlanningStrategy;
    }

    public DateTime? Start { get { return planningStrategy.Start; } }
    public DateTime? Finish { get { return planningStrategy.Finish; } }
}

public interface IPlanningStrategy
{
    public void CalculatePlan();
    public DateTime? Start { get; }
    public DateTime? Finish { get; }
}

// "Dummy" strategy, used when Task does not have Planning behaviour
//
public class NoPlanStrategy : IPlanningStrategy
{
    public void CalculatePlan() { }
    public DateTime? Start { get { return null; } }
    public DateTime? Finish { get { return null; } }
}

public class PlanStrategyA : IPlanningStrategy
{
    private int parameter1;
    private int parameter2;
    private DateTime? start;
    private DateTime? finish;

    public PlanStrategyA(int p1, int p2)
    {
        parameter1 = p1;
        parameter2 = p2;
        start = finish = null;
    }

    public void CalculatePlan()
    {
        // ... uses parameter1 & parameter2
        // ... to calculate start and finish
    }

    public DateTime? Start { get { return start; } }

    public DateTime? Finish { get { return finish; } }
}

public class PlanStrategyB : IPlanningStrategy
{
    public int parameter3;

    // ... the rest is similar to PlanningStrategyA

} 
```

现在我在这里看到不同的**非常重要**问题。我的每一个具体的 Strategy 类都包含，除了算法，它当然是为实现该算法的所有任务共享的，还有额外的参数，它只属于特定`Task`的 .

您可以想象`parameter1`为`Effort`（或者说，完成任务所需的剩余小时数），并说`parameter2`为`LastDate`（表示约束日期，即完成任务的最后允许日期）。这个参数自然属于特定`Task`的，但前提是它实现了这个特定`StrategyA`的。

似乎在`Task`课外实例化策略没有意义？或者这应该是某种`Factory`方法的工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:37:45.743

`Task`IMO，您在课堂上暴露了太多信息。我会这样做：

```
public class Task
{
    // what is title being used for?
    public string Title { get; set; }

    private IPlanningStrategy planningStrategy;

    public Task(IPlanningStrategy initialPlanningStrategy)
    {
        // Initialize it outside of constructor
        if(initialPlanningStrategy == null)
        {  
           throw new NullArgumentException(); // or return. 
        }
        planningStrategy = initialPlanningStrategy;
    }

    public void CalculatePlan(){
        // check null and return.
        planningStrategy.CalculatePlan();
    }

} 
```

您的客户不应该知道开始，结束，我不认为这是算法容器的责任。

此外，如果您的 NoPlanStrategy 没有做任何事情，为什么要引入它。去掉它。

# sql - 查看 EntityFramework 生成的 SQL 命令：Cast exception

> ID：13504203
> 
> 赞同：0
> 
> 时间：2012-11-22T00:25:15.303
> 
> 标签：sql, entity-framework

基于[this](https://stackoverflow.com/questions/1412863/how-do-i-view-the-sql-generated-by-the-entity-framework)和[this](https://stackoverflow.com/questions/137712/sql-tracing-linq-to-entities#138109)，我正在执行以下操作以获取 Entity Framework 5.0 生成的 SQL

```
var query = from s in db.ClassesDetails
            where s.ClassSet == "SetOne"
            orderby s.ClassNum
            select s.ClassNum;
var objectQuery = (System.Data.Objects.ObjectQuery)query; // <= problem!
var sql = objectQuery.ToTraceString(); 
```

但是在第二行我得到以下异常：

```
Unable to cast object of type 'System.Data.Entity.Infrastructure.DbQuery`1[System.Int16]' to type 'System.Data.Objects.ObjectQuery'. 
```

自从发布了这些 SO 答案后，有什么变化吗？我需要做什么才能将查询作为字符串？我们正在针对 Azure SQL 运行，因此无法运行通常的 SQL 分析器工具 :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T04:02:30.293

ObjectQuery 是在您使用 ObjectContext 时创建的。当您使用 DbContext 时，它会使用并创建 DbQuery。另外，请注意，这实际上不是 a `DbQuery`but `DbQuery<T>`。我相信要在拥有 DbQuery 时显示 SQL，您只需`.ToString()`在 DbQuery 实例上执行，因此不需要强制转换。请注意，参数值不会显示。最近在 EF6 中将参数值添加到了输出中 - 如果您需要这个，您可以尝试来自[http://entityframework.codeplex.com的最新夜间构建](http://entityframework.codeplex.com)

# sql-server-2008 - 我应该在事实表中的这些外键上放置一个非聚集索引吗

> ID：13504204
> 
> 赞同：3
> 
> 时间：2012-11-22T00:25:22.497
> 
> 标签：sql-server-2008, indexing, foreign-keys, data-warehouse, star-schema

# 外键配置文件

```
FK      Distinct Values      %
----    ---------------  ------
Id1     1                 0.1%
,Id2    4                 0.3%
,Id3    5                 0.3%
,Id4    6                 0.4%
,Id5    6                 0.4%
,Id6    95                6.1%
,Id7    97                6.2%
,Id8    1423             90.7% 
```

所有外键都已经组成了 clustered `Primary Key`。此事实表是包含 6 个维度的星型模式的一部分（Id 的 6,7 和 8 引用相同的日期维度）。

事实表目前大约有 1800 行（非常小），并且预计每个月都会增长这个数量。

**每个外键是否应该有自己的非聚集非唯一单列索引来促进连接？**如果是这样，为什么？

每个外键都将是其维度表中聚集索引（主键）的一部分。

如果应该在外键上放置索引，那么**在列的低基数的情况下应该将填充因子和填充索引设置为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:19:42.283

首先，我认为您不应该基于外键创建集群主键。聚集索引是组织磁盘上的数据，如果它是更好的

*   狭窄的
*   数字
*   递增（严格单调）

所以我认为最好在外键上创建一个唯一约束以使行唯一。或者在这些列上创建一个非聚集主键，然后在例如日期外键 (YYYYMMDD) 上创建一个聚集索引（但不是主键）。

通常外键在 Fact 表上被索引（非聚集，非唯一）以进行更快的搜索。但是有些人根本没有在维度模型上强制基数（ETL 负责参照完整性），因为主键 - 外键约束使 ETL 加载缓慢。

来自[文森特·雷纳尔迪](http://dwbi1.wordpress.com/2010/12/11/data-warehousing-interview-questions/)

> 1.  问题：如何索引事实表？并解释原因。{H}
> 
> > 答：索引所有暗键列，单独、非集群（SQL Server）或位图（Oracle）。暗键列用于连接到维度表，因此如果它们被索引，连接会更快。一个特殊的候选人会提出 3 个额外的建议：a) 单独索引事实键，b) 考虑在暗键组合上以正确的顺序创建覆盖索引，以及 c) 如果事实表被分区，则必须包含分区键在所有索引中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:09:18.660

您的个人资料与“％”列没有真正意义 - 为什么您要找到跨字段的不同值的“百分比”？您需要有关不同值分布的统计信息 - Id8 上 99% 的键是否相同？它们分布均匀吗？等等

**请注意，我在这里所说的一切都适用于更大的表格。对于 1800 行/月，索引可能会浪费您担心的空间和时间。**

@jrara 关于索引所有暗淡的“规则”是一个容易应用的规则，但如果你只这样做，你很容易犯错误。例如，我不想在我的 1 亿行客户维度上使用 Oracle 位图索引。

索引取决于查询对您的数据的样子。如果您正在对事实表进行全面扫描以对“摘要”报告执行聚合和分组，则索引将无济于事。当用户尝试过滤维度的属性时，它们会有所帮助，而该过滤器会导致您只需要从事实表中查找一小部分记录。你的桌子有一个主要的入口点吗？人们通常是否过滤“Id8”维度的属性，然后希望对其他维度的属性进行分组？

基本上，您的问题的答案是：

*每个外键是否应该有自己的非聚集非唯一单列索引来促进连接？*

一般情况下是可以的，只要维度表比较小，dim 键在事实表中分布比较均匀。通常使用索引访问来获取 99% 的事实表行会更糟糕。

*考虑到列的低基数，填充因子和填充索引应该设置为多少？*

将 FILLFACTOR 降低到 100% 以下*会*导致索引读取速度变慢，因为索引中有更多（空）页面供数据库读取。由于数据仓库是为*快速*选择而设计的，所以我真的不建议您调低填充因子。

That being said, in a few cases adjusting your FILLFACTOR may make sense. If the the fact table is *very* large (hundreds of GB / TB), and index rebuilds take hours, and you might only rebuild indexes once a month or even less. In these cases you need to figure out how much data (as a percentage) that you'll be adding to the table each day, and set the fillfactor accordingly.

# android - 通过短信或电子邮件发送联系人（电话号码）

> ID：13504209
> 
> 赞同：0
> 
> 时间：2012-11-22T00:25:46.867
> 
> 标签：android, contacts

我一直在开发一个应用程序。它允许来自有关联系人的信息的呼叫、短信等。现在我想通过短信或电子邮件附加联系人。这该怎么做？？预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:38:37.073

我想这些可以让你开始：

[短信](https://stackoverflow.com/questions/4967448/send-sms-in-android)

[蓝牙](http://code.google.com/p/android-bluetooth/)

[电子邮件](https://stackoverflow.com/questions/5401104/android-exporting-to-csv-and-sending-as-email-attachment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:26:10.253

你不应该在 Android 中这样想。这更像是安卓“分享”事物的方式。看看这个链接，你会得到它：[http ://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent](http://sudarmuthu.com/blog/sharing-content-in-android-using-action_send-intent)

当一个答案符合您的需要时，请随时接受它，这是人们在这里获得奖励的唯一方式。

# c# - 关闭第一个表格

> ID：13504212
> 
> 赞同：0
> 
> 时间：2012-11-22T00:26:08.020
> 
> 标签：c#, winforms

> **可能重复：**
> [当我关闭启动表单时，如何防止应用程序终止？](https://stackoverflow.com/questions/10769193/how-do-i-prevent-the-app-from-terminating-when-i-close-the-startup-form)

想象一个具有 2 个表单的应用程序，Form1 和 Form2。当我单击 Form1 中的按钮时，我想打开 Form2 并关闭 Form1，关闭而不是隐藏。我这样做的方式是：

```
_Form2 = new Form2();
_Form2.Show();
 this.Close();//or this.Dispose(); 
```

当我运行代码时，它会关闭 form1 并结束应用程序。我不确定，但可能是因为在我的 Program.cs 中我有`Application.Run(new Form1());`？或者这一行只意味着当应用程序启动时它应该加载Form1？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:37:56.097

有多种方法可以实现您想要的......这完全取决于您需要的微妙交互`Form1`以及`Form2`您希望如何组织序列。

一种方法是`Application.Run()`改用....但是`Application.Exit()`当您想关闭应用程序时必须使用....因为您需要指示消息循环和您的应用程序应该退出。

请注意，这是在您认为不再显示表单时对表单执行的任何“表单关闭”调用（即 .Close()）的补充。

*   [http://msdn.microsoft.com/en-us/library/ms157900.aspx](http://msdn.microsoft.com/en-us/library/ms157900.aspx)

这将允许你`Form1`最初显示......（因为你使用无模式`Show()`）......然后你可以关闭`Form1`并创建并显示辅助`Form2`......然后做`Application.Exit()`;

MSDN 中更复杂的示例，即`Application.Run(ApplicationContext)`上下文是，如果您有一个用例，您希望拥有多个表单，然后希望它在它们都关闭时退出。

*   [http://msdn.microsoft.com/en-us/library/ms157901.aspx](http://msdn.microsoft.com/en-us/library/ms157901.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T00:39:46.397

是的你是对的。Run 方法中提到的窗体是“主窗体”，如果你关闭它，你将关闭应用程序。如果要关闭 Form1，可以执行以下操作：

```
Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Form1 form = new Form1();
            form.Show();
            Application.Run(); 
```

关闭 Form1 并在按钮单击上打开 Form2 的代码：

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            this.Close();
            Form2 form = new Form2();
            form.Show();
        }
    } 
```

要退出应用程序，只需再添加一个按钮（或提供事件处理程序）并运行以下代码：

```
Application.Exit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T00:48:13.403

如果您只需要一系列表单，则可以让主线程处理该序列。

所以总的来说，你有：

```
static void Main()
{
    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1());
    Application.Run(new Form2());
} 
```

您需要做的就是关闭 Form1 以继续下一个：

```
private void button1_Click(object sender, EventArgs e)
{
    this.Close();
} 
```

# django - 如何在 uWSGI 和 Nginx (Mac OS X) 上安装 Django

> ID：13504216
> 
> 赞同：1
> 
> 时间：2012-11-22T00:26:29.777
> 
> 标签：django, nginx, installation, osx-lion

我正在尝试在 Mountain Lion 中安装所有内容，实际上所有内容都已安装，问题在于配置。

**进度：** MySQL DMG + MySQLdb 编译 + Python + brew nginx + brew uwsgi + pip install Django。

**配置：** 路径我的第一个项目：/Users/poly/Projects >> Django Project myproject/

现在，我试图做一千件事，但我还没有设法用 uwsgi 启动 nginx。

你能帮我一把吗？谢谢。

# c# - 在 .NET 中以编程方式运行 .ispac 在 MSTest 中失败

> ID：13504218
> 
> 赞同：0
> 
> 时间：2012-11-22T00:26:35.293
> 
> 标签：c#, .net, ssis

我需要在 TestMethod 中从 C# 运行 SSIS 包（一个 .ispac 文件）。我使用 Microsoft.SqlServer.Dts.Runtime.Project 对象加载 .ispac 文件，并从那里执行一个包。我的测试仅在 Resharper 和 MSTest 调试模式下通过。我需要让它在非调试模式下工作，以便我可以在 build-deploy-test 工作流程中运行测试。

在相同的解决方案下，我有 2 个项目。第一个项目具有 .ispac 文件的包装器。第二个是引用第一个项目的测试项目，调用第一个项目的方法运行SSIS包。.ispac 文件是一个外部资源。

知道为什么测试运行不一致吗？

谢谢

PS：我创建了一个模拟测试方法的控制台应用程序，但在调试和非调试模式下都没有问题。

# python - python/django for 循环和列表属性

> ID：13504220
> 
> 赞同：4
> 
> 时间：2012-11-22T00:26:41.867
> 
> 标签：python, django, list, for-loop

所以，我正在研究 Django Book 和 django 文档，但我无法理解这个例子：

```
<ul>
{% for athlete in athlete_list %}
    <li>{{ athlete.name }}</li>
{% endfor %}
</ul> 
```

这是关于模板的，我不知道如何编写上下文。如何从列表中获取名为“名称”的属性？如果我创建字典，则无法像本例中那样使用 for 循环。我已经这样编码了，但它不起作用：

```
athlete_list = {'name' = ['Athlete1', 'Athlete2', 'Athlete3']}
Context({'athlete_list':athlete_list}) 
```

如果我将 player_list 变量更改为普通列表（不是字典），模板中的“athlete.name”也将不起作用。我不认为这是一本书的错误，它可能很容易解决，但我无法理解。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T00:30:14.803

我怀疑这`athlete_list`是一个包含`Athlete`模型的 QuerySet 对象......（在任何地方都提到过吗？）。然后模型将有一个`.name`或`.age`或`.sport`或任何...

**更新**- 只是看了[http://www.djangobook.com/en/2.0/chapter04.html](http://www.djangobook.com/en/2.0/chapter04.html) - 这实际上似乎不是最好的例子......

要保持模板不变，您可以返回字典列表的上下文，例如：

```
[ {'name': 'bob'}, {'name': 'jim'}, {'name': 'joe'} ] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T03:04:15.593

如果你想保留模板，你应该在下面返回。

```
athlete_list = ({'name':'Athlete1'},{'name':'Athlete2'},{'name':'Athlete3'})

Context({'athlete_list':athlete_list}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T00:28:13.453

你的 player_list 实际上是一个字典

```
<ul>
{% for athlete_name in athlete_list.name %}
    <li>{{ athlete_name }}</li>
{% endfor %}
</ul> 
```

在模板中，您可以通过`.`而不是通过访问字典键`[]`

所以在你的模板中`{{ athleate_list.name }}`

将是一个字符串列表`# ['Athlete1', 'Athlete2', 'Athlete3']`

# php - 通过ajax在phonegap应用程序中显示sql数据

> ID：13504222
> 
> 赞同：0
> 
> 时间：2012-11-22T00:27:07.363
> 
> 标签：php, html, cordova, blackberry-simulator

美好的一天，伙计们......

我是 phonegap 的新手，但我想尽可能多地学习。我目前正在开发一个基本应用程序，它从数据库中接收数据并必须将其输出到 phonegap 应用程序上。

到目前为止，我所做的如下：在普通浏览器上，一切都按预期工作，数据按预期显示。当我通过cmd运行ant blackberry load-simulator时，我可以在手机浏览器上获得与普通浏览器相同的结果。

现在问题来了，当我继续使用应用程序并尝试打开一个我想在其中显示数据的页面时，什么都没有显示，我不知道为什么。

基本上发生的情况是，用户单击链接转到文章页面articles.html，此页面与articles.js 有关系，它只是向php 文件articles.php 发送ajax 调用，该文件检索数据从文章表。

我怎样才能在应用程序而不是浏览器上查看数据？这是我所有的代码。

```
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/script.js"></script>
    <script src="articles.js"></script>
    <title> Articles</title>
</head>
<body>
    <div class="app">

    <div id="heading" style="background: #dddddd repeat-x" >
       <center><img src="img/logo.png" height="90" width="340" border="ridged"/></center>
        </div>

<div class="content">

<a href="index.html" style="color: white; text-decoration: none"> <img src="img/back.png"width="50" value="Back" height="50"/> Back to home</a>
</div>
</div>

</body> 
```

以上是我的articles.html

```
$(document).ready(function() {
$.ajax({
        type: 'POST',
        url: './articles.php',
        dataType: 'jsonp',
        jsonp: 'jsoncallback',
        timeout: 5000,
        success: function(data){alert(data[0].title);//this alerts the tittle of the 1st record
            $('.content').append("<br />");
            for (var i = 0, len = data.length; i < len; i++) {
                       var code = data[i].title;
                       var desc = data[i].content.substring(0,100);
                       $('.content').append(code+'<br />'+desc+'<br /><br />success');
                   }
        },
        error: function(data){alert(data[0].title);
            $('.content').append("<br />");
            for (var i = 0, len = data.length; i < len; i++) {
                       var code = data[i].title;
                       var desc = data[i].content.substring(0,100);
                       $('.content').append(code+'<br />'+desc+'<br /><br />error');
                   }
        }
    });
 }); 
```

以上是我的articles.js，它将ajax 调用发送到一个php 文件。

```
<?php
header('Content-type: application/json');

$server = "localhost";
$username = "root";
$password = "";
$database = "myDb";

$con = mysql_connect($server, $username, $password) or die ("Could not connect: " . mysql_error());
mysql_select_db($database, $con);
$sql = "SELECT * FROM  articles ORDER BY article_id";
$result = mysql_query($sql) or die ("Query error: " . mysql_error());
$records = array();

while($row = mysql_fetch_assoc($result)) {
    $records[] = $row;
}

mysql_close($con);
echo $_GET['jsoncallback'] . '(' . json_encode($records) . ');';
?> 
```

这是我的articles.php

任何建议或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-27T00:11:12.803

我相信您必须在 AJAX 代码中指定 PHP 文件的完整 url。将其更改`url: './articles.php',`为类似`url: 'http://localhost/your_app_folder/your_php_file_ajax_processor.php'`. 希望这可以帮助。

# java - 表达式的类型必须是数组类型，但它解析为 BufferedImage

> ID：13504225
> 
> 赞同：2
> 
> 时间：2012-11-22T00:27:17.687
> 
> 标签：java, compiler-errors, bufferedimage

这真的很奇怪，错误在`textures[x]`.

```
表达式的类型必须是数组类型，但它解析为 BufferedImage

```

这里的代码有什么问题？

```
static BufferedImage textures[][] = new BufferedImage[20][20];

public static void loadTextures()
{
    try 
    {
        //Loads The Image
        BufferedImage textures = ImageIO.read(new URL("textures.png"));

        for (int x = 0; x < 1280; x += 1)
        {
            for (int y = 0; y < 1280; y += 1)
            {
                textures[x][y] = textures.getSubimage(x*64, y*64, 64, 64);
            }
        }

    } catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:32:52.747

您在此处创建一个新变量`textures`：

```
BufferedImage textures = ImageIO.read(new URL("textures.png")); 
```

这不是像`static`变量那样的二维数组。`textures[x][y]`在`for`-loop 中引用*了这个*变量，这解释了错误。重命名其中之一以解决问题。

顺便说一下，这称为*[变量遮蔽](http://en.wikipedia.org/wiki/Variable_shadowing)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:33:36.617

看起来模棱两可..将局部变量名称从更改`BufferedImage textures`为`BufferedImage texture`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T00:33:40.547

您正在重用您为数组指定的名称，用于您计划打包成单个元素的图像。您应该给它一个不同的名称以使其工作：

```
BufferedImage fullImage = ImageIO.read(new URL("textures.png"));

for (int x = 0; x < 1280; x += 1) {
    for (int y = 0; y < 1280; y += 1) {
        textures[x][y] = fullImage.getSubimage(x*64, y*64, 64, 64);
    }
} 
```

# java - 如何仅使用 java API 从简单的 java 应用程序中打印一组 PDF 文件（比如 3 个文件）

> ID：13504232
> 
> 赞同：1
> 
> 时间：2012-11-22T00:28:34.317
> 
> 标签：java, pdf, printing, awt

我遇到了一项与从 java 应用程序打印 PDF 文件相关的任务。

让我再次详细解释一下这个问题：如何仅使用 java API 即不使用任何第三方工具且不打开 PDF 文件，从简单的 java 应用程序打印一组 PDF 文件（比如 3 个文件）？

可能有用的信息是，我的打印机支持以下格式：

```
 image/gif; class="[B"
image/gif; class="java.io.InputStream"
image/gif; class="java.net.URL"
image/jpeg; class="[B"
image/jpeg; class="java.io.InputStream"
image/jpeg; class="java.net.URL"
image/png; class="[B"
image/png; class="java.io.InputStream"
image/png; class="java.net.URL"
application/x-java-jvm-local-objectref; class="java.awt.print.Pageable"
application/x-java-jvm-local-objectref; class="java.awt.print.Printable"
application/octet-stream; class="[B"
application/octet-stream; class="java.net.URL"
application/octet-stream; class="java.io.InputStream" 
```

我对执行将打印 PDF 文件的打印作业直接发送到打印机（在后台）的工作的代码感兴趣。

注意：打印应在后台完成。我/我的申请不应等待打印作业完成。我的意思是，无论打印作业是否完成，我的应用程序都应该异步工作？

# algorithm - 对象wrt成对相似性权重的最佳放置

> ID：13504235
> 
> 赞同：0
> 
> 时间：2012-11-22T00:29:10.450
> 
> 标签：algorithm, sorting, mathematical-optimization, placement

好的，这是一个抽象的算法挑战，它将保持抽象，因为这是我将要使用它的最高机密。

假设我们有一组对象 O = {o_1, ..., o_N} 和一个对称相似矩阵 S，其中 s_ij 是对象 o_i 和 o_j 的成对相关性。

还假设我们有一个具有离散位置的一维空间，可以放置对象（例如有 N 个连续的盒子或供人使用的椅子）。

有了一定的位置，我们可以测量从一个对象的位置移动到另一个对象的位置的成本，作为我们到达目标之前需要经过的框的数量乘以它们的成对对象相似度。在该位置之后或之前从一个位置移动到该位置的成本为零。

**想象一个例子**，对于三个对象，我们有以下相似度矩阵：

```
 1.0  0.5  0.8

 S = 0.5  1.0  0.1

     0.8  0.1  1.0 
```

那么，树框中对象的最佳排序显然是：

```
 [o_3] [o_1] [o_2] 
```

此排序的成本是从一个对象移动到所有其他对象的成本（计数框）的总和。所以这里我们只计算 o_2 和 o_3 之间的距离等于 1box * 0.1sim = 0.1，与以下相同：

```
[o_3] [o_1] [o_2] 
```

另一方面：

```
[o_1] [o_2] [o_3] 
```

成本 = 成本（o_1-->o_3）= 1box * 0.8sim = 0.8。

* * *

**目标**是确定 N 个对象在可用位置的位置，以使上述所有可能的对象对的总成本最小化！

**一个类比**是想象我们只有一排并排的桌子和椅子（就像盒子一样），你需要让 N 个人坐在椅子上。现在那些人有一些关系，那就是-让我们说-他们中的一个人想要与另一个人交谈的可能性有多大。这是站起来经过许多椅子并与那里的人交谈。当人们坐在两个连续的椅子上时，他们不需要移动就可以互相交谈。

那么我们如何才能放下这些 ppl 以使两个 ppl 之间的每个距离成本最小化。这意味着在夜间，客人步行的总距离接近最低限度。

贪婪搜索是……好吧，算了吧！我很想知道是否有这样的问题的标准公式，我可以找到一些文献，以及不同的搜索方法（例如组合优化领域的动态规划、禁忌搜索、模拟退火等）。

期待听到你的想法。

PS。[我的问题与这个线程Algorithm for ordering a list of Objects](https://stackoverflow.com/questions/11245135/algorithm-for-ordering-a-list-of-objects)有一些共同点，但我认为在这里它最好作为问题提出，并且可能略有不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T07:10:12.633

这听起来像是二次分配问题的一个例子。特长是因为位置只放在一条线上，但我认为这不会更容易解决。QAP 通常是 NP 难的。除非我误解了您的问题，否则您找不到在多项式时间内解决问题的最佳算法，而无需同时证明 P=NP。

如果实例很小，您可以使用精确的方法，例如分支和绑定。如果问题更困难，您还可以使用禁忌搜索或其他元启发式方法。我们在 HeuristicLab 中实现了 QAP 和一些元[启发式](http://dev.heuristiclab.com)算法。您可以在 GUI 中配置问题，只需将相似度和距离矩阵粘贴到适当的参数中即可。尝试从强大的禁忌搜索开始。这是一个较旧但仍然运行良好的算法。如果您想自己实现它，Taillard 在他的网站上也有它的 C 代码。我们的实现基于该代码。

QAP 已经发表了很多文章。更现代的算法将遗传搜索能力与局部搜索启发式结合起来（例如 Stützle IIRC 的遗传局部搜索）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:14:11.453

**让我用简单的排序方法**来帮助（我自己的）线程。

> *1\. 对相似度矩阵的上半部分进行排序。*
> *2\. 从具有最高相似度权重的对象对开始，将它们放在中心位置。*
> 
> *3\. 下一个对象可以放在它们的左侧或右侧。因此，每次您都可以选择放在左侧或右侧时对预先放置的对象具有最高成本的对象。转到第 2 步。*

选择第 3 步是因为如果您离开此对象并稍后放置，则此成本将再次成为剩余的最大成本，甚至更多（距离预先放置的对象更远）。因此，昂贵的展示位置应该尽早完成。

这太简单了，当然没有找到好的解决方案。

**另一种方法**是

> *1\. 从以某种方式生成的完整排序开始（随机或来自其他算法）*
> 
> *2.尝试使用对象对的“交换”来改进它。*

我相信局部最小值将是一个巨大的威慑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T17:08:22.047

这是已经发布的方法的变体。我认为这不是最佳选择，但它可能是一个开始。

```
Create a list of all the pairs in descending cost order.
While list not empty:
  Pop the head item from the list.
  If neither element is in an existing group, create a new group containing
     the pair.
  If one element is in an existing group, add the other element to whichever
     end puts it closer to the group member.
  If both elements are in existing groups, combine them so as to minimize
     the distance between the pair. 
```

组组合可能需要在组中颠倒顺序，并且数据结构应该被设计为支持这一点。

# ajax - JSF：只能使用带有 ajax 命令的 sessionscoped 视图link

> ID：13504239
> 
> 赞同：1
> 
> 时间：2012-11-22T00:29:28.257
> 
> 标签：ajax, jsf, commandlink, session-scope, view-scope

场景：我想通过使用 commandLink 使用 AJAX 在 JSF 中部分执行和呈现表单的一部分。由于这将通过 AJAX 完成，据我了解，ViewScoped 应该在 AJAX 请求之间保存页面中组件的值。

我在下面创建了一个示例，其中我有一个输入框，其中输入了订单名称，按下 commandLink（标记为“输入订单”），来自 inputText 的订单名称被添加到名为“订单”的 ArrayList 中，并且“订单”显示在 CommandLink 下方的数据表中。

来自 CommandLink 的 AJAX 请求执行将字符串值添加到“orderName”变量的 inputBox。AJAX 请求向 processDataTable() 方法发送一个 ActionEvent，该方法获取“orderName”值并将其添加到“orders”列表中。然后“orderName”为空。然后，AJAX 请求呈现带有为空的“orderName”的 inputText 组件，以及显示所有先前输入的订单的 DataTable，包括来自该请求的新添加的“orderName”。

问题：如果我使用的是 SessionScoped bean，则代码有效，但如果我使用 ViewScoped bean，则代码无效。我在代码中添加了 System.out.println() 以查看发生了什么。如果我使 bean SessionScoped，那么一切都按计划进行。inputText 值是通过 set 方法设置的，processOrder() 方法将“orderName”String 添加到“orders”List 中，重新渲染DataTable 以显示这个添加的名称。...

对于 ViewScoped bean，“orderName”值设置为 InputText 组件的值，但在 ProcessOrder() 方法内部为“null”，将“null”添加到“orders”列表，DataTable 没有除空外显示。

如果我在添加“orderName”之前使用 orders.add("Some Name") 在 processOrder() 中手动添加 orderName，则“orders”将保留 {"Some Order", "null"} 并更改 Orders仍然没有使用 AJAX 重新渲染。

所有都适用于 SessionScoped bean 而不是 ViewScoped bean？我还尝试了使用 CommandLink 而不是 ActionListener 的 Action 属性，同样的故事.. 适用于 SessionScoped 但不适用于 ViewScoped。

我在这里只能想到两件事，1）我错过了 AJAX 和 CommandLink 如何协同工作的关键点，以及 ViewScoped 应该如何工作（很有可能）；或 2) 出于某种原因，我如何使用 CommandLink 提交 AJAX 调用，每次单击它都会刷新页面，从而删除“订单”列表的先前值。但是，这仍然不能解释为什么如果我手动将订单输入到列表中，它仍然不会在 AJAX 请求中使用 ViewScoped bean 呈现，而是会使用 SessionScoped bean。

请帮忙！！？？

这是我的代码：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.enterprise.context.SessionScoped;
import javax.inject.Named;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ActionEvent;

@Named(value = "testBean")
@ViewScoped
public class DataTableTest implements Serializable {

  private String orderName;
  private List<String> orders = new ArrayList<String>();

  public DataTableTest () {}

  public String getOrderName() {
    return orderName;
  }

  public void setOrderName(String orderName) {
    this.orderName = orderName;
    System.out.println(orderName + " in setOrderName");
  }

  public List<String> getOrders() {
    return orders;
  }

  public String processDataTable(ActionEvent event) {
    System.out.println(orderName + " before getting added to orders list in     processDataTable");
    orders.add(orderName);      // adds the orderName to the orders list, so it can be     viewed in the DataTable
    orderName = null;           // nulling variable so it displays BLANK once again on      the form

    // Loops through and displays order names in the orders list
    for (String name : orders) {
      System.out.println(name + " in orders List");
    }
    return null;
  }
} 
```

这是我的 jsf 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

  <h:head>
    <title>Test</title>
  </h:head>
  <h:body>
    <h:form>
      <h:panelGrid columns="3">
        <h:outputText value="Enter Order Name >>" />
        <h:inputText id="orderName" value="#{testBean.orderName}" label="#    {testBean.orderName}" />
        <h:message for="orderName" />
      </h:panelGrid>
      <h:commandLink value="Enter Order" actionListener="#{testBean.processDataTable}">
        <f:ajax execute="orderName dataTable" render="orderName dataTable" />
      </h:commandLink>
      <h:dataTable id="dataTable" value="#{testBean.orders}" var="order">
        <f:facet name="header">Orders Entered Shown Below: </f:facet>
        <h:column>
          <h:outputText value="#{order}" />
        </h:column>
      </h:dataTable>
    </h:form>
  </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T10:04:43.143

您正在使用 CDI-Bean，但您正在使用的 @ViewScoped-Annotation 是 JSF 特定的，并且在 CDI-Bean 中不起作用。

您可以改用 JSF-managedBean

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

@ManagedBean(name="testBean")
@ViewScoped
public class DataTableTest implements Serializable { .. } 
```

如果更改为 managedBean 不适合您，请查看特定于 CDI 的 @ConversationScope 或 Seam，其中您有一个 @ViewScoped 注释，它也适用于 CDI-Beans。

# c# - 如何将我的对象列表绑定到列表框

> ID：13504241
> 
> 赞同：0
> 
> 时间：2012-11-22T00:29:43.293
> 
> 标签：c#, wpf, xaml, binding

我正在尝试将我的对象列表绑定到列表框。

这是对象列表定义：

```
class LoadFactory : INotifyCollectionChanged
{
    public ObservableCollection<Load> Loads = new ObservableCollection<Load>();

    public LoadFactory()
    {
        AddLoad(new Load(15));
        AddLoad(new Load(12));
        AddLoad(new Load(25));

    }

    public int LoadCount()
    {
        return Loads.Count();
    }

    public void AddLoad(Load load)
    {
        Loads.Add(load);
        if (CollectionChanged != null)
            CollectionChanged(this, new NotifyCollectionChangedEventArgs(new NotifyCollectionChangedAction()));
    }

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    public ObservableCollection<Load> GetLoads()
    {
        return new ObservableCollection<Load>(Loads);
    }
}

public class Load
{
    public static int LoadCount=0;
    public int Index = 0;
    public Load(float LoadMagnitude)
    {
        magnitude = LoadMagnitude;
        Index = LoadCount;
        LoadCount++;
    }

    private float magnitude;

    public float Magnitude
    {
        get
        {
            return magnitude;
        }
        set
        {
            magnitude = value;
        }
    }

    public float ToFloat()
    {
        return magnitude;
    }

    public override string ToString()
    {
        return magnitude.ToString() + " ft";
    }
} 
```

这是我的 XAML：

```
<Window x:Class="Sunny3.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Sunny3"
    Title="MainWindow" Height="500" Width="1000">
<Grid>
        <Grid Name="motherGrid">
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Button Grid.Row="1" Click="Button_Click_1">Hello</Button>
        <ListBox Grid.Row="2" ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <DataTemplate.Resources>
                        <Style TargetType="TextBox">
                            <Setter Property="Margin" Value="3"></Setter>
                            <Setter Property="FontSize" Value="20"></Setter>
                            <Setter Property="Width" Value="70"></Setter>
                            <Setter Property="Foreground" Value="Blue"></Setter>
                        </Style>
                    </DataTemplate.Resources>
                    <StackPanel>
                        <Grid>
                            <TextBox Text="{Binding Path=.}"></TextBox>
                        </Grid>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Grid> 
```

而我背后的代码：

```
public partial class MainWindow : Window
{
    LoadFactory LF;

    public MainWindow()
    {
        LF = new LoadFactory();
        InitializeComponent();
        this.DataContext = LF.Loads;
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        Load newone = new Load(154);
        LF.AddLoad(newone);
    }
} 
```

问题是我似乎无法将负载绑定到文本框。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:25:35.383

您需要将 Loads 设为属性，而不是字段。

```
public ObservableCollection<Load> Loads { get; set; }

public LoadFactory()
{
    Loads = new ObservableCollection<Load>();
    AddLoad(new Load(15));
    AddLoad(new Load(12));
    AddLoad(new Load(25));
} 
```

文本框绑定应该是加载类中的一个属性。

```
<TextBox Text="{Binding Path=Magnitude}"></TextBox> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:44:22.040

您可以尝试直接绑定到可观察的集合

```
<ListBox Grid.Row="2" ItemsSource="{Binding Loads}"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:14:00.890

首先，您是否尝试过在不修改 ListBox ItemTemplate 的情况下对其进行测试？

让我们看看您的 DataContexts。在 MainWindow 构造函数中，您有一个 LoadsFactory 实例，但您将“Loads”属性设置为 Window.DataContext，而不是实例本身。然后在 ListBox 中将 ItemsSource 绑定到它的当前 DataContext。这样，Listbox.ItemsSource 就绑定到一个 ObservableCollection。美好的。

由于您的 LF 似乎是您的主要 ViewModel，将其设置为 MainWindow.DataContext 然后将 ListBox.ItemsSource 绑定到 Loads 属性是否更有意义？

如果您不打算绑定到 LF，那么对 LF 实施 INotifyCollectionChanged 有什么意义？此外，我相信仅在对象上实现 INotifyCollectionChanged 并不能使其可用作项目源。它首先要实现 IEnumerable 或其他一些集合变体（IEnumerable、IList 等）。

# javascript - 如果 2 个元素中的任何一个发生更改，我如何触发此更改功能？

> ID：13504248
> 
> 赞同：0
> 
> 时间：2012-11-22T00:31:14.610
> 
> 标签：javascript, jquery, onchange

如果“.ranking”或“.complaint select”发生更改，如何触发此功能？

当用户选择投诉并对问题的重要性级别进行排序时，此更改功能会在“increase_priority1”中添加和/或删除值。目前，它仅在“排名”更改时触发，因此如果用户更改问题而不更改重要性级别，则不会相应地更改值。

```
var $increase_priority1 = $(".increase_priority1");
// If value is "Shoulders", complaint was Shoulders too small (select name=Shoulders value=Too_small) and it was assigned a level 1 priority (select class="ranking shoulders" value=1). 
// var's for other issues and priority levels go here

$(".ranking, .complaint select").change(function () {
   var name = $(this).data("name"); //get priority name    

   if ($(".complaint select").val() === "Too_small" && $(this).val() == 1 && !$(this).data("increase_priority1")) {
       //rank is 1, and not yet added to priority list
       $("<option>", {
           text: name,
           val: name
       }).appendTo($increase_priority1);
       $(this).data("increase_priority1", true); //flag as a priority item
   }
   if ($(this).data("increase_priority1") && ($(this).val() != 1 || $(".complaint select").val() != "Too_small")) {
       //is in priority list, but now demoted
       $("option[value=" + name + "]", $increase_priority1).remove();
       $(this).removeData("increase_priority1"); //no longer a priority item
   }
   // Similar If Statements to set & unset other elements go here
}); 
```

有多个投诉和排名元素，反映了客户投诉的各个领域，并以 1 - 5 的等级进行排名。

小提琴在上下文中显示了这一点：http: [//jsfiddle.net/chayacooper/vWLEn/168/](http://jsfiddle.net/chayacooper/vWLEn/168/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:32:47.227

像这样试试

```
$(".ranking, .complaint select").change(function() {
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:33:13.650

如果您重组代码可能会更容易。这个怎么样：

**HTML**：

```
<label for="priority1Issues">First Priority</label>
<select id="priority1Issues" class="priorityIssue" multiple></select>

<label for="priority2Issues">Second Priority</label>
<select id="priority2Issues" class="priorityIssue" multiple></select>

<br />
<div class="complaint">
    <label for="shoulders">Shoulders</label>
    <select id="shoulders" class="complaintOpt complaintItem">
        <option value="Null">Select</option>
        <option value="too_big">Too Big</option>
        <option value="too_small">Too Small</option>
    </select>

    <label for="shouldersRanking">Ranking</label>
    <select id="shouldersRanking" class="complaintOpt complaintRanking">
        <option value="Null">Select</option>
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
</div> 
```

现在您可以使用`<div>`with 类`complaint`来选择性地定位它的内容：

**JavaScript**：

```
$('.complaint select.complaintOpt').change(function() {
    var $container = $(this).parent(),
        $item = $container.find('.complaintItem'),
        itemId = $item.attr('id'),
        itemVal = $item.val(),
        itemText = $item.find('option[value=' + itemVal + ']').html(),
        rank = $container.find('.complaintRanking').val();

    // Ignore if not a complete complaint
    if((itemVal == 'Null') || (rank == 'Null')) {
        return;
    }

    // Remove any existing complaint (using the CSS class to target the correct option)
    $('select.priorityIssue option.' + itemId).remove();

    // Add new complaint (we include a CSS class to make it easier to refer to this
    //   particular type of complaint later, if necessary)
    $('#priority' + rank + 'Issues')
        .append($('<option>' + itemText + '</option>').addClass(itemId));
}); 
```

您现在应该能够复制其他项目的“投诉 div”（只需确保更改`<select>`新元素的 ID `div`）。这里有一个例子：http: [//jsfiddle.net/6YnQd/](http://jsfiddle.net/6YnQd/)

# java - 未调用 GWT 历史 onValueChange()

> ID：13504249
> 
> 赞同：1
> 
> 时间：2012-11-22T00:31:19.007
> 
> 标签：java, gwt, gwt-history

我在一个实现这个类的类中有一个方法`ValueChangeHandler<String>`是从方法中初始化的，`onModuleLoad()`就像这样

```
mainController = new MainController();
History.addValueChangeHandler(mainController);
mainController.initialise(History.getToken()); 
```

该`initialise()`方法如下所示；

```
public void initialise(String initialToken) {
    if (initialToken.equals("")) {
        History.newItem(String.valueOf(HistoryTokens.MAIN_PAGE), true);
    } else {
        History.newItem(initialToken, true);
    }
} 
```

当应用程序以空白历史令牌启动时，即按下*启动默认浏览器*`onValueChange()`时，调用该方法，在应用程序运行时更改 url 调用该`onValueChange()`方法。

但是，在 URL 中带有标记的空白浏览器选项卡中输入 URL，即`http://127.0.0.1:8888/MyApp.html?gwt.codesvr=127.0.0.1:9997#mjh&jdfhfh=786543`，不会调用该`onValueChange()`方法。当我到达声明的`History.newItem(initialToken, true);`一部分时，我很困惑。`if`我认为这将确保`onValueChange()`被调用。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:41:06.647

您应该始终`History.fireCurrentHistoryState()`在 GWT onModuleLoad() 的末尾调用 。我认为这应该可以解决您的问题。

问题是第一个历史事件（比如加载 page.com/#xyz 时）没有被 ValueChangeHandler 捕获，你必须用`History.fireCurrentHistoryState()`

# c# - 无法对非静态方法进行静态引用

> ID：13504250
> 
> 赞同：0
> 
> 时间：2012-11-22T00:31:20.413
> 
> 标签：c#, java, main

> **可能重复：**
> [无法对非静态方法进行静态引用](https://stackoverflow.com/questions/4969171/cannot-make-a-static-reference-to-the-non-static-method)

Java 是我的第一堂编程课。我们学习了 OOP 的基础知识，但我从来没有在课堂上提出过这个问题。在我的下一个编程语言 C# 中，我们使用了 Visual Studio，但这个问题也从未出现过。你如何摆脱 main 方法来访问其他类？我回顾了我在课堂上编写的 java 程序，看起来所有方法都是静态的。在 c# 中，我制作了许多程序，而没有使用单一的静态方法。有人可以告诉我如何进行这项工作吗？我正在尝试用 Java 重写我用 C# 编写的程序，但我似乎无法弄清楚如何摆脱 main。这是带有 main 方法的第一个类：

```
import javax.swing.JFrame;
import javax.swing.SwingUtilities;

public class DeluxKenoMainWindow extends JFrame 
{
    private Numbers gameNumbers;

   public DeluxKenoMainWindow()
   {
    initUI();   
   }

   public final void initUI()
   {
     setLayout(null);

    int xCoord = 85;
     int yCoord = 84;
     Button[] button = new Button[80];
     for(int i = 0; i<80; i++)
     {
         String buttonName = "button" + i;
        if(i % 10 == 0)
        {
            xCoord = 12;
            yCoord +=44;
        }

        if(i % 40 == 0)
            yCoord += 10;

         button[i] = new Button(buttonName, xCoord, yCoord, i+1);
         xCoord += 42;
         getContentPane().add(button[i]);
     }

     getContentPane().add(new Game(gameNumbers));
     getContentPane().add(new AnimatedGraphics());
     getContentPane().add(new BackgroundImage());

     setTitle("Delux Keno");
     setSize(600,600);

     setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     setLocationRelativeTo(null);

   }

   public void startGame()
   {
       do
       {
           Boolean[] pickedNumbers = gameNumbers.getNumbers();
       }while (gameNumbers.numbersSet = false);
   }

   public static void main(String[] args)
   {
     startGame();
    SwingUtilities.invokeLater(new Runnable()
    {
        public void run()
        {
            System.setProperty("DEBUG_UI", "true");
            DeluxKenoMainWindow ex = new DeluxKenoMainWindow();
            ex.setVisible(true);

        }
    });

   }

   } 
```

这是我要访问的课程：

```
import java.util.Random;

public class Numbers<syncronized> {

    private volatile Boolean[] computerNumbers = new Boolean[80];

    private static final Object OBJ_LOCK = new Object();

    public volatile Boolean numbersSet;

    public void setNumbers()
    {

        synchronized(OBJ_LOCK)
        {
            int i = 0;
            Random randy = new Random(System.currentTimeMillis());

            do{
                int testNum = randy.nextInt(80);

                if(computerNumbers[testNum] = false)
                {
                    computerNumbers[testNum] = true;
                    i++;
                }

            }while(i < 20);

            numbersSet = true;
        }
    }

    public Boolean[] getNumbers()
    {
        synchronized(OBJ_LOCK)      
        {
            Boolean[] returnComputerNumbers = new Boolean[80];
            for(int i = 0; i < computerNumbers.length; i++)
            {
                returnComputerNumbers[i] = computerNumbers[i];
                computerNumbers[i] = false;
            }
            return returnComputerNumbers;

        }
    }

} 
```

我确信有一个简单的解决方法，但我似乎找不到它。我确实在 stackoverflow 和谷歌上寻找答案，但这些对我来说都没有意义。谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:35:18.743

由于`main`方法是静态的，每当它尝试从任何其他类（包括包含方法 main 本身的类）访问成员变量或方法时，他需要对象的合格实例或对象本身是静态的，您可以解决它通过声明

```
private static Numbers gameNumbers; 
```

所以 gameNumbers 不会是每个实例的实例变量，`DeluxKenoMainWindow`而只是一个可以从静态上下文访问的实例。

实际上有很多解决方案可以解决您的问题（哪些应该是静态的，哪些不是）所以它主要取决于您的需求，只需遵循要求**从静态上下文访问的所有内容都是静态的或附加到对象的特定实例的**原则.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:34:36.373

您应该创建该类的实例`DeluxKenoMainWindow`以使用其实例方法。利用：

```
new DeluxKenoMainWindow().startGame(); 
```

或者

```
DeluxKenoMainWindow d = new DeluxKenoMainWindow()
d.startGame(); 
```

反而！

# ios - 如何在 Master-Detail 模板中使用 UIButton 而不是 Barbutton

> ID：13504254
> 
> 赞同：1
> 
> 时间：2012-11-22T00:31:44.273
> 
> 标签：ios, xcode, uisplitviewcontroller, master-detail, popover

我想在主从应用程序模板中使用自定义 UIButton 而不是 BarButton。

请给我建议。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:53:51.663

您可以使用 initWithCustomView 在 UIBarButtonItem 中使用任何 UIView：

[http://developer.apple.com/library/ios/documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarButtonItem/initWithCustomView](http://developer.apple.com/library/ios/documentation/uikit/reference/UIBarButtonItem_Class/Reference/Reference.html#//apple_ref/occ/instm/UIBarButtonItem/initWithCustomView)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:56:05.847

成功解决问题！！！！

我的代码是：

```
-(IBAction)click_MenuButton:(id)sender
{

    [self.masterPopoverController presentPopoverFromRect:[sender frame] inView:self.view  permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:11:24.150

或者您可以简单地在 xib 中创建一个 UIToolBar，然后将一个 UIButton 拖到它上面。将自动创建带有嵌入式 UIButton 的 UIBarButtonItem。

# ruby - 使用 Ruby Sequel 返回原始 sql 的模型实例

> ID：13504255
> 
> 赞同：4
> 
> 时间：2012-11-22T00:31:46.253
> 
> 标签：ruby, sequel

有没有办法让 Sequel 返回模型而不是原始 sql 的哈希？

```
class Post < Sequel::Model
 def self.recent
  db["some sql goes here"].all #would like models returned here instead
 end
end 
```

希望这是有道理的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T16:21:48.270

```
class Post < Sequel::Model
 def self.recent
  with_sql("some sql goes here").all
 end
end 
```

# c# - POST 到 Json webervice 返回错误 500

> ID：13504257
> 
> 赞同：0
> 
> 时间：2012-11-22T00:31:55.760
> 
> 标签：c#, json, web-services, post

我有标准的 asmx webservice 返回 Json：

```
private void ReturnUser(string name)
{
    User user = new User(name);
    DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(T));
    MemoryStream stream = new MemoryStream();
    serializer.WriteObject(stream, @object);
    string jsonString = Encoding.UTF8.GetString(stream.ToArray());
    stream.Close();

    HttpContext.Current.Response.AddHeader("ContentType", "application/json");
    HttpContext.Current.Response.ContentEncoding = Encoding.UTF8;
    HttpContext.Current.Response.Write(jsonString);
    HttpContext.Current.Response.End();
} 
```

另一方面，我想尝试 webservice 正在运行，所以我尝试调用 POST：

```
string data = "name=test";
byte[] dataStream = Encoding.UTF8.GetBytes(data);

WebRequest request = WebRequest.Create("http://tempuri.org/External.asmx?op=ReturnUser");
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
request.ContentLength = dataStream.Length;
Stream reqStream = request.GetRequestStream();
reqStream.Write(dataStream, 0, dataStream.Length);
reqStream.Close();
WebResponse response = (HttpWebResponse)request.GetResponse();

Stream stream = response.GetResponseStream();
StreamReader reader = new StreamReader(stream);
string json = reader.ReadToEnd();
stream.Close();
reader.Close();

Console.Write(json);
Console.Read(); 
```

但我收到错误 500。从浏览器中运行的 web 服务就像一个魅力:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:43:18.923

在许多服务器上，500 系列错误是安全或权限错误。由于您收到 500 错误，因此您至少可以完全连接到服务器。

显然，您的代码永远不会被调用，因为它无法生成 500 错误——因此您所依赖的服务器层正在执行此操作。这闻起来像权限或安全性。

服务器应该发回说明正在发生的事情的文本。检查响应正文以获取更多信息。它也可能具有帮助的本地日志记录。

我不得不用 .NET 代码解决类似的问题。我需要通过 HTTP 从服务器获取信息，但它需要身份验证。我无法使用任何集成的安全方法，例如 Kerberos 或基本身份验证，因为我使用的服务器使用了基于 cookie（有时称为基于表单）的身份验证。

如果您有这个问题，这可能会有所帮助： [.NET - Consuming HTTP services on (Domino) server with form based authentication](https://stackoverflow.com/questions/8731857/net-consuming-http-services-on-domino-server-with-form-based-authentication)

我的服务器是 Domino，但这个想法适用于任何 HTTP 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T08:43:03.953

试试这个，

```
WebRequest request = WebRequest.Create("http://tempuri.org/External.asmx");
request.Headers.Add("SOAPAction", "\"http://tempuri.org/ReturnUser\""); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T16:22:05.697

最后，我解决了这个问题，可能对其他人有帮助：

```
string data = "name=test";
byte[] dataStream = Encoding.UTF8.GetBytes(data);

WebRequest request = WebRequest.Create("http://tempuri:org/External.asmx/ReturnUser");
request.Method = "POST";
request.ContentType = "application/x-www-form-urlencoded";
Stream stream = request.GetRequestStream();
stream.Write(dataStream, 0, dataStream.Length);
stream.Close();
WebResponse response = request.GetResponse();

Stream respStream = response.GetResponseStream();
StreamReader reader = new StreamReader(respStream);
string json = reader.ReadToEnd();
stream.Close();
reader.Close(); 
```

谢谢大家

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-23T09:43:25.933

Web 服务需要使用 POST 请求明确指定的表单操作值。因此，请尝试将表单“操作”网址添加到您的 POST 请求中。

# tcl - tcl 期望范围

> ID：13504258
> 
> 赞同：0
> 
> 时间：2012-11-22T00:32:04.577
> 
> 标签：tcl, expect

由于 if 块作用域，下面的设置`if`似乎没有生效：

```
 16 if {[string compare "$DEBUG" "ON"]!=0} {
 17     exp_internal 1
 18 }
 19 Rest of code that want the debug to be ON. 
```

有没有办法使设置全局化，因为其余代码取决于它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:21:37.783

```
if { "$DEBUG" == "ON" } {
    exp_internal 1
} 
```

处理您可能希望将`-d`选项传递给期望二进制文件的全局设置。根据手册页：

> 此标志与Expect脚本开头的“exp_internal 1”效果相同，加上打印Expect的版本

# actionscript-3 - AS3 在滑块值上播放声音

> ID：13504261
> 
> 赞同：0
> 
> 时间：2012-11-22T00:32:20.703
> 
> 标签：actionscript-3

是否可以？。我对 ActionScript 3 很陌生，并且一直在玩滑块组件。我已经设置了一个带有图像的滑块，并设置了一个声音来播放，所以如果值大于 0 它将播放，如果它大于 4 它将停止。然而，当我导出它时，它没有出现任何错误。我确定我必须将 event.value 更改为其他内容而不是数字。或者更确切地说使用另一个事件，但我不确定..所以我认为如果你站在这些图像之间，mp3 会继续播放，而不是在它击中的每个值上重新启动。这就是我所拥有的

* * *

```
function changeHandler(event:SliderEvent):void { 
        aLoader.source = "pic"+event.value+".jpeg";

}

function music(event:SliderEvent):void {
    var mySound:Sound = new tes1();
    var myChannel:SoundChannel = new SoundChannel();
    mySound.load(new URLRequest("tes1.mp3"));

        if (event.value > 0 || event.value > 4 ){
            myChannel = mySound.play();
        }

        else{
            myChannel.stop();
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:22:02.720

您将在每个滑块事件中创建一个新的声道，如果值超出所需范围，则停止该新声道。但它一开始并没有播放任何声音。

您可能想要的是将声音通道存储在事件处理程序之外，并且当值在范围内跳跃时可能不会重播声音：

```
slider.addEventListener(SliderEvent.CHANGE, music);

// Stores the sound channel between slider movements.
var myChannel:SoundChannel = new SoundChannel();
var isPlaying:Boolean = false;

function music(event:SliderEvent):void {
    var mySound:Sound = new tes1();
    mySound.load(new URLRequest("tes1.mp3"));  

    if (event.value > 0 || event.value > 4) {

        // Check if we are already playing the sound and, if yes, do nothing
        if (!isPlaying) {
            myChannel = mySound.play();
            isPlaying = true;
        }

    } else {
        myChannel.stop();
        isPlaying = false;
    }
} 
```

因此，当值超出所需范围时，它停止播放*最后一个声音*，当值在范围内移动时，它只是继续播放而不是重新开始。

# sql - SQL CASE 与否？

> ID：13504263
> 
> 赞同：1
> 
> 时间：2012-11-22T00:32:31.427
> 
> 标签：sql, case

我正在尝试创建一个包含客户信息的数据库背面/正面，信息范围从约会和笔记等，因为我们是咨询服务，如果您错过（dna）3 个会话，您从技术上退出我们的服务我想要的是自动化这个过程-帮助我是一个自学成才的新手，我正在尝试使用“SELECT CASE”来做到这一点，但这里不知道

```
id | nhi    | service | type | length | contactdate | notes
1  |PEB8132 | aod     | t32  | 20     | 2012-11-20  | notes go here 
```

这是我的桌子，当他们不参加时，长度变成了 dna，我想在 3 次尝试失败后用它来标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:38:28.937

您想将所有具有 [length] = 'dna' 的人分组在一起，显示他们拥有多少 dna 的计数。

您还希望将其限制为 'dna' > 3，但不能在`WHERE`子句中使用聚合，因此我们使用`HAVING`.

您可以在`SELECT`语句中添加更多列，但您还需要将它们添加到`GROUP BY`.

```
SELECT nhi, count([length]) AS dna
FROM yourTable
WHERE [length] = 'dna'
GROUP BY nhi
HAVING count([length]) > 3 
```

如果您想返回所有记录，而不仅仅是 [length]='dna' 的记录，那么您可以使用 CASE。

```
SELECT nhi, SUM(CASE WHEN [length]='dna' THEN 1 ELSE 0 END) AS dna
FROM yourTable
GROUP BY nhi 
```

这假设`nhi`是用户的 id，这是您识别此人的方式。

额外阅读：[GROUP BY](http://www.w3schools.com/sql/sql_groupby.asp) , [HAVING](http://www.w3schools.com/sql/sql_having.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:48:08.993

这个在 Oracle 中工作。

```
select nhi ,sum(case when length='dna' then 1 else 0 end) dna_count 
from table 
group by nhi  
having sum(case when length='dna' then 1 else 0 end)>3; 
```

# asp.net - 查询数据库时出现 InvalidCastException，如果查询被复制到数据库上的新查询中，它会成功运行

> ID：13504266
> 
> 赞同：0
> 
> 时间：2012-11-22T00:32:47.213
> 
> 标签：asp.net, vb.net, sqlconnection

当点击提交按钮时，在我的应用程序页面上，来自上述表单的信息将被存储到数据库中。运行程序时出现此错误，但如果我要使用断点并复制 SQLtext 字符串，则将此代码粘贴到数据库管理器上的新查询中，它可以工作。错误总是显示以下内容，但“速度”根据 ddlDrugs 中的值而有所不同（例如，如果我们选择酒精，错误会显示从字符串“酒精”到类型“整数”的转换无效）：

```
Conversion from string "Speed" to type 'Integer' is not valid. 
```

有谁知道为什么会这样？ddlDrugs 是一个下拉列表，其中使用 ddlDrugType 更改时触发的回发填充。下面首先列出的是点击提交按钮时的 sub，然后是绑定下拉列表的函数。

```
 Protected Sub btnSubmit_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnSubmit.Click
    Dim objGetConnInfo As New ConnInfo
    Dim strConn As String
    strConn = objGetConnInfo.GetConnString
    Dim objConn As SqlConnection
    objConn = New SqlConnection(strConn)
    Dim myCmd As SqlCommand
    myCmd = New SqlCommand
    myCmd.Connection = objConn
    myCmd.CommandType = CommandType.Text
    Dim ds As SqlClient.SqlDataReader
    objConn.Open()
    Dim fName As String = txtfName.Text
    Dim lName As String = txtlName.Text
    Dim DOB As String = ddlDOBmonth.SelectedValue & "/" & ddlDOBday.SelectedValue & "/" & ddlDOByear.SelectedValue
    Dim sexChoice As Integer = rdoSex.SelectedIndex
    Dim sex As String
    If sexChoice = 0 Then
        sex = "m"
    ElseIf sexChoice = 1 Then
        sex = "f"
    End If
    Dim SSN As String = txtSSN.Text
    Dim address As String = txtAddress.Text
    Dim city As String = txtCity.Text
    Dim state As String = ddlState.SelectedValue
    Dim zip As String = txtZip.Text
    Dim phone As String = txtPhone1.Text
    Dim cellPhone As String = txtPhone2.Text
    Dim altPhone As String = txtPhone3.Text
    Dim EC As String = txtECname.Text
    Dim relationshipIndex As Integer = ddlECrelationship.SelectedValue
    myCmd.CommandText = "Select Name from Relationships where ID = " & relationshipIndex
    Dim relationship As String = myCmd.ExecuteScalar

    Dim ECphone As String = txtECphone.Text
    Dim findRRindex As Integer = ddlHowRR.SelectedValue
    myCmd.CommandText = "Select Name from foundRR where ID =" & findRRindex
    Dim findRR As String = myCmd.ExecuteScalar
    Dim rush As String
    If chkRush.Checked = True Then
        rush = "1"
    Else
        rush = "0"
    End If

    Dim reason As String = txtReason.Text
    Dim drugType As String = ddlDrugType.SelectedValue
    Dim drugIndex As Integer = ddlDrug.SelectedValue
    myCmd.CommandText = "Select Drug from " & drugType & " where Id = " & drugIndex
    Dim drugObj As Object = myCmd.ExecuteScalar
    Dim drug As String = ddlDrug.SelectedItem.Text

    Dim previous As String = txtPrevTreatment.Text
    Dim dateCompleted As String = ddlDOCmonth.SelectedValue & "/" & ddlDOCdate.SelectedValue & "/" & ddlDOCyear.SelectedValue
    Dim treatmentRep As String = txtTreatmentRep.Text
    Dim test As String = ddlDrug.SelectedValue

    '                        insert into Clients values ('mike','abramowitz','9/12/1986', 'm', 187664309, '2132 mather way',                               'elkins park', 'pa', 19027, '2222222222','3333', '4', 'dad', 'mom',                                                            '55', 'magic', 0, 'need it', 'drug type',                                              'pot', 'none', '9/12/1988', 'tim')
    Dim SQLtext As String = "exec insertClient '" & fName & "','" & lName & "','" & DOB & "', '" & sex & "'," & SSN & ", '" & address & "', '" & city & "', '" & state & "', " & zip & ", '" & phone & "','" & cellPhone & "', '" & altPhone & "', '" & EC & "', '" & relationship & "', '" & ECphone & "', '" & findRR & "'," & rush & ", '" & reason & "', ' " & drugType & "','" & drug & "', '" & previous & "', ' " & dateCompleted & "', '" & treatmentRep & "')"

    Dim clientID As Integer = myCmd.ExecuteScalar
    objConn.Close()
    myCmd.Dispose()

End Sub 
```

在回发时绑定下拉列表

```
 Protected Sub ddlDrugType_SelectedIndexChanged(ByVal sender As Object, ByVal e As EventArgs)
    Dim objGetConnInfo As New ConnInfo
    Dim strConn As String
    strConn = objGetConnInfo.GetConnString
    Dim objConn As SqlConnection
    objConn = New SqlConnection(strConn)
    Dim myCmd As SqlCommand
    myCmd = New SqlCommand
    myCmd.Connection = objConn
    myCmd.CommandType = CommandType.Text
    Dim ds As SqlClient.SqlDataReader
    myCmd.CommandText = "Select Id, Drug from " & ddlDrugType.SelectedValue
    objConn.Open()
    ds = myCmd.ExecuteReader
    ddlDrug.DataSource = ds
    ddlDrug.DataTextField = "Drug"
    ddlDrug.DataValueField = "Id"
    ddlDrug.DataBind()
    ds.Close()

    objConn.Close()

    myCmd.Dispose()

End Sub 
```

这是详细的错误

```
System.InvalidCastException was unhandled by user code 
```

HResult=-2147467262 Message=从字符串“Speed”到类型“Integer”的转换无效。Source=Microsoft.VisualBasic StackTrace：Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value) at Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(Object Value) at RR.NewCustomer.btnSubmit_Click(Object sender, EventArgs e) in C :\Users\Administrator\Documents\Visual Studio 2010\Projects\RR\RR\NewCustomer.aspx.vb：System.Web.UI.WebControls.Button.OnClick(EventArgs e) 处 System.Web.UI.WebControls 处的第 276 行.Button.RaisePostBackEvent(String eventArgument) 在 System.Web.UI.WebControls.Button.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) 在 System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData) at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) InnerException: System.FormatException HResult=-2146233033 Message=输入字符串不在正确的格式。Source=Microsoft.VisualBasic StackTrace: 在 Microsoft.VisualBasic.CompilerServices.Conversions.ParseDouble(String Value, NumberFormatInfo NumberFormat) 在 Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value) InnerException: Boolean includeStagesAfterAsyncPoint) InnerException: System.FormatException HResult=-2146233033 Message=输入字符串格式不正确。Source=Microsoft.VisualBasic StackTrace: 在 Microsoft.VisualBasic.CompilerServices.Conversions.ParseDouble(String Value, NumberFormatInfo NumberFormat) 在 Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value) InnerException: Boolean includeStagesAfterAsyncPoint) InnerException: System.FormatException HResult=-2146233033 Message=输入字符串格式不正确。Source=Microsoft.VisualBasic StackTrace: 在 Microsoft.VisualBasic.CompilerServices.Conversions.ParseDouble(String Value, NumberFormatInfo NumberFormat) 在 Microsoft.VisualBasic.CompilerServices.Conversions.ToInteger(String Value) InnerException:

编辑：这是实际下拉菜单的代码

```
<asp:dropdownlist style="Z-INDEX: 0" id="ddlDrugType" 
                                OnSelectedIndexChanged="ddlDrugType_SelectedIndexChanged" runat="server" 
                                Height="16px" ViewStateMode="Enabled" AutoPostBack="True"></asp:dropdownlist>

<asp:dropdownlist style="Z-INDEX: 0" id="ddlDrug" runat="server"></asp:dropdownlist> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:12:51.083

你能发布 ddlDrug 的 html 代码吗？我怀疑你有类似的东西

```
<option selected="selected" value="Speed">Speed</option>
<option value="Alchol">Alchol</option> 
```

相反，您应该为该值提供某种 ID。

或者你需要改变

```
Dim drugIndex As Integer = ddlDrug.SelectedValue 
```

至

```
Dim drugIndex As String = ddlDrug.SelectedValue 
```

# jquery - TypeScript 定义中的 jQuery is() 函数

> ID：13504274
> 
> 赞同：0
> 
> 时间：2012-11-22T00:34:15.060
> 
> 标签：jquery, typescript

我正在使用[这里](http://api.jquery.com/is/)的 jQuery is() 函数。文档说它返回一个布尔值。在 TypeScript 定义文件中，is() 函数具有以下内容：

```
is(selector: string): JQuery;
is(func: (index: any) =>any): JQuery;
is(element: any): JQuery;
is(obj: JQuery): JQuery; 
```

我是否正确地说我只需将返回类型从 JQuery 更改为 bool 即可在定义文件中修复此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:20:20.997

`is` [文档](http://api.jquery.com/is/)似乎很清楚就是这种情况。

> 根据选择器、元素或 jQuery 对象检查当前匹配的元素集，如果这些元素中至少有一个与给定参数匹配，则返回 true。

我不会尝试再猜测编写`jquery.d.ts`定义的开发人员 - jQuery 文档中可能存在错误（这不是未知的） - 但也有可能任何返回其他内容的 jQuery 函数那样`JQuery`会被错误地定义，因为大多数 jQuery 函数确实返回一个 jQuery 对象。

我会将返回值更改为`bool`. 我将在 Codeplex 上提出一个错误，这样 TypeScript 团队可以修复它或解释它。

# java - 未经检查或不安全的操作

> ID：13504275
> 
> 赞同：0
> 
> 时间：2012-11-22T00:34:20.090
> 
> 标签：java

无法确定导致 java 编译器抛出的原因

```
uses unchecked or unsafe operations. 
```

正在执行此操作的类如下：

```
import java.io.File;
import java.io.FileInputStream;
import java.util.Scanner;
import java.util.Vector;

public class Proj2 {

/**
 * args[0] the maximum depth of the trie
 * args[1] is the number of substrings to print
 * args[2] name of first file containing text
 * args[3] name of second file containing text
 * @param args
 */
public static void main(String[] args) throws Exception {
    String input = args[0];
    int one = 0;
    int two = 0;
    String a;
    String b;
    String[] tokens = input.split("\\s+");
    if (tokens.length != 4) {
        throw new IllegalArgumentException(
                "Argument must contain two integers and two filenames.");
    }
    try {
        one = Integer.parseInt(tokens[0]);
        two = Integer.parseInt(tokens[1]);
    } catch (Exception e) {
        System.out.println("First two arguments must be integers");
    }
    System.out.println("" + one + " " + two + " " + tokens[2] + " "
            + tokens[3]);
    try {

        Scanner sc1 = new Scanner(new File(tokens[2]));
        ;

        Scanner sc2 = new Scanner(new File(tokens[3]));
        String s = "";
        while (sc1.hasNext())
            s += sc1.nextLine();

        Character[] in1 = new Character[s.length()];
        for (int i = 0; i < s.length(); i++) {
            in1[i] = s.charAt(i);
        }
        s = "";
        while (sc2.hasNext())
            s += sc2.nextLine();
        Character[] in2 = new Character[s.length()];
        for (int i = 0; i < s.length(); i++) {
            in2[i] = s.charAt(i);
        }
        Trie<Character> tree1 = new Trie<Character>(in1,
                Integer.parseInt(tokens[0]));
        Trie<Character> tree2 = new Trie<Character>(in2,
                Integer.parseInt(tokens[0]));
        Vector<Vector<Character>> max = tree1.getMax(Integer
                .parseInt(tokens[1]));
        Vector<Integer> max_n = tree1.getMaxCount(Integer
                .parseInt(tokens[1]));

        System.out.println("Sequence    # in " + tokens[2] + "\t# in "
                + tokens[3]
                + "\n--------    --------------\t--------------");

        for (int i = 0; i < max.size(); i++) {
            int n = 0;
            if (tree2.consist(max.get(i)))
                n = tree2.getCount(max.get(i));
            s = "";
            for (int j = 0; j < max.get(i).size(); j++)
                s += max.get(i).get(j);
            System.out.println(s + "\t    " + max_n.get(i) + "\t\t\t" + n);
        }
    } catch (Exception e) {
        System.out.println("Incorrect file name");
    }

}

} 
```

我不得不修改类以捕获更多异常，并且在我使用 args[1]、args[2] 等代替解析标记之前，它并没有抛出它。但是由于我指定那些是整数，我很困惑为什么编译器仍然抛出错误。任何见解将不胜感激。谢谢你。导致错误的代码是实例化树。

# c++ - 继承和良好实践

> ID：13504276
> 
> 赞同：2
> 
> 时间：2012-11-22T00:34:30.520
> 
> 标签：c++, inheritance

我的课很少

```
class A;
class B;
class C;
class D; 
```

B、C、D 类从 A 继承。在我的问题中，我有多个 B、C、D 类，每个类都有一个静态字段，例如

```
static int gold; 
```

A类是抽象类，它有getGold()方法；

当然，每个 B、C、D 类都有自己的静态字段

```
static int gold; 
```

并且在每个类（B，C，D）中，我都以相同的方式实现

```
getGold()
{
    return gold;
} 
```

它是复制和粘贴，但我不知道如何使它变得更好。

例如 B,C,D

*   B是宝箱
*   C是斧头
*   D是剑

同一类的每个对象的成本都相同，所以这就是为什么我只想拥有一个 int 当然这只是示例而不是 int 我可以在那里拥有例如类 Gold 实例 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:43:20.360

如果不需要更改，请使用枚举作为值。

无论如何，返还黄金并不是一个坏主意。如果它更复杂，您可以使用 CRTP。从 A 继承并实现的辅助模板获得金币。

您将 B 作为模板参数传入，然后从中继承 B。模板的方法可以将其静态转换为 B 并使用 B 的状态。

CRTP 对 Google 来说非常容易。

请记住，返还黄金可能是最好的。

# php - 为什么使用javascript提交表单时值未定义？

> ID：13504277
> 
> 赞同：-1
> 
> 时间：2012-11-22T00:34:30.693
> 
> 标签：php, javascript, ajax, forms, google-visualization

**javascript:**

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>
$(function() {
  //
  $('#button_submit').click(function() {
    var start_date = $('start_date').val();
    var end_date = $('end_date').val();
    var type = $('type').val();
    alert(start_date);
  });
});
// 
function drawChart() {
  var jsonData = $.ajax({
    url: "visits/day.php?start_date=" + start_date + "&end_date=" + end_date,
    dataType: "json",
    async: false
  }).responseText;

  var obj = jQuery.parseJSON(jsonData);
  var data = google.visualization.arrayToDataTable(obj);

  var options = {
    title: 'Number of visitors'
  };

  if (type === 'pie') {
    var chart = new google.visualization.PieChart(
      document.getElementById('chart_div'));
      chart.draw(data, options);
  }
  if (type === 'bar') {
    var chart = new google.visualization.BarChart(
      document.getElementById('chart_div'));
      chart.draw(data, options);
  }
} 
```

**html:**

```
<form id="myForm">
    <input type="text" name="start_date" id="start_date"><br />
    <input type="text" name="end_date" id="end_date"><br />
    <input type="text" name="type" id="type"><br />
    <input type="button" id="button_submit" value="go">
</form>
<div id="chart_div" style="width: 900px; height: 500px;"></div> 
```

通过表单获得的变量似乎是空的，我做了那个 alert(start_date) 并说：未定义并且没有通过 url:visits/day.php?start_date...

我需要在不刷新页面的情况下为我的 php 页面发送这些值

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:36:04.713

```
var start_date = $('#start_date').val();
var end_date = $('#end_date').val();
var type = $('#type').val(); 
```

`id`这将通过(`#`后跟`id`value)找到 HTML 元素。

```
$('start_date').val(); 
```

以上将找到带有标签名称的元素`<start_date>`

接下来，您的变量具有函数可见性范围。因此它们仅在匿名函数（即`button_submit`单击处理程序的回调）中定义（并且可见）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:41:33.693

添加到上面......我看不到你在哪里传递`start_date`和`end_date`你的`drawChart()`功能：

编辑添加对 drawChart() 的调用

```
$(function() {
  //
  $('#button_submit').click(function() {
    var start_date = $('#start_date').val();
    var end_date = $('#end_date').val();
    var type = $('#type').val();
    drawChart(start_date, end_date)
    console.log(start_date, end_date, type);
  });
});
function drawChart(start_date, end_date) {
  var jsonData = $.ajax({
    url: "visits/day.php?start_date=" + start_date + "&end_date=" + end_date,
    dataType: "json",
    async: false
  }).responseText; 
```

# python - 解析 EDGAR 文件

> ID：13504278
> 
> 赞同：9
> 
> 时间：2012-11-22T00:34:33.407
> 
> 标签：python, parsing, python-2.7, sgml

我想使用 python2.7 从 EDGAR 文件（可作为 .txt 文件在线获得）中删除任何不是文档文本的内容。文件的外观示例如下：

[例子](http://www.sec.gov/Archives/edgar/data/1800/000104746908003092/0001047469-08-003092.txt)

EDGAR 从该文件的第 48 页开始提供其文档类型定义：

[DTD](http://www.sec.gov/info/edgar/pdsdissemspec910.pdf)

我的程序的第一部分将 .txt 文件从 EDGAR 在线数据库中获取到我命名为“parseme.txt”的本地文件中。我想知道的是如何使用 DTD 来解析 .txt 文件。我会使用像 BeautifulSoup 这样的罐装解析模块来完成这项工作，但 EDGAR 的格式看起来很独特，我希望避免使用大型正则表达式来完成工作。

```
import os
filename = 'parseme.txt'
with open(filename) as f:
    lines = f.readlines() 
```

我的问题与[Parse SGML with Open Arbitrary Tags in Python 3](https://stackoverflow.com/questions/12505419/parse-sgml-with-open-arbitrary-tags-in-python-3)和[Use lxml to parse text file with bad header in Python](https://stackoverflow.com/questions/12412994/use-lxml-to-parse-text-file-with-bad-header-in-python/12431072#12431072)有关，但我认为与 python2.7 相关，我不关心标题- 我只关心文件的文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-19T02:54:59.677

pysec项目看起来很有希望[。](https://github.com/lukerosiak/pysec)这是一个基本的 Django 应用程序，它下载 Edgar 指数，然后允许您下载特定的文件并从 XBRL 中提取财务参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T20:06:30.123

查看[OpenSP 工具包](http://openjade.sourceforge.net/doc/index.htm)，其中包含处理 SGML 文件的程序。您最简单的选择可能是使用该`osx`程序获取输入文件的 XML 版本，之后您可以使用 XML 处理工具。

首先可能需要进行一些设置，因为 OpenSP 包没有附带 EDGAR DTD 或其 SGML 声明（第 48 页的参考资料中的第一部分，以 开头`<!SGML "ISO 8879-1986"`）。您必须将它们作为文本文件获取，并将它们添加到 SP 解析器可以找到它们的目录中。

**更新**：[本文档](http://www.sec.gov/info/edgar/pdsdissemspec092812.pdf)似乎是更新的版本。不过，随便的谷歌搜索不会出现任何立即机器可处理的版本。因此，您可能必须从 PDF 中复制粘贴。

但是，如果您这样做，则必须删除一些无关的格式：似乎有分页指示符，标记为“C-1”、“C-2”等。它们不是 SGML 的一部分，需要删除。

您可以将 SGML 声明和 EDGAR DTD 添加到目录中（在这种情况下，DTD 文件应该只包含 [ after`<!DOCTYPE submission`和匹配的 ] 中的部分），或者您可以创建一个包含两者的“prolog”文件部分按原样（即包括`<!DOCTYPE submission [`and `]>`）并在 prolog 和您的 SGML 文件上运行工具包中的任何程序 - 即将两个名称放在命令行上，首先使用 prolog 文件，以便解析器读取两个文件正确的顺序。要了解发生了什么，您需要知道 SGML 解析器需要三个信息来进行解析：设置一些环境和处理参数的 SGML 声明，然后是描述文档结构约束的 DTD，最后是文档本身.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T22:14:51.033

下面的链接是将 EDGAR 文件解析为 SQLite DB 的库。它包含从 EDGAR FPT 站点提取 Form10k 和 Form8Qk 文件的功能，这些文件可以在您指定的年份内将它们加载到 SQLite DB 表中的规范化格式中。考虑到文件的标准不严格，编写自己的解析脚本将是一项重大任务。该库和类似于下面的代码将加载所需季度的文件，从那里您可以简单地查询表以获取您正在寻找的数据。

```
edgar.database.create()
# Load quarterly master index files into local sqlite db
quarters = []
#Q3 2009
quarters.add(2009,3)
#Q3 2008
quarters.add(2008,3)
edgar.database.load(quarters) 
```

[http://rf-contrib.googlecode.com/svn/trunk/ha/src/main/python/edgar/](http://rf-contrib.googlecode.com/svn/trunk/ha/src/main/python/edgar/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-07-03T08:59:35.200

检查 edgarWebR ( [https://mwaldstein.github.io/edgarWebR/](https://mwaldstein.github.io/edgarWebR/) ) 中的两个函数：

parse_submission()

解析归档（）

parse_submission 适用于您从 edgar 获得的 SGML 文档。

parsed_submission <- try(parse_submission(my_file_name))

然后从解析的提交中获取文本：

tmp <- parsed_submission[parsed_submission$TYPE=='10-K',]

content_text <- tmp$TEXT

最后你可以通过解析文件来获取项目

归档 <- try(parse_text_filing(content_text))

# vb.net - 对于每个文本框循环

> ID：13504280
> 
> 赞同：10
> 
> 时间：2012-11-22T00:34:39.663
> 
> 标签：vb.net

我正在尝试创建一个 foreach 循环来检查面板中的每个 TextBox 并在其 Text 为空时更改 BackColor 。我尝试了以下方法：

```
Dim c As TextBox
For Each c In Panel1.Controls
  if c.Text = "" Then
    c.BackColor = Color.LightYellow
  End If
Next 
```

但我得到了错误：

> 无法将 System.Windows.Forms.Label 类型的对象转换为 System.windows.forms.textbox 类型

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T00:45:21.417

假设没有嵌套控件：

```
For Each c As TextBox In Panel1.Controls.OfType(Of TextBox)()
  If c.Text = String.Empty Then c.BackColor = Color.LightYellow
Next 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-22T00:41:24.143

您可以尝试这样的事情：

```
 Dim ctrl As Control
  For Each ctrl In Panel1.Controls
  If (ctrl.GetType() Is GetType(TextBox)) Then
      Dim txt As TextBox = CType(ctrl, TextBox)
      txt.BackColor = Color.LightYellow
  End If 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T00:41:04.350

尝试这个。当您输入数据时，它也会恢复颜色

```
 For Each c As Control In Panel1.Controls
        If TypeOf c Is TextBox Then
            If c.Text = "" Then
                c.BackColor = Color.LightYellow
            Else
                c.BackColor = System.Drawing.SystemColors.Window
            End If
        End If
    Next 
```

还有一种不同的方法可以做到这一点，包括创建一个继承的 TextBox 控件并在您的表单上使用它：

```
Public Class TextBoxCompulsory
    Inherits TextBox
    Overrides Property BackColor() As Color
        Get
            If MyBase.Text = "" Then
                Return Color.LightYellow
            Else
                Return DirectCast(System.Drawing.SystemColors.Window, Color)
            End If
        End Get
        Set(ByVal value As Color)

        End Set
    End Property
End Class 
```

# c# - 在 Azure 云服务之间共享实体框架

> ID：13504281
> 
> 赞同：1
> 
> 时间：2012-11-22T00:34:40.987
> 
> 标签：c#, wcf, entity-framework, azure-sql-database, azure-storage

目前，我有一个 Windows Azure 云服务项目 (Service1)，它将消息放入存储队列（由另一个云服务拉取），然后将消息从不同的存储队列中拉出。根据此服务收到的消息，可以将对象添加到 SQL Azure 数据库。到目前为止，我已经添加到队列工作中，并且我创建了一个服务库，其中包含 SQL 数据库的实体数据模型，到目前为止只有一个表 tblCustomers。这个项目有一个 web 角色来显示进来的客户，以及一个工人角色来将客户发送到另一个服务进行处理。我使用 XMLSerializer 将客户对象序列化为 xml，然后将该 xml 消息发送到队列。序列化代码：

```
//Serialize Lead to XML
            StringBuilder sbLead = new StringBuilder();
            var serializer = new XmlSerializer(typeof(Lead));
            using (var writer = XmlWriter.Create(sbLead))
            {
                serializer.Serialize(writer, objLead);
            } 
            String xml = sbLead.ToString();

            //Create and send message
            var message = new CloudQueueMessage(xml);
            clarityQueue.AddMessage(message); 
```

客户实体对象定义：

```
public partial class Customer
    {
        public int ID { get; set; }
        public string FirstName { get; set; }
        public string MiddleName { get; set; }
        public string LastName { get; set; }
        public string AddressLine1 { get; set; }
        public string AddressLine2 { get; set; }
        public string ZipCode { get; set; }
        public string EmailAddress { get; set; }
        public string HomePhone { get; set; }
        public string CellPhone { get; set; }
        public string SSN { get; set; }
        public string DateOfBirth { get; set; }
        public string IDState { get; set; }
        public string IDNum { get; set; }
        public string Status { get; set; }
        public Nullable<System.DateTime> DateCreated { get; set; }
        public Nullable<System.DateTime> DateApproved { get; set; }
    } 
```

现在我需要使用不同的服务（Service2）将该消息从队列中拉出并反序列化。问题是，到目前为止，Service2 不知道如何反序列化线索，因为它不知道线索的结构。我知道我可以将 Service1 中的服务库 DLL 添加到服务 2 中，我的问题将得到解决，但是每次实体框架更改时我都必须复制一个 DLL，这可能会很频繁。我认为在两个项目中使用单独的实体模型是不好的做法，但我也不觉得 WCF 服务库是合适的，因为我需要云服务，并且 WCF 服务都在运行，那时我可能以及使整个项目成为 WCF 服务。这不是目标。

我的问题是，在多个不同的解决方案中使用实体对象的最佳实践是什么（Service1 和 Service2 必须在不同的解决方案中）？我觉得这是一个有点普遍的问题，但是在通过 Azure 培训工具包并在网上搜索了几个小时之后，我还没有想出任何东西。

**编辑：** 为了清理一切，我正在寻找一种将实体对象从一个天蓝色云服务发送到另一个使用存储队列的方法。即从 Service1 将客户对象发送到 StorageQueue，然后使用服务 2 从该 StorageQueue 检索相同的客户对象。服务位于两个单独的解决方案中。我需要知道如何在 Service1 和 Service2 中定义 Customer（这是一个由数据库中的表表示的对象）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:23:13.907

一种方法是创建一个单独的项目，其中包含实体类以及其他内容（如存储库、枚举、常量等）

例如，如果您的项目名为“MyService”，您将有 3 个项目：MyService、MyService.FrontEnd、MyService.Worker。数据库实体代码将存在于 MyService 中，其他两个项目将包含该项目作为参考（不要浏览到 bin 文件夹并添加 .dll 作为参考。Visual Studio 允许您在同一解决方案中引用其他项目，这样您就不必复制 dll 或遇到构建顺序不正确的不同步问题）

这就是我几年来一直在多个云项目中使用的方法。

# image - 如何以 CLI/C++ 的形式放置加载的图像

> ID：13504283
> 
> 赞同：1
> 
> 时间：2012-11-22T00:34:50.783
> 
> 标签：image, forms, visual-c++, command-line-interface

我已经通过 CLI/C++ 加载了一个图像，我想在表单中显示它（运行程序时打开了 Form1，如何把它放在那里）。我已经评论了我想在表格中输入的图像

// a.cpp : 主项目文件。

```
#include "stdafx.h"
#include "Form1.h"
#using <mscorlib.dll> //requires CLI
using namespace System;
using namespace System::IO;
using namespace System::Windows::Media::Imaging;
using namespace System::Windows::Media;
using namespace System::Windows::Controls;
using namespace a;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    Application::Run(gcnew Form1());

    // Open a Stream and decode a JPEG image
        Stream^ imageStreamSource = gcnew FileStream("C:/heart.jpg", FileMode::Open, FileAccess::Read, FileShare::Read);

        JpegBitmapDecoder^ decoder = gcnew JpegBitmapDecoder(imageStreamSource, BitmapCreateOptions::PreservePixelFormat, BitmapCacheOption::Default);
        BitmapSource^ bitmapSource = decoder->Frames[0];//< --mamy bitmape
        // Draw the Image
        System::Windows::Controls::Image^ myImage = gcnew System::Windows::Controls::Image();  //<--- this image in the Form1  -------
        myImage->Source = bitmapSource;
        myImage->Stretch = Stretch::None;
        int width = 128;
        int height = width;
        int stride = width / 8;
        array<System::Byte>^ pixels = gcnew array<System::Byte>(height * stride);

        // Define the image paletteo
        BitmapPalette^ myPalette = BitmapPalettes::Halftone256;

        // Creates a new empty image with the pre-defined palette.
        BitmapSource^ image = BitmapSource::Create(
           width, height,
           96, 96,
           PixelFormats::Indexed1,
           myPalette,
           pixels,
           stride);

        System::IO::FileStream^ stream = gcnew System::IO::FileStream("new.jpg", FileMode::Create);
        JpegBitmapEncoder^ encoder = gcnew JpegBitmapEncoder();
        TextBlock^ myTextBlock = gcnew System::Windows::Controls::TextBlock();
        myTextBlock->Text = "Codec Author is: " + encoder->CodecInfo->Author->ToString();
        encoder->FlipHorizontal = true;
        encoder->FlipVertical = false;
        encoder->QualityLevel = 30;
        encoder->Rotation = Rotation::Rotate90;
        encoder->Frames->Add(BitmapFrame::Create(image));
        encoder->Save(stream);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T00:41:03.557

.NET 图形类 (GDI+) 非常适合绘制图形。您不仅可以使用它在画布上绘制图像，还可以绘制许多其他内容。只需在 Google 上搜索“GDI+ 教程”或“.NET 图形”之类的内容，您就会找到一些东西。

此外，您加载该 JPEG 的方式，在 .NET 中有更简单的方法可以做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-23T16:11:23.380

据我了解，您想实时显示绘图。对于任何只想在表单中显示图像的人。针对 VS19 测试的代码。您可以通过以下方式在图像框中打开图像：

```
pictureBox1->Image = System::Drawing::Image::FromFile(L"C:/heart.jpg"); 
```

如果您必须事先格式化图像，只需先将其保存，然后打开保存的文件：

```
System::Drawing::Image^ myImage;
//do smth
myImage->Save(L"C:/heartBUFF.jpg");
pictureBox1->Image = System::Drawing::Image::FromFile(L"C:/heartBUFF.jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-05T13:31:57.617

使用 .net 4.7.2 进行简短的部分回复。

我不了解 System::Windows::Media::Imaging，它似乎根本不起作用或根本不存在。

请改用 System::Drawing::Imaging。我想简单地做 jpeg 质量并最终得到以下结果：

```
cli::array<Imaging::ImageCodecInfo^>^ imcoi = Imaging::ImageCodecInfo::GetImageEncoders(); int j;
for (j = 0; j < imcoi->Length; ++j)
{ if (imcoi[j]->MimeType == "image/jpeg") break; }
assert(j < imcoi->Length);
Imaging::ImageCodecInfo^ myImCodecInf = imcoi[j];
Imaging::Encoder^ myenc = Imaging::Encoder::Quality;
Imaging::EncoderParameters^ myencparams = gcnew Imaging::EncoderParameters(1);
Imaging::EncoderParameter^ myencparam = gcnew Imaging::EncoderParameter(myenc,95LL);
myencparams->Param[0] = myencparam;
img->Save(refstring(fn), myImCodecInf, myencparams); 
```

希望它有所帮助，如果仍然需要，当然。有一个问题是质量参数（此处为 95）必须是 long long，long 不是一个选项，而其他可能性（unsigned char 和 short）则不起作用。

# objective-c - 从单独的 ViewController 更改 TableView 颜色

> ID：13504287
> 
> 赞同：0
> 
> 时间：2012-11-22T00:35:27.900
> 
> 标签：objective-c, ios, storyboard

我只是在做一个开关，它会改变 tableview 上的颜色。

我有 MasterViewController，它具有“tableview”颜色、数据等。我还有称为 InfoViewController 的设置控制器，它有开关。

我无法从 InfoViewController 更改颜色值。

InfoViewController 切换代码：

```
-(IBAction)switch:(id)sender
{
    MasterViewController *destViewController = [[MasterViewController alloc] initWithNibName:nil bundle:nil];

    static NSString *CellIdentifier = @"ElementCell";
    UITableViewCell *cell = [destViewController.tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (color == @"Black") {
        cell.textLabel.textColor = [UIColor whiteColor];
        destViewController.tableView.backgroundColor = [UIColor blackColor];
        destViewController.tableView.separatorColor = [UIColor whiteColor];

    }else if(color == @"White"){
        destViewController.tableView.backgroundColor = [UIColor whiteColor];
        destViewController.tableView.separatorColor = [UIColor blackColor];
        cell.textLabel.textColor = [UIColor blackColor];
    }
} 
```

我正在使用故事板。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:59:57.713

你有一个新的实例`MasterViewController`并且什么也没做，你应该改变内存中已经存在的实例的值

# c++ - 使用 std::regex 在这个正则表达式中我的错误是什么

> ID：13504296
> 
> 赞同：1
> 
> 时间：2012-11-22T00:36:32.547
> 
> 标签：c++, regex, c++11

我正在使用带有 -std=c++0x 的 gcc 4.6.3

这是我第一次使用 std::regex。而且我看不到我的错误：

*   解析的输入 std::string 以`GET /favicon.ico HTTP/1.1`我的正则表达式模式为`GET(.*)`.
*   结果组 1 被评估为，`T /favicon.ico HTTP/1.1` 而我期望更像`/favicon.ico HTTP/1.1`

我不明白为什么它保留`T`?

这是我的代码：

```
static const std::string strRegExp="GET(.*)";
std::string computeRequestedItem(const std::string& strHttpRequest)
{
    std::cout << "SEARCHING :" << strRegExp << "in :" << strHttpRequest;
    std::string strResult;
    std::match_results<std::string::const_iterator> result;
    static const std::regex pattern(strRegExp); 
    bool bValid = std::regex_match(strHttpRequest, result, pattern);

    if(!bValid)
    {
        std::cout << "error" << std::endl;
        return strResult;   
    }

    strResult = result[1];

std::cout << "Requested item: " << strResult << std::endl;

    return strResult;
} 
```

这是输出：

```
SEARCHING :GET(.*)in :GET /favicon.ico HTTP/1.1
Host: 127.0.0.1:8080
Connection: keep-alive
Accept: */*
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3

-+-+-+-+-+-+-+-+-+-+-+-+-+ 
Requested item: T /favicon.ico HTTP/1.1
Host: 127.0.0.1:8080
Connection: keep-alive
Accept: */*
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/536.11 (KHTML, like Gecko) Ubuntu/12.04 Chromium/20.0.1132.47 Chrome/20.0.1132.47 Safari/536.11
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T01:02:49.303

libstdc++ 正则表达式支持只是部分的。请看[这里](http://gcc.gnu.org/onlinedocs/libstdc++/manual/status.html#status.iso.200x)并阅读`28 Regular Expression`。我相信您拥有的代码应该可以正常工作。作为测试，我改用`std`boost `boost`::regex 并编译了您的代码，并得到了您预期的以下结果：

> 请求的项目：/favicon.ico HTTP/1.1

我建议`boost::regex`在完全支持 libstdc++ 正则表达式之前使用。

# dynamic - 动态链接彩色动画

> ID：13504299
> 
> 赞同：1
> 
> 时间：2012-11-22T00:37:21.247
> 
> 标签：dynamic, colors, jquery-animate, hyperlink

我有一个 div，里面有一些链接。我正在尝试在页面加载（准备就绪）时通过所有链接创建动态颜色变化。换句话说，我希望每个链接从白色变为橙色，然后再变为白色。前任。当页面加载时，链接“第一个”闪烁橙色并转到“第二个”链接，闪烁并转到“第三个”链接，以此类推，用于该 div 内的所有链接。

如果我使用“悬停”并且这个：

```
$(this).animate({ color: "#F50" }, 400);
},function() {
$(this).animate({ color: "#FFFFFF" }, 600);
}); 
```

它会做我想做的事，但需要悬停。我希望它在有人进入网站时自动化。

```
<div id="menu">
       <a class="first" href="#">
       <a class="second" href="#">
       <a class="third" href="#">
    </div> 
```

你有什么想法，我会怎么做这样的事情？？？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T19:27:27.267

```
$("a").delay(1000).ready(function() {
$(".home").delay(500).animate({ color: "#F50" }, 800)
$(".home").animate({ color: "#CCCCCC" }, 1200);

$(".beauty").delay(1000).animate({ color: "#F50" }, 800)
$(".beauty").animate({ color: "#CCCCCC" }, 1200);

$("#about").delay(1500).animate({ color: "#F50" }, 800)
$("#about").animate({ color: "#CCCCCC" }, 1200); 
```

所以我采用了一种简单的手动操作方式。

# filter - 球拍/计划过滤

> ID：13504302
> 
> 赞同：3
> 
> 时间：2012-11-22T00:37:30.047
> 
> 标签：filter, scheme, racket

我将如何过滤它以显示所有蔬菜？先感谢您。

```
("Pecan" . (1982 .("nut". "AL")))

("Blackberry" . (2004 .("fruit". "AL")))

("Peach" . (2006 .("fruit". "AL")))

("Rice" . (2007 .("grain". "AR")))

("Orange" . (2005 .("fruit". "FL")))

("Huckleberry" . (2000 .("fruit". "ID")))

("Blackberry" . (2004 .("fruit". "KY")))

("Strawberry" . (1980 .("fruit". "LA")))

("WildBlueberry" . (1991 .("fruit". "ME")))

("BlueCrab" . (2000 .("food". "MD")))

("HoneycrispApple" . (2006 .("fruit". "MN")))

("Pumpkin" . (2000 .("fruit". "NH")))

("Chile" . (1965 .("vegetable". "NM")))

("Blueberry" . (2001 .("fruit". "NC")))

("ChokeCherry" . (2007 .("fruit". "ND")))

("WaterMelon" . (2007 .("vegetable". "OK")))

("Pear" . (2000 .("fruit". "OR")))

("Hazelnut" . (2000 .("nut". "OR")))

("Peach" . (1984 .("fruit". "SC")))

("Tomato" . (2003 .("fruit". "TN")))

("Jalapeno" . (1995 .("vegetable". "TX")))

("Apple" . (2000 .("fruit". "WA"))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:29:39.550

将所有元素打包在一个列表中（`lst`在下面的代码中调用）并在其上运行此过滤器：

```
(filter (lambda (x) (string=? "vegetable" (caddr x)))
        lst)

=> '(("Chile" 1965 "vegetable" . "NM")
     ("WaterMelon" 2007 "vegetable" . "OK")
     ("Jalapeno" 1995 "vegetable" . "TX")) 
```

# objective-c - NSWindow setAspectRatio 是否包括顶栏的大小？

> ID：13504313
> 
> 赞同：1
> 
> 时间：2012-11-22T00:38:31.513
> 
> 标签：objective-c, cocoa, resize, interface-builder, nswindow

在我目前正在处理的一个程序中，我想锁定主窗口的纵横比，以确保一些视觉元素保持成比例。

我已经设法通过在 AppDelegate 类中执行以下操作来完成这项工作：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification { 

    [window setAspectRatio:NSMakeSize(1.48, 1.0)];

} 
```

每当用户拖动窗口时，纵横比都会像我预期的那样被锁定，但是有一个问题。我在 IB 中指定了 592x400 的窗口大小，它确实符合纵横比，但是当我第一次尝试在应用程序运行时调整窗口大小时，窗口会快速捕捉到新的比例。我猜这 setAspectRatio: 可能会进入窗口顶部的栏，因此会打乱计算。

有没有人知道这个问题的一个体面的解决方法，或者任何替代方法？

此外，是否有另一种以编程方式调整窗口大小的方法，以尊重 setAspectRatio 设置的纵横比？

之前，在以编程方式更改大小时，我一直在使用：

```
[window setContentSize:NSMakeSize(592, 400)]; 
```

正如预期的那样，我已经对其进行了测试以确认它忽略了指定的纵横比！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T03:13:00.363

IB 中的大小是内容大小 - 它不包括标题栏的 22 磅（假设是标准标题栏）。你想要的是使用它`setContentAspectRatio:`。

至于程序化调整大小，没有 API。您应该只决定哪个维度是您的参考，然后适当地乘以或除以内容纵横比以获得另一个维度，然后`setContentSize:`像以前一样。

# c++ - C ++将dynamic_bitset存储到文件中

> ID：13504314
> 
> 赞同：4
> 
> 时间：2012-11-22T00:38:36.380
> 
> 标签：c++, vector, binaryfiles, bloom-filter, boost-dynamic-bitset

对[如何将向量<bool> 或位集存储到文件中，但按位存储？](https://stackoverflow.com/questions/4666450/how-does-one-store-a-vectorbool-or-a-bitset-into-a-file-but-bit-wise)

基本上我正在使用以下代码将位集编写为二进制文件：

```
boost::dynamic_bitset<boost::dynamic_bitset<>::block_type> filter;
vector<boost::dynamic_bitset<>::block_type> filterBlocks(filter.num_blocks());

//populate vector blocks
boost::to_block_range(filter, filterBlocks.begin());

ofstream myFile(filterFilePath.c_str(), ios::out | ios::binary);

//write out each block
for (vector<boost::dynamic_bitset<>::block_type>::iterator it =
        filterBlocks.begin(); it != filterBlocks.end(); ++it)
{
    //retrieves block and converts it to a char*
    myFile.write(reinterpret_cast<char*>(&*it),
            sizeof(boost::dynamic_bitset<>::block_type));
}
myFile.close(); 
```

我使用动态bitset和to_block_range的方法变成一个临时向量，然后将块打印到文件中。它有效，但是当我使用中间向量（使用的向量与我的位集大小相同）时，我的内存使用量增加了一倍。如何在不增加内存使用量的情况下将 bitset 打印到文件中？

如果我能以块的形式遍历 bitset，那就太好了，但似乎为了防止其他一些问题，动态 bitset 的作者故意省略了这种功能。我应该使用不同的数据结构吗？如果它有助于上下文，我将在一些布隆过滤器代码中使用位集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:24:30.707

您应该手动进行。遍历这些位，将它们打包到`unsigned char`s 中，然后`stream.put`将字符打包到文件中。

直接编写本`block_type`机会导致文件格式依赖于特定于平台的字节序，这通常是不可取的。（设置`block_type`为`char`会损害性能。）

查看您的另一个问题，我发现这与 Nawaz 的建议相同，您可能想重新使用`std::vector<bool>`。

# xml - jQuery循环？克隆？只是为什么？

> ID：13504315
> 
> 赞同：1
> 
> 时间：2012-11-22T00:38:40.543
> 
> 标签：xml, jquery, auto-increment, xml-database

**新版本（不是新问题......）**

所以，我遇到了 a`.click();`和 a的“循环”问题`.html();`。

检索 XML 数据：**确定**

```
function afficher(NomPizz, Prix1, Prix2, Prix3) {//HERE IS MY CODE//}); 
```

将它们打印到屏幕上：**确定**

```
$('#pricecontainer').show(); //Display my container and put values in with .html();
$('#prix1').html('SOLO 1P<p id="p1" style="line-height:10px;">' + Prix1.toFixed(2) + '</p>');
$('#prix2').html('MAXI 2P<p id="p2" style="line-height:10px;">' + Prix2.toFixed(2) + '</p>');
$('#prix3').html('SUPER 4P<p id="p3" style="line-height:10px;">' + Prix3.toFixed(2) + '</p>');​ 
```

单击时将值附加到其他 div：**OK**但**不是**

一切正常...一次！当我单击更多次时，值“克隆”本身。

**因此，如果我单击一次：我添加了 1 个项目。**

*我得到：**1 好的***

**点击两次。**

*我得到了**3 个**，前一个和**两个更多**！*

**点击三下。**

*我得到了**6 个**，前三个和三个**更多**！*

等等……等等……

**我将此代码**放入我`function afficher();`找到的唯一一个解决方案中......糟糕的一个！

```
$("clickedItemId").click(function() {
    var Figure = $(this).find('p').html();
    totalArea.value += '+' + Figure;
    var Screen = totalArea.value.replace(/'/g, ' ');
    var result = eval(Screen);
    totalArea.value = result;
    var $newItem = "<span style='float:left'>1 " + NomPizz.toUpperCase() + "</span><span style='float:right'>" + Figure + "</span><br/>";
    $('<div><div>').html($newItem).appendTo(RecapTick);
    Display2.value = "TOTAL (EUR): " + totalArea.value;
    $('#pricecontainer').hide();
});​ 
```

所以，我`function afficher();`遗嘱的全部代码是：

```
function afficher(NomPizz, Prix1, Prix2, Prix3) {
    var totalArea = document.getElementById('totalArea');
    var Display2 = document.getElementById('Display2');
    var RecapTick = document.getElementById('MidTiTx');
    $('#pricecontainer').show();
    $('#prix1').html('SOLO 1P<p id="p1" style="line-height:10px;">' + Prix1.toFixed(2) + '</p>');
    $('#prix2').html('MAXI 2P<p id="p2" style="line-height:10px;">' + Prix2.toFixed(2) + '</p>');
    $('#prix3').html('SUPER 4P<p id="p3" style="line-height:10px;">' + Prix3.toFixed(2) + '</p>');
    //BUG HERRERRERERERERER
    $("clickedItemId").click(function() {
        var Figure = $(this).find('p').html();
        totalArea.value += '+' + Figure;
        var Screen = totalArea.value.replace(/'/g, ' ');
        var result = eval(Screen);
        totalArea.value = result;
        var $newItem = "<span style='float:left'>1 " + NomPizz.toUpperCase() + "</span><span style='float:right'>" + Figure + "</span><br/>";
        $('<div><div>').html($newItem).appendTo(RecapTick);
        Display2.value = "TOTAL (EUR): " + totalArea.value;
        $('#pricecontainer').hide();
    });
};​ 
```

* * *

* * *

PS我住在这里旧版本的帖子（与其他代码相同的pb）：

> 所以，我的问题如下：
> 
> [**现场演示**][1]
> 
> **编辑：** [**下载源**][2]
> 
> 这是一个从 xml 文件中检索产品列表的简单购物车。**这部分有效！**
> 
> 单击它们时，产品会添加到下面的列表中，但是当您重复单击相同的产品时，应该添加这些产品的总数......**这就是我卡住的地方！**
> 
> 我试图更改第 62 行：
> 
> ```
> tot = parseInt(jQuery(this).find('.prow').html()); 
> ```
> 
> 至：
> 
> ```
> tot = parseInt(jQuery(this).find('.prow').html()+1); 
> ```
> 
> 但不工作......我认为问题在于我正在使用。 **。点击（）;** 使用**onclick=""**方法？？？或者可能是因为不好的“ **var** ”使用？
> 
> 请有人赐教！
> 
> **这是我的jsCode：**
> 
> ```
> function calculate(){
>   var tot = 0;
>   jQuery(".totprice").each(function(e,b){
>       tot += parseInt(jQuery(this).text());
>   });
>   return jQuery("#amt").html("$"+tot);
> }
> 
> function showprod(){
>   jQuery(".prod").each(function(e){
>       jQuery(this).delay(500*e).fadeIn('fast');
>   });
> }
> 
> function clearcart(){
>   jQuery("#clear").live('click',function(){
>       jQuery(".tetew").fadeIn(4000,function(){
>           jQuery(this).remove();
>           calculate();
>       });
>   });
> }
> 
> function delete_ajax(){
>   jQuery(".del").live('click',function(e){
>       var a = jQuery(this);
>       var p = a.parent().parent().parent().parent().parent();
>       if(p){
>           p.fadeOut('slow',function(){
>               jQuery(this).remove();
>               calculate();
>           });
>       }
>   });
> }
> 
> function addtocart(){
> jQuery(".addtocart").click(function(e){
>       var getprod = jQuery(this).attr("prodid");
>       var getval  = jQuery(this).attr("prodval");
> 
>       jQuery("#msg").fadeIn('slow');
> 
>       jQuery.ajax({
>           type:'GET',
>           url:'db.xml',
>           dataType:'xml',
>           success: function(xml){
>               jQuery(xml).find('databases').each(function(){
>                   jQuery(this).find('prod').each(function(e){
>                   var db_id = jQuery(this).attr('id');
> 
>                   jQuery("#msg").fadeOut('slow');
>                       if(getprod == db_id){
>                           var cookies = 1;
>                           jQuery(".tetew").each(function(){
>                               var _this = jQuery(this);
>                               var _store = _this.find('.pstore');
>                               var ident = _this.find('.pqty');
> 
>                               if(getprod == ident.text()){
>                                   var tot = parseInt(jQuery(this).find('.prow').html()); //Put a +1 here won't work...
>                                   jQuery(this).find('.prow').html(tot);
>                                       var restot = parseInt(jQuery(this).find('.prow').text()) * parseInt(jQuery(this).find('.price').text());
>                                       jQuery(this).find('.totprice').html(restot);
>                                   cookies = 0;
>                                   return false;
>                               }else{
>                                   cookies = 1;
>                               }
>                           });
> 
>                           if(cookies == 1){
> 
>                           var results = "<div class='tetew'>";
>                               results +="<table>";
>                               results +="<tr>";
>                               results +="<td class='pqty' style='display:none' valign='top'>" + jQuery(this).attr("id") + "</td>";
>                               results +="<td class='img' valign='top'><img src='" + jQuery(this).attr('img') + "' width='40' height='40' /></td>";
>                               results +="<td class='pstore' valign='top'>" + jQuery(this).text() + "</td>";               
>                               results +="<td class='prow' valign='top'>1</td>";                           
>                               results +="<td class='price' valign='top'>" + jQuery(this).attr('price') + "</td>";                     
>                               results +="<td class='totprice' valign='top'>" + jQuery(this).attr('price') + "</td>";
>                               results +="<td  valign='top'><a href='javascript:void(0)' class='del'>Delete</a></td>";
>                               results +="</tr>";
>                               results +="</table>";
>                               results +="</div>";
>                           }
> 
>                           jQuery(".tetew:eq("+e+")").hide().fadeIn('fast');
>                               jQuery("#addto").append(results);
>                               calculate();
>                           return false;
>                       }
>                   });
> 
>               }); 
>           }
>       });
> 
>   });
> }
> 
>  function loadXMLdb() {
>         $.ajax({
>             type: "GET",
>             url: "db.xml",
>             dataType: "xml",
>             success: function(xml) {
>                 $(xml).find('prod').each(function() {
>                     var _Nom = jQuery(this).text();
>                     var Col1 = jQuery(this).attr('id');
>                     var Col2 = jQuery(this).attr('price');
>                     var Col3 = $(this).find('grand').text();
>                     $('<div class="prod" style="display:block;" onclick="addtocart();"></div>').html(_Nom + '<br /><img 
> ```
> 
> src="images/pizza.png">
> Ajouter').appendTo(".vprod");
> 
> ```
>  });
>             }
>         });
> 
>     }
> 
> jQuery(document).ready(function(){    
>   showprod();
>   clearcart();
>   addtocart();    
>   delete_ajax();
> loadXMLdb();
> }); 
> ```
> 
> [1]：[http](http://bzez.0fees.net/examples/jCart/) ://bzez.0fees.net/examples/jCart/ [2]： [http ://bzez.0fees.net/examples/jCart/jCart.zip](http://bzez.0fees.net/examples/jCart/jCart.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:32:21.030

似乎您的购物车只会反映 xml 文件中的内容，因此您只能在其中包含 1 个项目。我建议你以不同的方式看待你的问题。

尝试这样的事情：

```
var cart = [];

var items = [
    {id:1, price:100, name:"Catch Arena"},
    {id:2, price:400, name:"Pepperonni"},
    {id:3, price:1400, name:"Fruits de Mer"},
    {id:4, price:1400, name:"Chickenita"},
]; 
```

然后，将商品添加到购物车：

```
<a href="#" onclick="addToCart(0);">Add Catch Arena</a>
<a href="#" onclick="addToCart(1);">Add Pepperonni</a>
<a href="#" onclick="addToCart(2);">Add Fruits de Mer</a>
<a href="#" onclick="addToCart(3);">Add Chickenita</a> 
```

我在这里得到的 addToCart 使用数组的索引（从零开始）：

```
window.addToCart = function(idx) {
    cart.push(items[idx]);
    displayCart();
}; 
```

现在你有了一个购物车，你需要展示它：

```
<div id="ShoppingCart">Your cart is empty</div>
<div id="total"></div>
...
window.displayCart = function() {
    var cartHtml = [];
    var cartTotal = 0;
    for (i=0; i<cart.length; i++) {
        cartHtml.push("<div>" + cart[i].name + ", " + cart[i].price + "</div>");
        cartTotal += cart[i].price;
    }
    $('#total').html(cartTotal);
    $('#ShoppingCart').html(cartHtml.join(''));
}; 
```

我已经在 jsfiddle 中运行了这个：http: [//jsfiddle.net/R4rzC/](http://jsfiddle.net/R4rzC/)

我也不会说这是最佳实践，因为购物车可能应该与后端数据库等同步，但我敢说你实现购物车是 js 的原因，可能是出于技术原因！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:18:38.813

我想建议重新编写 javascript 代码。（有时这真的会帮助您获得更清晰的解决方案）

* * *

在这种状态下，它非常混乱且难以阅读/调试。以后在这种方式下你可能会有更多的错误。

当我在本地重新创建并尝试循环时，它循环不止一次。而且您还没有充分利用 jQuery SELECTORs，请查看 [http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

今晚回家后我会回答你的问题，并提供更多解决方案。同时，如果可以，请尝试重写

尝试这样做。将 product_ids 放入 TR

```
var obj = $('#table tr#prod_id_2').find('.prow');

var new_qty = obj.html() * 1; //gets current qty
new_qty = new_qty + 1;

obj.html( new_qty ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T09:53:18.703

所以，睡了几个小时后，我找到了解决办法。

我创建了一个新的`function poster();`who 检索点击的元素信息并由`onclick="poster(NomPizz, Prix)"`.

这是有效的新代码：

如果有人有更好的主意，我会接受！

```
function afficher(NomPizz, Prix1, Prix2, Prix3) {
            var totalArea = document.getElementById('totalArea');
            var Display2 = document.getElementById('Display2');
            $('#pricecontainer').show();   \\Added <div> above
            $('#prix1').html('<div onclick="poster(\''+NomPizz+'\','+Prix1+')">SOLO 1P '+Prix1.toFixed(2)+'</div>');
            $('#prix2').html('<div onclick="poster(\''+NomPizz+'\','+Prix2+')">MAXI 2P '+Prix2.toFixed(2)+'</div>');
            $('#prix3').html('<div onclick="poster(\''+NomPizz+'\','+Prix3+')">SUPER 4P '+Prix3.toFixed(2)+'</div>');
            };

//NEW FUNCTION
function poster(NomPizz, Prix) {
            var RecapTick = document.getElementById('MidTiTx');
            totalArea.value += '+'+ Prix;
            var Screen = totalArea.value.replace(/'/g, ' ');
            var result = eval(Screen);
            totalArea.value = result.toFixed(2);
            var $newItem = "<span style='float:left'>1 " + NomPizz.toUpperCase() + "</span><span style='float:right'>" + Prix.toFixed(2)+"</span><br/>";
            $('<div><div>').html($newItem).appendTo(RecapTick);
            Display2.value = "TOTAL (EUR): "+totalArea.value;
            $('#pricecontainer').hide();
}; 
```

# html - 如何创建两个具有不同背景的容器？

> ID：13504319
> 
> 赞同：0
> 
> 时间：2012-11-22T00:39:09.700
> 
> 标签：html, css, containers

> **可能重复：**
> [使用 PHP 将 HTML + CSS 转换为 PDF？](https://stackoverflow.com/questions/391005/convert-html-css-to-pdf-with-php)

我似乎无法找到正确完成此任务的方法。我有两个容器。在一个容器中，我想使用将水平占据整个上半部分的背景图像，然后我想使用第二个容器并将其涂成红色。这将水平占据下半部分。

我试过这个：

HTML：

```
 <div class="container1">
     Some text and other divs go here. This is where the background will be an image.  
 </div>
 <div class="container2">
     Some text will also here along with divs. This is where I want to use the red background.
 </div> 
```

CSS：

```
 .container1 {
      background-image: url('img.png');
      width:100%;
  }
  .container2 {
      width: 100%;
      color: #990000;
  } 
```

问题是对于图像容器，我在顶部、底部、左侧和右侧留下了空白。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:45:28.813

您需要将 padding 和 margin 设置为 0。大多数有经验的 UI 开发人员将使用所谓的 CSS 重置来消除任何特定于浏览器的默认样式表行为（例如提供 padding.

为了您的目的，一个基本的 CSS 重置：

```
body { padding: 0px; margin: 0px;}
div { padding: 0px; margin: 0px; } 
```

在您的 CSS 文件的开头，应该会有所帮助。

此外，CSS`color`与文本颜色有关，而不是与背景颜色有关。你需要使用`background-color`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:46:38.287

因为你没有正确定义**一半**，我会说你的代码除了`color`应该是`background-color`; 在这里看到它工作正常[http://jsfiddle.net/TkBxH/](http://jsfiddle.net/TkBxH/)

如果您的意思是屏幕的一半，那么您需要使用*绝对定位*，CSS 将是

```
.container1, .container2 {
    position: absolute;
    left:0;
    right:0;
    height:400px; /* based on screen size */
}
.container1 {
    top: 0;
}
.container2 {
    bottom: 0;
} 
```

* * *

编辑：如果您不介意`<body>`（的父级`.container1, .container2`）上的绝对定位，则可以避免使用 px 值

```
body { /* Force <body> to fill screen */
    position: absolute;
    left:0;
    right:0;
    top:0;
    bottom:0;
}
.container1, .container2 {
    height:50%;
}​ 
```

# node.js - Socket.io：命名空间、通道和合作

> ID：13504320
> 
> 赞同：29
> 
> 时间：2012-11-22T00:39:18.360
> 
> 标签：node.js, namespaces, socket.io, channel

我有一个 Node.js Web 服务器，它在顶部运行一个套接字服务器，它是使用[Socket.io](http://www.socket.io)创建的。基本上，这行得通。

我现在想要实现的是连接的客户端集群在组中。因此，可能有一些客户端组成 A 组，而其他一些客户端则组成 B 组。它们应通过寻址特定 URL 来选择属于哪个组，要么`localhost:3000/A`要么`localhost:3000/B`。

在 Socket.io 中，我现在想向 A 组中的所有客户端或 B 组中的所有客户端或所有客户端发送消息，而不查看他们的组。

这基本上就像与房间聊天，您可以为特定房间内的所有客户或任何客户发送消息，无论他在哪个房间。

使用 Socket.io 设计这样一个系统的最佳方法是什么？

到目前为止，我一直在尝试使用命名空间，它基本上适用于创建组 A 和 B，但随后我失去了向所有客户端发送消息的能力，无论他们在什么房间。至少我不知道该怎么做这个。

我应该如何建模？我应该寻找哪些正确的术语？

**更新：**根据[@sdedelbrock](https://stackoverflow.com/users/1174481/sdedelbrock)的回答，我可以使用命名空间或房间：

*   如果使用命名空间，我无法长时间发送给每个人，无论他们的命名空间如何。这是因为`io.sockets`是 的快捷方式`io.of('')`，当然它不再与命名空间匹配。
*   这意味着我应该使用房间，但我想知道房间和命名空间之间的语义区别是什么。

简而言之：为什么同一个（？）想法有两个概念？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-22T02:35:51.143

您可能正在使用房间，因此您将执行以下操作以向房间中的每个人发出

```
io.sockets.in('a').emit('inA', 'foo') 
```

然后发射给你可以使用的每个人

```
io.sockets.emit('everyone','bar'); 
```

你也可以使用命名空间：

```
io.of('/b').emit('inB', 'buzz'); 
```

要向除触发您的用户之外的所有人发出，您将使用：

```
io.sockets.broadcast.emit("hello"); 
```

**[编辑] 这是一个更详细的答案：**

命名空间背后的想法是，它与其他命名空间（甚至是全局命名空间）分开处理。把它想象成一个全新的 socket.io 实例，你可以运行新的握手、新的事件、授权等，而不同的命名空间不会相互干扰。

这对于说连接事件将具有非常不同的逻辑的情况很有`/chat`用`/tracking`

Socket.io 为您完成所有工作，就好像它是两个独立的实例一样，但仍将信息限制在一个连接中，这非常聪明。

可能有一种解决方法，您可以在其中广播到所有命名空间（下面的示例）。但简而言之，您不应该这样做，您应该使用房间。

```
for (var nameSpace in io.sockets.manager.namespaces){
  io.of(nameSpace).emit("messageToAll", message);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-04T06:01:40.867

这是您可以使用的模板应用程序（适用于 9.16；未在 1.x 上测试，但应该可以使用）：

```
var namespaces = [
    io.of('/ns1'),
    io.of('/ns2'),
    io.of('/ns3')
];

for (i in namespaces) {
    namespaces[i].on('connection',handleConnection(namespaces[i]));  
}

function handleConnection(ns) {
   return function (socket){ //connection
   console.log("connected ");
   socket.on('setUsername',setUsernameCallback(socket,ns));                       
   socket.on('disconnect', disconnectCallback(socket,ns));                        
   socket.on('messageChat',messageChatCallback(socket,ns));
   socket.on('createJoinRoom',createJoinRoomCallback(socket,ns));  

  };
}

function disconnectCallback(socket,ns) {
    return function(msg){
    console.log("Disconnected ");
    socket.broadcast.send("It works!");
  };
} 
```

你可以自己写其他句柄:)

# java - 使用 equals 方法检查两个整数子集是否相等

> ID：13504332
> 
> 赞同：2
> 
> 时间：2012-11-22T00:40:36.567
> 
> 标签：java

我在名为 IntArray 的类中有这个 java 方法。该类具有将整数添加到集合或从集合中删除整数、检查集合的大小以及检查 2 个集合是否相等的方法。这 2 个集合是在 main 中使用 2 个不同类型的 IntArray 对象创建的，比如说对象 A 和 B。equals 方法应该检查两组整数是否相等。例如设置 A = {1,2,3} 和 B = {1,2,3,4}。即使一个集合是另一个集合的子集，该方法仍然返回 true。我到底做错了什么？谢谢。

```
//part of the code in main
IntArray A = new IntArray();
IntArray B = new IntArray();
if(A.equals(B))
System.out.println("A and B are equal");

 //equals method in IntArray class
 public boolean equals(Object b)
 {
  if (b instanceof IntArray)
    {
      IntArray A = (IntArray) b;
      for (int i = 0; i < data.length; i++)
      if (countOccurrences(data[i]) != A.countOccurrences(data[i]))
      return false;
      return true;
    }
 else return false;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T00:43:34.467

```
 if (countOccurrences(data[i]) != A.countOccurrences(data[i])) 
```

它可能是

```
 if (countOccurrences(data[i]) != A.countOccurrences(A.data[i])) 
```

编辑：

如果通过等于集**，您的意思是子集中的每个元素**的顺序相同（A = {1,2,3} 和 B = {1,2,3}）：

然后，您想使用 equals 方法检查两个整数子集是否相等：

```
if (data[i].equals(A.data[i])); 
```

确保仅在两个集合具有相同长度时才比较这两个集合。否则，返回假。

如果您对 equals set 的定义意味着两个具有相同元素的集合，而与**它们的位置无关**：

您应该检查 countOccurrences 是否正在执行以下操作：

```
public int countOccurrences(int element) 
{
     int count = 0;
     for(int i = this.data.length - 1; i >= 0; i--) 
        if(this.data[i] == element) 
          count ++;
    return count;
} 
```

在后一种情况下，您应该保留`if (countOccurrences(data[i]) != A.countOccurrences(data[i]))`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:46:18.947

预先检查两个列表的长度是否相同。如果它们的长度不同，则返回 false。如果它们的长度相同，请逐个元素进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T10:49:21.193

这是上述问题的解决方案。请注意，它假设`IntArray`对象代表一个真实的集合，而不是一个包/多集合。它**不**假定`data`数组中的值是有序的。

```
public boolean equals(Object otherObject) {
    if (otherObject == this) {  
        // This is an optimization for the case where an object
        // is compared with itself
        return true;
    } else if (otherObject instanceof IntArray) {
        IntArray other = (IntArray) other;
        if (this.data.length != other.data.length) {
            // If the sets have different nos of elements they cannot be equal
            return false;
        }
        for (int i = 0; i < this.data.length; i++) {
            boolean found = false;
            for (int j = 0; j < this.data.length; j++) {
                if (this.data[i] == other.data[j]) {
                    found = true;
                    break;
                }
            }
            if (!found) {
                return false;
            }
        }
        return true;
    } else {
        return false;
    }
} 
```

如果*保证*`data`数组是有序的，那么您可以进行简单的逐个元素比较。将上面代码中的循环替换为：*`for`*

 *```
 for (int i = 0; i < this.data.length; i++) {
            if (this.data[i] != other.data[i]) {
                return false;
            }
        } 
```

最后，这里是多集情况的解决方案；即其中的元素`this.data`在数组中不一定是唯一的：

```
public boolean equals(Object otherObject) {
    if (otherObject == this) {  
        return true;
    } else if (otherObject instanceof IntArray) {
        IntArray other = (IntArray) other;
        if (this.data.length != other.data.length) {
            return false;
        }
        for (int i = 0; i < this.data.length; i++) {
            if (this.count(this.data[i]) != other.count(this.data[i]) {
                return false;
            }
        }
        return true;
    } else {
        return false;
    }
}

public int count(int x) {
    int count = 0;
    for (int y : this.data) {
        if (x == y) {
            count++;
        }
    }
    return count;
} 
```

请注意，它是

```
 if (this.count(this.data[i]) != other.count(this.data[i]) { 
```

而不是

```
 if (this.count(this.data[i]) != other.count(other.data[i]) { 
```

因为我们要计算相同值的出现......而不是相应位置的值的出现（可能是*不同*的值！）*

# python - 如何在龙卷风模板中创建“抽象块”？

> ID：13504334
> 
> 赞同：1
> 
> 时间：2012-11-22T00:41:02.760
> 
> 标签：python, tornado

我想在龙卷风模板中创建一个块，这个块必须在子模板中替换（就像一个抽象方法必须在子类中被覆盖）。

如何实现“抽象块”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:44:01.600

为什么需要这么奇怪的东西？

好的，这是你通往程序员噩梦之路的轮子：

模块未实现：

```
raise Exception('Not implemented template block') 
```

父模板：

```
{% block abstract %}
   {% import not_implemented %}
{% end %} 
```

子模板：

```
{% extends 'parent.html' %} 
{% block abstract %}{% end %} 
```

# jquery - 按下转义键时如何破坏jquery对话框？

> ID：13504336
> 
> 赞同：2
> 
> 时间：2012-11-22T00:41:18.517
> 
> 标签：jquery, jquery-ui, dialog, jquery-ui-dialog, jquery-dialog

按下转义键时如何破坏jquery对话框？

有没有办法添加这样的代码： $.dialog('destroy');

在关闭事件中？这是关闭事件：它看到最后一个“else”有一个隐藏方法，这就是那个家伙。但不能在那里摧毁任何东西：

```
close: function( event ) {
    var that = this,
        maxZ, thisZ;

    if ( !this._isOpen ) {
        return;
    }

    if ( false === this._trigger( "beforeClose", event ) ) {
        return;
    }

    this._isOpen = false;

    if ( this.overlay ) {
        this.overlay.destroy();
    }

    if ( this.options.hide ) {
        this._hide( this.uiDialog, this.options.hide, function() {
            that._trigger( "close", event );                
        });
    } else {
        this.uiDialog.hide();
        this._trigger( "close", event );
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-08-06T14:39:41.843

我能找到的最优雅的方法是监听对话框的关闭事件，然后将其销毁。

```
$('#mydialog').dialog({
    buttons: {
        OK: function(event) {
            $(this).dialog("close");
        }
    },
    close: function(event, ui) {
        $(this).dialog("destroy");
    },
}); 
```

这样，ESCAPE 和 OK 按钮都会关闭对话框，然后事件侦听器启动并从 DOM 中删除对话框。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T00:46:21.640

## *[jsBin 演示](http://jsbin.com/okucap/7/)*

```
$(document).keydown(function(e) {
      // ESCAPE key pressed
      if (e.which == 27) {
         $('#dialog').dialog('destroy');
      }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T01:00:11.940

找到了一种直接编辑关闭事件的方法，因为我希望在整个应用程序中都有这种行为。

从：

```
else {
    this.uiDialog.hide();
    this._trigger( "close", event );
} 
```

至：

```
else {
    this.uiDialog.remove();
    this._trigger( "close", event );
} 
```

多谢！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-02T04:31:47.530

# **从 DOM 中销毁 Dialog：**

**$(this).dialog('destroy').remove()**

## 解释：

此代码将销毁对话框并从 DOM 中删除拥有该对话框的 Div。

例如：

我有一个名为 $('#report_dialog') 的对话框，我想从 DOM 中删除该元素

所以我可以使用这样的声明，

```
 **$('#report_dialog').dialog('destroy').remove();** 
```

**在按下 Esc 键的同时从 DOM 中销毁对话框：** ======================================= ==================

```
I just Want to override the **closeOnEscape** event in jquery dialog.

$(document).keydown(function(e) {

    // ESCAPE key pressed
    if (e.which == 27) {
        $('#report_dialog').dialog('destroy').remove();
    }
}); 
```

我们可以完全使用密钥代码，否则**$.ui.keyCode.ESCAPE**它将自动获取密钥代码并成功从 DOM 中删除

# bash - 如何通过shh将mysql数据库从一个centos服务器上传到另一个centos服务器

> ID：13504341
> 
> 赞同：0
> 
> 时间：2012-11-22T00:41:37.320
> 
> 标签：bash, unix, ssh, centos

任何人都知道如何通过 ssh 将 mysql 数据库从一台服务器上传到另一台服务器？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:00:11.800

最简单的方法是：

1.  转储您要从中传输的服务器上的数据库
2.  将其复制到另一台服务器（使用 scp）
3.  然后 ssh 到新服务器并使用 mysql dbname < dumpfile.sql 导入

否则，您可以将步骤 2 和 3 替换为：

1.  设置到新服务器的 ssh 隧道（参见[http://www.revsys.com/writings/quicktips/ssh-tunnel.html](http://www.revsys.com/writings/quicktips/ssh-tunnel.html)）
2.  使用 mysql -hlocalhost:330x dbname < dumpfile.sql 导入

# javascript - Highcharts根据类别值更改栏背景颜色

> ID：13504343
> 
> 赞同：3
> 
> 时间：2012-11-22T00:41:49.950
> 
> 标签：javascript, jquery, html, highcharts

我正在使用 Highcharts 并且想知道是否可以将每个系列组中的顶部栏设置为不同的颜色，然后将每个组系列中的第二个设置为默认背景颜色。

我不能使用颜色数组，因为我重新加载数据的方式会产生问题。所以我认为唯一的方法是使用 Javascript，我能够获取每个类别的值，但不知道如何更改 attr 颜色。我有一个 jsFiddle [http://jsfiddle.net/KrTbz/13/](http://jsfiddle.net/KrTbz/13/)

这是我的javascript：

```
 function custom() {

            var chart;
            $(function() {
                chart = new Highcharts.Chart({
                    chart: {
                        renderTo: 'container',
                        type: 'bar',
                        backgroundColor: 'transparent',
                    },
                    title: {
                        text: null
                    },
                    subtitle: {
                        text: null
                    },
                    xAxis: {
                        tickLength: 0,
                        lineWidth: 0,
                        categories: ['RED', 
                                     'BLUE', 
                                     'PINK', 
                                     'ORANGE'],
                        title: {
                            text: null
                        },
                        labels: {
                            color: 'orange',
                            x: 5,
                            useHTML: true,
                            formatter: function () {
                                console.log(this);
                                return {
                                    'RED': '1ST BAR IS RED',
                                    'BLUE': '1ST BAR IS BLUE',
                                    'PINK': '1ST BAR IS PINK',
                                    'ORANGE': '1ST BAR IS ORANGE'
                                }[this.value];
                            }

                        }
                    },
                    yAxis: {
                        max: 100,
                        min: 0,
                        gridLineWidth: 0,
                        title: {
                            text: null
                        },
                        labels: {
                            enabled: false,
                        }
                    },
                    tooltip: {
                        enabled: false
                    },
                    plotOptions: {
                        bar: {
                            dataLabels: {
                                enabled: true,
                                color: '#f60'
                            },
                            borderWidth: 0,
                            borderRadius: 3
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    credits: {
                        enabled: false
                    },

        //SERIES AND DATA ARRAY FORMAT NEEDS TO STAY THIS WAY                
                    series: [{
                        color: 'silver', //DEFAULT COLOR OF SECOND BAR ON EACH GROUP
                        name: 'Previous',
                        shadow: false,
                        data : [10, 20, 40, 50]
                            }, {
                        color: 'silver', //DEFAULT COLOR OF SECOND BAR ON EACH GROUP
                        name: 'Current',
                        shadow: false,
                        data : [50, 30, 20, 10]
                           }]
                }); //Highcharts.Chart ends
            }); //function ends
        }

        custom();​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:19:21.560

我想你想要这个：

```
 data:  [{
            y: 50,
            color: 'red'},
        {
            y: 30,
            color: 'blue'},
        {
            y: 20,
            color: 'pink'},
        {
            y: 10,
            color: 'orange'}] 
```

[提琴手](http://jsfiddle.net/KrTbz/20/)

# powershell - 空文件夹上的 Powershell 比较对象

> ID：13504346
> 
> 赞同：1
> 
> 时间：2012-11-22T00:42:44.943
> 
> 标签：powershell, scripting

我正在编写一个简单的 DLL 复制脚本来帮助我的开发团队设置他们的本地环境。我检查了构建 devdrop 文件夹并获得了 DLL 文件列表。然后我查看本地文件夹并复制任何较新的 DLL。

我的问题是当本地文件夹为空时（即脚本第一次运行），它就会崩溃。

```
$newFiles = Get-ChildItem -recurse -path "$drop\$latest\ship" -name
$oldFiles = Get-ChildItem -recurse -path $bin -name

$files = Compare-Object $newFiles $oldFiles -IncludeEqual -PassThru
$files | Where-Object { $_.SideIndicator -eq '<=' -or $_.SideIndicator -eq '=='} | % {
    Copy-Item -Path "$drop\$latest\ship\$_" -Destination $bin -Force
} 
```

当 $bin 为空时，gci 调用将 $oldFiles 保留为空，这给了我一个很好的错误：

> 比较对象：无法将参数绑定到参数“DifferenceObject”，因为它为空。

我四处搜索，所有比较对象的操作方法似乎都没有处理这个问题。我可以检查文件夹是否为空，然后将所有文件复制过来，但我想知道是否有更好的方法。

干杯。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T02:51:39.043

```
$newFiles = @(Get-ChildItem -recurse -path "$drop\$latest\ship" -name)
$oldFiles = @(Get-ChildItem -recurse -path $bin -name)
$files = Compare-Object -ReferenceObject $newFiles -DifferenceObject $oldFiles -IncludeEqual -PassThru 
```

# haskell - 类型参数错误

> ID：13504352
> 
> 赞同：0
> 
> 时间：2012-11-22T00:43:29.670
> 
> 标签：haskell

我创建自己的类型参数如下：

```
data Node a = Node a

data Cost = Int | Float

data Edge Node Cost = Edge ((Node,Node),Cost)

data Graph Edge = Graph [Edge] 
```

并得到一个错误：

意外类型`Node' where type variable expected In the declaration of`的边缘节点成本'

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:45:29.920

## 类型构造函数与数据构造函数

您必须在 haskell 中标记联合类型中的类型：

```
data Cost = Int | Float 
```

应该说

```
data Cost = I Int | F Float 
```

请注意，这是因为`Int`和`Float`是类型。示例数据是`I 5`或`F 5.6`。我们也需要数据构造函数。`I`并且`F`是这里的数据构造函数。`I :: Int -> Cost`和`F :: Float -> Cost`。它们是将整数或浮点数转换为成本的函数。您可以有一个不带参数的构造函数，例如，在您的评论中，

```
data Bool = True | False 
```

这里 True 和 False 是构造函数，而不是类型。示例数据只是`True`或`False`。你每次都必须有构造函数，这就是为什么我们需要标记类型`Int`和`Float`

定义

```
data Node a = Node a 
```

有点令人困惑，因为在左侧，`Node`是一种类型函数，我们称为类型构造函数，并且有 kind `* -> *`，但右侧`Node`是类型的数据构造函数`a -> Node a`。示例数据：`Node "hello"`类型`Node String`。如果我们写，这将不那么令人困惑

```
data Node a = N a 
```

`Node`类型构造函数和`N`数据构造函数也是如此。`N "Hello"`这给出了类型的样本数据`Node String`。对于这种定义，我们并没有太大的区别，所以我们倾向于说

```
newtype Node a = N a 
```

因为在大多数情况下编译器可以将其优化掉，但我们在源代码端获得了类型安全。

## 类型构造函数需要类型

你还需要

```
data Edge a = Edge ((Node a,Node a),Cost) 
```

因为`Node`是一个类型构造函数（它有 kind `* -> *`）所以你必须总是给它一个类型来处理。我已经给了它，`a`所以你可以用任何东西制作你的节点。

但是，您不需要括号，并且 Int 和 Float 的联合可能不如使用小写`cost`而不是固定类型允许任何成本类型有用`Cost`

```
data Edge a cost = Edge (Node a) (Node a) cost 
```

（如果你想确保没有人从任何非数字成本中获得优势，你可以说`data Num cost => Edge a cost = Edge (Node a) (Node a) cost`. 在我看来，这是在标记 Int 和 Float 的尴尬和允许任意成本之间更好的折衷，但是你不需要它——你可以很高兴地在你需要的时候在一个结合成本的函数上添加限制`+`。）

您的整个定义将是

```
data Node a = Node a
data Edge a cost = Edge (Node a) (Node a) cost
data Graph a c = Graph [Edge a c] 
```

同样，您需要编写`Graph [Edge a c]`因为`Edge`需要两种类型，所以有 kind `* -> * -> *`。

# jquery - jQuery - 从 live() 迁移到 on()

> ID：13504357
> 
> 赞同：7
> 
> 时间：2012-11-22T00:44:14.350
> 
> 标签：jquery

我了解现在已弃用“实时”功能。如何迁移以下内容以使用新的“on”？

```
$('a.action').live( "click", function (evt) {

        // Do stuff 

} 
```

场景是 a.action 是动态创建的。我试过这个，无济于事：

```
$('a.action').on( "click", function (evt) {

        // Do stuff 

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T00:48:54.573

如果您想要在添加事件处理程序时对象不必存在的实际`.live()`类型性能，那么您应该找到始终存在的所有元素的父 DOM 对象并像这样绑定到该对象：`a.action``a.action``.on()`

```
$(parent selector).on('click', 'a.action', function (evt) {
    // Do stuff
}); 
```

该父级应尽可能靠近`a.action`对象以获得最大效率。因此，不希望绑定到`document`.

实际上，`.live()`不推荐使用的一个原因是它绑定到`document`对象，当有太多事件都流过一个对象时，很容易导致性能问题（事件调度性能受到影响）。

有关更多信息，请参阅我的其他相关答案：

[jQuery .live() 与 .on() 方法在加载动态 html 后添加点击事件](https://stackoverflow.com/questions/8752321/jquery-live-vs-on-method-for-adding-a-click-event-after-loading-dynamic-ht/8752376#8752376)

[jQuery 的新 on() 方法在性能上与 live() 方法相比如何？](https://stackoverflow.com/questions/8541825/how-does-jquerys-new-on-method-compare-to-the-live-method-in-performance/8541838#8541838)

[所有 jquery 事件都应该绑定到 $(document) 吗？](https://stackoverflow.com/questions/12824549/should-all-jquery-events-be-bound-to-document/12824698#12824698)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T00:46:47.770

```
$(document).on('click', 'a.action', function (evt) {
    // Do stuff
}); 
```

# sqlite - 在 sqlite3 中切换值

> ID：13504365
> 
> 赞同：3
> 
> 时间：2012-11-22T00:46:06.910
> 
> 标签：sqlite

我的表有一个名为`status`data type的列`CHARACTER`。我希望做到以下几点。

> 如果主键的行不存在，则在 `status`. 如果一行已经有一个主键条目，则切换`status`. 使用`ative`,`not_active`值进行切换。

目前我正在通过编写多个查询来做到这一点。是否有任何单个查询可以像 Mysql 一样执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:59:16.467

SQLite 没有控制逻辑命令，`IF`因为这在嵌入式数据库中没有意义。

以您用于访问数据库的任何语言实现控制逻辑：

```
db.begin_transaction()
result = db.execute("SELECT status FROM MyTable WHERE id = ?", [id]);
if result.length > 0:
    new_status = if result[0][0] == 'active': 'not_active' else: 'active'
    db.execute("UPDATE MyTable SET status = ? WHERE id = ?", [new_status, id])
else:
    db.execute("INSERT INTO MyTable(id, status) VALUES(?, ?)", [id, 'active'])
db.commit() 
```

不过切换逻辑本身可以用一个[`CASE`表达式](http://www.sqlite.org/lang_expr.html#case)来实现，所以如果你不太在意清晰度，你可以按照这个顺序执行以下两个命令（`UPDATE`如果记录不存在则什么都不做，并且[`INSERT OR IGNORE`](http://sqlite.org/lang_insert.html)如果新记录违反任何唯一约束，则不会执行任何操作）：

```
UPDATE MyTable
SET status = CASE status
             WHEN 'active' THEN 'not_active'
             ELSE               'active'
             END
WHERE id = ?;

INSERT OR IGNORE INTO MyTable (id, status) VALUES (?, 'active'); 
```

# ruby - 正确引用表的 ActiveRecord 关联？

> ID：13504368
> 
> 赞同：1
> 
> 时间：2012-11-22T00:46:25.897
> 
> 标签：ruby, ruby-on-rails-3, activerecord, relational-database

给定两个模型：

```
class User < ActiveRecord::Base
  attr_accessible :name, :user_status

end

class UserStatus < ActiveRecord::Base
  attr_accessible :descr
end 
```

user.user_status 列旨在成为单个 ID，可用于与 UserStatus 结合以获取其他信息，例如状态图标和描述。

UserStatus 是一个只读引用表，它的行数非常少，而且都是唯一的。假设它只有四行：

```
{ :id => 0, :descr => 'New' },
{ :id => 1, :descr => 'Banned' },
{ :id => 2, :descr => 'Active' },
{ :id => 3, :descr => 'Unverified' } 
```

我应该为引用表烦恼 ActiveRecord 关联吗？如果是这样，如果我想（或必须）将关联的 UserStatus ID 存储在用户表中，那么正确的 ActiveRecord 关联是什么？据我所知，根据[文档](http://guides.rubyonrails.org/association_basics.html)，'User belongs_to :user_status' 是我最好的选择，但在语言上这是失败的；因为用户不“属于”某种状态，所以用户处于某种状态或具有某种状态。还是这太让我毛骨悚然了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T00:52:37.750

`belongs_to`并不总是具有语言意义，但在这种情况下，这正是您想要的。

```
UserStatus has_many :users
User belongs_to :user_status 
```

这还允许状态查找处于该状态的所有用户，这可能很有用。

```
naughtyPeople = UserStatus.where(descr: 'Banned').users 
```

更重要的是，从语言上讲，您决定使用 API 来获取这些数据。

```
User.find(123).user_status.descr 
```

那种烂。它有你想要的关系，但是 API 非常冗长。

```
class User
  def status
    user_status.descr
  end
end

User.find(123).status 
```

好多了。

甚至可能是这个！

```
class User
  def status
    user_status.descr
  end

  def status=(status_string)
    self.user_status = UserStatus.where(descr: status_string).first
  end
end

user = User.find(123)
user.status = 'Banned'
user.user_status #=> { id: 3, descr: "Banned" } 
```

你想按摩多远取决于你。

# php - 正则表达式哈希匹配

> ID：13504371
> 
> 赞同：0
> 
> 时间：2012-11-22T00:47:29.610
> 
> 标签：php, regex

下面的正则表达式从下面的 URL 中取出数字（公司 ID），但我试图找出它是如何工作的。hash to 和 pluses 有什么作用？

```
preg_match('#/company/([0-9]+)/(.+)#',http://test.net.au/company/198/test,$m); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T00:49:15.133

这里的哈希是一个正则表达式分隔符。您几乎可以使用任何东西作为分隔符，例如`~`,`!`等。

`+`是一个量词，表示从 1 到无穷大的重复。

```
[0-9]+ --- 1 or more numbers in a row
.+     --- any character one or more times in a row 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T00:49:25.873

正则表达式中的第一个和最后一个字符是分隔符。他们只是说这里是正则表达式开始的地方，这里是它停止的地方：

通常`/`用于：

```
Example: "/foo/";
         "#bar#"; 
```

在您的示例中，您正在尝试匹配，因此`"/company/"`不能使用分隔符。`/``#`

加号`+`表示匹配上一个条目的 1 个或多个。在您的情况下，这意味着它将匹配一个或多个数字（从 0 到 9）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T00:51:18.370

散列仅用作正则表达式模式的边界分隔符。开发人员通常为此使用`/`, `~`, 或`#`。在这种情况下`#`，用于防止需要转义`/`正则表达式模式中的 's。

`+`表示必须有一个或多个前面的元素，在第一种情况下，它实际上是一个指定所有数字的字符类。在第二种情况下，它只是意味着需要一个或多个任意字符（`.`是通配符）。

# ruby-on-rails - Ruby on Rails - 通过 jQuery/Ajax 在另一个视图中渲染部分

> ID：13504372
> 
> 赞同：1
> 
> 时间：2012-11-22T00:47:29.757
> 
> 标签：ruby-on-rails, jquery, partial-views

我的显示方法视图中有一个链接。此链接应在后台运行此模型的创建方法，如果完成，则应更改此视图中的样式和链接。我无法管理它以从其他方法更改按钮。

**查看**：

```
 <%= div_for @movie do %>
        <p class="p p-details">
          <div class="default_list">
            <span class="label label-info">
              <%= link_to "Add to Movie List", movies_path(:add_to_list => "default_list", :mashupdb_id => @movie.mashupdb_id),:method => "post", :remote => true, :class =>"a a-label" %>
            </span>
          </div>
        </p>
      <% end %> 
```

**控制器创建动作：**

```
 respond_to do |format|
    format.html do
      if request.xhr?
        render :partial => "movies/delete_from_default_list", :layout => "movies/show", :status => :created
      end
    end
    format.json { render :json =>  @movie }
  end 
```

**jQuery：**

```
jQuery(function($) {
    // Callback for rendering via HTML
    $('.movie a[data-type=html]').on('ajax:success', function(event, data, status, xhr) {
        $(this).parents('div.movie').find('.label-info').replaceWith(data);
    });
}); 
```

如果我尝试这个，不会发生。

如果我只使用下面的链接和我的表演动作，它就可以工作。

```
<span class="label label-info">
  <%= link_to "Add to Movie List", @movies, :remote => true, :class =>"a a-label" %>
</span> 
```

可以从另一个控制器渲染部分吗？我还能做什么？

**编辑：**

现在我尝试使用 js.erb 文件更改链接。

更改控制器：

```
 respond_to do |format|
    format.html
    format.js { render :content_type => 'text/javascript' }
    format.json { render :json =>  @movie }
  end 
```

创建.js.erb：

```
if ('<%= @list_operation.eql?('add_to_list_default_list') %>'){
    $('#<%= dom_id(@movie) %> .default_list').html('<%= raw escape_javascript( render ("movies/delete_from_default_list") )%>');
}
else if ('<%= @list_operation.eql?('delete_from_list_default_list') %>'){
    $('#<%= dom_id(@movie) %> .default_list').html('<%= raw escape_javascript( render ("movies/add_to_default_list") )%>');
} 
```

部分 _delete_from_default_list.html.erb

```
<span class="label label-important">
  <%= link_to "Delete from Movie List", movies_path(:delete_from_list => "default_list", :mashupdb_id => @movie.mashupdb_id),:method => "post", :remote => true, :class =>"a a-label" %>
</span> 
```

部分 _add_to_default_list.html.erb

```
<span class="label label-info">
  <%= link_to "Add to Movie List", movies_path(:add_to_list => "default_list", :mashupdb_id => @movie.mashupdb_id),:method => "post", :remote => true, :class =>"a a-label" %>
</span> 
```

如果我第一次单击该链接，将执行 js,erb 文件并更改我的视图中的内容。（@list_operation 包含“add_to_list_default_list”）
现在如果我单击更改的链接，控制器操作也会成功调用（@ list_operation 包含“delete_from_list_default_list”），但没有任何反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:33:06.693

在这种情况下我通常做的就是调用格式为js的ajax调用，在响应的js.erb中，这样做，

```
$('xxxx').html("<%= raw escape_javascript( render :file => "xxxx/xxxx", :locals => { xxx: xxx ) %>"); 
```

在 js.erb 中渲染部分。

我喜欢通过本地传递所需的实例，您可以在控制器中对其进行贴花，任何一种方式都可以。

# mysql - 如何在 MAMP 上启用 TCP？

> ID：13504373
> 
> 赞同：0
> 
> 时间：2012-11-22T00:47:34.400
> 
> 标签：mysql, mamp

我正在尝试在命令行中运行 cake，但出现此错误

PDO::__construct(): [2002] 连接被拒绝（试图通过 tcp://127.0.0.1:3306 连接）

我做了一些研究，结果发现 TCP 没有使用 MAMP 自动打开。

我环顾四周，看看是否可以找到一个 mysql conf 文件，但我找不到。

我在 OSX 10.8.2 上使用 Mamp 2.1.1

有谁知道我需要做什么才能在 MAMP 上启用 TCP，以及如何做到这一点？（我没有使用 MAMP PRO）

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:24:37.773

如果你真的想通过 TCP 连接，你需要在你的 mysql 配置文件中[启用网络，方法是删除 skip-networking 行。](http://www.razorsql.com/docs/support_mysql_mac_mamp.html)

如果您只想与本地机器上的 mysql 对话，则无需启用网络，您可以通过本地套接字进行连接。代替 tcp 连接，为 PDO 提供套接字名称，例如`mysql:unix_socket=/Applications/MAMP/tmp/mysql/mysql.sock`这将在不对 MAMP 的默认值进行任何更改的情况下工作。

# php - 在 symfony2 中连接 facebook 是怎么做的？

> ID：13504380
> 
> 赞同：0
> 
> 时间：2012-11-22T00:48:18.897
> 
> 标签：php, symfony

我想在我的网站上允许通过 facebook connect 登录。但我不想使用 FOSUserBundle

我已经有一个身份验证数据库，我喜欢这个链接[http://symfony.com/doc/2.0/cookbook/security/entity_provider.html](http://symfony.com/doc/2.0/cookbook/security/entity_provider.html)

通过 facebook connect 创建登录我只能执行该链接中的内容？ [http://symfony.com/doc/2.0/cookbook/security/custom_provider.html](http://symfony.com/doc/2.0/cookbook/security/custom_provider.html)

我必须这样做吗？ [http://symfony.com/doc/2.0/cookbook/security/custom_authentication_provider.html](http://symfony.com/doc/2.0/cookbook/security/custom_authentication_provider.html)

如何实现此方法：函数 loadUserByUsername ($ username)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:22:21.727

正如@meze 提到的，您可以使用 FOSFacebookBundle 或者如果您想自己实现它，您可以使用 KnpOAuthBundle

# php - 阻止直接访问

> ID：13504385
> 
> 赞同：4
> 
> 时间：2012-11-22T00:48:37.600
> 
> 标签：php

如何在不修改 .htaccess 的情况下阻止直接访问某些页面？

有没有办法在每个脚本中使用一些代码来实现这一点？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T00:49:32.750

尝试在第一行添加此代码：

根据 Michael Berkowski 的建议，答案的改进版本如下：

```
/***************DO NOT ALLOW DIRECT ACCESS************************************/
if ( (strpos( strtolower( $_SERVER[ 'SCRIPT_NAME' ] ), strtolower( basename( __FILE__ ) ) ) ) !== FALSE ) { // NOT FALSE if the script's file name is found in the URL 
  header( 'HTTP/1.0 403 Forbidden' );
  die( '<h2>Direct access to this page is not allowed.</h2>' );
}
/*****************************************************************************/ 
```

* * *

### 更新：

```
/***************DO NOT ALLOW DIRECT ACCESS************************************/
if ( stripos( $_SERVER[ 'REQUEST_URI' ], basename( __FILE__ ) ) !== FALSE ) { // TRUE if the script's file name is found in the URL
  header( 'HTTP/1.0 403 Forbidden' );
  die( "<h2>Forbidden! You don't have permission to access this page.</h2>" );
}
/*****************************************************************************/ 
```

此代码可用于保护其他代码使用的不需要通过浏览器访问的具有函数、类等的文件。比如大部分的WP插件、admin和include文件、wp-config.php、functions.php；文件以获取通过 POST 方法（不是 GET）等传输的数据。

# python - 确定任务是否已被删除 GAE Python

> ID：13504389
> 
> 赞同：1
> 
> 时间：2012-11-22T00:49:10.673
> 
> 标签：python, google-app-engine, queue

我想在任务队列中加载几个任务（推送），然后确定我添加到队列中的任务组何时完成。我有以下代码：

```
 task = taskqueue.add(url='/task')

    import time
    while not task.was_deleted:
        logging.info('not deleted yet')
        time.sleep(1) 
```

这无限循环。我预计一旦任务被处理并删除，“was_deleted”参数将返回 True。但即使任务被删除，'was_deleted' 仍会继续返回 false。这是文档所说的：

task.was_deleted：“如果此任务已成功删除，则为真。” [https://developers.google.com/appengine/docs/python/taskqueue/tasks#Task_was_deleted](https://developers.google.com/appengine/docs/python/taskqueue/tasks#Task_was_deleted)

如果拉取任务创建成功，您的应用程序需要在处理后删除该任务。系统最多可能需要 7 天时间来识别任务已被删除；在此期间，任务名称仍然不可用。在此期间尝试使用相同名称创建另一个任务将导致“项目存在”错误。系统没有提供方法来确定已删除的任务名称是否仍在系统中。为避免这些问题，我们建议您让 App Engine 自动生成任务名称。 [https://developers.google.com/appengine/docs/python/taskqueue/overview#Task_Concepts](https://developers.google.com/appengine/docs/python/taskqueue/overview#Task_Concepts)

这一段似乎暗示您不能立即确定给定任务何时被删除。这个对吗？

我的问题：

1.  was_deleted 的预期用途是什么
2.  您如何确定添加到推送队列的特定任务（或任务组）何时完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T00:24:29.290

我不能回答你的第一个问题，但是对于第二个问题，我和你有类似的需求。

我所做的是将要检查是否完成的任务分组到队列中，并使用 QueueStatistics 类您可以查看该队列的剩余任务数。

以下代码说明了如何获取该数据。您可以在交互式控制台中尝试。

```
from google.appengine.api import taskqueue

statsList = taskqueue.QueueStatistics.fetch(taskqueue.Queue("default"))

print(statsList.tasks) 
```

# symfony - Doctrine2 表继承

> ID：13504402
> 
> 赞同：0
> 
> 时间：2012-11-22T00:50:33.160
> 
> 标签：symfony, doctrine-orm

我确定以前有人问过这个问题，但我不确定我正在寻找的术语，所以请多多包涵！

我有一个看起来像这样的表结构：

```
[Branch]        [Ville]
- ID            - ID
- Ville_ID      - Region_ID

                [Region]
                - ID
                - Province_ID

                [Province]
                - ID
                - Country_ID

                [Country]
                - ID 
```

分支实体如下所示：

```
/**
 * @ORM\Entity
 * @ORM\Table()
 */
class Succursale
{
    /**
     * @ORM\Id
     * @ORM\GeneratedValue()
     * @ORM\Column(name="ID", type="integer")
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Hero\LieuBundle\Entity\Ville")
     * @ORM\JoinColumn(name="Ville_ID", referencedColumnName="ID", nullable=false)
     */
    protected $ville;
} 
```

城市、地区、省和国家实体基本相同：

```
/**
 * @ORM\Entity
 * @ORM\Table()
 */
class Ville
{
    /**
     * @ORM\Column(name="ID", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue()
     */
    protected $id;

    /**
     * @ORM\ManyToOne(targetEntity="Hero\LieuBundle\Entity\Region")
     * @ORM\JoinColumn(name="Region_ID", referencedColumnName="ID", nullable=false)
     */
    protected $region;
} 
```

代码很简单（Symfony2）：

```
$succursales = $entreprise->getSuccursales(); 
```

在树枝模板中，我有：

```
<ul>
{% for item in succursales %}
    <li>{{ item.adresse }}, {{ item.ville.nom }}</li>
{% endfor %}
</ul> 
```

这一切都很好。当我获取一个分支时，我可以轻松地获取城市，但显然能够通过单个查询获取地区、省和国家会很好。看到 Doctrine2 有多棒，我相信这是可能的，但如果有人能指出我正确的方向，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:11:57.757

我看到用一个查询来做到这一点的唯一方法是为您想要检索的结果编写您自己的自定义查询。Doctrine 在需要时使用延迟加载来加载相关对象。您可以禁用延迟加载，但这不会加入所有表，它仍会运行多个查询。无论如何，将运行的 5 个左右的查询绝不应该成为您的服务器的问题，除非您有大量的流量并且它们看起来也不复杂。如果您当时认为这类查询对您很重要，那么您应该考虑从教义中删除 ORM 部分......

# xcode - 从 Cordova Xcode 插件触发 javascript 函数

> ID：13504405
> 
> 赞同：0
> 
> 时间：2012-11-22T00:50:50.320
> 
> 标签：xcode, cordova, phonegap-plugins

如何从 Xcode 触发一个函数？我正在使用 Cordova 并创建一个示例插件，当 Xcode 事件中的一个类注册时，它会`testFunction`在我的 javascript 端触发一个？

**更新**

所以我所做的是实例化 [ex1.0] 然后加载 [ex2.0]，然后在收到通知时在我的 xcode 上调用 [ex3.0]。

我创建了这个示例函数 ex1.0 var test = function(){ }

```
test.prototype.callbackIdx = 0;
test.prototype.callbackMap = [];

test.prototype.TestFunction = function( success ) {
   var key = 'TestFunction' + this.callbackIdx++;
   window.plugins.test.callbackMap[key] = {
       success:function(result){
         delete window.plugins.test.callbackMap[key];
         success(result);
       }
   };
   var callbackPrefix = 'window.plugins.test.callbackMap.'+key;
}

cordova.addConstructor(function(){
   if(!window.plugins){
      window.plugins = {};
   }

   window.plugins.test = test();
}

//CALLING IT ON JAVASCRIPT
ex2.0
window.plugins.test.TestFunction(
  function(result){
    console.log("DID TRIGGER! HOORAY!");
  }
);

//ON XCODE
ex3.0
window.plugins.test.callbackMap.TestFunction0.success("TEST"); 
```

但是我没有看到任何“触发！万岁！” 在我的控制台上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:14:36.577

有一个 writeJavaScript 函数是 CDVPlugin 类的成员。使用它从本机 obj-c 层执行 JS。我在这里有一个例子：[http ://www.tricedesigns.com/2012/03/01/pushing-data-to-a-phonegap-web-view/](http://www.tricedesigns.com/2012/03/01/pushing-data-to-a-phonegap-web-view/)

我在 PhoneGap 1.5 中写了那个例子，但它应该仍然有效。请记住，插件类已使用 Cordova 命名进行重命名。 `PGPlugin`是现在`CDVPlugin`，而在 JavaScript`Phonegap.exec()`中是现在`cordova.exec()`。否则它应该或多或少相同。

# sql - 更新具有来自同一表的值的行

> ID：13504406
> 
> 赞同：2
> 
> 时间：2012-11-22T00:50:59.700
> 
> 标签：sql, postgresql, sql-update, self-join

我有一张这样的桌子：

```
+------+-------+
|ID    | value |
+------+-------+
| 1    | 150   |
| 2    |       |
| 3    |       |
| 4    |       |
| 5    | 530   |
| 6    | 950   |
| 7    | 651   |
+-------+------+ 
```

我想复制最后 3 个值，最后我的表格将如下所示：

```
+------+-------+
|ID    | value |
+------+-------+
| 1    | 150   |
| 2    | 530   |
| 3    | 950   |
| 4    | 651   |
| 5    | 530   |
| 6    | 950   |
| 7    | 651   |
+-------+------+ 
```

是否可以？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T01:26:44.487

使用**自加入**：

```
UPDATE mytable m
SET    value = m0.value
FROM   mytable m0
WHERE  m.id = (m0.id - 3)   -- define offset
AND    m.id BETWEEN 2 AND 4 -- define range to be affected
AND    m.value IS NULL;     -- make sure only NULL values are updated 
```

如果 ID 空间有**间隙**，请使用 windows 功能`row_number()`获取无间隙 ID 以使用。我在 CTE 中这样做，因为我将重复使用该表两次以进行自联接：

```
WITH x AS (
   SELECT *, row_number() OVER (ORDER BY ID) AS rn
   FROM   mytable
   )
UPDATE mytable m
SET    value = y.value
FROM   x
JOIN   x AS y ON x.rn = (y.rn - 4567)   -- JOIN CTE x AS y with an offset
WHERE  x.id = m.id                      -- JOIN CTE x to original
AND    m.id BETWEEN 1235 AND 3455
AND    m.value IS NULL; 
```

您需要 PostgreSQL 9.1 或更高版本来[修改数据 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:00:34.887

对于像这样的临时更新，可能没有比三个简单的更新语句更好的方法了：

```
UPDATE mytable SET value = 530 WHERE id = 2;
UPDATE mytable SET value = 950 WHERE id = 3;
UPDATE mytable SET value = 651 WHERE id = 4; 
```

问题是，这是仅适用于该确切数据的临时更新，还是您希望为该表中的所有可能数据实施的一般更新规则的情况？如果是这样，那么我们需要更多细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:50:18.510

硬编码`3`出现两次，将被您想要的任意多行替换。它假定最后的`3`记录实际上具有值。它采用这些值并将它们按顺序应用于具有空值的记录集。

```
update a
  set value = x.value
  from (

        select nullRows.id, lastRows.value

          from ( select id, value
                       ,(row_number() over(order by id) - 1) % 3 + 1 AS key
                   from ( select id, value
                            from a
                            order by id desc
                            limit 3
                        ) x
                   order by 1

               ) AS lastRows

              ,( select id
                       ,(row_number() over(order by id) - 1) % 3 + 1 AS key
                   from a
                   where value is null
                   order by id

               ) AS nullRows

         where lastRows.key = nullRows.key

      ) x

where a.id = x.id 
```

# iphone - 将 UITableViewCell 连接到操作

> ID：13504408
> 
> 赞同：0
> 
> 时间：2012-11-22T00:51:07.097
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

我正在尝试使用带有披露指示符的特定单元格来调出 a `UIImagePicker`（其他单元格有`UITextFields`，等等……）到目前为止，我只能用 a 来做到这一点`UIButton`。我想将我的动作连接到单元格，但我唯一的选择是创建新的转场。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:09:56.147

如果您知道要点击的单元格的索引路径（它是列表中的第一个单元格或其他内容）。然后你可以使用：

```
-(void) tableview:(UITableView *)tableview didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 0 && indexPath.row == 0) {
        // do some action
        [tableview deslectRowAtIndexPath:indexPath];
        [self someAction];
    }
} 
```

您还需要将 cellForRowAtIndexPath 中的所有其他单元格设置为不响应点击事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-23T21:29:28.433

如果您不想硬编码部分和行的索引，可以执行以下操作：

在 .h 文件中，使用 IB 创建 IBOutlets

```
@property (weak, nonatomic) IBOutlet UITableViewCell *upgradeAppCell;
@property (weak, nonatomic) IBOutlet UITableViewCell *spreadTheWordCell;
@property (weak, nonatomic) IBOutlet UITableViewCell *rateOnAppStoreCell; 
```

在 .m 文件中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    if (cell == upgradeAppCell)
    {
        [self upgradeApp];
    }
    else if (cell == spreadTheWordCell)
    {
        [self spreadTheWord];
    }
    else if (cell == rateOnAppStoreCell)
    {
        [self rateOnAppStore];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:01:15.627

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath
{
   static NSString *identifier = @"identifier";
   YourCell *cell = [tableView dequeueReusableCellWithIdentifier:identifier];
   if(!cell)
   {
       cell = /*Create your cell*/
       [cell.button addTarget:self action:@selector(didClickButton:)   forControlEvents:UIControlEventTouchUpInside];
   }

   cell.button.tag = [indexPath row];   

   return cell;
}

-(void)didClickButton:(UIButton *)button
{
    int row = button.tag
    /*Here you'll be able to know the button of which row has been clicked.*/
} 
```

# jquery - 在哪里可以找到 jquery UI Tabs 小部件 API 文档

> ID：13504409
> 
> 赞同：0
> 
> 时间：2012-11-22T00:51:14.530
> 
> 标签：jquery, jquery-ui

我发现有人写了如下的jquery代码：

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.1/themes/base/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
<script type="text/javascript" src="http://code.jquery.com/ui/1.9.1/jquery-ui.js"></script>
<script type="text/javascript">
    $(function () {
        $("#tabs").tabs();
        $("#tabs").bind("tabsselect", function (e, tab) {
            alert("The tab at index " + tab.index + " was selected");
        });
    });
 </script> 
```

他绑定了“tabsselect”事件。我尝试查找有关 tabselect 事件的更多详细信息。所以我访问了 URL：http://api.jqueryui.com/tabs/

但我没有找到 tabselect 事件。我访问了错误的网址吗？还是我被误导了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T14:33:27.810

选择事件在 1.9 中被重命名为激活：http: [//api.jqueryui.com/tabs/#event-activate](http://api.jqueryui.com/tabs/#event-activate)

还有 1.8 的文档，包括选择事件：[http ://api.jqueryui.com/1.8/tabs/#event-select](http://api.jqueryui.com/1.8/tabs/#event-select)

不推荐使用 select 事件，因此它在 1.9 中仍然有效，除非您设置`$.uiBackCompat = false`. 1.9 升级指南中的更多信息：http: [//jqueryui.com/upgrade-guide/1.9/#preparing-for-jquery-ui-1-10](http://jqueryui.com/upgrade-guide/1.9/#preparing-for-jquery-ui-1-10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:19:44.307

在 jQueryUI 几个月前改变他们的网站之前，文档已经存在。您还可以使用：

```
$("#tabs").tabs({
   select:function(eventt,ui){
        alert("The tab at index " + ui.index + " was selected");
   }
}); 
```

如果您想查看有关`ui`对象（或`tab`代码）中可用内容的更多详细信息，请将其记录到控制台。

# html - 页面超出屏幕边缘

> ID：13504412
> 
> 赞同：4
> 
> 时间：2012-11-22T00:51:30.957
> 
> 标签：html, css

这是我第二次遇到这个问题，我正要拔头发试图修复它。我正在创建一个网站，并且刚刚起步。在 css 中，我将`html`and`body`标记的边距和填充设置为 0，并且页面超出了屏幕的右边缘。

我尝试修改这些元素的 css 以包含 100% 的宽度，但水平滚动条仍然存在，页面仍然超出屏幕边缘。

我还尝试将`overflow`值设置为隐藏，但正如预期的那样，这只带走了滚动条。很明显，页面仍然超出了屏幕的右边缘。

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T00:53:45.000

除了 100% 宽度之外，您还有一个填充。

![在此处输入图像描述](../Images/4d54523efbdfa482f951f6670c16a886.png)

Div 元素占据了所有可用的水平空间，因此您在这里并不需要 width 属性。把它拿出来可以解决问题。此外，您可以更改`box-sizing`元素的属性

```
box-sizing: border-box; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T00:55:49.867

只需删除 navigation_bar div 上的 width:100%

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T00:57:21.703

这是你的问题：

```
#navigation_bar {
    background-color:#900;
    height:50px;
    left:0px;
    padding-right:10px;
    text-align:right;
    top:0px;
    width:100%;
    z-index:0;
} 
```

您在 100% 宽度的元素上有填充，它扩展了身体的整个宽度。删除填充，您的`#navigation_bar`元素将适合没有滚动。或者，只需删除`width: 100%`，因为 div 会自然增长以填充其容器（在本例中`body`）允许的水平空间。

顺便说一句，将 HTML 和 CSS 部分放在您的问题中会很有帮助，以免人们通过您的网站挖掘来获取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-03-03T01:05:08.460

使用**视口宽度**时出现相同问题的不同原因。

什么是视口？

> 浏览器的视口是可以看到 Web 内容的窗口区域。

**它还包括滚动条！**

因此，当您在 body 标签上使用视口宽度时，请记住 100vw > 100%，因为滚动条的宽度包含在视口中，这与使用百分比时不同。

```
body{
    width: 100%;
    /* Page does not extend. */

    width: 100vw;
    /* Page extends in width by the width of the scrollbar. */
} 
```

# c - c 指针问题。编译器错误

> ID：13504414
> 
> 赞同：0
> 
> 时间：2012-11-22T00:51:57.903
> 
> 标签：c

我在这个问题上挣扎了几个小时：

```
char szKeyMap[MAX_ALPNUM_KEYS][CHAR_PER_KEY]= {"0- +%",  "1QZ.\\", "2ABC&",  "3DEF%",  "4GHI*",  "5JKL/", "6MNO~", "7PRS^", "8TUV[", "9WXY]",  "*,'\":", "#=:$?" };

getkbd_entry(h_clock,insertPin,pinBuff,0,NUMERIC ,szKeyMap,sizeof(szKeyMap), 6 , 4); 
```

getkbd_entry 原型是：

```
int getkbd_entry(int h_clock, char *msg, char *outbuf, unsigned wait,
unsigned type, char szKeyMap[][CHAR_PER_KEY],
int KeyMapSize, int va_alist, ...); 
```

我在编译器中遇到的错误：

```
"C:\Bin\test.c", line 90: Warning:  #167-D: argument of type "c
har *" is incompatible with parameter of type "signed char *"
  getkbd_entry(h_clock,insertPin,pinBuff,0,NUMERIC ,szKeyMap,sizeof(szK
eyMap), 6 , 4);

                                 ^
"C:\Bin\test.c", line 90: Error:  #167: argument of type "signe
d char (*)[6]" is incompatible with parameter of type "char *"
  getkbd_entry(h_clock,insertPin,pinBuff,0,NUMERIC ,szKeyMap,sizeof(szK
eyMap), 6 , 4); 
```

任何帮助深表感谢 ！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T12:42:43.717

问题显然是这样解决的：

```
getkbd_entry(h_clock,insertPin,pinBuff,0,NUMERIC ,szKeyMap[6],sizeof(szKeyMap), 6 , 4); 
```

从手册中引用：

> 默认情况下，在 ACT 库中，CHAR_PER_KEY 定义为 6。因此，应用程序在键映射数组中的每个键可以有五个字符

这对我来说只是猜测，我无法理解它..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:12:31.420

也许是因为`szKeyMap`是`char**`而不是`char*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:24:38.413

我拿了你的代码并添加了几行简单的代码来编译它，它用 gcc -Wall 对我来说编译得很好。但是，如果您不匹配“char”、“unsigned char”和“signed char”，gcc -Wall 将有效地产生与您看到的相同的错误消息。这似乎有点违反直觉，因为“char”必须是有符号或无符号的，但请仔细检查您的字符串定义是否与有符号、无符号或未指定完全匹配，看看是否有帮助。

# c - 如何为 Dijkstra 算法存储相邻节点？

> ID：13504416
> 
> 赞同：4
> 
> 时间：2012-11-22T00:52:16.957
> 
> 标签：c, algorithm, data-structures

大多数关于 Dijkstra 算法的文章只关注应该使用哪种数据结构来执行节点的“松弛”。

我将使用`O(m log(n))`我相信的最小堆。

我真正的问题是我应该使用什么数据结构来存储每个节点的相邻节点？我正在考虑使用邻接列表，因为我可以在`u`in上找到所有相邻节点`O(deg(u))`，这是最快的方法吗？

这将如何改变算法的运行时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:36:47.273

对于算法本身，我认为您应该以图形的紧凑表示为目标。如果每个节点有很多链接，矩阵可能是最好的，但通常邻接列表将占用更少的空间，因此缓存未命中更少。

可能值得看看您是如何构建图表的，以及您在其上执行的任何其他操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T19:44:09.110

使用 Dijkstra 算法，您只需遍历节点的邻居列表一次，因此在每个节点（如在邻接列表中）存储相邻节点（或简单地在全局列表中的索引）的简单数组或链表就足够了.

`How will that change the running time of the algorithm?`- 与什么相比？我很确定算法复杂性假设邻接列表实现。[运行时间为`O(edges + vertices * log(vertices))`](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Running_time)。

# haskell - Haskell - 计算递归次数

> ID：13504418
> 
> 赞同：4
> 
> 时间：2012-11-22T00:52:24.567
> 
> 标签：haskell

我有一个简单的函数来计算下面的第 n 个斐波那契数：

```
fibonacci :: Integer -> Integer
fibonacci 0 = 0
fibonacci 1 = 1
fibonacci n = (fibonacci (n-1) ) + (fibonacci (n-2)) 
```

但我对计算此函数的递归次数的方法很感兴趣。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T04:10:42.500

这让人想起[所谓的 Writer monad](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)`sigfpe`的说明。您可能会像这样更系统地执行此操作：

```
import Control.Monad.Trans.Writer
import Control.Monad.Trans
import Data.Monoid

fibwriter :: Int -> Writer (Sum Int) Integer
fibwriter 0 = return 0
fibwriter 1 = return 1
fibwriter n =  do a <- fibwriter (n-1)
                  b <- fibwriter (n-2)
                  tell (Sum (2::Int))
                  return (a + b) 
```

如此使用：

```
*Fib> runWriter $ fibwriter  11
(89,Sum {getSum = 286}) 
```

这是相同的定义，但具有记录每对额外递归对的“副作用”。`IO`如果我们想在“天真”定义中看到所有疯狂的重新计算，我们还可以添加一个副作用：

```
fibprint :: Int -> WriterT (Sum Int) IO Integer
fibprint 0 = return 0
fibprint 1 = return 1
fibprint n = do  a <- fibprint (n-1)
                 record a
                 b <- fibprint (n-2)
                 record b
                 return (a + b)
 where  record x = lift (putStr $  ' ' : show x) >> tell (Sum 1) 
```

对于斐波那契 11，这给了我们这个荒谬的重复显示，因为计算爬向 89：

```
*Fib> runWriterT $ fibprint 11
 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 1 0 1 1 2 1 0 1 3 1 0
 1 1 2 5 13 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 21 1 0 1 1
 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5
 13 34 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 1 0 1 1 2 1 0 1
 3 1 0 1 1 2 5 13 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 21 55
 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 1 0 1 1 2 1 0 1 3 1 0
 1 1 2 5 13 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 21 1 0 1 1
 2 1 0 1 3 1 0 1 1 2 5 1 0 1 1 2 1 0 1 3 8 1 0 1 1 2 1 0 1 3 1 0 1 1 2 5
 13 34(89,Sum {getSum = 286}) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T00:55:37.360

```
recursions :: Integer -> Integer
recursions 0 = 0
recursions 1 = 0
recursions n = recursions (n-1) + recursions (n-2) + 2 
```

对于基本情况，没有递归，对于其他所有情况，我们有两个直接递归调用以及从这两个调用中调用的那些。

您还可以重复使用`fibonacci`代码，

```
recursions n = 2*fibonacci (n+1) - 2 
```

# python - 朴素贝叶斯分类器错误

> ID：13504424
> 
> 赞同：7
> 
> 时间：2012-11-22T00:53:21.503
> 
> 标签：python, nltk

嘿，我正在尝试使用朴素贝叶斯分类器对某些文本进行分类。我正在使用 NLTK。每当我使用classify() 方法测试分类器时，它总是为第一项返回正确的分类，并为我分类的每一行文本返回相同的分类。以下是我的代码：

```
from nltk.corpus import movie_reviews
from nltk.tokenize import word_tokenize
import nltk
import random
import nltk.data

documents = [(list(movie_reviews.words(fileid)), category)
for category in movie_reviews.categories()
for fileid in movie_reviews.fileids(category)]
random.shuffle(documents)

all_words = nltk.FreqDist(w.lower() for w in movie_reviews.words())
word_features = all_words.keys()[:2000] 

def bag_of_words(words):
    return dict([word,True] for word in words)

def document_features(document): 
    document_words = set(document) 
    features = {}
    for word in word_features:
        features['contains(%s)' % word] = (word in document_words)
    return features

featuresets = [(document_features(d), c) for (d,c) in documents]
train_set, test_set = featuresets[100:], featuresets[:100]
classifier = nltk.NaiveBayesClassifier.train(train_set)

text1="i love this city"
text2="i hate this city"

feats1=bag_of_words(word_tokenize(text1))
feats2=bag_of_words(word_tokenize(text2))

print classifier.classify(feats1)
print classifier.classify(feats2) 
```

此代码将打印 pos 两次，就好像我翻转了代码的最后 2 行一样，它将打印 neg 两次。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:57:42.060

改变

```
features['contains(%s)' % word] = (word in document_words) 
```

到

```
features[word] = (word in document) 
```

否则分类器只知道“包含（...）”形式的“单词”，因此对`"i love this city"`

* * *

```
import nltk.tokenize as tokenize
import nltk
import random
random.seed(3)

def bag_of_words(words):
    return dict([word, True] for word in words)

def document_features(document): 
    features = {}
    for word in word_features:
        features[word] = (word in document)
        # features['contains(%s)' % word] = (word in document_words)
    return features

movie_reviews = nltk.corpus.movie_reviews

documents = [(set(movie_reviews.words(fileid)), category)
             for category in movie_reviews.categories()
             for fileid in movie_reviews.fileids(category)]
random.shuffle(documents)

all_words = nltk.FreqDist(w.lower() for w in movie_reviews.words())
word_features = all_words.keys()[:2000] 

train_set = [(document_features(d), c) for (d, c) in documents[:200]]

classifier = nltk.NaiveBayesClassifier.train(train_set)

classifier.show_most_informative_features()
for word in ('love', 'hate'):
    # No hope in passing the tests if word is not in word_features
    assert word in word_features
    print('probability {w!r} is positive: {p:.2%}'.format(
        w = word, p = classifier.prob_classify({word : True}).prob('pos')))

tests = ["i love this city",
         "i hate this city"]

for test in tests:
    words = tokenize.word_tokenize(test)
    feats = bag_of_words(words)
    print('{s} => {c}'.format(s = test, c = classifier.classify(feats))) 
```

产量

```
Most Informative Features
                   worst = True              neg : pos    =     15.5 : 1.0
              ridiculous = True              neg : pos    =     11.5 : 1.0
                  batman = True              neg : pos    =      7.6 : 1.0
                   drive = True              neg : pos    =      7.6 : 1.0
                   blame = True              neg : pos    =      7.6 : 1.0
                terrible = True              neg : pos    =      6.9 : 1.0
                  rarely = True              pos : neg    =      6.4 : 1.0
                 cliches = True              neg : pos    =      6.0 : 1.0
                       $ = True              pos : neg    =      5.9 : 1.0
               perfectly = True              pos : neg    =      5.5 : 1.0
probability 'love' is positive: 61.52%
probability 'hate' is positive: 36.71%
i love this city => pos
i hate this city => neg 
```

# java - 建造砖金字塔

> ID：13504425
> 
> 赞同：0
> 
> 时间：2012-11-22T00:53:21.853
> 
> 标签：java

我要解决的问题是在用单独的砖块建造的窗口中建造一个金字塔。通过代码打击，我希望第一排应该有 1 块砖，第 2 排应该有 2 块砖，第 3 排应该有 3 块，一直到金字塔底部的 12 块砖。相反，只有 1 块砖出现在屏幕中央。我能做些什么来更正我的代码？

```
import acm.program.*;
import acm.graphics.*;

public class BrickPyramid extends GraphicsProgram{          

        public void run() {
         /** xBrick, yBrick trying to calculate for the center of the window **/ 

         double xBrick = (getWidth() - BRICK_WIDTH) / 2 ;              
         double yBrick = (getHeight() - BRICK_HEIGHT) /2 ; 

         /** getting the size of the brick by multiplying the brick width by brick height **/ 
         double buildingBrick = BRICK_WIDTH * BRICK_HEIGHT; 

           for (int i = 0 ; i <= 12; i ++ ){
               for (int j = 0; j < BRICKS_IN_BASE; j++){

                   double x = i * buildingBrick; 
                   double y = j * buildingBrick; 

               /* adding the brick with starting point xbrick, ybrick **/
                   GRect brick = new GRect (xBrick, yBrick, BRICK_WIDTH, BRICK_HEIGHT);
                   add(brick);

               } 
           }

    }
private static final int  BRICK_WIDTH = 100;
private static final int  BRICK_HEIGHT = 50;
private static final int BRICKS_IN_BASE = 12;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:01:33.353

您使用此行多次执行构建所有砖块：

```
GRect brick = new GRect (xBrick, yBrick, BRICK_WIDTH, BRICK_HEIGHT); 
```

但是您永远不会更改传递给构造函数的任何变量的值，因此砖块都绘制在同一个地方。

您需要为每个积木更改这些值。也许使用 i 和 j 来确定这些值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T08:51:03.217

不知道您是否仍在寻找答案，但这段代码可以完成工作：

公共类 Pyramid 扩展 GraphicsProgram {

私有静态最终 int BRICK_WIDTH = 30;

```
private static final int BRICK_HEIGHT = 12;

public void run() {

    double xBrick = (getWidth() - BRICK_WIDTH) / 2 ;              
    double yBrick = (getHeight() - BRICK_HEIGHT) /2 ; 

    for (int n=1;n<15;n++){
       for (int m=0;m<=n-1;m++){

        GRect Brick =new GRect(xBrick-(BRICK_WIDTH*(n-1))/2+m*BRICK_WIDTH,yBrick+BRICK_HEIGHT*(n-1),BRICK_WIDTH,BRICK_HEIGHT);
        add(Brick);

        }
      }
} 
```

}

# android - 导入Android项目报错

> ID：13504428
> 
> 赞同：0
> 
> 时间：2012-11-22T00:53:34.647
> 
> 标签：android, import, directory, r.java-file

我从网上下载了一个 Android 开源代码。

当我将它导入库时，它没有“gen文件夹”，所以我手动

创建一个然后我使用“刷新”和“项目清理......”

日食仍然不会自动生成 R.java 文件。

以及为什么我不能 "" import com.codeminders.ardrone.ARDrone;"

我的项目中已经有了该文件夹。

我怎样才能解决这个问题？！

[https://dl.dropbox.com/u/33585022/Screen%20Shot%202012-11-22%20at%208.41.05%20AM.png](https://dl.dropbox.com/u/33585022/Screen%20Shot%202012-11-22%20at%208.41.05%20AM.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:41:24.933

我有同样的错误，我修复了这个。请记住，我不应该修改或创建 R 文件。我认为您在使用 Eclipse 时遇到了错误。尝试下载新的 Elipse 和确切的 Android SDK。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T00:55:04.800

这意味着您有一个未解决的构建路径问题，或者您的一个 xml 文件中存在错误。

查看 yoru 图像后，您引用的包与资源管理器中的任何内容都不匹配。它必须有一个匹配的包引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:29:06.043

我认为您缺少您使用的 jar 文件或项目库。尝试将它们添加到您的构建路径中。

# c++ - 在后面的 C++ 代码中设置控件样式

> ID：13504429
> 
> 赞同：0
> 
> 时间：2012-11-22T00:53:39.140
> 
> 标签：c++, styles, winrt-xaml

我想更改 C++ 代码隐藏中的隐式样式，但文档没有给我任何明确的方向。

基本上，我想这样做（如何在 C# 中完成）。

```
public MainPage()
{
    this.InitializeComponent();
    Windows.UI.Xaml.Style style = new Windows.UI.Xaml.Style { TargetType = typeof(FlipViewItem) };
    style.Setters.Add(new Windows.UI.Xaml.Setter(FlipViewItem.IsTabStopProperty, false));
    this.Resources.Add(style.TargetType, style);
 } 
```

但是在 C++ 中。这确保 FlipViewItems 默认不是制表位。

干杯，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T22:17:34.127

Try something like

```
auto comicFont= ref new Windows::UI::Xaml::Media::FontFamily("Comic Sans MS");
auto comicFontStyle = ref new Windows::UI::Xaml::Style(TextBlock::typeid);
auto fSetter=ref new Setter(TextBlock::FontFamilyProperty, comicFont );
comicFontStyle->Setters->Append(fSetter);       
this->Resources->Insert(comicFontStyle->TargetType,comicFontStyle ); 
```

# java - Java 调用类型性能

> ID：13504431
> 
> 赞同：5
> 
> 时间：2012-11-22T00:53:47.403
> 
> 标签：java, performance

我整理了一个微基准，似乎表明以下类型的调用在预热后的多次迭代中花费的时间大致相同。

```
static.method(arg);
static.finalAnonInnerClassInstance.apply(arg);
static.modifiedNonFinalAnonInnerClassInstance.apply(arg); 
```

有没有人发现证据表明这些不同类型的调用总体上会有不同的性能特征？我的发现是他们没有，但我发现有点令人惊讶（特别是知道字节码至少对于静态调用有很大不同）所以我想找出其他人是否有任何证据。

如果它们确实具有相同的确切性能，那么这意味着在修改后的非最终情况下具有该级别的间接性不会受到任何惩罚。

我知道标准的优化建议是：“编写你的代码和配置文件”，但我正在编写框架代码生成之类的东西，所以没有要配置的特定代码，静态和非最终之间的选择对于灵活性都相当重要和可能的表现。我在 microbenchmark 中使用框架代码，这就是为什么我不能在此处包含它的原因。

我的测试是在 Windows JDK 1.7.0_06 上运行的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:08:35.880

如果您在紧密循环中对其进行基准测试，JVM 会缓存该实例，因此没有明显的区别。

如果代码在实际应用程序中执行，

1.  如果期望背靠背执行非常快，例如`String.length()`用在 中`for(int i=0; i<str.length(); i++){ short_code; }`，JVM 会对其进行优化，不用担心。

2.  如果执行的足够频繁，实例很可能在 CPU 的 L1 缓存中，则实例的额外负载非常快；不用担心。

3.  否则，会有不小的开销；但它执行的频率很低，在应用程序的总成本中几乎不可能检测到开销。不用担心。

# android - 使用 Google API 在 Android 中翻译

> ID：13504436
> 
> 赞同：1
> 
> 时间：2012-11-22T00:54:50.327
> 
> 标签：android, google-translate

我想在 Android 中创建一个翻译应用程序，我使用 Google Translate API，但它有错误，请帮助我修复它。这是我的代码

```
public void onClick(View v) {
        // TODO Auto-generated method stub
        String InputString;
        String OutputString = null;
        InputString = InputText.getText().toString();

        try {

            Translate.setHttpReferrer("http://translate.google.com.vn/");
            OutputString = Translate.DEFAULT.execute(InputString, Language.ENGLISH, Language.VIETNAMESE);    ////////

        } catch (Exception ex) {
            ex.printStackTrace();
            OutputString = "Error";

        }

        OutputText.setText(OutputString);               
    } 
```

这是我的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.stthing"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
<uses-permission android:name="android.permission.INTERNET" />
    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**Translate.setHttpReferrer("http://translate.google.com.vn/");**行中的错误

 **```
The method setHttpReferrer(String) is undefined for the type Translate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:26:43.193

我不确定您是否知道，但 Translate API 不再免费。所以你还需要设置 API 密钥..

而不是使用

```
Translate.setHttpReferrer("http://translate.google.com.vn/"); 
```

采用

```
GoogleAPI.setHttpReferrer("http://translate.google.com.vn/");
GoogleAPI.setKey(/* Enter your API key here */); 
```**

# android - Android：如何在 Youtube 应用中创建扩展列表

> ID：13504437
> 
> 赞同：3
> 
> 时间：2012-11-22T00:54:56.270
> 
> 标签：android, list, listview, youtube, expandablelistview

我从 2012 年 11 月开始查看 Android YouTube 应用程序，他们有一个类似“列表”的视图，显示当前视频的相关视频。如果他们点击“更多”部分，它会在下面加载更多。

我想知道的是他们是如何一起实现这个屏幕的。它似乎不是 Android 中的标准 ExpandableList。但是有人可以提供一些意见吗？

我通过创建一个 LinearLayout 然后在创建它们时向视图组添加更多内容来完成类似的操作。但是问题是它们不是由适配器管理的，并且视图是非常静态的。

![YouTube Android 应用程序相关视频列表不断增长。](../Images/ff502bff38742b934c8f45c2c545a545.png)

# javascript - executeQueryLocally 错误

> ID：13504442
> 
> 赞同：4
> 
> 时间：2012-11-22T00:55:20.340
> 
> 标签：javascript, breeze

Breeze 的最新版本似乎破坏了 executeQueryLocally。例如：

```
var query = new breeze.EntityQuery()
            .from("Items").where('id', '==', id);

return manager.executeQueryLocally(query); 
```

我遇到的问题是`stringEquals`在`getPredicateFn`.

在上面的简单查询的情况下，`trim()`正在调用 id 导致

> 5 没有方法'trim'

例外。

这是 Breeze stringEquals 函数：

```
 function stringEquals(a, b, lqco) {
    if (lqco.usesSql92CompliantStringComparison) {
        a = (a || "").trim();
        b = (b || "").trim();
    }
    if (!lqco.isCaseSensitive) {
        a = (a || "").toLowerCase();
        b = (b || "").toLowerCase();
    }
    return a == b;
} 
```

**编辑**

`id`定义为`int`在 Items 模型上，并且是 中的数字`JavaScript`。Breeze 的早期版本没有这样做`stringEqual`，因此没有尝试修剪数字。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:44:37.220

好的，这应该修复。请检查 v0.73.1。Breeze 谓词现在将在比较不同类型的值（如字符串与数字）时执行类型强制。

# c++ - 如何将 CLI Image^ 转换为任何标准 C++ 位图

> ID：13504445
> 
> 赞同：0
> 
> 时间：2012-11-22T00:55:50.210
> 
> 标签：c++, .net, image, c++-cli, bmp

我已将 JPG 图像加载到`Image^`对象，但现在我想“返回”在我的程序中使用标准 C++，所以我想以某种方式将 Image^ 对象转换为任何对象`BMP class Object`（我不知道哪个 c++ 类好） .

我想编辑该位图中特定像素的颜色。

请帮我做。

```
 // a.cpp : main project file.

#include "stdafx.h"
#include "Form1.h"
#using <mscorlib.dll> //requires CLI
using namespace System;
using namespace System::IO;
using namespace System::Windows::Media::Imaging;
using namespace System::Windows::Media;
using namespace System::Windows::Controls;
using namespace a;

[STAThreadAttribute]
int main(array<System::String ^> ^args)
{
    // Enabling Windows XP visual effects before any controls are created
    Application::EnableVisualStyles();
    Application::SetCompatibleTextRenderingDefault(false); 

    // Create the main window and run it
    Application::Run(gcnew Form1());

    // Open a Stream and decode a JPEG image
        Stream^ imageStreamSource = gcnew FileStream("C:/heart.jpg", FileMode::Open, FileAccess::Read, FileShare::Read);

        JpegBitmapDecoder^ decoder = gcnew JpegBitmapDecoder(imageStreamSource, BitmapCreateOptions::PreservePixelFormat, BitmapCacheOption::Default);
        BitmapSource^ bitmapSource = decoder->Frames[0];//< --mamy bitmape
        // Draw the Image
        System::Windows::Controls::Image^ myImage = gcnew System::Windows::Controls::Image();  //<--- this image in the Form1  -------
        myImage->Source = bitmapSource;
        myImage->Stretch = Stretch::None;

//CONVERT MYIMAGE INTO C++ BMP

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:44:30.253

尝试[Image.save](http://msdn.microsoft.com/en-us/library/ms142147.aspx)方法。在那里，您可以保存到文件或流，并且可以指定文件格式。

# javascript - 更改生成它的值时，动态字符串不会改变

> ID：13504451
> 
> 赞同：-1
> 
> 时间：2012-11-22T00:57:53.983
> 
> 标签：javascript, json, string

[http://jsfiddle.net/zzTsc/](http://jsfiddle.net/zzTsc/)

我有一个 JSON，其中包含一些连接成字符串的值，但是当我更改 JSON 的值时，字符串不采用名称值。如何在不重新声明相同字符串的情况下使字符串采用新值？

请参阅我可以轻松地将其放在`string = name.first + "<br />"+name.last;`更改 JSON 值的下方，但是当我想编辑该字符串的格式时，我必须更改它两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:02:30.647

这不是变量的工作方式。您必须再次设置 的值`string`才能更新。

这是一个改进的版本，因此如果您想编辑某些内容，则不必更改两次：

```
function generateString(name) {
    return name.first + "<br />"+name.last;
}
var string = generateString(name); 
```

[演示](http://jsfiddle.net/zzTsc/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:02:57.740

这不会像您描述的那样起作用，但是您可以声明一个返回适当字符串的函数。

所以而不是

```
string = name.first + "<br />" + name.last; 
```

你会有：

```
var stringfunction = function() {return name.first + "<br />" + name.last;} 
```

当你想使用它时，你会调用它：

```
alert(string); //old
alert(stringfunction()); //new 
```

编辑：我刚刚意识到您正在谈论更改格式（大概在运行时）。在 javascript 中有多种使用字符串格式的方法，这意味着您可以在 中使用“格式”变量`stringfunction`，您可以在运行时更改该变量以修改结果字符串的格式。自从我使用其中一种工具以来已经太久了，所以我将把它留给其他人来解释如何在 javascript 中进行字符串格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:03:00.723

这是因为您的字符串是基本类型，因此包含实际数据而不是指针。当您更改您认为应该更改字符串的数据时，它只会更改数据。只需重新发布用于构造字符串的代码即可看出这一点

```
$('#test').empty().append(name.first + "<br />"+name.last); 
```

[http://jsfiddle.net/zzTsc/4/](http://jsfiddle.net/zzTsc/4/)

# angularjs - 引导后向模块添加指令并应用于动态内容

> ID：13504452
> 
> 赞同：8
> 
> 时间：2012-11-22T00:58:11.400
> 
> 标签：angularjs

我有一个定义了模块（myModule）的网页，我正在使用

```
angular.bootstrap(element,[myModule.name]); 
```

单击一个按钮后，我添加了动态 html 并使用编译

```
$compile('<my-element data="data"></my-element>',$scope.$new()); 
```

该指令是使用添加的

```
myModule.directive('myElement',function(){}); 
```

问题是当我在调用引导程序之前添加指令时，$compile 最终会正确处理我的指令。但是，如果在调用 bootstrap 后添加指令，$compile 不会对我的 html 执行任何操作。它只是将类 ng-scope 添加到其中，并且不处理指令/标记。

就我而言，并非所有指令都会在调用引导程序之前加载。在调用引导程序后加载指令的情况下，如何在页面中使用它？

谢谢。

编辑：只是为了澄清。所有指令都是动态加载的。我在引导之前加载的那些工作正常。我在引导失败后加载的那些。当我交换加载的指令时，我可以得到相同的结果，所以它不是指令，但似乎是在引导之后，新添加的指令似乎没有生效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T22:32:06.937

注册惰性控制器或指令的事情是您必须分别掌握***$controllerProvider***和***$compileProvider***。

它只能在配置阶段完成，因此您必须保留引用，直到加载控制器/指令。

最近我在处理控制器的延迟加载，今天我添加了对指令的支持，在这里查看我的代码：

[**https://github.com/matys84pl/angularjs-requirejs-lazy-controllers/**](https://github.com/matys84pl/angularjs-requirejs-lazy-controllers)

特别是这个模块[**lazy-directives.js**](https://github.com/matys84pl/angularjs-requirejs-lazy-controllers/blob/master/app/js/utils/lazy-directives.js)

**注意**：我在我的项目中使用*RequireJS*，但是将我的解决方案应用于*yepnope*应该很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-15T09:16:53.870

[这个小提琴](http://jsfiddle.net/8Bf8m/33/)展示了如何动态加载/注册和使用：

*   角度控制器（使用`$controllerProvider`）
*   Angular 指令（使用`$compileProvider`）
*   Angular 部分模板（使用`$templateCache`）

# 代码：设置

```
// Initialize app.lazyController and app.lazyDirective.
// We will later use them to create controller and directives dynamically.
var app = angular.module('app', []);
app.config(function($controllerProvider, $compileProvider) {
        // see page 12 of:
        //    http://www.slideshare.net/nirkaufman/angularjs-lazy-loading-techniques
        app.lazyController = $controllerProvider.register;

        // see: http://jsfiddle.net/8Bf8m/33/
        app.lazyDirective = $compileProvider.directive;
    });

// set of partials
var partials = [];

// store scope & templateCache, so we can dynamically insert partials
var scope, templateCache;

// define main controller
function MainCtrl($scope, $templateCache) {
    $scope.partials = partials;

    scope = $scope;
    templateCache = $templateCache;
} 
```

# 代码：示例

```
var maxPartials = 3;
var i = 0;
var timer = setInterval(function() {
    var i = partials.length;

    app.lazyDirective('clickMe', function () { return {
        link : function (scope, element) {
            element.bind('click', function () {
                alert('Clicked: ' + element.text());
            });
        },
    };});

    // define controller
    var ctrlName = 'partial' + i + 'Ctrl';
    app.lazyController(ctrlName, function($scope) {
        $scope.text = 'hi ' + i;
    });

    // add partial template that I have available in string form
    var newPartial = {
        name: 'template' + i,
        content: '<div ng-controller="' + ctrlName + '" class="a' + i + '">' +
        '<input type="text" ng-model="text"></input>'+
        '{{text}} <br/>' + 
        '<button click-me="">Click Me!</button>' +
        '</div> <br/> <br/>'
    };
    partials[i] = newPartial;

    // add template and notify angular of the content change
    templateCache.put(partials[i].name, partials[i].content);
    scope.$apply();

    // stop timer
    if (partials.length >= maxPartials)  clearInterval(timer);
}, 1000); 
```

# android - 在片段上动态切换视图

> ID：13504454
> 
> 赞同：0
> 
> 时间：2012-11-22T00:58:34.807
> 
> 标签：android, android-layout, android-fragments

我怎样才能做到这一点？

没有视图显示...

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.details, container, false);

        InitAlerts();
        return v;
    }

    private void InitAlerts()
    {
        //TODO Find step number
        //Temp: already set to 1

        if(stepNum == 1) {
            startStepOne();
        } else if(stepNum == 2) {
            startStepTwo();
        } else {
            startStepSummary();
        }
    }

    private void startStepOne() {
        LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService( Context.LAYOUT_INFLATER_SERVICE );
        View v = inflater.inflate( R.layout.usage_alerts_step_one, null, false);
        alertsStepOneConfirm = (Button) v.findViewById(R.id.alertsStepOneConfirm);
        alertsStepOneConfirm.setOnClickListener(this);
        v.bringToFront();
    }

    private void startStepTwo() {
        LayoutInflater inflater = (LayoutInflater) getActivity().getSystemService( Context.LAYOUT_INFLATER_SERVICE );
        View v = inflater.inflate( R.layout.usage_alerts_step_two, null, false);
        stepTwoConfirm = (Button) v.findViewById(R.id.stepTwoConfirm);
        stepTwoConfirm.setOnClickListener(this);
        v.bringToFront();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:55:51.810

1) 在 R.layout.details 布局上调用 addView 方法，并以相应的步骤视图为参数。您需要从每个 step* 方法返回膨胀视图。

2）如果你不需要R.layout.details，你可以让onCreateView返回对应步骤的视图

# javascript - CSS 在范围和增量内随机背景图像位置；变换时间随机数

> ID：13504455
> 
> 赞同：1
> 
> 时间：2012-11-22T00:58:53.733
> 
> 标签：javascript, css, html, css-animations

我正在处理一个 480x480px 的精灵，225 个单独的 32x32px 图像布置在 15x15 网格中，所以它是一个完美的方形 jpeg。我在尝试着：

1.  创建一种在背景位置字段中生成随机数的方法，该方法将在我指定的范围和增量内注入一个随机数（范围为 0-480，inc 为 32）。这是为了调用 div 的随机精灵背景图像。

2.  生成一个类似的随机数（只是范围）以用于 div 变换的时间：rotateY(180deg) 样式。这是为了让 div “翻转”并返回。我有一个已经在代码中工作的前/后转换，但当然时间是统一的。

3.  找到一种方法来克隆或复制该 div 及其内容以填充包含的内容。

我一直在努力尝试制作类似的东西：

```
<div class="face back" style="
background-position-x: [myNumber]px;
background-position-y: [myNumber]px;
"></div> 
```

使用脚本，例如：

```
var myNumber = Math.floor((Math.random()*14)+1);
myNumber = myNumber *32; 
```

我知道我根本没有以正确的方式去做。

所需的结果是一个 div（可能是背景或页脚），其中包含数十个（可能数百个）32x32px 看似随机的图像。每一个都以不同的间隔过渡到不同的图像。显然我正在寻找任何优雅的方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:15:46.587

```
procces= function() {
  TimeSpeed=100;
  startRange=1;
  stopRange=100;
  incrementRenge=5;
  setTimeout(function run(){
        if(startRange >=stopRange) {
          console.info("stop");
        }
        else {
          console.info("rinning");
          startRange+=Math.floor(Math.random()*incrementRenge);
          $(".face back").css({"background-position":startRange+"px ,"+startRange+"px"});
          setTimeout(function() {
            run()
          },TimeSpeed) 
        }
      },TimeSpeed)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:38:30.227

我不太确定你在说什么，但我会建议以下程序：

1.  获取对`<div>`应该用平铺图像网格填充的参考。
2.  得到它的宽度和高度，然后将`%`这些值除以平铺宽度加一：

    var rect = div.getBoundingClientRect();

    var numTiles = ( rect.width % tileWidth + 1 ) * ( rect.height % tileWidth + 1 );

3.  创建`numTiles`元素`<div>`并随机设置它们的背景位置：

    var bgTop = Math.floor(Math.random() * numTilesInMap);

    var bgLeft = Math.floor(Math.random() * numTilesInMap);

4.  我会简单地浮动所有 div 元素并将它们附加到容器中，因此容器应该有`overflow : hidden`，因为网格总是更大。

如果您想拥有唯一的随机数并且只需要与地图中可用的图像一样多的图块，则可以执行以下操作：

```
var randoms = {};
for( var i = 0; i < numImages.length; i++ ){
    randoms[i] = i;
};

var rand, index;
while( Object.keys( randoms ).length > 0 ){
    index = Math.round( Math.random() * ( Object.keys( randoms ).length - 1 ) );
    rand = randoms[ index ];

    //do something with the random number here

    delete randoms[ index ];
} 
```

我没有对此进行测试，它应该只是作为如何生成随机唯一数字的建议。它也可以用一个可能更快的数组来完成。

问候...

**编辑**

我在这里忘记提到的是，在 »div« 解决方案旁边，您还可以创建一个`<canvas>`并使用`drawImage()`具有随机值的方法，只要它已满，您只需在画布上绘制瓷砖地图的区域。这减少了 DOM 的大小，您可以创建与容器的确切大小相同的画布。如果您没有捕捉到任何导致 tilemap 区域或其他图像依赖参考的事件，这可能是最快的解决方案。

# javascript - 节点 REPL + 下划线不返回任何方法

> ID：13504457
> 
> 赞同：0
> 
> 时间：2012-11-22T00:59:17.073
> 
> 标签：javascript, node.js

刚刚开始使用 Node.js，并想尝试使用 Underscore 来测试一些想法。

[我在这里](http://www.2ality.com/2012/01/underscore-on-nodejs.html)、[这里](https://stackoverflow.com/questions/5691901/using-the-underscore-module-with-node-js?rq=1)和最后[在这里](https://stackoverflow.com/questions/10711561/why-does-requireunderscore-return-undefined-when-executed-at-the-node-js-rep)读过帖子。

我明白为什么`_`在 REPL 中使用 不起作用。但也不会重新分配下划线对象。

例如，

```
 > var _u = require('underscore');
   { _: 
    { [Function]
      VERSION: '1.0.2',
      forEach: [Function],
      map: [Function],
      reduce: [Function],
      reduceRight: [Function],
      detect: [Function],
      ...feeling good about myself...

 > _u.uniq([1,2,3,4,4,44]); 
```

回报：

```
TypeError: Object #<Object> has no method 'uniq'
at repl:1:4
at REPLServer.self.eval (repl.js:109:21)
at rli.on.self.bufferedCmd (repl.js:258:20)
at REPLServer.self.eval (repl.js:116:5)
at Interface.<anonymous> (repl.js:248:12)
at Interface.EventEmitter.emit (events.js:96:17)
at Interface._onLine (readline.js:200:10)
at Interface._line (readline.js:518:8)
at Interface._ttyWrite (readline.js:736:14)
at ReadStream.onkeypress (readline.js:97:10) 
```

除了重命名全局下划线对象之外，关于为什么这不起作用的任何想法？分配给的版本`_u`是**1.0.2**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:13:08.197

`1.0.2`一定很老了。`1.4.2`是当前版本。我敢打赌，该方法在该版本的库中根本不存在。

是时候升级了。

# java - Flyway 在使用 Ant 时无法在类路径上找到 Spring Java 迁移

> ID：13504458
> 
> 赞同：2
> 
> 时间：2012-11-22T00:59:36.810
> 
> 标签：java, ant, classpath, flyway

我在我的项目中设置了 Flyway，具有以下目录布局（不包括不相关的目录）：

```
$ tree database
database
├── lib
│   ├── flyway-ant-2.0.1.jar
│   ├── flyway-core-2.0.1.jar
│   ├── migrate.jar
│   ├── spring-beans-3.1.2.RELEASE.jar
│   ├── spring-core-3.1.2.RELEASE.jar
│   ├── spring-dao-2.0.8.jar
│   └── spring-jdbc-3.1.2.RELEASE.jar
└── updates
    ├── java
    │   └── database
    │       └── migrate
    │           └── V1_0__create_posts.java
    └── sql
        └── V1_1__create_users.sql 
```

以及 build.xml 的相关部分（flyway.url 和 flyway.driver 设置在此处未包含的属性文件中---Flyway 与数据库对话没有问题）：

```
<target name="path">
    <path id="migrate.build.path">
        <fileset dir="database/lib">
            <include name="flyway-*.jar"/>
        </fileset>
        <fileset dir="database/lib">
            <include name="spring-*.jar"/>
        </fileset>
    </path>
    <path id="flyway.lib.path">
        <fileset dir="database/lib">
            <include name="flyway-*.jar"/>
        </fileset>
    </path>
    <path id="flyway.classpath">
        <fileset dir="lib" includes="h2-*.jar"/>
        <fileset dir="database/lib" includes="migrate.jar"/>
    </path>
</target>

<target name="compile" depends="path">
    <mkdir dir="build"/>
    <javac srcdir="database/updates/java" destdir="build" includeantruntime="false" classpathref="migrate.build.path"/>
    <copy todir="build">
        <fileset dir="database/updates" excludes="**/*.java"/>
    </copy>
    <jar destfile="database/lib/migrate.jar" basedir="build" includes="sql/**,database/migrate/**"/>
</target>

<target name="init" depends="compile,path">
    <!-- imported tasks -->
    <taskdef uri="antlib:com.googlecode.flyway.ant" resource="com/googlecode/flyway/ant/antlib.xml" classpathref="flyway.lib.path"/>

    <property name="flyway.locations" value="sql,database.migrate"/>
</target>

<!-- flyway tasks -->
<target name="db:clean" depends="init">
    <flyway:clean/>
</target>
<target name="db:init" depends="init">
    <flyway:init/>
</target>
<target name="db:migrate" depends="init">
    <flyway:migrate/>
</target>
<target name="db:validate" depends="init">
    <flyway:validate/>
</target>
<target name="db:info" depends="init">
    <flyway:info/>
</target>
<target name="db:status" depends="init,db:info"/>
<target name="db:repair" depends="init">
    <flyway:repair/>
</target> 
```

这是在编译目标中创建的迁移 JAR 的布局：

```
$ unzip -l database/lib/migrate.jar 
Archive:  database/lib/migrate.jar
  Length     Date   Time    Name
 --------    ----   ----    ----
        0  01-14-13 16:27   META-INF/
      103  01-14-13 16:27   META-INF/MANIFEST.MF
        0  01-14-13 16:21   database/
        0  01-14-13 16:27   database/migrate/
        0  01-14-13 16:27   sql/
      538  01-14-13 16:27   database/migrate/V1_0__create_posts.class
        0  01-14-13 16:27   sql/V1_1__create_users.sql
 --------                   -------
      641                   7 files 
```

这是来自的输出`flyway:info`：

```
[flyway:info] +-------------+------------------------+---------------------+---------+
[flyway:info] | Version     | Description            | Installed on        | State   |
[flyway:info] +-------------+------------------------+---------------------+---------+
[flyway:info] | 0           | << Flyway Init >>      | 2013-01-14 14:14:09 | Missing |
[flyway:info] | 1.1         | create users           |                     | Pending |
[flyway:info] +-------------+------------------------+---------------------+---------+ 
```

Flyway 没有发现 .class 文件。我在这里做错了什么？

**编辑：**如果有人知道使用 Ant（没有 Maven，没有 Ivy）设置 Flyway 的工作示例，将不胜感激。

* * *

## 更新

事实证明 Flyway 会找到`JdbcMigration`课程，但不会`SpringJdbcMigration`。

此迁移已成功加载：

```
/* database/updates/java/database/migrate/V1_0__create_posts.java */
import com.googlecode.flyway.core.api.migration.jdbc.JdbcMigration;
import java.sql.Connection;

public class V1_0__create_posts implements JdbcMigration {
    public void migrate(Connection conn) throws Exception {
        conn.createStatement().execute(
            "create table posts (id integer primary key, title varchar(255), body text)"
        );
    }
} 
```

但是这个被跳过了：

```
/* database/updates/java/database/migrate/V1_0__create_posts.java */
import org.springframework.jdbc.core.JdbcTemplate;
import com.googlecode.flyway.core.api.migration.spring.SpringJdbcMigration;

public class V1_0__create_posts implements SpringJdbcMigration {
    public void migrate(JdbcTemplate template) throws Exception {
        template.execute(
            "create table posts (id integer primary key, title varchar(255), body text)"
        );
    }
} 
```

这是使用 a 时的 Ant 调试输出`SpringJdbcMigration`：

```
[antlib:com.googlecode.flyway.ant] Could not load definitions from resource com/googlecode/flyway/ant/antlib.xml. It could not be found.                  [4/873]
[flyway:info] Database: H2 1.2
[flyway:info] DDL Transactions Supported: false
[flyway:info] Schema: PUBLIC
[flyway:info] No metadata table upgrade necessary
[flyway:info] Spring Jdbc available: false
[flyway:info] Scanning for resources at 'database/migrate' (Prefix: 'V', Suffix: '.sql')
[flyway:info] Scanning URL: jar:file:.../flyway-sample/database/lib/migrate.jar!/database/migrate
[flyway:info] JBoss VFS v2 available: false
[flyway:info] Filtering out resource: database/migrate/ (filename: )
[flyway:info] Filtering out resource: database/migrate/V1_0__create_posts.class (filename: V1_0__create_posts.class)
[flyway:info] Scanning for classes at 'database/migrate' (Implementing: 'com.googlecode.flyway.core.api.migration.jdbc.JdbcMigration')
[flyway:info] Scanning URL: jar:file:.../flyway-sample/database/lib/migrate.jar!/database/migrate
[flyway:info] Filtering out resource: database/migrate/ (filename: )
[flyway:info] Scanning for resources at 'db/migration' (Prefix: 'V', Suffix: '.sql')
[flyway:info] Unable to determine URL for classpath location: db/migration (ClassLoader: AntClassLoader[.../flyway-sample/lib/h2-1.2.135.jar:.../flyway-sample/database/lib/migrate.jar])
[flyway:info] Scanning for classes at 'db/migration' (Implementing: 'com.googlecode.flyway.core.api.migration.jdbc.JdbcMigration')
[flyway:info] Unable to determine URL for classpath location: db/migration (ClassLoader: AntClassLoader[.../flyway-sample/lib/h2-1.2.135.jar:.../flyway-sample/database/lib/migrate.jar])
[flyway:info] Scanning for resources at 'sql' (Prefix: 'V', Suffix: '.sql')
[flyway:info] Scanning URL: jar:file:.../flyway-sample/database/lib/migrate.jar!/sql
[flyway:info] Filtering out resource: sql/ (filename: )
[flyway:info] Found resource: sql/V1_1__create_users.sql
[flyway:info] Scanning for classes at 'sql' (Implementing: 'com.googlecode.flyway.core.api.migration.jdbc.JdbcMigration')
[flyway:info] Scanning URL: jar:file:.../flyway-sample/database/lib/migrate.jar!/sql
[flyway:info] Filtering out resource: sql/ (filename: )
[flyway:info] Filtering out resource: sql/V1_1__create_users.sql (filename: V1_1__create_users.sql)
[flyway:info] +-------------+------------------------+---------------------+---------+
[flyway:info] | Version     | Description            | Installed on        | State   |
[flyway:info] +-------------+------------------------+---------------------+---------+
[flyway:info] | 0           | << Flyway Init >>      | 2013-01-14 14:14:09 | Missing |
[flyway:info] | 1.1         | create users           |                     | Pending |
[flyway:info] +-------------+------------------------+---------------------+---------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:08:36.970

**Java 迁移**必须首先**编译**。（Flyway 寻找 .class 文件）

我已经更新[了文档](http://flywaydb.org/documentation/ant/)以使其更清晰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:12:33.907

原来我没有所有的 Spring JDBC 迁移依赖项。

我下载[了带有 Ant 和 Spring 依赖项的最新 Flyway (2.0.3)](http://code.google.com/p/flyway/downloads/detail?name=flyway-ant-2.0.3-dist-with-spring.zip&can=2&q=)，将新的 JAR 添加到类路径中，Flyway 现在可以找到 Spring JDBC 迁移。

# java - RichFaces：TabPanel 和参数

> ID：13504460
> 
> 赞同：4
> 
> 时间：2012-11-22T00:59:41.487
> 
> 标签：java, jsf, richfaces, tabpanel

目前，我正在基于 JSF 2.0 的 Web 应用程序中处理rich:tabPanel。遇到一个很奇怪的问题，和我的richface组件有关。基本上，我在每个面板上打印一些相同的东西（这里，它是一个节目的时间表，选项卡包含日期，选项卡的内容包含不同的时间）。

因此，我有这样的事情：

```
<rich:tabPanel>
     <c:forEach items="#{show}" var="hour" ...>
       <rich:tab>
        <a4j:commandLink ...>
             <a4j:param value="hour.something" assignTo="#{bean.method}" />
        </a4j:commandLink>
     </ ..... > 
```

当我点击第一个命令链接时，当我的网页显示出来时，就可以了。但是当我选择另一个选项卡并单击命令链接时，不会调用“bean.method”。我需要再次单击才能调用该函数。

最后，当我将 tabPanel 设置为“switchtype=server”时，它运行良好（无需单击 2 次）。

但这不是目的，我想使用客户端模式。我看到在richfaces v3的JIRA上，这个问题已经解决了[JIRA JBoss](https://issues.jboss.org/browse/RF-175?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)。但是没有更多信息（除了评论，但它不起作用）。

如果有人可以提供帮助，那就太好了。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:34:25.960

问题是您使用的是嵌套表单（表单中的表单）。中不建议这样做`JSF`。即使在`HTML`它是无效的。删除一个`form`，它会工作。
也阅读[这篇文章](https://stackoverflow.com/questions/7371903/multiple-hform-in-a-jsf-page)。

# scala - 重复函数调用，直到我们在 Scala 中得到非空的 Option 结果

> ID：13504461
> 
> 赞同：11
> 
> 时间：2012-11-22T00:59:42.747
> 
> 标签：scala, loops

Scala 中的一个非常新手的问题 - 我如何在 Scala 中执行“重复函数，直到返回的内容符合我的标准”？

鉴于我有一个函数要调用，直到它返回结果，例如，定义如下：

```
def tryToGetResult: Option[MysteriousResult] 
```

我想出了这个解决方案，但我真的觉得它*很难*看：

```
var res: Option[MysteriousResult] = None
do {
  res = tryToGetResult
} while (res.isEmpty)
doSomethingWith(res.get) 
```

或者，同样丑陋：

```
var res: Option[MysteriousResult] = None
while (res.isEmpty) {
  res = tryToGetResult
}
doSomethingWith(res.get) 
```

我真的觉得有一个解决方案，没有和没有那么多手动检查是否为空`var`的麻烦。`Option`

相比之下，我在这里看到的 Java 替代方案似乎更干净：

```
MysteriousResult tryToGetResult(); // returns null if no result yet

MysteriousResult res;
while ((res = tryToGetResult()) == null);
doSomethingWith(res); 
```

雪上加霜，如果我们不需要`doSomethingWith(res)`并且只需要从这个函数中返回它，Scala vs Java 看起来像这样：

### 斯卡拉

```
def getResult: MysteriousResult = {
  var res: Option[MysteriousResult] = None
  do {
    res = tryToGetResult
  } while (res.isEmpty)
  res.get
} 
```

### 爪哇

```
MysteriousResult getResult() {
    while (true) {
        MysteriousResult res = tryToGetResult();
        if (res != null)  return res;
    }
} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T01:51:39.307

您可以使用`Stream`'`continually`方法精确地做到这一点：

```
val res = Stream.continually(tryToGetResult).flatMap(_.toStream).head 
```

或者（可能更清楚）：

```
val res = Stream.continually(tryToGetResult).dropWhile(!_.isDefined).head 
```

这种方法相对于显式递归（除了简洁）的一个优点是它更容易修补。例如，假设我们决定只想尝试一千次得到结果。如果在此之前出现了一个值，我们希望它包含在 a`Some`中，如果没有，我们希望 a `None`。我们只是在上面的代码中添加了几个字符：

```
Stream.continually(tryToGetResult).take(1000).flatMap(_.toStream).headOption 
```

我们有我们想要的。（注意`Stream`是惰性的，所以即使`take(1000)`存在 ，如果一个值在 3 次调用 后出现`tryToGetResult`，它只会被调用 3 次。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T01:17:17.760

执行这样的副作用让我有点死在里面，但是这个怎么样？

```
scala> import scala.annotation.tailrec
import scala.annotation.tailrec

scala> @tailrec
     | def lookupUntilDefined[A](f: => Option[A]): A = f match {
     |   case Some(a) => a
     |   case None => lookupUntilDefined(f)
     | }
lookupUntilDefined: [A](f: => Option[A])A 
```

然后像这样调用它

```
scala> def tryToGetResult(): Option[Int] = Some(10)
tryToGetResult: ()Option[Int]

scala> lookupUntilDefined(tryToGetResult())
res0: Int = 10 
```

您可能需要提供`lookupUntilDefined`一个附加参数，以便在 f 从未定义的情况下最终停止。

# java - SOAP：将方法从 AXIS 1.4 迁移到 CXF 以添加新标头

> ID：13504467
> 
> 赞同：0
> 
> 时间：2012-11-22T01:00:28.583
> 
> 标签：java, soap, cxf, axis

你好！我正在尝试向 SOAP 调用添加标头。我是使用 Web 服务的新手。

每次我需要使用 Web 服务下载文件时，我都需要添加如下标题：

```
<UserIdHeader xmlns="http://www.stats.com/">
    <TicketId>defe3a08-4c8a-47c4-9303-98e09c475532</TicketId>
</UserIdHeader> 
```

我正在使用 CXF。我有一个使用 Axis 1.4 制作的示例。唯一剩下的（我希望）是添加这个标题。

这是我必须更新的内容：

```
private static void addHeader(String ticketId) {
    SOAPHeaderElement header = new SOAPHeaderElement("http://www.stats.com/", "UserIdHeader");
    SOAPElement node;

    org.apache.axis.client.Stub s = (Stub) service;
    s.clearHeaders();

    try {
        node = header.addChildElement("TicketId");
        node.addTextNode(ticketId);
        s.setHeader((org.apache.axis.message.SOAPHeaderElement) header);
    } catch (SOAPException e) {
      e.printStackTrace();
    }
} 
```

这就是我尝试更新的方式：

```
private static void addHeader(String ticketId) throws JAXBException, ParserConfigurationException {
    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();

    Element eTicketId = doc.createElement("TicketId");
    eTicketId.setTextContent(ticketId);

    List<Header> headers = new ArrayList<Header>();
    Header header = new Header(new QName("http://www.stats.com/", "UserIdHeader"), eTicketId, 
            new JAXBDataBinding(String.class));
    headers.add(header);

    BindingProvider.class.cast(service).getRequestContext().put(Header.HEADER_LIST, headers);
} 
```

但我得到以下异常：

```
[PhaseInterceptorChain] Interceptor for {http://www.stats.com/}Service#{http://www.stats.com/}GetFileList has thrown exception, unwinding now
org.apache.cxf.interceptor.Fault: Marshalling Error: org.apache.xerces.dom.ElementImpl is not known to this context
    at org.apache.cxf.jaxb.JAXBEncoderDecoder.marshall(JAXBEncoderDecoder.java:261)
    at org.apache.cxf.jaxb.io.DataWriterImpl.write(DataWriterImpl.java:168)
    at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.writeSoapEnvelopeStart(SoapOutInterceptor.java:156)
    at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.handleMessage(SoapOutInterceptor.java:81)
    at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor.handleMessage(SoapOutInterceptor.java:61)
    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:262)
    at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:464)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:367)
    at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:320)
    at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:89)
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134) 
```

我什至尝试添加一个拦截器，但我不知道如何传递ticketId。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:25:40.960

如果您正在创建 DOM 元素，则不应将数据绑定设置到 Header 对象中。如果您使用的是 JAXB（或其他）类型，则仅需要数据绑定。CXF 直接处理 DOM 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:56:26.003

这就是我使用该方法的方式（出于某种原因，使用以前的方法未编写标头）：

```
private static void addHeader(String ticketId) {
    try {
        SOAPFactory sf = SOAPFactory.newInstance();
        SOAPElement userIdHeaderElement = sf.createElement(new QName("http://www.stats.com/", "UserIdHeader"));
        SOAPElement ticketIdElement = sf.createElement(new QName(null, "TicketId"));
        ticketIdElement.addTextNode(ticketId);
        userIdHeaderElement.addChildElement(ticketIdElement);
        List<Header> headers = new ArrayList<Header>();
        Header dummyHeader = new Header(new QName("http://www.stats.com/"), userIdHeaderElement);
        headers.add(dummyHeader);
        BindingProvider.class.cast(service).getRequestContext().put(Header.HEADER_LIST, headers);
    } catch (SOAPException e) {
        e.printStackTrace();
    }
} 
```

# apache - 设置 pow.cx 以将 Apache 用于 PHP 应用程序

> ID：13504473
> 
> 赞同：0
> 
> 时间：2012-11-22T01:01:08.790
> 
> 标签：apache, virtualhost, pow

[我已经按照他们在本](https://github.com/37signals/pow/wiki/Running-Pow-with-Apache)教程中建议的方式设置了 Pow 和 Apache 。我的`httpd-vhosts.conf`包含以下条目。

```
<VirtualHost *:80>
    DocumentRoot /Users/michael/Dropbox/Development/test
    ServerName test.dev

    <Directory "/Users/michael/Dropbox/Development/test">
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

当我到达[http://test.dev/](http://test.dev/)时，我仍然收到 403 Forbidden 。

错误日志说：

```
[Wed Nov 21 19:24:21 2012] [crit] [client 127.0.0.1] (13)Permission denied: /Users/michael/Dropbox/.htaccess pcfg_openfile: unable to check htaccess file, ensure it is readable
[Wed Nov 21 19:24:43 2012] [error] [client 127.0.0.1] (13)Permission denied: access to / denied 
```

有没有其他人有这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:36:20.903

这似乎与 Pow 无关。Apache 没有在`/Users/michael/Dropbox/Development/test`.

请检查此目录的权限，我认为它们应该是 755。检查它们：

```
cd /Users/michael/Dropbox/Development/  
ls -l 
```

并复制粘贴`test`目录的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:10:17.177

问题是权限。当我将我正在工作的目录的完整路径更改为 755 时，它终于起作用了。

~/, ~/Dropbox, ~/Development...等。

我敢打赌有更好的方法来做到这一点，但它的工作。所以，你去吧。

# ruby-on-rails - 如何使用 capistrano 部署自定义 Gem？

> ID：13504476
> 
> 赞同：0
> 
> 时间：2012-11-22T01:01:14.857
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, capistrano

我是 RoR 的新手。我的 gem 进行了一些后台处理并加载了一个瘦服务器，因此可以不时对其进行检查。我需要使用 Capistrano 将它放在我的网络服务器上。

人们通常会将 gem 部署到他们的服务器上还是应该以其他方式编写应用程序？

Capistrano 也是部署 gem 的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:20:39.847

或者您可以使用宝石珠宝商：[https ://github.com/technicalpickles/jeweler](https://github.com/technicalpickles/jeweler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T14:57:41.273

你以前检查过[Bundler](http://gembundler.com/)吗？这对 capistrano 部署非常有效，您可以使用在部署时将 gem 与您的应用程序打包在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T22:39:33.160

我发现部署自定义 Gem 与任何其他项目类型没有什么不同。我只需要在我的`deploy.rb`文件中添加一个新的 Capistrano 任务，以便在 Capsitrano 将文件下载到服务器后安装 gem。这就是我必须做的。

```
desc "Install this gem"
task :setup_install, roles: :app do
    run "cd #{release_path} && gem build zoe.gemspec"
    run "cd #{release_path} && gem install YOUR-GEM-NAME.gem --quiet"
end
after "deploy:finalize_update", "deploy:setup_install"

desc "Uninstall this gem"
task :setup_uninstall, roles: :app do
    run "gem uninstall -x YOUR-GEM-NAME"
end
before "deploy:setup_install", "deploy:setup_uninstall" 
```

# c# - IIS 意外使用 AuthenticationType = Negotiate 对应用程序池用户进行身份验证

> ID：13504480
> 
> 赞同：1
> 
> 时间：2012-11-22T01:01:49.850
> 
> 标签：c#, asp.net, iis, asp.net-web-api

我有一个 WebAPI 应用程序，它希望使用表单身份验证，或者我自己的自定义基本或摘要身份验证。它在大多数服务器上都能正常工作。但是在一些服务器上它不起作用。

我发现当身份验证失败时，是因为 IIS 已经对 App Pool 用户进行了身份验证。Thread.CurrentPrincipal.Identity.AuthenticationType = "协商"。AFAIK 这是 Windows 身份验证。但是，相关站点的 Windows 身份验证已被禁用，我什至卸载了服务器上的 Windows 身份验证功能，但仍然遇到了同样的问题。

我发现将 runAllManagedModulesForAllRequests 设置为 true 可以解决这个问题，尽管它不是一个理想的解决方法，因为它会增加所有请求的开销，即使是那些通过静态处理程序运行的请求。

如果有人能告诉我为什么会发生这种情况，或者如何在 IIS 上调试身份验证过程，那将非常有帮助。

**编辑：** IIS7/7.5 Integrated Pipeline 如果它有所作为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:14:12.230

在遇到类似问题时，这是我的观察和建议。

该问题可能与`user account`用作*匿名用户身份*的匿名有关。默认设置可能是问题所在。请在此处阅读更多详细信息：

*   [IIS 文档](http://technet.microsoft.com/en-us/library/cc770966%28v=ws.10%29.aspx)
*   [IIS 提示](http://blogs.msdn.com/b/vijaysk/archive/2009/04/03/iis-7-tip-7-you-can-use-the-application-pool-identity-for-the-anonymous-authentication-credentials.aspx)

*摘要*：

使用 IIS 7.0 UI，转到*Authentication*页面并选择*Anonymous Authentication*。然后右键单击`Edit`并选择要用于此的用户。如果此（新选择的）用户有权访问所有静态文件，则所有文件都应该开始工作。选择`App Pool Identity`将授予为当前池用户帐户指定的访问权限。

默认值为 IUSR，这里有更详细的描述：

[Windows Server 2008 R2 / IIS7.5 上缺少 IUSR 帐户](https://stackoverflow.com/questions/10033126/missing-iusr-account-on-windows-server-2008-r2-iis7-5)

# sql - 使 SQL Server 成为链接服务器

> ID：13504482
> 
> 赞同：3
> 
> 时间：2012-11-22T01:01:54.437
> 
> 标签：sql, sql-server, sql-server-2005

我在另一个通过 IP 引用的盒子上有一个异地生产数据库。让我们说它的IP：

```
123.45.67.89 
```

现在我想做一个查询，将我的服务器在本地称为 MYSERVER1 与我的生产服务器一起引用。

当我尝试这样做时：

```
select count(*) from [MYSERVER1].MyDBName.dbo.mytable; 
```

一切都很好。但我不能这样做：

```
select count(*) from [123.45.67.89].MyDBName.dbo.mytable; 
```

有没有办法链接服务器？喜欢使用 sp_addLinkedServer？

我收到此错误：

> 消息 7202，级别 11，状态 2，第 3
> 行在 sys.servers 中找不到服务器“123.45.67.89”。验证是否指定了正确的服务器名称。如有必要，执行存储过程 sp_addlinkedserver 将服务器添加到 sys.servers。

有任何想法吗？（我想将 X 行复制到我的生产服务器，这就是原因）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:08:50.847

在 SQL Management Studio 中添加您的远程服务器：首先连接到您的本地服务器，转到对象资源管理器中的服务器对象\链接服务器，然后右键单击并添加一个新服务器。

顺便说一句：您也可以使用系统存储过程来完成它，但这是您偶尔会做的事情，我会留在 GUI 上。

# vim - ESC 在 cygwin vim 中不起作用

> ID：13504485
> 
> 赞同：2
> 
> 时间：2012-11-22T01:02:07.033
> 
> 标签：vim, windows-7, cygwin, keyboard-shortcuts

我在 Windows 7 上安装了 cygwin。当我在 cygwin 终端中启动 vim 时，它以交互模式启动。我无法通过按 ESC 将模式更改为命令模式。可能是什么原因？

* * *

**更新：** vim 在开始时也会打印这些 varnings：

```
Vim: Warning: Output is not to a terminal
Vim: Warning: Input is not from a terminal 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:59:02.817

如果*交互模式*是指*插入模式*（按键作为文本插入，就像在其他编辑器中一样），那么您的 Vim 处于*简单模式*。

`Ctrl`在其中，您可以通过+临时执行普通模式命令`O`。但我猜你不想要这种奇怪的初学者模式。要关闭它，请检查是否已使用`-y`参数或 as `evim`（是否有 shell 别名？）调用了 Vim。或者，如果您`:set insertmode`在 a 中找到命令`.vimrc`，请将其删除。（默认情况下，至少在我的 Cygwin 安装中，Vim 没有配置为简单模式，所以它必须在你的配置中。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T14:14:44.203

尝试同时按“ESC”和“shift”和“:”；你应该在vim中找到可以输入命令行的地方；</p>

# php - 在 PHP 中，我可以将除法或乘法与数字一起存储吗？

> ID：13504488
> 
> 赞同：4
> 
> 时间：2012-11-22T01:02:31.513
> 
> 标签：php

在 PHP 中，我可以这样做：

```
$value1 = 5;
$value2 = -2;
echo $value1 + $value2; // 3 
```

但是我将如何用乘法或除法来做到这一点？就像是：

```
$value1 = 10;
$value2 = /2;
echo $value1 (?) $value2; // 5; 
```

我将如何尽可能简单地处理这种情况？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T01:06:56.043

如果只需要区分除法和乘法，

```
$value2 = 2;
//or
$value2 = 1/2;

echo $value1 * $value2; 
```

您的代码适用于加法和减法，因为`-2`in`$value2 = -2;`并不意味着“减二”。它的意思是“[加]减二”。对于乘法，您需要“二”或“二的倒数”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T01:06:58.910

一句话，没有。

在一段中，您可以创建一个匿名函数来捕获您的含义`$value2`：

```
$value1 = 5;
$op_and_value2 = function($value) {
  return $value1 / 2;
};

echo $op_and_value2($value1); # 2 
```

或者您可以创建一个类来封装这种行为，但这需要更多的工作。

或者你可以去黑暗的一面，并使用`eval`.

```
$value1 = 5;
$value2 = "/ 2";
echo eval("return $value1 $value2;"); # 2 
```

（如果“黑暗面”不够暗示，除非你想让每个人都恨你，否则不要这样做。）

更好的方法是分别存储 operator 和 value2 （尽管您仍然可以将它们放在一个结构中）；运算符最好存储为函数（可能是像上面这样的匿名函数，但有两个参数，而不是硬编码`2`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T01:09:47.597

是的，但这是一种令人不快的方式：

您可以使用`eval()`：

```
$value1 = 10;
$value2 = "/2";
echo eval("return $value1 $value2;"); // 5; 
```

`eval()`不过，在生产中运行的代码中使用我会非常谨慎。如果您最终使用这种方法，我建议您阅读以下两个讨论：

*   [什么时候 eval 在 php 中是邪恶的？](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)
*   [什么时候（如果有的话） eval 不是邪恶的？](https://stackoverflow.com/questions/3499672/when-if-ever-is-eval-not-evil)

# maven - 检测单个 Maven 项目中的重复资源

> ID：13504495
> 
> 赞同：0
> 
> 时间：2012-11-22T01:03:02.650
> 
> 标签：maven, duplicates

[maven 重复查找器插件](https://github.com/ning/maven-duplicate-finder-plugin)看起来是一种检测相同资源何时存在于多个模块中的好方法。我需要的是更简单的东西：在*同一个*模块中检测相同的资源。

（**更新：**针对 maven 重复查找器插件提交[了一个问题](https://github.com/ning/maven-duplicate-finder-plugin/issues/16)，以查看它是否可以检测到这种情况。）

这是 Maven 重复查找器插件无法检测到我关心的那种情况的演示：

```
$ cat pom.xml
<project xmlns="http://maven.apache.org/POM/4.0.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0
                      http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.stackoverflow.mattmchenry</groupId>
  <artifactId>mvn-dups</artifactId>
  <version>1.0</version>

  <build>
    <resources>
      <resource>
        <directory>src/main/resources</directory>
      </resource>
      <resource>
        <directory>src/main/resources_es</directory>
      </resource>
    </resources>
  </build>
</project>

$ find src/ -type f
src/main/resources/Strings_es.properties
src/main/resources/Strings.properties
src/main/resources_es/Strings_es.properties    

$ mvn com.ning.maven.plugins:maven-duplicate-finder-plugin:1.0.2:check[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Unnamed - com.stackoverflow.mattmchenry:mvn-dups:jar:1.0
[INFO]    task-segment: [com.ning.maven.plugins:maven-duplicate-finder-plugin:1.0.2:check]
[INFO] ------------------------------------------------------------------------
[INFO] [duplicate-finder:check {execution: default-cli}]
[INFO] Checking compile classpath
[INFO] Checking runtime classpath
[INFO] Checking test classpath
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1 second
[INFO] Finished at: Thu Nov 22 22:44:40 EST 2012
[INFO] Final Memory: 7M/88M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-29T05:38:01.980

在这种特定情况下，duplicate-finder 插件无法帮助您。

问题是它适用于类路径，而不是源文件夹。其中，在 Maven 案例中，由目标中的本地文件夹和工件组成。如果您有多个资源源文件夹（在您的情况下`src/main/resources`和`src/main/resources_es`），这些文件将`target/classes`在插件实际运行之前由 maven 复制到，因此它无法检测到这种情况。

重复查找器插件只能提供帮助

*   如果多个资源文件夹最终出现在单独的工件（jar）中
*   如果其中一个资源用于编译文件夹（目标/类），一个用于测试（目标/测试类）

重复查找器插件从不查看源文件夹，只查看类路径文件夹。

（我是该插件的主要作者之一。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T10:14:16.957

为什么不使用 maven-duplicate finder 插件，这正是您需要的工作？另一种解决方案是使用[maven-enforcer-plugin](http://maven.apache.org/plugins/maven-enforcer-plugin/index.html)，但看起来您需要实现[自己的 enforcer-rule](http://maven.apache.org/enforcer/enforcer-api/writing-a-custom-rule.html)。我更喜欢使用 maven-duplicate-finder-plugin。

# java - 分别使用spring applicationcontext和dispatcherservlet时网页未打开/损坏

> ID：13504496
> 
> 赞同：0
> 
> 时间：2012-11-22T01:03:09.860
> 
> 标签：java, spring, servlets, spring-mvc, dispatcher

我正在尝试将我的应用程序核心服务与我的 dispatcherservlet 和具有 @Controller 注释的类分开。我在这里阅读了很多关于 SO 的主题，但没有找到任何适合我的例子，只有关于根子层次结构、组件扫描包等的解释。

正如所有建议所说，在 appicationContext.xml 中我应该扫描除`@Controller`类之外的所有组件，而在我的 DispatcherServlet-servlet.xml 中我应该只扫描`@Controller`类。我这样做就像在这个[@Service 构造了两次](https://stackoverflow.com/questions/4333390/service-are-constructed-twice)示例中一样。

所以我的应用程序构建成功，但是当我转到它的网页时，在 Chrome 中它告诉我`This link appears to be broken.`这意味着该页面存在，否则 Tomcat 会告诉我这个`The requested resource (/myapp) is not available.`

我的配置一定有问题。可能是什么问题？这是我的`applicationContext.xml`

```
<beans <!-- omitting namespaces for readability --> >

    <!-- Scans within the base package of the application for @Components to configure as beans -->
    <!-- @Controller, @Service, @Configuration, etc. -->
    <context:component-scan base-package="com.myapp">
        <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation"/>
    </context:component-scan>

    <!-- Enables the Spring MVC @Controller programming model -->
    <mvc:annotation-driven />
    <mvc:resources mapping="/static/**" location="/" />
    <mvc:default-servlet-handler />
    <jpa:repositories base-package="com.myapp.repo" />
</beans> 
```

接下来是我的`web.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app <!-- omitting namespaces for readability -->>

  <display-name>My application</display-name>

  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
        classpath:applicationContext.xml
        classpath:spring-security.xml
        </param-value>
  </context-param>

  <listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>

  <listener>
    <listener-class>
        org.springframework.web.context.request.RequestContextListener
    </listener-class>
  </listener>

  <servlet>
    <servlet-name>DispatcherServlet</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>DispatcherServlet</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

    <!-- Ensure UTF-8 encoded pages so that certain characters are displayed and submitted correctly -->
    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <!-- Enables support for DELETE and PUT request methods with web browser clients -->
    <filter>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>hiddenHttpMethodFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <error-page>
        <error-code>404</error-code>
        <location>/WEB-INF/view/error/404.jsp</location>
    </error-page>
</web-app> 
```

下面是 DispatcherServlet-servlet.xml

```
<beans <!-- omitting namespaces for readability -->>
    <context:component-scan base-package="com.myapp.mvc" use-default-filters="false">
        <context:include-filter type="annotation"
            expression="org.springframework.stereotype.Controller" />
    </context:component-scan>
</beans> 
```

这是我的配置类

```
@Configuration
@ImportResource("classpath:applicationContext.xml")
@PropertySource("classpath:images.properties")
public class AppConfig implements InitializingBean {

    @Inject
    ServletContext context;

    // Resolve logical view names to .jsp resources in the /WEB-INF/views directory
    @Bean
    ViewResolver viewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("WEB-INF/view/");
        resolver.setSuffix(".jsp");
        return resolver;
    }

    // Configure the multipart resolver
    @Bean
    CommonsMultipartResolver multipartResolver() {
        CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();
//      multipartResolver.setMaxUploadSize(2_202_009);
        return multipartResolver;
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        File logoImgPreview = new File("resources/img/image_footer_logo_preview.jpg");
        BufferedImage bufImgPreview = ImageIO.read(logoImgPreview);
        context.setAttribute("watermark_preview", bufImgPreview);
    }
} 
```

所以最后这里是我的服务器启动时的日志：

[http://pastie.org/private/z8zv7jaddytxsgbh7oggw](http://pastie.org/private/z8zv7jaddytxsgbh7oggw)

我在服务器日志中看到 DispatcherServlet 定义了控制器 bean，但 applicationContext 映射了 RequestMappingHandlers。应该是这样吗？我不太确定整个画面应该如何工作，但根据我到目前为止所阅读的所有内容，这种上下文分离必须是正确的。但是，我的配置中的错误在哪里？

这是我的家庭控制器，非常基本

```
@Controller
public class HomeController {

    private static Logger log = LoggerFactory.getLogger("com.myapp.mvc.HomeController");

    @RequestMapping("/")
    public String home() {
        log.debug("Requesting index page");
        return "index"; // it returns to index.jsp
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T04:04:22.460

您应该将所有与控制器相关的 bean 定义移动到 Dispatcher-servlet.xml 文件中，您仍然有一些在 applicationContext.xml 文件中 -

```
<mvc:annotation-driven />
<mvc:resources mapping="/static/**" location="/" />
<mvc:default-servlet-handler /> 
```

这可能不是您所看到问题的全部原因，但应该让您更进一步。

# ruby-on-rails-3.1 - 使用 state_select gem

> ID：13504497
> 
> 赞同：0
> 
> 时间：2012-11-22T01:03:15.850
> 
> 标签：ruby-on-rails-3.1, gem, form-helpers

我正在尝试在我的表单中使用 state_select gem。它给了我下拉菜单并显示状态，但没有选项可供选择。

```
<div class="field">
    <%= f.label :state %><br />
    <%= f.state_select :state, 'US', { :prompt => "State" }, { :style => "width: 75px;" } %>
  </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:29:23.407

尝试使用这种格式

```
state_select(object, method, country = "US", options = {}, html_options = {}) 
```

你试试这个并使用`your-object-name`并通过你的`options`

```
<%= state_select(your-object-name, :state, country => 'US', options => {}, { :style => "width: 75px;" }) %> 
```

**来源**：[http ://rubydoc.info/gems/state_select/0.1.0/frames](http://rubydoc.info/gems/state_select/0.1.0/frames)

# powershell - 新对象上的 Windows RT Powershell (PermissionDenied)

> ID：13504499
> 
> 赞同：6
> 
> 时间：2012-11-22T01:03:44.953
> 
> 标签：powershell

我正在尝试在 Powershell for Windows RT 中实例化一个对象，但不断收到以下错误。

```
PS > $foo = New-Object System.Security.Cryptography.SHA1Managed
New-Object : Cannot create type. Only core types are supported in this language mode.
At line:1 char:8
+ $foo = New-Object System.Security.Cryptography.SHA1Managed
+        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : PermissionDenied: (:) [New-Object], PSNotSupportedException
    + FullyQualifiedErrorId : CannotCreateTypeConstrainedLanguage,Microsoft.PowerShell.Commands.NewObjectCommand 
```

我刚刚花了最后 30 分钟从事一些相当繁重的 Google-fu 并且找不到任何接近类似问题的东西，更不用说答案了。我希望我只需要配置一些东西；我担心的是 Windows RT 附带了一个残缺的 Powershell 版本。

有谁知道是哪种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T04:56:26.143

是的，Windows RT 附带了一个锁定版本的 PowerShell - 它在 ConstrainedLanguageMode 下运行，这会阻止与 .NET 的大多数交互（属性设置器/方法调用）。它还有一个有限的命令集 IIRC。

# c# - ListView 行从 SQL 中删除按钮

> ID：13504501
> 
> 赞同：1
> 
> 时间：2012-11-22T01:04:06.577
> 
> 标签：c#, wpf, binding, sql-server-ce

我确实有一个 ListView，我从数据库（它的数据选择）中调用它，每一行我都有一个删除、更新按钮。我将每个按钮绑定到列表视图中的 ID，因此当我单击它时，只需返回该行值！

但是我想在我的查询函数中调用这个值来更新或删除选定的行。我不确定如何将此值调用到 Query 中。

这是我的绑定示例：

```
<Button Name="delete" Click="Delete_Click" CommandParameter="{Binding Path=empID}"> 
```

我是这样称呼它的：

```
Button _button = (Button)sender;
string empID = _button.CommandParameter.ToString(); 
```

\sql 的东西

```
SqlCeConnection con = new SqlCeConnection();
                SqlCeDataAdapter ad = new SqlCeDataAdapter();
                SqlCeCommand cmd = new SqlCeCommand(empID);

                String str = "UPDATE employee SET Isdeleted ='1' WHERE empID= " + empID;
                cmd.Parameters.AddWithValue("@empID", empID);

                ad.SelectCommand = cmd; 
```

希望我能得到一些帮助，因为到目前为止这个查询永远不会起作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:25:51.223

```
SqlCeConnection con = new SqlCeConnection();
            SqlCeDataAdapter ad = new SqlCeDataAdapter();
            SqlCeCommand cmd = new SqlCeCommand(empID);

            String str = "UPDATE employee SET Isdeleted ='1' WHERE empID= " + empID;
            cmd.Parameters.AddWithValue("@empID", empID);

            ad.SelectCommand = cmd; 
```

这是一个奇怪的设置

也许：

```
SqlCeConnection con = new SqlCeConnection();
            SqlCeDataAdapter ad = new SqlCeDataAdapter();
            String str = "UPDATE employee SET Isdeleted ='1' WHERE empID= @empID";

            SqlCeCommand cmd = new SqlCeCommand(str);

            cmd.Parameters.AddWithValue("@empID", empID);

            ad.UpdateCommand = cmd; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:47:53.500

不确定它是否会起作用，但你应该试一试，我是为本地 sdf 数据库制作的

```
var con = new SqlCeConnection("Data Source=" + "|DataDirectory|\\Database1.sdf");
                String str = "UPDATE employee SET Isdeleted ='1' WHERE empID= '"+ empID +"'";
                var cmd = new SqlCeCommand(str,con);

                try
                {
                    con.Open();
                }
                catch (Exception a)
                {
                    Console.WriteLine(a.ToString());
                }
                finally
                {
                    cmd.ExecuteNonQuery();
                    con.Close();
                } 
```

# php - 如何使用 PHP 从字符串中删除主机名？

> ID：13504504
> 
> 赞同：8
> 
> 时间：2012-11-22T01:04:38.887
> 
> 标签：php, url

有人能告诉我如何剥离出现在`http://`and之间的任何东西`/`吗？例如，`http://something/`或者`http://something.something.something/`它更改为 just `/`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T01:09:43.450

假设您使用的是 URL 而不是*包含*url 的长字符串...

```
$path = parse_url($url, PHP_URL_PATH); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-22T01:09:18.940

您可以使用[`parse_url`](http://php.net/manual/en/function.parse-url.php)，但您必须使用不同的组件重新构建 URL 的其余部分：

```
$components = parse_url($url);
$result = $components['path'] . '?' .
          $components['query'] . '#' .
          $components['fragment']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T01:31:06.460

以下将简单地返回您的 URL 的路径：

```
<?php

$urls = array(
    'http://something.com/',
    'http://something.something.com/',
    'http://something.something.com/some/path',
    'http://something.something.com/some/path/?query=string',
    'http://something.something.com/some/path/?query=string#with-fragment',
);

foreach ($urls as $url) {
    var_dump(parse_url($url, PHP_URL_PATH));
}

#=> string(1) "/"
#=> string(1) "/"
#=> string(10) "/some/path"
#=> string(11) "/some/path/"
#=> string(11) "/some/path/" 
```

请注意，如果您只是想从 URL 中去除 URL Scheme 和 Host，并且想要**保留**Query 和 Fragment，则可以使用以下命令：

```
foreach ($urls as $url) {
    $url = parse_url($url);
    $ret = $url['path'];
    if ($url['query']) $ret .= "?{$url[query]}";
    if ($url['fragment']) $ret .= "#{$url[fragment]}";
    var_dump($ret);
}

#=> string(1) "/"
#=> string(1) "/"
#=> string(10) "/some/path"
#=> string(24) "/some/path/?query=string"
#=> string(38) "/some/path/?query=string#with-fragment" 
```

更好的是，如果您使用的是[PECL HTTP Extension](http://us2.php.net/manual/en/book.http.php)，则可以使用[http_build_url()](http://us2.php.net/manual/en/function.http-build-url.php)方法：

```
foreach ($urls as $url) {
    $url = http_build_url(array_key_intersect(
        parse_url($url),
        array_flip(array('path', 'query', 'fragment'))
    ));
    var_dump($url);
}

#=> string(1) "/"
#=> string(1) "/"
#=> string(10) "/some/path"
#=> string(24) "/some/path/?query=string"
#=> string(38) "/some/path/?query=string#with-fragment" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-03-18T20:37:10.037

```
$url = "http://php.net/manual/en/function.parse-url.php?arg=value#anchor";

print_r(parse_url($url));

echo parse_url($url, PHP_URL_PATH); 
```

上面的示例将输出：

```
Array
(
    [scheme] => http
    [host] => php.net
    [path] => /manual/en/function.parse-url.php
    [query] => arg=value
    [fragment] => anchor
) 
```

请参阅[`parse-url`](http://php.net/manual/en/function.parse-url.php)

指定 PHP_URL_SCHEME、PHP_URL_HOST、PHP_URL_PORT、PHP_URL_USER、PHP_URL_PASS、PHP_URL_PATH、PHP_URL_QUERY 或 PHP_URL_FRAGMENT 之一以仅检索特定的 URL 组件作为字符串（除非给出 PHP_URL_PORT，在这种情况下，返回值将是一个整数）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T01:07:56.380

你想要的似乎是`$_SERVER['REQUEST_URI']`. 或者你可以用`parse_url()`

或者，如果您坚持使用正则表达式，[EDIT] 不要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-02T23:21:12.850

```
$url = "www.domain.com/sds?test=1&test2=2&test3=3";
$query = parse_url($url, PHP_URL_QUERY);
parse_str($query, $query_array); 
```

“？”之前的内容无关紧要。将输出

```
array {
 'test' => string '1' (length=1)
 'test2' => string '2' (length=1)
 'test3' => string '3' (length=1)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-08-30T02:30:09.133

你可以从第一个得到它`/`，`//`不包括在内。

```
$url = "https://www.facebook.com/hhhhhh?2342";
$pos = strpos($url,"://");
$pos = false === $pos ? 0 : $pos + 3;
echo substr($url,strpos($url,'/',$pos)); 
```

# actionscript-3 - AS3：当当前帧 == 时如何播放声音？

> ID：13504506
> 
> 赞同：1
> 
> 时间：2012-11-22T01:05:02.547
> 
> 标签：actionscript-3

不幸的是，我下面的代码导致声音以电影的帧速率重复。我只需要一个简单的“在特定帧播放声音”功能，但无法弄清楚这一点。谢谢你的帮助。

```
addEventListener(Event.ENTER_FRAME,soundFunction);
function soundFunction(event:Event)
{
if (naturepage.ocean_btns.currentFrame == 2)
{
    ocean_channel.stop();
    ocean_channel = ocean1.play(0,int.MAX_VALUE);
    mySO.data.ocean = "2";
    mySO.flush();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:10:29.203

这似乎是对的。您确定`naturepage.ocean_btns`影片剪辑没有在第二帧停止或一遍又一遍地循环播放很少的帧吗？

另一种选择是使用标志来查看您是否已经播放过声音：

```
var alreadyPlayedSound:Boolean = false;
addEventListener(Event.ENTER_FRAME,soundFunction);
function soundFunction(event:Event)
{
    if (naturepage.ocean_btns.currentFrame == 2 && !alreadyPlayedSound)
    {
        alreadyPlayedSound = true;

        ocean_channel.stop();
        ocean_channel = ocean1.play(0,int.MAX_VALUE);
        mySO.data.ocean = "2";
        mySO.flush();
    }
} 
```

或者在播放声音后删除事件侦听器：

```
addEventListener(Event.ENTER_FRAME,soundFunction);
function soundFunction(event:Event)
{
    if (naturepage.ocean_btns.currentFrame == 2)
    {
        ocean_channel.stop();
        ocean_channel = ocean1.play(0,int.MAX_VALUE);
        mySO.data.ocean = "2";
        mySO.flush();

        removeEventListener(Event.ENTER_FRAME,soundFunction);
    }
} 
```

# c# - 使用 Func 捕获类属性

> ID：13504508
> 
> 赞同：4
> 
> 时间：2012-11-22T01:05:07.543
> 
> 标签：c#, lambda, closures, graph-algorithm, func

我正在实现一个图形类。在课堂上我了解到广度优先和深度优先遍历是相同的算法，除了存储遍历节点分别使用队列和堆栈。因此，我将所有逻辑放入一个 Traversal() 方法中，该方法由 DepthFirstSearch() 调用，该方法作为 ADT 在堆栈中传递。

```
public void DepthFirstSearch(GraphNode<T> root)
{
    Stack<GraphNode<T>> s = new Stack<GraphNode<T>>();

    Action<GraphNode<T>> insert = s.Push;
    Func<GraphNode<T>> retrieve = s.Pop;
    //Func<int> stackCount = s.Count; Cannot implicitly convert type 'int' to System.Func<int>' error
    Func<int> stackCount = () => s.Count;

    Traversal(root, insert, retrieve, stackCount);
} 
```

我假设我不能将 s.Count 传递给委托，因为它是一个类属性？所以为了解决这个问题，我使用了一个 lambda 来关闭该属性。但是谁能解释为什么我需要 lambda 用于 s.Count 而不是 s.Pop 或 s.Push？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T01:12:35.380

原因是[`Stack<T>.Push`](http://msdn.microsoft.com/en-us/library/6335ax0f.aspx)并且[`Stack<T>.Pop`](http://msdn.microsoft.com/en-us/library/9say334k.aspx)已经是与您*尝试*分配方法的委托类型兼容的函数（[`Func<TResult>`](http://msdn.microsoft.com/en-us/library/bb534960.aspx)并且[`Action<T>`](http://msdn.microsoft.com/en-us/library/018hxwa8.aspx)，在您的情况下，`TResult`与`T`您的泛型类型参数匹配，[`Stack<T>`](http://msdn.microsoft.com/en-us/library/3278tedw.aspx)在您的情况下， ）。`GraphNode<T>`如果它们不兼容，您将需要使用 lambda 函数或某种其他类型的包装委托将方法分配给您的委托变量。

虽然类属性在*技术上*由 getter 和 setter 方法组成，但在 C# 中，这些细节被抽象掉了，需要您将类属性包装在 lambda 函数中。此外，根据下面 Servy 的评论，编译器将无法轻松确定您是在尝试将 getter 还是 setter 分配给委托变量。

# javascript - 从 iFrame 禁用 javascript 警报

> ID：13504509
> 
> 赞同：1
> 
> 时间：2012-11-22T01:05:09.803
> 
> 标签：javascript, html, gwt, iframe

`iFrame`我的代码里面有一个`HTML`。

这个 iFrame 有一个显示`Window.alert()`弹出窗口的 javascript。

我怎样才能防止它们出现？并防止 iFrame 与我的窗口交互？

我正在使用`GWT`'s`Frame`如果那是相关的。

== 编辑 ==

iFrame 与我的网站不在同一个域中，因此我无法从 iFrame 访问 Javascript 代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-23T23:40:11.910

对于支持s`sandbox`属性的浏览器`<iframe>`，您可以禁用所有 JavaScript（包括`alerts`）。

```
<iframe sandbox src="..."></iframe> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-24T12:36:21.210

我知道这有点晚了，但我对 philfreo 的回答有所改进。iframe 沙盒有一个`allow-popups`可以排除的属性。尝试这个：`<iframe sandbox="allow-scripts allow-forms allow-pointer-lock allow-same-origin" src="..."></iframe>`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T01:28:42.253

由于您的 iframe 不在同一个域中，因此无法编写脚本（并删除警报），因为[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)

对不起，这就是答案

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-19T07:28:53.730

我试图解决你的问题。所以我找到了一种方法来帮助你。这是我的方式。

```
document.getElementById('iframe-src').contentWindow.alert = function(){} 
```

这种方式效果很好。

干杯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-11T16:21:13.833

**沙盒**属性将帮助您阻止 iframe 中的 alert()

```
<iframe sandbox src="..."></iframe> 
```

# python - 不知道为什么这个 python 脚本不会运行

> ID：13504514
> 
> 赞同：0
> 
> 时间：2012-11-22T01:06:34.443
> 
> 标签：python, syntax-error

所以我在这里有这个 python 脚本，我正在尝试运行它，但出现语法错误。我看不出语法有什么问题。这是代码：

```
#define _GNU_SOURCE

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define KSYM_NAME_LEN       127

struct sym_entry {
    unsigned long long addr;
    unsigned int len;
    unsigned char *sym;
};

static struct sym_entry *table;
static unsigned int table_size, table_cnt;
static unsigned long long _text, _stext, _etext, _sinittext, _einittext, _sextratext, _eextratext;
static int all_symbols = 0;
static char symbol_prefix_char = '\0';

int token_profit[0x10000];

/* the table that holds the result of the compression */
unsigned char best_table[256][2];
unsigned char best_table_len[256];

static void usage(void)
{
    fprintf(stderr, "Usage: kallsyms [--all-symbols] [--symbol-prefix=<prefix char>] < in.map > out.S\n");
    exit(1);
}

/*
 * This ignores the intensely annoying "mapping symbols" found
 * in ARM ELF files: $a, $t and $d.
 */
static inline int is_arm_mapping_symbol(const char *str)
{
    return str[0] == '$' && strchr("atd", str[1])
           && (str[2] == '\0' || str[2] == '.');
}

static int read_symbol(FILE *in, struct sym_entry *s)
{
    char str[500];
    char *sym, stype;
    int rc;

    rc = fscanf(in, "%llx %c %499s\n", &s->addr, &stype, str);
    if (rc != 3) {
        if (rc != EOF) {
            /* skip line */
            fgets(str, 500, in);
        }
        return -1;
    }

    sym = str;
    /* skip prefix char */
    if (symbol_prefix_char && str[0] == symbol_prefix_char)
        sym++;

    /* Ignore most absolute/undefined (?) symbols. */
    if (strcmp(sym, "_text") == 0)
        _text = s->addr;
    else if (strcmp(sym, "_stext") == 0)
        _stext = s->addr;
    else if (strcmp(sym, "_etext") == 0)
        _etext = s->addr;
    else if (strcmp(sym, "_sinittext") == 0)
        _sinittext = s->addr;
    else if (strcmp(sym, "_einittext") == 0)
        _einittext = s->addr;
    else if (strcmp(sym, "_sextratext") == 0)
        _sextratext = s->addr;
    else if (strcmp(sym, "_eextratext") == 0)
        _eextratext = s->addr;
    else if (toupper(stype) == 'A')
    {
        /* Keep these useful absolute symbols */
        if (strcmp(sym, "__kernel_syscall_via_break") &&
            strcmp(sym, "__kernel_syscall_via_epc") &&
            strcmp(sym, "__kernel_sigtramp") &&
            strcmp(sym, "__gp"))
            return -1;

    }
    else if (toupper(stype) == 'U' ||
         is_arm_mapping_symbol(sym))
        return -1;
    /* exclude also MIPS ELF local symbols ($L123 instead of .L123) */
    else if (str[0] == '$')
        return -1;

    /* include the type field in the symbol name, so that it gets
     * compressed together */
    s->len = strlen(str) + 1;
    s->sym = malloc(s->len + 1);
    if (!s->sym) {
        fprintf(stderr, "kallsyms failure: "
            "unable to allocate required amount of memory\n");
        exit(EXIT_FAILURE);
    }
    strcpy((char *)s->sym + 1, str);
    s->sym[0] = stype;

    return 0;
}

static int symbol_valid(struct sym_entry *s)
{
    /* Symbols which vary between passes.  Passes 1 and 2 must have
     * identical symbol lists.  The kallsyms_* symbols below are only added
     * after pass 1, they would be included in pass 2 when --all-symbols is
     * specified so exclude them to get a stable symbol list.
     */
    static char *special_symbols[] = {
        "kallsyms_addresses",
        "kallsyms_num_syms",
        "kallsyms_names",
        "kallsyms_markers",
        "kallsyms_token_table",
        "kallsyms_token_index",

    /* Exclude linker generated symbols which vary between passes */
        "_SDA_BASE_",       /* ppc */
        "_SDA2_BASE_",      /* ppc */
        NULL };
    int i;
    int offset = 1;

    /* skip prefix char */
    if (symbol_prefix_char && *(s->sym + 1) == symbol_prefix_char)
        offset++;

    /* if --all-symbols is not specified, then symbols outside the text
     * and inittext sections are discarded */
    if (!all_symbols) {
        if ((s->addr < _stext || s->addr > _etext)
            && (s->addr < _sinittext || s->addr > _einittext)
            && (s->addr < _sextratext || s->addr > _eextratext))
            return 0;
        /* Corner case.  Discard any symbols with the same value as
         * _etext _einittext or _eextratext; they can move between pass
         * 1 and 2 when the kallsyms data are added.  If these symbols
         * move then they may get dropped in pass 2, which breaks the
         * kallsyms rules.
         */
        if ((s->addr == _etext && strcmp((char*)s->sym + offset, "_etext")) ||
            (s->addr == _einittext && strcmp((char*)s->sym + offset, "_einittext")) ||
            (s->addr == _eextratext && strcmp((char*)s->sym + offset, "_eextratext")))
            return 0;
    }

    /* Exclude symbols which vary between passes. */
    if (strstr((char *)s->sym + offset, "_compiled."))
        return 0;

    for (i = 0; special_symbols[i]; i++)
        if( strcmp((char *)s->sym + offset, special_symbols[i]) == 0 )
            return 0;

    return 1;
}

static void read_map(FILE *in)
{
    while (!feof(in)) {
        if (table_cnt >= table_size) {
            table_size += 10000;
            table = realloc(table, sizeof(*table) * table_size);
            if (!table) {
                fprintf(stderr, "out of memory\n");
                exit (1);
            }
        }
        if (read_symbol(in, &table[table_cnt]) == 0)
            table_cnt++;
    }
}

static void output_label(char *label)
{
    if (symbol_prefix_char)
        printf(".globl %c%s\n", symbol_prefix_char, label);
    else
        printf(".globl %s\n", label);
    printf("\tALGN\n");
    if (symbol_prefix_char)
        printf("%c%s:\n", symbol_prefix_char, label);
    else
        printf("%s:\n", label);
}

/* uncompress a compressed symbol. When this function is called, the best table
 * might still be compressed itself, so the function needs to be recursive */
static int expand_symbol(unsigned char *data, int len, char *result)
{
    int c, rlen, total=0;

    while (len) {
        c = *data;
        /* if the table holds a single char that is the same as the one
         * we are looking for, then end the search */
        if (best_table[c][0]==c && best_table_len[c]==1) {
            *result++ = c;
            total++;
        } else {
            /* if not, recurse and expand */
            rlen = expand_symbol(best_table[c], best_table_len[c], result);
            total += rlen;
            result += rlen;
        }
        data++;
        len--;
    }
    *result=0;

    return total;
}

static void write_src(void)
{
    unsigned int i, k, off;
    unsigned int best_idx[256];
    unsigned int *markers;
    char buf[KSYM_NAME_LEN+1];

    printf("#include <asm/types.h>\n");
    printf("#if BITS_PER_LONG == 64\n");
    printf("#define PTR .quad\n");
    printf("#define ALGN .align 8\n");
    printf("#else\n");
    printf("#define PTR .long\n");
    printf("#define ALGN .align 4\n");
    printf("#endif\n");

    printf(".data\n");

    /* Provide proper symbols relocatability by their '_text'
     * relativeness.  The symbol names cannot be used to construct
     * normal symbol references as the list of symbols contains
     * symbols that are declared static and are private to their
     * .o files.  This prevents .tmp_kallsyms.o or any other
     * object from referencing them.
     */
    output_label("kallsyms_addresses");
    for (i = 0; i < table_cnt; i++) {
        if (toupper(table[i].sym[0]) != 'A') {
            printf("\tPTR\t_text + %#llx\n",
                table[i].addr - _text);
        } else {
            printf("\tPTR\t%#llx\n", table[i].addr);
        }
    }
    printf("\n");

    output_label("kallsyms_num_syms");
    printf("\tPTR\t%d\n", table_cnt);
    printf("\n");

    /* table of offset markers, that give the offset in the compressed stream
     * every 256 symbols */
    markers = malloc(sizeof(unsigned int) * ((table_cnt + 255) / 256));
    if (!markers) {
        fprintf(stderr, "kallsyms failure: "
            "unable to allocate required memory\n");
        exit(EXIT_FAILURE);
    }

    output_label("kallsyms_names");
    off = 0;
    for (i = 0; i < table_cnt; i++) {
        if ((i & 0xFF) == 0)
            markers[i >> 8] = off;

        printf("\t.byte 0x%02x", table[i].len);
        for (k = 0; k < table[i].len; k++)
            printf(", 0x%02x", table[i].sym[k]);
        printf("\n");

        off += table[i].len + 1;
    }
    printf("\n");

    output_label("kallsyms_markers");
    for (i = 0; i < ((table_cnt + 255) >> 8); i++)
        printf("\tPTR\t%d\n", markers[i]);
    printf("\n");

    free(markers);

    output_label("kallsyms_token_table");
    off = 0;
    for (i = 0; i < 256; i++) {
        best_idx[i] = off;
        expand_symbol(best_table[i], best_table_len[i], buf);
        printf("\t.asciz\t\"%s\"\n", buf);
        off += strlen(buf) + 1;
    }
    printf("\n");

    output_label("kallsyms_token_index");
    for (i = 0; i < 256; i++)
        printf("\t.short\t%d\n", best_idx[i]);
    printf("\n");
}

/* table lookup compression functions */

/* count all the possible tokens in a symbol */
static void learn_symbol(unsigned char *symbol, int len)
{
    int i;

    for (i = 0; i < len - 1; i++)
        token_profit[ symbol[i] + (symbol[i + 1] << 8) ]++;
}

/* decrease the count for all the possible tokens in a symbol */
static void forget_symbol(unsigned char *symbol, int len)
{
    int i;

    for (i = 0; i < len - 1; i++)
        token_profit[ symbol[i] + (symbol[i + 1] << 8) ]--;
}

/* remove all the invalid symbols from the table and do the initial token count */
static void build_initial_tok_table(void)
{
    unsigned int i, pos;

    pos = 0;
    for (i = 0; i < table_cnt; i++) {
        if ( symbol_valid(&table[i]) ) {
            if (pos != i)
                table[pos] = table[i];
            learn_symbol(table[pos].sym, table[pos].len);
            pos++;
        }
    }
    table_cnt = pos;
}

/* replace a given token in all the valid symbols. Use the sampled symbols
 * to update the counts */
static void compress_symbols(unsigned char *str, int idx)
{
    unsigned int i, len, size;
    unsigned char *p1, *p2;

    for (i = 0; i < table_cnt; i++) {

        len = table[i].len;
        p1 = table[i].sym;

        /* find the token on the symbol */
        p2 = memmem(p1, len, str, 2);
        if (!p2) continue;

        /* decrease the counts for this symbol's tokens */
        forget_symbol(table[i].sym, len);

        size = len;

        do {
            *p2 = idx;
            p2++;
            size -= (p2 - p1);
            memmove(p2, p2 + 1, size);
            p1 = p2;
            len--;

            if (size < 2) break;

            /* find the token on the symbol */
            p2 = memmem(p1, size, str, 2);

        } while (p2);

        table[i].len = len;

        /* increase the counts for this symbol's new tokens */
        learn_symbol(table[i].sym, len);
    }
}

/* search the token with the maximum profit */
static int find_best_token(void)
{
    int i, best, bestprofit;

    bestprofit=-10000;
    best = 0;

    for (i = 0; i < 0x10000; i++) {
        if (token_profit[i] > bestprofit) {
            best = i;
            bestprofit = token_profit[i];
        }
    }
    return best;
}

/* this is the core of the algorithm: calculate the "best" table */
static void optimize_result(void)
{
    int i, best;

    /* using the '\0' symbol last allows compress_symbols to use standard
     * fast string functions */
    for (i = 255; i >= 0; i--) {

        /* if this table slot is empty (it is not used by an actual
         * original char code */
        if (!best_table_len[i]) {

            /* find the token with the breates profit value */
            best = find_best_token();

            /* place it in the "best" table */
            best_table_len[i] = 2;
            best_table[i][0] = best & 0xFF;
            best_table[i][1] = (best >> 8) & 0xFF;

            /* replace this token in all the valid symbols */
            compress_symbols(best_table[i], i);
        }
    }
}

/* start by placing the symbols that are actually used on the table */
static void insert_real_symbols_in_table(void)
{
    unsigned int i, j, c;

    memset(best_table, 0, sizeof(best_table));
    memset(best_table_len, 0, sizeof(best_table_len));

    for (i = 0; i < table_cnt; i++) {
        for (j = 0; j < table[i].len; j++) {
            c = table[i].sym[j];
            best_table[c][0]=c;
            best_table_len[c]=1;
        }
    }
}

static void optimize_token_table(void)
{
    build_initial_tok_table();

    insert_real_symbols_in_table();

    /* When valid symbol is not registered, exit to error */
    if (!table_cnt) {
        fprintf(stderr, "No valid symbol.\n");
        exit(1);
    }

    optimize_result();
}

int main(int argc, char **argv)
{
    if (argc >= 2) {
        int i;
        for (i = 1; i < argc; i++) {
            if(strcmp(argv[i], "--all-symbols") == 0)
                all_symbols = 1;
            else if (strncmp(argv[i], "--symbol-prefix=", 16) == 0) {
                char *p = &argv[i][16];
                /* skip quote */
                if ((*p == '"' && *(p+2) == '"') || (*p == '\'' && *(p+2) == '\''))
                    p++;
                symbol_prefix_char = *p;
            } else
                usage();
        }
    } else if (argc != 1)
        usage();

    read_map(stdin);
    optimize_token_table();
    write_src();

    return 0;
} 
```

这是我得到的错误：

```
 File "joe.py", line 11
    struct sym_entry {
                   ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T01:08:21.000

主要问题可能是python代码实际上是C

# tags - ExpressionEngine 缺少频道条目

> ID：13504516
> 
> 赞同：0
> 
> 时间：2012-11-22T01:06:45.433
> 
> 标签：tags, expressionengine, missing-data, channel

我正在开发一个基于 ExpressionEngine 的新 Web 应用程序，并且在大多数情况下，我将内容基于频道条目。但是，我遇到了 exp 频道条目标签的一些非常奇怪的问题，因为它不会每次都返回所有相关条目。我无法弄清楚它发生了什么，因为在控制面板中查看它们时这些条目肯定是可用的，并且它们也会按照我的模板中的要求显示，但有时它们只是消失和/或未正确处理。大型和小型条目集也是如此，范围从符合 exp 标记中指定标准的 3 个通道条目到 500 个条目。

任何想法或反馈将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:24:36.687

这里可能会发生很多事情，所以这里有一些事情要注意，以防万一；

如果条目的条目日期在未来 - 您需要您的频道条目标签具有参数 show_future_entries = "yes"

同样，如果条目已关闭或过期，您需要添加 show="open|closed"

您是否正在查看特定类别并且这些条目未分配给该类别？

您是否正在查看特定类别但已从条目标签中排除类别数据

您检索的条目是否超过 100 个？除非您指定限制参数，否则默认返回 100 个条目。

# c# - 从行动到行动再到 _Layout

> ID：13504519
> 
> 赞同：1
> 
> 时间：2012-11-22T01:06:57.297
> 
> 标签：c#, asp.net-mvc, c#-4.0, asp.net-mvc-4

我有一个向用户显示简单消息的布局页面。

我有一个带有显示人员列表的索引操作/视图的人员控制器，并且我有一个人员的编辑操作/视图。

当用户成功更新并保存一个人的详细信息时，我想从 Edit 操作重定向到 Index 页面，但显示一条消息，例如“该人已成功更新”。

我已经尝试向 ViewBag 添加东西，但它并没有持续存在。我有一个 ViewModel 基类，但不知道是否/如何从编辑操作中设置索引的 ViewModel。

在从不同位置传递消息以在 _Layout 中使用的情况下，如何实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:33:31.380

您可以使用`TempData`来完成此操作。存储在 TempData 中的值只会在一个 Http 请求中持续存在，因此非常适合存储这些类型的消息。

**编辑 POST 操作**

```
[HttpPost]
public ActionResult Edit(EditPersonModel model)
{
    // .. Your code to edit the person ..

    TempData["message"] = "The person has been updated.";
    return RedirectToAction("Index", "People");
} 
```

**你的看法**

```
@if (TempData["message"] != null)
{
    <p>@TempData["message"]</p> // Displays the message
} 
```

您可以构建一个使用 TempData 和 ViewData（控制器扩展等）的完整通知系统，但这是最简单的方法。

# python - Flask 从请求中检索发布数据的速度很慢？

> ID：13504522
> 
> 赞同：28
> 
> 时间：2012-11-22T01:07:00.617
> 
> 标签：python, json, flask, werkzeug

我正在编写接受带有 json 数据的 POST 请求的烧瓶应用程序。我注意到基于传递给应用程序的数据大小的响应时间存在巨大差异。调试后，我将问题缩小到从请求对象中检索 json 数据的行。值得注意的是，测试是在烧瓶开发服务器上完成的。

```
start = time.time()
resp = json.dumps(request.json)
return str(time.time() - start) 
```

我对这条线进行了计时，对于 1024 的数据（可能不是巧合）和更少的字符，这需要 0.002 秒，超过 1024 的任何数据都需要 1 秒！这里发生了什么？这是开发服务器的限制吗？

编辑：通过 request.form.get('somedata') 获取内容长度超过 1024 的 POST 数据也会发生同样的事情

编辑：我无法用 Apache 提供的相同示例复制问题

编辑： **我开始深入研究 Werkzeug 模块，发现在读取`self._read(to_read)`从 BaseHTTPRequestHandler 传递的 wsgi.py 模块中的响应消息时会出现缓慢。还是不知道为什么这么慢。**

* * *

这是环境详细信息：Ubuntu - 10.04 Python - 2.6.5 Flask - 0.9 Werkzeug - 0.8.3

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T06:08:20.190

烧瓶开发服务器预计会很慢。来自[http://flask.pocoo.org/docs/deploying/](http://flask.pocoo.org/docs/deploying/)：

> 您可以在开发期间使用内置服务器，但您应该为生产应用程序使用完整的部署选项。（不要在生产中使用内置的开发服务器。）

正如 Marcus 在评论中提到的，另一个像 gunicorn 或 tornado 这样的 WSGI 服务器会更快、更可靠，所以一定要使用其中一个进行部署和基准测试。

如果您担心在开发过程中快速工作，您可以像在部署中一样在开发中使用 gunicorn。例如，如果您要部署到 heroku，您可以运行“foreman start”，gunicorn 服务器将立即启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-17T01:39:51.163

我在这样的线路上遇到了这个问题，大约需要 1.0 秒！它在烧瓶后处理程序中：

```
username=request.form.get('username') 
```

我正在用 curl -F 测试它：

```
curl -F username="x" http://127.0.0.1:5000/func 
```

我刚刚将 -F 更改为 -d ，它得到了 0.0004 秒！！！

```
curl -d username="x" http://127.0.0.1:5000/func 
```

我认为烧瓶在检索“多部分/表单数据”内容类型时存在问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-28T02:33:30.737

如果您使用 curl 发送请求，`Expect: 100-continue`可能会导致该行为。我在 uwsgi、flask 和 curl 中遇到了类似的行为。在我的情况下会发生以下情况：

*   如果请求正文大小大于 1024 字节，curl 会发布带有 Expect: 100-continue 标头的数据。
*   但是，uwsgi 无法处理标头。所以 uwsgi 没有响应 100-继续。
*   curl 等待 100-continue 响应，直到大约一秒超时。

[当 curl 发送 100-continue | Georg's Log](https://gms.tf/when-curl-sends-100-continue.html)对我了解 curl 行为很有用。

# javascript - 为什么我在加载页面时无法获得这些 css 属性？

> ID：13504524
> 
> 赞同：2
> 
> 时间：2012-11-22T01:07:21.953
> 
> 标签：javascript, html, css

> **可能重复：**
> [使用 JavaScript 获取 CSS 值](https://stackoverflow.com/questions/6338217/get-a-css-value-with-javascript)

你能告诉我为什么我在加载页面时无法获取这些 CSS 属性吗？

[jsFiddle 上的代码](http://jsfiddle.net/Gd6Kd/4/)

**javascript**：

```
function aviso(){
    alert("top: "+document.getElementById("divRojo").style.top);
    alert("position: "+document.getElementById("divRojo").style.position);
} 
```

**HTML：**

```
<html>
    <head>
        <style type="text/css">
            #divRojo {
                width:100px;
                height:100px;
                background:red;
                left:200px;
                top:200px;
                position:static;
        }
    </style>
</head>

<body onload="aviso()">
    <div id="divRojo">
        Div Rojo
    </div>
</body>

</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:09:59.513

这是因为该`DOMElement.style`属性包含内联样式——它不包含通过 CSS 应用的样式规则。

用于[`getComputedStyle`](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)获取应用的样式：

```
var el = document.getElementById("divRojo");
alert(window.getComputedStyle(el).top);
alert(window.getComputedStyle(el).position); 
```

[JSFiddle](http://jsfiddle.net/XVJDH/1/)

# facebook-graph-api - FaceBook Graph API：超越即时圈子的搜索

> ID：13504525
> 
> 赞同：4
> 
> 时间：2012-11-22T01:07:30.293
> 
> 标签：facebook-graph-api, search, graph

是否可以使用 FB graph API 搜索超出我直接圈子的用户？如果没有，拥有付费订阅帐户是否有助于克服这一障碍？

我正在使用以下图形查询，但似乎被限制在我的圈子内：

[https://graph.facebook.com/search?q=xx+yy&limit=5000&type=user&access_token=](https://graph.facebook.com/search?q=xx+yy&limit=5000&type=user&access_token=) ***

此外，如果我在下一次调用中使用分页增加偏移量，它仍将返回相同的用户 ID 集。所以不确定我是否错误地传递了参数或缺少其他一些参数。

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T21:25:38.290

不确定你在 Facebook 上的*直接圈子*是什么意思，但我假设你是指你的朋友。Graph API 允许您搜索所有公共对象（[source](http://developers.facebook.com/docs/reference/api/search/)） - 这意味着每个人（根据[此页面](http://www.facebook.com/help/468080906543413/)上的答案，因为名称总是公开可用的 - 这是我的理解），而不仅仅是您在 Facebook 上的朋友。

因此，当您搜索“John”时，如果您正确使用 Graph API，您应该让所有人都叫 John - 确保您的*访问令牌*有效（您不需要任何特殊权限来搜索人员）和您的语法遵循[此处](http://developers.facebook.com/docs/reference/api/search/)的示例。

为了测试您的查询，我建议您在将查询添加到应用程序代码之前使用[Graph API Explorer 。](http://developers.facebook.com/tools/explorer)这是查看错误是在您的查询中还是在其他地方的快速方法。例如，如果您想查找每个名为 John 的人，请使用此链接[http://developers.facebook.com/tools/explorer?method=GET&path=search%3Fq%3DJohn%26type%3Duser](http://developers.facebook.com/tools/explorer?method=GET&path=search%3Fq%3DJohn%26type%3Duser)。如果您是第一次使用资源管理器，请确保单击右侧的*获取访问令牌*，否则查询将返回错误。

# javascript - 匿名函数中的对象

> ID：13504528
> 
> 赞同：0
> 
> 时间：2012-11-22T01:07:42.250
> 
> 标签：javascript, oop, anonymous-function

> **可能重复：**
> [为什么 Twitter 重新定义 window.setTimeout 和 window.setInterval？](https://stackoverflow.com/questions/8044433/why-does-twitter-redefine-window-settimeout-and-window-setinterval)

我看到了这样的代码

```
 window.a = 5;
   (function() { window.a = window.a; })(); 
```

他们为什么要那样做？为什么不只是做

```
 (function() { window.a = 5; })(); 
```

更多示例

```
 (function() { window.setInterval = window.setInterval; })(); 
```

不就是和上面一样的原理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:14:03.440

这样做~~没有~~什么意义和用处。我不知道还要回答什么。

正如@RussellDias 在评论中指出的那样，对于 IE7+8（可能也在下面）可能有一个非常前卫的边缘情况，将本机方法重新分配给自身*可能是合理的。*

见[http://adequatelygood.com/2011/4/Replaceing-setTimeout-Globally](http://adequatelygood.com/2011/4/Replacing-setTimeout-Globally)

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:17:40.123

正如你所说，它没有意义。你可以这样做：

```
window.a = 5; 
```

其他的都是等价的。

干杯

# javascript - 运行函数后更改 Google 地图标记 HTML

> ID：13504529
> 
> 赞同：3
> 
> 时间：2012-11-22T01:07:45.077
> 
> 标签：javascript, google-maps-api-3

因此，我试图找出一种方法来更改 Google Maps V3 标记的 HTML，这些标记在从数据库中提取之后但在它们被推送到数组之前。

当调用 getFishing() 时，我想运行 convertRate(rate) 以便如果 rate 变量等于或大于 2，它会显示标记本身的 HTML 中的图片。我已经尝试将它放在 bindInfoWindow4() 中，并且在 getFishing() 函数中尝试了几个地方，但没有成功。有没有人这样做过？标记被推到fishArray之后是否有可能？

```
 function getFishing() {
        fishingUrl("XML_Fishing.php", function (data) {
            var xml = data.responseXML;
            var markers = xml.documentElement.getElementsByTagName("marker");
            for (var i = 0; i < markers.length; i++) {
                var id = markers[i].getAttribute("id");
                var title = markers[i].getAttribute("title");
                var rate = markers[i].getAttribute("rate");
                var Fishhtml = "<img id='1star' src='images/1star.png' style='visibility:hidden'>";
                var icon = FishingIcon;
                var Fishmark = new google.maps.Marker({
                    map: map,
                    position: point,
                    icon: icon.icon
                });
                fishArray.push(Fishmark);
                bindInfoWindow4(Fishmark, map, Fishinfo, Fishhtml);

            }
        });
    }
    function convertRate(rate) {
        if (rate >= 2) {
            document.getElementById("1star").style.visibility = 'visible';
        }
    }

    function bindInfoWindow4(marker, map, infoWindow, html) {
        google.maps.event.addListener(marker, 'click', function () {
            infoWindow.setContent(html);
            infoWindow.open(map, marker);
        });
    } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T01:27:52.300

如果您更改单击侦听器以显示保存在标记的成员变量中的 HTML，您可以随时更改它。如果 InfoWindow 已打开，您可能希望将其关闭并重新打开（或更新其内容，但这会变得更加复杂）。

就像是：

```
 function bindInfoWindow4(marker, map, infoWindow, html) {
      marker.myHtmlContent = html;
      google.maps.event.addListener(marker, 'click', function() {
        infoWindow.setContent(marker.myHtmlContent);
        infoWindow.open(map, marker);
      });
  } 
```

然后通过更改 marker.myHtmlContent 中的值来更新内容。为了让它可见，像这样：

```
 marker.myHtmlContent = "<img id='1star' src='images/1star.png' style='visibility:visible'>"; 
```

# ruby-on-rails - 方法返回 nil 时出现 NoMethodError

> ID：13504530
> 
> 赞同：0
> 
> 时间：2012-11-22T01:07:48.930
> 
> 标签：ruby-on-rails

我有两种方法用于确定是否将类应用于页面以显示某些内容已过期并且需要注意。

新用户注册时出现错误：

```
undefined method `last_contact_done_date=' for #<User:0x6183708> 
```

它引用错误的行是这样的：

```
2:   <div class="span3 <%= "overdue" if (signed_in? && contact_overdue?(current_user.id)) %>"> 
```

方法是这个`contact_overdue?`（在主页助手中）

```
def contact_overdue?(user_id)
  @user = User.find_by_id(user_id)
  return true if (Date.today - (@user.last_contact_done_date ||= Date.tomorrow)) > 6
end 
```

`User`模型中的 last_contact_done_date 方法就是这个

```
 def last_contact_done_date
      self.contacts.order('date_done DESC').first.try(:date_done)
  end 
```

我认为如果我`||=`在方法中使用运算符，那么如果is `contact_overdue?`，我会返回 -1 。但它似乎不起作用。我应该使用什么运算符，或者我应该如何更改方法，以便如果没有联系人，则从方法返回？`last_contact_done_date``nil``last_contact_done_date``contact_overdue?``false``contact_overdue?`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:19:30.577

`-1`要返回没有最后一次联系完成日期的默认值，请使用

```
@user.last_contact_done_date || -1 
```

（期望`Date.tomorrow`返回是不合理的`-1`；））

`||=`是赋值运算符；`a ||= b`相当于`a = a || b`; 如果`a`是一个属性（即以点和实例为前缀`c.a`），对其赋值将调用方法`a=`。因此，您的代码需要您有一个名为`last_contact_done_date=`处理分配的方法，而您没有。

# android - 我怎么知道具有指定参数的电话是 hdpi 还是 ldpi

> ID：13504533
> 
> 赞同：0
> 
> 时间：2012-11-22T01:08:06.167
> 
> 标签：android, android-layout, ps

作为标题，以下是我手机psd的一些参数：宽度像素：高度像素：文档宽度：13.333英寸文档高度：7.5英寸

所以 dpi 将是 96，我们会知道手机只是一个 ldpi 手机，因为[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html) 谁能告诉我它是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:20:32.193

如果您的图形设计为以 96 像素/英寸显示，那么它们不适合 Android。最小密度设备标称为 120 像素/英寸（称为 LDPI）。如果您将图形放入 中`res/drawable-ldpi`，它们将显示为原始尺寸的大约 96/120（或大约 3/4）（以英寸为单位）。

如果图像显示在更高密度的设备上，Android 会自动放大图像，因此无论实际设备像素密度如何，它们都会保持这个大小比例。

解决此问题的唯一方法是在将图像添加到您的项目之前重新缩放图像。如果您重新调整到每个标称像素密度（120、160、240 和 320；您也可以为 tvdpi 屏幕输入 213），您将获得最佳质量。

# iphone - 应用程序在 iPhone 设备上意外终止，但在模拟器上运行良好

> ID：13504537
> 
> 赞同：1
> 
> 时间：2012-11-22T01:08:28.193
> 
> 标签：iphone, ios, xcode

开发的应用程序在 Xcode 模拟器上运行良好，但是当我在真实设备上测试它时被终止。以下是应用程序终止时我的手机控制台打印的内容。

```
Nov 22 00:51:09 iPhone ReportCrash[3862] <Notice>: Formulating crash report for process CoL[3860]
��Nov 22 00:51:09 iPhone ReportCrash[3862] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
��Nov 22 00:51:09 iPhone com.apple.launchd[1] (UIKitApplication:pan.ConquestOfLancaster[0xd857][3860]) <Warning>: (UIKitApplication:pan.ConquestOfLancaster[0xd857]) Job appears to have crashed: Segmentation fault: 11
��Nov 22 00:51:09 iPhone backboardd[52] <Warning>: Application 'UIKitApplication:pan.ConquestOfLancaster[0xd857]' exited abnormally with signal 11: Segmentation fault: 11
��Nov 22 00:51:09 iPhone ReportCrash[3862] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/CoL_2012-11-22-005109_iPhone.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0
��Nov 22 00:51:09 iPhone awdd[3863] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary 
```

基本上，当我触发 NSTimer（倒计时）并达到“1”时，就会出现问题。冻结一段时间然后终止。

这是定时器初始化的方法：

```
- (void)MapMenu:(MapMenu *)menu didSelectButton:(NSInteger)index{

    if (index == 0) {
        if (self.owner == nil && distance < 10) {
            CountDownTimer* countDown = [[CountDownTimer alloc]init];
            [countDown startTimerOn:parentView];
            [self performSelector:@selector(attackTo:attacker:) withObject:nil afterDelay:20.0];
        }
        else if (self.owner == @"Player_1")
            NSLog(@"You have already occupy this building with name, %@", self.title);
    }
}

- (void) attackTo: (BuildingViewController*) selectedBuilding attacker: (NSString*) attacker{

    self.owner = @"Player_1";
    NSLog(@"Building has a new owner with name, %@", self.owner);
} 
```

有没有人有这方面的线索。真的……输了！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:25:26.310

我不确定这是否是崩溃的根源，但是您确实在这里遇到了问题：

```
[self performSelector:@selector(attackTo:attacker:) withObject:nil afterDelay:20.0]; 
```

基本上，选择器调用有两个事实`:`意味着它需要两个参数。如果使用 method `performSelector:withObject:afterDelay:`，则只能将其与具有一个参数的方法一起使用。

例如，

```
[self performSelector:@selector(doSomething:) withObject:object afterDelay:20.0f] 
```

相当于

```
[self doSomething:object] 
```

大约 20 秒后执行。

在这种情况下，你有一个不匹配，因为你`@selector`有*两个*参数，所以你不能用那个特定的`performSelector`方法使用它。

虽然有一个`performSelector:withObject:withObject`方法需要两个参数，但它没有`delay`参数。您可能需要改为使用`NSInvocation`，或更改`attackTo:attacker:`它以使其使用单个参数（例如，NSDictionary）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:15:31.367

我看到您使用了一个名为 CountDownTimer 的类。这是 NSTimer 的子类吗？如果是这样，您应该阅读 NSTimer 类参考中的子类化注释。 [NSTimer 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html "NSTimer 类参考")

基本上，它说不要这样做。实际上甚至基本上没有，它说不要这样做。

在阅读类参考时，请查看如何在 n 秒后实现回调。就个人而言，我喜欢`+ scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:`

# msbuild - exec 任务上的 msbuild 访问被拒绝，但仅适用于 4.0

> ID：13504538
> 
> 赞同：1
> 
> 时间：2012-11-22T01:08:28.693
> 
> 标签：msbuild

我们有一个使用 Process.Start 来运行 msbuild 的网页，我们为它提供了一个要处理的 msbuild 文件。

msbuild 脚本包含许多正常的 msbuild 任务，以及一个运行 hg.exe 的 Exec 任务。

当我们告诉 Process.Start 简单地运行“msbuild.exe”时，它工作正常。脚本执行完毕，hg.exe 运行，一切正常。

但是当我们告诉 Process.Start 运行“c:\specific-path-to-4.0\msbuild.exe”时它失败了。它确实尝试执行脚本，并且确实执行了一些任务，但它无法运行运行 hg.exe 的 Exec 任务。它给出了“拒绝访问”错误。

问题是，我们有一些需要 4.0 的任务，所以我们确实需要使用那个版本的 msbuild。

我们到处给前任和路径疯狂地赋予特权，但都无济于事。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T17:45:07.513

这个问题与 64 位和 32 位有关。而它“在我的机器上运行！” 在其他服务器上就好了，在某些服务器上我们遇到了这里列出的问题。所有的测试机器都是 64 位的，但有些有问题，有些没有。最后，修复很简单：

我们需要调用：

C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild.exe

而不是调用：

C:\Windows\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe

我们永远无法弄清楚究竟是什么原因，或者为什么它在某些服务器上起作用而在其他服务器上不起作用。但这个简单的改变适用于所有人，所以我们很高兴！

不确定这是否合适，但要在应得的地方给予赞扬......我们在 Rackspace 的狂热支持为我们解决了这个问题！

# python - 函数调用结束后，cherrypy/apache 服务器不释放内存

> ID：13504540
> 
> 赞同：0
> 
> 时间：2012-11-22T01:08:38.817
> 
> 标签：python, apache, memory, cherrypy

我已经尝试了一段时间来检测cherrypy的内存问题。对函数的任何 Web 调用都会使用我运行此命令时的内存：

```
ps -u djotjog -o pid,rss,command | awk '{print $0}{sum+=$2} END {print "Total", sum/1024, "MB"}' 
```

似乎永远用完了。在退出之前，我试图“删除”函数中的每个对象。没有效果。我想知道存储大量数据的类实例是否可能是问题所在。我使用类似的东西：

```
class Data:
    pass
ref_data = Data() 

... do stuff... make a stories_dict ...

ref_data.stories = stories_dict #dictionary 'id':'story' pairs
del stories_dict 
```

最后，我看到每次运行网络呼叫时仍然使用 350MB，当它达到 500MB 后，它似乎产生了另一个cherrypy 实例！

```
 PID   RSS COMMAND
10492   960 ps -u globamh1 -o pid,rss,command
10493   784 awk {print $0}{sum+=$2} END {print "Total", sum/1024, "MB"}
29833  1708 -bash
Total 3.37109 MB 
```

之后...

```
 PID   RSS COMMAND
12811  1164 /bin/sh cherryd.fcgi
12817 293788 /home4/globamh1/python-2.7.2/bin/python2.7     /home4/globamh1/.local/bin/cherryd -P modules -c cherryd.conf -f -i app
13195   984 ps -u globamh1 -o pid,rss,command
13196    16 awk {print $0}{sum+=$2} END {print "Total", sum/1024, "MB"}
29833  1708 -bash
Total 308 MB 
```

后来还是...

```
 PID   RSS COMMAND
 4053  5216 /home/globamh1/python-2.7.2/bin/python /home/globamh1/python-    2.7.2/ngo_prompter_2.py
 4091   988 ps -u globamh1 -o pid,rss,command
 4092   784 awk {print $0}{sum+=$2} END {print "Total", sum/1024, "MB"}
12817 1111616 /home4/globamh1/python-2.7.2/bin/python2.7    /home4/globamh1/.local/bin/cherryd -P modules -c cherryd.conf -f -i app
29833  1716 -bash
32413  1168 /bin/sh cherryd.fcgi
32414 576792 /home4/globamh1/python-2.7.2/bin/python2.7 /home4/globamh1/.local/bin/cherryd -P modules -c cherryd.conf -f -i app
Total 1658.48 MB 
```

因此，将其总结为一些具体问题：

*   python的垃圾收集器应该多快工作？
*   cherrypy 或 apache 会做一些奇怪的事情来保持数据的持久性吗？
*   如果它使用这么多内存，我怎么能相信cherrypy响应多个请求？我已经看到它忽略了一些请求。
*   这是服务器配置问题吗？

这是同一个问题吗？ [linux上的python cherrypy应用程序未释放内存](https://stackoverflow.com/questions/3290754/memory-not-released-by-python-cherrypy-application-on-linux)

如果是，我如何在共享托管站点上配置该解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:01:35.313

从您展示的示例代码中，可以收集的信息很少。尤其是：

```
ref_data.stories = stories_dict 
```

这使得 ref_data.stories 和 stories_dict 都引用同一个大型数据集。即使你删除了 stories_dict，因为 ref_data.stories 仍然是对同一个 dict 的引用，所以在 ref_data.stories 被删除（或 ref_data 被删除）之前，它不会被垃圾收集：

```
del ref_data.stories # remove the attribute
del ref_data # delete the instance and all of its attributes 
```

否则，当 stories_dict 被删除时，唯一需要进行垃圾收集的是指向该字典的指针（可能只有几个字节）。

> python的垃圾收集器应该多快工作？

我不确定是否有保证，但根据我的经验，当任何对象被`del`编辑或函数退出时，垃圾收集器会立即运行。

> cherrypy 或 apache 会做一些奇怪的事情来保持数据的持久性吗？

我怀疑不是。如果您直接从解释器运行相同的例程，您不会看到这种行为吗？

> 如果它使用这么多内存，我怎么能相信cherrypy响应多个请求？我已经看到它忽略了一些请求。这是服务器配置问题吗？

如果您的应用程序从根本上使用了比系统可用的内存更多的内存（如果请求是并行处理的），您将需要找到某种方法来同步跨请求的响应。另一种选择是将 apache/cherrypy 配置为一次只服务一个请求。我相信这是 WSGI 配置的一部分（要分配多少进程/线程）。如果您将进程/线程数限制为 1，那么 CherryPy 一次只会处理一个请求。

# css - 根据类“范围”分配CSS属性

> ID：13504543
> 
> 赞同：4
> 
> 时间：2012-11-22T01:08:53.383
> 
> 标签：css, class, css-selectors

我有一些需要设置样式的 HTML 代码，这些代码由 Web 服务自动生成。我得到的部分代码如下所示：

```
<input type='text' id='txtField001' class='txtField150'>foo</input>    
<input type='text' id='txtField002' class='txtField10'>bar</input>
<input type='text' id='txtField001' class='txtField142'>sum</input> 
```

现在，“奇怪”的部分来了：类名后面的数字（即：150、10 和 142）实际上是最大值。文本字段接受的字符数，它给了我一个关于文本字段应该呈现多宽的“提示”：150 宽，10 短；由于这个数字变化很大（它是由调用 Web 服务的人定义的用户），让“n”类来遵守所有可能的值是不切实际的。

那么：有没有办法拥有一个“范围类”或类似的东西 - 请记住，理论上，我无法更改 Web 服务提供的任何内容，并且我真的不想用 javascript 评估事物？

具体来说，有没有办法声明这样的事情（我知道这有点疯狂）：

```
.txtField1 ... .txtField50 {
    width: 50px;
}

.txtField50 ... .txtField100 {
    width: 80px;
}

.txtField100 ... .txtField150 {
    width: 120px;
} 
```

（我是如何在脑海中读到这个的：“对于从 1 到 50 的任何类 txtField，使用 50px 宽度......等等）

谢谢你的帮助。我知道这是一个很长的机会，我最好的选择是使用 javascript，但是，嘿，我不得不问 ;-)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-23T15:55:09.933

## 是的，有限制

我一直在思考一个类似于 cimmanon 的解决方案，只是我知道它需要比这更精致（这就是为什么需要一些时间来回答的原因）。

**让我先声明一下，这可能需要一个实际限制**（我不知道在您的情况下可能存在的字符数是否有限制）。[**正如您在我的示例 fiddle 中看到的那样**](http://jsfiddle.net/CBFeE/16/)，任何 300+ 都无法解析为更大的尺寸。如果存在上限或未知上限，那么 javascript 确实是您的最佳解决方案。我的示例适用于少于 300 个，并且可能使用不多的代码就可以制作多达 999 个。但是我认为1000+是不合理的。

**CSS**

```
/* set default as small size */
[class ^= "txtField"] {
    width: 50px;
}

/* weed out 50-99, making sure not to get 5-9 */
[class *= "d5"]:not([class $= "d5"]),
[class *= "d6"]:not([class $= "d6"]),
[class *= "d7"]:not([class $= "d7"]),
[class *= "d8"]:not([class $= "d8"]),
[class *= "d9"]:not([class $= "d9"])
{
    width: 80px;
}

/* weed out 100-199, making sure not to get 1 or 10-19
   NOTE: this becomes a highly specific selector
*/
[class *= "d1"]:not([class $= "d1"]):not([class $= "d10"]):not([class $= "d11"]):not([class $= "d12"]):not([class $= "d13"]):not([class $= "d14"]):not([class $= "d15"]):not([class $= "d16"]):not([class $= "d17"]):not([class $= "d18"]):not([class $= "d19"])
{
    width: 120px;
}

/* weed out 150-199, making sure not to get 15-19
   NOTE: because the previous selector is so specific, this one
   needed the !important flag (which I hate to use, but here
   seemed to be the best and only solution)
*/
[class *= "d15"]:not([class $= "d15"]),
[class *= "d16"]:not([class $= "d16"]),
[class *= "d17"]:not([class $= "d17"]),
[class *= "d18"]:not([class $= "d18"]),
[class *= "d19"]:not([class $= "d19"])
{
    width: 150px !important;
}

/* weed out 200-299, making sure not to get 2 or 20-29
   NOTE: again high specificity
*/
[class *= "d2"]:not([class $= "d2"]):not([class $= "d20"]):not([class $= "d21"]):not([class $= "d22"]):not([class $= "d23"]):not([class $= "d24"]):not([class $= "d25"]):not([class $= "d26"]):not([class $= "d27"]):not([class $= "d28"]):not([class $= "d29"])
{
    width: 180px;
}

/* weed out 250-299, making sure not to get 25-29
   NOTE: !important needed again;
   also, anything 300+ reverts back to smallest size unless
   one keeps going... maybe 999 could be reached "reasonably"
*/
[class *= "d25"]:not([class $= "d25"]),
[class *= "d26"]:not([class $= "d26"]),
[class *= "d27"]:not([class $= "d27"]),
[class *= "d28"]:not([class $= "d28"]),
[class *= "d29"]:not([class $= "d29"])
{
    width: 210px !important;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T02:42:37.930

如果你不能以任何方式修改类，你可以通过 CSS 属性选择器进行部分匹配：

```
input[class^="txtField10"] /* catch txtField10, txtField100, txtField1000, etc */
input[class^="txtField150"] /* catch txtField150, txtField15064, txtField150829, etc */ 
```

我为示例选择了“开头”语法，您可以在此处查看其他类型：http: [//css-tricks.com/attribute-selectors/](http://css-tricks.com/attribute-selectors/)

字段的最大长度确实应该通过 maxlength 属性设置（您也可以像我上面所做的那样匹配）。但是，如果它是自动生成的，那么您就无能为力了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:38:36.003

另一种方法是在您的对象上有多个类：

```
<input type='text' id='txtField001' class='txtField width150'>foo</input> 
```

或者更好的是一些与绝对实现无关的东西（这是我在内部开发框架中所做的，我有窄、宽等作为标准字段宽度）：

```
<input type='text' id='txtField001' class='txtField wide'>foo</input> 
```

这样，如果您调整实现的细节，您就不会觉得需要调整每个类。

此方法与脚本技术、生成的 CSS 文件或许多其他效率或一致性机制很好地结合在一起。

要遵循上一个答案中的示例，使用 Dojo，因为我不是 jQuery 人，因此您可以进行如下格式化：

```
var widths = {
   narrow:  '10em';
   wide: '30em';
}

for (m : widths) {
   if widths.hasOwnProperty(m) {
      dojo.query('.' + m).style('width', widths[m]));
   } 
} 
```

如果您绝对必须以各种样式对特定宽度进行编码，那么使用一个额外的类来选择用于编写脚本的节点仍然会对您有所帮助。您将根据共享类进行选择，然后检查所有类以查找具有参数的类。

如果您不遵守严格的验证合规性，您还可以将此信息嵌入到自定义属性而不是类中，然后在 JavaScript 中对其进行解析。

有很多方法。

# haskell - 将 Kleisli 箭头提升到 IO？

> ID：13504551
> 
> 赞同：3
> 
> 时间：2012-11-22T01:09:38.907
> 
> 标签：haskell, io, arrows, lifting, kleisli

如果我有以下两个 Kleisli 箭头：

```
stdoutProcessA :: Kleisli Maybe String (IO String)
writeToFileA :: Kleisli Maybe (FilePath, String) (IO ()) 
```

我希望能够写出类似的东西：

```
compile = proc src -> do
    output <- stdoutProcessA -< "..."
    writeToFileA -< ("...", output)
    ... 
```

这当然行不通，因为`String`不匹配`IO String`. 另一方面，可以同时定义`stdoutProcessA`和定义`writeToFileA`type `Kleisli IO ...`，但是我将无法用 type 的箭头组合它们`Kleisli Maybe ...`，这是我需要的其他事情。

我对箭头还不是很有经验，所以我可能遗漏了一些明显的东西。如何进行上述操作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T01:54:53.937

这些箭头对我来说没有多大意义：

```
stdoutProcessA :: Kleisli Maybe String (IO String)
writeToFileA :: Kleisli Maybe (FilePath, String) (IO ()) 
```

`Maybe (IO a)`当您可能是指时，它们代表带有结果的函数`IO (Maybe a)`。后一种类型代表`IO`可能失败的动作，而在前一种中，失败或成功根本不取决于`IO`。

`IO`组合and的正确方法`Maybe`是使用`MaybeT`monad 转换器，如下所示：

```
stdoutProcessA :: Kleisli (MaybeT IO) String String
writeToFileA :: Kleisli (MaybeT IO) (FilePath, String) () 
```

如果您将其他箭头写为`Monad m => Kleisli (MaybeT m) a b`，它们应该与这些箭头很好地组合而无需任何提升。或者，您可以使用

```
lift' :: Monad m => Kleisli Maybe a b -> Kleisli (MaybeT m) a b
lift' (Kleisli f) = Kleisli $ \x -> MaybeT (return $ f x) 
```

将您现有的`Kleisli Maybe`箭头提升到`Kleisli (MaybeT IO)`需要的地方。

# c# - 更改列表视图的文本

> ID：13504557
> 
> 赞同：1
> 
> 时间：2012-11-22T01:10:01.967
> 
> 标签：c#, winforms, listview

我有一个关于 listView 的快速问题，以及如何检查 ListView（包含空项目）是否有某个字符串？

这是添加到特定项目的代码（在列表视图的第 5 列下）。它基本上检查该项目是否出现在谷歌搜索中。如果是，它会向该特定行写入“是”，如果不是，它会将其留空：

```
string google2 = http.get("https://www.google.com/search?q=" + textBox1.Text + "");
                string[] embedid = getBetweenAll(vid, "type='text/html' href='http://www.youtube.com/watch?v=", "&amp;feature=youtube_gdata'/>");

                for (int i = 0; i < embedid.Length; i++)
                {

                    if (google2.Contains(embedid[i]))
                    {
                        listView1.Items[i].SubItems.Add("Yes");
                        }
                    } 
```

现在我要做的是检查某个列是否包含说是的项目。如果它确实将它们着色为绿色，如果不是。

这是代码：

```
 if (i.SubItems[5].Text.Contains("Yes"))
                        {
                            labelContainsVideo.ForeColor = System.Drawing.Color.Green;
                        } 
```

我的问题是我不断收到一条错误消息`InvalidArgument=Value of '5' is not valid for 'index'.`

我的预感是第 5 列中有空项目可能会搞砸，但我不知道。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:28:40.390

检查 Item 以查看 SubItem Collection 是否具有正确的 Number of 值。

IE

```
int threshold = 5;

foreach (ListViewItem item in listView1.Items)
{
    if (item.SubItems.Count > threshold)
    {
        if (item.SubItems[5].Text.Contains("Yes"))
        {
            // Do your work here
        }
    }
} 
```

# javascript - render_to_string 和 //= 需要 tree 。问题

> ID：13504561
> 
> 赞同：0
> 
> 时间：2012-11-22T01:10:34.710
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3

当我在具有以下内容的 javascript 文件上使用 render_to_string 时：

```
//= require tree . 
```

然后该行保留在那里，它不会呈现文件夹中的其他 js 文件。

这是我使用 render_to_string 的方式：

```
tt = render_to_string :file => "app/assets/javascripts/tasks/#{task.title}/thetask.js", :layout => false 
```

我还需要哪些其他选项才能解析 //= require tree 。并将文件变成一个字符串？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:26:22.363

我采取了不同的路线，因为我不能做我想做的事。我最终只使用 JSON 并将两个文件存储在 JSON 中并将其发送到客户端。

该解决方案对我有用。

# c# - 基于 XML 的 Crystal Report 在刷新时不更新子对象

> ID：13504563
> 
> 赞同：1
> 
> 时间：2012-11-22T01:10:58.720
> 
> 标签：c#, xml, crystal-reports, datatable

我正在开发一个需要几种类型的 Crystal Reports 的应用程序，“标准”那些命中数据库表、更新连接字符串并刷新报表，完成。另一种类型的 Crystal Report 基于常规（稍微复杂的）类对象或 POCO 对象。

我面临的问题是报告的数据源基于我们创建的类，它的属性也是我们创建的类。当我刷新报表时，对象中的数据会更新，但子属性对象中的数据不会更新。它们保留为我创建报告时设置的值。

一点背景知识，环境是 VS2010 上的 C# 和 Crystal Reports 2011。

为了创建报告，我创建了一个对象并使用相关数据（包括子对象）填充每个属性，然后将对象导出为 XML 并将其输出到文件中。然后我创建了一个新报表并添加了一个“ADO.NET (XML)”类型的数据源。

所有的“表格”看起来都很好，我可以像往常一样制作和添加链接、设计和预览报告。

当谈到运行时测试时，我从这个 StackOverflow 问题的代码开始：

[.NET - 将通用集合转换为 DataTable](https://stackoverflow.com/questions/701223/net-convert-generic-collection-to-datatable)

为了将我的对象列表转换为 DataTable 并将其分配为报告的数据源。如前所述，它适用于第一级，但不适用于子属性。

当子属性是我们创建的类之一而不是简单的 CLR 数据类型时，我已经修改了该代码以创建一个新的 DataTable，但这只是让我现在得到一个空报告。该代码如下：

```
public static class CollectionExtensions
{
    /// <summary>Converts to.</summary>
    /// <typeparam name="T">The type value</typeparam>
    /// <param name="list">The list value.</param>
    /// <returns>The data table.</returns>
    public static DataTable ConvertTo<T>(this IList<T> list)
    {
        var entityType = typeof(T);
        var table = CreateTable(entityType);

        foreach (var item in list)
        {
            var row = ConvertToRow(table, item, entityType);
            table.Rows.Add(row);
        }

        return table;
    }

    /// <summary>
    /// Converts to table.
    /// </summary>
    /// <param name="table">The table.</param>
    /// <param name="item">The item value.</param>
    /// <param name="type">The type value.</param>
    /// <returns>returns a data table</returns>
    public static DataRow ConvertToRow(DataTable table, object item, Type type)
    {
        var properties = TypeDescriptor.GetProperties(type);

        var row = table.NewRow();

        foreach (PropertyDescriptor prop in properties)
        {
            if (prop.PropertyType.IsAssignableFrom(typeof(AbstractEntity)))
            {
                var subTable = CreateTable(prop.PropertyType);

                if (prop.GetValue(item) != null)
                {
                    var subRow = ConvertToRow(subTable, prop.GetValue(item), prop.PropertyType);
                    subTable.Rows.Add(subRow);
                }

                row[prop.Name] = subTable;
            }
            else
            {
                row[prop.Name] = prop.GetValue(item) ?? DBNull.Value;
            }
        }

        return row;
    }

    /// <summary> Creates the table. </summary>
    /// <param name="type">The type value.</param>
    /// <returns>The datatable</returns>
    public static DataTable CreateTable(Type type)
    {
        var table = new DataTable(type.Name);
        var properties = TypeDescriptor.GetProperties(type);

        foreach (PropertyDescriptor prop in properties)
        {
            if (prop.PropertyType.IsAssignableFrom(typeof(AbstractEntity)))
            {
                table.Columns.Add(prop.Name, typeof(DataTable));
            }
            else
            {
                table.Columns.Add(prop.Name, Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType);
            }
        }

        return table;
    }
} 
```

我认为问题在于我在创建报告的方式与在更新数据源时如何在运行时应用数据之间存在脱节。

但以前从未做过基于 XML 的 Crystal Report，我不确定如何解决这个问题。我对专家的问题是：

1.  我是否在正确的轨道上，首先创建报告？
2.  鉴于我创建报告的方式，我是否在正确的轨道上更新报告？
3.  有没有更好的方法来达到同样的结果？对于作为基于 XML 的 Crystal Report 的数据源的多级对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T04:14:57.757

解决方案是将对象序列化为 MemoryStream 并将其反序列化回 DataSet，Crystal Report 能够很好地更新所有表（到目前为止我已经测试过）。

我在我的测试工具应用程序中使用了以下代码，这解决了这个问题：

```
 var xmlDocument = new XmlDocument();
        var serializer = new XmlSerializer(typeof(MyObjectClass));
        using (var stream = new MemoryStream())
        {
            serializer.Serialize(stream, myObjectInstance);
            stream.Flush();
            stream.Seek(0, SeekOrigin.Begin);
            xmlDocument.Load(stream);
        }

        var data = new DataSet();
        var context = new XmlParserContext(null, new XmlNamespaceManager(new NameTable()), null, XmlSpace.None);
        var reader = new XmlTextReader(xmlDocument.OuterXml, XmlNodeType.Document, context);
        data.ReadXml(reader);

        var report = new ReportDocument();
        report.Load(@"C:\Reports\TestReport.rpt", OpenReportMethod.OpenReportByTempCopy);

        report.SetDataSource(data);

        this.crystalReportsViewer.ViewerCore.ReportSource = report; 
```

我希望它可以帮助其他人。

# java - JDBC Batch 执行速度极慢

> ID：13504564
> 
> 赞同：7
> 
> 时间：2012-11-22T01:11:05.100
> 
> 标签：java, mysql, jdbc, batch-insert

谁能告诉我我做错了什么我在 mysql 中执行 350 次插入，这需要 40 秒。

这是代码

```
long t0 = System.currentTimeMillis();
        Connection con = connectionProvider.getConnection();
        PreparedStatement s = con.prepareStatement("insert into domkee.friends(idFriends,friend1Id,friend2Id,friend2Name) values(?,?,?,?)");
        con.setAutoCommit(false);
        for (Friend f : friends) {
            s.setLong(1, 0);
            s.setLong(2, f.getFriend1Id());
            s.setLong(3, f.getFriend2Id());
            s.setString(4, f.getFriend2Name());
            s.addBatch();

        }
        long t1 = System.currentTimeMillis() - t0;
        s.executeBatch();
        long t2 = System.currentTimeMillis()-t0;
        con.commit();
        long t3 = System.currentTimeMillis()-t0;
        s.close();
        con.close();
        long t4 = System.currentTimeMillis()-t0;
        System.out.println(((double)t1/1000) + ";" + ((double)t2/1000) + ";" + ((double)t3/1000) + ";" + ((double)t4/1000)); 
```

这是控制台：

```
0.156;39.251;39.376;39.486 
```

所以这`.executeBatch()`需要40秒，可能是什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-22T02:08:15.820

添加`?rewriteBatchedStatements=true`到 JDBC url 的末尾。它会给你一个严重的性能改进。请注意，这是特定于 MySql 的，不会对任何其他 JDBC 驱动程序产生任何影响。

# node.js - 在其他 ejs 标签中嵌入 ejs 标签时遇到问题

> ID：13504565
> 
> 赞同：0
> 
> 时间：2012-11-22T01:11:16.183
> 
> 标签：node.js, ejs

我正在尝试在我的一个 ejs 模板中执行一个 for 循环。这是一个游戏板，我希望能够使用 ejs 变量来改变尺寸，`<%= units %>`但我遇到了麻烦，因为我使用它作为我的循环的参数

```
<div id="boardGridContainer">
  <table class="boardGrid">
    <% for(var i = 0; i <  <%= units %> - 1; i++ ) { %>
      <tr>
      <% for(var j = 0; j < <%= units %> -1; j++){ %>
        <td></td>
      <% } %>   
      </tr>
    <% } %>
  </table>
</div> 
```

任何关于如何实现这一点的建议，或者更好的方法，都值得赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:56:35.417

无法在其他 ejs 标签中使用 ejs 标签。你的东西不需要它。您可以访问任何 ejs 标签中的任何导出变量。对于您的示例：

```
<div id="boardGridContainer">
  <table class="boardGrid">
    <% for(var i = 0; i <  units - 1; i++ ) { %>
      <tr>
      <% for(var j = 0; j < units - 1; j++){ %>
        <td></td>
      <% } %>   
      </tr>
    <% } %>
  </table>
</div> 
```

# c# - 剑道网格弹出显示

> ID：13504568
> 
> 赞同：4
> 
> 时间：2012-11-22T01:11:38.133
> 
> 标签：c#, asp.net-mvc, popup, grid, kendo-ui

MVC4，剃刀视图。我可以使用客户端模板打开 Kendo (Ajax) 网格项目的详细信息窗口，并且可以正常工作。我的问题是当我返回网格时我失去了我的网格状态（排序/排序等）。

我的想法是使用弹出窗口来显示网格项目的详细信息。我看到了如何创建一个弹出编辑窗口，但我只想显示没有编辑功能的详细信息。

由于我使用的是 Ajax 数据源，因此我似乎无法创建自定义命令。

关于如何完成打开详细信息窗口而不丢失网格状态或仅弹出详细信息窗口的任何想法（请使用剃刀语法）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:54:57.157

一个技巧是使用编辑器模板。如果您已将网格设置为绑定在 type 上`MyType`：

```
@(Html.Kendo().Grid<MyType>().Name("my-grid")) 
```

然后，您只需在同一个视图文件夹中添加一个名为的新文件夹`EditorTemplates`（如果您总是没有，通常您在`Shared`用于 Kendo 模板的文件夹下有一个这样的文件夹）并将您想要的视图放入其中显示在您的弹出窗口中：

```
@model MyType

<div class="display-label">@Html.LabelFor(m => m.Name)</div>
<div class="display-field">@Html.DisplayFor(m => m.Name)</div> 
```

等等...

# javascript - 内联表单验证

> ID：13504574
> 
> 赞同：-1
> 
> 时间：2012-11-22T01:12:35.333
> 
> 标签：javascript, forms, validation

我试图让我的表单验证内联，但似乎无法获得正确的语法，目前我有这个，它什么也没做。第一个函数 formhandler 旨在在元素变得模糊时更改 span 元素文本，并在字段聚焦时删除错误文本，而此时它不执行这些操作。

```
<html>
<script type = "text/javascript">
document.getElementById("form").onfocus = function formHandler()    {
    for(var i = 0; i < document.getElementById("form").length; i+=1){
        if(document.getElementById("form").elements[i].type == 'text') {
            if(document.getElementById("form").elements[i].focus()) {
                var onode = document.getElementById("form").elements[i].nextSibling;
                onode.innerHTML = "";
                valid = true;
            }
            else if(document.getElementById("form").elements[i].blur()) {
                var onode = document.getElementById("form").elements[i].nextSibling;
                onode.innerHTML = "Please Fill in Field";
                valid = false;
            }
        }
    }
}
function validate() {
    var valid = false;
    for(var i = 0; i < document.getElementById("form").length; i+=1){
        if(document.getElementById("form").elements[i].type == 'text') {
            if(document.getElementById("form").elements[i].value == "") {
                var onode = document.getElementById("form").elements[i].nextSibling;
                onode.innerHTML = "Please Fill in Field";
                valid = true;
            }
            else{
                var onode = document.getElementById("form").elements[i].nextSibling;
                onode.innerHTML = "";
                valid = false;
            }
        }
    }
}

document.getElementById("form").onsubmit = validate;
</script>
<head>
    <title>Question 1 / Vraag 1 - Basic JavaScript Validaton / Basiese JavaScript validasie
    </title>
    <link rel="Stylesheet" type="text/css" href="style.css" />
</head>
<body>
    <form method="get" action="" id = "form">
    <table>
    <tr>
    <td> Firstname:</td>
    <td> <input type="text" name="firstname" id="firstname" /><span id="fnError">
    </span></td>
    </tr>
    <tr>
    <td> Surname:</td>
    <td> <input type="text" name="surname" id="surname" /><span id="snError">
    </span></td>
    </tr>
    <tr>
    <td> Age:</td>
    <td> <input type="text" name="age" id="age" /><span id="aError">
    </span></td>
    </tr>
    <tr>
    <td>  Email:</td>
    <td><input type="text" name="email" id="email" /><span id="eError">
    </span></td>
    </tr>
    <tr><td colspan="2"><input type="button" value="Validate" onclick = "validate()"/></td></tr>
    </table>
    </form>
</body>
</html> 
```

我试图在不使用 jquery 的情况下实现这一点，所以请不要建议它，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:41:43.043

这些是我在您的代码中发现的问题：

*   第 1 行：表单没有`.focus`方法。你这样做是什么意思？

*   第 2 行：更改`.length`为`.elements`：

    ```
    for (var i = 0; i < document.getElementById("form").elements.length; i++ ) {
        var node = document.getElementById("form").elements[i];
        ... 
    ```

    [表单中的元素现在别名为`node`.]

*   第 4 行：如果元素失焦， `.focus`/`.blur`方法不会返回 true。我们将不得不自己做：

    ```
    node.onfocus = function() { this.isInFocus = true; };
    node.onblur  = function() { this.isBlurred = !this.isInFocus; }; 
    ```

    结果代码如下：

    ```
    if ( node.isInfocus ) { ... }

    else if ( node.isBlurred ) { ... } 
    ```

*   第 9 行：参见上文。

*   将代码包装在 a`window.onload`中，以便在 DOM 加载后能够使用 DOM 元素。

这是您修改后的代码；请让我知道这对你有没有用：

```
var nodes = document.getElementById('form').elements, node;

for ( var i = 0; i < nodes.length; i++ ) (function(i) {

    nodes[i].onfocus = function() { this.isInFocus = true; };
    nodes[i].onblur  = function() { this.isBlurred = !this.isInFocus; };

})(i);

for (var i = 0; i < nodes.length; i++) {
    node = nodes[i];
    if (node.type == 'text') {
        if (node.isInFocus) {
            var onode = node.nextSibling;
            onode.innerHTML = "";
            valid = true;
        } else if (node.isBlurred) {
            var onode = node.nextSibling;
            onode.innerHTML = "Please Fill in Field";
            valid = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:20:13.013

第一个主要问题：您试图在初始脚本加载中完成所有这些。那时主 DOM 尚未加载，因此 document.getElementById("form") 不会找到任何东西。在 onload 处理程序中执行函数定义。

此外，不确定您期望在第一个函数中绑定什么“有效”。最后，一旦你确定了有效性与否，你需要对结果做一些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:24:44.577

您正在引用尚不存在的 dom 元素。一种解决方案是将所有`<script>`标签移到之前`</body>`，以便在执行脚本时存在元素。另一种方法，使用纯 javascript 将执行此操作：

```
<script>
window.onload = function(){
   //All your code here
}
</script> 
```

（`validate`如果您愿意，该功能可以在外面）

干杯

# performance - 用于移动应用的精益 Node.js + Nginx 服务器基础架构？

> ID：13504575
> 
> 赞同：2
> 
> 时间：2012-11-22T01:12:39.320
> 
> 标签：performance, git, node.js, nginx, webserver

我正在开发我自己的第一个移动应用程序，它应该是 Android、iOS 上的本机应用程序，也是一个在移动浏览器中运行的网络应用程序。我计划使用 NodeJS，nginx 应该为我的文件提供服务，git 应该用于将新代码推送到节点。我唯一的问题是我只能访问1 个具有以下规格的**根服务器：**

Intel Core i7 2600 四核 32 GB RAM 2x 3 TB 硬盘在软件 RAID 无限流量

我的计划是为应用程序的基础架构构建自己的 NodeJS 模块，并使用 express &dust.js 或 modify.js 在客户端渲染所有内容。

我的问题是如何让多个 nginx 和 NodeJS 服务器作为横向扩展设置，以更少的开销从这台机器中挤出大部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:02:42.043

*   对于 nginx，我认为您只需要确保`accept_mutex`启用设置并启用 4 个工作进程
    *   [https://stackoverflow.com/a/3436969/266795](https://stackoverflow.com/a/3436969/266795)
*   对于node.js，使用内置的[集群](http://nodejs.org/api/cluster.html)模块每个核心运行一个进程

无论如何，该服务器足以处理大多数网站/应用程序的大量流量。鉴于这是您的第一个移动应用程序，您的流量和工作负载超出服务器能力的几率几乎为零。不要出汗。

# java - 仅大写键盘

> ID：13504576
> 
> 赞同：3
> 
> 时间：2012-11-22T01:12:48.680
> 
> 标签：java, android, capitalization, android-keypad, keypad

我有一堆 EditText，当用户点击这些时，会出现一个键盘，用户可以输入一些文本。

我想让它使键盘全部为大写字母（即永久锁定大写字母）。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:29:37.647

您可以尝试在 XML 文件的 EditText 标记中使用 android:inputType = ["textCapCharacters"](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)。

# php - getimagesize() 当文件名包含单引号时

> ID：13504582
> 
> 赞同：0
> 
> 时间：2012-11-22T01:14:26.330
> 
> 标签：php

示例 $file name: Last,_First (1942) 'Mel'.jpg

只要文件名包含单引号，我就会在使用 getimagesize() 时收到错误消息。解决方案是什么？这是我所拥有的：

```
 $file = htmlspecialchars_decode($file, ENT_QUOTES);
  $filename = $dir.$file.'.jpg';
  $filename = str_replace(' ','_',$filename);
  list($width, $height, $type, $attr) = getimagesize($filename); 
```

我试过用 \' 替换 ' 但这没有帮助

# python - python中的复合布尔逻辑if

> ID：13504586
> 
> 赞同：5
> 
> 时间：2012-11-22T01:15:10.760
> 
> 标签：python

我正在尝试在 python 中测试一个基本前提，但它总是失败，我不知道为什么。

我的 sys.argv 看起来像这样：

```
['test.py', 'test'] 
```

我的代码如下所示：

```
if len(sys.argv) > 1 and sys.argv[1] is 'test':
    print 'Test mode' 
```

但测试永远不会是真的。我确信我在这里遗漏了一些非常简单的东西，但我无法弄清楚它是什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T01:22:22.830

如上所述，主要原因是您的`test`比较。Using`is`与 using 不同，`==`因为它比较两个*对象*是否相等。在这种情况下，您可以通过检查它们的 id 来验证它们是否不相等：

```
import sys

print id(sys.argv[1])
print id('test') 
```

我的输出：

```
140335994263232
140335994263424 
```

由于它们指向不同的对象，因此在使用时它们将不相等`is`（但使用`==`将比较字符串本身，这将返回`True`）。

这里的问题是实习的概念。当您将两个相同的字符串硬编码到您的源中时，这些字符串将被保留，并且两者将共享一个对象 ID（这解释了 @SamMussmann 下面的非常有效的观点）。但是，当您在 via 中传递一个字符串时`argv`，会创建一个新对象，从而与代码中的相同硬编码字符串进行比较 return `False`。到目前为止我找到的最好的解释是在[这里](https://stackoverflow.com/questions/2123925/when-does-python-allocate-new-memory-for-identical-strings)，Alex Martelli 和 Jon Skeet（两个非常有名的消息来源）都解释了实习和字符串何时被实习。从这些解释来看，似乎由于来自`argv`程序的数据是外部的，因此这些值不是内部的，因此与它们都是源中的文字相比，它们具有不同的对象 ID。

另一个兴趣点（与手头的问题无关，但与`is`讨论相关）是使用数字完成的缓存。从 -5 到 256 的数字被缓存，这意味着`is`与该范围内的相等数字的比较将是 True，无论它们是如何计算的：

```
In [1]: 256 is 255 + 1
Out[1]: True

In [2]: 257 is 256 + 1
Out[2]: False

In [3]: -5 is -4 - 1
Out[3]: True

In [4]: -6 is -5 - 1
Out[4]: False 
```

# c - 递归结构

> ID：13504587
> 
> 赞同：5
> 
> 时间：2012-11-22T01:15:15.210
> 
> 标签：c, struct, recursive-datastructures

我需要使用`typedef`才能构建递归结构吗？我尝试使用以下代码但没有成功：

```
struct teste
{
    int data;
    int data2;
    struct teste to_teste;
}; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T01:19:19.707

要构建递归结构，您不需要`typedef`.

您必须将结构对象转换为`struct pointer`对象。

像这样：

```
struct teste{
  int data;
  int data2;
  struct teste *to_teste;
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T03:23:38.323

您不能在其内部拥有相同的结构。如果您这样做，那么该结构的大小将变得不确定。所以这是不允许的。

相反，您可以在其内部有一个指向相同结构的指针来解决您的目的。这将起作用，因为编译器知道指针的大小，并且结构现在具有确定的大小。

# windows-8 - 这个联结命令有什么问题？

> ID：13504588
> 
> 赞同：0
> 
> 时间：2012-11-22T01:15:15.467
> 
> 标签：windows-8, junction

我想建立一个交汇点：`junction.exe c:\Program Files (x86)\Microsoft Visual Studio 11.0 d:\Programs\Microsoft Visual Studio 11.0`

每次我尝试，我都会得到[相同的三个路口使用提示](http://imgur.com/GBGo7)。我使用的是 Windows 8，并以管理员权限运行 cmd，并已从文件夹中删除了该`read only`复选框。`program files (x86)`当我打字`junction.exe c:\link c:\link2`时，它就像一个魅力。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-06T14:39:25.057

只是一个快速的疏忽。没什么大不了的。

在命令中使用诸如“”之类的空格时，必须将它们放在引号中，否则系统会将其读取为新行（或类似的行）。

这是您需要的命令；

```
junction.exe "c:\Program Files (x86)\Microsoft Visual Studio 11.0" "d:\Programs\Microsoft Visual Studio 11.0" 
```

如您所见，每个文件路径都用引号封装，使其读取为 1 行。

你现在应该很高兴了，伙计！

# c++ - 通过使用 C++ Socket API 的套接字连接将 HTML 标记发送到浏览器

> ID：13504590
> 
> 赞同：1
> 
> 时间：2012-11-22T01:15:30.913
> 
> 标签：c++, html, http, sockets

我正在尝试用 C++ 制作一个简单的 http 服务器。我遵循了[beej 的](http://beej.us/guide/bgnet/output/html/multipage/clientserver.html#simpleserver)C++ 网络编程指南。

当我在某个端口（8080、2127 等）中运行服务器时，它通过地址栏访问时成功地向浏览器（Firefox）发送响应：localhost：PORT_NUMBER，端口 80 除外。

这是我写的代码：

```
printf("Server: Got connection from %s\n", this->client_ip);

if(!fork()) // This is the child process, fork() -> Copy and run process
{
    close(this->server_socket); // Child doesn't need listener socket

    // Try to send message to client
    char message[] = "\r\nHTTP/1.1 \r\nContent-Type: text/html; charset=ISO-8859-4 \r\n<h1>Hello, client! Welcome to the Virtual Machine Web..</h1>";
    int length = strlen(message); // Plus 1 for  null terminator
    int send_res = send(this->connection, message, length, 0); // Flag = 0

    if(send_res == -1)
    {
        perror("send");
    }

    close(this->connection);

    exit(0);
}

close(this->connection); // Parent doesn't need this; 
```

问题是，即使我在响应字符串的早期添加了标题，为什么浏览器没有正确显示 HTML 而只显示纯文本？它显示了这样的内容：

```
Content-Type: text/html; charset=ISO-8859-4

<h1>Hello, client! Welcome to the Virtual Machine Web..</h1> 
```

不像通常带有 h1 标记的字符串那样大的“你好，客户！..”字符串。问题是什么？我在标题中遗漏了什么吗？

另一个问题是，为什么服务器不会在 80 端口运行？服务器中的错误日志说：

```
server: bind: Permission denied
server: bind: Permission denied
Server failed to bind
libc++abi.dylib: terminate called throwing an exception 
```

请帮忙。谢谢你。编辑：我在 80 端口上没有任何进程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T01:21:39.690

您需要使用 终止 HTTP 响应标头`\r\n\r\n`，而不仅仅是`\r\n`. 它也应该以类似的东西开头`HTTP/1.1 200 OK\r\n`，没有前导`\r\n`。

对于您的端口问题，如果您在相关端口上没有运行其他任何东西，您可能会发现上次运行程序创建的套接字仍然存在。要解决此问题，您可以使用在套接字上`setsockopt`设置`SO_REUSEADDR`标志。（这不推荐用于一般用途，我相信因为您可能会收到不适合您的程序的数据，但对于开发来说它非常方便。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T01:22:08.457

您的请求从不应该的`\r\n`时候开始，它也没有指定状态代码，并且在所有标题之后都需要一个空行。

```
char message[] = "HTTP/1.1 200 Okay\r\nContent-Type: text/html; charset=ISO-8859-4 \r\n\r\n<h1>Hello, client! Welcome to the Virtual Machine Web..</h1>"; 
```

至于您的端口 80 问题，可能会绑定其他一些应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-03T01:33:21.787

你需要添加“Content-length:”，长度就是你的HTML代码，就像这样：

```
char msg[] = "HTTP/1.1 200 OK\r\nContent-Type: text/html\r\nContent-length: 20\r\n\r\n<h1>Hello World</h1>"; 
```

# c++ - 计算四边形网格的法线

> ID：13504591
> 
> 赞同：0
> 
> 时间：2012-11-22T01:15:34.290
> 
> 标签：c++, 3d, mesh, lighting

我有一个结构 QUAD，它存储了 4 个指向 4 个 VECTOR3D（包含 3 个浮点数）的指针，以便我可以绘制四边形网格。据我了解，每当我绘制网格时，我也需要法线来正确地对网格进行光照/着色，并且当它是铺设在平原上的网格时，使用每个面的法线相对容易。

当我在 XZ 坐标上放置 2 x 2 四边形网格并尝试将其中心 (0,0,0) 提升到某个点时，例如 (0, 4, 0) 它将开始形成真正的 3D 形状，那么我需要再次计算法线。我很难理解计算法线的方式和内容。正如预期的那样，3D 形状的阴影就像它仍然是一个平面网格，所以它不代表真实的形状。一种解释说我需要计算每个顶点而不是每个面的法线。这是否意味着我需要计算网格所有角的法线？一旦我有法线，我会怎么做？我仍在使用旧的 glBegin glEnd 方法，但现在我觉得我需要使用 DrawArray 方法。我很困惑，我很确定我没有发出太多声音，但我非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:33:41.623

如果您需要平坦的表面，那么您的法线将是四边形平面的法线。如果您需要“看起来柔和”的表面，您需要混合（[阅读](http://www.gamedev.net/topic/625594-best-practice-for-vertex-normal-calculations/)并观看[这个](http://www.youtube.com/watch?feature=player_embedded&v=PMgjVJogIbc#!)很酷的简单视频）法线 - 这将添加某种渐变。

# x11 - 在 XGrabKey(board) 期间，发现哪个窗口被聚焦

> ID：13504593
> 
> 赞同：1
> 
> 时间：2012-11-22T01:16:11.753
> 
> 标签：x11

1.  一个程序调用了 XGrabKey() 来创建一个热键。
2.  用户按下该组合键（同时聚焦另一个窗口）。
3.  程序接收控制以响应按键组合来执行某些操作。同时，该程序暂时被关注（因为 XGrabKey 的影响（参见`man XGrabKey`, `man XGrabKeyboard`））。

我希望程序为最初聚焦的窗口创建一个合成 X 事件（按键或鼠标单击）。在某些情况下，这意味着我需要在向它发送事件之前聚焦该窗口（Firefox 在未聚焦时会忽略合成事件），这意味着我需要知道它是哪个窗口。我怎样才能知道它是哪个窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T22:07:12.373

Wait for the next `FocusOut` event, verify that the `mode` is set to `NotifyUngrab`, get the focus with `XGetInputFocus()`, and send away your synthetic events.

# intellij-idea - 如何使 PHPStorm / Intellij IDEA 变暗（整个 IDE，而不仅仅是配色方案）

> ID：13504594
> 
> 赞同：71
> 
> 时间：2012-11-22T01:16:11.807
> 
> 标签：intellij-idea, phpstorm, webstorm

我刚刚下载了新的 PHPStorm EAP，并注意到了这个截图：

![PHPStorm 黑暗](../Images/88880722f6180470370dc891cecb0030.png)

我非常喜欢它。问题是，我找不到任何选项让我的安装看起来像这样。我知道配色方案，但 AFAIK 它只会改变文本编辑器的颜色。我怎样才能让我的安装看起来像这样？（截图取自[EAP 网站](http://confluence.jetbrains.net/display/WI/Web+IDE+EAP)）。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-11-22T02:32:53.410

**设置（Mac 上的首选项）| 外观 | 主题 = Darcula**

**PS** 由于 IntelliJ IDEA v14 / WebStorm v9 / PhpStorm v8.0.2（以及分支 139.xxx 或更新版本上的任何其他 IDE），设置路径有点不同：

**设置（Mac 上的首选项）| 外观与行为 | 外观 | 主题 = Darcula**

![在此处输入图像描述](../Images/7b3a8fc0cfe859df03e0bbfb956f54a7.png)

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-05-16T11:57:06.317

> 查看 -> 快速切换主题 -> 切换外观 -> Darcula

`Restart the IDEA`如果变化不明显。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-11T01:38:53.760

下载并启用[ColorIDE](https://plugins.jetbrains.com/plugin/7055?pr=clion)。

> 首选项>插件>“浏览存储库...”按钮>搜索“ColorIde”

ColorIDE 插件不再局限于 IDE 附带的标准 4 个主题，而是为您的 IDE 提供与当前配色方案相同的外观和感觉。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-08-19T16:11:37.573

## 使用材质界面

如果`Darcula`不够暗，您可以使用名为 Material UI 的插件。

[![Material UI 的截图](../Images/b9a803b086d189e18d48b7b6f4ecf2ad.png)](https://i.stack.imgur.com/mJH4v.png)

它们还有许多其他颜色，如深蓝色、海蓝色等。

[链接到 Material 主题 UI](https://plugins.jetbrains.com/plugin/8006-material-theme-ui)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-04T12:53:31.600

在 Mac 上，每个窗口（主对话框和弹出对话框）的标题栏都将保持典型的 Mac 灰色，即使使用 Darcula 主题也是如此。但实际上你也可以让它变暗。

使用任何 Jetbrain IDE（包括 DataGrip），按`Shift`+ `Ctrl`+ `A`(PC) 或`Shift`+ `Cmd`+ `A`(Mac)。这将打开命令面板，您可以在其中找到*Registry*：

[![在此处输入图像描述](../Images/5589eed7dd1509ac2f63ae33c53334ed.png)](https://i.stack.imgur.com/V2CJl.png)

打开注册表，找到键*ide.mac.allowDarkDindowDecorations*：

[![在此处输入图像描述](../Images/2d8f0100486f1b3d593cf58bb0e9f944.png)](https://i.stack.imgur.com/vx5Zx.png)

启用此功能，关闭注册表并重新启动 IDE。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-27T14:01:40.727

在`Preferences > Editor > Colors & Fonts`中，选择一个暗方案，IDE 会询问您是否要将整个 IDE 切换为暗方案：

[![对话](../Images/1f540d28e012adf97a90f5b291f8bd9f.png)](https://i.stack.imgur.com/o8bnN.png)

# restructuredtext - reStructuredText 中的多行表格单元格？

> ID：13504595
> 
> 赞同：24
> 
> 时间：2012-11-22T01:16:35.017
> 
> 标签：restructuredtext

有没有办法在表格单元格中输入换行符？例如，假设我有一张这样的表：

```
+==========+==========+==========+
+ Header 1 + Header 2 + Header 3 +
+==========+==========+==========+
+ Item 1   +          +          +
+ Item 2   +          +          +
+----------+----------+----------+ 
```

我希望上面创建一个包含两行三列和第二行第一列的表，以在不同的行上显示第 1 项和第 2 项。

我尝试了行块语法 |，但它在表格单元格中不起作用。我可以使用列表语法，但我不希望出现项目符号。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-24T11:43:03.223

首先，我认为您的表格语法不正确，不应该是：

```
+----------+----------+----------+
| Header 1 | Header 2 | Header 3 |
+==========+==========+==========+
| Item 1   |          |          |
| Item 2   |          |          |
+----------+----------+----------+ 
```

请注意，顶行由连字符而不是等号组成，并且行由竖线分隔`|`，而不是加号。

现在有了这张表，[行块语法](http://docutils.sourceforge.net/docs/user/rst/quickref.html#line-blocks)：

```
+----------+----------+----------+
| Header 1 | Header 2 | Header 3 |
+==========+==========+==========+
| | Item 1 |          |          |
| | Item 2 |          |          |
+----------+----------+----------+ 
```

似乎有效：使用[Pandoc](http://johnmacfarlane.net/pandoc/try)测试左下角的单元格被转换为以下 HTML：

```
<td align="left">Item 1<br />Item 2</td> 
```

注意和`<br />`之间的换行符。`Item 1``Item 2`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-12-11T11:22:23.707

你也可以像这样在行之间留一个间隙

```
+----------+----------+----------+
| Header 1 | Header 2 | Header 3 |
+==========+==========+==========+
| Item 1   |          |          |
|          |          |          |
| Item 2   |          |          |
+----------+----------+----------+ 
```

这种方法往往对编辑更友好，所以他们不会认为你不小心添加了额外的管道

# android - 在android中的标签下有标签

> ID：13504599
> 
> 赞同：2
> 
> 时间：2012-11-22T01:17:13.103
> 
> 标签：android, android-layout, android-widget, android-tabhost

我想将标签放在标签下。基本上我有一个父标签说 Tab1 和 Tab2。在 Tab1 下，我还想要 2 个选项卡：Tab1a 和 Tab1b 以及 Tab2 下的类似 2 个选项卡。我有以下 xml 文件结构：

```
<?xml version="1.0" encoding="utf-8"?>

<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@+id/tabHost"
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">

<TabWidget 
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:id="@android:id/tabs"
android:tabStripEnabled="false"     
android:background="@drawable/tabwstyle"/>

<FrameLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:id="@android:id/tabcontent">

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:paddingTop="60dp"
    android:id="@+id/tab1">     

    <TabHost 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/tabHost_pb">

        <TabWidget 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@android:id/tabs"
            android:tabStripEnabled="false"     
            android:background="@drawable/tabwstyle"/>

        <LinearLayout 
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" 
            android:paddingTop="60dp"
            android:id="@+id/tab1a">

                <FrameLayout 
                    android:id="@+id/frame1"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent">

                <ListView
                    android:id="@+id/listview"
                    android:layout_width="fill_parent"    
                    android:layout_height="wrap_content" 
                    android:divider="@drawable/divider"
                    android:dividerHeight="10dp" 
                    android:paddingTop="15dp"
                    android:smoothScrollbar="true"/>

                </FrameLayout>

                <FrameLayout 
                    android:id="@+id/frame2"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:visibility="gone">
                <TextView
                    android:layout_width="fill_parent"
                    android:layout_height="50dp"
                    android:text="@string/testtxt"
                    android:id="@+id/frame2text"/>
                </FrameLayout>

        </LinearLayout>    

        <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:paddingTop="60dp"
            android:id="@+id/tab1b">

            <TextView
                android:layout_width="fill_parent"
                android:layout_height="50dp"
                android:text="@string/testtxt"
                android:id="@+id/tab1btext"/>

        </LinearLayout>

    </TabHost>

</LinearLayout>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:paddingTop="60dp"
    android:id="@+id/tab2">

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="50dp"
        android:text="@string/testtxt"
        android:id="@+id/tab2text"/>

</LinearLayout>

 </FrameLayout>
 </TabHost> 
```

我想要工作的java代码：

```
 TabHost tabhost=(TabHost) findViewById(R.id.tabHost);
    tabhost.setup();                     

    tabhost.getTabWidget().setDividerDrawable(R.drawable.divider2);             

    TabSpec spec1=tabhost.newTabSpec("Tab 1");
    spec1.setContent(R.id.tab1);
    spec1.setIndicator("Pain Box");

    TabSpec spec2=tabhost.newTabSpec("Tab 2");
    spec2.setIndicator("Pain List");
    spec2.setContent(R.id.tab2);

    tabhost.addTab(spec1);
    tabhost.addTab(spec2);             

    //Keep below after Add spec or crash 
    tabhost.getTabWidget().getChildTabViewAt(0).setBackgroundDrawable(null);
    tabhost.getTabWidget().getChildTabViewAt(1).setBackgroundDrawable(null);

    TabHost tabhost_pb=(TabHost) findViewById(R.id.tabHost_pb);
    tabhost_pb.setup();

    tabhost_pb.getTabWidget().setDividerDrawable(R.drawable.divider2);

    TabSpec spec_pb1=tabhost_pb.newTabSpec("Tab1a");
    spec_pb1.setContent(R.id.tab1a);
    spec_pb1.setIndicator("All");

    TabSpec spec_pb2=tabhost_pb.newTabSpec("Tab1b");
    spec_pb2.setContent(R.id.tab1b);
    spec_pb2.setIndicator("Followers");

    tabhost_pb.addTab(spec_pb1);
    tabhost_pb.addTab(spec_pb2);

    tabhost_pb.getTabWidget().getChildTabViewAt(0).setBackgroundDrawable(null);
    tabhost_pb.getTabWidget().getChildTabViewAt(1).setBackgroundDrawable(null); 
```

现在，当我评论第一个选项卡下方的所有部分时，代码工作正常，即。评论从以下开始的所有行： `TabHost tabhost_pb=(TabHost) findViewById(R.id.tabHost_pb);`

所以当我评论我的标签时，我的标签没有在 Tab1 下呈现，但它们留下了一个空格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:44:13.827

关于 Stackoverflow 上发布的嵌套选项卡也有类似的问题。[这是链接](https://stackoverflow.com/questions/6517157/android-newbie-why-my-nested-tabs-not-working).. 可能这可能会有所帮助。

# javascript - Javascript时间比较：实现这一目标的最佳方法是什么？

> ID：13504603
> 
> 赞同：0
> 
> 时间：2012-11-22T01:17:59.670
> 
> 标签：javascript, jquery, html, date, date-format

在这里，我有一个函数用于计算两个时间变量之间的差异，`start`和`end`，并将输出显示为“过去”、“当前”或“未来”。

我能够计算“当前”和“未来”值，但“过去”没有运气。这是[jsFiddle](http://jsfiddle.net/9jk6a/8/)，任何帮助都会很棒。

附带说明一下，我确实更喜欢无插件的方式来实现这一点。

```
//My Start time and End time
var start = "Mon Nov 22 2012 08:45:00 GMT+0800 (Malay Peninsula Standard Time)";
var end = "Mon Nov 22 2012 10:15:00 GMT+0800 (Malay Peninsula Standard Time)";

//Calling to test function
test(start, end);

//Function to calculate 
function test(startTime, endTime) {
    startTime= new Date(startTime);
    endTime= new Date(endTime);
    var currentTime = new Date();
    var difference = currentTime - startTime; 

    if (difference > 0 && currentTime > startTime) {
        alert ("Past!");
    } 

    if(startTime < currentTime && currentTime < endTime){ 
        alert("Current!");
    }

    if(difference < -1){
        alert("Future!");
    }
}​ 
```

链接到**[jsFiddle](http://jsfiddle.net/9jk6a/8/)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:41:30.360

叹！！我只是需要一些睡眠。它**正在工作**，这是更新的 jsFiddle：http: [//jsfiddle.net/9jk6a/9/](http://jsfiddle.net/9jk6a/9/)

感谢所有帮助过的人。

```
//My Start time and End time
var start = "Mon Nov 23 2012 08:45:00 GMT+0800 (Malay Peninsula Standard Time)";
var end = "Mon Nov 23 2012 10:15:00 GMT+0800 (Malay Peninsula Standard Time)";

//Calling to test function
test(start, end);

//Function to calculate 
function test(startTime, endTime) {
    startTime= new Date(startTime);
    endTime= new Date(endTime);
    var currentTime = new Date();
    var difference = currentTime - startTime; 

    if (startTime < endTime && endTime < currentTime) {
        alert ("Past!");
    } 

    if(startTime < currentTime && currentTime < endTime){ 
        alert("Current!");
    }

    if(currentTime < startTime && startTime < endTime){
        alert("Future!");
    }
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:36:31.007

您应该比较 的值`someDate.getTime()`，因为它将为您提供一个表示 unix 纪元的整数（自 1970 年 1 月 1 日以来经过的时间），这将是可比较和可减去的。

我编辑了小提琴：http: [//jsfiddle.net/9jk6a/12/](http://jsfiddle.net/9jk6a/12/)

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:43:21.593

这是多余的：

```
 var difference = currentTime - startTime; 

 if (difference > 0 && currentTime > startTime) 
```

给定任务，`difference > 0`并且`currentTime > startTime`正在测试完全相同的条件。如果一个为真，另一个也将始终为真，因此没有理由同时测试两者。

真的，你只需要这样：

```
if (startTime > endTime) {
   throw "Invalid range: end precedes start";
}

if (startTime < currentTime) {
    if (endTime < currentTime) {
         alert("Past");
    } else {
         alert("Current");
    }
} else {
  alert ("Future");
} 
```

# php - 嵌套循环与数组的关联数组，没有输出（PHP）

> ID：13504604
> 
> 赞同：0
> 
> 时间：2012-11-22T01:18:12.743
> 
> 标签：php, arrays, loops

提前感谢您的关注。

我正在尝试使用带有几层数组的 foreach 循环构建一些 HTML。

数据组和该数据的标题组存储在数组集中。反过来，这些数据数组存储在数组 (`$titlegroups`和`datagroups`) 中。

目的是建立一个嵌套循环，其中每组数据和标题填充一些 html 中的相关字段。

这是我尝试的一整套代码（结构）。

```
$a=1;
$b=2;
$c=3;
$d=4;

$titlesA=array('string1','string2');
$titlesB=array('string3','string4');

$dataA=array($a,$b);
$dataB=array($c,$d);

$titlegroups=array($titlesA,$titlesB);
$datagroups=array($dataA,$dataB);
$groups=array(array_combine($titlegroups, $datagroups));

$j=0;   
foreach($groups as $titlesX => $dataX)
    {
        $j++;
        echo'<div class="something">';

        $i=0;
        foreach(array_combine($titlesX, $dataX) as $title => $var)
            {
            $i++;
            echo '
                    <li>'.$title.'</li><input name="'.$j.'x'.$i.'" value="'.$var.'" />
                ';
            }
        echo '</div>';
    } 
```

在ideone中检查它我得到了错误：

> 警告：array_combine() 期望参数 1 是数组，整数在第 26 行的 /home/0zw0mb/prog.php 中给出

第 26 行是：

```
foreach(array_combine($titlesX, $dataX) as $title => $var) 
```

但是 $titlesX 和 $dataX 都应该是数组？

如果有人能让我直截了当，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:42:36.617

您不能将数组作为键，它们被转换为字符串。您的逻辑需要一些更改和一个额外的标记变量 ( `$idx`)，以判断代码何时跨组到另一组。

`array_merge`由于阵列的关键要求，这是必要的。

检查以下代码：

```
$a=1;
$b=2;
$c=3;
$d=4;

$titlesA=array('string1','string2');
$titlesB=array('string3','string4');

$dataA=array($a,$b);
$dataB=array($c,$d);

$titlegroups=array_merge($titlesA,$titlesB);
$datagroups=array_merge($dataA,$dataB);

$items=array_combine($titlegroups, $datagroups);

$indexes = array(count($dataA), count($dataB));

$i = 0;
$j = 0;
$idx = $indexes[$j];

echo '<div class="something">';

foreach($items as $title => $var)
    {
            echo '
                    <li>'.$title.'</li><input name="'.$j.'x'.($i++).'" value="'.$var.'" />
                ';
        $idx--;

        if ($idx == 0) {
            /* End of a group */
            echo '</div>';
            $idx = $indexes[++$j];

            /* If there is another group, create new container */
            if ($idx != null) {
                echo '<div class="something">';
            }
        }
    } 
```

# android - 活动过渡？

> ID：13504608
> 
> 赞同：0
> 
> 时间：2012-11-22T01:18:53.653
> 
> 标签：android

我已经实现了一个有很多活动的应用程序...... 我想以整个活动之间的快速过渡方式实现一个活动作为左右活动，反之亦然。例如：所以当您点击 next 时，应该在 next 活动之间进行转换，而当您点击 previous 时，应该在 previous 之间进行转换。....我成功过渡..但有一个简单的问题...我正在做的是，我从数据库中获取数据并将其存储在游标中，然后通过活动向用户显示..我的问题是因为我我正在使用相同的活动进行转换，它每次都会从数据库中获取数据......

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_summary);

//I am Trying to get the date here from database ,but it will be called everytime since this is oncreate() method.. I dont know How should i get the data from the database and should show it to user...

        final Intent intent=new Intent(this,SummaryActivity.class);
        Button previous=(Button) findViewById(R.id.button_Summary_previous);
       previous.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            System.out.println("I am in Previous");
            startActivity(intent);
            SummaryActivity.this.overridePendingTransition(
            R.anim.card_flip_left_in,
            R.anim.card_flip_right_out
            );
            finish();
        }
    });
       Button next=(Button) findViewById(R.id.button_Summary_next);
       next.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            System.out.println("I am in Next");
            startActivity(intent);
            SummaryActivity.this.overridePendingTransition(
                    R.anim.card_flip_right_in,
                    R.anim.card_flip_left_out
            );
            finish();
      } 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:25:05.140

我认为最好在应用程序开始时从数据库中获取所需的任何数据，将其存储在 SD 卡或手机内存中，并在需要时从那里访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-03T05:05:44.873

为什么你需要在开始另一个活动后完成你当前的活动？

每次完成一项活动后，您都应该知道是否要返回已完成的活动。该活动将被重新创建，因为它之前被销毁。

只需删除 onClick 方法中的 finish() 即可。

# flash - actionscript2 loadMovie() 加载外部文件的时间过长

> ID：13504615
> 
> 赞同：1
> 
> 时间：2012-11-22T01:19:54.463
> 
> 标签：flash, actionscript-2

我正在尝试使用函数 loadMovie() 在现有 .swf 文件中加载外部 .swf 文件。

我正在使用每 100 毫秒运行一次的 setInterval(loadWait, 100) 函数来检查加载是否完成。即使是一个小文件（200 kb）也需要很长时间才能加载。似乎甚至开始加载文件也需要大约 2 秒（getBytesTotal() 为 -1）

谁能帮我解决这个问题？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:31:20.360

您应该使用 MovieClipLoader 实例将 swfs 加载到当前场景中

```
mcl = new MovieClipLoader();
mcl.onLoadError = function(targMC:MovieClip, error:String, status:Number):Void {
 trace("Error " + status + ": Loading operation for " + targMC + " failed due to: " + error);
}
mcl.loadClip("some.swf", myMC); 
```

# arrays - 如何检查一个数组的元素是否在另一个数组中？

> ID：13504617
> 
> 赞同：2
> 
> 时间：2012-11-22T01:19:57.723
> 
> 标签：arrays, perl

我有两个数组，一个固定为 8 个字母，另一个取决于用户。我必须接受用户输入并放入一个数组（完成），但我需要检查用户输入（它是一个单词）字母是否在另一个数组中？我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:17:13.783

您可以使用 Perl (v5.10+) 的 smartmatch 运算符`~~`来检查字符串是否是数组的元素。匹配区分大小写：

```
use strict;
use warnings;

my @words = map lc, qw/This is a test/;

print 'Enter a word: ';
chomp( my $entry = <> );

print qq{The word "$entry" is}
  . ( lc $entry ~~ @words ? '' : ' not' )
  . ' in @words.' 
```

样品运行：

```
Enter a word: This
The word "This" is in @words. 
```

# python - 使用 sqlite 的 FTS 片段函数处理 html 转义

> ID：13504620
> 
> 赞同：1
> 
> 时间：2012-11-22T01:20:16.227
> 
> 标签：python, sqlite, full-text-search, fts4

我正在使用 sqlite 的全文搜索支持来存储可能包含`&`,`<`和`>`字符的文档。我打算使用片段函数来突出显示 html 结果页面的匹配项，但我没有看到在注入标记之前转义文本的明显方法。我宁愿在存储之前不要转义文本，因为那样`amp`,`lt`和`gt`将成为标记。

我能想到的最简单的解决方法是在存储页面之前对页面进行转义，并使用一个自定义标记器，该标记器首先将`&amp;`unescape`&lt;`和`&gt;`.

但是...由于默认`snippet(foo)`使用`<b>`and `</b>`，这似乎是一个非常常见的用例，我相信必须有一种方法来处理这个问题，而无需在 C 中重新发明轮子。我是否忽略了更多优雅的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:29:48.057

看来 FTS 确实不处理文本中的标记（注意如何`<p>`被切碎）：

```
> CREATE VIRTUAL TABLE test USING fts3(content TEXT);
> INSERT INTO test VALUES('<p>Isn''t this <font face="Comic Sans">funny</font>?');
> INSERT INTO test VALUES('blah');
> SELECT snippet(test) FROM test WHERE content MATCH 'funny';
p>Isn't this <font face="Comic Sans"><b>funny</b></font>?
> SELECT snippet(test) FROM test WHERE content MATCH 'font';
p>Isn't this <<b>font</b> face="Comic Sans">funny</<b>font</b>>? 
```

存储文本的最简洁方式是纯文本，未转义。但是，要正确突出显示搜索结果，您有两种选择：

*   使用可选参数`snippet`来指定*保证*永远不会出现在文本中的标记（这可能是不可能的），并将它们转换为`<b>...`当您为 HTML 转义文本时；或者
*   请改用该`offsets`功能并手动插入标记。

# phpbb - phpBB3 安装新样式

> ID：13504621
> 
> 赞同：0
> 
> 时间：2012-11-22T01:20:18.207
> 
> 标签：phpbb, phpbb3

我正在尝试在我的 phpBB3 论坛上安装新样式，但在 ACP 上安装时看不到它。

根据[本指南](https://www.phpbb.com/kb/article/how-to-install-styles-on-phpbb3/)，它应该是一个简单的拖放到 FTP 中，然后样式将在 ACP 上可见以进行实际安装。然而，我仍然只看到已经安装的样式（在 ACP -> 样式 -> 样式）。关于为什么会发生这种情况或我应该去哪里的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-24T13:35:45.723

首先，您必须从 .zip 存档中解压缩样式，然后您将获得名称与样式名称相似的文件夹，其中包含图像集、模板、主题文件夹和名为 style.cfg 的文件。您必须将此文件夹上传到 FTP 服务器上论坛的 /styles 并安装在 ACP -> Styles -> Styles

# lotus-notes - 如何在视图中调用和排序数据？

> ID：13504623
> 
> 赞同：1
> 
> 时间：2012-11-22T01:21:01.140
> 
> 标签：lotus-notes, lotus-formula

我有两个视图，一个是对 2011 年的数据进行排序，另一个是对 2012 年的数据进行排序，2013 年即将到来，我认为，创建另一个视图并不好。然后我尝试编写一个公式来调用我的数据库中的数据并发送到查看但它不起作用。

请帮我 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:01:26.360

我认为您最好的选择是创建另一个视图。Notes 不适用于动态视图选择公式。

要考虑的另一种替代方法是使用类别按年份对数据进行分组。然后，您可以设置一个仅显示单个类别的嵌入式视图，该类别可由显示可用年份的下拉字段确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T04:59:35.303

我在处理每周或每月日期时使用的一种解决方案是使用代理每周创建一个新文件夹并将正确的文档放入文件夹中。但这是很多工作，如果有大量数据，您可能会遇到 Notes 数据库结构的一些内部限制问题。具有 Notes 专家级知识的人可能可以管理此问题，但我不建议将其作为通用解决方案——当然也不适用于年度数据。

每年添加一次视图真的没有那么糟糕。每 12 个月工作两分钟，只是复制和重命名上一年的视图并更改选择公式。

# windows-8 - 仅带有共享合同的 Windows 8 应用程序

> ID：13504624
> 
> 赞同：1
> 
> 时间：2012-11-22T01:21:06.303
> 
> 标签：windows-8

是否可以创建一个“仅”在使用分享魅力时显示的应用程序？我不希望通过动态磁贴打开全屏应用程序，因为没有要显示的内容。我希望它仅通过 Share 魅力显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:20:07.107

不可以，应用程序不能仅显示为共享目标。所有 Windows 应用商店应用程序的开始屏幕上都有一个磁贴，可用于启动应用程序。

# database-design - MySQL 多对多 vs json

> ID：13504631
> 
> 赞同：0
> 
> 时间：2012-11-22T01:22:20.120
> 
> 标签：database-design, relational-database

我正在尝试定义一些 MySQL 关系。我有 3 个表格，如下所示：

```
 employee:
     | id | first_name | last_name | email

     notifications: (notification names are email, post etc)
     | id | name             | description

     employee_notifications:
     | id | employee_id | notification_id | 
```

更改employee_notifications 表以使用json_encode 在一行中插入员工的所有通知ID 是否有任何优势（或劣势）？

截至目前，大约有 100 名员工和 6 种通知方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:25:54.700

> 更改employee_notifications 表以使用json_encode 在一行中插入员工的所有通知ID 是否有任何优势（或劣势）？

有明显的缺点。通过您当前的设置，您可以轻松找出员工拥有哪些通知，或哪些员工订阅了特定通知。将它作为 JSON 放在员工表中将消除您这样做的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:27:03.870

虽然并不总是完美的方法，也不适用于所有情况，但随着时间的推移，良好的可维护性的良好经验法则：

在您的主要数据结构中使用良好规范化（我不会说完全，因为有时这太过分了），并使用视图、存储过程或代码合成数据对象来创建该数据的优化使用视图。

# c# - 使用 IDisposable 资源产生

> ID：13504637
> 
> 赞同：11
> 
> 时间：2012-11-22T01:23:35.793
> 
> 标签：c#, yield-return

有没有一种通过一次性资源产生收益的适当方法？返回的对象是 IDisposable，但它正在迭代的元素是。

这是一个例子：

```
public static IEnumerable<T> Fetch(IEnumerable<Guid> ids)
{
    using (var client = new CouchbaseClient())
    {
        yield return ids.Select(s => s.ToString());
    }
} 
```

现在，调用它不会释放`using`获得的资源。我知道我可以只返回一个 ToList 并立即将其全部返回，但是有没有办法“正确”处理这个问题，或者我是否必须在 IDisposable 资源上保留一个选项卡并在完成后手动处理它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T01:46:25.107

简而言之，只要方法的调用者`IEnumerator`正确处理对象，您就不必担心它。

`IEnumerator`实现`IDisposable`，并且用于创建迭代器块的逻辑实际上足够聪明，可以在处理所有未执行的 finally 块时执行它。作为调用的结果创建了一个 finally 块`using`，这就是`IDisposable`资源被释放的地方。

因此，只要由此`IEnumerator`创建的对象`IEnumerable`被完全迭代（在这种情况下，最终`MoveNext`调用将到达`using`块的末尾并处置资源）或处置`IDisposable`客户端将被处置。

请注意，如果您担心代码的用户可能无法`IEnumerator`正确处理对象，那么最好不要使用带有惰性求值的迭代器块。如果您想确保即使调用者不“玩得很好”，也要急切地评估该方法（即获取您拥有的代码，将结果转储到一个列表中，然后返回该列表）。如果不释放资源的后果主要或完全与性能相关（不再释放一些内存，保持打开连接等），那么它可能不是问题，但如果永远持有锁是一个问题主要问题（即如果不释放可能导致死锁的锁定资源），那么惰性评估的优势可能不值得。

# facebook - Facebook 从我的域名中读取错误的标题和描述？

> ID：13504638
> 
> 赞同：0
> 
> 时间：2012-11-22T01:24:11.550
> 
> 标签：facebook, wordpress, parsing, title

这是我的[域名](http://studioedno.com)

[这](http://i.stack.imgur.com/rmyRh.jpg)是我分享 Facebook 时看到的内容

如果我与 index.php 共享链接，完全键入为 studioedno.com/index.php 没有问题 我的域最近转到了新主机，我什至没有该信息... facebook 缓存域信息不知何故？我不知道该怎么做，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:26:50.063

是的，Facebook 缓存了很长时间（根据我的经验，大约 24 小时）。

[您可以在https://developers.facebook.com/tools/debug](https://developers.facebook.com/tools/debug)清除缓存并获取有用的调试信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:07:29.480

您应该使用开放图形标签来指定您希望网站在共享时的显示方式。有各种插件可以帮助您解决这个问题，只需在 wordpress 存储库中搜索 open graph。

# sql-server - 应用分组/系列值后限制 X 轴

> ID：13504647
> 
> 赞同：0
> 
> 时间：2012-11-22T01:25:09.087
> 
> 标签：sql-server, reporting-services

我有一个数据集，其中包含文章名称列表和一个用户。

例如。

```
Article  | User
Article1 | ABT
Article1 | ABT
Article2 | ABT
Article1 | MLH
Article2 | MLH
Article2 | MLH 
```

我有一个数据集，它正在准备这个计数，所以数据看起来像这样：

```
Article  | User | Count
Article1 | ABT  | 2
Article2 | ABT  | 1
Article1 | MLH  | 1
Article2 | MLH  | 2 
```

所以你可以看到，我只是在计算按用户分组的每篇文章的浏览量。

我想以堆积条形图的形式呈现它，文章是 x 轴，用户是系列，所以我可以看到给定文章的受欢迎程度，也可以看到用户对该文章的受欢迎程度。

例如。（不能发图片）

[堆积条形图示例](http://imgur.com/DlSIe)

这很好用，我已经有了，但我想限制显示的实际文章数量。我最终会显示超过 100 篇文章，所以我想限制在前 10-20 篇文章中，但采用相同的堆叠格式，所以我不能只“TOP N”数据集，因为它可能会丢失系列给定文章的数据。

例如。

```
Article  | User | Count
Article1 | ABT  | 100
Article2 | ABT  | 98
Article1 | MLH  | 10
Article2 | MLH  | 2 
```

将“TOP 2”放在这将丢失 MLH 访问每篇文章的系列数据。

在准备好为图表渲染之后，有没有办法限制 X 轴？或我完全错过的其他解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:50:27.333

将过滤器添加到类别组（文章）：

```
Expression: =Count(Fields!ArticleName.Value)
Operator: TOP N
Value : 10 
```

在应用所有分组后返回该类别的前 10 名。

# php - 如何在下面的示例中的只读文本框中显示值

> ID：13504649
> 
> 赞同：0
> 
> 时间：2012-11-22T01:25:23.877
> 
> 标签：php, jquery, html

我在下面有一个代码，它在一列中显示文本输入，在第二列中显示总分列，在最后一列中显示剩余分数。该表如下所示：

```
Marks Per Answer       Total Marks    Marks Remaining
(blank text input)      4              4
(blank text input)      6              6 
```

但我遇到的问题是文本输入为空，它们应该显示“总分”列的值（因此第一个文本输入为 4，第二个文本输入为 6）。

此外，由于两个文本输入都包含总分，在“剩余分数”列下，两行都应显示 0。（对于文本输入的第一行 4 减去总分下的 4，第一行剩余分数为 0。对于第二行 6总分下的文本输入减去 6 使第二行的剩余分数为 0）

所以表格应该如下所示：

```
Marks Per Answer              Total Marks    Marks Remaining
(text input value=4)            4              0
(blank text input value=6)      6              0 
```

我的问题是，如何通过更改下面的 jquery 来解决上述两个步骤：

```
$(function() {   
    //alert("here");         
    var questions = $('#markstbl td[class*="_ans"]').length;

    //disable single entry
    for (var i=0;i<=questions;i++){   
    if($("[class*=q"+i+"_mark]").length ==1){
    var t_marks = $("[class*=q"+i+"_ans]").html();
    //alert(t_marks);
    alert(t_marks);
    $("[class*=q"+i+"_mark]").val(t_marks).attr("disabled","disabled");
    //$("[class*=q"+i+"_mark]").attr("disabled","disabled");
    }                    
    }
    } 
```

下面是动态 HTML 表格：

```
<table border='1' id='markstbl'>
<thead>
<tr>
<th class='answermarksth'>Marks per Answer</th>
<th class='totalmarksth'>Total Marks</th>
<th class='noofmarksth'>Marks Remaining</th>
</tr>
</thead>
<tbody>

<tr class="questiontd">
<td class="answertd" name="answers[]"><?php echo$searchAnswer[$key]?></td>
<td class="answermarkstd">
<input class="individualMarks q<?php echo$questionId?>_mark_0"  q_group="1" name="answerMarks[]" id="individualtext" type="text" />
</td>
<?php
    if($questionId != $prev_ques){
    ?>
<td class="totalmarkstd" rowspan="<?php echo$row_span[$questionId]?>"><?php echo$totalMarks[$key]?></td>
<td class="noofmarkstd q<?php echo$questionId?>_ans_text"  q_group="1" rowspan="<?php echo$row_span[$questionId]?>"><?php echo"<strong>".$searchMarks[$key]."</strong>"?></td>
<?php
    }
    ?>
</tr>
<?php
$prev_ques = $questionId;
}
?>
</tbody>
</table> 
```

目前在 jquery 函数中，我正在尝试使用 t_marks 变量来显示文本输入中的值，但在表格行中的每个 SINGLE 文本输入中都没有显示任何内容

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:50:32.430

我想我已经为你弄清楚了。见[http://jsfiddle.net/jhfrench/NsWRv/](http://jsfiddle.net/jhfrench/NsWRv/)

我使用 jQuery 循环遍历分类为 '.individualMarks' 的输入元素`('input.individualMarks').each(...)`，然后用于`parent()`查找输入的父 td。从那里，我得到*那个*td 的兄弟姐妹的值，然后执行简单的数学运算并将结果值分配给“剩余标记”列。

我通过分配 onChange 事件更进一步，每次操作输入字段时都会重新触发更新函数。

如果此页面上有很多字段，您可能会花时间将其转换为插件，以便您可以针对 jQuery 对象执行它并仅更新与更新的输入字段相关的行（现在它会重新计算所有输入/表更改任何输入的行）。

我不熟悉 PHP，但我认为您的原始代码会导致重复的 ID。尽量避免这种情况！

# ios - iOS：无法更改 UITableViewCell 的高度

> ID：13504653
> 
> 赞同：0
> 
> 时间：2012-11-22T01:26:38.887
> 
> 标签：ios, uitableview

我尝试按照此说明以编程方式设置 UITableView，但单元格的高度未更改。这是指令的链接。

[http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/](http://www.cimgf.com/2009/09/23/uitableviewcell-dynamic-height/)

我稍微修改了代码：

```
 - (void)viewDidLoad{
    [super viewDidLoad];
    UITableView *tableView = [[UITableView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 460.0) style:UITableViewStylePlain];
    self.myTB = tableView;
    [tableView release];    
    UIView *view = [[UIView alloc] init];
    [view addSubview:self.myTB];
    self.view = view;
    [view release];
    self.myTB.dataSource = self;

    items= [[NSMutableArray alloc] init];
    [items addObject:@"Happiness is having a large, loving, caring, close-knit family in another city.\n\n\t\t-George Burns (1896 - 1996)"];
    [items addObject:@"When I am abroad, I always make it a rule never to criticize or attack the government of my own country. I make up for lost time when I come home.\n\n\t\t-Sir Winston Churchill (1874 - 1965)"];
    [items addObject:@"After two years in Washington, I often long for the realism and sincerity of Hollywood.\n\n\t\t-Fred Thompson, Speech before the Commonwealth Club of California"];
    [items addObject:@"It is a profitable thing, if one is wise, to seem foolish.\n\n\t\t-Aeschylus (525 BC - 456 BC)"];
    }
- (NSInteger)tableView:(UITableView*)tableView numberOfRowsInSection:(NSInteger)section{
    return [items count];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 100;
}

- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell;
    UILabel *label = nil;
    cell = [tv dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil){
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero ] autorelease];
        label = [[UILabel alloc] initWithFrame:CGRectZero];
        [label setLineBreakMode:UILineBreakModeWordWrap];
        [label setMinimumFontSize:FONT_SIZE];
        [label setNumberOfLines:0];
        [label setFont:[UIFont systemFontOfSize:FONT_SIZE]];
        [label setTag:1];
        [[cell contentView] addSubview:label];
    }
    NSString *text = [items objectAtIndex:[indexPath row]];
    CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);
    CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
    if (!label)
        label = (UILabel*)[cell viewWithTag:1];
    [label setText:text];
    [label setFrame:CGRectMake(CELL_CONTENT_MARGIN, CELL_CONTENT_MARGIN, CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), MAX(size.height, 44.0f))];
    return cell;
} 
```

这是我得到的：

![在此处输入图像描述](../Images/05e571aa4dfd0523c5980df591fe7a04.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:33:47.923

1.  self.myTB.delegate = 自我；

2.  修改以下代码以设置单个单元格的高度。

    *   (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{ return 100; }

现在您将其设置为 100，因此高度不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:33:28.890

我认为您不需要使用框架初始化 UITableViewCell 。我认为只是 alloc] init] autorelease] 应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T02:01:07.993

只需使用：

```
self.myTB.rowHeight = 100; 
```

# ruby-on-rails - rails capistrano rake db:migrate 有问题

> ID：13504656
> 
> 赞同：0
> 
> 时间：2012-11-22T01:26:54.127
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, capistrano

我只是在我的服务器上直接运行 rake db:migrate 没有问题：

```
$ pwd
/var/www/vhosts/example.com/current
$ rake db:migrate 
```

然后我尝试通过 capistrano 任务运行它，但出现错误。任务和输出如下。为什么 rake db:migrate 不能通过我的 capistrano 任务工作？

任务

```
namespace :deploy do
  # run the db migrations
  task :run_migrations, :roles => :db do
    puts "RUNNING DB MIGRATIONS"
    run "cd #{current_path}; rake db:migrate RAILS_ENV=#{rails_env}"
  end
end 
```

上限部署：运行迁移

```
$ cap deploy:run_migrations 
  * executing `deploy:run_migrations'
RUNNING DB MIGRATIONS
  * executing "cd /var/www/vhosts/example.com/current; rake db:migrate"
    servers: ["example.com"]
    [example.com] executing command
 ** [out :: example.com] (in /var/www/vhosts/example.com/releases/20121122011144)
 ** [out :: example.com] rake aborted!
 ** [out :: example.com] no such file to load -- rubygems
 ** [out :: example.com] /var/www/vhosts/example.com/releases/20121122011144/Rakefile:5:in `require'
 ** [out :: example.com] (See full trace by running task with --trace)
    command finished in 390ms
failed: "sh -c 'cd /var/www/vhosts/example.com/current; rake db:migrate'" on example.com 
```

**编辑**

```
$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-linux]
$ which ruby
/usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby
$ which rails
/usr/local/rvm/gems/ruby-1.9.3-p125/bin/rails 
```

**编辑** 当我将 --trace 添加到数据库迁移时，它看起来像是在使用`/usr/lib/ruby/site_ruby/1.8/rake.rb`，但从这个外观来看： $ which rake /usr/local/rvm/gems/ruby-1.9.3-p125/bin/rake 我会预计它会使用 rake at`/usr/local/rvm/gems/ruby-1.9.3-p125/bin/rake`而不是`/usr/lib/ruby/site_ruby/1.8/rake.rb`.

从 deploy:run_migrations 任务中获取部署的输出

```
* executing `deploy:run_migrations'
RUNNING DB MIGRATIONS
  * executing "cd /var/www/vhosts/example.com/current; rake db:migrate RAILS_ENV=production --trace"
    servers: ["example.com"]
    [example.com] executing command
 ** [out :: example.com] (in /var/www/vhosts/example.com/releases/20121123184358)
 ** [out :: example.com] rake aborted!
 ** [out :: example.com] no such file to load -- rubygems
 ** [out :: example.com] /var/www/vhosts/example.com/releases/20121123184358/config/boot.rb:1:in `require'
 ** [out :: example.com] /var/www/vhosts/example.com/releases/20121123184358/config/boot.rb:1
 ** [out :: example.com] /var/www/vhosts/example.com/releases/20121123184358/config/application.rb:1:in `require'
 ** [out :: example.com] /var/www/vhosts/example.com/releases/20121123184358/config/application.rb:1
 ** [out :: example.com] /var/www/vhosts/example.com/releases/20121123184358/Rakefile:5:in `require'
 ** [out :: example.com] /var/www/vhosts/famnfo.com/releases/20121123184358/Rakefile:5
 ** [out :: example.com] /usr/lib/ruby/site_ruby/1.8/rake.rb:1828:in `load'
 ** [out :: example.com] /usr/lib/ruby/site_ruby/1.8/rake.rb:1828:in `load_rakefile'
 ** [out :: example.com] /usr/lib/ruby/site_ruby/1.8/rake.rb:1900:in `run'
 ** [out :: example.com] /usr/bin/rake:8
    command finished in 422ms
failed: "sh -c 'cd /var/www/vhosts/example.com/current; rake db:migrate RAILS_ENV=production --trace'" on example.com 
```

**添加@Super Engineers 代码后**编辑输出****

 **```
* executing `bundle:install'
  * executing "ls -x /var/www/vhosts/example.com/releases"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 572ms
  * executing "cd /var/www/vhosts/example.com/releases/20121124160218 && bundle install --gemfile /var/www/vhosts/example.com/releases/20121124160218/Gemfile --path /var/www/vhosts/example.com/shared/bundle --deployment --quiet --without development test"
    servers: ["example.com"]
    [example.com] executing command
 ** [out :: example.com] You are trying to install in deployment mode after changing
 ** [out :: example.com] your Gemfile. Run `bundle install` elsewhere and add the
 ** [out :: example.com] updated Gemfile.lock to version control.
 ** [out :: example.com] 
 ** [out :: example.com] You have added to the Gemfile:
 ** [out :: example.com] * mysql2
 ** [out :: example.com] * therubyracer
 ** [out :: example.com] * rvm-capistrano
 ** [out :: example.com] * passenger
 ** [out :: example.com] 
 ** [out :: example.com] You have deleted from the Gemfile:
 ** [out :: example.com] * mysql
    command finished in 999ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /var/www/vhosts/example.com/releases/20121124160218; true"
    servers: ["example.com"]
    [example.com] executing command
    command finished in 826ms
failed: "rvm_path=/usr/local/rvm /usr/local/rvm/bin/rvm-shell 'ruby-1.9.3-p125' -c 'cd /var/www/vhosts/example.com/releases/20121124160218 && bundle install --gemfile /var/www/vhosts/example.com/releases/20121124160218/Gemfile --path /var/www/vhosts/example.com/shared/bundle --deployment --quiet --without development test'" on example.com 
```

**编辑** 整个 deploy.rb 文件

```
require 'bundler/capistrano'
require 'rvm/capistrano'

# set environment
set :rails_env, "production"

# set the ruby version
set :rvm_ruby_string, 'ruby-1.9.3-p125'
set :rvm_type, 'webadmin'

# server username and password
set :user, 'super'
set :password, 'secret'

# subversion repo username and password
set :scm, :subversion
set :scm_username, "super" 
set :scm_password, 'secret'
set :svnserver, "myreposerver" 
set :repository, "myrepo" 

# project info
set :server, ''
set :application, "FamNFo"
set :applicationdir, '/Volumes/Macintosh HD/Users/myname/Sites/example' 

role :web, "example.com"
role :app, "example.com"
role :db,  "example.com", :primary => true
set :use_sudo, true

# database config
#set :migrate_env, "#{rails_env}" 

# specify the rvm type. We just want to use the system wide one since we're not currently specifying gemsets for each project
set :rvm_type, :system

# where to put the files
set :deploy_to, "/var/www/vhosts/example.com" 

# fixes the "sorry, you must have a tty to run sudo" issue
default_run_options[:pty] = true

# precompiles the assets
load 'deploy/assets'

# If you are using Passenger mod_rails uncomment this:
 namespace :deploy do

    # restart the server
    task :restart, :roles => :app do
        run "/etc/init.d/http restart graceful"
    end

    # chmod the files
    task :after_update_code, :roles => [:web, :db, :app] do
        run "chmod 755 #{release_path}/public -R" 
    end

    # install new gems
    desc "run bundle install and ensure all gem requirements are met"
    task :install do
        run "cd #{current_path} && bundle install  --without=test --no-update-sources --trace"
    end

    # run the db migrations
    task :run_migrations, :roles => :db do
        puts "RUNNING DB MIGRATIONS"
        run "cd #{current_path}; rake db:migrate RAILS_ENV=#{rails_env} --trace"
    end

    # precompile assets
    task :precompile_assets do
        run "cd #{release_path}; bundle exec rake assets:precompile RAILS_ENV=#{rails_env}"
    end

    task :start do ; end
    task :stop do ; end

    # restart the server
    task :restart, :roles => :app, :except => { :no_release => true } do
        run "#{sudo} /etc/init.d/httpd restart graceful"
    end
 end

 # hook to run db migrations after code update
after("deploy:update", "deploy:run_migrations")
#after("deploy:update", "deploy:precompile_assets")
after "deploy:update", "deploy:install"
# if you want to clean up old releases on each deploy uncomment this:
after "deploy:restart", "deploy:cleanup" # leave the last 5 releases only 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-24T15:51:00.320

这是因为红宝石冲突。我遇到了同样的错误。您将需要使用`rvm/capistrano gem`. 我将从我的 cap 文件中粘贴一些代码，这将使您了解如何在部署时设置 ruby​​ 版本。

安装宝石

```
gem install rvm-capistrano 
```

在你 deploy.rb 文件中添加这些行

```
require 'bundler/capistrano'
require 'rvm/capistrano'

set :rvm_ruby_string, "ruby-1.9.3-p125"
set :rvm_type, 'webadmin' 
```

有关更多信息，您可以访问此链接[rvm/capistrano](https://rvm.io/integration/capistrano/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:14:47.003

这里的相关错误似乎是`no such file to load -- rubygems`.

很可能是因为生产服务器上安装了多个 ruby​​。

查看以前的解决方案以解决类似问题：[https ://stackoverflow.com/a/2896596/429758](https://stackoverflow.com/a/2896596/429758)

此外，capistrano 邮件列表上的这个线程很有帮助：[https ://groups.google.com/forum/?fromgroups=#!topic/capistrano/JzVPRbQclY4](https://groups.google.com/forum/?fromgroups=#!topic/capistrano/JzVPRbQclY4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T14:54:35.840

你在使用[rvm/capistrano](https://github.com/wayneeseguin/rvm-capistrano)吗？有了它，您可以在 capistrano 配方中指定要在服务器上使用的 ruby​​ 版本。我怀疑当你运行 capistrano 时它没有使用你的 rvm 设置，当你登录并运行 rake 任务时，你的用户被设置为使用 rvm ruby​​ 版本。**

# c# - 注册事件时执行操作？

> ID：13504660
> 
> 赞同：2
> 
> 时间：2012-11-22T01:27:25.000
> 
> 标签：c#, events

我在徘徊当您注册事件（从事件 POV）时是否可以启动计时器或执行操作？换句话说，我有一个在计时器上触发的事件，但是我只希望计时器在函数注册到此特定事件时启动，因此如果用户从未注册到该事件，则计时器永远不会启动。相反，当用户从事件中注销并且它是最后注册的功能时，时间停止。
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T01:41:37.413

您只需要实现事件的添加和删除访问器。通常它们是隐含的，但您可以显式地实现它们。

```
public event EventHandler MyEvent
{
  add
  {
    // start timer
  }

  remove
  {
     // stop timer
  } 
```

下面的链接有一个关于它的教程。

[http://www.switchonthecode.com/tutorials/csharp-tutorial-event-accessors&ei=ZYGtUMWOCPGFyQHU84H4Ag&usg=AFQjCNE5RG2taqNrJROy6P6Jpog3UNkvzQ](http://www.switchonthecode.com/tutorials/csharp-tutorial-event-accessors&ei=ZYGtUMWOCPGFyQHU84H4Ag&usg=AFQjCNE5RG2taqNrJROy6P6Jpog3UNkvzQ)

# mysql - mysql中多个查询的总运行时间

> ID：13504666
> 
> 赞同：0
> 
> 时间：2012-11-22T01:28:31.093
> 
> 标签：mysql, sql, database, query-optimization

我在 .sql 文件中有一些基准查询。如果我在 mysql 中使用 source 来执行它们，mysql 将在每次查询后显示运行时间。并且有页面和页面查询输出。有什么方法可以获得所有查询的总运行时间？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:39:35.480

您可以通过将此行添加到您的以下来使用 MySQL 的内置分析支持`my.cnf`：

```
SET profiling=1; 
```

这使您可以轻松查看每个查询所花费的时间：

```
mysql> SHOW PROFILES;
+----------+-------------+-------------------------------------------------------------------+
| Query_ID | Duration    | Query                                                             |
+----------+-------------+-------------------------------------------------------------------+
|        1 |  0.33174700 | SELECT COUNT(*) FROM myTable WHERE extra LIKE '%zkddj%'           | 
|        2 |  0.00036600 | SELECT COUNT(id) FROM myTable                                     | 
|        3 |  0.00087700 | CREATE TEMPORARY TABLE foo LIKE myTable                           | 
|        4 | 33.52952000 | INSERT INTO foo SELECT * FROM myTable                             | 
|        5 |  0.06431200 | DROP TEMPORARY TABLE foo                                          | 
+----------+-------------+-------------------------------------------------------------------+
5 rows in set (0.00 sec) 
```

您可以将时间相加以获得总时间：

```
SELECT SUM(Duration) from information_schema.profiling; 
```

[您可以在此处](http://webmonkeyuk.wordpress.com/2011/04/18/mysql-servers-built-in-profiling-support/)找到有关 MySQL 分析的更多详细信息。

您可以采用另一种方法来运行从命令行执行 SQL 查询并使用 Unix`time`命令来计时执行。但是，这可能不会给您最精确的时间。此外，除非您将它与 MySQL 分析结合使用，否则它不会为您提供每个查询所用时间的细分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:43:56.927

您可以修改您的 .sql 以创建带有时间戳的开始和结束行，然后减去，而无需拿出 Excel 电子表格并将其相加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-23T04:48:57.690

感谢所有的建议。我最终创建了另一个表，只是为了在 .sql 文件中记录每个查询的开始和结束时间。

我编辑了 .sql 文件，在每个原始查询之后添加了一个插入语句，只是为了记录时间。最后，我可以查询这个“时间”表来分析 .sql 文件的执行情况。

# java - MYSQL SQL 语法错误，而我使用休眠

> ID：13504670
> 
> 赞同：0
> 
> 时间：2012-11-22T01:28:42.703
> 
> 标签：java, mysql, hibernate, jakarta-ee

我使用休眠作为持久层，这是我的代码示例，但这里是我的 hql 查询：

```
Query q = s.createQuery("from Login where name=:user and passw =:passw");
  q.setParameter("user",username);
  q.setParameter("passw", passw);
Query q = s.createSQLQuery("SELECT * from Good where Good.supplier =:supl AND Good.name =:gname AND Good.dates >=:sdate and Good.dates <=:fdate").addEntity(Good.class);
   q.setParameter("supl",sup);
   q.setParameter("gname", gname);
   q.setParameter("sdate", sdate);
   q.setParameter("fdate",fdate); 
```

sdate 和 fdate 参数是字符串，在这种情况下可以吗？它抛出这个异常：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '.login login0_ where login0_.name='Tom'' at line 1 
```

**登录.hbm.xml**

```
<hibernate-mapping>
<class name="kz.bimash.FoodSec.model.Login" table="login" catalog="foodsec">
    <id name="id" type="java.lang.Integer">
        <column name="Id" />
        <generator class="increment" />
    </id>
    <property name="name" type="string">
        <column name="name" length="50" not-null="true" unique="true" />
    </property>
    <property name="passw" type="string">
        <column name="passw" length="50" not-null="true" />
    </property>
    <property name="type" type="string">
        <column name="type" length="45" not-null="true" />
    </property>
    <property name="userId" type="int">
        <column name="userId" not-null="true" />
    </property>
</class> 
```

**登录 pojo 类**

```
public class Login  implements java.io.Serializable {

 private Integer id;
 private String name;
 private String passw;
 private String type;
 private int userId;

public Login() {
}

public Login(String username, String password, String type, int userId) {
   this.name = username;
   this.passw = password;
   this.type = type;
   this.userId = userId;
}

public Integer getId() {
    return this.id;
}

public void setId(Integer id) {
    this.id = id;
}
public String getName() {
    return this.name;
}

public void setName(String username) {
    this.name = username;
}
public String getPassw() {
    return this.passw;
}

public void setPassw(String password) {
    this.passw = password;
}
public String getType() {
    return this.type;
}

public void setType(String type) {
    this.type = type;
}
public int getUserId() {
    return this.userId;
}

public void setUserId(int userId) {
    this.userId = userId;
} 
```

**登录DAO**类

 **```
@Repository
public class LoginDAO {
@Autowired
private SessionFactory sf;
@SuppressWarnings("empty-statement")
public String[] Authorise(String username, String passw){
  Session s = sf.getCurrentSession();
  s.beginTransaction();
  Query q = s.createQuery("from Login where name=:user and passw =:passw");
  q.setParameter("user",username);
  q.setParameter("passw", passw);
  q.setMaxResults(1);
  String[] str = null;
  Login login = null;
  for(Iterator it = q.iterate(); it.hasNext();){
   login = (Login)it.next();

  }
  if(login != null){
      str = new String[]{login.getType(), String.valueOf(login.getUserId())};

  }
        s.getTransaction().commit();
    return str;
}
public boolean checkLogin(String username){
    Session s = sf.getCurrentSession();
    s.beginTransaction();
   // String s_sql ="SELECT * FROM Login WHERE NAME="+username;
    Query q = s.createQuery("from Login where name = :usern");
    q.setParameter("usern", username);
   // Query q=s.createSQLQuery(s_sql);
    List<Login> logins =null;
    logins= (List<Login>)q.list();
    s.getTransaction().commit();
    if(logins !=null)
        return true;
    else
        return false;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:28:09.747

以下代码段存在问题：

```
Query q = s.createSQLQuery("SELECT * from Good where Good.supplier =:supl AND Good.name =:gname AND Good.dates >=:sdate and Good.dates <=:fdate").addEntity(Good.class); 
```

您正在编写 SQL 而不是 HQL。这就是为什么你使用`session.createSQLQuery(...)`而不是`session.createQuery(...)`. `createSQLQuery(...)`始终返回 的引用`org.hibernate.SQLQuery`，而您已将其分配给 的变量`Query`。

我很惊讶为什么您没有收到编译时错误。

尝试将其分配给`SQLQuery`变量并检查它是否有效。**

# google-apps-script - 适用于多个用户的 Google Script OAuth

> ID：13504678
> 
> 赞同：3
> 
> 时间：2012-11-22T01:29:18.540
> 
> 标签：google-apps-script, oauth-2.0

我创建了一个处理 2 个不同 OAuth 连接的 Google App 脚本。

1-谷歌自己代表用户发送邮件并访问谷歌文档（谷歌API控制台用于获取密钥，秘密）

2- gtraxapp wich 是一个基于云的时间表应用程序。（脚本已注册，获得密钥/秘密等）

该脚本作为 Web 应用程序发布。它非常适合我的用户。

当以不同的用户名登录时，我可以在不提供不同密钥/秘密的情况下授权 Google OAuth，并且电子邮件将从实际用户发送。

第二个应用程序（gTrax）出现问题。授权似乎有效。在脚本中运行该功能以进行授权会导致屏幕请求权限，然后 gtrax 作为注册应用程序出现在帐户中（如果需要，可以撤销访问权限）。但是，在运行应用程序时，我收到一条消息说我需要权限才能执行此操作（UrlFetchApp / 简单获取）

我的问题是：

这可能是我需要注册每个用户以获取每个人的密钥/秘密（并在脚本中处理）......或者 OAuth 可以用 1 个密钥/秘密注册吗？

换句话说，是（应该）密钥/秘密链接到单个用户，还是它们只是一种类似 RSA 的密钥对，经过验证后，可用于授权任何用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:12:20.433

我的理解是这样的。当您使用内置的 Apps 脚本功能时，例如`MailApp.sendEmail`，Google Apps 脚本“环境”会照顾您为用户请求授权（他第一次访问您的应用程序）并为您保存和管理 oAuth 令牌，所以这一切运行流畅。

当您使用 调用外部服务`UrlFetchApp`时，Apps Script oAuth 授权过程会有所不同。当您实际`fetch`拨打电话时，授权只是您在脚本编辑器上得到的一个奇怪的弹出窗口。它不会在“编译时”处理，而是在您运行其他服务之前询问。但是您也只执行此步骤一次。“陷阱”是当用户将应用程序作为 web 应用程序运行时，这种不同的授权过程不起作用。AFAIK 它仅适用于脚本编辑器本身或直接从电子表格运行。

如果您的用户只是少数已知的用户，您可以建议每个人打开脚本编辑器（或包含它的电子表格）并运行一个特定的函数，该函数将尝试`UrlFetchApp.fetch`调用，以便弹出窗口出现并对其进行授权。这一步完成后，他们就可以正常使用webapp了。之后，Apps Script 将为您施展魔法。

但是，如果您打算在 Chrome Web Store 上广泛分享，并且不想要求每个用户都执行这个有点奇怪的步骤，那么您需要自己管理所有授权过程。这意味着，您必须在第三方服务中注册您的应用程序（如果是 Google 的，则在 API 控制台），您将在其中收到 a`client id`和`client secret`. 有了这些，您必须在您的应用程序 html 上放置一个“授权”提交按钮，该按钮会将用户重定向到第 3 方授权 url，提供正确的范围等。当他们授权时，第 3 方会将用户重定向回来向您的应用提供`code`令牌作为 URL 参数。你'`code``access``refresh``UrlFetch`来电。您将负责保存这些令牌，在它们过期时刷新它们等等。不是一个非常简单的过程：-/

哦，虽然您的应用程序只有一个`id`and `secret`，但令牌是每个用户的。这是有道理的，因为您所做的每个呼叫都必须代表特定用户，并且他*必须*已授权。

我希望这有帮助。

# jquery - jQuery 冲突 twittmarquee

> ID：13504679
> 
> 赞同：0
> 
> 时间：2012-11-22T01:29:18.600
> 
> 标签：jquery

嗨，我对 jQuery 很陌生。我的网站中有 jQuery 冲突。我已经尝试添加 jQuery.noConflict() 但仍然无法正常工作。

我从 twittmarquee jquery 得到了这段代码。你能帮我吗，如何在这个脚本中不发生冲突？..

```
<script>
var page={};
$(function(){
    new FrontPage().init();
}); 
</script> 
```

非常感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:51:46.867

如果您尝试在给定示例中将 jquery 用作“$”并且它不起作用，则可以使用“jQuery”代替，所以-

```
<script>
var page={};
jQuery(function(){
    new FrontPage().init();
}); 
</script> 
```

如果您尝试将“$”用于不同的库，则 $.noConflict() 将是最佳途径：

```
<script>
var page={};
$.noConflict();
$(function(){
    new FrontPage().init();
}); 
</script> 
```

# android - 很难尝试在带有复选框的双行 ListView 中正确显示文本

> ID：13504680
> 
> 赞同：2
> 
> 时间：2012-11-22T01:29:20.227
> 
> 标签：android, android-layout

在这里，我正在尝试创建一个包含班级校友姓名和 ID 的列表，但是，我很难在列表中显示它们，它们看起来像[这样](http://i.imgur.com/r8IVW.png)：

我试图将数据放入活动列表中的方式是：

```
ListView mainListView = (ListView) findViewById(R.id.listaAlumnos);
ArrayList<Alumno> AlumnoList = new ArrayList<Alumno>();
AlumnoList.addAll(Arrays.asList(Alumnos));      
AlumnoArrayAdapter<Alumno> listAdapter = new AlumnoArrayAdapter(this, AlumnoList);
mainListView.setAdapter(listAdapter); 
```

这是所涉及的每个类的来源：

校友：

```
/** Holds Alumno data. */
class Alumno {
    private String name = "";
    private String noControl = "";
    private boolean checked = false;

    public Alumno() {
    }

    public Alumno(String name, String noControl) {
        this.name = name;
        this.noControl = noControl;
    }

    public Alumno(String name, boolean checked) {
        this.name = name;
        this.checked = checked;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }   

    public String getNoControl() {
        return noControl;
    }

    public void setNoControl(String noControl) {
        this.noControl = noControl;
    }

    public boolean isChecked() {
        return checked;
    }

    public void setChecked(boolean checked) {
        this.checked = checked;
    }

    public String toString() {
        return name;
    }

    public void toggleChecked() {
        checked = !checked;
    }
} 
```

AlumnoArrayAdapter：

```
/** Custom adapter for displaying an array of Alumno objects. */
class AlumnoArrayAdapter extends ArrayAdapter<Alumno> {

    private LayoutInflater inflater;

    public AlumnoArrayAdapter(Context context, List<Alumno> AlumnoList) {
        super(context, R.layout.simplerow, R.id.rowTextView, AlumnoList);
        // Cache the LayoutInflate to avoid asking for a new one each time.
        inflater = LayoutInflater.from(context);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // Alumno to display
        Alumno Alumno = (Alumno) this.getItem(position);

        // Componentes de cada fila
        CheckBox checkBox;
        TextView textView1;
        TextView textView2;

        // Create a new row view
        if (convertView == null) {
            convertView = inflater.inflate(R.layout.simplerow, null);

            // Find the child views.
            textView1 = (TextView) convertView.findViewById(R.id.rowTextView);
            textView2 = (TextView) convertView.findViewById(R.id.rowTextView2);
            checkBox = (CheckBox) convertView.findViewById(R.id.CheckBox01);

            // Optimization: Tag the row with it's child views, so we don't
            // have to
            // call findViewById() later when we reuse the row.
            convertView.setTag(new AlumnoViewHolder(textView1, textView2, checkBox));

            // If CheckBox is toggled, update the Alumno it is tagged with.
            checkBox.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    CheckBox cb = (CheckBox) v;
                    Alumno Alumno = (Alumno) cb.getTag();
                    Alumno.setChecked(cb.isChecked());
                }
            });
        }       
        else {
            // Because we use a ViewHolder, we avoid having to call
            // findViewById().
            AlumnoViewHolder viewHolder = (AlumnoViewHolder) convertView.getTag();
            checkBox = viewHolder.getCheckBox();
            textView1 = viewHolder.getTextView1();
            textView2 = viewHolder.getTextView2();
        }

        // Tag the CheckBox with the Alumno it is displaying, so that we can
        // access the Alumno in onClick() when the CheckBox is toggled.
        checkBox.setTag(Alumno);

        checkBox.setChecked(Alumno.isChecked());
        textView1.setText(Alumno.getName());
        textView2.setText(Alumno.getNoControl());

        return convertView;
    }

} 
```

AlumnoViewHolder：

```
/** Holds child views for one row. */
class AlumnoViewHolder {
    private CheckBox checkBox;
    private TextView textView1;
    private TextView textView2;

    public AlumnoViewHolder() {
    }

    public AlumnoViewHolder(TextView textView1, TextView textView2, CheckBox checkBox) {
        this.checkBox = checkBox;
        this.textView1 = textView1;
        this.textView2 = textView2;
    }

    public CheckBox getCheckBox() {
        return checkBox;
    }

    public void setCheckBox(CheckBox checkBox) {
        this.checkBox = checkBox;
    }

    public TextView getTextView1() {
        return textView1;
    }

    public void setTextView1(TextView textView1) {
        this.textView1 = textView1;
    }

    public TextView getTextView2() {
        return textView2;
    }

    public void setTextView2(TextView textView2) {
        this.textView2 = textView2;
    }
} 
```

现在布局文件：

activity_alumnos_asistencia.xml（列表应该在哪里）：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/findSelected"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="Registrar Asistencia" />

     <ListView 
         android:id="@+id/listaAlumnos" 
         android:layout_width="fill_parent"
         android:layout_height="fill_parent" />

</LinearLayout> 
```

simplerow.xml（列表行中的文本视图和复选框所在的位置）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent">

  <TextView android:id="@+id/rowTextView" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textSize="16sp" >
  </TextView>

  <TextView android:id="@+id/rowTextView2" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:padding="10dp"
    android:textSize="16sp" >
  </TextView>

  <CheckBox android:id="@+id/CheckBox01" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:padding="10dp"
    android:layout_alignParentRight="true" android:layout_marginRight="6sp"
    android:focusable="false">
  </CheckBox>

</RelativeLayout> 
```

我想这一切都与此相关。我知道这可能是一个愚蠢的错误，但是男孩，我似乎无法找到问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:35:03.227

我认为您的所有问题都出在 simplerow.xml 文件中。您使用的是 RelativeLayout 但您没有定位您的文本视图。
所以文本视图最终会相互重叠。
例如，如果像这样更改您的 simplerow.xml，您将看到一个文本视图将出现在另一个文本视图下：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

  <LinearLayout
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentLeft="true"
      android:layout_alignParentTop="true"
      android:orientation="vertical" >

      <TextView
          android:id="@+id/rowTextView"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:padding="10dp"
          android:text="text1"
          android:textSize="16sp" />

      <TextView
          android:id="@+id/rowTextView2"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:padding="10dp"
          android:text="text2"
          android:textSize="16sp" />

  </LinearLayout>

  <CheckBox
      android:id="@+id/CheckBox01"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_alignParentRight="true"
      android:layout_centerVertical="true"
      android:focusable="false"
      android:padding="10dp" />

</RelativeLayout> 
```

# ios - 自定义 UIPicker-插入图片

> ID：13504686
> 
> 赞同：0
> 
> 时间：2012-11-22T01:30:06.880
> 
> 标签：ios, uipickerview

如下图所示，我正在尝试自定义我的选择器。我已经在我的选择器上成功添加了图像，但没有影响所有其他选择器。我也放了我的代码以供参考。

```
- (void)loadView
{
    picker1 = [[UIPickerView alloc] initWithFrame:CGRectMake(30, 200, 250, 250)];
    picker1.delegate = self;
    picker1.dataSource = self;
    picker1.showsSelectionIndicator = YES;

    picker2 = [[UIPickerView alloc] initWithFrame:CGRectMake(390, 200, 250, 250)];
    picker2.delegate = self;
    picker2.dataSource = self;
    picker2.showsSelectionIndicator = YES;

    picker3 = [[UIPickerView alloc] initWithFrame:CGRectMake(750, 200, 250, 250)];
    picker3.delegate = self;
    picker3.dataSource = self;
    picker3.showsSelectionIndicator = YES;

    self.view = [[UIView alloc] initWithFrame:CGRectZero];
    [self.view addSubview:picker1];
    [self.view addSubview:picker2];
    [self.view addSubview:picker3];

    UIImage *seven = [UIImage imageNamed:@"seven.png"];
    UIImage *bar = [UIImage imageNamed:@"bar.png"];

    for(int i=1; i<=4; i++)
    {
        UIImageView *sevenView = [[UIImageView alloc] initWithImage:seven];
        UIImageView *barView = [[UIImageView alloc] initWithImage:bar];

        NSArray *imageViewArray = [[NSArray alloc] initWithObjects:
                                   sevenView,barView,nil];

        NSString *fieldName = [[NSString alloc] initWithFormat:@"column%d",i];
        [self setValue:imageViewArray forKey:fieldName];
    }

}

-(UIView *)pickerView:(UIPickerView *)pickerView
           viewForRow:(NSInteger)row
         forComponent:(NSInteger)component reusingView:(UIView *)view
{
    NSString *arrayName = [[NSString alloc] initWithFormat:@"column%d",component+1];
    NSArray *array = [self valueForKey:arrayName];
    return [array objectAtIndex:row];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning]; // Releases the view if it doesn't have a superview
    // Release anything that's not essential, such as cached data
}

- (void)dealloc {

}

#pragma mark UIPickerViewDelegate methods

- (NSString*)pickerView:(UIPickerView*)pv titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    return [NSString stringWithFormat:@"%d",row];
}

#pragma mark UIPickerViewDataSource methods

- (NSInteger)numberOfComponentsInPickerView:(UIPickerView*)pv
{
    return 4;
}

- (NSInteger)pickerView:(UIPickerView*)pv numberOfRowsInComponent:(NSInteger)component
{
    return 2;
}

@end 
```

![在此处输入图像描述](../Images/1d7434bda56cffc485c48df208bc16b7.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:16:52.503

```
-(UIView *)pickerView:(UIPickerView *)pickerView
           viewForRow:(NSInteger)row
         forComponent:(NSInteger)component reusingView:(UIView *)view
{

    NSArray *array = nil;

    if (pickerView == picker1) {

        array =  [self valueForKey:@"column1"];
    }
    else if (pickerView == picker2) {

        array =  [self valueForKey:@"column2"];
    }
    else if (pickerView == picker3) {

        array = [self valueForKey:@"column3"];
    }

    return [array objectAtIndex:row];
} 
```

# iphone - 让程序自动进入后台

> ID：13504707
> 
> 赞同：0
> 
> 时间：2012-11-22T01:33:55.623
> 
> 标签：iphone, ios6

我想单击一个按钮使我的程序进入后台。我该怎么做？

如果是用来越狱手机的话，</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:18:17.997

如果您的意思是以编程方式“最小化”应用程序（在多任务处理中将其关闭同时保持打开状态），我认为没有办法使用公共 API 来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T05:38:42.567

请查看以下答案

1.  [将应用程序发送到后台进程](https://stackoverflow.com/questions/9970221/send-app-to-background-process)

2.  [暂停申请](https://stackoverflow.com/questions/5360846/suspend-the-application)

**不要以编程方式退出**

永远不要以编程方式退出 iOS 应用程序，因为人们倾向于将其解释为崩溃。但是，如果外部环境阻止您的应用程序按预期运行，您需要告诉您的用户这种情况并解释他们可以做些什么。根据应用程序故障的严重程度，您有两种选择。

# google-apps-script - 当我尝试通过电子邮件发送嵌入式图表时出现“用户未登录”错误

> ID：13504708
> 
> 赞同：0
> 
> 时间：2012-11-22T01:33:55.637
> 
> 标签：google-apps-script

我有一个带有嵌入式图表的 Google 电子表格。我正在使用此代码通过电子邮件发送图表：

```
var charts = SpreadsheetApp.getActiveSheet().getCharts();
MailApp.sendEmail(      
    "recipient@example.com",
    "Income Charts",      
    "Here's the latest income charts",      
    {attachments: charts }); 
```

但我只得到一张带有“用户未登录”错误的图像。如果我将电子表格公开，它可以工作，但我不想这样做。我需要电子表格私有。

![](../Images/007ab56e6189390a55bc807f267ed75b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:35:31.567

我也能看到这一点。事实上，我什至试图先将它保存到云端硬盘，然后它仍在发生。深入研究它，这与安全性和权限有关。

如果您在不登录的情况下使您的工作表可读，这就像一个魅力。因此，转到电子表格右上角的“共享”并将设置设置为 -“任何知道链接的人”（您必须在之前的对话框中单击“私人”行中的“更改”）。

![共享设置](../Images/9cde195c16ae5e3f450b2e1a324789af.png)

这是有道理的，因为 Apps 脚本本质上是一个试图访问电子表格的“用户”。

# c++ - 有什么方法可以提取 Boost Regex，以便我可以将它打包到我的项目中？

> ID：13504709
> 
> 赞同：3
> 
> 时间：2012-11-22T01:34:24.653
> 
> 标签：c++, regex, boost, g++, boost-regex

我正在开发一个用 C++ 编写的项目，该项目使用 Boost Regex 库进行一些解析。我的问题是，我需要在没有安装 boost 库的远程机器上运行程序。我也没有对这台计算机的管理员访问权限，所以我不能自己安装它。

有什么方法可以只分离 Boost Regex 库，以便我可以将它放在与其他代码相同的目录中？我已经尝试通过下载 boost 库并分离出所有不需要的标头等来做到这一点。我设法让它编译到最平静的地步，但在链接阶段失败了。

我能做些什么来解决这个问题，或者我会被迫重写解析代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:29:28.073

您可以使用[Boost.BCP](http://www.boost.org/doc/libs/1_52_0/tools/bcp/doc/html/index.html)工具来提取 Boost 的子集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T01:38:32.583

`libboost_regex-gcc-1_35.a` 包括要编译的目标文件列表的静态库 。1_35 是我的 linux 机器上的旧版本号，你可能有一个更新的库

# versioning - 使用 require.js 处理资源版本控制

> ID：13504716
> 
> 赞同：0
> 
> 时间：2012-11-22T01:35:14.507
> 
> 标签：versioning, requirejs

我们计划在构建时通过将版本附加到文件名来对我们的关键资源进行版本控制（例如 main-v1_1.js）

我们正在学习如何使用 require.js 来管理我们的资源加载。我希望能够在 require.js 配置中指定一个后缀，该后缀将附加到正在加载的资源中。

```
var version = "1_1";  //inserted at build time
requirejs.config(
   {
      postfix: "_" + version  //is there something like this?
   }
);
require([main]...); //would load main_1_1.js 
```

建议？想法？处理这种情况的更好方法？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:00:38.877

听起来这将适合[地图配置选项](http://requirejs.org/docs/api.html#config-map)。

```
requirejs.config({
    map: {
        'some/newmodule': {
            'foo': 'foo1.2'
        },
        'some/oldmodule': {
            'foo': 'foo1.0'
        }
    }
}); 
```

> 当 'some/newmodule' 执行`require('foo')`时，它将获得 foo1.2.js 文件，而当 'some/oldmodule' 执行`require('foo')`时，它将获得 foo1.0.js 文件。此功能仅适用于调用 define() 并注册为匿名模块的真正 AMD 模块的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:28:28.973

我们最终使用 urlArgs 参数来附加一个版本查询字符串。

[http://requirejs.org/docs/api.html#config-urlArgs](http://requirejs.org/docs/api.html#config-urlArgs)

# java - 如何重绘控制台屏幕，使其显示为屏幕已清除？

> ID：13504717
> 
> 赞同：2
> 
> 时间：2012-11-22T01:35:31.650
> 
> 标签：java, eclipse, terminal

所以我想做的是模拟 Eclipse 终端的清除屏幕。

我知道没有真正的清除屏幕的解决方案，所以我知道我必须使用大量的空行来清除屏幕。

问题是当我执行大量换行符时，指针将位于终端的底部。

我将如何做到这一点，所以我最终会在终端顶部看到指针，并且整个视图会显示没有任何文本？

所以它看起来像 Aircrack-ng 的界面。屏幕不断变化，但只能通过向下滚动和更新内容等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:50:57.683

你想要的基本上是模拟**clrtobot** `curses`功能。哪一个：

> 从光标擦除到屏幕末尾。也就是说，它们会擦除窗口中光标下方的所有行。此外，光标右侧的当前行（包括在内）将被删除。

在**window$**，有“cls”功能，所以你必须使用类似

```
Runtime.getRuntime().exec("cls"); 
```

在大多数***nix**中都有“清除”功能。但是请不要过分依赖这个解决方案，因为这会有所不同，但您可以使用类似的东西：

```
Runtime.getRuntime().exec("clear"); 
```

我还没有看到不依赖于操作系统的解决方案。

我希望它有所帮助。干杯

# ruby-on-rails - 在rails中强制重新加载另一个模型的方法？

> ID：13504722
> 
> 赞同：1
> 
> 时间：2012-11-22T01:35:46.593
> 
> 标签：ruby-on-rails, ruby-on-rails-3, methods, model, associations

我有一个模型，它根据另一个模型表中的条目定义方法：例如文章和类型。一篇文章 habtm 类型，反之亦然。

我在 Article.rb 中定义：

```
 Type.all.each do |type|
   define_method "#{type.name}?" do
     is?(:"#{type.name}")
   end
 end 
```

这很好用！它允许我确保类型 db 中的任何类型都会导致创建关联的方法，例如：

```
 article.type? 
```

但是，这些方法仅在您加载 Article 模型时运行。这引入了一些警告：例如，在 Rails 控制台中，如果我创建一个新类型，它的方法 article.type_name? `reload!`直到我一切都不会被定义。

此外，test/rspec 中也存在同样的问题：如果我创建了一定数量的类型，它们的关联方法将不存在。在 rspec 中，我不知道如何重新加载 User 模型。

有谁知道这里的解决方案？也许，有什么方法可以在创建新类型时重新加载 Article 模型的方法？这听起来不太可能......任何建议或指导都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:45:58.477

我认为您最好避免重新加载模型并稍微更改您的 api。中`Article`，你真的反对通过更通用的方法进行单点访问吗？

```
def type?(type)
  return is? type if type.is_a? String # for when type is the Type name already
  is? type.name                        # for when an instance of Type is passed
end 
```

如果您准备为每种类型使用单独的方法，那么可能这样的方法会在您的`Type`课程中起作用

```
after_insert do
  block = eval <<-END.gsub(/^ {6}/, '')
    Proc.new { is? :#{self.name} }
  END

  Article.send(:define_method, "#{self.name}?", block)
end 
```

# php - 在嵌套的 If 中放置 Else

> ID：13504730
> 
> 赞同：3
> 
> 时间：2012-11-22T01:37:51.543
> 
> 标签：php

我是一名 PHP 菜鸟，正在阅读教程，我发现嵌套 If Else 存在我不理解的问题。我有一个外部 if 和一系列内部 if。而且，我有一个我想与外部 if 相关联的 else。我的原始代码从未执行过 else，如果外部 if 为 false，则应该发生这种情况。原始代码是：

```
if (!($result["name"] & $result["age"] & $result["email"]))
{
    if (!$result["name"]) 
    {
        echo("Name must be supplied.<br>");
    }
    if (!$result["age"])
    {
        echo("Age must be a number between 1 and 120.<br>");
    }
    if (!$result["email"])
    {
        echo("E-Mail is not valid.<br>");
    }
 }
 else 
 {
     echo("User input is valid.<br/>");
 } 
```

正如我所说， else 从未被执行。但是，我将 else 移到了括号内，它起作用了。工作代码是：

```
if (!($result["name"] & $result["age"] & $result["email"]))
{
    if (!$result["name"]) 
    {
        echo("Name must be supplied.<br>");
    }
    if (!$result["age"])
    {
        echo("Age must be a number between 1 and 120.<br>");
    }
    if (!$result["email"])
    {
        echo("E-Mail is not valid.<br>");
    }
    else 
    {
        echo("User input is valid.<br/>");
    }
} 
```

这对我来说似乎是错误的。可能只是一些菜鸟错误，但我无法弄清楚。感谢您的帮助...RG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:40:06.900

替换这个：

```
if (!($result["name"] & $result["age"] & $result["email"])) 
```

有了这个

```
if (!($result["name"] && $result["age"] && $result["email"])) 
```

它的两个 & 标志不仅仅是一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:47:14.267

使用`AND`比较运算符或`&&`比较运算符而不是`&`按位运算符。

如需快速查看 PHP 运算符，请访问[此处](http://www.w3schools.com/php/php_operators.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:44:13.880

在你的第一个 if 。如果你想执行它

如果您的姓名、年龄和电子邮件为空或未设置

你至少需要穿上`!`每一个`$result[]`并改变你`&`的`&&`

```
if (!($result["name"] && !$result["age"] && !$result["email"])) 
```

尝试使用此代码..

# spring - 如何使用 org.springframework.web.filter.CharacterEncodingFilter 来纠正字符编码？

> ID：13504732
> 
> 赞同：17
> 
> 时间：2012-11-22T01:38:10.197
> 
> 标签：spring, hibernate, character-encoding, tomcat6

我需要一些帮助。

我将下面的代码片段放在了我的`web.xml`.

```
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter </filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在我的`server.xml`：

```
<Connector connectionTimeout="20000" port="8080" protocol="HTTP/1.1" redirectPort="8443" URIEncoding="UTF-8"/> 
```

我的 jsp 页面被编码为`UTF-8`，我的 mysql 表被编码为`utf8_general_ci`.

我的问题是，每当我保存 a`ñ`时，它就会变成`?`.

当我尝试`ñ`在 mysql 终端中手动保存时，它的保存正确。我怀疑问题出在我的服务器或程序中。请帮忙。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-13T20:35:30.880

我成功地尝试了这个`web.xml`！

```
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-02T18:16:46.980

要在 Spring Boot 中工作，您可以使用

```
@Bean
public FilterRegistrationBean filterRegistrationBean() {
    CharacterEncodingFilter filter = new CharacterEncodingFilter();
    filter.setEncoding("UTF-8");

    FilterRegistrationBean registrationBean = new FilterRegistrationBean();
    registrationBean.setFilter(filter);
    registrationBean.addUrlPatterns("/*");
    return registrationBean;
} 
```

[另一个回应](https://stackoverflow.com/questions/19825946/how-to-add-a-filter-class-in-spring-boot)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-22T06:06:39.803

确保您的 jsp 中有以下代码段

```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" language="java" %> 
```

并确保它是文件`encodingFilter`中的第一个过滤器`web.xml`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-05-09T16:24:28.617

我的解决方案，使用 Spring (3.2.x) AnnotationConfigWebApplicationContext，基于 Spring Framework Reference：

```
public class StudentApplicationConfig extends AbstractDispatcherServletInitializer {

@Override
protected WebApplicationContext createServletApplicationContext() {

    AnnotationConfigWebApplicationContext dispatcherContext
            = new AnnotationConfigWebApplicationContext();
    dispatcherContext.register(DispatcherConfig.class);
    return dispatcherContext;
}

@Override
protected String[] getServletMappings() {

    return new String[] { "/" };
}

@Override
protected WebApplicationContext createRootApplicationContext() {

    AnnotationConfigWebApplicationContext appContext
            = new AnnotationConfigWebApplicationContext();
    return appContext;
}

@Override
protected Filter[] getServletFilters() {
    Filter[] filters;

    CharacterEncodingFilter encFilter;
    HiddenHttpMethodFilter httpMethodFilter = new HiddenHttpMethodFilter();

    encFilter = new CharacterEncodingFilter();

    encFilter.setEncoding("UTF-8");
    encFilter.setForceEncoding(true);

    filters = new Filter[] {httpMethodFilter, encFilter};
    return filters;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-01-21T07:53:15.567

可能有点晚了，但最好在 tomcat conf/web.xml 中配置它（或在 web.xml 中的项目）

```
<filter>
    <filter-name>SetCharacterEncoding</filter-name>
    <filter-class>org.apache.catalina.filters.SetCharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>SetCharacterEncoding</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

请参阅[http://wiki.apache.org/tomcat/FAQ/CharacterEncoding](http://wiki.apache.org/tomcat/FAQ/CharacterEncoding)或 tomcat 的[web.xml](https://svn.apache.org/repos/asf/tomcat/trunk/webapps/host-manager/WEB-INF/web.xml)

或者像这样的码头：

```
public class StartEmbeddedJetty{

public static void main(String[] args) throws Exception {
    Server server = new Server(8080);
    ServletContextHandler sch = new ServletContextHandler();
    sch.addFilter(CharacterEncodingFilter .class, "/*", EnumSet.of(DispatcherType.REQUEST));
      ...
    server.start();
    server.join();
}

public static class CharacterEncodingFilter implements Filter {
     @Override
     public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        // set encoding to utf-8
        req.setCharacterEncoding("UTF-8");
        res.setCharacterEncoding("UTF-8");
     }

     @Override
     public void init(FilterConfig arg0) throws ServletException {
        /* empty */
     }

     @Override
    public void destroy() {
        /* empty */
    }
   } 
```

}

# python - Python：使用父构造函数初始化对象的成员？

> ID：13504733
> 
> 赞同：4
> 
> 时间：2012-11-22T01:38:10.943
> 
> 标签：python, oop, inheritance, static, static-members

所以我有一些 Python 代码的结构是这样的；

```
class GameObject(pygame.spriteDirtySprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = None
        self.rect  = None
        self.state = None

class Bullet(gameobject.GameObject):
    FRAME  = pygame.Rect(23, 5, 5, 5)
    STATES = config.Enum('IDLE', 'FIRED', 'MOVING', 'COLLIDE', 'RESET')

    def __init__(self):
        gameobject.GameObject.__init__(self)
        self.image = config.SPRITES.subsurface(self.__class__.FRAME)
        self.rect  = self.__class__.START_POS.copy()
        self.state = self.__class__.STATES.IDLE

class ShipBullet(bullet.Bullet):
    START_POS = pygame.Rect(somewhere)

    def __init__(self):
        super(bullet.Bullet, self).__init__()
        self.add(ingame.PLAYER)

class EnemyBullet(bullet.Bullet):
    START_POS = pygame.Rect(somewhere else)

    def __init__(self):
        super(bullet.Bullet, self).__init__()
        self.add(ingame.ENEMIES) 
```

这些实际上是在不同的文件中，但这是一个继承问题，而不是依赖问题。

请注意，`ShipBullet`并且`EnemyBullet`有不同的`START_POS`静态成员，但`Bullet`没有。因为`Bullet`永远不会真正被创建（如果这是 C++，我会把它变成一个抽象类），这是故意的。我的理由是，当我`Bullet.__init__()`从其子类调用时，所述子类将`START_POS`在初始化其成员时引用它们自己的。然而，情况并非如此。`ShipBullet.rect`（同样对于`EnemyBullet`）是`None`。我相信`image`可能`None`也是，但我还没有测试过。有人介意帮我弄清楚我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:57:03.293

使用`super(EnemyBullet, self).__init__()`（和类似的`ShipBullet`）。`super`使用第一个参数中的类来确定 MRO 中的下一个基。

# c++ - 为什么与 C 相比，链接器在 C++ 中的任务更艰巨？

> ID：13504740
> 
> 赞同：2
> 
> 时间：2012-11-22T01:39:10.287
> 
> 标签：c++, c, compiler-construction, linker

面试官问了我这个问题，不确定我的回答是否足够好。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:53:04.420

我不能说我非常了解这一点，但[Ian Lance Taylor 的这篇博客文章](http://www.airs.com/blog/archives/50)似乎有答案。从那里引用：

> 使用 C++ 时有一些特殊的挑战。向类中添加新的虚拟方法可能是对使用该类的任何函数的 ABI 更改。在这种情况下提供类的向后兼容版本是非常尴尬的——没有自然的方法来指定用于虚拟表的名称和版本或旧版本的 RTTI 信息。
> 
> 当然，您绝不能删除任何符号。

阅读条目以获取更多上下文。（ABI = 应用程序二进制接口）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:53:52.460

我脑海中蹦出的第一个念头就是名字改写。在 C++ 中但不是在 C 中，您可以有两个名称相同但参数不同的方法。编译器必须区分这两种方法，从而在内部更改（修改）名称。

C++ 编译器必须在非 C 语言中做的另一件事是处理类继承。你有抽象类、重写方法和虚拟方法。这需要更多处理才能解决。

# wordpress - WordPress 基于日期的分类/术语存档（也重写 url 和重定向）

> ID：13504745
> 
> 赞同：0
> 
> 时间：2012-11-22T01:39:39.610
> 
> 标签：wordpress, redirect, rewrite, permalinks, custom-taxonomy

我想要做的是允许网站显示基于日期的条款档案，但我一点运气都没有。

我希望它如何工作：

`website.com/taxonomy/term/`工作，而且很棒。

`website.com/taxonomy/term/2012`不......它实际上是404s。 `website.com/taxonomy/term/2012/11`也没有。

我需要一些帮助来创建一些重写规则，这些规则将获取 url 并修改要添加的查询`year={year}&monthnum={$month}`（或者无论如何魔法有效），并且还重定向回`taxonomy-taxonomy.php`模板，因为这似乎中断了。

请问，我会尽我所能帮助澄清:)

**分类注册（从项目复制）：**

```
register_taxonomy ( 'age-limit', array('event'), array(
        'hierarchical' => false,
        'labels' => array (
            'name' => _x( 'Age limit', 'taxonomy general name' ),
            'singular_name' => _x( 'Age limit', 'taxonomy singular name' ),
            'search_items' =>  __( 'Search Age limits' ),
            'all_items' => __( 'All Age limits' ),
            'edit_item' => __( 'Edit Age limit' ), 
            'update_item' => __( 'Update Age limit' ),
            'add_new_item' => __( 'Add New Age limit' ),
            'new_item_name' => __( 'New Age limit' ),
            'menu_name' => __( 'Age limits' ),
        ),
        'show_ui' => true,
        'query_var' => true,
        'rewrite' => array('slug' => 'age-limit'),
  )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:32:02.590

关于重写规则......您可以使用这些代码行（经过测试和工作）。不知道你提到的重定向事情。

```
add_filter('rewrite_rules_array', '_rewrite_rules_array');
function _rewrite_rules_array($rewrite_rules) {

  $taxonomy = "age-limit";
  $taxonomy_slug = "age-limit";

  $month_rule = array($taxonomy_slug .'/(.+?)/([0-9]{4})/([0-9]{1,2})/?$'   => 'index.php?' . $taxonomy . '=$matches[1]&year=$matches[2]&monthnum=$matches[3]');
  $year_rule = array($taxonomy_slug . '/(.+?)/([0-9]{4})/?$' => 'index.php?' . $taxonomy . '=$matches[1]&year=$matches[2]');

  $rewrite_rules = $year_rule + $month_rule + $rewrite_rules;

  return $rewrite_rules;
} 
```

这个 WordPress 插件帮助我更好地理解了重写规则：[重写规则检查器](http://wordpress.org/extend/plugins/rewrite-rules-inspector/)

# html - HTML：表格到 div

> ID：13504748
> 
> 赞同：0
> 
> 时间：2012-11-22T01:40:16.960
> 
> 标签：html, html-table

我有一个 HTML 表格。现在我需要使用 DIV，不要使用表格。请告诉我这样做的方法。这是我第一次使用 web、js、html 等...我实际上对它没有足够的了解。希望你能告诉我一个学习基础知识的链接。

```
var table_data="<TABLE border='1' WIDTH='100%'>";
    table_data +="<TR>";
        table_data +="<TD>TicketID</TD>";
        table_data +="<TD>Name</TD>";
        table_data +="<TD>Birthday</TD>";
        table_data +="<TD>Delete</TD>";
    table_data +="</TR>";
    $.each(data.list, function(i,list)
    {
        table_data +="<TR>";
        table_data +="<TD>"+list.account.ticketid+"</TD>";
        table_data +="<TD>"+list.account.name+"</TD>";
        table_data +="<TD>"+list.account.birthday+"</TD>";
        table_data +="<TD><input type='button' value='Delete' id='"+list.account.ticketid+"'/></TD>";
        table_data +="</TR>";
    });

    table_data +="</TABLE>";
    $(table_data).appendTo("#content"); 
```

我没有足够的点来提升图像所以，这是我的网络视图....

[http://imageshack.us/photo/my-images/713/webn.png/](http://imageshack.us/photo/my-images/713/webn.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:47:21.007

像这样的东西？

```
var table_data='<div id="table">';
    table_data +='<div class="row">';
        table_data +='<div class="cell">TicketID</div>';
        table_data +='<div class="cell">Name</div>';
        table_data +='<div class="cell">Birthday</div>';
        table_data +='<div class="cell">Delete</div>';
    table_data +='</div> <br>';
    $.each(data.list, function(i,list)
    {
        table_data +='<div class="row">';
        table_data +='<div class="cell">'+list.account.ticketid+'</div>';
        table_data +='<div class="cell">'+list.account.name+'</div>';
        table_data +='<div class="cell">'+list.account.birthday+'</div>';
        table_data +='<div class="cell"><input type="button" value="Delete" id="'+list.account.ticketid+'"/></div>';
        table_data +='</div> <br>';
    });

    table_data +='</div>';
    $(table_data).appendTo("#content"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:53:40.567

您还可以使用以下代码模式：

```
var table_data = $("<div/>");
table_data.attr("id", "table");

var table_row = $("<div/>");
table_row.addClass("row");

table_data.append(table_row); 
```

添加文字时，

```
table_row.append(list.account.name); 
```

仅连接字符串来构建 html 标记并不是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T01:55:00.963

如果表格的标记是静态的，而不是动态加载的，我真的建议你看看 Scaffolding @ [http://twitter.github.com/bootstrap/scaffolding.html](http://twitter.github.com/bootstrap/scaffolding.html)

它的工作方式是您需要包含 css 和 javascript 文件（在上面链接的主页上下载一个 zip），然后您将访问一个漂亮、响应迅速、流畅的系统。

虽然网站上有一篇很好的文章，但我会快速浏览一下。

要将其用作表格，您首先需要主容器，它只是一个带有“container-fluid”类的 div：

```
<div class="container-fluid">
    <!-- Main Container -->
</div> 
```

在此范围内，您可以访问 12 列，您可以自由地操作这些列并且不受限制的行。让我们添加一个标题为“Table -> Div”的新行，这也是一个简单的 div，但具有“row-fluid”类：

```
<div class="container-fluid">
    <!-- Main Container -->
    <div class="row-fluid">
        <!-- First row -->
        Test -&gt; Div
    </div>
</div> 
```

现在让我们制作一个 3 x 3 的幻方，每一列在行中定义为一个 div，类为 'span[number]' 其中数字是大小（最大为 12，如我所说）。因此，如果我们有 3 列，那么我们的数字将是 3/12，即 3。

```
<div class="container-fluid">
    <!-- Main Container -->
    <div class="row-fluid">
        <!-- First row -->
        Test -&gt; Div
    </div>
    <div class="row-fluid">
        <div class="span4">
            4
        </div>
        <div class="span4">
            9
        </div>
        <div class="span4">
            2
        </div>
    </div>
    <div class="row-fluid">
        <div class="span4">
            2
        </div>
        <div class="span4">
            5
        </div>
        <div class="span4">
            7
        </div>
    </div>
    <div class="row-fluid">
        <div class="span4">
            8
        </div>
        <div class="span4">
            1
        </div>
        <div class="span4">
            6
        </div>
    </div>
</div> 
```

瞧，这是一个浮动的魔方。从这里，您可以使用基本的 CSS 来“主题化”它。我没有使用您的示例，因为我不想泄露答案，只是为您提供学习所需的内容。

# javascript - 如何使用 CSS 随机旋转图像？

> ID：13504750
> 
> 赞同：6
> 
> 时间：2012-11-22T01:40:36.710
> 
> 标签：javascript, jquery, css, random, numbers

我的网页上有一个包含 20 张图片的画廊，我想在将鼠标悬停在每张图片上时随机旋转（-5 到 5 度）。如果可能的话，我想只使用 CSS。如果没有，我愿意使用 JavaScript 或 jQuery。

我的CSS如下：

```
.photo:hover {
    z-index:1;
    transform:rotate(6deg) scale(1.25);
    -webkit-transform:rotate(6deg) scale(1.25);
    -moz-transform:rotate(6deg) scale(1.25);
    -ms-transform:rotate(6deg) scale(1.25);
} 
```

6deg 应该是一个随机数，因此每次用户将鼠标悬停在图像上时，它都会在 -5 和 5 之间随机旋转。我可以从 CSS 中调用 JavaScript 函数，甚至是 JavaScript 变量吗？这比创建 20 个不同的 CSS id 要好。

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-22T01:44:41.387

您不需要单独的 CSS ID，但您可以在类上使用一些 jQuery。`.each()`在这里使用而不是`.css()`直接使用，因为否则随机角度将生成一次并用于所有图像。在悬停时单独旋转：

```
$('.photo').hover(function() {
    var a = Math.random() * 10 - 5;
    $(this).css('transform', 'rotate(' + a + 'deg) scale(1.25)');
}, function() {
    $(this).css('transform', 'none');
}); 
```

如果您想平滑地为这些转换设置动画，您可以简单地`transform`在类中添加一个 CSS 属性：

```
.photo {
    transition: transform 0.25s linear;
} 
```

演示：http: [//jsbin.com/iqoreg/1/edit](http://jsbin.com/iqoreg/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-02T07:18:27.987

我知道这很旧，但我在 2022 年通过 Google 找到了这个，并且有一种伪随机方式可以使用纯 CSS 实现类似的效果。

确实需要调整正负值的旋转和顺序以匹配您的设计宽度，否则会产生非常明显的重复图案。

尝试一下并使用这些值，直到找到与您的设计相匹配的东西。

```
/* setup */
section {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
}
div {
  width: 100px;
  height: 100px;
  background: #E54575;
}
/* maaagic */
div { transform:rotate(5deg); }
div:nth-child(2n) { transform:rotate(-4deg); }
div:nth-child(3n) { transform:rotate(2deg); }
div:nth-child(4n) { transform:rotate(-5deg); }
div:nth-child(5n) { transform:rotate(-6deg); }
div:nth-child(6n) { transform:rotate(6deg); }
/* ... you can add or remove more rotations here... */
```

```
<section>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
<div></div>
</section>
```

# android - 无法在 onStart 中显示警报对话框

> ID：13504753
> 
> 赞同：0
> 
> 时间：2012-11-22T01:41:08.613
> 
> 标签：android, xamarin.android

我试图在启动时出现异常时显示警报对话框（如果 Web 服务调用失败）。

我已经尽可能简化了

代码如下：

```
 protected override void OnStart()
    {
        base.OnStart();

        // doWSCall();
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.SetMessage("Test").Create().Show();
    } 
```

该对话框未显示，调试输出中不显示任何内容，设备日志中也未显示任何内容。

注意这是单声道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:52:18.997

尝试创建一个完整的 AlertDialog ：http: [//developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html)

或者，如果您只显示通知，请使用 Toast 而不是 AlertDialog

敬酒：http: [//developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T03:40:24.660

```
private AlertDialog.Builder alert()
{
        AlertDialog.Builder myQuittingDialogBox =new AlertDialog.Builder(this);
        myQuittingDialogBox.setTitle("your title");
        myQuittingDialogBox.setMessage("set Msg Here");

        myQuittingDialogBox.setIcon(R.drawable.yourimg);

        myQuittingDialogBox.setPositiveButton("yes"), new DialogInterface.OnClickListener() {

            public void onClick(DialogInterface dialog, int whichButton) 
            { 
                // your code here
                dialog.dismiss();   
            }   

        });

        myQuittingDialogBox.setNeutralButton("no"), new DialogInterface.OnClickListener() { 
            public void onClick(DialogInterface dialog, int whichButton) { 
            //write your code here
                dialog.dismiss();
         } 
        });

        myQuittingDialogBox.create();
        return myQuittingDialogBox;

} 
```

**打电话**

```
AlertDialog.Builder diaBox = alert();
diaBox.show(); 
```

# forms - 在 MVC 中观察相互依赖模型的执行树

> ID：13504755
> 
> 赞同：2
> 
> 时间：2012-11-22T01:41:29.997
> 
> 标签：forms, model-view-controller, attributes, tree, dependencies

我已经在 Yii 框架上开发了一段时间（4 个月），到目前为止，我遇到了一些关于 MVC 的问题，我想与经验丰富的开发人员分享。我将通过列出它们的复杂程度来呈现这些问题。

**[Level 1]** ***CR（创建更新）表格***。首先，我们有很多表格。每个表单本身都是一个模型，因此每个表单都有一些验证规则、一些属性和一些要对属性执行的操作。在很多情况下，这些表单中的每一个都使用单个**活动记录**对象在数据库中**更新**和**创建记录。** -> 所以在这种复杂程度下，表单必须

 ***   打开时，

    *   能够以人性化的方式显示来自数据库的数据库友好数据

    *   能够显示所有具有活动记录对象属性的表单字段。从 db 表中添加、删除、更改列必须影响表单的显示。

*   保存时，能够在获取数据之前将对人类友好的数据格式化为对数据库友好的数据

*   验证时，能够执行活动记录对象强制执行的基本验证，它还必须执行其他验证来满足某些**业务规则**。

*   当验证失败时，能够回滚对属性所做的更改以及对数据库所做的更改，并向用户显示他们最初输入的数据。

**[级别 2]** ***扩展 CR 表格***。一种可以同时从不同表创建/更新记录的表单。不仅如此，表单是否会创建/更新其记录有时可能取决于其他条件（更多**业务规则**），因此表单有时可以更新表 A、B 但不能更新 D 中的记录，有时会更新 A 中的记录,D 但不是 B -> 所以在这种复杂程度下，我们看到一个表单必须：

*   能够满足**[1级]**

*   能够有条件地创建/更新某些记录，有条件地创建/更新某些记录的某些列。

**[Level 3]** ***模型树***。表单在应用程序中的角色，在许多方面，是一个让用户与您的应用程序交互的端口。为了满足请求，此端口将与许多其他对象交互，而这些对象又与更多对象交互。其中一些对象可以被视为模型。Active Record 是一个模型，但 Mailer 也可以是一个模型，RobotArm 也是如此。这些模型相互使用以满足用户的要求。每个模型都可以执行自己的操作，并且整个树必须能够回滚在错误/失败情况下所做的任何更改。

有没有人遇到或能够解决这些问题？

我想出了很多东西，比如将模型属性封装在 ModelAttribute 对象中，以解决它们在客户端、服务器和数据库层中的存在问题。

我还认为我们应该给模型树一个 Observer 来观察并通知观察到的模型在发生错误时回滚更改。但是如果可以存在多个观察者，如果一个节点使用其父的观察者但给它的孩子另一个观察者怎么办。

工程师、开发人员、Rails、Yii、Zend、ASP、JavaEE，任何 MVC 人，为了科学，请加入这个讨论。

--**更新 teresko 的回复：** ---
@teresko 我实际上打算将服务合并到工作单元内的执行中，并且让工作单元不用担心新/更新/删除。工作单元内的每个对象都将对其状态负责，并需要实现自己的 commit() 和 rollback()。一旦发生错误，工作单元将从最新注册的对象回滚到最旧的注册对象的所有更改，因为我们不仅处理数据库，还可以有邮件程序、发布者等。否则，树执行成功，我们从最旧的注册对象调用 commit() 到最新的注册对象。这样，邮件程序可以保存邮件并在提交时发送。

使用数据映射器是个好主意，但我们仍然必须确保 db 中的列与数据映射器和域对象匹配。此外，扩展的 CR 表单或具有依赖于其他模型的属性的模型必须在验证和数据类型方面匹配它们的属性。那么也许一个属性可以是一个对象并从一个模型运送到另一个模型？一个属性还可以判断它是否被修改，应该对其执行什么验证，以及它如何对人类友好、对应用程序友好和对数据库友好。对 db 模式的任何更新都会影响此属性，从而引发异常，需要开发人员对系统进行更改以满足此更改。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-22T04:32:13.670

## 原因

您的问题的根源是滥用[活动记录](http://martinfowler.com/eaaCatalog/activeRecord.html)模式。AR 适用于仅具有基本 CRUD 操作的简单域实体。当您开始在多个表之间添加大量验证逻辑和关系时，该模式开始分崩离析。

为简单起见，最好的活动记录是轻微的[SRP违规。](http://en.wikipedia.org/wiki/Single_responsibility_principle)当你开始承担责任时，你开始受到严厉的惩罚。

## 解决方案

### 1级：

最好的选择是将业务和存储逻辑分开。大多数情况下，它是通过使用[域对象](http://c2.com/cgi/wiki?DomainObject)和[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)来完成的：

*   **领域对象**（在其他材料中也称为业务对象或领域模型对象）处理验证和特定业务规则，并且完全不知道它们中的数据是如何（或什至“如果”）存储和检索的。它们还让您拥有不直接绑定到存储结构（如数据库表）的对象。

    *例如：*您可能有一个`LiveReport`表示当前销售数据的域对象。但它可能在 DB 中没有特定的表。相反，它可以由多个映射器提供服务，这些映射器从 Memcache、SQL 数据库和一些外部 SOAP 中汇集数据。并且`LiveReport`实例的逻辑与存储完全无关。

*   **数据映射器**知道将来自域对象的信息放在哪里，但它们不进行任何验证或数据完整性检查。认为他们*能够*处理来自低级存储抽象的异常，例如违反`UNIQUE`约束。

    数据映射器也可以执行事务，但是，如果需要为多个域对象执行单个事务，您应该考虑添加工作单元（更多关于它的内容较低）。

    在更高级/复杂的情况下，数据映射器可以交互和利用[DAO](http://www.oracle.com/technetwork/java/dataaccessobject-138824.html)和查询构建器。但这更多的是针对情况，当您旨在创建类似 ORM 的功能时。

    每个域对象可以有多个映射器，但每个映射器应该只与特定类的域对象（或一个的子类，如果你的代码遵守[LSP](http://en.wikipedia.org/wiki/Liskov_substitution_principle)）一起工作。您还应该认识到域对象和域对象集合是两个独立的东西，应该有独立的映射器。

    此外，每个域对象可以包含其他域对象，就像每个数据映射器可以包含其他映射器一样。但在映射器的情况下，这更像是一个偏好问题（我非常不喜欢它）。

另一个可以减轻您当前混乱的改进是防止应用程序逻辑在表示层（通常是控制器）中泄漏。相反，您将从使用包含映射器和域对象之间交互的[服务中受益匪浅，从而为您的模型层创建一个](https://en.wikipedia.org/wiki/Service_%28systems_architecture%29)*公开的*API。

基本上，您封装模型的完整部分的服务，可以（在现实世界中 - 只需少量努力和调整）在不同的应用程序中重用。例如：`Recognition`，`Mailer`或`DocumentLibrary`将所有服务。

另外，我认为我不应该，并非所有服务都必须包含域对象和映射器。一个很好的例子是前面提到的`Mailer`，它可以由控制器直接使用，或者（更有可能）由另一个服务使用。

### 2级：

如果您停止使用活动记录模式，这将成为一个非常简单的问题：您需要确保只保存那些域对象中的数据，这些数据自上次保存以来实际上已经发生了变化。

在我看来，有两种方法可以解决这个问题：

1.  **Quick'n'Dirty**

    如果有什么变化，只需更新它...

    我更喜欢的方式是在域对象中引入一个`checksum`变量，该变量包含来自所有域对象变量的哈希（当然，除了`checksum`它自己）。

    每次要求映射器保存域对象时，它都会调用`isDirty()`该域对象上的一个方法，该方法检查数据是否已更改。然后映射器可以采取相应的行动。这也可以通过一些调整用于对象图（如果它们不是很广泛，在这种情况下你可能需要重构）。

    此外，如果您的域对象实际上被映射到多个表（甚至是不同形式的存储），则为每组变量设置多个校验和可能是合理的。由于映射器已经为特定类的领域对象编写，它不会加强现有的耦合。

    对于 PHP，您将在[此答案](https://stackoverflow.com/a/10988966/727208)中找到一些代码示例。

    > **注意：**如果您的实现使用 DAO 将域对象与数据映射器隔离，那么基于校验和的验证逻辑将移至 DAO。

2.  **[工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)**

    [这是您问题的“行业标准”，在PoEAA](https://rads.stackoverflow.com/amzn/click/com/0321127420)书中有一整章（第 11 章）处理它。

    基本思想是，您创建一个实例，在域对象和数据映射器之间充当控制器（在经典中，而不是 MVC 意义上的）。

    每次更改或删除域对象时，都会通知*工作单元*。每次在域对象中加载数据时，您都要求*工作单元*执行该任务。

    有两种方法可以告诉*Unit of Work*所做的更改：

    *   *调用者注册：*执行更改的对象也通知工作单元
    *   *对象注册：*更改的对象（通常来自 setter）通知工作单元，它已被更改

    当与域对象的所有交互都完成后，您调用`commit()`工作单元上的方法。然后它找到必要的映射器并存储所有更改的域对象。

### 3级：

在这个复杂的阶段，唯一可行的实现是使用工作单元。它还将负责使用适当的回滚子句启动和提交 SQL 事务（如果您使用的是 SQL 数据库）。

## 附言

阅读*《企业应用架构模式》*一书。这是你迫切需要的。它还将纠正您通过使用类似 Rails 的框架获得的关于 MVC 和受 MVC 启发的设计模式的误解。**

# php - 需要一次超出函数内部的范围

> ID：13504761
> 
> 赞同：-1
> 
> 时间：2012-11-22T01:41:59.473
> 
> 标签：php

我的 bootstrap.php 中包含了类，并且在包含的类中实例化了变量，当我包含 bootstrap.php 时，它给了我对非对象上的成员函数的调用

引导程序.php

```
require_once "config/constants.php";
require_once "libraries/Dropbox/DropboxClient.php";

$dropbox = new DropboxClient(array(
'app_key' => DROPBOX_CONSUMER_KEY, 
'app_secret' => DROPBOX_CONSUMER_SECRET,
'app_full_access' => true,
),'en'); 
```

索引.php

```
require_once "bootstrap.php";

dropbox_file_tree();

function dropbox_file_tree()
{
     if(!empty($access_token)) {

     $dropbox->SetAccessToken($access_token);

     }

    $files = $dropbox->GetFiles("",true); 

    print_r($files);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:51:54.270

将保管箱对象传递给函数

```
dropbox_file_tree($dropbox);

function dropbox_file_tree($dropbox)
{
    if(!empty($access_token)) {
        $dropbox->SetAccessToken($access_token);
    }

    $files = $dropbox->GetFiles("",true); 

    print_r($files);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:45:10.410

这与它无关`include`，这是一个[范围问题](http://php.net/manual/en/language.variables.scope.php)，函数只能看到局部变量。

您必须使用`global`关键字或`$GLOBALS`超全局或将其作为参数传递给函数。

# c# - 使用 Linq 按一列分组并按另一列区分

> ID：13504762
> 
> 赞同：1
> 
> 时间：2012-11-22T01:42:09.640
> 
> 标签：c#, linq, c#-4.0, linq-to-sql

我正在使用 Linq 查询对列名进行分组并返回行列表。

```
var query = from row in ProcessSummaryData.AsEnumerable()
            group row  by new { Key = row .Field<string>("GroupDescription") } into g
            select new 
           { 
             GroupDescription = g.Key, 
             Values = g.ToList(), 

           }; 
```

这个查询的输出是这样的

```
GroupDescription   Values
1                  12,abc,xyz
                   12,abx,yut
                   13,tye,lki

2                  14,asd,acd 
```

现在，在上面的示例中，Values 是一个 DataRow，我刚刚给出了其中的值示例。现在我想要的是对于 GroupDescription '1' 输出只有一行具有 '12' 值。我已经尝试了一些事情，其中​​之一是在第一个列表上有另一个 Linq 查询，但这会使事情变得过于复杂。如何使用 linq 按第一列分组，然后在某些列返回列表上使用 Distinct 以仅获取 Distinct 行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:24:04.390

要获得第一次出现的字段值，您可以按该字段分组，然后获取每个分组的第一行。

```
var query = from row in ProcessSummaryData.AsEnumerable()
            group row  by new { Key = row .Field<string>("GroupDescription") } into g
            select new 
            { 
                GroupDescription = g.Key, 
                Values = (from value in g.ToList()
                          group value by value["Id"] into valueGroup
                          select valueGroup.First()).ToList()     
            }; 
```

# r - R - 将矩阵存储到单个数据框单元格中

> ID：13504764
> 
> 赞同：8
> 
> 时间：2012-11-22T01:42:21.713
> 
> 标签：r, dataframe

我正在尝试将整个矩阵/数组存储到数据框的*单个*单元格中，但不太记得该怎么做。

现在，在您说无法完成之前，我*确定*我记得有人在 SO 上提出了一个问题，尽管那不是问题的重点，所以我再也找不到了。

例如，您可以将矩阵存储在矩阵的单个单元格中，如下所示：

```
myMat <- array(list(), dim=c(2, 2))
myMat[[1, 1]] <- 1:5
myMat[[1, 2]] <- 6:10

#     [,1]      [,2]     
#[1,] Integer,5 Integer,5
#[2,] NULL      NULL 
```

诀窍在于使用双括号`[[]]`。

现在我只是不知道如何为数据框做这件事（或者如果可以的话）：

```
# attempt to make a dataframe like above (except if I use list() it gets
# interpreted to mean the `m` column doesn't exist)
myDF <- data.frame(i=1:5, m=NA)
myDF[[1, 'm']] <- 1:5
# Error in `[[<-.data.frame`(`*tmp*`, 1, "m", value = 1:5) : 
#  more elements supplied than there are to replace

# this seems to work but I have to do myDF$m[[1]][[1]] to get the 1:5,
# whereas I just want to do myDF$m[[1]].
myDF[[1, 'm']] <- list(1:5) 
```

我想我快到了。通过最后一次尝试，我可以`myDF[[1, 'm']]`进行检索`list(1:5)`并因此`myDF[[1, 'm']][[1]]`获得`1:5`，但我更愿意只做`myDF[[1, 'm']]`和获得`1:5`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T03:36:38.947

我想我解决了。*初始化*数据框以使列准备好接受矩阵非常重要。

为此，您给它一个列表数据类型。注意`I`保护`list()`.

```
myDF <- data.frame(i=integer(), m=I(list())) 
```

然后你可以像往常一样添加行

```
myDF[1, 'i'] <- 1 
```

然后用`[[]]`符号添加矩阵

```
myDF[[1, 'm']] <- matrix(rnorm(9), 3, 3) 
```

使用`[[]]`符号访问：

```
> myDF$m[[1]]
          [,1]       [,2]       [,3]
[1,] 0.3307403 -0.2031316  1.5995385
[2,] 0.4588922  0.1631086 -0.2754463
[3,] 0.0568791  1.0358552 -0.1623794 
```

* * *

要使用非零行进行初始化，您可以执行以下操作（注意`I`保护向量和`vector('list', 5)`初始化长度为 5 的*空*列表以避免浪费内存）：

```
myDF <- data.frame(i=1:5, m=I(vector('list', 5)))
myDF$m[[1]] <- matrix(rnorm(9), 3, 3) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T03:16:39.510

我认为诀窍可能是将其作为列表插入：

```
set.seed(123)
dat <- data.frame(women, m=I(replicate(nrow(women), matrix(rnorm(4), 2, 2), 
                simplify=FALSE)))

str(dat)
'data.frame':   15 obs. of  3 variables:
 $ height: num  58 59 60 61 62 63 64 65 66 67 ...
 $ weight: num  115 117 120 123 126 129 132 135 139 142 ...
 $ m     :List of 15
  ..$ : num [1:2, 1:2] -0.5605 -0.2302 1.5587 0.0705
  ..$ : num [1:2, 1:2] 0.129 1.715 0.461 -1.265
  ...
  ..$ : num [1:2, 1:2] -1.549 0.585 0.124 0.216
  ..- attr(*, "class")= chr "AsIs"

dat[[1, "m"]]
           [,1]       [,2]
[1,] -0.5604756 1.55870831
[2,] -0.2301775 0.07050839

dat[[2, "m"]]
          [,1]       [,2]
[1,] 0.1292877  0.4609162
[2,] 1.7150650 -1.2650612 
```

编辑：所以问题真的是关于初始化然后分配。鉴于此，您应该能够像您的问题中那样定义一个 data.frame，如下所示：

```
data.frame(i=1:5, m=I(vector(mode="list", length=5))) 
```

然后，您可以像这样分配给它：

```
dat[[2, "m"]] <- matrix(rnorm(9), 3, 3) 
```

# javascript - 如果容器具有非整数 (%) 位置，则子位置与分配的位置不同

> ID：13504766
> 
> 赞同：6
> 
> 时间：2012-11-22T01:42:45.850
> 
> 标签：javascript, html, css, animation

我将`(position: absolute; left: 50%; margin: -50px;)`100px 宽度的 div （容器）居中。

它具有**绝对**定位的子 div `overflow: hidden`，其大小为`100x2000 px`（此高度用于测试目的，如下所述）。

子 div 中有一个图像，它是**绝对**定位的。图像是`3100x100 px,`它包含动画帧。

我通过将其`style.left`从 0 更改为 -1100px 来设置此图像的动画，步长为 100px。一切都很好，但是当身体宽度不均匀时我遇到了奇怪的问题。

如果有滚动条并且滚动条具有奇数宽度，则可能会发生这种情况（例如，在 Chrome/Win32 上发生这种情况）。在这种情况下，只要动画图像通过屏幕边缘，图像就会在视觉上水平移动 1 个像素（对于 1920x1080，它大约发生在动画的 9-10 帧处）。我找不到这种行为的解决方法。

可以在[此处找到重现问题的工作示例](http://lorgame.ru/animtest.htm)

子 div 高度设置为 2000px 以确保滚动条可见。如果您的滚动条的宽度是偶数，您可以通过将浏览器窗口调整为奇数宽度来重现该问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T12:19:32.023

发生这种情况是因为浏览器的舍入引擎。`50%`Webkit 显然在偶数和奇数宽度方面存在一些问题。

`.outer`解决该问题的一种方法 -根据窗口宽度重新定位元素

```
document.getElementById( 'outer' ).style.left = Math.floor( window.innerWidth / 2 ) + 'px'; 
```

[**演示**](http://jsfiddle.net/PjHFc/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T11:44:15.203

您需要更改`.inner img position`并`relative`更新您的 javascript。我为您进行了更改，所以这是您解决的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <title>test</title>
        <style>
            body {
                background-color: #000000;
            }
            .outer {
                position: absolute;
                left: 50%;
                margin-left: -50px;
            }
            .inner {
                position: absolute;
                width: 100px;
                height: 2000px;
                overflow: hidden;
            }
            .inner img {
                position: relative;
                top: 0;
                left: 0;
            }
        </style>
    </head>
    <body>
        <div class="outer">
            <div class="inner">
                <img src="http://lorgame.ru/test.png" id="img">
            </div>
        </div>
        <script language="JavaScript">
            var framesCount = 30;
            var framesCurrent = 0;
            var framesMoveLeft = true;
            var img = document.getElementById('img');
            var interval = setInterval(function() {
                if(framesMoveLeft == true){
                  framesCurrent++;
                  img.style.left = (img.offsetLeft - 100) + 'px';
                  if(framesCurrent == framesCount) framesMoveLeft = false;
                } else { // Move right
                  framesCurrent--;
                  img.style.left = (img.offsetLeft + 100) + 'px';
                  if(framesCurrent == 0) framesMoveLeft = true;
                }
            }, 100);
        </script>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-24T12:25:26.993

对我来说，这似乎是 Chrome 中的一个错误。当百分比以整数定义时，它们的行为相当出乎意料。尝试将位置定义为小数：

```
.outer {
    position: absolute;
    left: 49.99999%;
    margin-left: -50px;
} 
```

我在[小提琴](http://jsfiddle.net/PjHFc/3/)上对此进行了测试，它似乎可以解决问题。

# java - 将 C 结构转换为 Java

> ID：13504767
> 
> 赞同：2
> 
> 时间：2012-11-22T01:43:09.543
> 
> 标签：java, c, struct

谁能教我如何将其转换为Java。

```
typedef struct{
    int age;
    int dateOfBirth;
}StudentInfo;

typedef StudentInfo *StudentPtr;

typedef struct studentNode{
    StudentPtr studentPtr;
    struct studentNode *next;
}StudentNode;

typedef struct {
    StudentNode *head;
    StudentNode *tail;
}Queue; 
```

以下是我尝试过的。

```
class StudentInfo{
int age;
int dateOfBirth;
}

class StudentNode{
StudentInfo studentPtr;
StudentNode next;
}

class Queue{
StudentNode head;
StudentNode tail
} 
```

还有另一种方法吗？不为此创建 2 个额外的类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T01:49:46.673

而不是 StudentNode 和 Queue 你可以使用

```
ArrayList<StudentInfo> studentList; 
```

Bur 首先阅读 java Collections 的介绍

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T01:50:34.890

您可以从加入 StudentNode 和 StudentInfo 类开始，这样您就有：

```
class StudentNode {
    int age
    int dateOfBirth
    StudentNode next
} 
```

当然，这意味着知道学生信息的对象也知道列表，这可能不是很理想。或者，您可以只使用 LinkedList 类：

```
LinkedList<StudentInfo> queue = new LinkedList<>(); 
```

这样就摆脱了他们两个...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T03:34:46.890

我的理解是，您要做的是创建一个 StudentNode 队列，其中每个 StudentNode 具有保存数据 (StudentInfo) 的属性和对队列中下一个项目的引用。

[这是一个很好的链接](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Queue.html)，开始讨论 Java 中的 Queue 接口。

AlexWien 和 Jeff 正在讨论 LinkedLists 与 ArrayLists，[通过此链接有一个很好的 stackoverflow 解释](https://stackoverflow.com/questions/322715/when-to-use-linkedlist-over-arraylist)供您参考。

我的建议是从两个类开始：StudentQueue（实现 Queue 接口）和 StudentNode（就像您在示例中所做的那样）。通过这种方式，您可以利用您在 C 中了解的代码和概念并将它们应用于 Java，同时了解 Java 的集合之一。它将消除您的两个额外课程中的一个，并且它比直接跳入列表更容易开始。

# javascript - 循环播放一组带有动画的图像

> ID：13504769
> 
> 赞同：0
> 
> 时间：2012-11-22T01:43:25.127
> 
> 标签：javascript, jquery, html, css, jquery-animate

我已经为此工作了几个小时，并且不确定还能做什么。我有 5 张图像要在屏幕上旋转。如果您向下单击文本，图像将移动到正确的位置。但是，如果我再次单击它，图像会朝随机方向发射。我的问题是，我的代码有什么问题。或者更好的是，我做错了吗？有没有更简单的方法可以做到这一点，我看不到。我创建了一个工作 jsfiddle 示例[http://jsfiddle.net/2uPJP/13/](http://jsfiddle.net/2uPJP/13/)

相关js代码...

```
function convert () {

  var $hide1 = $(".hide1");

  var $hide2 = $(".hide2");

  var $hide3 = $(".hide3");

  var $hide4 = $(".hide4");

  var $hide5 = $(".hide5");

  $hide1.removeClass().addClass("hide2");

  $hide2.removeClass().addClass("hide3");

  $hide3.removeClass().addClass("hide4");

  $hide4.removeClass().addClass("hide5");

  $hide5.removeClass().addClass("hide1");

}

$(document).ready(function() {

  $('.hide1').animate({
    top: '+=100',
    right: '+=100'  
  }, 1500);  

  $('.hide5').animate({
    bottom: '+=100',
    right: '+=100'   
  }, 1500);  

$('.down').click(function() {

  $('.hide1').animate({
    left: '+=100'  
  }, 1500);  

  $('.hide2').animate({
    top: '+=100'  
  }, 1500);  

  $('.hide3').animate({
    top: '+=100'  
  }, 1500);  

  $('.hide4').animate({
    right: '+=100'  
  }, 1500);  

  $('.hide5').animate({
    bottom: '+=200'  
  }, 1500);  

  setTimeout(convert, 1501);

});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:35:42.273

请看这个[http://jsfiddle.net/2uPJP/16/](http://jsfiddle.net/2uPJP/16/)，注意动画队列。在 1500 内单击两次时，您将动画附加到错误的项目动画队列

```
function convert() {
            var $hide1 = $(".hide1");

            var $hide2 = $(".hide2");

            var $hide3 = $(".hide3");

            var $hide4 = $(".hide4");

            var $hide5 = $(".hide5");

            $hide1.removeClass("hide1").addClass("hide2");

            $hide2.removeClass("hide2").addClass("hide3");

            $hide3.removeClass("hide3").addClass("hide4");

            $hide4.removeClass("hide4").addClass("hide5");

            $hide5.removeClass("hide5").addClass("hide1");

        }
        $(document).ready(function () {

            $('.hide1').animate({
                top: '+=100',
                left: '-=100'
            }, 1500);

            $('.hide5').animate({
                top: '-=100',
                left: '-=100'
            }, 1500);

            $('.down').click(function () {
                convert()
                $('.hide2').animate({
                    left: '+=100'
                }, 1500);

                $('.hide3').animate({
                    top: '+=100'
                }, 1500);

                $('.hide4').animate({
                    top: '+=100'
                }, 1500);

                $('.hide5').animate({
                    left: '-=100'
                }, 1500);

                $('.hide1').animate({
                    top: '-=200'
                }, 1500);
            });

        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T03:14:06.293

`top`我将通过基于相同参考（例如和）设置所有位置来以完全不同的方式处理此问题`right`。然后，我将旋转包含动画位置的数组，以及速度和延迟等选项，并使用单个动画函数来移动每个图像。

```
var positions = [ /*[ top,right]*/
     [100, 100], [100, 0], [200, 0], [300, 0], [300, 100]
 ];

var animOpts=[/* delay, speed*/
    [300,1500],[0,1500],[0,1500],[300,1500],[0,2000]
  ]

var $fish;

$(document).ready(function() {

    $fish = $('.span2 img');
    /* move 1st and 5th on page load */
    fishAnim(0);
    fishAnim(4);

    $('.down').click(function() {
        rotateAllfish();
    });

});

function shuffleArray( arr){ 
    /* move element in first position to end of array */
    arr.push( arr.shift());
}

function rotateAllfish() {    
    shuffleArray( positions );

    $fish.each(function(fishIndex) {
        fishAnim(fishIndex, true)
    });

     shuffleArray(animOpts);

}

function fishAnim(fishIndex, addDelay) {
    var delay= addDelay ? animOpts[fishIndex][0] : 0;
    $fish.eq(fishIndex).delay( delay ).animate({
        top: positions[fishIndex][0],
        right: positions[fishIndex][1]
    }, animOpts[fishIndex][1]);
} 
```

演示：http: [//jsfiddle.net/2uPJP/19/](http://jsfiddle.net/2uPJP/19/)

演示仅是手动模式

# ember.js - 如何从使用`createElement`创建的子视图访问父属性

> ID：13504771
> 
> 赞同：0
> 
> 时间：2012-11-22T01:44:01.830
> 
> 标签：ember.js

[我在此处](https://stackoverflow.com/questions/10762484/ember-js-html5-drag-and-drop-shopping-cart-demo)的解决方案之后创建了一个支持拖放的视图。现在我正在尝试根据每个视图自己的内容设置拖动图像。这是我遇到问题的部分代码的咖啡脚本：

```
App.BlockView = Ember.View.extend(App.Draggable, {
  classNames: ['block'],
  mouseDown: ->
    console.log "clicked on #{@get 'elementId'} block and thumbnail is #{@get 'block.thumbnail'}" #this works
  ,
  dragIconElement: Em.View.create({
    attributeBindings: ['src'],
    tagName: 'img',
    #src: @get 'block.thumbnail', #this does not work
    src: @get 'parentView.block.thumbnail', #this does not work either
  }).createElement().get('element')
  ...
}) 
```

如您所见，我尝试[了此解决方案](https://stackoverflow.com/questions/9279696/how-to-get-property-of-parent-view-in-ember)，但没有成功。这是我在上述两种情况下得到的错误：

```
TypeError: this.get is not a function
src: this.get('parentView.block.thumbnail') 
```

我正在使用 Ember 1.0pre1 我不知道如何在此处访问父级范围，并且我可能在这里缺少一些基本的东西。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:20:58.810

这不是因为`createElement`at `src: @get 'parentView.block.thumbnail'`，这里`this`不指向当前视图（我猜它是指窗口对象，取决于你的代码），最好将它用作计算属性

```
src: (->
  @get 'parentView.block.thumbnail'
).property() 
```

# c - 从文件中读取矩阵并计算行列式（在 C 中）

> ID：13504777
> 
> 赞同：1
> 
> 时间：2012-11-22T01:45:00.757
> 
> 标签：c, matrix

因此，我编写了一些代码来从文件中获取矩阵，将其放入数组并计算其行列式。然而，在运行时，数组似乎没有被填充，程序返回一个 0 矩阵，因此行列式 = 0。我对编程很陌生，所以很难确定确切的原因，但我认为这是与从文件过程中读取的整个过程有关。

该文件只是一个 .data 文件，矩阵元素存储在空格分隔的列中，即：

1.7 1.2 0.5
0.0 -3.2 1.4
3.0 4.0 5.0

这是（我认为是）相关的代码部分，但如果有帮助，我可以发布整个内容。

```
int main(int argc, char* argv[])
{
    FILE          *input;
    int           record, i, j;
    int           curr_col;
    const int     dim = DIMENSION;
    double        entries[dim][dim];
    double        tmp, determinant;
    const char    inp_fn[]="matrix.data";

    /* Open file */
    input = fopen(inp_fn, "r");

    /* Check the pointer to file are not NULL */
    if(input != (FILE*) NULL)
    {
        for(j=0; j<dim; j++, fopen(inp_fn, "r"))
        {
            record = 0; i = 0;
            /* Read in records one by one and check the return value of fscanf */
            while(fscanf(input,"%lf",&tmp) == 1)
            {
                curr_col = (record % dim);
                if(curr_col==j)
                {
                    /* Copy data points to the array */
                    entries[i][j] = (double)(tmp);
                    i++;
                }
                record++;
            }
            fclose(input);
        }
    }
    else
        printf("*** Could not open input or output file! ***\n");

    /* Calculates determinant */
    determinant = det(dim, entries);

    printf("\nA = \n");
    for(i=0; i<dim; i++)
    {
        for(j=0; j<dim; j++)
        {
            printf("%.1lf ", entries[i][j]);
        }
        printf("\n");
    }
    printf("\n");

    printf("det(A) = %.3lf\n", determinant);

} 
```

我得到“无法打开输入或输出文件！” 运行程序时出现错误和空矩阵...帮助！？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:17:43.957

**肮脏的修复**

从您的代码中，我看到您每次阅读不同专栏时都打算打开文件。它效率低下且笨重。您可以通过更改使其工作（仅读取输入部分，我不知道您的其余代码）：

```
for(j=0; j<dim; j++, fopen(inp_fn, "r")) 
```

到

```
for(j=0; j<dim; j++, input = fopen(inp_fn, "r")) 
```

您当前的代码将打开文件并浪费资源，同时`fclose`会遇到错误，因为文件在`input`上一次迭代中已关闭。

我上面建议的代码将分配新`FILE*`的 from `fopen`to `input`。

当然，上面的方式效率非常低，正如我在开始时指出的那样。

* * *

**更好的方法**

一个更好的方法，在 if 语句中`if(input != (FILE*) NULL)`（用 删除循环`j`）：

```
record = 0;
// Read the file at most (dim * dim) times to fill up the array
// The reading also stops when it cannot read any double number
while(fscanf(input,"%lf",&tmp) == 1 && record < dim * dim)
{
    // Use some math to calculate the cell to put the new entry
    entries[record / dim][record % dim] = tmp; // entries and tmp are double, no need for casting

    record++;
}

// Close the file after done reading
fclose(input); 
```

请注意，`fopen`在进入条件之前只调用一次`if`，并且一次读取所有内容。

您可能还想在阅读后添加检查以确保`record == dim * dim`- 以防提供的数据不够。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T01:50:21.070

尝试`perror("fopen");`在打开失败时使用打印错误而不是 printf

另外，请注意，您每次都在 for 循环中重新打开文件。

改变

```
for(j=0; j<dim; j++, fopen(inp_fn, "r")) 
```

到

```
for(j=0; j<dim; j++) 
```

# android - 我看不到我的布局（Monodroid + MS Visual Studio 2010）

> ID：13504778
> 
> 赞同：1
> 
> 时间：2012-11-22T01:45:04.313
> 
> 标签：android, user-interface, xamarin.android

我正在使用 TCP 侦听器制作一个非常简单的软件，它（直到现在）只接收来自用 ASCII 编码的 TCP 客户端的消息，我将不得不对我仍然不知道的 UI 做一些事情，但现在，我只是想在三星 Galaxy Tab 上显示带有此消息的 AlertDialog。

问题是，我相信由于某种原因 setContentView 不起作用。我有一个带有AbsoluteLayout的.axml（布局）文件，我在代码上调用这个AbsoluteLayout，改变它的颜色，并试图在屏幕上显示这个AbsoluteLayout（改变它的颜色），但问题是我只是看到常规的黑屏。

我开始调试代码，我可以在 MS VS 2010 的输出上看到所有的 Console.Writeline 命令，甚至是客户端发送的消息。但我看不到布局和 AlertDialog。

有谁能够帮我？提前致谢。

```
using System;
using Android.App;
using Android.Content;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.OS;
using System.Net;
using System.Net.Sockets;
using System.Threading;
using Android.Graphics.Drawables;
using System.Drawing;

namespace Gafisa.Automacao.VideoWall.Listener
{
    [Activity(Label = "Listener", MainLauncher = true, Icon = "@drawable/icon")]
    public class Activity1 : Activity
    {
        protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        SetContentView(Resource.Layout.Main);
        AbsoluteLayout abs = FindViewById<AbsoluteLayout>(Resource.Id.abslayout);
        abs.SetBackgroundColor(new Android.Graphics.Color(125,125,125,125));
        //ImageButton btn = new ImageButton(this);
        //var lp = new AbsoluteLayout.LayoutParams(50, 50, 200, 200);
        //btn.LayoutParameters = lp;
        //BitmapDrawable dd = new BitmapDrawable("/mnt/sdcard/1.png");
        //btn.SetBackgroundDrawable(dd);
        //abs.AddView(btn);

        System.Net.Sockets.TcpListener listener = null;
        byte[] rcvBuffer = new byte[40];
        int bytesRcvd;

        try
        {
            listener = new System.Net.Sockets.TcpListener(IPAddress.Any, 13000);
            listener.Start();
            Console.WriteLine("Listener iniciado");
        }
        catch (SocketException se)
        {
            Console.WriteLine("Erro ao iniciar o listener: " + se.Message);
        }

        for (;;)
        {
            TcpClient client = null;
            NetworkStream netStream = null;
            try
            {
                client = listener.AcceptTcpClient();
                netStream = client.GetStream();
                int totalBytesEchoed = 0;
                while ((bytesRcvd = netStream.Read(rcvBuffer, 0, rcvBuffer.Length)) > 0)
                {
                    netStream.Write(rcvBuffer, 0, bytesRcvd);
                    totalBytesEchoed += bytesRcvd;
                }
                string recebido = System.Text.Encoding.ASCII.GetString(rcvBuffer);
                Console.WriteLine(recebido);

                AlertDialog.Builder alert = new AlertDialog.Builder(this);
                alert.SetMessage(recebido);
                alert.SetTitle("Mensagem Recebida");
                alert.Show();
                Console.WriteLine("echoed {0} bytes.", totalBytesEchoed);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                Console.WriteLine("Erro no LOOP");
            }
            finally
            {
                netStream.Close();
                client.Close();
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:50:19.360

将其更改为

```
 Task.Factory.StartNew(() => 
 {
   for (;;)
        {
            TcpClient client = null;
            NetworkStream netStream = null;
            try
            {
                client = listener.AcceptTcpClient();
                netStream = client.GetStream();
                int totalBytesEchoed = 0;
                while ((bytesRcvd = netStream.Read(rcvBuffer, 0, rcvBuffer.Length)) > 0)
                {
                    netStream.Write(rcvBuffer, 0, bytesRcvd);
                    totalBytesEchoed += bytesRcvd;
                }
                string recebido = System.Text.Encoding.ASCII.GetString(rcvBuffer);
                Console.WriteLine(recebido);
                RunOnUiThread(() =>
                {
                   AlertDialog.Builder alert = new AlertDialog.Builder(this);
                   alert.SetMessage(recebido);
                   alert.SetTitle("Mensagem Recebida");
                   alert.Show();
                }
                Console.WriteLine("echoed {0} bytes.", totalBytesEchoed);
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                Console.WriteLine("Erro no LOOP");
            }
            finally
            {
                netStream.Close();
                client.Close();
            }
        }
    } 
```

同样使用 Mono for Android (Xamarin.Android)，您应该使用`Log.Info(string tag, string message)`where tag 是调用类的名称。不要使用`Console.WriteLine(string)`. 您还可以使用`Log.Warn(string, string)`和`Log.Error(string, string)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:18:09.563

通过在此函数中运行无限循环`OnCreate`，您可以防止 UI 框架完成渲染。这就是为什么你看到的只是黑屏。

您应该异步运行非 UI 代码（在单独的线程中）。

# html - 如何在 Firefox 中正确呈现 @font-face？

> ID：13504780
> 
> 赞同：3
> 
> 时间：2012-11-22T01:45:35.610
> 
> 标签：html, css, font-face, webfonts

我正在尝试将@font-face 用于 Chrome、Safari、Firefox 和 IE。对于 IE，我什至不知道该怎么做，但对于其他浏览器，我希望 @font-face 部分工作。

这是我用过的：

```
 @font-face {
  font-family: "Handwriter";
  src: url("/folder/Font-Regular.otf");
  } 
```

然后我也尝试了：

```
 @font-face {
 font-family: "Handwriter";
 src: url("http://www.domain.com/folder/Font-Regular.otf");
 } 
```

使用其中任何一个都可以在 Chrome 和 Safari 中正确呈现它，但在 Firefox 中则不行。有趣的是，如果我使用 Firebug 并转到 CSS 文件并再次重写名称，那么它会呈现它。此外，字体文件在我的服务器上，我在同一个域上渲染它。所以不确定这里出了什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T08:16:19.300

试试这个（使用您的自定义字体）。记住格式很重要：

```
@font-face {
  font-family: 'WebFont';
  src: url('myfont.woff') format('woff'),  /* Firefox 3.6+, IE9+, Chrome 6+, Safari 5.1+*/
       url('myfont.ttf') format('truetype');  /* Safari 3—5, Chrome4+, Firefox 3.5, Opera 10+ */
} 
```

来源：[css3please](http://css3please.com/ "css3请")

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T17:11:27.090

这不是广告 :D

我成功地使用了[http://www.fontsquirrel.com/fontface](http://www.fontsquirrel.com/fontface)生成器 :) 如果你有 z ttf 文件，剩下的就是小菜一碟 :)

# android - android中对话框内的自定义ListView

> ID：13504781
> 
> 赞同：0
> 
> 时间：2012-11-22T01:45:36.843
> 
> 标签：android, listview, android-listview

我正在尝试使用列表视图创建一个自定义对话框，该对话框将包含复选框和文本视图，我只是找不到合理的教程来完成它，任何帮助或提示将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T03:33:03.530

```
private void showPopUp()
{
    final AlertDialog.Builder helpBuilder = new AlertDialog.Builder(this);
    helpBuilder.setTitle("");

    LayoutInflater inflater = getLayoutInflater();
    final View PopupLayout = inflater.inflate(R.layout.yourxml, null);
    helpBuilder.setView(PopupLayout);

    final AlertDialog helpDialog = helpBuilder.create();
    helpDialog.show();

    jobList         =   (ListView)PopupLayout.findViewById(R.id.list);

    mylist          =   new ArrayList<HashMap<String, String>>();

    for(int i=0;i<arraylist.size();i++)
    {
        map = new HashMap<String, String>();
        map.put("name", arraylist.get(i));
        mylist.add(map);
    }
    sd = new SimpleAdapter(activity.this,mylist,R.layout.jobslist,
                new String[]{"name"},new int[]{R.id.jobText});
    jobList.setAdapter(sd);

} 
```

**工作清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android" 
android:id="@+id/lin01"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="#fff"
android:padding="10dp"
android:orientation="horizontal">

        <TextView
            android:id="@+id/jobText"
            android:layout_width="0dp"
            android:text="@string/jobtype"
            android:layout_weight="1"
            android:gravity="left|center_vertical"
            android:layout_marginLeft="10dp"
            android:textSize="25dp"
            android:textColor="#000"
            android:layout_height="50dp"/>

        <CheckBox 
            android:id="@+id/chk"
            android:layout_width="wrap_content"
            android:text=""
            android:gravity="center_vertical|right"
            android:layout_height="wrap_content"/>

        </LinearLayout> 
```

`showPopUp();`你可以在任何你想用 listview 显示警告对话框的地方调用这个函数。请注意，将有一个数组列表，您可以向其中添加项目以显示列表中的项目

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T01:59:26.277

```
 ListView myList = new ListView(Activity.this);
    myList.setAdapter(adapter);

    AlertDialog.Builder builder = new AlertDialog.Builder(Activity.this);
    builder.setView(myList);
    Dialog d = builder.create();
    d.show(); 
```

您可以在适配器中指定文本视图和复选框以及其他任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T02:45:35.937

听起来您正在寻找的是 ListView 的多项选择模式。如果不知道这个短语，很难找到一个很好的例子，但这[是另一个 SO 问题，其答案可能会对您有所帮助。](https://stackoverflow.com/questions/5458989/android-listview-multiple-choice)

（在对话框中执行此操作与所选答案示例中的过程基本相同。）

# syntax - SML| 用 if 折叠

> ID：13504784
> 
> 赞同：1
> 
> 时间：2012-11-22T01:45:48.790
> 
> 标签：syntax, functional-programming, sml, fold

我正在做这个练习，它要求计算布尔列表中有多少值是真的。

我输入了这个：

```
fun countt xs = foldl (fn (x,y) => if x=true then y=y+1) 0 xs; 
```

这显然是错误的。我收到以下错误：

```
stdIn:54.21-54.24 Error: syntax error: deleting  RPAREN INT0 
```

现在，我搜索了一下，发现 RPAREN 是一个语法错误。但我无法弄清楚为什么首先会出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:12:47.813

在函数式编程语言中，if 表达式必须同时具有 then 分支和 else 分支（并且它们必须具有相同的类型）。你的 if 表达式只有一个 then 分支。

此外，`x=true`始终评估为相同的值，`x`因此您可以编写`if x then ... else ...`.

最后，看起来您正在尝试在 then 分支中编写作业。请记住， foldl 通过在`y`遍历列表时重复将累加器 () 传递给函数来工作`xs`。所以如果你想更新累加器，你所要做的就是返回更新后的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-29T18:49:38.787

只是为了补充前面的答案，这里是建议的修改：

```
fun countt xs = foldl (fn (x,acc) => if x then acc+1 else acc) 0 xs; 
```

# ruby-on-rails - Cucumber：在编写方法和类之前或之后编写步骤定义是最佳实践吗？

> ID：13504786
> 
> 赞同：1
> 
> 时间：2012-11-22T01:46:18.153
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, cucumber, bdd

使用 BDD 编写 ruby​​ (& ror) 应用程序时，是否应该在创建模型、视图和控制器之前编写步骤定义，以节省最大的麻烦？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:39:33.677

是的，你应该——这分别是 BDD 和 TDD 的主要思想。红色 - 绿色 - 重构。首先从您的功能开始（例如，在此处使用[Cucumber](http://cukes.info/)），然后编写步骤定义，最后编写代码。

[RSepc Book](http://pragprog.com/book/achbd/the-rspec-book)是一本很好的读物，可以捕捉到整个事情。请看第 29 页上的图 1.1 BDD 循环。这为您提供了有关如何处理 BDD 和 TDD 的一个很好的概述，并且还有一些很好的示例。

# jquery - jQuery 在 Google Chrome 扩展中的使用

> ID：13504787
> 
> 赞同：2
> 
> 时间：2012-11-22T01:46:20.903
> 
> 标签：jquery, google-chrome-extension, content-security-policy

我正在创建一个遵循清单 2 准则的 Chrome 扩展程序。我已经为此工作了几个小时，但无法弄清楚如何让 jquery 在网页内运行，以便我可以使用它来为页面上的元素设置动画。（具体使用slideUp()函数）

这是 manifest.json

```
"manifest_version": 2,
  "icons": {
    "16": "images/16.png",
    "25": "images/25.png",
    "32": "images/32.png",
    "48": "images/48.png",
    "128": "images/128.png"
  },
  "background": {
    "scripts": ["js/main.js", "js/jquery.min.js"]
  },
  "options_page": "options/options.html",
  "permissions": [
    "tabs",
    "unlimitedStorage",
    "https://maps.google.com/*",
    "https://maps.googleapis.com/*"
  ],
  "page_action": {
      "default_name": "Fullscreen",
      "default_icon": "images/128.png"
  } 
```

这是 main.js

```
// Called when the url of a tab changes.
function checkForValidUrl(tabId, changeInfo, tab) {
  // If the letter 'g' is found in the tab's URL...
  if (tab.url.indexOf('maps') > -1 && tab.url.indexOf('google') > -1) {
    // ... show the page action.
    chrome.pageAction.show(tabId);
  }
};

// Listen for any changes to the URL of any tab.
chrome.tabs.onUpdated.addListener(checkForValidUrl);

chrome.pageAction.onClicked.addListener(function(tab) {
    chrome.tabs.executeScript(tab.id, {code: "document.getElementById('paneltoggle2').click(); $('gb').slideUp();"});
}); 
```

这是options.html

```
<html>
<head><title>My Test Extension Options</title></head>
<script src="options.js"></script>

<body>

Favorite Color:
<select id="color">
 <option value="red">red</option>
 <option value="green">green</option>
 <option value="blue">blue</option>
 <option value="yellow">yellow</option>
</select>

<br>
<div id="status"></div>
<button id="save" onclick="save_options();">Save</button>
</body>
</html> 
```

这是options.js：

```
// Saves options to localStorage.
function save_options() {
  var select = document.getElementById("color");
  var color = select.children[select.selectedIndex].value;
  localStorage["favorite_color"] = color;

  // Update status to let user know options were saved.
  var status = document.getElementById("status");
  status.innerHTML = "Options Saved.";
  setTimeout(function() {
    status.innerHTML = "";
  }, 750);
}

// Restores select box state to saved value from localStorage.
function restore_options() {
  var favorite = localStorage["favorite_color"];
  if (!favorite) {
    return;
  }
  var select = document.getElementById("color");
  for (var i = 0; i < select.children.length; i++) {
    var child = select.children[i];
    if (child.value == favorite) {
      child.selected = "true";
      break;
    }
  }
}
document.addEventListener('DOMContentLoaded', restore_options);
document.querySelector('#save').addEventListener('click', save_options);

function insert() {
  $('#gb').after("<div id='hideGB' style='background: #DEDEDE; display:inline-block; border-bottom-left-radius:3px; border-bottom-right-radius:3px; padding:1px 10px 1px 10px; cursor:hand;'><div style='direction: ltr; text-align: left; height: 21px; overflow: hidden; vertical-align: middle; width: 21px; position: relative; display: inline-block;'><div id='hideGBimg' style='left: 0; top: -1329px; height: 2334px; position: absolute; width: 42px; content: url(http://ssl.gstatic.com/docs/common/jfk_sprite70.png);'>&nbsp;</div></div></div>");
  document.querySelector('#hideGB').addEventListener('click', change_hicon);
}
function change_hicon() {
  if (document.getElementById('hideGBimg').style.top == '-1329px') {
    document.getElementById('hideGBimg').style.top = '-1168px';
  }
  else if (document.getElementById('hideGBimg').style.top == '-1168px') {
    document.getElementById('hideGBimg').style.top = '-1329px';
  }
}

document.addEventListener('DOMContentLoaded', insert); 
```

这是我得到的错误：

```
Refused to execute inline script because it violates the following Content Security Policy directive: "script-src 'self' chrome-extension-resource:". 
```

非常感谢您的时间和帮助，

莱纳多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T01:55:11.830

您不能按照[https://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution](https://developer.chrome.com/extensions/contentSecurityPolicy.html#JSExecution)使用内联脚本。

如果用 options.html 编写，你能消除内联脚本吗？

还添加

```
"content_scripts": [
    {
      "matches": ["http://www.someurl.com/*"],
      "js": ["jquery.min.js","myscript.js"]
    }
  ] 
```

到您的 manifest.json 并编写您的注入代码以在 myscript.js 的当前页面执行

# java - 在网页上创建 Derby 数据库

> ID：13504790
> 
> 赞同：0
> 
> 时间：2012-11-22T01:46:27.370
> 
> 标签：java, database, applet, webpage, derby

我有一个**Java Applet ，它显示来自****Derby**数据库的 2D 表数据。我也在使用**Netbeans**。我想在网页上使用这个应用程序。我已将 html 文档和所有 .class 文件上传到服务器上的正确目录中。剩下的就是访问数据库。

我想使用 Embedded Derby，以便我的应用程序包含数据库（我对这一事实的理解是否正确？）。然后我应该能够将 html 和 jar/class 文件上传到服务器，我的应用程序将被部署。但是我对以下内容感到困惑：

1.  如何创建/设置数据库以驻留在网页上？
2.  我的连接字符串是什么？
3.  有没有更好的方法在 NetBeans 中完全做到这一点？

非常感谢所有帮助。让我知道我是否可以让我的问题更清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:17:27.323

您可以将 Derby 数据库本身打包到一个 JAR 文件中，作为 applet 的一部分，然后它将有效地成为 applet 的一部分，并在您下载 applet 时下载。

请参阅此相关问题：[Distributed a database made with JavaDB with Java program](https://stackoverflow.com/questions/3316315/distribute-a-database-made-with-javadb-with-java-program)

请注意，这将创建一个只读数据库。如果您确实需要从您的小程序更新您的数据库，您将需要一个更复杂的方法（例如，将初始数据打包到小程序中，然后当小程序启动时，请求访问工作站上的本地存储并创建可写那里的数据库）。

有关构建和部署 database-in-a-jar 的完整文档，请参阅文档：http: [//db.apache.org/derby/docs/10.9/devguide/cdevdeploy15325.html](http://db.apache.org/derby/docs/10.9/devguide/cdevdeploy15325.html)

# java - 遍历 JEditorPane

> ID：13504791
> 
> 赞同：0
> 
> 时间：2012-11-22T01:46:37.780
> 
> 标签：java, swing, document, jeditorpane

在 a`JEditorPane`中，我想搜索一个字符串，我知道这`scrollToReference`不起作用，所以我想知道如何遍历窗格并找到指定的字符串。

java -如何遍历a`JEditorPane`以在java中查找指定的String？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T01:51:34.413

我能想到的最简单的方法就是浏览文档。

```
Document document = editor.getDocument();
try {
    String find = //... String to find
    for (int index = 0; index + find.length() < document.getLength(); index++) {
        String match = document.getText(index, find.length());
        if (find.equals(match)) {
            // You found me
        }
    }
} catch (BadLocationException ex) {
    ex.printStackTrace();
} 
```

您可以围绕这个概念编写一些例程来“找到下一个单词”

您还可以[在 JEditorPane](https://stackoverflow.com/questions/13448558/highlight-a-word-in-jeditorpane/13449000#13449000)和[Java 中找到突出显示单词 - 滚动到 JTextArea 中的特定文本，](https://stackoverflow.com/questions/13437865/java-scroll-to-specific-text-inside-jtextarea/13438455#13438455)它们都使用类似的方法来实现不同的事情

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T01:55:38.550

扩展@Mad 的[答案](https://stackoverflow.com/a/13504827/230513)，如果您`Document`是`HTMLDocument`，您可以使用 来探索它，如此[处](https://stackoverflow.com/a/2883413/230513)`ElementIterator`所示。

# c# - 获取可绘制资源

> ID：13504793
> 
> 赞同：8
> 
> 时间：2012-11-22T01:46:41.490
> 
> 标签：c#, android, xamarin.android, drawable, android-resources

我正在为 Android 使用 MonoDevelop，我正在尝试从资源文件夹中的图像创建一个 Drawable 变量。

我的 Resources\drawable 文件夹中有以下文件：

```
Icon.png
monkey.png
monkeyPurple.png 
```

如何创建具有从这些文件之一获得的图像的 Drawable 变量？

我尝试了以下代码：

```
Drawable icon = Drawable.CreateFromPath("Icon.png"); 
```

然而，这不起作用。如果这是从文件加载图像的正确方法，我是否需要完整的文件名和文件路径？我尝试了许多组合来访问图像，但没有运气。

我还尝试了以下方法：

```
Drawable icon = R.getResources().getDrawable(R.drawable.Icon); 
Drawable icon = R.getResources().getDrawable(R.drawable.monkey); 
```

也没有运气。

我可以在正确创建具有资源文件夹中图像的 Drawable 变量方面提供一些帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T03:28:09.667

你非常接近，但我认为你正在混合 Java 和 C#。

您可以使用该`Resource`结构访问它。我已将 Mono for Android 和 Java 版本放在下面以供参考，但在您的情况下，如果您使用 Mono for Android，则需要 C# 版本。

**适用于 Android 的 Mono (C#)**

```
Drawable icon = Resources.GetDrawable(Resource.Drawable.Icon); 
```

**安卓 SDK (Java)**

```
Resources res = getResources();
Drawable icon = res.getDrawable(R.drawable.Icon); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-25T17:29:45.970

从 Android **API**版本**21**开始，旧方法已被弃用并替换为以下内容：

```
Drawable icon = ResourcesCompat.GetDrawable(Resources, Resource.Drawable.Icon, null); 
```

有关更多详细信息，请查看原始[Android 答案](https://stackoverflow.com/questions/29041027/android-getresources-getdrawable-deprecated-api-22#answer-29146895)

# java - 在 Eclipse 中并行运行 JUnit 参数化测试

> ID：13504796
> 
> 赞同：9
> 
> 时间：2012-11-22T01:47:02.207
> 
> 标签：java, eclipse, junit

我想知道在定义参数化测试时是否可以以编程方式并行运行 JUnit 测试。我们的想法是能够像在 Eclipse 中一样运行常规 JUnit 测试。

我当前的代码类似于：

```
@RunWith(Parameterized.class)
public class JUnitDivideClassTests {

    @Parameters
    public static Collection<Object[]> data() {

        return Arrays.asList(new Object[][] { { 12, 3, 4 }, { 12, 2, 6}, { 12, 4, 3 }});
    }

    private int n;
    private int d;
    private int q;

    public JUnitDivideClassTests(int n, int d, int q) {

        this.n = n;
        this.d = d;
        this.q = q;
    }

    @Test
    public void test() {

        Assert.assertEquals(q, n / d);
    }
} 
```

如发现@ [http://codemadesimple.wordpress.com/2012/01/17/paramtest_with_junit/](http://codemadesimple.wordpress.com/2012/01/17/paramtest_with_junit/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-23T03:14:10.353

经过一番搜索，我发现我只需要实现（或者更确切地说，使用）以下代码：

```
public class ParallelizedParameterized extends Parameterized {
    private static class ThreadPoolScheduler implements RunnerScheduler {
        private ExecutorService executor; 

        public ThreadPoolScheduler() {
            String threads = System.getProperty("junit.parallel.threads", "16");
            int numThreads = Integer.parseInt(threads);
            executor = Executors.newFixedThreadPool(numThreads);
        }

        @Override
        public void finished() {
            executor.shutdown();
            try {
                executor.awaitTermination(10, TimeUnit.MINUTES);
            } catch (InterruptedException exc) {
                throw new RuntimeException(exc);
            }
        }

        @Override
        public void schedule(Runnable childStatement) {
            executor.submit(childStatement);
        }
    }

    public ParallelizedParameterized(Class klass) throws Throwable {
        super(klass);
        setScheduler(new ThreadPoolScheduler());
    }
} 
```

@ [http://hwellmann.blogspot.pt/2009/12/running-parameterized-junit-tests-in.html](http://hwellmann.blogspot.pt/2009/12/running-parameterized-junit-tests-in.html)

# c# - 遍历每个 Enum 值需要并行化

> ID：13504797
> 
> 赞同：3
> 
> 时间：2012-11-22T01:47:10.833
> 
> 标签：c#, .net, enums, task-parallel-library

我在并行调用中做错了什么？

```
static void Main(string[] args)
{
    TasteAll<HotCupOf>(TurnCoffeeVenMachineOn);
}

public static void TasteAll<Mode>(Action<Mode> Make)
{
    foreach (Mode mode in Enum.GetValues(typeof(Mode)))
    {
        Task.Factory.StartNew(() => Make(mode) );
        //Make(mode); //<-- Works Fine with normal call
    }
    Console.ReadLine();
}

enum HotCupOf
{
    Black,
    Latte,
    Cappuccino,
    Mocha,
    Americano,
    Espresso,
    Chocolate,
    Tea
}

public static void TurnCoffeeVenMachineOn(HotCupOf SelectedDrink)
{
    Console.WriteLine(SelectedDrink);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T01:54:49.373

你已经关闭了一个循环变量。您开始的每个任务都有一个对相同封闭变量的引用，该变量在您迭代集合时会发生变化。

你需要这样的东西：

```
public static void TasteAll<Mode>(Action<Mode> Make)
{
        foreach (Mode mode in Enum.GetValues(typeof(Mode)))
        {
            Mode localMode = mode;
            Task.Factory.StartNew(() => Make(localMode) );
            //Make(mode); //<-- Works Fine with normal call
        }
    Console.ReadLine();
} 
```

在 C# 5 中，循环变量现在在语义上位于循环块内部，因此这是不必要的。有关其他讨论，请参阅 Eric Lippert 的[博客](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-19T22:09:04.697

一个例子：

```
 enum Gender{
        male,
        female
    }        

    Parallel.ForEach((Gender[])Enum.GetValues(typeof(Gender)), gender=>
                {
                    Console.WriteLine(gender.ToString()) // example: code goes here
                }); 
```

含义：对于每个 Gender 性别，在 { } 之间异步执行代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:37:43.953

如果您希望循环阻塞，您也可以考虑使用`Parallel.ForEach`这个问题。`Task`它使用 Partitioner 将您的集合分配到工作项中，然后以比为每次迭代创建新的方式更有效地执行它们。这确实取决于您的`Make`调用量以及迭代次数越多越好。

```
public static void TasteAll<Mode>(Action<Mode> Make)
{
        Parallel.ForEach(Enum.GetValues(typeof(Mode)), mode =>
        {
            Mode localMode = mode;
            Make(mode);
        });

    Console.ReadLine();
} 
```

# ruby - 模糊匹配，找到 10 个匹配 xpath "//html/body/div/div/div[3]/div[2]/div/div/div/a[2]" 的元素 (Capybara::Ambiguous)

> ID：13504801
> 
> 赞同：-4
> 
> 时间：2012-11-22T01:47:59.243
> 
> 标签：ruby, cucumber, capybara

我的项目在我更新 gems 之前运行良好，现在它开始给我一些 xpaths 的错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T02:12:31.190

我猜通过“更新宝石”，您将 Capybara 升级到 2.0。这需要更具体的匹配，如Jonas Nicklas的[公告中所述：](https://groups.google.com/forum/#!topic/ruby-capybara/C0O7nP2YG1A)

> `click_link`当通过和等方法查找元素并与之交互时`fill_in`，如果匹配的元素不止一个，之前 Capybara 会尝试猜测您指的是哪一个。从现在开始，Capybara 将改为引发异常。例如，如果您有两个名为“密码”和“密码确认”的字段，`fill_in "Password", :with => "test"`则会引发异常。

简单的解决方案是通过使用 CSS 类/ID 或更具体的 XPath 而不是文本标签来使您的选择器[更具体。](http://techblog.fundinggates.com/blog/2012/08/capybara-2-0-upgrade-guide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:37:32.450

//html/body/div/div/div[3]/div[2]/div/div/div/a[2] 是你通常从使用 firebug 获得的非常糟糕的 xpath。总共有 10 个正斜杠，非常脆弱。确实，有时开发人员会忽略 ID（并随机使用 css 类），但如果是这种情况，我建议让他们输入 ID。

这将让你从

```
//html/body/div/div/div[3]/div[2]/div/div/div/a[2] 
```

至

```
//a[@id='id_2'] 
```

容易得多，但它需要与开发人员密切的团队合作

我的建议是阅读以下文章：[http ://www.w3schools.com/xpath/xpath_syntax.asp](http://www.w3schools.com/xpath/xpath_syntax.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T14:23:36.193

例如：给定属性

Cucumber/capybara 使用标签，因此像这样更改其中一个标签的客户名称；

<%= f.label :password_confirmation, **"确认"** %>
<%= f.password_field :password_confirmation %>

# jquery - 即时更新 jQuery 函数

> ID：13504802
> 
> 赞同：-1
> 
> 时间：2012-11-22T01:48:19.040
> 
> 标签：jquery, html

我有这个代码：

```
function viewport() {
var height = $(window).height();
viewport = parseInt(height) + 'px';
$(".page").css('height',viewport);
$(".dot_page").css('height',viewport);
} 
```

它所做的只是根据视口高度调整 div 的大小。这种情况在页面加载期间发生一次，但如果在不重新加载页面的情况下调整视口大小（有人只是用鼠标调整浏览器的大小），我希望它能够动态更新。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:54:09.827

在窗口对象上使用[调整大小](http://api.jquery.com/resize/)事件

```
$(window).resize(function() {
  viewport();
}); 
```

您还应该更改您的功能，因为：

```
viewport = parseInt(height) + 'px'; 
```

重新分配视口变量，它最初是函数

```
var heightString = parseInt(height) + 'px'; 
```

有了这两个，它应该可以解决您的问题。

事件`resize`分配应该在`$(document).ready`调用中。

使用您的所有代码，这看起来像：

```
<script>
function viewport() {
  var height = $(window).height();
  var viewportHeight = parseInt(height) + 'px';
  $(".page").css('height',viewportHeight);
  $(".dot_page").css('height',viewportHeight);
}

$(document).ready(function() {
  viewport();
  $(window).bind('resize', viewport);

  $(".scroll").click(function(event){
    event.preventDefault();
    $('html,body').animate({scrollTop:$(this.hash).offset().top}, 1250);
  });

  $(".circle_col > a > img").hover(
  function() {
    $(this).stop().animate({"opacity": "0"}, 200);
    },
  function() {
    $(this).stop().animate({"opacity": "1"}, 200);
  });
});
</script> 
```

# gcc - cygwin gcc/g++ 编译器的 include、bin 和 lib 目录

> ID：13504803
> 
> 赞同：3
> 
> 时间：2012-11-22T01:48:21.647
> 
> 标签：gcc, include, cygwin, bin

我正在尝试在 Cygwin 上安装一个编程库，除了我不知道将库使用的包含、bin 和 lib 文件放在哪里之外，我拥有我需要的所有东西。我尝试查看 Cygwin 提供的帮助，但找不到目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T01:49:50.047

这取决于您使用的编译器。如果您使用的是标准的“gcc4”Cygwin 编译器，那么目录很简单

```
/usr/bin # C:\cygwin\bin
/usr/lib # C:\cygwin\lib
/usr/include # C:\cygwin\usr\include 
```

如果您使用其他编译器，它会有所不同。

```
/usr/i686-w64-mingw32/sys-root/mingw/bin
/usr/i686-w64-mingw32/sys-root/mingw/lib
/usr/i686-w64-mingw32/sys-root/mingw/include 
```

# c# - C# 反序列化动态 JSON

> ID：13504805
> 
> 赞同：3
> 
> 时间：2012-11-22T01:48:44.923
> 
> 标签：c#, json, visual-studio, parsing, deserialization

我有以下需要反序列化的 Json 字符串。

```
{"123456789":
  {"short_description":"Delivered",
     "detail_description":"Your item has been delivered"
   }
} 
```

第一个字段“123456789”是一个id号，所以基本上这个值可以根据查询的数据不同。

我在 Visual Studio 中使用 C#。显然，因为第一个字段的值可以更改，我不能使用预定义的类将 JSON 反序列化为，因为该字段将用作类名，但字段值与类名不匹配。

有没有办法将其反序列化为某种动态类，但仍像访问预定义类一样访问字段？

或者，即使类名不匹配，是否有办法将其反序列化为预定义类？

提供此数据的服务是第三方服务，因此我无法控制它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T02:08:39.653

这是我在生产代码中使用的一种方式。它可能并不完美，但它可以完成工作。

```
using using System.Web.Script.Serialization;

// .....

    public object GetJson(string url)
    {
        var json = Get(url); // I have code that makes this work, it gets a JSON string

        try
        {
            var deserializer = new JavaScriptSerializer();
            var result = deserializer.DeserializeObject(json);

            return result;
        }
        catch (ArgumentException e)
        {
            // Error handling....
        }            
    } 
```

您收到的对象将是通用 Map、List 或其他任何取决于 JSON 结构的对象。如果您知道预期的结构，这将非常有用，无需编写自定义解析器或目标对象类型。

然后，您可以枚举 Map 的键，例如，查找您的变化的键。然后，包装器或转换将为应用程序层的其余部分提供一致的 API。就像是：

```
public class Order {
     public string OrderNum { private set; get; }
     public string ShortDesc { private set; get; }
     public string Desc { private set; get; }

     public static Order FromJson(object jsonResult) 
     {
          var m = jsonResult as Map<string, object>;

          // Handle errors, but I am not

          var firstPair = m.First();

          var detail = firstPair.Value as Map<string, object>;

          var dummy = new Order()
          {
              OrderNum = firstPair.Key,
              ShortDesc = detail["short_description"].ToString();
              Desc = detail["detail_description"].ToString();
          }

          return dummy;
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T02:42:35.173

我喜欢上面的答案，所以我对其进行了一些重构。您需要参考`System.Web.Extensions.dll`和`System.Web.Script.Serialization`。

这是课程：

```
public class Order
{
    public string OrderNum { private set; get; }
    public string ShortDesc { private set; get; }
    public string Desc { private set; get; }

    public static Order FromJson(string jsonResult) 
    {
        JavaScriptSerializer js = new JavaScriptSerializer();
        // Should deserialize right to Dictionary<string, object>
        // var result = ((Dictionary<string, object>)js.Deserialize<dynamic>(jsonResult)).First();
        var result = js.Deserialize<Dictionary<string, object>>(jsonResult).First();
        var detail = (Dictionary<string, object>)result.Value;

        return new Order()
        {
            OrderNum = result.Key,
            ShortDesc = detail["short_description"].ToString(),
            Desc = detail["detail_description"].ToString()
        };
    }
} 
```

以及如何称呼它：

```
string json = "{\"123456789\": {\"short_description\":\"Delivered\", \"detail_description\":\"Your item has been delivered\" } }";
Order o = Order.FromJson(json); 
```

但是，您需要自己实现错误处理。

# c - 为什么我可以声明的最大二维数组大小是 248x248？

> ID：13504807
> 
> 赞同：5
> 
> 时间：2012-11-22T01:49:00.477
> 
> 标签：c, arrays, multidimensional-array, integer

我有一个程序问题，我想在 C 中声明一个 256x256 数组。不幸的是，每次我尝试声明一个该大小（整数）的数组并运行我的程序时，它都会意外终止。有什么建议么？我没有尝试过内存分配，因为我似乎无法理解它如何与多维数组一起工作（尽管我是 C 新手，但请随时指导我完成它）。另一个值得注意的有趣的事情是，我可以在 C 中声明一个 248x248 数组而没有任何问题，但不会更大。

```
dims = 256;  
int majormatrix[dims][dims]; 
```

编译：

```
gcc -msse2 -O3 -march=pentium4 -malign-double -funroll-loops -pipe -fomit-frame-pointer -W -Wall -o "SkyFall.exe" "SkyFall.c" 
```

我正在使用 SciTE 323（不确定如何检查 GCC 版本）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T02:02:00.587

在 C 语言中，您可以在三个地方分配数组：

*   在*自动*内存中（通常称为“上栈”）
*   在*动态*内存 ( `malloc`/ `free`) 中，或
*   在*静态*内存中（`static`关键字/全局空间）。

只有自动内存对分配量有一些严格的限制（即除了操作系统设置的限制之外）；动态和静态分配可能会占用几乎与操作系统为您的进程提供的空间一样多的空间。

查看是否是这种情况的最简单方法是将声明移到函数之外。这会将您的数组移动到静态内存。如果崩溃继续，它们与您的数组大小无关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:01:37.390

除非您运行的是非常旧的机器/编译器，否则没有理由应该太大。在我看来，问题出在其他地方。试试下面的代码，告诉我它是否有效：

```
#include <stdio.h>

int main()
{
  int ints[256][256], i, j;
  i = j = 0;
  while (i<256) {
    while (j<256) {
    ints[i][j] = i*j;
    j++;
   }
   i++;
   j = 0;
 } 
 printf("Made it :) \n");
 return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T01:58:40.613

您不一定会假设“意外终止”必然是因为“声明 256x256 数组”而直接导致的。

建议：

1) 将您的代码简化为一个简单的独立示例

2）在调试器中运行

3）当它“意外终止”时，使用调试器获取“堆栈回溯” - 您必须确定失败的特定行

4）您还应该寻找特定的错误消息（如果可能）

5) 发布您的代码、错误消息和您的回溯

6) 请务必告诉我们您正在使用什么平台（例如 Centos Linux 5.5）和编译器（例如 gcc 4.2.1）。

# mysql - MySQL - 同一列的不同 WHERE 子句

> ID：13504808
> 
> 赞同：1
> 
> 时间：2012-11-22T01:49:19.837
> 
> 标签：mysql, sql, pivot, case

我有一种情况，我需要根据其内容创建列。

例如，这里是 SQLFiddle - [http://sqlfiddle.com/#!2/0ec7a/1](http://sqlfiddle.com/#!2/0ec7a/1)。

我需要得到这样的结果：

```
--------------------------
| CITY | MALES | FEMALES |
--------------------------
| NY   | 5     | 2       |
--------------------------
| DC   | 2     | 1       |
-------------------------- 
```

我该怎么做？

我正在查看MySQL 手册中的`CASE WHEN`语句和`IF`语句，但更清晰的解释将非常有用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T01:52:56.043

你甚至不需要`CASE`！

```
SELECT
    city,
    sum(gender = 'm') as males,
    sum(gender = 'f') as females
FROM Population
group by city 
```

看到这个[在 SQLFiddle 工作](http://sqlfiddle.com/#!2/0ec7a/2)。

之所以有效，是因为在 mysql 中，`true`is`1`和`false`is `0`，因此对条件求和计算它为真的次数！

对于（大多数？）其他数据库，您必须在 sum 中使用无聊的情况：`sum(case when gender = 'm' then 1 else 0 end)`等

这种类型的数据布局称为[“枢轴”](http://en.wikipedia.org/wiki/Pivot_table)。一些数据库，如 Oracle，通过对其 SQL 风格的特定扩展来本地支持它，但在 mysql 中，您必须“自己动手”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:54:19.670

```
SELECT  CITY,
        SUM(CASE WHEN GENDER = 'M' THEN 1 ELSE 0 END) MALE,
        SUM(CASE WHEN GENDER = 'F' THEN 1 ELSE 0 END) FEMALE
FROM Population
GROUP BY City 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/0ec7a/6)

你也可以做准备好的陈述

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(CASE WHEN GENDER = ''',
      GENDER,
      ''' then 1 ELSE 0 end) AS ',
      GENDER
    )
  ) INTO @sql
FROM Population;

SET @sql = CONCAT('SELECT  CITY, ', @sql, ' 
                   FROM Population
                    GROUP BY City');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/0ec7a/15)

# class - Scala 在类/对象初始化中的奇怪行为

> ID：13504809
> 
> 赞同：2
> 
> 时间：2012-11-22T01:49:34.707
> 
> 标签：class, scala, object, constructor, initialization

> **可能重复：**
> [Scala 和前向引用](https://stackoverflow.com/questions/12184997/scala-and-forward-references)

为什么以下在 Scala 中有效：

### 版本 1

```
object Strange extends App {
  val x = 42
  Console.println(x) // => outputs "42", as expected
} 
```

### 版本 2

```
object Strange extends App {
  Console.println(x) // => "0" ?!
  val x = 42
} 
```

为什么它完全*编译，为什么在没有**任何*警告或任何警告的情况下表现得如此奇怪？

这也是同样的问题`class`：

```
class StrangeClass {
  Console.println(x) // => still "0"
  val x = 42
}

object TestApp extends App {
  new StrangeClass()
} 
```

常规方法的主体没有这样的问题：

```
def nonStrangeMethod {
  Console.println(y) // => fails with "not found: value y", as expected
  y = 42
} 
```

如果我们将“final”添加到 val 声明中，行为会发生巨大变化：

```
class StrangeClass {
  Console.println(x) // => "42", but at least that's expected
  final val x = 42
} 
```

作为记录，以下 Java 静态（Scala 的`object`）对应物：

```
public class Strange {
    static {
        System.out.println(x);
    }
    static int x = 42;

    public static void main(String[] args) {}
} 
```

`class`在第 3 行和 Java 非静态（Scala's ）对应项上出现简单且可理解的错误“无法在定义之前引用字段”的编译失败：

```
public class Strange {
    Strange() {
        System.out.println(x);
        int x = 42;
    }

    public static void main(String[] args) {
        new Strange();
    }
} 
```

显然在第 3 行出现“x 无法解析为变量”而失败。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:13:29.943

这是因为`App`使用延迟初始化的特性。来自*Scala*中关于`App`特征的编程：

> 花括号之间的代码被收集到单例对象的主构造函数中，并在类初始化时执行

2.9.0 版本也说明了这一点：

> 继承 App trait 的对象使用 Scala 2.9 的延迟初始化特性来执行整个主体作为继承的 main 方法的一部分。

所以在你得到它作为输出的地方运行`Console.println(x)`之前不会执行：`Strange`

```
scala> s.main(Array[String]())
0 
```

如果您`Console.println(x)`在之后添加另一个，`val x = 42`则会打印出：

```
scala> s.main(Array[String]())
0
42 
```

编译器知道它`x`存在于当前作用域中，但它会延迟对它的评估，直到它被执行，然后它会打印出它的默认值`Int`is `0`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:11:53.857

答案本质上是编译器如何构造事物。由于 Scala 中没有静态变量-初始化基本上发生在构造函数中，因此第二个示例的 Java 等效项类似于：

```
public class Strange {
    int x = 0;

    public Strange() {
        System.out.println(x);
        x = 42;
    }
} 
```

哪个编译得很好。我假设编译器将未初始化的 int 的值设置为 0 以避免 NPE。如果您颠倒构造函数中语句的顺序，您将获得您在第一个示例中描述的行为。

这个问题有更多细节：[Scala and forward references](https://stackoverflow.com/questions/12184997/scala-and-forward-references/12185918#12185918)

# javascript - javascript设置间隔作为单独的线程运行？

> ID：13504811
> 
> 赞同：13
> 
> 时间：2012-11-22T01:49:49.913
> 
> 标签：javascript

我想使用计时器作为后备，以防我最终陷入无限循环。似乎设置间隔是执行此操作的正确方法。但是，它对我不起作用。

根据我的研究，似乎 setInterval 应该在后台的单独线程中运行，但我没有看到。

为什么会发生这种行为？我该如何解决这个问题？

```
var time = 0;
window.setInterval(function(){time++;}, 1000);
while (true) {
    //stuff done
    if (time >= 5) {
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T01:51:17.977

浏览器 javascript 在单个线程中运行。因此，如果您执行的操作时间过长 - 它会冻结浏览器。

有关详细信息，请参阅 John Resig 文章：http: [//ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

阅读那篇文章后，您会发现您的`setInterval`回调排队等待在 1000 毫秒后运行，但仅在当前代码完成后运行。但是由于无限循环，它无法完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T01:56:09.093

**zerkms**有正确的答案。但我要补充一点，[网络工作者](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)是一种从客户端 javascript 获得一些多线程行为的方法。

```
var worker = new Worker('my_task.js');
worker.onmessage = function(event) {
 console.log("Called back by the worker!\n");
}; 
```

工作线程在后台线程中运行，您可以交换消息和订阅事件。这很漂亮。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T01:58:15.483

正如已经说过的-`setInterval`直到无限循环完成，回调才会运行。要完成您想要实现的目标 - 不使用网络工作者 - 您必须检查循环本身的时间：

```
var start = Date.now();
while((Date.now() - start) < 5000){
  ...
} 
```

# c++ - 在 C++ 中，重载运算符后，运算符是否会失去其旧功能？

> ID：13504814
> 
> 赞同：1
> 
> 时间：2012-11-22T01:50:23.020
> 
> 标签：c++, class, operator-overloading

当我重载一个运算符时，它是否会失去其对之前定义的类型的运算符的能力，或者新定义是否仅在我调用时适用

```
cout << that_specific_class_type_variable 
```

如果我写`cout << that_specific_class_type_variabe->Left()`它是重载函数还是正常的 cout 语句？

```
ostream& operator<< (ostream& out, TreeNode* tptr) 
    {
     if(tptr!=NULL)
     {
      operator<<(out,tptr->Left());
      out<<(*(tptr->Entry()));
      operator<<(out,t->Right());
     }
     return out;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T01:51:36.767

它只会改变它重载的特定类型的行为，在你的情况下，`TreeNode *`. 现有版本的操作员将继续正常运行。

对于递归调用：它将使用您对运算符的新定义 if`Left`和`Right`是类型`TreeNode *`（或指向从 派生的类的指针`TreeNode`）。如果它们属于不同类型，则将使用运算符的默认版本。

我怀疑`Entry()`返回的对象类型不同于`TreeNode *`. `operator<<`在这种情况下，将对其应用标准定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T01:53:26.900

运算符重载并不意味着永远改变该特定运算符的功能和行为，也不意味着改变内置数据类型。它仅有助于您对用户定义的数据类型执行类似于对整数类型执行的操作。

例如，如果您有两个整数变量，您可以像这样将一个赋值给另一个。

```
int a = 5 ;
int b = 7 ;
b = a ; 
```

同样，您可能还希望自己的数据类型表现得像这样，以提高效率和易于使用。

```
//Hypothetical class
myClass obj1 (5, "abc") ;
myClass obj2 (109, "xyz") ;
.........
......
obj2 = obj1 ; 
```

至于输出，您使用运算符重载`cout`以`<<`像这样输出对象的数据。

```
cout << obj1 ; 
```

如果要在整数类型类中输出变量，如果它们是公共成员，则可以这样做。

```
cout << myVar << endl ; 
```

如果他们是私人成员，或者像这样。

```
cout << getmyVar() << endl ; 
```

# python - Python - lxml - 构建树时如何在树周围“移动”

> ID：13504816
> 
> 赞同：3
> 
> 时间：2012-11-22T01:50:31.697
> 
> 标签：python, lxml

基本问题 - 当你建造一棵树时，你如何在树中“移动”。

我可以填充第一级：

```
import lxml.etree as ET

def main():
    root = ET.Element('baseURL')
    root.attrib["URL"]='www.com'
    root.attrib["title"]='Level Title'
    myList = [["www.1.com","site 1 Title"],["www.2.com","site 2 Title"],["www.3.com","site 3 Title"]]   
    for i in xrange(len(myList)):
        ET.SubElement(root, "link_"+str(i), URL=myList[i][0], title=myList[i][1]) 
```

这给了我类似的东西：

```
baseURL:
        link_0
        link_1
        link_2 
```

从那里，我想从每个新节点添加一个子树，所以它看起来像：

```
baseURL:
        link_0:
               link_A
               link_B
               link_C
        link_1
        link_2 
```

我看不到如何将 subElement 调用“指向”下一个节点 - 我试过：

```
myList2 = [["www.A.com","site A Title"],["www.B.com","site B Title"],["www.C.com","site C Title"]]
for i in xrange(len(myList2)):
        ET.SubElement('link_0', "link_"+str(i), URL=myList2[i][0], title=myList2[i][1]) 
```

但这会引发错误：

`TypeError: Argument '_parent' has incorrect type (expected lxml.etree._Element, got str)`

因为我给 subElement 调用一个字符串，而不是元素引用。我还尝试将它作为一个变量（即`link_0' rather than`“link_0”`），它给出了一个全局缺失变量，所以我的引用显然是不正确的。

我如何将我的 lxml 构建器“指向”作为父母的孩子，并编写一个新的孩子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:07:00.290

`ET.SubElement(parent_node,type)`创建一个新的 XML 元素节点作为`parent_node`. 它还返回这个新节点。

所以你可以这样做：

```
import lxml.etree as ET

def main():
  root = ET.Element('baseURL')
  myList = [1,2,3]
  children = []
  for x in myList:
    children.append( ET.SubElement(root, "link_"+str(x)) )

  for y in myList:
     ET.SubElement( children[0], "child_"+str(y) ) 
```

但是跟踪孩子可能是多余的，因为 lxml 已经为您提供了许多获取它们的方法。

这是使用子列表中内置的 lxmls 的一种方法：

```
 node = root[0]
 for y in myList:
   ET.SubElement( node, "child_"+str(y) ) 
```

这是一种使用 XPath 的方法（如果您的 XML 变得丑陋，可能会更好）

```
 node = root.xpath("/baseURL/link_0")[0]
 for y in myList:
   ET.SubElement( node, "child_"+str(y) ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:10:13.273

找到了答案。我应该使用 python 数组引用，`root[n]`而不是试图通过`list_0`

# javascript - 为不同的处理程序传递不同的参数给 deferred.resolve()

> ID：13504818
> 
> 赞同：1
> 
> 时间：2012-11-22T01:50:38.370
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 jQuery.Deferrd 对象同步多个 ajax 回调。显然 jQuery.when 会为您处理这个问题，但是我的代码的架构方式是不会以相同的方法调用 ajax 请求。例如，这是流程：

// 一个按钮被点击

// 模块 1 请求一段 html 并更新 DOM

// 模块 2 请求不同的 html 片段并更新 DOM

我需要两个模块同时更新 DOM，这意味着我需要确保在*两个*请求都返回后运行回调。

模块 1 和模块 2 需要能够彼此独立存在，并且不应该相互了解，因此无法使用 $.when(doMod1Request(), doMod2Request()).then(function () 一起发出请求{ ... }) 并且回调也应该是独立的。

因此，我编写了一个围绕 ajax 的包装器，它将回调添加到延迟对象，并以与 $.when 类似的方式在 ajax 请求返回与延迟对象上的回调次数相同的次数后解析延迟对象.

然而，我的困境是 deferred.resolve() 只能用一组参数调用，所以每个回调都得到相同的值。

例如

```
var deferred = new $.Deferred();
deferred.done(function (response) {
    console.log(response); // <div class="html-snippet-1"></div>
});
deferred.done(function (response) {
    console.log(response); // <div class="html-snippet-1"></div>
});
deferred.resolve('<div class="html-snippet-1"></div>'); 
```

而我想要这样的东西：

```
var deferred = new $.Deferred();
deferred.done(function (response) {
    console.log(response); // <div class="html-snippet-1"></div>
});
deferred.done(function (response) {
    console.log(response); // <div class="html-snippet-2"></div>
});
deferred.resolve(['<div class="html-snippet-1"></div>', '<div class="html-snippet-2"></div>']); 
```

这是可能的还是我做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T03:18:22.000

我会说这是完全有效的。假设你的独立模块，你会做（有两个承诺）：

```
doMod1Request().done(doMod1Update);
doMod2Request().done(doMod2Update); 
```

现在，如果您想一起执行更新，并且只有两个请求都成功，只需编写

```
$.when(doMod1Request(), doMod2Request()).done(function(mod1result, mod2result) {
    doMod1Update(mod1result);
    doMod2Update(mod2result);
}); 
```

如果你用多个参数调用你的解析函数，这只会变得丑陋，因为 jQuery 在那里有点不一致，并且没有真正区分多个参数和一个数组参数。

要将它们与您正在使用的发布-订阅模式解耦，我建议如下：

```
function Combination() {
    this.deferreds = [];
    this.success = [];
    this.error = [];
}
Combination.prototype.add = function(def, suc, err) {
    this.deffereds.push(def);
    this.success.push(suc);
    this.error.push(err);
};
Combination.prototype.start = function() {
    var that = this;
    return $.when.apply($, this.deferreds).always(function() {
         for (var i=0; i<that.deferreds.length; i++)
             that.deferreds[i].done(that.success[i]).fail(that.error[i]);
         // of course we could also call them directly with the arguments[i]
    });
};

// Then do
var comb = new Combination();
window.notifyModules("something happened", comb); // get deferreds and handlers
comb.start();

// and in each module
window.listen("something happended", function(c) {
    c.add(doRequest(), doUpdate, doErrorHandling);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T00:54:05.573

为了确保每个回调都传递了适当的参数，我做了以下事情：

```
var guid = 0,
    deferreds = [];

window.request = function (url, deferred, success) {
    var requestId = guid++;

    if ($.inArray(deferred) === -1) {
        deferreds.push(deferred);
        $.extend(deferred, {
            requestCount: 0,
            responseCount: 0,
            args: {}
        });
    }

    deferred.requestCount++;

    deferred
        .done(function () {
            // Corresponding arguments are passed into success callback using requestId
            // which is unique to each request.
            success.apply(this, deferred.args[requestId]);
        });

    $.ajax(url, {
        success: function () {
            // Store arguments on deferrds args obj.
            deferred.args[requestId] = arguments;

            deferred.responseCount++;
            if (deferred.requestCount === deferred.responseCount) {
                deferred.resolveWith(this);
            }
        } 
    });
}; 
```

所以参数是通过闭包来管理的。这使我可以确保两个模块彼此不了解，并且如果另一个模块不存在也不会中断，例如：

```
var MODULE_1 = function () {
    $(".myButton").on('click', function() {
        // Cross module communication is achieved through notifications.
        // Pass along a new deferred object with notification for use in window.request
        window.notify('my-button-clicked', new $.Deferred);
    });
}();

var MODULE_2 = function () {
    // run get snippet when 'my-button-clicked' notification is fired
    window.listen('my-button-clicked', getSnippet);

    function getSnippet (deferred) {
        window.request('/module2', deferred, function () {
            console.log('module2 success');
        });
    }
}();

var MODULE_3 = function () {
    // run get snippet when 'my-button-clicked' notification is fired
    window.listen('my-button-clicked', getSnippet);

    function getSnippet (deferred) {
        window.request('/module3', deferred, function () {
            console.log('module3 success');
        });
    }
}(); 
```

以上允许每个模块独立运行，这意味着一个模块可以在没有另一个模块的情况下工作，这会松散地耦合代码，并且因为两者都`MODULE_2`将`MODULE_3`相同的延迟对象传递给`window.request`它们，一旦两个请求都成功返回，它们就会被解析。

这是我的最终实现： [https ://github.com/richardscarrott/ply/blob/master/src/ajax.js](https://github.com/richardscarrott/ply/blob/master/src/ajax.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T03:09:54.150

假设您的模块看起来像这样：

```
var MODULE_1 = function() {
    function getSnippet() {
        return $.ajax({
            //ajax options here
        });
    }

    return {
        getSnippet: getSnippet
    }
}();

var MODULE_2 = function() {
    function getSnippet() {
        return $.ajax({
            //ajax options here
        });
    }

    return {
        getSnippet: getSnippet
    }
}(); 
```

如果您的模块不同，请不要担心，重要的是每个 getSnippet 函数都返回一个 jqXHR 对象，该对象（从 jQuery 1.5 开始）实现了 Promise 接口。

现在，假设您要获取两个片段以响应某个事件（例如单击按钮）并在收到两个 ajax 响应时执行某些操作，那么单击处理程序将如下所示：

```
$("myButton").on('click', function(){
    var snippets = [];
    var promises_1 = MODULE_1.getSnippet().done(function(response){
        snippets.push({
            target: $("#div_1"),
            response: response
        });
    });
    var promise_2 = MODULE_2.getSnippet().done(function(response){
        snippets.push({
            target: $("#div_2"),
            response: response
        });
    });
    $.when(promise_1, promise_2).done(function() {
        $.each(snippets, function(i, snippetObj) {
            snippetObj.target.html(snippetObj.response);
        });
    });
}); 
```

如果您有许多类似构造的模块来获取许多片段，则稍微更精细，更好，将是这样的：

```
$(function(){
    $("myButton").on('click', function(){
        var promises = [];
        var snippets = [];
        var modules = [MODULE_1, MODULE_2, MODULE_3 .....];
        for (var i=1; i<=10; i++) {
            promises.push(modules[i].getSnippet().done(function(response){
                snippets.push({
                    target: $("#div_" + i),
                    response: response
                };
            }));
        }
        $.when.apply(this, promises).done(function() {
            $.each(snippets, function(i, snippetObj) {
                snippetObj.target.html(snippetObj.response);
            });
        });
    });
}); 
```

正如你所看到的，我在这里做了很多假设，但你应该对如何进行有所了解。

# python - （Python）在 Windows 上检测箭头键（按下）

> ID：13504819
> 
> 赞同：4
> 
> 时间：2012-11-22T01:50:49.483
> 
> 标签：python, windows, keypress

在发布之前，我试图搜索我的答案，但在这里我找不到任何可以帮助我的东西。

我目前在我的脚本中有这个：

```
def waitForDir(self):
    while True:
        if msvcrt.kbhit():
            keyHit = msvcrt.getch()
            print keyHit 
```

（这是一个更大的类的一部分）

每当我按下箭头键时，我都会得到一个看起来很奇怪的符号，让我想起一条鱼（想想一个无限符号，第二个循环的右半部分被切断）和一个字母——K 代表左边，H 代表上，M 右，P 下。（我通常在小键盘和主键盘之间使用箭头键，在 home/insert/delete/all that jazz 键下方）

...我怎样才能把它变成我可以使用的东西？每当按下其中一个键时，我都想运行事件，但我真的不知道该怎么做。

如果需要，我可以提供更多信息。提前致谢！

编辑：没关系！我通过将 msvcrt.getch() 与 ord() 括起来以获取可用数字来找出解决方案。不管怎么说，还是要谢谢你！

# php - 以编程方式生成下拉菜单

> ID：13504821
> 
> 赞同：1
> 
> 时间：2012-11-22T01:50:57.470
> 
> 标签：php, html

我在下面有一个下拉菜单：

```
 $form = "
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
  <table>
  <tr>
  <td><select name='year' id='yearDrop'>
<option value=''></option>
<option value='$getyear[1]'>1</option>
<option value='$getyear[2]'>2</option>
<option value='$getyear[3]'>3</option>
<option value='$getyear[4]'>4</option>
<option value='$getyear[5]'>5</option>
<option value='$getyear[6]'>6</option>
<option value='$getyear[7]'>7</option>
<option value='$getyear[8]'>8</option>
<option value='$getyear[9]'>9</option>
<option value='$getyear[10]'>10</option>
</select></td>
</tr>
</table>
</form>
"; 
```

请注意，下拉菜单位于表单中的 php 变量中。我的问题是：“有没有更好更短的方法来显示上面的下拉菜单？”。也许通过使用某种循环来遍历每个值并为每个选项赋予相同的`value`属性？

我想使用`getyear`以适应一个简单的 if 语句：

```
 if ($getyear){
    echo "year is chosen";
    }else{
    $errormsg = "You must enter in Student's current Academic Year to Register";
              } 
```

**更新：**

```
<?php  

  $getyear = (isset($_POST['year'])) ? $_POST['year'] : '';
  $errormsg = (isset($errormsg)) ? $errormsg : '';

$min_year = 1;
$max_year = 10;
$years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012
$yearHTML = '';
$yearHTML .= '<select name="year" id="yearDrop">'.PHP_EOL; 
$yearHTML .= '<option value="">Please Select</option>'.PHP_EOL;  
foreach ($years as $year) {
    $yearHTML .= "<option>$year</option>".PHP_EOL;  // if no value attribute, value will be whatever is inside option tag, in this case, $year
}
$yearHTML .= '</select>'; 

  if( (isset($_POST['registerbtn']))){
      $getyear = $_POST['year'];

      if (!in_array($getyear , $years)){
      echo "year is chosen";
                    }else{
              $errormsg = "You must enter in Student's current Academic Year to Register";
          }

            }

  $form = "
<form action='" . htmlentities($_SERVER["PHP_SELF"]) . "' method='post'>
  <table>
  <tr>
  <td></td>
  <td id='errormsg'>$errormsg</td>
  </tr>
  <tr>
  <td>Year:</td>
  <td>{$yearHTML}</td>
  <td><input type='text' name='year' value='$getyear' /></td>
  </tr>
  <tr>
  <td></td>
  <td><input type='submit' value='Register' name='registerbtn' /></td>
  </tr>
  </table>
  </form>";

  echo $form;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:03:33.630

在`foreach`遍历数组并对它们的值执行操作时，循环非常有用。

[foreach 控制结构](http://www.php.net/manual/en/control-structures.foreach.php)

```
<?php
// reference values for output and for validation later
$min_year = 1900;  // using as an example
$max_year = 2012;
$years = range($min_year, $max_year); // returns array with numeric values of 1900 - 2012

// for HTML output
if (empty($_POST)) {  // display form
    $html = '';
    foreach ($years as $year) {
        $html .= "<option>$year</option>";  // if no value attribute, value will be whatever is inside option tag, in this case, $year
    }
    // output HTML
    echo $html;
} else {  // process form
    $chosen_year = isset($_POST['year']) ? $_POST['year'] : "";
    if (!in_array($chosen_year , $years) {  // year is invalid
        $errormsg = "You must enter in Student's current Academic Year to Register";
    } else {  // year is chosen
        echo 'year is chosen';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:06:07.967

该文件将`select`自动生成选项，并为您提供一个方便的地方进行进一步处理。

```
function process_form(){
    if(!isset($_POST['year']) || !is_numeric($_POST['year'])){
        // Form invalid
        return false;
    }

    $year   = $_POST['year'];

    // Perform actions - save to database, etc..?

    // Form valid
    return true;
}

$error  = false;
if($_SERVER['REQUEST_METHOD'] == 'POST'){
    // Form submitted
    $result = process_form();
    if($result){
        ?>
        <p>Valid year selected</p>
        <?php
        exit;
    }

    $error  = true;
}
?>
<form action="" method="post">
<?php if($error){ ?>
    <p class="error">You must select the student's current academic year to register</p>
<?php } ?>
<label for="select_year">Academic Year:</label>
<select name="year" id="select_year">
    <option value=""></option>
    <?php for($year = $start_year; $year <= $end_year; $year++){ ?>
        <option value="<?php echo $year;?>"><?php echo $year;?></option>
    <?php } ?>
</select>

<button type="submit">Register</button>
</form> 
```

# c++ - 如何调用模拟另一个用户而不是 SYSTEM 的函数

> ID：13504825
> 
> 赞同：4
> 
> 时间：2012-11-22T01:51:20.743
> 
> 标签：c++, c, windows, dll

在我的 DLL 中调用了一个 Win32 API，它将由 SYSTEM 用户加载，并且该 API 根据当前用户返回不同的结果，所以我无法获得与当前用户对应的结果，如何在当前登录用户下调用该 API DLL 在 SYSTEM 上下文中运行时的上下文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:31:55.330

我做了一些研究并得出结论（我不是 Win32 API 专家，但我真的很感兴趣）：

您可以使用[`ImpersonateLoggedOnUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378612), 它要求提供[主要](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721603.aspx#_security_primary_token_gly)或[模拟](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721588.aspx#_security_impersonation_token_gly)令牌句柄（至少`TOKEN_QUERY`在两者中，`TOKEN_DUPLICATE`在主要令牌上或`TOKEN_IMPERSONATE`在模拟令牌上）。

如果您拥有当前登录的用户令牌和正确的权限，这将非常容易，您只需使用`ImpersonateLoggedOnUser`，调用您想要的 API 函数，然后调用[`RevertToSelf`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379317)以返回其原始所有者令牌。

但是获取当前登录的用户令牌并不容易。您必须使用[`LogonUser`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184)指定用户名和密码（这似乎不正确），或者拥有一个具有足够权限的 Windows 服务来让您调用[`WTSQueryUserToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383840)，这可能与您正在开发的项目类型不同。

或者，如果您真的愿意使用普通流程执行此操作，您还可以探索[Authentication Functions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374731)，您可以在其中利用新的 Windows UAC 和安全上下文，使用起来可能有点复杂。

还有一种方法，我不确定它是否有效：[模拟标准用户](https://stackoverflow.com/q/2281823/260411)（使用[`OpenProcessToken`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379295)on获取令牌`explorer.exe`）。

我发现一些有用的链接：

*   [MSDN - 客户端模拟 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa376391)
*   [MSDN - 访问令牌 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374909)
*   [MSDN - LsaLogonUser 函数 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378292)
*   [一个简单的模拟程序示例](http://www.installsetupconfig.com/win32programming/accesscontrollistaclexample6_1.html)
*   [CodeProject - 用户模拟](http://www.codeproject.com/Articles/21050/Security-User-Impersonation)
*   [CodeProject - Vista UAC：权威指南](http://www.codeproject.com/Articles/19165/Vista-UAC-The-Definitive-Guide)

我建议：在继续之前，请确保在调用您提到的 API 函数时确实需要模拟用户。看看是否有另一种途径来完成你想要的。

您还可以指定您尝试使用的 API 函数，这可能会将您重定向到另一个更简单的问题。

# ruby-on-rails - Ruby Fixnum 比较

> ID：13504830
> 
> 赞同：0
> 
> 时间：2012-11-22T01:51:43.477
> 
> 标签：ruby-on-rails, ruby, fixnum

从 Web 服务收集数据后，我试图仅提取特定字段的值 > 0 的记录。我正在检查的字段是 FixNum 字段。我尝试过多种类似 .nil 的方法？或 > 0 等。但它们似乎都不起作用。

以下是代码的运行方式：

```
 results.each do |r|
    # puts "came"
     if r['efforRemaining'] % 1 != 0 #i tried r['efforRemaining'].nil? ..
    # i have values like 0.4, 0.5 etc for the field, hence i need to check if the value is greater than 0 or not only
       puts "came!"
      puts "#{r['mstone']} ... #{r['assignee']['id']} ... #{r['effortRemaining'].to_f}"
     end
  end 
```

有人可以让我知道该怎么做吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T01:59:49.070

如果`puts r['effortRemaining'].inspect`出现在引号中，则表示它是一个字符串，您需要在比较之前将其转换为数字。

这应该有效：

```
if r['effortRemaining'].to_f > 0 
```

# html - CSS 样式列表

> ID：13504832
> 
> 赞同：1
> 
> 时间：2012-11-22T01:51:48.100
> 
> 标签：html, css, list

我创建了以下内容并删除了填充和边距，但是当我在 Firebug 中查看时，有一个 40px 我不明白它来自哪里：

```
<html>
<head>
<style type="text/css">
    ul{
        list-style: none;
        margin: 0
        padding-left: 0;
        padding-top: 0;
        padding-right: 0;
        padding-bottom: 0;
    }
    li{
        margin: 0;
        padding: 0;
    }
</style>
</head>
<body>
    <ul>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
        <li>Item 1</li>
    </ul>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T02:03:46.117

这是你的问题：

```
 <style type="text/css">
        ul{
            list-style: none;
            **margin: 0**
            padding-left: 0;
            padding-top: 0;
            padding-right: 0;
            padding-bottom: 0;
        }
        li{
            margin: 0;
            padding: 0;
        }

</style> 
```

如您所见，在

```
margin: 0 
```

只需在该行之后添加分号即可：)

# jquery - jquery - .css 不工作给出一个空值

> ID：13504834
> 
> 赞同：1
> 
> 时间：2012-11-22T01:51:55.813
> 
> 标签：jquery, css, background

我有一个索引，可以根据用户选择的内容更改其模板。一旦用户更改其模板，我希望菜单也改变颜色。它适用于所有浏览器，但在 IE 中，它给了我错误 '1' is null or not an object in the line`return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);`

这是我的代码

```
jQuery(document).ready(function(){

        var bg = convert(jQuery('#body').css('background-color'));
        var font = convert(jQuery('.left').css('color'));
        if(bg =='#ffffff' || bg=='undefined'){
            bg = '#000000';
            font='#ffffff';
        }

        jQuery('.mainmenu').hover(
            function(){
              var $this = $(this);
              $this.data('bgcolor', $this.css('background-color')).css('background-color', '#FFFFFF' );
            },
            function(){
              var $this = $(this);
              $this.css('background-color', $this.data('bgcolor'));
            }
        ); 
        jQuery('.submenu').hover(
            function(){
                var $this = $(this);
                $this.data('bgcolor2', $this.css('background-color')).css('background-color', bg );
            },
            function(){
                var $this = $(this);
                $this.css('background-color', $this.data('bgcolor2'));
            }
        );
        jQuery('.submenu2').hover(
            function(){
                var $this = $(this);
                $this.data('color', $this.css('color')).css('color', font );
            },
            function(){
                var $this = $(this);
                $this.css('color', $this.data('color'));
            }
        );
    });
    function convert(bg){
        bg = bg.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
        return "#" + hex(bg[1]) + hex(bg[2]) + hex(bg[3]);
    }
    function hex(x) {
        return ("0" + parseInt(x).toString(16)).slice(-2);
    }
</scri 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T01:34:24.517

这是来自的答案：[Javascript match 在 IE 中不起作用](https://stackoverflow.com/questions/1997344/javascript-match-doesnt-work-in-ie)IE 将 rgb 值转换为十六进制，因此 .match 传递了不同的值。

# python - 在不使用循环的情况下获取字典的第一个元素

> ID：13504845
> 
> 赞同：0
> 
> 时间：2012-11-22T01:54:02.073
> 
> 标签：python, performance, for-loop

我有这段代码，想知道是否有任何内置方法可以更快地完成它？

Words 有一个简单的标记化字符串输入。

```
freq_unigrams = nltk.FreqDist(words)
unigram_list = []

count = 0
for x in freq_unigrams.keys():
    unigram_list.append(x)
    count+=1
    if count >= 1000:
        break 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T01:57:42.657

是否`freq_unigrams.keys()`返回列表？如果是这样，以下情况如何：

```
unigram_list = freq_unigrams.keys()[:1000] 
```

这为您提供了一个包含 的前 1000 个元素的列表`freq_unigrams.keys()`，没有循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:53:27.013

我建议：

```
unigram_list = freq_unigrams.keys()
unigram_list[:] = unigram_list[:1000] 
```

这不会使副本：`unigram_list = freq_unigrams.keys()[:1000]`确实。

尽管使用迭代器可能会更好：

```
from itertools import islice
unigram_list[:] = islice(freq_unigrams.iterkeys(),1000) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T03:26:35.663

如果您的意图是获得列表中最常见的 1000 个单词，`words`您可以尝试：

```
import collections

# get top words and their frequencies
most_common = collections.Counter(words).most_common(1000) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T03:42:17.937

这在理论上更有效：

```
import itertools
unigram_list = list(itertools.islice(freq_unigrams.iterkeys(), 1000)) 
```

...而不是工作`freq_unigrams.keys()`，因为您只对**top 1000**感兴趣，而不是剩余的*x*， using`freq_unigrams.keys()`也需要在中间填充`list`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T02:02:21.890

**有一点晚...

获取字典中的前 1000 个键并将它们分配给一个新列表：

```
unigram_list = freq_unigrams.keys()[:1000] 
```

# entity-framework - Code First - 在一对多关系中将级联规则设置为“Set Null”

> ID：13504849
> 
> 赞同：3
> 
> 时间：2012-11-22T01:54:41.300
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

**我想知道如何建立具有级联规则"Set Null"**的一对多关系。这是我正在使用的两个实体。StandradRelay 与 RelayConfig 具有一对多的关系。

```
public class StandardRelay {
    ...
    public virtual ICollection<RelayConfig> RelayConfigs { get; set; }
}

public class RelayConfig  {
    ...
    public virtual StandardRelay StandardRelay { get; set; }
} 
```

默认情况下，上述代码导致**“无操作”**的级联规则。所以我尝试将 DbModelBuilder 与以下流利的 API 一起使用。

```
modelBuilder.Entity<StandardRelay>()
            .HasMany<RelayConfig>(s => s.RelayConfigs)
            .WithOptional(r => r.StandardRelay)
            .WillCascadeOnDelete(false); 
```

这再次导致**“无动作”**的级联规则。然后我尝试了以下

```
 modelBuilder.Entity<StandardRelay>()
                    .HasMany<RelayConfig>(s => s.RelayConfigs)
                    .WithOptional(r => r.StandardRelay)
                    .WillCascadeOnDelete(true); 
```

这导致**“删除”**的级联规则。

所以简而言之，我看不到任何设置“Set Null”级联规则的选项。我们如何配置相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T12:19:41.020

这是不可能的。

您必须手动处理它。

# syntax - 鸡计划是否支持复数？如果是这样，为什么我会收到此错误？

> ID：13504853
> 
> 赞同：4
> 
> 时间：2012-11-22T01:55:10.737
> 
> 标签：syntax, scheme, runtime-error, complex-numbers, chicken-scheme

我刚开始学习一点计划，我正在使用 Dorai Sitaram*在 Fixnum Days 的自学计划*。在上述工作中指出：

> *方案编号可以是整数（例如，42）...或复数（**2+3i**）。*

强调我的。注意表格。

使用到目前为止我学到的原理，我尝试编写一些不同的程序来处理不同类型的数字。我最终编写了这个非常简单的代码片段来测试复数：

```
(begin
  (display 3+4i)
  (newline)
) 
```

在[codepad.org](http://codepad.org/TKdwSM4J)（使用 MzScheme）和[Ideone.com](http://ideone.com/Kx4VcK)（使用 guile）上对此进行了完美的测试。

现在，当我使用 Chicken Scheme（我的本地开发环境）尝试它时，它编译得很好，但是在运行时，崩溃并给我错误：

```
Error: unbound variable: 3+4i

  Call history:

  main.scm:2: 3+4i      <-- 
```

显然有一个未绑定的变量错误，但我有限的方案我什至不知道这意味着什么（还。）

有没有其他人经历过这个？我知道 Chicken Scheme 应该非常符合标准，所以它不支持像这样简单的东西似乎很奇怪。我通过他们的文档谷歌搜索，但我找不到任何具体的东西（虽然我认为有一个*外部*复数库可用，所以也许这是一个提示。）

如果有人有任何建议，他们将不胜感激。提前致谢！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T02:43:33.820

我相信你需要安装[数字](http://wiki.call-cc.org/eggref/4/numbers)扩展来处理 Chicken Scheme 中的复数。做这个：

```
> chicken-install numbers 
```

不要忘记加载它：

```
(use numbers) 
```

# c# - 如何使用程序控制 Windows 8 的磁贴位置？

> ID：13504866
> 
> 赞同：0
> 
> 时间：2012-11-22T01:56:54.650
> 
> 标签：c#, c++, windows, tile

我想构建一个可以在 Windows 8 开始屏幕上自动排列磁贴位置的应用程序。但我找不到任何参考，例如 API。微软允许我们这样做吗？如果是，我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:25:29.040

不可以，应用程序无法控制磁贴在开始屏幕上的位置。用户可以控制瓷砖的放置方式。

# xpath - vala/libxml2：如何使用命名空间查询 xpath？（xpathRegisterNs？）

> ID：13504867
> 
> 赞同：1
> 
> 时间：2012-11-22T01:56:55.137
> 
> 标签：xpath, xml-namespaces, libxml2, vala

如何使用 vala 在上下文中注册命名空间，以便可以查询“//someNamespace:tag”（而不仅仅是“//tag”）

我的出发点是：[https ://live.gnome.org/Vala/XmlSample](https://live.gnome.org/Vala/XmlSample)

```
 Xml.Doc* doc = Parser.parse_file (path);
            if(doc==null) print("failed to read the .xml file\n");

            Context ctx = new Context(doc);
            if(ctx==null) print("failed to create the xpath context\n");

            Xml.XPath.Object* obj = ctx.eval_expression("/Example/Objects/Pet");
            if(obj==null) print("failed to evaluate xpath\n"); 
```

我猜到 [*] 如何“创建”一些命名空间

```
Xml.Ns* ns = new Xml.Ns(null,"","svg"); 
```

现在我如何将此命名空间传递给上下文？[.py (AFAIK) Python XPath / libxml2 命名空间查询](https://stackoverflow.com/questions/8566111/python-xpath-libxml2-namespace-query)
中存在的 xpathRegisterNs 之类的东西

如果有人得到一些示例代码来获取文档中现有命名空间的列表，那也很棒。

PS：[*] 我说我猜是因为我希望我找到了一个很好的带有 vala 完成的 Linux IDE。现在我被 Monodevelop 2.8.6.3 卡住了，它有 vala 的语法突出显示但没有代码完成（它一直说“为类获取信息”但我没有得到任何结果）。所以如果有人知道一个好主意，我会很高兴听到你的声音......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:59:25.190

您不需要将命名空间创建为对象；仅在将其注册到文档时才需要。在`Context`做：

```
ctx.register_ns("svg", "http://www.w3.org/2000/svg");
ctx.eval_expression("//svg:g"); 
```

# ios - 如何在 iOS 中制作元素网格？

> ID：13504871
> 
> 赞同：0
> 
> 时间：2012-11-22T01:57:49.427
> 
> 标签：ios

所以我准备在 xCode 中为 iOS 制作一个应用程序（如图），我很好奇人们会建议在这里做什么。

我的目标是创建一个尺寸为 mxn 的按钮网格。我最近制作了一个井字游戏变体，其中我有一个整体 9x9 的按钮网格。创建每个按钮是一项非常繁琐的工作。

有没有更简单的方法可以通过代码创建所有这些按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:32:25.257

使用`for`循环来创建按钮。可能是以下几种为 3X3 网格创建按钮

```
CGFloat xAxis,yAxis,bWidth,bHeight;
xAxis = 0.0;
yAxis = 0.0;
bWidth = 150.0;
bHeight = 44.0;
int numberOfRows = 3;
int numberOfColumns = 3;
int number = 1;

for(int i=0;i<numberOfRows;i++)
{
     for(int j=0;j<numberOfColumns;j++)
   {
      UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(xAxis, yAxis, bWidth, bHeight)];
      button.titleLabel.text = [NSString stringWithFormat:@"%@",number];
      number++;
      [self.view addSubview:button];
      xAxis = xAxis  + bWidth + 5.0;
   }
   xAxis = 0;
   yAxis = yAxis +  bHeight + 5.0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T08:08:37.470

`IBOutletCollection`如果您有合理数量的按钮，s 是一个很好的候选者。然后，您可以遍历所有这些以应用相同的属性。

# regex - 加快正则表达式匹配？

> ID：13504873
> 
> 赞同：3
> 
> 时间：2012-11-22T01:57:58.833
> 
> 标签：regex, algorithm, perl

我正在编写一个日志解析器，它逐行读取日志，我有大约 100 条规则，它的工作方式如下：

```
if ($line =~ /blabla (field1) (field2)/) 
{ do something } 
else if ($line =~ /something (field1) (field2) else/)
{ do something } 
```

但是对于一个大日志文件，将一行与这么多规则匹配可能会很慢，它会是`O(n)`.

那么，对这个问题有什么建议吗？由于它不仅仅是纯字符串和通配符匹配，我不知道是否有任何我可以使用的数据结构。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T06:20:46.193

也许可以使用调度表？

```
my %handlers = (
   blabla    => \&blabla,
   something => \&something,
);

while (<>) {
   my ($keyword) = $line =~ /^(\S+)/
      or next;

   $handlers{$keyword}
      or next;

   $handlers{$keyword}->($line);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T04:28:48.550

我相信你的优化还为时过早。

您是否尝试过使用这个名义上的大日志文件？真的是太慢了吗？然后，如果它确实*太慢*，请使用像 Devel::NYTProf 这样的分析工具来找出到底是什么慢了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T09:54:29.373

[您可以使用Regexp::Assemble](http://search.cpan.org/perldoc?Regexp%3A%3AAssemble "正则表达式::汇编")将多个正则表达式组合成一个以加快匹配速度

以下是来自模块的描述

Regexp::Assemble 采用任意数量的正则表达式并将它们组合成一个正则表达式（或 RE），该正则表达式匹配所有单个 RE 匹配的内容。

因此，无需循环使用大量表达式列表，只需针对一个表达式测试目标字符串即可。当您有数千种模式要处理时，这很有趣。努力生产尽可能小的图案。

还可以跟踪原始模式，以便您可以确定在形成组合模式的源模式中，哪个是导致匹配发生的模式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T03:51:24.940

我建议您重新设计日志解析器。可能是我错了，但我认为您尝试匹配日志文件中可能发生的所有情况。

尝试使用词法和句法分析器。抱歉，我不知道 Perl 上的好示例，但类似[​​Parse::Yapp](http://search.cpan.org/~fdesar/Parse-Yapp-1.05/lib/Parse/Yapp.pm)

# asp.net-mvc-3 - 是否可以使用与 XSD 相同的格式序列化为 XML？

> ID：13504876
> 
> 赞同：0
> 
> 时间：2012-11-22T01:58:49.130
> 
> 标签：asp.net-mvc-3, xml-serialization

我使用 XSD2Code 从 XSD 生成了一个类。

我现在需要将此 XSD 的符合标准的 XML 文件反序列化为此类的对象。

我尝试了许多 XML 序列化器，但它们似乎使用自己的 XML 格式，因此我无法从外部编辑符合标准的 XML 文件以反序列化为对象。

是否可以在保持原始格式的同时反序列化为对象，即可以生成符合 XSD 的 XML 文件，而不是序列化程序的特定 XML 格式。

提前谢谢了。

埃德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T00:42:33.243

排序。我发现 XSD2Code 可以做到这一点。

# visual-studio-2010 - Visual Studio C++ Express (2010) 可以自动复制依赖关系吗？

> ID：13504879
> 
> 赞同：1
> 
> 时间：2012-11-22T01:59:39.740
> 
> 标签：visual-studio-2010, visual-c++

为新手问题道歉，但我来自 Visual C#，我想做的只是在依赖项和资源方面与该 IDE 大致相同的功能：

简单地说：如何添加依赖 DLL，并让它自动复制到我的编译目标目标文件夹？

我知道 VC2010 Express 没有资源编辑器，这很好，我希望将这些东西简单地添加到我的“项目”中，并在构建时复制它们。

只需要知道它是否可能，或者是否仅在完整版本中可用，如果有的话。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:34:56.713

当然，需要意识到 Visual C++ 是一种 IDE，它会在你的胸前长出头发，在你的头上长出白发。

我实际上不知道这种可能性，即“Post”和“Pre”构建操作。

`Project Properties > Configuration Properties > Build Events > Post-Build Event` 正是我需要放置命令行的地方

`copy "$(ProjectDir)SDL.dll" "$(OutDir)SDL.dll"`

完美的。我只需要记住使用所有必要的依赖项来执行此操作

# sql - 从 SQL Server 表生成 INSERT 语句

> ID：13504884
> 
> 赞同：3
> 
> 时间：2012-11-22T02:00:03.237
> 
> 标签：sql, sql-server, sql-server-2005

我有一个包含 330 万条记录的表，不想将整个内容从 dev 复制到 prod（在客户端控制的机器上，并且无法让链接服务器正常工作）。

我只想复制 300 条左右的这些记录。如何生成 300 条插入语句？

我想要插入的选择 SQL 是：

```
select * from data where ID > 9000; 
```

我想要一个能打印出所有 INSERTS 的查询，以便我可以在生产框中复制和运行它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T04:02:50.730

我看到你标记了你的帖子 SQL-Server-2005，这太糟糕了，因为 2008 版有一个向导工具。

您可以使用连接的字符串构建插入语句。

如果 field1 是一个字符串， field2 是一个数字：

```
select 'insert into data (field1, field2) values('' || field1 || '', ' || char(field2) ||');' from data where ID < 9000; 
```

显然，如果您有很多列，考虑到字符串需要引号，这可能会很耗时。您可能也必须使用转换数字列`char()`。

这应该会给你一个插入语句的列表，如下所示：

```
insert into data (field1, field2) values('A', 10);
insert into data (field1, field2) values('B', 20);
insert into data (field1, field2) values('C', 30); 
```

也许这不是最优雅的方法，但它确实有效。

# python - Python数据结构顺序

> ID：13504885
> 
> 赞同：0
> 
> 时间：2012-11-22T02:00:21.283
> 
> 标签：python, data-structures, dictionary

根据我所知道的，您不能假设数据结构（例如字典）会将其中的值保存在与您初始化它的顺序相同的顺序上。例如：

```
d = {1:10,2:20,3:30} 
```

当您在 for 循环中打印它时，结果可能是：

```
{2:20,1:10,3:30} 
```

为什么会发生 - 为什么字典（或其他数据结构）不会按特定顺序保留值？仅适用于字典吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:02:16.507

在 Python 内置类型中，字典和集合都是如此。列表和元组保持顺序。有`collections.OrderedDict`一个有序版本的字典。对于其他类型（例如，来自未内置于 Python 的库中的类型），您只需阅读文档即可。Python 中“数据结构”的作用没有通用规则。您必须查看每种类型的文档以了解它定义或未定义的行为。

Python 确实定义了“序列”的概念，它被定义为具有顺序（列表和元组是序列）。字典是一种“映射”，不需要顺序。（有关更多信息，请参阅[Python 词汇表](http://docs.python.org/2/glossary.html#term-sequence)和[集合模块](http://docs.python.org/2/library/collections.html#collections-abstract-base-classes)。）

至于为什么，这就是字典的实现方式。基本上，如果它们不必跟踪顺序，它们可以更快，并且在许多情况下您不关心顺序，因此它们被实现为无序集合以提高效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:05:56.730

`dict`python 中的 s 和s都`set`失去了顺序。这是因为它们被实现为哈希表，因此更关心更快的查找时间而不是订单保存。

如果您正在寻找一种面向顺序保留的数据结构，那么您应该查看`list`s. 在您的情况下，您可以使用如下元组列表：

```
In [255]: L = []

In [256]: L.append((1,10))

In [257]: L.append((2,20))

In [258]: L.append((3,30))

In [259]: L
Out[259]: [(1, 10), (2, 20), (3, 30)] 
```

但是，如果您想保持顺序**并**希望比所`list`提供的查找时间更快，那么您最好使用`OrderedDict`：

```
In [265]: d = collections.OrderedDict()

In [266]: d[1]=10

In [267]: d
Out[267]: OrderedDict([(1, 10)])

In [268]: d[2]=20

In [269]: d
Out[269]: OrderedDict([(1, 10), (2, 20)])

In [270]: d[3]=30

In [271]: d
Out[271]: OrderedDict([(1, 10), (2, 20), (3, 30)]) 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T02:04:07.423

是的，它只是字典。在下面，字典实际上并没有按原样存储值，而是作为与值配对的键的[哈希值。](http://en.wikipedia.org/wiki/Hash_table)这允许非常快速的查找。列表和元组保持顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T02:04:32.663

字典将对它们的条目进行排序，以使搜索键更有效。如果您想保持您的密钥与添加它们的顺序相同，请尝试使用[`OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict).

# jquery - Phonegap 捕获图像，然后将其上传到 REST Web 服务

> ID：13504887
> 
> 赞同：3
> 
> 时间：2012-11-22T02:00:45.373
> 
> 标签：jquery, web-services, cordova, mobile

我需要使用 jquery mobile 和 Phonegap 开发移动应用程序以从相机捕获图像，然后使用**WCF (.NET)**或**JAX-RS (Jersey)**将其上传到 REST Web 服务，这可以做到吗？

如果是，是否有任何示例/教程可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:33:12.573

通过使用phonegap，您可以从相机中捕获图像，请查看[相机api](http://docs.phonegap.com/en/2.2.0/cordova_camera_camera.md.html#Camera)。

要在服务器上上传图片，请使用以下代码：

```
<!DOCTYPE HTML>
<html>
<head>
<title>Cordova</title>
<link rel="stylesheet" href="style.css" media="screen" />
<script type="text/javascript" charset="utf-8" src="cordova-2.2.0.js"></script>
<script type="text/javascript" charset="utf-8" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript" charset="utf-8">
     var pictureSource; // picture source
     var destinationType; // sets the format of returned value 
     document.addEventListener("deviceready", onDeviceReady, false);
     function onDeviceReady() {
         pictureSource = navigator.camera.PictureSourceType;
         destinationType = navigator.camera.DestinationType;
     }
</script>
</head>
<body>
<script type="text/javascript" charset="utf-8">

         var myData = "";
         $(document).ready(function() {
             $("#getDataFromServer").click(function() {
                 var imageData = myData;
                 $.ajax({
                     type : "POST",

                     url : 'http://my.domain.name/saveImage.ashx',

                     data : {
                         image : imageData
                     },

                     beforeSend : function() {

                         $("#comment2").text("Start ajax " + imageData.length);
                     },

                     success : function(data) {

                         $("#comment2").text("Uploaded! " + data);
                     },

                     error : function(request, error) {

                         $("#comment2").text("Error! " + error);
                     }
                 });
             });
         })

         function capturePhotoEdit(source) {

             navigator.camera.getPicture(onPhotoDataSuccess, onFail, {

                 quality : 50,

                 destinationType : destinationType.DATA_URL,

                 sourceType : source
             });
         }

         function onFail(message) {
             alert('Failed because: ' + message);
         }

         function onPhotoDataSuccess(imageData) {

             console.log(imageData);

             var smallImage = document.getElementById('smallImage');

             smallImage.style.display = 'block';

             smallImage.src = "data:image/jpeg;base64," + imageData;

             myData = imageData;

             $("#comment").text(imageData.length);
         }
     </script>
     <h1>Hello World</h1>
     <p>
         <a href="#" onclick="capturePhotoEdit(pictureSource.PHOTOLIBRARY);">get
             image</a>
     </p>
     <p>
         <a href="#" id="getDataFromServer">send image</a>
     </p>
     <span id="comment2"></span>
     <img style="display: none; width: 100px; height: 100px;"
         id="smallImage" src="" />
     <span id="imagename"></span>
     <span id="comment"></span>
</body>
</html>
```

# javascript - 非常简单的 JSON-P 示例的问题

> ID：13504892
> 
> 赞同：1
> 
> 时间：2012-11-22T02:01:06.493
> 
> 标签：javascript, json, jquery-mobile, cross-domain, jsonp

我正在尝试构建一个移动应用程序，它将获取 json 数据，这些数据将从 mysql 数据库的 php 查询中输出。这是我第一次这样做，所以只是尝试一个简单的例子来让事情正常工作。在同一个域上一切似乎都很好，但我在让 json-p 用于跨域提取时遇到问题。相同的域代码是：

```
<html>
<head>
<title>the title</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" language="javascript">
$(document).ready(function() {
  $.getJSON('example.json', function(staff) {
         document.write(staff.name);
      });
});

</script>

</head>
<body>
</body>
</html> 
```

这很好用，但是当我将 example.json 移动到另一个域并进行测试时，它不再起作用。我添加了 ?callback=? 正如我在各种教程中所读到的那样，到 url 的末尾，但它没有加载任何内容。将一行更改为：

```
$.getJSON('http://www.knoxyouthgroup.org/example.json?callback=?', function(staff) { 
```

不知道从这里去哪里，有点撞墙。抱歉新手问题，但任何帮助将不胜感激！

我们的最终目标是从我们托管的 json 数据构建一个移动应用程序。数据将非常简单且最少，您可以自己托管吗？我一直在阅读有关 REST 服务等的内容，但不确定这是否只是我可以编写一个 php 脚本并将其转储到 json 并称之为一天的东西？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T00:12:38.090

JSONP 的工作方式与普通 JSON 不同，客户端和服务都必须遵守规则才能工作：

1.  客户端使用 JQuery.getJSON，指定“callback=?” 通知 JQuery 您正在执行 JSONP 调用。请参阅[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

2.  服务服务必须通过使用回调函数包装响应 JSON 来正确处理 JSONP 调用。它应该以以下格式返回响应：

    ```
     <callback-function> ( <JSON-payload> ) 
    ```

例如，回调（{name：“JONES”，position：“Officer”}）

如果服务只是返回，客户端会静默失败。

我怀疑你的服务不符合 JSONP，重写它来处理本地（JSON）和远程（JSONP）调用。

# youtube-api - 如何使用新的 YouTube 数据 API (V3) 获取某个频道的上传视频列表？

> ID：13504899
> 
> 赞同：30
> 
> 时间：2012-11-22T02:01:46.070
> 
> 标签：youtube-api

我正在尝试获取所有上传到频道的视频的视频 ID 列表。我还想使用新版本的 YouTube 数据 API (V3)。我该怎么做呢？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-22T02:01:46.070

您必须获取上传播放列表 ID 才能上传每个视频。为此，您需要获取频道 ID。从频道 ID 获得播放列表 ID 后，这非常简单。我已经写出了下面所有三个的步骤。

此外，我们还提供[PubSubHubBub](http://apiblog.youtube.com/2010/10/pubsubhubbub-for-youtube-activities.html)，它允许您在每次将新视频添加到频道时收到提醒，或者您可以使用[SUP](https://developers.google.com/youtube/2.0/developers_guide_protocol_sup) (V2) 在拨打电话之前查看哪些资源发生了变化。

**获取 V3 中频道的所有上传视频的视频 ID 的说明**

1.  获取你想要的频道的频道ID（你可能只需要这样做一次，然后你可以保存它）

    *   使用[search.list](https://developers.google.com/youtube/v3/docs/search/list)
    *   将**类型**设置为**频道**
    *   将**q**设置为您想要的频道的名称
    *   获取**频道 ID**（类似于：“channelId”：“UC0X2VuXXXXXXXXXXXXXXXX”）
2.  使用步骤 1 中的频道 ID 获取频道上传的播放列表 ID（您可能只需要执行一次，然后您可以保存它）

    *   使用[channels.list](https://developers.google.com/youtube/v3/docs/channels/list)
    *   从步骤 1将**id**设置为 UC0X2VuXXXXXXXXXXXXXXXXXX
    *   **从contentDetails**中获取**上传**密钥（类似于：“uploads”：“UU0XXXXXXXXXXXXXXXXXXXX”）

***   使用步骤 2 中的播放列表 ID 通过播放列表中的播放列表项获取视频

    *   使用[playlistItems.list](https://developers.google.com/youtube/v3/docs/playlistItems/list)
    *   从步骤 2将**playlistId**设置为 UU0XXXXXXXXXXXXXXXXXXXXX
    *   遍历每个 PlaylistItem 并提取视频 id**

 *** * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-04T15:02:53.263

与此同时，有一个更简单的方法：

*   使用 channels.list
*   设置用户名 = [频道名称]
*   设置部分 = contentDetails

`grab $data->items[0]->contentDetails->relatedPlaylists->uploads --> [PLAYLISTID]`

*   使用 playlistItems.list
*   从步骤 1 设置 playlistId = [PLAYLISTID]
*   遍历每个 PlaylistItem 并提取视频 ID**

# android - 文件 i/o 不工作

> ID：13504904
> 
> 赞同：1
> 
> 时间：2012-11-22T02:02:34.173
> 
> 标签：android, file-io

我正在尝试在 android 上测试一个简单的文件 i/o 程序，我在 EditText 中输入一些文本，当我单击“保存”按钮时，它会将内容写入文件中。当我单击加载按钮时，它会将内容加载回 EditText。

这是我的代码---

```
public class Activity2 extends Activity {

private EditText textBox;
private static final int READ_BLOCK_SIZE = 100;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

setContentView(R.layout.layout2);

textBox = (EditText) findViewById(R.id.txtText1);

Button saveBtn = (Button) findViewById(R.id.btnSave);
Button loadBtn = (Button) findViewById(R.id.btnLoad);

saveBtn.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {

String str = textBox.getText().toString();

try
{

PrintWriter PR=new PrintWriter(new File("text1.txt"));

PR.write(str);
PR.flush();
PR.close();

//textBox.setText("");
//---display file saved message---
Toast.makeText(getBaseContext(),
"File saved successfully!",
Toast.LENGTH_SHORT).show();
//---clears the EditText---
textBox.setText("");
}

catch (IOException ioe)
{
 ioe.printStackTrace();
}

}

});

loadBtn.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {

try
{
  File f=new File("text1.txt");

  BufferedReader BR=new BufferedReader(new FileReader(f));

  String txt="";
      String str;    

  while((str=BR.readLine())!=null)
  {
      txt+=str;

  }

//---set the EditText to the text that has been
// read---
textBox.setText(txt);

BR.close();

Toast.makeText(getBaseContext(),
"File loaded successfully!",
Toast.LENGTH_SHORT).show();

}
catch (IOException ioe) {
ioe.printStackTrace();
}
}
});
}
} 
```

`

为什么它不工作？提前感谢您的帮助。任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T02:22:47.383

用作`new File("text1.txt")`输出在 Android 上不起作用。当前的工作目录始终`/`对您的应用程序不可写。利用

```
File f = new File(Environment.getExternalStorageDirectory(), "text1.txt"); 
```

[getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)是新手机的内部存储。

如果您想将数据存储在您的应用程序私有文件夹中，您的应用程序[上下文](http://developer.android.com/reference/android/content/Context.html#getFilesDir%28%29)有几个可以使用的路径。来自的路径`Environment`位于公共场所，您可以使用文件管理器轻松读取数据

不要忘记添加

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

如果您想写入这些公共路径

# c++ - 视频太快 FFmpeg

> ID：13504905
> 
> 赞同：1
> 
> 时间：2012-11-22T02:02:40.040
> 
> 标签：c++, ffmpeg, frame-rate

我又遇到了ffmpeg的问题，我是ffmpeg的新手，我找不到最新的好教程......

这一次，当我用 ffmpeg 播放视频时，它播放得太快了，ffmpeg 忽略了 FPS，我不想用线程睡眠来处理它，因为视频有不同的 FPS。

我创建了一个线程，在那里你可以找到循环：

```
AVPacket framepacket;

while(av_read_frame(formatContext,&framepacket)>= 0){
    pausecontrol.lock();

    // Is it a video or audio frame¿?
    if(framepacket.stream_index==gotVideoCodec){
        int framereaded;
        // Video? Ok
        avcodec_decode_video2(videoCodecContext,videoFrame,&framereaded,&framepacket);
        // Yeah, did we get it?
        if(framereaded && doit){
            AVRational millisecondbase = {1,1000};
            int f_number = framepacket.dts;
            int f_time = av_rescale_q(framepacket.dts,formatContext->streams[gotVideoCodec]->time_base,millisecondbase);
            currentTime=f_time;
            currentFrameNumber=f_number;

            int stWidth = videoCodecContext->width;
            int stHeight = videoCodecContext->height;
            SwsContext *ctx = sws_getContext(stWidth, stHeight, videoCodecContext->pix_fmt, stWidth,
            stHeight, PIX_FMT_RGB24, SWS_BICUBIC, NULL, NULL, NULL);
            if(ctx!=0){
            sws_scale(ctx,videoFrame->data,videoFrame->linesize,0,videoCodecContext->height,videoFrameRGB->data,videoFrameRGB->linesize);
            QImage framecapsule=QImage(stWidth,stHeight,QImage::Format_RGB888);

            for(int y=0;y<stHeight;y++){
                memcpy(framecapsule.scanLine(y),videoFrameRGB->data[0]+y*videoFrameRGB->linesize[0],stWidth*3);
            }
            emit newFrameReady(framecapsule);
            sws_freeContext(ctx);
            }

        }
    }
    if(framepacket.stream_index==gotAudioCodec){
        // Audio? Ok
    }
    pausecontrol.unlock();
    av_free_packet(&framepacket);
} 
```

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:27:47.810

最简单的解决方案是使用基于 FPS 值的延迟

```
firstFrame = true;
for(;;)
{
  //  decoding, color conversion, etc.

  if (!firstFrame)
  {
    const double frameDuration = 1000.0 / frameRate;
    duration_t actualDelay = get_local_time() - lastTime;
    if (frameDuration > actualDelay)
      sleep(frameDuration - actualDelay); 
  }
  else
    firstFrame = false;

  emit newFrameReady(framecapsule);

  lastTime = get_local_time();
} 
```

`get_local_time()`并且`duration_t`是抽象的。

更准确的方法是对每一帧使用时间戳，但思路是一样的

# javascript - 什么是双向绑定？

> ID：13504906
> 
> 赞同：189
> 
> 时间：2012-11-22T02:02:50.133
> 
> 标签：javascript, data-binding, backbone.js

我读过很多关于 Backbone 不做双向绑定的文章，但我并不完全理解这个概念。

有人可以给我一个例子，说明两种方式绑定在 MVC 代码库中是如何工作的，以及它在 Backbone 中是如何工作的？

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-11-22T02:11:38.400

双向绑定只是意味着：

1.  当模型中的属性更新时，UI 也会更新。
2.  当 UI 元素更新时，更改会传播回模型。

Backbone 没有 #2 的“烘焙”实现（尽管您当然可以使用事件侦听器来实现）。像 Knockout 这样的其他框架[会自动连接双向绑定](http://knockoutjs.com/documentation/value-binding.html)。

[![在此处输入图像描述](../Images/4e84d48983f445299302e49c0ddfdbd1.png)](https://i.stack.imgur.com/2wouW.jpg)

* * *

在 Backbone 中，您可以通过将视图的“渲染”方法绑定到其模型的“更改”事件轻松实现 #1。要实现#2，您还需要向输入元素添加一个更改侦听器，并`model.set`在处理程序中调用。

这是一个在 Backbone 中设置双向绑定[的 Fiddle 。](http://jsfiddle.net/Xm5eH/9/)

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-12-09T18:26:46.430

双向绑定意味着影响模型的任何与数据相关的更改都会*立即传播*到匹配的视图，并且视图中所做的任何更改（例如，用户）都会*立即反映*在底层模型中. 当应用程序数据发生变化时，UI 也会发生变化，反之亦然。

在此基础上构建 Web 应用程序是一个非常可靠的概念，因为它使“模型”抽象成为一个安全的原子数据源，可以在应用程序的任何地方使用。比如说，如果绑定到视图的模型发生更改，那么它的匹配 UI 部分（视图）将反映这一点，*无论如何*。并且匹配的 UI（视图）可以安全地用作收集用户输入/数据的手段，从而保持应用程序数据的最新状态。

从开发人员的角度来看，一个好的双向绑定实现显然应该使模型和某些视图之间的这种连接尽可能简单。

说 Backbone 不*支持*双向绑定是完全*不真实的：虽然它不是框架的核心功能，但可以非常简单地使用 Backbone 的事件来执行。*对于简单的情况，它需要几行显式的代码；并且对于更复杂的绑定可能变得非常危险。这是一个简单的案例（未经测试的代码，只是为了说明而动态编写的）：

 *```
Model = Backbone.Model.extend
  defaults:
    data: ''

View = Backbone.View.extend
  template: _.template("Edit the data: <input type='text' value='<%= data %>' />")

  events:
    # Listen for user inputs, and edit the model.
    'change input': @setData

  initialize: (options) ->
    # Listen for model's edition, and trigger UI update
    @listenTo @model, 'change:data', @render

  render: ->
    @$el.html @template(@model.attributes)
    @

  setData: (e) =>
    e.preventDefault()
    @model.set 'data', $(e.currentTarget).value()

model: new Model()
view = new View {el: $('.someEl'), model: model} 
```

这是原始 Backbone 应用程序中非常典型的模式。正如人们所看到的，它需要相当数量的（相当标准的）代码。

[AngularJS](https://github.com/theironcook/Backbone.ModelBinder)和其他一些替代方案（[Ember](http://emberjs.com/)、[Knockout](http://knockoutjs.com/) ...）提供双向绑定作为第一公民功能。他们在某些 DSL 下抽象了许多边缘案例，并尽最大努力在其生态系统中集成双向绑定。使用 AngularJS，我们的示例看起来像这样（未经测试的代码，见上文）：

```
<div ng-app="app" ng-controller="MainCtrl">
  Edit the data:
  <input name="mymodel.data" ng-model="mymodel.data">
</div> 
```

```
angular.module('app', [])
  .controller 'MainCtrl', ($scope) ->
    $scope.mymodel = {data: ''} 
```

比较短！

但是，请注意， Backbone 也**确实存在一些***成熟*的双向绑定扩展（以原始的、主观的复杂性递减顺序）：[Epoxy](http://epoxyjs.org/)、[Stickit](http://nytimes.github.io/backbone.stickit/)、[ModelBinder](https://github.com/theironcook/Backbone.ModelBinder) ...</p>

**例如，Epoxy 的一件很酷的事情是，它允许您在模板 (DOM) 或视图实现 (JavaScript) 中声明绑定（模型属性 <-> 视图的 DOM 元素）。有些人非常不喜欢向 DOM/模板添加“指令”（例如 AngularJS 所需的 ng-* 属性，或 Ember 的数据绑定属性）。**

 **以 Epoxy 为例，可以将原始的 Backbone 应用程序改造成这样的东西（...）：

```
Model = Backbone.Model.extend
  defaults:
    data: ''

View = Backbone.Epoxy.View.extend
  template: _.template("Edit the data: <input type='text' />")
  # or, using the inline form: <input type='text' data-bind='value:data' />

  bindings:
    'input': 'value:data'

  render: ->
    @$el.html @template(@model.attributes)
    @

model: new Model()
view = new View {el: $('.someEl'), model: model} 
```

总而言之，几乎所有“主流” JS 框架都支持双向绑定。其中一些，例如 Backbone，确实需要一些额外的工作才能使其*顺利*运行，但它们是相同的，一开始并没有强制执行特定的方法。所以这真的是关于你的心态。

此外，您可能对[Flux](https://facebook.github.io/flux/)感兴趣，这是一种通过循环模式促进单向绑定的 Web 应用程序的不同架构。它基于在任何数据更改时快速、整体地重新呈现 UI 组件的概念，以确保内聚性并更容易推理代码/数据流。在同一趋势中，您可能想要检查 MVI（模型-视图-意图）的概念，例如[Cycle](https://github.com/staltz/cycle)。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-11-22T02:22:59.867

McGarnagle 有一个很好的答案，你会想接受他的，但我想我会提到（因为你问过）数据绑定是如何工作的。

它通常通过在对数据进行更改时触发事件来实现，然后导致侦听器（例如 UI）被更新。

双向绑定通过执行此操作两次来工作，并注意确保您不会陷入事件循环（事件的更新导致另一个事件被触发）。

本来想在评论里写的，但是太长了。。。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-22T17:36:52.987

实际上[`emberjs`](http://emberjs.com/)支持双向绑定，这是 javascript MVC 框架最强大的功能之一。您可以查看它[`binding`](http://emberjs.com/guides/object-model/bindings/)在其用户指南中提到的位置。

对于 emberjs，创建两种方式的绑定是通过在末尾创建一个带有字符串 Binding 的新属性，然后从全局范围指定一个路径：

```
App.wife = Ember.Object.create({
  householdIncome: 80000
});

App.husband = Ember.Object.create({
  householdIncomeBinding: 'App.wife.householdIncome'
});

App.husband.get('householdIncome'); // 80000

// Someone gets raise.
App.husband.set('householdIncome', 90000);
App.wife.get('householdIncome'); // 90000 
```

请注意，绑定不会立即更新。Ember 会等到所有应用程序代码完成运行后再同步更改，因此您可以根据需要多次更改绑定属性，而不必担心当值是瞬态时同步绑定的开销。

希望它有助于扩展所选的原始答案。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-02-28T09:12:15.443

**双向数据绑定**

当模型（业务逻辑）中的数据发生变化时，视图（html）会反映变化，当视图中的数据发生变化时，模型也会随之更新。

注意：这会立即自动发生，从而确保模型和视图始终更新。

[![在此处输入图像描述](../Images/dfc46f520ddffd4cb360d60b695d591b.png)](https://i.stack.imgur.com/yRae8.png)

**为什么我们需要双向数据绑定？**

双向数据绑定用于开发实时的交互式应用程序。这种类型的应用程序被称为 SPA（单页应用程序），在 Angular.js、React.js 和 Vue.js 等现代框架中开发

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-23T14:08:48.030

值得一提的是，有许多不同的解决方案可以提供两种方式绑定并且玩得非常好。

我对这个模型绑定器有过愉快的体验 - [https://github.com/theironcook/Backbone.ModelBinder](https://github.com/theironcook/Backbone.ModelBinder)。它提供了合理的默认值，但还有很多自定义 jquery 选择器将模型属性映射到输入元素。

[在github](https://github.com/documentcloud/backbone/wiki/Extensions,-Plugins,-Resources)上有一个更扩展的主干扩展/插件列表***

# java - 在另一个类中调用此方法将不起作用

> ID：13504912
> 
> 赞同：-3
> 
> 时间：2012-11-22T02:03:29.700
> 
> 标签：java, nullpointerexception

这段代码将 X 初始化为一个新的格式化程序变量。

```
 private Formatter X;
     public void Create() {
                    try{
                        X = new Formatter("users.txt");
                        X.format("%1$20s %2$20s %3$20s %4$20s %5$20s %6$20s %7$20s %8$20s %9$20s \n","Firstname","Lastname","Password","ID","Addressln1","Addressln2","Addressln3","EstimatedValue","Tax Owed");
                        System.out.println("Due to there not being any users file present one has been created.");
                    }
                    catch(Exception e){
                        System.out.println("There is a users file present so i will not create another one.");
                    }
                }
            } 
```

这是我遇到问题的一段代码，在 X.format 位，它一直给我一个空指针错误，我已经尝试了一切来修复它。

```
public void WriteToFilecmd(){
                Scanner input = new Scanner(System.in);
                System.out.println("Please enter your First name");
                String Fname = input.next();
                System.out.println("Please enter your Last name");
                String Lname = input.next();
                System.out.println("Please enter your Password");
                String Password = input.next();
                System.out.println("Please enter your user ID");
                String ID = input.next();
                System.out.println("Please enter the first address line of your Property");
                String addressln1 = input.next();
                System.out.println("Please enter the second address line of your Property");
                String addressln2 = input.next();
                System.out.println("Please enter the third address line of your Property");
                String addressln3 = input.next();
                System.out.println("Please enter the properties estimated market value");
                String EstimatedPropertyValue = input.next();
                System.out.println("Please enter your tax owed");
                String Taxowed = input.next();
                input.close();
                X.format("%1$20s %2$20s %3$20s %4$20s %5$20s %6$20s %7$20s %8$20s %9$20s \n",Fname,Lname,Password,ID,addressln1,addressln2,addressln3,EstimatedPropertyValue,Taxowed);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T02:12:23.453

密切关注这一行：

```
X.format("%1$20s %2$20s %3$20s %4$20s %5$20s %6$20s %7$20s %8$20s %9$20s \n",Fname,Lname,Password,ID,addressln1,addressln2,addressln3,EstimatedPropertyValue,Taxowed); 
```

变量`X`从何而来？如果它*定义*在高于此方法的级别（可能是类），则其中的值为`null`，并且您不能取消引用 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:16:44.497

确保 X（无论它是什么）已被初始化。

如果您不知道这意味着什么，例如：

```
Scanner scanner; // not initialized
Scanner scanner = new Scanner(System.in); // initialized 
```

不过，您不必在声明中初始化变量。这也将初始化变量：

```
Scanner scanner; // not initialized
scanner = new Scanner(System.in); // good job you init'd it! 
```

如果你不使用“new”设置变量，你会得到空指针异常。确保在调用 WriteToFilecmd 之前执行此操作。

显然，不要将你的x变量设置为“new Scanner(System.in)”，调用X类型的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T02:19:25.320

`NullPointerException`在线上

```
X.format("%1$20s %2$20s %3$20s %4$20s %5$20s %6$20s %7$20s %8$20s %9$20s \n",Fname,Lname,Password,ID,addressln1,addressln2,addressln3,EstimatedPropertyValue,Taxowed); 
```

意味着要么它`X`本身为空，要么方法抛出它。通常，Java 基础类`null`可以很好地处理参数（并且`Scanner#next()`无论如何都不返回 null）并且不包含错误，因此`X`目前很可能`null`正在使用它。

如果您的`create`方法捕获异常（请参阅控制台输出）、`X`稍后覆盖或根本不调用该`create`方法或调用它太晚，则可能会发生这种情况。

另请注意，口袋妖怪异常处理（“必须全部捕获” `catch(Exception e)`）是一种不好的做法。抓住你能处理的，而不是你能抓住的。

# php - 在 PHP 中定义一个带有变量名的类？

> ID：13504916
> 
> 赞同：0
> 
> 时间：2012-11-22T02:04:04.217
> 
> 标签：php, class, variables, dynamic

我希望能够按照这个顺序做一些事情

```
$name = "Hello".time().mt_rand();
class $name {
    function hellolol() {
        echo "LOL";
    }
}
$name::hellolol(); 
```

这样我就可以在 PHP 中构建一个可重新加载的模块系统。这甚至可能吗，如果是这样，我将如何做这样的事情？

编辑：我已经把它变成了一个项目，基本上按照接受的答案建议。这是一个链接： [https ://github.com/Modfwango/Modfwango](https://github.com/Modfwango/Modfwango)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:12:22.253

```
$name = "Hello".time().mt_rand();
eval(sprintf('
class %s {
    static function hellolol() {
        echo "LOL";
    }
}', $name));
$name::hellolol(); 
```

非常讨厌，但很适合嘲笑等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T02:14:28.193

这在技术上*是*可能的，只是以一种非常非常糟糕的方式。

首先，保存这个文件：

```
<?php
// GeneratedClass.php
class CLASSNAME {
    function hellolol(){
        echo "LOL";
    }
} 
```

然后，使用以下命令创建具有自定义名称的类：

```
<?php
function generate_class($name){
    eval('?>'.str_replace('CLASSNAME', $name, file_get_contents('GeneratedClass.php')));
}

generate_class("Hello".time().mt_rand()); 
```

同样，这**不是一个好主意！**除了任何与之相关的事情`eval`都可能是个坏主意之外，通过手动解析这些类，您将失去 IDE 为您提供的任何优势，文件不会被 memcached 之类的东西缓存，而且它完全是一个噩梦使用。但这是可能的。

# python - 如何编写一个计算列表中字母数量的函数？

> ID：13504919
> 
> 赞同：0
> 
> 时间：2012-11-22T02:04:32.057
> 
> 标签：python

如何编写一个计算列表中字母数量的函数？例如：

```
 letter_list=['a','b','a','c','b','a']

    letter_index={'a':0,'b':1,'c':2} 
```

我想得到以下结果：

```
 ([3,2,1]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:10:19.270

要获取列表中最常见的项目，或者只计算出现次数，请使用[Counter](http://docs.python.org/2/library/collections.html#collections.Counter)类。

```
from collections import Counter
letter_list=('a','b','a','c','b','a')
counter = Counter(letter_list)
print counter.most_common(1)
# Prints 'a' because it's the most common element 
```

从中您还可以获得每个元素的出现次数：

```
print counter['a'] # Prints 3

print counter.most_common() # Prints [('a', 5), ('r', 2), ('b', 2)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:20:48.373

只有一个小选择：

```
letter_list=('a','b','a','c','b','a')
def __get_res(lVals):
    unique = set(lVals)
    res = map(lVals.count, unique)
    return (max(unique, key=lVals.count), map(lVals.count, unique))

print __get_res(letter_list) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T02:09:23.840

尝试使用 dict 理解。此外，`letter_list`在您的示例中是 a `tuple`，而不是 a `list`。

```
>>> letter_list = ['a','b','a','c','b','a']    
>>> {x:letter_list.count(x) for x in letter_list}
{'a': 3, 'c': 1, 'b': 2} 
```

要获得列表中出现次数最多的项目，您可以使用**@BoppreH**`Counter`详述的模块，或者您可以执行类似的操作。

 **```
>>> max(set(letter_list), key=letter_list.count)
'b' 
```**

# .net - 查明电脑何时不使用

> ID：13504920
> 
> 赞同：2
> 
> 时间：2012-11-22T02:04:38.653
> 
> 标签：.net, user-inactivity

有没有办法从使用 .NET 的 Windows 上运行的所有应用程序中捕获所有键盘和鼠标事件？

我发现了一些类似的帖子，第一个是如何为您正在开发的应用程序执行此操作：[VB Detect Idle time](https://stackoverflow.com/questions/12636850/vb-detect-idle-time?answertab=oldest#tab-top)

以及显示如何查找桌面空闲多长时间的帖子：[检查用户是否处于非活动状态](https://stackoverflow.com/questions/10776027/c-sharp-user-inactive)

我尝试如下，基本上在我的主表单中使用一个计时器，每 10 秒调用一次 GetInactiveTime 并记录该时间，然后当 CurrentInactiveTime < LastInactiveTime 我引发一个事件。我正在寻找的是更实时和更精确的东西。

```
<StructLayout(LayoutKind.Sequential)> _
Public Structure LASTINPUTINFO
    Public cbSize As UInteger
    Public dwTime As UInteger
End Structure

<DllImport("user32.dll")> _
Friend Shared Function GetLastInputInfo(ByRef plii As LASTINPUTINFO) As Boolean
End Function

Public Shared Function GetInactiveTime() As TimeSpan
    Dim info As LASTINPUTINFO = New LASTINPUTINFO()
    info.cbSize = CUInt(Marshal.SizeOf(info))

    If GetLastInputInfo(info) Then
        Return TimeSpan.FromMilliseconds(Environment.TickCount - info.dwTime)
    Else
        Return Nothing
    End If
End Function

Sub Main()
    inactiveTimer = New Timer()
    inactiveTimer.Interval = 10000
    inactiveTimer.Enabled = True
    inactiveTimer.Start()

    Dim tempTime As DateTime = Now
    lastInactiveTime = tempTime - tempTime
End Sub

Private Sub inactiveTimer_Tick(sender As Object, e As EventArgs) Handles inactiveTimer.Tick
    Dim currentInactiveTime As TimeSpan = GetInActiveTime()
    Dim tempLastInactiveTime As TimeSpan = lastInactiveTime

    lastInactiveTime = currentInactiveTime

    If currentInactiveTime < tempLastInactiveTime Then
         RaiseEvent SomeEvent
    End IF
End Sub 
```

另外，我正在 Windows/VB.NET 环境中编程。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T03:10:15.883

我已经用这个解决方案来解决同样的问题。这是我在网上找到的代码，但我已经根据我的需要对其进行了调整。

您应该能够将其放入您的代码窗口并根据需要进行修改。

```
Public Structure LASTINPUTINFO
    Public cbSize As Int32
    Public dwTime As Int32

End Structure

Declare Function GetLastInputInfo Lib "User32.dll" (ByRef plii As LASTINPUTINFO) As Boolean

Private Sub IdleTimer_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles IdleTimer.Tick

    If ReportingEntireClass = False Then
        Dim LII As New LASTINPUTINFO, TicksSinceLastInput As Int32 = 0

        LII.cbSize = System.Runtime.InteropServices.Marshal.SizeOf(LII)

        If GetLastInputInfo(LII) Then TicksSinceLastInput = (Environment.TickCount - LII.dwTime)

        If TicksSinceLastInput >= IdleSeconds Then
            If IdleClosing = False Then
                IdleClosing = True
                Idle.ShowDialog() 'this is a little 
                                  'form that warns about the app closing.
            End If
        End If
    End If

End Sub 
```

# windows-7 - 脚本与直接执行的计划任务：问题

> ID：13504922
> 
> 赞同：2
> 
> 时间：2012-11-22T02:04:41.707
> 
> 标签：windows-7, vbscript, wmi, scheduled-tasks, wbem

我有一个 VBscript 文件，它通过我们的网络连接到远程计算机并启动 WBEM 脚本方法。我可以使用域用户帐户的凭据打开一个 CMD 控制台，该帐户在我们所有的台式计算机上都具有本地管理员权限，并且脚本会按需要执行。

我在 Windows Server 2003 成员服务器上创建了一个计划任务，该服务器使用相同的凭据运行相同的脚本文件，但它无法连接到远程计算机上的 WMI 提供程序。

桌面都是 Windows 7 SP1，域是 Windows Server 2008 级别（林和域）。

域用户帐户已添加到服务器上的本地管理员组，并通过组策略被授予“作为服务登录”权限。

问题：在交互式执行正常工作时，我是否还缺少其他可能导致计划任务失败的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-16T14:02:10.707

我遇到了同样的问题（脚本不作为计划任务运行，但可执行文件运行）。您可以通过执行以下操作来解决此问题：

在“动作”选项卡的属性页上的“**程序/脚本**”文本框下方有一个“**开始于（可选） ”文本框。**填写它以包含脚本的路径因此，如果您的脚本位于 c:\users\user\desktop\script.vbs，则文本框将如下所示：

 ****程序/脚本：** c:\users\user\desktop\script.vbs

**添加参数（可选）**

**开始于（可选）** c:\users\user\desktop**

# jsp - 在 JSP 中 import 在生成的 java 文件中引入 \r\n

> ID：13504925
> 
> 赞同：0
> 
> 时间：2012-11-22T02:05:15.517
> 
> 标签：jsp, import

在jsp文件中，这两条import语句可以在生成的java文件中引入两个“\n”：

```
<%@ page import="java.net.URLEncoder" %>
<%@ page import="java.util.ArrayList" %> 
```

在生成的文件中： out.write("\r\n\r\n");

如何避免这些新线路？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T06:04:54.990

```
<jsp-config>
    <jsp-property-group>
    <url-pattern>*.jsp</url-pattern>
    <trim-directive-whitespaces>true</trim-directive-whitespaces>
    </jsp-property-group>
</jsp-config> 
```

将此代码粘贴到您的 web.xml 文件中。它可能会修剪您的 html 页面中的所有必需空间。所以你需要保持不间断的空间。

或者

```
<%@ page trimDirectiveWhitespaces="true" %> 
```

将此代码粘贴到要修剪空白的每个 jsp 页面中。

# android - 如果手机处于横向模式，Android 相机预览方向不正确

> ID：13504926
> 
> 赞同：3
> 
> 时间：2012-11-22T02:05:29.107
> 
> 标签：android, android-camera

我在这里发现了很多关于 android 相机预览方向问题的问题。所有修复都涉及将屏幕方向固定为横向或调用 camera.setDisplayOrientation(90) 或调用 params.setRotation(90)。我找不到在横向放置时实际使其工作的设置组合。

活动通过 android:screenOrientation="landscape" 固定为横向模式。

我的问题是，如果我以纵向方向握住相机并启动应用程序，它可以正常工作（我的意思是它可以正确地将图像显示为风景）。如果我在启动应用程序时将相机保持在横向，那么图片就会变得一团糟（有点交错）。如果我使用 camera.setDisplayOrientation(90); 图片不再乱七八糟，但图像是侧向的。

奇怪的是，如果我删除 android:screenOrientation="landscape" 并允许屏幕旋转，我仍然会遇到同样的问题，但是如果我将手机旋转到纵向，纵向看起来很好。如果我将它旋转回横向，那么横向看起来很好！我唯一的问题是它在第一次启动时无法正常工作。

```
import java.util.List;

import android.content.Context;
import android.graphics.Color;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.hardware.Camera.Size;
import android.util.AttributeSet;
import android.util.Log;
import android.view.*;

public class CameraView extends SurfaceView
{    
    //Callback for the surfaceholder
    SurfaceHolder.Callback surfaceHolderListener = new SurfaceHolder.Callback() {
        public void surfaceCreated(SurfaceHolder holder) {
            try {
                camera=Camera.open();
            } catch(Exception e) {
                Log.e("CameraView","Couldn't open the camera.",e);
            }
            try {
                camera.setPreviewDisplay(previewHolder);
            } catch (Throwable e) {
                Log.e("CameraView","Couldn't call setPreviewDisplay.",e);
            }
        }

        public void surfaceChanged(SurfaceHolder surfaceHolder, int format, int w, int h) {
            if(camera!=null) {
                Parameters params = camera.getParameters();

                List<Size> sizes = params.getSupportedPreviewSizes();
                Size optimalSize = getOptimalPreviewSize(sizes, w, h);
                params.setPreviewSize(optimalSize.width, optimalSize.height);

                camera.setParameters(params);
                camera.startPreview();
            }
        }

        public void surfaceDestroyed(SurfaceHolder arg0) {
            if(camera!=null) {
                camera.setPreviewCallback(null);
                camera.stopPreview();
                camera.release();
            }
        }

        private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
            final double ASPECT_TOLERANCE = 0.05;
            double targetRatio = (double) w / h;
            if (sizes == null) return null;

            Size optimalSize = null;
            double minDiff = Double.MAX_VALUE;

            int targetHeight = h;

            // Try to find an size match aspect ratio and size
            for (Size size : sizes) {
                double ratio = (double) size.width / size.height;
                if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }

            // Cannot find the one match the aspect ratio, ignore the requirement
            if (optimalSize == null) {
                minDiff = Double.MAX_VALUE;
                for (Size size : sizes) {
                    if (Math.abs(size.height - targetHeight) < minDiff) {
                        optimalSize = size;
                        minDiff = Math.abs(size.height - targetHeight);
                    }
                }
            }
            return optimalSize;
        }
    };

    public CameraView(Context ctx) {
        super(ctx);

        previewHolder = this.getHolder();
        previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        previewHolder.addCallback(surfaceHolderListener);
        setBackgroundColor(Color.TRANSPARENT);
    }

    public CameraView(Context ctx, AttributeSet attrs) {
        super(ctx, attrs);
    }

    private Camera camera;
    private SurfaceHolder previewHolder;
} 
```

编辑：真正的问题似乎是在surfaceChanged 之后发生了一些事情，这把事情搞砸了。我发现如果我启动相机预览，然后在 surfaceChanged 的​​末尾添加一个调试点，相机看起来很好。然后，如果我向前走大约 20 步，它突然看起来搞砸了。

我通过使用方向更改侦听器准确地更新一次方向然后禁用自身来解决了这个问题（以我认为是一种完全破解的方式）。我只需要在最初设置视图后会激活的东西。我可能在其他地方也可以做到。

如果有人知道如何解决这个问题而不让它变得如此愚蠢，请帮忙！

```
/** This works fine for me, but it's a hack. */

import java.util.List;

import android.content.Context;
import android.graphics.Color;
import android.hardware.Camera;
import android.hardware.Camera.Parameters;
import android.hardware.Camera.Size;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.OrientationEventListener;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

public class CameraView3
    extends SurfaceView
{
    private static Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.05;
        double targetRatio = (double) w / h;
        if (sizes == null) return null;

        Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        // Try to find an size match aspect ratio and size
        for (Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        // Cannot find the one match the aspect ratio, ignore the requirement
        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    }

    private class CameraSurfaceHolder
        extends OrientationEventListener
        implements SurfaceHolder.Callback
    {
        CameraSurfaceHolder(Context ctx) {
            super(ctx);
        }

        public void surfaceCreated(SurfaceHolder holder) {
            try {
                camera= Camera.open();
            } catch(Exception e) {
                Log.e("CameraView","Couldn't open the camera.",e);
            }
            try {
                camera.setPreviewDisplay(previewHolder);
            } catch (Throwable e) {
                Log.e("CameraView","Couldn't call setPreviewDisplay.",e);
            }
        }

        public void surfaceChanged(SurfaceHolder surfaceHolder, int format, int w, int h) {
        }

        public void surfaceDestroyed(SurfaceHolder arg0) {
            if(camera!=null) {
                camera.setPreviewCallback(null);
                camera.stopPreview();
                camera.release();
            }
        }

        @Override
        public void onOrientationChanged(int orientation) {
            if(camera!=null) {
                DisplayMetrics dm = ctx.getResources().getDisplayMetrics();
                camera.stopPreview();
                CameraView3.this.layout(0, 0, dm.widthPixels-1, dm.heightPixels-1);
                camera.startPreview();
                disable();
                return;
            }
        }
    }

    public CameraView3(Context ctx) {
        super(ctx);
        this.ctx = ctx;

        previewHolder = this.getHolder();
        previewHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        surfaceHolderListener = new CameraSurfaceHolder(ctx);
        previewHolder.addCallback(surfaceHolderListener);
        surfaceHolderListener.enable();

        setBackgroundColor(Color.TRANSPARENT);
    }

    private Context ctx;
    private Camera camera;
    private SurfaceHolder previewHolder;
    private CameraSurfaceHolder surfaceHolderListener;
    private Size optimalSize;
} 
```

总之，我发布的第一个版本在我的 Nexus One 上运行良好。但是，它不适用于我的 Skyrocket。我需要使用第二个版本让它在那里工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T04:29:28.757

> 奇怪的是，如果我删除 android:screenOrientation="landscape" 并允许屏幕旋转，我仍然会遇到同样的问题，但是如果我将手机旋转到纵向，纵向看起来很好。

首先请注意，相机预览方向与 Activity 方向无关。两者是不同的。当您更改设备方向时，您必须调用`camera.setDisplayOrientation`以根据方向设置预览的方向。

您必须以度为单位设置此方向。这可以通过在相机视图中设置[OrientationEventListener来获得。](http://developer.android.com/reference/android/view/OrientationEventListener.html)在`onOrientationChanged(int orientation)`中，您将获得设备的准确旋转角度（以度为单位）。

不要忘记计算旋转，`onOrientationChanged(int orientation)`因为即使设备方向的角度变化很小，也会调用 API。您可以[将此](https://stackoverflow.com/questions/5160660/1-6-to-2-1-camerainfo-alternative)问题视为参考。

# ruby-on-rails - 控制器花费大量时间导致超时

> ID：13504928
> 
> 赞同：0
> 
> 时间：2012-11-22T02:05:40.590
> 
> 标签：ruby-on-rails

我有这样的代码

```
def validate

  if abc.nil?
    redirect_to :action => 'noInitialSelection'
  else
    redirect_to :action => 'Selection'
    script(params)
  end

end 
```

脚本方法必须处理一个包含 10000 个名称的文件并进行相关工作。现在的问题是代码完成需要很长时间，页面没有被重定向到选择并导致 500 内部服务器错误

我希望将页面重定向到“选择”，以便用户知道他输入了正确的详细信息，然后在后台执行脚本方法

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:23:42.797

您需要查看作业队列才能运行`script(params)`. 为此有多种宝石；一个非常流行的是**[delay_job](https://github.com/collectiveidea/delayed_job)**。

一旦你设置了delayed_job，你的方法可能看起来像

```
def validate
  if abc.nil?
    redirect_to :action => 'noInitialSelection'
  else
    Delayed::Job.enqueue ScriptJob.new(params)
    redirect_to :action => 'Selection'
  end
end 
```

您将独立创建一个自定义作业，例如

```
class ScriptJob < Struct.new(:params)
  def perform
    script(params)
  end
end 
```

`enqueue`调用将队列排入`script(params)`作业队列以供工作人员处理。

# python - 在python中处理get请求

> ID：13504929
> 
> 赞同：1
> 
> 时间：2012-11-22T02:05:41.790
> 
> 标签：python, html, get

如何使用发送 get 请求的客户端的 IP 地址？我的目标是为每个客户端创建唯一的文件，其中文件将被命名为客户端的 IP 地址。抱歉，我有一段时间没有使用 Python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:11:39.537

阅读文档。如果您打算使用标准库 HTTPServer，您可以看到它将在您的处理程序中向您发送客户端地址：

[BaseHTTPRequestHandler](http://docs.python.org/2/library/basehttpserver.html#BaseHTTPServer.BaseHTTPRequestHandler)

> **class BaseHTTPServer.BaseHTTPRequestHandler(request, client_address, server)**
> 此类用于处理到达服务器的 HTTP 请求。它本身无法响应任何实际的 HTTP 请求；它必须被子类化以处理每个请求方法（例如 GET 或 POST）。BaseHTTPRequestHandler 提供了许多类和实例变量，以及供子类使用的方法。
> 
> 处理程序将解析请求和标头，然后调用特定于请求类型的方法。方法名称是根据请求构造的。例如，对于请求方法 SPAM，将不带参数调用 do_SPAM() 方法。所有相关信息都存储在处理程序的实例变量中。子类不需要重写或扩展**init** () 方法。
> 
> ...
> client_address：
> 包含引用客户端地址的 (host, port) 形式的元组。

[SimpleHTTPRequestHandler](http://docs.python.org/2/library/simplehttpserver.html)

> **类 SimpleHTTPServer.SimpleHTTPRequestHandler(request, client_address, server)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-31T23:08:29.517

您可以按如下方式导入请求模块。

```
import requests

r = requests.get('https://api.github.com/user',

auth=('user', 'pass'))

r.status_code

r.encoding

r.json() 
```

可以通过此文档找到更多信息：http: [//docs.python-requests.org/en/master/](http://docs.python-requests.org/en/master/)

# c#-4.0 - 将附加程序附加到 Log4net 配置文件中的类

> ID：13504931
> 
> 赞同：2
> 
> 时间：2012-11-22T02:05:52.707
> 
> 标签：c#-4.0, log4net

我设法开始使用 Log4net，但我所有的课程都使用相同的附加程序。我希望某些类使用特殊的附加程序。

以下是我的日志文件：

```
<appender name="InfoRollingLogFileAppender" type="log4net.Appender.RollingFileAppender,log4net">
  <param name="File" value="C:\Test.log"/>
  <param name="RollingStyle" value="Date"/>
  <param name="DatePattern" value="_yyyy-MM-dd.log"/>
  <param name="StaticLogFileName" value="true"/>
  <maximumFileSize value="100KB" />
  <appendToFile value="true" />
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%newline ---------------START---------------------- %newline %date - %message %newline ----------------END--------------------- %newline" />
  </layout>
  <filter type="log4net.Filter.LevelRangeFilter">
    <levelMin value="DEBUG" />
    <levelMax value="DEBUG" />
  </filter>
  <filter class="log4net.Filter.DenyAllFilter"/>
</appender>

<root>
  <level value="DEBUG" />
  <appender-ref ref="InfoRollingLogFileAppender" />
</root> 
```

这是我在代码中使用它的方式：

```
private static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

然后记录我使用`log.Debug("Goes in Log File")`.

我的问题是如何为特定类设置不同的附加程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:59:16.990

您可以为每个记录器定义附加程序，在您的情况下转换为“每个类”：

```
<root>
   <level value="DEBUG" />
   <appender-ref ref="InfoRollingLogFileAppender" />
</root>
<logger name="YourNameSpace.YourClass" additivity="false">
   <level value="DEBUG" />
   <appender-ref ref="YourOtherAppender" />
</logger> 
```

重要的是`additivity`标志：没有它，根（或父）记录器中定义的附加程序将被继承。

# c - 将套接字绑定到 IPv6 地址

> ID：13504934
> 
> 赞同：8
> 
> 时间：2012-11-22T02:06:17.227
> 
> 标签：c, sockets, ipv6, ipv4, berkeley-sockets

我正在尝试编写一个同时监听 IPv4 和 IPv6 地址的 Web 服务器。但是，我最初编写的代码不起作用。然后我发现 IPv6 结构适用于 IPv4 和 IPv6。所以现在我使用 IPv6 结构，但只有 IPv4 地址有效。这篇文章，[为什么我不能将 ipv6 套接字绑定到链接本地地址](https://stackoverflow.com/questions/2455762/why-cant-i-bind-ipv6-socket-to-a-linklocal-address)，它说要添加`server.sin6_scope_id = 5;`所以我这样做了，但它仍然不接受 IPv6 telnet 连接。任何帮助将不胜感激，因为我完全被难住了。
谢谢！

我的代码如下：

```
void initialize_server(int port, int connections, char* address)
{
        struct sockaddr_in6 socket_struct;
        /*Creates the socket*/
        if ((sock_fd = socket(AF_INET, SOCK_STREAM, 0)) < 0)
        {
                syslog(LOG_ERR, "%s\n", strerror(errno));
                exit(EXIT_FAILURE);
        }/*Ends the socket creation*/

        /*Populates the socket address structure*/
                socket_struct.sin6_family = AF_INET6;

        if(address == NULL)
                socket_struct.sin6_addr=in6addr_any;
        else
        {
                inet_pton(AF_INET6, "fe80::216:3eff:fec3:3c22", (void *)&socket_struct.sin6_addr.s6_addr);
        }
        socket_struct.sin6_port =htons(port);
        socket_struct.sin6_scope_id = 0;
        if (bind(sock_fd, (struct sockaddr*) &socket_struct, sizeof(socket_struct)) < 0)
        {
                syslog(LOG_ERR, "%s\n", strerror(errno));
                exit(EXIT_FAILURE);
        }//Ends the binding.

        if (listen(sock_fd, connections) <0)
        {
                syslog(LOG_ERR, "%s\n", strerror(errno));
                exit(EXIT_FAILURE);
        }//Ends the listening function

}//ends the initialize server function. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-17T20:19:53.973

说“server.sin6_scope_id = 5;” 是任意的。我自己为此奋斗了一段时间，发现您需要使用要绑定的实际接口的实际范围。可以通过一个晦涩但有用的小功能找到它。

```
#include <net/if.h>
server.sin6_scope_id=if_nametoindex("eth0"); 
```

当然，将其硬编码到一个特定的适配器是不好的、短视的编码。更完整的解决方案是遍历所有这些并匹配您要绑定的 IP 地址。以下内容并不完美，因为它没有考虑诸如具有非规范地址和两个具有相同 ip 的适配器等的怪癖。但总的来说，这个示例函数效果很好，应该可以帮助您入门。

```
#include <string.h> // strcmp
#include <net/if.h> // if_nametoindex()
#include <ifaddrs.h> // getifaddrs()
#include <netdb.h> // NI_ constants

// returns 0 on error
unsigned getScopeForIp(const char *ip){
    struct ifaddrs *addrs;
    char ipAddress[NI_MAXHOST];
    unsigned scope=0;
    // walk over the list of all interface addresses
    getifaddrs(&addrs);
    for(ifaddrs *addr=addrs;addr;addr=addr->ifa_next){
        if (addr->ifa_addr && addr->ifa_addr->sa_family==AF_INET6){ // only interested in ipv6 ones
            getnameinfo(addr->ifa_addr,sizeof(struct sockaddr_in6),ipAddress,sizeof(ipAddress),NULL,0,NI_NUMERICHOST);
            // result actually contains the interface name, so strip it
            for(int i=0;ipAddress[i];i++){
                if(ipAddress[i]=='%'){
                    ipAddress[i]='\0';
                    break;
                }
            }
            // if the ip matches, convert the interface name to a scope index
            if(strcmp(ipAddress,ip)==0){
                scope=if_nametoindex(addr->ifa_name);
                break;
            }
        }
    }
    freeifaddrs(addrs);
    return scope;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T03:03:44.280

您正在`AF_INET`家庭中创建一个套接字，然后尝试将其绑定到`AF_INET6`家庭中的地址。`AF_INET6`在您的通话中切换到使用`socket()`.

# youtube-api - TypeError：通过 AJAX 删除/添加 iframe 时

> ID：13504935
> 
> 赞同：0
> 
> 时间：2012-11-22T02:06:17.937
> 
> 标签：youtube-api

我正在尝试调试此错误，并且可以使用一些建议：

```
TypeError: 'null' is not an object (evaluating 'a.a.contentWindow.postMessage')
www-widgetapi-vflsofjNm.js:19 
```

现在这发生在 Safari 版本 6.0.2 (7536.26.17) 中。基本流程是这样的：

我有一个带有容器的页面 - 我使用 jQuery 的 $.get() 将内容加载到这个容器中：

```
<div id="container">
<iframe id="player1"><iframe id="player2"><iframe id="player3">
</div> 
```

我可以使用 iFrame API 来停止容器中的任何视频。

```
var player1 = new YT.Player('player1');
console.dir(player1);
player1.stopVideo();
-> no error, video stops 
```

然后我将不同的内容加载到一个新容器中：

```
<div id="container">
<iframe><iframe><iframe>
</div>
<div id="anothercontainer"></div> 
```

并删除包含 iframe 的容器：

```
<div id="anothercontainer"></div> 
```

然后我重新添加 iframe（相同的 ID）并删除另一个容器：

```
<div id="container">
<iframe id="player1"><iframe id="player2"><iframe id="player3">
</div> 
```

在使用新的 iframe 将 iframe 加载到容器中（第二次）后，我再次调用 YT JS：

```
var player1 = new YT.Player('player1');
console.dir(player1);
player1.stopVideo();
-> no error, video stops 
```

console.dir(player1) 显示一个对象，但是当我调用 player1.stopVideo() 时，我得到了上面提到的错误。有任何想法吗？

# javascript - 解释 bindbind() 函数

> ID：13504936
> 
> 赞同：6
> 
> 时间：2012-11-22T02:06:37.127
> 
> 标签：javascript, functional-programming, function-binding

有人可以解释这个功能吗？

```
var bindbind = Function.prototype.bind.bind(Function.prototype.bind); 
```

我理解它产生的结果：

```
var bindedContextFunc = bindbind(function)(context);
bindedContextFunc(args); 
```

但不了解创建此功能的过程，我的意思是部分`bind(Function.prototype.bind)`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T02:52:45.483

好的。我们这里有三倍的`Function.prototype.bind`函数，其（简化）代码

```
function bind(context) {
    var fn = this;
    return function() {
        return fn.apply(context, arguments);
    }
} 
```

我将使用更多的部分应用程序以更实用的样式进行缩写： bind [fn] (context) -> fn [context]。

那么它有什么作用呢？你已经得到`bind.call(bind, bind)`或绑定[绑定]（bind）。让我们将其扩展为绑定[bind]。如果我们现在给它提供一些论据呢？

> 绑定[绑定](bind) *(fn) (上下文)*
> 
> 绑定[绑定]*（fn）（上下文）*
> 
> 绑定[*fn*]*（上下文）*
> 
> *上下文[_]*

我们到了。我们可以将其分配给一些变量以使结果更清晰：

> bindbind = 绑定[绑定]（绑定）
> 
> bindfn = 绑定[任何东西](fn)`//`绑定[fn]
> 
> contextbindfn = bindfn[任何东西]（上下文）`//`fn[上下文]
> 
> 结果 = contextbindfn[任何东西](args) `//`fn[上下文](args)

# ruby-on-rails - Rails：更改错误消息

> ID：13504939
> 
> 赞同：1
> 
> 时间：2012-11-22T02:07:15.047
> 
> 标签：ruby-on-rails, flash, message

我的错误消息没有自动显示，所以我决定使用*flash*作为解决方法。这就是我正在做的

**控制器：**

```
flash[:notice] = @post.errors.full_messages 
```

**看法：**

```
<%= flash[:notice] %> 
```

然后，我看到这个丑陋的错误消息。

```
["Content can't be blank", "Content is too short (minimum is 10 characters)"] 
```

但至少，用户成功地得到了错误信息。现在我需要自定义错误消息，让它看起来更漂亮一点。我想我可以将每个错误语句解析为一些局部变量并显示它们（有没有更复杂的方法？）。但是，我不知道如何自定义错误消息。例如，“内容不能为空”应更改为“您将内容留空”。我在哪里可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:16:09.513

发生的情况是，当 @post 包含一些验证错误时，会`@post.errors.full_messages`返回一组在验证期间发生的错误。

为了很好地展示它们，你可能想要做类似的事情

```
<%- flash[:notice].each do |error| %>
  <%= error %>
<% end %> 
```

**编辑** 哎呀，我误读了这个问题。

这些错误是模型中的验证错误，您可以在其中进行验证，例如

`validates`你可以像这样传递自定义消息

`validates :content, :presence => { :message => "You left the content blank" }`

**更新**：查看此链接以获取您拥有的选项

[http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates](http://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates)

# javascript - 使用 DataTables 突出显示列和行

> ID：13504943
> 
> 赞同：3
> 
> 时间：2012-11-22T02:08:10.167
> 
> 标签：javascript, datatables

我正在使用 DataTables 并将这个有点尴尬的 Javascript 组合在一起，以允许突出显示行和列。它基于此页面上的示例（[http://datatables.net/release-datatables/examples/api/highlight.html](http://datatables.net/release-datatables/examples/api/highlight.html)）。

以下是 dataTable 配置的相关部分：

```
$(文档).ready(函数() {
    $('#franchise_history').dataTable( {
        “bPaginate”：假，
        “bLengthChange”：假，
        “bFilter”：真，
        “bSort”：假，
        “bInfo”：是的，
        “bAutoWidth”：真，
        "sScrollY": "100%",
        "sScrollX": "100%",
        “asStripeClasses”：[]，
        “fnInitComplete”：函数（conf，json）{
            var tbl = $($.fn.dataTable.fnTables(true)).dataTable();
            $('td', tbl.fnGetNodes()).hover( function() {
                var iCol = $('td').index(this) % some_constant;
                var nTrs = tbl.fnGetNodes();
                $('td:nth-child('+(iCol+1)+')', nTrs).addClass('highlighted');
            }， 功能（） {
                $('td.highlighted', tbl.fnGetNodes()).removeClass('highlighted');
            });
      }
});
});
```

`some_constant`由服务器上的模板代码插入。这是列数。这是 DataTables 调试输出：[http](http://debug.datatables.net/oceqix) ://debug.datatables.net/oceqix这是它源自[http://pro-football-history.com/franchise/37/pittsburgh-steelers-coaches的页面](http://pro-football-history.com/franchise/37/pittsburgh-steelers-coaches)

如您所见，将鼠标悬停在列上并不能正确突出右列。这里出了什么问题？当谈到 Javascript 时，我非常一无所知，而且我基本上处于我的 JavaScript 调试能力的极限。如果任何答案也解释了他们为找到它所经历的调试过程，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:38:08.467

看起来像以下行中的问题

```
 var iCol = $('td').index(this) % some_constant; 
```

更改为以下内容应该可以解决您的问题：

```
var iCol = $('td', this.parentNode).index(this) % some_constant; 
```

问题是它`$('td')`为您提供了文档中的所有 TD，但您只需要为当前行获取它们。

# php - 修改 phpcs 的 PEAR 标准

> ID：13504950
> 
> 赞同：5
> 
> 时间：2012-11-22T02:08:29.647
> 
> 标签：php, pear, codesniffer

我想为我们的 phpcs 验证对 PEAR 标准做一个小的改动。目前 PEAR 要求您编写这样的 else 语句：

```
} else { 
```

我们想这样写它们：

```
}
else { 
```

我该如何进行此更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T21:45:37.883

这样做的唯一方法是使用 ruleset.xml 文件编写您自己的编码标准。它需要导入整个 PEAR 编码标准，但排除执行此检查的特定嗅探。这一点可以用单个 XML 文件来完成。

但是没有内置的嗅探器可以强制执行`else`您正在寻找的语法类型。因此，为了强制执行，您需要编写一个自定义嗅探，这更复杂，因为您还必须将它存储在某个地方。

如果您想从尝试简单的自定义编码标准开始，请创建一个名为的文件`ruleset.xml`并将其作为内容：

```
<?xml version="1.0"?>
<ruleset name="MyStandard">
 <description>My custom coding standard.</description>
 <rule ref="PEAR">
  <exclude name="PEAR.ControlStructures.ControlSignature"/>
 </rule>
</ruleset> 
```

然后像这样运行 PHP_CodeSniffer：

```
phpcs --standard=/path/to/ruleset.xml /path/to/code 
```

这将根据 PEAR 编码标准检查您的代码，但不包括对控制结构的特定检查。如果这就是你所需要的，你可以停在那里。如果您有一个团队想要运行此自定义标准，只需将文件提供给他们，他们也可以使用它。

这里有关于 ruleset.xml 格式的更多信息：[https ://github.com/squizlabs/PHP_CodeSniffer/wiki/Annotated-ruleset.xml](https://github.com/squizlabs/PHP_CodeSniffer/wiki/Annotated-ruleset.xml)

如果您想继续编写自定义嗅探，最好从基本教程开始：http: [//pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial。 php](http://pear.php.net/manual/en/package.php.php-codesniffer.coding-standard-tutorial.php)

这将解释什么是编码标准。然后，您需要创建自己的嗅探器，它只是 PEAR 的一个副本，对您控制结构的方式稍作更改。PEAR 嗅探在这里：[https ://github.com/squizlabs/PHP_CodeSniffer/blob/master/CodeSniffer/Standards/PEAR/Sniffs/ControlStructures/ControlSignatureSniff.php](https://github.com/squizlabs/PHP_CodeSniffer/blob/master/CodeSniffer/Standards/PEAR/Sniffs/ControlStructures/ControlSignatureSniff.php)

未经测试，我假设您想更改`} else {EOL',`为`}EOLelse {EOL',`并查看是否有效。

# linux - 符号 -、< 和 > 是什么意思？

> ID：13504954
> 
> 赞同：0
> 
> 时间：2012-11-22T02:09:37.737
> 
> 标签：linux, bash, unix, pipe

我在一本书中读到了这个例子：

```
 cp /bin/cat proj33
 echo -n x | ./proj33 - pipe33a > pipe33b &
./proj33 <pipe33b >pipe33a & 
```

符号`-`和含义是什么`>`？`<`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T02:14:15.650

是`>`I/O 重定向；它将命令 () 的标准输出发送`./proj33`到文件`pipe33b`。

`<`符号也是I/O重定向；它从文件中发送命令的标准输入（`./proj33`再次）`pipe33b`。

这`-`只是一个论点。它通常被命令视为读取标准输入而不是文件的指示。在这种情况下，很可能`proj33`通常需要一个文件作为它的第一个参数，但是当参数是`-`. 有时，`-`用于指示标准输出。在极端情况下，您可以`-`在单个命令上获得一个指示标准输入和一个指示标准输出。使用 GNU `tar`，您可以`tar -c -f - -T -`将输出写入标准输出 ( )，并从标准输入 ( )`-f -`读取要归档的文件列表。`-T -`

如果你看到`--`，那是非常不同的；它表示命令的“选项结束”；后面的任何内容都不是一个选项，即使它以 dash 开头`-`。

# django - Django：STATIC_* 和 MEDIA_* 完全相同，但应用程序仍在生产中运行

> ID：13504957
> 
> 赞同：0
> 
> 时间：2012-11-22T02:10:16.567
> 
> 标签：django

我目前正在开发一个 Django 1.3 应用程序，其中`MEDIA_ROOT`和`STATIC_ROOT`是相同的，并且`MEDIA_URL`和`STATIC_URL`是相同的。

这（以某种方式）在生产服务器上运行，但是当我在本地调用时，`manage.py runserver`我得到一个`ImproperlyConfigured`异常，并且只能在我覆盖设置时运行应用程序，这`MEDIA_*`与`STATIC_*`（`DEBUG=False`只给出 500）不同。这是我期望发生的（[根据文档](https://docs.djangoproject.com/en/dev/howto/static-files/)），所以我不明白他们如何让它在生产中工作。

该应用程序的原始开发人员已经离开，所以我不能问任何问题，因为他们是如何设法让它工作的。有没有一种已知的方法来规避 Django 的静态和媒体文件分离？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T02:04:42.937

不是一个很好的答案，因为它是如此具体，但答案是他们只是从不运行应用程序`DEBUG=True`（runserver 将愉快地运行，并且设置`DEBUG=False`不正确）。没有灵丹妙药，应用程序似乎是使用 mod_wsgi 创建的错误日志进行调试的（没有日志记录到位）。我假设这也是开发环境的设置方式。`MEDIA_*``STATIC_*`

该应用程序还值得注意的是，它在不在`PYTHONPATH`. 这是在将新应用程序添加到包含新应用程序`manage.py`并存在导入错误的文件夹时发现的。我认为这是为了让多个 django 安装可以使用同一组应用程序。

感谢玉姬的帮助。

# facebook - Facebook Graph API 中的回溯

> ID：13504959
> 
> 赞同：2
> 
> 时间：2012-11-22T02:10:44.980
> 
> 标签：facebook, facebook-graph-api

有没有办法访问在主页时间轴上回溯的帖子、链接或照片的日期？

Graph API 提供创建时间和更新时间，但不显示它在时间线上的位置。

例如，我可以在 2012 年 11 月 16 日发布一个链接，并将其设置为 12 年 10 月 31 日，而我可以通过 Graph API 访问的只有 2012 年 11 月 16 日的日期。

是否有与里程碑提供的“start_time”类似的字段？在这种情况下，创建时间可能与开始时间不同。

感谢大家。

# c# - C#混淆方法

> ID：13504961
> 
> 赞同：5
> 
> 时间：2012-11-22T02:11:04.820
> 
> 标签：c#, arrays, testing

我一直在努力理解我必须了解的测试方法发生了什么，我很难弄清楚我得到结果的原因，任何关于“f “方法有效，非常感谢

```
class Program {
  static void Main(string[] args)
  {
    A b = new A(); b.y = b.x;
    b.f(b.y); b.g();
    Console.WriteLine(b.x[0] + " " + b.x[1]); // Prints 1 7
    Console.WriteLine(b.y[0] + " " + (b.x[1] + b.y[1])); // 1 14
  }
}

public class A {
  public int[] x = {1, 2};
  public int[] y;
  public void f(int[] z)
  {
      z[1] += 5;
  }

  public void g()
  {
      A a = new A ();
      a.x[0]++;
      a.x[1]--;
  }
} 
```

让我解释一下我所理解的，通过被创建为一个数组并获取 bx 中的值，现在，当我们调用 bf 时，我们通过该方法传递 [1, 2]，现在，这就是我卡住的地方, z 似乎是 by 数组，因此它具有 [1, 2] 作为值，当该方法将 5 添加到位置 1（即 2）的元素时，我得到 [1, 7] 作为结果，当方法结束，我的程序以某种方式返回到主程序，并且 bx 两者现在都是 [1, 7]，这是怎么发生的？，我认为该方法只是在修改 by，因为这是通过的方法。此外，g 函数不会添加任何内容，因为“a”值是在方法结束时“死亡”的局部变量，对吧？我希望有人能帮助我，我必须通过这个测试！谢谢 ;]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:21:54.057

开始了：

*   一个名为的新变量`b`被初始化为`A`.
*   创建`b`时，它将值设置`b.x`为`{1, 2}`。
*   `b.y`然后分配给`b.x`，但是，因为它们是数组，所以它们现在引用相同的数据。
*   `b.f`被调用，并且已经`b.y`传递给它（记住，那个`b.y`和`b.x`现在正在引用相同的数据）。`f`本质上，z 在函数期间也指向相同的数据。
*   `b.f`将 5 添加到共享数据的索引 1 处的值，即 2。所以 2 + 5 = 7。
*   首先`Console.WriteLine`打印`b.x[0]`仍然是 1。然后打印`b.x[1]`现在是 7（如上）。
*   第二次`Console.WriteLine`打印`b.y[0]`，仍然是 1（因为它们共享相同的数据）。然后它打印`b.x[1]`+ `b.y[1]`。它们都共享相同的数据。索引 1 处的数据是 7\. 7 + 7 = 14。

您对该`g`方法是正确的，因为该变量是本地的并且不执行任何操作。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:17:38.987

```
b.y = b.x; 
```

这行代码仅将变量中保存的引用复制`x`到`y`变量中。所以这两个变量都引用了同一个数组。因此，您只有一个数组和两个引用它的变量。

```
public void g(){...} 
```

此方法创建一个新元素，对其进行处理但不将其存储在任何地方，因此在方法返回后它会丢失（上面没有引用，它已准备好被垃圾收集）。

![在此处输入图像描述](../Images/3d1b49abc7fbb71aa65772d62ea13d75.png)

尝试阅读[价值与参考](http://en.csharp-online.net/Value_vs_Reference)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T02:35:51.977

您只是对编程语言中所谓的“身份”感到困惑。作为一个简单的观点，编程语言中有两类值：纯值和具有标识的值。

纯值可能意味着一些不同的东西，但基本上它们遵循您期望的行为，即。每个子程序都有自己的数组 X 的“副本”，该数组 X 与给定 X 的所有其他子程序隔离。

具有身份的值不符合上述复制行为。实例 X在 X 传递到的所有子程序之间*共享。*这意味着所有子程序都会看到所有其他子程序所做的更改。

一般来说，在 .NET/C# 文档中，具有标识的值称为引用类型。.NET 的值类型是一种具有复制语义的“纯值”。但是值类型可以包含具有标识的值，而引用类型可以有意地遵守纯度，所以它不一定那么简单。

# c++ - 为什么 vector.reserve(2) 后跟 v[0] = 2 被认为不正确？

> ID：13504967
> 
> 赞同：3
> 
> 时间：2012-11-22T02:11:41.467
> 
> 标签：c++, memory, stl, vector

因此，据我了解，reserve 不会初始化抽象，而只是分配空间以包含它们。但是，不应该 v[0] 总是给你第一个未初始化的内存并且不应该给它分配一个值总是有效的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T02:13:00.487

因为`reserve`不会改变向量的大小。它只将向量移动到内存中的一个位置，该位置有足够的空间允许向量的大小在必要时增加。

如果你想确保你可以调用`v[0]=2`，甚至`v[1]=0`，你应该使用`resize(2)`，而不是`reserve(2)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T02:33:10.687

因为它调用未定义的行为。库编写者可以合法地将 begin() 的地址保留为 nullptr，直到您调整大小。或将其设置为 0xBAADFOOD。或者在写入硬盘时格式化硬盘。

现在，更有可能发生的是，这是未初始化的内存。所以没有什么可怕的事情发生，除了调试中的一堆断言，以及向量关于它的状态而无法修复它的事实。

# java - jar eclipse 启动配置 - 这是什么意思，我如何在我的示例中使用它？

> ID：13504974
> 
> 赞同：-1
> 
> 时间：2012-11-22T02:12:25.933
> 
> 标签：java, eclipse

我有两个项目 P1 和 P2。P2 依赖于 P1，两者都有自己的 main。我正在尝试将两者都转换为 JARS。

当我尝试将 P1 制作成 JAR 时，我看到一个对话框，其中包含“启动配置”字段。我不知道这是做什么的。我把P1输入进去，罐子就准备好了。我得到这个正确吗？

我也想用P2做一个罐子。我在启动配置中输入什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T03:10:31.797

**启动配置**：选择“Java 应用程序”启动配置以用于创建可运行的 JAR。

如果您已经在 Eclipse 中“**运行**”或**设置了**该项目的运行配置，您可以在启动配置的下拉列表中找到相应的**启动配置**。

![在此处输入图像描述](../Images/1c6cf95e96a59f5cb6360e1315540c20.png)

因此，您需要做的是为正确的 jar 指定正确的配置。一个以 P1 的 main 方法为 P1 开头，另一个以 P2 的 main 方法为 P2 开头。

# php - PHP 网址变量

> ID：13504979
> 
> 赞同：-1
> 
> 时间：2012-11-22T02:12:55.183
> 
> 标签：php, html

```
<html>
<body>
<p> Hello. </p>
<? $d="0"; ?>
<? if($d=="1"){ echo "D equals 1";} ?>
</body>
</html> 
```

我已经把上面的代码放到了一个名为 test.php 的文件中。但是，当我转到 sitename.com/test.php?d=1 时，它不会回显任何内容。我的代码是错误的，还是 php.ini 中的某些内容需要更改？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:15:07.593

有2个问题：

首先，您声明 $d 并将其设置为 0，然后再检查它是否为 1。

其次，要获取 GET 变量的值，请使用 $_GET['d'] 而不是仅使用 $d。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T02:16:40.210

工作代码：

```
<html>
<body>
<p> Hello. </p>
<?php $d = $_GET['d'] ?>
<?php if($d=="1"){ echo "D equals 1";} ?>
</body>
</html> 
```

编辑：或者，以更易读的方式：

```
<?php
   $d = $_GET['d'];
   if ($d == '1') {
      echo 'D equals 1';
   }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T02:16:46.733

$phpVariable = $_GET['URL-VARIABLE-NAME'];

# git - 追溯签署 git 提交

> ID：13504983
> 
> 赞同：5
> 
> 时间：2012-11-22T02:13:33.060
> 
> 标签：git, security, version-control, commit, gnupg

最新版本的 git (>= 1.7.9) 支持使用 GPG 对单个提交进行签名。

是否可以追溯签署树中的所有提交？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T03:16:46.587

来自(aka ) 选项`git commit`的签名是用于生成标识提交的 sha1 哈希的数据的一部分。因此，追溯签署提交将需要更改已完成的每个提交的 ID。`--gpg-sign``-S`

如果你真的想要，你可能会用 做一些事情`git filter-branch`，但最好只签署新的提交。由于所有祖先的提交 ID 将影响将由任何新提交签名的数据，这仍然允许 gpg 通过新的签名提交来验证旧提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:13:13.480

> 追溯签署树中的所有提交？

是：添加一个[标签，您将签署](http://learn.github.com/p/tagging.html#signed_tags)。
这实际上是签署提交时的[首选选项](https://softwareengineering.stackexchange.com/questions/149199/why-do-some-open-source-projects-do-not-accept-pull-requests-but-emailing-patch/149202#149202)：通过标签签署所有提交，而不是单独签署每个提交。
请参阅“[如何在 post-receive hooks 中获取 pusher 的信息？](https://stackoverflow.com/a/11280900/6309) ”。

* * *

请注意（2017 年 5 月更新）只有 Git 2.13.x/2.14（2017 年第三季度）将完全修复签名过程，因为“ `git cherry-pick`”和其他使用定序器机器并错误处理了最后一行是不完整行的拖车块。
已修复此问题，以便在完成现有的不完整行*后添加额外的签核等。*

请参阅[Jonathan Tan (](https://github.com/jhowtan) [)的](https://github.com/jhowtan)[提交 44dc738](https://github.com/git/git/commit/44dc738a39f2c4dba41c0ddacae280d0f88dc71f)（2017 年 4 月 26 日） 。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 6ebfa10](https://github.com/git/git/commit/6ebfa10439e50175f24874b39c16fea6560adefe))^(中，2017 年 5 月 16 日）)[`jhowtan`](https://github.com/jhowtan)
^([`gitster`](https://github.com/gitster))

> ## `sequencer`: 在添加页脚之前添加换行符

> 当遇到不以换行符结尾的提交消息时，sequencer 在确定是否应添加空行之前不会完成该行。
> 这会导致“ `(cherry picked...`”和签核行**有时与提交消息的最后一行出现在同一行**。
> 
> 此行为由[提交 967dfd4](https://github.com/git/git/commit/967dfd4d568c2b102281de8cc22ee35f7558358b)（“序列器：使用预告片的预告片布局”，2016-11-29）引入。但是，恢复该提交并不能完全解决此问题：在该提交之前， `has_conforming_footer()`如果没有终止换行符，则符合标准的页脚被视为不符合标准，导致符合标准和不符合标准的页脚被视为相同当他们不应该的时候。
> 
> 解决此问题，适用于符合要求的页脚和不符合要求的页脚，以及在`do_pick_commit()`and中`append_signoff()`，**如果在检查页脚的一致性之前，如果提交消息不以一个结尾，则始终在提交消息中添加换行符**。

* * *

使用 Git 2.29（2020 年第四季度），这将更加可靠。

请参阅[提交 842385b](https://github.com/git/git/commit/842385b8a4fa56678f13cda599ee96463004e7bf)、[提交 9dad073](https://github.com/git/git/commit/9dad073d4b9b6679c3e86f28aacf79f85ed786d2)、[提交 26e28fe](https://github.com/git/git/commit/26e28fe7bbdf8b22ed096dfd76a9311e86ffb200)、[提交 75d3bee](https://github.com/git/git/commit/75d3bee15778a3aaeb8234023fc224838ac53181)、[提交 20f4b04](https://github.com/git/git/commit/20f4b044a681fffd469cc9ddcf055580a20fd612)、[提交 5b9427e](https://github.com/git/git/commit/5b9427e0ac4d4b6c96f23fc5eb9b047a27563c65)、[提交 8d2aa8d](https://github.com/git/git/commit/8d2aa8dfac4048c964453a8983f1dc12ecdfe1c3)、[提交 424e28f](https://github.com/git/git/commit/424e28fcadfe0a40e444687c10fb4eaff8360f8d)、[提交 e885a84](https://github.com/git/git/commit/e885a84f1bc660adfc1dea5f6c25d0a92c7c9dbc)、[提交 185e865](https://github.com/git/git/commit/185e86522678fed077d6cec02381bcf899bf24e5)（2020 年 9 月 30 日），作者是[Jeff King（`peff`）](https://github.com/peff)。
^(（由[Junio C Hamano 合并 -- `gitster`--](https://github.com/gitster)在[提交 19dd352](https://github.com/git/git/commit/19dd352d03adc75d0b6530975a44b7bb23c69063)中，2020 年 10 月 5 日）)

> ## [`sequencer`](https://github.com/git/git/commit/9dad073d4b9b6679c3e86f28aacf79f85ed786d2)`ignore_footer`:解析预告片时的句柄
> 
> ^(签字人：杰夫·金)

> 该`append_signoff()`函数接受一个`"ignore_footer"`参数，该参数指定消息缓冲区末尾不应考虑的字节数（它们不能包含预告片，并且预告片被拼接在它们之前）。
> 
> 但是要找到现有的预告片，它会调用`has_conforming_trailer()`. 该函数需要一个`ignore_footer`参数，但由于[967dfd4d56](https://github.com/git/git/commit/967dfd4d568c2b102281de8cc22ee35f7558358b) (" `sequencer`: use trail's trail layout", 2016-11-02, Git v2.12.0-rc0 -- [merge](https://github.com/git/git/commit/8b0db484e11aa86e6b8bf4d7243d0c81bf4b3c33)列在[批次 #2](https://github.com/git/git/commit/6610af872f6494a061780ec738c8713a034b848b)中），该参数被完全忽略。
> 
> 我们使用的预告片接口采用单个字符串，没有选项告诉它使用字符串的一部分。但是，由于我们有一个 mutable `strbuf`，我们可以通过简单地用 覆盖（然后恢复）边界来解决这个问题`NUL`。
> 
> 我不确定这是否真的会在实践中触发错误。通过执行以下操作很容易获得非零值`ignore_footer`：
> 
> ```
> git commit -F - --cleanup=verbatim <<-EOF
> subject  
> 
> body  
> 
> Signed-off-by: me  
> 
> # this looks like a comment, but is actually in the
> # message! That makes the earlier s-o-b fake.
> EOF  
> 
> git commit --amend -s 
> ```
> 
> 有 git-commit 调用`ignore_non_trailer()`来计算“#” cruft，它成为`ignore_footer`标题。但即使没有这个补丁它也能工作！那是因为预告片代码*也*调用`ignore_non_trailer()`并跳过了代码。所以它恰好起作用，因为唯一具有非零的调用者`ignore_footer`正在使用与预告片解析器内部使用的完全相同的函数。
> 
> 对于所有当前的调用者来说，这似乎都是正确的，但没有任何保证。我们最好首先只将正确的缓冲区提供给预告片代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-24T18:57:06.943

您可以尝试从要开始签署提交的位置创建一个新分支。我最近为我在没有访问我的私钥的机器上创建的一个分支做了这个：

```
# git checkout -b new-branch <last-signed-commit>
# git cherry-pick <first-unsigned-commit>
# git checkout unsigned-branch
# git rebase new-branch 
```

这要求您的 Git 配置为自动签署您的提交，并且显然不应该有太多的合并提交，否则 rebase 会看起来很奇怪。如果有疑问，请挑选您的提交；然后将签署每个选择的提交。

# java - 类文件应该位于哪个文件夹以供 JSP 访问？

> ID：13504985
> 
> 赞同：1
> 
> 时间：2012-11-22T02:13:45.453
> 
> 标签：java, jsp, jakarta-ee, netbeans, classpath

如果您使用 Netbeans IDE，您需要将类文件保存在哪个文件夹中以供 JSP 访问它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T02:18:26.977

我最好的猜测是`WEB-INF/classes`您的 WAR 文件中的文件夹。

# windows - 用于从注册表中删除/添加的批处理文件 if 语句

> ID：13504987
> 
> 赞同：0
> 
> 时间：2012-11-22T02:14:07.390
> 
> 标签：windows, if-statement, batch-file, registry

我想知道是否有人可以告诉我如何创建一个批处理文件，如果它存在则从注册表中删除键/值，如果不存在则添加它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T05:58:15.467

我做了一个功能：

```
@Echo OFF

:: By Elektro H@cker

REM CALL :REGIF "KEY\SUBKEY" 
REM or
REM CALL :REGIF "KEY\SUBKEY" /V "VALUE"

REM Examples:
Call :REGIF "HKLM\Key that fails"
Call :REGIF "HKCU\Software\Microsoft\Windows\Shell\BagMRU"
Call :REGIF "HKCU\Software\Microsoft\Windows\Shell\BagMRU" /V "MRUListEx"
Pause&Exit

:REGIF
REG QUERY %* 1>NUL 2>&1 && (
    REG DELETE %* /F 1>NUL
    Echo [+] Key deleted: %* | MORE
) || (
    REM added value is default SZ type.
    REG ADD %* /F >NUL
        Echo [+] Key added: %* | MORE
)
GOTO:EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:34:26.650

干得好

```
set name=HKLM\SOFTWARE\key /v value
reg query %name%
if %errorlevel%==0 (
reg delete %name% /f
) else (
if %errorlevel%==1 reg add %name% /d "data" /f
) 
```

# sql - Access(SQL) - 计算不同的字段并按字段名称分组

> ID：13504991
> 
> 赞同：1
> 
> 时间：2012-11-22T02:14:23.977
> 
> 标签：sql, ms-access-2007

我正在使客户端成为访问数据库，并且被困在如何解决我正在做的事情上。

我有一张桌子，上面有类似的东西 我有一张名为 Observations 的桌子，上面有类似

```
Error Identified | Error Cat | ... | So on
No               |           |     |
Yes              | Dave3     |     |
Yes              | Dave      |     |
Yes              | Dave3     |     |
Yes              | Dave5     |     |
Yes              | Dave      |     |
Yes              | Dave6     |     |
Yes              | Dave6     |     |
Yes              | Dave      |     | 
```

我想计算 [Error Identified] 为 yes 的每个 [Error Cat] 的出现次数

所以它会bb

```
Error Cat | Count |
Dave      |   3   |
Dave3     |   2   |
Dave5     |   1   |
Dave6     |   2   | 
```

发生这种情况的 Access SQL 是什么

我很努力，但它只是不会运行 SQL 请帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T02:15:57.243

```
SELECT ErrorCat, COUNT(*) totalCount
FROM tableName
WHERE ErrorIdentified = 'YES'
GROUP BY ErrorCat 
```

# objective-c - 为什么我的观点会扭曲？

> ID：13504992
> 
> 赞同：1
> 
> 时间：2012-11-22T02:14:26.260
> 
> 标签：objective-c, uiview, uiimageview, uitoolbar

我的视图由视图顶部和底部的工具栏和介于两者之间的 imageView 组成。

我正在向我的图像视图添加子视图。

添加子视图时，整个视图有时会失真。imageView 将拉伸，工具栏和栏按钮项目也会移动。

这是什么原因造成的？有没有人遇到过这个？

解决此问题的建议？

注意：我已经在 Interface Builder 中设置了这个视图，而不是以编程方式。

谢谢！

# java - Java SSLSocket：PKIX 路径构建失败

> ID：13504999
> 
> 赞同：0
> 
> 时间：2012-11-22T02:15:36.830
> 
> 标签：java, sockets, ssl

我想使用 SSL 连接连接到我们的大学服务器。

我在配置文件夹中有以下文件：
- client.policy
- uni_keystore.jks
- uni_server.cer
- uni_truststore.jks

client.policy 文件包含以下内容：

```
grant { 
  permission java.security.AllPermission ;
}; 
```

与服务器的连接已建立，但是当我尝试从服务器读取时出现异常：

```
javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: 
  PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException:
  unable to find valid certification path to requested target 
```

这就是我连接到服务器的方式（我修剪了 try/catch 块以缩短代码）：

```
Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
SSLSocketFactory factory = (SSLSocketFactory)SSLSocketFactory.getDefault();

String configPath = "C:/eclipse/workspace/uniproject/";

Properties systemProps = System.getProperties();
systemProps.put( "javax.net.ssl.trustStore", configPath+"uni_truststore.jks");
systemProps.put( "javax.net.ssl.keyStore", configPath+"uni_keystore.jks");
System.setProperties(systemProps);

s = (SSLSocket) factory.createSocket(UNI_ADDRESS, UNI_PORT); 
```

我正在通过我的 VPN 连接到服务器。

这就是我尝试阅读的方式（我修剪了 try/catch 块以缩短代码）：

```
InputStream istream = s.getInputStream();
BufferedReader reader = new BufferedReader( new InputStreamReader(istream) );

String data;
do {
    // this lines throws exception
    data = reader.readLine();
    System.out.println(data);
}
while(data != null); 
```

我没有对代码中的 client.policy 和 uni_server.cer 文件做任何事情。这可能是问题吗？我错过了什么？

谢谢。

* * *

还有两件事：

-我安装了认证（在这篇文章之前，我没有）
-我添加了以下行：

```
systemProps.put( "javax.net.ssl.keyStorePassword", "pass"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T02:22:14.890

尝试像这样重新排序您的呼叫：

```
String configPath = "C:/eclipse/workspace/uniproject/";
Properties systemProps = System.getProperties();
systemProps.put( "javax.net.ssl.trustStore", configPath+"uni_truststore.jks");
systemProps.put( "javax.net.ssl.keyStore", configPath+"uni_keystore.jks");
System.setProperties(systemProps);

Security.addProvider(new com.sun.net.ssl.internal.ssl.Provider());
SSLSocketFactory factory = (SSLSocketFactory)SSLSocketFactory.getDefault();
s = (SSLSocket) factory.createSocket(UNI_ADDRESS, UNI_PORT); 
```