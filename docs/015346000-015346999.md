# StackOverflow 问答 15346000-15346999

# sql-server - 将存储为文本数据类型的数字转换为 int

> ID：15346002
> 
> 赞同：7
> 
> 时间：2013-03-11T18:36:27.063
> 
> 标签：sql-server, sql-server-2008-r2

我有一个导入结果的数据库。数据库是可交付的，我没有自己进行导入，也无法访问原始数据来自己进行。话虽如此，有一个整数值被导入到文本数据类型。所有存储的值都是有效整数。我不断得到：

```
Explicit conversion from data type text to int is not allowed. 
```

如果我尝试更改表中的字段数据类型。我还在表中创建了一个新的 INT 字段，并尝试根据 TEXT 字段中的值对其进行更新，但我收到了同样的错误。最后，我尝试创建一个新表并尝试插入旧值，但无法成功转换或强制转换为 int。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T18:51:53.317

这似乎有效：`CONVERT(INT, CONVERT(VARCHAR(MAX),myText))`

**编辑：**

我不完全确定内部转换的最佳选择是什么...选择`VARCHAR(N)`with`N > 10`或`VARCHAR(MAX)`具有不通过截断来防止溢出的优点（假设溢出是这种情况下的首选行为）。

此外，转换为`INT`似乎将前导空格视为零。因此`VARCHAR(MAX)`减少了错误归零的机会。例如：

```
CREATE TABLE #foo ( bar TEXT )

INSERT INTO #foo
VALUES ('                                                 10')

SELECT CONVERT (INT, CONVERT(VARCHAR(MAX),bar)) FROM #foo -- 10
SELECT CONVERT (INT, CONVERT(VARCHAR(10),bar)) FROM #foo -- 0 
```

最好的办法可能是进行一些验证，以确保输入满足您的任何要求。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-09T08:15:24.747

TextValue 到 Int 的直接转换是不可能的，所以

1.  将 TextValue 转换为 varchar(max)
2.  varchar(max) 到 int 或 bigint

## 例子 ：

```
convert(int, (convert( varchar(max),'TextValue'))) as ColumnName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T11:52:35.573

您需要将文本类型转换为 varchar(x)，之后您可以强制转换或转换为 int。为了避免双重转换，我更喜欢演员。

```
CAST(CONVERT(VARCHAR(50),CONFIG_VALUE) AS INT) 
```

完整示例：

```
DECLARE @age int;

SET @age = (SELECT CAST(CONVERT(varchar(50),@yourTextVarHere) AS INT))
SELECT @age 
```

# sql - 使用 SQL 查询创建过滤器

> ID：15346003
> 
> 赞同：-1
> 
> 时间：2013-03-11T18:36:28.107
> 
> 标签：sql, sql-server, database, relational-database

我正在尝试使用 SQL 查询创建过滤器，但在链接到其他表的数值时遇到问题。

每次我尝试链接到另一个表时，它都会采用相同的记录并为另一个表中的每个元素重复它。

例如，这里是查询：

> **SELECT**
> ELEMENTS.RID,TAXONOMIES.SHORT_DESCRIPTION,[type],ELEMENT_NAME,ELEMENT_ID,SUBSTITUTION_GROUPS.DESCRIPTION,namespace_prefix,datatype_localname
> **FROM**
> ELEMENTS,SUBSTITUTION_GROUPS,TAXONOMIES,SCHEMAS,DATA_TYPES其中 ELEMENTS.TAXONOMY_ID = TAXONOMIES.RID 和 =
> **ELEMENTS.ELEMENT_SCHEMA** AND ELEMENTS.DATA_TYPE_ID = DATA_TYPES.RID 和 ELEMENTS.SUBSTITUTION_GROUP_ID = 0

最后一行是实际的过滤条件。

这是一个示例结果： ![在此处输入图像描述](../Images/687541f2fabe64a4baa52d976035be75.png)

应该只有一个结果（项目的 RID 为 0）。但它为替换组表中的每个结果重复一个记录的副本（有 4 个）。

这是我的数据库架构供参考。线条表示表格之间的关系，圆圈表示我想要的值： ![在此处输入图像描述](../Images/b732232902a94bafa369da5883b65c54.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:39:59.537

您忘记在查询`ELEMENTS`之间加入。`SUBSTITUTION_GROUPS`

```
SELECT
ELEMENTS.RID,TAXONOMIES.SHORT_DESCRIPTION,[type],ELEMENT_NAME,ELEMENT_ID,SUBSTITUTION_GROUPS.DESCRIPTION,namespace_prefix,datatype_localname
FROM
ELEMENTS,SUBSTITUTION_GROUPS,TAXONOMIES,SCHEMAS,DATA_TYPES
WHERE
ELEMENTS.TAXONOMY_ID = TAXONOMIES.RID AND ELEMENTS.ELEMENT_SCHEMA_ID = SCHEMAS.RID
AND ELEMENTS.DATA_TYPE_ID = DATA_TYPES.RID
AND ELEMENTS.SUBSTITUTION_GROUP_ID = SUBSTITUTION_GROUPS.RID
AND ELEMENTS.SUBSTITUTION_GROUP_ID = 0 
```

# java - 从用户代理字符串中检测移动设备

> ID：15346006
> 
> 赞同：12
> 
> 时间：2013-03-11T18:36:36.793
> 
> 标签：java, user-agent

我正在寻找一种方法来分析用户代理字符串以确定它们是否由移动设备生成。这需要基于 java 并且可用于 hadoop 上的大批量日志文件分析以生成统计信息（即，不适合使用 Web 服务）。

我见过[WURFL](http://wurfl.sourceforge.net/)，但鉴于我只需要二进制移动/非移动响应，许可费似乎令人望而却步。

到目前为止，我一直在使用[UADetector](http://uadetector.sourceforge.net)，这几乎正是我所需要的。但是，我遇到了一些限制。在我的测试中，我发现许多用户代理字符串提供了足够的信息来确定用户代理来自移动设备，但被 UADetector 报告为 UNKNOWN。

例如，标准差的 Android 应用可以发送 UA 字符串“Android”。这足以知道它来自移动设备，但 UADetector 将此 UserAgentType 报告为 UNKNOWN 而不是 MOBILE_BROWSER。

[Apache Mobile Filter](http://www.apachemobilefilter.org/)的[Lite Device Detection](http://litedetection.apachemobilefilter.org/)是正确的，但我需要一些可以从 Java 中使用的东西。

谁能推荐一个更好的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-09T01:45:44.267

我是 MobileESP 项目的创始人和维护者，这是一个用于检测移动设备的免费开源跨平台库。它仍然非常活跃！:-)

[www.mobileesp.org](http://www.mobileesp.org)

MobileESP*只*给出二进制“是移动的”响应。您可以按 iOS、Android 或 Windows Phone 等平台或按设备类别（如“iPhone Tier”智能手机与平板电脑）进行检测。请务必快速查看 API 页面。

您可能知道，用户代理字符串变化很大。如果设备附带浏览器，制造商可能会对其进行定制。例如，HTC 经常自定义原生 Android 浏览器的用户代理字符串。

Google 提供了有关 OEM 应如何自定义用户代理的建议。如果该设备应被视为手机，则 Google 建议在字符串中包含单词“mobile”元素。但如果该设备应被视为平板电脑，则该字符串不应*包含*“mobile”。当然，对这一建议的遵守情况差异很大。

像 Opera 或 Maxthon 这样的第三方浏览器可以在用户代理字符串中放入任何他们想要的东西——然后就可以了！某些“新”浏览器将保持无名，在为每个平台（例如，Android 与 iOS 版本）在其用户代理字符串中放置正确信息方面做得很差。除非您从这些浏览器获得大量流量并希望投资于跟踪每个平台和软件版本的确切用户代理值，否则您无能为力。

无论如何，MobileESP 的创建目的是在提供页面时逐页进行检测。我也特意编写了易于阅读和自定义的代码。

要进行批处理，您可以执行以下操作：

1.) 在构造函数中，注释掉 initDeviceScan() 方法。您不需要它来进行批量处理。

2.) 将 UserAgent 和一个空字符串传递给构造函数 (UAgentInfo())。

3.) 然后运行您感兴趣的任何检测方法。根据对用户的扫描，仔细考虑执行它们的顺序以节省时间。

例如，如果您的大多数用户都使用 iPhone，并且这是您感兴趣的检测标准之一，那么首先运行该检查。如果是这个例子，你肯定不会先运行 BlackBerry 方法！

我的联系信息在源代码和网站上。如果您有任何问题或遇到任何错误，请给我发送便条。一定要在 MobileESP.org 网站上查看一些提示。

祝您项目顺利，Aniket！

*   安东尼

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-17T09:10:28.767

另一个线程建议使用以下库：

[https://github.com/ahand/mobileesp/blob/master/Java/UAgentInfo.java](https://github.com/ahand/mobileesp/blob/master/Java/UAgentInfo.java)

这似乎没问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T22:40:05.093

如何读取 JSP 中的 Apache Mobile Filter 值（对于 Tomcat）？

在必须配置 mod_jk 的 httpd.conf 文件之前，您必须添加以下内容：

```
JkEnvVar AMF_IS_MOBILE undefined 
```

Java代码是：

```
request.getAttribute("AMF_IS_MOBILE") 
```

来自：[http ://wiki.apachemobilefilter.org](http://wiki.apachemobilefilter.org)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-12T11:39:42.927

51Degrees 有一个免费的开源 Java API，允许您运行离线处理。您可以从此处的 GitHub 存储库访问它。[https://github.com/51Degrees/Java-Device-Detection](https://github.com/51Degrees/Java-Device-Detection)。

作为 API 的一部分，有一个离线处理示例（代码如下所示），它采用用户代理的 CSV 文件并将所需的属性返回到输出文件中。以下示例仅使用数据集中的 3 个属性，完整列表您可以在此处查看字典[https://51degrees.com/resources/property-dictionary](https://51degrees.com/resources/property-dictionary)

```
// output file in current working directory
public String outputFilePath = "batch-processing-example-results.csv";
// pattern detection matching provider
private final Provider provider;

/**
 * Initialises the device detection Provider with the included Lite data
 * file. For more data see: 
 * <a href="https://51degrees.com/compare-data-options">compare data options
 * </a>
 * 
 * @throws IOException if there was a problem reading from the data file.
 */
public OfflineProcessingExample() throws IOException {
    provider = new Provider(StreamFactory.create(
            Shared.getLitePatternV32(), false));
 }

/**
 * Reads a CSV file containing User-Agents and adds the IsMobile, 
 * PlatformName and PlatformVersion information for the first 20 lines.
 * For a full list of properties and the files they are available in please 
 * see: <a href="https://51degrees.com/resources/property-dictionary">
 * Property Dictionary</a>
 * 
 * @param inputFileName the CSV file to read from.
 * @param outputFilename where to save the file with extra entries.
 * @throws IOException if there was a problem reading from the data file.
 */
public void processCsv(String inputFileName, String outputFilename) 
        throws IOException {
    BufferedReader bufferedReader = 
            new BufferedReader(new FileReader(inputFileName));
    try {
        FileWriter fileWriter = new FileWriter(outputFilename);
        try {
            // it's more efficient over the long haul to create a match 
            // once and reuse it in multiple matches
            Match match = provider.createMatch();
            // there are 20k lines in supplied file, we'll just do a couple 
            // of them!
            for (int i = 0; i < 20; i++) {

                // read next line
                String userAgentString = bufferedReader.readLine();

                // ask the provider to match the UA using match we created
                provider.match(userAgentString, match);

                // get some property values from the match
                Values isMobile = match.getValues("IsMobile");
                Values platformName = match.getValues("PlatformName");
                Values platformVersion = match.getValues("PlatformVersion");

                // write result to file
                fileWriter.append("\"")
                        .append(userAgentString)
                        .append("\", ")
                        .append(getValueForDisplay(isMobile))
                        .append(", ")
                        .append(getValueForDisplay(platformName))
                        .append(", ")
                        .append(getValueForDisplay(platformVersion))
                        .append('\n')
                        .flush();
            }
        } finally {
            fileWriter.close();
        }
    } finally {
        bufferedReader.close();
    }
}

/**
 * Match values may be null. A helper method to get something displayable
 * @param values a Values to render
 * @return a non-null String
 */
protected String getValueForDisplay(Values values) {
    return values == null ? "N/A": values.toString();
} 

/**
 * Closes the {@link fiftyone.mobile.detection.Dataset} by releasing data 
 * file readers and freeing the data file from locks. This method should 
 * only be used when the {@code Dataset} is no longer required, i.e. when 
 * device detection functionality is no longer required, or the data file 
 * needs to be freed.
 * 
 * @throws IOException if there was a problem accessing the data file.
 */
@Override
public void close() throws IOException {
    provider.dataSet.close();
}

/**
 * Instantiates this class and starts 
 * {@link #processCsv(java.lang.String, java.lang.String)} with default 
 * parameters.
 * 
 * @param args command line arguments.
 * @throws IOException if there was a problem accessing the data file.
 */
public static void main(String[] args) throws IOException {
    System.out.println("Starting Offline Processing Example");
    OfflineProcessingExample offlineProcessingExample = 
            new OfflineProcessingExample();
    try {
        offlineProcessingExample.processCsv(Shared.getGoodUserAgentsFile(), 
                offlineProcessingExample.outputFilePath);
        System.out.println("Output written to " + 
                offlineProcessingExample.outputFilePath);
    } finally {
        offlineProcessingExample.close();
    }
} 
```

希望这可以帮助。

披露：我在 51Degrees 工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-11T05:22:13.853

可以使用检测iPhone、Android等移动设备`Java` `user-agent`。如果您使用的是 Spring，您可以根据需要自定义以下代码。

```
@Override
public ModelAndView redirectToAppstore(HttpServletRequest request) {
    String userAgent = request.getHeader("user-agent").toLowerCase();
    String iphoneStoreUrl = "IPONE_STORE_URL";
    String androidStoreUrl = "ANDROID_STORE_URL";
    if (userAgent.contains("iphone"))
        return new ModelAndView("redirect:" + iphoneStoreUrl);
    else if (userAgent.contains("android"))
        return new ModelAndView("redirect:" + androidStoreUrl);

    return new ModelAndView("redirect:/");
} 
```

# c# - 分离的 PKCS#7 CMS 具有强大的私钥保护

> ID：15346009
> 
> 赞同：1
> 
> 时间：2013-03-11T18:36:45.400
> 
> 标签：c#, cryptography, digital-signature

我需要生成一个 PKCS#7/CMS 分离签名，我知道我可以很容易地做到这一点：

```
byte[] data = GetBytesFromFile(cheminFichier);

        X509Certificate2 certificate = null;
        X509Store my = new X509Store(StoreName.My,StoreLocation.CurrentUser);
        my.Open(OpenFlags.ReadOnly);
        X509Certificate2Collection certColl = X509Certificate2UI.SelectFromCollection(my.Certificates, "Test" , "Choose a certificate" , X509SelectionFlag.SingleSelection);
        certificate = certColl[0];

        if (certificate == null) throw new Exception("No certificates found.");

        //byte [] pfxFile = certificate.Export(X509ContentType.Pfx);
        //X509Certificate2 certPfx = new X509Certificate2(pfxFile);

        ContentInfo content = new ContentInfo(new Oid("1.2.840.113549.1.7.1"),data);
        SignedCms signedCms = new SignedCms(content, true);

        CmsSigner signer = new CmsSigner(certificate);
        signer.DigestAlgorithm = new Oid("SHA1"); // sha1

        // create the signature
        signedCms.ComputeSignature(signer);
        return signedCms.Encode(); 
```

但！此应用程序的用户使用强私钥保护导入他们的证书。我找到了一些关于这方面的信息，有人说这种类型的案例在 .NET 框架中无法工作，这让我感到惊讶。我想知道是否有人有解决方法，或者对此有解决方案。

基本上，我的用户给我一个文件名（PDF 或 RTF），然后我在我的商店中搜索他们的证书，我使用与之关联的私钥来生成签名。我希望此时用户被要求输入他的私钥密码，这样应用程序就不会收到密码。

# matlab - 如何在不设置 Matlab 应用程序路径的情况下使用 Matlab xunit

> ID：15346016
> 
> 赞同：3
> 
> 时间：2013-03-11T18:37:24.510
> 
> 标签：matlab, xunit

就我们所见，要在 Matlab 中使用库，必须将其路径添加到全局 Matlab 应用程序路径，例如，要使用 xunit 单元测试库，必须通过用户界面将其路径添加到全局路径。这样做的问题是：

*   每个开发人员必须在他们的机器、测试机器和构建机器等上正确设置依赖路径，才能正确运行代码
*   我们不能为每个开发人员集中设置路径，所以当依赖关系发生变化时，我们必须发出指令让个人手动更改他们的配置
*   如果不同的项目使用不兼容的依赖项，则必须在更改的项目之间重新配置路径

对于 C++\C#\Java 等项目，可以从项目内引用具有相对路径的库，而无需更改全局环境变量。

我们如何使用 Matlab 实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:46:23.413

您可以使用`addpath`和`rmpath`命令手动编辑 MATLAB 的路径。通过这两个命令添加的路径可以是相对路径。

# meteor - 如何使会话变量反应？

> ID：15346018
> 
> 赞同：3
> 
> 时间：2013-03-11T18:37:35.327
> 
> 标签：meteor

我正在运行 Meteor 0.5.7，并尝试在用户单击提交时显示引导警报消息。

**客户端.js**

```
Handlebars.registerHelper('isSuccessful',function(input){
  return Session.get("success");
});    

Template.form.events({
  'click .submit' : function (event, template) {
     if (condition) {
        Session.set("success", true);
        // hide warning, show success
        $('#valid_form').show();
        $('#invalid_form').hide();
     } else {
        Session.set("success", false);
        // hide success, show warning
        $('#valid_form').hide();
        $('#invalid_form').show();
     }
  } 
});

Template.form.rendered = function () { $('.alert').hide();}; 
```

**page.html**

```
<body>
   {{> page}}
</body>

<template name='page'>
  {{> form}}
</template>

<template name='form'>
   <!-- Show Alerts Above Form -->
   <div class="alert alert-success" id="valid_form">..</div>
   <div class="alert" id="invalid_form">..</div>

   {{#if isSuccessful}}
     <div>SHOW CONFIRMATION PAGE</div>
   {{else}}
    <div>SHOW INPUT FIELDS</div>
   {{/if}}
   <div>   
</template> 
```

当用户最初点击提交并且不满足条件时，他们必须再次点击提交才能获得警告消息。所有其他时间逻辑都有效。

我看过这个 - [Meteor 的反应在幕后是如何工作的？](https://stackoverflow.com/questions/10260015/how-does-meteors-reactivity-work-behind-the-scenes)，并重新阅读有关响应式编程部分的 Meteor 文档，但仍有一些问题。

客户端中的 else 语句不应该默认为成功 == false 的会话变量，并且车把模板会立即在 {{else}} 块中拾取它吗？有点糊涂。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T05:15:38.530

我的问题的答案似乎是在车把注册助手中将 return Session.get("success") 更改为 return Session.equals("success",true) 可以解决问题。从我正在阅读的内容来看，它的“失效”较少？- 不知道那是什么意思atm，但这是一个开始！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:03:43.153

如果您的目的是隐藏/显示某个条件的相关警报，您可以这样做：

**客户端.js**

```
Template.form.rendered = function() {
  // hide all alerts when elements are rendered
  $('.alert').alert('hide');
}

Template.form.events({
  'click .submit' : function (event, template) {
    if (condition) {
      // hide warning, show success
      $('#valid_form').alert();
      $('#invalid_form').alert('hide');
    } else {
      // hide success, show warning
      $('#valid_form').alert('hide');
      $('#invalid_form').alert();
    } 
  } 
}); 
```

**page.html**：

```
<body>
  {{> page}}
</body>

<template name='page'>
  {{> form}}
</template>

<template name='form'>
  <div class="alert alert-success" id="valid_form">..</div>
  <div class="alert" id="invalid_form">..</div>
</template> 
```

# windows-phone-7 - 为 windows phone os 构建一个短信计数应用程序

> ID：15346019
> 
> 赞同：0
> 
> 时间：2013-03-11T18:37:39.567
> 
> 标签：windows-phone-7, sms, windows-phone-8

伙计们，我正计划构建一个应用程序来计算**用户在一段时间内发送的短信**数量。但我不确定 WP OS SDK 是否可以访问编写这样一个应用程序的深度。我还是很新移动开发，并且由于微软**限制了**对 windows phone 操作系统中某些 API（例如：语言）的访问，我不确定我是否可以这样做。
相反，我要构建的应用程序是许多基本手机中内置的一种基本功能。我需要开始构建应用程序，并且在我的个人手机上也可能派上用场！;)
任何遇到过任何相关功能的人都可以帮助我了解他的经验。感谢您抽出宝贵的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:31:05.790

Windows Phone SDK 不允许开发人员出于隐私原因访问 SMS 消息的内容（或这些消息的数量，就此而言）。

您目前最好（也是唯一）的选择是让用户使用[SmsComposeTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394005%28v=vs.105%29.aspx)并计算*可能*从您的应用发送的消息数量。

# c# - 通过 TCP 发送文本字符串？

> ID：15346020
> 
> 赞同：4
> 
> 时间：2013-03-11T18:37:39.913
> 
> 标签：c#, .net, string, tcp

为了理解 TCP 客户端和服务器，我刚刚阅读并测试了[这篇精彩文章的代码。](http://codeincodeblock.blogspot.com/2011/11/tcp-client-and-server-sample-example.html)

现在我需要做（我希望）非常简单的事情**，我需要将一些字符串从 TCP 客户端发送到 TCP 服务器。**

> 该字符串是序列化的对象，实际上是一个 XML。

我不明白我必须在 TCP 客户端和 TCP 服务器中包含此代码的位置。

TCP客户端：

```
static void Main(string[] args)
    {

        while (true)
        {
            String server = "192.168.2.175"; // args[0]; // Server name or IP address

            // Convert input String to bytes
            byte[] byteBuffer = Encoding.ASCII.GetBytes("1024"); // Encoding.ASCII.GetBytes(args[1]);

            // Use port argument if supplied, otherwise default to 8080
            int servPort = 1311;  // (args.Length == 3) ? Int32.Parse(args[2]) : 8080;//7 ;

            TcpClient client = null;
            NetworkStream netStream = null;

            try
            {
                // Create socket that is connected to server on specified port
                client = new TcpClient(server, servPort);

                Console.WriteLine("Connected to server... sending echo string");

                netStream = client.GetStream();

                // Send the encoded string to the server
                netStream.Write(byteBuffer, 0, byteBuffer.Length);

                Console.WriteLine("Sent {0} bytes to server...", byteBuffer.Length);

                int totalBytesRcvd = 0; // Total bytes received so far
                int bytesRcvd = 0; // Bytes received in last read

                // Receive the same string back from the server
                while (totalBytesRcvd < byteBuffer.Length)
                {
                    if ((bytesRcvd = netStream.Read(byteBuffer, totalBytesRcvd,
                    byteBuffer.Length - totalBytesRcvd)) == 0)
                    {
                        Console.WriteLine("Connection closed prematurely.");
                        break;
                    }
                    totalBytesRcvd += bytesRcvd;
                }
                Console.WriteLine("Received {0} bytes from server: {1}", totalBytesRcvd,
                Encoding.ASCII.GetString(byteBuffer, 0, totalBytesRcvd));

            }
            catch (Exception ex)
            {
                // http://stackoverflow.com/questions/2972600/no-connection-could-be-made-because-the-target-machine-actively-refused-it
                Console.WriteLine(ex.Message);
            }
            finally
            {
                if (netStream != null)
                    netStream.Close();
                if (client != null)
                    client.Close();
            }
            Thread.Sleep(1000);
        }

    } 
```

**TCP 服务器**

```
class Program
{

    private const int BUFSIZE = 32; // Size of receive buffer

    static void Main(string[] args)
    {

        int servPort = 1311; // (args.Length == 1) ? Int32.Parse(args[0]) : 8080;

        TcpListener listener = null;

        try
        {
            // Create a TCPListener to accept client connections
            listener = new TcpListener(IPAddress.Any, servPort);
            listener.Start();
        }
        catch (SocketException se)
        {
            // IPAddress.Any
            Console.WriteLine(se.ErrorCode + ": " + se.Message);
            //Console.ReadKey();
            Environment.Exit(se.ErrorCode);

        }

        byte[] rcvBuffer = new byte[BUFSIZE]; // Receive buffer
        int bytesRcvd; // Received byte count
        for (; ; )
        { // Run forever, accepting and servicing connections
            // Console.WriteLine(IPAddress.Any);
            TcpClient client = null;
            NetworkStream netStream = null;
            //Console.WriteLine(IPAddress.None);

            try
            {
                client = listener.AcceptTcpClient(); // Get client connection
                netStream = client.GetStream();
                Console.Write("Handling client - ");

                // Receive until client closes connection, indicated by 0 return value
                int totalBytesEchoed = 0;
                while ((bytesRcvd = netStream.Read(rcvBuffer, 0, rcvBuffer.Length)) > 0)
                {
                    netStream.Write(rcvBuffer, 0, bytesRcvd);
                    totalBytesEchoed += bytesRcvd;
                }
                Console.WriteLine("echoed {0} bytes.", totalBytesEchoed);

                // Close the stream and socket. We are done with this client!
                netStream.Close();
                client.Close();

            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                netStream.Close();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:50:10.547

您给出的示例是一个简单的“镜像”，TCP 服务器将其从客户端接收到的数据发送回客户端。

您要发送的数据在 byteBuffer 变量中（我相信您当前正在发送文本“1024”）。因此，您可以使用所需的 XML 序列化数据对其进行初始化，而不是使用“1024”对其进行初始化。

相反，在客户端，您可以简单地在服务器端对数据（即您的 XML 对象）执行任何您需要的操作，而不是将数据回显给客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:54:31.990

将我的评论转换为答案：

我强烈建议你使用 WCF，而不是自己实现所有的东西。在 WCF 中，您创建接口（服务契约）和实现（服务），并且框架将所有通信/协议细节抽象出来。

您可以使用[WCF Duplex](http://realfiction.net/go/113)在服务器和客户端之间进行双向通信

# jquery - div在chrome中重叠

> ID：15346024
> 
> 赞同：1
> 
> 时间：2013-03-11T18:37:51.910
> 
> 标签：jquery, html

我的 div 在 chrome（最新版本）中重叠，它们在 Firefox 和 Internet Explorer 中都很好。我做了一个真正快速和简化的jsfiddle，所以你可以明白我的意思，如果用谷歌浏览器打开你可以看到它重叠。有谁知道发生了什么？我尝试放入一个“清晰”的 div，但似乎没有做任何事情。我是初学者，所以请记住这一点。谢谢你。

[http://jsfiddle.net/QXz8P/7/](http://jsfiddle.net/QXz8P/7/)

![在此处输入图像描述](../Images/76082afff0f54acbc390222ac3c655c4.png)

```
<div id="container">
<div id="thumbnails">
                    <div class="web" id="art1">
                        <img src="http://www.warrenphotographic.co.uk/photography/bigs/03534-Silver-tabby-cat-white-background.jpg" id="img1"/>
                        <div class="caption1">
                            <p id="thumbnailTitle">Title</p>
                            <p id="thumbnailSubtitle">SUBTITLE</p>
                        </div>
                    </div>
                    <div class="graphic" id="art2">
                        <img src="http://www.southbham.cats.org.uk/uploads/images/pages/cat-stalking-crop.jpg" id="img2"/>
                        <div class="caption2">
                            <p id="thumbnailTitle">Title</p>
                            <p id="thumbnailSubtitle">SBTITLE</p>
                        </div>
                    </div>
                    <div class="web" id="art3">
                        <img src="http://upload.wikimedia.org/wikipedia/commons/d/d4/Cat_March_2010-1a.jpg" id="img3"/>
                        <div class="caption3">
                            <p id="thumbnailTitle">Title</p>
                            <p id="thumbnailSubtitle">SUBTTLE</p>
                        </div>
                    </div>
    <div class="clear"></div>
                        <div class="illustration" id="art4">
                        <img src="http://media.npr.org/assets/img/2012/09/20/stripey-kitty-d1332c13945e17c5add3810e5ca39c269af872b8-s6-c10.jpg" id="img4"/>
                        <div class="caption4">
                            <p id="thumbnailTitle">Title</p>
                                <p id="thumbnailSubtitle">SUBTITLE</p>
                            </div>
                    </div>
                    <div class="graphic" id="art5">
                        <img src="http://adam1cor.files.wordpress.com/2011/10/cat1.jpg?w=300&h=300" id="img5"/>
                        <div class="caption5">
                                <p id="thumbnailTitle">Title</p>
                                <p id="thumbnailSubtitle">SUBTITLE</p>
                            </div>
                    </div>
</div>
</div> 
```

CSS

```
#container {
    width:80%;
}

.clear {
    clear: both;
    padding:5ex;
}
div #art1, #art2, #art3, #art4, #art5 {
    width: 20%;
    height: 100px;
    display: inline-block;
    margin: 5px;
    cursor: pointer;
}

div img {
    opacity:  0.5;
    height: 70%;
}

.caption1, .caption2, .caption3, .caption4, .caption5, .caption6, .caption7, .caption8 {
    margin-top: -5px;
    width: 100%;
    display: inline-block;
    height:40px;
}

.caption4 {
    margin-top: -4px;
}

#thumbnailTitle {
    font-family: 'Open Sans';
    color: #a5a4a4;
    font-size: 0.9em;
    letter-spacing: 1px;
    font-weight: 600;
    margin:0px 0 10px 0;
}

#thumbnailSubtitle {
    font-family: 'Open Sans';
    color: #a5a4a4;
    font-size: 0.8em;
    font-weight: normal;
    letter-spacing: 1px;
    margin:-10px 0 50px 0;
    padding-bottom: 20px;
}

div img {
    width: 100%;
    height: 100%;
}

#thumbnails div#art4 {
    width: 40.4%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:14:24.010

我必须对您的代码进行基线化，使用了很多非最佳实践，这对我来说更容易重构代码：

[http://jsfiddle.net/QXz8P/10/](http://jsfiddle.net/QXz8P/10/)

**HTML**

```
<div class="container">

    <div class="thumbnails">

        <div class="art">
            <img src="http://www.warrenphotographic.co.uk/photography/bigs/03534-Silver-tabby-cat-white-background.jpg" />
            <div class="caption">
                <div class="title">Title1</div>
                <div class="subtitle">SUBTITLE1</div>
            </div>
        </div>

        <div class="art">
            <img src="http://www.southbham.cats.org.uk/uploads/images/pages/cat-stalking-crop.jpg" />
            <div class="caption">
                <div class="title">Title2</div>
                <div class="subtitle">SUBTITLE2</div>
            </div>
        </div>

        <div class="art">
            <img src="http://upload.wikimedia.org/wikipedia/commons/d/d4/Cat_March_2010-1a.jpg" />
            <div class="caption">
                <div class="title">Title3</div>
                <div class="subtitle">SUBTITLE3</div>
            </div>
        </div>        

    </div>

    <div class="thumbnails">

        <div class="art">
            <img src="http://media.npr.org/assets/img/2012/09/20/stripey-kitty-d1332c13945e17c5add3810e5ca39c269af872b8-s6-c10.jpg" />
            <div class="caption">
                <div class="title">Title4</div>
                <div class="subtitle">SUBTITLE4</div>
            </div>
        </div>          

        <div class="art">
            <img src="http://adam1cor.files.wordpress.com/2011/10/cat1.jpg?w=300&h=300" />
            <div class="caption">
                <div class="title">Title5</div>
                <div class="subtitle">SUBTITLE5</div>
            </div>
        </div>  

    </div>

</div> 
```

**CSS**

```
.container {}

.thumbnails  { overflow:hidden; display:block; }

.art {
    width:100px;
    display: inline-block;
    cursor: pointer;
}

.art img {opacity:0.5; width:100%;  }

.art .caption {
    width: 100%;
    display: inline-block;
}

.art .caption. .title{
    font-family: 'Open Sans';
    color: #a5a4a4;
    font-size: 0.9em;
    letter-spacing: 1px;
    font-weight: 600;
    margin:0;
    padding:0;
}

.art .caption .subtitle {
    font-family: 'Open Sans';
    color: #a5a4a4;
    font-size: 0.8em;
    font-weight: normal;
    letter-spacing: 1px;
    margin:0;
    padding:0;
} 
```

**JS**

```
$(".art").mouseover(function() {
    $(this).find('.title').css("background-color", "yellow");
    $(this).find('.subtitle').css("background-color", "yellow");
    $(this).find('img').css("opacity", "1");
}).mouseout(function(){
    $(this).find('.title').css("background-color", "transparent");
    $(this).find('.subtitle').css("background-color", "transparent");      
    $(this).find('img').css("opacity", "0.5");
}); 
```

这应该让你更接近你想要的更干燥的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:45:16.800

添加一个`padding`似乎有帮助。

```
.clear {
    clear: both;
    padding-top:5ex;
} 
```

# wcf - 使用 HTTPS 的 CustomTextMessageEncoder 的 WCF CustomBinding

> ID：15346031
> 
> 赞同：1
> 
> 时间：2013-03-11T18:38:09.723
> 
> 标签：wcf, https, wcf-extensions

我正在开发一个 WCF REST 类型的服务，该服务将通过 HTTPS 上的 POST（IIS 上的 ASP.NET 4.0）接受 text/xml 类型的文档。有人可以帮我处理 web.config 吗？我正在使用 CustomTextMessageEncoder 的示例代码进行测试，以解析文档。我收到错误消息：“消息级安全性不支持手动寻址。配置绑定（'CustomBinding'、' [http](http://tempuri.org/) ://tempuri.org/ '）以使用传输安全性或不进行手动寻址。”

不幸的是，如果我关闭 ManualAddressing，我会得到一个不同的错误。我不确定如何打开 TransportSecurity，因为它是自定义绑定。

我正在做的 web.config 的主要部分是：

```
 <system.serviceModel>
    <services>
      <service name="MyApp.MyApp" behaviorConfiguration="MyAppBehavior" >
        <endpoint address="https://myURL/MyApp/" binding="customBinding" bindingConfiguration="newBinding" behaviorConfiguration="webEndpoint"  contract="MyApp.IMyApp" />
        <host>
          <baseAddresses>
            <add baseAddress="https://myURL/MyApp/" />
          </baseAddresses>
        </host>
      </service>
    </services>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="false" aspNetCompatibilityEnabled="true">
      <baseAddressPrefixFilters>
        <add prefix="https://myURL/MyApp/" />
      </baseAddressPrefixFilters>
    </serviceHostingEnvironment>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyAppBehavior" >
          <serviceMetadata httpGetEnabled="false" httpsGetEnabled="True" httpsGetUrl="https://myURL/MyApp/MyApp.svc/"  />
          <serviceDebug includeExceptionDetailInFaults="True"  />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="webEndpoint" >
          <webHttp />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <extensions>
      <bindingElementExtensions>
        <add name="customTextMessageEncoding" type="Microsoft.Samples.CustomTextMessageEncoder.CustomTextMessageEncodingElement, CustomTextMessageEncoder" />
      </bindingElementExtensions>
    </extensions>
    <bindings>
      <webHttpBinding>
        <binding name="webHttpBinding">
          <security mode="Transport" />
        </binding>
      </webHttpBinding>
      <customBinding>
        <binding name="newBinding" >
          <security authenticationMode="AnonymousForCertificate" />
          <customTextMessageEncoding messageVersion="Soap12WSAddressing10">
          </customTextMessageEncoding>
          <httpsTransport manualAddressing="true" requireClientCertificate="true" />
        </binding>
      </customBinding>
    </bindings>
  </system.serviceModel> 
```

# javascript - Microsoft JScript 运行时错误：对象不支持属性或方法“radopen”

> ID：15346035
> 
> 赞同：0
> 
> 时间：2013-03-11T18:38:21.860
> 
> 标签：javascript, asp.net, telerik, radwindow

首先，我是 Telerik 新手，我搜索过 Telerik 论坛，我在论坛上发布过（但还没有回复）和 S/O 消息（包括[动态打开 JavaScript 中定义的 radwindow](https://stackoverflow.com/q/12770342/72324)），但我仍然无法解决我的问题。

我正在尝试从 C# 代码隐藏（使用 VS 2008，Telerik.Web.UI 版本 2012.2.724.35）打开一个 radWindow，但是，我收到了这个错误：

> Microsoft JScript 运行时错误：对象不支持属性或方法“radopen”

我的 aspx 代码是：

```
<script type="text/javascript">
    function OpenRadWindow() {
        var wnd = window.radopen("http://www.microsoft.com", null);
        wnd.setSize(300, 400);
        return false;
    }
</script> 
```

**代码隐藏：**

```
protected void Page_Load(object sender, EventArgs e)
{
    Page.ClientScript.RegisterStartupScript(this.GetType(), "getting data", "OpenRadWindow();", true);
} 
```

什么可能导致错误？
**更新：**如何让库加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:48:24.777

你的意思是：[http](http://www.telerik.com/community/forums/aspnet-ajax/window/microsoft-jscript-runtime-error-object-doesn-t-support-property-or-method-radopen.aspx) ://www.telerik.com/community/forums/aspnet-ajax/window/microsoft-jscript-runtime-error-object-doesn-t-support-property-or-method-radopen.aspx ？我在那里看到一个回复​​，指向你的问题的答案。这正是我在这里所说的：[Dynamically open a radwindow defined in Javascript](https://stackoverflow.com/questions/12770342/dynamically-open-a-radwindow-defined-in-javascript) 。

# jquery - jQuery.data() ：仅获取 HTML-5 属性，而不是由 jquery 或其他插件设置的数据存储值

> ID：15346037
> 
> 赞同：4
> 
> 时间：2013-03-11T18:38:27.463
> 
> 标签：jquery, jquery-ui, html5-data

我想通过 jQuery 获取 HTML-5 数据属性。

所以，我正在使用`.data()`.

我需要获取超过 1 个数据属性，因此我没有指定任何参数并缓存结果。

`var data = $('myselecttor').data()`

但问题是，`.data()`不仅获取 HTML-5 属性，还获取由 jquery（供内部使用）或其他插件（在我的情况下为 jquery-ui）设置的数据存储值

`**[Demo](http://jsfiddle.net/jashwant/DprgS/)**`

我需要一次调用（不单独）获取所有 HTML-5 数据属性（不包括数据存储值）

ps 发送这个`data()`会`$.ajax`导致`Uncaught TypeError: Illegal invocation`错误。

我希望，它会帮助某人。

* * *

**我的解决方案**

最后，我将所有数据属性作为 json 保存在一个数据属性中。jQuery 通过自动解析数据属性中的任何 json 来帮助它。

`<div data-person='{"name": "jashwant","sex": "male"}'></div>`

并且可以在javascript中访问它

```
 var person =  $('div').data('person');
 console.log(person.name);  // jashwant
 console.log(person.sex);   // male 
```

唯一的问题是现在我不能使用像`[data-name="jashwant"]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:40:32.127

您可能可以查看属性本身，但您也可以使用元素的`dataset`.

```
var data = $('div').draggable().get(0).dataset; 
```

[http://jsfiddle.net/DprgS/1/](http://jsfiddle.net/DprgS/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:23:05.617

你可以试试这个

```
(function($) {
    $.fn.getDataAttr = function() {
        var attributes = {}; 
        if( this.length ) {
            $.each( this[0].attributes, function( i, attr ) {
                if( attr.name.substr(0,5) =='data-' )
                    attributes[ attr.name ] = attr.value;
            } ); 
        }
        return attributes;
    };
})(jQuery); 
```

## 采用

```
var data = $('div').draggable().getDataAttr();
console.log(data); // {data-name: "jashwant", data-sex: "male"} 
```

[**演示。**](http://jsfiddle.net/DprgS/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:07:14.967

更多选择：

命名空间您的数据属性

`<div id="mydiv" data-jashwant-name="jashwant" data-jashwant-sex="male">Drag me</div>`

然后循环并只选择你的

```
for (var i in data) {
  if (i.indexOf('jashwant') > -1 ) { 
    console.log(i + " : " + data[i]);
  }
} 
```

或者...不太可靠，但可能适用于这种情况。仅选择值为字符串的数据属性（忽略 jquery UI 对象）

```
for (var i in data) {
  if (typeof data[i] === "string" ) { 
    console.log(i + " : " + data[i]);
  }
} 
```

# validation - Grail 的错误属性从何而来？

> ID：15346044
> 
> 赞同：4
> 
> 时间：2013-03-11T18:38:47.853
> 
> 标签：validation, grails, grails-2.0

Grails 有一个关于数据绑定的错误，当您处理错误的数字输入时，它会引发强制转换异常。JIRA：http: [//jira.grails.org/browse/GRAILS-6766](http://jira.grails.org/browse/GRAILS-6766)

为了解决这个问题，我编写了以下代码来手动处理 POGO 类的数字`Foo`输入`src/groovy`

```
void setPrice(String priceStr)
{
    this.priceString = priceStr

    // Remove $ and , 
    priceStr = priceStr.trim().replaceAll(java.util.regex.Matcher.quoteReplacement('$'),'').replaceAll(',','')

    if (!priceStr.isDouble()) {
        errors.reject(
            'trade.price.invalidformat',
            [priceString] as Object[],
            'Price:[{0}] is an invalid price.')

        errors.rejectValue(
            'price',
            'trade.price.invalidformat')
    } else {
        this.price = priceStr.toDouble();
    }
} 
```

下面就`errors.reject()`一行抛出空引用异常。

```
foo.price = "asdf" // throws null reference on errors.reject()
foo.validate() 
```

但是，我可以说：

```
foo.validate()
foo.price = "asdf" // no Null exception
foo.hasErrors() // false
foo.validate()
foo.hasErrors() // true 
```

`validate()`调用时错误从何而来？有没有办法在`errors`不先调用的情况下添加属性`validate()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T22:31:02.387

我不能确切地告诉你为什么，但你需要显式调用而不是像属性一样`getErrors()`访问它。`errors`出于某种原因，Groovy 没有为它调用方法。所以将`reject`行更改`setPrice()`为

```
getErrors().reject(
        'trade.price.invalidformat',
        [priceString] as Object[],
        'Price:[{0}] is an invalid price.')

getErrors().rejectValue(
        'price',
        'trade.price.invalidformat') 
```

这是确保`Errors`对象存在于您的方法中的最简单方法。您可以[查看](https://github.com/grails/grails-core/blob/master/grails-plugin-domain-class/src/main/groovy/org/codehaus/groovy/grails/plugins/DomainClassGrailsPlugin.groovy#L224)将验证相关方法添加到域类的代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T22:44:07.527

AST 转换处理`@Validateable` [增加了类，其中包括](https://github.com/grails/grails-core/blob/master/grails-core/src/main/groovy/org/codehaus/groovy/grails/compiler/injection/ASTValidationErrorsHelper.java)

*   一个名为的字段`errors`
*   公共方法`getErrors`，`setErrors`和`clearErrors``hasErrors`

如果尚未设置该字段，则该`getErrors`方法会延迟设置该字段。`errors`所以看起来正在发生的事情是`errors`在同一个类中的访问被视为字段访问而不是 Java Bean 属性访问，并且绕过了延迟初始化。

所以修复似乎是使用`getErrors()`而不是仅仅`errors`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T22:29:32.947

这些错误会动态地添加到您的可验证类（域类和具有注释的类`@Validateable`）中。

允许开发人员设置字符串而不是数字似乎不是一个好方法。此外，您的验证仅适用于该特定类。

我认为更好的方法是为数字注册一个自定义属性编辑器。这是一个带有日期[的示例](http://www.dataworks-inc.com/site/blog/handling-date-parameters-in-grails)`String`，它可以将（来自表单）转换为`Date`dd/MM/yyyy 等格式。这个想法是一样的，因为您将强制您的号码是可解析的（例如，`Integer.parseInt()`将抛出异常）。

在您的域类中，使用数字类型而不是字符串，因此代码开发人员将不允许存储非数字值。

# iphone - 向左移动重新排序控件

> ID：15346046
> 
> 赞同：2
> 
> 时间：2013-03-11T18:38:49.517
> 
> 标签：iphone, ios, objective-c, uitableview

我正在尝试将重新排序控件移动到单元格的左侧。我正在使用自定义单元格，并且我的单元格有按钮。我实际上可以使用以下函数将其向左移动。但是我的右键最初是默认重新排序控件所在的位置，因此即使在应用转换后也无法访问。不在后面的部分是可访问的。

作为参考，我使用了以下链接 [http://b2cloud.com.au/how-to-guides/reordering-a-uitableviewcell-from-any-touch-point](http://b2cloud.com.au/how-to-guides/reordering-a-uitableviewcell-from-any-touch-point)

[如何在左侧对 UITableViewCell 进行重新排序控制？](https://stackoverflow.com/questions/11141947/how-to-make-reorder-control-of-uitableviewcell-in-left-side)

```
#pragma mark - 
#pragma mark rows reordering

- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    for(UIView* view in cell.subviews)
    {
        if([[[view class] description] isEqualToString:@"UITableViewCellReorderControl"])
        {
            UIView* resizedGripView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, CGRectGetMaxX(view.frame), 48)];
            [resizedGripView setBackgroundColor:[UIColor whiteColor]];
            [resizedGripView addSubview:view];
            [cell addSubview:resizedGripView];

            //  Original transform

           const CGAffineTransform transform = CGAffineTransformMakeTranslation(40 - cell.frame.size.width, 1);

            [resizedGripView setTransform:transform];
            /*for(UIImageView* cellGrip in view.subviews)
            {
                if([cellGrip isKindOfClass:[UIImageView class]])
                    [cellGrip setImage:nil];
            }*/
        }
    }
} 
```

请看这张图片[http://i.stack.imgur.com/xBDLG.png](https://i.stack.imgur.com/xBDLG.png)

在重新排序控件的原始位置无法访问单元格中的编辑按钮。休息工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-02-02T13:58:27.117

Xcode 8.2.1，斯威夫特 3.x

```
 override func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
    cell.subviews.forEach() {
        if ($0.description.range(of: "UITableViewCellReorderControl") != nil) {
            let resizedGripView = UIView(frame: CGRect(x: 0, y: 0, width: $0.frame.maxX, height: $0.frame.maxY))
            resizedGripView.addSubview($0)
            cell.addSubview(resizedGripView)
            let transform = CGAffineTransform(translationX: $0.frame.size.width - cell.frame.size.width, y:  1)
            resizedGripView.transform = transform
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-20T16:20:06.047

试试这个，希望对你有帮助

```
- (void) tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell
 forRowAtIndexPath:(NSIndexPath *)indexPath
{
    for(UIView* view in cell.subviews)
    {
        if([[[view class] description] isEqualToString:@"UITableViewCellReorderControl"])
        {

            UIView* resizedGripView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, CGRectGetMaxX(view.frame), CGRectGetMaxY(view.frame))];
            [resizedGripView addSubview:view];
            [cell addSubview:resizedGripView];

            //  Original transform
            const CGAffineTransform transform = CGAffineTransformMakeTranslation(view.frame.size.width - cell.frame.size.width, 1);
            //  Move custom view so the grip's top left aligns with the cell's top left

            [resizedGripView setTransform:transform];
        }
    }
} 
```

# mysql - 无法将 Coldfusion 10 连接到 mysql 5

> ID：15346054
> 
> 赞同：1
> 
> 时间：2013-03-11T18:39:22.547
> 
> 标签：mysql, coldfusion, coldfusion-10

我正在尝试设置在我的家用 PC（Windows 8 Pro 64 位）上运行的测试冷融合服务器。我安装了 Coldfusion 10，并且 mysql 5.6.10 也可以正常工作。当我尝试连接它们时，出现以下错误：

```
Connection verification failed for data source: 
mydbcom.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: 
Could not create connection to database server. Attempted reconnect 3 times. 
Giving up.
The root cause was that: 
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: 
Could not create connection to database server. Attempted reconnect 3 times. Giving up. 
```

我到处看了看，我似乎无法弄清楚我需要做些什么来修复它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:41:37.900

您在 CF Admin 中的 DSN 定义是什么样的？您是否创建了一个可以访问该数据库的 MySQL 用户，然后您在 CF Admin DSN 连接中使用了该用户？

**编辑：**

是的，您永远不应该通过练习连接为“root”。创建一个新用户并授予他们对您的数据库的正确权限。如果你需要的话，我这里有一些说明。

[http://iknowkungfoo.com/blog/index.cfm/2008/6/16/The-ACME-Guide-64bit-Ubuntu-804-Edition-Part-3](http://iknowkungfoo.com/blog/index.cfm/2008/6/16/The-ACME-Guide-64bit-Ubuntu-804-Edition-Part-3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-04T20:17:38.373

对我来说，诀窍是在添加新的 CF ADMIN DSN 条目时输入服务器地址的 IP 地址。使用本地、localhost 或 127.0.0.1 作为服务器地址对我不起作用。

# java - Java 加密：Java 加密：javax.crypto.IllegalBlockSizeException：使用填充密码解密时，输入长度必须是 8 的倍数

> ID：15346056
> 
> 赞同：1
> 
> 时间：2013-03-11T18:39:30.213
> 
> 标签：java, base64, encryption

我有一个从 Java 客户端接收消息的 Java HTTP 服务器。

服务器和客户端都使用相同的 Encrypter 类：

```
public class Encrypter {

    private Cipher cipher; //The encryption cipher object
public static final String ALGORITHM = "Blowfish"; //Encryption Algorithm

    /**
     * Constructor
     */
    public Encrypter()
    {       
        try {
            initlizeCipher();
        } catch (Throwable e) {     
            ServerSettings.LOG.logError(e);
            e.printStackTrace();

        }
    }

    /**
     * Initialize the Cipher object
     * @throws NoSuchAlgorithmException
     * @throws NoSuchPaddingException
     */
    private void initlizeCipher() throws NoSuchAlgorithmException, NoSuchPaddingException
    {       
        cipher = Cipher.getInstance(ServerSettings.ALGORITHM);
    }

    /**
     * Encrypt a String
     * @param string String to encrypt
     * @return an encrypted String
     * @throws InvalidKeyException
     * @throws IllegalBlockSizeException
     * @throws BadPaddingException
     * @throws UnsupportedEncodingException
     */
    public synchronized String encrypt(String string) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException, UnsupportedEncodingException
    {
        cipher.init(Cipher.ENCRYPT_MODE, ServerSettings.SECRECT_KEY_SPEC);
        byte[] stringBytes = string.getBytes("UTF-8");
        byte[] encryptedBytes = cipher.doFinal(stringBytes);
        return Base64.encodeBytes(encryptedBytes);      
    }

    /**
     * Decrypt a String
     * @param string String to decrypt
     * @return a decrypted String
     * @throws InvalidKeyException
     * @throws IllegalBlockSizeException
     * @throws BadPaddingException
     * @throws IOException
     */
    public synchronized String decrypt(String string) throws InvalidKeyException, IllegalBlockSizeException, BadPaddingException, IOException
    {       
        cipher.init(Cipher.DECRYPT_MODE, ServerSettings.SECRECT_KEY_SPEC);
        byte[] decryptedBytes = Base64.decode(string.getBytes());       
        byte[] encryptedBytes = cipher.doFinal(decryptedBytes);
        return new String(encryptedBytes,"UTF-8");
    }   
} 
```

当发送的变量是：`m=encryptedMessage.`

由于某种原因，我总是得到

```
javax.crypto.IllegalBlockSizeException: Input length must be multiple of 8 when decrypting with padded cipher 
```

而且我无法解密在服务器端收到的消息..

起初我以为消息可能已损坏，但事实并非如此..

有任何想法吗 ？

**更新1：**

奇怪的是，一些发往服务器的消息被正确解密，而一些则返回该错误。好消息：

```
zuhRpmbtH0xSmv6cnBFkAxaGFmRbDP/97LwF4bcDyhANCTLb4afBzFpP3GI1pGFLok03GRQVCwi81Hsp                                             bCpGtuoIVY9cqWYDzNFgOCx5w2sboR2Qx6oxtTSIFIzj1XadQdk9V8lCxcCVVYEH8vA3tph63wU6qJOo                                             OyROz0OJauLBEiWbn5OUQxJ7Yz9Qc1wzl8z7UQb71v4pswF69c1CM/LWWmAzBDCjlRQ5YIB9wN8mBgoC                                             t8Ngt38XkCg/yRHh0EpXYQfrgP6Ls5I8/FY8BQorMy/le5y2 
```

坏消息：

```
cjj7yzW v3NDtbIJXurrrf318DcY PBk2inzSfz qoIaTKns2tWvR7ftOKK30XY VAlXDrQlyTLatgKA                                             S4IkAIK3lXQKNcwPh87CybHrTqD3HWEM3tqkpVWdB7GNmpHYsITTLrWsBvaMeDcXEr/gr9KYSZ0ks0gR                                             z12jHxPiZoSKHdy5nZ4zShHUy/wlkslmjFvA1G8A15nTVBhjBI GWSh54tyBZF113lL pm5eZNkZrqzo                                             RWI2QAjfqNPzCpV0tqd/pEO70vdSLbCYi7V0bVQNW2KpBv3Hj3VOTCP92k62/iQhIY4F VuMo2UTgGWV                                             1fqoelrl/eelAvsZO8YNC5/2KTKw2sDFaTOwW9R12AgeyzOuhkKQQro2Umd0KoiGnYL9AaQ6 T2MBnLK                                             ZyROHh3cvI T9chPlGfmUHbCN2f3pHoF5rb383KpJNjvlnmnwtaEhQYw8TQjj4PLenK24Hpcs4 wO8gu                                             XSrUglFzLIkkwjvsA5AyTHx/jP9AwMSnWjDwco184YQGAePeM8PYy42oMOaw7Pg/3jWFy1uOzFok2LN9                                             RJWv1iyXejh5s9zXoAT3kywICQygK2YTLZNIS1d5lc0H0f15EN6itZhaR0YnslhYGmH1KcNwdMWhBKsf                                             PytWnK0N8AzUVzt4P4mtmGSuaLi2t54J2pv7m7/c6WjTi1/E16rd3QyWkmXrghSshOJNRRwcydlhhTLH                                             drHTEFaXSPZyVFqlaFu4 f5kxiBa6ewglKHe6zbmRyM15Mq3lRj8Ab/RWBd2tgvaEO/vhw 
```

这两条消息都以相同的方式发送并打印到 System.Out 进行测试。正如您所见，由于某种原因，坏消息有空格，而好消息却没有可能给出块错误消息。知道如何解决它吗？

**更新 2：**

在深入研究我的代码后，我发现我的问题出在解析 POST 方法参数的函数内部。我不能说我是编码方面的专家，但是通过 Base64 编码抛出 POST URLEcoding 存在一些问题。

这是我的解析代码，在获取 URLDecode 后会转到我的 Encrypter 进行解密：

private void parseQuery(String query, HashMap parameters) throws UnsupportedEncodingException {

```
 if (query != null) {
     String pairs[] = query.split("[&]");

     for (String pair : pairs) 
     {
         String param[] = pair.split("[=]");
         String key = null;
         String value = null;
         if (param.length > 0) 
             key = URLDecoder.decode(param[0], "UTF-8");//System.getProperty("file.encoding"));                 

         if (param.length > 1) 
             value = URLDecoder.decode(param[1], "UTF-8");//System.getProperty("file.encoding"));                 

         if (parameters.containsKey(key)) 
         {
             Object obj = parameters.get(key);
             if(obj instanceof List<?>)
             {
                 @SuppressWarnings("unchecked")
                 List<String> values = (List<String>)obj;
                 values.add(value);
             } 
             else if(obj instanceof String) 
             {
                 List<String> values = new ArrayList<String>();
                 values.add((String)obj);
                 values.add(value);
                 parameters.put(key, values);
             }
         } 
         else 
           parameters.put(key, value);                 
     }
 } 
```

}

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T01:01:41.277

我昨天遇到了类似的问题。我通过在客户端将字节编码为base64并在服务器端使用之前对其进行解码来解决它。

请参阅此链接 - [密码]：[http ://www.velocityreviews.com/forums/t645364-java-string-encryption-decryption.html](http://www.velocityreviews.com/forums/t645364-java-string-encryption-decryption.html)

所以基本上这就是你需要做的 -

在客户端

*   从字符串中获取字节数组
*   加密它。
*   使用 base64 编码对字节数组进行编码

在服务器端

*   解码base64编码数据得到字节数组
*   解密字节数组。
*   使用此字节数组构造一个字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:30:15.627

经过大量的测试和哭泣:)，我发现了我从一开始就怀疑的东西。

当通过 URL（POST\GET 什么）传递数据时，您必须先在客户端对其进行 URL 编码，然后再发送，然后在服务器端进行 URL 解码，然后再进行处理。

感谢 Java 强大的[URLEncoder](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html)和[URLDecoder](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/URLDecoder.html)类，您可以轻松地做到这一点：

//在为 URL 发送编码数据之前 - 客户端 URLEncoder.encode(your_data,charset_name); //charset_name - 建议使用“UTF-8”

//接收数据后 - 为进程解码你的数据 - 服务器端 URLDecoder.decode(your_data,charset_name); //charset_name - 建议使用“UTF-8”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-03T14:35:40.043

要缩小选择范围，请从 Oracle/Sun 下载和无限强度的 JCE 策略 jar，并将其放在您的 JVM 下。根据我在 Java 密码学方面的经验，加密时您将面临的 90% 的问题来自 JVM/JDK 附带一个强大但有限的强度策略，并且每当您尝试使用 252k 或更多算法时，JVM 就会启动抛出一些奇怪的错误。

# c# - 使用关联的应用程序打开文件

> ID：15346057
> 
> 赞同：-2
> 
> 时间：2013-03-11T18:39:30.380
> 
> 标签：c#

我想知道如何使用他们的默认程序打开 pdf 文件或文本文件，假设我想打开一个 pdf 文件并且我的默认程序是 adobe reader，我知道我可以使用下面的代码

```
private void button1_Click(object sender, EventArgs e)
        {
            System.Diagnostics.Process.Start(@"c:/MYSQL.pdf");
        } 
```

但我想创建一个程序，例如，`bb.exe` 如果我有一个名为 drop 的目录并且在其中，我有子目录，`viewer and files`但`bb.exe`它不在任何子目录中，它只是在主目录 drop 中，查看器目录有`adobe reader.exe`和文件目录有pdf文件。

当我单击放置目录中的 bb.exe 时，它​​应该打开文件夹中的 pdf 文件，并且应该使用`adobe reader.exe`查看器文件夹中的 ....如何做到这一点？我应该阅读哪些材料？我需要关于如何做到这一点的想法，或者如果有人能解释一下，我将不胜感激提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:43:16.743

你想做这样的事情吗？

```
class Program
{
    public static void Main()
    {
        System.Diagnostics.Process.Start(@"notepad", "XMLFile1.xml");
    }
} 
```

# asp.net - 如何在 ASP.net MVC 4 webapp 的每个页面请求中共享一个公共对象？

> ID：15346058
> 
> 赞同：0
> 
> 时间：2013-03-11T18:39:31.317
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我来自“常规”asp.net，所以我对 MVC 有点（完全）迷失了。

我用自己的 asp.net 编程模式做什么：

*   我有一个自定义类对象，它代表“页面”及其属性（如 mypage.loadJquery、mypage.isLogged、mypage.Title、自定义缓存逻辑等）
*   这个类在每个 ASHX 页面上实例化一次，然后我操作一个字符串生成器来生成 HTML，并在最后将它吐在浏览器上。
    *   在 ASHX 页面上只有一个请求，我可以在调用最终 response.write 时使用在顶部实例化的页面对象直到结束

现在我正在尝试使用 MVC。我“有点”理解 M/V/C 模型和路由概念。我想保留我的自定义“页面”对象，但我失去了页面生命周期，而且我绝对不知道如何在每次调用的顶部实例化我的页面对象一次。

我需要跨每个模型、控制器、视图、部分视图、htmlhelper 的实例化 ONCE 共享对象...

我意识到此时 MVC 模式可能会让我感到困惑，但是我该如何尝试重现我的需求呢？

（非常具体的例子：在每个请求上，我都需要检查用户是否通过他的 cookie 登录。如果是，我会往返数据库以获取用户信息。然后我确实需要在每个模型/控制器/视图上的这些信息应用程序，但当然不想每次都回滚到安全检查和数据库查询，我怎样才能在整个 mvc cyle 上获得这些信息？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:49:57.403

我创建了很多这样的项目。基本上，您可以创建一个基本控制器类，所有其他控制器都从它继承。

```
[Authorize]
public class BaseController : Controller
{

    private Instructor _G_USER = null;

    protected Instructor G_USER 
    {
        get
        {
            if (_G_USER == null)
            {
                _G_USER = Your DB query here
                ViewData["G_USER"] = _G_USER;

            }
            return _G_USER;
        }
    }
} 
```

然后在你的每一个孩子课堂上，你可以做

```
[Authorize]
public class YourController : BaseController
{
    public ActionResult Index()
    {
        if(!G_USER.CAN_DO_THIS)  throw new NoPermissionException();

        return View();
    }
} 
```

要在视图中使用用户，请创建一个扩展方法。

```
public static class ExtentionMethods
{
    public static USER G_USER(this ViewPage page)
    {            
        return (USER)page.ViewData["G_USER"];
    }
} 
```

然后像这样在页面中使用

```
<%=this.G_USER().....%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:52:20.237

在我的项目中，我创建了一个界面`IViewModel`，其中包含我在布局/母版页中需要的所有字段，并将其设置为它的模型，以便我可以轻松地使用它们：

视图模型.cs

```
public interface IViewModel
{
    string Title { get; set; }

    User User { get; set; }
} 
```

布局.cshtml

```
@model IViewModel

<html>
    <head>
        <title>@Model.Title</title>
    </head>
    <body>
        @if (Model.User.IsAuthenticated) {
             You are logged as @Model.User.Name
        }
    </body>
</html> 
```

我所有的模型都实现了该接口（或从 ViewModelBase 继承，这是该类的默认实现）。此外，我有自定义操作过滤器，用于检查返回的 ActionResult 是否为 (Partial)ViewResult 以及它的模型是否实现了我的`IViewModel`接口并在该接口中填充数据。

```
public FillViewModelAttribute : ActionFilterAttribute
{
    public override OnActionExecuted(ActionExecutedContext context)
    {
        var viewResult = context.Result as ViewResult;
        if (viewResult != null && viewResult.Model is IViewModel)
        {
            var viewModel = (IViewModel)viewResult.Model;
            // fill data
        }
    }
} 
```

# zurb-foundation - 在 zurb 基础中嵌套 DIV 时遇到问题

> ID：15346061
> 
> 赞同：0
> 
> 时间：2013-03-11T18:39:56.043
> 
> 标签：zurb-foundation

我使用基金会来开发一个网站。我有 6 行主要内容。每个主行包含一个 12 列的 div，其中嵌套了两个 6 列的 div。我添加的每一个额外的主行每次都会变宽一些。我假设我错误地嵌套了 div。谁能指出我的错误？我将在下面添加我的代码示例。

```
 <div class="row"><!--START 12 ROW-->  
    <div class="large-12 columns">
            <p class="info"><span class="infoHead" >Header</span></br><img class="line" src="images/line.png" alt=""></p>
    <div class="row"><!--START 6 ROW-->
    <div class="large-6 columns">
            <p class="info">Lots of text</br></br><span class="infoSpan">Some more text</span> </p>
    </div>
    <div class="large-6 columns">
            <p><img border="0" src="images/image.jpg" alt=""></p>
            <p class="btt">Back to top</p>
    </div>
    </div><!--END 6 ROW-->
</div><!--END 12 ROW--> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:51:17.603

我在发布这个问题的那一刻就发现了问题。

我没有关闭第一个''，所以我将每个额外的主行添加到原始的 12 列 DIV。

# amazon-web-services - 让 Uploadify 坚持到 AWS 负载均衡器后面的服务器？

> ID：15346072
> 
> 赞同：2
> 
> 时间：2013-03-11T18:40:27.123
> 
> 标签：amazon-web-services, load-balancing, uploadify

基本问题是如何让uploadify 坚持到负载均衡器后面的服务器。我在 LB 后面有 2 个 AWS 服务器，并且正在尝试将文件上传到 S3。我正在使用在其他地方看到的基本代码，这会间歇性地工作。我可以转储服务器地址，有时会看到调用服务器的 JavaScript 被路由到 OTHER 服务器。

```
$('#video_file_upload').uploadify({
        'buttonText':'upload a video',
        'swf'      : '/uploads/uploadify.swf',
        'fileSizeLimit': '1000MB',
        'uploader' : '/assets/receive/?PSPSESSIONID=XXXXXX&type=video',

...etc 
```

所以，你看，java 脚本试图访问位于“/assets/receive...”的 php 脚本，但它对脚本在哪个服务器上感到困惑。所以问题是，如何让这个请求变得有粘性？我设置了粘性会话，但它似乎不适用于这里。

# facebook - 谷歌使用 facebook 应用程序 ID 索引不需要的页面

> ID：15346073
> 
> 赞同：0
> 
> 时间：2013-03-11T18:40:28.803
> 
> 标签：facebook, api, codeigniter, url

如果不是这个地方，我不确定在哪里寻求帮助，请告诉我在哪里。

我最近注意到我在 Google 中索引的页面没有任何内容，并且它使用的是实际页面，但它只是从我的喜欢按钮添加 Facebook 信息（我认为）这是错误链接的一个示例。

[http://mywebsite.com/nhl_schedule/team/Colorado&send=false&layout=standard&width=265&show_faces=false&action=like&colorscheme=light&font=arial&height=23&appId=myfacebookappidhere](http://mywebsite.com/nhl_schedule/team/Colorado&send=false&layout=standard&width=265&show_faces=false&action=like&colorscheme=light&font=arial&height=23&appId=myfacebookappidhere)

这是很好的链接。

[http://mywebsite.com/nhl_schedule/team/Colorado](http://mywebsite.com/nhl_schedule/team/Colorado)

所以我想做的是从谷歌的索引中删除这些页面，但是我拥有的每个页面都是这个页面和新添加的页面，所以我不想对我页面上的每个链接都使用 robots.txt。

如果我使用 CodeIgniter 很重要，我猜 CI 中可能有一个设置可能导致这种情况。

感谢任何帮助。

PS：我猜这些链接是在某个地方创建的，因为谷歌正在索引它们，但我可以在这些页面上找到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T00:44:08.277

我决定删除网站管理员工具中的 URL，并将每个太长的链接重定向到错误 404 页面

# php - PHP：如何创建文件数组的数组（又名scandir数组）

> ID：15346077
> 
> 赞同：0
> 
> 时间：2013-03-11T18:40:44.887
> 
> 标签：php

我想遍历 4 个路径，并为每个路径将特定路径的文件存储在一个数组中。原因是，我想在数据库中插入每个文件标题和文​​件路径。

所以：

```
$COMICS_path = array('./images/Comics/Charts/', './images/Comics/Life/', './images/Comics/Misc/', './images/Comics/Office/', './images/Comics/Political/');

$COMICS_files = array(scandir('./images/Comics/Charts/'), scandir('./images/Comics/Life/'), scandir('./images/Comics/Misc/'), scandir('./images/Comics/Office/'), scandir('./images/Comics/Political/')); 
```

`$COMICS_path`似乎输出了正确的数组。

但是，当我期待类似以下内容时，$COMICS_files 只会输出“ARRAY”：

`$COMICS_files = (file1.png, file2.png, file3.png, ... file n.png)`

这可能吗？如果没有，任何人都可以指导我循环浏览多个文件夹并检索每个文件的最佳方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:46:43.800

```
$COMICS_files = array();
foreach($COMICS_path as $path)
    $COMICS_files = array_merge($COMICS_files, scandir($path));
var_dump($COMICS_files); 
```

由于`scandir()`返回一个数组，您必须将它们合并到一个大数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:53:08.360

它输出一个二维数组，因为 scandir 返回一个数组。

所以 $COMICS_files[0] 将是 (afile1.png, afile2.png, ...) 而 $COMICS_FILES[1] 将是 (bfile2.png, bfile2.png)

如果您希望将所有这些文件放在一个数组中，您应该这样做

```
$COMICS_path = array('./images/Comics/Charts/', './images/Comics/Life/', './images/Comics/Misc/', './images/Comics/Office/', './images/Comics/Political/');
$COMICS_files = array();

$COMICS_path_sz = count($COMICS_path);
for ($i = 0; $i < $COMICS_path_sz; ++$i) {
    $tmp_arr = scandir($COMICS_path[i]);
    if ($tmp_arr !== FALSE) {
        $COMICS_files = array_merge($COMICS_files, $tmp_arr);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:53:13.687

首先，我们需要理清您所指的“输出”是什么。如果参考 echo 的结果，那么预期的结果就是“ARRAY”。

其次，正如您的“输出”状态，您有一个数组。您需要遍历数组并插入记录。

一个更优雅的方法是生成所有插入并将它们一次发送到数据库服务器，因为应用程序服务器和数据库服务器之间的通信很昂贵，也就是说，它需要时间。

# c# - NHibernate SchemaExport 不创建表

> ID：15346080
> 
> 赞同：4
> 
> 时间：2013-03-11T18:40:50.430
> 
> 标签：c#, hibernate, nhibernate, nunit

我正在学习 Nhibernate 并正在制作一个测试项目。我想根据实体生成表。在测试项目中，我使用的是 sqlite 并且可以看到输出：“drop table if exists Player”，但之后它没有创建表 Player。我已通过将 Player.hbm.xml 文件复制到另一个文件夹来确认正在找到映射。

测试项目中的测试类：

```
 [Test]
    public void TestCanGenerateSchema()
    {
        var cfg = new Configuration();
        cfg.Configure(); //tell NH to configure itself based on the config
        cfg.AddAssembly(typeof(Player).Assembly); //find mapping info in this assembly

        new SchemaExport(cfg).Execute(true, true, true);
    } 
```

我的 Hubernate.cfg.xml 在测试项目中：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
    <session-factory>
        <property name="connection.provider">NHibernate.Connection.DriverConnectionProvider</property>
        <property name="dialect">NHibernate.Dialect.SQLiteDialect</property>
        <property name="connection.driver_class">NHibernate.Driver.SQLite20Driver</property>
        <property name="connection.connection_string">Data Source=:memory:;Version=3;New=True;</property>
        <property name="connection.release_mode">auto</property>
        <property name="show_sql">true</property>
        <property name="proxyfactory.factory_class">NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle</property>
        <!-- mapping files -->
    </session-factory>
</hibernate-configuration> 
```

我在 Chess.Web 项目中的映射文件（构建操作 = 嵌入式资源）：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
                   assembly="Chess.Web"
                   namespace="Chess.Web.Domain">
    <class name="Player">
        <id name="Id"/>
        <property name="Name" />
        <property name="Password" />
    </class>
</hibernate-mapping> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T21:01:05.197

```
new SchemaExport(cfg).Execute(true, true, true); 
```

如果要创建表，第三个参数可能应该为 false：

```
justDrop
true if only the ddl to drop the Database objects should be executed. 
```

# sql - 按来源和月份分组

> ID：15346081
> 
> 赞同：1
> 
> 时间：2013-03-11T18:40:53.420
> 
> 标签：sql, sql-server, grouping

我正在尝试创建一个查询，允许我报告我们的客户是如何发现我们的（即通过谷歌、大喊、口口相传等）。

我有两张桌子：

```
Customer
  name
  CreatedDate
  SourceID

Sources
  SourceID
  SourceName 
```

这个查询：

```
SELECT Customer.CreatedDate, Source.SourceName
FROM Customer INNER JOIN
Source ON Customer.SourceID = Source.SourceID 
```

给我一个按日期记录的所有来源的列表：

```
2011-05-05 00:00:00:000  Word Of Mouth
2011-05-05 00:00:00:000  Word Of Mouth
2011-05-05 00:00:00:000  Word Of Mouth
2011-05-05 00:00:00:000  Walk In
2011-05-05 00:00:00:000  Yell.com
2011-05-05 00:00:00:000  Google Search 
```

我想要的是一个可以导入饼图和报告的列表：

```
January 2013
Word of Mouth: 15
Walk In: 5
Google Search: 6
Yell.com 5

February 2013
Word of Mouth: 11
Walk In: 0
Google Search: 8
Yell.com 3 
```

但我不确定如何创建此报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:43:08.540

```
SELECT [Month] = DATEADD(MONTH, DATEDIFF(MONTH, 0, c.CreatedDate), 0),
  s.SourceName,
  c = COUNT(*)
FROM dbo.Customer AS c
INNER JOIN dbo.Source AS s
ON c.SourceID = s.SourceID
GROUP BY DATEADD(MONTH, DATEDIFF(MONTH, 0, c.CreatedDate), 0),
  s.SourceName
ORDER BY [Month], s.SourceName; 
```

如果您只想要一个特定的月份，那么：

```
SELECT s.SourceName, c = COUNT(*)
FROM dbo.Customer AS c
INNER JOIN dbo.Source AS s
ON c.SourceID = s.SourceID
WHERE c.CreatedDate >= '20130101'
AND c.CreatedDate < '20130201'
GROUP BY s.SourceName
ORDER BY s.SourceName; 
```

# javascript - 在 JS 的 cookie 中存储一个值？

> ID：15346084
> 
> 赞同：0
> 
> 时间：2013-03-11T18:40:58.220
> 
> 标签：javascript, jquery

我有一个创建按钮和切换 div 的函数。

我希望根据 cookie 值打开或关闭此 div。每次切换时都会更新 cookie。初始值是 cookie 值。

如果不存在 cookie，则创建一个初始值为“true”的 cookie。cookie is_side_toggled 是一个布尔值。

```
function addRightButton() {

    $('.fc-header-right').html
        ('<a class="btn btn-small btn-unscheduled">>></a>');

    if ($('#cal-side').is(":visible")) {
        $('.btn-unscheduled').html('>>');
    }
    else {
        $('.btn-unscheduled').html('<<');
    }

    $('.btn-unscheduled').on('click', function () {

        $('#cal-side').toggle();
        if ($('#cal-side').is(":visible")) {
            $('.btn-unscheduled').html('>>');
        }
        else {
            $('.btn-unscheduled').html('<<');
        }
        resizeCalendar();
    })
} 
```

我怎样才能添加一个 bool cookie 并获得它的值？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:45:57.550

[您可以在https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)使用 jquery cookie 插件 并执行以下操作：

```
function addRightButton() {

    if($.cookie('scheduled') == '0'){
        $('.fc-header-right').html('<a class="btn btn-small btn-unscheduled"><<</a>');
        $('#cal-side').hide();
    }
    else
        $('.fc-header-right').html('<a class="btn btn-small btn-unscheduled">>></a>');

    if ($('#cal-side').is(":visible")) {
        $('.btn-unscheduled').html('>>');
    }
    else {
        $('.btn-unscheduled').html('<<');
    }

    $('.btn-unscheduled').on('click', function () {

        $('#cal-side').toggle();
        if ($('#cal-side').is(":visible")) {
            $('.btn-unscheduled').html('>>');
            $.cookie('scheduled','1');
        }
        else {
            $('.btn-unscheduled').html('<<');
            $.cookie('scheduled','0');
        }
        resizeCalendar();
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:12:57.850

可以通过 JS 原生的 document.cookie() 方法访问 Cookie，如果您不希望将库用作 jQuery 或者使用 jquery，则可以访问/操作 cookie，如下[所示](https://github.com/carhartl/jquery-cookie)。请根据您的代码使用类似 $.cookie('scheduled', true) 的东西

[编辑：] 所以没有给我看这个问题。由@Omar回答并在我上方回答是正确的

# php - 在 PHP 中解析一个巨大的 XML 数组

> ID：15346087
> 
> 赞同：2
> 
> 时间：2013-03-11T18:41:16.650
> 
> 标签：php, xml

我想从[这个 URL 获取数据：`http://livingsocial.com/cities.atom`](http://livingsocial.com/cities.atom) . 每次我点击这个 URL 时，浏览器都会卡住。我试图通过 curl 直接击中它，`file_get_contents()`但结果是一样的。

这个 URL 发送一个巨大的 Xml，我必须从中获取和收集所需的信息并将其保存在数据库中。

请帮助我完成这项任务，或者至少告诉我如何获得这个 XML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T06:39:21.307

一旦我遇到同样的问题..在chrome中打开这个URL的文件内容并在1或2秒后停止它..它将显示xml的结构..完成最后1或2个标签并享受..我在这里粘贴结构..

```
<?xml version="1.0"?>
  <feed xmlns:ls="http://livingsocial.com/ns/1.0" xmlns="http://www.w3.org/2005/Atom" xmlns:georss="http://www.georss.org/georss" xml:lang="en-US">
  <title>LivingSocial Deals</title>
  <updated>2013-03-12T00:49:21-04:00</updated>
  <id>tag:livingsocial.com,2005:/cities.atom</id>
  <link rel="alternate" type="text/html" href="http://www.livingsocial.com/"/>
  <link rel="self" type="application/atom+xml" href="http://www.livingsocial.com/cities.atom"/>
    <entry>
      <id></id>
      <published></published>
      <updated></updated>
      <link type="text/html" href="http://www.livingsocial.com/cities/1759-sacramento-citywide/deals/620554-set-of-two-organic-yoga-leggings" rel="alternate"/>
      <title></title>
      <long_title></long_title>
      <deal_type></deal_type>
      <merchandise_type></merchandise_type>
      <market_id></market_id>
      <market_name></market_name>
      <georss:point></georss:point>
      <georss:featureTypeTag>city</georss:featureTypeTag>
      <country_code>US</country_code>
      <subtitle></subtitle>
      <offer_ends_at></offer_ends_at>
      <price></price>
      <value></value>
      <savings></savings>
      <orders_count></orders_count>
      <merchant_name></merchant_name>
      <image_url></image_url>
      <categories></categories>
      <sold_out></sold_out>
      <national></national>
      <description></description>
      <details></details>
      <content type="html"></content>
      <ls:merchant></ls:merchant>
      <author>
        <name></name>
      </author>
    </entry>
  </feed>
</xml> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:52:01.673

我什至无法在我的浏览器上加载文件，所以我的猜测是它太大了，你应该尝试以某种方式限制你必须加载的数量（是否有参数可以让你只指定一个城市？）但是，如果这不是一个选项，[这里的第一个示例](http://php.net/manual/en/function.xml-parse.php)有一个类，它应该大致完成您正在寻找的内容。只需确保传递 URL 而不是`CURL`请求的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T00:02:59.927

URL`http://www.livingsocial.com/cities.atom`很大（94 354 882 字节，大约 90 MB）并且需要时间来加载（这里是 33 秒）。

由于这是一个远程资源，您无法更改它。

但是，如果您将该提要存储到磁盘（缓存它），您可以减少将文件加载到 Simplexml 或 DOMDocument 中的时间。1.5 秒。

```
// Store URL to disk (takes ca. 33 seconds)
$url = 'http://www.livingsocial.com/cities.atom';
$out = 'cities.atom.xml';
$fh  = fopen($url, 'r');
$r   = file_put_contents($out, $fh);
fclose($fh); 
```

如果这仍然太慢，您不仅需要缓存远程文件，还需要缓存解析。

# c# - 用 0 替换小数点后的数字

> ID：15346088
> 
> 赞同：0
> 
> 时间：2013-03-11T18:41:20.100
> 
> 标签：c#, string-formatting

如何用 0 替换货币的小数部分这是我的货币：166.7 这将被格式化为 000000016670

该字段的长度为 12。

`s.padright(12,0);`这是我相信的第二部分。第一部分将涉及用 000 替换小数点后的数字。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:43:21.377

您可以乘以 100，然后格式化数字。

```
var num = 166.7;
var numString = (num * 100).ToString("000000000000"); 
```

乘以 100 将 166.7 变为 16670。接下来您需要填充数字的左侧部分，这就是 ToString 所做的。每个 0 代表一个数字。这意味着，写入属于该数字的数字，如果没有数字，则打印 0。

# mysql - 仅当低于 100 时才增加列值

> ID：15346089
> 
> 赞同：0
> 
> 时间：2013-03-11T18:41:31.013
> 
> 标签：mysql, codeigniter

好的，我有一个问题，如果不先选择数据并查看列是否低于 100.. 但无论如何。我希望有一种更简单的方法可以做到这一点，所以我不必运行两个查询。我只想更新该列，如果它小于 100 + 我要添加的任何内容。

我正在使用 CI：

```
$this->db->set('happiness', 'happiness + '.$amt['happiness'], FALSE);
$this->db->set('loyalty', 'loyalty + '.$amt['loyalty'], FALSE);
$this->db->set('hunger', 'hunger + '.$amt['hunger'], FALSE);
$this->db->where('id', $creature);
$this->db->update('user_creature'); 
```

问题是，有时幸福可能已经是 94 并且我加了 9 .. 这将使它成为 103 .. 但是我希望能够拥有它的 MAX 值是 100 .. 所以如果它会使其等于或大于 100，我宁愿将其更新为 100。无论如何，您可以在 MySQL 语法中做到这一点吗？有什么功能吗？

现在我只是想我必须选择数据，看看数学是否会让它大于 100，如果是，只需输入 100，如果不是，然后做我的方程式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:46:11.803

您可以使用[MySQL 的 LEAST 函数](http://dev.mysql.com/doc/refman/5.1/en/comparison-operators.html#function_least)来完成此操作。不太熟悉 Codeigniter 的 DB 语法，但这是普通 PHP 中的想法：

```
$sql = "
    UPDATE user_creature
    SET happiness = LEAST(100, happiness + $amt[hunger])
    WHERE id = $creature
"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:45:59.767

为什么不将它也添加到您的 WHERE 子句中？

```
 WHERE (happiness + {$amt['happiness']}) <= 100 
```

# c++ - GPU 上的（跟踪）应用程序的许多实例

> ID：15346090
> 
> 赞同：-1
> 
> 时间：2013-03-11T18:41:35.853
> 
> 标签：c++, opengl, gpu

我使用 C++ 和 OpenGL 开发了一个手部跟踪应用程序。（以及 QT、Eigen、OpenCV）

OpenGL 用于渲染 3D 模型（对于跟踪循环的每次迭代）。

该应用程序仅在 1 个线程中运行。

我有兴趣做一些非常耗时的实验，所以我想知道是否可以并行化事物，即启动同一可执行文件的许多实例，并使用不同的参数运行它们。

只是通过尝试这样做，它似乎可以工作，但我不确定不同的实例是否会在 GPU 上相互干扰。为了更具描述性，我想知道以下几点：如果我每次只运行一个实例进行一些实验，然后通过同时运行多个实例来重复相同的实验，结果在数值上是否相同？

当然，我会尝试通过实验来验证它，但我想知道是否有人可以将我确定为合适的读物（我没有找到真正相关的东西）。

关于这个问题有什么想法吗？

### 回答第一条评论（@KillianDS）

实验的细节确实是数学上的，会在主题中引起“噪音”。

这个想法是你有一个跟踪算法，试图找到前一帧和当前帧之间的对应关系。通过使用这些对应关系，该算法从前一帧（已知）的姿势中获取 3D 模型，并以这种方式对其进行转换，使其适合当前帧。有一些（数学）参数会影响这一点，实验是关于有很多测试框架，并在这些框架上运行具有许多不同参数的算法，以便您可以找到最佳参数（值或值范围）

在实验过程中，您使用 OpenGL 投影 3D 模型，使其适合当前帧图像。您看到的内容照常渲染，但实际工作是使用 GPU 中的屏幕外缓冲区完成的。

到目前为止，我使用多处理（同时运行多个实例）运行实验，但是当我当时只运行一个实例时，我无法重现完全相同的数字，因为我刚刚发现了一个错误。（现在正在进行相同的测试 - 但非常耗时）

但是我想知道当你同时运行多个实例时你是否真的可以信任 GPU，或者 GPU 内存中的东西可能会被搞砸

### 回答第二条评论（@Lajos Arpad）

简而言之，重新定义问题，我不想分享东西，但要确保不同的实例（在你提到的多处理的情况下）不会相互影响（根本没有分享）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:57:36.720

有两种可能的并行化：

1.  多线程

2.  多处理

您可以使用其中之一或同时使用两者。

我不太了解您的任务，因为您并不太具体，但总的来说，您可以通过以下方式分享价值观：

1.  使用您的线程/进程将使用的文件。

2.  使用服务，例如您的线程/进程将在其中操作数据的数据库。

3.  使用声明或定义共享的变量（如 C++ 类的静态成员）。

4.  通过侦听端口和套接字使用进程/线程之间的通信。

在这一刻，我什么都没有想到。其他所有内容均不共享。

有关更多信息，请阅读[此](https://stackoverflow.com/questions/4911994/sharing-a-global-static-variable-between-a-process-and-dll)和[此](https://stackoverflow.com/questions/118199/c-thread-shared-data)。

# c# - C# 三角数优化

> ID：15346095
> 
> 赞同：1
> 
> 时间：2013-03-11T18:41:50.387
> 
> 标签：c#, optimization, divider

任务是找到一个至少有 500 个除数的三角形数。

例如 28 有 6 个除数：`1,2,4,7,14,28`

我的代码最多可用于 200 个除数，但对于 500 个除数，它会永远运行...

有什么办法可以优化代码。例如，我想到了动态优化和记忆，但找不到方法吗？

```
 int sum = 0;
            int counter = 0;
            int count = 1;

            bool isTrue = true;
            while (isTrue)
            {
                counter = 0;
                sum += count;

                for (int j = 1; j <= sum; j++)
                {
                    if (sum % j == 0)
                    {
                        counter++;
                        if (counter == 500)
                        {
                            isTrue = false;
                            Console.WriteLine("Triangle number: {0}", sum);
                            break;
                        }
                    }
                }
                count++;
            }            
            Console.WriteLine("Number of divisors: {0}", counter); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T20:00:05.173

忽略这个数字是三角形数字的事实。如果你能快速解决这个问题：

*   给定任意数 n，确定它有多少个除数

那么显然你可以快速求解 Euler #12。只需列出易于计算的三角形数，确定每个数的除数，并在得到 500 或更大的结果时停止。

那么如何快速确定除数的数量呢？正如您所发现的，当数字变大时，工作量很大。

这里有一个提示。假设您已经有了*质因数分解*。让我们选择一个数字，比如 196。将其分解为素数：

```
196 = 2 x 2 x 7 x 7 
```

*我可以通过看一下 196 有9 个除数*的因式分解告诉你。如何？

因为 196 的任何除数都具有以下形式：

```
(1, 2 or 2x2) x (1, 7 or 7x7) 
```

所以显然有九种可能的组合：

```
1 x 1
1 x 7
1 x 7 x 7
2 x 1
2 x 7
2 x 7 x 7
2 x 2 x 1
2 x 2 x 7
2 x 2 x 7 x 7 
```

选择另一个号码。200，可以说。那是 2 x 2 x 2 x 5 x 5。所以有*十二种*可能性：

```
1 x 1
1 x 5
1 x 5 x 5
2 x 1
2 x 5
...
2 x 2 x 2 x 5 x 5 
```

看到图案了吗？您进行素数分解，将它们按素数分组，然后计算每组中有多少。然后将这些数字中的每一个加一并将它们相乘。同样，在 200中，在素因数分解中有*三个*二和*两个五。*各加一：*四*和*三*。将它们相乘：*十二*。那就是有多少个除数。

*因此，如果您知道素因数分解*，您可以很快找到除数的数量。我们已经将除数问题简化为一个更简单的问题：**你能弄清楚如何快速生成素数分解吗？**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:56:42.137

这里有一些优化，我会为你扔掉。

最简单的就是改变

```
for (int j = 1; j <= sum; j++)
{
    if (sum % j == 0)
    {
        counter++;
        if (counter == 500)
        {
            isTrue = false;
            Console.WriteLine("Triangle number: {0}", sum);
            break;
        }
    }
} 
```

如果你找到了 1 个除数，你就找到了 2 个除数，所以把它改成

```
for (int j = 1; j <= sum; j++)
{
    if (sum % j == 0)
    {
        if(sum/j < j)
            break;
        else if(sum/j == j)
            counter++;
        else
            counter +=2;

        if (counter == 500)
        {
            isTrue = false;
            Console.WriteLine("Triangle number: {0}", sum);
            break;
        }
    }
} 
```

这将大大减少运行时间，但仍然需要很长时间。

* * *

您可以做的另一个优化是不开始检查表格`sum`，而是计算具有 500 个除数的最小数字。

然后你可以找到最大的三角形数，然后从那里开始。

* * *

如果您能找出有关此问题性质的其他特别之处，那么您可能会大大减少运行时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T22:20:49.500

一个数的除数是质因数的幂加一的乘积。例如：`28 = 2^2*7^1`，所以除数的 # 是`(2+1)*(1+1) = 6`。

这意味着，如果与数字的大小相比，您想要许多除数，您不希望任何一个素数出现得太频繁。换句话说：具有至少 500 个除数的最小三角数很可能是小素数的小幂的乘积。

因此，与其检查每个数是否能整除三角形数，不如查看一个最小素数列表，看看每个素数在素数分解中出现的频率。然后使用上面的公式计算除数的数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T22:13:37.197

采取以下步骤：

1.) 计算第一个 log(2, 499) 素数（不是 500，因为如果我弄错了 1 被视为除数，尽管它不是素数，因为它只有一个除数）。那里有很多解决方案，但你明白我的意思。

2.) 三角形数的形式为 n * (n + 1) / 2，因为 1 + 2 + ... + 100 = (1 + 100) + (2 + 99) + ... + (50 + 51) = 101 * 50 = 101 * 100 / 2 = 5050（柯西在他八岁的时候就解决了这个问题，老师用这个任务惩罚了他）。

1 + ... + n = (1 + n) + (2 + n - 1) + ... = n * (n + 1) / 2。

3.) S = prod(第一个 log(2, 499) 素数)

4.) 求解 n * (n + 1) / 2 = S 的方程并计算其上限。你将有一个整数，我们称它为 m。

5.)

```
while (not(found))
    found = isCorrect(m)
    if (not(found)) then
        m = m + 1
    end if
end while
return m 
```

你去吧。如果我能帮助你，请告诉我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-27T06:01:34.650

正如@EricLippert nad @LajosArpad 提到的那样，关键思想是仅迭代[三角形数字](http://en.wikipedia.org/wiki/Triangular_number)。您可以使用以下公式计算它们：

> T(n) = n * (n + 1) / 2

这是[JSFiddle](http://jsfiddle.net/k0stya/9T2dU/)，您可能会发现它很有帮助。

```
function generateTriangleNumber(n) {
    return (n * (n + 1)) / 2;
}

function findTriangleNumberWithOver500Divisors() {
    var nextTriangleNum;
    var sqrt;
    for (i = 2;; i++) {
        var factors = [];
        factors[0] = 1;
        nextTriangleNum = generateTriangleNumber(i);
        sqrt = Math.pow(nextTriangleNum, 0.5);
        sqrt = Math.floor(sqrt);
        var j;
        for (j = 2; j <= sqrt; j++) {
            if (nextTriangleNum % j == 0) {
                var quotient = nextTriangleNum / j;
                factors[factors.length] = j;
                factors[factors.length] = quotient;
            }
        }
        factors[factors.length] = nextTriangleNum;
        if (factors.length > 500) {
            break;
        }
    }
    console.log(nextTriangleNum);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-11T19:24:03.730

顺便说一句，搜索查询的第一个[谷歌](http://www.google.co.in/search?q=divisors%20of%20triangular%20number)结果给出了这个:)`divisors of triangular number`

[Project Euler 12：具有 500 个除数的三角形数](http://www.mathblog.dk/triangle-number-with-more-than-500-divisors/)

看看有没有帮助。

**编辑：**那篇文章的文字：

> 第一个超过 500 位的三角形数是：76576500 求解耗时 1 ms

# bash - Unix uniq 命令到 CSV 文件

> ID：15346100
> 
> 赞同：5
> 
> 时间：2013-03-11T18:42:03.560
> 
> 标签：bash, unix, csv, uniq

我有一个包含单字和多字英文短语的文本文件 (list.txt)。我的目标是对每个单词进行字数统计并将结果写入 CSV 文件。

我已经找到了写入每个单词的唯一实例数量的命令，从最大到最小排序。该命令是：

```
$ tr 'A-Z' 'a-z' < list.txt | tr -sc 'A-Za-z' '\n' | sort | uniq -c | sort -n -r | less > output.txt 
```

问题是新文件 (output.txt) 的格式化方式。有 3 个前导空格，后面是出现次数，后面是空格，然后是单词。然后进入下一行。例子：

```
 9784 the
   6368 and
   4211 for
   2929 to 
```

为了以更理想的格式（例如 CSV）获得结果，我需要做什么？例如，我希望它是：

```
9784,the
6368,and
4211,for
2929,to 
```

更好的是：

```
the,9784
and,6368
for,4211
to,2929 
```

有没有办法使用 Unix 命令执行此操作，或者我需要在文本编辑器或 Excel 中进行一些后处理？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:52:12.643

使用`awk`如下：

```
 > cat input 
   9784 the
   6368 and
   4211 for
   2929 to
 > cat input | awk '{ print $2 "," $1}'
the,9784
and,6368
for,4211
to,2929 
```

您的完整管道将是：

```
$ tr 'A-Z' 'a-z' < list.txt | tr -sc 'A-Za-z' '\n' | sort | uniq -c | sort -n -r | awk '{ print $2 "," $1}' > output.txt 
```

# c++ - 有条件地为变量分配一个类

> ID：15346105
> 
> 赞同：0
> 
> 时间：2013-03-11T18:42:17.863
> 
> 标签：c++, class, object, cuda

如果我有两节课：

```
class A{
    f();
}

class B{
    f();
}; 
```

我需要根据以下条件将这些类之一分配给对象：

```
define variable
if condition1
    variable = A
else
    variable = B 
```

然后我会使用分配的`variable.f();`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:54:45.040

提供`A`并且`B`意味着是不相关的类型（即不是继承层次结构的一部分），您可以将 Boost.Variant 与`boost::static_visitor<>`类结合使用来实现类似的功能：

```
#include <boost/variant.hpp>
#include <iostream>

struct A { void f() { std::cout << "A::f();" << std::endl; } };
struct B { void f() { std::cout << "B::f();" << std::endl; } };

struct f_caller : boost::static_visitor<void>
{
    template<typename T>
    void operator () (T& t)
    {
        t.f();
    }
};

bool evaluate_condition()
{
    // Just an example, some meaningful computation should go here...
    return true;
}

int main()
{
    boost::variant<A, B> v;
    if (evaluate_condition())
    {
        A a;
        v = a;
    }
    else
    {
        B b;
        v = b;
    }

    f_caller fc;
    v.apply_visitor(fc);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:54:59.923

您应该着眼于继承和虚函数。代码可能看起来像

```
class Base
{
    virtual void f() = 0;
};

class A : public Base
{
    virtual void f()
    {
        //class A realization of f
    }
};

class B : public Base
{
    virtual void f()
    {
        //class B realization of f
    }
}; 
```

然后你可以这样做

```
Base* VARIABLE = 0;
if (*condition*)
{
   VARIABLE = new A();
}
else
{
   VARIABLE = new B();
}

VARIABLE->f(); 
```

但使用继承和虚函数并不总是一个好主意。你的 A 类和 B 类应该有一些共同点，至少是函数 f() 的含义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:00:47.053

您正在做的事情在设计模式中被称为“工厂模式”。上面的答案涵盖了它应该如何实施。您可以在[如何正确实现 C++ 中的工厂方法模式](https://stackoverflow.com/questions/5120768/how-to-implement-the-factory-pattern-in-c-correctly)和 wiki ( [http://en.wikipedia.org/wiki/Factory_method_pattern](http://en.wikipedia.org/wiki/Factory_method_pattern) ) 中获得更多信息。

# c++ - OpenCV 2.4.3 中 msvc 2010 c++ 和 gnu c++ (g++-4) 的区别

> ID：15346107
> 
> 赞同：0
> 
> 时间：2013-03-11T18:42:22.860
> 
> 标签：c++, opencv, pass-by-reference, visual-studio-2010

我的 c++ 代码中有一个函数，可以比较两个图像并删除静态背景（有点骇人听闻，但适用于我的目的）：

```
void Keyboard::processBackground( const cv::Mat& img, cv::Mat &foreground )
{
    cv::Mat grey, diff;

    cv::cvtColor( img, grey, CV_RGB2GRAY );

    cv::equalizeHist( grey, grey );

    if ( !initialBackground )
    {
        bg = grey.clone();
        initialBackground = true;
    }
    cv::absdiff( grey, bg, diff );
    cv::threshold( diff, foreground, 75.0, 255, cv::THRESH_BINARY );

    cv::imshow( "foreground", foreground );
    cv::imshow( "background", bg );
} 
```

此代码在带有 g++-4.5 的 Ubuntu 中完全按预期工作，但在 msvc 2010 (express) 中，一旦我退出此函数（即使它是通过引用传递的），我的前景似乎也没有设置。

我正在运行 Windows 8 64 位，但针对 32 位库进行编译（出于兼容性原因）。

我已经在 Ubuntu 12 中广泛运行了这段代码，它按预期运行（设置了前台），但在 msvc 中没有。即使将前景作为指针传递似乎也无法按预期工作。

这是一个已知的怪癖、msvc 的问题还是 OpenCV 2.4.3 的问题？

# javascript - jQuery Animate 只能以一种方式工作

> ID：15346108
> 
> 赞同：0
> 
> 时间：2013-03-11T18:42:26.573
> 
> 标签：javascript, jquery, animation

我有以下代码。

```
$("#social-links a").hover(function()
{
    $(this).children('span').show();
    $(this).children('span').animate({bottom: '25px', opacity: 1}, 300);
}, function()
{
    $(this).children('span').animate({bottom: '0', opacity: 0}, 300);
    $(this).children('span').hide();
}); 
```

这个想法是跨度标签中的文本淡入并向上移动，然后向下移动并淡出。悬停功能可以正常工作，但是当我将鼠标悬停在链接之外时，淡出跨度的动画似乎不起作用。它确实相应地更改了 CSS，但它似乎没有动画。谁能看看我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:45:22.373

动画完成后需要调用 hide：

```
 $(this).children('span').animate({bottom: '0', opacity: 0}, 300, function(){
     $(this).hide();
 }); 
```

或者，使用延迟对象：

```
var $el = $(this).children('span');
$.when($el.animate({bottom: '0', opacity: 0}, 300)).then(function(){
    $el.hide();
}) 
```

此时您的代码开始动画，然后立即隐藏 div，因为效果`.hide`是即时的，而不是被添加到动画队列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:45:33.247

动画完成时应用回调函数。更多关于[`.animate()`](http://api.jquery.com/animate/)。

```
$(this).children('span').animate({bottom: '0', opacity: 0}, 300, function() {
    $(this).hide();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:45:34.137

尝试这个：

```
$("#social-links a").hover(function() {
    $(this).children('span').show().animate({bottom: '25px', opacity: 1}, 300);
}, function() {
    $(this).children('span').animate({bottom: '0', opacity: 0}, 300).hide();
}); 
```

# jsfiddle - Imgur 图像未显示在 JSFiddle 中

> ID：15346109
> 
> 赞同：5
> 
> 时间：2013-03-11T18:42:29.517
> 
> 标签：jsfiddle, imgur

我正要问一个关于 JSFiddle 的问题，我注意到图像（我在 Imgur 上得到的）没有出现。如果我直接在浏览器中加载图片，然后重新加载小提琴，图片就会显示出来，但如果你还没有加载图片，它们就不会显示。有没有办法解决这个问题？还是我只需要在不同的网站上托管图片？

这是小提琴的链接：http: [//jsfiddle.net/r4crr/3/](http://jsfiddle.net/r4crr/3/)

这里有一些来自小提琴的愚蠢代码，它看起来实际上是无关紧要的。

```
<div id="makeJSFshowPics">
<img src="http://i.imgur.com/7ftvzYB.png" alt="High Interest"><img src="http://i.imgur.com/u8i9Coo.png" alt="Okay I guess"><img src="http://i.imgur.com/v66NbIR.png" alt="Do Not Want"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:57:10.203

打开 Chrome 的网络面板，发现这些 url 得到了 403 - 来自 imgur 的 Forbidden。不知道为什么。所以我在一个新选项卡中打开了 imgur url，然后回到 jsfiddle 并点击运行。宾果游戏，图像出现了。必须对所有图像都这样做，这不是很好。看起来其他人遇到了这个问题，但没有任何解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-14T21:18:25.467

无论出于何种原因，imgur 都会阻止来自 jsfiddle（和 jsbin）的图像。也许有滥用行为，我不确定为什么。图像根据引用者被阻止。可以实现绕过，将图像加载到 iframe 中，从而欺骗引用者。不过，这似乎有点过头了。出于同样的原因，您可以在访问图像的 imgur url 后在小提琴中看到图像，因为它已被缓存。

# javascript - Youtube Upload Widget onApiReady 未触发

> ID：15346110
> 
> 赞同：0
> 
> 时间：2013-03-11T18:42:32.080
> 
> 标签：javascript, jquery, youtube, youtube-api

我正在尝试使用 Youtube Upload Widget 从网站上传视频。我有以下 javascript：

```
function onYouTubeIframeAPIReady() {
    widget = new YT.UploadWidget('widget', {
        events: {
            onApiReady: function (event) {
                event.target.setVideoTitle($("#title"));
                event.target.setVideoDescription($("#description"));
                event.target.setVideoPrivacy($("#privacy"));
            },
            onProcessingComplete: function(event) {
                document.getElementById('processing').style.display = "none";
                clearTimeout(timeout);
                player = new YT.Player('player', {
                    height: 390,
                    width: 640,
                    videoId: event.data.videoId,
                    modestbranding: 1,
                    rel: 0,
                    events: {}
                });

                $("#updates").slideUp('slow', function() { });
            },
            onUploadSuccess: function(event) {
                alert('Video ID ' + event.data.videoId + ' was uploaded and is currently being processed.');
                widgetVideoId = videoId = event.data.videoId;
                timeout = setTimeout(showProcessing, 1);
            }
        }
    });
} 
```

视频上传得很好，但 onApiReady 的功能永远不会触发。我不确定我错过了什么，因为它看起来很完整。希望有人可以就我错过的内容提供一个想法。它不适用于 IE9、FF、Chrome 或 Safari。我希望能够在上传视频时更新其元数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:46:30.013

```
event.target.setVideoTitle($("#title"));
event.target.setVideoDescription($("#description"));
event.target.setVideoPrivacy($("#privacy")); 
```

所有这些方法都需要一个字符串参数，而您正在向它们传递一个 jQuery 对象。我相信你的意思是使用 .val()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T13:28:56.560

好的，我想通了。似乎您必须使用`<div id="widget"></div>`小部件控制器的格式而不是 iframe 方法才能触发 onApiReady。

感谢您的帮助布拉德。

# ruby-on-rails - Rails ActiveRecord 回调混乱

> ID：15346111
> 
> 赞同：1
> 
> 时间：2013-03-11T18:42:33.510
> 
> 标签：ruby-on-rails, activerecord

这简直是​​疯了。我有一个简单的回调函数来初始化和验证一个类子类：

```
class A < ActiveRecord::Base
   has_many :bs
   after_initialize :add_t_instance
   validate :has_only_one_t

  protected

  def add_t_instance
      bs << B.new(:a => self, :type => "T") unless bs.map(&:type).count("T") > 0
  end

  def has_only_one_t
     unless bs.map(&:type).count("T") < 2
       errors.add(:bs, 'has too many Ts")
     end
  end

end 
```

现在，运行时的魔法来了：

```
a = A.new
>>[#<A>]
a.bs
>> [#<T>]
a.save
>> true
a.id
>> 15 
```

到目前为止一切都很好，但是：

```
s = A.find(15)
s.bs
>>[#<T>,#<T>]
s.bs.count
>> 2
s.valid?
>> false
s.errors.full_messages
>> "Too many Ts" 
```

我到底在这里想念什么？！？！世界上有什么可以添加第二个#T？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:59:33.000

令人困惑的是（至少对我而言）[`after_initialize`](http://guides.rubyonrails.org/active_record_validations_callbacks.html#after_initialize-and-after_find)每当实例化活动记录对象时都会调用，不仅在创建新实例之后，而且在从数据库加载现有实例之后。因此，您在运行时创建了第二个 B `A.find(15)`。

您可以通过检查您是否正在处理回调中的新记录来解决问题，例如

```
def add_t_instance
  if new_record?
    bs << B.new(:a => self, :type => "T") unless bs.map(&:type).count("T") > 0
  end
end 
```

或者您可以在`before_initialize`声明本身上设置一个条件，或者尝试使用 before_create 回调。

# python - Python：我想要两个 while 循环生成两个

> ID：15346115
> 
> 赞同：-3
> 
> 时间：2013-03-11T18:42:48.553
> 
> 标签：python

我是 Python 和一般编程的新手。我有一个列表，我想要一个变量在循环中逐步获取列表的每个值。我应该使用哪个指令来推断列表的单个值？

```
b = [-100, -50, -150, -100, -100, -100, -50] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:47:57.887

```
b = [-100, -50, -150, -100, -100, -100, -50]
for x in b:
    print(x) 
```

这将打印：

```
-100
-50
-150
-100
-100
-100
-50 
```

# c# - UseImplicitZeroDefaults 用于生成的 protobuf 类

> ID：15346116
> 
> 赞同：1
> 
> 时间：2013-03-11T18:42:48.770
> 
> 标签：c#, protobuf-net

使用 protogen 生成的类的默认值似乎没有在`UseImplicitZeroDefaults = false`.

我有一个小的 .proto 文件：

```
package protobuf;

option java_package = "com.company.protobuf";
option java_outer_classname = "Test";

message TestMessage{        
    optional string Message = 1;
    optional bool ABool = 2;
    optional int32 AnInt = 3;           
} 
```

使用 protogen.exe，我生成了一个`TestMessage`类，我试图通过网络来回发送到 Java 应用程序。我似乎无法让 protobuf-net 序列化 0`AnInt`或 false的值`ABool`，包括设置`UseImplicitZeroDefaults=false`. 但是，使用带有该设置的带注释的类进行序列化是可行的。这是与我生成的类等效的类：

```
[ProtoContract]
class Test2
{
    [ProtoMember(1)]
    public string Message { get; set; }
    [ProtoMember(2)]
    public bool ABool { get; set; }
    [ProtoMember(3)]
    public int AnInt { get; set; }
} 
```

用相同的数据初始化这两个类并序列化为`byte[]`显示有四个额外的字节来自带注释的类。

```
...
private static readonly RuntimeTypeModel serializer;
static Program()
{
    serializer = TypeModel.Create();
    serializer.UseImplicitZeroDefaults = false;
    Console.WriteLine(serializer.UseImplicitZeroDefaults); //prints false 
}

static void SendMessages(ITopic topic, ISession session)
{
    Console.WriteLine(serializer.UseImplicitZeroDefaults);

    TestMessage t = new TestMessage();
    t.ABool = false;
    t.AnInt = 0;
    t.Message = "Test Message";

    using (var o = new MemoryStream())
    {
        serializer.Serialize(o, t);
        Console.WriteLine(string.Format("Tx: Message={0} ABool={1} AnInt={2}", t.Message, t.ABool, t.AnInt));
        Console.WriteLine(o.ToArray().Length);
    }

    Test2 t2 = new Test2();
    t2.ABool = false;
    t2.AnInt = 0;
    t2.Message = "Test Message";
    using (var o = new MemoryStream())
    {
        serializer.Serialize(o, t2);
        Console.WriteLine(string.Format("Tx: Message={0} ABool={1} AnInt={2}", t.Message, t.ABool, t.AnInt));
        Console.WriteLine(o.ToArray().Length);
    }
} 
```

输出：

```
False
Tx: Message=Test Message ABool=False AnInt=0
14
Tx: Message=Test Message ABool=False AnInt=0
18 
```

有没有我缺少的设置？还是从 .proto 文件生成的类使用不同的序列化机制？在一个理想的世界中，我希望该`UseImplicitZeroDefaults`设置在通过序列化程序的过程中被带注释的类和生成的类都拾取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:21:02.153

如果您添加`-p:detectMissing`对 的调用`protogen`，它应该按照不同的模式发出代码，以便更好地跟踪这些代码。基本上，它应该做你想做的事。

# ios - 在 UIWebView 中调试启动 Javascript

> ID：15346123
> 
> 赞同：5
> 
> 时间：2013-03-11T18:43:21.627
> 
> 标签：ios, uiwebview, javascript-debugger, safari-web-inspector

我目前正在调试嵌入在 UIWebView 中以在应用程序中显示的网页。

它使用了一些精心设计的加载 Javascript，在 Android 应用程序中运行良好，但在 iOS 应用程序中中断。

[这个答案](https://stackoverflow.com/a/12552686/225176)将我指向 UIWebView 的 Safari Web Inspector - 但是，由于损坏的 Javascript 正在页面加载时运行，我实际上无法及时附加检查器以捕获出现的任何问题。

现在我正在通过手动在页面中插入延迟来解决它，但是有没有更好的方法（不需要我对页面代码本身进行更改，启动应用程序，急于在 Safari 中加载它，然后再等一段时间让它继续）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T23:30:34.963

**重要编辑**：在 Safari 7.0 中，您可以通过选择“资源”视图并单击顶级页面旁边的刷新箭头来重新加载页面。[看来至少在某些版本的 Safari 6 中，您也可以通过选择文档选项卡，单击顶级页面将其选中，然后按 Command+R（与普通 Safari 中用于刷新页面的快捷键相同）来执行此操作.] 如果您从 Safari Web Inspector 刷新页面，您设置的断点仍然存在，因为这样做不会导致 SWI 分离从您的应用程序或 Xcode 调试器重新加载页面的方式。这意味着*只要页面不执行 Javascript 重定向或在应用程序本身中触发副作用，您就可以通过加载页面一次，在此处设置断点，然后从 SWI 中重新加载页面来逐步执行 onload Javascript*。

**原始帖子**：我能找到的唯一解决方案是进行“额外”调用，`shouldStartLoadWithRequest:`如下所示：

1.  添加一个脚本（*不是*onload，同步）作为页头中的第一个元素：

    ```
    <script type="text/javascript">
        window.location = "myapp://catchme";
    </script> 
    ```

2.  在 XCode 中设置断点`shouldStartLoadWithRequest:`

3.  编辑断点以设置以下条件：

    ```
    (bool)[[[request URL] absoluteString] isEqualToString:@"myapp://catchme"] 
    ```

    （如果没有这种情况，它将在初始`shouldStartLoadWithRequest:`调用时停止，这不是您想要的，因为在此阶段该页面还不能用于附加 Mobile Web Inspector。）

4.  开始页面加载，当它遇到 (Xcode) 断点时，切换到 Safari，并使用 Develop > iPhone Simulator > (my page) 启动 Mobile Web Inspector，然后切换回 Xcode 并在所有页面上的资源请求超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-04T16:59:41.480

[Weinre](http://people.apache.org/~pmuellr/weinre-docs/latest/)帮我解决了这个问题，因为它从一开始就是连接的，你可以完全控制页面。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T21:20:20.127

为什么不在 shouldStartLoadWithRequest 中设置断点，然后打开检查器？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-26T10:09:20.090

与 OP 提出的问题不是 100% 相关，但我在一个移动应用程序中遇到了与*Android* WebView 类似的问题，该应用程序的本机代码我无法控制（但启用了 WebView 调试）。

*   `document.reload()`并且所有其他类似的重新加载页面的方法都不适合我
*   我想把它放在`alert()`页面的最顶部，这在理论上是一个阻塞调用，但它也对我不起作用。
*   最后，我选择了一个阻塞的、同步的 XHR。

为了在页面加载时注入人为延迟，我在我控制下的端点添加了一个假调用，该调用在 15 秒后返回 200 OK。

把这个放在最上面`<head>`

```
 <script>
    try {
      var request = new XMLHttpRequest();
      request.open('GET', 'https://whatever/please-freeze', false); // false = sync XHR
      request.send(null);
    } catch (err){
      debugger;
    };
    debugger;
  </script> 
```

例如，您可以创建自己的简单 http 服务器，其端点行为如下，但这有点矫枉过正。

无论出于何种原因，这些`debugger`语句都没有触发 Chrome 中的断点，但是动态加载的代码（之前创建的）中手动定义的断点运行良好。

# 适用于 Windows (Fiddler) 用户的 hack

因为我在 Windows 上，所以我使用 Fiddler**创建了一个有延迟的自动回复。**

[![有延迟的提琴手自动回复](../Images/0f4f44e1da7587425bdf2414962bafbd.png)](https://i.stack.imgur.com/9ZF79.png)

我还使用 Fiddler 来编辑原始页面请求的 HTML，以注入`<script>`前面提到的内容。

# php - PHP - 电子邮件未发送

> ID：15346125
> 
> 赞同：0
> 
> 时间：2013-03-11T18:43:31.470
> 
> 标签：php, email

有两个步骤，首先我发送给需要时事通讯的人的电子邮件，第二封电子邮件需要发送到 info@dirtytrend.com。问题是电子邮件是在第一步中发送的，但第二步中的电子邮件永远不会通过，但代码似乎继续进行而没有任何错误。

代码如下

```
<?php

$name = $_POST["nameofperson"];
$to = $_POST["emailofperson"];
$subject = "Hi!";
$body = "Hi " . $name . ",<br><br>Thank you for subscribing?\n\nWe have logged your email to process your newsletter and you will recieve an email from us confirming your subscription.";

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

if (mail($to, $subject, $body, $headers)) {

    $body2 = "Name: " . $name . "\n";
    $body2 .= "Email: " . $to;
    if(mail("info@dirtytrend.com", "Subscription Request", $body2)){

        header("Location: http://www.dirtytrend.com/events.html");
    }
    else{

    }

 } else {
    echo "ERROR: Email not sent please contact the system administrator";
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:49:11.943

在第二个 mail() 中，您只有 3 个参数，而您缺少带有标题的第 4 个参数，所以它可能被识别为垃圾邮件？

# javascript - 使用Jquery单击清除输入框

> ID：15346126
> 
> 赞同：1
> 
> 时间：2013-03-11T18:43:46.987
> 
> 标签：javascript, jquery

我有一个简单的代码，我试图在我的网站中清除一个带有默认值的文本框，当用户点击它时，默认值应该被清除，以便用户可以输入他/她的值。这是我所拥有的，但我不确定它是否正确，因为它不起作用。我刚开始使用 JQuery

```
 $(document).ready(function()
  {
        $('#startDateBox').click(function()
        { 
            if(('#startDateBox')=='Beginning')

            {
             $('#startDateBox').val(''); 
            }

         })
   });​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:46:12.867

你在这部分错了：

```
 if(('#startDateBox')=='Beginning') 
```

首先，您缺少`$`. 其次，我想你想比较`startDateBox`值，然后使用`val()`.

试试这个：

```
 $(document).ready(function()
  {
        $('#startDateBox').click(function()
        { 
            if($('#startDateBox').val()=='Beginning')
            {
             $('#startDateBox').val(''); 
            }
         })
   });​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T18:46:38.277

你错过了第一个`.val()`，和`$`前面的`('#startDateBox')`在同一行。您还可以使用`$(this)`来引用文本框，因为在该函数中`this`引用文本框 DOM 元素本身。用 jQuery 函数包装它可以`$()`让您访问所有框架的好东西。

```
$(document).ready(function()
{
    $('#startDateBox').click(function(){  
         if($(this).val() == 'Beginning')
                 ^^^^^^ Here
         {
             $(this).val(''); 
         }
    })
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:46:19.120

我建议 HTML5 浏览器使用这个

```
 <input type="text" id="Beginning" placeholder="Beginning"  />

if($('#startDateBox').val() =='Beginning') 
```

这是需要更改的行

还

```
 $('#startDateBox').on("focus", function()
        { 
          // code here 
```

在该文本框获得焦点之前，单击将不会处理点击选项卡

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T18:46:49.187

好吧，`if(('#startDateBox')=='Beginning')`永远*都是*假的……

我认为您的意思更像是：

```
if($('#startDateBox').val() == 'Beginning') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T18:50:53.940

我最近为此目的写了一个非常小的 jquery 插件：

[https://gist.github.com/rmcvey/5136582](https://gist.github.com/rmcvey/5136582)

```
$('#input').placeholder("Placeholder Text");

if($('#input').val() === $('#input').placeholder()){ return false; } 
```

# ios - 检测 AVQueuePlayer 中的当前项目并知道它何时更改？

> ID：15346127
> 
> 赞同：3
> 
> 时间：2013-03-11T18:43:51.923
> 
> 标签：ios, avaudioplayer, avplayer, nsnotifications, avqueueplayer

我目前有一个 AVQueuePlayer 依次播放几个 .aif 文件。当它通过每个音频时，我想执行与该特定声音相关的操作（例如更改图像视图的 uiimage）。

我的问题是正确设置 NSNotification。我已将其设置为在队列完成最后一个对象时通知我，但我无法接收到每个当前项目的通知。这是我所拥有的：

```
//Setting Up My Queue List
    yellowVoice = [[AVPlayerItem alloc] initWithURL:[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/YellowVoice.aif", [[NSBundle mainBundle] resourcePath]]]];
    orangeVoice = [[AVPlayerItem alloc] initWithURL:[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/OrangeVoice.aif", [[NSBundle mainBundle] resourcePath]]]];
    redVoice = [[AVPlayerItem alloc] initWithURL:[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/RedVoice.aif", [[NSBundle mainBundle] resourcePath]]]];
    pinkVoice = [[AVPlayerItem alloc] initWithURL:[NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/PinkVoice.aif", [[NSBundle mainBundle] resourcePath]]]];

    NSArray *soundEmotions = [NSArray arrayWithObjects:yellowVoice, orangeVoice, redVoice, pinkVoice, nil];

    soundQueue = [AVQueuePlayer queuePlayerWithItems:soundEmotions];

// Notify me when queue reaches the end of the last player item
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(playerItemDidReachEnd:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:[soundEmotions lastObject]];

// Notify me when a new player item begins and which one it is
[[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(currentItemIs:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:[soundQueue currentItem]];

[soundQueue play]; 
```

我觉得我被 name 参数困住了。我应该把它改成什么？当它切换时，我如何找出当前正在播放的播放器项目的名称？谢谢！

```
//Here is one of the things I want to do with that info
- (void)currentItemIs:(NSNotification *)notification {

    if (soundQueue.currentItem ==yellowVoice) {

        UIImage * yellowImage = [UIImage imageNamed:@"yellow.png"];
        [UIView transitionWithView:self.view
                          duration:1.0f
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        animations:^{
                            mainImage.image = yellowImage;
                        } completion:NULL];

    }

    if (soundQueue.currentItem ==yellowVoice) {

        UIImage * orangeImage = [UIImage imageNamed:@"orange.png"];
        [UIView transitionWithView:self.view
                          duration:1.0f
                           options:UIViewAnimationOptionTransitionCrossDissolve
                        animations:^{
                            mainImage.image = orangeImage;
                        } completion:NULL];

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:01:12.620

```
- (void)currentItemIs:(NSNotification *)notification 
{
   AVPlayerItem *p = [notification object];
   if (p ==yellowVoice) {
   //rest of the code
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-04T13:12:07.453

Bhushan 的答案是缺少触发每个项目通知的循环，因此：

```
for (AVPlayerItem *playerItem in queuePlayer.items) {
            [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(currentItemIs:)  name:AVPlayerItemDidPlayToEndTimeNotification object:playerItem];
        } 
```

# java - Java JSON 库抛出异常

> ID：15346128
> 
> 赞同：0
> 
> 时间：2013-03-11T18:43:52.437
> 
> 标签：java, json, org.json

我有以下 JSON 字符串：

```
{"widget":{"order":{"fizz":["23", "55"],"setting":"always"}},"resp":"ok"} 
```

以及以下 Java 代码：

```
try {
    JSONObject json = getTheAboveStringAsJSON();
    order = json.getJSONObject("order");
} catch(JSONException e) {
    throw new RuntimeExcept(e.getMessage());
} 
```

给我以下例外：

```
JSONObject["order"] not found.
java.lang.RuntimeException: JSONObject["order"] not found. 
```

这里发生了什么？为什么例外？我能做些什么来修复它？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:47:20.563

你的结构是

```
{
    "widget":{
        "order":{
            "fizz":["23", "55"],
            "setting":"always"
         }
     },
     "resp":"ok"
} 
```

所以你需要先访问“小部件”，然后在小部件内“订购”

```
order = json.getJSONObject("widget").getJSONObject("order") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:45:47.483

getTheAboveStringAsJSON() 方法返回的 json 数据是什么，没有数据

命令`key`

```
json.getJSONObject("widget").getJsonObject("order"); 
```

# prestashop - 订单退货中的 Prestashop 错误

> ID：15346129
> 
> 赞同：0
> 
> 时间：2013-03-11T18:43:56.153
> 
> 标签：prestashop, object-model

尝试将退货状态从“等待确认”更改为“等待包裹”时，我在后台 > 订单 > 商品退货中遇到错误。

我附上了截图。任何帮助将非常感激。![在此处输入图像描述](../Images/2782ad3ed2e5a1f8203fa307cc0547a3.png)

![在此处输入图像描述](../Images/7dc70a5fc68d663bcf44348c3cd5af10.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:22:09.800

不能说出为什么它显示该错误的确切问题。但让我给你一个快速修复，希望它能修复它。打开文件**classes/order/OrderReturn.php** 找到下面的代码

```
 public static $definition = array(
    'table' => 'order_return',
    'primary' => 'id_order_return',
    'fields' => array(
        'id_customer' =>    array('type' => self::TYPE_INT, 'validate' => 'isUnsignedId', 'required' => true),
        'id_order' =>       array('type' => self::TYPE_INT, 'validate' => 'isUnsignedId', 'required' => true),
        'question' =>       array('type' => self::TYPE_HTML, 'validate' => 'isMessage'),
        'state' =>          array('type' => self::TYPE_STRING),
        'date_add' =>       array('type' => self::TYPE_DATE, 'validate' => 'isDate'),
        'date_upd' =>       array('type' => self::TYPE_DATE, 'validate' => 'isDate'),
    ),
); 
```

在那里你可以看到下面的行

```
 'question' =>      array('type' => self::TYPE_HTML, 'validate' => 'isMessage'), 
```

将其更改为

```
 'question' =>         array('type' => self::TYPE_HTML, 'validate' => 'isString'), 
```

然后检查页面，希望你没有错误。

如果您还需要更多帮助，请告诉我。

谢谢

# windows - 如何防止 wxWidgets 窗口在创建时在任务栏中闪烁？

> ID：15346130
> 
> 赞同：0
> 
> 时间：2013-03-11T18:44:05.130
> 
> 标签：windows, wxwidgets, taskbar

如果我的 wxWidgets 应用程序在应用程序没有焦点时创建了一个新窗口，它的任务栏图标会闪烁黄色，直到我切换到它，如下所示：

![在此处输入图像描述](../Images/da7574154b4c85cb6b606f8ab4d1e7e5.png)

这很烦人。我怎样才能防止这种情况发生？

*编辑*：这个问题的原始版本表明在启动期间发生了闪烁。经过进一步调查，这不是在应用程序启动时发生的；相反，如果我在应用程序没有焦点的情况下创建一个额外的窗口，就会发生这种情况。

提供更多背景知识：我的应用程序是一种服务器，它打开窗口以响应网络事件。如果我启动应用程序，然后将焦点切换到其他东西并且焦点在其他地方时出现网络事件，我的应用程序将在后台打开一个新窗口（不抓住焦点）并且会发生这种闪烁。

窗户是`wxFrame`s; 应用程序构造它们和它们的子部件，然后调用`Show(true)`框架。

另外，我尝试在`FlashWindow`Win32 API 函数上设置断点，希望能在 WX 中的任何地方捕获它被调用的地方，但无法实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:39:50.537

也许以下方法会起作用：

wxTopLevelWindow::ShowWithoutActivating ( )

[http://docs.wxwidgets.org/trunk/classwx_top_level_window.html#a03e526f505716568318d601318527bd0](http://docs.wxwidgets.org/trunk/classwx_top_level_window.html#a03e526f505716568318d601318527bd0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:00:57.607

是的。如果您在应用程序没有焦点时创建新的顶级窗口，则任务栏图标将闪烁。这是 Windows 操作系统的预期行为。

# forms - 检测表单更改获取 id

> ID：15346133
> 
> 赞同：0
> 
> 时间：2013-03-11T18:44:28.210
> 
> 标签：forms, select, parent

I am trying to get the form id when an option in a drop down is selected:

HTML

```
<form id="test">
     <select id="option1">
      <option id="opt1">Hello</option>
     </select>
 </form> 
```

JS：

```
$("#test").change(function(){

     var formid=$("test").parent("form");
     alert(formid);

}); 
```

警报中的输出是“对象对象”。我也尝试过最接近的，它给出了相同的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:45:49.593

```
$("#test").change(function(){

     var formid=$("test").parent("form").attr('id');
     alert(formid);
}); 
```

# mysql - 如何将if表达式转换为sql查询

> ID：15346135
> 
> 赞同：0
> 
> 时间：2013-03-11T18:44:28.997
> 
> 标签：mysql, sql

我有任何表达式，现在我需要在我的 sql 数据库记录上运行请帮助我使用 sql 这是代码

```
if (( (gpa == edu.gpa || gpa <= 0) && (edu.gpa.Equals(gpa) || string.IsNullOrEmpty(gpa)) 
```

我尝试过类似的转换成 sql 查询，比如

```
SELECT *
FROM education
WHERE (gpa >= somevalue OR gpa =0 )
AND (degree = 'somevalue' OR degree is NULL) 
```

如果用户在 filter 中输入空值，此查询不会返回正确的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:07:54.343

尝试这个

```
 SELECT *
 FROM education
 WHERE (degree = 'somevalue' OR degree is NULL)
 HAVING gpa >= somevalue OR gpa =0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:55:39.973

试试这个：

```
SELECT *
FROM education
WHERE (gpa IS NULL OR gpa >= somevalue OR gpa =0 )
AND (degree is NULL OR degree = 'somevalue' OR TRIM(degree) = '') 
```

试试[这个 SQL Fiddle](http://sqlfiddle.com/#!2/f6841/1)并告诉我。

# adt - 在 ADT v21.1 上为 HTC Desire 和三星 Galaxy 3 创建 AVD

> ID：15346136
> 
> 赞同：0
> 
> 时间：2013-03-11T18:44:38.660
> 
> 标签：adt, avd, samsung-mobile, htc-android

如何使用 ADT v21.1 为 HTC Desire 和三星 Galaxy 3 手机创建 avd？我发现的所有建议都是关于旧 ADT 的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T03:03:24.630

设备：3.7" WVGA (480x800: hdpi)
目标：Android 2.3.3 - API 级别 10
CPU/ABI：ARM (armeabi)
取消选中“硬件键盘存在”
取消选中“显示带有硬件控件的皮肤”
内存选项：RAM：576
内存选项：VM 堆：24
内部存储：150 MiB
SD 卡：大小：4 GiB

您可能希望使用较小的 SD 卡和 Intel Atom System Image Target 或 x86 CPU/ABI 以获得更好的性能，尽管仿真不太准确。请注意，在此之前您需要在 SDK 管理器中下载等效的平台和系统映像。

# python - VB dll 在带有 ctypes 的 python 中不起作用（函数 * 未找到）

> ID：15346138
> 
> 赞同：5
> 
> 时间：2013-03-11T18:44:41.543
> 
> 标签：python, vb.net, dll, ctypes

我很难在 VB 中创建对 python 可见的 dll，

当我将 dll 导入 python 时，没有一个 VB 函数可见

这就是我所做的：

1.  有史以来最简单的 VB 类

> ```
> Public Class MyFunctions
>         Public Function AddMyValues(ByVal Value1 As Double, ByVal Value2 As Double)
>             Dim Result As Double
>             Result = Value1 + Value2
>             Return Result
>         End Function
>     End Class` 
> ```

2.  我将其保存为 dll（从 Visual Studio 2010 构建）

3.  我尝试通过将其导入到其他 VB 项目中是否可以工作（它工作正常）：

> ```
>  Imports ClassLibrary1
> Module Module1
> 
>     Sub Main()
>         Dim Nowa As New ClassLibrary1.MyFunctions
> 
>         Dim Result As String
>         Result = Nowa.AddMyValues(123, 456.78).ToString
>         Console.WriteLine(Result)
>         Console.ReadLine()
>     End Sub
> 
> End Module 
> ```

3.  我将它加载到 python 中并尝试使用它：

> ```
> from ctypes import *
> MojaDLL = cdll.LoadLibrary("E:\\ClassLibrary1.dll")
> MojaDLL.MyFunctions
> Traceback (most recent call last):
>   File "<console>", line 1, in <module>
>   File "C:\Python25\lib\ctypes\__init__.py", line 361, in __getattr__
>     func = self.__getitem__(name)
>   File "C:\Python25\lib\ctypes\__init__.py", line 366, in __getitem__
>     func = self._FuncPtr((name_or_ordinal, self))
> AttributeError: function 'MyFunctions' not found 
> ```

而不是 MyDll.MyFunctions 我也试过：`MyDll.MyFunctions() , MyDll.MyFunctions.AddMyValues(1,2) , MyDll.MyFunctions.AddMyValues`。

这里有什么问题？我不明白。

PS。有类似的未解决问题：[在python中调用vb dll](https://stackoverflow.com/questions/1363305/calling-vb-dll-in-python)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-24T13:44:59.330

你不能做这个。您生成的 DLL 是一个 .NET 程序集，或者，如果您公开一个 COM 接口，它就是一个 COM 组件。

Python 的`ctypes`模块仅支持[C ABI DLLs](http://en.wikipedia.org/wiki/Application_binary_interface)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T13:23:34.517

[`dumpbin.exe`](http://support.microsoft.com/kb/177429)在您的 dll 上使用，或者`/exports`可以`/linkermember`选择查看 DLL 中实际导出的名称是什么。

# ios - 设置 UIButton 目标

> ID：15346142
> 
> 赞同：0
> 
> 时间：2013-03-11T18:44:51.423
> 
> 标签：ios, xcode

当以这种方式按下 buttonCancel 时，我试图调用一个方法：

```
+ (DejalActivityView *)activityViewForView:(UIView *)addToView withLabel:(NSString *)labelText width:(NSUInteger)aLabelWidth;
{
// Immediately remove any existing activity view:
if (dejalActivityView)
    [self removeView];

// Remember the new view (so this is a singleton):
dejalActivityView = [[self alloc] initForView:addToView withLabel:labelText width:aLabelWidth];

buttonCancel = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[buttonCancel addTarget:self
                 action:@selector(callCancelAlert:)
       forControlEvents:UIControlEventTouchDown];
[buttonCancel setTitle:@"Cancel upload" forState:UIControlStateNormal];
buttonCancel.frame = CGRectMake(250, 560, 300, 40);
[addToView addSubview:buttonCancel];
[buttonCancel setImage:[UIImage imageNamed:@"socialize-navbar-bg.png"] forState:UIControlStateNormal];

return dejalActivityView;
} 
```

和方法

```
 -(IBAction)callCancelAlert:(id)sender{

UIAlertView *alert = [[UIAlertView alloc]
                      initWithTitle: @"Announcement"
                      message: @"It turns out that you are playing Addicus!"
                      delegate: nil
                      cancelButtonTitle:@"OK"
                      otherButtonTitles:nil];
[alert show];
//[alert release];
} 
```

我收到此错误：

'NSInvalidArgumentException'的，原因是： '+ [DejalBezelActivityView callCancelAlert：]：无法识别的选择发送到类0x3184e4' ***第一掷调用堆栈：（0x327862a3 0x3a61f97f 0x32789ca3 0x32788531 0x326dff68 0x346790c5 0x34679077 0x34679055 0x3467890b 0x3467859b 0x345a1523 0x3458e801 0x3458e11b 0x362805a3 0x362801d3 0x3275b173 0x3275b117 0x32759f99 0x326ccebd 0x326ccd49 0x3627f2eb 0x345e2301 0x39445 0x3aa56b20) libc++abi.dylib: 终止调用抛出异常

应用程序崩溃。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:54:34.203

您的第一个方法是类方法（+）而不是实例方法（-），因此您处于 Class 上下文中。

当你写

```
[buttonCancel addTarget:self
                 action:@selector(callCancelAlert:)
       forControlEvents:UIControlEventTouchDown]; 
```

self 不是指向类实例（例如 create by 和 alloc & init 消息），而是指向类本身。

因为在相同的方法中你分配一个实例，`DejalActivityView`你应该这样做：

```
[buttonCancel addTarget:dejalActivityView
                 action:@selector(callCancelAlert:)
       forControlEvents:UIControlEventTouchDown]; 
```

# hadoop - Hadoop中多个reducer如何只输出一个part-file？

> ID：15346143
> 
> 赞同：4
> 
> 时间：2013-03-11T18:44:52.463
> 
> 标签：hadoop

在我的 map-reduce 作业中，我使用 4 个 reducer 来实现 reducer 作业。因此，通过这样做，最终输出将生成 4 个零件文件。：part-0000 part-0001 part-0002 part-0003

我的问题是如何将 hadoop 的配置设置为只输出一个部分文件，尽管 hadoop 使用 4 个 reducer 工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T18:52:32.057

这不是 hadoop 所期望的行为。但是你可以`MultipleOutputs`在这里发挥你的优势。创建一个命名输出并在所有 reducer 中使用它来在一个文件本身中获取最终输出。它的 javadoc 本身建议如下：

```
 JobConf conf = new JobConf();

 conf.setInputPath(inDir);
 FileOutputFormat.setOutputPath(conf, outDir);

 conf.setMapperClass(MOMap.class);
 conf.setReducerClass(MOReduce.class);
 ...

 // Defines additional single text based output 'text' for the job
 MultipleOutputs.addNamedOutput(conf, "text", TextOutputFormat.class,
 LongWritable.class, Text.class);;
 ...

 JobClient jc = new JobClient();
 RunningJob job = jc.submitJob(conf);

 ... 
```

作业配置使用模式是：

```
public class MOReduce implements
   Reducer<WritableComparable, Writable> {
 private MultipleOutputs mos;

 public void configure(JobConf conf) {
 ...
 mos = new MultipleOutputs(conf);
 }

 public void reduce(WritableComparable key, Iterator<Writable> values,
 OutputCollector output, Reporter reporter)
 throws IOException {
 ...
 mos.getCollector("text", reporter).collect(key, new Text("Hello"));
 ...
 }

 public void close() throws IOException {
 mos.close();
 ...
 }

 } 
```

如果您使用的是新`mapreduce`API，请参见[此处](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/lib/output/MultipleOutputs.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-11T07:25:48.370

```
MultipleOutputs.addNamedOutput(conf, "text", TextOutputFormat.class,
 LongWritable.class, Text.class); 
```

这`text`是名为的输出目录或单个大文件`text`？

# wpf - 在画布中包含窗口

> ID：15346144
> 
> 赞同：0
> 
> 时间：2013-03-11T18:44:58.050
> 
> 标签：wpf, xaml, canvas, window, bounding

我想知道是否有办法在画布内生成一个窗口，将其可移动边界设置在画布内。**我想出了如何在一个窗口中包含一个窗口**的可移动范围，但我无法为面板找出它。如果您可以将其用于解决方案，那么我也很乐意。

另外，有没有办法获取画布的左坐标和上坐标？

提前致谢！

# php - 如何以数组格式从表中获取唯一的行名？

> ID：15346147
> 
> 赞同：2
> 
> 时间：2013-03-11T18:45:14.823
> 
> 标签：php, arrays

我有一个名为 site 的表，它记录了一些站点的名称，现在该表可以有一百行称为 site.com 和/或 site.net、site.me....

现在我需要的是仅获取唯一名称，例如即使有 1000 行但仅存在 5 种类型的站点名称，我也需要获取这些站点名称。

到目前为止，我试过这个没有成功

```
<?php 
 //mysql goes here
$query = mysql_query(" SELECT * FROM SITES ");
while ($row = mysql_fetch_array($query)){
echo array_diff($row, NULL);
} ?> 
```

除了参数错误，什么都没有显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:47:37.500

使用不同的关键字。

```
SELECT DISTINCT name FROM SITES 
```

# linux - 菜单驱动的 Shell 脚本 bash

> ID：15346161
> 
> 赞同：1
> 
> 时间：2013-03-11T18:45:51.617
> 
> 标签：linux, bash, shell, menu

作为一个完整的新手，我正在尝试制作一个 Shell 脚本。这将由带有删除文件等选项的菜单驱动。例如，当菜单启动时，如何从按“1”到实际创建一个新文件（因为这是我的菜单上的选项 1）我明白这可能不是最简单的由于我对技术术语的使用有限，需要理解的问题是有限的，但我将不胜感激。下面是我的菜单第一部分的示例。我觉得一旦我知道从哪里开始我会没事的 `Menu`

```
[1] Create File
[2] Delete File
[3] Rename file 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T18:53:30.617

例如尝试这样做：

```
select x in "Create File" "Delete File" "Rename file"; do
    echo "$x choosen"
    break
done 
```

## 样本输出

```
1) Create File
2) Delete File
3) Rename file
> 
```

`select`在[此处](http://www.gnu.org/software/bash/manual/bashref.html#Conditional-Constructs)搜索*条件构造*段落

## 走得更远

要使用变量的结果运行某些特定任务`$x`，您可以使用如下`case`语句（如`switch`在其他语言中）：

```
case $x in
    Create*) touch file.txt ;;
    Delete*) rm -f file.txt ;;
    Rename*) mv file.txt file_old.txt ;;
esac 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:54:15.250

您可以使用 switch/case 语句来做到这一点。请查看 bash 手册或在 Web 上查找类似的示例。只需谷歌“switch case shell 示例”

祝你好运

# windows-8 - Windows 8 Socket 与后台任务通信

> ID：15346162
> 
> 赞同：1
> 
> 时间：2013-03-11T18:45:54.757
> 
> 标签：windows-8

我在 Windows 8 应用程序中有一个用 C# 编写的后台任务，我无法将它连接到我的 UI 任务。我尝试在我的后台任务上打开一个 StreamSocketListener 并在我的 UI 任务上打开一个 StreamSocket 来连接它，反之亦然。如果我在 UI 任务或后台任务中同时拥有侦听器和连接器，则一切正常。然而，他们两人之间似乎有某种隔离。

我也可以连接到它们两个上的外部服务，所以我认为这可能与需要环回豁免有关，但似乎也不是这样，因为打开 AppContainer Loopback Exemption Utility 显示所有应用程序具有环回访问权限。

我还需要启用其他功能以使我的应用程序的这两个部分之间的网络通信正常工作吗？我在我的包清单中启用了专用网络（客户端和服务器）功能，（其他客户端/服务器对没有帮助，所以我只是使用那个）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:58:41.493

您可以使用后台任务的完成事件并在 UI 中重复运行它。使用 LocalSettings 传递数据。

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977055.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977055.aspx)

```
private void OnCompleted(IBackgroundTaskRegistration task, BackgroundTaskCompletedEventArgs args)
{
    var settings = ApplicationData.Current.LocalSettings;
    var key = task.TaskId.ToString();
    var message = settings.Values[key].ToString();
    UpdateUIExampleMethod(message);
} 
```

# java - Intellij-IDEA：如何在我的剪贴板中放置方法的路径

> ID：15346165
> 
> 赞同：7
> 
> 时间：2013-03-11T18:45:59.493
> 
> 标签：java, intellij-idea

Intellij 有这个很酷的功能，如果您键入`ctrl+alt+c`，它会将光标所在文件的绝对路径复制到剪贴板。我想要类似的东西，但不是文件路径，而是我想要光标所在方法的路径。例如，看这个类：

```
package com.sandbox;

public class Sandbox {

    public void doSomething() {

    }
} 
```

如果我将光标放在 /in 上`doSomething()`，我想按下一些键盘命令，将“com.sandbox.Sandbox#doSomething()”放入我的剪贴板。如果我的光标在方法中，如果它可以将它放入我的剪贴板会更好：“com.sandbox.Sandbox#doSomething():line 45”作为我键入命令时光标所在的行。

这就是我想要这个的原因：我经常给其他开发人员写电子邮件/即时消息，并且需要告诉他们“看看这个”。获取方法名称非常容易，因为我通常已经在那里了。但是后来我需要向上滚动到类名来告诉他们类，我在方法上失去了我的位置。我在一天之内经常这样做，我认为我可以从自动化这个过程中获得一些好处。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T18:47:58.150

`CTRL`+ `ALT`+ `SHIFT`+`C`是“复制参考”，应该做你想做的事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:52:31.820

实际上“复制参考”非常接近：默认情况下`Ctrl+Alt+Shift-C`。请注意，`Ctrl-Shift-A`（查找操作）是您的朋友，也会向您显示上述链接。

但是，此方法不会添加行号。

# java - awt Robot.Keypress 在全屏游戏中不起作用

> ID：15346166
> 
> 赞同：2
> 
> 时间：2013-03-11T18:46:00.543
> 
> 标签：java, awt, keypress, awtrobot

`robot.keypress()`适用于记事本和浏览器，但不适用于全屏游戏。

为什么会这样？

代码：

```
robot.keyPress(java.awt.event.KeyEvent.VK_S); 
```

# javascript - Javascript 执行 & 需要 js

> ID：15346170
> 
> 赞同：0
> 
> 时间：2013-03-11T18:46:13.783
> 
> 标签：javascript, requirejs

几天来我一直在研究requirejs。我认为它是代码结构、模块等方面的好工具。我对生产环境中模块的性能和延迟加载更感兴趣。它可以缩小和合并 js 并按需加载模块。

我真的不明白 requirejs 是如何实现此功能的（在缩小和连接的文件中延迟加载模块）？如果有人能对此有所了解，我将不胜感激？

来自requirejs：

*优化器只会组合在传递给顶层 require 和 define 调用的字符串文字数组中指定的模块，或者在简化的 CommonJS 包装中组合 require('name') 字符串文字调用。因此，它不会找到通过变量名加载的模块：*

不知道上面的说法是什么意思？我们可以用 vanilla JS 实现这个延迟加载功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:58:50.547

它不会按需缩小和连接。您阅读的文档适用于 r.js - 可以在 nodejs 上运行的 require.js 优化器，可以最小化和连接您的代码，但不是“按需” - 您必须运行优化器来创建缩小和连接的文件和然后将它们放在您的实时站点上。

它不能在您的实时站点上获取未缩小的文件，并在用户请求它们时缩小它们。

# python - 构建路径 - Google Drive SDK

> ID：15346172
> 
> 赞同：2
> 
> 时间：2013-03-11T18:46:21.480
> 
> 标签：python, python-2.7, google-drive-api

我正在尝试使用 Python Google Drive API 为文件构建远程路径。给定一个路径，比如 /folderA/FolderB/folderC/theFile.txt 我想在驱动器上创建文件夹 A，然后在其中创建文件夹 B，然后在 B 中创建文件夹 C，然后再将文件上传到文件夹 C。

我有一个短循环：

```
currentParent = pathStartID
for aFolder in pathArray:
    thisFoldersID = self.createRemoteFolder(aFolder, parentID = currentParent)
    currentParent = thisFoldersID 
```

我首先在驱动器根目录中创建文件夹 A，文件夹 A 的 ID 是“pathStartID”。pathArray 包含文件夹 B 和文件夹 C 的名称。

```
createRemoteFolder() 
```

看起来像这样：

```
def createRemoteFolder(self, folderName, parentID = None):
    # Create a folder on Drive, returns the newely created folders ID
    body = {
        'title': folderName,
        'mimeType': "application/vnd.google-apps.folder"
    }
    if parentID:
        body['parentsCollection'] = [{'id': parentID}]
        root_folder = driveFileMan.client.files().insert(body = body).execute()
    return root_folder['id'] 
```

但由于某种原因，每个文件夹都是在 Google Drive 的根目录中创建的，而不是像我想要的那样在父文件夹中创建。

谁能发现我做错了什么？或者有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:07:46.053

看起来只是设置父级的错误属性名称。尝试：

```
body['parents'] = [{'id': parentID}] 
```

# php - 正则表达式：如何匹配数字？

> ID：15346178
> 
> 赞同：0
> 
> 时间：2013-03-11T18:46:36.787
> 
> 标签：php, regex, regex-lookarounds

我想使用正则表达式来匹配这样的数字：

```
58158
60360
98198 
```

那是格式`ABCAB`。

我使用下面的代码来匹配`ABAB`：

```
(([\d]){1,}([\d]){1,})\1{1,} 
```

例如`5858`但是如何匹配ABCAB（58158）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:47:30.607

对于格式中的数字`ABCAB`：

```
(\d)(\d)\d\1\2 
```

这对 没有任何限制`A=B=C`。对使用[负前瞻](http://www.regular-expressions.info/lookaround.html)`A!=B!=C`：

```
(\d)(?!\1)(\d)(?!\1|\2)\d\1\2 
```

**编辑：**

没有边界匹配，因此`58158`将匹配`36958158`：

```
$num=36958158;
preg_match('/(\d)(?!\1)(\d)(?!\1|\2)\d\1\2/',$num,$match);
echo ">>> ".$match[0];

>>> 58158 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:48:47.967

要匹配 ABCAB 形式的整数，请使用`\b(\d\d)\d(\1)\b`.

`\b`是单词边界并`\1`引用第一组。

示例（在 JavaScript 中，以便可以在浏览器中进行测试，但它适用于大多数正则表达式解决方案）：

```
var matches = '58158 22223 60360 98198 12345'.match(/\b(\d\d)\d(\1)\b/g); 
```

给

```
["58158", "60360", "98198"] 
```

# database - 将数据插入 oleDb 表

> ID：15346188
> 
> 赞同：0
> 
> 时间：2013-03-11T18:46:56.413
> 
> 标签：database, vb.net, oledb

我正在开发我的第一个数据库程序，但无法在 access 数据库中更新数据。这是winform上“添加条件”按钮的代码。

```
 Dim TaxConnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & ConfigurationManager.AppSettings("Database")
    Dim dbConnection As OleDbConnection = New OleDbConnection(TaxConnStr)
    Dim dt As New DataTable
    Dim da As New OleDbDataAdapter

    Try
        dbConnection.Open()

        Dim cmd As New OleDbCommand
        cmd.CommandText = "INSERT INTO UserCriteria ( UserName, State, County, Type, Amount, Rank) VALUES ( @UserName, @State, @County, @Type, @Amount, @Rank)"
        Me.DataGridView1.DataSource = dt
        cmd.ExecuteNonQuery()

        dt.Columns.Add("UserName")
        dt.Columns.Add("State")
        dt.Columns.Add("County")
        dt.Columns.Add("Type")
        dt.Columns.Add("Amount")
        dt.Columns.Add("Rank")
        dt.Rows.Add(New String() {
                                            boxAssignTo.Text, _
                                            boxState.Text, _
                                            boxCounty.Text, _
                                            boxAmount.Text, _
                                            boxType.Text, _
                                            boxRank.Text})

    Catch ex As Exception
    Finally
        dbConnection.Close()
    End Try 
```

我知道我错过了什么或做错了，所以我请求你大师的指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:54:19.177

您的代码中有一些非常错误的地方。

试试这个

```
Dim TaxConnStr As String = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" & _
                            ConfigurationManager.AppSettings("Database")
Using dbConnection = New OleDbConnection(TaxConnStr)
    Dim dt As New DataTable
    Dim da As New OleDbDataAdapter
    Try
        dbConnection.Open()
        Dim cmd As New OleDbCommand
        cmd.CommandText = "INSERT INTO UserCriteria ( UserName, State, County, " & _
                          "Type, Amount, Rank) VALUES " & _
                          "(@UserName, @State, @County, @Type, @Amount, @Rank)"
       cmd.Parameters.AddWithValue("@UserName", boxAssignTo.Text)
       cmd.Parameters.AddWithValue("@State", boxState.Text)
       cmd.Parameters.AddWithValue("@County", boxCounty.Text)
       cmd.Parameters.AddWithValue("@Type", boxType.Text)
       cmd.Parameters.AddWithValue("@Amount", boxAmount.Text)
       cmd.Parameters.AddWithValue("@Rank", boxRank.Text)
       cmd.ExecuteNonQuery()
   Catch ex As Exception
   Finally
       dbConnection.Close()
   End Try
End Using 
```

如您所见，要在数据库表中添加记录，您可以使用带有命令文本的 OleDbCommand 并将其参数设置为数据库表中预期的值。
您的列的数据类型也存在问题。从您的示例中无法推断数据类型，但类型、排名和金额可能是数字列，因此您需要将文本框值转换为适当的数字（Convert.ToInt32(textbox.text)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:53:56.603

看起来您在那里组合了两个概念/对象。您可以仅使用 OleDbCommand 插入记录：

```
Dim cmd As New OleDbCommand
cmd.CommandText = "INSERT INTO UserCriteria ( UserName, State, County, Type, Amount, Rank) VALUES ( @UserName, @State, @County, @Type, @Amount, @Rank)"
cmd.Parameters.Add(new OleDbParameter("@UserName", DbType.String))
cmd.Parameters.Add(new OleDbParameter("@State", DbType.String))
cmd.Parameters.Add(new OleDbParameter("@County", DbType.String))
cmd.Parameters.Add(new OleDbParameter("@Type", DbType.String))       ' DbType depends on column type in database
cmd.Parameters.Add(new OleDbParameter("@Amount", DbType.Integer))    ' DbType depends on column type in database
cmd.Parameters.Add(new OleDbParameter("@Rank", DbType.Integer))      ' DbType depends on column type in database

cmd.Prepare();   

cmd.Parameters("@UserName").Value = boxAssignTo.Text
cmd.Parameters("@State").Value = boxState.Text
cmd.Parameters("@County").Value = boxCounty.Text
cmd.Parameters("@Type").Value = boxType.Text
cmd.Parameters("@Amount").Value = boxAmount.Text
cmd.Parameters("@Rank").Value = boxRank.Text

cmd.ExecuteNonQuery() 
```

# javascript - jQuery imgAreaSelect 设置具有纵横比的初始选择

> ID：15346192
> 
> 赞同：1
> 
> 时间：2013-03-11T18:47:05.677
> 
> 标签：javascript, jquery

我正在使用 jQuery 和 imgAreaSelect 插件。我正在使用区域选择插件，以便用户可以在上传之前将其图像裁剪为 16:9 的纵横比。

我想显示一个初始裁剪选择，这样当他们选择文件时，会加载一个缩略图，并使用 imgAreaSelect 选择最大可能的 16:9 选择。我有缩略图加载等，但无法获得纵横比部分。这是我到目前为止所拥有的：

```
 // adds an image area select instance
    function addImgAreaSelect( img ){
            img.addClass( 'imgAreaSelect' ).imgAreaSelect({
                    handles : true,
                    aspectRatio : '16:9',
                    fadeSpeed : 1,
                    show : true
            });
            img.load(function(){ // set initial crop at 16:9 aspect ratio, calculate coordinates
                    // @todo
                    $( this ).imgAreaSelect({ x1 : 0, y1 : 0, x2 : this.width, y2 : this.height });

   });
} 
```

对此的任何帮助表示赞赏！谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T23:17:58.083

这对我有用：

```
// adds an image area select instance
function addImgAreaSelect( img ){
        img.addClass( 'imgAreaSelect' ).imgAreaSelect({
                handles : true,
                aspectRatio : '16:9',
                fadeSpeed : 1,
                show : true
        });
        img.load(function(){ // display initial image selection 16:9
                    var height = ( this.width / 16 ) * 9;
                    if( height <= this.height ){     
                            var diff = ( this.height - height ) / 2;
                            var coords = { x1 : 0, y1 : diff, x2 : this.width, y2 : height + diff };
                    }   
                    else{ // if new height out of bounds, scale width instead
                            var width = ( this.height / 9 ) * 16; 
                            var diff = ( this.width - width ) / 2;
                            var coords = { x1 : diff, y1 : 0, x2 : width + diff, y2: this.height };
                    }   
                $( this ).imgAreaSelect( coords );
        });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-03T08:22:37.887

只需通过添加以下代码来调用初始作物选择

```
$('#thumbnail').imgAreaSelect({  x1 : 0, y1 : 0, x2 : 180, y2: 180, aspectRatio: '1:1', handles: true  , onSelectChange: preview }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-12T11:27:28.327

```
function addImgAreaSelect( img ){
        img.addClass( 'imgAreaSelect' ).imgAreaSelect({
                handles : true,
                aspectRatio : '16:9',
                fadeSpeed : 1,
                show : true
        });
        img.load(function(){
                var ratio = 19/9;
                var originalH = originalImg.height;
                var originalW = originalImg.width;
                var size =  Math.min(thumb.width()/ratio, thumb.height());
                var xBiggerThanY = thumb.width()/ratio > thumb.height();
                var fullSize = Math.max(thumb.width()/ratio, thumb.height());
                var sizeX1 = xBiggerThanY ? (fullSize - size) * ratio / 2 : 0;
                var sizeX2 = xBiggerThanY ? size*ratio-1 + (fullSize - size) * ratio / 2 : size*ratio-1;
                var sizeY1 = xBiggerThanY ? 0 : (fullSize - size) / 2;
                var sizeY2 = xBiggerThanY ? size - 1 : size - 1 + (fullSize - size) / 2;

                var initSelection = {x1: sizeX1, y1: sizeY1, x2: sizeX2, y2: sizeY2};
                $( this ).imgAreaSelect( initSelection );
        });
}
```

# html - 边距不占用较小的屏幕

> ID：15346195
> 
> 赞同：0
> 
> 时间：2013-03-11T18:47:14.940
> 
> 标签：html, css, media-queries

我正在尝试为 iphone 屏幕的文本字段提供边距......但我无法做到......我通过创建一个 id 来提供媒体查询......它采用边框颜色但是它不是在谈论边距属性......在下面提供我的代码......当你缩小浏览器窗口时，你可以找到它......

[http://jsfiddle.net/rajkumart08/U4ygP/1/](http://jsfiddle.net/rajkumart08/U4ygP/1/)我已经整理了代码......并且代码在第 4507 行中找到

```
@media(max-width:768px)
{
.page-content
{
    background:transparent
}
.page-content .page
{
    margin-top:40px
}

#nameForm{ border: 1px solid red;  margin-right: 12px; width: 354px;}
#inquiryForm{ border: 1px solid red; margin-right: 12px;  width: 354px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T22:49:11.083

看起来您的媒体查询需要调整：

```
@media only screen and (max-device-width: 480px) {

    } 
```

我添加了

```
#nameForm {
        -moz-box-sizing: border-box;
        margin-left: 12px;
        min-height: 30px;
        width: 364px;
        border: 1px solid red;
    }
    #inquiryForm {
        border: 1px solid red;
        margin-right: 12px;
        width: 364px;
        -moz-box-sizing: border-box;
        margin-left: 12px;
    } 
```

# java - 如何在 Android 应用程序中播放和停止 mp3 文件

> ID：15346199
> 
> 赞同：3
> 
> 时间：2013-03-11T18:47:28.623
> 
> 标签：java, android, eclipse, audio

我在 Eclipse 中创建了一个应用程序来播放和停止 mp3 文件。一切都很好，除了当我播放音频文件并停止它并且我想重播它时，播放 btn 不起作用！我想知道是否有人可以帮助我？提前致谢。代码如下：

```
package ir.polyglotcenter.childrenmostfrequentwords;

import android.app.Activity;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class Main extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //Related to the media player
    final MediaPlayer myMediaPlayer = MediaPlayer.create(Main.this, R.raw.audio);
    //Button related to play btn
    Button myButtonOne = (Button) findViewById(R.id.btn_audio);
    myButtonOne.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            myMediaPlayer.start();

        }
    });

    //Button related to stop btn
    Button myButtonTwo = (Button) findViewById(R.id.btn_stop);
    myButtonTwo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            myMediaPlayer.stop();

        }
    });

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:06:39.133

如果您想在 Button Click 上开始/停止声音，然后使用`MediaPlayer.start()`和`MediaPlayer.pause()`暂停当前播放的声音，该声音在开始按钮 click 上再次开始。并覆盖 Activity`onPause`以最终停止并释放 MediaPlayer。将您的代码更改为：

onStop 按钮单击：

```
myButtonTwo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            myMediaPlayer.pause();  //>>pause current sound
            myMediaPlayer.seekTo(0); //>> seek to start it again 

        }
    }); 
```

并覆盖 Activity 的 onPause 方法：

```
 @Override
   protected void onPause{
      super.onPause();
       myMediaPlayer.stop();  //>>> stop myMediaPlayer
       myMediaPlayer.release(); //>>> free myMediaPlayer
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:02:56.670

试试这个（只需在公共区域定义媒体播放器）

```
 public class Main extends Activity {

MediaPlayer myMediaPlayer = null;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    //Related to the media player

    myMediaPlayer = MediaPlayer.create(Main.this, R.raw.audio);

    //Button related to play btn
    Button myButtonOne = (Button) findViewById(R.id.btn_audio);
    myButtonOne.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            myMediaPlayer.start();

        }
    });

    //Button related to stop btn
    Button myButtonTwo = (Button) findViewById(R.id.btn_stop);
    myButtonTwo.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            myMediaPlayer.pause();

        }
    });

}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-11T12:02:59.973

您必须移动此代码：

```
final MediaPlayer myMediaPlayer = MediaPlayer.create(Main.this, R.raw.audio); 
```

在 ：

```
myButtonOne.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        final MediaPlayer myMediaPlayer = MediaPlayer.create(Main.this,R.raw.audio);
        myMediaPlayer.start();

    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-04T11:59:59.613

要点是在 if 或任何循环的循环中实现 MediaPlayer

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()){
    case R.id.buttonPlay:
        //mp.reset();
        mp=MediaPlayer.create(Ur Context.this, R.raw."ursong.mp3");
        mp.start();

        break;
    case R.id.buttonStop:
        mp.stop();

        break;
    }
} 
```

# android - SDK升级后Android模拟器运行缓慢且故障

> ID：15346201
> 
> 赞同：1
> 
> 时间：2013-03-11T18:47:35.130
> 
> 标签：android, android-emulator, android-launcher

最近从 API 16 升级到 17。一直保留之前添加的所有 AVD，升级后它们也可以正常工作。但是今天我删除了所有旧的 AVD 并添加了一些新的，每个都有可用的设备规格。早些时候，最新版本 (4.1.2) 的 AVD 的启动时间约为 5 分钟，而 2.3.3 的 AVD 的启动时间约为 2 分钟。但是现在，4.1.2 或 4.2.2 的 AVD 需要 10 到 15 分钟才能启动。此外，它无法加载启动器。当我触摸主屏幕上的启动器按钮时，它会加载应用程序列表并在其上方显示使用提示“要将应用程序添加到主屏幕，请触摸并按住它”。到目前为止预期。但是在此提示中点击“确定”会导致“不幸的是，Launcher 已停止”错误。不触摸任何东西会让我回到主屏幕。

尝试取消选中 AVD 选项、“存在硬件键盘”和“显示带有硬件控件的皮肤”。问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T18:00:22.340

这是一个内存问题。修复了将 VM 堆的默认值增加 16 倍的问题。（16 到 32 和 32 到 48）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T20:45:27.750

我知道这应该更像是一个评论而不是一个答案，但我对 StackOverflow 太陌生了。希望有一个模组能传递这个答案。

您使用的是英特尔映像吗？因为那些 ARM 映像真的很慢。当您想使用 Intel 映像时，您还应该安装 HAXM ( [https://stackoverflow.com/a/10772162/1741111](https://stackoverflow.com/a/10772162/1741111) )。请务必选择正确的设置。768 RAM 是 Windows 上的最大值。

这些是我的设置：

![在此处输入图像描述](../Images/f30edb78ec2bcd1cc140375ebeca37ba.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T07:44:28.593

是的，我最新的适用于 Android 4.4 的 SDK 也存在同样的问题。我正在从 AVD（Android 虚拟设备）管理器运行“ARMeabi-v7a”。

每次我启动模拟器时，一旦您选择应用程序屏幕并尝试启动应用程序，它就会崩溃。模拟的应用程序启动器会崩溃

> 不幸的是，启动器已停止。

真的很痛苦..我在 API 级别 19 运行，所以可能是由于内部程序膨胀...

一旦我将 VM 堆内存从 16 提高到 48，我注意到一个特殊的帮助程序正在运行，一个大的手轮廓指向“下载”应用程序，并解释你可以按住任何应用程序将其移动到主屏幕。

我在 WIN-XP（32 位）旧的双核 Centrino Toshiba Satellite Pro 上运行，所以可能在较新的 64 位机器上，错误不会出现。但是，谢谢，拉吉什。

我刚刚使用 AVD Manager 编辑了 ARMeabi-v7a 模拟目标设备的参数屏幕，现在模拟器成功启动，我可以看到（并运行）我的第一个“Hello World”应用程序，它是用 Eclipse ADT 构建的。- 马克_L

# php - PHP 包含和元标记

> ID：15346204
> 
> 赞同：-1
> 
> 时间：2013-03-11T18:47:45.483
> 
> 标签：php, meta

我知道在 php 中，您必须先定义一个变量，然后才能在 echo 语句中使用该值。有没有解决的办法？我正在为网站标题使用包含文件，但我希望能够在各个页面上定义元标记。我不是超级精通php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:52:11.517

我认为这就是你想要做的是：

page1.php，您在此处设置变量并包含您的标题：

```
<?php
    $myvar = "foo";
    include "header.php";
?> 
```

header.php，你把它们回显出来：

```
<?php
    echo $myvar;
?> 
```

# javascript - 仅使用文件：// uri 协议页面为手机构建 html5 javascript

> ID：15346212
> 
> 赞同：0
> 
> 时间：2013-03-11T18:48:10.303
> 
> 标签：javascript, html, file-uri

我不知道我是否正确地用谷歌搜索了它，但我找不到我的问题的答案。

我想知道是否可以在**不使用**sencha touch 或 phonegap 之类的“本机编译器/构建器”的情况下使用 javascript（可能是用于 UI 的 jquery mobile）和 css 编写 html5 并在本地存储页面（使用**file://**协议）。

**例如：**假设我想构建一个简单的 HTML5 计算器。我不想要任何服务器端处理，我只想要一些 html 按钮来调用 javascript 函数来执行仅客户端操作。如果我制作这样的页面，我们称之为***calc.html***并将其下载到手机（通过 usb/http 下载），我可以用内部浏览器打开这个***calc.html***并使用计算器吗？或者我是否必须将此 calc.html 编译/构建为 Webview（适用于 Android）或类似的东西才能完成？这适用于 Android、iPhone、Windows Phone 和其他具有 localStorage/sessionStorage 的设备吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:54:44.510

您需要一个*离线 Web 应用程序*。

这篇文章似乎逐步解释了如何做到这一点。

[http://diveintohtml5.info/offline.html](http://diveintohtml5.info/offline.html)

像这样创建一个网站，您可以将其添加为书签，并在手机的仪表板中有一个快捷方式图标，允许您在没有数据连接的情况下在浏览器中加载您的页面。在手机有数据连接的情况下，它将加载清单以检查是否有任何新文件来更新应用程序。我不认为有办法让它真正离线。

# ruby-on-rails - Rails - 超类不匹配

> ID：15346213
> 
> 赞同：5
> 
> 时间：2013-03-11T18:48:17.863
> 
> 标签：ruby-on-rails, ruby, inheritance, model, routes

使用 Rails 和控制器继承。

我创建了一个名为 的控制器，其中放置了一个名为`AdminController`的子类`admin_user_controller``/app/controllers/admin/admin_user_controller.rb`

这是我的路线.rb

```
 namespace :admin do
    resources :admin_user # Have the admin manage them here.
  end 
```

应用程序/控制器/管理员/admin_user_controller.rb

```
class AdminUserController < AdminController
  def index
    @users = User.all
  end
end 
```

应用程序/控制器/admin_controller.rb

```
class AdminController < ApplicationController

end 
```

我有一个用户模型，我想用管理员权限进行编辑。

当我尝试连接到：`http://localhost:3000/admin/admin_user/`

我收到此错误：

```
superclass mismatch for class AdminUserController 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T18:51:51.610

如果您使用不同的超类定义了两次相同的类，则会出现此错误。也许尝试`class AdminUserController`在你的代码中进行 grepping，这样你就确定你没有定义它两次。可能与 Rails 生成的文件存在冲突。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-20T18:34:44.240

要完成@Intrepidd 所说的，您可以将您的类包装在一个模块中，这样`AdminUserController`该类就不会从 继承两次`ApplicationController`，因此一个简单的解决方法是：

```
module Admin
  class AdminUserController < AdminController
    def index
      @users = User.all
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-21T04:07:04.670

我通过创建一个“仪表板”控制器和一个“索引”定义来修复它。然后我编辑了我的 routes.rb ：

```
Rails.application.routes.draw do

namespace :admin do
    get '', to: 'dashboard#index', as: '/'

    resources :posts
end

end 
```

# algorithm - 最小化一个点到一组点的最大曼哈顿距离

> ID：15346216
> 
> 赞同：14
> 
> 时间：2013-03-11T18:48:22.413
> 
> 标签：algorithm, math, geometry, mathematical-optimization

对于 2D 中的 3 个点：

```
P1(x1,y1), 
P2(x2,y2), 
P3(x3,y3) 
```

我需要找到一个点`P(x,y)`，使得曼哈顿距离的最大值

```
max(dist(P,P1), 
    dist(P,P2), 
    dist(P,P3)) 
```

将是最小的。

关于算法的任何想法？

我真的更喜欢精确的算法。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-11T20:23:17.817

这个问题有一个精确的、非迭代的算法；正如 Knoothe 所指出的，[曼哈顿距离在旋转上等价于 Chebyshev 距离](http://en.wikipedia.org/wiki/Taxicab_geometry)，并且对于 Chebyshev 距离，P 可以简单地计算为极端坐标的平均值。

在曼哈顿距离 x 内从 P 可到达的点形成围绕 P 的菱形。因此，我们需要找到包围所有点的最小菱形，其中心将为 P。

如果我们将坐标系旋转 45 度，菱形就是正方形。因此，问题可以简化为找到点的最小封闭正方形。

可以找到最小封闭正方形的中心作为最小封闭矩形的中心（通常计算为坐标的最大值和最小值）。有无数个最小的封闭正方形，因为您可以沿着最小矩形的较短边缘移动中心，并且仍然有一个最小的封闭正方形。出于我们的目的，我们可以简单地使用中心与封闭矩形重合的那个。

因此，以算法形式：

1.  通过指定 x' = x/sqrt(2) - y/sqrt(2), y' = x/sqrt(2) + y/sqrt(2) 来旋转和缩放坐标系
2.  计算 x'_c = (max(x'_i) + min(x'_i))/2, y'_c = (max(y'_i) + min(y'_i))/2
3.  旋转回来 x_c = x'_c/sqrt(2) + y'_c/sqrt(2), y_c = - x'_c/sqrt(2) + y'_c/sqrt(2)

然后 x_c 和 y_c 给出 P 的坐标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T19:46:39.263

如果一个近似的解决方案是好的，你可以尝试一个简单的优化算法。这是一个例子，在 Python 中

```
import random
def opt(*points):
    best, dist = (0, 0), 99999999
    for i in range(10000):
        new = best[0] + random.gauss(0, .5), best[1] + random.gauss(0, .5)
        dist_new = max(abs(new[0] - qx) + abs(new[1] - qy) for qx, qy in points)
        if dist_new < dist:
            best, dist = new, dist_new
            print new, dist_new
    return best, dist 
```

解释：我们从点 (0, 0) 或任何其他随机点开始，并对其进行数千次修改，每次都保持新的和以前最好的点中的更好。逐渐地，这将接近最佳值。

**请注意**，在最小化*最大*曼哈顿距离时，简单地选择三个点的平均值或中位数，或独立求解 x 和 y 不起作用*。*反例：考虑点 (0,0)、(0,20) 和 (10,10)，或 (0,0)、(0,1) 和 (0,100)。如果我们选择最分离点的平均值，则第一个示例将产生 (10,5)，如果我们取中位数，则第二个示例将产生 (0,1)，两者都具有更高的曼哈顿*最大值*距离比最优。

 ****更新：**看起来像独立求解 x 和 y 并取最远点的平均值实际上*确实有效，前提是要进行一些预处理和后处理，正如*[thiton](https://stackoverflow.com/a/15347888/1639625)所指出的那样。**

# css - Firefox Div 差距问题

> ID：15346218
> 
> 赞同：-1
> 
> 时间：2013-03-11T18:48:28.433
> 
> 标签：css, firefox, layout

我有一个烦人的问题，它在 chrome 中运行良好，但在 Firefox 中，两个 div 之间无缘无故地存在差距。

```
<div class="body-right">     
  <!-- VERTICAL GAP IS HERE -->
  <div class="body-right-container">
  <div class="body-right-pad"> 
</div>
</div> 
```

铬： http: [//gyazo.com/d5464f5fe791c3958d28816dfd03803c](http://gyazo.com/d5464f5fe791c3958d28816dfd03803c)

火狐： http: [//gyazo.com/f5f25eeab19622a2696e2d2510e1ea07](http://gyazo.com/f5f25eeab19622a2696e2d2510e1ea07)

我的 CSS 中没有任何内容会导致这种差距。有任何想法吗？

```
.body-right {
    float: left;
    width: 767px;       
    background-color:#ebebeb;
    border-left: #c7c7c7 1px solid;
    padding-left: 1px;
    min-height: inherit;
}

.body-right-container {
display:block;
    background-color:#ebebeb;
    position: relative;
    padding: 0 0 49px 49px;
    min-height: inherit;
}

.body-right-pad {
    width: 300%;
    background-color:#ebebeb;
    position: absolute;
    left: 765px;
    height: 100%;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:02:04.677

我在最右边看到一个大的灰色矩形，该元素可能是造成“差距”的元素。我在 Firefox 屏幕截图上看到了它，但在 Chrome 中没有。

您应该调查该元素并了解它为何出现在 Firefox 中。这可能是由于`width:100%`应用于包含该灰色矩形的容器。

# sharepoint - CRM 2011 和 SharePoint 集成权限

> ID：15346219
> 
> 赞同：1
> 
> 时间：2013-03-11T18:48:31.413
> 
> 标签：sharepoint, sharepoint-2010, dynamics-crm-2011, dynamics-crm, dms

我目前正在开发基于 crm sharepoint 集成的文档管理。这确实是利用 crm 2011 中的 sharepoint 文档功能的好方法。但是！：我看到这种尝试有一个巨大的缺点，因为 sharepoint 安全模型与 crm 安全模型不同。这样，即使用户没有访问帐户实体的权限，例如，他也可以访问 sharepoint 站点并查看该实体的文档，因为他获得了对自己帐户实体的列表的权限.

为什么没有关于这个重大安全问题的线索？是否有一个简单的解决方案来解决这个问题？

我希望有人能够帮助我。

最好的问候，格里特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-06T11:11:51.830

[Connection Software 公司 ( http://connecting-software.com/index.php/en/solutions/products/cb-dynamics-crm-privileges-to-](http://connecting-software.com/index.php/en/solutions/products/cb-dynamics-crm-privileges-to-sharepoint-permissions-replicator) )有一个**商业**开箱即用的解决方案解决了这个问题[共享点权限复制器](http://connecting-software.com/index.php/en/solutions/products/cb-dynamics-crm-privileges-to-sharepoint-permissions-replicator)）。

基本上，他们将微型插件部署到 CRM 中，该插件收集所有可能需要更改权限的事件。有一个额外的服务正在处理这些事件并将文件夹级权限相应地写入 SharePoint。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:27:49.783

呃。共享点。

在我看来，没有简单的方法可以解决这个问题，而且它的集成方式还存在其他问题。

我在一个项目中讨论了围绕这个问题的选项，但在我们得出结论之前就被转移了。

我的建议是使用 Sharepoint Security API 根据 CRM 中的角色/事件分配对 SP 的权限。所有用户在 SP 中都没有权限。

例如

> 用户在 CRM 中被分配为所有者 - 使用插件调用 SP API 以授予对该特定文件夹的权限。以前的所有者已删除权限。
> 
> 机会被创造。使用 SP 安全 API 向 Opportunity 的所有者授予与机会关联的文件夹的权限。

等等等等等等。

它不太漂亮，根据要求可能会变得特别痛苦，维护和测试，但我没有看到很多其他选择。

但是 SP 集成有很多问题 我想我很幸运能转移到另一个项目！

# c# - 在 Asp.Net MVC 中的项目之间共享声明性 html 助手

> ID：15346222
> 
> 赞同：5
> 
> 时间：2013-03-11T18:48:44.530
> 
> 标签：c#, asp.net-mvc, html-helper

是否可以将声明性 html 帮助程序放在与应用程序 Web 项目不同的程序集中？

目前，我知道我可以放置声明性 html 帮助程序的唯一地方是我的应用程序 Web 项目的文件夹“App_Code”。

经过几个月的开发，我现在有很多这些声明性的 html 帮助程序，我必须在所有项目中共享它的唯一一个解决方案是使用非常糟糕的[“复制粘贴驱动开发”](http://ryanrinaldi.com/blog/programming-by-coincidence/)实践。

还有其他方法吗？

附言

只是不要被什么是声明性 html 帮助器的定义所混淆，这里有一个代码示例，与扩展 System.Web.Mvc.Html 类型的 c# 扩展相比有所不同：

```
@using Microsoft.Web.Mvc.Html

@helper YesNoRadioButton(System.Web.Mvc.HtmlHelper html, string name, bool value, bool disable = false)
{
   @html.RadioButton(name, true, value, id: name.Replace(".", "_") + "_Yes", disabled: disable) @:Oui 
   @html.RadioButton(name, false, !value, id: name.Replace(".", "_") + "_No", disabled: disable) @:Non   
}

@helper YesNoRadioButton(System.Web.Mvc.HtmlHelper html, string name, bool? value, bool disable = false)
{
   @html.RadioButton(name, true, value.HasValue && value.Value, id: name.Replace(".", "_") + "_Yes", disabled: disable) @:Oui 
   @html.RadioButton(name, false, value.HasValue && !value.Value, id: name.Replace(".", "_") + "_No", disabled: disable) @:Non   
} 
```

![在此处输入图像描述](../Images/7ffb943a6f37fcecd9c4800efd1da1e2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:51:41.413

制作这些助手的类库，然后在项目之间共享。如果您将助手放在自定义创建的文件夹中会更好`Helpers`。这就是我所做的。

您可以参考这个答案：[我应该将我的实用程序类放在 ASP.NET MVC3 应用程序中的哪个位置？](https://stackoverflow.com/questions/9230139/where-shall-i-put-my-utilities-classes-in-a-asp-net-mvc3-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-18T23:23:50.377

是的，这是可能的，我所要做的就是将其放在`@using`剃须刀页面的顶部，以引用具有 Helper 功能的其他程序集。

或者，如果您不想将其添加到`using`大量文件的顶部，您可以添加对存在于 Views 文件夹下的 Web.config 文件的引用。您可能必须关闭并重新打开剃刀页面以帮助 Visual Studio 确认新的程序集引用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T20:51:31.297

我写了一篇文章，带您完成制作 HTML 帮助程序库所需的步骤。最后有一个完整的项目示例，您可以从 GitHub 下载。

[https://www.simple-talk.com/dotnet/asp.net/writing-custom-html-helpers-for-asp.net-mvc/](https://www.simple-talk.com/dotnet/asp.net/writing-custom-html-helpers-for-asp.net-mvc/)

# java - 我将如何将 MongoDb 集合附加到 Java 视图

> ID：15346223
> 
> 赞同：0
> 
> 时间：2013-03-11T18:48:47.233
> 
> 标签：java, swing, mongodb, field, morphia

我将如何将`collection`MongoDb 日志记录附加`Document`到一个`JTable`或`JList`什至一个`JTextPane`. `Document`中的所有状态`Collection`必须按插入排序实时显示`Date`。当`Documents`插入新的视图时，视图必须反映这一点。

这当然可以通过编写代码来完成。我寻找的是一些现有的技术

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:23:53.047

java显示应该很容易。只需为您的 JTable 实现一个表模型，该模型显示 MongoDB 返回的 DBObject 中的字段。然后在有新数据可用时触发重绘。

为什么要使用文本窗格？

# php - 如何在不丢失数据的情况下系统地合并数组？

> ID：15346225
> 
> 赞同：0
> 
> 时间：2013-03-11T18:48:49.870
> 
> 标签：php, arrays

所以我正在尝试编写一个方法，将所有数组与某个键值合并，但我遇到的问题是，当我尝试取消设置数组时，不会出现重复的结果，它会跳过几个事情，这让我很困惑。所以任何关于我如何改进这种方法的建议都将不胜感激。我的另一个问题..有没有办法检查这些数组中的每一个是否都有我正在寻找的所有 4 个键。

'发布日期' => '电子表格和传单月份' => '每月更新中的广告' => '目录中的功能' =>

所以我正在做的是在数据库中合并具有相同 id 的数组，所以我不必做一些非常讨厌的 SQL 查询，但我想知道是否有一种方法可以确保所有 4 个键将在每个结果中......如果有一个与一个或多个相关联的值......我的方法会将值添加到它的键中，如果没有与键关联的值，它只会生成一个空字符串。

```
protected function array_with_same_val($array, $key) {

    for($i = 0; $i < count($array); $i++) {
        for($j = 1; $j < count($array); $j++) {
            if(isset($array[$j]) && isset($array[$i]) && $array[$i][$key]==$array[$j][$key]) {
                $temp = array_merge($array[$i], $array[$j]);
                $array[$i] = $temp; 
                //unset($array[$j]);    
            } 
        }
    }   

    return $array;
} 
```

这是我的数组的一个示例（会有更多的值，这只是为了提供一个想法）：

```
 '0' => array
    (
        'Release Date' => 'September 1, 2013',
        'cp_id' => '112960' 
    ),

    '1' => array
    (
         'Spreadsheet and Flyer Month' => 'September 1, 2013',
         'cp_id' => '112960' 
    ),

    '2' => array
    (
         'Advertise in Monthly Update' => 'September 1, 2013',
         'cp_id' => '112960' 
    ),

    '3' => array
    (
       'Release Date' => 'September 1, 2013',
         'cp_id' =>  '109141' 
    ),
    ); 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:27:56.780

试试这个（$input 是您在上面提供的数组）...

```
$output = array();
$requiredKeys = array('Release Date' => '', 'Spreadsheet and Flyer Month' => '', 'Advertise in Monthly Update' => '', 'Feature in Catalog' => '');

foreach ($input as $item) {
    if (array_key_exists($item['cp_id'], $output)) {
        $output[$item['cp_id']] = array_merge($output[$item['cp_id']], $item);
    } else {
        $output[$item['cp_id']] = array_merge($requiredKeys, $item);
    }
}

$output = array_values($output); 
```

底部的 array_values 调用只是从数组中删除字符串键。

# c++ - A类中的函数指针指向B类的成员函数

> ID：15346226
> 
> 赞同：1
> 
> 时间：2013-03-11T18:48:53.207
> 
> 标签：c++, pointers, function-pointers

我正在为此寻找解决方案几天。没有找到任何相关的问题足以令人遗憾地回答，所以这是我的问题。考虑下一个代码：

```
// dummy class A
class A {
public:
    void aFunction() { // <- this is the function I want to point at
        cout << "aFunction() is called\n";
    }
};

class B {
public:
    template <class Class> // get a function pointer
    void setFunction( void (Class::*func)() ) {
        p_func = func;
    }
    void (*p_func)(); // the function pointer
}

int main() {
    B obj;
    objb.setFunction(&A::aFunction);
    return 0;
} 
```

我有一个编译`setFunction()`错误`p_func = func;`：

> 无法从 'void (__thiscall A::* )(void)' 转换为 'void (__cdecl *)(void)'

而且我似乎无法以任何方式摆脱它。我知道这与那些不可见的`this`指针（`__thiscall`和`__cdecl`）有关，但我不知道如何处理这些。我也尝试将成员变量设为类模板`p_func`（`void (Class::*p_func)()`这次编译器抱怨：

> 不允许使用多个模板参数列表

这种方法（没有模板）在全局函数（这是我目前使用的解决方法）上完美地工作，我在库（sfgui）中看到了它的使用，所以它应该是完全可能的。

要了解我为什么想要这个的背景信息：我正在尝试创建一个按钮。这个按钮应该能够调用我想要的任何功能。现在，我希望它调用`start()`我正在制作的动画类的函数。

ps：我知道这个例子没用，因为我无法运行`p_func`：函数不是静态的。我仍然需要添加一个对象指针 ( `setFunction( void (Class::*func)(), Class* )`)，但这似乎不是问题。而且我知道`typedef`要使函数指针更具可读性，但不能使用类模板。

* * *

## 编辑

经过更多研究，我认为答案我不需要这个问题的答案，而是另一个问题。这一次，我注意到`template <class Class>`实际上允许多个。但是，在成员变量上是不允许的，因为编译器不可能知道`class`他需要使用哪个，这可能是错误的原因

> 不允许使用多个模板参数列表

这是一个奇怪的描述。无论如何，感谢您的帮助，您确实给了我更好的见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:51:26.730

您不能将指向成员的指针转换为`Class::*func`普通函数指针。它们有不同的类型。

你应该把这个：

```
void (*p_func)(); // the function pointer 
```

进入这个：

```
void (class::*p_func)(); // the function pointer 
```

你也可以使用 a`std::function<void()>`和 use`boost::bind`来绑定它。

```
std::function<void()> fun = boost::bind(class::member_fun, args); 
```

**编辑**

让你的 B 类成为模板怎么样，这样你就可以做到这一点：

```
#include<iostream>

class A {
public:
    void aFunction() { // <- this is the function I want to point at
        std::cout << "aFunction() is called\n";
    }
};

template<class T>
class B {
public:
    void setFunction( void (T::*func)() ) {
        p_func = func;
    }
    void (T::*p_func)(); // the function pointer
    void callfunc()
    {
       (t.*p_func)(); //call pointer to member
    }
   private:
   T t; 
};

int main() {
    B<A> obj;
    obj.setFunction(&A::aFunction);
    return 0;
} 
```

[现场示例](http://liveworkspace.org/code/4s94dz%2417)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:34:19.607

我自己找到了完整的答案，同时寻找一种方法来保存 * 未知类型的对象，而不使用已在[此处](https://stackoverflow.com/questions/8570676/c-member-variable-of-any-type-in-non-template-class)回答的模板或 void 指针。该解决方案有点狡猾，因为您必须创建一个允许某些转换的虚拟父级。

这个想法是您创建一个 Parent 并且允许指向的每个对象都必须从它继承。通过这种方式，您可以创建一个指针，`Parent *obj`它可以容纳多种类型的对象，但当然只有继承自`Parent`.

这同样适用于函数指针。如果您将指针定义`void (Parent::*func)()`为成员变量。你可以向用户询问一个模板函数指针`template <class Class> setFunction( void (Class::*f)() )`，它可以保存任何指向任何类的指针。现在您需要将函数指针转换为所需的类`Parent`: `static_cast<void(Parent::*)()>(f)`。请注意，这仅在 Class 从 Parent 继承时才有效。否则你会得到一个编译错误。

## 最小的工作示例

```
#include <iostream>
using namespace std;

// dummy class Parent
class Parent {};

// class A
class A : public Parent { // Mind the inheritance!
public:
    A(int n) : num(n) {}

    void print() {  // <- function we want to point to
        cout << "Number: " << num << endl;
    }

    int num;
}

// class B, will hold the 2 pointers
class B {
public:
    B() {}

    template <class Class>  // will save the function and object pointer
    void setFunction( void (Class::*func)(), Class *obj) {
        function = static_cast<void(Parent::*)()>(func);
        object = obj;
    }

    void execFunction() {  // executes the function on the object
        (object->*function)();
    }

    void (Parent::*function)(); // the function pointer
    Parent *object;             // the object pointer
}

int main() {
    A a(5);
    B b;

    b.setFunction(&A::print, &a);
    b.execFunction();

    return 0;
} 
```

* * *

我真的不喜欢这个解决方案。更好的解决方案是该类`B`可以具有一个函数，当需要执行该函数时，它会返回一个布尔值。这样，您可以简单地在执行所需函数`if`的 -function 中放置一条语句。`main`

```
A a(5);
B b;
while (;;) {
    if (b.aTest())
        a.print();
} 
```

在哪里`B::aTest()`声明为

```
bool B::aTest(); 
```

希望这可以帮助遇到同样问题的任何人。所以这是完全可能的，但在我看来非常狡猾，我不鼓励人们使用第一种方法。

# c++ - C++ 中迭代器的前缀和后缀自增运算符重载实现之间的区别

> ID：15346233
> 
> 赞同：0
> 
> 时间：2013-03-11T18:49:10.303
> 
> 标签：c++, iterator, linked-list, operator-overloading

我正在读一本关于数据结构的书，现在正在尝试实现单链表数据结构。在实现迭代器时，我遇到了这些重载前缀和后缀增量的实现：

```
iterator &operator++()
{
    this->current = this->current->next;
    return *this;
}

iterator &operator++(int)
{
    iterator old = *this;
    ++(*this);
    return old;
} 
```

我知道第一个是前缀，第二个是后缀，但我不明白为什么重载的后缀增量有不同的代码？如果我这样做会有什么问题？

```
iterator &operator++(int)
{
    this->current = this->current->next;
    return *this;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T18:52:10.550

实际上，两个后缀版本都是错误的。**后缀迭代器必须返回一个副本，而不是一个引用。**

关键是后增量会更改增量对象，但会在增量之前返回它的一个版本。预增量更改对象并返回增量版本。他们的逻辑必须相应地不同。

之所以做出这种区分，是因为后增量和前增量在原始类型上具有相同的语义。例子：

```
int i = 0;
std::cout << i++ << std::endl; 
```

产生输出 0。具有重载迭代器的类应模仿该行为以保持一致性。如果您有自己的整数类和您展示的迭代器实现之一，结果将是 1，因此令人惊讶。

后缀增量的正确实现在 99% 的情况下：

```
iterator operator++(int)
{
    iterator old = *this;
    ++(*this);
    return old;
} 
```

# sup - 在 Sybase SUP 中，您对非示例启动有什么建议吗？

> ID：15346235
> 
> 赞同：0
> 
> 时间：2013-03-11T18:49:14.113
> 
> 标签：sup

全部，

也许是我想太多了。我看到的所有示例似乎都涵盖了从 AppDelegate 启动（iOS）本机应用程序。我对此并不感到兴奋，但我无法绕过它，以便感觉更舒服。您是否正在做一些不同的事情，以及如何做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-10T18:33:53.443

您可以简单地将初始化 SUP 连接的处理从 AppDelegate 的 applicationDidFinishLaunching 方法移至主视图控制器类的 viewDidLoad 方法。

您还需要将 NotificationCenter 处理程序方法移动到您的主视图控制器类。

# c# - 设置光栅位置不会改变 OpenGL 中 DrawPixels 的任何内容

> ID：15346239
> 
> 赞同：1
> 
> 时间：2013-03-11T18:49:24.130
> 
> 标签：c#, wpf, opengl

我正在使用 SharpGL（OpenGL，WPF 应用程序）在屏幕上绘制 PNG。我打开文件，读取字节，然后使用以下代码绘制图像：

```
SharpGL.OpenGL gl = args.OpenGL;

//gl.GetFloat(SharpGL.Enumerations.GetTarget.CurrentRasterPosition, data);
//gl.RasterPos(0, 0, 0, 1);
gl.DrawPixels(m_bitmapImage.PixelWidth, m_bitmapImage.PixelHeight, SharpGL.OpenGL.GL_BGRA, m_pixels); 
```

我想在屏幕上移动图像，所以我的理解是，如果我更改光栅位置，它将移动绘制图像的起点。如果我以任何方式更改光栅位置的值，我的图像最终会消失。我尝试获取当前的光栅位置并将其直接导入`RasterPos`函数，然后尝试再次读取值，它从`0, 0, 0, 1`变为`258.5, 161.5, .5, 1`（屏幕宽度的一半，屏幕高度的一半，不知道 .5 来自哪里从，1）。即使我手动尝试摆弄数字也没有什么区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:15:21.793

尝试这样的事情：

```
glMatrixMode( GL_PROJECTION );
glLoadIdentity();
glOrtho( 0, windowWidth, 0, windowHeight, -1, 1 );

glMatrixMode( GL_MODELVIEW );
glLoadIdentity();

glRasterPos( ... );
glDrawPixels( ... ); 
```

或使用[`glWindowPos()`](http://www.opengl.org/sdk/docs/man2/xhtml/glWindowPos.xml).

# weka - Weka如何从KNN（IBk）中绘制ROC曲线？

> ID：15346240
> 
> 赞同：0
> 
> 时间：2013-03-11T18:49:24.253
> 
> 标签：weka, knn, roc

在发布之前，我已经阅读了很多关于 ROC 曲线的内容。

所以，我不明白 Weka 是如何绘制 ROC 曲线的。我找不到要改变以生成曲线中的点的阈值。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:15:52.627

Weka 使用`TheresholdCurve`从类中的方法调用的`Evaluation`类。在这个类中有ROC曲线的所有点。

阈值将根据所使用的分类而变化。有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/15226043/does-anyone-know-how-to-generate-auc-roc-area-based-on-the-predition)。

# javascript - d3 条形图 - 尝试将刻度线对齐到条形图

> ID：15346243
> 
> 赞同：0
> 
> 时间：2013-03-11T18:49:42.537
> 
> 标签：javascript, d3.js, bar-chart

我还没有很多使用 D3 的经验，但我发现了一个帖子，其中海报用这个图表创建了一个小提琴（可以在这里找到：[Need help lining up x axis ticks with bars in D3.js bar chart](https://stackoverflow.com/questions/11814399/need-help-lining-up-x-axis-ticks-with-bars-in-d3-js-bar-chart)） . 我试图将其修改为显示天而不是月，但这样做时刻度线的对齐是关闭的。我希望我能得到一些帮助，试图对齐刻度并了解它是如何工作的。

[http://jsfiddle.net/MmEjF/32/](http://jsfiddle.net/MmEjF/32/)

我添加了 ticks 方法来指定步骤，但这样做会导致对齐关闭。

```
var xAxis = d3.svg.axis().
scale(xTimeScale).
orient("bottom").
ticks(d3.time.days, 1).
tickFormat(formatDate); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T23:21:02.223

您只需要更改以下内容：

```
var xTimeScale = d3.time.scale().
domain([new Date(data[0].date), d3.time.day.offset(new Date(data[data.length - 1].date), 0)]).
range([0, width]); 
```

到：

```
var xTimeScale = d3.time.scale().
domain([new Date(data[0].date), d3.time.day.offset(new Date(data[data.length - 1].date), 1)]).
range([0, width]); 
```

我只是将偏移量的最后一个参数更改为 1 而不是 0，零它只是返回日期的副本，如[文档](https://github.com/mbostock/d3/wiki/Time-Intervals#wiki-interval_offset)中所述。

此外，我想指出，将 放在`.`行末不是惯例，并且使代码难以阅读，我知道它来自前面的示例，但不要从中得到启发。这是它的样子：

```
var xTimeScale = d3.time.scale()
    .domain([new Date(data[0].date), d3.time.day.offset(new Date(data[data.length - 1].date), 1)])
    .range([0, width]); 
```

这是带有工作代码的 jsFiddle：http: [//jsfiddle.net/chrisJamesC/MmEjF/34/](http://jsfiddle.net/chrisJamesC/MmEjF/34/)

# html - “绝对”容器适合没有宽度/高度 CSS 规则的视口

> ID：15346244
> 
> 赞同：1
> 
> 时间：2013-03-11T18:49:44.597
> 
> 标签：html, css, absolute

我找到了这个页面： http: [//www.maddim.com/demos/spark-wp/](http://www.maddim.com/demos/spark-wp/)

在没有定义宽度或高度的情况下，有一个固定的标题和一个延伸到视口的 div。它允许 y 轴上的内容溢出，并在必要时应用滚动条（框滚动，无视口滚动条）。HTML 非常简单：

```
<header> ... </header>
<div id="main" role="main"> ... </div> 
```

CSS：

```
#main {
bottom: 0;
left: 0;
overflow-y: scroll;
position: absolute;
right: 0;
top: 89px;
} 
```

禁用所有 JS 并删除 firebug 中的大部分页面元素后，裸露的 #main 元素仍然像以前一样运行。

这里使用了什么技术，它在哪里定义来创建#main 容器的这种行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:57:33.323

这里有一些 CSS 基础知识。 `bottom: 0;`正是这样说的。将元素的底部粘贴到距视口底部 0 像素处。`left: 0;`并`right: 0;`做基本相同的事情。`overflow-y: scroll;`表示允许滚动垂直方向溢出的内容，并`position: absolute;`表示将此元素从页面流中取出并将其附加到页面的一个位置。`top: 89px;`通过将此元素放置在距视口顶部 89 像素的位置，为标题提供空间。

# android - 我在构建 android 项目时遇到错误？

> ID：15346246
> 
> 赞同：-1
> 
> 时间：2013-03-11T18:49:52.830
> 
> 标签：android

![在此处输入图像描述](../Images/2aefc51c3bc502f88a8bead0b49ce4dd.png)

gen 文件夹丢失是问题。构建补丁失败。我已经尝试了之前发布的所有解决方案，但没有运气。

编辑

为了清楚起见，这是我的原始帖子

[https://salesforce.stackexchange.com/questions/9460/encountering-issues-while-developing-android-hybrid-mobile-app](https://salesforce.stackexchange.com/questions/9460/encountering-issues-while-developing-android-hybrid-mobile-app)

我正在使用 Salesforce SDK，但是当我使用本机创建 hello world 应用程序时，它工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:28:45.913

即使您删除了 gen 文件夹，它也会在您编译程序后重新生成它。但如果不是，请尝试创建一个新项目并重试。如果不是，请尝试全新安装 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:50:56.297

我认为这是因为当您导入项目时，构建目标未在项目属性中设置，然后默认为清单文件中使用的值。并确保你有 API 8。

解决方案是启用针对您安装的 API 级别的构建目标（但保持清单文件中指定的最低 api 支持）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:26:43.800

**更新**
嗯，*两个*帖子中的每个人都在告诉您下载“Android 2.2 (API 8)”的“SDK 平台”。我*真的，真的*推荐试试这个。您添加到项目中的库显然需要它...

> 我有 4.2 和 4.1 。这还不够吗？

不，您必须拥有正在构建的较旧平台。

只需下载并打开`Project > Properties`，单击`Android`，然后选择`Android 2.2`。毕竟这清理你的项目并保存它。

* * *

**原始答案**
截图并没有给我们太多细节，但是：

```
Unable to Resolve target 'android-8' 
```

告诉我您可能没有 API 8 的 SDK 平台，只需通过 SDK 管理器下载即可。或者，您可以更改清单和其余代码中的任何引用以使用您已有的 API。

# c# - 根据另一个元素值选择 XML 元素

> ID：15346248
> 
> 赞同：1
> 
> 时间：2013-03-11T18:50:02.100
> 
> 标签：c#, xml, linq

```
<Root>
    <Sub>
        <Name>a</Name>
        <Value>1</Value>
    </Sub>
    <Sub>
        <Name>b</Name>
        <Value>2</Value>
    </Sub>
</Root> 
```

如何根据`Value`元素选择元素的值`Name`？

编辑：在 XDocument 中，当我有“a”时如何获得值“1”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:06:04.183

我建议您使用转换节点而不是`Value`直接访问属性：

```
int value = xdoc.Descendants("Sub")
                .Where(s => (string)s.Element("Name") == "a")
                .Select(s => (int)s.Element("Value"))
                .FirstOrDefault(); 
```

如果缺失节点的默认值（零）不符合您的需要，那么您可以`Sub`在获取值之前检查所需元素是否存在：

```
var sub = xdoc.Descendants("Sub")
              .FirstOrDefault(s => (string)s.Element("Name") == "a");

if (sub != null)            
    value = (int)sub.Element("Value"); 
```

* * *

或者使用 XPath 和 Linq 进行简单的一行：

```
int value = (int)xdoc.XPathSelectElement("//Sub[Name='a']/Value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:56:04.527

嗯，想想吧……

您可以轻松读取 XML 文件，只需检查条件是否`<Name>`与您的条件匹配，而不是读取`<value>`标签的值。

这是您可以获得[如何从**c#**代码读取**XML**文件的](https://stackoverflow.com/questions/11225051/how-to-read-xml-file-in-c)**答案。**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T18:59:14.100

你可以试试这个，可能有帮助

```
var results = from row in xdoc.Root.Descendants("Sub")
where row.Element("Name").value ="value"
select new XElement("row", row.Element("Value")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T19:02:15.643

这应该这样做：

（假设`doc`是 的一个实例`XDocument`）

```
string name = "a";
var items = doc.Descendants("Sub")
               .Where(s => (string)s.Element("Name") == name)
               .Select(s => s.Element("Value").Value); 
```

`items``IEnumerable<string>`在这种情况下会导致。

如果你知道你只想要一个值：

```
string name = "a";
string value = doc.Descendants("Sub")
               .Where(s => (string)s.Element("Name") == name)
               .Select(s => s.Element("Value").Value)
               .FirstOrDefault(); 
```**

# c# - 删除实体但保留相关实体之一

> ID：15346249
> 
> 赞同：0
> 
> 时间：2013-03-11T18:50:03.050
> 
> 标签：c#, entity-framework

我需要删除一个实体的记录，但保留与之相关的另一个实体的所有记录：

要删除的实体记录是：

```
public class Ask
{
    // Primary properties
    public int Id { get; set; }
    public string Title { get; set; }
    public string Message { get; set; }
    public DateTime DateCreated { get; set; }
} 
```

删除 Ask 记录后我要保留的相关记录是 MessageAsk 类型：

```
public class Message
{
    // Primary properties
    public int Id { get; set; }
    public string NameFrom { get; set; }
    public string EmailFrom { get; set; }
    public string TelephoneFrom { get; set; }
    public string Title { get; set; }
    public string MessageText { get; set; }
    public bool? Approved { get; set; }
    public DateTime? DateCreated { get; set; }
    public DateTime? DateRead { get; set; }

    // Navigation properties
    public Member MemberFrom { get; set; }
    public Member MemberTo { get; set; }
    public MessageType MessageType { get; set; }
    public Message MessageParent { get; set; }
}

public class MessageAsk : Message
{
    public Ask Ask { get; set; }
} 
```

恢复，我想删除一个 Ask 并保留所有相关的 MessageAsk。

编辑：我使用服务删除：

```
 private readonly IRepository<Ask> _askRepository;
    private readonly IRepository<MessageAsk> _messageAskRepository;

    public bool Delete(int askId)
    {
        try
        {
            Ask askToDelete = _askRepository.GetById(askId);

            IList<MessageAsk> relatedMessageAsks = _messageAskRepository.Query.Where(m => m.Ask.Id == askId).ToList();

            _askRepository.Delete(askToDelete);

            _askRepository.Save();

         }
        catch 
        { 
            return false; 
        }

        return true;
    } 
```

我使用存储库来删除实体：

```
public class Repository<T> : IRepository<T> where T : class
{
    protected DbContext _dataContext;
    protected DbSet<T> _dbSet;

    public Repository(DbContext context)
    {
        _dataContext = context;
        _dbSet = _dataContext.Set<T>();
    }

    public T NewEntityInstance()
    {
        return _dbSet.Create();
    }

    public void Delete(T entity)
    {
        if (_dataContext.Entry(entity).State == EntityState.Detached)
        {
            _dbSet.Attach(entity);
        }
        _dbSet.Remove(entity);
    }

   public virtual void Delete(object id)
    {
        T entity = _dbSet.Find(id);

        Delete(entity);
    }

    public T GetById(int id)
    {
        return _dbSet.Find(id);
    }

    public virtual IQueryable<T> Query
    {
        get
        {
            return _dbSet.AsNoTracking(); <------ SOURCE OF THE PROBLEM - I HAD TO REMOVE THE ASNOTRACKING OPTION TO SOLVE THE PROBLEM
        }
    } 
```

}

我现在得到的错误：

```
"The DELETE statement conflicted with the REFERENCE constraint "FK_Messages_Asks". The conflict occurred in database "Heelp", table "dbo.Messages", column 'Ask_Id'. 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:23:15.507

如果您的关系是*可选*的（即`MessageAsk`表到`Ask`表的外键允许`NULL`值），您可以这样做：

```
using (var context = new MyContext())
{
    var askToDelete = context.Asks.Single(a => a.Id == askToDeleteId);
    var relatedMessageAsks = context.MessageAsks
        .Where(m => m.Ask.Id == askToDeleteId)
        .ToList();
    // or just: context.MessageAsks.Where(m => m.Ask.Id == askToDeleteId).Load();

    context.Asks.Remove(askToDelete);
    // or DeleteObject if you use ObjectContext

    context.SaveChanges();
} 
```

（或者`context.Messages.OfType<MessageAsk>()...`，`context.MessageAsks...`如果您在上下文中没有派生类型的集合，而不是）

您无需在此处显式设置该`MessageAsk.Ask`属性。`null`EF 将在`askToDelete`删除时自动执行此操作，并在数据库中`MessageAsk`使用 FK =更新。`NULL`

如果需要关系（不允许 FK 的 s），则它不起作用，因为当主体 ( ) 将被删除`NULL`时，您将违反数据库中的引用外键约束。在这种情况下`askToDelete`，您需要在删除.`relatedMessageAsks``Ask``askToDelete`

# ios - 使用 avplayeritem 与 doesNotRecognizeSelector 崩溃

> ID：15346250
> 
> 赞同：0
> 
> 时间：2013-03-11T18:50:05.103
> 
> 标签：ios, objective-c, crash, avqueueplayer

我在看起来像是来自 AVPlayerItem 的回调中遇到了崩溃。我这样设置通知：

```
if (queuePlayer==nil) {
    queuePlayer = [[AVQueuePlayer alloc] initWithItems:playerItems];
}
else {
    for (AVPlayerItem* item in playerItems) {
        [queuePlayer insertItem:item afterItem:nil];
    }
}
[[NSNotificationCenter defaultCenter] addObserver:self
                                 selector:@selector(playerLastItemDidReachEnd:)
                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                 object:[playerItems lastObject]];

[queuePlayer play];   
[playerItems release]; 
```

我以随机方式遇到此崩溃；这意味着大多数时候，代码都有效。但它会不时生成此堆栈跟踪。

线程 0 名称：调度队列：com.apple.main-thread 线程 0 崩溃：

```
0   libsystem_kernel.dylib          0x30fbd350 __pthread_kill + 8
1   libsystem_c.dylib               0x3916a11e pthread_kill + 54
2   libsystem_c.dylib               0x391a696e abort + 90
3   libc++abi.dylib                 0x32515d4a abort_message + 70
4   libc++abi.dylib                 0x32512ff4 default_terminate() + 20
5   libobjc.A.dylib                 0x336c9a74 _objc_terminate() + 144
6   libc++abi.dylib                 0x32513078 safe_handler_caller(void (*)()) + 76
7   libc++abi.dylib                 0x32513110 std::terminate() + 16
8   libc++abi.dylib                 0x3251450e __cxa_throw + 118
9   libobjc.A.dylib                 0x336c99ba objc_exception_throw + 90
10  CoreFoundation                  0x353bce02 -[NSObject(NSObject) doesNotRecognizeSelector:] + 166
11  CoreFoundation                  0x353bb52c ___forwarding___ + 388
12  CoreFoundation                  0x35312f64 _CF_forwarding_prep_0 + 20
13  CoreFoundation                  0x3530a034 _CFXNotificationPost + 1424
14  AVFoundation                    0x317e6d60 __avplayeritem_fpItemNotificationCallback_block_invoke_0 + 3364
15  libdispatch.dylib               0x340aa11c _dispatch_call_block_and_release + 8
16  libdispatch.dylib               0x340a94b4 _dispatch_client_callout + 20
17  libdispatch.dylib               0x340ae1b8 _dispatch_main_queue_callback_4CF$VARIANT$mp + 220
18  CoreFoundation                  0x3538cf36 __CFRunLoopRun + 1286
19  CoreFoundation                  0x352ffeb8 CFRunLoopRunSpecific + 352
20  CoreFoundation                  0x352ffd44 CFRunLoopRunInMode + 100
21  GraphicsServices                0x3583c2e6 GSEventRunModal + 70
22  UIKit                           0x366de2fc UIApplicationMain + 1116
23  Training                        0x0004399a main (main.m:14)
24  Training                        0x0004395c start + 36 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T23:08:40.930

看起来您的对象实际上没有 playerLastItemDidReachEnd: 选择器。

# android - 如何找到 layout_marginTop

> ID：15346252
> 
> 赞同：0
> 
> 时间：2013-03-11T18:50:19.797
> 
> 标签：android, android-layout

我有一个包含以下属性的 XML 文件：

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:id="@+id/al_cs_layout1"
android:gravity="center_vertical">

<ImageView android:id="@+id/cs_track" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:background="@drawable/fader_background5"
android:layout_marginLeft="0dp"
android:layout_marginTop="20dp" >
</ImageView>
... 
```

这是我的java代码：

```
public void initialize(Context context)
{
Log.d("initialize (MySeekBar)","initialize");
setWillNotDraw(false);

LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view1 = inflater.inflate(R.layout.custom_seekbar, this);

layout1 = (RelativeLayout)view1.findViewById(R.id.al_cs_layout1);
track = (ImageView)layout1.findViewById(R.id.cs_track);
thumb = (ImageView)layout1.findViewById(R.id.cs_thumb);
... 
```

我正在开发一个自定义搜索栏，它通过使用变量 marginTop = 20; 来确定顶部；然而，这最初是由不同的程序员在更老的手机上制作的。20 假设代表 XML 中定义的边距顶部，但它使用的是 dp 而不是像素。如何找到 R.id.cs_track 的 marginTop 属性？它在旧手机上效果很好，但在任何手机上都没有相同的 dp 屏幕尺寸，它会产生不希望的偏移。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:12:08.627

使用 MarginLayoutParams 获取像素值：

```
track = (ImageView)layout1.findViewById(R.id.cs_track);
MarginLayoutParams params = (MarginLayoutParams)track.getLayoutParams();
int marginTopPixelSize = params.topMargin; 
```

# android - 如何从 url 图像到 InfoWindowAdapter android？

> ID：15346254
> 
> 赞同：1
> 
> 时间：2013-03-11T18:50:32.143
> 
> 标签：android, image, supportmapfragment

我正在尝试从“InfoWindowAdapter”中的 url 显示图像，我有以下代码，但没有显示图像

```
....
mMap = getMap();

mMap.setInfoWindowAdapter(new InfoWindowAdapter() {

  ...

 @Override
 public View getInfoContents(Marker marker) {

  View v = getActivity().getLayoutInflater().inflate(
R.layout.info_window_layout, null);

 String image_url = "http://api.androidhive.info/images/sample.jpg";
 new DownloadImageTask(imgEquipo).execute(image_url);
 return v;
 } 
}); 
```

调用 AsyncTask 获取图像

```
private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {
    ImageView bmImage;

    public DownloadImageTask(ImageView bmImage) {
        this.bmImage = bmImage;
    }

    protected Bitmap doInBackground(String... urls) {
        String urldisplay = urls[0];
        Bitmap mIcon11 = null;
        try {
            InputStream in = new java.net.URL(urldisplay).openStream();
            mIcon11 = BitmapFactory.decodeStream(in);
        } catch (Exception e) {
            Log.e("Error", e.getMessage());
            e.printStackTrace();
        }
        return mIcon11;
    }

    protected void onPostExecute(Bitmap result) {
        bmImage.setImageBitmap(result);
    } }
 } 
```

为您提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T17:23:23.060

它不起作用，因为视图在您获取图像之前返回，并且它们不同步。

看看这种方法：

[我使用 google mapV2 并从 google place api 下载图像并希望在弹出窗口中显示](https://stackoverflow.com/questions/14279442/i-my-using-google-mapv2-and-i-m-downloading-image-from-google-place-api-and-want)

诀窍是在获取图像后更新 InfoWindow。

# php - 通过 PHP 从 HTML 表单输入创建文件夹

> ID：15346256
> 
> 赞同：-2
> 
> 时间：2013-03-11T18:50:43.707
> 
> 标签：php

我正在尝试创建一个 PHP 脚本，该脚本允许我从 HTML 表单中的输入值创建一个文件夹。这是我到目前为止所尝试的：

HTML：

```
<form  action="cfolder.php">
<input  name="foldername" id="foldername" >

<input type="submit" value="upload" />
</form> 
```

PHP 即 cfolder.php

```
<?php

$subject = $_POST["foldername"] = $foldername; 
mkdir($foldername, 0700);

?> 
```

不幸的是，该文件夹没有被创建。我尝试了其他解决方案，但无济于事。

*它给我的错误是 [11-Mar-2013 12:54:51] PHP Warning: mkdir() [function.mkdir]: No such file or directory in /home5/../cfolder.php on line 4*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:53:02.120

```
$subject = $_POST["foldername"] = $foldername; 
```

将 $foldername 中的任何值分配给 $_POST['foldername'] 和 $subject。

如果 var 一开始是空白的，那么您将删除 $subject 和 $_POST['foldername'];

请记住，在 PHP 中，赋值的结果是被赋值的值。

例如

```
$foo = $bar = $baz = 7; 
```

将所有三个变量设置为`7`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:53:26.293

您`$_POST`通过 GET 使用和发送表单输入 - 这是行不通的。使用`$_GET`或设置`method="POST"`

你也必须编辑分配

```
$foldername = $_POST["foldername"]; 
```

顺便提一句。确保您在正确的目录中并拥有创建文件的权限

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:54:11.470

```
<?php
 $subject = $foldername = $_POST["foldername"]; 
 mkdir($foldername, 0700);
?> 
```

变量从右到左进行评估。赋值的结果是被赋值的值。在您的示例中，您将 $subject 和 $_POST["foldername"] 都设置为未设置的 $foldername。

# objective-c - 以编程方式使用自动布局约束

> ID：15346260
> 
> 赞同：12
> 
> 时间：2013-03-11T18:50:56.917
> 
> 标签：objective-c, ios6

我正在尝试以编程方式在我的 iOS 应用程序中使用自动布局。我有一个带有这个初始化代码的简单视图控制器

```
UIView *innerView = [[UIView alloc] initWithFrame:self.view.bounds];

UIButton *button1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button1 setFrame:CGRectMake(50, 50, 150, 50)];
[button1 setTitle:@"button1" forState:UIControlStateNormal];

UIButton *button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button2 setFrame:CGRectMake(250, 50, 150, 50)];
[button2 setTitle:@"button2" forState:UIControlStateNormal];

[innerView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"|[button1][button2(==button1)]|" options:NSLayoutFormatAlignAllBaseline metrics:0 views:NSDictionaryOfVariableBindings(button1, button2)]];

[innerView addSubview:button1];
[innerView addSubview:button2];
[self.view addSubview:innerView]; 
```

但是当我尝试运行它时，我收到了这个错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Unable to parse constraint format: 
Unable to interpret '|' character, because the related view doesn't have a superview 
|[button1][button2(==button1)]| 
          ^' 
```

它出什么问题了？

当我试图删除管道时`constraintsWithVisualFormat`，我收到了这个警告：

```
Unable to simultaneously satisfy constraints.
Probably at least one of the constraints in the following list is one you don't want. Try this: (1) look at each constraint and try to figure out which you don't expect; (2) find the code that added the unwanted constraint or constraints and fix it. (Note: If you're seeing NSAutoresizingMaskLayoutConstraints that you don't understand, refer to the documentation for the UIView property translatesAutoresizingMaskIntoConstraints) 
(
    "<NSAutoresizingMaskLayoutConstraint:0x716be10 h=--& v=--& UIRoundedRectButton:0x71631f0.midX == + 325>",
    "<NSAutoresizingMaskLayoutConstraint:0x7169940 h=--& v=--& H:[UIRoundedRectButton:0x715fb80(150)]>",
    "<NSAutoresizingMaskLayoutConstraint:0x7169860 h=--& v=--& UIRoundedRectButton:0x715fb80.midX == + 125>",
    "<NSLayoutConstraint:0x7164cd0 UIRoundedRectButton:0x71631f0.width == UIRoundedRectButton:0x715fb80.width>",
    "<NSLayoutConstraint:0x7164940 H:[UIRoundedRectButton:0x715fb80]-(0)-[UIRoundedRectButton:0x71631f0]>"
)

Will attempt to recover by breaking constraint 
<NSLayoutConstraint:0x7164940 H:[UIRoundedRectButton:0x715fb80]-(0)-[UIRoundedRectButton:0x71631f0]>

Break on objc_exception_throw to catch this in the debugger.
The methods in the UIConstraintBasedLayoutDebugging category on UIView listed in <UIKit/UIView.h> may also be helpful. 
```

因此，我的约束完全没有效果。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-11T19:05:00.473

你有三个问题：

首先，您需要在两个按钮子视图上选择基于布局的约束

```
[button1 setTranslatesAutoresizingMaskIntoConstraints:NO];
[button2 setTranslatesAutoresizingMaskIntoConstraints:NO]; 
```

这将摆脱 NSAutoresizingMaskLayoutConstraint 错误。现在您可以了解您的布局约束发生了什么。

其次，您必须`addSubview`在添加约束之前。在 button1 和 button2 是 innerview 的子视图之前，您正在调用`addContraints`innerView。

第三，您应该指定（尽管文档表明它是可选的）布局字符串是垂直的还是水平的。`@"H:|[button1][button2(==button1)]|"`. 您还需要一个垂直约束，例如`@"V:[button1]|"`将 button1 与底部对齐，`innerview`并且因为您在按钮上对齐了基线，所以 button2 将跟随。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-08T23:18:30.687

仅作记录：有关丢失的超级视图的异常已经由`constraintsWithVisualFormat`not触发`addConstraints`

# php - 在回发时记住 PHP 中所选下拉位置的最简单方法

> ID：15346261
> 
> 赞同：0
> 
> 时间：2013-03-11T18:51:00.863
> 
> 标签：php, drop-down-menu, foreach, postback, smarty

注意：我被迫使用 TPL 文件。我查看了该网站上的其他解决方案，但它们似乎对我不起作用。我知道我想使用 $_POST['book'] 选择哪个选项。我已经尝试过 {html_options} （聪明），但似乎没有任何效果。我要做的就是记住用户点击提交（GO）按钮时的下拉列表位置。实现这一点的最简单方法是什么？

```
<?php
if($_SERVER['REQUEST_METHOD'] == 'POST')
    {
      $book = $_POST['book'];
      $chapter = $_POST['chapter'];
      $tbl_link = "PLD_LINK";

      $query_chapter = "SELECT `TITLE`,`SORT_ORD`, `DESCRIPTION` FROM $tbl_link WHERE `TITLE` LIKE '%$book%' && `SORT_ORD` = '$chapter'";
      $search_chapter=$db->query($query_chapter);
      while($row = $search_chapter->fetch(PDO::FETCH_ASSOC)) {
      { $coal[] = $row; }
      $tpl->assign('coal', $coal);                       
                                                             }
      $search_chapter->closeCursor();
    }
?>
<?php
while($rows = $result->fetch(PDO::FETCH_ASSOC)) {
{ $results[] = $rows ; }
$tpl->assign('results', $results);
}
?> 
```

.TPL：

```
<select name='book'>
{foreach item=rows from=$results}
<option value='{$rows.TITLE}'>{$rows.TITLE}</option>{/foreach}
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:57:46.093

编辑您的模板文件

```
<select name='book'>
{foreach item=rows from=$results}
<option value='{$rows.TITLE}'{if isset($book) && $rows.TITLE == $book} selected{/if}>{$rows.TITLE}</option>{/foreach}
</select> 
```

`$value`并在您的 php 文件中分配

```
$tpl->assign("book", $book); 
```

# jsf - JSF 版本上下文中的“里程碑”是什么意思？

> ID：15346264
> 
> 赞同：0
> 
> 时间：2013-03-11T18:51:19.627
> 
> 标签：jsf, java-ee-6

我开始进入一个新的 JSF-Webapplicationproject 并看到现在有标记为 m 的版本，例如 2.2.0-m09 代表里程碑。

里程碑这个词本身代表着通往主要目标的检查点。但是没有定义里程碑是否可以用于生产。

jsf版本上下文中的里程碑是什么意思？是否用于生产用途？

# c# - 随机化 RichTextBox 的行

> ID：15346265
> 
> 赞同：2
> 
> 时间：2013-03-11T18:51:24.903
> 
> 标签：c#

好吧，我一直在尝试随机化我的richtextbox的行，现在它开始困扰我，因为我正在使用随机但它不起作用......当我使用它时，它会多次重复一些行，并且根本不包括一些...

我看过：[RichTextBox - 随机排序行](https://stackoverflow.com/questions/9744420/richtextbox-sorting-lines-randomly)

但这对我一点帮助都没有。

```
RichtextBox rtb = new RichTextBox();    
Random R = new Random();
int y;
rtb.Text = "";
for (int i = 0; i < richTextBox1.Lines.Length; i++)
{
   y = R.Next(0, richTextBox1.Lines.Length);
   rtb.Text = rtb.Text + richTextBox1.Lines[y].ToString() + "\r\n";
}
richTextBox2.Text = rtb.Text; 
```

例如，如果我输入，

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。Nam in aliquam enim。Proin 在 lacus magna。Nam bibendum, augue non semper fringilla, ante est interdum ipsum, a egestas urna dolor vel risus。Phasellus eget dui non augue pretium ullamcorper at ac Tellus。Sed m​​attis risus 坐 amet metus dictum egestas。Phasellus tempus blandit enim，ac congue urna bibendum sed。Sed iaculis pulvinar dui vel tristique。Etiam justo metus, consequat in pellentesque eu, eleifend id nunc。

它给了我，

> Sed m​​attis risus 坐 amet metus dictum egestas。Phasellus tempus blandit enim，ac congue urna bibendum sed。Nam bibendum, augue non semper fringilla, ante est interdum ipsum, a egestas urna dolor vel risus。Sed m​​attis risus 坐 amet metus dictum egestas。Phasellus tempus blandit enim，ac congue urna bibendum sed。Sed iaculis pulvinar dui vel tristique。Etiam justo metus, consequat in pellentesque eu, eleifend id nunc。Lorem ipsum dolor sit amet, consectetur adipiscing elit。Nam in aliquam enim。Proin 在 lacus magna。

重复一行，错过了一行……文本越长，它出现的频率越高。

我做 C# 的时间不长，如果这很简单，很抱歉。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T18:59:40.450

这是您在伪代码中的逻辑：

```
Foreach line in original
Choose a random line
Add it to the output 
```

你永远不会考虑你已经输出了哪些行，因此不知道下次不选择它们。

请注意，在您提供的链接中，他们建议首先将行提取到一个结构中，然后对该结构进行变异以提供新的排序。这可确保您以每行结束一次。

有几种算法可以就地洗牌，最简单的是：

```
Select the first item
Select a random line, after or including the previous selection
Swap the two selections
Repeat moving the first selection to the left 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:58:34.287

随机意味着“只是” - 它会返回一个介于 0 和（富文本框中的行数 - 1）之间的数字。没有唯一性的保证（事实上这不太可能）。

如果您想以独特的顺序获取它们，则必须跟踪使用过的那些，并且不要再次使用它们。

一个简单的例子（不一定有效）

```
 List<int> usedLineIndexes = new List<int>();

   while (usedLineIndexes.Count < richTextBox1.Lines.Length)
   {
        int y = R.Next(0, richTextBox1.Lines.Length);
        if (usedLineIndexes.Contains(y))
            continue;   // Try again

        usedLineIndexes.Add(y);

        rtb.Text = rtb.Text + richTextBox1.Lines[y].ToString() + "\r\n";
   } 
```

同样，这是未经测试的、低效的代码，但它会给你一个想法。

# backbone.js - 主干.js 批量更新

> ID：15346271
> 
> 赞同：2
> 
> 时间：2013-03-11T18:51:49.820
> 
> 标签：backbone.js

所以我有一个页面，用户通过复选框从可用选项列表中进行选择。我有 3 个集合：一个用于可能的选项列表，一个用于当前保存的选项，以及一个已保存选项的克隆。当他们单击复选框时，我正在使用克隆列表添加/删除选项。

```
var possibleOptions = new Backbone.Collection("/options");   
var currentUserOptions = new Backbone.Collection("/useroptions", { id: 2 });
var clonedUserOptions = new Backbone.Collection(currentUserOptions.toJSON()); 
```

采用这种方法的原因是用户可以在编辑过程中取消选项页面，因此希望在单击保存按钮时选项保持不变。在选中/未选中选项时，将正确更新clonedoptions。但是，当我尝试更新真实列表时，似乎什么也没发生。

```
currentUserOptions.update(clonedUserOptions.toJSON()); 
```

我的期望是骨干网会根据文档（[http://documentcloud.github.com/backbone/#Collection-update](http://documentcloud.github.com/backbone/#Collection-update)）触发对新模型的发布请求并删除每个缺失模型。如果我误解了这是如何工作的，请告诉我。一个正确方法的简单工作示例将不胜感激。

谢谢，CF

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:04:55.340

据我了解，当集合发生变化时（正如人们所提到的），您必须使用单独的模型调用来更新服务器。有一些事件可以涵盖这些变化。但是，您可以使用同步发送整个集合。添加或删除每个模型时，您可以将其标记为新模型和已删除模型，并在准备好保存时发送整个集合。您的服务器方法必须在发送集合时确定适当的添加或删除操作。

这是进行批量同步的示例。而不是使用 this.collection.remove() 您可能只想像我提到的那样将其标记为已删除。这几乎是服务器知道要删除什么的唯一方法。从技术上讲，您可以删除所有内容，然后只添加在批量更新中发送的内容:) 此外，当您保存以更新实际已删除的内容时，您可能需要再次获取或从服务器返回一个集合。我不确定这对您的情况有帮助，但我已将它用于“完成后保存”一个按钮概念的页面。

```
 var one = new model({ id: this.collection.length + 1});
    var two = new model({ id: this.collection.length + 2 });
    var three = new model({ id: this.collection.length + 3 });
    var four = new model({ id: this.collection.length + 4 });
    var five = new model({ id: this.collection.length + 5 });

    this.collection.add(one.toJSON());
    this.collection.add(two.toJSON());
    this.collection.add(three.toJSON());
    this.collection.add(four.toJSON());
    this.collection.add(five.toJSON());

    this.collection.sync('update', this.collection, { success: function () {    console.log(this.collection.length); } });

    this.collection.remove(one);
    this.collection.remove(two);

    this.collection.sync('update', this.collection, { success: function () { console.log(this.collection.length); } }); 
```

在你的情况下：

```
currentUserOptions.sync('update', currentUserOptions, { success: function () { //do something } }); 
```

# jquery - jquery .focus safari & chrome mobile vs chrome mobile android

> ID：15346280
> 
> 赞同：2
> 
> 时间：2013-03-11T18:52:13.137
> 
> 标签：jquery, select, focus

在手机上，当您单击“打开”链接时，这将在 safari mobile (IOS) 和 chrome mobile (IOS) 中显示一个下拉菜单，但在 chrome mobile (android) 中没有任何内容！

我只是做`jQuery('#myselect').select().focus();`

关于我如何在浏览器 safari 和 chrome 移动 IOS 中实现这个小技巧的任何线索**android**中实现这个小技巧的任何线索？

演示：[http ://bit.ly/10E3ScR](http://bit.ly/10E3ScR)

# php - PHP 字母和空格仅验证

> ID：15346284
> 
> 赞同：10
> 
> 时间：2013-03-11T18:52:20.840
> 
> 标签：php, forms, validation

我正在使用 PHP 验证我的联系表单，并且我使用了以下代码：

```
if (ctype_alpha($name) === false) {
            $errors[] = 'Name must only contain letters!';
} 
```

此代码工作正常，但它过度验证并且不允许空格。我已经尝试过`ctype_alpha_s`，但出现了一个致命错误。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-11T18:54:45.323

正则表达式是多余的，对于这样一个简单的任务会执行得更糟，考虑使用本机字符串函数：

```
if (ctype_alpha(str_replace(' ', '', $name)) === false) {
  $errors[] = 'Name must contain letters and spaces only';
} 
```

这将在运行 alpha 检查之前去除空格。如果制表符和新行是一个问题，您可以考虑使用它：

```
str_replace(array("\n", "\t", ' '), '', $name); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-11T19:00:49.163

ctype_alpha 只检查字母 `[A-Za-z]`

如果您想将它用于您的目的，首先您必须从字符串中删除空格，然后应用 ctype_alpha。

但我会去 preg_match 检查验证。你可以做这样的事情。

```
if ( !preg_match ("/^[a-zA-Z\s]+$/",$name)) {
   $errors[] = "Name must only contain letters!";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-09-26T00:28:56.520

一个用于 UTF-8 世界，将匹配来自任何语言的空格和字母。

```
if (!preg_match('/^[\p{L} ]+$/u', $name)){
  $errors[] = 'Name must contain letters and spaces only!';
} 
```

解释：

*   [] => 字符类定义
*   p{L} => 匹配来自任何语言的任何类型的字母字符
*   p{L} => 后的空格匹配空格
*   + => 量词——匹配一次到无限次（贪心）
*   /u => Unicode 修饰符。模式字符串被视为 UTF-16。还会导致转义序列匹配 unicode 字符

这也将与上面 Anthony Hatzopoulos 的评论中提到的*Björk Guðmundsdóttir等名称匹配。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-06T10:56:33.810

```
if (ctype_alpha(str_replace(' ', '', $name)) === false)  {
  $errors[] = 'Name must contain letters and spaces only';
} 
```

# python - 从 Python 检查进程状态

> ID：15346287
> 
> 赞同：6
> 
> 时间：2013-03-11T18:52:28.693
> 
> 标签：python, linux

我在 Linux x86-64 系统上运行。从 Python (2.6) 脚本中，我希望定期检查给定进程（由 pid 标识）是否已变为“已失效”/僵尸（这意味着进程表中的条目存在但进程什么也不做）。知道进程消耗了多少 CPU 也是很好的（类似于“top”命令显示的内容）。

有人可以给我一些关于如何在 Python 中获得这些的指示吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-11T18:56:56.987

我会使用[`psutil`图书馆](https://pypi.python.org/pypi/psutil)：

```
import psutil

proc = psutil.Process(pid)
if proc.status() == psutil.STATUS_ZOMBIE:
    # Zombie process! 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T19:00:35.783

您可以在 python 中获得最佳结果，如下所示：

`linux`：

```
import sys, os
f = os.popen("top -p 1 -n 1", "r")
text = f.read()
print text 
```

**更新**

`windows`：

```
from os  import popen
from sys import stdin

ps = popen("C:/WINDOWS/system32/tasklist.exe","r")
pp = ps.readlines()
ps.close()

# wow, look at the robust parser!
pp.pop(0)       # blank line
ph = pp.pop(0)  # header line
pp.pop(0)       # ===

print ("%d processes reported." % len(pp))
print ("First process in list:")
print (pp[0])

stdin.readline() 
```

# jquery - btn-group 中的引导重置按钮

> ID：15346290
> 
> 赞同：3
> 
> 时间：2013-03-11T18:52:31.467
> 
> 标签：jquery, html, twitter-bootstrap

我正在使用我在 btn 组中的引导按钮。

```
<div class="btn-group">
     <button type="button" class="btn  "data-toggle="button">Item1</button>
     <button type="button" class="btn  "data-toggle="button">Item2</button>
</div> 
```

所以目前（因为我正在使用数据切换），当按下按钮时，它会进入突出显示模式。我现在想要一个清除按钮，当它被点击时，我希望这些按钮被重置。我已经阅读了手册，看到我必须使用：`$().button('reset')`

然而它只是不工作。有人可以帮忙举个例子吗。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T18:56:37.733

这很简单......您只需要调用：

```
$('.btn-group button').removeClass('active'); 
```

这基本上就是您切换代码时代码所做的事情。

# git - .git 子模块文件夹

> ID：15346296
> 
> 赞同：8
> 
> 时间：2013-03-11T18:52:51.533
> 
> 标签：git, github

在一个版本的 git 中，我们有（git version `1.7.4.4`）：

```
ProjectRoot/.git/modules/SubmoduleX/config 
```

但是在另一台计算机上我们有（git版本`1.7.12.4 (Apple Git-37)`）：

```
ProjectRoot/SubmoduleX/.git/config 
```

为什么会出现差异？这个改变是什么时候完成的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-11T19:07:03.637

你有相反的版本吗？

更改是在以下位置引入的`1.7.8`：

> 当使用“git submodule init”填充新的子模块目录时，子模块的 $GIT_DIR 元信息目录在超级项目的 $GIT_DIR/modules// 目录中创建并通过 gitfile 机制引用。这是为了可以在不重新克隆的情况下在树中具有和不具有子模块的超级项目中的提交之间进行切换。

[https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.8.txt](https://github.com/git/git/blob/master/Documentation/RelNotes/1.7.8.txt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T01:28:00.167

Can centralize all metadata in the .git folder in root repository folder.

This is called separate git dir.

# jquery - jQuery - 验证每个循环中的复选框

> ID：15346302
> 
> 赞同：1
> 
> 时间：2013-03-11T18:53:12.730
> 
> 标签：jquery, forms, checkbox

我有一个复选框列表，我给每个复选框一个类。这个想法是强制用户选中所有适用的框，并且必须至少选中一个框。

这是我的逻辑：

```
<form method="post" onsubmit="return validateForm()">
<input type="checkbox" class="chkboxes" name="chkbox1" id="chkbox1"> Text Here<br>
<input type="checkbox" class="chkboxes" name="chkbox2" id="chkbox2"> Text Here<br>
<input type="checkbox" class="chkboxes" name="chkbox3" id="chkbox3"> Text Here<br>
<input name="Submit" type="submit" value="Submit">
</form>

<script language="javascript" type="text/javascript">

function validateForm() {

$(".chkboxes").each(function(){

  if( $(this).is(':checked')==true ){ 
   return true;
  }else{
   alert('Please check at least 1 box');
   return false;
  }

});

}//eof validateForm function

</script> 
```

当我提交表单时，javascript函数被成功调用。但是，它似乎没有认识到任何复选框已被选中。

任何人都可以在我的 javascript 函数中看到任何错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:56:01.167

```
function validateForm() {
  var len = $(".chkboxes:checked").length;
  if ( len === 0 )
     alert('Please check at least 1 box');
  }  
  return len > 0;
} 
```

# php - 将头 php 文件包含到我的索引 php 文件中 - 未生成错误

> ID：15346305
> 
> 赞同：0
> 
> 时间：2013-03-11T18:53:23.143
> 
> 标签：php, javascript, html, dreamweaver

这似乎是一个愚蠢的错误或我对 PHP 基础的完全无知。我在stackoverflow上阅读了一些关于我面临的同样问题的其他问题，但这对我没有多大帮助。

[包含在 php 中](https://stackoverflow.com/questions/6994231/includes-in-php)

[无法使用 include 包含文件 php](https://stackoverflow.com/questions/10901993/unable-to-include-files-php-using-include)

我的问题：

我正在尝试将位于我的“包含文件夹”中的 header.php 文件包含到位于根文件夹中的 index.php 文件中。

index.php 文件内容：

```
</head>

<body id="page1">
    <!--==============================header=================================-->
    <header>
        <?
        include("include/header.php");
        ?>  
    </header><div class="ic"> 
```

在 Dreamweaver 的设计视图中，我可以看到标题已包含在内。但是，当我试图在本地主机（WAMP 服务器）上查看页面时。我看不到标题正在显示，我也没有收到任何错误消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T18:54:46.227

不使用`<?`但是`<?php`

根据您的 Apache 的配置方式，可能无法正常工作。始终避免使用短标签。

# jquery - 模糊/隐藏焦点上的标签

> ID：15346308
> 
> 赞同：1
> 
> 时间：2013-03-11T18:53:27.483
> 
> 标签：jquery, forms, focus, hide, blur

我有这个无法更改的客户表格（由其他人编码） -

```
<p class="postal">
    <label for="postalcode">post code</label>
    <input id="postalcode" name="postalcode" type="text" value=""/>
</p> 
```

现有的 CSS 规定标签设置在输入“内”。所以我需要模糊/隐藏标签。

我已经“猜到”这个标记会起作用，但可惜它没有。

```
$(document).ready(function() {
    $('#postalcode').focus(function() {
       $('label').val('');
    });
}); 
```

我无法更改 CSS 或 HTML，我确信 ateotd 会更容易。

这可能 w/jQuery 吗？

编辑：

感谢所有的答案，你很摇滚！我的查询措辞有误，我希望隐藏/清除标签的文本而不是整个标签。所以我已经“勾选”了有效的答案。

再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T18:57:45.703

`.postal`使用当前对象的父级

**[现场演示](http://jsfiddle.net/Eay4q/)**

```
$(document).ready(function() {
    $('#postalcode').focus(function() {
       $(this).prev('label').text('');
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:57:53.830

标签没有值，它有文本内容，但为什么不在输入焦点时隐藏前一个标签：

```
$(function() {
    $('#postalcode').on('focus', function() {
       $(this).prev('label').hide();
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:58:07.487

像这样的东西会将标签隐藏在焦点上，并在模糊时将其显示出来：

```
$(document).ready(function() {
    $('#postalcode').focus(function () {
        $(this).prev('label').hide();
    })
    .blur(function () {
        $(this).prev('label').show();
    });
}); 
```

[http://jsfiddle.net/MhLsU/](http://jsfiddle.net/MhLsU/)

如果你使用类，你可以使它更通用：

```
$('.field input').focus(function () {
    $(this).prev('label').hide();
})
.blur(function () {
    $(this).prev('label').show();
}); 
```

使用 HTML：

```
<p class="postal field">
    <label for="postalcode">post code</label>
    <input id="postalcode" name="postalcode" type="text" value="" />
</p> 
```

[http://jsfiddle.net/MhLsU/1/](http://jsfiddle.net/MhLsU/1/)

现在它不仅适用于`postalcode`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:03:37.073

如果你想隐藏标签

```
$(document).ready(function() {
    $('#postalcode').focus(function(){$('label').hide();});
}); 
```

# ruby-on-rails - Rails 和 Dropbox

> ID：15346310
> 
> 赞同：1
> 
> 时间：2013-03-11T18:53:34.003
> 
> 标签：ruby-on-rails, ruby, api, dropbox

美好的一天，我正在使用 gem 'rails'、'3.2.12' 和 gem 'dropbox'、:git => 'git://github.com/tonywok/dropbox.git'、:branch => 'v1'在我的应用程序中。如果我打开控制台并执行此操作：

```
@options = (YAML.load_file("#{Rails.root}/config/paperclipdropbox.yml")[Rails.env].symbolize_keys)
@dropbox_key = @options[:dropbox_key]
@dropbox_secret = @options[:dropbox_secret]
@dropboxsession = Dropbox::Session.new(@dropbox_key, @dropbox_secret)
  => #<Dropbox::Session 123123 (unauthorized)>
@dropboxsession.mode = :dropbox
@dropboxsession.authorize_url 
  => "https://www.dropbox.com/1/oauth/authorize?oauth_token=123123"
dropbox_session = @dropboxsession
dropbox_session.authorize
  => true
dropbox_session.upload("#{Rails.root}/config.ru", '/') 
```

我明白了：

```
Dropbox::UnsuccessfulResponseError: HTTP status Net::HTTPForbidden received: https://api-content.dropbox.com/1/files/dropbox
from /home/alexandr/.rvm/gems/ruby-1.9.3-p374/bundler/gems/dropbox-7d060d5932eb/lib/dropbox/api.rb:228:in `upload' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:17:24.057

@dropboxsession.mode = :sandbox 修复了它。:sandbox 和 :dropbox 是什么意思？开发和生产？

# java - ScheduledThreadPoolExecutor 可以同时执行多个任务吗？

> ID：15346311
> 
> 赞同：6
> 
> 时间：2013-03-11T18:53:49.160
> 
> 标签：java, scheduled-tasks

的文档`ScheduledThreadPoolExecutor`说 - 安排在完全相同的执行时间的任务以先进先出 (FIFO) 的提交顺序启用。

这是否意味着应该同时完成的任务永远不会同时完成。相反，它们以先进先出的顺序执行？

如果这是真的，那么我使用哪个类比哪个更好`Timer`，也没有这个 FIFO 问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:03:41.827

ScheduledThreadPoolExecutor 的工作方式是有一个“调度”或主线程来检查要执行的任务。

如果它找到一个任务，它会将它委托给池中的一个“工作”线程。

如果准备好执行多个任务，则它们一次“启动”一个，但根据 Java 的定义，一旦“启动”，后续处理是并发的。

如果您有两个任务都通过执行程序同时安排，则它们完成的顺序可能因运行而异，除非您放入特定的控件，例如锁定、等待等......来处理这个，这取决于 java 的线程调度（java 如何为内核上的线程分配时间）来确定如何以及何时处理什么。请注意，设置此类锁、等待等...是一项看似复杂的任务，容易出现竞争条件，导致意外死锁、活动锁等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T18:56:34.917

这取决于您的线程池的大小。如果您安排 1000 个任务在午夜触发，而您只有 25 个线程，那么最初只能执行 25 个，而其余的必须等待可用线程。这里的FIFO是指执行器将任务交给执行线程的顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:05:24.880

请注意，文档谈论“启用”任务，而我们谈论的是*线程池*执行器。:-)

这意味着任务将等待到指定的时间，然后将它们视为放入普通的 ThreadPoolExecutor 中。如果池中有足够的可用线程，所有这些任务将并行运行。

仅当您的活动任务多于池中的可用线程时，某些任务才必须等待。

# javascript - jquery datepicker beforeShowDay 适用于错误的月份？

> ID：15346321
> 
> 赞同：3
> 
> 时间：2013-03-11T18:54:18.607
> 
> 标签：javascript, jquery, ajax, datepicker

我正在使用 jquery 的 datepicker 来选择日期，并且我想突出显示一些日期 - 但我遇到了**beforeShowDay**的一个奇怪问题。

当页面加载时，似乎加载了 json 数据，但是当我点击输入框并出现 datepicker 时，没有突出显示。在我点击前一个月或后一个月后，上个月的数据被加载（例如点击输入->出现日期选择器->没有突出显示->点击下个月->上个月的数据突出显示）...

我已经用谷歌搜索了很长时间，检查是否在一切之前加载了数据，但不知何故这种行为并没有改变。两个日期选择器都遇到同样的问题。

(jquery-ui datepicker 1.10.1, jquery 1.9.1)

我很高兴每一个提示！

```
var resDates;
var done = false;

function markDate(date) {
    var ret = [true, 'free'];

    if (!done) {
        $.ajax({
            dataType: "json",
            url: "modules/OutShop/getReservations.php",
            data: {item_id: $("#item-id").val()},
            async: false,
            success: function (dates) {
                resDates = dates;
                done = true;
            }
        });
    }

    $.each(resDates, function(key, value) {
        var d = (date.getFullYear() + "-" + ("0" + date.getMonth()).slice(-2) + "-" + ("0" + date.getDate()).slice(-2));
        if (d == value["day"]) {
        //$("body").append("d: " + d + ", v: " + value["day"] + ", s: " + value["status"] + "  ");
        //$("body").append("s: " + value["status"] + "  ");
            if (value["status"] == "1")
                ret = [false, 'marked'];
            else if (value["status"] == "2")
                ret = [false, 'reserved'];
            else
                ret = [true, 'free'];
        }
    });

    return ret;
}

$(document).ready(function() {

    if (!done) {
        $.ajax({
            dataType: "json",
            url: "modules/OutShop/getReservations.php",
            data: {item_id: $("#item-id").val()},
            async: false,
            success: function (dates) {
                resDates = dates;
                //done = true;
            }
        });
    }

    $("#item-datepicker-min").datepicker({
        showButtonPanel: true,
        defaultDate: +3,
        minDate: +3,
        beforeShowDay: markDate,
        onSelect: function(selectedDate) {
            $("#item-datepicker-max").datepicker("option", "minDate", selectedDate);
        }
    });

    $("#item-datepicker-max").datepicker({
        showButtonPanel: true,
        minDate: +3,
        defaultDate: +6,
        beforeShowDay: markDate,
        onSelect: function(selectedDate) {
            $("#item-datepicker-min").datepicker("option", "maxDate", selectedDate);
        }
    });
}); 
```

**编辑** 欲了解更多信息：这是我从 ajax 响应中获得的示例 json 对象。

> [{"status":3,"day":"2013-04-10"},{"status":3,"day":"2013-04-11"},{"status":3,"day ":"2013-04-12"},{"status":3,"day":"2013-04-13"},{"status":2,"day":"2013-04-10"} ,{"status":2,"day":"2013-04-11"},{"status":2,"day":"2013-04-12"},{"status":2,"day ":"2013-04-13"}]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T20:54:45.507

看起来您的月份偏移了 1，javascript 方法 date.getMonth() 返回从零开始的月份（例如，一月是 0，二月是 1）并且您的 PHP 脚本以正常格式返回日期（一月是 1，二月是 2)

检查[这个](http://www.w3schools.com/jsref/jsref_getmonth.asp)

所以如果你改变

```
var d = (date.getFullYear() + "-" + ("0" + date.getMonth()).slice(-2) + "-" + ("0" + date.getDate()).slice(-2)); 
```

到

```
var d = (date.getFullYear() + "-" + ("0" + date.getMonth()+1).slice(-2) + "-" + ("0" + date.getDate()).slice(-2)); 
```

你应该得到正确的月份显示

# racket - Racket Objective-C FFI - 避免重新定义一个类

> ID：15346323
> 
> 赞同：6
> 
> 时间：2013-03-11T18:54:20.410
> 
> 标签：racket

我正在使用 Racket Objective-C FFI 在应用程序中嵌入 WebKit WebView。

为了接收页面加载通知，我在 Racket 中创建了一个新的 ObjC 类，该类被设置为 web 视图的帧加载委托。

该类看起来像：

```
(define-objc-class MyWebFrameLoadDelegate NSObject
  []
  (- _void (webView: [_id wv] didFinishLoadForFrame: [_id wf])
    (send frame set-status-text "Page Loaded"))) 
```

在 DrRacket 中运行代码时，它第一次运行良好。进一步的迭代会导致进程终止：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000020
...
Thread 0 Crashed:: Dispatch queue: com.apple.main-thread
0   libobjc.A.dylib                 0x00007fff8511e299 objc_registerClassPair + 63
1   Racket                          0x00000001002d329c ffi_call_unix64 + 76
2   Racket                          0x00000001002d3eb4 ffi_call + 644
3   Racket                          0x00000001002c612f ffi_do_call + 1599
4   ???                             0x00000001004b50cc 0 + 4299903180
... 
```

...这似乎表明原因是重新定义了 ObjC 类。

是否有使用 FFI 或更通用的 Racket 功能的干净方法来避免重新定义已经存在的类？

我尝试用条件包装`define-objc-class`，但它必须是顶级形式。

我可以下拉到原始的 ObjC 运行时函数并动态定义委托类 - 但最好避免这种情况。

* * *

解决方案 - 将`define-objc-class`a包装起来以在`let`条件内的嵌套范围内定义类：

```
(define MyWebFrameLoadDelegate
  (or (objc_lookUpClass "MyWebFrameLoadDelegate")
      (let ()
        (define-objc-class  MyWebFrameLoadDelegate NSObject
          []
          (- _void (webView: [_id wv] didFinishLoadForFrame: [_id wf])
             (send frame set-status-text "Page Loaded")))
        MyWebFrameLoadDelegate))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T20:28:14.640

我不认为`define-obj-class`必须在顶级使用。但是，它是一种定义形式，因此您不能将其用作表达式。您应该能够执行以下操作：

```
(define MyClass
  (or ___ ;; find the class, if it already exists
      (let ()
        (define-objc-class MyClass ___)
        MyClass))) 
```

顺便说一句，看起来对崩溃行为的修复是在 3 月 7 日提交的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T21:46:55.820

以防万一你错过了：

[https://github.com/shekari/racket-webkit/blob/master/webkit.rkt](https://github.com/shekari/racket-webkit/blob/master/webkit.rkt)

享受，

# ruby-on-rails - 案例陈述评估类未按预期工作

> ID：15346324
> 
> 赞同：2
> 
> 时间：2013-03-11T18:54:27.737
> 
> 标签：ruby-on-rails, ruby, devise, logic, switch-statement

我的 Rails 应用程序中有一些逻辑可以检查 current_user 变量的类类型：

```
logger.debug current_user.class # => Instructor
logger.debug current_user.class == Instructor # => true
case current_user.class
  when Admin
    logger.debug "Admin"
  when Student
    logger.debug "Student"
  when Instructor
    logger.debug "Instructor"
  else
    logger.debug "Guest"
end #=> "Guest" 
```

尽管`Instructor`是类类型（如注释中所示），但 case 语句似乎总是评估 else 后备。有人可以解释为什么吗？只是为了提供一点背景知识，我正在使用 Devise 实现 STI 用户模型设置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:00:42.697

`case curent_user`不是`current_user.class`。_

您的`case`陈述是交叉检查属于您的案例陈述的`current_user.class`类别`Object`。

其次，请注意，`case`您可以这样做：

```
logger.debug current_user.class.name 
```

# c# - 使用多行和组的正则表达式

> ID：15346330
> 
> 赞同：1
> 
> 时间：2013-03-11T18:54:45.777
> 
> 标签：c#, regex, multiline

嗨，伙计们刚刚有一个关于在正则表达式中使用多行的快速问题：

正则表达式：

```
 string content = Regex.Match(onix.Substring(startIndex,endIndex - startIndex), @">(.+)<", RegexOptions.Multiline).Groups[1].Value; 
```

这是我正在阅读的文本字符串：

```
 <Title>
         <TitleType>01</TitleType>
         <TitleText textcase="02">18th Century Embroidery Techniques</TitleText>
    </Title> 
```

这是我得到的：

```
01 
```

我想要的是两者之间的一切

```
 <Title> and </Title>. 
```

当所有内容都在一行上时，这非常有效，但由于从另一行开始，它似乎正在跳过它或不将其包含在模式中。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T18:58:11.573

您还必须使用 Singleline 选项以及 Multiline：

```
string content = Regex.Match(onix.Substring(startIndex,endIndex - startIndex), @">(.+)<", RegexOptions.Multiline | RegexOptions.Singleline).Groups[1].Value; 
```

但是帮自己一个忙，停止使用正则表达式解析 XML！请改用 XML 解析器！

[您可以使用XmlDocument](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)类解析 XML 文本，并使用[XPath 选择器](http://msdn.microsoft.com/en-us/library/ms256086.aspx)获取您感兴趣的元素：

```
XmlDocument doc = new XmlDocument();
doc.LoadXml(...);                              // your load the Xml text 

XmlNode root = doc.SelectSingleNode("Title");  // this selects the <Title>..</Title> element
                                               // modify the selector depending on your outer XML 
Console.WriteLine(root.InnerXml);              // displays the contents of the selected node 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T18:58:45.837

`RegexOptions.Multiline`只会将`^`and的含义更改`$`为行的开头/结尾，而不是整个字符串的开头/结尾。

您想`RegexOptions.Singleline`改用，这将导致`.`匹配换行符（以及其他所有内容）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T18:57:53.693

您可能想要解析可能是 XML 的内容。如果可能，这是首选的工作方式，而不是通过使用正则表达式来解析它。如不适用请忽略。

# ruby - Rails 3: SSL_connect 返回=1 errno=0 state=SSLv3 写证书验证 A: EVP lib

> ID：15346337
> 
> 赞同：2
> 
> 时间：2013-03-11T18:55:01.800
> 
> 标签：ruby, openssl, debian, ssl-certificate

当我尝试运行此代码时

```
require "net/https"                                                  
require "uri"

uri = URI.parse("https://...") # url hidden
pem = File.read("c.pem")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.ca_file = 'ca.pem'
http.cert = OpenSSL::X509::Certificate.new(pem)
http.key = OpenSSL::PKey::RSA.new(pem)
http.verify_mode = OpenSSL::SSL::VERIFY_PEER

request = Net::HTTP::Get.new(uri.request_uri)
response = http.request(request).body

puts response 
```

结果是

```
/home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect': 
SSL_connect returned=1 errno=0 state=SSLv3 write certificate verify A: EVP lib (OpenSSL::SSL::SSLError)
    from /home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `block in connect'
    from /home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:54:in `timeout'
    from /home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/timeout.rb:99:in `timeout'
    from /home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:799:in `connect'
    from /home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:755:in `do_start'
    from /home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:744:in `start'
    from /home/nicolas/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/net/http.rb:1284:in `request' 
```

我正在使用 Debian 和 ruby​​ 1.9.3-p392。当使用 Ubuntu 和 ruby​​ 1.9.3-p392 在其他环境中运行相同的代码时，此代码运行没有问题。

有谁知道我该如何解决这个问题？

# sqlite - NSIS 和 SQLITE 集成

> ID：15346338
> 
> 赞同：1
> 
> 时间：2013-03-11T18:55:06.677
> 
> 标签：sqlite, nsis

我正在使用 NSIS 为 Windows 编写安装程序。安装程序在安装过程中获得的属性很少，它需要更新与安装程序捆绑在一起的 sqlite 数据库中的一个表。是否可以使用 NSIS 更新 sqlite 数据库文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-26T03:44:33.880

替代选项：http: [//sourceforge.net/projects/nsissqliteplug/](http://sourceforge.net/projects/nsissqliteplug/)

```
nsisSqlplugin::executeQuery "sqliteDatabase" "sql_query" 
```

**限制**：目前插件只执行插入和更新查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:42:31.770

似乎没有任何 SQLite 插件。

您的选择是：

1.  编写您自己的插件（为了完整性而包含在内，但几乎可以肯定这不是一个真正的选择）
2.  使用 nsExec 通过命令行界面运行 SQLite 命令。请参阅[NSIS 论坛上的讨论](http://forums.winamp.com/showthread.php?t=338379)
3.  编写一个小应用程序以包含在您的安装程序中，以进行所需的更改

决定可能取决于您对 SQLite 命令行界面的了解程度与编写小应用程序以执行您想要的操作的复杂性。

对于#3，它类似于您对第三方安装程序所做的事情：

```
ReserveFile "myexe.exe"
...
SetOutPath $TEMP
File "myexe.exe"
ExecWait '"$TEMP\myexe.exe" /parameters" 
```

# r - 代数（线性？）函数的特征函数

> ID：15346341
> 
> 赞同：1
> 
> 时间：2013-03-11T18:55:14.470
> 
> 标签：r, matrix, linear-algebra

我想用以下元素创建矩阵 A[i,j,k]：

A[i,j,k] = 0 如果 k+jsi =/= 0

A[i,j,k] = p[s] if k+jsi =0 ( p[s] 是给定向量)

这可以由特征函数写为 p[s]*ð(k+jsi) 或由克罗内克三角函数写为 p[s]*ð(0,k+jsi)。R中是否有任何“内置”功能可以提供 - 我的意思是内置“ð”？

还是我必须自己写？

我想构建函数会非常有用，该函数在 f(x)=0 时返回 1，否则返回 0，至少对于线性 f(x)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:12:39.823

我会将其重写为

```
A[i,j,k] = p[k+j-i] if that exists, otherwise 0 
```

然后可以将其实现为

```
p <- c(1,2,3,4,5)

pfun <- function(x) {
  if (x < 1 | x > length(p)) {
    0
  } else {
    p[x]
  }
}

n <- 5
A <- array(0, c(n, n, n)) 

for (i in 1:n) {
  for (j in 1:n) {
    for (k in 1:n) {
      A[i,j,k] <- pfun(k+j-i)
    }
  }
} 
```

可能有比三重嵌套 for 循环更优雅的东西。

至于你问的功能，很简单

```
as.numeric(f(x)==0) 
```

会工作。

# javascript - javascript复选框：使用按钮将组更改为选中

> ID：15346342
> 
> 赞同：0
> 
> 时间：2013-03-11T18:55:20.457
> 
> 标签：javascript, jquery-mobile, checkbox

我一直在常规网页上使用它（并且它有效/有效），但是当我尝试附加 Jquery（v1.9.1 + jquery mobile v 1.2.0 - 用于按钮样式和其他功能）时，它似乎选择正确的对象（运行 console.log 以查看数组中被抓取的项目），但它不会更新页面中的复选框（使其选中），尽管返回值“true”。当我在这里做我的 jsFiddle 的基础知识时，它也会做同样的事情：http: [//jsfiddle.net/artcase_1/6sasA/2/](http://jsfiddle.net/artcase_1/6sasA/2/)

```
function checkUncheck(name, setTo) {

    var c = document.getElementsByName(name);

    for (var i = 0; i < c.length; i++) {

        if (c[i].type == 'checkbox' || c[i].checked == 'false') {

            c[i].checked = setTo;
        }
    }
}

<!-- in the body: -->
<div data-role="fieldcontain">
    <fieldset data-role="controlgroup" data-type="horizontal">
        <legend>choose a level to view</legend>
        <input name="colors" type="checkbox" class="custom"
        id="redbtn" value="red" checked="checked" />
        <label for="redbtn">High</label>
        <input name="colors" type="checkbox" class="custom" id="yellowbtn"
        value="yellow" />
        <label for="yellowbtn">Med</label>
        <input name="colors" type="checkbox" class="custom" id="bluebtn"
        value="blue" />
        <label for="bluebtn">Low</label>
    </fieldset>
</div>
<input name="Show_all_btn" type="button" id="showall" onclick="checkUncheck('colors','true')"
value="check all" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:05:16.893

我建议将您的 javascript 与您的 HTML 分开，这样您的更新后的 js 将是这样的：

```
var check_all = document.getElementById('showall');

function checkUncheck(name, setTo) {

var c = document.getElementsByName(name);

for (var i = 0; i < c.length; i++) {

    if (c[i].type == 'checkbox' || c[i].checked == 'false') {

        c[i].checked = setTo;
    }
}

}
check_all.addEventListener('click', checkUncheck.bind(null, 'colors', true), false); 
```

这是一个演示[小提琴](http://jsfiddle.net/6sasA/5/)

# http - 为什么创建的段的目标持续时间不是我指定的

> ID：15346347
> 
> 赞同：1
> 
> 时间：2013-03-11T18:55:29.357
> 
> 标签：http, ffmpeg, streaming

我正在使用以下命令

```
ffmpeg -i Apple.ts -map 0:0 -map 0:1 -c copy -f segment -segment_time 10 -segment_list test.m3u8 -segment_format ts 'fileSequence%d.ts' 
```

文件确实被分段，但值不精确。在目标持续时间下方生成的 .m3u8 中看到，但我指定了 10

```
#EXTM3U
#EXT-X-VERSION:3
#EXT-X-MEDIA-SEQUENCE:0
#EXT-X-ALLOWCACHE:1
#EXTINF:11.478100,
fileSequence0.ts
#EXTINF:10.410400,
fileSequence1.ts
#EXTINF:11.745067,
fileSequence2.ts
#EXTINF:7.841167,
fileSequence3.ts
#EXTINF:8.024678,
fileSequence4.ts
#EXT-X-TARGETDURATION:12
#EXT-X-ENDLIST 
```

另外，如果我不想要浮点持续时间，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T02:44:35.967

要获得严格的持续时间，您需要确保您的输入文件已使用严格的 I 图像速率进行编码。确保您已将关键帧间隔设置为 10 秒，并将 sc_threshold 设置为 0，同时对原始 mp4.with ffmpeg 进行编码。然后运行您的分段命令。这将为您提供精确的 10 秒段。否则 ffmpeg 将尝试在 10 秒左右（或您给出的任何持续时间）在我想象的它可以找到的关闭时减少。

# php - 在 codeigniter 中按 url 参数搜索

> ID：15346353
> 
> 赞同：0
> 
> 时间：2013-03-11T18:55:55.867
> 
> 标签：php, codeigniter, url, search

我有观点：

```
 <?php echo form_open_multipart('search/item');?>
    <input type='text' name='search' value="<?php echo set_value('search')?>">
    <input type="submit" name="search_submit" value='Suchen'>
   </form> 
```

我的控制器看起来像但不工作：

```
 public function item($search=''){

        if($search == '' &&  $this->input->post("search") != ""){
            $search = urlencode($search);
            header("Location:".site_url()."/search/item/$search");
        }

        $search = urldecode($search);
        echo "suchen fur".$search;
    } 
```

如何使控制器通过诸如 mysite.com/search/item/search+text 之类的 url 获取搜索文本并显示结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:20:07.833

```
$this->load->helper('url'); 
$search_term = $this->uri->segment(3);
redirect("/search/item/" . $search_term); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T18:58:17.177

您将使用[URI 类](http://ellislab.com/codeigniter/user-guide/libraries/uri.html)

```
$search_term = $this->uri->segment(3);
// for mysite.com/search/item/search+text
// $search_term would be "search text" 
```

# apache-flex - 使用 HTTP 请求 flex 3.2 应用程序加载数据时出现不规则的安全错误

> ID：15346357
> 
> 赞同：0
> 
> 时间：2013-03-11T18:56:03.593
> 
> 标签：apache-flex, actionscript, httprequest

我有一个为客户工作了 2 年的应用程序。突然它停止工作，我将其追溯到一个“安全错误”，当我尝试从一个从 mysql DB 读取数据的 php 脚本中获取数据时，我得到了这个错误。似乎数据（文本字段中的选项卡）触发了该事件，但它在各种客户端上是不规则的。有时有效，有时无效。脚本没问题，从浏览器中的常规 HTTP 请求中获取数据工作正常。有没有人认识到这种行为？我不知所措。错误是这样的：

无法从服务器加载任何日期！[FaultEvent fault=[RPC Fault faultString="访问 url 的安全错误" faultCode="Channel.Security.Error" faultDetail="Destination: DefaultHTTP"] messageId="6D8CAADA-D95F-F30D-0C2A -5AC1F3061A23" type="fault" 气泡=false 可取消=true eventPhase=2]

我读的脚本在这里：

[http://www.arti.nl/flyer/services/exhibitions.php](http://www.arti.nl/flyer/services/exhibitions.php)

使用它的应用程序是“传单”应用程序，您可以通过单击此站点议程中的红色三角形来触发：

www.arti.nl。

非常感谢 ！

乔纳森

# java - Java中的BigDecimal到字符串

> ID：15346359
> 
> 赞同：0
> 
> 时间：2013-03-11T18:56:15.163
> 
> 标签：java, apache-poi

我需要将 BigDecimal 值转换为字符串。我做了如下：

```
 @Column(name="CASE_ID", precision=22, scale=0)
public BigDecimal getCaseId() {
    return this.caseId;
}

public void setCaseId(BigDecimal caseId) {
    this.caseId = caseId;
}    String caseId = "";

caseId = vList.get(i).getCaseId().toString();
dataCell.setCellValue(caseId); 
```

我得到一个运行时异常，如下所示：

> 2013-03-11 14:49:11,046 WARN [HTTPThreadGroup-4] org.apache.struts.action.RequestProcessor：抛出未处理的异常：类 java.lang.ClassCastException
> 
> 包装异常：

```
java.lang.ClassCastException: [Ljava.lang.Object;
    at com.report.getExport(ExportToExcelAction.java:468)
    at com.report.getExport.view(ExportToExcelAction.java:134)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:280)
    at gov.pbgc.spectrum.util.SpectrumLookupDispatchAction.execute(SpectrumLookupDispatchAction.java:119)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:763) 
```

我知道`toString()`转换`BigDecimal`为`String`. 我没有得到编译时异常，但确实得到了运行时异常。有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:47:03.640

好的..然后按以下方式更改您的代码：

`caseId = ((CsValidateReport)vList.get(i)).getCaseId();`
而不是这一行：

`String caseId = "";`使用`String sCaseId = "";`然后你可以进行如下操作：

```
caseId = ((CsValidateReport)vList.get(i)).getCaseId();
sCaseId = caseId.toPlainString() ;
dataCell.setCellValue(sCaseId ); 
```

# gcc - 为多线程、linux、gcc编译FFTW3

> ID：15346360
> 
> 赞同：1
> 
> 时间：2013-03-11T18:56:18.067
> 
> 标签：gcc, parallel-processing, openmp, fftw

我正在尝试使用 GCC 在我的 linux 机器上编译 FFTW (3.3)。我没有使用多线程，一切都很好。现在我想切换到使用 OpenMP 和多线程。因此，我按照以下说明重新编译 FFTW3 以用于线程：

[http://www.fftw.org/doc/Installation-on-Unix.html#Installation-on-Unix](http://www.fftw.org/doc/Installation-on-Unix.html#Installation-on-Unix)

```
sudo ./configure CFLAGS=-enable-threads
sudo make
sudo make install 
```

如果我然后搜索 fftw3_threads.h 库，我找不到：

```
find / -name fftw3_*
.... nothing 
```

如果我尝试编译并启用openmp，这也是一样的

```
sudo ./configure CFLAGS=-enable-openmp
sudo make
sudo make install 
```

编译器不会失败。一切似乎都在工作。但是，当我尝试包含任何一个库时，我的代码将无法编译。

```
#include <fftw3_threads.h>
#include <fftw3_omp.h> 
```

我收到“错误没有这样的文件或目录”

所以，几个问题：

1.) 为什么在列出 CFLAGS 时我只需要一个“-”符号？为什么 FFTW 手册列出所有以“--”开头的标志。（我意识到这可能不是与 FFTW 相关的问题）。

2.）我做错了什么？

3.) 我从手册中看到，“默认情况下，不编译线程例程。” 如果我从代码中省略“包含”，它会编译并且这些方法不会产生错误：

```
int dummy = fftw_init_threads();
fftw_plan_with_nthreads(omp_get_max_threads()); // setup for multithreading 
```

即使它们应该产生故障，对吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:05:47.023

enable-openmp 和 enable-threads 不是 CFLAGS。试试这个：

```
sudo ./configure --enable-openmp
sudo make
sudo make install 
```

# c# - WebClient - 获取错误状态代码的响应正文

> ID：15346362
> 
> 赞同：22
> 
> 时间：2013-03-11T18:56:26.500
> 
> 标签：c#, webclient, bad-request

我基本上在寻找这里问的同样的事情： [当服务器返回错误时，任何方法可以使用 WebClient 访问响应正文？](https://stackoverflow.com/questions/8381576/any-way-to-access-response-body-using-webclient-when-the-server-returns-an-error)

但到目前为止还没有给出答案。

服务器返回“400 错误请求”状态，但带有详细的错误说明作为响应正文。

关于使用 .NET WebClient 访问该数据的任何想法？当服务器返回错误状态代码时，它只是抛出异常。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-11T19:53:41.970

您无法从 webclient 获取它，但是在您的 WebException 上，您可以访问将其转换为 HttpWebResponse 对象的响应对象，并且您将能够访问整个响应对象。

有关详细信息，请参阅[WebException](http://msdn.microsoft.com/en-us/library/system.net.webexception.response.aspx)类定义。

下面是来自 MSDN 的示例（为清楚起见，添加了阅读 Web 响应的内容）

```
using System;
using System.IO;
using System.Net;

public class Program
{
    public static void Main()
    {
        try {
            // Create a web request for an invalid site. Substitute the "invalid site" strong in the Create call with a invalid name.
            HttpWebRequest myHttpWebRequest = (HttpWebRequest) WebRequest.Create("invalid URL");

            // Get the associated response for the above request.
            HttpWebResponse myHttpWebResponse = (HttpWebResponse) myHttpWebRequest.GetResponse();
            myHttpWebResponse.Close();
        }
        catch(WebException e) {
            Console.WriteLine("This program is expected to throw WebException on successful run."+
                              "\n\nException Message :" + e.Message);
            if(e.Status == WebExceptionStatus.ProtocolError) {
                Console.WriteLine("Status Code : {0}", ((HttpWebResponse)e.Response).StatusCode);
                Console.WriteLine("Status Description : {0}", ((HttpWebResponse)e.Response).StatusDescription);
                using (StreamReader r = new StreamReader(((HttpWebResponse)e.Response).GetResponseStream()))
                {
                    Console.WriteLine("Content: {0}", r.ReadToEnd());
                }
            }
        }
        catch(Exception e) {
            Console.WriteLine(e.Message);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2018-01-28T17:11:04.453

您可以像这样检索响应内容：

```
using (WebClient client = new WebClient())
{
    try
    {
        string data = client.DownloadString(
            "http://your-url.com");
        // successful...
    }
    catch (WebException ex)
    {
        // failed...
        using (StreamReader r = new StreamReader(
            ex.Response.GetResponseStream()))
        {
            string responseContent = r.ReadToEnd();
            // ... do whatever ...
        }
    }
} 
```

测试：在.Net 4.5.2上

# c# - 无法找到表单身份验证的 cookie

> ID：15346366
> 
> 赞同：1
> 
> 时间：2013-03-11T18:56:36.310
> 
> 标签：c#, asp.net, cookies

我有两个页面 login.aspx 和 cookie.aspx

当用户登录时，假设创建一个 cookie 并重定向到 cookie.aspx。当 cookie.aspx 加载时，它会检查 cookie 是否存在。

这是我的 login.aspx 登录代码

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
{
    userName = Login1.UserName;
    passWord = Login1.Password;

    athUser = DirectoryServicesProcessor.Verify_User(userName, passWord);
    if (athUser == true)
    {
        //FormsAuthentication.SetAuthCookie(userName, false);
        bool IsPersistentCookie = true;
        DateTime expirationDate = new DateTime();
        if (IsPersistentCookie)
            expirationDate = DateTime.Now.AddYears(1);
        else
            expirationDate = DateTime.Now.AddMinutes(300); 

        FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
            1,
            userName,
            DateTime.Now,
            expirationDate,
            IsPersistentCookie,
            userName,
            FormsAuthentication.FormsCookiePath);

        string et = FormsAuthentication.Encrypt(ticket);
        HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, et);
        if (IsPersistentCookie)
            cookie.Expires = ticket.Expiration;
        cookie.Name = ".AUTH";
        cookie.Domain = ".mydomain.com";
        Response.SetCookie(cookie);
        Response.Cookies.Add(cookie);

        Response.Redirect("~/cookietest/cookie.aspx");
    } 
```

这是我的 cookie.aspx 页面加载

```
protected void Page_Load(object sender, EventArgs e)
{
    HttpCookie cookie = HttpContext.Current.Request.Cookies.Get(FormsAuthentication.FormsCookieName);

    if (cookie != null)
    {
        FormsAuthenticationTicket ticket = FormsAuthentication.Decrypt(cookie.Value);

        if (ticket != null)
        {
            WhatHappened.Text = "Found the cookie!";
        }
        else
        {
            Response.Redirect("../failure.aspx");
        }
    }
    else
    {

        Response.Redirect("../failure.aspx");
    }

} 
```

我想知道为什么 cookie.aspx 找不到在 login.aspx 中创建的 cookie。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T18:58:37.593

我会`FormsAuthentication.FormsCookieName`用来设置cookie名称。

```
cookie.Name = FormsAuthentication.FormsCookieName; 
```

对我来说，这设置为`.ASPXAUTH`not `.AUTH`。

# html - 无论位置如何，使 DIV 全屏显示

> ID：15346371
> 
> 赞同：0
> 
> 时间：2013-03-11T18:56:49.753
> 
> 标签：html, css

有没有办法让 DIV 全屏显示，无论它位于 HTML 页面中的什么位置？在某些页面中，我希望 DIV 覆盖其后面的所有内容，但如果正文只是屏幕的一半，我的 DIV 也会变成屏幕的一半而不是全屏。

我使用这个 CSS：

```
.MainOverlayDIV{
width:100%;
height:100%;
z-index:90;
position:fixed;
top:0%;
left:0%;
background-color:#F1F2F3;
opacity:0.9;
display:none;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:00:48.203

```
.MainOverlayDIV{    
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    position: fixed;
    z-index: 100500;
} 
```

# ajax - IE8 中异步 JavaScript 加载后的空白缓存条目

> ID：15346374
> 
> 赞同：1
> 
> 时间：2013-03-11T18:56:59.983
> 
> 标签：ajax, caching, internet-explorer-8, modernizr, yepnope

我在我的一个项目中使用 Modernizr。我想在下载 polyfill 之前测试占位符的存在。这是我用来完成此操作的代码：

```
yepnope({
    test : Modernizr.input.placeholder,
    nope : '/js/jquery.placeholder.js',
    complete: function(){
        $('input, textarea').placeholder();
    }
}); 
```

我遇到了一个奇怪的问题。当我在没有从缓存加载任何资源的情况下点击页面时，它可以完美运行，但是如果我刷新页面，我会收到调用 .placeholder() 的未定义方法错误。

查看开发工具，一个空的 jquery.placeholder.js（来自缓存）似乎是罪魁祸首。我可以在 Fiddler 中验证第二个响应是否返回 304，并发送一个空正文，这意味着 IE 缓存中应该有正确的版本，但不知何故它是空的。什么可能导致这种行为？

**编辑：**如果我将 placeholder.js 添加到头部，则一切正常。只是想我会指出这一点。

# java - Java 将组件添加到 JOptionPane

> ID：15346377
> 
> 赞同：2
> 
> 时间：2013-03-11T18:57:20.213
> 
> 标签：java, swing, joptionpane

我正在尝试为简单的数据输入对话框创建一个自定义面板。我创建了一个自定义面板，我在其中添加了标签和文本字段。我正在尝试将其添加到 JOptionPane 以进行显示。

当我调用它时，我的组件不会显示，但 JOptionPane 按钮会显示。这样做的正确方法是什么？提前致谢！！

这是我创建自定义面板并调用 JOptionPane 的地方：

```
 public class ListenCustEdit implements ActionListener {
    @Override
    @SuppressWarnings("empty-statement")
    public void actionPerformed(ActionEvent e) {
        TestPanel panel = new TestPanel();
        int input = JOptionPane.showConfirmDialog(frame, panel, "Edit Customer:"
                        ,JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE);
        if (input == 0) {
            // OK
            JOptionPane.showMessageDialog(frame,"Changes savewd");
        } else {
            // Cancel
            JOptionPane.showMessageDialog(frame, "No changes were saved");
        }
    }
} 
```

这是我的自定义面板类：

```
public class TestPanel extends JPanel {

JTextField custIdTextField;
JTextField companyTextField;
JTextField firstNameTextField;
JTextField lastNameTextField;

public TestPanel() {
    initUI();
}

public final void initUI() {

    // create the panel and set the layout
    JPanel main = new JPanel();
    main.setLayout(new GridLayout(4,4));

    // create the labels
    JLabel custIdLabel = new JLabel("Cust Id: ");
    JLabel companyLabel = new JLabel("Company: ");
    JLabel firstNameLabel = new JLabel("First Name: ");
    JLabel lastNameLabel = new JLabel("Last Name: ");

    // create the text fields
    custIdTextField = new JTextField();
    companyTextField = new JTextField();
    firstNameTextField = new JTextField();
    lastNameTextField = new JTextField();

    // add componets to panel
    main.add(custIdLabel);
    main.add(custIdTextField);
    main.add(companyLabel);
    main.add(companyTextField);
    main.add(firstNameLabel);
    main.add(firstNameTextField);
    main.add(lastNameLabel);
    main.add(lastNameTextField);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:07:55.763

您需要将主面板添加到您的 TestPanel。

```
public final void initUI() {
    // ...
    add(main);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T19:09:58.523

在 initUI 中，您创建一个 JPanel（称为“main”）并将其塞满组件，但不对其进行任何操作。您需要将“main”添加到 TestPanel 的实际实例中，或者完全跳过创建“main”面板的步骤。

第一种方式：

```
public final void initUI() {
    // ... everything as before, then 
    this.add(main);
} 
```

第二种方式：

```
public final void initUI() {
    this.setLayout(new GridLayout(4,4));

    // create the labels
    JLabel custIdLabel = new JLabel("Cust Id: ");
    JLabel companyLabel = new JLabel("Company: ");
    JLabel firstNameLabel = new JLabel("First Name: ");
    JLabel lastNameLabel = new JLabel("Last Name: ");

    // create the text fields
    custIdTextField = new JTextField();
    companyTextField = new JTextField();
    firstNameTextField = new JTextField();
    lastNameTextField = new JTextField();

    // add componets to panel
    this.add(custIdLabel);
    this.add(custIdTextField);
    this.add(companyLabel);
    this.add(companyTextField);
    this.add(firstNameLabel);
    this.add(firstNameTextField);
    this.add(lastNameLabel);
    this.add(lastNameTextField);
} 
```

（“this.”并不是绝对必要的，但我添加它们是为了说明。）

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:08:17.013

您没有在构造函数中将主 Panel 添加到 TestPanel 实例。

# c# - 是否可以在 C# 中从本机 C++ 类创建变量？

> ID：15346381
> 
> 赞同：0
> 
> 时间：2013-03-11T18:57:41.077
> 
> 标签：c#, c++, .net, visual-c++, c++-cli

有两个单独的项目试图像这样进行通信：
我在 C++ CLI 中有以下**本地类**

```
public class Data{
    public:
    int x;
} 
```

通过导入，我的意思是在我的 C# 项目中添加了对 C++ CLI 项目的引用。
另一方面，我将此 C++ CLI 项目导入到我的 C# 项目中，并且在 C# 中我想做：

```
Data k = new Data() //It's ok till here
int b = k.x; //The field x is not visible here ! 
```

有没有办法强制 C# 或 C++ CLI 共享字段和方法？
*编辑：C# 也假设`class data`为`struct`!*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:06:32.503

我想你需要把它变成一个`ref class`.

```
public ref class Data{
    public:
    int x;
} 
```

C# 无法`Data`以您现在的方式构建。它不在托管堆上。`ref`将使其显示在托管堆上。如果您想`Data`保持不受管理，则必须编写一个包装器。

# android - 无法在 Eclipse 中创建新的 android 应用程序项目，但可以导入并运行现有的

> ID：15346384
> 
> 赞同：0
> 
> 时间：2013-03-11T18:57:48.733
> 
> 标签：android, eclipse, eclipse-adt, new-project

如果我在 Eclipse 中导入现有的 android 项目，它可以工作。但是，当我尝试创建新的 android 项目时，直到最后一个屏幕都可以正常工作，但在最后一个屏幕上，即使我按下完成按钮，对话框仍然保持原样，不会被关闭。在后台也创建了项目，包含所需的文件夹或包，但所有文件夹和包都是空白的。

![在此处输入图像描述](../Images/fb9d6df7875d655de5c15bf62c7f6604.png)

例如，在屏幕截图中，我正在尝试创建名为 Test 的项目，当我单击完成时，它会在背景中创建（红色）。

此外，还有一个名为 Hi 的项目在背景（红色）中带有空文件夹和包。

我正在使用 Helios（日食）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:29:32.530

在过去一年左右的时间里，我在让 SDK 在 Helios 中正常工作时遇到了很多麻烦，最终不得不升级。

我要么下载更新版本的 eclipse，要么直接去 android sdk 下载页面下载他们的 SDK+eclipse 包。

# paypal - 无法登录 Paypal 沙箱

> ID：15346391
> 
> 赞同：2
> 
> 时间：2013-03-11T18:58:10.043
> 
> 标签：paypal, paypal-sandbox

免责声明：此问题专门针对 Paypal 论坛。

我有两个沙盒测试帐户。parijat_kalia@hotmail.com（个人）和 parijat_kalia-facilitator@hotmail.com（商业）。第二个有 API 凭证，我正在使用 NVP API 来测试我们的电子商务订阅计划

. 我得到的响应是：10501: Invalid Configuration 由于商家配置无效，无法处理此交易。在计费协议被禁用或不活动时发生。

因此，要激活它，我假设我需要使用此沙盒帐户登录沙盒网站以激活计费协议。我遵循的步骤非常基本。

1.  登录 developer.paypal.com
2.  单击水平菜单中的应用程序选项卡
3.  单击垂直菜单中的沙盒帐户
4.  单击特定帐户“parijat_kalia-facilitator@hotmail.com”下拉箭头按钮。
5.  点击沙盒网站

当我单击沙盒站点时，它会加载到电子邮件中的个人帐户中，即“parijat_kalia@hotmail.com”。我显然改变了这一点，并尝试使用企业帐户凭据登录。但是，它不会让我登录。密码改了，直接复制粘贴，还是不行。删除 cookie/清除缓存和终止历史记录也没有帮助。另外，我使用的是 Chrome，而不是 IE。

此外，我认为此错误与 Paypal 的沙盒网站有关，因为 API 调用在技术上使用凭据登录我（我推断这是因为我收到错误 10501）。

你能告诉我出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:02:22.340

前几天我遇到了类似的问题。我试图从一个开发者帐户切换到另一个开发者帐户，但它一直让我作为第一个帐户登录。因此，我无法将任何沙盒帐户用于第二个帐户。

我通过在 chrome (ctrl+shift+N) 中切换到隐私浏览模式并以这种方式登录来绕过这个问题。

我不能保证这会解决您的问题，因为它与我的不同，但它可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T00:32:38.817

Misplacedme 的回答对我有用，但我还没有足够的代表，所以我会回复并添加一些信息。

Chrome：使用隐身窗口（ctrl+shift+N）

Opera：使用新的私人窗口（ctrl+shift+N）

IE：不需要特殊的窗口。它像以前一样工作。

Firefox：不需要特殊的窗口。它像以前一样工作。

Safari：不需要特殊的窗口。它像以前一样工作。

注意：这些都在 Windows 8 PC 上（抱歉，我知道大多数头脑正常的人都没有使用 win8，更不用说开发人员了）

# php - 用户使用 Facebook 登录时，Foursquare 应用程序身份验证重定向不起作用

> ID：15346397
> 
> 赞同：1
> 
> 时间：2013-03-11T18:58:22.917
> 
> 标签：php, api, oauth, oauth-2.0, foursquare

当我的应用程序尝试使用[https://developer.foursquare.com/overview/auth](https://developer.foursquare.com/overview/auth)中描述的“代码流”对 Foursquare 用户进行身份验证时，当他或她尚未登录 Foursquare 时，它​​会提示他或她登录以继续。没关系。

之后，当用户使用用户名/密码登录时，流程会按预期继续，但是，如果用户决定使用他/她的 Facebook 帐户登录，则应用程序的授权流程会中断，将用户引导至 Foursquare 主页。

有没有办法避免这种情况？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T23:35:21.720

感谢您提出问题 - 现在应该已解决此问题，您的用户将能够在 OAuth 流程中使用 Facebook 登录。

# ios - 设置可达性以监控连接并显示警报

> ID：15346398
> 
> 赞同：0
> 
> 时间：2013-03-11T18:58:29.807
> 
> 标签：ios, ios5, uialertview, reachability

我想要实现的是监控任何互联网连接？所以手机需要主动连接到互联网。如果它确实显示一个 UIAlertView 并带有重试选项（再次尝试连接以查看它是否已更改）。

我正在尝试使用可达性和连接到 api.parse.com 链接。

在我的 AppDelegate 中，我这样调用 Reachability 的设置：

```
// Use Reachability to monitor connectivity
[self monitorReachability]; 
```

monitorReachability 设置如下：

```
- (void)monitorReachability {
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reachabilityChanged:) name:ReachabilityChangedNotification object:nil];

self.hostReach = [Reachability reachabilityWithHostName: @"api.parse.com"];
[self.hostReach startNotifier];

self.internetReach = [Reachability reachabilityForInternetConnection];
[self.internetReach startNotifier];

self.wifiReach = [Reachability reachabilityForLocalWiFi];
[self.wifiReach startNotifier]; 
```

}

我也有如下的可达性更改方法：编辑 - 更新方法

```
- (void)reachabilityChanged:(NSNotification* )note {
Reachability *curReach = (Reachability *)[note object];
NSParameterAssert([curReach isKindOfClass: [Reachability class]]);
NSLog(@"Reachability changed: %@", curReach);
networkStatus = [curReach currentReachabilityStatus];

if (networkStatus == NotReachable) {
    NSLog(@"NOT REACHABLE");
    return;
} else {
    NSLog(@"REACHABLE");
} 
```

我想了解的是回复。从上面看起来我有一个指向当前状态的指针，我不知道如何使用它。基本上我想要一个 if 语句来检查该链接是否可以通过 Internet 连接访问，如果不是，我可以通过 AlertView。然后，我可以为 UIAlertView 设置一个布尔值以使用，即显示ConnectionAlert，然后可以在连接更改和拾取时将其关闭。我也不确定该放在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:34:06.433

使用 Reachability 类的最简单方法之一是将 Reachability.h 导入您的 rootViewController 或任何需要连接的人，然后只需运行此代码...

```
 Reachability *reach = [Reachability reachabilityForInternetConnection];

 NetworkStatus netStatus = [reach currentReachabilityStatus];    
 if (netStatus == NotReachable) {        
 NSLog(@"No internet connection!");   
//Alert View in here      
} 
else {        
//Do something in here with the connecion e.g:

[self performSelector:@selector(startNSURLRequest) withObject:nil afterDelay:30.0];

} 
```

那应该稍微简化一下过程..让我知道您的进展情况。吨

# protege4 - Protege 4.2 中的 OWL VIZ 错误

> ID：15346400
> 
> 赞同：2
> 
> 时间：2013-03-11T18:58:34.240
> 
> 标签：protege4

我已经使用 Protege 网站上发布的最新版本 Protege 4.2 构建了我的阿拉伯语本体，但是当我尝试使用 OWL VIZ 选项卡查看 VIZ 图形时，它引发了以下错误

```
TokenMgrError: Lexical error at line 1, column 195\.  Encountered: "\u062a" (1578), after : "\" 
```

有没有办法克服这个问题？我需要为我的阿拉伯语本体展示 Viz Gaph

注意：GraphViz 2.28 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T21:38:49.853

我有同样的问题。通过删除现有的 GraphViz 安装 (2.30.1) 并安装 GraphViz 2.26.3 来修复它。确保在 Protege 的 GraphViz 选项中更新点的位置，以便它可以在新位置找到它。之后它起作用了。

另见 [http://protege-ontology-editor-knowledge-acquisition-system.136.n4.nabble.com/can-t-start-OWLViz-in-Protege-4-1-with-GraphViz-2-30- td4657364.html](http://protege-ontology-editor-knowledge-acquisition-system.136.n4.nabble.com/can-t-start-OWLViz-in-Protege-4-1-with-GraphViz-2-30-td4657364.html)

史蒂夫

# c# - 来自 ZombieCheck 的 Linq DataContext SubmitChanges InvalidOperationException

> ID：15346402
> 
> 赞同：5
> 
> 时间：2013-03-11T18:58:38.783
> 
> 标签：c#, linq, sql-server-2008, datacontext

尝试使用LinqToSql`InvalidOperationException`添加行时出现问题。我们不能在内部复制它，而且只有我们的一个客户会发生大约 0.06%，总是对数据库进行相对简单的更改。（单行插入，或单字段更新）

```
Message:
   This SqlTransaction has completed; it is no longer usable.
Stack Trace:
   at System.Data.SqlClient.SqlTransaction.ZombieCheck()
   at System.Data.SqlClient.SqlTransaction.Rollback()
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode) 
```

这是一段示例代码（数据库自动生成主键）

```
TableName row = new TableName();
row.Description = "something";
row.Action = "action";
Context.TableName.InsertOnSubmit(row);
Context.SubmitChanges(); 
```

我们使用 SQL Server 2008 R2。插入和更新确实在服务器上进行。但我们仍然得到例外。没有什么可以阻止这些更新和插入的发生。没有依赖或其他东西。

我们如何阻止这些异常/僵尸检查/回滚的发生，或者首先是什么导致它们？

**编辑：**

经过进一步检查，由 SubmitChanges() 完成的数据库更新实际上正在发生。事务成功完成后将调用此异常，并将数据库行更新为新值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:12:54.993

需要注意的一件事是，LinqToSql（和 EntityFramework）将默认分配`null`给`DateTime`数据对象中的字段，因此如果您的表有一个`datetime`字段，如果数据上下文尝试插入该空值，它将在插入时引发异常。

您可以通过使用`datetime2`MSSQL 中的类型（这将允许`DateTime`对象的“null”值 - ）或在插入/更新之前`01/01/0001`手动为数据对象的字段分配有效日期来解决此错误。`DateTime`

如果没有更详细的堆栈跟踪，这是唯一能想到的明显问题。HTH。

**编辑：**

看起来这并不少见：[http ://connect.microsoft.com/VisualStudio/feedback/details/588676/system-data-linq-datacontext-submitchanges-causes-invalidoperationexception-during-rollback#details](http://connect.microsoft.com/VisualStudio/feedback/details/588676/system-data-linq-datacontext-submitchanges-causes-invalidoperationexception-during-rollback#details)

根本问题似乎是 LinqToSql 使用的内部 ADO 逻辑并未真正正确配置以处理事务回滚。据我所知，唯一真正的解决方案是向 LinqToSql 提供一个事务对象并自己管理回滚，这看起来并不那么吸引人。

# html - JSP/HTML UI设计

> ID：15346408
> 
> 赞同：0
> 
> 时间：2013-03-11T18:58:46.677
> 
> 标签：html, jsp, tomcat

我们有一些 JSP 代码要在我们的页面中运行。

有一个 UI 设计师会不断更新 UI，但没有 Tomcat 服务器。我们更喜欢他不这样做，因为他不是程序员。

但是，每次更新 UI 时都必须剪切和粘贴 JSP 相关代码，这很烦人。

有没有办法处理这个问题？我们更喜欢保留相同的文件，但仍然保留它，这样他就可以看到他的 UI 工作而不必担心 JSP，并且当他签入新文件时，我们不必剪切和粘贴与 JSP 相关的代码。

此类代码的一个示例是根据用户显示某些导航菜单项。

我们正在使用 Tomcat 身份验证。我们可以假设使用 AJAX 来获取用户信息，但是这样安全吗？应用程序中的所有其他内容都是 AJAX。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:10:01.740

这里的问题是这个人没有与团队合作。相反，他正在为他们创造工作……而且是双向的。继续阅读。

我既负责前端开发，也负责管理前端开发。如果这个 UI 人员在我的团队中，我会强迫他设置一个 Tomcat 服务器。他只是需要学习一些东西。

实际上，如果实施得当，JSP 与任何其他用于视图的服务器端标记语言没有太大区别，例如 Rails + ERB、PHP、.NET 等……甚至是 Javascript 模板引擎（mustache、handlebars 等）。相同的条件检查、for-loops、auth 检查——所有需要的基本视图层逻辑都是可用和可用的。

如果他在 Java 项目/团队中，他需要学习 Java 前端。就是这么简单。

他的主要任务应该是基本的，坦率地说，他甚至不需要安装 Java IDE 来完成这些任务。他们是：

1.  获取/推送源代码 + 分析差异（任何源代码控制客户端）
2.  构建/部署最新到他的本地环境（脚本或 .bat 文件）
3.  处理正在运行的应用程序*

(*) 最后一部分是事情变得棘手的地方。如果您直接在正在运行的服务器上工作，然后在复制更新之前意外地运行了新的部署，那么您就完蛋了。如果您使用符号链接（在 Windows 中也可用），则可能存在仅在编译后出现的文件，或者在获取最新代码时出现锁定或同步问题 - 所有这些都会产生问题。

我发现效果最好的方法是在代码仓库位置（预构建）上工作，并创建两个脚本：

1.  Build+deploy - 停止运行服务器，清除目录和缓存，构建最新版本，并重新部署
2.  更新 - 将视图文件和任何其他必要的目录与部署目标同步。您必须确保在 Tomcat 配置中禁用热部署，否则会出现内存泄漏错误。

* * *

也就是说，现在应该很明显了：Java 是开发 UI 最困难的生态系统之一。编译的性质和复杂的环境要求使开发变得缓慢而乏味，并且严重依赖于不同的人或系统来制作像样的产品。

JSP 本身，虽然如上所述，但几乎总是组织得很糟糕，有各种包含、标记文件、部分、框架的方式——它成为 UI 人员最糟糕的噩梦。GSP（来自 Grails）解决了很多组织问题，但需要开发团队的灵活性。即使这样，它也不是一个“理想”的解决方案。

JSP 语法 - JSTL、C:tags 等造成了更大的麻烦。不编程的前端人员不使用 IDE，因此在编写或自定义条件逻辑或循环时无法查找方法、对象、参数等。开发团队可以通过在页面上预先写出这些来提供帮助，但任何时候需要更改或增强，都需要会议、对话和妥协。

从长远来看，您应该将 Java 应用程序从一个单独的、更灵活、功能更强大的前端技术堆栈中抽象出来，使用基于 REST/JSON 的服务在两者之间进行对话。（旁注：对于具有规模的性能/应用程序，请确保您使用的是自定义协议或 Web 套接字）。

我的首选是 node.js，因为前端开发人员可以坚持使用他们最熟悉的语言：Javascript / JSON。但这可能是您的特定前端感到满意并且可以进行设计的任何东西。

关键是要消除前端和后端的瓶颈。两个轨道都应该能够快速开发和迭代，而 RESTFUL API 是协作的关键点。

最后，对于那些有抱负的前端开发人员/设计人员但只了解 Java（或其他一些服务器端技术）的人，我挑战你学习新东西。面向用户的技术处于不断变化的状态，最近这种变化加速了。如果您想拥有具有 UI 竞争力的产品，您需要投资于使它们具有竞争力的技术。

# c#-4.0 - 是否可以使用 Autofac 将已解析对象的列表注入构造函数？

> ID：15346415
> 
> 赞同：18
> 
> 时间：2013-03-11T18:59:13.383
> 
> 标签：c#-4.0, collections, autofac, code-injection

我是 Autofac (3) 的新手，我正在使用它在几个实现 IRecognizer 的程序集中查找许多类。

所以我有：

```
builder.RegisterAssemblyTypes(AppDomain.CurrentDomain.GetAssemblies()).As<IRecognizer>(); 
```

这很好。

但是我想将对找到的组件的引用注入到构造函数中-有点：

```
public Detector(List<IRecognizer> recognizers)
{
    this.Recognizers = recognizers;
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-11T19:24:26.890

Autofac 支持`IEnumerable<T>`作为[关系类型：](https://autofac.readthedocs.io/en/latest/resolve/relationships.html)

> 例如，当 Autofac 注入类型的构造函数参数时， `IEnumerable<ITask>`它不会寻找提供 `IEnumerable<ITask>`. 相反，容器会找到所有的实现`ITask`并注入它们。

因此，将您的构造函数更改为：

```
public Detector(IEnumerable<IRecognizer> recognizers)
{
    this.Recognizers = new List<IRecognizer>(recognizers);
} 
```

# cakephp - cakePHP Combobox 在分页上失去选择

> ID：15346419
> 
> 赞同：0
> 
> 时间：2013-03-11T18:59:31.190
> 
> 标签：cakephp, combobox, pagination

这是我用 cakePHP 创建的第一个页面，我有以下问题/场景：

我正在使用不同的模型创建一个高分页面，因为给定的数据库在不同的表中提供了信息。我正在使用分页和带有两个组合框的表单来允许选择特殊属性。要设置过滤条件，我使用 beforeFilter() 函数并动态设置条件（和连接）。所有条件也存储在会话中，因为它们保留用于分页。这一切都很好。

我现在的问题如下：当我提交表单时，结果是正确的，并且组合框是用我刚刚选择的选项**预先选择的。**当我现在切换到 page2/3/... 时，组合框的**选择很松散，**并且处于空选项中。

如何通过分页保持选择？

我的控制器 beforeFilter()-function

```
// Highscorefilter
public function beforeFilter()
{
  parent::beforeFilter();

  // Dropdown für Rassen
  $this->set('racelist', $this->Race->getRaceList());

  // Dropdown für Galaxien
  $this->set('galaxylist', $this->Galaxy->getGalaxyList());

  // Initialisierung
  $filter_conditions = array();
  $joins = array();
  $filter = FALSE;

  if($this->request->is('post'))
  {

    // Um die Filter richtig zu erkennen brauchen wir den Modelnamen :/
    switch($this->action)
    {
      case "imperium":
        $model = "HighscoreImperiumUser";
        break;
      case "quest":
        $model = "HighscoreQuestUser";
        break;
      case "war":
        $model = "HighscoreWarUser";
        break;
      case "trade":
        $model = "HighscoreTradeUser";
        break;        
      case "overall":
      default:
        $model = "HighscoreOverallUser";
        break;
    }    

    // Filter auslesen und setzen

    $data = $this->request->data;

    if(isset($data[$model]['race_id']) && !empty($data[$model]['race_id']))
    {
      // WHERE-Bedingung race_id setzen
      $tmpstr = sprintf("%s.race_id", $model);
      $filter_conditions[$tmpstr] = $data[$model]['race_id'];

      // Joins setzten wir in diesem Fall auf ein leeres array. Das wird ggf. nachher überschrieben
      $joins = array();
    }

    if(isset($data[$model]['gala']) && !empty($data[$model]['gala']))
    {
      // WHERE-Bedingung gala setzen
      $tmpstr = sprintf("ug.gala", $model);
      $filter_conditions[$tmpstr] = $data[$model]['gala'];        

      // WHERE-Bedingung für Join bauen und Join konstruieren
      $tmpstr = sprintf("ug.userid = %s.id", $model);
      $join = array( 'alias' => 'ug',
                     'table' => 'user_gala',
                     'type' => 'INNER',
                     'conditions' => $tmpstr);
      $joins[] = $join;

    }

    // Filterinformationen für Seitenwechsel in Session schreiben
    $this->Session->delete('_indexConditions');
    $this->Session->delete('_indexJoins');
    $this->Session->write('_indexConditions', $filter_conditions);
    $this->Session->write('_indexJoins', $joins);

    $filter = TRUE;

  }
  else if(!empty($this->request->params['named']['page']))
  { // Filterinformationen aus der Session holen
    $filter_conditions = (array)$this->Session->read('_indexConditions');
    $joins = (array)$this->Session->read('_indexJoins');

    $filter = TRUE;
  }

  if($filter)
  {      
    // set filter conditions of each pagination model
    $this->paginate = Hash::insert($this->paginate, '{s}.conditions', $filter_conditions);
    $this->paginate = Hash::insert($this->paginate, '{s}.joins', $joins);           
  }
} 
```

“真正的”控制器功能之一（它们都是直截了当的，只是使用不同的模型）

```
// Overall (Default) Highscore
public function overall()
{
  // Paginate der Highscore
  $highscoreusers = $this->paginate('HighscoreOverallUser');
  $this->set('highscoreusers', $highscoreusers);

  // Variablen für View setzen
  $this->set('model', 'HighscoreOverallUser');
  $this->set('title', __d('highscore', 'Overall score'));

  // Index-View benutzen
  $this->render('index');
} 
```

我的观点-表格

```
 = $this->Form->create($model, array('type' => 'post', 'url' => array('action' => $this->request['action'], 'controller' => $this->request['controller'])))
  %table
    %tr
      %td{:width => "200px"}
        = $this->Form->label('race_id', __d('highscore', 'Only show race:'))
      %td{:width => "100px"}
        = $this->Form->select('race_id', $racelist, array('legend' => false, 'class' => 'select', 'empty' => __d('highscore', 'All races') ))
      %td{:width => "200px"}
        = $this->Form->label('gala', __d('highscore', 'Only show players in galaxy:'))
      %td{:width => "100px"}
        = $this->Form->select('gala', $galaxylist, array('legend' => false, 'class' => 'select', 'empty' => __d('highscore', 'All galaxies') ))

  = $this->Form->end(__d('highscore', 'Activate filter')) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-21T09:24:36.863

问题是在使用分页器切换页面后，cakePHP 的数据值（例如“data[HighscoreOverallUser][race_id]”）没有设置。

So they have to be set manually. The following code worked for me. Sure you have to be careful not to override set data, but as far as I can say now after using the paginator the data is always not set

```
if(!$this->data->HighscoreOverallUser)
{
  $data['HighscoreOverallUser']['race_id'] = $filter_conditions['HighscoreOverallUser.race_id'];
  $this->data = $data;
} 
```

# html - python-在不丢失轴标题的情况下提取html表

> ID：15346421
> 
> 赞同：0
> 
> 时间：2013-03-11T18:59:36.050
> 
> 标签：html, python-2.7, html-parsing, beautifulsoup, extraction

Q1。有什么方法可以从表中提取数据，但仍然能够追踪轴标题？Q2。哪种方法会更好地从 html 表中提取数据？HTMLParser 或 beautifulsoup 还是其他？

我试图提取这张收入表 [http://investing.businessweek.com/research/stocks/financials/financials.asp?ticker=TSCO:LN](http://investing.businessweek.com/research/stocks/financials/financials.asp?ticker=TSCO:LN)

我想成为

> "以百万英镑计的货币","2009","2010","2011","2012"
> 
> “收入”、“53,898.0”、“56,910.0”、“60,455.0”、“64,539.0”
> 
> “总收入”、“53,898.0”、“56,910.0”、“60,455.0”、“64,539.0”

同时我想知道“56,910.0”是2009年的收入

但我遇到了两个问题：

1.  HTMLParser.HTMLParseError：格式错误的开始标记，位于第 1148 行，第 47 列或 HTMLParser.HTMLParseError：错误的结束标记：“”，位于第 225 行，第 104 列

2.  无法跟踪轴标题

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:41:14.313

我做了相当多的抓取，BeautifulSoup 很少让人失望。

```
 from BeautifulSoup import BeautifulSoup 
URL = "[http://investing.businessweek.com/research/stocks/financials/financials.asp?ticker=TSCO:LN](http://investing.businessweek.com/research/stocks/financials/financials.asp?ticker=TSCO:LN)"
from urllib import urlopen
HTML = urlopen ( URL )
soup = BeautifulSoup ( HTML )
statement = soup . find ( 'table', { 'class' : "financialStatement" } )
rows = statement . findAll ( 'tr' ) 
```

在这一点上，我想你会发现 rows 的长度为 25，它的第一项是标题，最后一项是所需表的最后一行。

# primefaces - 表列内的 Primefaces 删除和确认对话框 - 更新或冻结问题

> ID：15346422
> 
> 赞同：2
> 
> 时间：2013-03-11T18:59:39.697
> 
> 标签：primefaces, datatable, .refresh

我有一个类似的问题：[Primefaces：confirmDialog 中的commandButton cannot update datatable in the same form](https://stackoverflow.com/questions/9256668/primefaces-commandbutton-in-confirmdialog-cannot-update-datatable-in-the-same-f)

我有一张带游戏的桌子。最后一列有 2 个按钮：删除和详细信息。

删除按钮应该删除游戏

该按钮确实删除了游戏，但更新不起作用。

*   update=":form1:overviewTableGame" --> 无反应（无刷新）

*   update="@form" --> 更新执行（表刷新），但整个屏幕被锁定。我认为由于这个事实，包含对话框的表单已更新......

表代码：

```
<h:form id="form1">
        <p:messages id="messages" showDetail="true" autoUpdate="true"
            closable="true" />

        <p:dataTable id="overviewTableGame" var="game" value="#{gameMB.list}">
            <p:column headerText="#{msg.ID}" sortBy="#{game.id}">
                <h:outputText value="#{game.id}" />
            </p:column>

            <p:column headerText="#{msg.NAME}" sortBy="#{game.name}">
                <h:outputText value="#{game.name}" />
            </p:column>

            <p:column headerText="#{msg.DESCRIPTION}"
                sortBy="#{game.description}">
                <h:outputText value="#{game.description}" />
            </p:column>

            <p:column headerText="#{msg.ADMIN}" sortBy="#{game.admin.firstname}">
                <h:outputText value="#{game.admin.firstname}" />
            </p:column>

            <p:column headerText="#{msg.ACTION}">
                <p:commandButton id="commandButtonDELETE" value="lÃ¶schen"
                    onclick="confirmation.show()" type="button"
                    update=":form1:display">
                    <f:setPropertyActionListener value="#{game}"
                        target="#{gameMB.selectedGame}" />
                </p:commandButton>

                <p:commandButton id="commandButtonDETAIL" value="detail"
                    action="#{gameMB.details()}">
                    <f:param name="id" value="#{game.id}" />
                </p:commandButton>
            </p:column>
        </p:dataTable>

        <p:confirmDialog id="confirmDialog"
            message="Are you sure about destroying the world?"
            header="Initiating destroy process" severity="alert"
            widgetVar="confirmation">

            <h:panelGrid id="display" columns="2" cellpadding="4"
                style="margin:0 auto;">

                <h:outputText value="Name:" />
                <h:outputText value="#{gameMB.selectedGame.name}"
                    style="font-weight:bold" />

                <p:commandButton id="confirm" value="Yes Sure"
                    oncomplete="confirmation.hide()"
                    actionListener="#{gameMB.delete(gameMB.selectedGame)}"
                    update=":form1:overviewTableGame">
                </p:commandButton>
            </h:panelGrid>

            <p:commandButton id="decline" value="Not Yet"
                onclick="confirmation.hide()" type="button" />
        </p:confirmDialog>

    </h:form> 
```

删除方法：

```
public void delete(Game game) {
    //FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO,"DELETE", "Game Deleted!"));
    System.out.println("==================");
    System.out.println(game);
    getGameService().removeGame(game);
    //this.gameList = gameService.listAllGames();
} 
```

被选中的游戏

```
private Game selectedGame;

public Game getSelectedGame() {
    return selectedGame;
}

public void setSelectedGame(Game selectedGame) {
    this.selectedGame = selectedGame;
} 
```

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:21:31.813

将您的对话框与`p:dataTable`. 以下代码正在工作：

xhtml：

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core" xmlns:p="http://primefaces.org/ui" template="/WEB-INF/templates/globalTemplate.xhtml">

    <ui:define name="title">15344819</ui:define>
    <ui:define name="content">
        <p:growl id="growl" showDetail="true" />

        <h:form id="form">
            <p:dataTable id="students" value="#{so15344819.students}" var="student">
                <p:column>
                        <p:commandButton id="selectButton" update=":form:display" oncomplete="studentDialog.show()" icon="ui-icon-search" title="View">
                           <f:setPropertyActionListener value="#{student}" target="#{so15344819.selectedStudent}" />
                       </p:commandButton>
                   </p:column>
            </p:dataTable>

            <p:dialog header="Student Detail" widgetVar="studentDialog" resizable="false" id="studentDlg"
                            showEffect="fade" hideEffect="explode" modal="true">

                    <h:panelGrid id="display" columns="2" cellpadding="4" style="margin:0 auto;">

                        <h:outputText value="Name:" />
                        <h:outputText value="#{so15344819.selectedStudent.name}" style="font-weight:bold"/>                                               
                        <p:commandButton id="deleteButton" actionListener="#{so15344819.delete(so15344819.selectedStudent)}" oncomplete="studentDialog.hide()" 
                            update=":form:students" value="Delete"/>
                        <p:commandButton id="cancelButton" onclick="studentDialog.hide()" value="Cancel"/>
                    </h:panelGrid>

                </p:dialog>
        </h:form>
    </ui:define>

</ui:composition> 
```

托管bean：

```
package app.so.dev.web.controller;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ViewScoped;

import app.so.dev.web.model.Student;

@ManagedBean(name = "so15344819")
@ViewScoped
public class SO15344819 implements Serializable {

    private static final long serialVersionUID = 6686378446131077581L;
    private List<Student> students;
    private Student selectedStudent;

    @PostConstruct
    public void init() {
        students = new ArrayList<Student>();
        students.add(new Student("Student 1"));
        students.add(new Student("Student 2"));
    }

    public void delete(Student student) {
        System.out.println("==================");
        System.out.println(student);
        students.remove(student);
    }

    public List<Student> getStudents() {
        return students;
    }

    public void setStudents(List<Student> students) {
        this.students = students;
    }

    public Student getSelectedStudent() {
        return selectedStudent;
    }

    public void setSelectedStudent(Student selectedStudent) {
        this.selectedStudent = selectedStudent;
    }
} 
```

随意恢复。

# php - 使用 Jquery 仅在 html 中保留某些元素

> ID：15346426
> 
> 赞同：2
> 
> 时间：2013-03-11T18:59:51.920
> 
> 标签：php, jquery

我试图只保留使用 jQuery 添加到文本区域的某些元素。我正在使用 MutationObserver 查找添加到 div 的任何新项目并将其复制到表单中。

```
// passes content to the string, new items are also found
// and added using the MutationObserver
//
var stringContent = $("#OriginalOutput").html() 
```

但是，在这种情况下，我希望在 html 中找到所有新的“li”。

我尝试了一些这样的方法，例如：

```
var stringContent = $("#OriginalOutput").clone().find('.container')
  .insertAfter().end().html(); 
```

这有效，但只给了我里面的第一个'li'元素。我还尝试了其他方法，用其他方法替换 insertAfter ，这让我得到相同的结果，但没有给出它找到的所有 'li' 元素。

我已经在其他地方调用了 ul 元素，我只需要将找到的所有“li”元素传递到字符串中。这样我可以在这里使用它：

```
//edited from #OriginalOutput to #output
$("#output").val("<ul class=\"mylist\">\n" + stringContent + "</ul>"); 
```

我尝试的另一种方法是删除我不需要的元素，只是为了保留所有已添加的“li”，但我遇到的问题是我不知道如何删除每个类，如果我删除了父 div包含所有元素，它只会包含其中的所有内容，包括“li”元素，所以我确定我不能这样做。尽管我确实尝试在最终输出上使用带有 str_replace 的 PHP 来将其取出，但由于我需要删除输出唯一 ID 的大多数元素，因此只能取出某些元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:13:43.397

试试这个：

```
var stringContent = $("#OriginalOutput .container").clone().find(':not(li)')
    .remove().end().html(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:13:58.143

使用该`.each()`功能。如果您只交付一个元素，这可能会有所帮助。将您的 jQuery 更改为如下所示：

```
var stringContent = '';
$("#OriginalOutput").clone().find('li').each(function(){
  var t = $(this);
  stringContent += t[0].outerHTML;
} 
```

* * *

**更新**

根据提问者的评论：

我的猜测是，您的问题与拉动物品无关，而是与放入物品有关。我会改变您将它们插入的方式：

```
$("#OriginalOutput").clone().find('li').each(function(){
  var t = $(this);
  $("#OriginalOutput").append(t);
}); 
```

我不确定您为什么选择`val()`原始答案，我只是假设这`$('#OriginalOutput')`是一个隐藏元素。如果它是隐藏元素，您可能希望在函数中从头开始构造一个克隆，如下所示：

```
var myCloneElement = $(document.createElement('ul'));
myCloneElement = $('#myTargetList').clone();
$("#OriginalOutput").clone().find('li').each(function(){
  var t = $(this);
  myCloneElement.append(t);
});
$('#myTargetList').html(myCloneElement.html()); 
```

# jqgrid - 如何将导航网格选项添加到模态表单？

> ID：15346427
> 
> 赞同：0
> 
> 时间：2013-03-11T19:00:05.707
> 
> 标签：jqgrid

我必须在页面加载时显示一个添加模式表单。我这样做是这样的：

```
$('#lst_totals').jqGrid('editGridRow','new'); 
```

问题是，当我以这种方式调用它时，我不知道如何设置导航网格。我在导航网格中的添加模式表单上设置选项，如下所示：

```
// add options
   {    bSubmit: "Add",
        width: 350,
        recreateForm: true,
        recreateFilter: true,
        closeOnEscape: true,
        closeAfterAdd: true,
        editData: { action:'grdTotals' },
   }, 
```

但是这些属性没有为我在页面加载时调用的添加模式表单设置。它们仅适用于单击添加按钮时显示的添加模式表单。如何将选项应用于从 jqGrid 外部调用的模式表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:34:36.583

这是解决方案。正如我所知道的那样简单：

```
$('#lst_totals').jqGrid('editGridRow','new',
    {   bSubmit: "Add",
        width: 350,
        recreateForm: true,
        recreateFilter: true,
        closeOnEscape: true,                
        closeAfterAdd: true,
        editData: { action:'grdTotals' },
    }
); 
```

基本上，由于我正在创建一个不属于导航网格的新模式表单，因此我必须为其提供我想要的属性。上面，“editGridRow”接受第三个参数 {}，它可以包含这些属性。

# c++ - 没有这样的插槽/信号 (Qt)

> ID：15346428
> 
> 赞同：0
> 
> 时间：2013-03-11T19:00:12.447
> 
> 标签：c++, qt, slot

Object::connect: 没有这样的信号 RollsRoyceTab::signal_aValueChange(int aValue) ??????

我有

```
class RollsRoyceTab : public QWidget
 {
     Q_OBJECT
 public:
     RollsRoyceTab(QWidget *parent = 0);
 public slots:
     void aValueChange(int);
     void bValueChange(int);
     void cValueChange(int);
     void rrValuesHolder(int aValue, int bValue, int cValue);
signals:
     void signal_aValueChange(int aValue);
     void signal_bValueChange(int bValue);
     void signal_cValueChange(int cValue);
 private:
.........
     int aValue, bValue, cValue;
 };

............
connect(this,SIGNAL(signal_aValueChange(int aValue)),this,SLOT(rrValuesHolder(int aValue, int bValue, int cValue))); 
 }

 void RollsRoyceTab::aValueChange(int aValue)
 {
     lcdAL->display(aValue);
     lcdAR->display(100 - aValue);

     emit signal_aValueChange(aValue);
 }

void RollsRoyceTab::rrValuesHolder(int aValue, int bValue, int cValue)
 {
     qDebug() << aValue;
     qDebug() << bValue;
     qDebug() << cValue;

 } 
```

和连接（......这个，SLOT（rrValuesHolder（int aValue，int bValue，int cValue）））；还是只需要写一个值 SLOT(rrValuesHolder(int aValue)) ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:04:39.090

首先： QObject::connect() 中的信号和槽应该没有变量名。

第二：您不能将带有一个参数的信号与带有三个参数的 SLOT 连接起来。SIGNAL 的参数不得少于 SLOT。

它应该是例如：

```
connect(this,SIGNAL(signal_aValueChange(int)),this,SLOT(rrValuesHolder(int))); 
```

这只是对此的解释。如果您发出带有一个参数的信号（例如 QString），插槽如何知道其他两个参数是什么？对我来说这是合乎逻辑的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:06:33.813

“SIGNAL() 宏的参数不得少于传递给 SLOT() 宏的签名。

所有这些都会起作用：

```
connect(sender, SIGNAL(destroyed(QObject*)), this, SLOT(objectDestroyed(Qbject*)));
connect(sender, SIGNAL(destroyed(QObject*)), this, SLOT(objectDestroyed()));
connect(sender, SIGNAL(destroyed()), this, SLOT(objectDestroyed())); 
```

这不起作用：

```
connect(sender, SIGNAL(destroyed()), this, SLOT(objectDestroyed(QObject*))); 
```

我相信你应该打电话给`value SLOT(rrValuesHolder(int))`

参考：http: [//qt-project.org/doc/qt-4.8/signalsandslots.html](http://qt-project.org/doc/qt-4.8/signalsandslots.html)

编辑：血液包括我忽略的另一条信息，信号和插槽应该在没有变量名的情况下连接！

# mysql - 表示 SQL 约束

> ID：15346433
> 
> 赞同：1
> 
> 时间：2013-03-11T19:00:44.153
> 
> 标签：mysql, sql

我有这张桌子：

```
CREATE  TABLE `sold` (
`part_ID` INT(11) NOT NULL ,
`date` DATE NOT NULL ,
 PRIMARY KEY (`part_ID`, `date`) ,
 FOREIGN KEY (`part_ID` )
 REFERENCES `part` (`part_ID` ); 
```

此表表示每天销售的零件，约束表示销售数量应至少为 25 且最多为 100。我该如何实施此约束？

我认为它应该从这样的事情开始：

```
CHECK ( NOT EXISTS ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:07:19.110

试试下面

```
CONSTRAINT chk_sales CHECK (columnName>=25 AND columnName <=100) 
```

另请参阅此[链接](http://www.w3schools.com/sql/sql_check.asp)

# sql - Where 语句上的顺序是否会影响性能？

> ID：15346436
> 
> 赞同：2
> 
> 时间：2013-03-11T19:00:48.483
> 
> 标签：sql

您在构建查询时指定的顺序是否会影响性能？或者 SQL 进行智能过滤。

例如假设我有一个包含 200 万条记录的 Employee 表：

```
Employee( emp_id, name, dept_id, country_id ) 
```

不要说我想获得国家 id 500 和部门 id 17 中那些员工的 ID 和姓名。不要说那个部门大约有 300k，那个国家大约有 100 万，但是那些同时满足这两个标准的结果是 50k .

如果我这样做会不会对性能产生影响：

```
SELECT *
FROM employees
where dept_id = 17 and country_id= 500 
```

比我这样做：

```
 SELECT *
    FROM employees
    where  country_id= 500 and dept_id = 17 
```

假设后者将表减少到 100 万，然后从那里做剩下的，第一个查询将减少到 300k 并从那里做第二个过滤器。

但是，如前所述，我不确定这是否是 SQL 电机处理查询的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:05:24.217

大多数现代 RDMBS 不会`WHERE`对语句的 - 部分中的值顺序有问题，它们的查询优化器在大多数情况下会按照您描述的方式对其进行排序，以最大限度地提高性能。

我知道一些较旧的 RDBMS，如果您选择“错误”的顺序，它们实际上会受到相当大的影响，但这些在过去十年中应该已经过时了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:17:53.013

在上表中，

如果非聚集索引存在 -

(country_id,dept_id,employee_id) 在表中，

然后查询 -

```
SELECT *
    FROM employees
    where  country_id= 500 and dept_id = 17 
```

会有更好的表现。

和

如果非聚集索引存在 -

(dept_id,country_id,employee_id) 在表中，

然后查询 -

```
SELECT *
    FROM employees
    where  dept_id = 17 and country_id= 500 
```

会有更好的表现。

如果没有非聚集索引，

然后查询 -

```
SELECT *
    FROM employees
    where  dept_id = 17 and country_id= 500 
```

对于数量较少的第二个过滤子集，将具有更好的性能。

还要提一下，

如果两个非聚集索引都存在，

然后查询 -

```
SELECT *
    FROM employees
    where  dept_id = 17 and country_id= 500 
```

对于数量较少的第二个过滤子集，将具有更好的性能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:29:35.530

它确实会影响，尤其是当您的执行计划中有剩余谓词时，但大多数时候查询优化器会为您重新排序谓词。

当然，这假设您的索引和统计信息得到了良好的维护和更新，因此需要考虑。

进一步阅读：[http ://sqlserverpedia.com/wiki/Index_Selectivity_and_Column_Order](http://sqlserverpedia.com/wiki/Index_Selectivity_and_Column_Order)

# java - ConcurrentHashMap 锁增加

> ID：15346439
> 
> 赞同：1
> 
> 时间：2013-03-11T19:00:51.303
> 
> 标签：java, java.util.concurrent, concurrenthashmap

随着 ConcurrentHashMap 中条目的增加，将完成重新散列并形成新的散列桶（16 到 32）。问：锁（最初是 16 个）是否也会增加（到 32 个）或者 16 个锁会在 32 个哈希桶上查找（每 2 个哈希桶 1 个锁）等等随着条目的不断增加（仅供参考，我们可以将负载因子设为 1 )

更多问题：我想阅读 ConcurretnHashMap 的实现，请分享链接（Java Docs/code 除外）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:31:25.397

a 的并发性`ConcurrentHashMap`是在初始化时设置的，不会改变。如果您使用默认值 16，则无论散列大小调整多少，它始终为 16。

要记住几件事：

*   `ConcurrentHashMap`调整大小比普通`HashMap`. 您真的应该尝试为它提供关于条目数量的猜测，以便它不必调整大小。

*   并发是在理想情况下可以同时写入映射的线程数。读取器不会锁定哈希，因此您在担心并发时不需要计算它们。

# excel - 如何通过在 Excel 中按 vba 按钮来运行 ftp.bat？

> ID：15346441
> 
> 赞同：1
> 
> 时间：2013-03-11T19:00:54.317
> 
> 标签：excel, batch-file, ftp, dataset, mainframe

我正在尝试从大型机中自动提取数据，并且尝试了以下解决方案，但没有成功。相反，它删除了 FtpLogin2.bat 文件的内容。

```
Private Sub Workbook_Open()
Call Shell(Environ$("COMSPEC") & " /c D:\user\MyDocs\Downloads_FTP\FtpLogin2.bat",    
vbNormalFocus)
End Sub 
```

ftplogin2.bat 的内容

```
@ftp -i -s:"%~f0"&GOTO:EOF 
open ip user
password ped 
get 'mainframe_dataset' pc_dataset.txt 
```

我想要做的是建立一个我有输入的表单。该输入是我要提取的大型机文件的名称。然后，该数据应该出现在该 Excel 书籍的另一个工作表中。我的意思是通过有一个文本字段和一个提交按钮来自动化该过程，这应该会触发宏中的 FTP。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:08:28.183

我认为在这种情况下使用 environ() 存在问题；我不确定为什么。

利用`Shell("cmd.exe /c D:\user\MyDocs\Downloads_FTP\FtpLogin2.bat"`

这应该适用于 3.11 之后的任何版本的 Windows。

# performance - Emberjs 中最大的性能问题是什么？

> ID：15346443
> 
> 赞同：8
> 
> 时间：2013-03-11T19:01:17.377
> 
> 标签：performance, binding, ember.js

过去 6 个月我正在开发一个 Emberjs 组件。

当我尝试开发表格组件时，我开始遇到第一个性能问题。此表中的每个单元格都是 Ember.View，并且每个单元格都绑定到对象属性。当表格有 6 列并且我试图列出大约 100 个项目时，它导致浏览器冻结了一段时间。所以我发现，最好编写一个返回字符串的函数，而不是使用把手并由观察者手动处理绑定。

那么，有没有什么好的做法如何使用最少的绑定？或者如何编写绑定而不损失很多性能。例如...不对大量数据使用绑定？

有多少 Ember.View 对象可以附加到页面？

感谢您的回复

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-11T20:50:13.303

我们有一个 ember 应用程序，可以在一个页面上显示 100 多个复杂项目。每个项目都使用开箱即用的车把绑定来输出大约十几个属性。它的渲染速度非常快（< 100 毫秒），而且很少有时间花在绑定上。

如果您发现浏览器挂在 6 列和 100 个项目上，则肯定有其他问题。

> 那么，有没有什么好的做法如何使用最少的绑定？或者如何编写绑定而不损失很多性能。

尝试设置`Ember.LOG_BINDINGS = true`以查看发生了什么。可能是您绑定的属性具有循环依赖关系或解决成本高昂。有关调试的重要提示，请参阅此帖子：

[http://www.akshay.cc/blog/2013-02-22-debugging-ember-js-and-ember-data.html](http://www.akshay.cc/blog/2013-02-22-debugging-ember-js-and-ember-data.html)

> 有多少 Ember.View 对象可以附加到页面？

我不相信有一个具体的限制，肯定会取决于浏览器。除非有几千个，否则我不会考虑优化。

查看此示例以了解如何优化 ember 以处理非常大的表：

[http://addepar.github.com/ember-table/](http://addepar.github.com/ember-table/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T22:21:50.333

Erik Bryn 最近发表了一个关于[Ember.ListView](https://github.com/emberjs/list-view)的演讲，该演讲将通过重用已超出视口的列表单元来大幅减少页面上的视图数量。

如果您同时建模多个属性，则将此技术与[group-helper](https://github.com/emberjs/group-helper)结合使用以减少变形脚本标签的数量。此外，`{{unbound}}`如果您不需要任何属性进行实时更新，请考虑使用。

# facebook - 提供 og:image 在 Facebook linter 中不够大

> ID：15346444
> 
> 赞同：19
> 
> 时间：2013-03-11T19:01:27.660
> 
> 标签：facebook, facebook-opengraph

我在我的网站上正确设置`og:image`，facebook linter 看到它[（facebook 调试器）](https://developers.facebook.com/tools/debug/og/object?q=www.zaerus.com.br)但是，它说图像应该至少为 200x200，但事实并非如此，我的图像是 250x250[图像](http://d319kw601622ux.cloudfront.net/media/zaerus/img/thumbnail_fb.png)。

什么可能导致问题？这可能与 Cloudfront 有关吗？

```
Edit: I got around it by switching from this image to another image which is a 
jpg image, but still I couldn't find the cause for the problem since the image
looks fine. 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-05-07T13:17:26.567

这发生在我身上。我只使用 meta og:image 标签。我在头部添加了以下内容

```
<link rel="image_src" type="image/jpeg" href="img_path" /> 
```

它为我解决了这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-14T17:02:17.153

这里的线程非常有帮助：[og:image Open Graph Warnings image size](https://stackoverflow.com/questions/15421521/ogimage-open-graph-warnings-image-size)

通常，FB 的解析器更喜欢 (1) 以 100 的倍数和 (2) 正方形格式测量的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-23T14:25:41.657

尝试在不同的图像编辑器中重新保存图像。有时，图像元数据可以指示图像的大小与实际大小不同。用不同的程序重新保存它（在我的例子中，我使用了 MS Paint）可以使元数据对 facebook 更友好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-07T15:44:13.860

我的自定义 Web 服务器 ServeRick 遇到了同样的错误，解决方案出乎意料地是发送带有图像的 Content-Length 标头。没有此标头，facebook 不接受我的任何 og:image 链接

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-23T17:55:35.890

我的图像的图像路径中有一个空格。

就像我的图像路径是[http://example.com/](http://example.com/) **jodha** akbar /image.jpg

如果你观察上面。jodha **akbar**目录有空间。

由于这个特殊字符可能是，Facebook 并没有走上这条道路。

我添加了一个 PHP str_replace 函数。它对我有用。

```
str_replace(" ","%20",$image_path) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-10T22:45:40.713

将相同的图像**从 JPG**转换为**PNG**为我完成了工作。

# twitter-bootstrap - 仅使用 CSS 将装订线添加到引导程序

> ID：15346445
> 
> 赞同：0
> 
> 时间：2013-03-11T19:01:36.807
> 
> 标签：twitter-bootstrap, responsive-design, fluid-layout, fluid, gutter

我需要做一个与原始设计（在 InDesign/Photoshop 中）尽可能匹配的 3 列布局，并且要求是使用响应式/流体版的 Bootstrap。

我要么无法让它们居中对齐（示例 1——最接近我想要实现的目标），要么无法让他们停止调整图像和文本的大小而没有巨大的差距（示例 2），或者我可以' t 弄清楚如何在不弄乱基于百分比的大小的情况下执行垂直规则（示例 3）。排水沟给我带来了麻烦，因为它们不够宽，而且我不知道 LESS 也不知道如何直接修改 Bootstrap。

3 列之间需要更多空间，它们需要在页面上居中以获得更大的尺寸，并且需要在它们之间插入垂直规则。图像需要相同大小，文本应该完全相同。

以下是我尝试执行此操作的三种不同方式的代码部分。

```
<div class="container">
<div class="row-fluid">
<!-- Column 1 -->        
<div class="span4">
      <div class="threecolumn1stcolumnA">
      <img class="imagepadding" src="images/image1.jpg" alt="institutes" />
      <h2>&mdash; institutes &mdash;</h2>
      <p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del</p>
            </div>
    </div>
<!-- Column 2 -->        

    <div class="span4">
      <div class="threecolumn2ndcolumnA">
      <img class="imagepadding" src="images/image2.jpg" alt="centers" /><h2>&mdash; centers &mdash;</h2>
      <p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del </p>
    </div>
    </div>
<!-- Column 3 -->        

    <div class="span4">
      <div class="threecolumn3rdcolumnA">
      <img class="imagepadding" src="images/image3.jpg" alt="giving" /><h2>&mdash; giving &mdash;</h2>
      <p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del</p>         
    </div>
    </div>
  </div>           

<div class="row-fluid">
<!-- Column 1 -->        
<div class="span4">
      <div class="threecolumn1stcolumnB">
      <img class="imagepadding" src="images/image1.jpg" alt="institutes" />
      <h2>&mdash; institutes &mdash;</h2>
      <p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del</p>
            </div>
    </div>
<!-- Column 2 -->        

    <div class="span4">
      <div class="threecolumn2ndcolumnB">
      <img class="imagepadding" src="images/image2.jpg" alt="centers" /><h2>&mdash; centers &mdash;</h2>
      <p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del </p>
    </div>
    </div>
<!-- Column 3 -->        

    <div class="span4">
      <div class="threecolumn3rdcolumnB">
      <img class="imagepadding" src="images/image3.jpg" alt="giving" /><h2>&mdash; giving &mdash;</h2>
      <p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del</p>         
    </div>
    </div>
  </div>   
<div class="row-fluid">
<!-- Column 1 -->
<div class="span12">
<div class="threecolumn1stbox">
<img class="imagepadding" src="images/image1.jpg" alt="institutes" />
<h2>— institutes —&lt;/h2><p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del</p></div>
<div class="threecolumn2ndbox">
<img class="imagepadding" src="images/image2.jpg" alt="centers" />
<h2>&mdash; centers &mdash;</h2><p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del </p></div>
<div class="threecolumn3rdbox">
<img class="imagepadding" src="images/image3.jpg" alt="giving" />
<h2>&mdash; giving &mdash;</h2><p>Rae con core maximil earum solo cum namusa suntiatur, optate pos eum id quo mod ea simusciunt, nisqui anducita volore si sinust rae est et in restrum quaeped mo ma veliquo diciur, undam aut et et as sequaspis essitis alis unt, si dolut etur? Quid ma naturem perior ame sumet auta ni conessi te plis que nusda volorei uritas ad es dolorepero volorer spelecea none et repudit eliquunt optatem nobis andis del</p></div>
</div>
</div> 
```

这是CSS

```
.threecolumn1stcolumnA{
padding: 0 20px 0 45px;
margin-top:30px;
margin-left:1px;}
.threecolumn2ndcolumnA{
padding: 0 20px 0 45px;
margin-top:30px;
border-left:1px solid #d7d7d7;}
.threecolumn3rdcolumnA{
padding: 0 45px 0 45px;
margin-top:30px;
border-left:1px solid #d7d7d7;}

.threecolumn1stcolumnB {
box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
padding: 0 45px 0 45px;
margin-top:30px;
border-right:1px solid #d7d7d7;}
.threecolumn2ndcolumnB{box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
padding: 0 45px 0 45px;
margin-top:30px;}
.threecolumn3rdcolumnB{
    box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
padding: 0 45px 0 45px;
margin-top:30px;
border-left:1px solid #d7d7d7;}

.threecolumn1stbox{
box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
width:33.333333%;
float:left;
padding: 0 45px 0 45px;
margin-left:1px;}
.threecolumn2ndbox{
box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
width:33.333333%;
float:left;
padding: 0 45px 0 45px;
border-left:1px solid #d7d7d7;}
.threecolumn3rdbox{
box-sizing:border-box;
-moz-box-sizing:border-box; /* Firefox */
-webkit-box-sizing:border-box; /* Safari */
width:33%;
float:left;
padding: 0 45px 0 45px;
border-left:1px solid #d7d7d7;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:31:02.883

我无法使用发布此主题/问题的帐户再次登录。几周前我尝试了布雷特的想法，但无法发表评论。谢谢大家帮我提些建议。我几乎发现等间距的分隔线，在每个跨度/列中完全居中的内容在 12 列响应式布局中基本上是不可能的，至少在默认排水沟中是这样。Brett 的解决方案是我尝试过的所有解决方案中最聪明/最聪明的，但仍然导致一组三列不再完全居中在页面上。可能通过删除排水沟的自定义引导程序可以创建某些东西，但我从未尝试过。如果引导站点没有响应，也有可能，但是这个站点必须是响应的，所以这不是一个选项。

最后，我只是决定只需要保留那些垂直分隔线。

# linux - 比较两台服务器上的大文件

> ID：15346449
> 
> 赞同：1
> 
> 时间：2013-03-11T19:01:44.360
> 
> 标签：linux, centos

我有两台服务器，我想将备份 tar.bz 文件（50G）从一台移动到另一台。

我使用 AXEL 从源服务器下载文件。但是现在当我想提取它时，它给了我错误`unexpected EOF`。它们的大小相同，内容似乎有问题。

我想知道是否有一个程序/应用程序/脚本可以比较这两个文件并仅纠正损坏的部分？！还是我需要手动拆分并比较每个部分的哈希码？

问题在于源服务器的带宽有限且传输速度低，因此我无法从零再次传输它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:08:01.707

您可以使用校验和实用程序（例如 md5 或 sha）来查看两端的文件是否相同。例如

```
$ md5 somefile 
MD5 (somefile) = d41d8cd98f00b204e9800998ecf8427e 
```

通过在两端运行这样的命令并比较结果，您可以确定文件是否相同。

至于只下载文件的错误部分，这将需要双方对数据的“片段”进行校验和，例如使用[bittorrent 协议](http://en.wikipedia.org/wiki/BitTorrent#Description)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:02:27.000

好的，我发现“rdiff”是解决这个问题的最佳方法。只是在做：

在目标服务器上：

```
rdiff signature destFile.tar.bz destFile.sig 
```

然后将 destFile.sig 传输到源服务器并再次在源服务器上执行 rdiff：

```
rdiff delta destFile.sig srcFile.tar.bz delta.rdiff 
```

然后将 delta.rdiff 传输到目标服务器并在目标服务器上再次执行 rdiff：

```
rdiff patch destFile.tar.bz delta.rdiff fixedFile.tar.bz 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:17:16.350

这个过程真的不需要单独的程序。您可以通过使用几个简单的命令来简单地做到这一点。如果任何 md5sum 不相加，则复制不匹配的并将它们重新连接在一起。为了使比较 md5sum 更容易，只需在两个文件的输出之间运行一个差异（或对输出进行 md5sum 以查看是否存在差异，而无需复制输出）。

```
split -b 1000000000 -d bigfile bigfile.
for i in bigfile.*
do
   md5sum $i
done 
```

# mysql - 将 Netbeans 中的 Mysql 结果导出到 csv

> ID：15346455
> 
> 赞同：1
> 
> 时间：2013-03-11T19:02:09.700
> 
> 标签：mysql, netbeans, csv

有没有办法轻松地将 Netbean 的 SQL 编辑器返回的结果导出到本地计算机上的 csv 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-26T20:03:30.207

我只是复制了这些行并将它们粘贴到电子表格中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T23:43:40.830

它记录在 bugzilla 中。10/2009 之后没有更新。

[https://netbeans.org/bugzilla/show_bug.cgi?id=154740](https://netbeans.org/bugzilla/show_bug.cgi?id=154740)

我刚从日食搬过来，很沮丧。尝试使用 squirrel，因为我不想回到 eclipse 进行 Java 开发。个人选择居多。

# java - ByteArrayInputStream 到 FileInputStream

> ID：15346461
> 
> 赞同：0
> 
> 时间：2013-03-11T19:02:26.003
> 
> 标签：java, file, inputstream, bytearrayoutputstream, bytearrayinputstream

我在 Java 方面不是很有经验，并且在将对象转换为`ByteArrayInputStream`对象时遇到了麻烦`FileInputStream`。

有什么办法吗？

我编写了接受文件 URL 并将其传递给此函数的代码`renderer.setDocument(url);`

这是我的代码：

```
 String url = new File(File_To_Convert).toURI().toURL().toString();
 String HTML_TO_PDF = "C:/Taha/SmartPlannerNew/ConvertedFile.pdf";       

  ITextRenderer renderer = new ITextRenderer();
         renderer.setDocument(url); 
```

但现在我不想在硬盘上写任何东西，所以我用`ByteArrayInputStream`包含我的文本的文件交换了文件，我想将它传递给 ITextRenderer 而不是传递文件 URL。

有没有办法做到这一点？

# python - Python 3.x - 如何让我的程序在无效时不计算部分？

> ID：15346463
> 
> 赞同：1
> 
> 时间：2013-03-11T19:02:27.343
> 
> 标签：python, python-3.x

大家好，我遇到的问题是电影院门票和部分。基本上，该程序应该接受输入的门票并产生总收入。一个要求是如果输入的门票数量超过该部分的座位限制，则执行无效功能。该程序运行良好，但当发生失效并输入适当数量的票时，它将计算导致失效功能执行的票，以及新售出的适当数量的票。请帮忙。谢谢！

```
 secA = 20
    secB = 15
    secC = 10
    def getTickets():

        global A
        A = int(input("Please enter the number of tickets sold in section A: "))

        global B
        B = int(input("Please enter the number of tickets sold in section B: "))

        global C
        C = int(input("Please enter the number of tickets sold in section C: "))

    def ticketsValid(A,B,C):
        while A > 300 or A < 0:
            print("ERROR: Section A has a limit of 300 seats")
            A = int(input("Please enter the number of tickets sold in section A: "))
        while B > 500 or B < 0:
            print("ERROR: Section B has a limit of 500 seats")
            B = int(input("Please enter the number of tickets sold in section B: "))
        while C > 200 or C < 0:
            print("ERROR: Section C has a limit of 200 seats")
            C = int(input("Please enter the number of tickets sold in section C: "))

    def calcIncome(A, B, C):
        incomeGenerated = A * secA + B * secB + C * secC
        print("The income generated is $%d" % (incomeGenerated))

    def main():
        getTickets()
        ticketsValid(A,B,C)
        calcIncome(A, B, C)

    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:08:44.997

问题是在你内部`ticketsValid`只是改变局部变量`A`和。因此，当您离开该函数时，所有更改的值都会丢失，并且会再次使用全局空间中的值。`B``C`

`global A, B, C`您可以像在函数中那样再次调用来解决此问题`getTickets`，或者更好的解决方案是让函数*返回*值。所以`getTickets`将返回一个元组`(A, B, C)`，`ticketsValid`将获取该元组并再次返回这样一个元组（带有修改后的值），`calcIncome`然后再次使用。

例如像这样：

```
def getTickets():
    A = int(input("Please enter the number of tickets sold in section A: "))
    B = int(input("Please enter the number of tickets sold in section B: "))
    C = int(input("Please enter the number of tickets sold in section C: "))
    return (A, B, C)

def ticketsValid(A, B, C):
    while A > 300 or A < 0:
        print("ERROR: Section A has a limit of 300 seats")
        A = int(input("Please enter the number of tickets sold in section A: "))
    while B > 500 or B < 0:
        print("ERROR: Section B has a limit of 500 seats")
        B = int(input("Please enter the number of tickets sold in section B: "))
    while C > 200 or C < 0:
        print("ERROR: Section C has a limit of 200 seats")
        C = int(input("Please enter the number of tickets sold in section C: "))
    return (A, B, C)

def calcIncome(A, B, C):
    incomeGenerated = A * secA + B * secB + C * secC
    print("The income generated is $%d" % (incomeGenerated))

def main():
    A, B, C = getTickets()
    A, B, C = ticketsValid(A, B, C)
    calcIncome(A, B, C) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:09:19.530

您在函数头 def TicketsValid(A,B,C): 中使用了与全局变量相同的变量名称。因此，当您在 ticketValid 中覆盖 A、B 或 C 时，您只是在本地覆盖它，而不是全局变量。您需要在函数中使用 globals()['A'] 。

```
def ticketsValid(A,B,C):
    while A > 300 or A < 0:
        print("ERROR: Section A has a limit of 300 seats")
        globals()['A'] = int(input("Please enter the number of tickets sold in section A: "))
    while B > 500 or B < 0:
        print("ERROR: Section B has a limit of 500 seats")
        globals()['B'] = int(input("Please enter the number of tickets sold in section B: "))
    while C > 200 or C < 0:
        print("ERROR: Section C has a limit of 200 seats")
        globals()['C'] = int(input("Please enter the number of tickets sold in section C: ")) 
```

# bash - 将一个文件复制到每个子目录中

> ID：15346464
> 
> 赞同：4
> 
> 时间：2013-03-11T19:02:36.110
> 
> 标签：bash, shell, scripting

我正在尝试`cp`一个文件：`index.php`进入所有子目录，以及这些子目录的子目录，依此类推，这样根目录的每个子目录都有`index.php`

我从这个开始：

```
for d in */; do cp index.php "$d"; done; 
```

仅适用于顶级子目录。我尝试像这样将它嵌套几次：

```
for d in */; do cp index.php "$d"; for e in */; do cp index.php "$e";for f in */; do cp index.php "$f"; done; done; done 
```

但这似乎没有任何作用

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T19:04:27.210

尝试这个 ：

```
find . -type d -exec cp index.php {} \; 
```

## 笔记

*   `-type d`查找所有目录和子目录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:23:48.173

[sputnick](https://stackoverflow.com/users/465183/sputnick)的回答既好又简单。作为记录，这是使用 shell 函数的一种方法。如果操作很复杂或有条件，您可能想要这样的东西。

```
t=$PWD/index.php

recurse () {
  for i in */.; do
    if [ "./$i" != './*/.' ]; then
      (cd "./$i" && cp "$t" . && recurse)
    fi
  done
}

recurse 
```

# ios - 在 iOS 游戏中发送信号

> ID：15346467
> 
> 赞同：0
> 
> 时间：2013-03-11T19:02:58.353
> 
> 标签：ios, cocoa-touch, design-patterns

我正在开发一款游戏，我想知道是否可以发送信号。

在第一关，玩家需要 3 件物品才能获胜

在第二关，玩家需要 5 件物品才能获胜

是否可以向特定对象抛出诸如“ItemTaken”之类的信号

1.  知道水平
2.  处理信号

3.  所以它可以计算玩家是否达到了下一个级别

（我已经简化了事情，但有很多信号）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:10:19.403

就内置 API 而言，您可以查看`NSNotificationCenter`. 文档非常简单：您可以注册以观察通知，并发布由字符串标识的任意通知。所以你可以很容易地写出这样的东西：

```
[[NSNotificationCenter defaultCenter] postNotificationName:MyItemTakenNotification object:theTakenItem]; 
```

如果你想要更复杂的东西，你可以看看[Reactive Cocoa](https://github.com/ReactiveCocoa/ReactiveCocoa)。它是一个以更复杂的方式发送和响应信号的框架。（但是，我自己从未使用过它。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:08:54.600

有几种不同的方法。最简单的方法之一是使用`NSNotifications`单例对象。

创建单例以侦听通知并在通知进入时对其进行处理。收到通知时，它将调用选择器方法：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(processItem)
                                             name:@"kItemTaken"
                                           object:nil]; 
```

并让应用在事件发生时发送通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"kItemTaken" object:nil]; 
```

# sql - 如果不存在 SQL 插入记录

> ID：15346468
> 
> 赞同：6
> 
> 时间：2013-03-11T19:02:59.543
> 
> 标签：sql, sql-server-2008-r2, sql-insert

我要做的是将一个表与另一个临时表进行比较，如果该记录尚不存在，则将其插入表中。我的问题是 IF NOT EXIST 似乎不正确。如果我将代码分开，我遇到的问题是：

返回 29 个结果：

```
SELECT * 
from NO_STOCK INNER JOIN #no_stock
  ON NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE 
WHERE NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE. 
```

这不会返回任何结果（我希望这会返回 34）：

```
SELECT PRODUCT_CODE
FROM #no_stock
WHERE NOT EXISTS
  (SELECT * from NO_STOCK INNER JOIN #no_stock 
    ON NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE 
   WHERE NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE) 
```

这将返回 63：

```
SELECT PRODUCT_CODE
FROM #no_stock
WHERE EXISTS 
  (SELECT * from NO_STOCK INNER JOIN #no_stock 
     ON NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE 
   WHERE NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE) 
```

附言。使用 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:12:32.310

废弃子查询中的内部连接。

您应该尝试的是以下内容：

```
 SELECT PRODUCT_CODE FROM #no_stock
 WHERE NOT EXISTS (SELECT * from NO_STOCK 
              WHERE NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE) 
```

您在这里不需要内部连接，因为在外部查询中引用了 #no_stock 表。

您的其他查询也是如此：

```
 SELECT PRODUCT_CODE FROM #no_stock
 WHERE EXISTS (SELECT * from NO_STOCK 
          WHERE NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE) 
```

试试这些，看看它们是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:11:29.407

如果您的 product_code 在两个表中定义记录，则不需要同时存在和内部连接。

所以我想你正在使用临时表作为参考，并仅在临时表中添加记录的情况下它只存在于临时表中

所以你的查询应该是这样的

```
 insert into no_stock
 select * from #no_stock
 where product_code not in (select product_code from no_stock) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:09:49.827

而不是不存在，尝试

```
WHERE Product_Code NOT IN (SELECT Product_Code FROM NO_STOCK INNER JOIN #no_stock ON NO_STOCK.PRODUCT_CODE #no_stock.PRODUCT_CODE WHERE NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:10:34.910

试试这个...

```
SELECT PRODUCT_CODE FROM #no_stock
WHERE NOT EXISTS (SELECT * from NO_STOCK INNER JOIN #no_stock 
                    ON NO_STOCK.PRODUCT_CODE = #no_stock.PRODUCT_CODE) 
```

# rubymotion - 设置控制器进行测试

> ID：15346481
> 
> 赞同：0
> 
> 时间：2013-03-11T19:04:02.197
> 
> 标签：rubymotion, specifications

我正在尝试使用培根在 ruby​​motion 中为我的控制器编写功能测试。

在我的控制器中，我有一些填充一些数据的代码：

```
def viewWillAppear(animated)
  song_text.text = chant.song_text
  ...
end 
```

`chant`当我将该控制器推到导航控制器时，我正在设置变量。

这在应用程序中运行良好，但是当我尝试在规范的前块中执行此操作时，它不起作用，因为`viewWillAppear`在块之前被调用并且它以`NoMethodError: undefined method 'song_text' for nil:NilClass`.

有没有办法处理这种情况？是否有其他方法来填充数据或使用不同的方法`viewWillAppear`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T15:41:10.653

我遇到了类似的问题，通过在方法中调用方法`super`解决了`viewWillAppear`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T20:32:00.217

The RubyMotion support answered my support ticket indicating, that this is the expected behavior of controllers in bacon.

I worked around the whole thing by stubbing my class under test in the bacon spec like so:

```
# spec/chant_controller_spec.rb
class ChantControllerStub < ChantController
  def chant
    @chant ||= create_chant
  end
end

describe "ChantController" do
  tests ChantControllerStub

  it "displays a chant" do
    view('verse').should.not == nil
  end
end 
```

# javascript - Javascript 函数在 IE8 中不起作用

> ID：15346483
> 
> 赞同：0
> 
> 时间：2013-03-11T19:04:10.913
> 
> 标签：javascript, jquery, internet-explorer

我有这个功能可以在任何带有斜线的文本周围放置一些空格：

```
var startIndex = str.search(">[^<]*/.*</a>");
var index = str.indexOf("/", startIndex);
str = str.substring(0, index) + " / " + str.substring(index + 1); 
```

但由于某种原因，它在 IE8 中不起作用。有谁知道我怎样才能改变它来工作？

# linq - 如何使用 Linq 从实体中选择多行

> ID：15346484
> 
> 赞同：1
> 
> 时间：2013-03-11T19:04:13.067
> 
> 标签：linq, entity-framework, linq-to-sql, linq-to-entities

我想写一个相当于

```
select * from Users 
where Username in ('something@somewhere.com', 'someone@somehting.com') 
```

是否可以在 LINQ 中编写此代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:07:10.453

为了复制 IN 子句的功能，您必须拥有（或创建）一个集合并检查该集合是否包含您正在寻找的值。

```
var search = new string[] {"something@somewhere.com", "someone@somehting.com"};

var results = Users.Where(u => search.Contains(u.Username)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:18:43.053

或者，您可以使用非常懒惰的解决方案

```
 DbEntities db = new DbEntities();
 var users = db.Users.where(u => u.Username == "something@somewhere.com" || u.Username == "someone@somehting.com"); 
```

非常懒惰（初学者 LINQ 开发人员很容易学习）。

# spring - Spring 模板连接到 OpenSSO/JAAS 安全端点

> ID：15346486
> 
> 赞同：0
> 
> 时间：2013-03-11T19:04:24.737
> 
> 标签：spring, spring-mvc, spring-security, jaas, opensso

我正在尝试通过受 OpenSSO/Spring Security 保护的服务器到服务器 GET 请求访问 REST 服务，但无法访问。就像我的 Spring Rest Template 客户端在我通过身份验证工作流重定向时没有状态来保存它应该保存的 cookie。

使用浏览器执行此操作时，初始请求被重定向到 OpenSSO，我的证书 (PKI) 受到挑战，我出示它，获得带有我的身份验证 cookie 标头的响应。然后我被重定向回原来的目的地，我在请求标头中显示我的身份验证 cookie，然后我就在路上了。

这在我的服务器到服务器调用中没有发生。

我已经搜索了很长时间，似乎找不到任何跨重定向保持这种状态的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:13:26.970

关注 zagyi 评论中的链接可能有效，但我花了更多时间找到了以下解决方案，该解决方案不涉及覆盖任何内容：

要在 REST 控制器中处理身份验证 cookie，您必须明确告诉它接受 cookie。在处理调用之前，添加以下代码行：

```
CookieHandler.setDefault(new cookieManager(null, CookiePolicy.ACCEPT_ALL)); 
```

# xcode - 保存 NSMutableArray 并将其加载到 UITableView

> ID：15346487
> 
> 赞同：0
> 
> 时间：2013-03-11T19:04:24.400
> 
> 标签：xcode, sdk, nsmutablearray, save, tableview

我想保存多个 NSMutableArray 并加载它，因为这个数组从服务器获取它的内容，我不想每次打开应用程序时都重新加载该数据。首先我声明了路径：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
     NSString *documentsDirectory = [paths objectAtIndex:0];
     NSString *firstPath = [documentsDirectory stringByAppendingPathComponent:@"first"];
     NSString *secondPath = [documentsDirectory stringByAppendingPathComponent:@"second"];
     NSString *thirdPath = [documentsDirectory stringByAppendingPathComponent:@"third"];
     NSString *fourthPath = [documentsDirectory stringByAppendingPathComponent:@"fourth"]; 
```

然后保存 NSMutableArrays：

```
 [firstArray writeToFile:firstPath atomically:YES];
         [secondArray writeToFile:secondPath atomically:YES];
         [thirdArray writeToFile:thirdPath atomically:YES];
         [fourthArray writeToFile: fourthPath atomically:YES]; 
```

然后在其他 NSMutableArrays 中打开这些文件：

```
 firstArrayget = [NSMutableArray arrayWithContentsOfFile:firstPath];
    secondArrayget = [NSMutableArray arrayWithContentsOfFile:secondPath];
    thirdArrayget = [NSMutableArray arrayWithContentsOfFile:thirdPath];
    fourthArrayget = [NSMutableArray arrayWithContentsOfFile:fourthPath]; 
```

然后我尝试将这些数组（...Arrayget 即 firstArrayget）加载到 TableView 中。

数据被加载到 TableView 中，但是当我向下滚动时，应用程序崩溃并出现错误：

```
*** -[CFArray objectAtIndex:]: message sent to deallocated instance 0x930fc80 
```

并在文件中：

```
Thread 1:EXC_BREAKPOINT(code=EXC_1386_BPT,subcode=0x0) 
```

但是如果我说 TableView 从 (...Array ie firstArray) 加载数据，那么从服务器下载的数据未保存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:09:40.280

假设您使用的是 MRC 而不是 ARC：
看起来您正在将 ivar 设置为 autoreleased `NSMutableArray`。
尝试调用s，否则当自动释放池耗尽时，您`retain`的s 将被释放并因此被释放。另一种解决方案是为您的每个s 使用一个属性，如下所示： `NSMutableArray``NSMutableArray``NSMutableArray`

```
// Create a property in your header file
@property (retain) NSMutableArray *firstArrayget;

// And set the property in your method
[self setFirstArrayGet:[NSMutableArray arrayWithContentsOfFile:firstPath]]; 
```

[您可以在https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)找到有关 Objective-C 内存管理的更多信息

# android - jsoup 节点与元素拉取值

> ID：15346488
> 
> 赞同：0
> 
> 时间：2013-03-11T19:04:24.983
> 
> 标签：android, jsoup

```
<div class="eight columns">
<form method="post" action="http://www.way2franchise.com/search/filter_franchise">

<div style="margin-bottom:10px;margin-top:20px;">

<select name="industry" id="industry" class="searchBoxSel" title="Select Industry">

<option value="candies_and_confectioneries">Candies and Confectioneries</option>
<option value="childrens_services"> Children's Services</option>
<option value="sports_and_recreatio">Sports &amp; Recreation</option>
<option value="staffing_franchises">Staffing Franchises</option> 
```

```
<div style="margin-bottom:10px;">
<select name="investment" id="investment" class="searchBoxSel" title="Select     Investment">

<option value="">Select Investment</option>
<option value="2500000">Under Rs.2,500,000</option>
<option value="10000000">Under Rs.10,000,000</option>
<option value="50000000">Under Rs.50,000,000</option>
</select>
</div>

<div style="margin-bottom:10px;">
<select class="searchBoxSel" title="Select State" id="state" name="state">
<option value="">Select State</option>
<option value="Andaman and Nicobar Islands">Andaman and Nicobar</option>
<option value="Andhra Pradesh">Andhra Pradesh</option>
<option value="Arunachal Pradesh">Arunachal Pradesh</option>

</select>
</div>
</form></div>

    Here, I need to get the option value pair in an array.While testing the code out i executed the following code:

     String q=doc.select("eight columns").text();
     System.out.println(q); 
```

使用 Jsoup 选择器语法，我应该将整个代码放入字符串 'q' 中。但我得到的是一个空值（logcat）。如何？

还有 doc.select("h3.r > a> p >h1") 是什么意思？我没有找到任何关于此的好的教程。即使 jsoup 食谱也没有从更广泛的方面解释这些概念。

我经历了 DOM 概念，如父、兄弟概念。在那里我阅读了有关节点的概念。所以在写一些东西作为 Elements e=doc 时。.... 或元素 e=doc

我们可以代替创建节点吗？这可行吗，推荐？

我几乎无法从 html 中转义字符串中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:00:37.727

如果你想获得类“八列”，你可以使用 getElementsByClass() 例子：

```
Elements eightcolumns = doc.getElementsByClass("eight columns");
            String str = eightcolumns.first().text(); 
```

或选择（）：

```
 Elements eightcolumns = doc.select("div.eight columns");
            String str = eightcolumns.first().text(); 
```

# mysql - mysql全文搜索自然语言模式与布尔模式准确性

> ID：15346495
> 
> 赞同：2
> 
> 时间：2013-03-11T19:04:54.860
> 
> 标签：mysql, full-text-search

我有在线商店的商品表，它在 item_title、item_description、item_category 列上有全文索引。我想编写搜索脚本，但在决定以哪种模式搜索（自然语言或布尔模式）时遇到问题。假设用户搜索`intel core i5 notebooks`. 如果我在搜索脚本中设置自然语言模式，用户将无法搜索查询`intel core i5 notebooks -apple`。谁能解释一下自然语言模式和布尔模式之间的区别？哪个更准确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-05-07T07:05:01.097

基本上区别在于[this](https://dev.mysql.com/doc/refman/8.0/en/fulltext-natural-language.html)和[this](https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html)

在你的情况下，我可以说你需要布尔模式

`'+"intel core i5 notebooks" -apple'`

# mysql - 按随机和 LIKE 排序

> ID：15346497
> 
> 赞同：1
> 
> 时间：2013-03-11T19:04:59.170
> 
> 标签：mysql, sql-like

我想从数据库中获取随机行，但使用一些内容来限制它。

例如表的定义：

`id | content | tags`

查询是：`SELECT * FROM tbl ORDER BY RAND() LIMIT 1`。

标签部分看起来像：`tag1, tag2, tag42`. 因此，例如，我想要一个随机行，其中包含`tag42`or `tag2`inside `tags`。

一些伪代码：

`SELECT * FROM tbl ORDER BY RAND() WHERE tags LIKE '%tag42%' OR '%tags2%' LIMIT 1`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:08:07.070

您的伪代码几乎是正确的，除了您的子句顺序错误：`WHERE`来之前`ORDER BY`

```
SELECT * FROM tbl WHERE tags LIKE '%tag42%' OR '%tags2%' ORDER BY RAND() LIMIT 1 
```

请参阅[文档以了解`SELECT`语法](http://dev.mysql.com/doc/refman/5.6/en/select.html)，以免再次出错

# sql - 如何将查询中的数据导出到具有固定列宽的文本文件？

> ID：15346503
> 
> 赞同：1
> 
> 时间：2013-03-11T19:05:25.203
> 
> 标签：sql, ssis

我是唯一一个认为 SSIS 是一块*****的人吗？

我有一个查询：

```
SELECT * FROM Table1 
```

我想做的是将其放入目标文件中具有特定长度的文本文件中（我有来自客户端的规范）。

例如，字段 1 大小：20，字段 2 大小：3，依此类推。

我还有场位，场1：1-20，场2：21-23等。

我创建了一个 SSIS 包，它有一个源作为 SQL 查询，一个平面文件作为目标。我这辈子都无法让它发挥作用。

文本文件上的数据都乱七八糟（它分散在所有地方，没有列）。

这是世界上最简单的任务，我做不到。我不知道是我还是 SSIS 只是一个废话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:12:18.407

转到您为平面文件定义的连接管理器。在左侧框中，选择常规并将格式设置为“固定宽度”。然后在左侧框中，选择 Advanced，在这里您可以为每个字段设置 OutputColumnWidth。最后，在左侧框中，选择“预览”以在执行 SSIS 包之前验证结果。

希望这可以帮助。科什

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-10T17:33:14.310

实际上，我上周才这样做。我编写了一个函数，然后为我调用该函数的每个字段执行此操作。

这是功能

```
/*
USE [Newton-Dev]
GO
/****** Object:  UserDefinedFunction [dbo].[CharPad]    Script Date: 1/10/2015 11:38:27 AM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
/*
Script  : Character Padding Function; Assist with fixed width file creation
Version : 1.0 (01/08/2015)
Author  : Jeffery Williams

*/
ALTER FUNCTION [dbo].[CharPad] (
     @Input VARCHAR(255)
    ,@OutputWidth INT
    ,@OutputAlign VARCHAR(5)
    ,@PadCharacter CHAR(1) )
RETURNS VARCHAR(255)
AS
BEGIN
DECLARE @Output VARCHAR(255)
DECLARE @InputWidth INT

SET @InputWidth = LEN(@Input)

IF @InputWidth > @OutputWidth
    BEGIN 
        IF @OutputAlign = 'LEFT'
            BEGIN
            SET @Output = LEFT(@Input,@OutputWidth)
            END
        IF @OutputAlign = 'RIGHT'
            BEGIN
            SET @Output = RIGHT(@Input,@OutputWidth)
            END
    END

IF @InputWidth < @OutputWidth 
    BEGIN 
        IF @OutputAlign = 'RIGHT'
            BEGIN
            SET @Output = REPLICATE(@PadCharacter, @OutputWidth - @InputWidth ) + @Input
            END
        IF @OutputAlign = 'LEFT'
            BEGIN
            SET @Output =@Input+ REPLICATE(@PadCharacter, @OutputWidth - @InputWidth )
            END
    END

IF @InputWidth = @OutputWidth 
    SET @Output = @Input

RETURN (@Output)
END 
```

这是调用该函数并提供固定宽度输出的查询：

```
SELECT --dbo.CharPad (DeltaLineId,8,'LEFT',' '), dbo.CharPad (DeltaElgId,8,'LEFT',' ')
       dbo.CharPad (CARRIER_ID,6,'LEFT',' ')
       ,dbo.CharPad (GROUP_NUM,7,'RIGHT','0')
      ,dbo.CharPad (LEFT('0000' + SUB_GROUP_ID, 4),9,'LEFT',' ')
      ,dbo.CharPad (SVC_TYPE,1,'LEFT',' ')
      ,dbo.CharPad (FILLER_1,1,'LEFT',' ')
      ,dbo.CharPad (FILLER_2,5,'LEFT',' ') 
      ,dbo.CharPad (RATE_CODE,2,'LEFT',' ')
      ,dbo.CharPad (FILLER_3,1,'LEFT',' ')
      ,dbo.CharPad (ELIG_CODE,1,'LEFT',' ')
      ,dbo.CharPad (EFF_DATE,8,'LEFT',' ') 
      ,dbo.CharPad (TERM_DATE,8,'LEFT',' ') 
      ,dbo.CharPad (SUBSC_SSN,9,'LEFT',' ')  
      ,dbo.CharPad (INDIV_SSN,9,'LEFT',' ') 
      ,dbo.CharPad (CHNG_SSN,9,'LEFT',' ')   
      ,dbo.CharPad (REL_CODE,2,'LEFT',' ') 
      ,dbo.CharPad (HIRE_DATE,8,'LEFT',' ')  
      ,dbo.CharPad (DOB,8,'LEFT',' ') 
      ,dbo.CharPad (REL_TYPE,1,'LEFT',' ')  
      ,dbo.CharPad (FIRST_NAME,24,'LEFT',' ') 
      ,dbo.CharPad (MID_NAME,24,'LEFT',' ')                 
      ,dbo.CharPad (LAST_NAME,24,'LEFT',' ') 
      ,dbo.CharPad (GENDER,1,'LEFT',' ')  
      ,dbo.CharPad (POP_DESC,5,'LEFT',' ') 
      ,dbo.CharPad (ADR_LINE_1,30,'LEFT',' ')                      
      ,dbo.CharPad (ADR_LINE_2,30,'LEFT',' ') 
      ,dbo.CharPad (CITY,30,'LEFT',' ')                           
      ,dbo.CharPad ([STATE],2,'LEFT',' ') 
      ,dbo.CharPad (COUNTY_CODE,3,'LEFT',' ')  
      ,dbo.CharPad (COUNTRY_CODE,3,'LEFT',' ') 
      ,dbo.CharPad (ZIP,5,'LEFT',' ')    
      ,dbo.CharPad (ZIP_EXT,4,'LEFT',' ') 
      ,dbo.CharPad (FILLER_4,21,'LEFT',' ')               
      ,dbo.CharPad (USER_DEFINED,30,'LEFT',' ') 
      ,dbo.CharPad (WAIT_PERIOD,1,'LEFT',' ')  
      ,dbo.CharPad (CAID,9,'RIGHT','0') 
      ,dbo.CharPad (FILLER_5,9,'LEFT',' ') 
FROM export.DeltaLine

*/ 
```

# jquery - jQuery Datepicker - 只选择几天

> ID：15346504
> 
> 赞同：1
> 
> 时间：2013-03-11T19:05:25.953
> 
> 标签：jquery, jquery-ui-datepicker

我试图让我的日期选择器更好，但我只设法启用（首先我禁用了所有）星期一和星期四，但现在我遇到了特定日期的问题。我尝试了很多可能性，但要么选择每月 21 日，要么根本不起作用。

现在我正在尝试启用该日期（2013,04,21）（以后可能会更多）

```
 $( '#vfb-datum-75' ).datepicker({
              beforeShowDay: settings,
  });  

  function settings(date) {
      if (date.getDay() == 1)       
          { return [true, "","Works"];
      } else if (date.getDay() == 4)
          { return [true, "","Works"];
      } else if (date.getDate() == (2013,04,21))  <-- this doesn't work
          { return [true, "","Works"];
      } else { return [false,"",""]; 
  }} 
```

感谢帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:49:46.117

[http://jsfiddle.net/f7kAc/](http://jsfiddle.net/f7kAc/)

您可以比较年、日和月。请记住，该月是从零开始的。

```
date.getDate() == 21 && date.getMonth() == 3 && date.getFullYear() == 2013 
```

[http://jsfiddle.net/f7kAc/1/](http://jsfiddle.net/f7kAc/1/)

您也可以使用此方法将日期转换为另一个日期。

```
date - new Date(2013, 3, 21) == 0 
```

但是，如果您打算将此功能扩展为拥有 50 多个特殊日期，您可能需要一些更快速、更易于配置的东西。

```
var specialDays = 
{2013 : 
  {
      3 : 
          {
              21 : [true, "", "WORKS"]
          },
      4 : 
          {
              15 : [true, "", "WORKS"],
              17 : [true, "", "WORKS"]
          },
  },
}; 
```

然后在你的函数中：

```
... else if (!!specialDays[date.getYear()] && !!specialDays[date.getYear()][date.getMonth()] && !!specialDays[date.getYear()][date.getMonth()][date.getDate()]) {
  return specialDays[date.getYear()][date.getMonth()][date.getDate()];
} 
```

# ruby-on-rails-3 - 如何检查我的 rails 应用程序中是否运行了 jquery-ui？

> ID：15346509
> 
> 赞同：0
> 
> 时间：2013-03-11T19:05:33.390
> 
> 标签：ruby-on-rails-3, jquery-ui

这听起来像是一个非常愚蠢的问题（也许确实如此），但我有理由相信 jquery-ui 没有在我的 rails 应用程序上正常运行，尽管我的理解是它是由以前的开发人员安装的。有没有一种快速的方法来检查它是否正确安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:25:10.763

如果您使用的是 Chrome（或带有 firebug 的 Firefox），您可以打开控制台 (ctrl-shift-i) 并单击资源选项卡。您应该在脚本文件夹“jquery-ui.js”之一下找到它

或者，您可以询问jquery-ui中定义的方法之一是否未定义，例如

typeof $.removeUniqueId == '未定义'

# java - 如何在 Java 中的 ArrayList 中找到平均成绩和最高成绩？

> ID：15346511
> 
> 赞同：0
> 
> 时间：2013-03-11T19:05:43.660
> 
> 标签：java, arraylist, average

在这段代码中，我想找出一个学生的最高分，以及所有分数的平均值。通过用户输入将标记放入 ArrayList 中。我已经完成了一半，但不知道如何完成它，我想知道如何找到最高分。

谢谢。

```
import java.util.*;
import java.lang.*;
class Course
{
    private ArrayList<Student> people = new ArrayList<Student>();

    public void add( Student s )
    {
        people.add( s );
    }
    //Return the number of students who passed (mark>= 40)
    public int pass()
    {
        int count = 0;
        for ( int i=0; i < people.size(); i++ )

        {
            int mark = people.get(i).getMark();
            if(mark < 40){
                count = count +1;
            }
        }

        return count;
    }

    public int fail()
    {
        int count = 0;
        for ( int i=0; i < people.size(); i++ )

        {
            int mark = people.get(i).getMark();
            if(mark < 40){
                count = count +1;
            }
        }

        return count;
    }

   public String top()
   {

   }

    public double average()
    {
        int sum=0;

        for (int i=0; i < people.size(); i++ )
        {
            double average = sum / (double) i;
        }

        return sum;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:10:56.007

使用`Collections.max(people, yourComparator)`where `yourComparator`uses`getMark`作为比较字段：您可以这样做：

```
Student maxStudent = Collections.max(people, new Comparator<Student>() {
    @Override
    public int compare(Student first, Student second) {
        if (first.getMark() > second.getMark())
            return 1;
        else if (first.getMark() < second.getMark())
            return -1;
        return 0;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:12:46.680

您可以通过在 add(Student) 方法中收集统计信息来完成此操作：

```
public class Course {
    private ArrayList<Student> people = new ArrayList<Student>();
    private int passing = 0;
    private int failing = 0;
    private int top = Integer.MIN_VALUE;
    private int sum = 0;

    public void add( Student s ) {
        people.add( s );
        if(s.getMark() >= 40){
            passing++;
        }
        else {
            failing++;
        }
        sum += s.getMark();
        if(s.getMark() > top) {
            top = s.getMark();
        }
    }

    public int pass() {
        return passing;
    }

    public int fail() {
        return failing;
    }

    public int top() {
        return top;
    }

    public double average() {
        return sum / people.size();
    }
} 
```

要直接回答您的问题，只需将每个标记与最大找到标记进行比较即可找到顶部。通过将总和除以标记数来找到平均值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:11:12.963

为了获得最高分，您创建一个变量，每次找到更高的分数时都将其替换。如果您已经在循环，您可以通过将循环中的所有标记相加并将其除以总人数来找到平均值。在这里，我在同一个循环中完成了两者：

```
int totalMark = 0;
int topMark = 0;
for (int i=0; i< people.size(); i++) {
    int mark = people.get(i).getMark(); 
    if (mark > topMark) {
        topMark = mark;
    }
    totalMark += mark;
}
int averageMark = totalMark / people.size(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-27T03:22:43.940

检查这个。它可能会帮助你。

[Java程序查找除前三名之外的所有数字的平均值](http://msumca2012.blogspot.in/2013/07/java-a2p3-java-program-to-find-average.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T19:58:35.537

您可以使用您的类实现`Comparable`接口（[http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)），`Student`然后使用`Collections`（[http://docs.oracle.com/javase /1.4.2/docs/api/java/util/Collections.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html)）要使用的类`max`和`min`函数来获取最大和最小等级值。要获得平均成绩值，您只需迭代`ArrayList`制作成绩值的总和，最后将总和除以`ArrayList.size()`.

# ssl - 如何使用 SelfSSL 创建自签名证书

> ID：15346512
> 
> 赞同：2
> 
> 时间：2013-03-11T19:05:45.327
> 
> 标签：ssl, ssl-certificate, self-signed

我使用 IIS 管理器创建了一个自签名证书，但是当我尝试访问该网站时，我只发现此消息：

![证书与 URL 不匹配](../Images/c52bf71341a3a4f00dd0cb10a9ca81c1.png)

我发现[本教程](http://www.robbagby.com/iis/self-signed-certificates-on-iis-7-the-easy-way-and-the-most-effective-way/)很好地描述了我的问题：我的证书是为计算机本地网络名称而不是网站地址颁发的。本教程解释了如何使用 SelfSSL 创建证书。现在我的问题是，当我运行 SelfSSL 时，它没有显示任何错误，但也没有创建任何证书......

有没有其他方法可以创建正确颁发的自签名证书？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:18:49.810

这里的答案：[在 IIS Express 中创建一个自签名证书](https://stackoverflow.com/questions/8494864/create-a-self-signed-certificate-within-iis-express)，使用 Visual Studio `makecert`，可能值得一试。这里还有一个使用 OpenSSL 实现相同目的的教程：[http](http://www.dylanbeattie.net/docs/openssl_iis_ssl_howto.html) ://www.dylanbeattie.net/docs/openssl_iis_ssl_howto.html 。

# php - 如何格式化html数组

> ID：15346515
> 
> 赞同：-2
> 
> 时间：2013-03-11T19:05:49.760
> 
> 标签：php, jquery, html, arrays

我有一个大表单，我需要以这种数组格式发布我的 HTML 表单。我遇到的问题是如何获得编号为 0、1、2、3、... 的站点，如下所示？

```
$processes["stations"] = array(
        "0" => array(
            "name" => "Name 1",
            "id" => "2",
            "value"=>"15"
        ),
        "1" => array(
            "name" => "Name 2",
            "id" => "2",
            "value"=>"30"
        )
    ); 
```

这是我的 HTML 表单，可以由 jQuery 动态生成。

```
<input type="text" name="process[stations][name][]" />
<input type="text" name="process[stations][id][]" />
<input type="text" name="process[stations][value][]" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:07:51.127

```
<input type="text" name="process[stations][0][name]" />
<input type="text" name="process[stations][0][id]" />
<input type="text" name="process[stations][0][value]" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:10:54.617

你会这样做：

```
<input type="text" name="process[stations][0][name]" />
<input type="text" name="process[stations][0][id]" />
<input type="text" name="process[stations][0][value]" />

<input type="text" name="process[stations][1][name]" />
<input type="text" name="process[stations][1][id]" />
<input type="text" name="process[stations][1][value]" /> 
```

ETC

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:23:25.910

使用带有循环的 node.appendChild 使用 JavaScript / jQuery 动态生成表单。

编辑：尝试阅读[将元素添加到 DOM](http://www.javascriptkit.com/javatutors/dom2.shtml)

# javascript - 自定义 Dojo 小部件是否应该包含容器

> ID：15346516
> 
> 赞同：1
> 
> 时间：2013-03-11T19:05:57.083
> 
> 标签：javascript, dojo, widget

所以我想创建一个自定义小部件，其中包含一些表单字段。我无法预见到我需要在我现在编写它的单一目的之外重用它的情况。我希望小部件出现在 dijit 对话框中。

话虽如此，让小部件本身的 Dialog 部分是更好的做法吗？或者我应该将小部件保留在“自由形式”的 HTML 结构中，可以放置在任何东西中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T01:46:51.350

如果您需要自定义 Dialog 小部件的功能，那么最好让您的小部件继承自 Dialog。但是，如果您只想要一个自定义表单小部件，那么最好将您的小部件保留为它自己的模块，该模块可用作对话框小部件`content`（或您需要的任何其他地方）。

# postgresql - 我对 PostgreSQL 有点陌生，需要如何构造复杂的查询

> ID：15346519
> 
> 赞同：1
> 
> 时间：2013-03-11T19:06:06.800
> 
> 标签：postgresql

我需要列出您在另一个城市停留后可以到达的所有城市，从我选择的任何城市开始。并列出到最终城市和中间城市的距离。

数据库中的表由城市组成，具有以下属性：

```
| city_id |   name    |  
  1         Edinburgh  
  2         Newcastle  
  3         Manchester 
```

城市对：

```
| citypair_id | city_id |  
  1             1  
  1             2  
  2             1    
  2             3  
  3             2  
  3             3 
```

和距离：

```
| citypair_id | distance |
  1             1234
  2             1324
  3             1324 
```

和火车：

```
| train_id | departure_city_id | destination_city_id |
  1          1                   2
  2          2                   3
  3          1                   3
  4          3                   2 
```

我没有输入任何数据，但基本上，如果我随机选择了一个 city.name，我需要找出如果我经过另一个城市（即两次旅行）我可以从这个城市到达哪些城市，并且然后是到最终和中间城市的距离。

您将如何或我应该如何着手形成查询以返回所需的表？

* * *

编辑以包括数据和缺失的表格！例如，您可以从爱丁堡 (1) 经纽卡斯尔 (2) 前往曼彻斯特 (3)，您可以从爱丁堡经曼彻斯特前往纽卡斯尔，但您不能从曼彻斯特经纽卡斯尔前往爱丁堡（因为火车从 3 号发车） , 到达 2，但 1) 中没有来自 2 的火车到达，并且此路线不应从查询中返回。事先为任何混淆道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:57:42.197

我有一个 CTE，可以构建所有目的地的树。

```
WITH RECURSIVE trip AS (
  SELECT c.city_id AS start_city,
    ARRAY[c.city_id] AS route,
    cast(c.name AS varchar(100)) AS route_text,
    c.city_id AS leg_start_city,
    c.city_id AS leg_end_city,
    0 AS trip_count,
    0 AS leg_length,
    0 AS total_length
  FROM cities c
UNION ALL
  SELECT
    trip.start_city,
    trip.route || t.destination_city_id,
    cast(trip.route_text || ',' || c.name AS varchar(100)),
    t.departure_city_id,
    t.destination_city_id,
    trip.trip_count + 1,
    d.distance,
    trip.total_length + d.distance
  FROM trains t
  INNER JOIN trip
    ON t.departure_city_id =  trip.leg_end_city
  INNER JOIN citypairs cps
    ON t.departure_city_id = cps.city_id
  INNER JOIN citypairs cpe
    ON t.destination_city_id = cpe.city_id AND
       cpe.citypair_id = cps.citypair_id
  INNER JOIN distances d
    ON cps.citypair_id = d.citypair_id
  INNER JOIN cities c
     ON t.destination_city_id = c.city_id
  WHERE NOT (array[t.destination_city_id] <@ trip.route))
SELECT *
FROM trip
WHERE trip_count = 2
AND start_city = (SELECT city_id FROM cities WHERE name = 'Edinburgh'); 
```

CTE从每个城市开始（在开始的非递归部分），然后确定它可以去的所有目的地城市。它在一个数组（路线列）中跟踪它去过的所有城市，所以它不会再循环回到自己。随着它的进展，它会跟踪总行程距离，以及乘坐的火车数量（在trip_count中）。

当它穿过树时，它会保持运行的总距离。

这给出了结果

```
| START_CITY | ROUTE |                     ROUTE_TEXT | LEG_START_CITY | LEG_END_CITY | TRIP_COUNT | LEG_LENGTH | TOTAL_LENGTH |
--------------------------------------------------------------------------------------------------------------------------------
|          1 | 1,2,3 | Edinburgh,Newcastle,Manchester |              2 |            3 |          2 |       1324 |         2558 |
|          1 | 1,3,2 | Edinburgh,Manchester,Newcastle |              3 |            2 |          2 |       1324 |         2648 | 
```

如果您更改删除最后的 WHERE 子句，它将显示数据中所有可能的行程，同样您可以更改 trip_count 以查找所有单个火车目的地等。

```
| START_CITY | ROUTE |                     ROUTE_TEXT | LEG_START_CITY | LEG_END_CITY | TRIP_COUNT | LEG_LENGTH | TOTAL_LENGTH |
--------------------------------------------------------------------------------------------------------------------------------
|          1 |     1 |                      Edinburgh |              1 |            1 |          0 |          0 |            0 |
|          2 |     2 |                      Newcastle |              2 |            2 |          0 |          0 |            0 |
|          3 |     3 |                     Manchester |              3 |            3 |          0 |          0 |            0 |
|          1 |   1,2 |            Edinburgh,Newcastle |              1 |            2 |          1 |       1234 |         1234 |
|          1 |   1,3 |           Edinburgh,Manchester |              1 |            3 |          1 |       1324 |         1324 |
|          2 |   2,3 |           Newcastle,Manchester |              2 |            3 |          1 |       1324 |         1324 |
|          3 |   3,2 |           Manchester,Newcastle |              3 |            2 |          1 |       1324 |         1324 |
|          1 | 1,2,3 | Edinburgh,Newcastle,Manchester |              2 |            3 |          2 |       1324 |         2558 |
|          1 | 1,3,2 | Edinburgh,Manchester,Newcastle |              3 |            2 |          2 |       1324 |         2648 | 
```

cast( ... as varchar(100)) 有点笨拙，我不确定为什么需要它，但我还没有机会解决这个问题。

SQL 在这里进行测试： [http ://sqlfiddle.com/#!1/93964/24](http://sqlfiddle.com/#!1/93964/24)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T21:22:14.090

第一部分很简单：

```
SELECT c2.name
FROM cities AS c
JOIN trains t ON c.city_id=t.departure_city_id
JOIN trains t2 ON t.destination_city_id=t2.departure_city_id
JOIN cities AS c2 ON t2.destination_city_id=c2.city_id
WHERE c2.city_id!=c.city_id
AND c.name='Edinburgh'; 
```

[http://sqlfiddle.com/#!12/a656f/14](http://sqlfiddle.com/#!12/a656f/14) 在 PG 9.1+ 中，您甚至可以使用递归 CTE 来处理中间任意数量的城市。距离有点复杂，您可能最好将 city_pairs 转换为实际对。

# c++ - C++ libclang：从返回错误光标的 CXSourceLocation 检索光标？

> ID：15346521
> 
> 赞同：4
> 
> 时间：2013-03-11T19:06:16.207
> 
> 标签：c++, clang, libclang

我目前正在使用带有 C++ 的 libclang 编写一个简单的克隆检测器。

该程序使用结构存储游标，其中包含指向翻译单元的指针和通过调用 clang_getCursorLocation(cursor) 获得的 CXSourceLocation。

```
typedef struct {
    CXTranslationUnit* tu;
    CXSourceLocation srcLoc;
} t_cursorLocation; 
```

为了这个错误，子访问者函数访问每个节点并从每个游标创建一个结构。使用 t_cursorLocation 类型的结构，我编写了这个函数来检索相应的光标：

```
CXCursor getCursor(t_cursorLocation *loc1) {
    return clang_getCursor(*loc1->tu, loc1->srcLoc);
} 
```

但是，对于某些游标，当我创建 t_cursorLocation 结构并使用它来检索从中创建的游标时，检索到的游标不等于它源自的游标。例如，查看子访问者函数：

```
CXChildVisitResult traverseAST(CXCursor cursor, CXCursor parent,
                                                CXClientData client_data) {
    CXTranslationUnit tu = clang_Cursor_getTranslationUnit(cursor);
    CXTranslationUnit tu2 = *((CXTranslationUnit *) client_data);

    t_cursorLocation *loc = new t_cursorLocation();
    loc->tu = &tu;
    loc->srcLoc = clang_getCursorLocation(cursor);

    CXCursor c2 = getCursor(loc);
    printf("CursorKind\t%s\n",
           clang_getCString(clang_getCursorKindSpelling(cursor.kind)));
    if (clang_equalCursors(cursor, c2)) {
        printf("Noooo - the cursors do not match! Next test.....");
        // use translation unit passed as client_data to see if
        // there's a difference
        loc->tu = &tu2;
        c2 = getCursor(loc);
        if (clang_equalCursors(cursor, c2)) {
            printf("FAILED ALSO!\n");
        } else {
            printf("PASSED???\n");
        }
    } else {
        printf("We have a match!\n");
    }
    return CXChildVisit_Recurse;
} 
```

我的主要功能如下：

```
int main(int argc, char **argv) {
    CXIndex index = clang_createIndex(0, 0);
    // initialise the translation unit
    CXTranslationUnit tu = clang_parseTranslationUnit(index, 0,
        argv, argc, 0, 0, CXTranslationUnit_None);

    // set the client data in traverseAST
    CXClientData data = &tu;// NULL;
    // get the root cursor for the translation unit
    CXCursor rootCursor = clang_getTranslationUnitCursor(tu);
    clang_visitChildren(rootCursor, traverseAST, data);

    clang_disposeTranslationUnit(tu);
    clang_disposeIndex(index);

    return 0;
} 
```

我运行它的虚拟源代码如下：

```
void goo() {
    // nothing here
}

void foo() {
    // do something
    int a;
    switch (a) {
        case 0:
            goo();
    };
} 
```

但是输出是一致的，这表明这只发生在某些游标类型上。

这是一个错误还是我遗漏了什么或做错了什么？

在此先感谢，雅各布

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:12:58.303

要么我完全错过了你的观点，要么你使用`clang_equalCursors`了错误的方式：当两个光标相等时，`clang_equalCursors`返回一个非零值。这意味着我认为您正在测试游标不等式而不是等式。

现在，让我尝试解释为什么某些游标的行为显然与其他游标不同。每个光标只有一个源位置。但是，同一源位置可能有多个游标。例如考虑以下行：

```
CXIndex index = clang_createIndex(0, 0);
//      ^ 
```

上面标记的位置应该至少有两个光标：

1.  变量声明：`index`
2.  DeclRefExpr：`index = clang_createIndex(0,0)`

当您将源位置转换回游标时，`clang_getCursor`会为您提供最具体的位置（在本例中为变量声明）。我怀疑这就是在这种情况下发生在你身上的事情：`getCursor(loc)`只有当你正在访问的光标在它的位置是最具体的时才会给你返回。

尝试打印每个光标的物理源位置（例如使用[clang_getCursorExtent](http://clang.llvm.org/doxygen/group__CINDEX__CURSOR__SOURCE.html#ga79f6544534ab73c78a8494c4c0bc2840)和[clang_getExpansionLocation](http://clang.llvm.org/doxygen/group__CINDEX__LOCATIONS.html#gadee4bea0fa34550663e869f48550eb1f)）以了解发生了什么。

# javascript - 等到文档准备好来呈现页面？

> ID：15346527
> 
> 赞同：-1
> 
> 时间：2013-03-11T19:06:30.367
> 
> 标签：javascript, jquery

我的文档就绪函数中有很多 JS，它们基于 cookie 隐藏/显示 div。加载时我不喜欢它有一些奇怪的变化。有没有办法抑制我加载的页面渲染或其他什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:11:15.137

你可以使用 .blockUI() 插件。这是一个漂亮的插件。

[看这里](http://www.malsup.com/jquery/block/)

# javascript - jQuery - API 选项作为一个函数？

> ID：15346532
> 
> 赞同：0
> 
> 时间：2013-03-11T19:06:45.297
> 
> 标签：javascript, jquery, function, parameters

我正在玩[Instafeed](http://instafeedjs.com/)插件，并显示了一个选项作为函数：

```
<script type="text/javascript">
    var feed = new Instafeed({
        get: 'tagged',
        tagName: 'awesome',
        clientId: 'YOUR_CLIENT_ID'
    });
    feed.run();
</script> 
```

> before (function) - 在从 Instagram 获取图像之前调用的回调函数。

如何设置此选项？我试过了

```
before: 'Loading...', 
```

但显然什么也没发生。

如何将参数设置为函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:12:45.490

javascript 中的函数只是一类特殊的对象。您可以像分配任何其他对象一样分配它们：

```
var beforeFunc = function(){...};

...

before: beforeFunc, 
```

或内联定义

```
before: function(){....}, 
```

确保您传递的是函数对象，而不是函数的结果。这将无法正常工作

```
before: beforeFunc(), 
```

因为它将运行函数并设置`before`为返回值

### 更新

因此，如果您想显示一条消息，您可以像这样在页面的某处定义一个消息区域

```
<div id="messageArea"></div> 
```

然后像这样设置你的 beforeFunc

```
var beforeFunc = function(){
    $("#messageArea").html("loading...");
} 
```

然后你可以在完成后清除它

```
var afterFunc = function(){
    $("#messageArea").html("");
}

...

before:beforeFunc,
after: afterFunc, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:07:42.297

```
before: function() {
 /* function code to execute here */
} 
```

# css - wordpress 主题中的下拉菜单

> ID：15346536
> 
> 赞同：0
> 
> 时间：2013-03-11T19:07:02.770
> 
> 标签：css, drop-down-menu

我正在使用一个名为 Pitch [siteorigin.com/theme/pitch](http://siteorigin.com/theme/pitch)的免费 wordpress 主题。我重新设计了菜单栏，以便菜单栏第一个元素的背景显示图像（徽标）。为此，我只需添加一个简单的代码块

```
ul#mainmenu-menu li.menu-item:first-child {
        background:url(images/logo.png) no-repeat ;
        text-indent:-9999px;
        width:200px;

        border:none;
        }
    ul#mainmenu-menu li.menu-item:first-child a:hover  {
        background:none;

    } 
```

但问题是，该图像也出现在下拉项的第一个元素中。喜欢图片 [http://i46.tinypic.com/oejcz.jpg](http://i46.tinypic.com/oejcz.jpg)

我做错了什么，我该如何解决这个问题？

这是完整的 CSS 代码[http://pastebin.com/edsYrqWF](http://pastebin.com/edsYrqWF)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:17:53.727

像这样更改您的CSS：

```
ul#mainmenu-menu > li.menu-item:first-child {
    background:url(images/logo.png) no-repeat ;
    text-indent:-9999px;
    width:200px;
    border:none;
}
ul#mainmenu-menu > li.menu-item:first-child a:hover  {
    background:none;
} 
```

它仅适用于您的第一个菜单级别，而不适用于子菜单。请注意 CSS 中的“>”。

更多信息在这里：[http ://www.w3.org/TR/CSS2/selector.html#pattern-matching](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)

# c# - MVC3 应用程序中的通用“后退”按钮

> ID：15346543
> 
> 赞同：1
> 
> 时间：2013-03-11T19:07:20.030
> 
> 标签：c#, asp.net-mvc-3

有没有在我的 asp.net MVC3 应用程序中创建通用后退按钮的好方法？

目前，我对每个按钮都有不同的操作，当有更多可能性时，我会在 Url 中添加 redirectTo ，这样我就可以重定向回这个 Url。这不是最好的解决方案，因为我必须添加所有可能性，并且我可能会忘记将其添加到特定表单中。

我还教过`History.Back`在 js 中使用，但有时它会重定向到一个表单，该表单将重定向回另一个表单（例如，如果没有铭文，则铭文列表重定向以添加铭文，然后单击后退按钮应重定向到如果有至少一个铭文，则为铭文列表，如果没有铭文，则为课程列表）。后退按钮有时也会关闭一个弹出窗口。

也许它可能是 BaseController 中的某些东西，它会`OnActionExecuting()`在 Global.asax 中执行，例如`GlobalFilter`？

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T21:35:34.403

您可以使用`Request.UrlReferrer`它轻松访问用户的来源。

你可以有一些类似的东西：

```
<button type="button" onclick="window.location='@Request.UrlReferrer.AbsoluteUri'" >Back</button> 
```

但是，`UrlReferrer`如果用户直接导航到该页面，则该选项将不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T06:41:38.440

```
<a class="back_button" href="@Request.UrlReferrer"><i class="icon-circle-arrow-left"></i>@ViewResources.ShipingLine.back</a> 
```

您可以使用 href="@Request.UrlReferrer" 返回页面第一步。

我已经对其进行了测试，并且运行良好。

阿夫坦迪尔·卡夫雷利什维利

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T19:15:46.643

我最后做的是覆盖 javascript 中的按钮：

```
 $('.cancel-btn').click(function(ev) {
        ev.preventDefault();
        history.back();
    }); 
```

它工作正常，即使对于双重重定向，它也会返回到第一页而不是重定向到最后一页的那个。由于它是一个应用程序并且您必须先登录，因此您几乎总会有一个页面可以返回。

# objective-c - 在我的匹配纸牌游戏中无法弄清楚如何在匹配上贴标签

> ID：15346544
> 
> 赞同：3
> 
> 时间：2013-03-11T19:07:20.297
> 
> 标签：objective-c, cocoa-touch

我有一个匹配的纸牌游戏，到目前为止它非常简单，我只有 1 个视图控制器和 2 个 UILabel。1 个 UILabel 用于得分，1 个 UILabel 用于翻转。

现在我想创建另一个 UILabel 让用户知道何时有匹配并呈现匹配的卡片内容。我正在试图弄清楚如何获得匹配的两张卡..

这是我的控制器：（如果您需要查看另一个文件，请告诉我，或者您可以根据这个文件提供帮助，理论上的答案也可以）

CardGameViewController.m

```
#import "CardGameViewController.h"
#import "PlayingCardsDeck.h"
#import "CardMatchingGame.h"

@interface CardGameViewController ()
@property (weak, nonatomic) IBOutlet UILabel *cardLabel; //creating a label propery to update counts
@property (nonatomic) int flipsCount; //creating a NSUInteger property to count the flips
@property (strong, nonatomic) IBOutletCollection(UIButton) NSArray *cardButtons;
@property (strong, nonatomic) CardMatchingGame *game;
@property (weak, nonatomic) IBOutlet UILabel *scoreCounter;
@property (nonatomic) int userScore;

@end

@implementation CardGameViewController

-(CardMatchingGame *) game {

    if (!_game) _game = [[CardMatchingGame alloc] initWithCardCount:self.cardButtons.count usingDeck:[[PlayingCardsDeck alloc] init]];
    return _game;
}

-(void) setCardButtons:(NSArray *)cardButtons {

    _cardButtons = cardButtons;
   [self updateUI];
}

//Here I implemented the setter for the flipCount propert. Whick is setting the cardLabel to the right text and adding the number of counts.
-(void) setFlipsCount:(int)flipsCount {

    _flipsCount = flipsCount;
    self.cardLabel.text = [NSString stringWithFormat:@"Flips: %d", self.flipsCount];

}

-(void) updateUI {

    for (UIButton *cardButton in self.cardButtons) {
        Card *card = [self.game cardAtIndex:[self.cardButtons indexOfObject:cardButton]];
        [cardButton setTitle:card.contents forState:UIControlStateSelected];
        [cardButton setTitle:card.contents forState:UIControlStateSelected|UIControlStateDisabled];
        cardButton.selected = card.isFaceUp;
        cardButton.enabled = !card.unplayble;
        if (card.unplayble) {
            cardButton.alpha = 0.1;
        }
        self.scoreCounter.text = [NSString stringWithFormat:@"Score: %d", self.game.score];

    }
}

//Here I created a method to flipCards when the card is selected, and give the user a random card from the deck each time he flips the card. After each flip i'm incrementing the flipCount setter by one.
- (IBAction)flipCard:(UIButton *)sender {

    [self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender]];
    self.flipsCount++;
    [self updateUI];
}

@end 
```

这是 CardMatchingGame 的模型：

```
#import "CardMatchingGame.h"
#import "PlayingCardsDeck.h"

@interface CardMatchingGame()

@property (readwrite, nonatomic) int score;
@property (strong, nonatomic) NSMutableArray *cards;

@end        

@implementation CardMatchingGame

-(NSMutableArray *) cards {

    if (!_cards) _cards = [[NSMutableArray alloc] init];
    return _cards;
}

-(id)initWithCardCount:(NSUInteger)count usingDeck:(Deck *)deck {

    self = [super init];

    if (self) {

        for (int i = 0; i < count; i++) {
            Card *card = [deck drawRandonCard];

            if (!card) {
                self = nil;
            } else {
                self.cards[i] = card;
            }
        }
    }
    return self;
}

-(Card *) cardAtIndex:(NSUInteger)index {

    return (index < self.cards.count) ? self.cards[index] : nil;
}

#define FLIP_COST 1
#define MISMATCH_PENALTY 2
#define BONUS 4

-(void) flipCardAtIndex:(NSUInteger)index {

    Card *card = [self cardAtIndex:index];

    if (!card.isUnplayable) {

        if (!card.isFaceUp) {

            for (Card *otherCard in self.cards) {

                if (otherCard.isFaceUp && !otherCard.isUnplayable) {

                   int matchScore = [card match:@[otherCard]];

                    if (matchScore) {

                        otherCard.unplayble = YES;
                        card.unplayble = YES;

                        self.score += matchScore * BONUS;
                    } else {
                        otherCard.faceUp = NO;
                        self.score -= MISMATCH_PENALTY;
                    }
                    break;
                }

            }
            self.score -= FLIP_COST;
        }
        card.faceUp = !card.isFaceUp;

    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:57:49.603

首先创建您的标签：

```
 @property (weak, nonatomic) IBOutlet UILabel *matchInfo; 
```

然后更改以下函数，使其返回 BOOL：

```
-(BOOL)flipCardAtIndex:(NSUInteger)index { //Return type changed from void to BOOL

Card *card = [self cardAtIndex:index];

if (!card.isUnplayable) {

    if (!card.isFaceUp) {

        for (Card *otherCard in self.cards) {

            if (otherCard.isFaceUp && !otherCard.isUnplayable) {

               int matchScore = [card match:@[otherCard]];

                if (matchScore) {

                    otherCard.unplayble = YES;
                    card.unplayble = YES;

                    self.score += matchScore * BONUS;

                } else {
                    otherCard.faceUp = NO;
                    self.score -= MISMATCH_PENALTY;

                }
                break;
            }

        }
        self.score -= FLIP_COST;
    }
    card.faceUp = !card.isFaceUp;

}
return matchScore;

} 
```

最后我们返回 matchScore，这样我们的视图控制器就会知道结果，然后我们可以像这样使用这个信息。

```
- (IBAction)flipCard:(UIButton *)sender {

if([self.game flipCardAtIndex:[self.cardButtons indexOfObject:sender]]){
    self.flipsCount++;
    [self updateUI];
    self.matchInfo.text = @"You have a match";
}
else{
    self.matchInfo.text = @"Sorry bro.";
}

} 
```

# javascript - TypeError :getFlashMovie 不是 jRecorder 中的函数

> ID：15346550
> 
> 赞同：2
> 
> 时间：2013-03-11T19:07:45.787
> 
> 标签：javascript, jquery, jrecorder

我正在使用 JRecorder 在网页上录制语音。当我在 Firefox 中播放时，它给了我以下错误：

```
TypeError: getFlashMovie(...).jStartRecording is not a function
[Break On This Error]   

getFlashMovie(jRecorderSettings['recorder_name']).jStartRecording(max_time); 
```

[请从这里](http://www.sajithmr.me/jrecorder/index.html "点击这里下载")下载模块！

# svn - SVN 合并 - 客户端还是服务器？

> ID：15346552
> 
> 赞同：1
> 
> 时间：2013-03-11T19:07:52.580
> 
> 标签：svn, merge, tortoisesvn, svn-merge, data-loss

当两个用户更改同一个文件（在同一个分支中）并将他们的代码检查到 SVN 中时，SVN 将（在要求第二个用户进行更新后）自动合并文件并尝试解决任何冲突。

这个合并过程是发生在客户端还是服务器上？

（更多信息：我在客户端使用 Tortoise SVN 1.7.11，服务器版本是 1.5.1，我们最近有一个自动合并删除一些数据，我想知道这是否是代码合并的问题Tortoise 或旧的服务器代码）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:26:54.767

这是一个 Tortoise SVN 的东西，因此在客户端上。SVN 服务器实际上会把它踢回来并告诉你你不是最新的。奇怪的是乌龟会那样做......这似乎不是任何有头脑的人都想要的功能......

# ruby-on-rails - 路由库操作

> ID：15346554
> 
> 赞同：1
> 
> 时间：2013-03-11T19:07:55.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord, rails-routing

我目前正在尝试为带有 rails 3 的项目构建一个画廊系统。我觉得我应该从头开始做这个，以获得更多的控制和学习。但是，当我尝试从中删除图像时`http://localhost:3000/admin/albums/33/images`，删除按钮会转到`http://localhost:3000/admin/albums/1/images`。似乎删除按钮采用了所选图像的 ID，而不是将其附加到 url 的末尾，而是用它替换了 url 中的专辑 ID。我需要删除按钮来调用`http://localhost:3000/admin/albums/33/images/1`以删除该图像。我这辈子都想不通。

**看法**

```
<% @images.each do |image| %>
    <%= image.title %>
    <%= image.description %>
    <%= image.image_name %>
    <%= button_to "Delete", admin_album_images_path(image), :method => :delete, :style => "display: block;" %>
    <%= debug params %>
<% end %> 
```

**控制器**

```
class Admin::ImagesController < ApplicationController
    def index
        @images = Image.all
    end
    def new
        @image = Image.new(params[:id])
    end
    def create
        @image = Image.new(params[:id])
        if @image.save
            flash[:notice] = "Successfully added image!"
            redirect_to [:admin, :albums, :image_name]
        else
            render :action => 'new'
        end
    end
    def show
    end
    def destroy
        @image = Image.find(params[:id])
        @image.destroy
        redirect_to admin_albums_path
    end
end 
```

**路线**

```
Admin::Application.routes.draw do
  get "albums/index"

  get "dashboard/index"

  namespace :admin do
    root :to => "dashboard#index"
    resources :dashboard
    resources :albums do
      resources :images
     end
    get "admin/album"
    end
    get "logout" => "sessions#destroy", :as => "logout"
  get "login" => "sessions#new", :as => "login"
  get "signup" => "users#new", :as => "signup"
    # resources :users
  resources :basic
    root :to => "basic#index" 
```

**图像模型**

```
class Image < ActiveRecord::Base
    attr_accessible :title, :description, :image_name
    has_and_belongs_to_many :albums
end 
```

**专辑型号**

```
class Album < ActiveRecord::Base
    attr_accessible :title, :description
    has_and_belongs_to_many :images,  :dependent => :destroy
    validates :title, :description, :presence => true
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:13:22.107

您需要更改`admin_album_images_path`，作为嵌套资源，您需要指定这两个资源。

```
<%= button_to "Delete", admin_album_images_path(image.album,image), :method => :delete, :style => "display: block;" %> 
```

# asp.net - “/”应用程序中的服务器错误

> ID：15346556
> 
> 赞同：0
> 
> 时间：2013-03-11T19:08:02.190
> 
> 标签：asp.net, c#-4.0, web, publish, parsing-error

我想在服务器上发布我的网站，但我收到了这种类型的错误。

```
Server Error in '/' Application.

Parser Error Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately.

Parser Error Message: Could not load type 'egenc.SiteMaster'.

Source Error:

Line 1:  <%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="egenc.SiteMaster" %>
Line 2:  
Line 3:  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

Source File: /egenc/Site.Master    Line: 1

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

不知道这是怎么回事？我该如何解决这个错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:18:37.530

我相信这是一个错字，它应该是这样的：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Site.master.cs" Inherits="egenc.master.Site" %> 
```

也就是说，如果你没有弄乱指令或类名......

# oracle - Oracle SQLPlus ORA-01017 指定架构时凭据无效

> ID：15346558
> 
> 赞同：0
> 
> 时间：2013-03-11T19:08:03.773
> 
> 标签：oracle, oracle11g, sqlplus

在 Oracle11g 数据库上，这有效：

```
SQL> connect USER/pass
Connected. 
```

但是，这不会：

```
SQL> connect USER/pass@db
ERROR:
ORA-01017: invalid username/password; logon denied 
```

我已经执行了：

```
SQL> grant connect to USER;
Grant succeeded. 
```

我错过了什么？

tnsnames.ora：

```
DB =
  (DESCRIPTION =
    (ADDRESS = (PROTOCOL = TCP)(HOST = a.dom.b.com)(PORT = 1521))
    (CONNECT_DATA =
      (SERVER = DEDICATED)
      (SERVICE_NAME = db)
    )
  ) 
```

**编辑：**

```
:> sqlplus USER/pass
SQL*Plus: Release 11.1.0.7.0 - Production on Mon Mar 11 15
Copyright (c) 1982, 2008, Oracle.  All rights reserved.
Connected to:
Oracle Database 11g Enterprise Edition Release 11.1.0.7.0 - 64bit Production 
```

其他两个没有。

```
:> sqlplus USER/pass@db
SQL*Plus: Release 11.1.0.7.0 - Production on Mon Mar 11 15:04:44 2013
Copyright (c) 1982, 2008, Oracle.  All rights reserved.

ERROR:
ORA-01017: invalid username/password; logon denied 
```

这会产生标识符错误：

```
:> sqlplus USER/pass@db//localhost:1521
SQL*Plus: Release 11.1.0.7.0 - Production on Mon Mar 11 15:10:38 2013
Copyright (c) 1982, 2008, Oracle.  All rights reserved.

ERROR:
ORA-12154: TNS:could not resolve the connect identifier specified 
```

我已经验证了 tnsnames.ora 条目，并且我的 service 拼写正确。

**编辑2：**

```
:> lsnrctl status

LSNRCTL for 64-bit Windows: Version 11.1.0.7.0 - Production on 11-MAR-2013 15:14:19

Copyright (c) 1991, 2008, Oracle.  All rights reserved.

Connecting to (DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=a.dom.b.com)(PORT=1521
STATUS of the LISTENER
------------------------
Alias                     LISTENER
Version                   TNSLSNR for 64-bit Windows: Version 11.1.0.7.0 - Production
Start Date                01-MAR-2013 16:15:25
Uptime                    9 days 21 hr. 59 min. 8 sec
Trace Level               off
Security                  ON: Local OS Authentication
SNMP                      OFF
Listener Parameter File   d:\oracle\product\11.1.0\db_1\network\admin\listener.ora
Listener Log File         d:\oracle\diag\tnslsnr\TMDEV100\listener\alert\log.xml
Listening Endpoints Summary...
  (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=a.dom.b.com)(PORT=1521)))
Services Summary...
Service "db" has 1 instance(s).
  Instance "db", status READY, has 1 handler(s) for this service...
...
...
The command completed successfully 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:46:37.783

如果您不包含@db，它将通过 TWO_TASk 环境变量连接或与您连接的计算机上的数据库进行本地连接。@db 将通过 tnsnames.ora 查找连接信息，然后进行连接。我猜你正在连接到两个不同的数据库。一个你有用户名/密码组合，另一个你没有。

# visual-studio-2010 - 不会安装 VS 2010 的 Nsight

> ID：15346561
> 
> 赞同：1
> 
> 时间：2013-03-11T19:08:05.540
> 
> 标签：visual-studio-2010, cuda, nsight

好吧，我的电脑上安装了 VS 2008、VS 2010 甚至 VS 2012。我下载了 CUDA 5.0 SDK 并安装了它。但是当我安装 Nsight 时出现这个 ![在此处输入图像描述](../Images/82f086db58cb6d9d45b1857d534d5b9c.png)

我怎样才能正确安装它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T06:22:59.243

您不能将 VS 的 express 版本与 nsight 一起使用。VS 的 express 版本不支持 nsight VSE 使用的插件机制。Windows 上没有 CUDA 对 Eclipse 的支持。Nsight EE 仅在 Linux 上运行。

# php - 使用 JS 检测用户取消下载？

> ID：15346564
> 
> 赞同：0
> 
> 时间：2013-03-11T19:08:07.790
> 
> 标签：php, javascript, jquery, session, cookies

我有一个网页可以让用户下载 Excel 文档。该功能主要是在 jQuery 和 PHP 中构建的。

用户提交请求表单后，屏幕上会出现一个加载 gif。有一个 JS 区间用于查找 PHP 与 Excel 文档一起发送的 cookie。文件下载后，JS 可以检测到这个 cookie 并删除 gif。

如果用户中止下载，我会遇到问题。未删除 gif，因为从未收到 cookie。

有没有办法用 JS 检测“取消”浏览器操作？或者我可以使用 PHP 的 connection_aborted() 函数检测到取消，然后重新发送带有所需 cookie 的新标头吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:50:06.910

您可能需要进行某种投票。

*   1 - 向服务器发送一个 ajax 请求，告诉服务器检查连接是否仍然存在。
*   1.1 - 如果服务器返回肯定的答案，等待 N 秒并重复 #1。
*   1.2 - 如果服务器响应否定，用户已取消下载。

# ios - 如何循环播放 AVQueuePlayer 中的声音队列？

> ID：15346566
> 
> 赞同：5
> 
> 时间：2013-03-11T19:08:18.533
> 
> 标签：ios, objective-c, avaudioplayer, avqueueplayer

我知道存在关于同一问题的多个问题，但是在遵循[这个](https://stackoverflow.com/questions/4890087/repeat-avplayeritem-in-avqueueplayer)建议之后，我遇到了几个问题。

我已经设置好了所有东西，但是每次使用 kMTTimeZero 时都会出现马赫错误。

```
soundQueue = [AVQueuePlayer queuePlayerWithItems:soundEmotions];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(playerItemDidReachEnd:)
                                                 name:AVPlayerItemDidPlayToEndTimeNotification
                                               object:[soundEmotions lastObject]]; 
```

这就是我所做的。

```
- (void)playerItemDidReachEnd:(NSNotification *)notification {
    // Do stuff here
    NSLog(@"End has been reached.");

    // Set it back to the beginning
    [soundQueue seekToTime:kCMTimeZero];

    //Replay
    [soundQueue play];

} 
```

> 错误：架构 armv7 的未定义符号：“_kCMTimeZero”，引用自：-[ViewController playerItemDidReachEnd:] in ViewController.o ld：未找到架构 armv7 的符号：错误：链接器命令失败，退出代码为 1（使用 - v 查看调用）

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-11T19:21:09.307

`kCMTimeZero`是*CoreMedia.framework*中的一个符号，因此您必须将此框架添加到目标“构建阶段”中的“链接二进制与库”部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-07T15:48:02.607

我正在使用这种方法来**观察最后一项**，然后`seek to kCMTimeZero`

```
 override func observeValue(forKeyPath keyPath: String?, of object: Any?, change: [NSKeyValueChangeKey : Any]?, context: UnsafeMutableRawPointer?) {

        if keyPath == "currentItem" {

            print("Next Track...", currentTrackIndex)

            if currentTrackIndex > 0 {
                self.isPlaying = true
            }

            currentTrackIndex += 1
            if currentTrackIndex > playerQueue.items().count {
                currentTrackIndex = 0
                playerQueue.seek(to: kCMTimeZero)
            }
        }
    } 
```

进而

```
private func observeTrackChanged(of player : AVQueuePlayer) {

        player.addObserver(self, forKeyPath: "currentItem", options: .new, context: nil)
    } 
```

# qt - Qt 4.8.4 Cross-Compiled for Embedded Linux 失败并出现 QNetworkProxy 错误

> ID：15346568
> 
> 赞同：2
> 
> 时间：2013-03-11T19:08:23.483
> 
> 标签：qt, cross-compiling, embedded-linux, qtnetwork, qtembedded

我正在尝试使用以下选项为嵌入式 Linux 交叉编译 Qt：

```
(cd /home/user/proj/output/buildroot/build/company-qt-4.8.4; PKG_CONFIG_SYSROOT_DIR="/home/user/proj/output/buildroot/host/usr/arm-buildroot-linux-gnueabi/sysroot" PKG_CONFIG="/home/user/proj/output/buildroot/host/usr/bin/pkg-config" PKG_CONFIG_PATH="/home/user/proj/output/buildroot/host/usr/arm-buildroot-linux-gnueabi/sysroot/usr/lib/pkgconfig:" MAKEFLAGS="w --  -j8" ./configure -silent -force-pkg-config -separate-debug-info -xplatform qws/linux-arm-gnueabi-g++-company -qconfig company -opensource -confirm-license -largefile -no-qt3support -nomake examples -nomake demos -depths 16,32 -qt-gfx-linuxfb -no-gfx-transformed -no-gfx-qvfb -qt-gfx-vnc -no-gfx-multiscreen -no-gfx-directfb -no-mouse-pc -no-mouse-linuxtp -qt-mouse-linuxinput -qt-mouse-tslib -no-mouse-qvfb -no-kbd-tty -qt-kbd-linuxinput -no-kbd-qvfb -debug -shared -little-endian -embedded arm -no-gif -no-libmng -system-zlib -system-libjpeg -qt-libpng -no-libtiff -system-freetype -I /home/user/proj/output/buildroot/host/usr/arm-buildroot-linux-gnueabi/sysroot/usr/include/freetype2/ -dbus -qdbus -no-openssl -qt-sql-sqlite -xmlpatterns -exceptions -no-multimedia -no-audio-backend -no-phonon -no-phonon-backend -svg -webkit -script -no-scripttools -javascript-jit -stl -declarative -no-pch -glib -no-gfx-qnx -no-kbd-qnx -no-mouse-qnx -no-xinerama -no-cups -no-nis -no-accessibility -prefix /usr -hostprefix /home/user/proj/output/buildroot/host/usr/arm-buildroot-linux-gnueabi/sysroot/usr -fast -no-rpath ) 
```

我真的需要嵌入式设备的 webkit，如果我在配置选项中包含“-webkit”，那么构建最终会失败，并出现以下回溯：

```
../../../../../include/QtCore/../../src/corelib/tools/qlist.h:418:17: error: invalid use of incomplete type ‘class QNetworkProxy’
In file included from ../../../../../include/QtNetwork/qnetworkaccessmanager.h:1:0,
                 from ../../../../../include/QtNetwork/QNetworkAccessManager:1,
                 from platform/network/qt/ProxyServerQt.cpp:32:
../../../../../include/QtNetwork/../../src/network/access/qnetworkaccessmanager.h:62:7: error: forward declaration of ‘class QNetworkProxy’
make[4]: *** [.obj/debug-static-emb-arm/ProxyServerQt.o] Error 1
make[4]: Leaving directory `/home/user/proj/output/buildroot/build/company-qt-4.8.4/src/3rdparty/webkit/Source/WebCore'
make[3]: *** [sub-WebCore-make_default-ordered] Error 2
make[3]: Leaving directory `/home/user/proj/output/buildroot/build/company-qt-4.8.4/src/3rdparty/webkit/Source'
make[2]: *** [sub-webkit-make_default-ordered] Error 2
make[2]: Leaving directory `/home/user/proj/output/buildroot/build/company-qt-4.8.4'
make[1]: *** [/home/user/proj/output/buildroot/build/company-qt-4.8.4/.stamp_built] Error 2
make[1]: Leaving directory `/home/user/proj/buildroot' 
```

如果我只删除“-webkit”选项，那么构建完成就好了。

那么为什么我会收到 QNetworkProxy 错误，我该如何解决呢？谢谢！

编辑：请注意，我还尝试添加以下内容以明确包含 QNetworkProxy 但我得到完全相同的错误：

```
-feature-networkproxy 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T19:22:04.717

我发现有一个包含以下定义的 qconfig.h 文件：

```
//Do not need this one
#ifndef QT_NO_NETWORKPROXY
#  define QT_NO_NETWORKPROXY
#endif 
```

这显然是问题所在。

# ruby-on-rails - 验证密码的正确方法

> ID：15346571
> 
> 赞同：0
> 
> 时间：2013-03-11T19:08:25.320
> 
> 标签：ruby-on-rails, validation

我有一个用户注册页面。我希望用户密码为 4 到 16 个符号。我需要检查它们是否至少有一个大写字母和 1 个数字。比我制作这个密码的 md5 哈希并将其放入数据库中。
我如何验证它？
如果密码为 32 个符号长度，则在模型测试中进行验证：

```
 validates :password, :length => { :minimum => 32 , 
            :message => 'Not an md5 password provided.' } 
```

但是，在对密码进行哈希处理并为此验证设置适当的错误之前，如何验证密码是否符合我的要求？
我想查看 user.errors[:password] 包含“必须至少有一位数字”之类的内容。和“必须至少有一个大写字母。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:12:56.990

您可以创建一个自定义验证器方法，您可以在其中做任何您想做的事情：

```
validate :password_validation

def password_validation
  unless password.length > 32 && ... # other requirements
    errors.add(:password, 'Not an md5 password provided.')
  end
end 
```

# cocos2d-iphone - Cocos2d 游戏中使用 Box2d 的碰撞简化

> ID：15346574
> 
> 赞同：1
> 
> 时间：2013-03-11T19:08:44.100
> 
> 标签：cocos2d-iphone, box2d

考虑一个简单的 Cocos2d 游戏，由 1x20 网格上的五个水平多米诺骨牌组成（宽度为 20 个方格，每个多米诺骨牌的宽度为 2，多米诺骨牌不能重叠）。多米诺骨牌可以在网格中水平滑动。由于它们受限于网格，它们的垂直位置是恒定的。

基本移动的逻辑很简单：点击和拖动移动多米诺骨牌，直到`CGRectIntersectsRect`确定何时击中另一张多米诺骨牌。此时多米诺骨牌刚刚移动到位。

“高级”运动的逻辑更为复杂。在这里将多米诺骨牌推向另一张多米诺骨牌应该像两个连续的火车车厢一样移动两个多米诺骨牌，只要它们有空间。显然，可以以这种方式移动三个、四个等多米诺骨牌。

虽然高级运动代码更复杂，但我不认为这是没有希望的。我勾勒出几个概念：

*   “后多米诺骨牌”是多米诺骨牌用户正在拖动
*   “前多米诺骨牌”位于所有移动多米诺骨牌的前面，决定何时停止、何时向组中添加另一张多米诺骨牌等
*   “移动多米诺骨牌”是当前在“火车”中的所有多米诺骨牌组合

我认为这种方法是可行的。但是，鉴于许多极端情况的可能性很高，我不相信这是最简单的方法。例如，将三个连续的多米诺骨牌卡入到位可能需要防止对齐后重叠、对齐后间隙等的逻辑。

**如何通过使用 Box2d 来避免一些复杂的逻辑？**

我认为一个简单的物理引擎完全消除了对前骨牌、后骨牌等概念的需求。因此，我正在考虑这种方法。

# android - 如何将一个网格布局放在另一个之上？

> ID：15346576
> 
> 赞同：0
> 
> 时间：2013-03-11T19:08:46.537
> 
> 标签：android, eclipse, keyboard, grid-layout

我设计了两个键盘，并添加了一个按钮，单击该按钮将在这些键盘之间切换。

我想在设计时将这两个键盘放在一起，这样用户可以点击，第一个键盘会消失，第二个会弹出。我遇到的问题是无法弄清楚如何使用`GridLayout`.

我遇到的第二个问题是更改`GridLayout`.

这是我正在使用的代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final  GridLayout kb2s = (GridLayout)findViewById(R.id.kb2);
    final  GridLayout kb1s = (GridLayout)findViewById(R.id.kb1);
    kb1s.setBackgroundColor(128); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:43:29.197

用 FrameLayout 包裹两个键盘怎么样？

您可以放置​​第一个键盘 FrameLayout 并在单击切换按钮时将第二个键盘放置到 FrameLayout 并且当再次单击切换按钮时从 FrameLayout 中删除第二个键盘

对于文档，请查看此[FrameLayout Docs](http://developer.android.com/reference/android/widget/FrameLayout.html)

# android - 关于为多个视图实现自定义 Android ArrayAdapter 的想法？

> ID：15346577
> 
> 赞同：0
> 
> 时间：2013-03-11T19:08:52.683
> 
> 标签：android, listview, android-arrayadapter

我在两个不同的选项卡中有一个带有 ListViews 的选项卡式 Android 应用程序。我有一个自定义的 ArrayAdapter (myAdap)，我想让它对两个选项卡都可用。问题是，每个选项卡都需要为其各自的列表视图中的每个项目维护一个复选框状态。两个选项卡，两个 ListView，两组不同的选中列表项。只需为第二个 ListView（选项卡）制作 myAdap 的副本并重命名它就会让我上路，但我最终会将更改从一个文件复制/粘贴到另一个文件，只是为了让它们保持最新。我认为修改 myAdap 以接受另一个参数（例如每个列表视图中复选框状态的支持数组）会更有效。然后，我可以用类似的东西来实例化 myAdap`myadapter = new myAdap (this, android.R.layout.simple_list_item_single_choice, backingArrayList);`我的另一个想法是在父类中实现 onCheckChange() 侦听器并将侦听器传递给 myAdap。这会将支持数组保留在各自的类中，但也不确定这是否是最好的方法。还有其他我没有想到的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:45:23.643

您应该实例化适配器的 2 个对象

```
myadapterForTab1 = new myAdap (this, android.R.layout.simple_list_item_single_choice, backingArrayList);
myadapterForTab2 = new myAdap (this, android.R.layout.simple_list_item_single_choice, backingArrayList); 
```

# java - 在 JFrame 中调整 JEditorPane 的大小

> ID：15346581
> 
> 赞同：1
> 
> 时间：2013-03-11T19:09:05.503
> 
> 标签：java, swing, user-interface, jeditorpane

我正在尝试将 JEditorPane 添加到 JFrame，并且我正在使用 pack() 调整 JFrame 的大小。当我启动程序时，默认大小什么都不做，pack 会生成一个高度约为 10 像素的 JEditorPane。如何使 JEditorPane 以我定义的大小开始？

```
public class GUIManager extends JFrame {

JButton copyButton = new JButton("Copy");
JButton cutButton = new JButton("Cut");
JButton pasteButton = new JButton("Paste");
JButton selectButton = new JButton("Select All");
JButton clearButton = new JButton("Clear");
JButton searchButton = new JButton("Search");
JButton replaceButton = new JButton("Replace");

JEditorPane editPane;
JScrollPane scrollPane;

JPanel buttons = new JPanel();

public GUIManager(){

    buttons.setLayout(new FlowLayout(FlowLayout.LEFT, 10, 10));

    editPane = new JEditorPane(){

        public boolean getScrollableTrackViewportWidth(){

            return true;

        }

    };
    editPane.setSize(500, 500);
    scrollPane = new JScrollPane(editPane);

    buttons.add(copyButton);
    buttons.add(cutButton);
    buttons.add(pasteButton);
    buttons.add(selectButton);
    buttons.add(clearButton);
    buttons.add(searchButton);
    buttons.add(replaceButton);

    this.add(buttons, BorderLayout.NORTH);
    this.add(scrollPane, BorderLayout.CENTER);
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:14:49.377

使用 setPreferredSize()：

```
editPane.setPreferredSize(new Dimension(500, 500)); 
```

# c++ - 具有结构组件的类构造函数

> ID：15346583
> 
> 赞同：0
> 
> 时间：2013-03-11T19:09:24.603
> 
> 标签：c++

我在一个类中定义了一个构造函数，它接受 5 个参数来初始化字段。其中两个参数/字段来自一个`Date`结构。

```
Information(string NewName, Date start, Date finish,
            double newNumber, double newLevel); 
```

这是这样做的正确格式吗？

另外，我将如何输入参数`int main ()`？像这样的东西？如何将值放入结构参数中？他们会引用引号吗？

```
Information arguments("Susan Jones", "3/5/5", "3/5/5", 15, 58); 
```

日期结构：

```
 struct Date
  {
    int month;
    int day;
    int year;
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:10:53.873

最好将 const 引用传递给构造函数中使用的非基本类型。因此，制作数据`const&`而不仅仅是副本。更加具体：

```
Information(const string& NewName,const Date& start,const Date& finish,
          double newNumber, double newLevel); 
```

还假设 Date 有一个构造函数，`std::string`或者`const char*`您调用构造函数的方式是正确的（尽管您似乎正在调用另一个名为 的类的构造函数`Paycheck`）。

否则代码似乎是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:41:30.667

您显示的`Information`构造函数看起来很合理。对于中型或大型对象，您可能希望通过`const Date&`而不是 just `Date`，但是对于像您这样的小型/简单/快速对象，制作副本应该没什么大不了的。这是“正常”的方式：

```
Information(const string& NewName, const Date& start, const Date& finish,
      double newNumber, double newLevel); 
```

但是，`"3/5/5"`这不是构造`Date`. 有两种方式，如下图所示。第一个更容易理解，但第二个代码少得多。

```
Date start;
start.month = 3;
start.day = 5;
start.year = 5;

Date finish;
start.month = 3;
start.day = 5;
start.year = 5;

Information arguments("Susan Jones", start, finish, 15, 58); 
```

或者

```
Information arguments("Susan Jones", {3,5,5}, {3,5,5}, 15, 58); 
```

# java - 如何调用超类的重写方法？

> ID：15346587
> 
> 赞同：1
> 
> 时间：2013-03-11T19:09:37.003
> 
> 标签：java, methods, overriding

如何调用超类的重写方法？例如：

```
 class A {
        public void someMethod() {
            // someMethod of class A
        }
    }

    class B extends A {
        public void someMethod() {
            //someMethod of class B.
            // How to call to the someMethod of class A
        }
    } 
```

我覆盖了 A 类的 someMethod，我怎么还能从 A 的 someMethod 中调用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:11:00.047

使用`super`关键字访问 B 中直接超类中的重写方法：

```
super.someMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:13:25.357

使用`super`
FYI 访问[此链接](http://docs.oracle.com/javase/tutorial/java/IandI/super.html)以了解示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:13:58.803

你的意思是，仍然从“B”的 someMethod 中调用它？利用：

```
super.someMethod() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:11:10.363

你可以调用 super.someMethod();

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T19:11:39.563

使用`super`关键字

```
super.Methodname() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T19:11:43.747

尝试这个

```
super.someMethod(); 
```

这应该有效。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T19:14:25.493

创建一个类的对象。

```
A a= new A();
a.someMethod(); 
```

# c++ - 几个“错误 C4430：缺少类型说明符”错误消息

> ID：15346591
> 
> 赞同：0
> 
> 时间：2013-03-11T19:09:53.557
> 
> 标签：c++

所有代码都应该做的是创建类的一个实例并打印私有变量。我查看了该站点上的一堆（超过 20 个）“错误 C4430：缺少类型说明符”错误，但没有任何帮助。

这是类文件（“Number.h”）：

```
#ifndef NUMBER_H
#define NUMBER_H

#include <string>

template <typename T>
class Number {
private:
    T myVar;

public:
    Number(T consVariable);
    ~Number();

    void setNumber(T newVar);
    T getNumber();
    bool isEqual(T check);
    bool isBigger(T check);
    bool isSmaller(T check);
};

template <typename T>
Number<T>::Number(T conVar) {
    myVar = conVar;
}

template <typename T>
Number<T>::setNumber(T setVar) {
    myVar = setVar;
}

template <typename T>
Number<T>::getNumber() {
    return myVar;
}

template <typename T>
Number<T>::isEqual(T n) {
    if (myVar == n)
        return true;
    else
        return false;
}

template <typename T>
Number<T>::isBigger(T n)
{
    if (myVar >= n)
        return true;
    else
        return false;
}

template <typename T>
Number<T>::isSmaller(T n)
    {
    if (myVar <= n)
        return true;
    else
        return false;
}

#endif 
```

和错误：

```
number.h(31): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
number.h(36): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
number.h(44): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
number.h(53): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
number.h(62): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:11:00.703

您的成员函数*定义*没有返回类型。您应该指定在相应*声明*中指定的相同返回类型。

例如，既然你`setNumber()`这样声明：

```
 void setNumber(T newVar);
//  ^^^^ 
```

它的定义应该是这样的（注意我添加了`void`返回类型）：

```
 template <typename T>
    void Number<T>::setNumber(T setVar) {
//  ^^^^  
//  Don't forget the return type!

        myVar = setVar;
    } 
```

这是您为每个成员函数执行此操作后的类定义和成员函数定义的样子：

```
#include <string>

template <typename T>
class Number {
private:
    T myVar;

public:
    Number(T consVariable);
    ~Number();

    void setNumber(T newVar);
    T getNumber();
    bool isEqual(T check);
    bool isBigger(T check);
    bool isSmaller(T check);
};

template <typename T>
Number<T>::Number(T conVar) {
    myVar = conVar;
}

template <typename T>
void Number<T>::setNumber(T setVar) {
    myVar = setVar;
}

template <typename T>
T Number<T>::getNumber() {
    return myVar;
}

template <typename T>
bool Number<T>::isEqual(T n) {
    if (myVar == n)
        return true;
    else
        return false;
}

template <typename T>
bool Number<T>::isBigger(T n)
{
    if (myVar >= n)
        return true;
    else
        return false;
}

template <typename T>
bool Number<T>::isSmaller(T n)
    {
    if (myVar <= n)
        return true;
    else
        return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:11:20.303

除了构造函数和析构函数之外的所有函数定义都需要返回类型。例如，考虑`setNumber`：

```
template <typename T>
Number<T>::setNumber(T setVar) {
  myVar = setVar;
} 
```

这应该返回`void`：

```
template <typename T>
void Number<T>::setNumber(T setVar) {
  myVar = setVar;
} 
```

然后`isEqual`应该返回`bool`，依此类推。

* * *

不要忘记定义你的析构函数：

```
template <typename T>
Number<T>::~Number() { } 
```

但是，在这种情况下，您只需使用默认析构函数即可。

# db2 - 如何解决 Websphere 上的 StaleConnection 问题

> ID：15346593
> 
> 赞同：2
> 
> 时间：2013-03-11T19:10:01.963
> 
> 标签：db2, websphere, spring-jdbc

数据库：db2，应用服务器：websphere 8

我们有更新/检索数据库中/从数据库中的值的休息服务。该服务每天最多使用两次。所以休息电话之间的时间段几乎是 24 小时。

对于每个第一个/第二个请求，它都会引发`staleConnection`异常。第三次重试通过。

做了以下链接中指定的所有内容。

[如何处理陈旧的连接？](https://stackoverflow.com/questions/486964/how-to-handle-stale-connections)

[http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tdat_pretestconn.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v6r1/index.jsp?topic=/com.ibm.websphere.nd.multiplatform.doc/info/ae/ae/tdat_pretestconn.html)

[http://www.thejavacode.com/websphere-adapters-stale-connection-problem-t34.html](http://www.thejavacode.com/websphere-adapters-stale-connection-problem-t34.html)

但仍然出现`staleConnection`异常。我们使用的是 Spring JDBC，所以我没有看到使用后不关闭连接的问题。另外，我在单个请求中编写了重试逻辑，在遇到连接异常时尝试获取有效连接 3 次。

第一次遇到`staleconnection`异常时，服务等待三秒并重试连接，但后续重试正在抛出

> ObjectClosedException: DSRA9110E: 连接已关闭。

我怀疑随后的重试是否试图打开现有的陈旧连接。如何解决这个问题？

如果我包含错误的标签，我深表歉意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:38:53.807

#1 解决方案是：不要导致连接失效。DB2 驱动程序或服务器中没有**任何东西**会导致这种情况发生。99% 的陈旧连接是由具有 TCP 超时的防火墙损坏引起的。修复您的防火墙产品对使用的网络路由的超时设置。

＃2解决方案是：

*   根据您提供的链接设置预测试。确保您的 SQL 查询有效（例如`SELECT current date FROM sysibm.sysdummy1`）
*   在池设置中设置收获、未使用和老化超时，以在一定时间后销毁未使用的连接。（如果金额低于池的最小值，将立即建立新的）
*   将清除策略设置为 EntirePool。但是请注意，这将意味着池中的一个连接出现 StaleConnectionException 将强制 WAS 从池中删除所有内容并创建新连接以满足最小数量要求。这可能会导致性能问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T22:07:22.080

我同意答案（user918176），只是想添加另一个解决问题的简单设置，为了完整起见；将最小连接池大小设置为零。

`StaleConnectionException`通常发生在一段时间不活动之后（例如早上的第一个请求，午休后），在此期间某些网络设备终止底层 TCP 连接。

将最小池大小设置为零会导致所有旧连接在相当短的一段时间后被丢弃（在 之后`unused timeout`，默认情况下是在最后一次使用连接后 1800 秒）。因此，在不活动期之后，池中没有任何连接（否则将是陈旧的）。此解决方案导致最小的配置更改和最小的性能损失（仅在非活动期后的第一个请求等待重新初始化数据库连接，而不是获得准备使用的连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T14:46:08.963

将最小连接池调整为 0，默认为 1。

# ruby-on-rails - rake gems：由于神秘原因，在 rails 2 应用程序中安装失败

> ID：15346595
> 
> 赞同：0
> 
> 时间：2013-03-11T19:10:02.343
> 
> 标签：ruby-on-rails, rvm, ruby-on-rails-2, ruby-1.8, ruby-1.8.7

我正在尝试在我的本地开发环境中运行 rails 2.3.12 项目，但我似乎无法安装所需的 gem。这是我正在使用的 ruby​​/rails 版本：

```
$ rvm list
rvm rubies
...
=> ruby-1.8.7-p371 [ i686 ]
...
$ rails -v
Rails 2.3.12 
```

这一切似乎都井然有序。但是，当我尝试安装所需的 gem 时，我得到以下响应：

```
$ rake _0.9.2_ gems:install --trace
** Invoke gems:install (first_time)
** Invoke gems:base (first_time)
** Execute gems:base
** Invoke environment (first_time)
** Execute environment
rake aborted!
uninitialized constant Encoding
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:469:in `load_missing_constant'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:106:in `const_missing'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:118:in `const_missing'
/Users/me/sites/myproject/config/environment.rb:2
/Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
/Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:182:in `require'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:547:in `new_constants_in'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:182:in `require'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rails-2.3.12/lib/tasks/misc.rake:4
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:205:in `call'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:205:in `execute'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:200:in `each'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:200:in `execute'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:144:in `invoke'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rails-2.3.12/lib/tasks/gems.rake:17
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:205:in `call'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:205:in `execute'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:200:in `each'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:200:in `execute'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:158:in `invoke_with_call_chain'
/Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:176:in `invoke_prerequisites'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:174:in `each'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:157:in `invoke_with_call_chain'
/Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/monitor.rb:242:in `synchronize'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/task.rb:144:in `invoke'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:112:in `invoke_task'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:90:in `top_level'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:90:in `each'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:90:in `top_level'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:84:in `top_level'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:62:in `run'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:129:in `standard_exception_handling'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/lib/rake/application.rb:59:in `run'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rake-0.9.2/bin/rake:32
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/bin/rake:19:in `load'
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/bin/rake:19
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/bin/ruby_noexec_wrapper:14
Tasks: TOP => environment 
```

由于跟踪中提到了 config/environment.rb，因此我也将其包括在此处：

```
# Be sure to restart your server when you modify this file
Encoding.default_external = Encoding::UTF_8 

# Specifies gem version of Rails to use when vendor/rails is not present
RAILS_GEM_VERSION = '2.3.12' unless defined? RAILS_GEM_VERSION

# Bootstrap the Rails environment, frameworks, and default configuration
require File.join(File.dirname(__FILE__), 'boot')

Rails::Initializer.run do |config|
  # Settings in config/environments/* take precedence over those specified here.
  # Application configuration should go into files in config/initializers
  # -- all .rb files in that directory are automatically loaded.

  # Add additional load paths for your own custom dirs
  # config.load_paths += %W( #{RAILS_ROOT}/extras )

  # Specify gems that this application depends on and have them installed with rake gems:install
  # config.gem "bj"
  # config.gem "hpricot", :version => '0.6', :source => "http://code.whytheluckystiff.net"
  # config.gem "sqlite3-ruby", :lib => "sqlite3"
  # config.gem "aws-s3", :lib => "aws/s3"

  # Only load the plugins named here, in the order given (default is alphabetical).
  # :all can be used as a placeholder for all plugins not explicitly named
  # config.plugins = [ :exception_notification, :ssl_requirement, :all ]

  # Skip frameworks you're not going to use. To use Rails without a database,
  # you must remove the Active Record framework.
  # config.frameworks -= [ :active_record, :active_resource, :action_mailer ]

  # Activate observers that should always be running
  # config.active_record.observers = :cacher, :garbage_collector, :forum_observer

  # Set Time.zone default to the specified zone and make Active Record auto-convert to this zone.
  # Run "rake -D time" for a list of tasks for finding time zone names.
  config.time_zone = 'UTC'

  # The default locale is :en and all translations from config/locales/*.rb,yml are auto loaded.
  # config.i18n.load_path += Dir[Rails.root.join('my', 'locales', '*.{rb,yml}')]
  # config.i18n.default_locale = :de

  config.after_initialize do
    ExceptionNotification::Notifier.exception_recipients = %w(applicationerror@seattlepub.com)
  end
end 
```

我不知道该怎么做，我研究这个问题的努力也没有发现任何有用的东西。任何帮助将不胜感激。

**编辑：**

如果我尝试启动服务器，我会收到类似的错误：

```
$ script/server
=> Booting WEBrick
=> Rails 2.3.12 application starting on http://0.0.0.0:3000
/Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:469:in `load_missing_constant': uninitialized constant Encoding (NameError)
    from /Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:106:in `const_missing'
    from /Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:118:in `const_missing'
    from /Users/me/sites/myproject/config/environment.rb:2
    from /Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
    from /Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:182:in `require'
    from /Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:547:in `new_constants_in'
    from /Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/activesupport-2.3.12/lib/active_support/dependencies.rb:182:in `require'
    from /Users/me/.rvm/gems/ruby-1.8.7-p371@mygemset/gems/rails-2.3.12/lib/commands/server.rb:84
    from /Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `gem_original_require'
    from /Users/me/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in `require'
    from script/server:3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-31T16:07:56.513

> 该问题与 ExceptionNotification 插件有关（请参阅 mt environment.rb 文件的末尾），具有讽刺意味的是，它导致了此异常。重新安装插件后，该应用程序运行良好。–

# c# - 过滤系统上所有 http/https 流量的代码...当我的应用程序打开时

> ID：15346598
> 
> 赞同：0
> 
> 时间：2013-03-11T19:10:06.237
> 
> 标签：c#, sockets, .net-4.0, filter

我有一个应用程序，我需要过滤整个系统上的所有 http/https 流量（网络请求）。基本上，我想让管理员能够将地址/URL 输入白名单，然后阻止和/或监控其他所有内容。仅当我的主应用程序模块打开时才会发生这种情况，或者它可以随时发生（通过 Windows 服务）。

除了插入网络套接字、检查、批准或取消请求之外，我知道如何做所有事情。我已经做了很多搜索，但我没有得到任何地方！

仅供参考，我在 Visual Studio 2012 (.NET Framework 4.0) 中使用 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:16:37.867

从你的描述看来，你需要的是一个**`Firewall`**.

查看这些文章

*   [有用的精简版有效防火墙 .NET](http://www.codeproject.com/Articles/17037/Useful-Lite-Effective-Firewall-NET)
*   [简单数据包 - 过滤防火墙](http://www.codeproject.com/Articles/5602/Simple-Packet-Filter-Firewall)（不是 .Net 文章）

# image - 上传图片时出错...目录不退出

> ID：15346599
> 
> 赞同：1
> 
> 时间：2013-03-11T19:10:09.020
> 
> 标签：image, upload, plone

我正在尝试将一些照片上传到我的 Plone 实例中，但它一直给我一个错误，我不太明白。我似乎也找不到任何关于它的文档。这是错误。

> “我们很抱歉，但似乎有一个错误......这是完整的错误信息：
> 
> 将回溯显示为文本
> 
> Traceback（最里面的最后一个）：
> 
> 模块 ZPublisher.Publish，第 126 行，在发布模块 ZPublisher.mapply，第 77 行，在 mapply 模块 ZPublisher.Publish，第 46 行，在 call_object 模块 Products.CMFPlone.FactoryTool，第 453 行，在 **调用** 模块 ZPublisher.mapply，第 77 行，在 mapply 模块 ZPublisher.Publish，第 46 行，在 call_object Module Products.CMFFormController.FSControllerPageTemplate，第 91 行，在 **call** Module Products.CMFFormController.BaseControllerPageTemplate，第 28 行，在 _call Module Products.CMFFormController.ControllerBase，第 231 行，在 getNext 模块产品中.CMFFormController.Actions.TraverseTo，第 38 行，**调用中** 模块 ZPublisher.mapply，第 77 行，在 mapply 模块 ZPublisher.Publish，第 46 行，在 call_object 模块 Products.CMFFormController.FSControllerPythonScript，第 107 行，在 **call** Module Products.CMFFormController.ControllerBase，第 231 行，在 getNext 模块 Products.CMFFormController.Actions .TraverseTo，第 38 行，**调用** 模块 ZPublisher.mapply，第 77 行，mapply 模块 ZPublisher.Publish，第 46 行，调用_object Module Products.CMFFormController.FSControllerPythonScript，第 105 行， **调用** Module Products.CMFFormController.Script，第 145 行，**调用** 模块 Products.CMFCore.FSPythonScript，第 127 行，调用**模块** Shared.DC.Scripts.Bindings，第 322 行，**调用** 模块 Shared.DC.Scripts.Bindings，第 359 行，在 _bindAndExec 模块 Products.PythonScripts.PythonScript，第 344 行，在 _exec 模块脚本，第 1 行，在 content_edit 第 1 行模块 Products.CMFCore.FSPythonScript，第 127 行，**调用** 模块共享.DC.Scripts.Bindings，第 322 行，**通话中** 模块 Shared.DC.Scripts.Bindings，第 359 行，在 _bindAndExec Module Products.PythonScripts.PythonScript，第 344 行，在 _exec 模块脚本，第 8 行，在 content_edit_impl 第 8 行 Module Products.CMFPlone.FactoryTool，第 309 行，在 doCreate 模块产品中.ATContentTypes.lib.constraintypes，第 277 行，invokeFactory Module Products.CMFCore.PortalFolder，第 292 行，invokeFactory Module Products.CMFCore.TypesTool，第 833 行，constructContent Module Products.CMFCore.TypesTool，第 311 行，constructInstance Module Products .CMFCore.TypesTool，第 552 行，_constructInstance 模块 plone.app.blob.content，第 68 行，addATBlobImage 模块 plone.app.blob.content，第 59 行，addATBlob 模块 Products.ATContentTypes.content.base，第 122 行，在 initializeArchetype 模块 Products.Archetypes.BaseObject，第 439 行，在 setDefaults Module Products.Archetypes.Schema，第 498 行，在 setDefaults Module Products.Archetypes.utils，第 123 行，在 mapply 模块 archetypes.schemaextender.field，第 38 行，在 mutator 模块 plone.app.blob.subtypes.image，行21，在set Module plone.app.blob.field，第248行，在set Module transaction._manager，第101行，在savepoint Module transaction._transaction，第260行，在savepoint Module transaction._transaction，第257行，在savepoint Module transaction ._transaction，第 690 行，在第 101 行，在保存点中 模块 transaction._transaction，第 260 行，在保存点中 模块 transaction._transaction，第 257 行，在保存点中 模块 transaction._transaction，第 690 行，在第 101 行，在保存点中 模块 transaction._transaction，第 260 行，在保存点中 模块 transaction._transaction，第 257 行，在保存点中 模块 transaction._transaction，第 690 行，在**init** 模块 ZODB.Connection，第 1123 行，在保存点中 模块 ZODB.Connection，第 623 行，在 _commit 模块 ZODB.Connection，第 669 行，在 _store_objects 模块 ZODB.blob，第 286 行，在 _uncommitted 模块 ZODB.blob，第 271 行，在_create_uncommitted_file 模块 ZODB.utils，第 224 行，在 mktemp 模块 tempfile，第 300 行，在 mkstemp 模块 tempfile，第 235 行，在 _mkstemp_inner OSError: [Errno 2] No such file or directory: '/usr/local/Plone/zeocluster/var /blobstorage/tmp/tmp2COObE' "

**有谁知道我可以从哪里开始调试这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:24:17.570

如果 /usr/local/Plone/zeocluster 不存在，那么你有一个 zope/Plone 实例作为 Zombie 运行。该目录可能在没有停止的情况下被删除。查找并杀死恶意进程。然后重新启动真正的安装。

# scala - 扩展 App 特征的对象内的字段设置为 null。为什么呢？

> ID：15346600
> 
> 赞同：9
> 
> 时间：2013-03-11T19:10:09.753
> 
> 标签：scala, scalatest

我正在尝试使用 scalatest 来测试这样的应用程序：

```
object Main extends App {
    val name = "Greg"
}

class JunkTests extends FunSpec with MustMatchers {
    describe("Junk Tests") {
        it("Junk-1 -- Must do stuff") {
            println("Name: "+Main.name)
            // some test here
        }
    }
} 
```

我的名字输出总是空的。如何让我的主要对象在测试期间使用其设施？在实际使用中，我有一个应用程序，它是一个 Http 服务器，我想向它发送消息，但现在它从未初始化，因此服务器永远不会启动。这个简单的例子表明 Main 从未被初始化。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T19:18:53.373

> 应该注意的是，这个 trait 是使用 DelayedInit 功能实现的，这意味着对象的字段在 main 方法执行之前不会被初始化。

[*用于 App 特征的 Scaladoc*](http://www.scala-lang.org/api/current/index.html#scala.App)

所以你可以：

*   将 val 定义为 final：`final val name = "Greg"`
*   在访问名称字段之前触发 main 方法
*   将名称定义为方法：`def name = "Greg"`
*   将 name 定义为`lazy`val: `lazy val name = "Greg"`(所以在这种情况下，和前面一样，初始化的顺序无关紧要)

# php - PHP Exec Ping 目标主机无法访问

> ID：15346601
> 
> 赞同：1
> 
> 时间：2013-03-11T19:10:10.953
> 
> 标签：php, exec, ping, router

我在路由器 (192.168.200.254) 后面的公司局域网上 ping 几台计算机 (192.168.200.1 和 192.168.200.2)。

```
function pingAddress($TEST) {
$pingresult = exec("ping -n 1 $TEST", $output, $result);
    if ($result == 0) {
        echo "Ping successful!";
        } else {
        echo "Ping unsuccessful!";
        }

    }
pingAddress("192.168.220.1");
pingAddress("192.168.220.2"); 
```

我的问题是其中一台计算机未开机（ .1 ），但我仍然收到 ping 响应。

```
Pinging 192.168.200.1 with 32 bytes of data:
Reply from 192.168.200.254: Destination host unreachable.
Ping statistics for 192.168.200.1:
Packets: Sent = 1, Received = 1, Lost = 0 (0% loss), 
```

192.168.220.1 ping 尝试上的 var_dump($output) 显示为：

```
array(6) { 
[0]=> string(0) "" 
[1]=> string(44) "Pinging 192.168.200.1 with 32 bytes of data:" 
[2]=> string(57) "Reply from 192.168.200.254: Destination host unreachable." 
[3]=> string(0) "" 
[4]=> string(34) "Ping statistics for 192.168.200.1:" 
[5]=> string(56) " Packets: Sent = 1, Received = 1, Lost = 0 (0% loss)," 
} 
```

所以我改为尝试搜索为误报“目标主机无法访问”消息创建的 $output 数组，但这条路线没有运气。

```
function pingAddress($TEST) {
$findme ="Destination host unreachable";

    $pingresult = exec("ping -n 1 $TEST  && exit", $output, $result);
        //echo $result. "<br/>";
        if (($result == 0) AND (in_array($findme, $output))){
            echo "Ping unsuccessful! <br/>";
        }
        elseif (($result == 0) AND (!in_array($findme, $output))){
            echo "Ping successful! <br/>";
        }
        elseif ($result == 1){
            echo "Ping unsuccessful! <br/>";
        }    
}
pingAddress("192.168.220.1");
pingAddress("192.168.220.2"); 
```

仍然显示成功。我可能在这里做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:19:26.350

你需要的是[preg_grep](http://www.php.net/manual/en/function.preg-grep.php)。试试这个：

```
function pingAddress($TEST) {
    $pingresult = exec("ping -n 1 $TEST  && exit", $output, $result);
    //echo $result. "<br/>";

    if (($result == 0)){
        if(count(preg_grep('/Destination host unreachable/i', $output)) == 0){
            echo "Ping successful! <br/>";
        else
            echo "Ping unsuccessful! <br/>";
    }
    elseif ($result == 1){
        echo "Ping unsuccessful! <br/>";
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:19:27.950

in_array 将期望整个字符串，即“来自 192.168.200.254 的回复：无法访问目标主机。” . 您可以改用`strstr` [php 手动 strstr](http://www.php.net/manual/en/function.strstr.php) php 函数或正则表达式检查。而且由于它在数组中-就像有人建议的那样..加入数组的字符串并尝试查找文本。

# ios - Phonegap 2.5.0 闪屏在显示期间向下移动

> ID：15346603
> 
> 赞同：2
> 
> 时间：2013-03-11T19:10:25.587
> 
> 标签：ios, cordova

在将 Phonegap 从 2.3.0 更新到 2.5.0 后，我的 iOS/iPhone 应用程序中的启动画面在应用程序启动期间向下移动了 20 像素。首先，它将自己定位在状态栏的后面，但很快又下降了 20 像素。这也发生在 Phonegap 默认模板中。在以前的 Phonegap 版本中，我没有遇到这个问题。我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T15:58:28.587

如果我包含了我想做的状态栏，我在 20px 移位时遇到了同样的问题。为了解决这个问题，我编辑了文件 CDVSplashScreen.m 并更改了以下行：

_imageView.frame = CGRectMake(0, 0, _imageView.image.size.width, _imageView.image.size.height);

至：

_imageView.frame = CGRectMake(0, **-20** , _imageView.image.size.width, _imageView.image.size.height);

我在我的 iPhone 4 和 5 以及普通 iPhone 的模拟器上进行了测试，它似乎已经成功了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-26T16:00:24.960

您还可以将项目更新到 2.6.0 版本。这个问题对于cordova 2.5 是已知的。我有同样的问题，我只是更新它来纠正它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T16:20:26.913

In your XCode target, there is a section for iPhone Deployment info. The Status Bar section of that panel has a Visibility checkbox to hide the status bar during launch. That should prevent the 20px shift you're seeing between iOS launch and Cordova readiness.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T13:06:10.557

1)**隐藏状态栏**

在 XCode 4.6 中，选择您的项目，然后选择 Summary 选项卡，然后选中“Hide during application launch”复选框。

2）当应用程序完成加载时再次**显示状态栏。**你可以通过调用来做到这一点：

```
[[UIApplication sharedApplication] setStatusBarHidden:NO
                                        withAnimation:UIStatusBarAnimationFade]; 
```

3) 如果 webview 部分隐藏在状态栏后面，您可能还需要调整 webview 框架的大小：

```
CGRect r = webView.frame;    
r.size.height -= 20;
r.origin.y = 20;    
webView.frame = r; 
```

*我为此创建了一个简单的 Phonegap 插件，我在 javascript 中触发 deviceready 事件后立即调用它（您可以从super.webview*的插件访问您的 webview ）。

# php - PHP/Apache：PHP 致命错误：调用未定义函数 mysql_connect()

> ID：15346605
> 
> 赞同：21
> 
> 时间：2013-03-11T19:10:35.677
> 
> 标签：php, mysql, apache

我在 Fedora 15 机器（64 位）上运行 MySQL（5.5.23 社区服务器）、Apache（2.2）和 PHP（5.3.13）。每个都可以自己正常工作。

我认为 PHP 已配置/编译为与 MySQL 一起使用，但是当我尝试加载任何进行 MySQL 调用的 PHP 网页时，我收到上述致命错误（在 Apache 错误日志中）。PHP 可以通过 Apache 和命令行自行运行。

当我从命令行运行 php -i 时，它确实显示了所有 MySQL 的点点滴滴，但是当我加载显示 phpinfo() 的页面时，没有提到任何 MySQL 模块。

我也尝试在 php.ini 中取消注释“extension=mysql.so”，但 PHP 然后抱怨“PHP 启动：无法加载动态库`'/usr/lib64/php/modules/mysql.so'."`（即使模块确实驻留在那里）。但我不是完全确定是否需要取消注释该行。[更正：所述错误实际上是由于拼写错误，但从命令行运行显示模块已经加载 - PHP 发出警告这么说。]

我还禁用了 SELinux；多次停止/重新启动 Apache；yummed MySQL-Devel，以防它有什么不同；而且，似乎所有其他可能的事情。

如果我从命令行运行一个小的 PHP 测试脚本来访问 MySQL 数据库，那么它可以正常工作，所以 PHP 确实知道 MySQL，但是当它在 Apache 下运行时，它似乎不知道 MySQL 是否存在。

几个月来我一直在尝试解决这个问题，似乎已经尝试了一切，但似乎没有任何效果。

如果我真的必须重新安装 PHP，我不介意重新安装 PHP，如果有人可以演示使用 MySQL 支持配置/编译的正确方法，以便我可以让它在 Apache 下工作，尽管理想情况下我更喜欢使现有的安装工作。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-09-02T16:03:26.003

万一其他人面临这种​​情况，这是 PHP 无法访问 mysql 客户端库的情况。在系统上拥有 MySQL 服务器不是正确的解决方法。修复 ubuntu（和 PHP 5）：

```
sudo apt-get install php5-mysql 
```

安装客户端后，应重新启动网络服务器。如果您使用的是 apache，以下应该可以工作：

```
sudo service apache2 restart 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-04-22T19:42:58.180

请记住，从 PHP 5.5.0 开始，该`mysql_connect()`函数已被弃用，并在 PHP 7 中完全删除

更多信息可以在[php 文档](http://php.net/manual/en/function.mysql-connect.php)中找到：

引用：

> **警告**
> 此扩展在 PHP 5.5.0 中已被弃用，并在 PHP 7.0.0 中被删除。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此函数的替代方法包括：
> * mysqli_connect()
> * PDO::__construct()

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-14T09:44:04.463

我遇到了同样的问题，不得不参考[php 手册](http://php.net/manual/en/install.windows.extensions.php)，该手册告诉我 mysql 和 mysqli 扩展需要 libmysql.dll 才能加载。我在C:\windows\system32（windows 7）下搜索了它，找不到，所以我[在这里](http://www.dll-files.com/dllindex/dll-files.shtml?libmysql)下载它并将它放在我的C:\windows\system32中。我重新启动了 Apache，一切正常。花了我3天时间弄清楚，希望它有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-11T20:12:30.463

由于某些奇怪的原因，Apache 模块 PHP 版本可能没有将 php.ini 文件作为 CLI 版本，我建议好好看看：

*   在网页之间和通过网页的`.ini`文件中的任何差异*`php -i``phpinfo()`
*   如果没有差异，则查看文件的权限，`mysql.so`但`.ini`我认为 Apache 将这些作为`root`用户解析

在这里要非常清楚，不要去`php.ini`文件系统上搜索文件，看看 PHP 说它在看什么

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-10-16T07:01:03.837

怎么样

```
sudo yum install php-mysql 
```

或者

```
sudo apt-get install php5-mysql 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-03-24T10:11:30.750

我收到了类似的错误消息。认为我在 php.ini 文件的第一行开头无意中输入了“9o”。删除它后，我不再收到“致命错误”消息。希望这可以帮助。

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2013-03-11T19:17:27.197

守护`mysql`进程应该正在运行。

如果不试试这个：

```
#/etc/init.d/mysql start 
```

或这个：

```
#service mysqld start 
```

如果你想在启动时添加 mysql：

```
# chkconfig --add mysqld
# chkconfig -- level 235 mysqld on 
```

如果是，但它仍然无法正常工作，试试这个：

取消注释 /etc/php/php.ini 中的以下行

```
extension=mysqli.so
extension=mysql.so 
```

请检查您在**'/usr/lib64/php/modules/msql.so'**上方的帖子。它应该是**mysql.so**（如果输入错误，请忽略它......）

# java - 如何通过 PreparedStatement 在 JDBC 中使用批处理 SQL？

> ID：15346606
> 
> 赞同：0
> 
> 时间：2013-03-11T19:10:39.703
> 
> 标签：java, oracle, jdbc

我在执行我的代码时遇到此错误，该代码应该以批处理模式处理 SQL 语句：

> ORA-03115: 不支持的网络数据类型或表示

这是运行时生成错误的代码：

```
public class Login {

    public static void main(String args[]) throws SQLException {
        Connection con = null;
        PreparedStatement stmt = null;
        Statement st = null;
        try {
            Driver driver = new oracle.jdbc.driver.OracleDriver();
            DriverManager.registerDriver(driver);
            System.out.println("coneecting to the database:");
            con = DriverManager.getConnection("url", "user", "pass");
            con.setAutoCommit(false);
            System.out.println("creating statement");
            String sql = "insert into shweta values(?,?)";
            stmt = con.prepareStatement(sql);

            printrows(stmt);

            stmt.setString(1, "love");
            stmt.setInt(2, 45);
            stmt.addBatch();

            stmt.setString(1, "kaun");
            stmt.setInt(2, 29);
            stmt.addBatch();

            int count[] = st.executeBatch();

            con.commit();

            printrows(stmt);

            // printRs(rs);

            st.close();
            stmt.close();
            con.close();
        } catch (SQLException e) {
            e.printStackTrace();
            try {
                if (con != null)
                    con.rollback();
            } catch (SQLException en) {
                en.printStackTrace();
            }
        }

        catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                if (stmt != null)
                    stmt.close();
            } catch (Exception e) {
            }
            try {
                if (con != null)
                    con.close();
            } catch (Exception e) {
                e.printStackTrace();
            }

        }
        System.out.println("good bye ashish");
    }

    public static void printrows(Statement stmt) throws SQLException {
        String sql = "select * from shweta";
        ResultSet rs = stmt.executeQuery(sql);

        while (rs.next()) {
            // Retrieve by column name

            int age = rs.getInt("age");
            String first = rs.getString("auth");

            System.out.print(", Age :    " + age + "\n");
            System.out.print("AUTH :     " + first + "\n");

        }
        System.out.println();
    }
} 
```

我是编码新手，不确定如何解决此错误，感谢所有帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:22:16.327

此异构 SQL*Net 连接不支持用户绑定或定义或 Oracle 函数。升级旧版本的 Oracle 并重试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T07:16:27.387

语句 st 未初始化 - 并在 executeBatch 中使用。不应更改用于插入的语句 stmt 以在 printrows 中运行另一个 sql。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:35:06.373

我发现导致代码抛出异常的问题。原因是我没有将
我的语句初始化为 Statement st = con.createstatement(); 由于哪个编译器抛出错误。我们不能直接将准备好的语句对象作为参数传递来执行查询。所以我们必须如何使用语句并将其引用传递给 printrows 中的参数。

# node.js - Mongoose 和 Mongodb：混合模式上的 $inc

> ID：15346607
> 
> 赞同：0
> 
> 时间：2013-03-11T19:10:41.090
> 
> 标签：node.js, mongodb, mongoose

我正在尝试创建分析工具。它将读取一些句子并对其进行处理并获取当天的一些关键字。一段时间后，我会再次做同样的事情。因此，每次我得到它时，我都必须保存它，下次出现相同的单词时，我想将单词的计数增加给定值。

例如，我第一次保存内容时获得内容：{stackoverflow：2，问题：5}，下次获得内容时：{stackoverflow：3，答案：2}我应该更新旧记录，记录看起来像此内容：{stackoverflow:5,question:5,answer:2}。

我不知道接下来会出现什么单词，所以我创建了 content:Schema.Types.Mixed 但 $inc 只允许用于数字。

```
{ [MongoError: Modifier $inc allowed for numbers only]
  name: 'MongoError',
  lastErrorObject:
   { err: 'Modifier $inc allowed for numbers only',
     code: 10152,
     n: 0,
     connectionId: 77,
     ok: 1 },
  errmsg: 'Modifier $inc allowed for numbers only',
  ok: 0 } 
```

知道怎么做吗？

更新：我的代码。

```
for(index in wordsArray){
  var word = wordsArray[index];
  if(word!==topic && excludedWords.indexOf(excludedWords)===-1){
      if(slotLoc[word])
        ++slotLoc[word];
      else
        slotLoc[word] = 1;
  }
}

Words.findOneAndUpdate({slot:slot},{$inc:{content:slotLoc}},{upsert:true},function(err){
  if(err)
    console.log(err)
  else
    console.log("Saved Tweet");
}) 
```

问候， 吉什努

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:19:22.810

您已经非常接近了，但是您需要使用带有点符号的键而不是嵌套对象来构建`$inc`对象的值，以便它看起来像`{ 'content.foo': 1, 'content.bar': 2 }`.

因此，将您的代码更新为：

```
var inc = {};
for(index in wordsArray){
  var word = wordsArray[index];
  if(word!==topic && excludedWords.indexOf(excludedWords)===-1){
      var key = 'content.' + word;
      if(inc[key])
        ++inc[key];
      else
        inc[key] = 1;
  }
}

Words.update({slot:slot}, {$inc: inc}, {upsert:true}, function(err){
  if(err)
    console.log(err)
  else
    console.log("Saved Tweet");
}); 
```

请注意，我使用`update`而不是 a 是`findOneAndModify`因为您只需要在想要返回原始文档或生成的文档时才需要它。

# c# - 无法将值 NULL 插入“UserId”列

> ID：15346608
> 
> 赞同：2
> 
> 时间：2013-03-11T19:10:43.213
> 
> 标签：c#, sql-insert, sqldatasource

我收到此异常，但无法弄清楚原因：`Cannot insert the value NULL into column 'UserId'`

这是我的代码：

```
<asp:TextBox ID="FirstNameBox" runat="server" />
<br />
<br />
<asp:TextBox ID="LastNameBox" runat="server" />
<asp:SqlDataSource
    ID="InsertText"
    runat="server"
    ConnectionString="<%$ ConnectionStrings:DefaultConnection %>"
    InsertCommand="INSERT INTO UserForm (UserId,FirstName,LastName) VALUES  (@UserId,@FiName,@LaName)">

   <InsertParameters>
      <asp:ControlParameter Name="FiName" ControlID="FirstNameBox" PropertyName="Text" />
      <asp:ControlParameter Name="LaName" ControlID="LastNameBox" PropertyName="Text" />
      <asp:Parameter Name="UserId" />
   </InsertParameters>
 </asp:SqlDataSource> 
```

这就是我的代码隐藏文件中的内容：

```
public void button1_Click(object sender, System.EventArgs e)
{
   InsertText.Insert();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:16:40.800

目前，您已经设置了表格，您必须为 UserId 提供一个值。如果这不是预期的行为，我建议将 SQL Server 中的列更改为自动递增...

例如，它应该如下所示：

```
[UserId]       INT            IDENTITY (1, 1) NOT NULL 
```

根据评论编辑：

> 我将 UserId 列设置为主键和外键。我将 UserId 设置为 GUID。当我检查表格时，UserId 已经存在。我只想添加用户的名字或姓氏。

不知道你的问题是什么，首先你在谈论`INSERT`，现在你在谈论为现有记录设置值。如果要`update`现有记录，则需要先获取 id 并相应地更新值

示例 SQL 命令可能类似于以下内容：

```
UPDATE UserForm SET FirstName = @FirstName, LastName = @LastName WHERE UserId = @UserId 
```

Insert 执行它所说的 - 向表中插入一条新记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:28:51.973

您没有为 userId 列设置任何值。如果它已经被设置了身份。您可以在插入数据时删除用户 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-30T03:03:43.347

我只是抓住了用户 ID 并执行了更新命令。

```
Guid userGuid = (Guid)Membership.GetUser(User.Identity.Name).ProviderUserKey;

UserIdLabel.Text = userGuid.ToString(); 
```

# javascript - 将很多图像打开到一个 1 html 页面中

> ID：15346624
> 
> 赞同：0
> 
> 时间：2013-03-11T19:11:38.517
> 
> 标签：javascript, html

我创建了一个 html 文件，其中包含所有照片和另一个 html 文件，其中我只看到 1 张全尺寸图像。现在，如果我单击第一个文件中的一个图像，我希望使用第一个文件中的他的 src 将这些图像打开到第二个 html 页面中，我想使用 javascript。（是的，我知道我可以创建 20 个 html 文件，每个文件都有不同的照片，但我只想使用 1 个 html 文件）

文件 1 = “index.html”：

```
 <a href="work_detail.html" ><img src="images/templatemo_image_01_big.jpg" alt="image" 
 width="100%" height="100%" id="pic1" onClick="hello();" /></a> 
```

文件 2 =“work_detail.html”：

```
 <a target="_parent"><img src="" alt="product" id="work" /></a> 
```

JavaScript：

```
 function hello(){
  var pic1 = document.getElementById('pic1').src;
 document.getElementById('work').src= pic1;
 } 
```

如何使用 JavaScript 将第一个 id 与它们位于不同文件中的第二个 id 连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:21:20.977

我能想到的一种选择是让第二页接收图像的来源作为 url 参数。[这](https://stackoverflow.com/questions/979975/how-to-get-the-value-from-url-parameter)是一篇描述如何使用 javascript 读取 url 参数的帖子。

之后使用图像 src 并将其设置为第二个图像。顺便说一下，您将需要对 url 进行 url 编码。对于这样的编码使用`encodeURIComponent`：

```
str = encodeURIComponent(imageSource); 
```

您在接收页面中使用以下代码进行解码`decodeURIComponent`：

```
str = decodeURIComponent(uri_encode); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:37:37.800

考虑 PHP。

在php中它会像

将显示完整图像的页面为

```
<?php
$src= isset($_GET['src']) ? $_GET['src'] : "default_image_url.ext";
$alt= isset($_GET['alt']) ? $_GET['alt'] : "default_alt";
echo "<img src='$src' alt='$alt'>"; 
```

现在，在主 javascript 页面上，添加它

```
function GtU(url, alt){
 window.location.href="second_page.php?src="+url+"&alt="+alt;
} 
```

在每个 img 标签中添加这个， <img src="source" alt="alt" onclick="GtU(this.src, this.alt)" > 实际上它是一个更好的方法......只是一点点服务器端的是必需的。也可以用饼干做，但会弄脏手

# objective-c - UITableView 可扩展部分，表头从表格中间掉落

> ID：15346628
> 
> 赞同：1
> 
> 时间：2013-03-11T19:11:49.343
> 
> 标签：objective-c, uitableview, animation, sections, expandable

我有一张带有消耗品部分的桌子。有点像 Windows 上树中的“加号”。当用户点击某个部分上的加号按钮时，该部分会展开/折叠，显示或隐藏其中的单元格。这里是`viewForHeaderInSection:`

```
 // Open/close on tap block
    [headerView setOpenOnTapBlock:^(BOOL open) {
        NSInteger numberOfRowsToChange = [changedRows count];
        NSMutableArray *indexPathsToChange = [[NSMutableArray alloc] init];

        for (NSInteger i = 0; i < numberOfRowsToChange; i++) {
            [indexPathsToChange addObject:[NSIndexPath indexPathForRow:i inSection:section]];
        }

        if (indexPathsToChange.count) {
            [self.redSection[section] setOpen:open];

            [self.tableView beginUpdates];
            if (open) {
                [self.tableView insertRowsAtIndexPaths:indexPathsToChange
                                      withRowAnimation:UITableViewRowAnimationMiddle];
            } else {
                [self.tableView deleteRowsAtIndexPaths:indexPathsToChange
                                      withRowAnimation:UITableViewRowAnimationMiddle];
            }
            [self.tableView endUpdates];
        }
    }]; 
```

现在，除了 1 个小细节外，所有的扩展折叠都可以正常工作。

考虑一个加载了最初展开的所有部分的表。如果表格的内容位置使得第 3（例如）节标题位于底部，并且点击“折叠”，则第 4 节标题现在将绘制在第 3 个标题的正下方。确实如此，但是发生了一些奇怪的动画-添加的第 4 个标题从表格视图的大约中间下降。任何想法如何避免这种情况？

注意：这只发生在表格滚动到谷底之前。之后，一切正常。感谢任何建议。

# javascript - 加载时Javascript选择菜单onchange

> ID：15346629
> 
> 赞同：0
> 
> 时间：2013-03-11T19:11:50.010
> 
> 标签：javascript, jquery, forms, firefox, selected

我正在使用选择菜单：

```
<select id="form_frame1" name="frame1" onchange="getChart(this);">
  <option value="area_chart_google" >Area Chart</option>
  <option value="area_chart_2" selected="selected">Stacked Chart</option>
</select> 
```

getChart 应该仅在更改选择时被触发：

```
function getChart(selection) {
    alert(selection.value);
    //do something
} 
```

问题是，一旦我加载我得到的页面：**area_chart_google**：这甚至不是以前选择的选择！所以有两件事我不明白：

1.  为什么加载页面（onload）后会触发 onChange 事件？
2.  为什么它选择第一个选项，即使之前没有选择？

我刚刚找到了这个功能，我想这是问题所在：

```
jQuery(function() {
 if (localStorage.getItem('form_frame1')) {
    jQuery("#form_frame1 option").eq(localStorage.getItem('form_frame1')).prop('selected', true);
    jQuery("#form_frame1 option").change();
 }

 jQuery("#form_frame1").on('change', function() {
    localStorage.setItem('form_frame1', jQuery('option:selected', this).index());
 }); 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:18:03.727

请看这个小提琴。 [http://jsfiddle.net/6H9dr/1/](http://jsfiddle.net/6H9dr/1/)

像下面这样使用

```
$(document).ready(function() {
$('#form_frame1').change(function() {
    alert('Hi');
}); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:15:33.597

如果您实际上正在使用 jquery，那么为什么不尝试

```
$('#form_frame1').change(function(){
   getChart($('#form_frame1').val());
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:15:35.040

当您刷新页面时，它会自动选择第一个选项。

# web-services - JAX-WS WebServiceContext 保持为空（注解注入失败）

> ID：15346630
> 
> 赞同：3
> 
> 时间：2013-03-11T19:11:50.127
> 
> 标签：web-services, dependency-injection, glassfish, jax-ws

我尝试将我的应用程序部署到带有 Metro/Jersey 和 Glassfish 3.1.2 的 Tomcat 6，但访问 WebServiceContext 资源总是会导致空指针异常，*除非*我使用自动生成的 Glassfish 测试门户测试应用程序。

这是我编写的一个简单的测试方法来验证这一点：

```
import javax.annotation.Resource;
import javax.jws.WebService;
import javax.xml.ws.WebServiceContext;
import javax.xml.ws.handler.MessageContext;
import javax.servlet.ServletContext;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;

@WebService
@Path("/test")
public class Test {
    @Resource
    WebServiceContext wsContext;

    @GET
    @Produces("text/plain")
    @Path("/hello")
    public String hello() {
        MessageContext mc = wsContext.getMessageContext();   // NULL POINT HAPPENS HERE!
        ServletContext servletContext = (ServletContext) 
                mc.get(
                        MessageContext.SERVLET_CONTEXT);
        String s = servletContext.getRealPath("/WEB-INF");
        return "Real Path: " + s;
    }
} 
```

这是相应的 web-xml（主要由 Eclipse 自动生成）：

```
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>WebApp</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description>JAX-RS Tools Generated - Do not modify</description>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>JAX-RS Servlet</servlet-name>
    <url-pattern>/jaxrs/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

最有趣的是，当我通过 Glassfish 生成的 URL 测试 TestService 时：

```
http://localhost:8080/WebApp/TestService?Tester 
```

我可以通过提交表单来测试/调用“hello”方法并获取生成适当文件路径的有效 WebServiceContext 对象。不幸的是，实际上执行 HTTP GET 请求，例如

```
$curl -H "Accept: text/plain" http://localhost:8080/WebApp/jaxrs/test/hello 
```

导致空指针堆栈跟踪指向 Test 类中的第 22 行（WebServiceContext）。

为什么 Web 服务可以在 Glassfish 测试工具中工作，而不是来自实际的 HTTP 请求？

**更新：**

如果您对 GlassFish 默认 URL 使用 GlassFish 默认 XML SOAP 请求，我能够确认 Web 服务工作正常（WebServiceContext 已正确注入），如下所示：

```
$curl -X POST -d @req.xml http://localhost:8080/ZlotyGlassfish/TestService --header "Content-Type:text/xml" 
```

其中文件“req.xml”的内容是匹配 WSDL 定义的请求：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:impl="http://impl.rest.webservice.webapp.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <impl:hello/>
   </soapenv:Body>
</soapenv:Envelope> 
```

*我的主要问题仍然是为什么这可以通过默认的 GlassFish 实现完美地工作，但是 @GET 和 @Path 符号生成的端点无法注入适当的 WebServiceContext 对象？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-13T02:55:40.180

不同之处在于默认的 GlassFish 实现是基于 JAX-WS **SOAP 的**Web 服务。对于 JAX-RS Web 服务，您应该使用以下注解来注入上下文。

```
 @Context 
 private ServletContext sc; 
```

还有其他类型可以使用 @Context 注解注入，例如`UriInfo`, `HttpHeaders`。有关详细信息，请参阅[泽西岛文档](http://jsr311.java.net/nonav/releases/1.1/spec/spec3.html#x3-520005)。`WebServiceContext`并且`MessageContext`是在 JAX-RS 上下文中没有意义的 JAX-WS 对象。

# c# - 如何实现虚拟静态属性？

> ID：15346631
> 
> 赞同：10
> 
> 时间：2013-03-11T19:11:59.453
> 
> 标签：c#, properties, static, virtual

据我所知`C#`不支持虚拟静态属性。如何实现这样的行为`C#`？

我想归档基类的所有派生类都必须覆盖静态属性。获取派生类型，我想访问一个名为的静态属性`Identifier`

```
Type t = typeof(DerivedClass);
var identifier= (String) t.GetProperty("Identifier", BindingFlags.Static).GetValue(null, null); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-01-09T22:37:33.620

对于有相同想法并通过谷歌搜索到达这篇文章的人，请考虑[抽象工厂模式](https://en.wikipedia.org/wiki/Abstract_factory_pattern)而不是这里的解决方案。

--

因为大约五年后您仍然没有接受的答案，让我试一试（再次）..

我曾经考虑过将[奇怪重复的模板模式](https://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)作为一种解决方法，但是由于您将打开`BaseClass`继承，这不是一个好主意。您可能想查看[Lippert 先生的博](https://blogs.msdn.microsoft.com/ericlippert/2011/02/03/curiouser-and-curiouser/)文，以更好地理解原因。

*   **解决方案1**：你不注册，我不认识..

    ```
    public abstract class BaseClass {
        protected static void Register<U>(String identifier) where U : BaseClass {
            m_identities.Add(typeof(U).GetHashCode(), identifier);
        }

        public static String GetIdentifier<U>() where U : BaseClass {
            var t = typeof(U);
            var identifier = default(String);
            RuntimeHelpers.RunClassConstructor(t.TypeHandle);
            m_identities.TryGetValue(t.GetHashCode(), out identifier);
            return identifier;
        }

        static Dictionary<int, String> m_identities = new Dictionary<int, String> { };
    }

    public class DerivedClassA:BaseClass {
        static DerivedClassA() {
            BaseClass.Register<DerivedClassA>("12dc2490-065d-449e-a199-6ba051c93622");
        }
    }

    public class DerivedClassB:BaseClass {
        static DerivedClassB() {
            BaseClass.Register<DerivedClassB>("9745e24a-c38b-417d-a44d-0717e10e3b96");
        }
    } 
    ```

    * * *

    测试：

    ```
    Debug.Print("{0}", BaseClass.GetIdentifier<DerivedClassA>());
    Debug.Print("{0}", BaseClass.GetIdentifier<DerivedClassB>()); 
    ```

这是通过类型初始化器的一个相对简单的模式。该`Register`方法只暴露给派生类；并且`GetIdentifier`和`Register`方法都被限制为使用派生自 的类型参数调用`BaseClass`。虽然我们不强制派生类覆盖任何东西，但如果它没有注册自己，`GetIdentifier`就不会识别它并返回`null`。

*   **解决方案2**：在你显示你的身份之前，我给你买了一个默认值。无论你认为自己是谁，我都相信——只要没有歧义。

    ```
    public abstract class BaseClass {
        public abstract String Identifier {
            get;
        }

        public static Type GetDerivedClass(String identifier) {
            return m_aliases[identifier];
        }

        public static String GetIdentifier(Type t) {
            var value = default(String);

            if(t.IsSubclassOf(typeof(BaseClass))) {
                var key = t.GetHashCode();

                if(!m_identities.TryGetValue(key, out value)) {
                    value=""+key;
                    m_aliases.Add(value, t);
                    m_identities[key]=value;
                }
            }

            return value;
        }

        static void UpdateAlias(BaseClass x) {
            var t = x.GetType();
            var value = x.Identifier;
            m_aliases.Add(value, t);
            m_identities[t.GetHashCode()]=value;
        }

        protected BaseClass() {
            BaseClass.UpdateAlias(this);
        }

        static Dictionary<String, Type> m_aliases = new Dictionary<String, Type> { };
        static Dictionary<int, String> m_identities = new Dictionary<int, String> { };
    } 
    ```

    * * *

    ```
    public class DerivedClassA:BaseClass {
        public override String Identifier {
            get {
                return "just text";
            }
        }
    }

    public class DerivedClassB:BaseClass {
        public override String Identifier {
            get {
                return "just text";
            }
        }
    } 
    ```

    * * *

    和测试：

    ```
    public static void TestMethod() {
        var idBeforeInstantiation = BaseClass.GetIdentifier(typeof(DerivedClassA));
        var y = new DerivedClassA { };
        var idAfterInstantiation = BaseClass.GetIdentifier(typeof(DerivedClassA));

        Debug.Print("B's: {0}", BaseClass.GetIdentifier(typeof(DerivedClassB)));
        Debug.Print("A's after: {0}", idAfterInstantiation);
        Debug.Print("A's before: {0}", idBeforeInstantiation);
        Debug.Print("A's present: {0}", BaseClass.GetIdentifier(typeof(DerivedClassA)));

        var type1 = BaseClass.GetDerivedClass(idAfterInstantiation);
        var type2 = BaseClass.GetDerivedClass(idBeforeInstantiation);

        Debug.Print("{0}", type2==type1); // true
        Debug.Print("{0}", type2==typeof(DerivedClassA)); // true
        Debug.Print("{0}", type1==typeof(DerivedClassA)); // true

        var typeB=BaseClass.GetDerivedClass(BaseClass.GetIdentifier(typeof(DerivedClassB)));

        var x = new DerivedClassB { }; // confilct
    } 
    ```

显然这是一个更复杂的解决方案。但是，正如您所看到的`idBeforeInstantiation`，`idAfterInstantiation`它们是不同的，它们要么是`DerivedClassA`. `m_identities`包含每个派生类的最后更新标识符，`m_aliases`并将包含派生类的所有标识符别名。由于*虚拟*和*静态*的组合目前不是该语言的特性（也许永远不会......），如果我们想要强制*覆盖*，那么我们必须通过一些解决方法来做到这一点。如果您选择解决方案2，您可能想要实现您自己的`UpdateAlias`防止派生类为单一类型提供过多的各种别名，尽管它们都是有效的。测试中的最后一条语句是故意放置的，以证明标识符的冲突。

因为这两个解决方案是为您考虑*不实例化*派生类而精心设计的，它们都*不需*要这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T19:26:02.710

简单地说，你不能，所以我谦虚地建议你离开它并尝试其他东西。

请参阅[此 SO](https://stackoverflow.com/questions/248263/why-cant-i-declare-c-sharp-methods-virtual-and-static)帖子中的答案。如果您**可以**实现这样的功能，您将遇到**严重**的继承问题。

去过也做过。在我再次清醒后，我采用了常规继承方法。我想你可能也应该这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-28T16:46:47.320

另一种不需要注册类但确实需要一些额外工作的方法是创建一个静态类，该类保存每个派生类类型的“静态”数据并从静态返回一个常量/静态值班级。让我解释一下这种方法的细节。

对于类的每个成员来说，拥有一个始终相同的静态属性的一个重要原因是避免不必要的内存使用和重复。虽然这里演示的方法并没有完全避免这种情况，但它仍然绕过了大部分“额外”开销。以下示例不满足的唯一用例是，如果使用静态属性的原因是您不必拥有实例，因为您必须拥有实例才能获取数据。

如果您需要一个对于类的每个成员（静态）始终相同的虚拟字段或属性，请使用返回“常量”或静态数据的非静态属性，如下所示：

```
public static class MyStaticData
{
    public static const string Class1String = "MyString1";
    public static const int Class1Int = 1;
    public static const string Class2String = "MyString2";
    public static const int Class2Int = 2;
    // etc...
}

public abstract class MyBaseClass
{
    public abstract string MyPseudoVirtualStringProperty { get; }
    public abstract int MyPseudoVirtualIntProperty { get; }
}

public class MyDerivedClass1 : My BaseClass
{
    public override string MyPseudoVirtualStringProperty { get { return MyStaticData.Class1String; } }
    public override int MyPseudoVirtualIntProperty { get { return MyStaticData.Class1Int } }
}

public class MyDerivedClass2 : My BaseClass
{
    public override string MyPseudoVirtualStringProperty { get { return MyStaticData.Class2String; } }
    public override int MyPseudoVirtualIntProperty { get { return MyStaticData.Class2Int } }
} 
```

# http - 嗅探器 - 如何将 GET 请求与其响应联系起来？

> ID：15346632
> 
> 赞同：1
> 
> 时间：2013-03-11T19:12:02.030
> 
> 标签：http, tcp, packet-sniffers

我有一个获取所有数据包（进出）的功能。我正在监视 GET 和 HTTP 200 OK。一切正常，但如何将 GET 请求与其 OK 响应链接起来？

编辑：我想知道如何以编程方式进行。我知道专业的嗅探器可以“跟踪流量”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:18:29.453

您可以使用请求和响应的源端口和目标端口将其链接到相同的 TCP 流。

```
CLIENT > TCP SRC 33333 DST 80 "GET / HTTP/1.1"
SERVER < TCP SRC 80 DST 33333 "200 OK" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:16:50.753

如果您只想阅读流量，您可以随时使用[WireShark](http://www.wireshark.org/)。它具有“Follow TCP Stream”的功能。如果你想编写一个嗅探器，我会建议[http://en.wikipedia.org/wiki/Transmission_Control_Protocol](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)的讲座。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T09:26:40.063

您可以使用[justniffer](http://justniffer.sourceforge.net/)。它可以通过脚本扩展。[在存储库的主干](http://sourceforge.net/p/justniffer/code/HEAD/tree/trunk/)分支中发布的新版本 not yes可由 python 扩展。

# c++ - 函数调用的重载运算符

> ID：15346634
> 
> 赞同：1
> 
> 时间：2013-03-11T19:12:05.280
> 
> 标签：c++, operator-overloading, overloading

是否可以仅为一个功能重载运算符。我想覆盖 '->' 运算符，但仅在使用 print 函数（ ->print() ）调用它时。我知道这是一个奇怪的请求，但我正在努力实现某个 API，我需要这样的东西。

例如：

```
Cat cat;
cat.walk();
cat->print(); //I want to overload only this call 
```

但是，我不想在所有情况下都重载“->”运算符。例如：

```
Cat* cat;
cat->walk(); //this should work normally
cat->print(); //this wouldn't call the print() function, 
              //since I overloaded cat->print() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:17:29.143

您可以使用虚拟返回对象重载 -> 运算符。真正的 print() 方法可以设为私有，并且只能通过访问器访问。在一个最小的例子中：

```
#include <iostream>

struct Cat;

struct CatAccessor {
private:
    friend class Cat;
    CatAccessor(Cat& cat) : cat(cat) {}
    Cat& cat;
public:
    void print();
    CatAccessor* operator->() { return this; }
};

struct Cat {
    CatAccessor* operator->() { return CatAccessor(*this); }
    void walk() { std::cerr << "Walk called" << std::endl; }
private:
    void print() { std::cerr << "Print called" << std::endl; }
    friend class CatAccessor;
};

void CatAccessor::print() { cat.print(); }

int main() {
    Cat cat;
    cat.walk();
    cat->print();
    Cat* catp = &cat;
    catp->walk();
    // error: catp->print();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T19:15:14.937

如果您可以移动`print()`到基类，那很容易：

```
class CatBase
{
public:
    void print();
};

class Cat : private CatBase
{
public:
    void walk();

    CatBase* operator->() { return this; }
    const CatBase* operator->() const { return this; }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T19:15:06.973

`C++`不允许你“直接”做这样的事情。最好的办法是从 Cat 类继承，使方法 print 虚拟并在子类中以不同的方式实现它。

# ubuntu - 无法在 RVM 上切换其他 ruby 版本

> ID：15346637
> 
> 赞同：1
> 
> 时间：2013-03-11T19:12:12.093
> 
> 标签：ubuntu, rvm, ubuntu-12.04, konsole

我在 Ubuntu 12.04 上有[Yakuake](http://yakuake.kde.org/)，我之前遇到过[这个问题](https://stackoverflow.com/questions/14798707/rails-executable-not-working-on-yakuake-app)，它已经解决了。但现在我无法在 RVM 上从 Ruby 切换到 JRuby。当我运行`rvm use jruby`它时会抛出这个错误：

```
RVM is not a function, selecting rubies with 'rvm use ...' will not work.

You need to change your terminal emulator preferences to allow login shell.
Sometimes it is required to use `/bin/bash --login` as the command.
Please visit https://rvm.io/integration/gnome-terminal/ for a example. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T23:17:04.693

感谢[Mikey](https://stackoverflow.com/users/174034/mikey)，添加`source ~/.rvm/scripts/rvm`到 -因为在 Yakuake`.zshenv`中使用- 解决了这个问题。`zsh`

# python - 如果在同一个文件夹中，Python如何检查 os.exists？

> ID：15346639
> 
> 赞同：-1
> 
> 时间：2013-03-11T19:12:17.707
> 
> 标签：python, path

我有一个程序可以保存和加载它存储在文本文件中的数据。文件和程序在同一个文件夹中。为了保存文件，程序必须至少运行一次。要检查是否已创建保存文件，我写道：（其中一些）

```
import os.path
def load_f():        
    global save_list
    if os.path.exists('Something.txt'):
        inFile = open('Something.txt', 'rb')
        save_list = inFile.read()
        inFile.close() 
```

它似乎无法加载文件。我写的路径是否无效。我需要将文件夹名称添加到路径中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:17:15.510

没有路径的文件名将在当前工作目录中打开。

这与`os.getcwd() + "/" + filename`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:15:18.493

你有一个错字——应该是`if os.path.exists('Something.txt'):`. 虽然我还是建议选择一个不同的名字......：P

另外，我建议将主体更改`if`为：

```
with open('Something.txt', 'rb') as in_file:
  save_list = in_file.read() 
```

这提供了一种更安全（更短）的方式来确保文件被关闭。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-11T19:20:13.790

Python 的成语是“请求原谅比请求许可更容易”。

```
try:
    with open( "Something.txt", "rb" ) as f:
        print "Something.txt contains", f.read()
except IOError:
    print "Something.txt doesn't exist! (or we couldn't open it)" 
```

# java - 使用 Mail API 从 Swing 应用程序创建 Jar 文件

> ID：15346643
> 
> 赞同：0
> 
> 时间：2013-03-11T19:12:32.297
> 
> 标签：java, jar, jakarta-mail, executable-jar

我无法将我的应用程序转换为 .jar 文件。我努力了

```
jar cfve file.jar Main *.class 
```

其中 Main 是入口点， *.class 是所有类文件（我有大约 4 个内部类，所以它制作了很多 .class 文件）。现在这个应用程序使用 Java Mail API。当我下载 javamail-1.4.6 时，我不知道把它放在哪里。用户告诉我，“把它放在你的类路径中”，但我不知道这对我电脑上的文件夹意味着什么。我试图将文件夹路径连接到路径环境变量的末尾，但我不确定这是否有效。

回到 jar 文件，当我单击创建的 .jar 文件时，没有任何反应。没有框架打开，或任何东西。谁能帮我解决这个问题，也许可以解释一下我需要做什么才能永久添加邮件 API？谢谢

最好的...SL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:42:25.300

如果您使用某些 IDE（例如 Eclipse/NetBeans）来构建您的应用程序，您只需将 jar 放入您的项目中（通常在 lib 文件夹中）并将其添加到构建路径中。然后，当您创建可执行 jar 文件时，您的外部 jar 文件应该包含在其中。

您可以手动将 jar 文件添加到清单文件本身的类路径中。例子 -

```
Class-Path: jar1-name jar2-name directory-name/jar3-name 
```

通过在清单中使用 Class-Path 标头，您可以避免在调用 Java 来运行应用程序时必须指定 long -classpath 标志。

还有一件事，因为您说“当我单击创建的 .jar 文件时，什么也没有发生”，您可以从命令提示符运行您的 jar 文件，以查看 jar 文件执行失败时的任何错误，如果它从 jar 文件中加载类不包含在您的类路径中。

希望对您有所帮助。

# android - Android：将变量传递给已经运行的服务

> ID：15346647
> 
> 赞同：17
> 
> 时间：2013-03-11T19:12:40.627
> 
> 标签：android, android-intent, service, android-activity

我在将值从 Activity 传递到已经运行的服务时遇到问题。我想知道最好的方法是什么？添加额外内容将不起作用，因为我认为这必须在意图开始之前完成？（如我错了请纠正我）。

任何帮助都会很棒！如果需要，我可以详细说明。

担。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-03-11T19:15:12.097

如果您的服务不是`IntentService`，您可以调用任意`startService(...)`多次。该服务将第一次运行，但下一次调用将导致新`onStartCommand()`调用以及您需要的新附加功能。

检查[这个答案](https://stackoverflow.com/questions/8019899/starting-a-service-multiple-times)和[文档](http://developer.android.com/guide/components/services.html#StartingAService)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-20T13:44:16.720

**如果服务正在运行，则从活动向服务传递额外的意图启动此意图** ，从活动尝试此操作并使用 putExtra 传递参数。

```
Intent rc = new Intent(getApplicationContext(), myService.class);
rc.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); //important for Android 10
rc.putExtra("parama","ciao");
rc.putExtra("paramb","hello");
startService(rc); 
```

记住，新线程，退出到主线程。

```
new Thread(){
    @Override
        public void run() {
            super.run();
            //start service..
        }    
} 
```

**你的服务**

```
 public class myService extends Service {
               @Override
                public int onStartCommand(Intent intent, int flags, int startId) {
                if (intent.hasExtra("parama")){            
                Bundle b=new Bundle();
                b=intent.getExtras();
                String par_a=b.getString("parama");
                }
                if (intent.hasExtra("paramb")){            
                Bundle b=new Bundle();
                b=intent.getExtras();
                String par_b =b.getString("paramb");
                }
        }
    } 
```

# .net - 如何通过 URI 引用 WCF Web 服务/如何通过 URI 发布到 WCF 服务？

> ID：15346649
> 
> 赞同：0
> 
> 时间：2013-03-11T19:12:45.567
> 
> 标签：.net, wcf, service, web, uri

我是创建 Web 服务的新手，我不完全了解如何访问我的 Web 服务。

我想要做的是创建一个 WCF webservice，它读取发布到它的 JSON 数据并反序列化它然后做一些事情。

我创建了一个非常简单的 WCF 服务，其中公开了两种方法并创建了一个 uri 端点。虽然当我去我的uri时，我什么也没得到。

我应该能够导航到“http://localhost:8000/asd/EchoWithGet?s=Hello, world!” 在我的浏览器中，该方法应该返回“你说”+ s。当我在服务运行的情况下导航到该位置时，我什么也得不到。

我的问题是如何连接我的程序？我还可以通过 HTML 表单发布到我的服务然后打开 IO 阅读器吗？

在此先感谢您的帮助。

下面是我的代码。

```
namespace WcfService1
{
[ServiceContract]
public interface IService1
{
    [OperationContract]
    [WebGet]
    string EchoWithGet(string s);

    [OperationContract]
    [WebInvoke]
    string EchoWithPost(string s);
}

public class Service1 : IService1
{
    public string EchoWithGet(string s)
    {
        return "You said " + s;
    }
    public string EchoWithPost(string s)
    {
        return "You said " + s;
    }
}

class program
{
    static void Main(string[] args)
    {
        WebServiceHost host = new WebServiceHost(typeof(Service1), new Uri("http://localhost:8000/asd/"));
        ServiceEndpoint ep = host.AddServiceEndpoint(typeof(IService1), new WebHttpBinding(), "");

        /*
        ServiceDebugBehavior sdb = host.Description.Behaviors.Find<ServiceDebugBehavior>();
        sdb.HttpHelpPageEnabled = false;
        */

        host.Open();

        Console.WriteLine("Service is running");
        Console.WriteLine("Press enter to quit...");
        Console.ReadLine();
        host.Close();
    }
} 
```

在此先感谢您的帮助

更新了，我认为我的问题源于我的配置文件。我需要向配置文件添加哪些信息才能通过浏览器使用我的 Web 服务？

```
<?xml version="1.0"?>
<configuration>
<system.web>
<compilation debug="true" targetFramework="4.0" />
</system.web>
<system.serviceModel>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true"/>
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
</system.serviceModel>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:24:29.287

您可以使用以下代码进行修改并再次检查。

```
 <system.serviceModel>
  <services>     
  <service behaviorConfiguration="WcfService1.Service1Behavior"
    name="WcfService1.Service1">
    <endpoint address="" behaviorConfiguration="JSONEndpointBehavior"
      binding="webHttpBinding" contract="WcfService1.IService1" />
    <endpoint address="ws" binding="wsHttpBinding" contract="WcfService1.IService1">
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />       
  </service>
</services>
<behaviors>
  <endpointBehaviors>
    <behavior name="JSONEndpointBehavior">
      <webHttp />
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="WcfService1.Service1Behavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>        
  </serviceBehaviors>
</behaviors> 
```

并使用以下代码修改 webvoke

```
 [WebInvoke(Method = "GET", UriTemplate = "/EchoWithPost/{s}", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)] 
```

字符串 EchoWithPost(字符串 s);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:56:43.557

在您的 Web.config 文件的 serviceModel 部分尝试它：

```
 <system.serviceModel>
    <services>
      <service behaviorConfiguration="RestServiceBehavior" name="Service1">
        <endpoint address="" behaviorConfiguration="web" binding="webHttpBinding"
          bindingConfiguration="webHttpBindingWithJSONP" contract="IService1" />
      </service>
    </services>

    <bindings>
      <webHttpBinding>
        <binding name="webHttpBindingWithJSONP"/>
      </webHttpBinding>
    </bindings>

    <behaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="RestServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

# networking - 需要检查是否在 Windows Server 2008 的默认网络适配器（或全部）上禁用 IPv6

> ID：15346651
> 
> 赞同：1
> 
> 时间：2013-03-11T19:12:51.397
> 
> 标签：networking, vbscript, windows-server-2008, wmi

我需要检查是否在服务器上禁用了 IPv6。我的脚本无法启用或禁用它，只需检查一下。

我在不久前发表了这篇文章，[VBScript 子例程检查注册表中的 IPv6 状态...返回 -1](https://stackoverflow.com/questions/12480435/vbscript-subroutine-to-check-ipv6-status-in-registry-returning-1)，我一直在使用这个逻辑，它一直运行良好。今天我遇到了一个问题，我得到了一个假阴性。适配器上的 IPv6 复选框未选中，我的代码逻辑（在我粘贴的链接中）没有检查，“DisabledComponents”键甚至不存在。

我已经搜索了几个小时，但找不到任何知道默认网络适配器是否启用 IPv6 的方法。我会很好地遍历所有网络适配器，但 WMI 网络适配器中没有一个属性可以告诉我是否启用了 IPv6。

不幸的是，我不知所措...

有什么建议么？

PS我的代码在链接中

编辑：Rene 解决方案的输出

```
 SYSTEM\CurrentControlSet\services\TCPIP6\Parameters\ no disabled components

    \Device\{5EB82563-B53C-487C-9071-2FFEEF3ACFFD}  = \Device\{5EB82563-B53C-487C-9071-2FFEEF3ACFFD}
    \Device\{C22E58F2-C979-4CAE-8B15-73DFE86E8961}  = \Device\{C22E58F2-C979-4CAE-8B15-73DFE86E8961}
    \Device\{F2E73C76-C023-492D-8A14-824233F953F9}  = \Device\{F2E73C76-C023-492D-8A14-824233F953F9}
    \Device\{7D754194-9C49-44C4-9D39-5C5CE1A79EE2}  = \Device\{7D754194-9C49-44C4-9D39-5C5CE1A79EE2}
    \Device\{07F7960F-D1A0-408C-8BDB-88FE296F0BB2}  = \Device\{07F7960F-D1A0-408C-8BDB-88FE296F0BB2}
    \Device\{8D600902-D19B-462B-995B-C79EDB9BD9C7}  = \Device\{8D600902-D19B-462B-995B-C79EDB9BD9C7}
    \Device\{5E848319-EF8D-46F2-863E-A11BA9033FB0}  = \Device\{5E848319-EF8D-46F2-863E-A11BA9033FB0}
    \Device\{98EC2BBC-2FC1-4FD7-A925-7DE3F17ECC50}  = \Device\{98EC2BBC-2FC1-4FD7-A925-7DE3F17ECC50}
\Device\{5EB82563-B53C-487C-9071-2FFEEF3ACFFD} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{5EB82563-B53C-487C-9071-2FFEEF3ACFFD}
\Device\{C22E58F2-C979-4CAE-8B15-73DFE86E8961} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{C22E58F2-C979-4CAE-8B15-73DFE86E8961}
\Device\{F2E73C76-C023-492D-8A14-824233F953F9} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{F2E73C76-C023-492D-8A14-824233F953F9}
\Device\{7D754194-9C49-44C4-9D39-5C5CE1A79EE2} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{7D754194-9C49-44C4-9D39-5C5CE1A79EE2}
\Device\{07F7960F-D1A0-408C-8BDB-88FE296F0BB2} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{07F7960F-D1A0-408C-8BDB-88FE296F0BB2}
\Device\{8D600902-D19B-462B-995B-C79EDB9BD9C7} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{8D600902-D19B-462B-995B-C79EDB9BD9C7}
\Device\{5E848319-EF8D-46F2-863E-A11BA9033FB0} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{5E848319-EF8D-46F2-863E-A11BA9033FB0}
\Device\{98EC2BBC-2FC1-4FD7-A925-7DE3F17ECC50} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{98EC2BBC-2FC1-4FD7-A925-7DE3F17ECC50}
\Device\{9E85E61A-EBB4-40E0-BB55-31FE48973DD2} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{9E85E61A-EBB4-40E0-BB55-31FE48973DD2}
\Device\{4E0B9F15-E1C9-4093-A929-419BE1B089FB} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{4E0B9F15-E1C9-4093-A929-419BE1B089FB}
\Device\{4974F3E4-7493-428A-8DD4-3A43F64ACA00} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{4974F3E4-7493-428A-8DD4-3A43F64ACA00}
\Device\{C6E0B4F3-BC2C-49D7-9178-41F6F9C75C94} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{C6E0B4F3-BC2C-49D7-9178-41F6F9C75C94}
\Device\{8BE42170-83DC-4A40-880A-3163A88D8540} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{8BE42170-83DC-4A40-880A-3163A88D8540}
\Device\{8EBA3452-69B1-4284-A859-58B9C3A2735B} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{8EBA3452-69B1-4284-A859-58B9C3A2735B}
\Device\{046E21CF-38BB-447B-81F1-12536E4260DE} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{046E21CF-38BB-447B-81F1-12536E4260DE}
\Device\{FB30DEEC-3A32-47FF-A8CC-EBFB112D29C2} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{FB30DEEC-3A32-47FF-A8CC-EBFB112D29C2}
\Device\{72A0EBC4-11EE-4A57-8F4E-9771264B7C74} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{72A0EBC4-11EE-4A57-8F4E-9771264B7C74}
\Device\{767698C6-D554-4EFF-8D15-9F2F6BDA5FD3} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{767698C6-D554-4EFF-8D15-9F2F6BDA5FD3}
\Device\{CE60A593-435C-40C3-8D2D-F48D00F743B6} {5E848319-EF8D-46F2-863E-A11BA9033FB0} = {5E848319-EF8D-46F2-863E-A11BA9033FB0}\Device\{CE60A593-435C-40C3-8D2D-F48D00F743B6}
    ... 
```

它包括更多，但我只粘贴了一个片段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:53:49.060

[从此处](https://stackoverflow.com/questions/12480435/vbscript-subroutine-to-check-ipv6-status-in-registry-returning-1)改编脚本并使用[此 kb 文章](http://support.microsoft.com/kb/929852)作为源。该脚本枚举值以首先检查是否找到 DisabledComponents，它是它的回显它的内容。如果从未找到它，则回显没有找到任何值（这基本上意味着：全部启用）

```
'**************************************************************************
'IP Address Configuration: Check if ipv6 is disabled
'**************************************************************************
Sub CheckIPV6()
   WScript.Echo("Check if IPv6 is disabled")
   WScript.Echo("------------------------------------")
   Const strIPV6Key = "SYSTEM\CurrentControlSet\services\TCPIP6\Parameters\"
   strValueName = "DisabledComponents"
   Set objRegistry = GetObject("winmgmts:\\" & strComputer & "\root\default:StdRegProv")
   objRegistry.EnumValues HKEY_LOCAL_MACHINE, strIPV6Key, arrValueNames, arrTypes
   IPv6Disabled = false
   For I=0 To UBound(arrValueNames)
      IF arrValuesNames(I) = strValueName THEN
         objRegistry.GetDWORDValue HKEY_LOCAL_MACHINE, strIPV6Key,strValueName,strIPV6Status
         WScript.Echo(strIPV6Key & strValueName & " = " & strIPV6Status & vbCrLf)
         IPv6Disabled = true
      END IF
   NEXT
   IF NOT IPv6Disabled THEN
          WScript.Echo(strIPV6Key & " no disabled components" & vbCrLf)
   END IF

   Set objWMIService = GetObject(_
          "winmgmts:\\" & strComputer & "\root\cimv2")
   Set colNics = objWMIService.ExecQuery _
           ("Select * From Win32_NetworkAdapter ")

    objRegistry.GetMultiStringValue HKEY_LOCAL_MACHINE, _
          "SYSTEM\CurrentControlSet\services\Tcpip6\Linkage", _
          "Bind",bindValues

   For Each objNic in colNics
        For Each strValue In bindValues
          REM DEBUG to see what values are read
          WScript.echo strValue & " " & objNic.GUID & " = " & Cstr( objNic.GUID = strValue)
        Next
   Next

End Sub 
```

[WIN32_NetworkAdapter 通过 wmi](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394595%28v=vs.85%29.aspx)
[多字符串注册表读取](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394600%28v=vs.85%29.aspx)

# c# - Mono 中的自托管 WCF 服务

> ID：15346654
> 
> 赞同：17
> 
> 时间：2013-03-11T19:12:56.387
> 
> 标签：c#, wcf, mono, self-hosting

我目前正在开发一个 C# 项目，它是一个控制台应用程序，其中托管了 WCF 肥皂服务。

下面是我用来打开主机的代码。

```
var baseAddress = new Uri(Configuration.soapServerSettings.soapServerUrl);
var host = new ServiceHost(typeof(SoapServer), baseAddress);
BasicHttpBinding basicHttpBinding = new BasicHttpBinding();

var meta = new ServiceMetadataBehavior()
{
    HttpGetEnabled = true,
    HttpGetUrl = new Uri("", UriKind.Relative)
};

host.Description.Behaviors.Add(meta);

var debugBehaviour = new ServiceDebugBehavior()
{
    HttpHelpPageEnabled = true,
    HttpHelpPageUrl = new Uri("", UriKind.Relative),
    IncludeExceptionDetailInFaults = true
};

ServiceEndpoint endpnt = host.AddServiceEndpoint(
    typeof(ISoapInterface),
    basicHttpBinding,
    "EmailServer");

host.Description.Behaviors.Remove(typeof(ServiceDebugBehavior));
host.Description.Behaviors.Add(debugBehaviour);
host.Open(); 
```

这在 Windows 上运行良好，但在 Linux 上，当我浏览它时，我收到以下消息：

> XmlSchema 错误：命名项目 [http://schemas.microsoft.com/2003/10/Serialization/:anyType](http://schemas.microsoft.com/2003/10/Serialization/:anyType)已包含在架构对象表中。考虑将 MONO_STRICT_MS_COMPLIANT 设置为“是”以模仿 MS 实现。相关架构项 SourceUri: , Line 3, Position 3。

我不知道从哪里开始研究这个问题。

感谢您的任何帮助，您可以提供

**更新：** 根据 Rob Goodwins 的建议，我添加了`MONO_STRICT_MS_COMPLIANT`环境变量，这似乎确实有效，我可以访问该服务。但是，我现在遇到了一个不同的问题。我有一个 PHP 页面，它每隔几秒钟执行几个请求，但一分钟后，我的应用程序崩溃了。

我得到以下异常：

> 此 XmlWriter 在此状态下不接受 StartTag 错误。在 System.Xml.XmlTextWriter.WriteStartElement（System.String 前缀，System.String localName，System.String namespaceUri）[0x00000] 在：0 在 System.Xml.DefaultXmlWriter.WriteStartElement（System.String 前缀，System.String localName，System .String ns) [0x00000] in :0 在 System.Xml.XmlWriter.WriteStartElement (System.String localName, System.String ns) [0x00000] in :0 在 System.ServiceModel.Logger.TraceCore (TraceEventType eventType, Int32 id, Boolean hasRelatedActivity, Guid relatedActivity, System.Object[] data) [0x00000] in :0 at System.ServiceModel.Logger.LogMessage (System.ServiceModel.Diagnostics.MessageLogTraceRecord log) [0x00000] in :0 at System.ServiceModel.Logger。 LogMessage (MessageLogSourceKind sourceKind, System.ServiceModel.Channels.
> 
> 未处理的异常：System.InvalidOperationException：此 XmlWriter 在此状态下不接受 StartTag 错误。在 System.Xml.XmlTextWriter.WriteStartElement（System.String 前缀，System.String localName，System.String namespaceUri）[0x00000] 在：0 在 System.Xml.DefaultXmlWriter.WriteStartElement（System.String 前缀，System.String localName，System .String ns) [0x00000] in :0 在 System.Xml.XmlWriter.WriteStartElement (System.String localName, System.String ns) [0x00000] in :0 在 System.ServiceModel.Logger.TraceCore (TraceEventType eventType, Int32 id, Boolean hasRelatedActivity, Guid relatedActivity, System.Object[] data) [0x00000] in :0 at System.ServiceModel.Logger.Log (TraceEventType eventType, System.String message, System.Object[] args) [0x00000] in :0 at System.ServiceModel.Logger.Error（系统。

我似乎也无法通过 VS2010 WCF 测试客户端访问该服务，它不会出错，它只是坐在那里，进度条为 50%，并且没有任何进展。

在 apache 错误日志中，我收到以下错误：

> System.ArgumentException: 应该类似于 [[hostname:]port:]VPath:realpath at Mono.WebServer.ApplicationServer.AddApplicationsFromCommandLine (System.String applications) [0x00000] in :0 at (wrapper remoting-invoke-with-check) Mono.WebServer.ApplicationServer:AddApplicationsFromCommandLine (string) at Mono.WebServer.Apache.Server.RealMain (System.String[] args, Boolean root, IApplicationHost ext_apphost, Boolean quiet) [0x00000] in :0 at (wrapper remoting-invoke- with-check) Mono.WebServer.Apache.Server.Main (System.String[] args) [0x00000] 中的 Mono.WebServer.Apache.Server.Main (System.String[] args) 处的 Mono.WebServer.Apache.Server:RealMain (string[],bool,Mono.WebServer.IApplicationHost,bool) ：0 [错误] 致命的未处理异常：System.ArgumentException：应该类似于 Mono.WebServer.ApplicationServer 的 [[hostname:]port:]VPath:realpath。AddApplicationsFromCommandLine (System.String applications) [0x00000] in :0 at (wrapper remoting-invoke-with-check) Mono.WebServer.ApplicationServer:AddApplicationsFromCommandLine (string) at Mono.WebServer.Apache.Server.RealMain (System.String[] args, Boolean root, IApplicationHost ext_apphost, Boolean quiet) [0x00000] in :0 at (wrapper remoting-invoke-with-check) Mono.WebServer.Apache.Server:RealMain (string[],bool,Mono.WebServer.IApplicationHost, bool) 在 Mono.WebServer.Apache.Server.Main (System.String[] args) [0x00000] in :0IApplicationHost ext_apphost, Boolean quiet) [0x00000] in :0 at (wrapper remoting-invoke-with-check) Mono.WebServer.Apache.Server:RealMain (string[],bool,Mono.WebServer.IApplicationHost,bool) 在 Mono。 WebServer.Apache.Server.Main (System.String[] args) [0x00000] in :0IApplicationHost ext_apphost, Boolean quiet) [0x00000] in :0 at (wrapper remoting-invoke-with-check) Mono.WebServer.Apache.Server:RealMain (string[],bool,Mono.WebServer.IApplicationHost,bool) 在 Mono。 WebServer.Apache.Server.Main (System.String[] args) [0x00000] in :0

**更新 2：** 我现在似乎可以正常工作了，只是我只能在本地访问该服务。即，可以在本地访问 Web 服务，并且功能可以执行应有的操作，但我无法从另一台 PC 访问它。即我正在尝试使用来自开发 PC 的开发 PC 的 WCF 测试客户端访问 Mono 服务器上的 WCF 服务，然后我得到以下输出：

> 错误：无法从中获取元数据`http://192.168.1.74:6525/`如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange 错误 URI 的 MSDN 文档：`http://192.168.1.74:6525/` 元数据包含无法解析的引用：`'http://192.168.1.74:6525/`'。
> 内容类型应用程序/soap+xml；charset=utf-8 不受 service 支持`http://192.168.1.74:6525/`。客户端和服务绑定可能不匹配。远程服务器返回错误：(415) Expected content-type 'text/xml; charset=utf-8' 但得到 'application/soap+xml; charset=utf-8'.HTTP GET 错误 URI： `http://192.168.1.74:6525/` 该文件已被理解，但无法处理。- WSDL 文档包含无法解析的链接。- 下载“ ”时出错`http://localhost:6525/?xsd=xsd0`。- 无法连接到远程服务器 - 无法建立连接，因为目标机器主动拒绝了它 127.0.0.1:6525。

**更新 3：** 经过进一步测试，看起来好像一次对服务进行了多次调用。在使用该服务的浏览器页面上不断刷新似乎会使它崩溃。

看起来好像`System.ServiceModel.Logger.TraceCore`Mono 内部有问题。有没有办法禁用这部分单声道，这样我就不会受到这个问题的影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T23:07:45.647

似乎托管服务器可能存在一些与权限相关的问题，请检查一次授予特定端口的权限。希望这可能有用。

# java - 具有两种相关类型的 Java 泛型类

> ID：15346657
> 
> 赞同：2
> 
> 时间：2013-03-11T19:13:10.033
> 
> 标签：java, generics

我想要做的是以下内容：

```
public class DBManager<T extends Type , Q extends Query>{
    T create(T t);
    Collection<T> read(Q query);
    T update(T t);
} 
```

但是，我只想要 T 和 Q 相关的此类的实例化。例如，如果 T 是 AppleType，那么我希望 Q 是 AppleQuery 而不是 PearQuery。

有没有办法做到这一点，或产生类似的行为？

我试过`Q extends T & Query`了，但这是不允许的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:20:52.247

除非类型本身在类型系统中具有某种关系，否则您不能这样做。

由于我不确切知道您想做什么，因此很难准确地推荐一些东西，但听起来您可能想做这样的事情：

```
public abstract class Type {
    ...
}

public class AppleType extends Type {
    ...
}

public abstract class Query<T extends Type> {
    public abstract T doQuery(); /* Or so? */
}

public class AppleQuery extends Query<AppleType> {
    public AppleType doQuery() {...}
} 
```

有了从`Query`to的正式关系`Type`，您就可以这样定义`DBManager`：

```
public class DBManager<T extends Type, Q extends Query<T>> {
    T read(Q id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:51:26.567

由于`Q`未在返回类型中使用，因此您不需要它。简单地

```
interface DbManager<T extends Type>

    T read(Query<? extends T> query) 
```

在哪里

```
interface Type

interface Query<T extends Type> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:17:59.940

你可以使一切通用：

```
public class Type<Q extends Query<? extends Type<Q>>
public class Query<T extends Type<? extends Query<T>>

public class DBManager<T extends Type<Q> , Q extends Query<T>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:28:27.290

Java中没有多重继承。为什么不这样做呢？

```
public class Generic{
 // Generic atributes and methods.
}

public class ClassA extends Generic{
 // ClassA atributes and methods overwriting, if need it, the extended methods from Generic class.
}

public class ClassB extends Generic{
 // ClassB atributes and methods overwriting, if need it, the extended methods from Generic class.
}

... // You can instantiate so many classes as you need. You can use the factory pattern. 
```

# wcf - WSTrustChannelFactory Credentials，在哪里以及如何存储 Credentials？

> ID：15346660
> 
> 赞同：1
> 
> 时间：2013-03-11T19:13:20.413
> 
> 标签：wcf, credentials, adfs

我继承了这段代码，用于使用基于声明的身份验证调用 WCF 服务（这只是创建绑定，但你得到了图片）：

```
UserNameWSTrustBinding binding = new UserNameWSTrustBinding(SecurityMode.TransportWithMessageCredential);
WSTrustChannelFactory trustChannelFactory = new WSTrustChannelFactory(binding, new EndpointAddress(Endpoint));
trustChannelFactory.TrustVersion = TrustVersion.WSTrust13;
trustChannelFactory.Credentials.SupportInteractive = false;
trustChannelFactory.Credentials.UserName.UserName = ConfigurationManager.AppSettings["UserName"];;
trustChannelFactory.Credentials.UserName.Password = ConfigurationManager.AppSettings["Password"]; 
```

我知道 web.config 中的 appsettings 可以加密，我只是想知道最好的做法是什么。

由于只有原设计者知道的原因，该网站是一个混合的内部/外部站点，换句话说，有些部分暴露在互联网上，有些部分只是内部的。

不幸的是，尽管使用上述绑定的部分位于内部“站点”上，因此只能由内部用户访问，但我们被告知我们需要对设计进行未来验证，这意味着内部站点的某些部分可以在未经身份验证的用户访问互联网，因此决定将凭据存储在 web.config 中。

这样做有什么风险？

应该怎么做？

TIA

# javascript - 修改 iframe 宽度

> ID：15346667
> 
> 赞同：0
> 
> 时间：2013-03-11T19:13:55.930
> 
> 标签：javascript, html, javascript-events

我有一个客户网站，如下代码。

这个网站的管理员让我放了我自己的 javascript (myScript.js)。我如何从这一点（DOM 操作？）将给定的 iframe 宽度从 160 像素更改为 200 像素？

```
<div id="iframeDiv">
<iframe width="160px" scrolling="no" src=/test/placement_content.jsp">
    <html>
        <body>
        <script src="myScript.js">
        ...
        ..
        . 
```

非常感谢您的建议。此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:21:41.150

请参阅[此处](https://stackoverflow.com/questions/951946/can-javascript-running-inside-an-iframe-affect-the-main-page)了解如何编写 JavaScript 代码，当您的脚本加载到`iframe`. 请注意，这只适用于父文档和子文档都在同一个域中的情况。

您应该能够在父级上获取“iFrameDiv”元素，找到属于您的子级`iframe`，并操作`width`

# windows - 在 Windows Phone 8 中的 MySQL 数据库中绑定 LongListSelector 中的字符串

> ID：15346674
> 
> 赞同：2
> 
> 时间：2013-03-11T19:14:16.310
> 
> 标签：windows, windows-phone-8, longlistselector

在使用 LongListSelector 时，我是 Windows phone 8 的新手。我正在尝试从 MySQL 数据库中获取列表并将其绑定到 LongListSelector 中。在我的代码中，它只显示 MessageBox 对话框而不是获取列表。可能是什么问题呢。或者我是否将用于获取列表的代码放在了错误的方法中。请帮忙..

要绑定到 LongListSelector 的字符串是 f1，ListLongselector name= ListCompanies

```
public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            InitializeComponent();

            // Set the data context of the LongListSelector control to the sample data
            DataContext = App.ViewModel;

            // Sample code to localize the ApplicationBar
            //BuildLocalizedApplicationBar();
        }

        // Load data for the ViewModel Items
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            //if (!App.ViewModel.IsDataLoaded)
            //{
            //    App.ViewModel.LoadData();
            //}

            string url = "http://localhost/taxi/fetch_nrb.php";
            WebClient webclientmenu = new WebClient();
            webclientmenu.DownloadStringCompleted += webclientmenu_DownloadStringCompleted;
            webclientmenu.DownloadStringAsync(new Uri(url));
        }

        // Handle selection changed on LongListSelector
        private void MainLongListSelector_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            //// If selected item is null (no selection) do nothing
            //if (MainLongListSelector.SelectedItem == null)
            //    return;

            //// Navigate to the new page
            //NavigationService.Navigate(new Uri("/DetailsPage.xaml?selectedItem=" + (MainLongListSelector.SelectedItem as ItemViewModel).ID, UriKind.Relative));

            //// Reset selected item to null (no selection)
            //MainLongListSelector.SelectedItem = null;

        }

        void webclientmenu_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            //throw new NotImplementedException();
            try
            {
                string list = e.Result;
                string[] final = list.Split('#');
                string f1 = final[0];

                for (int i = 0; i < f1.Length; i++)
                {
                    ListCompanies.ItemsSource.Add(f1[i]);
                }
            }
            catch (Exception)
            {
                MessageBox.Show("Check Your Internet Connectivity and try again later.\n No Network Connection", "Network Error!", MessageBoxButton.OK);

            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T11:26:27.893

据我了解，您正在尝试为每个列表项显示一个字符？

如果是，我建议将 foreach 循环替换为：

```
ListCompanies.ItemsSource = f1; 
```

如果要显示最终列表中的每个字符串，每个项目一个字符串：

```
ListCompanies.ItemsSource = final; 
```

您遇到未实现的异常，因为 ItemsSource 属性被分配给您创建的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T11:13:56.137

您应该更改此代码；

```
// Load data for the ViewModel Items
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            //if (!App.ViewModel.IsDataLoaded)
            //{
            //    App.ViewModel.LoadData();
            //}

            string url = "http://localhost/taxi/fetch_nrb.php";
            WebClient webclientmenu = new WebClient();
            webclientmenu.DownloadStringCompleted += webclientmenu_DownloadStringCompleted;
            webclientmenu.DownloadStringAsync(new Uri(url));
        } 
```

有了这个 ;

```
protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            if (!App.ViewModel.IsDataLoaded)
            {
                App.ViewModel.LoadData();
            }
        } 
```

并使用“LongListSelector_Loaded”事件制作您的加载事件。为此，请转到您的 xaml 端，单击 longlistselector，单击事件并双击“已加载”框。然后去那里写下你的请求，像这样；

```
 private void MainLongListSelector_Loaded(object sender, RoutedEventArgs e)
        {
            string url = "http://localhost/taxi/fetch_nrb.php";
            WebClient webclientmenu = new WebClient();
            webclientmenu.DownloadStringCompleted += webclientmenu_DownloadStringCompleted;
            webclientmenu.DownloadStringAsync(new Uri(url));
        } 
```

祝你好运。

# windows - 如何处理批处理文件中 %* 的文件名格式不一致

> ID：15346678
> 
> 赞同：1
> 
> 时间：2013-03-11T19:14:24.177
> 
> 标签：windows, batch-file, drag-and-drop

我写了一个视频转换批处理，用户可以简单地将他的视频从任何磁盘或分区拖放到批处理上，之后转换后的视频将保存在特定磁盘的特定位置。

代码看起来像这样

```
@echo off
%~d0
cd %~p0
for %%f in (%*) do ...
pause 
```

实际问题出在`(%*)`.
当我的文件名称中有一个右圆括号时，批处理将不起作用。为了解决这个问题，我使用`("%*")`了 ，但这不适用于名称中包含空格的文件或多个文件。
我也试过，`(%~*)`但这是无效的。

经过一些研究，我注意到，当我在批处理中删除多个文件时，名称为`file(test)`and `file test`，`%*`解析为

```
file(test) "file test" 
```

这意味着文件名可能有引号，也可能没有......

我的问题是：我该如何处理？
理想情况下，我想`%*`解决`"file(test)" "file test"`（两个名字都用引号括起来）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:21:53.503

您可以使用每个参数调用一个子例程，而不是使用`for`循环，一次一个。

```
:nextArgument
set arg=%~1
if not defined arg goto :eof
call :processFile "%arg%"
shift
goto nextArgument

:processFile
set file=%~1
echo "%file%"
:: do your processing here
goto :eof 
```

这将一次处理每个以空格分隔的参数（但引用的参数可以包含空格），并将它们传递给 processFile 例程。我`%~1`先从参数中删除引号，然后在调用 processFile 时重新添加引号。这样我就知道当我到达 processFile 时，所有内容都有引号。

# php - Affected_rows 在删除时总是返回 false

> ID：15346681
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:29.127
> 
> 标签：php, codeigniter, rows-affected

我四处查看了受影响的行返回的确切内容。如果删除了某些内容，它应该返回 > 0，如果没有，则返回 0，对吗？

但是当我删除一个产品时，它会被删除，因为它是通过产品 ID 存在的。但是，当我想通过尝试在我的模型中执行此操作来测试相关产品是否已被删除时：

```
function delete_product($id)
{
    $tables = array('products', 'attributes');
    $this->db->where('p_id', $id);
    $this->db->delete($tables);

    if ($this->db->affected_rows() > 0)
    {
        return TRUE;
    }
    else
    {
        return FALSE;
    }
} 
```

并将值返回给我的控制器，如下所示：

```
public function delete()
{
    $id = $this->uri->segment(3);

    $this->a_model->delete_product($id);

    if($res == FALSE)
    {
        $this->session->set_flashdata('success_delete', 'Product deleted successfully.');
        redirect('admin/index');
    }
    else
    {
        $this->session->set_flashdata('error_delete', 'Product not deleted. We gots an issue.');
        redirect('admin/index');
    }
} 
```

返回的值总是假的，即 0。但是当我检查我的数据库以查看产品是否被删除时，它被删除了。有人可以指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:16:50.193

受影响的行（）仅适用于“写入”查询。

> 在执行“写入”类型查询（插入、更新等）时显示受影响的行数。
> 
> 注意：在 MySQL 中，“DELETE FROM TABLE”返回 0 个受影响的行。数据库类有一个小技巧，允许它返回正确数量的受影响行。默认情况下，此 hack 已启用，但可以在数据库驱动程序文件中关闭。

您可能需要确保启用了 hack。 [http://ellislab.com/codeigniter/user-guide/database/helpers.html](http://ellislab.com/codeigniter/user-guide/database/helpers.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T05:53:51.203

尝试这个：

```
 if($this->db->delete($tableName))
    return true;
     else
        return false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T20:16:28.403

```
$this->a_model->delete_product($id);

if($res == FALSE) 
```

应该：

```
$res = $this->a_model->delete_product($id);

if ($res === FALSE) 
```

您没有为 的值分配值，`$res`也没有为 的值分配变量`$this->a_model->delete_product($id)`。您还希望`===`在处理布尔值时使用进行严格比较，以确保安全作为最佳实践。

你也可以这样做：

```
if (!$this->a_model->delete_product($id)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-01-24T04:58:01.520

帖子很旧，但我遇到了同样的问题。由于该帖子尚未“解决”并且仍然相关，因此我添加了我的解决方案。

实际上，删除直接返回一个布尔值，因此函数`delete_product`可以简化为：

```
function delete_product($id)
{
  $tables = array('products', 'attributes');
  $this->db->where('p_id', $id);
  $res = $this->db->delete($tables);
  return $res;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-03-05T13:09:16.347

```
function delete_product($id){
  $this->db->trans_start();
    $tables = array('products', 'attributes');
    $this->db->where('p_id', $id);
    $this->db->delete($tables);
  $this->db->trans_complete();

  if($this->db->trans_status() === FALSE){
    return false;
  }else{
    return true;
  }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-26T07:40:15.630

有一些错误

你有写：`if ($this->db->affected_rows() > 0)`

但它应该是：`if ($this->db->affected_rows > 0)`

您需要从受影响的行（）中删除（）并只写受影响的行......

# linux - pgplot 不起作用

> ID：15346682
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:32.153
> 
> 标签：linux

我在 linux 中成功安装了 pgplot 5.2，但是当尝试运行任何像 pgdemo 这样的函数时，它给出了错误

./pgdemo/: 加载共享库 libpgplot.so 时出错：无法打开共享对象文件：没有这样的文件或目录。

但是我检查了这个库是否在目录中

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:20:17.440

你没有说你是如何安装库的，但一定要在之后运行[ldconfig](http://linux.die.net/man/8/ldconfig)来设置链接。有关详细信息，请参阅此[其他 SO 答案](https://stackoverflow.com/a/167734/278836)。

> 但是我检查了这个库是否在目录中

你可能想清楚这一点。哪个目录？例如，大多数系统都会查找`/usr/lib`。

# java - 用于平面 xml 数据集的 dbUnit xml 文件格式

> ID：15346683
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:34.070
> 
> 标签：java, database, junit, dbunit

我正在尝试为 dbUnit 制作数据集。但是，我使用的 xml 文件不断给我错误：元素类型 MyTable 必须后跟属性规范“>”或“/>”。有人能告诉我为什么我的 xml 文件不正确吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<dataset>
    <MyTable column1="1", column2="2", column3="3"/>
</dataset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:11:47.547

您不应该在 XML 片段中放置逗号。例如：

```
<dataset>
    <MyTable column1="1" column2="2" column3="3"/>
</dataset> 
```

# ruby - 如何创建评论视图？(Ruby on Rails)

> ID：15346685
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:49.313
> 
> 标签：ruby, ruby-on-rails-3

我正在尝试创建一个视图来显示将像这样显示的评论

如果有人在帖子下发表评论，它会显示为“+1”，可点击并展开以显示它。如果另一个人发表评论，它会变为“+2”。

这是我的评论表单，我想在下面显示视图：

```
<%= form_for([micropost, @comment]) do |f| %>
<%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_field :comment_content %>
  </div>
  <button class="btn" type="submit">
    Comment
  </button>
<% end %> 
```

评论模型

```
class Comment < ActiveRecord::Base
  attr_accessible :comment_content

  belongs_to :user
  belongs_to :micropost

  validates :comment_content, presence: true
  validates :user_id, presence: true
  validates :micropost_id, presence: true  
end 
```

这是如何在数据库中维护它们的示例

```
#<Comment id: 11, user_id: 9, micropost_id: 40, cr
eated_at: "2013-03-10 22:03:36", updated_at: "2013-03-10 22:03:36", comment_cont
ent: "hello."> 
```

这是我试图在视图中使用的代码

```
<%= simple_format(comment.content) %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:35:39.743

`<% end %>`我建议你在标签下方做这样的事情：

```
<a href="#" id="comment_count"> <%=  @micropost.comments.count.to_s %> </a> 
<div class="comments" style="display:none">
  <% for comment in @micropost.comments %>
   <%= render comment %>
  <% end %>
</div> 
```

然后使用一些 Javascript 在单击链接时显示 div。

# mongodb - mongodb - 字段与儿童性能

> ID：15346688
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:57.310
> 
> 标签：mongodb, database-performance

在mongodb中，如果读写性能是目标而不是内存等，将数据存储在具有许多字段的文档中更好，还是通常将数据存储在较少的字段中更好，其中一些字段引用子对象？

或者换句话说，与将数据存储在多个字段中相比，将数据存储在子对象中是否具有性能成本，反之亦然。

例如

```
document = {
    'field1' : 1,
    'field2' : 2,
    'field3' : {
         'childfield1' : val1,
         'childfield2' : val2,
         ...
         'childfieldn' : valn // where n could be reasonably large
    }
} 
```

对比

```
document = {
    'field1' : 1,
    'field2' : 2,
    'childfield1' : val1,
    'childfield2' : val2,
    ...
    'childfieldn' : valn
} 
```

希望这很清楚，如果不是，请道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:43:10.057

您可以尝试在一个文档中嵌入信息，但该文档应小于 16MB。其他方式您将需要发出额外的请求来检索引用的项目。

# actionscript-3 - Flash AS3 错误 1180 - 在帧之间传递文本

> ID：15346689
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:58.043
> 
> 标签：actionscript-3, flash

我对 Flash 很陌生，而且我一直在尝试编写一个程序。基本上，我希望用户在第 2 帧的框中键入文本，然后该文本将显示在第 6 帧中。但是，我不断收到此错误：

> 场景 1，图层“动作”，第 6 帧，第 16 行 1180：调用可能未定义的方法 myData。

这是第 2 帧的代码：

```
var myData:String; stepper1.addEventListener(Event.CHANGE,myHandler);
function myHandler(evt:Event):void {  myData = stepper1.text; } 
```

第 6 帧的代码：

```
output1.text = myData(stepper1.text); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:21:15.877

myData 被定义为字符串而不是函数。你有没有尝试过：

```
output1.text = myData; 
```

# javascript - 显示带有自定义选项卡的微调器

> ID：15346690
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:58.773
> 
> 标签：javascript, jquery, tabs, spinner

```
$('#widget .tabs li a').click(function (e) {
        $('#widget .tabs li').removeClass('ui-tabs-active');
        $(this).parent().addClass('ui-tabs-active');
        $('.group-tabContent').hide();
        var url = $(this).attr('href');
        $('.group-tabContent').empty().load(url);
        $('.group-tabContent').show();
        return false;
    });
}); 
```

.. 效果很好，但我想在页面加载时显示一个微调器，我应该在哪里插入它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:33:28.483

在您的工厂函数的顶部，添加如下内容： 其中“ajax-loader-reference”是您对加载器的类/id/元素引用 `// Wait for window load
$(window).load(function() {
// Animate loader off screen
$("ajax-loader-reference").animate({});
});`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:35:12.260

要在新内容加载时执行某些操作，请更新该行`$('.group-tabContent').empty().load(url);`并包含完整的函数处理程序（请参阅 jQuery 参考：[http ://api.jquery.com/load/](http://api.jquery.com/load/) *如果提供了“完整”回调，则在 post-处理和 HTML 插入已经执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置给每个 DOM 元素。*）：

```
// add show spinner code here
...

// make request for content
$('.group-tabContent').empty().load(url, function(response, status, xhr){

    // done loading content, now hide spinner
    ...

}); 
```

# java - Android：让应用程序使用共享首选项提醒答案

> ID：15346691
> 
> 赞同：0
> 
> 时间：2013-03-11T19:14:58.317
> 
> 标签：java, android, xml, if-statement, sharedpreferences

我目前正在为 Android 制作一个测验应用程序。每个问题都有它自己的活动。用户可以在文本框中键入答案。如果用户输入了错误的答案，则不会发生任何事情，如果他输入了正确的答案，则应用程序必须记住他完成了该问题。

*之前我听说我可以通过添加“共享偏好*”让应用记住问题是否得到回答。我现在在网上找了很长时间，但我仍然不知道 SharedPreference 是如何工作的。

**有人可以举例说明我需要如何以及在何处添加该共享首选项吗？**

这是决定您输入正确答案还是错误答案的按钮功能代码：

```
 case R.id.guessbutton:
            EditText et = (EditText)findViewById(R.id.editText1);
            String password = et.getText().toString();
            et.getEditableText().toString();
            if ((password.equals("mc donalds")) | (password.equals("Mc donalds")) | (password.equals("mc Donalds")) | (password.equals("Mc Donalds")) ) 
        { 
            //Here the function must let the app remember that the question is answered.
        }
    else
        { 
            //Nothing will happen here
        }
    break; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:26:06.630

共享首选项主要用于访问项目中任何位置的数据。我建议您先阅读这些教程[Shared Preference Tutorial 1](http://www.slideshare.net/androidstream/sharedpreferences-tutorial)和[Shared Preference Tutorial 2](http://developer.android.com/reference/android/content/SharedPreferences.html) 要使其成为示例，这里是示例`这就是您创建共享首选项的方式

```
SharedPreferences prefs = getSharedPreferences("UMSPreferences",MODE_PRIVATE);
                            SharedPreferences.Editor editor = prefs.edit();
                            editor.putString("UserId", login);  
                            editor.putString("password", password);
                            editor.putString("ABC", Inside);
                            editor.putString("UserType", "S");
                            editor.commit(); 
```

要访问它们..check this

`String usertype = getSharedPreferences("UMSPreferences",MODE_PRIVATE).getString("UserType", "FD")`;

我希望它会有所帮助

# java - 是否可以确定当前 VM 是 Java SE 还是 Dalvik？

> ID：15346692
> 
> 赞同：5
> 
> 时间：2013-03-11T19:15:01.177
> 
> 标签：java, android

我希望实现如下所示的东西：

```
if(isJavaVirtualMachine()){
    System.out.println("You are running on a JVM");
}else if(isDalvikVirtualMachine()){
    Log.i("env","You are running on an android.");
} 
```

可能吗？如果 Java 本身不可能，我可以通过 JNI 来做吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T19:21:28.863

使用`System.getProperty`. Dalvik 的属性名称记录[在这里](http://developer.android.com/reference/java/lang/System.html#getProperties%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T20:10:23.130

正如 ykaganovich 指出的那样，在运行时区分纯 Java 和 Android 应该很容易。另一个问题是在普通的 Java 环境中不会有像*Log*这样的 Android 特定类，所以你会在运行时遇到问题！一种可能的解决方案是使用反射来组装特定于平台的适配器，因此您仅在运行时引入依赖项（可能有点棘手）。

# php - 通过应用程序作为相同的粉丝页面发布到粉丝页面

> ID：15346699
> 
> 赞同：0
> 
> 时间：2013-03-11T19:15:20.843
> 
> 标签：php, facebook, facebook-graph-api, facebook-page

我的问题：我已经实现了一个调用我的 Index.php 的 Web 服务。在此 Index.php 中，应将带有链接的消息从我的应用程序发布到我自己的粉丝专页。我已经获得了必要的权限和 HTTP Post 请求。如果我将它发布到我的个人帐户，它可以工作，但不能在我的粉丝专页上。

当前代码：

```
<?php
    try{
    require_once("../php-sdk/facebook.php");
    }
    catch(Exception $o){
        echo '<pre>';
        print_r($o);
        echo '</pre>';
    }

    $config = array();
    $config['appId'] = 'XXX';
    $config['secret'] = 'YYY';
    $config['fileUpload'] = false; // optional

    // Create our Application instance.
    $facebook = new Facebook($config);

    // Get User:
    $user_id = "XXX";

    // Get the current access token 
    $access_token = $facebook->getAccessToken();

    $ret_obj = $facebook->api('/MY_PAGE_ID/feed', 'POST',   // -> works with USER_ID
        array(
            'link' => 'www.link.com',
            'message' => 'my Message'
        )
    );

    // Login:
    $params = array(
        'scope' => 'manage_pages, publish_stream',
        'redirect_uri' => 'ZZZ'
    );

    $loginUrl = $facebook->getLoginUrl($params);

    function d($d){
        echo '<pre>';
        print_r($d);
        echo '</pre>';
    }

return $ret_obj;
?> 
```

# actionscript-3 - AS3/AIR：如果手机使用纵向，平板使用横向？

> ID：15346702
> 
> 赞同：1
> 
> 时间：2013-03-11T19:15:27.717
> 
> 标签：actionscript-3, actionscript, air, landscape, portrait

好的，我已经为自己编写了一个简单的 DeviceCapabilites 类，以便能够检查设备是手机还是平板电脑等。

但我需要能够说，如果用户在手机上，它应该处于纵向模式，如果在平板电脑上我只想使用横向模式......有什么想法吗？

编辑：为了清楚起见，我想在手机上将方向锁定为纵向模式，然后在平板电脑上使用横向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:49:34.957

像这样的东西？

```
stage.autoOrients = false;

if(YourDeviceCapsClass.isTablet)
    stage.setOrientation(StageOrientation.ROTATED_LEFT);
else
    stage.setOrientation(StageOrientation.DEFAULT); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T22:04:40.043

`setOrientation()`恐怕您必须将 Barış Uşaklı 提到的方法与更多逻辑结合起来。正如我在对他的评论中提到的，`StageOrientation.DEFAULT`指的是设备的默认方向，但您不知道那是横向还是纵向。

幸运的是，有一种简单的方法可以解决这个问题。您只需查看设备是否处于默认/倒置方向并检查宽度/高度。

```
var defaultPositionIsLandscape:Boolean = false;
if ( stage.orientation == StageOrientation.DEFAULT || stage.orientation == StageOrientation.UPSIDE_DOWN ) {
    defaultPositionIsLandscape = stage.stageWidth > stage.stageHeight;
}
else {
    defaultPositionIsLandscape = stage.stageWidth < stage.stageHeight;
}

if ( isTablet ) {
    if ( defaultPositionIsLandscape ) {
        stage.setOrientation( StageOrientation.DEFAULT );
    }
    else {
        stage.setOrientation( StageOrientation.ROTATED_LEFT );
    }
} 
```

逻辑有点混乱，所以你可以稍微清理一下，但这是必须发生的事情的一般要点。我个人会将顶部部分设为 DeviceCapabilities 类中的静态只读 getter，以便于访问。如果它在其中，您还需要扩展它以避免旋转`StageOrientation.UPSIDE_DOWN`（因为从技术上讲这是您想要的正确方向，只是颠倒）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T19:24:02.567

我没有答案，但我想为别人节省一些时间。在 ipad 上进行测试时，Josh 发布的上述代码将始终导致“defaultPositionIsLandscape”为 false :(

# java - 迭代地图时出现 ConcurrentModificationException

> ID：15346703
> 
> 赞同：0
> 
> 时间：2013-03-11T19:15:32.590
> 
> 标签：java, concurrency

我`ConcurrentModificationException`在迭代地图内容时得到

```
 for (String sourceKey : sMap.getContent().keySet()) {

        List<String> sourceValues = sMap.getValues(sourceKey);
        List<String> targetValues = tMap.getValues(sourceKey);

        if (areMultiple(sourceValues)) {
        ....
    } 
```

`sMap.getContent()`返回`Map<String, List<String>>`，我只得到钥匙。

请注意，不会修改地图的内容。我只是在这里迭代。

我在这里做错了什么？抛出异常时如何纠正这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:16:58.533

如果被迭代的底层集合被迭代器本身以外的任何东西修改，就会发生这种情况。

尝试使用 ConcurrentHashMap 而不是普通的 HashMap

# tags - 在 Jira 中使用标签标记评论

> ID：15346709
> 
> 赞同：2
> 
> 时间：2013-03-11T19:16:04.237
> 
> 标签：tags, blogs, jira

有没有办法在 Jira 中标记评论，然后通过这些标签过滤它们，类似于 Confluence 中的博客文章功能？即一组问题被标记为group1，如果不相关任务中的评论可能影响这组问题，我只需将其标记为“group1”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T06:59:21.403

您所描述的通常是用组件来完成的 - 用它的组件标记每个问题，而不是通过以下方式搜索问题：

```
component = group1 
```

如果您想将标签保留在评论中，您可以定义一个标签，例如 use `<<label>>`，并将其添加到您的评论中。然后，搜索问题：

```
comment ~ "\"<<group1>>\"" 
```

您还可以使用 Jira 的标记之一，例如`[#anchor]`.

有关更多信息，请查看[执行文本搜索](https://confluence.atlassian.com/display/JIRA/Performing+Text+Searches)和[高级搜索](https://confluence.atlassian.com/display/JIRA/Advanced+Searching)

# php - 来自 CMD 的 PHP - 'C:\php\php_openssl.dl l' - 找不到指定的模块

> ID：15346712
> 
> 赞同：1
> 
> 时间：2013-03-11T19:16:18.253
> 
> 标签：php

第一次尝试从 CMD 运行 PHP 脚本。当脚本在浏览器中运行时，它运行良好。但我在 CMD 中收到此错误。

```
PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\php\php_openssl.dll' - The specified module could not be found.
 in Unknown on line 0
PHP Fatal error:  Call to undefined function mysql_connect() in C:\inetpub\wwwroot\sandbox\singleprop\cp\scripts\newprops\list.php on line 6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:23:20.983

您在命令行上运行的 PHP 不一定与同一台机器上的网络服务器运行的 PHP 环境相同。例如，网络服务器可能正在使用 mod_php。

要在命令行上执行相同的操作，您需要执行以下操作之一：

*   设置一个与您的网络服务器 PHP 环境的配置相匹配的 PHP 环境（然后您可以选择更改您的网络服务器配置以通过 CGI 使用它）
*   通过 wget 调用您的网络服务器来运行您的脚本

# iphone - 为什么我的声音没有播放？

> ID：15346718
> 
> 赞同：0
> 
> 时间：2013-03-11T19:16:41.257
> 
> 标签：iphone, ios6, avaudioplayer, avplayer

我做了很多努力才能让它发挥作用。我试图解释。我有这样的声音：

[看这里](https://docs.google.com/file/d/0B39VLJYVNyVgcnF5cWRVT0llOXc/edit?usp=sharing)

我使用以下方法从代码的任何地方播放声音：

```
[PlaySounds PlaySound:glo_sound_login]; 
```

这将是这部分代码

```
+(void)PlaySound:(NSString *)PlaySound{
    SystemSoundID soundID;
NSString *soundFile = [[NSBundle
                        mainBundle]pathForResource:PlaySound ofType:@"mp3"];
AudioServicesCreateSystemSoundID((__bridge CFURLRef)[NSURL
                                            fileURLWithPath:soundFile],&soundID);
AudioServicesPlaySystemSound(soundID);
if (glo_pref_vibrate == YES) {
    AudioServicesPlaySystemSound (kSystemSoundID_Vibrate);}} 
```

所以我的 glo_sound_login 看起来像这样：`NSString *glo_sound_login=@"Login";`

这工作得很好。但是当我尝试打电话时

```
[PlaySounds PlaySound:glo_sound_update]; 
```

看起来像这样：`NSString *glo_sound_update=@"Update";`

然后它不会播放我的更新声音！有没有解释为什么我不会播放我的声音？对于任何帮助，我都表示感谢！:) 谢谢还有一件事：当我尝试点击 Update.mp3 文件时，xcode 会打开该文件并播放： [请参见此处](https://docs.google.com/file/d/0B39VLJYVNyVgeWg1WDJPLTd3alk/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:28:15.127

According to the documentation about AudioServicesPlaySystemSound function, you cannot use a mp3 format in that context.

Full documentation [here](http://developer.apple.com/library/ios/#documentation/AudioToolbox/Reference/SystemSoundServicesReference/Reference/reference.html#//apple_ref/c/func/AudioServicesPlaySystemSound)

> Sound files that you play using this function must be:
> 
> *   No longer than 30 seconds in duration
> *   In linear PCM or IMA4 (IMA/ADPCM) format
> *   Packaged in a .caf, .aif, or .wav file

Notice: use afconvert to easily create right format files.

example to generate a CAF file / little-endian 16bit (should be perfect).

```
/usr/bin/afconvert -f caff -d LEI16 {INPUT} {OUTPUT} 
```

# emacs - Emacs 和 ispell：加载 German8 时出错

> ID：15346723
> 
> 赞同：10
> 
> 时间：2013-03-11T19:17:10.357
> 
> 标签：emacs, elisp

当我在文本模式下使用 flyspell-mode 时尝试加载“german8”拼写字典时收到此错误消息：

```
Error in post-command-hook (flyspell-post-command-hook): (error "Error: The file "/usr/lib/aspell/deutsch\" can not be opened for reading.") 
```

我检查过，没有 /usr/lib/aspell/deutsch。Ubuntu synaptic 软件包管理器为我提供了“aspell-de”，但并没有清除它。

这是我的 .emacs 中引发问题的代码：

```
;;switch dictionaries between German and English with F8 key
(defun fd-switch-dictionary()
      (interactive)
      (let* ((dic ispell-current-dictionary)
         (change (if (string= dic "deutsch8") "english" "deutsch8")))
        (ispell-change-dictionary change)
        (message "Dictionary switched from %s to %s" dic change)
        ))

(global-set-key (kbd "<f8>")   'fd-switch-dictionary) 
```

我可以通过简单地启动 flyspell-mode 然后尝试执行 ispell-change-dictionary 来重复同样的错误。提供了 German8，但消息再次出现：

```
 Error enabling Flyspell mode:
(Error: The file "/usr/lib/aspell/german" can not be opened for reading.) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-07-16T15:18:22.190

我遇到了完全相同的问题，但我找到了一个非常简单的解决方法。我假设

*   您的 Emacs 拼写检查器设置为 aspell，即`(setq-default ispell-program-name "aspell")`

*   安装了适当的 aspell 字典，例如通过`apt-get install aspell-de`.

出于某种原因，在拼写为“sees”的字典列表中似乎存在一个错误，即执行时可用的字典列表`ispell-change-dictionary`。选择“deutsch”时，它会尝试加载`"/usr/lib/aspell/deutsch\"`. 但是看起来 aspell 字典名称已更改，因为`aspell-de`现在包含名为`de_DE*`. 我想@Daniel Ralston 的答案是解决这个问题，但这对我不起作用。我也尝试将实际的字典名称传递给`ispell-change-dictionary`，但不知何故，它坚持要从自己的列表中获取字典，我永远无法说服它我的字典确实是正确的。

对我有用的是一个简单的符号链接修复。起初我不确定我应该符号链接什么，因为错误看起来像是试图从名为“deutsch”的*目录加载字典。*但事实证明，它实际上是在寻找一个典型的 aspell`.alias`文件。所以通过使用这个符号链接

```
sudo ln -s /usr/lib/aspell/de_DE.alias /usr/lib/aspell/deutsch.alias 
```

我现在可以简单地在`ispell-change-dictionary`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-05T14:55:13.557

`Arch Linux`我在安装字典时遇到了同样的问题，`aspell-ru`但是当我`ispell-change-dictionary russian`在 emacs 中这样做时（`russian`作为字典的建议名称），它返回了

```
Error: The file \"/usr/lib/aspell-0.60/russian\" can not be opened for reading. 
```

所以我做`pacman -Ql aspell-ru`了，结果证明这`ru`是字典的名称，而不是`russian`. 所以，`ispell-change-dictionary ru`工作得很好。

检查字典文件的实际名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-13T17:19:11.953

最近，一些旧的和经常使用的字典别名似乎已从德语 aspell 包中删除。这使得 emacs 的德语词典定义过时了。尝试将此添加到您的`.emacs`：

```
(eval-after-load "ispell"
  '(add-to-list 'ispell-dictionary-alist
                '("deutsch8"
                   "[a-zA-ZäöüßÄÖÜ]" "[^a-zA-ZäöüßÄÖÜ]" "[']" t
                  ("-C" "-d" "de_DE-neu.multi")
                  "~latin1" iso-8859-1))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-21T09:48:17.450

Elementary OS 中的相同问题相同的解决方案安装包 aspell-es 和 aspell-eu-es：

```
sudo apt-get install aspell-es aspell-eu-es 
```

一切正常。

# prolog - 编写 Prolog 规则的指导

> ID：15346729
> 
> 赞同：1
> 
> 时间：2013-03-11T19:17:24.267
> 
> 标签：prolog, rule

我正处于在 Prolog 中编写代码的初始阶段，并且仍在尝试围绕范式进行思考，所以请原谅这个问题的原始性。

我在维基百科上读过

```
A rule is of the form
Head :- Body.
and is read as "Head is true if Body is true". 
```

这很简单。所以我正在建立一个模拟 1 位加法器功能的知识库。

为此，我正在尝试为以下内容创建规则：

> 如果存在一个门 X，并且 X 是一个与门，并且 X 有一个端子从它出来，并且该端子有一个信号并且信号为 0 那么门 X 必须也至少有一个输入端有一个信号0。

作为 Prolog 规则，我写了这个来反映我上面的句子：

`gate(X) /\ gate_type(X, and) /\ terminal(T, X, out) /\ signal(T, SIG) /\ (SIG is 0) :- (gate(X) /\ gate_type(X, and) /\ terminal_type(R, X, in) /\ signal(R, 0)).`

为了测试我的规则，我有一个终端`t7`，它是与门的终端。

```
terminal_type(t7, a1, in).
gate_type(a1, and). 
```

当我问 Prolog：`signal(t7, 1), signal(t8, 1), signal(t9, X).`或类似的问题时，Prolog 先生告诉我

```
X = 1;
X = 0; 
```

我得到的答案应该只有 X = 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T21:27:38.943

欢迎来到 Prolog 编程！您从硬件中获得它非常酷，几乎与您所能得到的一样远。

我想我看到了两个问题。

第一个是您的定义忽略了与门的定义特征，即当两个输入均为 1 时，输出将为 1。您将其翻译成 Prolog 看起来有点奇怪，但当然应该考虑到这一点。所以我认为在 Prolog 中你想说的是：

```
signal(R, 0) :- 
  gate(X), gate_type(X, and), 
  terminal_type(R, X, out),
  terminal_type(R1, X, in), signal(R1, 0). 
```

不过，这还不是全部。你也需要这个：

```
signal(R, 1) :- 
  gate(X), gate_type(X, and), 
  terminal_type(R, X, out),
  terminal_type(R1, X, in), terminal_type(R2, X, in), R1 \= R2,
  signal(R1, 1), signal(R2, 1). 
```

这可能是正确的，但第二个问题是这`signal(t7, 1)`不是断言，因此它不会在您的事实数据库中结束。它只是一个光秃秃的结构，因此它不会向您的查询添加任何内容。最简单的解决方案是将其直接添加到您的数据库中：

```
signal(t7, 1).
signal(t8, 1). 
```

然后进行查询：

```
signal(t9, X). 
```

或者，你可以`assertz/1`：

```
assertz(signal(t7, 1)), assertz(signal(t8, 1)), signal(t9, X). 
```

但这有点草率，因为`assert`这是在回溯时无法消除的副作用。

在实践中，大多数时候您要么通过传递动态查询来将其作为动态查询的一部分，要么将其作为事实数据库的一部分。将两者混合起来很难推理。

如果我是你，我可能会通过将不同事实“类型”的数量减少到更像这样的东西来简化事情：

```
% gate(Name, Type, Input1, Input2, Output)
gate(a1, and, t7, t8, t9). 
```

然后你可以真正简化谓词：

```
signal(Out, 0) :-
  gate(_, and, R1, R2, Out),
  ( signal(R1, 0) ; signal(R2, 0)).
signal(Out, 1) :-
  gate(_, and, R1, R2, Out),
  signal(R1, 1),
  signal(R2, 1). 
```

# c++ - 使用系统级词典

> ID：15346733
> 
> 赞同：0
> 
> 时间：2013-03-11T19:17:30.297
> 
> 标签：c++, qt, hunspell

我一直在研究一个名为 RoboJournal 的基于 Qt 的 C++ 程序。它使用 Hunspell 进行拼写检查。现在，它会自动将自己的字典文件（en_US.dic）安装到用户的主文件夹（即~/.robojournal/en_US.dic）中。这在 Windows 等不提供开箱即用兼容字典的操作系统上可以正常工作，但我想解决一个设计问题：

在 Linux 上，有几个 en_US.dic 实例（最明显的是在 /usr/share/hunspell/en_US.dic 中）这个副本显然是要在所有使用 Hunspell 的程序之间共享，这意味着我的程序应该使用它，如果可能而不是依靠自己的副本。但是/usr/share/hunspell/中的副本需要超级用户权限才能修改；虽然这意味着用户可以从中读取，但除非程序以超级用户权限运行，或者除非我对文件进行 chmod 以允许所有人写入，否则他们无法向其中添加单词。这个问题使 /usr/share/hunspell/en_US.dic 副本的用处大大降低。

有没有办法让用户修改 /usr/share/hunspell/en_US.dic 文件*而*无需超级用户权限或要求他们先 chmod 文件？我的 Debian 软件包维护者说我的应用程序应该尽可能使用全局系统资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T22:49:00.620

在这种情况下，通常您加载系统默认值，然后加载用户特定的设置文件。

因此，当您的程序已经运行并且用户忽略某些单词并添加其他单词等时，您将其保存到用户应用程序数据目录中的字典中。

如果您真的希望您的程序将添加到系统范围的更改保存到默认字典，您应该提示用户，如果他们想要将字典更改保存到系统默认值，然后打开超级用户登录，或者您想要的任何凭据需要保存对该文件的编辑，然后保存它。

或者，如果程序最初以超级用户身份启动，您甚至可以将其保存到系统文件夹中，否则将其保存到用户的应用程序目录中。

我遵循的设置模型和其他模型在 中进行了解释`QSettings`。

[http://qt-project.org/doc/qt-4.8/qsettings.html#details](http://qt-project.org/doc/qt-4.8/qsettings.html#details)

[http://qt-project.org/doc/qt-4.8/qsettings.html#platform-specific-notes](http://qt-project.org/doc/qt-4.8/qsettings.html#platform-specific-notes)

`QSettings`如果您设置应用程序名称和组织名称，则可以相当优雅地处理所有事情。它没有开箱即用的 hunspell 字典，但它使用的位置/路径很重要。

希望有帮助。

# django - Reverse URL of wrapped methods

> ID：15346735
> 
> 赞同：0
> 
> 时间：2013-03-11T19:17:35.707
> 
> 标签：django, django-views

I'm having a problem with using `reverse` for wrapped methods in Django. Here is my urls.py

```
...
urlpatterns = patterns('',
('/param_select/$',session_check(param_select)),
('registration/$',registration),
('result_show/(\d+)',session_check(result_show)),
('^expofit/$',media_clean(start)),
('result_pick/$',session_check(result_pick)),
('mail_report/$',session_check(mail_report)),
('notification/$',session_check(notification)), 
```

I can do a succesfull `reverse` only for the `registration`.

```
In [37]: from django.core.urlresolvers import reverse
In [38]: from expofit_django_app import views
In [38]: reverse(views.registration)
Out[38]: '/registration/'
In [42]: reverse(views.mail_report)
---------------------------------------------------------------------------
NoReverseMatch                            Traceback (most recent call last)
/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/core/management/commands/shell.pyc in <module>()
----> 1 reverse(views.mail_report)

/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/core/urlresolvers.pyc in reverse(viewname, urlconf, args, kwargs, prefix, current_app)
    474             resolver = get_ns_resolver(ns_pattern, resolver)
    475 
--> 476     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
    477 
    478 reverse_lazy = lazy(reverse, str)

/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/core/urlresolvers.pyc in _reverse_with_prefix(self, lookup_view, _prefix, *args, **kwargs)
    394             lookup_view_s = lookup_view
    395         raise NoReverseMatch("Reverse for '%s' with arguments '%s' and keyword "
--> 396                 "arguments '%s' not found." % (lookup_view_s, args, kwargs))
    397 
    398 class LocaleRegexURLResolver(RegexURLResolver):

NoReverseMatch: Reverse for 'expofit_django_app.views.mail_report' with arguments '()' and keyword arguments '{}' not found. 
```

Since the situation is the same for all other wrapped methods, and it only works for the one which isn't wrapped, i believe it has something to do with reversing wrapped methods. Ideas for solution?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:32:15.923

Just name your urls - ie

```
('/param_select/$', session_check(param_select), {}, 'param_select'), 
```

Then you can use

```
reverse('param_select') 
```

Another idea would be to rewrite `session_check` as a decorator; django's built in view decorators (i.e. [permission_required](https://docs.djangoproject.com/en/1.3/topics/auth/#the-permission-required-decorator)) would make a good starting point.

# ios - 向 CallerID 添加数据

> ID：15346739
> 
> 赞同：0
> 
> 时间：2013-03-11T19:17:45.943
> 
> 标签：ios

我有一个应用程序，可以为您提供有关呼叫您的号码的更多详细信息（根据 callerID）

应用程序记录来电号码，并在来电屏幕上显示第二层信息。

我们希望将其移植到 IOS 版本中，但我被告知苹果不会批准它，因为他们不允许人们使用他们的 callerID。

这听起来有点刺耳，我已经尽力在开发中心找到它说什么的地方，但我找不到任何东西 - 但是，我在他们的 API 中找不到任何关于如何实际触摸的参考来电显示屏幕。

我对这个问题有点困惑..有没有人可以解释事情的进展情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:51:38.763

iOS 上的第三方应用程序无法访问来电显示或通话记录。您的应用程序无法按照您的描述编写。您必须要求用户手动输入数字。

# php - Facebook Canvas 应用程序中的白页

> ID：15346743
> 
> 赞同：1
> 
> 时间：2013-03-11T19:17:54.823
> 
> 标签：php, facebook, canvas, facebook-apps

我使用 PHP 开发了一个 Facebook 应用程序。这个应用程序去年运行良好。

现在我已将应用程序迁移到另一台服务器。从那时起，我遇到了很多问题，我通过一些变通方法解决了这些问题。

但是，当用户第一次使用谷歌浏览器在 apps.facebook.com/my-app 上查看应用程序时会发生错误

```
Refused to display 'FACEBOOK_URL_HERE' in a frame because it set 'X-Frame-Options' to 'DENY'. about:blank:1 
```

我不知道是什么导致了这个错误。但是，如果用户直接导航到我域上的应用程序 url。它打开。之后，如果导航回apps.facebook.com/my-app，它会毫无错误地打开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:33:05.897

现代浏览器允许 Web 服务器通过[`X-Frame-Options`](https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options)标头指示该服务器托管的页面是否应该是 iframeable。您需要确定在您的应用程序或 Web 服务器中的哪个位置打开并禁用它。

# django - 如何将带有 Django 的 iCalendar 对象传递给模板？

> ID：15346744
> 
> 赞同：1
> 
> 时间：2013-03-11T19:17:55.173
> 
> 标签：django, icalendar

我`iCalendar`用来生成一个`.ics`文件，然后将其传递给我的模板。这工作正常，我最终得到以下结构的字符串：

```
BEGIN:VCALENDARVERSION:2.0PRODID:-//My%20calendar%20product//mxm.dk//BEGIN:VEVENTSUMMARY:Meeting%20DTSTART;VALUE=DATE-TIME:20130301T050000ZDTEND;VALUE=DATE-TIME:20130301T050000ZDTSTAMP;VALUE=DATE-TIME:20130301T050000ZUID:20050115T101010/info@mysite.comPRIORITY:5END:VEVENTEND:VCALENDAR 
```

不过，我不知道处理这个问题的最佳方法是什么。我想让它可点击，以便查看者可以将其添加到他们的日历中。

我尝试过的一种方法只是将其嵌入为`href`（因为它不是 url，所以不起作用）：

```
<a class="btn-yellow" href="{{ical}}">Add to my calendar</a> 
```

我应该怎么做才能使这是一个可点击的添加到日历按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T10:00:05.260

对于您创建的要被客户端识别为 icalendar 的 icalendar 文件，您需要将 html 标头设置`Content-type`为`text/calendar`（[请参阅 rfc6047 mime type](https://www.rfc-editor.org/rfc/rfc6047#section-2.1)），这只能在服务器端而不是在您的 html 代码中完成。

不过，您可以在 html 代码中尝试`content-type`通过[地址元素的 type 属性](http://www.w3.org/TR/html4/struct/links.html#adef-type-A)声明 a 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:47:42.020

您将要创建指向用户日历/电子邮件客户端的 href 链接。说起来容易做起来难。如果你看看 eventbrite 是如何做到的，实际上你可以复制他们的代码，它运行顺利。例如，我没有 Outlook，单击保存到 Outlook 只需将 .ics 文件下载到我的桌​​面。我确实使用谷歌日历并有一个雅虎帐户，点击任一链接将我带到他们各自的日历。虽然我不喜欢href属性中使用的内联javascript...更好的方法是让它链接到href中的ics，然后使用javascript重定向用户onclick。这样，如果他们禁用了 javascript，他们仍然可以获得 ics。你可以在这里查看它的一个例子：[http ://www.eventbrite.com/event/5572613838](http://www.eventbrite.com/event/5572613838)

# ios - SVG 在支持 Web 应用的模式下无法在 Mobile Safari 上运行

> ID：15346756
> 
> 赞同：2
> 
> 时间：2013-03-11T19:18:30.713
> 
> 标签：ios, mobile, svg, safari, iphone-web-app

我可以加载页面并让 SVG 在移动版和桌面版 Safari 上正常工作，但是当我将页面添加到主屏幕以删除浏览器镶边并赋予应用程序更原生的感觉时，SVG 不会加载。其他一切都加载得很好，当我使用 PNG 而不是 SVG 时，它们会在 web 应用程序模式下加载。有人遇到过这个问题或知道解决方法吗？

# php - Memcached 会话处理程序连接静默失败

> ID：15346757
> 
> 赞同：1
> 
> 时间：2013-03-11T19:18:34.583
> 
> 标签：php, caching, memcached

我们正在使用 Memcached - 特别是 ElastiCache 来存储负载平衡服务器之间的会话。

有时我们的应用程序负载很重，似乎我们的会话处理程序无法连接，并且静默失败？据我所知，这不是驱逐问题。

```
ini_set("session.save_handler", "memcached");
ini_set("session.save_path", "AAA-session.XXX.YYY.ZZZ.cache.amazonaws.com:11211"); 
```

我很好奇是否有一种方法可以将 memcached 会话处理程序配置为自动重新连接或其他比将用户踢到登录页面更有用的响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:33:42.697

使用 Memcache 进行会话存储的一种更强大的方法是自己实现保存处理程序。您可以使用[session_set_save_handler](http://php.net/manual/en/function.session-set-save-handler.php)来做到这一点。

这样，您可以检查是否在`open(string $savePath, string $sessionName)`处理程序的方法中建立了连接，如果没有，请重试。

# java - 处理海量数据

> ID：15346761
> 
> 赞同：0
> 
> 时间：2013-03-11T19:18:45.633
> 
> 标签：java

我正在开发一个在某些系统上进行数据库交互的接口。作为我工作的一部分，我应该查询源数据库，调用一些过程，在引用游标中获取数据并填充目标数据库。

由于数据量可能很大，我在目标数据库上使用多线程来调用该过程。例如，如果应该加载的条目总数为 100 万，那么在目标数据库上，该过程被调用 10 次，每次 100K 记录。

这种安排工作正常，除非源数据库的数据量很大（例如超过 200 万个条目）。我已经设置了大约 20 GB 的堆空间来处理记录，但是我的程序因堆内存错误而失败。

我想知道是否有办法以并行模式从源数据库中查询数据（例如，假设从源存储过程中获取了总共 200 万条记录，我的程序应该首先获取该记录的子集然后继续下一个或类似的东西）。

我提出的解决方案之一是通过数据库端以这种方式发送记录，但我想知道是否有更好的选择。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T17:33:10.573

我找到了解决方案。Spring API 中的 BeanPropertyRowMapper 类需要扩展，需要重写 mapRow 方法。当准备好获取数据时调用 mapRow 方法。您可以在此阶段应用某种批处理机制。请注意，我发布了这个问题，因为数据是使用存储过程获取的，并且输出以引用游标的形式出现。

# mysql - MySQL 中不同的 ROUNDED 结果

> ID：15346762
> 
> 赞同：1
> 
> 时间：2013-03-11T19:18:47.950
> 
> 标签：mysql, distinct, distance

我有一个纬度\经度点的数据库。我试图获得按距离排序的 DISTINCT 舍入结果。我的查询如下：

```
SELECT
   DISTINCT ROUND(`lat`,2), ROUND(`lon`,2),
   ( 3959 * acos( cos( radians(LAT_HERE) )
          * cos( radians( `lat` ) )
          * cos( radians( `lon` ) - radians(LONG_HERE) )
          + sin( radians(LAT_HERE) )
          * sin( radians( `lat` ) ) ) ) AS distance
FROM `user_data`
HAVING distance <= 99
ORDER BY distance
LIMIT 100 
```

独特的是在回合前运行。例如 (29.333,29.334), (29.331,29.332) 将显示两次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:30:01.187

尝试使用`GROUP BY`

```
 SELECT  ROUND(`lat`,2), ROUND(`lon`,2),
                   ( 3959 * acos( cos( radians(LAT_HERE) )
                   * cos( radians( `lat` ) )
                   * cos( radians( `lon` ) - radians(LONG_HERE) )
                   + sin( radians(LAT_HERE) )
                   * sin( radians( `lat` ) ) ) ) AS distance
                FROM `user_data`
                GROUP BY ROUND(`lat`,2) 
                HAVING distance <= 99
                ORDER BY distance
                LIMIT 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:25:31.150

其实你是不对的。DISTINCT 在先前评估的结果上运行。运行例如：

```
select distinct round(a,2), round(b,2) 
from ((select 29.333 as a,29.334 as b) union (select 29.331,29.332)) t3; 
```

结果是：

```
+------------+------------+
| round(a,2) | round(b,2) |
+------------+------------+
|      29.33 |      29.33 |
+------------+------------+ 
```

# c++ - 删除功能区按钮但仍然出现链接器错误

> ID：15346766
> 
> 赞同：0
> 
> 时间：2013-03-11T19:19:00.573
> 
> 标签：c++, visual-studio-2010, mfc, ribbon

我尝试删除一个按钮（我错误地使用错误的父类创建了一个 on 事件处理程序），但即使我从功能区中删除了按钮，我仍然收到有关已删除处理程序的链接器错误。这是在带有 MFC C++ 项目的 Visual Studio 2010 Pro 上。

编辑：例如，我有一个带有 id BtnTargetPS3 和 2 个功能的按钮

```
void CAboutDlg::OnTargetPS3()
{
    // TODO: Add your command handler code here
}

void CTheApp::OnBtntargetps3()
{
    // TODO: Add your command handler code here
} 
```

我想删除第一个，但是当我这样做时，我得到链接器错误，因为它仍然需要它？？当我删除该按钮时，当我删除这两个函数时，仍然会出现链接器错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T13:40:33.100

通过向导为事件添加消息处理程序会导致源代码发生 3 处更改。

1 - 在文件内的`BEGIN_MESSAGE_MAP/END_MESSAGE_MAP`块内添加消息路由宏。`.cpp`

2 - 处理函数的代码实现作为类的成员函数，在`.cpp`文件内。

`{{AFX_MSG(ClassName)/}}AFX_MSG`3 - 文件内块中处理函数的原型声明`.h`。

很可能您的问题是由于删除了第 1 项和第 2 项，但忘记了第 3 项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:36:09.547

您删除了按钮，但我认为与按钮相关的功能仍然存在。
所以搜索它并删除不必要的东西。

# visual-sourcesafe - GET 当“工作文件夹包含可写副本”禁用您是否要“保留此文件”单选按钮时。如何启用它？

> ID：15346769
> 
> 赞同：0
> 
> 时间：2013-03-11T19:19:20.300
> 
> 标签：visual-sourcesafe, visual-sourcesafe-2005

VSS 2005。我正在最近新的 PC 上对我的项目进行 GET，该 PC 在本地服务器上具有 SS 数据库。每当我在进行了一些本地修改（即文件不是只读的）的地方进行 GET 操作时，我都会得到正确的 VSS 对话框“您的工作文件夹包含 blah blah blah 的可写副本”和 4 Do you want to。 .. 选项。

但是，第一个单选按钮*是否保留此文件？*被禁用。为什么会这样以及如何启用它（这就是我想要做的）？

注意：“替换本地文件”和“签出文件”单选按钮选项均已启用。“签出本地版本并合并”已禁用，但我不需要这样做，但这些信息可能对诊断有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:37:46.247

我的 MSDN DVD 有一个旧版本，我猜 Windows 更新不会费心检查 VSS。

无论如何，SS 2005 有一个补丁。这是讨论下载的文章：http: [//support.microsoft.com/ ?id=943847](http://support.microsoft.com/?id=943847)

# java - 递归方法总是比 Java 中的迭代方法更好吗？

> ID：15346774
> 
> 赞同：34
> 
> 时间：2013-03-11T19:19:31.410
> 
> 标签：java, recursion

递归方法总是比 Java 中的迭代方法更好吗？

也可以始终使用它们来代替迭代，反之亦然？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-03-11T19:24:29.307

> 递归方法总是比java中的迭代方法更好吗？

**不**

> 也可以始终使用它们来代替迭代，反之亦然？

您**总是**可以从递归函数中创建一个迭代函数（如果内存可以处理它，请参见[此处](http://en.wikipedia.org/wiki/Church%E2%80%93Turing_thesis)的有趣链接）。

在某些情况下，最好使用递归（例如在处理树时......在二叉树上移动等）。对我来说，如果使用循环并不比递归更复杂也更困难，我更喜欢使用循环。

**递归使用更多内存，但有时更清晰、更易读。** 使用循环可以提高性能，但递归有时对程序员（和他的性能）更好。

因此，对于结论，决定使用什么 - 递归或迭代，取决于你想要实现什么，以及对你来说更重要的是什么（可读性，性能......），并且要求*递归或迭代*就像要求*优雅或性能*.

* * *

## 例子

*考虑阶乘*的这两个实现：

**迭代：**

```
private int Factorial(int num)
{
    int result = 1;
    if (num <= 1) 
       return result;
    while (num > 1)
    {
        result * = num;
        num--;
    }
    return result;
} 
```

**递归：**

```
private int Factorial(int num)
{
    if (num <= 1) 
        return 1;
    return num * Factorial(num - 1);
} 
```

哪种方法**更具可读性？**

显然是递归的，它是直截了当的，可以从第一次尝试中编写并成功运行 - 它只是将数学定义转换为`Java`！

哪种方法**更有效？**

举个例子`num = 40`，这是一个**时间比较**：

```
long start = System.nanoTime();
int res = Factorial(40);
long end = System.nanoTime();
long elapsed = end - start;

System.out.println("Time: " + elapsed); 
```

***2993*为递归**

***2138*为迭代**

当然，越大，差异也会`num`越大。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-11T19:27:12.830

*递归有利于程序员理解程序，但很多时候它们会导致堆栈溢出，因此总是更喜欢迭代而不是它们*。

事实上，递归很少是解决问题的最有效方法，而迭代几乎总是更有效。这是因为调用堆栈在递归过程中被大量使用，因此进行递归调用通常会产生更多开销。
这意味着许多计算机编程语言将花费更多时间维护调用堆栈，然后它们将实际执行必要的计算。

**递归是否比迭代使用更多的内存？** 一般来说，是的。这是因为调用堆栈的广泛使用。

**我应该使用递归还是迭代？**

通常使用递归是因为它实现起来更简单，而且它通常比迭代解决方案更“优雅”。请记住，在递归中完成的任何事情也可以迭代地完成，但是使用递归通常存在性能缺陷。但是，根据您要解决的问题，这种性能缺陷可能非常微不足道——在这种情况下，使用递归是有意义的。使用递归，您还可以获得其他程序员可以更轻松地理解您的代码的额外好处——这总是一件好事。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-03-11T19:30:24.093

更正其他答案：任何迭代都可以转换为递归（需要注意的是可能发生堆栈溢出）。*然而*，并不是所有的递归都可以直接转化为迭代。通常，您需要某种形式的暂存空间来保存原本会存储在堆栈中的数据。

至于选择哪个：这取决于您的语言以及编写递归解决方案的便利性。

* * *

编辑，以澄清我所说的“直接”是什么意思：

递归分为三种类型，具体取决于它们如何直接转换为迭代：

*   尾调用可优化，其中方法中的*最后一个操作*是递归调用。这些可以直接翻译成循环。
*   不可尾调用优化的递归，因为它需要在调用之间保留信息，但不需要堆栈。表示为的阶乘`fact(N)`是典型的例子：在递归公式中，最后一个操作不是递归调用，而是乘法。这些类型的递归调用可以很容易地转换为尾调用可优化形式，然后再转换为迭代形式（要将阶乘转换为尾调用可优化形式，您必须使用双参数版本`fact(n, acc)`，其中`acc`是累积结果） .
*   需要在每次调用时保留状态的递归。经典示例是前序树遍历：每次调用时，您必须记住父节点。*没有办法将其直接转换为迭代。*相反，您必须构建自己的堆栈来保存每次调用的状态。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T19:55:28.553

严格来说，递归和迭代都同样强大。任何递归解决方案都可以实现为带有堆栈的迭代解决方案。逆变换可能比较棘手，但最简单的就是通过调用链将状态向下传递。

在 Java 中，有一种情况是递归解决方案优于（幼稚的）迭代解决方案，另一种情况是它们基本上是等价的。在大多数其他情况下，迭代解决方案会更好，因为避免了函数调用开销。

如果函数隐式使用堆栈，则递归解决方案通常会更好。考虑深度优先搜索：

```
void walkTree(TreeNode t) {
    doSomething(t);

    if (t.hasLeft()) { walkTree(t.getLeft()); }
    if (t.hasRight()) { walkTree(t.getRight()); }
} 
```

与等效的迭代解决方案相比

```
void walkTree(TreeNode t) {
    Stack<TreeNode> s = new Stack<TreeNode>();
    s.push(t);
    while (!s.empty()) {
        TreeNode t = s.pop();
        doSomething(t);
        if (t.hasLeft()) { s.push(t.getLeft()); }
        if (t.hasRight()) { s.push(t.getRight()); }
    }
} 
```

在迭代的情况下，您将不得不为`Stack<>`对象创建的任何垃圾付费。在递归的情况下，您将使用进程堆栈，它不会产生任何垃圾或分配任何内存。递归解决方案容易受到堆栈溢出的影响，但否则会运行得更快。

如果函数使用尾递归，那么这两个解决方案将是等价的，因为 JIT 会将递归解决方案转换为迭代解决方案。尾递归是函数做的最后一件事是递归调用自身，允许编译器忽略任何累积的状态。比如遍历一个列表

```
void walkList(ListNode n) {
    doSomething(n);
    if (n.hasNext()) { walkList(n.getNext()); }
} 
```

由于“walkList”是函数中完成的最后一件事，JIT 会将其本质上转换为“n = n.getNext(); goto beginning”，这将使其等同于迭代解决方案。

在大多数其他情况下，迭代解决方案会更好。例如，如果您想进行广度优先搜索，那么您可以在迭代解决方案中使用 a`Queue`而不是 a `Stack`，并使其立即工作，而将其转换为递归解决方案则需要您为两个隐式堆栈付费调用堆栈，并且仍然为队列付费。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T19:23:13.460

你是什​​么意思更好？每个递归也可以通过迭代来实现，反之亦然。有时递归更容易理解。然而，由于递归会使堆栈膨胀，许多嵌套调用可能会导致内存不足异常。在这种情况下，递归显然不是您的最佳选择。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-11T19:32:19.380

“递归总是比迭代好”这句话是错误的。在某些情况下，任何一个都比另一个更可取。

很难就使用哪种类型的算法给你一个决定性的答案，因为它取决于特定情况。例如，斐波那契数列的常见教科书递归案例使用递归非常低效，因此在这种情况下最好使用迭代。相反，使用递归可以更有效地实现遍历树。

要回答您的第二个问题，是的，任何迭代算法都可以使用递归来实现，反之亦然。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-11T19:46:40.297

通常递归方法需要几行代码，但需要对您的算法进行深入思考。如果你犯了一个逻辑错误，你可能会得到一个`StackOverflowError`.

下面是阶乘的 2 个编程示例：

**迭代：**

```
public int calculateIteractiveFactorial(int n) {
    // Base case
    if (n == 1) {
        return 1;
    }
    int factorial = 1;
    for (int i = 1; i <= n; i++) {
        factorial = factorial * i;
    }
    return factorial;
} 
```

**递归：**

```
public int calculateRecursiveFactorial(int n) {
    // Base case
    if (n == 1) {
        return 1;
    }
    return n * calculateRecursiveFactorial(n - 1);
} 
```

为每个提案反映不同的想法总是好的，总是考虑*代码行数、复杂性、清晰度、凝聚力等。*

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-11T20:40:38.523

如果我们还记得 java 的按值传递机制，我们可以理解递归消耗更多内存，因为每次调用都传递对象引用地址的副本或某些原始类型的值。因此，作为您为每个递归调用传递的马赫参数，作为您将为每个调用消耗的马赫内存，另一方面，循环使用起来很轻松。但是我们当然知道有“分而治之”的算法，例如合并排序或树上的迭代，它们在递归的帮助下消耗更少的步骤来给出结果。所以在这些情况下，我认为最好使用递归。

# ios - 如何访问“Web Thread”并对其执行操作

> ID：15346775
> 
> 赞同：2
> 
> 时间：2013-03-11T19:19:33.353
> 
> 标签：ios, objective-c

我们几乎在后台线程上运行整个应用程序以保持 UI 干净和响应迅速，但是当我们加载全屏 HTML 时，我们需要在主线程上运行它，否则我们会收到典型的错误“试图获得网络锁来自除主线程或网络线程之外的线程。” 显然，在主线程上加载这么多数据会导致明显的卡顿。（请注意，这些是静态的应用内资产，以 HTML 形式提供，我们使用实际上不访问 Web 的 Web 视图在应用内呈现，仅显示本地内容。）

所以，它告诉我我可以在主线程或“网络线程”上获得网络锁；有什么方法可以实际访问该网络线程并在其上运行此代码，以便我可以保持 UI 响应？

# datetime - Extjs 4 Ext.form.Panel 使用 loadRecord 和 updateRecord 日期字段设置为空

> ID：15346778
> 
> 赞同：1
> 
> 时间：2013-03-11T19:19:43.543
> 
> 标签：datetime, extjs, extjs4, extjs4.1

我有一个网格和一个打开表单的操作按钮。网格中和表单上有一个不可编辑的日期字段 - 但是当我执行 updateRecord 时，网格中的数据字段值设置为 null。

我注意到两件事 - 在 ext-all 中 - 当日期被解析时 - 它不被识别为日期，而是字符串，所以当它被解析时，它应该以毫秒为单位 - 但它实际上是在 'yyyy- mm-dd' 格式。所以解析返回 null - 这就是发送到网格的内容。

任何想法如何解决这个问题并返回实际日期？

谢谢。

这是我的 index.cshtml

```
 <script type="text/javascript">
          Ext.require([
          'Ext.container.Viewport',
          'Ext.grid.*',
          'Ext.util.*',
          'Ext.Date.*',
          'Ext.ux.CheckColumn',

          'ACTGRID.ui.FormPanelGrid'
         ]);

      Ext.onReady(function () {
          initialize();
      });

      function initialize() {
          Ext.Ajax.timeout = 60000; // 60 seconds

          var myGrid = Ext.create('ACTGRID.ui.FormPanelGrid');

           var viewport = Ext.create('Ext.container.Viewport', {
              layout: 'border',
              items: [{
                      region: 'center',
                      title: 'Grid',
                      items: myGrid }]
          });
      };
   </script> 
```

这是网格面板：

```
 Ext.Date.patterns = {
    ISO8601Long: "Y-m-d H:i:s",
    ISO8601Short: "Y-m-d",
    ShortDate: "n/j/Y",
    LongDate: "l, F d, Y",
    FullDateTime: "l, F d, Y g:i:s A",
    MonthDay: "F d",
    ShortTime: "g:i A",
    LongTime: "g:i:s A",
    SortableDateTime: "Y-m-d\\TH:i:s",
    UniversalSortableDateTime: "Y-m-d H:i:sO",
    YearMonth: "F, Y"
};

Ext.define('ACTGRID.ui.TransactionsLateModel', {
extend: 'Ext.data.Model',
fields: [
    { name: 'Id', type: 'int' },
    { name: 'Approval', type: 'boolean' },
    { name: 'ErrorComment', type: 'string' },
    { name: 'ErrorSource', type: 'string'},
    { name: 'RecordDate', type: 'date', dateFormat: 'MS' }],

idProperty: 'Id'
});

ACTGRID.ui.editFormInstance = Ext.create('ACTGRID.ui.EditForm').hide();

Ext.define("ACTGRID.ui.FormPanelGrid", {
    extend: "Ext.grid.Panel",
    requires: ['ACTGRID.ui.TransactionsLateModel'],

    initComponent: function () { 
        var me = this;

        me.columns = me.buildColumns();
        me.store = Ext.create('Ext.data.Store', {
            model: 'ACTGRID.ui.TransactionsLateModel',
            remoteSort: true,
            storeId: 'TransactionsLateStoreId',
            autoLoad: true,
            buffered: true,
            autoSync: true,

            pageSize: 70,
            proxy: {
                type: 'rest',
                timeout: 600000,

                url: '/Home/ActionsGrid/',
                reader: {
                    type: 'json',
                    root: 'transaction',
                    totalProperty: "Total"
                },
                writer: {
                    type: 'json',
                    root: 'transaction'
                }
            }
        });

       me.autoSizeColumns = true;
       me.autoScroll = true;
       me.forcefit = true;
       me.callParent(arguments);

  },

   showEditForm: function (rec) {
    var me = this;
    ACTGRID.ui.editFormInstance.setPosition(100, 100);

    ACTGRID.ui.editFormInstance.form.setActiveRecord(rec || null);
    ACTGRID.ui.editFormInstance.show();

},

buildColumns: function () {
    var me = this;

    return [
    { text: 'Add Comments', xtype: 'actioncolumn',
        width: 80,
        items: [{
            icon: '/./Content/images/tab_new.gif',
            tooltip: 'Edit',
            handler: function (grid, rowIndex, colIndex) {
                var rec = grid.getStore().getAt(rowIndex);
                me.showEditForm(rec);
            }
        }]
    },
    { text:'Approval', dataIndex: 'Approval'},
    { text:'ErrorComment', dataIndex: 'ErrorComment' },
    { text:'ErrorSource', dataIndex: 'ErrorSource'},
    { text:'RecordDate', dataIndex: 'RecordDate', renderer: Ext.util.Format.dateRenderer        (Ext.Date.patterns.ShortDate)}];
    },
   height: 600,
   width: 'auto'

   }); 
```

这是编辑表格：

```
 Ext.define('ACTGRID.ui.EditFormPanel', {
    extend: 'Ext.form.Panel',
    requires: ['Ext.form.field.Text'],
    layout: {
        type: 'hbox',
        align: 'stretch'  // Child items are stretched to full width
    },
    initComponent: function () {
        var me = this;
        me.activeRecord = null;
        me.title = 'Please Review and Add Comments';
        me.plain = true;
        me.defaults = {
        flex: 1,
        border: false,
        frame: false
    };

    me.fieldDefaults = {
        labelAlign: 'left',
        labelWidth: 150
    };
    me.items = [{// column #1
        xtype: 'panel',
        items: [
                { fieldLabel: 'Approval', name: 'Approval', submitValue: false, xtype: 'displayfield' },
                { fieldLabel: 'RecordDate', name: 'RecordDate', submitValue: false, xtype: 'displayfield', valueToRaw: Ext.util.Format.dateRenderer('m/d/Y') }
                ]
    }, 
    { // column #2
        xtype: 'panel',
        items: [
            { fieldLabel: 'Error Comment', name: 'ErrorComment', xtype: 'textareafield', minHeight: 280, minWidth: 400, allowBlank: false, anchor: '100%', submitValue: true },
            { fieldLabel: 'Error Source', name: 'ErrorSource', xtype: 'textareafield', minHeight: 280, minWidth: 400, allowBlank: false, anchor: '100%', submitValue: true }]
    }];

    me.onSave = function (button, event) {
        var active = this.activeRecord,
        form = this.getForm();
        if (!active) {
            return;
        }
        if (form.isValid()) {
            form.updateRecord(active);
        }
    };

    me.onClose = function (button, event) {
        this.setActiveRecord(null);
        ACTGRID.ui.traderEditFormInstance.hide();
    };

    me.dockedItems = me.buildDockedItems();
    me.callParent(arguments);
},

// inline buttons
buildDockedItems: function () {
    var me = this;
    return [{
        xtype: 'toolbar',
        dock: 'bottom',
        items: ['->', {
            itemId: 'save',
            text: 'Save',
            tooltip: 'Save Comments',
            handler: function () {
                me.onSave();
            }

        }, '-', {
            itemId: 'close',
            text: 'Close',
            tooltip: 'Close',
            handler: function () {
                me.onClose();
            }
        }]
    }];
},

setActiveRecord: function (record) {
    this.activeRecord = record;
    if (record) {
        this.down('#save').enable();
        this.getForm().loadRecord(record);
    } else {
        this.down('#save').disable();
        this.getForm().reset();
    }
}
});

Ext.define('ACTGRID.ui.EditForm', {
extend: 'Ext.window.Window',
title: 'Add Comments',
layout: 'fit',
initComponent: function () {
    var me = this;
    me.closeAction = 'hide';
    me.plain = true;
    me.minWidth = 700;
    me.minHeight = 300;
    me.autoHeight = true;
    me.resizable = true;
    me.modal = true;
    me.autoHeight = true;
    me.width = 800;
    me.title = 'Comments';
    me.form = Ext.create('ACTGRID.ui.EditFormPanel');
    me.items = [me.form];

    me.callParent(arguments);
}

}); 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    [AcceptVerbs(HttpVerbs.Get)]
    [ActionName("ActionsGrid")]
    public ActionResult GetActionsGrid()
    {
        DetailsViewModel model = new DetailsViewModel();
        List<ExtJsTreeGrid.Models.ActionGrid> ActionsFromDB = model.GetActionsGrid();

        model.transaction = ActionsFromDB;
        model.success = true;
        return Json(model, JsonRequestBehavior.AllowGet);
    }
} 
```

模型：

```
public class ActionGrid
{
    public Int32 Id { get; set; }
    public bool Approval { get; set; }
    public string ErrorComment { get; set; }
    public string ErrorSource { get; set; }
    public DateTime RecordDate { get; set; }
}

public class DetailsViewModel
{
    public List<ActionGrid> transaction = new List<ActionGrid>();
    public bool success = true;

    public List<ActionGrid> GetActionsGrid()
    {
        return new List<ActionGrid> {
             new ActionGrid { Id = 1, 
                        Approval = true, 
                        ErrorComment = string.Empty, 
                        ErrorSource = string.Empty,
                        RecordDate = new DateTime(1979, 11, 23)
             },
             new ActionGrid { Id = 2, 
                        Approval = true, 
                        ErrorComment = string.Empty, 
                        ErrorSource = string.Empty,
                        RecordDate = new DateTime(1980, 05, 20)
             },
             new ActionGrid { Id = 3, 
                        Approval = true, 
                        ErrorComment = string.Empty, 
                        ErrorSource = string.Empty,
                        RecordDate = new DateTime(1995, 01, 12)
             },
             new ActionGrid { Id = 4, 
                        Approval = true, 
                        ErrorComment = string.Empty, 
                        ErrorSource = string.Empty,
                        RecordDate = new DateTime(2010, 09, 02)
             }};

    }
}

EDIT:  I added a check for value being already a date, to ext-all to date conversion function.  Is there a better way?

    DATE: {
        convert: function (v) {
                var df = this.dateFormat,
                    parsed;

                if (!v) {
                    return null;
                }

                if (Ext.isDate(v)) {
                    return v;
                }

                **try {
                    var myDate = new Date(v);
                    if (Ext.isDate(myDate) == true && isNaN(myDate) == false && myDate != undefined)
                        return myDate;
                }
                catch (ex) {
                }**
                if (df) {
                    if (df == 'timestamp') {
                        return new Date(v * 1000);
                    }
                    if (df == 'time') {
                        return new Date(parseInt(v, 10));
                    }
                    return Ext.Date.parse(v, df);
                }

                parsed = Date.parse(v);
                return parsed ? new Date(parsed) : null;
            },
            sortType: st.asDate,
            type: 'date'
    } 
```

# input - 从输入中删除 x-webkit-speech

> ID：15346779
> 
> 赞同：0
> 
> 时间：2013-03-11T19:19:44.817
> 
> 标签：input, attributes, webkit

这应该很简单，但可惜似乎并非如此。

我不希望麦克风出现在我的输入框中

我有小的输入框和chrome喜欢添加“x-webkit-speech”有没有办法控制这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T20:16:12.420

默认情况下应该禁用语音，您可以添加`x-webkit-speech`到您的`input`以提供语音到文本的功能。如果要将麦克风图像移到`input`框外，请查看此[http://www.phpied.com/x-webkit-speech-input-and-textareas/](http://www.phpied.com/x-webkit-speech-input-and-textareas/)

# html - 网页中的动画徽标

> ID：15346781
> 
> 赞同：0
> 
> 时间：2013-03-11T19:19:47.610
> 
> 标签：html, css

我是通过[这个](http://jip.io/)网站来的。当用户点击时`Log in`，页面上的徽标开始动画。如何实现这样的动画。我正在寻找有用的链接。我尝试谷歌搜索但没有成功，因为我不确定它是什么叫？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:32:53.463

是的，这应该很简单。假设这两个是兄弟姐妹，你甚至可以用 CSS 做到这一点。

**CSS 方法**

```
#site-logo {
   background-image: url(path/to/non-animated-image);
}
.login-button {
  /* Login default CSS here */
}
.login-button:active ~ #site-logo {
   background-image: url(path/to/animated-image.gif);
} 
```

`.login-button:active ~ .site-logo`然后在块中使用动画 gif 。

否则，您可以使用 jQuery 或类似的东西

**jQuery 方法**

```
.login-button.on('click', function(){
   $('#site-logo').css('background-image', 'url(path/to/animated-image.gif)');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T22:17:36.220

您发布的链接使用 CSS3 动画/过渡和画布。而且它使用了太多的绒毛来实现对那个标志的如此简单的效果。这不是很有效，正如 Josh Burgess 指出的那样，您可以轻松地对 .gif 图像执行相同的操作。但是，我只是想强调您在此徽标中看到的一些事情。（它使用了一个画布，它可能只包含一个 gif 图像，但徽标的意义远不止这些）。

我将从您看到的圆圈的基础知识开始，这些不是图像。您可以使用 .gif 图像来实现类似的效果。但在这种情况下，标志的静态部分全是 CSS 和 HTML。

## 圆圈的一个例子

### CSS：

```
.myCircles li, .myCircles li:after {
    position: absolute;
    top: 25px;
    left: 25px;
    list-style: none;/* hide the list style */
    text-indent: -9001em;/* hide the text content */
    width: 50px;
    height: 50px;
    border-radius: 100% 100% 100% 100%;
    border-top: 5px solid #000;
    border-right: 5px solid #000;
    border-bottom: 5px solid #000;
    border-left: 5px solid transparent;
    transform: rotate(45deg);
    /* The transition effect */
    transition: all 2s;
    -moz-transition: all 2s; /* Firefox 4 */
    -webkit-transition: all 2s; /* Safari and Chrome */
    -o-transition: all 2s; /* Opera */
}
.myCircles li:after {
    content: ''; /* important to add this, without a content propperty set :before / :after psuedo elements will not show */
    left: 25px;
}
.myCircles li:hover {
    transform: rotate(190deg);
    opacity: 0.5;
} 
```

### HTML：

```
<ul class="myCircles">
    <li id="circle"> circle </li>
</ul> 
```

在网站上，多个圆圈是使用 :before 和 :after 选择器创建的。如上例所示。单击网站上的按钮后动画开始时，它将淡入包含该动画的画布中。为了演示；您可以添加一个简单的 :hover 来查看这种褪色效果。（在此示例中淡出而不是淡入。）

您可以在某些其他事件上使用这些过渡和动画，而不仅仅是 :hover （或 :focus :active 等），但您需要 JS 才能这样做。例如 onclick 或 load 事件。

### HTML/JS (jQuery):

```
<button id="test">login</button>

<script>
    $(document).ready(function(){
        $('#test').click(function() {
            $('#circle').css( 'left', '100px' );
            $('#circle').css( 'opacity', '0.5' );
        });

    });
</script> 
```

这些是您在徽标中看到的效果的基础知识。但是，我不建议在两者之间使用画布的麻烦。但是在使用画布时，您可以更自由地渲染内容，因此对于复杂的动画，画布可以派上用场。使用画布时，您应该准备手动创建大量动画，或者搜索库以利用画布元素的真正力量。

至于有关动画和您想了解更多效果的链接：（由于这是我在 SO 上的第一篇文章，看来我只能为您提供 2 个链接，我建议您查看 css 转换和关键帧动画语法以及 CSS 技巧以了解有关动画可能性的更多信息）

## CSS 变换、过渡、动画：

[CSS 转换](http://css-tricks.com/almanac/properties/t/transition/)

## 帆布：

[画布动画](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Basic_animations?redirectlocale=en-US&redirectslug=Canvas_tutorial/Basic_animations)

# rest - 没有路径时 Jersey REST 404 错误

> ID：15346787
> 
> 赞同：0
> 
> 时间：2013-03-11T19:20:14.183
> 
> 标签：rest, jersey

我已经开发了一组 RESTful Web 服务，我正在尝试以一种有用的方式为用户处理错误。

我遇到了错误编码帐户资源的 URL 并收到 404 错误的情况。我预计会出现错误，因为服务器中没有 @Path 注释会响应。但是由于我得到了404，我向用户报告说找不到他们的帐号。

我猜从纯 RESTful 的角度来看，404 “有意义”，因为 /server/foo/123450 没有“资源”（当资源的正确路径是 /server/bar/123450 时）。但是 /server/thisPathHasNoHopeOfExisting/123450 也响应 404。

/server/bar/000000 其中帐号 00000 不存在响应 404。

我怎样才能告诉我的用户正确的事情？（那 /server/thisPathHasNoHopeOfExisting/xxxxxx 是一个真正的服务器错误，一个 500 系列，因为服务器永远不会回答这个问题）——有没有办法让我的 Jersey 服务少一点 REST-pedantic？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:44:53.027

`How can I tell my user the right thing?`

404*是*正确的。

`(that /server/thisPathHasNoHopeOfExisting/xxxxxx is a true server error`

你是什​​么意思？为什么是服务器错误？客户是要求它的人，不是吗？如果您正在创建一个“真正的”REST 接口，那么您将使用超媒体作为应用程序状态的引擎——客户端永远不会想到 /server/thisPathHasNoHopeOfExisting/，因为您没有告诉他们这件事。

在 Jersey/JAX-RS 中，您可以使用 UriBuilder 来构建 URI - 而且您应该这样做。然后就没有“错误编码 URI”了。

您也许可以使用 JAX-RS 的[优先](http://www.j2eeprogrammer.com/2010/11/jax-rs-path-precedence-rules.html)规则来创建某种包罗万象的页面，但我不确定这是否会非常有效。我的意思是，您如何区分您打算存在但可能不存在的资源（例如不存在的帐户）和您不打算存在的资源？您的问题源于遗漏错误，因此您可以设计的任何解决方案也将继承此类可能的错误。使用 UriBuilder。

# javascript - 如何查询 json 的值？

> ID：15346793
> 
> 赞同：0
> 
> 时间：2013-03-11T19:20:39.433
> 
> 标签：javascript, json

您好 :) 我如何找出加载的图片具有哪个“计数”-id？

加载的图片是：“df5ddc27f7569f83e3867bec71a2cac0.jpg”
而我的json是：

```
[
  {"count":1,"file":"8b6c5592f0378dc8c56e591a7b147826.jpg"},
  {"count":2,"file":"a44618c1afe93be486382ceb38536e02.jpg"},
  {"count":3,"file":"3c692942d69fba0d16971e0685f42757.jpg"},
  {"count":4,"file":"df5ddc27f7569f83e3867bec71a2cac0.jpg"}
] 
```

有人对我有想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:23:13.440

如果您的图像名称是一个键，那么您可以“查询”（索引查找）JSON 的计数，如下所示：

```
var jsondata = [
  "8b6c5592f0378dc8c56e591a7b147826.jpg" : {"count":1},
  "a44618c1afe93be486382ceb38536e02.jpg" : {"count":2},
  "3c692942d69fba0d16971e0685f42757.jpg" : {"count":3},
  "df5ddc27f7569f83e3867bec71a2cac0.jpg" : {"count":4}
];

function getId(file) {
  if(jsondata.hasOwnProperty(file)) {
    return jsondata[file].count;
  } else {
    //Key not Found
    return 0;
  }
} 
```

但是对于它目​​前的设计，您需要遍历每个值（如 ocanal 的回答所示）并查找值等于您所追求的图像的元素“文件”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:30:38.227

我假设您正在尝试使用 javascript 执行此操作

```
var jsondata = [
  {"count":1,"file":"8b6c5592f0378dc8c56e591a7b147826.jpg"},
  {"count":2,"file":"a44618c1afe93be486382ceb38536e02.jpg"},
  {"count":3,"file":"3c692942d69fba0d16971e0685f42757.jpg"},
  {"count":4,"file":"df5ddc27f7569f83e3867bec71a2cac0.jpg"}
];

function getId(file) {
    for(var f in jsondata) {
       if(jsondata[f].file == file)
         return jsondata[f].count;
    }
}

var id = getId("df5ddc27f7569f83e3867bec71a2cac0.jpg"); //count-id 
```

# android - 在可跨度中分隔字符

> ID：15346795
> 
> 赞同：1
> 
> 时间：2013-03-11T19:20:46.803
> 
> 标签：android, spannable

我有一个可扩展的，比如说`[12]`。我想从`[`和之间读取数字`]`。我怎样才能为 spannables 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:25:39.637

Spannable[也是](http://developer.android.com/reference/android/text/Spannable.html)一个`CharSequence`. 这意味着您可以调用`toString()`.

```
String s = mySpannable.toString(); 
```

然后，您可以使用正则表达式匹配您想要的任何字符，循环，或者如果您知道您想要的字符始终包含在方括号之间并且方括号始终位于开头和结尾，`subString()`则调用并排除括号。

请记住，它`CharSequence`也有一个[`charAt()`](http://developer.android.com/reference/java/lang/CharSequence.html#charAt%28int%29)方法，因此`toString()`甚至可能不需要。

编辑：如果你的数字总是括在括号中，你可以这样做：

```
String withBrackets = "[1234567]";

String nums = s.substring (withBrackets.indexOf ("[")+1,withBrackets.indexOf ("]"));
System.out.println (nums); 
```

# java - 更改 JLabel 时 Applet 重新定位

> ID：15346804
> 
> 赞同：1
> 
> 时间：2013-03-11T19:21:19.283
> 
> 标签：java, swing, applet

我目前有一个`JFrame`包含一个`Applet`和一个`JTabbedPane`。每当`JLabel`在选项卡式窗格上更新 a 时，小程序就会向下移动一个像素，这比您想象的更烦人。我能做些什么来防止这种情况发生吗？

这是我正在使用的示例（对于我的问题，只需将鼠标悬停在“Foo”上）[启动小程序大约需要 10-15 秒，音乐将在启动后播放，按钮将禁用它（音符）]：

```
import java.io.*;
import java.net.*;
import java.awt.*;
import java.util.*;
import java.applet.*;
import javax.swing.*;
import java.awt.event.*;
import java.util.regex.*;

public class ToolkitFrame extends JFrame {

    public void construct() {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        add(getApplet(), BorderLayout.CENTER);
        add(getTabs(), BorderLayout.EAST);
        setLocationRelativeTo(null);
        pack();
        setVisible(true);
    }

    public JTabbedPane getTabs() {
        tabs = new JTabbedPane();
        tabs.add(getTab());
        return tabs;
    }

    public JPanel getTab() {
        label = new JLabel("Foo");
        label.addMouseListener(new MouseAdapter() {

            @Override
            public void mouseEntered(MouseEvent event) {
                label.setText("Bar");
            }

            @Override
            public void mouseExited(MouseEvent event) {
                label.setText("Foo");
            }

        });

        JPanel panel = new JPanel();
        panel.add(label);
        return panel;
    }

    public Applet getApplet() {
        Applet applet = null;
        try {
            String url = "http://oldschool59.runescape.com/";
            String source = getPageSource(new URL(url));
            Matcher matcher = Pattern.compile("code=(.*) ").matcher(source);
            if (matcher.find()) {
                LoaderStub stub = new LoaderStub(Pattern.compile("<param name=\"([^\\s]+)\"\\s+value=\"([^>]*)\">"), source);
                String appletClass = matcher.group(1);
                stub.setCodeBase(new URL(url));
                stub.setDocumentBase(new URL(url));
                try {
                    applet = (Applet) new URLClassLoader(new URL[] {
                        new URL(url + "gamepack.jar")
                    }).loadClass(appletClass.replaceAll(".class", "")).newInstance();
                    applet.setBackground(Color.BLACK.darker());
                    applet.setPreferredSize(new Dimension(765, 503));
                    applet.setStub(stub);
                    applet.init();
                    applet.start();
                    applet.requestFocusInWindow();
                    return applet;
                } catch (ClassNotFoundException e) {
                    e.printStackTrace();
                }
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        } catch (InterruptedException e1) {
            e1.printStackTrace();
        }
        return applet;
    }

    class LoaderStub implements AppletStub {

        private Map<String, String> parameters = new HashMap<String, String>();

        private URL documentBase;
        private URL codeBase;

        public LoaderStub(Pattern parameterPattern, String frameSource) {
            Matcher param = parameterPattern.matcher(frameSource);
            while (param.find()) {
                String key = param.group(1);
                String value = param.group(2);
                parameters.put(key, value);
            }
        }

        public void setDocumentBase(URL documentBase) {
            this.documentBase = documentBase;
        }

        public void setCodeBase(URL codeBase) {
            this.codeBase = codeBase;
        }

        @Override
        public boolean isActive() {
            return true;
        }

        @Override
        public URL getDocumentBase() {
            return documentBase;
        }

        @Override
        public URL getCodeBase() {
            return codeBase;
        }

        @Override
        public String getParameter(String name) {
            return parameters.get(name);
        }

        @Override
        public AppletContext getAppletContext() {
            return null;
        }

        @Override
        public void appletResize(int width, int height) {

        }

    }

    public static String getPageSource(URL url) throws IOException, InterruptedException {
        URLConnection uc = url.openConnection();
        uc.addRequestProperty("Accept", "text/xml,application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5");
        uc.addRequestProperty("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.7");
        uc.addRequestProperty("Accept-Encoding", "gzip,deflate");
        uc.addRequestProperty("Accept-Language", "en-gb,en;q=0.5");
        uc.addRequestProperty("Connection", "keep-alive");
        uc.addRequestProperty("Host", "www.runescape.com");
        uc.addRequestProperty("Keep-Alive", "300");
        uc.addRequestProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.0.6) Gecko/20060728 Firefox/1.5.0.6");
        DataInputStream di = new DataInputStream(uc.getInputStream());
        byte[] tmp = new byte[uc.getContentLength()];
        di.readFully(tmp);
        di.close();
        return new String(tmp);
    }

    private JLabel label;
    private JTabbedPane tabs;

    private static final long serialVersionUID = -6757985823719418526L;

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new ToolkitFrame().construct();
            }

        });
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T05:08:26.437

```
 applet.setLayout(null);
        applet.setBounds(0,0,770,530); 
```

这将始终强制小程序的位置为 0,0。只需在 applet.start() 之前将这段代码插入某处

# eclipse - 在 Eclipse 上运行网页（使用 Extjs）

> ID：15346809
> 
> 赞同：0
> 
> 时间：2013-03-11T19:21:27.613
> 
> 标签：eclipse, extjs, eclipse-plugin, ide

我使用 Eclipse 作为 php/javascript/Extjs 4 的 IDE，它只是在我想使用内部 Web 浏览器运行网页时。php 和 html 网页运行良好。但是包含显示白页的 Extjs 脚本的 html 页面，没有错误。即使我安装了 Eclipse 插件（Spket）

这些脚本在 web 服务器/web 浏览器 (localhost) 上运行良好，但在 eclipse 内部 web 浏览器中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T14:05:00.927

我也面临同样的问题，这是因为您的 extjs 文件和 html 文件在 localhost 根目录中工作，所以当您使用浏览器中的 localhost 地址运行它们时，它们会运行，但在 eclipse 中，html 页面不会像这样运行。所以它无法运行..！

# javascript - 使用jquery触发点击打开一个新标签

> ID：15346813
> 
> 赞同：-1
> 
> 时间：2013-03-11T19:21:34.020
> 
> 标签：javascript, jquery, html

我在网站的公共视图上有一个链接，只有在用户通过身份验证的情况下才允许关注该链接。因此，现在如果匿名用户单击该链接，则会弹出一个登录模式。我存储了单击哪个链接的 ID，并与登录凭据一起发送。然后页面刷新，`$(document).ready()`我做了一个

```
$('selectedLink').trigger('click'); 
```

我发现触发点击并期望它遵循`href`属性的问题。所以我现在有一个`onclick`很好的属性。在`onclick`属性中，我有一行说`window.open(url)`

它很好，但总是被浏览器弹出窗口阻止程序阻止。有什么方法可以触发脚本中的点击并让它打开一个新标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:32:20.077

打开选项卡时，在单击后尝试不执行任何处理密集型操作（这可能会导致延迟）。

点击就像用户打开新标签的权限，如果您在使用该权限之前花费太长时间，浏览器可能会发现它可疑并将其归类为弹出窗口。

如果您可以共享选项卡打开/重定向功能...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-27T08:28:16.907

请尝试“_newTab”而不是“_blank”

window.open( URL , "_newtab");

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-11T19:29:20.003

它是在新窗口中打开还是在新标签中打开完全由用户决定，所以简而言之：不，您不能强制打开新标签。

您可以改用`window.location.replace(...newurl...)`在同一窗口中重定向用户。

# networking - 如何以可以连接到互联网的方式启动具有静态 IP 地址的临时 lxc？

> ID：15346819
> 
> 赞同：0
> 
> 时间：2013-03-11T19:22:08.487
> 
> 标签：networking, ubuntu, virtualization, lxc

我在 Ubuntu 12.10 中使用了 lxc-start-ephemeral 实用程序。我注意到临时容器启动得非常快，但是在 ifconfig 显示其 eth0 接口的 IP 地址之前需要很长时间（约 20 秒）。我想尽可能地减少这种延迟。

根据[这篇文章](http://ubuntuforums.org/showthread.php?t=2103163)，延迟是由于 dhcp。我按照帖子中的建议编写了一个脚本，将容器的 /etc/network/interfaces 文件修改为如下所示：

```
auto lo
iface lo inet loopback

auto eth0
iface eth0 inet static
  address 10.0.3.$LXC_ADDRESS
  netmask 255.255.255.0 
```

现在，容器的 IP 地址马上就准备好了，并且`ssh ubuntu@10.0.3.$LXC_ADDRESS`工作正常。但是，容器无法连接到 Internet，例如`ping www.google.com`无法工作。

我需要做哪些额外的配置来纠正这个问题？

如果有帮助，这是来自 ifconfig 的容器当前 eth0 接口（带有`LXC_ADDRESS=131`）：

```
eth0      Link encap:Ethernet  HWaddr 00:16:3e:ed:ec:50  
          inet addr:10.0.3.131  Bcast:10.0.3.255  Mask:255.255.255.0
          inet6 addr: fe80::216:3eff:feed:ec50/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:42 errors:0 dropped:0 overruns:0 frame:0
          TX packets:34 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:6363 (6.3 KB)  TX bytes:5035 (5.0 KB) 
```

这是主机上似乎对应于容器的 veth 接口：

```
vethdzOk4n Link encap:Ethernet  HWaddr fe:dd:37:41:f2:06  
          inet6 addr: fe80::fcdd:37ff:fe41:f206/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:54 errors:0 dropped:0 overruns:0 frame:0
          TX packets:66 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:8179 (8.1 KB)  TX bytes:8067 (8.0 KB) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:51:38.640

你实际上可以（我假设）连接到互联网，你只是没有名称服务，因为你没有运行 dhcp，所以你没有得到 resolv.conf。

就放

名称服务器 10.0.3.1

进入容器中的 /etc/resolv.conf ，（或者只是从你的主机复制 resolv.conf ）。

（如果您的容器正在运行 resolvconf，您可能还需要将该行放入容器的 /etc/resolvconf/resolv.conf.d/head 中）

# php - 将许多记录聚合到第二个 mysql 表的每个结果中

> ID：15346824
> 
> 赞同：1
> 
> 时间：2013-03-11T19:22:21.477
> 
> 标签：php, mysql, join

我有一个“事件”表和“照片”表。每个事件在“照片”表中可能有零个或多个与其对应的记录。以下 sql 为每个事件提供了单独的结果。

如何将照片聚合到一个事件的单个字段中，以便每个结果都是一个唯一的事件，并且可以从 php 中的 $event['photos'] 之类的东西访问这些照片？

```
SELECT e.title, e.eid, p.pid
FROM events e
RIGHT JOIN photos p ON p.aeid = e.eid
WHERE e.dateTimeStart >= $start_date_time AND e.dateTimeStart <= $end_date_time 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:37:04.833

由于您使用的是 MySql，因此您可以选择使用[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)聚合函数：

```
SELECT e.title, e.eid, GROUP_CONCAT(p.pid) AS pids
FROM events e
LEFT JOIN photos p ON p.aeid = e.eid
WHERE e.dateTimeStart >= $start_date_time AND e.dateTimeStart <= $end_date_time
GROUP BY e.title, e.eid 
```

但是，请记住，在单个列中存储多个值违反了第一范式......因此，在使用该`GROUP_CONCAT`函数之前，请权衡您的其他问题......并且永远不要以这种形式*存储*您的数据。

另外，请注意`RIGHT JOIN`更改为`LEFT JOIN`... 这不仅是出于美观的原因，我认为这是您想要的功能，因为`events`它是必需的行，并且`photos`可以是`zero to many`.

# mysql - 默认情况下如何在 MySql 中对数据进行排序

> ID：15346829
> 
> 赞同：0
> 
> 时间：2013-03-11T19:22:44.600
> 
> 标签：mysql

如果我在 MySQL 数据库中有 1000 行，我知道使用`TOP`或`LIMIT`使查询更快，但我想知道，默认情况下数据是如何排序的？

以及如何使`order by time`or`username`默认情况下，以便使用`TOP`or`LIMIT`更容易和更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T19:27:30.740

**在 InnoDB**中，行按主键顺序存储。如果您使用`LIMIT`with no `ORDER BY`，您将始终获得具有最低主键值的行，即使您以随机顺序插入它们也是如此。

```
create table foo (id int primary key, x char(1), y int) engine=InnoDB;
insert into foo values (5, 'A', 123);
insert into foo values (9, 'B', 234);
insert into foo values (2, 'C', 345);
insert into foo values (4, 'D', 456);
insert into foo values (1, 'E', 567);
select * from foo;
+----+------+------+
| id | x    | y    |
+----+------+------+
|  1 | E    |  567 |
|  2 | C    |  345 |
|  4 | D    |  456 |
|  5 | A    |  123 |
|  9 | B    |  234 |
+----+------+------+ 
```

**在 MyISAM**中，行存储在任何适合的地方。最初，这意味着行被附加到数据文件中，但是当您删除行并插入新行时，删除行留下的空白将被新行重新使用。

```
create table bar (id int primary key, x char(1), y int) engine=MyISAM;
insert into bar values (1, 'A', 123);
insert into bar values (2, 'B', 234);
insert into bar values (3, 'C', 345);
insert into bar values (4, 'D', 456);
insert into bar values (5, 'E', 567);
select * from bar;
+----+------+------+
| id | x    | y    |
+----+------+------+
|  1 | A    |  123 |
|  2 | B    |  234 |
|  3 | C    |  345 |
|  4 | D    |  456 |
|  5 | E    |  567 |
+----+------+------+
delete from bar where id between 3 and 4;
insert into bar values (6, 'F', 678);
insert into bar values (7, 'G', 789);
insert into bar values (8, 'H', 890);
select * from bar;
+----+------+------+
| id | x    | y    |
+----+------+------+
|  1 | A    |  123 |
|  2 | B    |  234 |
|  7 | G    |  789 | <-- new row fills gap
|  6 | F    |  678 | <-- new row fills gap
|  5 | E    |  567 |
|  8 | H    |  890 | <-- new row appends at end
+----+------+------+ 
```

如果您使用 InnoDB，另一个例外情况是您从二级索引而不是从主索引检索行。当您在 EXPLAIN 输出中看到“使用索引”注释时，就会发生这种情况。

```
alter table foo add index (x);
select id, x from foo;
+----+------+
| id | x    |
+----+------+
|  5 | A    |
|  9 | B    |
|  2 | C    |
|  4 | D    |
|  1 | E    |
+----+------+ 
```

如果您有更复杂的连接查询，它会变得更加复杂，因为您将获得按访问的第一个表的默认顺序返回的行（其中“第一个”取决于优化器选择表的顺序），然​​后连接表中的行将取决于前一个表中行的顺序。

```
select straight_join foo.*, bar.* from bar join foo on bar.x=foo.x;
+----+------+------+----+------+------+
| id | x    | y    | id | x    | y    |
+----+------+------+----+------+------+
|  1 | E    |  567 |  5 | E    |  567 |
|  5 | A    |  123 |  1 | A    |  123 |
|  9 | B    |  234 |  2 | B    |  234 |
+----+------+------+----+------+------+

select straight_join foo.*, bar.* from foo join bar on bar.x=foo.x;
+----+------+------+----+------+------+
| id | x    | y    | id | x    | y    |
+----+------+------+----+------+------+
|  5 | A    |  123 |  1 | A    |  123 |
|  9 | B    |  234 |  2 | B    |  234 |
|  1 | E    |  567 |  5 | E    |  567 |
+----+------+------+----+------+------+ 
```

底线是最好是明确的：**当你使用时`LIMIT`，指定一个`ORDER BY`.**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:27:40.490

> 如何默认按时间或用户名下单，以便使用 TOP 或 LIMIT 更简单快捷？

使用*InnoDB*作为引擎时，可以设置一个索引（其中的列或集合）为主键。如果这些值是唯一的，则在存储时将按原样进行排序。

如果将常规索引用作查询条件的一部分，或者如果查询从所有行中获取数据，则可以使用常规索引来加快排序速度。如果您的标准使用除您正在排序的字段之外的其他索引，它们将无济于事。

## 例子

给定下表：

```
| username (Primary) | time (Index) | country | 
```

这些查询将具有使用索引的排序：

```
select * from users order by time #Will use the index

select * from users where time between X and Y order by time #Will also use the index 
```

Thise 不会（在大多数情况下......）使用索引进行排序：

```
select * from users where country = China order by time 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:24:37.607

它通常按照插入的顺序出现，但你不能依赖它。如果您需要特定的订单，请始终指定它。

将索引添加到“时间”和“用户名”以使​​其更快，并且只选择您需要的数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:25:18.183

“默认”顺序未指定（即不可靠）

将 ORDER BY 子句添加到选择以确保。

# javascript - 如果 Facebook 被网络禁止，则页面不会加载

> ID：15346831
> 
> 赞同：1
> 
> 时间：2013-03-11T19:23:01.710
> 
> 标签：javascript, facebook-javascript-sdk

我们的网站使用 Facebook 登录和普通登录。

Facebook 在我们大学的网络上被禁止使用。当我尝试在学校进入我们的网站时，它没有加载。在 Chrome 的网络选项卡中，它显示“待处理...”。

评论后编辑：

*   Facebook SDK 已经是异步的。但不像异步那样工作。
*   没有javascript错误。
*   不尝试使用 Facebook 登录。只是想进入一个包含 Facebook jssdk 的网站
*   “告诉你的政府来解决它”不是回复或解决方案。你知道Facebook在中国也被屏蔽了。如果它在那里也表现得这样，那真是太糟糕了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T21:48:20.263

> “告诉你的政府来解决它”不是回复或解决方案。

是的。

根据您的问题描述，

> 当我尝试在学校进入我们的网站时，它没有加载。在 Chrome 的网络选项卡中，它说“待定...”

听起来很像请求以超时的方式被阻止 - 因此嵌入了 SDK 的整个网站被阻止呈现......如果脚本嵌入`<head>`到文档中，就会发生这种情况。

因此，解决这个问题*将是*您的管理员的权力（和责任，有人可能会争辩）。以一种不会让请求超时的方式，但 fe 将其“重定向”到本地 Web 服务器，该服务器可以立即以 403 Forbidden 或 404 File Not Found 等响应，这样浏览器就不会等待（似乎) 无休止地下载永远不会发生的脚本资源。

> 你知道Facebook在中国也被屏蔽了。如果它在那里也表现得这样，那真是太糟糕了。

好吧，如果这就是他们遇到的所有问题，那真是太幸运了……我想我记得我读过 Facebook 在那里甚至没有那么受欢迎，但他们有自己的“自己的”本地社交网络……</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T18:06:57.977

这个问题让我想起了 Steve Sauders 的一次演讲。[http://www.youtube.com/watch?v=aHDNmTpqi7w](http://www.youtube.com/watch?v=aHDNmTpqi7w)

他指出了一些异步链接，它们可能看起来像异步但不一定是异步的。看看这个并重新检查你的html。希望这可以帮助您解决问题

# php - YII：从控制器向小部件传递数据？

> ID：15346841
> 
> 赞同：5
> 
> 时间：2013-03-11T19:23:34.037
> 
> 标签：php, yii

我有一个将数据传递给渲染函数的搜索页面：

```
public function actionIndex() {

  $this->render(
    'searchResults', 
    array(
      'dataProvider' => $dataProvider,
      'searchQuery'  => $searchQuery,
    )
  );
} 
```

问题是，我还需要将这些数据从这里传递到侧边栏中显示的小部件。该小部件当前显示在 layout/main.php 中，如下所示：

```
 <?php 
    $this->widget('searchSidebar', array(
      'id' => 'searchSidebar',
    )); 
 ?> 
```

我将如何将数据从控制器传递到这个widet，而不必再次重做查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T00:47:21.883

**dataProvider**已经包含了所有数据

```
$dataProvider->data
$dataProvider->getData() 
```

要将其放置在主布局中，您可以在控制器中创建另一个变量

```
class Controller extends CController
{
    public $data_exchange='';
    ...
} 
```

与您的主布局`$this->data_exchange`类似，在代码中的任何地方都可以轻松操作`breadcrumbs`

```
$this->widget('searchSidebar', array(
    'id' => 'searchSidebar',
    'data' => $this->data_exchange 
    /* where $this refer to any class which extends Controller */
)); 
```

在您的视图代码中，将您的数据定义为：

```
$this->data_exchange = $dataProvider->data 
```

# csv - 如何让 Jmeter 使用 CSV 文件而不是从第一行开始？

> ID：15346843
> 
> 赞同：0
> 
> 时间：2013-03-11T19:23:43.057
> 
> 标签：csv, jmeter

我以为我看到了这个，但找不到示例。

我有一个 CSV 文件，其中包含用于登录网站的用户名。这没有问题 - 每个线程/迭代都会读取每一行。但是，在第三个线程组中，有一个地方我称之为消息传递程序。我想使用相同的名称 - 这些是我的测试平台用户 - 但我不想发送给列表中的下一个用户，因此跳过用户登录。我想从 csv 文件的第一行读取这个特定的 HTTP 请求。这在 JMeter 中可行吗？

如果没有，我想我总是可以简单地创建另一个 csv 文件，但我想我会尝试一些以后可能具有更多可重用性的东西。

谢谢！

杰米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T10:24:30.077

据我所知和我所经历的，这是不可能的......

# asp.net-mvc-3 - 在 mvc3 应用程序中实现日志记录是否可以获得每个操作的签名？

> ID：15346845
> 
> 赞同：0
> 
> 时间：2013-03-11T19:23:47.600
> 
> 标签：asp.net-mvc-3, logging, exception-handling, controller

我有以下代码（如下），我可以获得控制器和操作。是否可以获得每个动作的签名？

```
public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (log.IsDebugEnabled)
            {
                var loggingWatch = Stopwatch.StartNew();
                filterContext.HttpContext.Items.Add(StopwatchKey, loggingWatch);

                var message = new StringBuilder();
                message.Append(string.Format("Executing controller: {0}, action: {1}, parameter: {2}",
                    filterContext.ActionDescriptor.ControllerDescriptor.ControllerName,
                    filterContext.ActionDescriptor.ActionName));

                log.Debug(message);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:08:57.973

要深入了解参数的实际值，您需要使用反射。要获取参数的名称及其类型，您可以使用`filterContext`.

```
foreach (var actionParameter in filterContext.ActionParameters)
{
    Trace.WriteLine(actionParameter.Key + ", " + actionParameter.Value);
} 
```

如果您无法使用`System.Diagnostics.StackTrace`.

例如：

```
foreach (var frame in new StackTrace().GetFrames())
{
    Trace.WriteLine(frame.GetMethod().Name);
} 
```

玩弄它，但它应该给你你需要的东西。

# tfs - 如何将文件从 TFS 直接读取到内存中（即不想从文件系统读取到内存中）？

> ID：15346851
> 
> 赞同：0
> 
> 时间：2013-03-11T19:24:06.697
> 
> 标签：tfs

如何将最新版本的文件从 TFS 加载到计算机内存中？我不想从 TFS 获取最新版本到磁盘上，然后将文件从磁盘加载到内存中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T04:27:01.423

能够使用这些方法解决：

VersionControlServer.GetItem 方法（字符串）
[http://msdn.microsoft.com/en-us/library/bb138919.aspx](http://msdn.microsoft.com/en-us/library/bb138919.aspx)

Item.DownloadFile 方法
[http://msdn.microsoft.com/en-us/library/ff734648.aspx](http://msdn.microsoft.com/en-us/library/ff734648.aspx)

完整方法：

```
private static byte[] GetFile(string tfsLocation, string fileLocation)
        {            
            // Get a reference to our Team Foundation Server.
            TfsTeamProjectCollection tpc = new TfsTeamProjectCollection(new Uri(tfsLocation));

            // Get a reference to Version Control.
            VersionControlServer versionControl = tpc.GetService<VersionControlServer>();

            // Listen for the Source Control events.
            versionControl.NonFatalError += OnNonFatalError;
            versionControl.Getting += OnGetting;
            versionControl.BeforeCheckinPendingChange += OnBeforeCheckinPendingChange;
            versionControl.NewPendingChange += OnNewPendingChange;           

            var item = versionControl.GetItem(fileLocation);
            using (var stm = item.DownloadFile())
            {
                return ReadFully(stm);
            }  
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T12:32:57.067

大多数时候，我想将内容作为（正确编码的）字符串获取，所以我采用了@morpheus 答案并对其进行了修改以执行此操作：

```
private static string GetFile(VersionControlServer vc, string fileLocation)
{
    var item = vc.GetItem(fileLocation);
    var encoding = Encoding.GetEncoding(item.Encoding);
    using (var stream = item.DownloadFile())
    {
        int size = (int)item.ContentLength;
        var bytes = new byte[size];
        stream.Read(bytes, 0, size);
        return encoding.GetString(bytes);
    }
} 
```

# java - JSF 传递要在另一个页面中显示的列表

> ID：15346852
> 
> 赞同：0
> 
> 时间：2013-03-11T19:24:09.420
> 
> 标签：java, jsf, primefaces, managed-bean

嗨，我是 JSF 的新手，我有点迷茫。这是我想做的。我有一个页面，我在其中显示一个节目列表，其中每个节目都有一个表示列表。我希望用户通过单击特定节目进入一个页面，该页面仅显示与节目的链接表示。这是我当前的 .xhtml 页面和我的两个托管 bean。他们现在所做的是显示所有节目和所有列表。

```
@Entity
@Table(name = "SHOW_SPECTACLE")
public class Spectacle implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    private Long id;

    @ElementCollection
    @CollectionTable(name = "T_TYPES_SPECTACLE")
    @Column(name = "TYPES_SPECTACLE")
    private List<String> typesSpectacle;

    @Column(name = "NOM_SPECTACLE")
    private String nomSpectacle;

    @Column(name = "DESCRIPTION")
    private String description;
    @Column(name = "LIEN_VIDEO")
    private String lienVideo; // type Blop
    @Column(name = "LIEN_IMAGE")
    private String lienImage;

    @OneToOne
    private Artiste artiste;
    @OneToMany(mappedBy = "spectacle")
    private List<Representation> representations;

}

public class Representation implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    private Long id;
    @Column(name = "NB_BILLETS_DISPO")
    private Integer nbBilletsDispo;
    @Column(name = "PRIX")
    private Float prix;
    @Column(name = "NOM")
    private String nom;
    @Column(name = "ADRESSE")
    private String adresse;
    @Column(name = "DATE_DEBUT")
    @Temporal(TemporalType.DATE)
    private Date dateDebut;
    @Column(name = "DATE_FIN")
    @Temporal(TemporalType.DATE)
    private Date dateFin;
    @Column(name = "IS_ANNULATION")
    private Boolean isAnnulation;

    @OneToOne(mappedBy = "representation")
    private Salle salle;

    @ManyToOne
    private Spectacle spectacle;

} 
```

显示所有节目的 xhtml 页面部分，我在其中使用了一些 primefaces 组件

```
<h:form id="form">  

        <p:dataGrid var="spec" value="#{menuCtrl.spectacles}" columns="3"  
                    rows="12" paginator="true"  
                    paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
                    rowsPerPageTemplate="9,12,15">  

            <p:panel header="#{spec.nomSpectacle}" style="text-align:center">

                <h:panelGrid columns="1" style="width:100%"> 
                    <ui:param name="imgPath" value="images:#{spec.artiste.lienPhoto}.png" />
                    <p:graphicImage value="#{resource[imgPath]}" />  

                    <h:outputText value="#{spec.description}" />  

<!--                        <p:commandLink update=":form:carDetail" oncomplete="carDialog.show()" title="View Detail">  
                            <h:outputText styleClass="ui-icon ui-icon-search" style="margin:0 auto;" />   
                            <f:setPropertyActionListener value="{spec}"   
                                                         target="{tableBean.selectedCar}" />  
                    </p:commandLink>  -->
                </h:panelGrid>  
            </p:panel>  

        </p:dataGrid> 
    </h:form> 
```

编辑这里是使用的bean

```
 @ManagedBean(name = "menuCtrl")
@ApplicationScoped
public class MenuControleur extends AbstractControleur implements Serializable {
private static final Logger log = Logger.getLogger(ApplicationControleur.class);

// cache
private List<Spectacle> spectacles;
private List<Representation> representations;
private List<Artiste> artistes;

private List<Representation> representationsFiltrees;

@PostConstruct
public void init() {
    // instanciation couche [métier]
    super.initStubsPresentation();

    this.spectacles = this.stubsDaoPresentation.getAllSpectacle();
    this.representations = this.stubsDaoPresentation.getAllRepresentation();
    this.artistes = this.stubsDaoPresentation.getAllArtistes(); 

    log.info("sonar source Spectacle 1: " + this.spectacles);
    log.info("sonar source Representation 1: " + this.representations);
    log.info("sonar source Artiste 1: " + this.artistes);
}    

public List<Representation> getRepresentationsFiltrees() {
    return representationsFiltrees;
}

public void setRepresentationsFiltrees(List<Representation> representationsFiltrees) {
    this.representationsFiltrees = representationsFiltrees;
}

public String doHomme(){
    return "eticket.index";
}

public String doCart(){
    return "eticket.pageCart";
}

public String doShow(){
    return "eticket.pageShows";
}

/**
 * Creates a new instance of MenuControleur
 */
public MenuControleur() {  }

public List<Spectacle> getSpectacles() {
    return spectacles;
}

public void setSpectacles(List<Spectacle> spectacles) {
    this.spectacles = spectacles;
}

public List<Representation> getRepresentations() {
    return representations;
}

public void setRepresentations(List<Representation> representations) {
    this.representations = representations;
}

public List<Artiste> getArtistes() {
    return artistes;
}

public void setArtistes(List<Artiste> artistes) {
    this.artistes = artistes;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T21:31:37.137

您可以添加一个

```
`<h:link value="Second Page" outcome="secondpage" >
    <f:param name="id" value="#{bean.id}" />
</h:link> 
```

`

或`<a href="secondpage.jsf?id=#{bean.id}">Second Page</a>`在您的第一页

您的第二页在 bean 中需要这样的东西

```
@ManagedBean("bean2")
public class SecondPageBean {

  @ManagedProperty(value = "#{param.id}")
  private String id;
  private String name;

  @PostConstruct    
  public String init() {
     // initialieMySecondPageBasedOnIdFromFirstPage(id);
  }
} 
```

您也可以在您的 secondpage xhtml 中执行此操作来替换`@ManagedProperty(value = "#{param.id}")`，

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.id}" />
</f:metadata> 
```

但是，如果您想在两个连续请求之间共享对象/状态，请查看 Flash 范围。

[了解 JSF2 中的 Flash Scope](https://stackoverflow.com/questions/11194112/understand-flash-scope-in-jsf2)

# eclipse - 如何更改 eclipse 的首选项以默认具有浅色背景和代码着色

> ID：15346861
> 
> 赞同：0
> 
> 时间：2013-03-11T19:24:51.993
> 
> 标签：eclipse, preferences

我想知道是否有解决方案将 eclipse 的首选项设置为默认值，因为我的 ia 朋友更改了我的 eclipse 的许多首选项，例如 java 代码颜色和背景等，我习惯了 eclipse 编辑窗口的普通颜色？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:30:08.900

尝试窗口->首选项->运行/调试。您可以在此处更改颜色，也可以在任何类别中设置默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:32:22.223

**Preferences -> General -> Appearence -> Colors and Fonts**可能会帮到你。有一个按钮可以重置相关编辑器：

![在此处输入图像描述](../Images/8d2faf39c9101c87f06a8f56e0944b76.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:34:09.483

这是关于您在 Eclipse 站点上的问题的详细说明。

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Faccessibility%2Ffontsandcolors.htm](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/concepts/accessibility/fontsandcolors.htm)

这是您要寻找的快速答案。Eclipse->Window->Preferences->General->Editors->Text Editors（前景色、背景色等外观颜色）

# windows - Windows 批处理脚本：将所有输出重定向到文件

> ID：15346863
> 
> 赞同：43
> 
> 时间：2013-03-11T19:24:53.283
> 
> 标签：windows, batch-file, dacapo

我正在运行各种 Java 基准测试并希望将结果存档。我像这样执行（dacapo）基准测试：

```
C:\VM\jre\bin\java  -jar C:\benchmarks\dacapo-9.12-bach.jar %arg1% > %time::=% 
```

我通过参数传递基准的类型，这就是 %arg1% 是什么。

您可以看到我将输出重定向到文本文件。不幸的是，输出的第一行和最后一行仍然打印在控制台中，而不是文本文件中：

```
===== DaCapo 9.12 luindex starting =====
===== DaCapo 9.12 luindex PASSED in 2000 msec ===== 
```

特别是最后一行在文本文件中很重要:)

有没有办法强迫这种行为？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-11T19:27:59.010

您必须重定向*STDOUT*和*STDERR*。

`command > logfile 2>&1`

*STDIN*是文件描述符#0，*STDOUT*是文件描述符#1，*STDERR*是文件描述符#2。
正如“command > file”将*STDOUT*重定向到文件一样，您也可以将任意文件描述符重定向到彼此。运算符在`>&`文件描述符之间重定向。因此，`2 >& 1`将所有*STDERR*输出重定向到*STDOUT*。

此外，请注意`2>&1`在指令的末尾添加，因为在 Windows 上，重定向的顺序很重要，因为`command 2>&1 > logfile`会产生一个空文件，正如 Dawid 在评论中添加的那样。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T19:27:50.523

将 2>&1 添加到您的命令中：

```
 C:\VM\jre\bin\java  -jar C:\benchmarks\dacapo-9.12-bach.jar %arg1% 2>&1 > %time::=% 
```

这会将 STDERR 重定向到 STDOUT，然后将其重定向到您的文本文件中。

# asp.net-mvc - ASP.Net MVC 控制器

> ID：15346875
> 
> 赞同：0
> 
> 时间：2013-03-11T19:25:34.710
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我在我的 MVC Web 应用程序中定义了 MVC 控制器。我在控制器中定义了 5 个不同的动作名称。所有动作都在做不同的事情。

我想要做的是在 global.asax 中定义一个通用的 MVC 路由，而不是 5 个不同的 MVC 路由。我在 global.asax 文件中定义的一条路线。

```
routes.MapRoute(
           "Action1/1", // Route name
           "xyz/check-data1", // URL with parameters
           new { controller = "CheckDate", action = "Check1" } // Parameter defaults
       ); 
```

我在这里需要 5 条不同的路线，因为这 5 条不同的路线在我的网页中将被称为 5 个超链接。

我不想在路线上方复制和粘贴并创建 5 条不同的路线。例如，我可以像下面这样定义另一条路线。

```
routes.MapRoute(
           "Action2/2", // Route name
           "xyz/check-data2", // URL with parameters
           new { controller = "CheckDate", action = "Check2" } // Parameter defaults
       ); 
```

请就此向我提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T20:41:36.557

典型的模式是标准化您的操作，以便它们可以使用默认路由：

```
/{Controller}/{Action}/{id?} 
```

如果您不打算使用标准操作，那么您别无选择，只能单独手动指定您的路线。

[但是，有一个名为AttributeRouting](http://attributerouting.net/)的 nuget 包，它允许您使用属性指定操作本身的路由。如果您要处理大量自定义路线，这通常更容易、更流畅。

# javascript - 如何处理容器和/或浏览器

> ID：15346879
> 
> 赞同：0
> 
> 时间：2013-03-11T19:25:44.223
> 
> 标签：javascript, .net, com, activex, ole

嗨，我在 .NET 中实现了简单的 COM 类型。它不是一个activeX 控件。这种类型是通过 javascript 使用 ActiveXObject("TypeName") 实例化的。

现在，在.NET 代码中，如何获取浏览器信息？请注意，COM 类型不是控件，否则 Control.GetContainer() 会给我我需要的东西。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:47:55.623

通过谷歌搜索找到了答案。

实现定义 SetSite() 和 GetSite() 方法的 IObjectWithSite 接口。创建 ActiveX 对象时，Web 浏览器调用 IObjectWithSite.SetSite() 并将句柄传递给站点。由用户代码来保留网站并根据需要使用它。

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/aa768220%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/aa768220%28v=vs.85%29.aspx)

# asp.net - 编译 ASP.NET 应用程序 - 网站与 Web 应用程序 - 具有指定 dll 名称的占位符 aspx 文件

> ID：15346881
> 
> 赞同：2
> 
> 时间：2013-03-11T19:25:46.967
> 
> 标签：asp.net, vb.net, visual-studio-2010, iis

一个 ASP.NET 应用程序是在 Visual Studio 之外开发的，它包含一个包含 ASP.NET 代码和 Visual Basic 代码的 aspx (pv.aspx) 文件。最初，我们使用[这种](http://msdn.microsoft.com/en-us/library/ms229863%28v=vs.80%29.aspx)方法编译了 aspx 文件。这创建了一个 aspx“占位符”文件，从而隐藏了文件中包含的所有 ASP 以及 vb 代码。但是，不理想的部分是 .dll 文件的命名（例如：“pv.aspx.cdcab7d2.compiled”）。

[然后，我尝试按照此](http://weblogs.asp.net/dotnetstories/archive/2011/08/21/compiling-and-deploying-asp-net-applications.aspx)人的解释在VS2010 内创建一个网站项目，但在这种情况下，VB 代码已正确编译，但 ASP.NET 代码未编译且仍然可见（即不是编译时的占位符文件使用 aspnet_compiler.exe)。

虽然这两个选项都有效并且应用程序在 IIS 中运行顺利，但这并不是客户想要的。我被指示做以下事情：

*   将 pv.aspx 编译为占位符文件，方法与 aspnet_compiler.exe 从命令行执行的方式相同
*   将 dll 文件编译为具有特定名称，例如 pv.dll

我在 StackOverflow 和其他网站上找到了可以做一件事或另一件事的信息，但不能两者兼而有之。甚至可能吗？如果没有，我如何设计这个 Web 应用程序，使 asp.net 代码和 vb 代码都看不到，但 dll 文件仍然具有指定的名称？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-24T17:42:36.520

您想要的第一个选项（编译为占位符）是[ASP.NET 编译器](http://msdn.microsoft.com/en-US/library/ms229863%28v=vs.100%29.aspx)的功能，特别是`-u`未设置标志。来自编译器的文件名是内部生成的，并且在很大程度上是不可配置的。编译器公开的关于命名的唯一选项是`-fixednames`，它将把每个页面和控件编译成一个自己的 DLL 文件；默认行为是在编译器认为合适时对它们进行批处理。您仍然无法控制命名。（如果您使用[ASP.NET 合并](http://msdn.microsoft.com/en-us/library/vstudio/bb397866%28v=vs.100%29.aspx)工具，它可以将多个 DLL 合并为一个，您将对 DLL 文件的名称进行一些控制。）

带有不需要的名称的 .compiled 文件不是 DLL 文件，并且是在加载每个页面时定位正确的程序集和入口点所必需的。从[ASP.NET 预编译期间的文件处理](http://msdn.microsoft.com/en-us/library/e22s60h9%28VS.85%29.aspx)：

> .compiled 文件
> 
> 对于 ASP.NET Web 应用程序中的可执行文件，编译器程序集和具有 .compiled 文件扩展名的文件。程序集名称由编译器生成。.compiled 文件不包含可执行代码。相反，它只包含 ASP.NET 查找适当程序集所需的信息。
> 
> 部署预编译的应用程序后，ASP.NET 使用 Bin 文件夹中的程序集来处理请求。预编译输出包括 .aspx 或 .asmx 文件作为页面的占位符。占位符文件不包含代码。它们的存在只是为了提供一种为特定页面请求调用 ASP.NET 的方法，以便可以设置文件权限以限制对页面的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T20:38:51.307

假设您使用的是 Visual Studio 2010，以发布模式发布 Web 应用程序将创建占位符文件。如果要设置一些条件编译选项，可以在 WebProject 属性的 build 选项卡下进行设置。至于为程序集设置固定名称，请参阅此页面：

[http://msdn.microsoft.com/en-us/library/bb398860.aspx#PreCompilingToFixedNameAssemblies](http://msdn.microsoft.com/en-us/library/bb398860.aspx#PreCompilingToFixedNameAssemblies)

寻找预编译到固定名称程序集，预编译到签名程序集

希望这可以帮助。

# laravel - Laravel 4 错误：未定义的方法关闭

> ID：15346882
> 
> 赞同：6
> 
> 时间：2013-03-11T19:25:52.803
> 
> 标签：laravel, laravel-4

帮助我是 laravel 的新手，我不知道如何解决这个错误：

```
FatalErrorException: Error: Call to undefined method Illuminate\Foundation\Application::shutdown() 
```

![在此处输入图像描述](../Images/70de64e08e46993eb7a85ae16bedc66d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T01:11:00.653

问题很可能是您正在使用来自 github 开发分支的 laravel 应用程序并使用 composer 安装系统的其余部分。问题是作曲家的文件已经有一个多月的历史了（4.0.0-beta3），而 git 的东西是最前沿的。

解决此问题的一种方法是将应用程序根目录中的 composer.json 文件从

```
 "require": {
            "laravel/framework": "4.0.*"
    }, 
```

至

```
 "require": {
            "laravel/framework": "4.0.*@dev"
    }, 
```

运行 composer update ，系统会从 Laravel 4 中下载最新最好的（也可能是损坏的）文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T10:11:11.767

您不应该取消任何注释，而是确保您正确设置了所有依赖项。关闭方法的存在是有原因的，取消注释该方法可能/将会产生后果。

相反，您可以按照以下步骤操作：

1.- 确保你的 PHP >= 5.3.7（如果你在 OSX 上我建议使用 brewed PHP）

安装指南：

[https://github.com/josgonzalez/homebrew-php](https://github.com/josegonzalez/homebrew-php)

2.- 确保您已安装 MCrypt。如果没有，您可以使用自制软件安装它

```
 brew search mcrypt
    brew install php53-mcrypt *OR* php54-mcrypt 
```

3.- 安装 laravel 的 dev 分支 & composer install it

```
 git clone -o framework -b develop https://github.com/laravel/laravel YourApp
    git checkout --orphan master
    git commit -m "First commit" 
```

4.- 更新您的应用程序

```
 git fetch framework
    git merge --squash -m "Upgrading the framework" framework/develop 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T03:55:25.893

只需注释掉公共目录中 index.php 文件的最后一行，即可快速修复。

// $app->shutdown();

# mongodb - mongodb mongorestore no --collection

> ID：15346890
> 
> 赞同：0
> 
> 时间：2013-03-11T19:26:15.750
> 
> 标签：mongodb, restore

我看不到任何带有集合名称的参数。

[http://docs.mongodb.org/manual/reference/mongorestore/](http://docs.mongodb.org/manual/reference/mongorestore/)上的教程 建议我使用

```
mongorestore --collection people --db accounts dump/accounts/ 
```

但它会导致错误。当我放下时`--collection`，一切都很好。

现在你会建议什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:46:45.083

手册页说该`mongorestore`选项是 now`-c`或`--c`代替`--collection`.

# android - 如何使用 Eclipse 创建自定义的 android 菜单屏幕布局？

> ID：15346892
> 
> 赞同：0
> 
> 时间：2013-03-11T19:26:23.980
> 
> 标签：android, android-layout

我试图看看是否有人有类似的问题，但没有运气。我一直在试图弄清楚如何构建这样的布局：

![我试图实现的带有布局的图像。](../Images/50f84e87310ec86c66b8882a1ada5219.png)

我尝试了几种不同的布局，最初我认为表格可能会起作用，因为它只是一个 2 列表格，左侧有 2 行表格，右侧有 2 x 2 行/列表格，但是`TableLayout`我无法正常工作想（我不知道如何添加列）。网格似乎让我很接近，但这似乎只有在我做一个完整的按钮网格而不是试图将屏幕分成图像中的部分时才有效。

有没有人有任何建议或可以为我指出正确的方向如何最好地实现这样的事情？

我没有足够的代表来发布解决方案，但这里有一个快速版本的代码，现在看起来类似于这个布局（只有按钮没有缩放，标题是图像）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainMenu" >

<ImageButton
    android:id="@+id/ImageButton03"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginRight="19dp"
    android:layout_marginTop="27dp"
    android:scaleType="fitCenter"
    android:src="@drawable/ic_launcher" />

<ImageButton
    android:id="@+id/ImageButton01"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/ImageButton03"
    android:layout_marginRight="108dp"
    android:layout_toLeftOf="@+id/ImageButton03"
    android:scaleType="fitCenter"
    android:src="@drawable/ic_launcher" />

<ImageButton
    android:id="@+id/ImageButton02"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/ImageButton01"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="29dp"
    android:scaleType="fitCenter"
    android:src="@drawable/ic_launcher" />

<ImageButton
    android:id="@+id/ImageButton04"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/ImageButton02"
    android:layout_toRightOf="@+id/ImageButton01"
    android:scaleType="fitCenter"
    android:src="@drawable/ic_launcher" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignTop="@+id/ImageButton01"
    android:layout_marginLeft="18dp"
    android:src="@drawable/ic_launcher" />

<ImageButton
    android:id="@+id/ImageButton05"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/imageView1"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="14dp"
    android:scaleType="fitCenter"
    android:src="@drawable/ic_launcher" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:38:23.657

这是我之前的设计方式，所以你想出来了：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="300dp"
    android:layout_height="match_parent"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1.0"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button2"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1.0"
            android:text="Button" />

        <Button
            android:id="@+id/button3"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1.0"
            android:text="Button" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1.0"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button5"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1.0"
            android:text="Button" />

        <Button
            android:id="@+id/button4"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1.0"
            android:text="Button" />

    </LinearLayout>

</LinearLayout>

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Button" /> 
```

# html - CSS：Mozilla浏览器中的文本位置不正确

> ID：15346893
> 
> 赞同：0
> 
> 时间：2013-03-11T19:26:25.083
> 
> 标签：html, css, positioning

我的问题是我的网站上有这些按钮项目 1、项目 2 等，现在框/按钮元素内的文本位置对于 Chrome 来说是正确的位置，但在 Firefox 上它们显示了一些问题并被放置在框上方的某个位置文本不正确可见。

有人可以帮助解决 CSS 或其他任何问题，以便我可以将文本放置在框元素内的正确位置。

```
<div class="contents grid_26 push_24">
            <ul class="ca-menu">
                <li>
                    <a href="#">

                        <div class="ca-content lft">
                            <h2 class="ca-main">Item 1<img src="images/image_1.png" width="22" height="22" class="arrow"></h2>

                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">

                        <div class="ca-content lft">
                            <h2 class="ca-main">Item 2<img src="images/image_1.png" width="22" height="22" class="arrow"></h2>

                        </div>
                    </a>
                </li>
                <li>
                    <a href="#">

                        <div class="ca-content lft">
                            <h2 class="ca-main">Item 3<img src="images/image_1.png" width="22" height="22" class="arrow1"></h2>

                        </div>
                    </a>
                </li>
</div> 
```

* * *

```
<style>
.ca-main{
font-size: 14px;
position: absolute;
top: -17px;
height: 80px;
width: 120px;
left: 70%;
margin-left: -88px;
opacity: 0.8;
text-align: center;
color: #fff;
text-transform: uppercase;
font-family: "Myriad Pro", "Trebuchet MS", sans-serif;
}

.container_24 .grid_26 {
margin-top: -20px;
}

.container_24 .push_24 {
 margin-left: 0px;
}

.ca-menu li a{
text-align: left;
width: 100%;
height: 100%;
display: block;
color: #333;
position: relative;

}

.ca-menu{
padding: 0 0 0 48px;
margin: 62px auto;
width: 1020px;
cursor: pointer;
}

.ca-menu li{
top: 28px;
left: -140px;
width: 140px;
height: 28px;
border: 3px solid #333;
overflow: hidden;
position: relative;
float:left;
background: #fff;
margin-left:-48px;

-webkit-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
-moz-box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
/* -webkit-border-radius: 125px; */
-moz-border-radius: 125px;
border-radius: 125px;
}

</style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:33:48.300

您在每个列表项上都有`position: relative;`with `left: -140px;`，它将它推到视口左侧（屏幕外）140px，因为没有其他元素设置了位置属性（在这种情况下它是相对于根`<html>`元素的）

您还没有清除浮动`<li>`元素，这就是为什么您的容器 div 没有高度的原因.. 浮动元素被从流中取出并被忽略，除非它们后面跟着一个`clear`设置了属性的元素..

**还** [可以考虑验证您的页面](http://validator.w3.org/)- 但我认为上述两个问题导致了您所说的问题。你真的需要学习好的 CSS 实践..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:29:50.487

首先是您的 html 上缺少 ul 结束标记。

那么您可能想在我们的样式上添加一个 CSS 重置。重置样式表的目的是减少浏览器在默认行高、页边距和标题字体大小等方面的不一致。

这是 CSS 工具上的链接[：重置 CSS](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:58:08.620

我建议你试试这个：

```
.ca-menu li a {
    text-align: left;
    width: 100%;
    height: 100%;
    display: inline-block;
    color: #333;
    position: relative;
} 
```

但是，要构建菜单，我建议您使用 Superfish。这是创建带有动画和完整浏览器兼容性的漂亮交互式菜单的最佳方式。

我什至会给你留下链接，让你更轻松：[https ://github.com/joeldBirch/superfish/](https://github.com/joeldbirch/superfish/)

相信我，这很棒。看看我做了什么：www.santz.net 和 santz.freeiz.com

我使用这个插件开发了两个菜单，它很棒。

希望我有所帮助，如有任何疑问，请通过此处或我的 Facebook 页面与我联系。

# javascript - Jquery：上下文菜单重置

> ID：15346895
> 
> 赞同：1
> 
> 时间：2013-03-11T19:26:27.310
> 
> 标签：javascript, jquery, contextmenu

嗨，我遇到了一些问题：http: [//jsfiddle.net/fNgXX/4/](http://jsfiddle.net/fNgXX/4/)

我想要什么：当用户双击单词时，根据文本，我将显示不同的 contextMenu。这里的第一个错误：

```
$('word').click( function(e) { 
```

我必须使用 .click 才能使其适用于双击。我不知道为什么。当我放 dblclick 时，我必须单击 4 次才能显示 contextMenu。

第二个问题（更重要）：当你双击：

```
<word>test</word> 
```

您会看到带有 Edit 的 contextMenu。但是在那之后，当您单击注释时，它应该显示一个 contextMenu Cut 但它没有，他仍然显示以前的 contextMenu。

所以我的问题是如何重置conextMenu？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:25:31.213

`contextMenu` **您有 2 个问题，首先您在实际创建它之前**调用该函数来创建它，这就是为什么最初您必须多次单击它（如果您安排它`.dblclick()`按预期正确工作）。此外，您遇到的另一个问题是您并没有真正覆盖 的`items`选项`contextMenu`，并且由于`contextMenu`已经存在，所有未来的调用都`word.contextMenu()`只是显示它，但没有覆盖现有的，我已将您的`changeWord`功能更改为：

```
changeWord = function(word){
    var item={};
    if (word.text() == 'test') {
        item['edit']={name: "Edit", icon: "edit"};
    } else {
        item['cut']= {name: "Cut", icon: "cut"} 
    }
    console.log(item);
    $.contextMenu( 'destroy', 'word' );
    $.contextMenu({
        selector: 'word',
        trigger: 'none',
        items: item
    }); 
    word.contextMenu();
} 
```

它按预期工作，你可以在**[这个更新的小提琴](http://jsfiddle.net/darkajax/csBjg/)**上看到它......

# php - magic_quotes_gpc vs stripslashes

> ID：15346896
> 
> 赞同：-1
> 
> 时间：2013-03-11T19:26:34.533
> 
> 标签：php, pdo

我有两种选择来存储我的 html 字符串：

1.  关闭`magic_quotes_gpc`并使用 PDO 直接存储。
2.  打开`magic_quotes_gpc`并让我的 html 字符串使用 PDO 与斜杠一起存储。然后，使用函数转换这些斜线`stripslashes();`

我需要知道这两种选择的优缺点，你推荐哪一种？我猜第一选择存在安全威胁。并用第二种选择加载到服务器上，但我需要知道专家怎么说。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:28:10.953

[魔术行情已弃用](http://php.net/manual/en/security.magicquotes.php)。不要使用它们。请改用 PDO 和[准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)。

附带说明一下，在这种情况下，您不应致电*专家。*如果 PHP 官方文档在一个大红框中*说不要使用这个特性*，那就没有问题了。

![在此处输入图像描述](../Images/1052e8a79b7f34e1c867b9b6ef303fbf.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:38:07.257

我所做的是像这样使用 PDO：

```
$stmt = $db->prepare('INSERT INTO table (firstname, lastname) VALUES (:firstname,:lastname)');
$stmt->bindParam(':firstname', $firstname, PDO::PARAM_STR);
$stmt->bindParam(':lastname', $lastname, PDO::PARAM_STR);
$stmt->execute(); 
```

希望能帮助到你。

# asp.net-mvc - 如何在编辑器模板中确定模型数组索引

> ID：15346904
> 
> 赞同：4
> 
> 时间：2013-03-11T19:26:56.563
> 
> 标签：asp.net-mvc, razor

我的视图模型包含一个项目列表，如下所示：

```
public class MyViewModel
{
    public List<Item> Items { get; set; }
}

public class Item
{
   public string Question { get; set; }
   public string Answer { get; set; }
} 
```

我的视图使用编辑器模板来呈现所有项目。

```
@model MyApp.Models.MyViewModel
@using (Html.BeginForm()) {
    @* Display all of the questions and answers *@
    @Html.EditorFor(m => m.Items)
} 
```

并且 Item.cshtml 编辑器模板呈现每个问题及其相关答案的编辑器：

```
@model MyApp.Models.Item
@Html.TextBoxFor(m => m.Question)
@Html.EditorFor(m => m.Answer) 
```

在呈现的 HTML 中，EditorFor 魔术生成元素名称，其中包含映射到我的模型层次结构的数组表示法，例如：

```
<input name="Items[0].Answer" 
```

**我的问题是：**我想渲染一个`<div>`元素，其 id 在括号中包含相同的数组索引值，如下所示：

```
<div id="Items[0].something">
  <something />
</div> 
```

Item.cshtml 是否有一种简单的方法来制作 id 值，包括正确的括号表示法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-11T19:41:42.633

您可以在 MVC 4 中使用 NameFor 扩展：

```
<div id="@Html.NameFor(m => m.Comment)"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-11T19:31:48.150

当我进行写问题的练习时，我想出了答案。只要我花了 20 分钟写下这个问题，我想我不妨分享一下答案，以防其他人也想做同样的事情。

要制造一个包含映射到视图模型的前缀的名称：

```
<div id="@ViewData.TemplateInfo.GetFullHtmlFieldName("something")">
    @Html.EditorFor(m => m.Comment)
</div> 
```

# version-control - 从存储库中删除文件的 CVS 错误：修订版 xx 已被 root 锁定

> ID：15346905
> 
> 赞同：0
> 
> 时间：2013-03-11T19:26:59.403
> 
> 标签：version-control, cvs

当我尝试提交文件时，`lib/foo/bar.jar`我回来了

```
Removing lib/foo/bar.jar;
cvs [commit aborted]: Revision 1.6 is already locked by root 
```

当我浏览存储库时，我看到所有`lib/foo`以 *.v 结尾的文件，除了`bar.jar`. 有一个`bar.jar` ***和***一个`bar.jar.v`。

**关于如何解决这个问题的任何想法？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:02:12.567

我们的 CVS 管理员以 root 身份重新提交了该文件。这将其解锁并允许我将其删除。

# jquery - jQuery - 悬停不工作

> ID：15346907
> 
> 赞同：8
> 
> 时间：2013-03-11T19:27:02.333
> 
> 标签：jquery, html

有点麻烦`.hover()`

我正在抓取一些运球镜头，这些镜头在页面加载时被拉入。由于某种原因，通过悬停添加一个类不想对它们起作用。

尽管它与标准列表一起工作得很好。

[jsFiddle在这里](http://jsfiddle.net/HX2NM/1/)

**JS：**

```
$("#dribbble li").hover(

function () {
    $(this).addClass("hover");
},

function () {
    $(this).removeClass("hover");
}); 
```

**HTML**

```
<div id="dribbble">
<ul>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T19:40:16.120

使用委托 - 我猜你的元素没有被绑定，因为它们在绑定时在 dom 中不可用

```
$("#dribbble").on({
    mouseenter: function () {
       $(this).addClass("hover");
    },
    mouseleave:function () {
       $(this).removeClass("hover");
    }
},'li'); 
```

此外，如果您希望它优先于其他样式，您必须更具体地使用您的 css

```
#dribbble li.hover {
    background-color:aqua;
} 
```

[小提琴](http://jsfiddle.net/8hyjD/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-11T19:40:56.993

您需要将事件处理程序附加到已经存在的元素。当您创建 li 元素时，您必须绑定到父元素，然后过滤到您需要的元素（如果正确完成，这实际上是可取的）。

尝试：

```
$("#dribbble").on('mouseenter','li',function () {
    $(this).addClass("hover");
});

$("#dribbble").on('mouseleave','li',function () {
    $(this).removeClass("hover");
}); 
```

# python - 如何使用 tun/tap python 模块 (pytun) 创建 p2p 隧道？

> ID：15346908
> 
> 赞同：2
> 
> 时间：2013-03-11T19:27:05.157
> 
> 标签：python, networking

我需要制作一个简单的 p2p vpn 应用程序，经过大量搜索后，我找到了一个名为 PYTUN 的 python tun/tap 模块，用于制作隧道。如何使用此模块在 2 个远程对等方之间创建隧道？

所有附加的文档仅显示如何在本地计算机上制作隧道接口并对其进行配置，但没有提及如何将其连接到远程对等方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T17:40:30.150

pytun 是不够的。它用于将您的 Python 应用程序连接到系统网络接口。实际上，您将负责实现该系统网络接口。

如果您希望通过该网络接口路由的流量通过实际网络，那么 Python 程序的工作就是执行将数据从主机 A 移动到主机 B 的实际网络操作。

这可能需要很多工作才能做好。我建议您改用现有的 VPN 工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T08:41:17.910

以防万一有人通过谷歌找到这个老问题：看看[python-pytun](https://pypi.python.org/pypi/python-pytun/2.2.1) (repository [here](https://github.com/montag451/pytun/blob/master/) )。有一些示例脚本展示了如何实现简单的 IP 和以太网隧道。

基本思想是在两个站点之间建立 TCP 连接（通过通常的套接字 API 访问）；此外，通信双方创建一个 TUN 或 TAP 接口。

每个主机运行一个循环，从套接字和 TUN/TAP 接口读取数据（数据包），并将每个数据包写入另一个设备。这是您可以在隧道中添加加密的地方...

让我添加一个**警告**：虽然编写自己的 VPN 隧道应用程序可能很有趣，但如果您打算将隧道用于任何其他用途，我强烈建议您使用现有的隧道应用程序或堆栈（OpenVPN、IPSec...）一个有趣的项目：即使对于专家来说，也很难正确地获得加密和协议的东西——而对于非专家来说几乎是不可能的。

# ruby - Rakefile autoconf 等效项

> ID：15346909
> 
> 赞同：1
> 
> 时间：2013-03-11T19:27:05.593
> 
> 标签：ruby, makefile, rake, rakefile

我打算使用 rake 来替换我现有的 Makefile 设置；虽然构建一切都很好，但是否有相当于 autoconf 的 ./configure 脚本？

如果已经有东西了，我不想开始自己滚动，但我从搜索中看不到任何东西。

这是为了测试系统头文件等，以确保所构建的系统是合适的，正确的路径是已知的，等等。我可以毫无问题地处理 --with-ssl 样式选项，就像我追求的 stdbool.h 一样。我在 BSD 和 Linux 上构建，显然有一些差异......

# javascript - 如何检查 Google 站点是否存在？

> ID：15346910
> 
> 赞同：0
> 
> 时间：2013-03-11T19:27:09.397
> 
> 标签：javascript, google-apps-script, google-sites

有谁知道如何检查 Google 网站是否存在？

我正在尝试使用`var site = SitesApp.createSite(domain, siteName, name, summary);`来创建一个新站点。但是，如果站点（读取 URL）已经存在，则会引发错误。

然后我尝试使用它`var test = SitesApp.getSiteByUrl('https://sites.google.com/a/' + domain + '/' + siteName);`来检查该站点是否存在，但如果它不存在则会抛出错误。

我想要的最终结果是：

1.  检查站点是否存在。
2.  如果存在，修改站点名称（即添加'1'）到它的末尾，并再次检查。
3.  创建站点

我有两个可能的解决方案，但我对其中任何一个都不感兴趣。它们都将在一个 while 循环中运行，该循环将一直持续到找到一个不存在的 url。

**解决方案 1** 使用 try/catch 运行`SitesApp.getSiteByUrl()`.

**解决方案 2** 使用 try/catch 和`UrlFetchApp.fetch(url).getResponseCode()`. 检查它是否返回“200 OK”。如果没有，请尝试使用从标头获取位置`getHeaders()`，然后将其解析为“WebspaceNotFound”。不幸的是，我不能单独依赖响应代码，因为一个不存在的站点和一个需要您登录的站点都报告为“302 临时移动”。

有一个简单的解决方法吗？我的任何一个解决方案听起来都比另一个更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:44:23.527

因为您可以获得域中所有站点的列表，所以您可以执行以下操作：

```
function siteExists(domain, siteName) {
  var sites = SitesApp.getSites(domain);
  sites.forEach(function(n, i, a){a[i] = n.getName()});

  if(~sites.indexOf(siteName)) return true;
  else return false;
} 
```

请注意，如果您有很多站点，则可能需要进行多次 getSites 调用。另外，我不知道当您无法访问所有站点时这将如何工作，因为我是从管理员帐户进行测试的。希望它会为您指明正确的方向。

# android - 当类从 android 中的 LuminanceSource 扩展时找不到类

> ID：15346911
> 
> 赞同：2
> 
> 时间：2013-03-11T19:27:10.047
> 
> 标签：android, zxing

我想使用 zxing 库解码已经保存的条形码图像。

添加了名为“core.jar”的外部 jar

创建类 MyLuminaceSource，它是 LuminanceSource 的子类。使用这个类来创建 Reader。

```
MyLuminaceSource myRGB = new MyLuminaceSource (barcodeImage);
BinaryBitmap bitmap = new BinaryBitmap(new HybridBinarizer(myRGB));
Reader reader = new MultiFormatReader();
Result result = reader.decode(bitmap);
String resulText =  result.getText(); 
```

但是当我在设备上运行应用程序时，logcat 中会显示以下错误：

**“找不到类 'com.....MyLuminaceSource'，引用自方法 com....MainActivity.decode”**

执行上述代码时也会引发运行时异常。

**java.lang.NoClassDefFoundError**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:16:24.933

这可以通过在“订单和导出”选项卡中启用外部 jar 的检查来解决。

![在此处输入图像描述](../Images/744d6735922df31109e16730c00320f5.png)

# javascript - 将 tinyMCE 添加到多个动态创建的文本区域

> ID：15346913
> 
> 赞同：0
> 
> 时间：2013-03-11T19:27:20.007
> 
> 标签：javascript, jquery, html

我有一个动态创建的文本区域列表，其中包含内容。下面是我如何检索数据并动态创建文本区域。

```
$(document).ready(function(){

$('#btn').click(function(){
    var fullurl = $('#hiddenurl').val();
    var str = $('#email').val();
    $.post(fullurl, {
        sendValue : str
    }, function(data) {
        var table_output = '<table><thead><tr><th>Name</th><th>Email</th></tr></thead>';
    $.each(data, function(i, d) {
        table_output += '<tr><td>'+d.Name+'</td><td>'+d.Email+'</td></tr>';
        output += '<tr><td colspan="2"><textarea name="description" id="desc_'+d.ID+'" class="desc">'+d.Description+'</textarea></td></tr>';            

        tinyMCE.init({
            mode : "exact",
            elements : 'desc_'+d.ID,
            theme_advanced_buttons1 : "mylistbox,mysplitbutton,bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link,unlink",
            theme_advanced_buttons2 : "",
            theme_advanced_buttons3 : "",
            theme_advanced_toolbar_location : "top",
            theme_advanced_toolbar_align : "left",
            theme_advanced_statusbar_location : "bottom"
        });

    });
 table_output += '</table>';
 $('#task_data_div').append(table_output); 
```

我尝试如上所示实现 tinyMCE，但它似乎不起作用。任何人都可以在这里帮助我，也许可以为我指明正确的方向。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:56:35.613

为了简单起见，我不得不考虑您的 Ajax 调用，但我的`#btn`点击处理程序将透明地放入您的成功处理程序。

演示（jsfiddle） [http://jsfiddle.net/C59EW/](http://jsfiddle.net/C59EW/)

HTML

```
<button id="btn">button</button>
<div id="show_data"></div> 
```

Javascript (+jQuery, +tinyMCE)

```
$(document).ready( function() {
    var data = [{ID:"1",Description:"text 1"}, {ID:"2",Description:"text 2"}];

    $('#btn').click( function() {
        $.each( data, function(i, d) {
            $('#show_data').append('<textarea name="description" id="desc_'+d.ID+'" class="desc">'+d.Description+'</textarea>');
            tinyMCE.init({
                mode : "exact",
                elements : 'desc_'+d.ID,
                theme_advanced_buttons1 : "mylistbox,mysplitbutton,bold,italic,underline,separator,strikethrough,justifyleft,justifycenter,justifyright,justifyfull,bullist,numlist,undo,redo,link,unlink",
                theme_advanced_buttons2 : "",
                theme_advanced_buttons3 : "",
                theme_advanced_toolbar_location : "top",
                theme_advanced_toolbar_align : "left",
                theme_advanced_statusbar_location : "bottom"
            });
        });
    });

}); 
```

# php - 读取 XML 文件，同时将其写入 PHP

> ID：15346914
> 
> 赞同：0
> 
> 时间：2013-03-11T19:27:21.523
> 
> 标签：php, xml, xmlreader, xmlwriter

即使文件损坏，有没有办法读取 XML 文件？

我正在尝试获取一个 XML 文件，同时将文件写入其中并输出它，但由于根元素未关闭，因为它正在写入中间，所以我收到了一个错误错误。

无论如何如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:34:35.757

```
$broken ='<root>
     <item>foo</item>';

$d  = new DOMDocument();
$d->loadXML($broken);
echo $d->saveXML($d); // useless, only prologue
$d->recover = true; // <--  it's limited, but will try its best.
$d->loadXML($broken);
echo $d->saveXML($d);
/*
 * <?xml version="1.0" encoding="UTF-8"?>
 * <root>
 * <item>foo</item></root>
 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:34:59.173

要么使用文件锁定，要么让你的写入原子化，这样其他进程就看不到半写的文件。有关这两种方法的代码，请参阅[此答案](https://stackoverflow.com/a/14300539/1002469)的中间部分。

您还可以通过为您处理并发并为您提供一致的读取和写入的东西（即数据库）来调解您的写入。它不必是一个成熟的独立过程——您可以使用 sqlite 或简单[的键值存储](http://www.php.net/manual/en/book.dba.php)。

# image - 如何使用 mupdf 为 pdf 文件生成 8 位索引 png

> ID：15346920
> 
> 赞同：1
> 
> 时间：2013-03-11T19:27:39.453
> 
> 标签：image, pdf, png, mupdf

背景：我一直在使用各种工具来从 pdf 生成图像，包括 graphicsmagick、ghostscript 和现在的 mupdf（我没有尝试过 poppler，但我现在将它用于其他事情）。mupdf 似乎可以生成高质量的图像，并且我的快速测试中的性能似乎比 graphicsmagick 更好。直接调用 ghostscript 被淘汰了，因为质量在我的测试中没有达到标准（没有给出疯狂的 r 值并放大大小），当我添加 -dINTERPOLATE 标志以提高质量时，它开始在我的一些测试中崩溃案例（删除修复它的标志）。目前，mupdf 似乎最适合我的目标场景

问题：mupdf 似乎生成 24 位 png 文件，但对于我正在使用的文件，我想使用 8 位索引并节省文件大小。我尝试使用 pngquant 之类的工具转换为 8 位，对于我的文档，图像质量没有明显不同，文件大小要小得多。似乎 mupdf 将能够输出 8 位，并为我节省了生成后转换的性能。有国旗吗？我目前正在使用 mudraw，但如果必须，我可以编辑实用程序源并为我的目的构建（因为我在该工具命令行上找不到标志）。

谢谢李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T11:27:27.637

8 位量化颜色看起来很可怕！如果您想要 8 位以节省空间并保持高质量，请使用`mudraw -g`.

# ios - iOS vfr阅读器框架无法使用下载的pdf

> ID：15346927
> 
> 赞同：0
> 
> 时间：2013-03-11T19:27:53.677
> 
> 标签：ios, vfr-reader

我在寻找在应用程序中显示 pdf 的更好替代方案时发现了 vfr 阅读器框架。在我的上下文中，我需要下载一个 pdf；它尚未包含在应用程序包中。将 vfr 框架与嵌入式 pdf 一起使用很容易，但到目前为止，我一直很难让它处理我写入文件的下载数据，然后用它的路径初始化 ReaderDocument。我能够将同一个文件加载到 UIWebView 中没问题，所以我不相信这是数据。这是代码：

```
NSString *fullPathToPDF = [[[self appDelegate] urlForFileUnderRecursiveDocWithName:self.pdfName andOptionallyStartingAtDirectory:[[self appDelegate] pathURLForImagesDirectory]] path];
        ReaderDocument *pdfDoc = [ReaderDocument withDocumentFilePath:fullPathToPDF password:nil]; 
```

生成的 pdfDoc 要么为空，要么像上面那样传递完整路径时，会因 ReaderDocument 的第 229 行的断言而崩溃

```
NSAssert(NO, @"CGPDFDocumentRef == NULL"); 
```

因为（我在做一个合理的假设）这条线（217；同一个班级）：

```
CGPDFDocumentRef thePDFDocRef = CGPDFDocumentCreateX(docURLRef, _password); 
```

无法创建 CGPDFDocumentRef。我之前提到过传递完整路径与仅传递文件名之间的区别，这是因为在查看代码时，ReaderDocument 类似乎对它期望在哪里找到文件做出了一些假设。无论我将文件保存到哪里，或者传递给它的内容是 ...withDocumentFilePath 方法，我都无法让它工作。

重申一下，我可以使用完全相同的文件并在 UIWebView 中打开它没问题。

那么，任何人都有同样的问题，或者，能够成功地做我正在尝试的事情？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-31T20:14:24.433

很抱歉这么晚才回答这个问题。我自己也遇到了这个问题，所以我想我会传递我的智慧。

我的猜测是您正在将 PDF 下载到临时目录。这个框架正在寻找 NSDocumentDirectory 中的文件。因此，当您保存下载的文件时，只需保存到如下路径：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *baseDocumentPath = [paths objectAtIndex:0];
NSString *filePath = [baseDocumentPath stringByAppendingPathComponent:@"/temp.pdf"]; 
```

一旦你这样做，它将正确加载。

ps 如果我最终修改 ReaderDocument 以允许临时目录，我将在此处发布编辑。

# c++ - C++ 到 vb.net TCHAR 数组使用转换

> ID：15346933
> 
> 赞同：1
> 
> 时间：2013-03-11T19:28:18.680
> 
> 标签：c++, arrays, vb.net, tchar

我不是 c++ 程序员，我需要将此 c++ 代码转换为 vb.net：

```
int iRC = 0;            
TCHAR ptcTemp[20];
_itot_s(iRC, ptcTemp, sizeof(ptcTemp), 10); 
```

我不太明白，我只知道这是从 Int 到 TCHAR 数组的转换。

我想知道如果

```
Dim ptcTemp As String = iRC.ToString() 
```

会工作还是我会错过什么？

任何帮助都将不胜感激！谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:51:58.143

_itot_s = 整数到 t 安全

*   我整数
*   至
*   t，输入 t，这是因为 C++ 可以有 ASCII 或 UNICODE，这个源代码可以编译为任何一个。
*   s security/safe 版本，该函数有 2 个参数用于缓冲区，缓冲区及其长度，因此该函数可以防止缓冲区过载。

10 是这样的字符串是十进制，其他流行的选项是 2 二进制，8 八进制，16 十六进制。

你正在做的事情会正常工作。

# gcc - cygwin 上的 cppcms，尝试编译时生成错误

> ID：15346937
> 
> 赞同：0
> 
> 时间：2013-03-11T19:28:32.750
> 
> 标签：gcc, cygwin, cppcms

cp:

```
#include <cppcms/application.h>
#include <cppcms/applications_pool.h>
#include <cppcms/service.h>
#include <cppcms/http_response.h>
#include <iostream>

class my_hello_world : public cppcms::application {
public:
    my_hello_world(cppcms::service &srv) :
        cppcms::application(srv)
    {
    }
    virtual void main(std::string url);
};

void my_hello_world::main(std::string /*url*/)
{
    response().out()<<
        "<html>\n"
        "<body>\n"
        "  <h1>Hello World</h1>\n"
        "</body>\n"
        "</html>\n";
}

int main(int argc,char ** argv)
{
    try {
        cppcms::service srv(argc,argv);
        srv.applications_pool().mount(cppcms::applications_factory<my_hello_world>());
        srv.run();
    }
    catch(std::exception const &e) {
        std::cerr<<e.what()<<std::endl;
    }
}
/* End of code */ 
```

## 生成文件：

```
LIBS=-l/home/C5021090/cppcms/cppcms -l/home/C5021090/cppcms/booster

all: hello

hello: hello.cpp
$(CXX) -O2 -Wall -g hello.cpp -o hello ${LIBS}

clean:
rm -fr hello hello.exe cppcms_rundir 
```

* * *

当我尝试在 cygwin 上编译时，出现以下错误：

```
$ make
g++ -O2 -Wall -g hello.cpp -o hello -l/home/C5021090/cppcms/cppcms -l/home/C5021090/cppcms/booster
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -l/home/C5021090/cppcms/cppcms
/usr/lib/gcc/i686-pc-cygwin/4.5.3/../../../../i686-pc-cygwin/bin/ld: cannot find -l/home/C5021090/cppcms/booster
collect2: ld returned 1 exit status
Makefile:7: recipe for target `hello' failed
make: *** [hello] Error 1 
```

同样的事情在 Ubuntu linux 上运行良好，我不太确定 Cygwin，我猜这是由于相应的 dll 文件，但我没有在任何地方找到它，感谢您的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:57:48.133

看起来您的两个库尚未构建；`cppcms`和`booster`。*在 Cygwin 中*构建它们，你应该准备好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T11:20:00.730

> LIBS=-l/home/C5021090/cppcms/cppcms -l/home/C5021090/cppcms/booster

这不是 -l 标志的工作方式。你给 -l 库的*名称*：

```
LIBS=-lcppcms -lbooster 
```

链接器将查找名为 libcppcms.a 和 libbooster.a 的文件

要告诉链接器在哪里可以找到这些文件，请使用 -L 选项：

```
LDFLAGS=-L/home/C5021090/cppcms 
```

和这样的链接步骤：

```
hello: hello.cpp
        $(CXX) -O2 -Wall -g ${LDFLAGS} hello.cpp -o hello ${LIBS} 
```

# jquery - 将 HoverIntent 添加到 jQuery UI 选项卡

> ID：15346939
> 
> 赞同：1
> 
> 时间：2013-03-11T19:28:40.483
> 
> 标签：jquery, html, jquery-ui, hoverintent

我正在尝试将 HoverIntent 添加到 jQuery 选项卡。但是它不起作用，我的代码如下。有小费吗？谢谢你。

代码直接取自 jQuery UI 网站。（不起作用）

**来源：http: [//jqueryui.com/accordion/#hoverintent](http://jqueryui.com/accordion/#hoverintent)**

**演示：http: [//jsfiddle.net/Ch7sL/](http://jsfiddle.net/Ch7sL/)**

-- JS --

```
$( "#tabs" ).tabs({
      event: "click hoverintent"
    });

var cfg = ($.hoverintent = {
    sensitivity: 7,
    interval: 100
  });

  $.event.special.hoverintent = {
    setup: function() {
      $( this ).bind( "mouseover", jQuery.event.special.hoverintent.handler );
    },
    teardown: function() {
      $( this ).unbind( "mouseover", jQuery.event.special.hoverintent.handler );
    },
    handler: function( event ) {
      var that = this,
        args = arguments,
        target = $( event.target ),
        cX, cY, pX, pY;

      function track( event ) {
        cX = event.pageX;
        cY = event.pageY;
      };
      pX = event.pageX;
      pY = event.pageY;
      function clear() {
        target
          .unbind( "mousemove", track )
          .unbind( "mouseout", arguments.callee );
        clearTimeout( timeout );
      }
      function handler() {
        if ( ( Math.abs( pX - cX ) + Math.abs( pY - cY ) ) < cfg.sensitivity ) {
          clear();
          event.type = "hoverintent";
          event.originalEvent = {};
          jQuery.event.handle.apply( that, args );
        } else {
          pX = cX;
          pY = cY;
          timeout = setTimeout( handler, cfg.interval );
        }
      }
      var timeout = setTimeout( handler, cfg.interval );
      target.mousemove( track ).mouseout( clear );
      return true;
    }
  }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:11:31.040

需要调用 javascript **onDomready**而不是 onLoad。并在 jQuery 之后添加**jQuery Migrate**以使**HoverIntent**正常工作。

**更新代码：**

```
$(function() {
$( "#tabs" ).tabs({
event: "click hoverintent"
});
});
var cfg = ($.hoverintent = {
sensitivity: 7,
interval: 100
});
$.event.special.hoverintent = {
setup: function() {
$( this ).bind( "mouseover", jQuery.event.special.hoverintent.handler );
},
teardown: function() {
$( this ).unbind( "mouseover", jQuery.event.special.hoverintent.handler );
},
handler: function( event ) {
var that = this,
args = arguments,
target = $( event.target ),
cX, cY, pX, pY;
function track( event ) {
cX = event.pageX;
cY = event.pageY;
};
pX = event.pageX;
pY = event.pageY;
function clear() {
target
.unbind( "mousemove", track )
.unbind( "mouseout", arguments.callee );
clearTimeout( timeout );
}
function handler() {
if ( ( Math.abs( pX - cX ) + Math.abs( pY - cY ) ) < cfg.sensitivity ) {
clear();
event.type = "hoverintent";
event.originalEvent = {};
jQuery.event.handle.apply( that, args );
} else {
pX = cX;
pY = cY;
timeout = setTimeout( handler, cfg.interval );
}
}
var timeout = setTimeout( handler, cfg.interval );
target.mousemove( track ).mouseout( clear );
return true;
}
}; 
```

**更新 jsFiddle：http: [//jsfiddle.net/uPWLn/](http://jsfiddle.net/uPWLn/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-20T22:44:58.597

由于 JQuery 1.9.1 和当前版本 (3.5.1) 的更改，此线程很旧，并且不推荐使用提供的代码。

虽然网上还有其他一些`jquery-hoverintent`讨论，例如

[StackOverflow][延迟 jquery 悬停事件？](https://stackoverflow.com/questions/435732/delay-jquery-hover-event)

...这个线程很好，因为它直接解决了 Ajax 和 JQuery`.tabs()`生态系统，这里带有`hoverIntent.js`.

我想让这种方法/代码适用于我的项目，所以我将 @eric-goncalves[优秀的 JSFiddle](https://stackoverflow.com/a/15347679/1904943)（其他答案，here）转储到 HTML 文件中并对其进行调试。

作为一个 Javascript 新手，我不确定这段代码是否是 JQuery ui-tab 延迟加载的最佳当前方法（再次注意上面链接的备受赞誉的 StackOverflow 讨论）。

由于嵌入到该代码中的特定应用程序以及缺少工作副本，我无法实现该示例，从而混淆了它的泛化。

但是我能够实现 Eric Goncalves 的代码，我在下面提供了一个完整的工作副本。:-)

*   JSFiddle：[https ://jsfiddle.net/mvo6n9tc/1/](https://jsfiddle.net/mvo6n9tc/1/)

* * *

```
<!DOCTYPE html>
<html encoding="UTF-8" charset="UTF-8" lang="en-US" language="English" xmlns="https://www.w3.org/1999/xhtml/" itemtype="http://schema.org/WebPage">

<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=0.1">
<link rel="shortcut icon" href="#">

<title>Adding hoverintent to JQuery ui-tabs</title>
<!-- https://stackoverflow.com/questions/15346939/adding-hoverintent-to-jquery-ui-tabs -->

<!-- ALL JQUERY VERSIONS: https://code.jquery.com/jquery/ -->

<!-- <script src="https://code.jquery.com/jquery-1.9.1.min.js" integrity="sha256-wS9gmOZBqsqWxgIVgA8Y9WcQOa7PgSIX+rPA0VL2rbQ=" crossorigin="anonymous"></script> -->

<!-- COMMENT: all three of these JQuery scripts are required.  Note COMMENTS -->
<!-- in code for updates from jquery-1.9.1.min.js >> jquery-3.5.1.min.js -->

<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">

<script type = "text/javascript">
  $(init);
  function init(){
      $("#tabs").tabs({event: "click hoverintent"});
  };  /* init(){} */

  var cfg = ($.hoverintent = {
    sensitivity: 3,
    interval: 400
  });  /* cfg */

  $.event.special.hoverintent = {
    setup: function() {
      $( this ).bind( "mouseover", jQuery.event.special.hoverintent.handler );
    },  /* setup (){} */

    teardown: function() {
      $( this ).unbind( "mouseover", jQuery.event.special.hoverintent.handler );
    },  /* teardown */

    handler: function( event ) {
      var that = this,
      args = arguments,
      target = $( event.target ),
      cX, cY, pX, pY;

      function track( event ) {
        cX = event.pageX;
        cY = event.pageY;
      };  /* track */

      pX = event.pageX;
      pY = event.pageY;

      function clear() {
        target
        .unbind( "mousemove", track )
        .unbind( "mouseout", arguments.callee );
        clearTimeout( timeout );
      }  /* clear */

      function handler() {
        if ( ( Math.abs( pX - cX ) + Math.abs( pY - cY ) ) < cfg.sensitivity ) {
          clear();
          event.type = "hoverintent";
          // prevent accessing the original event since the new event
          // is fired asynchronously and the old event is no longer
          // usable (#6028)
          //
          // COMMENT [2021-01-20]:
          //   "Uncaught TypeError: e.preventDefault is not a function"
          //   SWITCHING FROM JQuery 1.9.1 to 3.5.1 comment out this line:
          //
          // event.originalEvent = {};

          // COMMENT [2021-01-20]:
          //   "Uncaught TypeError: jQuery.event.handle is undefined"
          //   jQuery.event.handle is deprecated; you can use $.event.dispatch instead.
          //   https://stackoverflow.com/questions/16527658/jquery-error-typeerror-event-handle-is-undefined
          //
          // jQuery.event.handle.apply( that, args );
          jQuery.event.dispatch.apply( that, args );
        }  /* if */
        else {
          pX = cX;
          pY = cY;
          timeout = setTimeout( handler, cfg.interval );
        }  /* else */
      }    /* handler (inner) */

      var timeout = setTimeout( handler, cfg.interval );
      target.mousemove( track ).mouseout( clear );
      return true;
    }  /* handler (outer) */
  };   /* event.special.hoverintent */
</script>
</head>

<body>
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
  </ul>
  <div id="tabs-1">
    <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. </p>
  </div>
  <div id="tabs-2">
    <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis.</p>
  </div>
  <div id="tabs-3">
    <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. </p>
  </div>
</div>
</body>
</html> 
```

# jsplumb - jsPlumb：如何选择特定的连接器

> ID：15346942
> 
> 赞同：3
> 
> 时间：2013-03-11T19:28:46.183
> 
> 标签：jsplumb

我似乎无法弄清楚如何选择特定的 jsPlumb 连接器。我知道我可以选择与源或目标相关的所有连接器，但通常我会在同一个源和目标之间有多个连接器，因此在这种情况下我看不到能够选择特定连接器的方法。

我的具体用例如下：

如果用户单击连接器，他们会看到一个允许他们编辑连接的对话框。（即设置标签名称，删除连接）。现在，如果他们设置标签或删除连接，我将被迫分离图表中的所有内容，然后重新绘制所有内容。此方法有效，能够仅分离已修改的一个连接或仅更改其标签似乎更清洁。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:48:36.867

据我了解您的问题，您希望在用户单击连接时断开连接。

你需要做什么：

1.  [在与jsPlumb 事件](http://jsplumbtoolkit.com/doc/content.html#events)的连接上注册“单击”侦听器

2.  一旦触发点击事件，在触发事件的连接上使用[jsPlumb.detach](http://jsplumb.org/apidocs/files/jquery-jsPlumb-1-3-16-all-js.html#detach)，这将删除它，同时保持端点不变。

这是我使用的代码示例：

```
 //connection was established let's add listener
        jsPlumb.bind("jsPlumbConnection", function(info) {

            //get connection from event info
            var connection = info.connection;

            //add on click event
            connection.bind("click", function(conn) {
                jsPlumb.detach(conn);
            });
        }); 
```

[原始演示](http://jsfiddle.net/DMINATOR/peKdB/)-[更新的演示](http://jsfiddle.net/peKdB/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T07:07:40.543

```
if(action == "delete"){
        jsPlumb.remove(object_selected, {
            fireEvent: false, 
            forceDetach: false 
        }) 
```

或这个：

```
 $(document).keyup(function(e){
        if(e.keyCode == 46){
            if(connection != null){
                jsPlumb.detach(connection);
                connection = null;
            }

            if(object_selected != null){
                jsPlumb.remove(object_selected);
                object_selected = null;
            }
        }

    }) 
```

# c++ - C++：关于使用命名空间 std 和 cout 的问题

> ID：15346944
> 
> 赞同：4
> 
> 时间：2013-03-11T19:28:49.803
> 
> 标签：c++, c, cout

为什么我需要输入`using namespace std;`才能使用`cout`and `endl`？还有这些叫什么；是`cout`一个函数？

`cout`C中有吗？我听说它是​​用 C++ 实现的，因为它在很多方面都更好。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-11T19:33:05.583

`cout`是在命名空间中定义的全局对象`std`，并且`endl`是也在命名空间中定义的（流操纵器）函数`std`。

如果您不采取任何措施将它们的名称导入全局命名空间，您将无法使用不合格的标识符`cout`和`endl`. 您必须使用完全限定名称：

```
std::cout << "Hello, World!" << std::endl; 
```

基本上，`using namespace std`所做的是将命名空间中存在的所有实体`std`名称注入到全局命名空间中：

```
using namespace std;
cout << "Hello, Wordl!" << endl; 
```

但是，请记住，`using`在全局命名空间中有这样的指令是一种**糟糕**的编程习惯，这几乎肯定会导致邪恶的**名称冲突**。

如果您*确实*需要使用它（例如，如果您的函数正在使用`std`命名空间中定义的许多函数，并且编写`std::`使代码更难阅读），您应该将其范围限制为单个函数的本地范围：

```
void my_function_using_a_lot_of_stuff_from_std()
{
    using namespace std;
    cout << "Hello, Wordl!" << endl;

    // Other instructions using entities from the std namespace...
} 
```

更好的是，只要这是可行的，就是使用以下侵入性较小的*using declarations*，它将*有选择地*仅导入您指定的名称：

```
using std::cout;
using std::endl;

cout << "Hello, Wordl!" << endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-11T19:29:57.897

**不！**你不需要`using namespace std`，也不[应该使用它](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)。使用完全限定的名称`std::cout`和`std::endl`，或者，在小范围内，

```
using std::cout;
using std::endl; 
```

至于其他问题，`std::cout`不是函数。它是一种绑定到标准输出的全局输出流对象。`std::cout`C中没有。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-11T19:49:30.960

```
using namespace std; 
```

将名称集合（称为命名空间）中的名称带入当前范围。大多数教科书似乎鼓励如下使用：

```
#include <iostream>
using namespace std;

int main()
{
     //Code which uses cout, cin, cerr, endl etc.
} 
```

有些人不鼓励以这种方式使用它，因为当命名空间范围重叠时，您可能会与名称发生意外冲突，并且会鼓励您直接使用标准名称，如 std::endl

您还有其他选择，例如

a) 利用范围规则临时引入命名空间

```
int main()
{
     {
        using namespace std;
        //Code which uses things from std
     }
     //Code which might collide with the std namespace
} 
```

b) 或者只带你需要的东西

```
using std::endl;
using std::cin; 
```

回答您的最后一个问题 cin 是一个流对象（支持流提取和插入运算符 >> 和 << 的函数和数据的集合）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-11T19:33:26.850

cout 和 endl 是 C++ 标准库的成员。如果你想在没有 using 语句的情况下使用它们，只需在命名空间前面添加：

`std::cout`
`std::endl`

这可能对您有用：

[http://msdn.microsoft.com/en-us/library/bzbx67e8(VS.80).aspx](http://msdn.microsoft.com/en-us/library/bzbx67e8%28VS.80%29.aspx)

`cout`在 C 中不存在。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T19:42:45.907

通常，“使用命名空间标准”仅在小型学习项目中声明，从不在实际程序中声明。原因是您不需要将该名称空间中的所有内容包含到您的代码中，首先因为编译器需要时间来执行此操作。Stroustrup 自己写道，这是一种糟糕的品味。而且它比 C 中的 printf 更好，因为它是类型安全的，并且可以轻松地为您自己的类型重载，而无需更改库类。

# c# - 限制 GroupJoin LINQ 查询中的输出列

> ID：15346946
> 
> 赞同：0
> 
> 时间：2013-03-11T19:28:53.130
> 
> 标签：c#, linq, linq-to-sql

给定 2 个具有一对多关系的表，我想执行以下操作，将父 ID 和子名称作为每个父的嵌套列表获取：

```
from p in parent
join c in child on p.ID equals c.ParentID 
into parentsChildren
select new {p.ID, parentsChildren.FirstName} 
```

第一个示例无法编译。我知道我可以使用以下 SelectMany 查询获得相同的结果，但想从上面找出等效的 GroupJoin 语法。

```
from p in parent
let parentsChildren = from c in p.children
                select c.FirstName
select new{p.ID, parentsChildren} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:38:08.250

尝试这个

```
from p in parent
join c in child on p.ID equals c.ParentID 
into parentsChildren
select new 
{
   p.ID, 
   ChildNames = parentsChildren.Select(c => c.FirstName) 
} 
```

# jquery - Fullcalendar - 需要为特定日期设置背景颜色

> ID：15346949
> 
> 赞同：0
> 
> 时间：2013-03-11T19:29:05.687
> 
> 标签：jquery, css, fullcalendar

我正在尝试为特定日期设置背景颜色。我发现这有效：

`$('.fc-day15').css('backgroundColor','black');`

但颜色在网格中的第 16 位而不是当天。如果我知道当月 1 日的第一周的偏移量，我可以添加数字。

编辑：

我发现这有效：

```
 var TheActualDay=15;
                    var DayOffset=($('#calendar').fullCalendar('getView').start.getTime()-$('#calendar').fullCalendar('getView').visStart.getTime())/(1000 * 60 * 60 * 24);
                    var DayNumber=(TheActualDay-1)+DayOffset;
                    $('.fc-day'+DayNumber.toString()).css('backgroundColor','black'); 
```

但是有更简洁的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T11:56:04.080

这是一个可行的解决方案。声明 viewDisplay 事件：

```
 viewDisplay: function(view) {
            if (view.name == 'month'){ //just in month view mode 
                var d = view.calendar.getDate(); //choise the date for cell customize
                var cell = view.dateCell(d); //get the cell location for date
                var bodyCells = view.element.find('tbody').find('td');//get all cells from current calendar
                var _element = bodyCells[cell.row*view.getColCnt() + cell.col]; //get specific cell for the date
                $(_element).css('background-color', '#FAA732'); //customize the cell
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T08:03:43.160

```
eventRender: function (event, element, view) {          
        // like that
        var dateString = $.fullCalendar.formatDate(event.start, 'yyyy-MM-dd');
        view.element.find('.fc-day[data-date="' + dateString + '"]').css('background-color', '#FAA732');

        // or that
        var cell = view.dateToCell(event.start);
        view.element.find('tr:eq(' + (cell.row + 1) + ') td:eq(' + cell.col + ')').css('background-color', '#FAA732');
    } 
```

有更好的解决方案吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T08:56:46.600

Erik Vargas 感谢您的示例，我对您的代码进行了简单的更改，以便第一天和最后一天使用不同的颜色。

```
viewDisplay: function(view) {  

                    if (view.name == 'month')
                    { //just in month view mode 
                        var start_date = view.start; // this is the first day of the current month ( you can see documentation in Fullcalender web page )
                        var last_date = view.end; // this is actually the 1st day of the next month ( you can see documentation in Fullcalender web page )                          
                        //var d = view.calendar.getDate(); //choise the date for cell customize                         
                        var start_cell = view.dateCell(start_date); //get the cell location for date
                        var last_cell = view.dateCell(last_date); //get the cell location for date                   
                        var bodyCells = view.element.find('tbody').find('td');//get all cells from current calendar                                                       
                        var _element_firstday = bodyCells[start_cell.row*view.getColCnt() + start_cell.col]; //get specific cell for the date
                        var _element_lastday = bodyCells[last_cell.row*view.getColCnt() + last_cell.col]; //get specific cell for the date
                        //alert(start_cell.row*view.getColCnt() + start_cell.col);

                        $(_element_firstday).css('background-color', 'black'); //customize the cell #40ACC8
                        $(_element_lastday).css('background-color', 'blue'); //customize the cell #40ACC8
                    }                   

        }, 
```

# performance - Ada 最小任务同步（性能相关）

> ID：15346951
> 
> 赞同：1
> 
> 时间：2013-03-11T19:29:10.633
> 
> 标签：performance, task, shared-memory, ada

对于一个爱好解释器项目，我正在寻找有关任务同步的性能相关问题的建议。调度程序必须将新的绿色任务映射到实际任务，每个实际任务都有自己的绿色任务链表。

问题：如何以尽可能少的开销将绿色任务的添加同步到正在运行的实际任务？在早期的测试中，我发现将链表设置为受保护对象会极大地减慢从其自身实际任务中对其的访问速度。为了让您了解当前单任务版本中的解释器循环有多紧凑：

```
while not Is_Empty (Global_State.GTasks) loop
   Current_Task := Next (Global_State.GTasks);
   Global_State.Pram (Current_Task.PC).all (Global_State, Current_Task);
   Current_Task.PC := Current_Task.PC + 1;
   Update (Global_State.GTasks, Current_Task);
end loop; 
```

（更新仍然是副本，但我以后可以摆脱它。）

我的测试表明，即使对这个循环进行最小的更改也会极大地减慢解释速度。想象一下，GTasks 不是在 Global_State 中，而是作为局部变量驻留在执行此循环的任务中。当调度程序从运行此循环的任务*外部*添加新的 GTask 时，我*只*需要同步对 GTasks 的访问。

 *在这种情况下你会推荐什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T19:56:03.507

（以下内容取决于我对问题的合理理解。）

如果可以继续提出“GTasks 作为任务中的局部变量”猜想，那么也许结合条件接受可能会起作用——我不知道性能会受到什么影响，这只是一个想法。

```
while not Is_Empty (GTasks) loop
   Current_Task := Next (GTasks);
   Global_State.Pram (Current_Task.PC).all (Global_State, Current_Task);
   Current_Task.PC := Current_Task.PC + 1;
   Update (GTasks, Current_Task);

   select
      accept Accept_New_Task(Green_Task : Green_Task_Type) do
         Append(GTasks, Green_Task);
      end Accept_New_Task;
   else
      null;
   end select;
end loop; 
```

或者也许只是定期检查新任务，例如，每增加这么多 PC？（同样，对性能影响没有任何承诺。）

```
while not Is_Empty (GTasks) loop
   Current_Task := Next (GTasks);
   Global_State.Pram (Current_Task.PC).all (Global_State, Current_Task);
   Current_Task.PC := Current_Task.PC + 1;
   Update (GTasks, Current_Task);

   if PC_Increments = Check_For_New_Tasks then
      select
         accept Accept_New_Task(Green_Task : Green_Task_Type) do
            Append(GTasks, Green_Task);
         end Accept_New_Task;
      else
         null;
      end select;
      PC_Increments := 0;
   else
      PC_Increments := PC_Increments + 1;
   end if;
end loop; 
```*

# c# - 为什么正确实现 IDisposable 的复杂方案？

> ID：15346952
> 
> 赞同：3
> 
> 时间：2013-03-11T19:29:15.307
> 
> 标签：c#, idisposable, finalizer

今天早些时候，我在对工作中的一些代码进行代码分析时遇到了[CA1063 。](http://msdn.microsoft.com/en-us/library/ms244737.aspx)

我有两个问题：

1.  为什么下面的代码即使明显违反了一些要求也不会导致CA1063（例如Dispose被覆盖）

2.  导致具有由密封的 Dispose() 和终结器等调用的虚拟 Dispose(bool) 的复杂方案的代码的实际问题是什么......

> ```
> using System;
> using System.Collections.Generic;
> using System.Linq;
> using System.Text;
> 
> namespace ConsoleApplication1
> {
>   class Foobar : IDisposable
>   {
>     public Foobar()
>     {
>       Console.Out.WriteLine("Constructor of Foobar");
>     }
> 
>     public virtual void Dispose()
>     {
>       Console.Out.WriteLine("Dispose of Foobar");
>       GC.SuppressFinalize(this);
>     }
> 
>     ~Foobar()
>     {
>       Console.Out.WriteLine("Finalizer of Foobar");
>     }
>   }
> 
>   class Derived : Foobar
>   {
>     public Derived()
>     {
>       Console.Out.WriteLine("Constructor of Derived");
>     }
> 
>     public override void Dispose()
>     {
>       Console.Out.WriteLine("Dispose of Derived");
>       GC.SuppressFinalize(this);
>       base.Dispose();
>     }
> 
>     ~Derived()
>     {
>       Console.Out.WriteLine("Finalizer of Derived");
>     }
>   }
> 
>   class Program
>   {
>     static void Main()
>     {
>       Console.Out.WriteLine("Start");
>       using (var foo = new Derived())
>       {
>         Console.Out.WriteLine("...");
>       }
>       Console.Out.WriteLine("End");
>     }
>   }
> } 
> ```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T21:06:52.233

最初，Microsoft 期望许多类型的对象将同时封装托管和非托管资源，并且即使特定的可继承类没有封装任何非托管资源，派生自它的类也可能会这样做。尽管这种想法在很大程度上是错误的（通常最好将非托管资源分离到它们自己的对象中，然后将其用作托管资源），但旨在处理任意混合的托管和非托管资源的模式成为了一个既定的先例.

尽管完整的 Dispose 模式的某些部分很愚蠢，但适当的简化不会遗漏很多内容。清理代码应该在一个受保护的虚方法中，以允许派生类添加自己的逻辑，但仍然链接到父类方法；如果该方法被命名为`Dispose`，它必须具有与无参数`Dispose`方法不同的签名[尽管我自己的偏好是具有不同名称的无参数方法]。我对微软模式最大的抱怨是它要求每个派生类都有自己的逻辑来防止重复处理。让基类在非虚拟`Dispose`实现中处理它会更干净。

# java - 解码正则表达式

> ID：15346955
> 
> 赞同：2
> 
> 时间：2013-03-11T19:29:20.010
> 
> 标签：java, regex

我正在寻找解码正则表达式。有没有办法检查以下正则表达式的含义：

```
^(PC([Y\\d])|GC([Y\\d])|Y|\\d)\\d{4,5}$ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-11T19:32:23.717

[您可以在http://www.myezapp.com/apps/dev/regexp/show.ws](http://www.myezapp.com/apps/dev/regexp/show.ws)或[http://www.debuggex.com/](http://www.debuggex.com/)使用正则表达式分析器

* * *

```
^ = start of string
() = capturing groups
[] = character classes
\d = digit in 0-9
\\ = literal backslash
| = OR
{} = count of leading item
$ = end of string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T21:18:05.087

这是正在发生的事情的分解。

正则表达式： `^(PC([Y\\d])|GC([Y\\d])|Y|\\d)\\d{4,5}$`

```
 1\. ^        -  Beginning of line  
 2\. (        -  Beginning of a capture group
 3\. PC       -  Finds `PC` exactly  
 4\. ([Y\\d]) -  Creates a capture group for a Y or a single digit (0-9)
 5\. |        -  This is an OR statement
 6\. GC       -  Finds `GC` exactly
 7\. ([Y\\d]) -  Same as 4
 8\. |        -  This is an OR statement
 9\. Y        -  Finds `Y` exactly
10\. |        -  This is an OR statement
11\. \\d      -  This looks for a single digit (0-9)
12\. )        -  End of capture group.  Lines 3-11 will be in this capture group
13\. \\d{4,5} -  This will look any digit exactly 4 or 5 times
14\. $        -  End of line 
```

其中有 3 个捕获组：

```
1\. (PC([Y\\d])|GC([Y\\d])|Y|\\d)
2\. ([Y\\d])  (The first one)
3\. ([Y\\d])  (The second one) 
```

这是一个有效匹配的列表（可以找到任何数字，我只是使用 123456 来显示可以有多少个数字位置）：

*   PCY1234
*   PCY12345
*   PCY1234
*   PCY12345
*   PC12345
*   PC123456
*   GC12345
*   GC123456
*   GCY1234
*   GCY12345
*   Y1234
*   Y12345
*   12345
*   123456

[这](http://regexr.com?3437t)是 RegExr 的链接，其中包含每个匹配项的捕获组的说明。

此外，double `\`in的原因`\\d`是为了逃避`\`for Java。并非所有语言都需要这个，据我了解，有些语言需要 3。如果您在上面的 RegExr 中注意到，我将它们删除，以便 RegExr 可以正确解析 Regex。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T13:03:43.817

[Regexper](https://regexper.com/#%5E(PC(%5BY%5C%5Cd%5D)%7CGC(%5BY%5C%5Cd%5D)%7CY%7C%5C%5Cd)%5C%5Cd%7B4%2C5%7D%24)也是分析正则表达式的好工具。

[![Regexper 生成的图像](../Images/a9c7a640fbac55d79eff267f45a33a17.png)](https://i.stack.imgur.com/w7x3a.png)

# ruby - 权限被拒绝 - 使用带有 Ruby 的鞋子的外部程序调用

> ID：15346957
> 
> 赞同：1
> 
> 时间：2013-03-11T19:29:26.343
> 
> 标签：ruby, shoes, backticks

这是我的代码，我试图简单地打开 Adob​​e Acrobat Reader。当我使用此代码或`/Applications/Adobe Reader.app`时，控制台告诉我“权限被拒绝”。关于如何解决这个问题的任何想法？

```
Shoes.app :width => 200, :height => 200 do
  flow :width => 800, :margin => 10 do
    button "OK" do
      `/Users/Travis/Desktop/test.fdf`
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:58:56.523

尝试向文件添加更多权限。您可以通过终端执行此操作：

```
chmod -R 777 /directory/file 
```

# javascript - 用于检查字符串是否为 a-zA-Z0-9 的正则表达式

> ID：15346959
> 
> 赞同：1
> 
> 时间：2013-03-11T19:29:29.223
> 
> 标签：javascript

我正在尝试检查一个字符串是否全部`a-zA-Z0-9`，但这不起作用。知道为什么吗？

```
var pattern=/^[a-zA-Z0-9]*$/;
var myString='125 jXw';  // this shouldn't be accepted
var matches=pattern.exec(myString);
var matchStatus=1;  // say matchStatus is true

if(typeof matches === 'undefined'){
  alert('within here');
  matchStatus=0; // matchStatus is false
};

if(matchStatus===1){
  alert("there was a match");
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-11T19:31:46.963

[`exec()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)`null`如果没有找到匹配项，即`typeof`object not ，则返回`undefined`。

你应该使用这个：

```
var matches = pattern.exec(myString); // either an array or null
var matchStatus = Boolean(matches);

if (matchStatus)
    alert("there was a match");
else
    alert('within here'); 
```

或者只是使用以下[`test`方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/test)：

```
var matchStatus = pattern.test(myString); // a boolean 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T07:16:10.603

```
function KeyString(elm)
{
    var pattern = /^[a-zA-Z0-9]*$/;

    if( !elm.value.match(pattern))
    {
        alert("require a-z and 0-9");
        elm.value='';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-11T19:33:09.460

如果我没有错，您的正则表达式没有提供空格，并且您的字符串中有空格。如果你想留出空间试试这种方式 /^[a-zA-z0-9\ ]*$/

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-11T19:33:21.437

尝试

```
if(matches === null){
  alert('within here');
  matchStatus=0; // matchStatus is false
};

if(matchStatus===1){
  alert("there was a match");
} 
```

如果没有匹配，Regex.exec 返回 null，而不是未定义。所以你需要测试一下。

它似乎像你期望的那样工作：[fiddle](http://jsfiddle.net/prsdf/)

文档`exec`：[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-11T19:34:17.113

我只会测试它 - 在这种情况下：

```
var pattern = /^[a-z0-9]+$/i;
var myString = '125 jXw';
var matchStatus = 1;  // say matchStatus is true

if (!pattern.test(matches)) {
    matchStatus = 0; // matchStatus is false
};

if(matchStatus === 1){
    alert("there was a match");
} 
```

# jquery - 使用滚动条位置更新 jquerymobile 数据角色页面

> ID：15346963
> 
> 赞同：1
> 
> 时间：2013-03-11T19:29:45.250
> 
> 标签：jquery, jquery-mobile

我需要在一系列 jquery 移动数据角色页面中更新 div 的滚动条位置。

我的标题：

```
<script src="js/jquery-1.6.4.min.js"></script>
<script src="js/jquery.mobile-1.0rc1.min.js"></script>
<script>
$(document).live('pageinit','[data-role=page]', function() {
    $("#toc_contentdown").scrollTop(200);
});
</script> 
```

应该通过向下滚动到我的目录 div 中的位置来更新每个数据角色页面。你可以在这里查看我的演示页面：[演示页面](http://dev.mypearsontraining.com/DJ/playershell/index.html)

我正在使用 jquery 1.6.4 和 jquerymobile 1.0

这个问题有助于让我了解如何在数据角色页面中初始化 jquery： [如何在 jquery mobile 中初始化页面？pageinit 没有触发](https://stackoverflow.com/questions/7544023/how-to-initialize-pages-in-jquery-mobile-pageinit-not-firing)

所以这给了我将 jquery 初始化代码嵌入到每个数据角色页面的想法：

```
<script>
$("#chp11").live('pageinit', function() {
    $("div#toc_contentdown").scrollTop(200);
});
</script> 
```

其中 #toc_contentdown 是我希望在加载数据角色页面时滚动条向下滚动的 div。#chp11 是当前应该加载以初始化向下滚动的数据角色页面的 id。

有任何想法吗？我确信有一种更简单的方法可以做到这一点，而我目前还没有想到。我正在使用 $(document).live('pageinit' 而不是 '.bind' 因为我使用的是 1.6。

我会发布整页的代码，但它只是几个类似的数据角色页面。

提前感谢您的任何指导！

# php - 在数组php中搜索信息期间缩短脚本

> ID：15346965
> 
> 赞同：3
> 
> 时间：2013-03-11T19:29:54.370
> 
> 标签：php, arrays, object, foreach

我`Array`喜欢这样：

```
array(10) { [0]=> object(stdClass)#3 (4) { ["name"]=> string(2) "OA" ["datetime"]=> string(10) "1990-05-10" ["amount"]=> string(2) "50" ["comment"]=> string(9) "Something" } [1]=> object(stdClass)#4 (4) { ["name"]=> string(1) "O" ["datetime"]=> string(10) "1992-10-01" ["amount"]=> string(2) "20" ["comment"]=> string(5) "Other" } ... 
```

我将在标记的数组中搜索信息`php`。我有一个`HTML`包含许多过滤器的表单（在该数组中定义的所有参数）。所以这是我的php脚本：

```
if (isset($_POST['action'])){ // if form is submitted
    $name   = $_POST['name'];
    $amount = $_POST['amount'];
    // like I've mentioned I've more filters but to simplify example lets have two
    if ($name!="" && $amount!=""){ // search by both param
        foreach($arr as $obj){ // $arr is the marked array from above
            if ( (strpos(strtolower($obj->name),strtolower($name))!==false) && ($amount >= $obj->amount) ){
                $new[] = (object)array(
                    "name" => $obj->name,
                    "datetime" => $obj->datetime,
                    "amount" => $obj->amount,
                    "comment" => $obj->comment
                );
            }
        }
        print_r($new);
    } elseif ($name=="" && $amount!=""){ // only by amount
        // same foreach loop goes here with difference that I'm only searching by amount
    } elseif ($name!="" && $amount==""){ // only by name
        // same foreach loop goes here with difference that I'm only searching by name
    }
    // etc ...
} 
```

一切正常，但我只是对缩短这么多`if`语句并实现目标的另一种简单方法感兴趣。谢谢你的建议 ...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T19:46:13.520

它当然不会看起来更短，但那是因为您省略了其他 foreach 循环。这是你的东西的第一次重构，没有重复的代码：

```
 $arr = arrayThing();
        $new = array();
        if (isset($_POST['action']))
        { // if form is submitted
            $name   = isset($_POST['name']) ? $_POST['name'] : '';
            $amount = isset($_POST['amount']) ? $_POST['amount'] : '';
            if ($name != '' && $amount != '')
            {
                $searchBy = 'both';
            }
            elseif ($name == '' && $amount != '')
            {
                $searchBy = 'amount';
            }
            else
            {
                $searchBy = 'name';
            }

            foreach ($arr as $obj)
            {
                $valid = false;
                switch ($searchBy)
                {
                    case 'both':
                        if ((strpos(strtolower($obj->name), strtolower($name)) !== false) && ($amount >= $obj->amount))
                        {
                            $valid = true;
                        }
                        break;
                    case 'amount':
                        if ($amount >= $obj->amount)
                        {
                            $valid = true;
                        }
                        break;
                    case 'name':
                        if (strpos(strtolower($obj->name), strtolower($name)) !== false)
                        {
                            $valid = true;
                        }
                        break;
                    default:
                        break;
                }

                if ($valid)
                {
                    $new[] = (object) array(
                                "name"     => $obj->name,
                                "datetime" => $obj->datetime,
                                "amount"   => $obj->amount,
                                "comment"  => $obj->comment,
                    );
                }
            }
            print_r($new);
        } 
```

# jquery - 在 MVC 4 控制器中更新 ASP HiddenField

> ID：15346969
> 
> 赞同：0
> 
> 时间：2013-03-11T19:30:02.763
> 
> 标签：jquery, asp.net-mvc-4, hidden-field

在我看来，我定义了一个简单的 asp:HiddenField 如下：

```
<asp:HiddenField ID="hdnUserRole" runat="server" /> 
```

现在，我将我的 RedirectToAction 定义为

```
if (Something)
        {
            return RedirectToAction("Index", "AdminView", new { UserRole = "Admin" });
        }
        else
        {
            return RedirectToAction("Index", "AdminView", new { UserRole = "Inquiry" });
        } 
```

在Controller中，我想将上面定义的隐藏字段分配给UserRole的值。这里的想法是隐藏视图中存在的更新按钮。我计划在 jQuery(document).ready 函数中做同样的事情。我感谢你们可能拥有的任何帮助或任何替代方法。

```
 public class AdminViewController : Controller
{
    //
    // GET: /AdminView/

    #region Index With Roles

    public ActionResult Index(String UserRole)
    {
        if (UserRole == "Admin")
        { 
            //ToDo: Update the hidden field "hdnUserRole"

        }
        else if (UserRole == "Inquiry")
        { 

        }

        return View();
    }

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T20:47:34.287

通过查看您要实现的目标，我*认为*您需要一些通用`Admin`操作，一个通用操作，另一个调用`Inquiry`，它们应该使用相同的`View`. 那么，如何代替您的路线...

```
AdminView/Index/Admin
AdminView/Index/Inquiry 
```

...你使用类似的东西：

```
Admin/Index
Admin/Inquiry 
```

所以你的重定向现在看起来像：

```
return ReidrectToAction("Index", "Admin")
return RedirectToAction("Inquiry", "Admin") 
```

从这里你有两种方法。如果除了隐藏几个按钮之外整个页面都相同，则可以返回完全相同的`View`. 否则，我会将您的共享组件放在一个部分中`View`，并为每个`Action`都使用共享组件的页面。我将描述第一种方法让你继续前进。因此，您可以有两个返回相同的操作`View`：

```
public class AdminController : Controller
{
    //
    // GET: /Admin/Index

    public ActionResult Index()
    {
        ViewBag.Source = "admin";
        return View("Index");
    }

    //
    // GET: /Admin/Inquiry

    public ActionResult Inquiry()
    {
        ViewBag.Source = "inquiry";
        return View("Index");
    }
} 
```

我假设`View`被调用`Index`并且位于`Views/Admin`.

然后在页面加载的 JavaScript 中，您可以使用我们`ViewBag.Source`在控制器中分配的字符串做任何您想做的事情：

```
<script type="text/javascript">
    var context = '@ViewBag.Source'; // will be 'admin' or 'inquiry'
</script> 
```

但是，对于您要实现的目标，您最好只在剃须刀中进行。

```
@if(ViewBag.Source == "admin") // I came from Admin/Index!
{
    <button type="button">Update</button>
} 
```

如果您仍然想要页面上的隐藏字段，您可以使用：

```
@Html.Hidden("Source", (string)ViewBag.Source) // must cast 
```

这将呈现以下html：

```
<input id="Source" name="Source" type="hidden" value="admin"> 
```

# ios - 选择文本框时如何启动 ipad 应用程序

> ID：15346973
> 
> 赞同：0
> 
> 时间：2013-03-11T19:30:09.460
> 
> 标签：ios, ipad, barcode-scanner

理想情况下，我想做的是在 iPad 键盘上添加一个快捷方式来启动另一个程序，在我的情况下是一个扫描应用程序。

我们想将 iPad 相机用作扫描仪，每当我们在任何第三方应用程序中点击文本输入框时，都可以启动扫描仪软件、扫描代码并将扫描的数据放入文本框中。

我已经阅读了有关扫描库和使用实际条形码扫描仪的信息，但我还没有看到任何可以让您创建这种类型的快捷方式的东西。

关于在哪里可以找到更多信息的任何想法或建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:21:06.277

**tl;博士**：这是不可能的。

# 回答

iPhone 键盘不能在系统范围内修改或替换。[请参阅Fleksy FAQ](http://fleksy.com/#faq)上的第 4 个问题
正如您所提到的，您的选择是：

1.  使用扫描库
2.  使用条形码扫描仪

## 扫描图书馆

如果您无权访问应用程序源或无法说服开发人员添加扫描仪支持，您唯一的选择是使用独立的扫描仪应用程序，在应用程序之间切换以将扫描的数据复制粘贴到文本中场地。

**优点**

*   免费（ZXing、zbar 等）

**缺点**

*   慢的。相机扫描仪大约需要一秒钟，加上切换应用程序和复制粘贴所需的时间。你正在看 ~10 秒

## 条码扫描器

可以使用提供的 SDK 将条码扫描器集成到应用程序中，这对于大多数应用程序是可取的，但许多扫描器也支持 HID 模式。在 HID 模式下，扫描仪作为键盘连接到 iOS（或 Android），并可以在活动输入字段中“键入”。

**优点**

*   快，非常快
*   在 HID 模式下使用，无需修改应用程序即可将数据直接扫描到文本输入中

**缺点**

*   昂贵的

**免责声明**我为 Socket Mobile 工作。Socket Mobile 制作精美的蓝牙条码扫描仪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:15:54.693

长话短说：如果您想将键盘中的那个按钮添加到每个应用程序中，那么这是不可能的（在非越狱设备上，至少到最后才能获得更多信息）。

不过，您可以拥有自己的扫描应用程序并制作它，以便将代码复制到剪贴板区域非常容易，这样您就可以跳转到第一个应用程序并将其粘贴到文本字段中。

或者，如果您不需要将应用程序置于 Apple 批准流程（即内部解决方案）中，那么您可以开发用于越狱设备的工具。

# asp.net - 有时，在我的 Web 应用程序中加载 Default.aspx 时会话会丢失

> ID：15346976
> 
> 赞同：0
> 
> 时间：2013-03-11T19:30:22.483
> 
> 标签：asp.net, session, session-variables, session-state

我正在开发一个由不再为我的组织工作的人编写的 ASP.net Web 应用程序。

我发现了一个奇怪的错误。这是间歇性问题。

我在应用程序中有一个名为 default.aspx 的页面。有时，加载此页面时，整个会话都会丢失。我在调试器中看到发生这种情况时会触发 Session_Start 事件。有时，Session_End 事件也会触发，但这似乎并非每次都发生。

我`sessionState`在 web.config 中找到了一个自定义配置，但删除它并不能解决问题。

Default.aspx 直接继承 System.Web.UI.Page 并且除了 Page_Load 之外没有定义任何事件。

项目中没有 global.asax。

什么可能导致这个令人沮丧的问题？

**更新：**我在 Visual Studio 2010 的内置服务器中运行应用程序时遇到了这个问题。我的工作站上没有安装 IIS。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T09:43:28.817

可能导致会话问题（可能不适用于您的情况）的潜在问题是，有时，某些 IIS 管理员将应用程序池设置为 WebGarden（即，最大工作进程 > 1）。这是一个常见的拔毛场景。

如果您使用的是 VS 2010，则每次启动应用程序时，VS 2010 都会启动一个“迷你 IIS”。您可以在系统托盘部分看到它。每次它启动一个新的“ASP.Net 开发服务器”，它就是一个新的会话。

只是想帮忙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T07:43:46.273

我发现了会话丢失的情况 - 在 asp.net 页面中，对于金额文本框字段具有无效字符，然后为其他目的检索会话变量。通过 Convert.ToInt32 或 double 发布无效数字解析后引发第一次机会异常，但该行没有显示错误，而是由于未处理的异常，会话为空，在会话检索时显示错误，从而欺骗调试......

希望它有所帮助，HydTechie

# emacs - Emacs：窗口太短时向下箭头键跳过行

> ID：15346979
> 
> 赞同：0
> 
> 时间：2013-03-11T19:30:30.967
> 
> 标签：emacs, cursor, skip

当我在全屏模式下使用 Emacs 时，向下箭头键可以很好地向下导航源代码缓冲区。但是当窗口变得太短（例如，Cx 2）时，按下 Down 开始跳过代码的“段落”，从而难以编辑所需的行。

`C-n`向下箭头键、和`M-x next-line`以及反向功能向上、`C-l`和时会发生此行为`M-x previous-line`。

有人可以帮我修改我`~/.emacs`的以防止发生这些跳行吗？

我在 Mac OS X 10.8.2 上使用 Homebrew Emacs 24.2.1。

**更新**：此行为也出现在 Emacs for Mac OS X, 24.3 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T19:54:53.457

听起来您需要将 ( `M-x customize-variable RET`) 变量自定义`line-move-visual`为`t`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T20:48:00.717

试试这个。

```
(setq scroll-conservatively 1) 
```

这似乎也有类似的效果。我不清楚它们到底有什么不同。

```
(setq scroll-step 1) 
```

# perforce - 无法使用集成在 P4 中创建新分支

> ID：15346983
> 
> 赞同：2
> 
> 时间：2013-03-11T19:30:46.533
> 
> 标签：perforce, perforce-integrate

我在 P4 有一个分支

```
//depot/MyDemoInfo/trunk/Server/My_Service 
```

& 在 My_Service 下，我的整个源代码都存在。

现在，当我尝试从上面的主干分支创建一个新分支时，它给了我错误：

我正在尝试创建一个新的发布分支，如下所示：

```
//depot/MyDemoInfo/1.0/Server/My_Service 
```

因此，我在客户端规范中添加了以下命令后发出了以下命令：

```
p4 integrate //depot/MyDemoInfo/trunk/Server/My_Service/... //depot/MyDemoInfo/1.0/Server/My_Service/... 
```

它给出了以下错误：

```
//depot/MyDemoInfo/1.0/Server/My_Service//abc.txt - can't integrate from //depot/MyDemoInfo/trunk/Server/My_Service/abc.txt#1 (moved from //depot/MyDemoInfo/trunk/Server/My_Service/abc.txt; provide a branch view that maps this file, or use -Di to disregard move/deletes) 
```

对于我的主干分支中的所有文件，它给出了相同的上述错误。有人可以帮我这里出了什么问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-11T20:28:39.773

运行 a`p4 integrate`时，应将集成目标映射到您的`perforce client workspace`中，这就是此错误所指示的：

`provide a branch view that maps this file, or use -Di to disregard move/deletes`

使用`p4 client`or `p4v`，将以下 perforce depot 映射`//depot/MyDemoInfo/1.0/Server/My_Service`到您的客户端工作区到您机器上的某个目录，例如：`/myp4workspace/MyDemoInfo/1.0/Server/My_Service`

然后这样做：

```
cd /myp4workspace/MyDemoInfo/1.0/Server/My_Service
p4 integrate //depot/MyDemoInfo/trunk/Server/My_Service/... ...

# This is optional, but a regular workflow to make sure you resolve all the conflicts
# Display any conflicts (there shouldn't be any since this is the first time you're integrating into this location)
p4 resolve -n ... 

# If there are any, use p4 resolve -as ... , p4 resolve -am ... , and then p4 resolve ...

# Submit your changes after verifying it is correct
p4 submit ... 
```

您可能需要注意的另一件事是，`p4 integrate`使用该`-t -d`选项运行，以便它保留文件类型，并引入任何已删除的文件更改（尽管在您的情况下这两个选项可能不是真正需要的，但在指定时没有错他们）。

您还可以在进行任何集成之前运行`p4 where`以确认您在正确的 perforce 仓库位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-11T19:59:49.923

您的`integrate`命令中缺少斜杠。目标/目的地应该在`...`.

试试这个：

```
p4 integrate //depot/MyDemoInfo/trunk/Server/My_Service/... //depot/MyDemoInfo/1.0/Server/My_Service/...
----------------------------------------------------------------------------------------------------^ 
```

那可能会解决它。如果不是，请确认目标位于您的客户端规范映射中。

# design-patterns - 说装饰器比适配器更透明是什么意思？

> ID：15346984
> 
> 赞同：3
> 
> 时间：2013-03-11T19:30:56.363
> 
> 标签：design-patterns

我读过*装饰器*对客户端比*适配器*更透明，正是这种*透明度*使嵌套装饰成为可能。在这种情况下，*透明度*实际上意味着什么？

PS：我知道这两种设计模式。所以你可以在这个前提下做出你的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-11T19:44:31.953

装饰器获取给定类型 A 的对象，并将其包装到相同类型 A 的对象中。客户端可以像使用实际对象一样使用装饰对象，因为它们具有相同的类型。

适配器获取给定类型 A 的对象，并将其包装到另一个类型 B 的对象中。使用原始类型 A 的客户端必须适应使用另一个类型 B。

也就是说，如果我们使用适配器模式，正是因为客户端需要 B 类型的对象，而我们只有 A 类型的对象。所以我们将它包装到适配器中，使其成为 B 类型的对象。

这两种模式使用相同的原理（包装），但目的不同。一个装饰器来改变原始对象的行为。用于更改其类型的适配器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-11T19:41:01.873

客户端使用装饰器和装饰对象没有区别（两者具有相同的接口）。因此装饰器是透明的（即对客户端不可见）。装饰器也可以被其他装饰器装饰——不会影响客户端。客户仍然可以*认为*他正在使用装饰对象。

很好的样本是`Streams`。您可以传递用任意数量的装饰器（压缩、加密、缓冲）装饰的流，但这些装饰器对于任何使用流的客户端都将保持不可见。

其实我不明白为什么适配器可以被认为是透明的。客户端不应该知道适配器的类型，并且客户端不能将适配器视为适配器，因为它们具有不同的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-11T19:42:30.130

回答装饰器是如何透明的比为什么适配器偷偷摸摸或笨拙更直接。装饰器往往更频繁地嵌套到大量功能（这通常是正交的，例如 BufferedFileWriter 添加了缓冲，这并没有真正改变其包装类的基本操作：它将那些委托回原来的）。通常，您可以很容易地看到装饰器在做什么，因为它在原始界面中隐藏了自己。

适配器可以同样透明。我猜想嵌套适配器更困难的原因是您正在谈论转换某些状态对象。然后你很快就会了解所有隐含的丑陋（随着 MVC 的发展而发生的事情之一）。例如，我有一个旧应用程序，它会给我一个风险评级，给我一堆输入。有一个新的 Web 界面想要使用它，但它需要另一种格式的数据。我们无法更改原始代码，因此我们引入了一个可以翻译的适配器。它在翻译什么？一般有一些状态表示。因此，如果接口不同，它将接受输入并转换和重新调整它们，如果输出需要进一步按摩，同上。如果您将多个适配器分层，

装饰器通常不用于此类翻译工作，而是用于补充我们没有代码的东西的功能，或者再次，新功能是正交的，因此，我们允许用户使用或者不使用一个或多个装饰器。

# javascript - Ember.js：查看按键事件监听

> ID：15346985
> 
> 赞同：14
> 
> 时间：2013-03-11T19:30:57.553
> 
> 标签：javascript, ember.js, dom-events

在我的应用程序中，我有一个面板，其中包含一些设置信息。该面板通过单击按钮打开/关闭，但我也希望能够通过点击`esc`键盘来关闭它。

我的视图代码如下所示：

```
Social.MainPanelView = Ember.View.extend({
    elementId: 'panel-account-settings',
    classNames: ['panel', 'closed'],
    keypress: function(e){
        console.log(e);
        console.log('keypress');
    },
    close: function(){
        this.$().prepareTransition().addClass("closed");
    }
}); 
```

我也尝试过 keyup 和 keydown 但没有任何反应。我怀疑这是因为这不是一个“输入”类型的视图，而只是一个标准视图。那么如何从关键事件触发视图上的方法呢？

我应该澄清一下，这不在此特定元素的 Route 的上下文中。如本视频所示，我正在独立打开面板：

[http://screencast.com/t/tDlyMud7Yb7e](http://screencast.com/t/tDlyMud7Yb7e)

**更新 1**

[这是我创建的一个快速小提琴](http://jsfiddle.net/7GTQq/1/)来说明我遇到的问题。我可以很容易地触发 click 事件，但我正在寻找一个页面范围的 keyup 事件，它将检测 esc 键被按下并触发特定视图上的方法：

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-06-08T14:25:15.897

要使 keyPress 起作用，您必须将焦点放在视图上。当它是输入时，它会起作用，因为您将焦点放在它上面。

像这样的东西：

```
App = Em.Application.create();

App.IndexController = Em.Controller.extend({
  updateKey: function(keyCode) {
    // Do what you gotta do
    this.set('shortcutKey', keyCode);
  },
  shortcutKey: null
});

App.IndexView = Em.View.extend({
  didInsertElement: function() {
    return this.$().attr({ tabindex: 1 }), this.$().focus();
  },

  keyDown: function(e) {

    this.get('controller').send('updateKey', e.keyCode);
  }
}); 
```

这是一个工作示例：http: [//jsbin.com/ihuzov/1](http://jsbin.com/ihuzov/1)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-11T19:37:32.887

我认为您拼错了按键事件。它应该是**keyPress**。为了完整起见，以下是 View 可以处理的事件（取自[Ember source/doc](http://emberjs.com/api/classes/Ember.View.html)）：

### 事件名称

上述任何响应方法的可能事件名称为：

触摸事件：

*   `touchStart`
*   `touchMove`
*   `touchEnd`
*   `touchCancel`

    键盘事件

*   `keyDown`

*   `keyUp`
*   `keyPress`

    鼠标事件

*   `mouseDown`

*   `mouseUp`
*   `contextMenu`
*   `click`
*   `doubleClick`
*   `mouseMove`
*   `focusIn`
*   `focusOut`
*   `mouseEnter`
*   `mouseLeave`

    表单事件：

*   `submit`

*   `change`
*   `focusIn`
*   `focusOut`
*   `input`

    HTML5 拖放事件：

*   `dragStart`

*   `drag`
*   `dragEnter`
*   `dragLeave`
*   `drop`
*   `dragEnd`

# java - JSONObject toString() 导致 1495472 字节分配内存不足

> ID：15346989
> 
> 赞同：3
> 
> 时间：2013-03-11T19:31:29.010
> 
> 标签：java, android, json, out-of-memory

我正在使用以下设备来测试我的应用程序：

![在此处输入图像描述](../Images/efe22742511a8a20fe016b2c8f869c98.png)

我发布了一个大小约为 498467 字节 (0.48MB) 的 JSON 字符串。

当我的应用程序同步这些数据时，它会失败，`toString()`例如`JSONObect`：

```
JSONObject jsonObj = new JSONObject();
...
ClientMyAppApi.Upload(getContext(), account.name, jsonObj.toString()); // Out of memory here 
```

这是 LogCat 成绩单：

```
D/dalvikvm(21964): GC_CONCURRENT freed 690K, 12% free 10892K/12295K, paused 5ms+9ms
D/dalvikvm(21964): GC_FOR_ALLOC freed 606K, 9% free 11196K/12295K, paused 57ms
I/dalvikvm-heap(21964): Grow heap (frag case) to 11.630MB for 662266-byte allocation
D/dalvikvm(21964): GC_FOR_ALLOC freed 431K, 13% free 11411K/12999K, paused 61ms
I/dalvikvm-heap(21964): Grow heap (frag case) to 12.157MB for 993394-byte allocation
D/dalvikvm(21964): GC_FOR_ALLOC freed 646K, 17% free 11734K/14023K, paused 63ms
I/dalvikvm-heap(21964): Grow heap (frag case) to 12.947MB for 1490086-byte allocation
D/dalvikvm(21964): GC_FOR_ALLOC freed 970K, 22% free 12220K/15495K, paused 69ms
D/AdapterSync(21964): uploadNewContent() JSON request size: 498468
D/dalvikvm(21964): GC_CONCURRENT freed 3172K, 30% free 10892K/15495K, paused 5ms+26ms
D/dalvikvm(21964): GC_FOR_ALLOC freed 606K, 28% free 11195K/15495K, paused 56ms
D/dalvikvm(21964): GC_FOR_ALLOC freed 431K, 27% free 11411K/15495K, paused 59ms
D/dalvikvm(21964): GC_FOR_ALLOC freed 646K, 25% free 11734K/15495K, paused 61ms
D/dalvikvm(21964): GC_FOR_ALLOC freed 970K, 22% free 12219K/15495K, paused 69ms
D/dalvikvm(21964): GC_FOR_ALLOC freed 1459K, 25% free 11742K/15495K, paused 74ms
D/dalvikvm(21964): GC_CONCURRENT freed 664K, 18% free 12726K/15495K, paused 17ms+12ms
D/dalvikvm(21964): GC_CONCURRENT freed 1930K, 18% free 12723K/15495K, paused 22ms+10ms
D/dalvikvm(21964): GC_FOR_ALLOC freed 13K, 18% free 12716K/15495K, paused 70ms
I/dalvikvm-heap(21964): Forcing collection of SoftReferences for 1495472-byte allocation
D/dalvikvm(21964): GC_BEFORE_OOM freed 9K, 18% free 12707K/15495K, paused 114ms
E/dalvikvm-heap(21964): Out of memory on a 1495472-byte allocation.
I/dalvikvm(21964): "SyncAdapterThread-1" prio=5 tid=20 RUNNABLE
I/dalvikvm(21964):   | group="main" sCount=0 dsCount=0 obj=0x4101ac78 self=0x2f5198
I/dalvikvm(21964):   | sysTid=22098 nice=10 sched=0/0 cgrp=bg_non_interactive handle=3325456
I/dalvikvm(21964):   | schedstat=( 5787106417 2132935545 325 ) utm=552 stm=26 core=0
I/dalvikvm(21964):   at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:~94)
I/dalvikvm(21964):   at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:132)
I/dalvikvm(21964):   at java.lang.StringBuilder.append(StringBuilder.java:124)
I/dalvikvm(21964):   at libcore.net.UriCodec.appendEncoded(UriCodec.java:119)
I/dalvikvm(21964):   at libcore.net.UriCodec.encode(UriCodec.java:133)
I/dalvikvm(21964):   at java.net.URLEncoder.encode(URLEncoder.java:57)
I/dalvikvm(21964):   at org.apache.http.client.utils.URLEncodedUtils.encode(URLEncodedUtils.java:184)
I/dalvikvm(21964):   at org.apache.http.client.utils.URLEncodedUtils.format(URLEncodedUtils.java:163)
I/dalvikvm(21964):   at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:57)
I/dalvikvm(21964):   at com.myapp.utils.NetworkUtils.makeHttpRequestWithParams(NetworkUtils.java:177)
I/dalvikvm(21964):   at com.myapp.client.ClientMyAppApi.MakeRequest(ClientMyAppApi.java:208)
I/dalvikvm(21964):   at com.myapp.client.ClientMyAppApi.Upload(ClientMyAppApi.java:395)
I/dalvikvm(21964):   at com.myapp.syncadapter.AdapterSync.uploadNewContent(AdapterSync.java:744)
I/dalvikvm(21964):   at com.myapp.syncadapter.AdapterSync.onPerformSync(AdapterSync.java:120)
I/dalvikvm(21964):   at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:247)
W/dalvikvm(21964): threadid=20: thread exiting with uncaught exception (group=0x409c01f8)
E/AndroidRuntime(21964): FATAL EXCEPTION: SyncAdapterThread-1
E/AndroidRuntime(21964): java.lang.OutOfMemoryError
E/AndroidRuntime(21964):    at java.lang.AbstractStringBuilder.enlargeBuffer(AbstractStringBuilder.java:94)
E/AndroidRuntime(21964):    at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:132)
E/AndroidRuntime(21964):    at java.lang.StringBuilder.append(StringBuilder.java:124)
E/AndroidRuntime(21964):    at libcore.net.UriCodec.appendEncoded(UriCodec.java:119)
E/AndroidRuntime(21964):    at libcore.net.UriCodec.encode(UriCodec.java:133)
E/AndroidRuntime(21964):    at java.net.URLEncoder.encode(URLEncoder.java:57)
E/AndroidRuntime(21964):    at org.apache.http.client.utils.URLEncodedUtils.encode(URLEncodedUtils.java:184)
E/AndroidRuntime(21964):    at org.apache.http.client.utils.URLEncodedUtils.format(URLEncodedUtils.java:163)
E/AndroidRuntime(21964):    at org.apache.http.client.entity.UrlEncodedFormEntity.<init>(UrlEncodedFormEntity.java:57)
E/AndroidRuntime(21964):    at com.myapp.utils.NetworkUtils.makeHttpRequestWithParams(NetworkUtils.java:177)
E/AndroidRuntime(21964):    at com.myapp.client.ClientMyAppApi.MakeRequest(ClientMyAppApi.java:208)
E/AndroidRuntime(21964):    at com.myapp.client.ClientMyAppApi.Upload(ClientMyAppApi.java:395)
E/AndroidRuntime(21964):    at com.myapp.syncadapter.AdapterSync.uploadNewContent(AdapterSync.java:744)
E/AndroidRuntime(21964):    at com.myapp.syncadapter.AdapterSync.onPerformSync(AdapterSync.java:120)
E/AndroidRuntime(21964):    at android.content.AbstractThreadedSyncAdapter$SyncThread.run(AbstractThreadedSyncAdapter.java:247) 
```

解决此内存不足问题的最佳方法是什么以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T19:45:30.017

虽然这不是一个非常“优雅”的解决方案，但您可以尝试添加`android:largeHeap="true"`到清单中。尝试使用它运行，但我不建议将它留在那里，因为它可能会导致一些性能问题。
也就是说，如果它不能解决内存不足的问题，它可能在 JSON 或代码本身的某个地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:56:40.057

您可以尝试[Jackson 采用的流式处理方法](http://wiki.fasterxml.com/JacksonStreamingApi)：它似乎[允许增量写入](http://wiki.fasterxml.com/JacksonInFiveMinutes#Streaming_API_Example)，而不会产生库存 Android JSON 库所遭受的内存开销，该库需要在将整个 JSON 对象`String`写入连接流之前以形式序列化整个 JSON 对象。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-11T19:43:14.470

我检查了我的 AVD 配置。我有相同的 RAM 量。但是，我有更大的堆大小，比如 48 M。我认为，值得一试。

祝你好运。

# javascript - Google Apps 脚本：解析电子邮件时出现意外异常

> ID：15346991
> 
> 赞同：1
> 
> 时间：2013-03-11T19:31:31.657
> 
> 标签：javascript, google-apps-script

我正在尝试制作一个脚本，该脚本将组的电子邮件作为输入并解析所有成员以将它们添加到 CSV 文档中。

问题是我的一些组包含其他组，所以我必须递归调用我的函数。并且要递归调用它，我需要测试电子邮件地址以了解它是用户还是组。这里的代码：

```
var USERS = new Array();
var INDEX = 0;

function listAllUsersInGroup(email) {
  var temporaryObjectListMember = GroupsManager.getGroup(email).getAllMembers();
  for (z=0; z<temporaryObjectListMember.length; z++) {
    try {
      var group = GroupsManager.getGroup(temporaryObjectListMember[z]);
    }
    catch (err2){Logger.log(err2)}
    if (group != null) { listAllUsersInGroup(group.getId());}
    else {
      try {
        var user = UserManager.getUser(temporaryObjectListMember[z].substring(0,temporaryObjectListMember[z].lastIndexOf('@')));
      } catch(err) { Logger.log(err) }

      if (user != null) {
        USERS[INDEX] = user.getEmail();
        INDEX++;
      }
    }
  }
} 
```

我用 main 调用这个函数：

```
function main() {
  var email = "grouptest@domain.com";
  listAllUsersInGroup(email);
} 
```

当组包含用户和另一个组时，它会因“序列化继续时出现意外异常”错误而中断。

在这种情况下，try catch 似乎不起作用。

一种解决方案可能是测试电子邮件的类型（用户、组、别名......），但我还没有找到如何做到这一点。

谢谢 Jérémie BECOUSSE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T13:15:31.713

在对脚本稍作修改后，它似乎可以正常工作。

当您创建一个 google 组时，成员列表将自动删除所有别名，因此这些别名没有问题。您必须检查您是否面对其他组或电子邮件地址，可以来自 2 种类型：来自您域的电子邮件->您可以使用用户管理器功能找到它来自您的域外的电子邮件->我不相信有一种在向那些人发送东西之前知道它们是否有效的方法

下一个代码将返回您域中的“USERS”用户和非您域中的“EXTUSER”用户。（运行测试它（））

```
 function listAllUsersInGroup(email) {
  var temporaryObjectListMember = GroupsManager.getGroup(email).getAllMembers();
  for (var z in temporaryObjectListMember) {
    var member = temporaryObjectListMember[z];
    try {
      var group = GroupsManager.getGroup(member);
    }
    catch (err2){
      //Logger.log("is not group: "+err2);
    }

    if (group != null) { 
      Logger.log(member+" is a group");
      listAllUsersInGroup(member);
    }
    else {
      try {
        var user = UserManager.getUser(member.split('@')[0]);
      } catch(err) { 
        //Logger.log("it's not a known mail: "+err);
        EXTUSERS.push(member);
      }

      if (user != null) {
        USERS.push(member);
      }
    }
  }
  Logger.log("end of the group");
}

var EXTUSERS = [];
var USERS = [];

function testingIt(){
  listAllUsersInGroup("groupemailadress@domain.ext");
  Logger.log("recognized users are: "+USERS);
  Logger.log("unrecognized users are: "+EXTUSERS);
} 
```

# django - 在 django 中添加自定义用户权限

> ID：15346993
> 
> 赞同：1
> 
> 时间：2013-03-11T19:31:32.143
> 
> 标签：django, django-models, django-admin, django-views

我的 models.py 中有以下代码

```
from django.db import models

# Create your models here.
class LabName(models.Model):
    labsname=models.CharField(max_length=30,unique=True)
    #room_number=models.CharField(max_length=3)
    def __unicode__(self):
     return self.labsname
STAT=(('W','Working'),('N','Not Working'))
class ComponentDescription(models.Model):
    lab_Title=models.ForeignKey('Labname')
    component_Name = models.CharField(max_length=30)
    description = models.TextField(max_length=200)
    qty = models.IntegerField()
    purchased_Date = models.DateField()
    status = models.CharField(max_length=1,choices=STAT)
    to_Do = models.CharField(max_length=30,blank=True) 
    remarks = models.CharField(max_length=30)

    def __unicode__(self):
        return self.component_Name 
```

我的 admin.py 中有以下内容

```
from django.contrib import admin
from Lab_inventory.models import ComponentDescription,LabName

class ComponentDescriptionInline(admin.TabularInline):
    model = ComponentDescription
    extra=0

class LabNameAdmin(admin.ModelAdmin):
        inlines = [
        ComponentDescriptionInline,
    ]

class ComponentDescriptionAdmin(admin.ModelAdmin):
    list_display=('lab_Title','component_Name','description','qty','purchased_Date','status','to_Do','remarks')
        list_filter=('lab_Title','status','purchased_Date')
admin.site.register(LabName, LabNameAdmin)
admin.site.register(ComponentDescription,ComponentDescriptionAdmin) 
```

我想为用户分配自定义权限。我的意思是不同的用户只能修改分配给他们的实验室。Django 管理员允许添加编辑实验室权限，即编辑、删除和修改实验室。但问题是每个用户都可以访问所有的实验室

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:13:25.377

如果我正确理解了这个问题，那么您正在尝试控制每个对象的权限。

这应该会有所帮助： [向 django admin 添加每个对象的权限](https://stackoverflow.com/questions/3674463/adding-per-object-permissions-to-django-admin)

我也听说你可以用 django-guardian 包做到这一点，虽然我从未尝试过：http: [//pythonhosted.org/django-guardian/](http://pythonhosted.org/django-guardian/)