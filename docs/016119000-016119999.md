# StackOverflow 问答 16119000-16119999

# .htaccess - 从重写规则中匹配和排除链接

> ID：16119000
> 
> 赞同：0
> 
> 时间：2013-04-20T09:58:16.057
> 
> 标签：.htaccess, preg-match

我知道如何排除文件夹、文件类型，但我不知道如何排除包含特定单词的链接。我有这个规则：

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com
RewriteRule (.*) http://en.domain.com/$1 [QSA,L] 
```

如何从此规则中排除开头的链接：index.php?a=admin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:49:51.570

这应该可以解决问题：

```
RewriteCond %{HTTP_HOST} ^www\.domain\.com
RewriteCond %{REQUEST_FILENAME} index\.php
RewriteCond %{QUERY_STRING} !^a=admin
RewriteRule (.*) http://en.domain.com/$1 [QSA,L] 
```

在这里，我们添加了一个条件，即仅当主机为`www.domain.com`、被请求的文件为`index.php`且查询字符串不为时才可能发生重写`a=admin`。

因此，`www.domain.com/test`将重定向到`en.domain.com/test`，但`www.domain.com/index.php?a=admin`根本不会重定向。

# email - 无法在 Plesk 中打开网络邮件（未找到域）

> ID：16119004
> 
> 赞同：1
> 
> 时间：2013-04-20T09:58:33.887
> 
> 标签：email, dns, plesk, webmail

我已经使用 Plesk 邮件界面为我的域 admin@mydomain 创建了一个新的电子邮件地址，但我无法访问它。我试图通过单击“信息”图标旁边的小“邮件”图标在浏览器中打开它，它会打开一个带有“webmail.mydomain/...”网址的新窗口，但我的浏览器无法解析域。我在前一天重置了我的 DNS 设置，并且我确实有一个 webmail.mydomain 条目，所以我不知道该怎么做才能让它工作。

谢谢您的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T20:37:31.873

我今天也有同样的情况。我们使用 Ubuntu Parallel Plesk VPS。

只有一个添加的域有`webmail.somedomain.com`我们可以访问的，并且重新更改模式后的唯一区别是`*.201-MY-IP-173.maydomain.com. A 201.MY.IP.173`.

我不知道这是否是因为传播超过 6 小时造成的。现在我们可以访问`webmail.maydomain.com`.

在 ParallelPleskPanel > 域 > 控制面板 > 网站&域 > DNS 设置 > 管理。我做了 [关闭 DNS 服务] 并再次 [打开 DNS 服务] 以打开 DNS。现在我从 DNS 模板创建了 17 条 DNS 记录。

网址：`https://myVPS.myprovider.com/plesk/client@1/domain@3/dns/`

```
17 DNS records total

Host    Record type Value

maydomain.com.              A   201.MY.IP.173
webmail.maydomain.com.      A   201.MY.IP.173
smtp.maydomain.com.         A   201.MY.IP.173
imap.maydomain.com.         A   201.MY.IP.173
pop.maydomain.com.          A   201.MY.IP.173
ns.maydomain.com.           A   201.MY.IP.173
mail.maydomain.com.         A   201.MY.IP.173
pop3.maydomain.com.         A   201.MY.IP.173
*.201-MY-IP-173.maydomain.com.  A   201.MY.IP.173
maydomain.com.          MX (10) mail.maydomain.com.
www.maydomain.com.       CNAME  maydomain.com.
*.webmail.maydomain.com. CNAME  maydomain.com.
ftp.maydomain.com.       CNAME  maydomain.com.
201.MY.IP.173 / 24        PTR   maydomain.com.
maydomain.com.            NS    ns2.myprovider.com.
maydomain.com.            TXT   v=spf1 +a +mx -all
maydomain.com.            NS    myVPS.myprovider.com. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T09:45:06.783

谁是您域的 DNS 区域？如果 DNS 区域由域注册商提供服务，则不仅仅是将 A 记录“webmail”添加到区域。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T02:56:16.003

登录您的 Plesk 面板并转至：主页 > 工具和设置 > 邮件 > Webmail。

在 Webmail 中，您需要将您尝试使用的网站添加到列表中。名称可以是任何您想要的名称，并且 URL 应该是 webmail.yourdomain.com。

一旦启用（并且如果您的 DNS 设置已经正确），那么网络邮件链接应该开始工作。

# eclipse - 将 Sublime Text 与 Tomcat 集成

> ID：16119005
> 
> 赞同：8
> 
> 时间：2013-04-20T09:58:45.760
> 
> 标签：eclipse, maven, tomcat, sublimetext

在工作中，我们开发 Java 应用程序并使用 Eclipse。作为前端开发人员，我想完全切换到 Sublime，但它缺少 Eclipse 的一个特性，没有它我就无法工作。

开发时，我必须使用 Maven 构建项目并将其发布到 Tomcat 服务器。Eclipse 会自动完成这一切并重新发布更改的文件。

到目前为止，我使用 Maven 构建应用程序并使用 Maven-Tomcat 插件将其发布到 Tomcat。但是使用 Tomcat 7 重新发布是不可能的，并且更改的文件不会复制到工作目录。因此，每次在 Sublime 中更改文件时，我都必须打开 Eclipse 并刷新其工作区。

是否可以使用任何插件将此功能集成到 Sublime 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T19:51:04.590

这个插件[https://github.com/nlloyd/SublimeMaven](https://github.com/nlloyd/SublimeMaven)怎么样？明天我会试一试，然后我会告诉你它是否能完成这项工作（如果它适用于 ST3）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T17:47:50.240

我不会部署到您自己设置的特定 Tomcat 7 容器，而是使用[`tomcat7:run`](http://tomcat.apache.org/maven-plugin-2.0/tomcat7-maven-plugin/run-mojo.html)基于未打包的 Web 应用程序启动实时容器。

这应该让你得到你所追求的。

如果您不介意切换到码头作为服务器容器[`jszip:run`](http://jszip.org/jszip-maven-plugin/run-mojo.html)可以让您获得更多，但我仍在努力让该插件达到 beta 质量，所以 ymmv

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-29T05:09:42.573

Eclipse 对此有一个特性。选择**“使用本机挂钩或轮询刷新”**和**“访问时刷新”**。您应该选择两者。我尝试只选择*“使用本机钩子或轮询刷新”*，但它仅在您在 eclipse 中保持打开特定文件并在外部修改它时才有效。*“访问时刷新”*也不能单独工作。结合这些选项，它可以很好地工作。

![在此处输入图像描述](https://i.stack.imgur.com/Bifrq.png)

**PS：** *本机挂钩仅在**Windows**中可用。对于**Linux**和**Mac**，使用轮询。我不知道它的效率如何。*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-21T10:35:56.257

我也有这个问题。解决方法是同时打开 eclipse 和 sublime，而不是每次在 sublime 中进行一些更改时在 eclipse 中手动刷新您的项目，您可以使用此插件[https://github.com/psxpaul/EclipseJava7Refresher](https://github.com/psxpaul/EclipseJava7Refresher)来制作自动刷新。

PS：正如@Kapil Dev S所提到的，eclipse（使用“使用本机挂钩或轮询刷新”选中）可以在更改时自动刷新资源，但它不会在发生更改时立即检测到更改（至少需要几秒钟在 Linux 上对我来说）

# actionscript-3 - FileReference.save() 在浏览器 as3 上运行不稳定

> ID：16119008
> 
> 赞同：0
> 
> 时间：2013-04-20T09:58:59.023
> 
> 标签：actionscript-3, browser, air, flash-cs6, filereference

我想在 Flash 游戏中的 4 个不同位置使用 FileReference.save()。所有 4 种方法都是相同的（复制和粘贴）。在本地，所有 4 个都可以正常工作，但是当我将 swf 放入浏览器时，实际上只有一个可以按预期工作，而其他的则不能。在 Chrome 中，这 3 个都没有工作过。在 Safari 中，它们有时会起作用，但具有不确定性。可能是什么原因？任何想法？

顺便说一下，我用Air 2.5和Air 3.2 Desktop编译，我用的是Flash CS6

```
 private function onScreenShotButtonClicked(e:MouseEvent)
    {
        mScreenShotButton.removeEventListener(MouseEvent.CLICK, onScreenShotButtonClicked);

        var finalBitmapData:BitmapData = new BitmapData(810, 520, true, 0x00000000);
        var finalBitmap:Bitmap = new Bitmap(finalBitmapData, PixelSnapping.ALWAYS, false);
        finalBitmapData.draw(mParent.root);
        var finalData:ByteArray = new ByteArray();
        finalData = PNGSave.encode(finalBitmapData);

        var tempFileReference:FileReference = new FileReference();
        tempFileReference.addEventListener(Event.COMPLETE, onSaveCompleted);
        tempFileReference.addEventListener(Event.CANCEL, onSaveCancelled);
        tempFileReference.save(finalData, "boombox.png");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T01:38:20.543

常见的问题是您的方法没有 MouseEvent 实例参数。可能是您调用 Filereference.save () 但函数中没有事件参数。

# java - 将 XML Marshalled 数据传递到 ByteBuffer

> ID：16119012
> 
> 赞同：0
> 
> 时间：2013-04-20T09:59:35.760
> 
> 标签：java, xml, bytebuffer

对于当前项目，我需要将 XML 数据写入 ByteBuffer 以将输出 XML 写入二进制格式（例如 .dat）。

对于与我的xml元素对应的每个java对象，是否有一个lib或类将其属性的值写入ByteBuffer（或一些类似的实现），同时尊重属性类型（int -> buffer.putInt（intAttribute ) ...

PS：理想情况下，我需要这种方法将每个元素序列的大小放在这些元素的值之前

编辑：这是我想要的一个具体例子

假设我有以下类定义 walker_template xml 元素

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
"routestep"
})
@XmlRootElement(name = "walker_template")
public class WalkerTemplate {

protected List<Routestep> routestep;

@XmlAttribute(name = "route_id")
protected String routeId;

public List<Routestep> getRoutestep() {
    if (routestep == null) {
        routestep = new ArrayList<Routestep>();
    }
    return this.routestep;
} 
```

RouteStep 是：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
"value"
})
@XmlRootElement(name = "routestep")
public class Routestep {

@XmlAttribute
protected Integer step;
@XmlAttribute
protected Float x;
@XmlAttribute
protected Float y;
@XmlAttribute
protected Float z; 
```

这些类定义了我通常使用 JAXB 编组的对象，然后将其写入输出文件。

```
marshaller.marshal(templatesToWrite, myXMLStreamWriter); 
```

我现在想要的是以二进制格式写入这些对象的数据。

执行此操作的方法应如下所示（对于此示例）：

```
ByteBuffer buffer = new ByteBuffer.allocate(size);
buffer.putInt(myWalkerTemplate.getRouteId());
buffer.putInt(myWalkerTemplate.getRouteSteps().size());
for (Routestep step : myWalkerTemplate.getRouteSteps()) {
    buffer.putFloat(step.getX());
    buffer.putFloat(step.getY());
    buffer.putFloat(step.getZ());
} 
```

那么，是否有任何库/类可以为任何对象自动执行此操作，当然这些对象的类（例如使用 JAXBContext 的 Marshaller）。

谢谢

# c# - 如何使用 ffmpeg 压缩 avi 文件？

> ID：16119013
> 
> 赞同：0
> 
> 时间：2013-04-20T09:59:47.680
> 
> 标签：c#

我在我的项目中使用的这个链接中有这个类：

[http://jasonjano.wordpress.com/2010/02/09/a-simple-c-wrapper-for-ffmpeg/](http://jasonjano.wordpress.com/2010/02/09/a-simple-c-wrapper-for-ffmpeg/)

现在在 Form1 中我像这样使用它：在我的 timer1 滴答事件中，我创建了 avi 文件，它可以正常工作：

```
private void timer1_Tick(object sender, EventArgs e)
        {
            if (playImages == true)
            {
                timer1.Enabled = false;
                play();
                timer1.Enabled = true;
            }
            else
            {
                af.CreateAvi(this.sc);

            }
        } 
```

然后压缩我添加了一个新功能：

```
public string ConvertH264(string inputPath, string outPath)
        {

            string params1 = string.Format("-i {0}  -vcodec mpeg4 -acodec aac -strict -2 -ar 22050 -b:a 128k {1}", inputPath, outPath);
            string output = _converter.RunProcess(params1);
            return output;
        } 
```

然后在 button3 中我停止计时器并且 avi 文件在硬盘上，我做了：

```
ConvertH264(@"D:\testdata\new.avi", @"D:\testdata\new.flv"); 
```

结果在我的硬盘上有两个文件：

新的.avi 和新的.flv

avi 文件是 324mb，flv 文件是 960kb 我可以播放 avi 文件，但我无法在任何地方播放 flv 文件。flv 文件有问题。

flv 文件应该是压缩文件。

可能是什么问题呢 ？也许与 ffmpeg 参数有关？

```
string params1 = string.Format("-i {0}  -vcodec mpeg4 -acodec aac -strict -2 -ar 22050 -b:a 128k {1}", inputPath, outPath); 
```

如果需要：这是我在上面的链接中如何使用它的类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.IO;
using System.Diagnostics;
using System.Configuration;
using System.Text.RegularExpressions;

namespace ScreenVideoRecorder
{
    public class Converter
    {
        #region Properties
        private string _ffExe;
        public string ffExe
        {
            get
            {
                return _ffExe;
            }
            set
            {
                _ffExe = value;
            }
        }

        private string _WorkingPath;
        public string WorkingPath
        {
            get
            {
                return _WorkingPath;
            }
            set
            {
                _WorkingPath = value;
            }
        }

        #endregion

        #region Constructors
        public Converter()
        {
            Initialize();
        }
        public Converter(string ffmpegExePath)
        {
            _ffExe = ffmpegExePath;
            Initialize();
        }
        #endregion

        #region Initialization
        private void Initialize()
        {
            //first make sure we have a value for the ffexe file setting
            if (string.IsNullOrEmpty(_ffExe))
            {
                _ffExe = @"D:\temp\compress\ffmpeg\ffmpeg.exe"; 

               /* if (o == null)
                {
                    throw new Exception("Could not find the location of the ffmpeg exe file.  The path for ffmpeg.exe " +
                    "can be passed in via a constructor of the ffmpeg class (this class) or by setting in the app.config or web.config file.  " +
                    "in the appsettings section, the correct property name is: ffmpeg:ExeLocation");
                }
                else
                {
                    if (string.IsNullOrEmpty(o.ToString()))
                    {
                        throw new Exception("No value was found in the app setting for ffmpeg:ExeLocation");
                    }
                    _ffExe = o.ToString();
                }*/
            }

            //Now see if ffmpeg.exe exists
            string workingpath = GetWorkingFile();
            if (string.IsNullOrEmpty(workingpath))
            {
                //ffmpeg doesn't exist at the location stated.
                throw new Exception("Could not find a copy of ffmpeg.exe");
            }
            _ffExe = workingpath;

            //now see if we have a temporary place to work
            if (string.IsNullOrEmpty(_WorkingPath))
            {
                _WorkingPath = @"D:\temp\compress\ffmpeg\";
               /* if (o != null)
                {
                    _WorkingPath = o.ToString();
                }
                else
                {
                    _WorkingPath = string.Empty;
                }*/
            }
        }

        private string GetWorkingFile()
        {
            //try the stated directory
            if (File.Exists(_ffExe))
            {
                return _ffExe;
            }

            //oops, that didn't work, try the base directory
            if (File.Exists(Path.GetFileName(_ffExe)))
            {
                return Path.GetFileName(_ffExe);
            }

            //well, now we are really unlucky, let's just return null
            return null;
        }
        #endregion

        #region Get the File without creating a file lock
        public static System.Drawing.Image LoadImageFromFile(string fileName)
        {
            System.Drawing.Image theImage = null;
            using (FileStream fileStream = new FileStream(fileName, FileMode.Open,
            FileAccess.Read))
            {
                byte[] img;
                img = new byte[fileStream.Length];
                fileStream.Read(img, 0, img.Length);
                fileStream.Close();
                theImage = System.Drawing.Image.FromStream(new MemoryStream(img));
                img = null;
            }
            GC.Collect();
            return theImage;
        }

        public static MemoryStream LoadMemoryStreamFromFile(string fileName)
        {
            MemoryStream ms = null;
            using (FileStream fileStream = new FileStream(fileName, FileMode.Open,
            FileAccess.Read))
            {
                byte[] fil;
                fil = new byte[fileStream.Length];
                fileStream.Read(fil, 0, fil.Length);
                fileStream.Close();
                ms = new MemoryStream(fil);
            }
            GC.Collect();
            return ms;
        }
        #endregion

        #region Run the process
        public string RunProcess(string Parameters)
        {
            //create a process info
            ProcessStartInfo oInfo = new ProcessStartInfo(this._ffExe, Parameters);
            oInfo.UseShellExecute = false;
            oInfo.CreateNoWindow = true;
            oInfo.RedirectStandardOutput = true;
            oInfo.RedirectStandardError = true;

            //Create the output and streamreader to get the output
            string output = null; StreamReader srOutput = null;

            //try the process
            try
            {
                //run the process
                Process proc = System.Diagnostics.Process.Start(oInfo);

                proc.WaitForExit();

                //get the output
                srOutput = proc.StandardError;

                //now put it in a string
                output = srOutput.ReadToEnd();

                proc.Close();
            }
            catch (Exception)
            {
                output = string.Empty;
            }
            finally
            {
                //now, if we succeded, close out the streamreader
                if (srOutput != null)
                {
                    srOutput.Close();
                    srOutput.Dispose();
                }
            }
            return output;
        }
        #endregion

        #region GetVideoInfo
        public VideoFile GetVideoInfo(MemoryStream inputFile, string Filename)
        {
            string tempfile = Path.Combine(this.WorkingPath, System.Guid.NewGuid().ToString() + Path.GetExtension(Filename));
            FileStream fs = File.Create(tempfile);
            inputFile.WriteTo(fs);
            fs.Flush();
            fs.Close();
            GC.Collect();

            VideoFile vf = null;
            try
            {
                vf = new VideoFile(tempfile);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            GetVideoInfo(vf);

            try
            {
                File.Delete(tempfile);
            }
            catch (Exception)
            {

            }

            return vf;
        }
        public VideoFile GetVideoInfo(string inputPath)
        {
            VideoFile vf = null;
            try
            {
                vf = new VideoFile(inputPath);
            }
            catch (Exception ex)
            {
                throw ex;
            }
            GetVideoInfo(vf);
            return vf;
        }
        public void GetVideoInfo(VideoFile input)
        {
            //set up the parameters for video info
            string Params = string.Format("-i {0}", input.Path);
            string output = RunProcess(Params);
            input.RawInfo = output;

            //get duration
            Regex re = new Regex("[D|d]uration:.((\\d|:|\\.)*)");
            Match m = re.Match(input.RawInfo);

            if (m.Success)
            {
                string duration = m.Groups[1].Value;
                string[] timepieces = duration.Split(new char[] { ':', '.' });
                if (timepieces.Length == 4)
                {
                    input.Duration = new TimeSpan(0, Convert.ToInt16(timepieces[0]), Convert.ToInt16(timepieces[1]), Convert.ToInt16(timepieces[2]), Convert.ToInt16(timepieces[3]));
                }
            }

            //get audio bit rate
            re = new Regex("[B|b]itrate:.((\\d|:)*)");
            m = re.Match(input.RawInfo);
            double kb = 0.0;
            if (m.Success)
            {
                Double.TryParse(m.Groups[1].Value, out kb);
            }
            input.BitRate = kb;

            //get the audio format
            re = new Regex("[A|a]udio:.*");
            m = re.Match(input.RawInfo);
            if (m.Success)
            {
                input.AudioFormat = m.Value;
            }

            //get the video format
            re = new Regex("[V|v]ideo:.*");
            m = re.Match(input.RawInfo);
            if (m.Success)
            {
                input.VideoFormat = m.Value;
            }

            //get the video format
            re = new Regex("(\\d{2,3})x(\\d{2,3})");
            m = re.Match(input.RawInfo);
            if (m.Success)
            {
                int width = 0; int height = 0;
                int.TryParse(m.Groups[1].Value, out width);
                int.TryParse(m.Groups[2].Value, out height);
                input.Width = width;
                input.Height = height;
            }
            input.infoGathered = true;
        }
        #endregion

        #region Convert to FLV
        public OutputPackage ConvertToFLV(MemoryStream inputFile, string Filename)
        {
            string tempfile = Path.Combine(this.WorkingPath, System.Guid.NewGuid().ToString() + Path.GetExtension(Filename));
            FileStream fs = File.Create(tempfile);
            inputFile.WriteTo(fs);
            fs.Flush();
            fs.Close();
            GC.Collect();

            VideoFile vf = null;
            try
            {
                vf = new VideoFile(tempfile);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            OutputPackage oo = ConvertToFLV(vf);

            try
            {
                File.Delete(tempfile);
            }
            catch (Exception)
            {

            }

            return oo;
        }
        public OutputPackage ConvertToFLV(string inputPath)
        {
            VideoFile vf = null;
            try
            {
                vf = new VideoFile(inputPath);
            }
            catch (Exception ex)
            {
                throw ex;
            }

            OutputPackage oo = ConvertToFLV(vf);
            return oo;
        }
        public OutputPackage ConvertToFLV(VideoFile input)
        {
            if (!input.infoGathered)
            {
                GetVideoInfo(input);
            }
            OutputPackage ou = new OutputPackage();

            //set up the parameters for getting a previewimage
            string filename = System.Guid.NewGuid().ToString() + ".jpg";
            int secs;

            //divide the duration in 3 to get a preview image in the middle of the clip
            //instead of a black image from the beginning.
            secs = (int)Math.Round(TimeSpan.FromTicks(input.Duration.Ticks / 3).TotalSeconds, 0);

            string finalpath = Path.Combine(this.WorkingPath, filename);
            string Params = string.Format("-i {0} {1} -vcodec mjpeg -ss {2} -vframes 1 -an -f rawvideo", input.Path, finalpath, secs);
            string output = RunProcess(Params);

            ou.RawOutput = output;

            if (File.Exists(finalpath))
            {
                ou.PreviewImage = LoadImageFromFile(finalpath);
                try
                {
                    File.Delete(finalpath);
                }
                catch (Exception) { }
            }
            else
            { //try running again at frame 1 to get something
                Params = string.Format("-i {0} {1} -vcodec mjpeg -ss {2} -vframes 1 -an -f rawvideo", input.Path, finalpath, 1);
                output = RunProcess(Params);

                ou.RawOutput = output;

                if (File.Exists(finalpath))
                {
                    ou.PreviewImage = LoadImageFromFile(finalpath);
                    try
                    {
                        File.Delete(finalpath);
                    }
                    catch (Exception) { }
                }
            }

            finalpath = Path.Combine(this.WorkingPath, filename);
            filename = System.Guid.NewGuid().ToString() + ".flv";
            Params = string.Format("-i {0} -y -ar 22050 -ab 64 -f flv {1}", input.Path, finalpath);
            output = RunProcess(Params);

            if (File.Exists(finalpath))
            {
                ou.VideoStream = LoadMemoryStreamFromFile(finalpath);
                try
                {
                    File.Delete(finalpath);
                }
                catch (Exception) { }
            }
            return ou;
        }
        #endregion
    }

    public class VideoFile
    {
        #region Properties
        private string _Path;
        public string Path
        {
            get
            {
                return _Path;
            }
            set
            {
                _Path = value;
            }
        }

        public TimeSpan Duration { get; set; }
        public double BitRate { get; set; }
        public string AudioFormat { get; set; }
        public string VideoFormat { get; set; }
        public int Height { get; set; }
        public int Width { get; set; }
        public string RawInfo { get; set; }
        public bool infoGathered { get; set; }
        #endregion

        #region Constructors
        public VideoFile(string path)
        {
            _Path = path;
            Initialize();
        }
        #endregion

        #region Initialization
        private void Initialize()
        {
            this.infoGathered = false;
            //first make sure we have a value for the video file setting
            if (string.IsNullOrEmpty(_Path))
            {
                throw new Exception("Could not find the location of the video file");
            }

            //Now see if the video file exists
            if (!File.Exists(_Path))
            {
                throw new Exception("The video file " + _Path + " does not exist.");
            }
        }
        #endregion
    }

    public class OutputPackage
    {
        public MemoryStream VideoStream { get; set; }
        public System.Drawing.Image PreviewImage { get; set; }
        public string RawOutput { get; set; }
        public bool Success { get; set; }
    }
} 
```

这是日志：

```
4/20/2013--5:32 PM ==> 
4/20/2013--6:47 PM ==> ffmpeg version N-52233-gee94362 Copyright (c) 2000-2013 the FFmpeg developers
4/20/2013--6:47 PM ==>   built on Apr 18 2013 02:55:39 with gcc 4.8.0 (GCC)
4/20/2013--6:47 PM ==>   configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-avisynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enable-iconv --enable-libass --enable-libbluray --enable-libcaca --enable-libfreetype --enable-libgsm --enable-libilbc --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsoxr --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx --enable-libx264 --enable-libxavs --enable-libxvid --enable-zlib
4/20/2013--6:47 PM ==>   libavutil      52\. 26.100 / 52\. 26.100
4/20/2013--6:47 PM ==>   libavcodec     55\.  2.100 / 55\.  2.100
4/20/2013--6:47 PM ==>   libavformat    55\.  2.100 / 55\.  2.100
4/20/2013--6:47 PM ==>   libavdevice    55\.  0.100 / 55\.  0.100
4/20/2013--6:47 PM ==>   libavfilter     3\. 56.103 /  3\. 56.103
4/20/2013--6:47 PM ==>   libswscale      2\.  2.100 /  2\.  2.100
4/20/2013--6:47 PM ==>   libswresample   0\. 17.102 /  0\. 17.102
4/20/2013--6:47 PM ==>   libpostproc    52\.  3.100 / 52\.  3.100
4/20/2013--6:47 PM ==> Input #0, avi, from 'D:\testdata\new.avi':
4/20/2013--6:47 PM ==>   Duration: 00:00:02.12, start: 0.000000, bitrate: 1658893 kb/s
4/20/2013--6:47 PM ==>     Stream #0:0: Video: rawvideo, bgra, 1920x1080, 25 tbr, 25 tbn, 25 tbc
4/20/2013--6:47 PM ==> Codec AVOption b (set bitrate (in bits/s)) specified for output file #0 (D:\testdata\new.flv) has not been used for any stream. The most likely reason is either wrong type (e.g. a video option with no video streams) or that it is a private option of some encoder which was not actually used for any stream.
4/20/2013--6:47 PM ==> Output #0, flv, to 'D:\testdata\new.flv':
4/20/2013--6:47 PM ==>   Metadata:
4/20/2013--6:47 PM ==>     encoder         : Lavf55.2.100
4/20/2013--6:47 PM ==>     Stream #0:0: Video: mpeg4 ([9][0][0][0] / 0x0009), yuv420p, 1920x1080, q=2-31, 200 kb/s, 1k tbn, 25 tbc
4/20/2013--6:47 PM ==> Stream mapping:
4/20/2013--6:47 PM ==>   Stream #0:0 -> #0:0 (rawvideo -> mpeg4)
4/20/2013--6:47 PM ==> Press [q] to stop, [?] for help
4/20/2013--6:47 PM ==> frame=    8 fps=0.0 q=18.4 size=     599kB time=00:00:00.32 bitrate=15326.9kbits/s    
4/20/2013--6:47 PM ==> frame=   14 fps= 12 q=31.0 size=     669kB time=00:00:00.56 bitrate=9779.3kbits/s    
4/20/2013--6:47 PM ==> frame=   20 fps= 12 q=31.0 size=     680kB time=00:00:00.80 bitrate=6966.3kbits/s    
4/20/2013--6:47 PM ==> frame=   24 fps= 11 q=31.0 size=     688kB time=00:00:00.96 bitrate=5872.3kbits/s    
4/20/2013--6:47 PM ==> frame=   31 fps= 11 q=31.0 size=     764kB time=00:00:01.24 bitrate=5044.3kbits/s    
4/20/2013--6:47 PM ==> frame=   37 fps= 11 q=24.8 size=     853kB time=00:00:01.48 bitrate=4723.3kbits/s    
4/20/2013--6:47 PM ==> frame=   42 fps= 11 q=31.0 size=     859kB time=00:00:01.68 bitrate=4190.6kbits/s    
4/20/2013--6:47 PM ==> frame=   48 fps= 11 q=31.0 size=     885kB time=00:00:01.92 bitrate=3777.2kbits/s    
4/20/2013--6:47 PM ==> frame=   53 fps= 11 q=31.0 size=     956kB time=00:00:02.12 bitrate=3695.0kbits/s    
4/20/2013--6:47 PM ==> frame=   53 fps= 11 q=31.0 Lsize=     956kB time=00:00:02.12 bitrate=3695.1kbits/s    
4/20/2013--6:47 PM ==> 
4/20/2013--6:47 PM ==> video:955kB audio:0kB subtitle:0 global headers:0kB muxing overhead 0.135293%
4/20/2013--6:47 PM ==> 
4/20/2013--6:47 PM ==> 
```

# php - MySQL 是否对查询进行排队？

> ID：16119020
> 
> 赞同：5
> 
> 时间：2013-04-20T10:00:31.350
> 
> 标签：php, mysql, sql, database

如果有两个人同时向数据库发送相同的查询并且一个人让另一个查询返回不同的东西会发生什么？

我有一家商店，那里只剩下一件商品。两个或更多人购买该商品，查询同时到达 MySQL 服务器。我的猜测是它只会排队，但如果是这样，MySQL如何选择第一个执行，我可以对此产生影响吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T10:47:21.867

> sending the same query at the same time

**QUERIES DO NOT ALWAYS RUN IN PARALLEL**

It depends on the database engine. With MyISAM, nearly every query acquires a table level lock meaning that the queries are run sequentially as a queue. With most of the other engines they may run in parallel.

echo_me says `nothing happens at the exact same time and a CPU does not do everything at once`

That's not exactly true. It's possible that a DBMS could run on a machine with more than one cpu, and with more than one network interface. It's **very** improbable that 2 queries could arrive at the same time - but not impossible, hence there is a mutex to ensure that the paring/execution transition only runs as a single thread (of execution - not necesarily the same light weight process).

There's 2 approaches to solving concurent DML - either to use transactions (where each user effectively gets a clone of the database) and when the queries have completed the DBMS tries to reconcile any changes - if the reconciliation fails, then the DBMS rolls back one of the queries and reports it as failed. The other approach is to use row-level locking - the DBMS identifies the rows which will be updated by a query and marks them as reserved for update (other users can read the original version of each row but any attempt to update the data will be blocked until the row is available again).

Your problem is that you have two mysql clients, each of which have retrieved the fact that there is one item of stock left. This is further complicated by the fact that (since you mention PHP) the stock levels may have been retrieved in a different DBMS session than the subsequent stock adjustment - you cannot have a transaction spanning more than HTTP request. Hence you need revalidate any fact maintained outside the DBMS within a single transaction.

Optimistic locking can create a pseudo - transaction control mechanism - you flag a record you are about to modify with a timestamp and the user identifier (with PHP the PHP session ID is a good choice) - if when you come to modify it, something else has changed it, then your code knows the data it retrieved previously is invalid. However this can lead to other complications.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-20T10:03:05.247

它们在用户请求时立即执行，因此如果有 10 个用户同时请求查询，那么将有 10 个查询同时执行。

任何事情都不会同时发生，CPU 也不会一次完成所有事情。它一次做一件事情（每个核心和/或线程）。如果有 10 个用户正在访问运行查询的页面，他们将以特定顺序“访问”服务器并按该顺序进行处理（尽管该顺序可能以毫秒为单位）。但是，如果一个页面上有多个查询，您不能确定一个用户页面上的所有查询都会在另一个用户页面上的查询开始之前完成。这可能会导致并发问题。

编辑：

运行[`SHOW PROCESSLIST`](http://dev.mysql.com/doc/refman/5.1/en/show-processlist.html)以查找要杀死的连接的 id。

`SHOW PROCESSLIST`将为您提供所有当前正在运行的查询的列表。

从[这里](https://stackoverflow.com/questions/9721724/mysql-is-there-a-queries-queue-somewhare)。

MySQL 将在快速 CPU 上运行良好，因为每个查询都在单个线程中运行，并且不能跨 CPU 并行化。

*   [mysql如何使用内存](http://dev.mysql.com/doc/refman/5.0/en/memory-use.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-20T10:06:24.587

考虑一个类似于以下的查询：

```
UPDATE items SET quantity = quantity - 1 WHERE id = 100 
```

无论 MySQL 服务器并行运行多少查询，如果运行 2 个这样的查询并且`id`100 的行有`quantity`1 个，那么默认情况下会发生这样的事情：

1.  第一个查询将行锁定在`items`where `id`is 100
2.  第二个查询尝试做同样的事情，但是该行被锁定，所以它等待
3.  第一个查询将`quantity`1 更改为 0 并解锁该行
4.  第二个查询再次尝试，现在看到该行已解锁
5.  第二个查询将行锁定在`items`where `id`is 100
6.  第二个查询将`quantity`0 更改为 -1 并解锁该行

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T10:07:38.243

This is essentially a concurrency question. There are ways to ensure concurrency in MySQL by using transactions. This means that in your eshop you can ensure that race conditions like the ones you describe won't be an issue. See link below about transactions in MySQL.

[http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-transactions.html](http://dev.mysql.com/doc/refman/5.0/en/sql-syntax-transactions.html)

[http://zetcode.com/databases/mysqltutorial/transactions/](http://zetcode.com/databases/mysqltutorial/transactions/)

Depending on your isolation level different outcomes will be returned from two concurrent queries.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T10:07:21.767

MySQL 中的查询是并行处理的。您可以[在此处阅读有关实施的更多信息](http://dev.mysql.com/doc/refman/5.1/en/ansi-diff-transactions.html)。

# hadoop - 如何使用 cygwin 配置 hbase？

> ID：16119022
> 
> 赞同：2
> 
> 时间：2013-04-20T10:00:54.120
> 
> 标签：hadoop, cygwin, hbase

我已经`Hadoop`在 cygwin 中配置了我现在我正在尝试配置 Hbase 我在 hbase-evn.sh 中做了一些更改：

```
export JAVA_HOME=C:\\java\\jre
export HBASE_CLASSPATH=C:\\cygwin\\usr\\local\\hbase\\lib\\zookeeper-3.3.2
export HBASE_REGIONSERVERS=C:\\cygwin\\usr\\local\\hbase\\conf\\regionservers
export HBASE_MANAGES_ZK=true 
```

以及 hbase-site.xml 中的一些更改

```
 <property>
     <name>hbase.rootdir</name>
     <value>hdfs://localhost:9100/hbase</value>
 </property>

 <property>
     <name>hbase.cluster.distributed</name>
     <value>true</value>
 </property>

 <property>
       <name>hbase.zookeeper.quorum</name>
       <value>localhost</value>
 </property>

 <property>
      <name>dfs.replication</name>
      <value>1</value>
 </property> 
```

现在，当我使用命令 bin/start-hbase.sh 说明我的 hbase 服务时，输出如下： ![输出](https://i.stack.imgur.com/4EiDm.png)

你能帮我解决这个问题吗？

# java - 使用 AES(128) 加密和解密音频/视频文件

> ID：16119028
> 
> 赞同：1
> 
> 时间：2013-04-20T10:01:45.280
> 
> 标签：java, sockets, aes, encryption

我正在编写一个程序，该程序将音频/视频文件发送到服务器，其中数据被加密并通过套接字发送回客户端。在客户端部分，数据被提取并解密并存储到另一个文件中。数据也被加密和解密，但解密后的文件无法正常播放。

任何人都可以帮忙吗？我的代码如下

**服务器：**

```
 public class Ser_enc 
    {
    private static int packet_count;
    private static int packet_size=1024;
    public static void main(String args[]) throws IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException
    {
    System.out.println("Hi iam server");
    ServerSocket ss=new ServerSocket(2001);
    Socket s=ss.accept();

    BufferedReader in=new BufferedReader(new InputStreamReader(s.getInputStream()));//sockin

    OutputStream pw= s.getOutputStream();

    String filename=in.readLine();
    System.out.println("The file requested is " +filename);

    String loc="F://files//source_files//"+filename;

    File file=new File(loc);

    if(file.exists())
    System.out.println("File found");

    File to_b_encf =new File("F:/files/source_files//encryped.mp3");

    if(!to_b_encf.exists())
    to_b_encf.createNewFile();

    System.out.println("encrypting");

    Cipher encipher = Cipher.getInstance("AES");

    KeyGenerator kgen = KeyGenerator.getInstance("AES");

    SecretKey skey = kgen.generateKey();//initiate key

    encipher.init(Cipher.ENCRYPT_MODE, skey);

    FileInputStream fsrc=new FileInputStream(loc);

    FileOutputStream encfile=new FileOutputStream(to_b_encf);

    CipherInputStream cis = new CipherInputStream(fsrc, encipher);

    int read;
    while((read=cis.read())!=-1)
    {
      encfile.write(read);
      encfile.flush();
    }

     BufferedInputStream fsrcread=new BufferedInputStream(new   FileInputStream(to_b_encf));

    packet_count = (int) Math.ceil((to_b_encf.length()/packet_size));
    System.out.println("The number of packets to send is :" +packet_count);
    for(int i=0;i<=packet_count;i++)
    {
    byte[] packet=new byte[packet_size];

    fsrcread.read(packet, 0, packet_size);

    int per=(int)((i*100)/(packet_count));

    System.out.println("Transfer " +per +"% done");

    pw.write(packet);
    pw.flush();

    }
    s.close();
   pw.close();
   cis.close();
   encfile.close();
   }
   } 
```

**客户：**

```
public class Cli_dec 
{
    private static Socket s;
     private static int read;
    public static void main(String args[]) throws UnknownHostException, IOException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException
    {

        s=new Socket("127.0.0.1",2001);

        PrintWriter out=new PrintWriter(s.getOutputStream());

        String fname=JOptionPane.showInputDialog(null);

        out.write(fname+"\n");
        out.flush();

        int count;
        byte[] buf=new byte[100000];
        System.out.println("Receiving packets");
        File f=new File("F:/files/source_files//decryped.mp3");
        FileOutputStream to_b_decf=new FileOutputStream(f);
        BufferedOutputStream bos=new BufferedOutputStream(to_b_decf);
        InputStream in1=s.getInputStream();

        while((count=in1.read(buf))>0)
        {
        bos.write(buf, 0,count);
        bos.flush();
        }

        File destfile =new File("F:/files/source_files//original.mp3");

        if(!destfile.exists())
        destfile.createNewFile();

        Cipher decipher = Cipher.getInstance("AES");//initiate a cipher for decryption
        KeyGenerator kgen = KeyGenerator.getInstance("AES");
        SecretKey skey = kgen.generateKey();//initiate key
        decipher.init(Cipher.DECRYPT_MODE, skey);//decrypt the file 

        FileInputStream decf=new FileInputStream(f);

        System.out.println("decrypting");

        CipherInputStream c_decf=new CipherInputStream(decf,decipher);

        FileOutputStream destf=new FileOutputStream(destfile);

        CipherOutputStream cout=new CipherOutputStream(destf,decipher);

        while((read=c_decf.read())!=-1)
        {
         cout.write(read);
         cout.flush();
         }
        c_decf.close();
        destf.close();
        cout.close();
        decf.close();
        s.close();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:30:48.513

您`kgen.generateKey()`在客户端中使用，它会生成一个随机密钥 - 您需要为服务器和客户端使用相同的密钥，否则您会得到乱码。

这个问题的[公认答案](https://stackoverflow.com/questions/992019/java-256-bit-aes-password-based-encryption)有一些很好的加密代码可供您使用 - 用于`KeySpec spec = new PBEKeySpec(password, salt, 64, 128);`减少迭代次数并使用 128 位加密而不是 256 位加密。此代码还使用密码块链接而不是电子密码本，这更加安全[（有关密码模式的说明，请参阅此 Wikipedia 文章）](http://en.wikipedia.org/wiki/Block_cipher_mode_of_operation)。服务器和客户端都需要使用相同的密钥生成代码，以便它们的密钥匹配；除了使用相同的密钥之外，加密器和解密器还需要使用相同的初始化向量 (IV)，但这不是秘密（可以以明文形式传输）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-24T12:43:38.183

我正在开发像你问的那样的应用程序，你的代码对我很有帮助。

在客户端模块中你做了双重解密......我的代码看起来像这样

```
CipherInputStream c_decf = new CipherInputStream(decf, decipher);

    FileOutputStream destf = new FileOutputStream(destfile);

    //CipherOutputStream cout = new CipherOutputStream(destf, decipher);

    while ((read = c_decf.read()) != -1) {
        destf.write(read);
        destf.flush();
    }
    c_decf.close();
    destf.close();
   // cout.close();
    decf.close(); 
```

只需将其删除并生成密钥，如[我如何使用 AES 在 Android 中解密文件？](https://stackoverflow.com/questions/19568998/how-do-i-decrypt-a-file-in-android-with-aes). 代码有效。

感谢您发布这个问题。

# localhost - 虚拟主机设置后 Wamp 服务未启动

> ID：16119033
> 
> 赞同：0
> 
> 时间：2013-04-20T10:02:08.810
> 
> 标签：localhost, wamp, virtualhost

最近我对 httpd-vhosts 文件进行了一些更改以创建虚拟主机。之后 wamp 图标状态不再变为绿色，因此保持橙色。如果已经通过 TEST PORT80 运行，我检查了其他 http 程序，但没有发现要运行的程序。我想当我为虚拟主机配置时可能会有一些错误。以下是我在 wamp 停止工作之前尝试过的方法。请告诉我所做的配置是否正确或不正确。请提出一些配置错误的 vhosts 文件的解决方案。

这是我在 httpd-vhosts 文件中包含的行

```
 <VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot "c:/wamp/www"
   ServerName tastingroom.com
  #ServerAlias www.dummy-host.example.com
   ErrorLog "logs/localhost-error.log"
   CustomLog "logs/localhost-access.log" common
 </VirtualHost>

 <VirtualHost *:80>
   ServerAdmin webmaster@dummy-host2.example.com
   DocumentRoot "c:\wamp\www"
   ServerName tastingroom.com
   ServerAlias www.tastingroom.com
   ErrorLog "logs/tastingroom-error.log"
   CustomLog "logs/tastingroom-access.log" common

 <directory "c:\wamp\www">
     Option Indexes FollowSymLinks
     AllowOerride all
     Order Deny,Allow
     Deny from all
     Allow from 127.0.0.1     
 </directory>

 </VirtualHost> 
```

在 Windows 文件夹的 system32 内的“hosts”文件中

```
enter code here

127.0.0.1 localhost
127.0.0.1 tastingroom.com 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:06:33.613

我认为不允许使用相同的服务器名称，请您检查 apache 错误日志并查看它显示的错误消息。此外，您的 VirtualHost 条目应位于下方并删除第一个条目，因为它是多余的

```
<VirtualHost *:80>
   ServerAdmin webmaster@dummy-host2.example.com
   DocumentRoot "c:\wamp\www"
   ServerName tastingroom.com
   ServerAlias www.tastingroom.com tastingroom.com
   ErrorLog "logs/tastingroom-error.log"
   CustomLog "logs/tastingroom-access.log" common

 <directory "c:\wamp\www">
     Option Indexes FollowSymLinks
     AllowOerride all
     Order Deny,Allow
     Deny from all
     Allow from 127.0.0.1     
 </directory>

 </VirtualHost> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:19:30.940

我希望你对这些命令了如指掌，但我仍然建议你遵循，因为我已经通过以下过程成功了。

> 这是我在ubuntu pc中完成的

在终端中输入以下内容

```
sudo nano /etc/hosts (then enter) 
```

它可能会要求输入密码，然后它会打开主机文件，其中给出一般 IP，如下所示

```
127.0.0.1   project.local 
```

接下来，执行命令

`cd /etc/apache2/sites-enabled`（然后输入）

它看起来像`/etc/apache2/sites-enabled $`

然后

`sudo nano project.local`

确保 project.local 必须与我们之前输入的相同。现在，

```
<VirtualHost   *:80>
ServerName     project.local
DocumentRoot   /var/www/project
</VirtualHost> 
```

最后..

`sudo /etc/init.d/apache2 restart`

# apache - Apache：更改 httpd.conf 的路径

> ID：16119039
> 
> 赞同：2
> 
> 时间：2013-04-20T10:02:44.953
> 
> 标签：apache

几个月前，我在 Mac OSX 10.6.8 上安装了 Apache。Apache 自动安装在 /usr/local/apache2。在一些小问题之后，我成功地让 Apache 监听端口 8080，并且我能够让 Apache 从 /usr/local/apache2/cgi-bin 执行 cgi 脚本。

从那时起我就没有使用过 apache，当我最近使用以下方式启动 apache 时：

```
/usr/local/apache2/bin$ sudo apachectl -k start 
```

然后在我的浏览器中输入以下网址：

```
http://localhost:8080 
```

apache 不会提供 index.html 页面或 /usr/local/apache2/htdocs 中的任何其他页面。但是，如果我使用网址：

```
http://localhost 
```

然后apache确实提供了显示“它有效”的“一个index.html”页面。我检查了位于 /usr/local/apache2/conf/httpd.conf 的 httpd.conf 文件，并且 apache 设置为侦听端口 8080：

```
Listen 8080 
```

接下来，我将文件 /usr/local/apache2/htdocs/index.html 更改为显示“Hello world”，但是当我使用 url 时，apache 仍然提供了一个显示“It works”的页面：

```
http://localhost 
```

我再次检查了我的 httpd.conf 文件中的这一行：

```
DocumentRoot "/usr/local/apache2/htdocs" 
```

所以我得出结论，我的 apache 安装没有使用位于 /usr/local/apache2/conf/httpd.conf 的 httpd.conf 文件。我用谷歌做了一些搜索，我发现了这个命令：

```
/usr/local/apache2/bin$ apachectl -V 
```

产生了输出：

```
Server version: Apache/2.2.22 (Unix)
Server built:   Jul 12 2012 15:09:37
Server's Module Magic Number: 20051115:30
Server loaded:  APR 1.3.8, APR-Util 1.3.9
Compiled using: APR 1.3.8, APR-Util 1.3.9
Architecture:   64-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR="server/mpm/prefork"
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_FLOCK_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/usr"
 -D SUEXEC_BIN="/usr/bin/suexec"
 -D DEFAULT_PIDLOG="/private/var/run/httpd.pid"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_LOCKFILE="/private/var/run/accept.lock"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="/private/etc/apache2/mime.types"
 -D SERVER_CONFIG_FILE="/private/etc/apache2/httpd.conf" 
```

我的 apache 安装现在使用的 httpd.conf 位于 /private/etc/apache2/httpd.conf，其中包含以下几行：

```
ServerRoot "/usr"

Listen 80

DocumentRoot "/Library/WebServer/Documents" 
```

我的问题是：这些变化到底是怎么发生的？apache 文档说 httpd.conf 的路径是在编译时设置的。我考虑了 /usr/local/apache2/bin/apachectl 可能是符号链接到系统 apache 的可能性，但是这个输出：

```
/usr/local/apache2/bin$ ls -al
total 2104
drwxr-xr-x  20 root   admin     680 Feb 19 12:36 .
drwxr-xr-x  15 root   admin     510 Feb 19 12:36 ..
-rwxr-xr-x   1 root   admin   57200 Feb 19 12:36 ab
-rwxr-xr-x   1 7stud  staff    3410 Feb 19 12:32 apachectl 
```

并不表示情况如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T09:47:30.423

`which`表明您正在运行系统`apachectl`而不是自定义系统。尝试

```
sudo /usr/local/apache2/bin/apachectl -k start 
```

...运行您的并启动您自己的自定义 apache。

# php - 当从 ajax 请求页面并提交请求页面的表单时什么都不显示

> ID：16119040
> 
> 赞同：0
> 
> 时间：2013-04-20T10:02:51.660
> 
> 标签：php, javascript, ajax

我有四个选项，分别是 addQuestions.php 中具有值 1-4 的单、多、矩阵和真假问题。现在我已经使用 get 方法使用 ajax 通过 id 请求一个页面，并且在该请求的页面中我给出了一个条件如果 id ==1 那么它将包含一个文件是 singleQuestion.php 等等。现在出现的问题是在 singleQuestion.php 中，有四个带有单选按钮的选项。因此，当 ajax 请求该文件时，它会显示 singleQuestion.php 的所有内容，因此每当我提交位于 addQuestions.php 中的表单时，它就不会检索 singleQuestion.php 输入的值。以下是我的代码：- addQuestions.php

```
<form action="insertQuestion.php" method="post">
   <select name="selectQuestionType" class="questionInput" onchange='showUser(this.value)' id="selectQuestionType">
           <option value="0" selected>Select Question Type</option>
           <option value="1">Single Choice </option>
           <option value="2">Multiple Choice Question</option>
           <option value="3">Fill in the Blanks</option>
           <option value="4">True False</option>
           <option value="5">Match Matrix</option>
      </select>
<input type="submit" class="button add" value="Save" style="width:auto;" id="addSave" name="myAddSave">
                  <input type="submit" class="button add" value="Save & Next" style="width:auto;" id="saveNext" name="myNextSave">
 <script type="text/javascript"> 
```

`

```
 function showUser(str)
        {
                if (str=="")
                       {
                        document.getElementById("txtHint").innerHTML="";
                          return;
                        } 
                if (window.XMLHttpRequest)
                    {   // code for IE7+, Firefox, Chrome, Opera, Safari
                          xmlhttp=new XMLHttpRequest();
                    }
                  else
                    {   // code for IE6, IE5
                        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                    }
                       xmlhttp.onreadystatechange=function()
                    {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200)
                      {
                      document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
                      }
                    }
                        xmlhttp.open("GET","getQuestions.php?q="+str,false);
                        xmlhttp.send();
                    }        

                    </script>
                    <div id="txtHint"><b>Question Mode will Be displayed here!.</b></div>
                    <input type="submit" class="button add" value="Save" style="width:auto;" id="addSave" name="myAddSave">
                    <input type="submit" class="button add" value="Save & Next" style="width:auto;" id="saveNext" name="myNextSave">
                    ` 
```

获取问题.php

```
 <?php

 $q=$_GET["q"];
if($q==1)
{
    include 'singleQuestion.php';
}
else if($q == 2)
   {

       include 'multipleQuestion.php';
   }

else if($q == 3)
  {
    include 'fillQuestion.php';
  }   
else if($q == 4)
 {
    include 'trueQuestion.php';
 }
else if($q == 5)
 {
     include 'matchQuestion.php';
 }
 else 
  {
        echo 'You Have Not Selected Any Question Type Yet!';
  }

?> 
```

在 singleQuestion.php

```
<style type="text/css"> .javascript { display: none; } </style>
<?php
    echo $Answer1 = $_POST['Answer1'];
         echo $Answer2 = $_POST['Answer2'];
?>
<br>
<div class="singleContainer">

<div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">A</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1"></span>
</div>
<div id="Hide1" class="jdText">
    <input type="text" name="Answer1" style="width:600px;padding:7px;"  >
</div> </div>

    <br><br><div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">B</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1" ></span>
</div>
<div id="Hide2" class="jdText">
    <input type="text" name="Answer2" style="width:600px;padding:7px;" value="joydseep" >
</div> </div>

    <br><br><div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">C</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1"></span>
</div>
<div id="Hide3" class="jdText">
    <input type="text" name="Answer3" style="width:600px;padding:7px;" >
</div> </div>

    <br><br><div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">D</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1"></span>
</div>
<div id="Hide4" class="jdText">
    <input type="text" name="Answer4" style="width:600px;padding:7px;"  >
</div> </div>
<div id='TextBoxesGroup'>
    <div id="TextBoxDiv1">
        <label style="color:#F1F1F1;">Textbox #1 : </label>
    </div>
</div>
<br>
<div class="javascript">your script data to be executed. </div> 
<input type="submit" name="jdb">
</form>

</div> 
```

插入问题.php

```
<?php
echo $Answer1 = $_POST['Answer1'];
         echo $Answer2 = $_POST['Answer2'];
?> 
```

以上是我的代码，我是 ajax 的新手，所以我对 ajax 不太了解，这就是我被卡住的原因。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:04:53.610

修改你的`singleQuestion.php`根据

```
<?php
if(isset($_POST['jdb'])){
    echo $Answer1 = $_POST['Answer1'];
         echo $Answer2 = $_POST['Answer2'];
}
else{
?>
<br>
<div class="singleContainer">
<form name="form1" action="" method="post">
<div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">A</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1"></span>
</div>
<div id="Hide1" class="jdText">
    <input type="text" name="Answer1" style="width:600px;padding:7px;"  >
</div> </div>

<br><br><div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">B</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1" ></span>
</div>
<div id="Hide2" class="jdText">
    <input type="text" name="Answer2" style="width:600px;padding:7px;" value="joydseep" >
</div> </div>

    <br><br><div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">C</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1"></span>
</div>
<div id="Hide3" class="jdText">
    <input type="text" name="Answer3" style="width:600px;padding:7px;" >
</div> </div>

    <br><br><div class="jdRadio">
<div class="jdRaOne">
    <span class="Answer">D</span><br><br>
    <span class="jdAnswer"><input type="radio" name="A1"></span>
</div>
<div id="Hide4" class="jdText">
    <input type="text" name="Answer4" style="width:600px;padding:7px;"  >
</div> </div>
<div id='TextBoxesGroup'>
    <div id="TextBoxDiv1">
        <label style="color:#F1F1F1;">Textbox #1 : </label>
    </div>
</div>
<br>
<div class="javascript">your script data to be executed. </div> 
<input type="submit" name="jdb">
</form>
<?php }?> 
```

在您的代码中，您错过了表单起始标记

# c# - 日期时间 + 计时器滴答声？

> ID：16119045
> 
> 赞同：1
> 
> 时间：2013-04-20T10:03:58.803
> 
> 标签：c#, datetime, time

当我点击一个按钮时，我想开始一个“经过的时间”。到目前为止，我已经写了这个：

```
private void timer_Tick(object sender, EventArgs e)
{
    timeCounter++;
    labelTimer.Text = "Elapsed Time: " + timeCounter.ToString();
} 
```

`timer`间隔为 1000（1 秒）。

我想要的是像这样格式化时间：

```
HH:MM:SS 
```

并在秒数达到 60 时自动增加分钟数，依此类推数小时。我应该为此使用 DateTime 并每 1 秒添加一秒吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:06:39.147

您可以使用[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)：

```
TimeSpan _elapsed = new TimeSpan();

private void timer_Tick(object sender, EventArgs e)
{
    _elapsed = _elapsed.Add(TimeSpan.FromMinutes(1));
    labelTimer.Text = "Elapsed Time: " + _elapsed.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:25:46.327

您可以使用秒表和经过时间来创建日期时间（并根据需要设置其格式）。

```
Stopwatch s = Stopwatch.StartNew();
//Some more operations here...
s.Stop();
DateTime t = new DateTime(s.ElapsedTicks); 
```

如果您愿意，您还可以设置秒表的频率，以尽量减少资源消耗。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:43:29.257

您可以像这样使用的简单方法：

```
private void timer_Tick(object sender, EventArgs e) 
{
       Stopwatch stopWatch = Stopwatch.StartNew();

       // Your logics goes Here

       stopWatch.Stop();
       DateTime time = new DateTime(stopWatch.ElapsedTicks);
       labelTimer.Text = time.ToString("HH:mm:ss");
} 
```

# python - 遍历 Python 中的区间列表并返回奇数和偶数值？

> ID：16119047
> 
> 赞同：2
> 
> 时间：2013-04-20T10:04:02.203
> 
> 标签：python, list, loops, python-3.x

我正在为家庭作业编写一段代码。

我想要：

1.  获取用户输入（n）。
2.  列出输入（n）范围之外的列表。
3.  遍历列表。
4.  计算赔率和偶数。
5.  返回奇数和偶数以在另一个函数中使用

我被难住了，这就是我所得到的：

```
def Input():
    n = eval(input("Enter number: "))

def GetOdds(n):
    odd_count = 0
    even_count = 0
    List_start = List[1]
    List_cont = List[1:]

    for i in range(n):
        ## I know I'll be using something like ## 
                if position % 2 == 0:
                                even_count = even_count+1
    return even_count
    return odd_count 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:15:37.230

你想要这样的东西：

```
def GetOddEvenCount(n):
    odd_count = 0
    even_count = 0

    for elem in range(n):
        if elem % 2 == 0: even_count += 1
        else: odd_count += 1
    return odd_count, even_count 
```

示例用法：

```
odd_count, even_count = GetOddEvenCount(10)
print("Odds:", odd_count, "Evens:", even_count) 
```

输出：

```
Odds: 5 Evens: 5 
```

但是请注意，如果您只返回*counts*，而不是实际奇数/偶数值的列表，则可以利用以下事实在 O(1) 时间内轻松计算此函数的返回值任何**偶数**N，返回值总是`(N/2, N/2)`，而任何**奇数**N，返回值总是`(floor(N/2), floor(N/2) + 1)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T10:22:06.887

您也可以返回一个字典来获取所有奇数：

```
def GetOdds(n):
    d = {'Odds':[],'Evens':[], 'Odd_count':0,'Even_count':0}
    for i in range(n):
        if i % 2 == 0:
            d['Evens'].append(i)
            d['Even_count'] += 1
        else:
            d['Odds'].append(i)
            d['Odd_count'] += 1
    return d 
```

举个例子：

```
>>> GetOdds(int(input('Enter a number '))) # Let's do 10 for example
{'Odds': [1, 3, 5, 7, 9], 'Evens': [0, 2, 4, 6, 8], 'Odd_count': 5, 'Even_count': 5} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T10:12:59.113

您的`return`语句中可以有多个值。例如

```
def func():
    return 1,2

x, y = func() 
```

在这种情况下，该函数将分配`x = 1`和`y = 2`

所以在你的情况下做出你的`return`陈述

```
return even_count, odd_count 
```

当您调用该函数时，请使用

```
even, odd = GetOdds(16) 
```

对于您的奇偶区分，您的`if`陈述是正确的，您只需要`else`为奇数添加一个子句并更改`position`为`i`（或反之亦然）

```
if i % 2 == 0:
    even_count = even_count+1
else:
    odd_count = odd_count+1 
```

# android - 下载后可以将谷歌静态地图绘制到画布上吗？

> ID：16119050
> 
> 赞同：-2
> 
> 时间：2013-04-20T10:04:25.827
> 
> 标签：android, canvas, bitmap, google-static-maps

我正在使用以下类来下载特定的地图，并且我想将它与其他位图一起绘制到画布上，但是当我这样做时，只有地图不显示。我知道地图正在下载，我是否必须使其可变，我不完全确定这里发生了什么。

```
 class TheTask extends AsyncTask<Void,Void,Void>
    {
    File mediaFile = new File(MenuScreen.mediaStorageDir.getPath() + File.separator +
            "IMG_"+ MenuScreen.timeStamp + ".png");
    File mediaFile1 = new File(MenuScreen.mediaStorageDir.getPath() + File.separator +
            "IMG_"+ MenuScreen.timeStamp + "1" + ".png");
    File mediaFile2 = new File(MenuScreen.mediaStorageDir.getPath() + File.separator +
            "IMG_"+ MenuScreen.timeStamp + "2" + ".png");
    Bitmap bitmap;
          protected void onPreExecute()
          {           super.onPreExecute();
                    //display progressdialog.
          } 

           protected Void doInBackground(Void ...params)
          {  

            bitmap = getGoogleMapThumbnail(MainActivity.latlng.latitude,MainActivity.latlng.longitude);

          FileOutputStream outStream;
            try {
                outStream = new FileOutputStream(mediaFile2);
                bitmap.compress(Bitmap.CompressFormat.PNG, 100, outStream);
                outStream.flush();
                outStream.close();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            //mapView.setDrawingCacheEnabled(enabled);
            //mediaFile = new File(MenuScreen.mediaStorageDir.getPath() + File.separator +
                   // "IMG_"+ MenuScreen.timeStamp + ".jpg");

                return null;
          } 

           protected void onPostExecute(Void result)
          {     

                    super.onPostExecute(result);
                    Bitmap finished;
                       String path = mediaFile1.getAbsolutePath();
                       String path1 = mediaFile2.getAbsolutePath();
                       Bitmap map = BitmapFactory.decodeFile(path1);
                       Bitmap photo = BitmapFactory.decodeFile(path);
                       Paint into = new Paint();
                         into.setFilterBitmap(true);

                            into.setColor(Color.BLACK);
                            into.setTextSize(25);
                            into.setUnderlineText(true);
                            into.setTypeface(Typeface.DEFAULT_BOLD);
                            Bitmap datetime = Bitmap.createBitmap(200,200,Bitmap.Config.ARGB_8888);
                            Canvas can = new Canvas(datetime);
                            can.drawColor(Color.WHITE);
                            can.drawText(MainActivity.curDate, 0, 35, into);
                            can.drawText(MainActivity.curTime, 0, 70, into);
                          if(photo.getWidth() > photo.getHeight()){

                            finished = Bitmap.createBitmap(480,720,Bitmap.Config.ARGB_8888);

                            Canvas ca = new Canvas(finished);
                            ca.drawColor(Color.WHITE);
                            ca.drawBitmap(map,0, 0, null);
                            ca.drawBitmap(datetime, 0, 0, null);

                            //ca.drawBitmap(bm, new Rect(0,0, bm.getWidth(), bm.getHeight()),new Rect(280,0,480,200) , null);

                            ca.drawBitmap(photo, 0, 400, null);
                        }else{

                            finished = Bitmap.createBitmap(720,480,Bitmap.Config.ARGB_8888);
                            Canvas ca = new Canvas(finished);
                            ca.drawColor(Color.WHITE);
                            ca.drawBitmap(map, 320, 0, null);
                            ca.drawBitmap(datetime, 320, 0, null);

                            //ca.drawBitmap(bm, new Rect(0,0, bm.getWidth(), bm.getHeight()),new Rect(320,280,520,480) , null);

                            ca.drawBitmap(photo, 0, 0, null);
                        }
                          mediaFile1.delete();
                          mediaFile2.delete();
                         FileOutputStream outStream;
                        try {
                            outStream = new FileOutputStream(mediaFile);
                            finished.compress(Bitmap.CompressFormat.PNG, 100, outStream);
                            outStream.flush();
                            outStream.close();
                        } catch (FileNotFoundException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        //sendBroadcast(new Intent(
                            //    Intent.ACTION_MEDIA_MOUNTED,
                              //  Uri.parse("file://" + Environment.getExternalStorageDirectory())));

                    //dismiss progressdialog.
                    //update ui
          } 
           public static Bitmap getGoogleMapThumbnail(double lati, double longi){
               String URL = "http://maps.google.com/maps/api/staticmap?center=" +lati + "," + longi + "&zoom=15&size=200x200&sensor=false";
               Bitmap bmp = null;
               bmp = getBitmapFromURL(URL);

               /*HttpClient httpclient = new DefaultHttpClient();   
               HttpGet request = new HttpGet(URL); 

               InputStream in = null;
               try {
                   in = httpclient.execute(request).getEntity().getContent();
                   bmp = BitmapFactory.decodeStream(in);
                   in.close();
               } catch (IllegalStateException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               } catch (ClientProtocolException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               } catch (IOException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               }*/

               return bmp;
           }
           public static Bitmap getBitmapFromURL(String src) {
            try {
                URL url = new URL(src);
                HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                connection.setDoInput(true);
                connection.connect();
                InputStream input = connection.getInputStream();
                Bitmap myBitmap = BitmapFactory.decodeStream(input);
                return myBitmap;
            } catch (IOException e) {
                e.printStackTrace();
                return null;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:51:15.940

正如我在评论中提到的，您实际上可以重用位图。

您也可以直接在画布上绘制日期和时间，因为日期时间位图将消耗 160000 字节，即 156kb。

我没有测试过代码。这只是一个建议。

```
class TheTask extends AsyncTask<Void, Void, Bitmap> {
    File mediaFile = new File(MenuScreen.mediaStorageDir.getPath() + File.separator + "IMG_" + MenuScreen.timeStamp + ".png");
    File mediaFile1 = new File(MenuScreen.mediaStorageDir.getPath() + File.separator + "IMG_" + MenuScreen.timeStamp + "1" + ".png");
    //File mediaFile2 = new File(MenuScreen.mediaStorageDir.getPath() + File.separator + "IMG_" + MenuScreen.timeStamp + "2" + ".png");
    Bitmap mapBitmap;

    protected void onPreExecute() {
        super.onPreExecute();
        // display progressdialog.
    }

    protected Bitmap doInBackground(Void... params) {
        mapBitmap = getGoogleMapThumbnail(MainActivity.latlng.latitude, MainActivity.latlng.longitude);
        // You could reuse this bitmap. Rather than saving and loading again
        return mapBitmap;
    }

    protected void onPostExecute(Bitmap map) {
        super.onPostExecute(map);

        Bitmap finished;

        String path = mediaFile1.getAbsolutePath();

        Bitmap photo = BitmapFactory.decodeFile(path);

        Paint into = new Paint();

        Paint background = new Paint();
        background.setColor(Color.WHITE);
        background.setStyle(Style.FILL);

        into.setFilterBitmap(true);

        into.setColor(Color.BLACK);
        into.setTextSize(25);
        into.setUnderlineText(true);
        into.setTypeface(Typeface.DEFAULT_BOLD);

        // Bitmap datetime = Bitmap.createBitmap(200, 200,
        // Bitmap.Config.ARGB_8888);
        //
        // Canvas can = new Canvas(datetime);
        // can.drawColor(Color.WHITE);
        // can.drawText(MainActivity.curDate, 0, 35, into);
        // can.drawText(MainActivity.curTime, 0, 70, into);

        Rect rect = new Rect();

        if (photo.getWidth() > photo.getHeight()) {

            finished = Bitmap.createBitmap(480, 720, Bitmap.Config.ARGB_8888);

            Canvas ca = new Canvas(finished);
            ca.drawColor(Color.WHITE);

            ca.drawBitmap(map, 0, 0, null);

            rect.set(0, 0, 200, 200);
            ca.drawRect(rect, background);
            ca.drawText(MainActivity.curDate, 0, 35, into);
            ca.drawText(MainActivity.curTime, 0, 70, into);

            ca.drawBitmap(photo, 0, 400, null);
        }
        else {

            finished = Bitmap.createBitmap(720, 480, Bitmap.Config.ARGB_8888);

            Canvas ca = new Canvas(finished);
            ca.drawColor(Color.WHITE);

            ca.drawBitmap(map, 320, 0, null);

            ca.save();

            ca.translate(320, 0);
            rect.set(0, 0, 200, 200);
            ca.drawRect(rect, background);
            ca.drawText(MainActivity.curDate, 0, 35, into);
            ca.drawText(MainActivity.curTime, 0, 70, into);

            ca.restore();

            ca.drawBitmap(photo, 0, 0, null);
        }

        mediaFile1.delete();

        FileOutputStream outStream;
        try {
            outStream = new FileOutputStream(mediaFile);
            finished.compress(Bitmap.CompressFormat.PNG, 100, outStream);
            outStream.flush();
            outStream.close();
        }
        catch (FileNotFoundException e) {
            e.printStackTrace();
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static Bitmap getGoogleMapThumbnail(double lati, double longi) {
        String URL = "http://maps.google.com/maps/api/staticmap?center=" + lati + "," + longi + "&zoom=15&size=200x200&sensor=false";
        Bitmap bmp = null;
        bmp = getBitmapFromURL(URL);
        return bmp;
    }

    public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
        }
        catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }
} 
```

# python - 在 python 中使用类中的类

> ID：16119054
> 
> 赞同：0
> 
> 时间：2013-04-20T10:04:57.470
> 
> 标签：python, python-2.7

我有一个 classex.py 文件：

```
class Class1:
    def method1():
        print 'stack1'
    def method2():
        print 'over1'
    def method3():
        print 'flow1'

class Class2:
    def method1():
        print 'stack2'
    def method2():
        print 'over2'
    def method3():
        print 'flow2'

class Class3:
    def method1():
        print 'stack3'
    def method2():
        print 'over3'
    def method3():
        print 'flow3' 
```

我想要访问`classex`文件类，所以我将导入该文件如何在各种类中访问。

例如：

```
import classex
print Class1.method1()
print Class2.method2() 
```

我的期望输出是`stack1`和`over2`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:07:32.820

```
class Class1:
    def method1(self): # instance  is passed implicity as first arg
        print 'stack1'
    def method2(self):
        print 'over1'
    def method3(self):
        print 'flow1'

class Class2:
    def method1(self):
        print 'stack2'
    def method2(self):
        print 'over2'
    def method3(self):
        print 'flow2'

class Class3:
    def method1(self):
        print 'stack3'
    def method2(self):
        print 'over3'
    def method3(self):
        print 'flow3' 
```

* * *

```
>>> import classex
>>> c = classex.Class1() # instance of Class1
>>> c.method1()
stack1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T10:07:44.740

您实际上并没有导入类本身，而只是导入了模块。

```
import classex 
```

为了访问您必须执行的课程：

```
>>> myclass = classex.Class1()
>>> myclass2 = classex.Class2()
>>> myclass.method1()
stack1
>>> mycalss2.Class2.method2()
over2 
```

或者直接导入类：

```
>>> from classex import Class1, Class2
>>> myclass = Class1()
>>> myclass2 = Class2()
>>> myclass.method1()
stack1
>>> myclass2.method2()
over2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:21:59.577

或者你可以这样做

```
class Class1:
    @classmethod
    def method1(clss):
        print 'stack1'
    @classmethod
    def method2(clss):
        print 'over1'
    @classmethod
    def method3(clss):
        print 'flow1'

class Class2:
    @classmethod
    def method1(clss):
        print 'stack2'
    @classmethod
    def method2(clss):
        print 'over2'
    @classmethod
    def method3(clss):
        print 'flow2'

class Class3:
    @classmethod
    def method1(clss):
        print 'stack3'
    @classmethod
    def method2(clss):
        print 'over3'
    @classmethod
    def method3(clss):
        print 'flow3' 
```

接着

```
import classex

classex.Class1.method2() 
```

等等

但是你所做的并没有真正让我觉得你很好地理解了 OOP 原则，或者你来自另一种 OOP 语言，它有一些类方法之王，你希望得到相同的结果. OO 的 Python 实现与 Java 或 C# 等略有不同，因此请务必阅读一点关于如何在 Python 中定义方法的内容。

# ruby-on-rails - 如何渲染设计/注册/new.html.erb 文件？

> ID：16119055
> 
> 赞同：1
> 
> 时间：2013-04-20T10:05:06.043
> 
> 标签：ruby-on-rails, devise

我正面临这个问题。我想在我的布局/应用程序中呈现注册和会话 new.htm.erb 文件。我试图为注册和会话 new.html.erb 创建部分。

我已经尝试了上面的答案，但它给出了错误。我的代码：

```
<%= render :template => "devise/registrations/new", 
                    :locals => { 
                      :resource => current_user, 
                      :resource_name => :user } %> 
```

错误：

```
undefined local variable or method `resource' for #<#<Class:0xbd605f0>:0xb221c5c> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:07:48.210

将此添加到您的应用程序助手

```
 def resource_name
    :user
  end

  def resource
    @resource ||= User.new
  end

  def devise_mapping
    @devise_mapping ||= Devise.mappings[:user]
  end 
```

# asp.net-mvc - 如何首先在 EF 代码上使用 UnitOfWorkPattern 在 ASP.NET MVC 中实现 Quartz.NET 作业

> ID：16119057
> 
> 赞同：4
> 
> 时间：2013-04-20T10:05:16.107
> 
> 标签：asp.net-mvc, entity-framework, ef-code-first, quartz-scheduler, quartz.net

我有 ASP.NET MVC 3.0 应用程序，数据层使用 EF Code First。我已经实现了一个工作单元模式，我在 HttpContext.Current.Items[SomeKey] 集合上绑定了工作单元的上下文。工作单元在控制器上的 OnActionExecuting/Executed 事件中创建和提交。我正在使用温莎城堡实例化存储库。

现在我需要使用 Quartz.net 在我的应用程序中定期运行作业，这项作业也需要使用很少的存储库。问题是，在 SchedulerJob 实现中，没有 HttpContext 可用（确实）。在这种情况下，如何从 Quartz.net Job 实例化存储库（将 UnitOfWorkFactory 作为构造函数参数）？如何替换缺少的 HttpContext？我可能需要实现另一个 UnitOfWorkFactory，但我不确定我可以在哪里绑定我的上下文以及如何为 Quartz.net 线程注册不同的工厂。你能告诉我一个方法或模式吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:45:30.633

您可能需要考虑编写自己的作业工厂并在那里注入您的存储库。[我在这里](http://jayvilalta.com/blog/2012/07/23/creating-a-custom-quartz-net-jobfactory/)写了一篇关于如何做到这一点的帖子。Windsor 还具有直接集成 Quartz.net 的功能[。](http://docs.castleproject.org/Default.aspx?Page=Quartz-Net-integration&NS=Contrib&AspxAutoDetectCookieSupport=1)

最后一条评论...如果您要安排长时间运行的作业或安排定期运行的作业，您不应该在您的 Web 应用程序中托管 Quartz.Net。IIS 进程回收不会让您的调度程序正常运行。Windows服务是要走的路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:10:19.063

工作单元实现属于业务逻辑层，不应依赖于特定的表示层，例如 MVC。

我制作了一个在几个项目中使用过的自定义 UnitOfWorkScope：http: [//coding.abel.nu/2012/10/make-the-dbcontext-ambient-with-unitofworkscope/](http://coding.abel.nu/2012/10/make-the-dbcontext-ambient-with-unitofworkscope/)

# javascript - Mongoose recursive query parent reference

> ID：16119058
> 
> 赞同：1
> 
> 时间：2013-04-20T10:05:34.493
> 
> 标签：javascript, node.js, mongodb, mongoose

I am trying to do exactly what this mongo example is doing but in mongoose. It seems more complex to me in mongoose. Possibly i'm trying to fit a square peg in a round hole?

This example is from [http://www.codeproject.com/Articles/521713/Storing-Tree-like-Hierarchy-Structures-With-MongoD](http://www.codeproject.com/Articles/521713/Storing-Tree-like-Hierarchy-Structures-With-MongoD) (tree structure with parent reference)

I'm trying to build a path.

```
var path=[];
var item = db.categoriesPCO.findOne({_id:"Nokia"});
while (item.parent !== null) {
    item=db.categoriesPCO.findOne({_id:item.parent});
    path.push(item._id);
}
path.reverse().join(' / '); 
```

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:58:53.513

Mongoose 是一个异步库，所以

```
db.categoriesPCO.findOne({_id:"Nokia"}); 
```

不返回查询的答案，它只返回一个[Query](http://mongoosejs.com/docs/api.html#query_Query)对象本身。为了实际运行查询，您需要将回调函数传递给`findOne()`或`exec()`在返回的 Query 对象上运行。

```
db.categoriesPCO.findOne({_id:"Nokia"}, function (err, item) {
}); 
```

但是，您不能使用相同的 while 循环代码来生成路径，因此您需要使用递归。像这样的东西应该工作：

```
var path=[];

function addToPath(id, callback) {
    db.categoriesPCO.findOne({_id:id}, function (err, item) {
      if (err) {
          return callback(err);
      }
      path.push(item._id);
      if (item.parent !== null) {
          addToPath(item.parent, callback);
      }
      else {
          callback();
      }
    });
}

addToPath("Nokia", function (err) {
  path.reverse().join(' / ');
}); 
```

**注意**此外，您可以使用which 将新项目添加到数组的开头，而不是将`push`新项目添加到`path`数组的末尾然后反转它。`path.unshift()`

# javascript - 从网站获取数据

> ID：16119060
> 
> 赞同：-3
> 
> 时间：2013-04-20T10:05:56.103
> 
> 标签：javascript, html, ajax, text, web-scraping

我想创建一个 JavaScript 代码，从另一个网站获取这些数据并将其全部放入一个 .TXT 文件中，如果可能的话，即使它可以转换为 XML 文件可能会更好。？

如果不是 JavaScript，其他任何东西都可以。

![抓拍照片](https://i1274.photobucket.com/albums/y421/t3rr11/grabdata_zps13e865bc.png)

我希望获取价格和商品名称，但我不完全确定如何做到这一点。

网站是[http://www.bigw.com.au/electronics/computers-office/computer-accessories/webcams](http://www.bigw.com.au/electronics/computers-office/computer-accessories/webcams)，如果您需要阅读他们的来源以提供帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:20:50.677

使用浏览器和 javascript 翻录网站客户端？没问题。

yahoo yql...（而不是 php？代理服务器端脚本）..

我偷偷怀疑您不拥有/控制外部链接站点，因此从不同站点获取内容将受到跨域安全限制（对于现代浏览器）。

因此，为了重新获得“用户的权力”，只需使用[http://query.yahooapis.com/](http://query.yahooapis.com/)。

**示例 1：**
使用类似 SQL 的命令：

```
select * from html 
where url="http://stackoverflow.com" 
and xpath='//div/h3/a' 
```

以下链接将抓取 SO 以获取最新问题（绕过跨域安全公牛$#!7）： http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%
[20html % 20%0Awhere%20url%3D%22http%3A%2F%2Fstackoverflow.com%22%20%0Aand%20xpath%3D'%2F%2Fdiv%2Fh3%2Fa'%3B&format=json&callback=cbfunc](http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20%0Awhere%20url%3D%22http%3A%2F%2Fstackoverflow.com%22%20%0Aand%20xpath%3D'%2F%2Fdiv%2Fh3%2Fa'%3B&format=json&callback=cbfunc)

如您所见，这将返回一个 JSON 数组（也可以选择 xml）并调用回调函数：`cbfunc`。

确实，作为“奖励”，每次您不需要从“标签汤”中正则表达式数据时，您也可以[保存一只小猫](https://stackoverflow.com/a/1732454/588079)，并且您不需要与[Cthulu 勋爵搞乱](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)。

你听到你内心的疯狂小科学家开始咯咯地笑了吗？

然后查看[此答案](https://stackoverflow.com/a/12080097/588079)以获取更多信息（不要忘记更多示例的评论）。

一旦你有了数据，你总是可以将它 ajax 回你的服务器，所以重复这 1000 次是没有问题的（只要你的服务器上有空间）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:12:26.917

您可以通过保存页面来获取页面的源代码

或者你可以使用

```
 Right click on webpage ->view source 
```

# c#-4.0 - 如何使用表达式树动态创建方法和属性？

> ID：16119065
> 
> 赞同：3
> 
> 时间：2013-04-20T10:06:16.357
> 
> 标签：c#-4.0

此代码有效，但我想知道这是否是好的解决方案？这个使用表达式树的解决方案会被认为比 Emit 和 OpCodes 更好吗？

```
var target = Expression.Lambda(
            Expression.Block(
                new ParameterExpression[] { },
                Expression.Call(
                    typeof(MessageBox).GetMethod("Show", new[] { typeof(string) }),
                   Expression.Constant(1.ToString(), typeof(string))
                )
            ),
            new ParameterExpression[] { }

        );
AssemblyName aName = new AssemblyName("DynamicAssemblyExample");

AssemblyBuilder ab =
            AppDomain.CurrentDomain.DefineDynamicAssembly(
                aName,
                AssemblyBuilderAccess.RunAndSave);

        ModuleBuilder mb =
            ab.DefineDynamicModule(aName.Name, aName.Name + ".dll");
TypeBuilder tb = mb.DefineType("MyDynamicType", TypeAttributes.Public);
        var method = tb.DefineMethod("dynamicMethod", MethodAttributes.Public     |         MethodAttributes.Static);
target.CompileToMethod(method); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:17:55.030

您示例中的代码似乎只是“示例”代码。我不认为它需要表达式树。如果我没看错，它只是在创建常量表达式`() => MessageBox.Show(1.ToString());`。）

当需要创建实际的动态代码时，即在程序中解释某些其他语言或用于需要反射的操作（例如在 Automapper 等程序中）时，表达式树非常有用。

它们是否比直接发出操作码更好。这真的取决于：能比编译器做得更好吗？发出操作码就像编写汇编一样，它很耗时，而且您确实需要知道自己在做什么才能编写最佳代码。编译器和手动优化代码之间的性能差异值得付出额外的努力吗？

# object - 使用 Unity 的标签标签批量替换对象？

> ID：16119067
> 
> 赞同：1
> 
> 时间：2013-04-20T10:06:33.057
> 
> 标签：object, unity3d, replace

我目前正在做一个练习，我想为此创建一个技术设计文档。

因此，我需要评估我虚构项目中出现的一系列问题的可能解决方案。

下面快速浏览一下这个练习：

游戏的美术和核心游戏设计被非常严格地分开——基本上，核心系统、游戏机制和设计被创造得非常抽象，以便让它们能够与各种各样的美术设置一起工作。此外，限制之一是尽可能多地重复使用资产、关卡和设计。

现在我的问题：

我希望关卡设计师使用“模板”对象（具有所需的所有技术特征的对象，即附件插槽、正确比例、纹理等）创建关卡，然后用我从外包商那里收到的一组资产替换这些对象.

因为我不想在获得一组新资产时手动替换所有对象，所以这就是我想要做的：

每个模板对象都有一个描述性标签，并且外包商交付的每个资产也需要具有与其存储在其中的相应模板对应物完全相同的标签名称（例如，作为自定义属性、通道或只是在其名称中） ）。

我现在想使用脚本将所有模板替换为相关资产。

这将对每组资产进行。我还会保留我的引擎的多个部署，每组一个，但最初，它们都会从需要替换的模板开始（因为每个设置都需要进行一些修改，无论是视觉上还是游戏中从设计的角度来看，将所有资产保存在一个主干/项目中对我来说没有任何意义）。

为了使这更容易，我将使用某种“数据库”（可能是引擎脚本可以查询的简单字典，并且在交付新资产时会由另一个脚本预先填写？）。

我的问题是：这可能吗？如果是，从程序员的角度来看，这有多困难？我在这个领域的知识有限，所以我很想听听各位小伙子和女士们对此的看法。

另外（非常重要）-您知道实现资产“可替换性”的更好方法吗？或者只是有一种更简单的方法来实现我想做的事情？我很感激任何反馈！谢谢！

快速编辑：这不仅适用于 3d 对象；显然，纹理也需要更换

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:43:25.937

我认为您正在寻找[Prefabs](http://docs.unity3d.com/Documentation/Manual/Prefabs.html)。

基本上预制件实现了一种[原型模式](http://en.wikipedia.org/wiki/Prototype_pattern)。除了直接放入场景的层次结构 a 之外`GameObject`，您还可以将其设置为 a`prefab`并将其放入场景 a`GameObject`中，这是 that 的一个实例`prefab`。

当 a `GameObject`into 场景链接到 a `prefab`，并且`prefab`将被修改时，链接的对象也将被修改。如果您有多个相同的实例，则`prefab`所有实例也将更新。

此功能的唯一强大限制是，从现在开始，不支持嵌套预制件。

> 我希望关卡设计师使用“模板”对象（具有所需的所有技术特征的对象，即附件插槽、正确比例、纹理等）创建关卡，然后用我从外包商那里收到的一组资产替换这些对象.

这是典型的用例。你在场景中有一个占位符（例如一个立方体），当艺术家提供它时，它将被模型替换。如果您将 100 个立方体实例化到场景中，当您需要替换它们时，您可以手动对所有对象进行替换。

相反，如果您创建了一个`prefab`（让我们称之为 ModelPrefab）并且场景中的立方体是该预制件的实例，当您拥有新的 3d 模型时，您可以简单地更新`prefab`所有链接的实例也将被更新。

> 我的问题是：这可能吗？如果是，从程序员的角度来看，这有多困难？

如果您可以在没有嵌套预制件的情况下工作，那么您什么都不用做，它已经实现了。如果你需要实现`nested prefabs`，它可能不是那么简单。

> 快速编辑：这不仅适用于 3d 对象；显然，纹理也需要更换

我使用模型制作了上面的示例，但是您可以从每个`GameObject`实际是组件集合的预制件中制作一个预制件（如果您有兴趣，请查看[基于组件的对象管理）。](http://www.gameenginegems.net/gemsdb/article.php?id=329)

* * *

编辑

是的，可以通过脚本更新预制件，所需的功能位于 UnityEditor 命名空间中，因此它们可以通过编辑器扩展来使用。[你可以在PrefabUtility](http://docs.unity3d.com/Documentation/ScriptReference/PrefabUtility.html)类中找到所有你需要的东西。

# javascript - 在下拉表单中更改所选值时提交 Rails

> ID：16119076
> 
> 赞同：5
> 
> 时间：2013-04-20T10:07:44.903
> 
> 标签：javascript, ruby-on-rails, ajax

我有一个 Rails 应用程序，在表格中列出了潜在客户。在其中一个列中，我在下拉菜单中显示潜在客户的状态。我想在更改下拉列表中选择的值时启用更改潜在客户的此状态。

这是我尝试过的：

在表格单元格中显示表单的代码：

```
 <% @leads.each do |lead| %>
  <tr>
    <td><%= lead.id %></td>
<td><%= form_for(lead,:url => 'update_lead_status') do |f| %>
              <div class="field">
                <%= f.select :status, ["to_call","called","confirmed","lite"], :selected => lead.status, onchange: "this.form.submit();" %>
              </div>
            <% end %>
        </td> 
```

我在潜在客户控制器中的 update_lead_status 方法：

```
#PUT
  def update_lead_status
    @lead = Lead.find(params[:id])
    respond_to do |format|
      # format.js
      if @lead.update_attributes(params[:lead])
        format.html { redirect_to leads_url, notice: 'Lead was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @lead.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我也希望提交是 Ajax 风格而不刷新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:32:16.210

设置表单ID，然后提交表单

```
<%= form_for(lead,:url => 'update_lead_status',:html=>{:id=>'lead_form'}) do |f| %>

 <%= f.select :status, ["to_call","called","confirmed","lite"], :selected => lead.status, onchange: "$('#lead_form').submit();" %>
<% end %> 
```

# linux-kernel - 用于 tegra2 的 Qemu 仿真器臂

> ID：16119083
> 
> 赞同：0
> 
> 时间：2013-04-20T10:08:27.977
> 
> 标签：linux-kernel, arm, embedded-linux, qemu

我有 Toradex Colibri t20 嵌入式板卡 Linux 映像（U 引导、内核、屋顶）。Colibri t20 基于 tegra2 arm-cortex-a9 处理器。我想在 Qemu 模拟器中运行这个 Linux 内核。如何使用 qemu 启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T20:08:49.827

qemu-system-arm 可以运行 u-boot 和内核软件，只有当它支持配置/构建这些软件的板时。

支持 ARM 的多功能 pb 和 vexpress-a9。有很好的教程可以使用这些板，[Balau on kernel](http://balau82.wordpress.com/2012/03/31/compile-linux-kernel-3-2-for-arm-and-emulate-with-qemu/)，还有[Kumar](http://www.linuxforu.com/2011/06/qemu-for-embedded-systems-development-part-1/)

裸机模拟没有那么雄心勃勃。在那里，粗略地说，QEMU 只需要模拟处理器。查看[裸机上的 Balau](http://balau82.wordpress.com/2010/02/28/hello-world-for-bare-metal-arm-using-qemu/)。快速搜索显示可能正在支持[Tegra2](http://wiki.qemu.org/Features/Tegra2)。

我建议在您的主机上安装当前软件包，看看支持哪些机器和 CPU。不确定以下语法细节，但像 qemu-system-arm -M 之类的？是获取支持机器列表的方法。

# java - 图像无法在外部 WebBrowser (Firefox) 中加载

> ID：16119087
> 
> 赞同：0
> 
> 时间：2013-04-20T10:08:51.620
> 
> 标签：java, html, jsp, servlets

我创建了动态 web 项目，我正在使用以下代码上传图像并从同一位置检索。现在，当我尝试在外部浏览器中运行应用程序时，它显示矩形框而不是图像。在外部 Web 浏览器中加载会给出一个错误。

```
import javax.servlet.*;
import javax.servlet.http.*;
import java.io.*;
import java.util.Iterator;
import java.util.List;
import java.util.Random;
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.sql.*;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.fileupload.disk.*;
import org.apache.commons.fileupload.*;

public class UploadImage extends HttpServlet {
private static final long serialVersionUID = 1L;
public void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        PrintWriter out = response.getWriter();
        boolean isMultipart = ServletFileUpload.isMultipartContent(request);
        System.out.println("request: " + request);
        if (!isMultipart) {
            System.out.println("File Not Uploaded");
        } else {
            FileItemFactory factory = new DiskFileItemFactory();
            ServletFileUpload upload = new ServletFileUpload(factory);
            List items = null;

    try 
    {
          items = upload.parseRequest(request);
          System.out.println("items: " + items);
    } 
   catch (FileUploadException e) 
   {
    e.printStackTrace();
   }
        Iterator itr = items.iterator();
        while (itr.hasNext()) {
        FileItem item = (FileItem) itr.next();
        if (item.isFormField())
            {
              String name = item.getFieldName();
              System.out.println("name: " + name);
              String value = item.getString();
              System.out.println("value: " + value);
        }
           else
           {
            try 
                 {
             String itemName = item.getName();
             Random generator = new Random();
             int r = Math.abs(generator.nextInt());
                 String reg = "[.*]";
             String replacingtext = "";
             System.out.println("Text before replacing is:-"+ itemName);
             Pattern pattern = Pattern.compile(reg);
             Matcher matcher = pattern.matcher(itemName);
             StringBuffer buffer = new StringBuffer();
                 while (matcher.find())
                 {
             matcher.appendReplacement(buffer, replacingtext);
             }
             int IndexOf = itemName.indexOf(".");
             String domainName = itemName.substring(IndexOf);
             System.out.println("domainName: " + domainName);
                 String finalimage = buffer.toString() + "_" + r+ domainName;
             System.out.println("Final Image===" + finalimage);
        File savedFile = new File("D:\\test1\\" + "images\\"+ finalimage);
             item.write(savedFile);
        out.println("<html>");
        out.println("<body>");
            out.println("<table><tr><td>");
            out.println("<img src=D:\\test1\\images\\" + finalimage+ ">");
        out.println("</td></tr></table>");
            Connection conn = null;
            String url = "jdbc:oracle:thin:@//localhost:1521/erp";
            String username = "system";
            String userPassword = "manager";
        String strQuery = null;
        try 
            {
        System.out.println("itemName::::: " + itemName);
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection(url, username,userPassword);
        Statement st = conn.createStatement();
        strQuery = "insert into testimage values('"+ finalimage + "')";
            int rs = st.executeUpdate(strQuery);
        System.out.println("Query Executed Successfully++++++++++++++");
            out.println("image inserted successfully");
        out.println("</body>");
            out.println("</html>");
        }
            catch (Exception e)
            {
        System.out.println(e.getMessage());
        } 
            finally
            {
        conn.close();
        }
        } 
           catch (Exception e)
           {
        e.printStackTrace();
            }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:21:01.597

流程大致如下：

*   最终用户请求某个 URL 上的网页。
*   网络浏览器通过给定的 URL 向网络服务器发送 HTTP 请求。
*   Webserver 检索 HTTP 请求并返回所需的网页作为 HTTP 响应。
*   Webbrowser 以 HTML 代码的形式检索 HTTP 响应。
*   Webbrowser 解析 HTML 代码以呈现它并遇到一个`<img>`元素。
*   Webbrowser 尝试从其`src`属性中指定的位置下载图像。

还有失败的地方。您指定了一个固定的本地磁盘文件系统路径，该路径仅在网络浏览器与网络服务器在**物理上运行在同一台机器**上时才有效（在开发环境中会发生，但在生产环境中绝对不会发生）。您不能也不应该期望最终用户在其本地磁盘文件系统的给定位置拥有所需的图像。更重要的是，您不能也不应该期望最终用户拥有`D:`磁盘，更不用说最终用户也在运行 Windows。

相反，您应该在图像的`src`属性中指定一个完整的 URL。与您在 webbrowser 的地址栏中输入以查看图像的方式完全相同，以`http://`or`https://`方案开头。

有几种方法可以实现这一点，两种最流行的方法是：

1.  将上传文件夹公开为虚拟主机。这将在服务器配置中完成。您没有告诉您使用的是哪一个，但让我们假设它是 Tomcat，就像许多初学者会使用的一样：打开`/conf/server.xml`文件并将以下元素添加到`<Host>`元素中：

    ```
    <Context docBase="D:\test1\images" path="/images" /> 
    ```

    `docBase`指定所有文件所在的根文件夹，并指定`path`您将在 URL 中的域部分之后看到的上下文路径。这样，图像将可以通过`http://example.com/images/...`.

    ```
    out.println("<img src=\"/images/" + finalimage+ "\">"); 
    ```

    * * *

2.  创建一个简单的 servlet，它从磁盘读取图像并在设置所需的响应标头后将其写入响应，告诉浏览器文件内容类型、长度和处置，以便浏览器知道如何处理它：

    ```
    @WebServlet("/images/*")
    public class ImageServlet extends HttpServlet {

        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            String filename = URLDecoder.decode(request.getPathInfo(), "UTF-8");
            File file = new File("D:\\test1\\images", filename);
            response.setHeader("Content-Type", getServletContext().getMimeType(file.getName()));
            response.setHeader("Content-Length", String.valueOf(file.length()));
            response.setHeader("Content-Disposition", "inline; filename=\"" + file.getName() + "\"");
            Files.copy(file.toPath(), response.getOutputStream());
        }

    } 
    ```

    也可以通过这种方式访问​​图像`http://example.com/images/...`。

    ```
    out.println("<img src=\"/images/" + finalimage+ "\">"); 
    ```

* * *

**与具体问题无关**，在 servlet 中发出 HTML 是一种非常糟糕的做法。您应该为此使用 JSP。另请参阅[我们的 servlets wiki 页面的](https://stackoverflow.com/tags/servlets/info)*编码风格和建议*部分。

您是否还考虑过上传的图像恰好与现有上传的图像具有相同的文件名？

# java - 如何处理 RESTful Web 服务中的聚合和组合

> ID：16119089
> 
> 赞同：3
> 
> 时间：2013-04-20T10:09:02.263
> 
> 标签：java, spring, rest, jakarta-ee, spring-mvc

我创建了以下实体`Book`，`Chapter`和`Feedback`。有`Book`很多`Chapter`实体，它也有很多`Feedback`实体。由于没有`Chapter`实体可以靠它们自己生活，它们是`Book`组合的一部分。这同样适用于`Feedback`实体。

我的问题是，作为组合一部分的对象是否应该在 RESTful 系统中拥有自己的 URI？如：

```
/books/1/chapters (With POST, DELETE, PUT operations) 
/books/1/feedback (With POST, DELETE, PUT operations) 
```

还是应该像这样受到威胁：

```
/books/1 (With POST, DELETE, PUT operations only on the book) 
```

最后一个 URI 意味着 API 的用户必须向图书数组添加反馈，然后更新整个图书实体。

由于章节不属于任何其他对象并且它们的生命周期依赖于书籍，因此将书籍和章节之间的关系称为“组合+聚合”是否有意义？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T10:41:33.780

> 我的问题是作为组合一部分的对象是否应该在 RESTful 系统中拥有自己的 URI

是的，绝对是。*当实体表示的*特定部分可独立寻址时，它使访问和管理这些部分变得更加容易。与其要求客户每次都检索整个表示，只是更新其中的一小部分，他们可以只关注需要修改的一个部分。它还极大地简化了访问控制，其中某些端点可能对特定调用者可用，但对其他调用者不可用。

定义子资源 URI 时要保留的一个约束是它们始终在其父资源的范围内定义（正如您在示例中已经显示的那样）。

> 并且将书籍和章节之间的关系称为“组合+聚合”是否有意义，因为章节不属于任何其他对象并且它们的生命周期取决于书籍

*将关系称为组合*是有道理的。聚合意味着子资源（*chapter*）可以存在于其父资源（*book*）的范围之外，在这种情况下它不能。聚合的一个例子是一个地址，它可以与一个*人*或一个*组织*相关联。

# .net - SQLite 和实体框架

> ID：16119092
> 
> 赞同：3
> 
> 时间：2013-04-20T10:09:28.603
> 
> 标签：.net, sqlite, frameworks, entity, provider

我正在尝试将 SQLITE 数据库与最新的实体框架一起使用。我已经从这里为 .NET Framework 4.0 安装了 SQLite 提供程序 x86：http: [//system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki](http://system.data.sqlite.org/index.html/doc/trunk/www/downloads.wiki)。

我通过在 Visual Studio 2012 中使用服务器资源管理器成功地将 SQLITE 添加为新数据源。然后，我添加了新的 ADO.NET 实体模型并尝试从我的简单 sqlite 数据库中添加表。由于某种原因，无法添加这些表，并且错误日志显示以下内容：

> > 目标 .NET Framework 版本当前不支持数据类型“longchar”；>> 表 'main.Person' 中的列 'Name' 被排除在外。

我不明白为什么它试图将 SQLite TEXT 类型转换为 longchar 并失败。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-29T19:17:16.943

在为一个在工作中使用 SQLLITE 和 ADO 的项目设置开发环境后，我今天才遇到这个问题，而且修复很简单。版本 1.0.85.0 已损坏，版本 1.0.84.0 有效。

32 位： [http ://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx40-setup-bundle-x86-2010-1.0.84.0.exe](http://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx40-setup-bundle-x86-2010-1.0.84.0.exe)

64 位： [http ://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx40-setup-bundle-x86-2010-1.0.84.0.exe](http://system.data.sqlite.org/downloads/1.0.84.0/sqlite-netFx40-setup-bundle-x86-2010-1.0.84.0.exe)

卸载确保删除每次安装的程序文件，并在重新安装时告诉安装程序重建 GAC。如果这是我和我的 boses 构建机器之间的唯一区别，那么该网站需要更好地列出以前的修订版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T09:29:44.463

更改您的 SQLite 表，以便任何 TEXT 字段改为 NVARCHAR(max)。.Net 应该正确映射它们。

# html - 如何制作流畅的侧边栏？

> ID：16119096
> 
> 赞同：4
> 
> 时间：2013-04-20T10:09:39.700
> 
> 标签：html, css

我正在用这个 CSS 代码创建一个侧边栏：

```
.sidebar {
position: absolute;
z-index: 100;
top: 0;
left: 0;
width: 30%;
height: 100%;
border-right: 1px solid #333;
} 
```

但是当我更改浏览器宽度时，侧边栏宽度不会缩放。如何使侧边栏流畅？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:36:40.653

**查看 CSS 部分中 body 的高度。**

这是一个适合您的工作示例：

您的 HTML：

```
<div id="content"> 
<p>This design uses a defined body height of 100% which allows setting the contained left and 
right divs at 100% height.</p> 
</div> 

<div id="sidebar"> 
<p>This design uses a defined body height which of 100% allows setting the contained left and 
right divs at 100% height.</p> 
</div> 
```

你的 CSS：

```
body { 
margin:0; 
padding:0; 
width:100%; /* this is the key! */ 
} 

#sidebar { 
position:absolute; 
right:0; 
top:0; 
padding:0; 
width:30%; 
height:100%; /* works only if parent container is assigned a height value */ 
color:#333; 
background:#eaeaea; 
border:1px solid #333; 
} 

#content { margin-right: 200px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:41:41.567

这是一个奇怪的问题，但在使用流体布局时，让背景颜色延伸到两列的底部似乎具有挑战性。

我包含了解决方法以及一个简单的 2 列流体布局。

试试这个[- jsFiddle](http://jsfiddle.net/apaul34208/S84S7/5/)

```
 html, body {
        margin:0;
        padding:0;
        background:silver; 
/* workaround to get the columns to look even, 
change color depending on which column is longer */ 
    }

    #sidebar {
        position:absolute;
        left:0px;
        top:0px;
        padding:0;
        width:30%;
        background:silver;
        word-wrap:break-word;
    }

    #content {
        position:absolute;
        right:0px;
        width:70%;
        word-wrap:break-word;
        background:gray;
    } 
```

# java - 当类不是真实的时，如何在类中创建变量？

> ID：16119098
> 
> 赞同：3
> 
> 时间：2013-04-20T10:10:09.827
> 
> 标签：java, oop

我读过一个类是创建对象的模型，并且**在物理上不存在**，而对象是真实的。但是我们在一个类中创建变量，甚至在操作它们。

1.  当类在物理上不存在时，这怎么可能？

2.  何时为这些变量创建内存？

3.  为这些变量创建的内存在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T10:15:52.187

如果您的意思是静态类变量，则它们必须被初始化，并且类内的任何静态初始化代码都必须在使用该类之前运行。确切的时间，没有指定 IIRC，不同的 JVM 可能在不同的时间执行。它们基本上与具有这些的语言中的全局变量相同。

所以重申一下：静态的东西存在并在首次使用之前被初始化。JVM 实现会处理这个问题。

但是有一个对象：类对象的实例，它是[类 Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)的子类。

* * *

补充：事实上，在Java中类的存在是如此具体，以至于它们可以被序列化，通过网络传输到不同的JVM，在那里反序列化，在那里创建类的对象并执行代码。一个简单的例子是在浏览器中运行的普通 Java 小程序。另一个例子是 Jenkins/Hudson CI 系统中的从节点，从节点程序非常小，只包含接收、反序列化和实例化类和这些类的对象的代码，由它们连接到的主服务器发送。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T11:43:48.393

试着这样想。这并不是对任何 Java 运行时如何做到这一点的准确解释，而是一种可能对您有所帮助的类/对象二元性的思考方式。

当你编写一个 X 类时，你同时描述了代码和数据。运行时将只需要一些东西的一个副本——例如代码和静态变量——以及其他东西的每个对象的一个​​副本，比如实例变量。您在编写的类文件中描述这两个东西，即使它们将分开存储。

将每个类一个副本的事物视为一起存储在一块内存中——它在 C 中称为结构。在 Java 中，第一次在程序中引用类 X 时，运行时分配这块内存并将其与类 X 相关联。

当程序执行诸如“X x1 = new X()”之类的语句时，运行时分配另一个包含所有实例变量的内存块（或结构），并保留一个指向与 x1 变量关联的单独指针。

现在，当程序执行“Arc arc = x1.getArc();”之类的东西时，运行时使用第一个指针来引用方法 getArc() 中的代码，第二个指针来引用与 x1 关联的实例变量，并使用这些实例变量执行指定的代码。

OO 编程提供了这种将数据与操作它的代码相关联的方式，允许我们将程序组织为组合代码和数据的“对象”。运行时为我们跟踪事物的不同副本。

而且我认为说该课程不存在是不准确的，它只是不会以您编写它的形式存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T13:58:59.833

类在运行时确实存在于 JVM 中。您阅读的解释是试图解决 A 点，而将其余细节留待以后处理。学校和书籍一直在这样做。

在 Oracle JVM 中，类从加载的那一刻起就具有物理表示。事实上，每个对象都有一个指向该类的指针，并且许多对象可以指向同一个类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:28:22.903

我不会将类或对象视为物理事物，这让我感到困惑。类通常被描述为对象的蓝图。对象必须使用`new`关键字来实例化（创建），当对象被实例化时，对象的类被用作创建基本默认对象的蓝图。然后，即使在运行时，也可以通过引用内存中存储对象的位置并使用对象类中的方法来操作对象类中的字段来操作对象，至少这是通常应该这样做的方式，它的所谓的封装，在 OOP 中非常重要，所以如果您不熟悉封装，我建议您研究一下。

我提到对象可以在运行时被操作，这是对象和类之间的主要区别。类也可以使用称为反射的东西，但这是另一天的另一个话题。变量或字段有时被描述为地址，它是对存储对象的内存位置的引用。对象不是直接访问的，它们是通过变量引用的。

```
JLabel label; 
```

上面的代码在使用关键字`JLabel`实例化对象时在内存中留出一个位置来存储对象。`new`到目前为止，还没有创建对象，我们已经声明了一个变量，它是对内存中创建对象时将存储的位置的引用。我们不会直接访问我们的 JLabel 对象，我们将使用我们创建的“标签”变量来引用内存中的实际对象。所以如果我们创建两个`JLabel`对象并实例化它们，像这样......

```
JLabel label;
label = new JLabel();
JLabel anotherLabel = new JLabel("this is another label"); 
```

我们现在有两个 JLabel 对象。第一个对象首先声明一个变量来引用该对象，然后在单独的行上实例化它。第二个对象声明了对它的引用并将其全部实例化在一行中。您可以通过任何一种方式创建对象，并且使用这两种方法有不同的原因。当一个对象被创建时，它的至少一个构造函数被调用，第一个对象调用`JLabel`类内部的不带参数的构造函数；第二个对象使用`JLabel`类中的构造函数，该构造函数接受 a`String`并创建显示传递给构造函数的文本的对象。

现在想象程序正在运行，我们想要更改第一个对象，使其显示一些文本，因为它当前是空白的，因为我们使用了不带任何参数的构造函数。我们可以使用这样的`setText(String)`方法来操作对象。

```
label.setText("now the first label displays text"); 
```

我们没有改变`JLabel`通过使用该方法以任何方式进行类，但是我们已经更改了对象，所以现在它显示文本。对于这个答案，我可能会失去一堆声望点，或者不管它们是什么，因为我可能没有完全正确地解释每个细节，但我回答了这个问题，因为你问的是我很难回答的问题理解了很长时间，可能比大多数人都理解，因为我从未上过编程课。有这么多，如果不写一本书，我可能无法完全解释这一点，所以我没有深入探讨范围、访问修饰符、静态等内容，但我试图涵盖我认为对于理解你是什么很重要的内容问。就像我说的，

哦，我忘了你的另一个问题。当创建对象的变量时，声明内存中存储对象的位置。此时有一个位置，但内存中的大小仍然为 0 或 null，因为没有对象。当对象被实例化时，实际存储对象所需的内存将被填充。

# django - 标准 Django 的更多 Blobstore 上传问题

> ID：16119101
> 
> 赞同：1
> 
> 时间：2013-04-20T10:10:42.517
> 
> 标签：django, google-app-engine, file-upload, upload

我正在为在 Google App Engine 上运行的 Django 应用程序（普通 Django 1.4，而不是非 rel 版本）实现图像上传功能。上传的图像被包装在一个 Django 模型中，该模型允许用户添加标题和搜索标签等属性。

上传是通过函数调用创建 Blobstore 上传 url 来执行的`blobstore.create_upload_url(url)`。函数参数是上传完成时 Bobstore 重定向到的 url。我希望这是默认 Django 表单处理程序的 url，该处理程序执行包装图像的模型的保存/更新，因此我不必为表单验证、错误报告和数据库更新重复默认 Django 行为。

我尝试提供`reverse('admin:module_images_add')`给，`create_upload_url()`但这不起作用，因为它会抛出一个`[Errno 30] Read-only file system exception`. 我认为这源于默认的 Django 表单处理程序再次尝试以标准 Django 方式上传文件，但随后撞到了 Google App Engine 的砖墙，不允许访问文件系统。

目前，我认为在不重复代码的情况下使其工作的唯一方法是严格分离进程：一个用于定义图像模型实例，第二个用于上传实际图像。不是很直观。

另请参阅我之前发布的[这个问题和答案](https://stackoverflow.com/questions/16034059/getting-google-app-engine-blob-info-in-django-view)。

关于如何使用一种表单和重用 Django 默认表单处理程序来使其工作的任何建议？

**编辑：**

我一直在阅读装饰器（我对 Python 比较陌生），从我阅读的内容来看，装饰器似乎能够修改现有 Python 代码的行为。是否可以更改现有表单处理程序的运行时行为以使用装饰器解决上述问题？我显然必须 (1) 开发装饰器并 (2) 将其附加到默认处理程序。我不确定（2）是否可能，因为它必须在运行时完成。我无法修补在 GAE 上运行的 Django 代码...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:52:36.970

好吧，我终于设法让这个工作。如果有人也遇到这种情况，这就是我所做的：

(1) 我`ImageFile`从模型中删除了该属性。它最终导致 Django 尝试从文件系统上传文件，这在 GAE 中是不允许的。

(2) 我在我的模型中添加了一个 Blobstore 密钥，它基本上是 GAE BlobStore blob 的密钥，并且需要能够在稍后阶段提供图像。附带说明：使用 GAE SDK 时，此属性的长度有限，但在 GAE 生产中要长得多。我最终`TextField`为它定义了一个。

(3)`storage.py`与 Daniel Roseman 对这个问题的改编一起使用[，](https://stackoverflow.com/questions/16034059/getting-google-app-engine-blob-info-in-django-view)并将. 它将确保 Blobstore 密钥存在于请求中，以便您与模型一起保存。`BlobstoreFileUploadHandler``SETTINGS.PY`

(4) 我创建了一个包含`ImageField`命名“图像”的自定义管理表单。这是必需的，因为它允许您选择文件。它`ImageField`实际上是“虚拟的”，因为它在表单上的唯一目的是让我选择一个文件进行上传。根据（1），这是至关重要的。

(5) 我重写`render_change_form()`了我的`ModelAdmin`类的方法，该方法将准备一个 Blobstore 上传 url。上传 url 有两个版本：一个用于添加新图像，一个用于保存对现有图像的更改。上传 url 通过上下文对象传递给模板。

(6) 我修改了`change_form.html`(5) 中的 Blobstore 上传 url 作为表单的操作。

(7)`save_model()`我重写了我的 ModelAdmin 的方法：

```
def save_model(self, request, obj, form, change):
    if request.FILES.has_key("blobkey"):
        blob_key = request.FILES["blobkey"].blobstore_info._BlobInfo__key
        obj.blobstore_key = blob_key
    super(PhotoFeatureAdmin, self).save_model(request, obj, form, change) 
```

这允许我检索上传处理程序设置的 blob 键并将其设置为我的模型的属性。

对于图像模型的删除，我添加了一个由模型的删除信号触发的特殊功能。这将使 Blobstore 与应用中的图像模型保持同步。

而已。以上允许将图像上传到 GAE 的 blob 存储，其中每个 blob 都整齐地包装在管理员用户可以维护的 Django 模型对象中。好处是不需要复制标准的 Django 行为，并且图像的模型对象将来可以很容易地使用属性进行扩展。

最后一句话：在我看来，考虑到上述情况，GAE 上的普通 Django 中对 blob 的支持目前非常差。实现这一点应该容易得多，而不必依赖 Django 非相关代码和相当长的修改列表；或者，谷歌应该在他们的开发者文档中说明这一点。除非我错过了什么，否则这是无证领域。

# java - 自动将构造的每个 Class 对象添加到 ArrayList

> ID：16119102
> 
> 赞同：1
> 
> 时间：2013-04-20T10:10:44.880
> 
> 标签：java, class, object, arraylist

我在学习 Java 方面还是个新手，我需要一种方法来将每个从某个类构造的对象放入我以后可以访问的 ArrayList 中。

这是我的`Item`课：

```
import java.util.ArrayList;
import java.util.*;
public class Item
{
    private String name;
    private int quantity;
    private ArrayList<Item> allItems = new ArrayList<Item>(); //the ArrayList I'm trying to fill with every Item object

    /**
     * Constructs an item of a given name and quantity
     * @param name Item name
     * @param quantity How much of an item the player has
     */
    public Item(String name, int quantity)
    {
        this.name = name;
        this.quantity = quantity;
    }

    /**
     * @return Item name
     */
    public String getItemName()
    {
        return name;
    }

    /**
     * @return Quantity of the item
     */
    public int getQuantity()
    {
        return quantity;
    }

    /**
     * @return A list of items that have a quantity > 0
     */
    public ArrayList<Item> getInventory()
    {
        ArrayList<Item> inventory = new ArrayList<Item>();
        for(Item i : allItems)
        {
            if(i.getQuantity() > 0)
                inventory.add(i);
        }
        return inventory;
    }
} 
```

如何在每次构造对象时添加一个`Item`对象？`allItems`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:15:02.157

首先，arraylis 必须是静态的，以便在所有实例之间共享。否则，每个实例都会有不同的变量。

有关实例/类成员的更多信息在[这里](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)。

```
private String name;
private int quantity;
private static ArrayList<Item> allItems = new ArrayList<Item>(); 
```

然后，您可以在构造函数中添加创建的实例，将其称为“this”。

[关于“this”关键字](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)。

```
public Item(String name, int quantity)
{
    this.name = name;
    this.quantity = quantity;
    allItems.add(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:14:59.633

您当然希望所有项目都有一个列表，而不是每个项目都随身携带并维护自己的所有项目的副本列表。当这是您的意图时，您应该将列表定义为`static`：

```
private static ArrayList<Item> allItems = new ArrayList<Item>() 
```

静态变量由类的所有实例共享。

在 Item 的构造函数中，只需添加`this`到所有项目的列表中。

```
allItems.add(this); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:14:57.040

一种可能的解决方案是将项目列表声明为静态，如下所示：

```
public static List<Item> allItems = new ArrayList<Item>(); 
```

之后，您可以使用以下代码段访问它：

```
Item.allItems // example would be System.out.println(Item.allItems) 
```

此外，在您的构造函数中，您将需要以下代码：

```
public Item(String name, int quantity) {
    this.name = name;
    this.quantity = quantity;
    this.allItems.add(this);
} 
```

**但是**请谨慎使用这种方法，因为它会将创建的每个项目添加到列表中，这可能导致内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T10:15:36.077

您需要一个静态列表，然后您可以使用类构造函数将此对象添加到列表中。

```
import java.util.ArrayList;
import java.util.*;
public class Item
{
    private String name;
    private int quantity;
    private static ArrayList<Item> allItems = new ArrayList<Item>(); //the ArrayList I'm trying to fill with every Item object

    /**
     * Constructs an item of a given name and quantity
     * @param name Item name
     * @param quantity How much of an item the player has
     */
    public Item(String name, int quantity)
    {
        this.name = name;
        this.quantity = quantity;
        allItems.add(this);
    }

    /**
     * @return Item name
     */
    public String getItemName()
    {
        return name;
    }

    /**
     * @return Quantity of the item
     */
    public int getQuantity()
    {
        return quantity;
    }

    /**
     * @return A list of items that have a quantity > 0
     */
    public static ArrayList<Item> getInventory()
    {
        ArrayList<Item> inventory = new ArrayList<Item>();
        for(Item i : allItems)
        {
            if(i.getQuantity() > 0)
                inventory.add(i);
        }
        return inventory;
    }
} 
```

# php - 在 php 中添加两个不同关联数组的值。在结果数组中也显示唯一的键值

> ID：16119104
> 
> 赞同：1
> 
> 时间：2013-04-20T10:10:53.987
> 
> 标签：php, associative-array, array-merge

我需要合并两个可能包含或不包含相同键的关联数组，如果键相同，则需要添加并存储在结果数组中的值

```
 $array1 = array(
      'a' => 5,
      'b' => 10,
      'c' => 6,
      'k' = > 10
    );

$array2 = array(
  'a' => 100,
  'c' => 200,
  'd' => 30,
  'k' => 10
); 
```

如何添加上述两个关联数组并接收以下输出/关联数组 -

```
 $array2 = array(
      'a' => 105,
      'b' => 10,
      'c' => 206,
      'd' => 30,
      'k' => 20
    ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T10:18:12.590

尝试

```
 $array1 = array(
      'a' => 5,
      'b' => 10,
      'c' => 6,
      'k' => 10
    );

$array2 = array(
  'a' => 100,
  'c' => 200,
  'd' => 30,
  'k' => 10
);

$sums = array();
foreach (array_keys($array1 + $array2) as $key) {
    $sums[$key] = (isset($array1[$key]) ? $array1[$key] : 0) + (isset($array2[$key]) ? $array2[$key] : 0);
}

print_r($sums); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:19:21.477

用于查找唯一索引值

```
$array2 =array_merge($array1,$array2); 
```

为了找到独特的价值，您可以尝试

```
$array2 =array_unique(array_merge($array1,$array2)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T10:28:26.767

```
$a3 = array_merge_recursive ($array1, $array2);
foreach ($a3 as $key => $value)
{
    $a3[$key] = (is_array($value))?array_sum($value):$value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T10:19:27.923

我不知道您是否可以使用内部函数执行此操作，但只需遍历两个数组即可。

```
function merge_add($array1, $array2)
{
    $result = array();
    merge_add_array($array1, $result);
    merge_add_array($array2, $result);
    return $result;
}

function merge_add_array($array, &$result)
{
    foreach ($array as $key=>$value)
    {
        if (array_key_exists($key, $result))
        {
            $result[$key] += $value;
        }
        else
        {
            $result[$key] = $value;
        }
    }
}

$result = merge_add($array1, $array2); 
```

将`&`导致[通过引用传递](http://www.php.net/manual/en/language.references.pass.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-20T10:29:05.023

```
<?php
$array1 = array(
      'a' => 5,
      'b' => 10,
      'c' => 6,
      'k' => 10
    );

$array2 = array(
  'a' => 100,
  'c' => 200,
  'd' => 30,
  'k' => 10
);

$keys = array_keys($array1 + $array2);

foreach ($keys as $key) {
    $array2[$key] = isset($array1[$key]) && isset($array2[$key]) ? ($array1[$key] + $array2[$key]) : (isset($array1[$key]) ? $array1[$key] : $array2[$key]);
}

print_r($array2); 
```

# iphone - 从应用程序中获取应用程序数据的网站

> ID：16119109
> 
> 赞同：0
> 
> 时间：2013-04-20T10:11:12.173
> 
> 标签：iphone, ios

我见过一些应用程序，例如 Discover，它是一个文件管理应用程序，在应用程序中构建了网页。通过在任何网络浏览器上输入 iphone ip 号和端口号，可以通过 wifi 访问这些页面。该页面可以读取和写入数据到 iphone 应用程序。

这背后的过程是什么？我必须采取哪些步骤才能在我的 iphone 应用程序中创建这样的网页。

# jasper-reports - 错误填充打印... java.lang.String 无法转换为 java.lang.Number

> ID：16119110
> 
> 赞同：0
> 
> 时间：2013-04-20T10:11:17.697
> 
> 标签：jasper-reports, ireport

我正在尝试样本报告。我成功连接数据库。

我写了简单的查询

```
select country, population from dataset 
```

```
desc dataset;

| country    | varchar(25) | YES  |     | NULL    |       |

| population | int(9)      | YES  |     | NULL    |       | 
```

我采用了空白图表，在此我使用了 XY 折线图。X 轴我给出了*国家*和 y 轴*人口*。当我单击预览按钮时，出现以下错误。

```
Error filling print... java.lang.String cannot be cast to java.lang.Number 
java.lang.ClassCastException: java.lang.String cannot be cast to java.lang.Number
at net.sf.jasperreports.charts.fill.JRFillXySeries.evaluate(JRFillXySeries.java:159)     
at net.sf.jasperreports.charts.fill.JRFillXyDataset.customEvaluate(JRFillXyDataset.java:121)    
at net.sf.jasperreports.engine.fill.JRFillElementDataset.evaluate(JRFillElementDataset.java:155)     
at net.sf.jasperreports.engine.fill.JRCalculator.calculateVariables(JRCalculator.java:160)     
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:765)     
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:288)     
at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:151)     
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:909)     
at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:822)     
at net.sf.jasperreports.engine.fill.JRFiller.fill(JRFiller.java:61)     
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:446)     
at net.sf.jasperreports.engine.JasperFillManager.fill(JasperFillManager.java:276)     
at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:745)     
at com.jaspersoft.ireport.designer.compiler.IReportCompiler.run(IReportCompiler.java:891)     
at org.openide.util.RequestProcessor$Task.run(RequestProcessor.java:572)     
at org.openide.util.RequestProcessor$Processor.run(RequestProcessor.java:997) 
Print not filled. Try to use an EmptyDataSource... 
```

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:59:54.810

我认为您需要的是标准折线图而不是 XY 折线图。

XY 折线图需要类别（在您的情况下是 Country）和 (X,Y) 点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-09T17:07:47.323

对于折线图，在图表数据中，类别表达式（Y 轴）应该是可以转换为数字的值，而值表达式（X 轴）可以是字符串。如果这 2 个值没有混淆，我们将出现强制转换为 Number 错误。

# android - 如何获取日期和时间并将其保存在文本文件android中？

> ID：16119111
> 
> 赞同：2
> 
> 时间：2013-04-20T10:11:24.157
> 
> 标签：android, date, time, gps, location

我每半小时获取一次 gps 位置并在 textview 中显示它，还将 textview 中传递的值保存到 sdcard gpsdata.txt 文件，使用下面的代码，但在这里我必须保存它的时间和日期以及编号。

* * *

*   现在我在 txt 文件中得到这样的 gps 位置：

## 13.01471695,80.1469223 13.01471695,
80.1469223 13.01471695,80.1469223
13.01471695,80.1469223

*   但我需要这样：

## 1)13.01471695,80.1469223 时间:12 30pm 日期:1/1/2013
2)13.01471670,80.1469260 时间:12 45pm 日期:1/1/2013

```
public void appendData(String text)
{       
   File dataFile = new File(Environment.getExternalStorageDirectory() + "/SUNDTH/GpsData.txt");
   if (!dataFile.exists())
   {
      try
      {
         dataFile.createNewFile();
      } 
      catch (IOException e)
      {
         // TODO Auto-generated catch block
         e.printStackTrace();
      }
   }
   try
   {
      //BufferedWriter for performance, true to set append to file flag
      BufferedWriter buf = new BufferedWriter(new FileWriter(dataFile, true)); 
      buf.append(text);
      buf.newLine();
      buf.close();
   }
   catch (IOException e)
   {
      // TODO Auto-generated catch block
      e.printStackTrace();
   }
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:28:44.487

在该行之前`buf.append(text);`添加这行代码；

```
SimpleDateFormat sdf = new SimpleDateFormat("HH:mm dd/MM/yyyy");
String currentDateandTime = sdf.format(new Date());
text+=" "+currentDateandTime; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:32:13.377

```
SimpleDateFormat dateFormat = new SimpleDateFormat("d/M/yyyy");
SimpleDateFormat timeFormat = new SimpleDateFormat("hh:mmz"); 
```

这是生成单个语句的代码，我假设您使用 Location 对象

```
13.01471695,80.1469223 time:12 30pm date:1/1/2013

Date locationDate = new Date(location.getTime());

StringBuilder sb = new StringBuilder(location.getLatitude())
.append(",")
.append(location.getLongitude())
.append("time:")
.append(timeFormat.format(locationDate))
.append(" date:")
.append(dateFormat.format(locationDate));

String locationDetail = sb.toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T10:35:27.600

为什么不为此使用 an`SQLiteDatabase`那么您可以简单地使用类似这样的方法来插入具有当前日期时间的记录：

[如何在 Android 应用程序中插入日期时间设置为“现在”的 SQLite 记录？](https://stackoverflow.com/questions/754684/how-to-insert-a-sqlite-record-with-a-datetime-set-to-now-in-android-applicatio)

# database-design - Enterprise Architect 为包不工作生成 DDL

> ID：16119113
> 
> 赞同：1
> 
> 时间：2013-04-20T10:11:41.990
> 
> 标签：database-design, enterprise-architect

我在企业架构师中有一个类图。我想要包的数据库表。我右键单击类图包并选择代码工程-> 生成DDL。在“生成包 DDL”对话框中，我选择“包括所有子包”。问题在下面的列表中，没有添加表格以便我可以选择和生成。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-15T18:03:04.333

以下是在 Enterprise Architect (EA) 9.3 中从 UML 类图生成 DDL 的步骤：

1.  在 EA 中打开您的项目
2.  在编辑器窗口中打开模型的类图。我使用右侧的项目浏览器窗口并单击 floders，直到找到我的模型，然后双击它。
3.  单击工具 => 模型转换 (MDA) => 转换当前包。这将打开模型转换对话框。
4.  在对话框左侧选择要映射到 DDL 模式的类（如果需要全部使用，请使用全部按钮）
5.  在对话框右侧的转换框中单击并选择 DDL 复选框
6.  单击执行转换。这会生成一个 DDL 图。
7.  在项目浏览器中双击 DDL 图并在编辑器选项卡中打开 DDL 图
8.  单击工具 => 数据库工程 => 生成包 DDL。这将打开 Generate Package DDL 对话框
9.  通过选择要生成的对象来选择要为其生成表的类（如果需要，请使用全选按钮）
10.  在文件生成中指定输出文件。我更喜欢单个文件。
11.  点击生成按钮

这将为您提供指定文件中生成的 DDL。到目前为止，我发现生成的 DDL 在没有手动 tweeks 的情况下无法使用 FWIW。例如，似乎不可能为继承、关系映射等指定 OR 映射策略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:17:28.073

[看看手册。](http://www.sparxsystems.com/uml_tool_guide/data_modeling/generateddlforapackage.htm)您需要一个包含数据建模图的数据库工程模型。“EAExample”示例模型将向您展示它的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T05:31:43.237

我发现了我的问题。问题是我想在生成表之前生成代码。要生成表，我必须将包“转换”为 DDL。然后通过生成代码场景，我可以生成数据库脚本在 sql server 中使用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-08T15:00:25.590

在第 8 版中。我制作 DDL 自动打包。

选择 de class package > Project > Transformations > Transform Current Package 然后选择要转换的元素 > 选择选项 (DDL) 和 DO Tranform。

完毕

# c++ - 将记录作为函数结果从 Delphi DLL 传递到 C++

> ID：16119116
> 
> 赞同：7
> 
> 时间：2013-04-20T10:11:50.023
> 
> 标签：c++, delphi, dll

我现在正在经历一些非常奇怪的事情。当我将结构从 C++ 传递到 Delphi DLL 作为参数时，一切正常。但是，一旦我想收到一条记录，我就会得到错误的值或异常。我停用了记录的对齐方式，以便通过它们应该可以工作！这是代码！

德尔福DLL：

```
TSimpleRecord = packed record
  Nr1 : Integer;
  Nr2 : Integer;
end;

//...

function TTest() : TSimpleRecord; cdecl;
begin
  Result.Nr1 := 1;
  Result.Nr2 := 201;
  ShowMessage(IntToStr(SizeOf(Result)));
end; 
```

C++ 调用：

```
#pragma pack(1)
struct TSimpleRecord
{
    int Nr1;
    int Nr2;
};

//...

    typedef TSimpleRecord (__cdecl TestFunc)(void);
    TestFunc* Function;
    HINSTANCE hInstLibrary = LoadLibrary("Reactions.dll");
    if (hInstLibrary)
    {
        Function = (TestFunc*)GetProcAddress(hInstLibrary, "TTest");
        if (Function)
        {
            TSimpleRecord Result = {0};
            Result = Function();
            printf("%d - %d - %d", sizeof(Result), Result.Nr1, Result.Nr2);
            cin.get();
        }
    } 
```

我不知道为什么将这条记录作为参数传递而不是作为函数的结果！？

有人可以帮助我吗？

谢谢

PS：正如我所说，C++ 和 Delphi 都显示记录是 8 字节大。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:17:26.350

一些编译器会`struct`在寄存器中返回类型（可能取决于大小），其他编译器会添加一个隐藏的额外参数，结果应该存储在其中。不幸的是，看起来您正在处理两个不同意如何返回它们的编译器。

您应该能够通过显式使用`out`参数来避免该问题。

```
procedure TTest(out Result: TSimpleRecord); cdecl;
begin
  Result.Nr1 := 1;
  Result.Nr2 := 201;
end; 
```

不要忘记相应地更新 C++ 代码。

[Rudy Velthuis 曾写过这样的文章](http://rvelthuis.de/articles/articles-convert.html)：

> 这表明 ABCVar 结构在寄存器 EDX:EAX 中返回（EDX 具有前 32 位，EAX 具有较低的位）。这根本不是 Delphi 对记录所做的，即使是这种大小的记录也是如此。Delphi 将此类返回类型视为额外的 var 参数，并且不返回任何内容（因此该函数实际上是一个过程）。
> 
> [...]
> 
> Delphi 作为 EDX:EAX 组合返回的唯一类型是 Int64。

这表明避免该问题的另一种方法是

```
function TTest() : Int64; cdecl;
begin
  TSimpleRecord(Result).Nr1 := 1;
  TSimpleRecord(Result).Nr2 := 201;
end; 
```

请注意，即使在 C++ 中未定义行为的情况下，Delphi 也允许这种类型双关语。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:02:15.657

Delphi 不遵循返回值的平台标准 ABI。标准 ABI 按值将返回值传递给调用者。Delphi 将返回值视为隐式的额外 var 参数，在所有其他参数之后传递。[文档](http://docwiki.embarcadero.com/RADStudio/en/Program_Control#Handling_Function_Results)描述了规则。

您可以更改您的调用代码以匹配它。在 C++ 函数中传递对 struct 参数的额外引用。

```
typedef void (__cdecl TestFunc)(TSimpleRecord&); 
```

如果您要在 C++ 端执行此操作，则最好在 Delphi 端进行相同的更改以清楚起见。

由于 Delphi 不遵循返回值的平台标准，我建议您将自己限制为与其他工具兼容的类型。这意味着高达 32 位的整数值、指针和浮点值。

作为一般经验法则，不要打包唱片。如果这样做，您将出现影响性能的错位。对于问题中的记录，无论如何都不会有填充，因为两个字段的大小相同。

# c++ - 解析 C++ 源代码时 ANTLR4 相互左递归错误

> ID：16119120
> 
> 赞同：0
> 
> 时间：2013-04-20T10:12:33.107
> 
> 标签：c++, grammar, parser-generator, antlr4, left-recursion

我正在尝试解析 cpp 源语法的一个子集。以下 ANTLR4 解析器规则直接从 c++ 语言规范中复制而来（连字符被下划线代替）：

```
abstract_declarator:
    ptr_operator abstract_declarator?
  |  direct_abstract_declarator
;
direct_abstract_declarator:
    direct_abstract_declarator? '(' parameter_declaration_clause ')' cv_qualifier_seq? exception_specification?
   |   direct_abstract_declarator? '[' constant_expression? ']'
   |   '(' abstract_declarator ')'
; 
```

但是当 org.antlr.v4.Tool 解析语法时出现此错误：

**错误（119）：cppProcessor.g4::: 以下规则集是相互左递归的 [direct_abstract_declarator]**

好像是**direct_abstract_declarator？**左侧的语法会导致错误。我应该如何纠正它？为什么ANTLR4不支持？

手动将规则重构为这种形式不会产生错误：

```
direct_abstract_declarator:
       direct_abstract_declarator '(' parameter_declaration_clause ')' cv_qualifier_seq? exception_specification?
     |  '(' parameter_declaration_clause ')' cv_qualifier_seq? exception_specification?
     | direct_abstract_declarator '[' constant_expression? ']'
     | '[' constant_expression? ']' 
     | '(' abstract_declarator ')' 
```

那么ANTLR4在处理左递归规则时是否可以直接支持第一种语法呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T16:00:35.517

ANTLR 4 支持*直接*左递归，但不支持间接或隐藏左递归。您可以通过显式扩展可选构造来解决上述情况。

```
direct_abstract_declarator
   :   direct_abstract_declarator '(' parameter_declaration_clause ')' cv_qualifier_seq? exception_specification?
   |   direct_abstract_declarator '[' constant_expression? ']'
   |   '(' parameter_declaration_clause ')' cv_qualifier_seq? exception_specification?
   |   '[' constant_expression? ']'
   |   '(' abstract_declarator ')'
; 
```

# c# - 使用 C#.net 和 json 远程登录 drupal 网站

> ID：16119127
> 
> 赞同：1
> 
> 时间：2013-04-20T10:13:05.603
> 
> 标签：c#, json, drupal-7

我想在 C#.net 中创建一个可以通过 drupal 网站登录的表单。Service 3.x 模块已启用，并且 Rest 服务器在我的网站上正确运行。我唯一的问题是如何将用户名和密码序列化为 json 格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T17:13:19.830

最后一个解决方案：

我有一个 windows 窗体，包含一个文本框、一个蒙版文本框和一个按钮（下面称为 button3），

在按钮单击事件上，文本框和 maskedtextbox 内容将放置在使用此类构造的用户对象中：

```
class User
{
    public string username;
    public string password;
    public string name;
    public string number;
    public string address;
    public string email;

    public User(string user, string pass, string name = "", string number = "", string address = "", string email = "")
    {
        this.username = user;
        this.password = pass;
        this.name = name;
        this.number = number;
        this.address = address;
        this.email = email;
    }
} 
```

[然后使用Json.net](http://www.json.net)库将此对象转换为 json 模型

在其余部分，它发出请求，传入的 cookie 将存储在 cookieJar 中，对于其余请求，您必须将此 cookieContainer 复制到您的请求 cookieContainer 中，您将保持登录状态。这是代码的其余部分：

```
 private void button3_Click(object sender, EventArgs e)
    {
        CookieContainer cookieJar = new CookieContainer();
        User user = new User(textBox1.Text,maskedTextBox1.Text);
        string url = "http://"your-web-address"/"your-rest-service"/?q="your-resurce"/user/login.json";
        try
        {
            var request = (HttpWebRequest)WebRequest.Create(url);          
            request.ContentType = "application/json";
            request.Method = "POST";
            request.CookieContainer = cookieJar;

            using (var streamWriter = new StreamWriter(request.GetRequestStream()))
            {
                string query = JsonConvert.SerializeObject(user);

                streamWriter.Write(query);
                streamWriter.Flush();
                streamWriter.Close();
            }
            var response = (HttpWebResponse)request.GetResponse();
            using (var streamReader = new StreamReader(response.GetResponseStream()))
            {
                var responseText = streamReader.ReadToEnd();
            }

    //Check to see if you're logged in
            url = "http://web-address/rest-server/?q=resurce/system/connect.json";
            var newRequest = (HttpWebRequest)WebRequest.Create(url);
            newRequest.CookieContainer = cookieJar;
            newRequest.ContentType = "application/json";
            newRequest.Method = "POST";

            var newResponse = (HttpWebResponse)newRequest.GetResponse();
            using (var newStreamReader = new StreamReader(newResponse.GetResponseStream()))
            {
                var newResponseText = newStreamReader.ReadToEnd();
            }

        }
        catch(Exception ex)
        {
            MessageBox.Show(ex.ToString(), "Can't access server");
        }
    } 
```

注意：第二个请求只是为了测试 drupal 是否认识我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T23:58:21.653

你的问题很模糊，但我可以告诉你登录的方法。

要使用服务登录 Drupal 站点，您可以启用用户资源和操作登录（和注销）。

使用以下登录，（根据您的设置进行更改）。

```
URL
 - HOST: "http://www.yourserver.com" 
 - PATH: "/service-end-point/user/login"
METHOD 
 - POST CONTENT-TYPE: application/json 
BODY
 - RAW Input:
   { "username":"demo@gmail.com", "password":"demo" } 
```

# android - android java.io.IOException：服务不可用

> ID：16119130
> 
> 赞同：38
> 
> 时间：2013-04-20T10:13:19.467
> 
> 标签：android, google-maps-android-api-2

描述：*我正在使用`Google maps API V2`。我已经`Android Reverse Geocoding`在触摸的位置实现。*

问题：它抛出异常

```
 try {
     addresses = geocoder.getFromLocation(latitude, longitude,1);}
 catch (IOException e)
     {
     e.printStackTrace();
     if(AppConstants.DEBUG)Log.v(AppConstants.DEBUG_TAG," e.printStackTrace(): "+e.getMessage());
     } 
```

我收到`latitude`并且`longitude`值正确，但我不明白它为什么会抛出`exception`，我也做过谷歌搜索，但它无济于事。

谁能详细解释一下？？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2013-04-20T11:30:12.577

如本[Android 问题 38009 - Geocoder throwing exception: IOException: Service not Available Rebooting](http://code.google.com/p/android/issues/detail?id=38009) **the Device 中所述，将解决问题**

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-02-27T07:17:05.420

**如果您不想重新启动设备，请使用此**

```
 public  JSONObject getLocationFormGoogle(String placesName) {

    HttpGet httpGet = new HttpGet("http://maps.google.com/maps/api/geocode/json?address=" +placesName+"&ka&sensor=false");
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    try {
        response = client.execute(httpGet);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {

        e.printStackTrace();
    }

    return jsonObject;
}

public  LatLng getLatLng(JSONObject jsonObject) {

    Double lon = new Double(0);
    Double lat = new Double(0);

    try {

        lon = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
            .getJSONObject("geometry").getJSONObject("location")
            .getDouble("lng");

        lat = ((JSONArray)jsonObject.get("results")).getJSONObject(0)
            .getJSONObject("geometry").getJSONObject("location")
            .getDouble("lat");

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return new LatLng(lat,lon);

}

LatLng Source =getLatLng(getLocationFormGoogle(placesName)); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-22T12:11:43.793

我修改了@Ani 解决方案以从 lat long 参数中获取城市名称：

```
public static String getLocationCityName( double lat, double lon ){
    JSONObject result = getLocationFormGoogle(lat + "," + lon );
    return getCityAddress(result);
}

protected static JSONObject getLocationFormGoogle(String placesName) {

    String apiRequest = "https://maps.googleapis.com/maps/api/geocode/json?latlng=" + placesName; //+ "&ka&sensor=false"
    HttpGet httpGet = new HttpGet(apiRequest);
    HttpClient client = new DefaultHttpClient();
    HttpResponse response;
    StringBuilder stringBuilder = new StringBuilder();

    try {
        response = client.execute(httpGet);
        HttpEntity entity = response.getEntity();
        InputStream stream = entity.getContent();
        int b;
        while ((b = stream.read()) != -1) {
            stringBuilder.append((char) b);
        }
    } catch (ClientProtocolException e) {
    } catch (IOException e) {
    }

    JSONObject jsonObject = new JSONObject();
    try {
        jsonObject = new JSONObject(stringBuilder.toString());
    } catch (JSONException e) {

        e.printStackTrace();
    }

    return jsonObject;
}

protected static String getCityAddress( JSONObject result ){
    if( result.has("results") ){
        try {
            JSONArray array = result.getJSONArray("results");
            if( array.length() > 0 ){
                JSONObject place = array.getJSONObject(0);
                JSONArray components = place.getJSONArray("address_components");
                for( int i = 0 ; i < components.length() ; i++ ){
                    JSONObject component = components.getJSONObject(i);
                    JSONArray types = component.getJSONArray("types");
                    for( int j = 0 ; j < types.length() ; j ++ ){
                        if( types.getString(j).equals("locality") ){
                            return component.getString("long_name");
                        }
                    }
                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    return null;
} 
```

# uitabbarcontroller - TabBar 应用程序缓慢

> ID：16119131
> 
> 赞同：1
> 
> 时间：2013-04-20T10:13:20.607
> 
> 标签：uitabbarcontroller

我有一个问题，我有一个带有 3 个选项卡的 TabBar 应用程序，在应用程序开始时，如果我尝试更改选项卡（仅在特定选项卡上），更改有点慢，第一次之后一切都很快，我该​​如何检查发现问题的具体过程（方法）的时间？

# uialertview - UIAlertView 显示文本框和按钮

> ID：16119132
> 
> 赞同：0
> 
> 时间：2013-04-20T10:13:29.263
> 
> 标签：uialertview

我使用以下代码创建了一个`UIAlertView`并在其上添加了一些组件，但结果在图像上：（（（图像在这里：http: [//i.stack.imgur.com/DTg02.png](http://i.stack.imgur.com/DTg02.png)）

```
-(IBAction)login:(id)sender
{
    UIAlertView *login = [[UIAlertView alloc]initWithTitle: @"Login first"
                                                   message:@"enter username and password please first" delegate:self cancelButtonTitle:@"cancel"otherButtonTitles:@"OK", nil];

k = [[UITextField alloc] initWithFrame:CGRectMake(20.0, 70.0, 200.0, 25.0)]; //<< it also displays wrong without this line
k.text = @"";
k.backgroundColor = [UIColor whiteColor];
k.clearButtonMode= UITextFieldViewModeWhileEditing;
k.keyboardType = UIKeyboardTypeAlphabet;
k.keyboardAppearance = UIKeyboardAppearanceAlert;

p = [[UITextField alloc] initWithFrame:CGRectMake(20.0, 100.0, 200.0, 25.0)];
p.text = @"";
p.backgroundColor = [UIColor whiteColor];
p.clearButtonMode = UITextFieldViewModeWhileEditing;
p.keyboardType = UIKeyboardTypeAlphabet;
p.keyboardAppearance = UIKeyboardAppearanceAlert;

[login addSubview:k];
[login addSubview:p];
[login show];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-11T06:14:57.093

如果要在 UIAlertView 上添加多个 textField 和 Multiple Button，请按照以下步骤操作：

**步骤1 ：**

```
@interface ViewController ()<UIAlertViewDelegate>
{
    UITextField *textFieldOne,*textFieldTwo,*textFieldThird;
} 
```

**第2步 ：**

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Multiple TextField" delegate:nil cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil];

    [alert addButtonWithTitle:@"CANCEL"];
     alert.delegate=self;

    UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 100, 100)];
    textFieldOne=[[UITextField alloc]initWithFrame:CGRectMake(5, 0, 150, 20)];
    [textFieldOne setPlaceholder:@"First Name"];
    [myView addSubview:textFieldOne];

    textFieldTwo=[[UITextField alloc]initWithFrame:CGRectMake(5,25, 150, 20)];
    [textFieldTwo setPlaceholder:@"Middle Name"];
    [myView addSubview:textFieldTwo];

    textFieldThird=[[UITextField alloc]initWithFrame:CGRectMake(5,50, 150, 20)];
    [textFieldThird setPlaceholder:@"Last Name"];
    [myView addSubview:textFieldThird];

    [alert setValue:myView forKey:@"accessoryView"];
    [alert show]; 
```

**第 3 步：**

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];

    if([title isEqualToString:@"YES"])
    {
        NSLog(@"Button YES");
        NSLog(@"TextFiledOne Text = %@",textFieldOne.text);
        NSLog(@"TextFiledTwo Text = %@",textFieldTwo.text);
        NSLog(@"TextFiledThree Text = %@",textFieldThird.text);
    }
    else if([title isEqualToString:@"NO"])
    {
        NSLog(@"Button NO");
    }
    else
    {
        NSLog(@"Cancel is click");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:10:16.017

A`UIAlertView`不考虑额外的文本输入。您可以改用 a `UIActionSheet`，因为它在[这里](https://stackoverflow.com/questions/5089437/how-to-enable-text-input-in-uitextfield-which-is-in-uiactionsheet)解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T09:00:29.283

不要去虚张声势。只需使用以下代码：

```
[login setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput]; 
```

并处理用户的输入，使用这个：

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    if([[alertView textFieldAtIndex:0].text isEqual:@"UserName"]&&[[alertView textFieldAtIndex:1].text isEqual:@"PassWord"])
    {
        //do your stuff here
        [adminLoginButton setTitle:@"Logout" forState:UIControlStateNormal];
        [adminLoginButton setImage:[UIImage imageNamed:@"Logout.png"] forState:UIControlStateNormal];
    }
    else
    {
        UIAlertView *errorMessage = [[UIAlertView alloc]initWithTitle:@"Authentication Error" message:@"Input is wrong" delegate:self cancelButtonTitle:@"Okay" otherButtonTitles: nil];
        [errorMessage show];
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-11T07:29:26.620

添加到这里已经添加的代码是没有意义的，因为它已经足够好，并且给出了一些好的替代方案。我要做的是告诉你为什么不应该将自己的`UITextField`s 添加到`UIAlertView`using 中`addSubview:`。

基本上，Apple 已经制作了`UIAlertView`要使用的类，`as is`并且该类的视图层次结构是私有的。

> **子类化注释**
> 
> UIAlertView 类旨在按原样使用，不支持子类化。此类的视图层次结构是私有的，不得修改。

取自[`UIAlertView`Apple 文档](https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIAlertView_Class/index.html)的子类化注释。

本质上，这意味着如果您`addSubview:`在 a 上使用该方法，`UIAlertView`那么您实质上是在更改 Apple 指示为私有的内容，并且您的应用程序将被 Apple App Review Process 拒绝，因为规则**2.5**。

> **2.5** 使用非公开 API 的应用将被拒绝

您可能会问自己，为什么这种方法甚至`UIAlertView`肯定存在，因为我们可以使用它。**不**，它存在的原因是因为该类`UIAlertView`本身是声明方法的子`UIView`类`addSubview:`。不幸的是，没有理由阻止一个实例`UIAlertView`实际调用该方法。因此，Apple 所做的是他们重写了该`addSubview:`方法，它所做的只是返回。所以这个方法让它什么都不做，你传递给这个方法的任何视图都不会被添加，因为它从不调用`[super addSubview:view];`.

因此，当涉及到`UIAlertView`s 时，有两件事是你不应该做的，它们是：

1.  **`UIAlertView`像这样的子**类**`@interface MYAlertView : UIAlertView`是子类化，是不允许的。**

***   **更改视图层次结构**，如`[alertView addSubview:view];`** 

 **但是，我应该指出一点，虽然我们不允许子类化，`UIAlertView`但我们仍然可以为它创建类别，`@interface UIAlertView (MyCategory)`因为这不是子类化，它被称为类类别或类扩展（我也听说过它之前调用了一个类提供者）。

还应该注意的是，如果您正在为`iOS8`及以上开发，您应该使用`UIAlertController`已`UIAlertView`被弃用的。

> **重要的：**
> 
> UIAlertView 在 iOS 8 中已弃用。（请注意，UIAlertViewDelegate 也已弃用。）要在 iOS 8 及更高版本中创建和管理警报，请改用 UIAlertController 和 UIAlertControllerStyleAlert 的首选样式。

因此，我要么使用其他答案中提到的自定义类之一，要么继续使用`UIAlertController`，或者如果您有时间制作自己的自定义警报视图。

我希望这个解释能帮助你`UIAlertView`更多地理解。**

# java - 精灵面朝您按下的方向

> ID：16119134
> 
> 赞同：0
> 
> 时间：2013-04-20T10:14:06.897
> 
> 标签：java, sprite, lwjgl

我对 Java 和 LWJGL 相当陌生。我正在尝试制作 2d 精灵更改外观，使其朝向您所持有的方向，我将如何处理？

到目前为止，我有这个-

```
package keyboardinputdb;

import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import javax.swing.ImageIcon;
import javax.swing.JFrame;

public class KeyboardInputDB extends JFrame{

//Variables
int x, y, scoreCount;

private Image dbImage;
private Graphics dbg; 

Image littleAdventurer;
boolean faceLeft;
boolean faceRight;
boolean faceUp;

Font font = new Font("Arial", Font.BOLD, 18);

//Action Listener
public class AL extends KeyAdapter {
    public void keyPressed(KeyEvent e){
        int keyCode = e.getKeyCode();
        if(keyCode == e.VK_LEFT){
            x-=3;
            if(x <= 0){
                x = 0;
            }
        }
        if(keyCode == e.VK_RIGHT){
            x+=3;
            if(x >= 235){
                x = 235;
            }
        }
        if(keyCode == e.VK_UP){
            y-=3;
            if(y <= 20){
                y = 20;
            }
        }
        if(keyCode == e.VK_DOWN){
            y+=3;
            if(y >= 235){
                y = 235;
            }
        }
    }
    public void keyReleased(KeyEvent e){

    }
}

public KeyboardInputDB(){
    //Load Images
    ImageIcon i = new ImageIcon("C:/Users/Clive/Documents/NetBeansProjects/KeyboardInput with DB/src/keyboardinputdb/littleAdventurer.gif");
    littleAdventurer = i.getImage();

    //Game Properties
    addKeyListener(new KeyboardInputDB.AL());
    setTitle("Java Game");
    setSize(600, 500);
    setResizable(false);
    setVisible(true);
    setBackground(Color.black);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    x = 150;
    y = 150;
    scoreCount = 0;
}

public void paint(Graphics g){
    dbImage = createImage(getWidth(), getHeight());
    dbg = dbImage.getGraphics();
    paintComponent(dbg);
    g.drawImage(dbImage, 0, 0, this);
}

public void paintComponent(Graphics g){
    g.setFont(font);
    g.setColor(Color.white);
    g.drawString("Score: " + scoreCount, 450, 70);

    if(faceLeft = true){
        g.drawImage(littleAdventurer, x, y, this);
    }
    else{
        g.setColor(Color.white);
        g.fillOval(x, y, 15, 15);
    }

    repaint();
}

public static void main(String[] args) {
    KeyboardInputDB javagame = new KeyboardInputDB();
}
} 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T17:28:58.907

首先，您的主要问题是您使用的是 jFrame 而不是 LWJGL。我建议您先更改为 LWJGL。您还使用了三个布尔变量来表示您的精灵所面向的方向。当 faceLeft 和 faceRight 都为真时会发生什么？您应该改用枚举。

我假设你是 Java 新手，所以我会给你一个关于枚举的小教程......

1st，将此添加到您声明变量的类的顶部：

```
public static enum Direction{
      UP, DOWN, LEFT, RIGHT
}
public static Direction direction = Direction.DOWN; 
```

您现在可以使用此代码检查枚举是否为某个值：

```
if(direction == Direction.LEFT){
    //Do something.
} 
```

您也可以通过调用简单地设置枚举：

```
direction = Direction.RIGHT; 
```

检查枚举值的更简单方法是使用 switch 语句：

```
switch(direction){
    case UP:
        //Do something when up.
        break;
    case DOWN:
        //Do something when down.
        break;
    case LEFT:
        //Do something when left.
        break;
    case RIGHT:
        //Do something when right.
        break;
} 
```

我可以向初学者描述枚举的这种最佳方式类似于布尔值（它的选项数量有限），但您可以根据需要设置任意数量的选项。

您当前的系统也没有使用 LWJGL，因此如果您想使用它，我建议您更改它。一旦你学会了如何使用 OpenGL，使用 LWJGL 制作游戏比使用 jFrame 更容易。

这个页面将证明是有用的： http://lwjgl.org/wiki/index.php?title= [Main_Page#Getting_started](http://lwjgl.org/wiki/index.php?title=Main_Page#Getting_started)

先制作四边形，然后您可以轻松学习如何添加精灵并使用 glRotatef() 旋转它

# c# - 当我使用 SqlDataSource 的 UpdateCommand 时，函数或过程指定了太多参数

> ID：16119135
> 
> 赞同：0
> 
> 时间：2013-04-20T10:14:26.943
> 
> 标签：c#, asp.net, sql-server, parameters, updatecommand

我正在使用启用编辑和更新的网格视图，并使用`UpdateCommand`in`SqlDataSource`更新数据。但是每当我尝试更新记录时，我都会遇到异常

> 函数或过程指定的参数过多

代码：

```
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class Manager_UnApprovedActivites : System.Web.UI.Page
{
   protected void Page_Load(object sender, EventArgs e)
   {
   }

   protected void GridView1_RowUpdating(object sender, GridViewUpdateEventArgs e)
   {
        string id = GridView1.DataKeys[e.RowIndex].Value.ToString();
        string Appproval =     ((CheckBox)GridView1.Rows[e.RowIndex].Cells[9].Controls[0]).Text;
        SqlDataSource1.UpdateParameters["id"].DefaultValue = id.ToString();
        SqlDataSource1.UpdateParameters["approval"].DefaultValue = Appproval.ToString();
        SqlDataSource1.Update();
    }
} 
```

ASP.NET：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="UnApprovedActivites.aspx.cs" Inherits="Manager_UnApprovedActivites" %>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
       <title></title>
   </head>
   <body>
       <form id="form1" runat="server">
       <div>
       </div>
       <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="AcitivityId" DataSourceID="SqlDataSource1" 
            Height="273px" Width="976px" AutoGenerateEditButton ="True">
          <Columns>
             <asp:BoundField DataField="AcitivityId" HeaderText="AcitivityId" InsertVisible="False" ReadOnly="True" SortExpression="AcitivityId" />
             <asp:BoundField DataField="ActiviityName" HeaderText="ActiviityName" SortExpression="ActiviityName" />
             <asp:BoundField DataField="ActivityLocation" HeaderText="ActivityLocation" SortExpression="ActivityLocation" />
             <asp:BoundField DataField="ActivityStartDate" HeaderText="ActivityStartDate" SortExpression="ActivityStartDate" />
             <asp:BoundField DataField="ActivityDueDate" HeaderText="ActivityDueDate" SortExpression="ActivityDueDate" />
             <asp:BoundField DataField="ActivityDescription" HeaderText="ActivityDescription" SortExpression="ActivityDescription" />
             <asp:BoundField DataField="ActvityTypeId" HeaderText="ActvityTypeId" SortExpression="ActvityTypeId" />
             <asp:BoundField DataField="BarchId" HeaderText="BarchId" SortExpression="BarchId" />
             <asp:CheckBoxField DataField="Approval(Authority)" HeaderText="Approval(Authority)" SortExpression="Approval(Authority)" />
             <asp:CheckBoxField DataField="ApprovalManager" HeaderText="ApprovalManager" SortExpression="ApprovalManager" />
             <asp:BoundField DataField="DateAdded" HeaderText="DateAdded" SortExpression="DateAdded" />
          </Columns>
       </asp:GridView>
       <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:WCA DatabaseConnectionString2 %>" 
            SelectCommand="SELECT * FROM [Activities]" 
            UpdateCommand="ApproveActivity" 
            UpdateCommandType="StoredProcedure">
            <UpdateParameters>
                   <asp:Parameter Name="id" Type="Int64" />
                   <asp:Parameter Name="approval" Type="Boolean" />
            </UpdateParameters>
        </asp:SqlDataSource>
     </form>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:21:20.913

在以下行中：

```
 string Appproval =     ((CheckBox)GridView1.Rows[e.RowIndex].Cells[9].Controls[0]).Text; 
```

返回 CheckBox Text 不是 checkBox 值，而是使用这个

```
CheckBox chb= ((CheckBox)GridView1.Rows[e.RowIndex].Cells[9].Controls[0]);             
if (chb != null)
            {
                SqlDataSource1.UpdateParameters["approval"].DefaultValue =chb.Checked;
            } 
```

# php - 在 php 问题中解析 html

> ID：16119145
> 
> 赞同：0
> 
> 时间：2013-04-20T10:15:09.520
> 
> 标签：php, html, tcpdf

我正在为 tcpdf 编写 html 代码。我在 mysql 中保存了带有 html 标签的描述。如何在 php 中读取它。例如：

```
$description = "Brand new!!! <br /><br /><br />Huge size";
$html = '<div>'. $description.'</div>';
$pdf->writeHTML($html, true, false, true, false, ''); 
```

它按原样显示描述。我需要实现html标签（来新行三遍）

我试过但没有运气

```
$description  = htmlspecialchars($rw['description_demo']); 
```

输出应该像

> 全新的！！！巨大的尺寸

当我使用`echo $html`它时也会给我同样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:35:53.730

如果它对您有帮助，而不是使用`<br>`下面的代码

```
$pdf->InsertText("Line one\n\nLine two"); 
```

或者如果你想删除 html 标签

```
$string = 'A string with <br/> & "double quotes".';
$string = str_replace(array('<br/>', '&', '"'), ' ', $string);
echo $string; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:41:47.740

我不确定当前版本的 TCPDF，但大多数 HTML 到 PDF 库都实现了自己的 HTML 解析器，而且它们经常无法识别相当常见的标签。特别是，我个人使用过不接受像`<br />`. 我建议你尝试使用`<br>`.

如果 HTML 代码是由第三方工具生成的，那么简单的方法`str_replace('<br />', '<br>', $html)`可能是快速而肮脏的修复。

**编辑：**显然，我们现在正在讨论替换*所有*不受支持的标签。这是一项重大任务。您需要使用 DOMDocument 或您选择的解析器——基于 HTML 的暴力破解操作迟早会触发无效结果。

另一种选择是切换到具有更好 HTML 支持的 PDF 工具，例如[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/)（您需要安装的命令行程序）或[mPDF](http://www.mpdf1.com/mpdf/index.php)（PHP 库）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:42:59.923

尝试将 <br /> 更改为 <br/>：

```
$description = "Brand new!!! <br /><br /><br />Huge size";
$html = '<div>.' $description'.</div>';
$pdf->writeHTML(str_replace('<br />', '<br/>', $html), true, false, true, false, ''); 
```

但请记住，tcpdf 对 html 标签的支持有限。

如果你想从 html 生成 pdf，我建议使用[wkhtmltopdf](https://code.google.com/p/wkhtmltopdf/) - 它使用 webkit 渲染引擎，所以你应该没有问题用你的描述生成 pdf。

# java - ViewExpiredException 由错误页面处理，仍在日志中

> ID：16119146
> 
> 赞同：7
> 
> 时间：2013-04-20T10:15:15.237
> 
> 标签：java, jsf, jsf-2, glassfish-3

JSF 应用程序可以`ViewExpiredException`在会话过期时抛出 s。当您的系统上有客人时，此事件将很常见。因此，应用程序将处理此事件而不会为客人带来任何麻烦，如下所示：

```
<error-page>
    <exception-type>javax.faces.application.ViewExpiredException</exception-type>
    <location>/expired</location>
</error-page> 
```

当访客尝试在过期会话上发送请求时，他将被重定向到`/expired`. 由于我不认为这`Exception`是一个值得一提的问题，我想防止将堆栈跟踪写入我的应用程序服务器的日志。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T18:00:50.933

基本上有 2 个选项，每个选项都归结为相同的解决方案：使用[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)或 JSF[异常处理程序](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html)自行捕获、抑制和导航到错误页面。这样异常就不会到达 servletcontainer，然后它会自动处理和记录它。

假设错误页面确实为您完成了工作（即这不适用于 JSF ajax 请求，除非您有自定义 JSF `ExceptionHandler`），那么映射到 URL 模式匹配 JSF 请求的 servlet 过滤器在其`doFilter()`方法中执行以下操作应该足够了：

```
try {
    chain.doFilter(request, response);
} catch (ServletException e) {
    if (e.getRootCause() instanceof ViewExpiredException) {
        request.getRequestDispatcher("/expired").forward(request, response);
    } else {
        throw e;
    }
} 
```

如果您还想涵盖 JSF ajax 请求，那么您不能绕过 JSF 异常处理程序。前往以下相关答案以查看一些具体示例：

*   [为什么使用 JSF ExceptionHandlerFactory 而不是 <error-page> 重定向？](https://stackoverflow.com/questions/10534187/why-use-a-jsf-exceptionhandlerfactory-instead-of-error-page-redirection)
*   [检查会话是否存在 JSF](https://stackoverflow.com/questions/8144195/check-if-session-exists-jsf/8144420#8144420)

# javascript - 使用jquery捕获事件和ajax回调

> ID：16119147
> 
> 赞同：0
> 
> 时间：2013-04-20T10:15:21.377
> 
> 标签：javascript, jquery, ajax

我正在尝试做一些简单的事情，捕获任何点击事件并将 url 发送到 php 脚本。

每次都会调用，如果我删除它，每20次点击一次就可以了，我想知道是不是因为`alert(a);`速度慢？`ajax.php``alert(a)`

```
$('a').click(function(){
    var a = $(this).attr('href');
    $.ajax({
        type: "POST",
        url: "/ajax.php",
        data: { b1: a , b2: "456" },

    });
    alert(a);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:17:48.153

如果单击 A，仍然有转到另一个页面的事件。所以这样做：

```
$('a').click(function(e){
    e.preventDefault();
    var a = $(this).attr('href');
    $.ajax({
        type: "POST",
        url: "/ajax.php",
        data: { b1: a , b2: "456" },
        success : function(){
            document.location = a;
        }
    });
}); 
```

# javascript - 只要某个方法完全执行完毕，就执行一个方法

> ID：16119148
> 
> 赞同：0
> 
> 时间：2013-04-20T10:15:27.900
> 
> 标签：javascript, jquery

我有一个定义如下的javascript方法：

```
updtCrtEdtPage = function() {PrimeFaces.ab({source:'j_id_ev',formId:'j_id_es',process:'typeNewLOB_in lobIdForEdit j_id_ev',update:'createLOBFullPagePanel',oncomplete:function(xhr,status,args){prepareForCrtEdtFullPage();},params:arguments[0]});} 
```

**每当此方法完成执行时**，我都想**执行某些方法（*afterComplete()*** ） 。（这个方法实际上发起了一个 ajax 请求并将接收到的 HTML 数据附加到 DOM 上）。所以我希望在收到 ajax 响应时执行我的*afterComplete()方法。*

我不能直接这样做：

```
updtCrtEdtPage();
afterComplete(); 
```

因为这将在 ajax 请求启动后不久调用 afterComplete() 并且尚未完全完成执行。

有什么 JS/jQuery 方法可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:23:02.480

`afterComplete`您可以作为参数传递，以便您的函数可以在 ajax 调用完成时调用它。像这样的东西...

```
updtCrtEdtPage = function(callback) {
    PrimeFaces.ab({
        source:'j_id_ev',
        formId:'j_id_es',
        process:'typeNewLOB_in lobIdForEdit j_id_ev',
        update:'createLOBFullPagePanel',
        oncomplete:function(xhr,status,args){
            prepareForCrtEdtFullPage();
            callback();
        },
        params:arguments[0]
    });
}

updtCrtEdtPage(afterComplete); 
```

既然你说你不能修改`updtCrtEdtPage`，但你可以修改`prepareForCrtEdtFullPage`我建议使用全局变量来确定方法完成时调用哪个回调函数......

```
updtCrtEdtPageCallback = afterComplete; 
```

然后`prepareForCrtEdtFullPage`只需添加最后一行...

```
updtCrtEdtPageCallback(); 
```

第一种方法更整洁，但第二种方法足以满足您的特定情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:23:32.720

您的 updtCrtEdtPage = function() 有一个 oncomplete 回调，在收到 ajax 响应时调用，在该回调中添加您的 afterComplete 函数，它将在 ajax 请求完成后执行。

```
 oncomplete:function(xhr,status,args){
   prepareForCrtEdtFullPage();
   afterComplete()
 } 
```

# assembly - ASM 浮点单元给出错误的数字

> ID：16119152
> 
> 赞同：-1
> 
> 时间：2013-04-20T10:15:41.783
> 
> 标签：assembly, floating-point, x86, x87

我正在使用浮点单元 ASM 制作一个更大的程序，但我得到了错误的数字。我做了一个简单的代码，它也给出了错误的数字。有人知道为什么吗？这里有什么问题？我正在使用 ubuntu 32b。

```
SYSEXIT = 1

.align 32
.data

a: .float 1
b: .float 2
test1: .float 0

.text
.global main

main:

finit 
fld a
fld b

loop:
fmulp
fstp test1

mov $SYSEXIT, %eax
int $0x80 
```

我正在使用gdb，在“打印a”之后它显示了巨大的数字而不是1，并且与其他2个变量（b，test1）相同。

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:26:57.153

您需要使用`print/f a`才能将数字解释和打印为浮点值而不是整数。

[参考](http://sourceware.org/gdb/onlinedocs/gdb/Output-Formats.html)。

# java - Java中实数的一个好的正则表达式是什么？

> ID：16119154
> 
> 赞同：3
> 
> 时间：2013-04-20T10:15:43.050
> 
> 标签：java, regex

Java中实数的一个好的正则表达式是什么？

我创建了正则表达式`([-]?[\\d]*\\.[\\d]*)`并针对以下预期输出对其进行了测试：

```
in                  out        works?
--------------------------------------
qwerty34.34abcd     34.34       yes
qwe-34.34.34abcd    -34.34      no
+17.-9abc           17.0        yes
-.abc0              0.0         no 
```

我必须得到确切的列（出）。请提供通过所有这些测试的正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:24:29.330

尝试以下操作：

```
((\+|-)?([0-9]+)(\.[0-9]+)?)|((\+|-)?\.?[0-9]+) 
```

这将匹配实数，包括整数，带或不带符号（以及带或不带小数点前的数字）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T11:16:16.223

正则表达式必须满足以下要求：

1.  可能有一个可选的标志。尝试`[+-]?`。
2.  可能有 0 个或多个可选数字。尝试`[0-9]*`。
3.  可能有小数点。尝试`[.]`避免反斜杠炎。
4.  小数点后可能有 0 位或更多位。试试`[0-9]*`。
5.  #2 和#4 中至少有一个具有数字。这将使用`[0-9]+`，并且可以使用交替。

这种模式是否有效：`[+-]?([0-9]*[.]?[0-9]+|[0-9]+[.]?[0-9]*)`？然而，我担心灾难性的回溯。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T11:09:46.723

下一个怎么样：

```
^-?(([1-9][0-9]*)|(0))(?:\.[0-9]+)?$ 
```

或下一个，如果你想允许“+”号：

```
^(-|\+)?(([1-9][0-9]*)|(0))(?:\.[0-9]+)?$ 
```

顺便说一句，[这是](http://gskinner.com/RegExr/)一个用于测试和共享正则表达式的好网站。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T11:02:38.767

```
^[+-]?(?:\d+\.?\d*|\d*\.\d+)$ 
```

*   `?` 用于制作`+`或`-`可选
*   `?:` 用于非捕获组
*   `\` 是一个转义字符

# django - Django：request.user 重定向后未设置

> ID：16119155
> 
> 赞同：7
> 
> 时间：2013-04-20T10:15:45.567
> 
> 标签：django, authentication

具体来说，经过身份验证和重定向后，request.user 是匿名用户。

登录（查看功能）

```
def login(request):
if request.method == 'POST':

    form = LoginForm(request.POST) 

    if form.is_valid():
        #django.contrib.auth.login
        Login(request, form.get_user())
        str = reverse('cm_base.views.index')
        return HttpResponseRedirect(str)
    else:
            # Their password / email combination must have been incorrect
        pass

else:
    form = LoginForm()

return render_to_response('cm_base/login.html', 
                          {"DEBUG": True,
                           'form' : form
                           },
                          context_instance=RequestContext(request)) 
```

在索引视图中，我删除了 login_required 装饰器并测试了 request.user 对象

```
def index(request):
test = request.user.is_authenticated()

return render_to_response('cm_base/index.html', 
                          {"DEBUG": True,
                           "user": request.user,},
                          context_instance=RequestContext(request)) 
```

测试返回假。

**使固定**

我最终只是直接调用索引视图。我仍然对调用 HttpResponseRedirect 时用户对象丢失的原因感到困惑。

```
def login(request):
if request.method == 'POST':
    form = LoginForm(request.POST) # Not shown in this example

    if form.is_valid():
        Login(request, form.get_user())
        str = reverse('cm_base.views.index')
        return index(request)
    else:
            # Their password / email combination must have been incorrect
        pass

else:
    form = LoginForm() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-23T15:28:56.653

这里发生了很多不应该发生的事情。首先，你不需要通过`request.user`，只要你使用它，它默认可用`RequestContext`，你就是。

`Login()`这个方法，它到底在做什么？Django 提供了一个[内置`login`方法](https://docs.djangoproject.com/en/1.5/topics/auth/default/#django.contrib.auth.login)，如果您使用的是默认身份验证后端，则应该使用该方法。

您也没有检查用户是启用还是禁用。

这是您的代码的不同版本，改编自[文档中的示例](https://docs.djangoproject.com/en/1.5/topics/auth/default/#django.contrib.auth.login)：

```
from django.shortcuts import render, redirect
from django.contrib.auth import authenticate, login

def login_view(request):
   form = LoginForm(request.POST or {})
   ctx = {'form': form}

   if form.is_valid():

      username = form.cleaned_data['username']
      password = form.cleaned_data['password']

      user = authenticate(username, password)

      if not user:
         ctx['errors'] = 'Invalid Login'
         return render(request, 'login.html', ctx)

      if not user.is_active:
         ctx['errors'] = 'User is locked'
         return render(request, 'login.html', ctx)

      login(request, user)
      return redirect('home')

   else:

      return render(request, 'login.html', ctx) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T15:06:56.487

您使用的是什么身份验证后端？如果它不是 ModelBackend ，请确保您的 get_user 方法是正确的。听起来好像 auth 中间件正在发送与您在 get_user 方法中查找的标识符不同的标识符（例如 pk 而不是用户名）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-08-23T14:57:43.287

这是修复

```
<link rel="icon" href="{{ STATIC_URL }}img/favicon.ico" /> 
```

静态目录中缺少此文件。结果 404 正在中断用户会话。

# ruby-on-rails - 无法覆盖设计路线

> ID：16119157
> 
> 赞同：2
> 
> 时间：2013-04-20T10:15:55.533
> 
> 标签：ruby-on-rails, ruby, devise, routes, rake

我正在使用设计，我想自定义它的网址：

```
users/sign_in --> account/login
users/sign_up --> account/register
users/edit    --> account/profile
... 
```

现在我的`routes.rb`样子是这样的：

```
 devise_scope :user do
    get '/account/login' => 'devise/sessions#new'
    post 'account/login' => 'devise/sessions#create', as: :user_session
    delete 'account/logout' => 'devise/sessions#destroy', as: :destroy_user_session

    post 'account/password' => 'devise/passwords#update', as: :user_password
    get 'account/password/forgot' => 'devise/passwords#new', as: :new_user_password
    get 'account/password/edit' => 'devise/passwords#edit', as: :edit_user_password
    put 'account/password' => 'devise/passwords#update'

    get 'account/cancel' => 'devise/registrations#cancel', as: :cancel_user_registration
    post 'account' => 'devise/registrations#create', as: :user_registration
    get 'account/register' => 'devise/registrations#new', as: :new_user_registration
    get 'account' => 'devise/registrations#edit', as: :edit_user_registration
    put 'account' => 'devise/registrations#edit'
    delete 'account' => 'devise/registrations#destroy'
  end
  devise_for :users 
```

我设法不覆盖`profile, forgot, register`错误`login`：

因此，当我单击通用设计登录表单中的“注册”链接时，我在浏览器中被重定向到**，**`/register`但是当我单击**“登录”**链接时，我仍然被重定向到`/users/sign_in`而不是`login`.

我尝试了路线，但没有`match`运气`post + get`。我知道如果我自己生成表格，我可以决定链接的外观，但我更喜欢使用通用设计表格，而且我很好奇为什么其他路线有效。

运行`rake routes`会产生这个（我的路线中的前五行）：

```
 new_user_session GET    /account/login(.:format)           devise/sessions#new
            user_session POST   /account/login(.:format)           devise/sessions#create
    destroy_user_session DELETE /account/logout(.:format)          devise/sessions#destroy
           user_password POST   /account/password(.:format)        devise/passwords#update
       new_user_password GET    /account/password/forgot(.:format) devise/passwords#new
      edit_user_password GET    /account/password/edit(.:format)   devise/passwords#edit
        account_password PUT    /account/password(.:format)        devise/passwords#update
cancel_user_registration GET    /account/cancel(.:format)          devise/registrations#cancel
       user_registration POST   /account(.:format)                 devise/registrations#create
   new_user_registration GET    /account/register(.:format)        devise/registrations#new
  edit_user_registration GET    /account(.:format)                 devise/registrations#edit
                 account PUT    /account(.:format)                 devise/registrations#edit
                         DELETE /account(.:format)                 devise/registrations#destroy
        new_user_session GET    /users/sign_in(.:format)           devise/sessions#new
                         POST   /users/sign_in(.:format)           devise/sessions#create
    destroy_user_session DELETE /users/sign_out(.:format)          devise/sessions#destroy
                         POST   /users/password(.:format)          devise/passwords#create
                         GET    /users/password/new(.:format)      devise/passwords#new
                         GET    /users/password/edit(.:format)     devise/passwords#edit
                         PUT    /users/password(.:format)          devise/passwords#update
                         GET    /users/cancel(.:format)            devise/registrations#cancel
                         POST   /users(.:format)                   devise/registrations#create
                         GET    /users/sign_up(.:format)           devise/registrations#new
                         GET    /users/edit(.:format)              devise/registrations#edit
                         PUT    /users(.:format)                   devise/registrations#update
                         DELETE /users(.:format)                   devise/registrations#destroy
                root        /                                  posts#show 
```

**更新**：我现在正在模仿设计的所有路线（请参阅更新的 routes.rb）。但我仍然被重定向到`/users/sign_in`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T10:21:24.497

你可以试试这个，这很有效

查看更多帮助[设计 wiki](https://github.com/plataformatec/devise/wiki/How-To%3a-Change-the-default-sign_in-and-sign_out-routes)

```
 devise_for :users, :path => '', :path_names => {:sign_in => 'login', :sign_out => 'logout'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T13:40:04.183

这应该有效。还要删除 /account 并将路径帐户添加到您的路由文件中，就像我在下面所做的那样。

```
 devise_scope :user, path: "account" do
    get "login", :to => "devise/sessions#new", :as => "login"
    get "signup" => "users/registrations#new", :as => "register"
    get "edit" => "edit_user_registration", :as => "edit"
  end 
```

# android - 如何在目的地和来源之间将谷歌地图的行车路线居中

> ID：16119162
> 
> 赞同：2
> 
> 时间：2013-04-20T10:16:23.850
> 
> 标签：android, google-maps, android-activity, driving-directions

我正在使用 google maps URL 命令使用以下命令绘制从源到目的地的行车路线：

```
 String geoUriString = "http://maps.google.com/maps?" + 
           "saddr=" + latitude + "," +  longitude + "&daddr=" + destLAT+ "," + destLONG; 
```

然后

```
Intent mapCall = new Intent(Intent.ACTION_VIEW, Uri.parse(geoUriString));
startActivity(mapCall); 
```

这将打开一个选项列表，当我选择谷歌地图时，它会显示从源头到目的地的行车路线。

我有这个问题：

*   如何缩小地图以适应从源到目的地的绘制路径？（因为现在放大太多，所以没有一次显示完整路径）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-12T10:42:27.457

```
var mapOptions = {
        zoom: 4,
        center: new google.maps.LatLng(18.49866955, 73.8957357166667),
        mapTypeId: google.maps.MapTypeId.ROADMAP
      };
      var map = new google.maps.Map(document.getElementById('map_canvas'),
          mapOptions); 
```

# c++ - 如何在IOS上写入数据TINYXML2

> ID：16119163
> 
> 赞同：0
> 
> 时间：2013-04-20T10:16:24.177
> 
> 标签：c++, xml, tinyxml

我的 test.xml 是这样的：

```
<?xml version="1.0"?>
<!DOCTYPE PLAY SYSTEM "play.dtd">            
<data>
    <CurrentLevel>5</CurrentLevel>
    <BestScoreLV1>1</BestScoreLV1>
    <BestScoreLV2>2</BestScoreLV2>
</data>
<dict/> 
```

我的代码在这里：

```
std::string fullPath = CCFileUtils::sharedFileUtils()->fullPathFromRelativePath("text.xml");
tinyxml2::XMLDocument doc;

doc.LoadFile(fullPath.c_str());

tinyxml2::XMLElement* ele =  doc.FirstChildElement("data")->FirstChildElement("BestScoreLV2")->ToElement();
ele->SetAttribute("value", 10);
doc.SaveFile(fullPath.c_str());

const char* title1 =  doc.FirstChildElement("data")->FirstChildElement("BestScoreLV2")->GetText();
int level1  = atoi(title1);
CCLOG("result is: %d",level1); 
```

但是输出时 BestScoreLV2 的值也是 2。如何将数据更改和写入 XML？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:55:59.937

在 TinyXML2 中，文本由`XMLText`类的子`XMLNode`类表示。 `XMLNode`具有方法`Value()`，并且`SetValue()`对于不同的 XML 节点具有不同的含义。对于文本节点`Value()`，读取节点的文本并`SetValue()`写入。所以你需要这样的代码：

```
tinyxml2::XMLNode* value = doc.FirstChildElement("data")->
    FirstChildElement("BestScoreLV2")->FirstChild();
value->SetValue("10"); 
```

element的第一个子`BestScoreLV2`元素是`XMLText`value `2`。`10`您可以通过调用将此值更改为`SetValue(10)`。

# java - 无法在 Java Web 启动应用程序中设置日志级别？

> ID：16119164
> 
> 赞同：0
> 
> 时间：2013-04-20T10:16:29.750
> 
> 标签：java, jakarta-ee, logging, java-web-start, java.util.logging

## 某些日志记录级别似乎已损坏？

我直接从 GlassFish 3.1.2.2 实例运行 Java web start（我将从现在开始调用**JWS ）应用程序。**客户端有一个像这样的静态记录器：

```
private final static Logger LOGGER;
static {
    LOGGER = Logger.getLogger(App.class.getName());
    // Not sure how one externalize this setting or even if we want to:
    LOGGER.setLevel(Level.FINER);
} 
```

在 main 方法中，我从对日志记录功能的一些简单测试开始我的逻辑：

```
alert("isLoggable() INFO? " + LOGGER.isLoggable(Level.INFO));     // Prints TRUE!
alert("isLoggable() FINE? " + LOGGER.isLoggable(Level.FINE));     // ..TRUE
alert("isLoggable() FINER? " + LOGGER.isLoggable(Level.FINER));   // ..TRUE
alert("isLoggable() FINEST? " + LOGGER.isLoggable(Level.FINEST)); // ..FALSE 
```

我的警报方法将显示`JOptionPane`“真正的 GUI 日志记录”对话框。无论如何，您会在我添加到代码片段的评论中看到打印输出。正如预期的那样，记录器启用了级别*INFO*、*FINE*和*FINER*但不是*FINEST*。

在我的警报方法之后，我输入：

```
// Info
LOGGER.info("Level.INFO");
LOGGER.log(Level.INFO, "Level.INFO");

// Fine
LOGGER.fine("Level.FINE");
LOGGER.log(Level.FINE, "Level.FINE");

// Finer
LOGGER.finer("Level.FINER");
LOGGER.log(Level.FINER, "Level.FINER");
LOGGER.entering("", "Level.FINER", args); // <-- Uses Level.FINER!

// Finest
LOGGER.finest("Level.FINEST");
LOGGER.log(Level.FINEST, "Level.FINEST"); 
```

我转到我的 Java 控制台并单击“高级”选项卡，然后勾选“启用日志记录”。好的，让我们启动应用程序。猜猜会发生什么？**只有 Level.INFO 打印！**这是我的证明（看底部）：

![在此处输入图像描述](https://i.stack.imgur.com/JmyHA.png)

我已经尽力在我的计算机上搜索日志文件，看看 Level.FINE 和 Level.FINER 是否最终出现在文件系统的某个位置。但是，我无法在任何地方找到日志消息。

## 问题总结

1.  为什么在提供的示例中似乎记录`Level.FINE`和`Level.FINER`不起作用？

2.  我在我的静态初始化块中设置了日志记录级别，但我肯定想将此设置外部化为某种配置文件，可能与我在 GlassFish 上部署的 EAR 文件一起打包。或者为什么不在我们从服务器下载的 JNLP 文件中手动写入一些属性。这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:36:30.617

## 问题 1 的解决方案。

在对该主题进行了更多阅读之后，我得出结论，Java 中的记录器使用处理程序来发布他的日志。轮到这个处理程序有他自己的一套“墙”来处理他处理的级别。但是这个处理程序不需要直接附加到我们的记录器上！您会看到伐木工是`organized in a hierarchical namespace`和一个孩子伐木`may inherit`他父母的处理程序。如果是这样，那么`By default a Logger will log any output messages to its parent's handlers, and so on recursively up the tree`（请参阅[Java 日志记录概述 - Oracle](http://docs.oracle.com/javase/7/docs/technotes/guides/logging/overview.html)）。

我并不是说我现在已经了解了全部情况，而且我肯定没有找到任何关于这一切与 Java Web Start 应用程序的关系的引用。肯定有一些差异。无论如何，我确实设法一起编写了这个静态初始化块来解决我的直接问题：

```
static {
    LOGGER = Logger.getLogger(App.class.getName());
    /*
     * This logic can be externalized. See the next solution!
     */
    // DEPRECATED: LOGGER.setLevel(Level.FINER);
    if (LOGGER.getUseParentHandlers())
        LOGGER.getParent().getHandlers()[0].setLevel(Level.FINER);
    else
        LOGGER.setLevel(Level.FINER);
} 
```

## 问题 2 的解决方案。

[LogManager API 文档](http://docs.oracle.com/javase/7/docs/api/java/util/logging/LogManager.html)为以下解决方案提供了非常需要的信息。在您的 JRE 安装的子目录中，有一个名为“lib”的子目录，您将在其中找到一个“logging.properties”文件。这是我的文件在我的 Windows 机器上的完整路径：

`C:\Program Files (x86)\Java\jre7\lib\logging.properties`

在这里你可以改变很多口味。您可以做的一件很酷的事情是更改全局日志记录级别。在我的文件中，这是在*第 29 行*完成的（为什么我们在“级别”前面只看到一个点？所有记录器的根父级都称为“”！）。这将产生大量的输出；在我的机器上，我每秒收到大约一千条日志消息。因此，改变全球水平甚至不足以被视为一种选择。相反，在您指定记录器级别的位置添加一个新行。就我而言，我添加了这一行：

`martinandersson.com.malivechat.app.App.level = FINER`

但是，您可能仍然看不到任何结果。在解决方案 1 中，我谈到了记录器如何连接到处理程序。默认处理程序在*logging.properties*中指定，很可能在*第 18 行*。这是我的行的内容：

`handlers= java.util.logging.ConsoleHandler`

同样在之前，我谈到了这些处理程序如何依次使用级别来解决应该困扰他们的问题。所以，找到这样的行（现在应该在*第 44 行*？）：

`java.util.logging.ConsoleHandler.level = INFO`

..就我而言，我将“INFO”换成了“FINER”。问题解决了。

## 但！

我对此事的最初调查仍未提供答案，如何将这些属性设置得更接近应用程序部署。更具体地说，我想将这些属性附加到一个单独的文件中，与我在 GlassFish 或类似文件上部署的应用程序 EAR 文件捆绑在一起。你有更多信息吗？请分享！

# visual-studio-2010 - 在gridview的最后一行添加文本框

> ID：16119166
> 
> 赞同：0
> 
> 时间：2013-04-20T10:16:43.003
> 
> 标签：visual-studio-2010, c#-4.0, gridview, datagrid

我正在使用 C# 开发 Windows 窗体应用程序。我的表单上有一个网格视图，其中包含 5 列，分别代表 Sr No、项目名称、项目价格、项目数量和项目数量。我想在我的gridview的最后一行有一组五个文本框，这样我就可以在那里输入我需要的值，然后在输入最后一个值时，包含所有五个项目的整行应该被添加到gridview并再次最后一行应该包含新条目的那组文本框。我怎样才能做到这一点？

也可以在gridview本身中输入条目吗？我需要从数据库中获取条目，用户完成后，gridview 条目将再次存储在数据库中。

请注意，我的应用程序是 WPF，但为方便起见，我仅在此窗口中使用了 Windows 窗体。

# c# - 为什么当 C# 完全知道它没有结构类型时，它会取笑它？

> ID：16119168
> 
> 赞同：2
> 
> 时间：2013-04-20T10:16:57.087
> 
> 标签：c#, interface, casting, structural-typing, explicit-conversion

今天我很惊讶地看到这是可能的，但我担心这必须事先讨论。

```
public interface ICanAdd
{
    int Add(int x, int y);
}

// Note that MyAdder does NOT implement ICanAdd, 
// but it does define an Add method like the one in ICanAdd:
public class MyAdder
{
    public int Add(int x, int y)
    {
        return x + y;
    }
}

public class Program
{
    void Main()
    {
        var myAdder = new MyAdder();
        var iCanAdd = (ICanAdd)myAdder; //compiles, but for what sake?
        int sum = iCanAdd.Add(2, 2); //na, not game for it, cast had already failed
    }
} 
```

编译器会（对吗？）告诉我在上述情况下存在显式转换。我很高兴能感觉到那里的结构打字，但没有运行时间它失败。那么 C# 什么时候在这里有用呢？这种铸造的任何场景都行得通吗？不管是什么，我确信编译器事先知道`myAdder`不是`ICanAdd`，从技术上讲。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T11:04:46.320

C# 允许从类到接口的显式转换（即使该类没有实现该接口），因为就编译器所知，实际上可能对某个类型的引用（不确定性是为什么它是显式而不是隐式转换）*是*实现接口的派生类型的实例。扩展您的示例，假设您有：

```
public class DerivedAdder : MyAdder, ICanAdd
{
  int ICanAdd.Add(int x, int y)
  {
    return base.Add(x, y);
  }
}

...

MyAdder myAdder = new DerivedAdder();
var iCanAdd = (ICanAdd)myAdder; // Valid in this case
int sum = iCanAdd.Add(2, 2);    // sum = 4 
```

如果您查看[C# Specification](http://download.microsoft.com/download/3/8/8/388e7205-bc10-4226-b2a8-75351c669b09/CSharp%20Language%20Specification.doc)的第 6.2.4 节，您会发现如果将您的`MyAdder`类标记为`sealed`，编译器实际上会抱怨，因为它会确定无法进行转换，因为不存在派生类型。但只要它不能消除最后一丝怀疑，它就会允许显式转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:51:37.957

[C# 语言规范](http://msdn.microsoft.com/en-us/library/aa691291%28v=vs.71%29.aspx)允许将类转换为接口。但是例如，如果 ICanAdd 是一个类 - 编译将失败

# python - 从文件管理器打开多个文件

> ID：16119175
> 
> 赞同：2
> 
> 时间：2013-04-20T10:17:41.180
> 
> 标签：python, linux, pyqt4, file-manager

我已经构建了一个（Linux）GUI 应用程序，它可以从终端启动并接受未定义数量的文件作为参数。该应用程序读取 sys.argv 并在 QListWidget 中列出这些文件的名称。

代码类似于：

```
import sys
from PyQt4.QtGui import QApplication, QMainWindow, QCoreApplication

class MainWindow(QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)

        # parse command line arguments
        for i in QCoreApplication.argv()[1:]:
            ...

def main():
    app = QApplication(sys.argv)
    ... 
```

我想要做的是能够从文件管理器中选择多个文件，并通过文件管理器提供的“打开方式...”选项使用我的应用程序打开它们。如何做到这一点？

使用当前代码，当我尝试它时，QListWidget 上只会显示一个选定的文件。

编辑：

最后似乎它取决于文件管理器。我尝试了一些文件管理器，然后...

*   pcmanfm：它只打开一个选定的文件。

*   spacefm：工作正常！

*   dolphin：它将每个文件打开到我程序的不同实例。如果我选择 3 个文件，它将打开我的应用程序 3 次，每个文件一个。

*   nautilus：我没能用它打开任何文件。我的程序未在建议的应用程序中列出，我也没有找到任何方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:53:38.320

确实没有足够的信息来给出明确的答案，但是...

首先，您是否检查`print sys.argv`了代码顶部的 a 是否与您期望的一样？

如果是这样，如果你改变线路是否有效......

```
for i in QCoreApplication.argv()[1:]: 
```

...至...

```
for i in sys.argv[1:]: 
```

出于调试目的，您可能还希望包含以下行...

```
assert QCoreApplication.argv()[1:] == sys.argv[1:] 
```

...就在您开始 for 循环之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:37:36.123

使用 QFileDialog：[文档](http://pyqt.sourceforge.net/Docs/PyQt4/qfiledialog.html)

# c# - 仅发布配置中 CA1801 的误报

> ID：16119178
> 
> 赞同：1
> 
> 时间：2013-04-20T10:18:01.390
> 
> 标签：c#, code-analysis

我的方法如下。

```
public static void Debug(this Logger logger, string message)
{
    logger.Debug(() => message);
} 
```

当我使用 Debug config 运行代码分析时，我没有收到任何警告。

当我使用 Release 配置运行代码分析时，我得到：

> CA1801 查看未使用的参数“CommonExtensions.Debug(this Logger, string)”的参数“message”从未使用过。删除参数或在方法体中使用它。FakeItEasy CommonExtensions.cs 101

和

> CA1801 查看未使用的参数“CommonExtensions.Debug(this Logger, string)”的参数“logger”从未使用过。删除参数或在方法体中使用它。FakeItEasy CommonExtensions.cs 101

这显然是错误的。我在方法体中使用了这两个参数。如果我删除任何一个参数，则代码不会编译。

有没有其他人经历过类似的事情？我是否发现了代码分析中的错误？

（我在两种配置下都使用相同的规则集。）

* * *

更新

`Logger.Debug()`签名如下：

```
[Conditional("DEBUG")]
public abstract void Debug(Func<string> message); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:36:55.420

根据 Q 更新，设置`Logger.Debug()`了`Conditional`属性，这就是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T14:37:05.597

`"CODE_ANALYSIS"`您可以通过添加条件属性来修复它：

```
[Conditional("DEBUG")]
[Conditional("CODE_ANALYSIS")]
public abstract void Debug(Func<string> message); 
```

（我遇到了[同样的问题](https://stackoverflow.com/q/31944141/814206)并找到[了解决方案](https://stackoverflow.com/a/31944511/814206)。）

# vim - 如何更改重音字符的 vim 映射

> ID：16119181
> 
> 赞同：3
> 
> 时间：2013-04-20T10:18:24.257
> 
> 标签：vim, mapping, key-bindings

我正在尝试更改（法语）重音字符的 vim 映射。

`à`(ASCII 133) 我希望它是`Alt`+ `a`
`À`(ASCII 183) 我希望它是`Alt`+ `Shift`+ `a`
`é`(ASCII 130) 我希望它是`Alt`+ `e`
`É`(ASCII 144) 我希望它是`Alt`+ `Shift`+`e`

我很乐意重新映射现有的地图`Alt`+ `i`==> `é`（为什么？）
我怎样才能让这些映射工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T11:05:10.463

映射适用于这些字符，问题是关于 alt 键，当终端用 ESC 字符作为字符前缀时，它可能不起作用。键入`:help map-alt-keys`以获取更多信息。

我刚刚在 xterm 中尝试过，并且这些映射有效：

```
:imap <A-a> à
:imap <A-A> À
:imap <A-e> é
:imap <A-E> É 
```

而且，要将默认映射更改为另一个，请使用“remap”而不是 map ：

```
:iremap <A-i> whatever 
```

编辑：另见[Alt 快捷键在 Vim 的 gnome 终端上不起作用](https://stackoverflow.com/questions/6778961/alt-key-shortcuts-not-working-on-gnome-terminal-with-vim)

# haskell - 惰性二进制获取

> ID：16119184
> 
> 赞同：6
> 
> 时间：2013-04-20T10:18:40.237
> 
> 标签：haskell, binary, lazy-evaluation

为什么[Data.Binary.Get](http://hackage.haskell.org/packages/archive/binary/0.7.0.1/doc/html/Data-Binary-Get.html)不像它说的那样懒惰？还是我在这里做错了什么？

```
import Data.ByteString.Lazy (pack)
import Data.Binary.Get (runGet, isEmpty, getWord8)

getWords = do
  empty <- isEmpty
  if empty
    then return []
    else do
      w <- getWord8
      ws <- getWords
      return $ w:ws

main = print $ take 10 $ runGet getWords $ pack $ repeat 1 
```

这个主要功能只是挂起而不是打印 10 个单词。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:21:04.900

您链接的文档提供了几个示例。第一个需要在返回之前读取所有输入，并且看起来很像您编写的内容。第二个是左折叠并以流方式处理输入。这是用这种风格重写的代码：

```
module Main where

import Data.Word (Word8)
import qualified Data.ByteString.Lazy as BL
import Data.Binary.Get (runGetState, getWord8)

getWords :: BL.ByteString -> [Word8]
getWords input
   | BL.null input = []
   | otherwise =
      let (w, rest, _) = runGetState getWord8 input 0
      in w : getWords rest

main :: IO ()
main = print . take 10 . getWords . BL.pack . repeat $ 1 
```

测试：

```
*Main> :main
[1,1,1,1,1,1,1,1,1,1] 
```

# css - @font-face 中的逗号会刺激 Firefox

> ID：16119187
> 
> 赞同：0
> 
> 时间：2013-04-20T10:19:12.660
> 
> 标签：css, firefox, font-face, webfonts

我想通过使用以下@font-face 规则来使用字体：

```
@font-face {
  font-family: 'Web Symbols';
  font-style: normal;
  font-weight: 400;
  src: local('Web Symbols'), local('WebSymbols'), url(http://localhost/Blog/webfonts/WebSymbols-Regular.otf) format('opentype');
} 
```

但这不起作用，FF没有使用正确的字体，虽然它知道：![萤火虫截图](https://i.stack.imgur.com/TJ2u7.png)

但有趣的是，当我从`src`-rule 中删除 1(!) 逗号时，无论两个逗号中的哪一个，它都会使用字体。这是 Firefox 中的错误还是我做错了什么？我还将我的与[谷歌](http://fonts.googleapis.com/css?family=Open%20Sans:400)`font-face`提供的一些进行了比较，但没有发现任何差异。

# android - LocalStorage 在 Phonegap 中不持久

> ID：16119194
> 
> 赞同：10
> 
> 时间：2013-04-20T10:19:45.853
> 
> 标签：android, cordova, local-storage

我想使用 localStorage 将数据保存在用户的移动设备上。我的应用程序是用 phonegap 构建的。

```
function check_connection()
{
    var id = window.localStorage.getItem("id");
    if(id != null)
        // some code
    console.log(id);
} 
```

当我在之后执行此代码时`window.localStorage.setItem("id", "value");`，我得到“值”，但如果我退出应用程序并再次运行它，我得到“null”。

```
document.addEventListener("deviceready", main, true);
function main()
{
    check_connection();
} 
```

出口似乎清除了 localStorage 对象。

任何想法 ？

编辑：当我通过按返回按钮退出应用程序时，数据是持久的，但是当我从最近的应用程序中终止应用程序时，数据被清除。问题是什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:02:23.490

你打电话给某个地方 window.localStorage.clear(); 吗？

# sequence - wso2 : ESB 故障序列

> ID：16119195
> 
> 赞同：3
> 
> 时间：2013-04-20T10:19:46.877
> 
> 标签：sequence, wso2esb, fault

**如何在esb中使用代理的故障序列**

我想在 EndPoint 发生故障时使用故障序列。例如，我使用 jconsole 停止 service1，并希望在调用代理服务时将消息路由到 service2。但是当我使用soapui调用代理时，它显示错误消息：*系统正在尝试访问非活动服务..*

```
<target>
  <inSequence >
     <send>
        <endpoint name="cal" >     
         <address uri="http://localhost:9763/services/service1/"/>   
        </endpoint>
     </send>
  </inSequence>
  <faultSequence>
     <log level="custom">
        <property name="text" value="An unexpected error occured for service"/>
        <property name="message" expression="get-property('ERROR_MESSAGE')"/>
    </log>
     <send>
        <endpoint>
           <address uri="http://localhost:9763/services/service2/"/>
        </endpoint>
     </send>
  </faultSequence> 
```

请指导我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T03:21:46.457

当您的端点 1 处于非活动状态时，它会返回一个肥皂故障，并且您希望它进入故障序列。但目前该故障序列被视为响应并将其发送到客户端（soap ui）。

从 WSO2 ESB 4.5.0 开始，添加了一个新属性 FORCE_ERROR_ON_SOAP_FAULT。通过设置此属性，soap 故障将被定向到故障序列。当您处于故障序列中时（例如调用另一个序列），您可以执行下一个逻辑。

有关示例代理服务，请参阅 [1]。

[1] [http://maharachchi.blogspot.com/2012/09/now-you-can-send-soapfaults-to-fault.html](http://maharachchi.blogspot.com/2012/09/now-you-can-send-soapfaults-to-fault.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:02:46.730

我相信您的确切情况是您的主要端点的一部分，如果它失败了，您需要将消息路由到辅助端点。

正确的实现方法是不使用故障序列正确的方法是使用故障转移端点。您可以在 [1][2] 找到参考文档。

对于示例，您可以参考“示例 53：在 3 个端点之间发送故障转移”[3]。

[1]。[http://wso2.org/project/esb/java/3.0.1/docs/endpoint_guide.html#FoEp](http://wso2.org/project/esb/java/3.0.1/docs/endpoint_guide.html#FoEp) [2]。[http://docs.wso2.org/wiki/display/ESB403/Failover+Endpoint](http://docs.wso2.org/wiki/display/ESB403/Failover+Endpoint) [3]。[http://wso2.org/project/esb/java/3.0.1/docs/samples/endpoint_mediation_samples.html](http://wso2.org/project/esb/java/3.0.1/docs/samples/endpoint_mediation_samples.html)

谢谢你，达沙那。

# ruby-on-rails - 从 gitignore 恢复 Gemfile.lock

> ID：16119196
> 
> 赞同：1
> 
> 时间：2013-04-20T10:19:51.520
> 
> 标签：ruby-on-rails, ruby, git, gemfile

在我的 Rails 应用程序中，通过 .gitignore 进行的跟踪忽略了 Gemfile.lock

但我希望文件被提交和跟踪。

我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:32:36.747

首先从 .gitignore 中删除 Gemfile.lock 的条目，添加 .gitignore 并提交。然后添加并提交 Gemfile.lock。只要这些在两个单独的提交中完成，其他团队成员也将能够跟踪 Gemfile.lock 文件。

# wpf - WPF绑定到xaml中的多维数组

> ID：16119200
> 
> 赞同：9
> 
> 时间：2013-04-20T10:20:24.960
> 
> 标签：wpf, data-binding, binding

我很难制定 XAML 字符串以链接到多维数组中的特定元素。

DataContext 包含以下几行：

```
 private String[] _OneDimension = { "[0]", "[1]" };
    private String[][] _Jagged = { new String[] { "[0,0]", "[0,1]" }, new String[] { "[1,0]", "[1,1]" } };
    private String[,] _TwoDimension = { { "[0,0]", "[0,1]" }, { "[1,0]", "[1,1]" } };

    public String[] OneDimension { get { return _OneDimension; } }
    public String[][] Jagged { get { return _Jagged; } }
    public String[,] TwoDimension { get { return _TwoDimension; } } 
```

XAML 包含以下行：

```
 <StackPanel>
        <Button Content="{Binding OneDimension[1]}" Width="100" Height="50" />
        <Button Content="{Binding Jagged[1][1]}" Width="100" Height="50" />
        <Button Content="{Binding TwoDimension[1][1]}" Width="100" Height="50" />
    </StackPanel> 
```

绑定`OneDimension`并按`Jagged`预期工作。绑定`TwoDimension`不起作用并且似乎是错误的，但是 XAML 不允许我使用分隔符`,`，所以我不知道如何绑定到二维数组。

这：

```
 <Button Content="{Binding TwoDimension[1,1]}" Width="100" Height="50" /> 
```

无法编译，因为 XAML 被解释为具有绑定构造函数的两个参数。有什么方法可以逃避解析器，还是有另一种我不知道的写法？

* * *

编辑：

我刚刚发现可以像这样逃避分隔符

```
<Button Content="{Binding TwoDimension[1\,1]}" Width="100" Height="50" /> 
```

或者只是用这样的标记包围论点

```
<Button Content="{Binding 'TwoDimension[1,1]'}" Width="100" Height="50" /> 
```

然而，这一行现在导致了一个例外：`System.ArgumentException`{“Das Array war kein eindimensionales Array.”} 不幸的是，C# 以我的母语安装了自己 - 令人讨厌......所以这大致翻译为 {“The Array is not a onedimensionale Array. "}

绑定多维数组实际上是不可能的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-02-05T10:44:55.790

您可以使用如下定义的 MultivalueConverter 绑定到二维数组：

```
 class MultiDimensionalCoverter:IMultiValueConverter
{
    public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
    {
        return (values[0] as String[,])[(int) values[1], (int) values[2]];  
    }

    public object[] ConvertBack(object value, Type[] targetTypes, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

MultiDimensionalCoverter 得到 3 个参数，二维数组加上两个索引，Xaml 将是这样的：

```
<Window.Resources>
        <wpfApp:MultiDimensionalCoverter x:Key="MultiDimensionalCoverter"/>
    </Window.Resources>
    <Grid>
        <StackPanel>
            <Button Content="{Binding OneDimension[1]}" Width="100" Height="50" />
            <Button Content="{Binding Jagged[1][1]}" Width="100" Height="50" />
            <Button Width="100" Height="50" >
                <Button.Resources>
                    <system:Int32 x:Key="1">1</system:Int32>
                </Button.Resources>
                <Button.Content>
                    <MultiBinding Converter="{StaticResource MultiDimensionalCoverter}">
                        <Binding Path="TwoDimension"/>
                        <Binding Source="{StaticResource 1}"/>
                        <Binding Source="{StaticResource 1}"/>
                    </MultiBinding>
                </Button.Content>
            </Button>
        </StackPanel>
    </Grid> 
```

将索引定义为 VM 中的属性可能更合适，我仅使用固定值进行演示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-05T00:56:00.313

默认情况下，WPF XAML 不允许绑定到这样的二维数组。只有一维数组。然而，没有什么是不可能的。只是费时。您必须创建一个自定义类才能执行此操作并将其用作绑定方式。

```
/// <summary>
/// This class is a bindable encapsulation of a 2D array.
/// </summary>
/// <typeparam name="T"></typeparam>
public class BindableTwoDArray<T> : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;
    private void Notify(string property)
    {
        var pc = PropertyChanged;
        if (pc != null)
            pc(this, new PropertyChangedEventArgs(property));
    }

    T[,] data;

    public T this[int c1, int c2]
    {
        get { return data[c1, c2]; }
        set
        {
            data[c1, c2] = value;
            Notify(Binding.IndexerName);
        }
    }

    public string GetStringIndex(int c1, int c2)
    {
        return c1.ToString() + "-" + c2.ToString();
    }

    private void SplitIndex(string index, out int c1, out int c2)
    {
        var parts = index.Split('-');
        if (parts.Length != 2)
            throw new ArgumentException("The provided index is not valid");

        c1 = int.Parse(parts[0]);
        c2 = int.Parse(parts[1]);
    }

    public T this[string index]
    {
        get
        {
            int c1, c2;
            SplitIndex(index, out c1, out c2);
            return data[c1, c2]; 
        }
        set
        {
            int c1, c2;
            SplitIndex(index, out c1, out c2);
            data[c1, c2] = value;
            Notify(Binding.IndexerName);
        }
    }

    public BindableTwoDArray(int size1, int size2)
    {
        data = new T[size1, size2];
    }

    public static implicit operator T[,](BindableTwoDArray<T> a)
    {
        return a.data;
    }
} 
```

然后您可以绑定到 XAML：

```
<TextBlock Text="{Binding MyBindableTwoDArray[2-5]}"/> 
```

[解决方案的来源](https://nicoschertler.wordpress.com/2014/05/22/binding-to-a-2d-array-in-wpf/)。

这可能会影响性能，这导致我开始质疑使用多维数组？您可以使用可能更容易实现的列表。看看[这个解决方案](https://stackoverflow.com/questions/276808/how-to-populate-a-wpf-grid-based-on-a-2-dimensional-array)。

# git - Git：在一个视图中查看多个分支

> ID：16119201
> 
> 赞同：1
> 
> 时间：2013-04-20T10:20:30.650
> 
> 标签：git, git-branch

有什么方法可以在一个视图中查看 Git 中许多分支的更改。例如，如果我的项目由脚本部分和 C 代码部分组成，我可以将它们放在两个单独的分支上，但仍然可以在一个视图中看到所有更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:26:08.173

要创建这样的“视图”，只需创建第三个分支并*合并*您关心的分支：

```
git checkout -b view branch1
git merge branch2
# now 'view' sees contents of both branches 
```

`view`只会在创建时显示分支内容。要更新视图，只需添加新的合并内容：

```
git checkout view           # switch to the view
git merge branch1 branch2   # ...and merge the new branch contents 
```

如果分支中的文件名不相交，则合并不应有冲突。如果公共文件（例如`README`）存在冲突，它们将被轻松解决，并且它们的解决方案仅限于（并被`view`分支记住）。

相同的逻辑适用于两个以上的分支，因为该`merge`命令接受任意数量的分支进行合并。

# java - 以编程方式放大 JFrame/JPanel

> ID：16119211
> 
> 赞同：1
> 
> 时间：2013-04-20T10:21:24.540
> 
> 标签：java, swing, jframe, jpanel, java-2d

我一直在开发 Java 2D 游戏，在进行到一半时我注意到我的屏幕和精灵太小了。手动放大它们会很痛苦。

使用 Java 2D 将图像绘制到面板时，是否可以放大 JFrame 或 JPanel 及其所有内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:38:33.233

Graphics2D 提供的图像大小调整功能如下：

```
BufferedImage resizedImage = new BufferedImage(IMG_WIDTH, IMG_HEIGHT, type);
Graphics2D g = resizedImage.createGraphics();
g.drawImage(originalImage, 0, 0, IMG_WIDTH, IMG_HEIGHT, null);
g.dispose(); 
```

根据一些文章，如果要提高调整大小的图像质量，可以添加 RenderingHints，如下所示：

```
BufferedImage resizedImage = new BufferedImage(IMG_WIDTH, IMG_HEIGHT, type);
Graphics2D g = resizedImage.createGraphics();
g.drawImage(originalImage, 0, 0, IMG_WIDTH, IMG_HEIGHT, null);
g.dispose();
g.setComposite(AlphaComposite.Src);
g.setRenderingHint(RenderingHints.KEY_INTERPOLATION,RenderingHints.VALUE_INTERPOLATION_BILINEAR);
g.setRenderingHint(RenderingHints.KEY_RENDERING,RenderingHints.VALUE_RENDER_QUALITY);
g.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON); 
```

来源：[http ://www.mkyong.com/java/how-to-resize-an-image-in-java/](http://www.mkyong.com/java/how-to-resize-an-image-in-java/)

其他值得检查的链接：

[http://www.javaprogrammingforums.com/algorithms-recursion/818-change-size-image.html](http://www.javaprogrammingforums.com/algorithms-recursion/818-change-size-image.html)

[http://www.gotoquiz.com/web-coding/programming/java-programming/resize-images-in-java-preserving-image-quality/](http://www.gotoquiz.com/web-coding/programming/java-programming/resize-images-in-java-preserving-image-quality/)

[http://ajax911.com/resize-images-java-java2d-method/](http://ajax911.com/resize-images-java-java2d-method/)

# richtextbox - 使用带有标签的 RichTextBox 查找函数

> ID：16119224
> 
> 赞同：0
> 
> 时间：2013-04-20T10:22:36.737
> 
> 标签：richtextbox

我想要做的是让用户可以在文本框中输入然后单击一个按钮，它会在 Richtextbox 中搜索他们正在寻找的内容，如果找到了它会更改标签的内容。（实例）` Button = btn_Search

```
Textbox = InputBox

RichTextBox = rtb

Label = Results` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T06:23:03.123

另一种更干净的文本搜索方法如下，但首先您需要将 **System.Text.RegularExpressions**命名空间添加到您的项目中；

```
private void SearchButton_Click(object sender, EventArgs e)
    {
        if (textBox1.TextLength >= 1)
        {
            string word = textBox1.Text;//The text you want to search.
            Regex searchterm = new Regex(word);//A Regular Expression is most efficient way of working with text.
            MatchCollection matches = searchterm.Matches(richTextBox1.Text);
            if (matches.Count >= 1)
            { 
                Results=matches.Count.ToString();//Your label to display match instances.
                richTextBox1.SelectAll();
                richTextBox1.SelectionBackColor = Color.White;
                richTextBox1.DeselectAll();
                foreach (Match match in matches)
                {
                    richTextBox1.Select(match.Index, match.Length);
                    richTextBox1.SelectionBackColor = Color.Orange;
                    richTextBox1.DeselectAll();
                }
            }
        }
    } 
```

这应该可以完成工作，此外，如果您想指定其他搜索选项，请将 Regex searchterm 替换为下面的任何人，

**不区分大小写**

> 正则表达式 searchterm = new Regex(word,RegexOptions.IgnoreCase);

**全词搜索**

> 正则表达式 searchterm = new Regex(@"\b"+word+"\b");

**不区分大小写和全字搜索**

> 正则表达式 searchterm = new Regex(@"\b"+word+"\b",RegexOptions.IgnoreCase);

还有一件事，**Regex**搜索默认区分大小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:36:46.373

使用此方法，在您的`RichTextBox`.

```
public int FindMyText(string searchText, int searchStart, int searchEnd)
{
    // Initialize the return value to false by default.
    int returnValue = -1;

    // Ensure that a search string and a valid starting point are specified.
    if (searchText.Length > 0 && searchStart >= 0) 
    {
        // Ensure that a valid ending value is provided.
        if (searchEnd > searchStart || searchEnd == -1)
        {    
            // Obtain the location of the search string in richTextBox1.
            int indexToText = richTextBox1.Find(searchText, searchStart, searchEnd, RichTextBoxFinds.MatchCase);
            // Determine whether the text was found in richTextBox1.
            if(indexToText >= 0)
            {
                // Return the index to the specified search text.
                returnValue = indexToText;
            }
        }
    }

    return returnValue;
} 
```

像这样调用这个方法：

```
var res= FindMyText("hello",0\. richTextBox1.Text.Length); 
```

现在如果`res>-1`，这意味着肯定匹配，那么你可以设置你的标签，即

```
if(res>-1){
        lbl1.Text = "hello found";
} 
```

来源[here](http://msdn.microsoft.com/en-IN/library/system.windows.forms.richtextbox.find%28v=vs.71%29.aspx) 和[here](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/8683fec1-f269-45a3-9dd7-6e73e6be464f/)

# c# - NancyFx 和 TinyIoC 为模块提供单个实例

> ID：16119232
> 
> 赞同：0
> 
> 时间：2013-04-20T10:23:10.640
> 
> 标签：c#, nancy, tinyioc

我有一个相当简单的问题。我将 Nancy 与 Windows 窗体一起使用（通过构造函数（autoresolve）传递）。如果我让 nancy 自动解析每个模块，它会创建一个新的表单实例，这不是我想要的。我想也许我可以在 TinyIoC 中注册我的表单实例，然后它总是只使用这个实例而不是每次都创建一个新实例。但事实证明，实现起来并不像这个想法那么简单。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T08:17:41.070

您可能应该在引导程序中执行此操作

就像是：

```
public class MyBootstrapper: DefaultNancyBootstrapper
{
    ConfigureApplicationContainer (TinyIoCContainer container)
    {
        //the .AsSingleton() instructs TinyIOC to make only one of those.
        container.Register<IMessageDeliverer>().AsSingleton();
        base.ConfigureApplicationContainer (container);            
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T11:42:56.717

我通过不将窗口引用分配给构造函数而是通过向 TinyIoC 注册它并在默认构造函数中解析它来解决这个问题

```
//Registering in form
var container = TinyIoCContainer.Current;
container.Register<IMessageDeliverer>(this);

//Resolving in Module Constructor
var container = TinyIoCContainer.Current;
IMessageDeliverer mdl = container.Resolve<IMessageDeliverer>();
setDeliverer(mdl); 
```

# c# - Visual Studio 2010 忽略所有查询错误？

> ID：16119233
> 
> 赞同：0
> 
> 时间：2013-04-20T10:23:25.817
> 
> 标签：c#, asp.net, sql-server

我正在使用 Visual Studio 2010 和 ASP.net c# 语言。我尝试从 excel 表中读取信息，然后将信息插入 Microsoft SQL 数据库，但我发现了一个问题，它忽略了查询语句中的错误。

```
for (int i = 0; i < objdatasetdto.Tables[0].Rows.Count; i++)
{
  start_time = Convert.ToDateTime(objdatasetdto.Tables[0].Rows[i]["start"].ToString());
  end_time = Convert.ToDateTime(objdatasetdto.Tables[0].Rows[i]["end"].ToString());
  if (objdatasetdto.Tables[0].Rows[i]["Lecture_day"].ToString().Equals("1"))
  {
     try
     {
        query = "Insert into [M].[Lecture]([dd],[start_time],[end_time],[week_no],[sec_no],
                 [room_no],[building_no]) "+
                 values('" + Calendar1.SelectedDate.ToShortDateString() + "','" +
                 start_time.ToShortTimeString() + "','" + end_time.ToShortTimeString() + 
                 "','1','" + objdatasetdto.Tables[0].Rows[i]["section_no"].ToString() + "','" 
                 + objdatasetdto.Tables[0].Rows[i]["room_no"].ToString() + "','" 
                 + objdatasetdto.Tables[0].Rows[i]["building_no"].ToString() + "');";
        ifexist = new SqlCommand(query, cnn);
      }
      catch (Exception ex)
      {
         Response.Write(ex);
      }
    }//end if
 }// end for loop 
```

我写了 [dd] 列而不是 [date] 来测试它是否检测到错误。但它只是完全忽略了它们。

我怎么解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:29:00.833

您似乎没有执行 SqlCommand。尝试添加：

```
ifexist.ExecuteScalar(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:42:03.057

您在哪里执行了查询？
您没有在以下任何一项中写过任何内容

1.  如果存在。[执行标量（）](http://msdn.microsoft.com/en-IN/library/system.data.sqlclient.sqlcommand.executescalar.aspx)；
2.  如果存在。[执行非查询（）](http://msdn.microsoft.com/en-IN/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)；

如果您不执行，则查询将如何编译查询以及您将如何预期错误。

# programming-languages - 如何使用编程语言实现三角表达式？

> ID：16119240
> 
> 赞同：0
> 
> 时间：2013-04-20T10:24:19.720
> 
> 标签：programming-languages, trigonometry

```
*Expression: 
    -(sqrt((a0+a1 cos wt +a2 cos 2wt )^2 +(a1sin wt +a2 sin 2wt)^2
    - ـــــــــــــــــــــــــــــــــــــــــــــــــــــــــــــ
    - sqrt ((1+b1cos wt+b2 cos 2wt)^2 +(b1 sin wt+b2 sin2 wt )^2 

*variables:
    - a0=.2
    - a1=1.2
    - a2=a0=.2
    - b1=1.6
    - b2=.8
    - F=32KHZ 
```

*问题：

*   我应该使用编程语言（而不是 matlab）来实现这个 exp 并观察 o/p 信号....如果可能的话，我该怎么做？用什么语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:25:48.293

在 C# 中，您可以使用[`System.Math`](http://msdn.microsoft.com/en-us/library/system.math.aspx)，我相信它具有您需要的所有功能：

*   绝对值
*   经验
*   罪
*   因数
*   平方
*   ...很多其他方法...

数据类型取决于您需要的精度，您可以使用`decimal`数据类型。

例子：

```
decimal a0 = 0.2;
decimal a1 = 1.2;

decimal result = Math.Cos(a0) * a1 - Math.Sqrt(a1); 
```

基本上，大多数编程语言都有某种数学库，其中应该包含这些函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:00:19.800

什么语言？您几乎可以使用当今所有可用的编程语言进行计算，例如 C、PHP、Java 等。

怎么做？从一种语言到另一种语言的不同，我给你一个[python](http://www.python.org/)（控制台）的例子：

```
>>> import math [enter]
>>> x = 30 [enter]
>>> y = math.cos(x) [enter]
>>> y [enter]
>>> 0.15425144988758405 
```

注意：大多数编程语言将其三角函数实现为弧度而不是度数，要在 python 中将弧度转换为度数，请使用此函数：`math.cos(math.radian(x))`

为了在图形中可视化，有一个名为[matplotlib](http://matplotlib.org/)的 python 库，它在 python 中被广泛使用

# html - CSS，nth-child 不起作用？

> ID：16119242
> 
> 赞同：1
> 
> 时间：2013-04-20T10:24:22.630
> 
> 标签：html, css

我正在构建一个表单，但出于一个疯狂的原因，nth-child 似乎无法在输入字段上工作。一个 jsfiddle 来说明问题：http: [//jsfiddle.net/nGuLp/](http://jsfiddle.net/nGuLp/)。第二个输入字段不应该得到正确的边距，但确实如此。为什么这不起作用？HTML：

```
<div class="block-inner">
<h1>Blah</h1>
<hr />
<input type="text" placeholder="Voornaam" name="firstname" id="firstname" class="left" />
<input type="text" placeholder="Achternaam" name="surname" id="surname" class="left"    />

</div> 
```

CSS：

```
input {
width: 45%;
margin-right: 10%;
}

input:nth-child(2){
margin-right: 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:30:09.933

您需要使用`:nth-of-type(n)`，否则计数器会为其中的每个元素递增，`.block-inner`因此两个输入会导致第三和第四位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T10:26:43.263

你可以这样做，这是css2，所有浏览器都支持。

```
div input + input{ } 
```

将选择第二个输入。

如果输入是第二个孩子，您的第二个孩子将选择输入。div 中的第二个孩子是 hr。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:32:06.113

选择`nth-child`器不会挑出相同类型的元素。您的第一个输入元素是其父元素的第三个子元素。

# c# - WCF Rest 400 错误请求图像大小

> ID：16119243
> 
> 赞同：0
> 
> 时间：2013-04-20T10:24:22.190
> 
> 标签：c#, visual-studio-2010, wcf

我已经到处搜索并尝试了所有解决方案，但似乎没有什么对我有用。上传大于 64k 的图像时，我收到错误的 400 请求。它正在工作，然后突然停止工作。也无需更改代码或更改配置文件。还有什么可能影响配置文件设置？这是我的配置文件

```
<system.web>
    <customErrors mode="Off"/>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime maxRequestLength="2147483647"/>
  </system.web>
  <system.serviceModel>
    <services>
      <service behaviorConfiguration="webHttpBehavior" name="EzFindWCFService.EZFindWebService">
        <endpoint address="" behaviorConfiguration="EzFindWCFService.EZFindWebServiceAspNetAjaxBehavior"
          binding="webHttpBinding" contract="EzFindWCFService.EZFindWebService" />
      </service>
    </services>
    <behaviors>

      <endpointBehaviors>
        <behavior name="EzFindWCFService.EZFindWebServiceAspNetAjaxBehavior">
          <!--<enableWebScript />-->
          <webHttp/>
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="webHttpBehavior">          
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
        </behavior>

      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true"
      multipleSiteBindingsEnabled="true" />

    <bindings>
      <basicHttpBinding>
        <binding name="webHttpBinding" closeTimeout="00:10:00" openTimeout="00:10:00"
          receiveTimeout="00:10:00" sendTimeout="00:05:00" allowCookies="false"
          bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
          maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
          messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
          useDefaultWebProxy="true">
          <readerQuotas maxDepth="64" maxStringContentLength="2147483647"
            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
          <security mode="None">
            <transport clientCredentialType="None" proxyCredentialType="None"
              realm="" />
            <message clientCredentialType="UserName" algorithmSuite="Default" />
          </security>
        </binding>
      </basicHttpBinding>
    </bindings>

  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:25:08.950

在 system.serviceModel/services/service 中，您将绑定设置为“webHttpBinding”，但您没有定义 bindingConfiguration。问题是您没有在 system.serviceModel/bindings 中设置 webHttpBinding。您设置了一个 basicHttpBinding 并将其*名称*设置为 webHttpBinding！所以实际上这个完整的绑定没有被使用，因为你的服务元素寻找一个默认的（因为你没有定义一个 bindingConfiguration）webHttpBinding 而不是一个名为 webHttpBinding 的 basicHttpBinding！这就是您上传大于 64k 的文件失败的原因。因为这将超过 64k 的默认配额。我希望你能理解我 :) 混合默认绑定名称很容易出错 ;)

**更新：**

这个 system.serviceModel-Section 应该可以工作：

```
<services>
  <service name="EzFindWCFService.EZFindWebService" 
           behaviorConfiguration="webHttpBehavior" >
    <endpoint address="" 
              binding="webHttpBinding" bindingConfiguration="ConfigWebHttp"
              behaviorConfiguration="EzFindWCFService.EZFindWebServiceAspNetAjaxBehavior"
              contract="EzFindWCFService.EZFindWebService" />
  </service>
</services>

<behaviors>
  <endpointBehaviors>
    <behavior name="EzFindWCFService.EZFindWebServiceAspNetAjaxBehavior">
      <!--<enableWebScript />-->
      <webHttp/>
    </behavior>
  </endpointBehaviors>
  <serviceBehaviors>
    <behavior name="webHttpBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
      <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    </behavior>
  </serviceBehaviors>
</behaviors>

<bindings>
  <webHttpBinding>
    <binding name="ConfigWebHttp"
             openTimeout="00:10:00" closeTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:05:00"
             maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="64" maxStringContentLength="2147483647" maxArrayLength="2147483647" 
                    maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
    </binding>
  </webHttpBinding>
</bindings> 
```

我遗漏了一些默认设置（例如绑定/安全），以使配置更苗条。还有一件事：我会小心地将所有这些配额设置为 Int32.MaxValue。测试可能没问题，但请记住在投入生产时设置这些值。

# c# - 在 ItemsControl wpf 中绑定项目的子控件

> ID：16119247
> 
> 赞同：0
> 
> 时间：2013-04-20T10:25:04.727
> 
> 标签：c#, wpf, windows-phone-7, itemscontrol

我正在将一个 ItemsControl 绑定到一个列表，但是在项目模板中有一个控件没有被当前数据源绑定，我想将它与另一个数据源绑定。

但我被困在访问该控件

我的 ItemsControl 的 dataTemplate 是--->

```
<ItemsControl x:Name="ItemRequesterList" IsTabStop="False">
    <ItemsControl.ItemTemplate>
         <DataTemplate x:Name="ItemReqTemplate">
             <StackPanel Margin="10,0,0,0">
                <TextBlock Text="{Binding DisplayName}"></TextBlock>
                <TextBlock Text="requested on"></TextBlock>
                <TextBlock Text="{Binding}"></TextBlock> //<---this control, i 
                                               //    want to bind with another dataSource
             </StackPanel> 
        </DataTemplate> 
```

那么我怎样才能访问这个控件，它位于每个项目中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T06:55:05.327

您可以将该控件的 DataContext 绑定到某个静态资源，例如：

```
<TextBlock Text="{Binding}" DataContext="{StaticResource myOtherContext}"></TextBlock> 
```

请参阅以下内容：

[Silverlight - 在 XAML 中而不是在构造函数中设置 DataContext？](https://stackoverflow.com/questions/606803/silverlight-setting-datacontext-in-xaml-rather-than-in-constructor)

# android - 运动检测与节省电池

> ID：16119252
> 
> 赞同：3
> 
> 时间：2013-04-20T10:25:42.717
> 
> 标签：android, location, accelerometer, android-sensors, motion-detection

在我的应用程序中，我有一个在用户确定的时间范围内不断在后台运行的服务。

理论上，我需要不断地知道用户与某个目的地的距离。因此，为了优化，我正在实现自己的接近警报，它根据当前距离休眠一段时间。

此外，如果用户根本没有移动，我可以停止位置更新，因为我知道它没有移动。为此，我使用了加速度传感器的监听器。但是长时间保持打开状态会耗尽电池电量，因为小更新会不断出现。

我知道我可以增加定位的时间范围（我阅读了 Android Developers 中的精彩文章..），但这对于正确性来说风险很大。

有没有人遇到过类似的问题？你能建议一个不同的设计吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T16:46:07.107

Android KitKat 添加了一种新的传感器类型[TYPE_SIGNIFICANT_MOTION](http://developer.android.com/reference/android/hardware/Sensor.html#TYPE_SIGNIFICANT_MOTION)，旨在解决这个问题。如果支持，这会导致运动传感器仅针对足以导致位置更改的运动事件唤醒系统。

# java - 从postgresql中的批量插入行中检索序列ID

> ID：16119257
> 
> 赞同：9
> 
> 时间：2013-04-20T10:25:53.077
> 
> 标签：java, postgresql, jdbc, batch-file

这是有效的代码：

```
 Connection c = ds.getConnection();
        c.setAutoCommit(false);
        PreparedStatement stmt = c.prepareStatement("INSERT INTO items (name, description) VALUES(?, ?)");
        while (!(items = bus.take()).isEmpty()) {
          for (Item item : items) {
            stmt.setString(1, item.name);
            stmt.setString(2, item.description);
            stmt.addBatch();
          }
          stmt.executeBatch();
          c.commit();
        } 
```

但现在我需要填充另一个表，其中 id 是外键。如果我将 INSERT 与`RETURNING id`then一起使用，则`executeBatch`失败并出现“预期没有结果时返回结果”错误。

我看到了几种解决这个问题的方法

*   进行单独插入而不是批量插入。
*   用客户端生成的 guid 替换序列号。
*   使用某种存储过程来执行批量插入并返回一个 id 列表。

在我看到的三种方法中，最后一种似乎保留了批量插入和返回 id 的效率，但它对我来说也是最复杂的，因为我从未编写过存储过程。

有没有更好的方法来批量插入和获取 ID？我使用 postgresql 特定的 API 而不是 jdbc 没有问题。

如果没有，任何人都可以画出这样一个存储过程吗？

这是表架构：

```
CREATE UNLOGGED TABLE items
(
  id serial,
  name character varying(1000),
  description character varying(10000)
)
WITH (
  OIDS=FALSE
); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-20T10:52:47.170

像这样的东西应该工作：

```
// tell the driver you want the generated keys
stmt =  c.prepareStatement("INSERT ... ", Statement.RETURN_GENERATED_KEYS);

stmt.executeBatch();

// now retrieve the generated keys
ResultSet rs = stmt.getGeneratedKeys();
while (rs.next()) {
 int id = rs.getInt(1);
 .. save the id somewhere or update the items list 
} 
```

我认为（我**不确定**！）密钥是按照它们生成的顺序返回的。因此，ResultSet 中的第一行应该映射到您正在处理的列表中的第一个“项目”。但一定要验证！

**编辑**

如果这不起作用，请尝试指定为其生成值的实际列：

```
stmt =  c.prepareStatement("INSERT ... ", new String[] {"id"}); 
```

# javascript - 用于隐藏具有类的子元素的元素的 Jquery 选择器

> ID：16119265
> 
> 赞同：1
> 
> 时间：2013-04-20T10:26:43.670
> 
> 标签：javascript, jquery, css-selectors

这是一个示例 html

```
<iframe id="theiframe">
...
<form>
    <div class="pluginConnectButton">
        <div class="pluginButton pluginButtonInline pluginConnectButtonDisconnected" title="">
            ...
        </div>
        <div class="pluginButton pluginButtonPressed pluginButtonInline pluginButtonX pluginConnectButtonConnected hidden_elem" title="">
            ...
        </div>
</form>
...
</iframe> 
```

我想要如果具有类 pluginButton pluginButtonInline pluginConnectButtonDisconnected 的 div 具有类“hidden_​​elem”并且在具有 id = theiframe 的 iframe 中，那么执行一些操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:38:50.237

尝试

```
var el = $('.pluginButton.pluginButtonInline.pluginConnectButtonDisconnected');
if(el.hasClass('hidden_elem') && el.closest('#theiframe').length){
    //do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:35:26.723

[http://jsfiddle.net/vt8WW/](http://jsfiddle.net/vt8WW/)

```
alert($('#theiframe').hasClass('hidden_elem')); 
```

像这样使用它

# c - 从 MJPEG 流中抓取一帧图像

> ID：16119266
> 
> 赞同：1
> 
> 时间：2013-04-20T10:26:51.647
> 
> 标签：c, video, libcurl, ip-camera, mjpeg

我有 VideoSec IP 摄像机，以及在嵌入式 linux NPE 控制器上运行的守护程序。守护进程需要从 IP 摄像头获取图像，该部分是使用 libcurl 以标准方式实现的，并且使用轴摄像头工作得很好：

```
static size_t write_data(void *ptr, size_t size, size_t nmemb, FILE *stream) {
     size_t written = fwrite(ptr, size, nmemb, stream);
     return written;
}

void refreshCameraImage(char *target, char *url)
{
     CURL *image;
     CURLcode imgresult;
     FILE *fp;

     image = curl_easy_init();

     if (image)
     {
          fp = fopen(target, "wb");
          if(fp == NULL)
          printf("\nFile cannot be opened");

          curl_easy_setopt(image, CURLOPT_URL, url);
          curl_easy_setopt(image, CURLOPT_WRITEFUNCTION, NULL);
          curl_easy_setopt(image, CURLOPT_WRITEDATA, fp);

          imgresult = curl_easy_perform(image);
          if( imgresult )
          {
               printf("\nCannot grab the image!");
          }
     }
     curl_easy_cleanup(image);
     fclose(fp);
} 
```

VideoSec 摄像机的问题是我无法定义任何 jpeg 流，只能定义 MJPEG。因此，我需要一种使用 libcurl 从 mjpeg 流中仅抓取一帧的方法。OpenCV 不是一个选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T08:55:20.423

在 M-JPEG 中，JPEG 图像被完整嵌入并由带有子标题的文本分隔符分隔。所以提取JPEG是一件容易的事：

*   您在响应正文中找到第一个/下一个子标题/分隔符
*   您找到 Content-Length 值（如果可用）
*   您跳到 \r\n\r\n 以定位 JPEG 数据的开头
*   您接收 JPEG 数据以获取 Content-Length 字节数，或者如果长度不可用，则读取直到获得下一个分隔符

生成的数据正是 JPEG 文件/图像/流。

# jquery - 标签字段的jQuery验证

> ID：16119271
> 
> 赞同：-1
> 
> 时间：2013-04-20T10:27:01.567
> 
> 标签：jquery, validation

是否可以为这样的标签验证或设置必填字段。

```
 <label id="company" name="company">
    <%
       if (request.getParameter("company") != null) {
   request.getParameter("company");
}
%>
</label> 
```

对于文本区域，我们通过提供公司使其成为必需：必需。但这是一个标签。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:30:37.683

尝试这个：

```
<%
if (request.getParameter("company") != null) {
   %>
   <label id="company" name="company"></label>
   <%
}
%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:29:34.687

您可以使用`$('label[for="' + this.id + '"]').html();`.SO 获取标签文本，您可以为标签编​​写 jQuery 验证

```
<label for="company"  class="con_name">Insert Name</label>
$("#formId").validate(
{       
rules:{
    con_name:{required:true, minlength:3},                      
      }  
messages: {
      con_name: 'Insert Name'
      }

}); 
```

[**看这里**](http://jsfiddle.net/u6azR/1/)

# python - 创建会话时如何检测过期的访问令牌？

> ID：16119272
> 
> 赞同：1
> 
> 时间：2013-04-20T10:27:04.870
> 
> 标签：python, oauth, rauth

我有以下测试程序：

```
from   rauth.service import OAuth1Service, OAuth2Service

SUPPORTED_SERVICES = {
    'twitter'  : ( 'OAuth1', 'twitter',  'https://api.twitter.com/oauth',        'request_token', 'access_token', 'authorize', 'https://api.twitter.com/1/',  None),
    'facebook' : ( 'OAuth2', 'facebook', 'https://graph.facebook.com/oauth',     None,            'access_token', 'authorize', 'https://graph.facebook.com/', 'https://www.facebook.com/connect/login_success.html'),
    'google'   : ( 'OAuth2', 'google',   'https://accounts.google.com/o/oauth2', None,            'token',        'auth',      None,                          'http://localhost'),
}

CLIENT_DATA = {
    'twitter'  : ('dummy_client_id', 'dummy_client_secret'),
    'facebook' : ('dummy_client_id', 'dummy_client_secret'),
    'google'   : ('dummy_client_id', 'dummy_client_secret'),
}

USER_TOKENS = {
    'user1' : {
        'twitter'  : ('dummy_access_token', 'dummy_access_token_secret'),
        'facebook' : ('dummy_access_token', None),
        'google'   : ('dummy_access_token', None),
    }
}

def test_google(user_id):
    service_id = 'google'
    oauthver, name, oauth_base_url, request_token_url, access_token_url, authorize_url, base_url, redirect_uri = SUPPORTED_SERVICES[service_id]
    request_token_url = oauth_base_url + '/' + (request_token_url or '')
    access_token_url  = oauth_base_url + '/' + access_token_url
    authorize_url     = oauth_base_url + '/' + authorize_url
    client_id, client_secret = CLIENT_DATA[service_id]
    google = OAuth2Service(
        client_id=client_id,
        client_secret=client_secret,
        name=name,
        authorize_url=authorize_url,
        access_token_url=access_token_url,
        base_url=base_url)
    access_token, access_token_secret = USER_TOKENS[user_id][service_id] # access_token_secret only needed for twitter (OAuth1)
    session = google.get_session(access_token)
    user = session.get('https://www.googleapis.com/oauth2/v1/userinfo').json()
    print user

test_google('user1') 
```

我已经授权我的应用访问 google 账号`user1`，并获得了一个 access_token。该访问令牌已经过期，我的程序的输出是：

```
{u'error': {u'code': 401, u'message': u'Invalid Credentials', u'errors': [{u'locationType': u'header', u'domain': u'global', u'message': u'Invalid Credentials', u'reason': u'authError', u'location': u'Authorization'}]}} 
```

我想在创建会话时检查访问令牌是否已过期，*而不是在请求数据时*。这可能吗？**如何验证会话对象是否真的被授权？**

为了澄清起见，我想做的是以下几点：

1.  首先，让用户授权我的应用程序
2.  保存访问令牌以供将来使用（在数据库中，但在测试代码中，这是在脚本中硬编码的）
3.  每当稍后访问检测到令牌已过期时，请返回步骤 1

我目前在执行第 3 步时遇到问题。我当然可以在对我的 GET 的 json 回复中检测到 401，但是强制验证所有 GET 访问看起来相当麻烦。我要做的是验证会话在我创建时是否真的处于活动状态，然后假设在会话对象的整个持续时间内它将保持活动状态。通常这只是几毫秒，而我的 webapp 正在处理请求并使用 OAuth 会话对象访问 google API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T13:12:56.613

您必须先调用`get_authorization_url`，该用户必须打开并授予您访问其帐户的权限，作为回报，您将从`redirect_uri`回调的查询参数中获得一个代码，您可以交换`access_token`：

```
params = {
    'scope': 'email',
    'response_type': 'code',
    'redirect_uri': redirect_uri,
    'access_type': 'offline', # to get refresh_token
}

print google.get_authorize_url(**params) 
```

根据[文档](https://rauth.readthedocs.org/en/latest/api/#oauth-2-0-services)，此代码应该可以工作：

```
data = {
    'code': 'code you got from callback',
    'grant_type': 'authorization_code',
    'redirect_uri': 'http://localhost/oauth2',
}

response = google.get_raw_access_token(data=data) 
```

作为响应，您将获得如下 JSON 数据：

```
{
  "access_token" : "ya29.AHE<....>n3w",
  "token_type" : "Bearer",
  "expires_in" : 3600,
  "id_token" : "eyJh<...>QwNRzc",
  "refresh_token" : "1/X86S<...>Vg4"
} 
```

如您所见，有`expires_in`（秒），您必须存储获得令牌的时间，并稍后与当前时间 + 进行比较`expires_in`。

如果令牌过期，您可以稍后刷新它，`refresh_token`而无需再次要求用户确认：

```
response = google.get_raw_access_token(data={
    'refresh_token': refresh_token,
    'grant_type': 'refresh_token',
})
print response.content 
```

请注意，这`refresh_token`只会在用户第一次授权应用程序时返回。有关详细信息，请参阅[此问题](https://stackoverflow.com/questions/8942340/get-refresh-token-google-api)。

唉，您似乎不能使用`get_auth_session`，因为在内部它只提取`access_token`，而其他所有内容都被丢弃。

如果您在没有先`access_token`获得身份验证的情况下立即获得`code`，您仍然会`expires_in`进入回调。从[文档](https://developers.google.com/accounts/docs/OAuth2UserAgent#handlingtheresponse)：

> [https://oauth2-login-demo.appspot.com/oauthcallback#access_token=1/fFBGRNJru1FQd44AzqT3Zg&token_type=Bearer&expires_in=3600](https://oauth2-login-demo.appspot.com/oauthcallback#access_token=1/fFBGRNJru1FQd44AzqT3Zg&token_type=Bearer&expires_in=3600)

# android - Android - 崩溃报告通知

> ID：16119278
> 
> 赞同：1
> 
> 时间：2013-04-20T10:27:40.353
> 
> 标签：android, exception, bug-reporting

如何显示应用程序崩溃（或服务崩溃）的通知，如果用户单击它，它会通过电子邮件发送 StackTrace？
我看到了一些这样做的应用程序。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-20T10:50:29.803

通过扩展接口创建自己的类`UncaughtExceptionHandler`

```
public class UnCaughtException implements UncaughtExceptionHandler
{
    private Context context;
    private static Context context1;

    public UnCaughtException(Context ctx)
    {
        context = ctx;
        context1 = ctx;
    }

    private StatFs getStatFs()
    {
        File path = Environment.getDataDirectory();
        return new StatFs(path.getPath());
    }

    private long getAvailableInternalMemorySize(StatFs stat)
    {
        long blockSize = stat.getBlockSize();
        long availableBlocks = stat.getAvailableBlocks();
        return availableBlocks * blockSize;
    }

    private long getTotalInternalMemorySize(StatFs stat)
    {
        long blockSize = stat.getBlockSize();
        long totalBlocks = stat.getBlockCount();
        return totalBlocks * blockSize;
    }

    private void addInformation(StringBuilder message)
    {
        message.append("Locale: ").append(Locale.getDefault()).append('\n');
        try
        {
            PackageManager pm = context.getPackageManager();
            PackageInfo pi;
            pi = pm.getPackageInfo(context.getPackageName(), 0);
            message.append("Version: ").append(pi.versionName).append('\n');
            message.append("Package: ").append(pi.packageName).append('\n');
        }
        catch ( Exception e )
        {
            Log.e("CustomExceptionHandler", "Error", e);
            message.append("Could not get Version information for ").append(context.getPackageName());
        }
        message.append("Phone Model: ").append(android.os.Build.MODEL).append('\n');
        message.append("Android Version: ").append(android.os.Build.VERSION.RELEASE).append('\n');
        message.append("Board: ").append(android.os.Build.BOARD).append('\n');
        message.append("Brand: ").append(android.os.Build.BRAND).append('\n');
        message.append("Device: ").append(android.os.Build.DEVICE).append('\n');
        message.append("Host: ").append(android.os.Build.HOST).append('\n');
        message.append("ID: ").append(android.os.Build.ID).append('\n');
        message.append("Model: ").append(android.os.Build.MODEL).append('\n');
        message.append("Product: ").append(android.os.Build.PRODUCT).append('\n');
        message.append("Type: ").append(android.os.Build.TYPE).append('\n');
        StatFs stat = getStatFs();
        message.append("Total Internal memory: ").append(getTotalInternalMemorySize(stat)).append('\n');
        message.append("Available Internal memory: ").append(getAvailableInternalMemorySize(stat)).append('\n');
    }

    @Override
    public void uncaughtException(Thread t, Throwable e)
    {
        try
        {
            StringBuilder report = new StringBuilder();
            Date curDate = new Date();
            report.append("Error Report collected on : ").append(curDate.toString()).append('\n').append('\n');
            report.append("Informations :").append('\n');
            addInformation(report);
            report.append('\n').append('\n');
            report.append("Stack:\n");
            final Writer result = new StringWriter();
            final PrintWriter printWriter = new PrintWriter(result);
            e.printStackTrace(printWriter);
            report.append(result.toString());
            printWriter.close();
            report.append('\n');
            report.append("**** End of current Report ***");
            Log.e(UnCaughtException.class.getName(), "Error while sendErrorMail" + report);
            sendErrorMail(report);
        }
        catch ( Throwable ignore )
        {
            Log.e(UnCaughtException.class.getName(), "Error while sending error e-mail", ignore);
        }
    }

    /**
     * This method for call alert dialog when application crashed!
     */
    public void sendErrorMail(final StringBuilder errorContent)
    {
        final AlertDialog.Builder builder = new AlertDialog.Builder(context);
        new Thread()
        {
            @Override
            public void run()
            {
                Looper.prepare();
                builder.setTitle("Sorry...!");
                builder.create();
                builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener()
                {
                    @Override
                    public void onClick(DialogInterface dialog, int which)
                    {
                        System.exit(0);
                    }
                });
                builder.setPositiveButton("Report", new DialogInterface.OnClickListener()
                {
                    @Override
                    public void onClick(DialogInterface dialog, int which)
                    {
                        Intent sendIntent = new Intent(Intent.ACTION_SEND);
                        String subject = "Your App crashed! Fix it!";
                        StringBuilder body = new StringBuilder("Yoddle");
                        body.append('\n').append('\n');
                        body.append(errorContent).append('\n').append('\n');
                        // sendIntent.setType("text/plain");
                        sendIntent.setType("message/rfc822");
                        sendIntent.putExtra(Intent.EXTRA_EMAIL, new String[] { "yourmail@domain.com" });
                        sendIntent.putExtra(Intent.EXTRA_TEXT, body.toString());
                        sendIntent.putExtra(Intent.EXTRA_SUBJECT, subject);
                        sendIntent.setType("message/rfc822");
                        context1.startActivity(sendIntent);
                        System.exit(0);
                    }
                });
                builder.setMessage("Oops,Your application has crashed");
                builder.show();
                Looper.loop();
            }
        }.start();
    }
} 
```

将 CustomExceptionHandler 设置为`DefaultExceptionHandler`MainActivity

```
import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity
{
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Thread.setDefaultUncaughtExceptionHandler(new UnCaughtException(MainActivity.this));
        int y = 5 / 0;
    }
} 
```

**笔记 ：**

上面的示例代码发送一封包含崩溃数据的电子邮件。您可以对其进行修改以满足您的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:30:33.690

您可以使用[ACRA](http://acra.ch/)库。从文档

> Acra 捕获异常，检索大量上下文数据并将它们发送到 Google 电子表格……或您喜欢的任何后端。

或[批评](https://www.crittercism.com/)。它支持

> 1.  错误监控
> 2.  应用监控

# hsqldb - 如何在 HSQLDB 和 C# .net 之间建立连接？

> ID：16119284
> 
> 赞同：3
> 
> 时间：2013-04-20T10:28:38.890
> 
> 标签：hsqldb

如何在 HSQLDB 和 C# .net 之间建立连接？我已经看过 SharpHSQL 和 H2Sharp 但无法连接 HSQLDB。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T03:25:50.337

像这样尝试：确保您已经添加了 hsqldb.dll、IKVM.OpenJDK.Core.dll、IKVM.OpenJDK.Jdbc.dll 作为参考。如果您没有 IKVM 库，可以[在此处](http://sourceforge.net/projects/ikvm/files/ikvm/7.2.4630.5/)下载。

在您的 C# 中：

```
using java.sql; //add this. 
```

用于创建连接：

```
private Connection GetConnection()
    {
        DriverManager.registerDriver(new org.hsqldb.jdbcDriver());
        Connection conn = DriverManager.getConnection("jdbc:hsqldb:hsql://[host]/[db name]", "[username]", "[password]");
        return conn;
    } 
```

如何使用它：

```
public void LoadSetting(String userId)
    {
        Connection conn = null;
        try
        {
            //Connect it!
            conn = GetConnection();

            string query = "SELECT A.* FROM table A";

            PreparedStatement ps = conn.prepareStatement(query);

            ResultSet rs = ps.executeQuery();
            while (rs.next())
            {
               //Get Query Result
               Console.WriteLn(rs.getString("COL1"));
               Console.WriteLn(rs.getString("COL2"));
            }
         }

         //Close the Connection
         finally
         {
            if (conn != null && !conn.isClosed())
            {
                conn.close();
                conn = null;
            }
         }
     } 
```

希望这有帮助。
干杯...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-20T07:22:25.550

基本步骤：

1.  下载[IKVM.NET](https://www.nuget.org/packages/IKVM/8.1.5717)和[HyperSQL](https://sourceforge.net/projects/hsqldb/files/) (=HSQLDB) 驱动程序。

2.  使用 IKVM.NET 将 HSQLDB Java 驱动程序转换为 .NET DLL 以创建**hsqldb.dll**

3.  将编译时依赖项添加到您的 C# 项目中：

*   hsqldb.dll

*   IKVM.OpenJDK.Core.dll
*   IKVM.OpenJDK.Jdbc.dll

4.  运行 C# 程序时添加运行时依赖项：

*   IKVM.OpenJDK.Localedata.dll

*   IKVM.OpenJDK.Text.dll

*   IKVM.OpenJDK.Util.dll

*   IKVM.Runtime.dll

5.  将连接字符串添加到您的 app.config ：

```
<configuration>
 **<connectionStrings>
    <add name="HyperSQL"
        connectionString="jdbc:hsqldb:hsql://localhost:9999/xdb;user=SA;password=;" />
  </connectionStrings>** 
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.6.1" />
  </startup>
</configuration>
```

6.  C#代码：

```
using System;
using System.Configuration;

namespace HyperSQL
{
    class Program
    {
        readonly static string CONNECTION_STRING = ConfigurationManager.ConnectionStrings["HyperSQL"].ConnectionString;
        const string SQL = "SELECT * FROM customer";

        static void Main(string[] args)
        {
            java.sql.DriverManager.registerDriver(new org.hsqldb.jdbcDriver());
            using (java.sql.Connection conn = java.sql.DriverManager.getConnection(CONNECTION_STRING))
            {
                java.sql.PreparedStatement ps = conn.prepareStatement(SQL);
                using (java.sql.ResultSet rs = ps.executeQuery())
                {
                    while (rs.next())
                    {
                        Console.WriteLine($"ID={rs.getInt("id")}");
                        Console.WriteLine($"NAME={rs.getString("name")}");
                        Console.WriteLine($"AGE={rs.getInt("age")}");
                        Console.WriteLine($"ADDRESS={rs.getString("address")}");
                        Console.WriteLine($"SALARY={rs.getInt("salary")}");

                        Console.WriteLine("------------------");
                    }
                }
            }

            Console.ReadLine();
        }
    }
}
```

这是我的详细教程[如何从 C# 连接到 HyperSQL](http://nikolaiklimov.de/query-java-HyperSQL-database-with-csharp/)

# c - 理解 C 指针转换应用于文字时的语义

> ID：16119289
> 
> 赞同：0
> 
> 时间：2013-04-20T10:29:05.947
> 
> 标签：c, pointers, literals

是否有任何文档指定应用于 C 中文字的指针转换的含义？

例如：

```
int *my_pointer = (int *) 9 
```

这是依赖于编译器还是标准的一部分？

编辑：根据以下评论删除误导性注释，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T10:33:40.547

```
int *my_pointer = (int *) 9 
```

这并不指向文字`9`。它将文字转换`9`为指向`int`. C 表示从整数到指针类型的转换是实现定义的。

```
int *my_pointer = &(int) {9}; 
```

这样做。它`my_pointer`指向一个`int`有价值的对象`9`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T10:34:04.190

指向整数的指针和整数到指针的转换是实现定义的（参见 C 标准的附件 J）。

# javascript - 如何在动态刷新 div 上保持 scoll 位置？

> ID：16119293
> 
> 赞同：1
> 
> 时间：2013-04-20T10:29:37.137
> 
> 标签：javascript, html, ajax, scroll

几个小时前我正在搜索这个，我找不到任何地方。

我使用简单的 Jquery 脚本来刷新 div。我想在那个 div 中查看我的 PHP 输出。

```
$script = " 

<script src=\"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js\"></script>   
    <script type=\"text/javascript\">// <![CDATA[
$(document).ready(function() {
$.ajaxSetup({ cache: false }); // This part addresses an IE bug.  without it, IE will only load the first number and will never refresh
setInterval(function() {
$('#uziRefresh').load('http://mypage/refresh.php?a_a=".$kinek[1]."');
}, 6000); // the \"3000\" here refers to the time to refresh the div.  it is in milliseconds. 
});
// ]]></script>

"; 
```

我的问题是。当它刷新时，它会转到 div 滚动的顶部位置。我想保留当前位置，因为我的用户想阅读 div 的所有内容。我想做一个简单的聊天应用程序。但这很糟糕，因为总是排在首位。

我该如何解决这个问题？有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T11:47:41.970

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>  
<script type="text/javascript">

$(document).ready(function() {

    $.ajaxSetup({
        cache: false
    });
setInterval(function() {
var div = document.getElementById("uzidoboz").scrollTop; 
$('#uziRefresh').load('/modulok/belso_levelezes/refresh.php?a_a=<?php print($kinek[1])?>', function(){ 
$("div.uzidoboz").scrollTop(div);
})
}, 6000);
});
</script> 
```

这是我的完整解决方案。对不起，我错过了一些 div 名称，但使用正确的名称，最后一个解决方案还没有奏效。这工作很好。首先，我获取当前的滚动条，重新加载 div，然后设置滚动条。

它每 6000 毫秒运行一次。现在很简单并且可以工作。我有我的 div。uzidoboz div 溢出。我的内容就在其中。但我将它全部加载到 uziRefresh div...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:06:36.453

检查此解决方案。我已经删除了你的评论对不起！。

```
$(document).ready(function() {

    $.ajaxSetup({
        cache: false
    });

    var updateScrollPosition = function() {
        var div = $('#uziRefresh');
        div.scrollTop(div.height());
    };

    setInterval(function() {
        $('#uziRefresh').load('http://mypage/refresh.php?a_a=".$kinek[1]."', updateScrollPosition);
    }, 6000);
}); 
```

准确地说，使用这个 -

> $脚本 = "
> 
> ```
> <script type=\"text/javascript\">// <![CDATA[ 
> ```
> 
> $(文档).ready(函数() {
> 
> ```
> $.ajaxSetup({
>     cache: false
> });
> 
> var updateScrollPosition = function() {
>     var div = $('#uziRefresh');
>     div.scrollTop(div.height());
> };
> 
> setInterval(function() {
>     $('#uziRefresh').load('http://mypage/refresh.php?a_a=".$kinek[1]."', 
> ```
> 
> 更新滚动位置）；}, 6000); // ]]>
> 
> ";

# facebook - PHP中的自定义Facebook Like Box

> ID：16119294
> 
> 赞同：2
> 
> 时间：2013-04-20T10:29:41.390
> 
> 标签：facebook, facebook-graph-api, facebook-like

我知道我可以将 Facebook 自己的[Like Box](https://developers.facebook.com/docs/reference/plugins/like-box/)嵌入到网页中，但正如许多人发现的那样，它的样式不再像以前那样多（移除边框是你能做的最好的事情）它似乎）。

所以我想知道是否有可能构建我自己的自定义 Like Box，以便我可以控制它的样式，并使其适合需要进行的网页设计？

我一直在尝试通过 Facebook 网站上的[Graph API 文档](https://developers.facebook.com/docs/reference/api/)来工作，并且知道如何获取一些信息，例如页面的“喜欢”数量以及有关页面本身的其他信息，但我似乎无法了解如何为喜欢该页面的人提取随机数量的个人资料图片（基本上与 Like Box 社交插件上的工作方式相同）。

谢谢。

# fft - 为什么 DCT 变换在视频/图像压缩中优于其他变换

> ID：16119303
> 
> 赞同：15
> 
> 时间：2013-04-20T10:31:22.140
> 
> 标签：fft, video-processing, image-compression, dct

我介绍了如何在图像和视频压缩标准中使用 DCT（离散余弦变换）。

但为什么仅 DCT 优于 dft 或 dst 等其他变换？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-21T09:35:35.550

因为`cos(0)`是 1，所以 DCT-II 的第一个（第 0 个）系数是被转换值的平均值。这使得每个 8x8 块的第一个系数代表其组成像素的平均色调，这显然是一个好的开始。随后的系数增加了越来越多的细节水平，从扫描梯度开始，一直到越来越复杂的模式，而前几个系数恰好捕获了摄影图像中的大部分信号。

`Sin(0)`为 0，因此 DST 以 0.5 或 1 的偏移量开始，第一个系数是平缓的土丘而不是平坦的平原。这不太可能适合普通图像，结果是 DST 需要比 DCT 更多的系数来编码大多数块。

DCT恰好适合。这就是它的全部。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-01-19T05:47:29.167

在执行图像压缩时，我们最好的选择是执行 KLT 或**Karhunen-Loève 变换**，因为它可以使原始图像和压缩图像之间的均方误差最小。然而，KLT 依赖于输入图像，这使得压缩过程不切实际。

DCT 是最接近 KL 变换的近似值。大多数情况下，我们对低频信号感兴趣，因此只需要偶数分量，因此仅计算 DCT 在计算上是可行的。

此外，使用余弦而不是正弦函数对于压缩至关重要，因为需要更少的余弦函数来逼近典型信号（有关进一步解释，请参阅*Douglas Bagnall 的回答）。*

使用余弦的另一个优点是没有不连续性。在 DFT 中，由于信号是周期性地表示的，因此在截断表示系数时，信号会趋于“失去其形式”。然而，在 DCT 中，由于连续的周期性结构，信号可以承受相对较多的系数截断，但仍保持所需的形状。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T23:32:40.337

顶部和底部和/或左右边缘不匹配的图像宏块的 DCT 在较高频率系数中的能量将低于 DFT。因此，允许更大的机会去除这些高系数，更粗略地量化或压缩，而不会产生更多可见的宏块边界伪影。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-03T16:10:11.987

DCT 优于 DFT（离散傅立叶变换）和 KLT（Karhunen-Loeve 变换）

```
1\. Fast algorithm
2\. Good energy compaction
3\. Only real coefficients 
```

# session - Spring security concurrent session is not working as desired

> ID：16119308
> 
> 赞同：0
> 
> 时间：2013-04-20T10:32:05.303
> 
> 标签：session, spring-security

Instead of restricting one session per user,it is restricting one session for

whole application.

So if one user is logged in noone can login .

Here is my configuration

```
<session-management invalid-session-url="/login">
        <concurrency-control error-if-maximum-exceeded="true" max-sessions="1" />
     </session-management> 
```

And i even added listener in web.xml.

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">
    <!-- HTTP security configurations -->
    <http auto-config="true" use-expressions="true">
        <form-login login-processing-url="/resources/j_spring_security_check"
            login-page="/login" default-target-url="/index"
            authentication-success-handler-ref="myAuthenticationSuccessHandler"
            authentication-failure-url="/login?login_error=t" />
        <logout invalidate-session="true"
            logout-url="/resources/j_spring_security_logout" success-handler-ref="myLogoutSuccessHandler"/>
        <!-- Configure these elements to secure URIs in your application -->
        <intercept-url pattern="/choices/**" access="hasRole('ROLE_ADMIN')" />
        <intercept-url pattern="/member/**" access="isAuthenticated()" />
        <intercept-url pattern="/resources/**" access="permitAll" />
        <intercept-url pattern="/**" access="permitAll" />

     <session-management invalid-session-url="/login">
            <concurrency-control error-if-maximum-exceeded="true"
                max-sessions="1" />
        </session-management> 
    </http>

    <!-- Configure Authentication mechanism -->
    <authentication-manager alias="authenticationManager">
        <authentication-provider ref="customDaoAuthenticationProvider">
        </authentication-provider>
    </authentication-manager>

    <beans:bean id="myAuthenticationSuccessHandler" class="com.test.connect.web.login.MyAuthenticationSuccessHandler"/>
    <beans:bean id="myLogoutSuccessHandler" class="com.test.connect.web.login.MyLogoutSuccessHandler"/>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T16:29:07.903

Based upon the configuration you provided, which includes a custom AuthenticationProvider, and the problem you are having I would guess that you are returning a custom UserDetails implementation that does not properly implement the equals and hashCode methods.

Please ensure that you have properly implemented equals and hashCode on any custom UserDetails implementation as these methods are used to look up if a user contains active sessions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-20T01:15:33.653

Just want to highlight here, make sure the equals and hashCode methods return is true. if the methods is not returning true it will not kill or terminate the existing session.

# c++ - 指针和参考问题

> ID：16119317
> 
> 赞同：4
> 
> 时间：2013-04-20T10:32:27.743
> 
> 标签：c++

我正在创建类似于结构列表的东西。在 main 的开头，我声明了一个空指针。然后我调用 insert() 函数几次，传递对该指针的引用，以添加新元素。

然而，似乎有些不对劲。我无法显示列表的元素，`std::cout`只是破坏了程序，即使它在没有警告的情况下编译。

```
#include <iostream>

struct node {
    node *p, *left, *right;
    int key;
};

void insert(node *&root, const int key)
{
    node newElement = {};
    newElement.key = key;

    node *y = NULL;
    std::cout << root->key; // this line
    while(root)
    {
        if(key == root->key) exit(EXIT_FAILURE);
        y = root;
        root = (key < root->key) ? root->left : root->right;
    }

    newElement.p = y;

    if(!y) root = &newElement;
    else if(key < y->key) y->left = &newElement;
    else y->right = &newElement;
}

int main()
{
    node *root = NULL;
    insert(root, 5);
        std::cout << root->key; // works perfectly if I delete cout in insert()
    insert(root, 2);
        std::cout << root->key; // program breaks before this line
    return 0;
} 
```

* * *

如您所见，我在插入函数中创建了新的结构元素并将其保存在根指针中。在第一次调用中，甚至没有启动 while 循环，因此它可以工作，并且我能够在主函数中显示 root 的元素。

但是在第二次调用中，while 循环已经起作用，我得到了我描述的问题。

语法有问题，`root->key`因为即使我将它放在第一次调用中它也不起作用。

**出了什么问题**，原因是什么？

**此外**，我总是看到通过这样的指针插入新列表的元素：

```
node newElement = new node();
newElement->key = 5;
root->next = newElement; 
```

此代码是否等于：

```
node newElement = {};
newElement.key = 5;
root->next = &newElement; 
```

? 它会更干净一些，并且不需要删除内存。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:35:50.033

问题是因为您将指针传递给函数外的局部变量。取消引用此类指针是未定义的行为。你应该分配`newElement`.`new`

这段代码

```
node newElement = {}; 
```

创建一个局部变量`newElement`。一旦函数结束，范围就`newElement`结束了，它的内存被破坏了。但是，您将指向该被破坏内存的指针传递到函数外部。一旦函数退出，对该内存的所有引用都将变为无效。

另一方面，这段代码

```
node *newElement = new node(); // Don't forget the asterisk 
```

在空闲存储区分配一个对象。`delete`这些对象在您明确显示之前一直可用。这就是为什么您可以在创建它们的函数退出后使用它们的原因。当然既然`newElement`是指针，就需要使用`->`它来访问它的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:50:06.887

您需要在这里学习的关键是*堆栈*分配对象和*堆*分配对象之间的区别。在您的插入函数中，您`node newElement = {}`是堆栈分配的，这意味着它的生命周期由封闭范围决定。在这种情况下，这意味着当函数退出时，您的对象将被销毁。那不是你想要的。您希望树的根存储在您的`node *root`指针中。为此，您需要从堆中分配内存。在 C++ 中，通常使用 new 运算符完成。这允许您将指针从一个函数传递到另一个函数，而其生命周期不取决于它所在的范围。这也意味着您需要小心管理堆分配对象的生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T10:35:34.550

**好吧，您的Also**评论有一个问题。第二个可能更干净，但它是错误的。你必须新的记忆并删除它。否则，您最终会得到指向不再存在的对象的指针。这正是 new 解决的问题。

另一个问题

```
void insert(node *&root, const int key)
{
    node newElement = {};
    newElement.key = key;

    node *y = NULL;
    std::cout << root->key; // this line 
```

在第一次插入时，root 仍然是 NULL，所以这段代码会使程序崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T15:57:13.437

已经解释过您必须动态分配对象（使用`new`），但是这样做充满危险（内存泄漏）。

有两种（简单）解决方案：

1.  有一个所有权计划。
2.  使用竞技场来放置您的节点，并保留对它们的引用。

**1 所有权方案**

在 C 和 C++ 中，获取存储对象的内存有两种形式：自动存储和动态存储。例如，当您在函数中声明变量时使用自动，但是这些对象仅在函数的持续时间内存在（因此在之后使用它们时会遇到问题，因为内存可能被其他东西覆盖）。因此，您经常必须使用动态内存分配。

动态内存分配的问题是你必须明确地把它还给系统，以免它*泄漏*。在 C 中，这非常困难并且需要严格。在 C++ 中，虽然使用*智能指针*更容易。所以让我们使用这些！

```
struct Node {
    Node(Node* p, int k): parent(p), key(k) {}

    Node* parent;
    std::unique_ptr<Node> left, right;
    int key;
};

// Note: I added a *constructor* to the type to initialize `parent` and `key`
// without proper initialization they would have some garbage value. 
```

注意 和 的不同`parent`声明`left`？父级拥有其子级 ( `unique_ptr`)，而子级仅指其父级。

```
void insert(std::unique_ptr<Node>& root, const int key)
{
    if (root.get() == nullptr) {
        root.reset(new Node{nullptr, key});
        return;
    }

    Node* parent = root.get();
    Node* y = nullptr;

    while(parent)
    {
        if(key == parent->key) exit(EXIT_FAILURE);
        y = parent;
        parent = (key < parent->key) ? parent->left.get() : parent->right.get();
    }

    if (key < y->key) { y->left.reset(new Node{y, key}); }
    else              { y->right.reset(new Node{y, key}); }
} 
```

如果您不知道是什么`unique_ptr`，`get()`它只包含一个分配的对象，`new`并且该`get()`方法返回一个指向该对象的指针。您还可以`reset`使用它的内容（在这种情况下，它会正确处理它已经包含的对象，如果有的话）。

我会注意到我不太确定你的算法，但是嘿，这是你的:)

**2 竞技场**

如果这种处理记忆的方法让你一头雾水，那一开始是很正常的，这就是为什么有时竞技场可能更容易使用的原因。使用竞技场的想法很笼统。而不是逐个地打扰内存所有权，而是使用“某物”来保留内存，然后只操作对这些片段的引用（或指针）。您只需要记住，只要竞技场存在，这些引用/指针就一直存在。

```
struct Node {
    Node(): parent(nullptr), left(nullptr), right(nullptr), key(0) {}

    Node* parent;
    Node* left;
    Node* right;
    int key;
};

void insert(std::list<Node>& arena, Node *&root, const int key)
{
    arena.push_back(Node{});         // add a new node
    Node& newElement = arena.back(); // get a reference to it.
    newElement.key = key;

    Node *y = NULL;
    while(root)
    {
        if(key == root->key) exit(EXIT_FAILURE);
        y = root;
        root = (key < root->key) ? root->left : root->right;
    }

    newElement.p = y;

    if(!y) root = &newElement;
    else if(key < y->key) y->left = &newElement;
    else y->right = &newElement;
} 
```

只要记住两件事：

*   一旦你的竞技场死了，你所有的引用/指针都指向以太，如果你尝试使用它们，就会发生坏事
*   如果您只将东西推入`arena`，它会增长，直到耗尽所有可用内存并且您的程序崩溃；在某些时候你需要*清理*！

# windows - 从 Windows 应用商店应用程序中的 keydown 事件调用时，execCommand 不会触发

> ID：16119318
> 
> 赞同：1
> 
> 时间：2013-04-20T10:32:32.270
> 
> 标签：windows, html, windows-store-apps, onkeydown

我正在编写一个 Windows 商店应用程序 (HTML)，其中包括一些简单的富文本编辑。我可以使用触发的按钮将粗体应用于当前选择的`document.execCommand("bold",false,null);`

但是，当我将它绑定到 CTRL+B 之类的 keydown 事件时，什么也没有发生。这是我的按键代码。

```
document.addEventListener("keydown", catchShortCuts, false);

function catchShortCuts(e) {
    if (e.ctrlKey) {
        if (e.keyCode == 66) // b
            document.execCommand('bold', true, null);
        }
    }
} 
```

我知道我的 keydown 代码工作正常，因为如果我`document.execCommand`用另一行代码替换它，当我按下 CTRL+B 时它会很好地触发。好像 execCommand 的 keydown 事件有问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:32:32.270

事实证明，如果您使用**keypress**而不是**keydown** ，它可以正常工作。以防万一其他人有同样的问题，这是一种解决方法。仍然不确定为什么 onkeydown 不起作用。

工作代码：

```
document.addEventListener("keypress", catchShortCuts, false);

function catchShortCuts(e) {
    if (e.ctrlKey) {
        if (e.keyCode == 66) // b
            document.execCommand('bold', true, null);
        }
    }
} 
```

# php - PHP 表单，如何在同一页面中返回错误，而不是在新页面上返回 die()？

> ID：16119323
> 
> 赞同：1
> 
> 时间：2013-04-20T10:32:53.787
> 
> 标签：php, forms, output

一直试图在表单的同一页面上输出错误，我使用的是 PHP 表单。

```
<?php 

    // First we execute our common code to connection to the database and start the session 
    require("common.php"); 

    // This if statement checks to determine whether the registration form has been submitted 
    // If it has, then the registration code is run, otherwise the form is displayed 
    if(!empty($_POST)) 
    { 

        // Ensure that the user has entered a non-empty name 
        if(empty($_POST['full_name'])) 
        { 
            return("Please enter your full name."); 
        } 

        // Ensure that the user has entered a non-empty username 
        if(empty($_POST['username'])) 
        { 
            // Note that die() is generally a terrible way of handling user errors 
            // like this.  It is much better to display the error with the form 
            // and allow the user to correct their mistake.  However, that is an 
            // exercise for you to implement yourself. 
            //die("Please enter a username."); 
            return("PUFTA KOLLOK");
        } 

        // Ensure that the user has entered a non-empty password 
        if(empty($_POST['password'])) 
        { 
            die("Please enter a password."); 
        } 

        // Make sure the user entered a valid E-Mail address 
        // filter_var is a useful PHP function for validating form input, see: 
        // http://us.php.net/manual/en/function.filter-var.php 
        // http://us.php.net/manual/en/filter.filters.php 
        if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) 
        { 
            die("Invalid E-Mail Address"); 
        } 

        // We will use this SQL query to see whether the username entered by the 
        // user is already in use.  A SELECT query is used to retrieve data from the database. 
        // :username is a special token, we will substitute a real value in its place when 
        // we execute the query. 
        $query = " 
            SELECT 
                1 
            FROM users_pharm
            WHERE 
                username = :username 
        "; 

        // This contains the definitions for any special tokens that we place in 
        // our SQL query.  In this case, we are defining a value for the token 
        // :username.  It is possible to insert $_POST['username'] directly into 
        // your $query string; however doing so is very insecure and opens your 
        // code up to SQL injection exploits.  Using tokens prevents this. 
        // For more information on SQL injections, see Wikipedia: 
        // http://en.wikipedia.org/wiki/SQL_Injection 
        $query_params = array( 
            ':username' => $_POST['username'] 
        ); 

        try 
        { 
            // These two statements run the query against your database table. 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            // Note: On a production website, you should not output $ex->getMessage(). 
            // It may provide an attacker with helpful information about your code.  
            die("Failed to run query: " . $ex->getMessage()); 
        } 

        // The fetch() method returns an array representing the "next" row from 
        // the selected results, or false if there are no more rows to fetch. 
        $row = $stmt->fetch(); 

        // If a row was returned, then we know a matching username was found in 
        // the database already and we should not allow the user to continue. 
        if($row) 
        { 
            die("This username is already in use"); 
        } 

        // Now we perform the same type of check for the email address, in order 
        // to ensure that it is unique. 
        $query = " 
            SELECT 
                1 
            FROM users_pharm 
            WHERE 
                email = :email 
        "; 

        $query_params = array( 
            ':email' => $_POST['email'] 
        ); 

        try 
        { 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            die("Failed to run query: " . $ex->getMessage()); 
        } 

        $row = $stmt->fetch(); 

        if($row) 
        { 
            die("This email address is already registered"); 
        } 

        // An INSERT query is used to add new rows to a database table. 
        // Again, we are using special tokens (technically called parameters) to 
        // protect against SQL injection attacks. 
        $query = " 
            INSERT INTO users_pharm ( 
                username, 
                password, 
                salt, 
                email,
                full_name,
                pharmacy    
            ) VALUES ( 
                :username, 
                :password, 
                :salt, 
                :email,
                :full_name,
                :pharmacy

            ) 
        "; 

        // A salt is randomly generated here to protect again brute force attacks 
        // and rainbow table attacks.  The following statement generates a hex 
        // representation of an 8 byte salt.  Representing this in hex provides 
        // no additional security, but makes it easier for humans to read. 
        // For more information: 
        // http://en.wikipedia.org/wiki/Salt_%28cryptography%29 
        // http://en.wikipedia.org/wiki/Brute-force_attack 
        // http://en.wikipedia.org/wiki/Rainbow_table 
        $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647)); 

        // This hashes the password with the salt so that it can be stored securely 
        // in your database.  The output of this next statement is a 64 byte hex 
        // string representing the 32 byte sha256 hash of the password.  The original 
        // password cannot be recovered from the hash.  For more information: 
        // http://en.wikipedia.org/wiki/Cryptographic_hash_function 
        $password = hash('sha256', $_POST['password'] . $salt); 

        // Next we hash the hash value 65536 more times.  The purpose of this is to 
        // protect against brute force attacks.  Now an attacker must compute the hash 65537 
        // times for each guess they make against a password, whereas if the password 
        // were hashed only once the attacker would have been able to make 65537 different  
        // guesses in the same amount of time instead of only one. 
        for($round = 0; $round < 65536; $round++) 
        { 
            $password = hash('sha256', $password . $salt); 
        } 

        // Here we prepare our tokens for insertion into the SQL query.  We do not 
        // store the original password; only the hashed version of it.  We do store 
        // the salt (in its plaintext form; this is not a security risk). 
        $query_params = array( 
            ':username' => $_POST['username'], 
            ':password' => $password, 
            ':salt' => $salt, 
            ':email' => $_POST['email'],
            ':full_name' => $_POST['full_name'],
            ':pharmacy' => $_POST['pharmacy']   

        ); 

        try 
        { 
            // Execute the query to create the user 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            // Note: On a production website, you should not output $ex->getMessage(). 
            // It may provide an attacker with helpful information about your code.  
            die("Failed to run query: " . $ex->getMessage()); 
        } 

        // This redirects the user back to the login page after they register 
        header("Location: login.php"); 

        // Calling die or exit after performing a redirect using the header function 
        // is critical.  The rest of your PHP script will continue to execute and 
        // will be sent to the user if you do not die or exit. 
        die("Redirecting to login.php"); 
    } 

?> 
<html>
<head>
<!--document's CSS styling -->
<link href="css/testcss.css" rel="stylesheet" type="text/css" />
</head>

<div id="header" style="text-align:left">
<body>
<h1>Pharmacists Registration</h1> 
<form action="register2.php" method="post"> <br />

    Full Name:<br />
    <input type="text" name="full_name" value="" /> 
    <br /><br /> 

    Username:<br /> 
    <input type="text" name="username" value="" /> 
    <br /><br /> 

    Pharmacy :<br /> 
    <input type="text" name="pharmacy" value="" /> 
    <br /><br /> 

    E-Mail:<br /> 
    <input type="text" name="email" value="" /> 
    <br /><br /> 

    Password:<br /> 
    <input type="password" name="password" value="" /> 
    <br /><br /> 

    <table>
        <tr>
    <input type="submit" value="Register" /> 
</form>
<form action="login.php" method="post">
    <input type="submit" value="Back">
</form>
</body>
</div>

</html> 
```

已经研究并发现了有关 ajax 的信息，但无法从头开始修改表单。也尝试过 print()、return() error()，但除了在新页面上返回空白的 return 之外，我都在新页面上返回错误。

这是能够执行我需要的登录页面，即在同一页面上显示错误。已尝试深入实现这一目标..但我注意到的是验证在大括号中并且只是触发一个布尔值。如果错误打印错误..但我已经尝试了 print() 但它在表单的新页面上实现了输出，但在登录的同一页面上实现了输出......这是登录页面的代码..

```
<?php 

    // First we execute our common code to connection to the database and start the session 
    require("common.php"); 

    error_reporting(0);

    // This variable will be used to re-display the user's username to them in the 
    // login form if they fail to enter the correct password.  It is initialized here 
    // to an empty value, which will be shown if the user has not submitted the form. 
    $submitted_username = ''; 

    // This if statement checks to determine whether the login form has been submitted 
    // If it has, then the login code is run, otherwise the form is displayed 
    if(!empty($_POST)) 
    { 
        if($_POST['login_type']=="doctor_login") {

        // This query retreives the user's information from the database using 
        // their username. 
        $query = " 
            SELECT 
                id, 
                username, 
                password, 
                salt, 
                email,
                full_name
            FROM users 
            WHERE 
                username = :username 
        "; 

        // The parameter values 
        $query_params = array( 
            ':username' => $_POST['username'] 
        ); 

        try 
        { 
            // Execute the query against the database 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            // Note: On a production website, you should not output $ex->getMessage(). 
            // It may provide an attacker with helpful information about your code.  
            die("Failed to run query: " . $ex->getMessage()); 
        } 

        // This variable tells us whether the user has successfully logged in or not. 
        // We initialize it to false, assuming they have not. 
        // If we determine that they have entered the right details, then we switch it to true. 
        $login_ok = false; 

        // Retrieve the user data from the database.  If $row is false, then the username 
        // they entered is not registered. 
        $row = $stmt->fetch(); 
        if($row) 
        { 
            // Using the password submitted by the user and the salt stored in the database, 
            // we now check to see whether the passwords match by hashing the submitted password 
            // and comparing it to the hashed version already stored in the database. 
            $check_password = hash('sha256', $_POST['password'] . $row['salt']); 
            for($round = 0; $round < 65536; $round++) 
            { 
                $check_password = hash('sha256', $check_password . $row['salt']); 
            } 

            if($check_password === $row['password']) 
            { 
                // If they do, then we flip this to true 
                $login_ok = true; 
            } 
        } 

        // If the user logged in successfully, then we send them to the private members-only page 
        // Otherwise, we display a login failed message and show the login form again 
        if($login_ok) 
        { 
            // Here I am preparing to store the $row array into the $_SESSION by 
            // removing the salt and password values from it.  Although $_SESSION is 
            // stored on the server-side, there is no reason to store sensitive values 
            // in it unless you have to.  Thus, it is best practice to remove these 
            // sensitive values first. 
            unset($row['salt']); 
            unset($row['password']); 

            // This stores the user's data into the session at the index 'user'. 
            // We will check this index on the private members-only page to determine whether 
            // or not the user is logged in.  We can also use it to retrieve 
            // the user's details. 
            $_SESSION['user'] = $row; 

            // Redirect the user to the private members-only page. 
            header("Location: private.php"); 
            die("Redirecting to: private.php"); 
        } 
        else 
        { 
            // Tell the user they failed 
            print("Login Failed."); 

            // Show them their username again so all they have to do is enter a new 
            // password.  The use of htmlentities prevents XSS attacks.  You should 
            // always use htmlentities on user submitted values before displaying them 
            // to any users (including the user that submitted them).  For more information: 
            // http://en.wikipedia.org/wiki/XSS_attack 
            $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8'); 
        }
        }

        else if($_POST['login_type']=="pharmacist_login")
        {

            // This query retreives the user's information from the database using 
        // their username. 
        $query = " 
            SELECT 
                id, 
                username, 
                password, 
                salt, 
                email,
                full_name
            FROM users_pharm 
            WHERE 
                username = :username 
        "; 

        // The parameter values 
        $query_params = array( 
            ':username' => $_POST['username'] 
        ); 

        try 
        { 
            // Execute the query against the database 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            // Note: On a production website, you should not output $ex->getMessage(). 
            // It may provide an attacker with helpful information about your code.  
            die("Failed to run query: " . $ex->getMessage() ); 
        } 

        // This variable tells us whether the user has successfully logged in or not. 
        // We initialize it to false, assuming they have not. 
        // If we determine that they have entered the right details, then we switch it to true. 
        $login_ok = false; 

        // Retrieve the user data from the database.  If $row is false, then the username 
        // they entered is not registered. 
        $row = $stmt->fetch(); 
        if($row) 
        { 
            // Using the password submitted by the user and the salt stored in the database, 
            // we now check to see whether the passwords match by hashing the submitted password 
            // and comparing it to the hashed version already stored in the database. 
            $check_password = hash('sha256', $_POST['password'] . $row['salt']); 
            for($round = 0; $round < 65536; $round++) 
            { 
                $check_password = hash('sha256', $check_password . $row['salt']); 
            } 

            if($check_password === $row['password']) 
            { 
                // If they do, then we flip this to true 
                $login_ok = true; 
            } 
        } 

        // If the user logged in successfully, then we send them to the private members-only page 
        // Otherwise, we display a login failed message and show the login form again 
        if($login_ok) 
        { 
            // Here I am preparing to store the $row array into the $_SESSION by 
            // removing the salt and password values from it.  Although $_SESSION is 
            // stored on the server-side, there is no reason to store sensitive values 
            // in it unless you have to.  Thus, it is best practice to remove these 
            // sensitive values first. 
            unset($row['salt']); 
            unset($row['password']); 

            // This stores the user's data into the session at the index 'user'. 
            // We will check this index on the private members-only page to determine whether 
            // or not the user is logged in.  We can also use it to retrieve 
            // the user's details. 
            $_SESSION['user'] = $row; 

            // Redirect the user to the private members-only page. 
            header("Location: private2.php"); 
            die("Redirecting to: private2.php"); 
        } 
        else 
        { 
            // Tell the user they failed 
            print("Login Failed."); 

            // Show them their username again so all they have to do is enter a new 
            // password.  The use of htmlentities prevents XSS attacks.  You should 
            // always use htmlentities on user submitted values before displaying them 
            // to any users (including the user that submitted them).  For more information: 
            // http://en.wikipedia.org/wiki/XSS_attack 
            $submitted_username = htmlentities($_POST['username'], ENT_QUOTES, 'UTF-8'); 
        }

        }
    } 

?> 

<html>

<head>
<!--document's CSS styling -->
<link href="css/testcss.css" rel="stylesheet" type="text/css" />
</head>

<body>

<div id="header" style="text-align:left">
<br />
<h1>Login</h1> 
<form action="login.php" method="post"> 
    Username:<br /> 
    <input type="text" name="username" value="<?php echo $submitted_username; ?>" /> 
    <br /><br /> 
    Password:<br /> 
    <input type="password" name="password" value="" /> 
    <br /><br /> 
    <!--<form>-->
        <input type="radio" name="login_type" value="pharmacist_login" id="pharmacist_login"/> Pharmacist Login
        <br /><input type="radio" name="login_type" value="doctor_login" id="doctor_login"/> G.P Login<br />
    <!--</form>-->
    <br />
    <input type="submit" value="Login" /> 

    <form action="forgotpassword.php" method="post"> 
    <input type="submit" value="Forgot Password" /> 
    </form>

</form> 

<br />
<a href="register.php">General Practitioner's Registration</a>
<br />
<a href="register2.php">Pharmacist's Registration</a>
<br />
<a href="forgot_password.php">Forgot Password</a>
</div>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:04:40.530

当您使用从 $_POST 和 $_GET（或其他 PHP 编码）页面发送到服务器和当前页面从服务器的结果页面等待时。如果您的意思是在表单子句的同一页面上显示错误，您可以这样做（编辑您的代码）：

```
<?php 

    // First we execute our common code to connection to the database and start the session 
    require("common.php"); 

    // This if statement checks to determine whether the registration form has been submitted 
    // If it has, then the registration code is run, otherwise the form is displayed 
    $ErrorTest="";
    if(!empty($_POST)) 
    { 

        // Ensure that the user has entered a non-empty name 
        if(empty($_POST['full_name'])) 
        { 
            $ErrorTest="Please enter your full name.";
        } 

        // Ensure that the user has entered a non-empty username 
        if(empty($_POST['username'])) 
        { 
            // Note that die() is generally a terrible way of handling user errors 
            // like this.  It is much better to display the error with the form 
            // and allow the user to correct their mistake.  However, that is an 
            // exercise for you to implement yourself. 
            //die("Please enter a username."); 
            $ErrorTest .="PUFTA KOLLOK";
        } 

        // Ensure that the user has entered a non-empty password 
        if(empty($_POST['password'])) 
        { 
            $ErrorTest.="Please enter a password."; 
        } 

        // Make sure the user entered a valid E-Mail address 
        // filter_var is a useful PHP function for validating form input, see: 
        // http://us.php.net/manual/en/function.filter-var.php 
        // http://us.php.net/manual/en/filter.filters.php 
        if ($ErrorTest=="")  // add this line where you want avoid run

        if(!filter_var($_POST['email'], FILTER_VALIDATE_EMAIL)) 
        { 
           $ErrorTest="Invalid E-Mail Address"=; 

        // We will use this SQL query to see whether the username entered by the 
        // user is already in use.  A SELECT query is used to retrieve data from the database. 
        // :username is a special token, we will substitute a real value in its place when 
        // we execute the query. 
        $query = " 
            SELECT 
                1 
            FROM users_pharm
            WHERE 
                username = :username 
        "; 

        // This contains the definitions for any special tokens that we place in 
        // our SQL query.  In this case, we are defining a value for the token 
        // :username.  It is possible to insert $_POST['username'] directly into 
        // your $query string; however doing so is very insecure and opens your 
        // code up to SQL injection exploits.  Using tokens prevents this. 
        // For more information on SQL injections, see Wikipedia: 
        // http://en.wikipedia.org/wiki/SQL_Injection 
        if ($ErrorTest=="")

        $query_params = array( 
            ':username' => $_POST['username'] 
        ); 

        try 
        { 
            // These two statements run the query against your database table. 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            // Note: On a production website, you should not output $ex->getMessage(). 
            // It may provide an attacker with helpful information about your code.  
            $ErrorTest="Failed to run query: " . $ex->getMessage()); 
        } 

        // The fetch() method returns an array representing the "next" row from 
        // the selected results, or false if there are no more rows to fetch. 

        $row = $stmt->fetch(); 

        // If a row was returned, then we know a matching username was found in 
        // the database already and we should not allow the user to continue. 

        if($row) 
        { 
            $ErrorTest="This username is already in use"; 
        } 

        // Now we perform the same type of check for the email address, in order 
        // to ensure that it is unique. 
        $query = " 
            SELECT 
                1 
            FROM users_pharm 
            WHERE 
                email = :email 
        "; 

        $query_params = array( 
            ':email' => $_POST['email'] 
        ); 

        try 
        { 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            $ErrorTest="Failed to run query: " . $ex->getMessage(); 
        } 

        $row = $stmt->fetch(); 

        if($row) 
        { 
            $ErrorTest="This email address is already registered"; 
        } 

        // An INSERT query is used to add new rows to a database table. 
        // Again, we are using special tokens (technically called parameters) to 
        // protect against SQL injection attacks. 
        $query = " 
            INSERT INTO users_pharm ( 
                username, 
                password, 
                salt, 
                email,
                full_name,
                pharmacy    
            ) VALUES ( 
                :username, 
                :password, 
                :salt, 
                :email,
                :full_name,
                :pharmacy

            ) 
        "; 

        // A salt is randomly generated here to protect again brute force attacks 
        // and rainbow table attacks.  The following statement generates a hex 
        // representation of an 8 byte salt.  Representing this in hex provides 
        // no additional security, but makes it easier for humans to read. 
        // For more information: 
        // http://en.wikipedia.org/wiki/Salt_%28cryptography%29 
        // http://en.wikipedia.org/wiki/Brute-force_attack 
        // http://en.wikipedia.org/wiki/Rainbow_table 
        $salt = dechex(mt_rand(0, 2147483647)) . dechex(mt_rand(0, 2147483647)); 

        // This hashes the password with the salt so that it can be stored securely 
        // in your database.  The output of this next statement is a 64 byte hex 
        // string representing the 32 byte sha256 hash of the password.  The original 
        // password cannot be recovered from the hash.  For more information: 
        // http://en.wikipedia.org/wiki/Cryptographic_hash_function 
        $password = hash('sha256', $_POST['password'] . $salt); 

        // Next we hash the hash value 65536 more times.  The purpose of this is to 
        // protect against brute force attacks.  Now an attacker must compute the hash 65537 
        // times for each guess they make against a password, whereas if the password 
        // were hashed only once the attacker would have been able to make 65537 different  
        // guesses in the same amount of time instead of only one. 
        for($round = 0; $round < 65536; $round++) 
        { 
            $password = hash('sha256', $password . $salt); 
        } 

        // Here we prepare our tokens for insertion into the SQL query.  We do not 
        // store the original password; only the hashed version of it.  We do store 
        // the salt (in its plaintext form; this is not a security risk). 
        $query_params = array( 
            ':username' => $_POST['username'], 
            ':password' => $password, 
            ':salt' => $salt, 
            ':email' => $_POST['email'],
            ':full_name' => $_POST['full_name'],
            ':pharmacy' => $_POST['pharmacy']   

        ); 

        try 
        { 
            // Execute the query to create the user 
            $stmt = $db->prepare($query); 
            $result = $stmt->execute($query_params); 
        } 
        catch(PDOException $ex) 
        { 
            // Note: On a production website, you should not output $ex->getMessage(). 
            // It may provide an attacker with helpful information about your code.  
            $ErrorTest="Failed to run query: " . $ex->getMessage(); 
        } 

        // This redirects the user back to the login page after they register 
        header("Location: login.php"); 

        // Calling die or exit after performing a redirect using the header function 
        // is critical.  The rest of your PHP script will continue to execute and 
        // will be sent to the user if you do not die or exit. 
        $ErrorTest="Redirecting to login.php"; 
    } 

?> 
<html>
<head>
<!--document's CSS styling -->
<link href="css/testcss.css" rel="stylesheet" type="text/css" />
</head>

<div id="header" style="text-align:left">
<body>
<h1>Pharmacists Registration</h1> 
<?php>
if ($ErrorTest!="")
  echo "<br />Error:".$ErrorTest."<br />";
if (empty($_POST) || $ErrorTest!="" ) 
{
<?>
<form action="register2.php" method="post"> <br />

    Full Name:<br />
    <input type="text" name="full_name" value="" /> 
    <br /><br /> 

    Username:<br /> 
    <input type="text" name="username" value="" /> 
    <br /><br /> 

    Pharmacy :<br /> 
    <input type="text" name="pharmacy" value="" /> 
    <br /><br /> 

    E-Mail:<br /> 
    <input type="text" name="email" value="" /> 
    <br /><br /> 

    Password:<br /> 
    <input type="password" name="password" value="" /> 
    <br /><br /> 

    <table>
        <tr>
    <input type="submit" value="Register" /> 
</form>
<?php>
}
<?>
<form action="login.php" method="post">
    <input type="submit" value="Back">
</form>
</body>
</div>

</html> 
```

您可以在代码中使用您想要的 if 条件

```
 if ($ErrorTest=="")
      do next step 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:50:31.130

您必须在 register2.php 中编写代码的上半部分，并使用 session 和 header 在同一页面中返回，如下所示。

```
 session_start();
 if(!empty($_POST))
 {
    if(empty($_POST['full_name']))
    {
        $_SESSION['error'] = "Please enter your full name.";
        header("Location: pagename.php");
    } else {
        $_SESSION["full_name"] = $_POST["full_name"];
    }
    if(empty($_POST['password']))
    {
        $_SESSION["error"] = "Please enter a password.";
        header("Location:pagename.php");
    } 
} 
```

在 pagename.php 中，您可以检索用户在上一页中输入的数据，如下所示：

```
session_start();
$full_name = $_SESSION["full_name"]; 
$error = $_SESSION["error"]; 
```

希望这能解决您的问题。此外，如果你想做 javascript 验证，那么有一个不错的 jquery 插件可用。[请参阅http://demos.usejquery.com/ketchup-plugin/](http://demos.usejquery.com/ketchup-plugin/)上的文档和演示

# vb.net - 一次用数据填充多个文本框

> ID：16119324
> 
> 赞同：0
> 
> 时间：2013-04-20T10:32:57.877
> 
> 标签：vb.net, textbox

我有一个包含 6 个组框的表单，每个组框包含 180 个文本框，以及两个组合框。从第一个组合框中选择一个值后，第二个组合框将填充表中所需的数据。我的要求是，从第二个组合框中选择一个值后，来自同一个表的过滤数据应该填充剩余的文本框。我正在使用的代码如下：

```
 Private Sub ComboBox2_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ComboBox2.SelectedIndexChanged
    Dim strConnection As String = "Provider=Microsoft.Jet.OleDb.4.0; Data Source=c:\\users\\brisingr\\documents\\123\database.mdb"
    Dim objConnection As New OleDbConnection(strConnection)

    Dim strsql As String
    'strsql = "Select * from '" & ComboBox1.Text & "' where Style = '" & ComboBox2.Text & " '"
    Dim a As String
    Dim b As String
    Dim c As String
    Dim d As String
    a = "Select * from ["
    b = ComboBox1.Text
    c = "] where Style = ["
    d = ComboBox2.Text
    strsql = a & b & c & d & "]"
    Dim objCommand As New OleDbCommand(strsql, objConnection)

    Dim objDataAdapter As New OleDbDataAdapter(objCommand)
    Dim objDataTable As New DataTable("Buyers")
    objDataAdapter.Fill(objDataTable)

    objConnection.Close()
    objConnection.Dispose()
    objConnection = Nothing
    objCommand.Dispose()
    objCommand = Nothing
    objDataAdapter.Dispose()
    objDataAdapter = Nothing

    For i As Integer = 1 To 60
        Me.Controls("L1Ob" & i).Text = objDataTable.Rows(0)("Operation" & i)
    Next

End Sub 
```

这里的“Operation” & (i) 指的是数据库的字段名，已经命名为 operation1、operation2 等等……

这段代码似乎对我不起作用。请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:57:58.787

这里我们有很多问题

```
Dim a As String
Dim b As String
Dim c As String
Dim d As String
a = "Select * from ["
b = ComboBox1.Text
c = "] where Style = ["
d = ComboBox2.Text
strsql = a & b & c & d & "]"
Dim objCommand As New OleDbCommand(strsql, objConnection) 
```

首先，为 field 传递的值周围有方括号`Style`。
这不是一个有效的语法。Jet 引擎假定这是一个参数。实际上，传递参数是正确的方法。

```
a = "Select * from [" 
b = ComboBox1.Text
c = "] where Style = ?"
strsql = a & b & c
Dim objCommand As New OleDbCommand(strsql, objConnection)
objCommand.Parameters.AddWithValue("@p1", ComboBox2.Text)
Dim objDataAdapter As New OleDbDataAdapter(objCommand)
Dim objDataTable As New DataTable("Buyers")
objDataAdapter.Fill(objDataTable) 
```

该字段的值`Style`通过参数传递。这留下了用从组合框获取到框架的值替换占位符 (?) 的工作。
您可以确定它知道更好地避免错误和 sql 注入。

这段代码仍然很弱。您应该绝对确定第一个 combobox1 的内容不能被修改为包含恶意文本而不是表名

# python - 是否有诸如 ODBC 驱动程序之类的东西可以连接到任何 SQL-92 数据库？

> ID：16119329
> 
> 赞同：0
> 
> 时间：2013-04-20T10:33:25.477
> 
> 标签：python, sql, odbc, standards, 4d-database

如果数据库已写入**SQL-92 标准**，为什么它需要专有驱动程序？

是否有 Python 库可以让我与标准 SQL-92 数据库进行交互？

数据库是 4D v12 SQL，他们没有我需要的 Mac 的 64 位驱动程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:26:55.430

问题在于，虽然 SQL 是一种标准，但它没有指定数据必须如何在线传输，也没有指定开始时必须协商连接的方式。因此，服务器实现自己的协议。[ODBC](http://en.m.wikipedia.org/wiki/ODBC)在程序级别（中间件）提供了一种与 DB 驱动程序交互的标准方式，但驱动程序必须实现该专有胶水才能与供应商服务器连接。

如果系统上有可用的 ODBC 驱动程序，则任何能够使用 ODBC API 的库都应该能够访问它，从而访问已处理的 DB。

关于您的具体问题，似乎[存在这样的驱动程序](http://www.4d.com/downloads/products.html)。但是此时我无法访问引用它的页面。[此其他页面](http://4d.1045681.n5.nabble.com/ODBC-connection-to-4D-v12-on-OS-X-td5709302.html)提供有关如何正确安装驱动程序的指导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T18:06:28.853

关于**“数据库是 4D v12 SQL，他们没有我需要的 Mac 的 64 位驱动程序”**：

4D 从 v15 开始为 Mac OS X 平台引入了 64 位 ODBC 驱动程序，该驱动程序最初于 2015 年 7 月 16 日发布。

这可从此处的下载页面获得：
[http ://www.4d.com/downloads/products.html](http://www.4d.com/downloads/products.html)

请记住，为了使用 v15 ODBC 驱动程序，您还需要将 4D 服务器更新到 v15，因为驱动程序和服务器的版本应该匹配。

# javascript - 你能修复屏幕上的滚动条吗？

> ID：16119330
> 
> 赞同：0
> 
> 时间：2013-04-20T10:33:27.120
> 
> 标签：javascript, html, css

我有一个高度大于屏幕的 div，我想保持原样，但是这个 div 在底部还有一个水平滚动条，直到用户一直向下滚动，这个滚动条才可见，并且这个有点奇怪。您必须向下滚动，向右滚动，然后向上滚动以查看您需要的内容。所以我想知道是否有办法修复屏幕底部的底部滚动条，以便用户随时可以使用它。

这是两个打印件来证明我的问题

我现在拥有的：http: [//imageshack.us/a/img132/2087/38417747.png](http://imageshack.us/a/img132/2087/38417747.png)

我想让它看起来如何：http: [//imageshack.us/a/img267/7452/90387247.png](http://imageshack.us/a/img267/7452/90387247.png)

我打算自己使用 jQuery 设计一个滚动条，但我想知道这是否可行，无需付出太多努力。

示例：给你：jsfiddle.net/jy3HK/

另外，请尝试在不修改的情况下回答我的问题。我希望我的应用程序尽可能可定制。已经有一个取消底部滚动的选项，但我也想添加这个选项。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:59:39.623

这是很有可能的，但需要一种棘手的 JS 方法——据我估计，您的问题没有可能的 CSS 解决方案。

我在这里创建了一个小提琴 - [http://jsfiddle.net/teddyrised/szuzk/](http://jsfiddle.net/teddyrised/szuzk/)，这或多或少是对你原来的小提琴的概念验证修改，但在你离开之前，我恳请你理解我的方法第一的 ：）

您遇到的问题是滚动条位于滚动元素的底部，无论视口的高度如何。为了将滚动条带到视口的底部（而不是滚动元素），您必须调整元素的大小，使元素的底部始终位于视口的底部，而不是更低。

这是通过检测`.scroll`事件并随后在旅途中重新计算元素高度来完成的。但是，这也意味着该元素不会占用原本预期的 1500 像素高度 - 因此我们创建了一个环绕元素并将该高度分配给它。

```
$(document).ready(function () {
    // Create wrap around element
    $('#big').wrap('<div id="scroll-wrap" />');

    // Function: resize element when scrolling
    function recalcHeight() {
         $('#big').css({
             'height': $(window).height() + $(window).scrollTop() - $('#big').offset().top
         });       
    }

    // Resize wrap around element upon resize
    $(window).resize(function () {
        $('#scroll-wrap').css({
            'height': $('#big').css('max-height')
        });
    }).resize(); // Fires resize() event onload

    // Recalculate height upon load, and upon scroll
    recalcHeight();
    $(window).scroll(function () {
        recalcHeight();
    });
}); 
```

就这样 ;）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-23T05:35:37.767

我不知道为什么这些开发人员在处理 CSS 时总是给出一个大代码，如下所示：-

```
div.table-responsive {
   max-height: 100%;
   overflow: auto;
}
table {
  height: 450px;
}
<div class="table-responsive">
   <table>
     <tbody>
       <tr>
          <td></td>
       </tr>
     </tbody>
    </table>
</div> 
```

# c - 指针/函数参数问题？

> ID：16119331
> 
> 赞同：1
> 
> 时间：2013-04-20T10:33:29.857
> 
> 标签：c, pointers, c-strings

我正在制作一个小程序，它将使用通过动态数组实现的堆栈来检查短语是否具有平衡的括号和括号。到目前为止，我只是尝试将一个短语传递给 isBalanced 函数，然后尝试逐个打印出每个字符。当程序到达：

```
printf("%s\n", nextChar(s)); 
```

我收到分段错误和有关传递类型 char 和期望类型 int 的警告。非常感谢任何帮助。

```
char nextChar(char* s)
 {
        static int i = -1;
        char c;
        ++i;
        c = *(s+i);
        if ( c == '\0' )
            return '\0';
        else
            return c;
}

int isBalanced(char* s)
{
        while(nextChar(s) != 0){
             printf("%s\n", nextChar(s)); 
        }
        return 0;
}

int main(int argc, char* argv[])
{
        char* s=argv[1];
        int res;
        res = isBalanced(s);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:54:29.510

`printf``char *`但是， 期望此代码

```
printf("%s", nextChar(s)); 
```

给出`char`，因为`nextChar(s)`返回`char`（如果你使用好的编译器，你必须得到警告）。

因此，将其更改为，

```
printf("%c\n", nextChar(s)); 
```

此外，您调用`nextChar(s)`了两次，失去了第一次调用的价值。
这应该可以满足您的期望：

```
int isBalanced(char* s)
{
        char ch;
        while((ch = nextChar(s)) != 0){
             printf("%c\n", ch); 
        }
        return 0;
} 
```

# loops - Imacro：如果 TAG 与页面上的任何元素都不匹配，如何跳过？

> ID：16119335
> 
> 赞同：0
> 
> 时间：2013-04-20T10:33:58.620
> 
> 标签：loops, extract, imacros

我希望我的代码打破循环，以防 TAG 与页面中的任何元素都不匹配，但这不起作用。

```
var result = "";
var counter = 1;
while(true)
{    
var ret_code = iimPlay("CODE:TAG POS="+counter+" TYPE=A ATTR=HREF:http://www.xxx.com/index.php?topic=*.0 EXTRACT=HREF",60);
    if(ret_code<0)
        break;
    s = iimGetLastExtract();    
    result += " "+s;    
    counter++;
} 
```

如果没有找到任何匹配的元素，TAG 代码会一次又一次地运行，而不是自行停止。

是否可以使用返回码来执行此操作以及如何操作？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T21:16:21.833

您的代码将永远不会停止，因为 ret_code 将始终为 1，因为您正在抓取数据，即使未找到元素，它也会成功抓取并返回等于“#EANF#”的默认值，以使此代码按您的意愿工作您需要将其拆分为 2 个步骤 - 第一步将检查元素是否存在，第二步将刮擦 - 这是示例：

```
var result = "";
var counter = 1;
while(true)
{    
iimSet("counter",counter);
var ret_code = iimPlay("CODE:TAG POS={{counter}} TYPE=A ATTR=HREF:http://www.xxx.com/index.php?topic=*.0");
    if(ret_code<0){break;}
iimSet("counter",counter);
ret_code = iimPlay("CODE:TAG POS={{counter}} TYPE=A ATTR=HREF:http://www.xxx.com/index.php?topic=*.0 extract=href");
    s = iimGetLastExtract();    
    result += " "+s;    
    counter++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T20:53:29.980

```
var result = "";
var counter = 1;
while(true)
{    
iimSet("counter",counter)
var ret_code = iimPlay("CODE:TAG POS={{counter}} TYPE=A ATTR=HREF:http://www.xxx.com/index.php?topic=*.0 EXTRACT=HREF",60);
    if(ret_code<0)
        break;
    s = iimGetLastExtract();    
    result += " "+s;    
    counter++;
} 
```

这个我见过几次

```
iimPlay("CODE:TAG POS="+counter+" TYPE=A ATTR=HREF:http://www.xxx.com/index.php?topic=*.0 EXTRACT=HREF",60) 
```

但我从来没有使用过这种方法。所以我把它改成了这个。

```
iimSet("counter",counter)
var ret_code = iimPlay("CODE:TAG POS={{counter}} TYPE=A ATTR=HREF:http://www.xxx.com/index.php?topic=*.0 EXTRACT=HREF",60) 
```

除此之外，我认为这没有错误。尝试一下，如果它不起作用，我们将尝试其他方法。

# multithreading - 与 dancer 同时服务多个用户的方法

> ID：16119336
> 
> 赞同：1
> 
> 时间：2013-04-20T10:34:01.063
> 
> 标签：multithreading, webserver, long-running-processes, dancer

出于某种原因，我找不到下面问题的答案，可能是因为它太明显了。

在我对 perl dancer 的实验中，我添加了一个路由，它只休眠 10 秒，然后返回一些东西。我这样做是为了模拟长时间运行的操作。我注意到，在这 10 秒内，舞者不会提供任何其他请求。我知道这是因为 dancer 是单线程的。

现在这种单线程方法显然不适用于要求不高的应用程序。所以我相信一定有很多既定的解决方案。但我似乎不知道谷歌搜索的正确搜索字符串。

为了清楚起见：我不介意，当初始化长时间运行的操作*本身*的请求被阻塞时。我想要的是所有*其他*请求都得到满足。

任何人都可以请教我

*   网络服务器传统上如何处理长时间运行的操作，而不阻塞其他请求？
*   每个会话是否会有线程/进程，或者线程/进程是否可以按需生成，在我知道操作需要很长时间的情况下
*   多线程时如何保留会话信息，即当浏览器不总是与同一个进程通信时？
*   关于舞者的任何具体建议（随时推荐舞者的替代品）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T00:13:07.833

*   这将取决于 Web 服务器和底层操作系统 - 这里有一个关于 Apache httpd 的答案：[什么是 Apache 进程模型？](https://stackoverflow.com/questions/2438543/what-is-apache-process-model)

*   请注意，“开箱即用”的 Dancer 使用 HTTP::Server::Simple，它是单线程的，但是，这不是唯一的选择。见[https://metacpan.org/module/Dancer::Deployment](https://metacpan.org/module/Dancer::Deployment)从 Apache CGI 开始的一系列 Dancer 部署选项，将为您的 Web 服务器提供并发性。如果您在 *nix 环境中工作，生成一个分离的进程将很容易 - 并且更难但在 Win32 上可能 - 但您可能需要通过 http 响应以外的其他机制将结果发送回客户端（例如 STOMP 或 websockets） . 另一种方法是从 Dancer 路由生成一个单独的长时间运行的进程，立即在该路由中向客户端返回一些查找键，然后让客户端轮询另一条路由以完成该过程。也许这个问题的答案是你需要在 Dancer 前面有一个可以处理并发请求的 Web 服务器。

*   您的浏览器会将会话信息存储在 cookie 中，而 Dancer 将在服务器上存储相应的会话信息，并且 Dancer 将匹配这些信息。这并没有回答第三个问题，只是说不要担心。

*   如果 Dancer 支持您的所有需求，除了并发/长时间运行的进程问题，那么听起来就像阅读您的 Web 服务器部署选项：[https](https://metacpan.org/module/Dancer::Deployment) ://metacpan.org/module/Dancer::Deployment可能会解决您的问题。请注意，如果您在 *nix 环境中，您将在基于 Perl 的并发 Web 服务器方面有更多选择，但我相信这个问题也可以在 Windows 上解决。我们使用 IIS + FastCGI 完成了一个概念验证。

# mysql - 使用 MySql 的实时谷歌图表

> ID：16119340
> 
> 赞同：0
> 
> 时间：2013-04-20T10:34:08.380
> 
> 标签：mysql, google-visualization

我正在做一个小的网络调查，我有一个表单，提交时将数据存储在 MySql 表中。在同一个网站上，我有几个谷歌饼图。从我的数据库中获取数据并将其传递给 google javascript 代码的最简单方法是什么？有人告诉我，我需要创建一个 php 文件，将我的数据存储到一个数组中，然后返回一个 JSON 字符串。有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T00:00:48.317

谷歌查询将只允许您从谷歌电子表格查询。如果您有一个 mysql 数据库，您将需要使用任何方法（最有可能是 php）返回一个 JSON 对象，然后将其提供给 google。

有很多方法可以做到这一点，所以请参阅 DataTable notation 的[文档](https://developers.google.com/chart/interactive/docs/reference#DataTable)以及如何向其中输入数据。

# opencart - 需要有关 Opencart 站点的 RewriteRule 的指导

> ID：16119342
> 
> 赞同：1
> 
> 时间：2013-04-20T10:34:36.657
> 
> 标签：opencart

我在旧根域的子目录中建立了一个新的 Opencart 商店：即。*[http://www.old-domain.com/opencart](http://www.old-domain.com/opencart)* 现在我有了一个新域名，它现在可以指向子目录：即。*[http://www.new-domain.com](http://www.new-domain.com)*（我已经正确更新了两个 config.php 文件）但是，单击任何内部链接会在地址栏中显示旧域 url。

因此，我需要用新名称替换（重写）旧名称的指导 - 同时仍保留正确的路径等。我已经进行了大量研究，并在我的 htaccess 中尝试了这个和那个但没有成功。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:41:13.650

问题是 OpenCart 安装在旧域上，因此该 URL 地址在其配置文件中设置为常量（定义）。

如果要更改它，请打开以下两个文件：

*   `<OPENCART_ROOT>/config.php`
*   `<OPENCART_ROOT>/admin/config.php`

并编辑这些定义：

```
// HTTP
define('HTTP_SERVER', 'http://olddomain.com/admin/');
define('HTTP_CATALOG', 'http://olddomain.com/');
define('HTTP_IMAGE', 'http://olddomain.com/image/');

// HTTPS
define('HTTPS_SERVER', 'http://olddomain.com/admin/');
define('HTTPS_CATALOG', 'http://olddomain.com/');
define('HTTPS_IMAGE', 'http://olddomain.com/image/'); 
```

至

```
// HTTP
define('HTTP_SERVER', 'http://newdomain.com/admin/');
define('HTTP_CATALOG', 'http://newdomain.com/');
define('HTTP_IMAGE', 'http://newdomain.com/image/');

// HTTPS
define('HTTPS_SERVER', 'http://newdomain.com/admin/');
define('HTTPS_CATALOG', 'http://newdomain.com/');
define('HTTPS_IMAGE', 'http://newdomain.com/image/'); 
```

（根目录中的配置文件没有那个`/admin/`URL 部分......）

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-23T10:59:49.953

我相信这是您在 .htaccess 中所需要的，因此旧域的访问者将被重定向到新域。R=301 假设您已永久移至新域。：

```
RewriteCond %{HTTP_HOST} ^olddomain.com$
RewriteRule ^opencart/(.*)$ http://newdomain.com/$1 [R=301,L] 
```

为确保所有内部链接都指向您需要的新域

1 - 更新您的 config.php 文件（您已经完成了

2 - 将旧域的内容（信息页面、产品描述、横幅等）中的所有出现替换为新域。phpMyAdmin 有一个方便的搜索功能，如果您可以访问它，可以找到它们。

3 -*可能*仍然有对旧域的引用硬编码到您的 php 和 tpl 文件中，但不应该存在 - 如果有的话，您也必须更改这些（或者最好还是修复它们以使用定义的常量在 config.php 中）

只是关于 #2 的警告 - 如果您打算直接在 phpMyAdmin 中更改这些，请不要更新任何序列化数组，除非您知道它们在做什么，例如

```
a:1:{i:1;a:1:{i:0;s:28:"http://olddomain.com/opencart"}} 
```

# javascript - 使用上下箭头键平滑滚动 x 个像素

> ID：16119348
> 
> 赞同：0
> 
> 时间：2013-04-20T10:35:06.780
> 
> 标签：javascript, jquery, html

我试图通过按确切数量的像素上下按箭头键来使整个 html 页面平滑滚动。（示例：我点击向下箭头，页面向下滚动 300 像素，然后我再次点击该箭头，它再次滚动 300 像素，然后我点击向上箭头键，它向上滚动 300 像素......）我创建了这些帖子：[类似的帖子](https://stackoverflow.com/questions/14156663/jquery-smoothdivscroll-and-arrow-keys) [类似的帖子 2](https://stackoverflow.com/questions/12316164/javascript-mootools-smooth-scroll-by-x-amount-of-pixels)，但我不知道如何使用箭头键。你能帮我么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:39:33.977

我不知道它是否对你有帮助..但是建议通过这个（jscrollpane.kelvinluck.com）[网站](http://jscrollpane.kelvinluck.com/)进行滚动，我已经修改了我的网页，在这个的帮助下有简单的滚动..

# c# - C# webbrowser - 触发右键单击

> ID：16119349
> 
> 赞同：1
> 
> 时间：2013-04-20T10:35:17.900
> 
> 标签：c#, javascript

我正在 Visual Studio 上编写一些代码，以便从网页中获取一些信息。现在我需要打开一个 html 元素的上下文菜单，我正在寻找类似的东西：

```
webbrowser.Navigate("javascript: document.getElementsByClassName('className')[1].rightclick();void(0);"); 
```

但不幸的是，我注意到 Javascript 中只存在 click() 函数。有什么解决方法吗？

谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:56:28.600

你可以通过流动的步骤来做到这一点：

1.  获取`web-browser control`表单上的位置：

    ```
    Point controlLoc = this.PointToScreen(webBrowser1.Location); 
    ```

2.  获取您`HtmlElement`在网络浏览器控件上的位置

    ```
    X= element.OffsetRectangle.Left;

    Y =element.OffsetRectangle.Top; 
    ```

3.  总结您的职位：

    ```
    controlLoc.X = controlLoc.X + element.OffsetRectangle.Left;

    controlLoc.Y = controlLoc.Y + element.OffsetRectangle.Top; 
    ```

4.  将鼠标位置设置为新位置：

    ```
    Cursor.Position = controlLoc; 
    ```

5.  模拟鼠标右键：

    ```
    MouseSimulator.ClickRightMouseButton(); 
    ```

**完整代码：**

```
public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();

        }

        private void Form1_Load(object sender, EventArgs e)
        {

            webBrowser1.DocumentText = "<button class=\"mybtn\" type=\"submit\"> Right click";
            webBrowser1.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(webBrowser1_DocumentCompleted);
        }

        void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            foreach (HtmlElement element in webBrowser1.Document.GetElementsByTagName("button"))
            {
                if (element.GetAttribute("ClassName") == "mybtn")
                {
                    Point controlLoc = this.PointToScreen(webBrowser1.Location);
                    //Get Element Posation
                    controlLoc.X= controlLoc.X + element.OffsetRectangle.Left;
                    controlLoc.Y = controlLoc.Y + element.OffsetRectangle.Top;
                    Cursor.Position = controlLoc;
                    MouseSimulator.ClickRightMouseButton();
                }
            }
        }
    }

    public class MouseSimulator
    {
        [DllImport("user32.dll", SetLastError = true)]
        static extern uint SendInput(uint nInputs, ref INPUT pInputs, int cbSize);

        [StructLayout(LayoutKind.Sequential)]
        struct INPUT
        {
            public SendInputEventType type;
            public MouseKeybdhardwareInputUnion mkhi;
        }
        [StructLayout(LayoutKind.Explicit)]
        struct MouseKeybdhardwareInputUnion
        {
            [FieldOffset(0)]
            public MouseInputData mi;

            [FieldOffset(0)]
            public KEYBDINPUT ki;

            [FieldOffset(0)]
            public HARDWAREINPUT hi;
        }
        [StructLayout(LayoutKind.Sequential)]
        struct KEYBDINPUT
        {
            public ushort wVk;
            public ushort wScan;
            public uint dwFlags;
            public uint time;
            public IntPtr dwExtraInfo;
        }
        [StructLayout(LayoutKind.Sequential)]
        struct HARDWAREINPUT
        {
            public int uMsg;
            public short wParamL;
            public short wParamH;
        }
        struct MouseInputData
        {
            public int dx;
            public int dy;
            public uint mouseData;
            public MouseEventFlags dwFlags;
            public uint time;
            public IntPtr dwExtraInfo;
        }
        [Flags]
        enum MouseEventFlags : uint
        {
            MOUSEEVENTF_MOVE = 0x0001,
            MOUSEEVENTF_LEFTDOWN = 0x0002,
            MOUSEEVENTF_LEFTUP = 0x0004,
            MOUSEEVENTF_RIGHTDOWN = 0x0008,
            MOUSEEVENTF_RIGHTUP = 0x0010,
            MOUSEEVENTF_MIDDLEDOWN = 0x0020,
            MOUSEEVENTF_MIDDLEUP = 0x0040,
            MOUSEEVENTF_XDOWN = 0x0080,
            MOUSEEVENTF_XUP = 0x0100,
            MOUSEEVENTF_WHEEL = 0x0800,
            MOUSEEVENTF_VIRTUALDESK = 0x4000,
            MOUSEEVENTF_ABSOLUTE = 0x8000
        }
        enum SendInputEventType : int
        {
            InputMouse,
            InputKeyboard,
            InputHardware
        }

        public static void ClickRightMouseButton()
        {
            INPUT mouseDownInput = new INPUT();
            mouseDownInput.type = SendInputEventType.InputMouse;
            mouseDownInput.mkhi.mi.dwFlags = MouseEventFlags.MOUSEEVENTF_RIGHTDOWN;
            SendInput(1, ref mouseDownInput, Marshal.SizeOf(new INPUT()));

            INPUT mouseUpInput = new INPUT();
            mouseUpInput.type = SendInputEventType.InputMouse;
            mouseUpInput.mkhi.mi.dwFlags = MouseEventFlags.MOUSEEVENTF_RIGHTUP;
            SendInput(1, ref mouseUpInput, Marshal.SizeOf(new INPUT()));
        }
    } 
```

**结果：**

![在此处输入图像描述](https://i.stack.imgur.com/3Nwti.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:09:22.270

您可以按照以下步骤

**步骤1**

创建一个新的 Windows 窗体应用程序并将一个`TextBox`和一个`ContextMenuStrip`控件拖到窗体上。将 TextBox 的 MultiLine 属性设置为 true，将 ContextMenuStrip 属性设置为 contextMenuStrip1，以覆盖 TextBox 的默认 ContextMenu（如下图所示）。看： ![在此处输入图像描述](https://i.stack.imgur.com/7MePR.jpg)

**第2步**

在 ContextMenuStrip 中添加六个菜单项，与 TextBox 控件的默认 ContextMenuStrip 一样，撤消、剪切、复制、粘贴、删除和“全选”，在撤消、删除和“全选”菜单项之后使用三个分隔符。在 ContextMenuStrip Font、Forecolor 和 Backcolor 中再添加三个菜单项，用于更改 TextBox 的字体、文本颜色和背景颜色。contextMenuStrip1 应如上图所示。添加上下文菜单可以参考我之前的文章。

将这些菜单项的 Name 属性设置为与其 Text 相同。就像菜单项“撤消”一样，将其名称设置为“撤消”。

**第 3 步**

在 contextMenuStrip1 的 Opening 事件中添加以下代码，根据特定条件禁用 ToolStripMenuItems（见注释）。看：

```
private void contextMenuStrip1_Opening(object sender, CancelEventArgs e)
{
    // Disable Undo if CanUndo property returns false
    if (textBox1.CanUndo)
    {
        contextMenuStrip1.Items["Undo"].Enabled = true;
    }
    else
    {
        contextMenuStrip1.Items["Undo"].Enabled = false;
    }

// Disable Cut, Copy and Delete if any text is not selected in TextBox
if (textBox1.SelectedText.Length == 0)
{
    contextMenuStrip1.Items["Cut"].Enabled = false;
    contextMenuStrip1.Items["Copy"].Enabled = false;
    contextMenuStrip1.Items["Delete"].Enabled = false;
}
else
{
    contextMenuStrip1.Items["Cut"].Enabled = true;
    contextMenuStrip1.Items["Copy"].Enabled = true;
    contextMenuStrip1.Items["Delete"].Enabled = true;
}

// Disable Paste if Clipboard does not contains text
if (Clipboard.ContainsText())
{
    contextMenuStrip1.Items["Paste"].Enabled = true;
}
else
{
    contextMenuStrip1.Items["Paste"].Enabled = false;
}

// Disable Select All if TextBox is blank
if (textBox1.Text.Length == 0)
{
    contextMenuStrip1.Items["SelectAll"].Enabled = false;
}
else
{
    contextMenuStrip1.Items["SelectAll"].Enabled = true;
} 
```

}

**第4步**

在 ToolStripMenuItems 的点击事件中添加如下代码：

```
private void Undo_Click(object sender, EventArgs e)
{
    textBox1.Undo();
}

private void Cut_Click(object sender, EventArgs e)
{
    textBox1.Cut();
}

private void Copy_Click(object sender, EventArgs e)
{
    textBox1.Copy();
}

private void Paste_Click(object sender, EventArgs e)
{
    textBox1.Paste();
}

private void Delete_Click(object sender, EventArgs e)
{
    int SelectionIndex = textBox1.SelectionStart;
    int SelectionCount = textBox1.SelectionLength;
    textBox1.Text = textBox1.Text.Remove(SelectionIndex, SelectionCount);
    textBox1.SelectionStart = SelectionIndex;
}

private void SelectAll_Click(object sender, EventArgs e)
{
    textBox1.SelectAll();
}

private void Font_Click(object sender, EventArgs e)
{
    FontDialog fontDialog = new FontDialog();
    if (fontDialog.ShowDialog() == DialogResult.OK)
    {
        textBox1.Font = fontDialog.Font;
    }
}

private void Forecolor_Click(object sender, EventArgs e)
{
    ColorDialog colorDialog = new ColorDialog();
    if (colorDialog.ShowDialog() == DialogResult.OK)
    {
        textBox1.ForeColor = colorDialog.Color;
    }
}

private void Backcolor_Click(object sender, EventArgs e)
{
    ColorDialog colorDialog = new ColorDialog();
    if (colorDialog.ShowDialog() == DialogResult.OK)
    {
        textBox1.BackColor = colorDialog.Color;
    }
} 
```

# javascript - 如果文本框最初是隐藏的并且应该仅在回发后显示，如何让谷歌位置自动完成工作

> ID：16119358
> 
> 赞同：1
> 
> 时间：2013-04-20T10:35:48.083
> 
> 标签：javascript, google-places

我有两个文本框，我需要使用谷歌地方自动完成功能。这些文本框包含在页面加载时隐藏的面板中。有一个可供选择的选项列表，一旦获得用户输入，隐藏面板就会显示出来。我都试过了

```
 Panel.visible = false; 
```

和

```
 Panel.Style["display"] = "none";
    Panel.Style["visibility"] = "hidden"; 
```

但两者都不起作用。隐藏面板后，文本框的自动完成功能将停止工作。我最初无法显示面板。有解决办法吗？我可以在特定回发后触发自动完成吗？还是有什么其他方式？这是我用于自动完成的 javascript

```
 <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<script type="text/javascript">
    var defaultBounds = new google.maps.LatLngBounds(
    new google.maps.LatLng(7.623887, 68.994141),
    new google.maps.LatLng(37.020098, 97.470703));
    var input1 = document.getElementById('ctl00_ReportContentPlaceHolder_txtLocality1');
    var input2 = document.getElementById('ctl00_ReportContentPlaceHolder_txtLocality2');
    var options = {
        bounds: defaultBounds,
        types: ['geocode'],
        componentRestrictions: { country: "IN" }
    };
    autocomplete1 = new google.maps.places.Autocomplete(input1, options);
    autocomplete2 = new google.maps.places.Autocomplete(input2, options);

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T10:38:18.047

我终于解决了我的问题......在这里找到了答案：[https ://stackoverflow.com/a/8851767/972821](https://stackoverflow.com/a/8851767/972821)

我有点意识到我必须在回发后重新初始化 javascript……但不确定它是如何完成的……谢谢 Aristos。这是我修改后的代码：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&sensor=false"></script>
<script type="text/javascript">
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);

    function InitializeRequest(sender, args) {
    }

    // fires after the partial update of UpdatePanel
    function EndRequest(sender, args) {
        initialize();
    }
    function initialize() {
        var defaultBounds = new google.maps.LatLngBounds(
        new google.maps.LatLng(7.623887, 68.994141),
        new google.maps.LatLng(37.020098, 97.470703));

        var input1 = document.getElementById('ctl00_ReportContentPlaceHolder_txtLocality');
        var input2 = document.getElementById('ctl00_ReportContentPlaceHolder_txtDropLocality');
        var options = {
            bounds: defaultBounds,
            types: ['geocode'],
            componentRestrictions: { country: "IN" }
        };
        autocomplete1 = new google.maps.places.Autocomplete(input1, options);
        autocomplete2 = new google.maps.places.Autocomplete(input2, options);
    }
</script> 
```

# php - 如何在不使用表单的情况下将 PHP 页面中的变量传递到另一个页面？

> ID：16119366
> 
> 赞同：0
> 
> 时间：2013-04-20T10:36:10.523
> 
> 标签：php, facebook

我的项目使用与 Facebook 相关。当用户登录`$user`时，这个页面中的变量是知道这个变量，但对于其他页面是没有的。所以我想知道如何使用没有表单的PHP来传递变量？我已经在尝试声明会话，但这是不可能的，因为它处于 if 条件

```
 <?php 
             if ($user):            
                 echo 'Name:'. $user_profile['id']."<br />";
                 echo 'Name:'. $user_profile['name']."<br />";
             else: 
        ?> 
```

`$user_profile['id']`是我想要传递给其他页面的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:38:11.550

你可以用会话来做

```
session_start();
$_SESSION['user_profile'] = $user_profile['id']; 
```

并在您想要存储变量的每个页面上使用会话变量

在每个其他页面上，您都可以像这样检索变量值

```
 session_start();
    $user_profile['id'] = $_SESSION['user_profile']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:38:34.203

您可以使用**会话**来存储数据并在其他页面中使用

只需在页面顶部添加一个会话

```
session_start(); 
```

然后

```
//On first page
$_SESSION['user_profile'] = $user_profile['id'];

//On second page
$user_profile = $_SESSION['user_profile']; 
```

所以现在你可以回应它

```
echo $user_profile; 
```

`UPDATED`

我想你也可以这样`cookies`做

```
//One first page
$_COOKIE['variable_name'] = $variable_value;

//On second page
$variable_value = $_COOKIE['variable_name']; 
```

这两者之间的区别在于，在第一种情况下，变量将存储在服务器端的会话中，而 cookie 将变量存储在客户端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T10:41:01.813

试试[APC](http://php.net/manual/en/book.apc.php) ..

在第一页使用这个

```
 <?php
    $bar = $user_profile['id'];
    apc_store('foo', $bar);
?> 
```

并在其他页面上执行此操作

```
<?php
    apc_fetch('foo');
    ?> 
```

使用替代 php catch .reduce 50% 的时间比会话

[APC 功能](http://www.php.net/manual/en/ref.apc.php)

[apc_store](http://www.php.net/manual/en/function.apc-store.php) — 在数据存储中缓存一个变量

[apc_fetch](http://www.php.net/manual/en/function.apc-fetch.php) — 从缓存中获取存储的变量

# ruby-on-rails - 为什么设计不散列reset_password_token和confirmation_token？

> ID：16119367
> 
> 赞同：2
> 
> 时间：2013-04-20T10:36:20.217
> 
> 标签：ruby-on-rails, architecture, devise

我发现 Rails 的设计身份验证框架不会对数据库中的 reset_password_token 和 Confirmation_token 进行哈希处理？有谁知道为什么？

显然，将这​​样的值以纯文本形式存储在数据库中是一种不好的方法，因为有权访问数据库的每个人都可以重用令牌并将它们直接发送到 API（例如，可以轻松触发密码重置，而无需访问到电子邮件）。此外，这只是将散列存储在数据库中的最小努力。这就是为什么我想知道这种普通令牌方法背后的想法是什么？

* * *

更新：没有人对此有任何意见吗？从我的角度来看，这是一个安全问题，但看起来我是唯一一个担心这个问题的人：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T10:03:52.510

在数据库中散列它们没有任何意义。确认/重置电子邮件仍然需要向用户发送一个令牌，应用程序可以使用该令牌来根据您存储的散列密钥识别他们（邀请/密码重置令牌）。如果这是以明文或双向加密存储的，那么您将遇到完全相同的问题，因为黑客可以只使用明文令牌，而您的应用程序会很乐意对其进行哈希处理并对其进行身份验证。如果这被存储为单向加密，那么您的应用程序将无法提取它应该发送给用户的实际令牌。

必须有人知道密码/令牌的实际未散列版本。在密码中，实际的密码存储在用户的头脑中。在这种情况下，实际的令牌需要存储在数据库中。

# ruby-on-rails - Ruby on rails：使用 capistrano 部署时未安装 Bundler

> ID：16119370
> 
> 赞同：0
> 
> 时间：2013-04-20T10:36:44.270
> 
> 标签：ruby-on-rails, ubuntu, capistrano

我正在尝试使用 capistrano 部署到 ubuntu 服务器并收到以下错误：

```
Executing "cd /home/useracc/www/releases/20130420101911 && bundle install --gemfile /home/useracc/www/releases/20130420101911/Gemfile --path /home/useracc/www/shared/bundle --deployment --quiet --without development test"
    servers: ["dev.website.com"]
    [dev.self-sale.com] executing command
 ** [out :: dev.website.com] ERROR: Gem bundler is not installed, run `gem install bundler` first.
 ** [out :: dev.website.com] 
    command finished in 510ms
*** [deploy:update_code] rolling back
  * executing "rm -rf /home/useracc/www/releases/20130420101911; true"
    servers: ["dev.website.com"]
    [dev.self-sale.com] executing command
    command finished in 613ms
failed: "sh -c 'cd /home/selfsale/www/releases/20130420101911 && bundle install --gemfile /home/useracc/www/releases/20130420101911/Gemfile --path /home/useracc/www/shared/bundle --deployment --quiet --without development test'" on dev.website.com 
```

我进行了一些搜索，发现有些人通过在 deploy.rb 中添加 require “bundler/capistrano” 解决了这个问题。

我试过了，但没有任何区别。

我也尝试在服务器上安装捆绑器，但得到：

```
$ gem install bundler
Fetching: bundler-1.3.5.gem (100%)
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /usr/local/rvm/gems/ruby-1.8.7-p371 directory. 
```

我不记得设置了 RVM，所以这让我有点困惑。

有没有人有什么建议？

顺便说一句，这是一个旧应用程序，这是我的宝石列表：

% 捆绑执行宝石列表

***当地宝石***

actionmailer (2.3.14) actionpack (2.3.14) activerecord (2.3.14) activeresource (2.3.14) activesupport (2.3.14) brightbox (2.3.9) bundler (1.3.5) capistrano (2.14.2) highline ( 1.6.16) hoe (3.5.2) hpricot (0.8.2) htmldoc (0.2.3) json (1.7.7) macaddr (1.6.1) mysql (2.9.1) net-scp (1.1.0) net- sftp (2.1.1) net-ssh (2.6.7) net-ssh-gateway (1.2.0) paginator (1.1.1) rack (1.1.6) rails (2.3.14) rake (10.0.4) rdoc ( 4.0.1) RedCloth (4.2.9) rmagick (2.13.1) systemu (2.5.2) uuid (2.0.2) will_paginate (2.3.16) wkhtmltopdf-binary (0.9.9.1)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:28:20.423

我认为问题是：您已将捆绑器安装到特定的 gemset，这就是为什么它仅在您位于应用程序目录中时可用的原因，因此请尝试将捆绑器安装到全局 gemset。

`rvm gemset use global && gem install bundler`

# java - Dbpedia-spotlight 缺少资源

> ID：16119379
> 
> 赞同：0
> 
> 时间：2013-04-20T10:37:49.603
> 
> 标签：java, spotlight-dbpedia

我建立了 QAS（问答系统）并使用 DBpedia 作为知识库，所以我需要在我的问题中找到资源，例如（阿尔及利亚、佛罗里达、巴拉克奥巴马 ..），当我使用“dbpedia-spotlight 工具”时遇到问题，我可以t 获得我需要的所有资源，例如：

`"birthday of Abbas el-Akkad "`资源是“ [Abbas el-Akkad](http://dbpedia.org/page/Abbas_el-Akkad) ”，但我无法通过“dbpedia-spotlight”获得它，您可以在[这里尝试](http://dbpedia-spotlight.github.io/demo/)

另一个例子 ：

” `What is the largest city in Australia?`“正确的资源是[澳大利亚](http://dbpedia.org/page/Australia)，但我得到[了 Australia_II](http://dbpedia.org/page/Australia_II)。

请给我任何建议以获取 DBpedia 资源上的正确资源。我在（dbpedia-spotlight）、Java 语言中使用默认参数。

问题得到正确的资源和正确的答案：

*   给我第23任美国总统？

*   伊朗的首都是哪里

*   给我奥巴马的生日

*   查纳最大的城市是什么？

*   什么是高大的莱昂内尔·梅西？

*   克劳迪娅·希弗有多高？

*   奥巴马的简短描述

*   阿尔及利亚有多少人

*   为什么天空是蓝色的？

*   曼尼托巴大学有多少学生

*   乔治华盛顿出生在哪里？

*   乔治华盛顿是什么时候出生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-15T12:56:02.417

Spotlight 是一个面向上下文的工具。如果您尝试注释小文本，有时会出错。

我试过你的问题澳大利亚最大的城市是什么？我成功了。

实际上，我们一直在使用两种方法：Lucene - [http://spotlight.dbpedia.org/rest/](http://spotlight.dbpedia.org/rest/)和 Statistical - [http://spotlight.sztaki.hu:2222/rest](http://spotlight.sztaki.hu:2222/rest)。对于您的情况，我建议您使用 Lucene 方法。

例如：为什么天空是蓝色的？- [http://spotlight.dbpedia.org/rest/annotate?text=%20Why%20is%20the%20sky%20blue?&confidence=0.3](http://spotlight.dbpedia.org/rest/annotate?text=%20Why%20is%20the%20sky%20blue?&confidence=0.3)

# django - 从 django 视图中只提取一次产品

> ID：16119380
> 
> 赞同：-1
> 
> 时间：2013-04-20T10:37:59.640
> 
> 标签：django, django-templates, django-views

我在从 Django 视图中提取产品列表时遇到了一个小问题。我有一个产品页面，它可以浏览我模型中的所有产品，其中勾选了“活动”复选框。您还可以将子产品分配给这些产品。

如果产品有分配给它的子产品，而不是加载具有更多内容的页面，它将加载具有子产品列表的页面。然而，目前在模板中它会循环并拉出所有产品。但是，目前如果一个产品有 1 个或多个子产品分配给它，它将多次拉动每个产品，具体取决于它分配给它的子产品的数量。

这样做的原因是因为我创建了一个链，它将视图中的函数中的两个变量组合在一起。但我需要这样做才能使子产品工作。

所以基本上我需要做的是限制每个产品在模板上只出现一次，无论它分配了多少子产品。

如果您需要更多信息，请询问！:)

**更新后的视图和答案 **

看法：

```
def producthome(request):
    #prod_info= Product.objects.filter(active=True, sub_product__isnull = True)
    #sub_product = Product.objects.filter(sub_product__isnull = False, active=True)

    partner_post= Partner.objects.all()

    product_all = Product.objects.filter(active=true)

    #product_all = list(chain(prod_info, sub_product))

    """
    Didn't need to chain the querysets together

    product_all = sorted(
        chain(prod_info, sub_product),
        key = attrgetter('order'), reverse=True)
    """

    return render_to_response('product_multi.html',{
        'product_all': product_all,
        'sub_product': sub_product,
        'prod_info': prod_info,
        'partner_post': partner_post
    }, context_instance=RequestContext(request)) 
```

模板：

```
{% for product in product_all %}

                    <li>

                        <div>
                        <h2 class="posttitle colortext">{{ product.name }}</h2>
                        <p>{{ product.description|safe|truncatewords:13 }}...</p>
                       <a href="{{ product.get_absolute_url }}" class="button">More</a>
                        </div>

                    </li>

    {% endfor %} 
```

***回答***

事实证明，我不需要链接查询集，我可以将产品拉到一起。因为有另一个功能在做其他工作。为混乱道歉，但谢谢。我已经更新了答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:53:05.993

回答

事实证明，我不需要链接查询集，我可以将产品一起拉出。因为有另一个功能在做其他工作。为混乱道歉，但谢谢。我已经更新了答案。

# ruby-on-rails - 从 Rails 应用程序到 Star Micronics TSP 143U 的 POS 收据打印

> ID：16119388
> 
> 赞同：2
> 
> 时间：2013-04-20T10:38:55.157
> 
> 标签：ruby-on-rails, printing, receipt

好吧，这开始看起来有点绝望了，所以我不妨提出一个问题，看看我是否能走运。我有一台连接到 Lantronix xPrintServer Home Edition 的 star micronics TSP 143U 收据打印机，以通过本地网络启用 AirPrinting 到收据打印机。90% 的设置完美运行——我有一个 rails webapp 可以创建收据并使用 css 打印媒体查询对其进行格式化，Star Printer 通过 USB 插入 xPrintServer，并在 30 秒内自动找到并配置，并且我所有的 iOS 设备都可以检测到打印机并启动打印作业。要打印作业，我在页面加载时使用 javascript document.print() 调用。

一切正常，除了启动打印作业时，打印机会打印所需的内容，然后不会停止进纸或剪切收据。有什么方法可以使用 CSS 格式化 HTML 文档以诱导打印机在最后一行文本之后停止打印？或者，有什么方法可以从移动 safari 浏览器向本地网络上的打印机发送 esc/p2 转义命令（根据他们的文档，cut 命令是 esc d）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T21:53:27.103

这是来自 Star micronics 技术支持的 Matt。tsp100 不支持打印服务器，我们支持通过 ios 上的 USB 打印的唯一方法是将打印机连接到苹果机场。此外，我们不支持来自 ios 的 airprint 或任何网络打印，仅支持使用我们网站上的 sdk 与我们的打印机配合使用的应用程序。这可能是问题的原因。

如果您有任何疑问，请联系明星技术支持-800 782 7636 选项 3 或发送电子邮件至 support@starmicronics.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T13:43:18.253

我已将此问题发送给 Lantronix 支持。他们建议我更新 lantronix 软件，它对我有用。这是教程： http: [//ltxfaq.custhelp.com/ci/fattach/get/23364/1364416067/redirect/1/filename/xPrintServer%20Firmware%20Upgrade%20Utility%20Windows_v3.pdf](http://ltxfaq.custhelp.com/ci/fattach/get/23364/1364416067/redirect/1/filename/xPrintServer%20Firmware%20Upgrade%20Utility%20Windows_v3.pdf)

# ajax - 使用 $.Ajax() 和 POST 方法发送 JSON

> ID：16119391
> 
> 赞同：0
> 
> 时间：2013-04-20T10:39:22.430
> 
> 标签：ajax, jquery

我正在尝试使用 POST 方法在 jquery 中使用 $.ajax() 将 JSON 对象从我的纯 html 页面发送到 datapower 端点。fire bug 中的响应标头给了我“内部服务器错误”，请任何人告诉我我在这里做错了什么：HTTP/1.1 500 Error X-Backside-Transport: FAIL FAIL Content-Type: text/xml Connection: close

我的 Jquery 代码如下所示：

```
 $(document).ready(function () {
            $('#btn_submitcallback').click(function () {

                //add the values we need for the API to an object
                var objCallbackData = new Object;
                var d = new Date();
                var dat = d.getDate();
                var mon = d.getMonth() + 1;
                var year = d.getFullYear();
                var todayDate = dat + "/" + mon + "/" + year;
                alert("inside submit callback");
                //build the object
                objCallbackData.Store_Code = "POO726"; //$('#sel_title').val();
                objCallbackData.Title = $('#sel_title').val();
                objCallbackData.First_Name = $('#txt_firstname').val();
                objCallbackData.Last_Name = $('#txt_surname').val();
                objCallbackData.House_Number = $('#txt_houseno').val();
                objCallbackData.Street = $('#txt_streetname').val();
                objCallbackData.City = $('#txt_city').val();
                objCallbackData.Post_Code = $('#txt_postcode').val();
                objCallbackData.Email = $('#txt_email').val();
                objCallbackData.Phone_Number = $('#txt_phone').val();
                objCallbackData.Project_Type = "Bathroom";
                objCallbackData.Callbacktime_Morning = "Y";
                objCallbackData.Callbacktime_Afternoon = "Y";
                objCallbackData.Callbacktime_Evening = "N";
                objCallbackData.Callbacktime_Weekend = "N";
                objCallbackData.Callbacktime_Weekday = "Y";
                objCallbackData.Helparea_Measuring = "Y";
                objCallbackData.Helparea_Designing = "N";
                objCallbackData.Helparea_Usingspaces = "N";
                objCallbackData.Helparea_Services = "N";
                objCallbackData.Helparea_Productinfo = "N";
                objCallbackData.Status = "O";
                objCallbackData.Date = todayDate;

                // alert(objCallbackData.date);

                //turn the object in to a JSON string
                var myJson = JSON.stringify(objCallbackData);
                alert(myJson);

                $.ajax({
                    type: 'POST',
                    url: 'http://xb629050-s1.uk.b-and-q.com:9340/api/callback',
                    contentType: 'application/json; charset=utf-8',
                    data: myJson,
                    dataType: 'json',
                    success: function () {
                        alert("good");
                    },
                    error: function (xhr, status) {
                        switch (status) {
                            case 404:
                                alert('File not found');
                                break;
                            case 500:
                                alert('Server error');
                                break;
                            case 0:
                                alert('Request aborted');
                                break;
                            default:
                                alert('Unknown error: ' + xhr.statusText);
                        }
                    }
                });

            });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:43:39.167

Ajax 不支持跨域请求。您需要为此使用 jsonp 方法。

也看到这个

[如何使用 jQuery JSONP 进行跨域 ajax 调用](https://stackoverflow.com/questions/8348295/how-to-make-cross-domain-ajax-call-using-jquery-jsonp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T19:05:35.030

@Thrustmaster 是对的，您不能将 POST 请求用于跨域异步操作需要使用 GET，因为在后台会加载脚本标签内容。

尝试这个：

```
$.getJSON("http://xb629050-s1.uk.b-and-q.com:9340/api?callback=?", 
    objCallbackData, processServerResponse); 
```

其中 processServerResponse 是获取数据后将调用的函数：

```
function processServerResponse(data) {
// processing data from server
} 
```

请参阅例如“免费 geoIP”服务。尝试浏览： http: [//freegeoip.net/json/?callback =handleResponse](http://freegeoip.net/json/?callback=handleResponse)

PS来自wiki的一些摘录：

> .. 从 server1.example.com 提供的网页无法正常连接到 server1.example.com 以外的服务器或与之通信。一些例外包括 HTML 元素。利用元素的开放策略，一些页面使用它们来检索 JavaScript 代码，该代码对来自其他来源的动态生成的 JSON 格式数据进行操作。这种使用模式称为 JSONP。JSONP 请求检索的不是 JSON，而是任意 JavaScript 代码。它们由 JavaScript 解释器评估，而不是由 JSON 解析器解析。

# angularjs - 如何更新 AngularJS 中的元标记？

> ID：16119398
> 
> 赞同：40
> 
> 时间：2013-04-20T10:40:51.073
> 
> 标签：angularjs, meta-tags

我正在使用 AngularJS 开发一个应用程序。我想在路线更改时更新元标记。
如何更新 AngularJS 中的元标记，这些标记可以显示在页面的“查看源代码”中？

这是一个 HTML 代码 -

```
 <!DOCTYPE html>
    <html ng-app="app">
        <head>
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="fragment" content="!" />
            <meta name="title" content="Test App">
            <meta name="description" content="Test App">
            <meta name="keywords" content="Test,App">

            <link rel="stylesheet" href="css/jquery-ui-1.10.2.custom.min.css" />
            <link rel="stylesheet" href="css/extra.css" />
            <script src="js/libs/jquery-1.8.3.min.js"></script>
            <script src="js/libs/jquery-ui-1.10.2.custom.min.js"></script>
            <script src="js/libs/angular.min.js"></script>
            <script src="js/controller.js"></script>
            <script src="js/routes.js"></script>
        </head>
        <body>
            <div ng-controller="mainCtrl" class="main-container" loading>
                <div class="container-holder">
                    <div class="container">
                        <div ng-include src='"elements/header.html"'></div>
                        <div ng-view class="clearfix"></div>
                    </div>
                </div>

                <div ng-controller="userCtrl" id="test">
                    <div class="container" class="login-container">
                        <div id="login-logo">
                            <img src="images/logo-300.png" alt="" class="login-img"/>
                            <br />
                            <div ng-view></div>
                        </div>
                    </div>
                </div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2014-10-31T08:05:28.037

```
<html ng-app="app">
    <title ng-bind="metaservice.metaTitle()">Test</title>
    <meta name="description" content="{{ metaservice.metaDescription() }}" />
    <meta name="keywords" content="{{ metaservice.metaKeywords() }}" />

<script>
    var app = angular.module('app',[]);
    app.service('MetaService', function() {
       var title = 'Web App';
       var metaDescription = '';
       var metaKeywords = '';
       return {
          set: function(newTitle, newMetaDescription, newKeywords) {
              metaKeywords = newKeywords;
              metaDescription = newMetaDescription;
              title = newTitle; 
          },
          metaTitle: function(){ return title; },
          metaDescription: function() { return metaDescription; },
          metaKeywords: function() { return metaKeywords; }
       }
    });

   app.controller('myCtrl',function($scope,$rootScope,MetaService){
      $rootScope.metaservice = MetaService;
      $rootScope.metaservice.set("Web App","desc","blah blah");
   });
</script>
 <body ng-controller="myCtrl"></body>

</html> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-20T06:23:43.350

大约 2 天前，我通过创建服务并使用 $window 以及一些经典的 javascript 解决了这个问题。

在您的 html 标记中创建您需要的任何元标记...（暂时将它们留空，或者您可以将它们设置为默认值。）

```
<head> 
    <meta name="title"/>
    <meta name="description"/>
</head> 
```

然后我们需要像这样创建一个服务。

```
angular.module('app').service('MetadataService', ['$window', function($window){
 var self = this;
 self.setMetaTags = function (tagData){
   $window.document.getElementsByName('title')[0].content = tagData.title;
   $window.document.getElementsByName('description')[0].content = tagData.description;
 }; 
}]); 
```

现在我们需要在控制器中使用“self.setMetaTags”服务（在初始化时）......您只需在控制器上的任何位置调用该函数。

```
angular.module('app').controller('TestController', ['MetadataService',function(MetadataService){

   MetadataService.setMetaTags({
       title: 'this',
       description: 'works'
    });

}]); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-04T12:40:45.303

如果您使用[angular-ui-router](https://github.com/angular-ui/ui-router)，则可以使用[ui-router-metatags](https://github.com/tinusn/ui-router-metatags)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-08T12:19:07.177

当您在大多数浏览器中执行“查看源代码”时，您会看到在对 DOM 进行任何 JavaScript 操作之前最初从服务器发送的文档。AngularJS 应用程序通常会进行大量的 DOM 操作，但它从未真正更改过原始文档。当您在 FireFox 或 Chrome（使用开发工具）中执行诸如右键单击 -> 检查元素之类的操作时，您将看到包含所有 JavaScript 更新的渲染 DOM。

因此，要回答您的问题，无法使用 JavaScript 更新描述元标记，以便更改将反映在“查看源代码”中。但是，您可以更新元描述标签，以便任何浏览器插件（例如书签应用程序等）都可以看到更新后的描述。为此，您将执行以下操作：

```
var metaDesc = angular.element($rootElement.find('meta[name=description]')[0]);
metaDesc.attr('content', description); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-30T20:44:03.990

我调整了找到的答案[How to dynamic change header based on AngularJS partial view?](https://stackoverflow.com/questions/12506329/how-to-dynamically-change-header-based-on-angularjs-partial-view) 在我的网站上进行这项工作。您在路由配置中建立元内容，然后将函数绑定到`$routeChangeSuccess`事件以将配置的值放入`$rootScope`. 只要您的元标记绑定到该`$rootScope`值，一切都会按计划进行。

```
angularApp.run(['$rootScope', function ($rootScope) {
    $rootScope.$on('$routeChangeSuccess', function (event, current, previous) {
        $rootScope.title = current.$$route.title;
        $rootScope.description = current.$$route.description;
        $rootScope.keywords = current.$$route.keywords;
    });
 }]);

angularApp.config(function ($routeProvider, $locationProvider) {
    $routeProvider
        .when('/About', {
            templateUrl: 'Features/About/About.html',
            title: 'Here\'s the Title',
            description: 'A Nice Description',
            keywords: 'Some, Keywords, Go, Here'
        });

    // use the HTML5 History API
    $locationProvider.html5Mode(true);
    $locationProvider.hashPrefix('!');
});

<head>
    <meta charset="utf-8" />
    <meta name="keywords" content="{{keywords}}"/>
    <meta name="description" content="{{description}}">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="fragment" content="!" />

    <title ng-bind="title">A Placeholder Title</title>
    <link rel="icon" href="/Images/Logo.ico">
    <base href="/" />
    @Styles.Render("~/Content/css")
</head> 
```

# javascript - 将javascript放在标签后

> ID：16119408
> 
> 赞同：0
> 
> 时间：2013-04-20T10:41:50.390
> 
> 标签：javascript, seo, joomla1.5

gtmetrix 向我展示延迟解析 javascript 以进行 SEO 网站的目的

为此，我搜索了论坛、谷歌等，然后我发现它应该放在我的模板 head.php 文件中的标记之后

但是，如果我剪切并粘贴任何对 head.php 文件的 javascript 文件调用，并且如果我取消发布了该特定模块，那么它是否也会加载？

并且模块中有许多 javascript 文件正在加载特定条件检查，如果我默认将这些文件放在 head.php 中，会导致任何问题吗？

我正在使用 joomla 1.5 框架

请帮助我，我一直在解决这个问题很多天，但没有得到正确的解决方案。

谢谢，拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:02:32.567

搜索引擎优化爬虫不关心您放置 javascript 的位置。它总是在整个页面中查找信息。很多人在头部添加javascript，所以它位于同一个地方。

放置 javascript 的最佳位置是在文件末尾，因为访问您的页面的用户。浏览器可以在仍然不需要 javascript 的情况下呈现您的页面（大多数页面）。javascript 也应该放在它自己的文件中，因为浏览器可以缓存 .js 文件请求。这样，您的页面加载速度更快，使用的带宽更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T03:57:14.883

是的。SEO 爬虫并不关心你的 JS 和其他服务代码放在哪里。他们查看 .html 的最后一个字节的时间。但！爬取后，您的数据通过谷歌过滤器学习，即检查链接、文本并可以检查性能。他们还可以检查“加载完成”和“文档准备就绪”时间。延迟加载可以帮助您的 SEO，但我真的没有测试过。新的 Wordpress CMS 使用了这种策略。

# python - python中这两种导入语法有什么区别？

> ID：16119414
> 
> 赞同：0
> 
> 时间：2013-04-20T10:42:59.943
> 
> 标签：python

```
~/
    A/
        __init__.py
        a1.py
        a2.py 
```

a1.py：

```
from a2 import y 
```

a2.py

```
import sys
sys.path.append('/home/shellfly/')
from A import a1  # raise ImportError
from A.a1 import c # normal 
```

有什么区别：

```
 from PACKAGE import MODULE 
```

和

```
 from MODULE import VAR" 
```

为什么上面的导入表达式会抛出异常？

我在 Django 中遇到了这个异常，其中 A 是一个应用程序文件夹，所以它已经在 PYTHONPATH 中，我已经将我的工作目录添加到我的测试代码中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:49:06.410

`from A import a1`还在`A`文件夹里面。`a2.py`会期望它是`/A/A/a1.py`

Eclipse 抛出错误；`unresolved import a2`，因为它不在文件的绝对路径中。

# android - 带有水平滚动Android的垂直滚动条

> ID：16119417
> 
> 赞同：1
> 
> 时间：2013-04-20T10:43:02.387
> 
> 标签：android, android-layout, android-widget, horizontalscrollview, android-scrollview

遇到“无法滚动”问题

*   我正在尝试获得一个具有水平滚动功能的定制垂直滚动条。
*   我试图在水平滚动条中放置 7 个垂直滚动条（@+id/verticalSeekbar、@+id/verticalSeekbar_2 等）。
*   我（在stackoverflow的帮助下）能够获得我的自定义垂直滚动条。

但是，我无法水平滚动它。我希望能够水平滚动，但它不起作用。附件是我想要的图像。这是我的代码`Activity_vertical_slider`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <com.example.verticalsliderandroid.HScroll android:id="@+id/hScroll"
            android:layout_width="400dp" android:layout_height="wrap_content">

        <RelativeLayout
            android:id="@+id/relative_layout_sample"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            >

        <com.example.verticalsliderandroid.VerticalSeekBar
        android:id="@+id/verticalSeekbar"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:max="255"
        android:progress="10"
        android:rotation="180"
        android:progressDrawable="@android:color/transparent"
        android:thumb="@drawable/eco_seekbar" />

        <com.example.verticalsliderandroid.VerticalSeekBar
            android:id="@+id/verticalSeekbar_2"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_alignParentTop="true"
            android:layout_toRightOf="@+id/verticalSeekbar"
            android:max="255"
            android:progress="10"
            android:progressDrawable="@android:color/transparent"
            android:rotation="180"
            android:thumb="@drawable/eco_seekbar" />    

        </RelativeLayout>

    </com.example.verticalsliderandroid.HScroll>

</RelativeLayout> 
```

这是我的`verticalseekbar.java`

```
public class VerticalSeekBar extends SeekBar {

    public VerticalSeekBar(Context context) {
        super(context);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs, int defStyle) {

        super(context, attrs, defStyle);
    }

    public VerticalSeekBar(Context context, AttributeSet attrs) {

        super(context, attrs);
    }

    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(h, w, oldh, oldw);
    }

    @Override
    protected synchronized void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        super.onMeasure(heightMeasureSpec, widthMeasureSpec);
        setMeasuredDimension(getMeasuredHeight(), getMeasuredWidth());

    }

    protected void onDraw(Canvas c) {
        c.rotate(-90);
        c.translate(-getHeight(), 0);
        super.onDraw(c);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        if (!isEnabled()) {
            return false;
        }

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:

            case MotionEvent.ACTION_MOVE:

            case MotionEvent.ACTION_UP:
                setProgress(getMax() - (int) (getMax() * event.getY() / getHeight()));
                onSizeChanged(getWidth(), getHeight(), 0, 0);
                break;
            case MotionEvent.ACTION_CANCEL:
               break;
        }
        return true;
    }

} 
```

我已经在互联网上进行了足够多的搜索。只是没有得到我需要的东西。请帮忙。

![在此处输入图像描述](https://i.stack.imgur.com/vEd5S.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:48:18.480

`case MotionEvent.ACTION_DOWN: case MotionEvent.ACTION_MOVE: case MotionEvent.ACTION_UP:`在 ACTION_DOWN 和 ACTION_MOVE 之后你不需要休息一下吗？如果你没有`break`s，你所有的向上和移动动作都会变成 UP，你将永远无法只用 UP 移动来测试滚动条。

编辑：试试[SO 问题](https://stackoverflow.com/questions/2044775/scrollview-vertical-and-horizontal-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T11:57:58.743

我得到了这样做的正确方法。方法是在 TableLayout 中有一个 ScrollView 和一个 Horizo​​ntalScrollView。您可以使用 TableRow 并获得您想要的任何东西。这是activity_main的代码。VerticalSeekbar 的代码保持不变。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <ScrollView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

      <HorizontalScrollView
            android:layout_width="fill_parent"          
            android:layout_height="fill_parent" >

       <TableLayout
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent">

                    <TableRow 
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent">

                         <com.example.verticalslider.VerticalSeekBar
                            android:id="@+id/seekBar1"
                            android:layout_width="wrap_content"
                            android:layout_height="500dp"
                            android:padding="20dp"
                            />

                            <com.example.verticalslider.VerticalSeekBar
                            android:id="@+id/seekBar2"
                            android:layout_width="wrap_content"
                            android:layout_height="500dp"
                            android:padding="20dp"
                            />

                            <com.example.verticalslider.VerticalSeekBar
                            android:id="@+id/seekBar3"
                            android:layout_width="wrap_content"
                            android:layout_height="500dp"
                            android:padding="20dp"                              
                            />

                            <com.example.verticalslider.VerticalSeekBar
                            android:id="@+id/seekBar4"
                            android:layout_width="wrap_content"
                            android:layout_height="500dp"
                            android:padding="20dp"                              
                            />

                            <com.example.verticalslider.VerticalSeekBar
                            android:id="@+id/seekBar5"
                            android:layout_width="wrap_content"
                            android:layout_height="500dp"
                            android:padding="20dp"                              
                            />

                            <com.example.verticalslider.VerticalSeekBar
                            android:id="@+id/seekBar6"
                            android:layout_width="wrap_content"
                            android:layout_height="500dp"
                            android:padding="20dp"                              
                            />

                    </TableRow>

               </TableLayout>

       </HorizontalScrollView>

    </ScrollView>

</RelativeLayout> 
```

完美运行。

# android - 使用谷歌 API 17 编译的 Eclipse Android 应用程序项目

> ID：16119418
> 
> 赞同：0
> 
> 时间：2013-04-20T10:43:24.240
> 
> 标签：android, eclipse, api, google-api

我只在选择中看到 android api 17 我按照 [https://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)上的说明进行操作 但是在编译时创建新的-->Android 应用程序项目时：我只能选择 API17 Android 4.2 但视频（11:02）有 Google API 17！！任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:47:27.897

您需要进入 Android SDK Manager 并`Google API`在 Android 4.2.2 下选择，然后安装该软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:47:40.993

您需要使用[android sdk manager](http://developer.android.com/tools/help/sdk-manager.html)安装适当的 android sdks + Google API 。

# java - Thymeleaf：连接 - 无法解析为表达式

> ID：16119421
> 
> 赞同：95
> 
> 时间：2013-04-20T10:43:50.290
> 
> 标签：java, html, thymeleaf

尝试在模板中连接多个值时遇到问题。根据[这里](http://www.thymeleaf.org/doc/Tutorial%20-%20Using%20Thymeleaf%2020130224.pdf)的Thymeleaf，我应该能够简单地将它们+在一起......

> **4.6 连接文本**
> 
> 文本，无论是文字还是计算变量或消息表达式的结果，都可以使用 + 运算符轻松连接：

```
th:text="'The name of the user is ' + ${user.name}" 
```

这是我发现的工作示例：

```
<p th:text="${bean.field} + '!'">Static content</p> 
```

然而，这不会：

```
<p th:text="${bean.field} + '!' + ${bean.field}">Static content</p> 
```

从逻辑上讲，这应该有效，但不是，我做错了什么？

* * *

马文：

```
<dependency>
    <groupId>org.thymeleaf</groupId>
    <artifactId>thymeleaf-spring3</artifactId>
    <version>2.0.16</version>
    <scope>compile</scope>
</dependency> 
```

* * *

以下是我设置 TemplateEngine 和 TemplateResolver 的方法：

```
<!-- Spring config -->
<bean id="templateResolver" class="org.thymeleaf.templateresolver.ClassLoaderTemplateResolver">
    <property name="suffix" value=".html"/>
    <property name="templateMode" value="HTML5"/>
    <property name="characterEncoding" value="UTF-8"/>
    <property name="order" value="1"/>
</bean>
<bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
    <property name="templateResolver" ref="fileTemplateResolver"/>
    <property name="templateResolvers">
        <list>
            <ref bean="templateResolver"/>
        </list>
    </property> 
```

ThymeleafTemplatingService：

```
@Autowired private TemplateEngine templateEngine;
.....
String responseText = this.templateEngine.process(templateBean.getTemplateName(), templateBean.getContext()); 
```

抽象模板.java：

```
public abstract class AbstractTemplate {
  private final String templateName;
  public AbstractTemplate(String templateName){
    this.templateName=templateName;
  }
  public String getTemplateName() {
    return templateName;
  }
  protected abstract HashMap<String, ?> getVariables();
  public Context getContext(){
    Context context = new Context();
    for(Entry<String, ?> entry : getVariables().entrySet()){
      context.setVariable(entry.getKey(), entry.getValue());
    }
    return context;
  }
} 
```

* * *

## 回答 #1

> 赞同：231
> 
> 时间：2013-10-18T12:15:30.650

但据我所知，您在语法上有一个非常简单的错误

```
<p th:text="${bean.field} + '!' + ${bean.field}">Static content</p> 
```

正确的语法看起来像

```
<p th:text="${bean.field + '!' + bean.field}">Static content</p> 
```

事实上，语法`th:text="'static part' + ${bean.field}"`等于`th:text="${'static part' + bean.field}"`.

试试看。即使这在 6 个月后现在可能有点没用了。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-12-15T00:19:18.780

您可以通过在字符之间环绕您的简单/复杂表达式来连接多种表达式`||`：

```
<p th:text="|${bean.field} ! ${bean.field}|">Static content</p> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2019-01-27T23:08:06.443

请注意，使用 | char，您的 IDE 会收到警告，例如我会收到 IntelliJ 最新版本的警告，因此最好的解决方案是使用以下语法：

```
th:text="${'static_content - ' + you_variable}" 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-07-19T07:54:38.340

* * *

***我们可以像这样 concat ：***

* * *

```
<h5 th:text ="${currentItem.first_name}+ ' ' + ${currentItem.last_name}"></h5> 
```

# mongodb - mongoDB 引用获取需要时间

> ID：16119422
> 
> 赞同：0
> 
> 时间：2013-04-20T10:43:56.770
> 
> 标签：mongodb, optimization, pymongo, mongoengine

我使用 mongoengine 作为对象文档映射器。以下是导致问题的集合的简要说明。集合 A 中的每个文档都可以包含对集合 B 中文档的引用列表。

```
class A(Document): 
    list_b = ListField(EmbeddedDocumentField(EB))
    #other fields are not mentioned.

class EB(EmbeddedDocument):
    b_reference = ReferenceField('B')
    loc = GeoPointField()

class B(Document):
    name = StringField()
    #other fields are not mentioned. 
```

当我尝试访问特定文档的列表对象时

`document_of_A.list_b`

上述行的执行时间取决于列表中存在的引用数。例如。列表中的 100 个引用需要 100 毫秒。

有没有更好的方法来获取引用？这样可以减少上述行的执行时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T10:25:46.760

`select_related`如果要快速获取所有引用，则应在查询时使用该标志。请注意参考查找将花费额外的查询，`select_related()`旨在减少往返 mongodb 的次数。

```
# Single document lookup
document_of_A.select_related(2)

# Queryset
A.objects.select_related(2) 
```

为什么选择 2 用于 select_related 查找？那么递归深度是：

1.  在列表本身中查找任何引用
2.  在单个嵌入文档中查找参考

# javascript - 使用 javascript 管理云中的文件（Dropbox、GDrive）

> ID：16119425
> 
> 赞同：0
> 
> 时间：2013-04-20T10:44:07.877
> 
> 标签：javascript, cloud, dropbox

我想制作浏览器应用程序，它将管理文件云中的用户文件，如 Dropbox 或 Google Drive。可以只在没有 PHP 的 javascript 中做到这一点吗？如何访问用户的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:48:55.727

深入了解[https://www.dropbox.com/developers/chooser](https://www.dropbox.com/developers/chooser) - 这里有关于 JavaScript 的宝贵示例。

# php - PHP Mysql Ajax 无限滚动

> ID：16119427
> 
> 赞同：1
> 
> 时间：2013-04-20T10:45:03.493
> 
> 标签：php, javascript, jquery

我正在使用下面的代码进行无限滚动，但我得到了 2 个“错误”。1\. 当它到达最后一条记录时，它会再次显示接下来的 4 条记录 2\. 当它到达最后并显示所有记录时，我没有收到“没有更多记录”的消息

**在我的 php 文件中，我得到了这个：**

```
<script type="text/javascript">
$(document).ready(function(){

   $(window).scroll(function() {

    if (  document.documentElement.clientHeight + $(document).scrollTop() >= document.body.offsetHeight )
    {           

    $("#myloaderias").fadeIn("fast");       

    $.ajax({ //START OF AJAX CALL
    url: "loadmore.php?lastComment=" + $(".imgholder:last").attr("id"),
    cache: false,
    success: function(html){            

        $("#myloaderias").fadeOut("fast");

        if(html){ //IF(HTML)
            $("#masterdivholder").append(html); //APPEND RESULTS IN THE DIV THAT HOLDS ALL THE IMAGES   
            $("#nmc").hide();   
        } else {    
            $("#nmc").fadeIn("fast'");
        }   //END IF(HTML)

    }//END SUCCESS FUNCTION 
    });//END OF AJAX CALL

    }   //END OF CHECK IF YOU ARE AT THE BOTTOM OF THE PAGE     
    }); //END OF (window).scroll(function(){

});
</script>

<div id="myloaderias" style="display:none;"><img src="images/ajax-loader.gif"></div>

<div id="loadMoreComments">
<div style="clear:both;"></div>
</div>

<div id="nmc">No More Results</div> 
```

**以及用于检索 inde.php 中数据的 php 代码：**

```
<?php

require "connectiondb.php";

$active = "1";
$mysql_query = mysql_query ("SELECT * FROM gallery WHERE active = '$active' ORDER BY id DESC LIMIT 0,30");
while($pic = mysql_fetch_assoc($mysql_query)) {

echo'   
<div class="imgholder" id="'.$pic['id'].'">
<div class="imgcaption">'.$pic['imgtitle'].'</div>
<div class="imgclass">
<a href="www"><img src="'.$pic['thumbpath'].'" width="210" height="140" alt="'.$pic['imgtitle'].'" style="-moz-border-radius: 6px; -webkit-border-radius: 6px;" border="0"/></a>
</div>
<div id="sharebox">
<div style="width:210px; height:32px; float: left; margin-top:3px;">
<div id="socialbox1"><a href="'.$pic['id'].'"><img src="socialicons/facebook.png" width="32" height="32" border="0" /></a></div>
<div id="socialbox"><a href="#"><img src="socialicons/twitter.png" width="32" height="32" border="0" /></a></div>
<div id="socialbox"><a href="#"><img src="socialicons/google.png" width="32" height="32" border="0" /></a></div>
<div id="socialbox"><a href="#"><img src="socialicons/youtube.png" width="32" height="32" border="0" /></a></div>
</div>
</div>
</div>';
}
?> 
```

**在下一个文件 loadmore.php 中：**

```
<?php
require "connectiondb.php";

if($_GET['lastComment']){

$lastcomment = $_GET['lastComment'];

$myquery = mysql_query ("SELECT * FROM gallery WHERE id < '$lastcomment' ORDER BY id DESC LIMIT 0,5");
while($pics = mysql_fetch_assoc($myquery)) {

echo'   
<div class="imgholder" id="'.$pics['id'].'">
<div class="imgcaption">'.$pics['imgtitle'].'</div>
<div class="imgclass">
<a href="www"><img src="'.$pics['thumbpath'].'" width="210" alt="'.$pics['imgtitle'].'" border="0" /></a>
</div>
<div id="sharebox">
<div style="width:210px; height:32px; float: left; margin-top:3px;">
<div id="socialbox1"><a href="'.$pics['id'].'"><img src="socialicons/facebook.png" width="32" height="32" border="0" /></a></div>
<div id="socialbox"><a href="#"><img src="socialicons/twitter.png" width="32" height="32" border="0" /></a></div>
<div id="socialbox"><a href="#"><img src="socialicons/google.png" width="32" height="32" border="0" /></a></div>
<div id="socialbox"><a href="#"><img src="socialicons/youtube.png" width="32" height="32" border="0" /></a></div>
</div>
</div>
</div>';
}

}
?> 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:15:24.527

尝试将 async: false 添加到 ajax 调用。这将解决正时化问题。

另一种解决方案更复杂，但您需要等待下一组记录才能执行下一次 ajax 调用。

# actionscript-3 - URLLoader 在适用于 Android 的 flex 4.6 移动项目中不起作用

> ID：16119431
> 
> 赞同：0
> 
> 时间：2013-04-20T10:46:11.437
> 
> 标签：actionscript-3, apache-flex, flash-builder, picasa

URLLoader 未在 Android Mobile 上调度 Event.COMPLETE 事件，尽管它在 Flash Builder 移动调试中正常工作。代码片段如下：

```
private function loadAlbumData():void
{
 var request:URLRequest = new URLRequest("https://picasaweb.google.com/data/feed/api/user/default");
    var urlloader:URLLoader = new URLLoader();
  urlloader.addEventListener(Event.COMPLETE, onLoadComplete);
  urlloader.load(request); 

}

private function onLoadComplete(evt:Event):void
{

   trace(evt.currentTarget.data);
} 
```

在这里，我从 Google 的 Picasa 服务请求专辑 XML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:28:53.950

从那个 XML 页面的外观来看，它正在提取与我相关的数据。最好的猜测是它依赖于登录谷歌来确定用户是谁。如果用户没有 Google cookie（通过退出 Google 进行测试），它会返回“需要授权”，这可能会作为 HTTP 状态错误而不是实际页面返回。因为应用程序是沙盒的，所以如果没有明确要求，cookies 不会在应用程序甚至系统之间共享（这可能需要 ANE）

在这种情况下，您有两个选择：

1.  弄清楚如何允许用户登录 Google、保存 cookie 并将其发送到请求中。我从未在 Flash 中处理过 cookie，所以我无法在这里为您提供帮助
2.  使用`https://picasaweb.google.com/data/feed/api/user/USERNAMEHERE`其中 USERNAMEHERE 是您要从中提取数据的帐户的用户名。

显然解决方案取决于这个特性的实现，所以我不会推荐使用哪一个。但这绝对是你的问题。

# javascript - 不明白为什么我会收到未捕获的参考错误函数

> ID：16119434
> 
> 赞同：-1
> 
> 时间：2013-04-20T10:46:27.140
> 
> 标签：javascript

我正在尝试从 PHP 启动 Javascript 函数来初始化模块。这是我的代码：

```
<?php
defined('_JEXEC') or die('Direct Access to this location is not allowed.');
$ParamArray[]='AdVisualV2jMODPHP_ver'; $ParamArray[]='0.3.0070'; // 000
$ParamArray[]='Station_ID'; $ParamArray[]=$params->get('Station_ID'); // 001
$ParamArray[]='Verbose'; $ParamArray[]=$params->get('Verbose'); // 002
$ParamArray[]='Bk_ColorODD'; $ParamArray[]=$params->get('Bk_ColorODD'); // 003
$ParamArray[]='Bk_ColorEVEN'; $ParamArray[]=$params->get('Bk_ColorEVEN'); // 004
$ParamArray[]='Ink_ColorODD'; $ParamArray[]=$params->get('Ink_ColorODD'); // 005
echo 'AVVIAMO LA PROCEDURA 0.0.095 - '.$Station_ID.'<br><br>';
echo '<div id="TabellaEventi"></div>';
$ParamArray = json_encode($ParamArray);
$ParamArray = htmlentities($ParamArray);
echo "<script language='javascript'>DisplayTable(0,15)</script>";
echo '<INPUT Type="BUTTON" VALUE="Avanti" ONCLICK="avanti('.$ParamArray.')"> ';
echo '<INPUT Type="BUTTON" VALUE="Indietro" ONCLICK="indietro('.$ParamArray.')"> ';
echo '<br>';
?>

<script>
Start = 0
Page = 15
// DisplayTable(Start,Page)

function avanti(Listaparametri) {
    Start=Start+Page+1
    DisplayTable(Start,Page)
}

function indietro(Listaparametri) {
    Start=Start-Page-1
    if (Start<0) {
        Start = 0
    }
    DisplayTable(Start,Page)
}

function DisplayTable(Inizio,Incremento) {
    xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange=function()
        {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            Esito=xmlhttp.responseText;
            }
        }
    xmlhttp.open('GET','xxxxxxxxxxxxxxxx/name.php?Start='+Inizio+'&Page='+Incremento,false);
    xmlhttp.send();
    Esito='VISUALIZZAZIONE TABELLA<br>'+Esito+'<br><br>'
    document.getElementById('TabellaEventi').innerHTML=Esito;
}
</script> 
```

当页面加载并且必须调用 DisplayTable javascript 函数时，我继续收到未捕获的引用错误 DISPLAYTABLE IS NOT DEFINED 在控制台中，而如果我删除脚本 Javascript 部分中的 // 则它可以正常工作。当然我遗漏了一些东西，我不明白是什么，谢谢你的帮助（我是 PHP/Javascript 初学者，我很抱歉）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T10:51:07.200

正如它所说， DisplayTable 在您调用它时没有定义。在调用它之前声明函数。通常您可以在声明函数之前调用它，但在您的情况下，您是从不同的脚本标签（在您的 PHP 中生成）调用它。

不管用 ：

```
<script type="text/javascript">
test();
</script>
<script type="text/javascript">
function test() { }
</script> 
```

将工作 ：

```
<script type="text/javascript">
test();
function test() { }
</script> 
```

并且 ：

```
<script type="text/javascript"></script> 
```

是您如何正确编写脚本标记。

编写代码时必须保持一致，它将帮助您发现错误，并且您也会少犯很多错误。

如果您使用：

```
bla bla {

} 
```

不要使用

```
bla bla
    {

    } 
```

别的地方。

不要忘记分号；指示后。保持清晰的身份等。

# javascript - JavaScript - 拖放事件未触发

> ID：16119435
> 
> 赞同：0
> 
> 时间：2013-04-20T10:46:43.230
> 
> 标签：javascript, jquery, events, drag-and-drop, mouse

我想让整个 HTML 块可拖动，而不仅仅是文本或图像，所以我想出了这个：http: [//jsfiddle.net/8D7YK/](http://jsfiddle.net/8D7YK/)

**当我释放鼠标按钮时，拖动结束事件不会触发。drop 事件也不会。你知道为什么吗 ？**

CSS：

```
html * {
    margin: 0;
    padding: 0;
    }
table {
    position: relative; 
    }
td {
    padding: 5px;
    background: #DDF;
    } 
```

JS：

```
(function($) {
    $(document).ready(function() {

        var $this;

        var mouseMoveHandler = function(e) {
            $this.css('position', 'fixed')
                 .css('top', e.pageY - $this.height() / 2)
                 .css('left', e.pageX - $this.width() / 2);
        };

        $('td').on({
            dragstart: function(e) {
                $this = $(this);
                $(window).bind('mousemove', mouseMoveHandler);
            },
            dragenter: function(e) {
                alert('dragenter');                 
            },
            dragleave: function() {
                alert('dragleave');
            },
            dragover: function(e) {
                e.preventDefault(); // Chrome / Safari
                alert('dragover');
            },
            drop: function(e) {
                alert('drop');
            },
            dragend: function(e) {
                var data = e.dataTransfer.getData('text/html');
                $this.html($(this).html());
                $(this).html(data);
                $(window).unbind('mousemove', mouseMoveHandler);
            },
            click: function() {
            }
        });

    });
})(jQuery); 
```

HTML：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <table>
            <tr>
                <td draggable="true">TEXT_00</td>
                <td draggable="true">TEXT_01</td>
                <td draggable="true">TEXT_02</td>
                <td draggable="true">TEXT_03</td>
                <td draggable="true">TEXT_04</td>
            </tr>
            <tr>
                <td draggable="true">TEXT_10</td>
                <td draggable="true">TEXT_11</td>
                <td draggable="true">TEXT_12</td>
                <td draggable="true">TEXT_13</td>
                <td draggable="true">TEXT_14</td>
            </tr>
            <tr>
                <td draggable="true">TEXT_20</td>
                <td draggable="true">TEXT_21</td>
                <td draggable="true">TEXT_22</td>
                <td draggable="true">TEXT_23</td>
                <td draggable="true">TEXT_24</td>
            </tr>
            <tr>
                <td draggable="true">TEXT_30</td>
                <td draggable="true">TEXT_31</td>
                <td draggable="true">TEXT_32</td>
                <td draggable="true">TEXT_33</td>
                <td draggable="true">TEXT_34</td>
            </tr>
            <tr>
                <td draggable="true">TEXT_40</td>
                <td draggable="true">TEXT_41</td>
                <td draggable="true">TEXT_42</td>
                <td draggable="true">TEXT_43</td>
                <td draggable="true">TEXT_44</td>
            </tr>
        </table>
    </body>
</html> 
```

谢谢你的帮助 ！

PS：我不打算使用 jQuery UI

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-13T13:19:27.090

脚本在您的**dragend**事件中停止

```
var data = e.dataTransfer.getData('text/html'); 
```

线。我试图在它工作之前和之后发出一些警报，但不是在它工作之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T14:36:30.307

我的猜测是您使用的是Firefox浏览器。MDN 表示，如果节点移动，基于壁虎的浏览器不会触发 'dragend' 事件。请检查此链接： [https ://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragend](https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API/Drag_operations#dragend)

我还检查了您问题中的 jsFiddle 链接，并将“dragstop”更改为“dragend”并在 chrome 中尝试了它，它有效。

我认为在“drop”中处理 unbind 会比在“dragend”中绑定它更有效

# java - 如何将字节字符串转换为字节[]

> ID：16119436
> 
> 赞同：1
> 
> 时间：2013-04-20T10:46:45.080
> 
> 标签：java

我遇到了将字节字符串转换为字节数组的转换问题。

即我有一个字符串“ **[B@1a758cb** ”。即主字符串“gunjan”的Base64加密字符串。在这里为了解密，我想将加密的字节字符串转换为字节 []。

但是 String.getByte[] 对我不起作用。String.getBytes[] 给出字节字符串的字节。

我怎样才能做到这一点 ？？我是否必须遍历字节字符串中的每个字符并将它们转换为 byte[] ？

**已编辑**

我正在使用 Apache Coded 3.1 jar 进行 Base64 转换。这是我从中获取此加密文本的代码..

```
String in = "gunjan";
byte[] byteStr = in.getBytes();
byte[] base64Encoded = Base64.encodeBase64(byteStr); 
```

这里base64Encoded的值为**[B@1a758cb**也可以看到图中的控制台日志。。![在此处输入图像描述](https://i.stack.imgur.com/5NeQL.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T11:53:23.503

首先，这里没有任何问题，因为解码后的字符串值 (gunjan) 等于原始值 (gunjan)。

您对中间字节数组打印的内容感到困惑。如评论中所述，字符串`[@Bxxxx`是在字节数组上调用 toString() 的结果。这不显示字节的值，而是显示数组的类型 ( `[@B`)，后跟数组对象的 hashCode。如果要显示字节值，请使用

```
System.out.println(Arrays.toString(byteArray)); 
```

但是，您有一个潜在的错误：您正在使用默认编码将字符串转换为字节，反之亦然。此编码可能无法支持字符串中的每个字符。您应该使用支持地球上所有字符的特定编码，例如 UTF8：

```
byte[] byteStr = string.getBytes("UTF8");
...
String str = new String (byteStr, "UTF8"); 
```

# javascript - Javascript/Html 中 41.000 个条目的自动完成弹出窗口？

> ID：16119437
> 
> 赞同：1
> 
> 时间：2013-04-20T10:46:46.123
> 
> 标签：javascript, jquery, html, autocomplete, popup

我尝试使用带有 41.000 个条目的 JQuery 自动完成弹出窗口来选择其中之一。它可以工作，但从用户的角度来看它太慢了。

是否有任何开源库提供能够支持这么多条目的自动完成功能？或者是否有任何其他类似的设计/功能可以用来对 41.000 个条目进行自动完成？如果没有可用的解决方案，有什么替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:49:52.180

您的问题不在于自动完成，而在于数据，因此解决方案应该是您可以索引或缓存结果。有许多可用的索引机制，我使用 Lucene 索引来执行处理如此大量数据的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:50:50.210

您应该使用 Ajax，例如 Google。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T13:27:33.560

好的，找到了解决方案。我已经实现[了自己的源函数](https://stackoverflow.com/questions/2382497/jquery-ui-autocomplete-widget-search-configuration)。它将返回的条目数限制为 12，并且可以与我的 41.000 个输入条目顺利配合。

# javascript - 使用 cURL 获取数据（JavaScript、PHP、jQuery）

> ID：16119438
> 
> 赞同：0
> 
> 时间：2013-04-20T10:46:50.330
> 
> 标签：javascript, jquery, api, curl

我在大学学习 webdev 和编程，并且想推进一些课程，所以我正在自学。我试图弄清楚 API 是如何工作的，我发现这个网站 HabitRPG ( [http://habitrpg.com](http://habitrpg.com) ) 有一个与 cURL 一起工作的 API。所以我对这一切都很陌生。

我想知道如何在没有客户端的情况下使用 cURL，无论是在 PHP、jQuery 还是 JavaScript 中。这是该站点的 API [https://github.com/lefnire/habitrpg/wiki/API](https://github.com/lefnire/habitrpg/wiki/API)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:02:39.243

这是解决方案。尝试一次......

HabitRPG API 的 PHP 类。

[习惯角色扮演游戏](https://github.com/ruddfawcett/HabitRPG_PHP)

# android - 强制字体大小

> ID：16119442
> 
> 赞同：1
> 
> 时间：2013-04-20T10:47:08.823
> 
> 标签：android, android-layout, font-size

在我的应用程序中有很多字符串，我用于`sp`大小。

昨天我在 android 的系统偏好设置中增加了字体大小，现在即使在我的应用程序中大小也更大，但这对我不利，因为我的应用程序中的一些字符串已经很大。

有一种解决方案可以强制字体大小而不考虑操作系统？

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T11:03:31.577

我不确定您为什么希望应用程序忽略系统设置。该功能适用​​于阅读小文本有困难的人。

而且我还没有遇到过让应用程序覆盖该功能的解决方案。如果您绝对必须尝试覆盖相同的内容，*我认为*（*请参见最后的注释*）将当前`sp`值更改为`dp` *应该*在理论上忽略设置。（*一些变化。见更新*）

`sp`专门用于字体大小 ( )，因此`android:textSize`它还支持用户可能为整个系统覆盖的设置。作为开发人员，您应该通过确保您的布局考虑并适应这种变化来考虑这种情况。

如果您仍然选择在您的应用程序中忽略它……对每个人来说都是他自己的。

*注意：我把重点放在**我认为**因为作为一个希望他的应用程序被喜欢和欣赏的开发人员，我不会考虑这样的覆盖，因此从未冒险测试它是否有效。如果我的理论已经过任何人的测试并且与我的相反，请发表评论。*;-)

更新：理论有效。;-)

在测试之前，我将系统字体大小设置为*巨大。*

请注意，背景中的字体保持不变。改变的是`AlertDialog`.

**`sp`使用应用程序中的相同设置更改大小后的第一次测试** ![使用应用中相同的 <code>sp</code> 设置更改大小后的第一次测试](https://i.stack.imgur.com/elwox.png)

**第二次测试保持相同的大小（巨大）但改变`sp`为`dp`** ![第二次测试保持相同的大小（巨大）但将 <code>sp</code> 更改为 <code>dp</code>](https://i.stack.imgur.com/ZX34f.png)

# javascript - 在使用 ajax 提交之前使用 javascript 验证表单？

> ID：16119450
> 
> 赞同：0
> 
> 时间：2013-04-20T10:48:03.440
> 
> 标签：javascript, jquery, ajax, validation

我一直在做一个网站，我想要一个漂亮的登录/注册/忘记密码表格。

我想使用 'ajax' 让它对用户更好，因此，在过去的两周里，我一直在陡峭的学习曲线上度过。

我想检查我的表单是否有效，所以我使用了一些 javascript 并通过 onsubmit 函数执行它。但是，我的 ajax 只是提交，所以现在我想知道我是否会更好地通过 jquery 脚本进行验证？

到目前为止，这是我的代码：

```
jQuery(document).ready(function($) {

$('#JTlogin_titleText').text("Register or log in");
$("input[type='submit'][name='submit']").val("Send");
$('#JTlogin_wrapper #forgotpass_div').hide();
$('#JTlogin_wrapper #matchPass_div').hide();

$('form#loginFormID #username').change(function(){
$('form#loginFormID span.JTlogin_usernameStaticMessage').hide();
$('form#loginFormID span.JTlogin_usernameErrorMessage').hide();
$('form#loginFormID span.JTlogin_usernameDynamicMessage').show();

$('form#loginFormID span.JTlogin_usernameDynamicMessage').html("<div class='login_message_box'><img src='"+ajax_login_object.ThemeFolder+"/images/loginbox/loading20x20.gif' class='JTloginFormImage'> checking...</div>");

          $.ajax({
                type:"post",
                dataType: 'json',
                url:ajax_login_object.ThemeFolder+ajax_login_object.auxFunctionsFolder+"/check_login_details.php",
                data: { 
                    'username': $('form#loginFormID #username').val() },                   
                    success:function(data){
                    if(data.existing_user == true){
                        $('form#loginFormID span.JTlogin_usernameDynamicMessage').html("<div class='login_message_box'><img src='"+ajax_login_object.ThemeFolder+"/images/loginbox/tick.png' class='JTloginFormImage'> Welcome back - please log in "+data.userFirstName+"</div>");
                        $('#loginSubmit').removeAttr("disabled");
                        $('#JTlogin_wrapper #matchPass_div').hide();
                    }
                    else{
                        if( data.errorMsg ) {
                            $('form#loginFormID span.JTlogin_usernameDynamicMessage').hide();
                            $('form#loginFormID span.JTlogin_usernameErrorMessage').show();
                            $('form#loginFormID span.JTlogin_usernameErrorMessage').html("<div class='login_message_box'><img src='"+ajax_login_object.ThemeFolder+"/images/loginbox/cross.png' class='JTloginFormImage'> "+data.errorMsg+"</div>");  
                            $('#JTlogin_wrapper #matchPass_div').hide();                            
                            $('#loginSubmit').attr('disabled', 'disabled');
                        } else {
                        $('form#loginFormID span.JTlogin_usernameDynamicMessage').html("<div class='login_message_box'><img src='"+ajax_login_object.ThemeFolder+"/images/loginbox/tick.png' class='JTloginFormImage'> Welcome - click submit to register</div>");
                        $("input[type='submit'][name='submit']").val("Register");
                        $('#JTlogin_wrapper #matchPass_div').fadeIn('slow');
                        $('#loginSubmit').removeAttr("disabled");
                      }
                    }
                }
             });
        });

// Perform AJAX forgot pass on form submit
$('form#forgotPassFormID').on('submit', function(e){
    $('form#loginFormID #JTlogin_titleText').text(ajax_login_object.loadingmessage);
    $.ajax({
                type:"post",
                dataType: 'json',
                url:ajax_login_object.ThemeFolder+ajax_login_object.auxFunctionsFolder+"/check_login_details.php",
                data: { 
                    'username': $('form#loginFormID #username').val(),
                    'resetpass': true },                   
                    success:function(data){
                        //alert('here');
                    }
    });
    e.preventDefault();
});

$('#loginFormID #change_to_forgot_pass').click(function(){
$('#JTlogin_titleText').text("Forgotten your password");
$('#JTlogin_wrapper #login_div').hide();
$('#JTlogin_wrapper #forgotpass_div').fadeIn('slow');
});

$('#forgotPassFormID #change_to_login').click(function(){
$('#JTlogin_titleText').text("Register or log in");
$('#JTlogin_wrapper #forgotpass_div').hide();
$('#JTlogin_wrapper #login_div').fadeIn('slow');
});

// Perform AJAX login on form submit
$('form#loginFormID').on('submit', function(e){
    $('#JTlogin_titleText').text(ajax_login_object.loadingmessage);

        $.ajax({
        type: 'POST',
        dataType: 'json',
        url: ajax_login_object.ajaxurl,
        data: { 
            'action': 'ajaxlogin', //calls wp_ajax_nopriv_ajaxlogin
            'username': $('form#loginFormID #username').val(), 
            'password': $('form#loginFormID #password').val(), 
            'password2': $('form#loginFormID #password2').val(),                
            'security': $('form#loginFormID #security').val() },
        success: function(data){
            $('#JTlogin_titleText').text(data.message);
            if (data.loggedin == true){
                document.location.href = ajax_login_object.redirecturl;
            }
        },
        error: function(data){ 
                alert("Apologies, there has been an error. Please try again."); 
        }
    });

    e.preventDefault();
});

}); 
```

我的表格有这个 onsubmit....

```
<form id="loginFormID" onsubmit="return validateLoginFormOnSubmit(this)" action="login" method="post" autocomplete="on"> 
```

然后我有一些javascript来检查表单是否正确填充，如果是则返回true，如果不是则返回false。

如果它返回 true，我只想执行我的 ajax 查询。

所以......我的问题是：1）你知道我会怎么做吗？2）有没有更好的方法来做到这一点？

我也觉得我的 jquery 东西正在增长胳膊和腿，并且觉得如果我对我正在做的事情有一个史酷比，我可能可以用更少的代码行来做我正在尝试的事情！所以..任何帮助都会非常感激。

干杯

约翰 ;-）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:31:58.567

```
<form id="loginFormID" onsubmit="return validateLoginFormOnSubmit();" method="post" autocomplete="on"> 
```

**JavaScript**

```
funciton validateLoginFormOnSubmit() {

        //do client side validation 

        if(true == validation) {
             //do the `ajax` call with serialized form data
        }
        else {
            //show error 
        }

        return false; // because we want to submit only through `ajax`, so stopping original form submit.
} 
```

# aem - 为什么我们在 CQ5 中有多个 jsp 用于单个组件？

> ID：16119456
> 
> 赞同：2
> 
> 时间：2013-04-20T10:48:45.150
> 
> 标签：aem, sling

我是 CQ5 的新手。在学习它的概念时，我了解到 CQ5 使用 Sling 框架进行请求处理并根据最佳匹配解析脚本。我在 CQ5 中看到很少有组件（其中大多数是页面或顶级组件）在单个组件下有多个 jsp（例如页面组件有 page.jsp、body.jsp、header.jsp 类似的重定向组件有重定向.jsp、body.jsp、content.jsp）。所以我想问在什么场景下，我们会有多个jsp，哪个脚本会被sling解析来显示内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T12:24:22.203

一个组件下有多个 jsp 的可能性与 sling 的关系比与 CQ 的关系更大（尽管 cq 还提供了框架上的一些扩展）。在顶级组件（例如页面组件）中拥有更多 jsp 的原因通常是为了捕获在某个较低级别发生包含的情况（因此包含文件的定义在那里，但实际文件是组件中不存在）。

在我看来，在一个组件下拥有多个 jsp 有 3 个主要原因（无论是什么级别），所有这些原因都可以同时应用于同一个组件

1.  将组件分解成更小（更易于维护）的部分
2.  覆盖渲染
3.  使用吊索选择器的力量

**场景 1：将组件分解为更小（更易于维护）的部分**

正如这里的标题所述，我们可以在一个组件中使用多个 jsp 来将该组件的呈现分成单独的部分，这些部分更易于维护和覆盖，或者两者兼而有之。“两者”情况是基础页面组件中发生的情况。但请查看场景 2 了解详情。

标准页面的渲染从具有模板的 cq 页面开始，该模板又指定用于渲染的组件。所以跳过模板部分，直接进入实际的基础页面组件。在 page.jsp 中呈现页面开始。通过包含“head.jsp”和“body.jsp”进一步分解它。他们反过来进一步分裂它。这允许您在子组件中覆盖页面组件的特定部分（参见场景 2）。

**场景 2：覆盖渲染**

假设您创建了自己的基础页面组件（常见做法），它继承自基础页面组件（通过 sling:resourceSuperType 属性），并且您只对在正文中吐出特定的 html 结构感兴趣。在这种情况下，您只需在该“基本页面”组件中创建一个 body.jsp 文件（仅此而已）。这实际上覆盖了正文（在基础页面组件中）的呈现，但默认为其他所有内容（例如 head、headlibs）等等，取决于父链中某处的这些文件的可用性。在我们的例子中，它将默认在基础页面组件中指定的文件上。该链将解析到您的基础组件，然后解析到基础页面组件（因为您那里只有 body.jsp 而没有 base.jsp）。在基础页面组件内部，页面。

我们在这里所做的工作适用于各个层面。当从“页面”组件之外的其他组件继承时，此概念也将起作用。例如，我用它来覆盖基础列表组件的渲染，其中我包含了一个 jsp (sling.jsp)，它又使用带有特定选择器的 sling 包含，然后制作从该列表组件继承的组件和将吊索包含选择器覆盖为其他内容。

**场景 3：使用吊索选择器的强大功能**

由于 sling 有“选择器”的概念，所以 sling 会沿着 sling 链向上找到正确的组件来渲染内容。Sling 将始终使用最具体的选择器进行渲染。

例如，假设我创建了一个继承自基础标题组件的标题组件。假设我在标题组件中有这个结构。

```
title.jsp
h2.jsp
fancy.jsp 
```

很明显 h2 和 fancy 是 title 组件的实际选择器

将多个 jsp 与选择器结合使用是一种常用的做法。这些用于以不同的方式显示基本相同的组件。

您还可以将该 h2.jsp 放在您的页面组件中。如果您正确设置链条，吊索会找到它。

选择器比我在这里描述的要多。但这只是问题的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T12:11:02.233

通常，一个组件由一个匹配请求的脚本呈现，我们称之为`GET.jsp`。

但是，在该脚本中，您只会发现对其他脚本的包含调用，例如 body.jsp、header.jsp。这样做是为了在`/apps`不覆盖完整的 GET.jsp 脚本的情况下覆盖另一个 header.jsp（例如 ）。

# php - PHP 回显显示 - Mysql 中缺少第一行

> ID：16119457
> 
> 赞同：0
> 
> 时间：2013-04-20T10:48:45.173
> 
> 标签：php, mysql, echo

我不确定为什么会这样。我在这里阅读了一些解释，但我自己似乎找不到。

在我的网站的系列和剧集列表中，我在回显结果时缺少第一行。解决此问题的任何帮助都会很棒。

这是剧集页面的编码

```
<?php include '../connect/dbseries.php' ?>

<?php   $result2 = mysql_query("SELECT 
                            seriesID, 
                            seasonindex, 
                            sortname, 
                            thumbfilename,
                            CurrentBannerFilename,
                            PosterBannerFileName, 
                            summary, 
                            IMDB_ID,
                            episodename,
                            episodeindex,
                            compositeid

                            FROM Series

                            WHERE seriesid = '$_GET[id]'

                            order by Seasonindex, Episodeindex ASC;");
if (!$result2) {
    echo 'Could not run query: ' . mysql_error();
    exit;
}
$row2 = mysql_fetch_row($result2);
//setup array
$ID = $row2['0'];
$seasonindex = $row2['1'];
$Sortname = $row2['2'];
$thumb = $row2['3'];
$Bannerfilenames = $row2['4'];
$currentbanner = $row2['5'];
$Summary = $row2['6'];
$imdb = $row2['7'];
$EN = $row2['9'];
$Eid = $row2['9'];
$cid = $row2['10'];

while($row=mysql_fetch_array($result2)){
echo  '<br /> <a href="seriesinfo.php?id='.$row['compositeid'].'"><img src="../images/series/'.$row['thumbfilename'].'" width="200" height="200"></a> "'.$row['summary'].'" "'. $row['episodename'] .'" "'. $row['episodeindex'] .'"' ;
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:54:21.457

您之所以失踪，是因为： $row2 = mysql_fetch_row($result2);

mysql_fetch_row 将内部数据指针向前移动，这就是您回显第二条记录的原因。尝试在while之前回显，您的问题应该得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:54:21.763

您正在获取第一行，设置变量，然后获取第 2 行 .... 修改您的 while

```
do {
    echo  '<br /> <a href="seriesinfo.php?id='.$row['compositeid'].'"><img src="../images/series/'.$row['thumbfilename'].'" width="200" height="200"></a> "'.$row['summary'].'" "'. $row['episodename'] .'" "'. $row['episodeindex'] .'"' ;
} while($row=mysql_fetch_array($result2)); 
```

或删除执行初始提取的代码行，以及 $row2 中的所有冗余变量分配

# sql - 在同一 SQL 语句中使用 where 和 have 时查询输出错误

> ID：16119459
> 
> 赞同：-1
> 
> 时间：2013-04-20T10:48:56.340
> 
> 标签：sql, oracle

```
select CURRENCY.currencyname, currency.currencysymbol, COUNTRYNAME.currencycode, 
       currency.exchangerate
from CURRENCY,COUNTRYNAME
where currency.currencycode=COUNTRYNAME.currencycode
having currency.exchangerate >= max(currency.exchangerate)
group by CURRENCY.currencyname, currency.currencysymbol, 
         COUNTRYNAME.currencycode, currency.exchangerate; 
```

这是我得到的输出，我知道这是错误的，因为我试图只显示最大汇率。因此，任何解决此查询的帮助将不胜感激。我是 oracle sql 开发者

```
CURRENCYNAME         CURRENCYSYMBOL       CURRENCYCODE EXCHANGERATE
-------------------- -------------------- ------------ ------------
British Pound        £                    GBP                     1,
US Dollar            $                    USD                1.9626 ,
Danish Krone         kr                   DKK                9.9918 ,
Malaysian Ringgit    RM                   MYR               6.35392 ,
Euro                 €                    EUR               1.34076 ,
Indian Rupee         Rs                   INR               77.3265 ,
Japanese Yen         ¥                    JPY               209.881, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:15:13.313

尝试以下

```
SELECT CURRENCY.currencyname, currency.currencysymbol, 
       COUNTRYNAME.currencycode, MAX(currency.exchangerate) as ExchangeRate
FROM CURRENCY
INNER JOIN COUNTRYNAME ON COUNTRYNAME.currencycode = currency.currencycode
GROUP BY CURRENCY.currencyname, currency.currencysymbol, COUNTRYNAME.currencycode; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:21:54.827

此查询可能可以简化为：

```
select max(currencyname), max(currencysymbol), currencycode, max(exchangerate)
from currency group by currencycode 
```

（-假设没有任何国家从未使用过的货币。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:19:42.817

关于您的查询...

`1`. 您无法将 MAX（聚合）值与同一查询级别内的基值进行比较。您可以使用派生表（又名“子查询”），例如

```
    选择 c.currencyname、c.currencysymbol、n.currencycode、c.exchangerate
    从货币 c
    在 c.currencycode=n.currencycode 上加入 COUNTRYNAME n
    其中 c.exchangerate = (select max(exchangerate) from currency)

```

`2`. 您会从上面注意到我使用 JOIN 来链接两个表。大约 21 年前，随着 ANSI-92 连接语法的出现，使用逗号列表的表名已经过时了。

`3`. 如图所示，您的查询无法正常工作。`GROUP BY`子句属于子句之前，而`HAVING`不是之后。话虽如此，上述第一点适用，无论如何您都无法将 MAX 值与（基）列值进行比较。

# java - 将值传递给 LoginModule 中的 sharedState 参数

> ID：16119460
> 
> 赞同：0
> 
> 时间：2013-04-20T10:48:58.320
> 
> 标签：java, security, ldap, jaas

LoginModule 接口有这个方法：

```
public void initialize(Subject subject, CallbackHandler callbackHandler,
                    Map<String, ?> sharedState, Map<String, ?> options); 
```

我可以通过扩展配置将值传递给选项（第四个参数）：

```
public class CustomConfiguration extends Configuration
{
    private Map<String, ?> options;
    private String loginModuleName;

    public CustomConfiguration()
    {
    }

    public CustomConfiguration(final String loginModuleName, final Map<String, ?> options)
    {
        this.loginModuleName = loginModuleName;
        this.options = options;
    }

    @Override
    public AppConfigurationEntry[] getAppConfigurationEntry(String name) 
    {
        AppConfigurationEntry entry = new AppConfigurationEntry(loginModuleName,
                                                                AppConfigurationEntry.LoginModuleControlFlag.REQUIRED,
                                                                options);
        return new AppConfigurationEntry[] { entry };
    }
} 
```

我正在尝试使用 LdapLoginModule。它使用 sharedState（第三个参数）值来获取用户名和密码（在 login() 中）：

```
username = (String)sharedState.get(USERNAME_KEY);
password = (char[])sharedState.get(PASSWORD_KEY); 
```

我的问题是，如何将值传递给 sharedState？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:04:56.653

那不是它的用途。它用于在LoginModules*之间*传递值。

# android - 单击链接时的iOS覆盖操作

> ID：16119462
> 
> 赞同：0
> 
> 时间：2013-04-20T10:49:01.447
> 
> 标签：android, ios, iphone, ipad, http

是否可以执行类似 Android 的操作来注册协议+域，
即`http://mydomain.com/<querystring>`在单击链接时将我的应用程序设为默认应用程序。我想这样做的原因是我想拥有这个链接的可移植性。我可以在 PC 上的浏览​​器上打开它，或者如果它在 iOS 设备上触发，我可以打开我的应用程序。

我知道我总是可以在网站上进行自己的重定向`http://mydomain.com -> myprotocol://`，但是用户体验很差，因为它会弹出 safari 然后弹出我的应用程序。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:55:02.133

URL Schemes 是您正在寻找的。

看看[这个教程](http://iosdevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)。

# mysql - 数据库超时 1 小时

> ID：16119464
> 
> 赞同：2
> 
> 时间：2013-04-20T10:49:11.953
> 
> 标签：mysql, time, unix-timestamp

我刚刚从以前的开发人员那里接手了一个新系统的开发工作，老实说，这真是一团糟。

所有的日记项目都提前1小时，保存格式为135538​​5600。负责时间的字段是start_time和end_time。

我需要一种方法来批量更新数据库中的所有条目并从中删除一个小时。

你们对我如何实现这一目标有任何想法吗？

干杯

**注意：**我应该提到默认时区正确设置为“欧洲/伦敦”，当您添加新的日记条目时，时间是正确的。不过，我需要做的是找到一种方法来批量更新数据库中的所有当前条目，以提前 1 小时返回。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:53:39.110

您需要设置时区。

对于我的网站，我使用 设置时区`date_default_timezone_set('Europe/Berlin')`，当我在数据库中插入日期时间时，我使用`date('Y/m/d H:i:s')`.

对于你的，而不是`date('Y/m/d H:i:s')`，它应该是`strtotime(date('Y/m/d H:i:s'))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T13:28:50.580

只需更新您的字段并增加一小时

```
UPDATE
    yourtable
SET
    start_time = start_time - 3600,
    end_time = end_time - 3600
WHERE
    start_time <= max time prior timezone fix 
```

编辑：当然是减法

# hyperlink - 如何在 extjs4 中处理控制器中的 dom 事件？

> ID：16119466
> 
> 赞同：0
> 
> 时间：2013-04-20T10:49:22.627
> 
> 标签：hyperlink, extjs4, extjs4.1, extjs-mvc

我在 Extjs4 中工作，并被困在如何捕捉超链接上的事件。我一直在努力，但无法解决。

这是我的代码：

**查看代码**

```
Ext.define('AM.view.user.linkView', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.Link',
    title: 'My Cool Panel',
    html: '<div><a href="#" id="linkId">This link will open a window</a></div><br /> <label for="myInput">Type here: </label><input name="myInput" type="text" value="" />',
}); 
```

**控制器代码**

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',

    stores: ['Users'],

    models: ['User','Book'],

    views: ['user.Edit', 'user.List','user.Create','user.linkView'],
    init: function() {
        this.control({
             'Link': {
                     afterrender: function(cmp)
                     {
                         Ext.get('#linkId').on('click', function(event, target) {
                            console.log(target);
                        }, this);
                     }
                 }
             });
        }
    }); 
```

当我运行上面的代码时，我得到了这个错误：

```
Uncaught TypeError: Cannot call method 'on' of null 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T22:27:02.030

将侦听器更改为：

```
afterrender: function(cmp) {
    cmp.mon(cmp.getEl(), 'click', function(event, target) {
        console.log(target);
    }, this, {delegate: '#linkId'});
} 
```

# android - 应用程序崩溃启动电话

> ID：16119469
> 
> 赞同：1
> 
> 时间：2013-04-20T10:49:34.400
> 
> 标签：android

我对为什么启动手机时应用程序崩溃感到完全困惑。

我的`AndroidManifest.xml`：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.callmenew"
android:versionCode="1"
android:versionName="1.0" >
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.USE_SIP" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.READ_PHONE_STATE"/>
<uses-permission android:name="android.permission.DISABLE_KEYGUARD" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<uses-feature android:name="android.hardware.sip.voip" />
<uses-feature android:name="android.hardware.wifi"  />
<uses-feature android:name="android.hardware.microphone"  />

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application android:label="@string/app_name" android:theme="@style/AppTheme" android:icon="@drawable/appslogo"> 
     <service android:name=".MService"/>
     <activity android:name=".Login">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".searchcall" android:screenOrientation="portrait"/>
    <activity android:name=".SoftwarePassionView" android:screenOrientation="portrait"/>
    <activity android:name=".MainActivity" android:screenOrientation="portrait"/>
    <activity android:name=".outcall" android:screenOrientation="portrait"/>
    <receiver android:name=".IncomingCallReceiver" android:label="Call Receiver" android:screenOrientation="portrait"/>
    <receiver android:name="com.callmenew.MyBroadcastReceiver" android:enabled="true" >  
<intent-filter>  
    <action android:name="android.intent.action.BOOT_COMPLETED" />  

    <category android:name="android.intent.category.DEFAULT" />
</intent-filter>  
 </receiver>
    <activity android:name=".incomingcallevent" android:screenOrientation="portrait"/>
    <activity android:name=".city" android:noHistory="true" android:label="City" android:screenOrientation="portrait"/>
    <activity android:name=".createAd" android:label="Create Your Advertisement" android:screenOrientation="portrait"/>
    <activity android:name=".rgtrUser1" android:label="Create Your Account" android:screenOrientation="portrait"/>
</application> 
```

我的`MyBroadcastreceiver`：

```
public class MyBroadcastreceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context arg0, Intent arg1) {
        // Intent startServiceIntent = new Intent(arg0, searchcall.class);
        // startServiceIntent.putExtra("starts", "starts");
        // startServiceIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        // arg0.startActivity(startServiceIntent);
        Toast.makeText(arg0.getApplicationContext(), "start", Toast.LENGTH_LONG).show();
    }
} 
```

我的服务类：-

```
 @Override
   public void onCreate() {
       super.onCreate();
       Toast.makeText(this, "Service created...", Toast.LENGTH_LONG).show();      
       Log.i(tag, "Service created...");
   }

   @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
       super.onStartCommand(intent, flags, startId);
        Toast.makeText(this, "Debug: SyncService onStartCommand", Toast.LENGTH_LONG).show();

        SharedPreferences settings = getSharedPreferences("calldata", Context.MODE_PRIVATE);
        sipAddress = settings.getString("sipAddress", "");

      // sipAddress=  intent.getStringExtra("sipaddress");
      // sipcallid = intent.getStringExtra("sipAddress");

       Toast.makeText(MService.this, "sipAddress = "+sipAddress+" sipcallid ="+sipcallid, Toast.LENGTH_LONG).show();

        IntentFilter filter2 = new IntentFilter();

        filter2.addAction("android.SipDemo.INCOMING_CALL");
        callReceiver2 = new IncomingCallReceiver();
        this.registerReceiver(callReceiver2, filter2);

         initializeManager(sipAddress);

        return START_STICKY;
    } 
```

原木猫：-

```
04-20 16:58:46.179: E/AndroidRuntime(294): FATAL EXCEPTION: main
04-20 16:58:46.179: E/AndroidRuntime(294): java.lang.RuntimeException: Unable to     instantiate receiver com.callmenew.MyBroadcastReceiver: java.lang.ClassNotFoundException: com.callmenew.MyBroadcastReceiver
04-20 16:58:46.179: E/AndroidRuntime(294):  at   android.app.ActivityThread.handleReceiver(ActivityThread.java:2100)
04-20 16:58:46.179: E/AndroidRuntime(294):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
04-20 16:58:46.179: E/AndroidRuntime(294):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
04-20 16:58:46.179: E/AndroidRuntime(294):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 16:58:46.179: E/AndroidRuntime(294):  at android.os.Looper.loop(Looper.java:137)
04-20 16:58:46.179: E/AndroidRuntime(294):  at android.app.ActivityThread.main(ActivityThread.java:4424)
04-20 16:58:46.179: E/AndroidRuntime(294):  at java.lang.reflect.Method.invokeNative(Native Method)
04-20 16:58:46.179: E/AndroidRuntime(294):  at java.lang.reflect.Method.invoke(Method.java:511)
04-20 16:58:46.179: E/AndroidRuntime(294):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
04-20 16:58:46.179: E/AndroidRuntime(294):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
04-20 16:58:46.179: E/AndroidRuntime(294):  at dalvik.system.NativeStart.main(Native Method)
04-20 16:58:46.179: E/AndroidRuntime(294): Caused by: java.lang.ClassNotFoundException: com.callmenew.MyBroadcastReceiver
04-20 16:58:46.179: E/AndroidRuntime(294):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-20 16:58:46.179: E/AndroidRuntime(294):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-20 16:58:46.179: E/AndroidRuntime(294):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-20 16:58:46.179: E/AndroidRuntime(294):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2095)
04-20 16:58:46.179: E/AndroidRuntime(294):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:50:20.290

使用以下权限

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" >
</uses-permission> 
```

然后像这样声明接收者

```
 <receiver
        android:name="com.callmenew.MyBroadcastReceiver"
        android:enabled="true" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </receiver> 
```

然后在代码中的 onReceive 中，我不确定您是否可以直接在那里显示吐司。如果没有，您可以启动服务并从那里显示吐司。（在最后一部分我没有尝试过，所以如果错了，请有人纠正我）

# windows - 分发没有源代码的免费软件

> ID：16119473
> 
> 赞同：-1
> 
> 时间：2013-04-20T10:50:24.593
> 
> 标签：windows

他们是像 Source Forge 这样的地方吗？在那里我可以分发免费的 Windows 应用程序而不用泄露源代码？

我对开源分发有些担忧。大多数人使用一个简单的好应用程序并对其进行调整和摆弄，直到其功能失调或失去其最初的目的，或者是一个带有太多故障的片状过度工作的怪物。这可能会破坏应用程序的声誉和功能。我完全支持赠送您编写的软件的想法，但我也不完全同意赠送源代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:00:07.030

只需打开一个免费网站（如 wordpress 或 godaddy）并将您的二进制文件放在那里。您需要将它们上传到服务器，然后发布指向它们的链接（“新版本可用！”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:28:19.510

试试 MajorGeeks，我认为这是一个有信誉的下载站点。

[http://majorgeeks.com/](http://majorgeeks.com/)

# visual-studio-2010 - 使用 NuGet 的 Web 项目中的 PostSharp

> ID：16119476
> 
> 赞同：2
> 
> 时间：2013-04-20T10:50:37.843
> 
> 标签：visual-studio-2010, nuget, nuget-package, postsharp

在我按照此处列出的步骤操作后：http: [//doc.postsharp.net//postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/41129237-a5d4-4acf-aef4-c46759ccfb4b.htm](http://doc.postsharp.net//postsharp-2.1/Default.aspx##PostSharp-2.1.chm/html/41129237-a5d4-4acf-aef4-c46759ccfb4b.htm)

它给了我这个错误：“在构建过程中没有引入 PostSharp。如果 NuGet 刚刚恢复了 PostSharp 包，则需要重新构建解决方案。”

你知道为什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-20T15:02:22.513

该`RequiresPostSharp.cs`文件旨在提供帮助，但并不总是正常工作。如果 PostSharp 正常工作，您可以[安全地删除该文件](http://support.sharpcrafters.com/discussions/problems/268-postsharp-is-not-introduced-in-the-build-process)。

# yii - 如果没有在 yii 中设置记住我选项，用户就无法登录？

> ID：16119479
> 
> 赞同：0
> 
> 时间：2013-04-20T10:50:55.273
> 
> 标签：yii

主要问题是用户在没有记住选项的情况下无法登录网站。我已经修改了登录功能来检查用户访问并重定向到他们的特定操作，但是如果用户在登录时没有选择记住我选项，它就不起作用了。这是我的登录操作代码..

```
if(isset($_POST['LoginForm']))
    {
        $model->attributes=$_POST['LoginForm'];
        if($model->validate() && $model->login()){
            $user_id = Yii::app()->user->id;

            $record=Users::model()->findByPk($user_id);
            if($record->masrole->name == 'Admin'){

                $this->redirect(array('//users/admin'));}
            if($record->masrole->name == 'Merchant'){ $this->redirect(array('//users/Description','user'=>$record->username));
            }

        }
    } 
```

这是我的配置文件。

```
'components'=>array(

            'user'=>array(
                'class' => 'WebUser',
                'allowAutoLogin'=>true,
                'autoRenewCookie' => true,
                'identityCookie' => array('domain' => '.xxxxx.com'),
                'loginUrl'=>'http://xxxxx.com/login',
                ),
            'session' => array(
                    'class' => 'CDbHttpSession',
                    'cookieParams' => array('domain' => '.xxxxxx.com'),
                    'timeout' => 3600,
                'connectionID' => 'db',
                    'sessionName' => 'session',
                 ), 
```

这是我的模型登录功能

```
public function login()
{
    if($this->_identity===null)
    {

        $this->_identity=new UserIdentity($this->email,$this->password);

        $this->_identity->authenticate();
    }
    if($this->_identity->errorCode===UserIdentity::ERROR_NONE)
    {

        $duration=$this->rememberMe ? 3600*24*30 : 0; // 30 days
        Yii::app()->user->login($this->_identity,$duration);
        return true;
    }
    else{ 
        return false;
    }
} 
```

这是 WebUser.php

```
class WebUser extends CWebUser {

private $_model;

 function isAdmin(){
   $user = $this->loadUser(Yii::app()->user->id);
   return intval($user->mas_role_id) == 1;

    }

   function isMerchant(){
    $user = $this->loadUser(Yii::app()->user->id);
    return intval($user->mas_role_id) == 2;
    }

 }

// Load user model.
  protected function loadUser($id=null)
  {

  if($this->_model===null)
  {
      if($id!==null)
      $this->_model=Users::model()->findByPk($id);
  }
  return $this->_model;
  }
} 
```

最后这是用户身份

```
class UserIdentity extends CUserIdentity
{

private $_id;

public function authenticate()
{
    $ctiteria = new CDbCriteria;
    $ctiteria->condition = "email = '".$this->username."' OR username =     '".$this->username."'";
    $record=Users::model()->find($ctiteria);

    if($record===null)
        $this->errorCode=self::ERROR_USERNAME_INVALID;
    else if ($record->status != 1)
        $this->errorCode=self::ERROR_USERNAME_INVALID;

    else if($record->password !== md5($this->password))
        $this->errorCode=self::ERROR_PASSWORD_INVALID;
    else
    {
        $this->_id = $record->id;
        $this->setState('title', $record->email);
        $this->errorCode=self::ERROR_NONE;
    }
    return !$this->errorCode;

}
public function getId()
{
    return $this->_id;
}
}
function isAdmin(){
$user = $this->loadUser(Yii::app()->user->id);
return intval($user->mas_role_id) == 1;

}

 function isMerchant(){
  $user = $this->loadUser(Yii::app()->user->id);
  return intval($user->mas_role_id) == 2;
}
 protected function loadUser($id=null)
  {

  if($this->_model===null)
  {
      if($id!==null)
      $this->_model=Users::model()->findByPk($id);
  }
  return $this->_model;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:15:50.933

这条线很重要

```
if($this->_identity->errorCode===UserIdentity::ERROR_NONE)
{

    $duration=$this->rememberMe ? 3600*24*30 : 0; // 30 days
    Yii::app()->user->login($this->_identity,$duration);
    return true;
} 
```

确保你的执行进入这个块...尝试 var_dump() 来调试错误代码

[http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#handling-authorization-result](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#handling-authorization-result)

第 5 章

如果浏览器重定向到登录页面并且登录成功，我们可能希望将浏览器重定向回导致授权失败的页面。我们如何知道该页面的 URL？我们可以从用户组件的 returnUrl 属性中获取这些信息。因此，我们可以执行以下操作来执行重定向：

`Yii::app()->request->redirect(Yii::app()->user->returnUrl);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T08:39:34.793

只是为了回复是否有人遇到同样的问题。很可能只是您在 config/main.php 中的会话名称中有一个空格

删除名称中的空格并设置 'cookieMode' => 'allow' 或 'cookieMode' => 'only'。然后清除您的 cookie，它应该可以在不记得我的情况下工作。

# iphone - 将uiimage转换为二进制数据

> ID：16119480
> 
> 赞同：0
> 
> 时间：2013-04-20T10:51:04.753
> 
> 标签：iphone, objective-c, uiimage

在我的应用程序中，我正在将图片从照片库上传到 UIImageView 。使用这一步 NSData *imageData = UIImageJPEGRepresentation(imageView.image, 0.9); 正在获取图像数据。

我想以二进制格式将此图像插入到服务中。

如何获取图像的二进制数据。请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:03:42.060

NSData 本身是二进制数据。您可以在二进制数据中提供 NSData 对象。

# javascript - 为订阅框创建透明背景

> ID：16119484
> 
> 赞同：0
> 
> 时间：2013-04-20T10:51:38.373
> 
> 标签：javascript, jquery, html, css

现在这对我来说真的很难，而且我无法解决这个问题。我希望你们中的许多人一定看过一个站点，当您进入该站点时，您会看到主页.. 但是随后出现一个透明层并显示订阅框，上面有一个关闭按钮。谁能帮忙..只是布局..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:00:57.333

很简单，就是这样完成的

```
<div class="subscribeContainer">
   subscribtion box here...
</div>
<style>
    .subscribeContainer{
       position:fixed;
       left:0;
       right:0;
       bottom:0;
       top:0;
       background:transparent;/* Default Anyway or  next line */
       background:rgba(0, 0, 0, 0.5); /* Semi Transparent */
       display:none;/* Hidden By Default Now */
    }
</style> 
```

然后你可以像这样使用 jquery 淡化 .subscribeContainer

```
$(document).ready(function(){
    $('.toggleSubscribeButton').on('click', function(){
       $('.subscribeContainer').fadeIn('slow');
    });
}); 
```

或者，如果您希望它在窗口加载时淡入，就像这样

```
$(window).load(function(){
   $('.subscribeContainer').fadeIn('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T20:07:36.817

无需使用任何 JavaScript 只需添加 opacity:0.6; 有关详细信息，请访问链接：[http ://www.w3schools.com/css/css_image_transparency.asp](http://www.w3schools.com/css/css_image_transparency.asp)

# c++ - 对齐文本并更改空格数量

> ID：16119486
> 
> 赞同：0
> 
> 时间：2013-04-20T10:52:02.680
> 
> 标签：c++, c

我正在尝试格式化我的字符串，因为我有两个字符串，其中一个包含：“1”和

第二个包含：“test”并希望将带有空格的整个字符串输出为：

**1 次测试**

我是这样说的：

```
printf("%-10s %s", "1", "test"); 
```

但是如何在不更改格式的情况下更改空格“ %-10s ”？

```
int amount_of_space = 10;

like: printf("%-*s %s", "1", "test", amount_of_space) 
```

我怎么做？？？在 C 或 C++ 中，请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T10:55:29.330

`printf("%-*s %s", amount_of_space, "1", "test" );`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T10:56:00.127

```
printf("%-*s %s", amount_of_space, "1", "test" ) ; 
```

* 在格式字符串中首先出现 - 因此参数`amount_of_space`必须在逗号之后出现。

即在格式字符串中，顺序是*、s & s - 所以在逗号之后，您需要填写*、第一个字符串和第二个字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T10:56:39.437

用这个： `printf("%-*s %s", amount_of_space, "1", "test" );`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T11:06:39.470

在 C++ 中，它将是：

```
cout << left << setw(amount_of_spaces) << "1" << "test"; 
```

# sql - 如何显示所有结果？

> ID：16119490
> 
> 赞同：0
> 
> 时间：2013-04-20T10:52:49.113
> 
> 标签：sql, plsql

我的桌子下面由**不同**颜色的球队组成，这些球队*打过*另一种颜色并获得**积分**。

```
 CREATE TABLE COLOURS
   (C_ID VARCHAR2 (4) NOT NULL,
    HC VARCHAR2 (4),
    AC VARCHAR2 (4),
    TOTAL NUMBER (2),
    SCORES NUMBER (2));

  INSERT INTO COLOURS VALUES
  ('C1', 'RED', 'BLUE',8,'');

  INSERT INTO COLOURS VALUES
  ('C2', 'RED', 'BLUE', 9,'');

  INSERT INTO COLOURS VALUES
  ('C3','BLUE', 'RED', 10,'');

  INSERT INTO COLOURS VALUES
  ('C4','BLUE', 'RED', 11,''); 
```

接下来，我创建了一个计算团队总分的函数：

```
 CREATE OR REPLACE FUNCTION TOTAL  (i_HC   COLOURS.HC%TYPE)
 RETURN NUMBER              
  IS
v_COLOURS_total     COLOURS.total%TYPE;  

   BEGIN
    SELECT SUM (TOTAL)
    INTO v_COLOURS_total             
    FROM COLOURS            
    WHERE 
HC = i_HC;  

 IF v_COLOURS_total  IS NULL THEN             
  v_COLOURS_total:=0;                   

 END IF;

 RETURN v_COLOURS_total;            

 END; 
```

最后是调用该函数并一一显示每个团队的结果的过程：

```
 CREATE OR REPLACE PROCEDURE COLOURS_SCORES (dnum VARCHAR2)
   IS                                                     
   W_HC   COLOURS.HC%TYPE;       
   W_C_ID COLOURS.C_ID%TYPE;
   W_TOTAL  COLOURS.TOTAL%TYPE;             
   W_SCORES     NUMBER(2);              
   TOTALSCORES  NUMBER(5,2);    

    CURSOR COLOURS_CURSOR IS            
SELECT HC,C_ID,TOTAL,SCORES 
FROM  COLOURS
    WHERE HC = dnum;
    BEGIN

    DBMS_OUTPUT.PUT_LINE(' '||'COLOURS POINTS '||'  '); 

   OPEN COLOURS_CURSOR;

    TOTALSCORES :=TOTAL(dnum);    
     LOOP

FETCH COLOURS_CURSOR INTO W_HC,W_C_ID,W_TOTAL, W_SCORES;
EXIT WHEN COLOURS_CURSOR%NOTFOUND;
    DBMS_OUTPUT.PUT_LINE(W_C_ID || '----'|| W_TOTAL ||'  ');

    END LOOP;
    DBMS_OUTPUT.PUT_LINE('---------------------------------------');
    DBMS_OUTPUT.PUT_LINE(W_HC||' '||'FINAL SCORE = '||TO_CHAR(TOTALSCORES));
    DBMS_OUTPUT.PUT_LINE('---------------------------------------');
    CLOSE COLOURS_CURSOR; 

     END; 
```

现在，在执行该过程后，例如`EXECUTE COLOURS_SCORES ('RED');` 我得到颜色的结果：

*   如果参数是**RED**我得到 `(17)`.

*   如果参数是**BLUE**我得到`(21)`.

我的问题是：

*   是否可以显示**两个**团队的结果并按最高**总数****排序**？

***   或者也许，我只需要一个***函数***吗？** 

 **> *帮助将不胜感激，在此先感谢。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:03:18.410

为什么不使用在查询上打开光标来提供这些信息呢？就像是：

```
SELECT HC, SUM (TOTAL) as Total
FROM COLOURS            
GROUP BY HC
ORDER BY SUM(TOTAL) DESC 
```

有了这个查询，就不需要这个函数了。

## 更新

当您想使用该功能时，您可以尝试以下操作：

```
SELECT HC, C_ID, TOTAL, SCORES, TOTAL(HC) as TOTALSCORES
FROM  COLOURS
ORDER BY TOTAL(HC); 
```

我没有对此进行测试，因为我不在 PC 附近，但它应该可以工作。**

# nstableview - 自定义 NSOutlineView 行编辑

> ID：16119495
> 
> 赞同：1
> 
> 时间：2013-04-20T10:53:39.717
> 
> 标签：nstableview, nsoutlineview

我已经`NSOutlineView`配置为 SourceList。当我双击一行时，它变得可编辑，我想修改那个 TextField（或 NSTextView？）的外观。有谁知道该怎么做？谢谢！

# sql-server - 将值添加到sql server中的单个列中

> ID：16119498
> 
> 赞同：0
> 
> 时间：2013-04-20T10:54:22.557
> 
> 标签：sql-server, sql-server-2008, select, patindex

在我的表中，我有经验字段，例如

经验

*   5年0个月

*   2年0个月

在这里，我想转换为秒，然后将年份和月份添加到单个列中。

经验 - [一些价值]

所以我创建了一个如下查询，

```
select top(10)'insert into candidates(experience)values('+

CAST(SUBSTRING(CAST(o.Experience AS VARCHAR(50)), 0, PATINDEX('%Years%', o.Experience))      * 31536000 AS VARCHAR(50))

           +','+CAST(SUBSTRING(CAST(o.Experience AS VARCHAR(50)), PATINDEX('%Years%', o.Experience) + 5

        ,patindex('%Months%', o.Experience) - PATINDEX('%Years%', o.Experience) - 5) * 
2678400 AS VARCHAR(50))+')'

            from candidatedetails as o 
```

从上面的代码我得到的结果是，

**经验**

```
insert into candidates(experience)values(157680000,0)
insert into candidates(experience)values(31536000,26784000) 
```

**预期结果**

```
 insert into candidates(experience)values(157680000)
 insert into candidates(experience)values(58320000)//add(31536000+26784000) 
```

如何在我的查询中做到这一点？有人帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:13:08.197

你想要的是变成这样的东西（当前生成）

```
insert into candidates(experience)values(157680000,0)
insert into candidates(experience)values(31536000,26784000) 
```

为此，这将总结他们

```
insert into candidates(experience) select 157680000+0;
insert into candidates(experience) select 31536000+26784000; 
```

这看起来像更改您的原始代码类似：

```
select top(10) 'insert into candidates(experience) select '+
        CAST(SUBSTRING(CAST(o.Experience AS VARCHAR(50)), 0,
             PATINDEX('%Years%', o.Experience)) * 31536000 AS VARCHAR(50))
   +'+'+CAST(SUBSTRING(CAST(o.Experience AS VARCHAR(50)),
             PATINDEX('%Years%', o.Experience) + 5,
             patindex('%Months%', o.Experience)
           - PATINDEX('%Years%', o.Experience) - 5) * 2678400 AS VARCHAR(50))+';'
from candidatedetails as o 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:18:46.727

我找到了答案，

```
SELECT TOP(10) 'INSERT INTO jobs(Experience) VALUES('+
        CAST(SUBSTRING(CAST(r.experience AS VARCHAR(50)), 0, PATINDEX('%Years%', r.experience))*31536000
            + SUBSTRING(CAST(r.experience AS VARCHAR(50)), PATINDEX('%Years%', r.experience) + 5, 
                                                       patindex('%Months%', r.Experience) - PATINDEX('%Years%', r.Experience) - 5)* 2678400 AS VARCHAR(50))+')'
    FROM  candidatedetails r 
```

# html - 始终在页面底部以 HTML 格式显示图像

> ID：16119499
> 
> 赞同：-1
> 
> 时间：2013-04-20T10:54:26.570
> 
> 标签：html, image, footer

我正在开发一个基本的 html 网页，但我仍在学习它，这就是这个愚蠢问题的原因。

所以基本上我有这个图像，它是一个栏，我希望它位于页面底部并保持在该位置，即使您在页面上滚动也是如此。所以基本上它总是可见的。我猜你可以称它为页脚，但它应该总是可见的。

希望你明白我的意思。

我该怎么做呢？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:56:04.227

在您的 CSS 中设置如下内容：

```
#footer {
    position: fixed;
    bottom: 0px;
    /* eventually */
    left: 0px;
    width: 100%;
    height: 20px;
    z-index: 101;
} 
```

这应该可以解决问题 - 将其应用于 DIV 元素并将图像放入其中或将其设置为背景。

# cuda - 当多个内核被发送到设备执行时会发生什么？

> ID：16119503
> 
> 赞同：1
> 
> 时间：2013-04-20T10:55:03.523
> 
> 标签：cuda, gpu

假设我已经向设备发送了两个连续的内核调用。它是等待完成第一个还是同时执行它们？如果它们是并行执行的，它们是否会相互交叉以进行内存访问？在 CUDA 中用于这种情况的范例是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T00:24:20.737

*在以下情况*下，对同一 CUDA 设备的两个连续内核启动将同时运行：

1.  它们是从相同的 CUDA 上下文启动的。
2.  它们在不同的 CUDA 流上执行。
3.  设备支持并发（Compute 2.0 及更高版本）。
4.  有足够的资源（寄存器、共享内存、线程块）来同时支持来自两个内核的线程块。

有关详细信息，请参阅[CUDA C 编程指南中的此部分](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#asynchronous-concurrent-execution)。

正如 sgar91 所评论的，如果这些内核共享全局内存，那么程序员有责任编写一个正确同步的程序以避免竞争条件。如果两个内核只*读取*相同的内存，那么就不会存在竞争条件。

# php - 在自定义类的构造函数中初始化 Codeigniter 实用程序

> ID：16119505
> 
> 赞同：0
> 
> 时间：2013-04-20T10:55:19.887
> 
> 标签：php, codeigniter

我已经做了几个月的 CI 并且到了我想在 CI 上创建自己的库类的地步。现在，我的问题是我似乎无法获得 CI 的实例来利用它的本地资源。我已经做到了。

```
class MyClass{
     protected $instance;
     public function __construct()
     {
        $this->$instance = &get_instance(); <-- this is what i did (theoretically speaking)

     }
  } 
```

**我尝试过的其他事情**

```
class MyClass{

     protected $instance = &get_instance(); <-- reports a syntax error on Apatana

     public function __construct()
     {

     }
  } 
```

你们中的任何人都可以让我更好地了解如何获取实例（在源代码上将其初始化为一个点）<-据说，我只想获取一次实例并继续使用它我的**班级**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:15:07.363

```
you can use it in this way
in constructor
$this->ci = & get_instance();

then you can use it like 
$this->ci->load->model(); 
```

# android - 如何将基本代码转化为更高效的 AQuery 代码

> ID：16119507
> 
> 赞同：0
> 
> 时间：2013-04-20T10:55:42.397
> 
> 标签：android, android-query

[我的问题是关于使用 AQuery 延迟图像加载](http://code.google.com/p/android-query/wiki/ImageLoading)

所以我的应用程序是这样的：我读取了一个包含各种信息和图像链接的 json（这是在 AsyncTask 的过程 doInBackground 中完成的）。此外，在阅读此过程中的链接后，我还阅读了图片（有关更多信息，请参阅下面的代码）

```
 class GetMessages extends AsyncTask<String, Void, String> {

    @Override
protected String doInBackground(String... params) {
    HttpClient httpClient = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(uri);

            // code that reads the json .......
    Bitmap picture = null;
    try {
      URL newurl = new URL(json.getString("pic_url"));
      picture = BitmapFactory.decodeStream(newurl.openConnection() .getInputStream());
    }catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
    }

            // after this, i put all the read info, and the pics in a list of 
            // objects, that is then usen in the method onPostExecute to populate
            //  my custom adapter ...see code below 

static class ViewHolder {
ImageView picView;
 }

public class MyCustomBaseAdapter extends BaseAdapter  {

    private LayoutInflater mInflater;

    private ArrayList<Product> products;

    public ArrayList<Product> getProducts() {
        return products;
    }

    public void setProducts(ArrayList<Product> products) {
        this.products = products;
    }

    public MyCustomBaseAdapter(Context context, ArrayList<Product> products) {
         this.products = products;
         this.mInflater = LayoutInflater.from(context);
     }

     public int getCount() {
         return products.size();
     }

     public Object getItem(int position) {
         return products.get(position);
     }

     public long getItemId(int position) {
         return position;
     }

     public View getView(int position, View convertView, ViewGroup parent) {

         ViewHolder holder;

         if (convertView == null) {
             convertView = mInflater.inflate(R.layout.product_item, null);
             holder = new ViewHolder();
             holder.picView = (ImageView) convertView.findViewById(R.id.pic_view);

             convertView.setTag(holder);

         } else {
             holder = (ViewHolder) convertView.getTag();
         }

         holder.picView.setImageBitmap(products.get(position).getPicture());

         return convertView;
     } 
```

正如你已经知道的那样……如果我有 15 张照片……用户在加载所有信息之前就昏昏欲睡……

1.  我想做的是使用您的延迟图像加载...但是，我似乎无法将这些部分放在一起...我应该如何修改我的适配器？
2.  我是否基本上从您的 wiki 页面添加代码，并使用它而不是我的方法 get view ？...任何帮助或指向比维基上的更完整示例的链接，都会帮助像我这样的初学者:)
3.  这个框架也可以在商业应用程序中使用吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T18:24:00.030

以下是使用 shouldDelay 的演示源代码：

[https://github.com/androidquery/androidquery/blob/master/demo/src/com/androidquery/test/image/ImageLoadingListActivity.java](https://github.com/androidquery/androidquery/blob/master/demo/src/com/androidquery/test/image/ImageLoadingListActivity.java) [https://github.com/androidquery/androidquery/blob/master/demo/src /com/androidquery/test/image/ImageLoadingList4Activity.java](https://github.com/androidquery/androidquery/blob/master/demo/src/com/androidquery/test/image/ImageLoadingList4Activity.java)

尝试一次做 1 步。

我建议您只需像示例中那样替换 getView 方法中的几行，然后使用 aq.image 来加载带有 URL 的图像。

代替：

```
holder.picView.setImageBitmap(products.get(position).getPicture());

with:

AQuery aq = new AQuery(convertView);
aq.id(holder.picView).image(products.get(position).getPicture()); 
```

之后添加 shouldDelay 以提高效率。

答案属于关于这个框架的大师之一 Peter Liu :)

# c# - FTP 上传超时，但上传文件

> ID：16119509
> 
> 赞同：1
> 
> 时间：2013-04-20T10:55:52.893
> 
> 标签：c#, monodevelop, ftpwebrequest

我试图弄清楚这个元素，我已经制作了一个 ftp 模块，其中包含几个动作，除了上传方法之外，它们都可以正常工作。事实上它确实有效，但它仍然返回错误。

所以一段时间后我得到一个超时错误，但是当我检查我的 ftp 时，文件被成功添加。所以我无法理解这个功能..

我的代码：

```
public static Boolean upload(string remoteFile, string localFile, string applicatie_url) {
        Boolean returnbool = false;

        try {

            FtpWebRequest ftpRequest;
            FtpWebResponse ftpResponse = null;
            Stream ftpStream = null;

            ftpRequest = (FtpWebRequest)FtpWebRequest.Create(host + "/" + remoteFile);
            ftpRequest.Credentials = new NetworkCredential(user, pass);
            ftpRequest.UseBinary = true;
            ftpRequest.UsePassive = true;
            ftpRequest.KeepAlive = true;
            ftpRequest.Method = WebRequestMethods.Ftp.UploadFile; // upload

            byte[] b = File.ReadAllBytes(localFile);
            ftpRequest.ContentLength = b.Length;
            ftpStream = ftpRequest.GetRequestStream();

            try {

                ftpStream.Write(b, 0, b.Length);
                ftpResponse = (FtpWebResponse)ftpRequest.GetResponse();
            } catch (Exception ex) {
                                  // Error catching
            }

            // Cleanup
            ftpStream.Close();
            ftpRequest = null;
            ftpResponse = null;
            returnbool = true;

        } catch (Exception ex) { 
          // Error catching
        }

        return returnbool;
    } 
```

我的前消息：“传输超时。”

我的 ex.stacktrace ：''在 System.Net.FtpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x00052] 在 /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/ Profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/System/System.Net/FtpWebRequest.cs:411 在 System.Net.FtpWebRequest。 GetResponse () [0x00009] 在 /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10。 11/_build/mono-2.10.11.git/mcs/class/System/System.Net/FtpWebRequest.cs:426 at AutoPolis.FTPHelper.upload (System.String remoteFile, System.String localFile, System.String applicatie_url) [ 0x00078] 在 /Users/.../App_Code/FTPHelper.cs:92 '

任何帮助，将不胜感激。我使用 MonoDevelop 作为 IDE 在我的 Mac 上工作，不知道这是否会给这个元素带来任何机会..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:08:07.000

我过去看过一些 ftp 程序，注意到在你的代码清理中，你写了 ftpResponse = null; 但我会选择“ftpResponse.Close();”。您的堆栈跟踪似乎提到了 FTPWebRequest，所以这可能会有所帮助！

ps这可能会有所帮助： http: [//www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class](http://www.codeproject.com/Tips/443588/Simple-Csharp-FTP-Class)

# javascript - 使用 formdata Internet Explorer 10 上传 Ajax 文件

> ID：16119510
> 
> 赞同：0
> 
> 时间：2013-04-20T10:55:56.470
> 
> 标签：javascript, ajax, html, file-upload, internet-explorer-10

我一直在寻找解决方案，但从未成功。我有一个带有 formdata 的 ajax 调用，用于将图像上传到服务器。代码看起来像

```
$.ajax({

    type:'POST',

    url:'url',

    data:UPLOAD_DATA,

    processData:false,

    contentType:false,

    cache:false,

    timeout:10000,

    mimeType:'multipart/form-data',

    dataType:'json',

    success:function(data){

        if(data.success){

            alert(data.success);

        }else if(data.redirect){

        window.location.redirect=data.redirect;

        }else{

            alert(JSON.stringify(data));

        }

    }

}); 
```

虽然发送控制台仍然显示“挂起”。此代码适用于除 ie10 以外的所有浏览器

请帮我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:10:00.630

以前的 IE 版本（8 和以前的版本）不接受对多部分表单的 ajax 提交的 JSON 响应。因此导致永远不会进入成功回调，并且在某些情况下建议用户将 JSON 响应下载为文本文件。

我想IE10没有犯同样的错误。如果是这样，您可能会考虑将 JSON 内容作为文本返回，将请求数据类型设置为文本，并在成功回调中将文本响应解析回 JSON 客户端。

然而，在寻找头痛之前，请看一下[jQuery Form 插件](http://malsup.com/jquery/form/)，它可以处理表单的 ajax 提交（无论是否多部分），并提供像有用的 uploadProgress 一样的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:36:19.423

对不起，这是一个愚蠢的错误。我认为 url 作为服务器中的相对路径在 Internet Explorer 中不支持，通过提供完整的 https://" ..." 路径解决了这个问题。

# php - 如何使用 PHP 将 .flac 转换为 .mp3

> ID：16119516
> 
> 赞同：1
> 
> 时间：2013-04-20T10:56:21.733
> 
> 标签：php, mp3, converter, flac, audio

对于我的个人网站，我想为我和我的朋友实现一个小工具。此脚本的目的应该是将上传的 .flac 音频文件转换为 .mp3，选择音乐质量，例如 128kbit/s 或 320kbit/s。这可能吗？如果可以，怎么办？有趣的只是核心部分（转换），其余的我已经实现了:)

非常感谢:)）尼克拉斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T14:31:51.633

你熟悉ffmpeg吗？如果它安装在您的服务器上，您可以尝试在 CLI 上运行

```
ffmpeg -i input.flac output.mp3 
```

如果可行，您可以继续尝试将该命令从您的应用程序传递到 shell（例如，如果您将 PHP 用于您的应用程序并使用 Debian Linux 作为主机。）

要包括您可以使用的比特率

```
ffmpeg -i input.flac -ab 128k output.mp3 
```

或者

```
ffmpeg -i input.flac -ab 320k output.mp3 
```

如果您可以使用它，另请参阅文档： http: [//ffmpeg.org/ffmpeg.html](http://ffmpeg.org/ffmpeg.html) 您可能必须根据您的版本对比特率使用不同的命令。

# java - 为什么我需要在此加密中使用 Base64

> ID：16119518
> 
> 赞同：1
> 
> 时间：2013-04-20T10:56:38.587
> 
> 标签：java, security, encryption, base64

我在 java.In 中看到了加密，以生成他们拥有的密钥

```
 KeyGenerator keyGen = KeyGenerator.getInstance("DES");
 Key secretKey = keyGen.generateKey();

 byte[] keyBytes = secretKey.getEncoded()
 Key secretKey = keyGen.generateKey();

 byte[] key = secretKey.getEncoded();

 byte[] encodedKey=Base64.encodeBase64(key );

 String keyText = new String(encodedKey); 
```

我的问题是为什么需要使用 `Base64.encodeBase64(key)`. 如果我直接使用有什么问题

```
String keyText = new String(key); 
```

我很困惑。请帮助我。提前谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:01:56.003

并非每个字节序列都代表一个有效的`String`：[您需要知道字符编码才能将字节序列解释为字符串](http://www.joelonsoftware.com/articles/Unicode.html)。由于 Java`char`是 16 位的，因此随机的字节序列最终可能代表一个包含无效代码点的字符串。使用 Base-64 编码通过确保所有元素都是`[A-Za-z0-9+/]`范围内的有效字符来解决此问题。

# mysql - 从两个表格中选择所有行

> ID：16119520
> 
> 赞同：0
> 
> 时间：2013-04-20T10:56:41.733
> 
> 标签：mysql, jsp

我是数据库设计的新手，正在做学校项目。我有 3 个表（`Users`和`Roles`）`User_roles`。我已经创建了可供用户使用的所有用户和角色。我创建了`User_roles`包含用户和分配给他们的角色的表。

我需要获取一个查询，该查询将为我提供所有用户、所有可用角色以及它们是否分配给用户。我的目标是列出所有可用的用户和可用的角色，以便我可以分配或删除访问权限。

我如何实现这一目标？

以下是表的架构

```
Users
 (
  `user_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `username` VARCHAR(45) NULL ,
  `password` VARCHAR(45) NULL ,
  `first_name` VARCHAR(45) NULL ,
  `last_name` VARCHAR(45) NULL ,
  `Status` VARCHAR(45) NOT NULL DEFAULT 'Active' ,
  `date_from` DATE NULL ,
  `date_to` DATE NULL ,
  `created_by` VARCHAR(45) NOT NULL DEFAULT 'Sysadmin' ,
  `create_date` TIMESTAMP NOT NULL DEFAULT now() ,
 PRIMARY KEY (`user_id`)

Roles Tables
`role_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `role_name` VARCHAR(45) NOT NULL ,
  `date_from` DATETIME NULL DEFAULT '2000-01-01' ,
  `date_to` DATETIME NULL DEFAULT '2999-12-31' ,
  `created_by` VARCHAR(45) NOT NULL DEFAULT 'Sysadmin' ,
  `create_date` TIMESTAMP NOT NULL DEFAULT now() ,
  PRIMARY KEY (`role_id`) 

User_role Table
`user_role_id` INT UNSIGNED NOT NULL AUTO_INCREMENT ,
  `user_id` INT UNSIGNED NOT NULL ,
  `role_id` INT UNSIGNED NOT NULL ,
  PRIMARY KEY (`user_role_id`) ,
  CONSTRAINT `fk_User_roles_Users1`
    FOREIGN KEY (`user_id` )
    REFERENCES `Users` (`user_id` )
    ON DELETE cascade
    ON UPDATE cascade,
  CONSTRAINT `fk_User_roles_Roles1`
    FOREIGN KEY (`role_id` )
    REFERENCES `Roles` (`role_id` )
    ON DELETE cascade
    ON UPDATE cascade 
```

我的目标是从表用户中选择所有用户并显示可分配的角色以及是否已分配

例如

```
User_id      Role_id      Role_allocated 
```

相似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:06:19.370

使用 sql join on 条件如下：

```
SELECT * FROM User_roles as ur 
INNER JOIN Users as u on ur.user_id = u.user_id
INNER JOIN Roles as r on ur.role_id = r.role_id; 
```

假设表的主键为：Users => user_id, Roles => role_id。此查询将返回所有用户及其在 User_roles 表中分配的角色。如果您提供了表的键和其他属性，那么回答您的问题会更容易。

# java - LibGdx 复制 Actor 的正确方法是什么？

> ID：16119522
> 
> 赞同：0
> 
> 时间：2013-04-20T10:56:54.090
> 
> 标签：java, android, libgdx

我有一个动画的自定义实现。我想使用最少的内存和处理器时间来制作此类实例的多个副本以进行渲染和复制。我该怎么做？每当我需要另一个时，是否最容易重新创建它，或者是否有一些适当或建议的方法来复制 Image 实例。我问这个是因为我找不到复制构造函数，而且我不知道 .clone() 是否在 Image 中实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:40:36.457

如果你真的想照顾记忆，你可以给所有演员相同的图像。但是，如果您以某种方式更改图像并且在其中一个 Actor 上它确实会随着它改变所有 Actor（我使用精灵做了它并更改了 TextureRegion。我所有的怪物都看着同一个方向）。但是，如果您只是始终拥有相同的图像，您可以创建您的对象并对一个图像提供所有相同的引用。
例如像这样：

```
public ArrayList<Actor> generateImageActor(){
        ArrayList<Actor> temp = new ArrayList<Actor>();
        Image img = new Image(____);
        for(int i = 0; i <10; i++){
            MyActor act = new MyActor(img);
            temp.add(act);
        }
        return temp;
    } 
```

如果您引用一个图像或始终使用新图像，则渲染时间不会产生任何影响。我只是拍了照片和它的偏移量然后画出来。因此，如果您在 10 个演员中使用 1 张图像，则它具有相同的渲染时间，否则如果您将有 10 个演员和图像的副本。
希望这可以帮助。

# python - 简单的密码检查 TypeError: 'NoneType' 对象没有属性 '__getitem__'

> ID：16119526
> 
> 赞同：0
> 
> 时间：2013-04-20T10:57:56.430
> 
> 标签：python, sql

我收到此错误，突出显示的代码是 **passW[0]**

这个错误到底是什么意思？这是一个简单的比较，但由于它作为元组返回，我无法比较它。我需要将密码更改为元组吗？还是我必须反其道而行之，才能得到平等的结果？这是我的完整代码。这是一个简单的密码检查。

```
def check_login(db, useremail, password):
    """returns True if password matches stored"""

    cur = db.cursor()
    password1 = db.crypt(password)
    ur = "SELECT email FROM users WHERE email = ?"
    cur.execute(ur, (useremail,))
    user = cur.fetchone()
    if user[0] == useremail:
        pas = "SELECT password FROM users WHERE email = ? AND password = ?"
        cur.execute(pas, (useremail, password1,))
        passW = cur.fetchone()
        if passW[0] == password1:
            return True
        else:
            return False 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:15:15.527

```
passW = cur.fetchone() 
```

[`cur.fetchone()`](http://www.python.org/dev/peps/pep-0249/#fetchone)`None`不匹配时返回。由于您从用户那里获取密码，并使用该密码和电子邮件进行查找，如果密码不匹配，您将找不到该行。结果，`cur.fetchone()`返回无。事实上，这个：

```
passW = cur.fetchone()
if passW[0] == password1:
    return True
else:
    return False 
```

可能只是变成：

```
return if cur.fetchone() is not None:
    return True
return False 
```

或者正如 Jen-Ya 建议的那样：

```
return cur.fetchone() is not None 
```

# url - 在 extjs 如何更改 URL 以动态设置城市名称

> ID：16119530
> 
> 赞同：0
> 
> 时间：2013-04-20T10:58:07.960
> 
> 标签：url, extjs4, weather

我在 extjs 工作。我正在寻找给定城市的天气信息功能。所以在 extjs4 控制器中，我的代码为-

```
getWeather : function() {
        $obj = 'pune';
        Ext.require('Ext.data.JsonP', function() {
            Ext.data.JsonP.request({
                url : "http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/pune.json",
                success : function(parsed_json) {
                    var location = parsed_json['location']['city'];
                    var temp_c = parsed_json['current_observation']['temperature_string'];
                    alert("Current temperature in " + location + " is: "
                            + temp_c);
                }
            });
        });
    }, 
```

它工作正常。但在上面的函数中，我想动态设置城市名称。假设我有变量 $cityname=pune。然后使用这个变量我需要如何修改 URL-“ [http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/pune.json](http://api.wunderground.com/api/4ab310c7d75542f3/geolookup/conditions/q/IA/pune.json) ”这样如果将根据变量具有的城市名称检索天气信息。那么如何更改 URL 以动态设置城市名称

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T05:29:58.637

使用传递给请求方法的 params 对象： [http ://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.JsonP-method-request](http://docs.sencha.com/extjs/4.1.3/#!/api/Ext.data.JsonP-method-request)

例子：

```
Ext.data.JsonP.request({
     url : "http://api.wunderground.com/api/..",
     success : function(response) { ...},
     params:{foo:'bar'}
}); 
```

# hibernate - Hibernate/JPA 多对一与单对多

> ID：16119531
> 
> 赞同：65
> 
> 时间：2013-04-20T10:58:15.903
> 
> 标签：hibernate, jakarta-ee, jpa, one-to-many, many-to-one

我目前正在阅读有关[实体关联](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html/entity.html#entity-mapping-association)的 Hibernate 文档，我遇到了一些困难来弄清楚一些事情。`ManyToOne`它本质上与关联之间的差异`OneToMany`有关。尽管我在实际项目中使用过它们，但我无法完全理解它们之间的区别。据我了解，如果一个表/一个实体`ManyToOne`与另一个有关联，那么该关联应该来自另一方`OneToMany`。那么，我们应该如何根据具体情况决定选择哪一个，以及它如何影响数据库/查询/结果？到处都有很好的例子吗？

PS：由于它与问题的相关性，我认为它会有所帮助，如果有人可以解释关联所有者的意义以及双向和单向关联之间的区别。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-20T11:19:16.387

假设您有一个 Order 和一个 OrderLine。您可以选择在 Order 和 OrderLine 之间使用单向 OneToMany（Order 将具有 OrderLines 的集合）。或者，您可以选择在 OrderLine 和 Order 之间建立 ManyToOne 关联（OrderLine 将引用其 Order）。或者您可以选择两者都有，在这种情况下，关联变为双向 OneToMany/ManyToOne 关联。

您选择的解决方案主要取决于情况，以及实体之间的耦合程度。例如，如果用户、公司、提供商都有很多地址，那么在每个人与 Address 之间有一个单向的地址是有意义的，并且 Address 不知道他们的所有者。

假设您有一个 User 和一个 Message，其中一个用户可以有数千条消息，将其建模为从 Message 到 User 的 ManyToOne 是有意义的，因为无论如何您很少会询问用户的所有消息。不过，关联可以是双向的，只是为了帮助查询，因为 JPQL 查询通过浏览实体之间的关联来连接实体。

在双向关联中，您可能会遇到对象图不一致的情况。例如，Order A 将有一组空的 OrderLines，但某些 OrderLines 会引用 Order A。JPA 强制要求始终将关联的一侧作为所有者，而将另一侧作为反向。JPA 忽略反面。所有者方是决定存在什么关系的一方。在 OneToMany 双向关联中，所有者方必须是多方。因此，在前面的示例中，所有者方将是 OrderLine，并且 JPA 将保持行与订单 A 之间的关联，因为这些行具有对 A 的引用。

这样的关联将被映射如下：

为了 ：

```
@OneToMany(mappedBy = "parentOrder") // mappedBy indicates that this side is the 
   // inverse side, and that the mapping is defined by the attribute parentOrder 
   // at the other side of the association.
private Set<OrderLine> lines; 
```

在订单行中：

```
@ManyToOne
private Order parentOrder; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-03-25T07:47:17.943

此外，`@ManytoOne`在保存关联时，将一方作为所有者只需要 n+1 个查询。其中 n 是关联的数量（多边）。

而`@OneToMany`作为所有者，在插入父实体（一侧）与关联（多侧）时会导致 2*N + 1 个查询。其中一个查询将用于插入关联，而另一个查询将用于更新关联实体中的外键。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-11-18T14:42:59.930

虽然以上答案是准确的，但我将以不同的方式呈现答案。

两者`@OneToMany`都有`@ManyToOne`两个部分；左侧部分和右侧部分。例如：

*   `@OneToMany`= 'One' 是左侧部分，'Many' 是右侧部分
*   `@ManyToOne`= 'Many' 是左侧部分，'One' 是右侧部分

使用这种理解的简单关联规则是，左侧部分代表您正在定义关联的类。

因此，如果您`@ManyToOne`在 OrderLine 类中定义引用 Order 类，则意味着多个 OrderLine 关联到一个 Order 类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-18T08:24:55.477

我将通过一个例子来回答。假设您有一个 Ordering 或 POS 系统的设计。然后，每个订单都有订单详情（例如产品）。在这种情况下，我们有`@oneToMany`关系。这同样适用于销售和销售细节关系。

如果我有一个用户表并且每个用户都绑定到一个特定的商店，那么我们可以让许多用户绑定到同一个商店`@manyToOne`。

# jquery - 小部件 CSS 与站点 CSS 冲突

> ID：16119533
> 
> 赞同：0
> 
> 时间：2013-04-20T10:58:31.040
> 
> 标签：jquery, css, widget

我为我的网站构建了一个小部件，并在加载时动态添加了 CSS，但问题与主机网站 CSS 文件冲突。以下代码适用于我的小部件，它在加载时附加了 CSS 文件：

```
function main() {
    jQuery(document).ready(function($) {
    /******* Load CSS *******/
    var css_link = $("<link>", { 
            rel: "stylesheet", 
            type: "text/css", 
            href: "http://example.com/widget/green.css"
        });
        css_link.appendTo('head');
        var txt;
        txt='<div id="wrapper">';
        txt=txt+'<ul class="tabs">';
        txt=txt+'<li id="fixtures_tab"><a href="#fixtures">Hepsi</a></li>';
        txt=txt+'<li id="live_tab"><a href="#live">Canlı</a></li>';
        txt=txt+'<li id="finished_tab"><a href="#finished">Bitmiş</a></li>';
        txt=txt+'<li id="program_tab"><a href="#program">Başlamamış</a></li>';
        txt=txt+'<li id="postpond_tab"><a href="#postpond">Ertelenen</a></li>';
        txt=txt+'<li id="selected_tab"><a id="f" href="#fav">Oyunlarım (0)</a></li>';
        txt=txt+'</ul>';
        txt=txt+'<div class="tab-container">';
        txt=txt+'<div id="fixtures" class="tab-content"><script type="text/javascript">get_All_Today_Matches();</script></div>';
        txt=txt+'<div id="live" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="finished" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="program" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="postpond" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'<div id="fav" class="tab-content"><script type="text/javascript"></script></div>';
        txt=txt+'</div>';
        txt=txt+'</div>';
        $('#widget-container').html(txt);
    });
} 
```

我想知道有什么方法可以隔离我的小部件的 css 吗？

顺便说一下，从匿名函数调用主函数（出于隔离目的）

PS：我使用了css reset，但仍然是同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-08T23:11:42.467

您可以命名所有 CSS。这将避免您遇到常见的 CSS 类名（如`container`or ）的问题`wrapper`，例如：

```
.my-amazing-widget--tab-container {
    height: 100px;
} 
```

如果您的所有 CSS 都像上面那样命名，那么网站不太可能在其 CSS 中包含您的小部件名称。

我会避免像`!important`另一个用户在他们的评论中建议的那样使用声明——如果你重写一个公共类，你的样式最终可能会对网站的样式产生负面影响。

我还会避免任何全局声明，例如将 CSS 重置导入您的小部件。CSS 重置覆盖元素，如 body、div 等，这可能会对主机网站的 CSS 产生负面影响。

您将需要更新所有相关的 HTML 以使用命名空间。CSS 命名空间是解决此类问题的最佳方法，也是开发要嵌入其他网站和应用程序的小部件时的最佳实践。

# c - 汇编和 C 中的内核开发

> ID：16119534
> 
> 赞同：2
> 
> 时间：2013-04-20T10:58:37.823
> 
> 标签：c, assembly, x86, osdev, bochs

我正在尝试使用 bochs 在 linux 上使用汇编和 C 创建一个简单的内核。每次我尝试从汇编代码调用 c 代码时，模拟器都会给我一个错误并重置模拟的问题。当我以 16 位实模式启动时，我使用此代码

```
global _start

[bits 16]

_start:

mov [BOOT_DRIVE] , dl

mov bp , 0x7000
mov sp , bp

mov bx , 0x0000 ;load 5 sectors to 0x0000(ES):0x9000(BX)
mov es , bx
mov bx , KERNEL_OFFSET
mov dh , 15
mov dl , [BOOT_DRIVE]
call disk_load

mov dx , [es:KERNEL_OFFSET]
call print_hex

call switch_to_pm

jmp $ 
```

切换到保护模式后，这是代码

```
[bits 32]
extern kmain

begin_pm:

;print a char to vram for testing and it is printed, this means the switch has suceeded
mov ebx , VRAM_ADDRESS
mov al , 'H'
mov [ebx] , al
mov al , 0x07
inc ebx
mov [ebx] , al

call kmain

jmp $ 
```

而 c 函数基本上什么都不做，只是一个空的

关于我正在使用的命令我使用这些

```
nasm $asm_file_name.asm -f elf -o $asm_file_name.o
gcc -ffreestanding -c $c_file_name.c -o $c_file_name.o
ld -o $c_file_name.bin -Ttext 0x7c00 $asm_file_name.o $c_file_name.o --oformat binary
dd status=noxfer conv=notrunc if=$c_file_name.bin of=$floppy_name.img 
```

我不知道问题出在哪里。有任何想法吗 ？

注意：我正在使用以下 GDT 和 switch_to_pm 函数

```
 ;GDT
gdt_start:

    gdt_null:
        dd 0x0
        dd 0x0

    gdt_code: ;the code segment descriptor
        ; base = 0x0 , limit = 0xfffff ,
        ; 1 st flags : ( present )1 ( privilege )00 ( descriptor type )1 -> 1001 b
        ; type flags : ( code )1 ( conforming )0 ( readable )1 ( accessed )0 -> 1010 b
        ; 2 nd flags : ( granularity )1 (32 - bit default )1 (64 - bit seg )0 ( AVL )0 -> 1100 b
        dw 0xffff
        ; Limit (bits 0 -15)
        dw 0x0
        ; Base (bits 0 -15)
        db 0x0
        ; Base ( bits 16 -23)
        db 10011010b ; 1st flags , type flags
        db 11001111b ; 2nd flags , Limit (bits 16 -19)
        db 0x0
        ; Base ( bits 24 -31)

    gdt_data: ; the data segment descriptor
        ; Same as code segment except for the type flags :
        ; type flags : ( code )0 ( expand down )0 ( writable )1 ( accessed )0 -> 0010 b
        dw 0xffff
        ; Limit ( bits 0 -15)
        dw 0x0
        ; Base ( bits 0 -15)
        db 0x0
        ; Base ( bits 16 -23)
        db 10010010b ; 1 st flags , type flags
        db 11001111b ; 2 nd flags , Limit ( bits 16 -19)
        db 0x0
        ; Base ( bits 24 -31)

    gdt_end:
    ; The reason for putting a label at the end of the
    ; GDT is so we can have the assembler calculate
    ; the size of the GDT for the GDT decriptor ( below )
    ; GDT descriptior
    gdt_descriptor:
        dw gdt_end - gdt_start - 1
        dd gdt_start

    ; Size of our GDT , always less one
    ; of the true size
    ; Start address of our GDT
    ; Define some handy constants for the GDT segment descriptor offsets , which
    ; are what segment registers must contain when in protected mode. For example ,
    ; when we set DS = 0 x10 in PM , the CPU knows that we mean it to use the
    ; segment described at offset 0 x10 ( i.e. 16 bytes ) in our GDT , which in our
    ; case is the DATA segment (0 x0 -> NULL ; 0 x08 -> CODE ; 0 x10 -> DATA )
    CODE_SEG equ gdt_code - gdt_start
    DATA_SEG equ gdt_data - gdt_start
[bits 16]

switch_to_pm:

cli
lgdt[gdt_descriptor]

mov eax , cr0
or eax , 0x1
mov cr0 , eax

jmp CODE_SEG:init_pm

[bits 32]

init_pm:

mov ax , DATA_SEG
mov ds , ax
mov ss , ax
mov es , ax
mov fs , ax
mov gs , ax

mov ebp , 0x9000
mov esp , ebp

jmp begin_pm 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:01:08.670

`call kmain`将尝试在地址处查找函数，就好像整个代码在 0x7c00 处加载一样。但是，整个代码从磁盘加载到 0x9000。因此，您需要要求链接器修复它用作`kmain`.

或者甚至更好，正如@AlexeyFrunze 所建议的那样，将从第二个扇区开始的代码直接加载到 BIOS 加载第一个扇区之后的内存位置。

# cabal - cabal：在 hsenv 下安装文档

> ID：16119536
> 
> 赞同：1
> 
> 时间：2013-04-20T10:59:19.167
> 
> 标签：cabal, cabal-install, haddock, hsenv

我有一个项目的 hsenv 沙箱，我无法让 cabal install 安装库的文档。以下：

```
cabal install --enable-documentation $package 
```

安装包，但不生成任何黑线鳕文档（仅 LICENSE 等被复制到 docs 目录）。构建日志仅包含：

```
install-outcome: InstallOk
docs-outcome: Ok
tests-outcome: NotTried 
```

即使使用verbose=3，我也无法从cabal install 中获得任何有用的信息。在 hsenv 之外，一切正常。关于如何修复或至少调试它的任何想法？

# java - Applet Java 7 更新 21：无法在默认 Toolkit 上设置 AWTKeyListener

> ID：16119539
> 
> 赞同：2
> 
> 时间：2013-04-20T10:59:50.850
> 
> 标签：java, oracle, applet, keyboard-events, toolkit

在我的自签名小程序（在不久的将来可能成为 CA 签名的小程序）中，我有一个相当复杂的 Swing GUI，我需要检测用户何时按下了 SHIFT 或 CONTROL 键。我将它与组件相关的 MouseEvents 和 MouseMotionEvents 结合使用，随时进行特殊的鼠标事件处理。不久：

当我在一个不同的组件上收到鼠标运动事件时，我需要检测是否按住（按下）了 CONTROL 或 SHIFT。问题是，用户将在他/她将鼠标移动到感兴趣的组件之前按下 shift/control。这是我真正的“可用性”问题！

在 Java 7 更新 21 之前，我能够使用我添加到默认工具包中的 JVM 全局 AWTKeyListener 来完成此操作。这不再被允许（由于 Java 7 更新 21 的安全要求——尽管如此，我正在 JNLP 在一个不同且独立的 JVM 中启动我的小程序，但这是另一个话题）。

那我有什么：

我试图用我的小程序的“主”面板注册一个 KeyListener，但键事件似乎被“吞下”（被我的 GUI 中具有键盘焦点的任何组件）。

然后我尝试为我的主面板（顶级容器）使用键绑定，为“shift”、“control”和“escape”添加绑定。唯一的绑定工作是“逃脱”，它总是会击中我的“释放”动作。“Shift”和“control”永远不会被击中（通知）。我正在使用我的主面板的 WHEN_IN_FOCUSED_WINDOW 输入图。

我需要在应用程序范围内（而不是在 JVM 范围内）检测键盘事件。我怎样才能做到这一点？是否可以通过其他方式在我的组件层次结构中的某个级别“拦截”键盘事件？

我不介意重写 Swing/AWT 方法来完成它——我只是绝望地寻找解决方案。

感谢任何建议，否则我会阻止客户将 Java 更新到 7 upd 21。谢谢！

阿隆

PS：为什么Java中不支持“应用程序”-全局资源。它适用于 Authenticators、Keylisteners、Default Locale 等。？尽管我们（作为 applet 开发人员）只在应用程序级别需要它，但它始终在 JVM 全局基础上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T19:49:29.507

您可以使用传递给您的事件的方法来确定修饰键的当前状态。例如，event.isControlDown() 将告诉您在发生相关鼠标事件时是否仍按下控制键。同样，您可以为 shift 键调用 event.isShiftDown()。

# php - 防止wordpress中的自动html实体

> ID：16119540
> 
> 赞同：0
> 
> 时间：2013-04-20T11:00:01.623
> 
> 标签：php, html, mysql, wordpress, apache

阿帕奇 2
PHP 5.2.9
Mysql 5.077
Wordpress 3.5.1

安装 wordpress 后，我选择了一个名为“Sliding Door”的主题。然后，我转身写头版。在我完成并按下“发布”后，原始的 html 内容突然变成了 html 实体，就像这样：

在文本编辑器而非可视编辑器中编辑时：

```
This is an example page.It might say something like this: <blockquote> 
```

按“发布”后，仍在文本编辑器中：

```
This is an example page. It might say something like this: &lt;blockquote&gt; 
```

这也发生在我编写**Posts**和**Text Widget**时，比如一些全局配置阻止我提交 html 代码。它总是自动将我的内容转换为纯文本。太奇怪了。

阿帕奇有什么问题吗？还是php有什么问题？还是 Wordpress 出了什么问题？还是用Mysql？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:17:18.607

我终于找到了解决方案。是 php 过滤器改变了我的内容。为了解决这个问题，我只是将**/etc/php.ini中的“** **filter.default** ”变量从“ **special_chars** ”更改为“ **unsafe_raw** ”，然后重新启动httpd。

 ******* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:58:37.763

所以你现在根本没有过滤你的输入？那是有风险的。即使我是博客/应用程序的唯一用户，我也会过滤所有内容。

我不知道 Wordpess 是如何工作的，但如果您更喜欢使用 HTML 代码，请尝试将默认编辑器从 WYSIWYG 设置为 HTML。或者在编辑器中允许更多的 HTML 标签。参见例如： http: [//www.catswhocode.com/blog/killer-hacks-to-enhance-wordpress-editor](http://www.catswhocode.com/blog/killer-hacks-to-enhance-wordpress-editor)

你也可以试试[Pure HTML 插件](http://www.hitreach.co.uk/wordpress-plugins/pure-html/)。******

# asp.net - 带有完整内存错误的 WCF 服务（内存门检查失败，因为可用内存） - 如何解决

> ID：16119546
> 
> 赞同：36
> 
> 时间：2013-04-20T11:00:36.527
> 
> 标签：asp.net, wcf

我有一个 WCF 服务主机。我对 wc 的要求很高。我的宿主，一段时间后出现内存满的问题。重复这个问题。当我打开 Web 服务帮助页面时，会显示此错误：

> 内存门检查失败，因为可用内存（1398493184 字节）小于总内存的 5%。因此，该服务将无法用于传入请求。要解决此问题，请减少机器上的负载或调整 serviceHostingEnvironment 配置元素上的 minFreeMemoryPercentageToActivateService 的值。

我来自 WCF 主机的 web.config 如下：

```
<system.serviceModel>
<behaviors>
<serviceBehaviors>
<behavior name="">
  <serviceMetadata httpGetEnable="true"/>
  <serviceDebug includeExceptionDetailInFaults="false"/>
  <serviceHostingEnvironment minFreeMemoryPercentageToActivateService="1"/>
</behavior>
</serviceBehaviors> 
```

主机 web.config 是

```
<system.serviceModel>
<bindings>
<basicHttpBinding>
<binding name="BasicHttpBinding_IPaperService" clouseTimeout="00:10:00" openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisojnMode="StringWildcard" maxBufferSize="1000000000" maxBufferPoolSize="1000000000" maxReceivedMessageSize="100000000" messageEncoding="text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
<readerQuotas maxDepth="32" maxStringContentLength="1000000000" maxArrayLength="1000000000" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
  <security mode="None">
  <transport clientCredentialType="None" proxyCredentialType="None" realm=""/>
  <message clientCredentialType="UserName" algorthmSuite="Default" />
  <security>
</binding> 
```

我该如何解决我的问题？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-20T11:16:54.377

尝试将 minFreeMemoryPercentageToActivateService 在您的 web.config 中为 WCF 主机设置为 0，如[本答案中所建议的那样](https://stackoverflow.com/a/11531518/741695)

```
<system.serviceModel>
    <serviceHostingEnvironment minFreeMemoryPercentageToActivateService="0"/>
</system.serviceModel> 
```

编辑 1：这提供了一种解决方法，但没有解决根本原因。根据您的具体情况，这可能不够好，也可能不够好。

编辑 2：正如@radderz 在评论中正确指出的那样“'serviceHostingEnvironment' 元素需要是 'system.serviceModel' 的子元素”，请参阅[MSDN 文档](https://docs.microsoft.com/en-us/dotnet/framework/configure-apps/file-schema/wcf/servicehostingenvironment)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-02-18T15:44:37.167

而不是更改 WCF 配置值，尝试知道哪个进程**工作集内存**高，尝试看看它是否真的需要

```
Powershellcommand>> get-process | Sort-Object WS -desc >c:\process.txt 
```

还要知道哪个 processid 指向 IIS 应用程序池

```
cmd.exe>> %systemroot%\system32\inetsrv\AppCmd.exe list wp 
```

通过在配置中允许零，这可能能够激活可能会由于内存不可用的原因而破坏服务状态 - 这在本质上可能不是那么直接:(

我的2美分...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-12T08:55:23.893

在某些情况下，更改 web.config 不是一种选择。在我们的案例中，我们通过将服务器的内存从 8GB 增加到 16GB 来解决这个问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-03-13T07:00:22.870

如果您的系统 RAM 占用超过 95%，则会出现此问题，请停止一些不需要的进程并尝试再次调用该服务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-03T22:24:18.377

我在我的 MS 2008 R2 Web 服务器上使用了资源监视器来确定 SQL Server 消耗了我可用的 32 个演出中的 29 个演出。

在阅读了其他人关于为 SQL 分配多少内存的意见后，我将最大内存设置为 24 gigs。可以在 SQL Server 属性的内存选项卡上找到最大服务器内存限制。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-12T16:08:59.907

回收您的应用程序池

1.  转到 IIS
2.  选择应用程序池
3.  找到您的应用程序正在运行的应用程序池并选择它
4.  单击右侧面板中的回收。

[在此处查看 IIS](https://i.stack.imgur.com/2wJ3W.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-21T12:43:21.303

**上述错误可能有 3-4 种可能的原因：**

> 1) SQL 占用了大部分服务器空间，并且您没有在 SQL Server 设置中指定 Max Server Memory Limit
> 
> 2）您的系统内存已完全使用。某些程序使用大部分内存来运行。
> 
> 3) IIS 应用程序池没有被回收。
> 
> 4) 您没有在您的 Web 服务 Web.Config 文件中指定“minFreeMemoryPercentageToActivateService”标签。您可以通过以下方式在您的 Web.Config 中添加属性。
> 
> 例如：minFreeMemoryPercentageToActivateService="0"

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-19T12:04:15.990

在我们的案例中，我们遇到了内存泄漏。我建议修改代码，而不是应用 web.config 调整。

# css - Compass / SCSS @each 具有第 n 个功能

> ID：16119547
> 
> 赞同：3
> 
> 时间：2013-04-20T11:00:36.333
> 
> 标签：css, sass, less, compass-sass

我无法在所需位置将 &:hover 添加到我的 SCSS 代码中。

基本上我有一个非常简单的菜单，每个 LI 都有一个类。基本上，我编写的以下代码将正确地为每个类分配所需的样式，尽管我只希望这只是一个悬停事件。

**这是代码**

```
$menu-style: black #000, blue #6699ff;

.top-bar-section {
    @each $menu-color in $menu-style {
        ul li .#{nth($menu-color, 1)} {
            border-top:5px solid nth($menu-color, 2);
        }
    }
} 
```

**这是处理成 CSS 时生成的内容**

```
.top-bar-section ul li .black {
  border-top: 5px solid black;
}

.top-bar-section ul li .blue {
  border-top: 5px solid #6699ff;
} 
```

**这是我想要的结果，我需要完成**

```
.top-bar-section ul li.black:hover, .top-bar-section ul li.black.active {
  border-top: 5px solid #333;
}

etc.... 
```

看到问题了吗？=[ 。当我添加 &:hover 时，它向我尖叫，必须在复合选择器的开头声明它......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:55:41.123

我不确定您要在哪里添加`:hover`，但它似乎对我有用。

```
$menu-style: black #000, blue #6699ff;

.top-bar-section {
    @each $menu-color in $menu-style {
        ul li.#{nth($menu-color, 1)}:hover {
            border-top:5px solid nth($menu-color, 2);
        }
    }
} 
```

输出：

```
.top-bar-section ul li.black:hover {
  border-top: 5px solid black;
}

.top-bar-section ul li.blue:hover {
  border-top: 5px solid #6699ff;
} 
```

# c++ - 使用 boost::spirit 在 C++ 中读取二维数组

> ID：16119548
> 
> 赞同：1
> 
> 时间：2013-04-20T11:00:40.673
> 
> 标签：c++, boost, boost-spirit

我想在[这里](https://stackoverflow.com/questions/7542522/read-irregular-file-into-a-2-dimension-array-using-c)阅读一个简单的 2D int 数组（空格分隔） ：

```
qi::phrase_parse(b, e, +qi::int_ % qi::eol, qi::space - qi::eol, vectors) 
```

但是有两个区别：

1.  我想将它逐行放入一维 std::vector 中，而不分离
2.  如果两行具有不同数量的整数，则应将其识别为解析错误。

是否可以将其作为一个单行程序来执行，例如不编写我自己的解析器？就像[上面提到的链接](https://stackoverflow.com/questions/7542522/read-irregular-file-into-a-2-dimension-array-using-c)一样简单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T15:30:21.697

假设您指的是 Spirit 版本（“作为一个衬里”），下面是一个改编版本，它添加了元素数量的检查。

如果您想要更多控制（以及动态输入检查，而不是“事后诸葛亮”），那么我建议您查看我写的另一个答案，该答案显示了三种方法：

*   [Boost::Spirit::QI 解析器：解析元素的索引](https://stackoverflow.com/questions/12769907/boostspiritqi-parser-index-of-parsed-element/12772075#12772075)

.

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/spirit/include/karma.hpp>

namespace spirit = boost::spirit;
namespace qi     = boost::spirit::qi;
namespace karma  = boost::spirit::karma;

int main()
{
    std::cin.unsetf(std::ios::skipws);
    spirit::istream_iterator b(std::cin), e;

    std::vector<std::vector<int> > vectors;

    if (qi::phrase_parse(b, e, +qi::int_ % qi::eol >> qi::eoi, qi::blank, vectors))
    {
        std::cerr << "Parse failed at '" << std::string(b,e) << "'\n";
        return 255;
    }

    // check all rows have equal amount of elements:
    const auto number_of_elements = vectors.front().size();
    for (auto& v : vectors)
        if (v.size() != number_of_elements)
            std::cerr << "Unexpected number of elements: " << v.size() << " (expected: " << number_of_elements << ")\n";

    // print the data for verification
    std::cout 
        << karma::format(karma::right_align(8)[karma::auto_] % ',' % '\n', vectors)
        << std::endl;

    return 0;
} 
```

^(业力位不是必需的（它们只是为了输出整个事物以进行演示）。)

## 更新

要构建更主动的错误检查，您可以执行以下操作：

```
int num_elements = 0;
bool ok = qi::phrase_parse(b, e, 
        (+qi::int_) [ phx::ref(num_elements) = phx::size(qi::_1) ]
     >> *(qi::eol >> qi::repeat(phx::ref(num_elements)) [ qi::int_ ])
     >> *qi::eol, 
     qi::blank, vectors); 
```

它`qi::repeat`用于预期`num_elements`后续行中的元素数量。您可以将其存储到一维数组中：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/support_istream_iterator.hpp>
#include <boost/spirit/include/karma.hpp>

namespace qi     = boost::spirit::qi;
namespace phx    = boost::phoenix;
namespace karma  = boost::spirit::karma;

int main()
{
    std::cin.unsetf(std::ios::skipws);
    boost::spirit::istream_iterator b(std::cin), e;

    //std::vector<std::vector<int> > vectors;
    std::vector<int> vectors;

    int num_elements = 0;
    bool ok = qi::phrase_parse(b, e, 
            (+qi::int_) [ phx::ref(num_elements) = phx::size(qi::_1) ]
         >> *(qi::eol >> qi::repeat(phx::ref(num_elements)) [ qi::int_ ])
         >> *qi::eol, 
         qi::blank, vectors);

    std::cout << "Detected num_elements: " << num_elements << "\n";

    if (!ok)
    {
        std::cerr << "Parse failed at '" << std::string(b,e) << "'\n";
        return 255;
    }

    if (b!=e)
        std::cout << "Trailing unparsed: '" << std::string(b,e) << "'\n";

    // print the data for verification
    std::cout 
        << karma::format_delimited(karma::columns(num_elements)[+karma::int_], ' ', vectors)
        << std::endl;

    return 0;
} 
```

^(请注意使用`karma::columns(num_elements)`将输出拆分为每行正确的列数。)

# coffeescript - 检查数组中是否存在具有特定属性值的对象

> ID：16119549
> 
> 赞同：3
> 
> 时间：2013-04-20T11:00:51.667
> 
> 标签：coffeescript

我还在努力学习 CoffeeScript，所以我只是问你如何以更简单的方式编写这段代码。

```
for member in draft.members
        if member.email is emailAddress then throw new Meteor.Error 500, "Cannot add member twice" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:02:21.383

您也可以使用[`Array#some`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Array/some)，这会产生非常简单的 JS 并且不需要外部库 :)

```
emailAlreadyUsed = draft.members.some (m) -> m.email is emailAddress
throw new Meteor.Error 500, 'Cannot add member twice' if emailAlreadyUsed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T11:06:17.770

第一步是让它可读：

```
for member in draft.members
    if member.email is emailAddress
        throw new Meteor.Error 500, 'Cannot add member twice' 
```

我们可以使用 消除-`if`表达式`when`：

```
for member in draft.members when member.email is emailAddress
    throw new Meteor.Error 500, 'Cannot add member twice' 
```

请不要写可怕的长行。请记住`if`- 表达式可以跨越多行。

* * *

至于完整的替代方案，`for`如果您使用 Underscore.js 或 jQuery，则可以消除 - 表达式。下面是一个使用 Underscore.js 的示例（如果您更喜欢 jQuery，请参阅 参考资料`$.grep`）：

```
if _.find(draft.members, (m) -> m.email is emailAddress)
    throw new Meteor.Error 500, 'Cannot add member twice' 
```

IMO， -`for`表达式`when`最易读。

# facebook-graph-api - Facebook的数据返回api方法安全吗？

> ID：16119551
> 
> 赞同：0
> 
> 时间：2013-04-20T11:01:01.117
> 
> 标签：facebook-php-sdk, facebook-graph-api, security, facebook-php-sdk

我使用[facebook-php-sdk](/questions/tagged/facebook-php-sdk "显示标记为“facebook-php-sdk”的问题")来执行用户登录。在某些情况下，我使用用户在 Facebook 上的电子邮件作为登录密钥。我从中获得的用户数据：

```
$facebook->api('/me','GET'); 
```

这些数据安全吗？换句话说，有人可以更改它发送的数据吗？

为了描述更多假设如下：

> 我的网站上有一个管理员用户，他在我的网站上的电子邮件是：admin@mywebsite.com。有一个黑客有一个 Facebook 帐户和电子邮件：hacker@hk.hk。这个黑客能否在从我的网站收到之前从 api 方法返回的电子邮件注入到 admin@mywebsite.com，以便他以管理员身份登录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T02:21:20.890

考虑到 Facebook 端点使用**HTTPS**的事实，我认为您从这些 Facebook 端点检索到的数据不会有任何改变。
可以更改这些的唯一方法是当有人访问您正在使用的 SDK 并将这些端点更改为其他内容时。

# android - 在Android中从视频中提取音频

> ID：16119555
> 
> 赞同：1
> 
> 时间：2013-04-20T11:01:44.997
> 
> 标签：android, mediastore

我正在创建一个录制视频的应用程序。我的下一步是从该视频剪辑中提取音频，然后对其进行处理。有没有办法从`Android`. 我正在使用`MediaStore`API 进行记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-30T02:06:23.943

MediaExtractor 是您应该使用的。

# ios - Parse JSON in Objective C

> ID：16119558
> 
> 赞同：0
> 
> 时间：2013-04-20T11:02:15.013
> 
> 标签：ios, objective-c, json, jsonkit

I have this json returned from a cms and I need to break it apart and use the different values.

```
{"nodes":
     [{"node":
        {"created":"14012013165204","lastupdated":"03042013133901","type":"News"}
     }]
} 
```

I use JSONKit framework and here is my code:

```
 NSString* theURL = [NSString stringWithFormat:@"http://testserver.com/content_lastupdate.json"];
    NSError* err = nil;
    NSURLResponse* response = nil;
    NSMutableURLRequest* request = [[NSMutableURLRequest alloc] init];
    NSURL*URL = [NSURL URLWithString:theURL];
    [request setURL:URL];
    [request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
    [request setTimeoutInterval:30];
    NSData* data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err];

    NSString *output = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
    NSDictionary *resultsDictionary = [output objectFromJSONString];

    NSLog([NSString stringWithFormat:(@"Response: %@"), output]);

    NSDictionary *nodes = [resultsDictionary objectForKey:@"nodes"];
    NSObject *node = [nodes objectForKey:@"node"]; 
```

I do not know how to get the next part of the results. nodes key is found but the next one is not. Any idea what basics I'm missing here?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:09:26.743

"nodes" is an array. Try this one:

```
NSArray *nodes = resultsDictionary[@"nodes"];
NSDictionary *node = nodes[0];
node = node[@"node"] 
```

# linux - 如何将多个 PDF 页面连接到一个页面

> ID：16119560
> 
> 赞同：8
> 
> 时间：2013-04-20T11:02:17.543
> 
> 标签：linux, pdf, merge, imagemagick, imposition

我有一个 4 页的 PDF。我想创建另一个 PDF，其中页面在单个页面中一个接一个地放置（垂直对齐）。可以使用哪个命令行工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T18:41:18.357

有几种方法可以执行此任务，一种更容易，一种更难

* * *

# *更简单：*一种多价.JAR 方式

Multivalent.jar 是一款出色的免费软件，能够在 pdf 上执行许多有用的任务

您可以从这些链接之一下载（sourceforge 上提供的 2009 multivalent.jar 版本内部没有更多 pdf 工具）

*   [https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355](https://rg.to/file/c6bd7f31bf8885bcaa69b50ffab7e355)

*   您需要知道 pdf 的宽度和高度（在 Linux 中您可以使用**pdfinfo**）

* * *

*   假设您的**多页 pdf**为 ISO A4 尺寸**(21x29.7cm)**，请输入：

* * *

> java -cp path..to/Multivalent.jar tool.pdf.Impose -dim 4x1 -paper 84x29.7cm input.pdf

* * *

这是结果页面，由并排缝合在一起的 4 个连续页面组成：

![4_pdf_pages_appended_side_by_side](https://i.stack.imgur.com/A4isg.png)

*   生成的 pdf 文件 [http://ge.tt/98Kv4ce/v/0](http://ge.tt/98Kv4ce/v/0)

解释：

> **-dim 4x1**表示**行的列数**
> 
> **- 纸张84x29.7 厘米**是指最终拼版文件的**纸张尺寸**，包含并排连接的 4 页。显然，由于在您的最终 pdf 文件中，您将有 4 列且只有一行，因此您需要将文档乘以 4 witdh（21 厘米）
> 
> multivalent 可以接受，作为统一输入，***英寸***（**-paper 33.4x11.68in**）或***后记点***（**-paper 2380x841pt**）

* * *

* * *

# *更难*：乳胶方式：

4_pdf_pages_appended_side_by_side

几年前，在 comp.text.pdf 中，Peter Flynn为类似的任务提出了一种在**LateX**的唯一帮助下**并排***附加*pdf 页面的方法。如果您是 LaTeXian，您可以执行以下操作：

 **由于您需要**并排附加****单个** *多页*pdf的四页，因此您将编写一个乳胶序言，创建一个像这样的新文档：

假设您的 pdf 文档名称为**input.pdf**并且其大小为 ISO A4，并且您的工作文件夹中有此多页 pdf，您将拥有

```
\documentclass[a4paper]{article}
\usepackage[margin=0mm,nohead,nofoot]{geometry}
\usepackage{pdfpages}
\pagestyle{empty}
\parindent0pt
\begin{document}
\includepdfmerge[nup=1x4,landscape]{input.pdf,1,input.pdf,2,input.pdf,3,input.pdf,4}
\end{document} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-26T11:35:26.917

如果您使用类 Unix 操作系统，则有[pdfjam](https://github.com/rrthomas/pdfjam)，它结合了 Latex 后端和一个简单的命令：

`pdfjam --nup 1x4,landscape input.pdf`

编辑：最近我在使用该确切命令时遇到了 pdfjam 问题。我让它工作：

`cat input.pdf | pdfjam -nup 1x4 -landscape –outfile out.pdf`**

# google-apps-script - 谷歌电子表格集成

> ID：16119561
> 
> 赞同：0
> 
> 时间：2013-04-20T11:02:20.710
> 
> 标签：google-apps-script, google-sheets, google-docs, google-spreadsheet-api

我正在尝试与谷歌电子表格集成，但不确定我想到的工作流程是否可行。

这是工作流程：

*   用户选择将电子表格添加到我的 web 应用程序
*   他被重定向到一个新的谷歌电子表格
*   一旦他完成创建/编辑，我需要一种方法让用户回到我的应用程序并为其提供新创建的电子表格的 ID，以便我可以嵌入/显示它

身份验证部分应该没问题，但是弄清楚如何实现最后一步是一个问题。

我最初考虑使用应用程序脚本向电子表格添加一个菜单项，该脚本会说“保存并关闭”之类的内容，并将使用新的电子表格 ID 作为 URL 参数重定向到我的应用程序。但似乎不可能为所有新创建的脚本安装这样的菜单。

有什么建议么？工作流程是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:41:06.787

菜单在首次运行时可能需要授权。何避免这种情况，在一个单元格上写下您的应用程序 url，并将 ss id 作为参数？id=xxxxxx 用户点击 url 进入下一步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T00:22:31.807

模板可能会起作用，这取决于您的需要。您可以使用代码创建电子表格并将其添加到谷歌模板。然后，当使用模板时，代码将运行，让模板添加自定义菜单。用户永远不会看到任何代码。（评论：我希望 google-apps-script 的最终用户的生活更轻松。即非程序员。）

# android - Android 应用程序错误“不幸的是应用程序已停止”

> ID：16119563
> 
> 赞同：2
> 
> 时间：2013-04-20T11:02:23.760
> 
> 标签：android, android-intent

我正在学习 android 开发，我正在关注 youtube 上的教程，我正在尝试运行此代码，但我不断收到“不幸的是应用程序已停止”，看起来问题出在我启动 Activity 时“startActivity(menuIntent); " 这是 MainActivity.java：

```
package com.example.thebasicseries;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;

public class MainActivity extends Activity {

MediaPlayer logoMusic;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.splash);

    logoMusic = MediaPlayer.create(MainActivity.this, R.raw.sound);
    logoMusic.start();

    Thread logoTimer = new Thread(){
        public void run(){
            try {
                sleep(5000);
                Intent menuIntent = new Intent("com.example.thebasicseries.menu");
                startActivity(menuIntent);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } finally{
                finish();
            }
        }
    };
    logoTimer.start();
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    logoMusic.release();
}

 } 
```

这是 menu.java

```
 package com.example.thebasicseries;
 import android.app.Activity;
 import android.content.Intent;
 import android.media.MediaPlayer;
 import android.os.Bundle;
 import android.view.View;
 import android.widget.Button;

 public class menu extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    //Button sound
    final MediaPlayer buttonSound = MediaPlayer.create(menu.this, R.raw.button);

    //Setting up the button references
    Button tut1 = (Button) findViewById(R.id.tutorial1);
    Button tut2 = (Button) findViewById(R.id.tutorial2);

    tut1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            buttonSound.start();
            startActivity(new Intent("com.example.thebasicseries.TutorialOne"));
        }
    });     

    tut2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            buttonSound.start();
            startActivity(new Intent("com.example.thebasicseries.TutorialOne"));
        }
    });     

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

  } 
```

这是清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.thebasicseries"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.thebasicseries.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
     <activity
        android:name="com.example.thebasicseries.menu"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.thebasicseries.menu" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.example.thebasicseries.TutorialOne"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="com.example.thebasicseries.TutorialOne" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

错误日志如下：

```
 04-20 11:13:29.780: E/AndroidRuntime(820): FATAL EXCEPTION: main
     04-20 11:13:29.780: E/AndroidRuntime(820): java.lang.RuntimeException: Unable to start   activity ComponentInfo{com.example.thebasicseries/com.example.thebasicseries.menu}: java.lang.NullPointerException
     04-20 11:13:29.780: E/AndroidRuntime(820):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
     04-20 11:13:29.780: E/AndroidRuntime(820):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
    04-20 11:13:29.780: E/AndroidRuntime(820):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at android.os.Handler.dispatchMessage(Handler.java:99)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at android.os.Looper.loop(Looper.java:137)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at android.app.ActivityThread.main(ActivityThread.java:5039)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at java.lang.reflect.Method.invokeNative(Native Method)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at java.lang.reflect.Method.invoke(Method.java:511)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
   04-20 11:13:29.780: E/AndroidRuntime(820):   at dalvik.system.NativeStart.main(Native Method)
   04-20 11:13:29.780: E/AndroidRuntime(820): Caused by: java.lang.NullPointerException
    04-20 11:13:29.780: E/AndroidRuntime(820):  at com.example.thebasicseries.menu.onCreate(menu.java:35)
    04-20 11:13:29.780: E/AndroidRuntime(820):  at android.app.Activity.performCreate(Activity.java:5104)
    04-20 11:13:29.780: E/AndroidRuntime(820):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
    04-20 11:13:29.780: E/AndroidRuntime(820):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
    04-20 11:13:29.780: E/AndroidRuntime(820):  ... 11 more
    04-20 11:13:33.220: I/Process(820): Sending signal. PID: 820 SIG: 9 
```

谢谢！！`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:35:38.307

问题在这里：

```
com.example.thebasicseries.menu.onCreate(menu.java:35) 
```

你得到一个 NullPointerException。

似乎您的布局 XML 中没有 Tutorial2 按钮。

# java - 如何解决“类型参数ListNode隐藏类型ListNode”？

> ID：16119564
> 
> 赞同：0
> 
> 时间：2013-04-20T11:02:36.923
> 
> 标签：java, type-parameter

我遇到了一些 java 类型参数的问题。这是代码。我有一个 ListNode 类和一个实现 Comparator 接口的 MyComparator 类。

```
class ListNode {
    int val;
    ListNode next;
}

class MyComparator<ListNode> implements Comparator<ListNode> {
    @Override
    public int compare(ListNode n1, ListNode n2) {
        if (n1.val < n2.val)
            return -1;
        else if(n1.val == n2.val)
            return 0;
        else
            return 1;
    }
} 
```

但是编译器在 MyComparator 的声明行报告“类型参数 ListNode 隐藏了类型 ListNode”，并在 compare() 的覆盖实现中导致“val 无法解析”错误。我对这里的类型参数感到很困惑，有人可以给我一些提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:09:06.067

利用

```
class MyComparator implements Comparator<ListNode> { 
```

代替

```
class MyComparator<ListNode> implements Comparator<ListNode> { 
```

# git - Git：与根目录同名的文件夹被忽略

> ID：16119568
> 
> 赞同：3
> 
> 时间：2013-04-20T11:03:02.820
> 
> 标签：git

假设以下文件夹结构

```
- myproj
  - components
    - server
      - src 
```

现在我将所有源文件移动`src`到一个名为 root 的子文件夹中`myproj`（由于`PATH`原因）。树现在看起来像这样

```
- myproj
  - components
    - server
      - src
        - myproj 
```

Git 只显示删除，但不显示`myproj`子文件夹中的新文件。为什么？

### 更新：

我在新目录上明确调用`git add`并报告

```
The following paths are ignored by one of your .gitignore files:
  components/server/src/<myproj> 
```

显然，一个“流氓”`.gitignore`以某种方式潜入项目子文件夹中，不包括名称 - 所以我认为它与根文件夹名称相关 - 但事实并非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:10:01.760

如果您使用[`git mv`](http://git-scm.com/docs/git-mv)，则不会显示删除，然后是`git commit`.

如果你不这样做，那么它会检测删除和添加。

确保您提交所有内容，而不仅仅是`git commit myproj`在移动之后，否则状态仍将反映删除，如“[`git mv`不删除旧文件](https://stackoverflow.com/a/9610786/6309)”。

如果您只是将文件移动到新目录下，请注意 a`git status`只会显示该新目录（而不是其中的所有文件）。

只有当您在其中的所有文件中`git add myproj`才能看到它时。`git status`

# php - 用于记录系统日志或历史的数据库

> ID：16119571
> 
> 赞同：0
> 
> 时间：2013-04-20T11:03:19.103
> 
> 标签：php, mysql, laravel, laravel-3

首先我不得不说对不起，我不知道它是调用系统日志还是系统历史记录。

我要实现一个需要填写各种表格的网络系统，我打算拿出一个表格来记录插入、更新、删除等所有单个步骤，包括旧数据和新数据。

我做了一些研究，但无法弄清楚。希望有人能给我一个指导。谢谢你。

下面是我的表结构。

**系统日志**

```
Id (Pk)
editedby (int)
Module (var)
oldValue(text) 
newValue(text)
changeon(datetime) 
```

假设所有输入是

```
Array
(
    [column1] => male
    [column2] => beach
) 
```

我计划使用 php 序列化将所有表单保存在数据库中。

我的问题

1.  序列化是保存所有数据的好方法吗？
2.  这个数据库结构足够恢复数据吗？
3.  任何建议

** 我正在使用 php laravel 框架和 mysql。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T08:33:45.117

你的方法在我看来没问题。您的系统日志表可能会变大并且有大量写入。你应该注意选择像 InnoDB 这样的非阻塞引擎，最终甚至是[归档引擎](http://dev.mysql.com/doc/refman/5.1/de/archive-storage-engine.html)。

在像 ArangoDB 这样的无模式数据库中，您不需要序列化数据，而只需保留不同版本的副本，对于 MySQL，我没有比您排列出来的序列化数据更好的主意。

# jquery - 如何在 JSP 页面中实时显示通知

> ID：16119574
> 
> 赞同：1
> 
> 时间：2013-04-20T11:03:36.127
> 
> 标签：jquery, spring, jsp, notifications

我需要通过客户端事件向其他用户显示预订通知。我想以类似 facebook 的方式进行操作：每当有人通过我的门户网站进行预订时，我希望该预订以弹出窗口的形式显示给正在使用我的应用程序的另一个用户。

我怎样才能做到这一点？我正在使用 Spring 3.0、JSP 和 jQuery。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T19:45:04.753

正如评论中所说，您可以使用长轮询（或多或少意味着：客户端向服务器发送请求并保持打开状态，直到服务器响应更新，然后一旦收到响应，客户端就会发送另一个请求）或短轮询（每 X 秒，您的客户端向您的服务器发送一个请求以请求更新，服务器立即以是/否响应）。

Web 套接字越来越受欢迎/支持，但在 ie10 之前不受支持，因此取决于您想要支持的浏览器 ( [http://en.m.wikipedia.org/wiki/WebSocket](http://en.m.wikipedia.org/wiki/WebSocket) )

使用 jquery 进行短轮询非常简单，并且可以以任何刷新率向您的服务器发送请求。

* * *

**编辑**

如果您不打算使用 websockets 之类的东西（例如，因为您必须支持较旧的浏览器），那么我建议您使用短轮询而不是传统的长轮询方法，例如彗星。

请参阅此处以获得简洁的长轮询与短轮询评论：[https](https://stackoverflow.com/a/4714111/258813) ://stackoverflow.com/a/4714111/258813 基本上，如果需要立即通知人们，长轮询很有用，但更复杂且内存密集 - 这意味着每个记录in user 将与服务器建立开放连接，因此您将受到服务器支持的开放连接数量的限制。

短轮询目前可能是解决您描述的问题的最常用方法 - 例如，如果您访问 twitter 并打开 chrome 开发人员工具/firebug（无论您在浏览器上使用什么开发工具）并等待几秒钟，您将看到ajax 请求在后台定期检查更新。

如果你能应付几秒钟的通知延迟，那么短轮询真的很简单，这里有一个基本的例子：

在页面加载时，在您的 JS 中调用它：

```
setInterval(checkForNotifications, 10000); 
```

上面将每 10 秒调用一次函数`checkForNotifications()`（显然，您可以将 10 秒更改为任意时间长度 - 只需根据您希望用户更新的频率调整上述行中的 10000）。

然后，在您的`checkForNotifications`函数中，只需对您的服务器进行 ajax 调用，询问是否有任何更新 - 如果服务器说是，则只需使用 JS 显示警报，如果没有（大多数情况下最有可能）然后执行没有什么：

```
function checkForNotifications(){
    $.ajax({
        url: "your/server/url", 
        type: "GET",
        success: function( notification ) {
            //Check if any notifications are returned - if so then display alert
        },
        error: function(data){
            //handle any error 
        }
    });
} 
```

# python - 调用实例时的不同类型

> ID：16119580
> 
> 赞同：-1
> 
> 时间：2013-04-20T11:04:16.337
> 
> 标签：python

我有以下代码：

```
#

 def macierz(self, R, alfa, beta):
 #   '''Definiuje macierz przeksztalcenia.'''
 #   alfa=float(self.rad(alfa))
 #   beta=float(self.rad(beta))
 #   R=float(R)
 #   B=self.array([[-self.cos(alfa), -self.sin(alfa), 0, -R*self.cos(alfa)], [self.sin(alfa)*self.cos(beta), -self.cos(alfa)*self.cos(beta), -self.sin(beta), R*self.sin(alfa)*self.cos(beta)], [self.sin(alfa)*self.sin(beta), -self.cos(alfa)*self.sin(beta), self.cos(beta), R*self.sin(alfa)*self.cos(beta)], [0, 0, 0, 1]])

  def konwersja(self):
    '''Ta funkcja przeprowadza konwersje listy wsp wewnetrznych na wspolrzedne kartezjanskie.'''
    listaB=[]
    R=2
    alfa=1
    beta=1
    B=self.array([[-self.cos(alfa), -self.sin(alfa), 0, -R*self.cos(alfa)], [self.sin(alfa)*self.cos(beta), -self.cos(alfa)*self.cos(beta), -self.sin(beta), R*self.sin(alfa)*self.cos(beta)], [self.sin(alfa)*self.sin(beta), -self.cos(alfa)*self.sin(beta), self.cos(beta), R*self.sin(alfa)*self.cos(beta)], [0, 0, 0, 1]])
    lista_xyz=[]
    #matrix=self.macierz
    j=0
    q=self.array((0., 0., 0., 1.)).reshape(4,1)
    while j<len(self.lista):
    #  B=matrix(self.lista[j+1], self.lista[j+3], self.lista[j+5])
      q=self.dot(B, q)
      print self.lista[j], q[0,0], q[1,0], q[2,0]
      break 
```

，效果很好，但是当我将其更改为：

```
 def macierz(self, R, alfa, beta):

    '''Definiuje macierz przeksztalcenia.'''
    alfa=float(self.rad(alfa))
    beta=float(self.rad(beta))
    R=float(R)
    B=self.array([[-self.cos(alfa), -self.sin(alfa), 0, -R*self.cos(alfa)], [self.sin(alfa)*self.cos(beta), -self.cos(alfa)*self.cos(beta), -self.sin(beta), R*self.sin(alfa)*self.cos(beta)], [self.sin(alfa)*self.sin(beta), -self.cos(alfa)*self.sin(beta), self.cos(beta), R*self.sin(alfa)*self.cos(beta)], [0, 0, 0, 1]])

  def konwersja(self):
    '''Ta funkcja przeprowadza konwersje listy wsp wewnetrznych na wspolrzedne kartezjanskie.'''
    listaB=[]
    R=2
    alfa=1
    beta=1
    lista_xyz=[]
    matrix=self.macierz
    j=0
    q=self.array((0., 0., 0., 1.)).reshape(4,1)
    while j<len(self.lista):
      B=matrix(self.lista[j+1], self.lista[j+3], self.lista[j+5])
      q=self.dot(B, q)
      print self.lista[j], q[0,0], q[1,0], q[2,0]
      break 
```

我得到：

```
File "./zmat_xyz.py", line 37, in konwersja
    q=self.dot(B, q)
TypeError: unsupported operand type(s) for *: 'NoneType' and 'float' 
```

为什么，当我调用`macierz`函数类型时无法识别？

好吧，我认为我上面写的内容很混乱。这是一个完整的代码：

```
#!/usr/bin/python
class Internal:
  from numpy import sin, cos, radians, array, pi, dot, zeros, reshape
  rad=radians
  lista=[]
  i=0
  def dane(self, plik_zmat):
    '''Ta funkcja przygotowuje plik zmat, typu MOPAC do odczytu przez funkcje konwersja.'''
    plik=open(plik_zmat, 'r+')
    for linijka in plik:
      for slowo in linijka.split():
        try:
          slowo=float(slowo)
        except ValueError:
          pass
        self.lista.append(slowo)
    while self.i<6:
      self.lista.pop(0)
      self.i+=1

 # def macierz(self, R, alfa, beta):
 #   '''Definiuje macierz przeksztalcenia.'''
 #   alfa=float(self.rad(alfa))
 #   beta=float(self.rad(beta))
 #   R=float(R)
 #   B=self.array([[-self.cos(alfa), -self.sin(alfa), 0, -R*self.cos(alfa)], [self.sin(alfa)*self.cos(beta), -self.cos(alfa)*self.cos(beta), -self.sin(beta), R*self.sin(alfa)*self.cos(beta)], [self.sin(alfa)*self.sin(beta), -self.cos(alfa)*self.sin(beta), self.cos(beta), R*self.sin(alfa)*self.cos(beta)], [0, 0, 0, 1]])

  def konwersja(self):
    '''Ta funkcja przeprowadza konwersje listy wsp wewnetrznych na wspolrzedne kartezjanskie.'''
    listaB=[]
    R=2
    alfa=1
    beta=1
    B=self.array([[-self.cos(alfa), -self.sin(alfa), 0, -R*self.cos(alfa)], [self.sin(alfa)*self.cos(beta), -self.cos(alfa)*self.cos(beta), -self.sin(beta), R*self.sin(alfa)*self.cos(beta)], [self.sin(alfa)*self.sin(beta), -self.cos(alfa)*self.sin(beta), self.cos(beta), R*self.sin(alfa)*self.cos(beta)], [0, 0, 0, 1]])
    lista_xyz=[]
    #matrix=self.macierz 
    j=0
    q=self.array((0., 0., 0., 1.)).reshape(4,1)
    while j<len(self.lista):
    #  B=matrix(self.lista[j+1], self.lista[j+3], self.lista[j+5])
      q=self.dot(B, q)
      print self.lista[j], q[0,0], q[1,0], q[2,0]
      break

Internal().dane('formaldehyd.zmat')
print Internal().lista
Internal().konwersja() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:38:03.517

您的函数中没有任何`return`语句。`macierz`这会导致 Python 返回一个隐含的`None`. 您在错误中注意到。

更改以下行：

`B=self.array([[-self.cos(alfa), -self.sin(alfa), 0, -R*self.cos(alfa)], [self.sin(alfa)*self.cos(beta), -self.cos(alfa)*self.cos(beta), -self.sin(beta), R*self.sin(alfa)*self.cos(beta)], [self.sin(alfa)*self.sin(beta), -self.cos(alfa)*self.sin(beta), self.cos(beta), R*self.sin(alfa)*self.cos(beta)], [0, 0, 0, 1]])`

至：

`return self.array([[-self.cos(alfa), -self.sin(alfa), 0, -R*self.cos(alfa)], [self.sin(alfa)*self.cos(beta), -self.cos(alfa)*self.cos(beta), -self.sin(beta), R*self.sin(alfa)*self.cos(beta)], [self.sin(alfa)*self.sin(beta), -self.cos(alfa)*self.sin(beta), self.cos(beta), R*self.sin(alfa)*self.cos(beta)], [0, 0, 0, 1]])`

这将返回创建的数组并分配给您`B`在`konwersja`.

# reference - 图像文件夹参考 - 图像不显示

> ID：16119583
> 
> 赞同：1
> 
> 时间：2013-04-20T11:04:44.383
> 
> 标签：reference, interface-builder, directory, xib

我对一些图像有问题，我用一些子目录创建了一个文件夹引用（蓝色图标），我在“用户标题搜索路径”中添加 /Immagini，然后在 xib 文件中添加一个按钮并选择一个图像，在 IB我看到了图像，但是当我什么都不运行模拟器或设备时，没有显示图像。

在 IB 中，我看不到完整路径 Immagini/folder1/image.png，而只有 image.png，问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T01:24:19.660

显然，这个问题已经存在多年。我不认为苹果计划修复它。*如果您指定完整路径，它将*显示在您的程序中，但在 IB 中它将显示蓝色问号图像。相反，如果您只指定图像名称，那么它将显示在 IB 中，但不会显示在您的程序中。所以基本上这意味着只使用图像名称来操作它，然后当您满意时将其切换到完整路径并忍受蓝色问号图像。

# java - volatile 关键字与同步 java 块的重要性是什么？

> ID：16119587
> 
> 赞同：0
> 
> 时间：2013-04-20T11:04:52.517
> 
> 标签：java, synchronization

拜托，谁能告诉我java中的volatile关键字是什么，它的主要功能，如何在同步块中使用它，如果我们将它从块中完全删除会发生什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:13:40.593

让我们从 java 中的 volatile 变量开始：

> Java 中的 Volatile 关键字用作 Java 编译器和线程的指示符，它们不缓存此变量的值并始终从主内存中读取它

那么从内存中读取变量值有什么好处，请考虑以下示例代码：

```
public class Singleton{
private static volatile Singleton _instance; //volatile variable 

public static Singleton getInstance(){

if(_instance == null){
        synchronized(Singleton.class){
          if(_instance == null)
          _instance = new Singleton();
        }

}
return _instance;

} 
```

在上一个示例中：

1）我们只创建一次实例

2）我们在第一个请求到来时懒惰地创建实例。

如果我们不使 _instance 变量 volatile 则创建 Singleton 实例的线程无法与其他线程通信，该实例已创建，直到它从 Singleton 块中出来，所以如果线程 A 正在创建 Singleton 实例并且刚刚创建失去了 CPU，所有其他线程将无法看到 _instance 的值不为空，他们会相信它仍然为空。

结论：

> volatile 关键字会更有用。当多个线程使用同一个变量时，每个线程都会为该变量拥有自己的本地缓存副本。因此，当它更新值时，它实际上是在本地缓存中更新，而不是在主变量内存中。使用相同变量的另一个线程对另一个线程更改的值一无所知

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:06:50.507

Java 中的 Volatile 关键字用作 Java 编译器和线程的指示符，它们不缓存此变量的值并始终从主内存中读取它。

[如果我们从同步块中删除它会发生什么？](http://shabarishtutorial.blogspot.in/2011/12/example-of-volatile-keyword-in-java.html)

# javascript - 获取在 HTML Canvas 中加载的图像的 FileSize

> ID：16119593
> 
> 赞同：2
> 
> 时间：2013-04-20T11:05:36.573
> 
> 标签：javascript, html, file, filesize

有没有一种简单的方法来获取使用 JavaScript 在我的画布中活动的图像文件大小？

我需要管理用户上传的图像，使其不超过 10MB 的特定总文件大小。我正在将图像大小调整为 800X600 并将它们加载到画布中，但需要跟踪画布中调整大小的图像。这应该发生在客户端。

谢谢

# html - ajax 返回的数据无法识别 HTML 标签

> ID：16119594
> 
> 赞同：0
> 
> 时间：2013-04-20T11:05:41.697
> 
> 标签：html, ajax, jquery, handlebars.js

我有一个从 PHP/MYSQL 脚本中提取数据的 jquery 函数。数据具有`<br>`作为数据字符串的一部分。当我使用 将它附加到 DOM`jQuery.append()`时，它不会像`<br>`.

我正在使用 Handlebars 将数据插入 DOM。

附加到dom：

`$('ul.special-deals').append(template(item));`

数据字符串：

**消费满 10 欧元**可获赠意大利肉丸和意大利面*`<br>`*

 **输出就是：

*消费满 10 欧元即可获赠意大利肉丸和意大利面 <br>*

`<br>`页面无法识别。

模板：

```
<li> 
    <a href="#" class="restaurantItem" restaurant={{item.estName}} address={{estAddr}}>
        <img src="{{img_link}}" width="60" height="60" alt=""/>
        <div class="img-det">
            <strong class="title">{{title}}</strong>
            <p>{{desc_short}}<br/>
                Expires: {{expiry_date}}
            </p>
            <em class="price">{{price}}</em> 
        </div>
    </a>
    <a href='dealDetail.html?id={{id}}' class="det-link">Detail</a>
</li> 
```

任何帮助，将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:30:02.960

这`<br>`包含在 内`desc_short`吗？

如果是这种情况，您是否尝试过使用三重括号？

```
<p>{{{desc_short}}}</p> 
```

这将输出没有任何 HTML 转义的内容，这是您在这种情况下所需要的。**

# php - 不理解 XML Entities 和 PHP SimpleXMLElement 中的输出

> ID：16119597
> 
> 赞同：0
> 
> 时间：2013-04-20T11:05:45.037
> 
> 标签：php, xml, simplexml, xml-entities

我在 XML 中使用实体，但我不明白我的结果。

我有一个调用外部实体的 XML 文件，这是 config.xml ：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE config [
    <!ENTITY totalInstances SYSTEM "totalInstances.xml">
]>
<config>
    &totalInstances;
</config> 
```

这是文件 totalInstances.xml ：

```
<?xml version="1.0" encoding="UTF-8" ?>
<totalInstances>
    <nombre>45</nombre>
</totalInstances> 
```

所以在 PHP 中，我在 SimpleXMLElement 类的帮助下加载文件 config.xml ：

```
$config = simplexml_load_file('config.xml'); 
```

然后我用 var_dump 输出变量 $config，这是我不明白的事情：

```
object(SimpleXMLElement)[3]
  public 'totalInstances' => 
    object(SimpleXMLElement)[5]
      public 'totalInstances' => 
        object(SimpleXMLElement)[6]
          public 'totalInstances' => 
            object(SimpleXMLElement)[8]
              public 'nombre' => string '45' (length=2) 
```

我希望有一个简单的 "totalInstances" 节点，其中包含节点 "nombre" 。怎么了 ？谢谢。

**编辑**：有关更多详细信息，我不明白为什么我得到三个名为“totalInstances”的对象，而文件 totalInstances.xml 中只有一个？我希望有这个输出：

```
object(SimpleXMLElement)[3]
      public 'totalInstances' => 
            object(SimpleXMLElement)[8]
                public 'nombre' => string '45' (length=2) 
```

另外，我不确定输出中“[]”之间的数字是什么意思。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:45:54.180

是的，这确实看起来很奇怪。但是，您不能在*SimpleXMLElement*`var_dump`上使用or 。这些元素具有很多魔力，这里是在骗你。我的意思是真的在撒谎，请看：`print_r`**`var_dump`**

 *```
var_dump($config->totalInstances->totalInstances); 
```

正在给予`NULL`，根本没有*SimpleXMLElement*。

在您的特定情况下，如果您想将文档用作*`SimpleXMLElement`*扩展实体，那么您可以使用[`LIBXML_NOENT`选项](http://php.net/libxml.constants)（替代实体）：

```
$config = simplexml_load_file('config.xml', NULL, LIBXML_NOENT); 
```

这确实允许迭代和访问由实体表示的实体。然后`var_dump`看起来也好多了：

```
class SimpleXMLElement#4 (1) {
  public $totalInstances =>
  class SimpleXMLElement#3 (1) {
    public $nombre =>
    string(2) "45"
  }
} 
```*

# java - 带有面板的 Java Swing JToolbar：外观

> ID：16119600
> 
> 赞同：0
> 
> 时间：2013-04-20T11:05:51.833
> 
> 标签：java, swing, jbutton, jtoolbar

我有一个`JToolbar`包含多个`JPanels`（需要，因为我想为每个都有特定的边框）。不幸的是，Look&Feel 管理器无法识别`JPanels`属于工具栏的按钮，`JButtons`因此渲染器与普通按钮一样（即没有工具栏上的特殊鼠标悬停效果）。

替换`JPanels`by`JToolbars`不是一种选择，因为 LAF 渲染器为其提供了特殊的背景。

还有其他选择/提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:14:09.950

如下所示，您可以根据需要更改工具栏的布局并添加组件。您还可以拥有任意数量的工具栏。L&F 组合显示[在这里](https://stackoverflow.com/a/11949899/230513)。请注意，提供 L&F 特定的`addSeparator()`方法。`JToolBar``JToolBar.Separator`

![测试图像](https://i.stack.imgur.com/K1fBW.png)

```
import component.Laf;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.Action;
import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JToolBar;

/**
 * @see https://stackoverflow.com/a/16121288/230513
 */
public class JToolBarTest {

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLayout(new BoxLayout(f.getContentPane(), BoxLayout.Y_AXIS));
        // https://stackoverflow.com/a/11949899/230513
        f.add(Laf.createToolBar(f));
        f.add(createBar());
        f.add(createBar());
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private JToolBar createBar() {
        JToolBar toolBar = new JToolBar();
        toolBar.add(createPanel());
        toolBar.addSeparator();
        toolBar.add(createPanel());
        return toolBar;
    }

    private JPanel createPanel() {
        JPanel panel = new JPanel();
        panel.setBorder(BorderFactory.createTitledBorder("Panel"));
        Action buttonAction = new AbstractAction("Button"){

            @Override
            public void actionPerformed(ActionEvent e) {
                System.out.println(e.getActionCommand()
                    + " " + e.getSource().hashCode());
            }
        };
        panel.add(new JButton(buttonAction));
        panel.add(new JButton(buttonAction));
        return panel;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new JToolBarTest().display();
            }
        });
    }
} 
```

# compare - 二进制文件的智能差异

> ID：16119610
> 
> 赞同：0
> 
> 时间：2013-04-20T11:06:40.743
> 
> 标签：compare, diff, binaries

如果您将在硬件上编译相同的源代码两次，您将获得不同的二进制文件。您知道如何使用任何工具或脚本来验证内容未更改吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:08:43.227

[Beyond Compare](http://www.scootersoftware.com/)具有二进制比较功能。

# sharepoint - 无法添加用户 SharePoint 2007

> ID：16119612
> 
> 赞同：0
> 
> 时间：2013-04-20T11:07:04.717
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我正在使用 SharePoint 2007，并且我拥有（管理员）用户，该用户拥有所有权限，我还创建了一个（管理员助理）用户，但该用户无法创建对其他用户的访问权限，他只能创建一个组：例如：

> 人员和组 ==> 新 ==> 新组
> 
> ```
>  People and Groups ==> New ==> Add Users (this option only appears to Admin) 
>  How can i have it on the other user??? 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:05:35.383

提供完全控制的权限级别，以便他们可以添加/删除用户或组。有关权限的更多详细信息，您可以访问此[链接](http://office.microsoft.com/en-001/windows-sharepoint-services-help/permission-levels-and-permissions-HA010100149.aspx)。

# select - 在 Angular.js 中的选择元素中选择最接近的选项

> ID：16119614
> 
> 赞同：0
> 
> 时间：2013-04-20T11:07:56.870
> 
> 标签：select, model, angularjs, controller

我的模板中有这样的 SELECT：

```
<select ng-model="selectedValue">
    <option>$5</option>
    <option>$10</option>
    <option>$20</option>
    <option>$50</option>
    <option>$100</option>
</select> 
```

然后在控制器中，我从 Web 服务中检索一些值，然后执行以下操作：

```
$scope.selectedValue = somevalue; 
```

如果`somevalue`是选择元素中的选项之一，则此方法有效。但是，如果不是，则选择只是空白。所以我想做的是选择最接近`somevalue`. 例如，如果我检索 $9，我会选择 $10 选项。

我知道如何使用 jQuery 来做到这一点，但这并不是真正的 Angular 方式。

在 Angular 中有什么简单的方法可以做到这一点吗？

# c# - 如何在我的 mvc 视图中从中提取主要价格值？

> ID：16119622
> 
> 赞同：0
> 
> 时间：2013-04-20T11:08:39.520
> 
> 标签：c#, asp.net, asp.net-mvc

```
?((webEPOS.Models.cPrice)((new System.Collections.Generic.Mscorlib_CollectionDebugView<webEPOS.Models.cProductOption>(this.ProductOptions)).Items[0])).MainPrice
12 
```

我怎样才能打开它以在我的 mvc 视图中以主要价格获得实际价值？

```
this.ProductOptions[0]
{MAFIA webEPOS.Models.cProductSize}
    base {webEPOS.Models.cPrice}: {MAFIA webEPOS.Models.cProductSize}
    IsDeleted: false
    OptionID: 12
    ParentName: "MAFIA"
    Position: 0
    ProductID: 7
    SizeDescription: "7''"
    SizeID: 1
    SizeInfo: {webEPOS.Models.cProductSize} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:53:46.287

我在这里做了很多假设，因为您的问题需要更多细节，但看起来 cPrice 是您的基类，具有 MainPrice 的属性？

因此，如果您的 View 声明是

```
@model List<cProductOption> 
```

您已经从 ActionResult 传递了产品选项，如下所示：

```
return View(this.ProductOptions); 
```

我猜由于您在上面编写代码的方式，Items 集合的类型很松散。您不想在视图中处理这种代码；通过在 cProductOption 上编写一个可以优雅地抓取它的扩展方法来安全地在服务器端执行此操作：

```
public static decimal MainPrice (this cProductOption cproductOption) {

    decimal returnValue = 0m;

    try {
        // returnValue = try and get it from .Items[0], casting to the type you need and/or seeing if the necessary relationships exist.
    }
    catch(Exception exception){
        // log the possible exception
    }

    return returnValue;
} 
```

然后因为你已经按照你的方式整理了你的继承，你可以简单地遍历 Model 列表：

```
@foreach (cProductOption cproductOption in Model) {
    @cProductOption.MainPrice()
} 
```

就像我说的那样，我对其中的一些进行了有根据的猜测，但希望它能给你一些指导。祝你的应用好运！

# zend-framework2 - 获取 zend 表单文件上传值到另一个输入字段

> ID：16119624
> 
> 赞同：0
> 
> 时间：2013-04-20T11:08:53.927
> 
> 标签：zend-framework2

```
<?php echo $this->form->getElement("logo");  ?>
<div id="BrowserVisible">
<input type="text" id="halal" />
<input type="button" value="Upload" id="button" />
</div> 
```

(form->getElement("logo"); ?>)字段由zend form生成，当我从PC中选择图像文件时，上传文件路径或文件名显示在输入字段中，也复制在（`<input type="text" id="halal" />`）中，我怎样才能做到这一点。

先进的技术

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:03:29.147

尝试使用以下代码更改您的代码：

```
<?php echo $this->form->get("logo");  ?> 
```

# c++ - 这两个字段/方法有什么区别？

> ID：16119625
> 
> 赞同：2
> 
> 时间：2013-04-20T11:08:54.000
> 
> 标签：c++, class, field

我已经开始使用 C++ 中的类，并且发现了两种不同的字段声明：

```
type ClassName::*var; 
```

和

```
type *ClassName::var; 
```

它们之间有什么区别？

编辑：还有一个问题可以像这样声明方法：

```
type *ClassName::method_one(...);
type ClassName::*method_two(...); 
```

有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:32:34.120

它们是不同的。第一个声明一个***指向类型成员变量的指针`type`***。

第二个是***类型******的类******成员的静态定义。`var``ClassName``type*`***

第三个（即使不完整）是***返回的成员函数的定义`type*`***

第四个是一个***指向返回的成员函数`type`***的指针的声明。

* * *

```
class A {
public :
   int i;
   static int *j;
   int* f();
   int g() { std::cout << "g" << std::endl; }
};

int* A::j;                // First one
int* A::f() { }           // Third one

int main() {
    A a;

    int A::*i_ptr;        // Second one
    i_ptr = &A::i;    
    a.*i_ptr = 2;         // Modifying a.i

    int (A::*mem_fn) ();  // Fourth one
    mem_fn = &A::g;
    (a.*mem_fn)();        // calling a.g()
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:33:14.687

一个是*指向成员*的指针，另一个是*作为指针的成员*。

如果您将声明用于静态初始化之类的东西：

```
class SomeClass {
public:
    static int *member, *othermember;
};

int SomeClass::*member = 0;
int *SomeClass::othermember = 0; 
```

虽然这编译得很好，但如果你真的*使用* `member`你会得到一个链接器错误（而不是`othermember`，因为你定义了一个指向成员的指针；而不是一个成员即指针。

使用您的函数定义：

```
class SomeOtherClass {
public:
    static int *function();
};

int *SomeOtherClass::function() { return 0; } // This will work
int SomeOtherClass::*function() { return 0; } // This won't work 
```

同样，声明在语义上有所不同。只有第一个函数正确定义了返回指针的成员函数。

# qt - 获取包含网页源的日语字符的 QtNetworkAccessManaget 问题。

> ID：16119628
> 
> 赞同：0
> 
> 时间：2013-04-20T11:09:06.137
> 
> 标签：qt

在我的 Qt QUI 应用程序中，我需要使用 QNetworkAccessManager 获取 WebPage 源。我的问题是，当我试图获取属于日本国家的页面源并包含日语单词时，日语单词会以某种未定义的格式出现。

我怎样才能获得与日文字符一样的页面源并将其保存到 QString 对象中。

示例页面网址为：[http](http://www.amazon.co.jp/BUFFALO) : //www.amazon.co.jp/BUFFALO -外付けハードディスク-Regza-HD-LB2-0TU2-フラストレーションフリーパッケージ/dp/B0052VIGXA/ref=sr_1_1?s=electronics&ie=UTF8&qid= 1366439116&sr=1-1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:12:26.860

“未定义”格式是什么意思，以及如何分析 QString 的内容。QNetworkAccessManager 获取从 http 接收到的原始数据，因此您可以执行类似的操作。

```
QByteArray data = reply->readAll(); 
```

您应该分析接收到的标头进行编码并进行适当的转换。

# c++ - 如果将char *数组保存在C中的堆栈中，如何比较它

> ID：16119630
> 
> 赞同：0
> 
> 时间：2013-04-20T11:09:13.453
> 
> 标签：c++, c, linux, unix

```
char *file1charbuf=(char*)malloc(sizeof(char));
char *file2charbuf=(char*)malloc(sizeof(char)); 
```

在循环中直到 EOF 我将 char 读入`*file1charbuf`然后`*file2charbuf`比较。

```
...
check=read(file1, file1charbuf, 1);
check2=read(file2, file2charbuf, 1);
if (*file1charbuf!=*file2charbuf){
         printf("differ: char %i, line %i\n",charpos,linepos);
         exit(1);
}
.... 
```

比较工作正常，但我想将指针保留在堆栈中，而不是堆中。malloc 也是 C lib 函数。

```
char *file1charbuf[1]; //1 element array of char
char *file2charbuf[1]; 
```

与那个比较不起作用

```
...
if (file1charbuf[0]!=file2charbuf[0]){
         printf("differ: char %i, line %i\n",charpos,linepos);
         exit(1);
}
... 
```

和第二个问题。`close(file1)`如果`exit(1)`发现有必要吗？

*   我应该只使用 sys 调用，而不是 lib 函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T11:12:57.887

恐怕您显示的代码存在很多问题：

1.  [不要`malloc()`在 C 中转换 ,](https://stackoverflow.com/a/605858/28169)的返回值。
2.  `sizeof (char)`在 C 中总是 1，所以像这样使用它是毫无意义的。
3.  当您似乎指的是字符数组时，您正在声明指向字符的指针数组。

    `char *file1charbuf[1]; //1 element array of char` 应该
    `char file1charbuf[1]; /* 1-element array of char */`或者，当然，只是
    `char file1charbuf; /* 1-character buffer. */`

4.  您正在`read()`使用 1 字节缓冲区，这是非常低效的。

5.  要将字符数组（不一定是字符串，即不必以零结尾）与超过 1 个字符进行比较，请使用`memcmp()`.
6.  最好在调用`close()`之前调用所有打开的文件描述符`exit()`。在大多数操作系统上，进程的死亡将导致其所有资源被回收，但最好明确地这样做。如果文件 I/O 正在使用`FILE*`基于缓冲的调用，则没有必要，因为这些调用`exit()`在所有环境中都会自动关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:13:11.570

`char *file1charbuf[1];`是一个指向 a 的指针的数组`char`。如果您想要一个数组`char`，请使用`char file1charbuf[1]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:16:55.620

这些定义不是指向 char 数组的指针，它们是 char 数组。

```
char file1charbuf[1]; //1 element array of char
char file2charbuf[1]; 
```

使用在堆上分配的内存和在堆栈上分配的内存比较字符串的语义没有区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T19:13:29.700

```
...
char c1, c2;
check=read(file1, &c1, 1);
check2=read(file2, &c2, 1);
if (c1!=c2) {
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-21T10:40:47.540

用于比较 2 个文件并列出不同的行和字符的代码。它不会逐行比较它们，而是逐个字符地比较它们，而是跟踪行号并将文件加载到 4Kbytes 的块中。

```
#define BLOCKSIZE 4096

char file1charbuf[BLOCKSIZE]; //4096 character buffer in stack
char file2charbuf[BLOCKSIZE];
int linepos=1, charpos =1, i, b1, b2 ;
int file1 = open("1.txt", O_RDONLY);
int file2 = open("2.txt", O_RDONLY);

do{
   b1=read(file1, file1charbuf, BLOCKSIZE);
   b2=read(file2, file2charbuf, BLOCKSIZE);
   for(i=0; i < b1 && i < b2; ++i){
      if (file1charbuf[i]!=file2charbuf[i]){
         printf("differ: char %i, line %i\n",charpos,linepos);
         close(file1);
         close(file2);
         exit(1);
      }
      if (file1charbuf[i] == '\n'){
         ++linepos;
         charpos=0;
      }
      ++charpos;
   }
}while(   (b1 == BLOCKSIZE || (file1==STDIN && file1charbuf[b1-1] != 0x26)) 
       && (b2 == BLOCKSIZE || (file2==STDIN && file2charbuf[b2-1] != 0x26)) );

if (b1 != b2)
   printf("One bigger than the other\n");
close(file1);
close(file2); 
```

关于从 STDIN 读取：

当您按下回车键时，来自 stdin 的 read() 会解除阻塞。那时，只有您迄今为止键入的字符可供阅读。这意味着 b1 将等于您到目前为止键入的字符。条件将`do-while`失败，因为 read 没有读取它请求的所有 4096 字节，这将使它认为这是因为流已经结束。要在 \n 之后继续读取，我们必须更改 while 条件，以便如果我们正在读取的文件描述符是 STDIN，则继续读取，除非我们读取的最后一个字符是我认为的流结束字符`0x26`。我希望 ^D 也能像 enter 一样解除对 read() 的阻塞。

# java - SecureRandom.getInstance() 如何在 Java 中工作

> ID：16119632
> 
> 赞同：2
> 
> 时间：2013-04-20T11:09:36.623
> 
> 标签：java, security, encryption

我在这里使用

```
SecureRandom random = SecureRandom.getInstance("here my name") ; 
```

但它在我们的项目中没有给出任何异常。但是当我使用 main 方法运行时，它对我来说是`NoSuchAlgorithm Exception` 异常的。它对我来说也很好。这是什么原因。我很困惑？

```
KeyGenerator keyGen = KeyGenerator.getInstance("here my name"); 
```

但是在这里我得到了例外，为什么？请帮助我。在此先感谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:55:40.107

您可以将字符串传递给`SecureRandom.getInstance`并获得有效结果这一事实并不能保证将相同的字符串传递给`KeyGenerator.getInstance`也会成功。

要了解您的系统支持哪些算法，请[运行此代码](http://ideone.com/ry62ei)并查看结果：

```
for (Provider p : Security.getProviders()) {
    for (Object o : p.keySet()) {
        System.out.println(o);
    }
} 
```

输出将包含如下所示的行：

```
Cipher.AES
KeyGenerator.RC2
Mac.HmacSHA512
...
SecureRandom.NativePRNG
SecureRandom.SHA1PRNG
...
KeyGenerator.DES
KeyGenerator.DESede 
```

以`"SecureRandom."`(ie `"NativePRNG"`, '"SHA1PRNG"') 为前缀的名称可以传递给`SecureRandom.getInstance`，而以`"KeyGenerator."`(ie `"RC2"`, `"DES"`, `"DESede"`) 为前缀的名称可以传递给`KeyGenerator.getInstance`。

# database - 与 Sybase 转储的接口

> ID：16119633
> 
> 赞同：1
> 
> 时间：2013-04-20T11:09:36.597
> 
> 标签：database, sybase, etl, sap-ase

我们有一个几年前退役的遗留系统，它由一个使用 Sybase 实例 (ASE 15) 作为其数据存储的简单 Java 应用程序组成。我们现在已经转移到使用 MySQL 的新应用程序，不幸的是丢弃了旧应用程序、它的源代码以及 Sybase 服务器软件，但仍然有系统退役那天存档的转储。

我们现在需要获取这些转储上的几张大型数据表，但是对于我们的生活，无法弄清楚如何提取/导出它们。

在一个完美的世界中，Sybase 或某些第 3 方将提供一个可以直接处理转储文件的开源工具。但是到目前为止我所做的研究表明，转储文件规范是专有的，并且不存在这样的工具（我们不想在这种“复活”上花费任何钱......至少如果可能的话）。

取而代之的是，我的下一个猜测是尝试下载 Sybase 的试用版，将转储物化为真实的实时数据库，然后编写一个小的提取脚本/工具，它只连接到数据库并获取我们的数据需要。

我是在走正确的道路还是有更好的方法/工具/方法来解决这个问题？  

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:19:22.997

你正朝着正确的方向前进。有 ASE 15.7 的试用版，您应该可以使用它使数据库联机。

一个数据库在线，您可以使用 Sybase **bcp**实用程序以您需要的任何格式逐个表提取数据。如果您不需要整个表，而只需要表的子集，则可以使用**视图**过滤不需要的数据，并使用**bcp**从视图中导出数据。

由于转储数据库中的 ASE 版本可能比您为进行恢复而安装的 ASE 版本旧，因此从技术上讲，您将进行数据库升级，因此您需要查看有关升级数据库的安装文档。

支持跨平台（Red Hat 到 Ubuntu），但如果原始数据库被转储而没有计划在不同平台上恢复它，则可能需要一些额外的步骤才能使其正常工作。您可能必须使用**norecovery**选项强制数据库联机，以允许您截断事务日志并刷新统计信息，然后它才能正常出现。

该操作中最复杂的部分可能是设置容器数据库，以在其中恢复转储数据库。Sybase ASE 需要容器数据库具有相同数量的设备（和磁盘碎片），并且具有相同的大小才能正确还原。如果此信息未知，则可以通过首先加载转储标头来找到它。

```
load database tempdb from DUMP_FILE with headeronly 
```

# php - 如何将1个查询的多个结果一起添加为一个值mysql

> ID：16119637
> 
> 赞同：0
> 
> 时间：2013-04-20T11:10:02.317
> 
> 标签：php, mysql

我正在尝试将查询的多个结果汇总在一起。

事先提供一些信息：我正在建立一个系统，经理可以将员工分配到公司，并提供诸如他们在那周将在那里工作多少小时等信息。

现在，当我在 1 周数内分配员工 2 次时，需要对员工进行限制，他们在该周数内不能工作超过 40 小时。

我在这个脚本之前有一个表格，我在这个表格中选择了 uitzendkrachtid 1 和 weeknummer 1。

我的脚本是：

```
 $uitzendkracht = $_POST['uitzend'];
        $bedrijf = $_POST['bedrijf'];
        $uren = $_POST['uren'];
        $dagen = $_POST['dagen'];
        $weeknummer = $_POST['week'];
        $bijzonderheden = $_POST['bijzonderheden'];

        $query2 = mysql_query("SELECT * 
                               FROM werk
                               WHERE uitzendkrachtid = '".$uitzendkracht."'
                               AND weeknummer = '".$weeknummer."'");

        while($row = mysql_Fetch_array($query2))
              {

               $row['uren'];

              }

My database:

    werkid   uitzendkrachtid  bedrijfid  accountid  uren  dagen   weeknummer   bijzonderheden
    1        1                1          1          25    3       1            geen
    2        1                1          1          40    5       1            geen

This contains the needed id's and weeknumbers and hours of the employee.
uren = hours
dagen = days 
weeknummer = weeknumber 
```

现在我的问题是：

当我`echo $row['uren'];`得到结果 4025 彼此粘在一起时，两个结果是 40 和 25。

我想要的是这些结果一起计算到 65 有没有办法做到这一点？我尝试了一切爆炸，然后 [0] + [ 1 ] 结果等，但没有任何效果。我还检查了此站点以获取解决方案，但找不到与此问题相关的任何内容。任何人都知道一个好的解决方案吗？

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:16:12.183

试试这个

```
$query2 = mysql_query("SELECT sum(uren) as total
                           FROM werk
                           WHERE uitzendkrachtid = '".$uitzendkracht."'
                           AND weeknummer = '".$weeknummer."'");

   $row=mysql_fetch_assoc($query2);
   echo $row['total']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:16:41.897

将您的查询更改为类似

```
$query2 = mysql_query("SELECT sum(uren) as result 
                           FROM werk
                           WHERE uitzendkrachtid = '".$uitzendkracht."'
                           AND weeknummer = '".$weeknummer."'"); 
```

你会得到加法 $row['result']

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:18:31.710

`SUM`在您的查询中使用，

```
$query2 = mysql_query("SELECT SUM(`uren`) 
                               FROM werk
                               WHERE uitzendkrachtid = '".$uitzendkracht."'
                               AND weeknummer = '".$weeknummer."'"); 
```

**输出**

```
65 
```

# java - Java 6 与 Java 7 之间自动拆箱的差异

> ID：16119638
> 
> 赞同：107
> 
> 时间：2013-04-20T11:10:04.440
> 
> 标签：java, casting, java-7, unboxing

我注意到 Java SE 6 和 Java SE 7 之间的自动拆箱行为存在差异。我想知道为什么会这样，因为我找不到这两个版本之间这种行为变化的任何文档。

这是一个简单的例子：

```
Object[] objs = new Object[2];
objs[0] = new Integer(5);
int myInt = (int)objs[0]; 
```

这与 Java SE 7 中的 javac 编译得很好。但是，如果我给编译器“-source 1.6”参数，我会在最后一行得到一个错误：

```
inconvertible types
found   : java.lang.Object
required: int 
```

我尝试下载 Java SE 6 以使用本机版本 6 编译器进行编译（没有任何 -source 选项）。它同意并给出与上述相同的错误。

那么给了什么？从更多的实验来看，Java 6 中的拆箱似乎只能拆箱（在编译时）明显属于装箱类型的值。例如，这适用于两个版本：

```
Integer[] objs = new Integer[2];
objs[0] = new Integer(5);
int myInt = (int)objs[0]; 
```

因此，似乎在 Java 6 和 7 之间，取消装箱功能得到了增强，因此它可以一口气强制转换和取消装箱对象类型，而无需（在编译时）知道该值是否属于正确的装箱类型。但是，通过阅读 Java 7 发布时编写的 Java 语言规范或博客文章，我看不出这件事有什么变化，所以我想知道变化是什么，这个“特性”叫什么?

只是好奇：由于更改，可能会触发“错误”的拆箱：

```
Object[] objs = new Float[2];
objs[0] = new Float(5);
int myInt = (int)objs[0]; 
```

这编译得很好，但在运行时会给出 ClassCastException。

对此有任何参考吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-20T13:32:19.763

[与 Java 5/6 JLS 中的同一部分](http://docs.oracle.com/javase/specs/jls/se5.0/html/conversions.html#5.5)相比[，Java 7 JLS 的 5.5 Casting Conversion 部分](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5)中的语言似乎已更新，可能是为了阐明允许的转换。

Java 7 JLS 说

> 引用类型的表达式可以通过取消装箱转换无错误地转换为原始类型。

Java 5/6：

> 可以通过拆箱转换（第 5.1.8 节）将引用类型的值强制转换为原始类型。

Java 7 JLS 还包含一个表（表 5.1），其中包含从引用类型到原语的允许转换（该表不包含在 Java 5/6 JLS 中）。这明确列出了从 Object 到基元的转换，作为取消装箱的缩小引用转换。

原因在[此电子邮件](http://mail.openjdk.java.net/pipermail/compiler-dev/2010-September/002330.html)中解释：

> 底线：如果规格。允许 (Object)(int) 它也必须允许 (int)(Object)。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-04-20T12:41:28.197

你说的对; 更简单地说：

```
Object o = new Integer(1234);
int x = (int) o; 
```

这在 Java 7 中有效，但在 Java 6 及更低版本中会出现编译错误。奇怪的是，这个特性并没有被显着记录。例如，[这里](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html)没有提到。如果它是新功能还是错误修复（或新错误？），这是值得商榷的，请参阅一些[相关信息和讨论](http://bugs.sun.com/view_bug.do?bug_id=6526446)。共识似乎指向原始规范中的[模棱两可](http://mail.openjdk.java.net/pipermail/compiler-dev/2010-September/002330.html)，这导致 Java 5/6 上的实现稍微不正确/不一致，该实现在 7 中得到修复，因为它对于 JSR 292（动态类型语言）的实现至关重要。

Java 自动装箱现在有更多的陷阱和惊喜。例如

```
Object obj = new Integer(1234);
long x = (long)obj; 
```

将编译，但`ClassCastException`在运行时失败（带有 ）。相反，这将起作用：

`long x = (long)(int)obj;`

# android - Android 2.x、3.x 上的 Phonegap/Android 本地存储问题

> ID：16119641
> 
> 赞同：1
> 
> 时间：2013-04-20T11:10:34.337
> 
> 标签：android, cordova, local-storage

我在 Android 2.x 和 3.x 上遇到了本地存储问题。

当应用程序第一次启动时，应用程序会从远程 Web 服务中获取一些数据，然后将这些数据存储在本地存储中。

问题是，每当获取新数据然后尝试更新本地存储项时，它们的值永远不会改变并且与第一次保持相同。这意味着只有当我卸载应用程序并重新安装时，我的应用程序才能获取更新的数据。

换句话说，我的本地存储项目无法更新，它们始终保持其第一个值。

这不会发生在 Adnroid 4.x 和我的桌面 Chrome 上。

我希望我的问题很清楚，感谢您的帮助。

谢谢

# android - 带有按钮的 Android ListView 不可选择（可点击）

> ID：16119643
> 
> 赞同：8
> 
> 时间：2013-04-20T11:10:40.567
> 
> 标签：android, listview, xml-layout

我遇到了一个奇怪的问题，当我删除 Button 行时，我在我的 ListView 中添加了一个 Custom 行是可选的，但是当我添加 Button 时我无法单击该行，请参阅下面的 xml。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="77dp"
    android:layout_height="77dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="18dp"
    android:src="@drawable/company_logo" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Idds  sdsad "
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toRightOf="@+id/imageView1"

    android:layout_below="@+id/textView1"
    android:textColor="#8b8989"
    android:layout_marginLeft="5dp"
    android:text="Tap to see detail"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView2"
    android:layout_centerHorizontal="true"
    android:text="Button" /> 
```

请帮助为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-20T11:14:32.997

当您使用自定义行时。

在你的`onclickListener`中设置后，设置它的.`button``getView``focusability false`

即 `button.setFocusable(false)`；

并`android:descendantFocusability="blocksDescendants"`为您的行的布局容器设置。您可以直接设置`android:focusable="false"`，但这会使您的按钮不可点击。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-04-20T11:12:40.310

尝试设置

```
android:focusable="false"
android:focusableInTouchMode="false" 
```

到你`Button`的 xml 中。获得焦点在行上，这`Button`就是为什么你不能选择你的行。

# html - 在具有翻译标题的相同内容页面中是否需要 rel=canonical？

> ID：16119645
> 
> 赞同：1
> 
> 时间：2013-04-20T11:10:59.777
> 
> 标签：html, seo, multilingual, google-search-console, lang

对于每一页，我都有几个版本，每种语言一个。每个都有自己的链接：

```
mydomain.com/page
ja.mydomain.com/page 
```

两者都显示相同的内容，标题被翻译成不同的语言。每页的页眉中也有

```
 <link rel="alternate" hreflang="en" href="http:/mydomain.com/page" />
  <link rel="alternate" hreflang="jp" href="http://ja.mydomain.com/page" /> 
```

我读过在不同语言的页面中不需要 rel=canonical，但是因为我只翻译标题并且仍然有很多重复的内容 (UGC)，我对此很担心。

我应该添加一个 ref=canonical 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:14:34.923

你不应该使用`rel=canonical`，因为这样的属性主要是谷歌的东西，[谷歌说](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)：“rel="canonical" 属性应该只用于指定许多具有相同内容的页面的首选版本（尽管有细微的差异，例如排序订单，没问题）。” 具有不同语言标题的页面差异远不止于此：标题中使用的语言是可理解性的重要组成部分。

# javascript - Javascript停止间隔函数异步

> ID：16119647
> 
> 赞同：-2
> 
> 时间：2013-04-20T11:11:18.517
> 
> 标签：javascript, asynchronous

我的网页上有以下脚本：

```
tid = setInterval(checkBounty, 1000);

function checkBounty(){
    var elapsed = (Date.now()/1000) - parseInt($(".bounty").data('created')) ;
    $(".remaining-time").html(valid - elapsed); //update remaining time until bounty expires
    if (elapsed> valid){
        $.POST('', {id: id}, function(){
           console.log ('bounty cancelled');
           clearInterval(tid);
         });

        //do an ajax post to cancel the bounty;
    }
} 
```

这会多次触发 ajax 发布，因为它是异步执行的。我怎样才能避免这种情况？

编辑

我用我正在使用的代码更新了问题，忘记添加 clearInterval。我现在意识到这是 ajax 在不到一秒的时间内没有响应，并且再次调用了该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:12:41.887

它与异步无关。

`setTimeout`如果您只希望它执行一次，您应该使用而不是 setInterval

**编辑**重新阅读问题后，我认为您想要的是这个（如前所述）：

```
var intervalid = setInterval(checkBounty, 1000);   // capture the id of the interval

function checkBounty(){
    var elapsed = (Date.now()/1000) - parseInt($(".bounty").data('created')) ;
    $(".remaining-time").html(valid - elapsed); //update remaining time until bounty expires
    if (elapsed> valid){
        clearInterval(intervalid);    // this stops the timer
        //do an ajax post to cancel the bounty;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:15:26.343

它会多次触发 AJAX 调用，因为您不再需要它时不会停止间隔。它将继续倒计时并每次进行 AJAX 调用，因为条件将继续为真。

启动它时获取他间隔的句柄：

```
var bountyInterval = setInterval(checkBounty, 1000); 
```

然后当你想停止它时（在 AJAX 调用之前），使用`clearInterval`方法：

```
clearInterval(bountyInterval); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T11:27:02.500

清除间隔以销毁计时器

```
var timer = setInterval(checkBounty, 1000);

function checkBounty(){
  var elapsed = (Date.now()/1000) - $(".bounty").data('created') ;
  $(".remaining-time").html(valid - elapsed); //update remaining time until bounty expires
  if (elapsed> valid){
    clearInterval(timer);
    //do an ajax post to cancel the bounty;
  }
} 
```

# jquery - jquery插件将值发送到回调函数

> ID：16119648
> 
> 赞同：1
> 
> 时间：2013-04-20T11:11:39.190
> 
> 标签：jquery, jquery-plugins

我有一个 jquery 插件
假设显示警报
html 页面为

```
<html>
<head>
<script src='jquery.js'></script>
<script src='myPlugin.js'></script>
<script>
 $().ready(function(){
   $(".txt").my-plugin({},function(e){
        alert(e.a +" "+ e.b);
    });
 });
</script>
</head>
<body>
   <input type='text' class='txt' />
   <input type='text' class='txt' />
   <input type='text' class='txt' />
</body>
</html> 
```

我的插件如下

```
;(function ($) {
$.fn.myPlugin = function (options,callback) {       
  var defaultVal = {
  vars:'values'
  };
  var obj = $.extend(defaultVal, options);//overwrite default values if there
  return this.each(function(){
    //my other code
  $(this).click(function(){

    //my code

      var a="some value";
      var b="more values";
      if (typeof callback == 'function') 
      {
          callback.call($(this));//how can I send var a,b here
      }
   });
   })
   };   
 })(jQuery); 
```

Q1：如何从插件发送值以在回调函数中访问？
我必须发送属性值

Q2：如何在Options中放置回调函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:31:59.457

它应该是

```
$(".txt").alamStar({},function(e){
    alert(e.a +" "+ e.b);
}); 
```

因为函数名是`alamStar`...

这里有些调整

```
$(function(){
   $(".txt").alamStar({
      callback: function(e){
        alert(e.a +" "+ e.b);
      }
   });
 });

;(function ($) {
$.fn.alamStar = function (options) {       
  var defaultVal = {
    vars: 'values',
    callback: null
   };

 var defaultVal = $.extend(defaultVal, options);//overwrite default values if there

 return this.each(function(){
  //my other code
  $(this).click(function(){

 //my code

  var a="some value";
  var b="more values";

  if (typeof defaultVal.callback == 'function') 
      defaultVal.callback({a:a, b:b});//how can I send var a,b here

  });
 })
};   
})(jQuery); 
```

# java - 为什么 Eclipse 构建路径中需要 oracle 驱动程序？

> ID：16119650
> 
> 赞同：0
> 
> 时间：2013-04-20T11:11:49.393
> 
> 标签：java, eclipse, oracle, jdbc, buildpath

我是 JDBC 新手，刚刚在 Eclipse 中编写了我的第一个程序。我使用 Oracle 11g XE 作为数据库。我已`ojdbc6.jar`通过将其复制到 jdk 安装的 lib 文件夹中来添加到我的类路径中。这是我的代码：

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

public class Test {

/**
 * @param args
 */

String url = "jdbc:oracle:thin:@Voldemort:1521:XE";
String username = "surender";
String password = "oracle";
Statement stmt;
String query;

public static void main(String[] args) {
    // TODO Auto-generated method stub
    new Test().work();

}

void work() {
    try {
        Connection conn = DriverManager.getConnection(url, username, password);
        stmt = conn.createStatement();
        query = "SELECT * FROM employees";
        ResultSet rset = stmt.executeQuery(query);
        while(rset.next()) {
            System.out.println(rset.getInt(1) + " " + rset.getString(2) + " " + rset.getString(3) + " " + rset.getString(4));
        }
    }
    catch(SQLException se) {
        System.out.println("Exception!!");
        se.printStackTrace();
    }
} 
```

}

现在由于某种原因，它在 Eclipse 中不起作用，当我通过命令提示符在 IDE 外部运行它时（我在 Windows 7 上）。但是，当我在 Eclipse 中将其添加`ojdbc6.jar`到项目构建路径时，它在 Eclipse 中运行良好，但正如预期的那样，在提示符下仍然无法正常工作。

我在网上看了一些教程，他们都提到需要将驱动程序文件添加到类路径中，但没有别的。（我`ojdbc6.jar`一时兴起添加到构建路径中，有点像亲吻和告诉：p）。

现在，这是为什么呢？

构建路径中需要添加哪些资源？

如果我想在 IDE 之外运行我的项目怎么办？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:20:49.853

**经验法则**>> 每个依赖 jar 文件都需要添加到类路径中。**即：** JDBC 驱动程序或任何其他依赖的 jar。

在 Eclipse 中，您只能在将 ojdbc6.jar 添加到您的 Eclipse 项目类路径后运行您的项目，因为我们的经验法则是这样说的。

现在，如果你想从命令行运行你的项目，同样的规则也适用。为此，您需要在运行 java 程序时指定所有依赖的 jar 文件。

**IE：** `java -classpath ojdbc6.jar . package.classname`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:17:46.603

为了能够使用 JDBC 驱动程序（或任何其他 Java 库），它需要位于类路径中。当从 Eclipse 中执行应用程序时，Eclipse 构建路径用作类路径。

要在 IDE 之外运行它，您需要确保在运行它时指定类路径。这可以使用以下方法完成：

```
java -cp yourlib.jar;ojdbc6.jar name.of.your.MainClass 
```

（这假设 yourlib.jar 和 ojdbc6.jar 都在当前工作目录中，在 linux 上使用`:`而不是`;`）

或者，如果您使用的是可执行 jar，则需要确保 ojdbc6.jar 包含在`MANIFEST.MF`entry`Class-Path`中，例如：

```
Class-Path: ojdbc6.jar 
```

现在您可以将可执行 jar 运行为：

```
java -jar yourlib.jar 
```

（假设所有其他事情 - 就像`MainClass`在`MANIFEST.MF`设置正确）

# mysql - 选择具有多个条目的字段

> ID：16119651
> 
> 赞同：0
> 
> 时间：2013-04-20T11:12:22.123
> 
> 标签：mysql, sql

我不明白如何编写一个简单的 sql 语句，它只显示那些出现多次的条目。

前任

```
NodeID  Number

0       12
1       12
2       12
0       13
1       13
0       14
1       15
2       16
1       17 
```

选择`nodeID`，`number`从表中出现多次不同的数字`nodeID`

结果：

```
NodeID  Number
0       12
1       12
2       12
0       13
1       13 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:14:57.797

```
SELECT  a.*
FROM    TableName a
        INNER JOIN
        (
            SELECT  Number
            FROM    TableName
            GROUP   BY Number
            HAVING  COUNT(*) > 1
        ) b ON a.Number = b.Number 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/bca06/2)

另一种方法是使用`EXISTS`

```
SELECT  a.*
FROM    TableName a
WHERE   EXISTS
        (
            SELECT  1
            FROM    TableName b
            WHERE   a.Number = b.Number
            GROUP   BY Number
            HAVING  COUNT(*) > 1
        ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/bca06/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:17:33.263

尝试这个

```
SELECT NodeID , Number FROM TableName WHERE Number IN
(SELECT Number FROM TableName  GROUP BY Number HAVING  COUNT(*) > 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:20:23.483

我的第一个想法是像下面这样进行自我加入，但它不起作用，因为分组发生在之后。

> SELECT T1.NodeId, T2.Number, COUNT(T2.Number) C FROM Table T1 INNER JOIN Table T2 USING(Number) WHERE C > 1 GROUP BY T2.Number

因此，您必须先进行分组选择，然后进行连接：

```
SELECT NodeId, Number
FROM Table T1
INNER JOIN (
     SELECT Number, COUNT(Number) C
     FROM Table
    WHERE C > 1
    GROUP BY Number
) T2 USING(Number) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-20T11:18:45.847

您也可以`EXISTS`不使用`GROUP BY`：

```
SELECT nodeid, 
       number 
FROM   Table1 t1 
WHERE  EXISTS(SELECT 1 
              FROM   Table1 t2 
              WHERE  t1.number = t2.number 
                     AND t1.nodeid <> t2.nodeid) 
```

[**演示**](http://www.sqlfiddle.com/#!2/5edee/8/0)

# facebook-graph-api - Facebook 登录和 grunt 服务器

> ID：16119656
> 
> 赞同：1
> 
> 时间：2013-04-20T11:12:57.013
> 
> 标签：facebook-graph-api, angularjs, gruntjs

我想测试我的网络应用程序的 facebook 登录，

现在我的 Facebook 应用程序中的站点 URL 是这样的：`http://localhost:8080/#/SignIn`

我正在使用 grunt（grunt 服务器）来执行我的应用程序，当我尝试访问 FB 登录时，我收到此错误：

```
Given URL is not permitted by the application configuration.: One or more of the given URLs is not allowed by the App's settings.  It must match the Website URL or Canvas URL, or the domain must be a subdomain of one of the App's domains. 
```

我是否需要设置 Apache 服务器以在本地访问 Facebook Connect？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:29:35.753

grunt 服务器应该没问题（我使用它没有问题）

在您的 facebook 应用程序的“基本”设置中，它会询问您一个 URL（在我的情况下是 Canvas URL）。在该 URL 中，您需要拥有`http://localhost:8080`. 当您准备好部署时，您可以将 URL 更改为您的真实主机。

# javascript - 无法在谷歌地图上显示多边形

> ID：16119658
> 
> 赞同：0
> 
> 时间：2013-04-20T11:13:06.780
> 
> 标签：javascript, jquery, google-maps-api-3

我尝试使用 Chrome 和 JSLint 调试此代码 4 天，但没有任何希望。我的代码应该在谷歌地图上显示 2 个区域，由它们分隔`RegionID`

我的 HTML

```
<body>
    <div id="map_canvas" style="width: 100%; height: 100%;"></div>            

<script type="text/javascript"
    src="https://maps.googleapis.com/maps/api/js?sensor=false&region=vi&language=vi">
</script>
<script type="text/javascript" src="jquery-1.9.1.min.js"></script>
<script type="text/javascript">
    var map;

    function initialize() {
        var mapOptions = {
            center: new google.maps.LatLng(10.79, 826.694),
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);
    }
</script>

<script type="text/javascript">
    $(document).ready(function () {        
        initialize();
        var model =  [{"ID":946,"Latitude":10.7654200827348,"Longitude":106.681716282384,"RegionID":80},{"ID":947,"Latitude":10.7563117596896,"Longitude":106.685397072824,"RegionID":80},{"ID":948,"Latitude":10.7537788369752,"Longitude":106.68713674361,"RegionID":80},
{"ID":1271,"Latitude":10.8577143149377,"Longitude":106.657884916756,"RegionID":82},{"ID":1272,"Latitude":10.8576257110992,"Longitude":106.657710314914,"RegionID":82},{"ID":1273,"Latitude":10.8575762617472,"Longitude":106.657500586099,"RegionID":82},{"ID":1274,"Latitude":10.8575794962578,"Longitude":106.657309632748,"RegionID":82},{"ID":1275,"Latitude":10.8576187762307,"Longitude":106.65709567219,"RegionID":82}]      
        polygon(model);        
    });
</script> 
```

这是我的`polygon`功能

```
// Take an array of objects that have lat and lon attribute
function polygon(polygonCoords) {    
    // Initialize    
    // First dimension
    var id = polygonCoords[0].RegionID;
    var long;
    var lat;
    var region = new Array();
    for (var i = 0; i < polygonCoords.length; i++) {
        if ((id != polygonCoords[i].RegionID) || (i == polygonCoords.length - 1)) {
            // Draw polygon
            // Set path to a polygon along with polygon's option                

            var regionPolygon = new google.maps.Polygon({
                paths: region,
                fillColor: "#0000A0",                
                editable: false,                
            });

            // Set to map
            regionPolygon.setMap(map);

            // Reset stuffs
            region.length = 0;
            id = polygonCoords[i].RegionID;
        }
        long = polygonCoords[i].Longitude;
        lat = polygonCoords[i].Latitude;
        region.push(new google.maps.LatLng(lat, long));
    }
} 
```

我收到的只是一张没有任何多边形的谷歌地图。我尝试删除 for 循环并按一个变量推送到`region`数组，它再次工作。这很荒谬，但这是我在 4 天后发现的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:14:43.693

我不能告诉你那里发生了什么，但是当我更换它时它对我有用

```
region.length=0; 
```

和

```
region=[]; 
```

# xcode - XCode 无法运行 AppCode 项目

> ID：16119663
> 
> 赞同：2
> 
> 时间：2013-04-20T11:13:32.357
> 
> 标签：xcode, build, compilation, project, appcode

我正在使用 AppCode 编写这个项目：[https ://github.com/AndrewShmig/ASASocialServices](https://github.com/AndrewShmig/ASASocialServices)

它在 AppCode 中运行良好，创建了 *.app 文件，模拟器运行正常，但是当我打开并尝试在 Xcode 中运行当前项目时，我得到的只是“构建成功”消息。执行“清理”，从“派生数据”文件夹等中删除所有内容 - 相同的消息。

XCode 版本 4.6 (4H127)

应用代码 2.0.2

可能是什么问题？如何让 XCode 不仅构建我的项目而且运行它？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:32:06.770

重新创建了我的项目，再次添加了 ASASocialServices 头文件并且它工作（在 XCode 和 AppCode 中）。

# sql - 无法附加数据库操作系统错误

> ID：16119666
> 
> 赞同：0
> 
> 时间：2013-04-20T11:13:44.403
> 
> 标签：sql, database

有人知道这个错误是什么吗？我似乎无法附加数据库...无法打开物理文件.......操作系统错误 5：“5（无法检索此错误的文本。原因：15105）”。（MS SQL Server 错误： 5120) 可能是操作系统问题（Windows 不是正版）？还是身份验证？................................................ ..................................................... ..................................................... …………………………………………………………………………………………………………………………………………

![D b](https://i.stack.imgur.com/kRutC.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:47:53.733

MSSQL Management Studio 可能没有访问该文件夹的权限。尝试将它放在 MSSQL 存储主数据库、msdb 和模型数据库的位置。我不记得确切的路径，但它位于“C:\Program Files\Microsoft SQL Server...”中。只需尝试在 Program Files 目录中搜索 master.mdf。

# php - PHP 意外 '('，但没有 '('

> ID：16119668
> 
> 赞同：0
> 
> 时间：2013-04-20T11:13:56.323
> 
> 标签：php

我的 apache 日志文件中出现了许多这样的错误：

```
PHP:  syntax error, unexpected '(' in /etc/php5/apache2/php.ini on line 3 
```

但这些是前 15 行`/etc/php5/apache2/php.ini`：

```
[PHP]

;;;;;;;;;;;;;;;;;;;
; 关于 php.ini ；
;;;;;;;;;;;;;;;;;;;
; PHP的初始化文件，一般叫php.ini，负责
; 配置 PHP 行为的许多方面。

; PHP 尝试从多个位置查找并加载此配置。
; 以下是其搜索顺序的摘要：
; 1\. SAPI 模块具体位置。
; 2\. PHPRC 环境变量。（自 PHP 5.2.0 起）
; 3\. Windows 上的一些预定义注册表项（自 PHP 5.2.0 起）
; 4.当前工作目录（CLI除外）
; 5\. Web 服务器的目录（SAPI 模块），或 PHP 的目录

```

php.ini 的第一个未注释行：

```
engine = On

short_open_tag = Off

asp_tags = Off

precision = 14

y2k_compliance = On 
```

我认为这将是一个缓存问题，但我刚刚禁用了我的 PHP 缓存（它是 APC）

我在整个文件的注释中找不到任何`(`不在注释中的 s。

如果没有，PHP 怎么会认为`(`文件中有 a？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:28:32.557

`;`in`php.ini`表示注释行。消息不计算注释行。所以第 3 行表示顶部评论之后的第 3 行。

编辑 1：确保您正在打开`php.ini`PHP 真正使用的正确文件

编辑 2：使用`phpinfo();`并在结果页面查看`Loaded Configuration File`值。它向您显示`php.ini`当前使用的文件。注意：重启你的apache

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T12:04:53.597

我试着模仿你的情况：

```
~]$ php --ini
Configuration File (php.ini) Path: /etc
Loaded Configuration File:         /etc/php.ini
Scan for additional .ini files in: /etc/php.d
Additional .ini files parsed:      /etc/php.d/curl.ini,
/etc/php.d/fileinfo.ini,
/etc/php.d/json.ini,
/etc/php.d/mbstring.ini,
/etc/php.d/phar.ini,
/etc/php.d/zip.ini 
```

所以我去 /etc/php.ini 并取消注释带有“（”的行之一

```
~]$ vi /etc/php.ini
[PHP]

;;;;;;;;;;;;;;;;;;;
; About php.ini   ;
;;;;;;;;;;;;;;;;;;;
; PHP's initialization file, generally called php.ini, is responsible for
; configuring many of the aspects of PHP's behavior.

; PHP attempts to find and load this configuration from a number of locations.
; The following is a summary of its search order:
; 1\. SAPI module specific location.
; 2\. The PHPRC environment variable. (As of PHP 5.2.0)
; 3\. A number of predefined registry keys on Windows (As of PHP 5.2.0)
; 4\. Current working directory (except CLI)
; 5\. The web server's directory (for SAPI modules), or directory of PHP
 (otherwise in Windows)
; 6\. The directory from the --with-config-file-path compile time option, or the 
```

现在我检查是否有错误通知：

```
~]$ php --ini
PHP:  syntax error, unexpected '(' in /etc/php.ini on line 16
Configuration File (php.ini) Path: /etc
Loaded Configuration File:         /etc/php.ini 
```

是的，还有错误，但它显示了正确的行号，而不是忽略注释行。重新启动 apache 时，我在 apache/error_log 中也收到了相同的错误消息。

```
PHP:  syntax error, unexpected '(' in /etc/php.ini on line 16 
```

php 文件有效，但没有将有关 ini 的错误发送到日志。

那么，你为什么不编辑你的 /etc/php5/apache2/php.ini 呢？只需擦除几行，看看错误消息是否移动到不同的数字。

确保更改后重新启动apache。

# python - python - 在带有tkinter的python中使用空格时，如何摆脱花括号？

> ID：16119671
> 
> 赞同：0
> 
> 时间：2013-04-20T11:14:21.397
> 
> 标签：python, tkinter, whitespace

我正在尝试编写一个打印出时间表的 tkinter 程序。为此，我必须编辑一个文本小部件以将答案显示在屏幕上。所有的总和都紧挨着没有空格，当我在它们之间添加一个空格时，我的空格周围会出现花括号。我怎样才能摆脱那些花括号？

PS这是我的代码：

```
#############
# Times Tables
#############

# Imported Libraries
from tkinter import *

# Functions
def function ():
    whichtable = int(tableentry.get())
    howfar = int(howfarentry.get())
    a = 1
    answer.delete("1.0",END)
    while a <= howfar:
        text = (whichtable, "x", howfar, "=", howfar*whichtable, ", ")
        answer.insert("1.0", text)
        howfar = howfar - 1

# Window
root = Tk ()

# Title Label
title = Label (root, text="Welcome to TimesTables.py", font="Ubuntu")
title.pack ()

# Which Table Label
tablelabel = Label (root, text="Which Times Table would you like to use?")
tablelabel.pack (anchor="w")

# Which Table Entry
tableentry = Entry (root, textvariable=StringVar)
tableentry.pack ()

# How Far Label
howfarlabel = Label (root, text="How far would you like to go in that times table?")
howfarlabel.pack (anchor="w")

# How Far Entry
howfarentry = Entry (root, textvariable=StringVar)
howfarentry.pack ()

# Go Button
go = Button (root, text="Go", bg="green", width="40", command=function)
go.pack ()

# Answer Text
answer = Text (root, bg="cyan", height="3", width="32", font="Ubuntu")
answer.pack ()

# Loop
root.mainloop () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:55:54.667

要将每个方程放在自己的行上，您可能希望将整个表构建为一个字符串：

```
table = ',\n'.join(['{w} x {h} = {a}'.format(w=whichtable, h=h, a=whichtable*h)
                   for h in range(howfar,0,-1)])
answer.insert("1.0", table) 
```

* * *

此外，如果您将`fill`和`expand`参数添加到`answer.pack`，您将能够看到更多的表格：

```
answer.pack(fill="y", expand=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:51:45.543

在第 15 行，用于[`.format()`](http://docs.python.org/2/library/stdtypes.html#str.format)格式化您的文本：

```
'{} x {} = {},'.format(whichtable, howfar, howfar * whichtable) 
```

根据文档：

> 这种字符串格式化方法是 Python 3 中的新标准，应该优先于新代码中字符串格式化操作中描述的 % 格式化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:43:51.750

在第 15 行，您将“text”设置为混合整数和字符串的元组。小部件需要一个字符串，而 Python 奇怪地转换了它。更改该行以自己构建字符串：

```
text = " ".join((str(whichtable), "x", str(howfar), "=", str(howfar*whichtable), ", ")) 
```

# arrays - Rails：收集数组中的值

> ID：16119673
> 
> 赞同：1
> 
> 时间：2013-04-20T11:14:54.660
> 
> 标签：arrays, ruby-on-rails-3, foreach

我是红宝石新手。我有一个循环，我想在其中创建一个数组：

```
@line_items.each do |i|
    if @line_items[0].product.user.email == i.product.user.email
        @foodio = i.product.user.email
    else
        @foodio[i] = i.product.user.email
    end
end 
```

在上面的代码中，我正在检查 line_items 是否是不同的用户。

在第一部分，如果所有 line_items 有相同的用户，电子邮件将是@foodio。但如果用户不同，@foodio[] 将存储所有用户的电子邮件。

这个怎么做？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:27:15.407

```
 @foodio =  @line_items.map{ |ln| ln.product.try(:user).try(:email) }.compact.uniq 
```

遍历项目并选择用户邮件。删除零可能性的紧凑方法（没有产品的用户或没有电子邮件的用户）。最后，删除重复项的 uniq 方法。

在此选项中，@foodio 始终是一个数组

如果您的模型中存在验证，只需：

```
@foodio =  @line_items.map{ |ln| ln.product.user.email }.uniq 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T12:59:04.520

有多种方法可以做到这一点，但最容易分解为几个步骤。

首先，您可以使用以下方法将 line_items 数组转换为电子邮件字符串数组`map`：

```
emails = @line_items.map { |item| item.product.user.email } 
```

（这假设产品或用户没有 nil 值）。

您可能在此列表中有重复项，因此您可以使用以下`uniq`方法进行重复数据删除：

```
emails = emails.uniq 
```

要不就

```
emails.uniq! 
```

然后，您可以应用所有电子邮件相同的逻辑（因为在这种情况下，列表将只包含一项）：

```
@foodio = emails.count == 1 ? emails[0] : emails 
```

请参阅[http://ruby-doc.org/core-2.0/Array.html](http://ruby-doc.org/core-2.0/Array.html)

# ruby-on-rails - Validate_presence_of 测试在不应该通过的时候通过？

> ID：16119675
> 
> 赞同：1
> 
> 时间：2013-04-20T11:14:58.073
> 
> 标签：ruby-on-rails, rspec, shoulda

我刚开始使用 RSpec 和 Shoulda-matchers，我认为这里出了点问题。

在我的模型中，我有一个成员 displayname，它是这样验证的。

```
validates :displayname, :presence => false #just for this test. 
```

在我的规范中，我写了这个

```
it { should validate_presence_of(:displayname) } 
```

然而它正在过去。除非我切换到不应该，否则不应该失败吗？

编辑：它似乎只是表现得像我说的那样来验证存在，无论我说的是真还是假。我将其更改为 should_not 并开始失败，除非我完全删除了存在检查。验证存在的行为是否只是不使用您传递的任何布尔值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T19:42:44.387

是的你是对的。您可以在验证中将任何随机值传递给**:presence**键。这意味着**即使您添加以下任何内容，也会进行存在验证。**

1.  验证 :name, :presence => false
2.  验证 :name, :presence => true
3.  验证 :name, :presence => 'random'
4.  验证 :name, :presence => nil

（也许上述验证方法更具可读性的版本**validates_presence_of :attr_name**不会引起任何此类混淆）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T20:22:02.550

shoulda-matchers 中的`validates_presence_of`匹配器不会对字段进行验证以查看其是否具有值。它仅验证模型是否验证了其上声明的属性的存在。如果您担心验证是否真的有效，则需要更多测试。

这就是当您将断言从 更改为 时测试开始失败的`should`原因`should_not`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:20:25.407

我猜你的测试数据库没有反映实际的模式。确保每次运行更改数据库的迁移时都更新了测试数据库。

`rake db:test:prepare`

此外，如果您正在运行 spork，请确保已将其停止并重新启动以重新加载所有内容。

# php - 如何改进这些 if/else 块？

> ID：16119679
> 
> 赞同：-4
> 
> 时间：2013-04-20T11:15:09.513
> 
> 标签：php, algorithm, logic

我认为我的代码逻辑有错误，因为有两个连续的 elseif 块具有几乎相同的代码：

```
//first elseif
elseif (!$socialUser && empty($siteUserId)) {
        //first time user
        $secretWord = $this->RandomString->getRand(7);
        $data = array('User'=> array(
                  'username' => $this->userData['username'],
                  'password' => $this->Auth->password($secretWord),
                  'email' => $this->userData['email'],
                  'name' => $this->userData['name']               
              ));
        $siteUserId = $this->_addSiteUser($data);
        if ($siteUserId){
          $data = array('SocialUser' => array(
            'title' => 'facebook',
            'identifier' => $this->FB_userId,
            'user_id' => $siteUserId
        ));
          if ($this->_addSocialUser($data)){
            $this->Auth->login($siteUserId);
            $l = $this->Session->read('Auth.redirect');
        if (empty($l)) $l = array('controller' => 'qurans', 'action' => 'index');       
        $this->controller->Session->setFlash(__('You are logined using Facebook Sucessfully!'.$this->userData['name'], true).' '.$secretWord, 'done_msg');
        $this->Session->delete('Auth.redirect');        
        $this->controller->redirect($l);
          }
          else{
            $this->controller->Session->setFlash(__('There is an error during adding you as a social member. Contact admin!',true), 'error_msg');
         // $this->controller->redirect($this->Auth->loginAction);
          $this->logout();
          $this->controller->redirect(array('controller' => 'qurans', 'action' => 'index'));

          }
        }

    }
//second elseif
    elseif($socialUser && empty($siteUserId)){
      $secretWord = $this->RandomString->getRand(7);
        $data = array('User'=> array(
                  'username' => $this->userData['username'],
                  'password' => $this->Auth->password($secretWord),
                  'email' => $this->userData['email'],
                  'name' => $this->userData['name']               
              ));
        $siteUserId = $this->_addSiteUser($data);
        if ($siteUserId){
//HERE IS ONLY THE DIFFERENCE
          $data = $socialUser;
          $data['SocialUser']['user_id'] = $siteUserId;
//DIFFERENCE END HERE
          if ($this->_addSocialUser($data)){
            $this->Auth->login($siteUserId);
            $l = $this->Session->read('Auth.redirect');
        if (empty($l)) $l = array('controller' => 'qurans', 'action' => 'index');       
        $this->controller->Session->setFlash(__('You are logined using Facebook Sucessfully!'.$this->userData['name'], true).' '.$secretWord, 'done_msg');
        $this->Session->delete('Auth.redirect');        
        $this->controller->redirect($l);
          }
          else{
            $this->controller->Session->setFlash(__('There is an error during adding you as a social member. Contact admin!',true), 'error_msg');
         // $this->controller->redirect($this->Auth->loginAction);
          $this->logout();
          $this->controller->redirect(array('controller' => 'qurans', 'action' => 'index'));

          }
        }

    } 
```

我认为代码工作正常，但我对两个连续 elseif 块之间的复制和粘贴代码块感觉不好？有什么想法可以改进此代码吗？还是很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:18:26.370

嵌套你的`ifs`

```
...
elseif (empty($siteUserId)) {
    // common code
    if ($socialUser) {
        // social-user specific code
    } else {
        // non-social-user specific code
    }
    // more common code
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:20:20.320

您应该创建另一个嵌套`if-else`：

```
elseif (empty($siteUserId)) {
    ...
    if ($socialUser) {
        ...
    } else {
        ...
    }
    ...
} 
```

这样，您可以分离常见的代码`empty($siteUserId)`if`true`并根据 的布尔值区分其余代码`$socialUser`。

# android - Apk 文件已删除。需要再生

> ID：16119685
> 
> 赞同：-5
> 
> 时间：2013-04-20T11:15:57.393
> 
> 标签：android, eclipse, apk

我不小心从我的 Eclipse 项目目录中删除了我的项目 apk 文件，现在我无法运行我的项目。关于如何生成 apk 文件的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:52:04.607

在导航器中右键单击您的项目，转到`Properties -> Android`并取消选中`Is Library`.

您似乎已经将您的项目变成了一个库项目，这很好地阻止了 apk 的制作，并且只给您 JAR。

# php - 有没有办法在启动时将 mongodb 索引加载到 ram 中？

> ID：16119686
> 
> 赞同：2
> 
> 时间：2013-04-20T11:15:59.170
> 
> 标签：php, mongodb, ubuntu

我正在测试 mongo 数据库。我有 3 个集合，其中一个是用户集合，有 1000 万个文档。索引集合后，查询大约需要 0,002 毫秒。无论如何，重新启动框 -ubuntu 12.04 后 - 相同的查询大约需要 200 毫秒。就好像集合上没有索引一样。这是重启盒子后mongodb的正常行为吗？有没有办法在启动时将索引加载到内存中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T22:42:12.690

正常的 MongoDB 行为是将数据和索引分页到应用程序使用的内存中，并将分页内容的决定留给操作系统的内存管理。您的应用程序通常使用的数据和索引称为“工作集”。

已经运行了一段时间的`mongod`服务器应该已经在内存中具有自然工作集，因此除非您了解其影响，否则您不需要（或不想）安排每晚的数据/索引重新加载。

有几种不同的场景可以“预热”服务器以将适当的数据加载到内存中。

### 注意：谨慎使用

通常，这些方法应该只在“冷服务器”（即初始启动时）而不是每晚使用。如果您的数据和索引大于 MongoDB 可用的内存，您很容易最终换出有用的数据或索引（并对性能产生不利影响）。您还可以通过强制将不经常使用的数据或索引加载到 RAM 中来最终使用比必要更多的内存。

### 场景 #1：加载给定集合的所有数据或索引

在 MongoDB 2.2+ 中，您可以使用该[`touch`命令](http://docs.mongodb.org/manual/reference/command/touch/)将集合的所有数据或索引从磁盘加载到内存中。如果您需要使用集合的完整数据或索引，并且有可用内存来存储它们，这会很有帮助。

### 场景#2：根据当前工作集加载一个子集

如果要加载与当前工作集相对应的数据子集，可以运行一些查询来“预热”数据库。Parse 的开发人员开源了一些实用程序，以通过采样和重放当前操作来帮助提供更具体的预热：预热[MongoDB 辅助的技术](http://blog.parse.com/2013/03/07/techniques-for-warming-up-mongodb/)。

### 场景 #3：运行应用程序的常见查询以预加载

您可以为您的应用程序运行一组典型查询，与集合或当前操作样本的“所有”数据/索引相比，这可能会加载更真实的工作集。

# iphone - ios coredata错误找不到源存储的模型

> ID：16119689
> 
> 赞同：0
> 
> 时间：2013-04-20T11:16:08.710
> 
> 标签：iphone, ios, objective-c, core-data

我在数据模型中添加了一些更改，现在我收到了错误消息：

> 找不到源存储的模型

你能解释一下这是什么原因吗？如何解决这个问题呢？为什么我之前的数据模型更改后没有出现？

预先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:33:31.817

迁移到新模型时，您没有使用版本控制。在对模型进行更改之前，您需要创建一个新版本，以便它知道以这种方式跟踪更改。

当我遇到这个问题时，我尝试了许多不同的解决方案（包括将 mom 重命名为 momd，反之亦然），唯一有效的是开始一个新项目。同名，默认核心数据。我先建立了我的模型，然后我复制粘贴了所有的类，等等，然后花了几个小时确保它所有的连接和工作，等等......

然后我学会了使用 git，开始保持版本控制，并开始使用模型版本。现在，如果我遇到致命错误，我会回到 git 上的先前版本，就像什么都没发生一样。

祝你好运

# mysql - 我可以对sql中的不同表使用相同的外键吗

> ID：16119692
> 
> 赞同：0
> 
> 时间：2013-04-20T11:16:24.760
> 
> 标签：mysql, sql, sql-server, oracle

假设我正在为教师制作一个投票系统，并希望将voting_id 作为两个表教师和高级教师的主键，并将voting_id 作为我的新表中两个表的单个外键 投票者我可以制作如果我可以那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:24:42.020

为什么要为教师和高级教师设置单独的表格？看起来很可能这些确实是应该使用`teacher`具有属性的单个表来建模的相同实体`senior_teacher`。然后，您将创建一个`voter`表，其中包含`teacher_id`引用表中`teacher_id`主键的`teacher`列。`teacher`表的主键是`voter_id`而不是是没有意义的`teacher_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:27:16.103

我会以不同的方式建模。老师可以有 N 票（1:N 关系）。所以投票表有teacher_id，可能是成绩和时间戳。我会将教师和高级教师放在同一个表中，并在其中添加一个类型列（高级或普通），因为高级教师只是教师的扩展类型。

Voting_id 不能是主键，因为它标识的是投票而不是老师。你也会有冲突，因为如果教师和高级教师在两个单独的表中，他们可以有相同的主 ID。

# jquery - jquery数据表在第二页不起作用

> ID：16119693
> 
> 赞同：12
> 
> 时间：2013-04-20T11:16:25.627
> 
> 标签：jquery, datatable, datatables

我正在使用 jquery 数据表 1.9.4 和 jquery 1.9.1，我试图在点击事件上执行这样的 ajax 调用。

```
$(".icon-trash").on('click',function () {
                // alert($(this).attr('id'));
                $.post('/WorkOrderRequest/DeleteWOR',
                        { id: $(this).attr('id') },

                        function (returndata) 
                        {

                            if (returndata.ok) 
                            {
                                window.alert(' deleted!');
                                $("#emp" + idemployee).hide('slow');
                            }
                            else {
                                window.alert(' error : ' + returndata.message);
                            }

                    });

            }); 
```

html部分：

```
@foreach (var item in Model)
                    {

                        <tr>
                            <td>
                                @Html.DisplayFor(modelItem => item.ProjectCode)
                            </td>
                            <td>
                                @Html.DisplayFor(modelItem => item.WO_Date)
                            </td>

                            <td>
                             <a  id='@(item.WO_ID)' class="icon-edit" />
                               |                               
                             <a  id='@(item.WO_ID)' class="icon-trash" />
                           </td>
                        </tr>
                    } 
```

它在第一页上工作正常，但从第二页开始没有显示任何结果。请帮忙

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-20T11:43:50.163

分页的工作方式是从 DOM 中删除当前页面不需要的行。因此，当 html 被删除时，您直接绑定到这些元素的任何事件处理程序都会丢失。

您需要使用委托语法`on()`将处理程序绑定到页面中的永久资产。这可能是父表或树上的任何其他父表，包括`document`

```
$('#TableID').on('click','.icon-trash',function () {... 
```

API 参考：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-10T07:22:23.540

如果您只是将点击事件代码放在代码上方`datatable`，`js`它将正常工作。

作为例子。

```
$(".icon-trash").on('click',function () {});

$("#TableID").datatable(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-13T06:08:43.130

我有同样的问题，我在调用其他代码后通过移动下面的代码解决了这个问题。

```
$('#yourTable').dataTable(); 
```

希望它会帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-13T05:20:03.470

```
var table;

$(document).ready(function (){

    table = $('#DataTableId')
        .on('draw.dt', function () {
            yourFunction();
        })

        .DataTable();
});

var yourFunction = function (){

    $('#DataTableId select').off('change')
        .on('change', function () {

        // do whatever

    });

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-02T06:45:32.003

我正在使用 yajra 数据表 + laravel 集合。我花了将近 2-3 个小时来调试它，并找到了如下解决方案。

删除引号字符串表单`pageLength`参数，它将节省您的时间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-21T20:11:16.193

这是一个老问题，但我遇到了同样的问题，并在 js 点击事件解决后调用数据表（通过下面的脚本）。

```
$('#tableId').dataTable();
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-24T16:36:08.763

使用绘图回调。

例子：

```
$('#example').dataTable( {
    "drawCallback": function( settings ) {
        alert( 'DataTables has redrawn the table' );
    }
} ); 
```

[https://datatables.net/reference/option/drawCallback](https://datatables.net/reference/option/drawCallback)

# android - 活动未在 ICS 中启动，应用程序在 Motorola Milestone(2.1) 上完美运行

> ID：16119700
> 
> 赞同：0
> 
> 时间：2013-04-20T11:17:03.990
> 
> 标签：android, performance

我正在制作一个显示已安装应用程序列表的应用程序，并在项目上单击显示权限。此外，它在后台运行并在设备启动时启动。它在 Motorola Milestone（Android 2.1）上完美运行，但在 Sony Xperia(ICS) 上进行测试时，不会单击列表，因此不会显示显示权限的活动。

LogCat 在错误模式下不显示任何内容。

主要活动

```
package com.example.appslist;

import java.util.List;
import com.example.appslist.adapter.ApkAdapter;
import com.example.appslist.app.AppData;
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import com.example.backgroundapp.BackgroundService;

public class ApkListActivity extends Activity implements OnItemClickListener {

    PackageManager packageManager;
    public static boolean isService = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        startService(new Intent(ApkListActivity.this,BackgroundService.class));
        Intent startMain = new Intent(Intent.ACTION_MAIN);
        startMain.addCategory(Intent.CATEGORY_HOME);
        startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        startActivity(startMain);
        isService = true;

        packageManager = getPackageManager();
        List<PackageInfo> packageList = packageManager
                .getInstalledPackages(PackageManager.GET_PERMISSIONS);

        ListView mylistview= (ListView) findViewById(android.R.id.list);
        mylistview.setAdapter(new ApkAdapter(this, packageList, packageManager));
        mylistview.setOnItemClickListener(this);
        }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,
            long row) {
        super.onResume();
        stopService(new Intent(ApkListActivity.this,
                BackgroundService.class));

        PackageInfo packageInfo = (PackageInfo) parent
                .getItemAtPosition(position);
        AppData appData = (AppData) getApplication();
        appData.setPackageInfo(packageInfo);

        Intent appInfo = new Intent(ApkListActivity.this, ApkInfo.class);
        startActivity(appInfo);
    }
} 
```

显现

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.appslist"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

   <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
    android:name=".app.AppData">

        <activity
            android:name="com.example.appslist.ApkListActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".ApkInfo"
            android:label="@string/title_activity_apk_info" >
        </activity>

      <service android:enabled="true" android:name=".BackgroundService" />

      <receiver 
          android:enabled="true" 
          android:name="com.example.appslist.BootUpReceiver"
        >

        <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
``</receiver>

</application>

    </manifest> 
```

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T22:14:24.757

你还有这个问题吗？如果是这样，您是否尝试在其他 Android 4.X+ 设备上运行以查看它是否有效？如果这是 Xperia 特有的问题，请告诉我，我可以帮助进一步深入研究。此外，如果它是 Xperia 特定的，您正在测试哪种设备型号？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:27:34.553

`PackageInfo`实现`Parcelable`为什么不将它作为额外的意图传递给您的活动，而不是扩展类以存储该数据`ApkInfo`的奇怪实现。`Application`

另外，我不明白您在此处启动服务和主要活动，`onCreate`然后单击停止服务：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    startService(new Intent(ApkListActivity.this,BackgroundService.class));
    Intent startMain = new Intent(Intent.ACTION_MAIN);
    startMain.addCategory(Intent.CATEGORY_HOME);
    startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(startMain);
    isService = true;
... 
```

# python-3.x - Python while 循环无法正常运行（初学者）

> ID：16119704
> 
> 赞同：1
> 
> 时间：2013-04-20T11:17:45.897
> 
> 标签：python-3.x

我对 Python 还是很陌生，对我正在开发的程序发生了什么感到困惑。代码如下。问题是代码从不运行任何 if/elif/else 行。它只是不断循环菜单和输入。我正在使用 3.2。

```
# Program to Add, Subtract, Multiply, and Divide

def printmenu():
    print("Calculator v0.01")
    print("[A]dd Two Numbers")
    print("[S]ubtract Two Numbers")
    print("[M]ultiply Two Numbers")
    print("[D]ivide Two Numbers")
    print("[Q]uit the Program")

choice = "x"

while choice.lower != "q":
    printmenu()
    choice = input("What would you like to do? ")
    firstnum = input("What is the first number? ")
    secnum = input("What is the second number? ")
    if choice.lower == "a":
        print("The answer is ",  (firstnum + secnum))
    elif choice.lower == "s":
        print("The answer is ",  (firstnum - secnum))
    elif choice.lower == "m":
        print("The answer is ",  (firstnum * secnum))
    elif choice.lower == "d":
        print("The answer is ",  (firstnum / secnum))
    else:
        print("Choice not recognized.  Try again!") 
```

PS - 这是我在这里的第一篇文章，所以如果我做的不好，请告诉我。

谢谢！

捷通

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:20:52.940

```
>>> "a".lower
<built-in method lower of str object at 0x0000000001EBBBC0>
>>> "a".lower()
'a'
>>> "a".lower == "a"
False
>>> "a".lower() == "a"
True
>>> 
```

我认为您的意思是较低（），而不是较低；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:24:43.600

python 中的所有内置函数都应该使用`()`. 所以使用

```
if choice.lower()!="q": 
```

只有这样才能调用该函数。否则总是返回值`False`，因为没有执行任何函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:25:51.913

1.  替换`lower`为`lower()`
2.  否则使用`float(fisrtnum) + float(secnum)`它只会连接字符并为 '2'+'3' 提供 23

# javascript - 为什么 y 的值会根据 x 而变化？

> ID：16119706
> 
> 赞同：1
> 
> 时间：2013-04-20T11:17:52.693
> 
> 标签：javascript, math

下面是我的代码，为什么 y 的值会改变？
是什么`var y = x | 5;`意思？

**代码**

```
 var x = 0;
      for(x; x < 11 ; x++)
    {
    var y = x | 5;
    console.log("\nx: "+x+ "  y : "+y)
    } 
```

结果是

```
 x: 0  y : 5
    x: 1  y : 5
    x: 2  y : 7
    x: 3  y : 7
    x: 4  y : 5
    x: 5  y : 5
    x: 6  y : 7
    x: 7  y : 7
    x: 8  y : 13
    x: 9  y : 13
    x: 10  y : 15 
```

为什么值的`y`变化基于`x`。
**计算的依据`y`是什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:19:26.787

`|`是按位或运算符！它的工作原理是将操作数转换为二进制，并对每一位进行 OR 操作！

二进制中的 5 是：`101`. 现在，尝试转换另一个操作数，应用该操作，您将看到如何`y`依赖`x`

例如：

```
9    =   1001
5    =   0101
         ____
9|5  =   1101  == 13 
```

* * *

另外，请注意您的 for 循环包含语法错误。删除该`;`行中的最后一个，您就可以开始了。

```
for(; x < 11 ; x++) 
```

此外，您不需要`x`在第一部分，因为它已经声明和初始化

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T11:19:57.710

| 是按位或运算符。它正在执行或运算

这是按位或。由于按位运算仅对整数有意义，因此 0.5 被截断。

```
0 | x is x, for any x. 

   0 1 1 0 = 6  
   1 0 1 0 = 10 
   1 1 1 0 = 14 

9 | 5 = 1101 (which is 13) 
```

[**看这里**](https://stackoverflow.com/questions/6194950/what-does-the-single-pipe-do-in-javascript)

# wix - 组件 testcomp 安装到用户配置文件。它必须使用 HKCU 下的注册表项作为其 KeyPath，而不是文件

> ID：16119708
> 
> 赞同：17
> 
> 时间：2013-04-20T11:17:56.340
> 
> 标签：wix

我想在 WiX 的文档位置下复制一个文件。但它给出了警告：

> 组件 testcomp 安装到用户配置文件。它必须使用 HKCU 下的注册表项作为其 KeyPath，而不是文件。

我的代码：

```
<Directory Id='PersonalFolder' Name='MyDocuments'>
   <Component Id='testcomp' Guid='08C288B6-D8E0-4036-9CEB-E5F616AC6B5C'>
      <File Id='doc_code_file1' Name='doc_code_file1' DiskId='1'
            Source='Personalfolder\Visual Studio 2012\Code Snippets\Visual C#\My Code Snippets\SimpleMvvm\mvvmcommand.snippet' KeyPath='yes'></File>
   </Component>
</Directory> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-20T13:53:02.337

这是正确的。Windows 安装程序希望将注册表项作为每个用户组件的密钥路径。它与配置文件在企业部署中处理广告内容的方式有关。修复非常简单：

```
<Directory Id='PersonalFolder' Name='MyDocuments'>
   <Component Id='testcomp' Guid='08C288B6-D8E0-4036-9CEB-E5F616AC6B5C'>

      <RegistryValue Root='HKCU' Key='Software\Manufacturer\Product'
                     Name='Something (I like to use InstallFolder)'
                     Value='Something (I like to use [INSTALLFOLDER]'
                     Type='string'
                     KeyPath='yes' />

      <File Id='doc_code_file1' Name='doc_code_file1' DiskId='1'
            Source='Personalfolder\Visual Studio 2012\Code Snippets\Visual C#\My Code Snippets\SimpleMvvm\mvvmcommand.snippet' />
   </Component>
</Directory> 
```

注意：添加的每用户注册表项并标记为`KeyPath='yes'`. 后者不是明确必需的，因为它是组件中的第一个资源，默认情况下将被标记为关键路径，但明确使用关键路径有时会更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-07-17T08:48:55.040

如果您选中`Suppress ICE validation`选项，Visual Studio 将忽略这些验证

只需遵循这条路线： `YourProject`-> `Properties`->`Tool Settings`

[![ICE 验证](https://i.stack.imgur.com/hhPTI.pngs=125)](https://i.stack.imgur.com/hhPTI.pngs=125)

# android - 返回 MainActivity 并结束所有正在运行的子活动的按钮

> ID：16119709
> 
> 赞同：0
> 
> 时间：2013-04-20T11:18:02.873
> 
> 标签：android, button, android-intent

我已经阅读了有关关闭当前活动并通过活动堆栈等返回主活动的信息，但不幸的是，我一直收到 NullPointer，因为我需要关闭我的班级 Game 正在创建的子活动。

这是“游戏”类：

```
package pap.crowslanding;

public class Game extends MainActivity implements OnClickListener {
private MazeBall ball;
protected static GameView gameV;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tester1);
    Button settings = (Button) findViewById(R.id.settingsButton);
    Button mainMenu = (Button) findViewById(R.id.backButton);

    ball = (MazeBall) findViewById(R.id.mazeball);
    gameV = (GameView) findViewById(R.id.game_view);

    settings.setOnClickListener(this);
       mainMenu.setOnClickListener(this);

      //Unrequired code removed

    // IF USER PRESSES ON !Main Menu!
    public void onClick(View v) {
        switch (v.getId()){
        case R.id.settingsButton:

        break;
        case R.id.backButton:
            onBackPressed();
        break;
    }
    }

public void onBackPressed() {
    this.finish();//try activityname.finish instead of this
    Intent intent = new Intent(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_HOME);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent);
}
} 
```

我的布局，`R.Layout.tester1`是一个自定义布局，它运行一个 GameView 和 MazeBall 类，你可以在`onCreate`方法中看到，我的 NullPointer 是指试图访问它的`onDraw()`方法的 GameView，因为当我想去我的 MainActivity 时它仍在运行。

长话短说，无论如何要终止这些进程？我不能在标准意义上使用 finish()，因为 GameView 不扩展 Activity。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:41:27.970

我认为您可以将每个启动活动放在一个堆栈中，每次返回主活动时。

这是一个我用来管理我的一个应用程序中的所有活动的类，每次我进入一个活动时，在它的 onCreate 方法中，我调用它的 addActivity() 方法将活动放入堆栈。每次我快速完成一个活动时，在它的 onDestory 方法中，我都会调用 Manager 的 finishActivity 方法来完成堆栈中最新的输入活动。在您的情况下，我认为您可以创建一个方法来弹出并完成所有晚于 MainActivity 进入堆栈的活动，并在每次返回 MainActivity 时调用该方法。

公共类 AppManager {

```
private static Stack<Activity> activityStack;
private static AppManager instance;

private AppManager(){
}

public static AppManager getInstance() {
    if(instance == null)
        instance = new AppManager();
    return instance;
}

public void addActivity(Activity ac) {
    if(activityStack == null)
        activityStack = new Stack<Activity>();
    activityStack.add(ac);
}

public Activity getCurrentActivity(){
    if(activityStack == null)
        return null;
    return activityStack.lastElement();
}

public void finishActivity(Activity ac) {
    if(activityStack != null && ac != null){
        activityStack.remove(ac);
        ac.finish();
        ac = null;
    }
}

public void finishActivity() {
    if(activityStack != null) {
        Activity ac = activityStack.lastElement();
        finishActivity(ac);
    }
}

public void finishActivity(Class<?> cls) {
    if(activityStack == null)
        return;
    for(Activity ac: activityStack){
        if(ac.getClass().equals(cls)){
            finishActivity(ac);
        }
    }
}

public void finishAllActivity(){
    if(activityStack == null)
        return;
    Activity ac;
    for(int i = 0, size = activityStack.size(); i < size; i ++) {
        ac = activityStack.get(i);
        if(ac != null) {
            ac.finish();
        }
    }
    activityStack.clear();
}

public void appExit(Context context) {
    try {
        finishAllActivity();
        System.exit(0);
    } catch (Exception e) {
        Log.e("AppManager", "exit error:" + e.getMessage());
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:28:33.050

如果它的非活动类，您需要活动上下文。将上下文传递给非活动类的构造函数。使用上下文启动活动。

```
context.startActivity(myIntent); 
```

您需要清除活动回栈。

```
 case R.id.backButton:
        onBackPressed();
    break;

public void onBackPressed() {
Intent myIntent = new Intent(MyActivity.this, MainActivity.class)
myIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(myIntent);
finish();
return;
} 
```

# arrays - MIPS 将数据保存在数组中

> ID：16119710
> 
> 赞同：0
> 
> 时间：2013-04-20T11:18:03.853
> 
> 标签：arrays, assembly, mips, memory-alignment, memory-address

**运行程序时出现错误：存储地址未在字边界上对齐，我该怎么办？**

**这是代码：**

```
 .data
welcome: .asciiz "Welcome to Memorization Game. \n\nYour need to enter the numbers printed in the exact sequence. Press S to start.\n"
start:   .asciiz "\nHere we go....\n"
enter:   .asciiz  "\n Please enter the number:\n"
array:   .space 400
    .text

main:       la $t0, array       # load address of array
        la $a0, welcome
        li $v0, 4       #
        syscall         # print welcome message
        li $v0, 12      #
        syscall         # scan to continue 
        bne $v0, 115, Exit  # if $v0 != "s", jump to Exit
        la $a0, start       #
        li $v0, 4       #
        syscall         # Print start message
        li $s0, 0       # N0\. of random generated numbers = 0
        add $t3, $t0, $0    # load address of array into $t3

Random:     slti $t2, $s0, 100  #
        beqz $t2, Exit      #
        addi $a0, $zero, 10 #   
        addi $a1, $zero, 99 #
        li $v0, 42      #
        syscall         # generate a random number
        sw $v0, ($t3)       # put number generated into array[n]
        addi $t3, $t3, 4    # next address
        addi $s0, $s0, 1    # counter++
        j Random

Exit:       li $v0, 10      #
        syscall         # terminate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T12:10:30.967

尝试在之前插入以下内容之一`array: .space 400`：

```
.p2align 2 
```

```
.align 2 
```

```
.align 4 
```

另一种可能的选择是移动`array: .space 400`到数据部分的开头。

# installation - 如何安装 DNN 升级包 07.00.05 - 我在 iHostASP.Net 上托管了 DotNetNuke 社区版 06.00.00 (2982)

> ID：16119717
> 
> 赞同：0
> 
> 时间：2013-04-20T11:19:33.053
> 
> 标签：installation, dotnetnuke, upgrade, administration

我更像是 DNN 最终用户，而不是 DNN 开发人员。

大约 2 年前，当我从 iHostASP.Net 购买我的 DNN 托管包时，6.0 版是社区版的当前版本，iHostASP.net 为我设置了它。直到现在我还没有充分利用该网站，我正计划重新启动我的网站。

我看到 7.00.05 是最新的社区，如果我从 DNN 实例的升级提示进入 DNN 网站，我会被带到[http://www.dotnetnuke.com/Resources/Downloads.aspx](http://www.dotnetnuke.com/Resources/Downloads.aspx)

我所能做的就是下载一个zip文件。

如何安装此升级包？我在 iHostASP.net 上拥有的是一个网站设置，所以我没有完全访问服务器本身的权限。我只能访问我网站的 Helm 控制面板。

我可以访问我的网站，但看不到如何在我的 DNN 实例中上传或安装 zip 文件。

任何指针将不胜感激。有谁知道从 6.0.0 升级到 7.0.05 的任何重大变化？除了默认 DNN 社区版本中开箱即用的模块之外，我没有使用任何外部模块。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:21:18.370

您可能拥有 IHostASP 的 FTP 访问权限，如果是这样，您可以观看此视频以了解如何执行升级

[http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/244/View/Details/Upgrading-A-DotNetNuke-Site-Via-FTP.aspx](http://www.dotnetnuke.com/Resources/Video-Library/Viewer/Video/244/View/Details/Upgrading-A-DotNetNuke-Site-Via-FTP.aspx)

您还应该查看 Wiki [http://www.dotnetnuke.com/Resources/Wiki/Page/Upgrading-DotNetNuke.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Upgrading-DotNetNuke.aspx)

不过，请务必先备份所有内容，如果您不知道如何备份，请询问您的托管服务提供商他们提供哪些备份选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-27T16:53:23.743

[建议的升级路径](http://www.dotnetnuke.com/Resources/Wiki/Page/Suggested_Upgrade_Path.aspx)建议先升级到最新的 DNN 6，再升级到最新的 DNN 7。目前，这意味着先升级到 06.02.07，然后再升级到 07.00.05。

不过，这只是一个建议。如果您遇到升级错误，或者该站点无法按预期运行，我将使用建议的升级路径重试。

[DNN 系统要求](http://www.dotnetnuke.com/Resources/Downloads/System-Requirements.aspx)在版本 6 和 7 之间发生了很大变化。对 Windows 2003 服务器的支持已被删除，但我怀疑 IHostASP.NET 是否已经使用了一段时间。

# java - 将 Hibernate EntityManager 保持在 Runnable 中

> ID：16119723
> 
> 赞同：3
> 
> 时间：2013-04-20T11:20:13.600
> 
> 标签：java, hibernate

我有一个 bean，我在其中创建一个带有 Runnable 的新线程：

```
@Component
public class MyBean {

    private final Task task = new Task();

    @PersistenceContext
    EntityManager em;

    @PostConstruct
    public void init() {
        task.setEntityManager(em);
        new Thread(task).start();
    }

    public static class Task implements Runnable {

        @Setter
        private EntityManager em;

        @Override
        public void run() {
            while (true) {
                // working with EntityManager
                Thing t = em.findById(...); // Fetching a Thing from repo
                t.getSomethingList(); // LazyInit exception
                wait();
            }
        }
    }
} 
```

使用 init 方法，使用 EntityManager 的实例创建新的线程。当我尝试从存储库加载某些内容时，会话会立即关闭，并且获取任何惰性字段都会导致`failed to lazily initialize a collection of role: Something, no session or session was closed`Hibernate 出现异常。

我尝试了所有 @Transactional 注释，但没有任何效果。我需要实现类似 OpenEntityManagerInView 的东西，但不同的是这不在视图之内。

谢谢

编辑1：

1.  根据评论-我尝试使用`em.getTransaction().begin();`，但这让我很兴奋`Not allowed to create transaction on shared EntityManager - use Spring transactions or EJB CMT`。

2.  skirsch 建议我应该在其他一些 bean 上调用 Transactional 方法。这就是我实际所做的 - 完全按照您的建议。我想让事情变得更简单，但我没有意识到其中的区别，所以我直接在课堂上演示了这个问题`Task`。总而言之，我完全像skirsch建议的那样，但问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:50:03.597

由于 Spring 不管理您的`Runnable`，因此对其进行注释不会产生预期的效果。所以你要么需要在你的内部使用一个带注释的（和 Spring 管理的）bean，`Runnable`要么你需要手动处理 txn 管理。

### 使用 Spring 事务管理

你定义了某种服务

```
@Service
public class MyService {
    @PersistenceContext
    EntityManager em;

    @Transactional
    public void doSomething() {
        Thing t = em.findById(...);
        t.getSomethingList();
    }
} 
```

然后你的 bean 看起来像这样：

```
@Component
public class MyBean {

    private final Task task = new Task();

    @Autowired
    MyService service;

    @PostConstruct
    public void init() {
        task.setService(service);
        new Thread(task).start();
    }

    public static class Task implements Runnable {

        @Setter
        private MyService service;

        @Override
        public void run() {
            while (true) {
                service.doSomething();
                wait();
            }
        }
    }
} 
```

### 手动交易管理

如果您设置 JPA 资源本地事务，请执行以下操作：

```
// working with EntityManager
em.getTransaction().begin()
try {
    Thing t = em.findById(...);
    t.getSomethingList();
} finally {
    em.getTransaction().rollback()
}
wait(); 
```

# vb6 - 如果可能，我想以字符串或至少以整数形式发送数据和接收数据

> ID：16119724
> 
> 赞同：0
> 
> 时间：2013-04-20T11:20:15.330
> 
> 标签：vb6, port, mscomm32

1.  我正在尝试通过 mscomm 端口发送和接收数据，但接收到的数据类型不匹配。所以我应该怎么做才能避免这个错误，我需要将数据作为整数发送并尽可能将其作为字符串接收，至少我应该将它作为整数数据类型。以下是我的代码，请帮我解决这个问题。

2.  发送和接收代码在独立运行时工作。

```
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Private Sub Command1_Click()
    If (MSComm1.PortOpen = False) Then
        MSComm1.PortOpen = True
    End If
    Command1.Enabled = False
    Command2.Enabled = True
    Text3.Text = "COM1, Baud - 9600, Databit - 8, Parity - None, Stopbit - 1....CONNECTED." & Text3.Text
End Sub

Private Sub Command2_Click()
    If (MSComm1.PortOpen = True) Then
        MSComm1.PortOpen = False
    End If
    Command1.Enabled = True
    Command2.Enabled = False
    Text3.Text = "DISCONNECTED" & Text3.Text
End Sub

Private Sub Command3_Click()
    Text1.Text = " "
    Text2.Text = " "
    Text3.Text = "CLEARED" & Text3.Text
End Sub

Private Sub Command4_Click()    
    MSComm1.Output = Text2.Text
    Text3.Text = "SENDING" & Text3.Text
End Sub

Private Sub Command5_Click()
    Text3.Text = " "
End Sub

Private Sub Form_Load()
    MSComm1.CommPort = 1
    MSComm1.Settings = "9600,N,8,1"
    MSComm1.DTREnable = True
    MSComm1.Handshaking = comRTS
    MSComm1.InBufferSize = 2
    MSComm1.RThreshold = MSComm1.InBufferSize
    MSComm1.RTSEnable = True
    MSComm1.InputLen = 2
    MSComm1.InputMode = comInputModeText
    MSComm1.NullDiscard = True
    MSComm1.OutBufferSize = 2
    MSComm1.SThreshold = MSComm1.OutBufferSize    
    MSComm1.PortOpen = True  
End Sub

Private Sub Form_Unload(Cancel As Integer)
    If (MSComm1.PortOpen = True) Then
        MSComm1.PortOpen = False
    End If
End Sub

Private Sub MSComm1_OnComm()
    Dim Buffer As String
    Select Case MSComm1.CommEvent
        Case comEvReceive
            'Text1.Text = " "
            Buffer = Cstr(MSComm1.Input)
            Text1.Text = Buffer
    End Select
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T16:51:45.290

我认为主要问题是您在没有任何传输控制尝试的情况下异步发送数据。由于要传输多个字符，因此您需要告诉接收器新传输的开始位置，以使其找到正确的偏移量。

在您的情况下，您说您只想发送 0..100 范围内的值。通过使用 0 到 255 范围内的单个字节值，可以寻址，因此在这种情况下，每个值发送一个字节就足够了，对于单个字符，不需要传输控制。

这是一个将数字转换为单个字节、发送并重新转换为数字的示例：

```
Option Explicit
Private Declare Sub Sleep Lib "kernel32" (ByVal dwMilliseconds As Long)

Private Sub cmdOpen_Click()
    If (MSComm1.PortOpen = False) Then
        MSComm1.PortOpen = True
    End If
    cmdOpen.Enabled = False
    cmdClose.Enabled = True
    txtState.Text = "COM1, Baud - 9600, Databit - 8, Parity - None, Stopbit - 1....CONNECTED." & txtState.Text
End Sub

Private Sub cmdClose_Click()
    If (MSComm1.PortOpen = True) Then
        MSComm1.PortOpen = False
    End If
    cmdOpen.Enabled = True
    cmdClose.Enabled = False
    txtState.Text = "DISCONNECTED" & txtState.Text
End Sub

Private Sub cmdClear_Click()
    txtReceived.Text = " "
    txtSend.Text = " "
    txtState.Text = "CLEARED" & txtState.Text
End Sub

Private Sub cmdSend_Click()
Dim Number As Byte
    'some checking - needed depending on source of data
    If Not IsNumeric(txtSend.Text) Then
        MsgBox "only numbers (from 0 to 255)"
        Exit Sub
    End If
    If Val(txtSend.Text) < 0 Or Val(txtSend.Text) > 255 Then
        MsgBox "out of range (from 0 to 255)"
        Exit Sub
    End If

    Number = CByte(Val(txtSend.Text))
    MSComm1.Output = Chr(Number)
    txtState.Text = "SENDING" & txtState.Text
End Sub

Private Sub cmdClearState_Click()
    txtState.Text = " "
End Sub

Private Sub Form_Load()
    MSComm1.CommPort = 1
    MSComm1.Settings = "9600,N,8,1"
    MSComm1.DTREnable = True
    MSComm1.Handshaking = comNone 'comRTS i only got a 3-wire connection - so no handshaking
    MSComm1.InBufferSize = 1024 'not 2 we don't want a buffer overflow THAT fast
    MSComm1.RThreshold = 1 'Raise OnComm-Event if 1 character is in Rx-buffer
    MSComm1.RTSEnable = True
    MSComm1.InputLen = 1 'get one character at a time
    MSComm1.InputMode = comInputModeText 'the Binary mode never worked out for me - even when transmitting binary data
    MSComm1.NullDiscard = False 'also NULL-Characters will be received
    MSComm1.OutBufferSize = 512 'again we don't want overflow
    MSComm1.SThreshold = 0 'don't hold back data - blow them out directly
    MSComm1.PortOpen = True
End Sub

Private Sub Form_Unload(Cancel As Integer)
    If (MSComm1.PortOpen = True) Then
        MSComm1.PortOpen = False
    End If
End Sub

Private Sub MSComm1_OnComm()
    Dim Buffer As String
    Select Case MSComm1.CommEvent
        Case comEvReceive
            'txtReceived.Text = " "
            Buffer = MSComm1.Input
            txtReceived.Text = Asc(Buffer)
            txtState.Text = "RX" + txtState.Text
    End Select
End Sub 
```

# mysql - 将 Winforms 客户端连接到 linux 服务器上的 mysql

> ID：16119728
> 
> 赞同：0
> 
> 时间：2013-04-20T11:20:26.657
> 
> 标签：mysql, .net, linux, c#-4.0

我开发了一个应该在客户端执行的 .net 4.0 Windows 窗体应用程序（所有客户端桌面都是基于安装了 .net 4 框架的 Windows）。另一方面，服务器是具有 MYSQL 数据库的 Linux 服务器。

我需要知道我需要做什么才能让我的 winforms 应用程序（在客户端桌面上）从服务器上的 MYSQL 数据库收集/写入数据。

我是否需要做一些服务器端编程/脚本才能使 winform 与服务器通信。我是新手，如果听起来“愚蠢”，请原谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:40:55.140

我不 `.net`精通，但大多数 2 或 3 层应用程序的工作方式相同：

在您的应用程序中，您应该有权访问 DB 驱动程序（如[ODBC](http://en.wikipedia.org/wiki/ODBC)），该驱动程序处理与 DB 服务器的连接、向其发送所有查询并接收结果。您所要做的就是指定连接参数：

*   数据库服务器地址
*   数据库服务器端口
*   数据库用户名
*   数据库用户密码

在服务器端，您需要将服务器配置为接受来自客户端的传入连接：

*   设置数据库服务：安装数据库服务器并配置它
*   配置用户和数据库：创建架构、创建用户帐户、填充表
*   设置网络：创建防火墙规则以让 DB 端口对您的客户端连接开放

应该就是这样。由于您可能必须下载 MySQL odbc 连接器，因此我建议您也查阅它的[文档](http://dev.mysql.com/doc/refman/5.0/en/connector-odbc.html)，其中提供了教程和演练。

# html - 如何添加自定义 HTML5 错误消息

> ID：16119729
> 
> 赞同：2
> 
> 时间：2013-04-20T11:20:31.180
> 
> 标签：html, email, input

我正在使用以下 HTML5 代码，

```
 <form action="demo_form.asp">
   E-mail: <input type="email" name="email"><br>
   <input type="submit">
  </form> 
```

当用户使用无效的电子邮件地址提交表单时，用户会收到错误消息“请输入电子邮件地址”。我需要用其他语言展示它。有什么方法可以在**不使用 JavaScript**的情况下更改消息？

![在此处输入图像描述](https://i.stack.imgur.com/me8e2.jpg)

# qt - Qt 文档中的下载和下载管理器示例

> ID：16119736
> 
> 赞同：0
> 
> 时间：2013-04-20T11:21:43.283
> 
> 标签：qt, pyqt, pyside

对于这个例子，来自 Qt 文档， http: [//qt-project.org/doc/qt-4.8/network-download.html](http://qt-project.org/doc/qt-4.8/network-download.html)程序首先将所有数据读取到缓冲区，然后将所有数据从缓冲，对吧？

那么对于这个例子，从 Qt 文档， http: [//qt-project.org/doc/qt-4.8/network-downloadmanager.html](http://qt-project.org/doc/qt-4.8/network-downloadmanager.html)程序一直在读写数据，对吧？

哪种方式更合适？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:06:58.247

我不认为在这种情况下适用“更合适的方法”，它们都有优点和缺点，显然取决于你试图构建的内容。

看你需要什么功能。如果您只需要保存“已完成”的项目并且它们的大小相对较小以便保存在内存中，您可以先获取并保存它们。如果您事先不知道您正在使用哪些项目大小并且想要“继续中断下载”之类的内容，那么您可能应该保存来自网络的内容。

# extjs - 如何从 extjs 中的 json 响应中对值进行分组

> ID：16119737
> 
> 赞同：0
> 
> 时间：2013-04-20T11:21:43.700
> 
> 标签：extjs, extjs4.1, sencha-architect

如何在下面的响应中使用 curMon 值对 curValue、PreVal 的值求和，例如 curMon `jan=23.4567+2045671+2045671`。

```
{
   "responseJSON":{
      "months":9,
      "rows":{
         "rowCount":93,
         "row":[
            {
               curMon:"Jan",
               curVal:23.4567,
               preVal: 33.5677

            },
            {
             curMon:"Feb",
               curVal:423.78482878,
               preVal: 460.57905554 
            },
            {
              curMon:"Jan"
               curVal:2045671,
               preVal:305678

            },
            {
             curMon:"Feb",
               curVal:26789.20,
               preVal: 24567.20   
            },
            {
              curMon:"Jan",
               curVal:2045671,
               preVal:305678
            },
            {
               curMon:"Feb",
               curVal:26789.20,
               preVal: 24567.20   
            },
            {
               curMon:"Mar",
               curVal:26789.20,
               preVal: 24567.20   
            },
            {
               curMon:"Feb"
               curVal:26789.20,
               preVal: 24567.20   
            },
            {
               curMon:"Jan"
               curVal:2045671,
               preVal:305678

            },
            {
               curMon:"Mar",
               curVal:26789.20,
               preVal: 24567.20  
            },
            {
             curMon:"Feb"
               curVal:26789.20,
               preVal: 24567.20     
            },
            {
              curMon:"Jan",
               curVal:2045671,
               preVal:305678 
            },
            {
             curMon:"Mar",
               curVal:26789.20,
               preVal: 24567.20  
            }
         ]
      }
   }
} 
```

# java - 可运行的基本活动

> ID：16119739
> 
> 赞同：0
> 
> 时间：2013-04-20T11:21:44.090
> 
> 标签：java, android, android-activity

**简介：**我做了一个基础活动来扩展我的其他活动。我已经用函数体中的可运行对象覆盖了几个方法，例如：

```
@Override
    protected void onStop(){
        new Handler().postDelayed(new Runnable()
        {
            @Override
            public void run()
            {
                BaseActivity.super.onStop();
            }
        }, Fade.fadeDuration);
    } 
```

但是，当我尝试运行该应用程序时，我得到了 SuperNotCalledException。如果我将 super.onStop() 从可运行对象中取出，我不会有任何异常。

**问题：**如何从基础活动中的可运行对象调用 super.onStop 而不会导致 SuperNotCalledException？

**附加信息：**我正在尝试添加仅淡出某些视图的淡出动画。这大约需要 700 毫秒，所以我也需要将 onStop 延迟 700 毫秒。问题是在每个活动中编写代码都很麻烦。我想做一个基础活动，这样我就不必担心每一项活动都会褪色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:43:56.923

如果您试图简单地延迟执行，`super.onStop`我会使用`CountDownLatch`.

也许是这样的：

```
private void CountDownLatch latch;
private void long latchWait = 10L; // seconds 
private void TimeUnit latchWaitUnit = SECONDS;

@Override
protected void onStop(){
   try{
       this.latch.await(this.latchWait, this.latchWaitUnit);
   catch(InterruptedException e){
       // Handle
   }finally{
       super.onStop();
   }
}

public void startLatch(long wait){
    this.latch = new CountDownLatch(1);
    this.latchWait = wait;
}

public void releaseLatch(){
   this.latch.countDown()
} 
```

*我没有测试这段代码。*

# android - 从android中的广播接收器开始活动

> ID：16119741
> 
> 赞同：0
> 
> 时间：2013-04-20T11:21:49.313
> 
> 标签：android, android-intent, android-activity, broadcastreceiver

在我的应用程序中，我从广播接收器开始活动。但是在运行代码之后它首先显示活动。如果条件为真，我想要它 -

-

```
 wwhile ((line = bufferedReader.readLine()) != null) {
         System.out.println("Reading line...");
         flag=false;
         if(line.contains("cmp=com.android.gallery")){
            flag=true;
            break;      
         }
      }

      if(flag==true){

          Intent ii = new Intent(context,PasswordWindow.class);
            ii.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(ii);
      } 
```

清单文件-

```
 <activity android:name="com.example.app.PasswordWindow"></activity>
    <receiver android:name="com.example.app.Broadcast">
        <intent-filter >

            <action android:name="android.intent.action.BOOT_COMPLETED"></action>
            <action android:name="android.intent.action.USER_PRESENT"/>
        </intent-filter>
    </receiver> 
```

# plugins - Gradle 插件解析工件

> ID：16119743
> 
> 赞同：1
> 
> 时间：2013-04-20T11:21:58.190
> 
> 标签：plugins, gradle, dependency-management

Gradle 插件是否可以自行解析工件？我知道在 Maven 中，插件可以注入 Aether [RepositorySystem](http://sonatype.github.io/sonatype-aether/apidocs/org/sonatype/aether/RepositorySystem.html)并使用它来下载工件（这就是[Appengine Maven 插件](https://code.google.com/p/appengine-maven-plugin/)下载 Appengine SDK 的方式）。Gradle 中是否有类似的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:07:50.463

我不知道您到底想要实现什么，但是在使用插件将工件添加到项目时，您可以做两件事：

*   只需使用插件将您希望解析的依赖项添加到项目的配置之一，然后让 Gradle 为您解析它
*   添加自定义配置并对已解析的工件执行任何您需要执行的操作，就像 gradle gae 插件在[此处](https://github.com/bmuschko/gradle-gae-plugin/blob/master/src/main/groovy/org/gradle/api/plugins/gae/GaePlugin.groovy#L86)和[此处下载 gae sdk 一样](https://github.com/bmuschko/gradle-gae-plugin/blob/master/src/main/groovy/org/gradle/api/plugins/gae/GaePlugin.groovy#L161)

# java - 来自 AppEngine 内部的 NullPointer

> ID：16119744
> 
> 赞同：4
> 
> 时间：2013-04-20T11:22:02.983
> 
> 标签：java, google-app-engine

在过去的几天里，我的日志中出现了这个错误，它不是来自我自己的任何书面课程。其他 AppEngine 用户也一样吗？我做错了什么？

```
/_ah/spi/BackendService.logMessages
java.lang.NullPointerException

at com.google.api.server.spi.SystemService.findServiceMethod(SystemService.java:232)
at com.google.api.server.spi.SystemService.resolveService(SystemService.java:209)
at com.google.api.server.spi.SystemServiceServlet.execute(SystemServiceServlet.java:132)
at com.google.api.server.spi.SystemServiceServlet.doPost(SystemServiceServlet.java:106)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
at com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:125)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.JdbcMySqlConnectionCleanupFilter.doFilter(JdbcMySqlConnectionCleanupFilter.java:57)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:266)
at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
at org.mortbay.jetty.Server.handle(Server.java:326)
at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
at com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable(RpcRequestParser.java:76)
at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:146)
at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:438)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:480)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:487)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:774)
at com.google.tracing.TraceContext$DoInTraceContext.runInContext(TraceContext.java:751)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:342)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:334)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:484)
at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
at java.lang.Thread.run(Thread.java:679) 
```

# python - python flask mail.send 错误检查并记录

> ID：16119746
> 
> 赞同：2
> 
> 时间：2013-04-20T11:22:41.670
> 
> 标签：python, email, flask

我有带有邮件代码部分的 Flask 应用程序，例如

```
 if app.config['MAIL']:
      mail.send(message)
    else:
      print message.html 
```

有时由于邮件服务器问题，mail.send() 函数会失败。您如何检查错误状态并记录相同的内容？

怎么做

```
 if app.config['MAIL']:
        retcode=mail.send(message)
      else:
        print message.html
      # now log it
      if (retcode != 0):
         #log it or take anyother action. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T12:20:28.507

尝试捕获异常：

```
if app.config['MAIL']:
    try:
        mail.send(message)
    except SMTPException, e:
        current_app.logger.error(e.message)
else:
    print message.html 
```

您可以根据以下内容找到更多例外`SMTPException`：http: [//docs.python.org/2/library/smtplib.html#smtplib.SMTPException](http://docs.python.org/2/library/smtplib.html#smtplib.SMTPException)。

如果你真的需要返回码，你可以这样做：

```
retcode = 0
if app.config['MAIL']:
    try:
        mail.send(message)
    except SMTPAuthenticationError, e:
        retcode = 2
    except SMTPServerDisconnected, e:
        retcode = 3
    except SMTPException, e:
        retcode = 1
else:
    print message.html

if retcode:
    current_app.logger.error(retcode) 
```

# overlay - 是否可以使用带有自定义叠加层的 Google Fusion Tables？

> ID：16119748
> 
> 赞同：0
> 
> 时间：2013-04-20T11:22:58.810
> 
> 标签：overlay, google-fusion-tables

这是我想要实现的目标：

我需要使用这样的自定义叠加层[https://developers.google.com/maps/documentation/javascript/examples/overlay-simple](https://developers.google.com/maps/documentation/javascript/examples/overlay-simple)

作为从 Google Fusion Table 加载的一组点的背景，如下所示

[https://developers.google.com/maps/documentation/javascript/examples/layer-fusiontables-simple](https://developers.google.com/maps/documentation/javascript/examples/layer-fusiontables-simple)

另外，如果您可以确认这一点：我读到您可以通过在 Fusion 表中添加指向图标的链接来为显示的每个点配置自定义图标。有人厌倦了这个吗？

我已经搜索了上述示例，但找不到一个示例

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:46:24.433

您不能在 FusionTablesLayer 上显示自定义图标（[它只显示一组定义的标记](https://www.google.com/fusiontables/data?docid=1BDnT5U1Spyaes0Nj3DXciJKa_tuu7CzNRXWdVA#map%3aid=3)），您可以使用 FusionTable 中的数据创建原生 Google Maps API v3 自定义图标，但是您会失去 FusionTablesLayer 平铺渲染的性能优势（这将如果你有很多标记，这将是一个问题）。

[文档中的示例](https://developers.google.com/fusiontables/docs/samples/custom_markers)

[2 个 Google 示例的组合](http://www.geocodezip.com/v3_GoogleEx_layer-fusiontables-simple_wOverlay.html)

# asp.net-mvc-4 - 动态添加行到表中并没有获得 Dojo 风格

> ID：16119750
> 
> 赞同：0
> 
> 时间：2013-04-20T11:23:22.923
> 
> 标签：asp.net-mvc-4, dojo

我正在使用 Dojo 在 ASP.Net MVC4 中工作。当我向 html 表添加新行时，我遇到了一个奇怪的问题。我需要一个支持添加和删除行的表格，里面的文本框应该有 dojo 样式。我提到了这篇文章[http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)广告试图创造同样的东西。让我解释一下我的代码。下面是我的看法

```
@section scripts {
    <script type="text/javascript">
        require(["dojo/parser", "dijit/form/TextBox", "dijit/form/Button"]);
    </script>
}
 <table id="servicesTable">
            <tr>
                <th>
                    <label id="lblSelectService">
                        Select</label>
                </th>
                <th>
                    <label id="lblServiceName">
                        Name</label>
                </th>
                <th>
                    <label id="lblTitle">
                        AE Title</label>
                </th>

            </tr>
            @for (int i = 0; i < Model.Services.Count; i++)
            {
                @Html.Partial("_ServiceRow", Model.Services[i])
            }
        </table> 
```

我渲染每一行的部分视图如下

```
@model WebUI.Models.RemDevServiceViewModel
    <tr>
        <td>
            @Html.CheckBoxFor(x => x.IsMarked,
                     new { id = @String.Format("Service[{0}]IsMarked", @Model.ID) })
        </td>
        <td>
            <input style="width: 100px; id="Service[@Model.ID]Name"
        name="Service[@Model.ID].Name" type="text"
                     data-dojo-type="dijit/form/TextBox" value="@Model.Name"/>
        </td>
        <td>
            <input style="width: 100px;" id="Service[@Model.ID]Title" 
                        data-dojo-type="dijit/form/TextBox"
                        name="Service[@Model.ID].Title" type="text" 
value="@Model.Title" />
        </td>
    </tr> 
```

我有一个添加按钮，它将向表中添加新行。我面临的问题是，新行没有获得 dojo 样式，它们被呈现为普通文本框。最初加载的行呈现为 dojo 样式的文本框，但新添加的不是这样。我添加新行的 jquery 函数如下所示

```
function addNewService() {
    $.ajax({
        url: rootPath + "MyController/AddNewService",
        type: "get",
        cache: false,
        success: function (html) {

            $("#servicesTable tbody").append(html);
        },
        error: function (ts) {
            alert("Error while adding services");
        }
    });
} 
```

谁能告诉我如何解决这个问题？请注意，我知道 Dojo 网格的存在。我想利用模型绑定，因此遵循这种风格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:36:42.393

尝试在添加的节点上运行[解析器。](http://dojotoolkit.org/reference-guide/1.8/dojo/parser.html)您是否也在页面上认真加载 jquery？无论如何，使用您拥有的代码，选择刚刚添加的节点有点棘手，但是如果您将以下内容放在成功方法中，它可能会起作用。

```
var newNodes = $(html).appendTo("#servicesTable tbody");
require(["dojo/parser"], function(parser){
    newNodes.forEach(function(node){
        parser.parse(node);
    });
}); 
```

如果你解析已经解析过的节点，解析器会抛出一个错误。此外，如果您需要支持较旧的浏览器，您需要将 forEach 替换为标准的 for 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:48:44.483

非常感谢大卫的回复。您的代码不能完全正常工作，但我明白了，下面的代码对我有用。请不要觉得我在回答我自己的问题。我想正确格式化代码并因此使用此视图。再次非常感谢

```
success: function (html) {
        var newNodes = $(html).appendTo("#servicesTable tbody");
        require(["dojo/_base/array", "dojo/parser"], function (array, parser) {
            array.forEach(newNodes, function (node, i) {
             parser.parse(node);
            });
        }); 
```

# jquery - 如何在 Ace 代码编辑器中创建悬停错误消息

> ID：16119751
> 
> 赞同：9
> 
> 时间：2013-04-20T11:23:26.620
> 
> 标签：jquery, html, css, ace-editor

我正在使用 Ace 编辑器在网站上显示代码。我希望能够突出显示代码范围并在它们悬停时显示错误消息，如图所示。

![我想完成什么](https://i.stack.imgur.com/fHc9X.png)

我不确定这是否可以使用 Ace 编辑器 API 来完成，或者我是否需要使用 jQuery 的魔力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:19:50.597

还没有准备好为此使用 api。

可以像 ace 中的[token_tooltip 一样](https://github.com/ajaxorg/ace/blob/master/demo/kitchen-sink/token_tooltip.js)添加工具提示，但需要一些修改，以添加箭头并且不随鼠标移动。

# asp.net - Asp.net Sql 使用选择案例插入行

> ID：16119753
> 
> 赞同：0
> 
> 时间：2013-04-20T11:23:52.403
> 
> 标签：asp.net, sql, sql-server-2008

我正在设计一个允许用户使用信息更新数据库的网站。我遇到的问题是我创建了在页面加载时隐藏的各种控件，但用户可以单击取消隐藏以添加其他信息。

我遇到的问题是编写 sql 语句来处理识别使用的控件。我有一个视图状态计数，让我知道哪些面板可见或不可见。

```
ViewState("count") = CInt(ViewState("count")) + 1
    Label1.Text = ViewState("count").ToString() 
```

然后后面的代码编写我的 SQL 查询看起来像这样

```
 Protected Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    Dim myConn As SqlConnection
    Dim cmd As SqlCommand
    Dim sqlstring As String
    Dim dd As String
    Dim mm As String
    Dim yy As String

    dd = Left(TextBox1.Text, 2)
    mm = Mid(TextBox1.Text, 4, 2)
    yy = Right(TextBox1.Text, 4)

    myConn = New SqlConnection("xxx")

    myConn.Open()

    Select Case Label1.Text
        Case Is = "0"
            sqlstring = "INSERT INTO Transactions (Date, Account, Payee, Chq_Num, Reference, GST_Rate, Amount, Document_Number, Bank_Account) VALUES ('" & yy & "-" & mm & "-" & dd & "','" & DropDownList3.SelectedValue & "','" & TextBox3.Text & "','" & TextBox5.Text & "','" & TextBox4.Text & "'," & DropDownList2.SelectedValue & "," & TextBox6.Text & "," & TextBox27.Text & ",'" & DropDownList1.SelectedValue & "')"
        Case Is = "1"
            sqlstring = "INSERT INTO Transactions (Date, Account, Payee, Chq_Num, Reference, GST_Rate, Amount, Document_Number, Bank_Account) VALUES ('" & yy & "-" & mm & "-" & dd & "','" & DropDownList3.SelectedValue & "','" & TextBox3.Text & "','" & TextBox5.Text & "','" & TextBox4.Text & "'," & DropDownList2.SelectedValue & "," & TextBox6.Text & "," & TextBox27.Text & ",'" & DropDownList1.SelectedValue & "') VALUES ('" & yy & "-" & mm & "-" & dd & "','" & DropDownList4.SelectedValue & "','" & TextBox7.Text & "','" & TextBox9.Text & "','" & TextBox8.Text & "'," & DropDownList5.SelectedValue & "," & TextBox10.Text & "," & TextBox27.Text & ",'" & DropDownList1.SelectedValue & "')"
    End Select

    cmd = New SqlCommand(sqlstring, myConn)
    cmd.ExecuteNonQuery()

    myConn.Close()

    Response.Redirect(Request.RawUrl, True)

End Sub 
```

我的问题在于选择案例，因为当案例为 1 时，它只插入第一个值而不是第二个集合。我最多有 6 个“案例”可供选择，每次都添加一组额外的值。sql服务器是2008

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:28:43.810

从 SQL Server 2008 开始，您可以使用如下所示的多值插入子句

```
INSERT [INTO] tbl [(...columns...)]
VALUES (....),(....),(....); 
```

您已经构建了这样的查询

```
INSERT [INTO] tbl [(...columns...)]
VALUES (....)
VALUES (....)
VALUES (....) 
```

我个人也会*不*使用 SELECT-CASE 块构建字符串连接：

```
If Label1.Text >= "0" Then
        sqlstring = "('" & yy & "-" & mm & "-" & dd & "','" & DropDownList3.SelectedValue & "','" & TextBox3.Text & "','" & TextBox5.Text & "','" & TextBox4.Text & "'," & DropDownList2.SelectedValue & "," & TextBox6.Text & "," & TextBox27.Text & ",'" & DropDownList1.SelectedValue & "')"
End If
If Label1.Text >= "1" Then
        sqlstring = sqlstring + "," + "('" & yy & "-" & mm & "-" & dd & "','" & DropDownList4.SelectedValue & "','" & TextBox7.Text & "','" & TextBox9.Text & "','" & TextBox8.Text & "'," & DropDownList5.SelectedValue & "," & TextBox10.Text & "," & TextBox27.Text & ",'" & DropDownList1.SelectedValue & "')"
End If
' etc 
```

如果由于某种神秘的原因，多值语句不起作用，您始终可以依赖经过验证的真实多语句批处理，即

```
If Label1.Text >= "0" Then
    sqlstring = "INSERT ... VALUES (...);"
End If
If Label1.Text >= "1" Then
    sqlstring = sqlstring + "INSERT ... VALUES (...);"
End If
If Label1.Text >= "2" Then
    sqlstring = sqlstring + "INSERT ... VALUES (...);"
End If
' etc 
```

请注意批处理中的分号语句终止符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:30:37.797

如上所述，但是在第 6 种情况下，您最终会得到一个非常长的字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:27:11.947

我可能错了，但在第二个语句中，该子句`VALUES`出现了两次。这可能是你问题的根源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T17:34:18.350

问题不是选择案例，而是视图状态没有正确传递给 sql 字符串，我知道可能不是最好的解决方案，而是将 label.text 传递给了一个隐藏的文本框，sql 字符串能够正确读取该文本框。Richard 建议使用串联的 IF 语句而不是 Select Case 是一个好主意！

感谢所有的帮助

# exception - 在 Cassandra 表中插入行，其中 3 个字段作为复合键

> ID：16119755
> 
> 赞同：3
> 
> 时间：2013-04-20T11:24:35.507
> 
> 标签：exception, cassandra, composite, hector

我是 Cassandra 的新手，我需要它来完成一项快速而小型的临时工作。但是，我遇到了一个问题。我有一个使用下面的 CQL 创建的列族：

```
创建表 dummy_file_test
(
 dtPtn INT,
 pxID 整数，
 startTm INT，
 endTm INT,
 patID BIGINT,
 电子文件 BLOB，
 主键（dtPtn，pxID，startTm）
);

```

我编写了以下方法将数据插入表中。

```
public static void insertDataKey(HashMap nameValuePair, String colFamily) {
    try {
        Cluster cluster = HFactory.getOrCreateCluster(clusterName, hostPort);
        Keyspace keyspace = HFactory.createKeyspace(CASSANDRA_DUMMY_KEY_SPACE, cluster);

        Integer dtPtn = (Integer)nameValuePair.get("dtPtn");
        Integer pxID = (Integer)nameValuePair.get("pxID");
        Integer startTm = (Integer)nameValuePair.get("startTm");
        Integer endTm = (Integer)nameValuePair.get("endTm");
        Long patID = (Long)nameValuePair.get("patID");
        byte[] efile = (byte[])nameValuePair.get("efile");

        HColumn<String, Integer> column1 = HFactory.createColumn("dtPtn", dtPtn, new StringSerializer(), IntegerSerializer.get());
        HColumn<String, Integer> column2 = HFactory.createColumn("pxID", pxID, new StringSerializer(), IntegerSerializer.get());
        HColumn<String, Integer> column3 = HFactory.createColumn("startTm", startTm, new StringSerializer(), IntegerSerializer.get());
        HColumn<String, Integer> column4 = HFactory.createColumn("endTm", endTm, new StringSerializer(), IntegerSerializer.get());
        HColumn<String, Long> column5 = HFactory.createColumn("patID", patID, new StringSerializer(), LongSerializer.get());
        HColumn<String, byte[]> column6 = HFactory.createColumn("efile", efile, new StringSerializer(), BytesArraySerializer.get());

        Composite rowKey = new Composite();
        rowKey.addComponent("dtPtn", StringSerializer.get());
        rowKey.addComponent(dtPtn, IntegerSerializer.get());

        rowKey.addComponent("pxID", StringSerializer.get());
        rowKey.addComponent(pxID, IntegerSerializer.get());

        rowKey.addComponent("startTm", StringSerializer.get());
        rowKey.addComponent(startTm, IntegerSerializer.get());

        Mutator<Composite> mutator = HFactory.createMutator(keyspace, CompositeSerializer.get());
        mutator.addInsertion(rowKey, colFamily, column1);
        mutator.addInsertion(rowKey, colFamily, column2);
        mutator.addInsertion(rowKey, colFamily, column3);
        mutator.addInsertion(rowKey, colFamily, column4);
        mutator.addInsertion(rowKey, colFamily, column5);
        mutator.addInsertion(rowKey, colFamily, column6);

        mutator.execute();
    } catch (Exception ex) {
        ex.printStackTrace();
    }
} 
```

但是，当我运行代码时，我得到

> > InvalidRequestException（为什么：预期 4 或 0 字节 int (21)）

我对 Hector API 很困惑，找不到任何我可以完全依赖的完整教程/材料。解决上述问题的任何建议都会有很大帮助。

提前致谢。

ps：我在 Cassandra 1.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T09:00:54.137

如果您在 CQL 中创建模式，您可能最好也通过 CQL 访问您的数据。但是您仍然可以通过 Thrift 界面访问它。

当您指定在 CQL 中使用复合主键时，第一个键是分区键，它成为行键。其他键是列组合的一部分。

因此，对于您的示例，如果您这样做了

```
insert into dummy_file_test (dtPtn, pxID, startTm, endTm, patID, efile) values (1, 2, 3, 4, 5, 0x06); 
```

然后在 cassandra-cli 中列出：

```
[default@ks] list dummy_file_test; 
RowKey: 1
=> (column=2:3:, value=, timestamp=1366620262555000)
=> (column=2:3:efile, value=06, timestamp=1366620262555000)
=> (column=2:3:endtm, value=00000004, timestamp=1366620262555000)
=> (column=2:3:patid, value=0000000000000005, timestamp=1366620262555000) 
```

您会看到行键只是对应于 dtPtn 的整数 1。主键中的其他列已作为列名的前缀。

如果要使用 Hector 插入其中，则需要使用 dtPtn 作为行键，然后使用 pxID:startTm:col_name 的复合列键作为列。

您还可以告诉 Cassandra 使您的分区键成为列的组合。为此，您需要在主键子句中使用额外的括号：

```
CREATE TABLE dummy_file_test
(
 dtPtn          INT,
 pxID           INT,
 startTm        INT,
 endTm          INT,
 patID          BIGINT,
 efile          BLOB,
 PRIMARY KEY((dtPtn, pxID, startTm))
); 
```

现在您的行键是 dtPtn、pxID、startTm 的组合：

```
[default@ks] list dummy_file_test;
RowKey: 1:2:3
=> (column=, value=, timestamp=1366620916952000)
=> (column=efile, value=06, timestamp=1366620916952000)
=> (column=endtm, value=00000004, timestamp=1366620916952000)
=> (column=patid, value=0000000000000005, timestamp=1366620916952000) 
```

请注意，列名不会出现在行键组合中，因此您不需要添加它们。您的代码应该是：

```
Composite rowKey = new Composite();
rowKey.addComponent(dtPtn, IntegerSerializer.get());
rowKey.addComponent(pxID, IntegerSerializer.get());
rowKey.addComponent(startTm, IntegerSerializer.get()); 
```

# eclipse - 从较低的 JRE 访问时，访问库（使用较高的 jdk 编译）会出现异常

> ID：16119759
> 
> 赞同：0
> 
> 时间：2013-04-20T11:24:58.273
> 
> 标签：eclipse, jvm, java

我创建了一个 jar 文件（使用 jdk1.7 编译它）。当我在项目中使用这个 jar 时（使用 JRE 1.6），我得到以下异常 - 不支持的 major.minor 版本 51.0（我想 51.0 是用于 jdk1.7）。我对所有这些操作都使用了 Eclipse IDE。

我想知道这个异常是否是一种规范（在这种情况下）或者它是否只是因为 Eclipse 中的类加载工作方式不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:31:18.243

类加载由 JVM 在 eclipse 内部和外部执行。此错误仅表明 Java 7 中类文件的文件格式发生了变化，Java 6 虚拟机不知道未来的类文件格式。

您可以指示 Java 编译器使用以前的 java 版本的类文件格式（在 eclipse 中，您可以在 Properties -> Java Compiler -> JDK compliance 下找到设置）。

此外，您需要验证您是否只使用 JDK 6 中也存在的 API 元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:33:38.523

这是意料之中的。专门为 java 版本编译的字节码，不能在较低版本上执行。这是因为它可能具有早期 Java 版本不支持的字节码指令和/或特性。

要编译较低的 java 版本，您需要明确指定编译的目标版本，例如：

```
javac -target 1.6 ... 
```

在 Eclipse 中，您可以在“属性”>“Java 编译器”>“生成的 .class 文件兼容性”下进行设置。但是一般来说，最好只使用 Java 6 编译器来确保您实际上只使用 Java 6 中包含的特性和库。

# c++ - 对象的析构函数导致崩溃

> ID：16119762
> 
> 赞同：2
> 
> 时间：2013-04-20T11:25:24.693
> 
> 标签：c++, class, destructor

我是 C++ 的菜鸟。我有一个无论如何我都无法解决的问题。我写了一个代码来理解更好的类和重载运算符：

```
#include <iostream>
#include <stdlib.h>
#include <stdarg.h>
using namespace std;

class vectmy {
public:
    int size;   
int *a;
vectmy(int n,int val);
~vectmy (){delete[] a;   //IF I DELETE THIS PROGRAM WORKS
}
vectmy & operator = (const vectmy &);
};

 vectmy::vectmy(int n,int val){
    size=n;
    a = new int[ n+1 ];
    for (int i=0;i<n;++i){
    *(a+i)=val;
    }
 }

   vectmy& vectmy::operator= (const vectmy& param)
  {
   for (int i=0;i<3;++i)    a[i]=param.a[i];
    return *this;
   }

 vectmy operator+( vectmy left, vectmy right)
  {
  vectmy result = left;
  for (int i=0;i<3;++i) result.a[i]=result.a[i]+right.a[i];

  return result;
   }

int main() {
int b1[3]={1,2,4};
vectmy d(3,2),b(3,4),c(3,0);

c=(b+d);

for (int j=0; j<3; ++j)cout<<c.a[j]<<' '<<endl; 
return 0;
} 
```

当我运行它崩溃。如果我删除它的析构函数。为什么会发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:30:54.667

> 当我运行它崩溃。如果我删除它的析构函数。为什么会发生？

您在此处`operator +`创建*副本*`left`：

```
vectmy result = left; 
```

由于您没有显式定义复制构造函数，编译器将隐式生成一个执行按*成员*复制的构造函数。

数据成员的无意义副本`a`意味着`a`指针最终将指向(和)的两个不同实例的*同一位置，这两个实例***都**将在销毁时指向。`vectmy``result``left`**`delete[]`**

 **这种双重删除会给您的程序带来**未定义的行为**，在您的情况下表现为崩溃。

这就是[**三法则**](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)的要点：*每次您有一个用户定义的复制构造函数、赋值运算符或析构函数时，您可能应该定义**所有**这些*。

原因是您通常定义其中一个功能，因为您正在管理一些资源（在您的情况下是内存），并且您通常希望在复制、破坏或分配管理资源的对象时执行适当的操作。

在这种特殊情况下，缺少正确的复制构造函数。你可以这样定义它：

```
vectmy::vectmy(vectmy const& v)
{
    size=v.size;
    a = new int[size];
    *this = v;
} 
```

另外，我建议您尽可能避免通过原始指针、`new`和`delete`（或它们的数组对应物）进行手动内存管理，并考虑[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)改用。

**更新：**

另请注意，您*通过 value*`operator +`接受其参数，这意味着将*复制*每个参数（即，将调用复制构造函数）。

 **由于此处不需要复制，因此您可能希望通过引用 (to `const`) 获取参数：

```
vectmy operator + ( vectmy const& left, vectmy const& right)
//                         ^^^^^^              ^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:30:06.123

在`operator+`你做的

```
vectmy result = left; 
```

这将调用您没有的默认构造函数*和*复制构造函数。因此将使用编译器变体，它不会为`a`成员分配内存。对于自动生成的复制构造函数，指针将被简单地复制，使两个对象使用相同的指针。当一个人删除它时，另一个指针变得无效。

您应该阅读有关[三的规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C%2B%2B_programming%29)。****

# php - 从 PHP 调用 Python 但 SQLite3 不起作用

> ID：16119764
> 
> 赞同：1
> 
> 时间：2013-04-20T11:25:43.180
> 
> 标签：php, python, sqlite

我有这个 PHP 脚本：

```
<?php
    if($_GET["name"] != null && $_GET["name"] != ""){
        $name = urlencode($_GET["name"]);
        $name = htmlentities($name);
        $title = urlencode($_GET["title"]);
        $title = htmlentities($title);
        $art = urlencode($_GET["art"]);
        $art = htmlentities($art);
        $output = array();
        exec("python add.py $name $title $art",$output);            
    }
?> 
```

这是 add.py 文件：

```
import sys
import sqlite3

name = sys.argv[1]
title = sys.argv[2]
art = sys.argv[3]
tup = (name,title,art)

conn = sqlite3.connect('arts.db')
c = conn.cursor()

c.execute('CREATE TABLE IF NOT EXISTS arts(name,title,art)')
c.execute('INSERT INTO arts VALUES(?,?,?)',tup)

conn.commit()
conn.close() 
```

当文件运行时，我的当前目录中没有 Arts.db 文件。不仅如此，当我通过到处添加打印语句来调试我的程序时，我意识到我的程序一直运行到`conn = sqlite3.connect('arts.db')`然后在语句执行之前退出。

我的程序没有错误，因为我在终端中使用了 python 编辑器（我使用 Ubuntu），然后我可以成功执行这个程序，但是当我从 PHP 脚本执行它时不会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:32:09.493

如果您尝试引用一个现有`arts.db`文件，而该文件在 PHP 脚本运行时不在当前目录中，那么通过完整路径引用该文件可能是最简单的方法，即更改行...

```
conn = sqlite3.connect('arts.db') 
```

......像......

```
conn = sqlite3.connect('/the/full/path/to/arts.db') 
```

如果您正在尝试创建一个新`arts.db`的 ，则很有可能当 PHP 脚本运行时，webserver 进程没有在当前目录中创建文件的权限。

不授予 PHP 写入包含 PHP 脚本的目录的权限可能更安全，因此在其他地方创建一个目录来存储文件，为其授予适当的权限，并在脚本中使用该目录的完整路径。

**更新**

> 我发现我没有写权限，因此我使用另一个程序创建了一个数据库并在其中创建了一个表，但仍然要向其中插入值我需要权限，你能告诉我该怎么做吗？

问题是 PHP 脚本生成的任何进程都将继承父进程的权限，并且具有相同的限制。

在最新版本的 Ubuntu 上，该`/var/tmp`目录始终可以由任何用户写入，因此您可以将其放在...

```
conn = sqlite3.connect('/var/tmp/arts.db') 
```

...或者您可以通过修改权限将其放在其他任何位置，...

```
$ sudo chgrp www-data /the/full/path/to/directory
$ sudo chmod g+ws /the/full/path/to/directory 
```

当然，这意味着使用单独的 Python 脚本没有多大意义，因此您不妨全部使用 PHP。

# jquery - jQuery 验证错误消息扰乱了我的表单。(jquery.validate.js)

> ID：16119766
> 
> 赞同：2
> 
> 时间：2013-04-20T11:25:51.450
> 
> 标签：jquery, css, jquery-validate

每当出现 jquery 验证错误消息时。它占据了一些空间并将其他领域推低。我希望在可用空间中调整错误消息，并且不应该干扰其他字段或任何其他元素。以下是我使用的 jquery 验证代码。

```
$(document).ready(function(){ 

jQuery("#frmQuickAdd").validate({
        errorElement:'div',
        rules: {
            t_style: {
                required: true
            }
        },

        messages: {
            t_style: {
                    required: "Please select therapy style"
            }
       } 
    });

}); 
```

我在errorElement：''中尝试了div，label，span，仍然有相同的问题和错误div，默认情况下采用类'error'。知道我应该写什么 CSS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:54:19.700

基本解决方案是使这些错误消息绝对定位。

1.  在`ul.ulsignup li`添加`margin-bottom: 0;`和`padding-bottom: 10px;`
2.  在`ul.ulsignup li .text`添加`position: relative;`
3.  在`div.error`（或`div div .error`）添加`position: absolute; bottom: -15px; font-size: 10px;`

# java - 无法访问 java.util.Collections$UnmodifiableSet 类型的属性

> ID：16119767
> 
> 赞同：-1
> 
> 时间：2013-04-20T11:25:51.363
> 
> 标签：java, jsf-2

我正在迭代具有实例变量statisticsCurrency 的EquityStatisticsSet 类型的unmodifiableSet。在迭代时我收到以下错误属性'statisticsCurrency' not found on type java.util.Collections$UnmodifiableSet。

**我哪里错了？请帮助我。**

*以下是 xhtml 和 java 文件。*

.xhtml 文件：

```
<p:dataTable id="equityStatisticsTable"
             value="#{commonStockController.equityStatistics}"
             var="equityStatistics">

  <p:column headerText="#{res.business_equity_statistics_statisticsCurrency_Label}">
    <gs:textInput
     inputName="business_equity_statistics_statisticsCurrency"
     inputValue="#{equityStatistics.statisticsCurrency}" />
   </p:column> 
```

爪哇代码：

```
 public Set<GSEquityStatistics> getEquityStatistics(){
      return new HashSet<GSEquityStatistics>(commonStock.getAllStatistics());
     }

 public Set<GSEquityStatistics> getAllStatistics() {
      return Collections.unmodifiableSet(equityStatisticsSet);
    } 
```

例外：

```
javax.servlet.ServletException: /content/business/security/commonStock.xhtml @166,64 
inputValue="#{equityStatistics.statisticsCurrency}": Property 'statisticsCurrency' not found on type java.util.Collections$UnmodifiableSet
 javax.faces.webapp.FacesServlet.service(FacesServlet.java:606)
 org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147)
 org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T21:38:19.290

[在即将到来的 JSF 2.2 之前](http://jdevelopment.nl/jsf-22/#479)，`UIData`组件不支持`Set`接口。它们仅支持例如`DataModel`, `List`, `Object[]`,`ResultSet`等。根据 JSF 2.2，`Collection`将添加 ，这不仅包括`List`，还包括`Set`.

您当前最好的选择是借助新的 EL 2.2 调用任意方法的能力将 转换`Set`为数组：[`Set#toArray()`](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html#toArray%28%29)

```
<p:dataTable ... value="#{commonStockController.equityStatistics.toArray()}"> 
```

**但是**，这相当昂贵，因为`toArray()`基本上每次迭代都会调用 。在幕后，`toArray()`迭代整个`Set`并创建一个数组。没有“支持数组”。这最终以 O(n^2) 复杂性而不是 O(1) 中的数组或`ArrayList`. 如果您确实无法事先将其转换为数组或`List`模型中（而不是在 getter 中！），那么您最好使用`<c:set>`一次评估它并将其存储在请求范围中。

```
<c:set var="equityStatistics" value="#{commonStockController.equityStatistics.toArray()}" scope="request" />
<p:dataTable ... value="#{equityStatistics}"> 
```

# c++ - 可以安全共享指针数据的多线程库？

> ID：16119771
> 
> 赞同：1
> 
> 时间：2013-04-20T11:26:04.277
> 
> 标签：c++, c, windows, multithreading

基本上我想要实现的是在不同线程之间共享一个动态分配的状态标志数组，以控制线程之间的交互。

是否有任何库可以在 Windows 操作系统中完美实现这一目标？

我尝试了 Open MP，它给了我各种奇怪的错误和很多令人头疼的问题，即使使用 omp flush all 有时数据仍然不是最新的，当访问频率很高时，易失性指针也没有帮助，所以程序变得非常不稳定和不一致。

是否有任何库可以更好地处理共享和频繁更新和访问的数据数组（动态）？TBB可以处理这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:35:16.293

同一个进程的线程共享同一个堆，所以在这个堆上分配的内存可以在这些线程之间共享。

所有程序需要确保保护这种“共享”内存免受并发访问。

后者可以通过使用锁来实现，比如互斥锁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T12:09:57.883

常见的解决方案是使用互斥锁。基本思想是用临界区包装对共享变量的任何访问，即。互斥锁：

```
 WaitForSingleObject(mutexHandle);
 // shared data access & modification
ReleaseMutex(mutexHandle); 
```

*   [创建互斥体](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682411%28v=vs.85%29.aspx)
*   [等待单个对象](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687032%28v=vs.85%29.aspx)
*   [教程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686927%28v=vs.85%29.aspx)

如果您可以访问 C++11，请尝试使用`std::atomic<T>` 类型，它可以让您共享具有原子访问语义的原始类型。

*   [标准::原子](http://en.cppreference.com/w/cpp/atomic/atomic)

# string - 用于查找具有所有查询词的最小子字符串的有效数据结构

> ID：16119775
> 
> 赞同：2
> 
> 时间：2013-04-20T11:26:36.103
> 
> 标签：string, algorithm, data-structures, processing-efficiency

我的朋友在一次采访中遇到了这个问题。我们得到一个包含一些句子的文件。句子只有 0-9, az, AZ 和句号(.) ，我们需要读取文件并以查询更快的方式存储。这个阶段所花费的时间不是问题。这里查询将包含一些单词，我们需要返回包含所有这些单词的最小子字符串。顺序并不重要。（注意：假设整个文件可以放在主存中）

例如，如果文件是：“Ram 正在攻读计算机科学学位。Ram 家里有电脑。Ram 现在在家。”

查询 1："Ram computer a" 输出："Ram has a computer" 查询 2："Ram home" 响应："home.Ram"

我想将文件存储为一个链接列表，其中每个节点都由一个单词组成。如果是最后一个单词，则单词+句号存储在节点中。在查询时，我们需要遍历 LL 并找到包含所有单词的最小字符串。

我们如何进一步优化它？我们可以以更好的方式存储文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T13:42:46.817

您可以将文件以[Suffix array](http://en.wikipedia.org/wiki/Suffix_array)的形式存储。它可以在 O(N) 时间内构建，其中 N 是文件的长度。每个查询词可以在 O(M + log N) 时间内通过二分查找找到，其中 M 是查询词的长度。如本文所示：[Mohamed Ibrahim Abouelhodaa、Stefan Kurtzb、Enno Ohlebusch 的“用增强的后缀数组替换后缀树”](http://www.sciencedirect.com/science/article/pii/S1570866703000650)，我们可以将其改进为 O(M)。

由于预处理阶段所花费的时间不是问题，因此您可以使用[Trie](http://en.wikipedia.org/wiki/Trie)代替后缀数组。只需将输入文件的每个单词添加到 trie 中，并将文件中该单词的位置添加到该单词的位置列表中（每个 trie 节点都需要一个这样的列表）。

在后缀数组或trie中找到所有查询词的位置后，您必须对它们进行排序（仅针对后缀数组，因为它们在trie的情况下已经排序），然后找到一组最接近的位置其他：

1.  将所有查询词的最小位置添加到优先队列（可以实现为最小堆），
2.  虽然此优先级队列中顶部单词的尚未处理位置列表不为空，但将顶部队列条目替换为同一单词的下一个位置。每次从优先级队列中添加/删除某个条目时，将相应单词末尾的位置添加/删除到某个有序集合（如二叉搜索树）。该集合中的最大条目与优先级队列中的最小条目之间的差异允许确定具有所有查询词的最小子串。

# c# - MEF：[导入] 空引用

> ID：16119776
> 
> 赞同：1
> 
> 时间：2013-04-20T11:26:40.217
> 
> 标签：c#, .net, mef, caliburn.micro

我在我的一个项目中将 Caliburn.Micro 与 MEF 一起使用。我可以在根视图模型中获得导入。但是如果我想将导入到其他一些类中，它就行不通了。例如：

```
[Export]
public class A
{
    [Import]
    static ILogger logger;

    public static void SomeMethod()
    {
        logger.Log("foobar");
    }
} 
```

和...

```
[Export(typeof(ILogger))]
public class FileLogger : ILogger
{
    public void Log()
    {
        //some implementations
    }
} 
```

当我运行应用程序时，logger 永远不会被设置或只是等于 null。

奇怪的是，如果我按如下方式将导入添加到根视图模型并在那里设置断点，它会以某种方式工作：

```
[Import]
public ILogger logger {get; set;} 
```

但是，当我按 F5 继续时，对于 A 类，logger 原来为 null。我想知道为什么 logger 的值设置为 null 以及在哪个位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:07:03.127

您需要使用`CompositionContainer`来组合或满足对象的导入。

```
A a = new A();
compositionContainer.ComposeParts(a); 
```

否则，您可以使用其中一种`CompositionContainer.GetExportXXXX`方法。这样，MEF 将为您创建和组合对象。

# javascript - javascript Jquery validation

> ID：16119778
> 
> 赞同：0
> 
> 时间：2013-04-20T11:27:08.077
> 
> 标签：javascript, jquery

I have a input field

```
<input type="text" name ="something" id ="something"/> 
```

I have written this one in my edit profile page .SO initially the field value is None(string) .

I want when user should not enter any thing except digits in the field

I have written the code below for that .

```
$(document).ready(function() {
 $("#something").keydown(function(event) {
  // Allow: backspace, delete, tab, escape, and enter
  if ( event.keyCode == 46 || event.keyCode == 8 || event.keyCode == 9 || event.keyCode == 27 || event.keyCode == 13 ||
  // Allow: Ctrl+A
   (event.keyCode == 65 && event.ctrlKey === true) ||
  // Allow: home, end, left, right
   (event.keyCode >= 35 && event.keyCode <= 39)) {
  // let it happen, don't do anything
  return;
  }
  else {
   // Ensure that it is a number and stop the keypress
   if (event.shiftKey || (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105 )) {
     event.preventDefault();
    }
   }
  });
}); 
```

But problem is when user will submit without altering the value of this box which is None bydefault. My program stopped working.

Please help me out.

How can I prevent user to not submit the form if the input box value is None or anything which is not digits.

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:31:11.050

```
$(document).ready(function() {

$.validator.addMethod("requiredField", function(value, element) {
    if(value == '')
        return false;       
    return true;
}, "Number is required");
});

 <input type="text" name ="somthing" is ="somthing"   class="requiredField"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:35:22.160

You might set `onfocus="this.value=''"` on the input field, to remove the default value on focus.

To prevent to submit none digits you could check before the submit eg with:

```
function checkBeforeSubmit(){
    var val = fieldname.value;
    var reg = val.replace(/^[0-9]+$/,"");
    if( check !== '' ){ 
            alert('only numerical!');
            return false;
    }
    return true;
}

<form onsubmit="return checkBeforeSubmit()">..</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:36:35.890

```
function validNumber(elem){
    var regex = /^[+-]?\d+(\.\d+)?([eE][+-]?\d+)?$/;
    var value = elem.val();
    return regex.test(value);
}

$("#form-id").submit(function() {
    if(validNumber($('#something'))){
        return true; // form is submitted
    }else{
        // add any error message code here
        return false; // form is stopped from being submitted
    }
}); 
```

# javascript - 如何在 JavaScript 中使用 URL

> ID：16119783
> 
> 赞同：1
> 
> 时间：2013-04-20T11:27:34.423
> 
> 标签：javascript

例如我有网址：
[http ://www.website.com/example?something=abc&a=b](http://www.website.com/example?something=abc&a=b)

我怎样才能得到东西的内容，“abc”和a的内容作为字符串？

提前致谢， Mateiaru

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:33:41.667

```
var path = window.location.href;
var index = path.indexOf('?');
var paramstr = path.substring(index + 1);
var paramstrs = paramstr.split('&');
paramstrs.forEach(function(str, index){
    var parts = str.split('=');
    alert('value of ' + parts[0] + ' is ' + parts[1])
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:33:01.350

使用函数助手：

```
function getURLParameter(name) {
  return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
} 
```

然后这样称呼它：

```
var aValue = getURLParameter(a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T11:35:17.223

```
//var url = window.location.href;
var url = "http://www.website.com/example?something=abc&a=b";
var attributes = url.split("?")[1].split("&");
var keyValue = {};
for(i in attributes)
{
    var pair = attributes[i].split("=");
    keyValue[pair[0]] = pair[1];
}

alert(keyValue["something"]);
alert(keyValue["a"]); 
```

# javascript - 使用 JavaScript 进行安全电子表格评估。可能吗？

> ID：16119786
> 
> 赞同：0
> 
> 时间：2013-04-20T11:27:54.487
> 
> 标签：javascript, json, security, eval, spreadsheet

我正在考虑使用 JSON 和 JavaScript 创建电子表格。这实际上是一个关于 JavaScript 的理论问题。

在某些情况下，当您可以使用单个函数生成一整列时，它会更有用。就像在这个例子中一样：

```
{
    "type": "jsheet",
    "version": "1",
    "author": "John Doe",
    "title": "Example Spreadsheet",
    "groups":
    [
        {
            "name": "Document Information",
            "columns":
            [
                {
                    "name": "Title",
                    "rows": [
                        "_.title"
                    ]
                },
                {
                    "name": "Author",
                    "rows": [
                        "_.author"
                    ]
                }
            ]
        }
        {
            "name": "Numbers 1-10",
            "columns":
            [
                {
                    "name": "Even numbers",
                    "rows": "_.range(1,10).evens()"
                },
                {
                    "name": "Odd numbers",
                    "rows": "_.range(1,10).odds()"
                }
            ]
        }
    ]
} 
```

当您仅使用来自受信任来源且仅在您的计算机上的代码时，这似乎完全没问题。但是想想像 Google Drive 这样的云服务。如果用户粘贴不安全的代码或打开不安全的电子表格，他们可能会遇到危险。例如，脚本可以操作 DOM，甚至可以访问 cookie、执行请求等等。有没有办法在不实现自定义 JavaScript 解析器的情况下安全地防止这种情况发生？

编辑肯尼斯的回答：当然我不打算用来`eval()`解析文档本身。我只考虑使用`eval()`, 或文档中定义的函数来评估表达式。考虑使用这行脚本指定一整列的可能性：`_.range(1,10).evens()`或`_.range(10,200).filter(isprime)`. Where`_`是一个对象，它具有返回另一个对象的方法，这些对象具有相似的方法。就像 jQuery 和 d3 中的链一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:35:45.247

如果您使用`JSON.parse`，则没有问题。

当然，如果你使用`eval()`那么一切皆有可能。

# php - 添加文本以重写规则

> ID：16119790
> 
> 赞同：0
> 
> 时间：2013-04-20T11:28:31.930
> 
> 标签：php, .htaccess, mod-rewrite

所以我正在创建一个 URL 缩短器，为了让它工作，我必须更改我的 .htaccess 文件以将 URL 从更改`website.com/?id=myidhere`为`website.com/myidhere`. 我已经为数字整理了这个任务，但我不知道如何为字母执行它。到目前为止，这是我的 .htaccess：

```
RewriteEngine On
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /(index\.php)?\?id=([0-9]+)([^\ ]*)
RewriteRule ^ /%3?%4 [L,R=301]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([0-9]+)/?$ /index.php?id=$1 [L,QSA] 
```

所以它重写了数字，但是当我在 url 的 id 中输入文本时，它会显示 404 错误。有人可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:34:01.573

我不确定它是否能解决您的问题，但要支持数字和/或文本，您的正则表达式必须是`[a-zA-Z0-9]+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:32:21.877

尝试这个

```
RewriteRule ^myidhere$ id=myidhere [NC,L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T11:37:37.573

试试这个 .htaccess 代码

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule ^(.*)$ /index.php?id=$1 [L] 
```

现在您可以从

```
website.com/myidhere 
```

# javascript - Jquery Ajax 不适用于 Phonegap

> ID：16119793
> 
> 赞同：4
> 
> 时间：2013-04-20T11:28:37.503
> 
> 标签：javascript, jquery, cordova, jquery-mobile

我是Phonegap的新手。我试图在我的移动应用程序中使用 AJAX 调用，当我调用 url 时，我收到了错误。我正在使用的 url 没有任何结果。当我在浏览器中尝试相同的 URL 时，我得到的是 json 格式的结果。

我在 Ajax 请求标头中关闭连接时收到错误消息。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:41:48.743

检查 res/xml 文件夹中的 config.xml 文件，并将访问源替换为以下代码

```
<access origin="*" /> 
```

如果您启用了以下权限，还请检查 minifest 文件：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# android - 如何在android中为textview设置泰卢固字体？

> ID：16119795
> 
> 赞同：0
> 
> 时间：2013-04-20T11:28:55.177
> 
> 标签：android, textview

```
import android.app.Activity;
import android.graphics.Typeface;
import android.os.Bundle;
import android.widget.TextView;

public class MainActivity extends Activity 
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Typeface tf = Typeface.createFromAsset(getAssets(),"Tikkana.ttf");
        TextView tv = (TextView) findViewById(R.id.CustomFontText);

        tv.setText("ప్రముఖులు అభిప్రాయాలు");
        tv.setTypeface(tf);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:24:15.110

请试一试。

```
public class CustomTextView extends TextView 

{

public CustomTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    init();
}

public CustomTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
    init();
}

public CustomTextView(Context context) {
    super(context);
    init();
}

private void init() {
    Typeface tf = Typeface.createFromAsset(getContext().getAssets(),
            "Helvetica.ttf");
    setTypeface(tf);
}

} 
```

# android - 重定向以通过通知创建活动

> ID：16119796
> 
> 赞同：1
> 
> 时间：2013-04-20T11:28:55.887
> 
> 标签：android, android-activity

我在 Android 中使用通知。当用户单击它们时，我必须打开应用程序并将他重定向到一个特定的活动，如果收到通知的用户没有打开应用程序，它工作正常。（我的意思是，在后台打开），如果他打开了应用程序，当他单击通知时，当我想将他重定向到同一活动时，他将被重定向到“主要”活动。

我想这可能是我的 AndroidManifest.xml 中的一些错误，但是，我不确定，有人能帮我吗？

我的清单：

```
 <application
        android:screenOrientation="portrait"
        android:debuggable="true"
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"

        android:theme="@android:style/Theme.NoTitleBar.Fullscreen">
        <!-- android:theme="@style/AppTheme"  android:theme="@android:style/Theme.NoTitleBar.Fullscreen"  -->
        <activity
            android:name="com.trivialword.activities.MainDisplayActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name="com.trivialword.activities.ResultActivity"
            android:label="@string/title_activity_result" 
            android:theme="@android:style/Theme.Light.NoTitleBar.Fullscreen" >
        </activity> 
```

这是我配置通知的地方

```
Context contexto = context.getApplicationContext();
CharSequence title = "Trivial Invitación";
CharSequence description = "Invitacion a una partida del usuario " + msg;

Intent notIntent = new Intent(contexto,
    GameOnePlayerPrivateOnlineActivity.class);

notIntent.putExtra("opponent", true);
notIntent.putExtra("who-create-game", msg);

PendingIntent contIntent = PendingIntent.getActivity(
    contexto, 0, notIntent, 0);

notif.setLatestEventInfo(
    contexto, title, description, contIntent); 
```

谢谢！。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-20T18:45:32.250

在意图声明中，尝试这样写。 [http://developer.android.com/guide/topics/ui/notifiers/notifications.html](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)

> 创建一个简单的通知：
> 
> // 为应用中的 Activity 创建显式 Intent
> `Intent resultIntent = new Intent(this, ResultActivity.class);`

我想，这就是问题所在。

# javascript - 在选择标签内插入链接？

> ID：16119806
> 
> 赞同：0
> 
> 时间：2013-04-20T11:30:16.983
> 
> 标签：javascript, html

当有人单击选择标签内的选项时，我如何更改页面？

```
<select>
  <option><a href="/1" >1</a></option>
  <option><a href="/2" >2</a></option>
  <option><a href="/3" >3</a></option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:31:50.407

您可以使用`ONCHANGE`java-script 的事件如下

```
<select name="forma" ONCHANGE="location = this.options[this.selectedIndex].value;">
    <option value="Home.php">Home</option>
    <option value="Contact.php">Contact</option>
</select> 
```

在你的情况下

```
<select onchange="location = this.options[this.selectedIndex].value;">
  <option value=="/1" >1</a></option>
  <option value=="/2" >2</a></option>
  <option value="/3" >3</a></option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:31:56.393

使用`onchange`事件：

```
<select onchange="window.location.href=this.options[this.selectedIndex].value"> 
```

# javascript - 添加谷歌地图“未捕获的类型错误：无法读取 null 的属性‘样式’”

> ID：16119807
> 
> 赞同：1
> 
> 时间：2013-04-20T11:30:24.873
> 
> 标签：javascript

我正在尝试使用 asp.net 将 Google 地图添加到我的网页。使用谷歌地图下方给出的代码显示几毫秒然后消失。我检查了控制台中的元素并显示以下消息 - “未捕获的类型错误：无法读取 null 的属性'样式'”。请指导我找到解决此问题的方法。

```
<script  type="text/javascript">
            var directionsDisplay;
            var directionsService = new google.maps.DirectionsService();

            function initialize() {
                directionsDisplay = new google.maps.DirectionsRenderer();
                var mapOptions = {
                    zoom: 7,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    center: new google.maps.LatLng(41.850033, -87.6500523)
                };
                var map = new google.maps.Map(document.getElementById('map-canvas'),
          mapOptions);
                directionsDisplay.setMap(map);
                directionsDisplay.setPanel(document.getElementById('directions-panel'));

                var control = document.getElementById('control');
                control.style.display = 'block';

    Uncaught TypeError: Cannot read property 'style' of null

                map.controls[google.maps.ControlPosition.TOP_CENTER].push(control);
            }

            function calcRoute() {
                var start = document.getElementById('start').value;
                var end = document.getElementById('end').value;
                var request = {
                    origin: start,
                    destination: end,
                    travelMode: google.maps.TravelMode.DRIVING
                };
                directionsService.route(request, function (response, status) {
                    if (status == google.maps.DirectionsStatus.OK) {
                        directionsDisplay.setDirections(response);
                    }
                });
            }

            google.maps.event.addDomListener(window, 'load', initialize);

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T17:58:19.440

`control`缺少具有 id 的元素。行后：

```
var control = document.getElementById('control'); 
```

变量`control`获得了价值`null`，因此下一行

```
control.style.display = 'block'; 
```

产生错误：

```
Uncaught TypeError: Cannot read property 'style' of null 
```

要解决此问题，您必须使用 id 向页面添加新元素`control`，例如：

```
<div id="control"></div> 
```

如果您想将自定义控件添加到 Google 地图，请查看文档[控件](https://developers.google.com/maps/documentation/javascript/controls)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:06:19.713

如果页面中不存在控件元素，则返回函数`if (control===null) return;`

# xpath - 如何在 Xpath 中使用多个条件？

> ID：16119818
> 
> 赞同：6
> 
> 时间：2013-04-20T11:31:46.933
> 
> 标签：xpath

Xpath 新手。试图在 SSIS 中使用 XML 任务来加载一些值。使用下面提到的 Microsoft 的 XML 清单。

如何在风格新颖且奖项=“普利策”的书店/书籍中加载名字值？ `//book[@style='novel' and ./author/award/text()='Pulitzer']`是我正在尝试的。它给出了整个元素。我应该在哪里修改以获得名字值？

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="myfile.xsl" ?>
<bookstore specialty="novel">
  <book style="autobiography">
    <author>
      <first-name>Joe</first-name>
      <last-name>Bob</last-name>
      <award>Trenton Literary Review Honorable Mention</award>
    </author>
    <price>12</price>
  </book>
  <book style="textbook">
    <author>
      <first-name>Mary</first-name>
      <last-name>Bob</last-name>
      <publication>Selected Short Stories of
        <first-name>Mary</first-name>
        <last-name>Bob</last-name>
      </publication>
    </author>
    <editor>
      <first-name>Britney</first-name>
      <last-name>Bob</last-name>
    </editor>
    <price>55</price>
  </book>
  <magazine style="glossy" frequency="monthly">
    <price>2.50</price>
    <subscription price="24" per="year"/>
  </magazine>
  <book style="novel" id="myfave">
    <author>
      <first-name>Toni</first-name>
      <last-name>Bob</last-name>
      <degree from="Trenton U">B.A.</degree>
      <degree from="Harvard">Ph.D.</degree>
      <award>P</award>
      <publication>Still in Trenton</publication>
      <publication>Trenton Forever</publication>
    </author>
    <price intl="Canada" exchange="0.7">6.50</price>
    <excerpt>
      <p>It was a dark and stormy night.</p>
      <p>But then all nights in Trenton seem dark and
      stormy to someone who has gone through what
      <emph>I</emph> have.</p>
      <definition-list>
        <term>Trenton</term>
        <definition>misery</definition>
      </definition-list>
    </excerpt>
  </book>
  <my:book xmlns:my="uri:mynamespace" style="leather" price="29.50">
    <my:title>Who's Who in Trenton</my:title>
    <my:author>Robert Bob</my:author>
  </my:book>
</bookstore> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T11:42:10.330

我得到了答案。

```
//book[@style='novel' and ./author/award/text()='Pulitzer']//first-name 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-21T16:56:53.183

**使用**：

```
/*/book[@style='novel']/author[award = 'Pulitzer']/first-name 
```

这将选择其父`first-name`元素具有字符串值为“普利策”的子元素且其（的）父元素为 a且其属性值为“novel”且其父元素为 XML 文档的顶部元素的任何元素。`author``award``author``book``style`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-22T17:38:44.287

> 相同上下文中的类似问题。我该怎么做，反之亦然？假设我想找到所有价格大于 20 的书籍的 id ？我知道我是在轻推，但我真的很想澄清我的理解。

这是需要的`XPATH`：

```
//book/price[text() > 20]/.. 
```

# qt - 模型/视图：是否有必要检查提供的模型索引是否有效？

> ID：16119825
> 
> 赞同：0
> 
> 时间：2013-04-20T11:32:03.550
> 
> 标签：qt, pyqt, pyside

在这个例子中，是否需要检查提供的模型索引是否有效以及行号是否在字符串列表中的项目范围内？ [http://qt-project.org/doc/qt-4.8/model-view-programming.html#model-headers-and-data](http://qt-project.org/doc/qt-4.8/model-view-programming.html#model-headers-and-data)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:03:32.890

是的。当然，如果您确定您在模型内部使用的所有容器都可以处理负索引和越界索引，您可以跳过某些检查，但我认为这是一种糟糕的设计实践。每次更改模型容器结构时，您都必须重新考虑应该添加/删除哪些检查，如果您在调试中使用 Qt 容器（如 QList 等），Qt 将触发断言以越界访问容器元素。

# sharepoint - 备份和还原 Sharepoint 站点（不是站点集合）

> ID：16119826
> 
> 赞同：2
> 
> 时间：2013-04-20T11:32:08.850
> 
> 标签：sharepoint, sharepoint-2010

**我的设置：**
带有 SP1 的 Sharepoint 2010站点
集合 URL：`http://sp2010:8083/`
站点 URL：`http://sp2010:8083/abc`

**要求：**
需要将站点的 URL
从更改`http://sp2010:8083/abc`
为`http://sp2010:8083/ict`

**我的做法：**
使用Backup-SPSite和Restore-SPSite命令备份站点**abc**，然后在站点**ict上恢复**

**问题：** Backup-SPSite 和 Restore-SPSite 适用于网站集，但不适用于网站。我收到以下错误

```
The specified URL is not a top-level Web site. The backup and
restore operations work only for top-level Web sites. Enter the URL for a site
to try the operation again. 
```

请帮助如何更改网站的 URL。我知道您无法更改 Sharepoint 站点的 URL，但我认为可以使用备份和还原来实现相同的目的。

我无法理解像 Microsoft 这样的公司如何不提供轻松更改 URL 的选项。

谢谢，

尼丁

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:56:35.023

你试过用

```
Export-spweb –identity http://sp2010:8083/abc -path c:\sitebkup\mysite.bak

Import-SPWeb –identity http://sp2010:8083/ict -path c:\sitebkup\mysite.bak 
```

# oracle - 使用 WHERE IN 模式时获取“ORA-01482：不支持的字符集”

> ID：16119829
> 
> 赞同：2
> 
> 时间：2013-04-20T11:32:23.450
> 
> 标签：oracle

我在 Oracle 数据库中有一个具有以下结构的表：

```
CREATE TABLE PASSENGERS
(ID VARCHAR2(6),
 PASSPORTNO VARCHAR2(14)); 
```

我想获取多次注册的乘客的 ID。为此，我运行以下查询。

```
SELECT ID FROM PASSENGERS WHERE PASSPORTNO IN 
  (SELECT PASSPORTNO FROM PASSENGERS
     GROUP BY PASSPORTNO 
     HAVING COUNT(*)>1); 
```

但我收到“不支持的字符集”错误。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T20:48:11.110

Mostly seems like a data issue. Try checking the exact data row which is causing the issue.

Use : **DML Error Logging** - [http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php](http://www.oracle-base.com/articles/10g/dml-error-logging-10gr2.php)

Btw, you are doing `GROUP BY passportno` .Is that correct? (This implies multiple passports can have same passport number). I guess it should be `GROUP BY id`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T12:09:36.677

由于与 PASSPORTNO 相关的所有查询都运行良好，因此您至少还有两件事要做：

1.  运行`SELECT ID FROM PASSENGERS`并检查错误，如果出现错误，则可能与存储在表中的内容有关
2.  尝试使用另一个 SQL 工具来执行您的查询，您的客户端操作系统可能正在使用数据库在处理您的查询以显示返回行时无法理解的系统编码。

由于 ID 和 PASSPORTNO 都是 varchar 字段，因此其中一个有一个很大的变化，即在其中一个 oracle 无法正确解码的数据。

# ruby-on-rails - Facebook Koala (rails)：使用单个批处理请求获取组及其成员

> ID：16119831
> 
> 赞同：2
> 
> 时间：2013-04-20T11:32:32.053
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3.1, koala

我是 facebook 图形 API 的新手，我找不到实现这一目标的方法。我所有的组都少于 15 个用户（不需要拆分请求）

我目前正在使用一个为每个请求调用 API 的循环，女巫非常慢：

```
fb_groups = facebook.get_connections("me","groups?parent=xxxxxxxxxxx")

###### groups parsing and selection

id_members.each do |id|
 User.fb_find(id) # gets the user information using get_object
end 
```

提前致谢，

# mysql - MYSQL中的Case语句，没有找到Case？

> ID：16119834
> 
> 赞同：0
> 
> 时间：2013-04-20T11:32:43.037
> 
> 标签：mysql, sql, database, mysqli, mysql-workbench

我有一条`CASE`语句，它接收表的前**40**条记录，它具有基于计数器的不同过程 - `@COUNT`。不幸的是，当我在没有 a 的情况下运行该程序时，`else`它不起作用并给出`Case not found for CASE statement (Error 1339)`.

但是当我确实有 else 它工作正常但它在最后一天运行两次，所以我有一个最后日期的副本。

这有什么原因吗？请检查我下面的代码..很多已被删除

```
CREATE PROCEDURE `init`(In dID INT)

BEGIN  
    DECLARE first40 CURSOR FOR 
                SELECT * FROM tbl
                WHERE tbl.id = dID
                ORDER BY tbl.datum ASC
                LIMIT 40;

    OPEN first40;

    SET @COUNT = 0;
REPEAT FETCH first40 INTO Tid, Tdt, Tcls, Thgh, Tlw, Tvol, Tnms_id;
    SET @COUNT = @COUNT + 1;
CASE 
WHEN @COUNT = 1 THEN 

WHEN @COUNT>= 2 AND @COUNT < 9 THEN 

WHEN @COUNT = 9 THEN 

WHEN @COUNT >= 10 AND @COUNT < 12 THEN 

WHEN @COUNT = 12 THEN

WHEN @COUNT = 13 THEN

WHEN @COUNT = 14 THEN

WHEN @COUNT = 15 THEN

WHEN @COUNT = 16 THEN

WHEN @COUNT >= 17 AND @COUNT < 20 THEN

WHEN @COUNT >= 20 AND @COUNT < 26 THEN

WHEN @COUNT = 26 THEN

WHEN @COUNT >= 27 AND @COUNT < 34 THEN 

WHEN @COUNT = 34 THEN 

WHEN @COUNT > 34 AND @COUNT <= 40 THEN 
    END CASE; 

INSERT INTO .....
            VALUES ....;

UNTIL done END REPEAT;

CLOSE first40; 

END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:39:39.413

您应该能够轻松地将`ELSE`后面添加到 CASE（与 SELECT 查询不同，存储过程 CASE 块中**需要**ELSE ），然后在 INSERT INTO 之前跟进：

```
IF @COUNT <= 40
INSERT INTO .....
            VALUES ....; 
```

重复第 40 行的原因是在第 41 次通过时`REPEAT FETCH`，它没有得到任何数据，所以

1.  变量未更新（但也未清除）
2.  直到您在该部分之前的代码块*之后*才检查条件`UNTIL done`。

# android - Android 应用活动导航

> ID：16119835
> 
> 赞同：-1
> 
> 时间：2013-04-20T11:32:43.993
> 
> 标签：android, android-intent, android-activity

我制作了一个应用程序，它有七个活动，所有活动都可以从 main.Each 访问。每个活动都有自己的按钮，但是当我单击其中一个按钮时，它正在启动所有活动，有人可以为我解决这个问题/这是代码：

```
 sat=(Button)findViewById(R.id.button7);
    sun=(Button)findViewById(R.id.button1);
    mon=(Button)findViewById(R.id.button2);
    tues=(Button)findViewById(R.id.button3);
    wed=(Button)findViewById(R.id.button4);
    thurs=(Button)findViewById(R.id.button5);
    fri=(Button)findViewById(R.id.button6);
    info=(Button)findViewById(R.id.button8);

    sat.setOnClickListener(this);
    sun.setOnClickListener(this);
    mon.setOnClickListener(this);
    tues.setOnClickListener(this);
    wed.setOnClickListener(this);
    thurs.setOnClickListener(this);
    fri.setOnClickListener(this);
    info.setOnClickListener(this);

    }

public void onClick(View arg0) {
    // TODO Auto-generated method stub
    int id=arg0.getId();

    if(id==R.id.button6);
    {
        startActivity(new Intent(this,Fri.class));
    }

    if(id==R.id.button5);
    {
        startActivity(new Intent(this,Thurs.class));
    }

    if(id==R.id.button4);
    {
        startActivity(new Intent(this,Wed.class));
    }

    if(id==R.id.button3);
    {
        startActivity(new Intent(this,Tues.class));
    }

    if(id==R.id.button2);
    {
        startActivity(new Intent(this,Mon.class));
    }

    if(id==R.id.button1);
    {
        startActivity(new Intent(this,Sun.class));
    }

    if(id==R.id.button7);
    {
        startActivity(new Intent(this,Sat.class));
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:46:23.203

请尝试以下代码：解决您的问题

```
public void onClick(View arg0)
{
    int id=arg0.getId();
    switch(id)
    {
    case R.id.button6:
         startActivity(new Intent(this,Fri.class));
         break;
    case R.id.button5:
         startActivity(new Intent(this,Thurs.class));
         break;
    case R.id.button4:
         startActivity(new Intent(this,Wed.class));
         break;
    case R.id.button3:
         startActivity(new Intent(this,Tues.class));
         break;
    case R.id.button2:
         startActivity(new Intent(this,Mon.class));
         break;
    case R.id.button1:
         startActivity(new Intent(this,Sun.class));
         break;
    case R.id.button7:
         startActivity(new Intent(this,Sat.class));
         break;
    default:
         break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:35:03.970

使用`else if`而不是仅`if`

或`switch case`在您的`onClick`

# android - 在 Android 中以编程方式创建微调器

> ID：16119841
> 
> 赞同：21
> 
> 时间：2013-04-20T11:33:06.227
> 
> 标签：android, spinner, android-spinner

我想在不使用 XML 的情况下创建一个微调器。我是android新手，知识有限。现在我有了这段代码（见上文），我希望我的微调器在我的`TabActivity`. 没有明显的错误，但是当我打开我的活动时，选项卡是空的。我会很感激一些帮助。

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    ArrayList<String> spinnerArray = new ArrayList<String>();
    spinnerArray.add("one");
    spinnerArray.add("two");
    spinnerArray.add("three");
    spinnerArray.add("four");
    spinnerArray.add("five");

    Spinner spinner = new Spinner(this);
    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, spinnerArray);
    spinner.setAdapter(spinnerArrayAdapter);

} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-20T11:42:55.550

您需要将其添加`Spinner`到布局中。

首先`container`为 the创建一个`Spinner`，然后创建`Spinner`并将其添加到您的`container`. 接下来将你的内容设置`Activity`到你的`container`.

`onCreate`在您的方法中，可以这样完成：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_my);

    LinearLayout layout = new LinearLayout(this);

    ArrayList<String> spinnerArray = new ArrayList<String>();
    spinnerArray.add("one");
    spinnerArray.add("two");
    spinnerArray.add("three");
    spinnerArray.add("four");
    spinnerArray.add("five");

    Spinner spinner = new Spinner(this);
    ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, spinnerArray);
    spinner.setAdapter(spinnerArrayAdapter);

    layout.addView(spinner);

    setContentView(layout);
} 
```

**编辑：**

只是为了澄清一下：如果`Spinner`没有添加到`Activity`布局内部的内容中，它是不可见的，所以这就是为什么你没有得到任何错误或任何东西，因为你的代码中没有任何错误，每瑟;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T16:54:02.133

```
public class MainActivity extends AppCompatActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        LinearLayout layout = new LinearLayout(this);

        // The following can also be done using a loop
        ArrayList<String> spinnerArray = new ArrayList<String>();
        spinnerArray.add("one");
        spinnerArray.add("two");
        spinnerArray.add("three");
        spinnerArray.add("four");
        spinnerArray.add("five");

        Spinner spinner = new Spinner(MainActivity.this);
        ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(MainActivity.this, android.R.layout.simple_spinner_dropdown_item, spinnerArray);
        spinner.setAdapter(spinnerArrayAdapter);
        layout.addView(spinner);
        setContentView(layout);
    }
    } 
```

# javascript - 通过在文本框中输入来查找属性值并获取父属性值

> ID：16119846
> 
> 赞同：0
> 
> 时间：2013-04-20T11:33:24.433
> 
> 标签：javascript, xml, xpath

我有这种类型的 xml 文件：-

```
<root>
    <child_1 entity_id = "1" value="india">
        <child_2 entity_id = "2" value="gujarat">
            <child_3 entity_id = "3" value="Ahemdabad"/>
            <child_4 entity_id = "4" value="Surat"/>
            <child_5 entity_id = "5" value="Rajkot"/>           
        </child_2>
    </child_1>
</root> 
```

我有一个文本框，我输入任何城市名称，例如。Surat 如果 Surat 在我的 xml 文件中，则返回父属性值，例如。古吉拉特邦。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T22:07:25.280

你可以使用这个 xpath

```
//*[@value='Surat']/parent::*/@value 
```

只需将“Surat”替换为变量

# java - 如何通过 Java 将记录添加到 MS Access

> ID：16119847
> 
> 赞同：0
> 
> 时间：2013-04-20T11:33:28.223
> 
> 标签：java, database

我试图将一行记录添加到我已经存在的 MS 数据库中。基本上，这些记录将被输入到 GUI 中，然后在用户单击提交时添加到数据库中。

我使用 3 个 JLabel、3 个 JTextfield 和 1 个 JButton 创建了 GUI。用户需要输入名称、数量和价格，然后单击提交按钮。

```
JLabel newproductname = new JLabel("Enter Product Name");
JTextField npn = new JTextField(7);
JLabel newproductprice = new JLabel("Enter Product Price");
JTextField npp = new JTextField(7);
JLabel newproductstock = new JLabel("Enter Product Stock");
JTextField nps = new JTextField(7);
JButton addnewitem = new JButton("Add New Item"); 
```

这是我用来创建 GUI 的，显然我已将所有这些添加到下面的面板中

我是 Java 新手，所以我很欣赏任何人都能理解的术语，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:15:29.007

要使用 Java 在 MS Access 中添加记录，您需要使用 JDBC 插入记录。 [参考这里](http://www.youtube.com/watch?v=ujJ4H9RpC7c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:49:38.227

为此使用 ActionListioner 事件。当您单击按钮时，将触发一个事件，该事件将通过 ActionListioner 接口（[事件处理](http://docs.oracle.com/javase/tutorial/uiswing/events/)）处理，它有一个方法 actionPerformed（ActionEvent），您需要提供此方法的实现来处理您的事件。IE

```
class GUI implements ActionListener{
   JLabel newproductname = new JLabel("Enter Product Name");
JTextField npn = new JTextField(7);
JLabel newproductprice = new JLabel("Enter Product Price");
JTextField npp = new JTextField(7);
JLabel newproductstock = new JLabel("Enter Product Stock");
JTextField nps = new JTextField(7);
JButton addnewitem = new JButton("Add New Item");

void storeMethod(String npn, string npp, string nps){
   // some implementation 
}

public void actionPerformed(ActionEvent ae){
    storeMethod(npn.getText(), npp.getText(), nps.getText());
}

void drawForm(){
 // some implementation
addnewitem.addActionListener(this);
}

main(){
new GUI().drawForm();
} 
```

}

这是一个[链接](http://www.codeproject.com/Articles/35018/Access-MS-Access-Databases-from-Java)，可帮助您连接 MS-Assess。从这里你会找到源代码[link2](http://www.sourcecodester.com/java/jdbc-odbc-connectivity-java-with-access.html)

# hibernate - Hibernate通过非ID，唯一标识符获取对象

> ID：16119850
> 
> 赞同：2
> 
> 时间：2013-04-20T11:33:45.697
> 
> 标签：hibernate, get, uniqueidentifier

我有以下对象：

```
 @Id
    @GeneratedValue
    private long id;
    @Column(name = "uniqueId", unique=true)
    private String uniqueId; 
```

是否可以从具有 object.uniqueId == "some_unique_id" 的数据库中获取对象？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T11:46:10.957

```
String hql = "select foo from Foo foo where foo.uniqueId = :uniqueId";
return (Foo) session.createQuery(hql)
                    .setString("uniqueId", theUniqueId)
                    .uniqueResult(); 
```

# hibernate - 检索给定修订版的审计实体名称、旧值和新值

> ID：16119852
> 
> 赞同：0
> 
> 时间：2013-04-20T11:33:51.920
> 
> 标签：hibernate, hibernate-envers

我正在使用 envers 来审核 User 类，并将所有修改后的数据保存在 DB 中，并带有 rev 号。现在，我需要通过将修订号作为参数传递来恢复所有已编辑的实体名称、旧值和新值。

我已阅读 envers 文档，但找不到任何解决方案。

有人可以建议吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:09:04.157

修订号唯一地标识实体的版本，因此在获取特定修订版的实体时，您会获得它当时的值。

要获取字段的新旧值，如果您知道实体在修订时已更改`N`，最简单的方法是获取修订时的实体`N-1`并`N`比较您感兴趣的字段。

这可以使用`forRevisonsOfEntity`查询在单个查询中完成（请参阅`AuditReader`和`AuditQueryCreator` [javadocs](http://docs.jboss.org/hibernate/orm/4.1/javadocs/)）

# asynchronous - Elisp 在命令完成后关闭 *Async Sh ell 命令* 窗口

> ID：16119853
> 
> 赞同：0
> 
> 时间：2013-04-20T11:33:57.327
> 
> 标签：asynchronous, elisp

我做了一个函数，运行 pdflatex 编译器为当前编辑的 tex 文件生成一个 pdf 文件：

```
(defun latex-compile ()
  "Runs pdflatex on current file"
  (interactive)
  (let ((file-name (shell-quote-argument (buffer-file-name))))
    (async-shell-command (concat "pdflatex " file-name)))) 
```

`*Async Shell Command*`如果成功退出，是否可以在进程退出后关闭窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:31:27.720

如果你想以编程方式运行异步进程，那就去吧。也就是说，使用较低级别的函数。

```
(set-process-sentinel (start-process "pdflatex"
                                     "*async pdflatex*"
                                     "pdflatex" filename)
                      (lambda (process event)
                        (cond ((string-match-p "finished" event)
                               (kill-buffer "*async pdflatex*"))
                              ((string-match-p "\\(exited\\|dumped\\)" event)
                               (message "Something wrong happened while running pdflatex")
                               (when (yes-or-no-p "Something wrong happened while running pdflatex, see the errors?")
                                 (switch-to-buffer "*async pdflatex*")))))) 
```

`start-process`异步启动进程，`set-process-sentinel`定义进程状态变化时触发的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T17:44:22.900

这是工作代码：

```
(defun latex-sentinel (process event)
      (message event)
      (cond ((string-match-p "finished" event)
                  (progn
                        (kill-buffer "*async pdflatex*")
                        (message "pdflatex done")))))

(defun latex-compile ()
      "Runs pdflatex on current file"
      (interactive)
      (let* ((file-name (shell-quote-argument (buffer-file-name)))
            (process (start-process-shell-command
                           "pdflatex"
                           "*async pdflatex*"
                           (concat "pdflatex " file-name))))
            (set-process-sentinel process 'latex-sentinel))) 
```

# asp.net - 是否可以让 asp:calender 显示数据库中的日期？

> ID：16119854
> 
> 赞同：0
> 
> 时间：2013-04-20T11:33:57.580
> 
> 标签：asp.net, vb.net, visual-studio, calendar

我试图让用户在文本框中输入年份，如果数据库中存在年份（其中有学期的特定日期），它会在日历中显示这些日期。

我已经寻找了几天如何做到这一点，但我找不到任何帮助。

这甚至可能吗？我希望能够为此使用 SQLDataSource，但我无法将连接字符串添加到日历中。

任何帮助都会很棒！标记

*****已修订* *** **** 我的数据库中有一个表格，其中包含每个大学学期的开始日期和结束日期，例如秋季、春季、夏季以及复活节假期。我希望用户能够输入他们希望更改日期的年份并点击搜索按钮。如果数据库有输入年份的记录，则会显示每个日期的日历，从数据库中选择日期，而不是当前日期。**

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:05:39.723

终于弄清楚如何将数据库中设置的日期显示在日历中。这是代码：

```
 Dim strConn As String = "Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\scrummingit2.mdf;Integrated Security=True;User Instance=True"
        Dim sql As String = "SELECT [Year], [Autumn_Start], [Autumn_End], [Spring_Start], [Spring_End], [Summer_Start], [Summer_End], [Easter_Start], [Easter_End] FROM [Semester_Dates] WHERE ([Year] = '" + TxtAddYearDates.Text + "')"

        Dim conn As New SqlConnection(strConn)
        Dim objDR As SqlDataReader
        Dim Cmd As New SqlCommand(Sql, conn)
        conn.Open()
        objDR = Cmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection)
        While objDR.Read()

            AutumnStartCalendar.SelectedDate = objDR("Autumn_Start")
            AutumnStartCalendar.VisibleDate = objDR("Autumn_Start")

            AutumnEndCalendar.SelectedDate = objDR("Autumn_End")
            AutumnEndCalendar.VisibleDate = objDR("Autumn_End")

            SpringStartCalendar.SelectedDate = objDR("Spring_Start")
            SpringStartCalendar.VisibleDate = objDR("Spring_Start")

            SpringEndCalendar.SelectedDate = objDR("Spring_End")
            SpringEndCalendar.VisibleDate = objDR("Spring_End")

            SummerStartCalendar.SelectedDate = objDR("Summer_Start")
            SummerStartCalendar.VisibleDate = objDR("Summer_Start")

            SummerEndCalendar.SelectedDate = objDR("Summer_End")
            SummerEndCalendar.VisibleDate = objDR("Summer_End")

            EasterStartCalendar.SelectedDate = objDR("Easter_Start")
            EasterStartCalendar.VisibleDate = objDR("Easter_Start")

            EasterEndCalendar.SelectedDate = objDR("Easter_End")
            EasterEndCalendar.VisibleDate = objDR("Easter_End")

        End While 
```**

# node.js - 在 mongoose/mongodb/node 中使用异步回调循环

> ID：16119855
> 
> 赞同：3
> 
> 时间：2013-04-20T11:33:58.023
> 
> 标签：node.js, mongodb, mongoose

我是 nodejs/mongo/mongoose 的新手，我正在尝试做一件非常简单的事情。我有以下模式：

```
var authorSchema = mongoose.Schema({
    name: String,        
});
Author = mongoose.model('Author', authorSchema);

var bookSchema = mongoose.Schema({
    title: String,        
    isbn: String,
    pages: Number,        
    author: { type : mongoose.Schema.ObjectId, ref : 'Author', index: true }
});
Book = mongoose.model('Book', bookSchema); 
```

我想为每个作者创建一个带有 id、name 和 book count 的作者列表。我有这样的事情：

```
exports.author_list = function(req, res){
    Author.find({}, function (err, authors){
        var author_array = Array();
        for (var i=0;i<authors.length;i++){
            var author_obj = new Object();
            author_obj.id = authors[i]._id;
            author_obj.name = authors[i].name;
            author_obj.count = 0; //here is the problem 
            author_array[i] = author_obj;
        }
        res.writeHead(200, { 'Content-Type': 'application/json' });
        res.write(JSON.stringify({ authors: author_array }));
        res.end();

    });
} 
```

我知道如何查询计数。我的问题是如何循环作者并使用异步回调填充输出。以nodejs方式实现它的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T13:17:48.760

我认为您想使用[async 之](https://github.com/caolan/async)类的东西来协调这些请求；[map()](https://github.com/caolan/async#maparr-iterator-callback)似乎是一个不错的选择：

```
Author.find({}, function (err, authors) {
  async.map(authors, function(author, done) {
    Book.count({author: author._id}, function(err, count) {
      if (err)
        done(err);
      else
      {
        done(null, {
          id    : author._id,
          name  : author.name,
          count : count
        });
      }           
    });
  }, function(err, author_array) {
    if (err)
    {
      // handle error
    }
    else
    { 
      /*
      res.writeHead(200, { 'Content-Type': 'application/json' });
      res.write(JSON.stringify({ authors: author_array }));
      res.end();
      */
      // Shorter:
      res.json(author_array);
    }
  });
}); 
```

# javascript - 连续隐藏一个 div 显示另一个

> ID：16119857
> 
> 赞同：0
> 
> 时间：2013-04-20T11:34:02.630
> 
> 标签：javascript, jquery

我的 html 页面中有两个 div，我想在隐藏另一个 div 时显示一个 div，并在每 5 秒后自动在第一个隐藏上显示另一个。我正在我的 document.ready 中写这个，但它不起作用。它只隐藏第一个 div 并显示它，然后它什么也不做。

```
 $("#free-trial-link").show().delay(5000).queue(function(n) {
      $(this).hide(); n();
  });

  $('#free-trial-link').fadeIn(function() {
        $('#record-call-link').fadeIn();   
  });

  $('#record-call-link').fadeIn(function() {
        $('#free-trial-link').fadeIn();   
  }); 
```

标记是：

```
 <div class="container_content" style="padding-top: 10px;">
                                                    <p class="date_day" id="p-free-trial-link" style="display: none">
                                                        <img id="free-trial-link" style="cursor: pointer;" src="images/tial-icon.png" width="32"
                                                            height="32"><br>
                                                        Free Trial
                                                    </p>
                                                    <p class="date_day" style="text-align: right; margin-top: 25px;" id="p-record-call-link">
                                                        <img id="record-call-link" style="position: inherit; cursor: pointer;" src="images/record-icon.png"
                                                            width="32" height="32"><br>
                                                        Record a Call
                                                    </p>
                                                    <div class="clear-n">
                                                    </div>
                                                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:42:44.173

尝试

```
<div class="container_content" style="padding-top: 10px;">
    <p class="date_day" id="p-free-trial-link" style="display: none">
        <img id="free-trial-link" style="cursor: pointer;" src="images/tial-icon.png" width="32"
        height="32" /><br />
        Free Trial
    </p>
    <p class="date_day" style="text-align: right; margin-top: 25px; display: none" id="p-record-call-link">
        <img id="record-call-link" style="position: inherit; cursor: pointer;" src="images/record-icon.png"
        width="32" height="32" /><br />
        Record a Call
    </p>
    <div class="clear-n">
    </div>
</div> 
```

和

```
$(function(){
    function showTrial(){
        $("#p-free-trial-link").show().delay(5000).hide(function(){
            showCall();
        });
    }

    function showCall(){
        $("#p-record-call-link").show().delay(5000).hide(function(){
            showTrial()
        });
    }

    showTrial()
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/nUqYd/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:42:27.500

你可以`.toggle()`在 jQuery中使用

# javascript - 如何在执行 javascript 事件之前确保 HTML 表单元素可见更新

> ID：16119863
> 
> 赞同：0
> 
> 时间：2013-04-20T11:34:47.403
> 
> 标签：javascript, jquery

我发现像 .click 和 .change 这样的事件，如果它们导致一些需要花费大量时间（如一两秒）的处理实际上会延迟屏幕更新，因此用户直到某些之后才会看到例如单选按钮选择移动时间。就用户体验而言，这当然是一个很大的禁忌。按钮应立即更改，光标指示是否有等待。

示例：http: [//jsfiddle.net/needlethread/uFjZf/1/](http://jsfiddle.net/needlethread/uFjZf/1/)

```
$('[name="myradio"]').change(function() {
  delay();                              // one second of code execution
  $("#aaa").html("myradio changed");    // happens same time as radio moves 
}); 
```

确保按钮在用户单击后立即发生明显变化的最佳方法是什么？我尝试了 .click 事件，同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:43:36.020

如果您使用 Ajax 连接到服务器，则没有问题，因为这是异步的。

否则，如果您只是在做繁重的客户端工作，则可以使用一个技巧：

```
$('[name="myradio"]').change(function() {
  $("#aaa").html("myradio changed");    // happens same time as radio moves 
  setTimeout(delay, 0);
}); 
```

它的作用（setTimeout 为 0 毫秒）有效地将调用移动到执行堆栈的末尾，因此所有内容都在该调用之前执行。

# vb.net - vb.net - 如何使用参数将新任务声明为 SUB

> ID：16119864
> 
> 赞同：5
> 
> 时间：2013-04-20T11:34:53.217
> 
> 标签：vb.net, parameters, task, declare

如您所知，我们在 vb.net 中有一种新语法，可以创建内联任务，因此我们可以异步运行它。

这是正确的代码：

```
 Dim testDeclaring As New Task(Sub()

                                      End Sub)
        testDeclaring.Start() 
```

但现在我需要在子例程中传递一个参数，但我找不到正确的语法。有没有可能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T14:42:55.960

如果你想传递一个参数，你可以这样做

```
 Dim someAction As Action(Of Object) = Sub(s As Object)
                                              Debug.WriteLine(DirectCast(s, String))
                                          End Sub

    Dim testDeclaring As New Task(someAction, "tryme")
    testDeclaring.Start() 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-20T11:40:02.330

这是不可能的。但是，您可以只使用当前范围内的参数：

```
Public Function SomeFunction()

    Dim somevariable as Integer = 5

    Dim testDeclaring As New Task(Sub()
                                   Dim sum as integer = somevariable + 1  ' No problems here, sum will be 6
                              End Sub)
    testDeclaring.Start()

End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-12T00:49:51.767

不知道你是否在寻找这个：

```
Dim t As Task = New Task(Sub() RemoveBreakPages(doc))

Sub RemoveBreakPages(ByRef doc As Document)
        Dim paragraphs As NodeCollection = doc.GetChildNodes(NodeType.Paragraph, True)
        Dim runs As NodeCollection = doc.GetChildNodes(NodeType.Run, True)
        For Each p In paragraphs
            If CType(p, Paragraph).ParagraphFormat().PageBreakBefore() Then
                CType(p, Paragraph).ParagraphFormat().PageBreakBefore = False
            End If
        Next
    End Sub 
```

问候。

# javascript - 确定我单击了哪个表条目

> ID：16119865
> 
> 赞同：0
> 
> 时间：2013-04-20T11:35:01.693
> 
> 标签：javascript, css, twitter-bootstrap, pug

我正在尝试创建一个动态表，它应该在其中一个列中包含一个启动引导模式的按钮作为条目。我不知道如何检查单击了哪个按钮以及如何填写表格。抱歉，我对标记没有太多经验。这是我到目前为止所拥有的：

```
div.span12
table.table.table-hover
    thead
        tr
            th Patient Name
            th Phone Number
            th History
    tbody
        each pat in patients
            tr
                td #{pat.name}
                td #{pat.phone}
                if (0<pat.history.length)
                    td #{pat.history[0]}
                else
                    td No history

a.btn(data-toggle="modal", href="#myModal") Launch
div.modal.hide(id="myModal")
    .modal-header
        button(type="button", class="close", data-dismiss="modal") x
        h3 Modal Header
    .modal-body
        p One fine body...
    .modal-footer 
```

所以我想`td #{pat.history[0]}`用一些东西（唯一ID？）替换它，如果我点击它，我可以弹出模式并显示相关`patient`数据。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:55:00.543

我找到了解决方案，但在我看来有点难看。如果还有其他更清洁的，请告诉我：

```
 each pat,key in patients
            tr
                td #{pat.name}
                td #{pat.phone}
                if (0<pat.history.length)
                    td 
                        span(onclick='console.log(#{key})') #{pat.history[0]}
                else
                    td No history 
```

像这样，我可以将患者数组中的元素与单击它的行相关联，并且可以弹出具有所需内容的模式，但是这样使用它可以吗？

# iphone - 如何使用 CAAffineTranslation 或任何其他方式将视频方向从横向设置为纵向？

> ID：16119867
> 
> 赞同：3
> 
> 时间：2013-04-20T11:35:06.420
> 
> 标签：iphone, ios, ios4, cocos2d-iphone

我正在使用 AVMutableComposition 合并视频并且视频被合并。但是视频在合并后被存储在横向（这是 AVAsset 的默认模式）中。所以我希望视频只能在纵向模式下修复......有没有将视频方向设置为纵向模式的方法。提前感谢

这是我用于合并视频的代码

```
NSArray *arrVideoUrl=[objApp.dictSelectedVideos allKeys];
NSMutableArray *arrVideoAsset=[[NSMutableArray alloc]init];
for (int i=0; i<objApp.dictSelectedVideos.count; i++) {
      AVURLAsset *video=[[AVURLAsset alloc]initWithURL:[arrVideoUrl objectAtIndex:i] options:nil];
    [arrVideoAsset addObject:video];
}
AVURLAsset *music_track=[[AVURLAsset alloc]initWithURL:songUrl options:nil];
//to mix up the media items
AVMutableComposition *mixComposition = [[AVMutableComposition alloc] init];
//Setting Audio track
AVMutableCompositionTrack *AudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
//setting the track to add the videos
AVMutableCompositionTrack *firstTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
AVURLAsset *tempVideo1=[arrVideoAsset objectAtIndex:0];
AVURLAsset *tempVideo2=[arrVideoAsset objectAtIndex:1];
[firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, tempVideo1.duration)ofTrack:[[tempVideo1 tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:kCMTimeZero error:nil];
if (arrVideoUrl.count==1)
{
    [AudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, CMTimeAdd(kCMTimeZero, tempVideo2.duration))ofTrack:[[music_track tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil];
}
else{
        for (int j=1; j<=arrVideoAsset.count-1; j++)
     {
        AVURLAsset *tempVideoNext=[arrVideoAsset objectAtIndex:j];
        AVURLAsset *tempVideoPrev=[arrVideoAsset objectAtIndex:j-1];
        [firstTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, tempVideoNext.duration)ofTrack:[[tempVideoNext tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:tempVideoPrev.duration error:nil];

    }
    [AudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, CMTimeAdd(tempVideo1.duration, tempVideo2.duration))ofTrack:[[music_track tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:kCMTimeZero error:nil]; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-15T10:13:41.950

我还找到了另一个解决方案...如果您想将方向从横向更改为纵向...使用此代码

```
AVMutableVideoComposition *videoComp = [AVMutableVideoComposition videoComposition];
videoComp.renderSize = videoSize;
videoComp.frameDuration = CMTimeMake(1, 30);
videoComp.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer];

```

```
AVMutableVideoCompositionInstruction *instruction = [AVMutableVideoCompositionInstruction videoCompositionInstruction];
instruction.timeRange = CMTimeRangeMake(kCMTimeZero, [mixComposition duration]);
AVAssetTrack *videoTrack = [[mixComposition tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0];

AVMutableVideoCompositionLayerInstruction* layerInstruction = [AVMutableVideoCompositionLayerInstruction videoCompositionLayerInstructionWithAssetTrack:videoTrack];
instruction.layerInstructions = [NSArray arrayWithObject:layerInstruction];
videoComp.instructions = [NSArray arrayWithObject: instruction];

UIImageOrientation videoAssetOrientation_  = UIImageOrientationUp;
BOOL  isVideoAssetPortrait_  = NO;
CGAffineTransform videoTransform = clipVideoTrack.preferredTransform;

if(videoTransform.a == 0 && videoTransform.b == 1.0 && videoTransform.c == -1.0 && videoTransform.d == 0)  {videoAssetOrientation_= UIImageOrientationRight; isVideoAssetPortrait_ = YES;}
if(videoTransform.a == 0 && videoTransform.b == -1.0 && videoTransform.c == 1.0 && videoTransform.d == 0)  {videoAssetOrientation_ =  UIImageOrientationLeft; isVideoAssetPortrait_ = YES;}
if(videoTransform.a == 1.0 && videoTransform.b == 0 && videoTransform.c == 0 && videoTransform.d == 1.0)   {videoAssetOrientation_ =  UIImageOrientationUp;}
if(videoTransform.a == -1.0 && videoTransform.b == 0 && videoTransform.c == 0 && videoTransform.d == -1.0) {videoAssetOrientation_ = UIImageOrientationDown;}

CGFloat FirstAssetScaleToFitRatio = 320.0 / clipVideoTrack.naturalSize.width;

if(isVideoAssetPortrait_) {
    FirstAssetScaleToFitRatio = 320.0/clipVideoTrack.naturalSize.height;
    CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
    [layerInstruction setTransform:CGAffineTransformConcat(clipVideoTrack.preferredTransform, FirstAssetScaleFactor) atTime:kCMTimeZero];
}else{
    CGAffineTransform FirstAssetScaleFactor = CGAffineTransformMakeScale(FirstAssetScaleToFitRatio,FirstAssetScaleToFitRatio);
    [layerInstruction setTransform:CGAffineTransformConcat(CGAffineTransformConcat(clipVideoTrack.preferredTransform, FirstAssetScaleFactor),CGAffineTransformMakeTranslation(0, 160)) atTime:kCMTimeZero];
} 
```

// [layerInstruction setOpacity:0.0 atTime:kCMTimeZero];

```
AVAssetExportSession *assetExport = [[AVAssetExportSession alloc] initWithAsset:mixComposition presetName:AVAssetExportPresetHighestQuality];//AVAssetExportPresetPassthrough
assetExport.videoComposition = videoComp; 
```

# java - 使用 volatile 发布不可变对象是否安全？

> ID：16119871
> 
> 赞同：2
> 
> 时间：2013-04-20T11:35:25.713
> 
> 标签：java, concurrency, volatile, java.util.concurrent

最近我阅读了“Java 并发实践”部分 -->“3.4.2 示例：使用 volatile 发布不可变对象”。

然而; 我不能安静地理解它。这是情况！

不可变对象是：

```
@Immutable
class OneValueCache {
    private final BigInteger lastNumber;
    private final BigInteger[] lastFactors;
    public OneValueCache(BigInteger i, BigInteger[] factors) {
        lastNumber = i;
        lastFactors = Arrays.copyOf(factors, factors.length);
    }
    public BigInteger[] getFactors(BigInteger i) {
        if (lastNumber == null || !lastNumber.equals(i))
            return null;
        else
            return Arrays.copyOf(lastFactors, lastFactors.length);
    }
} 
```

假设我们有一个这样的 servlet

```
public class MyServlet {
private volatile OneValueCache immutableValue;
.
.

public void service(){
            .
            // what this function do : gets value from immutable object increments its
            // value and creates new Immutable object and put it back.
            // 
            .
    immutableValue = new OneValueCache( lastNumber, lastFactor[]);
    .
    .
    .
}
.
.
.
} 
```

根据这本书 MyServlet 是线程安全的，因为它使用 volatile 关键字发布不可变对象！

不过我觉得这里有问题！

认为：

线程 1 在时间 0 将值从 immutableValue 读取到其堆栈 var；

线程 2 在时间 0 将值从 immutableValue 读取到其堆栈 var；

线程 1 在时间 1 中增加堆栈变量中的值并创建新的 OneValueCache 对象 - 它是不可变的 - 并将其放入 immutableValue 字段变量中；

线程 2 在时间 2 中增加堆栈变量中的值并创建新的 OneValueCache 对象 - 它是不可变的 - 并将其放入 immutableValue 字段变量中；

这样我们就丢失了 Thread1 更新，所以这里没有 ThreadSafty！

相反，书上说：

**“这种由不变量关联的多个状态变量的不可变持有者对象与用于确保其及时可见性的可变引用的组合允许 VolatileCachedFactorizer 即使没有显式锁定也是线程安全的。”**

谁能帮我我在这里想念什么？

ps：为了更清楚，我知道数据一致性在这里举行。我们不能有无效的 OneValueCache 状态。但正如我的线程序列所示，这里有可能丢失更新。所以这个类不是线程安全的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T12:02:15.007

不变性意味着线程安全，因为一旦创建，就没有线程可以修改它，因此值将在线程之间保持一致。

在上面的例子中，“private volatile OneValueCache immutableValue”一次只能保存一个值，所以如果线程 1 先更新，然后线程 2 更新参考值，那么最后一个值将由“onevaluecache”表示，线程 1 的更新将丢失因为您只存储一个参考值。

您提到的步骤中 OneValueCache 的状态绝不是不一致的，因此它是线程安全的。

编辑：状态不一致的一些情况是：

1.  如果 immutableValue 变量不是 volatile 则每个线程将存储自己的副本，这意味着缓存将无法正常工作。

2.  如果 OneValueCache 类是可变的，那么多个线程将同时更改其值，这意味着状态将不一致，因此不是线程安全的。

# bash - 如何在 BASH 中包含某些字母的单词周围添加类似 HTML 的语法？

> ID：16119879
> 
> 赞同：1
> 
> 时间：2013-04-20T11:36:41.120
> 
> 标签：bash

我需要在字符串中的某些单词周围添加一些自定义语法。举个简单的例子，所有包含“A”或“B”的单词都应该分别被“<code><red>”和“<code></red>”包围，所有包含“H”或“F”的单词应该被“<code><blue>”和“<code></blue>”包围，其他单词被忽略。请参阅此示例字符串：

```
THE BEAR ATE THE FISH 
```

该行变为：

```
<blue>THE</blue> <red>BEAR</red> <red>ATE</red> <blue>THE</blue> <blue>FISH</blue> 
```

*   我已经在字符串的开头和结尾添加了空格，因此任何代码都可以使用空格轻松区分单词。
*   如果一个词包含多个匹配，它可以被标记两次，例如“<code>AFRICA”变成“<code><blue><red>AFRICA</red></blue>”。

如何在包含某些字母的单词周围添加此自定义语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T12:05:40.693

如果`awk`允许解决方案：

```
$ foo="THE BEAR ATE THE FISH AFRICA"
$ echo "${foo}" | awk '{
      gsub(/[^[:space:]]*(A|B)[^[:space:]]*/, "<red>&</red>");
      gsub(/[^[:space:]]*(H|F)[^[:space:]]*/, "<blue>&</blue>")
  }1'
<blue>THE</blue> <red>BEAR</red> <red>ATE</red> <blue>THE</blue> <blue>FISH</blue> <blue><red>AFRICA</red></blue> 
```

这将保持空白并确保`<blue><red></red></blue>`两者都匹配。如果两者都不是要求，请选择 shell 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T12:17:32.237

## POSIX shell 解决方案

（也适用于[bash](/questions/tagged/bash "显示标记为“bash”的问题")）

```
#!/bin/sh

x='THE BEAR ATE THE FISH IN AFRICA'

for i in $x; do
    case $i in
        *A*|*B*)
            case $i in
                *H*|*F*)
                    printf "<blue><red>$i</red></blue>"
                    ;;
                *)
                    printf "<red>$i</red>"
                    ;;
            esac
            ;;
        *H*|*F*)
            printf "<blue>$i</blue>"
            ;;
    esac
done 
```

## 输出

```
<blue>THE</blue><red>BEAR</red><red>ATE</red><blue>THE</blue><blue>FISH</blue>
<blue><red>AFRICA</red></blue> 
```

# spring - 在 Wicket IResource 中通过 JPA 访问数据库？

> ID：16119880
> 
> 赞同：0
> 
> 时间：2013-04-20T11:36:54.317
> 
> 标签：spring, hibernate, wicket, spring-orm, wicket-1.6

我想实现一个`DynamicImageResource`将安装在 Wicket 6.7/Spring 3.2/JPA 2 应用程序中的。这`DynamicImageResource`将根据输入参数检索信息并创建响应。

问题是：我如何从内部访问数据库`DynamicImageResource.getImageData(...)`？我无法`enter code here`通过`@SpringBean`. 我最后的手段是静态 PersistenceContextFactory。

有更好的想法吗？还是最佳实践？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-21T10:02:42.360

由于 Wicket 为您管理组件实例化，或者您通过它们各自的构造函数手动实例化对象，因此注入机制无法开箱即用（根据手动构造函数调用，该对象不受容器管理）。

Wicket 通过继承为组件提供内置注入，背后的魔力是 Wicket 调用`componentInstanciationListeners`。对于不是从启用注入的类继承的每个非托管类，您必须手动触发 bean 上的注入。

如评论中所述，您应该调用`Injector.get().inject(this);`构造函数以使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:38:15.327

为了完成整个事情，我将`PersistenceContextBridge`在这里通过我的 Spring bean。它包装了一个`EntityManager`，它将通过 注入`@PersistenceContext`。通过使用 Lombok 注释`@Delegate`，对 bean 的所有调用都将委托给`EntityManager`.

```
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import lombok.Delegate;
import org.springframework.stereotype.Service;

@Service
public class EntityManagerBridge implements EntityManager {
    @Delegate
    @PersistenceContext
    private EntityManager em;
} 
```

现在我在 Wicket 组件中要做的就是`EntityManagerBridge`注入`@SpringBean`：

```
@SpringBean
private EntityManager em; // inject EntityManagerBridge (implements EntityManager)

public MyFancyResource() {
    Injector.get().inject(this); // enable Spring injection for
} 
```

# jquery - laravel：如何通过控制器中的 ajax 检索 POST 数据

> ID：16119888
> 
> 赞同：4
> 
> 时间：2013-04-20T11:37:51.170
> 
> 标签：jquery, controller, laravel

我正在尝试检索`$_POST`通过 jquery ajax func 提交的数据，但似乎没有任何通过。这是我的代码：首先是我的表格：

```
{{  Form::open('', 'POST', array('id'=>'ajax')) }}

    {{ Form::text('_date', '', array('id'=>'datepicker', 'class'=>'app_date')) }}
    {{ Form::submit('Go', array('id'=>'go')) }}

{{  Form::close() }} 
```

和jQuery：

```
$('#ajax').submit(function(e){

    $.ajax({
        url: 'appajax',
        type: 'POST',
        data: $('.app_date').val(),
        dataType: 'json',
        success: function(info){
                     console.log(info);
         }
    });

    e.preventDefault();
}); 
```

...最后在控制器中：

```
public function post_appajax()
    {

        return Response::json(Input::get('_date'));

    } 
```

在控制台中，输出是`NULL`. 我错过了什么？我正在使用目前可从 laravel.com 下载的 laravel 3。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-20T11:41:59.337

当您使用 POST 方法时，您应该传递一个键/值对而不是一个字符串、一个对象，更改：

```
data: $('.app_date').val(), 
```

至：

```
data: { _date: $('.app_date').val() }, 
```

# silverlight - 一些 mvc 页面在 thinktecture 服务器中看不到 silverlight

> ID：16119890
> 
> 赞同：0
> 
> 时间：2013-04-20T11:38:05.357
> 
> 标签：silverlight, exception, model-view-controller

我有一个非常奇怪的问题。我想将一些silverlight页面添加到帐户控制器中的操作方法（查看其中的操作方法），但是当我导航它时，它给了我silverlight异常，它无法下载silverlight。

但是当我将它移动到另一个控制器（比如 Home 控制器视图）时，它运行良好！！

我检查了 xap 的存在，ISS 中的 MIME 类型一切都很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:56:25.943

由于某种未知的原因，我不得不写

```
<param name="source" value="<% = Url.Content("~/ClientBin/TakingMyPicture.xap") %>"/> 
```

而不是

```
<param name="source" value="~/ClientBin/TakingMyPicture.xap"/> 
```

# css - 如何以水平方式保持菜单链接

> ID：16119891
> 
> 赞同：0
> 
> 时间：2013-04-20T11:38:07.340
> 
> 标签：css

我厌倦了试图以水平方式保持菜单（家庭、照片、绘画）。这些链接以垂直方式出现，例如第一个家，然后是照片，然后是绘画。我不希望这些以垂直方式。我想保持水平。请帮助我

```
<style>
body{background:black}
li a{
    white-space: nowrap;
    color: transparent;
    display: block;
    text-transform: uppercase;
    text-align: center;
    text-shadow: 0px 0px 0px #fff;
    letter-spacing: 1px;
    -moz-transform: scale(0.5); 
    -ms-transform: scale(0.5); 
    -o-transform: scale(0.5); 
    -webkit-transform: scale(0.5); 
    transform: scale(0.5); 
    -webkit-transition: all 0.6s linear;
    -moz-transition: all 0.6s linear;
    -o-transition: all 0.6s linear;
    -ms-transition: all 0.6s linear;
    transition: all 0.6s linear;  text-decoration:none
}
li a:hover{
    text-shadow: 0px 0px 1px #fff;
    -moz-transform: scale(1); 
    -ms-transform: scale(1); 
    -o-transform: scale(1); 
    -webkit-transform: scale(1); 
    transform: scale(1); 
    text-decoration:none
}
li a:hover:before{content:"<"}
li a:hover:after{content:">"}

</style>
<ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">Photos</a></li>
    <li><a href="#">Paintings</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:39:22.937

使用`float`css 属性

```
li{
 float:left;
} 
```

[jsFiddle 演示](http://jsfiddle.net/mohammadAdil/9tuz7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:34:21.857

你也可以使用

```
li{
    display:inline-block;
} 
```

# scala - 解释在访问值时，与 Java 相比，Scala 中的循环行为如何

> ID：16119894
> 
> 赞同：0
> 
> 时间：2013-04-20T11:38:18.367
> 
> 标签：scala

在以下代码中：

```
val expression : String = "1+1";
     for (expressionChar <- expression) {
      println(expressionChar)
    } 
```

输出为“1+1”

在这里如何访问每个字符？Scala 的幕后发生了什么。使用 Java 我需要使用 .charAt 方法，但在 Scala 中不需要，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T13:05:03.103

在 scala 中，用于理解：

```
for (p <- e) dosomething 
```

将被翻译成

```
e.foreach { x => dosomething } 
```

您可以查看[Scala Reference](http://www.scala-lang.org/docu/files/ScalaReference.pdf) 6.19 了解更多详细信息。但是，`String`在 scala 中只是一个 Java `String`，它没有方法`foreach`。[但是Predef](http://www.scala-lang.org/api/current/index.html#scala.Predef%24)中定义了一个隐式转换，它转换`String`为[StringOps](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.StringOps)，它确实有一个`foreach`方法。

所以，最后代码`for(x <- "abcdef") println(x)`被翻译成：

```
Predef.augmentString("abcdef").foreach(x => println(x)) 
```

您可以查看 scala 参考或[Scala Views](http://www.scala-lang.org/node/130)以获取更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T12:12:00.223

```
scala> for (c <- "1+1") println(c)
1
+
1 
```

是相同的

```
scala> "1+1" foreach (c => println(c))
1
+
1 
```

Scalas for-comprehension 不是循环，而是对输入进行操作的高阶函数的组合。可以在[此处](https://stackoverflow.com/a/1059501/465304)阅读有关编译器如何翻译 for-comprehension 的规则。

此外，在 Scala 中，字符串是集合。在内部，它们只是普通的旧 Java 字符串，存在一些隐式转换，以赋予它们 Scala 集合库的全部功能。但对于用户来说，它们可以被视为集合。

在您的示例`foreach`中，遍历字符串的每个元素并对它们执行闭包（这是 for-comprehension 的主体或`foreach`调用中的参数）。

更多关于 for-comprehensions 的信息可以在[StackOverflow Scala 教程](https://stackoverflow.com/tags/scala/info)的第 7 节中找到。

# mysql - 不推荐使用带有隐式 DEFAULT 值的警告 TIMESTAMP

> ID：16119901
> 
> 赞同：4
> 
> 时间：2013-04-20T11:39:31.780
> 
> 标签：mysql

我再次需要你的帮助:)。我是 mysql 新手，今天当我决定做一些工作并启动 MySQL 服务器时，我收到以下警告

```
"[Warning] TIMESTAMP with implicit DEFAULT value is deprecated". 
```

我知道我应该在某个地方改变一些东西，但我不知道在哪里......我正在尝试通过在 bin 目录中执行 mysqld 文件来启动 MySQL 服务器。如果有人设法向我解释为什么 MySQL 服务器不想启动以及我能做什么，我将不胜感激......提前谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-25T07:29:08.560

您需要设置[explicit_defaults_for_timestamp](http://dev.mysql.com/doc/refman/5.6/en/server-system-variables.html#sysvar_explicit_defaults_for_timestamp)

1.  附加`--explicit_defaults_for_timestamp=#`到您的命令行。
2.  在您的选项文件 my.ini/my.cnf/etc - [Option-File Format](http://dev.mysql.com/doc/refman/5.0/en/option-files.html)中设置它。
3.  将其设置为系统变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T11:51:16.997

这是从 MySQL 5.5 升级到 MySQL 5.6 时引起的。看起来您的计算机上有多个版本的 mysql。阅读[此处](http://dev.mysql.com/doc/refman/5.6/en/upgrading-from-previous-series.html)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-25T06:50:01.320

如果您使用 mysql 5.6 并获得“不推荐使用带有隐式 DEFAULT 值的 [Warning] TIMESTAMP”。当你在命令行中使用 mysqld 时，不要担心，不要惊慌......你要做的就是进入开始菜单-> 程序-> mysql-> mysql server 5.6-> mysql 命令行客户端。（Windows）你会被要求输入密码，输入你的root密码。然后你会看到mysql> 直接开始创建数据库试试它很简单，但会解决你的问题......它解决了我的问题！

# exception - Jedis Pipeline Multi 抛出 ClassCastException

> ID：16119902
> 
> 赞同：0
> 
> 时间：2013-04-20T11:39:38.573
> 
> 标签：exception, pipeline, jedis

```
public class JedisPipeline {
    private static JedisPool pool = new JedisPool(new JedisPoolConfig(), "127.0.0.1", 6379);
    public static void main(String args[]){

        Jedis jedis = pool.getResource();
        Pipeline pipeline = jedis.pipelined();
        pipeline.multi();
        //pipeline.hmset("Id", new HashMap<String,String>() );
        for(int i=0; i < 1000 ; i++){
            pipeline.hincrBy("Id", i+"", i);
        }
        pipeline.exec();
        pool.returnResource(jedis);
        //pool.destroy();

        //pool = new JedisPool(new JedisPoolConfig(), "127.0.0.1", 6379);
        jedis = pool.getResource();
        Map<String,String> map1 = jedis.hgetAll("Id");
        System.out.println("map1------->"+map1);
        pool.returnResource(jedis);
        //pool.destroy();

    }
} 
```

我在上面的代码中有问题。它抛出一个 ClassCastException，就好像我破坏了池并创建了一个新的池对象，它可以正常工作。我是否正确使用了 Pipeline API？谁能帮我 ？我正在使用 Jedis 2.1.0

```
Exception in thread "main" java.lang.ClassCastException: [B cannot be cast to java.util.List
    at redis.clients.jedis.Connection.getBinaryMultiBulkReply(Connection.java:189)
    at redis.clients.jedis.Jedis.hgetAll(Jedis.java:861)
    at com.work.jedisex.JedisFactory.main(JedisFactory.java:59) 
```

**修改代码以获取抛出异常的 Map**

```
Response<Map<String,String>> map1 = pipeline.hgetAll("Id");
pipeline.exec();
pipeline.sync();
pool.returnResource(jedis);
Map<String,String> map2 = map1.get(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T13:17:07.200

看起来管道在 exec() 调用后没有关闭。因此，当您尝试在 returnResource 之后重用相同的 Jedis 对象时，它仍然包含来自先前操作的 pipelinedResponses。

尝试这样做：

```
 pipeline.exec();
    pipeline.sync();
    pool.returnResource(jedis); 
```

sync() 调用应该关闭管道。

# java - 以某个字符串开头的字符串的正则表达式

> ID：16119905
> 
> 赞同：0
> 
> 时间：2013-04-20T11:39:40.750
> 
> 标签：java, regex

我有一些字符串，它有这种类型：（`(notice)Any_other_string`注意：`()`在这个字符串中有。

所以，我想将此字符串分成 2 部分 :`(notice)`和其余部分。我这样做：

```
private static final Pattern p1 = Pattern.compile("(^\\(notice\\))([a-z_A-Z1-9])+");
String content = "(notice)Stack Over_Flow 123";

        Matcher m = p1.matcher(content);

        System.out.println("Printing");

        if (m.find()) {
            System.out.println(m.group(0));
            System.out.println(m.group(1));
        } 
```

我希望结果是`(notice)`and `Stack Over_Flow 123`，但结果是 : `(notice)Stack`and`(notice)`

我无法解释这个结果。哪个正则表达式适合我的目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:41:41.983

问题 1：`group(0)`将始终返回**整个**匹配 - 这在[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#group%28int%29)中指定- 实际捕获组从索引 1 开始。只需将其替换为以下内容：

```
System.out.println(m.group(1));
System.out.println(m.group(2)); 
```

问题 2：您没有考虑空格和其他字符，例如下划线（甚至是数字 0）。我建议使用点 ,`.`来匹配未知字符。或者包括`\\s`（空白）并`_`进入你的正则表达式。以下任一正则表达式都应该起作用：

```
(^\\(notice\\))(.+)
(^\\(notice\\))([A-Za-z0-9_\\s]+) 
```

请注意，您需要捕获组内的 + ，否则它只会找到第二部分的最后一个字符。

# sql - 选择满足某些条件并在某一列中具有最大值的行

> ID：16119906
> 
> 赞同：4
> 
> 时间：2013-04-20T11:39:57.310
> 
> 标签：sql, postgresql, greatest-n-per-group

我有一个用于更新软件包的元数据表。该表有列`id, name, version`。我想选择名称是某个给定名称列表之一的所有行，并且版本是具有该名称的所有行的最大值。

例如，给定这些记录：

```
+----+------+---------+
| id | name | version |
+----+------+---------+
| 1  | foo  | 1       |
| 2  | foo  | 2       |
| 3  | bar  | 4       |
| 4  | bar  | 5       |
+----+------+---------+ 
```

还有一个任务“给我最高版本的记录“foo”和“bar”，我希望结果是：

```
+----+------+---------+
| id | name | version |
+----+------+---------+
| 2  | foo  | 2       |
| 4  | bar  | 5       |
+----+------+---------+ 
```

到目前为止，我想出的是使用嵌套查询：

```
SELECT * 
  FROM updates 
  WHERE (
    id IN (SELECT id 
             FROM updates 
             WHERE name = 'foo' 
             ORDER BY version DESC 
             LIMIT 1)
  ) OR (
    id IN (SELECT id 
             FROM updates 
             WHERE name = 'bar' 
             ORDER BY version DESC 
             LIMIT 1)
  ); 
```

这有效，但感觉不对。如果我想过滤更多名称，我必须多次复制整个子查询。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T11:43:46.003

```
select distinct on (name) id, name, version
from metadata
where name in ('foo', 'bar')
order by name, version desc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-20T11:44:29.567

`NOT EXISTS`是一种避免不需要的*次优*元组的方法：

```
SELECT * 
FROM updates uu
WHERE uu.zname IN ('foo', 'bar')
AND NOT EXISTS (
    SELECT *
    FROM updates nx
    WHERE nx.zname = uu.zanme
    AND nx.version > uu.version
    ); 
```

注意：我替换`name`为`zname`，因为它*或多或少*是 postgresql 中的一个关键字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-20T11:48:15.050

重读Q后更新：

> 我想选择名称是某个给定名称列表之一的**所有行，并且版本是****具有该名称**的所有行的最大值。

如果可能存在关联（每个 具有最大版本的多行`name`），您可以在子查询中使用窗口函数[`rank()`](http://www.postgresql.org/docs/current/interactive/functions-window.html)。需要 PostgreSQL 8.4+。

```
SELECT *
FROM  (
   SELECT *, rank() OVER (PARTITION BY name ORDER BY version DESC) AS rnk
   FROM   updates 
   WHERE  name IN ('foo', 'bar')
   )
WHERE rnk = 1; 
```

# c++ - 按下按钮时 Gtkmm scroll_event 不起作用

> ID：16119911
> 
> 赞同：3
> 
> 时间：2013-04-20T11:40:46.240
> 
> 标签：c++, events, gtk, signals, gtkmm

我有一个 Gtk::EventBox 连接了两个事件：button_press_event 和 scroll_event。所有这两个事件都可以正常工作，但是当我按住鼠标按钮时，不会发出滚动事件。

我在课堂上实现了这两个函数`bool on_button_press_event (GdkEventButton *e)`和`bool on_scroll_event (GdkEventScroll *e)`. 这两个函数返回`false`以进一步传播事件。

我正在使用 gtkmm3。

我怎么解决这个问题？

重现问题的代码示例：

```
#include <gtkmm.h>
#include <iostream>

class MyWindow : public Gtk::Window
{
  Gtk::EventBox event_box;
  Gtk::ScrolledWindow scrolled;
public:
  bool on_button_press_event(GdkEventButton *b)
  {
    std::cout << "button press" << std::endl;
    return false;
  }

  bool on_scroll_event(GdkEventScroll *e)
  {
    std::cout << "scrollEvent" << std::endl;
    return false;
  }

  MyWindow ()
  {
    add(scrolled);
    scrolled.add(event_box);
    set_default_size(640, 480);
    show_all();
  }
};

int main(int argc, char** argv)
{
  Gtk::Main kit(argc, argv);
  MyWindow window;
  kit.run(window);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T09:27:12.287

看起来在 Windows 上，scrolledWindow 是监视滚动事件而不是主窗口的正确位置。

使用以下修改，我能够在 Windows 7 上处理滚动事件。

```
#include <gtkmm.h>
#include <iostream>

class MyScrolledWindow : public Gtk::ScrolledWindow
{
public:
  bool on_scroll_event(GdkEventScroll *e)
  {
    std::cout << "scrollEvent" << std::endl;
    return false;
  }

  MyScrolledWindow()
  {
  }
};

class MyWindow : public Gtk::Window
{
  Gtk::EventBox event_box;
  MyScrolledWindow scrolled;
public:
  bool on_button_press_event(GdkEventButton *b)
  {
    std::cout << "button press" << std::endl;
    return false;
  }

  MyWindow ()
  {
    add(scrolled);
    scrolled.add(event_box);
    set_default_size(640, 480);
    show_all();
  }
};

int main(int argc, char** argv)
{
  Gtk::Main kit(argc, argv);
  MyWindow window;
  kit.run(window);
  return 0;
} 
```

====== 旧答案：=================

我无法重现您的问题。这是我用来尝试重现您的问题的代码：

```
#include <gtkmm.h>
#include <iostream>

class MyEventBox : public Gtk::EventBox
{
  bool on_button_press_event(GdkEventButton *b)
  {
    std::cout << "button press" << std::endl;

    return false;
  }

  bool on_scroll_event(GdkEventScroll *e)
  {
    std::cout << "scrollEvent" << std::endl;

    return false;
  }
};

int main(int argc, char** argv)
{
  Gtk::Main kit(argc, argv);
  Gtk::Window window;
  MyEventBox eventBox;

  eventBox.show();
  window.add(eventBox);

  kit.run(window);

  return 0;
} 
```

对于编译，我使用了以下命令行（使用 Linux）：

`g++ main.cpp $(pkg-config --cflags --libs gtkmm-3.0)`

*   如果您可以使用此最小示例重现您的问题，则该问题可能是特定于平台的，并且可能需要使用窗口/事件框的解决方法`Gdk::Window`。
*   如果您无法使用此代码重现您的问题，则该问题是在您的代码中的其他地方引起的，您需要发布更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-28T13:06:40.833

您显示的示例代码有两个问题。

*   首先，你说“我有一个连接了两个事件的 Gtk::EventBox”。但是在您的示例中，您连接到 MyWindow 的事件，而未连接 EventBox 的事件。

*   EventBox 允许您接收事件，但您仍然必须明确说明要接收*哪些事件。*

这是更正后的代码：

```
#include <gtkmm.h>
#include <iostream>

class MyWindow : public Gtk::Window
{
  Gtk::EventBox event_box;

  bool event_box_button_press(GdkEventButton *b)
  {
    std::cout << "button press" << std::endl;
    return false;
  }

  bool event_box_scroll(GdkEventScroll *e)
  {
    std::cout << "scrollEvent" << std::endl;
    return false;
  }

public:
  MyWindow ()
  {
    event_box.add_events(Gdk::BUTTON_MOTION_MASK);
    event_box.add_events(Gdk::SCROLL_MASK);

    event_box.signal_button_press_event().connect(
        sigc::mem_fun(*this, &MyWindow::event_box_button_press));
    event_box.signal_scroll_event().connect(
        sigc::mem_fun(*this, &MyWindow::event_box_scroll));

    add(event_box);

    set_default_size(640, 480);
    show_all();
  }
};

int main(int argc, char** argv)
{
  Gtk::Main kit(argc, argv);
  MyWindow window;
  kit.run(window);
  return 0;
} 
```

关于此代码的一些注释：

*   我省略了 ScrolledWindow，因为这与示例无关。您不需要它来捕获滚动事件。如果您的应用程序确实需要滚动窗口，您可以将其添加回来。

*   如果您派生具有所需行为的自定义 EventBox，则代码可能会更整洁。我这样做不是为了更接近您的原始代码。

*   有关连接信号和东西的信息，请参阅[本文档。](https://developer.gnome.org/gtkmm-tutorial/3.2/sec-connecting-signal-handlers.html.en)`sigc::mem_fun`

# c# - WinRT FlipView 绑定可能失败

> ID：16119915
> 
> 赞同：0
> 
> 时间：2013-04-20T11:41:16.763
> 
> 标签：c#, xaml, windows-runtime, flipview

我有一个 xaml 页面：

```
<Page x:Class="DailyStyleW8.MainPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:DailyStyleW8"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:converters="using:DataTypes"
      mc:Ignorable="d">

  <Page.Resources>
    <converters:PortableImageConverter x:Key="ImageConverter" />
  </Page.Resources>

  <Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <Grid>
      <ProgressBar x:Name="loadingViewer"
                   IsIndeterminate="True"
                   Height="20" />
      <FlipView x:Name="displayViewer"
                ItemsSource="{Binding}"
                Visibility="Collapsed">
        <FlipView.ItemTemplate>
          <DataTemplate>
            <Grid>
              <Image Source="{Binding Image,Converter={StaticResource ImageConverter}}" />
              <TextBlock Text="{Binding Name}" />
            </Grid>
          </DataTemplate>
        </FlipView.ItemTemplate>
      </FlipView>
    </Grid>
  </Grid>
</Page> 
```

并在文件后面的代码中：

```
using DailyStyleApp;
using PortableAPI;
using System;
using Windows.UI.Xaml.Controls;
using Windows.UI.Xaml.Navigation;

namespace DailyStyleW8
{
    /// <summary>
    /// Display a list of recent updates to the user
    /// </summary>
    public sealed partial class MainPage : Page
    {
        Controller controller = new Controller();

        public MainPage()
        {
            this.InitializeComponent();
        }

        /// <summary>
        /// Invoked when this page is about to be displayed in a Frame.
        /// </summary>
        /// <param name="e">Event data that describes how this page was reached.  The Parameter
        /// property is typically used to configure the page.</param>
        protected override void OnNavigatedTo(NavigationEventArgs e)
        {
            LoadContent();
        }

        private async void LoadContent()
        {
            var viewModel = await controller.GetMultiDayAsync(DateTime.Now, PortableAPIProvider.Storage.ReadFromSettings<int>("CacheDuration", 7));
            displayViewer.ItemsSource = viewModel.Items;
            displayViewer.Visibility = Windows.UI.Xaml.Visibility.Visible;
            loadingViewer.Visibility = Windows.UI.Xaml.Visibility.Collapsed;
        }
    }
} 
```

现在，当我运行代码时，`LoadContent`函数被正确调用并且`viewModel`对象被正确形成。如果我注释掉该行`displayViewer.ItemsSource = viewModel.Items;`，则`ProgressBar`可见性会按照您的预期进行更改。

当保留该行并逐步遍历`LoadContent`方法内的所有 4 行时，运行该方法，但是`FlipView`不会使用新项目进行更新，并且`ProgressBar`可见性不会更改。`viewModel.Items`是类型`List<T>`。

我什至确定要在这里寻找什么。我猜 XAML 和我的绑定有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T15:56:17.737

与此问题相关的问题实际上与应用程序中的另一段代码有关。在其他地方，我有一系列锁定 UI 线程的 async / await 调用。

这阻止了调度程序触发异步回调。问题的简短解决方案：永远不要在从 UI 线程调用的东西上调用 await（而不是通过另一个异步调用）。

# c - 在 CUDA 中使用常量

> ID：16119923
> 
> 赞同：13
> 
> 时间：2013-04-20T11:41:56.247
> 
> 标签：c, cuda, constants, nvidia

在 CUDA 中使用常量的最佳方式是什么？

一种方法是在常量内存中定义常量，例如：

```
// CUDA global constants
__constant__ int M;

int main(void)
{
    ...
    cudaMemcpyToSymbol("M", &M, sizeof(M));
    ...
} 
```

另一种方法是使用 C 预处理器：

```
#define M = ... 
```

我认为用 C 预处理器定义常量要快得多。那么在 CUDA 设备上使用常量内存有哪些好处呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-08T18:41:15.843

1.  在编译时已知的常量应该使用预处理器宏（例如`#define`）或通过全局/文件范围的 C/C++`const`变量来定义。
2.  [`__constant__`内存](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#constant)的使用对于使用在内核期间不会改变的某些值并且存在某些访问模式的程序可能是有益的（例如，所有线程同时访问相同的值）。这并不比满足上述第 1 项要求的常数更好或更快。
3.  如果程序要做出的选择数量相对较少，并且这些选择会影响内核执行，则一种可能的额外编译时优化方法是使用[模板化代码/内核](https://stackoverflow.com/questions/6179295/if-statement-inside-a-cuda-kernel/6179580#6179580)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-09T03:04:48.073

常规 C/C++ 样式常量：在 CUDA C（本身是 C99 的修改）中，常量是绝对编译时实体。考虑到 GPU 处理的性质，NVCC 中发生的优化量非常重要，这不足为奇。

`#define`: 宏总是很不优雅，但在紧要关头很有用。

然而，`__constant__`变量说明符是一种全新的动物，在我看来有点用词不当。我将在下面的空白处记下 Nvidia[的内容：](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#constant)

> 限定词，可选地与`__constant__`一起使用 `__device__`，声明一个变量：
> 
> *   驻留在恒定的内存空间中，
> *   具有应用程序的生命周期，
> *   可从网格内的所有线程和主机通过运行时库 (cudaGetSymbolAddress() / cudaGetSymbolSize() / cudaMemcpyToSymbol() / cudaMemcpyFromSymbol()) 访问。

Nvidia 的文档指定它`__constant__`以**寄存器**级别的速度（接近零延迟）可用，前提是它是一个扭曲的所有线程访问的相同常量。

它们在 CUDA 代码中的全局范围内声明。但是，根据个人（和当前正在进行的）经验，当涉及到单独编译时，您必须小心使用此说明符，例如通过在 C 中放置包装函数将 CUDA 代码（.cu 和 .cuh 文件）与 C/C++ 代码分开样式的标题。

然而，与传统的“常量”指定变量不同，这些变量是在运行时从分配设备内存并最终启动内核的主机代码初始化的。我再说一遍，我目前正在工作的代码演示**这些可以**在内核执行之前使用 cudaMemcpyToSymbol() 在运行时设置。

考虑到保证访问的 L1 缓存级速度，至少可以说它们非常方便。

# java - 如何将来自 servlet 的请求转发到 struts2 的操作？

> ID：16119925
> 
> 赞同：10
> 
> 时间：2013-04-20T11:42:01.680
> 
> 标签：java, servlets, struts2, dispatcher

我想像这样使用这样的方式将请求从**Servlet**转发到**Action**`RequestDispacher`

```
RequestDispatcher dispatcher=request.getRequestDispatcher("hello.action");
dispatcher.include(request, response); 
```

它不工作。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T18:30:40.147

为了做到这一点，您可能还需要将过滤器设置为在 FORWARD 上运行（并且如您的代码所示，包括，尽管您声明您想要一个 FORWARD）：

```
<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
  <dispatcher>REQUEST</dispatcher> 
  <dispatcher>FORWARD</dispatcher>
  <dispatcher>INCLUDE</dispatcher> <!-- If you want includes as well -->
</filter-mapping> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-20T11:47:32.540

使用 servlet 中的代码

```
getServletContext().getRequestDispatcher("/hello.action").forward(request, response); 
```

您还配置了 struts2 过滤器以接受转发请求

```
<filter>
  <filter-name>struts2</filter-name>
  <filter-class>
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter
  </filter-class>
</filter>
<filter-mapping>
  <filter-name>struts2</filter-name>
  <url-pattern>/*</url-pattern>
  <dispatcher>REQUEST</dispatcher>
  <dispatcher>FORWARD</dispatcher>
</filter-mapping> 
```

# sql-server - 支付分析 - SQL server 查询

> ID：16119928
> 
> 赞同：0
> 
> 时间：2013-04-20T11:42:19.513
> 
> 标签：sql-server, sql-server-2008

请有人能给我一些指示。

我们需要发出法定欠款通知。

发送它的标准是当一个帐户错过了 2 次全额付款或同等金额。即，如果他们应每月支付 100 英镑，但在 4 个月内只支付了 50 英镑，则他们应收到通知。

我已经提取了一个查询，该查询将还款计划分为多个日期范围，并且在每个范围之间我已经计算了该期间内的付款。同样对于每个结果，我都统计了 DueToDate 和 PaidToDate。

我遇到的问题是为每一行制定某种形式的评分系统，然后在查询结束时，计算出一个总分，以确定通知是否到期。

结果结构是这样的。

```
DueDate | DateFrom | DateTo | AmountDue | AmountPaid | DueToDate | PaidToDate 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:53:21.523

如果您的意思是您*已经*有一个生成如下结果集的查询

```
DueDate | DateFrom | DateTo | AmountDue | AmountPaid | DueToDate | PaidToDate
20120301 | 20120201 | 20120229 | 100.00 | 50.00 | 100.00 | 50.00
20120401 | 20120301 | 20120331 | 100.00 | 50.00 | 200.00 | 100.00
20120501 | 20120401 | 20120430 | 100.00 | 50.00 | 300.00 | 150.00
20120601 | 20120501 | 20120531 | 100.00 | 50.00 | 400.00 | 200.00 
```

那么这里有两种前进方式，具体取决于每月的 AmountDue 是否恒定。如果是，那么您可以使用

```
select *
from QueryResult
where DueToDate - PaidToDate >= 2 * AmountPaid; 
```

如果它不是常数，那么您可以使用 SQL Server 2012 中的 LAG() 将前一行中的 AmountPaid 添加到当前行

```
;WITH Lagged AS (
  select *, PriorAmount = LAG(AmountPaid, 1, 0) OVER (order by DueDate)
  from QueryResult
)
select *
from Lagged
where DueToDate - PaidToDate >= AmountPaid + PriorAmount; 
```

或者只是在原始查询的另一列中保留一个运行总计，例如

```
DueDate | DateFrom | DateTo | AmountDue | AmountPaid | DueToDate | PaidToDate | TwoPeriods
20120301 | 20120201 | 20120229 | 100.00 | 50.00 | 100.00 |  50.00 | 100.00
20120401 | 20120301 | 20120331 | 100.00 | 50.00 | 200.00 | 100.00 | 200.00
20120501 | 20120401 | 20120430 | 100.00 | 50.00 | 300.00 | 150.00 | 200.00
20120601 | 20120501 | 20120531 | 100.00 | 50.00 | 400.00 | 200.00 | 200.00 
```

# javascript - Javascript点击计数并提交到文本区域

> ID：16119931
> 
> 赞同：0
> 
> 时间：2013-04-20T11:42:40.473
> 
> 标签：javascript, click, counter

我对编码相当陌生，并且正在尝试学习制作 Chrome 插件以向网站添加一些功能。我一直在努力寻找这个问题的答案，并搜索并提出了很多不同的选择，但我无法弄清楚我所追求的东西。

我正在寻找的是一个脚本，它允许我计算 5 个不同按钮的点击次数，然后通过“提交”按钮将它们发送到文本区域。

[A] [B] [C] [D] [E] [发送]

因此，如果我要单击按钮 A 两次、C 一次和 E 三次，然后单击“发送”，它会将其发送到我的 textarea，它会显示“Counted A2 C1 E3”并忽略任何未单击的内容。作为奖励，当文本发送到 textarea 时，它是否有可能自动提交？

希望这是有道理的，我期待着我能得到的任何帮助。

问候， 帕津加

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:05:39.553

这段代码更好，你可以有尽可能多的按钮！

更新：修复键未排序的错误（例如：Counted E3 C1 A2）

```
<html>
<head>  
<script>
    var list = {};
    function increaseCounter(variable) {
        if(!list[variable])
            list[variable]=1;
        else
            list[variable]++;
    }
    function send() {
        var keys = [];
        for(x in list)
            keys.push([x,list[x]]);
        keys.sort();

        var s = "Counted", i;
        for( i = 0; i < keys.length; i++)
            s += " " + keys[i][0] + keys[i][1];
        document.getElementById('textarea').value = s;
    }
</script>
</head>
<body>
<textarea id="textarea"></textarea>

<button onclick="increaseCounter('A')">A</button>
<button onclick="increaseCounter('B')">B</button>
<button onclick="increaseCounter('C')">C</button>
<button onclick="increaseCounter('D')">D</button>
<button onclick="increaseCounter('E')">E</button>

<button onclick="send()">Send</button>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T12:05:43.677

你可以在这里找到一个可能的解决方案：http: [//jsfiddle.net/jrm2k6/gv8vZ/](http://jsfiddle.net/jrm2k6/gv8vZ/)

您可以在方便时对其进行修改。

这是使用的html：

```
<button type="button" id="a">A</button>
<button type="button" id="b">B</button>
<button type="button" id="c">C</button>
<button type="button" id="d">D</button>
<button type="button" id="e">E</button>
<textarea rows="5" cols="40" id="results">
</textarea> 
```

还有js部分：

```
var buttonClicked = {"a":0, "b":0, "c":0, "d":0, "e":0};

$("button").click(function() {
  $("#results").text('');
  var clickedId = $(this).attr('id');
  buttonClicked[clickedId] +=1
  displayCounter();
});

function displayCounter()
{

    for(var elem in buttonClicked)
    {
        if (buttonClicked[elem] != 0)
        {
            $("#results").append(elem + " clicked " + buttonClicked[elem] + "\n");
        }
    }
} 
```

**编辑**：这很好用，但[TNW](https://stackoverflow.com/users/2277221/tnw)提供了另一种更通用的方法，这里是小提琴[http://jsfiddle.net/xRMRP/](http://jsfiddle.net/xRMRP/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:51:28.637

试试下面的代码，它会帮助你：

```
<html>
<head>  

 <script>

  var A = 0;
    var B = 0;
    var C = 0;
    var D = 0;
    var E = 0;

    function increaseCounter(variable) {
        switch (variable) {
            case 'A':
                A++;
                break;
            case 'B':
                B++;
                break;
            case 'C':
                C++;
                break;
            case 'D':
                D++;
                break;
            case 'E':
                E++;
                break;
        }
    }

    function send() {

        var text='Counted ';
        if(A>0){
            text+=' A'+A;
        }
        if(B>0){
            text+=' B'+B;
        }
        if(C>0){
            text+=' C'+C;
        }
        if(D>0){
            text+=' D'+D;
        }
        if(E>0){
            text+=' E'+E;
        }
        document.getElementById('textarea').value =text;
    }
</script>
</head>
<body>
<textarea id="textarea"></textarea>

<button onclick="increaseCounter('A')">A</button>
<button onclick="increaseCounter('B')">B</button>
<button onclick="increaseCounter('C')">C</button>
<button onclick="increaseCounter('D')">D</button>
<button onclick="increaseCounter('E')">E</button>

<button onclick="send()">Send</button>
</body>
</html> 
```

# java - JAVA & GSSAPI：清除缓存

> ID：16119934
> 
> 赞同：1
> 
> 时间：2013-04-20T11:42:46.307
> 
> 标签：java, security, active-directory, kerberos, gssapi

我编写了一个简单的 java 应用程序，它使用 GSSAPI 来连接到 Active Directory (Kerberos SSO)。

我有 2 个领域和 KDC：x 和 y。

如果我将使用领域/KDC x 运行该工具 - 该工具将起作用。

如果我将使用领域/KDC y 运行该工具 - 该工具也可以工作。

如果我将运行该工具以使用领域/KDC x（登录、注销、登录、注销）执行 2 次身份验证 - 有效。

领域/KDC y 的结果相同。

问题是当我尝试在两个领域/KDC 之间切换时：登录 x、注销 x、登录 y、注销 y - 尝试登录第二个时抛出异常：

GSSException：机制级别：消息流已修改 (41))

只是为了澄清 - 只有当我使用 2 个不同的领域/KDC（当然每次一个），而不在这两个之间重新启动整个应用程序时，才会出现问题。

我认为 java/gssapi 以某种方式缓存了领域或 krb 票证或其他东西。

问题是我怎样才能清除这个缓存（而不杀死整个应用程序），或者如果没有这样的缓存/静态变量，我怎样才能让它工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T20:06:29.223

您的问题可能是`krb5.conf`文件错误。请参见此处：[GSSException：消息流已修改 (41)](https://stackoverflow.com/questions/15932361/gssexception-message-stream-modified-41)

发布您的全部`krb5.conf`罚款和访问的 SPN。

# android - Android：如何在正在运行的活动中通过调用 onResume 中的 getIntent() 来获取 NFC 触发的最新意图？

> ID：16119938
> 
> 赞同：0
> 
> 时间：2013-04-20T11:43:07.003
> 
> 标签：android, android-intent, android-activity, nfc

我刚开始使用 NFC 标签进行 Android 应用程序开发。该应用程序包含一个活动，即**MainActivity**。

**MainActivity**从 NFC 标签中读取数据。我想让它通过在***onResume中使用******getIntent()***从最新检测到的标签中读取来获取最新的意图。我确实覆盖***了 onNewIntent(Intent intent)***并在其中调用***setIntent(intent)***，并为**MainActivity设置了****“singleTop”** launchMode 。

 *******但是，当检测到标签时，系统将调用***onResume()***，并且永远不会调用***onNewIntent()***。***onResume***中的***getIntent()***将始终返回**动作 MAIN**的意图，这是第一次启动**MainActivity**时使用的原始意图。

 *****有没有办法在***onResume()***中获取包含动作**NDEF_DISCOVERED**的意图？为什么不调用***onNewIntent***？

 **我有以下代码：（scala，只是把它读成java）

MainActivity 的 onNewIntent

```
override def onNewIntent (intent: Intent):Unit = {
  super.onNewIntent(intent)
  setIntent(intent)
} 
```

onResume()

```
override def onResume () :Unit = {
  super.onResume()
  var action:String = getIntent().getAction() // always get action MAIN
      ... } 
```

清单.xml

```
 <activity
        android:name="com.test.tagwriter.MainActivity"
        android:label="@string/app_name"
        android:launchMode="singleTop" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <!-- NFC intent filters -->
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />

            <data android:mimeType="application/com.distributed.dmv" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TECH_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED" />
        </intent-filter>

        <meta-data
            android:name="android.nfc.action.TECH_DISCOVERED"
            android:resource="@xml/nfc_tech_filter" />
    </activity> 
```**************

# android - Android如何定期更新列表视图

> ID：16119939
> 
> 赞同：2
> 
> 时间：2013-04-20T11:43:13.700
> 
> 标签：android, listview, scheduled-tasks, updating

我有一个在我的列表视图中使用的数组适配器。通过从服务器获取或删除内容来定期更新适配器。我使用了一个调度线程池执行器来定期更新适配器，然后使用 adapter.notifydatasetchange();

列表视图被刷新并删除任何项目等，但例如，如果当我在 android 上滚动列表视图并接近列表视图的末尾时从列表中删除了两个项目，则应用程序崩溃。我猜列表视图中的某些内容没有更新，并且列表的大小是初始大小。

你有什么要推荐的吗？

问候， 阿里斯

大家好，

我实际上找到了解决问题的方法，但忘记在此处查看是否有任何回复。谢谢大家的建议。基本上调度的threadpoolexecutor调用了一个runnable（我们称之为updateRunnable）来进行更新。我所做的如下：在updateRunnable中，当它获取新数据并将它们存储在数组适配器中时，它然后使用runOnUiThread调用另一个runnable（我们称之为updateListView），在updateListView中我设置了listview的适配器。这解决了我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:03:48.127

如果您的数据完全类似于数据库，我假设您使用 ListView，那么您需要将后台服务重构为使用 a`ContentProvider`并`SyncAdapter`与服务器保持同步的模型，然后自动通知ListView 通过将其与`CursorAdapter`使用其实现的a 绑定`ContentObserver`来在底层 DB 更改时自动更新列表。

[为什么 ContentResolver.requestSync 不触发同步？](https://stackoverflow.com/questions/5253858/why-does-contentresolver-requestsync-not-trigger-a-sync/5255360#5255360)告诉你如何设置 ContentProvider。

[如何处理 REST 调用、数据持久性、同步和观察 ContentProvider](https://stackoverflow.com/questions/11160242/how-to-handle-rest-calls-data-persistence-syncing-and-observing-contentprovide/12479626#12479626)会告诉您更多关于列表更新通知在`ContentProvider`同步后如何操作的信息。

建立起来需要大量的基础设施工作，但是一旦你完成了，模型中就会有很多非常自动化的东西`SyncAdapter`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T13:58:12.710

我曾经遇到过类似的问题。由于 ListView 不断更新，您可以

1) 就像活动在 OnCreate 中开始一样显示 Listview，并且

2）调用这个相同的活动，以便在列表视图中显示刷新的数据。

但是在再次调用相同的活动后，首先立即完成（）当前实例，因为您可以一个接一个地获取它的多个实例。

# c++ - 我应该如何以及何时将倾斜指针与 cuda API 一起使用？

> ID：16119943
> 
> 赞同：59
> 
> 时间：2013-04-20T11:43:33.153
> 
> 标签：c++, cuda

`cudaMalloc()`我对如何使用和分配和复制线性内存有很好的理解`cudaMemcpy()`。然而，当我想使用 CUDA 函数来分配和复制 2D 或 3D 矩阵时，我经常被各种参数弄糊涂，尤其是在处理 2D/3D 数组时总是存在的倾斜指针。该文档很好地提供了一些关于如何使用它们的示例，但它假设我熟悉填充和间距的概念，而我并不熟悉。

我通常最终会调整我在文档或网络上其他地方找到的各种示例，但随后的盲目调试非常痛苦，所以我的问题是：

什么是音高？我该如何使用它？如何在 CUDA 中分配和复制 2D 和 3D 数组？

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2013-04-20T11:43:33.153

这是关于 CUDA 中的倾斜指针和填充的解释。

## 线性内存与填充内存

首先，让我们从非线性内存存在的原因说起。当使用 cudaMalloc 分配内存时，结果就像使用 malloc 分配一样，我们有一个指定大小的连续内存块，我们可以在其中放入任何我们想要的东西。如果我们想分配一个 10000 浮点数的向量，我们只需这样做：

```
float* myVector;
cudaMalloc(&myVector, 10000*sizeof(float)); 
```

然后通过经典索引访问 myVector 的第 i 个元素：

```
float element = myVector[i]; 
```

如果我们想访问下一个元素，我们只需：

```
float next_element = myvector[i+1]; 
```

它工作得很好，因为访问第一个元素旁边的元素（出于我不知道的原因，我现在不希望这样做）很便宜。

当我们将内存用作二维数组时，情况会有所不同。假设我们的 10000 浮点向量实际上是一个 100x100 数组。我们可以使用相同的 cudaMalloc 函数来分配它，如果我们想读取第 i 行，我们这样做：

```
float* myArray;
cudaMalloc(&myArray, 10000*sizeof(float));
int row[100];  // number of columns
for (int j=0; j<100; ++j)
    row[j] = myArray[i*100+j]; 
```

# 字对齐

所以我们必须从 myArray+100*i 读取内存到 myArray+101*i-1。它将执行的内存访问操作数取决于该行占用的内存字数。内存字中的字节数取决于实现。为了在读取单行时最小化内存访问次数，我们必须确保我们从单词的开头开始行，因此我们必须为每一行填充内存，直到新行的开头。

# 银行冲突

填充数组的另一个原因是 CUDA 中的存储库机制，涉及共享内存访问。当数组在共享内存中时，它被分成几个内存库。两个 CUDA 线程可以同时访问它，前提是它们不访问属于同一内存库的内存。由于我们通常希望并行处理每一行，因此我们可以通过将每一行填充到新银行的开头来确保可以模拟访问它。

现在，我们将使用 cudaMallocPitch，而不是使用 cudaMalloc 分配 2D 数组：

```
size_t pitch;
float* myArray;
cudaMallocPitch(&myArray, &pitch, 100*sizeof(float), 100);  // width in bytes by height 
```

请注意，这里的音高是函数的返回值：cudaMallocPitch 检查它在您的系统上应该是什么并返回适当的值。cudaMallocPitch 的作用如下：

1.  分配第一行。
2.  检查分配的字节数是否使其正确对齐。例如，它是 128 的倍数。
3.  如果不是，则分配更多字节以达到 128**的下一个倍数。间距是为单行分配的字节数，包括额外字节（填充字节）。**
4.  重申每一行。

最后，我们通常分配了比需要更多的内存，因为现在每一行都是 pitch 的大小，而不是`w*sizeof(float)`.

但是现在，当我们想要访问列中的元素时，我们必须这样做：

```
float* row_start = (float*)((char*)myArray + row * pitch);
float column_element = row_start[column]; 
```

两个连续列之间的字节偏移量不能再从我们数组的大小中推断出来，这就是为什么我们要保持 cudaMallocPitch 返回的音高。而且由于音高是填充大小的倍数（通常是字大小和库大小中的最大值），所以效果很好。耶。

## 将数据复制到/从音高内存

现在我们知道如何创建和访问由 cudaMallocPitch 创建的数组中的单个元素，我们可能希望将它的整个部分复制到其他内存或从其他内存中复制，无论是否是线性的。

假设我们想用 malloc 将我们的数组复制到我们的主机上分配的 100x100 数组中：

```
float* host_memory = (float*)malloc(100*100*sizeof(float)); 
```

如果我们使用 cudaMemcpy，我们将复制使用 cudaMallocPitch 分配的所有内存，包括每行之间的填充字节。为了避免填充内存，我们必须做的是逐行复制。我们可以手动完成：

```
for (size_t i=0; i<100; ++i) {
  cudaMemcpy(host_memory[i*100], myArray[pitch*i],
             100*sizeof(float), cudaMemcpyDeviceToHost);
} 
```

或者我们可以告诉 CUDA API，为了方便起见，我们只需要使用填充字节分配的内存中的有用内存，*所以*如果它可以自动处理自己的混乱，那确实非常好，谢谢。这里进入 cudaMemcpy2D：

```
cudaMemcpy2D(host_memory, 100*sizeof(float)/*no pitch on host*/,
             myArray, pitch/*CUDA pitch*/,
             100*sizeof(float)/*width in bytes*/, 100/*heigth*/, 
             cudaMemcpyDeviceToHost); 
```

现在复制将自动完成。它将复制宽度（此处：100xsizeof(float)）、高度时间（此处：100）、跳过*间距指定的字节数*每次跳转到下一行时的字节数。请注意，我们仍然必须为目标内存提供音高，因为它也可以被填充。这里不是，所以间距等于非填充数组的间距：它是一行的大小。另请注意，memcpy 函数中的宽度参数以字节表示，但高度参数以元素数量表示。那是因为复制的方式，有点像我在上面写的手动复制：宽度是每个副本沿一行的大小（在内存中连续的元素），高度是这个操作必须的次数得以实现。（作为物理学家，这些单位的不一致让我非常恼火。）

## 处理 3D 数组

3D 数组实际上与 2D 数组没有什么不同，没有包含额外的填充。3D 数组只是填充行的 2D*经典*数组。这就是为什么在分配 3D 数组时，您只会得到一个音高，即沿行的连续点之间的字节数差异。如果您想访问沿深度维度的连续点，您可以安全地将间距乘以列数，从而得到 slicePitch。

用于访问 3D 内存的 CUDA API 与用于访问 2D 内存的 API 略有不同，但思路是相同的：

*   使用 cudaMalloc3D 时，您会收到一个音高值，您必须小心保留该值，以便后续访问内存。
*   复制 3D 内存块时，除非复制单行，否则不能使用 cudaMemcpy。您必须使用考虑音高的 CUDA 实用程序提供的任何其他类型的复制实用程序。
*   当您将数据复制到/从线性内存中时，您必须为指针提供一个间距，即使它无关紧要：这个间距是行的大小，以字节表示。
*   大小参数以字节表示行大小，以元素数表示列和深度维度。

# audio - 使用音频工具 sox，我如何确定立体声录音是否实际上是单声道？

> ID：16119947
> 
> 赞同：4
> 
> 时间：2013-04-20T11:43:47.673
> 
> 标签：audio, channel, sox, phase

我有立体声文件（2 声道 WAV），听起来完全像单声道录音。有没有办法让[`sox`](http://sox.sourceforge.net/)文件运行并输出两个通道是否相同？

或者是否有另一个命令行工具进行这种波形比较，将声音文件的通道之间的差异聚合为“相似度数”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-01T17:06:53.650

您可以反转一个通道并将其添加到另一个通道（从而减去它们），然后检查差异是否为零：

```
$ sox input.wav -n remix 1,2i stats
DC offset   0.000000
Min level   0.000000
Max level   0.000000
Pk lev dB       -inf
RMS lev dB      -inf
... 
```

如果`Pk lev dB`显示为`-inf`，则通道 1 和 2 相同。

对于非常相似但不相同的通道，这可能会或可能不会给出有意义的结果。例如，一个简单的相移可能会导致采样方面的大差异，但听起来仍然完全相同。

# ios - 用 instantiateViewControllerWithIdentifier 实例化的无响应视图：

> ID：16119953
> 
> 赞同：0
> 
> 时间：2013-04-20T11:44:26.463
> 
> 标签：ios, objective-c, xcode, cocoa-touch

我在需要从情节提要 ID 实例化的视图上遇到问题。在 IOS 模拟器中，视图加载了所有内容，但完全没有响应。日期选择器不移动，按钮不接受任何交互。

我已经检查了 IB 中的“自定义类”匹配项和 Storyboard ID 匹配项。该代码正在 PickerViewController 中执行，因为 UIDatePicker 是在代码中创建的，并且是正确的并且存在于 IOS 模拟器中。只是没有任何东西接受任何交互。触摸时按钮甚至不会变蓝。

我在前一个视图控制器中创建了视图：

```
PickerViewController *addViewController = (PickerViewController *)[self.storyboard instantiateViewControllerWithIdentifier:@"view"];

[addViewController.view setUserInteractionEnabled:TRUE];//chucked this line in to see if it helped

[addViewController setModalPresentationStyle:UIModalPresentationFormSheet];
[self presentViewController:addViewController animated:YES completion:NULL]; 
```

我不确定这是否是代码问题，或者我是否没有在 IB 中正确连接某些东西。有任何想法吗？？！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T14:28:21.880

在助理编辑器中检查您的视图控制器类：

![在此处输入图像描述](https://i.stack.imgur.com/qzXVO.png)

# php - MySQL ORDER BY 语句返回布尔值？

> ID：16119959
> 
> 赞同：1
> 
> 时间：2013-04-20T11:44:59.590
> 
> 标签：php, mysql

我完全不知道为什么会发生这种情况，但是`ORDER BY ... DESC`当我尝试执行查询时，我使用命令的简单 MySQL 语句给出了一个非常奇怪的错误。错误是

```
mysql_fetch_assoc() expects parameter 1 to be resource, boolean given in E:/.../home.php on line 23 
```

我的代码是：

```
$data = mysql_query("SELECT * FROM `blogposts` LIMIT 0, 30 ORDER BY id DESC");
while($results = mysql_fetch_assoc($data))//error here 
```

我不知道为什么。任何帮助表示赞赏。哦，顺便说一句，我知道看到这个问题的每个人都会因为我仍在使用`mysql.*`库而抨击我，并且对于它的弊端以及我容易受到 SQL 注入攻击的事实，会有一个高度赞成的评论。在被问到之前回答一下，这并没有上线，它纯粹是一个在 localhost 上运行的家庭项目。所以，别费心给我讲课了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:45:39.570

`ORDER BY`子句必须在`LIMIT`子句之前

```
SELECT * FROM `blogposts` ORDER BY id DESC LIMIT 0, 30 
```

# c# - 多线程视觉c#的问题

> ID：16119960
> 
> 赞同：-4
> 
> 时间：2013-04-20T11:45:06.650
> 
> 标签：c#

我正在研究使用 ssh 登录到 linux 设备的东西。然后我想每5秒监控一次连接状态。我试图用后台工作人员来做，但我在跨线程方面遇到了很多问题。所以我手动创建了新线程并使用委托处理了跨线程。

但我的工作不是很好。例如，在登录期间 UI 堆栈几秒钟，直到登录完成。

这是我正在使用的登录代码：

```
 private void login_button_Click(object sender, EventArgs e)
    {
        toolStripProgressBar1.Visible = true;
        status.Text = "Connecting...";
        Thread t = new Thread(check_del_login);
        t.IsBackground = true;
        t.Start();
    }
    delegate void del();
    private void check_del_login()
    {
        if (this.InvokeRequired)
        {
            del d = new del(login);
            Invoke(d);
        }
        else
        {
            login();
        }
    }
    private void login()
    {
        ssh = new ssh_login(ip_addr, ssh_username, ssh_password);
        f = new Form3();
        f.sftp(ip_addr, ssh_username, ssh_password);// Send the information to the new form
        try
        {
            ssh.login1();//Connect
            ssh.login2();//Connect
        }
        catch (Exception ex)
        {
            log(ex);
        }
        if (!ssh.check_login1() || !ssh.check_login2())
        {
            MessageBox.Show("Could not login by SSH to " + ip_addr);
            return;
        }
        try
        {
            f.login();// Login with sftp
        }
        catch (Exception ex)
        {
            log(ex);
        }
        if (!f.check_connection())
        {
            MessageBox.Show("Could not login by web to " + ip_addr);
            return;
        }
        toolStripProgressBar1.Visible = false;// hide the progress bar when the process finishes
        if (ssh.check_login1() && ssh.check_login2() && f.check_connection())
        {
            status.Text = "Connected";
            connection_status_timer.Start();
            status.Text = "Updating interface list...";
            Thread t = new Thread(check_del_update_interface);
            t.IsBackground = true;
            t.Start();
            show_form();
            hide_login();
        }
        else
        {
            status.Text = "Disconnected";
            hide_form();
            show_login();
            comboBox_interface.Items.Clear();
            comboBox_interface.Items.Insert(0, "any");
            connection_status_timer.Stop();
        }
    } 
```

我浏览了所有可以在网上找到的指南，但我就是不明白我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T11:56:25.957

您的直接问题是`check_del_login()` 它总是 Invoke() 主要的 login() 方法。这意味着您的实际代码再次在主线程上运行。

```
private void check_del_login()   // is run on a thread
{
    if (this.InvokeRequired)     // always true
    {
        del d = new del(login);  // so, run login() on Main thread again
        Invoke(d);
    }
    else
    {
        login();
    }
} 
```

您应该简单地消除 thos 方法并`login()`直接在线程上运行。但后来你遇到（只是第一个）：

```
 toolStripProgressBar1.Visible = false;// hide the progress bar when the process finishes 
```

此方法涉及 GUI，因此应该调用它。而且你有很多类似的代码。

最佳建议：回到 Backgroundworker 并修复您的 UI 问题。

# ios - 外观怪异的 setBackButtonBackgroundImage

> ID：16119964
> 
> 赞同：0
> 
> 时间：2013-04-20T11:45:58.947
> 
> 标签：ios, objective-c, xcode, uinavigationcontroller, uibarbuttonitem

在 AppDelegate.m 中为我的自定义导航栏使用它：

```
UIImage *NavigationPortraitBackground = [[UIImage imageNamed:@"gradient_main"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UINavigationBar appearance] setBackgroundImage:NavigationPortraitBackground forBarMetrics:UIBarMetricsDefault];
UIImage *barBackBtnImg = [[UIImage imageNamed:@"btn_nav_default.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UIBarButtonItem appearance] setBackButtonBackgroundImage:barBackBtnImg forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

结果是：

![在此处输入图像描述](https://i.stack.imgur.com/HlJ84.png)

如您所见，该按钮似乎被重复了。按钮尺寸为 61x30。并且文本没有居中。如果文本较短（例如菜单）按钮图像被切断，如果文本较长，则按钮重复。具有较小图标 (30x30) 的按钮也存在类似问题。该按钮显示正常，但我可以单击图像外部的按钮:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T12:11:35.623

您的问题的根源是您提供了一个没有 UIEdgeInsets 并且没有指定调整大小样式的可调整大小的图像。UIBarButtonItem 上的文本实际上是居中的！如果你测量文本两边的距离，你会发现它是一样的。

如果您查看为 UIBarButtonItem 提供的图像：

```
[[UIImage imageNamed:@"btn_nav_default.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)]; 
```

你告诉 iOS @"btn_nav_default.png" 是一个可调整大小的图像，它应该**tile**。它基本上是复制您的图像并将它们并排放置，直到覆盖整个宽度。如果您查看[UIImage 的文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html)，您会发现 resizableImageWithCapInsets 的默认行为是平铺。您将需要调用`resizableImageWithCapInsets:resizingMode:`并传入`UIImageResizingModeStretch`您的调整大小模式。

话虽如此，这还不够。之后你会看到整个图像被拉伸，完全破坏了你漂亮的圆角。你需要提供 UIEdgeInsets 来告诉 UIImage “你不能拉伸这个部分”。在这种情况下，提供（或类似的东西）将起作用`UIEdgeInsets`。`UIEdgeInsetsMake(0.0f, 10.0f, 0.0f, 10.0f)`

如果您对冗长的解释不感兴趣，请复制粘贴此代码（但不保证可以编译...）：

```
[[UIImage imageNamed:@"btn_nav_default.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0f, 10.0f, 0.0f, 10.0f) resizingMode:UIImageResizingModeStretch]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T14:06:29.180

你可以尝试玩

```
[[UIBarButtonItem appearance] setBackButtonBackgroundVerticalPositionAdjustment:5 forBarMetrics:UIBarMetricsDefault]; 
```

在 ios 5 中放置插图后

# php - 用链接替换文本中的某些单词

> ID：16119965
> 
> 赞同：0
> 
> 时间：2013-04-20T11:46:06.553
> 
> 标签：php

我有一个类似的文本：`Added updates system. (Issue #20) (Alex)`和其他几个具有相同格式的文本。

我想替换`#20`为我在链接中使用 20 的链接。例如：

```
Added updates system. (Issue #20) (Alex) 
```

应该像这样回显：

```
Added updates system. (Issue <a href="http://tracker.website.com/view.php?id=20">#20</a>) (Alex) 
```

文本是一个整体，而不是部分。我有一系列这样的文本，我想以相同的方式格式化。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:59:38.850

使用正则表达式替换后跟散列的数字`#`：

```
preg_replace('/#(\d+)/', '<a href="http://tracker.website.com/view.php?id=$1">#$1</a>', 'Added updates system. (Issue #20) (Alex)'); 
```

# jquery - 如何仅选择列表中的直接子项？

> ID：16119967
> 
> 赞同：0
> 
> 时间：2013-04-20T11:46:13.577
> 
> 标签：jquery

例如我有简单的列表

```
<ul>
    <li></li>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </li>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </li>
</ul> 
```

我正在努力获得`<li>`除第二名之外的所有内容`<ul>`。首先我试过了`ul li`，然后`ul > li`还是得到了所有`<li>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:48:25.653

用`>`这个作为

```
jQuery( "parent > child" ) 
```

在第一个 ul 上放一个类

```
<ul class ='ul-parent'> 
```

并使用类选择器如下

```
$('ul.ul-parent > li') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:48:57.727

尝试

```
$('ul:first').children('li') 
```

我不推荐这个，最好在顶部添加一个 id/class 并使用它来选择孩子

```
<ul id="topul">
    <li></li>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </li>
    <li></li>
    <li>
        <ul>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </li>
</ul> 
```

然后

```
$('#topul').children('li') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T11:47:26.617

您可以使用

```
$('li').not('ul ul li') 
```

这将仅选择第一级`li`元素。

# java - 正确使用 render="" 函数

> ID：16119974
> 
> 赞同：0
> 
> 时间：2013-04-20T11:47:12.990
> 
> 标签：java, jsf

我正在使用 JSF、JavaDB 和 Java 创建一个应用程序作为学校项目。为了给你一个简短的解释，客户应该能够登录并选择一个或多个菜单，然后点击更新。通过点击更新，客户将被重定向到一个新页面，在此页面上，客户将看到一个包含所选菜单的表格。该表从 ArrayList< > 获取信息，该信息通过从数据库收集信息的方法添加其对象。最后 3 列应由客户填写，因为当时这些是未知的。通过点击 Endre（更改）按钮，应将最后 3 列更改为 InputText 字段，客户可以在其中输入信息，然后点击 order 将其保存并将信息写入 Order 表。

问题：

选择菜单/菜单并输入“更新”按钮时，新页面加载并显示如下所示的信息。

![在此处输入图像描述](https://i.stack.imgur.com/9s2IS.png)

因此，此时它似乎工作得很好，但是当您点击 Endre（更改）按钮时，表格消失并且没有给出 InputTextField。

它使用布尔函数 isEditable 来确定单元格是显示为 OutputField 还是 InputField。

我在下面列出了代码：

在 .html 我有（它是一个重复的代码，所以我发布了它的一部分）：

```
 <h:dataTable value="#{order.orderList}" var="enOrdre"
              styleClass="standard" headerClass="hode"rowClasses="oddeRad, likeRad" footerClass="fot">

<h:column>
    <f:facet name= " header " > #{mld.delivaddr}</f:facet>
    <h:inputText value "#{enOrdre.levAdr}" rendered = "#{enOrdre.editable" styleClass= "venstrejustert"></h:inputText>
<h:outputText value= "#{enOrdre.levAdr}" rendered = "#{not enOrdre.editable</h:outputText>
</h:column> 
```

并使用 Endre（更改）操作：

```
<h:column>
<f:facet name= " header "> #{mld.edit}</f:facet>
<h:commandLink value= "#{mld.edit} " action= "#{order.editAction(enOrdre)}" rendered="#{not enOrdre.editable}"
</h:column> 
```

我的带有 isEditable() 和 setEditable(boolean editable) 的 OrderBean 类：

```
public class OrderBean implements java.io.Serializable {

private String brukernavn;
private int orgNummer;
private String firmNavn;
private String kontaktP;
private String epost;
private String menues;
private String levAdr;
private String levDato;
private int antP;

boolean editable;

public OrderBean(String brukernavn, int orgNummer, String firmNavn, String kontaktP, String epost, String menues, String levAdr, String levDato, int antP) {
    this.brukernavn = brukernavn;
    this.orgNummer = orgNummer;
    this.firmNavn = firmNavn;
    this.kontaktP = kontaktP;
    this.epost = epost;
    this.menues  = menues;
    this.levAdr = levAdr;
    this.levDato = levDato;
    this.antP = antP;
}

public OrderBean(){

}

public synchronized String getBrukernavn() {
    return brukernavn;
}

public synchronized void setBrukernavn(String nyBrukernavn) {
    brukernavn = nyBrukernavn;
}

public synchronized int getOrgNummer() {
    return orgNummer;
}

public synchronized void setOrgNummer(int nyOrgNummer) {
    orgNummer = nyOrgNummer;
}

public synchronized String getFirmNavn() {
    return firmNavn;
}

public synchronized void setFirmNavn(String nyFirmNavn) {
    firmNavn = nyFirmNavn;
}

public synchronized String getKontaktP() {
    return kontaktP;
}

public synchronized void setKontaktP(String nyKontaktP) {
    kontaktP = nyKontaktP;
}

public synchronized String getEpost() {
    return epost;
}

public synchronized void setEpost(String nyEpost) {
    epost = nyEpost;
}

public synchronized String getMenues(){
    return menues;
}

public synchronized void setMenues(String nyMenues){
    menues = nyMenues;
}

public synchronized String getLevAdr() {
    return levAdr;
}

public synchronized void setLevAdr(String nyLevAdr) {
    levAdr = nyLevAdr;
}

public synchronized String getLevDato() {
    return levDato;
}

public synchronized void setLevDato(String nyLevDato) {
    levDato = nyLevDato;
}

public synchronized int getAntP() {
    return antP;
}

public synchronized void setAntP(int nyAntP) {
    antP = nyAntP;
}

public boolean isEditable(){
    return editable;
}

public void setEditable(boolean editable){
    this.editable = editable;
}
} 
```

我的 OrderRegistreringsBehandler 中的方法：

```
 private ArrayList<OrderBean> tabelldata2 = new ArrayList<OrderBean>();

public String saveAction(){
    for(OrderBean orderBean : tabelldata2){
        orderBean.setEditable(false);
    }
    return null;
}

public String editAction(OrderBean order){
    order.setEditable(true);
    return null;
} 
```

希望有人能提前对此有所了解，谢谢！

# c# - 仅显示从 gridview 到文本框的日期

> ID：16119975
> 
> 赞同：1
> 
> 时间：2013-04-20T11:47:18.600
> 
> 标签：c#, asp.net, ms-access-2007

我只想从 gridview 将日期显示到文本框中它显示为 11/03/2013 12:00:00 AM 但我只想要日期 11/03/2013 i 数据库它存储在日期

我试图将我的代码修改为

```
<asp:TemplateField HeaderText="reg_dt" Visible="False">
                                    <ItemTemplate>
                                        <asp:Label ID="Label29" runat="server"
                                            Text ='<%# Bind("reg_dt" ,"{0:d}") %>'></asp:Label>
                                    </ItemTemplate>
                                </asp:TemplateField> 
```

但它显示与第一种格式相同我应该做些什么更改以仅显示日期请帮助我

我正在使用 datepicker 将日期选择到文本框中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T11:52:39.157

在您的 gridview 模板文件中设置此属性

```
<ItemTemplate>
<asp:Label ID="Label29" runat="server" Text ='<%# Bind("reg_dt" ,"{0:dd-MMM-yyyy}")%>'></asp:Label>
</ItemTemplate> 
```

或者试试这个............在aspx页面............

```
 <ItemTemplate>
    <asp:Label ID="Label29" runat="server" Text='<%#  ConvertDate(Eval("   public string ConvertDate(object pobjDate, string pstrDateFormat)
    {
        if (pobjDate == null || String.IsNullOrWhiteSpace(pobjDate.ToString()))
            return String.Empty;
        else
            return Convert.ToDateTime(pobjDate).ToString(pstrDateFormat);
    }"), "dd-MMM-yyyy") %>'></asp:Label>
 </ItemTemplate> 
```

在cs页面中…………

```
 public string ConvertDate(object pobjDate, string pstrDateFormat)
        {
            if (pobjDate == null || String.IsNullOrWhiteSpace(pobjDate.ToString()))
                return String.Empty;
            else
                return Convert.ToDateTime(pobjDate).ToString(pstrDateFormat);
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T11:50:34.590

利用`{0:dd-MM-yyyy}`

`Text ='<%# Bind("reg_dt" ,"{0:dd-MM-yyyy}") %>'`

和 html 编码为 false。

## 例子

```
<asp:boundfield datafield="PostalCode" htmlencode="false" headertext="ZIP Code"/> 
```

参考：-
[http://msdn.microsoft.com/en-in/library/system.web.ui.webcontrols.boundfield.htmlencode%28v=vs.90%29.aspx](http://msdn.microsoft.com/en-in/library/system.web.ui.webcontrols.boundfield.htmlencode%28v=vs.90%29.aspx)

# android - Sqlite - 检查今天是否在两个日期之间

> ID：16119977
> 
> 赞同：0
> 
> 时间：2013-04-20T11:47:26.943
> 
> 标签：android, sqlite

我有一个这样定义的表：

```
db.execSQL("CREATE TABLE IF NOT EXISTS MyExercises (ID INTEGER, NAME VARCHAR, DESCRIPTION VARCHAR, VIDEONAME VARCHAR, IMAGENAME VARCHAR, VALIDFROM SMALLDATETIME, VALIDTO SMALLDATETIME, NUMOFREPS INTEGER, PRIMARY KEY(ID, VALIDFROM, VALIDTO));"); 
```

我想检查今天是否在 VALIDFROM 和 VALIDTO 之间。

当我将数据插入表格时，日期如下所示：4/7/2013 12:00:00 AM ,4/27/2013 12:00:00 AM

```
INSERT INTO MyExercises VALUES (1,'blalbla','blabla', 'ex1.3gp', 'ex1.jpg', '4/7/2013 12:00:00 AM', '4/27/2013 12:00:00 AM' ,5) 
```

但是这个查询：

```
"SELECT NAME FROM MyExercises WHERE date('now') BETWEEN VALIDFROM AND VALIDTO" 
```

不返回任何东西，即使今天在从和到的日期之间..

==================================================== ===================

通过将所有数据更改为 YYYY-MM-DD 格式来解决它

多谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:22:40.887

```
> 1.Insert two date(from,to)
> 2.Get all date between "from" and "to" date and store into arraylist or container //this step you may ignore also
> 3.check condition !from_Date.after(to_Date) 
```

[例子](http://developer.appcelerator.com/question/122972/android-emulator-cannot-find-tables-in-database)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:25:22.100

你可以尝试使用这个

```
db.query("MyExercises", null, TODAY + "BETWEEN ? AND ?", new String[] {
          VALIDFROM + " 00:00:00", VALIDTO+ " 23:59:59" }, null, null, null, null); 
```

这里 TODAY 是今天的日期

# r - 如何将三个单独的交互图组合成一个图形？

> ID：16119980
> 
> 赞同：2
> 
> 时间：2013-04-20T11:47:41.303
> 
> 标签：r, plot, interaction

对此表示歉意。这是我对可重现数据集的问题：

```
library(effects)
data(Arrests)

Arrests$year <- as.factor(Arrests$year)

arrests.mod <- glm(released ~ employed + citizen + checks + colour*year + 
                   colour*age, family=binomial, data=Arrests)

t.effects  <- allEffects(arrests.mod)

plot(t.effects, "colour:year")
plot(t.effects, "colour:age") 
```

是否可以将这两个图组合成一个图形？

```
par(mfrow=c(2,1)) 
```

这行不通。即这些数字分别在两个图表中再现，但不在同一个图中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T13:40:55.013

`par(mfrow=c(2,1))`不适用于网格图。它仅适用于基本图形。您可以使用`gridExtra`来排列格子图。

```
library(gridExtra)
p1 <- plot(t.effects, "colour:year")
p2 <- plot(t.effects, "colour:age")
grid.arrange(latticeGrob(p1),
            latticeGrob(p2)) 
```

![在此处输入图像描述](https://i.stack.imgur.com/9LwiB.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T13:35:43.457

您可以使用矢量索引从您的 alleffects 对象中引用特定效果。在你的情况下，我相信 t.effects[4:5] 或者，等效地， t.effects[c("colour:year", "color:age")]

```
library(effects)
data(Arrests)

Arrests$year <- as.factor(Arrests$year)
arrests.mod <- glm(released ~ employed + citizen + checks + colour*year + colour*age, family=binomial, data=Arrests)
t.effects <- allEffects(arrests.mod)

plot(t.effects[4:5]) 
```

# java - 网页中的分页视图

> ID：16119983
> 
> 赞同：0
> 
> 时间：2013-04-20T11:47:55.070
> 
> 标签：java, html, jsp, web

我有一个查询。我正在使用 JSP 和 tomcat 进行 Web 开发。我有一组从数据库中检索的值作为列表。现在，我想在带有下一步按钮的页面上一个一个地显示这些值。如何做到这一点？我们是制作多个页面还是在按下下一步按钮时使用新值动态刷新页面？有人可以指导我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:12:44.440

告诉我一件事，你将从数据库中挑选记录。所以这都是动态数据。所以方法1是一个很大的NO NO。

您应该动态刷新，带有 Next 按钮的页面指向要显示的下一条记录。但是您不认为在页面中显示一条记录会使 UI 体验变差。

UI 应该简单但涵盖大多数信息，因此请选择标准解决方案，其中包含表格格式的记录列表，带有操作链接以查看每条记录的详细信息，这将指向所需的记录详细页面。实际上，这个详细页面只是一个，但显示的是动态数据。

当然，您可以查看[JQuery 中的 Datatable 以](http://www.datatables.net/)进行分页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:10:17.243

如果我没记错的话，JSP 没有提供任何内置的分页控制。您可以通过 javascript 使用分页，或者创建您自己的分页控件。这是一个[链接](http://www.javaworkspace.com/paginationUsingJavaScript.do)，您可能会使用 javascript 进行分页。

# wifi - 扫描 wifi 结果中的重复 SSID

> ID：16119985
> 
> 赞同：4
> 
> 时间：2013-04-20T11:48:20.200
> 
> 标签：wifi, android-wifi, ssid

我正在尝试制作一个可以创建可用wifi接入点列表的应用程序。这是我使用的部分代码：

```
x = new BroadcastReceiver()
        {
            @Override
            public void onReceive(Context c, Intent intent) 
            {
                results = wifi.getScanResults();
                size = results.size();
                if (results != null) {
                    for (int i=0; i<size; i++){
                        ScanResult scanresult = wifi.getScanResults().get(i);
                        String ssid = scanresult.SSID;
                        int rssi = scanresult.level;
                        String rssiString = String.valueOf(rssi);
                        textStatus.append(ssid + "," + rssiString);
                        textStatus.append("\n");
                    }
                    unregisterReceiver(x); //stops the continuous scan
                    textState.setText("Scanning complete!");
                } else {
                    unregisterReceiver(x); 
                    textState.setText("Nothing is found. Please make sure you are under any wifi coverage");
                }
            }
        }; 
```

textStatus 和 textState 都是 TextView。我可以让它工作，但有时结果显示重复的 SSID，但信号电平不同，在一次扫描中。可能有 3-4 个相同的 SSID，但信号电平不同。

SSID 真的不同吗？它们有什么不同？谁能解释一下？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T12:06:35.677

您是否有多个路由器调制解调器用于同一网络？例如：一家公司有一个大型无线网络，在多个地方安装了多个路由器调制解调器，因此每个房间都有 Wifi。如果您进行该扫描，您将获得许多具有相同 SSID 但接入点不同的结果，因此信号电平也不同。

编辑：根据沃尔特的评论，如果您的调制解调器是双频的，尽管只有一个接入点，您也可以得到多个结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-20T18:00:47.480

使用以下代码删除具有最高信号强度的重复 ssid

```
public void onReceive(Context c, Intent intent) {
    ArrayList<ScanResult> mItems = new ArrayList<>();
    List<ScanResult> results = wifiManager.getScanResults();
    wifiListAdapter = new WifiListAdapter(ConnectToInternetActivity.this, mItems);
    lv.setAdapter(wifiListAdapter);
    int size = results.size();
    HashMap<String, Integer> signalStrength = new HashMap<String, Integer>();
    try {
        for (int i = 0; i < size; i++) {
            ScanResult result = results.get(i);
            if (!result.SSID.isEmpty()) {
                String key = result.SSID + " "
                        + result.capabilities;
                if (!signalStrength.containsKey(key)) {
                    signalStrength.put(key, i);
                    mItems.add(result);
                    wifiListAdapter.notifyDataSetChanged();
                } else {
                    int position = signalStrength.get(key);
                    ScanResult updateItem = mItems.get(position);
                    if (calculateSignalStength(wifiManager, updateItem.level) >
                            calculateSignalStength(wifiManager, result.level)) {
                        mItems.set(position, updateItem);
                        wifiListAdapter.notifyDataSetChanged();
                    }
                }
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-21T06:53:26.663

这是我的简单解决方案，它对我有用

```
private void scanWifiListNew() {
    wifiManager.startScan();
    List<ScanResult>  wifiList = wifiManager.getScanResults();
    mWiFiList = new ArrayList<>();

    for(ScanResult result: wifiList){
       checkItemExists(mWiFiList, result);
    }

    setAdapter(mWiFiList);
}

private void printList(List<ScanResult> list){
    for(ScanResult result: list){
        int level = WifiManager.calculateSignalLevel(result.level, 100);
        System.out.println(result.SSID + " Level is " + level + " out of 100");
    }
}

private void checkItemExists(List<ScanResult> newWiFiList, ScanResult resultNew){
    int indexToRemove = -1;

    if(newWiFiList.size() > 0) {
        for (int i = 0; i < newWiFiList.size(); i++) {
            ScanResult resultCurrent = newWiFiList.get(i);

            if (resultCurrent.SSID.equals(resultNew.SSID)) {
                int levelCurrent = WifiManager.calculateSignalLevel(resultCurrent.level, 100);
                int levelNew = WifiManager.calculateSignalLevel(resultNew.level, 100);
                if (levelNew > levelCurrent) {
                    indexToRemove = i;
                    break;
                }else indexToRemove = -2;
            }
        }
        if(indexToRemove > -1){
            newWiFiList.remove(indexToRemove);
            newWiFiList.add(indexToRemove,resultNew);
        }else  if(indexToRemove == -1)newWiFiList.add(resultNew);
    } else newWiFiList.add(resultNew);
}

private void setAdapter(List<ScanResult> list) {
    listAdapter = new WifiListAdapter(getActivity().getApplicationContext(), list);
    wifiListView.setAdapter(listAdapter);

} 
```

# python - 如何加速python的“乌龟”功能并在最后停止冻结

> ID：16119991
> 
> 赞同：27
> 
> 时间：2013-04-20T11:48:52.790
> 
> 标签：python, graphics, draw, turtle-graphics

我用python写了一个turtle程序，但是有两个问题。

1.  对于较大的数字来说它太慢了，我想知道如何加快海龟的速度。
2.  它在完成后冻结，单击时显示“没有响应”

到目前为止，这是我的代码：

```
import turtle

#Takes user input to decide how many squares are needed
f=int(input("How many squares do you want?"))
c=int(input("What colour would you like? red = 1, blue = 2 and green =3"))
n=int(input("What background colour would you like? red = 1, blue = 2 and green =3"))

i=1

x=65

#Draws the desired number of squares.
while i < f:
    i=i+1
    x=x*1.05
    print ("minimise this window ASAP")
    if c==1:
        turtle.pencolor("red")
    elif c==2:
        turtle.pencolor("blue")
    elif c==3:
        turtle.pencolor("green")
    else:
        turtle.pencolor("black")
    if n==1:
        turtle.fillcolor("red")
    elif n==2:
        turtle.fillcolor("blue")
    elif n==3:
        turtle.fillcolor("green")
    else:
        turtle.fillcolor("white")
    turtle.bk(x)
    turtle.rt(90)
    turtle.bk(x)
    turtle.rt(90)
    turtle.bk(x)
    turtle.rt(90)
    turtle.bk(x)
    turtle.rt(90)
    turtle.up()
    turtle.rt(9)
    turtle.down() 
```

顺便说一句：我在 3.2 版！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-20T11:59:33.240

1.  设置`turtle.speed()`为`fastest`。
2.  使用该`turtle.mainloop()`功能无需刷新屏幕即可工作。
3.  禁用屏幕刷新，`turtle.tracer(0, 0)`然后在最后执行`turtle.update()`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-07-19T17:00:23.283

**Python 乌龟运行非常缓慢，因为每次对乌龟进行修改后都会执行屏幕刷新。**

您可以禁用屏幕刷新，直到所有工作完成，然后绘制屏幕，​​它会消除毫秒延迟，因为屏幕会疯狂地尝试从每个海龟变化中更新屏幕。

**例如：**

```
import turtle
import random
import time
screen = turtle.Screen()

turtlepower = []

turtle.tracer(0, 0)
for i in range(1000):
    t = turtle.Turtle()
    t.goto(random.random()*500, random.random()*1000)
    turtlepower.append(t)

for i in range(1000):
    turtle.stamp()

turtle.update()

time.sleep(3) 
```

此代码在随机位置生成一千只海龟，并在大约 200 毫秒内显示图片。

如果您没有使用`turtle.tracer(0, 0)`命令禁用屏幕刷新，它会尝试刷新屏幕 3000 次需要几分钟。

[https://docs.python.org/2/library/turtle.html#turtle.delay](https://docs.python.org/2/library/turtle.html#turtle.delay)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-01T03:11:36.693

作为参考，乌龟速度慢是一个存在的问题。即使将速度设置为最大，乌龟在分形之类的东西上也可能需要很长时间。Nick ODell 在这里重新实现了海龟的速度：[隐藏海龟窗口？](https://stackoverflow.com/questions/7236879/hide-turtle-window)

```
import math

class UndrawnTurtle():
def __init__(self):
    self.x, self.y, self.angle = 0.0, 0.0, 0.0
    self.pointsVisited = []
    self._visit()

def position(self):
    return self.x, self.y

def xcor(self):
    return self.x

def ycor(self):
    return self.y

def forward(self, distance):
    angle_radians = math.radians(self.angle)

    self.x += math.cos(angle_radians) * distance
    self.y += math.sin(angle_radians) * distance

    self._visit()

def backward(self, distance):
    self.forward(-distance)

def right(self, angle):
    self.angle -= angle

def left(self, angle):
    self.angle += angle

def setpos(self, x, y = None):
    """Can be passed either a tuple or two numbers."""
    if y == None:
        self.x = x[0]
        self.y = x[1]
    else:
        self.x = x
        self.y = y
    self._visit()

def _visit(self):
    """Add point to the list of points gone to by the turtle."""
    self.pointsVisited.append(self.position())

# Now for some aliases. Everything that's implemented in this class
# should be aliased the same way as the actual api.
fd = forward
bk = backward
back = backward
rt = right
lt = left
setposition = setpos
goto = setpos
pos = position

ut = UndrawnTurtle() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-11-06T05:24:53.163

我无法真正解决速度问题，但可以通过`turtle. done()`在文件末尾使用来防止冻结，谢谢

# php - 获取具有未知键名的数组值

> ID：16119992
> 
> 赞同：23
> 
> 时间：2013-04-20T11:48:55.300
> 
> 标签：php

如果我有一个只有一个键和一个元素的关联数组`myArray =array("myKey"=>123)`，但我不知道键的名称，如何获取值？例如，如果我不知道我的密钥名为 myKey，我该如何返回 123？我知道我可以使用`foreach($myArray as $key=>$value)`，但我觉得应该有更好的方法。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-20T11:52:10.813

您可以使用[`current()`](http://www.php.net/manual/en/function.current.php)：

```
$value = current($array); 
```

或者，如果您也想要密钥，则[`each()`](http://www.php.net/manual/en/function.each.php)：

```
list($key, $value) = each($array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-06T15:34:31.543

或者在我的情况下，我还需要键名。

```
$key = key($array);

$value = $array[$key]; 
```

从数组中获取键名，然后使用该键从数组中获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-30T11:34:41.520

从**php7.3 开始**，您可以使用[`array_key_first`](https://www.php.net/array_key_first)：

```
$myArray = array("myKey"=>123);
$key = array_key_first($myArray);
echo $myArray[$key];    // outputs 123 
```

# javascript - CodeMirror 从 80 位置强制下一行

> ID：16119995
> 
> 赞同：1
> 
> 时间：2013-04-20T11:49:00.227
> 
> 标签：javascript, editor, codemirror

当用户尝试在代码镜像中的文档的第 80 列之后键入任何字符时，我是否可以强制换行。

也可选择用于下一行的缩进

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T12:29:04.950

是的，有办法做到这一点。在光标活动时，测试当前字符索引是否为 80 或更大。如果是这样，请将选择替换为新行 "\n" 。但你真的想这样做吗？把一个词分成两半？

```
 editor.on("cursorActivity" ,function(editor){
   currentChar = editor.getCursor().ch    
   if (currentChar >= 80){
   editor.replaceSelection("\n" ,"end")
   }
   }) 
```

# zombie.js - Mocha + ZombieJs，文档未定义

> ID：16119997
> 
> 赞同：0
> 
> 时间：2013-04-20T11:49:03.940
> 
> 标签：zombie.js

我正在使用zombiejs + mocha为操作DOM的库编写一些测试，它使用像document.createElement（）这样的JavaScript原生函数，我的问题是，当我运行测试时，我得到一个异常说'document is not定义'。

是zombiejs还是jsDOM有问题？我该如何解决？

这是我的代码示例：

**HTML：**

```
<!DOCTYPE html>

<html>
  <head>
    <script src="mocha.js"></script>
    <script src="expect.js"></script>
    <title>XS UI Tests</title>

    <script type="text/javascript" charset="utf-8" src="../lib/mylibrary.js"></script>

    <script>
      mocha.setup('bdd');
    </script>
  </head>

  <body>
    <div id="table"></div>
    <div id="controls"></div>
    <div id="form"></div>

    <div id="mocha"></div>

    <script src="tests.js"></script>
  </body>
</html> 
```

**在tests.js中：**

```
var expect  = require( 'expect.js' )
  , Zombie  = require( 'zombie'    )
  , browser = new Zombie( { debug: true } )
;

describe( 'XS UI Tests:', function() {
  before( function( done ) {
    browser.visit( 'http://localhost:8080/test/ui.html', done );
  } );

  it( 'expect ui.html to be loaded', function() {
    expect( browser.success ).to.be( true );
  } );

  describe( 'Table Tests:', function() {
    it( 'expect div#table ( table container ) to exist', function() {
      expect( browser.query( "#table" ) ).to.be.ok();
    } );
  } );
} ); 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T18:05:32.293

该`document`对象包含在僵尸浏览器中。如果您的代码没有找到`document`，很可能您没有在僵尸沙箱上下文中运行它。

您是通过加载库`zombie.visit('/page/with/library')`还是直接需要它并尝试在测试中使用它？

最好测试完整的网页而不是库。您应该创建一个测试页面，上面有几个按钮/链接，用于测试库的不同功能，`pressButton`或者`visit`那些带有僵尸的功能。

# silverlight - Silverlight：绑定到跨视图模型共享的数据

> ID：16119998
> 
> 赞同：0
> 
> 时间：2013-04-20T11:49:04.190
> 
> 标签：silverlight, mvvm, binding, viewmodel, caliburn.micro

我创建了一个名为 JsData 的类并在 App.xaml.cs 中对其进行了实例化，以便我可以从多个视图模型中访问它。JsData 有几个 ObservableCollections、一些用于配置的属性和一些方法，这些方法可以操纵从远程服务器自动提取数据的过程。

现在问题来了。以最少的编码将全局数据绑定到我的视图是否方便？此外，我正在使用 Caliburn.Micro。使用消息传递将 PropertyChanged 事件通知给视图模型是否可行且合适？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T19:36:09.417

我认为最好的方法是创建一个您的视图模型可以实现的服务。这样一来，需要数据的视图模型就可以实现服务，并且服务更加灵活，因为它可以注入到视图模型构造中。这使您的视图模型更加解耦并尊重 mvvm 模式。

我不会使用消息传递来不通知更改，这会产生不必要的开销。您只需要让您的视图模型实现 inotifypropertychanged 然后在您的构造函数中获取服务然后将服务值传递给您的视图模型中引发属性更改事件的属性。

如果您需要帮助定义服务，请告诉我，我将发布示例

# c++ - 您可以为泛型类提供具有特定数据类型的方法吗？

> ID：16119999
> 
> 赞同：1
> 
> 时间：2013-04-20T11:49:09.547
> 
> 标签：c++, templates

这是我以前的问题： [接受 C++ 字符串和 C 样式字符串的通用类](https://stackoverflow.com/questions/16116641/generic-class-that-accepts-c-string-c-style-string)

本杰明林德利的答案似乎是我正在寻找的。他说，既然我只想将它限制为 std::string 和 char const*，那么我应该只使用两个重载：

```
char getSecondLetter(std::string const & str) { return str[1]; }
char getSecondLetter(char const * str) { return str[1]; } 
```

但是如果我使用两个重载，这些重载方法的参数是数据类型不是通用的。

```
char getSecondLetter(T const & str) { return str[1]; } 
```

所以数据类型不是 T 或 Str_T，而是 std::string 或 char const*。如果我将这些重载方法用于泛型类，我相信该类不再是真正的泛型。我是对的还是错的？...