# StackOverflow 问答 15528000-15528999

# .net - 会话配置为无 cookie 导致额外的身份验证提示？

> ID：15528001
> 
> 赞同：2
> 
> 时间：2013-03-20T15:34:58.723
> 
> 标签：.net, session, authentication

我有一个在启用了 Windows 集成身份验证的集群环境中运行的 .Net 应用程序。到目前为止，它一直运行良好，除了 Session 用于跟踪应用程序的“状态”这一事实。不幸的是，用户一直在跨浏览器选项卡打开应用程序的多个实例。您可能知道，IE 不会将选项卡视为单独的实例。这导致跟踪出现问题。为了解决这个问题，我已将`cookieless="UseUri"`指令添加到我的 Web.config 中，它似乎工作正常。问题在于，在特定点，应用程序会再次提示输入身份验证凭据。我相信这类似于[双跳认证](http://weblogs.asp.net/owscott/archive/2008/08/22/iis-windows-authentication-and-the-double-hop-issue.aspx)问题，但我无法确定为什么将 Session 作为 URI 的一部分进行跟踪会导致此行为。幕后发生了什么，我该如何覆盖/防止这种行为？
我想如果有更好的方法来简单地将浏览器选项卡之间的会话分开，我也会为此做好准备。

编辑：作为后续行动，我意识到该问题与从客户端脚本（例如`mainScreen.ServerMethod("cv0_value", "1");`）对 WebMethod 的特定调用有关

```
 [System.Web.Services.WebMethod]
    public static string ServerMethod(string name, string value)
    {
        HttpContext.Current.Session[name] = value;
    } 
```

我不确定客户端和服务器如何同步会话值，但问题似乎相对直观，因为当我使用 URI 进行会话跟踪时，我试图设置服务器端会话值。我可能还差得很远，但我不确定使用 Web.config 指令是否可行。
我还在 SO 上发现[了这个](https://stackoverflow.com/questions/869268/getting-asp-net-cookieless-sessions-and-jquery-ajax-to-play-together-nicely)与使用 Ajax 和 cookieless 指令相关的问题，这可能会提供一些见解并让我相信我可能走在正确的轨道上。我在这里偏离轨道了吗？有没有办法同时拥有这两种能力？

[更新：关于在 Cookieless ASP.NET 应用程序中启用 POST 的](http://www.developer.com/net/asp/article.php/2216431/Enabling-POST-in-Cookieless-ASPNET-Applications.htm)漂亮文章。

进一步更新：我已经按照上面的链接并尝试实现代码，但似乎检查中的值`ShouldRedirect()`总是返回 false，因此重定向永远不会发生。该描述听起来很适合该解决方案，但我无法使其正常工作。具体来说，“AspCookielessBoolSession”和“AspSessionIDManagerInitializeRequestCalled”的值会根据 cookieless 指令设置为“UseUri”还是“true”来填充（HttpContext.Current.Items.Count 返回 2 或 3）。

在这一点上，我对任何解决方案都持开放态度，因为我需要在窗口*和*选项卡中保持 Session 的唯一性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T07:33:28.837

您可以`System.Web.HttpContext.Current.Items["AspCookielessSession"]`用来检查是否已经为用户获取了会话

# javascript - 在CSS中保持纵横比的同时将图像大小调整为容器？

> ID：15528002
> 
> 赞同：6
> 
> 时间：2013-03-20T15:35:05.160
> 
> 标签：javascript, css

我有一堆不同（未知）尺寸的图像。

我想将这些图像放入一个 div 并让它们自动符合 div 的尺寸，同时保持它们的纵横比。

换句话说，如果图像宽于高，则宽度将是 100%，并且高度将相应缩放。如果图像高于宽度，高度将为 100%，宽度将相应缩放。

有没有办法在纯CSS中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T15:40:03.630

使用 css 属性[`max-width`](https://developer.mozilla.org/en-US/docs/CSS/max-width)和[`max-height`](https://developer.mozilla.org/en-US/docs/CSS/max-height)图像将带您到达您需要的位置。

**小提琴**

[http://fiddle.jshell.net/sHAQ9/](http://fiddle.jshell.net/sHAQ9/)

**HTML**

```
<div>    
    <img src="http://dummyimage.com/200x300/000000/ffffff.png&text=tall%20image"/>
</div>
<div>    
    <img src="http://dummyimage.com/300x200/000000/ffffff.png&text=wide%20image"/>
</div> 
```

**CSS**

```
div {
    width: 150px;
    height: 150px;    
    overflow: hidden;
    background: #ccc;
    margin: 10px;
    text-align: center;
    line-height: 150px;
}
div img {
    max-width: 100%;
    max-height: 100%;
    vertical-align: middle;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:37:44.360

我用我的画廊设置做到这一点：

```
.ScaledImg {
    max-width:100%:
    max-height:100%;
} 
```

img 基于此缩放以适应其父/容器的尺寸，同时保持其纵横比。除了imgs，我没有尝试过这个，但对我来说效果很好。不需要`width`或`height`需要声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:37:51.777

尝试这个：

```
<style>
    .fit_image img {
        max-width: 100%;
        max-height: 100%;
    }
    .fit_image {
        width: 400px;
        height: 200px;
    }
</style>

<div class="fit_image">
     <img src="/path/to/image.jpg">
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-11T14:06:09.083

基于@iambriansreed fiddle，
当图像小于容器时使用缩放

```
div img {
    zoom: 10;
    max-width: 100%;
    max-height: 100%;
    vertical-align: middle;
} 
```

[http://fiddle.jshell.net/vcapr0k8/](http://fiddle.jshell.net/vcapr0k8/)

# r - 将简单的 ggplot2 代码转换为使用 data.table

> ID：15528006
> 
> 赞同：11
> 
> 时间：2013-03-20T15:35:07.517
> 
> 标签：r, ggplot2, data.table

我的旧代码如下所示：

```
library(ggplot2)
gp<-ggplot(NULL,aes(x=Income))
gp<-gp+geom_density(data=dat$Male,color="blue")
gp<-gp+geom_density(data=dat$Female,color="green")
gp<-gp+geom_density(data=dat$Alien,color="red")
plot(gp) #Works 
```

现在我已经开始使用优秀的 data.table 库（而不是 data.frame）：

```
library(data.table)
cols<-c("blue","green","red")
gp<-ggplot(NULL,aes(x=Income))
dat[, list(gp+geom_density(data=.SD, color=cols[.GRP])), by=Gender]
#I even tried
dat[, list(gp<-gp+geom_density(data=.SD, color=cols[.GRP])), by=Gender]
plot(gp) #Error: No layers in plot 
```

我不确定出了什么问题，但似乎我在*J()*中运行的代码在外部范围内没有被识别。

如何以 data.table 惯用的方式实现这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T16:10:37.023

`ggplot2`应该以与长格式 data.frames 相同的方式与长格式 data.tables 一起使用：

```
library(data.table)
set.seed(42)

dat <- rbind(data.table(gender="male",value=rnorm(1e4)),
             data.table(gender="female",value=rnorm(1e4,2,1))
             )

library(ggplot2)
p1 <- ggplot(dat,aes(x=value,color=gender)) + geom_density()
print(p1) 
```

不要将宽格式 data.frames（或 data.tables）提供给 ggplot2。

如果你有很多组，绘图会很慢，但由于它的内在魔力`ggplot2`，没有什么`data.table`能真正帮助你（直到 Hadley 以某种方式实现它）。您可以尝试计算外部的密度`ggplot2`，但这只会对您有所帮助：

```
set.seed(42)
dat2 <- data.table(gender=as.factor(1:5000),value=rnorm(1e7))
plotdat <- dat2[,list(x_den=density(value)$x,y_den=density(value)$y),by=gender]
p2 <- ggplot(plotdat,aes(x=x_den,y=y_den,color=gender)) + geom_line()
print(p2) #this needs some CPU time 
```

当然，如果你有很多组，你可能会做错类型的情节。

# javascript - 如何在不刷新页面的情况下获取 URL 的参数？

> ID：15528008
> 
> 赞同：1
> 
> 时间：2013-03-20T15:35:10.337
> 
> 标签：javascript, jquery, html, url

我有以下问题：

我正在使用以下函数来检索 URL 的 GET 参数。

```
$(document).ready(function() {    
function getParam(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for ( var i = 0; i < vars.length; i++) {
                var pair = vars[i].split("=");
                if (pair[0] == variable) {
                    return pair[1];
                }
            }
            return ("");
        }
}); 
```

例如，我有 URL [http://example.com/?radius=5&lat=31.312](http://example.com/?radius=5&lat=31.312)，我想要“半径”的值

```
var radius = getParam("radius"); 
```

问题：在 URL 中，我可以看到半径的值为“5”，但是当我`console.log("radius " + radius);`仅在刷新浏览器页面后运行时，该值显示正确。

为什么第一次加载页面时没有正确检索到值？有没有人有解决这个问题的想法？

我通过提交的表单从另一个 html 获取参数，我想在当前 html 上使用它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:02:33.537

这是一个读取查询字符串参数的标准程序： [http ://www.webreference.com/programming/javascript/jkm/2.html](http://www.webreference.com/programming/javascript/jkm/2.html)

从该页面底部的链接将 param.js 上传到您的站点并将其包含在脚本元素中：

```
 <script src="[...]param.js"></script> 
```

无论页面加载处于哪个阶段，您都可以调用函数 param() 来读取参数，例如：

```
var q = param();
var radius = q.radius; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:03:46.603

你的面包车是这样的：

```
$.extend({
  getUrlVars: function(){
    var vars = [], hash;
    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
    for(var i = 0; i < hashes.length; i++)
    {
      hash = hashes[i].split('=');
      vars.push(hash[0]);
      vars[hash[0]] = hash[1];
    }
    return vars;
  },
  getUrlVar: function(name){
    return $.getUrlVars()[name];
  }
});

// Get object of URL parameters
var allVars = $.getUrlVars();

// Getting URL var by its nam
var byName = $.getUrlVar('name'); 
```

# cqrs - saga、流程管理器和基于文档的方法之间有什么区别？

> ID：15528015
> 
> 赞同：61
> 
> 时间：2013-03-20T15:35:33.120
> 
> 标签：cqrs

我的理解是这三个概念都与长时间运行的事务有关。

据我了解，流程管理器是一个有限状态机，它只是对事件做出反应并发出命令。它不包含任何业务逻辑，它只是做路由。它的目标是把你带到一个最终状态，你知道你的交易是成功还是失败。

到现在为止还挺好。

但现在我开始理解的问题：

*   与流程管理器相比，saga 是什么？
*   还有基于文档的方法，正如[CQRS sagas 中提到的那样——我理解对了吗？](https://stackoverflow.com/questions/13489829/cqrs-sagas-did-i-understand-them-right)…据我了解，文件只是一张“纸”，您可以在其中做笔记并随身携带。这如何适应命令和事件的概念？

任何人都可以解释这些差异，以及 - 我特别感兴趣的 - 这些概念中的哪些适用于什么，以及什么时候你确实需要什么。它们是相互排斥的吗？你能只带着其中一个一路走下去吗？是否存在需要多个场景的情况？……？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-04-02T12:54:44.150

> 与流程管理器相比，saga 是什么？

这些模式的意图是不同的。流程管理器是一种工作流模式，正如您所说，它可以构建在状态机之上。流程管理器将保留消息之间的状态，并将包含逻辑以确定应采取哪些操作来响应消息（例如，转换状态或发送另一条消息）。一些框架错误地将这些称为 sagas。

相比之下，saga（根据原始定义）是一种旨在帮助管理故障的模式。*它涉及跨系统的多个工作流程，其中每个工作流程都允许在以后的事务*中采取某种形式的补偿措施，以防其他地方出现故障。

这种补偿是传奇的决定性特征。请注意，传奇本身并不知道*补偿*动作可能是什么。Sagas 通常使用路由滑动模式来实现。

> 它们是相互排斥的吗？你能只带着其中一个一路走下去吗？

它们不是相互排斥的——例如，参与 saga 的系统可能会使用进程管理器来实际处理其处理。

**其他资源**

其中一些帖子可能有助于提供更多详细信息并提供示例：

*   [Sagas 和工作流程 - 名称不同的相同事物 (Arnon Rotem-gal-oz)](http://soa.dzone.com/news/are-sagas-and-workflows-same-t)
*   [澄清 Saga 模式 (Kelly Sommers)](http://web.archive.org/web/20161205130022/http://kellabyte.com:80/2012/05/30/clarifying-the-saga-pattern)
*   [萨加斯（克莱门斯·瓦斯特斯）](http://vasters.com/clemensv/2012/09/01/Sagas.aspx)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-20T15:39:56.337

看看 MSDN 上的 CQRS Journey 项目：

[http://msdn.microsoft.com/en-us/library/jj591569.aspx](http://msdn.microsoft.com/en-us/library/jj591569.aspx)

> 澄清术语
> 
> saga 一词通常用于 CQRS 的讨论中，指的是在有界上下文和聚合之间协调和路由消息的一段代码。但是，出于本指南的目的，我们更喜欢使用术语流程管理器来指代这种类型的代码工件。有两个原因：
> 
> saga 一词有一个众所周知的预先存在的定义，其含义与通常理解的与 CQRS 相关的含义不同。术语流程管理器更好地描述了这种类型的代码工件所执行的角色。
> 
> 尽管术语 saga 经常在 CQRS 模式的上下文中使用，但它有一个预先存在的定义。我们选择在本指南中使用术语流程管理器以避免与此预先存在的定义混淆。
> 
> 与分布式系统相关的术语 saga 最初是在 Hector Garcia-Molina 和 Kenneth Salem 的论文“Sagas”中定义的。本文提出了一种称为 saga 的机制，以替代使用分布式事务来管理长期运行的业务流程。该论文认识到业务流程通常由多个步骤组成，每个步骤都涉及一个事务，并且可以通过将这些单独的事务分组为分布式事务来实现整体一致性。但是，在长时间运行的业务流程中，使用分布式事务可能会影响系统的性能和并发性，因为在分布式事务期间必须持有锁。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-11T14:37:10.743

Saga 没有状态，而 Process Manager 有。

另一个区别 - Process Manager 是一个状态机，而 Saga 不是。

佐贺没有

*   状态机状态
*   数据状态（一些持久化的数据）

.. 并且流程管理器有

*   状态机状态
*   数据状态（一些持久化的数据）

在我的博客中阅读更多内容： [http ://blog.devarchive.net/2015/11/saga-vs-process-manager.html](http://blog.devarchive.net/2015/11/saga-vs-process-manager.html)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-12-07T18:35:19.793

Saga 和 Process Manager 是两种集成模式。它们非常相似，但不完全一样。

*   **Saga**是一种模式，可帮助您将跨多个服务的每个业务事务实现为一个 saga。实际上，您将创建一系列本地事务，其中每个本地事务更新数据库并发布消息或事件以触发 saga 中的下一个本地事务。实现 saga 有两种可能的方法：编排（编排器告诉参与者要执行哪些本地事务）和编排（每个本地事务发布域事件以触发其他服务中的本地事务）。很常见的是，使用 Saga 将决定 CQRS 和 EventSourcing 的使用。
*   **Process Manager** is a processing unit that it's existing in order to mantain the state of the sequence and determine the next processing step based on intermediate results. It's a routing pattern. It's more like an Orchestrator Saga.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-12-22T12:43:00.663

当在设计时可能不知道所需的步骤并且可能不是连续的时，流程管理器和 saga 都会通过多个处理步骤路由消息。

**流程管理器模式**是一个持久的事件调度器，它封装了流程特定的逻辑并维护一个中心控制点，以决定流程完成后接下来要执行什么。流程管理器维护状态，例如说从客户那里收取了一笔款项，现在必须将订单发送给他们的事实在流程管理器中保持不变。

**传奇经理模式。** 封装流程逻辑，决定流程完成后下一步要执行什么。saga 没有状态，因此完全根据传入消息或事件的内容来决定下一步做什么。因此，在某个流程接受付款的情况下，该流程还会创建一条新消息，指示现在必须发送订单，包括需要发送的内容以及发送给谁。该消息还包含其他付款信息，因此如果在发送订单时出现问题，付款将被退还。

# java - 按下 JButton 后在 JPanel 上放置 JTable

> ID：15528020
> 
> 赞同：0
> 
> 时间：2013-03-20T15:35:49.240
> 
> 标签：java, swing, jtable, jpanel, gridbaglayout

当我运行此代码时，该按钮会显示在 JPanel 上，但是一旦我单击该按钮，则什么也没有发生。关于我在哪里出错的任何建议？对不起，如果它真的很简单。说到 GUI，我还是个新手。

```
final JPanel card3 = new JPanel();
//Tetris setup
JButton startGame = new JButton("START GAME");
card3.setLayout(new GridBagLayout());
GridBagConstraints gbc2 = new GridBagConstraints();
gbc.gridx = 0;
gbc.gridy = 0;
gbc.insets = new Insets(2,2,2,2);
card3.add(startGame, gbc2);
gbc.gridy = 1;
startGame.addActionListener(new ActionListener() {          
    @Override
    public void actionPerformed(ActionEvent e) {
        Tetris game = new Tetris();
        JTable table = new JTable(game.getNumRows(), game.getNumCols());
        card3.add(table);
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:35:45.853

通常，您会将表格添加到 JScrollPane，然后将滚动窗格添加到面板。这样，您将自动显示表格标题。

当您将组件添加到可见 GUI 时，您需要如下代码：

```
panel.add( scrollPane );
panel.revalidate(); 
```

这将导致布局管理器被调用，它可以再次布局所有组件。

# c - 当 realloc 缩小分配的块时，内存在哪里释放？

> ID：15528021
> 
> 赞同：2
> 
> 时间：2013-03-20T15:35:50.250
> 
> 标签：c, unix, pointers, posix, realloc

我正在构建一个使用无符号短数组的 bigInt 数据类型。在某些函数中，可能会使用也可能不会使用最高阶的 short，但总是分配以防万一。为了防止基本数学运算造成无休止的内存消耗，我只想重新分配数组：

```
toReturn.numArray = realloc(toReturn.numArray, (sizeof(unsigned short)) * (toReturn.numElements - 1)) 
```

但我不知道最高位是否会被释放（理想）或最低位。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:41:35.337

无法保证在缩小规模期间将释放一些（*缩小的）内存返回给您。*您不应该依赖它，因为它根本无法保证。

**C99 标准 7.20.3.4-1：realloc 函数：**

> **realloc 函数释放 ptr 指向的旧对象，并返回一个指向新对象的指针，该对象的大小由 size 指定**。新对象的内容应与释放前旧对象的内容相同，直至新旧大小中的较小者。新对象中超出旧对象大小的任何字节都具有不确定的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:38:28.537

如果内存块被重定位，数据将从旧缓冲区的底部复制到新的大小。

如果你想保留你的数据的顶部，你将不得不做一个`malloc`/`memmove`或类似的事情。

这与您的位的关系取决于您如何将数据映射到块中，我会想到。这应该是可控的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:46:09.613

来自“人 realloc()”

```
 The realloc() function changes the size of the block pointed
 to by ptr to size bytes and returns a pointer to the (possi-
 bly moved) block. The contents will be unchanged up  to  the
 lesser  of  the  new  and  old sizes. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:48:37.160

好吧，我是个哑巴。

数组 = realloc（数组，smallerSizeNumber）；

将数组 [0] 保留到数组 [smallerSizeNumber - 1]。

高位丢失。

# sql-server - 如何使用 SSIS 从 sql 表生成 excel 文件？

> ID：15528025
> 
> 赞同：0
> 
> 时间：2013-03-20T15:36:02.313
> 
> 标签：sql-server, ssis

我是新手`SSIS`，我想从 sql 表生成一个 excel 文件。

sql表：我的数据

```
Id    date       value
1     2013-02-2  236823
2     2013-02-3  185454 
```

现在我需要生成一个excel文件，它会给我一个像这样的输入

只有`date`和`value`

> 我怎样才能生成那个excel文件？

请给我任何线程这将是很大的帮助。

我试着做开始`data flow task`

在里面我已经`ole db source`写了sql查询`select date ,value from mydata`

然后补充`Excel destination`？

但它在 excel 目标中给了我一个错误：

> ```
> external table is not in expected format 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:51:22.050

我的朋友，到目前为止，您尝试过什么？这是一个简单的点击-点击-点击的东西。下一次，请分享你的努力。这是指导：

```
1\. Place a DFT on the Control Flow surface
2\. Double-click on the DFT to enter into the Data Flow surface
3\. Place an OLE DB Source. Double-click on it. Click on New... button and create a new OLE DB connection manager
4\. Data access mode: Table or view. Select your table
5\. Click on the columns. Select the fields you want.
6\. Now place an Excel Destination. Connect it to the OLE DB Source.
7\. Double-click and click on New... button. Give the Excel file path where you want to dump the data.
8\. Click on New.. Some warning will appear. Accept it.
9\. Select the Name of the Excel sheet from the drop down.
10\. Run the package. 
```

这是普通的香草解决方案。了解基础知识后，完善您的解决方案。例如，考虑通过变量设置连接。

祝你好运！

# java - 使用 ant 库时的 Asterix 符号解析

> ID：15528027
> 
> 赞同：0
> 
> 时间：2013-03-20T15:36:07.320
> 
> 标签：java, ant

我需要使用 ant 库压缩文件。我找不到任何不使用构建脚本而是使用库的示例。

我看到了 org.apache.tools.zip 包中的类，但我找不到可以帮助我在将文件设置为 zip 时使用 asterix 符号的代码。

那么如何使用 ant 库压缩与某些模式匹配的文件呢？

这是一个场景示例：应用程序接收到一个类似“/ziptest/*example.txt”的字符串，因此我的应用程序必须压缩所有名称以“example”结尾且扩展名为 txt 的文件来自 ziptest 目录。

关键是我需要用java代码来做。我想使用 Ant 库来完成这项任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:07:27.143

如果您想创建 zip 文件，但还没有使用 Ant 构建，那么 Ant zip 任务将是我最不想使用的东西。它们只是不打算在 Ant 构建之外使用（尽管正如@Rebse 指出的那样，只要有足够的强制力，一切皆有可能）。如果您想以编程方式创建 zip 文件，请查看 Java 中的[ZipOutputStream](http://docs.oracle.com/javase/6/docs/api/java/util/zip/ZipOutputStream.html)。

# c# - Page.isValid 检查整个页面，而不仅仅是选定的验证组

> ID：15528028
> 
> 赞同：0
> 
> 时间：2013-03-20T15:36:09.193
> 
> 标签：c#, asp.net, vb.net

我的表单上有几个验证器，有 2 个不同的`ValidationGroups`

在提交表单之前，我只需要检查`ValidationGroup="main"`控件是否有效我尝试了以下操作：

```
Page.Validate("main");
if (Page.IsValid) 
//do something 
```

它不断返回`false`，我快疯了。

在检查确切地查看哪个验证器失败后，它看起来像是阻塞在不同的验证器上`ValidationGroup`。

我如何确保它只验证“主”组？

这是我的完整提交代码：（也许我正在检查失败的验证器是否错误？）但无论哪种方式，我的 page.isvalid 都是错误的 :(

```
Page.Validate("main");
            if ((Page.IsValid) && (user.userRole.Contains("9")))
                btnSubmit.Visible = true;
            else
            {
                foreach (BaseValidator valControl in Page.Validators)
                {
                    WebControl assControl = Page.FindControl(valControl.ControlToValidate) as WebControl;
                    if (valControl.IsValid)
                    {
                        //do something.

                    }
                    else
                    {
                        //do something.
                        lblMessage.Text = valControl.ToString();
                    }

                } 
                btnSubmit.Visible = false;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:41:07.590

请通读[此](http://msdn.microsoft.com/en-us/library/dwzxc386.aspx)。它指出

> Validate 方法验证指定的验证组。在对验证组调用 Validate 方法后，仅当指定的验证组和导致页面发布到服务器的控件的验证组都有效时，IsValid 方法才会返回 true。

# actionscript-3 - TypeError：尝试生成随机图像时出现错误 #2007 AS3

> ID：15528029
> 
> 赞同：0
> 
> 时间：2013-03-20T15:36:11.427
> 
> 标签：actionscript-3, flash, flash-cs5, typeerror

这是我的问题。我有一个脚本，它要求以 15 秒的间隔生成 3 次随机图像。基本上它看起来像 XXX 15 秒，然后那些 X 会在 15 秒后变成 0 0 0 ，然后 15 秒后它们会变成 YYY 然后停止。这是我的代码：

```
import flash.utils.*;

var stuffCount:uint = 0;

function randomocity() {
    stuffCount++;

var ImgReq01:URLRequest=new URLRequest("example.jpg");
var ImgReq02:URLRequest=new URLRequest("example.jpg");
var ImgReq03:URLRequest=new URLRequest("example.jpg");
var ImgReq04:URLRequest=new URLRequest("example.jpg");
var ImgReq05:URLRequest=new URLRequest("example.jpg");

var imgList:Array=[ImgReq01,ImgReq02,ImgReq03,ImgReq04, ImgReq05];

var imgRandom = imgList[Math.ceil(Math.random()* imgList.length)];

var imgLoader:Loader = new Loader();
imgLoader.load(imgRandom);

imgLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onComplete);

function onComplete(event:Event):void 
{
  var randomImage:Bitmap = Bitmap(imgLoader.content);
  randomImage.x=0;
  randomImage.y=0;
  addChild(randomImage);
  event.currentTarget.removeEventListener(Event.COMPLETE, onComplete);
}

stop();

if (stuffCount < 3)
    {
        setTimeout(randomocity, 11000);
    }

}

randomocity(); 
```

然而，我的问题是正在生成的错误。

TypeError：错误＃2007：参数请求必须为非空。在 flash.display::Loader/_load() 在 flash.display::Loader/load() 在 _300x250_fla::randomimage3_14/frame1()

这是来自movieclip Randomimage3 的代码，它说明了错误。我在 3 个具有不同照片列表的影片剪辑上使用相同的代码。那是问题吗？如果是这样我将如何解决它？我这样做是因为需要显示 3 个不同的组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:38:36.993

你说的是地板吗？

```
var imgRandom = imgList[Math.floor(Math.random()* imgList.length)]; 
```

# c# - c# 强类型数据集，其表适配器未返回预期结果

> ID：15528032
> 
> 赞同：4
> 
> 时间：2013-03-20T15:36:14.897
> 
> 标签：c#, sql, ms-access, dataset, tableadapter

我有一个 C# 应用程序（使用 VS 2010 高级版）实现连接到 MS Access 2003 数据库的强类型数据集。我正在这个数据集中实现一个表适配器，其 SQL 脚本是：

```
SELECT [ID], [Name], [Created By]
FROM [Table Group]
WHERE [Created By] = ?
AND [ID] IN (SELECT [Group ID] FROM [Table Clustering] WHERE [Cluster ID] = ?)
ORDER BY [Name] 
```

问题是它没有返回任何东西，但应该应该返回（我的数据库中有示例数据）。我已经尝试在 MS Access 中实现相同的脚本（用真实数据替换 ?s）并返回我期望的数据。

我通过删除`"WHERE [Cluster ID] = ?"`嵌入的 SELECT 语句进行了实验，它返回了数据，但这不是我需要的。

我还通过替换 ? 在具有实际 [Cluster ID] 的嵌入式 SELECT 语句中，它返回数据，但这又不是我需要的。

那么表适配器中的 SQL 脚本有什么问题呢？它能够在 SELECT 中实现 SELECT 吗？此外，它是否能够实施？在 SELECT 中的 SELECT 中？如何？

谢谢你！=)

![我正在研究的强类型数据集](../Images/45011369b574f250a9fa8438d8addde7.png)

![我用来创建表适配器的 SQL 构建器](../Images/4e879369eec2fc0af2aa110a1a6b02f9.png)

所以正如预期的那样，IDE 会自动为我所做的表适配器生成一个方法（检索数据），因此我不需要在代码中手动创建 SQL 脚本......供大家参考（以防你不熟悉） ，生成的方法需要两个参数（如预期的那样），一个用于 [Created By]，一个用于 [Cluster ID] ... 从这里开始，请参考我在上面发布的问题。:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T11:38:57.823

我认为这是一个 IDE 错误。具体来说，您有两个参数，因此 param1 和 param2 按此顺序排列。你会认为“？” 占位符的顺序相同，但是当您执行查询并且 IDE 要求您填写值时，最后一个“？” 是第一个参数（Cluster ID），第一个（CreatedBy）是第二个参数。这张照片告诉你我的意思：

![VS2012](../Images/1f606cf28504bf027e45df34d309f72c.png)

在图像中，ID 是第一行，Event Count 是第二行，即使 TableAdaptor 将它们作为 Event Count first 和 ID second。我没有尝试通过程序传递参数，但 IDE 以这种方式工作似乎是一个错误。

# c# - 如何判断何时在 VBA 窗口中

> ID：15528037
> 
> 赞同：8
> 
> 时间：2013-03-20T15:36:26.927
> 
> 标签：c#, .net, excel

我在 C#.net 中工作，基本上我希望我的插件能够判断用户何时保存、保存是来自 Excel 本身还是来自“Visual Basic for Application”窗口。

有没有办法判断用户当前是否在“Microsoft Visual Basic for Application”中？

编辑：我不知道这是否是一个完整的专业解决方案，但我发现 .Application.ActiveWindow.ActiveSheet == null 似乎正在工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T19:21:51.597

错误继续下一个设置 wbk = workbooks("MyBook.xls") 错误转到 0 是 wbk 什么都没有然后 _ 设置 wbk = workbooks.open("Mybook.xls")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-07T19:48:13.097

`True/False`如果项目的 VBE 窗口打开，您可以执行类似的操作以返回布尔值。我不确定 C# 等效项是什么，但您可以简单地检查工作簿的 VBProject VB 编辑器是否处于活动状态：

```
Function IsVBEActive(wb as Workbook) As Boolean

Dim vbProj

Set vbProj = wb.vbProject

IsVBEActive <> vbProj.VBE.ActiveWindow Is Nothing

End Sub 
```

**注意**这需要启用对 VB 项目对象模型的可信访问：

![在此处输入图像描述](../Images/1f8d5220c834f5c868730929b53ade56.png)

# java - 这是一个很好的技术（使用数据持有者）来消除匿名类，以减少内存泄漏风险

> ID：15528040
> 
> 赞同：6
> 
> 时间：2013-03-20T15:36:36.633
> 
> 标签：java, android

匿名类很容易导致内存泄漏，尤其是在 Android 世界中，Activity 或 Fragment 可能由于配置更改而突然销毁。这是众多示例之一。

[http://chaosinmotion.com/blog/?p=696](http://chaosinmotion.com/blog/?p=696)

[http://blog.andresteingress.com/2011/10/12/anonymous-inner-classes-in-android/](http://blog.andresteingress.com/2011/10/12/anonymous-inner-classes-in-android/)

[https://blogs.oracle.com/olaf/entry/memory_leaks_made_easy](https://blogs.oracle.com/olaf/entry/memory_leaks_made_easy)

`Activity`原因是，在or中创建匿名类时`Fragment`，匿名类将始终包含对`Activity`or的隐式引用`Fragment`。因此，当`Activity`由于配置更改而趋于报废时，如果匿名类被外部世界公开和持有，则无法对其进行垃圾收集。

**所以，我想知道，使用数据持有者技术是否是一种完全消除匿名类、降低内存泄漏风险的好方法？或者，我是否过度偏执？**

## 使用匿名类

```
public class HomeMenuFragment {
    private Parcelable selectedInfo = null;
    private List<View> homeMenuRows = new ArrayList<View>();

    private void fun() {
        ...
        ...
        row.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // homeMenuRows is member variable
                for (View r : homeMenuRows) {
                    r.setSelected(false);
                }
                row.setSelected(true);
                // selectedInfo is member variable
                selectedInfo = watchlistInfo;
            }
        });
    }
} 
```

## 使用数据持有者技术进行重构

```
public class HomeMenuFragment {
    private static class Holder {
        public Parcelable selectedInfo = null;
        public final List<View> homeMenuRows = new ArrayList<View>();        
    }
    private final Holder holder = new Holder();

    private static class MyOnClickLisnter implements OnClickListener {
        private final Holder holder;
        private final LinearLayout row;
        private final WatchlistInfo watchlistInfo;

        public MyOnClickLisnter(Holder holder, LinearLayout row, WatchlistInfo watchlistInfo) {
            this.holder = holder;
            this.row = row;
            this.watchlistInfo = watchlistInfo;
        }

        @Override
        public void onClick(View arg0) {
            for (View r : holder.homeMenuRows) {
                r.setSelected(false);
            }
            row.setSelected(true);
            holder.selectedInfo = watchlistInfo;
        }        
    }

    private void fun() {
        ...
        ...
        row.setOnClickListener(new MyOnClickLisnter(holder, row, watchlistInfo));
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:03:47.857

像这样的重构没有帮助。中的`View`对象`Holder`还包含对 的引用`Activity`，因此如果`Holder`暴露给外界，您就会发生内存泄漏。此外，您的`MyOnClickLisnter`实例，即使它已声明`static`，也持有对 the`Holder`和 a的显式引用`LinearLayout`，这两者都持有对 的引用`Activity`。我不是匿名类的粉丝，但我认为匿名`OnClickListener`通过`Activity`or之外的机会`Fragment`非常非常小。在我看来，你过于偏执了。

# c++ - 结构中的并发队列

> ID：15528051
> 
> 赞同：0
> 
> 时间：2013-03-20T15:36:54.700
> 
> 标签：c++, vector, queue

我想创建一个带有 concurrent_queue 和连接指针的连接结构。由于我的连接数量未知，因此该结构将被推回向量中。

向量和结构：

```
 struct connection_struct {
            concurrent_queue<string> messages_queue;
            connection_ptr con;
            connection_struct(concurrent_queue<string> queue) {
                messages_queue = queue;
            }
        };

        std::vector<connection_struct> allConnections; 
```

这可以编译，但是当我创建结构时，它不能再编译了。我通过以下方式创建结构：

```
 boost::thread_group message_workers;
                concurrent_queue<string> message_queue(&message_workers);

                connection_struct viewer(message_queue); 
```

编译错误很大，但我认为这是相关的位：

```
In constructor ‘websocketpp::broadcast::handler<endpoint_type>::connection_struct::connection_struct(concurrent_queue<std::basic_string<char> >) [with endpoint_type = websocketpp::endpoint<websocketpp::role::server, websocketpp::socket::tls>]’:
broadcast_handler.hpp:284:21: note: synthesized method ‘concurrent_queue<std::basic_string<char> >& concurrent_queue<std::basic_string<char> >::operator=(concurrent_queue<std::basic_string<char> >&)’ first required here 
```

任何线索我应该做什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:49:04.143

首先，想想你是否*真的*想要你的副本`concurrent_queue`（而不是*引用*它们）。一旦你确定你这样做了，你可以尝试以下（C++11，与 MS`::Concurrency`和 Intel TBB 一起工作，因为这些`concurrent_queue`s 是可复制构造的）：

```
connection_struct(const concurrent_queue<string> & queue) : message_queue(queue) {} 
```

# internet-explorer - IE 不断破坏和重新创建 kerberos 连接

> ID：15528054
> 
> 赞同：0
> 
> 时间：2013-03-20T15:37:00.847
> 
> 标签：internet-explorer, http, kerberos

如何在 IE 8 中长期保持 kerberos 连接？这是我观察到的（在 MS windows server 2003 上运行浏览器）：

*   在 IE8 中，如果我通过 kerberos 连接到服务器发出请求，它会在收到响应后立即自动断开连接。下一个请求会打开另一个连接，这显然是非常低效的。服务器确实在 HTTP 响应中发回了 Keep-Alive 标头，但它没有帮助。

*   在同一个 IE8 浏览器中，如果我与同一个服务器建立一个普通连接，连接将保持连接。

*   在 Firefox 中，与同一服务器的 kerberos 连接也保持长期存在。

因此，kerberos + IE 的组合使连接保持短暂。是否有任何 IE/注册表设置来确保连接长期有效？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:45:00.850

1.  没有 Kerberos 连接。您说的是无状态的 HTTP 连接，而 Kerberos 安全上下文不是。
2.  HTTP 1.1 没有保持活动状态。除非服务器发送一个`Connection: close`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-29T09:21:39.623

我知道这是一个非常古老的问题，但是如果有人偶然发现它，这里可能的问题是响应这些请求的服务器在 IIS“authPersistNonNTLM”中的全局​​设置设置为 False，实际上是什么使 IIS 关闭网络套接字连接（不是 HTTP ) 在每个经过 Kerberos 身份验证的 HTTP 请求之后（强制客户端在新的网络连接上重新进行身份验证），而对于 NTLM 身份验证的 HTTP 请求，默认情况下不会发生这种情况。

此外，cantonboy 所经历的可能是 Firefix 没有使用 Kerberos 身份验证（因为它与操作系统没有良好的通信），而是为所有请求回退 NTLM 身份验证，因此成功（从 HTTP 聊天的角度来看，它们看起来很相似，但可以工作非常不同）。另一方面，如果正确配置了计算机/服务器/Kerberos，则 IE 将默认使用 Kerberos。

# c# - WPF C# DataBinding 列表完成

> ID：15528055
> 
> 赞同：0
> 
> 时间：2013-03-20T15:37:11.807
> 
> 标签：c#, wpf, data-binding, listbox

我已经实现了一个用户控件，其中包含一个绑定到列表的 ListBox：

```
listBox1.ItemsSource = list; 
```

我已经实现了一个删除（唯一）对列表的引用的方法：

```
listBox1.ItemsSource = null; 
```

调用此方法后，我强制进行垃圾收集：

```
GC.Collect(); 
```

我的列表类的析构函数没有被调用。显然有一些对列表的隐藏引用。

对此行为的任何解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T15:35:52.597

解决方案是从 ObservableCollection（或实现 INotifyCollectionChanged 的​​东西）而不是 List 派生列表类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:40:22.140

*list*不为空，所以它仍然存在。

```
list = null; 
```

# c# - 基于 GET 变量的不同 MVC4 动作

> ID：15528060
> 
> 赞同：6
> 
> 时间：2013-03-20T15:37:23.120
> 
> 标签：c#, asp.net-mvc-4, asp.net-mvc-routing

有没有办法让 MVC4 根据 URL 中的 GET 变量调用不同的操作？

例如，假设我有以下两个动作。

```
[HttpPost]
public ActionResult SubmitCrash(CrashReport rawData)
{
  return View();
}

[HttpPost]
public ActionResult SubmitBug(BugReport data)
{
  return View();
} 
```

有没有办法可以使用以下 URL 让 MVC4“选择”要调用的操作？

```
http://MySite/Submit?Crash (calls 'SubmitCrash')  
http://MySite/Submit?Bug (calls 'SubmitBug') 
```

**更新：**
我非常清楚我可以按原样使用操作/网址，并通过路由来实现它（这就是我现在正在做的事情），但我真的对 GET vars 部分感兴趣问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:08:12.637

为什么不创建路线来做到这一点？

```
routes.MapRoute(
            name: "SubmitCrash",
            url: "Submit/Crash",
            defaults: new
                {
                    Action = "SubmitCrash",
                    Controller = "NameOfController",
                });

    routes.MapRoute(
            name: "SubmitBug",
            url: "Submit/Bug",
            defaults: new
                {
                    Action = "SubmitBug",
                    Controller = "NameOfController",
                }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T18:12:44.233

它不像它可能的那样整洁，但您可以为此使用“root”操作：

```
public ActionResult Submit(string method)
{
  return Redirect("Submit"+method);
}

public ActionResult SubmitCrash()
{
  return View();
}

public ActionResult SubmitBug()
{
  return View();
} 
```

**编辑**
我已扩展 ActionNameAttribute 以满足您的需求，因此您可以这样写：

```
//handles http://MySite/Submit?method=Crash
[ActionNameWithParameter(Name = "Submit", ParameterName = "method", ParameterValue = "Crash")]
public ActionResult SubmitCrash()
{
  return View();
}

//handles http://MySite/Submit?method=Bug
[ActionNameWithParameter(Name = "Submit", ParameterName = "method", ParameterValue = "Bug")]
public ActionResult SubmitBug()
{
  return View();
}

[AttributeUsage(AttributeTargets.Method, AllowMultiple = false, Inherited = true)]
public sealed class ActionNameWithParameterAttribute : ActionNameSelectorAttribute
{
    public string Name
    {
        get;
        private set;
    }
    public string ParameterName
    {
        get;
        private set;
    }
    public string ParameterValue
    {
        get;
        private set;
    }
    public ActionNameAttribute(string name, string parameterName, string parameterValue)
    {
        if (string.IsNullOrEmpty(name))
        {
            throw new ArgumentException(MvcResources.Common_NullOrEmpty, "name");
        }
        this.Name = name;
        this.ParameterName = parameterName;
        this.ParameterValue = parameterValue;
    }
    public override bool IsValidName(ControllerContext controllerContext, string actionName, MethodInfo methodInfo)
    {
        return string.Equals(actionName, this.Name, StringComparison.OrdinalIgnoreCase)
            && string.Equals(controllerContext.HttpContext.Request.QueryString.Get(ParameterName)
                , this.ParameterValue
                , StringComparison.OrdinalIgnoreCase);
    }
} 
```

# alfresco - 如何在露天扩展 Person 对象？

> ID：15528063
> 
> 赞同：1
> 
> 时间：2013-03-20T15:37:27.157
> 
> 标签：alfresco, alfresco-share

我已经尝试了一天左右的时间来扩展具有额外属性的人模型，但到目前为止，还没有成功。我遵循[了这个旧教程](http://ecmarchitect.com/archives/2012/02/27/1555)，但无法正常工作。查看页面上的一些回复表明有人在 4.1 中尝试过但没有让它工作。我正在针对 4.2 进行测试。任何见解将不胜感激。

**编辑：**

我有以下 customContentModel.xml：

```
<model name="cm:contentModel" xmlns="http://www.alfresco.org/model/dictionary/1.0">
    <!-- Optional meta-data about the model -->
    <description>Professional Person Model</description>
    <author></author>
    <version>1.0</version>

    <!-- Imports are required to allow references to definitions in other models -->
    <imports>
        <!-- Import Alfresco Dictionary Definitions -->
        <import uri="http://www.alfresco.org/model/dictionary/1.0" prefix="d" />
        <!-- Import Alfresco Content Domain Model Definitions -->
        <import uri="http://www.alfresco.org/model/content/1.0" prefix="cm" />

                <import uri="http://www.syn.fr/model/person/ext" prefix="ppm"/>
    </imports>

<types>
      <type name="cm:person">
         <title>Person</title>
         <parent>cm:authority</parent>
         <properties>
            <!-- The tokenisation set here is ignored - it is fixed for this type -->
            <!-- This is so you can not break person lookup -->
            <property name="cm:userName">
               <type>d:text</type>
               <mandatory>true</mandatory>
               <constraints>
                  <constraint ref="cm:userNameConstraint" />
               </constraints>
            </property>
            <property name="cm:homeFolder">
               <type>d:noderef</type>
               <mandatory>true</mandatory>
            </property>
            <property name="cm:firstName">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            <property name="cm:lastName">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>
            <property name="cm:middleName">
               <type>d:text</type>
            </property>
            <property name="cm:email">
               <type>d:text</type>
            </property>
            <property name="cm:organizationId">
               <type>d:text</type>
            </property>
            <property name="cm:homeFolderProvider">
               <type>d:text</type>
            </property>
            <property name="cm:defaultHomeFolderPath">
               <type>d:text</type>
            </property>
            <property name="cm:presenceProvider">
                <type>d:text</type>
            </property>
            <property name="cm:presenceUsername">
                <type>d:text</type>
            </property>
            <property name="cm:organization">
                <type>d:text</type>
            </property>
            <property name="cm:jobtitle">
                <type>d:text</type>
            </property>
            <property name="cm:location">
                <type>d:text</type>
            </property>
            <property name="cm:persondescription">
                <type>d:content</type>
            </property>
            <property name="cm:telephone">
                <type>d:text</type>
            </property>
            <property name="cm:mobile">
                <type>d:text</type>
            </property>
            <property name="cm:companyaddress1">
                <type>d:text</type>
            </property>
            <property name="cm:companyaddress2">
                <type>d:text</type>
            </property>
            <property name="cm:companyaddress3">
                <type>d:text</type>
            </property>
            <property name="cm:companypostcode">
                <type>d:text</type>
            </property>
            <property name="cm:companytelephone">
                <type>d:text</type>
            </property>
            <property name="cm:companyfax">
                <type>d:text</type>
            </property>
            <property name="cm:companyemail">
                <type>d:text</type>
            </property>
            <property name="cm:skype">
                <type>d:text</type>
            </property>
            <property name="cm:instantmsg">
                <type>d:text</type>
            </property>
            <property name="cm:userStatus">
               <type>d:text</type>
            </property>
            <property name="cm:userStatusTime">
               <type>d:datetime</type>
            </property>
            <property name="cm:googleusername">
               <type>d:text</type>
            </property>

            <property name="cm:emailFeedDisabled">
                <type>d:boolean</type>
            </property>

            <property name="cm:subscriptionsPrivate">
                <type>d:boolean</type>
            </property>

            <!-- system maintained / protected values -->

            <property name="cm:emailFeedId">
                <type>d:long</type>
                <protected>true</protected>
            </property>

            <property name="cm:sizeCurrent">
                <type>d:long</type>
                <protected>true</protected>
                <mandatory enforced="true">true</mandatory>
            </property>

            <property name="cm:sizeQuota">
                <type>d:long</type>
                <protected>true</protected>
            </property>

         </properties>

         <associations>
            <association name="cm:avatar">
               <source>
                  <role>cm:avatarOf</role>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </source>
               <target>
                  <class>cm:content</class>
                  <role>cm:hasAvatar</role>
                  <mandatory>false</mandatory>
                  <many>false</many>
               </target>
            </association>
         </associations>
      </type>

      <mandatory-aspects>
     <aspect>ppm:attributes</aspect>
      </mandatory-aspects>
</types>     
</model> 
```

**我收到有关cm:authority**的错误，说找不到。肯定所有 cm:* 命名空间对象都会在可扩展对象之前加载，因此 cm:authority 本身是否可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-08T11:50:53.840

做起来真的很简单，只需创建您自己的扩展 cm:person 的类型并添加您的属性。

```
<type name="ab:myperson">
         <title>Person</title>
         <parent>cm:person</parent>
         <properties>
            <!-- The tokenisation set here is ignored - it is fixed for this type -->
            <!-- This is so you can not break person lookup -->
            <property name="ab:customField">
               <type>d:text</type>
               <mandatory>true</mandatory>
            </property>.. 
```

问题是不会在新用户上设置此属性，因为它们不会是您想要的类型 ab:myperson。

您需要创建自定义行为，通过将 cm:person 的类型更改为 ab:myperson 来添加您的属性。

最好的解决方案是创建方面而不是自定义类型，并通过行为添加您的方面并设置属性。

创建自定义行为的好教程是

# [http://alfrescoblog.com/2014/06/02/alfresco-creating-custom-behavior-tutorial/](http://alfrescoblog.com/2014/06/02/alfresco-creating-custom-behavior-tutorial/)

这将是如何扩展 cm:person 并使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T10:01:19.873

ECMA 架构师指南示例有效。我下载了代码示例并根据我的情况进行了调整。

# api - API Key/Credentials 推荐

> ID：15528070
> 
> 赞同：0
> 
> 时间：2013-03-20T15:37:43.163
> 
> 标签：api, authentication, api-key

为我们的整个 Web 应用程序开发 API 服务层。一个建议只是为每个请求传递一个 API 密钥（类似于 Google），另一个建议是进行基于消息的身份验证

[http://en.wikipedia.org/wiki/Hash-based_message_authentication_code](http://en.wikipedia.org/wiki/Hash-based_message_authentication_code)

每个人对继续选择哪种方法的建议是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:50:16.913

我认为问题应该是

> 我需要验证消息的完整性吗？

如果你关心的只是限制对所述资源的访问，那么除了 API 密钥之外的任何东西都将是多余的；API 密钥是轻量级的，易于实现和使用身份验证标准（BASIC 等）。收到消息后，您可以对数据执行简单的完整性检查。

如果您需要验证用户和消息的真实性，那么基于消息的身份验证是要走的路

# python - 标记数组python

> ID：15528072
> 
> 赞同：0
> 
> 时间：2013-03-20T15:37:47.447
> 
> 标签：python

我正在使用标记数组（larry）模块（[http://berkeleyanalytics.com/la/](http://berkeleyanalytics.com/la/)）创建一个巨大的矩阵，其中行（变量名称）和列（日期）被标记以便于访问。

我的问题是我试图划分一个拉里，但它不断出错：

```
larry.set([''.join([country_and_channel,'EmailConfirmed#']),row['mm']],larry.get([''.join([country_and_channel,'EmailConfirmed#']),row['mm']]) / int(row['sume'])) 
```

RuntimeWarning：在 double_scalars 中遇到无效值

但是，所有其他运算符 (+,-,*) 都有效

# python - 全局变量和编码风格建议

> ID：15528073
> 
> 赞同：13
> 
> 时间：2013-03-20T15:37:48.480
> 
> 标签：python, global-variables

这个问题很笼统，但对我来说更了解python中的良好编码实践......

我想定义一个常量，我可以在任何函数内部使用，而不必将它作为参数传递，也不需要在声明后的任何地方更改它 - 也许最好让它无法更改但不确定我能不能做到。

就编程风格（编码、名称约定等）而言，最好的方法是什么？

即，GLOBAL_CONSTANT='this_variable_will_not_be_changed'

我的 python 代码会有这种形式，它也是很好的风格吗？

```
#!/usr/bin/env python

import sys
import os

GLOBAL_CONSTANT='this_variable_will_not_be_changed'

def test():
    print GLOBAL_CONSTANT
    return 0

def main():
    test()
    return 0

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T15:52:36.403

您的代码并没有真正做任何事情，所以我想这很好！关于代码样式，如有疑问，请参阅 PEP 8。

*   [全局变量](http://www.python.org/dev/peps/pep-0008/#global-variable-names "全局变量")

*   [常数](http://www.python.org/dev/peps/pep-0008/#constants "常数")

没有比你已经给我们更多的信息，我不得不说你的约定是好的。

但是，没有必要严格遵守 PEP-8。一般的共识往往是“保持你的代码一致”。阅读 PEP-8 格式的文件可能会令人困惑，只是偶然发现 Java 式或匈牙利符号代码的“块”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:52:31.010

在 99% 的情况下，这已经足够了。但是如果你非常需要这个值真的是恒定的，你可以检查[这个](https://stackoverflow.com/questions/2682745/creating-constant-in-python)

顺便说一句：通过反映其他语言的所有内容来学习 Python 将是一种艰难的方式。试着忘记过去。学习认为 Pythonic。

# java - 比较器没有给出预期的结果

> ID：15528074
> 
> 赞同：0
> 
> 时间：2013-03-20T15:37:49.390
> 
> 标签：java, sorting, anagram

下面是我编写的代码，用于将所有字谜放在一组字符串中。输出没有按预期排序。实际上，输出与输入相同。我哪里错了？

```
package set2;

import java.util.Arrays;
import java.util.Comparator;

public class printAllAnagrams {
    public static void main(String[] args) {
        String[] s = { "Harsha", "ant", "sha", "tna", "ash" };
        sortAnagrams(s);
        for (String e : s) {
            System.out.println(e);
        }
    }

    private static void sortAnagrams(String[] s) {
        Arrays.sort(s, new Comparator<String>() {

            @Override
            public int compare(String s1, String s2) {
                s1.toLowerCase();
                s2.toLowerCase();

                if (s1.length() != s2.length()) {
                    return -1;
                } else {
                    char[] s1_char = s1.toCharArray();
                    char[] s2_char = s2.toCharArray();
                    Arrays.sort(s1_char);
                    Arrays.sort(s2_char);

                    for (int i = 0; i < s1_char.length; i++) {
                        if (s1_char[i] != s2_char[i]) {
                            return -1;
                        }
                    }
                }
                return 0;
            }

        });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:40:50.780

不用仔细看，这

```
 s1.toLowerCase(); 
```

不会改变`s1`，而是返回一个*新*字符串，它是 . 的小写变体`s1`。在 Java 中，字符串是*不可变*的。因此，您需要收集并使用从上面返回的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:41:26.530

这不一定是正确的：

```
if (s1.length() != s2.length()) {
    return -1;
} 
```

这将意味着如果`s1.length() != s2.length()` `s1 < s2` **和** `s2 < s1`。

我认为你的意思是：

```
public int compare(String s1, String s2) {
    if (s1.length() == s2.length()) {                   
        char[] s1_char = s1.toLowerCase().toCharArray();
        char[] s2_char = s2.toLowerCase().toCharArray();
        Arrays.sort(s1_char);
        Arrays.sort(s2_char);

        for (int i = 0; i < s1_char.length; i++) {
            if (s1_char[i] != s2_char[i]) {
                return (int)(s1_char[i] - s2_char[i]);
            }
        }
        return 0;
    } else {
        return s1.length() - s2.length();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:41:57.543

你为什么不做以下事情：

```
 @Override
        public int compare(String s1, String s2) {
            return s1.toLowerCase().compareTo(s2.toLowerCase());
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:42:48.697

您的比较器根本不稳定。

首先你`return -1`如果长度不同。这意味着根据操作数顺序，您可能会发现“asbd”>“ash”或相反。

你也对 char 比较做同样的事情。

```
if (s1_char[i] != s2_char[i]) {
   return -1;
} 
```

将其替换为：

```
if (s1_char[i] != s2_char[i]) {
  return s1_char[i] > s2_char[i] ? 1 : -1;
} 
```

使用相同的模式进行长度比较。

**编辑**从`compare`方法返回 -1 意味着您发现第一个操作数小于[文档](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)中的第二个操作数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:44:38.450

字符串是不可变的，因此仅在对象上调用方法`String`不会改变其`String`本身。您应该使用以下内容：

```
s1 = s1.toLowerCase();
s2 = s2.toLowerCase(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T15:49:02.690

从[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)：

> 实施者必须确保`sgn(compare(x,y)) == -sgn(compare(y,x))`所有`x`和`y`. （这意味着`compare(x,y)`当且仅当`compare(y,x)`抛出异常时必须抛出异常。）。

这基本上意味着如果您调用`compare(s1,s2)`它必须产生 -1 *`compare(s2,s1)`并且您的任何`return -1;`陈述都不会遵循这一点。取而代之的是，您可以将整数和字符相互比较并返回该值，例如此代码有效（而不是`return -1;`）：

```
return Integer.compare(s1.length(),s2.length()); //for the ints

return Character.compare(s1_char[i],s2_char[i]); //for the chars 
```

另请查看 Vishal 的答案，这是另一个错误。

# opengl - OpenGL 棋子

> ID：15528076
> 
> 赞同：0
> 
> 时间：2013-03-20T15:37:51.077
> 
> 标签：opengl, graphics, glut

我需要在 OpenGL 中设置国际象棋，并想知道这是否是正确的方法。

这是典当的代码：

```
void pawn(void)
{

    glClear (GL_COLOR_BUFFER_BIT);

    DrawArc(xc+6, yc-3,1.3,M_PI/2,M_PI/2,25);
    DrawArc(xc+6.7, yc-3,1.3,M_PI/2,-M_PI/2,25);
    DrawArc(xc+6, yc-0.9,0.8,M_PI/2,M_PI,25);
    DrawArc(xc+6.7, yc-0.9,0.8,M_PI/2,-M_PI,25);
    DrawArc(xc+6.35, yc+0.25,0.5,(7*M_PI)/4,(3*M_PI)/2,25);
    glBegin(GL_LINE_LOOP);
        glVertex2d(xc+4.7,yc-3);
        glVertex2d(xc+8,yc-3);
    glEnd();

    glFlush ();
} 
```

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:43:37.077

在代码中创建几何图形并不是最有效的方法。

常见的方法是：

*   在 Blender 等 3D 建模工具中创建模型（免费）
*   将其保存到文件中，例如`.ply`或`.obj`
*   将几何图形加载到显卡内存（[顶点缓冲区对象](http://www.opengl.org/wiki/Vertex_Specification#Vertex_Buffer_Object)）
*   `glDrawArrays`使用或渲染它`glDrawElements`

# javascript - 用 javascript 添加

> ID：15528078
> 
> 赞同：-2
> 
> 时间：2013-03-20T15:37:53.793
> 
> 标签：javascript, calculator

如果下拉设置为“是”，任何人都可以帮我编写一些 JavaScript 来帮助我添加这两个字段吗？

示例：如果 txtoneside_slider = Yes，则将 txtoneside 值添加到总计中

如果 txttwoside_slider = Yes 然后将 txttwoside 值添加到总计中

小提琴示例：http: [//jsfiddle.net/adder1999/rcU44/2/](http://jsfiddle.net/adder1999/rcU44/2/)

```
<div id="onewindow">
   <label for="txtoneside" class="editor-label"><strong>1 Side</strong></label>
    <div align="right">
      <input type = "text" name = "txtoneside" id="txtoneside" value = "45" />
       <select name="txtoneside_slider" id="txtoneside_slider" data-role="slider" data-mini="true" />
         <option value="no">No</option>
         <option value="yes">Yes</option>
       </select> 
         </div>

<div id="onewindow">
   <label for="txtoneside" class="editor-label"><strong>2 Side</strong></label>
    <div align="right">
      <input type = "text" name = "txttwoside" id="txtoneside" value = "25" />
       <select name="txttwoside_slider" id="txttwoside_slider" data-role="slider" data-mini="true" />
         <option value="no">No</option>
         <option value="yes">Yes</option>
       </select> 
         </div>

<div id="grandtotal">
   <label for="txtgrandtotal" class="editor-label"><strong>JOB TOTAL</strong></label>
   <div align="right">
   <input type = "text" name = "txtgrandtotal" id="txtgrandtotal" value = "" />
   </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:44:32.827

[您可以使用onChange](http://api.jquery.com/change/)实现一个 jquery 函数，如果 this 的值为 yes，则将输入框的值存储到一个变量中，如果两者都是 yes，则使用它来满足您的任何需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:55:43.767

试试这个：

```
<div id="onewindow">
   <label for="txtoneside" class="editor-label"><strong>1 Side</strong></label>
    <div align="right">
      <input type = "text" name = "txtoneside" id="txtoneside" value = "45" />
       <select name="txtoneside_slider" id="txtoneside_slider" data-role="slider" data-mini="true" onchange="javascript: if(this.value=='yes'){ document.getElementById('txtgrandtotal').value=document.getElementById('txtoneside').value;}"/>
         <option value="no">No</option>
         <option value="yes">Yes</option>
       </select> 
         </div>

<div id="onewindow">
   <label for="txtoneside" class="editor-label"><strong>2 Side</strong></label>
    <div align="right">
      <input type = "text" name = "txttwoside" id="txttwoside" value = "25" />
       <select name="txttwoside_slider" id="txttwoside_slider" data-role="slider" data-mini="true"  onchange="javascript: if(this.value=='yes'){ document.getElementById('txtgrandtotal').value= parseInt(document.getElementById('txtgrandtotal').value) + parseInt(document.getElementById('txttwoside').value);}" />
         <option value="no">No</option>
         <option value="yes">Yes</option>
       </select> 
         </div>

<div id="grandtotal">
   <label for="txtgrandtotal" class="editor-label"><strong>JOB TOTAL</strong></label>
   <div align="right">
   <input type = "text" name = "txtgrandtotal" id="txtgrandtotal" value = "" />
   </div>
 </div> 
```

也许是你想要的；它适用于你的小提琴。

萨卢多斯。

# windows-installer - Installshield / MSI 编辑响应式转换

> ID：15528082
> 
> 赞同：0
> 
> 时间：2013-03-20T15:38:00.277
> 
> 标签：windows-installer, transform, installshield, packaging

是否可以直接编辑响应式转换 (MST) 而无需执行最初为创建原始 mst 而执行的所有步骤？

我正在编辑以前的开发人员创建的转换，并希望保留他的选择，以反对可能以不同的选择响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:43:44.750

*   右键单击 MST 文件并选择使用 InstallShield 编辑。

*   打开转换向导将出现。点击下一步。

*   它会询问您与 MST 相关的基本 MSI。浏览它并单击下一步。

*   添加您可能拥有的任何其他转换（您可以应用多个转换，因此您可能根本不应该编辑他的转换）

*   点击下一步

*   点击完成

现在您可以使用 InstallShield 修改转换并在完成后保存。

# wpf - ObservableCollection 中的自定义 DependencyProperty

> ID：15528083
> 
> 赞同：0
> 
> 时间：2013-03-20T15:38:00.323
> 
> 标签：wpf, collections, dependency-properties

如何添加自定义 DependencyProperty？这种方法不起作用。

```
public class SongCollection : ObservableCollection<Song>
{
public static readonly DependencyProperty UrlProperty = DependencyProperty.Register(
  "Url", typeof(ObservableCollection<Point>), typeof(Arrow));
public Uri Url
        {
            get { return (Uri)GetValue(UrlProperty);}
            ....
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:54:48.543

那么问题应该是它不编译。由于`ObservableCollection<T>` [不是从 派生](http://msdn.microsoft.com/en-us/library/ms668604.aspx)的`DependencyObject`，因此即使我会更正其余代码，此实现也无法工作，这也是完全错误的。

有关更多信息，`DependencyProperties`请查看[此处](http://msdn.microsoft.com/en-us/library/ms752914.aspx)。

**编辑**

您的财产的正确实施将是

```
public class SomeClass : DependencyObject
{
    public static readonly DependencyProperty UrlProperty = 
        DependencyProperty.Register("Url", typeof(Uri), typeof(SomeClass));

    public Uri Url
    {
        get { return (Uri)GetValue(UrlProperty);}
        set { SetValue(UrlProperty, value); }
    }
} 
```

**编辑 2**

包装器实现

```
public class SomeClass : DependencyObject
{
    public static readonly DependencyProperty UrlProperty = 
        DependencyProperty.Register("Url", typeof(Uri), typeof(SomeClass), 
        new PropertyMeta(OnUrlChanged));

    public Uri Url
    {
        get { return (Uri)GetValue(UrlProperty);}
        set { SetValue(UrlProperty, value); }
    }

    public ObservableCollection<Song> Songs { get; set; }

    private static void OnUrlChanged (DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var wrapper = d as SomeClass;
        if (wrapper == null)
            return;

        // ... what ever you want to do with the collection
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:20:56.777

DependencyProperties 用于在 DependencyObjects 上公开绑定功能。

基本上，您不能在不是从 DependencyObject 派生的类上声明 DependencyProperty，而且，除非在 DependencyObject 上使用它以绑定到该对象的 DataContext 中的属性，否则您不需要声明 DependencyProperty。

# javascript - Javascript中使用hover fade和fancybox的函数

> ID：15528084
> 
> 赞同：0
> 
> 时间：2013-03-20T15:38:03.273
> 
> 标签：javascript, function, variables, dreamweaver

目前，下面的代码将我的图像显示为灰度，当将鼠标悬停在上方时 - 它以彩色显示。我需要在图像中再添加一项功能。当悬停在它上面时，它需要成为一个 Fancybox 画廊的链接。我不确定如何编码。注意：列表标签有缩略图的灰色版本和彩色版本。section 标签具有我想要链接到的实际全尺寸版本。

这是我的完整（建设中）网站的链接。

```
<!--gray to color on hover code--> 

<script type='text/javascript'>
    $(document).ready(function(){

        $("img.waldengray").hover(
        function() {
        $(this).stop().animate({"opacity": "0"}, "slow");
        },
        function() {
        $(this).stop().animate({"opacity": "1"}, "slow");
    });
});

</script>

<!--generic fancybox code-->

<script type='text/javascript'>
$(document).ready(function(){
$('.fancybox-thumbs').fancybox({
                prevEffect : 'none',
                nextEffect : 'none',

                closeBtn  : false,
                arrows    : false,
                nextClick : true,

                helpers : {
                    thumbs : {
                        width  : 50,
                        height : 50
                    }
                }
            });
});
</script>

<body>

<!--gray and color thumbnails-->
<ul>

<li><img src="images/waldengray.png" alt="waldengray" width="362" height="105" `class="waldengray" id="waldengray"></li>`
<li><img src="images/waldencolor.png" alt="waldencolor" width="362" height="105" class="waldencolor" id="waldencolor"></li>
</div>

</ul>

<!--full size image-->        
<section>
    <p><a class="fancybox-walden" data-fancybox-group="walden" href="images/waldenlrg.png"><img src="images/waldenlrg.png" alt="" /></a></p>
</section>

</div><!--wrapper-->

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:02:29.160

此外，为您需要动画的所有 img 使用一个类，因此只需要一次调用悬停。

```
 $(".THE_CLASS").hover(
        function() {
            $(this).stop().animate({"opacity": "0"}, "slow");
        },
        function() {
            $(this).stop().animate({"opacity": "1"}, "slow");
        }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:48:13.297

通过创建单个函数变量并重用它来进行重构：

```
var getAnimFn = function(config) {
       return function() {
          $(this).stop().animate(config, "slow");
       }
}; 
```

然后在需要的地方调用它：

```
getAnimFn({"opacity": "0"});
getAnimFn({"opacity": "1"}); 
```

# java - 如何在不初始化对象的情况下调用类的方法？

> ID：15528088
> 
> 赞同：-2
> 
> 时间：2013-03-20T15:38:17.360
> 
> 标签：java, class, object

例如我有

```
class A{
    ...
    void function()
    {

    } 

}

class B{
    ...
    void function2()
    {

    } 

}

class C{
    ...
    void function3()
    {

    } 

}

class myClass{
    ...
} 
```

我可以在类中使用`function()`、`function2()`和`function3()`方法`myClass`而不创建类 、 或 的`A`对象`B`吗`C`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:05:29.493

现在你有了*实例*方法。因此，您需要 A、B 和 C 的实例才能调用这些方法：

```
new A().function(); 
```

如果您使用静态修饰符声明方法，即

```
public static void function() { /* ... */ } 
```

那么您可以在不创建实例的情况下调用它们：

```
A.function(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:27:15.847

首先，我将方法设为静态，然后从另一个类中将它们称为 classNameThatHasTheStaticMethod.StaticMethodName()

# sql - 如何在case语句的else部分使用nullif函数

> ID：15528090
> 
> 赞同：-2
> 
> 时间：2013-03-20T15:38:23.390
> 
> 标签：sql, oracle, db2

我有带有 nullif 函数的 case 语句...

```
case when itm>0 then itm else nullif(vnd||':','0:')||sty end 
```

每当其他部分正在执行时，如果 vnd 为空，除了 0 我没有得到 sty 列。如果 vnd 存在，那么我需要连接 ':' vnd 和 sty 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:04:14.053

我实际上不确定您在这里需要什么。我想我有一个想法，但需要澄清一下。你是说如果 vnd 为空，那么你没有得到 sty 字段？

如果这是真的，那么 DB2 正在做您想做的事，因为将空值连接到其他值也会返回空值。

```
CASE 
    WHEN itm > 0 THEN itm
    WHEN (vnd IS NULL OR vnd = 0) THEN sty
    ELSE vnd || ':' || sty
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:01:49.780

我不确定我是否完全理解你的问题，但这会让你接近你正在寻找的东西吗？

```
DECLARE @itm VARCHAR(10), @sty VARCHAR(10), @vnd VARCHAR(10)
SET @itm = '0'
SET @sty = '2'
SET @vnd = '3'

SELECT
case 
    when @itm>0 then @itm
    WHEN @itm <= 0 THEN ISNULL(@vnd, 0) + ':' + ISNULL(@sty, '0') 
    END 
```

# jquery - jquery在c#中找不到动态创建的元素

> ID：15528094
> 
> 赞同：1
> 
> 时间：2013-03-20T15:38:31.513
> 
> 标签：jquery, jquery-selectors

我正在创建一个输入框并尝试向该输入添加一个事件 keydown。如果我静态创建输入，我可以用 jquery 找到它。但是，如果我在后面的代码中创建它，我无法通过 jquery 找到它。

这是我动态创建输入的c#代码

```
result0 += "<div style='float:left;width:130px'>Telephone: </div><div style='float:left;width:200px'><input id='txt_basic_telno" + i + "' class='blue_input' type='text' value='" + dr["MobilePhone"].ToString() + "' style='width:250px' maxlength='11' /></div><div style='clear:both'></div>"; 
```

这是我的 jquery 代码，当用户在焦点位于输入框上时按下一个键时应该触发

```
$("#txt_basic_telno").keydown(function (event) {
        alert('test');
}); 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:42:21.100

如果您的 id 不完全是，`txt_basic_telno`而只是以 开头`txt_basic_telno`，这似乎表明您的代码，那么您可以使用这个：

```
$(document.body).on('keydown', '[id^=txt_basic_telno]', function(e) {
     alert('click!');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:23:02.327

您正在使用两个不同的 ID：'txt_basic_telno" + i + "' 和只是 'txt_basic_telno'

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:41:16.610

你需要[使用](http://api.jquery.com/on/)

```
$(document).on('keydown',"[id^=txt_basic_telno]", function (event) {
        alert('test');
}); 
```

尽量不要附加它，`document`因为它效率低下。用最近的静态容器替换文档。

这是一个要演示的[小提琴](http://jsfiddle.net/zGM7H)

**编辑**

从dystroy被盗的选择器......他的回答更好，但我想保留文档评论，因为它很重要

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:41:15.077

尝试这个

```
$(document).on('keydown',"#txt_basic_telno",function (event) {
        alert('test');
}); 
```

阅读[http://api.jquery.com/on](http://api.jquery.com/on)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-20T15:41:40.280

**当调用 jQuery 函数时，jQuery**将事件处理程序绑定到与选择器匹配的任何现有对象，因此如果您希望它应用于动态创建的内容，您需要在每次新元素之后调用 jQuery .keydown 函数被创建。

# wix - 如何在 Wix 中管理同名文件？

> ID：15528097
> 
> 赞同：5
> 
> 时间：2013-03-20T15:38:34.067
> 
> 标签：wix, wix3.5

我在.Net3.5 或.Net4.0 中编译了一些dll。（它们具有相同的名称）
在 wix 中，我有 2 个条件功能。
功能 A 使用 ComponentRef Id="Cmp35" 安装我的应用程序的 .net3.5 dll
功能 B 使用 ComponentRef Id="Cmp40" 安装 .net4.0 dll
功能是互斥的，只安装了一个功能。

我的组件：

```
<?xml version="1.0" encoding="UTF-8"?>  
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi">  
    <Fragment>  
        <DirectoryRef Id="INSTALLDIR">  
            <Component Id="Cmp35" Guid="..">  
                <File Id="Behaviors.Assembly" Name="$(var.Behaviors.v3.5.gen.TargetFileName)" Source="$(var.Behaviors.v3.5.gen.TargetPath)" />  
               <File Id="Other.Assembly" Name="$(var.Other.v3.5.gen.TargetFileName)" Source="$(var.Other.v3.5.gen.TargetPath)" />  
           </Component>  
           <Component Id="Cmp40" Guid="...">  
               <File Id="Behaviors.Assembly.4.0" Name="$(var.Behaviors.v4.0.gen.TargetFileName)" Source="$(var.Behaviors.v4.0.gen.TargetPath)" />  
               <File Id="Other.Assembly.4.0" Name="$(var.Other.v4.0.gen.TargetFileName)" Source="$(var.Other.v4.0.gen.TargetPath)" />  
           </Component>  
       </DirectoryRef>  
    </Fragment>  
</Wix> 
```

我在编译过程中出现错误：错误 LGHT0204: ICE30: The target file ... is installed in ... by an LFN system 上的两个不同组件：
似乎我有一个问题，因为文件名相同
......有办法管理这个吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T17:27:41.283

这些只是来自 ICE30 的警告。如果您验证了组件确实是互斥的，那么您可以忽略警告，因为您按照他们的指示做了。:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T16:50:23.287

我通常通过将文件安装到不同的子目录然后使用 CopyFile 元素（DuplicateFile 表）将文件克隆到所需目录来绕过 ICE30 警告。当您的功能或组件相互排斥并且您希望 ICE 保持安静时，这很有效。

# android - 活动调用 StartActivityForResult

> ID：15528101
> 
> 赞同：1
> 
> 时间：2013-03-20T15:38:45.157
> 
> 标签：android, xamarin.android

是否可以在**StartActivityForResult()**中启动一个活动并在她运行结果时保存这个新活动的状态？
例如：
Activity A 通过 StartForResult 启动 Activity B，当 Activity B 完成工作并返回适当的值时，我可以使用 B **OnSaveStanceState**保存 Activity 的状态吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:43:52.627

那是不可能的。Activity 的生命周期在它们完成时停止。活动退出时不会调用 OnSaveInstanceState。您可以尝试获取活动 A 中的当前状态并将其传递给新的活动 B，以便您可以重建旧状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:34:54.263

不，在这种情况下实际上`OnSaveInstanceState`甚至不会被调用。

[`OnSaveInstanceState`](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)如果活动因内存不足、方向变化等原因被操作系统终止，则调用该**活动**。

但是由于您使用B 启动**B**`StartActivityForResult`，因此您始终可以在B完成之前通过调用手动保存**B的状态。**这完全取决于您需要保存**B**`Intent.PutExtra`中的哪种状态。然后**A**将获得状态，您可以稍后使用它。

# ios - 撤销特定的配置文件？

> ID：15528103
> 
> 赞同：3
> 
> 时间：2013-03-20T15:38:49.473
> 
> 标签：ios, provisioning-profile, ios-enterprise

我有一个 iOS 企业开发者帐户，它只允许我拥有一个分发证书。我的分发证书用于多个应用程序 ID 和通配符应用程序 ID 的多个临时和企业配置文件。

我想撤销特定应用 ID 的配置文件，因此使用该配置文件签名的构建将不再启动。在不撤销整个证书并且不必分发具有新配置文件的*所有应用程序的新版本的情况下，这是否可能？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:48:12.877

~~您可以撤销配置文件和/或证书，但这不会影响已安装的应用程序。~~

~~只有开发和 Ad-Hoc 配置文件具有有限的生存期，InHouse 配置文件没有这个。~~

好吧，我被证明是错误的，正如苹果所说，如果您[收回分发证书](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/ManaginganiOSDistributionCertificate/ManaginganiOSDistributionCertificate.html)，您的应用程序将无法启动。如果使用开发证书对其进行测试并且没有任何反应。但是我不能（阅读不想）用我的发行证书签署的内部配置文件来测试这个。

# macos - OS X 中首选项窗格图标的最大尺寸是多少？

> ID：15528105
> 
> 赞同：1
> 
> 时间：2013-03-20T15:38:57.180
> 
> 标签：macos, icons, size, preferences

OS X 中首选项窗格图标的最大尺寸是多少？

我查看了 OS X 样式指南，但找不到最大尺寸，尤其是关于 Retina 和非 Retina 资产。

例如这些来自 XCode 4.6

![在此处输入图像描述](../Images/f419466efed2b47624ec51edd8aa2c2c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:44:20.900

我相信图标的最大尺寸适用`512x512`于非视网膜和`1024x1024`视网膜显示器。但是，在首选项窗格中，图标显示得更小。

我不知道你的问题的答案。这取决于显示器的大小，但可以肯定的是，在您的情况下，在视网膜显示器上，您不需要超过`64x64`. 但是，我鼓励您开发全套，因为它不需要太多额外的工作，这样您就可以准备在未来更好的显示器上使用它们。此外，如果以后需要，您将有一个好看的版本显示在其他地方。

请参阅[**设计工具栏图标**](http://developer.apple.com/library/mac/#documentation/userexperience/conceptual/applehiguidelines/IconsImages/IconsImages.html)。

他们说：

> 为标准和高分辨率显示器创建图标。您需要提供两种资源：32x32 和 32x32@2x。对应的画布尺寸见表 5-1。

*注意：32x32@2x = 64x64 像素*

**其他资源：**

*   [图标设计指南](http://developer.apple.com/library/mac/documentation/userexperience/conceptual/applehiguidelines/OSXHIGuidelines.pdf)

![在此处输入图像描述](../Images/8b07d575a220262fad4ef603288df7e1.png)

# crystal-reports - 没有交叉表的 Crystal Reports 行到列

> ID：15528106
> 
> 赞同：1
> 
> 时间：2013-03-20T15:38:58.040
> 
> 标签：crystal-reports, report, rows

我需要将多行的信息转换为单行显示。

我的桌子看起来像这样

> **键类型值**
> 
> 一个日期 1 May10
> 
> 一个日期2 May11
> 
> 一个日期3 May12
> 
> 两个日期1 June20
> 
> 两个日期2 June21
> 
> 两个日期3 June22

我需要它在报告中看起来像这样

> **键* 日期1 日期2 日期3**
> 
> 一个 May10 May11 May12
> 
> 两个 June20 June21 June23

我正在运行 Crystal Reports 2008。我无法使用交叉表报表，因为我还有许多其他列将添加到报表中。

# r - 对多个表达式使用 eval(substitute())

> ID：15528108
> 
> 赞同：7
> 
> 时间：2013-03-20T15:38:59.747
> 
> 标签：r, eval, substitution

我之前问过一个关于[如何在没有引号的情况下接受文本/字符参数](https://stackoverflow.com/questions/13040120/how-to-take-in-text-character-argument-without-quotes)的问题。在我在那个问题中提供的场景中，参数的数量是固定的，所以我在函数定义中使用的 eval(substitute()) 的数量对应于我拥有的参数的数量。

现在我有一个场景，我有一个参数，例如`factors`（见下文），并且用户可以指定多个列名而不使用它们周围的引号 - 即，它们将使用`factor1`而不是`"factor1"`. 我想评估用户提供的每个列名。

```
foo<-function(data.frame, factors){

} 
```

**问题1：我想知道当表达式的数量可以变化时，是否有一种方法可以将 eval(substitute()) 应用于多个表达式。**

正如所指出的， eval(substitute()) 可能具有潜在的危险，并且在某些情况下可能会失败。

**问题2：除了使用引用的列名之外，还有更优雅的方法来处理这个问题，如下所示：**

```
foo<-function(data.frame, factors){
   output<-data.frame[, factors]
   output
}
foo(data.frame=dataset, factors=c("factor1", "factor2")) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T16:00:49.743

首先，在您提供的示例中，我肯定更喜欢使用带引号的列名。对他们有利的一件事是，他们将允许如下有用的间接寻址：

```
XX <- c("cyl", "mpg")
foo(mtcars, XX) 
```

也就是说，如果您确实想传递未引用符号的向量，这可以解决您的**Question 2**。

```
foo <- function(data, factors) {
    jj <- as.character(substitute(factors)[-1])
    data[,jj]
}

head(foo(data = mtcars, factors = c(cyl, mpg)))
#                   cyl  mpg
# Mazda RX4           6 21.0
# Mazda RX4 Wag       6 21.0
# Datsun 710          4 22.8
# Hornet 4 Drive      6 21.4
# Hornet Sportabout   8 18.7
# Valiant             6 18.1 
```

# c++ - auto_ptr 中的 CRITICAL_SECTION 且没有 DeleteCriticalSection 调用

> ID：15528111
> 
> 赞同：2
> 
> 时间：2013-03-20T15:39:09.407
> 
> 标签：c++, windows, multithreading, c++builder, critical-section

我面前有一些我不太确定我认为没问题的代码。一个关键部分被放入 a`auto_ptr`并且`DeleteCriticalSection`永远不会被调用。但我似乎记得`CRITICAL_SECTION`应该只用临界区函数修改实例。我尝试通过内存泄漏检查运行它，但它抱怨。

这当然是多线程系统的一部分，对关键部分的访问是在几个地方完成的。但是，如果我将其修剪下来，这基本上`CRTITCAL_SECTION`就是现在的处理方式。

```
void test() {
  auto_ptr<CRITICAL_SECTION> foo;
  foo.reset(new CRITICAL_SECTION());
  InitializeCriticalSection(foo.get()); 
} 
```

由于我不相信`auto_ptr`超出范围会正确删除关键部分，因此我尝试将其快速更改为

```
void test() {
  auto_ptr<CRITICAL_SECTION> foo;
  foo.reset(new CRITICAL_SECTION());
  InitializeCriticalSection(foo.get()); 
  DeleteCriticalSection(foo.get());
} 
```

并且内存泄漏检测变得更加快乐。临界区一直存在，直到应用程序关闭。那么我应该花时间更新`DeleteCriticalSection`用于实际删除关键部分的代码，还是只是忍受应用程序关闭并释放所有内存的事实？

**更新**

*对WhozCraig*的回答：是的，查看它包含关键部分的对象的多个实例在任何给定时间都可以是活动的，并且不能共享单个全局关键部分。

# c# - 如何在 JsonValue 中序列化 JsonPrimitive

> ID：15528112
> 
> 赞同：4
> 
> 时间：2013-03-20T15:39:13.717
> 
> 标签：c#, json, serialization, mono, system.json

我想`Test`为所有人下一次传球`TestCases`：

```
[TestCase("{\"foo\":\"bar\"}")]             // [PASS]
[TestCase("C:\\temp")]                      // [PASS]
[TestCase("Hi \"\"!")]                      // [FAIL]
[TestCase("{\"\":\"\"}")]                   // [FAIL]
[TestCase("It is a nice day {\"\":\"\"}!")] // [FAIL]
public void JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual (string content)
{
        JsonValue json = new JsonObject ();
        json ["Content"] = new JsonPrimitive (content);

        string serializedJson = json.ToString (); 
        System.Diagnostics.Debug.WriteLine (serializedJson);

        JsonValue deserializedJson = JsonValue.Parse (serializedJson);

        string deserializedContent = deserializedJson["Content"];
        Assert.AreEqual (content, deserializedContent);
} 
```

但我得到了这个结果：

```
Tests run: 5 Passed: 2 Inconclusive: 0 Failed: 3 Ignored: 0 
```

假设用户刚刚输入了一条消息，例如`It is a nice day {"":""}!`. 我想获得一个带有以下输出字符串的 JsonValue`{"Content": "It is a nice day {\"\":\"\"}!"}`并能够将其解析回来。就这些。

我究竟做错了什么？

**编辑**

我在该`Debug.WriteLine`行之后放置了一个断点，因此我可以从控制台和以下两个输出中获取`debugger`：

*   {"内容": "{\"foo\":\"bar\"}"}
*   {“内容”：“C：\ temp”}
*   {“内容”：“嗨\”“！”}
*   {“内容”： ”{\””：\””}”}
*   {“内容”：“今天是美好的一天{\”“：\”“}！”}

*   `"{\"Content\": \"{\\\"foo\\\":\\\"bar\\\"}\"}"`

*   `"{\"Content\": \"C:\\\\temp\"}"`
*   `"{\"Content\": \"Hi \\\"\"!\"}"`
*   `"{\"Content\": \"{\\\"\":\\\"\"}\"}"`
*   `"{\"Content\": \"It is a nice day {\\\"\":\\\"\"}!\"}"`

我不知道为什么第二个在失败的 TestCases 上`"`没有被替换。`\"`

控制台输出：

```
JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual
[FAIL] JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual("{\"\":\"\"}") : System.ArgumentException : Invalid JSON string literal format. At line 1, column 18
    at System.Runtime.Serialization.Json.JavaScriptReader.ReadStringLiteral () [0x0000d] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:261 
    at System.Runtime.Serialization.Json.JavaScriptReader.ReadCore () [0x00118] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:73 
    at System.Runtime.Serialization.Json.JavaScriptReader.Read () [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:27 
    at System.Json.JsonValue.Load (System.IO.TextReader textReader) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/System.Json/System.Json/JsonValue.cs:28 
    at System.Json.JsonValue.Parse (System.String jsonString) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/System.Json/System.Json/JsonValue.cs:101 

[FAIL] JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual("It is a nice day {\"\":\"\"}!") : System.ArgumentException : Invalid JSON string literal format. At line 1, column 35
    at System.Runtime.Serialization.Json.JavaScriptReader.ReadStringLiteral () [0x0000d] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:261 
    at System.Runtime.Serialization.Json.JavaScriptReader.ReadCore () [0x00118] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:73 
    at System.Runtime.Serialization.Json.JavaScriptReader.Read () [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:27 
    at System.Json.JsonValue.Load (System.IO.TextReader textReader) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/System.Json/System.Json/JsonValue.cs:28 
    at System.Json.JsonValue.Parse (System.String jsonString) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/System.Json/System.Json/JsonValue.cs:101 

[FAIL] JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual("Hi \"\"!") : System.ArgumentException : JSON string is not closed. At line 1, column 23
    at System.Runtime.Serialization.Json.JavaScriptReader.ReadStringLiteral () [0x0003a] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:268 
    at System.Runtime.Serialization.Json.JavaScriptReader.ReadCore () [0x00118] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:73 
    at System.Runtime.Serialization.Json.JavaScriptReader.Read () [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System.ServiceModel.Web/System.Runtime.Serialization.Json/JavaScriptReader.cs:27 
    at System.Json.JsonValue.Load (System.IO.TextReader textReader) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/System.Json/System.Json/JsonValue.cs:28 
    at System.Json.JsonValue.Parse (System.String jsonString) [0x00011] in /Developer/MonoTouch/Source/mono/mcs/class/System.Json/System.Json/JsonValue.cs:101 

[PASS] JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual("{\"foo\":\"bar\"}")
[PASS] JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual("C:\\temp")

JsonValueTests_JsonPrimitiveSerialization_ReturnsEqual : 74,711 ms

Tests run: 5 Passed: 2 Inconclusive: 0 Failed: 3 Ignored: 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:52:11.353

不确定这是否是您的问题的原因，但您的空 JSON 对象：`{"":""}`无效 - 您不能有空键。`{}`如果这就是你想要的，一个空的 JSON 对象将是。

# java - 查找关闭 XML 标记

> ID：15528114
> 
> 赞同：1
> 
> 时间：2013-03-20T15:39:18.117
> 
> 标签：java, xml, parsing, sax, stax

我有一种方法可以只打印出打开和关闭 XML 标记之间的内容。我知道我的 XML 深度计数器是问题所在，但我不知道在哪里放置/修复它。这是 XML。

```
<XMS>
    <Object>
        <Property>
            <Value>1</Value>
        </Property>
    </Object>
</XMS> 
```

这是Java代码...

```
 Boolean flag = false;

    while(reader.hasNext()) {
        eventType = reader.next();

        if(getEventType(eventType) == "START_ELEMENT" 
                && reader.getLocalName() == startTagName){
            flag = true;
            depth++;
            System.out.println(reader.getLocalName() + " Depth = " + depth);
        }
        else if(getEventType(eventType) == "END_ELEMENT"
                && flag == true
                && (depth == 0)){
            depth--;
            System.out.println(reader.getLocalName() + " Depth = " + depth + " BIG END");
            break;
        }
        else if(getEventType(eventType) == "START_ELEMENT"
                && flag == true){
            depth++;
            System.out.println(reader.getLocalName() + " Depth = " + depth);
        }
        else if(getEventType(eventType)== "END_ELEMENT"
                && flag == true){
            depth--;
            System.out.println(reader.getLocalName() + " Depth = " + depth + " END");
        }
    }
} 
```

GetEventType 只返回正确的 eventType（正常工作）。这是控制台的输出。

```
Object Depth = 1
Property Depth = 2
Value Depth = 3
Value Depth = 2 END
Property Depth = 1 END
Object Depth = 0 END
XMS Depth = -1 BIG END 
```

问题是它应该在深度 = 0 时在最后一个对象上结束，并在到达 XMS 深度 = -1 之前停止。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:55:25.880

是否可以像比较深度是否等于一而不是零一样简单？

当您在“对象”元素中时，您的深度 == 1，因此当您遇到结尾的“对象”标签时，您应该检查

```
 ... && (depth == 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:41:28.887

EventType`int`不是字符串，您正在与错误的值进行比较。此外，您不要使用 比较 java 中的字符串`==`，而是使用`equals()`. 此外，标志应该是`boolean`（原始）。

作为将来的说明，当遇到此类问题时，请学习在调试器中运行代码以找到您的逻辑问题，而不是在 SO 上发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:01:28.393

在您的代码中

```
 else if(getEventType(eventType) == "END_ELEMENT"
                    && flag == true
                    && (depth == 0)){
                depth--;
//rest of your code 
```

您的 if 条件`(depth == 0)`作为条件之一，并且在您正在执行的方法主体中`depth--;`。那不会将深度减少到 -1 吗？

`depth--;`我的问题是：如果你有 ，你真的需要这样做 `if (depth == 0)`吗？

# mysql - 用户的 MySQL 访问被拒绝

> ID：15528115
> 
> 赞同：1
> 
> 时间：2013-03-20T15:39:21.643
> 
> 标签：mysql

我从控制台（使用密码）登录到我的 MySQL RDS 实例，我正在尝试创建一个新用户

```
CREATE USER 'newuser'@'%' IDENTIFIED BY 'password';
grant all privileges on *.* to 'newuser'@'%'; 
```

但我一直遇到这个问题：
`ERROR 1045 (28000): Access denied for user 'root'@'%' (using password: YES)`

该用户`root`具有超级用户权限，但由于某种原因，当我尝试向新用户授予权限时出现错误……知道为什么会发生这种情况吗？

# vb.net - 以编程方式在 TabControl 中创建选项卡

> ID：15528120
> 
> 赞同：3
> 
> 时间：2013-03-20T15:39:30.550
> 
> 标签：vb.net, winforms, tabcontrol

我有一个包含选项卡控件的表单，我想根据前一个表单上的用户输入来修改它。我创建了一个名为“TabControl”的选项卡控件（我知道是有创意的），并尝试为数组“tabNames()”的每个值添加一个选项卡。当我调试程序时，我将值输入到第一个表单的数组中，当第二个表单加载时，我的 tabcontrol 中什么也没有。有什么想法吗？

```
Public Sub frmContent_Load(ByVal sender As Object, ByVal e As EventArgs)
  lblTitle.Text = frmiFormCreator.txtTitle.Text
  For i As Integer = 0 To frmiFormCreator.numberOfTabs
    Dim tabPage(frmiFormCreator.numberOfTabs) As TabPage
    tabPage(i).Text = frmiFormCreator.tabNames(i)
    TabControl.TabPages.Add(tabPage(i))
  Next
End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:00:25.157

尝试创建 TabPage 对象：

```
For i As Integer = 0 To frmiFormCreator.numberOfTabs
  Dim newPage As New TabPage()
  newPage.Text = frmiFormCreator.tabNames(i)
  TabControl.TabPages.Add(newPage)
Next 
```

此外，您的代码看起来可能正在创建一个额外的选项卡。也许你想要这个：

```
For i As Integer = 0 To frmiFormCreator.numberOfTabs - 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:01:33.610

尝试

```
Public Sub frmContent_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)  
    lblTitle.Text = frmiFormCreator.txtTitle.Text
    For i As Integer = 0 To frmiFormCreator.numberOfTabs
        Dim tabPage As New TabPage(frmiFormCreator.tabNames(i))
        TabControl.TabPages.Add(tabPage)
    Next
End Sub 
```

# r - R,Rename.file 迭代

> ID：15528121
> 
> 赞同：2
> 
> 时间：2013-03-20T15:39:40.517
> 
> 标签：r, file-rename

我正在尝试用 R 语言编写一个允许我重命名文件的算法。我想用数字 1,2,3,4,5,... 重命名文件夹中的所有 pdf 文件，并保留 pdf 扩展名。主要困难如下：我的文件夹包含文件和文件夹，这些文件夹包含文件和文件夹等......我希望所有这些子文件夹中的所有 pdf 文件都以从 1 开始的数字命名，直到文件数在这个特定的文件夹中（例如按照字母顺序）！另一个困难：我的文件夹还包含非 pdf 文件！

这是一个示例：（在以下示例中，文件夹 1 包含文件夹 2 和 3 个文件。文件夹 2 包含 4 个文件。）

```
Folder1   "contains"   folder2     "contains"   Bzzz.file.R
                       A.file.txt               B.file.pdf
                       Bla.file.pdf             C.file.pdf
                       C.file.pdf               Delta.file.pdf 
```

……应该变成这个……

```
Folder1  "contains"  folder2   "contains"  Bzzz.file.R
                     A.file.txt            1.pdf
                     1.pdf                 2.pdf
                     2.pdf                 3.pdf 
```

无论文件夹的数量是多少“以及文件夹的起始深度”，该算法都应该起作用

如果即使在某些文件夹中已经存在名为 3.pdf 或其他 number.pdf 的文件，这也会起作用，那会更好一些，但实际上我可以在没有这种灵活性的情况下处理！

非常感谢你的帮助 ！

我运行了这段代码，但它并不完全有效。如果我只是运行它，我会收到以下错误消息：“if (is.na(pathname)) { 中的错误：参数的长度为零”（我必须从法语翻译此错误消息，因此可能与我们可以从 R 中得到英文的错误消息）。

然后我意识到 d 很奇怪，因为它包含一个名为“。”的目录。在我的文件夹中没有的第一个位置（顺便说一下，您对此有解释吗？！）。

所以我做了 d<-d[-1] 并重新运行大 lapply 我收到此错误消息：

“setwd(d[x]) 中的错误：无法更改工作目录”事实上，第一个文件夹中的文件已重命名，但仅在第一个文件夹中

这里 list.dirs() 给出了什么：

“。” "./3.Sept" "./4.Oct" "./5.Nov" "./6.Dec"

但我只有 4 个文件夹。没有名为“。”的文件夹。！正如我所说，如果我这样做 d<-d[-1] 代码在更改目录时不会成功，因此只有一个文件夹被重命名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:03:22.063

由于 list.files() 默认按字母顺序返回文件，因此可以非常简单地实现以下一种方法：

```
# Navigate to top directory using setwd("my/top/directory/here")
# This code will then rename all pdfs in the current directory and ALL sub-directories
setwd( "C:/whatever/directory" )    
    # Navigate to top directory using setwd("my/top/directory/here")
d <- list.dirs()
lapply( 1:length(d) , function( x ){ 
    require( R.utils)
    f <- list.files( path = getAbsolutePath( d[x] ) , pattern = "*.pdf" , full.names = TRUE )
    lapply( seq_len( length(f) ) , function(y) {
        file.rename( f[y] , paste( dirname( f[y] ) ,"/" , y , ".pdf" , sep = "" ) )
        })
    }) 
```

# ios - 当归档应用程序 Xcode 抱怨丢失文件时

> ID：15528133
> 
> 赞同：4
> 
> 时间：2013-03-20T15:40:14.450
> 
> 标签：ios, objective-c, cocoa, header-files

当我在模拟器或设备中运行应用程序时，我正在使用外部库（[RHAddressBook](https://github.com/heardrwt/RHAddressBook)）没有问题。但是当我选择存档应用程序时，我遇到了它`'RHAddressBook/AddressBook.h' file not found`在线路上说的问题`#import <RHAddressBook/AddressBook.h>`

我检查了调试和发布的标题搜索路径是否相同。

不太确定还要检查什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:45:36.450

当您为开发构建设置使用外部库时，您可能需要更新构建设置以指定额外的包含搜索路径。

当您进行存档构建时，这不是开发构建。您可能没有更新发布（或可能是分发）构建的包含搜索路径。

返回到构建设置并确保针对存档使用的构建配置更新“标题搜索路径”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-03T13:56:17.170

[（我从这里](https://stackoverflow.com/a/7549237/392653)改编了这个答案，但是考虑到我在 RHAddressBook 上遇到了同样的问题，我也认为应该进行一些释义。我希望这不会让任何人感到不安）。

*   `Build Settings`为您的应用目标打开并在`Header Search Paths`添加下：

    `"$(PROJECT_DIR)/.."`启用递归

这对我来说适用于 RHAddressBook

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T11:38:54.747

`Build Settings`为您的应用目标打开并在`Header Search Paths`添加下：

`"$(SOURCE_ROOT)/ThirdParty/RHAddressBook"`

此路径是项目文件夹下的 RHAddressBook 文件夹。

# python - 如何更改 mySQL 查询结果中的一行？

> ID：15528135
> 
> 赞同：0
> 
> 时间：2013-03-20T15:40:14.800
> 
> 标签：python, mysql, cursor

我想在 Python 中遍历一堆 mySQL 行，并在处理每一行之后，对其进行更改：

```
cursor.execute("SELECT someNonUniqueColumn,hasBeenProccessed 
                FROM myTable WHERE hasBeenProcessed = 0")
for row in cursor:
    # use someNonUniqueColumn for something...
    ...
    # set "hasBeenProccessed" to 1 
```

我想避免以下丑陋： - 每次处理记录时都必须执行另一个 SQL 查询，或者 - 在处理它们时用行的 ID 填充数组（这两者都需要我添加一个唯一键到桌子上）

那么，有没有办法“在我走的时候检查这些”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:49:07.570

不，没有办法及时更改行。造成这种情况的原因有很多，其中之一是查询返回的值可能不可更新：想想计数、总和和其他聚合函数。

如果您只进行少量的数据库交互，`update`最好保存 ID 并发出复合语句。

如果您在程序中发出超过 1-2 个查询，请帮自己一个忙，学习 SQLAlchemy 或 Django ORM。两者都不是完全透明的，但都可以为您节省大量时间和调试痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:05:38.800

进行更改/处理后为什么不运行查询

```
UPDATE myTable SET hasBeenProcessed = 1 WHERE hasBeenProcessed = 0 
```

如果这是可能的当然:)

# java - Java 线程休眠和中断异常

> ID：15528140
> 
> 赞同：11
> 
> 时间：2013-03-20T15:40:32.647
> 
> 标签：java, multithreading, exception, sleep

1.  为什么睡眠线程需要 try catch 来捕获中断异常？
2.  为什么 sleep 甚至会发出 Interrupted Exception 错误？这是我一直在通过谷歌搜索的java编程中我真正想找出的两个问题，但我仍然没有找到明确的解释来解释为什么会发生这两件事。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:44:39.417

`InterruptedException`当线程被阻塞/等待并且它被另一个线程（通过 ）中断时抛出一个`Thread.interrupt`。将其视为立即终止的请求，不会遭受`Thread.stop()`.

这样，即使您指示一个线程休眠几年，您也可以中断该线程。

[推荐的做法](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)`InterruptedException`是在抛出a 时中止您正在处理的任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:47:36.853

1.  因为如果你中断一个线程，它就不能完成它的正常执行，你需要抓住它才能准备好做某事。
2.  因为线程等待与中断线程不同，线程等待可以恢复，但中断线程已经完成执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:49:39.007

当您要求线程休眠时，该线程的预期行为是休眠这么长时间。所以如果sleep被打断了，就会抛出InterruptedException，表示无法完成任务。如果它被中断，您可能需要注意应该做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:47:11.437

这里有一个如何抛出中断异常的干净示例：[http ://www.javamex.com/tutorials/threads/thread_interruption.shtml](http://www.javamex.com/tutorials/threads/thread_interruption.shtml)

`sleep()`并`yield()`在这里讨论：http: [//www.coderanch.com/t/508657/threads/java/Sleep-Yield-state](http://www.coderanch.com/t/508657/threads/java/Sleep-Yield-state)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T15:47:22.847

这是因为`sleep()`可能会永久/很长时间阻塞，因此您需要一种能够取消此行为的方法。因为当您中断操作时它不是“正常”完成，您可能需要执行一些特定的补偿或补救操作，例如，发送您从未收到通知的警报，清理资源等。
有一个非常好的[开发人员关于该主题的作品文章](http://www.ibm.com/developerworks/java/library/j-jtp05236/index.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-17T04:14:05.553

睡眠和中断在语义上不相关。只是Java设计者认为当你想让你的线程休眠时，这是一个提醒你中断的好机会。这就像[杜克](http://www.oracle.com/us/technologies/java/duke-424174.html)说*“看起来你正在尝试睡觉，你是否也想通过确保它正确响应中断事件来使你的线程成为一个好公民，当需要一种方法让它突然终止时在您项目的后期出现？”*

所以经常会看到这样的代码：

```
try {
    Thread.sleep(1000);
} catch (InterruptedException ie) {
    //Don't worry about it.
} 
```

有时人们说这被认为是不好的做法。但是如果你不打算在你的程序中使用中断工具，那么这些异常将永远不会被抛出，所以你必须问自己是否做额外的工作来处理这些异常，以防你决定添加一段时间后程序的可中断性功能是有道理的。这是 Java 设计者坚持认为每个线程都应该做的事情之一——你可以`interrupt()`做到，它会快速而干净地中止它正在做的事情。我认为在很多情况下这是不必要的，但是人们会查看您的代码，看到这个并且仍然说“哎呀，不好的做法！”

[Java 官方教程解释了中断](https://docs.oracle.com/javase/tutorial/essential/concurrency/interrupt.html)。基本上，如果你有一个线程`t`在做一些处理，然后用户想取消它，你会从另一个线程调用`t.interrupt()`. 在 thread 上运行的代码中`t`，只要它`sleep()`是 s 或`wait()`s 等，`InterruptedException`就会抛出 an 。如果它不做任何这些，那么它也可以（应该）查明它是否`Thread.interrupted()`不时被中断使用。在所有这些发现中断的方法中，它应该放弃它正在做的事情并尽快清理。（也就是说：如果它这样做了，那么这种行为可能对你或某人有用——这就是中断的概念。）

因此，Java 将此作为`sleep(..)`方法的检查异常，以迫使您考虑使用此工具。另一部分理由是，*如果* `sleep(..)`被打断，那么它会早早醒来，这是一个例外事件。（但请记住，有那个**“如果”**。）

重要的是中断不会无缘无故地发生。如果您编写代码使它们发生，或者如果其他人启动您的线程并需要取消他们的活动，它们就会发生。所以这就是`Thread.sleep(..)`抛出一个`InterruptedException`. 你做。如果你不这样做，那么你仍然需要抓住它。

* * *

**编辑。**顺便说一句，这样做会更好：

```
try {
    Thread.sleep(1000);
} catch (InterruptedException ie) {
    throw new UnsupportedOperationException("Interrupts not supported.", ie);
} 
```

因此，如果您或其他人稍后试图错误地中断该线程，那么当他们去测试它时，他们会被提醒该功能未实现。([`UnsupportedOperationException`](http://docs.oracle.com/javase/6/docs/api/java/lang/UnsupportedOperationException.html)是 的子类`RuntimeException`，因此未选中。)

# c# - 正则表达式 - 重复模式

> ID：15528141
> 
> 赞同：1
> 
> 时间：2013-03-20T15:40:37.747
> 
> 标签：c#, regex, regular-language

我似乎无法得到它......我有一串文本，我需要从中提取重复模式，但我只能得到它的一小部分，或者我得到整个字符串的一个匹配......

该字符串是“标记”加上“内容”的串联，我需要提取每个标记及其内容。

```
string s = "T:     2  YE             I:      4  YE";
Match m = Regex.Match(s, "(?'marker'(T|I)):(?'content'.+)");
while (m.Success)
{
    string Marker = m.Groups["marker"].value; // (T: or I:)
    string Content = m.Groups["content"].value; // (2 YE or 4 YE)
    m = m.NextMatch();
} 
```

“.+”和“.+?”我都试过了 对于最大/最小捕获，但我要么得到 2 个有标记但没有内容的匹配，要么得到一个与整个输入字符串匹配的匹配。

任何指针请:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:08:01.490

```
(?'marker'(T|I)):(?'content'.+) 
```

行不通，因为`.+`会消耗整行的其余部分（它贪婪地匹配，并且没有什么可以阻止它消耗行的其余部分）。

```
(?'marker'(T|I)):(?'content'.+?) 
```

`.+?`只会消耗一个字符然后停止，因为它不情愿地匹配。

您需要能够指定“内容”何时结束。我真的不太了解您提供的格式，以确保我知道正确的方法，但假设任何数量的大写字母后跟冒号（如“T：”，“ST：”，或 "ORANGUTANS:") 有资格作为标记，这应该有效：

```
([A-Z]+:)(((?![A-Z]+:).)+) 
```

它使用[负前瞻](http://www.regular-expressions.info/lookaround.html)来识别下一个标记的开始位置。第一和第二捕获组应该分别捕获标记和内容。

我对您用来命名捕获组的语法不太熟悉，但我相信这应该可行：

```
(?'marker'[A-Z]+:)(?'content'((?![A-Z]+:).)+) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T19:48:48.203

尝试这个：

```
Regex("(T:|I:)").Split(s); 
```

# javascript - Javascript，我无法让 video.getCurrentTime() 显示视频运行时间

> ID：15528146
> 
> 赞同：0
> 
> 时间：2013-03-20T15:40:54.987
> 
> 标签：javascript, html

视频正在运行，带有 setInterval 的其他函数运行良好，除了 video.getCurrentTime() 根本不显示在 div id = "test" 中。我希望每次视频运行时都显示视频时间。我不知道为什么。这是我的示例代码，

```
<html>
<head>
<script>
setInterval(function(){

                    var t = document.getElementById('test');

                    video = document.getElementById('caption');

                    t.innerHTML = video.getCurrentTime();

            },1000);
</script>
</head>

    <body>

        <div>
            <video id="caption" width="320" height="240" controls>
                <source src="caption.mp4" type="video/mp4">
            </video> 
        </div>
        <div id="container">
        </div>
        <div id ="timer">
        </div>
        <div id = "test">   
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:05:47.113

这是一个工作版本：

```
<html>
<head>
</head>

<body>

    <div>
        <video id="caption" width="320" height="240" controls="">
            <source src="caption.mp4" type="video/mp4">
        </video> 
    </div>
    <div id="container">
    </div>
    <div id ="timer">
    </div>
    <div id="test">Hello   
    </div>
    <script>
        function displayTime(){
            var time = document.getElementById('test');

            var video = document.getElementById('caption');

            //time.innerHTML = video.currentTime;

            var text = "", cap = "";

                for( int i = 0; i < subtitleArray.length;i++)
                {
                    //var currentTime = video.currentTime();
                    var cueStart = parseFloat(subtitleArray[i][0]);
                    var cueEnd = cueStart + parseFloat(subtitleArray[i][1]);
                    //var diff = cueStart - currentTime;

                    cap = subtitleArray[i][2];

                    if (video.currentTime >= cueStart && video.currentTime <= cueEnd) {
                       text = cap.text;   
                    }
                }

                t.innerHTML = text; 
        }
        setInterval(displayTime,1000);
</script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:46:27.873

我认为这将是 video.currentTime，而不是 getCurrentTime，最好将脚本标记放在正文末尾，或者您可以执行 $(document).ready(function(){ }); 在jQuery中

# c++ - 我需要有关过滤字符或字符串的 C++ ATM 机器代码方面的帮助

> ID：15528147
> 
> 赞同：0
> 
> 时间：2013-03-20T15:40:57.873
> 
> 标签：c++, string, filter, character

我真的不会问我是否真的知道答案。c++ 新手，我所知道的都在这里，它也处于试错状态，但试图赶上最后期限，这是一个家庭作业。我现在遇到的问题是，当用户输入一个字符或字符串时，我似乎找不到将其过滤掉并提示“由于输入无效而再次键入”的解决方案。.. 有任何想法吗？char 的值似乎为 0。试图键入与此相关的条件，但仍然无法正常工作。不知道该怎么办。

```
#include <iostream>
#include <conio.h>
using namespace std;

/*--------------------------------------------------
---------------------------------------------------------
Accounts are under pinnumbers:                           |
1001 increment of 1                                      |
Passcodes are under the codes:                           |
1101 increment of 1                                      |
                                                         |
limit of 10 as instructed.                               |
                                                         |
i.e : (valid pin number ) 1001 = (valid pin code) 1101   |
---------------------------------------------------------
*/

int option, pinnumber, pincode, vip[10], pc[10], money[10], accountno[10], getindex;
string name[10]; 
void mainmenu();
void assignaccounts();
void checkaccounts();
void start();
void options();
bool logged=false;
char a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;

//<--START OF THE MAIN FUNCTION -->
main() {       

assignaccounts();
start();                      
system("PAUSE"); //more of a getch() pero naa xa'y press any key. w/c is better!
}

//<--EOF MAIN FUNCTION-->

//<-- START OF EXTRA FUNCTION SECTION --> 
//---Start of checkaccounts function --> -----------------------------
void checkaccounts() {                                              //|
        for(int x=0; x<10; x++) {                                   //|
          if(( vip[x] == pinnumber)  && ( pc[x] == pincode  )) {    //|
            logged=true;                                            //|
            getindex=x;                                             //|
            mainmenu();                                             //|
            break;                                                  //|
         } else if ((pinnumber == 'a') && (pincode == 'A' )) {
           cout<<"Invalid Input, Try again."<<endl;
           cin.clear();
           main();
           break;   
         } else {
           ;
         }                                                         //|                                                        
        }                                                           //|
        if(!logged){                                                //|
               cout<<"\n\t Invalid Input, Try again."<<"\n\n\t ";   //|
               system("PAUSE");                                     //|
               start();                                             //|
        }                                                           //|
                                                                    //|                                                                   
}                                                                   //|
//end of checkaccounts function --------------------------------------

//Start of Assignaccounts function------------------------------------
void assignaccounts() {                                             //|
       for(int x=0; x<10; x++) {                                    //|
         vip[x]=1001+x;                                             //|
         pc[x]=1101+x;                                              //|                                                         
        }                                                           //|
   name[0] = "John Do Doe";                                         //|
   money[0] = 10000;                                                //|
   accountno[0] = 1;                                                //|
                                                                    //|
   name[1] = "Zsaza Pa Ligid";                                      //|
   money[1] = 20000;                                                //|
   accountno[1] = 2;                                                //|
                                                                    //|
   name[2] = "Robin Pa Didit";                                      //|
   money[2] = 30000;                                                //|
   accountno[2] = 3;                                                //|
                                                                    //|
   name[3] = "lrem ipm";                                            //|
   money[3] = 40000;                                                //|
   accountno[3] = 4;                                                //|
                                                                    //|
   name[4] = "Daniel Pa Slide";                                     //|
   money[4] = 50000;                                                //|
   accountno[4] = 5;                                                //|
                                                                    //|
   name[5] = "James Bond";                                          //|
   money[5] = 60000;                                                //|
   accountno[5] = 6;                                                //|
                                                                    //|
   name[6] = "Lara Croft Llara";                                    //|
   money[6] = 70000;                                                //|
   accountno[6] = 7;                                                //|
                                                                    //|                                                                 
   name[7] = "John Ziggy Pa ( GOLD MEMBER )";                       //|
   money[7] = 90000;                                                //|
   accountno[7] = 11;                                               //|
                                                                    //|
   name[8] = "Loren Joy Chris ( GOLD MEMBER )";                     //|
   money[8] = 110000;                                               //|
   accountno[8] = 10;                                               //|
                                                                    //|
   name[9] = "Jayson Derulo";                                       //|
   money[9] = 120000;                                               //|
   accountno[9] = 10;                                               //|
                                                                    //|
}                                                                   //|
//End of Assignaccounts function--------------------------------------

//---Start of start function --> -------------------------------------
void start() {                                                      //|           
     system("cls");                                                 //|
     cin.clear();
     cout<<"------------------------------------------"<<endl;      //|
     cout<<" |** WELCOME TO CAMARILLO & ALJON ATM **|"<<endl;       //|
     cout<<"------------------------------------------"<<endl;      //|
     cout<<"\nEnter valid identification pin number (VIP): ";       //|
     cin>>pinnumber;                                                //|
     cout<<"\nEnter valid pincode (PC): ";                          //|
     cin>>pincode;                                                  //|
     checkaccounts();                                               //|
                                                                    //|
}                                                                   //|
//end of Start function ----------------------------------------------

//start of mainmenu function ----------------------------------------------------------------------------------
void mainmenu() {                                                                                           // |
     int choice;                                                                                            // |
     if(logged) {                                                                                           // |
      while(true){                                                                                          // |
         system("cls"); //clearscreen                                                                       // |
         cout<<"Log-in successful!"<<endl;                                                                  // |
         cout<<"\nWelcome: "<<name[getindex];                                                                // |
         cout<<"\nAccount No.: "<<accountno[getindex]<<endl;
         cout<<"\nChoose a Transaction:\n";                                                                 // |
         cout<<"\n";                                                                                        // |
         cout<<"[1] Inquire Balance \n"                                                                     // |
         <<"[2] Withdraw \n"                                                                                // |
         <<"[3] Deposit \n"                                                                                 // |
         <<"[4] Quit \n"                                                                                    // |
         <<"\n"<<endl;                                                                                      // |
         cout<<"Enter Option: ";                                                                            // |
         cin>>option;                                                                                       // |
                                                                                                            // |
          if (option == 1) {                                                                                // |
            cout<<"\n\tOutstanding Balance is P"<<money[getindex]<<"\n\n\t ";                               // |
            system("PAUSE");                                                                                // |
         } else if (option == 2) {                                                                          // |
           int co;                                                                                          // |
           cout<<"\n\tEnter amount: ";                                                                      // |
                 cin>>co;                                                                                   // |
                 if(co<money[getindex]){                                                                    // |
                    money[getindex]-=co;                                                                    // |
                    cout<<"\n\tYour Outstanding Balance has been updated to P"<<money[getindex]<<"\n\n\t "; // |
                 } else {                                                                                   // |
                    cout<<"\n\t Invalid amount, Please check again.";                                       // |
                    cout<<"\n\t You only have P"<<money[getindex]<<" in your account."<<"\n\n\t ";          // |
                 }                                                                                          // |
                 system("PAUSE");                                                                           // |
         } else if (option == 3) {                                                                          // |
           int dep; //Declaration of the cin in this case;                                                  // |
                 cout<<"\n\tEnter amount: ";                                                                // |
                 cin>>dep;                                                                                  // |
                 money[getindex]+=dep;                                                                      // |
                 cout<<"\n\tYour Outstanding Balance has been updated to P"<<money[getindex]<<"\n\n\t ";    // |
                 system("PAUSE");                                                                           // |
         } else if (option == 4) {                                                                          // |
           break;                                                                                           // |
         } else{                                                                                            // |
               cout << "\n\n\tInvalid Input, Try again.\n\n\t ";                                            // |
               system("PAUSE");                                                                             // |
         }                                                                                                  // |
      }                                                                                                     // |
         cout<<"\n\n\t THANK YOU FOR USING OUR ATM, YOU'LL NOW EXIT THE PROGRAM."<<endl;                    // |
         cout<<"\n\t This is intended for our project in c++ under Professor Machica."<<"\n\n\t ";          // |                                                 
     }                                                                                                      // |                                                                                                          // |
}                                                                                                           // |
//end of mainmenu function-------------------------------------------------------------------------------------

//<-- EOF EXTRA SECTION FUNCTIONS--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:53:52.100

您可以使用 if(cin.fail()) 或 if(!cin) 检查 cin 是否获得正确的类型

```
int n;
cin >> n;
if(!cin)
{
     // user didn't input a number
}else{
     // user did input number
} 
```

如果输入不是 int，它将设置故障位标志。

*   cin.fail() 检查是否设置了failbit 或badbit。

*   cin.bad() 检查是否设置了 badbit

*   cin.eof() 检查是否设置了 eofbit

如果 cin 失败，您应该使用 cin.ignore() 忽略输入并要求用户重试。

注意： main() 应该返回一个非 void 的 int。

该程序运行“输入：”，如果它不是 int，它将循环。

```
#include <iostream>
using namespace std;
int main(int argc, const char * argv[])
{
    int ival;
input:
    if(cin >> ival)
    {

        cout << ival << endl;
        // do something (input is a number)
    }
    if(!cin >> ival)
    {
        cin.clear();
        cin.ignore();
        cout << "error, retry" << endl;
        goto input;

    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:54:25.970

首先，我认为你的代码应该使用结构化数组来存储这些信息。作为 C 的初学者，你也应该尽量不要将变量设为 Public，相反，你应该将它们用作参数。而且看起来你也没有不知道 char 字符串，你应该使用`strcmp`比较你的字符串来与你的用户进行交互。我只是在这里分享一些想法，也许你应该先学习一些关于 C 字符串、结构、结构化数组和指针的知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T00:12:38.047

使用此代码强制用户输入`int`.

```
int value;
std::cout << "Enter a number: ";
for (std::string input; std::getline(std::cin, input);) { // Read all characters.
    std::istringstream iss(input);
    if (iss >> value && iss.eof()) { // Try to parse to int.
        break;
    }
    std::cout << "Invalid number, try again: ";
}

std::cout << "Number was: " << value << std::endl; 
```

记得包括：

```
#include <iostream>
#include <sstream>
#include <string> 
```

# sql - 在sql语句中结合union和WHERE条件

> ID：15528148
> 
> 赞同：0
> 
> 时间：2013-03-20T15:40:59.173
> 
> 标签：sql, oracle, join, union

架构：

```
 BookingDependent ( BookinngID(pk,fk) , DependentID(pk,fk))
   Booking (BookingID(pk),GuestID(fk), ArriveDate,DepartDate, Totalprice) 
```

尝试的 SQL 语句：

```
SELECT g.FORENAME, g.SURNAME       
FROM GUEST g
INNER JOIN BOOKING b ON g.GUESTID = b.GUESTID
UNION
SELECT d.FORENAME, d.SURNAME
FROM DEPENDANT d
INNER JOIN BOOKINGDEPENDANT bd ON bd.DEPENDANTID = d.DEPENDANTID
WHERE (SELECT * FROM BOOKING b
WHERE b.DEPARTDATE > '20-MAR-2013'); 
```

大家好，我正在尝试构建一个 sql 查询，列出当前住在酒店的所有客人和家属，而不是显示数据库中的所有历史客人和家属。我想简单地显示所有在场的客人和家属。我有WHERE 子句中出现缺少表达式错误的问题。我怎样才能解决这个问题 ？我也想使用联合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:44:16.650

您缺少将`WHERE`子句过滤器与查询的其余部分相关联的列。

您似乎想使用以下查询：

```
SELECT g.FORENAME, g.SURNAME       
FROM GUEST g
INNER JOIN BOOKING b 
   ON g.GUESTID = b.GUESTID
WHERE b.DEPARTDATE > '20-MAR-2013'
UNION
SELECT d.FORENAME, d.SURNAME
FROM DEPENDANT d
INNER JOIN BOOKINGDEPENDANT bd 
   ON bd.DEPENDANTID = d.DEPENDANTID
WHERE bd.BookingID in (SELECT b.bookingid   
                       FROM BOOKING b
                       WHERE b.DEPARTDATE > '20-MAR-2013'); 
```

您会注意到我将您的`WHERE`条款更改为`WHERE bd.BookingID in ..`. 这将返回任何具有`BookingId`您`DepartDate`想要的 a 的行。

# java - 如何从当前选择中继承 Java FX 中 ComboBox 或 ChoiceBox 的首选大小？

> ID：15528151
> 
> 赞同：0
> 
> 时间：2013-03-20T15:41:03.020
> 
> 标签：java, javafx-2, preferredsize

似乎`ComboBox`只有`ChoiceBox`一个任意设置的首选宽度。我不想猜测合适的宽度；我只想根据选择中的项目继承首选宽度。

我注意到的另一件事是，对于`ComboBox`和`ChoiceBox`，当我单击以选择时，弹出窗口具有基于选择中的选项的适当宽度。但是选择器本身并没有继承这个宽度！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T21:11:17.557

用`ComboBox`, 做 a`setPrefWidth(Control.USE_COMPUTED_SIZE);`后跟 a`setNeedsLayout(true);`做了。出于某种奇怪的原因，如果我使用`ChoiceBox`而不是这样做`ComboBox`，当组件出现时它的大小错误，但是在我更改了几次选择之后，它最终会调整大小以适合内容。

# javascript - 比赛条件 - 下拉 - 淘汰赛 - javascript

> ID：15528155
> 
> 赞同：0
> 
> 时间：2013-03-20T15:41:07.993
> 
> 标签：javascript, knockout.js

我有一个下拉菜单：

```
<select data-bind="options: activeFilters, optionsValue:'value', value:funkyThingActiveFilter, optionsText:'text'" 
```

从此下拉列表中选择某些内容后，调用一个函数来刷新整个模型

```
model.funkyThingActiveFilter.subscribe(function (newVal) {
        model.filterResults();

}); 
```

filterResults 函数然后通过 AJAX 获取视图模型的更新

```
var url = '@Url.Action(MVC.funkyThingsController.IndexJSON())' + "?funkyThingActiveFilter=" + model.funkyThingActiveFilter();

 $.ajax({
           url: url,
           dataType: 'json',
           success: function (returnedData) {
               ko.mapping.fromJS(returnedData, {}, model);
              }
         }); 
```

问题在于，当订阅​​者看到模型更新时，这会引发竞争条件。我已经尝试在 filterResults 函数上设置淘汰赛，但这只会延迟比赛条件。

我还尝试创建信号量 - filterResults 函数设置一个 inFunction 类型变量。但是，这不起作用，因为绑定似乎是异步刷新的。

我怎样才能阻止页面绕圈子？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:15:30.730

为了解决这个问题，我在创建剔除视图模型时创建了过滤器的副本。然后我将下拉列表绑定到副本，并将副本作为参数传递给 AJAX 获取。

当模型刷新时，这些副本没有更新，因为它们不是从 AJAX 请求返回的视图模型数据的一部分。结果没有竞争条件。

# html5-canvas - HTML 5 无法在 IE 8 和 7 中使用 Webshims 使 Canvas 工作

> ID：15528158
> 
> 赞同：1
> 
> 时间：2013-03-20T15:41:17.013
> 
> 标签：html5-canvas, polyfills

我知道我正在做一些非常愚蠢的事情，所以希望第二双眼睛能指出我的愚蠢。我正在尝试让 Webshims polyfill 进行简单的画布测试（我第一次涉足它）。在 Chrome 和 IE9 中运行良好，但在 IE8 和 IE7（开发人员工具）中测试我得到错误：

> 对象不支持属性或方法“getContext”

这是我的代码

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
        <script src="js-webshim/minified/extras/modernizr-custom.js"></script>
        <script>
            // set options for html5shiv
            if(!window.html5){
                window.html5 = {}; 
            }
            window.html5.shivMethods = false;
        </script>
        <script src="js-webshim/minified/polyfiller.js"></script>
        <script class="example">
            window.FlashCanvasOptions = {
                disableContextMenu: true
            };
            $.webshims.setOptions({

                waitReady: false
            });

            $.webshims.polyfill();
        </script>
    </head>
    <body>
        <canvas id="my-canvas" width="200" height="100" style="border:1px solid #c3c3c3;">
            Your browser does not support the HTML5 canvas tag.
        </canvas>
        <script>
            var ctx = $('#my-canvas').getContext('2d');
            ctx.fillStyle = "rgb(200,0,0)";  
            ctx.fillRect (10, 10, 55, 50);  

            ctx.fillStyle = "rgba(0, 0, 200, 0.5)";  
            ctx.fillRect (30, 30, 55, 50);

            window.FlashCanvasOptions = {disableContextMenu: true};
            $.webshims.setOptions('canvas', {type: 'excanvas'});
        </script>
    </body>
</html> 
```

如果我将画布代码包装在 jquery 就绪函数中，我不会收到错误消息，但我也不会渲染画布。

```
$(function(){
    var ctx = $('#my-canvas').getContext('2d');
    ctx.fillStyle = "rgb(200,0,0)";  
    ctx.fillRect (10, 10, 55, 50);  

    ctx.fillStyle = "rgba(0, 0, 200, 0.5)";  
    ctx.fillRect (30, 30, 55, 50);
}); 
```

我已经在 BrowserStack 中对其进行了测试，结果相同。我究竟做错了什么？我很高兴我的昏暗暴露给所有人看..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-19T06:05:14.160

已经很长时间了，但也许这会对某人有所帮助。

我遇到了同样的错误 - 没有记录错误，但画布上也没有出现任何内容。

这是通过添加修复的

```
<meta http-equiv="X-UA-Compatible" content="IE=7"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:05:48.953

您必须删除 waitReady 或将其设置为 true。

# opengl - 云或烟雾的粒子系统

> ID：15528159
> 
> 赞同：8
> 
> 时间：2013-03-20T15:41:17.217
> 
> 标签：opengl, cuda, particle-system

我正在尝试使用 OpenGL 和 CUDA 为云和烟雾模拟制作一个简单的粒子系统。

如何使粒子系统中的粒子表现得像真正的云或烟雾在某些低湍流风中表现？

我现在遇到的一些问题是：

1.  颗粒聚集成一个大球
2.  粒子散布到无穷远
3.  粒子突然弹射而去。

**我已经完成了**粒子的渲染，所以我对那个区域很满意。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-20T16:59:38.137

小蚱蜢有一些关于这种性质的粒子系统的精彩教程：[基于噪声的粒子](http://prideout.net/blog/?p=63)（烟雾）、[基于噪声的粒子 II](http://prideout.net/blog/?p=67)（烟雾）、[简单流体模拟](http://prideout.net/blog/?p=58)（烟雾）和[深度不透明度贴图](http://prideout.net/blog/?p=69)（云）。其中大部分是纯粹的 OpenGL，但如果您愿意，可以在 CUDA / OpenGL 互操作中应用整体技术。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:50:11.037

也许你应该研究一下 Reynolds Boids，它会为你提供一些避免这些问题的想法：

[http://www.red3d.com/cwr/boids/](http://www.red3d.com/cwr/boids/)

# c++ - "(void)pointer;" 是什么意思？在 C++ 中是什么意思？

> ID：15528163
> 
> 赞同：4
> 
> 时间：2013-03-20T15:41:26.733
> 
> 标签：c++, pointers

有一些c++代码

```
struct data {
    /* some fields */
};

typedef struct data * pData;

int function(pData pointer) {
    if(pointer == NULL)
        return ERROR;
    (void)pointer;
    /* other work */
} 
```

**“（空）指针”是什么意思？**

仅供参考，有一些 int/char*/etc，一些函数指针用作结构中的回调函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T15:43:14.827

它用于规避未使用的变量警告。

如果您确实使用该变量，则它是无操作的。

大多数未使用的变量是参数，它们是实现回调函数签名所必需的，但在您的实际实现中不需要。

参照。

*   [C 代码中未使用的参数警告](https://stackoverflow.com/questions/3599160/unused-parameter-warnings-in-c-code)
*   [GCC 手册](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html)：（也`-Wunused-variable`由 启用`-Wall`）。

### 更新：

只是因为没有另外提及：变量的类型可能是任何东西。它不限于指针类型。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-20T15:43:24.513

这并不意味着很多。

它对表达式求值`pointer`，然后通过将其强制转换为 来显式忽略它`void`。

有时，当您试图说服编译器*不要*对未使用的参数发出警告时，您会看到此构造，但在您的代码中，该参数已被使用，因为它正在被`NULL`检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:49:11.973

它将指针值转换为“无类型”值，或者它“没有类型”。

```
void foo(); // absent of a return value 
int bar(void); // absent of parameters
void *var; // Type of the variable pointed to is absent
(void) var; // The type of the variable is absent 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:04:53.247

这是抑制未使用变量编译器警告的典型方法。

但是，由于指针实际上用作`if(pointer == NULL)`，我认为没有理由这样做。

如果我必须猜测，我会猜测 NULL 检查和返回是在警告抑制之后添加的。

# c# - 使用 Gridview 页脚添加记录

> ID：15528164
> 
> 赞同：0
> 
> 时间：2013-03-20T15:41:27.360
> 
> 标签：c#, asp.net, gridview

我正在使用我的 gridview 的页脚添加一条新记录，尽管我不喜欢这种格式。我希望能够让我的保存/取消按钮与编辑/删除命令字段保持一致。我不知道该怎么做。有人可以帮忙吗。干杯

```
<asp:GridView ID="Grd" runat="server" AutoGenerateColumns="false" OnRowEditing="Grd_RowEditing"
                                        OnRowCancelingEdit="Grd_RowCancelingEdit" OnRowUpdating="Grd_RowUpdating"
                                        Width="600px" CssClass="HomeDG" SelectedRowStyle-CssClass="HomeDGSelected" RowStyle-CssClass="HomeDGItem"
                                        AlternatingRowStyle-CssClass="HomeDGAlternating" HeaderStyle-CssClass="HomeDGhead"
                                        PageSize="10">
                                            <Columns>
                                                <asp:TemplateField HeaderText="Employee">
                                                    <ItemTemplate>
                                                        <asp:HiddenField ID="hfID" runat="server" Value='<%# Bind("Emp_ID")%>' />
                                                        <asp:Label ID="LblEmployee" runat="server" Text='<%# Bind("Emp_Name")%>'></asp:Label>
                                                    </ItemTemplate>
                                                    <FooterTemplate>
                                                        <asp:DropDownList ID="ddlNewEmp" runat="Server" />
                                                    </FooterTemplate>
                                                </asp:TemplateField>
                                                <asp:TemplateField HeaderText="Start Date">
                                                    <EditItemTemplate>
                                                        <asp:TextBox ID="TxtStartDate" runat="server" 
                                                        Text='<%#  Eval("Start_Date","{0:dd-MMM-yyyy}") %>'></asp:TextBox>
                                                       </EditItemTemplate>
                                                        <FooterTemplate>
                                                        <asp:TextBox ID="TxtStartDate" runat="Server" />
                                                        <asp:CalendarExtender ID="calStartDate" runat="server" TargetControlID="TxtStartDate"
                                                            Format="dd-MMM-yyyy" />
                                                        <asp:Button ID="btnAddNewSave" runat="server" Text="Save" CausesValidation="False"
                                                            OnClick="btnAddNewSave_Click" />
                                                        <asp:Button ID="btnAddNewCancel" runat="server" Text="Cancel" OnClick="btnAddNewCancel_Click" />
                                                    </FooterTemplate>
                                                </asp:TemplateField>
                                                <asp:CommandField ShowEditButton="True" ShowDeleteButton="True" CausesValidation="False" />

                                            </Columns>
                                        </asp:GridView>
                                        <asp:Button ID="btnAddNew" runat="server" Text="Add" CausesValidation="False" OnClick="btnAddNew_Click" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:54:53.067

为网格添加 RowCreated 事件并在该处理程序中检查

```
 if (e.Row.RowType == DataControlRowType.Footer)
        {
            var but = new LinkButton();
            but.Text = "Save";
            e.Row.Cells[0].Controls.Add(but);
        } 
```

# wpf - MVVM Light 和 MVVM 有什么区别？

> ID：15528166
> 
> 赞同：5
> 
> 时间：2013-03-20T15:41:29.673
> 
> 标签：wpf, silverlight, mvvm, mvvm-light

我一直在使用 MVVM 对我的 Windows 8 应用程序和 Windows 手机应用程序进行编程。我即将接触 MVVM Light，我只是想知道它们之间的区别是什么？我想 MVVM light 是 MVVM 的沙盒版本，带有 WPF 和 WinRT/WP8 开发。

有简单的答案吗？为什么要选择 MVVM Light 而不是 MVVM？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-20T15:43:45.700

没有“MVVM 已满”之类的东西。

[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)是一种关于如何构建 UI、数据和业务逻辑的模式。

[MVVM light](http://mvvmlight.codeplex.com/)是一个*轻量级*框架，支持您实现该模式。

顺便说一句：将鼠标悬停在您在问题中使用的标签上也会回答这个问题；-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:54:45.063

MVVM Light 旨在作为一个工具包（而不是框架；），它提供了一套组件，可帮助您根据 MVVM 模式编写应用程序。例如，MVVM Light 有一些库类，它们封装了重复的代码、加速和促进打字的片段、项目和项目模板以加速新应用程序的创建并避免浪费时间与基本的“接线”应用程序等

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:55:49.633

MVVM 代表模型视图视图模型。

MVVM Light 是由“Laurent Bugnion”组成的 - GalaSoft

[http://mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

MVVM是一种企业应用开发模式，一种最佳实践。我们可以通过以下页面深入了解。

[http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx](http://msdn.microsoft.com/en-us/library/gg405484(v=pandp.40).aspx)

如果您想专门从事整个业务。独立于 Silverlight TextBox 等用户界面元素，我们需要应用 MVVM 模式。通过这种方式，我们将业务部分重用于其他客户端平台。比如Windows手机..

如果您了解 MVC，您可以将 Controller 重新采样为 ViewModel，但此 ViewModel 不包含您视图中对象的任何引用。你的虚拟机可能会抽象你的视图。

我认为 .NET 的 MVVM 模式应用程序应该了解这些技术；Commanding、CollectionViewSource 用于过滤排序操作、DataContext、Binding、INotifyPropertyChanged

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T17:06:24.223

我一直在使用两者的一种方式（明显地） - MVVM 是一种设计模式，我只是用来根据模式构建我的代码 - 所以本质上 MainWindow.xaml 位于视图文件夹中，MainWindow_ViewModel.cs 位于 VM 文件夹中，然后Model.cs 位于我的模型文件夹中。View 的 DataContext 是用 ViewModel 类设置的，用于接线。当然，MVVM 不仅仅是文件组织，还确保代码也是按照模式编写的（逻辑分离和所有应该按照模式实现的好东西）。这样做 - 不一定需要我参考 MVVM Light 库来执行上述操作。

当我想使用 Messenger.Default.Send（广播值）Messenger.Default.Register（在不同的 VM 中获取值）在多个 ViewModel 之间进行通信时，我特别使用 MVVM Light

如有必要，可以分享示例代码。希望有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-02-28T13:09:47.700

MVVM Light 是 Galasoft 开发的 MVVM 模式工具包。因此 MVVM 是一种设计模式，MVVM Light 可以帮助您将其付诸实践。

# c++ - QML 和 C++ 属性 - ReferenceError：找不到变量

> ID：15528169
> 
> 赞同：8
> 
> 时间：2013-03-20T15:41:33.847
> 
> 标签：c++, qt, qml

在编写**QML**应用程序时，我遇到了绑定问题，分别。**在使用 Qt 4.8.1 构建的 Qt Quick 1 应用程序**中使用 QML访问**C++**属性。每当我运行应用程序时，我都会得到. 在搜索文档、示例和论坛并创建一个小型 QML 项目来测试此行为后，我仍然无法弄清楚为什么会出现这些错误。这是我为测试获得的“应用程序输出”：**`ReferenceError: Can't find variable: ...`** 

 **## 应用程序输出

```
Starting /.../build-QML_Cpp_propertyTest-Qt_4_8_1_in_PATH_System-Debug/QML_Cpp_propertyTest...
Qml debugging is enabled. Only use this in a safe environment!
file:///.../build-QML_Cpp_propertyTest-Qt_4_8_1_in_PATH_System-Debug/qml/QML_Cpp_propertyTest/main.qml:20: ReferenceError: Can't find variable: propertyTest
file:///.../build-QML_Cpp_propertyTest-Qt_4_8_1_in_PATH_System-Debug/qml/QML_Cpp_propertyTest/main.qml:15: ReferenceError: Can't find variable: textFromQt
file:///.../build-QML_Cpp_propertyTest-Qt_4_8_1_in_PATH_System-Debug/qml/QML_Cpp_propertyTest/main.qml:20: ReferenceError: Can't find variable: propertyTest 
```

但是，即使我在输出中得到这些错误，实际上我也可以在 QML 应用程序中得到这些值。所以它确实有效。
问题是，我无法让 QML 国际化工作（[http://qt-project.org/wiki/How_to_do_dynamic_translation_in_QML](http://qt-project.org/wiki/How_to_do_dynamic_translation_in_QML)）并且想知道它是否与这些错误有关。
如果没有，我无论如何都想清理这些！

* * *

## 代码

这是我的测试项目的代码：

**propertytest.h**

```
#include <QObject>

class PropertyTest : public QObject
{
    Q_OBJECT
    Q_PROPERTY(QString text READ text WRITE setText NOTIFY textChanged)
public:
    explicit PropertyTest(QObject *parent = 0);

    QString text();
    void setText(const QString &text);

signals:
    void textChanged();
public slots:

private:
    QString m_text;
}; 
```

**属性测试.cpp**

```
#include "propertytest.h"

PropertyTest::PropertyTest(QObject *parent) :
    QObject(parent)
{
    m_text = "My C++ class test text";
}

QString PropertyTest::text()
{
    return m_text;
}

void PropertyTest::setText(const QString &text)
{
    m_text = text;
} 
```

**主文件**

```
#include <QApplication>
#include <QDebug>
#include <QDeclarativeContext>
#include "qmlapplicationviewer.h"
#include "propertytest.h"

Q_DECL_EXPORT int main(int argc, char *argv[])
{
    QScopedPointer<QApplication> app(createApplication(argc, argv));

    PropertyTest *pt = new PropertyTest();

    QmlApplicationViewer viewer;
    viewer.addImportPath(QLatin1String("modules"));
    viewer.setOrientation(QmlApplicationViewer::ScreenOrientationAuto);
    viewer.setMainQmlFile(QLatin1String("qml/QML_Cpp_propertyTest/main.qml"));
    viewer.rootContext()->setContextProperty("textFromQt", QString("My C++ text"));
    viewer.rootContext()->setContextProperty("propertyTest", pt);
    viewer.showExpanded();

    return app->exec();
} 
```

**main.qml**

```
import QtQuick 1.1

Rectangle {
    width: 360
    height: 360
    Column {
        anchors.centerIn: parent
        spacing: 30

        Text {
            text: qsTr("Hello World")
            font.pointSize: 14
        }
        Text {
            text: textFromQt
            color: "red"
            font.pointSize: 12
        }
        Text {
            text: propertyTest.text
            color: "darkGreen"
            font.pointSize: 12
        }
    }

    MouseArea {
        anchors.fill: parent
        onClicked: {
            Qt.quit();
        }
    }
} 
```

我在 Arch Linux 上使用了 Qt Creator 2.7.81 的 git 版本。

谢谢你的帮助 ！
D

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-20T20:45:24.360

您收到的警告是因为您在调用时正在设置和加载 QML 的源文件：

```
viewer.setMainQmlFile(QLatin1String("qml/QML_Cpp_propertyTest/main.qml")); 
```

At this stage, the context for your property's are unknown. Its only a warning and luckily QML is smart enough to resolve this reference error once you call:

```
viewer.rootContext()->setContextProperty("textFromQt", QString("My C++ text"));
viewer.rootContext()->setContextProperty("propertyTest", pt); 
```

To stop this warning from printing every time, you must set the context properties before loading the source file of your QML (ie. Move the `setContextProperty` methods before `setMainQmlFile` method).

I do not think that these warnings have anything to do with your QML internationalization problems, but its difficult to tell without any relevant source code. I would suggest posting a new more directed question if you are still having difficulties with QML internationalization.**

# hive - 查询多个分区配置单元？

> ID：15528172
> 
> 赞同：3
> 
> 时间：2013-03-20T15:41:38.043
> 
> 标签：hive, hiveql

如何在 Hive 中查询同一张表的多个分区？在同一个命令中？

就像是 ？？？

```
SELECT * FROM mytable WHERE partition ='first_partition' and partition='second_partition' 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T15:59:05.057

在 Hive 中，partition 也是一个列，所以从查询的角度来看，没有区别。您可以将其视为一列。

如果 table`page_views`在 column 上分区`date`，则以下查询检索`2008-03-01`和之间仅几天的行`2008-03-31`。

```
SELECT page_views.*
FROM page_views
WHERE page_views.date >= '2008-03-01' AND page_views.date <= '2008-03-31' 
```

在您的情况下，您可以使用 like

```
SELECT * FROM mytable WHERE column_one ='first_partition' and column_two ='second_partition' 
```

如果你给出表结构，它会更清楚。

# javascript - 如何在不刷新整页的情况下刷新选择字段

> ID：15528177
> 
> 赞同：0
> 
> 时间：2013-03-20T15:41:46.693
> 
> 标签：javascript, html, select

我有两个级别的下拉`(select box)`。

如果我选择了拳头级别的东西，那么第二个下拉集将根据拳头选择出现

例如：我在第一级有 6 个选择，对于每个选择，我还有另外 6 个下拉设置隐藏在页面上。作为用户选择，它将显示第二级下拉菜单。

这是第一级

```
<select name="TapeType" id="TapeType">
            <option value="s">&lt;Select&gt;</option>
            <option value="Polypropylene Tape" id="PT">POLYPROPYLENE TAPE</option>
            <option value="HD Polypropylene Tape">HD POLYPROPYLENE TAPE</option>
            <option value="X HD Polypropylene Tape">X HD POLYPROPYLENE TAPE</option>
            <option value="PVC Tape">PVC TAPE</option>
            <option value="HD PVC TAPE">HD PVC TAPE</option>
            <option value="Reinforced Paper Tape">REINFORCED PAPER TAPE</option>
            <option value="Flatback Tape">FLATBACK TAPE</option>

        </select> 
```

这是第二级的两个例子

01

```
<select name="TapeColorPT" id="TapeColorPT" class="toggledDropDown">
            <option value="Tan">Tan</option>
            <option value="White">White</option>
            <option value="Clear">Clear</option>
            <option value="Red">Red</option>
            <option value="Orange">Orange</option>
            <option value="Yellow">Yellow</option>      
      </select> 
```

02

```
<select name="TapeColorHPT" id="TapeColorHPT" class="toggledDropDown">
            <option value="Tan">Tan</option>
            <option value="White">White</option>
            <option value="Clear">Clear</option>
      </select> 
```

为了显示每个下拉列表，我将此方法与 js 一起使用

```
$('.toggledDropDown').hide();

 $('#TapeType').change(function () {             

    if ($('#TapeType option:selected').text() == "POLYPROPYLENE TAPE"){
        $('#TapeColorPT').show();

    }
     else { 
          $('#TapeColorPT').hide();

if ($('#TapeType option:selected').val() == "HD Polypropylene Tape"){
        $('#TapeColorHPT').show();      
    }
     else { 
          $('#TapeColorHPT').hide();
     }
     }}); 
```

我的问题是

示例：当我在第一级选择 1 并在第二级选择 3 时。然后我回到第一级并选择2，因此出现了另一组第二级下拉菜单。之后，当我回到第一级选择 1 时，我之前在第二级选择的 3 将在那里。当我再次回到它时，我希望它不选择。

所以我认为如果有人让我知道如何在`javascript(js)`不刷新整页的情况下刷新选择框，我可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:53:29.613

您可以尝试将您的 js 函数修改为：

```
 $('#TapeType').change(function () { 

     //you will hide the second and third level
     $('.toggledDropDown').hide();

     //here i reset the second and third level to defaults by selecting the top one
     $('#TapeColorPT,#TapeColorHPT').attr('value','Tan');

     //here get the value od the first dropdown
     var tapeTypeVal = $('#TapeType').val();

    //here i switch for the 6 option of the first dropdown to know which dropdown will 
    //be appear
    switch (tapeTypeVal) {
    case 'POLYPROPYLENE TAPE':
        $('#TapeColorPT').show();
        break;
    case  'HD Polypropylene Tape':
        $('#TapeColorHPT').show();
        break;
    }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:47:58.713

尝试将您的第一行代码也放在 onchange 事件处理程序的主体中：

```
$('.toggledDropDown').hide(); /* existing top line of code can remain here */

$('#TapeType').change(function () {             
$('.toggledDropDown').hide(); /* but also add it right here */
if ($('#TapeType option:selected').text() == "POLYPROPYLENE TAPE"){
    $('#TapeColorPT').show();

}
... 
```

完整代码

```
$('.toggledDropDown').hide();

 $('#TapeType').change(function () {             

$('.toggledDropDown').hide(); /* adding this line here is the only change */

if ($('#TapeType option:selected').text() == "POLYPROPYLENE TAPE"){
    $('#TapeColorPT').show();

}
 else { 
      $('#TapeColorPT').hide();

if ($('#TapeType option:selected').val() == "HD Polypropylene Tape"){
    $('#TapeColorHPT').show();      
}
 else { 
      $('#TapeColorHPT').hide();
 }
 }}); 
```

# ios - NSNotification 面向对象

> ID：15528178
> 
> 赞同：1
> 
> 时间：2013-03-20T15:41:51.483
> 
> 标签：ios, objective-c, nsnotifications

我正在阅读 iOS Big Nerd Ranch 书，其中一个示例显示了如何将观察者添加到 NSNotificaionCenter ：

```
 [[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(orientationChanged:)
                                             name:UIDeviceOrientationDidChangeNotification
                                           object:[UIDevice currentDevice]]; 
```

现在在orientationChanged中，方向是从NSNotification中发布的对象中检索的：

```
- (void)orientationChanged:(NSNotification *)note {
    NSLog(@"orientationChanged  %d", [[note object] orientation]);
 } 
```

我的困惑在于这一行：**[[note object]orientation]**

NSNotification 的**对象**返回和**id**，所以这意味着我们在编译时不知道对象的类型是 UIDevice 。但是，我们可以从返回的对象中访问**方向**，而不会从编译器中出错。编译器如何知道对象类型是 UIDevice 并且访问方向是可以接受的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:58:21.633

> 编译器如何知道对象类型是`UIDevice`什么？

它没有。

它看到它是`id`. 该类型`id`是通用对象类型。**因此，如果您向它发送任何**消息，编译器就会毫无错误地接受。即使你发送一个不存在的。

这是因为 Objective-C 是一种动态语言。方法调用（消息发送）、绑定，甚至类型都是在运行时由 Objective-C 运行时库推断的。如果您向对象发送它未实现的消息（“响应”），则将引发运行时异常，而不是编译器错误。

顺便说一句，`id`假定消息 to 返回`id`（因此最多可以安全地返回指针大小的值，例如大多数整数），或者编译器查看所有类上的所有可用选择器名称并尝试将类型匹配到它找到的选择器之一，以防它确实被发现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:03:37.020

Objective-C 中的消息在运行时动态绑定到方法实现，而不是编译时。如果您尝试向未实现方法的对象发送消息，那么它将抛出发送到实例异常的无法识别的选择器。

您可以通过向对象发送消息“respondsToSelector:”来询问对象是否响应选择器来防止引发此异常。如果此方法返回 YES，那么您可以安全地向它发送消息。这在类中实现委托时很常见，因为协议中的某些方法可能是可选的。

有关 Objective-C 消息传递如何工作的更多信息，您可以阅读 Apple Objective-C 运行时编程指南：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtHowMessagingWorks.html #//apple_ref/doc/uid/TP40008048-CH104-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtHowMessagingWorks.html#//apple_ref/doc/uid/TP40008048-CH104-SW1)

# loadrunner - Loadrunner 和 Lightstreamer

> ID：15528183
> 
> 赞同：1
> 
> 时间：2013-03-20T15:42:06.933
> 
> 标签：loadrunner, lightstreamer

我们有一个使用 LightStreamer 流式传输数据的应用程序。它通过 HTTP 执行此操作。

我正在尝试使用 LoadRunner 对该应用程序进行性能测试。

我有两个 URL： URL 1 创建一个会话 ID 并保持打开状态，此 URL 将继续加载 URL 2 使用此会话 ID 发出请求。每个请求的响应都会出现在 URL1 的页面上。

我遇到的问题是，当我请求 URL 1 时，我无法在保持此请求打开的同时发出后续请求。我尝试使用 web_concurrent 包装器，但这会产生问题，因为在我可以向 URL 2 发出请求之前，我需要从 URL 返回的会话 ID。

获取 ID 不是问题，在第一个请求仍在运行时执行请求是问题。

之前有人用 LoadRunner 成功测试过 LightStreamer 吗？

这是我在网上唯一能找到的，其他人也在做同样的事情：[http ://www.sqaforums.com/showflat.php?Number=685960](http://www.sqaforums.com/showflat.php?Number=685960)

不幸的是，他不再与我们公司合作。我尝试在 LinkedIn 上与他联系，但运气不佳。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T22:28:02.200

如果我理解您的问题，您希望测试在 11.50 版中内置于 LoadRunner 中的轮询或推送通信。我们实际上在开发和测试这个特性的过程中使用了一个 LightStreamer Demo 应用程序，它们*应该*在录制时被 Async 关联引擎拾取。

如果您使用的是 LoadRunner 11.5x 并且没有发生这种情况，我将有兴趣了解有关业务流程的更多信息。

[肖恩·埃文斯](http://twitter.com/ShaneEvansLR "推特")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:10:43.160

除了一个特定的部分，我都在这里。

其余如下： web_url("create_session.txt", "URL=URL", "TargetFrame=", "Resource=0", "RecContentType=text/html", "Referer=", "Snapshot=t1.inf ", "Mode=HTML", EXTRARES, "URL=URL", ENDITEM, "URL=URL", ENDITEM, "URL=URL", ENDITEM, "URL=URL", ENDITEM, "URL=URL", ENDITEM, “URL=URL”，ENDITEM，“URL=URL”，ENDITEM，最后）；

如上所述，每个 EXTRARes URLS 都以 1,1,2,1,3,1,... 的格式响应，所以我使用 web_reg_find 来计算这些出现次数。

我的最后一个问题是：我使用 web_set_timeout("STEP", 60); 使 web_url 函数在 60 秒后停止，但这会导致：Action.c(20): Error -27728: Step download timeout (60 seconds) has expired [MsgId: MERR-27728]

是否可以优雅地执行此操作，因为它也将我的 Transaction 的返回设置为失败状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T18:55:59.127

非常抱歉耽搁了。假期和其他因素的混合......

您的请求超时是否会影响脚本的完成能力？如果没有，您可以使用 lr_continue_on_error 函数，以及以下选项之一：

```
0 = LR_ON_ERROR_NO_OPTIONS
1 = LR_ON_ERROR_CONTINUE
2 = LR_ON_ERROR_SKIP_TO_NEXT_ACTION
3 = LR_ON_ERROR_SKIP_TO_NEXT_ITERATION
4 = LR_ON_ERROR_END_VUSER 
```

# php - 谷歌搜索栏 twitter-bootstrap

> ID：15528185
> 
> 赞同：1
> 
> 时间：2013-03-20T15:42:09.757
> 
> 标签：php, html, css, twitter-bootstrap

我正在寻找一个带有谷歌风格的居中搜索栏的普通索引页面，但是我正在努力让 Twitter Bootstrap 看起来不错。

搜索栏必须在搜索字段的末尾（右侧）附加一个搜索图标按钮。当我计划编写一个下拉搜索建议系统时，我使用了预输入。

```
<div class="hero-unit">
<div class="input-append">
  <input type="text" data-provider="typeahead" class="input-large"
  placeholder="What do you want to know?" autocomplete="off">
  <button type="submit" class="btn-large btn-success">
    <i class="icon-search"></i> 
  </button>
</div> 
```

它还必须比标准文本框更大（更高），这是 Twitter Bootstrap 稳定版本中尚未提供的功能，因此我不得不将 CSS 放在页面顶部。

```
<style>
 input[class=input-large] {
    width: 540px;
    height: 24px;
    margin-bottom: 10px;
    margin-right: -7px;
    line-height: 30px;
    padding: 11px 19px;
    font-size: 17.5px;
    -webkit-border-radius: 6px;
       -moz-border-radius: 6px;
            border-radius: 6px;
  } 
```

我可以看到让搜索按钮更靠近搜索栏的唯一方法（使用 btn-large 时会出现间隙）是使用负边距。不是我引以为豪的东西，它看起来很乱。

我很感激这方面的一些指导。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:49:51.263

```
<div class='container'>
    <div class='row'>
        <form>
        <div class='span3 input-append' style="margin-top:30%; margin-left:30%">
            <input class="span2" style="height:26px;width:400px;" id="main_search" type="text" >
            <input class="btn btn-large btn-primary"  type="button" value="search">
        </div>

        </form>
    </div>
</div> 
```

小提琴-

[更新的小提琴](http://jsfiddle.net/stackmanoz/azF8w/14/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:50:48.540

您可以尝试[扩展表单控件](http://twitter.github.com/bootstrap/base-css.html#forms)

```
<div class="input-append">
    <span class="add-on"><input id="search-button" value="Search"></span>
    <!-- stick a search icon in there instead -->
    <input class="span2" id="search">
</div> 
```

但是，如果您这样做（填充、轮廓），则必须调整按钮的 CSS，但它们将作为一个单元保留在移动视图中。如果您真的想要自定义视图，那么无论如何您都会降低边距。

# jsp - JSP 没有输出

> ID：15528186
> 
> 赞同：0
> 
> 时间：2013-03-20T15:42:12.870
> 
> 标签：jsp

我正在开发一个没有任何框架的 JSP 应用程序。我开始在 Glassfish 服务器上使用 Netbeans，但没有输出。然后移到tomcat，同样的问题存在。

即使文件路径错误，浏览器也会显示空白页面并且没有错误 [例如：http://localhost:8080/invalid]

并且这样的代码在 Tomcat 或 Glassfish 中也没有任何输出

```
<%@ page import="java.io.*" %>
<%
int i=0;
for(i=0;i<10;i++)
 System.out.print(i + "<br/>");
%> 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:53:17.873

System.out.println 输出的输出是控制台/日志，而不是网页。System.out 是指整个系统的标准输出，将绑定到控制台。你想要做的是 out.println (No System.) 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T09:40:45.603

System.out.println 的输出是输出到服务器的控制台，您可以在服务器控制台中看到消息，但不能看到网页。

请更改您的如下所示

```
<%@ page import="java.io.*" %>
 <%
  int i=0;
  for(i=0;i<10;i++)
  out.print(i + "<br//>");
%> 
```

这里： out -> 指的是 JspWriter 对象。

**Out：**我们可以直接在 JSP 脚本中输出变量而不需要声明它。 **out --JSPWriter** * *JSPWriter* *是 javax.servlet.jsp 包中可用的类。

在 servlet 中，我们使用 printWriter 将输出发送到客户端。在 JSP 中，我们使用 JSPWriter。

* **PrintWriter 和 JSPWriter 有什么区别？**

每个 JSPWriter 都与 8KB 的内部 Buffer 相关联。其中 PrintWriter 不与任何缓冲区相关联。例如：我们可以同时使用 print 和 write() 是一个输出变量。

```
<%
 int a = 10;
 int b = 20;
 out.print(“A value is:”+a);
 out.write(“B value is:”+b);
%> 
```

# search - 如何在文本文件中批量搜索和替换值*2

> ID：15528188
> 
> 赞同：0
> 
> 时间：2013-03-20T15:42:18.323
> 
> 标签：search, replace, numbers

我有很多文本文件；

```
Value 800
Amount 50 
```

或者

```
Value 600
Amount 40 
```

我想把所有数字加倍

```
Value 1600
Amount 100 
```

或者

```
Value 1200
Amount 80 
```

是否有一些非常基本的程序可以搜索“值”和“金额”，然后读取整数并替换为相同的值*2

或者用notepad++、autoIt或其他一些简单的程序/工具来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:00:16.283

您至少应该先尝试一下，然后提出问题；）

请先备份你的文件，然后试试这个 autoit 脚本：

```
#include <File.au3>

$textFiles = _FileListToArray(@ScriptDir, "*.txt", 1)

for $fileIndex = 1 to $textFiles[0]
$textFile = $textFiles[$fileIndex]

    ConsoleWrite($textFile & @CRLF)

    Local $lines
    _FileReadToArray($textFile, $lines)

    $output = FileOpen($textFile, 2)

    For $i = 1 To $lines[0]
        $line = $lines[$i]
        $tokens = StringSplit($line, " ")

        If $tokens[0] = 2 Then
            $newLine = $tokens[1] & " " & $tokens[2] * 2
            FileWrite($output, $newLine & @CRLF)
        EndIf
    Next

    FileClose($output)
Next 
```

# xml - 自定义 XML 排序顺序？

> ID：15528192
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:42:30.077
> 
> 标签：xml, sorting, xslt

我有一个像

```
<tests>
     <test>
       <categoryname>A</categoryname>
       <region>EU</region>
     </test>

     <test>
       <categoryname>B</categoryname>
       <region>EU</region>
     </test>

     <test>
       <categoryname>C</categoryname>
       <region>USA</region>
     </test>
     <test>
       <categoryname>C</categoryname>
       <region>EU</region>
     </test>
</tests> 
```

它按字母顺序排序并显示如下：

```
A
B
C 
```

但我希望通过我的自定义排序来查看它，例如：

```
C
A
B 
```

我已经看到了类似的问题并为我应用了给定的答案（xsl 代码），但不幸的是没有帮助，如果你能帮助我，我会很高兴！我可以添加额外的属性/标签/值等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:54:42.907

这个怎么样：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <xsl:copy>
      <xsl:apply-templates select="test">
        <xsl:sort select="string-length(substring-before('|C|A|B|', 
                                                         concat('|', categoryname, '|')
                                                        ))"
                  data-type="number"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

当应用于您的样本输入时，结果是：

```
<tests>
  <test>
    <categoryname>C</categoryname>
    <region>USA</region>
  </test>
  <test>
    <categoryname>C</categoryname>
    <region>EU</region>
  </test>
  <test>
    <categoryname>A</categoryname>
    <region>EU</region>
  </test>
  <test>
    <categoryname>B</categoryname>
    <region>EU</region>
  </test>
</tests> 
```

# c# - 实体框架 - 数据缓存分离实体的策略

> ID：15528207
> 
> 赞同：1
> 
> 时间：2013-03-20T15:43:15.173
> 
> 标签：c#, entity-framework, caching, entity-framework-4

我决定在我的域服务层上添加一个缓存层，以提高我正在处理的系统的性能。

我之前并没有真正使用过缓存，而且我见过的大多数示例都非常琐碎。我确信我正在处理的问题是一个熟悉的问题，但我还没有找到任何对我有帮助的东西。

简而言之，问题如下：如果我缓存了一个与其他缓存实体有关系的实体，当其中任何一个发生更改时，确保缓存始终保持最新的最佳方法是什么? 请注意，从存储库中提取实体时，实体会与其数据上下文分离。

这是一个简单的例子：

域对象：

```
public class Product
{
    public int ID { get; set; }
    public string Name { get; set; }
    public int SpecID { get; set; }
    public ProductSpec Spec { get; set; }
}

public class ProductSpec
{
    public int ID { get; set; }
    public string Name { get; set; }
    public IList<Product> Products { get; set; }
    public IList<ProductSpecDrawing> Drawings { get; set; }
}

public class ProductSpecDrawing
{
    public int ID { get; set; }
    public int ProductSpecID { get; set; }
    public string Name { get; set; }
    public string FileName { get; set; }
    public ProductSpec Spec { get; set; }
    public IList<ProductSpecDrawingRevision> Revisions { get; set; }
} 
```

我的缓存服务的getter方法：

```
public override ProductSpec GetProductSpec(int productSpecID)
{
   ProductSpec cachedSpec = cacheStorage.Retrieve("productSpec" + productSpecID);
   if(cachedSpec == null)
   {
       cachedSpec = base.GetProductSpec(productSpecID); //repository lookup
       cacheStorage.Store("productSpec" + productSpecID, cachedSpec);
   }
   return cachedSpec;
} 
```

类似的方法缓存/检索 Product、ProductSpecDrawing 等。

现在，问题来了：例如，如果对 ProductSpecDrawing 对象进行了更新，我需要查找并更新缓存中可能引用该对象的任何其他对象，否则我可能会查看过时的数据。看起来像这样：

```
public override void RemoveProductSpecDrawing(int specDrawingID)
{
    ProductSpecDrawing drawingToRemove = cacheStorage.Retrieve<ProductSpecDrawing>("specDrawing" + specDrawingID);
    base.RemoveProductSpecDrawing(specDrawingID);
    cacheStorage.Remove(drawingToRemove);

    //have to update productSpec collection because we removed a drawing
    cacheStorage.Store("spec" + drawingToRemove.ProductSpec.ID, base.GetProductSpec(drawingToRemove.ProductSpec.ID);
} 
```

我认为我缓存每个实体的方式存在问题，原因有两个：数据有很多机会变得陈旧（尤其是当域变大时），并且需要在单个之后刷新潜在的许多缓存对象更新似乎会抵消任何性能提升（除非用户只是查看内容而不是编辑它们）。

# php - 图像上的 PHP 文本 foreach

> ID：15528210
> 
> 赞同：0
> 
> 时间：2013-03-20T15:43:22.420
> 
> 标签：php

我正在运行一个获取信息的 foreach，然后该值用于设置图像（条）的高度。

我也尝试在栏上方的文本中添加值，但一直在栏旁边并排出现。有任何想法吗？请记住，这是在 foreach 中完成的，因此有 10 个值和 10 个图像。

代码：

```
<?php echo "$textvalue"; ?>

<img src="images/bar_offpeak.jpg" alt="" width="19" height="<?php echo "$height" ?>%" title="<?php echo "$textvalue" ?>GB" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:45:39.133

您需要`<br />`在文本之后添加一个元素。默认情况下，简单的文本和图像浮动。

这就是你想要做的：

```
<?php echo "$textvalue"; ?><br />

<img src="images/bar_offpeak.jpg" alt="" width="19" height="<?php echo "$height" ?>%" title="<?php echo "$textvalue" ?>GB" /> 
```

后期编辑：

我的错误先生，我似乎忘记了那部分。在这种情况下，一种解决方案是在 div 元素中显示每个图像和文本。这样，您可以以任何您想要的方式浮动 div（即显示您想要的任意数量的行/列）。

所以，一个项目会这样：

```
<div style="float:left;">
    <?php echo "$textvalue"; ?><br />

    <img src="images/bar_offpeak.jpg" alt="" width="19" height="<?php echo "$height" ?>%" title="<?php echo "$textvalue" ?>GB" />
</div> 
```

每当你想创建一个新行时，只需像这样插入一个 div：

```
<div style="clear:both;"></div> 
```

这应该是让您走上正确道路的好主意。但是，正如 Jeroen 所建议的，您应该使用更加面向布局的方法。

希望这可以帮助。祝你有美好的一天：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:50:22.670

我不会使用`<br>`标签来操作布局。我建议将文本放在元素中（a `span`、`figcaption`等）并使用 css 来控制布局。

假设html5：

```
<figure>
  <figcaption><?php echo $textvalue; ?></figcaption>
  <img src="images/bar_offpeak.jpg" alt="" width="19" height="<?php echo $height ?>%" title="<?php echo $textvalue ?>GB" />
</figure> 
```

在 css 中（只是一个例子）：

```
figcaption {
  display: block;
} 
```

# signalr - 通过 http 标头 SignalR 传递令牌

> ID：15528221
> 
> 赞同：39
> 
> 时间：2013-03-20T15:43:45.437
> 
> 标签：signalr, signalr-hub, signalr.client

我可以看到 HubConnection 中有一个选项可以通过客户端的 url 请求传递参数。有没有办法通过来自 JS 或 .NET 客户端的 http 标头传递特定令牌？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2013-03-20T18:28:14.427

没有简单的方法可以使用 JS 或 .NET 客户端为 SignalR 请求设置 HTTP 标头，但您可以将参数添加到将作为每个 SignalR 请求的一部分发送的查询字符串：

**JS 客户端**

```
$.connection.hub.qs = { "token" : tokenValue };
$.connection.hub.start().done(function() { /* ... */ }); 
```

**.NET 客户端**

```
var connection = new HubConnection("http://foo/",
                                   new Dictionary<string, string>
                                   {
                                       { "token", tokenValue }
                                   }); 
```

在 Hub 中，您可以通过 Context 访问社区名称：

```
Context.QueryString["token"] 
```

您也可以在建立持久连接时添加到查询字符串。

编辑：现在可以在 .NET SignalR 客户端上设置标头，正如一些评论者所指出的那样。

**在 .NET 客户端上设置标头**

```
var connection = new HubConnection("http://foo/");
connection.Headers.Add("token", tokenValue); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-29T07:46:38.187

**您可以使用.NET 客户端**在 Connection 或 HubConnection 上添加标头（如@abnanda 所述）：

```
var connection = new Connection("http://signalr/");
connection.Headers.Add("custom-header", "value"); 
```

在服务器端，您可以从 IRequest 中检索标头值，例如 OnConnected：

```
var header = request.Headers["custom-header"]; 
```

但是，我还没有找到使用**JS 客户端**执行此操作的方法（$connection 对象上没有标头或 addHeaders）。

我在以下位置发布了一个问题：[http ://forums.asp.net/t/1910020.aspx/1?Add+custom+HTTP+header+on+client+side+connect+call+SignalR+1+1 +1+](http://forums.asp.net/t/1910020.aspx/1?Add+custom+HTTP+header+on+client+side+connect+call+SignalR+1+1+1+)

编辑：标头未公开，因为 websocket 客户端（在浏览器中）不支持它（因此无法跨传输实现它）。请参阅上面帖子中的 David Fowlers 回复。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-29T11:45:52.970

大家好，这是 .Net 客户端的最佳方法！

在我的客户端中，将 Authorization 标头添加到 HubConnectionBuilder 中，如下所示：

对于不记名令牌 ->

```
HubConnection = new HubConnectionBuilder()
            .WithUrl($"https://10.0.2.2:5001/chatHub", (opts) =>
            {                    
                opts.Headers.Add("Authorization", new AuthenticationHeaderValue(
                        "Bearer", "YOUR_TOKEN").ToString());                    
            })                
            .Build(); 
```

您也可以像这样使用基本令牌 ->

```
HubConnection = new HubConnectionBuilder()
            .WithUrl($"https://10.0.2.2:5001/chatHub", (opts) =>
            {                    
                opts.Headers.Add("Authorization", new AuthenticationHeaderValue(
                        "Basic", Convert.ToBase64String(
                            Encoding.Default.GetBytes(
                                "Username" + ":" + "Password"
                                ))).ToString());                    
            })                
            .Build(); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-05T08:57:30.943

我通过将我的信息添加到方法`querystring`中可用的`IConnected.Connect()`方法解决了这个问题。

在 .NET 客户端上，您通过`querystring into your HubConnection:`

```
var connection = new HubConnection("http://localhost:8080/", "myInfo=12345"); 
```

在 JS 客户端上，您在开始连接之前设置 qs 属性：

```
$.connection.hub.qs = "myInfo=12345"; 
```

然后，您可以在 Connect() 方法中访问服务器上的这些信息：

```
var myInfo = Context.QueryString["myInfo"];
Groups.Add(Context.ConnectionId, myInfo); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-30T04:11:37.507

使用 js 客户端，我认为不支持标头，但它必须通过查询来代替。

对于不是生成的 js 代理的 javascript 客户端，您可以向查询字符串添加额外的信息，如下所示：

```
var connection = $.hubConnection("http://localhost:3306/signalr");
connection.qs = "somekey=somevalue";
var hubProxy = connection.createHubProxy('hubname'); 
```

ping、negotiation、abort、connect 等消息现在将包含此查询字符串值。

如果您影响 ajax 全局设置，则可以发送标头。我已经观察到它对服务器的影响，但没有测试过它在你可能需要的每一种情况下都能做到。

```
 $.ajaxSetup({
      beforeSend: function (xhr)
      {
         xhr.setRequestHeader("Authorization","Token token=\"abcdef\"");        
      }
  }); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-02-08T09:36:52.300

```
using Microsoft.AspNet.SignalR.Client;

HubConnection = new HubConnection(_url);
HubProxy = HubConnection.CreateHubProxy(_hubname);
HubConnection.Headers.Add("Authorization", "Bearer "+authToken);
HubConnection .Start().Wait(); 
```

# android - 每次应用程序执行时数据库都会更新

> ID：15528226
> 
> 赞同：0
> 
> 时间：2013-03-20T15:43:52.680
> 
> 标签：android, sqlite, sqliteopenhelper

我正在创建一个应用程序，其中数据只需插入一次数据库。问题是每次我运行我的应用程序时，它都会一次又一次地插入数据。谁能帮我解决这个问题？

**数据库类**

```
public class Database extends SQLiteOpenHelper{

private static final String DB_NAME = "Diseases.db";

private static final int DB_VERSION_NUMBER = 1;

public static final String DB_TABLE_NAME = "Diseaseslist";
private static final String  _ID="id";
public static final String COLUMN_1_NAME = "Name";
private static final String COLUMN_2_Symptom="Symptom";
private static final String COLUMN_3_Symptom1="Symptom1";
private static final String COLUMN_4_Symptom2="Symptom2";
private static final String COLUMN_5_Symptom3="Symptom3";
private static final String COLUMN_6_Discription="Discription";
private static final String COLUMN_7_Precaution="Precaution";
String[] str,str1,str2;

private static final String DB_CREATE_SCRIPT ="create table "
        + DB_TABLE_NAME + " (" + _ID
        + " integer primary key autoincrement, " + COLUMN_1_NAME
        + " , " + COLUMN_2_Symptom + " ," + COLUMN_3_Symptom1 +" ," 
        + COLUMN_4_Symptom2 +" ," + COLUMN_5_Symptom3 +" ," + COLUMN_6_Discription + " ," 
        + COLUMN_7_Precaution + " "+");";

private SQLiteDatabase sqliteDBInstance = null;

public Database(Context context) {
    super(context, DB_NAME, null, DB_VERSION_NUMBER);
}

@Override
public void onCreate(SQLiteDatabase sqliteDBInstance) {
    // TODO Auto-generated method stub
    Log.i("onCreate", "Creating the database...");
    sqliteDBInstance.execSQL(DB_CREATE_SCRIPT);

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    sqliteDBInstance.execSQL("DROP TABLE IF EXISTS"+DB_TABLE_NAME);
    onCreate(sqliteDBInstance);
}
 public void openDB() throws SQLException
    {
        Log.i("openDB", "Checking sqliteDBInstance...");
        if(this.sqliteDBInstance == null)
        {
            Log.i("openDB", "Creating sqliteDBInstance...");
            this.sqliteDBInstance = this.getWritableDatabase();
        }
    }

    public void closeDB()
    {
        if(this.sqliteDBInstance != null)
        {
            if(this.sqliteDBInstance.isOpen())
                this.sqliteDBInstance.close();
        }
    }
    public long insertDiseases(String Name,String Symptom,String Symptom1,String Symptom2,String Symptom3,String Description, String Precaution)
    {
        ContentValues contentValues = new ContentValues();
        contentValues.put(COLUMN_1_NAME, Name);
        contentValues.put(COLUMN_2_Symptom, Symptom);
        contentValues.put(COLUMN_3_Symptom1, Symptom1);
        contentValues.put(COLUMN_4_Symptom2, Symptom2);
        contentValues.put(COLUMN_5_Symptom3, Symptom3);
        contentValues.put(COLUMN_6_Discription, Description);
        contentValues.put(COLUMN_7_Precaution, Precaution);
        Log.i(this.toString() + " - insertCountry", "Inserting: " + Name);
        return this.sqliteDBInstance.insert(DB_TABLE_NAME, null, contentValues);
    }

    public boolean removeDiseases(String Name)
    {
        int result = this.sqliteDBInstance.delete(DB_TABLE_NAME, "Name='" + Name + "'", null);

        if(result > 0)
            return true;
        else
            return false;
    }

    public long updateCountry(String oldName, String newName)
    {
        ContentValues contentValues = new ContentValues();
        contentValues.put(COLUMN_1_NAME, newName);
        return this.sqliteDBInstance.update(DB_TABLE_NAME, contentValues, "Name='" + oldName + "'", null);
    }

    public String[] getSymptom()
    {
        Cursor cursor = this.sqliteDBInstance.query(DB_TABLE_NAME, new String[] {COLUMN_2_Symptom}, null, null, null, null, null);
 Log.i(COLUMN_2_Symptom, "Symptom"+cursor);
        if(cursor.getCount() >0)
        {
             str = new String[cursor.getCount()];
            int i = 0;

            while (cursor.moveToNext())
            {
                 str[i] = cursor.getString(cursor.getColumnIndex(COLUMN_2_Symptom));
                 i++;
             }

            return str;
        }
        else
        {
            return new String[] {};
        }
    }

    public String[] getSymptom1(String ss) {

    Cursor curs=this.sqliteDBInstance.rawQuery("Select Symptom1 from Diseaseslist where Symptom='" + ss+ "'  ", null);
        if(curs.getCount()>0)
        {
            str1 = new String[curs.getCount()];
            int j= 0;
            if(curs.moveToFirst())
            {
            do
            {
                str1[j] = curs.getString(curs.getColumnIndex(COLUMN_3_Symptom1));
                j++;
            }while(curs.moveToNext());
            }
            return str1;
        }
        else
        {
        return new String[] {};
        }
    }
    public String[] getName(String s1,String s2){

        Cursor cur=sqliteDBInstance.rawQuery("Select Name from Diseaseslist where Symptom='"+s1+"' and Symptom1='" +s2+"'", null);
        Log.d("20", "21");
        if(cur.getCount()>0)
        {
            Log.d("22", "23");
            str2 = new String[cur.getCount()];
            Log.d("24","25");
            int k= 0;
            if(cur.moveToFirst())
            {
            do
            {
                Log.d("26", "27");
                str2[k] = cur.getString(cur.getColumnIndex(COLUMN_1_NAME));
                Log.d("26", str2[k]);
                System.out.println("gate name v "+str2[k]);
                k++;
            }while(cur.moveToNext());
            }
            return str2;
        }
        else
        {
            return new String[] {};
        }

    }

public Cursor getdetail(String dses){
    this.sqliteDBInstance = this.getReadableDatabase();
    return sqliteDBInstance.rawQuery("Select * from Diseaseslist where Name='" +dses+"'",null);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:57:32.173

> 我正在创建一个应用程序，其中数据只需插入一次数据库。问题是每次我运行我的应用程序时，它都会一次又一次地插入数据。谁能帮我解决这个问题？

这是一个有点令人困惑的问题。您很可能在`onCreate()`方法中插入数据。我第一个应该可行的想法是当您第一次将数据保存到数据库中时，将一些布尔变量保存到[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)然后用条件包装您的代码：

**伪代码：**

```
// saving value
SharedPreferences s = getSharedPreferences("com.example.someText", Context.MODE_PRIVATE);
s.edit().putBoolean("isInserted", true).commit();

// read value
SharedPreferences s = getSharedPreferences("com.example.someText", Context.MODE_PRIVATE);
boolean isInserted = s.getBoolean("isInserted", false); // second param is default value 
```

**另一种方法：**

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
preferences.edit().putBoolean("isInserted", true);

SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(this);
boolean isInserted = preference.getBoolean("isInserted", false); 
```

然后创建简单的条件：

```
if (!isInserted) {
   // perform inserting
}
else {
   // other work
} 
```

# python - 替换python字符串中的字母

> ID：15528228
> 
> 赞同：2
> 
> 时间：2013-03-20T15:43:58.213
> 
> 标签：python

我正在为法语编写一个程序，将现在时动词变成过去时。问题是我需要替换字母，但它们是用户输入的，所以我必须让它替换行尾的字母。这是我到目前为止所拥有的，但它不会改变它只是给出一个错误的字母：

```
word = raw_input("what words do you want to turn into past tense?")
word2= word

if word2.endswith("re"):
 word3 = word2.replace('u', 're')
 print word3

elif word2.endswith("ir"):
 word2[-2:] = "i"
 print word2

elif word2.endswith("er"):
 word2[-2:] = "e"
 print word2

else:
 print "nope" 
```

我尝试了单词替换，但这也不起作用，它只是给了我相同的字符串。如果有人可以给我一个例子，也许可以稍微解释一下，那就太棒了。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:54:34.687

IMO 您使用替换的方式可能存在问题。解释了替换的语法。[这里](http://docs.python.org/2/library/string.html#string.replace "Python字符串替换方法")

```
string.replace(s, old, new[, maxreplace]) 
```

这个 ipython 会话可能会对您有所帮助。

```
In [1]: mystring = "whatever"

In [2]: mystring.replace('er', 'u')
Out[2]: 'whatevu'

In [3]: mystring
Out[3]: 'whatever' 
```

基本上你想要替换的模式首先出现，然后是你想要替换的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:57:39.510

打扰一下

```
word3 = word2.replace('u', 're') 
```

上面的代码可能会产生错误的结果，因为
您的单词中可能存在另一个“er”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:06:42.797

字符串是不可变的，所以你不能只替换最后两个字母......你必须从现有的字符串创建一个新字符串。

正如MM-BB所说，replace将替换字母的所有出现......

尝试

```
word = raw_input("what words do you want to turn into past tense?")
word2 = word

if word2.endswith("re"):
    word3 = word2[:-2] + 'u'
    print word3

elif word2.endswith("ir"):
    word3 = word2[:-2] + "i"
    print word3

elif word2.endswith("er"):
    word3 = word2[:-2] + "e"
    print word3

else:
    print "nope" 
```

例 1：

```
what words do you want to turn into past tense?sentir
senti 
```

例 2：

```
what words do you want to turn into past tense?manger
mange 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:30:27.907

我认为正则表达式在这里会是一个更好的解决方案，尤其是[subn](http://docs.python.org/2/library/re.html#re.subn)方法。

```
import re

word = 'sentir'

for before, after in [(r're$','u'),(r'ir$','i'),(r'er$','e')]:
    changed_word, substitutions  = re.subn(before, after, word)
    if substitutions:
        print changed_word
        break
else:
    print "nope" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-31T07:37:50.093

本质上你做错的是“word2.replace（'u'，'re'）”这意味着你在var word2中用're'替换'u'。我已经更改了代码；

```
 word = raw_input("what words do you want to turn into past tense?")
 word2= word

 if word2.endswith("re"):
    word3 = word2.replace('re', 'u')
    print word3

  elif word2.endswith("ir"):
     word2[-2:] = "i"
     print word2

 elif word2.endswith("er"):
    word2[-2:] = "e"
    print word2

 else:
     print "nope" 
```

# jquery - jQuery json 错误

> ID：15528230
> 
> 赞同：0
> 
> 时间：2013-03-20T15:44:06.737
> 
> 标签：jquery, ajax, json

从域返回 json 时遇到问题。

在一个文件中，我有以下内容

```
var postData ="domain=testing.gr";

$.ajax({
    type: "POST",
    dataType: "json",
    data: postData,
    beforeSend: function(x) {
        if(x && x.overrideMimeType) {
            x.overrideMimeType("application/json;charset=UTF-8");
        }
    },
    url: 'http://www.ewebs.gr/advprodigy/adv.php',
    success: function(data) {
        // 'data' is a JSON object which we can access directly.
        // Evaluate the data.success member and do something appropriate...
        if (data.success == true){
            $('#keimeno').html(data.message);
        }
        else{
            $('#keimeno').html(data.message);
        }
    }
}); 
```

...在 PHP 文件中，我对以下内容进行了硬编码：

```
<?php header('content-type: application/json');

    $domain = $_POST['domain'];

    // Set up associative array
    $data = array('success'=> true,'message'=>'Success message: hooray!');

    // JSON encode and send back to the server
    echo json_encode($data);

?> 
```

但是我在返回时遇到错误..响应是空的！ [http://prntscr.com/x333k](http://prntscr.com/x333k)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:50:04.933

在这里你没有`json`从你那里得到`server`所以试试这个，

```
<?php 
    //header('content-type: application/json');

    //$domain = $_POST['domain'];

    // Set up associative array
    $data = array('success'=> true,'message'=>'Success message: hooray!');

    // JSON encode and send back to the server
    echo json_encode($data);
?> 
```

如果这可行，则将其添加`error_reporting(-1);`到您`php file`的获取`error`中。

另请阅读`header json` [https://stackoverflow.com/questions/267546/correct-http-header-for-json-file](https://stackoverflow.com/questions/267546/correct-http-header-for-json-file)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:03:15.177

尝试在服务器上有这个：

```
header('Access-Control-Allow-Origin: *');
header('Cache-Control: no-cache, must-revalidate');
header('Expires: Mon, 26 Jul 1997 05:00:00 GMT');
header('Content-type: application/json'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-20T15:48:29.407

尝试使用

```
{
type: "POST",
contentType : "application/json; charset=utf-8",
dataType : "json",...} 
```

# vb.net - 在 Excel 电子表格的中间放置多个滚动条

> ID：15528240
> 
> 赞同：2
> 
> 时间：2013-03-20T15:44:25.220
> 
> 标签：vb.net, vba, excel, scrollbar

我正在开发一个 COM 插件，但我很乐意在 VB 或 VBA 中解决这个问题。我有根据数据库中的选择生成的用户报告，然后将工作表添加到现有工作表中。我被告知我需要保持相同的基本格式并将其保留在 Excel 中。问题是表单中的这些列表的长度可能比空间长得多。

这是当前表单的样子： ![3 表](../Images/a2db4949fa06e300fc2f735cd9f54579.png)

我对解决方案的想法是将总数降低到理论上的最大项目（数据库中的选项总数加上 50 个左右），然后在中间滚动带有滚动条。

有没有办法让 3 个单独的滚动条只滚动每个表格（上面还有一些不会滚动的东西）？我只看到滚动整个工作表的滚动条。

有更好的方法吗？

我曾想过尝试使用 Index 功能，但我希望最终用户能够在滚动时编辑信息（在这种情况下会覆盖索引）。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:57:11.213

将数据存储在另一张表中或这些表下方。

`OFFSET`使用基于行方向的每个表的特定单元格中的值的函数引用此数据。

在每个表旁边放置一个滚动条（ActiveX 或 Forms），链接到之前步骤中的特定单元格。

隐藏特定单元格。隐藏带有数据的工作表/行。

使用表单滚动条，您可以轻松地将其值链接到单元格，但不能将其最小值和最大值链接到您想要链接到集合中的记录数（减去表中显示的记录数）。 . 与ActiveX 控件看起来一样的故事。您必须通过一些代码设置 min 和 max 属性，在这种情况下，我总是更喜欢 ActiveX 控件，因为它与 VBA 交互更容易（恕我直言）。

# svn - 如何管理插件开发的存储库？

> ID：15528241
> 
> 赞同：1
> 
> 时间：2013-03-20T15:44:30.613
> 
> 标签：svn, plugins

假设您有一个应用程序 X，并且您想开发插件 A、B 和 C。

应用程序可以在没有插件的情况下存在，但插件在没有应用程序的情况下无法工作。

您还想改进应用程序 X。

所以你需要回购：

*   X
*   一个
*   乙
*   C
*   X 的可能分支
*   每个插件的可能分支

这里的关键是插件需要代码 X，但 repo 应该只有插件代码。

我的兴趣是开发这些插件并发布插件的存储库，但我希望将整个代码放在一个地方，以便我可以使用我的 IDE 创建项目。

我正在使用SVN！

# dynamics-crm-2011 - Dynamics CRM 2011 - 当我尝试打开通过插件创建的实体时出现“错误”

> ID：15528242
> 
> 赞同：0
> 
> 时间：2013-03-20T15:44:30.743
> 
> 标签：dynamics-crm-2011

我有一个创建自定义实体实例的插件。创建似乎没有任何错误，但是当我尝试以表单打开实体时，我得到“发生错误”，没有进一步的解释，也没有要下载的错误文本。如何调试问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:23:16.983

我去删除了所有字段，但只有一个。测试了表格，然后开始重新添加它们，边做边测试。我一直这样做，直到找到有问题的字段，这是一个浮点字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:01:17.190

尝试启用[跟踪](http://exploringxrm.wordpress.com/2012/01/12/enabling-trace-in-microsoft-dynamics-crm-2011/)或使用此[工具](http://crmdiagtool2011.codeplex.com/)，以获取更多信息。

# macos - 使用 pcap 的本机 Mac OS X 对话框请求权限

> ID：15528246
> 
> 赞同：4
> 
> 时间：2013-03-20T15:44:39.290
> 
> 标签：macos, pcap

有没有一种简单的方法可以在 Mac OS X 中通过本机对话框为整个应用程序请求 root 权限？我正在做需要对网络设备进行 root 访问的数据包捕获。我使用的是 C++，而不是目标 C。我需要在 Xcode 中“以 root 身份调试”的等效功能。

谢谢！

编辑：或者也许如何将 osascript 合并到 .app 中，这将请求应用程序的 root 访问权限？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-23T13:09:10.870

在 Unix 中，进程不能提升自己的权限。无论如何，以 root 权限运行整个应用程序是一个非常糟糕的主意，因为它的攻击面会很大。您应该使用特权帮助程序来完成最低限度的必要工作，然后退出。

请参阅 Apple 的[安全编码指南](https://developer.apple.com/library/mac/#documentation/security/conceptual/SecureCodingGuide/Introduction.html)，尤其是有关[安全提升权限](https://developer.apple.com/library/mac/#documentation/security/conceptual/SecureCodingGuide/Articles/AccessControl.html)的文章。

您可以使用[SMJobBless](https://developer.apple.com/library/mac/#samplecode/SMJobBless/Introduction/Intro.html)来安装您的特权帮助工具。

# javascript - 在 Ember 中，当属性更改时我应该如何在控制器中调用函数

> ID：15528250
> 
> 赞同：2
> 
> 时间：2013-03-20T15:44:41.963
> 
> 标签：javascript, templates, binding, controller, ember.js

我希望`exampleFunction`每次“exampleProperty”更改时都调用该函数。我应该如何设置？似乎这种情况最近发生了变化。我正在使用 1.0.0-RC1。

模板：

```
 <div id="container">
      {{view Ember.TextField valueBinding="exampleProperty"}}
    </div> 
```

控制器：

```
ExampleApp.ApplicationController = Ember.Controller.extend({

  exampleProperty: "example",

  exampleFunction: function() {
    console.log("exampleProperty was changed");
  }

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:14:36.313

您将 exampleFunction 定义为观察者。最直接的语法是使用 'observes' 方法`Function`：

```
exampleFunction: function () {
    console.log("property changed");
}.observes('exampleProperty') 
```

您可以在 Ember 指南中阅读有关观察者（以及更多内容）的更多信息：http: [//emberjs.com/guides/object-model/observers/](http://emberjs.com/guides/object-model/observers/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:15:04.923

您将创建一个“观察”属性。

```
ExampleApp.ApplicationController = Ember.Controller.extend({

  exampleProperty: "example",

  exampleFunction: function() {
    console.log("exampleProperty was changed");
  }.observes("exampleProperty")

}); 
```

# ruby-on-rails - default_scope 可以在 if 块内吗？

> ID：15528251
> 
> 赞同：1
> 
> 时间：2013-03-20T15:44:48.677
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想知道是否可以放入`default_scope`if 块中。我有一个用户模型该`has_one`配置文件。这是我在用户模型中的代码：

```
Class User

default_scope joins(:profile).order('profiles.updated_at DESC').readonly(false)

end 
```

问题是，当数据库没有创建配置文件时，它会给出错误，因为配置文件是零。我可以使用 if 块，我可以说：

```
unless self.profile.nil?
 default_scope joins(:profile).order('profiles.updated_at DESC').readonly(false)
end 
```

这种方法有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T20:46:10.340

虽然我在评论中看到您已经解决了您的问题，但以下是您实际提出的问题的答案，以防其他人遇到此问题并想知道：

从技术上讲，是的，您可以将`default_scope`呼叫放在一个`if`块内。**但是**，该条件将在*加载类时*`default_scope`进行测试（以及是否应用）。这意味着您启动应用程序时（或发送请求时，在开发模式下）。您将无法检查该类的特定实例的属性，因为该实例尚不存在。

 *简短版本： a`default_scope`将适用于基于模型的所有查询，或者不适用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T06:15:24.560

我很确定你可以做这样的事情：

```
default_scope lambda {
  unless profile.nil?
    joins(:profile).order('profiles.updated_at DESC').readonly(false)
  end
} 
```

这是spree_landlord 项目[的一个示例](https://github.com/railsdog/spree_landlord/blob/9369ddae0731de65c81a4cff4ec53a2224cfd6b9/app/models/spree/option_type_decorator.rb)。*

# escaping - LoadRunner VUGen 转义

> ID：15528254
> 
> 赞同：0
> 
> 时间：2013-03-20T15:44:54.120
> 
> 标签：escaping, loadrunner

当我在 SoapUI 中创建一个 Soap Web 服务测试并在同一个测试上创建一个 saml 令牌时，它看起来像这样：

```
Action()

{

web_set_max_html_param_len("80000");

  lr_start_transaction ("get something");

  web_reg_save_param("ResponseBody",

    "LB=<actorREF>",

    "RB=</actorREF>",

    "Search=Body",

    "IgnoreRedirections=Yes",

LAST);

 web_custom_request("UserHistory",

            "URL=http://e34jbsl00120.devillo.no:8080/UserHistory/services/UserHistoryServicePort/v1",

            "Method=POST",

            "Resource=0",

            "RecContentType=text/xml",

            "Referer=",

            "Snapshot=t1.inf",

            "Mode=HTML",

            "EncType=text/xml;charset=UTF-8",

            "Body=<soapenv:Envelope xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:v1=\"http://hey.com/service/point/UserHistory/v1/\">\n"

        "<soapenv:Header>\n"

                    "<wsse:Security xmlns:wsse=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\" xmlns:wsu=\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\">\n"

                 "<saml2:Assertion xmlns:saml2=\"urn:oasis:names:tc:SAML:2.0:assertion\" xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" ID=\"1231231231231231321\" IssueInstant=\"2013-03-20T11:16:16.488Z\" Version=\"2.0\"><saml2:Issuer>dokumentinnsending</saml2:Issuer><ds:Signature xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"><ds:SignedInfo><ds:CanonicalizationMethod Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"/><ds:SignatureMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#rsa-sha1\"/><ds:Reference URI=\"#1231231231231231321\"><ds:Transforms><ds:Transform Algorithm=\"http://www.w3.org/2000/09/xmldsig#enveloped-signature\"/><ds:Transform Algorithm=\"http://www.w3.org/2001/10/xml-exc-c14n#\"><ec:InclusiveNamespaces xmlns:ec=\"http://www.w3.org/2001/10/xml-exc-c14n#\" PrefixList=\"xs\"/></ds:Transform></ds:Transforms><ds:DigestMethod Algorithm=\"http://www.w3.org/2000/09/xmldsig#sha1\"/><ds:DigestValue>oo2Pw2UFGReV4tScwiduZhp9hmU=</ds:DigestValue></ds:Reference></ds:SignedInfo><ds:SignatureValue>TWP1dXZofLtkQBYB/wGcjv1yQKZNtRVvEMJFq1B/32a8fEi53g02Lr0XwKeAae6cpmUdfsRURAectwGF9AvzhSFMllzxW1uJp/MqMOD6kBEVcw7YXSY2aLlih4JTu6zYEm7zf963rplOFPLRfeSMapZBPqBIV/2ge+AhBBKeuybhcYmwuDpjm2hkIYmFZgk/98v8G2SeUfFnopyrqyArQb2KMgh3NtyZJgjsHA7woqonnsAtX8RQj09PIYyBtulwvJ1w70GtCxQli/bhrjEzhl7zPjPuQR81WciGZPmDDglMUUVhytFOh82wnvZkaDIOqzir2cg9N7GLsms6+D6CyQ==</ds:SignatureValue><ds:KeyInfo><ds:X509Data><ds:X509Certificate>MIIGdTCCBV2gAwIBAgIKFYRkaQAAAAAByTANBgkqhkiG9w0BAQUFADBSMRUwEwYKCZImiZPyLGQB\n"

                                    "GRYFbG9jYWwxGTAXBgoJkiaJk/IsZAEZFgl1dHZpa2xpbmcxHjAcBgNVBAMTFU5BViBJc3N1aW5n\n"

                                    "IENBIGludGVybjAeFw0xMzAxMjQwODU5MDBaFw0xNTAxMjQwOTA5MDBaMFsxCzAJBgNVBAYTAk5P\n"

                                    "MQ0wCwYDVQQIEwRPc2xvMQ0wCwYDVQQHEwRPc2xvMQwwCgYDVQQKEwNOQVYxIDAeBgNVBAMTF2Uz\n"

                                    "NGpic2wwMDIwOS5kZXZpbGxvLm5vMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAxIhr\n"

                                    "CrHr5ID4LXfehljlZTf8kAzEmLJTMy1d1B0dpWDT7/cUWaKMMK23OTBoIex/3ye61zc8U7zO8q0G\n"

                                    "n8Bc/rd//rGaYVukTHjnsofIeOmJwSEmkfp46Nnpcpbbd0/cK1OyXynRPQ0RDT0zV+NwLaZWP2i0\n"

                                    "GGD9osmX2H6G0UmdbYJ8ZDIxT6wn9Gt64ipS65b0qzNoenqxpxlOS0VG2YUpZreAuEHUuYFgIum/\n"

                                    "2TOY8Y8PvBe5TgXHMf1t+kU859BZ4M7C93NPqisrOP3vx6/gue1pw/yr+7jJ6azHlhZcnqYbZ80g\n"

                                    "/mypVXDNfc/HpWsmGf8nr02GGVKzmYmjnwIDAQABo4IDQjCCAz4wHQYDVR0OBBYEFLr25AUqP4pa\n"

                                    "8Wcw411d5I9G9nyKMB8GA1UdIwQYMBaAFK8t6pOwpoVfyb56R7GyCnk3FtkkMIIBJQYDVR0fBIIB\n"

                                    "HDCCARgwggEUoIIBEKCCAQyGgclsZGFwOi8vL2NuPU5BViUyMElzc3VpbmclMjBDQSUyMGludGVy\n"

                                    "bixDTj1FMjVEUlZXMDE5LENOPUNEUCxDTj1QdWJsaWMlMjBrZXklMjBTZXJ2aWNlcyxDTj1TZXJ2\n"

                                    "aWNlcyxDTj1Db25maWd1cmF0aW9uLERDPXV0dmlrbGluZyxEQz1sb2NhbD9jZXJ0aWZpY2F0ZVJl\n"

                                    "dm9jYXRpb25MaXN0P2Jhc2U/b2JqZWN0Q2xhc3M9Y1JMRGlzdHJpYnV0aW9uUG9pbnSGPmh0dHA6\n"

                                    "Ly9jcmwudXR2aWtsaW5nLmxvY2FsL0NybC9OQVYlMjBJc3N1aW5nJTIwQ0ElMjBpbnRlcm4uY3Js\n"

                                    "MIIBOgYIKwYBBQUHAQEEggEsMIIBKDCBvgYIKwYBBQUHMAKGgbFsZGFwOi8vL2NuPU5BViUyMElz\n"

                                    "c3VpbmclMjBDQSUyMGludGVybixDTj1BSUEsQ049UHVibGljJTIwa2V5JTIwU2VydmljZXMsQ049\n"

                                    "U2VydmljZXMsQ049Q29uZmlndXJhdGlvbixEQz11dHZpa2xpbmcsREM9bG9jYWw/Y0FDZXJ0aWZp\n"

                                    "Y2F0ZT9iYXNlP29iamVjdENsYXNzPWNlcnRpZmljYXRpb25BdXRob3JpdHkwZQYIKwYBBQUHMAKG\n"

                                    "WWh0dHA6Ly9jcmwudXR2aWtsaW5nLmxvY2FsL0NybC9FMjVEUlZXMDE5LnV0dmlrbGluZy5sb2Nh\n"

                                    "bF9OQVYlMjBJc3N1aW5nJTIwQ0ElMjBpbnRlcm4uY3J0MA4GA1UdDwEB/wQEAwIF4DA9BgkrBgEE\n"

                                    "AYI3FQcEMDAuBiYrBgEEAYI3FQiEjNF5gsK9MoWNkx6G7fB4hPXEXhCE+6BHgfSTbQIBZAIBBDAd\n"

                                    "BgNVHSUEFjAUBggrBgEFBQcDAQYIKwYBBQUHAwIwJwYJKwYBBAGCNxUKBBowGDAKBggrBgEFBQcD\n"

                                    "ATAKBggrBgEFBQcDAjANBgkqhkiG9w0BAQUFAAOCAQEAo57ShcfVZQlYDPZsAvISBICZ2XE2HhKh\n"

                                    "vxmBFWLVUOm0IzXKzXDnQX4ZWsvP4d2FtZnGjPsLAwn93QOtrPCgZgYZPfD4+E457NQgypbAkqMA\n"

                                    "6LQfoWm3jWCluTGmR2k67GZaDhDCMoctIEK8zoNp592pv5EjsazO3nXdDfp/NIEsTudWgoGurzXO\n"

                                    "uIdru/WWZMtt2ztn9B4vG2IviH07FG+O+izf7n8CT1L2UkfrQI5y+L9F4COqmiQS/mgyiPlag+vN\n"

                                    "LmSDPMG/xh9CjpYJbeSYLKg7AZ4e4FGFk0WzoBuQ5PqeK57YPyEexYQhdTcQQyzE7YlxUpJWWheh\n"

                                    "iXn/Vg==</ds:X509Certificate></ds:X509Data></ds:KeyInfo></ds:Signature><saml2:Subject><saml2:NameID Format=\"urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified\" NameQualifier=\"www.nav.no\">24068149964</saml2:NameID><saml2:SubjectConfirmation Method=\"urn:oasis:names:tc:SAML:2.0:cm:bearer\"/></saml2:Subject><saml2:Conditions NotBefore=\"2013-03-20T11:16:16.488Z\" NotOnOrAfter=\"2017-03-19T11:16:16.488Z\"/><saml2:AttributeStatement><saml2:Attribute Name=\"authenticationLevel\" NameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\"><saml2:AttributeValue xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"xs:string\">4</saml2:AttributeValue></saml2:Attribute><saml2:Attribute Name=\"identType\" NameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\"><saml2:AttributeValue xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"xs:string\">external</saml2:AttributeValue></saml2:Attribute><saml2:Attribute Name=\"consumerId\" NameFormat=\"urn:oasis:names:tc:SAML:2.0:attrname-format:uri\"><saml2:AttributeValue xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:type=\"xs:string\">dokumentinnsending</saml2:AttributeValue></saml2:Attribute></saml2:AttributeStatement></saml2:Assertion>\n"

                    "</wsse:Security>\n"

                    "</soapenv:Header>\n"

        " <soapenv:Body>\n"

        " <v1:getUserListRequest>\n"

        " <aktoerID>24068149964</aktoerID>\n"

        " </v1:getUserListRequest>\n"

        " </soapenv:Body>\n"

        " </soapenv:Envelope>",

            LAST);

  lr_output_message("Birth date: %s", lr_eval_string("{ResponseBody}"));

    lr_think_time(3);

lr_xml_extract("XML={ResponseBody}", 

"XMLFragmentParam=OutputParameter", 

"Query=//actorREF", LAST);

    lr_output_message("Tha response is: %s", lr_eval_string("{OutputParameter}"));

   lr_end_transaction ("get something", LR_AUTO);

return 0;

} 
```

但是，想将其粘贴到 LoadRunner 中，我在使用转义方面经历了很多工作。有什么技巧可以帮助我解决这项体力劳动密集型工作吗？我可以为此在 LoadRunner 中创建一个模板吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:58:10.477

当您说“转义”时，我假设您的意思是在引号中添加反斜杠以使它们作为字符串的一部分读取，对吗？所以“到\”，是吗？

只需将正文代码复制到 textpad 并全部替换，只需将所有引号替换为反斜杠引号并将代码复制回 LR。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T13:46:39.807

使用 web 服务协议并尝试直接从 loadrunner 导入 XML 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-11T14:06:08.190

最好的选择是手动创建一个 web_custom_request。然后右键单击请求并转到参数，您可以在其中粘贴您的请求。然后选择整个请求，右键单击然后转换为C格式。这是我发现的编写 SOAP 请求脚本的最简单方法。

# gps - GPS坐标精度

> ID：15528255
> 
> 赞同：6
> 
> 时间：2013-03-20T15:44:59.480
> 
> 标签：gps, location, coordinates

我有一些 GPS 坐标数据，最多 9 个小数点。这方面的例子是

```
39.1234567891 -75.1987654321 
```

我需要处理这些数据以获取有关此人所在位置的上下文。但为了简单起见，我想将 100m 内包含的坐标视为单个位置。任何人都可以指出任何参考资料，表明我应该四舍五入多少小数点才能达到这种准确度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:38:02.913

除了长期的大地测量应用程序之外，9 位数字对于任何其他应用程序来说都太详细了。
6 位数字在厘米范围内，通常对于 GPS 设备来说是最准确的。
在赤道，小数点后 4 位是 11.11m。

**3位数为111.11m** 

（计算方式`earthCircumference / 360.0`）

这通常会产生一个栅格，但由于地球是一个球体，两个经度之间的距离在远离赤道时会缩小（系数为 cos（纬度）），两个纬度之间的距离不会改变。

# opengl - 碰撞检测/翻译错误

> ID：15528258
> 
> 赞同：1
> 
> 时间：2013-03-20T15:45:08.710
> 
> 标签：opengl, translation

当我的精灵与另一个形状碰撞时，我的精灵消失并在其原始 x/y 位置重新绘制，我不确定为什么？

任何人都可以建议更改我的代码以阻止精灵消失，而是保持初始碰撞之前的位置吗？

我已经尝试反转`glTranslation`并尝试`0`在`move()`函数中设置值以阻止它移动，但我没有成功。

```
void move(){

    if(check_collision(sprite,platform1) || check_collision(sprite,platform2)){ //if colliding
        //x_Vel = 0; y_Vel = 0;
    }
    else{ //if not colliding
        glTranslatef(x_Vel, y_Vel, 0.0);
    }
}

void drawSprite (RECT rect) { ... } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:30:15.563

您在这里有点纠结，您选择的变量名可能无济于事。

`x_Vel`并且`y_Vel`看起来实际上是位置，而不是速度。当您将这些提供给它时​​，`glTranslate()`它只需将该翻译添加到当前转换中。在你的情况下，它只是改变你的对象在屏幕上的绘制位置。如果您的对象发生碰撞，则您根本没有进行翻译，因此当然会将事物绘制在不同的位置。

显然将位置设置为零也不起作用，也不会否定它。

您需要做的就是不要`glTranslate()`理会，而是在物体碰撞时不允许在给定方向上移动。这应该在您更新职位时发生。您正在尝试处理显示功能内部的碰撞，但这是行不通的——此时您已经移动了对象，GL 无法帮助您。

所以，并不是我`OpenGL`首先推荐这样使用（这个功能已被弃用，而且效率低下），但如果你要使用`glTranslate()`等，请意识到它只不过是控制事物的绘制方式 - 它确实不处理*运动*。那是你的责任。

# sql-server - SQL Server：使用 FOR XML 将列名指定为属性

> ID：15528265
> 
> 赞同：2
> 
> 时间：2013-03-20T15:45:25.283
> 
> 标签：sql-server, spaces, for-xml, columnname

我需要从 SQL Server 返回一个在 XML 中包含空格的列别名。由于 XML 列名中不能有空格，我想在“columnName”属性中返回这个别名。通常，XML 需要如下所示：

```
<customers>
 <customer name="Shmo, Joe">
    <over50 columnName="Number of Orders Over 50 Pounds" value="10">
    <cancelled columnName="Orders Cancelled" value="2">
 </customer>
</customers> 
```

该表如下所示：

```
|Name     |over50|cancelled
---------------------------
|Shmo, Joe|  10  |    2 
```

如果可能的话，我真的很想使用 XML 提取的“FOR XML”方法。提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:56:03.543

这应该这样做。

```
SELECT Name AS [@name],
       'Number of Orders Over 50 Pounds' AS [over50/@columnName],
       over50 AS [over50/@value],
       'Orders Cancelled' AS [cancelled/@columnName],
       cancelled AS [cancelled/@value]
FROM YourTable
FOR XML PATH('customer'), ROOT('customers') 
```

[SQL小提琴](http://sqlfiddle.com/#!3/e4c93/1)

# symfony - 在 Twig / Symfony2 中引用模板

> ID：15528270
> 
> 赞同：2
> 
> 时间：2013-03-20T15:45:36.433
> 
> 标签：symfony, twig

一个包中的 Twig 模板调用另一个包中的另一个 Twig 模板，但我无法引用它。

该文件位于此文件夹中：

```
src/Company/Bundle/ActivityBundle/Resources/views/Default/index.html.twig 
```

我正在尝试从另一个包中的 Twig 文件中引用它，如下所示：

```
{% extends "Company/Bundle/ActivityBundle/index.html.twig" %} 
```

我已经尝试了所有可能的组合，但它只是没有选择它并且我收到“Twig_Error_Loader：无法找到模板”错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:55:10.740

我认为您错过`Default`了模板路径的一部分：

```
{% extends "Company/Bundle/ActivityBundle/Default/index.html.twig" %} 
```

或者我更喜欢：

```
{% extends "CompanyBundleActivityBundle:Default:index.html.twig" %} 
```

希望这可以帮助 ;）

# java - 线程“main”中的 JAVA 异常 java.lang.NullPointerException Sevens Dice Game

> ID：15528271
> 
> 赞同：1
> 
> 时间：2013-03-20T15:45:37.413
> 
> 标签：java, swing, listener, runtime-error, actionlistener

我正在编写一个模拟骰子游戏“Sevens”的 Java GUI。

我已经编写了创建 GUI 的主要部分。

我还没有编写程序的实际部分来实际玩游戏。

一切都正确编译，但我得到一个运行时错误：

```
Exception in thread "main" java.lang.NullPointerException
    at java.awt.Container.addImpl(Unknown Source)
    at java.awt.Container.add(Unknown Source)
    at SevensGameGUI.,init.(SevensGameGUI.java:88)
    at SeventsApplication.main(SevensApplication.java:13) 
```

我不确定是什么导致了错误？

以下是 SevensGameGUI.java 的代码：

```
//include these import statements in every GUI class
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class SevensGameGUI extends JFrame {

     //Instance Variables
     // declares an array of integers to store the total score for each player
     // allocates memory for 5 players
      int[] totalScoreArray = new int[4];

      //declares an array of integers to store numbers rolled each time someone rolls the dice
      //allocates memory for at least 3 rolls
      int[] diceRollArray= new int[2];

      //declare an integer amount for the number of dice being rolled in the current turn
      int diceCount;

      //declare an integer to keep track of track of who the current player is
      int playerNumber;

      //declare a constant for the maximum throws allowed (three)
      public static final int MAX_THROWS = 3; 

      //declare an integer to remember how many times the first player rolled the dice
     int firstPlayerRolls;

     //declare an integer to keep count of the current player's rolls
     int currentPlayerRolls;

     //declare an integer to keep track of who is currently winning
     int winningPlayer;

     //declare all necessary GUI-related variables
     //JButtons:
     private JButton rollDiceButton;
     private JButton totalScoreButton;
     private JButton endTurnButton;

     //JLabels:
     private JLabel displayCurrentPlayerLabel;
     private JLabel displayFirstPlayerRollsLabel;
     private JLabel displayTotalScoreLabel;

     //JTextAreas:
     private JTextArea outputCurrentPlayerTextArea;
     private JTextArea outputFirstPlayerRollsTextArea;
     private JTextArea outputTotalScoreTextArea;
     private JTextArea outputDiceRollTextArea;
     private JTextArea outputTextArea;

     //JPanels:
     private JPanel labelPanel;
     private JPanel buttonPanel;

     //Declare an event-listener object of type SevensGameListener
     SevensGameListener listener;

//--------------------------------------------------------------------------------------------- 

//CONSTRUCTOR
public SevensGameGUI() {
super("Sevens Dice Game");

    //Initialize Buttons:
    rollDiceButton = new JButton("Roll Dice");
    totalScoreButton = new JButton("Total Your Score");
    endTurnButton = new JButton("End Turn");

    //Initialize Labels:
    displayCurrentPlayerLabel = new JLabel("Current Player: ");
    displayFirstPlayerRollsLabel = new JLabel("First player only rolled: ");
    displayTotalScoreLabel = new JLabel("Total Score: ");

    //Initialize Panels:
    labelPanel = new JPanel();
    labelPanel.setLayout(new GridLayout(3,2));
    labelPanel.add(displayCurrentPlayerLabel);
    labelPanel.add(outputCurrentPlayerTextArea);
    labelPanel.add(displayFirstPlayerRollsLabel);
    labelPanel.add(outputFirstPlayerRollsTextArea);
    labelPanel.add(displayTotalScoreLabel);
    labelPanel.add(outputTotalScoreTextArea);

    buttonPanel = new JPanel();
    buttonPanel.setLayout(new GridLayout(1,3));
    buttonPanel.add(rollDiceButton);
    buttonPanel.add(totalScoreButton);
    buttonPanel.add(endTurnButton);

    //Set The Layout as Border Layout
    this.setLayout(new BorderLayout());
    this.add(labelPanel, BorderLayout.NORTH);
    this.add(outputTextArea, BorderLayout.CENTER);
    this.add(buttonPanel, BorderLayout.SOUTH);

    //initilize/register Listener
    listener = new SevensGameListener();

    rollDiceButton.addActionListener(listener);
    totalScoreButton.addActionListener(listener);
    endTurnButton.addActionListener(listener);

    this.addWindowListener(listener);   

}//end of constructor

//---------------------------------------------------------------------------------------------

private class SevensGameListener implements ActionListener, WindowListener {

public void actionPerformed(ActionEvent ae) {

    if (ae.getSource() == rollDiceButton) {

    }
    if (ae.getSource() == totalScoreButton) {

    }
    if (ae.getSource() == endTurnButton) {
        playerNumber += 1;
    }

    outputTextArea.append(" ");         

}//end of method actionPerformed

public void windowClosing(WindowEvent we) {

     System.exit(0);            

}//end of windowClosing

public void windowDeactivated(WindowEvent we) { }
public void windowActivated(WindowEvent we) { }
public void windowClosed(WindowEvent we) { }
public void windowDeiconified(WindowEvent we) { }
public void windowIconified(WindowEvent we) { }
public void windowOpened(WindowEvent we) {  }

}//end of class CalculatorListener

}// end of SevensGameGUI class 
```

而实际运行程序的应用程序类是

```
public class SevensApplication {

    public static void main (String[] args) {

        SevensGameGUI gui = new SevensGameGUI();
        gui.pack();
        gui.setVisible(true);

    }

} 
```

我不确定我是否刚刚完成了 GUI 部分的一部分来实际运行游戏，或者我的代码中是否有错误？即使我还没有在那里玩游戏的代码，它会影响我制作的 gui 的显示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:48:31.567

您尚未初始化任何`TextArea`.

喜欢并检查其他人。

```
labelPanel.add(outputCurrentPlayerTextArea); 
```

像这样初始化。

```
outputCurrentPlayerTextArea = new TextArea("Hello", 5, 40); 
```

也为他人`TextArea`做事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:49:00.050

`add`在ing之前初始化 jlabels 和 textareas

# sql - 连接字符串中的转义空间

> ID：15528274
> 
> 赞同：10
> 
> 时间：2013-03-20T15:45:44.557
> 
> 标签：sql, sql-server, delphi, ado

我正在尝试使用 ADO 连接到 SQL Server 数据库。密码包含一个空格作为最后一个字符。构建连接字符串时，我应该如何转义密码？

MSDN说把它放在单引号或双引号中，但这似乎不起作用......

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)

这是我的连接字符串的样子：

```
Provider=SQLOLEDB;Persist Security Info=False;Initial Catalog=master;Data Source=test;uid=john;pwd="123 " 
```

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T16:49:22.073

我可以告诉你什么**是**有效的：

```
Provider=SQLOLEDB;Password="123 ";Persist Security Info=True;User ID=john;Initial Catalog=mydbname;Data Source=127.0.0.1 
```

1.  当`pwd`使用关键字而不是`Password`它无法连接时 - 您需要使用`Password`应该用双引号括起来的关键字。
2.  `uid`而不是`User ID`正常工作 - 我仍然使用`User ID`，因为连接构建器默认创建它。
3.  `Persist Security Info`关键字（在其中一条评论中提到）对连接没有影响 - 正如@TLama 很好地评论的那样“您可以连接，但*如果您将其保留为 False，则**无法从界面取回密码。”`IDBProperties`*
4.  连接字符串中关键字的顺序并不重要。接口将此`IDBProperties`字符串解析为[内部“属性”集合](https://stackoverflow.com/q/15237234/937125)

* * *

使用 SQL Server 2008 R2 测试。

# c - getc() 不返回回车返回 '\r' 字符

> ID：15528277
> 
> 赞同：1
> 
> 时间：2013-03-20T15:45:49.357
> 
> 标签：c, stdio

我有一个带有一些示例文本的文本文件“hello.txt”。当我在十六进制编辑器中打开文件时，我可以看到换行符的 \r\n 字符。但是当我用 getc() 在 C 程序中读取文件时， \r 不知何故消失了，我只看到 \n 字符。

我试图在网上和 stackoverflow 上搜索，但没有运气。

你好.txt

```
Sample
File 
```

代码：

```
#include <stdio.h>

int main()
{
    FILE *fp;
    fp = fopen("hello.txt", "r");

    int character = 0;

    while( (character = getc(fp)) != EOF)
    {
        printf("%.2X ", character);
    }

    return 0;
} 
```

输出：

```
53 61 6D 70 6C 65 0A 46 69 6C 65 
```

从十六进制编辑器中看到的文件：

```
53 61 6D 70 6C 65 0D 0A 46 69 6C 65 
```

可以看出，使用 getc() 函数时，0D0A 仅输出为 0A。

为什么 getc() 避免使用 '\r' 字符？我怎样才能让它返回给定文件中的 EXACT 数据，即没有任何 \r\n 到 \n 的转换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:47:36.777

在 Windows 上，您必须以*二进制*模式打开文件：

```
fp = fopen("hello.txt", "rb"); 
```

默认*文本*模式将 DOS/Windows 行结尾`\r\n`转换为单个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:47:28.930

如果您以文本模式打开文件`fp = fopen("hello.txt", "r");`，`0x0D`则前面的`0x0A`字符将被忽略。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T15:47:50.207

尝试`fp = fopen("hello.txt", "rb");`-`'b'`在打开模式下，文件以“测试模式”打开，这会将行尾（取决于平台）转换/规范化为简单的`\n`.

# sql-server - 逻辑错误、MSSQL、Coldfusion、查询结果重复

> ID：15528281
> 
> 赞同：1
> 
> 时间：2013-03-20T15:45:59.477
> 
> 标签：sql-server, coldfusion, duplicates, left-join

一个多星期以来，我一直在尝试修复此查询，但我无法正确解决此问题。走下一个完整的兔子洞，让我靠近，但越来越大。所以我想从头开始。

正如它最初写的那样：

```
<cfquery name="unbilledMisc" datasource="#request.dsn#">
SELECT  BM.*, C.Client, U.Name, R.FrequencyUnit, R.FrequencyDuration, R.RBID
FROM BilledMisc BM
    LEFT JOIN Clients C on C.ClientID = BM.ClientID
    LEFT JOIN Users U on U.UserID = BM.UserID
    LEFT JOIN RecurringBilling R ON (R.ClientID = C.ClientID AND BM.Rate = R.Rate AND BM.Title = R.Title)
WHERE (BM.CID = <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">) 
AND (BM.Invoiced = 0)
ORDER BY BM.DateCompleted ASC;
</cfquery> 
```

BM*= BM.BMID、BM.Userid、BM.ClientID、BM.Rate、BM.Title、BM.CID、BM.QTY、BM.DateCompleted

输出行如下所示：

```
<td class=""><input type="checkbox" class="BMIDCheckBoxes" name="BMID" value="#BMID#" />#Client#</td>
<td class="">
    <cfif #Qty# eq "">
     -
    <cfelse>
        <a href="##" class="UpdateFeeItem invoices" title="#BMID#">#NumberFormat(Qty, '9999.99')#</a>
    </cfif>
</td>
<td class="">#Name#</td>
<td>
<cfif #RBID# neq ''>
<cfswitch expression="#FrequencyUnit#">
    <cfcase value="d">
        <cfset FreqOutput = 'Day(s)'>
    </cfcase>
    <cfcase value="ww">
        <cfset FreqOutput = 'Week(s)'>
    </cfcase>
    <cfcase value="m">
        <cfset FreqOutput = 'Month(s)'>
    </cfcase>
    <cfcase value="q">
        <cfset FreqOutput = 'Quarter(s)'>
    </cfcase>
    <cfcase value="yyyy">
        <cfset FreqOutput = 'Year(s)'>
    </cfcase>
</cfswitch>
<a href="##" name="#RBID#" id="UpdateRecItem" class="link"><img src="images/edit_icon.png" /></a>
Recurrs Every #FrequencyDuration# #FreqOutput#
</cfif>
</td>
<td class="">#DateFormat(DateCompleted, 'mm/dd/yyyy')#</td>
<td style="width:50px;" align="center"><a href="##" class="DeleteFeeItem" title="#BMID#"><img src="images/delete_icon.png" alt="Delete" title="Delete" /></a></td> 
```

我愿意接受任何建议，以更好的方式做到这一点。

您可以设置 1 次费用，或设置类似于一次性费用的费用，然后根据每单位以相同的美元金额在每个设定的时间间隔（日、周、月、季度、年）重复价格和数量。

如果您只支付一次性费用，一切都很好。

当您支付第一笔经常性费用时，一切都很好。

但是假设 2 周过去了，还有 500 个其他客户。而且您将为该客户设置另外 1 次费用，由同一用户设置，对于相同数量的相同产品，我得到一个重复的行，与不同的 BMID 共享相同的 RBID

本质上，这些行中的 1 行具有应该重复发生的一次性费用，以及认为应该重复发生的另一个相同的一次性费用，并且具有第一行的 RBID。

如果您是一家小公司，您会记得进入并编辑第一笔费用的金额，但如果您是一家大公司并且不记得，那么他们就会发现这个错误。

如果我需要详细说明其中的任何部分，请告诉我。我很乐意。

编辑：冒着走向不同方向的风险，我还考虑在循环表中添加一个新列，如果存在，它将保存每个循环项目的 BID。这样我就可以通过 1 列来引用每个一次性费用的经常性费用。

我猜在提交时，它会将所有数据添加到 billedMisc 中的新行中，这会创建一个自动递增的 BMID，然后如果设置了经常性费用，则使用新创建的 BMID 将经常性数据添加到新的经常性计费行中。这将通过特定标识符将它们锁定在一起，而不是查看哪个速率、数量、用户、客户端......匹配。

想法……感觉？

**编辑：我在我的项目中放弃了这个查询，并在其中一个表中添加了一个新列以将其锁定到费用项目**

*如果愿意，Mods 可以随意删除*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:39:13.067

故障排除如下。从...开始：

```
<cfquery name="test">
select BM.cid
from BilledMisc BM
where BM.CID = <cfqueryparam cfsqltype="CF_SQL_INTEGER" value="#CID#">) 
and BM.invoiced = 0 
```

然后添加您的第一个加入并再次运行它。如果记录数增加，请运行更多查询以找出原因。

如果在一天结束时，您将获得多行，请查看“选择不同”是否消除了问题。如果没有，请查看返回的数据并确定哪条记录是您想要的。

# ios6 - libMobileGestalt copySystemVersionDictionaryValue：无法从系统版本字典中查找 ReleaseType

> ID：15528283
> 
> 赞同：4
> 
> 时间：2013-03-20T15:46:00.473
> 
> 标签：ios6, crash-reports, core-text, core-foundation

在从 iOS4 提交更新之前，我一直在测试...，并遇到了以下问题... 1) 从我的应用程序创建 PDF。2) 似乎不一致，因为在大多数情况下我可以毫无问题地创建新的 PDF。3) 崩溃日志表明 ExportView 的第 341 行发生了崩溃，我已对其进行了配置，因此该行上的唯一项目是 CFRangeMake。请注意，在控制台中有一个值，因为在几行中使用了相同的值。

一些注意事项：使用 Xcode 4.6，目标是 iOS6，完全 ARC，在新 iPad 上测试。

对此的任何帮助将不胜感激！

我删除了一些崩溃日志和控制台日志以缩短这篇文章！即使现在它的长度也很抱歉！

用于创建 PDF 的字符串的方法：

```
- (CFMutableAttributedStringRef) CreateAttributedString:(int*) dateLength
                                        titleLength:(int*) titleLength
{
    NSLog(@"Current EntryIndex: %d", _entryIndex);
    NSLog(@"Current Entry: %@", _currentEntry); // current entry is set from the parent view controller via PrepareForSegue

    NSDateFormatter * dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"MMMM dd, yyyy, h:mm aaa"];
    NSString * dateString = [dateFormatter stringFromDate:_currentEntry.created];
    *dateLength = [dateString length];
    NSLog(@"DateString: %@", dateString);
    NSLog(@"2nd DateLength: %d", *dateLength);

    NSString *title = _entryTitle;
    *titleLength = [title length];

    NSString *bodyString = _entryText;
    NSString *contentString = [NSString stringWithFormat:@"%@\n\n%@\n%@", dateString, title, bodyString];
    NSLog(@"TitleString: %@", title);
    NSLog(@"BodyString: %@", bodyString);
    NSLog(@"TitleLength: %d", *titleLength);

    CFStringRef string = (__bridge CFStringRef)contentString;
    CFMutableAttributedStringRef attributedContentString  CFAttributedStringCreateMutable(kCFAllocatorDefault, 0);
    CFAttributedStringReplaceString (attributedContentString,CFRangeMake(0, 0), string);
    return  attributedContentString;
    }

 - (void) SetTextFontName:(int)dateLength titleLength:(int)titleLength forAttributedString:(CFMutableAttributedStringRef) text
{
    //date
    CTFontDescriptorRef dateFontDescriptor = CTFontDescriptorCreateWithNameAndSize((__bridge CFStringRef)_entryDateTimeFontName, _entryDateTimeFontSize);

    CTFontRef dateFont = CTFontCreateWithFontDescriptor(dateFontDescriptor, _entryDateTimeFontSize, NULL);
    NSLog(@"Font entryDateTimeFontSize, line 329: %d", _entryDateTimeFontSize);
    NSLog(@"DateFontDescriptor, line 329: %@", dateFontDescriptor);
    CFAttributedStringSetAttribute(text, CFRangeMake(0, dateLength), kCTFontAttributeName, dateFont);
    NSLog(@"DateLength... before crash: %d", dateLength);
    NSLog(@"DateLength... crashing: %d", dateLength);
    CFAttributedStringSetAttribute(text,
                               CFRangeMake(0, dateLength),    // this is line 341...
                               kCTForegroundColorAttributeName,
                               _entryDateTimeColor.CGColor);
    NSLog(@"Date length for line 332: %d", dateLength);
    NSLog(@"Text for line 332: %@", text);
    NSLog(@"Font name... font attributes line 332: %@", dateFont);
    NSLog(@"Date length for line 333: %d", dateLength);
    NSLog(@"Text for line 333: %@", text);
    NSLog(@"Date color for line 333: %@", _entryDateTimeColor.CGColor);
    CFRelease(dateFontDescriptor);
    CFRelease(dateFont);

    //title
    CTTextAlignment alignment = kCTCenterTextAlignment;
    CTParagraphStyleSetting _settings[] = {{kCTParagraphStyleSpecifierAlignment, sizeof(alignment), &alignment}};
    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(_settings, sizeof(_settings) / sizeof(_settings[0]));
    CFAttributedStringSetAttribute(text, CFRangeMake(dateLength, dateLength + titleLength), kCTParagraphStyleAttributeName, paragraphStyle);

    CTFontDescriptorRef titleFontDescriptor = CTFontDescriptorCreateWithNameAndSize((__bridge CFStringRef)_entryTitleFontName, _entryTitleFontSize);

    CTFontRef titleFont = CTFontCreateWithFontDescriptor(titleFontDescriptor,_entryTitleFontSize, NULL);
    NSLog(@"TitleFontDescriptor: %@", titleFontDescriptor);
    CFAttributedStringSetAttribute(text, CFRangeMake(dateLength, dateLength + titleLength), kCTFontAttributeName, titleFont);
    CFAttributedStringSetAttribute(text, CFRangeMake(dateLength, dateLength + titleLength), kCTForegroundColorAttributeName, _entryTitleColor.CGColor);
    NSLog(@"TitleColor: %@", _entryTitleColor);
    NSLog(@"Titlecolor: %@", _entryTitleColor.CGColor);
    CFRelease(titleFontDescriptor);
    CFRelease(titleFont);

    //content
    CTFontDescriptorRef fontDescriptor = CTFontDescriptorCreateWithNameAndSize((__bridge CFStringRef)_entryTextFontName, _entryTextFontSize);
    CTFontRef font = CTFontCreateWithFontDescriptor(fontDescriptor, _entryTextFontSize, NULL);
    CFAttributedStringSetAttribute(text, CFRangeMake(dateLength + titleLength+2, CFAttributedStringGetLength(text) - dateLength - titleLength - 2), kCTFontAttributeName, font);
    CFAttributedStringSetAttribute(text, CFRangeMake(dateLength + titleLength+2, CFAttributedStringGetLength(text) - dateLength - titleLength - 2), kCTForegroundColorAttributeName, _entryTextColor.CGColor);
    CFRelease(fontDescriptor);
    CFRelease(font);
} 
```

崩溃日志：

```
Incident Identifier: D5D15E15-8A4C-4850-B751-9F1D546F1F71
CrashReporter Key:   54bfdcf0248d463bc97ac986b7553405b3b0f8b9
Hardware Model:      iPad3,4
Process:         TabletJournal [9876]
Path:            /var/mobile/Applications/109DCB8E-22D1-45E4-A347- 1B1F211F9044/TabletJournal.app/TabletJournal
Identifier:      TabletJournal
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2013-03-20 15:42:11.412 +0100
OS Version:      iOS 6.1.2 (10B146)
Report Version:  104

Exception Type:  EXC_BREAKPOINT (SIGTRAP)
Exception Codes: 0x0000000000000001, 0x000000000000defe
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   CoreFoundation                0x3272b4e0 0x32693000 + 623840
1   CoreFoundation                0x3271bc2c 0x32693000 + 560172
2   CoreFoundation                0x3277043c 0x32693000 + 906300
3   CoreFoundation                0x32697b4e 0x32693000 + 19278
4   CoreFoundation                0x32705e5e 0x32693000 + 470622
5   TabletJournal                 0x0005f3d8 -[ExportView SetTextFontName:titleLength:forAttributedString:] (ExportView.m:341)
6   TabletJournal                 0x0005ed58 -[ExportView saveJournalToPDF:andName:] (ExportView.m:196)
7   TabletJournal                 0x0005ec8a -[ExportView pdfButtonTapped:] (ExportView.m:179)
8   UIKit                         0x3464f082 0x34561000 + 974978
9   UIKit                         0x3464f036 0x34561000 + 974902
10  UIKit                         0x3464f010 0x34561000 + 974864
11  UIKit                         0x3464e8c6 0x34561000 + 972998
12  UIKit                         0x3464edb4 0x34561000 + 974260
13  UIKit                         0x345775f4 0x34561000 + 91636
14  UIKit                         0x345648dc 0x34561000 + 14556
15  UIKit                         0x345641ea 0x34561000 + 12778
16  GraphicsServices              0x362575f4 0x36251000 + 26100
17  GraphicsServices              0x36257222 0x36251000 + 25122
18  CoreFoundation                0x3272a3e4 0x32693000 + 619492
19  CoreFoundation                0x3272a386 0x32693000 + 619398
20  CoreFoundation                0x3272920a 0x32693000 + 614922
21  CoreFoundation                0x3269c238 0x32693000 + 37432
22  CoreFoundation                0x3269c0c4 0x32693000 + 37060
23  GraphicsServices              0x36256336 0x36251000 + 21302
24  UIKit                         0x345b82b4 0x34561000 + 357044
25  TabletJournal                 0x0002e35a main (main.m:22)
26  libdyld.dylib                 0x3aa02b1c 0x3aa01000 + 6940

Thread 0 crashed with ARM Thread State (32-bit):
    r0: 0x3ac440f0    r1: 0x00000000      r2: 0x00001200      r3: 0x3ac2ce44
    r4: 0x00000000    r5: 0x1ea52580      r6: 0x3272b4d9      r7: 0x2fdd26c4
    r8: 0x3ac47940    r9: 0x00000012     r10: 0x3acacd88     r11: 0x1ea52580
    ip: 0x00010201    sp: 0x2fdd26c0      lr: 0x3271bc2f      pc: 0x3272b4e0
  cpsr: 0xa0000030 
```

控制台日志...重要部分：

```
Mar 20 15:50:54 Marcs-iPad TabletJournal[9947] <Warning>: SettingsModel, entries: (
"<JournalEntry: 0x1e296310>",
"<JournalEntry: 0x1e24be00>")
Mar 20 15:50:54 Marcs-iPad TabletJournal[9947] <Warning>: Export Loading
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: Current EntryIndex: 1
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: Current Entry: <JournalEntry: 0x1e296310>
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: DateString: marzo 20, 2013, 3:41 PM
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: 2nd DateLength: 23
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: TitleString: Test2
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: BodyString: I’m here in the Istanbul airport again, for another 5-hour layover! Plane is suppose to take off at 2:50 pm! Next time, I’m going to make sure my layovers are not more than 2 hours. That’ll leave room for delays. I ate a small pizza at this “Italian” diner. It was actually pretty good. Later, I’ll have to compare it with real Italian pizza. I’m dead tired. Gotta get some caffeine! Got the caffeine! Yow! I should wake up in a few minutes! There are posters of Italia here and I’ve found a couple of places I’d like to see. Lago D’Orta di Piemonte, Galleria Borghese di Lazio- Roma, Pisa.
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: TitleLength: 5
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: Font entryDateTimeFontSize, line 329: 13
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: DateFontDescriptor, line 329:     
CTFontDescriptor <attributes: <CFBasicHash 0x1d518f50 [0x3ac440f0]>{type = mutable dict, count = 2,
entries =>
1 : <CFString 0x3acad758 [0x3ac440f0]>{contents = "NSFontNameAttribute"} = <CFString 0x1e07a880 [0x3ac440f0]>{contents = "Copperplate"}
2 : <CFString 0x3acad8c8 [0x3ac440f0]>{contents = "NSFontSizeAttribute"} = <CFNumber 0x1d5cb1d0 [0x3ac440f0]>{value = +13.0000000000, type = kCFNumberFloat32Type}}
>
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: DateLength... before crash: 23
Mar 20 15:50:55 Marcs-iPad TabletJournal[9947] <Warning>: DateLength... crashing: 23
Mar 20 15:50:56 Marcs-iPad ReportCrash[9951] <Notice>: Formulating crash report for process TabletJournal[9947]
Mar 20 15:50:56 Marcs-iPad com.apple.launchd[1] (UIKitApplication:com.creativeappgroup.TabletJournalTM[0xe437][9947]) <Warning>: (UIKitApplication:com.creativeappgroup.TabletJournalTM[0xe437]) Job appears to have crashed: Trace/BPT trap: 5
Mar 20 15:50:56 Marcs-iPad ReportCrash[9951] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Mar 20 15:50:56 Marcs-iPad backboardd[25] <Warning>: Application 'UIKitApplication:com.creativeappgroup.TabletJournalTM[0xe437]' exited abnormally with signal 5: Trace/BPT trap: 5
Mar 20 15:50:56 Marcs-iPad ReportCrash[9951] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/TabletJournal_2013-03-20-155055_Marcs-iPad.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T11:18:24.707

事实证明，libModileGestalt 与崩溃无关。通过 Apple 论坛上的提示发现 CGColor 可能为零。在实际调用之前隔离并安装日志语句之后，确实如此。事实上，所有的颜色……文本、标题和日期都是 NULL。因此，我通过在创建 PDF 方法中安装测试和应用语句来停止崩溃。现在...找出为什么颜色没有被忽略！

# regex - 一个正则表达式，它将抓住引号中的任何内容+引号中的单词草稿？只有带有“草稿”一词的引号

> ID：15528286
> 
> 赞同：3
> 
> 时间：2013-03-20T15:46:06.133
> 
> 标签：regex

一个正则表达式，它将抓取引号中的任何内容+引号中的单词草稿。所以它会寻找单词 Draft 并在找到它时抓住它前面和后面的所有内容。例如：

1）“地球很美”

2）“我的第二稿”

在上面的示例中，正则表达式将只抓取第二个示例，突出显示引号内的所有内容。如何实现？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:49:17.517

你应该可以使用这个：

```
\"[^\"]*(d|D)(r|R)(a|A)(f|F)(t|T)[^\"]*\" 
```

解释：

*   `\"`- 匹配`"`字符
*   `[^\"]*`- 匹配任意字符序列，只要序列中没有字符是该`"`字符
*   `(d|D)(r|R)(a|A)(f|F)(t|T)`- 匹配单词“draft”，不区分大小写
*   `[^\"]*`- 匹配任意字符序列，只要序列中没有字符是该`"`字符
*   `\"`- 匹配`"`字符

根据您使用的语言，您应该能够摆脱`(d|D)(r|R)(a|A)(f|F)(t|T)`序列并将其替换`draft`为，只要您指示 Regex 应被视为不区分大小写。

由于您使用的是 Javascript，因此您的正则表达式文字将如下所示：

```
/\"[^\"]*draft[^\"]*\"/i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:56:50.380

这种模式应该适合你

```
/\"((draft.*)|(.*draft.*)|(.*draft))\"/Ui 
```

# ruby - Ruby 中的音频均衡器

> ID：15528293
> 
> 赞同：2
> 
> 时间：2013-03-20T15:46:19.753
> 
> 标签：ruby, audio, filter, wav, equalizer

我在 ruby​​ 中工作（嗯，玩......），试图创建一些有用的音频工具。不是现场直播，不是像 midi 合成器或现场动作过滤器或 mp3 播放器之类的东西。我正在制作的是打开一个 .wav 文件、修改它并保存它的简单工具。我有很好的发电机（正方形、正弦、噪声、三角形、锯齿等......等等！）。我有一个我觉得很舒服的包络滤波器。我有一个很好的颤音（自动包络滤波器）。

我最接近低通、高通或参数均衡器的是一个进入音频范围的颤音……基本上把频率调高，直到颤音在音频范围内。这是一个有趣的声音。

你知道如何在 ruby​​ 中实现参数均衡器（最好）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:18:48.230

听起来是个有趣的项目。

您可以通过跨样本“模糊”来实现低通滤波器，并通过其他简单的数学来实现高通（现在不记得那是什么了）

但是，如果您正在处理音频，您最终会希望将信号转换为频域并返回。最好的开源库是 FFTW3，并且 gem 中有一个 Ruby 绑定`fftw3`-`narray`如果您尚未使用它，则无论如何都应该考虑使用它，因为它在处理由 1000 个单个样本组成的数组时表现非常好。

要开始转换到频域：

```
require 'narray'
require 'fftw3'

# You'll need to feed in real-world data in audio_segment 
# This generates white noise -1.0 to 1.0
audio_segment = 2.0 * ( NArray.float(1024).random() - 0.5 )

# To avoid edges of the window looking like high-frequency changes, 
# you need to apply a window function. This is just a multiplier for  each sampel point
# Look up Hann window on Wikipedia, the maths is very simple.
# hann_window is a simple 1024 NArray of floats, and you can re-use the same one each time 
audio_window = audio_segment * hann_window

# This does FFT magic
frequency_domain_window = FFTW3.fft(audio_window, -1)

# What you do next depends on the processing you need to do. Typically you'll want to
# re-normalise the data (as FFTW doesn't do that for you)
frequency_domain_window *= 1.0/1024

# This is a very crude "notch filter" that reduces amplitude of some mid frequencies
frequency_domain_window[100..200] *= 0.3

#  Convert back to samples in time (but we still are in a Hann window)
processed_audio_window = (FFTW3.ifft( frequency_domain_window, 0 )).real

# Next you need to do an inverse of the Hann window

# After then you'll want to step forward say 256 samples, and repeat the process
# whilst averaging windows together where they overlap . . . 
```

抱歉，这不是一段功能齐全的代码，但希望能给你足够的指导去玩！

# android - 更改后应用程序崩溃

> ID：15528295
> 
> 赞同：0
> 
> 时间：2013-03-20T15:46:27.450
> 
> 标签：android

我的应用程序运行良好，直到今天我做了一些更改并且我被迫关闭。

这是日志猫

```
 03-20 21:11:05.441: D/dalvikvm(515): GC_EXTERNAL_ALLOC freed 95K, 51% free 2680K/5379K, external 2037K/2137K, paused 75ms
03-20 21:11:06.070: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.080: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
   03-20 21:11:06.080: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because      it      is not complex!
03-20 21:11:06.080: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.080: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.110: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.110: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.110: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.121: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.121: W/ResourceType(515): Skipping entry 0x7f02000f in package table 0 because it is not complex!
03-20 21:11:06.170: D/AndroidRuntime(515): Shutting down VM
03-20 21:11:06.170: W/dalvikvm(515): threadid=1: thread exiting with uncaught exception (group=0x40015560)
03-20 21:11:06.190: E/AndroidRuntime(515): FATAL EXCEPTION: main
03-20 21:11:06.190: E/AndroidRuntime(515): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.indianic.demo.calendark/com.indianic.demo.calendark.Abc}: java.lang.NullPointerException
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.os.Looper.loop(Looper.java:123)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-20 21:11:06.190: E/AndroidRuntime(515):  at java.lang.reflect.Method.invokeNative(Native Method)
03-20 21:11:06.190: E/AndroidRuntime(515):  at java.lang.reflect.Method.invoke(Method.java:507)
03-20 21:11:06.190: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-20 21:11:06.190: E/AndroidRuntime(515):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-20 21:11:06.190: E/AndroidRuntime(515):  at dalvik.system.NativeStart.main(Native Method)
03-20 21:11:06.190: E/AndroidRuntime(515): Caused by: java.lang.NullPointerException
03-20 21:11:06.190: E/AndroidRuntime(515):  at com.indianic.demo.calendark.Abc.onCreate(Abc.java:221)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-20 21:11:06.190: E/AndroidRuntime(515):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
03-20 21:11:06.190: E/AndroidRuntime(515):  ... 11 more
03-20 21:11:08.470: I/Process(515): Sending signal. PID: 515 SIG: 9 
```

这是 java 代码 [http://www.mediafire.com/view/?ud3lizq4kduz1dc](http://www.mediafire.com/view/?ud3lizq4kduz1dc)
我无法在这里上传代码

谢谢@codeMagic，问题在于button5评论:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:02:23.013

您有`button5`注释掉第 72 行的初始化

```
 //button5 = (Button) findViewById(R.id.button5); 
```

取消注释该行并且`button`不会`null`

当您查看 logcat 时，您会看到

```
Caused by: java.lang.NullPointerException 
```

查找引用您的文件的第一行，它恰好是

```
at com.indianic.demo.calendark.Abc.onCreate(Abc.java:221) 
```

这告诉你，有些东西`null`在第 221 行`ABC.java`。您可以随时查看这里并尝试弄清楚它是什么以及为什么`null`会使您的调试速度更快。希望这可以帮助

# c# - Kendo Grid 绑定到字符串列表

> ID：15528299
> 
> 赞同：1
> 
> 时间：2013-03-20T15:46:30.807
> 
> 标签：c#, javascript, asp.net-mvc, kendo-ui, kendo-grid

我有外部 Web 服务，所以我的控制器操作只返回带有 Kendo 网格的视图。

该服务返回给我这样的结构：

```
{"Form":"xxx","Fields":["xxx","xxx","xxx"]} 
```

我只对显示`Fields`值感兴趣。问题是它`Fields`基本上`List<string>`不是一个`KeyValuePair`集合，所以我把它绑定到网格上有些麻烦。

我尝试使用解析事件并以某种方式更改数据，但没有成功。

到目前为止，我认为我有这样的代码：

```
<div id="alias-list-view" class="k-content">
    <div id="alias-list-grid" style="width: 400px"></div>
</div>

var aliasListDataSource = new kendo.data.DataSource({
   transport: {
       read: {
           url: "some_url",
           dataType: "json"
       }
   },
    schema: {
        data: "Fields",
        parse: function (data) {
            $.each(data, function (index, item) {
                // not sure what to do
            });
        }
    },
   pageSize: 10
});

$("#alias-list-grid").kendoGrid({
    autoBind: false,
    dataSource: aliasListDataSource,
    pageable: true
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:46:57.647

您可以将`parse`函数定义如下：

```
parse: function (data) {
    var fields = data.Fields;
    var result = [];
    $.each(fields, function (index, item) {
        result.push({field: item })
    });
    return result;
} 
```

然后是`Grid`：

```
$("#alias-list-grid").kendoGrid({
    dataSource: aliasListDataSource,
    pageable  : true
}); 
```

即 The`grid`有一个我们调用的列，并且在 parse 函数中我们迭代（正如你已经在做的那样）并组成:`field`的键值对。`field``value`

示例：http: [//jsfiddle.net/OnaBai/BEM3S/](http://jsfiddle.net/OnaBai/BEM3S/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:04:15.853

您需要使模式的数据属性返回一个执行操作的函数。检查这个小提琴：http: [//jsfiddle.net/whizkid747/9NsLR/3/](http://jsfiddle.net/whizkid747/9NsLR/3/)

```
var dataFromService = {"Form":"xxx","Fields":["xxx1","xxx2","xxx3"]}
var aliasListDataSource = new kendo.data.DataSource({ 
    //data:movies,

schema:{
     data: function(response){
        var dataForDS = [];

         var len = dataFromService.Fields.length;

       for (var i = 0; i < len; i++) {                     
           var obj  = {
               title : dataFromService.Fields[i]
           };            
          dataForDS.push(obj);     
       }             
     return dataForDS;   
}    
}
}); 
```

# magento - 在特定类别/类别中排除 leftnav

> ID：15528300
> 
> 赞同：0
> 
> 时间：2013-03-20T15:46:33.690
> 
> 标签：magento, navigation, hide, categories, sidebar

Leftnav 在我的 Magento 网站的所有页面上都处于活动状态。但我想将它隐藏在特定的类别/类别中。

这是我的代码：

```
 $cat = Mage::getModel('catalog/category')->load(3);
        $subcats = $cat->getChildren();

        foreach(explode(',',$subcats) as $subCatid)

        {
          $_category = Mage::getModel('catalog/category')->load($subCatid);

          if($_category->getIsActive())

           {
            $sub_cat = Mage::getModel('catalog/category')->load($_category->getId());
            $sub_subcats = $sub_cat->getChildren();
            foreach(explode(',',$sub_subcats) as $sub_subCatid)
            {
                  $_sub_category = Mage::getModel('catalog/category')->load($sub_subCatid);
                  if($_sub_category->getIsActive()) {
                      echo '<li class="sub_cat"><a href="'.$_sub_category->getURL().'" title="View products for "'.$_sub_category->getName().'" category">'.$_sub_category->getName().'</a></li>';
                  }
             }
          }
        }

        ?> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:36:30.313

首先，如果上面的代码取自一个块文件，它不应该有回显或直接输出HTML，它应该将相关数据返回给模板，然后构建并输出HTML。如果上面是一个模板文件，它不应该有那么多逻辑。模板应该只具有非常少的逻辑，而是调用块方法并使用返回的数据。

为了回答您的问题，我建议简单地定义一个不同的页面布局，其中不包括相关类别的设计选项卡下的左列。如果您需要在左栏中维护其他内容，我建议创建一个排除相关内容的新根模板，然后以相同的方式选择它。

# node.js - FineUploader responseJSON 在 onComplete 回调中不包含成功

> ID：15528306
> 
> 赞同：0
> 
> 时间：2013-03-20T15:46:48.053
> 
> 标签：node.js, coffeescript, fine-uploader

在触发 onComplete 方法后，我发现我的 responseJSON 变量似乎没有包含我期望的信息。这是我在某个地方搞砸了（可能），还是有些事情不太正常？FineUploader 正在识别成功的上传，所以我知道它得到了响应，但是当我在 onComplete 中记录 responseJSON 时，它会打印“responseJSON:”。只是文件名。没有大括号，括号等。

客户端代码

```
 uploader = new $("#collaboration-fine-uploader").fineUploader
        autoUpload: false
        multiple: false
        validation: 
            allowedExtensions: ['pdf', 'doc', 'docx', 'ppt', 'pptx', 'xls', 'xlsx']
            sizeLimit: 1024*1024*1024*10 # 10MB
        text: 
            uploadButton: "<i class='icon-plus icon-white'></i> Select Files"
        request: 
            endpoint: "/files/discussions/collaborations/upload"

    uploader.on "complete", (id, fileName, responseJSON)  ->
        console.log "responseJSON: "+responseJSON
        if (responseJSON.success)
            discussionId = responseJSON.discussionId
            $.ajax
                type: "GET"
                url: "/courses/"+serverData.course._id+"/discussions/"+discussionId
                beforeSend: (xhr) ->
                    xhr.setRequestHeader 'x-pjax', 'true'
                success: (html) ->
                    # Replace the old html
                    $(".discussions-tab").html html
                    $(".new-discussion").slideUp()
                    $("#new-discussion-modal").deactivateModal()

                    # History push
                    window.history.pushState window.history.state, "Discussions", "/courses/"+serverData.course._id+"/discussions/"+discussionId

                    # Scroll to top
                    $.scrollTo 0 
```

服务器端响应代码（只是必要的部分）

```
response = 
    "success": true
    "discussionId": discussion.id
console.log JSON.stringify response
res.send JSON.stringify response 
```

编辑：我还在 FineUploader-3.3.0.js 文件中添加了一个日志，它正在接收正确的 JSON 对象，只是由于某种原因没有正确地将其传回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:38:06.197

onComplete 方法的第一个参数实际上是事件，因此您实际上是`fileName`使用`responseJSON`. 如果您更改方法参数以包含事件，我认为应该可以。

```
uploader.on "complete", (event, id, fileName, responseJSON) 
```

# python - 我的元组中的那些小“u”是什么？（蟒蛇2.7）

> ID：15528308
> 
> 赞同：4
> 
> 时间：2013-03-20T15:46:52.860
> 
> 标签：python, list, python-2.7, tuples

所以我从 sqlExtractor 中获取数据，我无法触及 sqlExtractor。问题是 sqlExtractor 给了我一个元组列表（我想要一个列表列表）

所以我想到了：

```
myNewList = []
for tuple in myList:
    myNewList.append(list(tuple)) 
```

问题是，我的数据中充满了小“u”，它们是什么意思？他们并没有真正打扰我，但因为 myNewList[i][j] 将返回没有“u”的值。但我想明白。

那么，它们是什么？

谢谢。

示例 - 转换前后的元组：

```
(u'Pado', u'Seba*', u'B31', u'27/02/2011', u'SINA', u'2', u'5', u'Paris', u'Zone bleu', u'211')
[u'Pado', u'Seba*', u'B31', u'27/02/2011', u'SINA', u'2', u'5', u'Paris', u'Zone bleu', u'211'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T15:49:56.967

`u`表示该字符串是一个 unicode 对象。详情见[这里](http://docs.python.org/2/howto/unicode.html)_

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T15:48:40.570

这些是 Unicode 字符串。请参阅[Unicode 指南](http://docs.python.org/2/howto/unicode.html)。

# jakarta-ee - Java EE 中的 SOAP API、WSDL 和位置

> ID：15528309
> 
> 赞同：0
> 
> 时间：2013-03-20T15:46:55.997
> 
> 标签：jakarta-ee, soap, wsdl

我通过 Netbeans 的“Web Service from WSDL”在我的 Java EE 项目中创建了一个 SOAP API。唯一的问题，我不知道如何在我的应用程序中访问我的方法。这是代码示例：

```
@WebService(serviceName = "SalesExportService", portName = "SalesExportPort", endpointInterface = "com.supsellers.us.sales.export.SalesExport", targetNamespace = "http://us.supsellers.com/sales/export", wsdlLocation = "WEB-INF/wsdl/NewWebServiceFromWSDL/supseller-paris.servme.fr_80/app/SalesExportService.wsdl")
@Stateless
public class SoapApi {
    @EJB
    private SaleService saleService;

        public List<com.supsellers.us.sales.export.Sale> getFranceSales() {
          // Do stuff
          return result;
    }   
} 
```

我在互联网上搜索过，但似乎找不到任何明确的内容。有谁知道我如何设置自己的地址，或者至少如何在我的应用程序中访问我的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:25:20.830

您需要的是根据 SalesExportService 的 WSDL 生成 Web 服务客户端。您可以按照NetBeans 文档中的[开发 JAX-WS Web 服务客户端进行操作。](http://netbeans.org/kb/docs/websvc/client.html)

# javascript - JavaScript：console.log() 给出的结果与 alert() 不同

> ID：15528322
> 
> 赞同：5
> 
> 时间：2013-03-20T15:47:30.460
> 
> 标签：javascript

console.log() 是否应该在 JavaScript 中调用变量时打印出变量的值？这是我的假设，但是当我在 Firefox（使用 Firebug）或 Google Chrome（并使用内置开发工具）中运行以下代码时，我似乎得到了数组的“最终”值而不是当时的阵列。如果我使用 alert() 语句，它们会打印出我所期望的 - 调用 alert() 语句时数组的值。

```
var params = new Array();
var tmp = new Array('apple', 'banana', 'cat');

for (var i=0; i < tmp.length; i++) {
    params[tmp[i]] = [];
}

console.log(params);
/*
SHOWS IN CONSOLE:

- []
+ apple             ["jan", "feb", "mar", "apr"]
+ banana            ["jan", "feb", "mar", "apr"]
+ apple             ["jan", "feb", "mar", "apr"]
*/

alert( print_arr(params) );
/* 
ALERT BOX TEXT:

[apple]:
[banana]:
[cat]:
*/

console.log('===========================================');

var tmp2 = new Array('jan', 'feb', 'mar', 'apr');
for (var i=0; i < tmp.length; i++) {
    for (var j=0; j < tmp2.length; j++) {
        params[tmp[i]].push(tmp2[j]);
    }
}           

console.log(params);
/*
SHOWS IN CONSOLE:

- []
+ apple             ["jan", "feb", "mar", "apr"]
+ banana            ["jan", "feb", "mar", "apr"]
+ apple             ["jan", "feb", "mar", "apr"]
*/

alert( print_arr(params) );
/* 
ALERT BOX TEXT:

[apple]:jan,feb,mar,apr
[banana]:jan,feb,mar,apr
[cat]:jan,feb,mar,apr
*/

function print_arr(arr) {
    var str = '';
    for (var k in arr) {
        str += '[' + k + ']:' + arr[k].toString() + "\n";

    }

    return str;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-20T15:57:08.230

正如我在评论中所说，`console.log(obj)`它不会记录字符串表示，它会记录对内存中实际 javascript 对象的引用。因此，对对象所做的任何更改都会反映在记录的实例中。

如果要跟踪所做的渐进式更改，请将对象转换为字符串并打印为 like `console.log(JSON.stringify(params))`。

此外，您没有将`params`其用作数组，而是将其用作地图。所以换成`params`一个对象`var params = {}`

更改`params`为对象并用于`JSON.stringify`记录它

```
var params = {};
var tmp = new Array('apple', 'banana', 'cat');

for (var i=0; i < tmp.length; i++) {
    params[tmp[i]] = [];
}

console.log(JSON.stringify(params));
/*
SHOWS IN CONSOLE:

- []
+ apple             ["jan", "feb", "mar", "apr"]
+ banana            ["jan", "feb", "mar", "apr"]
+ apple             ["jan", "feb", "mar", "apr"]
*/

alert( print_arr(params) );
/* 
ALERT BOX TEXT:

[apple]:
[banana]:
[cat]:
*/

console.log('===========================================');

var tmp2 = new Array('jan', 'feb', 'mar', 'apr');
for (var i=0; i < tmp.length; i++) {
    for (var j=0; j < tmp2.length; j++) {
        params[tmp[i]].push(tmp2[j]);
    }
}           

console.log(JSON.stringify(params));
/*
SHOWS IN CONSOLE:

- []
+ apple             ["jan", "feb", "mar", "apr"]
+ banana            ["jan", "feb", "mar", "apr"]
+ apple             ["jan", "feb", "mar", "apr"]
*/

alert( print_arr(params) );
/* 
ALERT BOX TEXT:

[apple]:jan,feb,mar,apr
[banana]:jan,feb,mar,apr
[cat]:jan,feb,mar,apr
*/

function print_arr(arr) {
    var str = '';
    for (var k in arr) {
        str += '[' + k + ']:' + arr[k].toString() + "\n";

    }

    return str;
} 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/LV544/)

# c# - 将类转换为字符串以通过电子邮件发送

> ID：15528330
> 
> 赞同：1
> 
> 时间：2013-03-20T15:47:44.947
> 
> 标签：c#, .net, asp.net-mvc, serialization

我正在创建一个表单，其字段需要通过电子邮件发送。这是一个内部项目，所以时间紧迫，电子邮件不需要漂亮。

是否有一种快速而肮脏的方法可以将类序列化/格式化为类似于以下的可读字符串：

```
Field1Name:
This is the value of field1
Field2Name:
value of field 2 
```

我可以写一些反思来做这件事而没有太多问题，但我很好奇.NET 中是否已经内置了一些可以为我做这件事的东西。就像我说的，我正在寻找快速的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:48:58.213

如果您不想在输出中出现尖括号或花括号，最好的办法是`ToString()`为您的类编写一个方法，并在您想要发送字符串表示时调用它。大约需要五分钟。

```
public override string ToString()
{
    return "Field1Name: \n" + field1.ToString() +
           "\nField2Name: \n" + field2.ToString() +
           "\nField3Name: \n" + field3.ToString() + 
           "\nNestedObject: \n" + nestedObject.ToString();
} 
```

确保覆盖`ToString()`嵌套对象。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T15:56:04.947

您可以像这样使用反射：

```
public static string ClassToString(Object o)
{
    Type type = o.GetType();
    StringBuilder sb = new StringBuilder();
    foreach (FieldInfo field in type.GetFields())
    {
        sb.Append(field.Name).AppendLine(": ");
        sb.AppendLine(field.GetValue(o).ToString());
    }
    foreach (PropertyInfo property in type.GetProperties())
    {
        sb.Append(property.Name).AppendLine(": ");
        sb.AppendLine(property.GetValue(o, null).ToString());
    }
    return sb.ToString();
} 
```

# php - 显示在前几页中声明的内存中的变量

> ID：15528331
> 
> 赞同：2
> 
> 时间：2013-03-20T15:47:49.703
> 
> 标签：php, variables, include

是否可以在 php 中使用 var_dump 或类似函数来显示仍在范围内的所有变量？例如，pageA.php 包含 pageB.php，我想在后者中查看以前页面中可用的变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:49:52.153

```
 echo '< pre >';
  var_dump ( get_defined_vars() );
 echo '< /pre >'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:51:10.497

您正在寻找`get_defined_vars()`. 你可以像这样使用它：

```
var_dump(get_defined_vars()); 
```

这将显示所有可用于调用函数的范围的已定义变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:50:15.540

如果页面 A 包含`<?php $var = "HELLO"; include("pageb.php");?>`，则页面 b 将具有对变量的完全访问权限`<?php echo $var;?>`

这显然会改变，但是如果您开始定义/声明类，就好像您在 pagea 中的类的范围内定义一个变量，那么 pageb 只有在该类 a) 已经实例化并且 b) 变量是公共的并且公开的情况下才能访问它

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T15:50:18.530

是的，您必须使用 get_defined_vars()，阅读文档： http: [//php.net/manual/en/function.get-defined-vars.php](http://php.net/manual/en/function.get-defined-vars.php)

# extjs - 处理 extjs 4 模型中的空关联

> ID：15528336
> 
> 赞同：1
> 
> 时间：2013-03-20T15:48:05.930
> 
> 标签：extjs

我在 Sencha 论坛上发布了同样的问题：[http ://www.sencha.com/forum/showthread.php?259313-Dealing-with-nulls-in-nested-data&p=949429#post949429](http://www.sencha.com/forum/showthread.php?259313-Dealing-with-nulls-in-nested-data&p=949429#post949429)

我无法理解关联应该如何工作（在 ExtJS 4.1.1a 中）。考虑以下模型：

```
Ext.define('FM.model.Project', {
    extend: 'Ext.data.Model',
    requires: ['FM.model.Company'],

    fields: [
        'id',
        'customer_id',
        'parent_id',
        'name',
        'code',
        'supervisor_id',
        'start_date',
        'end_date',
        'budgeted_hours',
        'budgeted_sales',
        'budgeted_working_cost',
        'budgeted_material_cost',
        'info'
    ],

    associations: [
        {type: 'belongsTo', model: 'FM.model.Company', associatedName: 'Customer'},
        {type: 'belongsTo', model: 'FM.model.Project', associatedName: 'Parent'},
    ]
}); 
```

有时 JSON 数据中的“父”或“客户”为 null，在这种情况下，关联 getter 也应该返回 null。但相反，我得到了一个例外：

> Con 不是构造函数

来自 create() 中的 ModelManager.js。发生这种情况是因为 BelongsTo 关联正在尝试使用 associatedName（即“Parent”或“Customer”）创建一个新实例。这对我来说零意义。

我应该如何处理这种缺失的关联？构造一个虚拟的新实例并不是一个好的解决方案，因为我需要能够判断相关数据是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-11T19:57:53.750

你是对的，它应该创建一个`getter`返回的函数`null`。

这是一个解决方法：

设置关系，并`instanceName`在`belongsTo`调用之前检查它是否存在`getter`：

```
...
{type: 'belongsTo', model: 'FM.model.Company', associatedName: 'Customer', instanceName:'customer'}
...

if(myProject.customer){
  console.log(myProject.getCustomer().get('name'));
} 
```

[http://jsfiddle.net/4TSDu/55/](http://jsfiddle.net/4TSDu/55/)

# c# - 如何在c#中为webservice中使用的类名起别名

> ID：15528343
> 
> 赞同：0
> 
> 时间：2013-03-20T15:48:27.020
> 
> 标签：c#, asp.net, web-services

我的网络服务正在返回

```
 List<Term_Tree> 
```

通过网络方法。Term_Tree 类定义如下

```
 public class Term_Tree
{
    public string ID;
    public string Name;
    public List<Item> BroaderTerms;
    public List<Item> NarrowerTerms;

} 
```

我对这个类的首选名称是“Term”（即我想`List<Term>`通过 web 方法返回），但是还有另一个名为“Term”的类，并且在代码中被广泛使用。是否可以给这个类某种别名来返回`List<Term>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:52:52.360

您必须添加`using`别名才能区分，例如：

```
using Term = YourNameSpace.Term_Tree; 
```

**但是，如果您`Term`在同一个文件中使用其他类，则必须在该类前面加上它的名称空间，否则会出现模棱两可的引用错误**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:53:03.057

使用 using 指令，例如（使用测试命名空间）：

```
using Term = My.Very.Easy.NameSpace.Term_Tree; 
```

这将成为：

```
List<Term> list = new List<Term>(); 
```

# ruby-on-rails - has_messages 模拟 Rails 3.2

> ID：15528345
> 
> 赞同：0
> 
> 时间：2013-03-20T15:48:31.300
> 
> 标签：ruby-on-rails, ruby, messaging

有一个非常简单的 gem has_messages 用于用户之间的消息传递。但是我对这个宝石有一些麻烦。在我看来，他不再活跃了。你能给 gem 像 has_messages 一样简单吗？

无需使用像 Faye 这样的系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:27:39.003

充当消息是我的解决方案

# java - 循环嵌套括号内容

> ID：15528347
> 
> 赞同：3
> 
> 时间：2013-03-20T15:48:31.453
> 
> 标签：java, loops, nested, parentheses

我发现了很多类似的问题，但主要是关于正则表达式，而不是我想要做的。

```
Given a string = "(content4(content3(content2(content1...)))) 
```

我想先获得叶括号内容（content1 ...），然后再上一级（content2（content1 ...）），然后再上一级......等等。我有一些非常复杂的解决方案，但我想知道是否没有更简单的方法。这似乎最好递归解决，但我还找不到一个好的解决方案。有人可能已经解决了类似的问题。大家有什么想法或建议吗？

提前谢谢你的帮助，我很感激

添加 ：

字符串也可以如下所示：

string = "(content4(content3(content2(content1...);content5(content6...))))"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T15:59:42.363

使用堆栈。

将您的字符串分成 3 种类型的元素。

一个。左括号。

湾。两个连续左括号之间的字符串，或者如果没有第二个左括号，则为左括号和直接右括号之间的字符串。

C。右括号

该方法将类似于以下内容。

> 1.  将左括号压入栈顶。
>     
>     
> 2.  考虑到第二个左括号确实存在，将两个左括号之间的字符串推入堆栈顶部，然后转到第 3 步，否则将左右括号之间的字符串推入堆栈顶部，然后转到第 4 步。
>     
>     
> 3.  将字符串（两个左括号之间的字符串）之后的左括号压入堆栈顶部。重复步骤 1 到 3，直到遇到右括号。
>     
>     
> 4.  遇到右括号后，从堆栈中删除顶部两个元素，即字符串（两个左括号之间的字符串）或字符串（左括号和右括号之间的字符串）和左括号，并调整顶部索引和字符串索引。现在你有了内容 1。
>     
>     
> 5.  重复第 4 步，直到获得所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:52:56.223

这似乎与理智的输入非常有效。我没有测试过奇怪的。

```
public static void main(String args[]) {
  ArrayList<String> split = split("(content4(content3(content2(content1...))))");
  System.out.println("Split: " + split);
}

// Standard set of braces.
private static final String openBraces = "({[<";
// Matching close set.
private static final String closeBraces = ")}]>";

public static ArrayList<String> split(String s) {
  // Default to splitting with my standard set of braces.
  return split(s, openBraces, closeBraces);
}

// Holds the start of an element and which brace started it.
private static class Start {
  // The brace number from the braces string in use.
  final int brace;
  // The position in the string it was seen.
  final int pos;

  // Constructor.
  public Start(int brace, int pos) {
    this.brace = brace;
    this.pos = pos;
  }

  @Override
  public String toString() {
    return "{"+openBraces.charAt(brace)+","+pos+"}";
  }
}

public static ArrayList<String> split(String s, String open, String close) {
  // The splits.
  ArrayList<String> split = new ArrayList<String>();
  // The stack.
  ArrayList<Start> stack = new ArrayList<Start>();
  // Walk the string.
  for (int i = 0; i < s.length(); i++) {
    // Get the char there.
    char ch = s.charAt(i);
    // Is it an open brace?
    int o = open.indexOf(ch);
    // Is it a close brace?
    int c = close.indexOf(ch);
    if (o >= 0) {
      // Its an open! Push it.
      stack.add(new Start(o, i));
    } else if ( c >= 0 && stack.size() > 0 ) {
      // Pop (if matches).
      int tosPos = stack.size() - 1;
      Start tos = stack.get(tosPos);
      // Does the brace match?
      if ( tos.brace == c) {
        // Matches!
        split.add(s.substring(tos.pos, i+1));
        // Done with that one.
        stack.remove(tosPos);
      }
    }
  }
  return split;
} 
```

印刷：

```
Split: [(content1...), (content2(content1...)), (content3(content2(content1...))), (content4(content3(content2(content1...))))] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:52:22.453

我很久以前用 HyperTalk 做过，但算法框架保持不变：

1 - 每次遇到左大括号时，将 1 添加到括号计数器 2 - 对右括号执行相反的操作

每次找到第一个左括号时，存储它的位置+1，对右括号执行相同的位置-1。

当找到右括号时，提取子字符串并对其进行递归。

如果您想首先获得更多嵌套的“叶子”，只需使用带有括号位置的列表，然后向后读取您的列表（或使用堆栈）。

但请注意：这种技术只会给你带来第一个孩子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:18:43.410

这是我通过在大括号两侧设置头尾标志来解决此问题的方法，但真正经典的方法是使用堆栈。

```
public static void main(String[] argv) {
    String str = "(content4(content3(content2(content1...))))";
    int head = str.lastIndexOf("(");
    int tail = 0;

    while (head != -1) {
        // stop loop if the brace mismatch
        if (str.substring(tail, str.length()).indexOf(")") == -1)
            break;
        tail += str.substring(tail, str.length()).indexOf(")") + 1;
        String res = str.substring(head, tail);
        System.out.println(res);
        head = str.substring(0, head).lastIndexOf("(");

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T16:18:31.767

好的，这是解决您问题的好方法。

```
 String str = "(content4(content3(content2(content1...))))";
    str = str.replaceFirst("\\(", "");
    String[] results = str.split("\\)")[0].split("\\(");

    int l = results.length;
    for (int j = 0; j < l / 2; j++) {
        String temp = results[j];
        results[j] = results[l - j - 1];
        results[l - j - 1] = temp;
    }

    for (String string : results) {
        System.out.println(string);
    } 
```

代码说明：

*   首先我们删除第一个“（”，因为它会导致最后出现一个空字符串。
*   将字符串拆分为 ")" 并在索引 0 处获取字符串以保留我们的数据：

    字符串现在看起来像这样：

> 内容 4（内容 3（内容 2（内容 1...

*   然后通过围绕“（”再次拆分，我们的内容被反向排列。
*   最后我们反转数组

# c# - 正则表达式从下一行获取文本

> ID：15528352
> 
> 赞同：0
> 
> 时间：2013-03-20T15:48:41.073
> 
> 标签：c#, .net, regex

我正在寻找一种使用正则表达式在某个字符串的下一行查找文本的方法。
假设我有以下文字：

```
Note:
Just some text on this line

Some more text here. 
```

我只想获取文本“仅此行上的一些文本”。
我不确切知道其他文本是什么，所以我无法在“注意：”和“这里还有一些文本”之间进行搜索。
我所知道的是，我想要的文本在“注意：”的下一行。
我怎么能这样做？

干杯，CJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:50:39.167

我会一行一行地沿着你的字符串走，当一个正则表达式匹配时，然后取下一行

```
string str;
// if you're not reading from a file, String.Split('\n'), can help you
using (StreamReader sr = new StreamReader("doc.txt"))
{
    while ((str = sr.ReadLine()) != null)
    {
        if (str.Trim() == "Note:") // you may also use a regex here if applicable
        {
            str = sr.ReadLine();
            break;
        }
    }
}

Console.WriteLine(str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T15:52:46.827

这*可以*通过多行正则表达式来完成，但您确定要这样做吗？这听起来更像是逐行处理的案例。

正则表达式将类似于：

```
new Regex(@"Note:$^(?<capture>.*)$", RegexOptions.MultiLine); 
```

尽管您可能需要先`$`设置 a`\r?$`或 a`\s*$`因为`$`只匹配`\n`不匹配`\r`in `\r\n`。

您的“仅此行上的一些文本”将位于名为 capture 的组中。`\r`由于`$`. _

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:01:28.897

你可以这样做

```
(?<=Note:(\r?\n)).*?(?=(\r?\n)|$)
---------------- --- ------------
      |           |        |->lookahead for \r\n or end of string
      |           |->Gotcha
      |->lookbehind for note followed by \r\n. \r is optional in some cases 
```

所以，它会是这样的

```
string nextLine=Regex.Match(input,regex,RegexOptions.Singline | RegexOptions.IgnoreCase ).Value; 
```

# c - 使用 printf 打印 UTF-8 字符串 - 宽与多字节字符串文字

> ID：15528359
> 
> 赞同：26
> 
> 时间：2013-03-20T15:49:05.140
> 
> 标签：c, unicode, utf-8, printf, multibyte

在这样的语句中，两者都以相同的编码（UTF-8）输入到源代码中，并且语言环境设置正确，它们之间有什么实际区别吗？

```
printf("ο Δικαιοπολις εν αγρω εστιν\n");
printf("%ls", L"ο Δικαιοπολις εν αγρω εστιν\n"); 
```

因此，在进行输出时是否有任何理由偏爱其中一个？我想第二个的表现要差一些，但它比多字节文字有什么优势（或劣势）吗？

编辑：这些字符串打印没有问题。但我没有使用宽字符串函数，因为我也希望能够使用`printf`等。所以问题是这些打印方式有什么不同（鉴于上述情况），如果是这样，第二种方式有什么优势吗？

EDIT2：根据下面的评论，我现在知道这个程序可以工作——我认为这是不可能的：

```
int main()
{
    setlocale(LC_ALL, "");
    wprintf(L"ο Δικαιοπολις εν αγρω εστιν\n");  // wide output
    freopen(NULL, "w", stdout);                 // lets me switch
    printf("ο Δικαιοπολις εν αγρω εστιν\n");    // byte output
} 
```

* * *

**EDIT3**：我通过查看这两种类型的情况做了一些进一步的研究。取一个更简单的字符串：

```
wchar_t *wides = L"£100 π";
char *mbs = "£100 π"; 
```

编译器正在生成不同的代码。宽字符串是：

```
.string "\243"
.string ""
.string ""
.string "1"
.string ""
.string ""
.string "0"
.string ""
.string ""
.string "0"
.string ""
.string ""
.string " "
.string ""
.string ""
.string "\300\003"
.string ""
.string ""
.string ""
.string ""
.string "" 
```

而第二个是：

```
.string "\302\243100 \317\200" 
```

看看 Unicode 编码，第二种是纯 UTF-8。宽字符表示是 UTF-32。我意识到这将取决于实现。

那么也许文字的宽字符表示更便携？我的系统不会直接打印 UTF-16/UTF-32 编码，所以会自动转换为 UTF-8 输出。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-20T15:50:47.700

```
printf("ο Δικαιοπολις εν αγρω εστιν\n"); 
```

打印字符串文字（`const char*`，特殊字符表示为*多字节*字符）。尽管您可能会看到正确的输出，但在处理此类非 ASCII 字符时可能还会遇到其他问题。例如：

```
char str[] = "αγρω";
printf("%d %d\n", sizeof(str), strlen(str)); 
```

输出`9 8`，因为这些特殊字符中的每一个都由 2 `char`s 表示。

使用`L`前缀时，您拥有由宽字符 ( `const wchar_t*`) 和`%ls`格式说明符组成的文字，导致这些宽字符转换为*多字节字符*(UTF-8)。请注意，在这种情况下，应适当设置语言环境，否则此转换可能会导致输出无效：

```
#include <stdio.h>
#include <wchar.h>
#include <locale.h>

int main(void)
{
    setlocale(LC_ALL, "");
    printf("%ls", L"ο Δικαιοπολις εν αγρω εστιν");
    return 0;
} 
```

但是，当使用宽字符时，有些事情可能会变得更加复杂，而其他事情可能会变得更简单、更直接。例如：

```
wchar_t str[] = L"αγρω";
printf("%d %d", sizeof(str) / sizeof(wchar_t), wcslen(str)); 
```

`5 4`将按自然预期的方式输出。

一旦决定使用宽字符串，[`wprintf`](http://linux.die.net/man/3/wprintf)就可以直接打印*宽字符*。这里还值得注意的是，在 Windows 控制台的情况下，`stdout`应通过调用将 的翻译模式显式设置为 Unicode 模式之一[`_setmode`](http://msdn.microsoft.com/en-us/aa298581.aspx)：

```
#include <stdio.h>
#include <wchar.h>

#include <io.h>
#include <fcntl.h>
#ifndef _O_U16TEXT
  #define _O_U16TEXT 0x20000
#endif

int main()
{
    _setmode(_fileno(stdout), _O_U16TEXT);
    wprintf(L"%s\n", L"ο Δικαιοπολις εν αγρω εστιν");
    return 0;
} 
```

# ruby-on-rails - Rails 将 schema.rb 时间戳更改为日期时间

> ID：15528363
> 
> 赞同：4
> 
> 时间：2013-03-20T15:49:11.470
> 
> 标签：ruby-on-rails, postgresql, activerecord, rails-migrations

在与其他开发人员合作时，这个问题似乎一直在发生。我们有一个像这样在迁移中创建的表（由 postgres 支持）：

```
create_table :subscription_events do |t|
  t.integer :subscriber_id
  t.text :source_url
  t.text :params
  t.text :session

  t.timestamps
end 
```

然后在未来看似随机的时间点运行 rake db:migrate 后，Rails 想要更新 schema.rb 文件以使用`datetime`而不是`timestamp`，这也导致整个 create_table 调用的额外混乱重新缩进：

```
 create_table "subscription_events", :force => true do |t|
-    t.integer   "subscriber_id"
-    t.text      "source_url"
-    t.text      "params"
-    t.text      "session"
-    t.timestamp "created_at",    :limit => 6, :null => false
-    t.timestamp "updated_at",    :limit => 6, :null => false
+    t.integer  "subscriber_id"
+    t.text     "source_url"
+    t.text     "params"
+    t.text     "session"
+    t.datetime "created_at",    :null => false
+    t.datetime "updated_at",    :null => false
   end 
```

这是什么原因造成的？我们应该检查这个修改过的文件还是每次都重置它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-20T15:57:17.053

这不应该导致任何“重新索引”，因为`:datetime`和`:timestamp`迁移类型都映射到 PostgreSQL 的`TIMESTAMP`数据类型。

这可能是由于`ActiveRecord::ConnectionAdapters::PostgreSQLAdapter::NATIVE_DATABASE_TYPES`定义为标准散列的固有无序常量造成的。当 ActiveRecord 为 'TIMESTAMP' 搜索第一个合适的匹配时，它可能会找到一个`:datetime`或`:timestamp`不可预测的（因为两者都是匹配）。

简而言之，不要大惊小怪，因为这至少不会影响您的数据或架构。

**更新**

转储中使用的 rails 'datatype' 是使用将为TIMESTAMP 数据类型`simplified_type`返回的方法找到的。`:datetime`更有可能的是，您升级了 Rails 版本，而之前的版本有不同的方法来确定数据类型。不管是什么原因，这不应该以任何方式影响你。

# windows-8 - ListView 右键选择项目，左键不选择

> ID：15528373
> 
> 赞同：2
> 
> 时间：2013-03-20T15:49:39.503
> 
> 标签：windows-8

我正在编写一个 Windows 8 笔记应用程序，我有一个从 Azure 连接到 SQL 数据库的 Listview 和一个带有堆栈面板的 ListViewItem 模板，在一个复选框内加上一些文本..

当我左键单击或点击一个项目时，它不会被选中，但右键单击会。我怎样才能让它通过左键单击来选择列表视图项？

```
<ListView x:Name="noteListView" Margin="20,0,0,0" IsItemClickEnabled="True" ItemClick="noteListView_ItemClick" > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:57:29.883

两件事情：

1.  你必须设置`IsItemClickEnabled`为`False`
2.  您必须处理`SelectionChanged`事件而不是单击事件

xml:

```
<ListView x:Name="noteListView" Margin="20,0,0,0" 
IsItemClickEnabled="False" SelectionChanged="noteListView_SelectionChanged"> 
```

# android - 我可以在android中控制z轴吗？

> ID：15528377
> 
> 赞同：2
> 
> 时间：2013-03-20T15:49:46.663
> 
> 标签：android, android-layout

在 Android 中控制 Z 轴的最佳方法是什么？

这里：[布局层？Z轴？](https://stackoverflow.com/questions/3929412/android-layout-layers-z-axis)，它指出最好的方法是使用 FrameLayout。我，我设法使用了具有以下结构的RelativeLayout：

```
RelativeLayout
-- LinearLayout
-- -- View v1 (bottom)
-- -- View v2 (bottom)
-- LinearLayout
-- -- View v3 (top) 
```

但这并不能完全回答我的问题。当我希望我的 View v1 始终位于顶部，但 View v3 始终位于 View v2 的顶部时会发生什么。

像这样：

```
RelativeLayout
-- LinearLayout
-- -- View v1 z=1
-- -- View v2 z=3
-- LinearLayout
-- -- View v3 z=2 
```

（其中 1 在 2 在 3 之上）

这在 Flex 中很容易完成……可以在 Android 开发中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:55:27.367

使用[FrameLayout](http://developer.android.com/reference/android/widget/FrameLayout.html)，而不是 RelativeLayout 或 LinearLayout。

无论如何，在 Android 中将 Views 置于其他之上真的没有任何意义。用于`View.setVisibility(View.GONE)`告诉 Android 不绘制视图（它不会为它保留空间）并`View.setVisibility(View.VISIBLE)`让它绘制它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-30T13:27:39.123

您可以在 .xml 文件中定义 translationZ 参数。较高的值表示“离用户更近的位置”：

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"

    android:translationZ="2dp">
</LinearLayout>

<ImageView
    android:layout_marginTop="-15dp"
    android:layout_marginBottom="-22dp"
    android:translationZ="1dp"

    android:layout_width="match_parent"
    android:layout_height="50dp"

    />

<ListView
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    /> 
```

我发现这在将 ListView 移动到具有透明度的图形下方（连同负边距）以使其看起来像消失在线条后面时很有用，如下所示：

[![translationZ 的使用示例](../Images/66018923eee9753e5c402142e2bdbd3a.png)](https://i.stack.imgur.com/CBDcd.png)

# jquery - .click 不工作

> ID：15528381
> 
> 赞同：0
> 
> 时间：2013-03-20T15:50:03.593
> 
> 标签：jquery, class, click, hover

我试图在单击并悬停（左边距+边框底部）时执行操作 .hover 很好......但我的 .click 不起作用，我试过这个：

```
$(".border").hover(
    function(){
        $(this).switchClass( "border", "border_active", 500 );
        return false;
    }
    ,function(){
        $(this).switchClass( "border_active", "border", 400 );
        return false;
    }
);  
$(".border").click(
    function(){
        $(this).removeClass('border');
        $(this).addClass('border_active')
    }
    ,function(){
        $(this).removeClass('border_active');
        $(this).addClass('border');
    }
); 
```

但没什么，这是漏洞代码： http: [//jsfiddle.net/Fe6pE/13/](http://jsfiddle.net/Fe6pE/13/)，请告诉我最好的方法来让这个工作，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:54:27.057

为此，只需使用`toggleClass`;

```
$('.border').click(function() {
    $(this).toggleClass('border-active border');
}); 
```

这只会交替上课。如果`border-active`一开始是打开的，那么单击它将`border-active`关闭并`border`打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:51:17.020

在 jQuery 中，`click()`不接受 2 个函数参数。

你需要使用的是`mousedown()`和`mouseup()`

甚至更好的是，您可以避免使用 JavaScript 并像这样构建 CSS：

```
.border {
    /* normal styles */
}
.border:hover {
    /* styles when hovered */
}
.border:active {
    /* styles when mouse is down */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T15:57:13.177

正如我在评论中提到的，只需添加 toggleClass 吗？

```
$(".border").click(function(){
    $(this).toggleClass('border');
    $(this).toggleClass('border_active');
}); 
```

# android - 使用从 XML 扩展而来的动画子类

> ID：15528396
> 
> 赞同：2
> 
> 时间：2013-03-20T15:50:39.540
> 
> 标签：android, xml, animation, subclassing

`View`我已经使用我添加的自定义属性成功地从 XML 扩展子类，但是`View`布局中的层次结构使得您可以在 XML 中指定项目的完全限定类名。另一方面，动画元素只需使用`<set>`，`<alpha>`依此类推。有没有办法制作一个子类，`AlphaAnimation`然后像普通的那样从 XML中扩充它`AlphaAnimation`？

# android - 带有 GridView 的 ClassCastException

> ID：15528404
> 
> 赞同：1
> 
> 时间：2013-03-20T15:51:04.657
> 
> 标签：android

所以我有一个使用 GridView 的应用程序。我正在使用支持库，因为该应用程序的目标是使用最低 API 8。所以，我编写了这个 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/logotipo_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@+id/imageView1"
    android:src="@drawable/home_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/alertas_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/imagelogo"
    android:layout_width="69dp"
    android:layout_height="69dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/imageView1" />

<TextView
    android:id="@+id/detallenombrecamp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/imagelogo"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/imagelogo"
    android:layout_toRightOf="@+id/imagelogo"
    android:text="Large Text"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<TextView
    android:id="@+id/textocamp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/imagelogo"
    android:text="Medium Text"
    android:textAppearance="?android:attr/textAppearanceMedium" />

<ImageView
    android:id="@+id/iconostaff"
    android:layout_width="78dp"
    android:layout_height="72dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textocamp"
    android:src="@drawable/icono_staff_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/iconofotos"
    android:layout_width="78dp"
    android:layout_height="72dp"
    android:layout_alignTop="@+id/iconostaff"
    android:layout_toLeftOf="@+id/imageView2"
    android:src="@drawable/icono_fotos_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/iconovideo"
    android:layout_width="78dp"
    android:layout_height="72dp"
    android:layout_alignTop="@+id/iconofotos"
    android:layout_toLeftOf="@+id/imageView3"
    android:src="@drawable/icono_video_high_density_vinceri_movil" />

<ImageView
    android:id="@+id/iconostats"
    android:layout_width="78dp"
    android:layout_height="72dp"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/iconovideo"
    android:src="@drawable/icono_estadistica_high_density_vinceri_movil" />

<android.support.v7.widget.GridLayout
    android:id="@+id/grid"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/iconostaff" >

</android.support.v7.widget.GridLayout>

</RelativeLayout> 
```

这个Activity：导入android.app.Activity；导入android.os.Bundle；导入android.widget.GridView；

```
public class DetalleCampActivity extends Activity {

private Integer[] imagenes={
        R.drawable.logo_carrefour,
        R.drawable.logo_mercedes,
        R.drawable.logo_venta_unica
};

@Override
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.detallecamplayout);     
    GridView grid=(GridView)findViewById(R.id.grid);//This is line 26
    grid.setAdapter(new ImageAdapter(this));

}

} 
```

我使用这个适配器：

```
public class ImageAdapter extends BaseAdapter {

private Context context;
int mGalleryItemBackground;
private Integer[] imagenes={
        R.drawable.logo_carrefour,
        R.drawable.logo_mercedes,
        R.drawable.logo_venta_unica
};

public ImageAdapter(Context c) {
    context=c;
    TypedArray attr=context.obtainStyledAttributes(R.styleable.Gallery);
    mGalleryItemBackground=attr.getResourceId(R.styleable.Gallery_android_galleryItemBackground, 0);
    attr.recycle();
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return imagenes.length;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@SuppressWarnings("deprecation")
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView image;
    if(convertView==null){
    image=new ImageView(context);

    image.setImageResource(imagenes[position]);
    image.setLayoutParams(new GridView.LayoutParams(150, 150));
    image.setScaleType(ImageView.ScaleType.CENTER_CROP);
    image.setPadding(8, 8, 8, 8);
    }else{
        image=(ImageView) convertView;
    }
    image.setBackgroundResource(imagenes[position]);
    return image;
}

} 
```

它在编译时没有显示错误，但是当我运行应用程序时，我有这个堆栈跟踪：

```
03-20 15:31:21.498: E/AndroidRuntime(20630): FATAL EXCEPTION: main
03-20 15:31:21.498: E/AndroidRuntime(20630): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.publidirecta.vincerientidad2/com.publidirecta.vincerientidad2.DetalleCampActivity}: java.lang.ClassCastException: android.support.v7.widget.GridLayout
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.os.Handler.dispatchMessage(Handler.java:99)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.os.Looper.loop(Looper.java:130)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.app.ActivityThread.main(ActivityThread.java:3701)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at java.lang.reflect.Method.invokeNative(Native Method)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at java.lang.reflect.Method.invoke(Method.java:507)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at dalvik.system.NativeStart.main(Native Method)
03-20 15:31:21.498: E/AndroidRuntime(20630): Caused by: java.lang.ClassCastException: android.support.v7.widget.GridLayout
03-20 15:31:21.498: E/AndroidRuntime(20630):    at com.publidirecta.vincerientidad2.DetalleCampActivity.onCreate(DetalleCampActivity.java:26)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-20 15:31:21.498: E/AndroidRuntime(20630):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623) 
```

在浪费了很多时间试图不使用支持库获取 ClassDefNotFoundError 之后（并且不太确定为什么它现在不抛出它），我现在有了这个。知道如何解决吗？非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T15:59:11.550

您正在尝试将 to 投射`GridLayout`到`GridView`. 由于很明显您需要一个`GridView`，因此在您的 XML 文件中更改以下内容：

```
<android.support.v7.widget.GridLayout
    android:id="@+id/grid" 
```

到：

```
<GridView
    android:id="@+id/grid" 
```

**或者**，如果您真的需要 a `GridLayout`，请在您的活动中更改以下行：

```
GridView grid=(GridView)findViewById(R.id.grid); 
```

到：

```
android.support.v7.widget.GridLayout grid = (android.support.v7.widget.GridLayout)findViewById(R.id.grid); 
```

但是，您的适配器会出错，因为`GridLayout`它不使用适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:25:17.620

如果它可以帮助解决我的问题，请在布局中以这种方式设置 GridView：

```
<GridView
    android:id="@+id/grid"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"/> 
```

会让它看起来像一个网格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T06:18:58.640

如果您非常需要 GridLayout，请在您的活动中进行这些调整来更改：

`GridView grid=(GridView)findViewById(R.id.grid);`

到：

`android.widget.GridLayout grid = (android.widget.GridLayout)findViewById(R.id.grid);`

# javascript - javascript 上的正则表达式：搜索排除某些整数的 ID

> ID：15528408
> 
> 赞同：-2
> 
> 时间：2013-03-20T15:51:13.823
> 
> 标签：javascript, regex

我有这个字符串：**value268_generated_number**

我通常这样做：`^value.*_generated_number`

我将如何匹配我的正则表达式但**不**匹配这些数字：单词“value”之后的**1,10 和 100 ？**

例如：

*   value1_generated_number
*   value10_generated_number
*   value100_generated_number

该表达式还应满足生成的最多 50000 的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:53:17.847

您可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html)：

```
^value(?!10{0,2}_).*?_generated_number 
```

另请注意，您应该小心使用`*`带有 . 的量词`.`。它通常比你想要的更多。最好`*`用字符类替换，例如`\d*`. 为了安全起见，我使量词变得懒惰。

如果您的输入始终为 形式`value<digits>_<digits>`，则最终表达式为：

```
^value(?!10{0,2}_)\d*_\d+$ 
```

# java - 从 GXT 中的窗口组件中删除调整大小光标

> ID：15528411
> 
> 赞同：0
> 
> 时间：2013-03-20T15:51:18.060
> 
> 标签：java, gwt, extjs, gxt

我使用的 Window 组件将 Resizable 标志设置为 false，但边缘上的调整大小光标仍然出现。有什么办法可以将光标更改为正常？

我正在使用带有外观图案的 Sencha GXT 3。

**编辑：**

两个答案（SSR 和 Jonathan）都是正确的，但有点矫枉过正。其他可调整大小的 Windows 会发生什么？

我将这个问题通知了 Sencha，他们将其标记为错误。**升级到 GXT 3.0.3+**将解决该问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:27:37.550

如果不侵入 gxt 代码，这可能是不可能的。调整大小光标代码似乎被硬编码为混淆的 gwt 代码中的 css 样式。您可以在下图中看到带有**光标的混淆样式： e-resize** ;

![在此处输入图像描述](../Images/cf1458dd9ee598881f07df73afc72e0e.png)

1.  打开gxt jar。将相关的 Window 代码复制到与 gxt 相同的包结构中的代码库中，然后更改与 Window 相关的 gwt 模板样式。当 gwt 编译器选择它时，确保该类位于比 gxt 代码更高的类路径层次结构中。

2.  向 GXT 团队记录错误以获取官方补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:53:57.400

该`Resizable`班有`ResizableAppearance`. 如果我们看一下`ResizableBaseAppearance`，我们可以看看 GXT 团队是如何实现这些东西的。

我猜测正在发生的事情是，当`Window`最初创建 a 时，`Window.setResizable(true)`会调用它来注入样式并设置处理程序以调整大小。

您可以自己滚动`ResizeableAppearance`并设置您的延迟绑定规则以使用您的而不是默认`ResizableBaseAppearance`规则（确保这些规则在您继承 GXT 之后出现`*.gwt.xml`）。

这将替换`Resizer`in ALL`Window`的外观。因此，诀窍是弄清楚如何确定调整大小是否关闭。

希望这可以帮助。

# xcode - Jenkins 停止从 xcodebuild 获取我的单元测试输出

> ID：15528412
> 
> 赞同：3
> 
> 时间：2013-03-20T15:51:20.443
> 
> 标签：xcode, unit-testing, jenkins

我已经设置了 Jenkins 来构建我的应用程序测试目标并在 iOS 模拟器中执行测试，就像[这个答案](https://stackoverflow.com/questions/5403991/xcode-4-run-tests-from-the-command-line-xcodebuild/10823483#10823483)所说的那样。当我在 Jenkins 中执行构建时，iOS 模拟器会启动并运行我的所有测试，但我只在第一次测试的测试日志中获得输出。

如果我从命令行运行 xcodebuild，它也会运行我的所有测试，但我确实得到了所有测试的输出。

有人知道詹金斯可能出了什么问题或有进一步故障排除的建议吗？谢谢！

# java - Java SE 获取硬盘驱动程序名称

> ID：15528413
> 
> 赞同：1
> 
> 时间：2013-03-20T15:51:24.307
> 
> 标签：java, file

如何获取硬盘驱动程序名称？例如，我有两个驱动器 C 和 D，那么如何获取它们的名称？我试过`FileSystemView.getRoots()`了，但它返回用户工作目录，如 'C:\Users\user_name'

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:55:19.883

`File`提供了这一点。请参阅 Java[文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html#listRoots%28%29)

```
File[] roots = File.listRoots(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:56:03.020

尝试

```
 for(File f : File.listRoots()) {
        System.out.println(f);
    } 
```

# google-app-engine - Google App Engine - 不将 HTTP 流量重定向到 HTTPS

> ID：15528415
> 
> 赞同：0
> 
> 时间：2013-03-20T15:51:36.423
> 
> 标签：google-app-engine

我最近在我的 Google App Engine Java 应用程序上安装了 GoDaddy 证书。一切顺利，直接访问时 HTTPS 链接正常工作。

当我尝试在 Web.xml 中配置所有需要保护的链接时，我遇到了重定向问题。由于某种原因，GAE 承认链接应该是安全的，但它未能将它们重定向到 HTTPS（因为它应该）。

我在 Web.xml 中使用了以下定义：

```
 <security-constraint>
     <display-name>SecurityConstraint</display-name>
      <web-resource-collection>            
         <url-pattern>/Login.html</url-pattern>
        <url-pattern>/Register.html</url-pattern>
        <url-pattern>/Billing.html</url-pattern>
        <url-pattern>/PurchaseCredit.html</url-pattern>
        <url-pattern>/PastPurchases.html</url-pattern>                                              
      </web-resource-collection>
      <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
      </user-data-constraint>
  </security-constraint> 
```

示例：当我尝试到达

```
 http://MyDomain/Login.html 
```

我得到：HTTP 错误 403（禁止）：服务器拒绝完成请求。

代替：

```
 https://MyDomain/Login.html 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:33:17.857

似乎当我关闭 Google PageSpeed 时问题就解决了。

我刚刚读到谷歌发布了关于 PageSpeed 和 HTTPS 的特别通知

[https://developers.google.com/speed/docs/pss/faq](https://developers.google.com/speed/docs/pss/faq)

似乎要整合这两者，您必须通过电子邮件向他们发送进一步的说明。

不管怎样，我很高兴我找到了这个，希望它能为你们节省很多时间。

# ruby - 遍历页面 nokogiri 获取链接地址

> ID：15528417
> 
> 赞同：0
> 
> 时间：2013-03-20T15:51:40.943
> 
> 标签：ruby, web-scraping, nokogiri

我正在尝试从下面的网站获取图像或图像地址。它适用于我在下面放置的一个网站：“ [http://www.1stsourceservall.com/Category/Accessories](http://www.1stsourceservall.com/Category/Accessories) ”。但是——一旦完成页面——我希望它点击下一页链接并循环浏览所有 20 多个页面。我该怎么做？

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

url = "http://www.1stsourceservall.com/Category/Accessories"
while (url) do
  doc = Nokogiri::HTML(open(url))
    puts doc.css(".productImageMed")
  end

  link = doc.css('.pagination a')
  url = link && link[0]['href'] #=> url is nil if no link is found on the page
end 
```

# ios - 为什么Phonegap deviceready事件在很长一段时间后被触发？

> ID：15528421
> 
> 赞同：2
> 
> 时间：2013-03-20T15:51:58.150
> 
> 标签：ios, cordova

我使用 phonegap 云构建服务来构建 iOS 应用程序。但是 deviceready 事件会在很长一段时间后触发，大约 20 多秒。

就我而言，我在 iphone-4s 中运行我的应用程序。有谁知道任何可能的原因？

我认为 Phonegap 在 iOS 上不应该这么慢。我想知道是不是因为我的 iOS 证书？需要分布分析？还有其他配置吗？

看来 phonegap 本机代码运行了很长时间，然后触发了设备就绪。

感谢您的任何想法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:17:16.313

你不是在本地文件系统中包含cordova.js吗？如果它在本地文件系统中，它没有理由连接到 PhoneGap 网站。还要将所有 JS、CSS 文件移动到本地文件系统，不要使用 CDN。然后你的应用程序会更快。

# jboss - 如何调试 Facelets 页面呈现问题？

> ID：15528424
> 
> 赞同：0
> 
> 时间：2013-03-20T15:52:15.470
> 
> 标签：jboss, jboss7.x, seam, facelets

我正在使用 JBoss 7.1、Seam 2.2.2。

呈现页面时，我得到带有 NullPointerException 的 Facelets 调试页面，没有任何行号指示页面上发生的位置。是否有一些标准技巧来调试此类问题？在这种情况下，我看不到任何放入日志语句等的方法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:44:21.837

这篇文章可能对您有所帮助：[https](https://stackoverflow.com/a/5458247/498531) ://stackoverflow.com/a/5458247/498531 。基本上，它允许您覆盖内置的 Seam 组件以打印任何抛出异常的堆栈跟踪。有一次我无意中有两个`toString()`方法互相调用，而我刚刚从日志中得到的只是一个 StackOverflowError，没有引用我的任何代码行，这对我很有帮助。

# c# - X509Store.Certificates.Find with validOnly to true 不返回中间机构证书

> ID：15528427
> 
> 赞同：5
> 
> 时间：2013-03-20T15:52:27.743
> 
> 标签：c#, azure, x509certificate

我在以下位置安装了证书：

*   证书（本地计算机）
    *   受信任的根证书颁发机构
        *   证书

此代码使证书有效。

```
X509Store certStore = new X509Store(StoreName.CertificateAuthority, StoreLocation.LocalMachine);
certStore.Open(OpenFlags.OpenExistingOnly | OpenFlags.ReadOnly);

try {
    var oAuthRootCertificateList = certStore.Certificates.Find(findType, findValue, true);
    oauthRootCertificate = oAuthRootCertificateList[0];
} catch (Exception ex) {
    Trace.TraceError(ex.Message);
} finally {
    certStore.Close();
} 
```

* *（findType 和 findValue 之前在代码中设置）*

一切都很好，代码也很好。

现在我已经从“受信任的根证书颁发机构”中删除了证书并安装在：

*   证书（本地计算机）
    *   中级认证机构
        *   证书

因为 Azure 不允许我在受信任的根分支上部署证书。

现在，代码失败了。我必须将最后一个参数（validOnly）从`true`to更改`false`为使其运行。

[您可以在此处](http://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2collection.find.aspx)查看该`Find`方法的帮助。

知道为什么它不运行以及如何解决它吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:28:01.970

中间存储中的证书用于证书链验证目的。如果您的证书是自签名证书，则其颁发者需要存在于受信任的根授权中，证书验证才能成功。

仅仅将它放在中间证书颁发机构是不够的。

# google-drive-api - Google Drive Live API：协作文档的服务器导出

> ID：15528430
> 
> 赞同：3
> 
> 时间：2013-03-20T15:52:36.263
> 
> 标签：google-drive-api

我需要构建具有以下功能的应用程序：

1.  统计和源数据显示在简单的 HTML 页面上
2.  可以从该 HTML 页面添加一些缺少的源数据（数据将是精确的数值和描述性文本）
3.  可以从这些页面添加一些新的源数据
4.  确认和验证的数据将无法通过 HTML 界面进行编辑
5.  数据通过 HTML 界面存储并持续可用
6.  定期从界面添加/更改的数据需要被拉回源数据 - 但以非常受控的方式。所有数据更改和提交都需要验证和检查——有些会触发模型的重新运行（其中一些需要几个小时才能运行）。

在概述架构方面，我有：

*   存储和管理数据的大型数据库 - 这是为导入过程和分析而设计的。它不适合 Web 演示或界面
*   操作数据以进行导入和分析的代码服务器
*   用作代理的前端服务器为 S3 添加安全层
*   在 S3 上收集生成的 html 文件，呈现所需的数据

在阅读 Google Drive Realtime API 之前，我的粗略计划是简单地从 HTML 界面序列化数据并发布到 S3。然后，导入服务器脚本将检查新信息、抓取、检查、记录并将其处理到主数据集中。

然而，这个基本过程意味着一旦从网页提交更改 - 它们就会从用户视图中丢失，直到它们被后端处理。

借助 Google Drive Realtime API，我似乎可以两全其美。

但是，要使上述工作正常进行，我需要能够从代码服务器访问代码中的协作文档并导出数据。

Realtime API 提供了对 Export 的 javascript 访问权限并移交给一个函数 - 但是在我的用例中，我想从 Collaboration Document 中自动执行 Export。

据我所知，Google Drive SDK 没有提供任何有关下载/导出“协作文件”类型文件的提示。

有哪些“非浏览器用户”触发方法用于与协作文档交互并导出它们？

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:46:13.443

目前不支持服务器端导出。您可以做的是将实时模型保存到常规驱动器文件中，并使用标准驱动器 API 从中读取。请参阅[https://developers.google.com/drive/realtime/models-files](https://developers.google.com/drive/realtime/models-files)，了解有关设置实时模型和 Drive Files 之间交互的不同方法的一些讨论。

# javascript - iphone相机访问移动网页

> ID：15528433
> 
> 赞同：1
> 
> 时间：2013-03-20T15:52:36.623
> 
> 标签：javascript, iphone, html

对于一个项目的移动网站，我需要添加一个允许访问 Iphone 相机的图像上传按钮。例如，用户确实有自己的个人资料，并且想在其中添加头像，他应该可以制作照片，直接上传到数据库。我找到了一些可以访问照片库的脚本，但我想访问相机，它会自动上传图片......

> 拍照并上传

类似的东西！任何帮助深表感谢，

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:56:01.333

如果您有 iOS 6 或更高版本，您可以使用

```
 <input type="file" accept="image/*" capture="camera"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:41:30.840

对于 iOS < 6，您始终可以自己实现一个图像选择器，然后将捕获的图像数据作为 base64 编码数据注入到 html 中。

拍照，base 64编码你捕获的图像数据，然后，用jQuery，应该很简单：

```
[self.webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"$('#imagePlaceholder').attr('src','data:image/png;base64,%@');", base64ImageDataString]]; 
```

# css - 如何在缩略图顶部添加 html 元素

> ID：15528434
> 
> 赞同：1
> 
> 时间：2013-03-20T15:52:37.587
> 
> 标签：css

我在画廊中有一个缩略图列表，我想知道如何制作这样的东西？

![在此处输入图像描述](../Images/5027fb1d52de70119317b44c4348a3d9.png)

在我的理解中，我认为可能的唯一方法是将缩略图作为 div 内的背景图像，并将这些元素显示在其顶部。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:03:54.793

您可能可以使用图像周围的包装器 div 来实现类似的效果，其中 div 包含您的叠加内容作为图像的兄弟姐妹：-

```
<div class='image'>
  <img src='' />
  <div class='image__overlay'></div>
</div> 
```

那么你的 CSS 会是这样的：-

```
.image {
  position: relative;
}
.image__overlay {
  position: absolute;
  top: 0;
  left: 0;
} 
```

如果这是您的目标，您可以使用 a 隐藏叠加层，`display: none`并且仅使其显示在 div.image 的 :hover 上。

# php - 如何使用文件picker.io将文件传递给php

> ID：15528436
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:52:41.313
> 
> 标签：php, file-upload, filepicker.io

我很高兴知道如何使用 file picker.io 通过 post 方法将单个 mp3 文件传递​​给 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T21:17:08.093

是的，这是可能的：

```
>>> curl -X POST -F fileUpload=@filename.txt https://www.filepicker.io/api/store/S3?key=MY_API_KEY
{"url": "https://www.filepicker.io/api/file/WmFxB2aSe20SGT2kzSsr", "size": 234, "type": "text/plain", "filename": "tester.txt", "key": "1ilWxmaRRqhMd2vSbSyB_tester.txt"} 
```

或者

```
>>> curl -X POST -d url="https://www.filepicker.io/static/img/watermark.png" https://www.filepicker.io/api/store/S3?key=MY_API_KEY
{"url": "https://www.filepicker.io/api/file/N49i6hPRBeropWnCWOLw", "size": 8331, "type": "image/png", "filename": "watermark.png", "key": "a1RyBxiglW92bS2SRmqM_watermark.png"} 
```

[https://developers.filepicker.io/docs/web/#fpurl-store](https://developers.filepicker.io/docs/web/#fpurl-store)上的完整文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:19:09.533

我认为当您使用 datepicker.io 时，所选文件会自动存储在 datepicker 服务器中。然后，您可以从公共 url 读取文件（API 在响应中提供公共 url）并存储它（例如使用 CURL？）

# jquery - jQuery ajax 在 IE、Chrome 和 FF 中工作……但不是 Safari（使用 MVC 4 的服务器）

> ID：15528451
> 
> 赞同：0
> 
> 时间：2013-03-20T15:53:08.963
> 
> 标签：jquery, asp.net-mvc-4

我有一个 MVC 4 应用程序，它正在接收数据并将 Json 字符串返回给客户端。该代码在 Chrome、Firefox 和 IE 中完美运行（仅针对 8+ ......但我实际上已经看到它在 IE7 中运行）。但是，它不能在 Windows 上的 Safari 5.x 中工作（我没有 Mac ......所以我无法测试它）。

这是 jQuery ......（使用 1.9.1 ......谢谢 Tim B James 的提问......之前忘了提）

```
$.ajax({
        type: 'POST',
        url: '@Url.Content("~/Request/ValidateApprover/")',
        data: { 'name': input },
        success: function (json) {
          //do some work here
        },
        error: function () {
          //tell the user that it failed here
        }
      }); 
```

这是我的控制器被调用...

```
[HttpPost]
public ActionResult ValidateApprover()
{
  string emailAddress = "";
  string name = this.Request.Form["name"]; //<--the form is blank using Safari 5

  if (String.IsNullOrEmpty(name) || String.IsNullOrWhiteSpace(name))
    return Json(new { result = "blank" }, "application/json", JsonRequestBehavior.AllowGet);

  //...keep going if you got a value other than blank 
```

当我尝试使用 读取控制器中的结果`this.Request.From["name"]`时，使用 Firefox、Chrome 和 IE 时我很好……但使用 Safari 时我得到一个空白表单值。

**编辑 1：**我写了一个非常简单的 PHP 页面来检查数据是否在 Safari 中正确传递。看来是……所以看起来 IIS 和 Safari 之间的问题是问题所在。

**编辑 2：**我编写了一个非常简单的 MVC 应用程序进行测试，并且在该测试中遇到了数据......这让我相信这是 Safari 中的某种 HTML 验证。我还在此编辑中删除了已发布的请求标头数据。

有什么额外的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T15:55:18.310

这就是我使用的：

功能集内容（内容文件）{

```
if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp = new XMLHttpRequest();
}
else{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange = function(){
    if (xmlhttp.readyState==4  && xmlhttp.status==200 ){
        //alert(xmlhttp.responseText);
      $('#*******').html(xmlhttp.responseText);
    }
}
xmlhttp.open("GET",contentfile,true);
xmlhttp.send(); 
```

}

它适用于所有浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T12:46:21.423

问题在于 Safari 对 Kerberos 身份验证的处理，但我找到了解决方案。

[http://forums.iis.net/t/1182376.aspx/1](http://forums.iis.net/t/1182376.aspx/1)

IIS 上的那个线程描述了`Negotiate`（即`Kerberos`）身份验证在 Safari 中处理不当。您必须禁用`Negotiate`作为提供者。

在 IIS（我使用的是 IIS 7.5）中，点击您的站点，然后`Authentication`（双击）→ `Windows Authentication`（单击）→ `Providers`（在右侧）→`Remove Negotiate and leave NTLM`

这解决了我在 Safari 上的所有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T06:56:30.633

它也对我有用.. 我正在使用 IIS 6.0，我已经完成了。

然后以管理员身份运行“命令提示符”

cd c:\inetPub

cd adminScripts

cscript adsutil.vbs 获取 w3svc/NTAuthenticationProviders

cscript adsutil.vbs 设置 w3svc/NTAuthenticationProviders “NTLM”

重新启动 IIS。

# ios - FB iOS SDK 3.2：为什么我需要访问令牌来记录转换像素？

> ID：15528452
> 
> 赞同：3
> 
> 时间：2013-03-20T15:53:11.590
> 
> 标签：ios, facebook, facebook-ios-sdk, facebook-insights, facebook-ads-api

我正在尝试通过调用使用 Facebook SDK iOS 3.2 记录转换像素

```
[FBInsights logConversionPixel:<pixelID> valueOfPixel:0] 
```

现在...

在我知道用户使用 facebook 登录之前，我正在执行此操作，因此不确定我是否有一个活动的 FBSession 以及该应用程序的用户访问令牌。

结果我收到以下错误：

```
{
        code = 100;
        message = "(#100) Graph API for app id <appID> called, but token has app id 0";
        type = OAuthException;
} 
```

如果用户登录到 facebook 然后记录转换，一切正常。

我不明白的是，为什么需要从授权会话中记录转换像素，在应用程序的 php 代码中，我可以在`https://www.facebook.com/offsite_event.php?id=<pixelID>&amp;value=0`没有任何访问令牌的情况下简单地访问它，它将标记我的转换像素。

关于如何在没有活动会话的情况下使用 FBInsights 的任何想法/想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-25T13:36:31.553

如果这个问题仍然存在（可能对某人来说是实际的），那么您可以尝试为 FBSettings 类设置客户端令牌

```
[FBSettings setClientToken:@"<your app client token>"]; 
```

您可以在应用设置页面 - 高级 - 安全部分获取客户端令牌。应该有设置为 OFF 的检查点“客户端令牌”。只需将其设置为 ON 并保存更改，然后您将获得客户端令牌

# sql - 从文本文件中读取，然后将记录插入到 oracle 表中

> ID：15528453
> 
> 赞同：0
> 
> 时间：2013-03-20T15:53:13.393
> 
> 标签：sql, oracle, plsql

嗨，我有一个表学生，其中有几个空字段。Student# 是该表中的主键。我想通过从学生表中选择数据、从 excel 或 doc 文件中填充空字段并插入到 Officerecord 表中来将数据插入到表 Officerecord 中。

```
Student
=======
Student #   name     Course    age
1            Jess     ENG       19
2            Jane               20
3            Kevin    MAT       19
4            Rob                21 
```

上表中缺少学生 2 和学生 4 的课程数据。我们有一个包含学生编号和课程数据的课程文件。我想从文件中读取数据并将这条记录插入到“Officerecord”表中，如下所示：

```
Officerecord
===========

OFFICE#        STUDENT#           COURSE 
```

在此表中插入数据时，我不希望任何行包含与学生相关的空值。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:31:27.340

SQL Developer 可以将 Excel 文件 (.xls / .xlsx) 直接导入表中，但您需要提前定义表结构。只需右键单击列表中的表格，选择导入数据，选择文件，然后将 excel 列与表格列匹配即可。

理想情况下，您会使用外部表进行导入，但我不相信您可以轻松地使用外部表来操纵电子表格。

无论如何，一旦您加载了两组数据，您就可以对 Student 表进行简单的更新以填充空值。

```
UPDATE Student
SET (COURSE) =
( SELECT COURSE
  FROM Officerecord
  WHERE Student.Student# = Officerecord.Student# )
WHERE COURSE IS NULL; 
```

请注意，如果您在 Officerecord 中有一个学生的两个条目，这将失败，但您的示例不清楚您希望如何处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:21:23.253

从源数据文件中复制文本并从中创建一个脚本，该脚本是一系列更新语句。

程序员文件编辑器应该在这里为您提供帮助 - 记录一个将原始数据转换为表单语句的宏 `update student set course = 'myCourse' where StudentNo = 99 and course is null;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-07T11:55:28.513

您可以为 office_records 文件创建一个外部表，并将此表与学生表连接，并对最终 office_records 表的输入进行必要的更改。

外部表的优点是数据变化时只需替换文件即可，无需手动加载文件。

即使用户没有使用 sql developer 或 Toad 从文件插入记录的访问/知识，这也会有所帮助。

# workflow-foundation-4 - Workflow Foundation 4.5 自定义数据库进行跟踪

> ID：15528458
> 
> 赞同：2
> 
> 时间：2013-03-20T15:53:19.290
> 
> 标签：workflow-foundation-4

我打算使用 Windows Workflow Foundation 4.5。我需要跟踪自定义数据库中的信息。列表将显示在用户界面中（我的任务、所有任务）。拥有一个通用系统的最佳方法是什么，我不需要将自定义活动添加到工作流中。

*   创建的工作流
*   工作流程结束
*   工作流终止
*   接收活动开始（在表格中记录自定义记录）
*   接收已完成的活动 --> 书签事件？？我还需要将活动实例 ID 与数据库中的记录相关联。...

我是否为此使用跟踪参与者，或者我可以利用工作流服务主机的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:19:57.043

跟踪参与者是这里选择的解决方案......它非常灵活。您可以使用 WorkflowInstanceRecord 获取工作流实例的状态，并使用 ActivityStateRecord 获取活动状态。两条记录都有 instanceId 来关联它们。

您还可以使用 CustomTrackingRecord 在您的代码活动中跟踪自定义跟踪。

我们使用了很长时间，性能非常好。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:56:19.930

您无需将自定义活动添加到您的工作流程中。您可以实现 SQL 跟踪参与者。这是一个示例：http: [//msdn.microsoft.com/en-us/library/ee622983.aspx](http://msdn.microsoft.com/en-us/library/ee622983.aspx)

# sql - 汇总 UNION 后的重复项

> ID：15528464
> 
> 赞同：1
> 
> 时间：2013-03-20T15:53:33.800
> 
> 标签：sql, sql-server

我觉得可能有一种更短的方式来查询以下内容。

这种结构在几个存储过程中重复出现。
我`CROSS JOIN`在表格的目标元素和 DimDate 视图之间执行一个 - 每个度量都为 0。然后`UNION`将结果与实际结果。然后在外部查询中，如果出现重复，它会全部聚合。

有没有更有效的方法来解决这个问题？

```
SELECT Name,
       DateKey,
       Measure1 = SUM(Measure1),
       Measure2 = SUM(Measure2)
FROM (
    SELECT  Name,
        DateKey,
        Measure1 = SUM(Measure1),
        Measure2 = SUM(Measure2)
    FROM    WH.dbo.tb_r12028dxi_Data
    GROUP BY SearchName,
        DateKey
    UNION 
    SELECT  Name,   
        d.DateKey,
        0,
        0
    FROM    WH.dbo.vw_DimDate d
        CROSS JOIN
        WH.dbo.tb_r12028dxi_Data a  
    WHERE   d.DayMarker >= CONVERT(DATETIME,CONVERT(CHAR(6),DATEADD(MM,-24,GETDATE()),112) + '01',112)
    GROUP BY a.Name,    
        d.DateKey
    ) x
GROUP BY Name,
    DateKey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T15:57:55.527

不完全确定它是否更有效，但您可以尝试在查询中只执行`GROUP BY`/`SUM`一次。

```
SELECT Name,
       DateKey,
       Measure1 = SUM(Measure1),
       Measure2 = SUM(Measure2)
FROM (
    SELECT  SearchName AS Name,
            DateKey,
            Measure1,
            Measure2
    FROM    WH.dbo.tb_r12028dxi_Data
    UNION 
    SELECT DISTINCT
            Name,   
            d.DateKey,
            0,
            0
    FROM    WH.dbo.vw_DimDate d
            CROSS JOIN WH.dbo.tb_r12028dxi_Data a  
    WHERE   d.DayMarker >= CONVERT(DATETIME,CONVERT(CHAR(6),DATEADD(MM,-24,GETDATE()),112) + '01',112)
    ) x
GROUP BY Name,
         DateKey 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:13:32.663

你可以做一个左外连接。它可能看起来并不简单，但它比 UNION 更容易评估数据库。

```
SELECT x.Name,
       x.DateKey,
       Measure1 = SUM(sum_table.Measure1),
       Measure2 = SUM(sum_table.Measure2)
FROM (SELECT distinct Name, d.DateKey
      FROM    WH.dbo.vw_DimDate d, WH.dbo.tb_r12028dxi_Data a  
      WHERE   d.DayMarker >= CONVERT(DATETIME,CONVERT(CHAR(6),DATEADD(MM,-24,GETDATE()),112) + '01',112)) x
  LEFT OUTER JOIN WH.dbo.tb_r12028dxi_Data sum_table
    ON x.Name = sum_table.Name AND x.DateKey = sum_table.DateKey
GROUP BY x.Name, x.DateKey 
```

请注意，这假设您在 WH.dbo.tb_r12028dxi_Data 中需要的每个值都将在交叉连接中。否则，您需要完全外连接而不是左外连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:14:12.587

我不确定我是否完全正确，因为我没有可以使用的结构，但这可能更有效。它使用的 UNION ALL 总是比 UNION 更有效。它能够做到这一点是因为 UNION 的第一部分被分组（没有重复），第二部分正在检查第一部分以确保它没有任何重复。我质疑效率的唯一原因是因为 UNION 的第一部分可能必须运行两次。

```
WITH DataResults (
SELECT  Name,
    DateKey,
    Measure1 = SUM(Measure1),
    Measure2 = SUM(Measure2) 
FROM    WH.dbo.tb_r12028dxi_Data
GROUP BY SearchName,
    DateKey
    )
SELECT * FROM DataResults
UNION ALL 
SELECT DISTINCT Name,   
    d.DateKey,
    0,
    0
FROM    WH.dbo.vw_DimDate d
CROSS JOIN WH.dbo.tb_r12028dxi_Data a  
WHERE   d.DayMarker >= CONVERT(DATETIME,CONVERT(CHAR(6),DATEADD(MM,-24,GETDATE()),112) + '01',112)
  -- Check for existence within the upper part o fthe union.
  AND NOT EXISTS (SELECT 1 FROM DataResults 
            WHERE a.Name = DataResults.Name -- I'm making an assumption here that name is in tb_r12028dxi_Data.  You didn't say.
              AND d.DateKey = DataResults.DateKey )
GROUP BY a.Name,    
    d.DateKey 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:15:48.583

pswg 方法的一种变体——我认为这*可能*更有效：

```
SELECT Name,
       DateKey,
       Measure1 = SUM(Measure1),
       Measure2 = SUM(Measure2)
FROM (SELECT SearchName AS Name,
             DateKey,
             Measure1,
             Measure2
      FROM   WH.dbo.tb_r12028dxi_Data
      UNION 
      SELECT Name,   
             d.DateKey,
             0,
             0
      FROM   WH.dbo.vw_DimDate d
      CROSS JOIN (SELECT DISTINCT Name FROM WH.dbo.tb_r12028dxi_Data) a  
      WHERE d.DayMarker >= CONVERT(DATETIME,CONVERT(CHAR(6),DATEADD(MM,-24,GETDATE()),112) + '01',112)
     ) x
GROUP BY Name, DateKey 
```

# google-apps-script - Google Apps 脚本访问 Drive SDK API

> ID：15528467
> 
> 赞同：6
> 
> 时间：2013-03-20T15:53:40.070
> 
> 标签：google-apps-script, google-drive-api

有没有办法使用 Google Apps 脚本中的 Google Drive API。我知道 DocsList 服务，它允许您查看文件夹和文件，但是 Google Drive 中的所有其他 API（文件、关于、更改、儿童、父母、权限、修订、应用程序、评论、回复）呢？例如，是否可以通过 API 访问从 Google Apps 脚本向文件添加评论。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-10T04:58:35.767

Apps 脚本能够访问 Google API，但您需要明确启用它们才能使用它们。

在代码编辑器中，选择**RESOURCES**、**ADVANCED GOOGLE SERVICES**

![高级谷歌服务](../Images/e2402c2ff39e8be1af31c8949e1ee857.png)

单击关闭按钮，打开服务。

在关闭对话框之前，单击底部的链接以打开 API Manager。

![API 管理器](../Images/b32569da32555e181d74268070613bd7.png)

完成这两个步骤后，即可在 Apps 脚本中使用 Drive API。键入关键字`Drive`然后键入句点，可用的方法将显示在列表中。

方法

*   get - 按 ID 获取文件的元数据。
*   insert - 插入一个新文件。
*   patch - 更新文件元数据。此方法支持补丁语义。
*   update - 更新文件元数据和/或内容。
*   复制 - 创建指定文件的副本。
*   delete - 按 ID 永久删除文件。跳过垃圾。
*   list - 列出用户的文件。
*   touch - 将文件的更新时间设置为当前服务器时间。
*   垃圾箱 - 将文件移动到垃圾箱
*   untrash - 从垃圾箱中恢复文件。
*   watch - 开始观察文件的变化。
*   emptyTrash - 永久删除用户的所有垃圾文件。

[https://developers.google.com/drive/v2/reference/files#methods](https://developers.google.com/drive/v2/reference/files#methods)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-21T03:49:13.890

[**(Google-Apps-Script=GAS) Drive Services** added 2013.05.13](https://developers.google.com/apps-script/release_notes#may_13_2013)（将在 2 天后的 2013 Google I/O 上宣布）显然 - 完全设计为替换之前的 API（DocsList）并允许 GAS 访问 Google Drive SDK，虽然这些官方文档目前没有提到（为什么？）该功能，但新的新 API 名称“Drive”肯定是建议的，并且[谷歌的精彩演示视频“Integrate Google Drive with Google Apps Script — Google I/O 2013”](https://developers.google.com/events/io/sessions/325412094)​​和“Drive SDK”*在搜索功能中被*称为 searchFiles(String)。

并且 Drive Services 有效（我正在使用它；虽然我可以想到许多改进，但没有发现任何内存错误），包括它适用于有用的应用程序（请参阅上面的视频，了解我最令人印象深刻的应用程序之一）见过）但它并不完整（包括不公开完整的 Drive SDK），包括：

1.  它（还没有？）不允许访问先前版本的内容（如视频加（增强请求：Google 搜索“问题 2811：使用 DriveApp 访问文档修订版”），
2.  控制内容的索引状态和方法，
3.  无法获得文件或文件夹访问者的列表（显然是故意说视频；但使用前面提到的 DocsList 或库似乎是一种解决方法）。

我会提供更多链接来提供帮助，但我是这里的新发帖者，所以编辑告诉我“你需要至少 10 个声望才能发布超过 2 个链接。”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T21:11:22.767

您还应该看看[这个](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/driveservice)由 GAS TC 之一的 Romain Vialard 编写的库。

它提供了气体中无法直接使用的功能，或者 - 至少 - 不那么简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:27:39.063

是的，这是可能的。

查看[Class File](https://developers.google.com/apps-script/class_file)的文档，其中包括用于获取和/或更改您列出的大多数属性的函数。

有关获取文件和文件夹的某些此类信息的代码示例，请参阅[此答案](https://stackoverflow.com/a/15194001/1677912)。

# c++ - 如何在 C++ 中读取 .dat 文件

> ID：15528468
> 
> 赞同：-10
> 
> 时间：2013-03-20T15:53:45.130
> 
> 标签：c++, sql-server

如何在 C++ 中编写代码读取 .dat 文件，这些文件包含文本数据（用分隔符 | 组织的数字和字符）。fstream 标准库是最佳选择吗？我们如何定义文件路径。第二个问题是，如果我想读取这些文件并将它们加载到 SQL Server 数据库中，它会是不同的机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:09:35.433

是的，您可以为此使用 fstream。

下面是一些代码，可用于将数据拆分为由分隔符分隔的数组。只需将 DELIMITER 更改为您的分隔符。

```
#include <iostream>
using std::cout;
using std::endl;

#include <fstream>
using std::ifstream;

#include <cstring>

const int MAX_CHARS_PER_LINE = 512;
const int MAX_TOKENS_PER_LINE = 20;
const char* const DELIMITER = " ";

int main()
{
  // create a file-reading object
  ifstream fin;
  fin.open("data.txt"); // open a file
  if (!fin.good()) 
    return 1; // exit if file not found

  // read each line of the file
  while (!fin.eof())
  {
    // read an entire line into memory
    char buf[MAX_CHARS_PER_LINE];
    fin.getline(buf, MAX_CHARS_PER_LINE);

    // parse the line into blank-delimited tokens
    int n = 0; // a for-loop index

    // array to store memory addresses of the tokens in buf
    const char* token[MAX_TOKENS_PER_LINE] = {}; // initialize to 0

    // parse the line
    token[0] = strtok(buf, DELIMITER); // first token
    if (token[0]) // zero if line is blank
    {
      for (n = 1; n < MAX_TOKENS_PER_LINE; n++)
      {
    token[n] = strtok(0, DELIMITER); // subsequent tokens
        if (!token[n]) break; // no more tokens
  }
}

    // process (print) the tokens
    for (int i = 0; i < n; i++) // n = #of tokens
      cout << "Token[" << i << "] = " << token[i] << endl;
    cout << endl;
  }
} 
```

要将数据存储到数据库中，请查看[MySql](http://dev.mysql.com/doc/refman/5.0/en/tutorial.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T15:59:34.527

好吧，你可以自己用谷歌搜索它..但是：只需做一些教程。例如：[http://www.cplusplus.com/doc/tutorial/files/](http://www.cplusplus.com/doc/tutorial/files/) 而不是 .txt 你只需打开 .dat （因为你说它只包含文本数据..）

为了存储在 SQL 数据库中，我假设它现在是 MySQL：http: [//www.nitecon.com/tutorials-articles/develop/cpp/c-mysql-beginner-tutorial/](http://www.nitecon.com/tutorials-articles/develop/cpp/c-mysql-beginner-tutorial/)

对于步骤：打开文件，打开数据库连接，执行 INSERT INTO .... 完成。

# hardware - 用户空间 PCI BAR 访问在每个偏移处返回 0xFF

> ID：15528469
> 
> 赞同：3
> 
> 时间：2013-03-20T15:53:51.253
> 
> 标签：hardware, linux-device-driver, pci

我正在尝试从用户空间访问 PCIe SATA 桥的 PCI BAR (#5)，但是每当我`mmap()`通过 BAR 从 BAR`/sys/bus/pci/devices/.../resource5`时，文件中的每个偏移量都会得到 0xFF。其他设备（例如 Intel SATA 控制器）以敏感数据响应。

BAR 的显示`lspci -vv`与 Intel 控制器相同（只是地址不同）。

```
Region 5: Memory at f7b10000 (32-bit, non-prefetchable) [size=2K] 
```

两个设备都与`ahci`驱动程序匹配，否则 SATA 控制器工作 - 我可以访问附加的磁盘。

我正在尝试从用户空间访问，因为我现在只想通过实验戳一下寄存器。为此，我使用了[pciem](https://github.com/billfarrow/pcimem)的修改形式，更改为访问我关心的寄存器。但是，任何偏移量都会返回 0xFF，因此即使使用普通 pciem：

```
pcimem /sys/bus/pci/devices/0000\:01\:00.0/resource5 0 w 
```

返回 0xFFFFFFFF（“w”表示读取的“字”，因此是 4 个字节）。

当其他设备可以访问时，是什么阻止了此设备的 BAR5？让这种用户空间访问 PCI BAR 是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:44:14.523

不确定这会有多大帮助，但当我为新的 PCIe FPGA 设备编写驱动程序时，我看到了同样的事情。

当设备出现错误时，MMAP-ed PCI BAR 内存空间将返回 0xFFFFFFFF (-1)。我能够解决此问题的唯一方法是通过计算机的完全电源重置来重置卡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T10:39:54.367

我在调试 NVMe 硬盘热插拔时遇到了同样的问题。如果在 GRUB 提示之前 PCIe 插槽中有一个硬盘，您可以在该插槽中热插拔其他驱动器，如果没有，pci_ioremap_bar() 返回读取所有 0xffffffff 的内存区域。奇怪的狗屎。

# git - 构建树时出错，子模块搞砸了

> ID：15528471
> 
> 赞同：0
> 
> 时间：2013-03-20T15:53:53.927
> 
> 标签：git

我是 git 新手，可能在此过程中搞砸了一些事情。

我尝试尽可能多地使用 tortoisegit，因为我已经习惯了 tortoisesvn，但是我也在 git bash 中工作了一些。

所以目前我持有一个目录，我们称之为“项目”，即一个回购。在那里我有 /Libs/Memflex ，其中 Memflex 是一个子模块，链接到我的 Memflex 分支（在 github 上）。我花了一段时间才弄清楚在克隆之前我需要一个叉子:-)

子模块似乎工作得很好，但是现在当我尝试提交我的项目时，它看起来像这样：[http ://db.tt/tknLPCSU](http://db.tt/tknLPCSU)

如果您在文件列表中仔细查看，则在 Memflex（子模块）的上半部分中有一些文件，其余的则为非版本

我认为视觉工作室的新 git 工具为我做到了这一点。（在外部项目中提交了一些 memflex 的东西）

但是现在当我单击确定时，我得到了这个结果：[http](http://db.tt/lXgaTkdq) ://db.tt/lXgaTkdq 所以很明显 git 对签入子模块的东西不满意（尽管有些似乎已经被版本化了）

经过一段时间的谷歌搜索后，我需要一些帮助来解释子模块文件应该或不应该如何签入主项目（我已将子模块文件推送到我的 fork 顺便说一句）。

我该如何解决这种情况？

通过简单地取消选中 Memflex 和下面的所有内容，我在提交时获得了成功，因此我现在可以使用它，但我想了解它为什么会这样出现以及如何处理它。

我应该添加忽略还是该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:02:56.213

我建议您认真阅读[git submodules 文档](http://git-scm.com/book/en/Git-Tools-Submodules)。

很容易误解整个子模块的事情，我怀疑你有；阅读该页面，如果您之后有其他问题，请告诉我。

# url - 统一资源定位器和通用资源定位器是一回事吗？

> ID：15528473
> 
> 赞同：4
> 
> 时间：2013-03-20T15:54:02.207
> 
> 标签：url, resources, uniform

与此一起工作，它们在技术上是相同的还是不同的？如果不同，那又如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-04T21:25:38.683

这很令人困惑，我只是研究了这个话题。命名存在混淆。一开始 RFC 的 URI Universal Resource Identifier 诞生于 w3.org 的统一资源定位器 (URL)，许多人混淆了这些术语，像我这样的老狗仍然称它们为 Universal Resource Locator。虽然正确的术语是；制服的一切。URI URL 和 URN 是：统一资源（标识符、定位器和名称）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T15:55:47.383

> 在计算中，统一资源标识符 (URI) 是用于标识名称或 Web 资源的字符串

VS

> 统一资源定位器，简称URL，也称为网址，是构成对资源的引用的特定字符串。

没听说过`UNIVERSAL`但是这里是通用的，URL和URI，我猜Universal可能是同义词

这家伙在他的[文章](http://www.cefls.org/esenior_2_3_understanding_url.htm)中使用了 Universal

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T20:09:24.163

这可能是一个老问题，但它们是相同的。如果您从未听说过 Universal Resource Locator，那么您可能还很年轻并且不记得拨号上网的日子，这是可以理解的。在被称为资源之前，它是通用的。两者都没有错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:56:08.620

正确的术语是统一资源定位器：参考： [http ://en.wikipedia.org/wiki/Uniform_resource_locator](http://en.wikipedia.org/wiki/Uniform_resource_locator)

# sql - VB.NET & SQL：ConnectionString 属性尚未初始化

> ID：15528482
> 
> 赞同：0
> 
> 时间：2013-03-20T15:54:28.090
> 
> 标签：sql, vb.net, connection-string

我正在尝试创建一个搜索，其中 SQL 查询取决于一个单选按钮和一个文本框。表格、文本框和单选按钮都在同一个表单上。我正在使用 Microsoft Visual Studio 2012 for Web，并尝试更改表单上 GridView 对象的数据源。但是，我不断收到错误消息：

***ConnectionString 属性尚未初始化。***

我怎样才能解决这个问题？下面是我的完整代码。

```
Protected Sub btnSearch_Click(sender As Object, e As ImageClickEventArgs) Handles btnSearch.Click
    Dim sqlQuery As String = ""
    If radClient.Checked = True Then
        GridView1.Visible = False
        sqlQuery = "SELECT * FROM Sales WHERE ClientID = '" & txtSearch.Text & "'"
    ElseIf radItem.Checked = True Then
        GridView1.Visible = False
        sqlQuery = "SELECT * FROM Sales WHERE ItemID = '" & txtSearch.Text & "'"
    ElseIf radUser.Checked = True Then
        GridView1.Visible = False
        sqlQuery = "SELECT * FROM Sales WHERE UserID = '" & txtSearch.Text & "'"
    ElseIf radUser.Checked = False And radClient.Checked = False And radItem.Checked = False Then
        ErrorLabel.Text = "Error: You have not chosen a search criteria."
        Return
    End If
    SqlDataSource3.SelectCommand = sqlQuery
    SqlDataSource3.DataBind()
End Sub 
```

感谢@Steve、@MuhammadOmar、@Westie 和@AmitApollo 对我之前线程中的代码的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T07:55:07.637

你应该这样做

做一个全局连接变量

```
dim con as new SQLConnection
con.connectionsting = "Set your connection string"
con.open 
```

当你写你的代码然后写

```
con.close 
```

它会解决你的问题

帮助它有帮助。

# c# - C# - 我想在不使用 word.interop 的情况下打印 word 文档

> ID：15528484
> 
> 赞同：0
> 
> 时间：2013-03-20T15:54:28.357
> 
> 标签：c#, asp.net-mvc

我不想在服务器上安装 word，所以我不想使用 word.interop。

我想要做的是在我的网络应用程序中打印一个 word 文档。我的课看起来像这样；

```
namespace SCD4.Models
{
    using Novacode;

    public class DocumentDocX
    {
        public DocumentDocX(string inputFile)
        {
            this.InputFile = inputFile;
        }

        public string  InputFile { get; set; }

        public void OutputLetter(string outputFile, string placeholder, string newText)
        {
            using (var document = DocX.Load(this.InputFile))
            {
                document.ReplaceText(placeholder, newText);
                document.SaveAs(outputFile);
                PrintDocument(outputFile);
            }
        }
    }
} 
```

DocX 是我从 CodePlex 获得的一个程序集，易于使用，但不打印 word 文档。我还没有编写我的 PrintDocument 方法。我应该怎么写？

# java - 如何使用apache poi从ppt，pptx文件中提取文本，除了页脚，幻灯片编号？

> ID：15528488
> 
> 赞同：2
> 
> 时间：2013-03-20T15:54:32.977
> 
> 标签：java, apache-poi, powerpoint, extract

我知道如何像这样使用 apache poi 从 ppt 文件中提取文本

```
 InputStream fis=new FileInputStream("abcd.ppt");
        HSLFSlideShow show=new HSLFSlideShow(fis);
        SlideShow ss=new SlideShow(show);
        Slide[] slides=ss.getSlides();
        StringBuilder builder = new StringBuilder();
        for(int x=0; x < slides.length; x++)
        {
            TextRun[] runs = slides[x].getTextRuns();
            for(int j=0; j<runs.length; j++) {
                TextRun run = runs[j];
                if(run != null) {
                    String text = run.getText();
                    builder.append(text);
                }
            }
        } 
```

但它会提取我不想要的所有页脚、幻灯片编号

那么如何提取除页脚和幻灯片编号之外的文本

提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-06-24T08:15:01.493

我建议您查看 JPresentation。他们的一个例子展示了如何从所有幻灯片中提取所有图像和文本：http: [//www.independentsoft.de/jpresentation/tutorial/exportallslides.html](http://www.independentsoft.de/jpresentation/tutorial/exportallslides.html)

API 接缝非常容易。

# android - 实现 OnItemClickListener，但 onItemClick 不起作用

> ID：15528490
> 
> 赞同：2
> 
> 时间：2013-03-20T15:54:41.987
> 
> 标签：android, onitemclicklistener, onitemclick, focusable

在 MainActivity 中有 onItemClick，Activity 实现了 OnItemClickListener。一切都很简单，这个监听器的结果是当用户触摸 ListView 的一个项目时，在屏幕上打印一条 Toas 消息。但是onItemClick函数不起作用，为什么？[logCat 没有错误] 在此先感谢。

这是我的主要活动代码：

```
package com.prendonota;
import java.util.List;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;
import com.prendonota.activeRecord.Nota;
import com.prendonota.crud.NotaCrud;

public class MainActivity extends Activity implements OnItemClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        //*** identifico la ListView  che ho usato nell'xml
        ListView listView = (ListView)findViewById(R.id.listaNote);

        //*** accedo al DB per prendere le note
        NotaCrud crud = new NotaCrud(this);
        List<Nota> listaNote = crud.getListNotes();

        //*** tramite il custom adapter inserisco ogni nota nel relativo item
        ListaNotaAdapter adattatore = new ListaNotaAdapter(this, R.layout.row, listaNote);

        //*** inserisco l'adapter personalizzato appena popolato nella ListView iniziale
        listView.setAdapter(adattatore);
        listView.setOnItemClickListener(this);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

    public void addNote(View view){
        Log.i(this.getClass().toString(), "addNote()");
        Intent intent = new Intent( this, InsertNoteActivity.class );
        startActivity(intent);
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Log.i(this.getClass().toString(), "onItemClick: +++ log +++");
        Toast.makeText( this, "Hello world", Toast.LENGTH_SHORT ).show();
    }

} 
```

我的activity_main.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity">

    <Button
        android:id="@+id/add_nota"
        android:onClick="addNote"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text="@string/add_nota_label" />

    <ListView
        android:id="@+id/listaNote"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_below="@id/add_nota" >

    </ListView>

</RelativeLayout> 
```

我的 row.xml 用于适配器的每个项目：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

        <!--*** PARTE SUPERIORE ***-->
        <RelativeLayout
            android:id="@+id/button_row_item"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#FFFEC9">

            <ImageButton
                android:id="@+id/button_row_delete"
                android:onClick="crudClick"
                android:layout_width="35dp"
                android:layout_height="30dp"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:contentDescription="@string/icon_delete"
                android:src="@android:drawable/ic_menu_delete"/>

            <ImageButton
                android:id="@+id/button_row_edit"
                android:onClick="crudClick"
                android:layout_width="35dp"
                android:layout_height="30dp"
                android:layout_alignParentTop="true"
                android:layout_toLeftOf="@+id/button_row_delete"
                android:contentDescription="@string/icon_edit"
                android:src="@android:drawable/ic_menu_edit" />

            <TextView
                android:id="@+id/item_data"
                android:layout_width="20dp"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:textIsSelectable="true"
                android:layout_toLeftOf="@+id/button_row_edit"
                android:padding="10dip"
                android:textSize="12sp" />

        </RelativeLayout>
        <!--*** /PARTE SUPERIORE ***-->

        <!--*** PARTE INFERIORE ***-->
        <RelativeLayout 
            android:id="@+id/oggetto_row_item"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="#FCFBB5">
            <TextView
                android:id="@+id/item_oggetto"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:padding="10dip"
                android:textSize="18sp"
                android:paddingTop="5dp"/>
        </RelativeLayout>
        <!--*** /PARTE INFERIORE ***-->

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T15:58:17.373

如果列表视图中的视图可聚焦，则该`OnItemClick`方法不会触发。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T02:23:42.463

使文本可选择 ( `android:textIsSelectable`) 允许 TextView 获得焦点，并防止任何（短）单击事件到达`OnItemClickListener`. `OnItemLongClickListener`仍然可以工作。

这代表了 Android 库（如果无意）或 Android 文档（如果有意）中的严重错误。无论如何，只需更改`android:textIsSelectable`为 false ，一切都会好起来的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-07T07:59:29.850

我知道这有点晚了，但是我遇到了同样的问题，并通过`onFocusable=false`编程设置解决了问题，即在我的 custom`ListViewAdapter`中， on `getView(...)`，我检索`ImageButton`调用`findViewById`，然后通过调用`setFocusable(false)`and更改可聚焦值`setFocusableInTouchMode(false)`：

```
public View getView(final int position, View convertView, ViewGroup parent) {

    if (convertView == null)
        convertView = LayoutInflater.from(context).inflate(R.layout.alvappliances, parent, false);

    ImageButton delete = (ImageButton)convertView.findViewById(R.id.alvaDeleteIB);

    delete.setFocusable(false);
    delete.setFocusableInTouchMode(false);

    return convertView;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-01T11:51:12.840

在您的 row.xml 中，在您的线性布局标签中添加以下行

android:descendantFocusability="blocksDescendants"

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T16:51:00.947

试试下面的代码看看是否有帮助

```
listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE); 
```

# iis - 在 PowerShell 中显示所有站点和绑定

> ID：15528492
> 
> 赞同：58
> 
> 时间：2013-03-20T15:54:43.907
> 
> 标签：iis, powershell, powershell-3.0, iis-8

我正在从 IIS 记录与该站点相关的所有站点和绑定。有没有一种简单的方法可以通过 PowerShell 脚本而不是手动输入查看 IIS 来获取此列表？

我希望输出是这样的：

```
Site                          Bindings
TestSite                     www.hello.com
                             www.test.com
JonDoeSite                   www.johndoe.site 
```

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-03-20T16:21:25.150

试试这个：

```
Import-Module Webadministration
Get-ChildItem -Path IIS:\Sites 
```

它应该返回如下所示的内容：

```
Name             ID   State      Physical Path                  Bindings
----             --   -----      -------------                  --------
ChristophersWeb 22   Started    C:\temp             http *:8080:ChristophersWebsite.ChDom.com 
```

从这里您可以细化结果，但要小心。select 语句的管道不会给你你需要的东西。根据您的要求，我将构建一个自定义对象或哈希表。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-03-20T16:34:52.827

尝试这样的事情来获得你想要的格式：

```
Get-WebBinding | % {
    $name = $_.ItemXPath -replace '(?:.*?)name=''([^'']*)(?:.*)', '$1'
    New-Object psobject -Property @{
        Name = $name
        Binding = $_.bindinginformation.Split(":")[-1]
    }
} | Group-Object -Property Name | 
Format-Table Name, @{n="Bindings";e={$_.Group.Binding -join "`n"}} -Wrap 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2017-02-08T12:43:35.893

我看到的最简单的方法：

```
Foreach ($Site in get-website) { Foreach ($Bind in $Site.bindings.collection) {[pscustomobject]@{name=$Site.name;Protocol=$Bind.Protocol;Bindings=$Bind.BindingInformation}}} 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2016-02-02T16:20:06.670

如果您只想列出所有站点（即查找绑定）

将工作目录更改为“C:\Windows\system32\inetsrv”

**cd c:\Windows\system32\inetsrv**

接下来运行“appcmd list sites”（复数）并输出到文件。例如 c:\IISSiteBindings.txt

**appcmd 列出站点 > c:\IISSiteBindings.txt**

现在从命令提示符使用记事本打开。

**记事本 c:\IISSiteBindings.txt**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-13T23:56:28.190

试试这个

```
function DisplayLocalSites
{

try{

Set-ExecutionPolicy unrestricted

$list = @()
foreach ($webapp in get-childitem IIS:\Sites\)
{
    $name = "IIS:\Sites\" + $webapp.name
    $item = @{}

$item.WebAppName = $webapp.name

foreach($Bind in $webapp.Bindings.collection)
{
    $item.SiteUrl = $Bind.Protocol +'://'+         $Bind.BindingInformation.Split(":")[-1]
}

$obj = New-Object PSObject -Property $item
$list += $obj
}

$list | Format-Table -a -Property "WebAppName","SiteUrl"

$list | Out-File -filepath C:\websites.txt

Set-ExecutionPolicy restricted

}
catch
{
$ExceptionMessage = "Error in Line: " + $_.Exception.Line + ". " +     $_.Exception.GetType().FullName + ": " + $_.Exception.Message + " Stacktrace: "    + $_.Exception.StackTrace
$ExceptionMessage
}
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-09-07T10:12:16.583

```
function Get-ADDWebBindings {
param([string]$Name="*",[switch]$http,[switch]$https)
    try {
    if (-not (Get-Module WebAdministration)) { Import-Module WebAdministration }
    Get-WebBinding | ForEach-Object { $_.ItemXPath -replace '(?:.*?)name=''([^'']*)(?:.*)', '$1' } | Sort | Get-Unique | Where-Object {$_ -like $Name} | ForEach-Object {
        $n=$_
        Get-WebBinding | Where-Object { ($_.ItemXPath -replace '(?:.*?)name=''([^'']*)(?:.*)', '$1') -like $n } | ForEach-Object {
            if ($http -or $https) {
                if ( ($http -and ($_.protocol -like "http")) -or ($https -and ($_.protocol -like "https")) ) {
                    New-Object psobject -Property @{Name = $n;Protocol=$_.protocol;Binding = $_.bindinginformation}
                }
            } else {
                New-Object psobject -Property @{Name = $n;Protocol=$_.protocol;Binding = $_.bindinginformation}
            }
        }
    }
    }
    catch {
       $false
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-01-22T09:32:18.953

我找到此页面是因为我需要将具有许多绑定的站点迁移到新服务器。我在这里使用了一些代码来生成下面的 powershell 脚本，以将绑定添加到新服务器。分享以防对其他人有用：

```
Import-Module WebAdministration
$Websites = Get-ChildItem IIS:\Sites
$site = $Websites | Where-object { $_.Name -eq 'site-name-in-iis-here' }

$Binding = $Site.bindings
[string]$BindingInfo = $Binding.Collection
[string[]]$Bindings = $BindingInfo.Split(" ")
$i = 0
$header = ""
Do{
    [string[]]$Bindings2 = $Bindings[($i+1)].Split(":")

    Write-Output ("New-WebBinding -Name `"site-name-in-iis-here`" -IPAddress " + $Bindings2[0] + " -Port " + $Bindings2[1] + " -HostHeader `"" + $Bindings2[2] + "`"")

    $i=$i+2
} while ($i -lt ($bindings.count)) 
```

它生成如下所示的记录：

```
New-WebBinding -Name "site-name-in-iis-here" -IPAddress "*" -Port 80 -HostHeader www.aaa.com 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-13T20:14:43.890

我发现这个问题是因为我想生成一个网页，其中包含指向在我的 IIS 实例上运行的所有网站的链接。我使用[Alexander Shapkin 的答案](https://stackoverflow.com/a/42113479/740639)提出以下内容来生成一堆链接。

```
$hostname = "localhost"

Foreach ($Site in get-website) {
    Foreach ($Bind in $Site.bindings.collection) {
        $data = [PSCustomObject]@{
            name=$Site.name;
            Protocol=$Bind.Protocol;
            Bindings=$Bind.BindingInformation
        }
        $data.Bindings = $data.Bindings -replace '(:$)', ''
        $html = "<a href=""" + $data.Protocol + "://" + $data.Bindings + """>" + $data.name + "</a>"
        $html.Replace("*", $hostname);
    }
} 
```

然后我将结果粘贴到这个仓促编写的 HTML 中：

```
<html>
<style>
    a { display: block; }
</style>
{paste PowerShell results here}
</body>
</html> 
```

# mysql - 锁定 MySQL 表在 Tornado 中不起作用

> ID：15528493
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:54:44.597
> 
> 标签：mysql, locking, tornado

我有这个代码：

```
# Retreive the users that can obtain permission on the network except the admin
self.lock_tables("read", ['nets_permissions as n', 'users as u'])
usrs = self.db.query("SELECT distinct u.id FROM users as u \
        left outer join nets_permissions as n on u.id = n.user_id \
        where u.id not in \
        (select users.id from users left outer join nets_permissions \
        on users.id = nets_permissions.user_id \
        where nets_permissions.network_id=%s and nets_permissions.perm=3)", netid)
self.unlock_tables() 
```

但我在 Tornado 屏幕中收到此错误：

> 文件“./wsn.py”，第 571 行，在获取 nets_permissions.network_id=%s 和 nets_permissions.perm=3)"，netid) 引发错误类，错误值 OperationalError：（1100，“表 'users' 未锁定锁定表")

错误在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:57:50.860

解决方案是：

```
# Retreive the users that can obtain permission on the network except the admin
    self.lock_tables("read", ['nets_permissions as n', 'users as u', 'nets_permissions as m', 'users as v'])
    usrs = self.db.query("SELECT distinct u.id FROM users as u \
                          left outer join nets_permissions as n on u.id = n.user_id \
                          where u.id not in \
                          (select v.id from users as v left outer join nets_permissions as m \
                          on v.id = m.user_id \
                          where m.network_id=%s and m.perm=3)", netid)
    self.unlock_tables() 
```

# c# - 在 Caliburn Micro 的 ViewModel 列表中选择 ViewModel 时交换 ListBox 上的绑定？

> ID：15528494
> 
> 赞同：1
> 
> 时间：2013-03-20T15:54:44.643
> 
> 标签：c#, wpf, viewmodel, caliburn.micro

我有一个 ViewModel 列表，每个 ViewModel 都包含一个列表。

我想将此列表绑定到视图中的 ListBox，以便我可以设置 a`SelectedViewModel`并且视图中的 ListBox 现在显示新的`SelectedViewModel`. 这也应该保留选择。

**是否可以使用当前的 Caliburn Micro 约定来做到这一点，还是我必须明确说明这一点？**

例如：

我有一个名为 ViewModel 的列表，`vmList`其中包含两个 ViewModel，`Fruit`并且`Veg`.

ViewModel`Fruit`包含列表`["Apple", "Pear"]`。

ViewModel`Veg`包含列表`["Carrot", "Cabbage"]`。

`Fruit`是当前的`SelectedViewModel`，所以我的视图的 ListBox 当前应该显示：

```
Apple
*Pear* 
```

`Pear`当前是 ListBox 中的选定项。

现在我设置`Veg`为`SelectedViewModel`我的视图更新以显示：

```
*Carrot*
Cabbage 
```

`Carrot`当前是 ListBox 中的选定项。现在，如果我`Fruit`重新设置为`SelectedViewModel`我的视图应该更新以显示：

```
Apple
*Pear* 
```

`Pear`ListBox 中的选定项仍然在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:21:54.973

这应该是可能的 - 最简单的功能是使用 CM 约定来绑定列表内容，并`SelectedItem`为列表提供绑定。由于您要跟踪每个 VM 中最后选择的项目，因此您也需要密切关注它（在 VM 本身或主 VM 中）

所以解决方案可能是：

```
public class ViewModelThatHostsTheListViewModel
{
    // All these properties should have property changed notification, I'm just leaving it out for the example
    public PropertyChangedBase SelectedViewModel { get; set; } 

    public object SelectedItem { get; set; }

    // Dictionary to hold last selected item for each VM - you might actually want to track this in the child VMs but this is just one way to do it
    public Dictionary<PropertyChangedBase, object> _lastSelectedItem = new Dictionary..etc()

    // Keep the dictionary of last selected item up to date when the selected item changes
    public override void NotifyOfPropertyChange(string propertyName)
    {
        if(propertyName == "SelectedItem")
        {
            if(_lastSelectedItem.ContainsKey(SelectedViewModel))
                _lastSelectedItem[SelectedViewModel] = SelectedItem;
            else
                _lastSelectedItem.Add(SelectedViewModel, SelectedItem);
        }
    }
} 
```

然后在你的 XAML

```
<ListBox x:Name="SelectedViewModel" SelectedItem="{Binding SelectedItem, Mode=TwoWay}" /> 
```

显然在此处设置您的项目模板以绑定到视图模型上的公共属性（例如`DisplayName`使用`IHaveDisplayName`界面来保持良好和集成）

编辑：

快速说明：如果您的虚拟机本身不是`List`对象而是包含一个列表，那么您可能必须将列表项显式`ListBox`绑定`ItemTemplate`到关于`ContentControl`约定绑定）

```
<ListBox ItemsSource="{Binding SelectedViewModel.ListItems}" ...etc /> 
```

# java - GWT 中的 Java 计时器

> ID：15528500
> 
> 赞同：4
> 
> 时间：2013-03-20T15:54:50.223
> 
> 标签：java, html, gwt, libgdx

我试图在我的入口点中有一个 Java 计时器：

```
Timer timer = new Timer();
timer.schedule(
   new TimerTask() {
       public void run() {
           //some code
       }
   }
   , 5000); 
```

但是当试图编译这个时，我得到： No source code is available for type `java.util.Timer`; 你忘了继承一个必需的模块吗？

我能做些什么来解决这个错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-20T15:57:24.967

**在 GWT 中，您只能使用所有 Util 包类。**

这是只有您可以从 util 类中使用[的类列表。](http://www.gwtproject.org/doc/latest/RefJreEmulation.html#Package_java_util)

您可以使用[GWT Timer 类](http://www.gwtproject.org/javadoc/latest/com/google/gwt/user/client/Timer.html)。

示例（*来自文档*）；

```
 public void onClick(ClickEvent event) {
    // Create a new timer that calls Window.alert().
    Timer t = new Timer() {   //import (com.google.gwt.user.client.Timer)
      @Override
      public void run() {
        Window.alert("Nifty, eh?");
      }
    };

    // Schedule the timer to run once in 5 seconds.
    t.schedule(5000);
  } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-20T16:31:26.827

如果您使用的是 Libgdx，则可以使用[libgdx`Timer`基础架构](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/Timer.html)来安排工作以在将来运行：

```
Timer t = new Timer();
t.scheduleTask(new Timer.Task() { 
      public void run() { /* some code */ } 
  }), /* Note that libgdx uses float seconds, not integer milliseconds: */ 5); 
```

这样，您可以在独立于平台的代码中安排计时器。（特定于 GWT 的解决方案仅适用于项目的平台相关部分。）

# c# - 如何在 c# httpwebreqest ASP.NET 中处理状态 302 重定向

> ID：15528502
> 
> 赞同：2
> 
> 时间：2013-03-20T15:54:58.147
> 
> 标签：c#, asp.net, redirect, httpwebrequest

这是我的代码：

```
 @{
        //string postString = "parameter=value";
        const string contentType = "application/x-www-form-urlencoded";
        System.Net.ServicePointManager.Expect100Continue = false;

        CookieContainer cookies = new CookieContainer();
        HttpWebRequest webRequest = WebRequest.Create("http://somehost:8080/myApp") as HttpWebRequest;
        webRequest.Method = "POST";
        webRequest.AllowAutoRedirect = false;
        webRequest.ContentType = contentType;
        webRequest.CookieContainer = cookies;
        webRequest.ContentLength = postString.Length;
        webRequest.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.1) Gecko/2008070208 Firefox/3.0.1";
        webRequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";

        StreamWriter requestWriter = new StreamWriter(webRequest.GetRequestStream());
        requestWriter.Write(postString);
        requestWriter.Close();

        HttpWebResponse resp = webRequest.GetResponse() as HttpWebResponse;
        string location = resp.Headers["Location"];
        Response.Redirect(location);
    } 
```

来自的响应`http://somehost:8080/myApp`是 302 重定向到其他域。如果我使用`webRequest.AllowAutoRedirect = true;`并编写响应 ( `Response.Write(StreamReader(resp.GetResponseStream()).ReadToEnd())`)，则无法正确显示生成的 html，因为无法解析具有相关链接的资源。

所以，我想出了这个解决方案，但我觉得它不正确。在我看来，我的解决方案有点像“hackaround”。

有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T11:02:23.997

将您的相对网址更改为绝对网址

```
 url = objHttpWebResponse.Headers["Location"].ToString();
                        MessageBox.Show("Redirect To " + objHttpWebResponse.Headers["Location"]);
                        System.Threading.Thread.Sleep(2000);
                        Uri final = new Uri(new Uri(txtURL.Text), url);
                        string finalurl = final.AbsoluteUri;
                        download(finalurl); 
```

# c# - C# - Shell.Namespace(pathFolder) 返回 null，甚至 存在

> ID：15528504
> 
> 赞同：1
> 
> 时间：2013-03-20T15:55:05.437
> 
> 标签：c#, windows, recursion, filesystems, shell32

我正在尝试使用以下代码通过“开始菜单”文件夹进行递归循环：

```
Function(string pathFolder) {

Shell32.Shell shell = new Shell32.Shell();
Shell32.Folder folderObj = shell.NameSpace(pathFolder);

foreach ( Shell32.FolderItem2 item in objFolder.Items() ) {

    string typeItem = folderObj.GetDetailsOf(item, 2);

    if ( typeItem == "File folder" ) {

        string folderName = folderObj.GetDetailsOf(item, 0);
        Function(pathFolder + "\\" + folderName);

    } else {
        // do smomething...
    }
} 
```

问题是 Shell.Namespace 适用于某些文件夹，而不是全部。对于那些不工作的文件夹，即使这些文件夹确实存在，Shell.Namespace 也会返回 null。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:02:23.820

为什么不使用 System.IO 命名空间类？我认为它有更高级的 API。对于您的情况，它可能是安全问题。

# android-intent - 无法从广播接收器生成通知

> ID：15528506
> 
> 赞同：0
> 
> 时间：2013-03-20T15:55:10.607
> 
> 标签：android-intent, android-notifications, android-broadcast

*这是我的清单文件*

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.broadcastlistner"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="9" />

    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.broadcastlistner.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
       </activity>
        <receiver android:name="com.example.broadcastlistner.receiver.MyBroadCastListener"
     android:enabled="true"
     android:exported="false">
    <intent-filter>
     <action     android:name="android.intent.com.example.broadcastlistner.receiver.MyBroadCastListener.PHONE_STATE" />
        <category android:name="android.intent.category.Default" />
    </intent-filter>
</receiver>

   </application>

    </manifest> 
```

*同样，这是我的广播接收器类。并且整个应用程序运行，但是当电话响铃或任何电话状态正在改变时，我没有收到任何通知。因此任何人都可以帮助我。我们将不胜感激*

```
 package com.example.broadcastlistner;

        import android.app.Notification;
        import android.app.NotificationManager;
        import android.app.PendingIntent;
        import android.content.BroadcastReceiver;
        import android.content.Context;
        import android.content.Intent;
        import android.os.Bundle;
        import android.support.v4.app.NotificationCompat;
        import android.telephony.*;
        import android.util.Log;

        public class MyBroadCastListener  extends BroadcastReceiver{
        @Override
    public void onReceive(final Context context, Intent intent) {

        String phoneNumber = null;
              Bundle extras = intent.getExtras();
        if (intent.getExtras() != null) {

            String state = extras.getString(TelephonyManager.EXTRA_STATE);
             if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
                    phoneNumber = extras
                        .getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

                    if(phoneNumber == null || phoneNumber.trim().length()==0)
                        phoneNumber = "";

                   Log.i(state, "Incomming no");
             createNotification("Incomming      Number:",phoneNumber,context);

             }
             else if(state.equals(TelephonyManager.EXTRA_STATE_OFFHOOK))
             {
                  System.out.println("call Disconnected");
                 Log.i(state, "offhook");
            createNotification("Phone Disconnected:",phoneNumber,context); 
             }
             else if(state.equals(TelephonyManager.EXTRA_STATE_IDLE))
             {
                  System.out.println("Phone is idle");
                  Log.i(state, "phone idle");
                 createNotification("Phone Idle:",phoneNumber,context); 
             }
        }

            // check the current state
    }
        public static void createNotification(String subject,String phoneNumber,Context         context)
    {
        // Prepare intent which is triggered if the
        // notification is selected

        Intent intent = new Intent(context, MainActivity.class);
        PendingIntent pIntent = PendingIntent.getActivity(context, 0, intent, 0);

        // Build notification
        // Actions are just fake
        String longText="this is a test message and will be handled after ward";
        Notification noti = new NotificationCompat.Builder(context)
                .setContentTitle(subject+" "+ "From: " )
                .setContentText(phoneNumber)
                .setSmallIcon(R.drawable.ic_launcher)
                .setContentIntent(pIntent)
                //.setSound(sound)
                .setStyle(new NotificationCompat.BigTextStyle().bigText(longText)) 
                .addAction(R.drawable.ic_launcher, "Call", pIntent)
                .addAction(R.drawable.ic_launcher, "More", pIntent)
                .addAction(R.drawable.ic_launcher, "And more", pIntent).build();

        NotificationManager notificationManager = 
    (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);

        // Hide the notification after its selected
        noti.flags |= Notification.FLAG_AUTO_CANCEL;

        notificationManager.notify(0, noti); 

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T19:55:22.410

也许检查代码intent.putExtra(); 它应该在 sendBroadCast() 或 PendingIntent.getBroadCast() 之前。我也有类似的问题。最后我发现我在 getBroadCast() 之后执行了 putExtra()。所以意图实际上不包含任何内容。

# java - 使用 Spring WS 将故障从肥皂体移动到肥皂头

> ID：15528509
> 
> 赞同：0
> 
> 时间：2013-03-20T15:55:10.850
> 
> 标签：java, spring, soap, spring-ws, fault

将肥皂体中发现的肥皂故障移动到 Spring Web 服务中发现的响应的肥皂头的最佳方法是什么？有什么例子吗？

我可以拦截故障，但我认为我不能用这个解析器修改任何东西。

```
public class LisSoapFaultTranslatorExceptionResolver extends SoapFaultMappingExceptionResolver {

    @Override
    protected void customizeFault(Object endpoint, Exception ex, SoapFault fault) {

        fault = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T15:58:11.780

来自[W3Schools](http://www.w3schools.com/soap/soap_fault.asp)，

> 可选的 SOAP Fault 元素用于指示错误消息。
> 
> 如果存在 Fault 元素，则它必须作为 Body 元素的子元素出现。Fault 元素只能在 SOAP 消息中出现一次。

如果您的 SOAP 错误出现在响应的头部，那么您的 SOAP 信封不再遵循规范。你不应该那样做。而且我怀疑实现 SOAP 接口的框架甚至可以让你这样做。

要被识别为携带 SOAP 错误信息，SOAP 消息必须包含单个 SOAP Fault 元素信息项作为 SOAP Body 的唯一子元素信息项。

从[规范](http://www.w3.org/TR/2007/REC-soap12-part1-20070427/#soapfault)

> 要被识别为携带 SOAP 错误信息，SOAP 消息必须包含单个 SOAP Fault 元素信息项作为 SOAP Body 的唯一子元素信息项。
> 
> 生成故障时，SOAP 发送者不得在 SOAP Body 中包含额外的元素信息项。正文包含故障和附加元素信息项的消息没有 SOAP 定义的语义。
> 
> SOAP Fault 元素信息项可以出现在 SOAP 标头块中，或者作为 SOAP Body 的子元素信息项的后代；在这种情况下，元素没有 SOAP 定义的语义。

重要的是`the element has no SOAP-defined semantics`如果你这样做。我想你是靠你自己的。如果没有故障，也许使用 Spring 生成 SOAP 响应，否则自己生成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:25:03.437

我可以通过在标题中添加项目来做到这一点。

**弹簧配置文件：**

```
<sws:interceptors>    
    <sws:payloadRoot
    namespaceUri="http://www.imsglobal.org/services/lis/cmsv1p0/wsdl11/sync/imscms_v1p0">
        <bean class="com.openclass.adapter.interceptors.LisResponseInterceptor"/>    
    </sws:payloadRoot>  
</sws:interceptors> 
```

**Java代码：**

```
public class LisResponseInterceptor extends EndpointInterceptorAdapter {

    @Override
    public boolean handleResponse(MessageContext messageContext, Object endpoint{
        return true;
    }

    @Override
    public boolean handleRequest(MessageContext messageContext, Object endpoint){
        return true;
    }

    @Override
    public boolean handleFault(MessageContext messageContext, Object endpoint){

        SoapMessage response = (SoapMessage) messageContext.getResponse();
        SoapHeader header = response.getSoapHeader();
        header.addHeaderElement(new QName("ims","imsx_syncRequestHeaderInfo"));

        return true;
    }
} 
```

# ios - Sharekit 2.0 Twitter 一次发送多张图片

> ID：15528510
> 
> 赞同：0
> 
> 时间：2013-03-20T15:55:17.443
> 
> 标签：ios, twitter, sharekit

使用 Sharekit 2.0 Twitter 时，有没有办法一次发送多张图片？通过查看文档，这似乎是不可能的，因为何时一次只能共享一项。我是对的吗？还是我可以尝试另一种方法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T14:54:04.680

不幸的是，你是对的。ShareKit 一次只能发送一张图片。但是，您可以尝试使用 shareKit 的便捷方法

```
#import "SHKReadItLater.h" //include the service's header at the top of your class

// Create the item to share (in this example, a url)
NSURL *url = [NSURL URLWithString:@"http://getsharekit.com"];
SHKItem *item = [SHKItem URL:url title:@"ShareKit is Awesome!"];

// Share the item
[SHKReadItLater shareItem:item]; 
```

使用自动共享以静默方式发送更多图片（请参阅[常见问题解答](https://github.com/ShareKit/ShareKit/issues)）。确保您使用的是 pre-ios twitter（通过配置器中的设置），因为 ios twitter 还不能处理 autoshare。我承认，这不是很好的解决方案，因为您必须创建 SHKItem 并为每个图像打开单独的连接。

# ruby-on-rails - 无法在 Heroku 上运行 rake 任务

> ID：15528513
> 
> 赞同：0
> 
> 时间：2013-03-20T15:55:22.657
> 
> 标签：ruby-on-rails, heroku

我正在运行这个命令 'heroku run -a my_app RAILS_ENV=production rake -T --trace' 我收到这个堆栈跟踪：

```
rake aborted!
undefined method `task' for #<Rspec::Core::RakeTask:0x00000002e82d60>
/app/lib/tasks/rspec.rake:9:in `initialize'
/app/lib/tasks/rspec.rake:39:in `new'
/app/lib/tasks/rspec.rake:39:in `<top (required)>'
/app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `block in load'
/app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in `load_dependency'
/app/.bundle/gems/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:245:in `load'
/app/.bundle/gems/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:425:in `block in load_tasks'
/app/.bundle/gems/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:425:in `each'
/app/.bundle/gems/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:425:in `load_tasks'
/app/.bundle/gems/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:145:in `load_tasks'
/app/.bundle/gems/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
/app/Rakefile:12:in `<top (required)>'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/rake_module.rb:25:in `load_rakefile'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:583:in `raw_load_rakefile'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:89:in `block in load_rakefile'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:88:in `load_rakefile'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:72:in `block in run'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:160:in `standard_exception_handling'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/lib/rake/application.rb:70:in `run'
/app/.bundle/gems/ruby/1.9.1/gems/rake-10.0.3/bin/rake:33:in `<top (required)>'
.bundle/gems/ruby/1.9.1/bin/rake:19:in `load'
.bundle/gems/ruby/1.9.1/bin/rake:19:in `<main>' 
```

这是我的 gemfile 的一部分：

```
gem "rails", "~> 3.2.13"
gem 'json', '~>1.7.7' 
```

# android - 为节奏制作音池

> ID：15528515
> 
> 赞同：2
> 
> 时间：2013-03-20T15:55:24.123
> 
> 标签：android, soundpool

我正在开发一个带有 12 个按钮的鼓机，可以播放不同的声音。我想添加每隔“”秒播放一次的声音池，我希望能够在应用程序中调整声音池启动之间的时间。我知道如何设置声音池，但是我想学习如何在 soundpool 再次启动之间设置延迟。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T14:31:07.867

如果此链接无济于事，则此链接将帮助您了解如何启动一种声音并停止并启动另一种声音并停止，而不是告诉我我将发送另一个答案。

[http://www.techrepublic.com/blog/software-engineer/getting-your-feet-wet-in-androids-soundpool/877/](http://www.techrepublic.com/blog/software-engineer/getting-your-feet-wet-in-androids-soundpool/877/)

# google-app-engine - GAE：如何在 url 中使用 unicode 字符

> ID：15528518
> 
> 赞同：3
> 
> 时间：2013-03-20T15:55:34.177
> 
> 标签：google-app-engine, python-2.7, sqlite, url-routing

我刚刚将 GAE 升级到 1.7.6（python 2.7）。我的应用在 URL 中使用了一些西班牙语字符（例如“españa”或“cádiz”等词）。到目前为止，我与他们打交道没有任何问题。但是，升级后，我总是在我的 url 中引入特殊字符时出现错误消息，并且我的应用程序崩溃：

```
ProgrammingError('You must not use 8-bit bytestrings unless you use a text_factory that can interpret 8-bit bytestrings (like text_factory = str). It is highly recommended that you instead just switch your application to Unicode strings.',)
Traceback (most recent call last):
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/cherrypy/cherrypy/wsgiserver/wsgiserver2.py", line 1302, in communicate
req.respond()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/cherrypy/cherrypy/wsgiserver/wsgiserver2.py", line 831, in respond
self.server.gateway(self).respond()
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/lib/cherrypy/cherrypy/wsgiserver/wsgiserver2.py", line 2115, in respond
response = self.req.server.wsgi_app(self.env, self.start_response)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/wsgi_server.py", line 230, in __call__
return app(environ, start_response)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/server.py", line 1114, in __call__
return self._handle_request(environ, start_response)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/devappserver2/server.py", line 512, in _handle_request
http_version=http_version)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/apiproxy_stub.py", line 160, in WrappedMethod
return method(self, *args, **kwargs)
File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/api/logservice/logservice_stub.py", line 151, in start_request
host, start_time, method, resource, http_version))
ProgrammingError: You must not use 8-bit bytestrings unless you use a text_factory that can interpret 8-bit bytestrings (like text_factory = str). It is highly recommended that you instead just switch your application to Unicode strings. 
```

我编写了一个简单的应用程序来调试问题，但没有积极的结果：

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

import webapp2

class MainHandler(webapp2.RequestHandler):
    def get(self):
        self.response.write('Hello world!')

class MyHandler(webapp2.RequestHandler):
  def get(self, param):
    self.response.write(param)

app = webapp2.WSGIApplication([
    ('/', MainHandler),
    ('/(.*)', MyHandler)
], debug=True) 
```

当访问 URL "/hola" 时，响应是预期的，并且浏览器显示 "hola" 词。但是，当访问“/españa”甚至“/espa%C3%B1a”时，开发服务器崩溃并出现上述错误。

请注意，该错误仅在开发中发生，我猜它与新的sqlite数据库有关；但是，在前面的示例中，我根本没有使用数据库！

有任何想法吗？请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T19:20:06.267

这似乎是开发服务器的一个错误。现在最好的办法是在 GAE 错误跟踪器上为错误加注星标：[GAE bug-url's with unicode characters](https://code.google.com/p/googleappengine/issues/detail?id=9040)。

如果更多的人“明星”它，希望他们能更快地解决这个问题。

# regex - 可选表达式未分组

> ID：15528519
> 
> 赞同：1
> 
> 时间：2013-03-20T15:55:36.380
> 
> 标签：regex

我拥有的正则表达式是`.*MSIE (\d+\.\d+).*(Trident/\d\.\d)?.*`

要匹配的字符串：
`Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)`

所以我希望第 2 组包含值 Trident/5.0。但是出现为空。任何线索我在这里做错了什么？如果我删除`?`after `(Trident/\d\.\d)`，它将被作为第 2 组拾取。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:06:38.600

## 问题

问题是`.*`前面有可选的`(Trident/\d\.\d)`. `(Trident/\d\.\d)`正则表达式引擎在放弃并将可选组匹配为空字符串之前不会尝试检查是否有任何匹配。

此跟踪将演示正则表达式引擎的工作原理：

*   匹配后`.*MSIE (\d+\.\d+)`，剩余文本为：

    ```
    ; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E) 
    ```

*   `.*`是贪心的，所以它会将所有内容匹配到字符串的末尾。没有剩余文字。

*   `(Trident/\d\.\d)?`是贪心的，所以它会先尝试匹配`Trident/\d\.\d`，但失败了。但是，它可以匹配空字符串（空字符串可以无处不在，甚至在行尾）。所以这部分匹配空字符串。

*   `.*`也将匹配空字符串，因为我们在行尾。

在中间更改`.*`为惰性量词，即`.*MSIE (\d+\.\d+).*?(Trident/\d\.\d)?.*`由于相同的原因将不起作用：

*   匹配后`.*MSIE (\d+\.\d+)`，嗯，同样的事情。

*   `.*?`是懒惰的，所以它会先尝试空字符串。剩下的文字和上面一样（什么都不消耗）。

*   `(Trident/\d\.\d)?`是贪婪的，它再次尝试`(Trident/\d\.\d)`首先，失败，它与空字符串匹配。

*   `.*`匹配字符串的其余部分，从`.*MSIE (\d+\.\d+)`离开的地方开始。

## 解决方案

为了强制引擎`(Trident/\d\.\d)`在采取简单的方法之前进行检查，我们可以将整个选项设为`.*(Trident/\d\.\d)`可选。这将提示引擎检查所有匹配的可能性`(Trident/\d\.\d)`，然后放弃并满足于空字符串。

```
.*MSIE (\d+\.\d+)(.*(Trident/\d\.\d))? 
```

跟踪正则表达式：

*   `.*MSIE (\d+\.\d+)`和上面一样。

*   `(.*(Trident/\d\.\d))?`是贪婪的，所以它会`.*(Trident/\d\.\d)`在寻找空字符串之前尝试。如果输入字符串中有模式，它肯定会找到匹配的。如果没有，`.*(Trident/\d\.\d)`就会失败，我们求助于空字符串。

如果您的引擎支持非捕获组：

```
.*MSIE (\d+\.\d+)(?:.*(Trident/\d\.\d))? 
```

由于您只需要`Trident...`，我们无需捕获整个内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:06:48.430

你确实解决了这个问题。. . 与“删除？” . . . 如果`(Trident/\d\.\d)`是可选的，那么与 .`.*MSIE (\d+\.\d+).*(Trident/\d\.\d)?.*`确实没有什么不同`.*MSIE (\d+\.\d+).*`。

解决这个问题的最简单方法是将其分成两个搜索：`MSIE (\d+\.\d+)`和`(Trident/\d\.\d)`. 您可以进行更复杂的单个匹配，但为了简单起见，您可能希望使用两个单独的匹配。

# spring - 带有 LDAP 和 TokenBasedRememberMeServices 的 Spring Security 3

> ID：15528524
> 
> 赞同：0
> 
> 时间：2013-03-20T15:55:50.803
> 
> 标签：spring, spring-security

我正在尝试使用 TokenBasedRememeberMe。对于内部管理的用户来说，工作就像一个冠军，但通过 AD 管理的用户使用 LDAP 系统失败。

我在 2009 年发现了这篇文章，在我看来这不是一个受支持的东西。[http://forum.springsource.org/showthread.php?77821-Spring-Security-3-0-Remember-me-Token-based-not-working](http://forum.springsource.org/showthread.php?77821-Spring-Security-3-0-Remember-me-Token-based-not-working)

我说得对吗 --- 这是 Spring Security 不支持的组合吗？

亚伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:42:27.243

不，它不会在盒子里起作用。`TokenBasedRememberMeServices`需要访问您在 AD 中没有的用户密码。

如果您阅读[了关于 remember-me 的手册章节，](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#remember-me)它会说明您需要一个`UserDetailsService`它才能工作，并说明如果您使用 LDAP，您通常没有一个。从技术上讲，返回的信息不必包含密码，只是每个用户的一些秘密和不可猜测的信息，可以散列到令牌中并在验证时检查。

或者，您可以使用不需要密码的“持久”记住我选项。不过，您仍然需要提供一个`UserDetailsService`实现。

# java - 结果集oracle上的Java线程

> ID：15528526
> 
> 赞同：0
> 
> 时间：2013-03-20T15:55:55.433
> 
> 标签：java, multithreading, oracle, resultset, multiple-resultsets

我是java新手。我正在尝试创建程序以在不同的线程中向 ResultSet 抛出值。

```
 ResultSet rset = stmt
            .executeQuery("select  DISTINCT  substr(file_type,1,3) from DBM.file_table where process_time= '0015' ");

while (rset.next()){    
    r = rset.getString(1);
System.out.println(r); 
```

现在假设我们从 ResultSet 中得到 5 个不同的值。我想做的是在不同线程中同步的所有结果集值的代码下面运行。

```
 String spCall = "call DBM.SP_MS_" + r + "('0015', NULL, SYSDATE, 'DBM')";

    try {
        dbConnection = getDBConnection();
        stmt1 = dbConnection.createStatement();

        System.out.println(spCall);

        stmt1.executeUpdate(spCall);

        System.out.println("SUCCESS for File_Type " + r );
        System.out.println("-----------------------------");
    } catch (SQLException e) {

        System.out.println(spCall);

        stmt1.executeUpdate(spCall);

        System.out.println("SUCCESS for File_Type " + r );
        System.out.println("-----------------------------");
    } catch (SQLException e) { 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:10:25.303

您可以进行如下操作：

```
public void executeQuery()
{
    ResultSet rset = stmt.executeQuery("select  DISTINCT  substr(file_type,1,3) from DBM.file_table where process_time= '0015' ");

    while (rset.next())
    {    
        final r = rset.getString(1);
        System.out.println(r);
        Thread th = new Thread ( new Runnable()
        {
            @Override
            public void run()
            {
                method(r);
            }
        });
        th.start();
    }
}
public synchronized void method(String r)
{
    String spCall = "call DBM.SP_MS_" + r + "('0015', NULL, SYSDATE, 'DBM')";

    try {
        dbConnection = getDBConnection();
        stmt1 = dbConnection.createStatement();

        System.out.println(spCall);

        stmt1.executeUpdate(spCall);

        System.out.println("SUCCESS for File_Type " + r );
        System.out.println("-----------------------------");
    } catch (SQLException e) {

        System.out.println(spCall);

        stmt1.executeUpdate(spCall);

        System.out.println("SUCCESS for File_Type " + r );
        System.out.println("-----------------------------");
    } catch (SQLException e) {}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:15:19.310

你确定你正朝着正确的方向前进吗？您已经在使用存储过程，那么为什么不使用存储过程来完成所有工作呢？此时，它应该是对数据库的一次调用：

```
CALL DBM.SP_MS('0015', NULL, SYSDATE, 'DBM'); 
```

在 Oracle 存储过程的内部，您可以执行各个`_ + r`版本实际单独执行的任何操作；无论如何，它都会收到与原始呼叫相同的“0015”。这将简化您的 Java 端，并且将对数据库产生更小的连接负担（而不是来回连接）。

然后，存储过程可以返回`r`它所影响的文件类型列表，您可以将其用于记录或报告目的。

这在内部如何工作取决于`_ + r`实现实际在做什么。我会怀疑它是一样的。

最后，这样做意味着，如果您真的想`Thread`停止通话，那么您只需要`Thread`为整个调用创建一个单一的。这导致`Thread`系统中的s更少，这通常是一件好事。

此外，由于您是 Java 新手，请查看`Executor`s 和 jtahlborn 的链接。

# windows-8 - Windows 应用商店应用的应用内购买数量

> ID：15528528
> 
> 赞同：0
> 
> 时间：2013-03-20T15:55:56.500
> 
> 标签：windows-8, microsoft-metro

我在 Windows 应用商店中有一个用于报纸的 Windows 应用商店应用程序。每个问题（每个工作日一个）都可以使用应用内购买购买。在 Windows 应用商店中，我似乎只能在应用购买中定义 100 个。就我而言，这大约是 4 个月的日常问题。

100真的是极限吗？有没有人找到添加更多的方法？

我找不到向应用添加更多应用内购买的方法。100 的军事将是一个非常愚蠢的限制，我需要删除购买旧问题的能力才能添加新问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:11:11.267

Windows 8 不支持基于订阅的购买，但它支持限时购买。

一种选择是让用户购买可用于问题的“信用”。类似于 Audible 如何让您购买带有积分的有声读物。

事情是这样的。报纸靠广告赚钱。购买价格不是针对内容，而是针对交付纸张所需的材料。交付一份电子纸不需要任何费用，那你为什么要收费呢？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:12:07.650

商店不支持订阅。但是，您可以为此使用第三方提供商。如“灵活的商业模式”中所述

[http://msdn.microsoft.com/en-us/windows/apps/hh852650.aspx](http://msdn.microsoft.com/en-us/windows/apps/hh852650.aspx)

> Windows 应用商店让您可以自由选择适合您的应用的商业模式。应用商店为免费应用、试用（基于时间和基于功能）、付费应用以及应用内购买提供全平台支持。您可以自由地直接使用您自己或第三方的服务进行应用内购买和订阅管理客户交易，或使用 Windows 应用商店提供的服务。对于受广告支持的应用，您可以自由选择最符合您目标的广告平台。

Paypal 可通过此 api 访问：http: [//paypal.github.com/Windows8SDK/](http://paypal.github.com/Windows8SDK/)

或直接通过表格帖子

[如何从 WinJS iframe Windows 8 App 向 Paypal 发送 POST？](https://stackoverflow.com/questions/13999622/how-to-form-post-to-paypal-from-winjs-iframe-windows-8-app)

# markdown - 如何在markdown中保留评论

> ID：15528531
> 
> 赞同：0
> 
> 时间：2013-03-20T15:56:02.523
> 
> 标签：markdown

当我用一些评论写markdown时，当它变成html时，评论就消失了。我想知道是否有办法保留评论？

例如，降价文件是

```
## Title
<!-- This is a title --> 
```

我想要的是当这个文件变成一个html时，第二行仍然保留。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:12:42.103

有一些 Markdown 处理器允许 HTML 注释；由于安全或其他原因，有些被禁用。

GitHub 和 BitBucket README markdown 禁用 HTML 注释。

看这个链接： [https ://gist.github.com/dupuy/1855764](https://gist.github.com/dupuy/1855764)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:06:01.133

`markdown`您使用的是哪个实现？许多实现将注释保留在 HTML 输出中。我的 markdown（在 Ubuntu 上）将注释保留在 HTML 输出中。

您可以检查其他实现，并在此处进行一些测试： [babelmark.bobtfish.net/](http://babelmark.bobtfish.net)

# jboss - JBoss 7 和 Camel 2.11 - BeanManager 抱怨“不可移植的行为”

> ID：15528539
> 
> 赞同：1
> 
> 时间：2013-03-20T15:56:17.593
> 
> 标签：jboss, jboss7.x, apache-camel, cdi

我在 JBoss AS 7.1 上运行的耳朵中使用骆驼 2.11-SNAPSHOT。

在部署应用程序并构建路由时（在`@Singleton` `@Startup`bean 中，使用`@Inject`ed CdiCamelContext），我在服务器日志中收到很多警告（约 30 条）：

```
2013-03-20 16:40:55,153 WARNING [org.apache.deltaspike.core.api.provider.BeanManagerProvider] (MSC service thread 1-2) When using the BeanManager to retrieve Beans before the Container is started, non-portable behaviour results! 
```

在上下文开始后，我得到这个警告：

```
2013-03-20 16:40:56,339 WARNING [org.apache.deltaspike.core.api.provider.BeanManagerProvider] (Camel (camel-2) thread #1 - file:///tmp/exchange/tmobile/in) When using the BeanManager to retrieve Beans before the Container is started, non-portable behaviour results! 
```

这是什么意思？我在谷歌上找不到任何有用的东西。它是一个错误吗？我配置骆驼错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:23:53.800

这只是来自 Apache Deltaspike 的警告，即在启动容器之前访问了 bean 管理器。Camel 与 CDI 的集成似乎使用了一些不可移植的功能，但假设他们知道自己在做什么，那可能什么都不是。

# networking - 局域网用户带宽监控

> ID：15528540
> 
> 赞同：-1
> 
> 时间：2013-03-20T15:56:19.507
> 
> 标签：networking, bandwidth, lan, mikrotik

我如何监控和创建每个局域网用户的图形互联网使用情况。我的网络有 mikrotik 路由器作为网关路由。是否有任何监控工具可以从 mikrotik 路由器创建带宽图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T15:29:40.897

查看 RTG：[http ://rtg.sourceforge.net/](http://rtg.sourceforge.net/)

Mikrotik 支持 SNMP，您可以使用它来轮询 MIB 并绘制使用情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-27T23:20:00.973

OpManager、Orion、PRTG、STG 和 ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-07T17:11:25.497

我建议你创建：

队列优先：

[http://wiki.mikrotik.com/wiki/Manual:队列](http://wiki.mikrotik.com/wiki/Manual:Queue)

然后启用图形：

[http://wiki.mikrotik.com/wiki/Manual:Tools/Graphing](http://wiki.mikrotik.com/wiki/Manual:Tools/Graphing)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-28T05:50:17.640

您可以在路由器上安装[Dude 软件包](http://www.mikrotik.com/thedude)并添加网络地图。当然，您必须在您的设备上或（如果存在）在您的交换机上或（如果计算机直接连接到路由器）上配置任何 SNMP。

# jquery - 根据选中/未选中的复选框显示/隐藏

> ID：15528542
> 
> 赞同：0
> 
> 时间：2013-03-20T15:56:23.157
> 
> 标签：jquery, asp.net

我有 5 个复选框。其中 4 个必须根据第 5 个是否选中/未选中来显示/隐藏。我正在尝试使用 JQuery 来执行此操作，但是由于某种原因我并没有完全正确。我正在点击正确检查选中/未选中属性的代码部分，只是没有得到正确的实际显示/隐藏代码。我已经尝试使用 CSS 类作为我需要切换的复选框。这是 JQuery 和 .aspx 代码

```
$(function () {
      $('#<%=chkFrench.ClientID %>').unbind('click');

      $('#<%=chkFrench.ClientID %>').click(function () {

          enable_cb();
          $(".EnhancedFrench").click(enable_cb);
      });
  });

  function enable_cb() {
      if (this.checked) {
          alert("show");
          $('.EnhancedFrench').show();
      } else {
        alert("hide");
          $('.EnhancedFrench').hide();
      }
  }

  <table>
    <tr>
     <td>Display Live (Fr):</td>
     <td><asp:CheckBox runat="server" ID="chkFrench" CssClass="EnhancedFrench" />/td>
    </tr>
    <tr>
     <td>French1</td>
     <td><asp:CheckBox runat="server" ID="CheckBox1" CssClass="EnhancedFrench" /></td>
    </tr>
    <tr>
     <td>French2</td>
     <td><asp:CheckBox runat="server" ID="CheckBox2" CssClass="EnhancedFrench" /></td>
    <tr>
    <tr>
     <td>French3</td>
     <td><asp:CheckBox runat="server" ID="CheckBox3" CssClass="EnhancedFrench" /></td>
    </tr>
    <tr>
     <td>French4</td>
     <td><asp:CheckBox runat="server" ID="CheckBox4" CssClass="EnhancedFrench" /></td>
    </tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:06:45.860

我没有检查它，但它应该工作

```
$(function () {
  $('#<%=chkFrench.ClientID %>').click(function(){
  if($(this).is(':checked')){
     $('.EnhancedFrench').show();

 }else{
   $('.EnhancedFrench').hide();
 }
  }); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:12:51.760

我运行了一个快速示例。对于提供的代码，您可以尝试使用如下所示的内容。

如果选中最后一个复选框，这应该隐藏所有复选框

```
<script type="text/javascript">

    $(function () {
        $('[id$="chkFrench"]').bind('change', function () { enable_cb(); });
    });

    function enable_cb() {
        if ($('[id$="chkFrench"]').is(':checked')) {
            $('span.EnhancedFrench:gt(0)').hide();
        }
        else {
            $('span.EnhancedFrench:gt(0)').show();
        }
    }

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:18:19.417

我建议您将复选框保留在容器中并使用该容器来显示隐藏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:51:17.313

您也可以通过以下方式执行此操作：

```
$('tr:nth-child(5)').find('input[type=checkbox]').on('change',function(){
    $(this).parent('td').parent('tr').siblings().fadeToggle();
}); 
```

# sql-server - SQL 声明日期时间 - 1001-01-01

> ID：15528553
> 
> 赞同：6
> 
> 时间：2013-03-20T15:56:43.910
> 
> 标签：sql-server, datetime

我正在尝试声明一个值为***1001-01-01 00:00:00.000的日期时间变量***

我尝试了以下方法但没有运气

```
declare @d1 datetime = '1001-01-01';
declare @d2 datetime = 10010101;
declare @d3 datetime = '1001-01-01 00:00:00';
declare @d4 datetime = cast ('1001-01-01' as datetime) 
```

我收到以下错误

```
Msg 242, Level 16, State 3, Line 1
The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.
Msg 8115, Level 16, State 2, Line 2
Arithmetic overflow error converting expression to data type datetime.
Msg 242, Level 16, State 3, Line 3
The conversion of a varchar data type to a datetime data type resulted in an out-of-range value.
Msg 242, Level 16, State 3, Line 4
The conversion of a varchar data type to a datetime data type resulted in an out-of-range value. 
```

是否可以声明一个`datetime`可以保存值***1001-01-01 00:00:00.000***的变量？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T15:58:57.707

数据类型的最短有效日期`DateTime`是 1753 年 1 月 1 日。

尝试[`DATETIME2`](http://msdn.microsoft.com/en-us/library/bb677335.aspx)，使用：

```
DECLARE @d4 DATETIME2 = '1001-01-01' 
```

最短有效日期`DATETIME2`为`0001-01-01`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T15:59:16.417

你不能那样做。值可以具有的最早日期[`datetime`](http://msdn.microsoft.com/en-us/library/ms187819.aspx)是 1753-01-01。

最新版本的 Sql Server 具有[`datetime2`](http://msdn.microsoft.com/en-us/library/bb677335.aspx)更大范围的数据类型：

```
declare @d1 datetime2 = '1001-01-01'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T15:59:37.163

最小 SQL 日期时间是 1753 年 1 月 1 日，因此您的日期确实超出了范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T15:59:19.080

SQLServer 日期时间必须是 1/1/1753 < X < 12/31/9999

[http://msdn.microsoft.com/en-us/library/ms187819.aspx](http://msdn.microsoft.com/en-us/library/ms187819.aspx)

您将无法将 DateTime 设置为那一年，因此您可能希望将其存储为字符串并将其留给上层语言处理。

# java - 手指触摸/按压/拖动

> ID：15528555
> 
> 赞同：0
> 
> 时间：2013-03-20T15:56:51.057
> 
> 标签：java, android

我知道有手指触摸等的听众。但我想知道如何欺骗手指向上/向下/向左/向右拖动。

是否有任何类型的听众？或者它涉及一些数学。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:06:21.917

尝试查看[Android 开发人员资源](http://developer.android.com/training/gestures/detector.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:13:07.000

用这个

```
@Override
    public boolean onTouchEvent(MotionEvent e) {
        switch (e.getAction()) {
        case MotionEvent.ACTION_DOWN:
            break;
            case MotionEvent.ACTION_MOVE:
                break;
            case MotionEvent.ACTION_UP:
                break;
            }

        return true;
    } 
```

# android - 谷歌地图上的自定义标记，API V2 android

> ID：15528557
> 
> 赞同：0
> 
> 时间：2013-03-20T15:56:59.660
> 
> 标签：android, google-maps-markers, google-maps-android-api-2

我需要在谷歌地图上添加自定义标记，android。

我正在使用 API V2。

您能否分享我如何将对象添加到我需要在标记单击时使用的标记。

这是我的实现。.........................................

1- 这就是我添加标记以在地图上显示它的方式。

```
Marker cardItemMarker = mMap
    .addMarker(new MarkerOptions()
    .position(cardItemlatLon)
    .title(cardItem.company_name)
    .snippet(cardItem.card_name)
    .icon(BitmapDescriptorFactory
    .defaultMarker(BitmapDescriptorFactory.HUE_AZURE))); 
```

2-我想在需要显示imageview的地方制作自定义标记，那么我应该如何传递图像的url。所以我需要添加自定义标记。我对如何添加自定义标记了解不多。在以前的地图实现中，我们创建了 mapOverlay 类（数据类），用于保存细节，但我不知道如何在 API V2 中创建。

.....................

有什么帮助吗？？

谢谢，

拉克什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:55:43.377

> 在以前的地图实现中，我们创建了 mapOverlay 类（数据类），用于保存细节，但我不知道如何在 API V2 中创建。

您不能在 Maps V2 中按原样执行相同的操作，`Marker`并且`final`无法扩展。

我最好的建议是*不要*使用`snippet()`实际的文本片段，而是使用它来保存一个`HashMap`或类似数据结构的密钥。您可以覆盖信息窗口的绘图，使其不显示代码段。我在这里有一个例子：[https ://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Models](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Models)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T20:15:57.963

您可以使用此库将对象添加到 Marker：[Android Maps Extensions](http://code.google.com/p/android-maps-extensions/)。在回调中创建标记和 getData 后使用 setData。

# ruby-on-rails - 使功能规格不那么不稳定/脆弱

> ID：15528558
> 
> 赞同：0
> 
> 时间：2013-03-20T15:57:05.253
> 
> 标签：ruby-on-rails, capybara, specifications

我正在编写功能规范以确保我的应用程序的`Add Task`行为正常运行。我已经多次运行相同的规范而根本没有编辑代码，有时一个或两个规范都会失败。

我想知道我是否正在做一些特定的事情使我的规格表现不稳定（这就是开发人员在谈论脆弱规格时的意思吗？我想是这样......）。我添加了注释以澄清代码。任何建议表示赞赏。谢谢。

**task_feature_spec_helper**

```
include ApplicationHelper

def click_task
  visit order_path(order.id)
  click_link("Add Task")
end

def add_valid_task
  click_task

  within("#add_task") do
    select 'foo1@example.com', from: 'Assignee'
    fill_in 'Due at', {:with => '15/03/25'}
    fill_in_html("task__textarea", {:with => task[:description]})
    click_button "Save"
    end
end

def add_empty_task
  click_task

  within("div#add_task") { click_button "Save" }
end 
```

**task_feature_spec** 需要“spec_helper”

```
feature 'Create Task' do
  let(:order) {create(:order)}
  let(:task) {attributes_for(:task)} #using attributes for to prevent extra object 
  before(:each) {login_user}          #initliaztion (user squence only goes up if the user is 
                                       #saved.)

  scenario 'with valid description' , :js => :true do

    add_valid_task
    expect(page).to have_content('Task Created')   #'Task Created' is a momentary JS notification
    sleep 1                                         #this pause allows elements below to render

    within("div#tasks-table") do
      expect(page).to have_content('Due on 03/15/25')
      expect(page).to have_content('Assigned to foo1@example.com')
      expect(page).to have_content('Displayed on Ad Hoc')
    end
  end

  scenario 'with invalid (empty) description' , :js => :true do

    add_empty_task
    sleep 1

    expect(page).to have_content("can't be blank")
  end 
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:42:04.643

我的解决方案是删除 spec `expect(page).to have_content('Task Created')`。由于这是一条 JS toastr 消息，我很难将其隔离，最后我决定测试它对应用程序的整体功能并不重要。我还必须删除`Due on`，因为这会过去一半时间而另一半失败，即使它会 a）在 bot 浏览器上输入，并且 b）在输入后出现在 bot 页面上。因为我能够进入它，所以我认为测试它的存在不是必需的。

在调试时，我看到了[Jonas Nicklas](http://www.elabs.se/blog/51-simple-tricks-to-clean-up-your-capybara-tests)对清理我的规范很有帮助的这篇文章。

最后，我最终离开`sleep`了我的规范，实际上将它增加到了`sleep(10)`，这增加了规范通过的可能性。

# vb.net - 在表单中向前和/或向后移动控件

> ID：15528559
> 
> 赞同：0
> 
> 时间：2013-03-20T15:57:06.790
> 
> 标签：vb.net, panel

当我 MouseDown 时，我试图将面板向前移动，目前我正在使用 `panel.BringToFront()` 然后当我 MouseUp 我想将面板发回时，我正在尝试使用 `panel.SendToBack()` 当我运行时，它将面板向前移动，但不发送它又倒退了。除了使用 BringToFront 或 SendToBack 之外，还有其他方法可以在 Z 轴上操作控件吗？

我正在使用 VB Express 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:08:37.590

是的尝试：

```
 Me.panel.Parent.Controls.SetChildIndex(me.panel, zIndex) 'Put instead of zIndex the Zorder number that you want 
```

# ios - iOS：获取位置之间的距离

> ID：15528565
> 
> 赞同：2
> 
> 时间：2013-03-20T15:57:13.513
> 
> 标签：ios, mkmapview, mapkit, geocoding

**请不要在未阅读整个问题的情况下标记为重复**

有没有办法在**不**显示地图的情况下获取iOS 中两点之间的*行驶*路线的长度？`CLLocation`

 ****不是乌鸦飞的那样！！！但就像在 MK 驾驶模式下**

我不能使用谷歌，因为我必须在谷歌地图上显示结果。

我找到了这段代码，但这仅在显示 iOS-Map 时有效：

```
-(void)showMapRouteFromCurrentLocation
{
    CLLocationCoordinate2D currentUserCoordinate = YourCoordinate;
    //currentUserCoordinate.latitude=  +53.509980;
    //currentUserCoordinate.longitude =  -0.133700;

    MKPlacemark *place = [[MKPlacemark alloc]
                          initWithCoordinate:currentUserCoordinate
                          addressDictionary:nil];

    MKMapItem *mapItem = [[MKMapItem alloc]initWithPlacemark:place];

    NSDictionary *routeOption = [[NSDictionary alloc] initWithObjectsAndKeys:MKLaunchOptionsDirectionsModeDriving,MKLaunchOptionsDirectionsModeKey, nil];

    [mapItem openInMapsWithLaunchOptions:routeOption];
} 
```

但这不是我需要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-06T05:48:51.483

正如 Brainray 所说，从 iOS7 开始，您可以执行以下操作：

```
MKDirectionsRequest *routeRequest = [[MKDirectionsRequest alloc] init];
routeRequest.transportType = MKDirectionsTransportTypeAutomobile;
[routeRequest setSource:startPoint]; // startPoint is an MKMapItem with the starting lat/long coordinate
[routeRequest setDestination :endPoint]; // endPoint an MKMapItem with the ending lat/long coordinate

MKDirections *routeDirections = [[MKDirections alloc] initWithRequest:routeRequest];
[routeDirections calculateDirectionsWithCompletionHandler:^(MKDirectionsResponse * routeResponse, NSError *routeError)
{
    // Check for error and then do something with the route...
    MKRoute *route = routeResponse.routes[0];
}]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:02:09.680

据我所知，使用 Apple 的 API 是不可能的。您需要使用第 3 方系统来询问两点之间的方向。像谷歌一样，但他们通常有其他限制，比如在他们的地图上显示它。（正如你提到的）。

不确定他们是否有类似的要求，但您可以查看[Map Quest 的 Api](http://platform.beta.mapquest.com/directions/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-24T08:37:12.760

使用 iOS7，您[可以在 API 中获得完整的指导](https://developer.apple.com/library/ios/documentation/UserExperience/Conceptual/LocationAwarenessPG/ProvidingDirections/ProvidingDirections.html#//apple_ref/doc/uid/TP40009497-CH8-SW5)

看看这个教程[教程](http://www.shinobicontrols.com/blog/posts/2013/10/08/ios7-day-by-day-day-13-route-directions-with-mapkit/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-13T14:53:33.030

虽然 Ken 给出了很好的答案，但我还将添加将坐标转换为 MKMapItem 的方式：

```
+ (void)distanceByRoadFromPoint:(CLLocationCoordinate2D)fromPoint
                        toPoint:(CLLocationCoordinate2D)toPoint
              completionHandler:(MKDirectionsHandler)completionHandler {

    MKDirectionsRequest *request = [[MKDirectionsRequest alloc] init];
    request.transportType = MKDirectionsTransportTypeAutomobile;

    request.source = [self mapItemFromCoordinate:fromPoint];
    request.destination = [self mapItemFromCoordinate:toPoint];

    MKDirections *directions = [[MKDirections alloc] initWithRequest:request];
    [directions calculateDirectionsWithCompletionHandler:^(MKDirectionsResponse * routeResponse, NSError *routeError) {

         MKRoute *route = [routeResponse.routes firstObject];
         CLLocationDistance distance = route.distance;
         NSTimeInterval expectedTime = route.expectedTravelTime;

         //call a completion handler that suits your situation

     }];    

   }

+ (MKMapItem *)mapItemFromCoordinate:(CLLocationCoordinate2D)coordinate {

    MKPlacemark *placemark = [[MKPlacemark alloc] initWithCoordinate:coordinate addressDictionary:nil];
    MKMapItem *item = [[MKMapItem alloc] initWithPlacemark:placemark];

    return item;

} 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-04-26T10:47:12.780

```
give latitude2,lang of destination   and latitude,longitude of first place.

this function return distance in kilometer.

  -(double)distanceFilter:(double) latitude2 :(double)lang{
        double distance=(((acos(sin((latitude*M_PI/180)) * sin((latitude2*M_PI/180))+cos((latitude*M_PI/180)) * cos((latitude2*M_PI/180)) * cos(((longitude- lang)*M_PI/180))))*180/M_PI)*60*1.1515*1.609344);

        return distance;
    } 
```**

# winmerge - WinMerge - 有没有办法排列移位/移动的代码块？

> ID：15528572
> 
> 赞同：6
> 
> 时间：2013-03-20T15:57:37.510
> 
> 标签：winmerge

使用 WinMerge 时，我正在查看一个文件，该文件已将一段代码插入到一个函数中，这会导致文件的其余部分在比较中不同步。我的要复杂得多，但与下面的简单示例基本相同：

```
 FILE 1                   FILE 2
1 int main() {             int main() {
2
3   int a = 3;               int a = 3;
4   a += 5;                  for(int i = 0; i < a; ++a)
5 }                             a += i;
6                           
7                            a += 5;
8                         } 
```

WinMerge 不会将 for 循环识别为插入的块并显示文件的其余部分相同，而是会在第 4、5、6、7、8 行显示差异。我希望它将文件 1 的第 4 行同步到文件 2 的第 7 行，并使其成为更清晰的差异。有这个设置吗？我玩过“移动代码块”设置，但它只是在文件后面突出显示匹配的代码块，而不是将它们排列起来。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:09:29.480

我知道你的意思，但你的例子对我有用。

当比较在空行上同步时，我遇到了问题。

我正在研究线路过滤器...

# java - 来自Java的Rhino JS / ScriptEngine - 整数输入，双打？

> ID：15528573
> 
> 赞同：3
> 
> 时间：2013-03-20T15:57:38.163
> 
> 标签：java, javascript, rhino

我正在尝试 Rhino 在 Java 中嵌入 Javascript。我注意到，当我评估一个在 Javascript 中将两个整数相加的脚本时，结果以 Double 形式返回。

```
ScriptEngine engine = new ScriptEngineManager().getEngineByName("JavaScript");
engine.put("x", 3);
engine.put("y", 4);

assertEquals(3, engine.eval("x")); // OK
assertEquals(4, engine.eval("y")); // OK
assertEquals(7, engine.eval("x + y")); // FAILS, actual = (Double) 7.0 
```

那么为什么`x + y`表达式返回一个双精度而不是一个整数呢？

Javascript 本身是否在做一些我不理解的类型推广？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:05:26.043

今日趣事：javascript (ECMAScript) 中的所有数字都是双精度的。

> Number 类型正好有 18437736874454810627（即 264−253+3）个值，代表二进制浮点算术的 IEEE 标准中指定的双精度 64 位格式 IEEE 754 值，除了 9007199254740990（即, 253−2) IEEE 标准的不同“非数字”值在 ECMAScript 中表示为单个特殊的 NaN 值。

[http://people.mozilla.org/~jorendorff/es6-draft.html#sec-8.1.5](http://people.mozilla.org/~jorendorff/es6-draft.html#sec-8.1.5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:03:33.870

JavaScript 只有一种数字类型 - [Number](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number)，类似于 Java 的[Double](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html)类型。我希望引擎强制类型`Number`执行算术。

# sql - 实现“喜欢”功能

> ID：15528577
> 
> 赞同：2
> 
> 时间：2013-03-20T15:57:47.087
> 
> 标签：sql, nosql, sql-like

我需要创建一个包含“喜欢”的应用程序。这意味着具有唯一 ID 的人*可以*喜欢具有唯一 ID 的项目*，*但只能喜欢*一次*。*不能不*喜欢该项目。我只是想出了一张小桌子，里面有`user_id`和`item_id`列，在插入之前我应该​​检查这个用户是否已经喜欢这个项目。在我看来，这不是完成任务的最佳方式，因为会有很多（约 100 万）用户和很多项目，所以表应该很大，这会影响搜索和插入速度。有没有其他方法可以做到这一点？或者如果我的方法适合这里，那么将这些信息存储在数据库中的最佳方法是什么？目前我正在使用MySQL数据库，这里使用NoSql更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:13:15.843

首先要做的是在两列（组合）上设置一个“唯一”约束，以便它们的组合是唯一的。不确定 MySQL 是否支持这一点，但 MSSQL express 确实支持，并且您最多可以拥有 8 GB 的数据，因此一百万用户甚至没有接近其限制——如果您拥有超过一百万的用户，则可以很好地扩展。您应该在liker 和like 上创建一个覆盖索引并使其独一无二。使用 80 填充插入将是即时的，查找也是如此。这是一个关系问题，因此关系数据库将在速度和效率方面限制任何非关系（NO SQL）数据库。你没有提到喜欢和喜欢是否可以交换 - 我想不是

# css - 无法定位网站

> ID：15528579
> 
> 赞同：0
> 
> 时间：2013-03-20T15:57:48.383
> 
> 标签：css, css-float

不久前买了一个剧本，有点老了。无论如何，页面左对齐。我对编程了解不多。我搜索了 Google、YouTube 和 Stack Overflow 来找到我的简单问题的答案，但没有运气。我很确定它需要以（div）标签为中心，但细节......我迷路了。请看一下帮助。

```
a, a:visited, a:active {
color: #9b7e5b;
}
a.toplink, a.toplink:hover, a.toplink:visited, a.toplink:active {
color: #FFFFFF;
    font-size: 12px;
}
.forCopyright {
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 11px;
    COLOR: #FFFFFF; 
text-align: center;
background-color: #B57C37;
}
a.forCopyright {
text-decoration: underline;
}
body, td, .forTexts {
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 12px;
color: #000000;
}
a.menutxt, a.menutxt:hover, a.menutxt:visited, a.menutxt:active {
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 11px;
color: #9b7e5b;
}
.menutxt {
PADDING-RIGHT: 2px;
    PADDING-LEFT: 5px;
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 10px;
color: #9b7e5b;
}
.infotxt {
PADDING-RIGHT: 5px;
    PADDING-LEFT: 5px;
font-size: 10px;
}
th {
font-family: Verdana, Arial, Helvetica, sans-serif;
font-size: 11px;
color: #000000;
}
.title {
font-family: Verdana, Arial, Helvetica, sans-serif;
background-image: url("images/bg.jpg");
font-size: 12px;
background-color: #FFFFFF;
    padding-bottom: 4px;
background-repeat: repeat-x;

}
.inpts {
BORDER-RIGHT: #9b7e5b 1px solid; 
    BORDER-TOP: #9b7e5b 1px solid; 
    FONT-SIZE: 10px; 
    BORDER-LEFT: #9b7e5b 1px solid; 
    COLOR: #000000; 
    BORDER-BOTTOM: #9b7e5b 1px solid; 
    FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif; 
    BACKGROUND-COLOR: #ffffff
}
.sbmt {
BORDER-RIGHT: #9b7e5b 1px solid; 
    BORDER-TOP: #9b7e5b 1px solid; 
    FONT-SIZE: 10px; 
    BORDER-LEFT: #9b7e5b 1px solid; 
    COLOR: #000000; 
    BORDER-BOTTOM: #9b7e5b 1px solid; 
    FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif; 
    BACKGROUND-COLOR: #DEC8AD; 
}
a.hlp, a.hlp:active, a.hlp:visited, a.hlp:hover {
font-family: verdana;
font-size: 12px;
color: black;
text-decoration: none;
cursor: help;
}
.line {
background-color: #B57C37;
}
.bgcolorleft {
background-color: white;
}
.bgcolormain {
background-color: white;
}
.bgcolorright {
background-color: white;
}
div.framebody {
text-align: center;
}
div.main {
text-align: center;
margin: 0 auto; 
 }
td.inheader {
background-image: url("images/bg.jpg"); 
background-color: white;
font-weight: bold;
text-align: center; 
    padding-left: 2px;
    padding-right: 2px;
    padding-top: 2px;
    padding-bottom: 4px;
background-repeat: repeat-x;
}
td.item {
background-color: E2B176;   
text-align: center; 

}
h3 {
COLOR: #664422; 
    FONT-FAMILY: Verdana, Arial, Helvetica, sans-serif;
text-align: center;
}
.calendartable {
background-color: #664422;
text-align: center;
}
.calendartablebg {
background-color: white;
}
.calendarweek {
background-color: #664422;
color: #FFFFFF;
text-align: center;

}
td.gray {
    color: gray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:02:36.223

您可以尝试创建一个容器 div 来包裹您的整个身体。像这样：

```
<body>
  <div class="container">
  ...
  ...Your Website Code...
  ...
  </div> <!-- end container -->
</body> 
```

然后在你的CSS中：

```
.container {
  width: 950px;
  margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:03:30.380

我相信“主要” div 是您想要居中的。您需要在其中定义宽度。

```
div.main {
text-align: center;
margin: 0 auto; 
width:90%;
 } 
```

或者

```
div.main {
text-align: center;
margin: 0 auto; 
width:1000px;
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T18:08:59.657

如果要将 div 的内容与中心对齐，请使用 CSS 属性：

```
text-align:center; 
```

如果要将容器 div 与中心对齐，则为其指定宽度并使用 CSS 属性 margin:0 auto;

```
div{width:1000px;margin:0 auto;} 
```

最后，如果没有什么对您有用`positon:relative;`，则用于父元素，然后子元素应该有`position:absolute;top:XXpx; left:XXpx;`

请确保您[**在这里阅读了一些基本的 CSS**](http://www.w3schools.com/css/default.asp)。但也不要忽略此[**链接**](http://w3fools.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:02:02.547

没有 HTML 很难确定，但我猜你需要 div.main 的宽度：

```
div.main {
  text-align: center;
  margin: 0 auto; 
  width: 960px;
} 
```

# c# - IComparable 不需要是逆变的？

> ID：15528580
> 
> 赞同：2
> 
> 时间：2013-03-20T15:57:54.263
> 
> 标签：c#, oop, interface, contravariance, icomparable

在下面的代码中，我的目标是 .NET 2.0 Framework。

我可以将 Programmer（派生）对象传递给期望 Person（基类）的 Compare 方法

但是由于程序员是人（简单的 OO 概念），我声称在 .NET 4.0 中，IComparable 接口声明中的“in”关键字是“矫枉过正”:)

在我给微软写一封关于他们删除 in 关键字的电子邮件之前，请尝试以其他方式说服我:)

```
class Program
{
    static void Main(string[] args)
    {
        var person = new Person();

        var test = person.CompareTo(new Programmer());
    }
}

internal class Person : IComparable<Person>
{
    public int Id { get; set; }
    public string Name { get; set; }

    public int CompareTo(Person other)
    {
        return this.Id - other.Id;
    }
}

class Programmer : Person
{
    public string ProgrammingLanguage { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:01:03.010

协变和逆变与传递给方法的类型无关。它是关于*包含*方法的通用接口。

使用`in`以下代码是合法的：

```
IComparable<Person> foo = ...;
IComparable<Programmer> bar = foo; 
```

没有`in`它将是非法的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:03:53.397

根据[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)，如果`IComparer<>`实现可以比较`Person`实例，那么它可以比较派生自 的类型的对象`Person`。`in`关键字允许您使用`IComparer<Person>`比较器来比较类型的对象（`MyPerson`派生自`Person`）。一个示例用例是一个比较器，它`Person`按名称对实例进行排序以用于`SortedList<Person>`; 其中逆变接口还允许与 . 一起使用相同的比较器`SortedList<MyPerson>`。

# java - spring 3.1 maven依赖和pom.xml

> ID：15528583
> 
> 赞同：0
> 
> 时间：2013-03-20T15:58:00.873
> 
> 标签：java, spring, maven, spring-mvc, pom.xml

我是春天的新手。在我的办公室里，我是第一个使用的人`spring framework`。所以没有对我的指导。如果这是一个简单的问题，请原谅。所以请不要犹豫编辑我的问题。

现在，我创建了简单易用`employee management MVC application`的. 现在愿意搬家`register``delete``login employee detatils``spring 3.0``spring 3.1`

今天我听到了一些关于春天的措辞，比如`Maven`，`pom.xml`。

在我的应用程序中，我从未使用过`maven dependencies`and `pom.xml`。我不知道在哪里使用它以及何时需要它。

我用谷歌搜索了很多，但从未找到关于这些事情的可靠答案。

谁能告诉我`maven`春天是什么？何时使用以及在何处使用？还有`pom.xml`.

好的答案绝对值得赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:02:19.537

[Maven](http://maven.apache.org/)与 Spring 无关。它是一个项目构建工具，提供了许多功能，例如依赖管理、编译、打包、单元测试等等。您可以将其视为类固醇上的[ant](http://ant.apache.org/) / [makefile](http://en.wikipedia.org/wiki/Make_%28software%29)。

`pom.xml`或[项目对象模型](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)文件是*mavenized*项目（即打算使用 Maven 构建的项目）的描述符。在这个`pom.xml`文件中，您可以指定 Spring 的依赖项，而无需向`CLASSPATH`.

例如，正确安装 Maven 后，您可以在您的`pom.xml`:

```
<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>3.0.0.RELEASE</version>
    </dependency>
</dependencies> 
```

并且只需编译您的 Spring 项目`mvn compile`而不向类路径添加任何内容。Maven 将从在线存储库下载所有需要的依赖项的 jar。Maven 网站上的[入门](http://maven.apache.org/guides/getting-started/index.html)指南是一个很好的入门资源。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:02:10.887

简而言之：-

**Maven**是一个可用于构建和管理任何基于 Java 的项目的工具。

**pom.xml**是一个 XML 文件，其中包含有关项目的信息和 Maven 用于构建项目的配置详细信息。

有关完整的详细信息，请参阅文档。[Maven](http://maven.apache.org/what-is-maven.html) , [pom.xml](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html)

# android - Android GridView 在选项卡模拟器上返回空值

> ID：15528585
> 
> 赞同：0
> 
> 时间：2013-03-20T15:58:04.917
> 
> 标签：android, android-layout, android-intent, android-widget

我有我的活动代码：

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.movies_category);
      GridView gridView = (GridView) findViewById(R.id.grid_view);//Here It's retuning Null Value For Simulator Tab
   // Instance of ImageAdapter Class
      gridView.setAdapter(new ImageAdapter(this));
} 
```

movies_category.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/screen_background">      

 <LinearLayout
                android:id="@+id/linearLayout1"
                android:layout_width="wrap_content"
                android:layout_height="fill_parent"
                android:orientation="vertical"
                android:layout_alignBottom="@+id/linearLayout01"
                android:layout_marginBottom="55dp"> 

<ImageView 
                  android:id="@+id/imageView1"
                  android:layout_width="fill_parent"
                  android:layout_height="50dp"
                  android:src="@drawable/banner"
                  android:layout_alignParentTop="true"
                  android:scaleType="fitXY"/>

<GridView 
    android:id="@+id/grid_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:numColumns="auto_fit"
    android:columnWidth="90dp"
    android:horizontalSpacing="10dp"
    android:verticalSpacing="10dp"
    android:gravity="center"
    android:stretchMode="columnWidth" >  

</GridView>
</LinearLayout>
</RelativeLayout> 
```

当我尝试在 Nexusone Emulator 上执行应用程序时，我能够成功显示我的 GridView（gridView 对象有一个值）

但是当我尝试在 Tab Emulator 上执行时，相同的代码，我无法显示 GridView（gridView 对象显示 Null）

**堆栈跟踪：**

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity 

    ComponentInfo{com.tel.movies/com.tel.movies.MovieCategoryViewAcivity}: java.lang.NullPointerException
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
        at android.app.ActivityThread.access$2300(ActivityThread.java:125)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:123)
        at android.app.ActivityThread.main(ActivityThread.java:4627)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:521)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
        at dalvik.system.NativeStart.main(Native Method)
     Caused by: java.lang.NullPointerException
        at com.oone.movies.MovieCategoryViewAcivity.onCreate(MovieCategoryViewAcivity.java:49)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
        at android.app.ActivityThread.performLaunchActivity 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T07:28:09.377

对于具有不同屏幕分辨率和尺寸的 Tabs Simulator 以及 Mobile Simulator，我们在 Android 中有单独的布局文件夹，例如（layout、layout-land、layout-large、layout-large-land 等......）我们需要定义我们定义的布局 xml 文件..

在我的查询中，我需要在所有 LayoutFolders 中定义 movies_category.xml 文件才能成功执行应用程序

# html - Firefox CSS white-space:nowrap 不被尊重

> ID：15528586
> 
> 赞同：3
> 
> 时间：2013-03-20T15:58:05.823
> 
> 标签：html, css, google-chrome, firefox

我有一个导航菜单，它有一个下拉菜单，在那个下拉菜单中，可能有一个不确定的数量`<ul>`需要坐在彼此的左边，并且父 li 的增长和缩小取决于`<ul>`.

这在 chrome 中可以正常工作，但在 Firefox 中，它们`<ul>`位于彼此下方，我做错了什么？

这是一个小提琴，看到下拉悬停在品牌上

[http://jsfiddle.net/QUK8C/](http://jsfiddle.net/QUK8C/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:07:15.353

li 是向左浮动的，它们不受`white-space`您的影响，应该`display:inline-block`改用。

```
nav ul.dropdown > li {
    display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-17T08:49:27.057

遇到这个问题，并没有从网上找到任何解决方案，但不知何故设法找到了自己的解决方案。因此，只需将元素定位到`absolute`就可以了。

```
<div style="position: relative">
    <span style="position: absolute; text-overflow: ellipsis; white-space: nowrap; overflow: hidden;">
        longtexthereuuurrrrrggghhhhhhh!!!
    </span>
</div> 
```

# iphone - 当应用程序进入后台时，我的视图控制器被释放

> ID：15528594
> 
> 赞同：0
> 
> 时间：2013-03-20T15:58:22.187
> 
> 标签：iphone, ios, objective-c, automatic-ref-counting

当应用程序进入后台时，我的 View Controller 类被释放。我正在使用ARC。

我有一个 UIViewController，它在应用程序变为活动状态并执行方法时订阅通知。但是一旦应用程序在后台运行大约 30 秒然后恢复，应用程序就会崩溃，并显示“发送到已释放实例的消息”。

启用 Zombie 对象表明 View Controller 本身就是 Zombie。

谢谢！

**我的视图控制器的实例化（在 AppDelegate 中）：**

```
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
MyViewController *myViewController = [storyBoard instantiateViewControllerWithIdentifier:@"MyViewController"]; 
```

**AppDelegate 中的前台通知：**

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [[NSNotificationCenter defaultCenter] postNotificationName:kNotificationForegrounded object:self];
} 
```

**视图控制器中的前台通知：**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(resumeForeground) name:kNotificationForegrounded object:nil];
} 
```

**我尝试在 AppDelegate 中创建一个强引用，但视图控制器仍然被释放：**

```
@property (strong, nonatomic) MyViewController *myViewController; 
```

**我尝试将视图控制器添加到数组并在 AppDelegae 中对数组进行强引用，但仍然得到相同的结果：**

```
@property (strong, nonatomic) NSMutableArray *viewControllers;
//...
UIStoryboard *storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
MyViewController *myViewController = [storyBoard instantiateViewControllerWithIdentifier:@"MyViewController"];
self.viewControllers = [[NSMutableArray alloc] init];
[self.viewControllers addObject:myViewController]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:29:55.073

这里有两个问题 - 您的应用程序委托没有正确管理其对象所有权，并且视图控制器没有自行清理。

每次执行代码来实例化. 时，您都会通过替换为新实例`MyViewController`来释放所有现有视图控制器的所有权。`self.viewControllers`只分配一次，并根据需要添加和删除对象。此外，您永远不会使用您的强属性，只使用同名的本地实例变量。您可能实际上应该确保您希望此代码一遍又一遍地运行（鉴于您描述的症状和信息，我假设它是）。

此外，在`MyViewController`, 中实施`dealloc`（如果您已经实施，则添加到其中）：

```
- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T17:57:21.733

**问题：**

1.  `MyViewController`每次`MyViewController *myViewController = [storyBoard instantiateViewControllerWithIdentifier:@"MyViewController"];`调用时都会重新实例化。

2.  使用 ARC，看起来当应用程序进入前台时，已经完成了一些清理工作。

3.  当应用程序移动到前台时，`@dealloc`前台通知同时从两个不同的线程调用，因此当在通知上执行选择器方法时，（无引用）视图控制器已被标记为或将被释放。

**解决方案：**

正如@Carl 建议的那样，我添加了`[[NSNotificationCenter defaultCenter] removeObserver:self];`除了不是 in 之外`@dealloc`，而是在视图控制器使用完成的较早时间点。我认为在重新实例化之前就这样做也可以。

# html - 在下拉导航中突破 li-Element

> ID：15528596
> 
> 赞同：1
> 
> 时间：2013-03-20T15:58:25.423
> 
> 标签：html, css, drop-down-menu, navigation, overflow

我的基于 CSS 的下拉导航有一个小问题

这是一个代表其当前状态的小小提琴：http:
[//jsfiddle.net/VXafN/](http://jsfiddle.net/VXafN/)
滑出应该完全基于 CSS，就像在小提琴中一样

```
#main-nav > ul > li:hover > ul {
    display: block;
} 
```

问题在于，每个子 <ul>（黄色边框）的父 <li> 元素（红色边框）会拉伸到子导航的完整大小。
在我的演示中，您可以看到我没有在顶级 <li> 元素上放置任何固定宽度，我不希望它们具有固定宽度。**如果子导航的内容太大，它们太大。**

我想要实现的是这样的：http:
[//jsfiddle.net/6XERQ/](http://jsfiddle.net/6XERQ/) （刚刚添加了固定宽度）
但**在 <li> 元素上没有固定宽度，**在最好的情况下，**ul 应该突破parent-<li> 元素**，只取自动宽度（黄色边框）

之后我可以使用 JavaScript 和/或操作 DOM，但我敢打赌有一个更干净、基于 CSS 的解决方案。在这种情况下，我不想使用任何类型的黑客或不干净的标记。

**child-<ul> 应该具有其孩子需要的完整宽度，但 parent-<li> 仍应仅根据其使用的链接文本进行调整**

有没有任何非hacky的方法来实现这一点？
我将保持更新并提供相应的任何可能信息

提前感谢您的帮助和启发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:04:19.510

[http://jsfiddle.net/6XERQ/2/](http://jsfiddle.net/6XERQ/2/)

`position:absolute`在您的子菜单上使用。

使用此的实时站点示例：http: [//khill.mhostiuckproductions.com/siteLSSBoilerPlate](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate)

CSS：

```
#main-nav > ul > li {
    position: relative;
    padding: 5px;
    float: left;
    border: 1px dashed red;
    white-space: nowrap;
    width: 120px;
}

#main-nav > ul > li:hover > ul {
    display: block;
    position: absolute;
    top: 30px;
    left: 0;
} 
```

# scala - 处理异常以进行理解

> ID：15528597
> 
> 赞同：2
> 
> 时间：2013-03-20T15:58:26.237
> 
> 标签：scala, exception

我应该如何处理理解中的潜在异常？在此示例中，我想处理`MatchException`行格式不正确时发生的 a 。我想抛出一个包含行字符串的更多信息异常。问题是行字符串仅*在*for 理解中已知，但传统的错误处理`try/catch`将在 for 理解*之外*。

```
 val gold = Resource.using (Source.fromFile(file)) { source =>
      (for {
        line <- source.getLines
        Array(annotation, string, _ @ _*) = line.split("\t")
        boolean = if (annotation == "1") true else false
      } yield {
        string -> boolean
      }).toMap
    } 
```

Scala 2.10`Try`在这里可能会有所帮助，但我仍在使用 2.9.2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T17:10:13.597

使用匹配运算符似乎更简单

```
line.split("\t") match {
  case Array(a, s, _ @ _*) => (a, s)
  case _ => throw new MatchError("Line '"+line+"' not in proper form")
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:33:08.563

如果您只想将异常更新为更详细，您可以：

```
for {
  line <- List("salmon\tcod", "wooble")
  (annotation, string) = try { 
    val Array(a, s, _ @ _*) = line.split("\t"); (a, s)
  } catch {
    case me: MatchError => throw new MatchError("Line '"+line+"' not in proper form")
  }
  boolean = (annotation=="1")
} yield (string -> boolean) 
```

也就是说，进行解析并在`try`块内返回您想要的内容。 `Try`在这里只是有点帮助；我不会担心的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-20T16:24:51.323

如果按照 om-nom-nom 的建议，你得到了 Try，你可以做这样的事情

```
Array( annotation, string, _@ _* ) = 
                Try( line.split( "\t" )).recover({ case e: Exception => Failure(new MyException("my message")) }).get 
```

简而言之，您的*恢复*，将 Exception 重新包装为您想要的内容，然后解包结果或使用抛出新异常`get`

如果你无法掌握Scala`Try`中`try...catch`的 as is an expression 而不是 statement，你可以使用它编写几乎相同的东西。

```
Array( annotation, string, _@ _* ) = 
try { line.split( "\t" )} catch { case e: Exception =>  throw new MyException("my message")} 
```

# c# - C# - 列出域中的所有 .aspx 页面

> ID：15528599
> 
> 赞同：0
> 
> 时间：2013-03-20T15:58:29.707
> 
> 标签：c#, asp.net

我正在尝试编写一个控制台应用程序，列出域中的所有 aspx 页面，大约有 50 或 60 个页面，我完全不知道如何列出它们。

这些页面不在本地托管，除了登录页面外，我无法访问它们，我得到的只是要输出的站点列表，到目前为止，我尝试使用以下方法无济于事：

[如何获取给定网址的所有aspx页面列表](https://stackoverflow.com/questions/13415519/how-to-get-all-the-aspx-page-list-of-a-given-web-address)

此处的示例部分：http: [//msdn.microsoft.com/en-us/library/system.web.sitemapnode.aspx](http://msdn.microsoft.com/en-us/library/system.web.sitemapnode.aspx)

我正在考虑在 System.Web 中使用 HTTP 类，但这是我第一次使用 .aspx 并且对它们知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:03:02.487

我会使用命令行命令

```
wget --recursive --http-user=user --http-password=password --accept=.aspx www.hostname.com 
```

因为它像网络爬虫一样工作。

我认为它也允许您登录页面。

# c# - 与图层类的数据绑定

> ID：15528604
> 
> 赞同：1
> 
> 时间：2013-03-20T15:58:56.557
> 
> 标签：c#

当我有一个包含对象列表的中间层类时，我使用的 ListBox 无法正确填充 DisplayMembers。没有图层类一切都很好，但我的项目需要它。这是一个非常简化的示例；

乘客

```
class Passenger
{
        private string name;

        public Passenger(string custName)
        {
            name = custName;
        }

        public string Name
        {
            get { return name; }
        }
} 
```

飞机

```
class Plane
{
        public List<LayerClass> passengerList;

        public Plane()
        {
            // Using this instead of using Passenger, 
            // if Passenger is used there are no problems
            passengerList = new List<LayerClass>(); 
        }
} 
```

图层类

```
class LayerClass
 {
        private Passenger p;
        private int ID;

        public Passenger P
        {
            get { return p; }
            set { p = value; }
        }
 } 
```

假设我用三个乘客姓名填充飞机，然后在下面编写代码；

```
BindingSource bs = new BindingSource();
bs.DataSource = plane.passengerList;

aListBox.DataSource = bs;
aListBox.DisplayMember = "Name"; 
```

aListBox 将显示多行文本“ ***DataBinding.TestApp,LayerClass*** ”，而不是乘客的姓名。如果我插入此代码`bs.DataMember = "P";`或`aListBox.DisplayMember = "P.Name";`，它将仅在 ListBox 中显示第一个乘客的姓名，而忽略所有其他姓名。

如何在 ListBox 中显示所有乘客姓名？没有覆盖乘客类的 ToString() 方法。可能是我缺少的一些简单的东西，但我是 DataBinding 的新手。这是一个 Windows 窗体应用程序，对我可以使用的内容有严格的限制。不允许使用 XAML 或 WPF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:27:43.150

尝试使用属性

```
 public List<LayerClass> passengerList { get; set; } 
```

而不仅仅是公共领域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T21:11:33.190

这是您的乘客类结构。

```
class Passenger
{
    private Int32 id;
    private string name;

    public Passenger(Int32 _id, string custName)
    {
        id = _id;
        name = custName;            
    }

    public Int32 ID
    {
        get { return id; }
    }

    public string Name
    {
        get { return name; }
    }
} 
```

这是您的平面类结构。

```
class Plane
{
    List<Passenger> lPassengers = null;
    public Plane()
    {

    }

    public List<Passenger> Passengers
    {
        get
        {
            if (this.lPassengers == null)
                this.lPassengers = new List<Passenger>();

            return this.lPassengers;
        }
        set { this.lPassengers = value; }
    }
} 
```

当您填充通用列表时，只需执行以下操作。另外我假设你有一个数据集。如果没有，您可以更改此循环。

```
Plane objPlane = new Plane();
foreach(DataRow DR in objDS.Tables[0].Rows)
    obj.Plane.Passengers.Add(new Passenger(Int32.Parse(DR["id"].ToString()), DR["name"].ToString())); 
```

列表框数据绑定

```
this.aListBox.DataSource = objPlane.Passengers; 
this.aListBox.DataValueField = "ID";
this.aListBox.DataTextField = "Name";
this.aListBox.DataBind(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:38:06.383

看起来像两件事。如前所述，尝试在列表中使用属性而不是字段：

```
public List<LayerClass> PassengerList { get; private set; } 
```

然后看起来 BindingSource 不能正常工作，所以尝试消除它：

```
listBox1.DisplayMember = "P.Name";
listBox1.DataSource = plane.PassengerList; 
```

或者你可以在你的 LayerClass 中重写 ToString 函数：

```
class LayerClass
{
  private Passenger p;
  private int ID;

  public Passenger P
  {
    get { return p; }
    set { p = value; }
  }

  public override string ToString() {
    if (p == null) {
      return "No Passenger";
    } else {
      return p.Name;
    }
  }

} 
```

# python - Pandas 通过聚合减法分组

> ID：15528605
> 
> 赞同：1
> 
> 时间：2013-03-20T15:58:56.820
> 
> 标签：python, pandas

我有一个 pandas 数据框 df，其中包含帐户条目，例如人名、帐户 ID 具有贷方和借方条目，例如

```
date        Name      transaction-type  tran
2013-03-05  john Doe   credit          10
2013-05-05  john Doe   debit           20
2012-06-01  jane Doe   credit          50 
```

我想按日期、名称和交易类型对交易进行分组并聚合交易？我怎么能这样做？我希望能够在 tran 列上执行 reduce(numpy.subtract)，但我不确定 Pandas 的正确语法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:09:06.320

IIUC，您只需要`.groupby`然后`.sum()`：

```
>>> df
                 date      Name transaction-type  tran
0 2013-03-05 00:00:00  john Doe           credit    10
1 2013-05-05 00:00:00  john Doe            debit    20
2 2012-06-01 00:00:00  jane Doe           credit    50
3 2012-06-01 00:00:00  jane Doe           credit    22
4 2012-06-02 00:00:00  jane Doe           credit    75
>>> df.groupby(["date", "Name", "transaction-type"]).sum()
                                      tran
date       Name     transaction-type      
2012-06-01 jane Doe credit              72
2012-06-02 jane Doe credit              75
2013-03-05 john Doe credit              10
2013-05-05 john Doe debit               20 
```

请参阅文档中关于[groupby 聚合的部分。](http://pandas.pydata.org/pandas-docs/dev/groupby.html#aggregation)

如果你想要总签名值，你也可以得到：

```
>>> df["tran"][df["transaction-type"] == "debit"] *= -1
>>> df.groupby(["date", "Name"]).sum()
                     tran
date       Name          
2012-06-01 jane Doe    72
2012-06-02 jane Doe    75
2013-03-05 john Doe    10
2013-05-05 john Doe   -20 
```

# java - Xtend @Data 值对象的附加构造函数

> ID：15528626
> 
> 赞同：1
> 
> 时间：2013-03-20T15:59:47.630
> 
> 标签：java, xtext, value-objects, xtend

如何在 XTend (XText) 中将辅助构造函数添加到值对象（使用 @Data 注释）？

我尝试了以下方法，但无法编译：

```
@Data class Dependency {
    val String groupId;
    val String artifactId;
    val String version;
    val String scope;

    new(String groupId, String artifactId, String version) {
        this(groupId, artifactId, version, null)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:29:04.167

目前这是不可能的。如果已经定义了一个构造函数，@Data 注释不会创建一个新的。您可以使用自定义 Active Annotation 来根据您的需要定制数据类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-27T16:14:36.527

虽然技术上不是构造函数，但您可以创建工厂方法以多种方式实例化您的数据类。

# javascript - json递归+选择元素

> ID：15528630
> 
> 赞同：-3
> 
> 时间：2013-03-20T15:59:57.520
> 
> 标签：javascript, recursion, mootools

如何使用 json 和 mootools 库填充选择元素？

我的 JSON 数据如下：

```
var data  = {"tree":
                        [
                             {"id":1,"parent":0,"name":"Category A","subcategories":[]},
                             {"id":2,"parent":0,"name":"Category B","subcategories":
                                    [
                                        {"id":6,"parent":2,"name":"Subcategory F","subcategories":[]},
                                        {"id":7,"parent":2,"name":"Subcategory G","subcategories":[]}
                                    ]
                             },
                             {"id":3,"parent":0,"name":"Category C","subcategories":
                                    [
                                        {"id":8,"parent":3,"name":"Subcategory H","subcategories":[]}
                                    ]
                             },
                             {"id":4,"parent":0,"name":"Category D","subcategories":
                                    [
                                        {"id":9,"parent":4,"name":"Subcategory I","subcategories":
                                            [
                                                {"id":10,"parent":9,"name":"Subcategory J","subcategories":[]}
                                            ]
                                        }
                                    ]
                            },{"id":5,"parent":0,"name":"Category E","subcategories":[]}
                        ]
                }; 
```

我怎样才能得到这个输出标记：

```
 <select>
       <option value="1">Category A</option>
       <option value="2">Category B</option>
       <option value="6">Category B->Subcategory F</option>
       <option value="7">Category B->Subcategory G</option>
       <option value="3">Category C</option>
       <option value="8">Category C->Subcategory H</option>
       <option value="4">Category D</option>
       <option value="9">Category D->Subcategory I</option>
       <option value="10">Category D->Subcategory I->Subcategory J</option>
       <option value="5">Category E</option>
    </select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:47:54.080

[JSFiddle](http://jsfiddle.net/CCkdf/1/)使用递归

代码：

```
var data  = {"tree":
                    [
                         {"id":1,"parent":0,"name":"Category A","subcategories":[]},
                         {"id":2,"parent":0,"name":"Category B","subcategories":
                                [
                                    {"id":6,"parent":2,"name":"Subcategory F","subcategories":[]},
                                    {"id":7,"parent":2,"name":"Subcategory G","subcategories":[]}
                                ]
                         },
                         {"id":3,"parent":0,"name":"Category C","subcategories":
                                [
                                    {"id":8,"parent":3,"name":"Subcategory H","subcategories":[]}
                                ]
                         },
                         {"id":4,"parent":0,"name":"Category D","subcategories":
                                [
                                    {"id":9,"parent":4,"name":"Subcategory I","subcategories":
                                        [
                                            {"id":10,"parent":9,"name":"Subcategory J","subcategories":[]}
                                        ]
                                    }
                                ]
                        },{"id":5,"parent":0,"name":"Category E","subcategories":[]}
                    ]
            };  
        //create the select element
        var select = new Element('select');

        //recurse function going on all the elements->sub-elements etc...
        function recurseData(arr,parent_name_prefix){
            if(!parent_name_prefix){parent_name_prefix = '';}
            arr.each(function(item){
                var name = item.name;
                var letter = name.split(' ')[1];
                var value = getABNumber(letter);

                var text = parent_name_prefix + name;
                addSelectOption(text,value);
                var arr_sub = item.subcategories;
                recurseData(arr_sub,text + ' -> ');
            });
        }

         //add option to select
        function addSelectOption(text,value){
            select.options[select.options.length] = new Option(text,value);
        }
        //function that get numner according to letter
        function getABNumber (val) {
          var base = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', i, j, result = 0;

          for (i = 0, j = val.length - 1; i < val.length; i += 1, j -= 1) {
            result += Math.pow(base.length, j) * (base.indexOf(val[i]) + 1);
          }

          return result;
        };

        //trigger all using the main arr
        recurseData(data.tree);

        //inject select to body
        select.inject(document.body); 
```

# jquery - JQuery：通过附加对象引用附加对象

> ID：15528633
> 
> 赞同：3
> 
> 时间：2013-03-20T16:00:05.007
> 
> 标签：jquery

我有一个附加文本输入字段的按钮。

```
<button id="addD">Add D</button> 
```

单击此按钮将附加一个文本字段和一个`<h3>`标签。

```
 <script>
    var dNum=1;
    function addW(){
        $('#tableW').append('<tr><td><h3 id="wd'+dNum+'"></h3></tr>');
    }
    $('#addD').click(function(){
        $('#divD').append('<input type="text" class="dName" id="d'+dNum+'">');
        addW();
        dNum++;
    });
    </script> 
```

现在我想对附加的文本字段进行更改以反映附加的`<h3>`标签。我试过这样做：

```
 $(document).on('change', '.dName', function(){ //when input field change
        var h3ID = 'w'+$(this).attr('id');
        var h3Tag = document.getElementById(h3ID);
        h3Tag.firstChild.nodeValue = document.getElementById($(this).attr('id')).value;
    }); 
```

引用的文本不会更改。无论如何，我可以引用`<h3>`具有相应 ID 的特定标签吗？我认为问题出在附加的标签上，并且由于不需要对其采取任何操作，因此 .on() 似乎无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:05:01.140

由于您使用的是 jQuery，因此无需使用原始的 javascript dom 操作。

`h3`您可以使用jQuery 提供的方法轻松获取参考`id`，然后更改内容。`html()`

```
$(document).on('change', '.dName', function(){ //when input field change
    var h3ID = 'w'+$(this).attr('id');
    $('#' + h3ID).html($(this).val());
}); 
```

Demo: [Fiddle](http://jsfiddle.net/arunpjohny/Tpyck/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T23:55:23.220

A clearer approach to control items:

```
var dNum=1;
function addW(){
    var $h3 = $('h3');
    $h3.attr('id', dNum);
    var $elem = $elem.wrap('<td>').wrap('<tr>');
    $elem.on('change', function() { // do something on change});

    $('#tableW').append($elem);
} 
```

# c# - 扩展 Windows 窗体并使其成为 Visual Studio 的一部分

> ID：15528639
> 
> 赞同：0
> 
> 时间：2013-03-20T16:00:24.727
> 
> 标签：c#, winforms, visual-studio-2012

如果我在 Visual Studio Express 工具箱中四处搜索，我会找到 TabControl 和 Tab。我想扩展选项卡，以便我可以给它一些标准功能，而不是在每次添加新的默认选项卡时一次又一次地这样做。

在 NetBeans (Java) 中，您可以扩展任何 Swing 组件，然后将其拖到 GUI Builder 中以供持续使用。

我将如何在 VS Express 2012 中执行此操作？好像我做不到。

如果我创建一个扩展 Tab 的类，我似乎无法将它拖到工具箱中。我是否只需要创建一个新的“自定义控件”/“用户控件”类，就像 C# 向导给我的能力一样，它会处理其余的事情？我对 C# 和 VS Express IDE 有点陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:15:10.533

是的，“用户控制”就是解决方案。

只需创建一个新的“用户控件”并在其中添加 Tab 控件，然后您会发现它会自动出现在工具框中。

然后您可以根据需要更改属性。

问候，

# gwt - 未找到 GWT 服务器端 RPC 类

> ID：15528645
> 
> 赞同：1
> 
> 时间：2013-03-20T16:00:46.190
> 
> 标签：gwt

我正在使用 maven 模块开发 GWT 应用程序，结构如下

ServerModule - 包含服务器端代码 ClientModule - 包含客户端 gwt 代码和 rpc 代码 com.test.client - gwt 类 com.test.server - rpc 类

我想将war文件部署到jboss服务器中我正在使用maven：war插件构建客户端模块，它编译时没有任何错误，但我找不到服务器包下服务器端类的任何类文件。

您能解释一下如何构建服务器端类以及何时生成类文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:14:29.390

您是否尝试从 GWT 示例 pom 文件中理解。

验证示例 - [https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/pom.xml](https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/validation/pom.xml)

MobileWebApp 示例 - [https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/pom.xml](https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/mobilewebapp/pom.xml)

DynaTable 示例 - [https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/dynatablerf/pom.xml](https://code.google.com/p/google-web-toolkit/source/browse/trunk/samples/dynatablerf/pom.xml)

**mobilewebapp 的示例目标目录 -**

![在此处输入图像描述](../Images/d6801b018497e49f49bac2497e2b6b08.png)

# c++ - 便携式图形API

> ID：15528646
> 
> 赞同：1
> 
> 时间：2013-03-20T16:00:46.897
> 
> 标签：c++, xcode, windows, macos, codeblocks

我在学校学习图形，问题是我们使用 BGI(C++ with Code::Blocks) 而在家里我只有 mac。有没有将 BGI 与 Xcode 集成的解决方案？还是应该使用其他图形 API？实际上我只想要一个可以安装在 windows 下的 Code::Blocks 和 mac 下的 Xcode 上的 API。所以我可以把我的工作带回家并继续它而无需 - 或只需最少的代码更改。感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:08:05.460

[Antigrain](http://www.antigrain.com/) 是一个可移植且完整的图形库

# ruby-on-rails - 如何使用 strong_parameters 允许除 user_id 之外的所有属性？

> ID：15528649
> 
> 赞同：8
> 
> 时间：2013-03-20T16:00:52.690
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-4, strong-parameters

我想使用类似的东西：

```
def answer_params
  params.require(:answer).permit!.without(:user_id)
end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-20T16:04:22.910

这行得通吗？

```
params.require(:answer).permit!.except(:user_id) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-04T01:50:05.583

我只是想把它放在这里，白名单不是 DRY。想象一个基于文档的条目的 JSON API，它可能有多达 100 个（或更多）属性（键值对）。通常，您需要关注的唯一部分是可以提升权限的属性，例如 user_id。

# android - 在 Android 中清除剪贴板数据

> ID：15528653
> 
> 赞同：5
> 
> 时间：2013-03-20T16:01:04.587
> 
> 标签：android, clipboarddata, clipboardmanager

我正在尝试清除 android 中的剪贴板数据，如下所示，但它没有清除它。

```
ClipboardManager clipman = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE);
clipman.setPrimaryClip(null); 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-20T16:11:11.543

从 API 11 ClipboardManager（因为旧的 ClipboardManager 类已弃用。）

```
ClipboardManager clipBoard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE);
ClipData data = ClipData.newPlainText("", "");
clipBoard.setPrimaryClip(data); 
```

# c# - 匹配和选择 XML 元素并替换兄弟元素的值

> ID：15528655
> 
> 赞同：2
> 
> 时间：2013-03-20T16:01:14.480
> 
> 标签：c#, linq-to-xml

我有一个 XML 文档（请参阅下面的摘录），并且我有一个方法，我将 3 个字符串参数传递给该方法 - 用户名、文件名和状态。我需要该程序查看 XML 文档，将文件名与文件的 DMC 元素匹配，然后将 status 和 currentUser 元素值更改为我传递给我的方法的 userName 和 status 值。

```
<dataModule>
    <DMC>DMC-PO-A-49-00-00-00A-012A-C_001.SGM</DMC>
    <techName>Pneumatic and shaft power gas turbine engine</techName>
    <infoName>General warnings and cautions and related safety data</infoName>
    <status>Checked In</status>
    <notes>-</notes>
    <currentUser>-</currentUser>
</dataModule>
<dataModule>
    <DMC>DMC-PO-A-49-00-00-00A-00VA-C_001.SGM</DMC>
    <techName>Pneumatic and shaft power gas turbine engine</techName>
    <infoName>List of Applicable Specifications and Documentation</infoName>
    <status>Checked In</status>
    <notes>-</notes>
    <currentUser>-</currentUser>
</dataModule>
<dataModule>
    <DMC>DMC-PO-A-49-00-00-00A-001A-C_001.SGM</DMC>
    <techName>Pneumatic and shaft power gas turbine engine</techName>
    <infoName>Title page</infoName>
    <status>Checked In</status>
    <notes>-</notes>
    <currentUser>-</currentUser>
</dataModule> 
```

目前我有以下代码。我希望这能说明我想要达到的目标。这是一个 WinForms 项目，我想用 Linq 来做这件事。

```
public static void updateStatus(string user, string file, string status)
{
    XDocument doc = XDocument.Load(Form1.CSDBpath + Form1.projectName + "\\Data.xml");

    var el = from item in doc.Descendants("dataModule")
             where item.Descendants("DMC").First().Value == file
             select item;

    var stat = el.Descendants("status");

    // code here to change the value of the 'status' element text

    var newUser = el.Descendants("currentUser");

    // code here to change the value of the 'currentUser' element text

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:36:51.913

您可能已经被您的 Linq 查询返回的`IEnumerable<XElement>`不是单个`XElement`. 这是您可以完成您想做的事情的一种方法：

```
public static void updateStatus(string user, string file, string status)
{
    XDocument doc = XDocument.Load(@"C:\Projects\ConsoleApp\XMLDocument.xml");

    var els = from item in doc.Descendants("dataModule")
              where item.Descendants("DMC").First().Value == file
              select item;

    if (els.Count() > 0)
    {
        XElement el = els.First();
        el.SetElementValue("status", status);
        el.SetElementValue("currentUser", user);

        doc.Save(@"C:\Projects\ConsoleApp\XMLDocument.xml");
    }
} 
```

# c# - 是否有 C# 库能够加载 html 代码并定义标头

> ID：15528657
> 
> 赞同：0
> 
> 时间：2013-03-20T16:01:16.557
> 
> 标签：c#, httpwebrequest, webrequest

我必须从网站下载 html 代码并对其进行解析（不幸的是，解析 html 是获取必要信息的唯一方法）。当然，我可以使用 编写我的程序`WebRequest`，但我想知道是否有一个完成的库。

我想定义 url 和标头（cookie 和 POST 数据）并想获取 html 代码。如果图书馆也能返回答案标题，那将是完美的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:04:44.847

您可能需要使用`WebRequest`来进行通信（发布和检索数据）。对于解析 HTML，有[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)。我自己虽然没有使用过。

# asp.net - VB：如何设置每日/每周/定期 XML 检查

> ID：15528666
> 
> 赞同：0
> 
> 时间：2013-03-20T16:01:32.807
> 
> 标签：asp.net, xml, vb.net, visual-studio-2008

我目前正在从第三方来源提取 XML 数据并在单个网页上显示所有元素。我正在尝试为每个元素动态创建单独的网页，我不确定最好的方法是什么。

我的想法是我需要对 XML 进行每日查询，将新元素存储在数据库中，并为新元素创建新网页。

所以我的问题是 - 我如何（以及在​​哪里）运行这个日常查询？这甚至是最有效的方法吗？

我正在使用 Visual Studio 2008 和带有 VB 的 asp.NET Web 表单框架。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:20:18.673

这是这个问题的副本（已关闭）：
[What kind of job scheduler framework or solution do you recomend on window server system](https://stackoverflow.com/questions/2628983/what-kinds-of-job-scheduler-framework-or-solution-do-you-recomend-on-window-serv)

无需进入辩论，我认为您有两个选择，Windows 调度程序或 SQL 代理。两者功能强大且易于使用。一般来说，我会标准化 SQL 代理，因为大多数计划作业都涉及数据，而我只是讨厌将事情放在两个不同的地方。其中一个总是被遗忘。

# python - opencv python中的特定像素如何透明？

> ID：15528669
> 
> 赞同：0
> 
> 时间：2013-03-20T16:01:40.810
> 
> 标签：python, python-2.7, opencv, image-processing

我有图像**messi.jpeg**。我想用颜色 (0,111,111) 替换像素以在**messi.jpeg**中透明。现在。我的代码在下面给出。

```
 img[np.where((img == [0,111,111]).all(axis = 2))] = [255,255,255] 
```

我想要透明像素。现在它变成了白色

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-18T08:14:06.927

对于那些来自谷歌的人来说，上面的答案在撰写时可能是正确的，但[正如文档所描述的那样，它不再准确](http://docs.opencv.org/master/modules/imgcodecs/doc/reading_and_writing_images.html#imread)。将负值传递给 imread 会返回一个带有 alpha 通道的数组。

在 python 中，这可以完成这项工作：

```
>>> im = cv2.imread('sunny_flat.png', -1)
>>> im
array([[[ 51,  44,  53, 255],
    [ 46,  40,  46, 255],
    [ 40,  31,  36, 255],
    ..., 
    [ 24,  26,  36, 255],
    [ 26,  28,  39, 255],
    [ 15,  17,  27, 255]]], dtype=uint8)
>>> im[0][0] = np.array([0,0,0,0], np.uint8)
>>> im
array([[[  0,   0,   0,   0],
    [ 46,  40,  46, 255],
    [ 40,  31,  36, 255],
    ..., 
    [ 24,  26,  36, 255],
    [ 26,  28,  39, 255],
    [ 15,  17,  27, 255]]], dtype=uint8) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T16:15:43.293

**OpenCV 不支持透明度**（本机），抱歉。

一种方法是[在图像中添加另一个通道](https://stackoverflow.com/a/7724894/176769)来表示 Alpha 通道。但是，OpenCV 无法显示 RGBA 图像，因此在加载[RGBA 图像时忽略第 4 个通道](http://answers.opencv.org/question/3288/problem-reading-png-with-transparency-layer/?answer=3290#post-id-3290)以正确显示它。

# c# - 有没有办法从用户控件运行主代码？

> ID：15528673
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:01:46.833
> 
> 标签：c#, wpf

我有一个带有按钮（以及更多）的用户控件，但我想单击它以在主窗口中创建该用户控件的另一个实例。

主要的：

```
UserControl mycontrol1= new UserControl();            
mainwin.Children.Add(mycontrol1); 
```

在 mycontrol 中有一个按钮单击我想创建另一个 mycontrol2 但这不起作用

```
UserControl mycontrol2= new UserControl();   
this.Parent.Children.Add(mycontrol2);
this.Parent.FunctionOfMainProgIWantToRUn(); 
```

我来自 ActionScript 世界，它会在那里运行，但 WPF 逻辑很难获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:45:01.827

你真的做错了。“正确”的方法是拥有一个公开集合的模型类。然后您的集合应该绑定到一个`ItemsControl`（如列表视图），然后使用 a为列表中的每个项目`DataTemplate`创建您的并绑定它的属性。`UserControl`

[MVVM](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)模式非常值得学习，它使 WPF 开发更易于管理和维护。看起来需要更多的前期工作，但从长远来看确实值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:42:01.193

我可以解决您的问题的一种方法是：在 Usercontrol 中使用 EvenHandler 并在 mainView 中订阅它。在用户控件中的每个说按钮上单击都会引发事件。

我刚刚创建了一个示例：

我们在用户控件中有文本框和按钮

这是代码隐藏；

```
 public partial class UserControl1 : UserControl
{
    public event EventHandler<EventArgs> CreateNewUserControl = null;
    public static int InstanceCount = 0;
    public UserControl1()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(UserControl1_Loaded);
    }

    void UserControl1_Loaded(object sender, RoutedEventArgs e)
    {
        InstanceCount++;
        txtControl.Text = "Control - " + InstanceCount;
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        var handler = CreateNewUserControl;
        if (handler != null)
         handler.Invoke(sender,e);
    }
} 
```

在主视图中：

xml:

```
 <StackPanel x:Name="UserControlTest" Orientation="Vertical" VerticalAlignment="Top" HorizontalAlignment="Right" Grid.Column="1" Grid.RowSpan="2" ScrollViewer.VerticalScrollBarVisibility="Auto" MaxHeight="800" Margin="30">

            <RadChartProject:UserControl1 x:Name="UserControl1"/>

        </StackPanel> 
```

xml.cs：

```
 public MainPage()
    {
        InitializeComponent();

        UserControl1.CreateNewUserControl += UserControl1_CreateNewUserControl;
    }

    void UserControl1_CreateNewUserControl(object sender, EventArgs e)
    {
        if(UserControlTest != null)
        {
            var control = new UserControl1();
            control.CreateNewUserControl += UserControl1_CreateNewUserControl;
            UserControlTest.Children.Add(control);
        }
    } 
```

# java - Spring 和 JSP——一种从 UI 中检索可能为 null 的不连续数组的方法

> ID：15528677
> 
> 赞同：0
> 
> 时间：2013-03-20T16:02:04.673
> 
> 标签：java, spring, jsp, jakarta-ee, spring-mvc

通常我们期望具有以下形式的名称或 id 的 html dom：

```
<input name="node[i]".... /> 
```

i 是数组索引，因此 JSP 可以将该 dom 组件列表作为数组。但是，目前的一些情况如何使数组损坏或带有空元素

这样数组就可以像这样形成：

```
node[0] node[1] node[3] null node[5] node[9] 
```

像这样的数组应该很容易使用 PHP 处理，但是我们如何传递这个数组并且 JSP/Spring 可以毫无问题地接受它？所以即使有损坏的元素和空元素，Spring仍然可以将整个事物作为数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:26:29.623

Without seeing code, no one can say, but, if I had to guess, you would do a

```
<c:forEach var="item" items="${myArrayOfStuff}">
  <c:if test="${not empty item}">
    <!-- output your stuff -->
  </c:if>
</c:forEach> 
```

# html - HTML表到emacs表？

> ID：15528678
> 
> 赞同：6
> 
> 时间：2013-03-20T16:02:05.910
> 
> 标签：html, emacs, tabular

从我从 Emacs 社区看到的其他实力壮举来看，必须有解决方案，但我似乎找不到。

Emacs 中有什么方法可以解析 HTML 表格并将其转换为 Emacs 表格`table.el`或`org-mode`表格？我现在能看到的唯一方法是将一大块网页拖到 Excel 中，然后将其导出到 CSV 或其他东西并导入 Emacs。但我不想依赖浏览器或 Excel，我只想在 Emacs 中完成，或者最多使用 shell 工具。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T02:12:27.843

[pandoc](http://johnmacfarlane.net/pandoc/)可以将 html 转换为 orgmode。

# visual-studio-2010 - 如果存在匹配的名称，是否有自动填充方法变量的 Visual Studios 扩展？

> ID：15528680
> 
> 赞同：0
> 
> 时间：2013-03-20T16:02:10.767
> 
> 标签：visual-studio-2010, c#-4.0, visual-studio-extensions

我想知道是否有人知道可以自动填充传递给方法的参数的 Visual Studio 扩展。例如，给定以下代码，

```
private void Display(string firstName, string lastName, long phoneNumber)
{
    ...
}

public void Example(long phoneNumber)
{
    string firstName = "John";
    string lastName = "Doe";

    Display()    
} 
```

当您键入时，`Display`您可以右键单击它，然后选择自动填充，它会检查任何具有相同确切名称的局部变量，并自动为您完成方法调用：

所以`Display()`会`Display(firstName, lastName, phoneNumber);`自动转换为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:16:45.507

这是您可能最接近的（无论如何都没有创建自己的），**但是有一个 catch**。

假设您的`Display`方法**不存在**，并且它的代码在`Example`方法内部，如下所示：

```
public void Example(long phoneNumber)
{
    string firstName = "John";
    string lastName = "Doe";

    //Dummy code to be inside display
    lastName += "pey";
    firstName += "ny";
} 
```

现在，突出显示要进入该`Display`方法的所有内容，右键单击，选择**Refactor**，然后点击**Extract Method**。这样做会为您提供一个对话框，Visual Studio 将在其中自动识别构建方法签名所需的参数。只需添加方法名称`Display`，单击对话框上的确定，**瞧**。您的新方法已就位，并已替换为对新方法的调用。所以你最终会得到：

```
public void Example(long phoneNumber)
{
    string firstName = "John";
    string lastName = "Doe";

    Display(firstName, lastName);
}

public void Display(string firstName, string lastName)
{
    //Dummy code to be inside display
    lastName += "pey";
    firstName += "ny";
} 
```

# python - 如何分割一个不等式的numpy数组？

> ID：15528696
> 
> 赞同：4
> 
> 时间：2013-03-20T16:02:42.560
> 
> 标签：python, numpy, matplotlib, astronomy, multidimensional-array

我已经尽力自己找到解决方案，但我只是没有找到任何相关的东西。我有一些从 .tbl 文件中提取的 numpy 数组（这是我用 atpy 提取的天文表格式）。每个数组中大约有 25,000 个数字，我使用 matplotlib 将它们绘制为散点图。y 轴值直接来自数组，x 轴是两个单独数组中值的简单减法。

没关系，但我真正需要做的是提取某个范围内的值（例如，我需要 y 的值在 10 到 13 之间，x 的值在 0 到 1 之间）。当然，要使情节发挥作用，这些值都必须相互匹配。这是我所拥有的：

```
import numpy as np
from numpy import ndarray
import matplotlib.pyplot as plt
import matplotlib
import atpy

twomass = atpy.Table()

twomass.read('/Raw_Data/IRSA_downloads/2MASS_GCbox1.tbl')

hmag = list([twomass['h_m']])

jmag = list([twomass['j_m']])

colorjh = list([j-h for j,h in zip(jmag, hmag)])

x = []

y = []

def list_maker():
for c,h in zip(colorjh, hmag):
    if np.all(c) < 1 == True and np.all(c) > 0 == True and np.all(h) < 13 == True and np.all(h) > 10 == True:
        x.append(c)
        y.append(h)       

list_maker()

plt.scatter(x, y, c='g', s=1, alpha=0.05)

plt.xlabel('Color(J-H)', fontsize=15)           #adjust axis labels here
plt.ylabel('Magnitude (H)', fontsize=15)

plt.gca().invert_yaxis()

plt.legend(loc=2)
plt.title('CMD for Galactic Center (2MASS)', fontsize=20)
plt.grid(True)

plt.show() 
```

我也尝试过这种方法来切片数据，但没有运气：

```
colorjh = colorjh[colorjh<1]

colorjh = colorjh[colorjh>0] 
```

我尝试了很多不同的事情，包括尝试将这些数组转换为列表，以及许多不同的不等式格式。在这个过程中，我可能让自己离答案更远了，但是这段代码至少打印了整个散点图（它无法像我想要的那样切割数据）。其他一些迭代打印的空白图与我正在寻找的数字范围相去甚远。

我是 python 和这个网站的新手，所以请尽可能明确地提供任何提示等。如果它是超级行话，我可能无法充分利用你的建议。谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:13:22.630

尝试以下，我认为它和你`for`的 s 和`zip`s 一样，但应该更快。如果有什么不明白的地方，请在评论中提问，我会编辑：

```
hmag = np.array(hmag)
jmag = np.array(jmah)

colorjh = jmag - hmag
idx_c = (colorjh > 0) & (colorjh < 1) # where condition on c is met
idx_h = (hmag > 10) & (hmag < 13) # where condition on h is met
idx = idx_c & idx_h # where both conditions are met

plt.scatter(colorjh[idx], hmag[idx], c='g', s=1, alpha=0.05) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T15:12:34.990

这两个条件可以同时完成：

```
hmag = np.array(hmag)
jmag = np.array(jmah)
colorjh = jmag - hmag

idx = ((colorjh > 0) & (colorjh < 1) & (hmag > 10) & (hmag < 13)).nonzero()[0]

plt.scatter(colorjh[idx], hmag[idx], c='g', s=1, alpha=0.05) 
```

这`.nonzero()[0]`使它成为索引列表，而不是具有 True 和 False 值的“掩码”，如果我们谈论的是非常长的列表，这可能会更有效。

# solr - 首先重新索引最新记录可以吗？

> ID：15528697
> 
> 赞同：0
> 
> 时间：2013-03-20T16:02:42.957
> 
> 标签：solr, sunspot

我们不时重新索引整个数据库。通常需要几个小时。然而，只有最新的出现在首页。所以我在想，如果我向后重新索引数据库，也就是说，首先以“id desc”顺序重新索引记录，我可以大大减少服务器停机时间。

但是，从性能的角度来看，这样可以吗？它会对搜索时间产生负面影响吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:22:54.837

既然您说您正在执行完整的重新索引，我建议您在不同的核心中建立索引并进行交换。[这个答案](https://stackoverflow.com/a/5154919/326543)提供了一些关于如何实现这一点的参考。

在我们的设置中，我们有一个 Master/Slave 设置，其中索引发生在 Master 上，索引被复制到 Slave。从属服务于搜索请求。从性能的角度来看，这很有效。

您可能需要考虑的另一件事 - 尝试看看为什么您的索引时间会长达数小时。在我们的例子中，我们意识到 DataImportHandler 中的嵌套查询是罪魁祸首，触发了 n+1 个 jdbc 连接。我们通过创建视图对其进行了优化，我们的索引时间从 3 小时缩短到了不到 2 分钟！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:52:51.990

为什么你有停机时间？

如果您只在最后提交，您只会在提交时仅在最后显示记录（并且顺序无关紧要）。

如果您正在使用 maxDocs/maxTime 集（Solr 4+）进行软提交并从最新记录中重新索引，那么您几乎会立即看到这些记录，而其他记录最终会出现。

我建议阅读一些关于提交语义的内容，看看是否会让事情变得更清楚。

# xml - SimpleXML addChild 错误

> ID：15528699
> 
> 赞同：0
> 
> 时间：2013-03-20T16:02:50.107
> 
> 标签：xml, simplexml, php

我一直在尝试制作一个 PHP 脚本来编辑用于更改网站导航栏的 XML 文件。然而，每当我运行这段代码的大部分时间，它都会报告一堆错误：

> 注意：尝试在第 96 行的 /Volumes/web/edit/includes/new-page.php 中获取非对象的属性
> 
> 警告：在第 96 行的 /Volumes/web/edit/includes/new-page.php 中为 foreach() 提供的参数无效
> 
> 注意：在/Volumes/web/edit/includes/new-page.php第110行间接修改SimpleXMLElement的重载元素无效
> 
> 致命错误：在第 113 行的 /Volumes/web/edit/includes/new-page.php 中的非对象上调用成员函数 addChild()

以下是我遇到问题的脚本部分。对不起，如果它有点混乱或奇怪，因为我是 XML 新手。它所要做的就是获取某个元素的所有子元素，再添加一个子元素，按字母顺序对它们进行排序，然后将它们放回 XML 文件中。

```
$nxml = simplexml_load_file($xmlfile) or die ("Unable to load XML file!");

$items = array();
foreach ($nxml->$parent->part[$navpartnum]->item as $item1) { //Line 96
    $items[] .= "{$item1->title} - {$item1->link}";
}

$items[] .= "{$title} - {$navpointer}";

sort($items);

$navparts = array();
foreach ( $items as $item2 ) {
    $itemparts = explode(" - ",$item2);
    $navparts[$itemparts[0]] = $itemparts[1];
}

unset($nxml->$parent->part[$navpartnum]->item); //Line 110

foreach( $navparts as $akey => $avalue ) {
    $makeitem = $nxml->$parent->part[$navpartnum]->addChild('item'); //Line 113
    $makeitem->addChild('title',$akey);
    $makeitem->addChild('link',$avalue);
}

file_put_contents($xmlfile, $nxml->asXML()); 
```

这是上述脚本获取的示例输入。

```
$xmlfile    = "/Volumes/web/nav.xml";
$navpartnum = 0;
$parent     = "about";
$title      = "Contact";
$navpointer = "/about/contact/"; 
```

最后，这里是 XML 文件的示例。

```
<?xml version="1.0" encoding="utf-8"?>
<navbar>
<about parts="2">
    <part num="1">
        <item>
            <title>Overview</title>
            <link>/about/overview/</link>
        </item>
    </part>
    <part num="2">
        <item>
            <title>Activities and Athletics</title>
            <link>/about/activities_and_athletics/</link>
        </item>
    </part>
</about>
</navbar> 
```

这个脚本工作了几次，但现在它只显示了我之前所说的错误。我也在使用 PHP 5.4.10。关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:53:46.583

让我们来看看：

```
foreach ($nxml->$parent->part[$navpartnum]->item as $item1) { //Line 96 
```

你报告了这个错误：

> 注意：尝试在第 96 行的 /Volumes/web/edit/includes/new-page.php 中获取非对象的属性
> 
> 警告：在第 96 行的 /Volumes/web/edit/includes/new-page.php 中为 foreach() 提供的参数无效

这只是意味着您希望数据位于它不存在的地方。SimpleXML 不会立即抛出任何异常告诉您，因此当它不稳定时，您需要自己小心：

```
$items = $nxml->$parent->part[$navpartnum]->item;
if (!($items instanceof SimpleXMLElement)) {
    throw new Exception('Unable to obtain items.');
}

foreach ($items as $item1) {
   ...
} 
```

这只是早期的显式错误检查。您可能还想回顾一下为什么事情不工作，例如看看 XML。我建议您为此创建一个格式化函数，因为 SimpleXML 的 XML 输出默认无法格式化，因此更难阅读：

```
$nxml->asXML('php://stdout'); 
```

或者

```
$nxml->asXML('php://stderr'); 
```

将其放入错误流中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:10:08.713

所以事实证明脚本很好，输入实际上是错误的。在第一百次查看脚本并转储每个变量后，我意识到这`$navpartnum`实际上是一个字符串而不是一个数字。所以显然 simpleXML 是在寻找一个名为的元素`"0"`，而不是寻找索引为`0`. 哎呀！

# salesforce - 如何在顶点中返回销售人员自定义对象布尔字段的默认值？

> ID：15528705
> 
> 赞同：0
> 
> 时间：2013-03-20T16:03:05.490
> 
> 标签：salesforce, field, default, default-value

我正在尝试返回属于 Salesforce 自定义对象的布尔类型字段的默认值。

一旦我有了我的领域，我正在使用：

```
sObjectField.getDescribe().getDefaultValue() 
```

但它总是为布尔字段返回 null ！

我以以下方式返回默认选项列表值：

```
for(Schema.PicklistEntry picklistEntry : sObjectField.getDescribe().getPicklistValues()) {
  if(picklistEntry.isDefaultValue()) {
    defaultValue = picklistEntry.getValue();
  }
} 
```

我可以使用以下方法获取电话号码字段的默认值：

```
sObjectField.getDescribe().getDefaultValueFormula(); 
```

为什么我无法获得布尔值的默认值？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:35:43.980

此功能在 Salesforce / APEX 中似乎已损坏。我在执行匿名中运行此代码以返回字段的所有可能的 getDescribe 属性和值：

```
Schema.DescribeFieldResult DFR = account.checkboxfield__c.getDescribe();
System.debug( DFR ); 
```

我发现没有一个属性正确返回布尔字段的默认值（SF 术语中的复选框）。我只运行了一个 getDescribe() 以便在添加新属性以解决此特定问题的情况下看到所有可能的属性，但事实证明只有 getDefaultValue() 和或 getDefaultValueFormula() 可以返回字段的默认值. 我用多种字段类型对此进行了测试，并验证了[官方文档](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_fields_describe.htm)没有声明某种类型的排除以返回复选框的默认值。如果我没记错的话，您可能在 APEX 中发现了一个错误。如果我是你，我会去 Salesforce 支持网站并搜索有关所发现问题的任何官方文档。如果您找不到已记录问题的证据，请向 Salesforce 开票并让他们测试/记录问题。

如果这不是错误，那么 Salesforce 至少需要更新他们的[文档](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_fields_describe.htm)来描述如何返回这个值，因为 getDefaultValue() 和 getDefaultValueFormula() 不起作用。

# dynamics-crm-2011 - 插件针对单个事件执行 4 次

> ID：15528706
> 
> 赞同：1
> 
> 时间：2013-03-20T16:03:05.670
> 
> 标签：dynamics-crm-2011

什么可能导致插件从单个事件执行 4 次？
该插件已在 Case 检索时注册，并为单个 Retrieve 触发 4 次。

```
 protected void ExecutePostCaseRetrieve(LocalPluginContext localContext)
        {
        if (localContext == null)
        {
            throw new ArgumentNullException("localContext");
        }

        // TODO: Implement your custom Plug-in business logic.
        IOrganizationService service = localContext.OrganizationService;
        QueryByAttribute query = new QueryByAttribute("resource");
        query.Attributes.AddRange("name");
        query.Values.AddRange("Employee");
        EntityCollection result = service.RetrieveMultiple(query);
        Guid employee = result.Entities[0].Id;
        QueryScheduleRequest scheduleRequest = new QueryScheduleRequest
        {
            ResourceId = employee,
            Start = DateTime.Now.ToLocalTime(),
            End = DateTime.Now.ToLocalTime().AddMonths(1),
            TimeCodes = new TimeCode[] { TimeCode.Available }
        };
        QueryScheduleResponse schedule = (QueryScheduleResponse)service.Execute(scheduleRequest);
        DateTime today = DateTime.Now.ToLocalTime();
        if (today.Date.Equals(schedule.TimeInfos[0].Start.Value.Date)) // today is a working day
        {
            service.Create(new Lead { FirstName = today.Hour.ToString() });
        }
        else // just escalate from beginning of next working day
            service.Create(new Lead { FirstName = schedule.TimeInfos[0].Start.Value.ToLocalTime().ToString(), LastName=schedule.TimeInfos[0].End.Value.ToLocalTime().ToString() }); 
```

![在此处输入图像描述](../Images/3bdcda755b3fc66b0ee42cbe1b491b40.png)

我尝试过同步和异步，同样的事情发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:18:37.530

除了应该归咎于一个错误（我怀疑**不是**这种情况）之外，四次触发插件的唯一合理方法是你可以从它本身调用它。这个答案的问题在于，这样的设置通常会导致永远的递归和屏幕上的噗噗声。

推测原因，我意识到您的问题中有四个recall，CRUD有四个基本操作。这可能是依赖吗？

编辑：

正如我的 MVP 经常说的那样。在这种情况下，请先找出它发生的*位置*，然后再尝试解释*它*发生的原因。在某些情况下，他是对的。

所以，这就是我在这种情况下要做的。

以下列表中的术语 *magic* 将表示这组操作：删除*Case*和*Lead*的所有实例，创建一个*Case并查看**Lead*的实例有多少。

1.  删除所有插件。施展*魔法*。
2.  *在Create* for *Case*上注册一个“空”插件。施展*魔法*。
3.  *将潜在*客户的创建添加到插件 ( `Service.Create(new Entity("case"));` )。施展*魔法*。
4.  将现有代码中的内容复制/粘贴到新代码中。施展*魔法*。

您也可以尝试全新安装，以确保没有其他软件发生冲突。有 30 天的免费试用期。在任何给定时间，我都有大约 10 种不同的试验。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-10T18:15:47.090

我知道这篇文章已经有一年了，但我遇到了另一个插件触发我的第一个插件的同样问题。crm 服务实际上有一个 depth 属性，您可以使用它来确定在此之前触发了多少操作。

在要执行的代码之前放置这样的东西可以解决这个问题。

```
if (context.depth > 1 ){
return;
} 
```

# java - 更改 CXF Web 服务上的响应字符集

> ID：15528709
> 
> 赞同：0
> 
> 时间：2013-03-20T16:03:10.853
> 
> 标签：java, web-services, cxf

我们继承了使用 Apache CXF 编写的 Web 服务。响应中的文本字段包含单引号和“en”破折号 (ascii 150) 等字符。这些在响应中显示为正方形（使用 SoapUI）或问号。

文本来自设置为 WE8MSWIN1252 字符集的 Oracle 数据库。我想我需要将 Web 服务响应的编码/字符集设置为匹配（即 Windows-1252），但找不到这样做的地方。

我可以对文本进行 XML 编码（例如，这些破折号显示为 ）。但是，如果可以使用原生支持这些字符的字符集，这似乎更可取，对吧？

知道如何更改 SOAP 响应的编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:59:44.043

请尝试将以下代码添加到您的 Apache CXF Web 服务方法中。

```
import org.apache.cxf.message.Message;
import org.apache.cxf.phase.PhaseInterceptorChain;

Message message = PhaseInterceptorChain.getCurrentMessage(); 
message.put(Message.ENCODING, "Cp1252"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T14:06:02.100

您可以在返回的响应中设置编码：

```
MyResponse response = new MyResponse();
//.... some code here
return Response.ok(response).encoding("Cp1252").build(); 
```

# html - 如何在 Wicket 6.0 中更改 html 文件位置

> ID：15528714
> 
> 赞同：1
> 
> 时间：2013-03-20T16:03:20.827
> 
> 标签：html, wicket-1.6

如何在 Wicket 6.0 中更改 html 文件位置。

谢谢，赛姆。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T22:33:29.620

只需将以下行添加到 Application 类（Wicket 6）的 init() 方法中：

```
getResourceSettings().getResourceFinders().
    add(new WebApplicationPath(getServletContext(), "/")); 
```

然后，Wicket 将在您的 Web 存档的主文件夹中查找 html 文件（除了类路径中的默认位置）。但是，HTML 文件仍必须位于与 Wicket Page 类的包对应的文件夹中（即，如果类名为 foo.bar.HomePage，则 HTML 文件必须位于文件夹 foo/bar/HomePage.html 中上述设置。

# c# - 从 C# 后面的代码编写样式

> ID：15528725
> 
> 赞同：0
> 
> 时间：2013-03-20T16:03:45.293
> 
> 标签：c#, wpf, visual-studio-2012, coding-style, resources

我已经在 resorces.xaml 中编写了这段代码，以便在我的项目中的所有按钮上应用它：

```
 <Style TargetType="{x:Type Button}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Button}">
                <Grid>
                    <Rectangle x:Name="rect" Style="{DynamicResource rectangle_style}" Cursor="Hand">
                        <Rectangle.Fill>
                            <ImageBrush ImageSource="Attempts\image.jpg" Stretch="UniformToFill"/>
                        </Rectangle.Fill>
                    </Rectangle>
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}" Content=""/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsFocused" Value="True"/>
                    <Trigger Property="IsDefaulted" Value="True"/>
                    <Trigger Property="IsMouseOver" Value="True"/>
                    <Trigger Property="IsPressed" Value="True"/>
                    <Trigger Property="IsEnabled" Value="False"/>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我会从 C# 后面的代码中编辑这种样式，因为我想从代码中动态更改图像源，我如何从 C# 后面的代码中编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:08:22.400

虽然没时间逐行翻译，但是我已经写了一篇完整的文章，内容是如何在后面的代码中创建DataTemplates/Styles。

[http://www.codeproject.com/Articles/29699/WPF-How-to-create-Styles-in-code-and-magical-Conte](http://www.codeproject.com/Articles/29699/WPF-How-to-create-Styles-in-code-and-magical-Conte)

这应该让你开始

尽管像其他人所说的那样，我认为您应该采用 ViewModel 类型的方法并让绑定来完成。

不过，另一种方法是劫持一个非常未使用的属性（或者最好还是添加一个附加属性），例如标签，并将其用作您的图像名称。然后，您可以创建一个 ControlTemplate，它可以成为您的样式的一部分，它将在特定按钮（您正在应用样式的按钮）中查找将成为图像路径的标签。

所以是这样的：

```
<ControlTemplate x:Key="bordereredButtonTemplateWithMouseAndPropHiJacking" 
            TargetType="{x:Type Button}">
    <Border x:Name="border" CornerRadius="3" 
            Background="{TemplateBinding Background}" 
            BorderBrush="{TemplateBinding Foreground}" 
            BorderThickness="2" Width="auto" 
            Visibility="Visible">
        <StackPanel Orientation="Horizontal">
            <Image Source="{Binding RelativeSource={RelativeSource TemplatedParent},
                 Path=Tag}" Width="20" 
                 Height="20" HorizontalAlignment="Left"
                 Margin="{TemplateBinding Padding}" />
            <ContentPresenter  
                Margin="{TemplateBinding Padding}" 
                Content="{TemplateBinding Content}" 
                Width="auto" Height="auto"/>
        </StackPanel>
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="IsEnabled" Value="false">
            <Setter TargetName="border" 
                Property="Opacity" Value="0.4"/>
        </Trigger>
        <Trigger Property="IsMouseOver" Value="true">
            <Setter TargetName="border" 
                Property="Background" Value="Orange"/>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

然后，当您想在 XAML 中使用它时，您会这样做

```
<Button Template="{StaticResource bordereredButtonTemplateWithMouseAndPropHiJacking}"   
Tag="c:\temp\image1.jpg"/>
<Button Template="{StaticResource bordereredButtonTemplateWithMouseAndPropHiJacking}" 
Tag="c:\temp\image1.jpg"/> 
```

对你来说，你会想让模板成为样式的一部分，但你明白我希望的想法

# java - struts 中的请求属性行为

> ID：15528730
> 
> 赞同：0
> 
> 时间：2013-03-20T16:03:52.473
> 
> 标签：java, struts, httprequest

我想了解请求属性的行为方式。我现在在会话中设置了一些值，这给我带来了很多问题。我将它们全部转换为请求属性。

我有一个动作类，在视图方法中我设置了这样的东西，

```
 public ActionForward view(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception
        {
//...
request.setAttribute("abc", abc);
//...
    } 
```

当我单击选项卡并显示页面时，将调用此视图方法。此页面中还有另一个按钮，称为“导出”。我已经进行了导出调用相同的操作类并调用了一个名为 exportExcel 的方法，如下所示：

```
public void exportExcel(ActionMapping mapping, ActionForm actionForm,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception
    {
    if(request.getAttribute("abc")!=null){
        String def = (String)request.getAttribute("abc");
    }
} 
```

假设我会得到请求参数。它没有用。另外，我不想在会话中设置这个变量。是否有任何解决方法可以在此 exportExcel 方法中获取此请求属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:36:46.437

在您的 jsp 中，您需要创建隐藏的输入字段`name="abc"`并将其值设置为 abc 请求属性值。这样，当用户单击您的导出按钮时，它将被提交回来。

如果您的导出按钮是一个锚点，那么您可以`href`使用 abc 参数名称/值来设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:55:30.347

请求属性仅在单个请求的持续时间内存在；这就是请求范围的用途。如果您希望某些内容在请求中*持续存在*，请将其保留在会话中

如果您想在*新*请求中重新创建某些内容，请使用表单元素、URL 参数等。

# ruby - 将时间戳插入 postgresql 数据库

> ID：15528735
> 
> 赞同：0
> 
> 时间：2013-03-20T16:04:00.530
> 
> 标签：ruby, postgresql

我正在使用 ruby​​ 访问 postgresql 数据库并对其进行更新。我尝试更新的字段之一称为“updated_at”，属于不带时区的时间戳类型。我正在使用以下语句：

```
db.prepare('statement1', "INSERT INTO games (game_hash,team1,team2,team1score,team2score,time,update_at) VALUES ($1,$2,$3,$4,$5,$6,$7)");
update = Time.now.strftime("%Y-%m-%d %H:%M:%S");
db.exec_prepared('statement1', [myId, team1, team1score, team2, team2score, progress, update]); 
```

更新变量的格式正确，因为我最初得到的时间戳字段错误格式不正确，但不再这样做。但是数据库显示 updated_at 字段为空！！所有其他字段均已正确填充。有谁知道这是什么原因造成的？

*更新*- 我添加了一个名为 last_update 的 datetime 类型的新列，并且使用该列代替，我的时间戳被正确添加到数据库中！我猜是因为数据库最初来自 rails activerecord，所以 update/created_at 字段以某种方式受到保护。感谢大家帮助解决这个问题，我将只使用我的新专栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T13:41:25.123

简单的解决方案是这样做：

```
db.prepare('statement1', "INSERT INTO games (game_hash,team1,team2,team1score,team2score,time,update_at) VALUES ($1,$2,$3,$4,$5,$6, now())");
db.exec_prepared('statement1', [myId, team1, team1score, team2, team2score, progress]); 
```

为您节省一行代码，以及大量可能出错的事情。

现在，如果这不能解决问题，请检查触发器。如果它确实解决了问题，则可能是拼写错误、保留字等。如果它不能解决问题，那么其他东西就会弄乱插入语句和行存储之间的数据。

# iphone - Xcode 和归档到 ipa 文件

> ID：15528736
> 
> 赞同：0
> 
> 时间：2013-03-20T16:04:01.033
> 
> 标签：iphone, xcode, ipa

我在 Xcode 中有一个项目。该应用程序的作用是您可以拍照，并且照片会列在表格中，当您单击单元格时，它将在下一页中显示照片（转到该页面）。当我通过在 Xcode 中按“运行”在手机上运行程序时，单击单元格后照片会显示在页面中。但是，如果我将项目存档并在手机上运行 ipa 文件，当我尝试查看照片时，页面是空的；图像不显示。

我正在运行最新的 Xcode 版本。

# c - 没有静态或 malloc 的函数调用之间的内存保留

> ID：15528737
> 
> 赞同：-3
> 
> 时间：2013-03-20T16:04:02.757
> 
> 标签：c

下面的代码打印

**字符串是：oldstring**

我不明白为什么？

```
#include<stdio.h>
char *func(){
    char str[1024];
    return str;
}
int main()
{
  char *g="string";
  strcpy(func(),g);
  g = func();
  strcpy(g,"oldstring");
  printf("The string is : %s",func());
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:12:40.857

如前所述：您正在返回在堆栈上分配的局部变量。在您返回的那一刻，该变量将不复存在。但是堆栈没有被清除，因此行为。

您需要`g`在堆上分配。为此：

```
void gxxx(char* xxx){

    //do sone stuff to xxx 
    return;
}

char *g = malloc(/*some size*/);
gxxx(g);
free(g); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:14:18.793

第一个：`xxx`是`gxxx()`函数的本地数组。如果您在函数退出后尝试将字符串复制到此数组，则会导致**未定义的行为**。

第二个：正如我所见，您`strcpy(g,"oldstring");`在打印结果之前正在做的事情。你期待什么？

# java - 在 switch 案例中重新实例化变量

> ID：15528742
> 
> 赞同：3
> 
> 时间：2013-03-20T16:04:14.020
> 
> 标签：java, switch-statement

为什么我不能在每种情况下都创建具有相同名称的变量。例如，从下面的代码中，`case 3`它会抱怨`String name`已经存在 - 但为什么会这样呢？`Case 1`从来没有也永远不会被调用。

我不想从`switch-case`. 那么，为什么使用`if`语句可以在每种情况下定义相同的名称，但`switch-case`不能呢？

下面是一个带有 switch case 的简单 Java 代码：

```
int type = 3;

switch (type) {
    case 1:
        String name = (String) respone.get("name");
        user.setName(name);
        break;
    case 2:
        String surname = (String) respone.get("surname");
        user.setSurname(surname);
        break;
    case 3:
        String name = (String) respone.get("name");
        user.clearName(name);
        break;
    default:
        ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:06:39.490

将每个 case 语句写在不同的块中：

```
switch (type) {
    case 1: {
        String name = (String) respone.get("name");
        user.setName(name);
        break;
    }
    case 2: {
        String surname = (String) respone.get("surname");
        user.setSurname(surname);
        break;
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T16:05:58.947

`name`已经存在，因为这些案例在概念上位于同一块中。case: 本质上是一个*标签*，`switch`语句只是跳转到适当的标签。[有关Java 中标签的更多信息，](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)请参见此处（不限于`switch`语句）。

要看到这一点，想象一下如果你没有 break 语句。`name`您可以在一个子句中初始化`case`，然后进入下一个子句。如果这是一个问题，请将每个 case 子句放在一个单独的`{}`块中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:06:26.077

因为即使它们是互斥的，它们也存在于同一个`Switch`块中。因此，您可以在单独的块中编写每个 case 子句，以避免该错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T16:06:42.077

请记住，这`case`不是您的范围，这些块是`{ .. }`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-20T16:06:56.357

整个交换机包含在一个块中。您可以将每个案例包装在一个自己的块中：

```
case 1: {
    String name = (String) respone.get("name");
    user.setName(name);
    break;
  }
case 2: {
    String surname = (String) respone.get("surname");
    user.setSurname(surname);
    break;
  }
case 3: {
    String name = (String) respone.get("name");
    user.clearName(name);
    break;
  } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-20T16:07:39.920

如果您在 switch 中声明的变量没有大括号，那么它的作用域会在整个 switch 中保持不变。

Its no matter where you declare its first switch block or second. If you declare it first then its can be access after it through out switch.

If you want to have same variable name then you can do it by putting in braces or block because then that variable scope remain within the block.

```
switch (type) {
    case 1: {
        String name = (String) respone.get("name");
        user.setName(name);
        break;
    }
    case 2: {
        String surname = (String) respone.get("surname");
        user.setSurname(surname);
        break;
    }
    case 3: {
        String name = (String) respone.get("name");
        user.clearName(name);
        break;
    }
    default:
        ...
} 
```

# c# - 如何在 WebBrowser 上搜索文本？

> ID：15528747
> 
> 赞同：3
> 
> 时间：2013-03-20T16:04:25.290
> 
> 标签：c#, winforms, webbrowser-control

我是 C# 的初学者，我有一个问题。每次在执行搜索请求后，我需要在 webBrowser 控件中发现一个事件时弹出一个消息框，此时将选择该事件。我正在使用计时器来刷新 webBrowser 并再次启动搜索。这就像一个通知系统。

```
using System;
using System.Windows.Forms;
using mshtml;

namespace websearch
{

public partial class Form1 : Form
{
    Timer temp = new Timer();
    //Timer refreshh = new Timer();
    public Form1()
    {        
        InitializeComponent();
        temp.Tick += new EventHandler(refreshh_Tick);
        temp.Interval = 1000 * 5;
        temp.Enabled = true;
        temp.Start();
        WebBrowser1.Navigate("http://stackoverflow.com/");
    }

    void refreshh_Tick(object sender, EventArgs e)
        {
            WebBrowser1.Refresh();
            WebBrowser1.DocumentCompleted += Carder_DocumentCompleted;
        }

    private void Carder_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            FindNext("C#", WebBrowser1);
            temp.Tick += refreshh_Tick;
        }
    public void FindNext(string text, WebBrowser webBrowser2)
        {

            IHTMLDocument2 doc = webBrowser2.Document.DomDocument as IHTMLDocument2;
            IHTMLSelectionObject sel = doc.selection;
            IHTMLTxtRange rng = sel.createRange() as IHTMLTxtRange;

            rng.collapse(false); // collapse the current selection so we start from the end of the previous range
            if (rng.findText(text))
              {
                rng.select();
                MessageBox.Show("Theire are new C# Question");              
              }

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:31:04.823

做这件事有很多种方法：

1.  创建一个递归函数来解析所有`HtmlElement`s 并检查内容。如果您需要的文本存在，您可以选择元素，或更改元素样式或执行您可能想要执行的任何其他操作。

例如：

```
public bool SearchEle(HtmlElement ele, string text)
{
    foreach (HtmlElement child in ele.Children)
    {
        if (SearchEle(child, text))
            return true;
    }
    if (!string.IsNullOrEmpty(ele.InnerText) && ele.InnerText.Contains(text))
    {
        ele.ScrollIntoView(true);
        return true;
    }

    return false;
} 
```

1.  您使用`webBrowser2.Document.Body.InnerText`并进行字符串搜索。这是如果您不打算真正在视觉上突出显示文本，而只是想找到文本。

另一方面，您可能希望将代码移动`WebBrowser1.DocumentCompleted += Carder_DocumentCompleted;`到`Form1()`构造函数，而不是每次`refreshh_Tick`调用刷新函数时都这样做。

# html - 识别滚动类型

> ID：15528749
> 
> 赞同：0
> 
> 时间：2013-03-20T16:04:28.973
> 
> 标签：html, css, scroll

我正在寻找一个类似于下面链接的网站，并希望找到一些关于如何实现滚动效果的在线教程。

谁能告诉我这种类型的滚动叫什么？

[http://pelicancreative.com/finaltest3/](http://pelicancreative.com/finaltest3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:06:58.957

背景和前景内容的不同滚动速度称为视差

# c# - C# PCL 从文件中读取

> ID：15528751
> 
> 赞同：10
> 
> 时间：2013-03-20T16:04:36.930
> 
> 标签：c#, file-io, windows-8, windows-phone-8, portable-class-library

所以我正在编写一个面向 .NET 4.5、Windows 8 和 Windows Phone 8 的可移植类库。我正在尝试从作为构建内容的项目的一部分的文本文件中读取。我看到 StreamReader 在 PCL 中可用，但在给定文件路径的情况下，我似乎无法找出如何从文件中获取流。如果有人能指出我正确的结构，我将不胜感激。此外，如果您也可以为 XML 文件提供指导。我现在只阅读文本文件，但稍后我将使用 XML。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-20T20:51:32.757

可移植类库允许您使用存在于您所针对的所有平台中的命名空间和类。
.Net 4.5（假设您的意思是完整的桌面-WinForms/WPF）、Windows 8 和 Windows Phone 8 的文件访问方式都非常不同，并且可以使用不同的文件。可以从哪里访问文件也有很大不同：嵌入的内容；嵌入式资源；隔离存储；共享文件夹；完整的文件系统。这些并非在您提到的所有平台上都可用。

简短的回答。你可能无法做你所追求的。

文件系统访问因平台而异，并且通常必须针对每个平台进行不同的操作。
您可以做的是为您的 PCL 可以使用的文件访问（打开、读取、保存等）定义一个接口，然后创建您根据需要传递给 PCL 的平台特定实例。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-22T07:11:50.473

马特是正确的。

但是，有一些插件允许您从 PCL 访问文件。

我的图书馆，MvvmCross 提供了一个 - [https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/File](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/File)

但是...对于您目前正在做的事情，我认为您最好的选择是@dsplaisted 的便携式文件存储库-可通过 Nuget 获得-http://nuget.org/packages/pclstorage-[这](http://nuget.org/packages/pclstorage)是由 PCL 团队之一编写的来自 Microsoft - 它非常适合将路径转换为 ​​PCL 中的流

# c++ - GET_WHEEL_DELTA_WPARAM 从不返回负数

> ID：15528752
> 
> 赞同：1
> 
> 时间：2013-03-20T16:04:43.477
> 
> 标签：c++, winapi

我只看到从 GET_WHEEL_DELTA_WPARAM 返回的正数，即使当我向我滚动鼠标滚轮时它应该是负数。

```
case WM_MOUSEWHEEL:
            short wheel_delta = 0;
            wheel_delta = GET_WHEEL_DELTA_WPARAM(Addtl_Info_L); 
```

此外，[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646254%28v=vs.85%29.aspx)的此页面表示向前滚动车轮给出一个正数，向后滚动一个负数，而此页面[表示](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645614%28v=vs.85%29.aspx)它是左右而不是向前和向后。

这是完整的消息处理程序：

```
 LRESULT CALLBACK Message_Handler(HWND App_Handle, UINT Message_Type, WPARAM Addtl_Info_W, LPARAM Addtl_Info_L) {
                short wheel_delta(0);
                switch(Message_Type) {
                case WM_MOUSEWHEEL:
                    wheel_delta = GET_WHEEL_DELTA_WPARAM(Addtl_Info_L);
                    if (wheel_delta > 0) {
                        std::wostringstream outs;  
                        outs << "Wheel delta is positive" << std::endl;
                        OutputDebugString(outs.str().c_str());
                        graphics_manager.camera_tilt = graphics_manager.camera_tilt + 0.1f;
                    } else if (wheel_delta < 0) {
                        std::wostringstream outs;  
                        outs << "Wheel delta is negative" << std::endl;
                        OutputDebugString(outs.str().c_str());
                        graphics_manager.camera_tilt = graphics_manager.camera_tilt - 0.1f;
                    }
                    return 0;
                }
                return DefWindowProc(App_Handle, Message_Type, Addtl_Info_W, Addtl_Info_L);
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T18:30:24.027

您正在传递`LPARAM`to `GET_WHEEL_DELTA_WPARAM`。您应该通过`WPARAM`( `Addtl_Info_W`，而不是`Addtl_Info_L`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:36:10.077

您应该显示整个消息循环，或者至少显示“Addtl_Info_L”的定义位置，因为它应该是 wParam“win32msg->wParam”。

```
#define GET_WHEEL_DELTA_WPARAM(wParam) ((short)HIWORD(wParam)) 
```

也许您在测试中将短值转换为无符号整数或使用无符号格式字符串输出短值？您可以使用条件检查是否定的以确保。

```
if(wheel_delta < 0) { /* do something */ } 
```

# c# - 向 2 个不同的列表框显示信息 - 使用树

> ID：15528758
> 
> 赞同：2
> 
> 时间：2013-03-20T16:04:55.197
> 
> 标签：c#, forms, list, linked-list

我目前正在用 C# 设计一个表单，我正在尝试将信息显示到两个单独的文本框中。正如您所看到的，当我单击“添加艺术家”时，它会将艺术家和艺术家数量添加到同一个框中。我不希望它这样做。

我知道'listBox2.Items.Add(artist);'这一行 导致这种情况，但是我不知道将其更改为什么，以便仅显示成员数。我的艺术家课程如下：

我想我需要在第一个 return 语句中分隔名称和成员，以便我可以使用 listBox2.Items.Add(artist.members); 单独显示它们 或表单类中的类似内容，但我不确定。

任何帮助表示赞赏！谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T16:08:57.500

它看起来像当你创建

`List<string> ListBoxItems = new List<string>();`，您正在保存艺术家的`ToString`回报，即：

```
(name + members); 
```

* * *

您可以做几件事，您可以将其暗示`ListBoxItems`为`List<Artist>`，然后您可以使用以下内容构建您的列表：

```
foreach (string artist in ListBoxItems)
{
    listBox1.Items.Add(artist.Name);
    listBox2.Items.Add(artist.Members);
} 
```

或者，您可以制作 2 个列表。说`ListBoxNames`and `ListBoxMembers`，并用各自的字段填充它们。我个人更喜欢第一种方法。

或者，如果`ArtistTree`暗示`IEnumerable`（突出显示并按 f12 进行检查），则可以从中提取

```
foreach (Artist artist in ArtistTree)
{
    listBox1.Items.Add(artist.Name);
    listBox2.Items.Add(artist.Members);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:08:30.253

listBox2.Items.Add(艺术家.成员);

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:09:52.513

您需要将列表框的 DisplayMember 属性设置为要显示的 Artist 类的公共属性。

您可以在表单中包含以下代码以实现您的目标：

```
listBox1.DisplayMember = "Name";
listBox2.DisplayMember = "Members"; 
```

# android - Android 服务可以在我的 UI 中更新图像吗

> ID：15528761
> 
> 赞同：0
> 
> 时间：2013-03-20T16:04:57.997
> 
> 标签：android, service, android-ui

我想要一个收集数据然后根据该数据生成图像的 Android 服务。我想从服务中在我的 UI 上绘制此图像，或者找到一种有效的方法将图像数据发送到我的 UI 并通知“立即绘制”。数据是实时的，更新速率约为每秒 8 张图像（256x256 像素）。因此，我需要一些相当有效的东西，并且很难找到最好的（甚至是好的）方法来做到这一点。

我是一个相当新的 Android 程序员，所以没有任何建议太侮辱人了！我的代码在我的演示 UI 中作为 AsyncTask 工作。我想把它变成一项服务，这样我就可以将它与多个 UI 一起使用，其中一些是我的同事将编写的。也许这是另一个问题，但可能有比服务更好的方法来做到这一点。我的基本问题是我想将我的“服务”分发给我的同事，而不是源代码，以供他们使用，以允许我的图像显示在他们的 UI 中。

我的“服务”不必更新多个 UI。一次只有一个活动会绑定到我的“服务”。不需要广播到多个活动。如果有更直接的方式来思考这个问题，我很高兴听到它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T18:22:15.180

> 我想从服务中在我的 UI 上绘制此图像，或者找到一种有效的方法将图像数据发送到我的 UI 并通知“立即绘制”。

你不能那样做——只有主线程可以改变 UI。我敢打赌，在你的 AsyncTask 演示中，你在 onPostExecute() 方法中绘制——尝试将你的代码移动到 doInBackground()，它不会工作。

我认为你能做的最好的事情是在你的服务中获取/获取图像，并使用广播/otto/无论它在 SD 卡上的某个地方并且可以使用它来通知你的消费者。不太确定它是否足够快以每秒通过 8 张图像......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T18:07:38.167

我认为您可以将数据写入文件。将其存储在 SD 卡上。然后向您的朋友发送包含该文件数据的广播。这样你的朋友就没有源代码了。

# javascript - 在AngularJS中的每个控制器调用之前清除一个变量？

> ID：15528764
> 
> 赞同：1
> 
> 时间：2013-03-20T16:05:01.807
> 
> 标签：javascript, angularjs, livescript

如何在每次控制器调用之前设置一些模型/变量？

目前，我有以下服务可以帮助我在页面上设置错误消息（[LiveScript](http://livescript.net/)中的代码）：

```
angular.module "project.services", 
.factory "Message", ($rootScope) ->
   {
     error :   !(msg) -> $rootScope.error = msg
     success : !(msg) -> $rootScope.success = msg
     clear :   !(msg) -> 
                   $rootScope.error = ''
                   $rootScope.success = ''
   } 
```

然后在我的`index.html`模板中：

```
<div ng-show="error" class="alert alert-error">{{error}}</div>
<div ng-show="success" class="alert alert-success">{{success}}</div>
<div ng-view> 
```

但是为了使用它，我必须在**每个**`clear`控制器中调用该方法，否则错误会停留在屏幕上：

 **```
@SomeController = !($scope, $http, Message) ->
    Message.clear() # <--- have to do this

    ... rest of the controller code
    if some-error condition
       Message.error("Could not do this")
    else
       Message.success("Success!") 
```

有没有办法自动化这个清晰的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T15:23:31.853

如果您想在每次路由更改后清除消息，这似乎适合您的用例，您可以将您的服务更改为如下所示：

```
angular.module "project.services" .factory "Message", ($rootScope) ->
  # The Message factory API.
  MessageApi = {
   error :   !(msg) -> $rootScope.error = msg
   success : !(msg) -> $rootScope.success = msg
   clear :   !(msg) -> 
               $rootScope.error = ''
               $rootScope.success = ''
  }

  # Call Message.clear whenever the route changes.
  $rootScope.$on '$routeChangeSuccess', -> MessageApi.clear!

  # Return the API.
  MessageApi 
```**

# python - 难以在按钮回调中更新标签

> ID：15528768
> 
> 赞同：1
> 
> 时间：2013-03-20T16:05:11.500
> 
> 标签：python, callback, tkinter, label, config

我是 Tkinter 和 Python 3.3 的新手，并试图开发一个简单的 GUI。我有一个标签“statusLabel”。当我单击按钮时，我想更新按钮回调中标签中的值，但出现错误。

```
line 12, in reportCallback
    statusLabel.config(text="Thank you. Generating report...")
AttributeError: 'NoneType' object has no attribute 'config' 
```

下面是我的代码

```
from tkinter import *
root = Tk()

Label(root,text="Project folders. Include full paths. One project per line").pack()
Text(root,height=4).pack()
Label(root,text="Standard project subfolders. Include path from project.").pack()
Text(root,height=4).pack()

statusLabel = Label(root,text="Oh, hello.").pack()

def reportCallback():
    statusLabel.config(text="Thank you. Generating report...")

b = Button(root, text="Generate Report", command=reportCallback).pack()

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:15:03.990

这条线是问题所在：

```
statusLabel = Label(root,text="Oh, hello.").pack() 
```

`.pack()`返回`None`。大概，您想要`statusLabel`持有对`Label`您刚刚创建的对象的引用。

试试这个：

```
statusLabel = Label(root,text="Oh, hello.")
statusLabel.pack() 
```

例如，请参阅此处第一个清单中的琐碎程序：http: [//effbot.org/tkinterbook/label.htm](http://effbot.org/tkinterbook/label.htm)

# android - 如何在android的一个类中为日期选择器创建两个微调器？

> ID：15528769
> 
> 赞同：0
> 
> 时间：2013-03-20T16:05:22.463
> 
> 标签：android, android-spinner, android-datepicker

我创建了一个类，我想在其中为日期选择器设置两个不同的微调器。我想要这个是因为我想设置开始事件日期和结束事件日期，那么如何在一个类中设置两个带有日期选择器的不同微调器？？？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:19:15.797

这是我在一些应用程序中使用的三重数字选择器。应该很容易将其修改为仅使用两个数字。

包 com.t3hh4xx0r.nfcsecure.widgets；

```
import android.content.Context;
import android.content.res.TypedArray;
import android.preference.DialogPreference;
import android.util.AttributeSet;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.NumberPicker;

import com.t3hh4xx0r.nfcsecure.R;

public class TripleNumberPickerPreference extends DialogPreference {
    private static final String defaultPersistedString = "0:0:0";
    private NumberPicker hours = null;
    private NumberPicker mins = null;
    private NumberPicker secs = null;

    View rootView;

    public TripleNumberPickerPreference(Context ctxt) {
        this(ctxt, null);
    }

    public TripleNumberPickerPreference(Context ctxt, AttributeSet attrs) {
        this(ctxt, attrs, 0);
    }

    public TripleNumberPickerPreference(Context ctxt, AttributeSet attrs, int defStyle) {
        super(ctxt, attrs, defStyle);

        setPositiveButtonText("Set");
        setNegativeButtonText("Cancel");
    }

    @Override
    protected View onCreateDialogView() {
        String[] nums = new String[61];

        for(int i=0; i<nums.length; i++) {
           nums[i] = Integer.toString(i);
        }

        LayoutInflater lI = LayoutInflater.from(getContext());
        rootView = lI.inflate(R.layout.triple_number_picker, null);
        hours = (NumberPicker) rootView.findViewById(R.id.hours);
        mins = (NumberPicker) rootView.findViewById(R.id.minutes);
        secs = (NumberPicker) rootView.findViewById(R.id.seconds);

        hours.setMaxValue(24);
        hours.setMinValue(0);
        hours.setDisplayedValues(nums);     

        mins.setMaxValue(60);
        mins.setMinValue(0); 
        mins.setDisplayedValues(nums);

        secs.setMaxValue(60);
        secs.setMinValue(0); 
        secs.setDisplayedValues(nums);

        deconstructPersistedData();

        return (rootView);
    }

    private void deconstructPersistedData() {
        hours.setValue(Integer.parseInt(getPersistedString(defaultPersistedString).split(":")[0]));
        mins.setValue(Integer.parseInt(getPersistedString(defaultPersistedString).split(":")[1]));
        secs.setValue(Integer.parseInt(getPersistedString(defaultPersistedString).split(":")[2]));
    }

    private String buildPersistedData() {
        StringBuilder sB = new StringBuilder();
        sB.append(hours.getValue());
        sB.append(":");
        sB.append(mins.getValue());
        sB.append(":");
        sB.append(secs.getValue());
        sB.append(":");

        long timeTillNextSecureLock = buildTimeTillSecureLock();
        Log.d("TIME TILL NEXT LOCK SET", ""+timeTillNextSecureLock);
        sB.append(timeTillNextSecureLock);
        return sB.toString();
    }

    private long buildTimeTillSecureLock() {
        double hoursSimple = hours.getValue();
        double minsSimple = mins.getValue();
        double secsSimple = secs.getValue();

        double secsToMillis = 1000;
        double minsToMillis = 60000;
        double hoursToMillis = 3600000;

        double secsAsMills = secsSimple * secsToMillis;
        double minsAsMills = minsSimple * minsToMillis;
        double hoursAsMills = hoursSimple * hoursToMillis;

        return (long) (secsAsMills + minsAsMills + hoursAsMills);
    }

    @Override
    protected void onBindDialogView(View v) {
        super.onBindDialogView(v);
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);
        String persisted = buildPersistedData();

        if (positiveResult) {
            if (callChangeListener(persisted)) {
                persistString(persisted);
                notifyChanged();
            }
        }
    }

    @Override
    protected Object onGetDefaultValue(TypedArray a, int index) {
        return defaultPersistedString;
    }

      public static long subAndCheck(long a, long b) {
          long ret;
          String msg = "overflow: subtract";
          if (b == Long.MIN_VALUE) {
              if (a < 0) {
                  ret = a - b;
              } else {
                  throw new ArithmeticException(msg);
              }
          } else {
              ret = addAndCheck(a, -b, msg);
          }
          return ret;
      }

      private static long addAndCheck(long a, long b, String msg) {
          long ret;
          if (a > b) {
              ret = addAndCheck(b, a, msg);
          } else {            
              if (a < 0) {
                  if (b < 0) {
                      if (Long.MIN_VALUE - b <= a) {
                          ret = a + b;
                      } else {
                          throw new ArithmeticException(msg);
                      }
                  } else {
                      ret = a + b;
                  }
              } else {
                  if (a <= Long.MAX_VALUE - b) {
                      ret = a + b;
                  } else {
                      throw new ArithmeticException(msg);
                  }
              }
          }
          return ret;
      }
} 
```

和布局 -

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_weight="1"
            android:text="@string/hours"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView1"
            android:gravity="center"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/minutes"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_weight="1"
            android:text="@string/seconds"
            android:textAppearance="?android:attr/textAppearanceMedium" />

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <NumberPicker
            android:id="@+id/hours"
            android:layout_width="0dp"
            android:layout_marginLeft="5dp"
            android:layout_marginRight="3dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <NumberPicker
            android:id="@+id/minutes"
            android:layout_width="0dp"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="3dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <NumberPicker
            android:id="@+id/seconds"
            android:layout_marginLeft="2dp"
            android:layout_marginRight="5dp"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </LinearLayout>

</LinearLayout> 
```

# visual-studio-2010 - 是否可以将 MSI 的副本添加到其自己的应用程序文件中？

> ID：15528774
> 
> 赞同：1
> 
> 时间：2013-03-20T16:05:27.990
> 
> 标签：visual-studio-2010, windows-installer

我正在制作一个可以自动更新的 Windows 服务。计划是在有可用服务的新版本时运行控制台应用程序。此应用程序将通过引用 MSI 卸载并使用新版本重新安装服务。所以，我想要应用程序文件夹中的 MSI 副本。

MSI 可以在安装时将其自身的副本放在应用程序文件夹中吗？如果是这样，怎么做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:25:14.227

这种方法最初是错误的。

如果有新版本可用，则有很多机会升级某些东西。

1.  在安装时检查它们（某些安装程序具有自动下载功能） - 部分解决方案，没有自动升级机会
2.  服务需要发现新版本（后台线程） - 需要一些开发 [msi silent install in the background] <- 首选
3.  集中部署 - 有集中安装的解决方案，甚至 MS、IBM 等都有这方面的工具。因此，如果一个新的解决方案已经准备好，那么无论如何您都可以在您的域中部署它们。<- 不太划算，大公司经常使用

+1还有一些方法可以在不停止服务的情况下做到这一点。在 C# 中，您可以动态加载和卸载版本化程序集，但这会使您的开发人员生活变得非常艰难。

如果您选择了 2.nd 选项，那么您可以从代码启动“异步处理”，这样安装程序将使用默认选项（搜索静默安装）运行，尽管您可以定义自定义设置“my.msi -s config.file”。如果已经存在，安装程序需要准备检查和停止服务本身。

这是一个复杂的故事，搜索我提到的一些关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T17:23:31.783

我建议不要让 .msi 复制自身（这需要一些真正的技巧才能使自引用工作），我建议只让新的 .msi 升级旧的 .msi 文件。那么您只需要新的 .msi 而不需要旧的 .msi。

或者，您可以将内容放入`Bundle`（使用 WiX 工具集中的 Burn 引擎），它可以通过`Bundle`.

# ruby-on-rails - 如何仅在表单中创建新记录时显示模板？

> ID：15528779
> 
> 赞同：-1
> 
> 时间：2013-03-20T16:05:45.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我确实有模板内容，`communities/template.html.erb`
我想仅在用户创建新社区时显示。
我怎样才能做到这一点？不应该是这样的吗？

```
<% if @community.new_record? %>  
    <textarea class="text_area"><%= render file: "communities/template" %></textarea>
<% else %>
    <%= f.text_area :body, :class => 'text_area' %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:09:32.157

你不想使用`file:`它的外观。[`file:`](http://guides.rubyonrails.org/layouts_and_rendering.html#using-render)用于指定 Rails 应用程序之外的文件。另外，您是否打算在`textarea`?

对于未来的问题，告诉我们错误是什么而不是让我们猜测总是很方便的。

# web-applications - 带有 EJB3 的 Maven Web 应用程序

> ID：15528787
> 
> 赞同：0
> 
> 时间：2013-03-20T16:05:58.847
> 
> 标签：web-applications, maven-2, ejb-3.0, jboss7.x

我是 EJB3 的新手，也许之前讨论过这个问题，但我没有找到任何可靠的解释。我必须使用 EJB3 技术（包括 JPA2 实体）实现简单的 Maven2 Web 应用程序。有人可以解释我需要逐步使用什么原型或项目结构以及哪些依赖项？顺便说一句，这个应用程序应该部署到应用程序服务器（最好直接来自 IDEA）。AS 是 JBoss 7。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:52:37.243

看看[JDF](http://www.jboss.org/jdf/)。它有很多关于入门的信息。还可以查看[JDF Stacks](http://www.jboss.org/jdf/stack/stacks/)以了解 Maven 依赖项。Java EE 依赖项有 BOM。

# ios - 带有移动配置文件的 Google Analytics v1 SDK

> ID：15528791
> 
> 赞同：1
> 
> 时间：2013-03-20T16:06:08.243
> 
> 标签：ios, google-analytics

Google Analytics 对我的 ios 应用程序（使用 GA v1.0）运行良好，但我在分析套件中创建了一个新配置文件并将配置文件类型设置为“应用程序”。现在不行了。。

我偷偷怀疑“应用程序”选择仅适用于 GA v2.0？有人可以确认吗？

顺便说一句，您可以通过打开一个套件来创建一个新的配置文件，单击“管理员”（右上角），然后单击“+ 新配置文件”（页面中间）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T02:50:24.257

所以事实证明，当你为一个 ID 创建一个新的配置文件时，你选择了一个新的

**1) 网站**

或者

**2) 应用程序**

我不知道的是 SDK v1 与*网站*配置文件一起使用，而 SDK v2 与*应用程序*配置文件一起使用。因此，如果您的应用程序使用**谷**歌分析进行跟踪并且不再跟踪，那么请确保您使用 SDK v1 的网站跟踪和 SDK v2 的应用程序跟踪。

*额外提示，在您的个人资料活跃 +-12 小时后，您可以根据*实时*跟踪检查您的应用程序。如果实时跟踪有效，那么您就知道您已经正确设置了所有内容。

# rally - 集会富文本脚本

> ID：15528793
> 
> 赞同：0
> 
> 时间：2013-03-20T16:06:12.743
> 
> 标签：rally

我正在创建一个自定义看板，我希望在其中允许用户在富文本编辑器中编辑故事或缺陷的描述。我找不到可以使用的富文本编辑器的任何文档，但是查看 /slm/ar/edit 页面的源代码后，我发现了以下代码片段。

```
Rally.alm.LegacyBootstrapper.onReady(function(){
            var editor = new RALLY.ui.richtext.EditorBuilder().
                withValue('This is a description of a story').
                build('description',
                      'userStory',
                      '#########');

            editor.render('descriptionEditorContainer');
        }); 
```

我想使用编辑器构建器，但我不知道如何引用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T21:17:47.823

我建议查看[Rally.ui.dialog.RichTextDialog](https://developer.help.rallydev.com/apps/2.0p5/doc/#!/api/Rally.ui.dialog.RichTextDialog)以了解与 Rally 富文本编辑工具的 AppSDK2 兼容挂钩。

# database - Liquibase 锁 - 原因？

> ID：15528795
> 
> 赞同：335
> 
> 时间：2013-03-20T16:06:15.593
> 
> 标签：database, oracle, liquibase

在针对 Oracle 服务器运行大量 liquibase 脚本时，我得到了这个。SomeComputer 是我。

```
Waiting for changelog lock....
Waiting for changelog lock....
Waiting for changelog lock....
Waiting for changelog lock....
Waiting for changelog lock....
Waiting for changelog lock....
Waiting for changelog lock....
Liquibase Update Failed: Could not acquire change log lock.  Currently locked by SomeComputer (192.168.15.X) since 2013-03-20 13:39
SEVERE 2013-03-20 16:59:liquibase: Could not acquire change log lock.  Currently locked by SomeComputer (192.168.15.X) since 2013-03-20 13:39
liquibase.exception.LockException: Could not acquire change log lock.  Currently locked by SomeComputer (192.168.15.X) since 2013-03-20 13:39
        at liquibase.lockservice.LockService.waitForLock(LockService.java:81)
        at liquibase.Liquibase.tag(Liquibase.java:507)
        at liquibase.integration.commandline.Main.doMigration(Main.java:643)
        at liquibase.integration.commandline.Main.main(Main.java:116) 
```

是否达到了同时会话/交易的数量？有人有什么想法吗？

* * *

## 回答 #1

> 赞同：736
> 
> 时间：2013-09-29T18:20:42.503

有时，如果更新应用程序突然停止，则锁仍然卡住。

然后运行

```
UPDATE DATABASECHANGELOGLOCK SET LOCKED=0, LOCKGRANTED=null, LOCKEDBY=null where ID=1; 
```

对数据库有帮助。

您可能还需要替换`LOCKED=0`为`LOCKED=FALSE`.

或者您可以简单地删除`DATABASECHANGELOGLOCK`表，它将被重新创建。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2015-05-22T09:34:17.527

## 编辑 2020 年 6 月

不要听从这个建议。多年来，它给许多人带来了麻烦。很久以前它对我有用，我真诚地发布了它，但显然不是这样做的方法。DATABASECHANGELOCK 表中需要有东西，所以不删除表就删除它的所有内容是个坏主意。

[例如， Leos Literak](https://stackoverflow.com/questions/15528795/liquibase-lock-reasons/30393219?noredirect=1#comment110444052_30393219)遵循了这些说明，但服务器无法启动。

## 原始答案

这可能是由于已终止的 liquibase 进程未释放其对 DATABASECHANGELOGLOCK 表的锁定。然后，

```
DELETE FROM DATABASECHANGELOGLOCK; 
```

可能会帮助你。

**编辑：** @Adrian Ber 的回答提供了比这更好的解决方案。仅当您在解决他的解决方案时遇到任何问题时才这样做。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2013-03-22T09:42:24.167

问题在于 Liquibase 中 SequenceExists 的错误实现。由于这些语句的变更集花费了很长时间并且被意外中止。然后下一次尝试执行持有锁的 liquibase-scripts。

```
 <changeSet author="user" id="123">
    <preConditions onFail="CONTINUE">
      <not><sequenceExists sequenceName="SEQUENCE_NAME_SEQ" /></not>
    </preConditions>
    <createSequence sequenceName="SEQUENCE_NAME_SEQ"/>
  </changeSet> 
```

一种解决方法是使用纯 SQL 来检查：

```
 <changeSet author="user" id="123">
    <preConditions onFail="CONTINUE">
            <sqlCheck expectedResult="0">
              select count(*) from user_sequences where sequence_name = 'SEQUENCE_NAME_SEQ';
            </sqlCheck>
    </preConditions>
    <createSequence sequenceName="SEQUENCE_NAME_SEQ"/>
  </changeSet> 
```

Lockdata 存储在表 DATABASECHANGELOCK 中。要摆脱锁定，您只需将 1 更改为 0 或删除该表并重新创建。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2019-04-04T21:39:14.573

没有提到使用哪个环境来执行 Liquibase。如果是 Spring Boot 2，则可以`liquibase.lockservice.StandardLockService`在不需要运行直接 SQL 语句的情况下进行扩展，这样更简洁。例如：

```
/**
 * This class is enforcing to release the lock from the database.
 *
 */
 public class ForceReleaseLockService extends StandardLockService {

    @Override
    public int getPriority() {
        return super.getPriority()+1;
    }

    @Override
    public void waitForLock() throws LockException {
        try {
            super.forceReleaseLock();
        } catch (DatabaseException e) {
            throw new LockException("Could not enforce getting the lock.", e);
        }
        super.waitForLock();
    }
} 
```

该代码正在强制释放锁。这在测试设置中很有用，因为在出​​现错误或调试中止时可能不会调用发布调用。

该类必须放在`liquibase.ext`包中，并将被 Spring Boot 2 自动配置拾取。

## Liquibase 4

请注意，扩展加载机制在[Liquibase 4](https://docs.liquibase.com/tools-integrations/extensions/extension-upgrade-guides/lb-4.0-upgrade-guide.html?Highlight=extension)中发生了变化。

现在`META-INF/services`必须创建一个具有已实现的完整接口包名称的文件，并且在该文件中必须列出所有扩展名。

这可能意味着在`META-INF/services/liquibase.lockservice.LockService`

必须添加此行：

```
com.company.liquibase.impl.ForceReleaseLockService 
```

没试过，还在用Liquibase 3，请编辑更正。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-19T14:48:51.853

我很欣赏这不是 OP 的问题，但我最近遇到了这个问题，原因不同。作为参考，我在 SQL Server 中使用了 Liquibase Maven 插件 (liquibase-maven-plugin:3.1.1)。

无论如何，我错误地将 SQL Server“使用”语句复制并粘贴到我的一个切换数据库的脚本中，因此 liquibase 正在运行并更新`DATABASECHANGELOGLOCK`，获取正确数据库中的锁，然后切换数据库以应用更改。我不仅在正确的数据库中看不到我的更改或 liquibase 审计，而且当然，当我再次运行 liquibase 时，它​​无法获取锁，因为锁已在“错误”数据库中释放，所以是仍然锁定在“正确”的数据库中。我本来希望 liquibase 在释放它之前检查锁是否仍然被应用，也许这是 liquibase 中的一个错误（我还没有检查过），但它很可能在以后的版本中得到解决！也就是说，我想它可以被认为是一个功能！

相当多的小学生错误，我知道，但我在这里提出，以防有人遇到同样的问题！

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-04-01T01:34:13.300

有时截断或删除表 DATABASECHANGELOGLOCK 不起作用。我使用 PostgreSQL 数据库并多次遇到这个问题。我要解决的是回滚在后台为该数据库运行的准备好的语句。尝试回滚所有准备好的语句并再次尝试 liquibase 更改。

SQL：

```
SELECT gid FROM pg_prepared_xacts WHERE database='database_name'; 
```

如果上述语句返回任何记录，则使用以下 SQL 语句回滚该准备好的语句。

```
ROLLBACK PREPARED 'gid_obtained_from_above_SQL'; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-04-14T17:14:20.683

您可以手动或使用查询安全地删除表。它将自动重新创建。

```
DROP TABLE DATABASECHANGELOGLOCK; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-11T13:23:36.663

在**postgres 12**中，我需要使用以下命令：

```
UPDATE DATABASECHANGELOGLOCK SET LOCKED=false, LOCKGRANTED=null, LOCKEDBY=null where ID=1; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-04-22T08:53:17.237

请让 Liquibase 处理自己的表格。正如 user1434769 所提到的，正确的做法是使用 Liquibase 的 releaseLocks 命令。

使用 Gradle 时，这将是：`gradlew releaseLocks`

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-27T16:56:28.850

如果@Adrian 发布的解决方案不起作用，您可以尝试在包含有关锁的其他信息的表 INTERFACE_DATABASECHANGELOGLOCK 中执行相同操作。

```
UPDATE INTERFACE_DATABASECHANGELOGLOCK SET LOCKED=0, LOCKGRANTED=null, LOCKEDBY=null where ID=1; 
```

或者干脆清理桌子

```
TRUNCATE TABLE INTERFACE_DATABASECHANGELOGLOCK 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-02-14T00:35:17.717

我之前刚刚截断了 DatabaseChangeLogLock 表，当锁在失败后仍然存在时（这通常对我仍然有效）。

但是，这个项目（[https://github.com/blagerweij/liquibase-sessionlock](https://github.com/blagerweij/liquibase-sessionlock)）现在已经存在，它在使用 Oracle、PostgreSQL 和 MySQL 时使用本地数据库会话锁来锁定 Liquibase。

JAR 文件可以拖放到现有的 Liquibase 4.x+ 应用程序中，并由 Liquibase 自动检测。这将使用会话锁进行锁定。如果应用程序崩溃或在持有锁时关闭，会话锁会自动释放。这可能会阻止锁定状态的发生（如果您使用的是受支持的数据库之一）

# php - Preg_match 标识符

> ID：15528800
> 
> 赞同：4
> 
> 时间：2013-03-20T16:06:28.720
> 
> 标签：php, regex, preg-match

我想从我的标识符中得到匹配。

我有一个像这样的字符串进入`{/describe:foo}`我试图匹配`{/describe:}`返回的地方`foo`，但没有得到正确的正则表达式，有人介意指出我做错了什么吗？这是我的比赛。

```
$regexp = '/\{describe:(.*?)\}/i';
$query  = '{/describe:foo}'; 
preg_match($regexp, $query, $match);

print_r($match); // (bool) false 
```

**背景** 我希望这可以帮助其他人，这样做的一个很好的理由是在可以解释和替换的字符串中创建可替换的控制字，这是一个 RESTful 海报的示例，它将在控制字上运行描述符。

```
 if (preg_match('/\{describe:(.*?)\}/i', $_POST['query'], $match))
  {
        // Describe Salesforce Object from internal POST tool
        print_r($SforceConnection->describeSObjects($match[1]));
        exit;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:08:11.393

您在正则表达式中缺少正斜杠：

```
$regexp = '/\{\/describe:(.*?)\}/i'; 
```

或者：

```
$regexp = '#\{/describe:(.*?)\}#i'; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:08:24.387

```
$regexp = '/\{\/describe\:(.*?)\}/i';
$query  = '{/describe:foo}';
preg_match($regexp, $query, $match);

print_r($match); // Array ( [0] => {/describe:foo} [1] => foo ) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T16:09:49.707

```
$regexp = '#{/describe:([^}]+)}#i';
$query  = '{/describe:foo}'; 
preg_match($regexp, $query, $match);

print_r($match); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-20T16:08:12.650

用最简单的术语来说，您可以使用它：`(?<=\/describe:).*(?=})`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-20T16:08:47.273

尝试（`/`在描述之前看起来好像丢失了）：

```
$regexp = '/\{/describe:(.*?)\}/i' 
```

# asp.net - 按钮点击确认*在*执行部分点击处理程序之后

> ID：15528802
> 
> 赞同：0
> 
> 时间：2013-03-20T16:06:31.987
> 
> 标签：asp.net, .net, event-handling, prompt

我有两个下拉列表，
一个用于员工 列表，
一个用于团队列表；
单击按钮时，应将选定的员工分配（如果他们已经分配到另一个团队，则重新分配）到选定的团队。

如果员工已经被分配到另一个团队（换句话说，他们正在被重新分配），
我想检查他们是否是他们当前分配到的团队中唯一剩下的成员。

如果是这样，我想提示用户“重新分配此成员将导致*x 团队*为空/删除，您确定要这样做吗？”。

我知道我可以做这样的事情：

```
<asp:Button OnClientClick="return confirm('Are you sure you want to go?');" 
        Text="Confirm" runat="server" onclick="Unnamed1_Click" /> 
```

但据我了解，这将导致在单击按钮后立即显示提示，并且不依赖于团队成员是当前团队中唯一剩余成员的先决条件。

在执行前面提到的检查*后*，有什么方法可以有条件地显示提示？

谢谢，
克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:51:26.857

在客户端单击通过 jquery 调用 ajax 方法来检查天气或团队是否有单个员工。
如果它是单一的，那么确认框。
[http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)
或者你可以创建一个通用的http处理程序并通过jQuery调用
一个很好的链接
[http://www.codeproject。 com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev](http://www.codeproject.com/Articles/203621/Call-HTTPhandler-from-jQuery-Pass-data-and-retriev)

## 编辑 1

假设你有一个页面方法说 checkdata 它返回字符串
On button client click 你调用这样的函数

```
OnClientClick="return checkData()" 
```

并在javascript中创建了一个函数

```
 function checkData()
  {
       $.ajax({
       type: "POST",
       url: "PageName.aspx/MethodName",
       data: "{}",
       contentType: "application/json; charset=utf-8",
       dataType: "text",
       success: function(msg) {
             var msg=msg.d;
             if(msg="true")
             {
                  return confirm("Your message");
             }
          } ....

       });    
  } 
```

这是一个很好的链接
[Jquery 表单检查返回true，但需要返回false](https://stackoverflow.com/questions/4577106/jquery-form-check-returns-true-but-need-to-return-false)

# ruby-on-rails - Rails 3.2.13 升级和jruby/openssl

> ID：15528813
> 
> 赞同：1
> 
> 时间：2013-03-20T16:06:45.963
> 
> 标签：ruby-on-rails, jruby, jruby-openssl

升级到 Rails 3.2.13 后，我开始收到有关 jruby/openssl 的错误。

```
(LoadError) no such file to load -- jruby/openssl 
```

我正在使用 JRuby 1.6.7、jruby-openssl 0.8.6 和 Rails 3.2.13。

有没有人能够解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:12:50.757

JRuby-OpenSSL 版本 0.8.x 与低于 JRuby 1.7.x 的版本不兼容。

JRuby-OpenSSL 0.7.x 版仍然可以与 JRuby 1.6.x 一起使用。

降级 jruby-openssl gem 版本应该可以解决这个问题。

# asp.net-mvc-4 - 通过 URL 将 double/float 传递给 Web Api 查询字符串

> ID：15528819
> 
> 赞同：0
> 
> 时间：2013-03-20T16:07:07.410
> 
> 标签：asp.net-mvc-4, asp.net-web-api, query-string

我有一个 Web Api 项目，我想通过这个 URL 调用一个 api 控制器：

```
Http://localhost:3030/GetByCoordinates/[[0,1],[1,1],[1,0],[0,0]] 
```

它工作正常，但是当我尝试添加一个双数（如 1.1 而不是 1）时，浏览器会抛出 404 not found 异常，因为点使它看起来像另一个地址。

我该如何处理双打？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-09T08:42:51.050

尝试在 URL 末尾添加“/”，例如

```
Http://localhost:3030/GetByCoordinates/[[0,1],[1,1.1],[1,0],[0,0]]/ 
```

参考：[为什么我的带有双参数的 Web API 方法没有被调用？](https://stackoverflow.com/questions/21387974/why-is-my-web-api-method-with-double-args-not-getting-called)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:11:38.640

这不是严格的查询字符串，但除非您可以配置您的 MVC 项目（或者，更具体地说，可能是 IIS）以允许/管理某些映射（或者在给定情况下可能*不*管理它们），否则您应该能够将字符从一种形式翻译成另一种形式。

也就是说，您可以将句点`%2E`换成 ，然后在服务器端将它们换回。

# php - 具有可变数量元素的数组，向上计数

> ID：15528820
> 
> 赞同：3
> 
> 时间：2013-03-20T16:07:09.123
> 
> 标签：php, recursion, multidimensional-array

我想要一个多维数组，其中每个元素都是 X 元素的数组 - 比如说 3。

我基本上想在第三个元素中从 0 计数到 y（比如说 12），然后在 0,0,12 之后我希望数组中的下一个元素是数组 0,1,0 - 以 12,12 结束， 12.

我在以 ... 12 为基数进行计数，完成后跳到数组中的下一个元素。

例如

```
0,0,0
0,0,1
...
0,0,12
0,1,0
0,1,1
0,1,2
...
0,1,12
0,2,0
...
12,12,12 
```

好的，好的 - 我可以这样做

```
$maxCountNumber= 12;
$i=1;
for ($j=0; $j < $maxCountNumber+1; $j++) { 
    for ($k=0; $k < $maxCountNumber+1; $k++) { 
        for ($l=0; $l < $maxCountNumber+1; $l++) { 
                print "<br/>$i: $j, $k, $l";
                $results[$i] = array($j, $k, $l);
                $i++;
        }
    }
} 
```

但是，如果我不想每次都只需要 3 个元素——有时我会想要 4 个——而不是数百、十和单位，我想要千、百、十和单位……或者 7 个元素怎么样？

我确信递归是答案，但我似乎无法解决这个特定问题。

除非有什么东西可以在 12 秒而不是 10 秒内对我有用？

感谢您的所有建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:53:46.703

好吧，现在让我们看看...

```
$numberOfDimensions = 3;
$base = 13;

$YourArray = array();    //This array will hold the complete data.
$LastArray = array();
for($o = 0; $o < $numberOfDimensions; ++$o) //Gives us something to start with.
    $LastArray[$o] = 0;    

while($LastArray[0] < $base) {      //Makes sure, we're not going out of bounds
    $index = $numberOfDimensions - 1;
    $YourArray[] = $LastArray;      //Adds the array you filled last to the result array.
    while($index >= 0) {            //This is where things start to get interesting.
        if(++$LastArray[$index] < $base) break;  //Still in bounds, continue.
        else {
            if($index)              //Overflow for all but the first element..
                $LastArray[$index] = 0;
            --$index;               //Moving on to the previous digit.
        }
    }
}

echo "<pre>";
echo print_r($YourArray);
echo "</pre>"; 
```

呼……这对我疲惫的大脑来说比我读到这个问题时想象的要困难得多。这应该可行...如果您对代码有疑问，请随时提问。

我现在已经对其进行了测试，它可以达到预期的效果。在我的测试中，我遇到了一个愚蠢的错误，特此修复。抱歉耽搁了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:52:10.417

该算法预先计算总共需要的循环数，然后使用 $i 计算每个数组位置的值。

```
$max= 13;
$elements = 4;
$loops = pow($max, $elements);

$main_array = array();

for($i = 0; $i < $loops; $i++){
    for($j = 0; $j < $elements; $j++){
        $main_array[$i][$j] = floor($i/pow($max,$elements-1-$j))%$max;
    }
} 
```

这是我发现的最优雅的解决方案，只有 2 个嵌套循环和 1 个算术运算，每次使用幂和模数来获得所需的数组。

您只需要调整元素和/或基数。

用 0.014 秒计算出 3 个位置的数组。

用 0.25 秒计算出 4 个位置的数组。

用 4.08s 计算了 5 个位置的数组*

*对于 5 个位置，我需要增加 memory_limit，我猜是因为数组变得太大，如果你只输出数字而不是存储一个巨大的数组，这个脚本会轻得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:52:54.387

您的基本递归如下：

```
<?php 
class StrangeBase { 
  private static function loopOnStrangeBase($place, $base, $printstr) { 
    if (($place < 0) || ($base < 0)){ return; }//edge case 
    for ($idx=0; $idx<$base; $idx++) { 
      if ($place == 0) { 
        echo "$printstr,$idx\n"; 
      } else {
        if($printStr !== ''){ 
          StrangeBase::loopOnStrangeBase($place - 1, $base, $printstr.",$idx");
        } else {
          StrangeBase::loopOnStrangeBase($place - 1, $base, "$idx");
        }
      }
    } 
  }

  public static function printStrangeBase($places, $base) {
    StrangeBase::loopOnStrangeBase($places, $base, "");
  }
} 

StrangeBase::printStrangeBase(3, 12); 
```

现在，您可以将其修改为不是静态函数，而是保存到数组中*。*为此，您的数组应该“向后”增长；即数组中的第一个元素是您数字中的最低位。然后，您可以进一步修改递归函数以获取函数指针并运行任意代码，而不是简单地打印出它的位置。

# python - 转换问题 - Python？

> ID：15528821
> 
> 赞同：0
> 
> 时间：2013-03-20T16:07:13.253
> 
> 标签：python, string, debugging, pandas

我一直在调试我的脚本，并将我的问题缩小到几行我认为导致我的问题的代码。我正在从 3 个 csv 文件中读取数据，从 SQL Server 中的存储过程中提取数据，并将两者中的数据导出到 excel 文件中以绘制 cmparisons。我遇到的问题是我的源文件正在生成重复项（每个源文件中的一行）。我将打印语句放入以下数据中以查看发生了什么。

```
#convert district codes to strings
if dfyearfound:
    df2['district_code']=df2['district_code'].apply(lambda x: str(x))
    print df2['district_code'][df2.index[0]]
    df2['district_type_code']=df2['district_type_code'].apply(lambda x: str(x))
    print df2['district_type_code'][df2.index[0]]
if teacheryearfound:
    teacherframe['district_code']=teacherframe['district_code'].apply(lambda x: str(x))
    print teacherframe['district_code'][teacherframe.index[0]]
    teacherframe['district_type_code']=teacherframe['district_type_code'].apply(lambda x: str(x))
    print teacherframe['district_type_code'][teacherframe.index[0]]
if financialyearfound:
    financialframe['district_code']=financialframe['district_code'].apply(lambda x: str(x))
    print financialframe['district_code'][financialframe.index[0]]
    financialframe['district_type_code']=financialframe['district_type_code'].apply(lambda x: str(x))
    print financialframe['district_type_code'][financialframe.index[0]] 
```

print 语句给了我以下输出： 1, 1, 1, 3.0, 0012, 1

所有 dist_code 的长度应为 4，并且它们在源文件中从 1 位到 4 位不等。在数据库中，它们都是 4 位数字（例如：0001、0012）。区类型为1位或2位，在数据库中均为2（例：01、03）。我不确定为什么上面的字符串转换不起作用。我打算编写一个函数来格式化 District_code 和 District_type_code 但我不想硬编码长度并且我写的函数我无法开始工作：

```
#function for formating district codes
def formatDistrictCodes(code):

    dist=code
    dist.zfill(4)

    return dist

formatDistrictCodes(districtformat) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:26:01.770

我认为你的问题的核心是：

> 所有 dist_code 的长度应为 4，并且它们在源文件中从 1 位到 4 位不等。在数据库中，它们都是 4 位数字（例如：0001、0012）。区类型为1位或2位，在数据库中均为2（例：01、03）。

`0`在 Python 中，任何以八进制开头的数字都是：

```
>>> 016
14 
```

所以你真正想要的是取一个数字，并在前面加上一系列零，固定长度为 4，然后确保它是一个字符串。

```
>>> str(1).zfill(4)
'0001' 
```

在您的代码中，这将是：

```
str(df2['district_code']).zfill(4) 
```

请注意，这不会*强制执行*长度。它只会确保最小长度为 4。对于所有超过 4 位的值，上述无效。

# cocos2d-iphone - Cocos2D 简单碰撞检测一个精灵，另一个精灵的孩子

> ID：15528828
> 
> 赞同：0
> 
> 时间：2013-03-20T16:07:28.347
> 
> 标签：cocos2d-iphone, collision-detection, ccsprite, bounding-box

我的碰撞检测有问题（我使用的是 cocos2d，而不是 box2D 或 Chipmunk）。基本上，我有**Player**，它是一个 CCSprite，还有**Projectiles**，也是 CCSprite。到目前为止，使用 CGRectIntersectRect 一切正常，但在游戏中玩家可以激活超级末日激光，它总是在玩家面前。我包含它的方式是我将它添加为**player 的子项**，因此我没有更多代码可以处理诸如旋转或移动之类的事情。但我遇到的问题是它无法正确检测与射弹的碰撞，因为激光的位置始终为 0,0，因为它是添加到玩家而不是场景中的。

这是我的代码：

**播放器.m**

```
- (bool) activateSuper{
bool activated = NO;
if (powerReady) {
    NSLog(@"Super Activated!!!!!");
    activated = YES;
    _state = pSuper;

    //Super sprite which is supposed to collide with projectiles
    _sprSuper = [CCSprite spriteWithSpriteFrameName:@"Laser.png"];
    _sprSuper.anchorPoint = ccp(0.5, 0.0);
    _sprSuper.position = ccp(self.contentSize.width/2, self.contentSize.height);
    [self addChild:_sprSuper];

    //Delete
    int duration = 5;
    [self runAction:[CCSequence actionOne:[CCDelayTime actionWithDuration:duration]
                                      two:[CCCallBlock actionWithBlock:^{
        [self removeChild:_sprSuper cleanup:YES];
        powerReady = NO;
        curSuper = 0;
        _state = pOK;
    }]]];

    //Empty super bar
    GameScene *g = (GameScene*)[self parent];
    [g.gameHUD emptyBar:duration];
}

return activated;
} 
```

在**GameScene.m**中（用于碰撞检测）：

```
- (void) update:(ccTime)dt{
Projectile *pToRemove = nil;
for (Projectile *p in projectiles){

    if (player.state == pSuper && CGRectIntersectsRect(p.boundingBox, player.sprSuper.boundingBox)) {
        pToRemove = p;
        break;
    }
}

if (pToRemove != nil) [self destroyProjectile:pToRemove];

} 
```

你觉得我应该关注什么？是否有检测碰撞的简单方法，或者我应该在场景中添加激光并添加代码以使其与玩家一起移动？

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:59:27.580

使用 CCNode 方法`convertToWorldSpace:`将弹丸的边界框位置（原点）转换为世界空间坐标。这会转换坐标，就好像将弹丸添加到场景中一样，即位置相对于屏幕坐标 0,0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T04:03:57.343

你可以尝试一些事情：

1.  `convertToWorldSpace`与`convertToNodeSpace`场景和播放器一起玩

2.  将激光放在**场景中**，当你移动玩家时也移动激光

    *   您可以向播放器发送激光参考并覆盖`setPosition()`播放器中 的方法

        ```
         -(void) setPosition(CGPoint newPos){
                    [laser setPosition:newPos];
                    [super setPosition:newPos];
            } 
        ```

        在这里，每次移动播放器（CCMoveTo、CCMoveBy 等）时，激光也会移动。

    *   另一种选择是当您移动玩家时，向激光发送相同的动作

# java - fn:substringAfter() 最后一次出现

> ID：15528830
> 
> 赞同：0
> 
> 时间：2013-03-20T16:07:36.363
> 
> 标签：java, jsp, jakarta-ee, jstl

可以说我有一些字符串，例如：`"1", "1.2", "1.2.3", "12.13"...`

对于前 2 个元素使用 JSTL，很容易在 之后输出最后一个数字`.`：

`${fn:contains(myStr, '.') ? fn:substringAfter(myStr,'.') : myStr}`

但是这种方法不适用于其他元素。从上面的元素我希望得到`"1", "2", "3", "13"`.

由于这仅与前端的格式有关，我不想在 Java 部分中解决这个问题。

有没有办法使用默认库来实现这一点，或者我应该为此创建一个自己的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:20:08.033

找到了解决方案：

`${fn:split(myStr, '.')[fn:length(fn:split(myStr.index, '.'))-1]}`

# emacs - 小写并与下划线连接的功能

> ID：15528835
> 
> 赞同：1
> 
> 时间：2013-03-20T16:07:47.963
> 
> 标签：emacs

我想将标记的文本区域更改为由**下划线连接的所有****小写**单词。例如：

 **```
A fox caught a bird => a_fox_caught_a_bird 
```

**Emacs** 23中的功能是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:13:20.063

没有内置函数可以满足您的需求，但此代码段可以解决问题。

```
(defun lower-and-concat (b e)
  (interactive "r")
  (save-restriction
    (narrow-to-region b e)
    (goto-char (point-min))
    (downcase-region b e)
    (while (re-search-forward "[ \t]+" nil t)
      (replace-match "_")))) 
```**

# javascript - 如何简化重复的功能

> ID：15528836
> 
> 赞同：0
> 
> 时间：2013-03-20T16:07:48.350
> 
> 标签：javascript, jquery, html, simplify

我是编程新手，并试图简化一些 jquery/javascript 代码，但我没有取得太大的成功。我尝试调整此处找到的解决方案：[jQuery Simplify](https://stackoverflow.com/questions/11911551/jquery-simplify)

...但同样，没有成功。

这是我的jQuery代码：

```
<script>
$(document).ready(function(){

$("#hide01").click(function(){
$(".content01").hide();
});

$("#show01").click(function(){
$("p").hide();
$(".content01").show();
});

$("#hide02").click(function(){
$(".content02").hide();
});

$("#show02").click(function(){
$("p").hide();
$(".content02").show();
});

});
</script> 
```

和 HTML：

```
<button id="hide01">Hide</button>
<button id="show01">Show</button>

<button id="hide02">Hide</button>
<button id="show02">Show</button>

<p class="content01">Content 01</p>

<p class="content02">Content 02</p> 
```

该解决方案有效，但我需要 40 个按钮/内容块...

任何人都可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:11:54.747

我会将 HTML 更改为：

```
<button class="btn_hide" data-id="01">Hide</button>
<button class="btn_show" data-id="01">Show</button>

<button class="btn_hide" data-id="02">Hide</button>
<button class="btn_show" data-id="02">Show</button>

<p id="content01">Content 01</p>
<p id="content02">Content 02</p> 
```

那么你的 jQuery 可以是：

```
$(".btn_hide").click(function() {
    $("#content"+this.getAttribute("data-id")).hide();
});
$(".btn_show").click(function() {
    $("p").hide();
    $("#content"+this.getAttribute("data-id")).show();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T16:11:37.657

使用 jQuery，您可以堆叠选择器 IE：

```
 $("#hide01, #show01").click(function(){
    $(".content01").hide();
 }); 
```

但就个人而言，我不会使用 ID，而是为此使用一个类：

```
 <button id="hide01" class="hide">Hide</button>
  <button id="show01" class="show">Show</button>
  <button id="hide02" class="hide">Hide</button>
  <button id="show02" class="show">Show</button>
  <button id="hide03" class="hide">Hide</button>
  <button id="show04" class="show">Show</button> 
```

**JS**

```
 $(".hide").click(function(){
    $(".content01").hide();
 });
 //Etc Etc.. 
```

# css - 如何使用 CSS 为具有特定于另一个标签的内容的标签设置样式？

> ID：15528838
> 
> 赞同：0
> 
> 时间：2013-03-20T16:07:59.423
> 
> 标签：css, css-selectors

如何使用 CSS 为具有特定于另一个标签的内容的标签设置样式？

例如我有这个：

```
<p>paragraph one</p>
<p>paragraph <span>two</span></p>
<p>paragraph three</p> 
```

我只想用红色显示“第二段”，因为这个`<p>`标签包含一个`<span>`标签。

（仅使用 CSS，不要更改 HTML。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:15:15.880

你现在不能使用纯 CSS：它可能是 CSS4 的未来规范（[参考](http://www.red-team-design.com/meet-the-css4-selectors)）。

但是，您可以为此使用[jQuery](http://api.jquery.com/)及其[`:has`选择器](http://api.jquery.com/has-selector/)：

```
$('p:has(span)').addClass('red'); 
```

CSS看起来像：

```
.red{
    color:red;
} 
```

看到这个小[小提琴](http://jsfiddle.net/bigood/uPTP9/)

# javascript - 使用 POST 方法在 ExtJS 中提交表单不起作用

> ID：15528845
> 
> 赞同：1
> 
> 时间：2013-03-20T16:08:22.150
> 
> 标签：javascript, forms, extjs, submit

我的代码如下：

```
 {
            xtype: 'button',
            text: 'myButton',
            handler: function() {
            if (Ext.getCmp('button').getValue().length > 1) {
                var mystring = Ext.getCmp('button').getValue();
                var url = 'myurl.com/test.cgi?search='+ mystring;
                var url_id = '2637;
                window.open(url,url_id);
            } else {
                alert("Lenth too small !");
                }
             },

             } 
```

现在我的代码如下：

```
 {
            xtype: 'button',
            text: 'myButton',
            hander: function()
             {
                this.getForm().standardSubmit=true;
                this.getForm().doAction('standardsubmit',
                {url: 'myurl.com/test.cgi',
                standardSubmit: true,
                method: 'POST'}
                    );
            }

        } 
```

当我的代码与上面一样时，我的代码工作正常，但我对 get 方法有限制，所以当我有长搜索字符串时它会崩溃。现在我有 post 方法，但它什么也没做。如果有人可以帮助我解决问题，或者您可以告诉我任何其他方式使上述代码将表单作为 post 而不是 url search=whatever 那样传递，以便它可以使用尽可能长的字符串。

# php - 调整从链接中提取的照片大小

> ID：15528850
> 
> 赞同：0
> 
> 时间：2013-03-20T16:08:30.357
> 
> 标签：php, image-processing

我正在从包含链接到照片的 URL 的数据库中提取推文。

我已经能够在我的网站上显示这些照片，但它们太大了。

这是代码：

```
foreach ( $entities->media as $media ) {

$tweet_text =str_ireplace($media->url,  '<a href="'.$media->expanded_url.'">'
.$media->display_url.'</a>', $tweet_text);

{
$media_html = '';
$url = $media->media_url_https;
$link = $media->url;
$width = $media->sizes->w;
$height = $media->sizes->h;

  $media_html = "<a href=\"" . $url . "\" target='_blank'>";
  $media_html .=  "<img src=\"" . $url . "\" width=\"" .$width.
     "\" height=\"" .$height. "\" />";
  $media_html .= "</a><br />";          
 $media_html .= $tweet_text;    

    }
return $media_html; 
```

我试过做：

```
$width = $media->sizes->w;
$height = $media->sizes->h;
$width = ($width)/2;
$height = ($height)/2; 
```

但它只是在那之后没有显示。我尝试了很多变化，我唯一能开始工作的就是如果我添加

```
$width = $media->sizes->w+100;
$height = $media->sizes->h+100; 
```

但这只是将 w 和 h 更改为 100，而且如您所知，大多数图片都不是完美的正方形！

大家怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T17:22:47.510

通过添加

```
$RESULT = list($width, $height) = getimagesize($url); 
```

我能够返回值。这是一个数组，所以我不能先除`$width`或`$height`不加它。

```
 {
$media_html = '';
$url = $media->media_url_https;
$link = $media->url;
$width = $media->sizes->w;
$height = $media->sizes->h;

$RESULT = list($width, $height) = getimagesize($url);

$width = ($width)/2;
$height = ($height)/2;

  $media_html = "<a href=\"" . $url . "\" target='_blank'>";
  $media_html .=  "<img src=\"" . $url . "\" width=\"" .$width.
  "\" height=\"" .$height. "\" />";
  $media_html .= "</a><br />";          
  $media_html .= $tweet_text;

    }

return $media_html; 
```

# cruisecontrol.net - Cruise Control .Net 修改仪表板

> ID：15528851
> 
> 赞同：0
> 
> 时间：2013-03-20T16:08:31.027
> 
> 标签：cruisecontrol.net

我想修改 CCNET 仪表板，所以当我输入“ServerReport”时，它会显示项目 buildTime。像 startTime 一样，它也应该显示 buildTime。是否可以像这样修改仪表板？直到现在，我什么都没找到……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:20:33.847

the WebDashboard is using an MVC pattern and templates.

You'll find the templates [here](https://github.com/ccnet/CruiseControl.NET/tree/master/project/WebDashboard/templates).

Make your adjustments there and check if the controller is passing the correct data to its view. The standard action are in the WebDashboard/plugins/ folder.

Finally run the build-all.bat in the project root to create a new deployment.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T16:19:09.347

在您的 WebDashboard\templates 文件夹中查找文件 ProjectParameters.vm，您可以更改以下 html 标记：

```
<input type="hidden" name="ForceBuild" value="Force" /> 
```

从那里将其更改为以下内容：

```
<input type="hidden" name="ForceBuild" value="MyValue" /> 
```

# java - 动态 MethodExpression 没有被调用

> ID：15528857
> 
> 赞同：1
> 
> 时间：2013-03-20T16:08:40.903
> 
> 标签：java, jsf, binding, el

我在我的 xhtml 内的 dataTable 的列中有一个动态创建的 commandButton，并且我为它定义的 methodExpression 没有被调用。以下是详细说明：

我创建这样的按钮：

```
Column column = (Column) createComponent(Column.COMPONENT_TYPE);
UIOutput columnTitle = (UIOutput) createComponent(UIOutput.COMPONENT_TYPE);
columnTitle.setValue("Search");
column.getFacets().put("header", columnTitle);
table.getChildren().add(column);

CommandButton button = (CommandButton) createComponent(CommandButton.COMPONENT_TYPE);
button.setIcon("ui-icon-search");
button.setTitle("Search");
button.setUpdate(":mainForm:viewerPanel, :mainForm:growl");

//Action defined here
MethodExpression action = createMethodExpression("#{viewerMB.searchNode(item.value)}", null, Object.class);
button.setActionExpression(action);

column.getChildren().add(button); 
```

按钮显示，dataTable正常渲染。通过检查组件树，我看到它都在这个结构中定义

```
<h:form id="mainForm">
    <p:dialog>
        <p:panel>
            <p:dataTable>
                <p:column>
                    <p:commandButton/>
                <p:column>
            </p:dataTable>
        </p:panel>
    </p:dialog>
</h:form> 
```

**注意：**这不是我的实际代码，这只是说明我页面内部结构的示例

[我使用此处](https://stackoverflow.com/questions/12098611/dynamic-jsf-2-0-commandbuttons-set-action-with-arguments)找到的以下方法创建我的 MethodExpression ：

```
public static MethodExpression createMethodExpression(String expression, Class<?> returnType,
    Class<?>... parameterTypes){
    FacesContext facesContext = FacesContext.getCurrentInstance();
    return facesContext.getApplication().getExpressionFactory()
        .createMethodExpression(facesContext.getELContext(), expression, returnType, parameterTypes);
} 
```

但是当我单击按钮时，该方法没有被调用，它是在引用的 ManagedBean 中定义的，这里是：

```
public void searchNode(Object object){
    try{
        viewer.push(viewerBO.getViewNode(object));
    } catch (BusinessException e){
        FacesUtil.addErrorMessage(e.getMessage());
    }
} 
```

所以它是一个接收对象作为参数的 void 方法。

现在这是我的疑问：

*   我是否以错误的方式创建 MethodExpression？item.value*无效*吗？*item*是为我的 dataTable 的**var**属性定义的值
*   我在这里错过了一些步骤吗？也许我的树结构有问题
*   关于为什么它可能不会被调用的任何其他想法？

# ruby-on-rails - 轨道和kaminari

> ID：15528861
> 
> 赞同：0
> 
> 时间：2013-03-20T16:08:57.863
> 
> 标签：ruby-on-rails, pagination

我有一个系统，可以在单个请求中生成数千个报告以填充表格，并且我使用 kamanari 对每页 20 条记录进行分页。因为在单个请求中可能会加载数千个报告，所以无论请求格式是 html 还是 json，它们有时都需要几分钟才能加载。我用 kaminari 做了很多尝试。

```
my_controller.rb
def my_table
  reports = unit.reports_for(history_date_range)  #This could return possibly 10,000 reports
  paginated_reports = reports.order('time desc').page(params[:page]).per(20)
  @reports = paginated_reports
  ...
end

my_table.html.haml
- @reports.each do |r|
  ...
= paginate @reports.page(params[:page]).per(20) 
```

上述问题是 kaminari 不会仅将 20 条记录发送回视图。例如，它发送所有 10,000 个。并且只是将它们以 20 个为一组进行分页。即使我单击第二页，它也会再次遍历整个分页路线，并查询 10,000 条记录并在页面上显示 20 条记录。

而不是这样：

```
= paginate @reports.page(params[:page]).per(20) 
```

我也试过这个：

```
= paginate @reports, :total_pages => 2 
```

这仍然需要很长时间，但只显示 2 个总页面，而不是所有页面。

我想要做的如下。假设总共有 100 条记录，这意味着 20 组中有 50 个页面。我只想查询前 20 个，将其发送回视图，然后用这 20 条记录填充视图并有一个小箭头符号指示还有更多。然后，当用户单击该箭头符号时，它只查询下一组 20 条记录，将它们发送回查看，等等。我不想一次查询这么多记录并让整个视图填充它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:33:29.350

下面一行正在加载所有数据：

```
 reports = unit.reports_for(history_date_range) 
```

加载数据后，您正在使用分页，这类似于在`performance`和方面不使用分页`responsiveness`。所以你需要在这个查询上使用分页。如果您可以提供有关您所查询内容的更多详细信息，则将有助于准确回答。

# ios - iOS 以编程方式检查 Mac 上的蓝牙是否已连接

> ID：15528866
> 
> 赞同：0
> 
> 时间：2013-03-20T16:09:01.893
> 
> 标签：ios, bluetooth

我是 iOS 编程的新手，正在从事一个需要检测 iPod touch（或 iPhone 4）是否通过蓝牙连接到配对 Mac 的项目。我不需要连接它。我只需要检查它是否已连接并在断开连接时显示日志。我没有蓝牙 LE。此外，该应用程序不会在 Mac 上运行，因此我无法创建点对点连接。此外，我不能使用蓝牙管理器（或任何私有框架），因为应用程序需要在某个时间点被 Appstore 接受。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T17:18:37.517

我的理解是，只要私有框架不违反 Apple 的任何准则，您就可以在您的应用程序中使用它。只有当它确实违反了指导方针时，你才会被拒绝。这是关于 SO 的另一篇文章的示例，建议使用 BluetoothManager 框架。

[如何以编程方式获取 iphone 中的蓝牙状态（开/关）](https://stackoverflow.com/questions/4955007/how-to-get-the-status-of-bluetooth-on-off-in-iphone-programatically)

**编辑**：这稍微涵盖了私有 API 与私有框架：[以编程方式在 iphone sdk 中打开蓝牙？](https://stackoverflow.com/questions/1743610/programmatically-turn-on-bluetooth-in-the-iphone-sdk)
另一个最近使用蓝牙管理器的例子：[Minimal iOS BluetoothManager Example](https://stackoverflow.com/questions/9779363/minimal-ios-bluetoothmanager-example)

# c# - 选择后被截断的 ListViewItem 文本 - Compact Framework

> ID：15528869
> 
> 赞同：6
> 
> 时间：2013-03-20T16:09:09.323
> 
> 标签：c#, listview, compact-framework, listviewitem

我有`ListView`一些`ListViewItems`（只有文字）。

```
listView1 = new ListView
{
    View = System.Windows.Forms.View.Details,
    HeaderStyle = ColumnHeaderStyle.None
};

listView1.Columns.Add(String.Empty, -2, HorizontalAlignment.Left); 
```

下图是一个示例：

![在此处输入图像描述](../Images/33e218088f0f2bc3ab2371dc80406a8b.png)

问题是，当我选择其中一项时，文本会被截断，如下图所示：

![在此处输入图像描述](../Images/ddf21891915c17eb1d2e172b4f36a809.png)

为什么？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:55:56.840

问题是 ListViewItem 的 Text 以空格结尾。你必须 TrimEnd 字符串，你有你的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:23:07.820

设置可能会有所不同：

```
ColumnHeader header; 
```

然后，把`header.Width`财产换成别的东西，也许把它扔进去

```
SelectionChanged{}(  
    header.Width = listView.SelectedItem(0).Length;
) 
```

试一试。我只是在想，标题/列宽正在使用它的默认值，或者可能由您使用`-2`

此链接可能对 ColumnHeaders 有所帮助：[MSDN ColumnHeaders](http://msdn.microsoft.com/en-us/library/system.windows.forms.columnheader%28v=vs.71%29.aspx)

* * *

编辑：

所以我回顾了一些 CompactFramework 的东西。

[此链接](http://social.msdn.microsoft.com/Forums/en-US/netfx64bit/thread/37eb54c6-4e7c-454a-af66-b5a884c07b68/)似乎与同一问题有关。

尝试将您的 ColumnWidth 属性设置为`-1`

```
listView1.Columns.Add(String.Empty, -1, HorizontalAlignment.Left); 
```

这应该将其设置为列中最宽的值。我确实看到 -2 选项应该可以工作，但请尝试 -1，看看它是否有所作为。

**双重编辑：**

**我们的评论已移至`Chat / Discussion`，尽管我们无法弄清楚是什么原因造成的。如果有人有建议或知道修复方法，请告知我们！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:56:26.250

请改用此列大小逻辑：

```
listView1.Columns[0].Width = listView1.Width; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T15:37:50.230

您应该能够手动更改列的宽度。进入设计器模式并手动更改。拖着就行

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T10:19:33.327

你能检查 Selected item style 吗？. .
选定项 Textwrapping="Wrap" 或增加选定项列宽。我认为只有这两个问题。

# php - Wordpress：在页面模板内的类别下打印子类别帖子，包括（标题、固定链接和摘录）

> ID：15528876
> 
> 赞同：0
> 
> 时间：2013-03-20T16:09:26.110
> 
> 标签：php, wordpress, categories

嗨基本上我有一个页面模板。就像目录一样。我不想要插件，因为我仍然想控制代码。

我只想问这可能吗？

==> 目录页面（在类别六月刊下）

然后打印特定类别下的所有子类别信息。像这种格式：

=> 子类别标题

```
 then Posts Under (this) Subcategory
 -> Post Title including Permalink
 -> Post Excerpt

 -> Post Title including Permalink
 -> Post Excerpt

 -> Post Title including Permalink
 -> Post Excerpt 
```

=> 子类别 2 标题

```
 then Posts Under (this) Subcategory
 -> Post Title including Permalink
 -> Post Excerpt

 -> Post Title including Permalink
 -> Post Excerpt

 -> Post Title including Permalink
 -> Post Excerpt 
```

=> 子类别 3 标题

```
 then Posts Under (this) Subcategory
 -> Post Title including Permalink
 -> Post Excerpt

 -> Post Title including Permalink
 -> Post Excerpt

 -> Post Title including Permalink
 -> Post Excerpt 
```

等等..

我只是想知道 wordpress 是否有这种在特定帖子类别下提取子类别的方法。如何在模板中正确显示它，就像我要为下一个问题创建另一个表格内容一样它将自动打印所有子类别信息。请帮我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:34:10.567

试试这个...未经测试

```
<?php 

        $args = array(
            'type'                     => 'post',
            'child_of'                 => 0,
            'parent'                   => '1', //Only get child categories
            'orderby'                  => 'name',
            'order'                    => 'ASC',
            'hide_empty'               => 1,
            'taxonomy'                 => 'category',
            'pad_counts'               => false 
        );

        $categoryList = get_categories($args);

            if(!empty($categoryList)){

            foreach($categoryList as $category){

                          $postArgs = array(
                    'cat' => $category->id,
                            'post_type' => 'post'   //Use other options as needed
                         );                    

                query_posts($postArgs);

                        while ( have_posts() ) : the_post();
                echo get_the_title();
                echo get_permalink();
                        echo get_the_excerpt();
                endwhile;

             }

             }
    ?> 
```

# c# - 将文件上传到不同的服务器

> ID：15528883
> 
> 赞同：2
> 
> 时间：2013-03-20T16:09:43.263
> 
> 标签：c#, asp.net, file-upload

我的 Web 应用程序在服务器 D 上。所以我创建了一个具有文件上传控件的 Web 应用程序。我可以轻松地将任何文件上传到网络应用程序内的文件夹 (FILES)。

我现在的问题是：如何将相同的文件（从后面的代码）上传到我拥有的不同服务器（SERVER T）上的文件夹（UPLOADS）？我还需要在 SERVER T 上读取、写入和修改该文件。请记住，我使用的是 Web 窗体而不是 Windows 窗体！！！

有人告诉我一些关于在服务器 T 上为服务器 D 上的 Web 应用程序创建一个网络服务帐户以使用并授予该帐户权限或类似的东西，但他也不知道详细信息。

有没有教程，指南，因为我确定有办法做到这一点......</p>

此外，我在 Google 上只能找到使用 ftp 但仅适用于 Windows 窗体...</p>

有点卡在这里......</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:24:28.003

如果您需要读取/写入/更改网络文件夹中的文件，您可以尝试以下操作：

```
Open IIS > Application Pools 
            > Select Application pool of the site
              > Advanced Options
                > Process Model > Select Identity 
```

现在您应该知道应用程序池帐户。最后确保该帐户确实具有`SERVER T\UPLOADS`文件夹所需的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T14:30:36.017

取自[这篇博文](http://growingtech.blogspot.co.uk/2012/06/copy-network-shared-folder-file-using-c.html)

> 我们可以做以下-
> 
> 1.  使用 c# 登录到用户帐户
> 2.  冒充登录用户
> 3.  使用 System.IO.File.Copy 复制文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:22:23.663

一个非常简单的解决方案是简单地将文件 ftp 到新服务器，这是一个示例

[http://www.codeproject.com/Articles/343913/Simple-FTP-library-in-Csharp](http://www.codeproject.com/Articles/343913/Simple-FTP-library-in-Csharp)

或在这里向另一台服务器发送 http 帖子是一个 SO 问题，对此有一个不错的答案

[文件上传到文件流](https://stackoverflow.com/questions/3068303/fileupload-to-filestream)

一旦文件在另一台服务器上，将更新/修改/等工作推送到另一台服务器

# symfony - 树枝和布尔值

> ID：15528888
> 
> 赞同：2
> 
> 时间：2013-03-20T16:10:08.893
> 
> 标签：symfony, if-statement, twig

我有一个像这样的图像类：

```
class Image {
private $color;
private $name;
private $gradient;
private $colorGradient;

function __construct() {
    $this->color = "FFFFFF";
    $this->name = "blanc";
    $this->gradient = false;
    $this->colorGradient = "";
} 
```

在我的控制器中，我有这个：

```
public function indexAction() {
    $image = new Image();

    $form = $this->createFormBuilder($image)
            ->add('color', 'text')
            ->add('name', 'text')
            ->add('gradient', 'checkbox')
            ->add('colorGradient', 'text')
            ->getForm();

    return $this->render('CramifImageBuilderBundle:Builder:index.html.twig', array('form' => $form->createView()));
} 
```

在 index.html.twig 我有这个：

```
<form action="{{ path('cramif_image_builder_image_new') }}" method="post" {{  form_enctype(form) }}>
        {{ form_errors(form) }}

        {{form_row(form.color)}}
        {{form_row(form.name)}}

        <div id="gradient">
            {{form_row(form.gradient)}}
        </div>

        {% if form.gradient == true %}
            <div id="gradient_color">
                {{form_row(form.colorGradient)}}
            </div>
        {% endif %}

        <input id="submit" type='submit' value='Créer' />
    </form> 
```

如果梯度 = true 复选框被选中（好）值 ='1'

```
<input id="form_gradient" type="checkbox" checked="checked" value="1" required="required" name="form[gradient]"> 
```

如果梯度 = false 复选框未选中（好）值 = '1'

```
<input id="form_gradient" type="checkbox" value="1" required="required" name="form[gradient]"> 
```

问题是梯度的值是多少，它就像梯度是真的：所以总是显示颜色梯度场

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:30:11.983

我还没有测试过，但是试试

```
{% if form.gradient.vars.checked %}
    <div id="gradient_color">
        {{ form_row(form.colorGradient) }}
    </div>
{% endif %} 
```

# c# - 在 Google 地图中显示 Shapefile

> ID：15528893
> 
> 赞同：2
> 
> 时间：2013-03-20T16:10:19.443
> 
> 标签：c#, google-maps, asp.net-mvc-4, sharpmap

我正在尝试使用 SharpMap 库在 Google 地图中显示 Shapefile。我正在使用 ASP.NET MVC4。这是我的控制器：

```
public class HomeController : Controller
{
    public ActionResult InitSharpFiles()
    {
        SharpMap.Layers.VectorLayer vlayer = new SharpMap.Layers.VectorLayer("streets");
        vlayer.DataSource = new SharpMap.Data.Providers.ShapeFile("Content/streets.shp", true);

        return View(vlayer);
    }

    public ActionResult Index()
    {

        return View();
    }
} 
```

如果可能的话，我想在谷歌地图中加载这个 Shapefile，但我不知道如何继续，因为关于 Sharpmap 的文档并不多。下一个代码是加载地图的地方：

```
<body onload="getMap()">
<div id="map-canvas" style="width:1200px; height:800px; margin:auto"></div> 
```

我不知道使用创建的 SharpMap 在控制器中做什么以及如何将这些数据传递给视图。如何将 Shapefile 显示到 Google 地图中？

更多信息：
我有一个大约 100MB 的 .SHP 文件和一个大约 200MB 的 .DBF 文件，转换为 KML 大约为 450MB。哪个更容易使用，KML 还是 Shapefile？我希望这些数据显示在 Google 地图中。我尝试使用 FusionTables，但这仅限于 100MB。

# revit - 检查 Revit 是否已准备好关闭

> ID：15528894
> 
> 赞同：1
> 
> 时间：2013-03-20T16:10:23.197
> 
> 标签：revit, revit-api

首先，我为任何拼写错误等道歉。英语不是我的第一语言 :)

我已经为 Revit 编写了一个插件，现在正在为插件进行自动更新。我已经对更新进行了排序，但我偶然发现了一个小问题。

我正在检查 Revit 启动时的更新（当 Revit 创建插件应用程序时）

```
 public Result OnStartup(UIControlledApplication application)
    {
        Result result = CreateApplication(application);
        if (result == Result.Succeeded)
        {
            UpdateService updates = new UpdateService();
            try
            {
                updates.ManageUpdates(application);
            }
            catch (Exception ex)
            {
                NotificationManager.Notify("error", ex.InnerException.Message, messageType.error);
            }
        }
        return result;
    } 
```

如果有可用更新，我会向用户显示一条消息，询问他/她是否想要更新。如果是，我想为他们关闭 Revit 并开始更新。

问题是此时 Revit 还没有完成自身加载，如果我以编程方式关闭它，它会抛出一个错误，因为它还没有准备好再关闭 5 秒。

```
System.Threading.Thread.Sleep(5000); 
```

可以解决我的机器上的问题，但不一定会解决用户的问题，所以我需要一种方法来检查 Revit 是否准备好关闭（处于允许关闭的状态）。

所以问题是：有没有办法检查 Revit 是否可以关闭？有没有人遇到过这样的问题并解决了？

（我知道当用户关闭 Revit 时我可以检查更新，但这并不理想......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T13:05:15.997

您可以尝试订阅该`ApplicationIntitialized`事件 - 我敢打赌，只有在 Revit 完全加载时才会触发。

从文档中：

> 该事件在 Revit 完全初始化启动后引发，包括外部应用程序的初始化。

所以......在你的`OnStartup`方法中，做这样的事情：

```
public Result OnStartup(UIControlledApplication application)
{
    Result result = CreateApplication(application);
    if (result == Result.Succeeded)
    {
        application.Application.ApplicationInitialized += new EventHandler(delegate (Object o, ApplicationInitializedEventArgs a) {
            // this code will be deferred until the application is initialized
            UpdateService updates = new UpdateService();
            try
            {
                updates.ManageUpdates(application);
            }
            catch (Exception ex)
            {
                NotificationManager.Notify("error", ex.InnerException.Message, messageType.error);
            }
        });
    }
    return result;
} 
```

**编辑：**我没有注意到我指的是 Revit 2013 API 参考并且错过了 2012 没有`ApplicationInitialized`事件。在这种情况下，您可以尝试连接其中一个`DocumentOpening`或`Idling`事件，这会让您无法得知应用程序*已*初始化，但遗憾的是，此时用户正准备做某事，这可能会让他发疯。

知道`Idling`事件是否在没有打开文档的情况下触发会很有趣 - 这可能会解决您的问题。你能尝试一下然后报告吗？

# .net - 拦截器不拦截 c#，Castle 动态代理

> ID：15528896
> 
> 赞同：1
> 
> 时间：2013-03-20T16:10:24.693
> 
> 标签：.net, c#-4.0, castle, aop

我正在尝试学习面向方面编程的概念，并且我正在为此使用城堡项目动态代理。请参阅我编写的示例代码。

拦截器似乎没有拦截？或者我没有在我的控制台窗口中看到“调用前的内部拦截器”和“调用后的内部拦截器”。请建议我在这里做错了什么？

```
class AOP 
{
    static void Main(string[] args)
    {
        ProxyGenerator generator = new ProxyGenerator();
        actual logger = generator.CreateClassProxy<actual>(new proxyforactual());
        logger.add(3, 2);
    }
}

public class proxyforactual : IInterceptor
{
    public void Intercept(IInvocation invocation)
    {
        Console.WriteLine("Inside interceptor, before the call");

        invocation.Proceed();

        Console.WriteLine("Inside interceptor, after the call");
    }
}

public class actual
{
    public int add(int x, int y)
    {
        Console.WriteLine("Inside method");

        return x + y;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:18:59.447

我的错，在仔细查看“CreateClassProxy”方法签名后，我注意到代理只会拦截虚拟方法。像下面这样更改了我的代码，现在一切正常。

谢谢大家。

```
public virtual int add(int x, int y)
    {
        Console.WriteLine("Inside method");

        return x + y;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:17:54.500

尝试使用接口并从中派生您的类和代理。

# sql-server - 检查链接的 SQL 服务器是否正在运行

> ID：15528902
> 
> 赞同：6
> 
> 时间：2013-03-20T16:10:40.357
> 
> 标签：sql-server, sql-server-2012

我正在编写一个存储过程，它`SELECT`使用 4 点符号在几个不同的链接服务器上运行查询。

问题是，如果其中一个链接服务器未运行，则查询将失败并出现错误 121 `('The semaphore timeout period has expired')`。然后其他`SELECT`查询不会运行，因为此错误会停止其余查询的执行。

我想检查`@@ERROR`然后继续运行其他查询。

如果与其中一个链接服务器的连接失败，我如何继续运行查询？

我正在使用 SQL 2012。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-20T16:21:19.127

您是否尝试过使用 TRY-CATCH 异常块来包围您的单个调用？

```
 BEGIN TRY
          --First Server Connection (Server1) 192.168.1.x
          --If the connection isn't available it will raise an exception
          exec sp_testlinkedserver  @servername = Server1
          --SQL statement here
     END TRY
     BEGIN CATCH
          SELECT ERROR_MESSAGE()
     END CATCH

     BEGIN TRY
          --Second Server Connection (Server2) 192.168.2.x
          --If the connection isn't available it will raise an exception
          exec sp_testlinkedserver  @servername = Server2
          --SQL statement here
     END TRY
     BEGIN CATCH
          SELECT ERROR_MESSAGE()
     END CATCH 
```

[sp_testlinkedserver](http://msdn.microsoft.com/en-us/library/ms189809.aspx) 将在执行代码之前在 try 块内引发异常，但不会停止存储过程的执行。

# algorithm - 将事件队列用于类似 cron 的目的是不是一个坏主意？

> ID：15528904
> 
> 赞同：0
> 
> 时间：2013-03-20T16:10:43.913
> 
> 标签：algorithm, queue, message-queue

为了提供更多上下文，我有一个有状态的应用程序，其中任务具有以下状态机：

*   各州有服务和无服务
*   开始状态是未服务的。
*   转换表为：
    *   在未服务状态下，在代表用户请求的 HTTP 请求上：转换为已服务并发出响应。
    *   在服务状态下，在代表用户响应的 HTTP 请求上：转换到未服务状态并发出响应。
    *   在服务状态，十分钟超时：转换到未服务状态并且什么都不做。

因此问题是：我如何可靠地实现这个状态机？如果没有超时转换，这可以很容易地实现为带有状态的键值存储，请求处理程序检查存储中的状态以获取响应。

但是，超时转换意味着需要某种队列来处理超时操作。我目前的设计是：一个队列包含由服务线程出列的未服务任务，另一个队列包含由另一个处理程序根据它们设置为过期时间循环通过的服务任务。

因此，我的问题是：除了排队理论问题之外，这种设计是否有任何可怕的事情会出错？有没有比两个队列更好的方法来实现这个状态机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:49:28.710

由于您已经在存储服务/未服务状态，因此我实际上会保留转换的时间戳。然后你可以仅仅**推断**出完整的状态，而不需要所有复杂的（阅读：*可破坏*的）机器。

# ruby-on-rails-3 - 将 Rails 3 应用程序从 Ruby 1.8.7 升级到 1.9.3 停止遵守 database.yml 中的 latin1 编码规范

> ID：15528905
> 
> 赞同：0
> 
> 时间：2013-03-20T16:10:44.507
> 
> 标签：ruby-on-rails-3, character-encoding, ruby-1.9, mysql2, latin1

我正在将 Rails 3.2.13 应用程序从 Ruby 1.8.7-p370 升级到 Ruby 1.9.3-p385。升级后，从数据库中检索到的文本中的特殊字符出现乱码。例如，“café”显示为“café”。我的数据库是 latin1 编码的。我正在使用 mysql2 (0.3.11)，我`database.yml`看起来像这样：

```
development:
  adapter: mysql2
  encoding: latin1
  database: my_db
  username: root
  host: localhost 
```

（同样的问题也发生在具有相同数据库配置的生产环境中。）

看来，当 ActiveRecord 从数据库中检索文本时，它会将其解码为 utf-8，而不是我指定的 latin1（或 ISO-8859-1）。

为了诊断问题，我编写了一个 Ruby 脚本，它使用 mysql2 绕过 ActiveRecord 直接查询数据库：

```
require 'rubygems'
require 'mysql2'

client = Mysql2::Client.new(:host => "localhost",
                            :username => "root",
                            :database => "food52_development_production",
                            :encoding => "latin1")

result = client.query('SELECT title FROM recipes WHERE id = 12934')

puts result.first["title"] 
```

id 为 12934 的食谱的标题中有“咖啡”一词。在 1.9.3 中运行此脚本会输出正确解码的文本（“café”）。如果我将`:encoding`选项更改为`"utf-8"`，我会再次看到乱码文本（“café”）。

我还尝试在 中放置一个断点`ActiveRecord::ConnectionAdapters`，以查看 Rails 是如何初始化的编码配置`Mysql2::Client`。`:encoding => "latin1"`正如预期的那样，它正在通过。

然而：在某个地方，Rails 决定将文本解码为 utf-8。如何让 Rails 尊重我指定的 latin1 编码配置？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T17:07:34.523

从 1.9.3 开始，不推荐使用 iconv。此外，Rails 3 要求所有输入都使用 UTF-8 编码。

话虽如此，你有几个不同的选择。第一个是非常hacky，但如果您不想迁移数据，它会起作用。

iconv 库仍可作为[gem](https://rubygems.org/gems/iconv)使用，您应该能够在应用程序中根据需要手动进行这些转换。

Airbnb 那边的人使用这样的助手：

```
def self.convert_string_encoding(to, from, str)
  if "1.9".respond_to?(:force_encoding)
    str = str.dup if str.frozen?
    str.encode(to, from, :undef => :replace)
  else
    require 'iconv'
    Iconv.conv(to, from, str)
  end
end 
```

来处理转换。您可能会将其放入您的视图的助手中。

[您可以在此处](http://nerds.airbnb.com/upgrading-from-ree-187-to-ruby-193)阅读有关他们迁移的更多信息

问题在于尝试将 rails 的默认 UTF-8 转换回数据库的编码时。

可能更有意义的是在现有数据上迁移到 UTF-8。

[这篇文章似乎很好地涵盖了这一点。](http://climbtothestars.org/archives/2004/07/18/converting-mysql-database-contents-to-utf-8/)

我希望这有帮助！

# three.js - OBJLoader/ThreeJS :Uncaught TypeError: undefined is not a function

> ID：15528907
> 
> 赞同：1
> 
> 时间：2013-03-20T16:10:51.917
> 
> 标签：three.js, webgl

我收到 Three.OBJLoader Uncaught TypeError: undefined is not a function 当我尝试加载自定义 obj 文件时。我检查了[THREE.OBJLoader not working (TypeError)](https://stackoverflow.com/questions/13802699/three-objloader-not-working-typeerror)，我尝试改组 OBJLoader.js 的所有插入，但仍然没有任何效果。

```
<body>
    <script type="text/javascript" src="OBJLoader.js"></script>

    <script src="https://raw.github.com/mrdoob/three.js/master/build/three.js"></script>
    <!-- // <script src="https://raw.github.com/mrdoob/three.js/master/build/three.min.js"></script> -->

    <script>

    function init(){
        var scene = new THREE.Scene();
        var camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);

        var renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        var loader = new THREE.OBJLoader();
            loader.addEventListener( 'load', function ( event ) {

                var object = event.content;

                object.traverse( function ( child ) {

                    if ( child instanceof THREE.Mesh ) {

                        child.material.map = texture;

                    }

                } );

                object.position.y = - 80;
                scene.add( object );

            });
        loader.load('gargoyle/gargoyle.obj'); 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:57:45.667

你的脚本标签需要在，objloader.js 包含应该在主 three.js 文件之后，还要仔细检查 OBJLoader.js 的路径

# sql - Hive 唯一字符串计数

> ID：15528909
> 
> 赞同：0
> 
> 时间：2013-03-20T16:11:03.300
> 
> 标签：sql, hive, hiveql

我在 Hive 表中有一列 stings，我想计算此列中每个字符串的出现次数。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:14:36.547

听起来您需要按列分组，然后计算每个组中的项目数。像这样的东西：

```
SELECT somecolumn, count(1) AS count
FROM sometable
GROUP BY somecolumn 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-26T11:58:38.703

我认为正确的查询：

```
SELECT columnA,columnB,COUNT(distinct column C)
from table_name
group by columnA,columnB 
```

这个对吗？SQL也很好。

# c - 散列 8 字节通常以有效随机顺序升序指向唯一 8 字节整数的指针？

> ID：15528910
> 
> 赞同：0
> 
> 时间：2013-03-20T16:11:03.170
> 
> 标签：c, hash

首先有一点背景知识，我试图将一堆指针存储在数据结构中，并且我想查找值。我不在乎按顺序访问。我想将结构存储在树中以进行查找，但是 malloc 倾向于产生顺序地址，这会导致简单树的病态行为。我知道我可以将指针存储在某种自平衡树中，但我没有库来为我实现它。香草C在这里。所以我想做的是混合我想存储的指针的位，这样我就可以实现一个简单的树并避免病态的情况。

我需要一些能很好地混合这些位的东西，因为最高位可能都是相同的，而最低位通常是页面对齐的，因此最低位通常为空。

有什么好的方案可以在没有大量开销的情况下产生体面的混合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:09:32.293

乘以一个大的奇数值可能就足够了：`(uintptr_t) ptr * 0xcba9876543210fed`. [根据孙子定理](http://en.wikipedia.org/wiki/Chinese_remainder_theorem)，唯一输入值的图像是唯一的。

我邀请其他人评论乘数的选择和替代方案。

# jax-rs - 通过 JAX-RS 连接到 oracle

> ID：15528914
> 
> 赞同：0
> 
> 时间：2013-03-20T16:11:24.400
> 
> 标签：jax-rs

我正在开发一个项目来连接多个通过 REST 服务同时连接的 android 客户端。那么，如何使服务器端组件使用 REST 连接到我的 oracle 数据库？我的意思是我的班级可以直接与数据库通信，还是我需要通过 servlet 或其他方式路由请求？我是 REST 新手，所以不太了解

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T18:17:30.060

如果我正确理解您的架构，流程是

Android 客户端 --> REST 服务 --> 数据库

REST 与数据库访问无关。您可以使用 JDBC 或流行的 ORM 框架（例如 hibernate/toplink）与您的数据库进行通信。REST 是一种 Web 服务设计模型，在您的情况下，它为您的 android 客户端提供服务。

# opencl - OpenCL：如何传递大小大于 max_parameter_size 的参数？

> ID：15528915
> 
> 赞同：0
> 
> 时间：2013-03-20T16:11:24.880
> 
> 标签：opencl, gpgpu, pyopencl

出于对调用 OpenCL 内核时可以传递的最大参数大小的好奇，我发现我可以传递一个大小大于最大大小的数组。这是正在发生的事情：（顺便说一句，我正在使用 pyopencl ）

```
>>> plat = cl.get_platforms()
>>> dev = plat[0].get_devices( cl.device_type.ALL )
>>> dev[0]
<pyopencl.Device 'Juniper' on 'AMD Accelerated Parallel Processing' at 0x58fde60>
>>> dev[0].max_parameter_size
1024 
```

**在谷歌搜索中，我了解到 1024 以字节为单位。**（我忘了它是在哪里声明的，我认为是一个 Nvidia 论坛。）

现在，我运行了这个脚本：

```
import pyopencl as cl
import numpy as np

plat = cl.get_platforms()
dev = plat[0].get_devices( cl.device_type.ALL )
ctx = ctx = cl.Context( [ dev[0] ] )
cq = cl.CommandQueue( ctx )

kernel = """
__kernel void test( __global int* A, __global int* B ){
const int id = get_global_id( 0 );
B[ id ] = A[ id ];
barrier( CLK_GLOBAL_MEM_FENCE );
}
"""

prg = cl.Program( ctx, kernel ).build()

A = np.ones( ( 2**18, ), dtype = np.int32 )
B = np.zeros_like( A )

A_buf = cl.Buffer( ctx, cl.mem_flags.READ_ONLY|cl.mem_flags.COPY_HOST_PTR, hostbuf = A )   
B_buf = cl.Buffer( ctx, cl.mem_flags.WRITE_ONLY, B.nbytes ) 
```

在调用内核之前，我做了以下事情：

```
>>> A.nonzero()[0].shape
(262144,)
>>> B.nonzero()[0].shape
(0,) 
```

然后我调用内核并检查 B 中的非零元素：

```
>>> prg.test( cq, A.shape, A_buf, B_buf ).wait()
>>> cl.enqueue_copy( cq, B, B_buf )
>>> B.nonzero()[0].shape
(262144,) 
```

所以，很明显，我可以发送和读回大小大于`cl.max_parameter_size`. **这怎么可能？**或者**我哪里错了？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T19:06:23.700

CL_DEVICE_MAX_PARAMETER_SIZE 是指传递给**clSetKernelArg**的内核参数的最大大小。[请参阅clGetDeviceInfo](http://www.khronos.org/registry/cl/sdk/1.2/docs/man/xhtml/clGetDeviceInfo.html)中的 CL_DEVICE_MAX_MEM_ALLOC_SIZE 和 CL_DEVICE_GLOBAL_MEM_SIZE 。

# python - 如何有效地扫描二维 numpy 数组？

> ID：15528918
> 
> 赞同：4
> 
> 时间：2013-03-20T16:11:35.090
> 
> 标签：python, opencv, numpy

我需要扫描图像并查看每个像素的 3x3 窗口中的值是否与特定模式匹配。我使用以下代码

```
import numpy as np
import cv2

im = cv2.imread("image.png")
h, w = im.shape[:2]

for i in range(1, h-1):
    for j in range(1, w-1):
        p2 = im[i-1, j]
        p3 = im[i-1, j+1]
        p4 = im[i, j+1]
        p5 = im[i+1, j+1]
        p6 = im[i+1, j]
        p7 = im[i+1, j-1]
        p8 = im[i, j-1]
        p9 = im[i-1, j-1]
        # code for checking the pattern looks something like this:
        if (p2 + p3 + p9) == 1 and p4 == 0 and p5 == 1:
            val = True 
```

但是上面的代码需要很长时间才能完成。我是 Python 和 numpy 的新手，如何有效地扫描 2d numpy 数组？

实际上，我正在尝试将这种[细化代码](http://opencv-code.com/quick-tips/implementation-of-thinning-algorithm-in-opencv/)从 C++ 移植到 Python。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T06:41:23.780

我最终使用[scipy.weave](http://docs.scipy.org/doc/scipy/reference/tutorial/weave.html)编写了用于迭代 Numpy 数组的内联 C++ 代码。它使代码运行得非常快。以前幼稚的方法需要 134 秒才能完成 300x150 图像的处理。而这种方法只需要 75ms。

如果您有兴趣，这里是 Python 中完整的细化代码：

```
# Code for thinning a binary image using Zhang-Suen algorithm
from scipy import weave
import numpy as np
import cv2
import sys

def _thinningIteration(im, iter):
    I, M = im, np.zeros(im.shape, np.uint8)
    expr = """
    for (int i = 1; i < NI[0]-1; i++) {
        for (int j = 1; j < NI[1]-1; j++) {
            int p2 = I2(i-1, j);
            int p3 = I2(i-1, j+1);
            int p4 = I2(i, j+1);
            int p5 = I2(i+1, j+1);
            int p6 = I2(i+1, j);
            int p7 = I2(i+1, j-1);
            int p8 = I2(i, j-1);
            int p9 = I2(i-1, j-1);

            int A  = (p2 == 0 && p3 == 1) + (p3 == 0 && p4 == 1) +
                     (p4 == 0 && p5 == 1) + (p5 == 0 && p6 == 1) +
                     (p6 == 0 && p7 == 1) + (p7 == 0 && p8 == 1) +
                     (p8 == 0 && p9 == 1) + (p9 == 0 && p2 == 1);
            int B  = p2 + p3 + p4 + p5 + p6 + p7 + p8 + p9;
            int m1 = iter == 0 ? (p2 * p4 * p6) : (p2 * p4 * p8);
            int m2 = iter == 0 ? (p4 * p6 * p8) : (p2 * p6 * p8);

            if (A == 1 && B >= 2 && B <= 6 && m1 == 0 && m2 == 0) {
                M2(i,j) = 1;
            }
        }
    } 
    """
    weave.inline(expr, ["I", "iter", "M"])
    return (I & ~M)

def thinning(src):
    dst = src.copy() / 255
    prev = np.zeros(src.shape[:2], np.uint8)
    diff = None

    while True:
        dst = _thinningIteration(dst, 0)
        dst = _thinningIteration(dst, 1)
        diff = np.absolute(dst - prev)
        prev = dst.copy()
        if np.sum(diff) == 0:
            break

    return dst * 255

if __name__ == "__main__":
    src = cv2.imread("image.png")
    if src == None:
        sys.exit()
    bw = cv2.cvtColor(src, cv2.cv.CV_BGR2GRAY)
    _, bw2 = cv2.threshold(bw, 10, 255, cv2.THRESH_BINARY)
    bw2 = thinning(bw2)
    cv2.imshow("src", bw)
    cv2.imshow("thinning", bw2)
    cv2.waitKey() 
```

样本源图像和细化结果：

![在此处输入图像描述](../Images/a884e1ce597ebe6a147d24da9fda3c00.png) ![在此处输入图像描述](../Images/5ee6aad90304d7c019c7c8e644d8e106.png)

一个有用的教程：[Python Numpy 性能](http://www.bytefish.de/wiki/python/numpy/performance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:38:45.273

你可以用三个卷积来做到这一点。创建三个模板/掩码数组

```
1/3 0 0
1/3 0 0
1/3 0 0

0 0 0
0 0 1
0 0 0

0 0 0
0 0 0
0 0 1 
```

对每个数组执行卷积。然后您的结果将由以下方式给出：

```
output = (convolved_with_first == 1) & (convolved_with_second == 0) & ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:26:47.180

**编辑**鉴于您的实际模式搜索，我会选择以下内容：

```
from numpy.lib.stride_tricks import as strided
win_img = as_strided(im, shape=(h, w - 3 + 1, 3),
                     strides=im.strides + im.strides[-1:])
cond_1 = np.sum(win_img, axis=-1) == 1
cond_2 = im == 0
cond_3 = im == 1

cond = cond_1[:-2, :] & cond_2[1:-1, 2:] & cond_3[2:, 2:] 
```

现在`cond[i, j]`具有以 为中心的窗口的布尔值`im[i+1, j+1]`，并且在每个方向上比原始图像短两个项目。您可以获得整个图像的布尔数组：

```
cond_im = np.zeros_like(im, dtype=bool)
cond_im[1:-1, 1:-1] = cond 
```

* * *

以窗口视图查看您的阵列：

```
from numpy.lib.stride_tricks import as strided
win_img = as_strided(im, shape=(h - 3 + 1, w - 3+ 1 , 3, 3),
                     strides=im.strides * 2) 
```

现在`win_img[i, j]`是一个`(3, 3)`数组，其中包含`3x3`图像窗口的内容，左上角位于`i, j`.

`pattern`如果您所追求的模式是一个shape数组`(3, 3)`，您可以简单地执行以下操作：

```
np.where(np.all(np.all(win_img == pattern, axis=-1), axis=-1)) 
```

获取两个数组的元组，其中包含与您的模式匹配的窗口左上角的行和列。

您在这里唯一的问题是，当您这样做时`win_img == pattern`，会创建一个 9 倍于图像大小的数组，如果您的图像非常大，这可能会很麻烦。如果您有记忆问题，请将模式检查分成几个波段并循环遍历它们。超过 10 个波段的 for 循环仍然比当前在图像的整个宽度和高度上的两个嵌套循环快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-20T17:47:05.533

您可以尝试以下方法，其中：

1.  直接从图像中读取测试值，而不是创建临时变量；
2.  首先执行成本较低的测试，因为布尔测试是短路的。

.

```
result_array = numpy.zeros((h-2, w-2)).astype(bool)

for i in xrange(1, h-1):
    for j in xrange(1, w-1):
        if (im[i, j+1] == 0 and
            im[i+1, j+1] == 1 and
            im[i-1,j] + im[i-1,j+1] + im[i-1, j-1]):
                result_array[i,j] = True 
```

# java - Java - 反向词序，矢量

> ID：15528924
> 
> 赞同：0
> 
> 时间：2013-03-20T16:11:51.247
> 
> 标签：java, vector

因此，问题是颠倒用户要输入的句子中的单词顺序。我遇到了很多单词被硬编码的例子，我可以扭转这些没有问题。但是当我尝试为扫描仪输入调整代码时，我什至无法获得打印输入的向量，更不用说反转它了。什么也没有发生。这是代码。如果有人可以帮助我，那就太好了！

```
public static void main(String[] args) {
      Scanner s = null;
      Vector v = new Vector();
      String words;

      System.out.println("Enter a sentence: ");
      try {
          s = new Scanner(System.in);
            while (s.hasNext()) {
                words = s.next();
                v.add(words);
            }
        } 
        finally {
               if (s != null) {
                   s.close(); // Close scanner when no more input is available
                }
      }  
      System.out.println(v);
  } 
```

PS：我什至无法让矢量显示它的输入，更不用说反转它了..所以我仍然被困在那里。和。它必须是向量，因为这就是任务想要的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:18:26.757

这是您的代码，稍作修改。它使用 v.add(0, words) 将读取的最后一个单词插入到第一个位置。我也改成`Vector`了`Vector<String>`。在 unix 中使用 Ctrl+D 退出。

```
public static void main(String[] args) {
      Scanner s = null;
      Vector<String> v = new Vector<String>();
      String words;

      System.out.println("Enter a sentence: ");
      try {
          s = new Scanner(System.in);
            while (s.hasNext()) {
                words = s.next();
                v.add(0, words);
            }
        } 
        finally {
               if (s != null) {
                   s.close(); // Close scanner when no more input is available
                }
      }  
      System.out.println(v);
  } 
```

例子：

```
Enter a sentence: 
aa bb cc
[cc, bb, aa] 
```

（Ctrl+D 终止。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:18:30.960

我已经测试了您的代码，它工作正常（显然，它不会反转向量）。

问题是您需要在完成输入句子时告诉它。

在 Unix 上，这是通过在输入末尾按`Ctrl`+来完成的。`D`在 Windows 上，按`Ctrl`+ ，`Z`然后按`Enter`。

如果你不这样做，代码就会无限期地坐在那里等待更多的输入。

# html - 防止固定侧边栏中的粘性页脚重叠

> ID：15528925
> 
> 赞同：0
> 
> 时间：2013-03-20T16:11:53.293
> 
> 标签：html, css, media-queries

*我们的网站有一个包含*粘性页脚的固定侧边栏。当在浏览器高度大于侧边栏内容高度的显示器上查看时，这工作正常，但在较小的显示器上，页脚被“切断”。

为了解决这个问题，我添加了一个媒体查询，它会将页脚更改为相对位于侧边栏内并设置`overflow: auto`在侧边栏上：

```
/* sidebar padding + menu height + footer height */
@media screen and (max-height: 580px) {
    .sidebar .footer {
        position: relative;
    }
} 
```

虽然这至少允许在较小的显示器上查看完整的侧边栏内容，但这也意味着我们最终会**在侧边栏**上看到一个看起来不太好的滚动条。

我想要发生的是，如果浏览器视口小于侧边栏内容的高度，您应该能够使用**普通页面滚动条滚动**查看所有内容。

我想这可以通过媒体查询来更改`position`侧边栏的，但我似乎无法弄清楚。

*   摆弄完整代码：http: [//jsfiddle.net/benfosterdev/pRBgT/](http://jsfiddle.net/benfosterdev/pRBgT/)
*   演示问题的全屏结果：http: [//fiddle.jshell.net/benfosterdev/pRBgT/show/light/](http://fiddle.jshell.net/benfosterdev/pRBgT/show/light/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T17:09:46.443

现在明白了。在评论之前看过小提琴，但还是不太明白:)

我认为这就是您在媒体查询中寻找的内容：

```
/* sidebar padding + menu height + footer height */
@media screen and (max-height: 580px) {
    .sidebar .footer {
        position: relative;
    }
    .sidebar{position: static; overflow:visible; float:left;}
} 
```

关键是 .sidebar 上的样式

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-20T19:08:07.630

我不确定这是否可以通过纯 CSS 实现，因为您所描述的是一个媒体查询，它指定“如果视口低于 580 像素高度，则将侧边栏位置固定到一定的滚动距离，然后静态定位” . 滚动是超出媒体查询范围的属性。

建立在 Brad 的回答之上 - 这是使用 jQuery 的快速方法

[jsFiddle 示例](http://jsfiddle.net/opherv/nR6Fy/)

```
$(document).scroll(function(){    
    if ($(window).height()<=580){
        var sidebarObj=$(".sidebar");
        var extraSidebar=sidebarObj.height()-$(window).height();        
        if ($(document).scrollTop()>extraSidebar){            
            if (sidebarObj.css("position")!="fixed"){
                sidebarObj.css({
                    "position": "fixed",
                    "top": -extraSidebar+"px"
                });
            }
        }
        else{
            sidebarObj.css({
                "position": "static",
                "top": 0+"px"
            });
        }
    }
}); 
```

# jquery - 根据 jquery 中的数学结果使 div 淡出

> ID：15528931
> 
> 赞同：1
> 
> 时间：2013-03-20T16:12:10.377
> 
> 标签：jquery, html

我要做的就是根据我编写的计数脚本的结果使 div 淡出。一切正常，但唯一不能正常工作的是当值返回到名为计数器的 div 时 div 淡出。这是一个 jsfiddle - [http://jsfiddle.net/andyjh07/fBqRK/，javascript](http://jsfiddle.net/andyjh07/fBqRK/)代码如下：

jQuery -

```
$('#trigger').on('click', function(){

   // Count all of the checked boxes and then output the result
   var count = $("[type='checkbox']:checked").length;
   var fadespeed = 500;
   $('#counter').text(count).fadeIn(fadespeed);

   // Now, depending on the results, display some stuff
    var message = $('#message');
    if(count >= 8){
        message.fadeIn(fadespeed).text('You have done really well');
    } else if (count >= 4) {
        message.fadeIn(fadespeed).text('You are sort of okay');
    } else {
        message.fadeIn(fadespeed).text('You are terrible, sorry.')   
    }
});

if($('#counter').text() == 2){
    $('#buttons').fadeOut(500);
} 
```

HTML -

```
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>
<input type="checkbox" value="Yes"/>

<div id="trigger">Click to count 'em</div>
<div id="counter"></div>
<div id="message"></div>
<div id="buttons">Buttons</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:15:32.303

目前，您`if statement`将在页面加载时运行，以及当 JS 文件打开并执行时。您需要将 if 块移动到 click 事件中，即：

```
 $('#trigger').on('click', function(){

      // Count all of the checked boxes and then output the result
      var count = $("[type='checkbox']:checked").length;
      var fadespeed = 500;
      $('#counter').text(count).fadeIn(fadespeed);

      // Now, depending on the results, display some stuff
       var message = $('#message');
       if(count >= 8){
         message.fadeIn(fadespeed).text('You have done really well');
     } else if (count >= 4) {
         message.fadeIn(fadespeed).text('You are sort of okay');
     } else {
         message.fadeIn(fadespeed).text('You are terrible, sorry.')   
     }

      if($('#counter').text() == 2){
          $('#buttons').fadeOut(500);
      }
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:14:40.187

将您的`if`语句放在点击处理程序中并使用`count`而不是`$('#counter').text()`.
[jsFiddle](http://jsfiddle.net/fBqRK/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:21:36.580

这里：

```
$('#trigger').on('click', function(){

   // Count all of the checked boxes and then output the result
   var count = $("[type='checkbox']:checked").length;
   var fadespeed = 500;
   $('#counter').text(count).fadeIn(fadespeed);

   // Now, depending on the results, display some stuff
    var message = $('#message');
    if(count >= 8){
        message.fadeIn(fadespeed).text('You have done really well');
    } else if (count >= 4) {
        message.fadeIn(fadespeed).text('You are sort of okay');
    } else {
        message.fadeIn(fadespeed).text('You are terrible, sorry.')   
    }

    if(count == 2){
        $('#buttons').fadeOut(500);
    }

}); 
```

在小提琴中尝试过..就像一个魅力..

# yui - YUI 数据表 PKG.dataTable.render(); 类型错误：对象# has no method 'getId' Hi i am using YUI data table initially i am loading table with no records(empty), i am taking the input from user and making an AJAX call which is returning J 问问题 问问题 2013-03-20T16:12:11.620 148 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Hi i am using YUI data table initially i am loading table with no records(empty), i am taking the input from user and making an AJAX call which is returning JSon object, when i try to PKG.dataTable.showTableMessage("Loading..."); var recorSet= PKG.dataTable.getRecordSet(); var records=recorSet.getRecords(); records.push(data); recorSet.setRecord(records); PKG.dataTable.render(); when i try to add rows i am getting following exception PKG.dataTable.render(); TypeError: Object # has no method 'getId' please help me out thank you in advance That commented out block can be made to work, with some tweaking. A problem arises because of the nature of your data, and the fact that the tutorial didn't take into account the way that object comparisons work. (Refer to JavaScript Date Object Comparison.) Your first column consists of Date objects, which the == comparator will evaluate true only when both sides of the comparison are the same object. In the whole-row comparison, the dates are being coerced to strings by the .join() operation. We can get the same effect on a cell-by-cell basis, like this: if(row[0].toString() == newData[j][0].toString() && row[1] == newData[j][1]){ duplicate = true; } Alternatively, we can restrict the comparison to the first two columns by using the Array.slice() operation. This way, we don't need to know what types are being compared, because we'll still use .join() to form a string for the comparison: if(row.slice(0,2).join() == newData[j].slice(0,2).join()){ duplicate = true; } Sorting Another issue you'll run into is your placement of range.sort(). It's dangerous to sort before removing duplicates, because you can't guarantee the order of newly-retrieved event data vs data for the same event that you already had which may have additional columns of information. As a result, the duplicate removal could erase your user-entered info. It's safer to leave sorting to be a final step, or include additional columns in the sort to guarantee order. Another little issue: The use of .getRange("A3:F2000") has a side-effect of expanding your spreadsheet to 2000 lines; you could instead use .getRange("A3:F"), which will retrieve the maximum range without expanding it. But I suggest you do the sorting entirely with javascript arrays, which will be much faster than using spreadsheet services. I'm assuming you have two lines of header information that you want to retain at the top of the sheet, since you were sorting from A3\. Here's a way to do the sort: // sort ascending by date - retain header lines var headers = newData.slice(0,2); var sorted = newData.slice(2).sort(sortFunction); var newData = headers.concat(sorted); Where sortFunction() is: function sortFunction( a, b ) { // coerce dates to numbers and return comparison return ((+a[0]) - (+b[0])) } Final Script Here's what you get, with the above changes. function importEvents(){ var calID = Browser.inputBox("Please enter your google Cal ID", Browser.Buttons.OK_CANCEL); var startdate = Browser.inputBox("Start date using 1/1/2013 format", Browser.Buttons.OK_CANCEL); var cal = CalendarApp.getCalendarById(calID); var events_sheet = SpreadsheetApp.getActiveSheet(); var events = cal.getEvents(new Date(startdate), new Date("1/1/2014")); var lr = events_sheet.getLastRow(); var eventarray = new Array(); var i = 0; // edited for (i = 0; i < events.length; i++) { line = new Array(); line.push(events[i].getStartTime()); line.push(events[i].getTitle()); //Potential more data that I am not getting at this time // line.push(events[i].getDescription()); // line.push(events[i].getEndTime()); eventarray.push(line); } // Append the retreived events to existing spreadsheet events_sheet.getRange("A"+(lr+1)+":B"+(lr+i)).setValues(eventarray); //remove duplicate rows var sheet = SpreadsheetApp.getActiveSheet(); var data = sheet.getDataRange().getValues(); var newData = new Array(); for(i in data){ var row = data[i]; var duplicate = false; for(j in newData){ if(row.slice(0,2).join() == newData[j].slice(0,2).join()){ duplicate = true; } } if(!duplicate){ newData.push(row); } } // sortFunction used to compare rows of data in our newData array function sortFunction( a, b ) { // coerce dates to numbers and return comparison return ((+a[0]) - (+b[0])) } // sort ascending by date - retain header lines var headers = newData.slice(0,2); var sorted = newData.slice(2).sort(sortFunction); var newData = headers.concat(sorted); // Clear the existing info and update with newData. sheet.clearContents(); sheet.getRange(1, 1, newData.length, newData[0].length).setValues(newData); } yui 4 0 回答 0 Related 2 windows-8 - 我从哪里开始使用 XAML？ 1 ruby-on-rails - 如何在 Rails 中将分页 XML（plist）数据插入数据库？ 6 php - 通过 JSON 将数组从 jQuery 传递到 PHP 1 php - 如何获得 PHP 生成的 javascript 文件的 304 响应？ 1 android - 是否有一些免费服务来存储地理 POI 和 REST 检索 2 javascript - Javascript 返回 NaN 1 asp.net-mvc - 如何从 WebAPIContrib 实现 RazorViewEngine？ 0 android - 了解 xmlns:android = URL 吗？（基于旧的 SO 帖子） 0 ruby-on-rails-3 - rails 3回形针水印 1 actionscript-3 - Flex 移动访问 android 库？ Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15528932
> 
> 赞同：1
> 
> 时间：
> 
> 标签：yui

Hi i am using YUI data table

initially i am loading table with no records(empty), i am taking the input from user and making an AJAX call which is returning JSon object, when i try to

```
PKG.dataTable.showTableMessage("Loading...");
        var recorSet= PKG.dataTable.getRecordSet();
        var records=recorSet.getRecords();
        records.push(data);
        recorSet.setRecord(records);
                   PKG.dataTable.render(); 
```

when i try to add rows i am getting following exception

```
 PKG.dataTable.render();
   TypeError: Object #<Object> has no method 'getId' 
```

please help me out thank you in advance

# oracle - 每分钟刷新一次物化视图

> ID：15528934
> 
> 赞同：1
> 
> 时间：2013-03-20T16:12:23.683
> 
> 标签：oracle, oracle8i

我正在用下一句创建一个 mv：

```
create materialized view Vinculaciones_Activas_dos
REFRESH COMPLETE
START WITH (SYSDATE) NEXT (SYSDATE + (1/1440)) WITH ROWID 
as
  select bla,bla,bal
  from bla 
```

但我有一个问题，它只执行一次，我等了一分钟，它没有刷新任何东西。

# c# - 格式化 DisplayFor

> ID：15528935
> 
> 赞同：1
> 
> 时间：2013-03-20T16:12:26.160
> 
> 标签：c#, asp.net-mvc-3, razor

我有一个作为模型的一部分返回的列表。我希望列表中的每个项目都出现在自己的行上。我有两种方法，这两种方法都不能胜任。

一种方法是使用 foreach()，这将允许我在每个项目中使用中断或其他任何内容。但要做到这一点，我必须使模型 IEnumerable （或者至少我*认为*这是我必须做的），我不想这样做。

但是，如果我将其设为常规模型，则 foreach() 将不起作用。谁能指导我解决问题？

这就是我所说的“常规模型”的意思（我太菜鸟了，不知道正确的术语）

```
@model AcademicAdvising.Models.AppointmentModel 
```

这是模型本身的列表

```
public List<string> ReferralTypeNames { get; set; } 
```

这是当前视图中的线：

```
<p>@Html.DisplayFor(model => model.ReferralTypeNames)</p> 
```

这有效，但项目之间没有换行符。

更新 这是我想要的样本：
学术部门
学术增强-辅导
招生
另一个学术顾问

这是我得到的一个样本： Academic DepartmentAcademic Enhancement-TutorialAdmissionsAnother Academic Advisor

以下是表单其余部分的代码：

```
<table class="table-appt">
    <tr>
        <th>Student ID</th>
        <td>@ViewBag.CurrentStudentId</td>
    </tr>
    <tr>
        <th>Username</th>
        <td>@ViewBag.CurrentStudentUsername</td>
    </tr>
    <tr>
        <th>Name</th>
        <td>@ViewBag.LName</td>
    </tr>
    <tr>
        <th>Assigned Advisor</th>
        <td>@Html.DisplayFor(model => model.AdvisorName)</td>
    </tr>
    <tr>
        <th>Declared Major</th>
        <td>@Html.DisplayFor(model => model.Major)</td>
    </tr>
</table>

<fieldset>
    <legend></legend>

    <div class="field">
        <h4>View a Different Advising Session</h4>
        <div>
            @Html.DisplayFor(model => model.AppointmentDates)
        </div>
    </div>

    <div class="field">
        <h3>Advisor</h3>
        (person conducting appointment)<br />
        <div>(name) @Html.DisplayFor(model => model.AdvisorId)</div>
    </div>

    <div class="field">
        <h3>Contact/Appointment Type</h3>
        <div>@Html.DisplayFor(model => model.ContactTypeName)</div>
    </div>

    <div class="field">
        <h3>Appointment Notes</h3>
        <div class="display-field">
            @Html.DisplayFor(model => model.Notes)
        </div>
    </div>

    <div class="field">
        <h3>Advising Topics</h3>
        <div>@Html.DisplayFor(model => model.AdvisingTopicNames)</div>
    </div>

    <div class="field">
        <h3>Referral Topics</h3>
        @Html.DisplayFor(model => model.ReferralTypeNames)<br />
    </div>

</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:19:18.363

尝试

```
@foreach (string s in Model.ReferralTypeNames)
{
    @Html.DisplayFor(m => s)<br />
} 
```

# windows-phone-7 - Windows 手机操作系统 7.0 与操作系统 7.1

> ID：15528936
> 
> 赞同：6
> 
> 时间：2013-03-20T16:12:27.593
> 
> 标签：windows-phone-7, operating-system, push-notification, mpns

我正在 Visual Studio 上创建一个新的 WP7 应用程序，它要求我做的第一件事是针对 WP OS 版本。

我有 2 个选项，7.0 和 7.1。

我正在尝试制作一个简单的应用程序，实现推送通知。我在 microsoft 的教程中看到了适用于 OS 8.0 和 7.1 的教程。这意味着什么？如果我选择 7.1，它不会在 OS 7.0 中运行吗？

如果我为 7.0 开发它，它会工作吗？如果是，它会在 7.1 上运行吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T16:19:48.310

7.0 是第一个没有更新的 Windows Phone 7 版本。7.1 是 Windows Phone 7.5 的内部版本号（代号是 Mango）。

所有运行 Windows Phone 7 的新手机都是 7.5。大多数手机都有可从 7.0 更新到 7.5 的更新。

考虑到纯 7.0 的手机很少，我会编译你的应用程序为 7.1 内部版本，即 7.5 外部版本。

此外，我也不确定 Windows Phone 商店是否也接受纯 7.0 应用程序。

# ruby - Ruby DataMapper：模型关联审查，最终确定后的模型更新，以及关联稍微自治的记录

> ID：15528938
> 
> 赞同：1
> 
> 时间：2013-03-20T16:12:32.340
> 
> 标签：ruby, sinatra, model-associations, ruby-datamapper

我是 Ruby 的新手，甚至是 DataMapper 的新手，或者任何 ORM 的新手。我来自 Perl 背景，并不是真正的 OOP 类型的开发人员。所以我在这里徘徊在未知的领域。为这个冗长的问题道歉......

在这个项目中，我有设备类和设备的概念，它们将映射到设备类下。设备类需要能够有子设备类。通用的根设备类名称（换句话说，所有设备类来自的根）称为“FOO”或“BAR”（在此示例代码中），每个设备类都可以具有任意一组子设备类。最后，设备类最终包含设备。

所以： Deviceclasses 有很多 deviceclasses Deviceclasses 有很多设备 一个 deviceclass 有一个 deviceclass_name 许多设备属于一个 deviceclass

所以，即：

```
FOO
    JOHNSHOUSE
         UPSTAIRS
             device1
             device2
         DOWNSTAIRS
             device1
             device2
    MANYHOUSES
        JOE
            GARAGE
                device1
                device2
        SUZY
            BEDROOM
                device1
                device2
                device3
        TIM
            LIVINGROOM
                device1
    ARBITRARY
        device1
        SOMEPLACE
            device1
            device2
BAR
    ENGLAND
        LONDON
            MYHOUSE
                BEDROOM
                    device1
                    device2
                    device3 
```

这就是我卡住的地方......设备和设备类*必须*能够自动添加到数据库中，并且稍后将执行它们的关联。所以，我做不到

```
deviceclass = MyDB::Deviceclass.new
device      = MyDB::Device
deviceclass.device.new(blah) 
```

我的模块，其中包含我基于这组问题的相关模型......

问题 1 - 我这样做对吗？注意 Deviceclass 下的 self.validate_root_deviceclasses 方法。我必须先`n`在数据库中拥有根设备类，所以这个方法会创建它们。不幸的是，属性更新不起作用。我会喜欢这方面的一些方向。

```
module DeviceDB
    ROOT_DEVICECLASSES %w{FOO BAR}

    class Deviceclass
        include DataMapper::Resource
        property :id, Serial
        property :hw_id, String,                :unique  => true
        property :root_deviceclass, Boolean,    :default => false
        property :parent_deviceclass_id, Integer
        property :deviceclass_name, String
        property :updated_at, DateTime
        property :created_at, DateTime

        has n, :devices,       :through => Resource
        has n, :deviceclasses, :through => Resource
        has 1, :deviceclass, self, {:through=>:deviceclasses, :via=>:parent_deviceclass_id}

        def self.validate_root_deviceclasses
            root_deviceclasses = all(:root_deviceclass => true)

            if root_deviceclasses.count > 0 
# get whats in the db now
                db      = Array.new(root_deviceclasses.map(&:deviceclass_name))
# match it against the global list (top of this file)
                missing = ROOT_DEVICECLASSES.map{|root| root unless db.grep(/#{root}/i)[0]}.compact

# if something's missing, add it.
                missing.each do |missing|
                    begin
                        create(:deviceclass_name => missing, :root_deviceclass => true).save
                    rescue DataMapper::SaveFailureError => e
                        @error = [e.resource.errors.map{|err| err}].join(', ')
                        return(false)
                    end 
                end 
            else
                begin
                    ROOT_DEVICECLASSES.each do |root|
                        create(:deviceclass_name => root, :root_deviceclass => true).save
                    end 
                rescue DataMapper::SaveFailureError => e
                    @error = [e.resource.errors.map{|err| err}].join(', ')
                    return(false)
                end 
            end 

            begin
                default = first(:deviceclass_name => 'PTS').id

                property :parent_deviceclass_id, Integer, :default => default # fail
                DataMapper.finalize                                           # fail
                return(self)
            rescue DataMapper::SaveFailureError => e
                @error = [e.resource.errors.map{|err| err}].join(', ')
            end

            return(true)
        end
    end

    class Device
        include DataMapper::Resource
        property :id, Serial
        property :deviceclass_id, Integer
        property :device_id, String, :unique => true
        property :devicename, String
        ... more properties...
        property :updated_at, DateTime
        property :created_at, DateTime

        belongs_to :deviceclass, :required => false
    end

    DataMapper.finalize
    DataMapper.auto_upgrade!

    Deviceclass.validate_root_deviceclasses
end 
```

问题2：是否有一些神奇的方法来关联设备类和设备，或者我需要通过获取设备的 id 并通过更新将其关联到关联的设备类来以艰难的方式来做到这一点？

问题3：有没有一种方法可以在迁移表后向模型添加一个属性，这可以通过添加 :default 来有效地更改表（参见上面的失败案例）。如果没有，有什么方法可以在创建模型期间获得我的默认值。我想到了 Lambda，但这只有在表已经存在并且 ROOT_DEVICENAMES 已经添加时才有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:19:50.240

对于关于模式和自主添加项目的第一个问题，您可能会考虑使用它来`dm-is-tree`为您`Deviceclass`做很多工作。以下是创建项目并“稍后”添加关联项目的示例。

```
require 'rubygems'
require 'data_mapper'
require 'dm-is-tree'

# setup
DataMapper::Logger.new($stdout, :debug)
DataMapper.setup(:default, 'sqlite::memory:')

# models
class Deviceclass
  include DataMapper::Resource

  property :id,          Serial
  property :hw_id,       String,   :unique  => true
  property :name,        String
  property :updated_at,  DateTime
  property :created_at,  DateTime

  is :tree, :order => :name
  has n, :devices
end

class Device
  include DataMapper::Resource

  property :id,               Serial
  property :device_class_id,  Integer
  property :name,             String
  property :updated_at,       DateTime
  property :created_at,       DateTime

  belongs_to :deviceclass, :required => false
end

# go!
DataMapper.finalize
DataMapper.auto_upgrade!

# make the root deviceclass
parent = Deviceclass.create(:name => "Root")

# later on make a child
child = Deviceclass.create(:name => "Child")
# and add it to the parent
parent.children << child

# again later, create some devices
d1 = Device.create(:name => "D1")
d2 = Device.create(:name => "D2")

# add them
parent.devices << d1
child.devices << d2

# get stuffs
puts parent.children
puts child.root
puts parent.devices
puts child.devices 
```

我不确定使用验证来生成丢失的设备类是个好主意。如果初始数据不是不断变化，我会在启动时运行种子脚本。您可以使用[dm-sweatshop](https://github.com/datamapper/dm-sweatshop)之类的东西来播种数据库。

我想我需要更多关于#3 的详细信息，您是否想要一个 Deviceclass 的默认名称（您可以添加`:default => 'foo'`），您可能知道您`:default`已经在使用它了！:)

# python - 限时输入？

> ID：15528939
> 
> 赞同：36
> 
> 时间：2013-03-20T16:12:40.000
> 
> 标签：python, input, timer, python-3.x, python-multithreading

我想做的是使用输入向用户提问。例如：

```
print('some scenario')
prompt = input("You have 10 seconds to choose the correct answer...\n") 
```

然后如果时间过去打印类似

```
print('Sorry, times up.') 
```

任何为我指明正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-20T19:55:15.743

如果在用户没有提供答案时阻塞主线程是可以接受的：

```
from threading import Timer

timeout = 10
t = Timer(timeout, print, ['Sorry, times up'])
t.start()
prompt = "You have %d seconds to choose the correct answer...\n" % timeout
answer = input(prompt)
t.cancel() 
```

否则，您可以在 Windows（未测试）上使用[@Alex Martelli 的答案（针对 Python 3 修改）：](https://stackoverflow.com/a/2933423/4279)

```
import msvcrt
import time

class TimeoutExpired(Exception):
    pass

def input_with_timeout(prompt, timeout, timer=time.monotonic):
    sys.stdout.write(prompt)
    sys.stdout.flush()
    endtime = timer() + timeout
    result = []
    while timer() < endtime:
        if msvcrt.kbhit():
            result.append(msvcrt.getwche()) #XXX can it block on multibyte characters?
            if result[-1] == '\r':
                return ''.join(result[:-1])
        time.sleep(0.04) # just to yield to other processes/threads
    raise TimeoutExpired 
```

用法：

```
try:
    answer = input_with_timeout(prompt, 10)
except TimeoutExpired:
    print('Sorry, times up')
else:
    print('Got %r' % answer) 
```

在 Unix 上，您可以尝试：

```
import select
import sys

def input_with_timeout(prompt, timeout):
    sys.stdout.write(prompt)
    sys.stdout.flush()
    ready, _, _ = select.select([sys.stdin], [],[], timeout)
    if ready:
        return sys.stdin.readline().rstrip('\n') # expect stdin to be line-buffered
    raise TimeoutExpired 
```

或者：

```
import signal

def alarm_handler(signum, frame):
    raise TimeoutExpired

def input_with_timeout(prompt, timeout):
    # set signal handler
    signal.signal(signal.SIGALRM, alarm_handler)
    signal.alarm(timeout) # produce SIGALRM in `timeout` seconds

    try:
        return input(prompt)
    finally:
        signal.alarm(0) # cancel alarm 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-20T17:28:09.320

有趣的问题，这似乎有效：

```
import time
from threading import Thread

answer = None

def check():
    time.sleep(2)
    if answer != None:
        return
    print("Too Slow")

Thread(target = check).start()

answer = input("Input something: ") 
```

# java - 通过线程名称或线程组名称终止线程 - Java

> ID：15528944
> 
> 赞同：0
> 
> 时间：2013-03-20T16:12:59.230
> 
> 标签：java, multithreading

我们如何通过它的名称终止一个`Thread`或`ThreadGroup`实例？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T16:26:34.353

像这样的东西

```
 Thread[] a = new Thread[1000];
    int n = Thread.enumerate(a);
    for (int i = 0; i < n; i++) {
        if (a[i].getName().equals(name)) {
            a[i].interrupt();
            break;
        }
    } 
```

尽管 interrupt() 不会终止线程，但 stop() 会（尽管已弃用）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-20T16:44:56.327

这取决于您说“终止”时的意思。

但第一个提示是，您必须获取要终止的所有线程的列表。用于`Thread.getThreads()`执行此操作。如果需要，您可以按组过滤线程。

现在，如何停止线程？有2种方式。

1.  调用`stop()`方法。它已被弃用，你不应该使用它，因为它可能会导致系统进入不一致的状态。但是，如果您*真的*想要……仍然支持此方法。
2.  每个线程都应该支持关闭机制，即可以用来通知线程退出其`run()`方法的“协议”。如果所有线程都是你的，你可以让它们实现你自己的接口（例如`Terminatable`），方法`terminate()`是改变标志的值并导致线程退出。在这种情况下，终止线程的代码应该遍历线程，检查线程应该被终止并且它实现了 interface `Terminatable`，转换为它并调用它的`terminate()`方法。

# sql - 如何对查询进行 OUTER JOIN

> ID：15528950
> 
> 赞同：1
> 
> 时间：2013-03-20T16:13:18.797
> 
> 标签：sql, ms-access, oledb, ms-access-2000

我不确定我的问题是否准确，所以我会解释一下情况。

我有 2 个表，即使没有匹配项，我也需要在其中进行左外连接以获取数据。我做了一个工作正常的查询，除了 where 语句中的一个歧视：

```
SELECT TableA.Type, SUM(TableB.HreReelles) AS HreReellesTotales, TableB.NoProjet_Short 
FROM TableA 
LEFT OUTER JOIN TableB ON TableA.IDType = TableB.IDType  
WHERE TableA.Categorie = 'Electrique' 
GROUP BY TableB.NoProjet_Short,TableA.Type 
```

现在我意识到我还需要只获取特定项目的记录，但即使另一个表中没有匹配项，也要保留 OUTER JOIN 中的所有“TableA.Type”。如果我只添加“AND”语句，它会将它们从返回的记录中删除。如有必要，我会发布屏幕截图；）。

哦，我需要在完成后将其放入 OleDbCommand 中。

谢谢西蒙

**编辑：**添加图片。我不需要红色的内容，但我需要包括空单元格在内的其余部分（来自 LEFT OUTER JOIN）。

![预期数据](../Images/f68b3ad770ebd8222538426cd525428d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:16:29.080

对于左连接查询，您应该在连接的 on 子句中过滤“右”表中的行。

```
SELECT TableA.Type, SUM(TableB.HreReelles) AS HreReellesTotales, TableB.NoProjet_Short 
FROM TableA 
LEFT OUTER JOIN TableB ON TableA.IDType = TableB.IDType  
  AND TableB.ColumnName = 'SomeValue'
WHERE TableA.Categorie = 'Electrique' 
GROUP BY TableB.NoProjet_Short,TableA.Type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T18:03:47.877

我认为您可能需要走很长的路：

```
SELECT TableA.Type, SUM(b.HreReelles) AS HreReellesTotales, 
       b.NoProjet_Short 
FROM TableA 
LEFT JOIN (SELECT * FROM TableB 
  WHERE TableB.ColumnName = 'SomeValue') b
ON TableA.IDType = b.IDType  
WHERE TableA.Categorie = 'Electrique' 
GROUP BY b.NoProjet_Short,TableA.Type 
```

# android - 在桌面 Flash Pro CS6 上测试应用程序时，Sim Controller 未打开

> ID：15528953
> 
> 赞同：3
> 
> 时间：2013-03-20T16:13:23.227
> 
> 标签：android, actionscript-3, flash, air, flash-cs6

我正在 Flash Pro CS6 中在 AIR for Android 3.2 上发布应用程序。一切正常，但是当我测试我的电影时，Sim Controller 突然停止出现。

该应用程序大量使用了滑动功能，并且没有 sim 控​​制器，我每次都必须调试发布到我的手机，这很烦人。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T10:15:28.683

好的，我找到了解决这个问题的方法，进入 Control->Test Movie 并确保选择了“In AIR Debug Launcher (Mobile)”，我记得我在设备​​上发布测试时搞砸了，但没有改回来！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-15T19:28:42.103

对我来说，问题是 Sim Controller 根本没有启动。即使是新项目或当我重新打开 Flash 时。

解决方案是在任务管理器中关闭所有 Adob​​e 相关进程。似乎 Adob​​e 更新程序或其他东西正在干扰打开 AIR。

重新启动计算机也应该通过关闭所有更新程序等来解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-25T13:45:51.493

这是一个与项目相关的问题。要修复它，请转到：控制/清除发布缓存和测试电影

# python - 这个 python 脚本如何看到正确的列？

> ID：15528960
> 
> 赞同：0
> 
> 时间：2013-03-20T16:13:39.673
> 
> 标签：python

我运行这个脚本非常成功，但很好奇它是如何引用数据的。（我还要怎么学？）

```
input_file = Cars.csv    
with open(input_file) as f:
    reader = csv.reader(f)
    next(reader)
    cars_list = tuple([row[1] for row in reader])

template_cars ="C:\\Data\\CarsTemplate.txt"
cars_textfile = "C:\\Data\\Cars.txt"
shutil.copyfile(template_cars,cars_textfile)

with open(cars_textfile, 'a') as f:
    if len(cars_list) == 0:
        cars_Sentence = ""

    elif len(cars_list) == 1:
        cars_Sentence = "A  %s is parked on the street." % cars_list

    elif len(cars_list) == 2:
        cars_Sentence = "Cars %s and %s are parked on the street." % cars_list

    else:
        for record in cars_list:
            cars_Sentence = "Cars " + ('%s, ' * (len(cars_list)-1) + 'and %s') % tuple(cars_list) + " are parked on the street"

    f.write(cars_Sentence)
f.close() 
```

我的 Cars.csv 文件的数据：

```
RecNo,Model,ItemNo,Count  
1,Prius,1,1  
2,Civic,2,3  
3,Lexus,1,5  
4,Jetta,5,1  
5,Subaru,0,0 
```

鉴于上面的代码适用于我的数据，它如何知道打印出 Model 列而不是其他列？我认为这与包含字符串而不是数字的列有关。

如果我的数据有两列字符串而不是一列，我将如何引用我想要的列并输出相同的结果？只是好奇。试图让我的头脑围绕编码。

再次感谢所有帮助我的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:15:46.520

仅从文件中获取模型列：

```
cars_list = tuple([row[1] for row in reader]) 
```

这会从您的输入中获取每一行（csv 模块将其转换为一系列列），并且只获取第二列（python 使用基于 0 的索引）。

换句话说，编写此代码的人知道输入文件中的每一行包含四列，并且只选择了第二列。如果不同的列包含模型，则必须调整`row[1]`索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T17:10:27.260

通常，通过阅读（此处为 csv 模块）文档并正确选择，可以对代码进行相当多的改进，使其变得更加健壮和更具可读性。

请注意，在您的 CSV 文件中，第一行表示字段名称；它被您的代码的下一个（读者）调用跳过。

选择最佳类，您不必跳过它，但会对其进行评估以访问这些字段名，第一部分变为：

```
with open(input_file) as f:
   reader = csv.DictReader(f)
   cars_list = tuple([row["Model"] for row in reader]) 
```

这很明显，在哪里改变以获得不同的信息，也适用于文件，其中“模型”列的位置不同。

# php - 使用 Capifony 部署 Symfony2 项目时出现 PHP 致命错误

> ID：15528967
> 
> 赞同：3
> 
> 时间：2013-03-20T16:14:05.410
> 
> 标签：php, memory, symfony, fatal-error, capifony

将 Symfony2 项目部署到服务器时，我偶尔会收到以下错误：

```
PHP Fatal error:  Uncaught exception 'ErrorException' with message 'proc_open(): 
fork failed - Cannot allocate memory' in 
in phar:///var/www/xyz.co.uk/releases/20130320161122/composer.phar/vendor/
symfony/console/Symfony/Component/Console/Application.php:982 
```

**更新**

完整的错误消息如下`--> Updating Composer dependencies`：

```
*** [err :: x.xx.xx.xxx] PHP Fatal error:  Uncaught exception 'ErrorException' with message 'proc_open(): fork failed - Cannot allocate memory' in phar:///var/www/xyz.co.uk/releases/20130320161815/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php:982
*** [err :: x.xx.xx.xxx] Stack trace:
*** [err :: x.xx.xx.xxx] #0 [internal function]: Composer\Util\ErrorHandler::handle(2, 'proc_open(): fo...', 'phar:///var/www...', 982, Array)
*** [err :: x.xx.xx.xxx] #1 phar:///var/www/xyz.co.uk/releases/20130320161815/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php(982): proc_open('stty -a | grep ...', Array, NULL, NULL, NULL, Array)
*** [err :: x.xx.xx.xxx] #2 phar:///var/www/xyz.co.uk/releases/20130320161815/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php(900): Symfony\Component\Console\Application->getSttyColumns()
*** [err :: x.xx.xx.xxx] #3 phar:///var/www/xyz.co.uk/releases/20130320161815/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php(865): Symfony\Component\Console\ in phar:///var/www/xyz.co.uk/releases/20130320161815/composer.phar/vendor/symfony/console/Symfony/Component/Console/Application.php on line 982
*** [deploy:update_code] rolling back
failed: "sh -c 'sh -c '\\''cd /var/www/xyz.co.uk/releases/20130320161815 && php composer.phar update --no-scripts --verbose --prefer-dist'\\'''" on x.xx.xx.xxx 
```

这不会一直发生，但有时会发生。我在服务器上的 apache 和 cli php.ini 文件中分配了 256M，但有时仍会收到错误消息。

Symfony 需要多少内存？我需要进一步增加吗？我以为这就够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:16:02.567

根据 GitHub 上的这篇文章：[https](https://github.com/composer/composer/issues/945) ://github.com/composer/composer/issues/945看起来您*至少*需要1GB 的内存可供 PHP 使用。

Symfony 是一个相当大的内存消耗者，虽然 1Gb 可能听起来很荒谬，但对于它执行的处理类型来说，它绝对不是不可能的。如果它告诉您内存不足，您唯一的选择是添加更多内存。

您可能还想在一周左右的时间回来查看，看看他们是否也没有修补某种内存泄漏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T16:46:16.617

是的，`Symfony`总是比大多数框架重，但这个错误有点荒谬。我这样说是因为我的生产机器总共有 512MB 的 RAM，而 128M 分配给 PHP - 而且，应用程序仍然表现出色。

现在，因为复杂性确实在这里发挥了重要作用，**所以你的错误发生在哪里**？在缓存预热/清理期间？您是否尝试运行一些**自定义控制台命令**？

另外，你试过安装**APC**吗？这样做之后，我的应用程序变得异常火爆:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-20T01:01:52.083

一些 symfony 部署需要大量内存来更新存储库。此外，如果您使用[capifony](http://capifony.org/)，您可能会遇到很多内存错误。在小型 VPS 中部署或专用于少于 1-2 GB RAM 的技巧是创建一个 SWAP，您将在其中存储所需的内存。因此，例如，您可以尝试使用以下命令创建 1 GB 的交换：

```
# /bin/dd if=/dev/zero of=/var/swap.1 bs=1M count=1024
# /sbin/mkswap /var/swap.1
# /sbin/swapon /var/swap.1 
```

# java - 在不使用子报表的情况下以编程方式附加 Crystal Reports

> ID：15528968
> 
> 赞同：1
> 
> 时间：2013-03-20T16:14:05.737
> 
> 标签：java, jsp, crystal-reports, business-objects, crystal-reports-xi

我的任务是创建一个“应用程序”，它允许以下操作：给定服务器上的 Crystal Reports 列表，用户可以选择任意数量的它们组合成一个长报表（只是附加在一起）。他们必须能够为每个报告设置参数。

我收集到通常的方法是生成一个主报告，其中包括所有单独的报告作为子报告，但我不认为这是一个选项，因为一些单独的报告可能已经包含他们自己的子报告（并且您不能有嵌套的子报表）。

这些报表是使用 Crystal Reports for Enterprise XI 4.0 创建的。我正在尝试将其作为一组使用 BusinessObjects Java SDK 的 JSP 页面来实现。最好输出类型是灵活的，但如有必要，只生成 PDF 是可以接受的。

解决此问题的最佳方法是什么？

**更新：**我还应该注意，当尝试将单个报告导出为 PDF 时（我正在考虑只制作每个报告的 PDF，然后以某种方式连接它们），以下代码失败：

```
// Get the ID of the current working report.
int reportID = Integer.parseInt(request.getParameter("ReportID"));

// Retrieve the BOE Session and InfoStore objects
IEnterpriseSession eSession = (IEnterpriseSession)session.getAttribute("EnterpriseSession");
IInfoStore iStore = (IInfoStore)eSession.getService("InfoStore",ServiceNames.OCA_I_IINFO_STORE);

// Query to get the report document
String infoStoreQuery = "select SI_NAME,SI_PARENTID from CI_INFOOBJECTS where SI_ID=" + reportID;
IInfoObjects infoObjects = iStore.query(infoStoreQuery);
IInfoObject report = (IInfoObject)infoObjects.get(0);

IReportAppFactory reportAppFactory = (IReportAppFactory)eSession.getService("RASReportFactory");
ReportClientDocument clientDoc = reportAppFactory.openDocument(report, OpenReportOptions._openAsReadOnly, java.util.Locale.CANADA);

//Use the report document's PrintOutputController to export the report to a ByteArrayInputStream
ByteArrayInputStream byteIS = (ByteArrayInputStream)clientDoc.getPrintOutputController().export(ReportExportFormat.PDF);
clientDoc.close();

//Create a byte[] that is the same size as the exported ByteArrayInputStream
byte[] buf = new byte[2000 * 1024];
int nRead = 0;
//Set response headers
response.reset();
response.setHeader("content-disposition", "inline;filename=untitled.pdf");
response.setContentType("application/pdf");
//Send the Byte Array to the Client
while ((nRead = byteIS.read(buf)) != -1) {
  response.getOutputStream().write(buf, 0, nRead);
}
//Flush the output stream
response.getOutputStream().flush();
//Close the output stream
response.getOutputStream().close(); 
```

在“reportAppFactory.openDocument”行上，出现此错误：

```
javax.servlet.ServletException: com.crystaldecisions.sdk.occa.managedreports.ras.internal.ManagedRASException: Cannot open report document. --- This release does not support opening SAP Crystal Reports for Enterprise reports. 
```

因此，如果您对整体问题没有更好的解决方案，即使将一份报告导出为 PDF，我仍然希望能得到一些帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:05:27.923

我将把我的答案限制在你的问题中似乎最难的部分——将输出合并到一个文件中。

除非您创建“主”报表并将每个报表附加为子报表，否则您所描述的内容通过 Crystal Reports 听起来是不可能的。这确实具有您提到的丢失任何已经嵌入的子报告的缺点。

之所以需要这样做是由于 Crystal Report 的以下属性：

1.  一个报告可以有一个单一的数据源；不同的数据源必须封装在子报表中
2.  报表由报表页眉、页眉、组页眉、详细信息、组页脚、报表页脚、页脚组成 - 始终按此顺序排列。

包含将多个报告附加在一起的报告很可能会破坏 #1（如果它们具有不同的数据源），并且肯定会破坏 #2。

**现在，您并非没有选择**- 您可以将报告导出为各种格式，并以编程方式将它们附加为该导出格式：MS Excel/Word、PDF，并以该格式操作它们。有一些免费的 pdf 编写器可以让您将单个文档打印为 PDF（因此您甚至不需要依赖 CR 的导出功能）；有一些工具可以将多个 pdf 合并在一起，试试[这个谷歌搜索](http://www.google.ca/#q=print+to+pdf+combine+documents)的选项，或者[这个 SO 答案](https://stackoverflow.com/a/4184202/836214)。

**编辑**-关于您遇到的错误（`This release does not support opening SAP Crystal Reports for Enterprise reports.`）-听起来您正在尝试在较旧的 SDK 中打开较新版本的报告。确保您使用的 SDK 支持您尝试使用的报告版本（可能安装不正确，或者有多个版本冲突？）

# javascript - 使用 jQuery 的动态 div

> ID：15528969
> 
> 赞同：-2
> 
> 时间：2013-03-20T16:14:06.537
> 
> 标签：javascript, jquery, html, dynamic

使用 jQuery 替换 div 内容的最佳方法是什么？这是我的应用程序的示例：

```
<div id="size">
    <p>Waiting for item</p>
</div> 
```

选择项目后，大小是 size-sml（这是一个 jquery 按钮集）或 size-l，具体取决于项目类型。

```
<div id="size-sml" style="display: none">
    <input id="s_r1" name="radio" type="radio"><label for="s_r1">Small</label>
    <input id="s_r2" name="radio" type="radio"><label for="s_r2">Medium</label>
    <input id="s_r3" name="radio" type="radio"><label for="s_r3">Large</label>
</div> 
```

或者

```
<div id="size-l" style="display: none">
    <label for="liters">Volume in liters: </label>
    <input id="liters">
</div> 
```

我正在使用 .html() 更改 div，但这会导致错误“无法在初始化之前调用按钮上的方法，尝试调用方法‘小部件’”，每当我按下其中一个中小型按钮时。常规文本输入工作正常。

JavaScript：

```
var size = $( "#size" );
var types = $( "#types" ); //jQuery buttonset
types.click( function() {
    sizeType = $( "#types :radio:checked" ).attr( "st" );
    if ( sizeType == "G" ) {
        size.html( $( "#size-sml" ).html() );
        size.buttonset();
    } else if ( sizeType == "L" ) {
        size.html( $( "#size-l" ).html() );
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T19:57:49.780

我不完全确定你做错了什么，或者为什么你会得到那个错误，因为你没有提供标记`#types`，或者初始化它的 javascript。我根据提供的内容重建了这些作品，它似乎对我有用。对您的代码进行一些小的更改：

### Plunk：[http ://plnkr.co/edit/7dvzrb0Mzpg80bApmTmi?p=preview](http://plnkr.co/edit/7dvzrb0Mzpg80bApmTmi?p=preview)

```
$(function(){
  $("#types").buttonset();
  $("#types :radio").click(function(e) {
      var sizeType = $(this).attr( "st" );
      if ( sizeType == "G" ) {
      $("#size").html( $( "#size-sml" ).html() )
                .buttonset();
      } else if ( sizeType == "L" ) {
          ("#size").html( $( "#size-l" ).html() );
      }
    });
}); 
```

我相信您的问题的根源在于`sizeType = $( "#types :radio:checked" ).attr( "st" );`它**不会**返回单个结果。因此，我没有将点击事件放在父级上，而是将其放在`:radio`.

# iphone - 供应商标识符

> ID：15528978
> 
> 赞同：6
> 
> 时间：2013-03-20T16:14:37.373
> 
> 标签：iphone, ios, ios6

```
NSString *identifier = [[[UIDevice currentDevice] identifierForVendor] UUIDString]; 
```

上面的代码在我的两个应用程序中在同一部手机上提供了两个不同的标识符 - 不同的捆绑 ID，但在我的 Apple 帐户上创建了两个 App ID 和两个开发配置文件。

我的理解是，如果团队 ID 相同，那么这两个应用程序中的供应商标识符应该相同。错误在哪里？我不明白什么？ ![第一个应用](../Images/0cf1590dad8cc009273d09fad271834b.png)

![第二个应用](../Images/a334d2b27851166517aef1d2e2dd26dd.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-14T20:45:26.730

我现在正在解决同样的问题。“答案”是 identifierForVendor 根据 Apple 文档中的预期设计被破坏：

> 捆绑 ID 假定为反向 DNS 格式，前两个组件用于生成供应商 ID。例如，com.example.app1 和 com.example.app2 似乎具有相同的供应商 ID。

实际情况是 identifierForVendor 仅对于使用相同配置文件和签名证书的应用程序是相同的。例如，我的企业环境中有多个应用程序，所有这些应用程序都是 com.mycompany..

identifierForVendor 对于使用 bundleID com.mycompany.app1.* 及其配置文件的应用程序是相同的，但是 com.mycompany.app2 使用相同的签名证书但不同的配置文件会产生不同的 identifierForVendor 值。

**编辑：**这仅在 iOS7 中发生，但在 iOS6 中运行良好。我昨天测试了一段时间，可以在 7 天内重复该问题，但在 6 天内我得到了预期的结果。

**EDIT2：** Apple 已将目标帖子移至 identifierForVendor 上。他们显然发现了他们的算法问题，而不是解决问题，而是通过更改文档更改了 iOS 版本之间的标识符功能。更新的文档链接如下。SMH。

[供应商标识符](https://developer.apple.com/library/ios/documentation/uikit/reference/UIDevice_Class/Reference/UIDevice.html#//apple_ref/occ/instp/UIDevice/identifierForVendor)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-14T13:38:22.200

供应商不是由团队 ID 决定的，而是由以下任一决定：

*   App Store 提供的数据（如果是从 App Store 下载的）
*   捆绑包 ID 的一部分（如果使用任何其他方式部署）

这取决于设备运行的是 iOS 6 还是 7+。

根据[-[UIDevice identifierForVendor]](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDevice_Class/index.html#//apple_ref/occ/instp/UIDevice/identifierForVendor)文档：

> 通常，供应商由 App Store 提供的数据确定。如果应用程序不是从应用程序商店安装的（例如企业应用程序和仍在开发中的应用程序），则会根据应用程序的捆绑 ID 计算供应商标识符。捆绑 ID 假定为反向 DNS 格式。
> 
> 在 iOS 6 上，bundle ID 的前两个组件用于生成供应商 ID。如果捆绑包 ID 只有一个组件，则使用整个捆绑包 ID。
> 
> 在 IOS 7 上，捆绑包的所有组件（最后一个组件除外）都用于生成供应商 ID。如果捆绑包 ID 只有一个组件，则使用整个捆绑包 ID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-26T06:07:07.320

这是因为您有 2 个不同的捆绑包 ID。

供应商由前两个点分隔字段标识。所以 com.a.app1 和 com.a.app2 有相同的供应商 (com.a) 但 com.b.app3 有不同的供应商 (com.b)

# c# - 使用 INSERT INTO 添加到 Access DB？

> ID：15528980
> 
> 赞同：0
> 
> 时间：2013-03-20T16:14:44.703
> 
> 标签：c#, sql, ms-access

我有一个带有 [ID TIME CODE REASON] 列的表 (DV1) 的 Access 数据库。我只是想更新表格。我不断收到 INSERT INTO 语法错误。我看到的一切看起来都很好。我什么都试过了。我正在打开数据库，然后出现错误。有什么想法吗？

```
private void WRTODB_Click(object sender, EventArgs e)
    {
        OleDbConnection machStopDB = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source="+@"C:\Users\sgarner\Google Drive\Visual Studio 2012\Timer test\WRITE TO DB\WRITE TO DB\Machine_Stop.accdb");
        machStopDB.Open();
        string str = "INSERT INTO DV1(TIME,CODE,REASON)" +
            "VALUES( ('" + DateTime.Now + "'),('" + textBox1.Text + "'),('" + textBox2.Text + "'))";
        OleDbCommand insertCmd = new OleDbCommand(str, machStopDB);
        insertCmd.ExecuteNonQuery();
        machStopDB.Close();
    } 
```

这只是我正在使用的一个测试程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T16:49:02.803

以下代码结合了上述评论提供的合理想法：

```
private void WRTODB_Click(object sender, EventArgs e)        
{
    try
    {
        using (SqlConnection dbConnection = new SqlConnection()) 
        {
            string Source = @"C:\Users\sgarner\Google Drive\Visual Studio 2012\Timer test\WRITE TO DB\WRITE TO DB\Machine_Stop.accdb";
            dbConnection.ConnectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Source;
            dbConnection.Open();
            using (SqlCommand command = new SqlCommand("INSERT INTO DV1([TIME],CODE,REASON) VALUES ([pTime],[pCode],[pReason])", dbConnection))
            {
                command.Parameters.AddWithValue("pTime", DateTime.Now);
                command.Parameters.AddWithValue("pCode", textBox1.Text);
                command.Parameters.AddWithValue("pReason", textBox2.Text);
                command.ExecuteNonQuery();
            }
            dbConnection.Close();
        }
    }
    catch (Exception ex)
    {
        throw new Exception(ex.Message);
    }
} 
```

# python - SciPy/NumPy 导入指南

> ID：15528981
> 
> 赞同：12
> 
> 时间：2013-03-20T16:14:44.647
> 
> 标签：python, numpy, scipy, python-import

注意：我检查了重复项，但没有任何内容可以清楚地回答我的问题。我相信如果我错过了什么，你会告诉我的！

为了清理我的代码，我一直在寻找在我的程序中导入 SciPy 和 NumPy 的标准约定。我知道没有严格的指导方针，我可以按照自己的方式去做，但有时我仍然会发现相互矛盾的指示。

例如，我在某处读到 NumPy 仅用于实现数组对象，而 SciPy 则适用于所有其他科学算法。所以 NumPy 应该用于数组操作，而 SciPy 应该用于其他一切......另一方面，SciPy 在其主命名空间中导入每个 Numpy 函数，这与（[见这个问题](https://stackoverflow.com/questions/6200910/relationship-between-scipy-and-numpy)`scipy.array()`）是一样的，所以只能使用 NumPy当不使用 SciPy 时，因为它们是重复的......`numpy.array()`

使用 SciPy 和 NumPy 的推荐方法是什么？作为一名科学家，`sqrt(-1)`应该返回一个复数，所以我倾向于只使用 SciPy。

现在，我的代码开始于：

```
import numpy as np
from scipy import *
from matplotlib import pyplot as plt 
```

我使用 scipy 进行数学运算（例如`log10()`），使用 numpy 进行数组创建/操作（例如`np.zeros()`）。一直使用 SciPy 并且从不明确导入 NumPy 会很好吗？未来的更新会从 SciPy 中删除 NumPy 的数组操作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-20T17:15:42.330

我建议做类似的事情

```
import numpy as np
import scipy as sp 
```

反而。`from ... import *`尤其是对于大型模块，例如`numpy`和 ，这样做总是很危险的`scipy`。以下说明了原因：

```
>>> any(['foo'])
True
>>> from scipy import *
>>> any(['foo'])

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
     any(['foo'])
  File "C:\Python27\lib\site-packages\numpy\core\fromnumeric.py", line 1575, in any
    return _wrapit(a, 'any', axis, out)
  File "C:\Python27\lib\site-packages\numpy\core\fromnumeric.py", line 37, in _wrapit
    result = getattr(asarray(obj),method)(*args, **kwds)
TypeError: cannot perform reduce with flexible type 
```

这里会发生什么？标准的 python 内置函数`any`被替换为`scipy.any`具有不同行为的函数。这可能会破坏任何使用标准的代码`any`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-18T01:26:35.940

这篇文章有一些关于这两个模块的好信息（[scipy 和 numpy 之间的关系](https://stackoverflow.com/questions/6200910/relationship-between-scipy-and-numpy?rq=1)）。Numpy 的功能似乎完全包含在 Scipy 中，尽管有一些例外（见帖子）。我想说简单地使用 Scipy 来满足您的所有需求是安全的，因为最重要的东西，如数学函数、数组和其他东西都包含在 Scipy 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T16:27:26.037

如何制作课程并使用您需要的东西，fx：第一类：

```
import cv2
from SIGBWindows import SIGBWindows
from SIGBAssg import * 
```

第二类：

```
import cv2
import numpy as np

from pylab import *
from scipy.cluster.vq import *
from scipy.misc import imresize 
```

第三类：

```
import cv2
import numpy as np 
```

最后我们调用对象的地方：

```
import cv2
from SIGBWindows import SIGBWindows
from SIGBAssg import *

windows = SIGBWindows(mode="video")
windows.openVideo("somevideo.avi")
kmeans(windows) 
```

我不知道它是否是您正在寻找的东西，但是这种方法使代码非常干净并且易于向其添加更多功能。

# rest - 使用 SOAPUI 使 testSteps 相互交互

> ID：15528983
> 
> 赞同：0
> 
> 时间：2013-03-20T16:15:02.653
> 
> 标签：rest, groovy, soapui, testcase

我是使用 SOAPUI 的新手，我找不到如何在我的服务器上正确测试 REST URI。

我想在给定的 URI 上测试 POST、PUT 和 DELETE。

**POST**方法应该在我的数据库中创建一个新条目，并且服务器返回生成的密钥以访问该元素。

**PUT**方法用于更新条目，并且需要包含要更新的条目键的 JSON 。

**DELETE**方法获取要删除的条目的键。

所以，我想用 3 个 testSteps 为每个 URI 创建一个 testCase

*   第一步：将 JSON 发布到该 URI，创建一个新条目并检索其密钥
*   第二步：更新之前的条目（不知道怎么生成包含key的json）
*   第三步：删除该条目（同样的问题）

密钥是由服务器生成的，所以我必须检索它并将其传递给其他步骤。

所以我的问题分为两部分：

*   如何检索服务器的响应？
*   如何生成要由其他两个步骤发送的 JSON？

如果您需要更多信息来回答我的问题，请随时提问：）

我希望有人能给我一些线索，以便这样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:30:42.043

之后要检索服务器的响应，我发现了该怎么做。

```
def response = context.expand( '${Request 1#Response}' ) 
```

这给出了服务器响应的字符串表示。

现在我必须提取响应的某些部分并创建一个 JSON，该 JSON 将被发送到下一步（PUT 请求）。我仍然必须找出方法。

有什么帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-23T22:16:31.660

好吧，我不确定这是否能回答你的问题，但这是我从响应字符串中获取 JSON 所做的

```
import groovy.json.JsonSlurper

def slurper = new JsonSlurper() 

def prevStepResponse = '${Create Customer - All fields#Response}'
def prevRespString = context.expand(prevStepResponse) 
def prev = slurper.parseText(prevRespString)

assert prev.customerId > 0 
```

# objective-c - 访问已在另一个中修改的 int 的值

> ID：15528986
> 
> 赞同：0
> 
> 时间：2013-03-20T16:15:08.497
> 
> 标签：objective-c, class, variables

如果这是一个明显的问题，请道歉。我有一个 VC A 和一个 VC B（它是 A 的子类）。在 A 的 .m 中，我有一个名为 currentQuestion 的 int 计数器。如果用户输入错误的答案，VC A 会转到 VC B。在 B 中，我想访问 currentQuestion 的当前值，以便将正确的图像放置在 leftImageViewer 中。它似乎确实将 currentQuestion 识别为已实例化但未显示正确值的变量。

```
leftImageViewer.image = [UIImage imageNamed:left[currentQuestion]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:23:06.320

您将不得不传递 to 的值`currentQuestion`，`VCB`因为 VCB 正在创建所有实例变量的全新实例（或者这是通常发生的情况，很难通过查看代码来判断）：

```
// an example of how to create 'VCB', this is NOT in 'VCB.m'
VCB *vcb = [[VCB alloc] init];
[vcb setCurrentQuestion:[self currentQuestion]];
// present 'vcb' how you are doing so now 
```

当然，这是假设你有一个 property `@property int currentQuestion`。

更一般地，您需要查看[继承](http://en.wikipedia.org/wiki/Inheritance_%28object-oriented_programming%29)和[多态](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)的概念，以更好地理解正在发生的事情。

**更新**：

你`VCA`应该看起来像：

```
@interface VCA : UIViewController
    // ...
@property int currentQuestion; // this will allow 'currentQuestion' to be accessible
    // ...
@end 
```

为了理解为什么以及如何工作，我鼓励你更好地理解继承是如何工作的。它是面向对象编程中的一个基本概念。

# reporting-services - 报告和数据集和参数

> ID：15528991
> 
> 赞同：1
> 
> 时间：2013-03-20T16:15:23.387
> 
> 标签：reporting-services

我在 SSRS 中创建了一个报告，如果我想输入 2 个参数，它可以正常工作，但我想要的是为每个参数创建一个下拉列表。所以我创建了主数据集和两个额外的数据集，所以我的参数可以指向它们来创建列表，但是它不起作用，你能通过查看下面的数据集找出原因吗？

**主要数据集**

```
SELECT       Racecourse.RacecourseID, Racecourse.Name AS Racecourse, Horses.Name AS Horse, RaceResults.Place AS Results, Jockeys.FirstName + ' ' + Jockeys.LastName As 'Jockey', Race.TimeofRace
FROM            Race INNER JOIN
                         Racecourse ON Race.RacecourseID = Racecourse.RacecourseID INNER JOIN
                         RaceResults ON Race.RaceID = RaceResults.RaceID INNER JOIN
                         Horses ON RaceResults.RacehorseID = Horses.RacehorseID INNER JOIN
                         Jockeys ON RaceResults.JockeysID = Jockeys.JockeysID

WHERE @Racecourse = Racecourse.Name AND @TimeofRace =  Race.TimeofRace

ORDER BY Place 
```

**赛马场数据集**

```
SELECT
  Racecourse.RacecourseID
  ,Racecourse.Name
FROM
  Racecourse
WHERE @Racecourse = 'Racecourse.Name' 
```

**TimeofRace 数据集**

```
SELECT
  Race.RaceID
  ,Race.TimeofRace
FROM
  Race

WHERE @TimeofRace = 'Race.TimeofRace' 
```

提前致谢。

韦恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:23:00.303

你是在向后做。您的参数数据集不能由您的主数据集定义，因为它们取决于值。

EG：在定义之前，您不能在两个数据集中要求 @Racecourse。它需要被定义为一个值。

我猜如果您从其他两个数据集中删除谓词（“Where”子句），它将正常工作。也就是说，如果您使用以下选项填充变量的值：“从查询中获取值”。

# java - org.hibernate.MappingException：包含实体注释的用户对象上的未知实体

> ID：15528992
> 
> 赞同：1
> 
> 时间：2013-03-20T16:15:24.690
> 
> 标签：java, spring, hibernate, spring-mvc

我在挠头，想知道为什么每当我尝试使用 spring 和 hibernate 将新用户保存到我的数据库时，这个异常就会不断弹出。

我已经仔细检查并确保存在@Entity 注释，甚至添加了@Table 注释来说明该对象属于哪个表，但我仍然收到此错误

下面是我的用户对象：

```
 @Entity
@Table(name = "USER")
public class User implements Serializable {

    /**
     * Serial version
     */
    private static final long serialVersionUID = 1L;

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final String KEY_BIO = "Bio";

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final String SURNAME = "Surname";

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final String KEY_FIRST_NAME = "FirstName";

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final String KEY_PASSWORD = "Password";

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final String KEY_EMAIL = "EmailAddress";

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final String KEY_USERNAME = "Username";

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final String KEY_USER_ID = "UserId";

    @JsonElement(type = JsonElementType.JSON_KEY)
    public static final int USERNAME_LENGTH = 5;

    @Id
    @Column(name = "USER_ID")
    @NotNull
    private String id;

    @Column(name = "USERNAME", nullable = false, unique = true)
    @NotNull
    private String username;

    @Column(name = "EMAIL_ADDRESS", nullable = false, unique = true)
    @NotNull
    private String emailAddress;

    @Column(name = "PASSWORD")
    @NotNull
    @Size(min = 5, max = 25)
    private String password;

    @Column(name = "FIRST_NAME")
    private String firstName;

    @Column(name = "SURNAME")
    private String surname;

    @Column(name = "COUNTRY")
    private String country;

    @Column(name = "BIO")
    private String bio;

    @Column(name = "SESSION_ID")
    private String sessionId;

    @Column(name = "LAST_REST_CALL_MADE")
    private Date lastRestCallMade;

    @Column(name = "STATUS")
    @NotNull
    private int status;

    @OneToOne
    @JoinColumn(name = "imageId")
    private ProfileImage profileImage;

    public User() {
        id = UUID.randomUUID().toString();
    }

    @JsonElement(type = JsonElementType.GETTER)
    public ProfileImage getProfileImage() {
        return profileImage;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setProfileImage(ProfileImage profileImage) {
        this.profileImage = profileImage;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getId() {
        return id;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setId(String id) {
        this.id = id;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getUsername() {
        return username;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setUsername(String username) {
        this.username = username;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getEmailAddress() {
        return emailAddress;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setEmailAddress(String emailAddress) {
        this.emailAddress = emailAddress;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getPassword() {
        return password;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setPassword(String password) {
        this.password = password;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getFirstName() {
        return firstName;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getSurname() {
        return surname;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setSurname(String surname) {
        this.surname = surname;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getBio() {
        return bio;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setBio(String bio) {
        this.bio = bio;
    }

    @JsonElement(type = JsonElementType.GETTER)
    public String getCountry() {
        return country;
    }

    @JsonElement(type = JsonElementType.SETTER)
    public void setCountry(String country) {
        this.country = country;
    }

    /**
     * @return the sessionId
     */
    public String getSessionId() {
        return sessionId;
    }

    /**
     * @param sessionId the sessionId to set
     */
    @JsonElement(type = JsonElementType.SETTER)
    public void setSessionId(String sessionId) {
        this.sessionId = sessionId;
    }

    /**
     * @return the lastRestCallMade
     */
    public Date getLastRestCallMade() {
        return lastRestCallMade;
    }

    /**
     * @param lastRestCallMade the lastRestCallMade to set
     */
    public void setLastRestCallMade(Date lastRestCallMade) {
        this.lastRestCallMade = lastRestCallMade;
    }

    /**
     * @return the status
     */
    public int getStatus() {
        return status;
    }

    /**
     * @param status the status to set
     */
    public void setStatus(int status) {
        this.status = status;
    }

} 
```

这是我的 userDao 所做的

```
@Override
    public void addNewUser(User user) throws InvalidDataException {
        // TODO: Add Transaction manager object here either using annototation
        // or creating it programatically

        if (mSessionFactory != null) {
            session = mSessionFactory.getCurrentSession();
            session.beginTransaction();
            if (user.getUsername() == null
                    || user.getUsername().length() < User.USERNAME_LENGTH) {
                throw new InvalidDataException(
                        InvalidDataException.ERROR_USERNAME_NULL);
            }

            session.save(user);

        }else{
            throw new RuntimeException("mSession is null");
        }
    } 
```

这里很简单。

完整的stracktrace如下：

```
org.hibernate.MappingException: Unknown entity: com.jr.freedom.user.User
    at org.hibernate.internal.SessionFactoryImpl.getEntityPersister(SessionFactoryImpl.java:1092)
    at org.hibernate.internal.SessionImpl.getEntityPersister(SessionImpl.java:1399)
    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:117)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.saveWithGeneratedOrRequestedId(DefaultSaveOrUpdateEventListener.java:204)
    at org.hibernate.event.internal.DefaultSaveEventListener.saveWithGeneratedOrRequestedId(DefaultSaveEventListener.java:55)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.entityIsTransient(DefaultSaveOrUpdateEventListener.java:189)
    at org.hibernate.event.internal.DefaultSaveEventListener.performSaveOrUpdate(DefaultSaveEventListener.java:49)
    at org.hibernate.event.internal.DefaultSaveOrUpdateEventListener.onSaveOrUpdate(DefaultSaveOrUpdateEventListener.java:90)
    at org.hibernate.internal.SessionImpl.fireSave(SessionImpl.java:753)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:745)
    at org.hibernate.internal.SessionImpl.save(SessionImpl.java:741)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.context.internal.ThreadLocalSessionContext$TransactionProtectionWrapper.invoke(ThreadLocalSessionContext.java:352)
    at $Proxy20.save(Unknown Source)
    at com.jr.freedom.dao.UserDao.addNewUser(UserDao.java:50)
    at com.jr.freedom.user.UserService.registerNewUser(UserService.java:47)
    at com.jr.freedom.controllers.UserController.createNewAccount(UserController.java:57)
    at com.test.jr.freedom.controllers.UserControllerTest.testCreateNewAccount(UserControllerTest.java:61)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

当我调用 session.save(user) 时它崩溃了；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:33:11.190

答对了。这是我配置 sessionFactory 的 xml 配置文件中的问题：

```
<property name="annotatedClasses">
            <list>
                <value>com.jr.freedom.user.User</value>
                <value>com.jr.freedom.user.ProfileImage</value>
            </list>
        </property> 
```

下面这个 bean 上没有：

```
<bean id="mySessionFactory"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation" value="hibernate.cfg.xml" />
        <property name="annotatedClasses">
            <list>
                <value>com.jr.freedom.user.User</value>
                <value>com.jr.freedom.user.ProfileImage</value>
            </list>
        </property>

    </bean> 
```

所以我添加了它并且它有效！问题是，如果我必须维护和使用 100 个实体怎么办。在这个 sessionFactory 中创建一长串 annotatedClasses 值将是一件苦差事！知道如何告诉 spring 或 hibernate 说“*请扫描选定的包并找到并使用我的实体标记的对象*”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T16:59:34.277

回答您在答案中发布的问题。
您可以使用实体管理器自动检测休眠实体。

> class 元素指定您将映射的完全限定的类名。默认情况下，存档中找到的所有正确注释的类和所有 hbm.xml 文件都添加到持久性单元配置中。您可以通过类元素添加一些外部实体

. [http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html/configuration.html](http://docs.jboss.org/hibernate/stable/entitymanager/reference/en/html/configuration.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-20T17:37:53.447

您可以告诉任何 JPA 提供者扫描一个 jar，但是您需要将所有实体类打包在一个单独的 jar 中。任何其他解决方案都是提供商特定的黑客。我通过使用 google 反射扫描注解，然后使用 Hibernate 的 EjbConfiguration 类注册所有实体注解类来做到这一点；但这在 Hibernate 4 中已被弃用，并将在 Hibernate 5 中消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-07T04:24:33.333

我忘记将我的 hbm.xml 添加到我的 cfg.xml 文件中。我一添加它，这个异常就消失了。

```
<mapping resource="com/swipex/backend/hibernate/CServiceCenters.hbm.xml" /> 
```

# c# - 在 IIS 7 中使用 TPL - 处理任务/线程/请求

> ID：15528994
> 
> 赞同：0
> 
> 时间：2013-03-20T16:15:27.507
> 
> 标签：c#, multithreading, wcf, iis-7, task-parallel-library

原谅标题，我不太确定如何表达我在寻找什么，或者我什至知道我在寻找什么。

我有一个正在运行的服务，它可能同时接受大量请求。此外，在服务中，我必须向外部服务发出一定数量（通常为 10-15 个）的请求，这些请求是并行运行的。此代码如下所示

```
 Task<IResponse>[] tasks = new Task<IResponse>[Adapters.Count];
        for(int i = 0; i < Adapters.Count;i++)
        {
            IAdapter adapter = Adapters[i];

            Func<IResponse> makeExternalHttpRequest= () => adapter.MakeExternalHttpRequest(element, mappings);
            tasks[i] = Task.Factory.StartNew<IResponse>(() =>
                {
                    try
                    {
                        var result = makeExternalHttpRequest();
                        if (!token.IsCancellationRequested)
                        {
                            return result;
                        }
                    }catch(Exception exception)
                    {

                    }

                    return null;

                }, token);
        };
        var timeout = ...some timeout value
        Task.WaitAll(tasks,timeout, token);
        tokenSource.Cancel();

        for (int i = 0; i < tasks.Length; i++)
        {
            if (tasks[i].Result != null)
            {
                if (tasks[i].IsCompleted)
                {
                    results.Add(tasks[i].Result);
                }
            }
        } 
```

在过去的 6-7 个月里，一切似乎都按我的预期工作，然后昨天，服务器出现故障，我们的系统管理员向我发送了以下信息。

![在此处输入图像描述](../Images/89b95a1ccfc97ff0f159581ac9049395.png)

如果您注意到突出显示的区域，则表示经过的时间相当大。

我猜这导致了服务器宕机的原因，但我们仍在调查发生了什么。

关于发生了什么以及我的下一步应该是什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T00:00:05.883

我真的认为您的下一步应该是收集更多信息。按照代码的编写方式，您的请求将在超时到期后（或所有任务完成后，以先到者为准）立即返回。其他任务将在后台自行运行完成，并假设该`makeExternalHttpRequest()`方法最终超时，它们都会在自己的时间内停止运行。

您的取消令牌没有做任何有用的事情，因为代码将在其上方的行上阻塞。

我要做的是找出哪些外部请求花费的时间最长，并可能在发生这种情况时记录一个警告。然后，至少您将获得有关正在发生的事情的更好信息。请参阅此伪代码：

（在上面的某个地方，创建一个记录器和一个`System.Diagnostics.Stopwatch`

```
 try
                {
                    var result = makeExternalHttpRequest();
                    if(stopwatch.Elapsed > SomeUnreasonableTimespan) 
                          logger.Warn("Task exceeded reasonable execution period." + TaskData);

                    if (!token.IsCancellationRequested)
                    {
                        return result;
                    }
                }catch(Exception exception)
                {

                }

                return null; 
```

作为一般性评论，我发现这条信息最有用：

> 在过去的 6-7 个月里，一切似乎都按我的预期工作，然后昨天，服务器出现故障，我们的系统管理员向我发送了以下信息。

这意味着问题可能与您的代码无关，而是与其他内容有关。当我进行故障排除时，我倾向于忽略没有改变的事情，而专注于已经改变的事情。服务器会不时崩溃。您需要担心的是它们是否大部分时间都满足您的要求？如果是这样，那么我不会太担心这段代码。

# multithreading - IEnumerable 方法和延迟执行的结果

> ID：15528995
> 
> 赞同：3
> 
> 时间：2013-03-20T16:15:28.730
> 
> 标签：multithreading, linq, deferred-execution

我理解 LINQ 中的延迟执行，如下所述：LINQ [中的延迟执行有什么好处？](https://stackoverflow.com/questions/7324033/what-are-the-benefits-of-a-deferred-execution-in-linq)

但是，延迟执行可能会导致错误，尤其是在多线程场景中，例如。对锁外的共享集合执行的评估。当返回延迟评估的方法嵌套在几个方法层深处时，它会变得很难（至少对我而言）记住或跟踪以便我适当地锁定。

省略无限序列（例如斐波那契）等特殊情况，并假设集合的过滤被认为是完整的（即消费者不太可能进一步过滤结果），返回时将被认为是“最佳方法”来自方法的 IEnumerable 集合——它应该已经被评估还是推迟？

注意：“最佳方法”可以根据其他一些措施的效率/代码安全性来定义，只需在您的回复中进行验证。我想知道社区是如何做到的。

后续问题：如果结果被评估或延迟，在方法名称中显式声明是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-20T16:22:09.053

您将编写的大部分代码都不是多线程的。事实上，当你想要急切地评估一个可枚举时，我能想到的只有三个原因：

1.  您需要在多线程环境中使用它。您应该改为将其设为列表或数组。
2.  您希望随机访问可枚举。您应该改为将其设为列表或数组。
3.  您想控制评估何时发生（例如，如果它很昂贵）。

在其他时候，您应该让它使用延迟执行。这会将评估推迟到实际需要的时间点，并且可能会更快，具体取决于您应用的过滤器。例如，`bigquery.First()`可能比`bigquery.ToArray().First()`. 您能否确定用户已完成过滤？

此外，运行时[将优化某些 LINQ 查询](https://stackoverflow.com/a/15163861/146622)。此示例取自[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)的文章[LINQ To Objects 和嵌套“Where”调用的性能](http://msmvps.com/blogs/jon_skeet/archive/2011/06/16/linq-to-objects-and-the-performance-of-nested-quot-where-quot-calls.aspx)：

```
// Normal LINQ query
var query = list.Where(x => Condition1(x))
                .Where(x => Condition2(x))
                .Select(x => Projection1(x))
                .Select(y => Projection2(y));

// After optimization
var query = list.WhereSelect(x => Condition1(x) && Condition2(x),
                             x => Projection2(Projection1(x)); 
```

* * *

顺便说一句，您的方法应该返回他们可以返回的最具体的可见类型。例如，在内部处理`T[]`数组或`List<T>`列表的方法通常不应只返回一个`IEnumerable<T>`. 如果您希望结果是不可变的，请将其包装在 a 中[`ReadOnlyCollection<T>`](http://msdn.microsoft.com/en-us/library/ms132474.aspx)。

# facebook - Facebook粉丝页面和实际网页的相同评论和喜欢

> ID：15528997
> 
> 赞同：1
> 
> 时间：2013-03-20T16:15:32.513
> 
> 标签：facebook, comments

是否可以在您的 Facebook 粉丝页面和实际网页（使用评论框/赞按钮）上拥有相同的评论和点赞数？

我们当前的设置是：

*   我们网站上的每个条目都有一个评论框和点赞按钮
*   评论框和点赞按钮的data-href参数都设置为网页URL
*   我们使用 Graph API 将网站的每个新条目自动发布到 Facebook 粉丝页面

问题是 Facebook 粉丝页面上的帖子没有“连接”到网页，从某种意义上说，粉丝页面上的喜欢不会出现在网页上，反之亦然。更糟糕的是评论没有同步：网页评论框中留下的评论不会在粉丝页面上显示为评论，反之亦然。

有没有什么办法解决这一问题？还是故意这样做的，Facebook 是否会始终将流分开？