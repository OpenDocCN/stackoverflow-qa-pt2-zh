# StackOverflow 问答 15856000-15856999

# spring - 保存工作表时 jMesa Spring 同步错误

> ID：15856016
> 
> 赞同：0
> 
> 时间：2013-04-06T21:05:28.353
> 
> 标签：spring, servlets, spring-mvc, jmesa

我正在使用 jMesa 框架（一个有用的表格渲染 API），我遇到了一个错误。当使用允许通过 ajax 请求修改空中数据的工作表时，它会将这些请求发送到名为`org.jmesa.worksheet.servlet.WorksheetServlet`. 这个 servlet 管理对表和会话变量所做的更改，所以我不必担心它。

问题在按下保存按钮时开始。您可以进行所有您想要的更改，但在您按下此按钮之前它们不会被保存。然后，jMesa 启动魔法并管理请求和会话，但它同时在两个 sevlet 中完成（我认为这是问题所在）。那些是：

1.  返回 .jsp 页面的控制器（我的）
2.  jMesa servlet

不知道为什么，我的 servlet 在 jMesa 应该被调用时首先被调用，因为当我渲染新视图时，必须更新工作表。这是代码和详细的问题。

Web.xml

```
 <!-- Front controller of the application -->
    <servlet>
        <servlet-name>takeme</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <!-- Configuration file of the application -->
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/configuration/app-config.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Select what will be mapped by the servlet. In this case everything from /takeme servlet -->
    <servlet-mapping>
        <servlet-name>takeme</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <!-- Servlet used to modify jMesa tables -->
    <servlet>
        <servlet-name>worksheet</servlet-name>
        <servlet-class>org.jmesa.worksheet.servlet.WorksheetServlet</servlet-class>
    </servlet>

    <!-- JMesa worksheet mapping -->
    <servlet-mapping>
        <servlet-name>worksheet</servlet-name>
        <url-pattern>*.wrk</url-pattern>
    </servlet-mapping> 
```

控制器：

```
@Controller
public class AdminController {

    @Autowired
    private UserManager userManager;

    @RequestMapping(value = "/users")
    public String adminUsersGet(ModelMap model, HttpServletRequest request, HttpServletResponse response){
        //Set users to the model creating the TableModel
        model.addAttribute("users", TableCreator.createUsersTable(request, response, userManager));
        //Add a callback to jMesa save method
        TableModelUtils.saveWorksheet("usersTable", request, new UserWorksheetSaver(userManager, cityManager, businessManager));
        //Return the view
        return "admin/adminusers";
    }
} 
```

我在 createUsersTable 中创建了表，这无关紧要，因为它是一个普通操作。此方法返回一个包含由 jMesa 构建的纯 html 的字符串。当您调用 render() 方法时，jMesa 检查工作表的状态并决定如何显示表格。在渲染内部，它检查是否有任何未保存的内容（当没有首先调用另一个 servlet 时是这样）。

这是未实现但足以看到问题的保存方法。

工作表保存程序：

```
public class UserWorksheetSaver implements WorksheetSaver{

    public void saveWorksheet(Worksheet worksheet) {
        Iterator<WorksheetRow> worksheetRows = worksheet.getRows().iterator();
        while (worksheetRows.hasNext()) {
            boolean valid = true;

            WorksheetRow worksheetRow = worksheetRows.next();

            String uniqueValue = worksheetRow.getUniqueProperty().getValue();
            String message = null;

            if (worksheetRow.getRowStatus().equals(WorksheetRowStatus.ADD)) {

            } else if (worksheetRow.getRowStatus().equals(WorksheetRowStatus.MODIFY)) {

            } else if (worksheetRow.getRowStatus().equals(WorksheetRowStatus.REMOVE)) {

            }
            if (valid) {
                //This tells jMesa I have updated all rows
                worksheetRows.remove();
            }
        }
    }
} 
```

由于所有删除都已执行，`hasChanges()`jMesa 的方法返回 false（取决于修改的行的大小），所以一切正常。

所以，我知道问题出在哪里，¿我怎样才能让 jMesa 在我的控制器之前工作？注意：jMesa 中的所有示例都没有注释，我需要它带有注释。我已经测试了更改 web.xml 文件中的顺序。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T22:37:43.763

最后，它与 servlet 问题无关。当您保存工作表时，它会将 TableModel 中的标志设置为 true。当有人渲染此表时，它会在执行任何操作之前保存数据。所以，解决问题的方法是：

```
@Controller
public class AdminController {

    @Autowired
    private UserManager userManager;

    @RequestMapping(value = "/users")
    public String adminUsersGet(ModelMap model, HttpServletRequest request, HttpServletResponse response){
        //Add a callback to jMesa save method
        TableModelUtils.saveWorksheet("usersTable", request, new UserWorksheetSaver(userManager, cityManager, businessManager));
        //Set users to the model creating the TableModel
        model.addAttribute("users", TableCreator.createUsersTable(request, response, userManager));
        //Return the view
        return "admin/adminusers";
    }
} 
```

改变操作的顺序可以解决这个问题。

# python - 在python中排序项目

> ID：15856017
> 
> 赞同：3
> 
> 时间：2013-04-06T21:05:35.237
> 
> 标签：python, string

大家好，我需要在 python 中排序和编写排序函数的帮助。我正在尝试编写一个函数`insert_in_order`，它需要一个字符串*项*列表和一个字符串*项*。我正在尝试这样做，假设*项目*已经按字母顺序排序，我必须将*项目插入**项目*中的正确位置

 *还

关于我面临的同样问题，我还想纠正一个`remove`接受列表*项*和字符串*项*的函数。此函数应删除 items 中第一次*出现*的*item*。此外，如果*item在**items*中根本没有出现，该函数应该保持*items*不变。

 ***编辑：

我原来的一组功能如下

```
def read_list(fname):
    items = []
    with open(fname, 'r') as fin:
        for line in fin:
            items = insert_in_order(items, line[:-1])

    return items

def write_list(items, fname):
    fout = open(fname, 'w')
    for item in items:
        fout.write(item + '\n')
    fout.close() 
```

而且我还有一个测试文件应该测试这些功能：

```
class TestLabThre(unittest.TestCase):
    def test_read_list(self):
        self.assertEqual(
                read_list('lab06ReadTest.txt'),
                ['a', 'b', 'c', 'd', 'e'])

def test_write_list(self):
    write_list(['a', 'b', 'c', 'd', 'e'], 'lab06WriteTest.txt')
    in_file = open('lab06WriteTest.txt', 'r')
    self.assertEqual(in_file.read(), 'a\nb\nc\nd\ne\n') 
```

我的`insert_in_order`和`remove`函数应该被添加到函数中，这样当我运行我的测试时，它们就会通过。但我每次都得到一个“失败的测试”。

我真的很困惑，任何为我指明正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:09:16.513

使用[bisect.insort_left](http://docs.python.org/2/library/bisect.html#bisect.insort_left)将项目`x`插入到列表中`a`，并假设`a`已排序，则保持排序。

使用[list.remove](http://docs.python.org/2/tutorial/datastructures.html)从列表中删除第一次出现的值。如果值不在列表中，此函数会引发 ValueError。因此，您需要将调用包装在 a`try..except`中以处理异常——请参见下面的示例。

* * *

```
import bisect

cheese = sorted('manchego stilton brie gouda'.split())
print(cheese)
# ['brie', 'gouda', 'manchego', 'stilton']

item = 'gorgonzola'
bisect.insort_left(cheese, item)
print(cheese)
# ['brie', 'gorgonzola', 'gouda', 'manchego', 'stilton']

try:    
    cheese.remove('manchego')
except ValueError: 
    pass
print(cheese)
# ['brie', 'gorgonzola', 'gouda', 'stilton'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:16:46.563

关于您的排序问题，一个不需要额外模块的快速解决方案（在计算上可能不是最佳的，但在许多情况下已经足够好了）：

```
>>> your_list = ['a', 'b', 'c']
>>> your_list.append('baa')
>>> your_list.sort()
>>> print your_list
['a', 'b', 'baa', 'c'] 
```

要删除项目，只需将列表的`remove`方法与异常处理程序一起使用，如[@unutbu 的](https://stackoverflow.com/a/15856055/709852)解决方案中所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:11:28.680

查看[`bisect`](http://docs.python.org/2/library/bisect.html)在排序列表中找到插入或删除位置的模块。

另外，请注意，插入和删除`list`是`O(n)`因为它们需要将所有项目移动到插入或删除位置的右侧。您可以查看[`blist`](https://pypi.python.org/pypi/blist/)要使用的模块，而不是`list`在`O(log(n))`.****

# c# - 使用 SSL 的套接字身份验证

> ID：15856018
> 
> 赞同：2
> 
> 时间：2013-04-06T21:05:42.527
> 
> 标签：c#, sockets, authentication, ssl, client

**回答：**我正在使用相互 SSL 身份验证。现在没有任何问题:)

我正在做一个服务器项目。我尝试使用 XOR encrypt-decypt 方法对客户端进行身份验证，但这还不够安全。我决定在我的套接字上使用 SSL，但我做不到。我有一个基于 System.Net.Sockets.Socket 的连接。即我想要这个：如果传入 Tcp 连接，则验证它是我们客户端的套接字连接。（每个套接字都无法从我们的端口连接我们的服务器套接字）。谁能给我一个起点或一些例子？（这是我服务器的死角，做不到就取消！）

**EDIT1：**我的系统目前是这样工作的：

> *   客户端连接到服务器。
>     
>     
> *   服务器创建 16 字节长的随机密钥并使用 serverKey (XOR) 对其进行加密，并将其发送给客户端
>     
>     
> *   客户端使用 serverKey 解密数据并使用 clientKey 加密并发送回
>     
>     
> *   服务器解密数据和检查是否相同
>     
>     
>     
>     （当客户端连接时，为验证超时启动一个计时器）

**EDIT2：**现在我正在使用其他密码学。当客户端连接时，它将被发送，客户端将解密并发回。密码学是这样工作的：

> 用特殊方法（不专业）加密 byte[]。之后，得到一个 byte[] 的哈希码。这个散列算法是我写的，如果有人不知道，永远不要理解我们的加密字节[]。（已经哈希输出不能回来）。最后，它结合了散列和加密（如 XOR，一种特殊方法）。

使用这种方法，没有人会得到解密/破解的数据。否则有一个非对称加密/解密方法（[http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange](http://en.wikipedia.org/wiki/Diffie%E2%80%93Hellman_key_exchange)）。我可以稍后使用（硬）非对称密码学升级我的身份验证系统（如果还不够的话）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:30:21.233

我认为对您来说一个好方法是使用 SSL 和客户端证书进行身份验证。

您将运营一个证书颁发机构并为您的服务器颁发一个服务器证书。您还将为每个客户端颁发客户端证书。然后在服务器中，您将连接限​​制为仅由您的 CA 签名的连接。

这是一种标准方法，基本上适用于任何 SSL 实现。是否有理由不适合您的情况？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T00:56:18.740

您的问题的答案是将 SSL 与相互身份验证一起使用。您已将您的问题标记为“SSL”，因此大概这是一个可接受的解决方案。

您将不得不解释“我做不到”的意思。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T13:52:07.083

我正在使用**相互 SSL 身份验证**。这是最好的方法。（对于“SSL 不适用于我的系统”等其他问题，我们深表歉意）

# c# - 拆分 - 连接、聚合、压缩、LINQ

> ID：15856020
> 
> 赞同：3
> 
> 时间：2013-04-06T21:05:56.023
> 
> 标签：c#, linq, join, split, aggregate

**第一个 GUID**字符串：

```
A-B-C-D 
```

**第二个 GUID**字符串：

```
W-X-Y-Z 
```

**第三个**必需**的可逆**字符串：

> **A** -W- **B** -X- **C** -Y- **D** -Z

**加入第 1 和第 2 以获得第 3 的最佳方法是 **什么，然后将其分开以获得两者？****

 **Join-Split、Aggregate、Zip 还是其他？

**编辑 I**：
如果每个 GUID 都被假定为`Enumerable<String>` { **A**，**B**，**C**，**D** } ，也许 LINQ ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:20:14.717

最好的方法？我不确定。但我发现这是一种简单的方法。

```
string g1 = "A-B-C-D";
string g2 = "W-X-Y-Z";

var result = String.Join("-",g1.Split('-').Zip(g2.Split('-'), (a,b) => a+"-"+b)); 
```

**编辑**

并回来

```
int i=0;
var gs = result.Split('-').GroupBy(_ => i++ % 2).Select(g => String.Join("-",g))
               .ToList(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T21:42:47.330

```
string str1 = "A-B-C-D";
string str2 = "W-X-Y-Z"; 
```

合并：

```
string merged = string.Join("-",
    str1.Split('-').Zip(str2.Split('-'), (a, b) => a + "-" + b).ToArray()); 
```

结果：

```
A-W-B-X-C-Y-D-Z 
```

分开：

```
ILookup<int, string> split = merged.Split('-')
    .Select((a, i) => new { i = i, val = a })
    .ToLookup(x => x.i % 2, x => x.val);
string split1 = string.Join("-", split[0].ToArray());
string split2 = string.Join("-", split[1].ToArray()); 
```

结果：

```
A-B-C-D
W-X-Y-Z 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T21:12:13.330

我不知道“什么是最好的方法”，但你可以用一个简单的“for”循环来做到这一点：

```
string a = "ABCD";
string b = "WXYZ";
string c = string.Empty;
if(a.Lenght == b.Lenght)//Check lenght
{
   for(int i = 0; i < a.Lenght; i++)
   {
      c += a[i] + "-" + b[i];
      if(i != a.Lenght)//If it isn't last character
      {
         c += "-";//Add a "-" end of "c"
      }
   }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T21:25:18.060

如果语法不是 100%，请原谅我，C# 不是我的第一语言，但我会将每个 GUID 拆分为一个列表。然后是一个简单的循环。

```
List<string> lstGuid1 = new List<string>;
List<string> lstGuid2 = new List<string>;
lstGuid1.AddRange(guid1.ToString().Split("-"));
lstGuid2.AddRange(guid2.ToString().Split("-"));
string guid3 = null;
if(lstGuid1.Length == lstGuid2.Length)
{
  for(int i = 0; i < lstGuid1.Length; i++)
  {
    guid3 += lstGuid1[i] + "-" + lstGuid2[i] + "-";
  }
  guid3 = guid3.Substring(0, guid3.Length - 1);
} 
```**

# c++ - C++：有条件地将键和值插入到 std::map

> ID：15856027
> 
> 赞同：10
> 
> 时间：2013-04-06T21:07:06.490
> 
> 标签：c++

如果我做：

```
std::map<string, size_t> word_count;
size_t value = word_count.count("a") == 0 ? 1 : 2;
word_count["a"] = value; 
```

那么 word_count["a"] 的最终值为 1，正如我所料。相反，如果我这样做：

```
std::map<string, size_t> word_count;
word_count["a"] = word_count.count("a") == 0 ? 1 : 2; 
```

那么 word_count["a"] 的最终值为 2。为什么！？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T21:07:57.057

正式地，可以首先评估任务的任何一方。由实施决定哪个。如果`word_count`不包含`"a"`，则插入一个，并返回对它的左值引用。如果`word_count`确实包含一个，则只会发生后一部分。尽管不确定首先评估哪一方，但您可以遵循可能的执行：

## 左侧优先

### 不存在元素：

`operator[]`插入元素，因为它不存在。`count()`找到它并返回 1，所以你最终会被赋值为 2。

### 元素存在：

`operator[]`返回现有元素并`count()`找到它并返回 1，因此您最终会为它分配值 2。

## 右侧优先

### 不存在元素：

`count()`返回 0，所以你从右边得到 1。然后，`"a"`将 插入到映射中并分配值 1。

### 元素存在：

`count()`返回 1，所以你从右边得到 2。然后，`word_count["a"]`被访问并分配了 2 个。

## 结论

简而言之，你不能依赖这个来做你想做的事情，所以最好使用你可以依赖的东西。mrfontanini 提出了一个很好的建议，所以我会稍微编辑一下：

```
word_count["a"]++;
word_count["a"] = std::min(word_count["a"], 2); 
```

第一行确保它已插入并且值至少为 1。第二行将该值限制为最大值 2，以防您重复执行此操作。

### 笔记

我根据两件事来回答这个问题：

1.  When a side is picked to be evaluated, the whole side has to be evaluated before the other side can start.

2.  诸如此类的构造`word_count["a"] = 1`表现出明确定义的行为，即使在插入元素然后分配给它的情况下也是如此。

下面有一些关于这些是否属实的辩论和讨论。我现在[更官方](https://stackoverflow.com/questions/15865627/is-indexing-a-new-map-element-and-having-something-that-reads-it-assigned-to-it)了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-06T21:17:02.523

看这一行：

```
word_count["a"] = word_count.count("a") == 0 ? 1 : 2; 
```

我**相信**如果`word_count["a"]`在执行该行之前地图中不存在，则会导致未定义的行为。

这是因为`word_count["a"]`如果一个条目不存在，将在映射中创建一个条目，这将改变`word_count.count("a")`. 我们也不需要在这两个调用之间进行排序..

# nginx - Nginx：重写规则以重定向到 https 页面

> ID：15856028
> 
> 赞同：1
> 
> 时间：2013-04-06T21:07:14.657
> 
> 标签：nginx, rewrite

我想将我的登录页面重定向到 https，这样用户就不会无意中通过未加密的网络输入他们的凭据。我该如何做类似下面的事情？

```
# nginx.conf
server {
  server_name example.org;
  rewrite http://*.example.org/login https://example.org/login;
} 
```

这适用于[http://example.org/login](http://example.org/login)，但不适用于[http://www.example.org/login](http://www.example.org/login)

重写规则输出

```
rewrite http://.*\.?example.org/login https://example.org/login; 
```

重写调试输出：

```
*2 "http://.*\.?example.org/login" does not match "/login", client: XXX.XXX.XX.72, server: example.org, request: "GET /user HTTP/1.1", host: "example.org" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:56:39.517

我删除了我原来的答案，因为它要容易得多。您需要一个 location 块和一个 if 才能使其工作，以及一个包罗万象的服务器域。结构如下：

```
 server {
   server_name example.org;
   server_name *.example.org;
   location /login {
       if ( $scheme = http ) {
          rewrite ^ https://example.org/login last;
       }
   }
 } 
```

尽管我讨厌在即将到来的 nginx 中使用 ifs，但这一次，它是必要的。

# java - ArrayList 数组

> ID：15856029
> 
> 赞同：2
> 
> 时间：2013-04-06T21:07:19.120
> 
> 标签：java, arrays, arraylist

我试图分配 3`ArrayList`如下-

```
ArrayList<Integer>[] m_locationArr  = new ArrayList<Integer>[3] 
```

它提示`Cannot create a generic array of ArrayList<Integer>`

这里有什么问题？

# c++ - Poppler：以目标分辨率渲染

> ID：15856033
> 
> 赞同：1
> 
> 时间：2013-04-06T21:07:25.747
> 
> 标签：c++, qt, poppler

我正在使用 Poppler 在 Qt 和 C++ 中编写一个 pdf 查看器。如何呈现 pdf 页面以适合我的小部件大小？Poppler 提供了一个名为 renderToImage 的方法，它接受一个 dpi 并返回一个 QImage，其大小随该 dpi 变化。如何计算正确的dpi？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:01:14.047

`pageSizeF()`返回以磅为单位的页面大小，除以 72 得出以英寸为单位的页面大小。

小部件大小的每个分量（以像素为单位）除以大小的每个分量（以英寸为单位）为您提供 2 个 dpi 值（每个轴 1 个）。

如果要保持页面纵横比，则应将这两个 dpi 值中较小的一个传递给`renderToImage`for`xres`和`yres`参数。

# ios - 构建错误：分配给'id '来自不兼容的类型'NSArray *'

> ID：15856036
> 
> 赞同：3
> 
> 时间：2013-04-06T21:07:31.840
> 
> 标签：ios, objective-c, uipickerview

我有一个`UIPickerView`我正在尝试为其设置数据源；设置好后`datasource`，我将其放入要显示的模式弹出框中。这是代码 - manicuristArray 定义为`NSArray`， pvManicurist 是`UIPickerView`，所有代表`UIPickerView`都已正确设置，根据我在 SO 上找到的示例）：

```
 -(void) showModalManicurist:(int)tag {

    UIViewController* popoverContent = [[UIViewController alloc] init];

    UIView *popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 300, 216)];
    popoverView.backgroundColor = [UIColor redColor];
    popoverContent.contentSizeForViewInPopover = CGSizeMake(300.0, 216.0);

    //  define the UIPickerView
    pvManicurist.frame = CGRectMake(0, 0, 300, 216);

    //  fill the names from the d/b into manicuristArray
    PreferenceData *pv = [PreferenceData MR_findFirst];  //  (everything is in one record)
    NSLog(@"pv.aStaffPos1: %@", pv.aStaffPos1);

    if(pv)  {   //  fill the UIPickerView
        self.manicuristArray = [[NSArray alloc] initWithObjects: pv.aStaffPos1, pv.aStaffPos2, pv.aStaffPos3, pv.aStaffPos4, pv.aStaffPos5,
                           pv.aStaffPos6, nil];
        NSLog(@"\nmanicuristArray.count: %d",manicuristArray.count);

        pvManicurist.dataSource = self.manicuristArray;        [pvManicurist reloadAllComponents];

     }

    //  add it to the popover
    [popoverView addSubview:pvManicurist];
    popoverContent.view = popoverView;
    popoverController = [[UIPopoverController alloc] initWithContentViewController:popoverContent];
    popoverController.delegate = (id)self;
    [popoverController setPopoverContentSize:CGSizeMake(300, 216) animated:NO];

    //  show it below the staff name textbox
    [popoverController presentPopoverFromRect:boStaff.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp
                                     animated:YES];
} 
```

问题是我收到了这个构建警告：

> 构建错误：从不兼容的类型“NSArray *”分配给“id”

我认为这导致`UIPicker`视图不被放入`UIPopover`. 我还有其他几个弹出窗口，都`UIDatePickers`在其中，而且它们工作正常。我查看了 SO 和 Google 并没有发现任何可以回答这个特定问题的东西，即：为什么这不起作用？以及如何修复构建错误？

**更新：这是 UIPickerView 的委托方法：**

```
//--  sets number of columns
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pvManicurist  {

    return 1; // One column
}

//--  sets count of manicuristArray
-(NSInteger)pickerView:(UIPickerView *)pvManicurist numberOfRowsInComponent:(NSInteger)component  {

    return manicuristArray.count;  //set number of rows
}

//--  sets the component with the values of the manicuristArray
-(NSString *)pickerView:(UIPickerView *)pvManicurist titleForRow:(NSInteger)row forComponent:(NSInteger)component  {

    return [manicuristArray objectAtIndex:row];  //set item per row
} 
```

这是 .h 文件中的界面：

```
@interface AppointmentsViewController : UIViewController <UITableViewDataSource, UITableViewDelegate, UINavigationControllerDelegate, UIActionSheetDelegate, UITextFieldDelegate,UIPickerViewDelegate, UIPickerViewDataSource  >  { 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:20:29.440

您不能将数组指定为数据选取器的数据源，因为数组不提供选取器所需的信息。为了正常工作，选择器至少需要回答以下三个问题：

*   一个picker应该有多少个组件，
*   每个组件有多少行，以及
*   在每个组件的每一行中放入什么数据。

数据源通过实现数据源协议回答了前两个问题：你需要

```
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView 
```

返回组件的数量，以及

```
- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component 
```

返回给定组件中的行数。在你的类中实现这两种方法，然后分配

```
pvManicurist.dataSource = self; 
```

当然，您还需要实现委托的方法，但是由于您分配`popoverController.delegate = (id)self;`了机会，因此您已经完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:20:55.120

问题出在作业上

```
pvManicurist.dataSource = self.manicuristArray; 
```

`dataSource`必须是符合协议的`UIPickerViewDataSource`对象，即类型的对象`id<UIPickerViewDataSource`。显然`NSArray`不符合协议。

您需要分配一个符合该协议的控制器，而不是数据本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:24:09.577

您收到该错误消息是因为您尝试将 an 设置`NSArray*`为选择器视图的数据源。选择器视图的数据源应该是符合`UIPickerViewDataSource`协议的类的实例。

有关此协议的更多信息，请访问iOS 文档的[UIPickerViewDataSource 协议参考](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UIPickerViewDataSource_Protocol/Reference/Reference.html)。

# php - 如何在我的模板系统中显示帖子标签

> ID：15856037
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:07:35.547
> 
> 标签：php

我应该说我不是英语，所以对单词问题感到抱歉！我想在我的模板系统中显示帖子标签，这个工作很完美：

```
 <?php
$text= "hi,ok,bye";
    $numKeys=substr_count($text, ',');
    for($i=0;$i<=$numKeys;$i++){
        $exp=explode(",",$text);
        $tags=$exp[$i];
        echo "<a href='http://test.com/$tags'><strong>$tags</strong></a> ";
    }
?> 
```

但是当我在我的模板系统中使用它时它不起作用（发布标题，时间，......工作完美只是发布标签不起作用！（只显示第一个标签！只有一个标签，如：嗨））：

```
 //posts
$start = strpos($theme, '<start>');
$end = strpos($theme, '</end>', $start + strlen('</end>'));
$posty = substr($theme, $start, $end - $start);
$post = $posty;
$post = str_replace('<start>','',$post);
$post = str_replace('</end>','',$post);
$post_query = mysql_query("SELECT * FROM `posts` WHERE `bid`='{$bid}' ORDER BY `id` DESC");
$posts = '';
if($post_query) {
    while($post_data = mysql_fetch_array($post_query)) {
        $postid = $post_data['id'];
        $post_temp = $post;
        $post_temp = str_replace('[post_title]', $post_data['title'], $post_temp);
        $post_temp = str_replace('[post_content]', $post_data['content'], $post_temp);
        $post_temp = str_replace('[post_date]',$post_data['date'], $post_temp);
        $post_temp = str_replace('[post_author]',$post_data['author'],$post_temp);
        $post_temp = str_replace('[post_comments]',$post_data['comments'],$post_temp);
        $post_temp = str_replace('[post_full_content]','',$post_temp);

$text= "hi,ok,bye";
    $numKeys=substr_count($text, ',');
    for($i=0;$i<=$numKeys;$i++){
        $exp=explode(",",$text);
        $tags=$exp[$i];
        $post_temp = str_replace('[post_tag]',$tags,$post_temp);
    }

        $posts .= $post_temp;
    }
}
$theme = str_replace($post, $posts, $theme); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:17:29.400

[`str_replace`](http://www.php.net/manual/en/function.str-replace.php)说

> str_replace — 用替换字符串替换*所有*出现的搜索字符串

这意味着，所有`[post_tag]`s 都将替换为第一个`$tags`值。每次跟随`$tags`都没有效果。

# jquery - Result.responseText 在 JQuery 中未定义，但在 firebug 中可用并工作

> ID：15856038
> 
> 赞同：-4
> 
> 时间：2013-04-06T21:07:37.907
> 
> 标签：jquery, json

我正在编写一个函数，该函数返回一个 JSON 对象，其中包含来自 Flickr API 的信息。全局变量data在firebug的控制台中返回一个json对象，data.responseText也打印出相关信息。但是，在代码中调用 jsonthing = data.responseText 会导致一些未定义的内容。

最终，我只想使用 parseJSON(data.responseText) 来制作一个 JSON 对象，令人惊讶的是，它可以在 firebug 控制台中工作，而不是在代码中。

有任何想法吗？

```
$(function () {
  var apiKey = 'somekeyhere';
  data = $.getJSON(
    'http://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key=' +
    apiKey + '&user_id=29096781@N02&format=json&per_page=5&nojsoncallback=1');
  hi = '2';
  jsonthing = data.responseText;
  jsonobj = jQuery.parseJSON(data.responseText);
  $('#Test').html(data.toString());
  //$('#Test').html(data.photos.photo.title); 
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:10:13.337

您不需要 parseJSON。getJSON 回调的结果已经解析成 JS 数据结构

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T21:10:51.290

`$.getJSON`是异步的，所以需要注册一个回调：

```
$.getJSON('url', function(data) {
    // Work with data
}); 
```

# asp.net-mvc-3 - MVC3 中的 Post-Redirect-Get 问题

> ID：15856039
> 
> 赞同：0
> 
> 时间：2013-04-06T21:07:38.683
> 
> 标签：asp.net-mvc-3

我需要使用 Post-Redirect-Get 来显示我在“索引”页面的“信息”页面中输入的数据。我有以下方法，但它不起作用。它甚至不会在提交时重定向我。我究竟做错了什么？

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }

    public ActionResult About()
    {
        return View();
    }

    public ActionResult Information()
    {
        return View();
    }

    //Get info
    [HttpGet]
    public ActionResult Submit(Models.Information FirstName,
                               Models.Information LastName,
                               Models.Information DateOfBirth,
                               Models.Information HourOfBirth,
                               Models.Information NumberOfKids,
                               Models.Information Emso,
                               Models.Information Email,
                               Models.Information PlaceOfBirth)
    {
        if (ModelState.IsValid)
        {
            Models.Information info = new Models.Information();

            info.FirstName = FirstName.ToString();
            info.LastName = LastName.ToString();
            info.DateOfBirth = Convert.ToDateTime(DateOfBirth);
            info.HourOfBirth = Convert.ToDateTime(HourOfBirth);
            info.NumberOfKids = Convert.ToInt32(NumberOfKids);
            info.Emso = Emso.ToString();
            info.Email = Email.ToString();
            info.PlaceOfBirth = PlaceOfBirth.ToString();

            TempData["info"] = info;

            return RedirectToAction("Summary");
        }

        return View();
    }

    //Show info
    [HttpPost]
    public ActionResult Post(Models.Information info)
    {
        info.FirstName = ViewData["FirstName"].ToString();
        info.LastName = ViewData["LastName"].ToString();
        info.DateOfBirth = Convert.ToDateTime(ViewData["DateOfBirth"]);
        info.HourOfBirth = Convert.ToDateTime(ViewData["HourOfBirth"]);
        info.NumberOfKids = Convert.ToInt32(ViewData["NumberOfKids"]);
        info.Emso = ViewData["Emso"].ToString();
        info.Email = ViewData["Email"].ToString();
        info.PlaceOfBirth = ViewData["PlaceOfBirth"].ToString();

        return View();
    }
} 
```

我尝试在索引页面上显示数据，如下所示：

```
 First name: <input type='text' runat="server" value="@ViewData["FirstName"]" /><br /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:32:09.123

你的代码看起来有点让我困惑，我不确定你想要完成什么。但首先，让我们举一个我*认为*你正在努力完成的例子。

1.  用户在信息操作/视图上输入信息
2.  （POST）这被发布到控制器/动作，然后验证模型并放入 ViewData（重定向到第 3 步）
3.  (GET) 您希望在摘要页面上重新显示此数据。

在这些假设下，让我们稍微清理一下您的代码，利用 ViewData 和 TempData 对象的使用，看看我们是否可以完成这项工作。

**信息行动**

```
public ActionResult Information()
    {
        //In a strongly typed view, typically you would send an empty model
        //so the model binder/Html.Input helpers have something to bind to
        return View(new Models.Information());
    } 
```

**用于处理传入数据的信息 POST**

```
[HttpPost]
public ActionResult Information(Models.Information info)
{
    //Yup - you can use the same action name as the GET action above
    //You can name this anything you want, but I typically keep the same names so 
    //I know where the data came from

    //I think your assignments are backwards.  info came into the controller action
    //You want to save this as ViewData.  Also, let's do that in one line of code
    //And since we are redirecting, lets use the TempData dictionary

    //Notice the method type decorator above [HttpPost].  This is the P in PRG (Post)

if(modelState.IsValid()){
    TempData["info"] = info;

    //Notice the name of the ActionMethod below.  The is the R in PRG (Redirect)
    return RedirectToAction("Summary");
}

//There were errors, lets send back to the Information view
return View(info); 
```

}

**总结行动**

```
public ActionResult Summary()
    {
        //We were redirected here, and this is a GET method.  This is the G in PRG
        //(GET)

        //lets go ahead and set the TempData stuff to a model, it just looks nicer on
        //the view
        var model = TempData["info"];
        return View(model);
    } 
```

至于视图，这里是每个看起来像的片段

**信息视图**

```
@model Models.Information

@{using(Html.BeginForm()){
   @Html.LabelFor(x=>x.FirstName)<br/>
   @Html.TextBoxFor(x=>x.Firstname)

   //Repeat for each property

   <input type="Submit" value="Submit"/>
}} 
```

**摘要视图**

```
@model Models.Information

   @Html.LabelFor(x=>x.FirstName)<br/>
   @Html.DisplayFor(x=>x.Firstname)

   //Repeat for each property 
```

# amazon-web-services - 使用计时器/信号允许人工干预 AWS SWF 工作流

> ID：15856048
> 
> 赞同：5
> 
> 时间：2013-04-06T21:08:38.313
> 
> 标签：amazon-web-services, workflow

这是场景。用户上传一个 Excel 文件，这将启动验证文件的工作流程，将其转换为几个不同的文件，然后根据转换对数据库执行更新。上传后，需要团队成员审核结果才能继续流程。

我正在使用 Ruby，并发现信号和计时器是在 SWF 中实现此目的的方法。但是，缺少或不存在 Ruby 示例，我需要一些帮助来了解使用 Ruby 将如何工作。

到目前为止，我们的理解是安排了一个 Timer 活动，该活动基本上暂停流程，直到计时器到期（此时我可以取消工作流程或向员工发送电子邮件并设置另一个计时器）或向工作流程发送信号以启动下一步。决策者将处理信号，然后启动适当的活动。

对其他来源的任何想法或方向将不胜感激。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T05:09:23.643

鉴于您并没有真正提出具体问题，因此提供“答案”有点困难。我同意你的观点，即使用定时器和信号是你想要的。

您没有指定团队如何收到有关审核的通知。我假设您通过电子邮件通知他们并将他们定向到可以查看更改的某个网站，然后单击链接以批准或不批准。单击 Approve 链接将向 Web 服务器发送一个请求，该请求将“发出”SWF 信号，表明审查已被批准。单击“不批准”的链接将“发出”SWF 信号，表明审核未获批准。你提到如果没有人对审查采取行动，你想重新通知团队（或者可能升级到经理）。假设此重新通知发生在 48 小时后。重新通知后，您在假设不批准之前再授予他们 72 小时。

在我看来，您的工作流程如下所示：

1.  用户上传文件并启动工作流程
2.  决定任务计划“TransformActivity”
3.  TransformActivity 运行，将数据转换成不同的文件，成功完成
4.  决定任务计划“UpdateDatabaseActivity”
5.  UpdateDatabaseActivity 运行，更新数据库，并成功完成
6.  决定任务计划“EmailTeamActivity”
7.  EmailTeamActivity 运行，向团队发送电子邮件，并成功完成
8.  Decider Task 将 Timer 安排为 48 小时。

如果在 48 小时内收到表示批准或不批准的信号：

1.  决策者任务安排“RecordFinalDecisionActivity”
2.  RecordFinalDecisionActivity 将运行，将批准（或不批准）记录到数据库中，并成功完成。
3.  Decider Task 将关闭工作流，因为它已完成。

如果没有收到信号并且计时器触发（48 小时后）：

1.  决策者任务计划“EmailTeamAndManagerActivity”
2.  EmailTeamAndManagerActivity 运行，向团队和经理发送电子邮件，并成功完成。
3.  决策者任务将另一个计时器安排为 72 小时。

如果在给定的额外 72 小时内收到指示批准或不批准的信号：

1.  重复与“如果在 48 小时内收到指示批准或不批准的信号”部分相同的逻辑。

如果没有收到信号并且计时器触发（在额外的 72 小时之后）：

1.  此时，工作流可以假设它是“不批准”，安排“RecordFinalDecisionActivity”并在该活动完成后关闭工作流。

您不想进行“审查”活动的原因是因为该任务已安排好，然后一些活动工作人员需要回复成功。那将如何运作？当有人单击批准或不批准链接时，对网络服务器的请求将不得不从任务列表中拉下活动。但是，如果任务列表有多个活动，SWF 只会给出其中任何一个。它可能找不到正确的。现在，您可以争辩说您可以在不同的任务列表中安排不同的审查，但这只是麻烦和乏味。

完成信号以指示“外部”事件，这非常重要。关于 Signals的[SWF 文档在](http://docs.aws.amazon.com/amazonswf/latest/developerguide/swf-dg-adv.html#swf-dev-adv-signals)谈论 Signals 方面做得很好。这是[关于如何使用 Timers 和 Signals 的 SWF 文档](http://docs.aws.amazon.com/amazonswf/latest/developerguide/swf-dg-adv-features.html#swf-dg-timers)。至于如何使用 SWF 和 Ruby，我真的帮不上忙。我仅通过使用 AWS Flow Framework 将 SWF 与 Java 结合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:44:19.550

1.  用户上传 excel 文件，执行“StartWorkflowExecution”，将决策任务排队
2.  决策工作者通知流程是新的/“第一阶段”，它安排“转换文件”活动任务
3.  活动工作者拿起任务，并执行“转换文件”活动，完成后会执行“RespondActivityTaskCompleted”，结果是“转换完成”，将决策任务排入队列
4.  决策工作者拿起决策任务，通知转换已完成并安排新的活动任务
5.  活动工作者拿起活动任务，通知它是给团队成员的（根据决策工作者在安排活动任务时给出的指示），团队成员得到通知，以某种方式执行他的动作，然后以某种方式通知将回复的活动工作者“响应活动任务已完成”

我认为不需要计时器或信号，它只是简单的流程。如果您想要重复事件、超时和/或中断流程，这两个概念很有用。

请注意，您可以通过使用任务列表来区分活动工作者（例如，用于自动化工作的活动工作者与用于人类参与者的活动工作者，等等）。

# sas - 如何在 SAS 中使用 & 和分隔符

> ID：15856053
> 
> 赞同：0
> 
> 时间：2013-04-06T21:09:09.647
> 
> 标签：sas

我想将以下 dat 文件读入 SAS。由于名称和值由 2 个空格分隔，因此我在输入语句中使用与号。但似乎`DLM='/'`infile 语句中的 in 与它冲突。有人可以告诉我代码中的错误是什么吗？

文件：

```
1118 ART CONTUCK  57.69/65.20/120.50//152.60
2287 MICHAEL WINSTONE  145.89 
```

代码：

```
data mylib.D_report;
infile Dinning dlm='/' dsd missover;
input ID 1-4 Name & $17\. M1-M6;
run; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:05:39.900

您正在混合输入样式，这虽然可以理解，因为您有相当混合的输入数据，但不允许您这样做。

您最好的选择是将 M1-6 读入一个变量，然后使用 SCAN 将其拆分。

```
data work.D_report;
infile datalines missover dlm=' ';
input ID :4.
      Name & $17\. 
      Ms :$40.;

array M[6];
do _t = 1 to countc(Ms,'/')+1;
 if _t > dim(M) then leave;
 M[_t]=scan(Ms,_t,'/','m');
end;
datalines;
1118 ART CONTUCK  57.69/65.20/120.50//152.60
2287 MICHAEL WINSTONE  145.89
;;;;
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T14:11:25.163

您只需要更改分隔符。

```
data D_report;
   dlm = ' ';
   infile cards dlm=dlm missover dsd;
   input ID 1-4 Name & $17\. @;
   dlm = '/';
   input M1-M6;
   cards;
1118 ART CONTUCK  57.69/65.20/120.50//152.60
2287 MICHAEL WINSTONE  145.89
run;
proc print;
   run; 
```

[![在此处输入图像描述](https://i.stack.imgur.com/Hpa9R.png)](https://i.stack.imgur.com/Hpa9R.png)

# delphi - 如何在主线程中执行不基于 TThread 的线程？

> ID：15856058
> 
> 赞同：5
> 
> 时间：2013-04-06T21:09:40.547
> 
> 标签：delphi

例如，来自可执行文件或 dll 中[CreateTimerQueueTimer回调提供的线程？](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682485%28v=vs.85%29.aspx)具有与主线程相同的线程 ID 很重要。

```
procedure TMyMainClass.ExecuteMe(someparam: paramtype);
begin
  {something}
end; 
```

和

```
procedure TimerCallback(pvContext: pointer; fTimerOrWaitFired: boolean); stdcall;
begin
  {do what ?}
end; 
```

`Final update:`
所有这些东西（`TThread.Synchronize`,`TThread.Queue`等`PostThreadMessage`）都通过消息起作用。因此，请确保`dll`在等待回调时托管您处理消息的应用程序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T21:20:24.350

要在主线程中执行代码，而不访问`TThread`实例，请调用类方法[`TThread.Synchronize`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TThread.Synchronize)或[`TThread.Queue`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TThread.Queue).

如果您碰巧使用的是没有这些方法的旧 Delphi 编译器，那么`SendMessage`或`PostMessage`使用用户定义的消息是最简单的解决方案。

# java - 如何停止已经播放的声音并立即开始另一个

> ID：15856074
> 
> 赞同：1
> 
> 时间：2013-04-06T21:11:53.347
> 
> 标签：java, android, audio

当用户先前选择的声音正在播放时，如何停止该声音并立即播放新选择的声音？到目前为止，我的代码只会停止新声音，但用户必须再次选择声音才能播放它。

```
public class MainActivity extends Activity {
    public MediaPlayer mediaPlayer = null;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button a = (Button) findViewById(R.id.First);
        a.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (mediaPlayer == null) {
                    mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.firstsound);
                    mediaPlayer.stop();
                }
                else {
                    mediaPlayer.start();
                    mediaPlayer = null;
                }
            }
        }
        );
        Button b = (Button) findViewById(R.id.Second);
        b.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (mediaPlayer == null) {
                    mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.secondsound);
                    mediaPlayer.stop();
                }
                else {
                    mediaPlayer.start();
                    mediaPlayer = null;
                }
            }
        }
        ); 
```

如果有帮助的话，我正在制作一个有 30 多种声音的音板。我需要对我的代码进行哪些（我认为是轻微的）更改？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:26:17.227

```
public class MainActivity extends Activity {

    public MediaPlayer mediaPlayer = null;
    public Boolean playing=false;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button a = (Button) findViewById(R.id.First);
        a.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                (playing)mediaPlayer.stop();
                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.firstsound);
                mediaPlayer.start();
                            playing=true;
            }

        });

        Button b = (Button) findViewById(R.id.Second);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                (playing)mediaPlayer.stop();
                mediaPlayer = MediaPlayer.create(MainActivity.this, R.raw.firstsound);
                mediaPlayer.start();
                            playing=true;
            }
        });
    }
} 
```

# sql - 函数内的 SQL 查询

> ID：15856076
> 
> 赞同：6
> 
> 时间：2013-04-06T21:12:20.667
> 
> 标签：sql, database, postgresql, geospatial

我正在将 PostgreSQL 与 PostGis 一起使用。我正在执行这样的查询：

```
select st_geomfromtext('point(22 232)',432) 
```

它工作正常。但现在我想通过查询获取一个值。例如：

```
select st_geomfromtext('point((select x from data_name where id=1) 232)' , 432) 
```

这`data_name`是我正在使用的一些表并`x`存储了一些值。现在查询里面被视为一个字符串，不返回任何值。
请帮忙。

```
ERROR: syntax error at or near "select" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:36:59.163

尝试这个：

```
select st_geomfromtext('point(' || x || ' 232)', 432) from data_name where id=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T09:49:15.570

Postgis 有一个`ST_MakePoint`比`ST_GeomFromText`.

```
select ST_SetSRID(ST_MakePoint(x),432) from data_name where id=1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T16:50:40.970

虽然[@muratgu 答案](https://stackoverflow.com/a/15856312/939860)通常**是要走的路**，但有一个小提示：当没有找到任何行时，
子查询会为您提供**不同的结果**`id = 1`。然后你什么也得不到（没有行），而不是：

```
select st_geomfromtext(**NULL**, 432)
```

如果您需要直接更换：

```
select st_geomfromtext('point('
                       || (select x from data_name where id=1)
                       || ' 232)' , 432) 
```

# dart - 是否可以内联 Web_UI 组件？

> ID：15856084
> 
> 赞同：0
> 
> 时间：2013-04-06T21:13:03.920
> 
> 标签：dart, dart-webui

我有把事情做到极致的习惯...

我也喜欢将网站的结构部分包装在自定义语义包装器中的想法。

所以当我开始构建 web_ui 组件时，我最终在我的主入口页面中看到了这样的内容：

```
<x-container_fluid>
  <x-header_fluid>
    <x-site_header>
    </x-site_header>
  </x-header_fluid>
    <x-old_browser>
    </x-old_browser>

    <x-home>
    </x-home>

  <x-footer_fluid>
    <x-site_footer>
    </x-site_footer>
  </x-footer_fluid>
</x-container_fluid> 
```

这就像一个魅力，一个例外是在每个页面加载上，“页面加载”和“内容加载”之间的时间间隔导致浏览器闪烁白色，直到控件呈现。

我“认为”我唯一的选择是稍微退后一点并将结构位移回根页面，而是在需要渲染/初始化周期的控件的任何地方添加“正在加载...”类型的占位符。

我想知道是否有任何方法（选择加入？）让组件在构建时将其模板编译到托管页面中？

欢迎任何和所有建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:15:38.210

> 我想知道是否有任何方法（选择加入？）让组件在构建时将其模板编译到托管页面中？

不确定这是否会为您提供所需的确切信息，但这是一种非常有趣的延迟加载技术，可能会有所帮助：

[http://googlecode.blogspot.co.uk/2009/09/gmail-for-mobile-html5-series-reducing.html](http://googlecode.blogspot.co.uk/2009/09/gmail-for-mobile-html5-series-reducing.html) [http://jsperf.com/stripoutcommentblock](http://jsperf.com/stripoutcommentblock)

汤姆

# c - 使用 IDA 创建基本堆栈溢出

> ID：15856085
> 
> 赞同：2
> 
> 时间：2013-04-06T21:13:08.397
> 
> 标签：c, security, stack-overflow, ida

该程序在我的机器上以 root 权限运行，我需要对以下代码执行堆栈溢出攻击并获得 root 权限：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <openssl/sha.h>

void sha256(char *string, char outputBuffer[65])
{
    unsigned char hash[SHA256_DIGEST_LENGTH];
    int i = 0;
    SHA256_CTX sha256;
    SHA256_Init(&sha256);
    SHA256_Update(&sha256, string, strlen(string));
    SHA256_Final(hash, &sha256);

    for(i = 0; i < SHA256_DIGEST_LENGTH; i++)
    {
        sprintf(outputBuffer + (i * 2), "%02x", hash[i]);
    }
    outputBuffer[64] = 0;
}

int password_check(char *userpass)
{
    char text[20] = "thisisasalt";
    unsigned int password_match = 0;
    char output[65] = { 0, };
    // >>> hashlib.sha256("Hello, world!").hexdigest()
    char pass[] = "315f5bdb76d078c43b8ac0064e4a0164612b1fce77c869345bfc94c75894edd3"; 

    text[0] = 'a';
    text[1] = 't';
    text[2] = 'j';
    text[3] = '5';
    text[4] = '3';
    text[5] = 'k';
    text[6] = '$';
    text[7] = 'g';
    text[8] = 'f';
    text[9] = '[';
    text[10] = ']';
    text[11] = '\0';
    strcat(text, userpass);
    sha256(text, output);

    if (strcmp(output, pass) == 0)
    {
        password_match = 1;
    }

    return (password_match == 1);
}

int main(int argc, char **argv)
{
    if (argc < 3)
    {
        printf("Usage: %s <pass> <command>\n", argv[0]);
        exit(1);
    }
    if (strlen((const char *) argv[1]) > 10)
    {
        printf("Error: pasword too long\n");
        exit(1);
    }

    if (password_check(argv[1]))
    {
        printf("Running command as root: %s\n", argv[2]);
        setuid(0);
        setgid(0);
        system(argv[2]);
    }
    else
    {
        printf("Authentication failed! This activity will be logged!\n");
    }

    return 0;
} 
```

所以我尝试用 IDA 分析程序，我看到文本段从低地址到高地址，高于我看到的数据，然后是 bss，最后是外部命令。

现在据我所知，堆栈应该就在上面，但我不确定如何查看它，我应该如何查看堆栈才能知道我在写什么？（我什至需要它还是我完全一无所知？）

第二个问题是考虑输入的长度，我如何绕过代码中的这个检查：

```
if (strlen((const char *) argv[1]) > 10)
    {
        printf("Error: pasword too long\n");
        exit(1);
    } 
```

我可以通过引用以某种方式将字符串提供给程序吗？如果是这样，我该怎么做？（再次，希望我不是完全一无所知）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T19:36:12.553

> 现在据我所知，堆栈应该就在上面，但我不确定如何查看它，我应该如何查看堆栈才能知道我在写什么？（我什至需要它还是我完全一无所知？）

栈位置一直在变化——需要看`ESP`/`RSP`寄存器的值，它的值就是栈顶的当前地址。通常，变量寻址将基于`EBP`而不是`ESP`，但它们都将指向相同的一般内存区域。

在分析过程中，IDA 为每个函数设置了一个堆栈框架，它的作用很像`struct`- 您可以在其中定义具有类型和名称的变量。这个框架总结在函数的顶部：![堆栈摘要视图](https://i.stack.imgur.com/KFh9l.jpg) 双击它或函数体中的任何局部变量将打开一个更详细的窗口。这与您无需在调试器中实际运行程序一样好。

您可以看到它就在`text`旁边`password_match`，并且从地址来看，正如人们所期望的那样，为`0x14`分配了字节。`text`但是，*这并不能保证*，编译器可以自由地改变变量，填充它们或将它们优化到寄存器中。

> 第二个问题是考虑输入的长度，我如何绕过代码中的这个检查：
> 
> ```
> if (strlen((const char *) argv[1]) > 10)
> {
>     printf("Error: pasword too long\n");
>     exit(1);
> } 
> ```

你不需要绕过这个检查，它已经够坏了。有一个错误。

如果您想自己弄清楚溢出，请停止阅读此处。

* * *

> 从到的有效索引`text`范围。在代码中，用户输入被写入从 开始的内存区域。检查允许的最大输入长度为 10 个符号 + NULL 终止符。不幸的是，这意味着包含第 9 个用户输入的符号，并且第 10 个符号 + 终止符溢出到相邻的内存空间。在某些情况下，这允许您用任意值覆盖 的最低有效字节，并用. 如果等于，则您的函数接受密码，这意味着密码中的第 10 个字符必须是（请注意，这与 不同的字符）。`text[0]``text[19]``text[11]``strlen``text[19]``password_match``0`
> `password_match``1``'\x01'``'1'`

这是 IDA 作为调试器运行的两个屏幕截图。`text`以黄色突出显示，`password_match`以绿色突出显示。

我输入的密码是`123456789\x01`。

1.  用户输入密码之前的堆栈被`strcat`'d into `text`. ![溢出前堆栈变量](https://i.stack.imgur.com/RKMov.jpg)

2.  后堆叠`strcat`。注意`password_match`改变了。 ![溢出后堆栈变量](https://i.stack.imgur.com/J50G2.jpg)

# flash-builder - Flex 移动 - 选项卡式应用程序数据 http 服务

> ID：15856087
> 
> 赞同：0
> 
> 时间：2013-04-06T21:13:12.127
> 
> 标签：flash-builder, flex-mobile

Flex 移动项目 我有一个带有 http 服务的选项卡式应用程序。我想加载数据，一旦加载，将其传递给第一个选项卡，因此第一个选项卡可以显示包含 http 服务的一些数据的列表我想使用选项卡的 firstViewData 属性（可能在未来我会向每个标签发送不同的数据）

我尝试了以下方法，但在视图上没有数据:-(在主应用程序上

```
<?xml version="1.0" encoding="utf-8"?>
<s:TabbedViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                                  xmlns:s="library://ns.adobe.com/flex/spark"
                                  xmlns:wsdatos="services.wsdatos.*"
                                  creationComplete="tabbedviewnavigatorapplication1_creationCompleteHandler(event)"
                                  applicationDPI="160">
<fx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.events.FlexEvent;
        import mx.rpc.events.ResultEvent;

        public var WS:ArrayCollection;

        protected function operation1():void
        {
            Operation1Result.token = wSDatos.Operation1();
        }

        protected function tabbedviewnavigatorapplication1_creationCompleteHandler(event:FlexEvent):void
        {
            operation1();
        }

        protected function wSDatos_resultHandler(event:ResultEvent):void
        {
            WS = event.result as ArrayCollection;
        }

    ]]>
</fx:Script>

<s:ViewNavigator label="Home" width="100%" height="100%" firstView="views.HomeView" firstViewData="{WS}"/>
<s:ViewNavigator label="Publicidad" width="100%" height="100%" firstView="views.PublicidadView"/>
<s:ViewNavigator label="Eventos" width="100%" height="100%" firstView="views.EventosView"/>
<fx:Declarations>
    <s:CallResponder id="Operation1Result"/>
    <wsdatos:WSDatos id="wSDatos" result="wSDatos_resultHandler(event)"/>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
</s:TabbedViewNavigatorApplication> 
```

在主页视图上

```
 <?xml version="1.0" encoding="utf-8"?>
   <s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="Home">
    <fx:Declarations>
            <!-- Place non-visual elements (e.g., services, value objects) here -->
        </fx:Declarations>
        <s:List width="100%" height="100%" dataProvider="{data}" labelField="Nombre"/>
    </s:View> 
```

我是 Flex 的新手，所以我可能缺少基本概念......关于如何传递数据的任何帮助？

下面的示例在没有选项卡的应用程序上工作得很好，我只是使用 navigator.pushView(views.HomeView event.result as ArrayCollection); 在函数 wSDatos_resultHandler 上（无需使用 var WS）所以我正在尝试在选项卡式应用程序上做一些类似的事情谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T15:19:55.607

您需要做的一件事是将变量 WS 标记为 [Bindable]。没有这个，数据更改时不会发送通知。

发生的事情是创建了视图并使用来自 WS 的数据（最初未指定）进行显示；然后 HTTP 请求填充 WS 返回值，但由于它未标记为 Bindable，因此不会通知视图进行更新。

# android - 检测消息中的非字典单词

> ID：15856089
> 
> 赞同：-5
> 
> 时间：2013-04-06T21:13:44.283
> 
> 标签：android

我需要检查该单词是否在字典中（拼写正确）或不在字典中（拼写错误）。我可以使用任何内置字典/拼写检查功能来实现这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:28:42.097

如果您[深入](http://developer.android.com/reference/android/view/textservice/SuggestionsInfo.html#RESULT_ATTR_IN_THE_DICTIONARY)研究 Adam 引用的文档：

如果 的值`getSuggestionsAttributes()` **等于 1**则

> 在文本服务的字典中找到了请求的单词。

但是如果 的值`getSuggestionsAttributes()` **不等于 1，**那么您可以放心地假设在字典中找不到请求的单词...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:16:01.823

Android 提供[拼写检查框架](http://developer.android.com/guide/topics/text/spell-checker-framework.html)。

# php - 在php中的mysql中插入时间戳发布值

> ID：15856091
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:13:51.463
> 
> 标签：php, mysql, time

我输入了我得到如下值的地方：

```
$water =    11/04/2013 00:00:00 
```

(日/月/年) 时:分:秒

和一个表定义：

```
CREATE  TABLE `my_to` (
    id_a        INTEGER NOT NULL PRIMARY KEY AUTO_INCREMENT,
    last_time   timestamp   ,           
    water       timestamp       
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=1; 
```

但是当我尝试进行插入时，我在表中没有得到任何价值......我应该转换一天还是什么？

假设 $water 有日期和时间值？

```
$timestamp = strtotime($water); 
```

插入表格 .... $timestamp ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:20:42.273

您可以使用 MySQL 的`STR_TO_DATE`功能：

```
INSERT INTO `table`( `date_field` )
VALUES( STR_TO_DATE( $water, '%d/%m/%Y %H:%i:%S' ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:19:05.837

您要插入的时间戳必须具有格式`YYYY-MM-DD HH:II:SS`。

您可以使用`date('Y-m-d H:i:s', strtotime($water))`.

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T21:21:57.313

mysql 中的时间戳必须是 YYYY-MM-DD HH:II:SS 格式。你可以在 php 中使用

```
Date('Y-m-d H:i:s', strtotime($water)) 
```

您还可以使用 FROM_UNIXTIME mysql 函数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T21:22:27.627

[http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html)

正确的语法是：0000-00-00 00:00:00

所以 ..

```
$time = '11/04/2013 00:00:00'; 
$time = strtotime($time);
$time = date('Y-m-d H:i:s', $time);
# INSERT TIME... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T21:23:34.513

```
water DATETIME 
```

或使用 NOW() 或 CURRENT_TIMESTAMP 填充该字段

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T21:24:34.150

请注意，`strtotime()`以格式解释该日期`mm/dd/YYYY`，而不是`dd/mm/YYYY`. 您应该以不同的格式重新排列日期（`YYYY-mm-dd`最好，恕我直言）。

# spring - 使用 Spring“context-property-placeholder”在自定义 taglib 中获取配置设置

> ID：15856097
> 
> 赞同：0
> 
> 时间：2013-04-06T21:14:45.063
> 
> 标签：spring, taglib

我正在创建一个自定义标记库，并希望使用通过底层 Spring 框架加载的一些配置选项：

```
<context:property-placeholder location="classpath:config.properties" /> 
```

如何在我的 taglib 中访问这些变量？

谢谢，

詹姆士。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:00:48.173

JSP 标签库与 Spring 上下文的生命周期没有任何共同之处，它们由 servlet 容器管理。这会使事情变得有点复杂，例如：[inject-dependency-into-a-taglib-class](https://stackoverflow.com/questions/4389773/inject-dependency-into-a-taglib-class)，[how-to-write-tag-in-my-spring-project](https://stackoverflow.com/questions/3924909/how-to-write-tag-in-my-spring-project)。

由于您只提到需要属性文件的内容，您可以使用普通的旧`java.util.ResourceBundle`（或者，如果您需要更大的灵活性，Apache Commons' `org.apache.commons.configuration.PropertiesConfiguration`）。

*（也有人可能会争辩说，要求访问标签中的配置表明存在设计问题......）*

# winapi - 使用 Win API 更改窗口的显示方式？

> ID：15856102
> 
> 赞同：5
> 
> 时间：2013-04-06T21:15:33.683
> 
> 标签：winapi

虽然我对 WinAPI 有一些经验，但我没有太多经验，所以我有一个问题想问那些在这方面有很多经验的人。我的问题是关于我们权力的极限是什么。我们能否从根本上改变窗口的显示方式？

例如，我是否可以让窗口呈现比显示器更大的屏幕尺寸并在其上平移，有点像工作区但没有分离？我可以在屏幕的顶部和底部应用失真吗？如果不可能出现失真，我可以有一个应用程序镜像窗口显示的延迟很少吗？

我遇到的最大问题是第一个问题，因为如果我可以让窗口呈现虚拟工作区并在它们之间无缝平移，那么我认为可以制作一个单独的应用程序来处理桌面镜像图像上的失真。再次为这些模糊的问题道歉，但我真的很想知道我们是否能够做到这一点，至少在理论上，在我深入学习更多关于 API 之前。如果 WinAPI 不允许，是否有另一种方法可以在 Windows 中执行此类操作？

编辑：一些澄清。我想要做的基本上是将桌面扩展到一个非常大的尺寸（还不确定确切的尺寸），无论是垂直还是水平。将大型桌面划分为特定大小的工作区，这些工作区可以无缝过渡，窗口可以移动。它将基于头部跟踪设备和/或鼠标移动转换工作空间。请注意，当我说工作区时，这可以通过放大然后平移缩放来实现。我还需要能够扭曲屏幕，例如弯曲边缘，并渲染屏幕两次。这是我想做的最低限度的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-21T15:50:33.247

是的你可以。我想出的最可行的方法是使用虚拟图形驱动程序（就像`Windows Remote Desktop`创建虚拟图形卡和虚拟显示器一样）。遗憾的是，您将无法运行一些需要高级图形 API 的程序（例如 3D 游戏、3D 建模工具等）。

有一些例子：

[http://virtualmonitor.github.io/](http://virtualmonitor.github.io/)

[https://superuser.com/questions/62051/is-there-a-way-to-fake-a-dual-second-monitor](https://superuser.com/questions/62051/is-there-a-way-to-fake-a-dual-second-monitor)

请记住，Windows 对显示分辨率有限制（对于每个和全部）。我不记得确切的数字，但它应该小于 32768*32768。

# perl - 如何在 Perl 中检查哈希中的多个键

> ID：15856108
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:16:07.670
> 
> 标签：perl

我试图找出一种将多个键存储在哈希中而不使其分层的方法。我知道如何遍历分层哈希，但是下面的示例中是否有任何内容？

我应该`my %Hash={value1, value2}{Value3}`用来获得 value1 吗？这两个值需要耦合，并且有一个分层的散列，就像`{value1}{value2}{value3}`看起来很复杂。

到目前为止，当我这样做时，`$Hash{$_ }`我将两者都`value1`放在`value2`一起，但出于我的目的，我需要检查是否存在`value1`,`value2`或两者都存在，并`if`根据存在的一个来做一个声明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:22:00.983

`$hash{$k1}{$k2}``$k1`没有意义，因为您想逐个`$k2`独立地查找。他们彼此没有任何关系。所以，你的结构显然是

```
$hash{$k} = $val; 
```

所以你的支票将是

```
if ($hash{$k1} && $hash{$k2}) {
   ...
}
elsif ($hash{$k1}) {
   ...
}
elsif ($hash{$k2}) {
   ...
} 
```

（您可能必须使用`exists($hash{...})`或`defined($hash{...})`取决于您的数据。）

# c++ - 富文本框保存文件（）

> ID：15856117
> 
> 赞同：0
> 
> 时间：2013-04-06T21:17:29.470
> 
> 标签：c++, richtextbox

如何将字符串作为路径传递到此处

```
 void SaveLogFile()
         {              
             logTxt->SaveFile(String::Concat
                 (System::Environment::GetFolderPath
                (System::Environment::SpecialFolder::Personal),                                         
                 "\\Testdoc.rtf"), RichTextBoxStreamType::RichNoOleObjs);
         } 
```

我不知道如何设置非 SpecialFolder

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:20:23.433

来自[MSDN](http://msdn.microsoft.com/en-us/library/8bf5hy2e.aspx)：

```
void SaveMyFile()
   {
      // Create a SaveFileDialog to request a path and file name to save to.
      SaveFileDialog^ saveFile1 = gcnew SaveFileDialog;

      // Initialize the SaveFileDialog to specify the RTF extention for the file.
      saveFile1->DefaultExt = "*.rtf";
      saveFile1->Filter = "RTF Files|*.rtf";

      // Determine whether the user selected a file name from the saveFileDialog. 
      if ( saveFile1->ShowDialog() == System::Windows::Forms::DialogResult::OK &&
         saveFile1->FileName->Length > 0 )
      {
         // Save the contents of the RichTextBox into the file.
         richTextBox1->SaveFile( saveFile1->FileName );
      }
   } 
```

看看`System::String^`这里是如何创建的。也这样做...

# makefile - 命令中的Makefile变量？

> ID：15856120
> 
> 赞同：0
> 
> 时间：2013-04-06T21:17:48.683
> 
> 标签：makefile

我知道 GNU make 提供了一种通过`$^`和引用目标和依赖项的方法`$@`。有没有办法引用实际的命令参数？例如：

```
foo: bar
    myscript arg1 arg2 arg3
    ls arg3 
```

我想要一种方法来执行`ls`变量，该变量是上一行的最后一个参数。显然，我可以定义一个变量`MYVAR := args`，但我正在寻找一种在 make 中执行此操作的方法，这需要手动定义变量。

# mysql - 为什么要为自动增量 ID 指定长度

> ID：15856121
> 
> 赞同：3
> 
> 时间：2013-04-06T21:17:52.153
> 
> 标签：mysql, sql

我已经使用 SQL 大约 2 年了，它一直在我的脑海中。

> 最佳实践说将列的长度分配给您所期望的

SQL 想要一个专用的特定行作为主键，但它也是 A_i 字段的最佳实践......但是分配它的长度是多少？如果留空，则默认为*11*，表示*999,999,999*

这看起来不错，但最佳实践也声明永远不要从数据库中真正清除任何内容；只需附加一个 0 或 1 来表示已删除，这是出于存档/恢复目的.. 也可用于审核用户想要清除的内容..

*举个例子：*

我有一个已经存在多年的网站，遵循不从数据库中删除任何内容的最佳实践；我的数据库/网站流量非常大，每天有大量的独立用户/访问者。

现在，如果我保留 SQL 默认长度 11，如果我的表达到最大长度，然后另一个用户决定注册，会发生什么？它会抛出一个错误并且不会继续，这会给新用户带来少量的停机时间，原因是数据库管理员必须登录到 SQL 并更改长度。这并不费力，但确实如此在早期开发过程中可以避免的努力..

* * *

我所做的，当创建一个表时给出一个*255*的长度，在我的脑海里，有些东西告诉我“这不是好的做法”，但它避免了上述示例的非常微小的可能性。

与没有指定长度的字段相比`text`，为什么就 A_I 字段而言不能相同。

不要误会我的意思，我完全理解可用的数据类型。

* * *

我通过 google 和 SO 进行了大量研究，但结果指出了有关更改表格以增加当前长度的问题。这不是我要的。

* * *

**总体：**

总的来说，我想问的是什么；A_I 字段的理想长度是多少？如果它最大化长度但同时牢记最佳实践，以最大限度地减少抛出错误的微小风险。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:43:56.343

原因很简单，
作为主键，ID 应该正好符合您的期望。
如果您指定 varchar，则缺点是索引大小较大，
这可能会降低读取和写入性能。

int(11) .. 最多存储 99,999,999,999。
它最多只能存储 2,147,483,647。

如果将其设置为无符号，
则它可以允许 4,294,967,295 条记录（40 亿！）

Facebook 的用户刚刚超过 10 亿！
所以，我不认为任何人都可以很快拥有 4 倍的用户群......

本文很好地解释了几个最佳实践：

[http://net.tutsplus.com/tutorials/other/top-20-mysql-best-practices/](http://net.tutsplus.com/tutorials/other/top-20-mysql-best-practices/)

1.  较小的列速度更快
2.  integer 是固定长度，但 varchar 不是固定长度
3.  为连接建立索引并使用相同的列类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:26:03.953

分析您的应用程序或系统。估计每天有多少用户注册？每年？一旦你知道了这一点，然后决定你想要有多“安全” - 就你希望系统运行多少年而不需要修改它而言。假设 100 年就足够了……因此，将年度用户注册的预期数量乘以 100，并确保 PK 足够大以容纳那么多值。

# c++ - 表达式模板：提高评估表达式的性能？

> ID：15856122
> 
> 赞同：5
> 
> 时间：2013-04-06T21:17:59.180
> 
> 标签：c++, templates, expression, simplify

通过表达式模板技术，矩阵表达式像

```
D = A*B+sin(C)+3.; 
```

就计算性能而言，它几乎等同于手写`for`循环。

现在，假设我有以下两个表达式

```
D = A*B+sin(C)+3.;
F = D*E;
cout << F << "\n"; 
```

`for`在表达式模板的“经典”实现中，计算性能将与两个顺序循环的计算性能几乎相同。这是因为在`=`遇到运算符后立即计算表达式。

我的问题是：是否有任何技术（例如，使用占位符？）来识别`D`实际未使用的值以及感兴趣的值是的唯一元素`F`，因此只有表达式

```
F = E*(A*B+sin(C)+3.); 
```

被评估并且整体性能相当于单个`for`循环的性能？

当然，这样的假设性技术也应该能够返回来评估表达式

```
D = A*B+sin(C)+3.; 
```

如果稍后在代码`D`中需要 的值。

预先感谢您的任何帮助。

**编辑：实验 Evgeny 建议的解决方案的结果**

原指令：

```
Result D=A*B-sin(C)+3.; 
```

计算时间：32ms

两步说明：

```
Result Intermediate=A*B;
Result D=Intermediate-sin(C)+3.; 
```

计算时间：43ms

解决方案`auto`：

```
auto&& Intermediate=A*B;
Result D=Intermediate-sin(C)+3.; 
```

计算时间：32ms。

综上所述，`auto&&`使能恢复单指令情况的原始计算时间。

**编辑：根据 Evgeny 的建议总结相关链接**

[复制省略](http://en.wikipedia.org/wiki/Copy_elision)

[汽车告诉我们什么](https://stackoverflow.com/questions/13230480/what-does-auto-tell-us)

[C++11 中的通用引用](http://accu.org/var/uploads/journals/Overload111.pdf)

[C++ 右值引用解释](http://thbecker.net/articles/rvalue_references/section_01.html)

[C++ 及以后 2012：Scott Meyers - C++11 中的通用引用](http://channel9.msdn.com/Shows/Going+Deep/Cpp-and-Beyond-2012-Scott-Meyers-Universal-References-in-Cpp11)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T21:30:56.330

当您将结果保存为某种**特殊**类型时，通常会评估[表达式模板，例如：](http://en.wikipedia.org/wiki/Expression_templates)

 **```
Result D = A*B+sin(C)+3.; 
```

表达式的结果类型：

```
A*B+sin(C)+3. 
```

不是**Result**，而是可以转换为**Result**的东西。并且评估发生在这种转换过程中。

* * *

> 我的问题是：是否有任何技术（例如，使用占位符？）来识别 D 的值实际上是未使用的

这种“转化”：

```
Result D = A*B+sin(C)+3.;
Result F = D*E; 
```

到

```
Result F = (A*B+sin(C)+3.)*E; 
```

当您不评估 D 时是可能的。为此，通常您应该将 D 捕获为真实的**表达式**类型。例如，在[**auto**](http://en.cppreference.com/w/cpp/language/auto)的帮助下：

```
auto &&D = A*B+sin(C)+3.;
Result F = D*E; 
```

* * *

但是，您应该小心 - 有时表达式模板会捕获对其操作数的引用，并且如果您有一些在它的表达式之后会过期的**右值：**

```
auto &&D = A*get_large_rvalue();
// At this point, result of **get_large_rvalue** is destructed
// And D has expiried reference
Result F = D*E; 
```

其中**get_large_rvalue**是：

```
LargeMatrix get_large_rvalue(); 
```

它的结果是**rvalue**，当**get_large_rvalue**被调用时，它在完整表达式的末尾到期。如果表达式中的某些内容将存储指向它的指针/引用（用于以后的评估）并且您将“推迟”评估 - 指针/引用将比指向/引用的对象寿命长。

为了防止这种情况，您应该这样做：

```
auto &&intermediate = get_large_rvalue(); // it would live till the end of scope
auto &&D = A*intermediate ;
Result F = D*E; 
```

* * *

> 我不熟悉 C++11，但据我了解，auto 要求编译器从变量的初始化中确定变量的类型

对，就是这样。这称为[类型推断/演绎](http://en.wikipedia.org/wiki/Type_inference)。

C++98/03 仅对模板函数进行类型推导，在 C++11 中有**auto**。

> 你知道 CUDA 和 C++11 是如何交互的吗？

我没有使用过**CUDA**（虽然我使用过**OpenCL** ），但我猜想使用 C++11的**主机**代码不会有任何问题。**设备**代码中可能不支持某些 C++11 功能，但出于您的目的 - 您只需要在**主机**代码中使用**auto**

 **> 最后，只有 C++ 有可能吗？

你的意思是 C++11 之前的版本吗？即C++98/C++03？是的，这是可能的，但它有更多的语法噪音，也许这就是拒绝它的理由：

```
// somehwhere
{
    use_D(A*B+sin(C)+3.);
}
// ...
template<typename Expression>
void use_D(Expression D) // depending on your expression template library
                         //   it may be better to use (const Expression &e)
{
    Result F = D*E;
} 
```

* * *

> 我现在在 Windows 下使用 CUDA/Visual Studio 2010。您能否为两个操作系统推荐一个编译器/工具集/环境，以便在我感兴趣的框架中使用 C++11（GPGPU 和 CUDA，你知道吗）

MSVC 2010 确实支持 C++11 的某些部分。特别是它支持**auto**。所以，如果你只需要C++11 中的**auto** - MSVC2010 就可以了。

但是如果你可以使用 MSVC2012——我建议你坚持使用它——它有更好的 C++11 支持。

> 此外，技巧 auto &&intermediate = get_large_rvalue(); 似乎对第三方用户不是“透明的”（不应该知道这样的问题）。我对吗？有什么选择吗？

如果表达式模板存储了对某些值的引用，并且您推迟了它的评估。你应该确保它的所有引用在评估的地方都是有效的。使用您想要的任何方法 - 无需自动即可完成，例如：

```
LargeMatrix temp = get_large_rvalue(); 
```

甚至可能是全局/静态变量（不太喜欢的方法）。

> 最后的评论/问题：使用 auto &&D = A*B+sin(C)+3.; 看来我应该重载 operator= 以在两个表达式之间进行赋值，对吧？

不，这种形式既不需要复制/移动赋值运算符也不需要复制/移动构造函数。

基本上它只是命名临时值，并将其生命周期延长到范围的末尾。[检查这个 SO](https://stackoverflow.com/questions/13230480/what-does-auto-tell-us)。

但是，如果您要使用另一种形式：

```
auto D = A*B+sin(C)+3.; 
```

在这种情况下，可能需要复制/移动/转换构造函数才能编译（尽管编译器可以使用[Copy Ellision](http://en.wikipedia.org/wiki/Copy_elision)优化实际副本）

> 此外，在使用 auto （用于中间表达式）和 Result 之间切换以强制计算似乎对第三方用户不透明。有什么选择吗？

我不确定是否有其他选择。这是表达式模板的本质。当你在表达式中使用它们时——它们返回一些内部中间类型，但是当你存储到一些“特殊”类型时——评估被触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T21:26:25.400

在 c++11 中，您可以使用`auto`

```
auto D = A*B+sin(C)+3.; 
```

假设您正在使用表达式模板，则 D 的类型将为`<some template type which represents an expression>`. 现在，您必须小心使用它，因为您正在节省一些内存（无需为矩阵分配空间），但取决于您如何使用它，这可能不是最好的。

想一想

F = D*E

在计算 D*E 时，需要多次“访问”元素 D[i][j]（实际上是 n 次，其中 n 是矩阵的大小）。如果 D 是纯矩阵类型，这没问题。如果 D 是一个表达式，那么您正在多次评估它。

相反，做

```
F = D + E 
```

很好。

想一想：你不能`F = E*(A*B+sin(C)+3.);`只使用两个嵌套循环来编写。****

# scheme - 计划对列表之间的交集

> ID：15856124
> 
> 赞同：0
> 
> 时间：2013-04-06T21:18:11.573
> 
> 标签：scheme, racket

我有以下列表示例，其中第一行有一个结果，第二行有一个过滤器，我只需要保留与过滤器中至少一对匹配的结果。

```
(((john . ?x) (new-york . ?city)) ((mike . ?x) (chicago . ?city)) ((mary . ?x) (london . ?city)))
(((new-york . ?city)) ((chicago . ?city)))

(((john . ?x) (new-york . ?city)) ((mike . ?x) (chicago . ?city)) ((mary . ?x) (london . ?city)))
(((john . ?x) (air-hockey . ?game)) ((mike . ?x) (tennis . ?game))) 
```

我遇到的问题是结果和过滤器都有可变数量的参数，我不知道如何一次取出一个元素进行比较。我可以使用一些提示，因为这是一个家庭作业。

Match 在第一个示例中意味着 john 和 mike，因为他们的城市与过滤器匹配。而在第二个示例中，它只会将他们玩的每个游戏添加到结果中。

虽然您必须检查第一行中的每个条目，但`match`要使其正常工作，您必须为第二行中的至少一个条目获取 #t

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:37:08.850

从您的问题中，我不清楚在这种情况下“匹配”是什么意思。让我建议您可能首先要开发一个辅助函数，该函数接受第一行中的一个元素和第二行中的一个元素，并在它们匹配时返回“true”。

另外，我肯定会先写一些测试用例:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:19:14.387

我相信这与[这里](https://stackoverflow.com/questions/15851228/intersect-more-lists-in-scheme)提出的问题相同，看看我的[回答](https://stackoverflow.com/a/15852084/201359)。

# php - 发送异步 HTTP 请求的最快方法？

> ID：15856126
> 
> 赞同：0
> 
> 时间：2013-04-06T21:18:36.427
> 
> 标签：php, http, asynchronous

我目前有一个书签，我所在部门的许多人都在使用它。该脚本获取产品 ID 列表或从当前页面收集列表并访问每个产品详细信息页面并获取各种信息。由于我没有数据库访问权限，因此无法使用查询。无论如何，我正在考虑使用 Rails 或 PHP/其他一些框架为这个 + 其他功能构建一个成熟的应用程序。最重要的是能够像 Javascript 一样发送异步 HTTP 请求。
我找到了这个项目：[http://code.google.com/p/multirequest/](http://code.google.com/p/multirequest/)，但还没有调查。解决此问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:34:02.383

请参阅此库[https://code.google.com/p/multirequest/](https://code.google.com/p/multirequest/)

它允许您使用 PHP v5+ 的 CURL 发送多个并发请求

[有一个示例脚本](https://code.google.com/p/multirequest/source/browse/trunk/example/index.php)可用，基本上可以归结为...

*   定义每个请求完成时的回调方法
*   定义每个请求的外观（标头等）
*   将每个 url 推送到`MultiRequest_Handler`班级
*   启动`MultiRequest_Handler`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T00:21:27.070

在最基本的层面上，您可以[在 PHP 中使用 multi curl](http://php.net/manual/en/function.curl-multi-exec.php)。我已经测试了多达 150 个并发请求。您需要设置超时以确保单个请求不会停止整个过程。它不是异步的，它是同时的，但它很快。

# python - 查找嵌套的整数列表的总和

> ID：15856127
> 
> 赞同：4
> 
> 时间：2013-04-06T21:18:43.443
> 
> 标签：python, python-3.x

```
import math
lists =  [1,[2,3],4]
total = 0
for i in range(len(lists)):
    total += sum(i)
print(total) 
```

我要打印出来

```
>>>10 
```

但是会抛出错误。

我希望它能够添加所有数字，包括嵌套 if 中的数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T21:22:21.680

在您的程序中，`for i in range(len(lists))`- 评估为 3，因为该`lists`对象具有 3 个元素。并且在循环中`total += sum(i)`它会尝试执行`int`+`list`操作，这会导致错误。因此，您需要检查类型，然后添加各个元素。

```
def list_sum(L):
    total = 0  
    for i in L:
        if isinstance(i, list): 
            total += list_sum(i)
        else:
            total += i
    return total 
```

这是@pavelanossov 的评论 - 以更优雅的方式做同样的事情

```
sum(sum(i) if isinstance(i, list) else i for i in L) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T21:25:43.447

您可以使用 compiler.ast 模块中的 flatten 函数来展平列表。然后简单地总结所有元素。

```
>>> lists =  [1,[2,3],4]
>>> from compiler.ast import flatten
>>> sum(flatten(lists))
10 
```

**编辑**：仅适用于 Python 2.x

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-14T13:58:30.140

numpy.hstack() 函数用于水平堆叠输入数组的序列（即按列）以制作单个数组，这是我们在 OP 示例中所需要的

```
import numpy as np 

list1 =  [1,[2,3],4]
M = np.hstack(list1) 
print(np.sum(M)) 
```

给

```
10

[Program finished] 
```

# c# - 如何将嵌套字典作为参数传递给方法？

> ID：15856130
> 
> 赞同：0
> 
> 时间：2013-04-06T21:19:37.850
> 
> 标签：c#, generics

我想要一个带有参数的方法

```
public int MyMethod(Dictionary<int, Dictionary<int,int>> myDict)
{
 ...
} 
```

但是在写这篇文章时，我收到编译失败的消息和以下解释：

> `Dictionary`找不到类型或命名空间名称2'。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:34:02.940

确保包含`using System.Collections.Generic;`在文件的顶部。或者，您可以在代码中使用完整的命名空间：

```
public int MyMethod(System.Collections.Generic.Dictionary<int, System.Collections.Generic.Dictionary<int,int>> myDict)
{

} 
```

（但我想我们都可以从中看出该`using`指令更好一些）

# servlet-3.0 - WebServlet urlPatterns 给出 404 错误

> ID：15856131
> 
> 赞同：1
> 
> 时间：2013-04-06T21:19:52.553
> 
> 标签：servlet-3.0

我试图使用 servlet Annotation 。

这是我的 servlet，如下所示，上下文名称是**Teste** 我的项目中没有任何 web.xml。

```
package com;
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
@WebServlet(name = "Mine", urlPatterns = { "/Mine" })
public class Mine extends HttpServlet {
    private static final long serialVersionUID = 1L;
    public Mine() {
        super();
        System.out.println("I am Called");
    }

    protected void doGet(HttpServletRequest request,
            HttpServletResponse response) throws ServletException, IOException {
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();
        HttpSession session = request.getSession(true);
        String str = (String) session.getAttribute("salary");
        out.println("str is" + str);
    }
} 
```

尝试在浏览器中访问时出现错误 404

![在此处输入图像描述](https://i.stack.imgur.com/Aun0N.png)

请让我知道我在哪里做错了。

# javascript - 通过变量传递函数

> ID：15856136
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:20:41.667
> 
> 标签：javascript, jquery

我有这种情况：

```
<script>
var cb;
function doSomething(c) {
    cb = c();
}

cb();
</script> 
```

但它不起作用。我想将一个变量设置为函数，以进行其他函数调用的回调..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:21:33.603

`c()`执行函数并返回一个值，您需要传递对它的引用：

```
cb = c 
```

此外，您应该调用该函数`doSomething(func)`来进行分配。

```
doSomething(function(){ alert('hello'); });
cb(); // "Hello" 
```

但是，如果您想要的是*回调*，那么您不需要全局变量：

```
function doSomething(callback) {
  // do something
  if (callback) callback();
} 
```

当您使用另一个函数作为参数运行该函数时，回调将运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:28:58.353

您需要先分配 cb 与您的功能：

```
<script>
var cb;
function doSomething(c) {
    cb = c;
}

var myFunc = function(){
   window.alert("test");
}

doSomething(myFunc);

cb();
</script> 
```

如果你这样做，`cb=c();`你将立即执行函数`c`并将值返回到，`cb`如果你想要变量`cb`作为 的结果`c`，请这样做。否则，分配而不运行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:32:50.440

您有 3 个选项可以将变量设置为函数

1.  `var fn = functionname;`
2.  `var fn = function(param){};`这将是一个匿名函数
3.  `var fn = function FunctionName(param){};`这将是一个命名函数，在调试时会派上用场，因为它会为您提供一个函数名称（`console.log(c);`

你不能像这样调用它`var returnVal = fn();`或将它传递给`var returnVal = myFunc(fn);`myFunc 调用参数的函数，让它`inFn`像`inFn();`

值得注意的是：由于此类函数与全局上下文相关，因此您可以将对象绑定到它以更改其范围。这使您`this`可以引用绑定的对象。（请注意，并非所有浏览器都支持绑定，因为它是由[ECMAScript 5](http://es5.github.com/#x15.3.4.5)定义的，但那里有相当多的 polyfill。）

*   `fn.bind(object);`

或者在另一个上下文中使用 or 调用`fn.call(object, param1, param2)`它`fn.apply(object, [param1, param2])`。很好地写在这个[指向 odetocode.com/blog 的链接上](http://odetocode.com/blogs/scott/archive/2007/07/05/function-apply-and-function-call-in-javascript.aspx)。

# ios - 在 textViewDidChange 中设置 UITextView 框架时的 contentOffset 变化

> ID：15856140
> 
> 赞同：3
> 
> 时间：2013-04-06T21:20:51.760
> 
> 标签：ios, uitextview

我正在尝试`UITextView`动态设置 a 的高度`textViewDidChange`。我让框架调整到适当的高度，但是当高度大于我设置的阈值时，textView 应该只滚动新行。但是，`contentOffset`它搞砸了，它不会向下滚动以完全包含新行。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    _textView.frame = CGRectMake(60, 100, 200, _textView.contentSize.height);
    _textView.scrollEnabled = NO;
}

- (void)textViewDidChange:(UITextView *)textView
{
    NSLog(@"Offset: %f", _textView.contentOffset.y);

    CGFloat height = _textView.contentSize.height;
    _textView.scrollEnabled = NO;

    if (_textView.contentSize.height >= 120) {
        height = 120;
        _textView.scrollEnabled = YES;
        _textView.contentOffset = CGPointMake(0, _textView.contentSize.height - _textView.frame.size.height);
    }

    CGRect frame = _textView.frame;
    frame.size.height = height;
    _textView.frame = frame;
} 
```

我想一个更简单的方法来解释正在发生的事情是这样的。在完全空白的视图控制器上，在 Storyboard 中添加一个 UITextView。然后只将这三行添加到`textViewDidChange:`

```
CGRect frame = _textView.frame;
frame.size.height = _textView.contentSize.height;
_textView.frame = frame; 
```

每隔一次 textView 的高度增加，文本不会垂直居中。如果你滚动它然后放开它会回到正确的位置。框架始终是正确的尺寸。是 contentOffset 不太正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:32:25.273

我想知道你是否可以发布一些关于你实际在做什么的代码？

我刚刚在 5.0 上尝试过这个，这很有效。

```
-(void) textViewDidChange:(UITextView *)textView {
int maxHeight = 30;
CGFloat height = [textView.text sizeWithFont:textView.font constrainedToSize:CGSizeMake(textView.frame.size.width, 99999) lineBreakMode:NSLineBreakByWordWrapping].height;

CGRect rect = textView.frame;
rect.size.height = MIN(height, maxHeight);
[textView setFrame:rect]; 
```

}

# android - 应用正交投影或平截头体影响归一化坐标？

> ID：15856146
> 
> 赞同：0
> 
> 时间：2013-04-06T21:21:10.723
> 
> 标签：android, opengl-es-2.0, coordinates, coordinate-systems, orthographic

我知道归一化坐标应该是-1（左）和+1（右）和-1（底部）和+1（顶部）

像这样：

![在此处输入图像描述](https://i.stack.imgur.com/KMdXQ.jpg)

但是在应用这个之后：

**从我的 onSurfaceChanged 方法**

```
GLES20.glViewport(0, 0, width, height);
float ratio = (float) width / height;
Matrix.orthoM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);

//The above line can be replaced with:
//Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, 3, 7);
//But I get the same results with either frustumM or otrhoM 
```

**这在我的 onDrawFrame 方法中**

```
Matrix.setLookAtM(mVMatrix, 0, 0, 0, 3, 0f, 0f, 0f, 0f, 1.0f, 0.0f);
Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0); 
```

（然后，我将 mMVPMatrix 传递到我的自定义类的 draw 方法中，在该方法中它被旋转和翻译）。

但是，我的坐标似乎发生了变化——大致是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/DvhnR.jpg)

如您所见，x 坐标有所改变，-1 和 +1 不再是屏幕的边缘（在我目前使用的设备上，外边缘变为 -1.7 和 +1.7）

Y 坐标保持不变。

如果有人能指出我哪里出错了，将不胜感激？我需要它应该是-1到+1。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T02:13:30.390

在我看来，这似乎是正确的。如果您的屏幕不是正方形，那么您确定要拉伸 x 轴使其表现得像正方形屏幕吗？因为如果你这样做了，那么如果你告诉 OpenGL 绘制一个正方形，它会在屏幕上显示为一个矩形，而不是当你的屏幕宽度比你的 x 轴边缘大于你的 y 轴边缘时如图所示，您的屏幕高度。这就是为什么您将您`ratio`的投影传递给投影，因此它知道如何正确绘制事物。

当你在屏幕上画一个规则的正方形时会发生什么？它是正方形还是长方形？

# javascript - 弹出onload骗取镜像域

> ID：15856147
> 
> 赞同：3
> 
> 时间：2013-04-06T21:21:12.080
> 
> 标签：javascript, jquery

有没有办法在镜像我控制的网站的网站上显示弹出窗口，但不显示在我控制的网站上？

背景资料：

我工作的一个网站 Safam.com 正在被另一个网站greaseonbroadway.com 镜像。我认为这是某种奇怪的错误，但事实是，当搜索 Safam 时，greaseonbroadway 在 google 中排名靠前。我已经通知谷歌这件事，但我不知道是否或何时会做任何事情。与此同时，我设置了一个 htaccess 命令来断开greaseonbroadway 上的链接。这有点有效，但不是我想要的。我需要人们知道他们在错误的网站上并将他们重定向到 Safam.com 网站。

在 htaccess 代码中，我将消息放在链接“GreaseOnBroadway.com_is_spoofing_Safam.com___Please_Go_Directly_To_Safam.com”中，但我怀疑它有多大帮助。我想做的是在greaseonbroadway 上显示一个弹出窗口，但不在safam.com 上显示。我知道信息会自动镜像，因为我设置了一个 div（应该是一个弹出窗口，没有用）说“单击此处以确保您在 SAFAM.COM 上”。Greaseonbroadway 上的屏幕截图：http://i.imgur.com/ownteeW.png[和](http://i.imgur.com/ownteeW.png)safam.com 上的屏幕截图：http: [//i.imgur.com/drUqOZr.png](http://i.imgur.com/drUqOZr.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:24:49.633

您可以完全阻止该网站访问您的网站。例如，试试这个：

```
if( location.hostname.toLowerCase() != "safam.com") {
    document.body.innerHTML = "<p>This site is illegally mirroring <a href="http://safam.com/">Safam.com</a>!</p>";
} 
```

# emacs - emacs 中的 perl 样式的正则表达式

> ID：15856154
> 
> 赞同：22
> 
> 时间：2013-04-06T21:21:38.780
> 
> 标签：emacs

有没有办法在 Emacs 中使用 perl 风格的正则表达式？我经常使用`regexp-builder`and ，`query-replace-regexp`但 Emacs 风格的正则表达式有时会让我失望。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-06T21:39:07.660

经过一番搜索，我发现了一些类似的问题：

*   [是否可以更改 emacs 的正则表达式语法？](https://stackoverflow.com/questions/879011/is-it-possible-to-change-emacs-regexp-syntax?lq=1)
*   [用于将 PCRE 正则表达式转换为 emacs 正则表达式的 Elisp 机制](https://stackoverflow.com/questions/9118183/elisp-mechanism-for-converting-pcre-regexps-to-emacs-regexps?rq=1)

看起来解决方案是编写一个 elisp 函数来将 PCRE 转换为 Emacs 样式的正则表达式。[GitHub 上的这段代码](https://github.com/joddie/pcre2el)看起来是个不错的选择。

# html - 多个徽标之间的 CSS 项目符号

> ID：15856159
> 
> 赞同：0
> 
> 时间：2013-04-06T21:22:11.593
> 
> 标签：html, css

我在`<div>`. 代码如下所示，可在 this [fiddle](http://jsfiddle.net/ueLFM/)获得。

**CSS**

```
@font-face {
    font-family:'JustVectorRegular';
    font-weight: normal;
    font-style: normal;
    src: url('fonts/justvector/justvector-webfont.eot');
    src: url('fonts/justvector/justvector-webfont.eot?#iefix') format('eot'), url('fonts/justvector/justvector-webfont.woff') format('woff'), url('fonts/justvector/justvector-webfont.ttf') format('truetype'), url('fonts/justvector/justvector-webfont.svg#webfontmuk63VQd') format('svg');
}
.social {
    padding:0;
    margin:2em 0;
    list-style:none;
    text-align: center;
}
.social li {
    display:inline-block;
    padding:0;
    margin-bottom: -3px;
}
.social li a {
    display:block;
    float:left;
    margin: 0 .1em .2em 0;
    line-height:100%;
    text-align:center;
    font-family:'JustVectorRegular';
    font-size:32px;
    padding: 8px 8px 8px 10px;
    min-width:27px;
    max-height:28px;
    color:#444;
    border-radius: 4px;
    border: 1px solid #ddd;
} 
```

**HTML**

```
<ul class="social">
    <img src="images/mine/logo.png" style="width: 75px; height: 75px;" />
    <i class="icon-remove"></i>
    <img src="images/mine/logo.png" style="width: 75px; height: 75px;" />
    <i class="icon-remove"></i>
    <img src="images/mine/logo.png" style="width: 75px; height: 75px;" />
    <i class="icon-remove"></i>
    <img src="images/mine/logo.png" style="width: 75px; height: 75px;" />
    <i class="icon-remove"></i>
    <img src="images/mine/logo.png" style="width: 75px; height: 75px;" />
    <i class="icon-remove"></i>
    <img src="images/mine/logo.png" style="width: 75px; height: 75px;" />
    <i class="icon-remove"></i>
    <img src="images/mine/logo.png" style="width: 75px; height: 75px;" />
</ul> 
```

我想通过在每个项目之间添加一个项目符号来将它们分解，但是正如代码描述的那样，它根据屏幕宽度包装了徽标，并且一行末尾的项目符号看起来是错误的。我想让代码在每个徽标之后插入一个项目符号，**除了**行尾的那个。

这可能吗？我真的被困住了，找不到任何帮助

谢谢 ：）

（如果我没有正确使用术语，请道歉 - 对我来说都是新事物）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:24:33.510

您可以`:before`为除第一个元素之外的每个元素添加伪元素：

```
LI + LI:before {content: "*"; } 
```

# c++ - 如何在 char 数组中分配特定数量的字节 - 内存管理

> ID：15856165
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:22:51.083
> 
> 标签：c++, c, arrays, char, byte

我有一个用作内存池的 char 数组。我已经标记了所有字节以表示它们是免费的/不是免费的。我的问题是如何为每个 int 分配 4 个字节的数组？

我认为这将如何工作的小例子：

```
void* block;
char memPool[50];

block = &memPool[0];
return block; 
```

如果我的想法正确，这将返回一个指向足够大以容纳 1 个字节的位置的指针。因此，也许我可以使用 void* 4 字节数组，并循环遍历字节，直到达到我传递的任何类型的大小。在我坐下来开始编码之前，我只是想把它写在纸上。

我只是在寻找一些见解。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:30:10.763

分配的内存是连续的，因此您可以使用指针遍历索引，因此您拥有整个 50 个块。

```
void* block; //the pointer
char memPool[50]; //the contiguous memory location allocated 

block = &memPool[0]; //the pointer is holding the address of 0th index, hence the whole memory location
return block; 
```

# java - 尝试在 JAX-RS Jersey REST 中使用加密时找不到页面错误

> ID：15856168
> 
> 赞同：2
> 
> 时间：2013-04-06T21:22:59.757
> 
> 标签：java, security, rest, jersey, jax-rs

我正在使用 Eclipse 来使用 Jersey 实现 REST Web 服务。我希望所有通信都在 https 中。所以，我将我的 web.xml 编辑为

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>com.myapp.server</display-name>
    <servlet>
        <servlet-name>Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.myapp.server</param-value>
        </init-param>
        <init-param>
            <param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
            <param-value>com.myapp.server.webservices.security.SecurityFilter</param-value>
        </init-param>
        <load-on-startup>5</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>Jersey REST Service</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
    <!-- Security constraint for the sample application -->
    <security-constraint id="SecurityConstraint_1">
        <!-- This defines the REST resource associated with the constraint. -->
        <web-resource-collection id="WebResourceCollection_1">
            <web-resource-name>Jersey REST Service</web-resource-name>
            <description>Protection area for Rest resource / </description>
            <url-pattern>/rest/*</url-pattern>
        </web-resource-collection>

        <user-data-constraint id="UserDataConstraint_1">
            <transport-guarantee>CONFIDENTIAL</transport-guarantee>
        </user-data-constraint>
    </security-constraint> 
```

然后在使用 normal 进行测试时`http://localhost:8080/com.myapp.server/rest/user/all`，它会重定向到`https://localhost:8443/com.myapp.server/rest/user/all`. 然后我找不到页面。我究竟做错了什么？无论如何要解决这个问题？

# java - 优雅与效率 | 爪哇

> ID：15856171
> 
> 赞同：0
> 
> 时间：2013-04-06T21:23:33.407
> 
> 标签：java, garbage-collection, performance

我是 Java 新手，我想知道什么是**更好**的**传统**编程。

当我想更改现有对象的属性时：

一种方法是简单地通过`set`函数设置值，似乎更有效：

```
anExistVar.setX(newValue);
anExistVar.setY(2);
anExistVar.setSomething(null); 
```

另一种方法是创建一个新对象（在覆盖中），看起来更优雅和清晰（给垃圾收集器留下一些工作......）：

```
anExistVar = new SomeClass(newValue, 2, null); 
```

也许答案取决于我需要更改的值的数量？也许在这种情况下没有显着的效率差异？

（我的问题是指**JAVA**或系统管理动态内存的任何语言）

我阅读了一些有关该主题的讨论，但没有得到明确的答案。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:37:22.793

第二种方式允许您使用不可变对象，这有一些优势。例如，由于不可变对象无法更改，因此您永远不必复制它们：在某些情况下这可能更有效。这使您每次需要更改值时都创建一个新对象，但是生命周期较短的对象会被 gc 高效收集。

请注意，某些语言，如 Haskell，只有不可变对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:38:22.397

一般来说，做六个月后最有意义的事情。Java 已针对垃圾收集新创建的对象进行了优化，因此在效率方面也没有太大问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:43:53.570

我认为答案取决于你究竟想在这里做什么。从概念上讲，基本问题是，程序员是否考虑在更新其成员或将其完全重新分配为程序中的*全新*实体之后的状态*？*或者它只是旧东西的*修改*版？`anExistVar`

 **如果它只是一个修改版本，你为什么要一次更新*所有*的成员变量？旧对象和新对象共享相同的名称和内存位置，但从逻辑上讲，它们之间似乎没有任何关系。但是请注意，如果您*打算*更新所有成员变量但没有这样做，您可能会*认为*旧状态和新状态之间没有关系，因此无法意识到旧状态存在一些保留。特别是，可能存在没有对应公共的私有成员变量`set`方法，因此即使这是您的意图，您也可能无法完全转换对象。简而言之，对象的这种彻底转变是令人困惑的，因为并不能立即清楚你在做什么或为什么，或者你是否真的会成功。但是，如果您认为修改后的对象本质上仍然是相同的对象（例如，具有一些原始数据），那么修改现有对象比制作部分忠实的副本更有意义。

如果您要创建一些全新的东西，那么最好将其声明为`new`对象。如果您希望旧对象和新对象之间存在某种关系，您可以使用多种技术，例如使用`static`类成员来跟踪已实例化的该类的实例总数. 或者，如果您希望新实例的构造部分由旧实例的公共属性确定，则将这些属性显式传递给构造函数。

就效率和垃圾收集器而言，可能没有理由担心任何一种方式。垃圾收集器的重点是减轻程序员显式删除事物的负担；你不能明确地控制它的行为，它的行为足够有效，你真的不必担心它。内存不足比垃圾收集器负担过重更令人担忧。在您描述的特定情况下，是的，垃圾收集器将需要删除旧对象，但这不会对收集器的效率产生重大影响。维护对不再需要的对象的引用是有问题的，因为垃圾收集器将无法收集这些对象以防您稍后引用它们；因为那不是你**从编程和逻辑的角度来看是**最清楚的。****

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T21:39:23.707

这不取决于你想要什么吗？第一个片段修改现有对象，而第二个片段创建一个新对象。对同一对象的引用将在版本 1 中看到新值，但在版本 2 中看不到。

当它只是一个参考时：第一个更冗长，因此可能更容易理解。此外，构造函数应该只取必要的东西。（否则，对象将毫无用处）过多的重载构造函数也容易造成混淆。我认为最好明确说明每项任务。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T21:42:17.373

如果您不需要具有旧属性值的旧对象，请更改它。约定是改变它。否则审稿人会追查你为什么这样做。想知道现在在哪里使用旧对象。使代码更清晰更重要。

如果在许多地方、许多请求或循环中，内存和垃圾收集器暂停将是一个问题。简而言之，如果功能允许，请更改原始文件****

# ruby-on-rails - memcached localhost / aws with rails

> ID：15856174
> 
> 赞同：0
> 
> 时间：2013-04-06T21:23:38.850
> 
> 标签：ruby-on-rails, caching, memcached, carrierwave, dalli

我正在使用 rails 并通过载波插件将图像上传到 AWS。我开始使用 memcached/dalli 缓存图像，它可以正常工作一段时间......但是一段时间后所有图像都显示为损坏（大约 20-30 分钟或使用不同的浏览器时）。

这是一个示例...缓存这组图像，其中 post.avatar_url 是图像的 AWS url。图像通常可以在没有缓存的情况下正常加载……但缓存似乎最终会导致图像损坏。

```
 <% cache ["homeimages", post] do %>
    <%= link_to image_tag(post.avatar_url), post %>
  <% end %> 
```

是什么导致图像破裂？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:32:04.877

您是将它们上传为私人还是公共？如果它们是私有的，那么在 20-30 分钟后将无法从该 url 访问它们的原因是图像上的权限令牌（由 avatar_url 方法提供）即将到期，这意味着 S3 将响应 404 file not found .

将图像公开，或尝试类似以下的方法

```
<% cache(["homeimages", post], :expires_in => 20.minutes) do %>
   <%= link_to image_tag(post.avatar_url), post %>
<% end %> 
```

20.minutes 是访问令牌最后的时间。这意味着缓存永远不会超过令牌。

编辑

您也确实意识到您不是“使用 memecached/dalli 缓存图像”，而是 img 标签？

# c# - 使用 InlineUIContainers 复制 Xaml RichTextBlock 文本

> ID：15856178
> 
> 赞同：1
> 
> 时间：2013-04-06T21:24:07.827
> 
> 标签：c#, winrt-xaml, clipboard, richtextblock

我正在处理一些`RichTextBlock`包含`InlineUIContainer`元素的对象。我希望能够选择和复制所有文本，包括`InlineUIContainer`.

目前，当我选择块中的所有文本时，`InlineUIContainer`会跳过对象中包含的文本。

这是我正在创建的示例：

```
<RichTextBlock IsTextSelectionEnabled="True">
    <Paragraph FontSize="20">
        <Bold>This text is selectable</Bold>
        <InlineUIContainer FontFamily="Global User Interface">
            <StackPanel Orientation="Horizontal">
                <TextBlock FontSize="11" VerticalAlignment="Top" Margin="0,0,-1,0">Super Script Text</TextBlock>
                <HyperlinkButton ClickMode="Release" Style="{StaticResource NoMarginHyperlinkButtonStyle}">
                    Link
                </HyperlinkButton>
            </StackPanel>
        </InlineUIContainer>
        This text is also selectable
    </Paragraph>
</RichTextBlock> 
```

如果我从这段 Xaml 中选择所有文本并将其复制/粘贴到记事本中，我不会得到超级脚本文本或链接文本。

有没有办法让所有的文本都被选中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T15:45:40.910

这是因为 HyperlinkBut​​ton 不是文档 API 的一部分，实际上是包装在 InlineUIContainer 中的 UIElement。有两种方法可以处理这个问题。

1.  切换到 Windows 8.1 和继承自 TextElement 的 Hyperlink 并复制将正常工作。
2.  如果您必须在 Windows 8 中支持此功能，这是一个艰难的方法。删除 RichTextBlock 的默认上下文菜单项并替换为您自己的复制命令。哪个应该得到 2 TextPointers 即 RichtextBlock.SelectionStart 和 RichTextBlock.SelectionEnd

现在使用 WPF，我们可以在此范围内获得 TextRange，但 winRT 不会公开它，因此您需要在代码中执行此操作...获取 RichTextBlock 中的所有块，并遍历每个块以检查它是否为 ContentStart 和 ContentEnd如果在 RTB.SelectionStart 和 RTB.SelectionEnd 内，则将它们添加到列表中。

现在应该很容易从此列表中提取所有运行和粗体/斜体以及托管 HyperlinkBut​​tons 的任何 InlineUIContainers。

# 2 这不是一个真正的好方法，因为很难在段落等上留出边距等。

# c++ - C++ random_shuffle() 行为不正常

> ID：15856180
> 
> 赞同：3
> 
> 时间：2013-04-06T21:24:08.383
> 
> 标签：c++, vector, shuffle, blackjack

我有一个二十一点程序，它使用一个充满整数的向量来模拟一副牌：

`vector<short int> deck;`

并用 1-10 填充它：

```
for (int i=0; i<=4; ++i) // Populate the deck with 1-10
{
    for (int c=1; c<=10;++c)
    {
        deck.push_back(c);
    }
}
for (i=0; i<=12;++i)
{
    deck.push_back(10); // Face cards
} 
```

然后播种随机数生成器：

```
srand(time(0)+1); 
```

并尝试用 来洗牌`random_shuffle(deckofcards.begin(), deckofcards.end());`，但是，当用户决定击中时，他们得到的牌与整个游戏完全相同，以下是一些示例输出：

```
Dealer: I'm gonna play it safe
Dealer bets $42
Dealing cards...
Dealer lays down a 5
You have a 3, and a 10 and your total is 13
Stand, or hit? Stand, or hit? hit
You have been dealt an Ace, your hand is soft, and your total is now 14
Stand, or hit? hit
You have been dealt an Ace, your hand is soft, and your total is now 15
Stand, or hit? hit
You have been dealt an Ace, your hand is soft, and your total is now 16
Stand, or hit? hit
You have been dealt an Ace, your hand is soft, and your total is now 17
Stand, or hit? hit
You have been dealt an Ace, your hand is soft, and your total is now 18
Stand, or hit? hit
You have been dealt an Ace, your hand is soft, and your total is now 19
Dealer calls stand
The dealer has a 3, a 10, an Ace , an Ace , an Ace , an Ace , an Ace , an Ace    for      total of 17, you have a 3, a 10, an Ace , an Ace , an Ace , an Ace , an Ace , an         Ace  you win 1042! 
```

如果有帮助，这是用户键入时的代码`hit`：

```
playerhand.push_back(deck.front());
ptotal+=playerhand.back();
if (playerhand.back()!=1)
cout << "You have been dealt a "<<playerhand.back()<<", your total is now"<<ptotal<<endl;
else
    cout << "You have been dealt an Ace, your hand is soft, and your total is now "<<ptotal<<endl;
dealerhand.push_back(deck.front());
dtotal+=dealerhand.back(); 
```

但是，此代码有效，但处理两张牌：

```
cout << "Dealing cards...\n";
playerhand.clear();
dealerhand.clear();
playerhand.push_back(deck.back());
deck.pop_back();
dealerhand.push_back(deck.back());
deck.pop_back();
if (dealerhand.back()==1)
    dhsoft=true;
else
    dhsoft=false;
if (playerhand.back()==1)
{
    phsoft=true;
    cout << "Your hand is soft\n";
}
else
    phsoft=false;
playerhand.push_back(deck.back());
deck.pop_back();
dealerhand.push_back(deck.back());
deck.pop_back();
if (dealerhand.back()==1)
    dhsoft=true;
else
    dhsoft=false;
if (playerhand.back()==1)
{
    cout << "Your hand is soft\n";
    phsoft=true;
}
else
    phsoft=false;
unsigned int i;
for (i=0;i<=dealerhand.size()-1; ++i)
    dtotal+=dealerhand[i];
for (i=0;i<=playerhand.size()-1; ++i)
    ptotal+=playerhand[i]; 
```

那么，为什么上面的代码可以工作，但是当用户输入“hit”的时候却不行呢？而且，更重要的是，我该如何修复它（没有代码！）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:29:43.560

它一遍又一遍地返回同一张卡片的原因是它只返回`deck.front()`对前面元素的引用，而不是删除它。但是由于`vector`没有一种方便的方法来实际移除前面的元素，我建议只移除后面的元素：

```
playerhand.push_back(deck.back());
deck.pop_back(); 
```

无论如何，套牌都是随机的，无论您从哪种方式进行交易都没关系。

# php - 当我将代码移动到函数中时，我得到一个致命错误。如何从函数调用代码

> ID：15856191
> 
> 赞同：0
> 
> 时间：2013-04-06T21:25:04.147
> 
> 标签：php, search-engine, web-crawler

这段代码有两部分：一个将文档添加到要搜索的索引中，它工作正常，一个 crawl() 函数，它是一个获取页面内容的网络爬虫，它也工作正常。

但是，我需要从 crawl() 函数内部添加一个文档。

当我在 crawl() 函数中移动添加文档的代码时，我得到一个致命错误： **致命错误：调用非对象上的成员函数 addDocument()。**

我想知道如何从 crawl 函数内部访问成员函数 addDocument() ？

现在，我有一个工作版本，其中 crawl() 函数以变量的形式返回它已抓取的内容，然后在 crawl() 函数之外的 addDocument 代码也可以访问返回的变量并将文档添加到索引就是这样。但是，只有在我抓取一个页面或没有链接的页面时，这才（逻辑上）有效。由于该函数仅在完成后才返回，并且由于它是递归跟踪页面链接的，因此它将返回的唯一内容是最后一页的内容。我需要将每个页面的内容添加为索引中的新文档。

这是上面描述的工作代码，尽可能多地评论：http: [//pastebin.com/5ngcucDp](http://pastebin.com/5ngcucDp)

这是我尝试在 crawl() 函数中移动 addDocument() 的非工作代码：http: [//pastebin.com/mUEwQJTG](http://pastebin.com/mUEwQJTG)

**如果您有涉及如何从 crawl() 函数内部访问 addDocument() 函数的解决方案，请分享。或者，如果您有一个涉及修改工作代码的解决方案，以便它返回它抓取的每个页面的内容而不是最后一页，请分享。**

如果您有任何解决方案，请分享，因为我已经筋疲力尽并且已经尝试了我所知道的一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:28:04.210

将代码移动到函数时，您将完全删除它访问同一范围内的变量的能力。在这种情况下，您可能（不会查看您的场外代码）有类似的东西`$someObject = new myClass();`，然后尝试`$someObject->addDocument()`从函数内访问它。

您需要`$someObject`作为参数传递给函数，或者您*可以*在函数内部使用`global $someObject`，尽管这不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:29:15.880

您已指定：

```
// The below line is where the error takes place.
$elasticaType->addDocument($document); 
```

是你的错误线。现在，PHP 正在尝试访问链接到的类`$elasticaType`如果您有链接的类，请使用：

```
$elasticaType = new ClassName(); 
```

如果没有，那么您应该创建一个类：

```
class Name {
   public function addDocument ($document){
         //Add document code 
         return $somevar;
    }
}

    $elasticaType = new Name();

$elasticaType->addDocument($document); 
```

# php - 用于显示点击跟踪器的 php 代码不起作用

> ID：15856196
> 
> 赞同：0
> 
> 时间：2013-04-06T21:25:25.710
> 
> 标签：php

我有这个用于在我的网站上显示的点击跟踪 php 代码：

```
<?php
if (!file_exists("config.php")) {
    header("Location: installer");
}

require_once("config.php");

//Connect to database
@$con = mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
if (!$con) {
    die("Error: Could not connect to database (" . mysql_error() . "). Check your database settings are correct.");
}

//Check database exists
$does_db_exist = mysql_select_db(DB_NAME, $con);
if (!$does_db_exist) {
    die("Error: Database does not exist (" . mysql_error() . "). Check your database  settings are correct.");
}

if (isset($_GET["id"])) {
    $id = mysql_real_escape_string($_GET["id"]);
} else {
    die("Error: ID cannot be blank.");
}

//If ID exists, show count or else die
$showinfo = mysql_query("SELECT count FROM Data WHERE id = \"$id\"");
$showresult = mysql_fetch_assoc($showinfo);
if ($showresult != 0) {
    echo $showresult["count"];
} else {
    die("Error: ID does not exist.");
}

mysql_close($con);

?> 
```

我想通过在我的 HTML 中插入此代码来显示使用此给定代码下载文件的次数，以便显示下载次数，但它不起作用：

```
<?php
$_GET["id"] = "download1";
include("indication/display.php");
?> 
```

我将该代码放在我的 HTML 中，但它没有显示数字

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:33:23.150

1）计算行数：

```
$showinfo = mysql_query("SELECT COUNT(count) FROM Data WHERE id ='$id'");
$showresult = mysql_num_rows($showinfo);
if ($showresult !== 0) { 
```

2）我认为你有一个下载链接，像这样：

```
echo '<a href=index.php?id=download>Download</a>'; 
```

3）我看不到UPDATE db（每次某人点击下载时添加一个值）

```
if (isset($_GET["id"])) {
$id = mysql_real_escape_string($_GET["id"]);
$showinfo = mysql_query("UPDATE Data SET id = '$id' + 1 "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:34:56.480

将您的查询更改为

```
'SELECT COUNT(1) FROM Data WHERE id = '.intval($id) 
```

这比 COUNT(id) 快，非常非常小。

正如大家所说，请使用 PDO。

# graphics - 如何计算从一个向量旋转到另一个向量所需的角度？

> ID：15856203
> 
> 赞同：1
> 
> 时间：2013-04-06T21:26:46.630
> 
> 标签：graphics, vector, 3d

我有两个归一化向量：A) 0,0,-1 B) 0.559055,0.503937,0.653543

我想知道，将向量从 0,0,-1 带到 0.559055,0.503937,0.653543 需要绕轴旋转多少？

我将如何计算这个？例如，在 X 轴 40 度和 Y 轴 220 上旋转（这只是示例，但我不知道该怎么做）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:29:12.933

看看[这个](http://www.wikihow.com/Find-the-Angle-Between-Two-Vectors)。（谷歌是个好东西）

这会计算两个向量之间的角度。如果向量 A 是 (ax, ay, az) 而
向量 B 是 (bx, by, bz)，那么

它们之间的角度余弦为：

```
 (ax*bx + ay*by + az*bz)
    --------------------------------------------------------
    sqrt(ax*ax + ay*ay + az*az) * sqrt(bx*bx + by*by + bz*bz) 
```

要计算投影到 xy 平面上的两个向量之间的角度，只需忽略 z 坐标。

xy 平面内角的余弦 =

```
 (ax*bx + ay*by)
    --------------------------------------
    sqrt(ax*ax + ay*ay) * sqrt(bx*bx + by*by 
```

同样，要计算两个向量在 xz 平面中的投影之间的角度，请忽略 y 坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T07:50:23.707

听起来您正在尝试将笛卡尔坐标 (x,y,z) 转换为球坐标 (rho,theta,psi)。

由于它们都是单位向量，因此半径*rho*将为 1。这意味着您的大小也将为 1，您可以跳过整个分母而只使用点积。

对于您的第一个示例 (0,0,-1)，在 X/Y 平面（围绕 Z 轴）旋转将非常困难，因为它在 X 或 Y 上没有延伸。所以没有什么可以旋转的。

(0,0,-1) 与 (1,0,0) 或 (0,1,0) 成 90 度。如果将 x 轴作为 theta 的 0 角，则*通过**在*( x,y,z) 和 (x,y, 0)，*然后*您可以跳过点积并使用 atan2(y,x) 获得 theta（x/y 旋转）。

当心[万向节锁](http://en.wikipedia.org/wiki/Gimbal_lock)可能会导致问题。

# python - 我有一个字符串需要放入一个对象中，但我无法让它工作

> ID：15856204
> 
> 赞同：0
> 
> 时间：2013-04-06T21:26:50.747
> 
> 标签：python

我得到一个字符串：“{{39.830000, -98.580000}, {20.265710, 64.589962}}” 之后，我试图让它获取所有数字并将其放入变量中，但它似乎不起作用。

我试着做

```
t = mystring.split("}, {");
t[0].split(","); #etc... 
```

和一堆其他的东西......但似乎不起作用。

我试图将 4 个浮点数放入变量 a、b、c 和 d

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T21:30:18.527

这个怎么样：

```
>>> import ast
>>> s = "{{39.830000, -98.580000}, {20.265710, 64.589962}}"
>>> s = s.replace("{", "[").replace("}", "]")
>>> l = ast.literal_eval(s)
>>> l
[[39.83, -98.58], [20.26571, 64.589962]] 
```

现在您已经将所有值作为`float`s 保存在一个不错的、可索引的`list`.

如果你愿意，你可以这样做

```
>>> (a, b), (c, d) = l   # Thanks Lev!
>>> a
39.83
>>> # etc. 
```

# javascript - 如何循环复选框选择

> ID：15856207
> 
> 赞同：0
> 
> 时间：2013-04-06T21:27:11.430
> 
> 标签：javascript, jquery, asp.net, webforms, checkbox

嘿，伙计们，我只是简要介绍一下我正在尝试做的事情。我有一个正在处理的网络表单项目。用户将从他们想要生成的各种图像中进行选择，然后这会将他们带到我设置的打印页面。我的问题真的是我怎样才能做到，所以当他们选择例如 5 个复选框时，就会创建一个计数器。我需要这样做，因为我需要他们选择的项目的值（名称和 ID），以便我可以通过我的 rendor 方法为他们选择的每个项目运行它。如果我需要澄清任何事情或提供代码让我知道，任何见解都会很棒。谢谢！

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

<html xmlns="http://www.w3.org/1999/xhtml">
<head><meta name="HandheldFriendly" content="True" /><meta name="MobileOptimized" content="320" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link href="../Style/bootstrap.min.css" rel="stylesheet" />
    <link href="../Style/bootstrap-responsive.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../responsive.css" /> 
    <link href="../Style/custom.css" rel="stylesheet" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js" type="text/javascript"></script>    
    <script src="../Scripts/bootstrap.min.js"></script>
    <script src="../Scripts/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        <style>
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>

<title>
    Tag Manager - Microsoft Tagger
</title></head>
<body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->    
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../index.aspx">Microsoft Tagger</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="active"><a href="../../index.aspx">Home</a></li>
                            <li><a href=AddDevice.aspx>Create Tags</a></li>
                            <li><a href="Tagmanager.aspx">Tag Manager</a></li>
                            <li><a href="../../Pages/AddUsers/">User Management</a></li>
                            <li><a href="Settings.aspx">Settings</a></li>
                        </ul>
                       <p class="navbar-form pull-right"><a id="Login" class="btn" href="../../Pages/Login">Sign in</a></p>

                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>  

    <form method="post" action="Tagmanager.aspx" id="form1">
<div class="aspNetHidden">
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="kySKwYuYhADD7C7+Jm7X9fUBwjV+kIHbMCI0kvXuSfynnBUPeh4pnGsODmU3CAfbMp1TeQ8r8F9jt9/QJRshNrAFDPrHwcvFsa0P1B47SvP0R4o5mzuybq/mD3zJJndCYd2fJsQIKewHI1K4KSaLK26prYNaJEM6+czXb7Tb1CwnOKg/T2YePZ74nbS4655EF12gaSG4A54rsMmjQUjjLzZ7OZ5CKXvKh3Rd3c9PBQTDpcmIzBdahQNzjydsJEhQCNAizCaH0rXEcgkL1OzIjyyfqD+O0LiK7CxtJ53xgMjtSIO/KEqJ9Wk0lssvfj6wPWxa7/y+r3oRH4XyAqtS3UisNvouSTEBb1skfXjgeaw8Xmyivx4JurRPZW+6qn4tEYrO6HjZ3HPXy2F2JjSS2V7YLS5An7no2hKl7W+nDQxQS+ghVEj5REyXSl1g/GBnYHbAM2L37070hVrv0UjItBVIp8wPdBkU70utht2ax2K3K99l6IF2M3d1ruMROiIPJKPy8pFZfN51cUyw36X5cRCMaotCGia88ebTUn2HbWx5Ehjv2dNRkRRG6zVe5HuuOiBGPgcuDKQyS/r/PtuwGegDEGnS+sXICji2fX58lxpSvuIQkKb4Z3UItbesK3pdBTn9JwHyOgQZLJtV7l6lmoUOoC+PQ7Xtk1AViPJG41aSlbY5F+9ufVM6+LtkTLMoGHHDdrLI0xwn1h+iuh1mrWObUy+WMbmr2Jw89f+YHD0kuM9bjwXgeDM7wJvTSpDDjJwiFG0JGXBBBAv4QEtitDSOaZDwbTukpnX1iUHaaaWb/OGdcQXPdzhjftBlFqNPxHtFl6kAtfsW8k+azjKYt+KWrn5JA8fa5r9HVWhBt0UuTbva2JFZSniVC6HBu1azifl6u/U4zOftyeEm83Qvkau0KhqmohRXNMQQpnGNXcFwCUWSgo7kSCWlkUXyhfq4G9SiJkaSS/h/DFzXy7RxA9COWWZkPcFxkDIL5u/vjTJEa3ZNEP5mjQocDSOXvXXZ2Mk2DIVuR9rPc+VNxh/WD7ocNcoNGtT7JDxy7r7sreVcu0/WGoMdM4e2BaR9CUFzM6i1KC3zHLeyK1T+ObeVBapwzmFZmtqJrgd7gQmxjjhsoipQzeiCXVhONL5rRuEY9Qew6qwBCT69oJchNx6yvw==" />
</div>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['form1'];
if (!theForm) {
    theForm = document.form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

<div class="aspNetHidden">

    <input type="hidden" name="__VIEWSTATEENCRYPTED" id="__VIEWSTATEENCRYPTED" value="" />
    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="0U4EGzWCcoTaWrHPEXFALcyG6KeUGI5GzpVV1Quz301fDa3jk60YWGJFj9oyrhtGDQH0ePQh4WaGqNELyjnORNWQ9hnQ+XXnNPk2CbYzJPDboBMa8xsieJfP7kX16ZH/1Q1Mt+s7B1Zt96GBDByuGCYapMWTWE98P++r1iMP/t584oI6LrnBugV6Vd/KNp57q1Z7ynCsD7xE/hVjlPlIromSrxk36YUgYsaEBE3uSYUpIotu1r+LIhRCLGcaf0Pytoto5/Hqm7jWZaqcAzWFFOPbKtskfvkw2iPY8hbUXLI=" />
</div>
    <div class="container">

    <br/><br />
            <select name="ctl00$ContentPlaceHolder1$ddListDeviceType" onchange="javascript:setTimeout(&#39;__doPostBack(\&#39;ctl00$ContentPlaceHolder1$ddListDeviceType\&#39;,\&#39;\&#39;)&#39;, 0)" id="ContentPlaceHolder1_ddListDeviceType">
    <option selected="selected" value="0">All</option>
    <option value="2">Desktop</option>
    <option value="3">Laptop</option>
    <option value="4">Tablet</option>
    <option value="5">Other</option>

</select>

    <div>
    <table class="table table-bordered table-hover" cellspacing="0" rules="all" border="1" id="ContentPlaceHolder1_gvProducts" style="border-collapse:collapse;">
        <tr>
            <th scope="col">Name</th><th scope="col">Location</th><th scope="col">Status</th><th scope="col">Product Type</th><th scope="col">Options</th><th scope="col">Options</th><th scope="col">&nbsp;</th>
        </tr><tr>
            <td>Surface RT</td><td>Device Bar</td><td>Inactive</td><td>Tablet</td><td><a class="btn btn-primary" href="EditPage.aspx?id=10">Edit</a></td><td><a class="btn btn-danger" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$gvProducts&#39;,&#39;Delete$0&#39;)">Delete</a></td><td>
                    <input value='Surface RT,QsTD4zibjE' type="checkbox" />

                </td>
        </tr><tr>
            <td>Dell Desktop</td><td>Device Bar</td><td>Active</td><td>Desktop</td><td><a class="btn btn-primary" href="EditPage.aspx?id=11">Edit</a></td><td><a class="btn btn-danger" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$gvProducts&#39;,&#39;Delete$1&#39;)">Delete</a></td><td>
                    <input value='Dell Desktop,sg49r6lnm0' type="checkbox" />

                </td>
        </tr><tr>
            <td>VAIO Duo 11 Ultrabook</td><td>Device Bar</td><td>Active</td><td>Tablet</td><td><a class="btn btn-primary" href="EditPage.aspx?id=17">Edit</a></td><td><a class="btn btn-danger" href="javascript:__doPostBack(&#39;ctl00$ContentPlaceHolder1$gvProducts&#39;,&#39;Delete$2&#39;)">Delete</a></td><td>
                    <input value='VAIO Duo 11 Ultrabook,zz3JBGxdIU' type="checkbox" />

                </td>
        </tr>
    </table>
</div>

        <hr>enter code here
            <footer>
                <p>&copy; Company 2012</p>
            </footer>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:31:04.933

```
$(".myCheckBox").click(function(){
    var count = $(".myCheckBox:checked").length;
   if(count == 5)
     //do something..
}); 
```

这假设您的复选框具有“myCheckBox”类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:36:20.153

一旦选中（或未选中）就计算任何选中的复选框..试试这个[http://jsfiddle.net/U7H3s/](http://jsfiddle.net/U7H3s/)

```
$('input[type=checkbox]').click( function(){
   $('#countChecked').html($('input[type=checkbox]').filter(':checked').length);
}); 
```

# python - 对于 python Pandas/numpy，R 的 match() 等价于什么？

> ID：15856213
> 
> 赞同：7
> 
> 时间：2013-04-06T21:28:12.170
> 
> 标签：python, r, merge, pandas, match

我是一个 R 用户，我无法弄清楚 match() 的 pandas 等价物。我需要使用此函数遍历一堆文件，获取关键信息，并将其合并回“url”上的当前数据结构。在 R 我会做这样的事情：

```
logActions <- read.csv("data/logactions.csv")
logActions$class <- NA

files = dir("data/textContentClassified/")
for( i in 1:length(files)){
    tmp <- read.csv(files[i])
    logActions$class[match(logActions$url, tmp$url)] <- 
            tmp$class[match(tmp$url, logActions$url)]
} 
```

我认为我不能使用 merge() 或 join()，因为每次都会覆盖 logActions$class。我也不能使用 update() 或 combine_first()，因为它们都没有必要的索引功能。我还尝试基于[此 SO post](https://stackoverflow.com/questions/4110059/pythonor-numpy-equivalent-of-match-in-r)制作 match() 函数，但无法弄清楚如何使其与 DataFrame 对象一起使用。抱歉，如果我遗漏了一些明显的东西。

下面是一些 Python 代码，总结了我在 pandas 中执行 match() 之类的无效尝试：

```
from pandas import *
left = DataFrame({'url': ['foo.com', 'foo.com', 'bar.com'], 'action': [0, 1, 0]})
left["class"] = NaN
right1 = DataFrame({'url': ['foo.com'], 'class': [0]})
right2 = DataFrame({'url': ['bar.com'], 'class': [ 1]})

# Doesn't work:
left.join(right1, on='url')
merge(left, right, on='url')

# Also doesn't work the way I need it to:
left = left.combine_first(right1)
left = left.combine_first(right2)
left 

# Also does something funky and doesn't really work the way match() does:
left = left.set_index('url', drop=False)
right1 = right1.set_index('url', drop=False)
right2 = right2.set_index('url', drop=False)

left = left.combine_first(right1)
left = left.combine_first(right2)
left 
```

所需的输出是：

```
 url  action  class
0   foo.com  0   0
1   foo.com  1   0
2   bar.com  0   1 
```

但是，我需要能够一遍又一遍地调用它，这样我就可以遍历每个文件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-07T18:35:18.360

请注意`pandas.match`which 的存在正是 R`match`所做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:36:59.913

**编辑**：

如果所有正确数据帧中的 url 都是唯一的，您可以将正确的数据帧作为由`class`索引的 Series `url`，然后您可以通过索引它获取左侧每个 url 的类。

```
from pandas import *
left = DataFrame({'url': ['foo.com', 'bar.com', 'foo.com', 'tmp', 'foo.com'], 'action': [0, 1, 0, 2, 4]})
left["klass"] = NaN
right1 = DataFrame({'url': ['foo.com', 'tmp'], 'klass': [10, 20]})
right2 = DataFrame({'url': ['bar.com'], 'klass': [30]})

left["klass"] = left.klass.combine_first(right1.set_index('url').klass[left.url].reset_index(drop=True))
left["klass"] = left.klass.combine_first(right2.set_index('url').klass[left.url].reset_index(drop=True))

print left 
```

这是你想要的吗？

```
import pandas as pd
left = pd.DataFrame({'url': ['foo.com', 'foo.com', 'bar.com'], 'action': [0, 1, 0]})
left["class"] = NaN
right1 = pd.DataFrame({'url': ['foo.com'], 'class': [0]})
right2 = pd.DataFrame({'url': ['bar.com'], 'class': [ 1]})

pd.merge(left.drop("class", axis=1), pd.concat([right1, right2]), on="url") 
```

输出：

```
 action      url  class
0       0  foo.com      0
1       1  foo.com      0
2       0  bar.com      1 
```

如果左边的类列不全是 NaN，你可以将它与结果结合起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T02:42:31.607

这是我最终使用的完整代码：

```
#read in df containing actions in chunks:
tp = read_csv('/data/logactions.csv', 
  quoting=csv.QUOTE_NONNUMERIC,
  iterator=True, chunksize=1000, 
  encoding='utf-8', skipinitialspace=True,
  error_bad_lines=False)
df = concat([chunk for chunk in tp], ignore_index=True)

# set classes to NaN
df["klass"] = NaN
df = df[notnull(df['url'])]
df = df.reset_index(drop=True)

# iterate over text files, match, grab klass
startdate = date(2013, 1, 1)
enddate = date(2013, 1, 26) 
d = startdate

while d <= enddate:
    dstring = d.isoformat()
    print dstring

    # Read in each file w/ classifications in chunks
    tp = read_csv('/data/textContentClassified/content{dstring}classfied.tsv'.format(**locals()), 
        sep = ',', quoting=csv.QUOTE_NONNUMERIC,
        iterator=True, chunksize=1000, 
        encoding='utf-8', skipinitialspace=True,
        error_bad_lines=False)
    thisdatedf = concat([chunk for chunk in tp], ignore_index=True)
    thisdatedf=thisdatedf.drop_duplicates(['url'])
    thisdatedf=thisdatedf.reset_index(drop=True)

    thisdatedf = thisdatedf[notnull(thisdatedf['url'])]
    df["klass"] = df.klass.combine_first(thisdatedf.set_index('url').klass[df.url].reset_index(drop=True))

    # Now iterate
    d = d + timedelta(days=1) 
```

# ruby-on-rails - 如何设置 Rails 视图以显示具有特定表值 = true 的所有帖子？

> ID：15856214
> 
> 赞同：0
> 
> 时间：2013-04-06T21:28:24.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

首先，这是参考表的架构

```
create_table "microposts", :force => true do |t|
    t.text     "content"
    t.integer  "user_id"
    t.datetime "created_at",                         :null => false
    t.boolean  "review",          :default => false 
```

我想创建一个视图，允许管理员查看 review = true 的所有帖子，然后允许管理员**批准或删除**单个帖子。

**更新** 我将此添加到用户控制器中

```
class UserController < ApplicationController
def review
    @microposts = Micropost.where(review: true)
  end 
```

这是我到目前为止的 review.html.erb

```
 <% provide(:title, 'Review Shares') %>

<% if signed_in? && if current_user.admin? %>
<% @microposts.each do |mpost| %>
    <%= link_to "delete", "/micropost/#{mpost.id}", method: :delete,
                                 confirm: "You sure?",
                                 title: mpost.content %>
  <% end %>
<% end %>
  <% end %> 
```

我怎样才能让它实际显示帖子，并选择将其“评论”值更改为 false？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:48:30.617

你必须在你的控制器的一个动作中有这样的东西

```
 @microposts = Micropost.where(review: true) 
```

然后你可以做类似的事情：

```
 <% @microposts.each do |mpost| %>
   <%= mpost.content %>
   <%= link_to "review", "/microposts/#{mpost.id}/review" , :remote=>true %>
   <%= link_to "delete", "/microposts/#{mpost.id}", method: :delete,
                                 confirm: "Confirm delete",
                                 title: mpost.content %>
  <% end %> 
```

在您的路线文件中：

```
match "/microposts/:id/review" => "microposts#review" 
```

然后在 microposts_controller.rb 中：

```
def review
  @micropost = Micropost.find(params[:id])
  @micropost.review = true
  @micropost.save
  render :js=>"alert('reviewed = true');"
end 
```

或者

```
def review
  @micropost = Micropost.find(params[:id])
  @micropost.review = true
  @micropost.save
end 
```

并添加以下文件：

app/views/microposts/review.js.erb

在那个文件中放：

```
alert('reviewed = true'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:35:48.910

你可以创建一个范围

```
scope :reviewed, where(:review => true) 
```

`Model.reviewed`将返回 review 为 true 的所有记录。

```
@reviewed_microposts = Micropost.reviewed (assuming the model name is Micropost) 
```

此实例变量可以在视图中迭代并显示。

# java - POST 请求的 HttpURLConnection App Engine Java 示例不起作用

> ID：15856215
> 
> 赞同：2
> 
> 时间：2013-04-06T21:28:24.583
> 
> 标签：java, google-app-engine, post, httpurlconnection, urlfetch

我正在尝试在应用引擎应用程序下使用 urlfetch 执行 POST 请求。

[我已按照从 App Engine 文档（此处为https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet](https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet)）的“使用 HttpURLConnection”部分下的简单示例中提取的说明（和代码）进行操作.

```
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLEncoder;
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.IOException;
import java.io.OutputStreamWriter;

    String message = URLEncoder.encode("my message", "UTF-8");

    try {
        URL url = new URL("http://httpbin.org/post");
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoOutput(true);
        connection.setRequestMethod("POST");

        OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());
        writer.write("message=" + message);
        writer.close();

        if (connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
            // OK
        } else {
            // Server returned HTTP error code.
        }
    } catch (MalformedURLException e) {
        // ...
    } catch (IOException e) {
        // ...
    } 
```

为了测试这个 POST 请求，我使用了以下网站“ [http://httpbin.org/post](http://httpbin.org/post) ”。

获取和连接有效 - 但是，连接作为 GET 而不是作为 POST 发送。

这是我对此请求的回复：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<title>405 Method Not Allowed</title>
<h1>Method Not Allowed</h1><p>The method GET is not allowed for the requested URL.</p> 
```

有人遇到过这个问题吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-17T22:20:09.480

由于这个问题在 3 年后仍然获得相当多的意见，我将在此确认[文档示例中给出的方法适用于](https://developers.google.com/appengine/docs/java/urlfetch/usingjavanet)向给定 URL 发出 POST 请求，并且自此问题首次发布以来一直保持不变。工作代码示例如下：

```
String message = URLEncoder.encode("my message", "UTF-8");

URL url = new URL("http://httpbin.org/post");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
conn.setDoOutput(true);
conn.setRequestMethod("POST");

OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());
writer.write("message=" + message);
writer.close();

StringBuffer responseString = new StringBuffer();
String line;

BufferedReader reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
while ((line = reader.readLine()) != null) {
    responseString.append(line);
}
reader.close(); 
```

收到以下回复：

```
Code: 200, message: { "args": {}, "data": "", "files": {}, "form": {
"message": "my message" }, "headers": { "Accept-Encoding": 
"gzip,deflate,br", "Content-Length": "18", "Content-Type": 
"application/x-www-form-urlencoded", "Host": "httpbin.org", "User-Agent": 
"AppEngine-Google; (+http://code.google.com/appengine; appid: s~ 
<redacted>)", "X-Cloud-Trace-Context": ",<redacted>" }, "json": null, 
"origin": "107.178.194.113", "url": "http://httpbin.org/post"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T18:30:24.640

您是否尝试过调用 OutputStreamWriter 的 flush() 方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T15:05:29.377

也许您必须设置内容类型请求属性：

```
connection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
```

# android - 在继续代码之前如何等待 AnimationDrawable 结束？

> ID：15856217
> 
> 赞同：0
> 
> 时间：2013-04-06T21:28:33.547
> 
> 标签：android, animation

所以我有一个 AnimationDrawable 可以在屏幕上将一个角色移动一个空间。动画效果很好，但我需要阻止 GUI 的其余部分刷新屏幕。基本上当地图移动时，游戏必须刷新屏幕才能更新新位置。重绘代码在游戏类中，动画在显示实际游戏板的 gridview 的图像适配器中。这是有问题的两行代码。

```
 playerAdapter.animateLeft();
    redraw(); 
```

第一行调用适配器，它有两个需要发生的动画，都需要 700 毫秒。然后，重绘更新板本身。问题是，重绘不等待动画。我试过使用 sleep 和类似的东西，但这只是暂停了整个该死的事情，没有任何反应。我想我需要使用线程或处理程序，但我不确定它是如何工作的。有任何想法吗？非常感谢所有帮助:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-06T21:32:23.063

尝试：

```
YourAnimation.setAnimationListener(new Animation.AnimationListener() {
    @Override
    public void onAnimationStart(Animation animation) { }

    @Override
    public void onAnimationEnd(Animation animation) {
        //Ended
    }

    @Override
    public void onAnimationRepeat(Animation animation) { }
}); 
```

编辑：哎呀。没有阅读可绘制部分。这是我用来检查所有帧是否都结束的递归函数：

```
 private void checkIfAnimationDone(AnimationDrawable anim){
        final AnimationDrawable a = anim;
        int timeBetweenChecks = 300;
        Handler h = new Handler();
        h.postDelayed(new Runnable(){
            public void run(){
                if (a.getCurrent() != a.getFrame(a.getNumberOfFrames() - 1)){
                    checkIfAnimationDone(a);
                } else{
                    Toast.makeText(getApplicationContext(), "ANIMATION DONE!", Toast.LENGTH_SHORT).show();
                }
            }
        }, timeBetweenChecks);
    }; 
```

您还可以记录开始动画的时间，并将持续时间（您事先知道）添加到其中以获得结束时间。但是，这可能不准确，因为设置和启动动画也需要一些时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T14:45:38.227

另一个有趣的解决方案：

```
animation.start();
long totalDuration = 0;
for(int i = 0; i< animation.getNumberOfFrames();i++){
     totalDuration += animation.getDuration(i);
}                      
Timer timer = new Timer();
TimerTask timerTask = new TimerTask(){
     @Override
         public void run() {
              animation.stop();
    }
 };
timer.schedule(timerTask, totalDuration); 
```

# css - Margin Auto 需要居中

> ID：15856221
> 
> 赞同：0
> 
> 时间：2013-04-06T21:28:42.753
> 
> 标签：css, alignment, margin, center

这是我的代码我试图让它在页面中间居中

```
 <!DOCTYPE html>
<html lang="en">
<head>
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
<title>cp</title>
</head>
<body>
<div class="well">
  <font face="arial" size="5" color="#000000"><center><b>Control Panel</font></center>
</div>
</style>

<style type="text/css">
.span12{
background: lightblue;
color: while;
padding: 9px 0;
border-radius:5px;
text-align: center;
border: 1px #00BFFF solid;
margin: 0px auto;
width: 50%;
margin-top: 25%;
}
</style>
<div class="span12">
Welcome
</div>
<script src="js/bootstrap.js"></script> 
```

它随页面重新调整大小，但我无法将整个内容放在页面的中心。我只想把整个东西放在页面中间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:39:58.910

删除`center`标签并设置`margin-top:25%`，它将解决您的问题。

**CSS**

```
.span12{
background: lightblue;
color: while;
padding: 9px 0;
border-radius:5px;
text-align: center;
border: 1px #00BFFF solid;
margin: 0px auto;
width: 50%;
margin-top:25%; /* new */
} 
```

**HTML**

```
<div class="span12">
Welcome
</div> 
```

**[jsFiddle 现场演示](http://jsfiddle.net/ejway/)**

# delphi - Delphi ListView OnSelectItem 触发两次

> ID：15856225
> 
> 赞同：1
> 
> 时间：2013-04-06T21:29:05.777
> 
> 标签：delphi

ListView 的 OnSelectItem 事件触发两次。ListView 在 VsReport 模式下是虚拟的。如何防止这种行为或有更好的解决方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T21:45:44.497

该事件正在触发选择和取消选择。如果选择了节点 X 并且您选择了节点 Y，它将报告：

1.  节点 X 选择=false
2.  节点 Y 选择=true

您可以通过以下方式使行为可见：

> ```
> procedure TForm5.ListView1SelectItem(Sender: TObject; Item: TListItem;
>   Selected: Boolean);
> begin
>   Showmessage(Item.Caption +' - '+IntToStr(Integer(Selected)));
> end; 
> ```

如果您只想对选择做出反应，请评估`Selected`。

# c++ - 检查数字在 C++ 中是否为素数

> ID：15856228
> 
> 赞同：-2
> 
> 时间：2013-04-06T21:29:16.913
> 
> 标签：c++, arrays, algorithm, primes

我正在做一个在线挑战，遇到了一个问题！我已经在纸上制定了逻辑，但似乎我的问题不起作用。它所做的只是返回 0 作为输出。

到目前为止我的代码：

```
#include <iostream>

using namespace std;

int main()
{
    int n;
    cin >> n;
    int nums[50];
    string res[50];
    int o = 0;
    for(int i=0;i<n;i++)
    {
        cin >> nums[i];
    }
    for(int i=0;i<n;i++)
    {
        int deliteli=1;
        for(int j=1;j<=nums[i];j++)
        {
            if(nums[i]%j==0)
            {
                deliteli++;
            }
        }
        if(deliteli == 2){
            res[0] = "YES";
            o++;
        }
        else if(deliteli != 2){
            res[0] = "NO";
            o++;
        }
    }
    for(int i=0;i<o;i++)
    {
        cout << res[i] << endl;
    }
    return 0;
} 
```

我正在做的是首先输入 N 个数字，这意味着数组将是多长时间，然后检查数组中的每个数字是否为素数。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:32:17.687

```
for(int j=1;j>=nums[i];j++)
{
   ...
} 
```

看来您的循环条件错误。它应该是：

```
for(int j=1;j<=nums[i];j++) //Change here
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T21:34:47.540

要检查是否`nums[i]`可以除以`j`您正在做的事情`j%nums[i]==0`，但必须如此`nums[i]%j==0`。

你的`deliteli`柜台也有问题。您需要为每个数字重新初始化它，否则它只会添加到它。

你也一直在设置`res[0]`，但你想设置`res[i]`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T21:41:10.837

*   `deliteli`应该从 0 开始。

*   `deliteli`应在循环开始时重置。

*   您使用`res[i]`而不是`res[0]`，否则您将继续覆盖第一个元素。

*   `j%nums[i]`应该是`nums[i]%j`，因为`a%b`返回除以的余`a`数`b`。

*   `'`仅适用于单个字符（C++ 非常乐意允许不应该编译和运行的东西）。`"`用于字符串。

最终代码：

```
#include <iostream>

using namespace std;

int main()
{
    int n;
    cin >> n;
    int nums[50];
    string res[50];
    int o = 0;
    for(int i=0;i<n;i++)
    {
        cin >> nums[i];
    }
    for(int i=0;i<n;i++)
    {
        int deliteli=0;
        for(int j=1;j<=nums[i];j++)
        {
            if(nums[i]%j==0)
            {
                deliteli++;
            }
        }
        if(deliteli == 2){
            res[i] = "YES";
            o++;
        }
        else if(deliteli != 2){
            res[i] = "NO";
            o++;
        }
    }
    for(int i=0;i<o;i++)
    {
        cout << res[i] << endl;
    }
    return 0;
} 
```

[测试](https://ideone.com/7Fnnkd)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T21:41:20.927

首先：检查是否`nums[i]`可以根据`j`您正在做的事情进行划分`j%nums[i]==0`，但必须如此`nums[i]%j==0`。

第二：`for(int j=1;j>=nums[i];j++)` 改成`for(int j=1;j<=nums[i];j++)`

最后：**您不必**测试数字`nums[i]`，`nums[i]`而**只需对其进行平方根**，因此将其更改为`sqrt(nums[i])+1`. 这可能会稍微提高您的算法速度。

# javascript - 在角度指令中从父级继承的新范围

> ID：15856232
> 
> 赞同：15
> 
> 时间：2013-04-06T21:29:37.757
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope

假设我这样做：

```
sAngular.app.directive('dostuff', ['$compile', function($compile){
  return   {
    restrict : 'C',
    scope: {
      someVar : '='
    },
    link : function(scope, element, attrs){  
      element.click(function(){
           //do stuff
        scope.someVar = 'somethingelse';
        var dropdownOutput = template();
        var compiledOutput = $compile(dropdownOutput)(scope);
        scope.$apply();
     });
    }    
  }
}]); 
```

如何使该指令的范围从父范围继承变量，但仍使其成为“隔离”范围

例如来自角度文档：

> = 或 =attr - 在本地范围属性和通过 attr 属性值定义的 name 的父范围属性之间建立双向绑定。如果未指定 attr 名称，则假定属性名称与本地名称相同。给定范围的widget定义：{localModel:'=myAttr'}，那么widget范围属性localModel将在父范围上反映parentModel的值。对 parentModel 的任何更改都将反映在 localModel 中，而对 localModel 的任何更改都将反映在 parentModel 中。

但是在这种情况下，由于“localModel 中的任何更改都将反映在 parentModel 中”，如果我在该指令的范围内修改变量，然后在这种情况下执行 scope.apply()，它将相应地反映在父范围和父模板中将随更改更新

我也尝试将“范围：true”作为参数，但更改了范围，然后是 scope.$apply(); 也将传播到原始范围...

有没有办法让我可以从父范围复制一个范围，并且该范围内的变量仍然有更改不会传播到父范围？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-07T03:05:32.723

> 如何使该指令的范围从父范围继承变量，但仍使其成为“隔离”范围

在这里使用“继承”这个词有点令人困惑。隔离范围不（典型地）从其父范围继承。Angular 确实`$parent`在隔离范围上放置了一个属性，因此您可以通过这种方式访问​​父范围属性，但最佳实践是不要使用`$parent`. 如果您想要一个隔离范围，将父范围属性值传递到该隔离范围的唯一方法是使用`=`、`@`或`&`。这三个实际上都可以工作（甚至 '&' 可以用来通过表达式传递属性值——[对于好奇的人来说](https://stackoverflow.com/a/14453330/215945)）。

在您的隔离范围内（或者如果您使用`scope: true`），您可以创建新属性。这些新属性不会传播回父级。因此，如果要更改传递给指令的属性值，只需将其复制到指令范围内的某个新属性即可。

这是一个使用`@`“单向字符串”语法的示例。要获取父范围属性的（内插）值（作为字符串），请在 HTML 中使用 {{}}：

```
<div class="dostuff" some-var="{{interpolateThisParentScopePropertyPlease}}">

sAngular.app.directive('dostuff', ['$compile', function($compile){
  return   {
    restrict : 'C',
    scope: { someVar : '@' },
    link : function(scope, element, attrs){  
      element.click(function(){
        scope.myLocalDirectiveProperty = scope.someVar;
        scope.someOtherDirectiveProperty = 'somethingelse';
        var dropdownOutput = template();
        var compiledOutput = $compile(dropdownOutput)(scope);
        scope.$apply();
     });
    } 
```

如果要将对象传递给指令，请使用 '=' 语法，然后使用`angular.copy()`在指令内制作对象的副本。

* * *

根据评论请求：

```
<div class="dostuff" some-obj="parentScopeObj">

sAngular.app.directive('dostuff', ['$compile', function($compile){
  return   {
    restrict : 'C',
    scope: { someObj : '=' },
    link : function(scope, element, attrs){  
      element.click(function(){
        scope.myLocalDirectiveObjProperty = angular.copy(scope.someObj);
        ...
        scope.$apply();
     });
    } 
```

# jboss7.x - NewCookie 的 JEE6 生产者

> ID：15856239
> 
> 赞同：1
> 
> 时间：2013-04-06T21:30:23.733
> 
> 标签：jboss7.x, java-ee-6, cdi

我想为

```
javax.ws.rs.core.NewCookie(java.lang.String name,
             java.lang.String value,
             java.lang.String path,
             java.lang.String domain,
             java.lang.String comment,
             int maxAge,
             boolean secure) 
```

这样每次的价值都会不同。前段时间我做了一些JEE6，但我的记忆力很差！

例如。我的简单记录器制作人是

```
@Produces
public Logger produceLogger(final InjectionPoint injectionPoint) {  
    final String injectingClass = injectionPoint.getMember().getDeclaringClass().getName();
    logger.info("creating logger for : " + injectingClass);
    return Logger.getLogger(injectingClass);  
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:48:51.500

如果您能够在没有任何附加参数的情况下在生产者方法中计算唯一值，那么您所要做的就是使用返回值注释方法`NewCookie`：

```
@Produces NewCookie createCookie() {
  // create cookie and its value  
} 
```

如果您需要根据一些外部参数来创建它，那么这个生产者方法可以像任何其他方法一样具有参数——但是，所有这些都是注入点，并且必须由容器获取。

```
@Produces NewCookie createCookie(String value) {
  // create cookie with parameter value  
} 
```

现在，原始类型（以及字符串）存在问题，您肯定有其他具有不同含义的相同类型的实例，因此您可以使用特殊类（如`MyValue`包装字符串）并将其用作注入点或使用自定义注释对其进行注释。

```
@Produces NewCookie createCookie(@CookieValue String value) {
  // create cookie with parameter value  
} 
```

然后，当然，您再次需要某个产生此注入值的地方。

```
@Produces @CookieValue String createCookieValue() {
    // create value
} 
```

查看[JavaEE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/index.html)或[CDI 规范](http://docs.jboss.org/cdi/spec/1.0/html/)以获取更多信息。

# java - 嵌套 TreeSet 迭代器 - Java

> ID：15856240
> 
> 赞同：0
> 
> 时间：2013-04-06T21:30:33.760
> 
> 标签：java, nested, treeset

我正在尝试编写一个打印两组笛卡尔积的 Java 程序。我用迭代器定义了两个 TreeSet。

**问题是**当我使用*while*语句迭代两个集合（嵌套迭代）时，只有第二个*while*完成了所有元素。似乎迭代器彼此混淆了。

```
while (iSet1.hasNext()) { // to iterate over the first set
        int i = iSet1.next();

        while (iSet2.hasNext()) { // to iterate over the second set
            int j = iSet2.next();               
            System.out.printf("(%d,%d)",i,j);
        } // end of inner while
    } // end of outer while 
```

如果 set1 = {1,2} 和 set2 = {1,2} 我得到这个*输出*：（1,1）（1,2），其中所需的*输出*是：（1,1）（1,2）（ 2,1)(2,2)

提前谢谢^_^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:35:54.563

如果您希望计算笛卡尔积，则需要为第一个迭代器的每个值重新初始化第二个迭代器。

```
while (iSet1.hasNext()) { // to iterate over the first set
    int i = iSet1.next();
    iSet2 = secondSet.iterator(); // <- re-initialize the iterator here
    while (iSet2.hasNext()) { // to iterate over the second set
        int j = iSet2.next();               
        System.out.printf("(%d,%d)",i,j);
    } // end of inner while
} // end of outer while 
```

# bash - BASH awk 字段分隔符执行计算

> ID：15856248
> 
> 赞同：0
> 
> 时间：2013-04-06T21:31:19.640
> 
> 标签：bash, awk

我基本上有一个包含数据的文本文件，其中包含这种格式的时间

```
(00:00)
(06:08)
(07:54) 
```

我已经完成了我的研究，以确定如何仅使用那些时间（过滤掉所有其他垃圾），甚至使用 awk 将它们分开。当我尝试添加数字时会出现问题。我似乎得到一个个位数的 0 值......

我的代码如下：

```
cat somefile.txt | awk -F: '/([0-9][0-9]:[0-9][0-9])/{total+=$1}END{print total}' 
```

注意：我使用括号是因为文件包含其他时间，而不是括在括号中......所以我试图摆脱不需要的数据，只留下上述部分（00:00）

我正在尝试将左边的部分加在一起，在这个例子中显然应该总共产生 13 个。

真的希望我能找到解决方案，而且我敢肯定，目前我并没有完全想到这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T21:42:30.360

试试这一行：

```
awk -F'[(:]' '{h+=$2}END{print h}' file 
```

例子：

```
kent$  echo "(00:00)
(06:08)
(07:54)"|awk -F'[(:]' '{h+=$2}END{print h}' 
13 
```

**编辑**

`[(:]`（我真的很想输入`:)`）定义了两个 FS（字段分隔符）`(`，`:` 所以该行将是：

```
(06:08)
field 1 - ""
field 2 - 06
field 3 - 08) 
```

如果你只想得到几分钟，你也需要添加`)`到你的FS，否则你得到`$3`了结尾`)`。

# windows-store-apps - 有什么方法可以检测到麦克风在 Windows 应用商店应用程序中被禁用？

> ID：15856256
> 
> 赞同：1
> 
> 时间：2013-04-06T21:32:09.877
> 
> 标签：windows-store-apps

我想检测用户是否在运行中关闭了 Windows 应用商店应用程序上的麦克风。我知道这是可能的，因为 Audio Recorder 使用它。但是怎么做？

**更新**：我希望收到有关麦克风被禁用的事件的通知。

这有什么关系吗？[http://msdn.microsoft.com/en-us/library/windows/desktop/dd370810(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd370810(v=vs.85).aspx)

![在此处输入图像描述](https://i.stack.imgur.com/L5krq.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T06:39:24.683

你可以这样检查。

```
bool IsMicAvailable = true;
try
{
    var MyMediaCapture = new MediaCapture();
    var settings = new MediaCaptureInitializationSettings();
    settings.StreamingCaptureMode = StreamingCaptureMode.Audio;
    await MyMediaCapture.InitializeAsync(settings);
}
catch (Exception)
{
    IsMicAvailable = false;
}

if(IsMicAvailable)
    //TODO : The logic of recording audio
else
    //TODO : Display error message 
```

基本上，如果麦克风权限关闭，`System.UnauthorizedAccessException`则会发生，如果麦克风未连接，`System.Exception`则会发生并且它包含消息`Exception from HRESULT: 0xC00DABE0`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-30T17:02:12.460

```
var deviceAccessInfo = DeviceAccessInformation.CreateFromDeviceClass(DeviceClass.AudioCapture);
deviceAccessInfo.AccessChanged += OnDeviceAccessChanged;

void OnDeviceAccessChangedDeviceAccessInformation sender, DeviceAccessChangedEventArgs args)
{
    if (args.Status == DeviceAccessStatus.DeniedByUser)
    ; // handle
    else if (args.Status == DeviceAccessStatus.Allowed)
    ; // handle
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-23T13:20:11.260

唯一的方法是执行 initalizeAsync 并注意错误。阅读[http://msdn.microsoft.com/en-us/library/windows/apps/hh768223.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh768223.aspx)了解更多信息。

关于你的后一个问题。不，无法得知权限状态已更改。

# html - HR 在 Firefox 中显示不同

> ID：15856259
> 
> 赞同：3
> 
> 时间：2013-04-06T21:32:20.780
> 
> 标签：html, css, firefox

正如标题所解释的，我在显示`<hr>`一行时遇到了一点问题。

在 IE 7, 8, 9, Google Chrome, Opera Safari 中都一样，没有问题，只是不支持 CSS3 效果，如阴影等。

我正在尝试 2 做的是，通过添加该行来分隔一些新闻文章，但在 Firefox 中，该行不在容器中，就像有位置：`absolute;`和`padding: 500px;`

这是我的 html 标记：

```
 <div class="container">

            <div class="main-content-container">
            <div class="article-container">
<div class="article-header">
<p class="article-count">0</p><p class="article-categories">1,2, 3, 4, 5</p>
<h1 class="article-title"><a href='#'>Lorem Ipsum is simply dummy</a></h1>
<p class="article-auth-date">2013 Apr 06</p>
</div> <!-- end of article-header -->

<img alt="bla bla bla" src="http:/localhost/uploads/test.png" style="border: none;">

<div class="article-post">
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p></div><!-- end of article-post-->
</div>

<hr class="fancy-hr">           
</div><!-- end of article-container -->
</div><!-- end of main-content-container -->

 <aside></aside><!-- end of aside -->

 </div><!-- end of container --> 
```

这是CSS：

```
.main-content-container {
            float:left;
            margin: 5px 0 0;
            padding: 0;
            width: 660px;
            height: 800px;
            background-color: white;

            -moz-box-shadow:inset 0px 0px 20px 4px rgba(173, 173, 173, 0.5);
            -webkit-box-shadow:inset 0px 0px 20px 4px rgba(173, 173, 173, 0.5);
            box-shadow:inset 0px 0px 20px 4px rgba(173, 173, 173, 0.5);
            border: 1px solid #818080;

.article-container {
    float: left;
    margin: 20px;
    padding: 0;
    width: 615px;
}

    .article-header {
        float: left;
        margin: 0;
        padding: 5px 0 0 ;
        width: 100%;
        height: 50px;
        margin-bottom: 20px;
    }

.article-post {
        border-top:1px solid #D3D3D3;
        text-align:justify; 
        padding:3px; 
        margin-top:3px; 
        margin-bottom:5px;
        font-size: 14px;
        font-family: 'Lato', sans-serif;
        color: #000;
    }

    hr.fancy-hr {
        width: 100%;
        border: 0;
        height: 1px;
        background: #c5c3c3;
        -webkit-box-shadow: 2px 0px 20px rgba(50, 50, 50, 0.75);
        -moz-box-shadow:    2px 0px 20px rgba(50, 50, 50, 0.75);
        box-shadow:         2px 0px 20px rgba(50, 50, 50, 0.75);
    } 
```

以及来自 Google Chrome 和 Firefox 的 2 个屏幕截图：

[http://i1217.photobucket.com/albums/dd399/MarianStroiu/googlechrome.png](http://i1217.photobucket.com/albums/dd399/MarianStroiu/googlechrome.png)谷歌浏览器

[http://i1217.photobucket.com/albums/dd399/MarianStroiu/ff.png](http://i1217.photobucket.com/albums/dd399/MarianStroiu/ff.png)火狐

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T21:52:15.100

hr 支持很少，并且在浏览器中没有得到很好的处理。根据我的经验，它并没有被大量使用。下面的代码是您想要的常见做法，根据您的感受自定义它 -

```
div.line {
border-bottom:thin solid #fff;
}

<div class="container">

        <div class="main-content-container">
        <div class="article-container">
<div class="article-header">
<p class="article-count">0</p><p class="article-categories">1,2, 3, 4, 5</p>
<h1 class="article-title"><a href='#'>Lorem Ipsum is simply dummy</a></h1>
<p class="article-auth-date">2013 Apr 06</p>
</div> <!-- end of article-header -->

<img alt="bla bla bla" src="http:/localhost/uploads/test.png" style="border: none;">

<div class="article-post">
<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry&#39;s standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p></div><!-- end of article-post-->
</div>

<!--<hr class="fancy-hr">--> do not use
<div class="line"></div>

</div><!-- end of article-container -->
</div><!-- end of main-content-container --> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-11-02T10:03:34.623

这与前景色有关，Kevin Lynch 的修复在浅灰色 (#d1d1d1) 正文背景的页面上对我不起作用。将 HR 颜色更改为白色确实有效，它现在显示为蚀刻。

```
hr {color: #ffffff;} 
```

在实践中，人力资源只需要比背景更亮的任何阴影，所以白色总是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:36:30.977

我敢肯定这对你来说并不理想，但不必担心所有的样式，为什么不把它变成一个图像而不是人力资源呢？它会更容易维护，并且可以简单地包含为宽图像并简化所有 CSS。

否则，您是否尝试过降低 HR 的宽度？这听起来很愚蠢，但我之前遇到过宽度使 HR 元素从其 div 中弹出的情况。

# php - PHP类ImapMailbox不下载附件

> ID：15856261
> 
> 赞同：1
> 
> 时间：2013-04-06T21:32:24.470
> 
> 标签：php, class, email, imap

在 Windows 8 上运行 Apache 2.2 和 PHP 5.3。试图让 PHP 类[ImapMailbox](http://code.google.com/p/php-imap/source/browse/trunk/ImapMailbox.php)下载附件，但每次我 getMail() 时，每封带有附件的电子邮件的附件值都是空的。

所有其余的电子邮件信息均已正确下载。

我查看了类代码，但无法确定问题可能出在哪里。

这是我当前的代码：

```
$mailbox = new ImapMailbox('{testsite.com:110/pop3/novalidate-cert}INBOX', 'testemail@testsite.com', 'MyPaSs', ATTACH_DIR, 'utf-8');

$mails = array();

foreach($mailbox->searchMailbox('SUBJECT "test attach" SINCE "' . date('m/d/Y', strtotime('-1 week')) . '"') as $mailId) {
        $mail = $mailbox->getMail($mailId);
       $mails[] = $mail;
} 
```

在 getMail() 中转储 $data var 后，似乎有 winmail.dat 格式的附件。代码无法访问这些，因为由于“ifid”值为空而未分配 attachmentId 值。可以解码 winmail.dat 附件，但前提是它们被检测到并写入文件。

任何想法如何在 ImapMailbox 代码中为此创建解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T01:04:35.267

这是我写的解决此问题的内容。

在 initMailPart() 方法的开头，添加以下内容：

```
static $altAttachmentId = 0; 
```

在 IF 块的末尾`if($this->attachmentsDir) {`添加以下内容，其中右`}`括号是：

```
} elseif (!empty($params['fileName']) || !empty($params['filename']) || !empty($params['name'])) { // Process attachments that are not inline.
                            // Check if need to decode TNEF (Winmail.dat) file.
                            if ($partStructure->ifsubtype && $partStructure->subtype == 'MS-TNEF') {
                                require_once 'path_to_your/tnef_decoder.php';

                                $Tnef = new tnef_decoder;

                                $un_tnef = $Tnef->decompress($data);

                                $attached_files = array();

                                foreach ($un_tnef as $f) {
                                    if (!empty($f['name']) && !empty($f['stream'])) {
                                        $attachment = new IncomingMailAttachment();

                                        $attachment->id = $altAttachmentId;
                                        $attachment->name = $f['name'];
                                        $attachment->filePath = $this->attachmentsDir . DIRECTORY_SEPARATOR . preg_replace('~[\\\\/]~', '', $f['name']);

                                        $mail->addAttachment($attachment);

                                        if (file_exists($attachment->filePath) && md5($f['stream']) != md5_file($attachment->filePath)) {
                                            $attachment->filePath = $this->attachmentsDir . DIRECTORY_SEPARATOR . preg_replace('~[\\\\/]~', '', $mail->id . '_' . $altAttachmentId . '_' . $f['name']);
                                        }

                                        file_put_contents($attachment->filePath, $f['stream']);

                                        $altAttachmentId++;
                                    }
                                }
                            } else {
                                if (!empty($params['filename'])) {
                                    $fileName = $params['filename']; // Account for random camel-case mistake on element.
                                } elseif (!empty($params['fileName'])) {
                                    $fileName = $params['fileName'];
                                } else {
                                    $fileName = $params['name'];
                                }

                                $attachment = new IncomingMailAttachment();
                                $attachment->id = $altAttachmentId;
                                $attachment->name = $fileName;
                                $attachment->filePath = $this->attachmentsDir . DIRECTORY_SEPARATOR . preg_replace('~[\\\\/]~', '', $mail->id . '_' . $altAttachmentId . '_' . $fileName);

                                $mail->addAttachment($attachment);

                                file_put_contents($attachment->filePath, $data);

                                $altAttachmentId++;
                            }
                        } 
```

请注意，您必须包含[Roundcube Webmail](http://sourceforge.net/projects/roundcubemail/files/roundcubemail/)包中的 tnef_decoder.php 文件，TNEF 解码才能工作。我在[这里](http://www.php.net/manual/es/function.imap-fetchbody.php#109695)获得了 TNEF 解决方案的灵感。

此修改将处理 Winmail.dat 文件中的所有 TNEF 编码文件以及未内联附加的任何其他附件。观察大文件的内存使用情况。

如果它们不完全相同，它也不会覆盖同名的现有文件。

# jquery - 滑动以在新图像中滑动

> ID：15856263
> 
> 赞同：0
> 
> 时间：2013-04-06T21:32:36.727
> 
> 标签：jquery, json, jquery-mobile

我正在寻找一个脚本或教程，我可以在其中显示包装在锚标记中的图像，当我向左或向右滑动时，它会显示一个新图像。此脚本应与 json 和 jquery mobile 一起使用，并指示幻灯片中有多少图像。有没有这样的教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:50:51.440

[**真棒移动图片库**](http://tympanus.net/codrops/2010/05/27/awesome-mobile-image-gallery-web-app/)

可用作静态图片库或通过`$.ajax`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T04:39:49.050

我自己错了使用 jQuery for jQuery Mobile 的最简单形式的图像滑块。

您可以在[此处找到教程](http://itdiary.mayuonline.com/simple-basic-image-carousel-with-jquery-mobile/)和[演示](http://jsfiddle.net/R3bZ8/13/)。

以下是核心

```
$("#myImagePage").swiperight(function () {
        if (i < (imgURL.length - 1)) {
            i++
        } else {
            i = 0;
        }
        var imgStr = "<img src=" + imgURL[i] + " style='width:100%'>";
        $('#ImageDiv').html(imgStr);
    });
    $("#myImagePage").swipeleft(function () {
        if (i > 0) {
            i--
        } else {
            i = (imgURL.length - 1);
        }
        var imgStr = "<img src=" + imgURL[i] + " style='width:100%'>";
        $('#ImageDiv').html(imgStr);
    }); 
```

# java - jtable中的JCheckbox将值存储在mysql数据库中

> ID：15856266
> 
> 赞同：0
> 
> 时间：2013-04-06T21:32:47.343
> 
> 标签：java, mysql, swing, jtable, jcheckbox

嗨，我有这个问题：我想将复选框值存储在 mysql 数据库中，并使用以下代码从该数据库加载值：

```
String [][]Database = new String[500][10];
     String query=null;
     PreparedStatement pstmt=null;
     ResultSet res=null;  
     int i=0;
       query= "SELECT * FROM dipendenti  ";
       try {
           pstmt=Connessioni.connection.con.prepareStatement(query);
           res=pstmt.executeQuery();

           while(res.next()){
               Database[i][0]=res.getString("nome");
               Database[i][1]=res.getString("codice");
               Database[i][2]=res.getString("livello");
               Database[i][3]=res.getString("cc");
               Database[i][4]=res.getString("ca");
               Database[i][5]=res.getString("successo");
               System.out.println("OK");
               i++;
           }
       } catch (SQLException ex) {
           Logger.getLogger(Login.class.getName()).log(Level.SEVERE, null, ex);
       }

    String [] tool = {"Nome","Codice","Livello","Data_CC","Data_CA","SUCCESSO"};

    DefaultTableModel m = new DefaultTableModel(null,tool){
     @Override
     public boolean isCellEditable(int row, int column) {      
        return false;       
     }

     public Class getColumnClass(int col) {  
        if (col == 5) {  
           return Boolean.class;  
        }  
        return getValueAt(0, col).getClass();  
     } 
};

while(i>0){

  m.addRow(Database[i-1]); //-1 perchè i parte da n e non da n-1
  i--;
}
brooker = new JTable(m); 
```

但是，当我要从数据库中加载程序时，程序会滞后并且变得全黑，我得到了这个异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at agenda_brooker.PaginaPrincipale$1.getColumnClass(PaginaPrincipale.java:95)
    at javax.swing.JTable.getColumnClass(JTable.java:2701)
    at javax.swing.JTable.getCellRenderer(JTable.java:5686)
    at javax.swing.plaf.basic.BasicTableUI.paintCell(BasicTableUI.java:2113)
    at javax.swing.plaf.basic.BasicTableUI.paintCells(BasicTableUI.java:2016)
    at javax.swing.plaf.basic.BasicTableUI.paint(BasicTableUI.java:1812)
    at javax.swing.plaf.ComponentUI.update(ComponentUI.java:161)
    at javax.swing.JComponent.paintComponent(JComponent.java:778)
    at javax.swing.JComponent.paint(JComponent.java:1054)
    at javax.swing.JComponent.paintToOffscreen(JComponent.java:5221)
    at javax.swing.RepaintManager$PaintManager.paintDoubleBuffered(RepaintManager.java:1482)
    at javax.swing.RepaintManager$PaintManager.paint(RepaintManager.java:1413)
    at javax.swing.RepaintManager.paint(RepaintManager.java:1206)
    at javax.swing.JComponent._paintImmediately(JComponent.java:5169)
    at javax.swing.JComponent.paintImmediately(JComponent.java:4980)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:770)
    at javax.swing.RepaintManager.paintDirtyRegions(RepaintManager.java:728)
    at javax.swing.RepaintManager.prePaintDirtyRegions(RepaintManager.java:677)
    at javax.swing.RepaintManager.access$700(RepaintManager.java:59)
    at javax.swing.RepaintManager$ProcessingRunnable.run(RepaintManager.java:1621)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:251)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:721)
    at java.awt.EventQueue.access$200(EventQueue.java:103)
    at java.awt.EventQueue$3.run(EventQueue.java:682)
    at java.awt.EventQueue$3.run(EventQueue.java:680)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:691)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:242)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:150)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:146)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:138)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:91) 
```

# f# - 尾递归和布尔运算符

> ID：15856270
> 
> 赞同：1
> 
> 时间：2013-04-06T21:32:51.283
> 
> 标签：f#, tail-recursion

我目前正在自学 F#（通过 try f# 站点）。我有以下（恕我直言）尾递归函数用于一元谓词（int-> bool）的存在量化。

```
let rec exists bound predicate = 
    if (bound<0) then false
    elif predicate(bound) then true
    else exists (bound-1) predicate 
```

现在这个函数也可以写成

```
let rec exists bound predicate = (bound+1>0) && (predicate(bound) || exists (bound-1) predicate) 
```

但是，第二种实现不是尾递归的。问题是编译器是否会将其优化为尾递归？

更简单（好吧，这有点傻）的例子的情况如何，说

```
let rec hasNoRoot f = 
    if (f x = 0) then false
    else hasNoRoot (fun x -> f (x+1)) 
```

相对

```
let rec hasNoRoot f = (f 0 <> 0) && (hasNoRoot (fun x-> f(x+1))) 
```

在第二个示例中，为了将函数（实际上是它的描述）识别为尾递归，编译器只需要“知道”为了评估连接，不一定必须评估两个连接。

感谢您的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:53:16.503

我使用 VS2012 (F# 3.0) 编译了您的“exists”和“hasNoRoot”函数的第二个版本并进行了优化，然后使用 .NET Reflector 检查了编译器生成的 IL。编译器*确实*优化了“hasNoRoot”函数，但不幸的是，没有优化“exists”函数。不过，这似乎是一个合理的优化，所以它可能会被添加到下一个版本的编译器中。

对于后代，这是编译器生成的内容：

```
.method public static bool exists(int32 bound, class [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<int32, bool> predicate) cil managed
{
    .custom instance void [FSharp.Core]Microsoft.FSharp.Core.CompilationArgumentCountsAttribute::.ctor(int32[]) = { new int32[int32(0x2)] { int32(0x1), int32(0x1) } }
    .maxstack 8
    L_0000: nop 
    L_0001: ldarg.0 
    L_0002: ldc.i4.1 
    L_0003: add 
    L_0004: ldc.i4.0 
    L_0005: ble.s L_001c
    L_0007: ldarg.1 
    L_0008: ldarg.0 
    L_0009: callvirt instance !1 [FSharp.Core]Microsoft.FSharp.Core.FSharpFunc`2<int32, bool>::Invoke(!0)
    L_000e: brfalse.s L_0012
    L_0010: ldc.i4.1 
    L_0011: ret 
    L_0012: ldarg.0 
    L_0013: ldc.i4.1 
    L_0014: sub 
    L_0015: ldarg.1 
    L_0016: starg.s predicate
    L_0018: starg.s bound
    L_001a: br.s L_0001
    L_001c: ldc.i4.0 
    L_001d: ret 
} 
```

# python - 如何使用 Selenium WebDriver 在网页上查找元素？

> ID：15856271
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:32:54.633
> 
> 标签：python, windows, firefox, selenium, selenium-webdriver

我试图`WebDriver`在 YouTube 上使用 Selenium for FireFox 自动执行一项任务。

我在 YouTube 上创建了一个播放列表，我想获取该播放列表中所有视频的超链接。

`html`看起来像这样：

```
<a href="/watch?v=StJLvbPIvTw&amp;list=PLt5xbw4ekDQssXxfaIfh_XbKe-iuOTZo_&amp;index=1" title="ADELE - Skyfall (Official video HD)" class="yt-uix-tile-link yt-uix-sessionlink" data-sessionlink="feature=plpp_video&amp;ei=RodgUazfOKWlhAHOioGoDA">
    <span class="title video-title" dir="ltr">ADELE - Skyfall (Official video HD)</span>
  </a> 
```

我尝试使用 查找元素`find_by_partial_link_text`但失败了。

我的最终动机是获取播放列表中所有视频的超链接，以便我可以将其传递给下一个脚本以单独访问它们。任何帮助将不胜感激。

[注意：我在 SO 中找到了与此SO](https://stackoverflow.com/questions/8121886/accessing-selenium-web-elements-with-python)类似的答案，但此处提供的答案是迭代一个`WebElement`对象，在我的情况下该对象抛出异常，说对象不可迭代。

**编辑：**

```
def init():

    d = webdriver.Firefox()
    d.implicitly_wait(15)
    print "in init"
    return d

def youtube(d, uname, pwd):

    link_list = []
    d.get("http://www.youtube.com")
    print "in you"
    signin = d.find_element_by_partial_link_text("Sign in")
    signin.click()

    email = d.find_element_by_id("Email")
    passwo = d.find_element_by_id("Passwd")
    submit = d.find_element_by_id("signIn")

    email.send_keys(uname)
    passwo.send_keys(pwd)
    submit.click()

    list = d.find_element_by_partial_link_text("Playlists")
    list.click()

    play = d.find_element_by_partial_link_text("Fav songs")
    play.click()
    print play

    link_list = d.find_element_by_xpath('//*[@id="playlist-pane-container"]/div[1]')
    print "done"
    print link_list # prints None here
    hr = link_list.get_attribute("css=a@href")
    print hr 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T07:36:57.807

尝试通过以下方式获取链接： `String hrefSpecs = driver.findelement(By.cssSelector("a.yt-uix-tile-link.yt-uix-sessionlink")).getAttribute("href")`

通常你会得到

`/watch?v=StJLvbPIvTw&amp;list=PLt5xbw4ekDQssXxfaIfh_XbKe-iuOTZo_&amp;index=1`

所以你像这样子串：

```
String sublink = hrefSpecs.substring(0,20); // check the 20 i'm not sure 
```

你会得到

```
/watch?v=StJLvbPIvTw 
```

既然你得到了这个，你就可以写这样的东西

```
String youtube = "www.youtube.com";
String link = youtube + sublink; 
```

你终于得到了：www.youtube.com/watch?v=StJLvbPIvTw

但是，如果您有一个包含所有链接的页面，您将构建如下内容：

`List<String> listLink = driver.findElements(By.cssSelector("a.yt-uix-tile-link.yt-uix-sessionlink")).getAttribute("href")`;

并且您将使用带有先前子字符串的 foreach 等进行迭代。我让您测试并告诉我您是否有问题。

编辑：`WebElement`不可迭代，`List<WebElement>`或者`[]`在您的情况下是可迭代的。我用Java写的，我希望你能“翻译”它=）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T03:19:16.420

您可以通过简单的字符串操作来获取链接。

将字符串加载到变量中，用空格分割字符串，第二个元素将为您提供 href + 链接，删除 href 部分，您将获得链接。

试试这个

`html = '<a href="/watch?v=StJLvbPIvTw&amp;list=PLt5xbw4ekDQssXxfaIfh_XbKe-iuOTZo_&amp;index=1" title="ADELE - Skyfall (Official video HD)" class="yt-uix-tile-link yt-uix-sessionlink" data-sessionlink="feature=plpp_video&amp;ei=RodgUazfOKWlhAHOioGoDA"> <span class="title video-title" dir="ltr">ADELE - Skyfall (Official video HD)</span> </a>'`

`parts = html.split(" ")`

`link = parts[1][6:-1]`

# css - 我的动画仅适用于 Chrome 和 Safari，但不适用于 IE 或 Firefox

> ID：15856275
> 
> 赞同：0
> 
> 时间：2013-04-06T21:33:04.003
> 
> 标签：css, animation

我添加了所有前缀但仍然无法正常工作？它就像一个幻灯片，使用 css 将背景更改为不同的图像。我不明白问题是什么，我把所有东西都看了 100 遍。[您可以在http://steveedwin.com/](http://steveedwin.com/)上看到它

```
html{
max-width:1000px;
}
#slideshow{

background-image: url('1.jpg') ;
background-repeat:no-repeat;
background-size: 70% 350px;
width:100%;
height: 300px;
animation:myfirst 30s linear 1s infinite alternate;
/* Firefox: */
-moz-animation:myfirst 30s linear 1s infinite alternate;
/* Safari and Chrome: */
-webkit-animation:myfirst 30s linear 1s infinite alternate;
/* Opera: */
-o-animation:myfirst 30s linear 1s infinite alternate;
}
@keyframes myfirst
{
0% {background-image:url('1.jpg');}
5%{background-image:url('1.jpg');}
10%{background-image:url('1.jpg');}
15%{background-image:url('1.jpg');}
20%{background-image:url('5.jpg');}
25%{background-image:url('5.jpg');}
30%{background-image:url('5.jpg');}
40%{background-image:url('5.jpg');}
45%{background-image:url('2.jpg'); }
50%{background-image:url('2.jpg'); }
55%{background-image:url('2.jpg'); }
60%{background-image:url('2.jpg'); }
70%{background-image:url('3.jpg');}
75%{background-image:url('3.jpg');}
80%{background-image:url('3.jpg');}
85%{background-image:url('4.jpg');}
90%{background-image:url('4.jpg');}
95%{background-image:url('4.jpg');}
100%{background-image:url('4.jpg');}
}

@-moz-keyframes myfirst /* Firefox */
{
0% {background-image:url('1.jpg');}
5%{background-image:url('1.jpg');}
10%{background-image:url('1.jpg');}
15%{background-image:url('1.jpg');}
20%{background-image:url('5.jpg');}
25%{background-image:url('5.jpg');}
30%{background-image:url('5.jpg');}
40%{background-image:url('5.jpg');}
45%{background-image:url('2.jpg'); }
50%{background-image:url('2.jpg'); }
55%{background-image:url('2.jpg'); }
60%{background-image:url('2.jpg'); }
70%{background-image:url('3.jpg');}
75%{background-image:url('3.jpg');}
80%{background-image:url('3.jpg');}
85%{background-image:url('4.jpg');}
90%{background-image:url('4.jpg');}
95%{background-image:url('4.jpg');}
100%{background-image:url('4.jpg');}
}

@-webkit-keyframes myfirst /* Safari and Chrome */
{
0% {background-image:url('1.jpg');}
5%{background-image:url('1.jpg');}
10%{background-image:url('1.jpg');}
15%{background-image:url('1.jpg');}
20%{background-image:url('5.jpg');}
25%{background-image:url('5.jpg');}
30%{background-image:url('5.jpg');}
40%{background-image:url('5.jpg');}
45%{background-image:url('2.jpg'); }
50%{background-image:url('2.jpg'); }
55%{background-image:url('2.jpg'); }
60%{background-image:url('2.jpg'); }
70%{background-image:url('3.jpg');}
75%{background-image:url('3.jpg');}
80%{background-image:url('3.jpg');}
85%{background-image:url('4.jpg');}
90%{background-image:url('4.jpg');}
95%{background-image:url('4.jpg');}
100%{background-image:url('4.jpg');}
}

@-o-keyframes myfirst /* Opera */
{
0% {background-image:url('1.jpg');}
5%{background-image:url('1.jpg');}
10%{background-image:url('1.jpg');}
15%{background-image:url('1.jpg');}
20%{background-image:url('5.jpg');}
25%{background-image:url('5.jpg');}
30%{background-image:url('5.jpg');}
40%{background-image:url('5.jpg');}
45%{background-image:url('2.jpg'); }
50%{background-image:url('2.jpg'); }
55%{background-image:url('2.jpg'); }
60%{background-image:url('2.jpg'); }
70%{background-image:url('3.jpg');}
75%{background-image:url('3.jpg');}
80%{background-image:url('3.jpg');}
85%{background-image:url('4.jpg');}
90%{background-image:url('4.jpg');}
95%{background-image:url('4.jpg');}
100%{background-image:url('4.jpg');}
} 
```

# c++ - C++ 模板 - 传递类成员

> ID：15856276
> 
> 赞同：-7
> 
> 时间：2013-04-06T21:33:06.070
> 
> 标签：c++, class, templates, member

好吧，伙计们！

我在这里有一个小问题，为了让它更简单，它或多或少是这样的：

窗口.h

```
template <ObjectType &x>
class foo { stuff } 
```

游戏.h

```
class gameclass { ObjectType a; } 
```

主文件

```
gameclass mygame;
foo<mygame.a> fooa; 
```

现在 fooa 失败了，因为它不允许我将 mygame 的成员“a”作为模板参数发送。

现在如何将类成员作为模板参数发送？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:37:43.683

您似乎想传递一个*非类型模板参数*，更具体地说，是一个*指向成员*的指针。对于您想要的，您必须使用：

```
template<ObjectType gameclass::* ptr>
struct foo
// ... 
```

请注意，只有当您拥有指向该对象的指针时，才允许您访问该对象的成员。

您可以在[此处 (pointer-to-member 作为模板参数)](https://stackoverflow.com/questions/6880832/pointer-to-class-member-as-template-parameter)或[此处 (pointer-to-members)](https://stackoverflow.com/questions/670734/c-pointer-to-class-data-member)获得更多详细信息。

请注意，您不能将 的值传递`mygame.a`给您发布的代码中的模板，因为：

1.  模板参数是编译时的，你的值是运行时的。
2.  非类型模板参数不能是任何对象类型，只能是整数（或枚举）、指向对象/函数的指针/引用或指向成员的指针。

**编辑**：您已将模板更改为`template<ObjectType& x>`. [这对于引用 object](https://stackoverflow.com/questions/5687540/non-type-template-parameters)是正确的。但是，`mygame.a`不是参考，而是价值。要指定成员，您必须使用语法`&mygame::a`，这会强制您使用指向成员的指针。

# achartengine - Achartengine，如何扩展它？

> ID：15856283
> 
> 赞同：1
> 
> 时间：2013-04-06T21:34:01.350
> 
> 标签：achartengine

我有很多很多 X 轴点，所以图表似乎太拥挤了。用户可以手动缩放或拉伸图表，但有没有办法让图表默认扩展到其父视图之外，这样我的 x 轴值就不会那么拥挤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T11:03:18.057

您可以更改可见范围：

```
renderer.setXAxisMin(min);
renderer.setXAxisMin(max); 
```

# gcc - Fedora 18 x86_64 上的 GCC 安装

> ID：15856288
> 
> 赞同：9
> 
> 时间：2013-04-06T21:34:26.310
> 
> 标签：gcc, x86-64, conflict

我一直在尝试安装 gcc 编译器，但安装停止并且我收到以下错误建议：

```
file /usr/lib64/audit from install of glibc-2.16-30.fc18.x86_64 conflicts with file from package audit-2.2.1-2.fc18.x86_64 
```

有人可以帮我吗？我做了一些搜索，但无法解决它...

谢谢！

# xml - php xml解析器未声明的实体警告

> ID：15856289
> 
> 赞同：1
> 
> 时间：2013-04-06T21:34:39.477
> 
> 标签：xml, parsing, entity

我已经阅读了一些涉及未申报实体的问题。我的问题有点不同。我正在按照这个程序从网上抓取各种页面。1.首先对文件运行php tidy函数。2.然后从中创建一个dom文档，并使用xpath获取某些节点的值。（仅限table，para和blockquotes）

我的问题很简单：

1.警告：DOMDocument::loadHTML(): ID hp.global.servicebox.links.arztsuche 已在实体中定义，行：2112

2.XML错误：第2679行未声明的实体警告

我意识到第一个警告可能是因为我先通过 tidy 函数，然后再通过 loadHTML。

但是第二个问题确实很麻烦。它只是拒绝产生任何输出，我失去了一切。

在这个网站上阅读，发现一个未声明的实体，应该事先声明，但你会意识到，鉴于我的任务性质，这是不可能的（看在上帝的份上，我正在抓取网络）。

我已启用

```
var_dump(libxml_use_internal_errors(true)); 
```

但是，除了它不会弄乱我的终端之外，它根本没有帮助。对于初学者，没有关于如何处理此错误或任何与此相关的错误的文档。

我意识到这不是第一次有人遇到这个问题，我确信解决方案就在那里，我似乎找不到它。成千上万的人警告您不要使用正则表达式来解析 html 或 xml，但很少有人能够解决我们使用解析器所面临的问题——就像我所面临的那样。

干杯，理查德， - 一个心怀不满的 HTML 解析器爱好者。

编辑：一些附加信息——>这是我正在使用的整洁功能。

```
function cleaning($what_to_clean, $tidy_config='' ) 
```

{

```
$config = array
(
    'show-body-only' => false,
    'clean' => true,
    'char-encoding' => 'utf8',
    'add-xml-decl' => true,
    'add-xml-space' => true,
    'output-html' => false,
    'output-xml' => false,
    'output-xhtml' => true,
    'numeric-entities' => false,
    'ascii-chars' => false,
    'doctype' => 'strict',
    'bare' => true,
    'fix-uri' => true,
    'indent' => true,
    'indent-spaces' => 4,
    'tab-size' => 4,
    'wrap-attributes' => true,
    'wrap' => 0,
    'indent-attributes' => true,
    'join-classes' => false,
    'join-styles' => false,
    'enclose-block-text' => true,
    'fix-bad-comments' => true,
    'fix-backslash' => true,
    'replace-color' => false,
    'wrap-asp' => false,
    'wrap-jste' => false,
    'wrap-php' => false,
    'write-back' => true,
    'drop-proprietary-attributes' => false,
    'hide-comments' => false,
    'hide-endtags' => false,
    'literal-attributes' => false,
    'drop-empty-paras' => false,///dont drop empty paras
    'enclose-text' => true,
    'quote-ampersand' => true,
    'quote-marks' => false,
    'quote-nbsp' => true,
    'vertical-space' => true,
    'wrap-script-literals' => false,
    'tidy-mark' => false,
    'merge-divs' => false,
    'repeated-attributes' => 'keep-last',
    'break-before-br' => false,///dont add line breaks before breakes
);

if( $tidy_config == '' ) 
{
    $tidy_config = &$config;
}

$tidy = new tidy();
$out = $tidy->repairString($what_to_clean, $tidy_config, 'UTF8');
unset($tidy);
unset($tidy_config);
return($out); 
```

}

# python - python上的声音编辑和均衡器

> ID：15856290
> 
> 赞同：5
> 
> 时间：2013-04-06T21:34:42.470
> 
> 标签：python, macos, audio, osx-mountain-lion, frequency

我目前在 python 上使用[pyglet](http://www.pyglet.org/)作为我的声音库，

该库很棒，但它不包含我真正需要的重要功能：

播放某首歌曲时的频率控制（比如说.mp3），

意思是，我想在演奏时降低低音频率或提高较高频率

某首歌。

它应该有一个播放器，可以播放歌曲中某个位置的歌曲，

一起播放几个 .mp3 并可以在需要时暂停/停止（pyglet 有这些选项）

是否有拥有这些功能的 python 声音库？

我正在使用 mac os 10.8

# php - Codeigniter/PHP 如何正确使用 for 循环？

> ID：15856296
> 
> 赞同：1
> 
> 时间：2013-04-06T21:35:02.467
> 
> 标签：php, codeigniter

```
 <?php 
    print_r($optimum);
    $dataNumRows = count($optimum); 
    ?>

    <?php for ($i = 0; $i < $dataNumRows; $i++) : ?>
        <?php echo $cFirstName; ?>
        <?php echo $cLastName; ?>
    <?php endfor; ?> 
```

**我`print_r`在我的视图中插入显示以下内容：**

```
Array ( [cFirstName] => Array ( [0] => Tom [1] => Alexa ) [cLastName] => Array ( [0] => Jones [1] => Planter ) ) 
```

**我的模型如下**

```
//Get all the customers currently pending 
//install for the user making the request. 
function getAllCustomersPendingInstall()
{
    $data=array();

    //Need to use sessions to display proper 
    //records for each user. Temp set id to user #7
    $id = 7;

    //query the db and return all record where SalesRepId == $id
    $query = $this->db->get_where('customers', array('SalesRepId' => $id));

        //check logic, if rows exist RETURN all rows, else
        //return message that no pending installs is available.
        if($query->num_rows != 0) {
            foreach($query->result() as $row) {
                $data['cFirstName'][] = $row->customerFirstName;
                $data['cLastName'] [] = $row->customerLastName;
            }
        } else {
            $data = "No pending installs available!";
            return $data;
        }   
//the following var_dump is only showing the last record.
//need to show all rows (which should be 2)
//var_dump($data); exit;
return $data;           
} 
```

**我的控制器如下**

```
{
    $this->load->library('table');
    $this->load->model('GetData');
    $data['optimum'] = $this->GetData->getAllCustomersPendingInstall();
    $this->load->view('welcome_message', $data);
} 
```

我的问题是如何在 VIEW 中正确使用 FOR 循环，以便循环遍历所有返回的行。如您所见，`print_r`它正确返回了正确的行-但是我无法遍历它们。谢谢您的帮助！非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:42:43.503

我认为您要做的是为从数据库返回的每一行获取一个关联数组。如果我错了，请纠正我。

应该解决你的问题

```
$data = array();
$data_index = 0;
if($query->num_rows != 0) {
            foreach($query->result() as $row) {
                $data[$data_index]['cfirst'] = $row->customerFirstName;
                $data[$data_index]['clast'] = $row->customerLastName;
                $data_index++;
            }
        } else {
            $data = "No pending installs available!";
            return $data;
        } 
```

然后在你看来（数组在`$customer`哪里）`$data`

```
<?php foreach($customer as $c):?>
<?php echo $c['cfirst'];?>
<?php endforeach;?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:47:29.043

在你看来试试这个：

```
<?php for ($i = 0; $i < $dataNumRows; $i++) : ?>
    <?php echo $optimum['cFirstName'][$i]; ?>
    <?php echo $optimum['cLastName'][$i]; ?>
<?php endfor; ?> 
```

# wicket - Apache Wicket 可收藏网址向链接添加了一个附加参数，为什么？

> ID：15856299
> 
> 赞同：3
> 
> 时间：2013-04-06T21:35:28.423
> 
> 标签：wicket, wicket-1.5, wicked-pdf, wicket-1.6

我的地图是

mountPage("/page/#{code}/#{name}", Page.class);

但是当我点击链接时

`localhost/page/10/toy?2`

当我刷新页面时，检票口还添加了一个参数，例如计数器

`localhost/page/10/toy?3`

为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T21:40:53.053

这是因为您的页面是有状态的，Wicket 通过附加这个“计数器”来管理自己的页面状态。这样，当您的用户使用其浏览器内置功能向后导航时，将显示以前的页面。

如果您不想在 URL 中使用这样的参数，则需要挖掘并消除页面中的每个有状态组件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-24T08:07:54.677

你可以创建

```
public class MountedMapperWithoutPageComponentInfo extends MountedMapper {

public MountedMapperWithoutPageComponentInfo(String mountPath, Class<? extends IRequestablePage> pageClass) {
    super(mountPath, pageClass, new PageParametersEncoder());
}

@Override
protected void encodePageComponentInfo(Url url, PageComponentInfo info) {

}

@Override
public Url mapHandler(IRequestHandler requestHandler) {
    if (requestHandler instanceof ListenerInterfaceRequestHandler) {
        return null;
    } else {
        return super.mapHandler(requestHandler);
    }
} 
```

}

和这样的应用程序类上的地图页面

```
mount(new MountedMapperWithoutPageComponentInfo("/page/#{code}/#{name}", Page.class)); 
```

# python - 为什么我的并行性能达到顶峰？

> ID：15856300
> 
> 赞同：2
> 
> 时间：2013-04-06T21:35:34.547
> 
> 标签：python, performance, parallel-processing, multiprocessing

最近我一直在玩 Python，在比较众多并行化包时，我注意到从串行到并行的性能提升似乎达到了 6 个进程而不是 8 个——我的 MacBook Pro (OS X 10.8.2) 有。

所附图表比较了不同任务的时间作为进程数量（并行或顺序）的函数。此示例使用 python 内置的“[多处理](http://docs.python.org/2/library/multiprocessing.html)”包“内存”与“处理器”是指内存密集型（仅分配大型数组）与计算密集型（许多操作）函数。

8个进程以下top-out的原因是什么？

![在此处输入图像描述](https://i.stack.imgur.com/KDYaC.png)

（对于每个进程数量，“时间”平均超过 100 次函数调用）

```
import multiprocessing as mp
import time
import numpy as np
import matplotlib as mpl
from matplotlib import pyplot as plt

iters       = 100
mem_num     = 1000
pro_num     = 20000
max_procs   = 10

line_width  = 2.0
legend_size = 10
fig_name    = 'timing.pdf'

def UseMemory(num):
    test1 = np.zeros([num,num])
    test2 = np.arange(num*num)
    test3 = np.array(test2).reshape([num, num])
    test4 = np.empty(num, dtype=object)
    return 

def UseProcessor(num):
    test1 = np.arange(num)
    test1 = np.cos(test1)
    test1 = np.sqrt(np.fabs(test1))
    test2 = np.zeros(num)
    for i in range(num): test2[i] = test1[i]
    return np.std(test2)

def MemJob(its): 
    for ii in range(its): UseMemory(mem_num)

def ProJob(its): 
    for ii in range(iters): UseProcessor(pro_num)

if __name__ == "__main__":

    print '\nParTest\n'    

    proc_range = np.arange(1,max_procs+1,step=1)

    test_times = np.zeros([len(proc_range),2,2])                 # test_times[num_procs][0-ser,1-par][0-mem,1-pro]
    tot_times  = np.zeros([len(proc_range),2  ])                 #  tot_times[num_procs][0-ser,1-par]

    print ' Testing %2d numbers of processors between [%d,%d]' % (len(proc_range), 1, max_procs)
    print ' Iterations %d, Memory Length %d, Processor Length %d' % (iters, mem_num, pro_num)

    for it in range(len(proc_range)):
        procs = proc_range[it]
        job_arg = procs*[iters]
        print '\n - %2d, Processes = %3d' % (it, procs)

        # --- Test Serial ---
        print ' - - Serial'
        # Test Memory
        all_start = time.time()
        start = time.time()
        map(MemJob, [procs*iters])
        ser_mem_time = time.time() - start

        # Test Processor
        start = time.time()
        map(ProJob, job_arg)
        ser_pro_time = time.time() - start

        ser_time = time.time() - all_start

        # --- Test Parallel : multiprocessing ---
        print ' - - Parallel: multiprocessing'
        pool = mp.Pool(processes=procs)
        # Test Memory
        all_start = time.time()
        start = time.time()
        pool.map(MemJob, job_arg)
        par_mem_time = time.time() - start

        # Test Processor
        start = time.time()
        pool.map(ProJob, job_arg)
        par_pro_time = time.time() - start

        par_time = time.time() - all_start

        print ' - - Collecting'
        ser_mem_time /= procs
        ser_pro_time /= procs
        par_mem_time /= procs
        par_pro_time /= procs
        ser_time     /= procs
        par_time     /= procs

        test_times[it][0] = [ ser_mem_time, ser_pro_time ]
        test_times[it][1] = [ par_mem_time, par_pro_time ]
        tot_times[it]     = [ ser_time    , par_time     ]

    fig = plt.figure()
    ax  = fig.add_subplot(111)
    ax.set_xlabel('Number of Processes')
    ax.set_ylabel('Time [s]')
    ax.xaxis.grid(True)
    ax.yaxis.grid(True)
    lines = []
    names = []

    l1, = ax.plot(proc_range, test_times[:,0,0], linewidth=line_width)
    lines.append(l1)
    names.append('Serial Memory')
    l1, = ax.plot(proc_range, test_times[:,0,1], linewidth=line_width)
    lines.append(l1)
    names.append('Serial Processor')
    l1, = ax.plot(proc_range, tot_times[:,0], linewidth=line_width)
    lines.append(l1)
    names.append('Serial')

    l1, = ax.plot(proc_range, test_times[:,1,0], linewidth=line_width)
    lines.append(l1)
    names.append('Parallel Memory')
    l1, = ax.plot(proc_range, test_times[:,1,1], linewidth=line_width)
    lines.append(l1)
    names.append('Parallel Processor')
    l1, = ax.plot(proc_range, tot_times[:,1], linewidth=line_width)
    lines.append(l1)
    names.append('Parallel')

    plt.legend(lines, names, ncol=2, prop={'size':legend_size}, fancybox=True, shadow=True, bbox_to_anchor=(1.10, 1.10))
    fig.savefig(fig_name,dpi=fig.get_dpi())
    print ' - Saved to ', fig_name
    plt.show(block=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T22:16:41.593

从上面的讨论中，我认为您拥有所需的信息，但我正在添加一个收集事实的答案，以防它使他人受益（另外我想通过自己来解决）。（归功于@bamboon，他首先提到了其中的一些内容。）

首先，你的 MacBook 有一个带有四个物理核心的 CPU，但芯片的设计使得每个核心的硬件能够运行两个线程。这被称为“同时多线程”（SMT），在这种情况下，英特尔的[超线程](https://en.wikipedia.org/wiki/Hyper-threading)功能体现了这一点。所以总的来说，你有 8 个“虚拟核心”（4 + 4 = 8）。

请注意，操作系统将所有虚拟内核都视为相同，即它不区分物理内核提供的两个 SMT 线程，这就是为什么`sysctl`在查询时返回 8 的原因。Python 也会做同样的事情：

```
>>> import multiprocessing
>>> multiprocessing.cpu_count()
8 
```

其次，您遇到的加速限制是一个众所周知的现象，在这种现象中，并行性能会饱和，并且不会随着更多处理器的加入而提高处理该问题的速度。这种效果由[Amdahl 定律](http://en.wikipedia.org/wiki/Amdahl%27s_law)描述，这是一个关于多个处理器预期加速多少的定量陈述，具体取决于可以并行化多少代码以及串行运行多少。

通常有许多因素会限制相对加速，包括操作系统的细节甚至计算机的架构（例如 SMT 在硬件核心中的工作方式），因此即使您尽可能多地并行化代码，您的性能也不会扩展无限期地。了解串行瓶颈在哪里可能需要对您的程序及其运行环境进行非常详细的分析。

[你可以在这个问题](https://superuser.com/questions/279629/how-much-speedup-does-a-hyper-thread-give-in-theory/)中找到一个很好的讨论例子。

我希望这有帮助。

# resolution - 究竟什么是电脑分辨率？

> ID：15856302
> 
> 赞同：0
> 
> 时间：2013-04-06T21:35:47.767
> 
> 标签：resolution, pixel, geometry

也许这是一个微不足道的问题，但我对计算机分辨率感到困惑。它是什么？

如果分辨率是 150 X 100 那么这是否意味着 150 像素将覆盖我系统的整个长度（水平）。这是否意味着像素的大小不固定？因为 300 X 200 意味着 300 个像素覆盖相​​同的长度。

另外，假设我占用一个像素并围绕它画一个圆圈。现在圆是否有可能通过它所覆盖的所有像素的中心，或者会有/可能有一些像素的边界不通过中心。[从中心通过，如果我取直径上的极值点，因为边界通过中心。就这样]。

也就是说，我可以说占据一个像素，如果它是在圆圈内还是在圆圈外？[再次，直径的极值点在内部]。

**编辑**另外，在正常的 XY 轴上；边界上的点也是小数，但如果我考虑像素的索引，在一个窗口中，那么它只会作为一个单位值增加。那么我们如何决定，画圆时所有像素都被着色了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:39:23.257

当您阅读 1024x768 时，1024 是水平分辨率，768 是垂直分辨率（以像素为单位）。

像素可以是正方形或矩形，它没有指定。

要确定一个像素是否在圆内，您（简化）计算该像素中心到圆心的距离，并检查它是否低于或等于半径，如果是，它在里面。

# delphi - 为什么我的大小更改控件在与 TSplitter 共享表单时不起作用？

> ID：15856305
> 
> 赞同：2
> 
> 时间：2013-04-06T21:36:02.143
> 
> 标签：delphi

我正在编写一个面板控件，允许用户最小化面板并隐藏此面板上的组件。单个 THidePanel 似乎可以按预期工作，但是当我将其中两个放在由拆分器分隔的表单上时却没有。第一个面板对齐*alLeft*；第二个面板*alClient*：

![屏幕转储](https://i.stack.imgur.com/ZIqRP.png)

单击第二个面板的按钮时，它不会对最小化或最大化做出反应。这是我所有的代码。为什么它不起作用？

```
const
  BoarderSize = 20;

type

TButtonPosition = (topleft, topright, buttomleft, buttomright);

///
/// a panel with a smaller panel inside  and a button on the side
///
THidePanel = class(TPanel)
private
{ Private-Deklarationen }
  ///
  /// a smaller working panel
  WorkingPanel: TPanel;
  FLargeHight: Integer;
  FLargeWidth: Integer;
  FActivateButton: TButton;
  FExpandState: Boolean;
  FButtonPosition: TButtonPosition;
  FOnActivateBtnClick: TNotifyEvent;
  procedure SetButtonPosition(const Value: TButtonPosition);
protected
{ Protected-Deklarationen }
public
{ Public-Deklarationen }
  constructor create(aOwner: TComponent); override;
  procedure WMSize(var Msg: TWMSize); message WM_SIZE;
  procedure HideComponents;
  procedure H_ActivateButtonClick(Sender: TObject);
  procedure SetState(astate: Boolean);
  procedure free;
  destructor destroy; override;
published
{ Published-Deklarationen }
  property OnActivateButtonClick: TNotifyEvent read FOnActivateBtnClick
    write FOnActivateBtnClick;
  property ButtonPosition: TButtonPosition read FButtonPosition
    write SetButtonPosition;
end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [THidePanel]);
end;

{ THidePanel }

constructor THidePanel.create(aOwner: TComponent);
begin
  inherited;
  WorkingPanel := TPanel.create(self);
  WorkingPanel.Caption := 'V01';
  FActivateButton := TButton.create(self);
  FActivateButton.Parent := self;
  FActivateButton.Caption := '<';
  FActivateButton.OnClick := H_ActivateButtonClick;
  FActivateButton.Width := BoarderSize;
  FActivateButton.Height := BoarderSize;
  WorkingPanel.Caption := '';
  FLargeWidth := self.Width;
  SetButtonPosition(topright);
end;

destructor THidePanel.destroy;
begin
  inherited;
end;

procedure THidePanel.free;
begin
  inherited;
  WorkingPanel.free;
  FActivateButton.free;
end;

procedure THidePanel.HideComponents;
var
  i: Integer;
begin
  for i := 0 to WorkingPanel.ControlCount - 1 do
    WorkingPanel.Controls[i].Visible := False;
end;

procedure THidePanel.WMSize(var Msg: TWMSize);
begin
   ///  set inner panel size
   WorkingPanel.Top := self.Top + BoarderSize;
   WorkingPanel.Left := self.Left + BoarderSize;
   WorkingPanel.Width := self.Width - 2 * BoarderSize;
   WorkingPanel.Height := self.Height - 2 * BoarderSize;

   ///  move button
  SetButtonPosition(FButtonPosition);
end;

procedure THidePanel.H_ActivateButtonClick(Sender: TObject);
begin
  /// button is clicked!
  ///
  FExpandState := not FExpandState;
  SetState( FExpandState );

  ///
  if (Assigned(FOnActivateBtnClick)) then
    FOnActivateBtnClick(self);
end;

procedure THidePanel.SetButtonPosition(const Value: TButtonPosition);
begin
  FButtonPosition := Value;

  case FButtonPosition of
    topleft:
    begin
      FActivateButton.Left := 0;
      FActivateButton.Top := 0;
    end;

  topright:
  begin
    FActivateButton.Left := self.Width - BoarderSize;
    FActivateButton.Top := 0;
  end;

  buttomleft:
  begin
    FActivateButton.Left := 0;
    FActivateButton.Top := self.ClientWidth - BoarderSize;
  end;

  buttomright:
  begin
    FActivateButton.Top := self.ClientWidth - BoarderSize;
    FActivateButton.Left := self.Width - BoarderSize;
  end;

  else
  /// never go here

  end;
end;

procedure THidePanel.SetState(astate: Boolean);
begin
  if astate then
  begin
    /// ...
    FActivateButton.Caption := '>';
    self.Width :=  BoarderSize;
  end
  else
  begin
    /// ...
    FActivateButton.Caption := '<';
   self.Width := FLargeWidth;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T21:54:05.537

当 Control 的 Anchors 设置为**alClient**时，您无法更改大小。
将第二个面板对齐设置为**alLeft**或**alRight**。如果您想使用此控件填写表单，请设置表单的**AutoSize**`True`或在 resize it 时手动设置控件的最大大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:57:34.977

就像[MohsenB](https://stackoverflow.com/a/15856474/757830)已经解释过（+1ed）一样，您不能使用`Align = alClient`. 但是由于您将其作为组件，我会选择`Align`临时更改组件的设置，而不是在设计器代码中处理此问题：即使其成为组件的一个功能，以便能够将其`Align`属性设置为`alClient`并让它在情况需要时采取相应的行动。

我认为您正在寻找以下增强功能：

```
unit Unit2;

interface

uses
  Messages, Classes, Controls, StdCtrls, ExtCtrls;

const
  BorderSize = 20;

type
  TButtonPosition = (bpTopLeft, bpTopRight, bpBottomLeft, bpBottomRight);

  THidePanel = class(TPanel)
  private
    FActivateButton: TButton;
    FButtonPosition: TButtonPosition;
    FExpandState: Boolean;
    FOldAlign: TAlign;
    FOldWidth: Integer;
    FOnActivateBtnClick: TNotifyEvent;
    FWorkingPanel: TPanel;
    procedure ActivateButtonClick(Sender: TObject);
    procedure SetButtonPosition(Value: TButtonPosition);
  protected
    function CanResize(var NewWidth, NewHeight: Integer): Boolean; override;
    procedure Resize; override;
  public
    constructor Create(AOwner: TComponent); override;
    procedure SetState(AState: Boolean);
  published
    property ButtonPosition: TButtonPosition read FButtonPosition
      write SetButtonPosition default bpTopRight;
    property OnActivateButtonClick: TNotifyEvent read FOnActivateBtnClick
      write FOnActivateBtnClick;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('Samples', [THidePanel]);
end;

{ THidePanel }

constructor THidePanel.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  FWorkingPanel := TPanel.Create(Self);
  FWorkingPanel.Caption := '';
  FWorkingPanel.SetBounds(BorderSize, BorderSize, Width - 2 * BorderSize,
    Height - 2 * BorderSize);
  FWorkingPanel.Anchors := [akLeft, akTop, akRight, akBottom];
  FWorkingPanel.Parent := Self;
  FActivateButton := TButton.Create(Self);
  FActivateButton.Caption := '<';
  FActivateButton.OnClick := ActivateButtonClick;
  FActivateButton.Width := BorderSize;
  FActivateButton.Height := BorderSize;
  FActivateButton.Parent := Self;
  SetButtonPosition(bpTopRight);
end;

procedure THidePanel.ActivateButtonClick(Sender: TObject);
begin
  FExpandState := not FExpandState;
  SetState(FExpandState);
  if Assigned(FOnActivateBtnClick) then
    FOnActivateBtnClick(Self);
end;

procedure THidePanel.SetButtonPosition(Value: TButtonPosition);
begin
  if FButtonPosition <> Value then
  begin
    FButtonPosition := Value;
    case FButtonPosition of
      bpTopLeft:
        begin
          FActivateButton.Left := 0;
          FActivateButton.Top := 0;
          FActivateButton.Anchors := [akLeft, akTop];
        end;
      bpTopRight:
        begin
          FActivateButton.Left := Width - BorderSize;
          FActivateButton.Top := 0;
          FActivateButton.Anchors := [akRight, akTop];
        end;
      bpBottomLeft:
        begin
          FActivateButton.Left := 0;
          FActivateButton.Top := ClientWidth - BorderSize;
          FActivateButton.Anchors := [akLeft, akBottom];
        end;
      bpBottomRight:
        begin
          FActivateButton.Top := ClientWidth - BorderSize;
          FActivateButton.Left := Width - BorderSize;
          FActivateButton.Anchors := [akRight, akBottom];
        end;
    end;
  end;
end;

procedure THidePanel.SetState(AState: Boolean);
begin
  if AState then
  begin
    FActivateButton.Caption := '>';
    FOldAlign := Align;
    if FOldAlign = alClient then
      Align := alLeft;
    Width :=  BorderSize;
  end
  else
  begin
    FActivateButton.Caption := '<';
    if FOldAlign = alClient then
      Align := FOldAlign
    else
      Width := FOldWidth;
  end;
end;

procedure THidePanel.Resize;
begin
  if not FExpandState then
    FOldWidth := Width;
  inherited Resize;
end;

function THidePanel.CanResize(var NewWidth, NewHeight: Integer): Boolean;
begin
  Result := inherited CanResize(NewWidth, NewHeight);
  if FExpandState then
    NewWidth := BorderSize;
end;

end. 
```

测试代码：

```
unit Unit1;

interface

uses
  Controls, Forms, Unit2, ExtCtrls;

type
  TForm1 = class(TForm)
    procedure FormClick(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormClick(Sender: TObject);
begin
  with THidePanel.Create(Self) do
  begin
    Align := alLeft;
    Parent := Self;
  end;
  with TSplitter.Create(Self) do
  begin
    Left := 200;
    Parent := Self;
  end;
  with THidePanel.Create(Self) do
  begin
    Align := alClient;
    Parent := Self;
  end;
end;

end. 
```

# shell - 在第 n 行将第 n 个字段从 file1 替换为 file2 的 AWK 命令

> ID：15856311
> 
> 赞同：0
> 
> 时间：2013-04-06T21:36:58.517
> 
> 标签：shell, sed, awk, gawk

我有两个包含以下记录的文件：

`File1`：

```
1,2,3,a|x|z,4,5 
```

和

`File2`：

```
1,2,3,a|x|z,4,5
1,2,3,a|x|z,4,5
1,2,3,a|x|z,4,5
1,2,3,a|x|z,4,5 
```

这里有6个字段分隔`,`

如何分别用 a、x 和 z替换`a|x|z`第 2、3 和 4 行中的第四个字段（即）。`File2``File1`

我真正的问题是，第四个字段不会总是`a|x|z`，但它总是`|`分开的

我考虑的输出如下。

`File2`：

```
1,2,3,a|x|z,4,5
1,2,3,a,4,5
1,2,3,x,4,5
1,2,3,z,4,5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:58:10.823

```
$ awk 'FNR==NR{split($4,f1,"|");next}FNR>1{$4=f1[FNR-1]}1' FS=, OFS=, file1 file2
1,2,3,a|x|z,4,5
1,2,3,a,4,5
1,2,3,x,4,5
1,2,3,z,4,5 
```

注意：这假设`file1` *ie 3*中的子字段数等于要在`file2` *3 中再次替换的行数（第 2、3、4 行）*。如果不是这种情况，您应该描述如果说子字段的数量仍然是 3 但文件中的行数是 10 会发生什么？

# c# - 从后端c#的gridview中删除一行

> ID：15856320
> 
> 赞同：0
> 
> 时间：2013-04-06T21:37:49.433
> 
> 标签：c#, asp.net, sql-server

我正在尝试删除后端的 gridview 行。当我单击`delete`它时，它会从 中删除`gridview`，但它不会从数据库中删除。谁能明白为什么会这样？我的代码如下：

```
protected void GVMyBookings_DeleteBooking(object sender, GridViewDeleteEventArgs e)
{
     string connstring = ConfigurationManager.ConnectionStrings["BookingConn"].ToString();
     SqlConnection MyConnection = new SqlConnection(connstring);

     MyConnection.Open();

     SqlDataSource SDSBooking= new SqlDataSource();
     SDSBooking.DeleteCommand = "DELETE FROM Tbl_Booking WHERE BookingID_PK = @BookingID_PK";
     SDSBooking.DeleteParameters.Add("@BookingID_PK", GVMyBookings.Rows[e.RowIndex].Cells[0].ToString());
     SDSBooking.ConnectionString = connstring;

     GVMyBookings.DataSource = SDSBooking;
     GVMyBookings.DataBind();
     MyConnection.Close();
} 
```

网格视图是：

```
<asp:GridView ID="GVMyBookings" runat="server" GridLines="Vertical" AllowSorting="True"
    AutoGenerateColumns="False" AutoGenerateDeleteButton="true" 
    OnRowDeleting="GVMyBookings_DeleteBooking" EmptyDataText="You have no upcoming bookings" >
    <RowStyle BackColor="#e5ecbf" />
    <Columns>
        <asp:BoundField DataField="BookingID_PK"  />
        <asp:BoundField DataField="BookingDate" HeaderText="Booking Date" 
            SortExpression="BookingDate" DataFormatString="{0:d}" />
        <asp:BoundField DataField="RoomName" HeaderText="Room Name" 
            SortExpression="RoomName" />
        <asp:BoundField DataField="StartTime" HeaderText="Start Time" 
            SortExpression="StartTime"/>
        <asp:BoundField DataField="EndTime" HeaderText="End Time" 
            SortExpression="EndTime" />
        <asp:BoundField DataField="StaffUID" HeaderText="StaffUID" 
            SortExpression="StaffUID" Visible="false" />
    </Columns>
    <HeaderStyle BackColor="#264409" Font-Bold="True" ForeColor="White" />
    <AlternatingRowStyle BackColor="White" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:46:29.300

似乎您的查询不正确

```
DELETE * FROM Tbl_Booking WHERE ID=@BookingID_PK 
```

改用这个

```
DELETE FROM Tbl_Booking WHERE ID=@BookingID_PK 
```

`@`从此行 中删除符号

```
SDSBooking.DeleteParameters.Add("BookingID_PK",...); 
```

然后针对数据源显式调用 Delete

```
... 
SDSStudents.ConnectionString = connstring;
SDSStudents.Delete();
GridView1.DataSource = SDSStudents;  
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:18:55.177

您从数据库中删除记录的代码序列应该是这样的。

```
//Declaring the datasource.
SqlDataSource SDSBooking= new SqlDataSource();

//Providing the delete command.
SDSBooking.DeleteCommand = "DELETE FROM Tbl_Booking WHERE BookingID_PK = @BookingID_PK";

//Adding the parameter for deleting the record.
SDSBooking.DeleteParameters.Add("BookingID_PK", GVMyBookings.Rows[e.RowIndex].Cells[1].Text);

//Providing the connection string.
SDSBooking.ConnectionString = connstring;

//Executing the delete method of the SqlDataSouce. 
//It is this line that will actually delete your record.
SDSBooking.Delete(); 
```

在此之后，您可以将此数据源分配给您的 gridview。

**注意：**对于`GVMyBookings.Rows[e.RowIndex].Cells[1].Text`，您需要确保您的数据绑定字段位于`1`TableCellCollection 中的索引处。

如果您在它之前生成一些其他列，您可能需要更改。

因为在您的情况下，删除按钮将在您的数据绑定字段之前生成。因此，删除按钮将位于索引 0，而您的数据绑定字段 *BookingID_PK* 将位于索引 1。

# real-time - 从网络摄像头到网站的实时视频流

> ID：15856323
> 
> 赞同：1
> 
> 时间：2013-04-06T21:37:59.427
> 
> 标签：real-time, webcam, live-streaming

试图找出允许用户启用他们的网络摄像头实时流式传输到我的服务器的最佳方法，以便其他人可以查看流。

我在这里阅读了一些帖子，但还没有看到一个很好的解决方案示例。

真的只是在寻找需要做什么才能打开他们的网络摄像头并将提要流式传输到我的服务器，以及需要做什么才能将该提要推送到其他人可以查看的页面。

我相信 Adob​​e Flash Player 将是为其他人接收提要和显示的最佳选择，但这里再次需要一些指导，了解如何将它们组合在一起。

任何方向都非常感谢！

谢谢，

编码器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:57:11.627

您将需要 Javascript + Adob​​e Flash Player，用户将授予访问其 cam 的权限。

对于 Adob​​e：http: [//www.adobe.com](http://www.adobe.com)

对于 Javascript：$int 事件 startcam-on.user open.? Rec.begin (int)

# memory - MASM，从某个内存点输出

> ID：15856324
> 
> 赞同：0
> 
> 时间：2013-04-06T21:38:10.193
> 
> 标签：memory, assembly, output, masm

这个问题的读者。

我对组装并不陌生。但我是 MASM 的新手。（事实上​​，我用了大约 8 年的铁杆清洁 tasm 东西，甚至没有一分钟使用单个宏，嘿嘿）。

现在，我必须编写一个简单的程序。我已经做到了它的主要逻辑。但是输出有一些问题。当我使用

```
output <some-variable-name> 
```

它使事情成为-它输出字符。但是现在我想不是从某个变量的开头开始输出，而是从内存中的特定地址开始输出。现在我这样做：

```
lea eax, <some-variable-name>
mov esi, eax
... manipulations with address in esi, like 'add esi, ebx' and so on...
output esi 
```

但这行不通。编译器说“错误 A2070：无效的指令操作数”。我使用 Microsoft 宏汇编程序 6.11 版。

提前致谢。对不起我的英语不好。

UPD：“输出”宏的定义，取自包含的“io.h”文件：

```
output      MACRO  string,xtra         ;; display string

            IFB    <string>
            .ERR <missing operand in OUTPUT>
            EXITM
            ENDIF

            IFNB   <xtra>
            .ERR <extra operand(s) in OUTPUT>
            EXITM
            ENDIF

            push   eax                 ;; save EAX
            lea    eax,string          ;; string address
            push   eax                 ;; string parameter on stack
            call   outproc             ;; call outproc(string)
            pop    eax                 ;; restore EAX
            ENDM 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:50:32.060

在这种情况下的解决方案是使用以下：

```
lea eax, <some-variable-name>
mov esi, eax
... manipulations with pointer, like 'add esi, edx' and so on ...
push esi
call outproc 
```

# jfreechart - 使用 JFreeChart 在 XY 空间中绘制轨迹

> ID：15856325
> 
> 赞同：1
> 
> 时间：2013-04-06T21:38:21.913
> 
> 标签：jfreechart

我想在二维空间中绘制粒子的轨迹。

我的数据是一系列 X，Y 坐标，我想绘制这些。

将不胜感激任何指向显示如何执行此操作的示例的指针。

轨迹图的示例如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/QvgGq.gif)

注意：我想将路径显示为一条连续的线，箭头显示运动方向。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:54:30.403

`ChartFactory.createScatterPlot()`，如图所示[，](https://stackoverflow.com/search?q=user:230513%20%5Bjfreechart%5D%20ChartFactory.createScatterPlot)可能是一个很好的起点。

![图片](https://i.stack.imgur.com/W0UFV.png)

`FastScatterPlot`，在此处引用并[在](http://www.java2s.com/Code/Java/Chart/JFreeChartFastScatterPlotDemo.htm)[此处](https://stackoverflow.com/a/8533194/230513)说明，可能需要较大的数据集。

附录：查看您修改后的问题，我还没有见过这样的渲染器。您可能会查看 a [`org.jfree.chart.annotations`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/package-summary.html)，例如`XYShapeAnnotation`使用`GeneralPath`. 这些[`ArcTest`](https://stackoverflow.com/search?q=user:230513%20%5Bjfreechart%5D%20ArcTest)变化可能会提供指导。另请参阅[`PointyThing`](https://stackoverflow.com/a/15607737/230513)。

![图片](https://i.stack.imgur.com/5Wunx.png)

# opengl - 在两个模型视图矩阵之间进行插值

> ID：15856329
> 
> 赞同：2
> 
> 时间：2013-04-06T21:39:06.080
> 
> 标签：opengl, rotation, translation, model-view, linear-interpolation

在 OpenGL 中，给定两个相机位置（即模型视图矩阵），我想在它们之间平滑过渡。也就是说，我想在两个模型视图矩阵之间进行插值。我看过很多关于使用 SLERP 在两个旋转矩阵之间进行插值的资源，但是对于相机位置，我们还有一个平移组件。**这样做是否像将 SLERP 用于 3x3 旋转矩阵和将 LERP 用于模型视图矩阵的 3x1 平移组件一样简单？**我的直觉告诉我，可能没有这么简单，因为 3x1 平移组件不是相机的世界空间位置，对吧？

如果我有每个相机位置的实际世界位置，我想我可以将这些步骤分解为两个 OpenGL 命令：

```
glMultMatrix(newRotation); // rotation using SLERP
glMultMatrix(newTranslation); // translation using LERP 
```

如果我理解正确的话，这里的newTranslation和模型视图矩阵的3x1平移分量不一样，而是相机的世界空间位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:57:10.183

为什么不在相机位置/目标之间进行插值？

```
startPos = x
endPos = y
startTarget = xx
endTarget = yy 
```

并且在`update()`

```
currentPos = interpolate(startPos, endPos, time_param);
currentTarget = interpolate(startTarget, endTarget, time_param);

camera_matrix = lookAt(currentPos, targetPos, upVector); 
```

我认为以这种方式控制相机移动更简单。

以下是更高级的插值方法：[http ://sol.gfxile.net/interpolation/](http://sol.gfxile.net/interpolation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-07T05:28:38.173

线性变换对于“3x1”部分是正确的，要弄清楚原因，让我们深入研究矩阵变换函数。

* * *

假设我们有模型视图矩阵：

```
{ a, b, c, 
  d, e, f,
  g, h, i,
  x, y, z }

Where a->i is our 3x3 rotation/scale component
and x->z is the "3x1" part you were talking about. 
```

让我们使用顶点位置：`{ A, B, C }`

关于这些矩阵/向量需要注意的一点是，它们实际上是“4x4”和“4x1”矩阵的简写，我们用“identity”值替换 4x4 的缺失部分，用“1”替换最后一个值的 4x1。

这意味着我们的实际工作值是：

```
{ a, b, c, 0, 
  d, e, f, 0,
  g, h, i, 0,
  x, y, z, 1 }

and
{ A, B, C, 1 } 
```

现在我们已经有了很好的匹配矩阵维度，我们可以应用`4x4 * 4x1`矩阵乘法运算，这会给我们一个`4x1`结果。

（如果你不知道怎么做，去谷歌搜索，有一大堆血统资源，做起来很简单）

这给了我们结果：

```
{
    A*a + B*d + C*g + 1*x,
    A*b + B*e + C*h + 1*y,
    A*c + B*f + C*i + 1*z,
    A*0 + B*0 + C*0 + 1*1,
}
or (simplified):
{
    A*a + B*d + C*g + x,
    A*b + B*e + C*h + y,
    A*c + B*f + C*i + z,
    1,
} 
```

请注意，每个组件都简单地具有或添加到它`x`，并且这些值不会以任何其他方式使用。`y``z`

对矩阵的“3x1”值没有做任何特别的事情，它只是将它们作为位置偏移添加，因此，对它们进行线性插值将导致“相机”的线性位置移动。

# python - 一个脚本制作一个脚本来写多个相似的文件

> ID：15856331
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:39:12.983
> 
> 标签：python, bash, templates

我正在尝试编写一个脚本`A`，它将一个 VHDL 文件`X`作为输入并创建一个脚本`B`来生成几个类似`X`但差异很小的文件（例如信号的初始值更改）。我希望脚本考虑到空白以保持原始文件的外观`X`。我正在尝试在 Python 中执行此操作，但是如果您对 bash 有任何帮助，那也会有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:00:04.797

如果您不想继续使用依赖项，Bash 是最佳选择，您可以使用任何基于 nix 的系统中可用的 grep、sed、cut 或 awk

对于需要做的每个不同的输出文件，

逐行读取输入文件A。

在每一行中使用 grep 评估您自己的模式，如果它与您的“动态”值匹配，则替换该行的内容。

将每个处理的行附加到一个新文件并重复，直到完成所有输出文件。

这样做的困难在于，如果您发现自己不习惯使用此工具，您可能会花费大量时间，但并不比任何其他编程语言都难

# ruby - 如何使用 rspec 在 ruby 中模拟 super？

> ID：15856334
> 
> 赞同：23
> 
> 时间：2013-04-06T21:39:20.850
> 
> 标签：ruby, rspec, rspec2

我通过创建一个扩展到库类的子类来扩展现有库。

在子类中，我能够测试`initialize`方法中的大部分功能，但无法模拟`super`调用。子类如下所示。

```
class Child < SomeLibrary
    def initialize(arg)
        validate_arg(arg)
        do_something
        super(arg)
    end

    def validate_arg(arg)
        # do the validation
    end

    def do_something
        @setup = true
    end
end 
```

如何编写 rspec 测试（使用 mocha）以便可以模拟`super`呼叫？请注意，我正在测试类中`initialize`方法的功能`Child`。`super`我是否必须创建在提供额外参数时不调用的单独代码路径？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-07T00:44:01.587

你不能嘲笑`super`，你也不应该。当您模拟某些内容时，您正在验证是否收到了特定消息，而`super`不是消息 - 它是关键字。

相反，要弄清楚如果`super`调用丢失，这个类的哪些行为会改变，并编写一个练习和验证该行为的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-12-11T09:47:56.447

正如@myron 建议的那样，您可能想测试发生在`super`.

但如果你真的想这样做，你可以这样做：

```
expect_any_instance_of(A).to receive(:instance_method).and_call_original 
```

假设

```
class B < A
  def instance_method
    super
  end
end

class A
  def instance_method
    #
  end
end 
```

免责声明`expect_any_instance_of`是弱测试的标志（[见](http://archive.today/x8d6J)）：

> 在处理遗留代码时，此功能有时很有用，但通常我们不鼓励使用它，原因有很多：
> 
> rspec-mocks API 是为单个对象实例设计的，但此功能适用于整个对象类。因此，存在一些语义上令人困惑的边缘情况。例如，在 expect_any_instance_of(Widget).to receive(:name).twice 中，不清楚特定实例是否应该接收 name 两次，或者是否预期两个接收总数。（是前者。）

> 使用此功能通常是一种设计气味。可能是您的测试试图做的太多，或者被测对象太复杂。

> 它是 rspec-mocks 中最复杂的功能，历史上收到的错误报告最多。（核心团队都没有积极使用它，这无济于事。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-28T19:59:30.207

测试这一点的一个好方法是设定超类采取的一些行动的期望 - 示例：

```
class Some::Thing < Some
 def instance_method
    super
 end
end 
```

和超类：

```
class Some
  def instance_method
     another_method
  end

  def self.another_method # not private!
     'does a thing'
  end
end 
```

现在测试：

```
 describe '#instance_method' do 
    it 'appropriately triggers the super class method' do
      sawm = Some::Thing.new
      expect(sawm).to receive(:another_method)
      sawm.instance_method
    end
 end 
```

**这一切都决定了在超类上调用了 Super**

此模式的有用性取决于您如何构建测试/通过`super`所应用的方法对子/派生类的突变有什么期望。

另外 - 密切关注`class`和`instance`方法，您将需要相应`allows`地调整`expects`

YMMV

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-15T14:04:53.873

这个聚会有点晚了，但你也可以做的是放弃使用`super`关键字，而是做

```
class Parent
  def m(*args)
  end
end

class Child < Parent
  alias super_m m

  def m(*args)
    super_m(*args)
  end
end 
```

这样，您的超级方法可以像任何其他方法一样访问，并且可以像任何其他方法一样被存根。主要的缺点是您必须显式地将参数传递给对 super 方法的调用。

# java - JSF 中的会话超时

> ID：15856337
> 
> 赞同：3
> 
> 时间：2013-04-06T21:39:24.797
> 
> 标签：java, jsf, jsf-2, session-timeout

我使用以下代码在 JSF 中创建会话对象。问题是，当我尝试访问 userdet 对象时，它给了我异常，可能是因为会话超时。无论如何增加JSF中的会话超时。

```
 FacesContext context = FacesContext.getCurrentInstance();
            HttpSession session = (HttpSession) context.getExternalContext().getSession(true);
            session.setAttribute("userdet",user); 
```

当我使用 servlet 时，我使用以下代码，但它也适用于 JSF 吗？

```
<web-app ...>
    <session-config>
        <session-timeout>20</session-timeout>
    </session-config>
</web-app> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T21:47:37.817

是的。JSF 应用程序的会话超时也在 web.xml 中设置。

事实上，JSF 使用 Java Servlet 来处理 http 请求和响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T02:11:34.110

正如 dcernahoschi 所说，web.xml 将为 JSF 定义会话超时。

这也可以通过 HttpSession 以编程方式设置，使用 setMaxInactiveInterval 方法。

# c++ - C++ 堆栈：未初始化的局部变量

> ID：15856339
> 
> 赞同：-7
> 
> 时间：2013-04-06T21:39:37.940
> 
> 标签：c++

```
#include "iostream"
using namespace std;

int main()
{
int a,d,D,c,C,b,B,r,R;
char f,y,Y,n,N;

cout << "Press D - d, for dog,C -c for cat, B - b, for bird or R - r for Reptile:";
cin >> a;

if (a == d || a == D || a == c || a == C || a == b || a == B || a == r || a == R);

        if (a == d || a == D || a == c || a == C)

                if (a == d || a == D )
                 cout << "Is it neutered(Y/N)";
        cin >> f;
        if (f == Y || f == y)
                cout << "50 Euros.";
        else if (f == n || f == N)
                cout << "80 Euros.";

        if (a == c || a == C )
                cout << "Is it neutered(Y/N)";
        cin >> f;
        if (f == Y || f == y)
                cout << "40 Euros.";
        else if (f == n || f == N)
                cout << "60 Euros.";
        if (a == r || a == R || a == B || a == b)
                cout <<"10 Euros.";

if (a != d && a != D && a != c && a != C && a != b && a != B && a != r && a != R)
                cout << "Error!";

        system("pause");

        return 0;} 
```

我得到的错误：

```
...\12b.cpp(21): warning C4390: ';' : empty controlled statement found; is this the intent?
...\12b.cpp(20): error C4700: uninitialized local variable 'd' used
...\12b.cpp(20): error C4700: uninitialized local variable 'D' used
...\12b.cpp(20): error C4700: uninitialized local variable 'c' used
...\12b.cpp(20): error C4700: uninitialized local variable 'C' used
...\12b.cpp(20): error C4700: uninitialized local variable 'b' used
...\12b.cpp(20): error C4700: uninitialized local variable 'B' used
...\12b.cpp(20): error C4700: uninitialized local variable 'r' used
...\12b.cpp(20): error C4700: uninitialized local variable 'R' used
...\12b.cpp(25): error C4700: uninitialized local variable 'Y' used
...\12b.cpp(25): error C4700: uninitialized local variable 'y' used
...\12b.cpp(27): error C4700: uninitialized local variable 'n' used
...\12b.cpp(27): error C4700: uninitialized local variable 'N' used 
```

为什么我会收到此错误？我不明白？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:43:11.613

好的，让我们让这段代码更容易一些。我认为你打算做的是这样的：

```
char selection;
cout << (as before)
cin >> selection;

selection = tolower(selection);

switch(selection) {
case 'd':
   // stuff for dogs here
   break;
case 'c':
   // stuff for cats
   break;
// etc.
default:
   // error case
} 
```

正确的？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T21:44:01.297

我认为很明显，而不是

```
if (a == d || ... 
```

你真的想要

```
if (a == 'd' || ... 
```

即您想将变量`a`与字符进行比较`'d'`。你已经多次犯了同样的错误，所以把它们都修好，看看还剩下什么错误。

此外，您错误地声明`a`为`int`when is should be a `char`. 你说对了，`f`但不是`a`出于某种原因。

# c# - 打印 DataGridView

> ID：15856342
> 
> 赞同：0
> 
> 时间：2013-04-06T21:39:50.877
> 
> 标签：c#, winforms, visual-studio, printing, datagridview

我已经设置了一个表单，其中有一个带有预订的 DataGridView，目前我可以打印 DataGridView，但只能打印显示的内容，因此不会打印任何只能通过向下滚动才能看到的数据。

如何更改我的代码，以便当我单击打印按钮时，所有内容（包括通过滚动查看的数据）都打印到页面上？

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace project
{
    public partial class frmViewBookings : Form
    {
        public frmViewBookings()
        {
            InitializeComponent();
        }

        private void btnClose_Click(object sender, EventArgs e)
        {
            Form3 mainpage = new Form3();
            mainpage.Show();
            this.Close();
        }

        private void frmViewBookings_Load(object sender, EventArgs e)
        {
            // TODO: This line of code loads data into the 'usersDataSet1.Booking' table. You can move, or remove it, as needed.
            this.bookingTableAdapter.Fill(this.usersDataSet1.Booking);    
        }

        private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
        {
            Bitmap bm = new Bitmap(this.dataGridView1.Width, this.dataGridView1.Height);
            this.dataGridView1.DrawToBitmap(bm, new Rectangle(0, 0, this.dataGridView1.Width, this.dataGridView1.Height));
            e.Graphics.DrawImage(bm, 0, 0);
        } 

        private void btnPrint_Click(object sender, EventArgs e)
        {
            printDocument1.Print();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:29:57.780

您要做的是创建一个虚拟表单，该表单与您要打印的控件的大小相同，然后将控件添加到虚拟表单并显示表单并在虚拟表单上打印控件。

我是这样做的：

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{
    //Create bitmap
    Bitmap image = new Bitmap(dataGridView1.Width, dataGridView1.Height);
    //Create form
    Form f = new Form();
    //add datagridview to the form
    f.Controls.Add(dataGridView1);
    //set the size of the form to the size of the datagridview
    f.Size = dataGridView1.Size;
    //draw the datagridview to the bitmap
    dataGridView1.DrawToBitmap(image, new Rectangle(0, 0, dataGridView1.Width, dataGridView1.Height));
    //dispose the form
    f.Dispose();
    //print
    e.Graphics.DrawImage(image, 0, 0);
} 
```

# asp.net - ServiceStack IOC 未在 Attribute 中注入属性（对象为空）

> ID：15856344
> 
> 赞同：3
> 
> 时间：2013-04-06T21:40:21.930
> 
> 标签：asp.net, servicestack

我正在尝试记录/保留我的所有请求/响应，并认为我尝试使用全局属性，但是当我实际使用 repo 时，它是空的吗？这可能吗？

还有其他方法可以实现我想要做的事情吗？

谢谢你，斯蒂芬

**属性**

```
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = false)]
public class LogRequestAttribute : RequestFilterAttribute 
{
    public IRepository Repo { get; set; }

    public LogRequestAttribute(ApplyTo applyTo)
        : base(applyTo)
    {
        this.Priority = -200;
    }

    public LogRequestAttribute()
        : this(ApplyTo.All) {}

    public override void Execute(IHttpRequest req, IHttpResponse res, object requestDto)
    {
        try
        {
            // Convert the req obj into something that can be persisted...

            Repo.LogRequest("Logging the rquest");
        }
        catch (Exception ex)
        {
            System.Diagnostics.Trace.TraceError(ex.ToString());
        }
    }
} 
```

**应用主机配置**

```
public override void Configure(Container container)
{
    //Set JSON web services to return idiomatic JSON camelCase properties
    ServiceStack.Text.JsConfig.EmitCamelCaseNames = true;

    //Show StackTrace in Web Service Exceptions
    SetConfig(new EndpointHostConfig { DebugMode = true });

    //Register any dependencies you want injected into your services
    container.Register<ICacheClient>(new MemoryCacheClient());

/*            // Redis
    container.Register<IRedisClientsManager>(c => new PooledRedisClientManager());
    container.Register<IRepository>(c => new Repository(c.Resolve<IRedisClientsManager>()));*/

    container.Register<IRepository>(new Repository());
    container.Register<IBusinessService>(new BusinessService());

    //Configure Custom User Defined REST Paths for your services
    /*ConfigureServiceRoutes();*/

    //Add a request filter to check if the user has a session initialized
    /*this.RequestFilters.Add((httpReq, httpResp, requestDto) =>
    {
        var sessionId = httpReq.GetCookieValue("user-session");
        if (sessionId == null)
        {
            httpResp.ReturnAuthRequired();
        }
    });*/

    RequestFilters.Add((httpReq, httpResp, requestDto) => new LogRequestAttribute().Execute(httpReq, httpResp, requestDto));
} 
```

**存储库**

```
public interface IRepository
{
    void LogRequest(string request);
    void LogResponse(string request);
}

public class Repository : IRepository
{
    private static readonly ILog Log = LogManager.GetLogger("API.Repository");

    public Repository()
    {

    }

    public void LogRequest(string request)
    {
        Log.Debug(request);
    }

    public void LogResponse(string request)
    {
        Log.Debug(request);
    }
} 
```

**更新**

```
//Add a 'global' request filter
this.RequestFilters.Add((httpReq, httpResp, requestDto) =>
{
    /* Code here */
});

//Add a 'global' response filter
this.ResponseFilters.Add((httpReq, httpResp, responseDto) =>
{
    /* Code here */
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T01:04:43.263

如果您尝试在[ServiceStack](http://www.servicestack.net)中记录请求，您应该查看[Request Logger](https://github.com/ServiceStack/ServiceStack/wiki/Request-logger)插件是否有用。RequestLogsFeature[插件](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Admin/RequestLogsFeature.cs)允许您使用自己的自定义[IRequestLogger](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/ServiceHost/IRequestLogger.cs)，而不是默认使用的[InMemoryRollingRequestLogger](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Providers/InMemoryRollingRequestLogger.cs)。

### 过滤器属性

尽管您已经正确定义了请求过滤器属性，但您并没有正确应用它，应该像使用任何其他 C# 属性（即装饰）一样使用它。[过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)只能在**服务类型**、其**请求 DTO**或服务**操作**上进行修饰，其中它仅运行到它们所应用的范围**。**

 ******### 全局请求过滤器

没有**Global** Request Filter **Attribute**，[Global Request 过滤器](https://github.com/ServiceStack/ServiceStack/wiki/Request-and-response-filters)只允许您指定要执行的委托，这就是这里发生的一切：

```
RequestFilters.Add((httpReq, httpResp, requestDto) => 
  new LogRequestAttribute().Execute(httpReq, httpResp, requestDto)); 
```

**LogRequestAttribute**类型的新实例是内联构造的（如上所示，不是从 IOC 解析的），因此它不是自动连接的。您正在调用的方法是 FilterAttribute 的实例这一事实无关紧要，因为所有 C# 委托正在调用的都是空 LogRequestAttribute 实例上的方法。

如果在内部注册全局过滤器，`Configure()`您可以`container`直接访问，例如：

```
RequestFilters.Add((httpReq, httpResp, requestDto) => 
  container.Resolve<IRepository>().LogRequest("Logging the request")); 
```

在其他任何地方，您都可以使用单例访问 ServiceStack 的 IOC `AppHostBase.Resolve<T>()`：.******

# list - 将元素替换为列表方案

> ID：15856346
> 
> 赞同：1
> 
> 时间：2013-04-06T21:40:33.137
> 
> 标签：list, scheme, racket

我需要用 Scheme 中的另一个元素替换列表中的一个元素，但问题是我需要替换的列表可以嵌套。

例如，如果我有列表`'(1 (2 3 4 5) (6 7))`并且需要将 5 替换为 9，那么我的输出应该是`'(1 (2 3 4 9) (6 7))`.

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:53:21.883

解决此类问题有一个基本策略：

1.  首先，解决一个平面列表。即，编写函数以便在输入列表没有子列表的情况下工作。
2.  然后，添加一个条件，以便如果您正在检查的元素是一个列表，则使用该列表递归到您的函数中。

这是一些骨架代码：

```
(define (replace lst from to)
  (cond ((null? lst) '())                ;; end of input
        ((list? (car lst)) <???>)        ;; encountered a sublist
        ((equal? (car lst) from) <???>)  ;; found the element we're replacing
        (else <???>)))                   ;; everything else 
```

请注意，第二个`cond`子句 ,`(list? (car lst))`是支持子列表的版本中唯一的新内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-02T00:16:35.530

这是一个功能：

```
(define (replace L new old)
   (cond ;;((null? L) L)
         ((list? L)
          (map
              (lambda (lst) (replace lst new old))
              L))
         (else
              (if (equal? L old)
                   new
                   L)))) 
```

使用示例：

```
> (replace '(1 (1 2 3 4 (5 6 3) 3 4)) 7 3)
'(1 (1 2 7 4 (5 6 7) 7 4))

> (replace '() 7 3)
'()

> (replace '(1 (1 2 3 4) 3 4) 7 3)
'(1 (1 2 7 4) 7 4) 
```

或者：

```
(define (replace L new old)

  (if (list? L)
      (map
       (lambda (lst) (replace lst new old))
       L)
      (if (equal? L old)
      new
      L))) 
```

例子：

(替换'(1 (1 2 3 4 (5 6 3) 3 4)) 7 3) -> '(1 (1 2 7 4 (5 6 7) 7 4))

# python - 如何在 PyGraphviz 中的同一组节点之间绘制多条边？

> ID：15856351
> 
> 赞同：0
> 
> 时间：2013-04-06T21:41:11.107
> 
> 标签：python, python-2.7, python-3.x, graphviz, pygraphviz

每当我尝试在两个相同节点之间绘制多条边时，Pygraphviz 只考虑最新的边。有没有办法绕过这个？

**示例代码：**

```
import pygraphviz as pgv
A = pgv.AGraph()
A.add_node(1, style='filled')
A.add_node(2, style='filled')
A.add_edge(1, 2, style='filled', label='aron')
A.add_edge(1, 2, style='filled', label='jessica')
A.add_edge(1, 2, style='filled', label='diana')
A.layout()
A.draw('simple.png', prog='dot') 
```

**生成的图表：** ![在此处输入图像描述](https://i.stack.imgur.com/WBPmN.png)

# java - 按下 X 按钮时复选框的状态更改

> ID：15856354
> 
> 赞同：0
> 
> 时间：2013-04-06T21:41:21.073
> 
> 标签：java, swing, checkbox, jframe

我遇到了这个问题：我有 JMenu，它由 CheckBox 组成。如果选中 (ItemEvent.selected)，它会打开一个新的 JFrame，如果未选中 (ItemEvent.Deselected)，我会处理 JFrame。一切正常。但是当我按下设置为 JFrame.DISPOSE_ON_CLOSE 的窗口顶部的“x”按钮时，我需要取消选中 JMenu 中的复选框。现在是这样的：你检查，然后程序打开新窗口，你用“x”按钮关闭它，然后你再次打开菜单并选中复选框，但窗口已经关闭。我试图添加一些clickListener，但它！在关闭框架时被破坏了。欢迎任何建议:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T21:45:32.513

由于问题没有很好地提出，因此很难确定您的问题到底是什么。但是...如果您想在窗口关闭时自动取消选中该框，您可以在 JFrame 上使用窗口侦听器。

```
frame.addWindowListener( new WindowAdapter() {
    @Override
    public void windowClosing(WindowEvent we) {
        //Uncheck the box
    }
} ); 
```

# java - java中未处理的静态块

> ID：15856355
> 
> 赞同：7
> 
> 时间：2013-04-06T21:41:37.163
> 
> 标签：java

在使用类名访问最终静态变量时，为什么没有在 java 中处理静态块？

```
class Foo {
  public static final int BAR;
  static {
    System.out.println("Hello");
    }
  }
class Baz {
  public static void quux() {
    System.out.println(Foo.BAR);
  }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-06T21:44:57.997

有时会 - 这取决于变量是否实际上是*常量*：

*   它必须是字符串或原始变量（*可能是*具有空值的任何其他类；我必须检查）
*   初始化表达式必须是常量表达式

如果是这种情况，对变量的任何引用都会有效地转换为值。所以在这段代码中：

```
class Foo {
    public static final int BAR = 5;
}

class Baz {
    public static void quux() {
        System.out.println(Foo.BAR);
    }
} 
```

方法 in`Baz`被编译成与以下相同的代码：

```
public static void quux() {
    System.out.println(5);
} 
```

`Foo.BAR`字节码中没有留下的提示，因此`Foo`不需要在方法执行时进行初始化。

如果你想防止这种情况发生，你总是让它不被变量初始化器中的常量表达式初始化。例如：

```
class Foo {
    public static final int BAR;

    static {
        BAR = 5;
    }
}

class Baz {
    public static void quux() {
        System.out.println(Foo.BAR);
    }
} 
```

就编译器而言，这足以使其`Foo.BAR`不算作常数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-28T05:14:34.500

静态块只会在您的类加载时执行。这将在以下情况下完成：

1.  最初当您的程序启动时
2.  如果您在运行时手动加载您的类

    例如：使用 Class.forName("Foo"))

# django - Heroku collectstatic 在部署期间未运行

> ID：15856358
> 
> 赞同：5
> 
> 时间：2013-04-06T21:42:17.630
> 
> 标签：django, heroku, django-admin

我有一个 django 应用程序，我成功地部署到 heroku。当我在本地干运行 collectstatic 命令时，一切正常。

```
python manage.py collectstatic --dry-run --noinput
....
Pretending to copy '/Users/hari/.virtualenvs/bsc2/lib/python2.7/site-packages/django/contrib/admin/static/admin/js/admin/ordering.js'
Pretending to copy '/Users/hari/.virtualenvs/bsc2/lib/python2.7/site-packages/django/contrib/admin/static/admin/js/admin/RelatedObjectLookups.js'

71 static files copied. 
```

尽管如此..my django admin staticfiles 并没有被使用，我在heroku 上获得了一个简单的django 管理站点，其中Debug 设置为False。

如果我将 Debug 设置为 True，我会在 heroku 上获得一个“丰富”的管理站点。将 Debug 设置为 True 或 False “git push heroku master” 命令终端输出没有任何关于收集静态文件的信息。

我尝试了使用 Heroku 的 gunicorn 的示例“helloworld”应用程序，它确实显示了“收集静态”消息。我还尝试将此代码片段插入到我的 urls.py 中。但这也无济于事。

从 django.conf 导入设置

```
if not settings.DEBUG:
    urlpatterns += patterns('',
    (r'^static/(?P<path>.*)$', 'django.views.static.serve', {'document_root': settings.STATIC_ROOT}), 
```

接下来，我尝试将以下内容添加到我的 heroku 配置中

```
heroku config:add DISABLE_COLLECTSTATIC=0 
```

但这也没有向我的 django 管理站点显示所有样式。

最后，我尝试使用我的 Procfile 切换到 gunicorn，但这也没有显示管理员样式。只有设置 Debug=True 才能显示我的管理员样式。

我在 Heroku 上使用 Django 1.4.2 和 1.5.1 进行了尝试，但都没有向我显示“正常”管理站点。有没有办法在不走 S3 路线的情况下将我的管理文件放在 heroku 上。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-07T04:08:02.313

> 命令终端输出没有关于收集静态文件的任何内容。

查看[heroku-buildpack-python:bin/steps/collectstatic](https://github.com/heroku/heroku-buildpack-python/blob/master/bin/steps/collectstatic) ，它似乎在显示消息之前尝试执行 a`collectstatic --dry-run --noinput`并将其输出到管道。这意味着，如果您的本地机器上没有出现错误，**您将永远不会在 heroku 上看到错误：它将静默失败**。（最好的失败；）`/dev/null``-----> Collecting static files`

 **您是否尝试过运行一次性工作者来测试 collectstatic 命令并查看其环境是否存在问题？

```
heroku run python manage.py collectstatic --dry-run --noinput 
```

如果此操作失败，它将为您提供错误或回溯以查看并进一步诊断问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T16:35:32.120

看看这个[Django 和静态资产](https://devcenter.heroku.com/articles/django-assets)。它似乎最近更新了，您可以使用这个[dj-static](https://github.com/kennethreitz/dj-static)包很好地提供静态文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-17T00:00:05.577

试试这三件事：

*   创建此 Heroku 配置变量：`DJANGO_SETTINGS_MODULE`值为 --`myapp.settings.prod`或适合您的 Heroku 设置文件
*   使用 Heroku 文档中描述的 Whitenoise： [https ://devcenter.heroku.com/articles/django-assets](https://devcenter.heroku.com/articles/django-assets)
*   签入并重新部署您的测功机：`git push heroku master`

我发现我错过了第一项，`DJANGO_SETTINGS_MODULE`“例如，命令行 collectstatic 可以工作，但没关系 b/c 它是一个短暂的测功机

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-06T23:21:32.600

把它扔在那里，因为愚蠢的错误发生：

我花了很多时间试图弄清楚为什么我的模块在本地工作正常时在 heroku 上找不到，只是意识到它被一个条目忽略了`.slugignore`**

# javascript - 使用 shift() 和 push() 循环数组值与使用计数器变量，最好的方法是什么？

> ID：15856359
> 
> 赞同：4
> 
> 时间：2013-04-06T21:42:18.827
> 
> 标签：javascript

我正在循环播放一组动画帧中的一组图像。有 7 张图像，从 1-7 循环完成动画。我需要这个动画无限循环，但我想知道其中哪一个是最好的方法：

**通过修改数组循环**

```
/* Pull image from start of array. */
var image = frames.shift();
/* Process image. */
...
/* Add image back to end of array. */
frames.push(image ); 
```

**使用计数器变量循环**

```
/* Pull image by counter offset. */
var image = frames[counter];
/* Process image. */
...
/* Increment or reset counter value. */
counter + 1 === frames.length ? counter = 0 : counter = counter + 1; 
```

我选择一个而不是另一个有什么原因吗？或者，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T21:47:50.730

修改数组将比简单地使用变量来跟踪您在数组中的位置更昂贵。更好的方法是，*如果*你无限循环，似乎只是使用一个`while`循环（而不是使用一个`for`你在里面重置计数器的循环）：

```
var i = 0;
while (true) {
    doSomething to array[i];

    i = (i+1) % array.length;
} 
```

*但是*，如果您的目标确实是每次经过给定的间隔时都无限期地进行动画，那么循环根本不理想。改为使用[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)。

```
var frames = ...; //your images
var i = 0;
function animate() {
    do something to frames[i];
    i = (i+1) % array.length;
}

setInterval(animate, time_between_runs); 
```

where`time_between_runs`是在再次调用该函数之前应该经过多少时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T22:04:15.757

一种可能性是放弃数组并使用链表。

使每一帧成为指向下一个对象的对象。然后最后一个指向第一个。然后你需要做的就是引用下一个对象。

```
var curr = first; // reference to first frame object

setInterval(function() {

    // process image
    curr.image.doSomething();

    // proceed to next
    curr = curr.next;

}, 1000); 
```

没有计数器可以用这种方式搞砸。

* * *

设置链表通常非常简单，只需对设置数组的当前代码稍作修改即可完成。

```
var first = new Frame(); // This is your entry point
var current = first;        // This holds the current frame during setup

for (var i = 0; i < totalFrames; i++) {
    current.next = new Frame();   // Make the current reference a new frame
    current = current.next;          // Make the new frame current
}

current.next = first; // circular reference back to the first.

function Frame() {
    // set up this frame
} 
```

然后`first`是你的起点。

* * *

或者链接可以在`Frame`构造函数中完成。

```
var first = new Frame(null); 
var current = first;

for (var i = 0; i < totalFrames; i++) {
    current = new Frame(current);
}

current.next = first;

function Frame(currFrame) {
    // link this frame to the given one
    if (currFrame)
        currFrame.next = this;

    // set up the rest of this frame
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T22:04:26.790

或者，我认为也可以使用循环链表。要将对象数组转换为循环链表：

```
frames.forEach(function(elem, index) { 
    elem.next = frames[index + 1] || frames[0];
}); 
```

现在您可以执行以下操作：

```
setInterval(function() {
    frame = frame.next;
    ....
}, delay); 
```

# android - 当我单击按钮时显示 Textview 然后显示地图

> ID：15856365
> 
> 赞同：0
> 
> 时间：2013-04-06T21:42:54.283
> 
> 标签：android, google-maps-api-3, textview, android-button

我希望我的程序在创建时运行 ClosestObject 函数，当用户单击按钮时，它应该运行函数 ShowMap 并显示地图..但是当我结合这是我的代码时它崩溃了

```
 protected void onCreate(Bundle savedInstanceState) {
                    super.onCreate(savedInstanceState);
                    setContentView(R.layout.activity_main);
                    showButton=(Button) findViewById(R.id.button1);
                    result = (TextView) findViewById(R.id.text1);
                    try {
                **//here I run Closest Object so I can display the result on the text box**
                          String Add= ClosestObject();

            } catch (ClientProtocolException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (JSONException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    } catch (IOException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
**// Here I set the test with closestObject result**
                    result.setText(buff.toString());
**//So when I click show the map**            
                    View.OnClickListener myhandler1 = new View.OnClickListener() {
                        public void onClick(View v) {
                        new TestGoogleMaps().execute("");
                        }
                      };
                    gps = new GPSTracker(MainActivity.this);

            // here it reads from gps

                    if(gps.canGetLocation()){

                 latitude = gps.getLatitude();
                 longitude = gps.getLongitude();

                    }

                    else
                    {
                        gps.showSettingsAlert();
                    }

            }

              class TestGoogleMaps extends AsyncTask<String, Void, String>{
           @Override
           protected String doInBackground(String... params) {
                   // TODO Auto-generated method stub
               try {

                   ShowMap();

               } catch (ClientProtocolException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               } catch (JSONException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               } catch (IOException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               }

           finally {

           }
                   return null;
           }
       }

} 
```

这是日志猫

```
04-06 21:40:31.774: W/dalvikvm(963): threadid=1: thread exiting with uncaught exception    (group=0x40a71930)
04-06 21:40:31.814: E/AndroidRuntime(963): FATAL EXCEPTION: main
04-06 21:40:31.814: E/AndroidRuntime(963): java.lang.RuntimeException: Unable to start   activity ComponentInfo{com.example.distancemap/com.example.distancemap.MainActivity}:   android.os.NetworkOnMainThreadException
04-06 21:40:31.814: E/AndroidRuntime(963):  at    android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-06 21:40:31.814: E/AndroidRuntime(963):  at and    roid.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-06 21:40:31.814: E/AndroidRuntime(963):  at     android.app.ActivityThread.access$600(ActivityThread.java:141)
04-06 21:40:31.814: E/AndroidRuntime(963):  at    android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-06 21:40:31.814: E/AndroidRuntime(963):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 21:40:31.814: E/AndroidRuntime(963):  at android.os.Looper.loop(Looper.java:137)
04-06 21:40:31.814: E/AndroidRuntime(963):  at android.app.ActivityThread.main(ActivityThread.java:5041)
04-06 21:40:31.814: E/AndroidRuntime(963):  at java.lang.reflect.Method.invokeNative(Native Method)
04-06 21:40:31.814: E/AndroidRuntime(963):  at java.lang.reflect.Method.invoke(Method.java:511)
04-06 21:40:31.814: E/AndroidRuntime(963):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-06 21:40:31.814: E/AndroidRuntime(963):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-06 21:40:31.814: E/AndroidRuntime(963):  at dalvik.system.NativeStart.main(Native Method)
04-06 21:40:31.814: E/AndroidRuntime(963): Caused by: android.os.NetworkOnMainThreadException
04-06 21:40:31.814: E/AndroidRuntime(963):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
04-06 21:40:31.814: E/AndroidRuntime(963):  at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
04-06 21:40:31.814: E/AndroidRuntime(963):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
04-06 21:40:31.814: E/AndroidRuntime(963):  at java.net.InetAddress.getAllByName(InetAddress.java:214)
04-06 21:40:31.814: E/AndroidRuntime(963):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-06 21:40:31.814: E/AndroidRuntime(963):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-06 21:40:31.814: E/AndroidRuntime(963):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-06 21:40:31.814: E/AndroidRuntime(963):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-06 21:40:31.814: E/AndroidRuntime(963):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-06 21:40:31.814: E/AndroidRuntime(963):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-06 21:40:31.814: E/AndroidRuntime(963):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-06 21:40:31.814: E/AndroidRuntime(963):  at com.example.distancemap.MainActivity.ClosestObject(MainActivity.java:159)
04-06 21:40:31.814: E/AndroidRuntime(963):  at com.example.distancemap.MainActivity.onCreate(MainActivity.java:63)
04-06 21:40:31.814: E/AndroidRuntime(963):  at android.app.Activity.performCreate(Activity.java:5104)
04-06 21:40:31.814: E/AndroidRuntime(963):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-06 21:40:31.814: E/AndroidRuntime(963):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-06 21:40:31.814: E/AndroidRuntime(963):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:05:43.583

```
 04-06 21:40:31.814: E/AndroidRuntime(963): Caused by: android.os.NetworkOnMainThreadException 
```

你错过了一个结束`}`

这将有助于解决这个问题。

```
 class TestGoogleMaps extends AsyncTask<String, Void, String>{
           @Override
           protected String doInBackground(String... params) {
                   // TODO Auto-generated method stub
               try {

                   ShowMap();

               } catch (ClientProtocolException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               } catch (JSONException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               } catch (IOException e) {
                   // TODO Auto-generated catch block
                   e.printStackTrace();
               }

           finally {

           }
                   return null;
           }
       }

} 
```

# php - 上传图片和信息

> ID：15856366
> 
> 赞同：-5
> 
> 时间：2013-04-06T21:42:55.033
> 
> 标签：php, html

我想创建允许用户上传他们的照片、姓名和电子邮件然后将其保存在数据库中的表单？
到目前为止，我已经尝试过了[http://www.reconn.us/file_uploading.html](http://www.reconn.us/file_uploading.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:03:20.910

按照链接说明获取图像，然后读入临时文件并将其存储在`BLOB`数据库的 -type 字段中。有关完整示例，请参见[此处](http://forum.codecall.net/topic/40286-tutorial-storing-images-in-mysql-with-php/)。

* * *

```
// Make sure the user actually
// selected and uploaded a file
if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) {

// Temporary file name stored on the server
$tmpName = $_FILES['image']['tmp_name'];

// Read the file
$fp = fopen($tmpName, 'r');
$data = fread($fp, filesize($tmpName));
$data = addslashes($data);
fclose($fp);

// Create the query and insert
// into our database.
$query = "INSERT INTO tbl_images ";
$query .= "(image) VALUES ('$data')";
$results = mysql_query($query, $link);

// Print results
print "Thank you, your file has been uploaded.";

}
else {
print "No image selected/uploaded";
}

// Close our MySQL Link
mysql_close($link);
?> 
```

# php - 如何将 jQuery.getJSON() 的响应仅限于某些域？

> ID：15856368
> 
> 赞同：1
> 
> 时间：2013-04-06T21:43:15.387
> 
> 标签：php, jquery, getjson

我在 clientDomain.com/show.php 页面中有一个 jQuery 脚本，它显示了使用 jQuery.getJSON() 从 serverDomain.com/echo.php 页面加载的一些数据。我希望只有允许的域才能显示数据，因为我不希望未经授权的人在未经我许可的情况下将脚本安装在他们自己的网站上。有没有办法将 jQuery.getJSON() 的响应限制在某些域？该解决方案还应防止客户端使用 iframe。总之，只有当有人直接访问 serverDomain.com/echo.php 页面或允许的客户端域之一时，才能看到数据。提前感谢您的支持！

我的请求/响应脚本就像[jQuery.getJSON() |中的第一个示例一样工作。jQuery API 文档](http://api.jquery.com/jQuery.getJSON/)

我只能编写客户端 jQuery 脚本（将分配到允许的域）和 serverDomain.com/echo.php 页面（这是我的财产）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:45:40.920

不要那样做。使用定期更新的身份验证令牌。任何人都可以伪造 HTTP 引荐来源网址。

这是关于 SO 的一个很好的答案，它涵盖了 resful api 身份验证：[REST API Token-based Authentication](https://stackoverflow.com/questions/9773664/rest-api-token-based-authentication)

# c++ - 检查一个数字是否落在其他两个数字之间的最简洁方法？

> ID：15856369
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:43:16.317
> 
> 标签：c++, math, optimization

假设我有三个数字。其中两个在它们之间形成一个范围。最后一个数字，我想检查它是否在该范围内。这是一个简单的警告：定义范围开始和结束的数字可能大于或小于另一个。这是针对我正在努力提高其性能的物理算法，所以我也想避免使用条件语句。

```
double inRange(double point, double rangeStart, double rangeEnd){
    // returns true if the 'point' lies within the range
    // the 'range' is every number between 'rangeStart' and 'rangeEnd'
    // rangeStart can be greater than or less than rangeEnd
    // conditional branches should be avoided

    return ?; // return values [0.0 - 1.0] are considered 'in range'
} 
```

是否有一个数学方程式可以在不使用条件逻辑的情况下完成此操作？

编辑：

它返回 double 而不是 bool 的原因是因为我也需要知道比率；0.0 最接近一个边缘，而 1.0 最接近另一边缘。

我原来的算法是这样的：

```
double inRange(double point, double rangeStart, double rangeEnd){
    if(rangeStart > rangeEnd){
         double temp = rangeStart;
         rangeStart = rangeEnd;
         rangeEnd = temp;
    }
    return (point - rangeStart) / (rangeEnd - rangeStart);
} 
```

我的分析器显示程序运行的大约 16% 的时间都花在了这个函数上，并启用了优化。它经常被调用。不确定条件语句是否完全归咎于，但我想尝试一个没有的函数，看看。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:49:57.683

回答你的规范“它应该在接近开始时返回零，在接近结束时返回 1”，你不想要条件，并且开始和结束可能会被交换：

```
return (point-std::min(rangeStart, rangeEnd))/std::abs(rangeStart - rangeEnd); 
```

请注意，虽然我不知道特定的 STL 实现，`min`但不一定需要实现条件。例如，min(a,b) = (a+b-abs(ba))/2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T21:45:09.237

如果开始大于结束，则交换它们。

# linux - Bash - 格式化值

> ID：15856372
> 
> 赞同：1
> 
> 时间：2013-04-06T21:43:48.080
> 
> 标签：linux, bash, shell

我在 bash 中编写了一个简单的帐户脚本，但我找不到显示浮点值的标准方法。这是使用 awk 的最佳解决方案吗？余额也打印出 0.00，我忘了包括什么吗？

```
#!/bin/bash

function printBalance()
{
    echo | awk 'BEGIN { printf "\nCurrent balance: %.2f\n", balance }'
    sleep 1
}

function makeWithdraw()
{
    echo -en "\nWithdraw an amount: "
    read deposit

    if [ "$withdraw" -gt "$balance" ]; then
      echo -en "\nInsufficient funds"
      sleep 1
    else
      balance=$(( balance - withdraw ))
    fi
}

balance=$((RANDOM%100+1))

# code continues... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:50:25.943

现在我看到了缺少的东西：`awk`需要给`balance`定变量：

如果你有`$myvar`你必须：

```
awk -v awk_internal_var=${myvar} '{printf "%s", awk_internal_var}' 
```

在你的情况下：

```
echo | awk -v balance=${balance} 'BEGIN { printf "\nCurrent balance: %.2f\n", balance }' 
```

所以这就是它打印的原因`0.00`：因为它没有得到价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T21:58:37.830

只需使用 bash 的内置`printf`命令：

```
$ printf '%.2f\n' 123.456
123.46 
```

我还建议使用`printf`而不是`echo`任何复杂的东西。`echo`在各种 shell 中有多个版本，并且作为单独的程序。也是如此`printf`，但它的行为更加一致。

例如，而不是

```
echo -en "\nWithdraw an amount: " 
```

您可以使用：

```
printf '\nWithdraw an amount: ' 
```

或者，如果字符串可能包含`%`字符：

```
printf '\n%s: ' 'Withdraw an amount' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T21:49:07.430

[格雷格说](http://mywiki.wooledge.org/BashFAQ/022) `awk`应该这样做

```
$ awk 'BEGIN {printf "%.3f\n", 10 / 3}'
3.333 
```

# ajax - iframe 替换

> ID：15856376
> 
> 赞同：0
> 
> 时间：2013-04-06T21:43:57.037
> 
> 标签：ajax, iframe, sidebar

我需要制作一个左侧有侧边栏的页面，右侧有一个搜索页面。我需要能够执行搜索并在不刷新左侧聊天框中的内容的情况下显示结果。理想情况下，我需要这些页面能够相互交流，以便左侧框架中的链接可以调用右侧的搜索。现在我正在使用 PHP 来处理右侧的搜索功能，但我真的可以使用任何语言。

我查看了 iframe，但我真的希望将“搜索”页面作为主页，以便浏览器中的滚动条反映搜索页面上的位置。

我还想也许这可以用 AJAX 来完成，但由于我的搜索框是一个表单，我不确定如何将参数传递给显示结果的页面。

希望这是有道理的，我会澄清我能做的。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T21:51:14.063

你仍然可以使用ajax。考虑[jQuery](http://jquery.com)：

**HTML 搜索表单**：

```
<form id="searchForm">
 <input name="searchterm" />
 <input type="submit" value="Search" >
</form> 
```

**HTML 搜索结果容器**：

```
<div id="searchResults"></div> 
```

**jQuery** :

```
$('#searchForm').on('submit', function(e) {
    var $form = $(this);
    e.preventDefault(); 
    $.ajax({
        url     : '/path/to/search.php',
        type    : 'post',
        data    : $form.serialize(),
        success : function (data) {
            $('#searchResults').html(data); // or parse out your data into HTML if it isnt already sent that way
        }
    });
}); 
```

# javascript - Raphael - 使用变换来缩放 js 路径 - 意外结果

> ID：15856379
> 
> 赞同：0
> 
> 时间：2013-04-06T21:44:04.000
> 
> 标签：javascript, raphael, shapes

我第一次使用 raphael，并且有一个 svg，我使用在线转换器将其转换为 javascript 路径。我现在遇到了一个问题 - 路径上都有一个 .transform ，所以我无法在我的脚本中缩放它们（让我非常困惑 - 任何新的 .transform 任何比例都会使它们变成一两个像素在每个宽或高。）

它们在每个路径变量的末尾都有类似的内容： myshape.transform("m83.018878,0,0,83.018878,-2814.2764,385.12103")

我如何摆脱这种转换，或者除了替换现有的转换之外还有一个新的工作？或者我可以用另一种方式进行缩放吗？我不需要任何动画 - 只需要缩放页面布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:35:18.147

当前的转换矩阵显示为 *83 比例。使用`.transform`会重置此变换，如果您在变换中不使用相同的缩放顺序，则路径看起来会非常小。

很难将转换工具结果代码重构为直接具有坐标已经转换的路径

但是，动态地，您可以使用该`Raphael.transformPath`方法获取转换后的路径字符串。您必须提供当前路径字符串，它是它`.attr("path")`，它的当前转换字符串是它`.transform()`。

另一种更轻松的方法是继续使用该`transform`方法，但使用 «...» 字符串部分附加您的转换，以告诉 Raphael 它必须重用以前的转换字符串。

# c# - 如何告诉 C# RichTextBox 像其他应用程序一样通过键盘选择行

> ID：15856380
> 
> 赞同：0
> 
> 时间：2013-04-06T21:44:08.110
> 
> 标签：c#, richtextbox, selection

我正在使用 .NET 4.0，但这也发生在 2.0 中...

在我看来，MultiLine 模式下的 RichTextBox 不应该像它那样选择文本行。

在控件中，输入多行文本，中间至少有一个空行，如下所示：

> 敏捷的棕色狐狸跳过
> 懒惰的狗。
> 
> 更多的人喜欢
> 苹果而不是橙子。

应该可以将插入点放在开头（在“The”之前）并使用键盘的向下箭头键选择前两行 -*不*包括其下方的空行，但它包括空行。我知道按左箭头键取消选择空白行并不是什么大事，但它*很*烦人，此外，它应该像其他应用程序和 TextBox 控件一样工作。

我查看了控件的属性，但什么也没找到，但也许有一个，但我想不出它的名字。

我必须自己写这个行为吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:09:27.697

```
bool HasIgnoredSelection { get; set; }

HasIgnoredSelection = false;

rtb.KeyUp += (e) => {
     int cursorIndex = rtb.SelectionStart + rtb.SelectionLength;
     bool isBlankLineSelection = e.Shift 
         && e.KeyCode == Keys.Down 
         && rtb.Lines[rtb.GetLineFromCharIndex(cursorIndex)] == Environment.NewLine;

     if (!HasIgnoredSelection 
         && isBlankLineSelection) 
     {
        rtb.SelectionLength -= Environment.NewLine.Length;
        HasIgnoredSelection = true;
     }
     else if (isBlankLineSelection)
     {
        HasIgnoredSelection = false;
        rtb.SelectionLength += Environment.NewLine.Length;
     }
     else 
     {
        HasIgnoredSelection = false;
     }
}; 
```

当然，这是您所说的骇人听闻的做法，尽管我不确定这是否是您想要的。除非您按住向下键，否则它将阻止您继续通过键盘选择文本，因此还有其他方法可以解决此问题。

编辑：添加了按下两次以使其跳转到空白行之后的行的功能

# xna - 如何使用切线和纹理坐标从 3DSMAX 导出到 FBX

> ID：15856381
> 
> 赞同：3
> 
> 时间：2013-04-06T21:44:12.757
> 
> 标签：xna, 3dsmax, fbx

我从 TurboSquid 购买了一个 3DS 格式的模型，并试图将其加载到 XNA 项目中。

我已经导出到 FBX 并打开了“Tangents and Binormals”导出选项。

如果我没有设置 basicEffect.TexturesEnabled，它会渲染但没有纹理。但是，如果我打开 TexturesEnabled，我会遇到问题：

如果我在内容处理器中关闭“生成切线帧”，我会得到“当前顶点声明不包括当前顶点着色器所需的所有元素。缺少 TextureCoordinate0。” 在运行时。

如果我在内容处理器中打开“生成切线帧”，我会在构建时得到“找不到所需的顶点通道纹理坐标 0”。

所以，问题是如何在 3DS 中获取模型，将其导出，以便我可以将其用作 XNA 中的 FBX 模型，并正确获取所有 UV 映射和法线。即使是 VS2012 FBX 预览版也可以正确渲染它，所以它似乎应该拥有它所需要的一切，但没有。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:31:50.600

这可能是很多事情。如果模型使用第 3 方插件或非标准材质，这将导致 UV 不对齐。

我的建议是确保材料采用标准格式，如有必要，取消组合整个模型。

最后，如果模型未绑定，请确保它是可编辑的多边形。

从那里您可以尝试再次导出模型。XNA 是否可以导入其他格式？

如果这没有帮助，请访问 Support.TurboSquid.com 并创建支持票。我们可以尽力提供帮助。

克里斯托弗·布里尔

TurboSquid 产品支持

# c# - 在控制台应用程序中捕获鼠标滚轮事件

> ID：15856386
> 
> 赞同：3
> 
> 时间：2013-04-06T21:44:41.947
> 
> 标签：c#, events, console, mousewheel

有没有办法使用 c# 在控制台应用程序中捕获鼠标滚轮事件，就像在 GUI / Window 应用程序中捕获鼠标滚轮事件一样？

我想这样做以仅滚动控制台中的部分文本。

我已经在谷歌上搜索过这个，但我能找到的只是 Window 应用程序中的鼠标滚轮事件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T22:23:35.157

调用[`ReadConsoleInput`](http://www.pinvoke.net/default.aspx/kernel32/ReadConsoleInput.html)函数。`MOUSE_WHEELED`当您的控制台上的轮子旋转时，您将收到一个事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T22:04:29.070

你可以用“两个”部分来做到这一点：

1.  在鼠标滚轮事件上创建全局系统挂钩（ [这里](http://www.codeproject.com/Articles/6362/Global-System-Hooks-in-NET)的好例子）

2.  第二次使用 PInvoke 检查您的控制台是否处于活动状态（您可以在此处找到示例： [确定当前应用程序是否已激活（具有焦点）](https://stackoverflow.com/questions/7162834/determine-if-current-application-is-activated-has-focus)）

3.  您可以在 2 中扩展功能以在此处获取窗口 RECT[检查](http://www.pinvoke.net/default.aspx/user32/getwindowrect.html)并将鼠标位置与窗口位置相交

# android - 具有多种项目类型的 ListAdapter 抛出 ClassCastException

> ID：15856390
> 
> 赞同：1
> 
> 时间：2013-04-06T21:45:06.817
> 
> 标签：android, listview, classcastexception, baseadapter

我正在为一个活动构建一个应用程序，其中一个功能是留言板。为此，我构建了一个`ListView`并加载了消息。

我有两种类型的消息：您发送的消息和对方发送的消息。布局略有不同，U 使用其他 XML 文件。我尝试了我的代码（如下），如果所有项目都属于同一类型（您的或其他项目），它工作正常。但是当类型发生变化时，我得到一个`ClassCastException`. 我知道这意味着什么，以及哪里出了问题（物品持有者属于不同的类，它试图使该类的对象不是），但不知道如何解决它。

这是我的代码，这是我的`ChatAdapter`. `ChatAdapter`是一个扩展的类`BaseAdapter`。

```
public View getView(final int position, View convertView, ViewGroup parent) {
    View vi=convertView;
    final Message m = messagelist.get(position);
    OwnMessageHolder ownMessageHolder;
    OtherMessageHolder otherMessageHolder;
    if(isSelf(m.getPerson().getId())) {
    if (vi == null) { //convertview==null
        ownMessageHolder = new OwnMessageHolder();
        vi = inflater.inflate(R.layout.listitem_chat_own, null);
        vi.setOnClickListener(null);
        vi.setOnLongClickListener(null);
        vi.setLongClickable(false);
        ownMessageHolder.name = (TextView) vi.findViewById(R.id.tv_chat_own_name);
        ownMessageHolder.message = (TextView) vi.findViewById(R.id.tv_chat_own_message);
        vi.setTag(ownMessageHolder);
    }else{//convertview is not null
        ownMessageHolder = (OwnMessageHolder)vi.getTag();
    }

    ownMessageHolder.name.setText(m.getPerson().getName());
    ownMessageHolder.message.setText(m.getMessages()[0]);

    vi.setFocusable(false);
    vi.setClickable(true);

    return vi;
    }else {//other
        if (vi == null) { //convertview==null
            otherMessageHolder = new OtherMessageHolder();
            vi = inflater.inflate(R.layout.listitem_chat_other, null);
            vi.setOnClickListener(null);
            vi.setOnLongClickListener(null);
            vi.setLongClickable(false);
            otherMessageHolder.name = (TextView) vi.findViewById(R.id.tv_chat_other_name);
            otherMessageHolder.message = (TextView) vi.findViewById(R.id.tv_chat_other_message);
            vi.setTag(otherMessageHolder);
        }else{//convertview is not null
            otherMessageHolder = (OtherMessageHolder)vi.getTag();
        }

        otherMessageHolder.name.setText(m.getPerson().getName());
        otherMessageHolder.message.setText(m.getMessages()[0]);

        vi.setFocusable(false);
        vi.setClickable(true);

        return vi;
    }
}

    public static class OwnMessageHolder {
    public TextView name;
    public TextView message;
}

public static class OtherMessageHolder {
    public TextView name;
    public TextView message;
} 
```

和错误日志：

```
04-06 23:25:54.720: E/AndroidRuntime(18176): FATAL EXCEPTION: main
04-06 23:25:54.720: E/AndroidRuntime(18176): java.lang.ClassCastException: com.hera.lustrumvirgiel.ChatAdapter$OtherMessageHolder cannot be cast to com.hera.lustrumvirgiel.ChatAdapter$OwnMessageHolder
04-06 23:25:54.720: E/AndroidRuntime(18176):    at com.hera.lustrumvirgiel.ChatAdapter.getView(ChatAdapter.java:57)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.AbsListView.obtainView(AbsListView.java:2449)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.ListView.measureHeightOfChildren(ListView.java:1244)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.ListView.onMeasure(ListView.java:1155)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.View.measure(View.java:12815)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.RelativeLayout.measureChild(RelativeLayout.java:627)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.RelativeLayout.onMeasure(RelativeLayout.java:440)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.View.measure(View.java:12815)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.View.measure(View.java:12815)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1399)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.LinearLayout.measureVertical(LinearLayout.java:690)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.LinearLayout.onMeasure(LinearLayout.java:583)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.View.measure(View.java:12815)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:4698)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.widget.FrameLayout.onMeasure(FrameLayout.java:293)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at com.android.internal.policy.impl.PhoneWindow$DecorView.onMeasure(PhoneWindow.java:2106)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.View.measure(View.java:12815)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1068)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2452)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.os.Looper.loop(Looper.java:137)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at android.app.ActivityThread.main(ActivityThread.java:4493)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at java.lang.reflect.Method.invokeNative(Native Method)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at java.lang.reflect.Method.invoke(Method.java:511)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:788)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:555)
04-06 23:25:54.720: E/AndroidRuntime(18176):    at dalvik.system.NativeStart.main(Native Method) 
```

任何人都知道如何解决这个问题？错误日志所指的行 (57) 是这一行：

> ownMessageHolder = (OwnMessageHolder)vi.getTag();

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:07:02.040

您正在尝试使用多种布局：

```
vi = inflater.inflate(R.layout.listitem_chat_own, null);
vi = inflater.inflate(R.layout.listitem_chat_other, null); 
```

但是您并没有告诉适配器期望超过一个......这将导致 ListView 的 RecycleBin 出现很多问题，并且效率不会那么高。只需覆盖[`getViewTypeCount()`](https://developer.android.com/reference/android/widget/BaseAdapter.html#getViewTypeCount%28%29)然后[`getItemViewType()`](https://developer.android.com/reference/android/widget/BaseAdapter.html#getItemViewType%28int%29)使用`getItemViewType()`inside`getView()`来加载适当的布局，然后适配器将处理其余部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-06T21:53:42.673

Java 的`instanceof`关键字似乎正是您要寻找的。它允许您确定对象是否是特定类的实例。这在转换对象之前在 if 语句中使用特别方便：

```
Object tag = vi.getTag();
if (tag instanceof OtherMessageHolder)
    otherMessageHolder = (OtherMessageHolder)tag;
else // Assume it is an OwnMessageHolder
    ownMessageHolder = (OwnMessageHolder)tag; 
```

# php - Symfony2：在没有密码的情况下编辑用户

> ID：15856396
> 
> 赞同：6
> 
> 时间：2013-04-06T21:45:48.983
> 
> 标签：php, security, symfony

在我的应用程序中，只有管理员用户可以创建和理论上可以编辑用户。到目前为止，仅使用 Symfony 安全系统（没有 FOSUserBundle 管理 - 它的复杂性不是必需的），创建具有不同角色的用户就可以了。完全逃脱我的挑战是如何在不知道用户密码的情况下编辑用户。我一直遇到预期的验证错误

> 密码不能为空

. 如何完成编辑？我肯定在这里遗漏了一些非常基本的东西。

### 编辑动作：

```
 public function editAction($id) {
        $em = $this->getDoctrine()->getManager();
        $user = $em->getRepository('ManaClientBundle:User')->find($id);
        $form = $this->createForm(new UserType(), $user);
        return array(
            'form' => $form->createView(),
            'user' => $user,
            'title' => 'Edit user',
            );
   } 
```

### 更新动作：

```
 public function updateAction(Request $request, $id) {
        $em = $this->getDoctrine()->getManager();
        $user = $em->getRepository('ManaClientBundle:User')->find($id);
        $originalPassword = $user->getPassword();
        $form = $this->createForm(new UserType(), $user);
        $form->bind($request);
        if ($form->isValid()) {
            $plainPassword = $form->get('password')->getData();
            if (!empty($plainPassword))  {  
                //encode the password   
                $encoder = $this->container->get('security.encoder_factory')->getEncoder($entity); //get encoder for hashing pwd later
                $tempPassword = $encoder->encodePassword($entity->getPassword(), $entity->getSalt()); 
                $user->setPassword($tempPassword);                
            }
            else {
                $user->setPassword($originalPassword);
            }
            $em->persist($user);
            $em->flush();
            return $this->redirect($this->generateUrl('user_main', array()));
        } 
```

### 用户表格：

```
public function buildForm(FormBuilderInterface $builder, array $options) {
    $builder
            ->add('enabled', 'choice', array(
                'choices' => array('Yes' => 'Yes', 'No' => 'No'),
                'expanded' => true,
                'multiple' => false,
                'label' => 'Enabled: ',
            ))
            ->add('fname')
            ->add('sname')
            ->add('email')
            ->add('username')
            ->add('password', 'repeated', array(
                'type' => 'password',
                'invalid_message' => 'Password fields do not match',
                'first_options' => array('label' => 'Password'),
                'second_options' => array('label' => 'Repeat Password'),
            ))
            ->add('role', 'choice', array(
                'choices' => array('ROLE_USER' => 'User', 'ROLE_ADMIN' => 'Admin'),
                'expanded' => true,
                'multiple' => false,
                'label' => 'Group: ',
            ))
    ;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T00:34:17.750

在我看到更优雅的解决方案之前，这就是我想出的：

1.  创建一个包含除密码字段之外的所有字段的 UserEditType 表单类
2.  将 UserEditType 分配给 Default 以外的验证组
3.  为2中的验证组配置密码长度约束。
4.  修改编辑和更新操作以使用 UserEditType

现在无需密码即可编辑用户！

### 用户编辑类型：

```
class UserEditType extends AbstractType {
    public function buildForm(FormBuilderInterface $builder, array $options) {
        $builder
                ->add('enabled', 'choice', array(
                    'choices' => array('Yes' => 'Yes', 'No' => 'No'),
                    'expanded' => true,
                    'multiple' => false,
                    'label' => 'Enabled: ',
                ))
                ->add('fname')
                ->add('sname')
                ->add('email')
                ->add('username')
                ->add('role', 'choice', array(
                    'choices' => array('ROLE_USER' => 'User', 'ROLE_ADMIN' => 'Admin'),
                    'expanded' => true,
                    'multiple' => false,
                    'label' => 'Group: ',
                ))
        ;
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver) {
        $resolver->setDefaults(array(
            'data_class' => 'Mana\ClientBundle\Entity\User',
            'validation_groups' => array('edit'),
        ));
    } 
```

### 用户实体中的密码：

```
 * @ORM\Column(name="userpass", type="string", length=100, nullable=false)
 * @Assert\NotBlank(message="Password may not be empty")
 * @Assert\Length(
 *      min = "5",
 *      max = "12",
 *      minMessage = "Password must be at least 5 characters long",
 *      maxMessage = "Password cannot be longer than than 12 characters",
 *      groups = {"Default"}
 * ) 
```

### 更新动作：

```
public function updateAction(Request $request, $id) {
    $em = $this->getDoctrine()->getManager();
    $user = $em->getRepository('ManaClientBundle:User')->find($id);

    $form = $this->createForm(new UserEditType(), $user);
    $form->bind($request);
    if ($form->isValid()) {
        $em->persist($user);
        $em->flush();
        return $this->redirect($this->generateUrl('user_main', array()));
    }
    return array(
        'form' => $form->createView(),
        'user' => $user,
        'title' => 'Edit user',
    );
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-26T18:24:09.097

我在我的项目中遇到了同样的问题。

我通过从表单中删除密码字段来解决它，只是为了我的编辑操作。

所以，在我的`UserController`，我改变了`editAction`：

```
//find the line where the form is created
$editForm = $this->createForm(new UserType($this->container), $entity)
        ->remove('password'); //add this to remove the password field 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-22T14:45:25.840

如果您想使用该`remove()`功能，则也适用于表单设置。至少在 Symfony 3.3 中。这样，您将避免上述密码确认`@pusle` ：

```
 $form = $this->formFactory->createForm()->remove("current_password");
        $form->setData($user)->remove("current_password"); 
```

这里是 FOSUserBundle 的 ProfileController 中的整个方法。这个对我有用：

```
 public function editDiffAction($id, Request $request)
    {
        $userManager = $this->get('fos_user.user_manager');
        $user = $userManager->findUserBy(['id' => $id]);

        $event = new GetResponseUserEvent($user, $request);

        if (null !== $event->getResponse()) {
            return $event->getResponse();
        }

        $form = $this->formFactory->createForm()->remove("current_password");
        $form->setData($user)->remove("current_password");

        $form->handleRequest($request);

        if ($form->isValid()) {
            $event = new FormEvent($form, $request);

            $userManager = $this->get('fos_user.user_manager');
            $userManager->updateUser($user);

            $url = $this->generateUrl('fos_user_profile_show_diff', array('id' => $user->getId() ));
            $response = new RedirectResponse($url);

            return $response;
        }

        return $this->render('@FOSUser/Profile/edit_diff.html.twig', array(
            'form' => $form->createView(),
            'user_id' => $user->getId(),
        ));
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-10-05T19:26:01.163

只需添加 'disabled' => 'disabled' 并不会考虑此字段。

# php - CodeIgniter $this->db->where(); 组合 AND 和 OR

> ID：15856399
> 
> 赞同：0
> 
> 时间：2013-04-06T21:46:17.663
> 
> 标签：php, codeigniter

我需要创建这个选择：

```
SELECT * FROM units
WHERE ((um like '%str%'  AND desc like '%str%') AND deleted = 0) 
```

所以我尝试使用

```
$search = 'str';

$this->db->from('units');
$this->db->where("(um LIKE '%".$this->db->escape_like_str($search)."%' or
desc LIKE '%".$this->db->escape_like_str($search)."%') and deleted=0");
return $this->db->get(); 
```

但这不起作用，即使在我的其他表、控制器、模块上它工作正常。编辑：我看到了为什么它不起作用，因为 desc ......但我的问题仍然在下面......

我尝试使用它并正常工作

```
$this->db->from('units');
$this->db->where('deleted',0);
$this->db->like('desc', $search);
$this->db->or_like('um', $search); 
```

但这公式化为：

```
WHERE deleted = 0 AND desc like  '%str%' AND um like  '%str%' 
```

我可以将 or_like 和 like 组合为 1 吗？并且在哪里被删除为另一个，因为现在它显示了由于or_like而删除的所有内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:52:11.220

为了这

> SELECT * FROM units WHERE ((um like '%str%' AND desc like '%str%') AND deleted = 0)

你所要做的：

```
$this->db->select('*');
$this->db->from('units');
$this->db->where("((units.um LIKE '%str%'  AND units.desc LIKE '%str%') AND deleted = '0')",NULL);
$query = $this->db->get();
return $query->result(); 
```

# java - 如何在不知道图像名称的情况下更改 Android 中按钮的背景图像？

> ID：15856400
> 
> 赞同：1
> 
> 时间：2013-04-06T21:46:27.843
> 
> 标签：java, android

我在可绘制文件夹中有一些图像文件。图像的名称就像按钮1，按钮2，按钮3......还有一个计数变量，每当单击按钮时都会增加一个。我想要做的是，每当有人单击该按钮图像时按钮应更改为与当前计数值对应的图像。

我试过

```
buttons[0][0].setBackground(R.drawable.button+count); 
```

但它不工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:48:28.057

你不能直接访问它。您必须使用其名称获取资源：

```
private Drawable getDrawableResourceByName(int count) {
    String packageName = getPackageName();
    int resId = getResources().getIdentifier("button" + String.valueOf(count), "drawable", packageName);
    return getResources().getDrawable(resId);
} 
```

然后将其用作：

```
buttons[0][0].setBackgroundDrawable(getDrawableResourceByName(count)); //setBackground() only works with drawables from API 16 
```

# html - 每个单元格 HTML 表格的最小高度

> ID：15856402
> 
> 赞同：3
> 
> 时间：2013-04-06T21:46:32.437
> 
> 标签：html, html-table, cell

我有一张有 3 个单元格和 1 行的表格。我让文本显示在数据库中的单元格中，我的问题是：如何为所有三个单元格使用最小高度？所以他们的身高不一样。由于中间的列会更大。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:54:07.237

您可以使用 CSS：

```
td { height: 100px } 
```

如果有更多内容，表格单元格将展开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T22:07:27.340

同一行中的单元格始终具有相同的高度，即最高单元格的高度。

*   什么都不做就没事
*   如果您希望单元格宽度有所调整，以便内容较多的单元格比其他单元格更宽且不那么高，`table-layout: fixed`则从父表中删除（默认情况下不存在）
*   `min-height`不能在表格中使用，您必须在`height`此处使用属性
*   您可以调整填充（内部边距）以获得更好的样式：`th, td { padding: 4px 6px; }`. 边距不会对单元格产生任何影响（如果单元格没有用 折叠`border-collapse`，那么您可以使用`border-spacing`... 或填充）但`table`仍然会受到整个边距的影响

# python - 如何对两个列表 N 元素求和

> ID：15856407
> 
> 赞同：3
> 
> 时间：2013-04-06T21:47:15.440
> 
> 标签：python, python-2.7

我需要添加两个数字列表。当一个列表大于另一个列表时，我收到错误“IndexError：列表索引超出范围”。错误发生在 line 中`resultado = v1[i] + v2[i]`，但我不知道如何解决。

我的代码是：

```
def suma(A, B):

    if len(A) > len(B):
        v1 = A
        v2 = B
    else:
        v1 = B
        v2 = A
    v3 = []
    i = 0
    for i in range(len(v1)):
        resultado = v1[i] + v2[i]
        v3.append(resultado)
    for j in range(len(v1), len(v2)):
        v3.append(v2[j])
    return v3

vectorA = []
vectorB = []
x = 1
while x !=0:
    print "Ingrese los datos para el primer vector (0 para finalizar)"
    x = input("-->>")
    if x !=0:
        vectorA.append (x)

print "=" * 30
x = 1
while x !=0:
    print "Ingrese los datos para el segundo vector (0 para finalizar)"
    x = input("-->>")
    if x !=0:
        vectorB.append (x)

print "=" * 30
print vectorA
print vectorB
print "=" * 30
print "A) SUMA DE VECTORES"
print "=" * 30

suma(vectorA, vectorB)
print suma 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T21:50:55.267

```
>>> import itertools
>>> A = [1, 2, 3]
>>> B = [10, 11]
>>> [a + b for a, b in itertools.izip_longest(A, B, fillvalue=0)]
[11, 13, 3] 
```

*   [itertools.izip_longest](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)

所以，

```
def suma(A, B):
    return [a + b for a, b in itertools.izip_longest(A, B, fillvalue=0)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T21:51:37.440

你要[`itertools.izip_longest`](https://stackoverflow.com/a/11319002/198633)

```
def suma(A, B):
    return map(sum, itertools.izip_longest(A,B, fillvalue=0)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T22:38:54.667

在这个阶段对你学习 Python 有更多帮助的可能是：

导致实际错误的原因是您使用**较长列表的长度**来迭代两个列表。通过更改很容易解决

```
for i in range(len(v1)): 
```

进入

```
for i in range(len(v2)): 
```

因为，`v2`是经过上述比较后的较短列表。您还应该更换

```
for j in range(len(v1), len(v2)):        
    v3.append(v2[j]) 
```

经过

```
for j in range(len(v2), len(v1)):        
    v3.append(v1[j]) 
```

因为毕竟`len(v2)`小于`len(v1)`。最后更换

```
suma(vectorA, vectorB)
print suma 
```

经过

```
print suma(vectorA, vectorB) 
```

打印结果。您可以在下面找到工作脚本。

```
def suma(A, B):

    if len(A) > len(B):
        v1 = A
        v2 = B
    else:
        v1 = B
        v2 = A
    v3 = []
    i = 0
    for i in range(len(v2)):
        resultado = v1[i] + v2[i]
        v3.append(resultado)
    for j in range(len(v2), len(v1)):
        v3.append(v1[j])
    return v3

vectorA = []
vectorB = []
x = 1
while x !=0:
    print "Ingrese los datos para el primer vector (0 para finalizar)"
    x = input("-->>")
    if x !=0:
        vectorA.append (x)

print "=" * 30
x = 1
while x !=0:
    print "Ingrese los datos para el segundo vector (0 para finalizar)"
    x = input("-->>")
    if x !=0:
        vectorB.append (x)

print "=" * 30
print vectorA
print vectorB
print "=" * 30
print "A) SUMA DE VECTORES"
print "=" * 30

print suma(vectorA, vectorB) 
```

# php - 将 CSS 类分配给内容

> ID：15856410
> 
> 赞同：0
> 
> 时间：2013-04-06T21:47:31.663
> 
> 标签：php, css, wordpress

我已经下载了一个 wordpress 主题，它通过这个 php 函数为其页面部分分配了两个不同的 css 类（一个用于偶数，一个用于奇数）：

```
if (in_array('type-page', $classes)) {
$classes[] = (++$j % 2 == 0) ? 'even' : 'odd'; 
```

有什么方法可以更改\重写函数以逐步为每个页面部分分配自定义 css 类？例如

*   第一节 -> Css Class 001
*   第二节-> Css Class 002
*   第三节-> Css Class 003等等..

我认为这可能是一个菜鸟问题，但我对 php 完全没有经验。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:43:38.020

要理解的关键是，第一次调用此方法时 $j 初始化为 0，在后续调用中，如果 'type-page' 在 classes 数组中，则 $j 递增 1。

因此，根据 $j 的值实现样式列表的一种快速简便的方法是添加一个包含您的类的数组。然后在触发此 if 块的每个方法调用上分配由 $j 索引的类。像这样：

```
 public static function filterPostClass($classes)
        {

        // first we'll create an array of our classes these get indexed 0 to n-1 where n is the length of the array
        $classNames = array('Css Class 001', 'Css Class 002', 'Css Class 003'); // and so on ...

        static $j = 0;

        // then instead of 'even'/'odd', we assign the value in the $j'th index to the $classes var
        if (in_array('type-page', $classes)) {
            $classes[] = $classNames[$j];
            $j++;

        } 
```

# arrays - 在二维空间中查找圆内的所有点

> ID：15856411
> 
> 赞同：14
> 
> 时间：2013-04-06T21:47:35.193
> 
> 标签：arrays, performance, algorithm, optimization, geometry

我代表我的 2D 空间（考虑一个窗口），其中每个像素显示为 2D 数组中的一个单元格。即一个 100x100 的窗口由相同尺寸的数组表示。

现在给定窗口中的一个点，如果我画一个半径为 的圆`r`，我想找到该圆中的所有点。

我在想我会检查半径周围正方形区域中的每个点`side = 2*r`，如果它位于圆圈内。我会使用正常距离公式吗？

因此，可能如下：

```
for (x=center-radius ; x<center+radius ; x++){
    for (y=center-radius ; y<center+radius; y++) {
        if (inside) {
            // Do something
        }
    }
} 
```

它会达到我的目的吗？我可以让它更快吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-06T22:02:00.070

> 它会达到我的目的吗？

对于您的 100x100，是的。

> 我可以让它更快吗？

是的。例如，您可以：

*   由于对称性，只检查 1 个象限并获得其他点。
*   计算距离时跳过平方根。

代码：

```
for (x = xCenter - radius ; x <= xCenter; x++)
{
    for (y = yCenter - radius ; y <= yCenter; y++)
    {
        // we don't have to take the square root, it's slow
        if ((x - xCenter)*(x - xCenter) + (y - yCenter)*(y - yCenter) <= r*r) 
        {
            xSym = xCenter - (x - xCenter);
            ySym = yCenter - (y - yCenter);
            // (x, y), (x, ySym), (xSym , y), (xSym, ySym) are in the circle
        }
    }
} 
```

这大约是 4 倍的速度。

[JS 测试](http://jsperf.com/point-in-circle/2)此处提供的解决方案。Symmetry 在我的电脑上是最快的。[Niet the Dark Absol 提出的](https://stackoverflow.com/questions/15856411/finding-all-the-points-within-a-circle-in-2d-space#answer-15856534)三角函数非常聪明，但它涉及昂贵的数学函数，例如`sin`和`acos`，这会对性能产生负面影响。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T22:00:16.163

您可以绕过条件检查的需要：

```
for(x=center-radius; x<center+radius; x++) {
    yspan = radius*sin(acos((center-x)/radius));
    for(y=center-yspan; y<center+yspan; y++) {
        // (x,y) is inside the circle
    }
} 
```

如果需要，您可以`round(yspan)`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T22:27:11.943

您可以通过尽可能多地在循环之外进行计算来提高速度。也没有必要做毕达哥拉斯定理平方根......只要保持一切平方。最终的加速可以通过只对圆的四分之一进行数学计算来实现（因为它是对称的）......当找到匹配时，您只需将其复制到其他四分之三。

```
radiusSquared = radius*radius;
rightEdge = centerX+radius;
bottomEdge = centerY+radius;
for(x = centerX; x <= rightEdge; x++){
    xSquared = x*x;
    for(y = centerY; y <= bottomEdge; y++){
        ySquared = y*y;
        distSquared = xSquared+ySquared;
        if(distSquared <= radiusSquared){
            // Get positions for the other quadrants.
            otherX = centerX-(x-centerX);
            otherY = centerY-(y-centerY);
            // Do something for all four quadrants.
            doSomething(x, y);
            doSomething(x, otherY);
            doSomething(otherX, y);
            doSomething(otherX, otherY);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-07T13:16:57.487

要获取一个圆圈内所有点的列表，您应该使用：

```
var radius = 100, r2 = radius * radius;
var circle = [];
for (var dx = -radius; dx <= radius; dx++) {
  var h = Math.sqrt(r2 - dx * dx) | 0;
  for (var dy = -h; dy <= h; dy++) {
    circle.push([dx, dy])
  }
} 
```

请参阅[http://jsperf.com/circles/2](http://jsperf.com/circles/2)了解此处针对其他解决方案的分析。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T21:58:51.090

### 如果以下情况属实：

```
( ( xPos - centreX)^2 + (yPos - centreY)^2 ) <= radius^2 
```

where`xPos`和`yPos`是您要检查的点的坐标，则该点在您的圆内。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-06T22:07:49.457

似乎是正确的。您可以通过找到 minY 然后对当前 X 执行从 -rangeY 到 +rangeY 的 DoSomething 来稍微加快速度。

```
for(dx=0;dx<rad; dx++)
{
  rangeY = 0;
  while (!inside(x, rangeY)) //inside == check if x*x + y*y <r*r
    rangeY++;

  for(y=center-rangeY;y<center+rangeY;y++) 
  {
    DoSomething(centerX - dx, y);
    DoSomething(centerX + dx, y);      }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-05-29T21:11:43.607

我知道这个问题有一个公认的答案，但我有一个更简单的解决方案。其他答案让我感到困惑，因为我不知道`center`, `xcenter`,`ycenter`是什么，并且函数背后的数学无法解释，我跋涉寻找自己的数学解决方案。

我的方程式很简单：

`cx`是圆心的 x 点

`cy`是圆心的 y 点

`rad`是圆的半径

我的方程/函数所做的是通过计算给定半径的每个可能点来计算点，并添加和减去 和 的偏移`cx`量`cy`。

```
//Creates an array filled with numbers
function range(begin, end) {
    for (var i = begin, arr = []; i < end; i++) {
      arr.push(i);
    }

    return arr;
}

function calculateAllPointsInCircle(cx, cy, rad) {

   var rang = range(-rad, rad + 1);
   var px = [];
   var py = [];
   var xy = [];

   for (var i = 0; i < rang.length; i++) {
     var x = cx + rang[i];
     px.push(x);

     for (var l - rang.length - 1; l > 0; l--) {
        var y = cy + rang[l];
        if (!py.indexOf(y)===-1) { py.push(y); }

        xy.push(x+','+y);
     }
   }

   return {
     x: x,
     y: y,
     xy: xy
   }
} 
```

性能远高于其他答案： http: [//jsperf.com/point-in-circle/4](http://jsperf.com/point-in-circle/4) 您可以用数学检查我的方程式，使用将验证给定点是否在圆圈内的方程式`x*x + y*y <= r*r`或`x^2 + y^2 <= r^2`

**编辑 - 超压缩 ES6 版本：**

```
function range(begin, end) {
  for (let i = begin; i < end; ++i) {
    yield i;
  }
}

function calculateAllPointsInCircle(cx, cy, rad) {
    return {
        x: [cx + i for (i of range(-rad, rad + 1))],
        y: [cy + i for (i of range(-rad, rad + 1))]
    };
} 
```

# ruby-on-rails-3.2 - rails 3.2 中的 I18N 和 label()

> ID：15856415
> 
> 赞同：2
> 
> 时间：2013-04-06T21:48:04.113
> 
> 标签：ruby-on-rails-3.2, label, locale

如果我只使用标签是否正常：

```
 label(user,:login) 
```

它只用 1 个键搜索语言环境：

```
 I18N keys: [:ru, :helpers, :label, :user, :login] 
```

如果我使用 form_for：

```
<% form_for(user) do |f| %>
<%= f.label :login %>
<% end %> 
```

它使用 3 个键搜索语言环境：

```
I18N keys: [:ru, :helpers, :label, :user, :login]
I18N keys: [:ru, :activerecord, :attributes, :user, :login]
I18N keys: [:ru, :attributes, :login] 
```

这让我很困惑。根据 label() 的帮助，两个变量都应该搜索“I18N 键：[：ru，：activerecord，：attributes，：user，：login]”，但仅在第二个中搜索。

# ssl - 在 Windows 上使用私钥导出 SSL 证书

> ID：15856418
> 
> 赞同：6
> 
> 时间：2013-04-06T21:48:07.553
> 
> 标签：ssl, azure, ssl-certificate

我正在为域名生成 SSL 证书。

我所做的：转到 IIS 管理 > 服务器证书并单击创建请求。这会生成一个 *.com 文件，其中包含我提交给 GoDaddy 的哈希值。从 GoDaddy 我得到了一个包含两个文件的 zip：*.crt 和 *.p7b

我将证书导出到 *.cer 文件并将其上传到 Azure，但是当我尝试部署云项目时出现错误：

> 带有与 HTTPS 输入端点关联的指纹的证书不包含私钥

在网上阅读了类似的问题后，我了解到我的 *.cer 文件不包含私钥。 **我的问题是，无论我如何尝试将其导出到 *.PFX，证书导出向导中始终禁用 PFX 选项。**

也不确定它是否相关，但是当我在 IIS 中单击 Complete Certificate Request 并选择我从 GoDaddy 获得的证书时。我收到一个错误：

> 找不到与此证书文件关联的证书请求。必须在创建请求的计算机上完成证书请求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-01T15:20:34.470

如果您不从***同一台计算机***执行 IIS“创建证书请求”和“完成证书请求”，您将无法选择从 IIS 导出或从证书管理器导出到 PFX 。

那是我的问题。我从两台不同的机器上完成了这两个步骤。

我必须创建一个新请求（在 IIS 中），转到 GoDaddy，重新输入我的证书，下载新证书，然后完成请求（在 IIS 中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-07T00:07:11.947

事实证明，这完全是愚蠢的，像往常一样被微软搞砸了。为域创建证书的过程是需要在IIS中使用【创建证书请求】。然后将创建的哈希发送到授权机构并使用 IIS 中的 [完整证书请求]，您可以在其中提供授权机构给您的证书。这会将证书安装到您的本地 IIS

安装证书后，您需要右键单击它并导出到 *.PFX 文件。PFX 文件现在可以上传到 Azure 或任何其他托管...

如果微软不确保把它搞砸，这些过程可能非常简单。

问题是当您单击[完成证书请求]时，文件打开对话框的文件类型为*.CER，但这是错误的，因为您需要提供*.CRT！！！解决方案是将文件类型选择更改为所有文件`*.*`并选择当局提供的 *.CRT 文件。

# html - 文本区域调整窗口大小

> ID：15856425
> 
> 赞同：-4
> 
> 时间：2013-04-06T21:48:43.540
> 
> 标签：html, css

转到[http://kennethhedegaard.com/html2/index.html](http://kennethhedegaard.com/html2/index.html)

尝试调整窗口大小。

无法弄清楚为什么 textarea 没有缩放...

肯尼斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:58:32.380

您应该阅读[本文](https://stackoverflow.com/questions/271067/how-can-i-make-a-textarea-100-width-without-overflowing-when-padding-is-present)以使您的 textarea 正确填充其父级。

在您发布的代码中，textarea 具有 100% 的宽度和填充，使用默认值意味着您正在使用填充。此外，包含 textarea 的 div 已将溢出设置为隐藏，这就是您无法设置右边框的原因

编辑（以防链接突然失效）：

您必须将此类或规则添加到您的文本区域：

```
.boxsizingBorder {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
} 
```

干杯

# python - 我在 Url 上添加了查询字符串，但 Url 不交换

> ID：15856428
> 
> 赞同：0
> 
> 时间：2013-04-06T21:48:50.303
> 
> 标签：python, url, python-2.7, cherrypy

这是我编写的 Cherrypy 中的服务器，我想添加查询字符串。

但是当我使用重定向站点时，它似乎不适用于`localhost:8080/index?foo=1&foo=2` 为什么？

我的项目

```
import cherrypy
import urllib
#import requests

class Root(object):
    @cherrypy.expose
    def index(self):
        jsondict = [('foo', '1'), ('foo', '2')]
        p = urllib.urlencode(jsondict)
        #url = urllib.urlopen("http://localhost:8080?%s" % params)
        #urlVar = 1
        #urlVar2 = 2
        #requests.get("localhost:8080/?", params =p)

        raise cherrypy.HTTPRedirect("localhost:8080/index?" + p)

cherrypy.config.update({

        'server.socketPort': 8080

})
cherrypy.quickstart(Root()) 
```

但我想在网站启动时在 Url 上添加变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:07:05.867

根据文档，您不能指定主机，并且您需要有一个处理查询参数的视图，因此请执行以下操作：

```
class Root(object):
    @cherrypy.expose
    def index(self, foo=None):
        if not foo:
            jsondict = [('foo', '1'), ('foo', '2')]
            p = urllib.urlencode(jsondict)
            #url = urllib.urlopen("http://localhost:8080?%s" % params)
            #urlVar = 1
            #urlVar2 = 2
            #requests.get("localhost:8080/?", params =p)

            raise cherrypy.HTTPRedirect("/index?" + p)

        return foo 
```

# python - python2原生时在Linux中安装python3

> ID：15856429
> 
> 赞同：0
> 
> 时间：2013-04-06T21:48:55.887
> 
> 标签：python, linux

我正在尝试让 python3 正常工作并进行所有设置，同时保持 python2 库完好无损（系统依赖项和所有这些）。

我已经安装了 Python3.3（已编译等），并将其与 /usr/bin/Python2.x 并排安装在 /usr/bin/Python3 中

输入“python”将带我进入 2.6 IDE，而“python3”或“python3.3”什么也不做。我只是有点困惑，我不确定为什么目前这不起作用。

我实际上可以用 /usr/bin/python3/bin/python3 调用它，它可以工作。不过这看起来不太漂亮，我该怎么办？

```
$ pwd
/usr/bin/python3/bin

$ ls
2to3      idle3.3   python3           python3.3m         pyvenv
2to3-3.3  pydoc3    python3.3         python3.3m-config  pyvenv-3.3
idle3     pydoc3.3  python3.3-config  python3-config

$ cat /proc/version
Linux version 2.6.34.7-56.40.amzn1.i686 (mockbuild@build-31003.build) (gcc version 4.4.4 20100525 (Red Hat 4.4.4-5) (GCC) ) #1 SMP Fri Oct 22 18:48:33 UTC 2010 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:00:28.923

首先想到的是python3没有自动导出它的路径。我认为添加

```
export PATH="/usr/bin/python3/bin:$PATH" 
```

到 .bash_profile 或 .bashrc 并重新启动终端可以解决问题。

# css - 在 LESS 中，是否可以访问输入变量的第三个数字？

> ID：15856430
> 
> 赞同：3
> 
> 时间：2013-04-06T21:48:57.633
> 
> 标签：css, less

我正在阅读 LESS 页面上的第一个示例

```
 @base: #f938ab;

.box-shadow(@style, @c) when (iscolor(@c)) {
  box-shadow:         @style @c;
  -webkit-box-shadow: @style @c;
  -moz-box-shadow:    @style @c;
}
.box-shadow(@style, @alpha: 50%) when (isnumber(@alpha)) {
  .box-shadow(@style, rgba(0, 0, 0, @alpha));
}
.box { 
  color: saturate(@base, 5%);
  border-color: lighten(@base, 30%);
  div { .box-shadow(0 0 5px, 30%) }
} 
```

上面的代码将生成类似

```
box-shadow: 0 0 5px rgba(0, 0, 0, 0.3); 
```

对于@style 变量，如果我想使用 box-shadow: 0 0 5px 和 0 0 (5+5)px，而没有另一个@style2 作为变量输入怎么办。

**LESS 中的@style 有没有类似 indexAt 的东西？做类似@style.at(3)+5**

预期输出：

```
.test {
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
  -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:02:44.740

## 手动（但必须都是相同的输出）

仅使用当前的 mixin 代码，您可以通过以下方式添加：

**较少的**

```
.test {.box-shadow(0 0 unit(5+5, px), 30%)} 
```

产生：

**CSS 输出**

```
.test {
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  -moz-box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
} 
```

## 自动使用 LESS 1.3.2+（混乱和困难）

我已经修改了 mixin 来做一些 javascript 评估并得到你想要的。但是，我不是正则表达式专家，在技术上也不是 javascript 专家（只要知道足够的知识就可以解决），所以可能有一种更简洁的方式来做我正在做的事情，也有一种更通用的使用方式来做这件事。在我在这里的解决方案中，它*要求*您给它一个三个属性`@style`字符串，并且最后一个以一个`px`值给出（所以它不是很灵活，但符合您对这里问题的确切规范）。显然，下面的 LESS 1.4.0 代码比这更好，但在它结束测试之前，一些（也许是你）可能需要更像下面的代码：

**较少的**

```
.box-shadow(@style, @c) when (iscolor(@c)) {
  @firstTwoParams: ~`(function() {
    var makeArray = "@{style}".replace(/^\[/,'').replace(/\]$/,'').split(',');
    return (makeArray[0]+makeArray[1]);
  })()`;
  @thirdParam: unit(~`(function() {
    var makeArray = "@{style}".replace(/^\[/,'').replace(/\]$/,'').split(',');
    return makeArray[2];
  })()`, px);
  @resetStyle: @firstTwoParams (@thirdParam+5);
  box-shadow:         @style @c;
  -webkit-box-shadow: @resetStyle @c;
  -moz-box-shadow:    @style @c;
} 
```

**CSS 输出**与下面的 LESS 1.4.0 代码答案相同。

## 使用 LESS 1.4.0 自动进行（清洁和简单）

**根据注释的所需输出进行编辑**

在 LESS 的最新版本（目前是 beta，1.4.0）中，您可以使用该`extract`功能访问第三个成员，然后自动设置一些内容以添加到其中。这是一个重新设计的 mixin 的示例（它将使用与您当前拥有的完全相同的调用）：

```
.box-shadow(@style, @c) when (iscolor(@c)) {
  @resetStyle: extract(@style,1) extract(@style,2) (extract(@style,3)+5);
  box-shadow:         @style @c;
  -webkit-box-shadow: @resetStyle @c;
  -moz-box-shadow:    @style @c;
} 
```

所以你`.box div`调用它的代码会产生这个：

```
.box div {
  box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
  -webkit-box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
  -moz-box-shadow: 0 0 5px rgba(0, 0, 0, 0.3);
} 
```

由于新 mixin中的变量中设置了常量，因此它已添加`5px`到您的列表中。`5px``@resetStyle`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T04:50:55.430

对不起，这可能有点粗鲁，但是 ScottS - 看到你对另一个问题的回答，只是知道/希望你可能有我的黄金解决方案...... :-) 所以 ScottS...... 我可以带领你吗在我的问题的方向：[CSS / HTML：在浏览器窗口中居中绝对元素，无论父位置（父也是绝对）](https://stackoverflow.com/questions/15803850/css-html-centering-absolute-element-in-browser-window-regardles-of-parent-pos) ......这里有一个问题的例子：

[http://jsfiddle.net/Nhd8y/4/](http://jsfiddle.net/Nhd8y/4/) ...

```
#megamenuShops li:hover .dropdown_1column_shop {

    left: calc(50% - 400px);
    left: -moz-calc(50% - 400px);
  left: -webkit-calc(50% - 400px);
    position:fixed;

  top:inherit;
} 
```

向下滚动时，出现在 onmouseover 上的 div 保留在视口中（因为位置固定） - 它应该保留在父菜单块中。但是，如果我这样做，我将无法使 div 在浏览器窗口中水平居中：-/

最后但并非最不重要的一点......非常抱歉ttback使用你的问题试图引起ScottS的注意......希望你能原谅我......

# python - 在将其编译为 .exe 后，如何使用 Colorama 使 Python 打印彩色文本？

> ID：15856432
> 
> 赞同：1
> 
> 时间：2013-04-06T21:49:14.123
> 
> 标签：python, cmd, executable, output, colorama

我正在使用带有 colorama 0.2.5 的 Python 2.7。我正在调用一个打印一些彩色文本的方法：

```
from colorama import Fore
from colorama import Style
from colorama import init

    def sendData(self):
        print("Sending data..."),
        sys.stdout.flush()
        self.browser.submit()
        print(Style.BRIGHT + "[ " + Fore.GREEN + "OK" + Fore.RESET + " ]" + Style.RESET_ALL) ## Prints coloured text

init()
sendData() 
```

这部分代码在 GUI 应用程序（使用 pyqt 制作）中为用户提供了一些终端输出。

使用 Python 解释器运行此脚本的工作方式在 Ubuntu 12.04 和 Windows 7 上都是如此。但是，当我使用 PyInstaller（使用`--onefile`标志）将其编译为一个可执行文件时，情况发生了变化：

*   在 Ubuntu 12.04 上，当从终端运行可执行文件时，我得到彩色终端输出，这是我想要的方式。
*   在 Windows 7 上，从 运行可执行文件时`cmd`，GUI 运行良好，但我没有得到终端输出。

如果有帮助，我与 PyInstaller 命令一起提供的标志是`-F`（一个文件）和`-w`（窗口模式）。

如何让可执行文件`cmd`在 Windows 7 中打印彩色文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:31:26.237

做到这一点的唯一方法是不使用`-w`标志。

# mysql - Mysql UPDATE语法，如何作为数组使用

> ID：15856435
> 
> 赞同：0
> 
> 时间：2013-04-06T21:49:49.563
> 
> 标签：mysql

我无法理解 MYSQL 的 UPDATE 命令的文档。我正在从数据库中查看 PHP 页面中的记录，我想编辑它们。

要插入，我有这个代码，它是一个数组。我想知道我是否可以对 UPDATE 语句执行相同的操作，以节省大量**this=$this**的内容。

插入

```
 mysql_query("INSERT INTO $tbl_name(title, pbDate, summary, blog) VALUES('$title', 'pbDate', '$summary', '$blog')")or die(mysql_error()); 
```

更新

```
mysql_query("UPDATE $tbl_name SET title='$title', pbDate='$pbDate' summary='$summary' blog='$blog' WHERE id='$id'") 
```

我在想这样的事情，但我不确定并且在手册中找不到任何内容。

```
mysql_query("UPDATE $tbl_name SET (title, pbDate, summary, blog) VALUES('$title', 'pbDate', '$summary', '$blog') WHERE id='$id'") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:56:05.067

你可以使用一个`array`...

工作phpFiddle：

[http://phpfiddle.org/main/code/pi9-ckh](http://phpfiddle.org/main/code/pi9-ckh)

```
<?php
$array = array(
    "column" => "some_value",
    "title" => "some_title",
);

$setString = '';
foreach($array as $key => $value){
    $tempArray[] = $key . ' = ' . "\"" . $value . "\""; 
}

$setString = implode(",", $tempArray);

echo $setString;
?> 
```

# facebook - 移动用户无法访问 Facebook 页面选项卡

> ID：15856438
> 
> 赞同：22
> 
> 时间：2013-04-06T21:50:40.210
> 
> 标签：facebook, iframe, tabs, fbml

我有一个问题，我看不到为解决方案提供资金。我的 Facebook 页面上有一个标签（其中一个静态 HTML：iFrame 应用程序）。从 PC 访问它没有问题，但是当我尝试从移动设备访问该选项卡时，它说：

“未找到您请求的页面。返回上一页”

有什么方法可以创建在移动设备上可访问的选项卡，或者只是将它们重定向到外部域？

谢谢！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-07T08:46:00.023

# 如何创建可移动访问的 Facebook 页面标签应用程序

为了创建具有**移动访问版本的****页面选项卡应用程序**（直接访问的外部网站，而不是通过 Facebook iFrame）。您需要在应用开发者设置中添加和配置 3 个不同的“平台”。这些应该配置如下：

 **## 页面选项卡

像往常一样配置它。

*   **页面选项卡名称**：*您希望出现在页面选项卡上的名称*
*   **页面标签网址**：*您托管页面标签应用程序的网址*（例如[http://myapp.com/page-tab](http://myapp.com/page-tab)）
*   **安全页面标签网址**：*同样的东西，但前面有 https*（例如[https://myapp.com/page-tab](https://myapp.com/page-tab)）

## 网站

这是您为移动网站配置 url 的地方

*   **移动站点 URL**：*这是您希望移动用户被重定向到的 URL（例如[http://myapp.com/mobile-version](http://myapp.com/mobile-version)）*
*   **站点 URL**：*这用于 Facebook Connect，如果您不使用 Facebook Connect，只需将您的移动 URL 也放在这里。*

## 脸书上的应用

这将成为您的应用程序的门户。到达此页面的**移动用户将被重定向到****移动网站**。您可以使用 javascript 将**桌面用户**重定向到您的**Facebook Page Tab App**。

*   **画布应用页面**：*这将是[http://apps.facebook.com/my-app-namespace](http://apps.facebook.com/my-app-namespace)，这是您将发布在您的 Facebook 墙上或广告中的链接，或者您想要链接到您的页面标签的任何其他地方*
*   **Canvas Url**：*这是指向您的应用程序页面的链接，该页面将作为 iframe 嵌入到画布应用程序页面上。您将使用此页面使用 JavaScript 重定向到您的页面选项卡。例如[http://myapp.com/canvas-redirect](http://myapp.com/canvas-redirect)*
*   **Secure Canvas Url**：*这与上面相同，但前面带有 https（例如“ [https://myapp.com/canvas-redirect](https://myapp.com/canvas-redirect) ”）*

## 你的画布重定向脚本

您希望在桌面浏览器上访问您的画布应用程序的人被重定向到您的页面选项卡应用程序。因为它是在 i-frame 中加载的，所以唯一的方法是使用 JavaScript。

这将是您的**Canvas Url**的内容（上面的[http://myapp.com/canvas-redirect](http://myapp.com/canvas-redirect)）：

```
<script>top.location="http://facebook.com/page_tab_url/app_1234"</script> 
```

**注意“top.location”** - 这会将父窗口重定向到页面选项卡，而不仅仅是 iframe。当用户在桌面浏览器中到达画布页面时，他们将通过 JavaScript 重定向到您的**Page Tab App**。**移动用户**将被 Facebook 重定向到您在上面指定的**移动网站 URL**。

## 在沙盒模式下测试

如果您的应用处于沙盒模式，则只有应用的管理员、开发人员或测试人员才能看到它。特别是未登录 Facebook 或已登录 Facebook 但不是应用程序管理员或测试人员的用户将无法访问应用程序画布页面 - 他们只会看到 404 错误。为了在应用程序处于沙盒模式时测试您的移动重定向，您需要确保**您是应用程序的管理员、开发人员或测试人员，并且您已在手机的网络浏览器上登录 Facebook 的移动站点**- 即 iOS 上的 Safari和 Android 上的 Chrome。仅在手机上登录 Facebook 移动应用程序是**不够**的，您还必须使用浏览器登录。

## 关于用户角色的说明

您可以通过单击应用设置中的“角色”选项卡来配置应用用户角色。您可以添加 Facebook 用户或 Facebook 群组作为任何角色。（如果您添加一个组，该组中的所有用户都将具有应用程序中指定的角色）。为了让用户在应用程序中拥有特定角色，他们必须：

*   验证他们的 Facebook 帐户： http: [//www.facebook.com/help/verify](http://www.facebook.com/help/verify)
*   安装 Facebook 开发者应用[https://developers.facebook.com/](https://developers.facebook.com/)

*（编辑以反映更新的开发设置 UI 和可读性）*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-21T18:24:49.037

作为对此的更新，Facebook 现在会自动重定向到您的网站，而无需任何黑客攻击。

为此，请确保您已将网站平台添加到您的应用程序中，并将您的移动 URL 放在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T14:09:15.373

我很难弄清楚如何使用移动设备访问页面标签，感谢 Ben 在之前的评论中，我找到了一种方法。首先，您无法使用手机访问页面标签，因此您需要将其指向您的页面标签的来源。如果您使用画布，Facebook 可以为您做到这一点，但如果您使用台式计算机访问它，您将被重定向到您的画布链接，而不是您的页面选项卡。这就是我们修复它的方法：

--

1) 在设置 - 基本下进入您的应用程序（Facebook 开发人员）

2)从“*页面标签*”部分复制您的*“页面标签 URL* ” （类似于[http://yourpagetab.yourdomain.com](http://yourpagetab.yourdomain.com)），然后将其粘贴到您的*移动网站 URL*中到“*移动网站*”部分。

 ***3)*对 Facebook 上的应用程序*部分执行相同操作，但不要将其指向您的页面选项卡，您必须使用重定向文件。让我们使用[http://yourpagetab.yourdomain.com/redirection.php?fb](http://yourpagetab.yourdomain.com/redirection.php?fb)

请注意，您必须在链接末尾使用 ?fb 。它什么都不做，但 Facebook 想要它。实际上它可能是？任何东西，可能只是？

4）创建redirection.php文件（不要添加？fb）并在其中添加此代码

```
<script>top.location="http://facebook.com/your_fb_page/your_page_tab"</script> 
```

您必须将 /your_fb_page/your_page_tab 替换为指向您的页面选项卡的链接。

5）保存它！

--

现在，您所要做的就是使用 Facebook 为您提供的*Canvas Page* url（在*Facebook 上的 App*下）。如果人们点击它并在桌面上，他们将被重定向到页面选项卡。如果他们在移动设备上，他们将被重定向到托管页面选项卡的网站。

如果您正在使用扇门（用户必须在访问您的页面标签之前喜欢您的页面）：这将不起作用，因为移动用户将卡在您的扇门上。

解决这个问题的唯一方法是禁用扇门或使用 Mobile Detect（您可以在 Github 上搜索）并仅对使用移动设备的用户禁用它。如果您希望您的页面标签与移动用户一起使用，这是一个很小的代价。桌面用户仍然需要喜欢您的页面才能看到您的页面选项卡。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-10T10:13:46.787

您还可以使用这样的链接来阻止 facebook 重定向手机

[https://www.facebook.com/MyAppName/?sk=app_11111-APP-ID-11111&ref=ts](https://www.facebook.com/MyAppName/?sk=app_11111-APP-ID-11111&ref=ts)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-06T18:48:02.040

我是静态 HTML 的开发人员之一。实际上，我们现在在应用程序中内置了一个功能，可以生成适用于移动设备和桌面的智能、缩短的链接。如果您单击编辑器顶部的“+”图标，它将拉出一个可共享的链接。

~~如果您使用该链接，我们会做一些额外的魔术，以便您的标签更适合小屏幕。~~

编辑：我们已经放弃了特殊格式，因为它在 iOS 设备上出现故障。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-21T17:21:11.593

这是我用于重定向的 php 代码：

```
// Mobile_Detect
require 'Mobile_Detect.php';

$detect = new Mobile_Detect;

if (strpos('https://' . $_SERVER['HTTP_REFERER'] . $_SERVER['REQUEST_URI'], 'facebook.com') !== false && $detect->isMobile()) {
    echo '<html><head><script type="text/javascript">window.top.location.href = "https://yourappurl.com";</script></head><body></body></html>';
    die();
} 
```*****

# php - IonAuth 组 - 不返回正确的值

> ID：15856439
> 
> 赞同：0
> 
> 时间：2013-04-06T21:50:41.523
> 
> 标签：php, mysql, codeigniter, ion-auth

所以我刚开始为我的 CI 应用程序使用 Ion_Auth lib，无论如何我在使用库函数时得到的结果有点麻烦`in_group`。一切正常，直到我手动编辑默认管理员帐户并将其从成员组中删除；但是，如果我进行检查，`in_group`我会不断地返回该管理员是两个组的成员。

因此，以下代码将两个 if 语句都返回为 true，尽管 admin 仅在 admin 用户组中...

`if ($this->ion_auth->in_group('admin')) echo 1;`

`if ($this->ion_auth->in_group('members')) echo 2;`

我已经尝试注销，清除我的 cookie 和缓存，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:16:49.050

好的，问题是 IonAuth 缓存了该信息，因此在直接编辑数据库时，您还必须进行相应的调用 `$this->ion_auth->remove_from_group(1,2)`

# emacs - Emacs 24.3 dired+ 无法加载

> ID：15856440
> 
> 赞同：2
> 
> 时间：2013-04-06T21:50:45.767
> 
> 标签：emacs, dired

我通过 list-packages 安装了 dired+（该文件夹放在 elpa 文件夹中），然后放入`'(add-to-list 'load-path "~/.emacs.d/elpa/")'`我的*init*文件（我自己创建的），然后`'(require 'dired+)`放在下面。当我打开 emacs 时，我收到一条错误消息，告诉我我的*init*文件中有错误。如果我删除该`'(require 'dired+)`行，错误就会停止，但是当我调用 dired 模式时 dired+ 再次不起作用。我安装它时下载的实际文件夹是`'dired+-20130206.1702'`. 所以我尝试`'(require dired+-20130206.1702)`了，这再次给了我启动时的错误。

我无计可施。我已经尝试了我能想到的一切，浏览了 GNU emacs 文档，搜索了问题，在 Stack 上查看了答案，但没有运气。有没有人有什么建议？我正在使用 Windows XP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:37:57.317

如果没有看到所有代码，就不可能肯定地说，但是您似乎无缘无故地引用了您的表格。

即，这些：

```
'(add-to-list 'load-path "~/.emacs.d/elpa/")
'(require 'dired+) 
```

应该：

```
(add-to-list 'load-path "~/.emacs.d/elpa/")
(require 'dired+) 
```

但是，这只会使它们无效，而不是直接导致错误。

向我们展示代码和错误消息。

编辑：

> 将 /dired+/ 添加到末尾似乎可以解决它......虽然我不知道为什么。有什么想法吗？

`load-path`包含 Emacs 将在其中查找库的目录列表。它不会自动下降到子目录，因此您需要为您的库指定所有相关目录。您的 dired+ 库显然在`~/.emacs.d/elpa/dired+/`目录中。

对于 menubarplus，您同样需要检查库所在的目录。

老实说，我原以为 Emacs 24 中的包管理会自动处理这个问题。但由于我没有使用它，我不确定。

编辑2：

是的，我怀疑你这里还有其他问题。我刚刚尝试通过包管理器安装一个库（尽管来自默认包存储库，它不包含 dired+ 包），并且在重新启动 Emacs 后`load-path`包含新库的路径，而我没有任何干预。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T06:11:13.630

**我认为菲尔斯在加载Dired+ 时**回答了您的问题（指定正确的目录，即您放置的目录`dired+.el`）。

Wrt **Menu-bar+**，功能名称是`menu-bar+`, not`menubarplus`和 not `menu-barplus`。因此，将您的更改`(require 'menubarplus)`为`(require 'menu-bar+)`.

# sql - Oracle SQL 使用合并创建交叉表

> ID：15856441
> 
> 赞同：0
> 
> 时间：2013-04-06T21:50:49.440
> 
> 标签：sql, oracle, merge, crosstab

我需要帮助创建交叉表。有人告诉我可以使用 Merge 语句来完成，但我对此感到很困惑。也许有人有使用合并语句创建交叉表的经验。

这是初始表：（初始表中可以有很多人，结果表中可以有很多列）

```
person  text
person_1    some_text_1
person_1    some_text_2
person_1    some_text_3
person_1    some_text_4
person_1    some_text_5
person_2    some_text_6
person_2    some_text_7
person_2    some_text_8
person_2    some_text_9 
```

结果是我需要的表：

```
person_1    person_2
some_text_1 some_text_6
some_text_2 some_text_7
some_text_3 some_text_8
some_text_4 some_text_9
some_text_5 
```

UPD：我知道它可以通过枢轴或其他方式来完成。问题是如何使用 MERGE 来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:31:01.773

我认为您可以尝试像这样结合使用[RANK](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions141.htm#i1269223)和[PIVOT](http://docs.oracle.com/cd/E11882_01/server.112/e25554/analysis.htm#DWHSG0209)

```
select person_1,person_2
from (
        select *
        from (
                select rank() over(partition by person order by text) as idx, person, text
                from <your_table>
            )
        pivot (
                max(text) for person in (
                        'person_1' as person_1,
                        'person_2' as person_2
                    )
            )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:33:01.077

我不知道如何使用“合并”来获得它。实际上，我不认为“合并”可以工作......这是我的解决方案，可以满足您的需求但不方便......

```
SELECT A.TEXT AS PERSON_1,B.TEXT AS PERSON_2...
FROM 
(SELECT TEXT,ROWNUM AS R  FROM PERSON_TAB WHERE PERSON='person_1') A
FULL JOIN 
(SELECT TEXT,ROWNUM AS R FROM PERSON_TAB WHERE PERSON='person_2' ) B
ON A.R=B.R
FULL JOIN
... 
```

如果你有太多的“人”，你可以创建一个程序来做到这一点。请告诉我，如果您知道如何使用合并或更好的方法来做到这一点:)

# windows - cmake在windows上找到sqlite3库

> ID：15856445
> 
> 赞同：4
> 
> 时间：2013-04-06T21:50:55.907
> 
> 标签：windows, sqlite, cmake

我遇到的麻烦比我想象的要让 CMake`sqlite3.dll`在 Windows 7 上找到库（如果重要的话是 64 位）要多。我已经下载并放置了最新的`sqlite3.dll`和`sqlite3.def`文件到`C:\Windows\System32`. 我正在使用`FindSqlite3.cmake`下面的模块：

```
IF( SQLITE3_INCLUDE_DIR AND SQLITE3_LIBRARY_RELEASE AND SQLITE3_LIBRARY_DEBUG )
    SET(SQLITE3_FIND_QUIETLY TRUE)
ENDIF( SQLITE3_INCLUDE_DIR AND SQLITE3_LIBRARY_RELEASE AND SQLITE3_LIBRARY_DEBUG )

FIND_PATH( SQLITE3_INCLUDE_DIR sqlite3.h )

FIND_LIBRARY(SQLITE3_LIBRARY_RELEASE NAMES sqlite3 )

FIND_LIBRARY(SQLITE3_LIBRARY_DEBUG NAMES sqlite3 sqlite3d HINTS /usr/lib/debug/usr/lib/ C:/Windows/System32/ )

IF( SQLITE3_LIBRARY_RELEASE OR SQLITE3_LIBRARY_DEBUG AND SQLITE3_INCLUDE_DIR )
SET( SQLITE3_FOUND TRUE )
ENDIF( SQLITE3_LIBRARY_RELEASE OR SQLITE3_LIBRARY_DEBUG AND SQLITE3_INCLUDE_DIR )

IF( SQLITE3_LIBRARY_DEBUG AND SQLITE3_LIBRARY_RELEASE )
# if the generator supports configuration types then set
# optimized and debug libraries, or if the CMAKE_BUILD_TYPE has a value
IF( CMAKE_CONFIGURATION_TYPES OR CMAKE_BUILD_TYPE )
SET( SQLITE3_LIBRARIES optimized ${SQLITE3_LIBRARY_RELEASE} debug ${SQLITE3_LIBRARY_DEBUG} )
ELSE( CMAKE_CONFIGURATION_TYPES OR CMAKE_BUILD_TYPE )
    # if there are no configuration types and CMAKE_BUILD_TYPE has no value
    # then just use the release libraries
SET( SQLITE3_LIBRARIES ${SQLITE3_LIBRARY_RELEASE} )
ENDIF( CMAKE_CONFIGURATION_TYPES OR CMAKE_BUILD_TYPE )
ELSEIF( SQLITE3_LIBRARY_RELEASE )
SET( SQLITE3_LIBRARIES ${SQLITE3_LIBRARY_RELEASE} )
ELSE( SQLITE3_LIBRARY_DEBUG AND SQLITE3_LIBRARY_RELEASE )
SET( SQLITE3_LIBRARIES ${SQLITE3_LIBRARY_DEBUG} )
ENDIF( SQLITE3_LIBRARY_DEBUG AND SQLITE3_LIBRARY_RELEASE )

IF( SQLITE3_FOUND )
IF( NOT SQLITE3_FIND_QUIETLY )
MESSAGE( STATUS "Found Sqlite3 header file in ${SQLITE3_INCLUDE_DIR}")
MESSAGE( STATUS "Found Sqlite3 libraries: ${SQLITE3_LIBRARIES}")
ENDIF( NOT SQLITE3_FIND_QUIETLY )
ELSE(SQLITE3_FOUND)
IF( SQLITE3_FIND_REQUIRED)
MESSAGE( FATAL_ERROR "Could not find Sqlite3" )
ELSE( SQLITE3_FIND_REQUIRED)
MESSAGE( STATUS "Optional package Sqlite3 was not found" )
ENDIF( SQLITE3_FIND_REQUIRED)
ENDIF(SQLITE3_FOUND) 
```

这在 Linux 上运行良好，但在 Windows 上不行。我现在花了几个小时尝试对其他 CMAKE 变量进行小的更改，但没有成功。让 CMake 找到这个似乎应该是直截了当的`dll`。我可以得到一些帮助来找到 Windows 上的 sqlite3 库吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T00:46:24.950

这里有一些问题，还有一些奇怪的 Windows 东西！

首要问题; 在使用 MSVC 作为生成器的 Windows 上搜索库时，CMake 将始终查找“.lib”文件 - 从不查找“.dll”，即使您指定例如`sqlite3.dll`作为. 不幸的是，这没有正确记录，实际上文档错误地指出：`NAMES``find_library`[`CMAKE_FIND_LIBRARY_SUFFIXES`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#variable%3aCMAKE_FIND_LIBRARY_SUFFIXES)

> 这指定 find_library 命令查找库时要添加到库名称的后缀。在 Windows 系统上，这通常是 .lib 和 .dll，这意味着当尝试查找 foo 库时，它将查找 foo.dll 等。

您可以轻松检查这一点；只需添加

```
message("CMAKE_FIND_LIBRARY_SUFFIXES:  ${CMAKE_FIND_LIBRARY_SUFFIXES}") 
```

到您的 CMakeLists.txt。您应该看到如下输出：

> ```
> CMAKE_FIND_LIBRARY_SUFFIXES:  .lib 
> ```

[CMake 邮件列表中的这个线程](http://cmake.3232098.n2.nabble.com/FindLibrary-only-looks-for-lib-under-Windows-td5532822.html)进一步证实了这种行为。如果您确实需要查找 dll，则需要使用该[`find_file`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_file)命令，例如：

```
find_file(SQLITE3_DLL_DEBUG NAMES sqlite3d.dll PATHS ...) 
```

* * *

下一个问题是一个小问题。如果它是硬编码的猜测，您应该更喜欢`PATHS`作为命令`HINTS`中的参数。`find_xxx`从文档中[`find_library`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_library)：

> `3`. 搜索选项指定的路径`HINTS`。这些应该是由系统自省计算的路径，例如由已找到的另一个项目的位置提供的提示。应使用该`PATHS`选项指定硬编码猜测。

* * *

一个稍微更严重的问题是：

```
FIND_LIBRARY(SQLITE3_LIBRARY_DEBUG NAMES sqlite3 sqlite3d ...) 
```

*您应该先*指定 sqlite3d ，然后如果两者都可用，则 sqlite3 或 sqlite3 将被错误地选择为调试库。

* * *

而现在的诡异...

在 Windows x64 系统上，`find_xxx`部分忽略 C:\Windows\System32 目录，而选择 C:\Windows\SysWOW64 目录。

如果 C:\Windows\SysWOW64 中没有 sqlite3.lib，那么无论参数`find_library`如何，该命令都会失败。`PATHS`

但是，如果您*确实*有 C:\Windows\SysWOW64\sqlite3.lib，那么`C:/Windows/SysWOW64`和/或`C:/Windows/System32`作为`PATHS`参数的任何组合都会找到该库，但`C:/Windows/System32/sqlite3.lib` *即使 C:/Windows/System32/sqlite3.lib 没有，也会将完整路径设置为不存在*！如果图书馆不在那里，这显然是无用的。将导致链接器错误。

[从这里](http://www.cmake.org/pipermail/cmake/2010-June/037312.html)的 CMake 邮件列表中有一些进一步的阅读。

话虽如此，如果您正在链接，您将使用 .lib 文件，而不是 .dll，并且 System32 和 SysWOW64 并不是 .lib 文件的真正位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-06T05:42:36.697

我没有发现**cmake**寻找**.lib。请**。

请检查**cmake 文件**并在**cmake 文件夹中****找到 Sqlite.cmake**文件并检查它正在寻找的**路径。**

 ****当我给出“ **dll** ”的完整路径时，它对我有用，对应于 cmake 文件中提到的输入变量，它也可能对你有用。

如果您的问题没有解决，请通知我编辑答案。****

# c++ - 在 C++ 中导入 bmp 文件

> ID：15856450
> 
> 赞同：0
> 
> 时间：2013-04-06T21:51:25.300
> 
> 标签：c++, image, import

我看过很多教程，但我无法让像素数据读取工作......

这是我到目前为止所得到的：

```
struct RGB
{
 unsigned char blue,green,red,reserved;
};

BmpLoader* loadBmp(const char* filename)
{
BITMAPFILEHEADER header;
BITMAPINFOHEADER info;
FILE *file;
file=fopen(filename,"rb");

fread(&header,sizeof(header),1,file);
fread(&info,sizeof(info),1,file);
unsigned char *px;
int bitsize=info.biWidth*info.biHeight;
px=new unsigned char[bitsize*3];
fseek(file,header.bfOffBits,0);
for(int i=0;i<bitsize;i++)
{
    RGB rgb;
    fread(&rgb,sizeof(RGB),1,file);
    px[i*3]=rgb.red;
    px[i*3+1]=rgb.green;
    px[i*3+2]=rgb.blue;
    printf("%d %d %d\n",px[i*3],px[i*3+1],px[i*3+2]);

}

    return new BmpLoader(px,info.biWidth,info.biHeight);

} 
```

如您所见，我还尝试将它们打印为小数，这应该给出字符的 ascii 代码，输出如下所示：

```
204 204 76
204 204 255
204 204 136
204 204 76
204 204 255
204 204 136 
```

我的问题是：我该如何解决这个问题？我到底在做什么错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T21:55:27.633

您只读取一个字节`rgb`

```
fread(&rgb,1,1,file); 
```

应该

```
fread(&rgb,sizeof(RGB),1,file); 
```

# objective-c - 使用委托时是否需要导入 .h 文件？

> ID：15856451
> 
> 赞同：0
> 
> 时间：2013-04-06T21:51:27.317
> 
> 标签：objective-c, uiviewcontroller, protocols, delegation

```
-(IBAction)ok
{
    //send message to the delegate with the new settings
    [self.delegate setHeight:_height Width:_width Mines:_mines];
    [self.delegate dismissViewControllerAnimated:YES completion:nil];
} 
```

在我导入 ViewController.h 之前，给代理的第一条消息将不起作用，但第二条消息在没有导入的情况下起作用。如果我添加 -(void)setHeight:(int)h Width:(int)w Mines:(int)m; 根据 optionsViewController 协议的要求，这意味着我不再需要导入根 .h 文件。

我打算使用委托在程序的其他部分发送消息，所以我想确保我正确使用它，而不是在我不需要的时候导入东西。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:02:15.833

> 如果我添加 -(void)setHeight:(int)h Width:(int)w Mines:(int)m; 根据 optionsViewController 协议的要求，这意味着我不再需要导入根 .h 文件。

是的！您也可以将其添加为 @optional 并且它会起作用（请记住检查委托 -respondsToSelector: 在这种情况下）。整个想法是，您的对象通常对委托对象一无所知——除了它符合协议（即实现@required 和可能的@optional 方法）。

添加澄清（在我的手机上，这是一个痛苦的屁股）：

```
`//OptionsViewController.h
//this object does NOT have to import
//the calling viewControllers .h file
//which is what I think the OP does

@protocol optionsViewControllerProtocol;

@interface OptionsViewController : UIViewController

@property (nonatomic, assign) id<optionsViewControllerProtocol> delegate; //should be id, could be UIViewController too, if absolutely necessary (better design to make it id)
@end

@protocol optionsViewControllerProtocol <NSObject>

@required 
-(void) setHeight: (NSInteger) height;
@end

//viewController.h
#import "optionsViewController.h" //necessary to get the protocols definitions 

@interface OptionsViewController: UIViewController <optionsViewControllerProtocol>

//.....` 
```

* * *

 `## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T21:57:53.520

如果您将`delegate`属性定义为 class `UIViewController*`，那么编译器将识别该`dismissViewControllerAnimated:completion:`方法而无需导入任何内容，因为这是该类的标准方法。

对于自定义方法，即`setHeight:Width:Mines:`，您绝对需要导入头文件，或者将其导入导入链的某个位置。

示例：您有`MyProtocol.h`，并且希望`SomeClass`有一个符合该协议的委托属性。如果您`#import "MyProtocol.h"`在 中`SomeClass.h`，则无需在 中重新导入它`SomeClass.m`。

```
// SomeClass.h
#import "MyProtocol.h"

@interface SomeClass : NSObject
@property (weak, nonatomic) id<MyProtocol> delegate;
@end

//SomeClass.m
#import "SomeClass.h"

@implementation SomeClass

- (void)someMethod
{
    [self.delegate myProtocolMethod];
}
@end 
````

# c# - 随机对象参考

> ID：15856461
> 
> 赞同：-1
> 
> 时间：2013-04-06T21:52:51.273
> 
> 标签：c#

是的，我搜索了这种情况，但无法真正将其他人与此联系起来......（请不​​要抨击我......）

```
public Random Randomizer; 

string[] Monsters = { "Rat", "Giant Rat", "Skeleton", "Infected" };

public string DisplayKilled() 
{
    if (PlayerOne.Level <= 5) 
    {
        string randomMonster = Monsters[Randomizer.Next(1,2)]; // <= problemo 
```

我在“字符串 randomMonster = Monsters[Randomizer.Next(1,2)];”处遇到错误 :***对象引用未设置为对象的实例。***我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T21:54:35.367

您可以初始化变量。目前，您永远不会将其设置为一个值。它在这里*声明*：

```
public Random Randomizer; 
```

...但是您从不给它一个值，因此它将具有默认值`null`，这会导致在您取消引用它时引发异常。值得理解的是，这与它是关于随机性的事实*无关......**任何*引用类型变量都会发生同样的情况，例如 a`string`或 a `Stream`。

你*可以*只使用：

```
private readonly Random randomizer = new Random(); 
```

...但还有其他缺点。（请注意，我已将其设为私有和只读 - 您应该几乎在任何地方都避免使用公共字段，并将其设为只读，除非您真的希望该值在对象的生命周期内发生变化。）

就缺点而言，有两个需要担心：

*   如果您`Random`在很短的时间内使用无参数构造函数创建多个实例，它们中的许多可能共享相同的种子，这意味着它们将产生相同的随机数。
*   `Random`不是线程安全的 - 如果您使用来自多个线程的单个实例而没有任何锁定，您可以轻松进入每次只返回 0 的状态。

这两者一起特别讨厌......如果不是出于线程安全方面的考虑，那么只声明一个静态字段并为所有内容使用相同的实例是相当合理的。但是，如果您涉及多个线程，那将不起作用。同样，如果共享种子不是问题，那么每次需要时创建一个就可以了。

我[在 .NET](http://csharpindepth.com/Articles/Chapter12/Random.aspx)中有一个关于随机性的页面，其中详细介绍了这个问题并提出了一些解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T21:54:20.143

```
public Random Randomizer = new Random(); 
```

# c# - GridView 'GridView1' 触发了未处理的事件 RowDeleting，但有一个事件

> ID：15856463
> 
> 赞同：0
> 
> 时间：2013-04-06T21:53:04.920
> 
> 标签：c#, asp.net, gridview, webforms

我一直在尝试使用 webusercontrol、delegate 和 ADO 创建动态控制面板。即使我写了删除和编辑的委托，我也面临“GridView 'GridView1' 触发的事件 RowDeleting 没有被处理。”问题。有人可以帮我吗这是我的代码

```
 protected void Page_Load(object sender, EventArgs e)
    {
        GridView1.DataSource = this.DataSource;
        GridView1.DataBind();
        GridView1.DataKeyNames = new string[] { this.DataKeyNames };

    }

    public object DataSource { get; set; }
    public string DataKeyNames { get; set; }

    public event GridHander RowDeleting;
    public event GridHander RowSawing;

    protected void GridView1_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        GridViewRow gvr = ((LinkButton)e.CommandSource).Parent.Parent as GridViewRow;
        int rowIndex = gvr.RowIndex;
        object id = GridView1.DataKeys[rowIndex].Value;

        switch (e.CommandName)
        {
            case "Edit":
                GridView1.EditIndex = rowIndex;
                break;

            case "Delete":
                if (RowDeleting != null)
                {
                    GridEventArgs args = new GridEventArgs() 
                    {
                         row=gvr,
                         id=id,
                         rowIndex=rowIndex
                    };
                    RowDeleting.Invoke(e.CommandSource, args);
                }
                break;

            case"Save":
                if (RowSawing != null)
                {
                    GridEventArgs args = new GridEventArgs() 
                    {
                        row = gvr,
                        id = id,
                        rowIndex = rowIndex
                    };
                    RowSawing.Invoke(e.CommandSource, args);

                }
                GridView1.EditIndex = -1;
                break;

            case "Cancel":
                GridView1.EditIndex = -1;
                break;

            default:
                break;
        }
    }
} 
```

//我的网络表单

```
ublic partial class CategoryControlPanel : System.Web.UI.Page
{
    CategoryResposite _categoryResposite=new CategoryResposite();

    protected void Page_Load(object sender, EventArgs e)
    { 
        ControlPanel.DataSource = _categoryResposite.ListCategories();
        ControlPanel.RowDeleting += ControlPanel_RowDeleting;
        ControlPanel.RowSawing += ControlPanel_RowSawing;
    }

    void ControlPanel_RowSawing(object sender, GridEventArgs e)
    {
        throw new NotImplementedException();
    }

    void ControlPanel_RowDeleting(object sender, GridEventArgs e)
    {
        _categoryResposite.DeleteCategories(Convert.ToInt32(e.id));   
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T22:19:17.977

您发布的代码不完整（缺少 aspx 文件代码），根据您对问题的描述，听起来好像您没有将 RowDeleting 事件分配给 GridView1。

在 aspx 文件的开始 gridview 标记内添加分配，如下所示：

```
<asp:gridview ID="..." runat="server" ... OnRowDeleting="<name of event handler>" ...> 
```

如果事件处理程序 ControlPanel_RowDeleting 旨在处理从 gridview 删除操作，则将其作为事件处理程序名称插入。确保在删除后重新绑定 gridview，以便在回发时显示更改。

```
protected void ControlPanel_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    // cancel the automatic delete action
    e.Cancel = true;

    // do the delete
    _categoryResposite.DeleteCategories(Convert.ToInt32(e.id));

    // complete delete action
    GridView1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-11T16:38:15.967

您正在尝试为删除按钮使用命令名称**Delete**。所以gridview会自动创建一个行删除事件......

您需要将命令参数从**Delete更改为****Delete_Product 之**类的其他内容或您想要的任何内容...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T09:03:50.390

GridView 的优点之一是它提供了一个内置的 CommandField 按钮，允许我们执行某些操作，例如编辑、更新、删除和选择 GridView 数据。

要添加 GridView 中提到的那些命令字段，您可以按照以下几个步骤操作： 1\. 切换到设计视图 2\. 右键单击​​ GridView 并选择 --> 显示智能标记 --> 添加新列 3\. 在列表中选择CommandField 4\. 检查删除和编辑/更新选项，然后确定

如您所见，Edit 和 Delete CommandField 自动添加到 GridView 的最后一列。现在我们可以开始编写代码来编辑和更新 GridView 中的信息。

为了在 GridView 中执行编辑和更新，我们需要使用三个事件（GridView_RowEditing、GridView_RowCancelingEdit、GridView_RowUpdating）。对于那些不知道如何在 GridView 中生成事件的人，您可以按照以下步骤操作：

1.  在 Visual Studio 设计器中切换到设计视图
2.  单击网格视图
3.  导航到 GridView 属性窗格，然后切换到事件属性
4.  从那里您将能够找到包括上述三个事件在内的事件列表
5.  双击它为您生成事件处理程序

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-06T23:37:57.667

尝试将受保护的方法添加到方法签名中。

# c# - 尝试使用 C# Excel 互操作设置饼图标题时出错

> ID：15856471
> 
> 赞同：1
> 
> 时间：2013-04-06T21:53:54.300
> 
> 标签：c#, excel, charts, interop

我正在使用 Excel 互操作创建一个 Excel 饼图。图表正在正确创建，但是当我设置标题时，我得到一个运行时异常，指出：“这个对象没有标题。”。

这是我正在使用的代码：

```
 Excel.ChartObjects dayTypeWorksheetCharts = (Excel.ChartObjects)dayTypeWorksheet.ChartObjects(Type.Missing);

     int dayTypeDistributionChartLeft = 10;
     int dayTypeDistributionChartTop = 10;
     int dayTypeDistributionChartWidth = 700;
     int dayTypeDistributionChartHeight = 500;

     Excel.ChartObject dayTypeDistributionChart = (Excel.ChartObject)dayTypeWorksheetCharts.Add(
        dayTypeDistributionChartLeft,
        dayTypeDistributionChartTop,
        dayTypeDistributionChartWidth,
        dayTypeDistributionChartHeight);

     Excel.Chart dayTypeDistributionChartPage = dayTypeDistributionChart.Chart;
     dayTypeDistributionChartPage.ChartType = Excel.XlChartType.xlPie;

     Excel.SeriesCollection seriesCollection = (Excel.SeriesCollection) dayTypeDistributionChartPage.SeriesCollection(Type.Missing);
     Excel.Series series1 = seriesCollection.NewSeries();

     Excel.Range startingLabelCell = (Excel.Range)dayTypeWorksheet.Cells[2, DayTypeWorksheetColumnIndices.title];
     Excel.Range endingLabelCell = (Excel.Range)dayTypeWorksheet.Cells[10, DayTypeWorksheetColumnIndices.title];
     Excel.Range labelRange = (Excel.Range)dayTypeWorksheet.get_Range(startingLabelCell, endingLabelCell);

     Excel.Range startingDataCell = (Excel.Range)dayTypeWorksheet.Cells[2, DayTypeWorksheetColumnIndices.frequencyPercentage];
     Excel.Range endingDataCell = (Excel.Range)dayTypeWorksheet.Cells[10, DayTypeWorksheetColumnIndices.frequencyPercentage];
     Excel.Range dataRange = (Excel.Range)dayTypeWorksheet.get_Range(startingDataCell, endingDataCell);

     series1.XValues = labelRange;
     series1.Values = dataRange;
        dayTypeDistributionChartPage.ChartTitle.Text = "Day Type Distribution";
     series1.ApplyDataLabels(Excel.XlDataLabelsType.xlDataLabelsShowPercent, true, false, false, false, false, false, false, false, Type.Missing); 
```

当我注释掉设置图表标题的行时，错误消失了，“图表标题”是图表的标题。

谷歌搜索带我到这个[链接](http://social.msdn.microsoft.com/forums/en-US/vsto/thread/baf3e9cc-4330-4ae9-9a34-32e4865b35f7)，但答案给了我一个不同的错误，并没有解决我的问题。

有什么想法吗？

# database - 使用 SQLite 作为存储层的数据库

> ID：15856472
> 
> 赞同：1
> 
> 时间：2013-04-06T21:53:55.010
> 
> 标签：database, sqlite, nosql

哪些数据库使用 SQLite 作为存储层？

注意：我了解到 CouchBase 在早期阶段使用 SQLite 作为存储层，但我没有找到代码 - 我不确定它是否正确，因为我在一些非官方文档上阅读过它。

我只想研究这些数据库（主要是 NoSQL 数据库）的代码库——如果有的话——并围绕这个概念进行游戏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T18:53:06.970

TouchDB 使用 SQLite 作为它的后端，它被认为是一个数据库。

[http://touchdb.org/](http://touchdb.org/)

换句话说，TouchDB 在高层存储 JSON 文档，因此它是一个面向文档的数据库。但是存储的实际细节由 SQLite 处理。

就像所有评论指出的那样，任何使用 SQLite 作为后端的数据库通常都不是您想要使用的数据库。=)

# c# - 烦人的回发和分页问题

> ID：15856473
> 
> 赞同：0
> 
> 时间：2013-04-06T21:53:55.463
> 
> 标签：c#, asp.net, pagination

我问了一个类似的问题，但情况发生了变化。

我通过代码而不是在源代码上绑定我的gridview。

**分页工作正常，但是如果我单击 gridview 第二页上的按钮（分页后），回发会导致分页重置到第 1 页。谁能告诉我我做错了什么？**

在我的页面加载中，我已经设置了 !POSTBACK 方法，如图所示，即如果有回发事件，那么它不应该重置网格，但它确实如此！

继承人的加载：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (Session["usersName"] != null)
        {

            object a = Session["_id"];

            IDMaster = Convert.ToInt32(a);

            GridView1.Columns[10].Visible = true;
            GridView1.Columns[11].Visible = true;

        }

        else
        {
            GridView1.Columns[10].Visible = false;
            GridView1.Columns[11].Visible = false;
        }

        if (!IsPostBack)
        {
           BindGrid();
        } 
```

绑定网格（）；

```
 SqlConnection sqlcon = new SqlConnection(connstring);
           SqlCommand sqlcmd = new SqlCommand("select * from Coffees ORDER BY coffeeName ASC", sqlcon);
           SqlDataAdapter adp = new SqlDataAdapter(sqlcmd);
           DataSet ds = new DataSet();
           adp.Fill(ds);
           GridView1.DataSource = ds.Tables[0];
           GridView1.DataBind(); 
```

页面索引方法：

```
 protected void GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e)
    {
        GridView1.PageIndex = e.NewPageIndex;

        if(ViewState["searchTerm"] != null)
        {
            object a = ViewState["searchTerm"];
            string reloadTerm = a.ToString();

            setGrid(reloadTerm);
       } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:01:57.183

您需要在`GridView1_PageIndexChanging`事件中绑定您的gridview

```
GridView1_PageIndexChanging(object sender, GridViewPageEventArgs e) 
{ 
    GridView1.PageIndex = e.NewPageIndex;

        if(ViewState["searchTerm"] != null)
        {
            object a = ViewState["searchTerm"];
            string reloadTerm = a.ToString();

            setGrid(reloadTerm);
       }
        BindGrid();
} 
```

希望它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T06:02:42.600

由于您正在动态绑定网格视图，请删除

```
if (!IsPostBack) 
```

页面加载的条件。网格视图每次都需要绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:56:19.453

我发现了这个问题。我忘记了，在我将商品添加到购物车后，我正在调用 response.redirect 来刷新页面......显然这意味着页面被召回刷新页面，因此网格总是会重置。再次感谢。

# workflow - 在 CRM Dynamics 4.0 中，我们如何使用字符串值动态设置第二个选项列表值

> ID：15856477
> 
> 赞同：0
> 
> 时间：2013-04-06T21:54:11.237
> 
> 标签：workflow, dynamics-crm, dynamics-crm-4, workflow-activity

我在汽车详细信息实体中有两个选择列表。我正在使用自定义工作流活动的输入参数（即 CrmNumber）设置**模型（cir_model）选项**列表值，它按预期工作，第二个选项列表**Marque（cir_marque）**将使用**模型**选项进行逻辑设置-列表。

逻辑应该是如果**Model**设置为“Ac Ace”，那么**Marque**应该设置为“Ac”。使用 Split() 从字符串 'Ac Ace' 中获取值 'Ac'。

通常在 C# 中这可以轻松完成，但在 CRM 4.0 中如何实现（我如何将“Ac”设置为 Marque）

![在此处输入图像描述](https://i.stack.imgur.com/5bx65.png)

```
public static DependencyProperty modelProperty = DependencyProperty.Register("model",  
typeof(int), typeof(CreateCardetails));
[CrmInput("Model")]
public int model
{
    get
    {
        return (int)base.GetValue(modelProperty);
    }
    set
    {
        base.SetValue(modelProperty, value);
    }
}

public static DependencyProperty ContactProperty =   
DependencyProperty.Register("Contact", typeof(Lookup), typeof(CreateCardetails));

[CrmInput("Contact ID")]
[CrmReferenceTarget("contact")]
public Lookup Contact
{
    get
    {
        return (Lookup)base.GetValue(ContactProperty);
    }
    set
    {

        base.SetValue(ContactProperty, value);
    }
}

protected override ActivityExecutionStatus Execute(ActivityExecutionContext  
executionContext)
{
        //Create an car details record which will be linked to the contact record
        DynamicEntity cardetails = new DynamicEntity("cir_cardetails");

        cardetails["cir_carsdetailsid"] = Contact;

        //Setting the picklist value of Model

         Picklist modelPickList = new Picklist();
         modelPickList.Value = model.Value;
         cardetails.Properties.Add(new PicklistProperty("cir_model",modelPickList));

  /*
      Here the logic should be done for setting Marque (cir_model) value 
         Picklist marquePickList = new Picklist();
         marquePickList.Value = ???
         cardetails.Properties.Add(new PicklistProperty("cir_marque",marquePickList));
  */

       //Creating the car details record
        Guid carkey = crmService.Create(cardetails);
} 
```

我们如何在逻辑上设置**Marque**值，我将代码留空，如下所示

```
/*
      Here the logic should be done for setting Marque (cir_marque) value 
         Picklist marquePickList = new Picklist();
         marquePickList.Value = ???
         cardetails.Properties.Add(new PicklistProperty("cir_marque",marquePickList));    
*/ 
```

请安排帮助我解决这个问题，欢迎所有建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:12:10.627

CRM 4.0 没有语言，在 CRM 4.0 中您使用 c# 编写代码。唯一改变的是您使用新类型的方式。

在工作流中，您不使用控件，而是使用实体和相关属性。所以你“只”需要获取属性 cir_model，做一个子串并在 Marque 中找到可用的选项并设置正确的值。从 SDK检查[此示例。](http://msdn.microsoft.com/en-us/library/cc677091.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T14:06:21.620

您可以使用 JavaScript 或 C#（插件、工作流）来完成此操作。在选择使用哪种方法时需要考虑一些因素。

如果您希望用户能够实时看到结果（当他们选择时），那么您可以使用 JavaScript。

如果您不希望用户看到结果，或者有来自外部来源（而不是用户表单）的数据，那么请考虑使用插件。

我认为您不必使用 WF 来执行此操作，插件同样易于编写，并且会立即发生，而不是等待异步过程完成。

# javascript - 使用 Facebook JS SDK 中的发送对话框获取人员的用户 ID

> ID：15856478
> 
> 赞同：0
> 
> 时间：2013-04-06T21:54:18.770
> 
> 标签：javascript, facebook

我想为我们的用户创建选项，以使用 facebook 发送对话框在我们的网站上共享项目。用户需要选择他或她想要与之共享内容的朋友。之后，我想知道发送者和发送者的用户 ID，以便我可以在用户可以讨论产品的网站上创建一个私人部分。

我正在考虑在项目的重定向 url 中使用唯一数字作为参数来解决这个问题，并将 facebook 用户 ID 添加到数据库中。这样我就可以在发送消息的用户（和他的朋友）和他们想要私下讨论的特定项目之间建立关系。

```
FB.ui({
       method: 'send',
       name: 'People Argue Just to Win',
       link: 'http://www.nytimes.com/2011/06/15/arts/people-argue-just-to-win-scholars-assert.html',
       display: 'popup',
       },
       function(response) {
           console.log(response);
       }); 
```

响应对象仅包含一个成功布尔值，我找不到获取有关结果的更多信息的方法。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T08:34:32.277

我认为您尝试做的事情是不可能的，因为这会侵犯用户隐私。

如果用户通过您的应用程序进行身份验证，您可以访问他们的 Facebook ID，并且如果您使用请求对话框 ( [http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/) ) 而不是发送按钮，您'会得到一个响应，它会给你发送请求的人的用户 ID。

# c# - 从类项目中导入 Razor @helper

> ID：15856484
> 
> 赞同：2
> 
> 时间：2013-04-06T21:54:46.610
> 
> 标签：c#, asp.net, razor, razor-2

有没有办法将一个 dll 从一个类项目（或者可能是另一个 Web 应用程序项目）导入一个 Web 应用程序项目并重用 @helper？如果无法实现，使用 Razor 的 Web 应用程序的可重用性似乎几乎为零。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:11:50.017

你可以做到，但你必须跳过几个圈。

1.  您需要获取[RazorGenerator](http://razorgenerator.codeplex.com/)：“这是 Visual Studio 的自定义工具，允许在设计时而不是运行时处理 Razor 文件，允许将它们构建到程序集中以便更简单地重用和分发。”

2.  使用 RazorGenerator，您可以在类库项目中创建声明`helper`函数的 .cshtml 文件。例如，在一个名为 Foo.cshtml 的文件中：

    ```
    @helper MyHelper(string parameter) {<text>@parameter</text>} 
    ```

3.  这些助手将作为静态方法存在于代表您的 .cshtml 文件的静态类中。在上面的示例中，这将转换为`Foo.MyHelper`.

4.  您可以从 Web 应用程序的 .cshtml 文件中调用这些静态方法，就像任何其他静态方法一样。（假设您添加了正确的`using`指令以指向包含您的助手的命名空间。）例如：

    ```
    <div>@Foo.MyHelper("hello world")</div> 
    ```

# c# - 如何获取验证摘要文本以放入自定义警报 ASP.NET

> ID：15856488
> 
> 赞同：0
> 
> 时间：2013-04-06T21:55:06.340
> 
> 标签：c#, jquery, asp.net, twitter-bootstrap

对于最近的一个学校项目，我需要制作一个 ASP 网站。在登录表单上，我有一些验证器和一个验证摘要。

摘要本身有效，但我想从中获取文本，因此我可以将其放入我自己的自定义“弹出窗口”中。弹出窗口只是一个 twitter-bootstrap 模型，我对其进行了一些调整，这样我就可以轻松地从任何代码隐藏文件中输入标题和一些文本。

有谁能够帮助我？后面的任何 c# 代码或 jquery 解决方案对我来说都很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T01:03:20.920

尝试此答案中的解决方案： [ASP.NET 客户端页面验证失败后，我可以运行一些自定义脚本吗？](https://stackoverflow.com/questions/7692289/can-i-run-some-custom-script-after-asp-net-client-side-page-validation-fails)

基本上，您调用 Page_ClientValidate("") 函数并编写自定义 JavaScript 来显示警报

# php - 获取php数组中嵌套键名的值

> ID：15856492
> 
> 赞同：0
> 
> 时间：2013-04-06T21:55:46.463
> 
> 标签：php, arrays, key

我一直在用 PHP 解析一些远程 JSON。我已经能够下载 JSON 并将其分配给一个变量，并且我已经将数组功能与 json_decode 一起使用：

```
$data = json_decode($remotejson, true); 
```

然后我打印了完整的数组以验证数组的内容：

```
echo print_r($data); 
```

数组打印回来，我可以看到键和值：

```
[files] => Array
    (
        [/photogalleryupload.thumbs/1934307_000001.jpg] => Array
            (
                [source] => derivative
                [format] => Thumbnail
                [original] => moviefile_1934307.mp4
            ) 
```

**我正在尝试获取第一个嵌套键名称的值，即“/photogalleryupload.thumbs/1934307_000001.jpg”并将其分配给一个变量。**

例如，我想要以下代码：

```
echo $data['files'][0]; 
```

要返回这个：

```
/photogalleryupload.thumbs/1934307_000001.jpg 
```

这不起作用。

我遇到的困难是我试图返回的这个值是一个二级键名，我一直无法找到一种将它分配给变量的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:03:15.603

```
$keys = array_keys($data['files'])
$key = $keys[0] 
```

# asp.net - asp.net webforms：BaseClass 继承/ContentPage 控件不可访问

> ID：15856494
> 
> 赞同：2
> 
> 时间：2013-04-06T21:56:03.770
> 
> 标签：asp.net, inheritance, webforms, base-class

我正在开发一个多语言应用程序。为此，我创建了自定义 BasePage 类，其中包含重写的 InitializeCulture 方法。

BasePage 类继承 System.Web.UI.Page 类，所有 Content Page 类都继承自 BasePage。一切正常，但存在一个问题：

当从 BasePage（而不是 System.Web.UI.Page）继承时，ContentPages 无法访问它自己的控件。

当我尝试引用内容页面代码中的任何控件时 - 总是会抛出 Nullreference 异常。

任何有关处理此问题的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T10:53:18.987

我刚刚发现删除对 Button Master Page 的 Button Controls 的引用 - 解决了我的问题！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-07T07:06:47.517

这是一个 BasePage 类代码：

命名空间 MultiLingualApp {

```
public class BasePage : System.Web.UI.Page
{

    protected override void InitializeCulture()
    {
        string selectedLanguage = "en-GB";
        HttpCookie langCookie = Request.Cookies["langCookie"];
        if (langCookie == null)
        {
            Button btnEnglish = (Button)this.Master.FindControl("btnEnglish");
            btnEnglish.Enabled = false;
        }
        else
        {
            if (!string.IsNullOrEmpty(langCookie.Values["lang"]))
            {

                string cookie = langCookie.Values["lang"].ToString();
                if (cookie.Equals("en-GB"))
                {
                    selectedLanguage = "en-GB";
                    Button btnEnglish = (Button)this.Master.FindControl("btnEnglish");
                    btnEnglish.Enabled = false;

                }
                else if (cookie.Equals("th-TH"))
                {
                    selectedLanguage = "th-TH";
                    Button btnThai = (Button)this.Master.FindControl("btnThai");
                    btnThai.Enabled = false;
               }
            }
        }

        if (selectedLanguage != null)
        {
            UICulture = selectedLanguage;
            Culture = selectedLanguage;
            Thread.CurrentThread.CurrentCulture =
            CultureInfo.CreateSpecificCulture(selectedLanguage);
            Thread.CurrentThread.CurrentUICulture = new
            CultureInfo(selectedLanguage);
        }

        base.InitializeCulture();
    }

} 
```

}

# c# - PrintWindow 返回空数据，在 C++ 中工作

> ID：15856496
> 
> 赞同：2
> 
> 时间：2013-04-06T21:56:13.353
> 
> 标签：c#, screen-capture, printscreen

我已经成功地`PrintWindow`开始使用 C++ 工作，但是当我尝试在 C# 中进行工作时，我得到了一个包含空数据的位图。在 .NET 4.0 上使用 VS 2012 Pro。这是我的代码：

```
 [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool GetWindowRect(IntPtr hWnd, out RECT lpRect);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    public static extern bool PrintWindow(IntPtr hWnd, IntPtr hdcBlt, int nFlags);

    [DllImport("user32.dll")]
    public static extern ushort getLastError();

    static int count = 0;
    public Bitmap getWindow(IntPtr windowHandle)
    {
        RECT rect;
        Window.GetWindowRect(windowHandle, out rect);

        Console.WriteLine(rect.X);
        Console.WriteLine(rect.Y);
        Console.WriteLine(rect.Width);
        Console.WriteLine(rect.Height);
        Console.WriteLine();

        Bitmap bmp = new Bitmap(rect.Width, rect.Height);
        Graphics gfxBmp = Graphics.FromImage(bmp);
        IntPtr hdcBitmap = gfxBmp.GetHdc();

        bool success = PrintWindow(windowHandle, hdcBitmap, 0);
        if (!success)
        {
            Console.WriteLine("Error copying image");
            Console.WriteLine(getLastError());
        }

        bmp.Save("image_" + count++ + ".bmp");

        gfxBmp.ReleaseHdc(hdcBitmap);
        gfxBmp.Dispose();

        return bmp;

    } 
```

这是输出：

```
182
182
664
533 
```

没有打印错误消息，并且看起来句柄是有效的，因为 RECT 边界是正确的。[按照这个例子](http://weseetips.com/2008/07/14/how-to-capture-the-screenshot-of-window/)，我用计算器程序在 C++ 中工作，但是计算器的相同代码在 C# 中不起作用。

我需要它在 C# 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:09:16.587

根据要求:-) 尝试在 PrintWinow() 调用之后直接放置 ReleaseHdc。

[看这里。](https://stackoverflow.com/a/6410253/1974021)

我不得不猜测原因，但它可能类似于“只要 HDC 被非托管代码锁定，托管代码就无法访问它。因此必须释放 HDC 才能在 C# 中查看位图”

# file-upload - 绑定复杂 ViewModel 的命名约定是什么？

> ID：15856499
> 
> 赞同：0
> 
> 时间：2013-04-06T21:56:24.000
> 
> 标签：file-upload, asp.net-mvc-4, binding

我有这两个***`ViewModels`***

```
public class AboutViewModel : ViewModel
{
    public override long Id { get; set; }        
    public override string PageTitle { get; set; }        
    public override string TitleDescription { get; set; }        
    public override string ContentTitle { get; set; }
    public virtual AboutItemViewModel AboutItem { get; set; }
}

public class AboutItemViewModel
{
    public long Id { get; set; }

    [AllowHtml]        
    public string Content { get; set; }
    public string ImageUrl { get; set; }
    public HttpPostedFileBase FileToUpload { get; set; }
} 
```

***`Here is my controller:`***

```
 [ValidateInput(false)]
    [ValidateAntiForgeryToken, HttpPost]
    public ActionResult Create(long? siteid, long? cid, AboutViewModel model)
    {
        return View(model);
    } 
```

这是我的观点：

```
@using (Html.BeginForm("Create", "About", new { siteid = ViewData["siteid"], cid = ViewData["cid"] },FormMethod.Post,new { enctype = "multipart/form-data", @class = "form-horizontal rtl", autocomplete = "off" }))
{
     <div class="controls">
       <input type="file" name="FileToUpload" id="FileToUpload" style="margin-right: -9px;">
     </div>
     <div class="controls">
        @Html.ValidationMessageFor(o => o.AboutItem.FileToUpload, "", new { id = "spanfile", @class = "alert alert-block alert-error span3 pull-right", style = "margin-right: 160px;" })
     </div>   
     <div class="control-group pull-left">
        <button type="submit" class="btn btn-large" data-toggle="button">Save</button>
    </div> 
} 
```

如何绑定文件以**`FileToUpload`**停止返回空值？

*`Except:`* 如果我把它放在 main 中***`AboutViewModel`***，它会返回一个正确的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T02:32:02.217

由于 FileToUpload 属性位于 AboutItem 属性中，它是父 ViewModel 的类属性，因此您需要在输入元素的名称前面加上它来自的属性。说您的文件输入的名称应该是 AboutItem.FileToUpload 是很长的一段话。

```
<input type="file" name="AboutItem.FileToUpload" id="AboutItem_FileToUpload" /> 
```

这应该为您处理模型绑定。此外，您可以通过在 AboutItem 类的其他属性上使用 HTML 帮助器来对此进行测试。例如：

```
@Html.TextBoxFor(x=>x.AboutItem.Id) 
```

这应该在 HTML 中呈现

```
<input type="text" name="AboutItem.Id" id="AboutItem_Id /> 
```

**编辑**

显然 id 属性将使用下划线而不是点呈现。但是，由于模型绑定中不使用 ID 属性，因此它应该无关紧要。

# javascript - Angularjs 控制器 - 非平凡的初始状态

> ID：15856501
> 
> 赞同：2
> 
> 时间：2013-04-06T21:56:37.860
> 
> 标签：javascript, angularjs

我刚刚开始，`angular.js`今天我正在编写我的控制器：

```
myApp.controller('RepetitionController', ['$scope', '$location', 'repetitionService',
    function ($scope, $location, repetitionService) {

        $scope.questions = repetitionService.getQuestions();
        $scope.questionsLeft = $scope.questions.length;
        $scope.questionsAnswered = 0;
        $scope.percentageLeft = ($scope.questionsLeft == 0 ? 100 : 0);
        $scope.repetitonState = ??? 
        $scope.endRepetition = function () {
            repetitionService.clearSelectedSets();
            $location.path("/setsAndCollections");
        }

        $scope.submitAnswer = function () {
            alert("alert");
        }
    }]); 
```

我开始怀疑。

你可以看到我使用三元运算符来创建初始状态`$scope`，现在在我的`repetitionState`领域中我想要这样的东西`(questionsLeft === 0 ? 'finished' : questions[0].type)`。

有什么方法可以定义一个在填充`$scope`对象后调用的函数，某种后构造函数？

或者也许有一种方法可以“观察”函数，所以我可以写

```
$scope.repetitionState = function(){
    ///logic here
}; 
```

我只是担心在某些情况下我需要编写`logicalExpression ? anonymousFunction () : someOtherAnonymousFunction()`，对我来说，嵌套所有这些匿名函数（目前）有点难以阅读，我想知道其中的某些部分`angular`是否有用在这种情况下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:25:59.953

您当然可以观看功能。`$watch`watchExpression 参数接受字符串或函数。如果您使用的是函数，则当前作用域将作为第一个参数传递给该函数。

要记住的重要一点是 watchExpression 函数应该是幂等的，因此请确保您只更新侦听器函数中的范围。

```
$scope.repititionState = getRepititionState($scope);

$scope.$watch(getRepititionState, function(newVal, oldVal, scope) {
    scope.renditionState = newVal;
});

function getRepititionState(scope) {
    var repititionState;
    // your logic here, just remember to set and return repititionState
    return repititionState;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:01:40.350

无论您想在哪里引用，`repititionState`为什么不将其作为函数引用？

例如：让我们假设您将使用`repititionState`以下课程为您提供课程

```
<div ng-class="repititionState"></div>

$scope.repititionState = ($scope.questionsLeft === 0 ? 'finished' : $scope.questions[0].type) 
```

这样，每当您的问题完成时， div 就会获得一个`finished`. 为了使它`repititionState`依赖于另一个变量（就像你想要的那样），它就像使它成为一个函数一样简单。

```
<div ng-class="repititionState()"></div> 
```

`()`注意现在将 标记`repititionState`为函数的额外内容。

```
$scope.repititionState = function(){
    return ($scope.questionsLeft === 0 ? 'finished' : $scope.questions[0].type);
} 
```

如果你在 an`ng-repeat`那么你甚至可以通过`$index`使这个函数更通用。

```
$scope.repititionState = function($index){
return ($scope.questionsLeft === 0 ? 'finished' : $scope.questions[$index].type);
} 
```

这通常在其他框架中称为计算属性。在 Angular 中，它只是一个函数。希望这可以帮助。

# javascript - javascript子函数传递返回给父函数返回

> ID：15856505
> 
> 赞同：0
> 
> 时间：2013-04-06T21:56:54.993
> 
> 标签：javascript, jquery, ajax, function, callback

我想将“子”（我不知道正确的术语）函数的返回值传递给父函数中的返回值......正确的方法是如何做到这一点？check_data() 没有返回 true 或 false

```
function check_data(type,field){
    var chkvalue = $(field).val();
    $.post("mods/ajax.fieldchk.php", {
        chkvalue: chkvalue,
        type: type
    },
    function(result){
        if(result==0){
            $(field).css({'background-color': '#faa', 'border': '1px solid #f00'});
            return false;
        }else if(result==1){
            $(field).css({'background-color': '#afa', 'border': '1px solid #0f0'});
            return true;
        }
    };
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T21:59:40.730

由于`$.post`它是一个异步函数，因此您不能使用它来返回 check_data 上的数据。但是，您可以传递一些回调并使用`true/false`参数执行。

像这样的东西：

```
function check_data(type,field,callback){
    var chkvalue = $(field).val();
    $.post("mods/ajax.fieldchk.php", {
        chkvalue: chkvalue,
        type: type
    },
    function(result){
        if(result==0){
            $(field).css({'background-color': '#faa', 'border': '1px solid #f00'});
            callback(true);
        }else if(result==1){
            $(field).css({'background-color': '#afa', 'border': '1px solid #0f0'});
            callback(false);
        }
    };
} 
```

# ruby-on-rails - 活动记录关联

> ID：15856508
> 
> 赞同：0
> 
> 时间：2013-04-06T21:57:12.077
> 
> 标签：ruby-on-rails, ruby, activerecord

```
class Depot < ActiveRecord::Base
  attr_accessible :code, :designation
  has_many :articles
end

class Famille < ActiveRecord::Base
  attr_accessible :code, :designation
  has_many :articles
end

class Article < ActiveRecord::Base
  belongs_to :depot
  belongs_to :famille
  attr_accessible :code, :designation
end 
```

当我尝试使用 depot 和 famille 字段创建新文章时出现此错误，我该如何解决？

```
ActiveModel::MassAssignmentSecurity::Error in ArticlesController#create
Can't mass-assign protected attributes: depot, famille 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:02:20.177

添加到您的文章类：

```
attr_accessible :code, :designation, :depot_id, :famille_id 
```

# node.js - 使用nodejs动态合并和缩小js文件

> ID：15856516
> 
> 赞同：0
> 
> 时间：2013-04-06T21:58:30.323
> 
> 标签：node.js, heroku, express, minify

我是 nodejs 和 grunt 的新手。

我正在使用 less-middleware，它自动创建 css 文件的方式给我留下了深刻的印象。我现在也希望 js 文件也一样。让我简单解释一下——

1.  用户向 site.min.js 发出请求
2.  路由会自动捕获特定请求。
3.  如果文件不存在，Nodejs 根据输入参数创建一个新的组合和缩小的 js 文件。
4.  返回组合文件。

我觉得 grunt 不是正确的方法，因为每次更新 js 文件时，我都必须将新版本的 min 文件提交到 repo。我想要一些创建缩小版本的动态机制。

也不是我试图在heroku上部署我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T07:14:01.297

Grunt 会在构建过程中编译你的 js 文件。我不知道 javascript 的运行时 pull-and-minify。

# mysql - 在没有 mysqld（服务器）的情况下安装 mysql（shell）

> ID：15856519
> 
> 赞同：-3
> 
> 时间：2013-04-06T21:58:38.823
> 
> 标签：mysql, linux, ubuntu, apt-get

我只需要安装`mysql`命令行 shell 实用程序，不想安装整个服务器软件（mysqld）。这主要是为了空间限制，而且我也不想在我的前端机器上放置不属于那里的东西。

谁能给我指出正确的软件包来安装 apt-get 吗？还是我应该找到压缩包并自己编译？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:05:50.950

干得好：

```
apt-get install mysql-client 
```

# waf - 如何在“-I includeir”之后添加“-include global.h”？

> ID：15856520
> 
> 赞同：1
> 
> 时间：2013-04-06T21:58:48.647
> 
> 标签：waf

我正在尝试使用 -include 预处理器选项。[GCC 预处理器选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html) 我未能在我的配置方法中作为常规 CXXFLAGS 选项执行此操作

```
def configure(conf):
    conf.load('compiler_cxx')
    conf.env.append_value('CXXFLAGS', ['-g', '-include global.h']) 
```

由于它在`-I`选项之前添加它。而且 gcc 找不到我的标题。我如何添加`-include global.h`所有`-I`选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:36:14.837

好吧，我认为您可以查看 waf book § 10.3.2。您可以将特定方法附加到 cxx 功能，以便在包含路径之后添加“-include”选项。

另一种方法是对 cxx 类进行猴子补丁并修改管理编译的 run_str 字符串。

第三个选项：在 waf mailing list 上提问，你通常很快就会得到答复^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T15:27:18.750

解决方案是：

```
def build(bld):
    bld.env.MYFLAGS = ['-include', 'global.h']
    from waflib import Task
    class cxx(Task.classes['cxx']):
        run_str = '${CXX} ${ARCH_ST:ARCH} ${CXXFLAGS}${FRAMEWORKPATH_ST:FRAMEWORKPATH} ${FRAMEWORK_ST:FRAMEWORK}${CPPPATH_ST:INCPATHS} ${MYFLAGS} ${DEFINES_ST:DEFINES}${CXX_SRC_F}${SRC} ${CXX_TGT_F}${TGT}' 
```

# jquery - fancybox 没有用于视频库的导航按钮

> ID：15856521
> 
> 赞同：2
> 
> 时间：2013-04-06T21:58:49.613
> 
> 标签：jquery, fancybox, fancybox-2, next

我在一些 youtube 视频中使用了 fancybox，我希望有导航按钮（覆盖层旁边的下一个和上一个按钮），就像在[这个](http://jsfiddle.net/fhpZ5/)小提琴中一样。

这是我的幻想箱：

```
$('.fancybox-media')
    .attr('rel', 'playlist')
    .fancybox({
        openEffect: 'none',
        closeEffect: 'none',
        prevEffect: 'none',
        nextEffect: 'none',
        arrows: false,

        helpers: {
            media: {}
        },
        overlay : {
            css: { 'overflow-y': 'hidden' }
        },
        youtube : {
            autoplay: 1,
            hd: 1,
            wmode: 'opaque',    // shows X to close
            vq: 'hd720'         // default 720p hd quality
        },
        beforeShow : function(){
            $("body").css("overflow", "hidden"); // hide body scrollbar
        },
        afterClose: function(){
            $("body").css("overflow", "scroll"); // show body scrollbar
        }
    }); 
```

关于 JFK 的[这篇](https://stackoverflow.com/questions/9172832/next-and-previous-button-not-visible-in-fancybox-jquery)文章，我将这些样式放在我的 css 文件中：

```
.fancybox-lock {
    margin: 0 !important;
}

.fancybox-nav {
    width: 60px;       
}

.fancybox-nav span {
    visibility: visible;
}

.fancybox-next {
    right: -60px;
}

.fancybox-prev {
    left: -60px;
} 
```

和我的html：

```
<li class="closed">Headline
    <ul>
        <li class="fl"><a class="fancybox-media" href="http://www.youtube.com/watch?v=Dtb5Srdx7iY" rel="playlist"><img class="thumbnail" src="x.jpg"></a></li>
        <li class="fl"><a class="fancybox-media" href="http://www.youtube.com/watch?v=Dtb5Srdx7iY" rel="playlist"><img class="thumbnail" src="x.jpg"></a></li>
    </ul>
</li> 
```

和实现的样式表：

```
 <!-- FancyBox -->
<script type="text/javascript" src="fancybox/jquery.fancybox.js?v=2.1.4"></script>
<script type="text/javascript" src="fancybox/helpers/jquery.fancybox-media.js?v=1.0.5"></script>
<link rel="stylesheet" type="text/css" href="fancybox/jquery.fancybox.css?v=2.1.4" media="screen" /> 
```

我只是无法让它工作，我不知道为什么。我觉得我丢失了一些文件左右。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:28:32.430

好吧， JFK（我）的[这篇文章](https://stackoverflow.com/questions/9172832/next-and-previous-button-not-visible-in-fancybox-jquery)已经有一年多了，所以接受的答案可能会被最新版本的 fancybox 否决，所以你现在应该忘记它。

您需要的唯一 css 与您在帖子开头提到的[小提琴](http://jsfiddle.net/fhpZ5/)中的相同：

```
.fancybox-nav {
    width: 60px;       
}

.fancybox-nav span {
    visibility: visible;
}

.fancybox-next {
    right: -60px;
}

.fancybox-prev {
    left: -60px;
} 
```

...然后，您的 jQuery 代码不需要这些行，因此您可以删除它们

```
overlay : {
    css: { 'overflow-y': 'hidden' }
}
beforeShow : function(){
    $("body").css("overflow", "hidden"); // hide body scrollbar
},
afterClose: function(){
    $("body").css("overflow", "scroll"); // show body scrollbar
} 
```

...因为这已经由 fancybox v2.1.4 处理

最后，既然你说`I would like to have navigation buttons (next and previous buttons beside the overlay)`，那么在你的代码中有这个选项是没有意义的，

```
arrows: false 
```

...可以？所以也删除它。见工作**[JSFIDDLE](http://jsfiddle.net/xheWQ/)**

# regex - 使用正则表达式查找方法名称

> ID：15856530
> 
> 赞同：0
> 
> 时间：2013-04-06T21:59:42.277
> 
> 标签：regex

给定由 .NET 程序生成的堆栈跟踪，我将如何提取堆栈跟踪中出现的所有方法名称。

例如：

未处理的异常：System.NotImplementedException：方法或操作未实现。在 WindowsApplication1.Program.Baz() 在 WindowsApplication1.Program.Foo() 在 WindowsApplication1.Program.Bar() 在 WindowsApplication1.Program.Main()

输出应该是：

WindowsApplication1.Program.Baz WindowsApplication1.Program.Foo WindowsApplication1.Program.Bar WindowsApplication1.Program.Main

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T00:15:32.907

```
[\w.]+(?=\(\)) 
```

使用这个正则表达式应该可以完美地做你想做的事

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:13:33.437

以下将匹配任何后跟的非空格字符序列`()`

```
\S+(?=\(\)) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-06T22:01:20.377

使用这个正则表达式：`(?<name>[\w|\.|=|`]+)(?=\()`

对于每个堆栈帧，它将匹配出现在每行第一个括号之前的所有字符

# ruby - 如何打印区分大小写的数组

> ID：15856535
> 
> 赞同：0
> 
> 时间：2013-04-06T22:00:25.360
> 
> 标签：ruby

我有一个数组，其中包含混合了不同情况的字符串，如下所示：

```
WEBSITES = ["The Atlantic", "BBC", "CNN", "The Economist" ] 
```

当我遍历这个数组（特别是我的 Rails 表单中的选择助手）时，我得到

```
"The atlantic", "Bbc", "Cnn", "The economist" 
```

如何以与数组中相同的格式打印它？

**编辑：**

这是我的文件（Rails）。

数组在我的模型中

```
class Survey < ActiveRecord::Base
  WEBSITES = ["The Atlantic", "BBC", "CNN", "The Economist"]
end 
```

表格在这里

```
<%= form_for @survey do |f| %>
  <% Survey::WEBSITES.each_with_index do |site, index| %>
    <%= f.label site %>
    <%= f.select "answer_field_#{ index +1 }".to_sym %>
  <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:04:58.220

试试这个：

```
<%= f.label site, "#{site}" %> 
```

# php - 显示mysql表中的所有数据

> ID：15856540
> 
> 赞同：0
> 
> 时间：2013-04-06T22:00:53.480
> 
> 标签：php, mysql, database, post

我希望用户通过 textarea 将评论发布到数据库中，然后数据库应该将信息放回网站。但这不起作用！

索引.php：

```
<textarea rows="2" cols="71" wrap="physical" placeholder = "Post Something!" name="rant_box"></textarea>
        <input type="submit" value="Post" name="post_btn"/>

<?php
        $getquery = mysql_query("SELECT data FROM status ORDER BY id DESC");

        while($rows = mysql_fetch_array($getquery)){
            $id = $rows['id'];

            $status = $rows['status'];

            echo $status . '<br />' . '<br />';
        }

    ?> 
```

数据已正确输入数据库。但是调用它并将其发布回 index.php 页面是行不通的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:08:03.043

您的查询正在选择一个名为“数据”的列，但您正试图在结果集中检查一个名为“状态”的列。如果该列确实被称为“数据”，那么这一行

```
 $status = $rows['status']; 
```

根据您的选择查询，应该是

```
 $status = $rows['data']; 
```

但是如果该列实际上称为“状态”，那么您需要在 SQL 语句中将“数据”替换为“状态”。

您还尝试访问`$rows['id']`不在您的选择列表中的内容。但是由于您没有在代码中使用该值，这是必需的吗？如果需要，您还需要更新您的选择列表以包含此列，即

```
 SELECT data FROM status ORDER BY id DESC 
```

应该

```
 SELECT id, data FROM status ORDER BY id DESC 
```

注意正如其他人所建议的那样，您不应该使用已弃用的 mysql_ 函数。请参阅[选择 API](http://www.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:12:08.720

首先你必须连接到数据库，其次你应该说你将在 SQL 语句中使用什么：`SELECT id,status FROM status OREDER BY ID DESC` 试试这个：

```
 try
{
    $bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '');
}
catch(Exception $e)
{
        die('Erreur : '.$e->getMessage());
}
 id,statu
$reponse = $bdd->query('SELECT id,status FROM status ORDER BY ID DESC ');

while ($donnees = $reponse->fetch())
{
   echo $donnees['status'];
}

$reponse->closeCursor();

?> 
```

# php - 复选框一直只说“开”

> ID：15856542
> 
> 赞同：0
> 
> 时间：2013-04-06T22:01:12.000
> 
> 标签：php

这就是我有 2 个复选框的方式，我不希望您只能同时单击它们。一次只能点击一个！在现在到我点击新闻的时候，所以它必须在里面输入一个数字才能写上“on”。我想稍后确定它已输入数据库。

问题是无论如何它似乎都在说“开”！？

```
<form action="#" method="post">
                    <table>
                        <tr>
                            <td>Emne</td>
                            <td>Vigtigt: <input type="checkbox" name="vigtigt" class="new"> Nyhede: <input type="checkbox" name="nyhede" class="new"></td>
                        </tr>
                        <tr>
                            <td>Title</td>
                            <td><input type="text" name="title" maxlength="50" class="new"></td>
                        </tr>
                        <tr>
                            <td>Tekst</td>
                            <td><textarea name="tekst" cols="20" rows="15" class="new"></textarea></td>
                        </tr>
                        <tr>
                            <td><input type="submit" name="opret" value="Opret Blog" class="new"></td>
                            <td></td>
                        </tr>
                    </table>
                    <?php
                    if(isset($_POST["opret"]))
                    {
                        if($_POST["vigtigt"] != "")
                        {
                            echo $_POST["vigtigt"];
                            echo "<br />";
                            echo $_POST["nyhede"];
                        }
                        elseif ($_POST["nyhede"] != "")
                        {
                            echo $_POST["vigtigt"];
                            echo "<br />";
                            echo $_POST["nyhede"];
                        }
                        else
                        {
                            echo "Fejl!";   
                        }
                    }
                    ?>
                </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:03:45.047

您必须为其定义一个`value`属性以：

```
 <input type="checkbox" name="vigtigt" class="new" value="MyValueHere"> 
```

这样，您将在检查时收到它的值。

**编辑：**

要一次只选择一个，您必须使用`type="radio"`并赋予它们相同的名称和不同的值。

```
<input type="radio" name="vigtigt" class="new" value="MyValueHere">
<input type="radio" name="vigtigt" class="new" value="MyOtherValueHere"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:04:59.727

复选框的目的是提供一组选项，可以从中选择任何数字。

如果要选择单个选项，请使用单选按钮（或选择元素）。

value 属性（选中的单选/选定选项的）确定将提交的值。`on`是复选框的默认值，如果您忘记指定特定值，则使用该值。

```
<label><input type="checkbox" name="foo" value="vigtigt" class="new"> Vigtigt</label>
<label><input type="checkbox" name="foo" value="nyhede" class="new">  Nyhede</label> 
```

# django - Django 管理员是否有积极维护的移动 UI？

> ID：15856545
> 
> 赞同：10
> 
> 时间：2013-04-06T22:01:18.283
> 
> 标签：django, django-admin, mobile-website

我使用[Django Grappelli](http://grappelliproject.com/)作为 Django 管理界面的皮肤。但是，该设计没有响应。移动设备上的用户需要进行大量的缩放和平移。到目前为止，我[发现](http://code.google.com/p/django-jqmobile/)的移动管理项目似乎在早期阶段就被[放弃了。](https://github.com/jezdez/django-mobileadmin)有人知道积极维护的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-12T16:27:27.203

试试这个： [https ://github.com/douglasmiranda/django-admin-bootstrap](https://github.com/douglasmiranda/django-admin-bootstrap)

它使用 Bootstrap 并获得 BSD 许可 ![django-admin-bootstrap](https://raw.github.com/douglasmiranda/django-admin-bootstrap/master/static/screenshot-github.jpg)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-11-29T10:43:29.340

[从 1.9 版开始，Django 使用了一个名为django-flat-theme](https://github.com/elky/django-flat-theme/ "github.com 上的 django-flat-theme")的以前的第三方应用程序。同一开发人员还制作了另一个应用程序，增加了对管理员的响应能力。这个应用程序被称为[django-flat-responsive](https://github.com/elky/django-flat-responsive "github.com 上的 django-flat-responsive")。

这意味着，如果您使用的是 Django 1.9+，只需添加*django-flat-responsive*。如果你运行的是旧版本的 Django，你需要*django-flat-theme* **和** *django-flat-responsive*。

正如用户[mirek 所](https://stackoverflow.com/users/2520298/mirek)指出的，所有这些都已集成到 Django 2+ 中。

这是它的样子：

> [![https://pbs.twimg.com/media/CwuLWBlUUAAKqb3.jpg](https://i.stack.imgur.com/E2XSU.png)](https://i.stack.imgur.com/E2XSU.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-01T16:51:06.520

与上面的另一个相比，https://code.google.com/p/django-jqmobile/ 和 https://code.google.com/p/django-mobileadmin/ 似乎[也](https://code.google.com/p/django-jqmobile/)很[有趣](https://code.google.com/p/django-mobileadmin/)

使用 jquerymobile 非常轻巧，并且在管理 django 管理员时受益于 html5 控件，这些控件看起来像本机应用程序。

不过，当涉及到其他自定义 django 应用程序时，可能需要进行一些调整才能正常使用该应用程序的所有功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-05T07:38:40.400

Django Jet 是另一个响应式管理界面[http://jet.geex-arts.com/](http://jet.geex-arts.com/)

[https://github.com/](https://github.com/) 750+ 颗星

# buddypress - 更改 jcrop 选择的形状

> ID：15856547
> 
> 赞同：0
> 
> 时间：2013-04-06T22:01:46.400
> 
> 标签：buddypress, jcrop

我正在 BuddyPress 内部使用 jcrop，我想知道如何设置不同的选择形状，从正方形到圆形或六边形，并具有设定的纵横比，以满足个人资料图片的形状。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T06:52:07.707

无法裁剪圆圈或六边形 - 这是裁剪器的限制。BuddyPress Avatar Cropper 使用 WordPress wp_get_image_editor()。因此，目前无法更改此设置，并且 WordPress 无法裁剪除正方形或矩形之外的任何内容。

所有对应的代码都在`/buddypress/bp-core/bp-core-avatars.php`. BuddyPress 1.7 参见第 550 行。

# html - 悬停时的图像说明

> ID：15856556
> 
> 赞同：3
> 
> 时间：2013-04-06T22:02:52.550
> 
> 标签：html, css, captions

我正在尝试为我的网站实现一项功能，将鼠标悬停在图像上会在图像底部显示其标题。关于如何做到这一点的任何提示？我试图这样做，但我正在使用的 css 模板中的某些东西正在干扰。

这是我要为其添加标题的图像

```
<section class="5grid is-gallery">
    <div class="row">
        <div class="4u"> <a href="matthewpiatetsky.com/MicroChess.html" class="image image-full"><img src="images/1a.jpg" alt=""></a>

        </div>
        <div class="4u"> <a href="matthewpiatetsky.com/ClusteringDistance.html" class="image image-full"><img src="images/2a.jpg" alt=""></a>

        </div>
        <div class="4u"> <a href="matthewpiatetsky.com/FourInARow.html" class="image image-full"><img src="images/3a.jpg" alt=""></a>

        </div>
    </div>
    <div class="row">
        <div class="4u"> <a href="matthewpiatetsky.com/Fidelity.html" class="image image-full"><img src="images/4a.jpg" alt=""></a>

        </div>
        <div class="4u"> <a href="matthewpiatetsky.com/Concordance.html" class="image image-full"><img src="images/5a.jpg" alt=""></a>

        </div>
        <div class="4u"> <a href="matthewpiatetsky.com/PhotoShare.html" class="image image-full"><img src="images/6a.png" alt=""></a>

        </div>
    </div>
</section> 
```

注意：我尝试使用这些，但不确定我做错了什么。 [http://tympanus.net/codrops/2011/11/02/original-hover-effects-with-css3/](http://tympanus.net/codrops/2011/11/02/original-hover-effects-with-css3/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-06T22:22:18.110

实现这一点的代码是这样的：

```
a {
  position: relative
}

a span {
  display: none;
  position: absolute;
  bottom: 0;
  width: 100%;
  padding: 10px;
  background: rgba(255,255,255,.8);
}

a:hover span {
  display: block
}
```

```
<a>
  <img src="http://placehold.it/300x200">
  <span>caption</span>
</a>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:27:53.910

如果可以接受 JavaScript+jQuery，请尝试使用 jQuery TipTip 插件：[http ://code.drewwilson.com/entry/tiptip-jquery-plugin](http://code.drewwilson.com/entry/tiptip-jquery-plugin)

> TipTip 使用 title 属性，就像本机浏览器工具提示一样。但是，当使用 TipTip 时，标题将被复制然后从元素中删除，这样浏览器工具提示将不会显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T22:47:27.217

你也可以使用 CSS `attr()`。

```
a {
  position: relative;
}

a:hover:after {
  content: attr(title);
  position: absolute;
  top: 100%;
  left: 0;
  white-space: nowrap;
  z-index: 999;
  background: #ccc;
  color: black;
  padding: 5px;
} 
```

也可以使用另一个属性，例如`alt`.

# objective-c - MKMapView userLocation 在应用程序首次启动时返回坐标 0.0;0.0

> ID：15856563
> 
> 赞同：2
> 
> 时间：2013-04-06T22:03:33.170
> 
> 标签：objective-c, cocoa-touch, ios5, mkmapview, core-location

我目前正在开发一个使用 MKMapView 控件的应用程序。假设通过蓝点显示用户的位置（如地图应用程序），但是当应用程序首次安装在设备上然后启动时，您会提示要求用户授权，但一旦接受，用户的地图上不显示位置，返回的坐标为 0.0 ；0.0。

然后，我关闭应用程序，将其从多任务处理中删除并重新启动，位置显示正确并返回正确的坐标。

我还使用 CoreLocation 来计算两点之间的距离并获取航向，并为提示设置了一条自定义消息，即显示应用程序的两次全新安装中的一个（我想知道为什么)，我并不真正关心最后一个问题，但了解这个细节可能会有所帮助。

我应该怎么做才能在应用程序首次启动时显示蓝色？

真挚地，

最大限度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T13:47:48.227

是的，iPhone 有时会发生这种情况（不在模拟器中），我也遇到了同样的问题，如果您尝试将地图缩放到给定位置，它会使应用程序崩溃。您可能希望使用以下代码来避免这种情况。这将丢弃无效的 GPS 更新，最终您将开始获取有效数据

```
if (mapView.userLocation.coordinate.latitude <= -180.0f
    || mapView.userLocation.coordinate.latitude >= 180.0f
    || mapView.userLocation.coordinate.longitude <= -180.0f
    || mapView.userLocation.coordinate.longitude >= 180.0f
    || (mapView.userLocation.coordinate.latitude == 0.0f 
    && mapView.userLocation.coordinate.longitude == 0.0f) ) {

    return; // or something else you may like to do
} 

// rest of the code 
```

# jquery - IE 8 第 209 行上的 bootstrap.js 错误 usinf twitter bootstrap

> ID：15856576
> 
> 赞同：0
> 
> 时间：2013-04-06T22:05:07.980
> 
> 标签：jquery, twitter-bootstrap

Bootstrap 在 Chrome 和 Firefox 中运行良好，但使用 IE 8，我从 bootstrap.js 中的错误中得到以下信息...

网页错误详细信息消息：对象不支持此属性或方法行：292 字符：3 代码：0 URI：

```
 (http://74.54.89.128/~infinite/live_site/) 
```

有谁知道是什么原因造成的？

# android - 如何保存我的活动的内容视图？

> ID：15856578
> 
> 赞同：0
> 
> 时间：2013-04-06T22:05:10.073
> 
> 标签：android, android-activity, save

好的，所以在我的活动中，如您所见，我将内容视图从一个更改为另一个。所以我想知道如何保存我的活动关闭时最后存在的内容视图。

```
 public class Levels extends Activity{

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setTheme(android.R.style.Theme_NoTitleBar_Fullscreen);
    setContentView(R.layout.levels);

    final EditText anstext1 = (EditText) findViewById(R.id.anstext1);
    Button button1 = (Button) findViewById(R.id.button1);

    button1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {   
             String result = anstext1.getText().toString();
             if(result.equals("they"))
                 setContentView(R.layout.social);
             else 
               Toast.makeText(getApplicationContext(), "Wrong", Toast.LENGTH_LONG).show();
        }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:34:43.003

**设置内容视图**

您应该在 Activity 生命周期中只调用一次此方法。

**保存状态**

大多数情况下，您将使用 onSaveInstanceState 保存模型并使用从该方法生成的包恢复它们。Activity、Fragment 和 Views 都内置了这些方法。

**持续状态**

如果您需要在比当前应用生命周期更长的时间内使用数据，您可以使用以下机制之一：

1.  共享首选项
2.  SQL-lite 数据库
3.  文件输入/输出

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:48:58.147

1.  创建一个类型为 R.layout.levels 的变量。假设 R.layout.levels 是一个RelativeLayout：RelativeLayout rl;

2.  像这样初始化它： rl = (RelativeLayout) getLayoutInflater().inflate(R.layout.levels,null);

3.  设置内容视图（rl）；

如果您想在活动被销毁时保存变量，您可以将它放在自定义应用程序类中并从那里检索它。您可以在“维护全局状态”处找到如何操作：http: [//www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android](http://www.intridea.com/blog/2011/5/24/how-to-use-application-object-of-android)

我不知道这样做是好是坏，但这可能是您所要求的解决方案。

# json - 从 Array Generated UITableViewController 链接到 UITabBarController 并根据 Selection 显示相关数据

> ID：15856579
> 
> 赞同：0
> 
> 时间：2013-04-06T22:05:10.173
> 
> 标签：json, uitabbarcontroller, uistoryboardsegue

这里是瘦子。这是我从头开始编写的第一个应用程序，不幸的是它不是一个 helloWorld 应用程序。

我将 NSDictionary 剥离为 NSArray，并根据那里的数据创建了 UITableView。我的问题是我正在尝试将其链接到 UITabBarController（总共 2 个选项卡），并根据所选的表格单元格加载每个页面上的数据。

我不确定是否可以使用情节提要或是否需要使用笔尖来完成此操作。我目前没有将此数组保存到任何类型的内存中，因此这可能是先决条件。

任何帮助将不胜感激。如果需要，我可以提供代码。

到目前为止，该站点在构建此应用程序方面提供了惊人的帮助，仅用于搜索已回答的问题。这可能也在那里，但我还没有找到它，虽然这里可能没有使用正确的措辞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T17:52:45.787

在 ViewDidLoad 下我做了这样的事情。

```
tbcClassName *myTBC = (tbcClassName *)self.tabBarController;
self.variableName = myTBC.variableName; 
```

然后继续使用您刚刚创建的变量。

我在这里的另一个线程中找到了答案，但我无法找到它。

# javascript - 如何访问新打开的选项卡的窗口对象？[在 Firefox 扩展中]

> ID：15856580
> 
> 赞同：7
> 
> 时间：2013-04-06T22:05:17.713
> 
> 标签：javascript, firefox-addon, xul

我正在尝试将 Greasemonky 脚本转换为 Firefox 的扩展程序，并且我正在尝试使我的扩展程序在打开新选项卡时自动将简单脚本附加到任何网页。我正在从 Greasemonkey 转换脚本，因为我想利用高级首选项和菜单选项。

我使用这个访问选项卡：

```
var container = gBrowser.tabContainer;
container.addEventListener("TabOpen", tabAdded, false);

function tabAdded(event) {
var newtabwindow = event.target.____ //I don't know what goes here
//attach script to newtabwindow
} 
```

我的目标是在使用此功能加载后将脚本附加到新选项卡中的文档：

```
function scriptrunner(targetwindow) {
var myScript = targetwindow.content.document.createElement('script');
    myScript.type = 'text/javascript';
    myScript.setAttribute('src','chrome://addonname/content/addonscript.js');
    targetwindow.content.document.getElementsByTagName('head')[0].appendChild(myScript);
} 
```

当附加到带有 oncommand="scriptrunner(window)" 的工具栏按钮时，此函数可以很好地将脚本附加到当前页面，但我不知道如何访问新打开的选项卡中的窗口，或者我是否应该从等式中切出窗口并以另一种方式访问​​文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:35:32.830

您正在寻找`contentWindow`，这是`browser`元素的一个属性。

给定一个`tab`, 调用[`gBrowser.getBrowserForTab`](https://developer.mozilla.org/en-US/docs/XUL/tabbrowser#m-getBrowserForTab)以获取`browser`与`tab`. 然后访问元素的`contentDocument`or`contentWindow`属性[`browser`](https://developer.mozilla.org/en-US/docs/XUL/browser#p-contentWindow)（这些等同于您应该已经熟悉的`document`and对象）。`window`

`"load"`另外——如果我没记错的话——`contentWindow`除了监听`tab`.

# c# - 使用带有 IP*Works 的 SSH 密钥

> ID：15856582
> 
> 赞同：0
> 
> 时间：2013-04-06T22:05:28.120
> 
> 标签：c#, ssh

我尝试使用 nsoftware 的 IP*Works 组件连接到没有密码的 SSH 服务器。以下文档中描述了有关组件功能的唯一信息：

[http://www.nsoftware.com/kb/help/BWN1-A/Type_Certificate.rst](http://www.nsoftware.com/kb/help/BWN1-A/Type_Certificate.rst)

我用 Putty 创建了密钥，这是一个 PPK 文件：

```
PuTTY-User-Key-File-2: ssh-rsa
Encryption: aes256-cbc
Comment: rsa-key-20130329
Public-Lines: 4
...
Private-Lines: 8
...
Private-MAC: ... 
```

但是，使用 nsoftware.IPWorksSSH.Certificate 打开此文件的任何尝试都会失败。有人对 Ip*works 的证书对象有经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:24:33.970

事实上，IP*Works 不使用与 PuTTY 相同的密钥格式。您将需要转换密钥。这记录在这里：

*   [是否支持 .ppk 文件？](http://www.nsoftware.com/kb/showentry.aspx?entry=06120702)

# ruby-on-rails - ruby on rails 我可以使用 Model.find(params[:id]).where() 之类的东西吗

> ID：15856583
> 
> 赞同：1
> 
> 时间：2013-04-06T22:05:32.387
> 
> 标签：ruby-on-rails, find, where, rails-activerecord

嗨，我仍然是一名学生，我正在学习软件工程课程，我们有这个大项目（网页设计），我们正在使用 rails，所以我的问题是我有一个表和`Users`一个表`Groups`以及另一个关联表`GroupUsers`两个外键`user_id`和`group_id`. 每当用户创建或加入已经创建的组时，他的 id 和 group_id 都会添加到`GroupUsers`表中

```
module GroupUsersHelper
   def join
      @group_id = params[:id]
      @user_id = params[:user_id]
      @newuser= GroupUser.new(:group_id => @group_id, :user_id => @user_id)
      @newuser.save
      redirect_to(:controller => 'groups', :action => 'show', :id => @group_id)
   end
end 
```

现在我必须创建方法离开组，我必须从中销毁记录`GroupUsers`，所以我也写了这段代码`GroupUsersHelper`

```
 def leave
      @group_id = params[:group_id]
      @user_id = params[:user_id]
      @group_user_id = params[:group_user_id]
      @newuser= GroupUser.find(@group_user_id).where(:group_id => @group_id, :user_id =>
      @user_id)
      @newuser.destroy
      redirect_to(:controller => 'groups', :action => 'show', :id => params[:id])
   end 
```

但我得到这个错误

```
ActiveRecord::RecordNotFound in GroupsController#leave 
```

`GroupUser`没有身份证找不到

如果您需要有关代码的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-30T18:08:22.890

其他答案解决了您的代码示例，但没有解决标题中的问题。您不能`Model.find(params[:id]).where()`在 ActiveRecord（Rails 的默认 ORM）中使用。Model.find 返回一条记录（您的 Model 类的一个实例），但 Model.where 返回一个 Model::ActiveRecord_Relation 对象（一个类似数组的对象）。该`.where`方法仅在您的模型类上直接可用（即`Model.where`）或在 ActiveRecord_Relation 上可用。如果要链接方法，则需要确保每个方法都返回一个 ActiveRecord_Relation。例如：

```
Model.where("name = ?", "max")
     .order(created_at: :desc)
     .reorder(created_at: :asc)
     .includes(:sent_comments) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-31T05:35:54.067

```
Model.find(params[:id]) will generate such kind of query

 *Lets take an example : GroupUser.find(params[:id]) will generate sql equivalent*
 select * from group_users where id = params[:id]

If you want to add where condition do something like this
GroupUser.where("# id ={params[:id]} and someColumn = #{somevariable}") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T23:34:29.593

做就是了：

```
group = Group.find(params[:group_id])
user = User.find(params[:user_id])
group.users.delete(user)
group.save 
```

这将从用户关联中删除用户，并在保存组时自动销毁 GroupUser 记录。请参阅[collection.delete](http://apidock.com/rails/ActiveRecord/Associations/ClassMethods/has_many)方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T22:11:16.027

您没有`groupuser_id`在 params 哈希中传递。与其将其存储在`@group_id`and`@user_id`中，不如试试这个：

```
@newuser= GroupUser.find_by_group_id_and_user_id(params[:group_id],params[:user_id]) 
```

您能否另外发布您的参数转储，以便我们弄清楚如何进行良好的重定向，因为我因此这也是一个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-31T18:16:16.573

@maxplener 是对的，你不应该使用 Model.find().where()。

这是不正确的，如果你仔细想想，你会发现它是多余的。要找到你想销毁的关联，你要么需要 params[:group_id] 和 params[:user_id]，要么只需要 params[:group_user_id]。

如果您已将 params[:group_user_id] 传递给 leave 方法，则您已经拥有查找关联所需的所有信息：

```
def leave
  @newuser= GroupUser.find(params[:group_user_id])
  @newuser.destroy
  redirect_to(:controller => 'groups', :action => 'show', :id => params[:group_id])
end 
```

或者，如果您已将 params[:group_id] 和 params[:user_id] 传递给 leave 方法：

```
def leave
  @newuser= GroupUser.find_by_group_id_and_user_id(params[:group_id], params[:user_id])
  @newuser.destroy
  redirect_to(:controller => 'groups', :action => 'show', :id => params[:group_id])
end 
```

此外，您的代码中还有一些其他冗余，您会注意到我在上面省略了。在将参数传递给 find() 方法之前，无需将每个参数分配给实例变量：

```
@model_id = params[:model_id]
@model= Model.find(@model_id)

#can be simplified to:

@model = Model.find(params[:model_id]) 
```

通常，您只想为需要在视图中访问的记录或记录集合创建实例变量（例如应用程序上下文中的组）。

# php - SQL / PHP：在X到Y时间内获取所有结果，并检测其间是否有可用时间

> ID：15856588
> 
> 赞同：3
> 
> 时间：2013-04-06T22:06:30.867
> 
> 标签：php, mysql, sql, sorting, time

对不起，如果标题有点模糊..

我有一个如下所示的数据库：

```
orderid | roomname | date(DATE) | from(TIME) | to(TIME) 
```

示例数据：

```
1231 | E12 | 2013-04-05 | 07:00:00 | 10:00:00
1671 | E12 | 2013-04-05 | 13:00:00 | 14:00:00 
```

例如，我正在搜索某个日期，显然当天获得了所有预订。正如您在示例数据中看到的，房间在 10:00:00 到 13:00:00 之间可用。我怎么能抓住这个？

我正在考虑循环时间 07:00:00-16:00:00 （每个查询一个）并检查是否从 sql 获得任何结果。如果我得到结果，我会知道房间很忙，但由于这里有未知数（例如 08:00:00 和 09:00:00 不存在），我会得到误报。

这里有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:26:13.783

一种方法是使用“日历表”，或者如果您只对某一天感兴趣，可以使用“时钟表”。下面（粗略地）说明了如何使用它。

```
SELECT clock.time AS available
FROM clock
LEFT JOIN bookings ON clock.time BETWEEN bookings.from AND bookings.to
                  AND bookings.date = '2013-01-01' 
WHERE bookings.id IS NULL 
```

[http://www.brianshowalter.com/calendar_tables](http://www.brianshowalter.com/calendar_tables)是如何在 MySQL 中创建日历的示例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:41:28.263

有了这些数据：

```
create table rooms
(
  orderid int not null,
  roomname varchar(8) not null,
  date date not null,
  `from` time not null,
  `to` time not null
);

insert into rooms values (1231, 'E12', '2013-04-05', '07:00', '10:00');
insert into rooms values (1671, 'E12', '2013-04-05', '13:00', '14:00'); 
```

要获取可用的时间间隔/时隙，您可以发出以下查询：

```
SELECT DATE_FORMAT(r1.`to`, '%T') AS `From`, DATE_FORMAT(min(r2.`from`), '%T') AS `To`
FROM
  rooms r1 JOIN rooms r2
  ON r1.`to`< r2.`from`
WHERE r1.date = '2013-04-05' AND r1.roomname = 'E12'
GROUP BY r1.`to`
HAVING
  NOT EXISTS (SELECT NULL FROM rooms r3
              WHERE r1.`to` < r3.`to`
              AND min(r2.`from`) > r3.`from`) 
```

上面的查询将返回：

```
10:00:00    13:00:00 
```

这是 SQL 小提琴：[http ://sqlfiddle.com/#!2/3c124/25](http://sqlfiddle.com/#!2/3c124/25)

注意：以上查询由[@fthiella](https://stackoverflow.com/users/833073/fthiella)改编自此答案：

[https://stackoverflow.com/a/14139835/114029](https://stackoverflow.com/a/14139835/114029)

* * *

使用此附加查询：

```
SELECT (COUNT(*) = 0) AS Available
    FROM rooms
    WHERE roomname = 'E12' AND date = '2013-04-05' AND
    (
        (`from` < MAKETIME(10,00,00) AND `to` > MAKETIME(10,00,00)) OR
        (`from` < MAKETIME(13,00,00) AND `to` > MAKETIME(13,00,00))
    ) 
```

它将返回，即在给定的开始时间 ( ) 和结束时间 ( )`1`之间没有预订，因此房间可用。`from``to`

这是使用数据的 SQL Fiddle：[http ://sqlfiddle.com/#!2/3c124/1](http://sqlfiddle.com/#!2/3c124/1)

# java - 在 Java 中执行按位 OR 和 32 位符号位扩展时出错

> ID：15856589
> 
> 赞同：4
> 
> 时间：2013-04-06T22:06:35.603
> 
> 标签：java, binary, bitwise-operators

我在理解 java 中的按位 OR 时遇到了麻烦。我正在阅读 Jeff Friesen 撰写的名为“Apress Starting Java7”的 Java 编程书籍。

在那本书的第 31 页，作者给出了两个 8 位二进制数，并对这两个数进行了按位或运算。他说过：

> 0B0001 1010 | 0B1011 0111 结果为 0000 0000 0000 0000 0000 0000 1011 1111

然后他这么说，我引用：

*“最后三行中的 &、^ 和 | 运算符首先将它们的字节整数操作数转换为 32 位整数值（通过符号位扩展，将符号位的值复制到额外的位中），然后再执行它们的操作。”*

现在，如果我正确理解`0B0001 1010`符号位扩展的前 8 位数字（）变为（32 位数字）：

> `0B0000 0000 0000 0000 0000 0000 0001 1010`

符号位扩展的第二个数字 ( `0B1011 0111`) 变为：

> `0B1111 1111 1111 1111 1111 1111 1011 0111`

如果我按位或这两个扩展数字，我得到：

> `0B1111 1111 1111 1111 1111 1111 1011 1111`

但作者得到：

> `0B0000 0000 0000 0000 0000 0000 1011 1111`

谁能告诉我在这方面哪里错了？我的意思是谁能告诉我为什么我的答案与作者的不同以及我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:17:25.493

`0B10110111`二进制文字的值为 type `int`。它不是从 隐式提升的`byte`，因此没有符号扩展。

如果是这样，`(byte)0B10110111`那么您将拥有您所期望的。

# ios - 在 uitableviewcell 中找到正确的文本高度

> ID：15856592
> 
> 赞同：0
> 
> 时间：2013-04-06T22:07:04.400
> 
> 标签：ios, uitableview, sizewithfont

我有一个显示不同文本的表格，因此我需要相应地调整单元格高度。我使用委托方法：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
// I ask for my content string and then I want to adjust the cell accordingly:
CGSize maximumSize = CGSizeMake(defaultCell.textLabel.frame.size.width, CGFLOAT_MAX);
GSize neededSize = [contentString sizeWithFont:defaultCell.textLabel.font constrainedToSize:maximumSize lineBreakMode:defaultCell.textLabel.lineBreakMode];
CGFloat cellHeight = neededSize.height +15;
return cellHeight; 
```

默认单元格是我的故事板原型单元格。我在 viewDidAppear 委托方法中对其进行了初始化，因此我可以轻松访问我的原型 uitableviewcell，这样我只需要更改故事板中的字体之类的东西。

我遇到的问题是函数 sizeWithFont: constrainedToSize: lineBreakMode: 没有给我准确的答案。如果下一行只有几个非常短的单词，则会导致一行太低。

有没有人知道为什么会这样以及如何避免它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:20:12.933

加载视图和渲染视图时，单元格宽度可能会有所不同。我的想法是，您认为正在使用的单元格框架与正在渲染的单元格框架不同。

# debugging - 如何调试需要用户输入的程序/查看寄存器

> ID：15856594
> 
> 赞同：1
> 
> 时间：2013-04-06T22:07:09.917
> 
> 标签：debugging, assembly, nasm, x86-16, dosbox

我有一个汇编程序，我正在尝试通过调试进行测试，但是该程序通常具有用户输入的整数。有没有办法调试程序并且仍然能够“运行”它，因为我可以将整数输入程序但仍然可以查看寄存器中的值？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:59:59.787

> 有没有办法调试程序并且仍然能够“运行”它，因为我可以将整数输入程序但仍然可以查看寄存器中的值？

是的，任何值得一提的调试器都应该能够让您逐条执行代码。

例如，Borland`Turbo Debugger`和 Open Watcom`Watcom Debugger`有`Trace Into`和`Step Over`执行选项。两者相似但不完全相同。后者将整个子程序作为`call subroutine`指令的一部分执行，而前者只执行一条指令，无论是否执行`call`。

看看如何在调试器中做到这一点。查看它的 UI 和/或文档。

此外，调试器通常允许您在您选择的指令上设置断点并执行代码，直到遇到断点。你也可以使用它。

# ajax - h:commandLink f:ajax 操作在页面具有 f:viewParam required="true" 时未调用

> ID：15856602
> 
> 赞同：1
> 
> 时间：2013-04-06T22:08:27.583
> 
> 标签：ajax, jsf, jsf-2, commandlink, viewparams

在我的 Web 应用程序 JSF2 (mojarra 2.1.20) 中，具有以下代码片段的组件的页面上有一个奇怪的行为：

```
<h:commandLink ... action="#{cc.attrs.bean.next}">
    <f:ajax execute="@this" render=":#{cc.clientId}" />
</h:commandLink> 
```

该动作`next()`并不总是被调用。我发现问题与 url 参数 id 出于某种原因有关：

```
<f:metadata>
    <f:viewParam name="id" value="#{torneoBean.idParam}" required="true" />
</f:metadata> 
```

当我在上面插入 viewParam 时，就会出现问题。但我无法摆脱它。调试 ajax 请求似乎调用了启动、成功、完成事件序列（没有错误），要渲染的组件被正确渲染，但没有触发动作。有没有办法调试这种情况并找出问题的根本原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T00:22:25.620

显然你没有附加`<h:message(s)>`到`<f:viewParam id="torneo_id">`和/或你没有在每个ajax请求上更新它。否则，您会在其上看到必需的验证错误。具体问题基本上由[commandButton/commandLink/ajax action/listener method not invoked or input value not updated](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)的第 3 点涵盖。

至于原因，`<f:viewParam>`在每个单独的 HTTP 请求上执行，也在 ajax 回发上。发送 ajax 请求时，当前请求中不再存在所需的请求参数，因此`<f:viewParam>`无法通过所需的验证。

有几种解决方案：

1.  `<f:param>`在命令组件中保留后续请求的请求参数。

    ```
    <h:commandLink ...>
        ...
        <f:param name="id" value="#{param.id}" />
    </h:commandLink> 
    ```

2.  仅在非回发期间使其成为必需。这仅在页面最初由 GET 请求打开时才有效。但是，如果它是由非重定向导航打开的，那么它仍然会失败。

    ```
    <f:viewParam ... required="#{not facesContext.postback}" /> 
    ```

3.  替换`<f:viewParam>`为由 JSF 实用程序库[OmniFaces](http://omnifaces.org)提供的[`<o:viewParam>`](http://showcase.omnifaces.org/components/viewParam). 它隐式关闭`required="true"`回发，以便您可以继续使用相同的属性。

    ```
    <o:viewParam ... required="true" /> 
    ```

# python - Django mysql 准备好的语句

> ID：15856604
> 
> 赞同：4
> 
> 时间：2013-04-06T22:08:56.500
> 
> 标签：python, mysql, django

您好，我尝试在 django 中使用 mysql 准备好的语句。

我做了以下课程：

```
class PreparedStatement(object):

    def __init__(self,name,query):
        self.name = name
        self.query = query
        self.vars = []
        self.prepare()

    def setVar(self,name,var):
        name = "@%s" % name
        if name not in self.vars:
            self.vars.append(name)
        SQL = "SET %s = " % (name)
        self.__executeQuery(SQL+" %s;",var)

    def prepare(self):
        SQL = "PREPARE %s FROM " % self.name
        self.__executeQuery(SQL + " %s ;", self.query)

    def execute(self):
        SQL = "EXECUTE %s " % self.name

        if len(self.vars):
            params = ""
            for var in self.vars:
            params += var + ", "
            params = params[:-2]
            SQL += "USING %s " % params
        result =  self.__executeQuery(SQL)
        self.vars = []
        return result

    def __executeQuery(self,query,*args):
        cursor = connection.cursor()
        if args:
            cursor.execute(query,args)
        else:
            cursor.execute(query)
        return cursor 
```

我像这样使用它：

```
getDiscountsById = PreparedStatement("getDiscountsById","""SELECT * FROM table 
WHERE id = ? LIMIT 1""")
getDiscountsById.setVar("id",5)
result = getDiscountsById.execute() 
```

它在第一个加载的页面上工作正常，但是在更改 url 或重新加载页面后 MySQL 返回准备好的语句未找到错误。

问题可能出在哪里？有什么解决办法吗？

感谢您的回复，对不起我的英语：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T12:39:17.307

我怀疑您正在 View 之外构建 PreparedStatement 对象并将其作为全局对象访问。

需要注意的是，django 没有连接池的概念，每个页面视图都使用一个全新的数据库连接。MySQL 准备好的语句仅在定义它们的连接/会话的生命周期内存在。因此，第一个 pagview 加载 PreparedStatement 所在的模块，并将其放入数据库中，但第二个连接尝试执行显然失败的先前连接中准备的语句。

要解决此问题，请在您需要它的视图中创建 PreparedStatement，或使用类似的东西（以 Python 方式进行操作，而不是模仿 PHP）：

```
class PreparedStatement(object):

    def __init__(self, name, query, vars):
        self.name = name
        self.query = query
        self.vars = vars

    def prepare(self):
        SQL = "PREPARE %s FROM " % self.name
        self.__executeQuery(SQL + " %s ;", self.query)

    def get_prepared(self):
        # store a map of all prepared queries on the current connection
        return getattr(connection, "__prepared", default={})

    def execute(self, **kwvars):

        if not self.name in self.get_prepared().keys()
           # Statement will be prepared once per session.
           self.prepare()

        SQL = "EXECUTE %s " % self.name

        if self.vars:
            missing_vars = set(self.vars) - set(kwvars)
            if missing_vars:
                raise TypeError("Prepared Statement %s requires variables: %s" % (
                                    self.name, ", ".join(missing_variables) ) )

            param_list = [ var + "=%s" for var in self.vars ]
            param_vals = [ kwvars[var] for var in self.vars ]

            SQL += "USING " + ", ".join( param_list )

            return self.__executeQuery(SQL, *param_vals)
        else:
            return self.__executeQuery(SQL)

    def __executeQuery(self,query, *args):
        cursor = connection.cursor()
        if args:
            cursor.execute(query,args)
        else:
            cursor.execute(query)
        return cursor 
```

并像这样使用它

```
# Global
getDiscountsById = PreparedStatement(
     "getDiscountsById",
     "SELECT * FROM table WHERE id = ? LIMIT 1",
     vars=["id"] # List out the names of the placeholders. This will assist in error checking.
)

#local to a view
result = getDiscountsById.execute(id=5) 
```

免责声明：我没有对此进行测试，但它应该可以运行或者很容易调整以运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T19:55:05.913

感谢Thomas，我让它像这样工作：

```
class PreparedStatement(object):

    def __init__(self,name,query):
        self.name = name
        self.query = query
        self.vars = []

    def setVar(self,name,var):
        name = "@%s" % name
        if name not in self.vars:
            self.vars.append(name)
        SQL = "SET %s = " % (name)
        self.__executeQuery(SQL+" %s;",var)

    def prepare(self):
        SQL = "PREPARE %s FROM " % self.name
        self.get_prepared().append(self.name)
        self.__executeQuery(SQL + " %s ;", self.query)

    def get_prepared(self):
        try:
            getattr(connection, "__prepared")
        except AttributeError:
            setattr(connection,"__prepared",[])
        finally:
            return getattr(connection, "__prepared")

    def f_execute(self):
        return self.execute().fetchall()

    def execute(self):
        if not self.name in self.get_prepared():
            self.prepare()
        SQL = "EXECUTE %s " % self.name
        if len(self.vars):
            params = ""
            for var in self.vars:
                params += var + ", "
            params = params[:-2]
            SQL += "USING %s " % params
        result =  self.__executeQuery(SQL)
        self.vars = []
        return result

    def __executeQuery(self,query,*args):
        cursor = connection.cursor()
        if args:
            cursor.execute(query,args)
        else:
            cursor.execute(query)
        return cursor 
```

使用保持不变：

```
getDiscountsById = PreparedStatement("getDiscountsById","""SELECT * FROM table 
WHERE id = ? LIMIT 1""")
getDiscountsById.setVar("id",5)
result = getDiscountsById.execute() 
```

# jquery - 如果在 .load() 事件处理程序中运行，smoothDivScroll 会失败

> ID：15856607
> 
> 赞同：2
> 
> 时间：2013-04-06T22:09:03.470
> 
> 标签：jquery, smooth-scrolling

[smoothDivScroll](http://www.smoothdivscroll.com/) 1.3 如果在`$(window).load()`. 看到这个[jsFiddle](http://jsfiddle.net/6kCfe/)。

.load() 事件处理程序已弃用，因此我尝试使用[imagesLoaded](https://github.com/desandro/imagesloaded) jQuery 插件，如下所示：

```
(function ($) { if($('.scroller').length)
    $('.scroller').imagesLoaded(function() {
        $('.scroller').smoothDivScroll({});
    });
})(jQuery); 
```

但这在 Safari、Chrome 和 Opera 中也失败了。这些浏览器的控制台中不会显示任何错误。虽然它在 Firefox 中有效。浏览器版本是最新的。

任何想法为什么会失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T20:02:55.010

您粘贴的代码段失败，因为`.scroller`执行该函数时不一定会加载，因此返回`length`0。只需将其放在`$(document).ready`处理程序中即可。或简称：

```
$(function() {
    $('.scroller').smoothDivScroll({});
}); 
```

JSFiddle 为您添加了这一点，但是在您的脚本中，您需要将依赖于 DOM 元素的代码包装到这样的函数中。

# javascript - 如何在嵌套的 Backbone 集合上“冒泡”事件？

> ID：15856614
> 
> 赞同：11
> 
> 时间：2013-04-06T22:09:59.143
> 
> 标签：javascript, backbone.js, backbone-events

我有一个使用**嵌套集合**的 Backbone 应用程序（至少我认为它们是这样称呼的）。

在我的特殊情况下，有**选项卡**和**子选项卡**，每个选项卡（模型）都包含一个子选项卡（模型）的集合。

对于那些更熟悉代码的人，我将在下面写下我的模型和集合，以及子选项卡如何嵌套在选项卡模型中：

```
// Subtab Model
var Subtab = Backbone.Model.extend({
    defaults: { label: undefined }
});

// Subtabs Collection
var Subtabs = Backbone.Collection.extend({
    model: Subtab
});

// Tab Model
var Tab = Backbone.Model.extend({
    defaults: { label: undefined, subtabs: new Subtabs}
});

// Tabs Collection
var Tabs = Backbone.Collection.extend({
    model: Tab
}); 
```

现在，当我更改选项卡的属性时，它会在`Tab`模型​​和`Tabs`集合上触发更改事件（很正常，对吗？），但是当我更改子选项卡的属性时，它会在`Subtab`模型​​和`Subtabs`集合上触发更改事件（这是也正常）**，但它不会冒泡到`Tab`模型（和`Tabs`集合）。**

至少，我想它应该是因为模型中的集合被改变了，所以模型也被改变了（但也许我错了，我没有得到它）​​。

**关于如何使用 Backbone 实现此行为的任何建议？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T23:19:34.620

`change`当属性通过 更改时，Backbone 会触发一个事件`set`。如您所见，该事件也会在集合上触发。但是，您的`subtabs`属性值根本没有改变，它仍然是您在`defaults`. 如果你使用过`tab.set('subtabs', new Subtabs);`，你会得到一个`change:subtabs`事件，但你不想这样做。

我认为您必须在代码中执行某些操作才能在 Tab 模型上触​​发新事件。

```
// Tab Model
var Tab = Backbone.Model.extend({
    defaults: { label: undefined, subtabs: new Subtabs},
    initialize: function(){
        // listen for change in subtabs collection.
        this.get('subtabs').on('change', this.subtabsChanged, this);
    },
    subtabsChanged: function(model) {
        // trigger new event.
        this.trigger('subtab:change', this, model);
    }
}); 
```

然后你可以监听事件：

```
tabs.on('subtab:change', function(tab, subtab) { 
    console.log(tab.get('label'));
    console.log(subtab.get('label'));
}); 
```

我认为这会奏效。但我想我想知道为什么你会听你的 Tabs 集合来改变 Subtabs。在大多数情况下，最好只监听 Subtabs 集合本身的更改事件。

```
tab.get('subtabs').on('change', function(model){
    // do something with model, which is a Subtab.
}); 
```

编辑：http: [//jsfiddle.net/phoenecke/DvHqH/1/](http://jsfiddle.net/phoenecke/DvHqH/1/)

# url - 如何将网址从 http://www.mysite.com/mobile 更改为 http://mobile.mysite.com？

> ID：15856616
> 
> 赞同：1
> 
> 时间：2013-04-06T22:10:35.223
> 
> 标签：url

我的服务器上有一个名为 mobile 的目录。基本上，如果用户从移动设备访问我的网站，它会将他们带到[http://www.mysite.com/mobile](http://www.mysite.com/mobile)并且在移动目录中是 index.php。

但我想知道人们如何更改浏览器的 url 地址，所以不是[http://www.mysite.com/mobile](http://www.mysite.com/mobile)它是[http://mobile.mysite.com](http://mobile.mysite.com)。

谁能解释/告诉我我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:14:35.020

1.  您必须配置一个子域，即 DNS 提供商的 A 记录。如果您只有一个服务器/IP，请将此 A 记录指向相同。
2.  在您的网络服务器上配置一个新的虚拟主机以响应您刚刚创建的 A 记录。

# wpf - 在 WPF 中控制加载“如图所示”

> ID：15856617
> 
> 赞同：0
> 
> 时间：2013-04-06T22:10:51.997
> 
> 标签：wpf, listview, loading

我目前有一个包含大量数据的列表视图。大多数数据在加载时不会显示在屏幕上，用户需要向下滚动才能查看信息。

从数据库加载实际数据非常快，当我尝试加载整个数据库内容时不到一秒钟。然而，显示会花费更多时间，当然，随着行数变大，会花费更多时间，这可能会变得很麻烦，尤其是在速度较慢的计算机上。

我想知道 WPF 中是否有一些控件可以在用户向下滚动时加载显示以平衡加载时间（并且仅在真正需要时加载）。我不介意页面的某个时候（例如顶部或底部显示的第 10 页，共 10 页），但我相信“看起来似乎”的东西会更好。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T03:54:32.220

我认为 a`VirtualizingStackPanel`是您可能正在寻找的。

从 MSDN 页面上：

> 标准布局系统创建项目容器并为与列表控件关联的每个项目计算布局。“虚拟化”一词是指一种技术，通过该技术，用户界面 (UI) 元素的子集根据哪些项目在屏幕上可见而从大量数据项目中生成。当屏幕上可能只有几个元素时生成许多 UI 元素会对应用程序的性能产生不利影响。VirtualizingStackPanel 计算可见项的数量并与 ItemsControl（例如 ListBox 或 ListView）中的 ItemContainerGenerator 一起使用，以仅为可见项创建 UI 元素。

# javascript - 理解一段简单的JS代码——函数——

> ID：15856621
> 
> 赞同：4
> 
> 时间：2013-04-06T22:11:11.993
> 
> 标签：javascript

我正在阅读 Ninja Secrets of JS Book 并看到这部分示例代码：

```
 var ninja = {
      chirp: function signal(n) {                              //#1
        return n > 1 ? signal(n - 1) + "-chirp" : "chirp";
      }
    };

    var samurai = { chirp: ninja.chirp }; 

   ninja = {}; 
```

所以我理解了第一部分：我们有一个对象`ninja`，它有一个方法。

我了解第二部分，现在我们正在创建一个名为的新对象`samurai`，它有一个名为`chirp`.

让我困惑的`ninja.chirp`部分是它的一部分，我们在这里做什么？它是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T22:13:22.143

它获取对象（它是一个函数）的属性值并将其分配给正在构造的对象的`chirp`属性。`ninja``chirp`

这是一个更简单的示例（使用字符串而不是函数）：

```
var foo, bar;
foo = { "an": "object" };
bar = { "an": foo.an }
alert(foo.an);
alert(bar.an); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T22:13:35.510

这个例子我已经看过很多次了，这是一个可怕的例子。对于初学者来说，命名函数表达式在 IE 中是错误的，但除此之外，它们完全没有必要，因为您可以简单地引用`arguments.callee`.

除此之外，使用递归函数重复字符串只是自找麻烦。整个事情可以变得更简单：

```
function signal(n) {
    return new Array(n+1).join("-chirp").substr(1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T22:18:24.177

在这里，`chirp`它被复制到`samurai`. 比您可以销毁`ninja`对象并仍然使用该`samurai.chirp`方法。

# java - 如何在 Java 中以 axy 坐标打印

> ID：15856626
> 
> 赞同：0
> 
> 时间：2013-04-06T22:12:25.913
> 
> 标签：java

我认为有一种方法可以在窗口中的特定位置打印，但我似乎不记得了，我尝试过的所有搜索都让我大吃一惊。不管我试图在特定的 x,y 绳索上打印，如下所示：

```
PrintAt(0,0,'1');
PrintAt(25,0,'2');
PrintAt(0,25,'3');
PrintAt(25,25,'4'); 
```

输出看起来像这样：

```
1                 2

3                 4 
```

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:20:57.310

您正在寻找的方法是 drawString() 方法。

一个示例实现是：

```
public class XyPrinter extends JPanel{

        @Override
        public void paintComponent(Graphics g){
            super.paintComponent(g);
            final Graphics2D g2d = (Graphics2D) g;
            g2d.drawString("The string i want to print", xcoordinate, ycoordinate);
        }
} 
```

您将在哪里将此 JPanel 添加到 JFrame 或您正在使用的任何内容中。

# php - 在 PHP 中回显 javascript 时出错

> ID：15856628
> 
> 赞同：2
> 
> 时间：2013-04-06T22:13:11.640
> 
> 标签：php, javascript, echo

我收到一个错误，即 where etc.. 行存在语法问题`selection = ui.item.addClass`，但我无法弄清楚它是什么。我想我已经逃脱了所有正确的报价，但我不确定。注意：前两个变量意味着包含空单引号。

```
<?php      
echo    "<script>";

echo    "$(function(){";

echo  "var selection = \' \'; ";

echo  "var selectClass = \' \'; ";

echo  " $(\".menu\").menu({ ";

echo  " select: function (event, ui) { "
echo   " $(\'.selected\', this).removeClass(\'selected\'); ";
echo     "  selection = ui.item.addClass(\'selected\').children(\'a\').attr(\'name\');";

echo  " }"; // closes select function

echo  "  }); "; // closes menu
echo  " </script>";
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T22:16:42.007

首先，我将简化您的代码：

```
<?php      
echo  <<<'SCRIPT'
<script>
$(function(){
    var selection = ' ';
    var selectClass = ' ';
    $(".menu").menu({
        select: function (event, ui) {
            $('.selected', this).removeClass('selected');
            selection = ui.item.addClass('selected').children('a').attr('name');
        } // closes select function
    }); // closes menu
}); // close function()
</script>
SCRIPT;
?> 
```

您会发现这“神奇地”解决了您的问题，因为现在您没有丢失的分号；）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T22:17:07.420

亲自。我会退出我的 Javascript 的标签。当我完成输入后，我认为重新打开 PHP 标签以继续没有什么坏处。

```
 //Other code here 
?>
<script>
$(function(){

var selection = ' ';

var selectClass = ' ';

$(".menu").menu({

select: function (event, ui) { 
$('.selected', this).removeClass('selected');
selection = ui.item.addClass('selected').children('a').attr('name');

}// closes select function

});// closes menu
});// closes function()
</script>

<?php 
// Continue here 

?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T22:15:53.027

您在第 14 行缺少分号

```
echo  " select: function (event, ui) { ";
echo   " $(\'.selected\', this).removeClass(\'selected\'); "; 
```

修复它给出了这个：[http ://eval.in/15236](http://eval.in/15236)

```
<script>$(function(){var selection = \' \'; var selectClass = \' \';  $(".menu").menu({  select: function (event, ui) {  $(\'.selected\', this).removeClass(\'selected\');   selection = ui.item.addClass(\'selected\').children(\'a\').attr(\'name\'); }  });  </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T22:18:42.337

在最后一行添加这个

```
echo  "  }); "; // closes menu
// --- add this
echo " });";
// -----
echo  " </script>"; 
```

试试看 :D

# java - 从返回的数据库中输出某些元素返回的列表

> ID：15856631
> 
> 赞同：0
> 
> 时间：2013-04-06T22:13:27.283
> 
> 标签：java, mysql, jdb

我正在查询数据库以根据输入字符串返回值列表；这些值列表显示在用户的搜索框中。问题是，我返回的列表显示为对象而不是名称列表。附上代码片段来说明我的观点

我的检索方法

```
public List<EmployeeDetails> getEmployeeByName(String employeeName) {

    List<EmployeeDetails> list=new ArrayList<EmployeeDetails>();
    Connection c=null;
    String sql=("SELECT * FROM  employee_table WHERE UPPER(employeeName) LIKE ? ORDER BY employeeName");

    try{
        c = ConnectionHelper.getConnection();
        PreparedStatement ps=c.prepareStatement(sql);
        ps.setString(1, "%" + employeeName.toUpperCase() + "%");
        ResultSet rs=ps.executeQuery();
        while(rs.next()){

            list.add(new EmployeeDetails  (rs.getInt("employeeid"),
                    rs.getString("employeeName"),
                    rs.getString("employeeAddress"),
                    rs.getString("employeeAge"), 
                    rs.getString("nationality"), 
                    rs.getString("salaryRate")));

        }

    }catch (SQLException e) {
        e.printStackTrace();
        try {
            throw new Exception(e);
        } catch (Exception e1) {

            e1.printStackTrace();
        }
    } finally {
        ConnectionHelper.close(c);
    }

    return **list**;

} 
```

我打算只填充返回对象的名称，而不是原始封装对象的名称。我该怎么做？任何帮助/指针将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:01:46.607

这种方法的结果必须在某处得到使用。无论在哪里，您都需要执行以下操作：

```
class EmployeeDAO
{
    // Your method doing data access
    public List<EmployeeDetail> getEmployeeByName(String employeeName) {
        ...
        return list;
    }
}

class EmployeeController
{
    public void searchByName( String employeeName )
    {
        List<EmployeeDetail> employeeDetails = employeeDao.getEmployeeByName( employeeName );

        Map<String, EmployeeDetail> searchResults = new HashMap<String, EmployeeDetail>();
        // Use employeeNames in the search box
        for( EmployeeDetail employeeDetail : employeeDetails )
        {
            searchResults.put( employeeDetail.getEmployeeName(), employeeDetail );
        }

        // I don't know how to return objects for Flex/BlazeDS, so this is more Spring MVC style
        view.put( "searchResults", searchResults );
    }   
} 
```

另外两个建议：

1.  `EmployeeDetails`将类重命名为`EmployeeDetail`（单数）。这样，`EmployeeDetail`对象集合可以使用`employeeDetails`（复数）之类的名称。
2.  将您的方法重命名为，`getEmployeesByName`因为您不能保证只有一名员工返回。

# java - Java JIT 编译器：死代码会被永久删除吗？

> ID：15856632
> 
> 赞同：2
> 
> 时间：2013-04-06T22:13:28.327
> 
> 标签：java, jvm, jit

我有以下测试类来检查 JIT 编译器逻辑：

```
public static final int COUNT = 2_000_000_000;

public static final MyLogger LOG = new MyLogger(false);

//Here IS_DEBUG is false
public static final boolean IS_DEBUG = LOG.isDebug();

private void run() throws Exception
{
    System.out.println(getSum(COUNT));

    //Compilation without OSR
    System.out.println(getSum(COUNT + 2));

    //Change value IS_DEBUG -> true over reflection
    setFinalStatic(TestDeadCode.class.getField("IS_DEBUG"), true);
    //Show true
    System.out.println(IS_DEBUG);

    COUNT = COUNT / 2;
    System.out.println(getSum(COUNT + 3));
}

private int getSum(int count)
{
    int result = 0;
    for (int j = 0; j < count; j++)
    {
        result = result + 1;
        if (IS_DEBUG)
        {
            //Dead code here
            System.out.println("debug: " + result);
        }
    }
    return result;
} 
```

如果我调用方法`run()`然后是“死代码”

`System.out.println("debug: " + result);`

永远不会被执行。它是JVM错误吗？

爪哇版：

> Java(TM) SE 运行时环境 (build 1.7.0_17-b02)
> 
> Java HotSpot(TM) 64 位服务器 VM（内部版本 23.7-b01，混合模式）

更新：打印编译输出：

> ```
> 79    1 %           com.nau.sample.deadcode.TestDeadCode::getSum @ 7 (34 bytes)
> 
> 85    1             com.nau.sample.deadcode.TestDeadCode::getSum (34 bytes) 
> ```

# wxpython - WxPython 演示代码 - 传递记录器对象

> ID：15856637
> 
> 赞同：0
> 
> 时间：2013-04-06T22:14:27.067
> 
> 标签：wxpython

我在我的机器上尝试了一些 WXpython 演示代码......只是想了解如何传递记录器对象......它应该只是记录器对象，还是可以传递文件名以写入文件..

这是我修改后的代码...

```
import wx, wx.lib.customtreectrl, wx.gizmos
try:
    import treemixin 
except ImportError:
    from wx.lib.mixins import treemixin

overview = treemixin.__doc__

class TreeModel(object):
    ''' TreeModel holds the domain objects that are shown in the different
    tree controls. Each domain object is simply a two-tuple consisting of
    a label and a list of child tuples, i.e. (label, [list of child tuples]). 
    '''
    def __init__(self, *args, **kwargs):
        self.items = []
        self.itemCounter = 0
        super(TreeModel, self).__init__(*args, **kwargs)

    def GetItem(self, indices):
        text, children = 'Hidden root', self.items
        for index in indices:
            text, children = children[index]
        return text, children

    def GetText(self, indices):
        return self.GetItem(indices)[0]

    def GetChildren(self, indices):
        return self.GetItem(indices)[1]

    def GetChildrenCount(self, indices):
        return len(self.GetChildren(indices))

    def SetChildrenCount(self, indices, count):
        children = self.GetChildren(indices)
        while len(children) > count:
            children.pop()
        while len(children) < count:
            children.append(('item %d'%self.itemCounter, []))
            self.itemCounter += 1

    def MoveItem(self, itemToMoveIndex, newParentIndex):
        itemToMove = self.GetItem(itemToMoveIndex)
        newParentChildren = self.GetChildren(newParentIndex)
        newParentChildren.append(itemToMove)
        oldParentChildren = self.GetChildren(itemToMoveIndex[:-1])
        oldParentChildren.remove(itemToMove)

class DemoTreeMixin(treemixin.VirtualTree, treemixin.DragAndDrop, 
                    treemixin.ExpansionState):
    def __init__(self, *args, **kwargs):
        self.model = kwargs.pop('treemodel')
#         self.log = kwargs.pop('log')
        super(DemoTreeMixin, self).__init__(*args, **kwargs)
        self.CreateImageList()

    def CreateImageList(self):
        size = (16, 16)
        self.imageList = wx.ImageList(*size)
        for art in wx.ART_FOLDER, wx.ART_FILE_OPEN, wx.ART_NORMAL_FILE:
            self.imageList.Add(wx.ArtProvider.GetBitmap(art, wx.ART_OTHER, 
                                                        size))
        self.AssignImageList(self.imageList)

    def OnGetItemText(self, indices):
        return self.model.GetText(indices)

    def OnGetChildrenCount(self, indices):
        return self.model.GetChildrenCount(indices)

    def OnGetItemFont(self, indices):
        # Show how to change the item font. Here we use a small font for
        # items that have children and the default font otherwise.
        if self.model.GetChildrenCount(indices) > 0:
            return wx.SMALL_FONT
        else:
            return super(DemoTreeMixin, self).OnGetItemFont(indices)

    def OnGetItemTextColour(self, indices):
        # Show how to change the item text colour. In this case second level
        # items are coloured red and third level items are blue. All other
        # items have the default text colour.
        if len(indices) % 2 == 0:
            return wx.RED
        elif len(indices) % 3 == 0:
            return wx.BLUE
        else:
            return super(DemoTreeMixin, self).OnGetItemTextColour(indices)

    def OnGetItemBackgroundColour(self, indices):
        # Show how to change the item background colour. In this case the
        # background colour of each third item is green.
        if indices[-1] == 2:
            return wx.GREEN
        else: 
            return super(DemoTreeMixin, 
                         self).OnGetItemBackgroundColour(indices)

    def OnGetItemImage(self, indices, which):
        # Return the right icon depending on whether the item has children.
        if which in [wx.TreeItemIcon_Normal, wx.TreeItemIcon_Selected]:
            if self.model.GetChildrenCount(indices):
                return 0
            else:
                return 2
        else:
            return 1

    def OnDrop(self, dropTarget, dragItem):
        dropIndex = self.GetIndexOfItem(dropTarget)
        dropText = self.model.GetText(dropIndex)
        dragIndex = self.GetIndexOfItem(dragItem)
        dragText = self.model.GetText(dragIndex)
#         self.log.write('drop %s %s on %s %s'%(dragText, dragIndex,
#             dropText, dropIndex))
        self.model.MoveItem(dragIndex, dropIndex)
        self.GetParent().RefreshItems()

class VirtualTreeCtrl(DemoTreeMixin, wx.TreeCtrl):
    pass

class VirtualTreeListCtrl(DemoTreeMixin, wx.gizmos.TreeListCtrl):
    def __init__(self, *args, **kwargs):
        kwargs['style'] = wx.TR_DEFAULT_STYLE | wx.TR_FULL_ROW_HIGHLIGHT
        super(VirtualTreeListCtrl, self).__init__(*args, **kwargs)
        self.AddColumn('Column 0')
        self.AddColumn('Column 1')
        for art in wx.ART_TIP, wx.ART_WARNING:
            self.imageList.Add(wx.ArtProvider.GetBitmap(art, wx.ART_OTHER, 
                                                        (16, 16)))

    def OnGetItemText(self, indices, column=0):
        # Return a different label depending on column.
        return '%s, column %d'%\
            (super(VirtualTreeListCtrl, self).OnGetItemText(indices), column)

    def OnGetItemImage(self, indices, which, column=0):
        # Also change the image of the other columns when the item has 
        # children.
        if column == 0:
            return super(VirtualTreeListCtrl, self).OnGetItemImage(indices, 
                                                                   which)
        elif self.OnGetChildrenCount(indices):
            return 4
        else:
            return 3

class VirtualCustomTreeCtrl(DemoTreeMixin, 
                            wx.lib.customtreectrl.CustomTreeCtrl):
    def __init__(self, *args, **kwargs):
        self.checked = {}
        kwargs['style'] = wx.TR_HIDE_ROOT | \
            wx.TR_HAS_BUTTONS | wx.TR_FULL_ROW_HIGHLIGHT
        super(VirtualCustomTreeCtrl, self).__init__(*args, **kwargs)
        self.Bind(wx.lib.customtreectrl.EVT_TREE_ITEM_CHECKED,
                  self.OnItemChecked)

    def OnGetItemType(self, indices):
        if len(indices) == 1:
            return 1
        elif len(indices) == 2:
            return 2
        else:
            return 0

    def OnGetItemChecked(self, indices):
        return self.checked.get(indices, False)

    def OnItemChecked(self, event):
        item = event.GetItem()
        itemIndex = self.GetIndexOfItem(item)
        if self.GetItemType(item) == 2: 
            # It's a radio item; reset other items on the same level
            for nr in range(self.GetChildrenCount(self.GetItemParent(item))):
                self.checked[itemIndex[:-1]+(nr,)] = False
        self.checked[itemIndex] = True

class TreeNotebook(wx.Notebook):
    def __init__(self, *args, **kwargs):
        treemodel = kwargs.pop('treemodel')
#         log = kwargs.pop('log')
        super(TreeNotebook, self).__init__(*args, **kwargs)
        self.trees = []
        for class_, title in [(VirtualTreeCtrl, 'TreeCtrl'),
                              (VirtualTreeListCtrl, 'TreeListCtrl'),
                              (VirtualCustomTreeCtrl, 'CustomTreeCtrl')]:
#             tree = class_(self, treemodel=treemodel, log=log)
            tree = class_(self, treemodel=treemodel)
            self.trees.append(tree)
            self.AddPage(tree, title)
        self.Bind(wx.EVT_NOTEBOOK_PAGE_CHANGED, self.OnPageChanged)

    def OnPageChanged(self, event):
        oldTree = self.GetPage(event.OldSelection)
        newTree = self.GetPage(event.Selection)
        newTree.RefreshItems()
        newTree.SetExpansionState(oldTree.GetExpansionState())
        event.Skip()

    def GetIndicesOfSelectedItems(self):
        tree = self.trees[self.GetSelection()]
        if tree.GetSelections():
            return [tree.GetIndexOfItem(item) for item in tree.GetSelections()]
        else:
            return [()]

    def RefreshItems(self):
        tree = self.trees[self.GetSelection()]
        tree.RefreshItems()
        tree.UnselectAll()

class TestPanel(wx.App):
#     def __init__(self, parent, log):
#         self.log = log
#         super(TestPanel, self).__init__(parent)
    def __init__(self, redirect=False, filename=None):
        wx.App.__init__(self, redirect, filename)
        self.frame = wx.Frame(None, wx.ID_ANY, title='My Title')
#         self.log = log
        self.treemodel = TreeModel()
        self.CreateControls()
        self.LayoutControls()

    def CreateControls(self):
        self.notebook = TreeNotebook(self, treemodel=self.treemodel) 
#log=self.log)
        self.label = wx.StaticText(self, label='Number of children: ')
        self.childrenCountCtrl = wx.SpinCtrl(self, value='0', max=10000)
        self.button = wx.Button(self, label='Update children')
        self.button.Bind(wx.EVT_BUTTON, self.OnEnter)

    def LayoutControls(self):
        hSizer = wx.BoxSizer(wx.HORIZONTAL)
        options = dict(flag=wx.ALIGN_CENTER_VERTICAL|wx.ALL, border=2)
        hSizer.Add(self.label, **options)
        hSizer.Add(self.childrenCountCtrl, 2, **options)
        hSizer.Add(self.button, **options)
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.notebook, 1, wx.EXPAND)
        sizer.Add(hSizer, 0, wx.EXPAND)
        self.SetSizer(sizer)

    def OnEnter(self, event):
        indicesList = self.notebook.GetIndicesOfSelectedItems()
        newChildrenCount = self.childrenCountCtrl.GetValue()
        for indices in indicesList:
            text = self.treemodel.GetText(indices)
            oldChildrenCount = self.treemodel.GetChildrenCount(indices)
#             self.log.write('%s %s now has %d children (was %d)'%(text, indices,
#                 newChildrenCount, oldChildrenCount))
            self.treemodel.SetChildrenCount(indices, newChildrenCount)
        self.notebook.RefreshItems()

# def runTest(frame, nb, log):
#     win = TestPanel(nb, log)
#     return win
# 
# 
# if __name__ == '__main__':
#     import sys, os, run
#     run.main(['', os.path.basename(sys.argv[0])] + sys.argv[1:])

if __name__ == '__main__':
    app = TestPanel()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:32:18.113

您不需要包含 log 参数。这是为了重定向到演示中的“日志”窗口（即多行文本框）。您应该删除对它的引用。另见[http://wiki.wxpython.org/Using%20wxPython%20Demo%20Code](http://wiki.wxpython.org/Using%20wxPython%20Demo%20Code)

编辑：该代码的养育方式很糟糕。您将 wx.App 对象作为父级传递给所有小部件。这是一个很大的禁忌！您应该将 wx.Panel 对象作为它们的父对象传递给它们。我在下面编辑了您的代码：

```
import wx, wx.lib.customtreectrl, wx.gizmos
try:
    import treemixin 
except ImportError:
    from wx.lib.mixins import treemixin

overview = treemixin.__doc__

class TreeModel(object):
    ''' TreeModel holds the domain objects that are shown in the different
    tree controls. Each domain object is simply a two-tuple consisting of
    a label and a list of child tuples, i.e. (label, [list of child tuples]). 
    '''
    def __init__(self, *args, **kwargs):
        self.items = []
        self.itemCounter = 0
        super(TreeModel, self).__init__(*args, **kwargs)

    def GetItem(self, indices):
        text, children = 'Hidden root', self.items
        for index in indices:
            text, children = children[index]
        return text, children

    def GetText(self, indices):
        return self.GetItem(indices)[0]

    def GetChildren(self, indices):
        return self.GetItem(indices)[1]

    def GetChildrenCount(self, indices):
        return len(self.GetChildren(indices))

    def SetChildrenCount(self, indices, count):
        children = self.GetChildren(indices)
        while len(children) > count:
            children.pop()
        while len(children) < count:
            children.append(('item %d'%self.itemCounter, []))
            self.itemCounter += 1

    def MoveItem(self, itemToMoveIndex, newParentIndex):
        itemToMove = self.GetItem(itemToMoveIndex)
        newParentChildren = self.GetChildren(newParentIndex)
        newParentChildren.append(itemToMove)
        oldParentChildren = self.GetChildren(itemToMoveIndex[:-1])
        oldParentChildren.remove(itemToMove)

class DemoTreeMixin(treemixin.VirtualTree, treemixin.DragAndDrop, 
                    treemixin.ExpansionState):
    def __init__(self, *args, **kwargs):
        self.model = kwargs.pop('treemodel')
#         self.log = kwargs.pop('log')
        super(DemoTreeMixin, self).__init__(*args, **kwargs)
        self.CreateImageList()

    def CreateImageList(self):
        size = (16, 16)
        self.imageList = wx.ImageList(*size)
        for art in wx.ART_FOLDER, wx.ART_FILE_OPEN, wx.ART_NORMAL_FILE:
            self.imageList.Add(wx.ArtProvider.GetBitmap(art, wx.ART_OTHER, 
                                                        size))
        self.AssignImageList(self.imageList)

    def OnGetItemText(self, indices):
        return self.model.GetText(indices)

    def OnGetChildrenCount(self, indices):
        return self.model.GetChildrenCount(indices)

    def OnGetItemFont(self, indices):
        # Show how to change the item font. Here we use a small font for
        # items that have children and the default font otherwise.
        if self.model.GetChildrenCount(indices) > 0:
            return wx.SMALL_FONT
        else:
            return super(DemoTreeMixin, self).OnGetItemFont(indices)

    def OnGetItemTextColour(self, indices):
        # Show how to change the item text colour. In this case second level
        # items are coloured red and third level items are blue. All other
        # items have the default text colour.
        if len(indices) % 2 == 0:
            return wx.RED
        elif len(indices) % 3 == 0:
            return wx.BLUE
        else:
            return super(DemoTreeMixin, self).OnGetItemTextColour(indices)

    def OnGetItemBackgroundColour(self, indices):
        # Show how to change the item background colour. In this case the
        # background colour of each third item is green.
        if indices[-1] == 2:
            return wx.GREEN
        else: 
            return super(DemoTreeMixin, 
                         self).OnGetItemBackgroundColour(indices)

    def OnGetItemImage(self, indices, which):
        # Return the right icon depending on whether the item has children.
        if which in [wx.TreeItemIcon_Normal, wx.TreeItemIcon_Selected]:
            if self.model.GetChildrenCount(indices):
                return 0
            else:
                return 2
        else:
            return 1

    def OnDrop(self, dropTarget, dragItem):
        dropIndex = self.GetIndexOfItem(dropTarget)
        dropText = self.model.GetText(dropIndex)
        dragIndex = self.GetIndexOfItem(dragItem)
        dragText = self.model.GetText(dragIndex)

        self.model.MoveItem(dragIndex, dropIndex)
        self.GetParent().RefreshItems()

class VirtualTreeCtrl(DemoTreeMixin, wx.TreeCtrl):
    pass

class VirtualTreeListCtrl(DemoTreeMixin, wx.gizmos.TreeListCtrl):
    def __init__(self, *args, **kwargs):
        kwargs['style'] = wx.TR_DEFAULT_STYLE | wx.TR_FULL_ROW_HIGHLIGHT
        super(VirtualTreeListCtrl, self).__init__(*args, **kwargs)
        self.AddColumn('Column 0')
        self.AddColumn('Column 1')
        for art in wx.ART_TIP, wx.ART_WARNING:
            self.imageList.Add(wx.ArtProvider.GetBitmap(art, wx.ART_OTHER, 
                                                        (16, 16)))

    def OnGetItemText(self, indices, column=0):
        # Return a different label depending on column.
        return '%s, column %d'%\
            (super(VirtualTreeListCtrl, self).OnGetItemText(indices), column)

    def OnGetItemImage(self, indices, which, column=0):
        # Also change the image of the other columns when the item has 
        # children.
        if column == 0:
            return super(VirtualTreeListCtrl, self).OnGetItemImage(indices, 
                                                                   which)
        elif self.OnGetChildrenCount(indices):
            return 4
        else:
            return 3

class VirtualCustomTreeCtrl(DemoTreeMixin, 
                            wx.lib.customtreectrl.CustomTreeCtrl):
    def __init__(self, *args, **kwargs):
        self.checked = {}
        kwargs['style'] = wx.TR_HIDE_ROOT | \
            wx.TR_HAS_BUTTONS | wx.TR_FULL_ROW_HIGHLIGHT
        super(VirtualCustomTreeCtrl, self).__init__(*args, **kwargs)
        self.Bind(wx.lib.customtreectrl.EVT_TREE_ITEM_CHECKED,
                  self.OnItemChecked)

    def OnGetItemType(self, indices):
        if len(indices) == 1:
            return 1
        elif len(indices) == 2:
            return 2
        else:
            return 0

    def OnGetItemChecked(self, indices):
        return self.checked.get(indices, False)

    def OnItemChecked(self, event):
        item = event.GetItem()
        itemIndex = self.GetIndexOfItem(item)
        if self.GetItemType(item) == 2: 
            # It's a radio item; reset other items on the same level
            for nr in range(self.GetChildrenCount(self.GetItemParent(item))):
                self.checked[itemIndex[:-1]+(nr,)] = False
        self.checked[itemIndex] = True

class TreeNotebook(wx.Notebook):
    def __init__(self, *args, **kwargs):
        treemodel = kwargs.pop('treemodel')
        super(TreeNotebook, self).__init__(*args, **kwargs)
        self.trees = []
        for class_, title in [(VirtualTreeCtrl, 'TreeCtrl'),
                              (VirtualTreeListCtrl, 'TreeListCtrl'),
                              (VirtualCustomTreeCtrl, 'CustomTreeCtrl')]:
            tree = class_(self, treemodel=treemodel)
            self.trees.append(tree)
            self.AddPage(tree, title)
        self.Bind(wx.EVT_NOTEBOOK_PAGE_CHANGED, self.OnPageChanged)

    def OnPageChanged(self, event):
        oldTree = self.GetPage(event.OldSelection)
        newTree = self.GetPage(event.Selection)
        newTree.RefreshItems()
        newTree.SetExpansionState(oldTree.GetExpansionState())
        event.Skip()

    def GetIndicesOfSelectedItems(self):
        tree = self.trees[self.GetSelection()]
        if tree.GetSelections():
            return [tree.GetIndexOfItem(item) for item in tree.GetSelections()]
        else:
            return [()]

    def RefreshItems(self):
        tree = self.trees[self.GetSelection()]
        tree.RefreshItems()
        tree.UnselectAll()

class TestPanel(wx.Panel):

    def __init__(self, parent):
        wx.Panel.__init__(self, parent)
        self.treemodel = TreeModel()
        self.CreateControls()
        self.LayoutControls()

    def CreateControls(self):
        self.notebook = TreeNotebook(self, treemodel=self.treemodel) 
        self.label = wx.StaticText(self, label='Number of children: ')
        self.childrenCountCtrl = wx.SpinCtrl(self, value='0', max=10000)
        self.button = wx.Button(self, label='Update children')
        self.button.Bind(wx.EVT_BUTTON, self.OnEnter)

    def LayoutControls(self):
        hSizer = wx.BoxSizer(wx.HORIZONTAL)
        options = dict(flag=wx.ALIGN_CENTER_VERTICAL|wx.ALL, border=2)
        hSizer.Add(self.label, **options)
        hSizer.Add(self.childrenCountCtrl, 2, **options)
        hSizer.Add(self.button, **options)
        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add(self.notebook, 1, wx.EXPAND)
        sizer.Add(hSizer, 0, wx.EXPAND)
        self.SetSizer(sizer)

    def OnEnter(self, event):
        indicesList = self.notebook.GetIndicesOfSelectedItems()
        newChildrenCount = self.childrenCountCtrl.GetValue()
        for indices in indicesList:
            text = self.treemodel.GetText(indices)
            oldChildrenCount = self.treemodel.GetChildrenCount(indices)
#             self.log.write('%s %s now has %d children (was %d)'%(text, indices,
#                 newChildrenCount, oldChildrenCount))
            self.treemodel.SetChildrenCount(indices, newChildrenCount)
        self.notebook.RefreshItems()

class MainFrame(wx.Frame):

    #----------------------------------------------------------------------
    def __init__(self):
        """"""
        wx.Frame.__init__(self, None, title="Test")
        panel = TestPanel(self)
        self.Show()

if __name__ == '__main__':
    app = wx.App(False)
    frame = MainFrame()
    frame.Show()
    app.MainLoop() 
```

# javascript - 如果我在准备好的文档中调用函数，它将无法正常工作，但如果我在事件中调用它，它就可以正常工作

> ID：15856639
> 
> 赞同：-4
> 
> 时间：2013-04-06T22:14:37.557
> 
> 标签：javascript, jquery

我有一个 java 脚本函数`my_func()`，我想在页面加载时调用它。这是我会得到的奇怪行为：如果我在文档中调用该函数准备就绪，它将不起作用：

```
function my_func(){
//do something
}
$(document).ready(function(){
   my_func();   
}); 
```

但如果我在一个事件上调用它就可以了：

```
function my_func(){
//do something
}
$(document).ready(function(){
   $('#myId').click( function(){
       my_func();
    });   
}); 
```

有人知道吗？我怎样才能在文档中直接调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:02:22.613

您的问题是`dijit.form.TextBox`当 DOM 的其余部分已加载时尚未加载。您需要更改`my_func`代码以包含对以下内容的调用`require`：

```
function my_func() {
    require(['dijit/form/TextBox'], function(TextBox) {
        // ...
        var newBox = new TextBox();
        // ...
    });
} 
```

您需要为每个 Dojo 课程执行此操作。例如，如果您还需要`dijit.form.Button`：

```
function my_func() {
    require(['dijit/form/Button', 'dijit/form/TextBox'], function(Button, TextBox) {
        // ...
    });
} 
```

有点不幸的是，它是如此冗长，但这就是它的方式。[Dojo 的文档](http://dojotoolkit.org/reference-guide/1.8/loader/amd.html)`require`中提供了更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:19:16.303

问题是*没有*在里面放一个函数`$(document).ready()`，见下文：

工作小提琴：

[http://jsfiddle.net/whFNj/1/](http://jsfiddle.net/whFNj/1/)

```
$(document).ready(function(){
   my_func();   
});

function my_func(){
$("#black").css("background", "black");
} 
```

相反，可能是您的函数正在代码中的其他位置创建，并且在 dom 准备好时尚未初始化。

# json - json 喷雾镜头中 ExtraImplicits 所需的类文件丢失

> ID：15856644
> 
> 赞同：1
> 
> 时间：2013-04-06T22:16:00.020
> 
> 标签：json, scala, spray

我正在尝试编译一个与 json spray 相关的 scala 类。以下错误消息对我来说有点神秘：

```
error: class file needed by ExtraImplicits is missing.
reference type JsValue of package spray.json refers to nonexisting symbol.

  val tables = json.extract[String](tableLense) 
```

这是课堂上的scaladoc。 [http://jrudolph.github.io/json-lenses/latest/api/cc/spray/json/lenses/ExtraImplicits.html](http://jrudolph.github.io/json-lenses/latest/api/cc/spray/json/lenses/ExtraImplicits.html)

@Jrudolph：我已经添加了 Maven 依赖项，如下所示：

```
 <dependency>
        <groupId>net.virtual-void</groupId>
        <artifactId>json-lenses_2.9.2</artifactId>
        <version>0.5.2</version>
    </dependency>
    <dependency>
        <groupId>cc.spray.json</groupId>
        <artifactId>spray-json_2.9.1</artifactId>
        <version>1.0.1</version>
    </dependency> 
```

查看我自己的 mvn 依赖项，显然存在版本控制不匹配。问题是，mvn repo 中 cc.spray.json 的最后一个版本是上面那个：但是项目下载站点上列出了许多较新的版本。我将不得不在 pom.xml 中使用系统路径（讨厌）或设置一个私人仓库（讨厌）。

# vb.net - 如何在 vb.net 中偏移 String()？

> ID：15856646
> 
> 赞同：0
> 
> 时间：2013-04-06T22:16:15.370
> 
> 标签：vb.net, string, for-loop, foreach, offset

我在要遍历的目录中有一系列文件，但我需要能够从列表中的特定文件开始，它不一定是 string() 中的第一项。如果我有 String() {"a","b","c","d"} 并且我想遍历每一个但从 c、b 或 d 而不是 a 开始，我该如何完成使用 For Each item in .... 注意：但是解决方案必须能够处理列表中不同数量的项目。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:23:54.653

你不能这样做。`For Each`对数组进行 -ing 将始终从第一项到最后一项进行枚举。

当然，您可以自己实现此行为。

```
 Dim myArray As String() = {"a", "b", "c", "d", "e"}
    Dim offset As Integer = 2

    For i As Integer = offset To UBound(myArray)
        Dim item As String = myArray(i)
        ' Do things
        Console.WriteLine(item)
    Next
    If Not offset = 0 Then
        For i As Integer = 0 To offset - 1
            Dim item As String = myArray(i)
            ' Do things
            Console.WriteLine(item)
        Next
    End If

    Console.ReadLine() 
```

将通过 (offset, offset+1, offset+2.... offset+(n-offset-1), 0, 1, 2 ... offset-1)。可能是一些错误，我的VB生锈了。

# android - 我需要购买安卓手机才能将我的 iOS 应用程序移植到安卓系统吗？

> ID：15856647
> 
> 赞同：-2
> 
> 时间：2013-04-06T22:16:32.973
> 
> 标签：android, performance, android-emulator

我通常在我的 iPhone 上开发 OpenGL ES 2D 游戏，因为它们是用 C++ 编写的（很少有 iphone 特定的 Objective-c），所以移植到 android 应该很容易。

我的问题是：我真的需要一个安卓设备来**移植**和现有游戏吗？或者android模拟器足以完成这项任务吗？

我在某处读到，借助新的 GPU 硬件加速，模拟器的速度得到了显着提升。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:19:50.720

你不需要买手机！模拟器可以很好地完成工作！这将不是您将代码移植到 Android 的主要问题。是的，英特尔提供了 GPU 加速模拟器，[请参见此处](http://software.intel.com/en-us/android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:44:37.457

模拟器确实会帮助您将代码移植到 android。[通过新的更新，它甚至可以通过将 openGL ES 2 代码发送到底层操作系统驱动程序来运行它](http://android-developers.blogspot.ca/2012/04/faster-emulator-with-better-hardware.html)。主要问题是android相当分散。您至少需要一台真实设备才能确保它真正以正确的方式运行，并且至少拥有几台设备要好得多。

例如，我通常使用我的手机、平板电脑，并且我有 2 个朋友使用不同的手机来测试我的应用程序。应用程序在其中 3 个上运行良好，但在最后一个上显示故障或其他问题并不罕见。它可以是 android 版本、驱动程序版本、驱动程序特定的错误等。

总之，您可以在移植代码时只使用模拟器，但最终需要一两台设备来测试它，[您会发现这些还不够](http://www.andengine.org/forums/announces/important-looking-for-exotic-devices-t7185.html)。如果您已经为您的 IOS 应用程序每年花费 99 美元，您可能可以花费 99 美元购买至少 2 部二手手机用作测试。我希望您的应用程序能为您带来更多收益 ;) 顺便说一下，一定要使用[最新的 NDK](http://developer.android.com/tools/sdk/ndk/index.html)，他们总是在新版本中修复错误

# c++ - 如何将 istringstream 对象转换为字符串和字符数组？

> ID：15856650
> 
> 赞同：3
> 
> 时间：2013-04-06T22:16:52.487
> 
> 标签：c++, stream, istringstream

我有这个对象：

```
istringstream ob_stream; 
```

我需要将此对象转换为字符串和字符数组才能工作。怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T22:18:26.133

对于一个`std::string`：

`ob_stream.str();`

对于`char`数组：

`ob_stream.str().c_str();`

# xpath - 在 xml 文档中按名称查找所有子节点

> ID：15856655
> 
> 赞同：-1
> 
> 时间：2013-04-06T22:17:38.280
> 
> 标签：xpath

我正在寻找返回具有给定名称和属性的所有节点的 xpath 表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:18:43.190

使用以下表达式：

```
//Element_Name[@Attribute_Name] 
```

# ruby-on-rails - 在 Ruby on rails 中创建新模型对象时遇到问题 - 参数是一个符号？

> ID：15856656
> 
> 赞同：0
> 
> 时间：2013-04-06T22:17:46.760
> 
> 标签：ruby-on-rails

我收到一个奇怪的错误，我不明白。似乎当我尝试创建一个新的模型对象时，正在传递的有关参数的某些东西正在作为符号，我无法对它们做任何事情。

我得到的错误是：

```
can't convert Symbol into Integer 
```

控制器动作是：

```
def create
user_info = :params[:user]
if !user_info.value? ""
    if user_info[:password] == user_info[:password2] and user_info[:email] == user_info[:email2]
        user_info.delete("password2")
        user_info.delete("email2")
        @user = User.create!(user_info)
        @user = User.new(user_info)

        respond_to do |format|
            if @user.save
                format.html  { redirect_to(@user, :notice => 'User was successfully created.') }
            else
                format.html  { render :action => "new" }
            end
        end
end
flash[:warning] = "Please try again"
redirect_to home_index_path

  end 
```

我正在尝试使用“”提交属性，但出现此错误。当我删除指示的问题行`user_info = :params[:user]`并更改它的所有内容时`:params[:user]` ，仍然抛出错误并将下一行指示为问题。

谁能明白为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:19:54.847

转动

```
user_info = :params[:user] 
```

到：

```
user_info = params[:user] 
```

# asp.net-mvc - ASPNET MVC Web 应用程序的体系结构

> ID：15856660
> 
> 赞同：0
> 
> 时间：2013-04-06T22:18:21.693
> 
> 标签：asp.net-mvc, asp.net-web-api

我计划实现一个 ASPNET 应用程序来学习 MVC 的东西，我正在考虑使用以下架构：ASPNET MVC 4 WebApplication 在前端使用 knockout.js 并在服务器端使用 ASPNET WebApi Controller 方法进行设置/通过实体框架获取 SqlServer 数据库数据。通过这种方式，我也可以从（未来的）移动应用程序调用 ASPNET WebApi URL。这种架构有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T20:45:27.403

请注意，尝试使用相同的 Web API 来驱动 javascript 客户端和移动客户端是一个非常具有挑战性的提议。在为 javascript 客户端构建 Web API 时，客户端和服务器之间存在大量“带外”耦合是很常见的。每当您看到交付的 api`application/json`并且客户端必须提前知道该 json 文档的内容时，您都可以告诉这一点。

这种方法适用于几乎可以同时更新 Web API 和网站的网站。但是，对于需要在部署之前将更新提交到应用商店以供批准的移动应用程序，要做到这一点并不容易。

此问题的一个常见症状是开发人员被迫创建 API 的新版本，以便现有的移动客户端可以继续工作，同时针对全新的 API 推出新的移动客户端。当您是 API 的唯一使用者时，定期对 API 进行版本控制并不是一个大问题。当第三方 API 消费者参与其中时，它开始变得令人讨厌。

就个人而言，除非您看到构建 SPA 样式应用程序的重大战略优势，否则我不会费心创建 API 来驱动您的网站。

我建议您清楚地了解为什么要使用 API 来驱动您的网站，而不是仅仅遵循当前的“时尚”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-23T05:01:58.250

**Asp.Net MVC 框架简史**

ASP.Net MVC 是建立在 Microsoft .Net Framework 之上的新框架，用于开发 Web 应用程序。该框架实现了 MVC 模式，有助于提供代码分离并为测试驱动开发 (TDD) 提供更好的支持。Asp.Net MVC 是一个轻量级且高度可测试的开源框架，用于构建高度可扩展且设计良好的 Web 应用程序。以下是 ASP.NET MVC Framework 的已发布版本历史列表及其功能。

**Asp.Net MVC1**

于 2009 年 3 月 13 日发布

在 .Net 3.5 和 Visual Studio 2008 和 Visual Studio 2008 SP1 上运行
带有 WebForm 引擎
Html 助手的模式架构
Ajax 助手
路由
单元测试

**Asp.Net MVC2**

2010 年 3 月 10 日发布

在 .Net 3.5、4.0 和 Visual Studio 2008 上运行& 2010
强类型 HTML 助手意味着基于 lambda 表达式的 Html 助手
模板化助手
支持数据注释 属性
客户端验证
UI 助手，带有自动脚手架和可定制模板
基于属性的客户端和服务器上的模型验证
覆盖 HTTP 方法动词，包括 GET、PUT 、发布和删除
将大型应用程序划分为模块的区域
异步控制器

**Asp.Net MVC3**

于 2011 年 1 月 13 日发布

在 .Net 4.0 和 Visual Studio 2010 上运行
Razor 视图引擎
改进了对数据注释的支持
远程验证
比较属性
无会话控制器
子动作输出 缓存
依赖解析器
实体框架 代码优先支持
部分页面输出缓存
ViewBag 动态属性，用于将数据从控制器传递到视图
全局操作过滤器
通过不显眼的 JavaScript、jQuery 验证和 JSON 绑定提供更好的 JavaScript 支持
使用 NuGet 在整个平台上交付软件和管理依赖项
对 Razor 到 Visual Studio 的良好 Intellisense 支持

**Asp.Net MVC4**

于 2012 年 8 月 15 日发布

在 .Net 4.0、4.5 和 Visual Studio 2010SP1 和 Visual Studio 2012 上运行
ASP.NET Web API
对默认项目模板的增强
使用 jQuery Mobile
显示模式的移动项目模板 异步控制器 捆绑
的任务支持 支持 Windows Azure SDK **Asp.Net MVC5**
于 2013 年 10 月 17 日发布 在 .Net 4.5、4.5.1 和 Visual Studio 2013 上运行 一个 Asp.Net Asp.Net Identity ASP.NET Scaffolding 身份验证过滤器 - 在授权之前运行ASP.NET MVC 管道中的过滤器 MVC 模板中的引导 程序 ASP.NET Web API2

 **致谢：Shailendra Chauhan 先生**

# coffeescript - 动态扩展 CoffeeScript 类

> ID：15856666
> 
> 赞同：2
> 
> 时间：2013-04-06T22:18:52.643
> 
> 标签：coffeescript

我知道可以像这样扩展 CoffeeScript 类：

```
Dog::bark = ->
  console.log("bark") 
```

我希望能够动态地做到这一点。例如，我想做这样的事情：

```
sounds = [ "bark", "woof", "grrr", "ruff" ] 

for sound in sounds
  Dog::[sound] = ->
    console.log(sound) 
```

等效的 JavaScript 将是：

```
var sounds = [ "bark", "woof", "grrr", "ruff" ];

for (var i = 0; i < sounds.length; i++) 
{
  var sound = sounds[i];

  Dog.prototype[sound] = function() {
    console.log(sound);
  };
} 
```

如何使用 CoffeeScript 做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:52:42.873

您几乎拥有它，您只需要在构建新方法时将 a 扔进`do`去以强制`sound`进行评估：

```
sounds = [ "bark", "woof", "grrr", "ruff" ] 
for sound in sounds
    do (sound) ->
        Dog::[sound] = -> console.log(sound) 
```

如果你不包括`do`你最终会得到所有四种方法都在做`console.log('ruff')`. 添加`do`将`for`循环的主体转换为自执行函数。来自[精美手册](http://coffeescript.org/#loops)（本节底部）：

> 当使用 JavaScript 循环生成函数时，通常会插入一个闭包包装器，以确保循环变量是封闭的，并且所有生成的函数不只是共享最终值。CoffeeScript 提供了`do`关键字，它立即调用传递的函数，转发任何参数。

演示：http: [//jsfiddle.net/ambiguous/YAqJu/](http://jsfiddle.net/ambiguous/YAqJu/)

# python - 在 Python 中，如何在不翻译单个字符的情况下进行多重替换？

> ID：15856669
> 
> 赞同：1
> 
> 时间：2013-04-06T22:19:17.073
> 
> 标签：python, python-2.7

我正在尝试使用字典翻译多个字符串；但是，它总是替换每个单独的字符，而且我不知道如何调整我的代码。

我的字典：

```
{"You're": "I'm", "We've": "you've", 'am': 'are', "We'll": "you'll", 'im': "you're",
"we'd": "you'd", 'our': 'your', 'You': 'I', 'Was': 'were', 'your': 'my', "you're":
"I'm", 'We': 'you', "I've": "you've", "we've": "you've", 'This': 'that', "we're":
"you're", 'you': 'I', 'was': 'were', 'me': 'you', 'we': 'you', 'I': 'you', 'c': 'see',
"I'd": "you'd", 'Were': 'was', "I'm": "you're", 'My': 'your', "I'll": "you'll", "we'll":
"you'll", 'this': 'that', 'Am': 'are', 'ur': "I'm", 'i': 'you', 'u': 'me', "We'd":
"you'd", 'were': 'was', 'Our': 'your', "i'm": "you're", 'my': 'your', 'Your': 'my',
"We're": "you're"} 
```

我的代码：

```
def replace_all(text, dic):
    for i, j in dic.iteritems():
        text = text.replace(i, j)
    return text 
```

稍后由以下人员调用：

```
message = replace_all(message, dictionary) 
```

是否可以替换字符串中的整个单词？我对python很陌生，所以任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:28:03.703

[如果您的替代品没有重叠， Blender 的答案](https://stackoverflow.com/a/15856698)就可以正常工作，但是如果您有这样的替代品（您可以这样做）：

```
{'I': 'you', 'you': 'I'} 
```

然后之前的替换再次被替换，这是不可取的。他的答案的一个小扩展解决了这个问题：

```
import re

def replace_all(text, dic):
    words = sorted(dic, key=len, reverse=True)
    return re.sub('\\b(' + '|'.join(map(re.escape, words)) + ')\\b',
                  lambda m: dic[m.group(0)], text) 
```

这首先创建一个如下所示的正则表达式：

```
\b(you|I)\b 
```

如[模块文档中](http://docs.python.org/2/library/re.html#regular-expression-syntax)[所述`re`](http://docs.python.org/2/library/re.html#regular-expression-syntax)，`\b`代表“单词边界” ¹。因此，它只会匹配单词边界的内部部分。`|`表示正则表达式括号内的多项选择。有必要对长度选项进行反向排序，因为 Python 将在第一个匹配时立即停止；如果`I`是 before ，比如说 ，`I'm`那么它永远不会匹配`I'm`，因为`I`总是匹配 before `I'm`。

因此，我们将该正则表达式传递给[`re.sub`](http://docs.python.org/2/library/re.html#re.sub)，它不仅可以作为替换字符串，还可以作为*函数*，这允许更复杂的逻辑。我们的函数在字典中查找我们匹配的文本，并返回与该键关联的值作为要替换的文本。

¹不幸的是，当涉及到括号时，“单词”的定义并不明智，因此：

```
>>> replace_all("I'm not convinced.", {"I": "you"})
"you'm not convinced." 
```

幸运的是，因为我们对它进行了排序，最长的匹配总是首先发生：

```
>>> replace_all("I'm not convinced.", {"I": "you", "I'm": "you're"})
"you're not convinced." 
```

# arrays - VBA Arrays：根据条件添加元素

> ID：15856671
> 
> 赞同：0
> 
> 时间：2013-04-06T22:19:50.320
> 
> 标签：arrays, loops, excel, vba

我想在数组中收集循环的结果。理想情况下，我会保留第一个循环的结果并将其与第二个循环的结果进行比较。如果第二个循环的结果更好，那么我想保留第二个，将其与第三个进行比较，依此类推。关于如何做到这一点的任何想法？这是我到目前为止的摘录：

```
For Each ccell In pcrange
If ccell.Cells.Value = 0 Then
    For Each agecell In agerange
    If agecell.Cells.Value < 0.5 And agecell.Offset(0, 5).Value > 1 Then
    tmpyr = agecell.Offset(0, 1)
    srchyr = ccell.Offset(0, -6)
    tmpval = agecell.Offset(0, 2)
    tmpdiff = Abs(tmpyr - srchyr)
    arrindx = arrindx + 1

    End If

    tmparray = Array(tmpdiff, tmpval) 'need redim to hold more than 2 values? why are subsequent elements empty?
    ReDim Preserve tmparray(2 * arrindx - 1)
   'minarr = IIf(tmparray(2) > tmparray(0), tmparray(1), tmparray(3)); want to extract corresponding tmpval from array onto sheet if tmpdiff is the min of the entire loop; change to store better result each time
    Next 
End If
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:00:53.463

定义你的`tmparray`应该是这样的：

```
tmparray(UBound(tmparray, 1)) = Array(tmpdiff, tmpval) 'add values to last place
ReDim Preserve tmparray(UBound(tmparry, 1) + 1) 'add another place to the array 
```

如果放在以下位置之后，则应该找到新的最小值`ReDim`：

```
If UBound(tmparray, 1) <= 2 then 
    minarr = tmpval
ElseIf tmparray(UBound(tmparray, 1) - 1, 0) < tmparray(UBound(tmparray, 1) - 2, 0) then 
    minarr = tmparray(UBound(tmparray, 1) - 1, 1)
end if 
```

# android - 在 Android 版 Google Maps v2 中自定义标记上的可点击区域

> ID：15856677
> 
> 赞同：9
> 
> 时间：2013-04-06T22:20:22.923
> 
> 标签：android, google-maps, bitmap, google-maps-markers, google-maps-api-2

我目前正在使用适用于 Android 的 Google Maps v2 API 并进行一些自定义叠加。对于初学者，我创建了一个比标准“标记”大得多的自定义位图。

我知道使用较旧的 Maps API，您可以创建一个自定义覆盖项来控制可点击区域，但在较新的 Maps API 上也必须可以。我只是希望我的自定义标记的可点击区域与我设置的自定义位图图标相同。我已经阅读了示例和文档，但找不到任何东西。任何帮助，将不胜感激。

谢谢

（这是我正在阅读的文档）

```
https://developers.google.com/maps/documentation/android/marker#customize_a_marker 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:55:20.863

确认的。库中的错误。

我在这里创建了一个错误报告：[http ://code.google.com/p/gmaps-api-issues/issues/detail?id=5368](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5368)

**编辑：**

最近在库中已修复此问题，现在应该可以正常工作。

# java - 创建“noname”类实例

> ID：15856679
> 
> 赞同：0
> 
> 时间：2013-04-06T22:20:55.423
> 
> 标签：java, class, instance

所以这是我的问题。我知道创建类的新实例的最简单方法之一是：

```
 ClassName instanceName = new ClassName(); 
    instanceName.methodName(); //executing the method 
```

我面临的问题是，我希望自动创建实例，例如当我单击按钮时会创建一个新实例，我该怎么做？我是否应该使用迭代变量创建一些自动化方法来创建新实例，例如 instance1、instance2 等？我也尝试做这样的事情，已经通过创建一个新实例来执行该方法：

```
 (new ClassName()).methodNAme(); 
```

但是我无法访问这个新实例，因为我不知道如何调用/传递它，因为它没有名称。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:38:39.193

可以重新分配变量。变量是一个名称，它可以在运行时指向不同的实例。因此，如果您只需要最近的实例，则只需要一个变量。

```
ClassName instanceName;

//Create a new instance
instanceName = new ClassName(); 
instanceName.methodName();

//Create a new instance
instanceName = new ClassName(); 
instanceName.methodName(); //Will now use the second instance 
```

# coldfusion - Coldfusion：存储路线和其他变量以供应用

> ID：15856681
> 
> 赞同：0
> 
> 时间：2013-04-06T22:21:01.997
> 
> 标签：coldfusion, coldfusion-9

我想在 application.cfc 或其他可能正在使用它们的冷融合文件中保留一堆变量以供访问。

我有一些路线信息，根据输入的 url，某些参数是预先确定的，我希望这些信息易于访问。

此外，根据我正在渲染的视图/模板，我有一堆我需要的变量，我只想在需要时提取它们。

有没有一种格式可以让这个相对容易使用和访问，而没有额外的开销？也许是 json、xml 或文本文件？还是最好只创建一个 cfm 或 cfc 页面来保存所有变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:39:01.770

ColdFusion 结构非常通用，并且在 ColdFusion 9+ 中隐式表达。JSON、XML、Text 等其他格式都需要解析才能引入 ColdFusion。许多应用程序使用 INI 文件，ColdFusion 具有用于解析的内置函数。

# javascript - 用javascript读取txt文件

> ID：15856682
> 
> 赞同：1
> 
> 时间：2013-04-06T22:21:11.973
> 
> 标签：javascript, jquery

我正在使用此代码来读取文件。Chrome 和 FF 一切正常，但 IE 不更新文件中的数据……似乎是从缓存中读取？？？有什么建议么？谢谢

```
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.open("GET","YOUR_FILE.txt",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseText; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:25:08.027

您可以尝试在文件名末尾添加动态字符串参数以防止缓存。

试试这个：

```
var time = new Date().getTime();
xmlhttp.open("GET", "YOUR_FILE.txt?time=" + time, false); 
```

查看 Javascript 的[`Date.getTime()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getTime)文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:35:28.227

请参阅[http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537505(v=vs.85).aspx)
Microsoft 建议的代码略有不同：

```
var xmlHttp = null;
if (window.XMLHttpRequest) {
  // If IE7, Mozilla, Safari, and so on: Use native object.
  xmlHttp = new XMLHttpRequest();
}
else
{
  if (window.ActiveXObject) {
     // ...otherwise, use the ActiveX control for IE5.x and IE6.
     xmlHttp = new ActiveXObject('MSXML2.XMLHTTP.3.0');
  }
} 
```

# css - CSS 仅影响站点范围内的一个字符

> ID：15856683
> 
> 赞同：-2
> 
> 时间：2013-04-06T22:21:20.647
> 
> 标签：css, wordpress, character

我试图让一个角色在我的网站（Wordpress）中具有某种风格。我需要一些代码，例如：

```
"T" {
   color: red;
} 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:23:24.420

不，仅使用 CSS 是无法做到这一点的。

另一种方法是将所有输出带有标签的文本包装`span`成一个类，`<span class="T">T</span>`并在 CSS 中正常定义该类。

```
.T {
    color: red;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:24:01.503

`"T"`不是有效的 CSS 选择器，因此您的示例将不起作用。但是您可以使用[`:first-letter`伪选择器](http://www.w3.org/TR/css3-selectors/#first-letter)以不同的方式设置段落的第一个字母：

```
p:first-letter { 
  color: red;
} 
```

# css - Css：鼠标悬停时导航移动

> ID：15856686
> 
> 赞同：0
> 
> 时间：2013-04-06T22:21:36.200
> 
> 标签：css

我在下面创建了一个 css 导航，我怎样才能防止它在鼠标悬停时移动？

我也包含了图标![在此处输入图像描述](https://i.stack.imgur.com/JgYN3.png)

这是我下面的代码

```
#nav { height: 25px; 
    padding: 22px 0 2px 53px;
    font-weight: bold;
    border-top: 1px #5B92B7 solid; 
    margin-bottom: 20px;
                                background: #477da9; /* Old browsers */
                                background: -moz-linear-gradient(top,  #477da9 0%, #2c6c9a 25%, #245e8e 50%, #1a5385 75%, #023667 100%); /* FF3.6+ */
                                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#477da9), color-stop(25%,#2c6c9a), color-stop(50%,#245e8e), color-stop(75%,#1a5385), color-stop(100%,#023667)); /* Chrome,Safari4+ */
                                background: -webkit-linear-gradient(top,  #477da9 0%,#2c6c9a 25%,#245e8e 50%,#1a5385 75%,#023667 100%); /* Chrome10+,Safari5.1+ */
                                background: -o-linear-gradient(top,  #477da9 0%,#2c6c9a 25%,#245e8e 50%,#1a5385 75%,#023667 100%); /* Opera 11.10+ */
                                background: -ms-linear-gradient(top,  #477da9 0%,#2c6c9a 25%,#245e8e 50%,#1a5385 75%,#023667 100%); /* IE10+ */
                                background: linear-gradient(top,  #477da9 0%,#2c6c9a 25%,#245e8e 50%,#1a5385 75%,#023667 100%); /* W3C */
                                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#477da9', endColorstr='#023667',GradientType=0 ); /* IE6-9 */ z-index: 1; 

        margin-left:0;      
          margin-top: -17px;
          font-size:12px
}

#nav li {
    list-style: none;
    display: inline;
    margin: 0px;
    padding: 0 0 26px 0;

}

#nav li a {
    font-family: Arial;
    font-style:normal;
    text-decoration: none;
    color: #789AB8;

 padding: 0 10px 2px 36px;
   background: url("../img/icon_nav_system.png") no-repeat scroll 17px -13px transparent;

}

#nav li a:hover  {

color: #fff;
font-weight: bold;
}

#nav li:hover {
    background: url("../img/icon_nav_system.png") no-repeat scroll 17px 1px transparent;
    margin: 0;
    color: #fff;
    padding: 1px;
}

.on a:link, .on a:visited,.on a:hover
{

color: #fff;    
font-weight:bold;
}

#nav li.on a {
    color: #fff;    
}
#nav li.on {

  margin: 0;
   background: url("../img/icon_nav_system.png") no-repeat scroll 17px 1px transparent;
   padding: 1px;
} 
```

HTML

```
 <div class="nav-b" >
                <ul id="nav">
                    <li class="on"><a href="#" class="express"> Link 1</a></li>
                    <li><a href="#" class="link2">Link 2</a></li>
                    <li><a href="#" class="link3"> Link 3</a></li>
                </ul>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:28:59.663

`padding:1px;`从这个类中删除`#nav li:hover`一个演示[http://jsfiddle.net/kevinPHPkevin/Qe2Fm/](http://jsfiddle.net/kevinPHPkevin/Qe2Fm/)

# jquery - 如何更改 ENTER 的默认绑定以在 Bootstrap 模板中提交登录？

> ID：15856687
> 
> 赞同：0
> 
> 时间：2013-04-06T22:21:41.527
> 
> 标签：jquery, twitter-bootstrap

我使用模板：`http://twitter.github.io/bootstrap/examples/hero.html`. 我有`nav-bar`用于快速搜索的附加输入。它应该由 keyup ENTER 触发。尝试使用 jQuery 绑定 ENTER 键：

```
$('#search-input').keyup(function(event){

        if (event.keyCode == 13 ) {

            getSearchStr();

        } 
```

没用。似乎它已经为`Sign In`按钮定义了。如何重新定义它？

* * *

更新：

```
$('#search-form').submit(function(e) {

    alert("Working....");

}); 
```

和

```
<form name="search-form" id="search-form" action="#" method="get" onsubmit="return getSearchStr()">
    <input class="navbar-search" id="search-input" type="text" name="search-txt" placeholder="Search keywords...">
</form> 
```

* * *

更新2：

只要 input#search-input 包装在 form#search-form 中，我猜如果按下回车键就会发布表单数据。如果表单具有“onsubmit”，则正在调用适当的 JS 函数。如果 func 返回 true，则提交表单，如果返回 false，则不提交。我对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:23:56.370

如果您真的想在提交表单时监听，请不要绑定到键或单击事件。如果您想在提交表单时监听，请执行以下操作：

```
$('#login_form').submit(function(e) {
    // ...
}); 
```

^(（假设表格有一个`id`of `login_form`）)

# eclipse - 关闭所有选项卡的快捷方式，除了在 Eclipse 中固定的一个

> ID：15856691
> 
> 赞同：17
> 
> 时间：2013-04-06T22:22:09.620
> 
> 标签：eclipse, keyboard-shortcuts

我想知道 Eclipse 是否有任何快捷方式来关闭除固定选项卡以外的所有选项卡。我每天都使用`CTRL`++`Shift`快捷`W`方式来关闭当前选项卡，但无论它们是否固定，它都会关闭所有选项卡。Eclipse 是否对此快捷方式进行了任何设置以仅关闭未固定的选项卡，或者是否存在其他快捷方式来实现此类结果？

编辑：我忘了提到我使用 Eclipse Indigo。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-09-14T09:33:24.627

按`CTRL`+ `Shift`+ `E`，您将获得`Switch to Editor`如下所示的视图。

![切换到编辑器视图](https://i.stack.imgur.com/vNY2z.png)

现在使用键`Up`或`Down`选择要保持打开状态的选项卡，然后按`Tab`两次键以使按钮获得`Invert Selection`焦点。然后按`Enter`和 两次`Tab`键。再次按该`Enter`键以关闭编辑器中的所有其他选项卡。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-08T13:38:06.940

如果您右键单击您的窗口，有一个选项“关闭其他人”它应该适合您，

如果您想要一个快捷方式，创建一个简单，请转到 >Window > Preferences > General > Keys ，搜索“关闭其他人" 然后在 Binding 字段中输入您想要的任何快捷键，然后在 when 下拉列表中；选择“在 Windows 中”，然后应用，确定，完成。

# android - 带有滑动菜单的偏好活动

> ID：15856693
> 
> 赞同：2
> 
> 时间：2013-04-06T22:22:21.393
> 
> 标签：android, preferenceactivity, slidingmenu

我正在尝试将偏好活动放在滑动菜单的后面内容中。

这是我的 main_menu.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:background="#202222"
tools:context=".MainActivity" >

<PreferenceScreen
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

<PreferenceCategory android:title="@string/general" >
    <Preference android:title="@string/news" />
    <Preference android:title="@string/sport" />
    <Preference android:title="@string/business" />
    <Preference android:title="@string/economy" />
</PreferenceCategory>
<PreferenceCategory android:title="@string/news" >
    <Preference android:title="@string/international" />
    <Preference android:title="@string/national"/>
    <Preference android:title="@string/local" />
</PreferenceCategory>

</PreferenceScreen> 
```

这就是我在 MainActivity.java 中所做的

```
public class MainActivity extends SlidingActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    setBehindContentView(R.layout.main_menu);

    getSlidingMenu().setBehindOffset(120);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

当我运行应用程序时，它崩溃并显示“充气失败。android.view.InflateException：二进制 XML 文件第 12 行：错误充气类 PreferenceScreen

我也有这个例外：com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup in main_menu.xml

我想做这样的事情：[图片示例](http://cyrilmottier.com/media/2012/05/the-making-of-prixing-fly-in-app-menu-part-1/app_menu_large.png)

# c# - 动态下拉列表问题

> ID：15856695
> 
> 赞同：0
> 
> 时间：2013-04-06T22:22:25.817
> 
> 标签：c#, asp.net, sql, drop-down-menu

我正在尝试从我的数据库中获取值以填充下拉列表。

我已经调试了以下函数，它带来了预期的结果，但只将最后一个存储在返回值中：

```
public static string GetAllPlacements(string placementLocation)
    {
        string returnVal = null;
        using (SqlConnection sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["websiteContent"].ConnectionString))
        {
            sqlCon.Open();
            string SQL = "SELECT DISTINCT " + placementLocation + " FROM Placements";
            using (var CMD = new SqlCommand(SQL, sqlCon))
            {
                using (var DR = CMD.ExecuteReader())
                {
                    while (DR.Read())
                    {
                        returnVal = DR[selectField].ToString();
                    }
                }
            }
            sqlCon.Close();
        }
        return returnVal;
    } 
```

例如，有两个结果，伦敦和巴黎，但“returnVal”只存储巴黎。

我将此数据绑定到下拉列表：

```
private void refreshLocation()
{
    ddlLocation.DataSource = Placements.GetAllPlacements("Placement_Location");
    ddlLocation.DataBind();

    ddlLocation.Items.Insert(0, new ListItem("-- Please Select --", "0"));
} 
```

在下拉列表中，选项 Paris 如下所示：

```
P
A
R
I
S 
```

而不是这个：

```
London
Paris 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:26:05.840

您必须更改 GetAllPlacements 以返回例如字符串列表：

```
public static List<string> GetAllPlacements(string placementLocation)
    {
        string returnVal = new List<string>;
        using (SqlConnection sqlCon = new SqlConnection(ConfigurationManager.ConnectionStrings["websiteContent"].ConnectionString))
        {
            sqlCon.Open();
            string SQL = "SELECT DISTINCT " + placementLocation + " FROM Placements";
            using (var CMD = new SqlCommand(SQL, sqlCon))
            {
                using (var DR = CMD.ExecuteReader())
                {
                    while (DR.Read())
                    {
                        returnVal.Add(DR[selectField].ToString());
                    }
                }
            }
            sqlCon.Close();
        }
        return returnVal;
    } 
```

# wordpress - “嵌入您自己的 JavaScript”未保存在论文主题中

> ID：15856697
> 
> 赞同：0
> 
> 时间：2013-04-06T22:22:31.807
> 
> 标签：wordpress, wordpress-thesis-theme

我通常使用 Symfony2 进行自定义 webapps，但我必须集成到 WordPress 安装中。

我似乎无法`Embed Your Own JavaScript`保存输入框。我已经添加了脚本，点击更新一千次。没有骰子。

我在单击更新时查看了 Chrome 上的网络选项卡，它正在发送 POST 变量中的信息`thesis_javascript_scripts`。我还搜索了数据库以查找与之相关的任何内容，但一无所获。

这些信息应该存储在哪里？为什么它没有被保存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:55:32.490

没关系。

它在`wp_postmeta`表格中，带有适当`post_id`的`meta_key`：thesis_javascript_scripts

当我`meta_value`在 phpMyAdmin 中更新时，它开始保存在 Wordpress 中。很奇怪。

# javascript - 如何在 contenteditable=true 的情况下使 div 自动增长

> ID：15856700
> 
> 赞同：8
> 
> 时间：2013-04-06T22:22:54.457
> 
> 标签：javascript, jquery

当我在其中输入更多文本时，如何（使用 jquery 或 javascript）进行`<div contenteditable></div>`自动增长？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-11T08:33:36.130

避免给出`height`样式属性，自动调整大小应该自动发生。如果必须给出高度，请改用该`min-height`属性：

```
<div contenteditable="true" 
     style="background: #ddd; border: 3px solid #ccc; min-height: 60px">
</div> 
```

在行动中看到它：[FIDDLE](http://jsfiddle.net/T3NVJ/)

# entity-framework-5 - 如果它改变代码的行为，添加一个继承自某事物的类是否违反了可靠的原则？

> ID：15856703
> 
> 赞同：2
> 
> 时间：2013-04-06T22:23:22.357
> 
> 标签：entity-framework-5, entity-framework-migrations, solid-principles

我努力使我的代码能够使用不同的连接字符串运行代码优先 EF 迁移，并最终让它工作。

[我对这个问题](https://stackoverflow.com/questions/15504465/entityframework-code-first-custom-connection-string-and-migrations)的回答中概述了我使用的方法

困扰我的是，为了能够使用不同的连接字符串运行相同的代码，我必须

1）诉诸全局设置来存储连接字符串

2) 引入一个类，其存在导致代码行为不同。

这与我习惯的工作方式截然不同。这里使用的技术是否违反了坚实的原则？有没有其他不违反原则的做法？

[更新：这里](https://stackoverflow.com/questions/15504465/entityframework-code-first-custom-connection-string-and-migrations/15847388?noredirect=1#comment22676043_15847388)概述了一种不同的方法-可能更明智

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T01:16:52.510

> （所有这些都与这里的内容有关 [Database.SetInitializer 的实际工作原理是什么？（EF 代码首先创建数据库并使用多个连接字符串应用迁移）](https://stackoverflow.com/questions/15830030/how-does-database-setinitializer-actually-work-ef-code-first-create-database-a) - 但正在进入完全不同的方向 - 所以我认为这样做是有意义的分开。在此之前阅读那里）

**更新：**

这里变得越来越有趣了。**我确实设法重现了您实际面临的问题**。以下是我认为正在发生的事情的简短细分：

首先，这很“愉快”：

```
Database.SetInitializer(new CreateAndMigrateDatabaseInitializer<MyContext, MyProject.Migrations.Configuration>());
for (var flip = false; true; flip = !flip)
{
    using (var db = new MyContext(flip ? "Name=MyContext" : "Name=OtherContext"))
    {
        // insert some records...
        db.SaveChanges();
    }
} 
```

[（我使用了另一篇文章](https://stackoverflow.com/questions/15796115/how-to-create-initializer-to-create-and-migrate-mysql-database/15796416#15796416)中的自定义初始化程序，它一起控制迁移/创建过程）

在没有初始化程序的情况下工作得很好。一旦我打开它，我遇到了一些奇怪的问题。

我删除了 Db-s（每个连接两个）。我希望要么不工作，要么创建一个数据库，然后在下一次传递中创建另一个（就像它所做的那样，没有迁移，只是“创建”初始化程序）。

> 发生了什么事，令我惊讶的是 - 它实际上是在第一遍创建了两个数据库吗？

然后，作为一个好奇的人:)，我在`MyContext`ctor 上设置了断点，并通过迁移器/初始化器进行了调试。再次为空/无 db-s 等。

它在我的通话中创建了第一个实例`flip`。然后在第一次访问“模型”时，它调用了初始化程序。Migrator 接管（没有 db-s）。在此期间，`migrator.Update();`它实际上构造了`MyContext`（我猜测是通过配置中的通用参数） - 并调用“默认”空 ctor。默认情况下，它具有“其他连接/名称” - 并且也创建了其他 Db。

所以，我认为这解释了你正在经历的事情。以及为什么您必须创建“工厂”来支持上下文创建。这似乎是唯一的方法。并设置一些“AppDomain”范围的“连接字符串”（实际上您确实发现了它），它不会被空的 ctor 调用“覆盖”。

**我看到的解决方案是**——你只需要通过工厂运行所有东西——并在那里“翻转”连接（不需要静态连接，只要你的工厂是单例的。

> 对于官方初始化程序，这实际上根本不起作用（至少我的测试） `MigrateDatabaseToLatestVersion`- 以及我使用另一个初始化程序的原因。

# java - Javafx 教程 4 将无法编译

> ID：15856704
> 
> 赞同：0
> 
> 时间：2013-04-06T22:23:23.943
> 
> 标签：java, eclipse, exception, javafx, classnotfoundexception

[这是教程链接](http://docs.oracle.com/javafx/2/get_started/fxml_tutorial.htm)

我一直在关注使用 e(fx)clipse 的 javafx 教程，但我无法启动这个教程。我的代码与他们的代码完全相同，如果我使用 Netbeans，它就可以工作，但是我在 Eclipse 中遇到了这个错误：

```
java.lang.ClassNotFoundException: fxmlexample.FXMLExampleController
/C:/Users/Michael/workspace/JavaFX%20Test/bin/fxmltest/fxml_example.fxml:10
  at javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:726)
  at javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:775)
  at javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:180)
  at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:563)
  at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2314)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2131)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2744)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2723)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2709)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2696)
  at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2685)
  at fxmltest.FXMLExample.start(FXMLExample.java:17)
  at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
  at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:215)
  at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
  at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
  at java.security.AccessController.doPrivileged(Native Method)
  at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
  at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
  at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
  at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
  at java.lang.Thread.run(Unknown Source)
Exception in Application start method
Exception in thread "main" java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:403)
    at com.sun.javafx.application.LauncherImpl.access$000(LauncherImpl.java:47)
    at com.sun.javafx.application.LauncherImpl$1.run(LauncherImpl.java:115)
    at java.lang.Thread.run(Unknown Source)
Caused by: javafx.fxml.LoadException: java.lang.ClassNotFoundException: fxmlexample.FXMLExampleController
    at javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:726)
    at javafx.fxml.FXMLLoader$InstanceDeclarationElement.processAttribute(FXMLLoader.java:775)
    at javafx.fxml.FXMLLoader$Element.processStartElement(FXMLLoader.java:180)
    at javafx.fxml.FXMLLoader$ValueElement.processStartElement(FXMLLoader.java:563)
    at javafx.fxml.FXMLLoader.processStartElement(FXMLLoader.java:2314)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2131)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2028)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2744)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2723)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2709)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2696)
    at javafx.fxml.FXMLLoader.load(FXMLLoader.java:2685)
    at fxmltest.FXMLExample.start(FXMLExample.java:17)
    at com.sun.javafx.application.LauncherImpl$5.run(LauncherImpl.java:319)
    at com.sun.javafx.application.PlatformImpl$5.run(PlatformImpl.java:215)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:179)
    at com.sun.javafx.application.PlatformImpl$4$1.run(PlatformImpl.java:176)
    at java.security.AccessController.doPrivileged(Native Method)
    at com.sun.javafx.application.PlatformImpl$4.run(PlatformImpl.java:176)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(WinApplication.java:29)
    at com.sun.glass.ui.win.WinApplication$3$1.run(WinApplication.java:73)
    ... 1 more
Caused by: java.lang.ClassNotFoundException: fxmlexample.FXMLExampleController
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at javafx.fxml.FXMLLoader$ValueElement.processAttribute(FXMLLoader.java:724)
    ... 22 more 
```

任何人都有任何解决方案可以让它与 eclipse 一起使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:13:55.227

好吧，我知道我做错了什么。Netbeans 会自动创建一个名为您的项目名称的包，因此当我添加控制器时`fxmlexample.FXMLExampleController`，它正在查看包`fxmlexample`，我只是使用默认包。

只需创建一个名为`fxmlexample`并将我的文件移动到那里的包即可修复它。

# java - UIAutomator 在 Linux 上构建时运行 0 次测试，但在其他平台上运行良好

> ID：15856706
> 
> 赞同：1
> 
> 时间：2013-04-06T22:23:33.243
> 
> 标签：java, android, linux, eclipse, android-uiautomator

在 Linux 中使用适用于 Android 的 UIAutomator 库运行测试时遇到问题。基本设置是 Nexus 4，或带有 4.2.2、JDK6、Eclipse 和 Linux Mint 13 的模拟器。

这个问题的根源是：

```
INSTRUMENTATION_STATUS: stream=
Test results for WatcherResultPrinter=
Time: 0.007

OK (0 tests)

INSTRUMENTATION_STATUS_CODE: -1 
```

这是我在 Linux 下创建 jar 文件时得到的。如果我在 Windows 或 OSX 中构建它，一切似乎都很顺利。在这种特定情况下，只有一个测试，即按下“主页”按钮。

如果我在任何其他环境（osx/windows）下使用相同的代码和相同的步骤创建项目，测试将按预期运行。

我的问题是 - 为什么在 Linux 下创建 jar 时，测试运行程序无法找到类，而不是在平台下？我现在最好的也是唯一的猜测是编译时java路径设置不正确，因此jar文件构建不正确。在 Eclipse 中运行测试时，我最初得到了“ClassNotFoundException”，而在 osx/windows 上，测试将在 JUnit 中运行，但失败了。

我对此进行了深入研究，发现编译器都指向系统不同部分的不同 Java 版本。我修复了这个问题，删除了除了 java6jdk 的一个实例之外的所有内容，并检查了 JAVA_HOME、eclipse 构建路径和 java 编译路径都指向同一个实例。

在这一切之后，测试似乎仍在构建，但测试运行程序找不到它们。我在这里的知识已经结束，任何帮助将不胜感激！

谢谢

编辑：jar tvf：

```
spicy@ubuntu:~/workspace/TestOne/bin$ jar tvf testui1.jar 
0 Sun Apr 07 14:23:24 PDT 2013 META-INF/
103 Sun Apr 07 14:23:22 PDT 2013 META-INF/MANIFEST.MF
1052 Sun Apr 07 14:23:24 PDT 2013 classes.dex 
```

编码：

```
package com.test;

import android.util.Log;

public class FirstTest extends UiAutomatorTestCase {

    public void thisTest() throws UiObjectNotFoundException {
        getUiDevice().pressHome();
        Log.i("HELP","HELP ME");
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T23:49:41.263

经过太多的工作和努力，我很尴尬地报告问题出在测试功能的命名上。如果函数以“test_”开头，那么自动机会找到测试。如果它不以“test_”开头，它会忽略它们。

呸！

# ios6 - 使用 Embed Segue 将数据传递到容器视图

> ID：15856709
> 
> 赞同：0
> 
> 时间：2013-04-06T22:23:49.103
> 
> 标签：ios6, storyboard, uitableview, uidatepicker, uistoryboardsegue

因此，我已经看过大多数教程（并且正在使用该技术）在 segue 是推送时（在 prepareForSegue 方法中）将数据从一个视图控制器传递到下一个视图控制器。我可以将其`destinationViewController`转换为我的自定义类并将数据推送到自定义属性中。

但是，当我尝试为 Embed Segue（iOS6 中允许容器视图工作的新版本）执行此操作时，destinationViewController 似乎不正确；它只是一个 UIViewController，而不是我在故事板中定义的自定义类。

![故事板示例](https://i.stack.imgur.com/5sEUz.png)

如您所见，我的主表视图带有开始日期和结束日期。然后我有一个使用容器视图嵌入的子视图。这有一个用于命令日期的工具栏 + 一个 UIDatePicker。

我的问题是我需要主表视图控制器具有来自日期选择器的事件侦听器（`UIControlEventValueChanged`用于更新标签）。父控制器看不到日期选择器。两个视图控制器都实现了自定义类。日期选择器控制器类将日期选择器作为 IBOutlet 对象，并且 3 个日期范围按钮选择了更改日期的方法。

看来我的问题是两个视图控制器之间的上下文。

仅供参考：我需要将它们分开，以便我可以切换日期选择器小部件和工具栏的可见性。

### 更新 1：

我找到了一种解决方法，它在父级的准备序列中，将“自我”引用传递给具有父视图控制器类型属性的子级。这为孩子提供了对其父母的正确引用，然后我可以执行以下操作：

```
-(void) viewDidLoad {
    [[self datePicker] addTarget:[self graphSettingsViewController] action:@selector(datePickerValueChanged:) forControlEvents:UIControlEventValueChanged];
} 
```

这有效，但感觉“混乱”。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T11:59:58.953

**从 ViewController容器**到包含的 VC的 Embed segue 也有同样的问题。

我开始怀疑 Apple 有一个错误，或者在这种情况下，segue 上可能有另一个属性（比如可能是 embeddedVC 而不是destinationVC）。但...

我终于发现，不知何故，特定的**源**视图控制器（在故事板中）被更改为股票 UIViewController 并且不知何故把事情搞砸了。不知道这是怎么发生的，但是一旦我解决了这个问题，事情又开始起作用了。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-08T08:19:18.617

**使用 Embed Segue 将数据传递到容器视图**

```
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    NSString * segueName = segue.identifier;

    if ([segueName isEqualToString: @"toMenuCategory"]) {
        MenuCategoryVC * childViewController = (MenuCategoryVC *) [segue destinationViewController];
        childViewController.activityList = self.menuCategoryList;
        childViewController.setCategoryInfo= ^ (NSDictionary *dictCategoryInfo){

            NSLog(@"dictCategoryInfo = %@" ,  dictCategoryInfo);

        };

    }
} 
```

**MenuCategoryVC.h**

```
#import <UIKit/UIKit.h>

@interface MenuCategoryVC : UIViewController

@property (nonatomic,strong) NSMutableArray* activityList;
@property (nonatomic, copy) void (^setCategoryInfo)(NSDictionary *dictCategoryInfo); 
```

**MenuCategoryVC.m**

```
// MARK: -
// MARK: - BUTTON NEXT ACTION

- (IBAction)actionNext:(id)sender {
    self.setCategoryInfo(categoriesData);

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-09T16:33:04.290

使用委托模式。在 prepareForSegue 中为嵌入标识符设置 controller.delegate = self。然后在子控制器的ibaction方法中调用[self.delegate catgegoryChanged]

# javascript - 使用 Javascript 更改样式

> ID：15856710
> 
> 赞同：2
> 
> 时间：2013-04-06T22:23:49.580
> 
> 标签：javascript, css, height, onmouseover, onmouseout

```
<html>
  <head>
    <style>
      #line {
        height: 1px;
        width: 100%;
        float: left;
        background-color: #8e9194;
        position: absolute;
        top: 85%;
        left: 0;
      }
    </style>
  </head>
  <body>
    <button id="b1">Click Here</button>
    <script>
      var o = document.getElementById("line");
      document.getElementById("b1").onmouseover = function () {
        o.style.height = "10px";
      };
      document.getElementById("b1").onmouseout = function () {
        o.style.height = "1px";
      };
    </script>
    <div id="line"></div>
  </body>
</html> 
```

无法使此代码正常工作。我要做的就是在鼠标悬停时增加线条的大小，并在鼠标悬停时将其恢复为 1px。

如果有任何方法可以将一些动画融入其中，那就太好了。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:26:54.053

如果您还需要添加一些动画，我建议使用[jQuery](http://api.jquery.com/animate/)。它既快速又简单：

```
$(function() {
    $("#b1").hover(function() {
        $("#line").stop().animate({ height: 10 }, 1000);
    }, function() {
        $("#line").stop().animate({ height: 1 }, 1000);
    });
}); 
```

**演示：http:** [//jsfiddle.net/8YsSd/](http://jsfiddle.net/8YsSd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T22:27:43.050

您需要将 JavaScript 放在您所指的元素之后：

```
<button id="b1">Click Here</button>
<div id="line"></div>

<script> var o = document.getElementById("line");
document.getElementById("b1").onmouseover = function ()
{o.style.height="10px";}; document.getElementById("b1").onmouseout =
function () {o.style.height="1px";}; 
</script> 
```

您的行在`var o = document.getElementById("line");`元素实际存在之前执行。

**[jsFiddle 示例](http://jsfiddle.net/j08691/yw3Ue/)**

# wordpress - 通过 SSL 提供时，Wordpress CSS 在 Chrome 中中断

> ID：15856711
> 
> 赞同：0
> 
> 时间：2013-04-06T22:23:54.507
> 
> 标签：wordpress, ssl, https, ssl-certificate

遇到一个非常奇怪的问题。我们刚刚从 GoDaddy 购买了高级 SSL 证书。我们托管公司的技术人员安装了它，当我在 Firefox 和/或 Internet Explorer 中查看网页时，一切似乎都运行良好：

[https://moneythink.org/donate2/](https://moneythink.org/donate2/)

问题是，当我在 Chrome 中查看同一页面时，似乎没有加载 CSS（顺便说一下，这是一个基于 Wordpress 的网站）。我安装了一个“Wordpress HTTPS”插件来修复弹出的“此页面不安全”问题，据我所知，现在任何浏览器中都没有混合内容——CSS只是拒绝加载从 Chrome 查看时。

任何想法发生了什么，以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:31:46.877

我实际上能够解决问题！事实证明，当我登录 Wordpress 时，浏览器无法提供与 WP 管理栏关联的图像之一，从而导致 404 错误。无论出于何种原因，这使整个网站都崩溃了。

只要访问者未登录，一切正常（解释为什么我得到上面的结果，因为我在 Chrome 中查看该网站时已登录，但在 Firefox 和 IE 中登录时已注销）。

# android - 从另一个活动中创建的数据库中读取 - 所有步骤

> ID：15856716
> 
> 赞同：0
> 
> 时间：2013-04-06T22:24:12.480
> 
> 标签：android, database, eclipse, sqlite

我已经设法创建数据库并拥有保存数据的方法。那是在我的第二个活动中（从第一个活动开始）。我想在第一个活动中打开该数据库并从中读取（如果现在有任何数据）。

我必须做的所有步骤和事情是什么？

我尝试从第二个活动导入 SQLiteOpenHelper 类并以这种方式阅读，但没有结果。此外，尝试在第一次和第二次活动中放置完全相同的 SQLiteOpenHelper，这也是不对的。

编辑：这是我在第二个活动中创建和保存数据库的代码： [Android 应用程序在调用 SQLiteHelper 时崩溃](https://stackoverflow.com/questions/15837444/android-app-crashing-on-calling-sqlitehelper/15837489#15837489)

编辑[2]：我尝试过这样的事情：我的第二个活动（在 SQLiteDbHelper 内）：

```
public String getSP(){
        String sp;          
        String[] projection = {
                SQLiteDbHelper.COLUMN_NAME_SP, SQLiteDbHelper.COLUMN_NAME_ST};
        Cursor cursor = null;
        cursor = this.getReadableDatabase().query(SQLiteDbHelper.TABLE_NAME, projection, null, null, null, null, null);
        if(cursor != null){
            if(cursor.moveToFirst()){
                sp = cursor.getString(cursor.getColumnIndexOrThrow(SQLiteDbHelper.COLUMN_NAME_SP));
                return sp;
            }
        }
        cursor.close();
        return " - ";
    } 
```

而且，在我的第一个活动中，我需要来自数据库的结果：

```
String sp = SQLiteDbHelper.getSP(); 
```

但是，它导致错误：无法对非静态方法进行静态引用

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T23:09:15.207

在我自己的 Android 应用程序中，我创建了一个扩展 SQLiteOpenHelper 的类。任何 Activity 都可以创建此类的实例，以便与数据库进行通信。如果您需要示例，可以[在此处](https://github.com/codeguru42/bbct/blob/devel/android/common/lib/src/bbct/android/common/database/BaseballCardSQLHelper.java)查看我的课程的完整代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T15:33:26.013

在这里，使用扩展 SQLiteOpenHelper 的这个例子

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class YourSQLAdapter {
public static final String DBNAME  = "filename.db";
public static final String TABLE   = "tablename";
public static final int    VERSION = 1;

public static final String KEY_ID = "_id";
    // Add other fields here

private SQLiteDatabase sqLiteDatabase;
private SQLiteHelper sqLiteHelper;
private Context mContext;

    //this is how I write the create db script, you may do it you own way;)
public static String a = "TEXT";
public static String b = "INTEGER";
public static String c = "PRIMARY KEY";
public static String d = "AUTOINCREMENT";
public static String e = " ";
public static String f = ",";

private static final String SCRIPT_CREATE_DATABASE =
      "CREATE TABLE IF NOT EXISTS " + TABLE + e + "(" + 
      KEY_ID  + e + b + e + c + e + d + f + e + ");";

public YourSQLAdapter(Context context){
    mContext = context;
}

public void close() {
    sqLiteHelper.close();
}

public int deleteAll() {
    return sqLiteDatabase.delete(TABLE, null, null);
}

public long insert(String value) {
    ContentValues cv = new ContentValues();
    rooster.put("fieldname(or use its key value)", value);
    return sqLiteDatabase.insert(TABLE, null, cv);
}

public YourSQLAdapter openToRead() throws SQLException {
    try {
        sqLiteHelper = new SQLiteHelper(mContext, DBNAME, null, 1);
        sqLiteDatabase = sqLiteHelper.getReadableDatabase();
    } catch (Exception e){}
    return this;
}

public YourSQLAdapter openToWrite() throws SQLException {
    try {
        sqLiteHelper = new SQLiteHelper(mContext, DBNAME, null, 1);
        sqLiteDatabase = sqLiteHelper.getWritableDatabase();
    } catch (Exception e){}
    return this;
}

public Cursor queueAll() {
    String[] KEYS = { KEY_ID /* and all other KEYS*/ };
    return sqLiteDatabase.query(TABLE, KEYS, null, null, null, null, null);
}

public Cursor queueDay(String query) {
    String[] KEYS = { KEY_ID /* and all other KEYS*/ };
    return sqLiteDatabase.query(TABLE, KEYS, query, null, null, null, null);
}

public class SQLiteHelper extends SQLiteOpenHelper {
    public SQLiteHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    public void onCreate(SQLiteDatabase db) {
        db.execSQL(SCRIPT_CREATE_DATABASE);
    }

    public void onUpgrade(SQLiteDatabase db, int oldversion, int newversion) {}
}
} 
```

创建数据库时使用

```
YourSQLAdapter sql = new YourSQLAdapter(context);
sql.openToWrite(); 
```

如果您想从数据库中读取，请使用

```
YourSQLAdapter sql = new YourSQLAdapter(context);
sql.openToRead(); 
```

警告，如果尚未创建数据库，则会在 openToRead() 上出现异常，因为 SQLiteOpenHelper 认为它尚不存在并尝试创建它（因为它无法写入而无法创建）

希望这可以帮助;）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-07T16:12:45.793

完整而正确的答案是这样的：

```
import myprojectname.ActivityB.SQLiteDbHelper; 
```

然后使用：

```
SQLiteDbHelper db = new SQLiteDbHelper(this);
String sp = SQLiteDbHelper.getSP(); 
```

感谢大家分享他们的想法，他们帮助我实现了这一目标！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-06T22:54:40.377

您正在通过 Activity 与您的数据库进行交互，这不是一个好方法。您应该创建一个与扩展 SQLiteOpenHelper 的 Activity 分开的普通类文件，并具有您为读取和写入数据库的直接交互创建的公共方法。快速搜索[显示了一些这样做的好例子。](https://stackoverflow.com/a/14616629/1305064)

然后在您需要从中调用数据的任何地方（例如从您的任何一个 Activites 中调用数据）或写入数据库，您只需要...

```
MyDBClassName db = new MyDBClassName();
String someStoredValue = db.readFromTable(RowID-or-searchargs); 
```

您可以使用哪些方法（即 db.readFromTable）将取决于您在此类文件中设置的方法。

# vb.net - 下载代码 VB

> ID：15856719
> 
> 赞同：0
> 
> 时间：2013-04-06T22:24:53.883
> 
> 标签：vb.net, youtube

我创建了一个从 YouTube 下载视频的程序。用户输入一个 YouTube 视频链接，我的程序会找到该 YouTube 视频的一些元素 ID，然后通过我的 webbrowser1 打开 youtube-mp3.org [。](http://youtube-mp3.org)现在，一旦文件完成转换，用户浏览器中就会弹出一个新页面，文件准备好下载。我想让我的程序事先询问用户在哪里保护文件，然后让程序自动将其保存到用户目的地。

谢谢

# mysql - 使用 SUM 查询每列的 MYSQL DB

> ID：15856723
> 
> 赞同：0
> 
> 时间：2013-04-06T22:24:59.350
> 
> 标签：mysql

我有一个包含 6 个基本表的数据库，我在正确显示总和以进行简单总结时遇到问题。这是我的精简表设置：

```
table: customer_info
---------------------------------------------------------
custID   |   store      |   custName
1        |   bayport    |   renee
2        |   bayport    |   april
3        |   plainfield |   john
4        |   bayport    |   tree

table: deals
---------------------------------------------------------
dealID |  custID   |  dealDate   |  empName
1      |  1        | 2013-04-01  |  shak 
2      |  2        | 2013-04-01  |  shak 
3      |  3        | 2013-04-04  |  jen
4      |  4        | 2013-04-05  |  shak

table: phones
---------------------------------------------------------
phoneID  | dealID   | instore  | online
1        | 1        | 1        |  0       
2        | 1        | 0        |  1
3        | 2        | 1        |  0
4        | 3        | 0        |  1
5        | 3        | 1        |  0
6        | 3        | 1        |  0
7        | 4        | 0        |  1    

table: accessory
---------------------------------------------------------
accID   |  dealID   |  acName   | price
1       |  1        |  lanyard  | 10
2       |  2        |  pen      | 5
3       |  4        |  acc      | 2
3       |  4        |  blip     | 15

table: others
-----------------------------------------------------------
otherID  |  dealID  | otName   | otPrice
1        |  2       | other    | 250
2        |  2       | other2   | 100

table:payments
-----------------------------------------------------------
paymentID |  dealID  | cash   | credit   
1         |  1       | 10     | 0
2         |  2       | 0      | 355
3         |  3       | 0      | 0
4         |  4       | 17     | 0 
```

这是我需要的摘要：

```
Date       | empName | instore | online | credit | cash | total | accTotal | otherTotal | countOthers 
2013-04-01 | shak    | 2       | 1      | 355    | 10   | 360   | 15       | 350        |  2
2013-04-04 | jen     | 2       | 1      | 0      | 0    | 0     | 0        | 0          |  0
2013-04-05 | shak    | 0       | 0      | 0      | 17   | 17    | 17       | 0          |  0 
```

WHERE instore、online、credit、cash、total、accTotal、otherTotal 是它们各自列的总金额，而 countOthers 是完成了多少“其他”的计数

这是我到目前为止尝试过的，但数量就像在整个地方成倍增加

```
select dealDate,empName, 
Sum(phone.instore) AS 'In-store',
Sum(phone.online) As 'Online',
sum(credit) AS 'Credit', 
sum(cash) AS 'Cash', 
sum(cash+credit) AS 'Total',

sum(price) AS 'accTotal'
sum(otprice) AS 'otherTotal'
COUNT(otName) AS 'OthersCount'

FROM customer_info
JOIN deals
LEFT join phones
ON deals.dealID = phones.dealID
LEFT JOIN payments
ON deals.dealID = payments.dealID
LEFT JOIN accessory
ON deals.dealID = accessory.dealID
LEFT JOIN others
ON deals.dealID = others.dealID

WHERE customer_info.custID = deals.custID

GROUP BY deals.dealDate
ORDER BY dealDate DESC 
```

任何帮助，将不胜感激。结果可以按 dealDate 或 dealID 分组，以较容易者为准。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T00:58:07.683

我得到了它！我只是对那些使我的总数倍增的部分进行了子查询。

# php - 从具有不同模式的多个 MySQL 表中选择 id 和时间戳

> ID：15856724
> 
> 赞同：1
> 
> 时间：2013-04-06T22:25:07.367
> 
> 标签：php, mysql, sql, mysqli

我在 MySQL 中有几个具有不同模式的不同表，但所有表都有一个自动递增的 ID 和一个时间戳（更准确地说，列名是 datetime 类型的“create_timestamp”）。

为了给这个问题提供更多背景信息，我正在构建一个社交数据聚合器，而我的 MySQL 数据库只是来自社交媒体 API 的缓存数据。因此，这些表适用于 Instagram、Youtube 视频、推文等。我的目标是根据它们的 create_time 从每一个的混合中查询总共 20 条记录。由于每个媒体 API 返回不同的数据，每个表都有非常不同的模式。

在伪代码中，我试图做到这一点：

```
SELECT * FROM instagrams, tweets, youtube_videos, tumblr_posts ORDER BY create_time DESC LIMIT 20; 
```

我意识到我可能只需要查询所有 ID 和表类型，然后在 PHP 中遍历这些以获取它们各自的数据。例如，更多的伪代码：

**MySQL**

```
SELECT id, table_name FROM instagrams, tweets, youtube_videos, tumblr_posts ORDER BY create_time DESC LIMIT 20; 
```

**PHP**

```
-For each result from that query as $row, query for:
SELECT * FROM $row["table_name"] WHERE id=$row["id"] 
```

将这些数据导入我的 PHP 应用程序的最佳和最有效的方法是什么？

* * *

**更新**：

谢谢丹，我使用 UNION 来选择 id 和表名。

```
SELECT id, create_timestamp, "instagrams" as "table_name" FROM instagrams
UNION
SELECT id, create_timestamp, "tumblr_posts" as "table_name" FROM tumblr_posts
UNION
SELECT id, create_timestamp, "wordpress_posts" as "table_name" FROM wordpress_posts
UNION
SELECT id, create_timestamp, "tweets" as "table_name" FROM tweets
UNION
SELECT id, create_timestamp, "youtube_videos" as "table_name" FROM youtube_videos
UNION
SELECT id, create_timestamp, "manual_photo" as "table_name" FROM manual_photo
ORDER BY create_timestamp DESC
LIMIT 20 
```

然后在 PHP 中，我循环并一次查询他们的个人记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:46:31.717

使用子查询获取每个表的最新 20 个条目，并使用外部查询从联合集中获取最新的 20 个条目。并且在 PHP 中看到你想要的表名，只需将表名放在 select 子句中。

您不能只联合每个表的 select *，因为正如您所说，这些表具有不同的“方案”。

```
select * from (
    (select 'instagram' as table, id, create_time from instagram order by create_time desc limit 20)
    union
    (select 'tweets' as table, id, create_time from tweets order by create_time desc limit 20)
    union
    (select 'youtube_videos' as table, id, create_time from youtube_videos order by create_time desc limit 20)
    union
    (select 'tumblr_posts' as table, id, create_time from tumblr_posts order by create_time desc limit 20)
)t
order by create_time
limit 20 
```

# java - 如何主动更新图像的位置？

> ID：15856726
> 
> 赞同：0
> 
> 时间：2013-04-06T22:25:23.937
> 
> 标签：java, swing

我想在屏幕上显示一个图像以便简单地四处移动。我可以让它出现在屏幕上，但我不能让它移动。这是一些代码：

玩家：

```
public class Player {

double positionX;
double positionY;
int destinationX;//Used when moving from place to place
int destinationY;
Tool currentTool;
int direction; //Position the image is facing
int dx;
int dy;
private String girl = "girl.png";
ImageIcon ii = new ImageIcon(this.getClass().getResource(girl));
private Image image = ii.getImage();
private boolean visible = true;

Image playerImage;

public Player(){
    positionX=30;
    positionY=20;
    dx = 2;
    dy = 2;
    destinationX=(int)positionX;
    destinationY=(int)positionY;

    //this.playerImage=playerImage;
}

public void doAction() {
    //currentTool.getNum();
}

public boolean isVisible() {
    return visible;
}

public void setVisible(Boolean visible) {
    this.visible = visible;
}

public Image getImage() {
    return image;
}

public void move(){
    //MOVE LEFT AND RIGHT
    if(destinationX<positionX){
        positionX-=dx;
    }
    if(destinationX>positionX){
        positionX+=dx;
    }

    //MOVE UP AND DOWN
    if(destinationY<positionY){
        positionY-=dy;
    }
    if(destinationY>positionY){
        positionY+=dy;
    }
}

public void setDestination(int x, int y){
    positionX=x;
    positionY=y;
    System.out.println(x + "," + y);
}

public void draw(Graphics g,ImageObserver io){
    g.drawImage(image, (int)positionX,(int) positionY,io);
} 
```

棋盘（实现游戏元素/组件）：

```
public class Board extends JPanel implements Runnable {

private static final int NO_DELAYS_PER_YIELD = 16;
/* Number of frames with a delay of 0 ms before the
   animation thread yields to other running threads. */

private static int MAX_FRAME_SKIPS = 5;
// no. of frames that can be skipped in any one animation loop
// i.e the games state is updated but not rendered

private Thread animator;
int x, y;
final int frameCount = 8;
BufferedImage flowers;
private int[][] fPos = {{232, 15},{400, 200},{335, 335}}; // flower coordinates 
private static int bWIDTH = 500; // width of window 
private static int bHEIGHT = 400;// height of window
private Font font;
private FontMetrics metrics;
private House house = new House();
private Flower flower = new Flower(); 
private Player girlP = new Player();
private int px = 200;
private int py = 400;

private long period;

private volatile boolean running = false;
private volatile boolean gameOver = false;
private volatile boolean isPaused = false;

private Graphics dbg;
private Image dbImage = null;

public Board(long period) {

    this.period = period;

    setBackground(Color.white);
    setPreferredSize(new Dimension(bWIDTH, bHEIGHT));

    setFocusable(true);
    requestFocus();     //JPanel now receives key events
    readyForTermination();

    // create game components

    // listen for mouse presses
    addMouseListener(new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            testPress(e.getX(), e.getY());
        }
    }); 

    // set up message font
    font = new Font("SansSerif", Font.BOLD, 24);
    metrics = this.getFontMetrics(font);

    x = 15;
    y = 150;
}   // end of 'Board()'

public void addNotify() {
    super.addNotify();
    startGame();
}

public void startGame() {
    if (animator == null || !running) {
        animator = new Thread(this);
        animator.start();
    }
}

public void pauseGame() {
    isPaused = true;
}

public void resumeGame() {
    isPaused = false;
}

public void stopGame() {
    running = false;
}

private void readyForTermination() {
    addKeyListener( new KeyAdapter() {
        public void keyPressed(KeyEvent e) {

            // listen for escape, q, or ctrl-c
            int keyCode = e.getKeyCode();
            if ((keyCode == KeyEvent.VK_ESCAPE) ||
                    (keyCode == KeyEvent.VK_Q) ||
                    (keyCode == KeyEvent.VK_END) ||
                    ((keyCode == KeyEvent.VK_C) && e.isControlDown()) ){
                running = false;
            }
        }
    });
}

private void testPress(int x, int y) {
    if (!isPaused && !gameOver) {
        // do something..
        px = x;
        py = y;
        System.out.println(px + ", " + py);
    }
}

private void gameRender() {
    if (dbImage == null) { // creating the buffer
        //dbImage = createImage(bWIDTH, bHEIGHT);
        if (dbImage == null) {
            //System.out.println("dbImage is null");
            return;
        }
        else 
            dbg = dbImage.getGraphics();
    }

    // clearing the background
    dbg.setColor(Color.gray);
    //dbg.fillRect(0, 0, bWIDTH, bHEIGHT);

    dbg.setColor(Color.blue);
    dbg.setFont(font);

    //drawing game elements....

    if (gameOver) {
        gameOverMessage(dbg);
    } // end of gameRender()
}

private void gameUpdate() {
    if (!isPaused && !gameOver) {
        //girlP.move();
    }
}

private void gameOverMessage(Graphics g)
// center the game-over message
{ // code to calculate x and y...
    String msg = "Game Over";
    g.drawString(msg, x, y);
}  // end of gameOverMessage( )

public void paint(Graphics g) {
    super.paint(g);

    if (dbImage != null) {
        g.drawImage(dbImage, 0, 0, null);   
    }

//      if (house.isVisible()) {
//          g.drawImage(house.getImage(), 10, 10, this);
//      }

    if (flower.isVisible()) {
        for (int i = 0; i < 3; i++) {
            g.drawImage(flower.getImage(), fPos[i][0], fPos[i][1],this);
        }
    }

    girlP.draw(g, this);

    //girlP.setDestination(0, 0);
    //girlP.move();

//      int red = 103;
//      int green = 10;
//      int blue = 100;
//      Color square = new Color(red, green, blue);
//      g.fillRect(x, y, sqW, sqH);

    //Toolkit.getDefaultToolkit().sync();
}

private void paintScreen() {
    // actively render the buffer to the screen

    Graphics g;
    try {
        g = this.getGraphics(); // get the panel's graphic context
        if ((g != null) && (dbImage != null))
            g.drawImage(dbImage, 0, 0, null);
        Toolkit.getDefaultToolkit().sync(); // sync the display on some systems
        g.dispose();
    }catch (Exception e) {
        System.out.println("Graphics context error: " + e);
    }
}

public void run() {
    // repeatedly update, render, and sleep

    long beforeTime, afterTime, timeDiff, sleep;
    long overSleepTime = 0L;
    int noDelays = 0;
    long excess = 0L;

    beforeTime = System.nanoTime();

    running = true;
    while (running) {
        gameUpdate();
        gameRender();
        paintScreen(); // this will draw buffer to screen instead of repaint()
        //updateChange();
        girlP.move();

        afterTime = System.nanoTime();
        timeDiff = afterTime - beforeTime;
        sleep = (period - timeDiff) - overSleepTime; // time left in this loop

        if (sleep > 0) { // some time left in this cycle

            try {
                Thread.sleep(sleep/1000000L); // nano -> ms
            }catch (InterruptedException e) {
                System.out.println("Interrupted");
            }   
            overSleepTime = (System.nanoTime() - afterTime) - sleep;

        }
        else {      // sleep <= 0; frame took longer than the delay
            excess -= sleep; // store excess time value
            overSleepTime = 0L;

            if (++noDelays >= NO_DELAYS_PER_YIELD) {
                Thread.yield( );   // give another thread a chance to run
                noDelays = 0;
            }
        }

        beforeTime = System.nanoTime();

        /* If frame animation is taking too long, update the game state
           without rendering it, to get the updates/sec nearer to
           the required FPS. */
        int skips = 0;
        while((excess > period) && (skips < MAX_FRAME_SKIPS)) {
            excess -= period;
            gameUpdate();      // update state but don't render
            skips++;
        }

    }
    System.exit(0);
} // end of run();

} 
```

![这就是我到目前为止所得到的](https://i.stack.imgur.com/exa5E.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T09:28:36.710

有很多事情对我来说很突出。

使用`getGraphics`是一个非常糟糕的主意。Swing 使用由`RepaintManager`. 这基本上意味着虽然您可以请求重绘，但您无法控制何时发生更新。

Swings 的油漆工艺也是无状态的。这意味着以前绘制的内容将被丢弃，并且您想要绘制的任何内容都必须在其中一种`paint`方法中重新应用。

您的移动代码错误。您将值直接分配给变量`position`而不是`destination`变量。如果不需要移动，我修改了移动代码以不执行任何操作，实际上我这样做是出于调试目的，但是干草。

你的核心渲染引擎是......奇怪......

您不太可能需要更多大约 25 fps 或同等速度，因此使用纳秒可能有点过分，毫秒精度可能就足够了。当我更改延迟引擎时，我得到了更好的结果。

我还更改了核心渲染过程。该引擎现在使用页面翻转过程。它使用了两个`BufferedImages`，一个是`activeBuffer`绘制到屏幕上的，另一个是`scratchBuffer`用于更新游戏状态的。然后我根据需要翻转。这意味着在屏幕上绘制的内容受引擎渲染的影响。

可能还有很多其他的东西，但是您可以自己比较差异；）

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.image.BufferedImage;
import java.awt.image.ImageObserver;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.tools.Tool;

public class AnimationEngine {

    public static void main(String[] args) {
        new AnimationEngine();
    }

    public AnimationEngine() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new Board(40));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public static class Board extends JPanel implements Runnable {

        protected static final Object UPDATE = new Object();
        private static final int NO_DELAYS_PER_YIELD = 16;
        /* Number of frames with a delay of 0 ms before the
         animation thread yields to other running threads. */
        private static int MAX_FRAME_SKIPS = 5;
// no. of frames that can be skipped in any one animation loop
// i.e the games state is updated but not rendered
        private Thread animator;
        int x, y;
        final int frameCount = 8;
        BufferedImage flowers;
        private int[][] fPos = {{232, 15}, {400, 200}, {335, 335}}; // flower coordinates 
        private static int bWIDTH = 500; // width of window 
        private static int bHEIGHT = 400;// height of window
        private Font font;
        private FontMetrics metrics;
//        private House house = new House();
//        private Flower flower = new Flower();
        private Player girlP = new Player();
        private int px = 200;
        private int py = 400;
        private long period;
        private volatile boolean running = false;
        private volatile boolean gameOver = false;
        private volatile boolean isPaused = false;
//        private Graphics dbg;
        private BufferedImage activeBuffer = null;
        private BufferedImage scratchBuffer = null;

        public Board(long period) {

            this.period = period;

            setBackground(Color.white);
            setPreferredSize(new Dimension(bWIDTH, bHEIGHT));

            setFocusable(true);
            requestFocus();     //JPanel now receives key events
            readyForTermination();

            // create game components

            // listen for mouse presses
            addMouseListener(new MouseAdapter() {
                public void mousePressed(MouseEvent e) {
                    System.out.println("Clicked");
                    girlP.setDestination(e.getX(), e.getY());
                }
            });

            // set up message font
            font = new Font("SansSerif", Font.BOLD, 24);
            metrics = this.getFontMetrics(font);

            x = 15;
            y = 150;
        }   // end of 'Board()'

        public void addNotify() {
            super.addNotify();
            startGame();
        }

        public void startGame() {
            if (animator == null || !running) {
                animator = new Thread(this);
                animator.start();
            }
        }

        public void pauseGame() {
            isPaused = true;
        }

        public void resumeGame() {
            isPaused = false;
        }

        public void stopGame() {
            running = false;
        }

        private void readyForTermination() {
            addKeyListener(new KeyAdapter() {
                public void keyPressed(KeyEvent e) {

                    // listen for escape, q, or ctrl-c
                    int keyCode = e.getKeyCode();
                    if ((keyCode == KeyEvent.VK_ESCAPE)
                                    || (keyCode == KeyEvent.VK_Q)
                                    || (keyCode == KeyEvent.VK_END)
                                    || ((keyCode == KeyEvent.VK_C) && e.isControlDown())) {
                        running = false;
                    }
                }
            });
        }

        @Override
        public void invalidate() {
            synchronized (UPDATE) {
                activeBuffer = null;
                scratchBuffer = null;
            }
            super.invalidate();
        }

        private void gameRender() {
            synchronized (UPDATE) {
                if (getWidth() > 0 && getHeight() > 0) {
                    if (scratchBuffer == null) {
                        scratchBuffer = new BufferedImage(getWidth(), getHeight(), BufferedImage.TYPE_INT_RGB);
                    }

                    Graphics2D dbg = scratchBuffer.createGraphics();

                    // clearing the background
                    dbg.setColor(Color.GRAY);
                    dbg.fillRect(0, 0, scratchBuffer.getWidth(), scratchBuffer.getHeight());

                    dbg.setColor(Color.blue);
                    dbg.setFont(font);

                    //drawing game elements....
                    girlP.draw(dbg, this);

                    if (gameOver) {
                        gameOverMessage(dbg);
                    } // end of gameRender()
                    dbg.dispose();
                }

                BufferedImage tmp = activeBuffer;
                activeBuffer = scratchBuffer;
                scratchBuffer = tmp;
            }
        }

        private void gameUpdate() {
            if (!isPaused && !gameOver) {
                girlP.move();
            }
        }

        private void gameOverMessage(Graphics g) // center the game-over message
        { // code to calculate x and y...
            String msg = "Game Over";
            g.drawString(msg, x, y);
        }  // end of gameOverMessage( )

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            if (activeBuffer != null) {
                g.drawImage(activeBuffer, 0, 0, null);
            }
        }

        public void run() {

            long beforeTime, afterTime, timeDiff, sleep;
            beforeTime = System.currentTimeMillis();

            running = true;
            while (running) {
                gameUpdate();
                gameRender();

                repaint();

                afterTime = System.currentTimeMillis();
                timeDiff = afterTime - beforeTime;
                sleep = (period - timeDiff); // - overSleepTime; // time left in this loop

                if (sleep > 0) { // some time left in this cycle
                    try {
                        Thread.sleep(sleep); // nano -> ms
                    } catch (InterruptedException e) {
                        System.out.println("Interrupted");
                    }
                } else {      // sleep <= 0; frame took longer than the delay
                    System.out.println("Over...");
                }

                beforeTime = System.currentTimeMillis();
            }
            System.exit(0);
        } // end of run();
    }

    public static class Player {

        double positionX;
        double positionY;
        int destinationX;//Used when moving from place to place
        int destinationY;
        Tool currentTool;
        int direction; //Position the image is facing
        int dx;
        int dy;
        private String girl = "/Player01.png";
        ImageIcon ii = new ImageIcon(this.getClass().getResource(girl));
        private Image image = ii.getImage();
        private boolean visible = true;
        Image playerImage;

        public Player() {
            positionX = 30;
            positionY = 20;
            dx = 4;
            dy = 4;
            destinationX = (int) positionX;
            destinationY = (int) positionY;

            //this.playerImage=playerImage;
        }

        public void doAction() {
            //currentTool.getNum();
        }

        public boolean isVisible() {
            return visible;
        }

        public void setVisible(Boolean visible) {
            this.visible = visible;
        }

        public Image getImage() {
            return image;
        }

        public void move() {
            if (destinationX != positionX || destinationY != positionY) {
                //MOVE LEFT AND RIGHT
                if (destinationX < positionX) {
                    positionX -= dx;
                }
                if (destinationX > positionX) {
                    positionX += dx;
                }

                //MOVE UP AND DOWN
                if (destinationY < positionY) {
                    positionY -= dy;
                }
                if (destinationY > positionY) {
                    positionY += dy;
                }
            }
        }

        public void setDestination(int x, int y) {
            destinationX = x;
            destinationY = y;
        }

        public void draw(Graphics g, ImageObserver io) {
            g.drawImage(image, (int) positionX, (int) positionY, io);
        }
    }
} 
```

# javascript - 向 Javascript 传递参数

> ID：15856729
> 
> 赞同：0
> 
> 时间：2013-04-06T22:26:02.107
> 
> 标签：javascript, html, web

对于我目前的任务，我想建立一个人们可以登录并发表评论的网站。我以前从未做过网络编程，所以我一直在苦苦挣扎。现在，我对如何在与页面一起使用的 java 脚本中使用 html 网页上的文本字段中的值感到困惑。

这是我的 Javascript 中的代码，（它实际上并没有做很多事情，我只是想弄清楚我做错了什么）

```
 <script type = "text/javascript">
   function inform(name)
   {
  alert(name);
   }
   </script> 
```

这就是我调用函数的 html 的样子

```
<P ALIGN="right">  
        Email: <br><input type="text" name="fname"><br>
        Pass Word: <br><input type="password" name="pass"><br>
        <input type="button" value="Log In" onclick ="inform(document.getElementById('fname').value)"/>
    </P> 
```

当我运行它并点击按钮时，它说通知函数中的 name 值始终为 Null，而与我在 name 文本字段中输入的内容无关。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:28:27.353

您分配了 a`name`而不是`id`.

```
<!-----------------------------v------------v--->
Email: <br><input type="text" name="fname" id="fname"><br> 
```

* * *

作为替代方案，您可以这样做：

```
<input type="button" value="Log In" onclick ="inform(this.form.fname.value)"/> 
```

* * *

事实上，`this`甚至是可选的：

```
<input type="button" value="Log In" onclick ="inform(form.fname.value)"/> 
```

***演示：http:*** [//jsfiddle.net/kPcmq/](http://jsfiddle.net/kPcmq/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T22:28:52.443

你必须改变这个

```
Email: <br><input type="text" name="fname"><br> 
```

到`Email: <br><input type="text" name="fname" id ="fname" ><br>`

# mysql - Smysql显示第一个表的结果在第二个表中没有

> ID：15856730
> 
> 赞同：0
> 
> 时间：2013-04-06T22:26:02.473
> 
> 标签：mysql, sql, join

我有两张桌子，`images`和`articleImages`。在两个表中都是 i_id 列，现在我需要 MySQL 答案返回图像表的行，这些`articleImages`表也存在于表中。

我尝试类似

```
SELECT DISTINCT name FROM images,ArticleImages WHERE images.i_id!=ArticleImages.i_id 
```

但它什么也不返回，没有`DISTINCT`元素返回完全废话

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:29:11.213

尝试使用

```
NOT IN (...)

SELECT name
FROM images
WHERE images.i_id NOT IN (SELECT i_id FROM ArticleImages) 
```

[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:33:36.073

基本上你可以使用`LEFT JOIN`. 它的作用是`LEFT JOIN`返回*左侧*表上的所有记录，即它是否在*右侧*表`images`上是否有匹配记录。所有不匹配的记录都将在表的列上具有*NULL*值，并且此记录是您要过滤的记录。*`ArticleImages`*`ArticleImages`**

 **```
SELECT  a.*
FROM    images a
        LEFT JOIN ArticleImages b
            ON a.i_id = b.i_id
WHERE   b.i_id IS NULL 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)**

# awk - 用 awk 从文件中删除第一行和最后一行的最简单方法是什么？

> ID：15856733
> 
> 赞同：31
> 
> 时间：2013-04-06T22:26:27.257
> 
> 标签：awk

我正在学习 awk/gawk。所以最近我只是尝试用它来解决任何问题，以获得更多的实践机会。

昨天同事问了一个问题

> “如何从文件中删除第一行和最后一行”

. 我知道那`sed '1d;$d' file`会奏效。`head/tail`即使性能不佳，也可以正常工作。我告诉他sed，他很高兴。

后来，我试图写一个 awk 单行：到目前为止我得到的是：

```
awk 'NR>1{a[++k]=$0}END{for(i=1;i<k;i++)print a[i]}' 
```

这会将整个文件存储在数组中，只是为了跳过最后一行。我觉得应该有一种更简单（或更好）的方法来做到这一点。

（如果没有更简单、更快或更好的方法，我会删除这个问题）

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2013-04-06T22:33:14.000

这可以解决问题：

```
awk 'NR>2 {print last} {last=$0}' 
```

`awk``print last`仅当 NR > 2 时（即除前 2 行之外的所有行）执行操作。在所有行上，它将变量`last`设置为当前行。因此，当`awk`读取第三行时，它会打印第 2 行（存储在 中`last`）。当它读取最后一行（第 n 行）时，它会打印第 n-1 行的内容。最终效果是打印了第 2 行到第 n-1 行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-10-16T01:29:45.600

让我建议另一种解决方案。如果您需要自定义 N 作为顶线和底线，您可以使用**tail**和**head**命令：

```
awk '{print $1}'  | head -n -1 | tail -n+2 
```

**head -n -1** - 删除最后一行

**tail -n+2** - 从第二行开始输出（删除 1 行）

以下命令将从顶部和底部删除 3 行：

```
awk '{print $1}'  | head -n -3 | tail -n +4 
```

实际上我们在这里甚至不需要 awk：

```
more | head -n -1 | tail -n +2 
```

或者

```
cat | head -n -1 | tail -n +2 
```

感谢[Igor Fobia](https://stackoverflow.com/users/512497/igor-fobia)发表评论！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-29T18:17:36.543

这是另一种方式，但它需要 gawk 函数长度：

```
awk '{firstline=2; cuttail=1; l[NR]=$0} END {for (i=firstline; i<=length(l)-cuttail; i++) print l[i]}' 
```

# javascript - 将函数应用于 MongoDB 集合中的所有对象的最有效方法是什么？

> ID：15856736
> 
> 赞同：1
> 
> 时间：2013-04-06T22:26:34.663
> 
> 标签：javascript, node.js, mongodb

假设我想计算我的集合中所有对象的“流行度”字段。这取决于当前时间与“submitTime”字段的差异以及“votes”字段中的数字。此操作将每小时运行一次。在所有对象上运行函数的最有效方法是什么？只是一个例子，它可以是任何函数：

```
function(){
    this.popularity = this.votes / (Date.now() - this.submitTime);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T06:47:38.177

如果您想对所有对象运行一个函数并在原始集合中保存一个流行度分数，那么您最好的方法是迭代所有文档以计算并保存新分数。如果你想保存到不同的集合，你可以使用[MapReduce](http://docs.mongodb.org/manual/core/map-reduce/)代替。

如果您对如何计算流行度的其他想法持开放态度，还有更多选择:)。

### 提高效率

为了提高您当前方法的效率，您可以：

*   将您的更新标准限制为票数超过 0 的文档（否则无论如何您都会被零除）
*   仅检索计算流行度所需的字段，并使用 a[`$set`](http://docs.mongodb.org/manual/reference/operator/set/)而不是重新保存完整文档来更新流行度字段。
*   添加个人投票时更新受欢迎程度得分（避免每小时重新计算所有得分），然后对所有投票进行不那么频繁（例如每晚）重新计算

### 替代方法

*   使用可以通过排序而不是计算来确定的流行度指标。例如：`{ votes: -1, lastVotedTime: -1, submitTime: -1 }`。但是，这可能无法满足您对旧文档的流行度进行老化的要求。

*   使用数字流行度指标，其中事件和用户操作（例如文章发布、用户查看/投票/、..）将添加不同的流行度值。随着时间的推移，人气会下降。Drupal的[Radioactivity 模块](http://drupal.org/project/radioactivity)通过基于规则的方法实现了这一点。

要在 MongoDB 中实现后一种方法，您可以：

*   添加一个整数`popularity`字段，其中新对象从某个值开始（例如 1000）
*   让不同的用户操作（新投票、视图等）[`$inc`](http://docs.mongodb.org/manual/reference/operator/inc/)以适当的数量增加受欢迎程度计数器（例如 50 个新投票）
*   随着时间的推移，使用定期安排的工作来降低受欢迎程度。
*   由于所有流行度都以正分数开始并衰减到 0 或更低，因此您可以将更新查询限制为流行度 >0 的文档。
*   您还可以（ab）使用流行度分数来确保重要文档保持流行更长时间。

“什么是好的流行度指标”还有更多细微差别，以及 StackOverflow 上的大量先前问题（例如：[应该使用什么公式来确定“热门”问题？](https://meta.stackexchange.com/questions/11602/what-formula-should-be-used-to-determine-hot-questions)）。

# javascript - 将 javascript 警报转换为按钮或 div 以进行引导

> ID：15856737
> 
> 赞同：0
> 
> 时间：2013-04-06T22:26:38.237
> 
> 标签：javascript, button, twitter-bootstrap

基本上有一个投票 div 按下时投票计数上升。如果再次按下相同的按钮，则会显示“您已经投票！”的警报。我怎样才能把它变成一个我可以与引导程序一起使用的 div 或按钮，这样我就可以对它进行 CSS 让它看起来很漂亮。

```
var ivotings = Array();         // store the items with voting
var ar_elm = Array();       // store the items that will be send to votAjax()
var i_elm = 0;                  // Index for elements aded in ar_elm
var itemvotin = '';       // store the voting of voted item
var votingfiles = 'votingfiles/';      // directory with files for script
var advote = 0;      // variable checked in addVote(), if is 0 cann vote, else, not

// gets all DIVs, store in $ivotings, and in $ar_elm DIVs with class: "vot_plus", "vot_updown", and ID="vt_..", sends to votAjax()

var getVotsElm = function () {
  var obj_div = document.getElementsByTagName('div');
  var nrobj_div = obj_div.length;
  for(var i=0; i<nrobj_div; i++) {
    // if contains class and id
    if(obj_div[i].className && obj_div[i].id) {
        var elm_id = obj_div[i].id;

      // if class "vot_plus", and id begins with "vt_"
      if((obj_div[i].className=='vot_plus' ) && elm_id.indexOf("vt_")==0) {
        ivotings[elm_id] = obj_div[i];       // store object item in $ivotings

        ar_elm[i_elm] = elm_id;     // add item_ID in $ar_elm array, to be send in json string tp php
        i_elm++;             // index order in $ar_elm
      }
    }
  }
  // if there are elements in "ar_elm", send them to votAjax()
  if(ar_elm.length>0) votAjax(ar_elm, '');      // if items in $ar_elm pass them to votAjax()
};

// add the ratting data to element in page
function addVotData(elm_id, vote, nvotes, renot) {
  // exists elm_id stored in ivotings
  if(ivotings[elm_id]) {
    // sets to add "onclick" for vote up (plus), if renot is 0
    var clik_up = (renot == 0) ? ' onclick="addVote(this, 1)"' : ' onclick="alert(\'you already voted!!!!!!\')"';

    // if vot_plus, add code with <img> 'votplus', else, if vot_updown1/2, add code with <img> 'votup',  'votdown'
    if(ivotings[elm_id].className == 'vot_plus') {    // simple vote
      ivotings[elm_id].innerHTML = '<h6>'+ vote+ '</h6><span><img src="'+votingfiles+'arrow.png" alt="1" title="" '+ clik_up+ '/></span>';
    };
}
}

// Sends data to votAjax(), that will be send to PHP to register the vote
function addVote(ivot, vote) {
  // if $advote is 0, can vote, else, alert message
  if(advote == 0) {
    var elm = Array();
    elm[0] = ivot.parentNode.parentNode.id;      // gets the item-name that will be voted

    ivot.parentNode.innerHTML = '';
    votAjax(elm, vote);
  }
  else alert('You already voted');
}

/*** Ajax ***/

// create the XMLHttpRequest object, according to browser
function get_XmlHttp() {
  var xmlHttp = null;           // will stere and return the XMLHttpRequest

  if(window.XMLHttpRequest) xmlHttp = new XMLHttpRequest();     // Forefox, Opera, Safari, ...
  else if(window.ActiveXObject) xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");     // IE

  return xmlHttp;
}

// sends data to PHP and receives the response
function votAjax(elm, vote) {
  var cerere_http =  get_XmlHttp();     // get XMLHttpRequest object

  // define data to be send via POST to PHP (Array with name=value pairs)
  var datasend = Array();
  for(var i=0; i<elm.length; i++) datasend[i] = 'elm[]='+elm[i];
  // joins the array items into a string, separated by '&'
  datasend = datasend.join('&')+'&vote='+vote;

  cerere_http.open("POST", votingfiles+'voting.php', true);         // crate the request

  cerere_http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");    // header for POST
  cerere_http.send(datasend);       //  make the ajax request, poassing the data

  // checks and receives the response
  cerere_http.onreadystatechange = function() {
    if (cerere_http.readyState == 4) {
      // receives a JSON with one or more item:[vote, nvotes, renot]
      eval("var jsonitems = "+ cerere_http.responseText);

      // if jsonitems is defined variable
      if (jsonitems) {
        // parse the jsonitems object
        for(var votitem in jsonitems) {
          var renot = jsonitems[votitem][2];        // determine if the user can vote or not

          // if renot=3 displays alert that already voted, else, continue with the voting reactualization
           if(renot == 3) {
            alert("You already voted \n You can vote again tomorrow");
            window.location.reload(true);       // Reload the page
          }
          else addVotData(votitem, jsonitems[votitem][0], jsonitems[votitem][1], renot);    // calls function that shows voting
        }
      }

      // if renot is undefined or 2 (set to 1 NRVOT in voting.php), after vote, set $advote to 1
      if(vote != '' && (renot == undefined || renot == 2)) advote = 1;
      }
  }
}

// this function is used to access the function we need after loading page
function addLoadVote(func) {
  var oldonload = window.onload; 

  // if the parameter is a function, calls it with "onload"
  // otherwise, adds the parameter into a function, and then call it
  if (typeof window.onload != 'function') window.onload = func;
  else { 
    window.onload = function() { 
      if (oldonload) { oldonload(); } 
      func();
    } 
  } 
}

addLoadVote(getVotsElm);            // calls getVotsElm() after page loads 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:32:26.833

看看[http://bootboxjs.com/](http://bootboxjs.com/)他们有一些很酷的例子：[http ://bootboxjs.com/examples.html](http://bootboxjs.com/examples.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:56:15.960

首先停止使用**eval**这将使您的代码复杂到无止境。而是直接分配事件：

```
(function() {

  function init() {
    var el = document.getElementById("vote-button"); // Or use getElementsByClassName
    el.onclick = myClickerFunction;
  }

  window.onload = init;

})(); 
```

然后在你`myClickerFunction`做你的检查并选择做什么。添加投票或删除特殊 div 的类。此类用于确定它是否可见：

```
<button id="vote-button">Vote</button>
<div id="warning" class="hidden">You can not vote more than once.</div> 
```

你的 CSS：

```
#warning {
  /* Do your stuff */
}
.hidden { display: none; } 
```

最后你的`myClickerFunction`：

```
function myClickerFunction() {
  var div = document.getElementById("warning");
  if (ivotings["warning"]) {
    addVote();
  }
  else {
    div.className = "";
  }
} 
```

还有更多，使用像 jQuery 这样的 libaray 可以为您提供更好的代码（`$("#warning").show()`），但这个想法很简单。

# scala - 组装仅包含提供的依赖项的 jar

> ID：15856739
> 
> 赞同：3
> 
> 时间：2013-04-06T22:26:54.453
> 
> 标签：scala, build, sbt

有没有一种方法可以在一个 jar 中下载和打包 sbt 中提供的所有依赖项，我可以在启动应用程序时将其添加到应用程序的类路径中？

我正在使用 sbt-assembly，但生成的 jar 对我的口味来说太大了：16 Mb，包括 Scala-lang、Akka 和 Spray。我计划构建大约 10-15 个小型独立服务，每个服务作为一个 jar，并且不想在创建新版本部署时继续将 16 Mb 文件上传到 s3（目前是我的仓库）。

当我排除 Scala 语言和上面提到的其他 jar 时，我的汇编 jar 会下降到大约 1 Mb。所以我想要实现的是有一种方法来提供一个只有提供的依赖项和 scala 语言的胖 jar，这样我就可以在启动它们时将它添加到我的服务的类路径中。

我可以从我的常春藤缓存中获取每个库，手动部署它们并将它们添加到类路径中，但基本上我希望能够在我更改版本并上传时构建一个新的组装 jar。

我想有一个另一个项目依赖的单独项目，包含我提供的所有 jar，但是有没有更简单的方法？

* * *

根据要求进一步澄清：

我更大的目标是自动部署到云服务器中。我首先使用 sbt-assembly 在本地构建，例如生成 service-a.jar、service-b.jar 等。然后我将它们同步到 s3，所以如果只更新 service-a.jar，那么只有该文件将被上传到s3。接下来，我指示我的 ec2 服务器下载更改的文件并重新启动任何新服务。

使用 sbt-assembly 时，我得到一个包含所有依赖项的胖 jar（就像 onejar 一样）。然而，将该 jar 上传到 s3 需要很长时间，并且这些文件中的 16Mb 中的 15Mb 只是常见的依赖项。所以我的想法是将所有这些共享依赖项放入一个单独的 jar 中，该 jar 很少更改，并在启动时在类路径中提供这些`java -cp "deps.jar;service-a.jar" org.myapp.StartApp`。

我只是不想自己手动管理那些常见的罐子。我想利用我现有的构建并使用 sbt/ivy 依赖管理系统为我下载正确的文件并准备一个可以与我的独立服务单独分发的包。

到目前为止，我提出的所有解决方案似乎都过于复杂，尤其是当我仍然需要能够运行测试等时（因此在 sbt 构建文件中没有“提供”）。欢迎提出其他建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-07T14:36:51.837

在查看 sbt-assembly 插件的源代码时，我找到了答案：

```
lazy val assembly          = TaskKey[File]("assembly", "Builds a single-file deployable jar.")
lazy val packageScala      = TaskKey[File]("assembly-package-scala", "Produces the scala artifact.")
lazy val packageDependency = TaskKey[File]("assembly-package-dependency", "Produces the dependency artifact.") 
```

因此，使用以下配置 + 命令，我可以获得所需的所有工件：

```
// Produces a jar without dependencies and scala language jar included
lazy val assemblyMicroService = assemblySettings ++
  Seq( 
    assembleArtifact in packageScala := false,
    assembleArtifact in packageDependency := false
  ) 
```

然后依次运行命令： `assembly, assembly-package-scala, assembly-package-dependency`

然后我将拥有三个 jar，一个用于我的服务，一个用于 scala 语言，一个用于依赖项。

# java - 如何从 Spring MVC 登录

> ID：15856740
> 
> 赞同：3
> 
> 时间：2013-04-06T22:26:55.260
> 
> 标签：java, spring, logging, spring-mvc, slf4j

我正在尝试从 Spring MVC 中的控制器登录，但没有出现任何内容。我正在使用带有 logback 的 SLF4J。我设法从一个主类登录，但在将其设为 Web 应用程序后它不会记录。

我认为它会起作用，因为 SL4JF 和 Logback 在类路径中。

```
@Controller
@RequestMapping(value = "/cars")
public class CarController {

    private Logger logger = LoggerFactory.getLogger(CarController.class);

    @RequestMapping(method = RequestMethod.GET)
    @ResponseBody
    public Map<String, String> newCar() {
        logger.info("new car");
        // more code
        return map;
    }
} 
```

logback.xml

```
<configuration scan="true">
    <property name="LOG_DIR" value="/My/User/Desktop"/>

    <!--Loggers-->
    <logger name="my.company" level="DEBUG"/>

    <!--Root logger-->
    <root level="debug">
        <appender-ref ref="STDOUT"/>
        <appender-ref ref="FILE_ROLLER"/>
    </root>

    <!--Appenders-->
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>

    <appender name="FILE_ROLLER" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${LOG_DIR}/mylog.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>mylog.%d{yyyy-mm-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>

        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
        </encoder>
    </appender>
</configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T07:56:37.687

这是因为 Spring 默认使用 Java Commons Logging。您应该将`jcl-over-slf4j`库放在类路径中，以便 Spring 使用 SLF4J 进行日志记录。

使用 maven，除了 SLF4J+Logback 之外，还使用这些依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>${spring.version}</version>
    <exclusions>
        <!-- Exclude Commons Logging in favor of SLF4j -->
        <exclusion>
            <groupId>commons-logging</groupId>
            <artifactId>commons-logging</artifactId>
        </exclusion>
    </exclusions>
</dependency>

<dependency>
    <groupId>org.slf4j</groupId>
    <artifactId>jcl-over-slf4j</artifactId>
    <version>${slf4j.version}</version>
    <scope>runtime</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-18T07:21:13.127

排除***默认记录器并在******pom.xml***文件中添加您想要使用的任何记录器，如下所示。

```
<dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-web</artifactId>
        <exclusions>
            <exclusion>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-starter-logging</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-log4j2</artifactId>
</dependency> 
```

# ruby - 在 Ruby 中获取类名和方法名

> ID：15856744
> 
> 赞同：1
> 
> 时间：2013-04-06T22:27:09.767
> 
> 标签：ruby

说我有，

```
class Foo
  def self.bar
    puts "I want to print #{some_method_for_class_name} and #{some_method_for_method_name}."
  end
end 
```

有什么方法可以分别获得“Foo”和“bar”的位置`some_method_for_class_name`吗`some_method_for_method_name`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:34:18.363

像这样的东西应该工作：

```
class Foo
  def self.bar
    puts "I want to print #{self} and #{__method__}."
  end
end 
```

如果它不是你需要使用的类方法`self.class`。

# php - 当从另一台计算机按下相应按钮时，使用 Ajax 更改按钮的颜色

> ID：15856747
> 
> 赞同：-1
> 
> 时间：2013-04-06T22:27:21.247
> 
> 标签：php, html, mysql, css, ajax

我正在做的是为自己编写一个程序，以便在我的社区剧院中使用。我们将在控制室（Sound Booth）和后台有一台电脑。

我正在屏幕上制作一个由 10 个“按钮”组成的网格（更有可能是样式标签）。按钮中会有文本，如“Mic 1 Battery Change”，它是柔和的灰色：

```
 <a class="g">TEXT</a> 
```

期望的目标是，如果控制室按下按钮，按钮应变为红色：

```
 <a class="r">TEXT</a> 
```

这应该在控制室计算机和一个后台都发生变化，当后台人员再次单击按钮（当它是红色时）时，它在两个位置都恢复为灰色，让控制知道任务已经完成。

我无法想象使用数据库和 ajax 很难做到这一点，但是我真的比 ajax 的新手少，所以我不知道最好的方法。如果有人可以向我指出一个教程，我可以很容易地适应这一点，或者如果有人知道如何做到这一点，可以为这种事情写一些简单的代码并解释它。那将是真棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:08:37.367

您可以通过 JQuery 轮询每 x 秒调用一次的活动表到从活动表中读取的 PHP 脚本，这样您就可以检测用户是否按下了按钮。一个简单的方法是这样的：用户按下一个按钮 -> 你将活动发送到带有时间戳的活动表，所以你知道用户何时按下按钮（我们稍后会谈到）。您可以通过 JQuery 向 PHP 发送一个帖子，然后将其插入数据库中。活动表将包含：id (INT)、primary、auto_increment。button (INT) [The button id that was clicked] dateposted [timestamp] 现在，每次您使用 JQuery 和 PHP 轮询该表/调用该表时，您将轮询时间（重要）和按钮 id，我经常这样做：

客户端：（您可以像这样为每个按钮设置不同的 ID）

```
 var auto_refresh = setInterval(
    function reloadstring()
    {
            $.get("checknewactivity.php", function(buttonid){
            if (buttonid == 1) /* Say he clicked the record button for example */
            {
               $("#recordbtn").css({"background-color":"#FF0000"}); /* Make the record button red */
            }
            });
    }, 1000); // refresh every 1000 milliseconds
/* And this would poll every 1 second as it says above */ 
```

服务器端：（checkactivity.php）

```
<?php
    checkactivity();
    function checkactivity() {

        $querystats = "SELECT activity.id, activity.buttonid, activity.dateposted FROM activity ORDER BY id DESC LIMIT 1";
        $resultstats = mysqli_query($yourdbhandle,$querystats);
        $num_stats = mysqli_num_rows($resultstats);
        $rowactivity = mysqli_fetch_assoc($resultstats);

        if($num_stats > 0) { /* If there was activity */

            $activity_id = $rowactivity["id"];
                $activity_date = $rowactivity["dateposted"]; //I can't indent this here for some reason.
            $activity_buttonid = $rowactivity["buttonid"];
            $timeactivity = strtotime( "$activity_date" );
            $actualtime = time(); //The actual time in a timestamp
            $timetoseconds = $actualtime - $timeactivity; //Actual time - timeactivity

            if($timetoseconds < 6) { /* If the last activity was sent less than 6 seconds ago */
                echo "$activity_buttonid"; //This would send the last clicked button id
            }
        }                       
    }
?> 
```

这不是最好的方法，而是一种简单的方法，最好的方法是使用 webSockets 或 node.JS 来避免一遍又一遍地轮询数据库，并且只有在服务器找到后才将结果发送给客户端更新。这是一个草稿，并简要说明了如何执行此操作。

# java - 紧急数据库表大小调整（使用 JTable Customtablemodel JPanle JScrollpane）

> ID：15856749
> 
> 赞同：0
> 
> 时间：2013-04-06T22:27:28.940
> 
> 标签：java, swing, jtable, size, sizing

我有一个程序，我应该在一个比开发它的屏幕小得多的屏幕上展示它，并且由于自动调整大小的文本字段缩小到 0，它使它无法使用。为了解决这个问题，我想设置将表格的大小设置为最大大小，以便文本字段有足够的空间。

基本上，我在 JPanel 中的 JScrollPane 中的 JTable 中有一个 customtablemodel，在 Applet 中有 BoxLayout。

现在，我知道这不是最好的解决方案，因为我必须在表格中滚动，但我至少需要能够显示程序。

```
firsttablepane = new JScrollPane(firsttable);
firstmodel.addColumn("Vorname");
firstmodel.addColumn("Nachname");
firstmodel.addColumn("Benutzername");
firstmodel.addColumn("Access");
firsttable.setModel(firstmodel);
try {
  gui.guirs1 = gui.sqlc.executeSQLStatement("SELECT LID,Loginname,Vorname,Nachname,Access FROM login WHERE Geloescht=0;", (byte) 1);
  while(gui.guirs1.next()) {
    try {
      firstmodel.addRow(new Object[] {
        gui.guirs1.getString("Vorname"), gui.guirs1.getString("Nachname"), gui.guirs1.getString("Loginname"), gui.guirs1.getString("Access")
      });
    } catch(Exception exce) {
      exce.printStackTrace();
    }
  }
  ListSelectionModel listMod = firsttable.getSelectionModel();
  listMod.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  //buff.populate(gui.guirs)                                                                                              ;
  //gui.sqlc.closeConnection();
} catch(SQLException e1) {
  e1.printStackTrace();
}
firsttable.setAutoscrolls(false);
firsttable.setDragEnabled(false);
firsttable.setAutoCreateColumnsFromModel(false);
leftpanel.add(firsttablepane, BorderLayout.LINE_START); 
```

# linux - 用于全双工通信的 USB 转串口适配器

> ID：15856751
> 
> 赞同：0
> 
> 时间：2013-04-06T22:27:45.990
> 
> 标签：linux, serial-port, usb, usbserial

我有一个带串口的调制解调器，但我的电脑没有串口。因此，我买了一个如下图所示的适配器。一旦调制解调器切换到传输模式，它可以发送一些东西，但它永远无法切换回接收模式，并且它的数据灯变红。这样的适配器是否会导致此故障？我不熟悉这些通信内容，例如全双工等。

![在此处输入图像描述](https://i.stack.imgur.com/fRU7P.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:19:13.917

您的问题很可能不是适配器本身，而是软件设置。

正确设置速度、奇偶校验、流量控制等设置非常重要。

在 Linux 上，检查这些可能最简单的方法是使用`minicom`.

大多数串行端口设备的最大速度为 115200 bps（但是有些 USB/串行端口支持高达 2 mbps 的速度）。

大多数串行设备使用`8`每字节位，`n`o 奇偶校验，并使用`1`stop but（aka `8N1`）。

最后，一个重要的设置是流量控制。最好且经常支持的是硬件流控制（又名`RTS/CTS`）。有些设备不支持 RTS/CTS，但支持软件流控，即`XON/XOFF`. 不使用任何流控制通常是个坏主意。

对于您的调制解调器，您应该尝试运行`minicom -D /dev/ttyUSBn`（`n`您的设备编号在哪里，最有可能`0`），使用 进入配置模式`Ctrl` `A`，`O`并使用以下设置：速度`115200`，`8N1`（8 位/字节，无奇偶校验，1 个停止位），`RTS/CTS`（硬件流控制, 优选) 或`XON/XOFF`(sw 流量控制)。

您也可以使用 Linux 实用程序`stty`在端口上默认设置这些参数，但由于您的设备是 USB，一旦 USB 设备断开，这些设置就会丢失 - 所以最好让您的调制解调器程序知道如何配置这些设置没有外部帮助。

# sql - SQL：重新排序列表顺序

> ID：15856756
> 
> 赞同：1
> 
> 时间：2013-04-06T22:28:36.180
> 
> 标签：sql, tsql

我想遍历表格行..通过将 OrderID 设置为 @NUMCOUNT 来重新排序我的“表单选项”...

我希望能够重新排列我的列表的顺序。我需要这样做的原因是因为如果我删除一个表单选项，那么它将出现故障.. 即 (1, 2, 3, 5).. 我会想要 (1, 2, 3, 4).. ETC..

示例表：

ID OrderID FormOption

1 1 姓名

2 3 地址 2

3 2 地址 1

```
DECLARE @NUMCOUNT int
SET @NUMCOUNT = 0
WHILE (SELECT Count(OrderID) FROM FormOptions WHERE ProductID=1) > @NUMCOUNT
BEGIN
   SET @NUMCOUNT = @NUMCOUNT + 1
   PRINT 'The count is ' + CAST(@NUMCOUNT as char)
   UPDATE FormOptions SET OrderID = @NUMCOUNT WHERE ID=????
END 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T02:20:22.263

我猜您正在处理需要允许从有序列表中删除并在特定位置插入到有序列表中的东西。删除不需要使订单密集，但可以这样做：

```
delete from FormOptions
  where OrderId = @SelectedFormOption
update FormOptions
  set OrderId = OrderId - 1
  where OrderId > @SelectedFormOption 
```

您可能希望将其包装在事务中。 *（确保您了解交易，因为这非常重要。）*

插入类似：

```
update FormOptions
  set OrderId = OrderId + 1
  where OrderId >= @TargetOrderId
insert into FormOptions
  ( OrderId, ... ) values ( @TargetOrderId, ... ) 
```

交换订单头寸可以在一次更新中自动完成：

```
 update FormOptions
   set OrderId = case when OrderId = @TargetA then @TargetB else @TargetB end
   where OrderId in ( @TargetA, @TargetB ) 
```

`update`可以编写类似的方法将单个表单选项按顺序向上或向下移动一个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:01:55.610

我建议不要使用计数来订购。过去，我有多个列用于根据用户的决定进行排序。

快速解决问题的一个选项是提供 orderID > Max(orderID) 这样您就可以确保每个新项目的 orderID > 高于最大值，而不管列表中的项目数量如何。

然后，您可以拥有一个仅用于排序目的的列，并允许用户设置事物的顺序。

有时更容易（也更好）思考如何改变你正在做的事情，而不是编写代码来做你的想法:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T22:59:48.503

我建议单独留下 OrderId，因为@OldProgrammer 已经说过他们仍然会按顺序进行，而且（除非我遗漏了什么）它似乎会增加不必要的开销。

如果您真的想要连续的数字，大概是出于演示目的，那么要么将其推送到表示层，要么创建一个视图来执行类似的操作

```
SELECT 
    ROW_NUMBER() AS OrderNumber
    , OtherColumn
FROM FormOptions 
ORDER BY OrderID 
```

# asp.net-mvc - 附加到 DOM

> ID：15856765
> 
> 赞同：0
> 
> 时间：2013-04-06T22:29:28.483
> 
> 标签：asp.net-mvc, jquery, razor

我试图以一种或另一种方式在评论系统中附加来自 ajax 帖子的结果。我尝试了许多不同的方法，但它们似乎都以一种或另一种方式失败。

评论的 HTML 是：

```
@using ( Html.BeginForm( ) )
{
    <ul class="commentList">
    @foreach ( var comment in Model )
    {
        <li>
            <a href="http://www.google.com"><img src='@Url.Content("~/Images/User.png")' alt="User" /></a>
            <div class="commentBody">
                <a href="http://www.google.com">@comment.UserName </a>
                <span>@comment.CommentText </span>
                <div>
                    <abbr title='@comment.CommentDate '>@comment.CommentDate.ToString( "dd. MMMM HH:mm" )</abbr>
                    <a href="#" class="likar">Like</a>
                </div>
            </div>
        </li>
     }
        <li class="commentAdd">
            <textarea id="CommentText" name="CommentText" rows="3" cols="20"></textarea>
            <label>
                <input type="submit" value="Write comment" />
            </label>
            @Html.ValidationMessage( "CommentText" )
        </li>
    </ul>
} 
```

这是我的脚本：

```
$('input[type="submit"]').click(function(event){

    // Prevent the default behaviour.
    event.preventDefault();
    var form = $(this).parent();
    var PostComment = { "comment": $("#CommentText").val() };
    $.ajax({
        type: "POST",
        contentType: "application/json; charset=utf-8",
        url: "/Home/AddComment/",
        data: JSON.stringify(PostComment),
        dataType: "json",
        success: function (data) {
            var commentEntry = $('<li/>');
            commentEntry.append('<a href="http://www.ru.is"><img src=\'@Url.Content("~/Images/User.png")\' alt="User" /></a>');
            var diver = $('<div/>').addClass('commentBody');
            diver.append('<a href="http://www.google.com">').text(data.name).append('</a>');
            diver.append($('<span/>').text(data.comment));
            var diver2 = $('<div/>');
            diver2.append('<abbr title=\' ');
            diver2.append().text(data.timeOf);
            diver2.append('\'>');
            diver2.append().text(data.timeOf);
            diver2.append('</abbr><a href="#" class="likar">Like</a>');
            diver.append(diver2);
            commentEntry.append(diver);
            $(".commentAdd").before(commentEntry);
            // reset the form.
            form[0].reset();

        },
        error: function (xhr, err) {
            // Note: just for debugging purposes!
            alert("readyState: " + xhr.readyState +
            "\nstatus: " + xhr.status);
            alert("responseText: " + xhr.responseText);
        }
    });
}); 
```

PostComment 类是这样的：

```
 public class PostComment
{
    public string comment { get; set; }
    public string name { get; set; }
    public string timeOf { get; set; }
} 
```

的时间在 HomeController 中是这样设置的 - AddComment

```
c.timeOf = DateTime.Now.ToString("yyyy-dd-MM HH:mm:ss"); 
```

其中 c 是 PostComment 类的一个实例。

我根本无法获得正确的追加方法。如果我这样使用它，我追加 date.name 的行不会将“a href”元素添加到 DOM。有任何想法吗？因为我已经尝试了我能做的并且没有想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:31:50.977

你不能使用`.append()`你现在的方式。您只能附加完整的元素，而不是结束标签：

您可以尝试以下方法：

```
success: function(data) {

    var diver2 = $('<div>')
        .append($('<abbr>').attr('title', data.timeOf))
        .append('<a href="#" class="likar">Like</a>');

    var diver = $('<div>').addClass('commentBody')
        .append('<a href="http://www.google.com">' + data.name + '</a>')
        .append($('<span>').text(data.comment))
        .append(diver2);

    var commentEntry = $('<li>')
        .append('<a href="http://www.ru.is"><img src=\'@Url.Content("~/Images/User.png")\' alt="User" /></a>')
        .append(diver);

    $('.commentAdd').before(commentEntry);

    // reset the form.
    form[0].reset();
} 
```

注意使用该`.attr()`方法设置`<abbr>`元素的“title”属性。

# ruby-on-rails - 如何在cancan中定义这个创建权限？

> ID：15856766
> 
> 赞同：0
> 
> 时间：2013-04-06T22:29:43.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, cancan

我有一个`User`,`Product`和一个`Subscription`模型。基本上，订阅是针对特定产品的，一个产品可以有多个订阅，每个产品都属于一个用户（即作者）。用户可以是管理员或普通用户。

我的问题是：如果我想让我的普通用户*只*为他们创作的产品创建订阅，我将如何使用 cancan 来实现呢？

这就是我目前在我的能力.rb 中所拥有的。

```
class Ability
  include CanCan::Ability

  def initialize(user)
    if user
      if user.admin?
        can :manage, :all
      else # not an admin
        can :read, User
        can :manage, User, id: user.id
        cannot :create, User

        can :read, Product
        can :manage, Product, user: user

        can :read, Subscription
        # this is sort of what I want, but now nobody can create subscriptions
        can :create, Subscription, product: { user: user }
        can :manage, Subscription, product: { user: user }
      end
    else # not a user, just a guest
      can :create, User
      can :read, User
      can :read, Product
      can :read, Subscription
    end
  end
end 
```

我完全错了吗？我应该在控制器中执行此操作还是使用某种验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:39:47.957

CanCan 是解决您问题的合法解决方案。

当您询问是否应该在控制器中执行此操作时，答案是您应该使用控制器内部的 CanCan 权限来检查是否允许给定用户执行请求的操作。

通常，您可以通过调用`authorize_resource`控制器来完成此操作，但也可以使用`authorize! :create, @subscription`.

此外，您可以通过不向他们提供他们无权执行的操作的链接来帮助您的用户。

在您看来，您可以执行以下操作：

```
<% if can? :create, @product.subscriptions.build %>
  <%= link_to new_product_subscription_path(@product) %>
<% end %> 
```

除此之外，您的能力.rb 文件还有一个小问题。

```
can :manage, Subscription, product: { user: user } 
```

应该

```
can :manage, Subscription, product: { user_id: user.id } 
```

至少 CanCan wiki 页面上是这样记录的。

> 这是我想要的，但现在没有人可以创建订阅。

在尝试授权之前，您是否确保订阅具有 product_id？

如果没有 product_id，您的订阅授权将失败，因为它依赖于它的产品。

您可以通过编写`@product.subscriptions.build`而不是`Subscription.new`. 如果您使用 load_and_authorize_resource，请确保使用[https://github.com/ryanb/cancan/wiki/Nested-Resources](https://github.com/ryanb/cancan/wiki/Nested-Resources)中所示的嵌套变体。

# javascript - Javascript替换代码

> ID：15856768
> 
> 赞同：-1
> 
> 时间：2013-04-06T22:29:47.650
> 
> 标签：javascript

我在公司时间表上使用计算。

但是如果有人输入 7,5，我会用 7.5 得到 Nan，它可以工作。

我添加了此代码以确保使用的字母将计为 0。

我可以在自动替换中添加什么，使用 . 或者干脆禁止使用，

```
function getNumber(str) {
    return isNaN(str)|| str==null?0:Number(str);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:23:50.650

```
function getNumber(str){
      var num = str.replace(/,/g,".").replace(/[^\d\.]/g, "");
      return isNaN(num) ? 0 : +num;
} 
```

此函数将“，”替换为“。” 然后擦除除数字和“。”之外的所有内容；

# android - 模拟菜单按下操作不适用于所有 Android

> ID：15856772
> 
> 赞同：0
> 
> 时间：2013-04-06T22:30:29.220
> 
> 标签：android, instrumentation, keyevent, android-optionsmenu

与后来的 Android 一样，菜单按钮已被删除，当有人在 UI 中点击一次时，我调用以下代码来打开菜单项。

```
 public void singleTapOnImage(View view) {
    Log.d(TAG, "Single tap View menu option");  
    new Thread(new Runnable() {         
        public void run() {
            Instrumentation inst = new Instrumentation();  
            inst.sendKeyDownUpSync(KeyEvent.KEYCODE_MENU);
        }   
    }).start();
} 
```

此代码会在某些 Android 设备上打开选项菜单，但不是在所有设备上。您能否帮助我提供适用于所有 Android 设备的解决方案，并且如果有更好的方法来打开选项菜单，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:33:33.017

解决方案很简单。只需调用`openOptionsMenu()`活动即可。

# ruby - 如何清除到目前为止我安装的所有 ruby 和 rvm 安装

> ID：15856774
> 
> 赞同：1
> 
> 时间：2013-04-06T22:30:42.827
> 
> 标签：ruby, rvm

我对 ruby​​ 很陌生，我已经在我的机器上安装了 ruby​​，目前显示的 ruby​​ 版本是 1.9.3。但是当我尝试在 rails 上安装新项目时，即使我安装了 ruby​​ 1.9.3，它也会显示 ruby​​ 1.9.1 加载错误。在谷歌浏览了这么多时间后，我发现我可以通过安装 rvm 将默认 ruby​​ 更改为新安装的 ruby​​，我尝试安装 rvm 但不知道它是否安装正确，因为安装 rvm 后尝试进入命令 rvm default 1.9.3 它显示错误

```
ruby-1.9.3-p392 is not installed.
To install do: 'rvm install ruby-1.9.3-p392 
```

当我检查 ruby​​ -v 它显示像

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [i686-linux] 
```

有人可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:32:30.793

`rvm implode`应该删除 ~/.rvm 下的所有内容，清除所有红宝石

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:42:31.007

首先删除所有红宝石：

```
rvm remove all --gems 
```

然后是所有包：

```
rvm pkg remove 
```

最后清理所有其他类型的文件：

```
rvm cleanup all 
```

# keyboard - XKeysymToKeycode、XTestFakeKeyEvent 和映射

> ID：15856775
> 
> 赞同：2
> 
> 时间：2013-04-06T22:30:58.457
> 
> 标签：keyboard, xorg

我有以下问题：

*   我正在尝试将假键事件发送到 X 服务器。

为此，我知道两种方法：

*   XSendEvent - 我用 XK_Z 而不是 XK_Down 尝试了本[教程](http://www.doctort.org/adam/nerd-notes/x11-fake-keypress-event.html)
    *   不适用于 GTK3
*   XTestFakeKeyEvent - 请参阅下面的代码

我的问题是，这种方法都没有考虑到键盘映射。我的意思是，当我选择 AZERTY 映射时，我有一个“z”字符，正如我所期望的那样，当我选择 QWERTY 映射时，我得到一个“w”，而我心爱的 BÉPO 映射我得到一个“é”。

如何独立于键盘映射获得相同的字符？

我在 Unity 下使用 Ubuntu 12.10。

在这里，我的 XTestFakeKeyEvent 代码：

```
#include <X11/Xutil.h>
#include <X11/keysym.h>
#include <X11/extensions/XTest.h>
#include <iostream>
// The key code to be sent.
// A full list of available codes can be found in /usr/include/X11/keysymdef.h
/* g++ -o XFakeKey tst.c -L/usr/X11R6/lib -lX11 -lXtst */

char *text = "z";
main()
{
// Obtain the X11 display.
  Display *display = XOpenDisplay(0);
  if(display == NULL)
    return -1;

  Window focusWindow;
  int revert;
  XGetInputFocus(display, &focusWindow, &revert);
  KeyCode code = XKeysymToKeycode(display, XStringToKeysym(text));

  XTestFakeKeyEvent(display, code, True, CurrentTime);
  XTestFakeKeyEvent(display, code, False, CurrentTime);

  XCloseDisplay(display);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T09:29:53.790

使用`XChangeKeyboardMapping`API 将 unicode Keysym 绑定到未使用的 Keycode。

然后，您发送重新映射的键码（使用`XTestFakeKeyEvent`or `XSendEvent`），使用的应用程序`XKeycodeToKeysym`将获得您想要的符号，而与当前键盘/IME 无关。

未经测试，但似乎可以根据[此评论](https://stackoverflow.com/questions/8675797/x11-unicode-keyevent-issues#comment10808345_8676119)工作。

# excel - 同事对 1 列大量 Excel 工作表进行了排序。如何...再也不会

> ID：15856777
> 
> 赞同：0
> 
> 时间：2013-04-06T22:31:12.937
> 
> 标签：excel

我有一个 excel 工作簿，其中包含一个包含 20 列和无数行的工作表。它具有连接到数据库的条件格式规则、宏。非常重要的东西。这是问题所在，我的一位同事（我的同事可以访问工作表）决定他只对工作表的一列进行排序，而不将排序选择扩展到周围的行。所以，现在我正在从头开始重建。这将需要数周时间。

如何防止用户在不保持行完整的情况下进行排序？

# haskell - 使用通用函数映射异构数据结构

> ID：15856779
> 
> 赞同：6
> 
> 时间：2013-04-06T22:31:14.160
> 
> 标签：haskell, hlist

我正在研究 HList 实现，但我一直在尝试`map`为它实现一个函数。我尝试了很多不同的方法，但每一种方法我都会遇到与该函数相关的编译器错误。

以下是我想如何使用通用函数`Just`将其应用于输入数据结构的所有元素的示例。

```
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FlexibleInstances #-}

-- | An input heterogenous data structure
recursivePairs :: (Int, (Char, (Bool, ())))
recursivePairs = (1, ('a', (True, ())))

-- | This is how I want to use it
recursivePairs' :: (Maybe Int, (Maybe Char, (Maybe Bool, ())))
recursivePairs' = hMap Just recursivePairs

class HMap f input output where
  hMap :: f -> input -> output

-- | A counterpart of a Nil pattern match for a list
instance HMap f () () where
  hMap _ _ = ()

-- | A counterpart of a Cons pattern match for a list
instance 
  ( HMap f iTail oTail, 
    Apply f iHead oHead ) =>
  HMap f (iHead, iTail) (oHead, oTail) 
  where
    hMap f (head, tail) = (apply f head, hMap f tail)

class Apply f input output where
  apply :: f -> input -> output

instance Apply (input -> output) input output where
  apply = id 
```

有了这个，我得到以下编译器错误：

```
No instance for (Apply (a0 -> Maybe a0) Int (Maybe Int))
  arising from a use of `hMap'
The type variable `a0' is ambiguous 
```

有没有办法解决这个问题，如果没有，那为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T23:07:18.953

问题是您尝试使用具有不同参数的多态函数，但您的`Apply`实例采用函数（单类型）。您可以通过多种方式轻松解决此问题

```
data JustIfy = JustIfy
instance Apply JustIfy a (Maybe a) where
  apply _ = Just

recursivePairs' :: (Maybe Int, (Maybe Char, (Maybe Bool, ())))
recursivePairs' = hMap JustIfy recursivePairs 
```

可以很好地使用您的代码

编辑：对同一件事更通用的方法是（需要`RankNTypes`）

```
--A "universal" action that works on all types
newtype Univ f = Univ (forall x. x -> f x)
instance Apply (Univ f) x (f x) where
   apply (Univ f) x = f x

recursivePairs' :: (Maybe Int, (Maybe Char, (Maybe Bool, ())))
recursivePairs' = hMap (Univ Just) recursivePairs 
```

或者如果您使用的是最新的 ish 版本的 GHC 并且愿意打开更多扩展

```
newtype Univ' c f = Univ' (forall x. c x => x -> f x)
instance c x => Apply (Univ' c f) x (f x) where
  apply (Univ' f) x = f x

class All x
instance All x

recursivePairs' :: (Maybe Int, (Maybe Char, (Maybe Bool, ())))
recursivePairs' = hMap (Univ' Just :: Univ' All Maybe) recursivePairs 
```

这很好，从那时起它可以让你做一些事情，比如在你映射的函数中包含一个“显示”。

要获得更通用的解决方案，请查看[Oleg 的类型级别 lambda caclurus](http://okmij.org/ftp/Haskell/TypeLambdaVal.hs)，它允许您在值级别编写代码，然后自动神奇地推断出适当的类型级别程序。不幸的是，Oleg 的解决方案在这一点上相当陈旧，并且使用了我不太喜欢的 LC 的名义实现。我一直在考虑如何做得更好，但可能会推迟到可判定的平等出现在类型家庭中。

我的观点是 HLists 现在应该使用 GADTs 和 DataKinds 而不是元组来完成。类型族比函数依赖更可取，但目前更受限制，因为它们缺乏可判定的相等性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T22:22:00.747

虽然以下内容并不能完全回答这个问题（所以我不会接受它），但它确实解决了有关映射结构的问题，而不需要应用函子的任何额外实例：

```
{-# LANGUAGE MultiParamTypeClasses #-}
{-# LANGUAGE FlexibleInstances #-}

import Control.Applicative

main = do
  print $ (hPure recursivePairs :: (Maybe Int, (Maybe Char, (Maybe Bool, ()))))
  print $ (hPure recursivePairs :: ([Int], ([Char], ([Bool], ()))))

recursivePairs :: (Int, (Char, (Bool, ())))
recursivePairs = (1, ('a', (True, ())))

class HPure input output where
  hPure :: input -> output

instance HPure () () where
  hPure _ = ()

instance  
  ( Applicative f, 
    HPure iTail oTail ) => 
  HPure (iHead, iTail) (f iHead, oTail) 
  where hPure (iHead, iTail) = (pure iHead, hPure iTail) 
```

输出：

```
(Just 1,(Just 'a',(Just True,())))
([1],("a",([True],()))) 
```

# jquery - 如何在不刷新页面的情况下使用 ajax/jquery 重新加载表单？

> ID：15856780
> 
> 赞同：0
> 
> 时间：2013-04-06T22:31:31.163
> 
> 标签：jquery, ruby, ajax

我正在使用 ajax 和 rails 提交表单以使用星级对文章进行评分，但提交后表单不会重新加载，因此如果我在提交后尝试更改星级评分，该操作仍会映射为创建而不是更新？只有在我刷新页面后，星级才会改变。如何在不刷新页面的情况下使用 ajax 在页面中重新加载表单？

# asp.net - ServiceStack应该在哪里添加插件

> ID：15856782
> 
> 赞同：5
> 
> 时间：2013-04-06T22:31:57.597
> 
> 标签：asp.net, servicestack

如此简单，但我找不到任何信息或示例来准确解释应该在哪里发生这种情况。我猜此时它应该在 Configure 方法中。

谢谢你，斯蒂芬

**全球的**

```
public class AppHost : AppHostBase
{
    public AppHost() : base("Web Services", typeof(ContactsService).Assembly) { }

    public override void Configure(Container container)
    {
        //Set JSON web services to return idiomatic JSON camelCase properties
        ServiceStack.Text.JsConfig.EmitCamelCaseNames = true;

        //Show StackTrace in Web Service Exceptions
        SetConfig(new EndpointHostConfig { DebugMode = true });

        //Register any dependencies you want injected into your services
        container.Register<ICacheClient>(new MemoryCacheClient());

/*            // Redis
        container.Register<IRedisClientsManager>(c => new PooledRedisClientManager());
        container.Register<IRepository>(c => new Repository(c.Resolve<IRedisClientsManager>()));*/

        container.Register<IRepository>(new Repository());
        container.Register<IBusinessService>(new BusinessService());

        //Configure Custom User Defined REST Paths for your services
        /*ConfigureServiceRoutes();*/

        //Add a request filter to check if the user has a session initialized
        /*this.RequestFilters.Add((httpReq, httpResp, requestDto) =>
        {
            var sessionId = httpReq.GetCookieValue("user-session");
            if (sessionId == null)
            {
                httpResp.ReturnAuthRequired();
            }
        });*/

        RequestFilters.Add((httpReq, httpResp, requestDto) => new LogRequestAttribute().Execute(httpReq, httpResp, requestDto));

        Plugins.Add(new SwaggerFeature());
    }

    public static void Start()
    {
        new AppHost().Init();
    }
} 
```

**更新**

```
public AppHost() : base("Web Services", typeof(ContactsService).Assembly) { }

public override void Configure(Container container)
{
    ....

    ConfigurePlugins();
}

private void ConfigurePlugins()
{
    Plugins.Add(new ProtoBufFormat());
    Plugins.Add(new RequestLogsFeature());
    Plugins.Add(new SwaggerFeature());
}

private void ConfigureServiceRoutes()
{

}

public static void Start()
{
    new AppHost().Init();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T00:39:11.680

没有信息，因为[ServiceStack](http://www.servicestack.net/)中的[插件](https://github.com/ServiceStack/ServiceStack/wiki/Plugins)可以添加到方法中的**任何位置**。这适用于所有 ServiceStack 配置和依赖项、服务、过滤器等的注册。**`AppHost.Configure()`**

 **在方法中添加它们的位置无关紧要，`AppHost.Configure()`因为它们仅在 ServiceStack 被调用后才被**初始化。**

然而，它们以与添加它们相同的顺序被初始化（即被`IPlugin.Register()`调用）。**

# android - android中来电的国家代码

> ID：15856789
> 
> 赞同：0
> 
> 时间：2013-04-06T22:32:32.260
> 
> 标签：android, country-codes

我刚刚构建了一个检测来电的应用程序。我看到在某些手机（或不同版本的 android）中，来电号码有国家代码，一些来电号码没有。有没有办法在任何 android 手机和任何版本的 android 中获取带有国家代码的来电？

我使用广播接收器和PhoneStateListener，我在onCallStateChanged 处得到incomingNumber 的参数。所以我没有使用telephonymanager.EXTRA_PHONE_NUMBER （事实上我不知道EXTRA_PHONE_NUMBER 到底是做什么的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T22:43:37.843

这是一个代码片段，您可以在 BroadcastReceiver 中使用它来使用*libphonenumber*库提取国家/地区代码。

```
@Override
public void onReceive(Context context, Intent intent) {
  if (intent.getAction().equals(Intent.ACTION_NEW_OUTGOING_CALL)) {
    // get phone number from bundle
    String phoneNumber = intent.getExtras().getString(Intent.EXTRA_PHONE_NUMBER);

    // get country-code from the phoneNumber
    PhoneNumberUtil phoneUtil = PhoneNumberUtil.getInstance();
    try {
       PhoneNumber numberProto = phoneUtil.parse(phoneNumber, Locale.getDefault().getCountry());
       if (phoneUtil.isValidNumber(numberProto)) {
          log.d("TAG", "Country Code: " + numberProto.getCountryCode());
       } else {
          log.d("TAG", "Invalid number format: " + phoneNumber);
       }
    } catch (NumberParseException e) {
       Log.d(TAG, "Unable to parse phoneNumber " + e.toString());
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:15:36.127

您可以使用 libphonenumber 库[https://code.google.com/p/libphonenumber/完成此操作](https://code.google.com/p/libphonenumber/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T22:48:58.723

`EXTRA_PHONE_NUMBER`保存用户**输入的号码**

> 一个字符串，保存最初在 ACTION_NEW_OUTGOING_CALL 中输入的电话号码，或在 ACTION_CALL 中拨打的实际号码。

通过[http://developer.android.com/reference/android/content/Intent.html#EXTRA_PHONE_NUMBER](http://developer.android.com/reference/android/content/Intent.html#EXTRA_PHONE_NUMBER)

另外，您是否看过：[如何从来电中获取电话号码？](https://stackoverflow.com/questions/13154445/how-to-get-phone-number-from-an-incoming-call)?

# asp.net - 返回主页时会话消失

> ID：15856790
> 
> 赞同：0
> 
> 时间：2013-04-06T22:32:43.620
> 
> 标签：asp.net

我有一个在 Azure 上运行的网站，用户可以登录然后导航到其他页面（自然）。我的问题是，当我返回索引/主页时，会话就消失了。我认为这与后面代码中的登录控件及其身份验证方法有关，但我尝试将另一个登录名放在具有相同身份验证事件的另一个页面上，但这完全没问题。

我还没有找到有类似问题的人。

这是 index.aspx 背后的代码

```
string Connection = ConfigurationManager.ConnectionStrings["****"].ConnectionString;
protected void Page_Load(object sender, EventArgs e) {}
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e) {
  string Username = Login1.UserName;
  string pwd = Login1.Password;
  SqlConnection connection = new SqlConnection(Connection);
  connection.Open();
  //SqlCommand comm = new SqlCommand("SELECT COUNT([*****], [*****]) FROM ***** WHERE [****] = '***' AND [****] = '****'", connection);
  string sqlUserName = "SELECT [****] ,[****] FROM ***** WHERE [*****] ='" + * * * * * +"' AND [*****] ='" + * * * +"'";
  SqlCommand cmd = new SqlCommand(sqlUserName, connection);
  string CurrentName;
  CurrentName = (string) cmd.ExecuteScalar();
  if(CurrentName != null) {
    Login1.FailureText = "Welcome";
    Session["User"] = Username;
    Session["LoggedIn"] = true;
    Label1.Text = Session["User"].ToString();
    if((bool) Session["LoggedIn"] == true && Session["User"].ToString() == "admin1") {
      HyperLink3.Visible = true;
    } else if((bool) Session["LoggedIn"] == true) {
      HyperLink1.Visible = true;
    }
  } else {
    Session["User"] = "";
  }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:43:12.450

您的`if`陈述一定是在某处窃听，或者 CurrentName 为空。

```
if (CurrentName != null)
        {
            Login1.FailureText = "Welcome";
            Session["User"] = Username;
            Session["LoggedIn"] = true ;
            Label1.Text = Session["User"].ToString();
            if ((bool)Session["LoggedIn"] == true && Session["User"].ToString() == "admin1")
            {
                HyperLink3.Visible = true;
            }
            else if ((bool)Session["LoggedIn"] == true)
            {
                HyperLink1.Visible = true;
            }
        }

        else
        {
            Session["User"] = "";

        } 
```

最可能的罪魁祸首是前面的 SQL 查询。使用 SQL 查询仔细检查您的语法。我不确定您在其中组合了哪些星号变量，但它们可能会导致问题。您应该继续对该脚本进行逐行调试。在中途抓住它并检查 CurrentName 的值。

# ios - iPad引导访问

> ID：15856791
> 
> 赞同：0
> 
> 时间：2013-04-06T22:32:49.997
> 
> 标签：ios, objective-c, ipad, ios6, guided-access

在 iPad 设置应用程序的辅助功能选项中，有一个引导访问选项（在 iOS6 中可用）将 iPad 保持在一个应用程序中，并允许您控制哪些功能可用。点击主页按钮触发引导访问，然后您可以在屏幕上圈出您想要禁用的区域。我的问题是如何实施区域循环？我很好奇它们如何根据任何用户输入形成一个封闭、合理的区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:44:53.257

如果我是对的，您正在绘制矩形。如果你能够画圆：用几个矩形来近似圆。（您可以使用 UITouch 方法轻松完成此操作。对于矩形测量 startPoint。这是矩形的 x 和 y。然后测量端点。endPoint.x-startPoint.x = 矩形的宽度。高度与y 值）

这些矩形中的每一个都设置了框架/边界`UIView *theView`

这个视图应该是透明的：`[theView setBackgroundColor:[UIColor clearColor]]`

为了防止触摸/用户交互“进入”视图，使其能够进行用户交互：`[theView setUserInteractionEnabled:YES]`

将这些视图添加到超级视图 - 确保这些视图覆盖超级视图的所有其他层。现在，您无法与位于这些视图下的任何内容进行交互，并且您的行为与引导式访问类似。

# php - 将javascript变量（来自knockout.js）发送到php并返回结果

> ID：15856792
> 
> 赞同：0
> 
> 时间：2013-04-06T22:32:57.057
> 
> 标签：php, javascript, knockout.js

我怎样才能完成以下行为。

1.  从 knockout.js 表单获取输入后，将变量发送到要处理的页面。该页面使用PHP

2.  PHP页面接收来自knockout.js表单的输入并运行一些计算然后返回结果

3.  然后在原始页面上接收该变量，然后通过剔除显示

例如，假设我有以下

```
//knockout_form.js
self.addItem = function() {
    var itemNum = self.newItem; //variable received from knockout form

    var returnedVariable = ???? **send itemNum to processing.php which will then return it**

    self.itemNumbers.push(new ItemEntry(retunredVariable, "$20.00")); //
} 
```

我知道可以使用 jQuery/Ajax 发布到 processing.php，但是如何将 processing.php 中的计算数据返回到 javascript 页面？

**在下面编辑。数据似乎已发送到 processing.php（显示在网络选项卡中），但未显示警报。**

```
// Operations
self.addItem = function() {
    var itemNum = self.newItem;

    $.getJSON("processing.php?itemNum=" + itemNum),function(data) {
        alert(data); //this does not appear
        self.itemNumbers.push(new ItemEntry(data.result, "$20.00"));
    }
} 
```

这是php

```
//$result = $_GET['itemNum'];
$result = "test";  //set it just to be sure it's working
echo json_encode(array("result" => $result)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:40:50.800

Knockout 本身没有任何特殊的 ajax 调用方式，通常您会使用 jQuery。请参阅[http://knockoutjs.com/documentation/json-data.html](http://knockoutjs.com/documentation/json-data.html)。

所以像：

```
self.addItem = function() {
    var itemNum = self.newItem;

    $.getJSON("processing.php?itemNum=" + itemNum,function(data) {
        self.itemNumbers.push(new ItemEntry(data.result, "$20.00"));
    });
} 
```

这假设您的 PHP 脚本正在输出有效的 JSON。就像是：

```
<?php
$result = doCalculations($_GET['itemNum']);
echo json_encode(array("result" => $result));
?> 
```

这是未经测试的，但你明白了。

# c# - 动态 where 子句的最简单方法

> ID：15856793
> 
> 赞同：3
> 
> 时间：2013-04-06T22:33:02.107
> 
> 标签：c#, entity-framework, lambda, linq-to-entities

在 EF 中生成动态 where 子句时，我遇到了信息过载问题。一些解决方案看起来非常过时（我的目标是 .NET 4.5 和 EF 5）。

这是我所拥有的：

```
public enum PersonTypes
{
    Lazy = 1,
    Awesome = 2,
    SuperHero = 3
}

public bool IncludeLazyPeople { get; set; }
public bool IncludeAwesomePeople { get; set; }
public bool IncludeSuperHeroPeople { get; set; } 
```

使用 EF 我需要查询与提供的布尔值匹配的人员类型。

我调查了这个： [http ://www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

这就是我想出的：

```
// create an expression that would include none of the person types
var personTypeExpression = PredicateBuilder.False<DAL.Models.Person>();

if (IncludeLazyPeople)
    personTypeExpression = personTypeExpression.Or(person => person.PersonType == (int)PersonTypes.Lazy);

if (IncludeAwesomePeople)
    personTypeExpression = personTypeExpression.Or(person => person.PersonType == (int)PersonTypes.Awesome);

if (IncludeSuperHeroPeople)
    personTypeExpression = personTypeExpression.Or(person => person.PersonType == (int)PersonTypes.SuperHero);

// filter the people for all included types
var filteredPeople = ctx.People.Where(personTypeExpression); 
```

那没有用，因为我没有包含 AsExpandable 扩展。在我尝试之前，我想知道是否有更简单的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:52:04.213

```
var query = context.People.AsQueryable();

if (IncludeLazyPeople)
    query = query.Where(person => person.PersonType == (int)PersonTypes.Lazy);

if (IncludeAwesomePeople)
    query = query.Where(person => person.PersonType == (int)PersonTypes.Awesome);

if (IncludeSuperHeroPeople)
    query = query.Where(person => person.PersonType == (int)PersonTypes.SuperHero); 
```

如果您只需要`AND`逻辑，那么您可以`Where()`在查询中调用其他方法。否则，如果您需要更强大的选项，请使用谓词构建器或[System.Linq.Expressions](http://msdn.microsoft.com/en-au/library/system.linq.expressions.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:05:31.977

```
ParameterExpression p = Expression.Parameter(typeof(Person));
Expression personType = Expression.MakeMemberAccess(p, typeof(Person).GetProperty("PersonType"));
Expression personTypeExpression = Expression.Constant(false);
if (IncludeLazyPeople)
    personTypeExpression = Expression.OrElse(personTypeExpression, Expression.Equal(personType, Expression.Constant((int)PersonTypes.Lazy)));

//... same as above only with different Constant values

// filter the people for all included types
var filteredPeople = ctx.People.Where(Expression.Lambda<Func<Person,bool>>(personTypeExpression,p)); 
```

这应该大致符合您的要求。没有检查编译器，希望没有太多错别字。

# android - 有效加载图像以进行“中心”缩放

> ID：15856796
> 
> 赞同：1
> 
> 时间：2013-04-06T22:33:53.627
> 
> 标签：android, android-widget

我在手机的文件系统中存储了全尺寸的图像文件，以及一种加载缩略图版本以用于`ListView`. [我基本上使用 SO 和这里](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)经常讨论的子采样技术。

链接中概述的方法要求您提供以像素为单位的目标宽度和高度，以便子采样工作。对于我的列表视图，这很好，因为缩略图宽度/高度被定义为维度资源，并且很容易转换为像素。这些`ImageView`被加载到使用一个`scaleXY`刻度类型。

除了列表视图，我还有一个单独的详细视图，我想在屏幕顶部将所选图像显示为横幅，但使用比例类型`center`（不调整大小）。目标`ImageView`在 a 内`RelativeLayout`，高度固定（在资源区域中设置），宽度设置为`fill_parent`。

所以我有3个问题：

1.  鉴于我不希望对横幅图像进行任何特殊的调整大小（`scaleType`设置为`center`），那么子采样技术是否仍然适用于此处？
2.  如果 #1 的答案是**yes**，那么我需要能够计算目标视图的宽度。由于目标的宽度（与高度不同）不像`ImageView`缩略图视图那样固定，我怎样才能找到有效宽度`fill_parent`？
3.  如果#1 的答案是**否定**的，那么我怎样才能有效地将这个图像加载到视图中而不会有内存异常的风险？

谢谢！

# ruby-on-rails - 如何在保存到数据库之前更改表单字段值？

> ID：15856797
> 
> 赞同：2
> 
> 时间：2013-04-06T22:34:04.203
> 
> 标签：ruby-on-rails, forms, action

我有形式：

```
<%= form_for(@event) do |f| %>
  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>

  <div class="field">
    <%= f.label :date %><br />
    <%= f.text_field :date %>
  </div>

  <div class="field">
    <%= f.label :repeat %><br />
    <%= repeat_types = ['none', 'daily', 'monthly', 'yearly'] 
        f.select :repeat, repeat_types %>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

我需要将更改的数据保存到“重复”字段中：

```
:repeat = Event.rule(:date,:repeat) 
```

在将重复字段保存到数据库之前，我在哪里以及如何修改它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T08:08:04.003

一般来说，如果您需要在将数据保存到数据库之前稍微更改用户在表单中输入的数据，您可以在 Rails 中使用[ActiveRecord 回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)（例如`before_save`. 例如，您可能有以下内容：

```
class Event < ActiveRecord::Base
  before_save :set_repeat

  private
  def set_repeat
    self.repeat = Event.rule(date, repeat) if ['none', 'daily', 'monthly', 'yearly'].include? repeat
  end
end 
```

在将实例保存到数据库之前，这将始终`set_repeat`在实例上运行私有回调方法，如果它当前是其中的字符串之一，则更改属性（但您应该根据需要调整此逻辑——我只是猜测您可能想要什么）。`Event``repeat``['none', 'daily', 'monthly', 'yearly']`

因此，我会将[ActiveRecord 回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#available-callbacks)视为在保存模型属性之前修改模型属性的一般方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T08:07:52.707

我发现我可以在我的事件模型中使用 ActiveRecords 回调。如下：

```
 before_save do
    self.repeat = Event.rule(self.date, self.repeat )
  end 
```

# clojure - 如何在 Clojure 中制作本地类型？

> ID：15856805
> 
> 赞同：3
> 
> 时间：2013-04-06T22:34:56.283
> 
> 标签：clojure

我想在 Clojure 中创建一个仅在当前命名空间中可见的类型。

有一个类型`my-type`定义在`my.ns`

```
(ns my.ns)

(deftype my-type
  Protocol
  (some-function[])) 
```

如何避免通常的导入策略，将类型设为私有？

```
(ns other.ns
  (:import my.ns.my-type)

(->my-type) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T00:59:06.433

你不能阻止你的类型被导入，因为它们只是公共类。您可以像这样将工厂函数设为私有：

```
(deftype Foo [])

(alter-meta! #'->Foo assoc :private true) 
```

对于完全隐藏的“类型”，您可以`reify`在私有工厂函数中使用：

```
(defn ^:private make-foo [& args]
  (reify SomeProtocol
    (method1 [this] ...))) 
```

这里的一个潜在问题是您将无法使用`extend-type`和类似来增加这样的“类型”。

另一方面，协议可以设为私有，但需要注意的是其随附的接口仍将是公开的：

```
(defprotocol ^:private PFoo
  (^:private foo [this])) 
```

`:private`协议 Var 和各个方法都需要元数据，因为它们接收自己单独的 Var。有了上述内容，接口`some.ns.PFoo`仍然是公共的，但协议`some.ns/PFoo`不会。

# android - 使用 achartengine 绘制水平条形图的问题

> ID：15856806
> 
> 赞同：1
> 
> 时间：2013-04-06T22:35:11.960
> 
> 标签：android, bar-chart, achartengine

我正在制作一个水平条形图。我在左轴上总共有 24 个标签。我在绘制条形图时遇到了几个问题：

1) 当条形图开始时，我显示的条目数量有限。用户可以滚动查看其他条目。正如您在图 1 中看到的，一条条出现在 Y 轴的“下方”。我无法弄清楚如何将所有栏保持在轴的顶部。

2）第二个问题是值（或条形）向下移动了一个。“00 AM”标签前面没有条，但在上午 11 点的最后一个条目下方有一个额外的条，如第二张图像所示。怎么换杠？

3）不是每个标签都有焦油，而是一种我可以在这些标签之间显示条的方式？

以下是我得到的图表：

![图 1](https://i.stack.imgur.com/jRRtR.png)

![图 2](https://i.stack.imgur.com/XFFel.png)

这是代码片段的代码：

```
public class TimeCravingBarChart extends Activity {    

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        //requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.timecraving_graph);
        final GraphicalView gv =createIntent();
        RelativeLayout rl=(RelativeLayout)findViewById(R.id.timegraph);

        LayoutParams l1 = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);  
        rl.addView(gv,l1);
    }

    public GraphicalView createIntent() {
        String[] titles = new String[] { "Urge Level"};
        List<double[]> values = new ArrayList<double[]>();

        values.add(new double[] { 6, 5, 3, 2, 6, 1, 6, 5, 3, 2, 6, 1, 6, 5, 3, 2, 6, 1, 6, 5, 3, 2, 6, 1});

        int[] colors = new int[] { Color.parseColor("#77c4d3")};
        XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
        renderer.setOrientation(Orientation.VERTICAL);
        setChartSettings(renderer, "Urge vs TimeOfTheDay Pattern", "Time of the day", "Urge", 1,
            12, 0, 7, Color.WHITE, Color.WHITE);
        renderer.setXLabels(0);
        renderer.setYLabels(10);
        renderer.setXRoundedLabels(false);
        //renderer.setYRoundedLabels(false);
        renderer.addXTextLabel(0, "00 AM  ");
        renderer.addXTextLabel(1, "01 AM  ");
        renderer.addXTextLabel(2, "02 AM  ");
        renderer.addXTextLabel(3, "03 AM  ");
        renderer.addXTextLabel(4, "04 AM  ");
        renderer.addXTextLabel(5, "05 AM  ");
        renderer.addXTextLabel(6, "06 AM  ");
        renderer.addXTextLabel(7, "07 AM  ");
        renderer.addXTextLabel(8, "08 AM  ");
        renderer.addXTextLabel(9, "09 AM  ");
        renderer.addXTextLabel(10, "10 AM  ");
        renderer.addXTextLabel(11, "11 AM  ");
        renderer.addXTextLabel(12, "12 Noon  ");
        renderer.addXTextLabel(13, "1 PM  ");
        renderer.addXTextLabel(14, "2 PM  ");
        renderer.addXTextLabel(15, "3 PM  ");
        renderer.addXTextLabel(16, "4 PM  ");
        renderer.addXTextLabel(17, "5 PM  ");
        renderer.addXTextLabel(18, "6 PM  ");
        renderer.addXTextLabel(19, "7 PM  ");
        renderer.addXTextLabel(20, "8 PM  ");
        renderer.addXTextLabel(21, "9 PM  ");
        renderer.addXTextLabel(22, "10 PM  ");
        renderer.addXTextLabel(23, "11 PM  ");

        int length = renderer.getSeriesRendererCount();
        for (int i = 0; i < length; i++) {
          SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
          seriesRenderer.setDisplayChartValues(true);
        }

        final GraphicalView grfv = ChartFactory.getBarChartView(TimeCravingBarChart.this, buildBarDataset(titles, values), renderer,Type.DEFAULT);   
        return grfv;
      }
      protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) {
            XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
            renderer.setAxisTitleTextSize(20);
            renderer.setLabelsTextSize(20);
            renderer.setLegendTextSize(20);
            renderer.setPanEnabled(true, false);
            renderer.setBarSpacing(0);
            renderer.setOrientation(Orientation.VERTICAL); 
            renderer.setZoomEnabled(false, false);
            renderer.setMarginsColor(Color.parseColor("#EEEDED"));
            renderer.setXLabelsColor(Color.WHITE);
            renderer.setYLabelsColor(0,Color.WHITE);

            renderer.setApplyBackgroundColor(false);
            int length = colors.length;
            for (int i = 0; i < length; i++) {
              SimpleSeriesRenderer r = new SimpleSeriesRenderer();
              r.setColor(colors[i]);
              renderer.addSeriesRenderer(r);
            }
            return renderer;
          }
      protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) {
            XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
            int length = titles.length;
            for (int i = 0; i < length; i++) {
              CategorySeries series = new CategorySeries(titles[i]);
              double[] v = values.get(i);
              int seriesLength = v.length;
              for (int k = 0; k < seriesLength; k++) {
                series.add(v[k]);
              }
              dataset.addSeries(series.toXYSeries());
            }
            return dataset;
          }
      protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
              String yTitle, double xMin, double xMax, double yMin, double yMax, int axesColor,
              int labelsColor) {
            renderer.setYLabelsAlign(Align.RIGHT);
            renderer.setYTitle(yTitle);
            renderer.setXAxisMin(xMin);
            renderer.setXAxisMax(xMax);
            renderer.setYAxisMin(yMin);
            renderer.setYAxisMax(yMax);
            renderer.setMargins(new int[] { 0, 60, 50, 0 }); // top, left, bottom or right 
            renderer.setAxesColor(axesColor);
            renderer.setLabelsColor(labelsColor);
          }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T11:07:28.997

水平条形图的开发更像是一个实验。这就是为什么它存在一些问题，如此[处](http://code.google.com/p/achartengine/issues/detail?id=203)所述。

似乎您正在针对版本 1.0.0 进行开发。[我建议您在此处](https://repository-achartengine.forge.cloudbees.com/snapshot/org/achartengine/achartengine/1.1.0/)升级到最新的 1.1.0 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T16:14:03.470

你可以尝试类似的东西

```
renderer.setBarSpacing(1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-09T12:49:37.157

我很快面临同样的问题。我通过下面的代码行解决了这个问题

> chartView.fitBars = true

# design-patterns - MQTT 主题缩放

> ID：15856810
> 
> 赞同：1
> 
> 时间：2013-04-06T22:35:44.760
> 
> 标签：design-patterns, push-notification, cloud, mqtt

我对 MQTT 的功能和整体推送设计有一些简短的问题。所以这里有一个场景，让我们以 Twitter 为例；Twitter 希望向个人用户发送推送通知。因此，假设您在我发推文时订阅了我的通知主题。这将是 MQTT 的适当主题层次结构和用例吗？

根据我对发布/订阅系统的了解，这会变得非常麻烦。您不必为每个单独的用户设置一个主题吗？这类系统中的主题是否有限制？拥有数百万用户的大型应用程序如何发送推送通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T09:08:56.800

是的，MQTT 正是您想要的。

然而 MQTT 只是一个协议，主题数量的限制取决于它的实现。[我使用Netty](http://netty.io/)构建了自己的 MQTT 服务器，它可以在单台机器上向超过一百万个客户端推送消息。对于开源解决方案，您可以查看[mosquitto](http://mosquitto.org/)，它是用 C 编写的最广泛使用的 MQTT 服务器。希望对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T23:09:41.213

缩放在任何系统中都是一个问题。

MQTT——嗯，一些代理，特别是 IBM WebSphere MQ、RSMB 和 mosquitto——支持桥的概念——它为主题启用卫星、网格和树层次结构。

您当然不太可能有数百万客户连接到单个代理（但上述所有实现都可以很好地扩展到数十万）。您需要考虑代理的主题布局和物理层次结构，以及一些负载平衡和连接本地化。

# html - 表格的 Html 非直线边框衬垫

> ID：15856811
> 
> 赞同：0
> 
> 时间：2013-04-06T22:36:07.167
> 
> 标签：html, css, html-table

我想通过 Html/Css（如果需要 Javascript）制作一个表格，基本上如下所示：

![样品表](https://i.stack.imgur.com/IDu9w.jpg)

如您所见，该表中的每一行都有一个底部边框，该边框从表中的图像上方开始，然后向下延伸到其他列。有没有办法做到这一点？（也许有透明图像？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:51:55.667

您可以使用带有旋转的 psudo 元素来解决此问题：

看看这个 jsfiddle [http://jsfiddle.net/zRMLr/](http://jsfiddle.net/zRMLr/)

您可能必须经常使用这些数字才能使其与您想要的任何东西一起使用。

我在这个演示中使用的（无图像）但仅适用于 IE9+

html:

```
<table>
    <tr><td><div></div></td><td></td><td>Some sort of text</td></tr>
    <tr><td><div></div></td><td></td><td>Some sort of text</td></tr>
    <tr><td><div></div></td><td></td><td>Some sort of text</td></tr>
</table> 
```

CSS：

```
table {
    width: 400px;
}

td:first-child {
    border-top: 1px solid black;
    width: 20px;
}

td:first-child:after {
    content: '';
    border-top: 1px solid black;
    display: block;
    width: 28px;
    height: 1px;
    float: left;
    position:relative;
    top: -5px;
    left: 24px;
    transform:rotate(45deg);
    -ms-transform:rotate(45deg); /* IE 9 */
    -moz-transform:rotate(45deg); /* Firefox */
    -webkit-transform:rotate(45deg); /* Safari and Chrome */
    -o-transform:rotate(45deg); /* Opera */
}

td:first-child div {
    width: 10px;
    height: 10px;
    background-color: red;
}

td:nth-child(2) {
    width: 14px;
}

td:last-child {
    border-bottom: 1px solid black;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:43:05.907

为了达到预期的效果，您可以做的是：

> 1.  创建一个带有左/右边框的 div
> 2.  使用 CSS3 规则旋转 div 以产生这种效果

或者

> 1.  创建一个带有左/右边框的 div
> 2.  使用边界半径来达到预期的效果

我希望这会有所帮助，如果您愿意，我可以为您带来一些代码示例

# javascript - 在没有滚动条的情况下使画布尽可能大

> ID：15856813
> 
> 赞同：3
> 
> 时间：2013-04-06T22:36:16.487
> 
> 标签：javascript, jquery, html5-canvas

我想创建一个网页，其中包含一个画布对象，该对象填充屏幕而不创建滚动条。

将画布宽度和高度设置为 $(window).height() 和 $(window).width() 会导致滚动条。将宽度减少几个像素并不可靠，因为我需要减少的数量因浏览器而异。

有没有跨浏览器的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T22:43:31.787

在 Chrome 中，这对我有用。

```
<html>
    <head>
        <title></title>
        <script>
           function init() {
                var canvasBG = document.getElementById("test");
                var ctxBG = canvasBG.getContext("2d");

                canvasBG.style.width = window.innerWidth;
                canvasBG.style.height = window.innerHeight;
            };

            window.onload = init;
        </script>
    </head>
    <body>
        <canvas id="test" style="background:#eeeeee; 
               margin:0; padding:0; 
               position:absolute; 
               top:0; left:0">
        </canvas>
    </body>
    </html> 
```

*更新：*您可能还希望将调整大小侦听器附加到页面，因此如果用户调整页面大小，您可以重置宽度/高度。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T22:49:03.670

所有支持canvas元素的浏览器也支持css固定定位。所以做这样的事情：

```
#my_canvas {
  position:fixed;
  top:0;
  left:0;
  bottom:0;
  right:0;
} 
```

# perl - 如何使用perl密码保护单元格或单元格范围excel 2007

> ID：15856814
> 
> 赞同：0
> 
> 时间：2013-04-06T22:36:18.967
> 
> 标签：perl

我必须编写代码来密码保护工作表以及密码保护单元格。到目前为止，我已经尝试过以下代码

```
#!c:\perl\bin\
use strict;

use Win32::OLE qw(in with);
use Win32::OLE::Const 'Microsoft Excel';
use Win32::OLE::Variant;
use Win32::OLE::NLS qw(:LOCALE :DATE);

$Win32::OLE::Warn = 3; # Die on Errors.
use Spreadsheet::WriteExcel;
my $excelfile = 'protect.xls';

my $Excel = Win32::OLE->GetActiveObject('Excel.Application')
    || Win32::OLE->new('Excel.Application', 'Quit'); 
$Excel->{DisplayAlerts}=0;   
my $Book = $Excel->Workbooks->Add();
$Book->SaveAs($excelfile); 
my $Sheet = $Book->Worksheets("Sheet1");
$Sheet->{Name} = "DidItInPerl";

my $vtfalse =  Variant(VT_BOOL, 0);
my $vttrue =  Variant(VT_BOOL, 1);
my $Range = $Sheet->Range("A1:c2");

$Sheet->Protection->AllowEditRanges->Add({Title=>"MyRange", Range=>$Range},'1222');

 $Sheet->Protect(                                         
 {DrawingObjects=>$vttrue, 
 Contents=>$vttrue, 
 Scenarios=>$vttrue,}); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:36:04.950

您需要更改此行：

```
$Sheet->Protection->AllowEditRanges->Add({Title=>"MyRange", Range=>$Range},'1222'); 
```

至：

```
$Sheet->Protection->AllowEditRanges->Add(
    "MyRange", $Range, '1222' ); 
```

# c# - 从服务器端代码中检索访问令牌

> ID：15856815
> 
> 赞同：0
> 
> 时间：2013-04-06T22:36:23.027
> 
> 标签：c#, facebook-c#-sdk

我是针对 Facebook 开发的新手。我需要能够从我的网站（c#.NET 和 asp.net）发布到其他人的墙上。我已经注册了一个 Facebook 应用程序来执行此操作。

当我在我的网站上按下一个按钮时，我想将内容分享给我自己的用户列表，这些用户向我提供了他们的 Facebook URL。他们将授予 FB 应用程序对其墙的权限。

关于如何做到这一点的信息并不多。我需要：

1.  使用 Facebook SDK 在服务器端检索新的访问令牌。
2.  给定一个 facebook url，获取用户的个人资料
3.  分享他们墙的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:34:37.300

[首先从https://github.com/barans/FacebookCsharpSdk](https://github.com/barans/FacebookCsharpSdk)下载 nuget 包或 dll

从 www.facebook.com/developers 填写 appid 和 secret

```
var config = new Dictionary<string, object>();
config.Add("appId", "3955.......");
config.Add("secret", "4c1d...............");
config.Add("fileUpload", true); //optional
FacebookClient client = new FacebookClient(config); 
```

此代码检索访问令牌 client.getAccessToken();

此代码检索公开可用的当前用户信息。你可以用“999999”之类的 facebook id 代替我

```
client.api("/me", "GET", null)); 
```

facebook 不允许服务器侧墙发布给任意用户。您只能发布到当前用户的墙上，首先您应该询问 publish_stream 权限。在得到这段代码之后，

```
request.Method = FacebookApiMethodType.POST;
request.Path = "/me/feed";
request.Params = new NameValueCollection();
request.Params.Add("link", "www.arcademonk.com");
request.Params.Add("message", "C# SDK Batch Request Messsage"); 
```

您可以在 github 页面上找到所有文档。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:53:11.133

我使用 php 和 javascript 连接 FB SDK。我不知道它可以实现到 c#

1.  您可以通过 FB.getLoginStatus developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/ 获取 accessToken

2.  [您可以通过“范围”参数（查看 Graph API） http://developers.facebook.com/docs/getting-started/graphapi/](http://developers.facebook.com/docs/getting-started/graphapi/)获得一些许可来授予您想要的东西

3.  将一些文本分享到墙上（提要）请参阅 Graph API [http://developers.facebook.com/docs/reference/api/publishing/上的“发布”](http://developers.facebook.com/docs/reference/api/publishing/)

我希望它对你有帮助。对不起我的英语水平。

# java - 如何找出线程处于等待状态的时间

> ID：15856816
> 
> 赞同：4
> 
> 时间：2013-04-06T22:36:27.100
> 
> 标签：java

简短版：在java中，有没有办法找出线程处于等待状态的时间？如果相关，我所指的对象会通过调用`condition.await()`.

长版：（这是一道作业题）

我正在开发一个程序，该程序创建 10 个供应商线程和 10 个消费者线程，以及一个同步的公共“会议室”。供应商线程休眠一会儿，产生一个随机数，并且（如果会议室的数据字段为空），将随机数放入该字段并标记为具有相同 id 的消费者线程。如果数据字段不为空，则它们`await`处于 Occupied 状态。消费者线程检查会议室中的数据是否为他们标记：如果没有，则他们`await`处于错误ID 条件。如果是这样，他们会将数字存储在数据字段中，将其设置为 null 并调用`Occupied.signalAll()`以通知供应商线程数据字段现在为空。（供应商线程调用`wrongID.signalAll()`以通知消费者线程该字段中有新数据）。

我有几个诊断`println`声明（供应商 0 进入会议室，留下数据/供应商 1 进入等候室......），一切似乎都运行良好。我还想在线程唤醒时打印语句，显示它们处于等待状态的时间。这可能吗？

另外，如果有人在这里看到我的逻辑中的任何缺陷，请随时向我指出（这是我第一次涉足多线程）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:11:20.113

由于您无法覆盖`wait()`(it's `final`) 或`Condition`(除非您自己制作`Lock`和`Condition`实现..)，我建议您尽可能做最简单的事情。

我想你的线程中有这样的代码（消费者和供应商）：

```
while (conditionForWaiting) {
    condition.await()
} 
```

`System.currentTimeMillis()`这样，您可以在进入 while 循环之前添加时间戳（如果`conditionForWaiting`为真！）。然后，只需打印`(System.currentTimeMillis()-startTime)/1000`即可打印线程等待的秒数。或者将它保存到一个字段并有一个吸气剂，无论你想用它做什么。

# r - URL 请求，python 到 R 的翻译请

> ID：15856821
> 
> 赞同：1
> 
> 时间：2013-04-06T22:37:36.250
> 
> 标签：r

我正在尝试通过 mt gox API (mtgox.com) 请求一些数据，并且 python 中有一些示例代码我想基本上复制到 R 中。

```
import hmac, base64, hashlib, urllib2
base = 'https://data.mtgox.com/api/2/'

def makereq(key, secret, path, data):
hash_data = path + chr(0) + data
secret = base64.b64decode(secret)
sha512 = hashlib.sha512
hmac = str(hmac.new(secret, hash_data, sha512))

header = {
    'User-Agent': 'My-First-Trade-Bot',
    'Rest-Key': key,
    'Rest-Sign': base64.b64encode(hmac),
    'Accept-encoding': 'GZIP',
}

return urllib2.Request(base + path, data, header) 
```

我已经有一些 R 代码

```
install.packages("base64")
install.packages("caTools")
install.packages("digest")
install.packages("RCurl")
library(RCurl)
library(caTools)
library(base64)
base<- "https://data.mtgox.com/api/2"
path<- "BTCUSD/money/ticker"
APIkey<-"******" #this is private but its a long hex number
secretAPIkey<-"*****" #this too, but this is in base64

makeReq<-function(key, secret, path, post_data)
{
  browser()
  message <- paste(path,  NULL, post_data)
  secret<-base64decode(secret,"character")
  theHmac <-hmac(secret,message,"sha512")
  header <- 
  {
    c(
    User.Agent = "My Bot",
    Rest.Key = key,
    Rest.Sign = base64encode(theHmac),
    Acccept.encoding = "GZIP"
    )
  }
  return (getURL(paste(base,path), post_data, header) )
} 
```

我不知道如何让“标题”工作，而且我可能错误地使用了 getURL()。如果您想查看整个问题，请参阅此处的说明[https://bitbucket.org/nitrous/mtgox-api/overview](https://bitbucket.org/nitrous/mtgox-api/overview)，向下滚动到第一个代码块。

但我可能只是在使用 R 标头语法时犯了一些基本错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T23:01:14.037

尝试使用 postForm（来自 RCurl）而不是 getURL：

```
postForm(paste(base,path),
  .opts = list(postfields = post_data,
              useragent   = 'R',
              httpheader  = c('Rest-Key'  = key,
                              'Rest-Sign' = base64encode(theHmac)),
              timeout = 4,
              ssl.verifypeer = FALSE)
         ) 
```

# javascript - Javascript oop未定义值：添加范围的方法？

> ID：15856822
> 
> 赞同：0
> 
> 时间：2013-04-06T22:37:44.653
> 
> 标签：javascript, oop, scope, prototype, apply

**代码：**

```
var test = {
    con: true
};

var conrun= function(){
    return this.con;
};

Function.prototype.curry = function(scope){
    var fn = this;
    var scope = scope||window;
    return function(){
        fn.apply(scope,arguments);
    }
}

conrun = conrun.curry(test);
alert(conrun());
//result:undefined 
```

"curry" 方法，函数将返回，"conrun" fonkiyonuna "test" 添加到...的范围

我该怎么办 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:46:18.370

你`curry`失去了返回值。将该行更改为：

```
return fn.apply(scope, arguments); 
```

# javascript - JS 原型，创建具有新特性的对象

> ID：15856823
> 
> 赞同：1
> 
> 时间：2013-04-06T22:37:59.317
> 
> 标签：javascript, constructor, prototype

我刚开始使用 JS，并为一个盒子创建了一个构造函数。现在我想要一个可以存储图像的盒子和一个可以存储文本的盒子。如何使用原型声明新的盒子对象？

//盒子构造函数

```
function Box(x, y, w, h) {
  this.x = x;
  this.y = y;
  this.w= w;
  this.h= h;    
} 
```

//图像框功能：

```
 this.src = ....
 this.title = ... 
```

//文本框功能：

```
 this.font = ...
  this.font-size=...
  this.color=.... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T22:42:27.103

```
function Box(x, y, w, h) {
    this.x = x;
    this.y = y;
    this.w = w;
    this.h = h;    
} 
```

* * *

```
function ImageBox(x, y, w, h) {
    Box.call(this, x, y, w, h); // Apply Box function logic to new ImageBox object

    this.src = ....
    this.title = ...
}
// Make all ImageBox object inherit from an instance of Box
ImageBox.prototype = Object.create(Box.prototype); 
```

* * *

```
function TextBox(x, y, w, h) {
    Box.call(this, x, y, w, h); // Apply Box function logic to new TextBox object

    this.font = ...
    this.font-size =...
    this.color =....
}
// Make all TextBox object inherit from an instance of Box
TextBox.prototype = Object.create(Box.prototype); 
```

# wpf - WPF - window.IsEnabled setter 持续时间长

> ID：15856824
> 
> 赞同：2
> 
> 时间：2013-04-06T22:38:29.637
> 
> 标签：wpf, window, duration

我对 WPF - C# 5.0、.NET4.5 中的 Window.IsEnabled 属性有疑问。

我有以下场景（简化）：

1) 带按钮的表单

2）用户触发长时间计算操作（从数据库中获取一些数据）

3) 用户能够与新数据交互

我已经实现了以下方式：

1）点击处理程序**禁用**窗口（用于用户交互）并异步触发操作（这可以同步进行，没关系）

2）当异步操作完成时，窗口被**启用**（通过**myWindowInstance.IsEnabled = true**）

我的问题是：

myWindowInstance.IsEnabled = true 大约需要 20 秒。我必须注意窗口中有一个 dataGridView 用于获取数据。但是，如果不禁用和重新启用胜利，这一切都需要大约 1 秒。另一个有趣的点是，当我连接到小型本地数据库时，win.IsEnabled 设置器很快就完成了。与此相反，如果我使用远程大型数据库，如前所述，此操作需要 20 秒。在这两种情况下，我只获取 100 行。

有谁知道为什么简单的 setter 需要这么多时间？

非常感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T01:59:32.127

除了禁用窗口之外，您可以做的一件事是仅启用/禁用您在其他控件之上插入的半透明矩形，用户将无法单击任何内容。完成后，禁用它或将其 Visibility 属性设置为 Hidden。

```
<Window>
    <Grid>
        <TextBox Text="Hello" HorizontalAlignment="Left" VerticalAlignment="Top" ></TextBox>
        <Rectangle Fill="DarkGray" Opacity="0.5" />
    </Grid>
</Window> 
```

现在关于您的问题需要花费大量时间，您应该使用 Visual Studio 中的“分析”菜单来分析您的应用程序。

# c - 在 C 中复制文件错误

> ID：15856826
> 
> 赞同：0
> 
> 时间：2013-04-06T22:38:33.760
> 
> 标签：c

我试图在c中复制文件。我在复制 .txt 时没有问题，但是对于 .jpeg 之类的文件，我会遇到错误...请帮助

```
#include <stdio.h>
#include <string.h>
#include <pthread.h>
#define BUFFER_SIZE 20

pthread_mutex_t mutex;
pthread_cond_t condP;
pthread_cond_t condC;

int varProductor=0;
int varConsumidor=0;
int cantVar=0;

FILE *fileP;
FILE *fileC;

char bytes[BUFFER_SIZE];
char var;

void* funcProductor(){
    while(!feof(fileP)){        
        pthread_mutex_lock(&mutex);

        while(cantVar==BUFFER_SIZE){                    
            pthread_cond_wait(&condP,&mutex);
        }

        if(!feof(fileP)){       
            bytes[varProductor]=getc(fileP);
            varProductor=(varProductor+1)%BUFFER_SIZE;          
            cantVar++;
        }
        pthread_mutex_unlock(&mutex);   
        pthread_cond_signal(&condC);

    }   
}
void* funcConsumidor(){
    while((varProductor-1)!=varConsumidor){
        pthread_mutex_lock(&mutex);         

        while(cantVar==0){
            pthread_cond_wait(&condC,&mutex);
        }
        if((varProductor-1)!=varConsumidor){    
            putc(bytes[varConsumidor],fileC);
            varConsumidor=(varConsumidor+1)%BUFFER_SIZE;
            cantVar--;
        }

        pthread_mutex_unlock(&mutex);   
        pthread_cond_signal(&condP);    

    }
}

int main(int args,char** argv){ 
    int hilosOrigen=atoi(argv[2]);
    int hilosDestino=atoi(argv[4]);

    fileP=fopen(argv[1],"rb");
    fileC=fopen(argv[3],"wb");

    pthread_mutex_init(&mutex,NULL);
    pthread_cond_init(&condP,NULL);
    pthread_cond_init(&condC,NULL);

    pthread_t threadP[hilosOrigen];
    pthread_t threadC[hilosDestino];

    int i;

    for(i=0;i<hilosOrigen;i++){
        pthread_create(&threadP[i],NULL,funcProductor,NULL);
    }
    for(i=0;i<hilosDestino;i++){
        pthread_create(&threadC[i],NULL,funcConsumidor,NULL);
    }
    for(i=0;i<hilosOrigen;i++){
        pthread_join(threadP[i],NULL);
    }
    for(i=0;i<hilosDestino;i++){
        pthread_join(threadC[i],NULL);
    }

    return 0;
} 
```

*我正在使用 pthreads 读取字节并将它们保存到数组中，然后更多的 pthreads 将它们写入一个新文件中。读写都是受控信号量......

* * *

# java - 从主机读取文件

> ID：15856828
> 
> 赞同：0
> 
> 时间：2013-04-06T22:38:56.663
> 
> 标签：java

我正在尝试从与源代码位于同一文件夹中的计算机中读取文件，当我运行代码时说：文件不存在你能帮帮我吗？

```
import java.io.*;
import java.util.*;
public class Lotto1 {
  static String[][] arr;
  static String name, number;
  public static void main(String[] args) throws IOException {
    File f = new File("D:\\Filipe\\Project Final\\src\\database_lotto.txt.txt");
    Scanner s;
    try {
      s = new Scanner(f);
      BufferedReader reader = new BufferedReader(new FileReader(f));
      int lines = 0;
      while(reader.readLine() != null) {
        lines++;
      }
      reader.close();
      arr = new String[lines][3];
      int count = 0;
      //while theres still another line
      while(s.hasNextLine()) {
        arr[count][0] = s.next() + "" + s.next();
        arr[count][1] = s.next();
        arr[count][2] = s.next();
        count++;
      }
    } catch(FileNotFoundException ex) {
      System.out.println("File does not exist");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:58:15.517

你在 Unix/Linux 机器上吗？

最好使用 File.separator 而不是 \，因为 File.separator 使用系统字符作为目录（Win 上的 \，Linux 上的 / 等）

在使用之前使用 File.exists() 检查文件是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:09:58.697

我已经推断出您要执行的操作并对其进行了重新编码，但是如果文件在您所说的位置，则此实现将读取该文件。

```
public static void main(String[] args) {
    final String filename = "database_lotto.txt";
    final File lottoFile = new File(filename);

    try (final Scanner scanner = new Scanner(lottoFile)) {
        final List<String[]> storage = new ArrayList<String[]>();
        while (scanner.hasNextLine()) {
            storage.add(scanner.nextLine().split(" "));
        }
    }catch (FileNotFoundException ex) {
        System.out.println("File not found :(");
    }
} 
```

# android - 带有谷歌地图和手机摄像头的 Android TabActivity

> ID：15856829
> 
> 赞同：2
> 
> 时间：2013-04-06T22:38:57.400
> 
> 标签：android, google-maps, android-camera, tabactivity

我是新手，我正在准备我的第一个 Android 应用程序，但在将功能组合在一起时遇到了问题。

我的应用程序有四个标签`TabActivity`（一切正常，但是当我选择带有镜像的第二个选项卡，然后选择带有 Google 地图的第三个选项卡时，出现错误。地图不显示。同样的问题是当我关闭应用程序并重试时，但起初我用谷歌地图打开第三个标签（工作正常），然后用镜子点击第二个标签，没有任何变化，我仍然看到地图（但我无法缩放它等）。

我的事情，我需要一些东西，当我点击另一个选项卡时，镜子被杀死（也许地图也是如此），但我找不到我该怎么做。也许关于`surfaceDestroyed()`什么？

这是主要活动：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TabHost tabHost = getTabHost();

    //tab1 - static text
    TabSpec tab1spec = tabHost.newTabSpec("tab1");
    tab1spec.setIndicator("One", getResources().getDrawable(R.drawable.pin_empty));
    Intent tab1Intent = new Intent(this, Tab1Activity.class);
    tab1spec.setContent(tab1Intent);

    //tab2 - mirror
    TabSpec tab2spec = tabHost.newTabSpec("tab2");
    tab2spec.setIndicator("Mirror", getResources().getDrawable(R.drawable.pin_empty));
    Intent tab2Intent = new Intent(this, CameraActivity.class);
    tab2spec.setContent(tab2Intent);

    //tab3 - Google maps
    TabSpec tab3spec = tabHost.newTabSpec("tab3");
    tab3spec.setIndicator("Map", getResources().getDrawable(R.drawable.pin_empty));
    Intent tab3Intent = new Intent(this, GoogleMapsActivity.class);
    tab3spec.setContent(tab3Intent);

    //tab4 - static text
    TabSpec tab4spec = tabHost.newTabSpec("tab4");
    tab4spec.setIndicator("Four", getResources().getDrawable(R.drawable.pin_empty));
    Intent tab4Intent = new Intent(this, Tab4Activity.class);
    tab4spec.setContent(tab4Intent);

    tabHost.addTab(tab1spec);
    tabHost.addTab(tab2spec);
    tabHost.addTab(tab3spec);
    tabHost.addTab(tab4spec);
} 
```

这是两个屏幕截图。我点击了第三个标签（地图），然后点击了第二个标签（镜子），但我仍然看到地图，镜子里没有我的脸：

1/ [http://krispin.cz/_/so/TabActivity_problem-map.png](http://krispin.cz/_/so/TabActivity_problem-map.png) ![在此处输入图像描述](https://i.stack.imgur.com/hrHrF.png) 2/ [http://krispin.cz/_/so/TabActivity_problem-mirror.png](http://krispin.cz/_/so/TabActivity_problem-mirror.png) ![在此处输入图像描述](https://i.stack.imgur.com/4IJI5.png)

# iphone - CAShapeLayer 和动画位置问题

> ID：15856835
> 
> 赞同：0
> 
> 时间：2013-04-06T22:39:57.210
> 
> 标签：iphone, animation, calayer

我正在制作一个在屏幕上画一个圆圈的 iPhone 应用程序。我使用一个计时器（每 5 秒），这样我就可以“扩大”圆圈，然后等待 5 秒然后再次扩大。现在我在动画增加圆圈大小时遇到​​了麻烦（我使用路径和 CAShapeLayer 图层）。动画的大小（从和到）很好，就在它开始时，圆圈移动到左上角并从那里开始增长。任何帮助或建议都会很棒。谢谢

实现这一点的类是一个 UIControl，它被添加到一个 UIView 中。

```
//Called in init method
(void) initalPop {
  //Circle
  self.bubble = [CAShapeLayer layer];
  self.bubble.bounds = self.bounds;
  self.bubble.position = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
  self.bubble.fillColor = [
    [UIColor greenColor] CGColor
  ];
  self.bubble.strokeColor = [
    [UIColor greenColor] CGColor
  ];
  self.bubble.lineWidth = 4.0;
  CGMutablePathRef path = CGPathCreateMutable();
  CGPathAddEllipseInRect(path, nil, self.bounds);
  self.bubble.path = path;
  [self.layer addSublayer: self.bubble];
}
//Called when timer goes off
- (void) StageGrow {
  CGFloat growSize = 50.0;
  //Change the size of us and center the circle (but dont want to animate this
  [CATransaction begin];
  [CATransaction setValue: (id) kCFBooleanTrue forKey: kCATransactionDisableActions];
  self.bounds = CGRectMake(0, 0, self.bounds.size.width + growSize, self.bounds.size.height + growSize);
  self.bubble.position = CGPointMake(CGRectGetMidX(self.bounds), CGRectGetMidY(self.bounds));
  [CATransaction commit];
  [self ActualGrowCircle];
} - (void) ActualGrowCircle {
  CGMutablePathRef oldPath = CGPathCreateMutable();
  CGPathAddEllipseInRect(oldPath, nil, self.bubble.bounds);
  CGMutablePathRef path = CGPathCreateMutable();
  CGPathAddEllipseInRect(path, nil, self.bounds);
  CABasicAnimation * animation = [CABasicAnimation animationWithKeyPath: @"path"];
  animation.duration = 2.0;
  animation.timingFunction = [CAMediaTimingFunction functionWithName: kCAMediaTimingFunctionEaseInEaseOut];
  animation.repeatCount = 1;
  animation.delegate = self;
  animation.autoreverses = NO;
  animation.fromValue = (__bridge id) oldPath;
  animation.toValue = (__bridge id) path;
  self.bubble.bounds = self.bounds;
  self.bubble.path = path;
  [self.bubble addAnimation: animation forKey: @"animatePath"];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T05:30:31.443

假设您正在将气泡从 (100, 100) 大小增加到 (150, 150) 大小。

您在矩形 (0, 0, 100, 100) 中创建`oldPath`一个椭圆。

您在矩形 (0, 0, 150, 150) 中创建`path`一个椭圆。

您将气泡层的边界设置为 (0, 0, 150, 150)，并且您没有为该更改设置动画。

这意味着`oldPath`它将与气泡层的顶部和左侧边缘对齐。

解决此问题的一种方法是创建`oldPath`一个以气泡的新边界为中心的矩形：

```
CGRect oldBubbleRect = CGRectInset(self.bounds, growSize / 2, growSize / 2);
CGPathRef oldPath = CGPathCreateWithEllipseInRect(oldBubbleRect, NULL); 
```

顺便说一句，您正在泄漏您正在创建的路径。完成后，您需要打电话`CGPathRelease`给他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T07:30:43.290

解决了。从长远来看，我将动画组合在一起，一切都变得很好（见下面的代码）。感谢您的帮助罗布。

```
-(void)ActualGrowCircle {
    CGMutablePathRef newPath = CGPathCreateMutable();
    CGPathAddEllipseInRect(newPath, nil, self.bounds);

    CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"path"];
    animation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    animation.repeatCount = 1;
    animation.autoreverses = NO;
    animation.fromValue = (__bridge id)self.bubble.path;
    animation.toValue = (__bridge id)newPath;

    CABasicAnimation *animation2 = [CABasicAnimation animationWithKeyPath:@"bounds"];
    animation2.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];
    animation2.repeatCount = 1;
    animation2.autoreverses = NO;
    animation2.fromValue = [NSValue valueWithCGRect:self.bubble.bounds];
    animation2.toValue = [NSValue valueWithCGRect:self.bounds];

    CAAnimationGroup *group = [CAAnimationGroup animation];
    [group setAnimations:[NSArray arrayWithObjects: animation2, animation, nil]];
    group.duration = 0.5;
    group.delegate = self;

    self.bubble.bounds = self.bounds;
    self.bubble.path = newPath;
    [self.bubble addAnimation:group forKey:@"animateGroup"];

    CGPathRelease(newPath);

} 
```

# ruby-on-rails - 如何将逻辑添加到自定义狂欢步骤

> ID：15856837
> 
> 赞同：0
> 
> 时间：2013-04-06T22:40:08.217
> 
> 标签：ruby-on-rails, checkout, spree

我已经阅读了很多教程和狂欢指南，但我的主要问题是如何添加步骤逻辑（保存等），我在付款步骤之前有一个步骤，如果用户想要取货，它基本上会选择（这将使价格更便宜) 或送货。现在的问题是我的视图正常工作和步进动作，但我无法保存任何东西。

现在在边缘指南中，我对结帐过程感到困惑，因为它说要使用状态机，但随后谈到结帐流程选项，这真的让我很困惑

所以我的问题是在结帐过程中添加一个步骤的正确方法是什么，您是否同时使用 checkout_flow DSL 和 state_machine 或其中一个。

我的狂欢是版本 1.3.2 目前没有添加扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T14:40:45.967

在我的情况下，我已经弄清楚了。因为我只想在订单中添加一些东西（例如一列），所以我只是添加

```
attr_accessible :column_name 
```

在表单中，我只是确保 column_name 是一个传递的参数，看起来 spree 负责其余的工作。我只是真的不知道如何添加额外的验证逻辑，但这是我将要做的事情，并在我弄清楚时为其他人更新。

# google-app-engine - ghs.google.com 超时

> ID：15856838
> 
> 赞同：0
> 
> 时间：2013-04-06T22:40:08.277
> 
> 标签：google-app-engine, timeout

为此，前 Google Group 建议在此处发帖。

我为您的域和 GAE 在谷歌应用程序上运行了一堆网站。

目前，由于 gas.google.com 超时，它们都已关闭。

> ping ghs.google.com PING ghs.l.google.com (74.125.31.121): 56 个数据字节 icmp_seq 请求超时 0 icmp_seq 请求超时 1 icmp_seq 请求超时 2 icmp_seq 请求超时 3 icmp_seq 请求超时 4 请求超时对于 icmp_seq 5 请求超时 icmp_seq 6

希望谷歌知道并进行调查。

谢谢，马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T08:06:18.097

Hן 马特

您可以尝试使用 PageSpeed 并将 DNS CNAME 更改为 pagespeed.googlehosted.com

顺便说一句，即使您不使用 PageSpeed，此 CNAME 也可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:56:22.557

一定只有你……也许追踪路线会产生更好的信息。

```
Pinging ghs.l.google.com [74.125.129.121] with 32 bytes of data:
Reply from 74.125.129.121: bytes=32 time=49ms TTL=47
Reply from 74.125.129.121: bytes=32 time=49ms TTL=47
Reply from 74.125.129.121: bytes=32 time=69ms TTL=47
Reply from 74.125.129.121: bytes=32 time=50ms TTL=47

Ping statistics for 74.125.129.121:
    Packets: Sent = 4, Received = 4, Lost = 0 (0% loss), 
```

# php - 无法将 SQL 更改为将 id 作为主键 (AI) 而不是用户名

> ID：15856839
> 
> 赞同：0
> 
> 时间：2013-04-06T22:40:12.967
> 
> 标签：php, mysql, sql, registration

我最近开始使用 Jpmaster77 的登录脚本，它已经证明非常棒。但是，现在我正在尝试使用它。我正在尝试在名为“id”的行的开头创建一个新表，该表具有主键或 AI，而不是表用户名。据我所知，只有一个表可以有主键或 AI，但是当我尝试创建这个“id”表时，脚本无法注册。我没有收到 ACTUAL 错误，但我在尝试登录后收到此消息“

很抱歉，发生错误，您的用户名注册（尝试在此处注册的用户名）无法完成。
请稍后再试。”

当我尝试改变它时会发生这种情况

```
CREATE TABLE users (
 username varchar(30) primary key,
 password varchar(32),
 userid varchar(32),
 userlevel tinyint(1) unsigned not null,
 email varchar(50),
 timestamp int(11) unsigned not null
); 
```

对此：

```
CREATE TABLE users (
 id int(11) NOT NULL auto_increment,
 username varchar(30),
 password varchar(32),
 userid varchar(32),
 userlevel tinyint(1) unsigned not null,
 email varchar(50),
 timestamp int(11) unsigned not null
); 
```

从收到这个错误开始，我相信它与我的代码而不是 SQL 有关。我有 3 个页面会影响注册，register.php、process.php 和 session.php 我将发布所有 3 个页面的链接，以便任何人都可以自己查看“ [http://pastebin.com/5efyZdgF](http://pastebin.com/5efyZdgF) ”（请忘记错误，我在开头拼错了register.php）

如果有人可以提供帮助，我将非常感激，因为我没有机会完成这项工作。我确实非常了解 PHP，所以如果有人至少能指出我的错误，我很可能会从那里纠正它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:42:49.993

这是因为 A_I 必须是整数 (int)

这是因为整数根据上一个表增加。如果这是一个`varchar`或其他（不与数字相关），一个字母如何根据上一个表增加值？它不能..

AI 用于最小化表中的重复行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:10:08.657

我不使用 MySQL，所以我快速浏览了文档。看起来语法类似于我使用的 redbrick。

```
create table myTable (
myTableId int not null auto_increment
, more fields
, constraint myTablePk primary key (myTableId) 
```

# java - 如何在 Android 应用程序中使 H.264 文件可快速转发？

> ID：15856841
> 
> 赞同：1
> 
> 时间：2013-04-06T22:40:46.867
> 
> 标签：java, android, video, h.264, gstreamer

我是公司的实习生，我的“学习任务”是用 Java 制作 Android 应用程序，该应用程序采用 H.264 格式的视频（起初它们将存储在 SD 卡中），并制作成一个非常简单的播放器，它具有以下功能： 1.您可以暂停/播放/快进/快退视频 2.当您在视频的某个点并且它停止时，您可以在不同的视频中切换到同一时间（相同的图片帧索引我猜）。

我怎么能这样做？使用 Gstreamer 是个好方法吗？我查看了网上可用的糟糕教程，由于我缺乏视频处理经验（我从未在 Android 应用程序中处理过视频），我很难理解什么是管道，还有 JNI，甚至设置 Gstreamer对于日食。有没有更好的方法来做到这一点？在开始弄乱这个程序之前我应该​​知道什么？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:51:34.673

您提到的所有功能都可以在 Gstreamer 中使用，但是有一个学习曲线。

要了解 GStreamer android 教程，您必须先阅读这里的基础教程：[http ://docs.gstreamer.com/display/GstSDK/Basic+tutorials](http://docs.gstreamer.com/display/GstSDK/Basic+tutorials)

如果您对管道架构感到满意，那么请继续设置您的 android 环境（这本身并不是一件容易的事）。Gstreamer 是一个非常强大的框架，如果您愿意努力克服学习曲线，您几乎可以在其中做任何事情。

所以我建议只有在你有时间和耐心的情况下继续使用 gstreamer，否则选择更简单的解决方案。不幸的是，我不熟悉android，所以我不能提出任何建议。也许快速谷歌搜索会有所帮助。

# ios - fopen$UNIX2003 在外部库中失败

> ID：15856848
> 
> 赞同：3
> 
> 时间：2013-04-06T22:41:28.910
> 
> 标签：ios, c, compilation, ios-simulator, static-libraries

我有一个外部静态库（我也有源代码），它使用“fopen”来访问文件系统上的文件。奇怪的是，当它尝试在`EXE_BAD_ACCESS`内部`fopen$UNIX2003`（不是 in `fopen`，`fopen`甚至在抛出异常时不在调用堆栈中）时，它总是在模拟器和设备上都失败。我试图`fopen`直接使用自己的相同路径/options 并且它有效。所以，首先，库是否有可能以某种方式调用不同的`fopen`实现？如果是这样，为什么，最重要的是，我怎样才能让它调用“正确”的实现？

编辑：实际上，在抛出异常之前调用堆栈中的最后一个函数是`_interposition_vtable_unimplemented`,`fopen$UNIX2003`在它之前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-23T22:11:35.070

fopen$UNIX2003 是一个由 OS X 提供的符号，它不是 iOS 模拟器运行时的一部分。iOS*始终*是一致的，因此没有旧版（非 $UNIX2003）函数变体（提供这些变体是为了与针对旧版本 OS X SDK 构建的代码的二进制兼容性）。

您看到的问题的常见原因是您有一个针对 OS X SDK 构建的目标文件或存档 (libsomething.a)，并试图将其链接到您的 iOS Simulator 可执行文件中。这不受支持，因为这两个平台在该层不兼容二进制。

您需要针对 iOS Simulator SDK 重建您的库（libsomething.a）。

这个问题导致 iOS 7 在运行时中止，但现在在 iOS 8 上构建时出现链接错误，这似乎有助于使这些问题更加明显。

# java - 让元素粘在java中的数组中（模拟书店项目）

> ID：15856849
> 
> 赞同：1
> 
> 时间：2013-04-06T22:41:42.367
> 
> 标签：java, arrays

这里是java新手。在这个项目的多个部分制作模拟书店时遇到了麻烦。我现在所处的位置是正确地将新书粘贴到 books[] 数组中，超过了我放入的第一本。当我在书店类中运行方法“listTitles”和“listBooks”时，它只显示第一个我登录的书。除此之外，我在实现其他两种方法时遇到了麻烦：书店类中的“addNewBook”方法和“sellBook”方法。如果您在此页面上，请让我知道我在做什么/不做什么来让这些方法发挥作用。您将看到每个方法的预期参数的注释代码。抱歉，如果它有点乱，谢谢你的时间。

### 类：MyBookStore

```
public class MyBookstore {

    public static void main(String[] args) {

        Scanner s = new Scanner(System.in);
        Bookstore mybookstore = new Bookstore();

        int user_choice;

        do {

            System.out.println();
            System.out.println("1) Add a book to the stock");
            System.out.println("2) Sell a book in stock");
            System.out.println("3) List the titles of all the books in stock");
            System.out.println("4) List all the information about the books in stock");
            System.out.println("5) Print out the gross income of the bookstore");
            System.out.println("6) Quit");
            System.out.println();
            System.out.print("please select one of the six options");
            System.out.println();
            System.out.print("your choice:");
            user_choice = s.nextInt();
            switch (user_choice) {
                case 1:
                    System.out.println("Enter a title");
                    String title = s.next();
                    System.out.println("how many pages is the book?");
                    int pages = s.nextInt();

                    System.out.println("how much does this book cost?");
                    double price = s.nextInt();
                    System.out.println("how many of these books are there in stock?");
                    int stock = s.nextInt();

                    Book c = new Book(title, pages, price, stock);
                    mybookstore.addNewBook(c);

                    break;
                case 2:
                    System.out.println("Selling books:");
                    System.out.println("Enter the title...");
                    String an = s.next();
                    System.out.println("Enter a quantity");
                    int da = s.nextInt();
                    mybookstore.sellBook(an, da);
                    break;
                case 3:
                    mybookstore.listTitles();
                    break;
                case 4:
                    mybookstore.listBooks();
                    break;
                case 5:
                    mybookstore.getIncome();

                    break;
                default:
                    System.out.println("please select from one of the six options");

            }
        } while (user_choice != '6');
    }
} 
```

### 类别：书店

```
class Bookstore {

    private Book[] books;    // all the books in this bookstore
    private int totalBooks;   // the number of books in this bookstore
    private double grossIncome;   //the gross income of the bookstore (will be incremented when books are sold)

    public Bookstore() {

        books = new Book[100];
        totalBooks = 0;
        grossIncome = 0;

    }
    //If it is already in stock, simply ask the user to enter how many extra books to stock, and then do so. 

    public void addNewBook(Book b) {
        books[totalBooks] = b;
        totalBooks++;

        for (int i = 0; i < totalBooks; i++) {
            if (b.getTitle() == books[i].getTitle()) {
                String name = b.getTitle();
                Scanner m = new Scanner(System.in);
                System.out.println("books is already in stock, how many additonal books would you like to stock?");
                int stock = m.nextInt();

                addBookQuantity(name, stock);
            }
        }

        System.out.println("book has been logged");
        return;
    }

    public void addBookQuantity(String title, int quantity){

        // Adds quantity number of books to the book already in stock in the Bookstore object with
        // the title title. If the book is not in the Bookstore object, nothing is done.

        for (int i =0; i<totalBooks; i++) {
            if (title == books[i].getTitle()) {
                books[i].addQuantity(quantity);
                System.out.println("quantity added successfully");
                return;
            }
    }
        System.out.println("book not found.");
    }

    // Returns true if quantity or more copies of a book with the title title are contained in the Bookstore object.
    public boolean inStock(String title, int quantity){
        for (int i =0; i<totalBooks; i++) {
            if (title == books[i].getTitle()) {
                if (quantity <= books[i].getQuantity()) {return true;}
                else {return false;}
            }
        }
        return false;       
    }

        // Executes selling quantity number of books from the Bookstore object with the title title to the
        // buyer. The Bookstore object is changed to reflect the sale. The gross income of the bookstore is incremented 
        //accordingly. The method returns true is the sale was executed successfully, false otherwise.
        public boolean sellBook(String title, int quantity){
             for ( int i = 0; i < totalBooks;) {
                    if (title == books[i].getTitle()  ) {
                        books[i].subtractQuantity(quantity);
                        double l = books[i].getPrice();
                        double profit = l*quantity;
                        grossIncome = grossIncome + profit;
                      //rework this
                        System.out.println("books sold. Total store profits:" + profit);

                    }

             }
        return false;//System.out.println("Book not in stock");
        }

    public void listTitles(){
        // Lists all of the titles of the books in the Bookstore object.
        for (int i = 0; i<totalBooks; ) {
            System.out.println(books[i].getTitle()); 

                return;
            }
        }

    // Lists all of the information about the books in the Bookstore object. 
    public void listBooks(){

        for (int i = 0; i<totalBooks;) {
            System.out.println(books[i].toString()); 

              return;
            }

    }

    // Returns the total gross income of the Bookstore object.
    public double getIncome(){
        return grossIncome;

    }
} 
```

### 类别：书

```
class Book {

    private String title;
    private int numOfPages;
    private double price;
    private int quantity;

    public Book(String theTitle, int pages, double cost, int num) {
        title = theTitle;
        numOfPages = pages;
        price = cost;
        num = quantity;
    }

    public String getTitle() {
        return title;
    }

    public double getPrice() {
        return price;
    }

    public int getQuantity() {
        return quantity;
    }

    public String toString() {
        return "Title:" + title + "\nNumber of pages: " + numOfPages + "\nPrice:" + price + "\nquantity left:" + getQuantity();
    }

    public void subtractQuantity(int amount) {
        quantity = quantity - amount;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:58:08.590

```
public void listTitles(){
        // Lists all of the titles of the books in the Bookstore object.
        for (int i = 0; i<totalBooks; ) {
            System.out.println(books[i].getTitle()); 

            return;
        }
 } 
```

应该：

```
public void listTitles(){
        // Lists all of the titles of the books in the Bookstore object.
        for (int i = 0; i<totalBooks; i++) {
            System.out.println(books[i].getTitle()); 
        }
        return;
 } 
```

它只显示第一个的原因是因为你的代码当前循环只会执行一次然后点击返回语句。return 本质上意味着“返回 main”，因此在这种情况下循环是无用的。

我将您的 return 语句移出循环并将“i++”添加到您的循环中。它现在应该可以正常工作了。

当然，正如其他人所建议的那样，ArrayList 可能更适合于此，但我假设您正在尝试学习 Java，因此最好坚持您现在选择的内容并了解您在哪里犯了错误。改正错误是最好的学习方法。

不过，请记住 ArrayLists 以备后用。

**--------------关于下面评论中的问题------ --**

正如我所说，我仍然没有时间查看和测试它，但是我可以提供一条线索，以便您可以使用您的方法：

```
public void addNewBook(Book b){
     books[totalBooks] = b;
        totalBooks ++; 

        for (int i =0; i<totalBooks; i++) {
            if ( b.getTitle() == books[i].getTitle()) {
                String name = b.getTitle();
                Scanner m = new Scanner(System.in);
                System.out.println("books is already in stock, how many additonal books would you like to stock?");
                int stock = m.nextInt();

               addBookQuantity(name, stock);
            }
        }

        System.out.println("book has been logged");
                return;

    } 
```

您上面的方法首先将书籍添加到您的数组中。您可能希望因此更改方法：

```
public void addNewBook(Book b) {
    if (books.length != 0) {
        // check if the title is already added
        for (int i = 0; i < books.length; i++) {
             if (books[i].getTitle().equals(b.getTitle())
                   // dont add book title again
             else
                  // add book title
        }
    } else {
        // add book title
    }
} 
```

正如flup已经建议的那样，尽管您可以使用 Set 然后将 Set 转换回数组。集合只存储唯一值，Java 有一种方法可以将集合转换为数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:47:54.143

```
private Book[] books;    // all the books in this bookstore
private int totalBooks; 
```

这是一个双重管理，如果不是所有的书都被列出，我敢打赌，`totalBooks = 1`但是。`books.length``> 1`

最快的解决方案是丢弃`totalBooks`并在`books.length`任何地方使用。

除此之外，我建议您使用[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)代替来存储书籍。

# php - PHP 如何修复这个奇怪的 UNDEFINED OFFSET 错误？

> ID：15856851
> 
> 赞同：0
> 
> 时间：2013-04-06T22:42:13.193
> 
> 标签：php, codeigniter

好的，这是我的模型，它将所有内容返回到我的控制器并转发到我的视图。**我得到了正确的行输出，但我也得到了这个奇怪的未定义偏移错误。**

模型

```
function getAllCustomersPendingInstall()
{
    $data=array();
    //Need to use sessions to display proper 
    //records for each user. Temp set id to user #7
    $id = 7;

    //query the db and return all record where SalesRepId == $id
    $query = $this->db->get_where('customers', array('SalesRepId' => $id));

        //check logic, if rows exist RETURN all rows, else
        //return message that no pending installs is available.
        if($query->num_rows >= 0) {
            foreach($query->result() as $row) {
                $data['cFirstName'][] = $row->customerFirstName;
                $data['cLastName'] [] = $row->customerLastName;
                $data['cId'][] = $row->customerId;
                $data['cStatus'][] = $row->customerStatus;
                $data['cDateSold'][] = $row->customerDateSold;
                $data['cCorp'][] = $row->customerCorp;
                $data['cAccount'][] = $row->customerAccount;
                $data['cAddress'] [] = $row->customerAddress;
                $data['cAptNum'][] = $row->customerCity;
                $data['cState'][] = $row->customerState;
                $data['cZip'][] = $row->customerZip;
                $data['cEmail'][] = $row->customerEmail;
                $data['cHomePhone'][] = $row->customerHomePhone;
                $data['cCellPhone'][] = $row->customerCellPhone;
                $data['cInstallDate'][] = $row->customerInstallDate;
                $data['cInstallTime'][] = $row->customerInstallTime;    
                $data['cServiceLevelSold'][] = $row->customerServiceLevelSold;
                $data['cWinBackFrom'][] = $row->customerWinBackFrom;
                $data['cSaleSource'][] = $row->customerSaleSource;
                $data['cTier'][] = $row->customerTier;      
                $data['mySalesRepId'][] = $row->SalesRepId;
            }
        } else {
            $data = "No pending installs available!";
            return $data;
        }   
//the following var_dump is only showing the last record.
//need to show all rows (which should be 2)
//var_dump($data); exit;
return $data;           
} 
```

看法

```
 <?php $dataNumRows = count($optimum); ?>

    <?php for ($i = 0; $i < $dataNumRows; $i++) : ?>
        <?php echo $optimum['cFirstName'][$i]; ?>
        <?php echo $optimum['cLastName'][$i]; ?>
        <?php echo $optimum['cId'][$i]; ?>
        <?php echo $optimum['cStatus'][$i]; ?>
        <?php echo $optimum['cDateSold'][$i]; ?>
        <?php echo $optimum['cCorp'][$i]; ?>
        <?php echo $optimum['cAccount'][$i]; ?>
        <?php echo $optimum['cAddress'][$i]; ?>
        <?php echo $optimum['cAptNum'][$i]; ?>
        <?php echo $optimum['cState'][$i]; ?>
        <?php echo $optimum['cZip'][$i]; ?>
        <?php echo $optimum['cEmail'][$i]; ?>
        <?php echo $optimum['cHomePhone'][$i]; ?>
        <?php echo $optimum['cCellPhone'][$i]; ?>
        <?php echo $optimum['cInstallDate'][$i]; ?>
        <?php echo $optimum['cInstallTime'][$i]; ?> 
        <?php echo $optimum['cServiceLevelSold'][$i]; ?>
        <?php echo $optimum['cWinBackFrom'][$i]; ?>
        <?php echo $optimum['cSaleSource'][$i]; ?>
        <?php echo $optimum['cTier'][$i]; ?>    
        <?php echo $optimum['mySalesRepId'][$i]; ?>
        <br>
    <?php endfor; ?> 
```

该网页正确显示我的数据，但随后显示此未定义的输出错误

```
Tom Jones 1  4   02/11/2013  77  895482  1823 e15th St   Brooklyn    NY  11268   tones728@verizon.net    0000000000  0000000000  02/16/2013  1   11  1   1   1   7 
Alexa Planter 2  4   02/13/2013  77  632584  5847 w79th Ave  Brooklyn    NY  11258   aplanter222@gmail.com   0000000000  0000000000  02/22/2013  1   31  1   1   2   7 
A PHP Error was encountered

Severity: Notice

Message: Undefined offset: 2

Filename: views/welcome_message.php

Line Number: 29

A PHP Error was encountered

Severity: Notice

Message: Undefined offset: 2

Filename: views/welcome_message.php

Line Number: 30

.... repeated to line 49 
```

这是导致错误的行：

```
29| <?php echo $optimum['cFirstName'][$i]; ?>
30| <?php echo $optimum['cLastName'][$i]; ?>
..| <?php echo $optimum['cId'][$i]; ?>
<?php echo $optimum['cStatus'][$i]; ?>
<?php echo $optimum['cDateSold'][$i]; ?>
<?php echo $optimum['cCorp'][$i]; ?>
<?php echo $optimum['cAccount'][$i]; ?>
<?php echo $optimum['cAddress'][$i]; ?>
<?php echo $optimum['cAptNum'][$i]; ?>
<?php echo $optimum['cState'][$i]; ?>
<?php echo $optimum['cZip'][$i]; ?>
<?php echo $optimum['cEmail'][$i]; ?>
<?php echo $optimum['cHomePhone'][$i]; ?>
<?php echo $optimum['cCellPhone'][$i]; ?>
<?php echo $optimum['cInstallDate'][$i]; ?>
<?php echo $optimum['cInstallTime'][$i]; ?> 
<?php echo $optimum['cServiceLevelSold'][$i]; ?>
<?php echo $optimum['cWinBackFrom'][$i]; ?>
<?php echo $optimum['cSaleSource'][$i]; ?>
..| <?php echo $optimum['cTier'][$i]; ?>    
49| <?php echo $optimum['mySalesRepId'][$i]; ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:46:10.510

在您的函数中，您必须计算结果。目前在您的视图中，您计算​​字段而不是结果。添加 1 个数据键计数并在视图中使用它。

```
................................................
                    $data['cTier'][] = $row->customerTier;      
                    $data['mySalesRepId'][] = $row->SalesRepId;
                }
                $data['counts'] = $query->num_rows;
            } else {
                $data = "No pending installs available!";
                return $data;
            }   
    //the following var_dump is only showing the last record.
    //need to show all rows (which should be 2)
    //var_dump($data); exit;
    return $data;           
    } 
```

在视图中

```
<?php $dataNumRows = isset($optimum['counts']) ? $optimum['counts']:0; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:54:02.643

您的 count($optimum) 为您提供字段的计数（它是一个包含数组的哈希图，例如 $optimum = array("x" => array(1,2), "y" => array(1,2)) 和依此类推）而不是列。您要么必须更改将项目附加到数组的方式，要么更改计数器的工作方式。count($optimum["Firstname"] 可能会成功)

# ruby-on-rails - 设计，Ruby on Rails，在验证之前更改登录详细信息的格式

> ID：15856852
> 
> 赞同：0
> 
> 时间：2013-04-06T22:42:18.883
> 
> 标签：ruby-on-rails, devise

我们使用带有电子邮件的设计，但我们现在正在过渡到移动登录（用户提供他们的手机号码），因为这是我们需要的唯一信息。电子邮件会很好，但不是必需的。

我已经让它与手机号码认证一起使用：

```
config.authentication_keys = [ :mobile ] 
```

如果您输入的数字与输入的完全相同，它就会起作用。尽管人们可以通过多种方式输入数字（相对于电子邮件）

IE

本地格式 0125551234

或国际 27125551234

当我将手机号码存储在数据库中时，我实际上对其进行了规范化，因此希望在进行身份验证之前使用相同的规范化。

除了覆盖会话控制器之外，还有其他方法吗？

**更新：**

使用以下方法：[https ://github.com/plataformatec/devise/wiki/How-To:-Allow-users-to-sign-in-using-their-username-or-email-address](https://github.com/plataformatec/devise/wiki/How-To%3a-Allow-users-to-sign-in-using-their-username-or-email-address)

原因是我们已经有一些用户，如果他们没有捕获他们的手机，我们还需要允许他们使用电子邮件登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:25:05.067

您可以在 ApplicationController 中指定一个方法（仅因为您不想覆盖 SessionsController），该方法将转换`params[:mobile]`为您想要的任何格式。

```
prepend_before_filter :format_mobile_param

def format_mobile_param
  return unless params[:mobile]
  params[:mobile] = your_formatting_method(params[:method])
end 
```

这将在调用之前更改参数`authenticate_user!`（假设您调用`authenticate_user!`了之前的过滤器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T01:22:29.777

我认为最好的方法是覆盖 SessionsController，只需添加一个 prepend_before_filter :format_mobile_param。不要忘记将此方法的范围限定为 SessionsController 的 create 方法。另外，不要忘记添加控制器路由。希望能帮助到你。

# maven - apt-maven-plugin 和 com.mysema.query.apt.roo.RooAnnotationProcessor 的问题

> ID：15856855
> 
> 赞同：1
> 
> 时间：2013-04-06T22:42:33.950
> 
> 标签：maven, querydsl

我**无法**从`@RooJpaEntity`带注释的类中生成 Q 类。

这是我的插件配置：

```
<plugin>
            <groupId>com.mysema.maven</groupId>
            <artifactId>apt-maven-plugin</artifactId>
            <version>1.0.8</version>
            <executions>
                <execution> 
                    <phase>generate-sources</phase>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>src/main/java</outputDirectory> 
                        <processor>com.mysema.query.apt.roo.RooAnnotationProcessor</processor>
                        <options>
                            <querydsl.packageSuffix>.querydsl</querydsl.packageSuffix>
                        </options>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

这是我从 a 得到的`mvn -X generate-sources`：

```
[DEBUG] Configuring mojo 'com.mysema.maven:apt-maven-plugin:1.0.8:process' with basic configurator -->
[DEBUG]   (s) options = {querydsl.packageSuffix=.querydsl}
[DEBUG]   (s) outputDirectory = /home/julien/Documents/donnees/projets/site-garde-enfants/java/bignibou/src/main/java
[DEBUG]   (s) pluginArtifacts = [com.mysema.maven:apt-maven-plugin:maven-plugin:1.0.8:, org.sonatype.plexus:plexus-build-api:jar:0.0.7:compile, org.codehaus.plexus:plexus-utils:jar:1.5.8:compile, backport-util-concurrent:backport-util-concurrent:jar:3.1:compile, org.codehaus.plexus:plexus-interpolation:jar:1.11:compile, junit:junit:jar:3.8.1:compile]
[DEBUG]   (s) processor = com.mysema.query.apt.roo.RooAnnotationProcessor
[DEBUG]   (s) project = MavenProject: com.bignibou:bignibou:0.1.0.BUILD-SNAPSHOT @ /home/julien/Documents/donnees/projets/site-garde-enfants/java/bignibou/pom.xml
[DEBUG]   (s) sourceEncoding = UTF-8
[DEBUG] -- end configuration --
[DEBUG] Using build context: org.sonatype.plexus.build.incremental.DefaultBuildContext@383035a1
[DEBUG] There is no sources to generatate querydsl classes from (skipping) 
```

有人可以帮忙吗？

# join - 与 2 个表的左连接返回第一个表中的所有记录和第二个表中的条件字段

> ID：15856856
> 
> 赞同：0
> 
> 时间：2013-04-06T22:42:40.053
> 
> 标签：join, distinct

我有 2 列：
[tblCustomer] [tblInquiry] 我想返回所有客户（因此在本例中为 6 条记录）。此外，如果至少有 1 个 Inquiry 没有准备好（完成），则附加一个值为 [False] [result]的字段， 此 Query 返回 7 条记录： 这可能吗？如果是，我做错了什么？ 提前致谢。
`ID | DebtNr | CustomerName
1 | 10001 | CustomerNr001
2 | 10002 | CustomerNr002
3 | 10003 | CustomerNr003
4 | 10004 | CustomerNr0ab
5 | 10008 | CustomerNr0yy
6 | 10012 | CustomerSomeName` 
 `ID | CustID | IsInquiryReady
1 | 1 | True
2 | 1 | False
3 | 6 | True
4 | 2 | False` 

 `ID | DebtNr | CustomerName | IsAtLeastOneNotReady
1 | 10001 | CustomerNr001 | True
2 | 10002 | CustomerNr002 | True
3 | 10003 | CustomerNr003 | False
4 | 10004 | CustomerNr0ab | False
5 | 10008 | CustomerNr0yy | False
6 | 10012 | CustSomeName | False` 

`SELECT [tblCustomer].ID, [tblCustomer].CustomerName, [tblCustomer].DebtNr, [tblInquiry].ID, [tblInquiry].IsInquiryReady FROM [tblCustomer] LEFT JOIN [tblInquiry] ON [tblInquiry].CustomerID = [tblCustomer].Id;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:46:03.267

你可以做类似的事情

```
select a.id, a.debtnr, a.customername,(select 'true' from dbo.tblinquiry b where b.custid = a.id and isinquiryready = 'false') as IsAtleastonenotready from dbo.tblcustomer a 
```

# linux - mp3 和 wav 文件在 ftp 传输后播放断断续续/太快

> ID：15856858
> 
> 赞同：-3
> 
> 时间：2013-04-06T22:42:54.997
> 
> 标签：linux, audio, mp3, wav, lame

所以我用 lame 来转换我的文件，它们在机器上玩得很好。我曾经将它们scp到另一台服务器，它们仍然可以正常播放。

我开始做 ftp，但是当我传输它们时，未转换的 wav 文件和转换后的 mp3 听起来都非常不稳定......

为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T03:13:21.987

FTP 可能被视为一种古老的协议，它通常以 ASCII 模式工作以获取文件列表等。根据协议，我们必须在获取二进制文件之前告诉服务器更改为二进制模式。看起来您正在以 ascii 模式传输文件，但我所知道的所有当前 ftp 客户端应用程序默认都以二进制模式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T03:33:39.870

许多 ftp 服务器的默认传输文件是“二进制”，当您连接到 ftp 服务器时，服务器广播“传输类型”如果传输类型指示“二进制”检查网络连接，否则执行“bina”并将 xfer 模式更改为二进制

# regex - 在 NotePad++ 中使用正则表达式查找多个关键字？

> ID：15856859
> 
> 赞同：0
> 
> 时间：2013-04-06T22:42:55.470
> 
> 标签：regex, notepad++

有谁知道如何使用正则表达式来查找包含我列出的任何关键字的行？

我正在尝试为列表中至少包含一个关键字的所有行添加书签，这些行不需要包含所有这些行。

例如，如果一行有这些关键字中的任何一个，我希望它加入书签：keyword1、keyword2、keyword3、keyword4、keyword5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:45:55.163

您可以匹配不同的关键字，`|`如下所示：`keyword1|keyword2|keyword3`. 该正则表达式将匹配关键字 1、关键字 2 和关键字 3 中的任何一个。

# python - 如何使用 Scrapy 将从多个页面抓取的数据分组到一个项目中？

> ID：15856860
> 
> 赞同：6
> 
> 时间：2013-04-06T22:42:57.283
> 
> 标签：python, scrapy

我正在尝试收集有关一堆不同网站的一些信息。我想为`Item`每个站点生成一个，总结我在该站点上找到的信息，无论我在哪个页面上找到它。

我觉得这应该是一个项目管道，就像[重复过滤器](http://doc.scrapy.org/en/latest/topics/item-pipeline.html#duplicates-filter)示例一样，除了我需要 的最终内容，而`Item`不是爬虫检查的第一页的结果。

因此，我尝试使用给定站点的各种s[`request.meta`](http://doc.scrapy.org/en/latest/topics/request-response.html#passing-additional-data-to-callback-functions)传递单个部分填充的内容。为了完成这项工作，我必须让我的 parse 回调每次调用都返回一个新的，直到它没有更多的页面可以访问，然后最终返回完成的. 如果我找到多个我想关注的链接，这会很痛苦，如果调度程序由于链接周期而丢弃其中一个请求，则会完全中断。`Item``Request``Request``Item`

我能看到的唯一其他方法是将蜘蛛输出转储到 json-lines 并使用外部工具对其进行后处理。但我更喜欢将它折叠到蜘蛛中，最好是在中间件或项目管道中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-07T06:10:22.897

这个丑陋的解决方案怎么样？

在用于存储每个站点数据的管道上定义一个字典 (defaultdict(list))。在 process_item 中，您只需将 dict(item) 附加到每个站点项目的列表并引发 DropItem 异常。然后，在 close_spider 方法中，您可以将数据转储到您想要的任何位置。

理论上应该可行，但我不确定这个解决方案是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:51:14.680

如果你想要总结，统计收集将是另一种方法 [http://doc.scrapy.org/en/0.16/topics/stats.html](http://doc.scrapy.org/en/0.16/topics/stats.html)

例如：

获取在每个网站中抓取的总页面。使用以下代码。

```
stats.inc_value('pages_crawled:%s'%socket.gethostname()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T08:18:15.450

我在编写爬虫时遇到了同样的问题。

我通过元标记传递一个 url 列表并将它们链接在一起解决了这个问题。

[参考我在这里写的详细教程。](https://sickyoon.com/2016/how-to-combine-data-from-multiple-web-pages-in-web-crawler-scrapy/)

# javascript - 难以重新初始化 jscrollpane 滚动条

> ID：15856861
> 
> 赞同：0
> 
> 时间：2013-04-06T22:42:57.737
> 
> 标签：javascript, ajax

我在我的水平分区中使用 jscrollpane，其中 jscroll 帮助滚动。问题是在ajax的帮助下加载了divison数据。并且 jscrollpane 在浏览器宽度改变之前不会显示滚动条。

正如我正在使用

```
api.reinitialise(); 
```

在宽度更改时重新初始化滚动条的方法。因此，任何人都可以为我提供解决方案，以便在 ajax 的帮助下加载数据后，它会自动重新初始化并向我显示滚动条。

我也从 json 加载数据并解析它，所以加载到浏览器需要时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T22:38:11.083

您应该在加载 ajax 数据后初始化 jscrollpane 滚动条。如果您之前使用过 jscrollpane。它不会显示。

这就是为什么当您调整浏览器窗口大小时 api.reinitialise(); 用于自动加载 jscrollpane 并根据浏览器窗口调整其宽度。

当您的 ajax 数据加载到部门时调用 jscrollpane。

例如

```
$('#div').load('x.json');
$('#div').jScrollPane();

or

$('#div').load('x.json').jScrollPane(); 
```

# ruby-on-rails - Rspec：共享示例

> ID：15856862
> 
> 赞同：3
> 
> 时间：2013-04-06T22:43:00.947
> 
> 标签：ruby-on-rails, rspec, dry

我有功能测试，其中有 2 个重复的部分：

```
require 'spec_helper'

describe "Messages manage" do
  let (:user) { create :user }
  let (:other_user) { create :use }
  before(:each) do
    login_as user
  end

  describe "[message create]" do

    it "messages created by self, should appear on the page", js: true do
      message_text = "Hello my friend"

      visit user_messages_path(user, {with:other_user.id} )
      fill_in :message_body, with: message_text
      click_button t("users.messages.index.send")
      sleep 1 # waiting for js

      page.should have_content(message_text)
      find_field(:message_body).value.should == ""
      page.should have_selector('#message_body', visible: false)
    end

    it "message errors should be displayed", js: true do
      message_text = "123"

      visit user_messages_path(user, {with:other_user.id} )
      fill_in :message_body, with: message_text
      click_button t("users.messages.index.send")
      sleep 1 # waiting for js

      page.should_not have_content("Message: #{message_text}")
      find_field(:message_body).value.should == message_text
      page.should have_selector('.message.error', visible: true)
    end

  end
end 
```

在这种情况下，使用 shared_examples 或类似方法的最佳方法是什么？跟随 DRY。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T04:46:16.033

您可以在代码下方附加特定方法

```
require 'spec_helper'

describe "Messages manage" do
  # let (:user) { create :user } 
  # Instead expose it as instance variable
  @user = create(:user)
  # let (:other_user) { create :user }
  @other_user = create(:user)
  before(:each) do
    login_as user
  end

  describe "[message create]" do

    it "messages created by self, should appear on the page", js: true do

      # Use the custom method
      send_message "Hello my friend"

      page.should have_content(message_text)
      find_field(:message_body).value.should == ""
      page.should have_selector('#message_body', visible: false)
    end

    it "message errors should be displayed", js: true do

      # Use the custom method
      send_message "123"

      page.should_not have_content("Message: #{message_text}")
      find_field(:message_body).value.should == message_text
      page.should have_selector('.message.error', visible: true)
    end

  end

  def send_message(message_text)
        visit user_messages_path(@user, {with:@other_user.id} )
        fill_in :message_body, with: message_text
        click_button t("@users.messages.index.send")
        sleep 1 # waiting for js
  end

end 
```

对于更通用的代码，您可以将它们提取到模块中的规范/支持中。但是对于这种情况，上述方法应该足够好了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-07T05:59:30.577

我认为您没有足够相似的代码来使`shared_examples_for`块成为必要（尽管可以为**spec/support/utilities.rb**中的实用程序方法进行参数），因此我尝试将其拆分一下。

根据围绕@BillyChan 答案的讨论，很难定量地为您提供这个问题的正确答案，因为很大程度上取决于您的编码风格。我的风格是尽量*简洁*易读。其他人可能认为它太 DRY，有些不够 DRY。不知道这是否真的有效，因为我没有你的代码，但为了你的考虑......

```
require 'spec_helper'

describe "Message management" do

  let(:user)       { create :user }
  let(:other_user) { create :user }

  before { login_as user }

  subject { page }

  describe "message creation" do
    let(:send_button) { t("users.messages.index.send") }

    before { visit user_messages_path(user, { with: other_user.id }) }

    context "by self", js: true do
      let(:message_text) { "Hello my friend" }

      before do
        fill_in :message_body, with: message_text
        click_button send_button
        sleep 1 # waiting for js
      end

      it { should have_content(message_text) }
      it { should have_selector('#message_body', visible: false) }
      specify { find_field(:message_body).value.should == "" }
    end

    describe "message errors", js: true do
      let(:message_text) { "123" }

      before do
        fill_in :message_body, with: message_text
        click_button send_button
        sleep 1 # waiting for js
      end

      it { should_not have_content("Message: #{message_text}") }
      it { should have_selector('.message.error', visible: true) }
      specify { find_field(:message_body).value.should == message_text }
    end
  end        
end 
```

**根据@ole 的要求**编辑进一步的解释：****

 **`specify`是 的别名`it`。我`specify`在这里使用是因为我认为这个短语读起来更好（你可以很容易地将它替换为`it`）。此外，`it`块中的条件与`subject`的相关`page`，而`specify`块中的内容本质上不是直接引用`page`，而是“改变了`subject`”测试。如果我想将代码`specify`块中的代码放入我认为可读的块中，尽管更冗长，`it`块，我可能会将其更改为：

```
describe "message errors", js: true do
  let(:message_text) { "123" }

  before do
    fill_in :message_body, with: message_text
    click_button send_button
    sleep 1 # waiting for js
  end

  it { should_not have_content("Message: #{message_text}") }
  it { should have_selector('.message.error', visible: true) }

  describe "message body value" do
    let(:message_body) { find_field(:message_body).value }
    subject { message_body }
    it { should == message_text }
  end
end 
```

如果需要，您也可以删除该`let`语句并`find_field(:message_body).value`直接放入`subject`块中。这完全取决于品味和风格。此语法是否适合此示例？你决定 ：-）**

# java - GlassFish 服务器中的 java.lang.UnsupportedClassVersionError？

> ID：15856874
> 
> 赞同：0
> 
> 时间：2013-04-06T22:44:27.500
> 
> 标签：java, glassfish

我正在尝试将 WAR 文件部署到 GlassFish 服务器。我收到以下错误：

> [#|2013-04-06T17:50:56.982-0430|警告|glassfish3.1.2|javax.enterprise.system.container.web.org.glassfish.web.loader|_ThreadID=17;_ThreadName=Thread-2;| WEB9052：无法加载类 com.tugay.User，原因：java.lang.UnsupportedClassVersionError：WEB9032：类 com.tugay.User 具有不受支持的主要或次要版本号，大于 Java 运行时环境 1.6 版中的版本号。 0_37|#]

为什么它抱怨我的 Java 版本？我`@Named`在课堂上有一个注释。Java 1.6.0_37 不支持这个注解吗？

```
package com.tugay.user;

import javax.faces.bean.SessionScoped;
import javax.inject.Named;
import java.io.Serializable;

@Named("userBean")
@SessionScoped
public class UserBean implements Serializable {

    private String userName;

    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-06T23:15:00.543

您已经`com.tugay.User`使用 Java 7 或更新版本编译了源文件，并尝试在 Java 6 上运行它。Java 7 对`.class`格式进行了更改，以便在非静态类型语言上获得更好的性能。有关更多信息，请参阅[官方 oracle 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html)。

你可以尝试

*   将您的生产运行时升级到 7，
*   使用 1.6 编译，或
*   用作`-source 1.6 -target 1.6`构建脚本的修饰符

[在另一个问题](https://stackoverflow.com/questions/9290848/how-to-set-a-java-compiler-in-netbeans)中有进一步的解释。

# javascript - JavaScript 不会在任何浏览器中显示

> ID：15856877
> 
> 赞同：-1
> 
> 时间：2013-04-06T22:44:52.663
> 
> 标签：javascript

我是一个绝对的初学者，我正在尝试在任何浏览器（IE、FF、Chrome）中运行这段 JavaScript 代码。我正在使用 Firebug 作为调试器，但没有报告任何错误……感谢大家的宝贵时间。

```
function getQuote() {
    // Create the arrays
    quotes = new Arrays(4);
    sources = new Arrays(4);

    // Initialize the arrays with quotes
    quotes[0]  = "When I was a boy of 14, my father was so " + "ignorant...but when I got to be 21, I was astonished " + "at how much he had learned in 7 years.";
    sources[0] = "Mark Twain";
    quotes[1]  = "Everybody is ignorant. Only on different " + "subjects.";
    sources[1] = "Will Rogers";
    quotes[2]  = "They say such nice things about people at " + "their funerals that it makes me sad that I'm going to " + "miss mine by just a few days.";
    sources[2] = "Garrison Keilor";
    quotes[3]  = "What's another word for thesaurus?";
    sources[3] = "Steven Wright";

    // Get a random index into the arrays
    i = Math.floor(Math.random() * quotes.length);

    // Write out the quote as HTML
    document.write("<dl style='background-color: lightpink'>\n");
    document.write("<dt>" + "\"<em>" + quotes[i] + "</em>\"\n");
    document.write("<dd>" + "- " + sources[i] + "\n");
    document.write("<dl>\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:59:46.383

首先，你应该纠正这个：

```
// Create the arrays
quotes = new Arrays (4);
sources = new Arrays (4); 
```

对此：

```
// Create the arrays
quotes = new Array (4);
sources = new Array (4); 
```

此外，您需要在页面加载时调用此函数。将此行添加到脚本的末尾：

```
window.onload = getQuote; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:58:45.017

我做了一些修改以获得更好的性能。您只需要调用该函数。

```
function getQuote() {
      // Create the arrays
      quotes = [
            {
                  quote: "When I was a boy of 14, my father was so ignorant...but when I got to be 21, I was astonished at how much he had learned in 7 years.",
                  source: "Mark Twain"
            },
            {
                  quote: "Everybody is ignorant. Only on different subjects.",
                  source: "Will Rogers"
            },
            {
                  quote: "They say such nice things about people at their funerals that it makes me sad that I'm going to miss mine by just a few days.",    
                  source: "Garrison Keilor"
            },
            {
                  quote: "What's another word for thesaurus?",
                  source: "Steven Wright"
            }
      ];

      // Get a random index into the arrays
      i = ~~(Math.random() * quotes.length);

      // Get body tag
      var body = document.getElementByTagName("body")[0],
            // Making a string to append to body
            htmlCode = "<dl style='background-color: lightpink'>\n" + 
                  "<dt>\"<em>" + quotes[i].quote + "</em>\"\n" +
                  "<dd>- " + quotes[i].source + "\n</dl>";

      // appending htmlCode to body
      body.innerHTML += htmlCode;

  } 
```

我创建了一个对象数组以便更好地组织，因为报价和来源是相关数据。

我收集了一些关于javascript最佳实践的文章，看看：

*   [优化 Javascript 代码](https://developers.google.com/speed/articles/optimizing-javascript)
*   [使用 DOM](https://developers.google.com/speed/articles/javascript-dom)

希望能帮助到你...

# java - 如何使用 Java 中的 PrintWriter 将逗号打印到 .csv 文件？

> ID：15856879
> 
> 赞同：1
> 
> 时间：2013-04-06T22:45:08.617
> 
> 标签：java, comma, printwriter

我在将文本打印到 .csv 文件时遇到问题。我的字符串中有一个逗号，我最终将它打印到两个单元格而不是一个单元格。这是代码：

```
String companyName1 = "Edison Corporation, LLC co";
String profit1 = "$100";
String fileName = "Result.csv";
    File file = new File(fileName);
    output = new PrintWriter(file);
output.println(companyName+","+profit);
  //This gives me the following: 
  //  Edison Corporation             LLC co            $100
  //I need:
  //  Edison Corporation, LLC co     $100 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T22:50:13.407

CSV 格式允许使用逗号的字符串，但它们必须用双引号括起来。试试这个：

```
output.println("\""+companyName+"\","+profit); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:19:44.263

如果您在 Excel 中打开生成的 csv 文件，则必须考虑默认标记分隔符和转义字符与您办公室安装的区域设置不同。例如，Excel 中的德语默认值是分号而不是逗号。

可以肯定的是，在 NotePad++ 等编辑器中打开 csv。在 Excel 中使用“导入数据...”功能。在那里，您可以设置您在代码中定义的字符。

您还可以拥有以下 CSV 文件：

```
7test7+7foo7+7ba77r7 
```

其中 + 是标记分隔符，7 是转义字符。

# php - bind_result 失败

> ID：15856880
> 
> 赞同：0
> 
> 时间：2013-04-06T22:45:15.677
> 
> 标签：php, mysqli, prepared-statement

我实际上尝试`mysqli->fetch_array();`获取数组但无法正常工作，所以我使用了 bind_result(); 它抛出以下错误

`Warning: mysqli_stmt::bind_result(): Number of bind variables doesn't match number of fields in prepared statement`

所以我对 bind_result 进行了错误检查，我得到的是`bind_result() failed:`我真正做错了什么？

```
$wtf = "";
$hello = "";
$check_empty_field = $mysqli - > prepare("select `username`, `firstname`, `lastname` from `vpb_uploads` where `username` = ?  and `firstname` = ? and `lastname` = ?");
$check_empty_field - > bind_param('sss', $username, $wtf, $hello);
$check_empty_field - > execute();
$check_empty_field - > store_result();
if($check_empty_field - > num_rows < 1) {
  $date = date("d-m-Y");
  $i2 = '';
  $i3 = '';
  $i4 = '';
  $i5 = '';
  $insert = $mysqli - > prepare("insert into `vpb_uploads` (`username`, `firstname`, `lastname`, image_one, image_two, image_three, image_four, image_five, date)values(?,?,?,?,?,?,?,?,?)");
  $insert - > bind_param('sssssssss', $username, $wtf, $hello, $random_name_generated, $i2, $i3, $i4, $i5, $date);
  $insert - > execute();
  $identity = "image_one";
} else {
  $get_empty_field = $check_empty_field - > bind_result($username, $wtf, $hello);
  if(false === $get_empty_field) {
    die('bind_result() failed: '.htmlspecialchars($mysqli - > error));
  }
  $image_one = strip_tags($get_empty_field["image_one"]);
  $image_two = strip_tags($get_empty_field["image_two"]);
  $image_three = strip_tags($get_empty_field["image_three"]);
  $image_four = strip_tags($get_empty_field["image_four"]);
  $image_five = strip_tags($get_empty_field["image_five"]);
  global $identity;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T22:47:23.633

抛出此错误是因为您尚未将 SQL 查询返回的每个列名设置为变量。

例子：

如果您的表格中有 6 列并且您选择了所有 (*)，那么您将必须：

```
$stmt->bind_result($Col_1,$Col_2,$Col_3,$Col_4,$Col_5,$Col_6); 
```

如果你有：

```
$stmt->bind_result($Col_1,$Col_2,$Col_3,$Col_4,$Col_5); 
```

将抛出错误。

* * *

```
$check_empty_field->data_seek(0);
  $get_empty_field = $check_empty_field - > bind_result($username, $wtf, $hello); 
```

# ada - Ada 无约束类型

> ID：15856881
> 
> 赞同：1
> 
> 时间：2013-04-06T22:45:25.223
> 
> 标签：ada

您好，我是 ada 的新手，我正在尝试创建某种不受约束的数组，但我不知道如何在 ada 中做到这一点。

```
package data_puzzle is
    type rotation is private;
    type map(x_l,y_l,z_l : Natural) is private;
    type valid_rotations is private;
private
    type rotation is array(1..3) of Natural; 
    type map(x_l,y_l,z_l : Natural) is record
        struct : Structure(x_l,y_l,z_l);
        rot : rotation;
    end record;

    type valid_rotations is array(1..24) of map; --how can I make this row work?
end data_puzzle; 
```

结构看起来像这样

```
type structure(x_l,y_l,z_l : Natural) is record
    structure : xyz(1..x_l,1..y_l,1..z_l);
    X : Natural := x_l;
    Y : Natural := y_l;
    Z : Natural := z_l;
end record; 
```

基本上我有一张带有旋转和数据的地图。然后我想将所有不同的旋转存储在一个大小为 24 的列表中。我现在唯一的解决方案是启动类型 valid_rotations 是 map(x,y,z) 的 array(1..24) 然后它可以工作。但我不想那样启动它，因为我不知道那一刻的大小。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:16:52.003

好的，问题是类型`map`可以有不同的大小——因此编译器不能简单地留出适当数量的内存而没有进一步的信息——所以解决方案是创建某种间接的元素，它*可以*是一个数组：我们从 Ada 83 开始就有这种类型，**但从**Ada 2005 开始，我们可以进一步限制访问类型为空。

```
-- I don't know what this is supposed to be; I'm assuming an array.
type xyz is Array(Positive Range <>, Positive Range <>, Positive Range <>)
  of Integer;

type structure(x_l,y_l,z_l : Natural) is record
structure : xyz(1..x_l,1..y_l,1..z_l);  
X : Natural := x_l;
Y : Natural := y_l;
Z : Natural := z_l;
end record;

package data_puzzle is
type rotation is private;
type map(x_l,y_l,z_l : Natural) is private;
type valid_rotations is private;

type map_handle is private;
private
type rotation is array(1..3) of Natural; 
type map(x_l,y_l,z_l : Natural) is record
    struct : Structure(x_l,y_l,z_l);
    rot : rotation;
end record;

-- Because the size of the record "map" can change
-- depending on its discriminants, we cannot simply
-- make some array -- we can however have an array 
-- of accesses (since we know their sizes at compile)
-- and constrain these access-types to be non-null.
type valid_rotations is array(1..24) of map_handle;

-- Here it is: an access which cannot be null.
type map_handle is Not Null Access Map;

end data_puzzle; 
```

另外，我会从判别式 (X,Y,Z) 中删除 _1，这对我来说很好。

# php - 实时通话后jquery实时更新

> ID：15856882
> 
> 赞同：0
> 
> 时间：2013-04-06T22:45:40.570
> 
> 标签：php, jquery, ajax

在实时通话后进行实时更新时遇到了一些严重的问题。该事件已添加到 dBase，但我似乎无法更改已更改的内容。如您所见，我们有一个唯一的 div id，我们希望在其中显示确认（即：'#yvr_add'+id）。

需要明确的是：这发生在一个

“直播（'点击'，功能（）”

. 到目前为止尝试了一切（甚至是实时重新加载 div），但我就是没有让它运行。

是的先生（@Ohgodwhy），

这是代码，传递了两个变量：YouTube videoId 和我们服务器上的个人 videobookID。

```
$('.yt_add_vid').live('click',function(){
    var addItem = $(this).attr('id');
    var selectVal = $('#album'+addItem + ' :selected').val();
    var dataString = 'ytid='+ addItem + '&bookid=' + selectVal;

        $.ajax({
            type: "POST",
            url: "/xxx/do_my_update.php",
            cache: false,
            data: dataString,
            success: function(data){
                $('#yvr_add'+ytid).html('added your entry.'); 
            },
            error : function(data) { 
                alert('Dude, stay focussed now!');
            } 
        });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:35:56.407

通过返回修复它

```
success: function(data){... 
```

在那之后你可以做任何事情。

感谢各位大侠的回复！

# php - 替换字符串中所有出现的子字符串，留下前 2 - PHP

> ID：15856883
> 
> 赞同：0
> 
> 时间：2013-04-06T22:45:54.520
> 
> 标签：php, regex, preg-replace

```
$regex = '([\w-\.]+)@((?:[\w]+\.)+)([a-zA-Z]{2,4})';
$string = 'I am emailing to john@gmail.com and hoe@gmail.com but harris@live.com';

$newString = preg_replace($regex,'',$string); 
```

我想用空字符串替换所有电子邮件地址，留下前两个。所以 $newString 应该是 `I am emailing to john@gmail.com and hoe@gmail.com but`. 但徒劳无功。

我该怎么做....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:55:22.503

作为通用答案：

*   [`preg_split`](http://php.net/preg_split)与 一起使用`PREG_SPLIT_DELIM_CAPTURE`。

*   在结果数组上，删除每个索引不均匀的数组项，从`[4]`.

*   然后使用 连接余数[`implode()`](http://php.net/implode)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-06T23:14:12.373

你可以尝试使用**爆炸**

```
 $str = I am emailing to john@gmail.com and hoe@gmail.com but harris@live.com; 
 $str_array = explode( , $str); 
 $counter = 0; 
 $str_out = ; 
 foreach($str_array as $cast){ 
    $findme   = @; 
    $pos = strpos($cast, $findme); 
    if ($pos === false) { 
        $str_out = $str_out . $cast .  ; 
    }else{ 
        $counter++; 
        if($counter<=2){ 
            $str_out = $str_out . $cast .  ; 
        } 
    } 
 } 
 echo $str_out; 
```

# ajax - IE10 上的 Ajax 不发送 cookie

> ID：15856886
> 
> 赞同：2
> 
> 时间：2013-04-06T22:46:06.490
> 
> 标签：ajax, internet-explorer, jquery, cookies

由于 IE10 已安装在我的 Windows 7 机器上，因此无法登录我的应用程序... IE9 可以，FF 和 Chrome 仍然可以。

问题是 IE 在执行 ajax 请求（POST 或 GET）时不会发送会话 cookie（jsession id）。

我在 IE10 和 cookie 上看到了很多麻烦，但没有人可以解决我的问题： [IE10 User-Agent 导致 ASP.Net 不发回 Set-Cookie (IE10 not setting cookies)](https://stackoverflow.com/questions/6983732/ie10-user-agent-causes-asp-net-to-not-send-back-set-cookie-ie10-not-setting-coo) [jquery ajax $.post not working IE10](https://stackoverflow.com/questions/11235613/jquery-ajax-post-not-working-ie10) [IE10默认跨子域共享cookie](https://stackoverflow.com/questions/15115917/ie10-sharing-cookies-across-subdomains-by-deafult)

我准确地说我不是跨域的。我使用 Jasig/CAS 进行身份验证，并且 CAS cookie 和会话 cookie 都是通过 ajax 请求发送的。Ajax 请求通过 JQuery（最新版本）发送。

任何帮助将不胜感激。

提前致谢。

## 编辑1：

我尝试了所有 IE 安全选项，最后一个不成功跟踪。

## 编辑2：

我尝试将 Google Chrome Frame 添加到我的 IE10 中，但没有比这更好的了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T21:56:19.217

我发现发生了什么，它对其他人有用。@Mark Ormston 到目前为止还没有：使用路径 /cas 设置的 Cookie 由 IE10 发送到以 /cas-services 开头的 URL

在我的情况下，/cas 和 /cas-services 不在同一个 WebApp 中，并且每个都有自己的 JSESSIONID。将为 /cas 创建的 JSESSIONID 发送到 /cas-services 会导致上述问题。

为了更正，我只是用 /app-services 重命名 /cas-services （我猜所有不以 /cas 开头的东西都应该工作）。

JM。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T06:15:41.523

我遇到了类似的问题，只是在身份验证部分的 IIS cookieless="UseCookies" 中添加到 Web.Config 中。

# java - 为什么我的 Java 服务器关闭套接字？

> ID：15856890
> 
> 赞同：2
> 
> 时间：2013-04-06T22:46:38.573
> 
> 标签：java, sockets, client

我有服务器和客户端。我的服务器接受所有连接并返回到客户端字符串。但是当我尝试发送更多行时，它崩溃了

`java.net.SocketException: Socket is closed at java.net.Socket.getOutputStream(Unknown Source) at server.ServerCore.hiMsg(ServerCore.java:67) at server.ServerCore.run(ServerCore.java:49)`

这是我的服务器代码：

```
package server;

import java.io.File;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.*;
import java.util.Vector;
import java.util.logging.Level;
import java.util.logging.Logger;

/**
 *
 * @author pisio
 */
public class ServerCore extends Thread {

    private LoadSettings loadSettings = LoadSettings.Init();
    private int port = loadSettings.getConfigInt("port");
    private int max_connections = loadSettings.getConfigInt("max_connections");
    private String ipServer = loadSettings.getConfig("ipServer");
    private ServerSocket socket;
    private Socket connection;
    private boolean serverRuning = false;
    private int connectedUsers = 0;
    private Vector connVector = new Vector();

    @Override
    public void run() {

        try {
            socket = new ServerSocket(port, max_connections);
            System.out.println("+++\t Server was started at  address:" + socket.getLocalSocketAddress() + " with posible max users " + max_connections);

            serverRuning = true;

            while (serverRuning) {
                if (connectedUsers <= max_connections) {
                    connection = socket.accept();
                    connection.setKeepAlive(serverRuning);
                    connVector.add(connection);
                    connectedUsers = connVector.size();
                    hiMsg();
                    hiMsg();
                    hiMsg();

                }

                System.out.println("+++\t Last User:" + connVector.get(connVector.size() - 1).toString());
            }

        } catch (IOException ex) {
            //   Logger.getLogger(ServerCore.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void hiMsg() {

        try {
            Socket c = (Socket) connVector.get(connVector.size() - 1);
            PrintWriter out = new PrintWriter(new OutputStreamWriter(c.getOutputStream()));
            out.write("Hi user !  Im server !  Your master !  Blow me down\nping: ?  PONG ?");
            out.close();

        } catch (IOException ex) {
            Logger.getLogger(ServerCore.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    public void stopServer() {
        statusServer();
        serverRuning = false;
        try {
            socket.close();
        } catch (IOException ex) {
            //Logger.getLogger(ServerCore.class.getName()).log(Level.SEVERE, null, ex);
        }
        System.out.println("+++++\t  SERVER WAS STOPED !");
        // System.exit(port);

    }

    public void statusServer() {
        if (serverRuning) {
            System.out.println("Server running at port:" + port + "  with connected users :" + connectedUsers + "/" + max_connections);
        } else {
            System.out.println("Server IS NOT RUNNING!");
        }
    }
} 
```

这是我的客户代码：

```
package meetingsclient;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.lang.String;
import java.net.Socket;
import java.util.logging.Level;
import java.util.logging.Logger;

public class ServerConnect {

    private static ServerConnect sc = null;
    private Socket socket = null;

    private ServerConnect() {

        try {
            socket = new Socket("localhost", 8080);

            sendHiMsg();

        } catch (Exception ex) {
            Logger.getLogger(ServerConnect.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    private void sendHiMsg() throws IOException {
        BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

        System.out.println("Input:" + in.readLine());

    }

    public static ServerConnect Init() {
        if (sc == null) {
            sc = new ServerConnect();
        }
        return ServerConnect.sc;
    }
} 
```

我读了这个主题：[Socket Exception: socket is closed](https://stackoverflow.com/questions/8263141/socket-exception-socket-is-closed) but this dotn帮助了我。//对不起链接，但我无法理解如何正确格式化我的代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:19:25.840

来自[in的](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)[javadoc`getOutputStream()``Socket`](http://docs.oracle.com/javase/6/docs/api/java/net/Socket.html)：

> 关闭返回的 OutputStream 将关闭关联的套接字。

此外，关闭`PrintWriter`（和所有其他打印机/写入器）也会关闭它们的底层流。因此，您`OutputStream`通过关闭`PrintWriter`(in `hiMsg()`) 然后尝试写入已关闭的套接字来关闭您的。

要解决此问题，请不要关闭`PrintWriter`. 垃圾收集将为您处理！但是，当你完成它时，请关闭套接字。

# css - LESS 导入问题

> ID：15856891
> 
> 赞同：1
> 
> 时间：2013-04-06T22:46:38.930
> 
> 标签：css, less

尝试一个简单的，少三个文件：

颜色.less：

```
@green:green; 
```

无背景

```
body {
   background-color: @green;
} 
```

main.less

```
@import: "colors.less";
@import: "background.less"; 
```

当我

```
 lessc main.less main.css 
```

没有任何输出。我认为当您导入较少的文件时，它会得到解决。仔细检查了 twitter bootstrap 是如何做到的......它似乎对他们来说很好。我正在使用 lessc 1.3.3 (LESS Compiler) [JavaScript] 作为 LESS 编译器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T07:29:21.247

冒号将其转换为变量声明。删除冒号。

```
@import "file.less"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T00:35:25.583

根据您提供的示例，确保所有文件都在同一个文件夹中。否则它将不起作用，除非您：

*   更改`@import`语句中的路径以指向文件的位置，或
*   使用诸如[assemble-less](http://github.com/assemble/assemble-less)之类的编译器来定义导入文件的路径

# python - Python：列表中的列表 - 将字符串添加到父列表中的项目而不影响子列表的函数？

> ID：15856892
> 
> 赞同：2
> 
> 时间：2013-04-06T22:46:58.297
> 
> 标签：python, string, list, python-2.7

我使用以下方法生成了一个列表列表：

```
board = []
for i in range(0,5):
    board.append(["#"] * 4) 
```

返回：

```
 [['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#']] 
```

并使用此功能将它们打印在单独的行上：

```
def print_board(board):
for row in board:
    print row 
```

哪个输出：

```
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#'] 
```

我正在寻找某种方法，允许我编辑“板”列表中的项目，将字符串添加到“板”中的项目，但不改变已经是“板”中项目的子列表。

例如， board[0].function('A') 将使 'board' 返回如下内容：

```
[['#', '#', '#', '#'] A, ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#']] 
```

print_board 函数将返回：

```
['#', '#', '#', '#'] A
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#'] 
```

我想我的问题的一个浓缩版本是：是否有一个函数可以将字符串添加到列表中的项目，这些项目本身就是列表，或者这只是不可能的语法？

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:54:19.527

您可以将其用作生成矩阵的更简单方法：

```
>>> LoL=[['#']*4 for i in range(5)]
>>> LoL
[['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#']] 
```

并使用 .insert 将元素添加到给定位置的列表中：

```
>>> LoL.insert(1,'A')
>>> LoL
[['#', '#', '#', '#'], 'A', ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#'], ['#', '#', '#', '#']] 
```

问题可能在于混合类型。您可以通过使用更多级别的列表来解决此问题：

```
>>> LoL=[[['#']*4] for i in range(5)]
>>> LoL
[[['#', '#', '#', '#']], [['#', '#', '#', '#']], [['#', '#', '#', '#']], [['#', '#', '#', '#']], [['#', '#', '#', '#']]] 
```

然后你可以使用追加而不是插入：

```
>>> LoL[0].append('A')
>>> LoL
[[['#', '#', '#', '#'], 'A'], [['#', '#', '#', '#']], [['#', '#', '#', '#']], [['#', '#', '#', '#']], [['#', '#', '#', '#']]] 
```

然后更容易打印，因为列表是同质的：

```
>>> print '\n'.join(str(i)[1:-1] for i in LoL)
['#', '#', '#', '#'], 'A'
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#'] 
```

您还可以对每一行使用字典：

```
>>> d={i:l for i,l in enumerate(LoL)}   #assuming that is just a LoL
>>> d
{0: [['#', '#', '#', '#']], 1: [['#', '#', '#', '#']], 2: [['#', '#', '#', '#']], 3: [['#', '#', '#', '#']], 4: [['#', '#', '#', '#']]}
>>> d[0].append('A')
>>> d
{0: [['#', '#', '#', '#'], 'A'], 1: [['#', '#', '#', '#']], 2: [['#', '#', '#', '#']], 3: [['#', '#', '#', '#']], 4: [['#', '#', '#', '#']]}
>>> d[0]
[['#', '#', '#', '#'], 'A'] 
```

然后通过对字典的键进行排序来打印：

```
>>> print '\n'.join(str(d[k])[1:-1] for k,v in sorted(d.items()) )
['#', '#', '#', '#'], 'A'
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#'] 
```

* * *

**编辑**

你可以这样打印：

```
>>> for row in LoL:
...    for items in row:
...        print items,
...    print
... 
['#', '#', '#', '#'] A
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#']
['#', '#', '#', '#'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:57:34.027

创建一个新类，如下所示：

```
class Row(list):
    def __init__(self, *args, **kw):
        list.__init__(self, *args, **kw)
        self._str = ''

    def add(self, value):
        self._str += value

    def __str__(self):
        return list.__str__(self) + ' ' + self._str

board = []
for i in range(0,5):
    board.append(Row(["#"] * 4))

def print_board(board):
    for row in board:
        print row

board[0].add('A')

print_board(board) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T22:57:07.240

您是否尝试将项目附加到列表中的列表？也许你可以尝试类似

`list[1].append("string")`

并将 1 替换为大列表中列表的位置。或者也许用一个列表分配一个新变量并将该变量附加到一个列表中，这样会更容易和更直接。

对不起，如果我不明白你的问题。我不是以英语为母语的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T23:07:43.340

您可以将任何您想要的内容添加到列表中，并根据需要在其中组合项目，但是在上面的示例中，字符串“A”以某种方式浮动在那里并不是列表的一部分，因此语法没有意义.

如果您想要做的只是以某种方式使行可以动态增长，您可以将列表放在列表中（代表一行），这样您就可以将项目（任何类型）添加到这样的行中：

```
board = [
[['#', '#', '#', '#'], 'A'],
[['#', '#', '#', '#']]
[['#', '#', '#', '#']]
[['#', '#', '#', '#']]
[['#', '#', '#', '#']]] 
```

要访问第一行并添加“A”，您只需执行以下操作：`board[0].append('A')`

我希望这回答了你的问题。

# r - 基于许多条件的数据帧的多个子集

> ID：15856893
> 
> 赞同：2
> 
> 时间：2013-04-06T22:47:00.607
> 
> 标签：r, dataframe

目前我有一个 18 列的数据框。我想根据数据框中其他六列中的数据组合对其中一列“当前”中的数据进行子集化，然后将其保存到文本文件中。我想用于子集“呈现”的列是：

```
*answer (1:4) [answer takes values 1 to 4]
*p.num (1:18)
*session (1:2)
*count (1:8)
*type (1:3) 
```

所以有 3456 种可能的子集组合。

目前，我一直在使用以下并手动更改每行中的值并重新运行代码。

```
input<-subset(input, answer==1)
input.s2g<-subset(input, p.num == 1)
input.s2g<-subset(input.s2g, session == "S2")
input.s2g<-subset(input.s2g, count==8)
input.s2g<-subset(input.s2g, type==1)

write.table(s2g, file = "1_1_S2_8_1", sep = "\t", col.names = F, row.names = F) 
```

然而，这需要几个小时。一定有更简单的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:56:57.347

我会尝试这些方面的东西：

```
splitted <- split(input, list(input$answer,
                              input$p.num,
                              input$session,
                              input$count,
                              input$type))

filenames <- gsub("\\.", "_", names(splitted))

mapply(write.table, splitted, file = filenames, sep = "\t",
                    col.names = FALSE, row.names = FALSE) 
```

# php - 站点导航：具有多层的基于文本的水平菜单

> ID：15856895
> 
> 赞同：0
> 
> 时间：2013-04-06T22:47:19.113
> 
> 标签：php, html

我想知道完成以下任务的最佳实践，而不是典型的菜单或导航栏：

**早餐 | 午餐 | 晚餐** <-- 主站点菜单，静态始终显示（第 1 行）

**午餐1 | 午餐2 | 午餐 3** <-- 如果上面选择了午餐，则显示子页面（第 2 行）

**L1-项目1 | L1-项目2 | L1-Item3** <-- 如果选择了午餐 1，则显示子页面（第 3 行）

我希望所有这些链接都代表我网站的文件夹层次结构。上面的第 2 行和第 3 行是动态内容，因为它们显示与其父项对应的导航链接。line3 上的链接最终会显示页面内容。

它就像一个面包屑菜单，虽然它不关注你去过的地方（历史）——但你面前的是什么……

我本身并不要求任何代码 - 因为我的主要兴趣是从模块化的角度解决这个问题的最佳方法。因为它是导航系统，所以我宁愿不使用客户端脚本（javscript、jquery 等）

我希望此菜单的内容是站点地图的动态表示，因此当我向站点添加页面时，会在菜单中添加或编辑项目等。

任何人都知道可能存在这样的导航系统的任何最佳模式、实践和/或示例吗？

# php - 如何添加可以在我的网站上编辑的 jQuery？

> ID：15856903
> 
> 赞同：0
> 
> 时间：2013-04-06T22:48:20.487
> 
> 标签：php, jquery

我试过使用这两个免费的虚拟主机网站；hourb.com 000webhost 但是我无法让我的 jQuery 工作。

我的文件名为**myscript.js - JavaScript 文件**

在我的页面上我添加了

```
<script type='text/javascript' src='myscript.js'></script> 
```

我究竟做错了什么？我做错什么了吗？这些免费主机不支持 jQuery 吗？

非常感谢您的帮助。

（如果你不想看这里[http://kennenmen.hj.cx/test.php](http://kennenmen.hj.cx/test.php)或[http://kennenmen.netai.net/test.php](http://kennenmen.netai.net/test.php)）

我要做的就是让图像像幻灯片一样循环播放。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:51:50.440

```
<script type='text/javascript' src='myscript.js'></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script> 
```

到

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" ></script>
<script type='text/javascript' src='myscript.js'></script> 
```

包含顺序错误。您无法在包含 jQuery 之前加载的文件中访问 jQuery。

# node.js - 谷歌地图nodejs

> ID：15856908
> 
> 赞同：4
> 
> 时间：2013-04-06T22:49:19.123
> 
> 标签：node.js, google-maps

是否允许在服务器端使用谷歌地图而不实际显示地图？我四处搜索，似乎不是，但我可以看到谷歌地图有 nodeJs 插件。我想将directionService与节点js一起使用。如果允许，我是否需要将 Google 徽标放在某处？

谢谢

编辑：这是我的[做法](https://gist.github.com/nicco/0e10cb0a8254f1b4c721)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T22:56:07.557

您完全可以从您的节点服务器调用 API——这是[一个简单的 REST 请求](https://developers.google.com/maps/documentation/directions/#JSON)——但[条款](https://developers.google.com/maps/terms#section_10_1)(10.1.1(g)) 要求您最终在 Google 地图上显示结果。

# php - 如何将两个表与mysql查询连接在一起？

> ID：15856913
> 
> 赞同：1
> 
> 时间：2013-04-06T22:49:55.290
> 
> 标签：php, mysql, sql

这是一个非常个人的问题。所以我很难在 Stack 上找到一个好的答案。我正在寻找将两个表上的信息组合在一起的查询。

到目前为止，这就是我得到的

```
$query = "SELECT blog_post.*, user.name, user.last_name, user.picture 
          FROM blog_post, user 
          INNER JOIN user ON blog_post.author_id = user.id 
          WHERE blog_post.author_id = ? 
          ORDER BY timestamp DESC LIMIT 10";

$Statement = $this->Database->prepare($query);
$Statement->execute(array($id));
$row = $Statement->fetchAll();

print_r($row); //Returns: Array( ) 
```

我需要将用户信息与博客文章一起显示。当我将帖子保存在数据库中时，我可以存储信息，但是如果用户更新了他们的信息，它就不会更新。所以我试图在检索博客文章的同时从用户表中检索用户信息。

我将如何使用一个 sql 查询来执行此操作？我知道我可以通过调用另一个查询轻松地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T22:54:48.863

删除`, user`. 应该这样写：

```
SELECT blog_post.*, user.name, user.last_name, user.picture 
FROM blog_post
INNER JOIN user ON blog_post.author_id = user.id 
WHERE blog_post.author_id = ? 
ORDER BY timestamp DESC 
LIMIT 10 
```

# c++ - Visual Studio C++ 无法识别头文件？

> ID：15856914
> 
> 赞同：0
> 
> 时间：2013-04-06T22:49:57.330
> 
> 标签：c++, visual-studio

这是我第一次使用头文件，我有一个源代码，我正在尝试包含我的头文件。我的头文件的名称被调用`ccc_time.h`，我已经`#include "ccc_time.h"`写在我刚刚调用的源文件的开头，`source.cpp`但是 Visual Studio 说不存在这样的头`ccc_time.h`文件或目录。

我没有写的头文件，它是为我的作业分配的，我不认为我应该修改它。在头文件的开头，它读取

```
#ifndef CCC_TIME_H
#define CCC_TIME_H 
```

我还得到了另一个名为的文件`ccc_time.cpp`，它识别头文件没有问题，`ccc_time.h`但我似乎无法让我`source.cpp`识别那个头文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T22:58:10.490

如果你想添加标题

```
 #include "ccc_time.h" 
```

声明，那么这个头文件必须在你的项目目录中。因此，您可以将文件复制到您的项目目录并保留`#include "ccc_time.h"`符号。或者，您可以在项目“其他包含目录”中添加文件所在文件夹的路径，然后添加标题

```
 #include <ccc_time.h> statement. 
```

您还可以将标头复制到已包含的路径，即：

> ProgramFiles\MicrosoftVisualStudio11.0\VC\include

再次：添加 with `#include <ccc_time.h>`语句。

# counter - 在模拟中使用加法减法器 U 的 Vhdl 加减计数器

> ID：15856918
> 
> 赞同：0
> 
> 时间：2013-04-06T22:50:35.613
> 
> 标签：counter, vhdl

我正在尝试使用结构建模使用 4 位加法器减法器制作一个 4 位加减计数器问题是加法器减法器的输入（A）需要更新为等于总和，我尝试在过程中制作信号解决这个问题，但它在模拟中给出了 U 我也不能将 a 设置为等于输出，但我必须写出输出等于 A

此外，信号 s 为 0 的警告，我需要它来更改 0 和 1，因为它负责向上向下计数，但是当我尝试在测试台中为其设置值时它会出错

我无法弄清楚这一点，非常感谢任何帮助

模拟错误：错误：Xst：528 - 信号单元中的多源>；该信号连接到多个驱动器。错误：Xst:528 - 信号单元中的多源 >；该信号连接到多个驱动器。错误：Xst:528 - 信号单元中的多源 >；该信号连接到多个驱动器。错误：Xst:528 - 信号单元中的多源 >；该信号连接到多个驱动器

模拟警告：从未使用输入。如果该端口属于顶级块或属于子块并且该子块的层次结构被保留，则该端口将被保留并保持未连接状态。WARNING:Xst:653 - 使用了信号但从未分配过信号。这个无源信号将自动连接到值 0。

```
This is the counter code 

library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity upDown is
    Port ( a: in STD_LOGIC_VECTOR(3 downto 0 );
             b : in STD_LOGIC_VECTOR(3 downto 0 );
            clk,reset,enable : in  STD_LOGIC  ;
           o : out STD_LOGIC_VECTOR(3 downto 0 )
            );
end upDown;

architecture Behavioral of upDown is

component addersub4bits is 
 Port ( a,b : in  STD_LOGIC_VECTOR (3 downto 0);
        y : out  STD_LOGIC_VECTOR (3 downto 0);
        s : in  STD_LOGIC  );
 end component ;

 signal s : STD_LOGIC ;
-- signal tmp2 : STD_LOGIC_VECTOR(3 downto 0) ;
signal outputsignal: STD_LOGIC_VECTOR(3 downto 0) ; --inside process

begin

ad : addersub4bits  port map( a,"0001" ,outputsignal ,s) ;

process (clk,reset,enable) 

begin

if(reset= '1' ) 
then outputsignal <= "0000"; 

elsif(clk' event and clk='1' ) then 
if(enable ='1' ) then 
outputsignal<=a ;

else

outputsignal<=outputsignal ;   --zay mahowa 
end if ;
end if ;
end process ;
--o <= tmp ;
o <=outputsignal ;

end Behavioral ; 
```

## 加减器

```
library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.STD_LOGIC_ARITH.ALL;
use IEEE.STD_LOGIC_UNSIGNED.ALL;

entity addersub4bits is
Port ( a,b : in  STD_LOGIC_VECTOR (3 downto 0);
y : out  STD_LOGIC_VECTOR (3 downto 0);
s : in  STD_LOGIC);

end addersub4bits;

architecture dataflow of addersub4bits is

begin

 Process(a,b,s) 
 begin
if (s='1') then 

y<= (a + b) ;

else
y<=(a-b) ;

end if ; 

end process ;

end dataflow; 
```

试验台

```
-------------------------------------------------------------------------------
LIBRARY ieee;
USE ieee.std_logic_1164.ALL;

-- Uncomment the following library declaration if using
-- arithmetic functions with Signed or Unsigned values
--USE ieee.numeric_std.ALL;

ENTITY uD_testbench IS
END uD_testbench;

ARCHITECTURE behavior OF uD_testbench IS 

    -- Component Declaration for the Unit Under Test (UUT)

    COMPONENT upDown
    PORT(
         a : IN  std_logic_vector(3 downto 0);
         b : IN  std_logic_vector(3 downto 0);
         clk : IN  std_logic;
         reset : IN  std_logic;
         enable : IN  std_logic;
         o : OUT  std_logic_vector(3 downto 0)
        );
    END COMPONENT;

   --Inputs
   signal a : std_logic_vector(3 downto 0) := (others => '0');
   signal b : std_logic_vector(3 downto 0) := (others => '0');
   signal clk : std_logic := '0';
   signal reset : std_logic := '0';
   signal enable : std_logic := '0';

    --Outputs
   signal o : std_logic_vector(3 downto 0);

   -- Clock period definitions
   constant clk_period : time := 10 ns;

BEGIN

    -- Instantiate the Unit Under Test (UUT)
   uut: upDown PORT MAP (
          a => a,
          b => b,
          clk => clk,
          reset => reset,
          enable => enable,
          o => o
        );

   -- Clock process definitions
   clk_process :process
   begin
        clk <= '0';
        wait for 100 ns ;
        clk <= '1';
        wait for 100 ns ;
   end process;

   -- Stimulus process
   stim_proc: process
   begin        
      reset <= '1' ;enable <= '0' ; wait for 150 ns ;
        reset <= '0'; wait for 300 ns ;

        --enable <= '0' ; wait for 200 ns ;
        enable <='1' ;wait ;
   end process;

END; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T09:57:41.020

加法器的输出驱动信号输出信号*，*但您的寄存器也驱动相同的信号。改变其中一个应该会有所帮助。例如，将加法器输出更改为寄存器输入，将寄存器输出更改为加法器输入。

`ad : addersub4bits port map( a=>outputsignal,b=>"0001" , y=>a ,s=>s) ;`

您现在可以选择是使用寄存器输出*outputsignal*（良好的编码风格）还是使用加法器输出*a*作为*upDown*的输出。

可选提示 1：当使用未解析类型 std_ulogic 而不是 std_logic 时，vhdl 编译器必须抱怨由多个源驱动的未解析信号。因此，即使在模拟开始之前，也可以更快地发现此类问题。缺点是VHDL标准中没有IEEE.STD_U **LOGIC_UNSIGNED**包。

可选提示 2：应该首选 ieee.numeric_std 包，而不是 ieee.std_logic_arith，后者存在一些已知问题。

将两个技巧放在一起添加/子仍然可以这样编写：

```
if s='1' then 
  y<= std_ulogic_vector( unsigned(a) + unsigned(b));
else
  y<= std_ulogic_vector( unsigned(a) - unsigned(b));
end if; 
```

# android - 冰淇淋三明治 Android 标签样式

> ID：15856919
> 
> 赞同：1
> 
> 时间：2013-04-06T22:50:36.610
> 
> 标签：android, android-layout, android-widget, android-tabhost, android-4.0-ice-cream-sandwich

我正在寻找一种方法来为我的应用程序标签 Android 4 提供类似于图像的样式，并且每个标签都有自己的活动类。

![在此处输入图像描述](https://i.stack.imgur.com/hhOkm.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T01:38:53.407

需要注意的是，TabHost 是原生 Android 组件，因此每部手机都会以不同的方式呈现（除非您创建标签图像）。

ActionBarSherlock 的 bar 将以更动态的方式为 4.0 之前的设备提供 ICS 风格的导航栏体验：http: [//actionbarsherlock.com/](http://actionbarsherlock.com/)。如果您想支持较早的目标，它也是其他与操作栏相关的项目的一个非常好的库。

一旦你有标签栏，每个标签片段可能是最简单的方法：[http ://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:34:34.273

您将需要使用[TabHost](http://developer.android.com/reference/android/widget/TabHost.html)

使用 tabHost 的方法 addTab() 像这样为每个选项卡设置图像和链接活动（在您的 .java 文件的 onCreate 方法中）

```
TabHost tabHost = getTabHost();
tabHost.addTab(tabHost.newTabSpec("tab1").setIndicator("First", getResources().getDrawable(R.drawable.tab1pic)).setContent(new Intent(this, FirstActivity.class)));
tabHost.addTab(tabHost.newTabSpec("tab2").setIndicator("Second", getResources().getDrawable(R.drawable.tab2pic)).setContent(new Intent(this, SecondActivity.class)));

/* etc */

tabHost.setCurrentTab(0); 
```

# file-upload - 从 API 分段上传到 S3

> ID：15856920
> 
> 赞同：2
> 
> 时间：2013-04-06T22:50:41.793
> 
> 标签：file-upload, amazon-s3, multipartform-data, asp.net-web-api

我正在开发一个由 AWS S3 支持的用于文本分析的 Web API。为了允许客户上传大型（多 MB 甚至多 GB）文件，我一直在研究 S3 分段上传工具。客户端上传的端点属于我的 API，我从不直接公开我对 S3 的使用。我的（也许是天真的）假设是，当提交一个大文件时，我首先需要处理将文件分段上传到我的服务器，然后再从我的服务器到 S3 进行第二次分段上传。听起来对吗？或者某种重定向。这两种可能性听起来都不是特别有效......

我的意思是 DropBox 大概会做这样的事情，因为它们是由 S3 支持的。我想知道使用 DropBox 本身而不是原始 S3 API 是否更容易和更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T18:35:31.813

您的客户可以通过您的 API 完整地上传大文件，然后从那里将多部分上传到 S3 以提高性能并打破单部分上传的 5GB 限制：

[http://aws.amazon.com/s3/faqs/#How_much_data_can_I_store](http://aws.amazon.com/s3/faqs/#How_much_data_can_I_store)

您可以在客户端上传到您的服务时将多个部分发送到 S3，或者缓存整个内容，结束请求并异步发送。

Dropbox 应用程序允许大文件，但 Dropbox 通过其 Web 界面将上传的大小限制为 300MB：

[https://www.dropbox.com/help/5/en](https://www.dropbox.com/help/5/en)

# python - Python：从模式下向mplayer发送命令

> ID：15856922
> 
> 赞同：3
> 
> 时间：2013-04-06T22:50:44.767
> 
> 标签：python, subprocess, pipe, mplayer

在从属模式下运行时，我试图通过管道向 mplayer 发送命令，如下所示：

```
import subprocess, time
# start mplayer
song = 'mysong.mp3'
cmd = ['mplayer', '-slave', '-quiet', song]
p = subprocess.Popen(cmd, stdout=subprocess.PIPE, stdin=subprocess.PIPE)

# send a command every 3 seconds.
# Full command reference here: http://www.mplayerhq.hu/DOCS/tech/slave.txt 
while True:
    print('sleep 3 seconds ...')
    time.sleep(3)
    cmd = 'get_meta_artist'
    print('send command: {}'.format(cmd))
    p.stdin.write(cmd)
    output = p.communicate()[0]
    print(output) 
```

但输出什么都没有。

我从[这个问题](https://stackoverflow.com/questions/163542/python-how-do-i-pass-a-string-into-subprocess-popen-using-the-stdin-argument)中举了一个例子。

在终端中运行相同的 mplayer 命令可以正常工作。我在这里想念什么？

**更新：**

我将 cmd 从“get_meta_artist”更改为“get_meta_artist\n”，以便将换行符也发送到管道，但输出中仍然没有任何内容。

**更新2：**

我把 cmd 改成“\npause\n”，音乐就暂停了。所以这意味着通过标准输入发送命令有效。这意味着“\nget_meta_artist\n”命令的输出字符串没有按预期返回......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T23:16:19.447

每个子进程只能使用`.communicate()`一次。所以在`while`循环中使用它是行不通的。

相反，您应该`p.stdout`直接解析 的输出。如果有答案，每个答案似乎只有一行。

为了防止阻塞，您有 3 个选项：

1.  使用线程。您有一个单独的线程从主线程读取`p.stdout`数据并将其发送到主线程。如果没有数据可用，它会阻塞。

2.  设置`p.stdout`为非阻塞模式。本质上，您必须这样做：

    ```
    import fcntl, os
    fcntl.fcntl(p.stdout.fileno(), fcntl.F_SETFL,
        fcntl.fcntl(p.stdout.fileno(), fcntl.F_GETFL) | os.O_NONBLOCK) 
    ```

    如果您在没有可用数据的情况下阅读，则会出现异常 ( `IOError: [Errno 11] Resource temporarily unavailable`)。

3.  使用`select.select()`:`p.stdout.readline()`仅当`select.select([p.stdout], [], [], <timeout>)[0]`是非空列表时才执行。在这种情况下，给定的文件对象保证有可用的数据并且不会阻塞读取。

为了将“垃圾输出”与“有用”输出分开，您可以这样做：

```
def perform_command(p, cmd, expect):
    import select
    p.stdin.write(cmd + '\n') # there's no need for a \n at the beginning
    while select.select([p.stdout], [], [], 0.05)[0]: # give mplayer time to answer...
        output = p.stdout.readline()
        print("output: {}".format(output.rstrip()))
        split_output = output.split(expect + '=', 1)
        if len(split_output) == 2 and split_output[0] == '': # we have found it
            value = split_output[1]
            return value.rstrip() 
```

然后做

```
print perform_command(p, 'get_meta_artist', 'ANS_META_ARTIST')
print perform_command(p, 'get_time_pos', 'ANS_TIME_POSITION') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T02:47:47.850

我现在这样做，我开始得到输出：

```
 while True:
    cmd = '\nget_meta_artist\n'
    p.stdin.write(cmd)
    output = p.stdout.readline()
    print("output: {}".format(output.rstrip()))
    sys.stdout.flush() 
```

虽然我仍然需要想办法绕过 mplayer 自己的初始化标准输出的第一次刷新，但我认为我的问题已经解决了。

感谢 glglgl 给我有用的提示。

# c# - VS 2012 App.xaml 隐式样式问题

> ID：15856927
> 
> 赞同：1
> 
> 时间：2013-04-06T22:51:31.267
> 
> 标签：c#, .net, wpf, xaml, resourcedictionary

在 Microsoft Visual Studio 2012 IDE 中工作时，我正在设计基于 MahApps.Metro 开源工具包的 C# 和 XAML 应用程序。除了在 App.xaml 文件中引用的隐式定义的样式外，一切正常。App.xaml 文件中资源字典的代码如下所示：

```
<Application x:Class="MyApplication"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         StartupUri="MainWindow.xaml">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/MainDictionary.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources>

</Application> 
```

MainDictionary.xaml 文件中的代码如下所示：

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colours.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
        <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.AnimatedSingleRowTabControl.xaml" />
        <ResourceDictionary Source="/Resources/Icons.xaml" />
        <ResourceDictionary Source="/Resources/stringTable.xaml" />
        <ResourceDictionary Source="/Styles/controls.styles.xaml" />
    </ResourceDictionary.MergedDictionaries>

</ResourceDictionary> 
```

MahApps.Metro 项目中的 Controls.xaml 文件包含几乎所有可用标准控件的许多隐式定义（参考代码的[Git/Source](https://github.com/MahApps/MahApps.Metro/tree/master/MahApps.Metro)），以及一些颜色/主题定义。这是正在破坏的字典。

这种格式在我的 MainWindow.xaml 文件中运行良好，其中所有隐式样式在所有默认控件上都正常运行，但当它位于我的 App.xaml 文件中时会中断。当 ResourceDictionaries 加载到我的 App.xaml 文件中时，我仍然可以访问所有资源（使用 DynamicResource），我什至可以在控件上显式定义样式，因此通过该逻辑我可以将问题追溯到要做的事情App.xaml 文件中的隐式声明。

我发现了一些相关问题（[参考资料一](https://stackoverflow.com/questions/9278701/applying-style-by-targettype-if-style-connected-in-app-xaml)），但没有一个可行或可行的解决方案可用。

这在安装了 MahApps.Metro（参考：http://mahapps.com/MahApps.Metro/）的测试应用程序中完全可以重现，[一个](http://mahapps.com/MahApps.Metro/)窗口、一些随机控件以及位于 App.xaml 文件中的所有 ResourceDictionary 引用。

另一个奇怪的事情是，在 VS 2012 XAML 设计器视图中，所有隐式定义的控件和颜色都正确加载，但是一旦应用程序启动它就会中断（但不会崩溃或输出任何错误）。

对于这个项目，我需要这些资源在全球范围内可用（在项目中的所有文件上），所以如果除了使用 App.xaml 文件之外还有其他方法可以做到这一点，我愿意尝试一下。

谢谢你。

# ruby-on-rails-3 - 当模型 B 上的对象更改时，如何在模型 A 上运行回调

> ID：15856928
> 
> 赞同：0
> 
> 时间：2013-04-06T22:51:37.050
> 
> 标签：ruby-on-rails-3

如果我有

```
Class A 
 has_many :b

 after_save :run_method

 protected
 def update_expiration
     //
 end

Class B 
 belongs_to :a 
```

当 B 中的对象更新时，我需要在 A 上运行更新以更改到期日期。问题是 A 上的方法受到保护，所以我不能从 B 内部的回调中调用它。我只想在 B 发生更改时运行 :update_expiration。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:47:07.373

```
class A 
  has_many :b

  after_save :run_method
  B.after_save :update_expiration

  protected

  def update_expiration
      # ...
  end
end 
```

# javascript - 将敏感输入值分配给 Jquery 变量是否安全？

> ID：15856935
> 
> 赞同：2
> 
> 时间：2013-04-06T22:52:10.660
> 
> 标签：javascript, jquery

将敏感输入值分配给 Jquery 变量是否安全？例如，

```
var creditcardnum = $("input#cardNumber").val();
//do some things
$("input#abc").val(creditcardnum); 
```

我没有向服务器发送任何敏感数据，我只是将敏感值分配给上述代码的 Jquery 变量。（即我不在任何其他页面上调用该变量）我确实使用 SSL，但我不确定这是否是安全的做法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:04:27.473

如果它只是您使用 jQuery 进行的客户端操作，并且您确实说您没有向服务器发送任何数据，那么这应该是安全的。当数据在客户端和服务器之间发送时，风险就来了。

您可能希望确保销毁您创建的任何对象，因此当您使用完该`creditcardnum`变量后，将其显式设置为 null，但如果您正在确定变量的范围，它们将在您的函数完成时自动释放。看看[模块模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)，它展示了一种很好地保持变量范围的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:17:56.143

使用 jQuery 设置输入值不会增加任何安全漏洞。该值未设置为 jQuery 对象。它被设置为输入，使用 jquery 方法。

任何其他脚本都可以使用或不使用 jQuery 来查看此输入值。您可能还可以将 val 过滤器添加到 jQuery.valHooks.input 对象，以监听 jQuery val 方法对输入的使用。

您将从任何没有 iframe 的商业小部件添加到此页面的其他脚本必须被信任。

危险在于将数据发送到服务器，但您使用 SSL。

# c++ - 无法通过套接字发送文件

> ID：15856940
> 
> 赞同：2
> 
> 时间：2013-04-06T22:53:07.700
> 
> 标签：c++, sockets

我正在使用一些 C++ 套接字示例。客户端运行并可以连接到服务器但无法发送文件。我认为有问题，`send()`但我无法修复它。编辑：错误消息是“对等方重置连接”

欢迎任何想法。

我将 OpenSuSE 与 QT 4.7.4 一起使用

这是发送和接收功能

```
void str_server(int sock)
{
    char buf[1025];
    const char* filename = "//home//romanov//Documents//HelloWorld-build-desktop-Qt_4_7_4_in_PATH__System__Release//ss.png";

    FILE *file = fopen(filename, "rb");
    if (!file)
    {

        cerr<<"Can't open file for reading";
        return;
    }
    while (!feof(file))
    {
        int rval = fread(buf, 1, sizeof(buf), file);//read value
        if (rval < 1)
        {

            cerr<<"Can't read from file";
            fclose(file);
            return;
        }

        int off = 0;
        do
        {
            int sent = send(sock, &buf[off], rval - off, 0);
            if (sent < 1)
            {
                // if the socket is non-blocking, then check
                // the socket error for WSAEWOULDBLOCK/EAGAIN
                // (depending on platform) and if true then
                // use select() to wait for a small period of
                // time to see if the socket becomes writable
                // again before failing the transfer...

                cout<<"Can't write to socket";
                fclose(file);
                return;
            }

            off += sent;
        }
        while (off < rval);
    }

    fclose(file);
} 
```

//====================

```
void RecvFile(int winsock)
{
    int rval;
    char buf[1025];
    FILE *file = fopen("//home//romanov//Documents//HelloWorld-build-desktop-Qt_4_7_4_in_PATH__System__Release//ss2.png", "wb");
    if (!file)
    {
        printf("Can't open file for writing");
        return;
    }

    do
    {
        rval = recv(winsock, buf, sizeof(buf), 0);
        if (rval < 0)
        {
            // if the socket is non-blocking, then check
            // the socket error for WSAEWOULDBLOCK/EAGAIN
            // (depending on platform) and if true then
            // use select() to wait for a small period of
            // time to see if the socket becomes readable
            // again before failing the transfer...

            printf("Can't read from socket");
            fclose(file);
            return;
        }

        if (rval == 0)
            break; //line 159

        int off = 0;
        do
        {
            int written = fwrite(&buf[off], 1, rval - off, file);
            if (written < 1)
            {
                printf("Can't write to file");
                fclose(file);
                return;
            }

            off += written;
        }
        while (off < rval);
    }  //line 175
    while (1);
    fclose(file);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:36:45.250

嗯，问题是我的坏，[我读错了socket](https://stackoverflow.com/questions/10044872/unix-tcp-ip-read-transport-endpoint-is-not-connected-read-transport-endpoint)，`recvFile()`如果你们遇到同样的问题，你应该检查一下。

# android - Android：白日梦中的片段

> ID：15856942
> 
> 赞同：3
> 
> 时间：2013-04-06T22:53:15.680
> 
> 标签：android, fragment, dreamservice

我正在尝试创建一个白日梦应用程序，但似乎找不到任何关于在我的 DreamService 类中使用片段的文档。

我的意图是在 XML 文件中使用一个框架：

```
 <FrameLayout 
      android:id="@+id/content_frag"
      android:layout_width="match_parent"
      android:layout_height="wrap_content"
      android:layout_centerInParent="true"
      /> 
```

然后使用 FragmentManager 将我的片段添加到框架中：

```
 public void onAttachedToWindow( )
{
    setContentView(R.layout.daydream);

    getFragmentManager().beginTransaction().replace(R.id.content_frag, new ContentFragment(), "ContentFragment")
        .commit();

    super.onAttachedToWindow();
} 
```

DreamService 中似乎没有“getFragmentManager()”或等效函数，因此这可能吗，我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T08:23:28.237

可以将片段与 DreamService 结合使用。尽管仅仅因为您可以，但这并不意味着您应该这样做，因为您的片段必须注意一些警告，它是正常使用的（在 an 中`Activity`）和在 a 中`DreamService`。

以下代码段有效（已在设备上测试）：

```
MyFragment fragment = new MyFragment();
View view = fragment.onCreateView(LayoutInflater.fromContext(this), null, null);
setContentView(view); 
```

但是您必须注意，如果您的片段依赖于附加到一个`Activity`（例如调用`getResources()`，或需要`getActivity()`返回非 null），它必须`isAdded()`酌情检查以避免`IllegalStateException`s 和 null 引用。另请注意，您负责调用适当的生命周期方法（即`onDestroyView()`等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T02:13:59.477

我不认为你能做到这一点。DreamService 是一项服务。它没有 FragmentManager 的概念。

# mysql - MySQL模型和数据库同步ERROR

> ID：15856945
> 
> 赞同：-1
> 
> 时间：2013-04-06T22:53:39.327
> 
> 标签：mysql

我在 ER 模型中创建了我的表，当我尝试将模型与服务器同步时，我看到了一个我无法弄清楚的错误日志。就在显​​示此屏幕之前，仅找到 15 个表中的 2 个源，其余的显示“红色箭头 --> N/A”

ps 我只是通过 ER 模型完成了这个，我没有手动输入任何 SQL。

这是我收到的日志。

> 在服务器中执行 SQL 脚本
> 
> 错误：错误 1064：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ') REFERENCES 附近使用的正确语法`StudentRetentionSystemdb`。`module`() ON DELETE NO ACTION' 在第 8 行

```
CREATE  TABLE IF NOT EXISTS `StudentRetentionSystemdb`.`tutor` (   
  `PersonID` INT(11) NULL DEFAULT NULL ,    
  `moduleLeader` INT(11) NULL DEFAULT NULL ,    
  `departmentCode` INT(11) NULL DEFAULT NULL ,    
  PRIMARY KEY (`PersonID`) ,    
  INDEX `departmentCode_idx` (`departmentCode` ASC) ,    
  CONSTRAINT `moduleLeader` FOREIGN KEY ()
    REFERENCES `StudentRetentionSystemdb`.`module` () 
      ON DELETE NO ACTION
      ON UPDATE NO ACTION,    
  CONSTRAINT `departmentCode` FOREIGN KEY (`departmentCode` )    
    REFERENCES `StudentRetentionSystemdb`.`department` (`departmentCode` )   
      ON DELETE NO ACTION  
      ON UPDATE NO ACTION)

ENGINE = InnoDB

DEFAULT CHARACTER SET = utf8

COLLATE = utf8_general_ci 
```

SQL 脚本执行完成：语句：3 成功，1 失败

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:30:48.170

您在`CREATE TABLE`声明中某处的声明中有错误`INDEX`。您应该`ASC`从索引部分中删除。

```
INDEX `departmentCode_idx` (`departmentCode`) 
```

将出现的第二个问题是您没有在`FOREIGN KEY`约束上定义键，

```
CONSTRAINT `moduleLeader` FOREIGN KEY (moduleLeader)           -- add column name
    REFERENCES `StudentRetentionSystemdb`.`module` (columnName)-- add column name
    ON DELETE NO ACTION
    ON UPDATE NO ACTION, 
```

# algorithm - 时钟板上2次之间的最小距离

> ID：15856946
> 
> 赞同：1
> 
> 时间：2013-04-06T22:53:56.980
> 
> 标签：algorithm, distance

`int`给定时钟板上的2 次（as ），我必须计算它们之间的最小距离。

![在此处输入图像描述](https://i.stack.imgur.com/g7gp8.gif)

例如 -

```
d(12,1) = 1 //not 11 
d(3,5) = 2 
d(10,10) = 0 
```

最快的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T23:02:14.857

你试过什么？

```
Dim dif = Math.Abs((t2 + 6) Mod 12 - (t1 + 6) Mod 12) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T23:10:04.133

如果`a`并且`b`是 从`1`到`12`：

```
min(abs(a - b), 12 - abs(a - b)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T23:28:01.930

纯算术（没有任何库）：

```
int d(int first, int second){
   int temp = first - second;
   temp < 0? temp *=-1 :temp ;

   int distance = temp > 6? 12-temp:temp;

   return distance;
} 
```

# rspec - 规范有时通过有时不通过

> ID：15856948
> 
> 赞同：0
> 
> 时间：2013-04-06T22:54:06.823
> 
> 标签：rspec, request, bdd, database-cleaner

我有要求规格：

```
describe "Matches" do
  describe "GET /matches" do
    it "works! (now write some real specs)" do
      # Run the generator again with the --webrat flag if you want to use webrat methods/matchers
      get matches_path
      response.status.should be(200)
    end

    it 'return JSON array' do
      get matches_path(format: :json)

      @json = JSON.parse(response.body)

      @json.should be_an Array
    end

    context 'and there are some entries' do
      it 'return all matches' do
        @matches = (1..4).map { FactoryGirl.create(:match) }

        get matches_path(format: :json)

        @json = JSON.parse(response.body)

        @json.length.should == @matches.size
      end
    end
  end
end 
```

有时完全通过，但有时我得到：

```
1) Matches GET /matches and there are some entries return all matches
   Failure/Error: @json.length.should == @matches.size
     expected: 4
          got: 5 (using ==)
   # ./spec/requests/matches_spec.rb:29:in `block (4 levels) in <top (required)>' 
```

我不知道为什么，这很烦人。我在每次测试后使用以下命令清理数据库`database_cleaner`：

```
Spork.prefork do
  # ...

  require 'database_cleaner'

  RSpec.configure do |config|
    # ...

    config.infer_base_class_for_anonymous_controllers = true

    config.before(:suite) do
      DatabaseCleaner.strategy = :transaction
      DatabaseCleaner.clean_with(:truncation)
    end
  end
end

Spork.each_run do
  RSpec.configure do |config|
    config.before(:each) do
      DatabaseCleaner.start
    end

    config.after(:each) do
      DatabaseCleaner.clean
    end

    # ...
  end
end 
```

**编辑：**

控制器：

```
class MatchesController < ApplicationController
  # GET /matches
  # GET /matches.json
  def index
    @matches = Match.all
  end

  # GET /matches/1
  # GET /matches/1.json
  def show
    @match = Match.find(params[:id])
  end
end 
```

看法：

```
json.array!(@matches) do |match|
  json.partial! match
end 
```

部分的：

```
json.(match, :id, :ladder, :start)
json.player_one match.player_one.to_builder
json.player_two match.player_two.to_builder
json.player_one_odds match.player_one_odds.value
json.player_two_odds match.player_two_odds.value 
```

模型：

```
class Match < ActiveRecord::Base
  belongs_to :tournament
  belongs_to :league

  has_many :odds, dependent: :destroy

  belongs_to :winner, class_name: 'Competitor'
  belongs_to :player_one, class_name: 'Competitor'
  belongs_to :player_two, class_name: 'Competitor'

  validates :start, presence: true

  validates :tournament, presence: true, :if => -> { league.nil? }
  validates :league, presence: true, :if => -> { tournament.nil? }

  validates :player_one_id, presence: true
  validates :player_two_id, presence: true
  validates :player_one_odds, presence: true
  validates :player_two_odds, presence: true

  validate :in_future

  before_save :save_odds

  attr_accessible :start, :league_id, :tournament_id, :ladder, :player_one_id, :player_two_id,
    :winner_id, :player_one_odds, :player_two_odds
  attr_readonly :player_one_id, :player_two_id

  def player_one_odds
    @player_one_odds ||= odds.where(:competitor_id => player_one).order('updated_at DESC').first
  end
  def player_two_odds
    @player_two_odds ||= odds.where(:competitor_id => player_two).order('updated_at DESC').first
  end

  def player_one_odds=(value)
    @player_one_odds = Odd.new(competitor: player_one,
                               match: self,
                               close_at: start,
                               value: value)
  end
  def player_two_odds=(value)
    @player_two_odds = Odd.new(competitor: player_two,
                               match: self,
                               close_at: start,
                               value: value)
  end

  private
  def in_future
    errors.add(:start, I18n.t('match.in_future')) if start.nil? || start < Time.now
  end

  def save_odds
    player_one_odds.save && player_two_odds.save
  end
end 
```

现在我也有类似的测试：

```
context 'and there are some entries' do
  let(:matches) { FactoryGirl.create_list(:match, 4) }

  it 'return all matches' do
    get api_matches_path(format: :json)

    puts response.body

    @json = JSON.parse(response.body)

    @json.length.should == 4
  end
end 
```

而且`@json.length`几乎总是`0`如此，但有时确实如此`1`。

# php - Javascript从数据库中获取值

> ID：15856955
> 
> 赞同：0
> 
> 时间：2013-04-06T22:55:23.257
> 
> 标签：php, javascript, mysql, json

我有一个 html 页面和一个 php 页面。html页面有一个表，php有一个对mysql表的查询。我不知道如何在我的 html 页面中显示查询结果。

html页面有以下部分代码：

```
<table class="table-striped" id="tabela_editavel_1">
    <thead>
        <tr>
            <th>Contacto</th>
            <th>Dt Receção</th>
            <th>Dt Validade</th>
            <th>Refª Cliente</th>
            <th>Num Proposta</th>
            <th>Estado</th>
        </tr>
    </thead>
    <tbody id="dados_tabela">

        <tr class="">
            <td id="xz"><input id="contacto"/></td>
            <td id="xz"><input id="dtrececao"/></td>
            <td id="xz"><input id="dtvalidade"/></td>
            <td id="xz"><input id="ref_cli"/></td>
            <td id="xz"><input id="numproposta"/></td>
            <td id="xz"><input id="estado"/></td>
        </tr>

    </tbody>
</table>

<script>
$.getJSON('php/c_listaconsultas.php', function(data) {
  $('#contacto').val(data.nome);
  $('#dtrececao').val(data.datarecepcao);
  $('#dtvalidade').val(data.validadeconsulta);
  $('#ref_cli').val(data.referenciaconsulta);
  $('#numproposta').val(data.propostanumero);
  $('#estado').val(data.estado);            
});
</script> 
```

我的 php 文件有以下代码：

```
(...)

mysql_select_db($database_connLOOPGEST, $connLOOPGEST);
$query_rs_listaconsultas = sprintf("SELECT clientes_consultas.id_cliente, clientes_consultas.id_consulta, clientes_consultas.datarecepcao, clientes_consultas.referenciaconsulta, clientes_consultas.validadeconsulta, clientes_consultas.tituloconsulta, loop_propostas.propostanumero, clientes_contactos.nome, loop_propostas.id_proposta, status.descricao estado, clientes.nome_curto nome_cliente FROM (clientes_consultas left join clientes_contactos on clientes_consultas.id_contacto = clientes_contactos.id_contacto) left join loop_propostas on clientes_consultas.id_consulta = loop_propostas.id_consultacliente inner join status on status.id_status = clientes_consultas.estado inner join clientes on clientes.id_cliente = clientes_consultas.id_cliente WHERE clientes_consultas.id_cliente=%s ORDER BY clientes_consultas.datarecepcao DESC", GetSQLValueString($numcliente_rs_listaconsultas, "int"));
$rs_listaconsultas = mysql_query($query_rs_listaconsultas, $connLOOPGEST) or die(mysql_error());
$row_rs_listaconsultas = mysql_fetch_assoc($rs_listaconsultas);
$totalRows_rs_listaconsultas = mysql_num_rows($rs_listaconsultas);

echo json_encode($row_rs_listaconsultas); 
```

首先，我的“echo json_encode”没有给我所有的查询行，但只有一个，如何将所有查询行传递给我的 html 页面？这里缺少什么？:((( 我需要的第二个帮助是如何在表格中显示这些值？我使用的是正确的函数 (.$getJSON)？

提前致谢。马里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:00:38.893

您必须使用以下内容遍历 mysql_fetch_assoc：

```
while ($row = mysql_fetch_assoc($result)) {
    $row_rs[] = $row;
} 
```

并且返回的数据将是一个包含对象的数组。您应该使用以下方法对其进行迭代：

```
$.each(data, function(element) { /* do something */}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:01:17.043

首先，请停止使用`mysql`扩展程序。它已被弃用，您应该改用`mysqli`or PDO。你只得到一行的原因是你正在使用的函数[`mysql_fetch_assoc`](http://php.net/manual/en/function.mysql-fetch-assoc.php)只返回一行。您想要[`mysqli_fetch_all`](http://www.php.net/manual/en/mysqli-result.fetch-all.php)或[PDO 等价物](http://www.php.net/manual/en/pdostatement.fetchall.php)。`$.getJSON`是一个正确使用的功能，像你这样设置值应该可以工作，我`console.log(data)`想找出问题所在。

# android - Android 转弯检测数学

> ID：15856957
> 
> 赞同：1
> 
> 时间：2013-04-06T22:55:31.320
> 
> 标签：android, math

我想为此开发一个个人应用程序，我需要检测我的汽车的旋转。在之前的帖子中，我得到了一个答案，即哪些传感器有好处，这没关系。现在我想请你总结一下基本/需要的数学关系。我想在我的应用程序中看到的内容： - 汽车旋转度数 - 汽车实际速度（一般来说，这个应用程序将用于低速情况，如 3-5 公里/小时）

我认为这其中更难的部分是实时旋转检测。当我将手机以横向或纵向模式放置在车架中时，应用程序可以正常工作会很好。

所以请总结一下计算汽车旋转需要哪些方程、公式、关系。请告诉我您对哪种运动/位置传感器最适合此目的的建议（重力、加速度计、陀螺仪、..）

首先我认为我会使用 Android 2.2 来更好地与我的手机兼容，但对我来说 2.3.3 也可以。在这种情况下，我可以使用看起来不错的 TYPE_ROTATION_VECTOR，但我真的不知道它对我是否有用？

我不想要完整的源代码，我想自己开发它，但我需要知道我可以从哪里开始，需要什么深入的数学知识以及需要哪些数学部分。对于传感器问题：我有点困惑，有很多传感器对我来说可能没问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:47:02.977

您不需要深奥的数学知识。如果可用`TYPE_MAGNETIC_FIELD`，您应该使用。`TYPE_GRAVITY`否则使用`TYPE_ACCELEROMETER`，但您需要使用`Kalman`滤波器或低通滤波器过滤加速度计值。您应该使用后置摄像头的方向作为参考。这个方向是`azimuth`调用返回的`getOrientation`，但是调用前`getOrientation`需要调用`remapCoordinateSystem(inR, AXIS_X, AXIS_Z, outR)`才能正确`azimuth`。然后随着设备不是平放的，设备的方向是什么（横向或纵向）都没有关系。只需确保手机屏幕朝向与汽车方向相反的方向即可。
现在声明两个类成员`startDirection`和`endDirection`. 一开始，`startDirection`并且`endDirection`具有相同的值，现在如果`azimuth`变化超过 say `3 degrees`，总是会有一点波动，然后将 更改`endDirection`为这个值并继续更改，直到说 20 返回`azimuth`具有相同的值（你必须尝试这个数字）。这意味着汽车停止转弯然后你计算和之间的差值`startDirection`，`endDirection`这给你了`degree of rotation`。现在设置`startDirection`到`endDirection`这个新的方位角并等待下一个转弯。

# java - 在 Servlet 中创建接口的对象？

> ID：15856963
> 
> 赞同：0
> 
> 时间：2013-04-06T22:56:29.137
> 
> 标签：java, servlets

请考虑以下代码片段：

```
import java.io.*;
import java.util.*;
import javax.servlet.*;

public class PostParametersServlet extends GenericServlet{
    public void service(ServletRequest request , ServletResponse response) throws 
         ServletException,  IOException { .... 
```

等等等等.....

我的问题：

据说我们不能创建接口的对象，但如果我们考虑上面的代码片段，ServletRequest 和 ServletResponse 是 javax.servlet 包的核心接口。

此外，在上述程序描述中，“请求”和“响应”被称为对象。

考虑到接口不能有对象这一事实，谁能告诉/解释我这些接口如何拥有自己的对象？

如果我在某个地方错了，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T22:59:59.040

对象*实现*接口。因此，在 的情况下`ServletRequest`，有一个实现它的对象，如下所示：

```
public class ServletRequestImpl implements ServletRequest {
    // All of the methods defined in ServletRequest implemented here.
} 
```

当你`ServletRequest`在你的`service()`方法中得到这个时，你真的得到了一个实现该接口的具体对象。

我怀疑你的困惑在于接口本身没有实现细节。接口只是为其他对象提供一个规范来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T22:59:26.870

```
Could anyone tell/explain me how can these interfaces have object of their own considering the fact that interfaces cannot have objects? 
```

这是不正确的。

接口类型的引用可以引用实现该接口的任何对象。

您会注意到 HttpServletRequest 和 HttpServletResponse 都实现了各自的接口。你当然可以在这里传递这些对象中的任何一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T23:06:22.873

考虑以下类型：

```
public interface A {
public void m();
}
public class B implements A {
public void m() {
    // TODO Auto-generated method stub  
}
} 
```

现在您可以拥有任何代码行：

```
public static void main(String[] args) {
A a = new B();
anyMethod(a);
}

public static void anyMethod(A a) {
System.out.println(a.getClass());
} 
```

在anyMethod中，参数类型是接口A，实际类型是B，会用sysout显示

# ajax - 如何找出 AJAX 请求和响应之间需要这么长时间？

> ID：15856964
> 
> 赞同：1
> 
> 时间：2013-04-06T22:56:30.787
> 
> 标签：ajax, jsf-2, primefaces, jboss7.x

我有一个简单`<p:commandButton>`的`<p:lightBox>`按属性显示`oncomplete`。这大约需要 2.5 秒。在一个非常相似的设置中，它只需要 51 毫秒。
有没有办法找出请求和响应之间发生了什么（并且需要很长时间）？

我没有添加特定代码，因为目前我不想要针对该特定问题的解决方案，而是学习自己检查和调试此类问题。

# ios - 停止 UIView 动画，不前进到最后

> ID：15856965
> 
> 赞同：0
> 
> 时间：2013-04-06T22:56:32.723
> 
> 标签：ios, uiview

无论如何要停止 UIView 动画，但不跳转到结束值？我想从我现在的位置继续，而不是在它开始移动到新位置之前看起来很生涩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:00:32.370

这是其他在这里绊倒的人的答案。真的很简单，只需将 'options:UIViewAnimationOptionBeginFromCurrentState' 传递给选项，它就会从当前位置恢复

```
[UIView animateWithDuration:2.0
                      delay:0.0
                    options:UIViewAnimationOptionBeginFromCurrentState
                 animations:^{
                     self.scrollView.contentOffset = CGPointMake(visibleFrame.origin.x, visibleFrame.origin.y);
                 }
                 completion:^(BOOL finished){}
 ]; 
```

# .net - 在 Windows 商店应用程序中加载图像时出现 ag_e_network_error

> ID：15856968
> 
> 赞同：1
> 
> 时间：2013-04-06T22:56:58.443
> 
> 标签：.net, windows-8, windows-runtime, windows-store-apps

我遇到了一些问题，这应该是一项非常简单的任务，从 URL 将图像加载到 Windows 商店应用程序中。我的代码如下：

```
 Image image = new Image();
  image.Stretch = Stretch.None;
  image.HorizontalAlignment = Windows.UI.Xaml.HorizontalAlignment.Left;
  BitmapImage bitmap = new BitmapImage(new Uri(url, UriKind.RelativeOrAbsolute));
  image.Source = bitmap;
  bitmap.ImageFailed += bitmap_ImageFailed;
  panel.Children.Add(image);
  scroller.ScrollToVerticalOffset(Double.MaxValue); 
```

只有有时当我加载图像时，我会收到一个带有错误 AG_E_NETWORK_ERROR 的 ImageFailed 事件，没有明显的原因。图像存储在 Azure Blob 存储中，并可通过 URL 访问。我知道这很好用。

我需要的图像的 url 是通过来自 ASP.NET Web API 角色的 Web 请求发送的。

当我第一次向本地托管的 Web api 实例（localhost）发出本地 Web 请求时，问题似乎间歇性地发生，该实例为我提供了图像 url，然后通过给定的 url 从 azure blob 存储中获取图像。

它似乎没有遵循任何明显的模式，让我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T05:32:52.823

你读过[这个](https://stackoverflow.com/questions/1793487/ag-e-network-error-when-loading-a-remote-image-in-silverlight)和[这个](https://stackoverflow.com/search?tab=votes&q=ag_e_network_error)吗？

我怀疑您使用`BitmapImage`的是 URL，这可能会导致问题。尝试使用`HttpClient`并让我知道它是否有效？

# android - 创建用于显示演练的 Android 叠加层

> ID：15856970
> 
> 赞同：2
> 
> 时间：2013-04-06T22:57:10.273
> 
> 标签：android, xml, layout, user-interface, overlay

这就是我为实现 CommonsWare 在以下问题中的回答所做的工作： [如何创建一个帮助覆盖，就像您在一些 Android 应用程序和 ICS 中看到的那样？](https://stackoverflow.com/questions/10216937/how-do-i-create-a-help-overlay-like-you-see-in-a-few-android-apps-and-ics)

但它失败了。运行时没有错误但没有出现任何错误（我已确保下面的***isFirstTime()***函数运行正常

```
@Override
public void onCreate(Bundle savedInstanceState)
{
  this.requestWindowFeature(Window.FEATURE_NO_TITLE);
  super.onCreate(savedInstanceState);

if(isFirstTime())
{
    LayoutInflater inflater = LayoutInflater.from(this);

    final FrameLayout overlayFrameLayout = new FrameLayout(this);
    setContentView(overlayFrameLayout);

    overlayFrameLayout.addView(inflater.inflate(R.layout.main, null));
    overlayFrameLayout.addView(inflater.inflate(R.layout.overlay, null));

    overlayFrameLayout.setVisibility(View.VISIBLE);
    overlayFrameLayout.setOnTouchListener(new View.OnTouchListener()
    {
        public boolean onTouch(View v, MotionEvent event)
        {
            overlayFrameLayout.setVisibility(View.INVISIBLE);
            overlayFrameLayout.removeViewAt(1);
            return false;
        }
    });
}

setContentView(R.layout.main);
ctx = getApplicationContext(); 
```

我很确定我在创建 FrameLayout 时出错了。感谢帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T12:43:41.987

您看不到任何内容，因为您两次调用 setContentView 并且 R.layout.main 正在膨胀并替换您之前创建和分配的 overlayFrameLayout。下面的代码应该把它整理出来。

```
@Override
protected void onCreate(Bundle savedInstanceState)
{
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);

    if(isFirstTime()){
        final LayoutInflater inflater = getLayoutInflater();
        final FrameLayout frameLayout = new FrameLayout(this);
        inflater.inflate(R.layout.main, frameLayout, true);
        final View overlayView = inflater.inflate(R.layout.overlay, frameLayout, false);
        overlayView.setOnTouchListener(new View.OnTouchListener()
        {
            public boolean onTouch(View v, MotionEvent event)
            {
                frameLayout.removeView(overlayView);
                return false;
            }
        });
        frameLayout.addView(overlayView);
        setContentView(frameLayout);
    }
    else{
        setContentView(R.layout.main);
    }
} 
```

# c++ - 重载 + 运算符以便能够使用对象的 3 个 const 实例

> ID：15856971
> 
> 赞同：0
> 
> 时间：2013-04-06T22:57:18.063
> 
> 标签：c++, operator-overloading

我在为 CMatrix 类中的 const 实例定义重载运算符 + 时遇到了麻烦。我已经有了这个 `+ operator`定义 `CMatrix operator+(const CMatrix &matrix) const;`

它适用于`non-const`CMatrix 的实例。但我不能做这样的事情：

```
const CMatrix a;
const CMatrix b;
const CMatrix c;
a=b+c; 
```

尝试编译源代码时出现此错误：`error: passing ‘const CMatrix’ as ‘this’ argument of ‘CMatrix& CMatrix::operator=(const CMatrix&)’ discards qualifiers`

谁能告诉我，如何定义重载以便`+ operator`能够编译代码？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-06T22:58:49.700

这与你的`operator+`. 这是因为`a`即使您将其声明为`const`. 你显然不能分配给一个`const`对象，因为这会改变它的价值！

也许你想做的是：

```
const CMatrix a = b + c; 
```

或使`a`非`const`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:59:44.340

您将 'b+c' 分配给常量 CMatrix。

它应该是：

```
CMatrix a;
const CMatrix b;
const CMatrix c;
a=b+c; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T00:54:58.370

如果您计划将 b 和 c 设置为您拥有的任何常数，并且如果您在其他地方使用它们，我会选择 Dylan McKay 的解决方案。如果您正在寻找 a = b + c，则“a”不能是 const，除非您将其设置为

```
const CMatrix a = b + c; 
```

正如 sftrabbit 所示。否则，（你最初是如何尝试的），只是试图取两个常数的总和并强制进入另一个常数，如果它是一个常数就不能这样做......因为那样它就不是一个常数值再说了，它会改变的。

# java - 使用数组列表和创建对象

> ID：15856973
> 
> 赞同：0
> 
> 时间：2013-04-06T22:57:49.463
> 
> 标签：java, arraylist, pass-by-reference

我正在努力理解将对象添加到数组列表的工作原理以及相关的语法。

查看 Java 中的数组列表，“如何编程”第 9 版。它没有明确说明如何将对象从测试类添加到数组列表中。我根本不明白它们是如何传递/添加的。

就我而言，我使用类 Phonebook.java 来定义默认和非默认构造函数，并使用 Test 类将这些对象添加到数组列表中。

我的问题是，在测试类中添加这些对象的过程是什么，以及如何使用数组列表来处理或初始化 PhoneBook 类中的这些对象？

到目前为止，我的代码如下。

电话簿.java ->

公共类 PhoneBookTest {

```
public static void main (String [] args)
{

    Scanner input = new Scanner (System.in);

    ArrayList < PhoneBook > directory = new ArrayList <PhoneBook>(5);

    System.out.println ("Welcome to your Phone Book");
    System.out.println ("Add Entries to the list");
    System.out.println ();

    PhoneBook x;
    String num = null;
    String name = null;

    for (int i = 0; i < 5 ; i++)
    {

        System.out.println ("Enter Name: ");
        name = input.nextLine();
        System.out.println();

        System.out.println ("Enter Number: ");
        num = input.nextLine();
        System.out.println();

        PhoneBook newEntry = new PhoneBook (name, num);
        directory.add (newEntry);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T23:14:03.347

将对象添加到任何列表（ArrayList 只是列表的一种实现）使用该`add`方法。在您的示例中，将每个条目添加到 ArrayList 的末尾，`PhoneBookTest`看起来像这样：

```
class PhoneBookTest
{
  public static void main( String[] args )
  {
    List<PhoneBook> phoneBooks = new ArrayList<PhoneBook>( 5 );
    Scanner input = new Scanner (System.in);

    System.out.println ("Welcome to your Phone Book");
    System.out.println ("Add Entries to the list");
    System.out.println ();

    for (int i = 1; i < = phoneBooks.size(); i++)
    {
        System.out.println ("Enter Name: ");
        String name = input.nextLine();
        System.out.println();
        System.out.println ("Enter Number: ");
        String number = input.nextLine();
        System.out.println();

        PhoneBook newEntry = new PhoneBook( name, number );
        phoneBooks.add( newEntry );
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T23:19:32.570

在您的循环中，您是参考

```
Phonebook.getName() in an effort to set it. 
```

您的代码需要访问电话簿的实例，而不是静态引用它。您还需要循环列表，而不是类电话簿。

```
 for (int i = 1; i < = directory.size(); i++)
   {
   ((Phonebook) directory.get(i)).setName("setting name to this text!"); 
```

您还可以像这样迭代列表：

```
 for(Phonebook myphonebook : directory) 
```

我认为您应该阅读 Java 类和迭代的基础知识。

试试这个： [Java课程](http://docs.oracle.com/javase/tutorial/java/concepts/index.html)

# optimization - 变化：Amazon S3 托管站点的 Accept-Encoding 标头

> ID：15856975
> 
> 赞同：4
> 
> 时间：2013-04-06T22:57:59.983
> 
> 标签：optimization, amazon-web-services, amazon-s3, http-headers, pagespeed

如何将 Vary: Accept-Encoding 标头添加到由 Amazon S3 托管的静态网站的文件中？

这是让我无法从 Google PageSpeed 获得 100/100 分数的唯一原因，我很想解决这个问题！

R

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-27T08:14:34.973

[无法](https://forums.aws.amazon.com/thread.jspa?threadID=48276)为 S3 对象设置 Vary-Accept-Encoding 标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T19:54:35.653

只是为了补充一些观点，其原因是 S3 目前不支持动态压缩，因此无法设置此标头。如果将来亚马逊确实添加了自动压缩，那么该标头将自动设置。

使用静态站点，您仅限于：

1.  提供未压缩资产并提供全面支持，但站点速度较慢/带宽更多。
2.  通过手动压缩它们来提供压缩资产，但是让网站看起来像任何不支持 gzip 的浏览器的垃圾（现在很少有这样的浏览器）。请注意，扩展名仍然是`.html`（您不想将其设置为，`.gz`因为这意味着存档），但其内容将被压缩。

# python-2.7 - 使用 Python sqlite3 进行交易

> ID：15856976
> 
> 赞同：45
> 
> 时间：2013-04-06T22:58:01.230
> 
> 标签：python-2.7, sqlite, python-db-api

我正在尝试将一些代码移植到使用 sqlite 数据库的 Python，并且我正在尝试让事务正常工作，但我真的很困惑。我对此感到非常困惑；我在其他语言中使用过很多 sqlite，因为它很棒，但我根本无法弄清楚这里有什么问题。

这是我的测试数据库的架构（要输入 sqlite3 命令行工具）。

```
BEGIN TRANSACTION;
CREATE TABLE test (i integer);
INSERT INTO "test" VALUES(99);
COMMIT; 
```

这是一个测试程序。

```
import sqlite3

sql = sqlite3.connect("test.db")
with sql:
    c = sql.cursor()
    c.executescript("""
        update test set i = 1;
        fnord;
        update test set i = 0;
        """) 
```

您可能会注意到其中的故意错误。这会导致 SQL 脚本在执行更新后在第二行失败。

根据文档，该`with sql`语句应该围绕内容建立一个隐式事务，只有在块成功时才会提交。但是，当我运行它时，我得到了预期的 SQL 错误...但是 i 的值从 99 设置为 1。我希望它保持在 99，因为应该回滚第一次更新。

这是另一个测试程序，它显式调用`commit()`和`rollback()`.

```
import sqlite3

sql = sqlite3.connect("test.db")
try:
    c = sql.cursor()
    c.executescript("""
        update test set i = 1;
        fnord;
        update test set i = 0;
    """)
    sql.commit()
except sql.Error:
    print("failed!")
    sql.rollback() 
```

其行为方式完全相同 --- i 从 99 变为 1。

现在我明确地调用 BEGIN 和 COMMIT ：

```
import sqlite3

sql = sqlite3.connect("test.db")
try:
    c = sql.cursor()
    c.execute("begin")
    c.executescript("""
            update test set i = 1;
            fnord;
            update test set i = 0;
    """)
    c.execute("commit")
except sql.Error:
    print("failed!")
    c.execute("rollback") 
```

这也失败了，但方式不同。我明白了：

```
sqlite3.OperationalError: cannot rollback - no transaction is active 
```

`c.execute()`但是，如果我替换对to的调用`c.executescript()`，那么它*可以工作*（我保持在 99）！

（我还应该补充一点，如果我将`begin`and`commit`放在内部调用中，`executescript`那么它在所有情况下都会正确运行，但不幸的是我不能在我的应用程序中使用这种方法。此外，更改`sql.isolation_level`似乎对行为没有任何影响。 )

有人可以向我解释这里发生了什么吗？我需要了解这一点；如果我不能信任数据库中的事务，我就不能让我的应用程序工作......

Python 2.7、python-sqlite3 2.6.0、sqlite3 3.7.13、Debian。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-05-13T14:58:30.997

对于任何想使用 sqlite3 库而不管它的缺点的人，我发现如果你做这两件事，你可以保持对事务的一些控制：

1.  设置`Connection.isolation_level = None`（根据[文档](https://docs.python.org/2/library/sqlite3.html#sqlite3-controlling-transactions)，这意味着自动提交模式）
2.  完全避免使用`executescript`，因为根据[文档](https://docs.python.org/2/library/sqlite3.html#sqlite3.Cursor.executescript)，它“首先发出 COMMIT 语句” - 即麻烦。事实上，我发现它会干扰任何手动设置的交易

那么，您的测试的以下改编对我有用：

```
import sqlite3

sql = sqlite3.connect("/tmp/test.db")
sql.isolation_level = None
c = sql.cursor()
c.execute("begin")
try:
    c.execute("update test set i = 1")
    c.execute("fnord")
    c.execute("update test set i = 0")
    c.execute("commit")
except sql.Error:
    print("failed!")
    c.execute("rollback") 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-01T19:54:33.797

根据[文档](https://docs.python.org/2/library/sqlite3.html#using-the-connection-as-a-context-manager)，

> 连接对象可以用作自动提交或回滚事务的上下文管理器。如果发生异常，事务回滚；否则，事务被提交：

因此，如果你让 Python 在发生异常时退出 with 语句，事务将被回滚。

```
import sqlite3

filename = '/tmp/test.db'
with sqlite3.connect(filename) as conn:
    cursor = conn.cursor()
    sqls = [
        'DROP TABLE IF EXISTS test',
        'CREATE TABLE test (i integer)',
        'INSERT INTO "test" VALUES(99)',]
    for sql in sqls:
        cursor.execute(sql)
try:
    with sqlite3.connect(filename) as conn:
        cursor = conn.cursor()
        sqls = [
            'update test set i = 1',
            'fnord',   # <-- trigger error
            'update test set i = 0',]
        for sql in sqls:
            cursor.execute(sql)
except sqlite3.OperationalError as err:
    print(err)
    # near "fnord": syntax error
with sqlite3.connect(filename) as conn:
    cursor = conn.cursor()
    cursor.execute('SELECT * FROM test')
    for row in cursor:
        print(row)
        # (99,) 
```

产量

```
(99,) 
```

正如预期的那样。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-04-07T09:10:04.927

Python 的 DB API 试图变得聪明，并[自动开始和提交事务](http://docs.python.org/2/library/sqlite3.html#sqlite3-controlling-transactions)。

我建议使用*不*使用 Python DB API 的 DB 驱动程序，例如[apsw](https://github.com/rogerbinns/apsw)。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-06-09T02:42:49.677

根据我对 Python 的 sqlite3 绑定以及官方 Sqlite3 文档的阅读，这是我认为正在发生的事情。简短的回答是，如果你想要一个正确的交易，你应该坚持这个成语：

```
with connection:
    db.execute("BEGIN")
    # do other things, but do NOT use 'executescript' 
```

与我的直觉相反，*不*`with connection`要求进入范围。事实上，它[在](https://github.com/python/cpython/blob/570b1c971c31cd08dbf060f4e21636c40aa47786/Modules/_sqlite/connection.c#L1573-L1578). 它仅在您选择作用域时才有效，[根据作用域是正常退出还是异常退出来](https://github.com/python/cpython/blob/570b1c971c31cd08dbf060f4e21636c40aa47786/Modules/_sqlite/connection.c#L1582-L1606)[选择](https://github.com/python/cpython/blob/570b1c971c31cd08dbf060f4e21636c40aa47786/Modules/_sqlite/connection.c#L1582-L1606)[或](https://github.com/python/cpython/blob/570b1c971c31cd08dbf060f4e21636c40aa47786/Modules/_sqlite/connection.c#L1582-L1606)选择。*`BEGIN`[`__enter__`](https://github.com/python/cpython/blob/570b1c971c31cd08dbf060f4e21636c40aa47786/Modules/_sqlite/connection.c#L1573-L1578)`__exit__`[`COMMIT``ROLLBACK`](https://github.com/python/cpython/blob/570b1c971c31cd08dbf060f4e21636c40aa47786/Modules/_sqlite/connection.c#L1582-L1606)*

 *因此，正确的做法是始终`with connection`使用`BEGIN`. 这在块内变得`isolation_level` *无关紧要*，因为幸运的是它仅在[启用自动提交模式](https://github.com/python/cpython/blob/570b1c971c31cd08dbf060f4e21636c40aa47786/Modules/_sqlite/cursor.c#L517)时才有效，并且[自动提交模式始终在事务块内被抑制](https://sqlite.org/c3ref/get_autocommit.html)。

另一个怪癖是`executescript`，它总是[在运行脚本之前](https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.executescript)[发出 a`COMMIT`](https://docs.python.org/3/library/sqlite3.html#sqlite3.Cursor.executescript)。这很容易弄乱事务`with connection`块，所以你的选择是

*   `executescript`在块内只使用一个，`with`而不是别的，或者
*   完全避免`executescript`；您可以`execute`根据需要多次调用，但`execute`仅限于一个语句。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-18T12:33:54.900

Normal`.execute()`使用舒适的默认自动提交模式和`with conn: ...`执行自动提交**或**回滚的上下文管理器按预期工作 - 除了**受保护的 read-modify-write transactions**，这在本答案的末尾进行了解释。

sqlite3 模块的非标准`conn_or_cursor.executescript()`不参与（默认）自动提交模式（因此不能与`with conn: ...`上下文管理器一起正常工作）但转发脚本相当原始。因此，它只是在“开始”之前**在 start提交一个可能****挂起**的自动提交事务。

 **这也意味着脚本中没有“BEGIN”的`executescript()`情况下没有事务，因此在错误或其他情况下没有回滚选项。

因此，`executescript()`我们最好使用显式 BEGIN（就像您的初始模式创建脚本为“原始”模式 sqlite 命令行工具所做的那样）。这种互动一步一步地显示了正在发生的事情：

```
>>> list(conn.execute('SELECT * FROM test'))
[(99,)]
>>> conn.executescript("BEGIN; UPDATE TEST SET i = 1; FNORD; COMMIT""")
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
OperationalError: near "FNORD": syntax error
>>> list(conn.execute('SELECT * FROM test'))
[(1,)]
>>> conn.rollback()
>>> list(conn.execute('SELECT * FROM test'))
[(99,)]
>>> 
```

脚本没有到达“COMMIT”。因此我们可以查看当前的中间状态并决定回滚（或提交）

因此，一个有效的 try-except-rollback via`excecutescript()`看起来像这样：

```
>>> list(conn.execute('SELECT * FROM test'))
[(99,)]
>>> try: conn.executescript("BEGIN; UPDATE TEST SET i = 1; FNORD; COMMIT""")
... except Exception as ev: 
...     print("Error in executescript (%s). Rolling back" % ev)
...     conn.executescript('ROLLBACK')
... 
Error in executescript (near "FNORD": syntax error). Rolling back
<sqlite3.Cursor object at 0x011F56E0>
>>> list(conn.execute('SELECT * FROM test'))
[(99,)]
>>> 
```

（注意这里通过脚本回滚，因为没有`.execute()`接管提交控制）

* * *

这里有一个关于自动提交模式的注释与更困难的**受保护的读-修改-写事务**问题相结合- 这使得@Jeremie 说“*在 sqlite/python 中写的关于事务的所有很多东西中，这个是唯一能让我做我想做的事（在数据库上有一个独占读锁）。* ”在对一个例子的评论中，其中包括一个`c.execute("begin")`. 尽管 sqlite3 通常不会在实际回写期间进行长阻塞排他读锁，但更巧妙的 5 阶段锁可以实现对重叠更改的足够保护。

在[sqlite3 的 5 阶段锁定方案中，](https://sqlite.org/lockingv3.html)`with conn:`自动提交上下文尚未放置或触发足够强的锁以保护 read-modify-write 。只有在发出第一个数据修改命令时才会隐含地进行这种锁定 - 因此为时已晚。只有一个明确的触发想要的行为：`BEGIN (DEFERRED) (TRANSACTION)`

> [对数据库的第一个读](https://www.sqlite.org/lang_transaction.html)操作创建一个共享锁，第一个写操作创建一个保留锁。

因此，以一般方式（而不是特殊的原子 SQL UPDATE 子句）使用编程语言的受保护的读-修改-写事务看起来像这样：

```
with conn:
    conn.execute('BEGIN TRANSACTION')    # crucial !
    v = conn.execute('SELECT * FROM test').fetchone()[0]
    v = v + 1
    time.sleep(3)  # no read lock in effect, but only one concurrent modify succeeds
    conn.execute('UPDATE test SET i=?', (v,)) 
```

失败后，此类读取-修改-写入事务可能会重试几次。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-16T02:59:34.647

您可以将连接用作上下文管理器。然后它将在发生异常时自动回滚事务，否则将提交它们。

```
try:
    with con:
        con.execute("insert into person(firstname) values (?)", ("Joe",))

except sqlite3.IntegrityError:
    print("couldn't add Joe twice") 
```

请参阅[https://docs.python.org/3/library/sqlite3.html#using-the-connection-as-a-context-manager](https://docs.python.org/3/library/sqlite3.html#using-the-connection-as-a-context-manager)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-04-08T17:03:48.430

这是一个有点旧的线程，但如果它有帮助，我发现对连接对象进行回滚就可以了。***

# php - 如何使用公式确定下一个级别？

> ID：15856980
> 
> 赞同：1
> 
> 时间：2013-04-06T22:58:12.483
> 
> 标签：php, equation

感谢您对此提供的任何帮助。

如果我们有：

```
$level = floor((-1 + sqrt(1 + 4 * ($c_xp + 500) / 100 * 2)) / 2) - 1; //GET LEVEL 
```

例如，如果：

```
$c_xp = 1200 
```

然后：

```
$level = 4 
```

然后我问是否：

```
$level = 4 
```

达到5级需要多少xp？

我怎样才能获得达到下一个级别所需的经验值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-07T00:35:14.027

获得达到 $level 所需的最低 XP 的公式由下式给出：

```
$minXP = 12.5 * (pow((2 * $level + 3), 2) - 41); 
```

所以你可以设置 $level = 5 和 $level = 4 并找出它们之间的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T01:12:02.783

## 分析：

我运行了一个脚本来查看每个级别所需的 XP：

```
$current_level = 0;
for($c_xp = 1;$c_xp < 7000;$c_xp++){
    $level = floor((-1 + sqrt(1 + 4 * ($c_xp + 500) / 100 * 2)) / 2) - 1; //GET LEVEL
    if($level > $current_level){
        $current_level++;
        echo "c_xp $c_xp level $level<br>";
    }
} 
```

输出是：

```
c_xp 1 level 1
c_xp 100 level 2
c_xp 500 level 3
c_xp 1000 level 4
c_xp 1600 level 5
c_xp 2300 level 6
c_xp 3100 level 7
c_xp 4000 level 8
c_xp 5000 level 9
c_xp 6100 level 10 
```

我们可以看到1级是个例外，那么2级到3级的XP差值是400，3级到4级：500，4级到5级：600等等……模式是现在清除，

**1级**-> 1 XP

**2 级**-> 开始 100 XP

**3 级**-> 增加 400 (500 XP)

**等级 4** -> 增加 (400 + 100) 1000XP

**5级到X级**->继续增加100

* * *

## 编码：

通过上面的分析，我可以想出一个函数中的循环：

```
$c_xp = 1200;
$level = floor((-1 + sqrt(1 + 4 * ($c_xp + 500) / 100 * 2)) / 2) - 1;

echo 'Next level: '.current_level_xp($level+1).'<br>';
echo 'XP needed for next Level: '. (current_level_xp($level+1) - $c_xp);

function current_level_xp($current_level){
    if($current_level <= 1){
        return(1);
    }else{
        $increase = 400;
        $needed = 100;
        for($i=0;$i<$current_level-2;$i++){
            $needed += $increase;
            $increase += 100;
        }
        return $needed;
    }
} 
```

**输出：**

```
Next level: 1600
XP needed for next Level: 400 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T23:41:54.237

使用您选择的数学/公式绘图工具来了解所用方程的结果（可能不是您的）：

![在此处输入图像描述](https://i.stack.imgur.com/2oBCP.png)

现在，甚至可能有一种方法可以将您的公式反转`y`为`x`. 但我不确定是否有`floor`反转。

# python - 如何获取 Python 正则表达式搜索找到匹配项的偏移量？

> ID：15856983
> 
> 赞同：5
> 
> 时间：2013-04-06T22:58:43.030
> 
> 标签：python, regex, python-3.x

我正在尝试获取使用 re.search() 找到的匹配的偏移量。

[http://docs.python.org/dev/howto/regex.html](http://docs.python.org/dev/howto/regex.html)

该站点解释了如何获取匹配组件相对于匹配开始的偏移量，但没有说明如何在“haystack”字符串中获取匹配本身的偏移量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-06T23:03:37.367

```
>>> import re
>>> s = 'Hello, this is a string'
>>> m = re.search(',\s[a-z]',s)
>>> m.group()
', t'
>>> m.start()
5 
```

更多信息可以在[这里](http://docs.python.org/dev/howto/regex.html#performing-matches)找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T23:02:18.447

你需要做这样的事情：

```
import re

for m in re.compile("[a-z]").finditer('what1is2'):
    print m.start(), m.group() 
```

# xcode - 僵尸xib文件

> ID：15856985
> 
> 赞同：0
> 
> 时间：2013-04-06T22:58:47.437
> 
> 标签：xcode

我的应用程序有一个 xib 文件，但我注意到当应用程序运行时，它实际上是从我的开发系统上的其他应用程序访问 xib。我一直在尝试找到其他 xib 文件，但没有任何运气，因此我从该应用程序中删除了唯一的 xib 文件，但该应用程序仍然可以使用该僵尸按钮在我的 ipad 上编译和运行。顺便说一句，我认为我正在使用 ARC。

我能做些什么？

# php - 是否有用于检索 URL 的“第一部分”的 PHP 函数？

> ID：15856987
> 
> 赞同：3
> 
> 时间：2013-04-06T22:58:56.187
> 
> 标签：php, built-in

是否有用于检索 URL 的“第一部分”的 PHP 函数，类似于`dirname`/如何`basename`作用于文件路径？

类似的东西

```
echo "url_basename('example.com/this_post/12312')" 
```

这将返回

```
example.com 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T23:06:26.140

[parse_url](http://php.net/manual/en/function.parse-url.php)应该可靠地做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-22T15:12:46.747

以下是使用给定 URL 输出 example.com 的代码：

```
$url = 'example.com/this_post/12312';

if (strpos($url,'http') === FALSE) {
    $url = 'http://'.$url;
}

$arrURLParts = parse_url($url);
$host = $arrURLParts['host'];
echo $host; 
```

**警告：**如果您省略部分以确保 URL 以 http 开头，则 parse_url 将返回一个空主机并将 'example.com/this_post/12312' 放入 $arrURLParts['path'] 中。

# c - xcrun：错误：valgrind 安装期间未安装开发人员工具错误

> ID：15856988
> 
> 赞同：0
> 
> 时间：2013-04-06T22:58:59.703
> 
> 标签：c, xcode, macos, installation, valgrind

我正在尝试在我的 Mac (10.6.8) 上安装 valgrind。我已经下载了最新的 valgrind 版本，valgrind-3.8.1，解压它并且 ./configure 工作正常。当我尝试制作时，收到此错误消息：

```
xcrun: error: developer tools not installed; download from http://developer.apple.com
/usr/bin/mig: line 174: : command not found
mig: fatal: "<no name yet>", line -1: no SubSystem declaration
make[2]: *** [m_mach/mach_vmUser.c] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2 
```

我尝试了 xcode-select （来自此链接：[How can I fix this valgrind OS X 10.7.4 make error?](https://stackoverflow.com/questions/11375207/how-can-i-fix-this-valgrind-os-x-10-7-4-make-error)）并收到此消息：

```
-bash: xcode-select: command not found 
```

我想我没有 xcode 或 xcode 开发者工具，我在苹果开发者网站上找到了 Xcode 3.2 和 Xcode 3.2.1 开发者工具。我想知道我应该安装哪个？

我的感觉是这个安装会解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T23:05:41.693

您现在可以通过 Xcode 查看应用商店（免费下载）。其特点是它会通知您更新。我认为到今天为止它已经达到了 4.6.1 左右，所以你所看到的已经很老了。

valgrind 的另一种选择是获取自制软件，一旦启动并运行，只需执行 brew install valgrind 即可。

# php - javascript 对象到 json 字符串到 php 数组 -> POST

> ID：15856997
> 
> 赞同：1
> 
> 时间：2013-04-06T23:00:22.193
> 
> 标签：php, javascript, ajax, json, javascript-objects

嘿伙计们，我真的需要帮助。我将此json对象传递给php ..

```
var x = {};
x.xt = {};
x.xt.id = id;
x.xt.to = foo;

somearray.push(x); 
```

将对象转换为 json：

```
$.toJSON(x); 
```

json字符串：

```
[{"x":{"xt":"9","to":"2"}}] 
```

他们我发布这个：

```
$.post(
    "temp/sop.php",
    { xa: somearray},
    function(data){
        console.log("response - "+ data);
}); 
```

服务器端：

```
$xtj = $_POST["xa"];
$encodedArray = array_map(utf8_encode, $xtj);
$asnk = json_decode($encodedArray); 
```

这将返回：

```
string(4) "null" 
```

还有这个：

```
$asnk = json_encode($xtj); 
```

返回：

```
null 
```

它设置为的数据库：

> UTF8

当我测试它是否是一个数组时，也返回了真实的..

知道如何解决这个问题吗？谢谢

也是服务器端：

```
$xtj = $_POST["xa"];
$asnk = json_decode($xtj); 
```

这返回：

```
NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T23:05:23.750

`$.toJSON(x)`不进行就地转换；它*返回*JSON，而您只是将其丢弃。你需要这个：

```
$.post(
    "temp/sop.php",
    { xa: $.toJSON(somearray) },
    // ...
}); 
```

然后，在 PHP 方面，您不会想要`array_map`，因为在您解码 JSON 之前它不会是一个数组：

```
$xtj = $_POST["xa"];
$encodedArray = utf8_encode($xtj);  // I'm not sure you need this, by the way.
$asnk = json_decode($encodedArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T23:54:22.347

在尝试解码之前尝试使用 `if(get_magic_quotes_gpc()) $xtj = stripslashes($xtj);` 丢失过多的转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T23:22:55.783

您正在做的是在 JS ( `$.toJSON()`) 中转换为 json 字符串。然后在 PHP 中，您再次尝试转换为 json 字符串 ( `json_encode()`)。而且您使用`array_map()`的不是数组而是字符串。（尝试`echo $_POST["xa"];`查看它的内容。）

# visual-studio-2012 - 重建依赖库后，如何告诉 Visual Studio 重建项目

> ID：15856998
> 
> 赞同：0
> 
> 时间：2013-04-06T23:00:22.420
> 
> 标签：visual-studio-2012, dependencies, static-libraries

在我的解决方案中，我有两个项目。一个是在构建时生成 .lib 文件的库。另一个是使用该库的测试应用程序。

我已将测试项目设置为“依赖”库项目。

但是，当我对库进行更改并按 F5 运行示例时，它不会重建示例。依赖选项似乎只确保在运行示例时构建库。

“运行时，当项目过期时”设置为“始终构建”。

我正在使用vs12。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T12:35:26.633

您已将测试项目设置为依赖于库，但对于这种情况，您希望将其反转。Visual Studio 不允许您有循环引用，因此您必须删除测试到库的项目依赖项，并在您以这种方式工作时将其重新添加为库到测试。最常见的情况是依赖于库的客户端应用程序（测试），并且库上的任何更改都需要手动重建客户端，因为库更改可能破坏了签名、类型等。