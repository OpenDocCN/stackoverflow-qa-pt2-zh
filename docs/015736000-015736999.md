# StackOverflow 问答 15736000-15736999

# java - wicket 1.6.6 弹簧安全

> ID：15736001
> 
> 赞同：0
> 
> 时间：2013-04-01T00:04:40.100
> 
> 标签：java, spring-security, wicket-1.6

我在迁移到 Wicket 1.6.6 时遇到问题

首先，在 1.6.6 版本中，该函数`continueToOriginalDestination`不返回 true 或 false。

其次，`locateByClassLoader`里面 `org.apache.wicket.core.util.resource.locator.ResourceStreamLocator`不存在。

有没有我可以使用 wicket 1.6.6 和 Spring Security 3.1.0 或更高版本的示例项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:21:04.577

由于 Wicket 1.6 continueToOriginalDestination 不再返回任何值。有关它为何更改的讨论，请查看[邮件列表](http://markmail.org/thread/dtfsthndjnziuuov)

还要确保您阅读了[javadoc](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/Component.html#continueToOriginalDestination%28%29)。

在 Wicket 1.6中已经[清理了ResourceStreamLocator。](https://cwiki.apache.org/WICKET/migration-to-wicket-60.html#MigrationtoWicket6.0-ResourceStreamLocatorandResourceFinderhavebeencleanedup)（请参阅此[提交](http://mail-archives.apache.org/mod_mbox/incubator-wicket-commits/201207.mbox/%3C20120703131419.3212AA597@tyr.zones.apache.org%3E)和相应的[票证](https://issues.apache.org/jira/browse/WICKET-4617)）。

也许这已经有点帮助了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:58:14.247

实际上这里有一个不错的博客。[http://www.idesign4all.nl/blog/?p=62](http://www.idesign4all.nl/blog/?p=62)在这篇博文中，作者通过教程描述了如何设置 Wicket 1.5 以使用 Spring Security 3.1 进行身份验证和使用 Wicket Auth/Roles 进行授权。

另一个教程写在这里：http: [//javajeedevelopment.blogspot.nl/2011/03/integrating-spring-security-3-with.html](http://javajeedevelopment.blogspot.nl/2011/03/integrating-spring-security-3-with.html) 作者在这里写了关于将 Spring Security 3 与 Wicket 集成。

此外，可以在此处找到一些旧版本应用程序的教程：[http](http://www.mkyong.com/wicket/wicket-spring-integration-example/) ://www.mkyong.com/wicket/wicket-spring-integration-example/可能值得一读。

# php - 使用 phar 安装 aws php sdk

> ID：15736003
> 
> 赞同：0
> 
> 时间：2013-04-01T00:05:06.017
> 
> 标签：php, ubuntu, amazon-web-services, phar, suhosin

我正在尝试使用适用于 PHP 2 的 AWS 开发工具包在 S3 上创建文件。

通过 Phar 安装：

[http://docs.aws.amazon.com/awssdkdocsphp2/latest/gettingstartedguide/sdk-php2-installing-the-sdk.html#sdk-php2-installing-via-phar](http://docs.aws.amazon.com/awssdkdocsphp2/latest/gettingstartedguide/sdk-php2-installing-the-sdk.html#sdk-php2-installing-via-phar)

我将以下行添加到“/etc/php5/conf.d/suhosin.ini”：

```
suhosin.executor.include.whitelist = phar 
```

我重新启动了 apache，并且 aws.phar 包含按预期工作。但是，在不进行任何更改的情况下，在进一步尝试时，服务器似乎没有发送响应，Chrome 显示“未收到数据”错误。

每次我重新启动 apache 它都会返回响应，但不会在后续加载时返回。

知道是什么原因造成的吗？

使用 Laravel、PHP 5.3.2 和 Ubuntu。

**更新** 无论有没有 suhosin.ini 编辑，似乎都会发生同样的事情。

即使服务器没有向 Web 浏览器返回响应，代码似乎也可以正常运行，因为它在 S3 上创建了一个文件。

# java - 如何在 JToolbar 中默认选择按钮

> ID：15736005
> 
> 赞同：3
> 
> 时间：2013-04-01T00:05:10.453
> 
> 标签：java, swing, jbutton, jtoolbar

我创建了一个由大约 10 个按钮组成的小工具集。这些按钮被添加到`JToolBar`. 目前，它默认在第一个按钮周围放置一个正方形；但是，我想要一个不同的按钮作为默认按钮。我怎样才能做到这一点？下面是我如何添加按钮的示例。我已经尝试`select.setSelected`过其他一些方法，但没有任何运气。

```
 JToolBar sideBar = new JToolBar();

  JButton select = new JButton(new ImageIcon("Media/select.png"));
  select.setBorderPainted(false);
  select.setContentAreaFilled(false);

  sideBar.add(select); 
```

这是当前结果的图像：

![当前结果 - 左上角按钮上的通知方块](https://i.stack.imgur.com/3ghrT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:08:05.320

如果您知道要激活哪个按钮，则可以使用

```
button.requestFocusInWindow(); 
```

您还可以尝试在根窗格中设置默认按钮，具体取决于您的 Swing 元素的设置。

```
rootPane.setDefaultButton(button); 
```

最后，有一个方便的方法叫做`setFocusedPainted(false);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T00:32:06.910

您可能希望通过这种方式将一个按钮设置为工具栏的默认按钮：

```
yourToolBar.getRootPane().setDefaultButton(okButton); 
```

我经常`setDefaultButton`在对话框中使用该方法，因此用户可以通过按 [Enter] 来选择默认按钮。

# javascript - fullcalendar：同时格式化事件

> ID：15736006
> 
> 赞同：0
> 
> 时间：2013-04-01T00:05:23.780
> 
> 标签：javascript, css, fullcalendar

在 fullcalendar 的 weekAgenda 视图中，同时开始的 2 个事件显示如下：

```
+--------+--------+
|        |        |
|        |        |
|        +--------+
|             |
|             |
|             |
+-------------+ 
```

所以你看，左边的比右边的宽得多。我希望它们具有相同的宽度。像那样：

```
+--------+--------+
|        |        |
|        |        |
|        +--------+
|        |
|        |
|        |
+--------+ 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-08T13:07:41.510

`slotEventOverlap: false`您可以在您的实例中使用选项。

文档：[https ://fullcalendar.io/docs/slotEventOverlap](https://fullcalendar.io/docs/slotEventOverlap)

# javascript - 更改事件不会从主干集合传播到主干模型

> ID：15736009
> 
> 赞同：0
> 
> 时间：2013-04-01T00:05:44.123
> 
> 标签：javascript, backbone.js

我有一个主干模型，它的某些属性具有主干集合。

当在这些集合之一上触发更改事件时，它不会传播到父模型。

是否有可能改变这一点，以便事件传播？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:08:23.917

如果您没有引用模型所属的集合（这将创建循环逻辑），您应该能够显式绑定它：

```
model.listenTo(model.collection, 'change', function() {
        model.trigger('change');
    }); 
```

这是一个似乎正在工作的 jsFiddle：http: [//jsfiddle.net/2Nctk/2/](http://jsfiddle.net/2Nctk/2/)

# ruby - “bash：找不到命令”错误

> ID：15736010
> 
> 赞同：0
> 
> 时间：2013-04-01T00:05:48.263
> 
> 标签：ruby, macos, bash, path

我正在尝试设置我的机器进行开发，但我不断收到错误，`-bash: command not found`. 我在运行各种命令时得到了。我对此很陌生，正在尝试进行开发，但不知道如何解决。从我读过的内容来看，它可能与我的 PATH 有关。再说一次，我是新手，所以我真的不知道。

> `new-host:~ Home$ echo $PATH`
> /opt/local/bin:/opt/local/sbin:/usr/local/rvm/gems/ruby-1.9.3-p194/bin:/usr/local/rvm/gems/ruby-1.9.3-p194@全局/bin:/usr/local/rvm/rubies/ruby-1.9.3-p194/bin:/usr/local/rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr /local/bin:/opt/X11/bin:/usr/local/git/bin:/opt/sm/bin:/opt/sm/pkg/active/bin:/opt/sm/pkg/active/sbin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:13:54.373

在 OS X 上，默认情况下，bash 应该位于`/bin/bash`. 所以如果 /bin 不在你的路径中，那么你需要把它放在那里。听起来您一定是对基本的 OS X 安装进行了相当大的调整。那，或者您已经安装了一些软件包（macports、fink、brew 等？？？），它们可能以不合需要的方式“调整”了您的路径变量。

如果您可以执行 /bin/bash，那么您只需再次在 PATH 环境变量中创建 /bin 条目。检查的地方：

```
/etc/profile
/etc/bashrc
~/.profile
~/.bashrc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T20:04:46.627

你唯一的问题是打字不好。`-bash: XXX: command not found`当您在命令行上键入不是路径中的内置 shell 函数或外部可执行程序的内容时，您会收到错误消息。`-bash: dvm: command not found`当您尝试运行时，您得到了，`rvm`因为您键入`dvm`了。

你`$PATH`的很好，`/bin`就在中间，所以`/bin/bash`被发现没有问题。

为了查看`/etc/profile`or的内容`~/.bashrc`，您不能像在 Randy Howard 问题的评论中所做的那样只键入它们的名称，您必须使用 like`cat /etc/profile`列出其内容的命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T20:11:23.093

我没有 bash 个人资料。所以我创建了一个，瞧，没有更多的错误。再次感谢小伙伴们试图帮助一个菜鸟！

# java - JavaFX webview，获取文档高度

> ID：15736012
> 
> 赞同：4
> 
> 时间：2013-04-01T00:06:22.233
> 
> 标签：java, javascript, html, javafx

如何在 JavaFx 中获取 webview 控件的文档高度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T22:39:41.560

您可以使用以下调用获取 WebView 中显示的文档的高度：

```
webView.getEngine().executeScript(
    "window.getComputedStyle(document.body, null).getPropertyValue('height')"
); 
```

* * *

一个完整的应用程序来演示调用用法：

```
import javafx.application.Application;
import javafx.beans.value.*;
import javafx.scene.Scene;
import javafx.scene.web.*;
import javafx.stage.Stage;
import org.w3c.dom.Document;

public class WebViewHeight extends Application {
  @Override public void start(Stage primaryStage) {
    final WebView webView = new WebView();
    final WebEngine engine = webView.getEngine();
    engine.load("http://docs.oracle.com/javafx/2/get_started/animation.htm");
    engine.documentProperty().addListener(new ChangeListener<Document>() {
      @Override public void changed(ObservableValue<? extends Document> prop, Document oldDoc, Document newDoc) {
        String heightText = webView.getEngine().executeScript(
          "window.getComputedStyle(document.body, null).getPropertyValue('height')"
        ).toString();
        double height = Double.valueOf(heightText.replace("px", ""));    

        System.out.println(height);
      }
    });
    primaryStage.setScene(new Scene(webView));
    primaryStage.show();
  }

  public static void main(String[] args) { launch(args); }
} 
```

* * *

上述答案的来源：[Oracle JavaFX 论坛 WebView 配置线程](https://forums.oracle.com/forums/message.jspa?messageID=10049488)。

* * *

相关功能的基于 Java 的 API 的相关问题跟踪器请求：

[RT-25005 WebView 的自动首选大小](https://javafx-jira.kenai.com/browse/RT-25005)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T14:53:59.363

这就是你要找的：

```
Double.parseDouble(webView.getEngine().executeScript("document.height").toString()) 
```

# python - 为 HTML 网页运行 python 脚本

> ID：15736017
> 
> 赞同：1
> 
> 时间：2013-04-01T00:06:47.907
> 
> 标签：python, html, django, apache, ubuntu

我需要创建一个网站。用户输入数据后，网站需要运行 Python 脚本。我已经在网上搜索了一个多星期，但没有找到任何帮助。每个人都只是告诉我下载 DJango 框架，但没有人展示如何在 html 网页中运行 python 脚本。我没有任何网页设计经验，因为它不是我的领域。但我确实知道一点 python 脚本和一些 html。任何使我进入正确方向的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:33:51.110

如果你**真的**想像 javascript 一样在客户端上运行 python，
看看：[**Brython**](http://brython.info)、[skulpt](http://www.skulpt.org/)或[pyris](http://pyjs.org/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T00:14:24.740

如果您希望以与 Javascript 在网页中运行相同的方式在网页中运行 Python 脚本，这是不可能的，因为 Web 浏览器本身并不理解 Python。

如果要运行生成 HTML 页面的 Python 代码，可以使用 Django 或 Flask 之类的框架，这将需要支持这种框架（长时间运行的进程）的服务器。您也可以使用 CGI Python 脚本来执行此操作，这将要求您的 Web 服务器安装 Python 并设置为运行 CGI 脚本。

以与 PHP 嵌入 HTML 页面相同的方式将 Python 嵌入 HTML 通常不是在 Python 中完成的——它被认为是一种反模式，会导致安全问题和许多不良做法。与其他社区不同，Python 人员通常不会帮助您自欺欺人，因此您不会为被认为是错误的事情找到太多帮助。一些模板引擎（如 Mako）支持在模板中使用 Python 来生成 HTML 标记，但您需要将它与其他一些 Web 框架结合使用来处理 HTTP 请求。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T00:11:56.900

您不能“在 html 网页中运行 python 脚本”。每个人都告诉你使用 Django 之类的东西，因为如果你想创建一个动态网站来执行服务器端代码以响应用户输入，你需要 Django 之类的东西或其他一些服务器端 Web 框架。因此，您已经进入了正确的方向，但忽略了这一点。

# ios - ios 向 Rails Web 服务发布请求：一步一步

> ID：15736024
> 
> 赞同：0
> 
> 时间：2013-04-01T00:07:24.713
> 
> 标签：ios, ruby-on-rails, web-services, post

任何人都可以给我一个教程链接或一步一步来解决这个开始的问题：

在rails中，对于用户资源，我有

```
def create
  @user = User.new(params[:user])

respond_to do |format|
  if @user.save
    format.html { redirect_to @user, notice: 'User was successfully created.' }
    format.json { render json: @user, status: :created, location: @user }
  else 
    format.html { render action: "new" }
    format.json { render json: @user.errors, status: :unprocessable_entity }
  end
end 
```

结尾

我如何在没有 3rd api sdk 的情况下向 /users 发帖以创建新用户？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:29:07.747

[这个答案](https://stackoverflow.com/a/9518412/403846)应该让你开始。您可以在很大程度上忽略目标是与 Rails 不同的框架/语言，因为它们都只是说 HTTP/REST。

# c# - C# 中的 XML 阅读器

> ID：15736025
> 
> 赞同：0
> 
> 时间：2013-04-01T00:07:28.013
> 
> 标签：c#, xml, xml-parsing, linq-to-xml, xmlreader

由于我有限的 C# 编程经验，过去 4 天我一直在研究如何读取 XML 文件，但没有运气......我需要帮助。

我知道有 XMLReader、XDocument 以及与 LINQ 相关的东西，它们允许您读取 XML 文件。

我只有使用流式阅读器的经验，所以如果一切都失败了，我想我需要使用它来构建自己的 XML 阅读器。

关于我的 XML 文件的结构，它有一个包含所有内容的标签，以及包含许多子节点的一系列其他标签。

不知道该怎么做并且没有想法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:01:14.357

您可以使用 XmlTextReader。

```
 using (XmlTextReader xmlTextReader = new XmlTextReader("FILE_NAME.xml"))
 {
    while (xmlTextReader.Read())
    {
        switch (xmlTextReader.NodeType)
        {
            // ... Process node types here ex. XmlNodeType.Element
        }
     }
 } 
```

阅读更多：http: [//msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx)

然而 XmlTextReader 不验证数据，所以如果你想验证你的数据使用 XmlReader：http: [//msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:12:57.523

最简单的方法是使用`XDocument`. 例如：

```
<myroot>
    <somesub>1</somesub>
    <somesub>2</somesub>
    <somesub>3 <b>- or -</b> 4</somesub>
</myroot> 
```

接着：

```
string path = @"myfile.xml";
var doc = XDocument.Load(path);

// Get the root node <myroot>
var root = doc.Root;

// Loop through the children and print each one's value:
foreach(var child in root.Elements())
{
    Console.WriteLine(child.Value);
} 
```

查看文档[`XElement`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.aspx)并[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)了解有关他们拥有的成员的更多想法和信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:25:09.717

所有这些用于读取和解析 XML 的类都有不同的用途。

使用`XDocument`（LINQ 风格）将产生一段更易读的代码，但会比`XmlTextReader`.

如果您正在处理大文件，请使用 XmlReader 类。

[MSDN 上的 XmlReader 示例](http://msdn.microsoft.com/en-us/library/cc189056%28v=vs.95%29.aspx)

[dotnetcurry 上的 XDocument 示例](http://www.dotnetcurry.com/ShowArticle.aspx?ID=564)

我个人从不喜欢 XmlDocument 类，因为如果我不得不编写冗长的代码。这就是我。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-12-19T00:44:19.163

这是您需要的样本。您可以使用这种最简单的方法循环浏览 XML 文件。

```
XmlDocument xmldoc = new XmlDocument();
        xmldoc.Load("sample.xml");

        XmlNodeList name = xmldoc.GetElementsByTagName("name");
        XmlNodeList price = xmldoc.GetElementsByTagName("price");
        XmlNodeList description = xmldoc.GetElementsByTagName("description");
        XmlNodeList calories = xmldoc.GetElementsByTagName("calories");

        for (int i = 0; i < name.Count; i++)
        {
            Console.WriteLine(name[i].InnerText);
            Console.WriteLine("Price: " + price[i].InnerText);
            Console.WriteLine(description[i].InnerText);
            Console.WriteLine("calories: " + calories[i].InnerText);
        }

        Console.ReadKey(); 
```

# android - 具有从 xml 膨胀的内容的 android gridview 使每一行占据整个屏幕

> ID：15736027
> 
> 赞同：0
> 
> 时间：2013-04-01T00:07:30.570
> 
> 标签：android, android-gridview

我`Gridview`在 Android 中有一个，其中每个元素都是从 xml 膨胀并包含一个`LinearLayout`持有一个`ImageView`和一个`TextView`。使用`GridView`扩展的自定义适配器`BaseAdapter`。我看到的是，每一行都和屏幕一样高，而不是仅仅高到足以容纳最大的元素。

以下是相关代码：

网格视图的 xml：

```
<GridView xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/ConSoul"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:numColumns="auto_fit"
  android:columnWidth="160dp"
  android:horizontalSpacing="20dp"
  android:verticalSpacing="0dp"
  android:gravity="center"
  android:stretchMode="columnWidth" /> 
```

元素的 xml (thumbnail.xml)：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="120dp"
  android:layout_height="wrap_content"
  android:orientation="vertical">
  <ImageView
    android:id="@+id/screen"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:scaleType="fitEnd"/>
  <TextView
    android:id="@+id/name"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:textSize="20dp"
    android:textColor="@color/theme"
    android:gravity="center_horizontal"/>
</LinearLayout> 
```

适配器`getView`方法（`mContext`是创建适配器的实例变量，screens 是 a `Bitmap[]`，names 是 a `String[]`）：

```
public View getView(int position, View convertView, ViewGroup parent) {
    View thumbView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        thumbView = LayoutInflater.from(mContext).inflate(R.layout.thumbnail, null);
    } else {
        thumbView = convertView;
    }
    ((ImageView)thumbView.findViewById(R.id.screen)).setImageBitmap(screens[position]);
    ((TextView)thumbView.findViewById(R.id.name)).setText(names[position]);
    return thumbView;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:16:20.447

“wrap_content”的布局高度穿过你`LinearLayout`和你的`ImageView`. `ImageView` `ScaleType`设置为“fitEnd”，这会导致与[dst 的右边缘和下边缘](http://developer.android.com/reference/android/graphics/Matrix.ScaleToFit.html#END)对齐。

这种底部对齐会导致您的 Grid 项目布局占用尽可能多的空间；整个屏幕高度。更改为其他`ScaleType`值之一，例如“fitStart”或“fitCenter”，您`GridView`应该没问题。

# clojure - Clojure：在调用者的命名空间中解析的宏中的限定关键字？

> ID：15736028
> 
> 赞同：6
> 
> 时间：2013-04-01T00:07:37.577
> 
> 标签：clojure, clojurescript

在调用者的命名空间中的宏解析中是否可以有一个合格的关键字？例如：

```
(ns a)
(defmacro m [] `(do ::k)) 
```

在另一个命名空间中：

```
(ns b)
(use 'a)
(m) 
```

在此示例中，`(m)`解析为`:a/k`（定义宏的命名空间）。我想知道是否有办法让它解析到（*调用*`:b/k`宏的命名空间）。

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T01:46:55.523

`(defmacro m [] (keyword (name (ns-name *ns*)) "k"))`*

# oracleforms - 从其他文本项数据复制

> ID：15736033
> 
> 赞同：0
> 
> 时间：2013-04-01T00:09:05.543
> 
> 标签：oracleforms

我有两个文本项。两者都没有任何价值。当我在第一个文本项中添加一些文本时，相同的数据应该反映到另一个。那么如何做到这一点。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T11:48:22.043

如果您确实需要在两个项目中始终使用相同的值，那么您应该使用镜像项目，也称为与项目属性同步。这将在两个项目中显示相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:19:03.447

如果您需要某种逻辑来同步这两个项目，那么您可以使用主项目的When-Validate-Item 触发器来填充子项目。但是，如果需要没有任何逻辑的简单同步，那么项目属性“与项目同步”（如 nigthfox79 所述）是正确的方法。

# python - 如何获得终端输出？

> ID：15736036
> 
> 赞同：-3
> 
> 时间：2013-04-01T00:09:31.953
> 
> 标签：python, subprocess, raspberry-pi

**背景**

作为一个有趣的项目，我决定为我的新树莓派创建一个远程控制应用程序。我知道如何使用 SSH，但我想在 Python 中实现类似的东西。如何让打印到终端上的文本显示在我的 Python shell 中？

我检查了[这个 SO question](https://stackoverflow.com/q/4408377/1993598)，但它没有用。没有工作，我的意思是我无法看到输出文本。如果我进入`passwd`，它只会给我

```
Changing password for User. 
```

但它没有给我交互式会话。*这*就是我想要弄清楚的。

**注意：**我的 Raspberry Pi 在“Wheezy”上运行。此外，如果该程序可以与其他操作系统（如 Windows 7、Mac OS X）一起使用，那就太好了。

**代码**

```
import subprocess
import socket
import sys
import platform
import os

print "WELCOME TO xTROL. \n"

pyVER = sys.version
OS = platform.system()

print pyVER, "\n"
print "Running on %s" % (OS)
while True:
    INPUT = raw_input(">>>")
    cmd_FORMAT = INPUT.split()

    try:
        output = subprocess.Popen(cmd_FORMAT, stdout=subprocess.PIPE).communicate()[0]
        print output
    except Exception:
        print "Something went wrong." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:46:10.250

如果你想写 SSH 之类的东西，你必须制作一个伪终端。看看[模块](http://docs.python.org/2/library/pty.html)。[_`pty`](http://docs.python.org/2/library/pty.html)

# knockout.js - 使用 Durandal 一页中的多个独立 SPA

> ID：15736038
> 
> 赞同：3
> 
> 时间：2013-04-01T00:10:00.993
> 
> 标签：knockout.js, durandal

我想在一个 HTML 页面（我们的旧版应用程序）中托管两个或多个单页应用程序。这些应用程序应该位于完全不同的页面位置 - 因此我不能将 durandal 组合用于顶级根“shell”并使用 ko compose 绑定进行组合。这些应用程序应该能够相互通信（路由器/事件聚合器）。

是否可以将 Durandal 及其路由器插件用于此类事情？什么是最好的方法？

我尝试使用多个`applicationHost`元素并`app.setRoot(vm, transition, element)`使用 vm/element 的不同组合进行调用，但没有运气。似乎最后一个电话赢了......

我还创建了关于 Durandal 谷歌群组的讨论：[https ://groups.google.com/forum/?fromgroups=#!topic/durandaljs/e6GclW0bEo0](https://groups.google.com/forum/?fromgroups=#!topic/durandaljs/e6GclW0bEo0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T05:10:06.363

不幸的是，确保*完全*独立的应用程序的唯一方法是使用不同的文档 - iframe 或普通框架甚至不同的窗口。这是因为有很多共享状态，虽然 Durandal 是高度可配置的，但它有许多单例点：

*   大多数 durandal/* 组件期望作为单例工作；应用程序中的配置是共享的。应用程序上的订阅/事件是共享的。同样，默认模块查找规则也是共享的，因此需要使用特殊的“选择器”（即模块 id 上的应用程序前缀）。
*   RequireJS 是一个单例；要求查找规则将被共享。
*   淘汰赛是单例；添加 bindingHandler 将在所有应用程序中共享。

因此，虽然可以创建一堆“合作”应用程序（想想“插件”），但每个应用程序都需要了解主机并小心避免冲突。还需要与模块路径（即每个应用程序名称的前缀）合作以提供相关的查找解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T13:15:51.860

您是否打算将它们加载到同一个 HTML 页面中？如果是这样，那么您可以在外壳中创建不同的区域，每个区域一个。也许是左和右或上和下。每个都可以在 shell 中的一个部分或 div 中，并使用`compose`绑定来加载。

当然，您可以使用 Durandal 中的事件进行通信。

如果您并排加载两者，您需要决定如何响应路由更改。如果地址栏中的路线发生变化，您是将活动项绑定到左侧还是右侧？这显然取决于你。您可能希望创建一种更自定义的方法来加载不同的仪表板部分内容。但是，这实际上取决于您要如何重新加载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T19:42:49.253

您可能可以在 iframe 中托管每个 durandal 实例。

# javascript - 在 JavaScript 中使用 begin 和 end

> ID：15736043
> 
> 赞同：4
> 
> 时间：2013-04-01T00:11:17.193
> 
> 标签：javascript

我可以以某种方式更改 JavaScript 语言，使单词`end`等同于`}`符号并`begin`等同于`{`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T00:12:52.327

不，你不能。您可以做的最好的事情是拥有一个脚本，该脚本用无效的脚本修改另一个脚本`type`并将其更改为有效`type`的，这样您就可以得到*效果*。

```
<script type="text/x-algolscript">
    function hello() begin
        alert("Hello, world!");
    end
    hello();
</script>
<script type="text/javascript">
    Array.prototype.forEach.call(document.getElementsByTagName('script'), function(script) {
        if(script.type === 'text/x-algolscript') {
            var oldParent = script.parentNode;
            var oldNext = script.nextSibling;
            oldParent.removeChild(script);
            script.textContent = script.textContent.replace(/\bbegin\b/g, '{').replace(/\bend\b/g, '}');
            script.type = 'text/javascript';
            oldParent.insertBefore(script, oldNext);
        }
    });
</script> 
```

但是，这是上下文不敏感的，并且很乐意更改您的字符串等。

**奖励：**缩小且更兼容浏览器的版本：

```
!function(s,i,t,e,l,p,o,n){for(l=s.length;i<l;i++)((e=s[i]).type==='text/x-algolscript')&&t.push(e);for(i=0;i<t.length;i++)o=(e=t[i]).parentNode,n=e.nextSibling,o.removeChild(e),p='textContent',e[p]||(p='innerText'),e[p]=e[p].replace(/\bbegin\b/,'{').replace(/\bend\b/,'}'),e.type='text/javascript',o.insertBefore(e,n)}(document.getElementsByTagName('script'),0,[]); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-01T00:15:39.547

您可以编写自己的转编译器来解析我们的 Pascalesque Javascript 并输出传统的 Javascript。您可以将单词`begin`/替换为`end`括号，也可以使用更高级的东西，例如[Jison](http://zaach.github.com/jison/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T00:54:37.717

看看[META II](http://www.bayfronttechnologies.com/mc_tutorial.html)。

> ...制作很多编译器——这一切都很容易。不需要 Ajax、Active X、DLL、SO、ASP、CGI、Java、插件、模块、XML、cookies、PHP、Perl、Python、magic shell 操作、全球标准 du jour 或星际统治计划 - 只需纯 JavaScript在帧中。此外，您还可以通过剪切和粘贴将您从这些网页构建的编译器移动到您选择的编程语言中。毕竟编译器只是一个读取文本并写入文本或二进制文件的程序。

就像一个想法。

* * *

或者，您可能希望在开始时使用以下（可疑）编码风格（以熟悉 ES 的语法）：

```
function name(args){//begin
  // your code here
}//end

while(L--){//begin
  // your code here
}//end 
```

# database - 创建 ERD 和关系模型设计

> ID：15736044
> 
> 赞同：1
> 
> 时间：2013-04-01T00:11:41.460
> 
> 标签：database, database-design, entity-relationship, relation

我需要为类设计一个小型数据库，我使用了以下 ERD 模型：http: [//imgur.com/OSYwHp6](http://imgur.com/OSYwHp6)

并得到以下关系模型：

[http://imgur.com/RuMYgHA](http://imgur.com/RuMYgHA)

通过遵循一个类似的类示例，不幸的是我没有足够的声誉来链接。

我的问题是我这样做是否正确，如果是，为什么处理表存在？为什么我不能只从 Animal 中的 AnimalID 绘制到访问中的 AnimalID 的箭头？任何帮助将不胜感激，因为我不完全理解这些设计模型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T11:04:49.997

您向我们展示的 ERD 有点令人困惑。Treated 关系表明 Animals 和 Visits 之间的关系是多对多的。也就是说，一只动物可以在多次就诊中得到治疗，而一次就诊可以治疗许多动物。

但是将 AnimalID 包含为访问的属性表明了一些不同的情况，即一次访问只能处理一只动物。

您的 ERD 混合了需求分析和数据库设计的元素。经典 ERD 不包括外键，并且在经典 ERD 图表中将 AnimalID 列为访问的属性是不正确的。相反，Treated 关系的基数将明确显示在图表上。

有了这些基数，就可以确定处理的关系是多对一、一对多、一对一还是多对多。

如果多对多是正确的答案，那么您的设计是正确的。如果多对一是正确答案，那么您的设计过于复杂，您可以将 AnimalID 作为外键存储在 Visit 表中。

# loops - Corona SDK - While 语句

> ID：15736046
> 
> 赞同：0
> 
> 时间：2013-04-01T00:11:55.847
> 
> 标签：loops, sdk, while-loop, coronasdk

我对 Corona SDK 很陌生，我需要知道如何获得一个 while 声明。如果有人能告诉我如何获得一个，那就太好了。我用谷歌搜索，我找不到答案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:01:58.710

```
while condition do
--code here
end 
```

# python - 在二维图形表中显示函数的值

> ID：15736051
> 
> 赞同：1
> 
> 时间：2013-04-01T00:13:16.070
> 
> 标签：python, pyqt, pyqt4

我有一个 python 函数`F(n,m)`，带有`n`和`m`整数，我希望以图形方式将其值显示到表格中。

像这样的东西：

![在此处输入图像描述](https://i.stack.imgur.com/3XUnl.png)

我必须*以图形方式*（进入一些 gui）进行操作，因为我需要从 1 打印到 N 和 M 的较大值（有时约为 1000），并且在控制台中无法读取。

另外，对于 n 和 m 的某些组合，我需要更改颜色，以便更清楚地看到这些情况的值。

我想问我如何尽可能方便地在python中做到这一点。

注意：这张桌子是在谷歌图片上随机找到的。它的内容与我的需要无关。我需要打印 F(n,m) 整数，与 sin、cos 等无关。只有自然数等。只有图形表与此图像相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:48:20.187

使用 PyQt4：

```
import sys  
from PyQt4 import QtCore, QtGui

def F(n, m):
    return n + m

class MainWindow(QtGui.QWidget):
    # http://stackoverflow.com/a/11458784/190597 (reclosedev)
    def __init__(self, parent=None):
        self.rows = range(50)
        self.cols = range(100)
        super(MainWindow, self).__init__(parent)
        self.table_widget = QtGui.QTableWidget()
        layout = QtGui.QVBoxLayout()
        layout.addWidget(self.table_widget)
        self.setLayout(layout)
        self.populate()

    def populate(self):
        self.table_widget.setRowCount(len(self.rows))
        self.table_widget.setColumnCount(len(self.cols))
        self.table_widget.setHorizontalHeaderLabels(map(str, self.cols))
        for i, n in enumerate(self.rows):
            for j, m in enumerate(self.cols):
                value = QtGui.QTableWidgetItem(str(F(n, m)))
                self.table_widget.setItem(i, j, value)
        self.table_widget.item(5,2).setBackgroundColor(QtGui.QColor(0,255,255))
        self.table_widget.item(5,2).setTextColor(QtGui.QColor("red"))

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    wnd = MainWindow()
    wnd.resize(640, 480)
    wnd.show()
    sys.exit(app.exec_()) 
```

![在此处输入图像描述](https://i.stack.imgur.com/QvLHh.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:18:40.187

也许构建一个网页作为输出可能是一个很好的解决方案，您可以通过在标准输出或输出文件中打印 html 文件来做到这一点。

在生成的网页中，您可以在表格中显示您的数据，查看以下代码：

```
print '<html><body>'
print '<table style="border: 1px solid;">'
print '<tr><th>A</th><th>sin A</th><th>cos A</th>...</tr>'

for item in data:
    print '<tr>'
    print '<td>', item['degree'], '</td>'
    print '<td>', item['sin'], '</td>'
    print '<td style="color: {}">'.format('red' if item['cos'] > 20 else 'blue'), item['cos'], '</td>'
    ...
    print '</tr>' 
```

# knockout.js - Breeze.js 实体的淘汰赛验证

> ID：15736056
> 
> 赞同：0
> 
> 时间：2013-04-01T00:14:08.250
> 
> 标签：knockout.js, breeze, knockout-validation

我试图让 Knockout Validation 在我的 Breeze.js 实体上运行，但运气不佳。

所以目前我只是试图进行一个非常基本的测试来确认该方法应该有效，但我很难理解为什么这甚至不起作用。本质上，当用户编辑我的一个实体以尝试在微风中对生成的实体注册淘汰赛验证时，我会运行以下类似的内容：

```
dataService.getEntity(selectedRowId())
                .then(function(result) {
                    currentEntity(result.entity);
                    var ent = currentEntity();
                    ent.TestField.extend({ required: true });
                }); 
```

然后在视图中绑定字段：

```
<input type="text" data-bind="value: currentEntity().TestField" /> 
```

但这不起作用。我认为这可能是因为实体上的所有字段都是dependantObservables，但是创建了一个测试计算字段并且淘汰赛验证似乎可以正常工作（只要我给它一个读写方法）

任何人都可以建议我可能会错过什么或做这种事情的更好方法吗？

（PS：我实际上正在尝试类似 Julián Yuste 的方法：

[使用微风实用程序进行淘汰赛验证？](https://stackoverflow.com/questions/13662446/knockout-validation-using-breeze-utility)

但运气不好，所以我试图把它带回到一些基础上）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:38:05.697

您可以在这里获得更好和更新的示例：

[使用淘汰赛/杜兰达尔将无效字段标记为红色](https://stackoverflow.com/questions/15635958/mark-fields-not-valid-as-red-with-knockout-durandal/15639832#15639832)

看看并告诉我这是否有帮助。

# java - 如何从 winapi 回调中选择合法窗口？

> ID：15736060
> 
> 赞同：1
> 
> 时间：2013-04-01T00:14:52.080
> 
> 标签：java, windows, winapi, jna

我正在尝试用 Java 创建一个能够从 Windows 中不相关的窗口获取位置信息的程序。我需要所有可见窗口中的矩形，我需要知道哪些被最小化以及它们的 Z 顺序。我在这里阅读了很多问题，从 JNA 学到了一些东西，但我仍然有一些问题。（我从这里收集了我知道的大部分信息，即使我无法编译代码：[Windows：如何获取所有可见窗口的列表？](https://stackoverflow.com/questions/3188484/windows-how-to-get-a-list-of-all-visible-windows?answertab=active#tab-top)）

1.  该程序显示了很多窗口，即使它们不是用户窗口。我不知道 Windows 以这种方式工作，那么如何从所有其他“垃圾”窗口中过滤出用户窗口？

2.  来自@mdma 的链接代码无法编译，因为 Main.RECT 必须实现来自 jna.Structure (getFieldOrder()) 的抽象方法。这是与不同版本的 JNA 相关的问题吗？我在做一些明显错误的事情吗？

为了能够创建这个程序，我正在努力学习 JNA，但我从未处理过 WinAPI，而且它相当令人困惑。感谢您的耐心等待。

编辑：这是我无法编译的一小段代码。我正在使用最新的 JNA (3.5.1)。

```
import com.sun.jna.Structure;

public class Main {
    public static void main(String[] args) {
        public static class RECT extends Structure {
            public int left,top,right,bottom;
        }
    }
} 
```

# xcode - 使用附件按钮执行 segue

> ID：15736066
> 
> 赞同：0
> 
> 时间：2013-04-01T00:15:39.233
> 
> 标签：xcode, uitableview

我正在做主+详细信息页面。我已使用以下代码成功点击母版页中的单元格行跳转到详细信息页

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"MasterToDetail" sender:indexPath];
} 
```

但是因为我的母版页单元格行也有辅助按钮，所以我需要通过点击使这些按钮也能够跳转到详细信息页面。所以我实现了代码

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"MasterToDetail" sender:self];
} 
```

但是显示的详细信息不正确。它始终显示数据列表中的第一个详细数据。我将 sender:self 更改为 sender:indexPath 也不起作用。

[我从这里](https://stackoverflow.com/questions/11234373/how-i-can-use-the-detail-disclosure-button-whith-storyboard#)和[这里](https://stackoverflow.com/questions/6227851/custom-accessory-view-button-wrong-row-selected#)使用了 stackoverflow 的答案。我是初学者，所以有些概念还是不清楚对不起。

**已编辑** - masterviewcontroller.m 的准备工作

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    DetailViewController *detailController =segue.destinationViewController;
    SearchDataDetail *bug = [self.bugs objectAtIndex:self.tableView.indexPathForSelectedRow.row];
    detailController.detailItem = bug;

} 
```

-detailviewcontroller.m

```
#import "DetailViewController.h"
#import "SearchData.h"
#import "SearchDataDetail.h"

@interface DetailViewController ()
- (void)configureView;
@end

@implementation DetailViewController

- (void)configureView
{
    // Update the user interface for the detail item.
    self.rateView.notSelectedImage = [UIImage imageNamed:@"shockedface2_empty.png"];
    self.rateView.halfSelectedImage = [UIImage imageNamed:@"shockedface2_half.png"];
    self.rateView.fullSelectedImage = [UIImage imageNamed:@"shockedface2_full.png"];
    self.rateView.editable = YES;
    self.rateView.maxRating = 5;
    self.rateView.delegate = self;

    if (self.detailItem) {
        self.titleField.text = self.detailItem.data.title;
        self.rateView.rating = self.detailItem.data.rating;
        self.imageView.image = self.detailItem.fullImage;
    }

}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [self configureView];
}

- (void)viewDidUnload
{
    [self setTitleField:nil];
    [self setRateView:nil];
    [self setImageView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return YES;
}

- (void)rateView:(RateView *)rateView ratingDidChange:(float)rating {
    self.detailItem.data.rating = rating;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:03:01.847

这是由于以下声明

```
SearchDataDetail *bug = [self.bugs objectAtIndex:self.tableView.indexPathForSelectedRow.row]; 
```

这`self.tableView.indexPathForSelectedRow.row`仅适用于行选择，不适用于附件按钮点击。

你可以通过两种简单的方法解决它

1.  在 .h 文件中声明一个变量来存储 indexPath 并使用它来传递选定的 indexPath。
2.  在发件人中传递 indexPath

一切顺利..

# c++ - 文件读取类 C++

> ID：15736071
> 
> 赞同：2
> 
> 时间：2013-04-01T00:16:07.157
> 
> 标签：c++, string, segmentation-fault, ifstream

我正在做一个文件阅读课。它应该在构造时使用给定的字符串打开文件，并根据调用的构造函数使用提供的第二个字符串来跳过文件到给定字符串之后的行。

这是我的代码：

```
SnakeFileReader::SnakeFileReader(string filePath)
{
    fileToRead_.open(filePath.c_str(), ios::in);
}
SnakeFileReader::SnakeFileReader(string filePath, string startString)
{
    fileToRead_.open(filePath.c_str(), ios::in);

    string toFind;

    while (toFind != startString  && !fileToRead_.eof())
    {
        fileToRead_ >> toFind;
    }
}
string SnakeFileReader::ReadLine()
{
    string fileLine;

    if (!fileToRead_.fail() && !fileToRead_.eof())
        fileToRead_ >> fileLine;

    return fileLine;
}
int SnakeFileReader::ReadInt()
{
    string fileLine = "";

    if (!fileToRead_.fail() && !fileToRead_.eof())
        fileToRead_ >> fileLine;

    int ret;

    istringstream(fileLine) >> ret;

    return ret;
}
SnakeFileReader::~SnakeFileReader()
{
    fileToRead_.close();
} 
```

我遇到的问题是在第二个构造函数中我遇到了分段错误。一旦我声明了一个字符串，我就会在读取行函数中遇到另一个分段错误。

[编辑] 这是请求的额外代码。我正在制作一个“贪吃蛇游戏”作为我学位第一年的一部分。我希望游戏读取和保存文件而不是硬编码变量值。我最终会大量使用这个类来设置游戏中的关卡。然而，这里有几行应该演示我打算如何使用这个类：

```
//Level.cpp
std::string fileToRead = "resources/files/level1.txt";
SnakeFileReader sfr(fileToRead);
std::string mapFilePath = sfr.ReadLine();
ImageFile(mapFilePath).load(map_layout);
mapWidth_ = sfr.ReadInt();
mapHeight_ = sfr.ReadInt();
level_cell_size_ = sfr.ReadInt();

map_ = new TileData*[mapWidth_];

for (int i = 0; i < mapWidth_; i++)
{
    map_[i] = new TileData[mapHeight_];
} 
```

文件布局：

```
resources/images/Map1_Layout.bmp
40
30
20 
```

类声明：

```
#ifndef SNAKE_FILE_READER_HPP
#define SNAKE_FILE_READER_HPP

#include <iostream>
#include <fstream>
#include <sstream>

using namespace std;
class SnakeFileReader
{
    public:
        SnakeFileReader(string filePath);
        SnakeFileReader(string filePath, string startString);
        ~SnakeFileReader();
        string ReadLine();
        int ReadInt();
    private:
        ifstream fileToRead_;
};
#endif // SNAKE_FILE_READER_HPP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:28:48.867

我不确定你的构造函数，但 ReadLine() 的问题是你试图返回一个自动变量的内存地址，当你退出函数时它被破坏了。

最简单的解决方法是删除返回值上的“&”，然后只返回一个字符串。但是如果你决定返回一个内存地址，试试这个：

```
string *SnakeFileReader::ReadLine()
{   
string *fileLine = new string;

if (!fileToRead_.fail() && !fileToRead_.eof())
    fileToRead_ >> *fileLine;

return fileLine;
} 
```

这将动态分配字符串并传回指针。不同之处在于，当您离开其范围时，动态变量不会自动销毁。在您自己删除它之前，该字符串仍将存在于堆中（当您完成它时，您必须记住这样做）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:31:47.347

在 ReadLine 函数中，您返回对分配在函数堆栈上的变量的引用。您正在破坏堆栈，可能会发生疯狂的事情。你的编译器应该已经警告你了。

# function - 如何从函数 postgresql 返回一个表，查询中有多个表？

> ID：15736072
> 
> 赞同：0
> 
> 时间：2013-04-01T00:16:11.430
> 
> 标签：function, postgresql, stored-procedures

我有一个问题，我有一个查询，它有多个表，我想创建一个函数，将该查询作为表返回给我

```
SELECT mat.codigo as codmatr, mat.codigoalumno as codal, mat.codigoempresa as codemp ,mat.codigopresentacion as codpre,
    mat.codigosecretaria as codsec, mat.fecha as fechamat, mat.estado as estadomat,
    mat.vigencia as vigmat, p.apellidos as apeAl, p.apellidos||' '||p.nombres as nombrecompleto,
    p.nombres as nomAl,razonsocial ,pre.codigocurso as codcur,cur.nombre as curso
    FROM matricula mat join alumno al on mat.codigoalumno = al.codigoalumno
    join persona p on  al.codigoalumno = p.codigo
    join persona pe on mat.codigoalumno = pe.codigo
    left join empresa emp on mat.codigoempresa = emp.codigo
    join presentacion pre on mat.codigopresentacion = pre.codigo
    join curso cur on cur.codigo = pre.codigocurso
    order by nombrecompleto 
```

那是我的查询，这是我的功能

```
CREATE OR REPLACE FUNCTION fn_lisMatricula() RETURNS SETOF Matricula AS
$BODY$
DECLARE
    r Matricula%rowtype;
r Persona%rowtype;

BEGIN
    FOR r IN SELECT mat.codigo as codmatr, mat.codigoalumno as codal, mat.codigoempresa as codemp ,mat.codigopresentacion as codpre,
    mat.codigosecretaria as codsec, mat.fecha as fechamat, mat.estado as estadomat,
    mat.vigencia as vigmat, p.apellidos as apeAl, p.apellidos||' '||p.nombres as nombrecompleto,
    p.nombres as nomAl,razonsocial ,pre.codigocurso as codcur,cur.nombre as curso
    FROM matricula mat join alumno al on mat.codigoalumno = al.codigoalumno
    join persona p on  al.codigoalumno = p.codigo
    join persona pe on mat.codigoalumno = pe.codigo
    left join empresa emp on mat.codigoempresa = emp.codigo
    join presentacion pre on mat.codigopresentacion = pre.codigo
    join curso cur on cur.codigo = pre.codigocurso
    order by nombrecompleto
    LOOP       
        RETURN NEXT r;
    END LOOP;
    RETURN;
END
$BODY$
LANGUAGE 'plpgsql';

select * from fn_lisMatricula() 
```

问题是函数的结果只有我的“矩阵”表的结构，但我想要所有查询结果的结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:29:32.597

使用`RETURNS TABLE`并指定结果列类型和名称。请参阅[PL/PgSQL](http://www.postgresql.org/docs/current/static/plpgsql.html)和[`CREATE FUNCTION`](http://www.postgresql.org/docs/current/static/sql-createfunction.html).

或者，您可以：

*   `CREATE TYPE`用于目的的自定义复合类型并返回`SETOF`它；
*   使用`OUT`参数和`RETURNS SETOF RECORD`,
*   `RETURNS SETOF RECORD`调用函数时使用并指定结果记录结构

`RETURNS TABLE(...)`是迄今为止最简单的选择。

# machine-learning - 计算机科学中“支持”的含义

> ID：15736075
> 
> 赞同：0
> 
> 时间：2013-04-01T00:16:26.290
> 
> 标签：machine-learning, computer-vision

我已经看到在各种情况下使用了“支持”这个词，但是尽管进行了很多谷歌搜索，但到目前为止我只能找到计算机科学的一个定义，特别是关于机器学习（支持向量，在支持向量机中）。这不一定是我试图理解的特定背景。

我的特殊问题与我正在阅读的一张演讲幻灯片有关——它是关于使用霍夫变换进行圆检测（计算机视觉）的，在这张幻灯片的某处它说“......在这个过程中，每个 (x, y,r) 我们在图像中绘制相应的圆并计算它的支持度。”

在计算机科学的背景下，“支持”这个词还有哪些其他可能的含义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:28:57.333

[您所指](http://www.cs.illinois.edu/~slazebni/spring11/lec10_hough.pptx)的幻灯片将“支持”一词放在引号中：

# 圆的霍夫变换

*   概念上等效的过程：对于每个 (x,y,r)，在图像中绘制相应的圆并计算其“支持”</li>

讲座的背景是机器视觉的“投票方案”。“支持”一词似乎不是用作技术术语，而是指投票，其中高票数表示对候选人或职位的“支持”。

# r - 在 R 中计算具有多个变量的积分

> ID：15736080
> 
> 赞同：-1
> 
> 时间：2013-04-01T00:17:22.150
> 
> 标签：r, integration

嗨，我有一个像下面这样我想计算的方程。

方程由下式给出：

![在此处输入图像描述](https://i.stack.imgur.com/5Fkg6.jpg)

在这个等式中，x 是一个从 0 到 500 的数组。t 的值 = 500，即积分的上限。

现在我想将 c 计算为 c(500,x)。

到目前为止，我编写的代码如下：

```
x <- seq(from=0,by=0.5,length=1000)
t=500

integrand <- function(t)t^(-0.5)*exp((-x^2/t)-t)
integrated <- integrate(integrand, lower=0, upper=t)
final <-  pi^(-0.5)*exp(2*x)*integrated 
```

我得到的错误如下：

```
Error in integrate(integrand, lower = 0, upper = t) : 
  evaluation of function gave a result of wrong length
In addition: Warning messages:
1: In -x^2/t :
  longer object length is not a multiple of shorter object length
2: In -x^2/t - t :
  longer object length is not a multiple of shorter object length
3: In t^(-0.5) * exp(-x^2/t - t) :
  longer object length is not a multiple of shorter object length 
```

但它不起作用，因为在被积函数内有一个变量 x ，它是一个数组。谁能建议我如何先计算积分，然后计算每个 x 值的总表达式？如果我将被积函数中 x 的值更改为常数，我可以计算积分，但我想计算从 0 到 500 的所有 x 值。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:21:04.143

我会将循环放在集成之外的 x 值上。迭代 x 值并对内部的每个值执行积分。然后，您将拥有`C(x)`适合绘图的 x 函数。

当然，您意识到可以评估不定积分：

[http://www.wolframalpha.com/input/?i=integrate+exp%28-%28c%2Bt%5E2%29%2Ft%​​29%2Fsqrt%28t%29](http://www.wolframalpha.com/input/?i=integrate+exp%28-%28c%2Bt%5E2%29%2Ft%29%2Fsqrt%28t%29)

也许这会帮助您在开始之前了解答案的样子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:04:41.813

好吧，这里有一些代码，但是在 t=353 之后就崩溃了：

```
Cfun <- function(XX, upper){
      integrand <- function(x)x^(-0.5)*exp((-XX^2/x)-x)
      integrated <- integrate(integrand, lower=0, upper=upper)$value
      (final <-  pi^(-0.5)*exp(2*XX)*integrated) }
sapply(1:400, Cfun, upper=500) 
```

# sql - 具有内部联接的重复字段

> ID：15736081
> 
> 赞同：5
> 
> 时间：2013-04-01T00:17:30.187
> 
> 标签：sql

我无法理解如何在不生成大量重复字段的情况下进行多表连接。

假设我有三个表：

*   家庭：身份证、姓名
*   父母：身份证，家庭，姓名
*   孩子：身份证、家庭、姓名

如果我做一个简单的选择：

```
select family.id, family.name from family
    order by family.id; 
```

我得到一个简单的列表：

```
ID Name
1  Smith
2  Jones
3  Wong 
```

如果我添加一个内部连接：

```
select family.id, family.name, parent.first_name, parent.last_name
  from family
  inner join parent
  on parent.family = family.id
  order by family.id; 
```

我得到一些重复的字段：

```
ID Name   Parent
1  Smith  Howard Smith
1  Smith  Janet Smith
2  Jones  Phil Jones
2  Jones  Harriet Jones
3  Wong   Billy Wong
3  Wong   Rachel Wong 
```

如果我添加另一个内部连接：

```
select family.id, family.name, parent.first_name, parent.last_name
  from family
  inner join parent
  on parent.family = family.id
  inner join child
  on child.family = family.id
  order by family.id; 
```

我得到更多重复的字段：

```
ID Name   Parent         Child
1  Smith  Howard Smith   Peter Smith
1  Smith  Howard Smith   Sally Smith
1  Smith  Howard Smith   Fred Smith
1  Smith  Janet Smith    Peter Smith
1  Smith  Janet Smith    Sally Smith
1  Smith  Janet Smith    Fred Smith
2  Jones  Phil Jones     Mark Jones
2  Jones  Phil Jones     Melissa Jones
2  Jones  Harriet Jones  Mark Jones
2  Jones  Harriet Jones  Melissa Jones
3  Wong   Billy Wong     Mary Wong
3  Wong   Billy Wong     Jennifer Wong
3  Wong   Rachel Wong    Mary Wong
3  Wong   Rachel Wong    Jennifer Wong 
```

我更喜欢的是这样的，因为它更具人类可读性：

```
ID Name   Parent         Child
1  Smith  Howard Smith   Peter Smith
          Janet Smith    Sally Smith
                         Fred Smith
2  Jones  Phil Jones     Mark Jones
          Harriet Jones  Melissa Jones
3  Wong   Billy Wong     Mary Wong
          Rachel Wong    Jennifer Wong 
```

我知道内部连接的好处之一是避免通过笛卡尔积呈现过多的信息。但似乎我得到了与多表连接类似的东西。有没有办法如上所示总结每个组，或者这是否需要使用 Python 等脚本语言进行后处理？

谢谢，

- 担

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:21:01.993

这正是关系数据库的工作方式：每一行本身必须包含所有信息，以及您请求的每个字段。换句话说，每一行都需要独立于所有其他行才有意义。如果您执行单个查询并且需要获取所有三个级别的信息，则需要自己处理消除重复项以获得所需的格式。

或者，您可以运行三个单独的查询，然后在代码中进行内存连接。尽管在某些极少数情况下这可能是可取的，但这通常是花费开发时间的错误方式，因为 RDBMS 通常在连接关系数据方面效率更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:20:40.883

你已经击中它的头了。您需要进行一些后期处理才能获得所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:20:36.447

SQL 查询结果始终是简单的表格数据，因此要获得您正在寻找的结果绝对不是一个漂亮的查询。你可以这样做，但它会涉及到相当多的查询巫术，将东西存储在临时表中或使用游标，或其他一些时髦的解决方法。

我肯定会建议使用外部应用程序来检索您的数据并从那里适当地格式化它。

像 .NET 中的实体框架这样的 ORM 可能很容易做到这一点，但您绝对可以使用任何语言的一些嵌套集合或字典来做到这一点。

# javafx-2 - JavaFX 2 动态点加载

> ID：15736082
> 
> 赞同：2
> 
> 时间：2013-04-01T00:18:10.687
> 
> 标签：javafx-2

我想创建一些像这样的加载点：

```
At 0 second the text on the screen is: Loading.
At 1 second the text on the screen is: Loading..
At 2 second the text on the screen is: Loading...
At 3 second the text on the screen is: Loading.
At 4 second the text on the screen is: Loading..
At 5 second the text on the screen is: Loading... 
```

依此类推，直到我关闭`Stage`.

在 JavaFX 中最好/最简单的方法是什么？我一直在研究 JavaFX 中的动画/预加载器，但是在尝试实现这一点时这似乎很复杂。

我一直在尝试在这三个之间创建一个循环`Text`：

```
Text dot = new Text("Loading.");
Text dotdot = new Text("Loading..");
Text dotdotdot = new Text("Loading..."); 
```

但屏幕保持静止...

我怎样才能使它在 JavaFX 中正常工作？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T17:32:28.073

这个问题类似于：[javafx 动画循环](https://stackoverflow.com/questions/13029920/javafx-animation-looping)。

这是一个使用 JavaFX[动画框架](http://docs.oracle.com/javafx/2/api/javafx/animation/package-summary.html)的解决方案——它对我来说似乎很简单，而且不太复杂。

![加载动画](https://i.stack.imgur.com/fEBsc.png)

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.event.*;
import javafx.scene.*;
import javafx.scene.control.Label;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.util.Duration;

/** Simple Loading Text Animation. */
public class DotLoader extends Application {
  @Override public void start(final Stage stage) throws Exception {
    final Label    status   = new Label("Loading");
    final Timeline timeline = new Timeline(
      new KeyFrame(Duration.ZERO, new EventHandler() {
        @Override public void handle(Event event) {
          String statusText = status.getText();
          status.setText(
            ("Loading . . .".equals(statusText))
              ? "Loading ." 
              : statusText + " ."
          );
        }
      }),  
      new KeyFrame(Duration.millis(1000))
    );
    timeline.setCycleCount(Timeline.INDEFINITE);

    VBox layout = new VBox();
    layout.getChildren().addAll(status);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    stage.setScene(new Scene(layout, 50, 35));
    stage.show();

    timeline.play();
  }

  public static void main(String[] args) throws Exception { launch(args); }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:05:44.767

您是否考虑过使用进度指示器或进度条？我认为它们可以成为展示动画和避免问题的好方法。

我已经能够在 JavaFX 中做到这一点，而不是使用动画，而是使用 JavaFX 的并发类。

我让你在这里的代码[要点](https://gist.github.com/ajiniesta/5285742)。我认为这不是很直观，因为我更喜欢进度指示器。也许这不是最好的解决方案，但也许这会对你有所帮助。

干杯

# asynchronous - ALT 和 SLT 同步/异步在 MIPS 中本地定时

> ID：15736084
> 
> 赞同：0
> 
> 时间：2013-04-01T00:18:26.080
> 
> 标签：asynchronous, mips

谁能告诉我ALT和SLT之间的区别？

另一件事：`SRA`指令如何使用`shamt`？

参考：[https ://web.archive.org/web/20201111203150/http://www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html](https://web.archive.org/web/20201111203150/http://www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:06:54.617

`SRA`是算术右移，这意味着它在原始符号位中移动而不是零。

例如：

```
li $t0,0x80000000
sra $t0,$t0,4
# $t0 now contains 0xF8000000

li $t0,0x40000000
sra $t0,$t0,4
# $t0 now contains 0x04000000 
```

# java - 詹金斯 - 无法读取“https://github.com”的用户名：没有这样的设备或地址

> ID：15736088
> 
> 赞同：1
> 
> 时间：2013-04-01T00:19:04.533
> 
> 标签：java, ubuntu, github, jenkins, hudson

我正在尝试在我的 Ubuntu PC 上设置 Jenkins / Hudson。这不是问题，但我使用以下命令设置了 Android 作业：

```
export CLEAN=false
export LUNCH=cm_ace-userdebug
export REPO_BRANCH=cm-10.1
export RELEASE_TYPE=CM_NIGHTLY
curl -O https://raw.github.com/CyanogenMod/hudson/master/job.sh
. ./job.sh 
```

由于以下错误，作业在几秒钟后停止：

> 无法读取“ [https://github.com](https://github.com) ”的用户名：没有这样的设备或地址

如何修复此错误？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:03:21.333

我怀疑 Jenkins 正试图打开“/dev/tty”或其他要求您输入用户名和密码的东西。这是失败的，因为 Jenkins 作为守护进程运行......并且“/dev/tty”不能在该上下文中使用。“没有这样的设备或地址”来自打开“/dev/tty”的失败尝试。

解决方案是将作业配置为使用特定的私钥进行提取。阅读`curl`手册条目并查看`-E`选项。或者，您可以在命令中使用`-u`并指定用户名和密码。`curl`

# c# - asp.net 按钮悬停不起作用

> ID：15736092
> 
> 赞同：2
> 
> 时间：2013-04-01T00:19:32.947
> 
> 标签：c#, asp.net, .net

这是我检查了几个链接并相应地遵循的代码和 css，但我仍然遇到问题。请解释。

```
<asp:Button ID="Button1" runat="server" BackColor="#93C323" 
            Font-Names="Segoe UI Light" Font-Size="X-Large" ForeColor="White" Height="41px" 
            style="margin-left: 144px" Text="+ Add" Width="121px" />

.button:hover
{
 background:#DBDBDB;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:21:29.187

您需要将 cssclass="button" 添加到您的按钮。

```
<asp:Button ID="Button1" runat="server" BackColor="#93C323" CssClass="button"
            Font-Names="Segoe UI Light" Font-Size="X-Large" ForeColor="White" Height="41px" 
            style="margin-left: 144px" Text="+ Add" Width="121px" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T00:59:33.063

当您想通过悬停或动态更改样式时，请避免将样式设为内联。这是我刚刚测试并正在工作的示例：

```
<asp:Button ID="Button1" runat="server" CssClass="OneButton" Text="ok" />

    <style type="text/css">
        .OneButton
        {
            background-color:#93C323;
            font-size:x-large;
            color:White;
            height:41px;
            width:121px;
            margin-left:144px;
        }

        .OneButton:hover
        {
            background-color:#DBDBDB;
        }    
    </style> 
```

以及它的实时版本：http: [//jsfiddle.net/gwSWy/](http://jsfiddle.net/gwSWy/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T00:21:37.390

如果您希望对所有按钮全局执行此操作：

ASP.NET 按钮创建`<input type="submit">`.

所以你需要围绕它设计风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T01:10:34.980

如果您的按钮只需要该样式，则可以使用 Button Property `CssClass`。检查此[链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.webcontrol.cssclass.aspx)以供参考。

还有一件事，我猜你没有`style`正确使用。您可以将您的`margin`详细信息放在`button`css 中，然后删除属性样式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T01:11:38.063

您的 CSS 规则不会在 DOM 中找到该元素，因为没有按照您的方式为其分配 CSS 类。

您可以像 nimeshjm 提到的那样做，并将 CssClass="button" 属性添加到按钮控件 - 这应该与您的 CSS 规则相匹配，假设您没有任何其他问题（样式表链接到页面上，没有覆盖/更多具体规则。

您也无法根据其 ID 设置元素的样式，因为它会在呈现页面时自动更改，以防止元素之间的 ID 冲突。

如果您使用`ClientIDMode="Static"`将保持您在控件中指定的 ID 的属性。

`<input type-"submit" />`正如 Joe Enos所说，Button 控件呈现为`button:hover { background: black; }`

# elisp - 有没有办法用 gnuplot 快速绘制 elisp 函数？

> ID：15736101
> 
> 赞同：3
> 
> 时间：2013-04-01T00:20:39.513
> 
> 标签：elisp, gnuplot

是否有一个 emacs-lisp 命令可以用来用 gnuplot 绘制一组数字，就像我可以在 Excel 中从一组数字创建简单的折线图一样？

例如，我想要一个函数，叫做类似的东西`plot-with-gnuplot`，我可以用类似的东西来调用它：

```
(plot-with-gnuplot '((0 0.1) (0.1 1) (0.5 10))) 
```

并让它产生一个通过这些点的简单线图。

最终，我将使用它来查看我正在编写的数学函数，通过在一定范围内绘制其值的简单线图，能够快速查看我的代码是如何运行的将很有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-21T13:47:41.730

这不是您想要的，但您可能会发现org-mode[中的 Org-babel-gnuplot](http://orgmode.org/worg/org-contrib/babel/languages/ob-doc-gnuplot.html)很有用。我制作了一个示例文件，如果你有[gnuplot.el](http://astro.berkeley.edu/~mkmcc/software/gnuplot-mode.html)和 emacs24，它应该可以工作。运行第一个代码块 ( `C-c` `C-c`)，然后运行第三个代码块。

**测试组织：**

```
#+BEGIN_SRC emacs-lisp :results silent
;; load gnuplot mode
(require 'gnuplot "~/Dropbox/emacs/gnuplot.el")
(require 'ob-gnuplot)
#+END_SRC

#+NAME: edata
#+BEGIN_SRC emacs-lisp
'((0 0.1) (0.1 1) (0.5 10)))
#+END_SRC

#+BEGIN_SRC gnuplot :file file.png :var data=edata
plot data w lp
#+END_SRC 
```

![快照](https://i.stack.imgur.com/fEeQg.png)

# php - 使用 .htaccess 获取 url php 多方法

> ID：15736103
> 
> 赞同：-3
> 
> 时间：2013-04-01T00:20:43.463
> 
> 标签：php, .htaccess, url

如果我有这样的网址：

```
domain.com/profile.php?id=1&lang=en 
```

我可以使用 htaccess 获得这样的网址吗？

```
domain.com/1/en 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:25:30.950

这就是我在 .htaccess 中的做法

```
RewriteEngine On
RewriteRule ^/1/en$ /profile.php?id=1&lang=en 
```

# sql - 在SSIS中将固定宽度的行拆分为多行

> ID：15736108
> 
> 赞同：3
> 
> 时间：2013-04-01T00:21:03.190
> 
> 标签：sql, oracle, ssis

我有一个固定宽度的平面文件，需要加载到多个 oracle 表中（一行需要拆分为多行）

每列顶部的数字是它们的大小，我想要的输出应该如下所示。

```
Flatfile data(fixed width):
3   6    3   11          3   10        3   10        3
ID NAME  AGE CTY1       ST1 CTY2      ST2 CTY3      ST3
200JOHN  46  LOSANGELES CA  HOUSTON   TX  CHARLOTTE NC
201TIMBER54  PHOENIX    AZ                CHICAGO   IL
202DAVID 32  ATLANTA    GA  PORTLAND  AZ 
```

发生可能会有所不同..它可以长到20-30

```
DESIRED OUTPUT:
TABLE1
ID NAME  AGE
200JOHN  46
201TIMBER54
202DAVID 32

TABLE2
ID  SEQ CTY        ST
200 1   LOSANGELES CA  
200 2   HOUSTON    TX  
200 3   CHARLOTTE  NC
201 1   PHOENIX    AZ      
201 2   CHICAGO    IL        
202 1   ATLANTA    GA  
202 2   PORTLAND   AZ 
```

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-15T04:30:03.730

我会先听取@bilinkc 给出的建议，然后尝试通过反透视来解决这个问题。

[单击此处](http://technet.microsoft.com/en-us/library/ms141723%28v=sql.100%29.aspx)了解有关如何使用 SSIS Unpivot 数据流转换的详细信息。

但是，如果由于某种原因无法解决，而您真的想用 SSIS 解决这个问题，我（有点）高兴地说，使用 SSIS 和一个数据流解决问题在技术上是可行的。

以下是步骤的简短列表：

1) 将数据流任务添加到您的包中

2) 将平面文件源添加到您的数据流任务

3) 使用连接管理器为您的平面文件配置平面文件源

4) 向您的数据流任务添加多播数据流转换

5) 将您的平面文件源与多播数据流转换连接

现在是“有趣”的部分（复制和粘贴可以节省您的时间）......

6) 将 30 个条件拆分数据流转换添加到您的数据流任务中

7) 将组播数据流转换连接到每个条件拆分数据流

8）配置每个Conditional Split N，拉取State N和City N有值的行子集

示例：条件拆分 1

输出名称：CTY1_ST1

条件：[CTY1] != "" && [ST1] != ""

9) 将 30 个派生列数据流转换添加到您的数据流中

10）将每一个连接到您的 30 个条件拆分

11) 使用派生列名称 SEQ 和值 1 到 30 配置每个

12）添加一个联合所有数据流转换和联合所有30个数据管道回到一起

现在“简单”的部分......

13) 将您的第一个排序转换添加到您的数据流任务中

14) 将第 31 个多播管道连接到您的第一个排序转换

15）在ID旁边打勾并按ID排序（希望ID：NAME和ID：AGE是1：1）

16) 检查删除具有重复排序值的行

17) 添加您的第二个多播数据流转换

18) 为您的数据流任务添加第二个排序转换

19) 将您的 Union All 连接到您的第二个排序转换并按 ID 排序

20) 为您的数据流任务添加合并连接

21) 连接您的第二个多播数据流转换作为左输入

22）将您的第二个排序转换连接到您的合并连接作为您的正确输入

23) 将您的合并联接配置为联接类型 = 内部联接并选择列 ID、SEQ、CTY、ST

24) 将您的第一个 OLE DB 目标添加到您的数据流中并将您的 Merge Join 连接到它（结果是 TABLE2）

25) 将第二个 OLE DB 目标添加到您的数据流并将您的第二个多播数据流转换连接到它（结果是 TABLE1）

# .net - 为什么在同一个数据库中保存哈希密码的盐是安全的？

> ID：15736118
> 
> 赞同：5
> 
> 时间：2013-04-01T00:23:02.553
> 
> 标签：.net, hash, cryptography, salt

我了解散列和加盐的必要性，但我不明白如何将盐存储在同一个（可能受到破坏的）数据库中，因为整个散列是安全的。例如，我正在学习的一本书指示通过随机生成一个整数并使用 RNGCryptoServiceProvider 创建一个 byte[] 来为每个用户（好）创建一个唯一的哈希。这一切都很好，但是为了在登录时验证用户的密码，有必要从数据库（或其他文件）中读取唯一的盐。这是储存盐的安全方式吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T02:28:33.170

想象一下，你是一个坏人，你可以访问一个密码数据库。那里有很多信息，事情已经够糟糕的了。对我们其他人来说，唯一的好消息是这最终是*死数据*。你*真正*想要的是访问活生生的、正在运行的系统，以及让该系统做任何你想做的事情的能力……尤其是如果没有人知道你在其中。

这是诀窍。要获得访问权限，您不需要真正发现*真正的*密码：您只需要找到一些导致相同哈希的文本值。更糟糕的是，您不需要暴力破解结果。那里有一些有用的表格，可让您快速找到会产生所需散列的文本。

因此，盐的目的是为这些预先计算的表添加皱纹。您可能有一个可以产生特定哈希的值，但您预先计算的“彩虹表”不考虑盐。盐完全改变了哈希。现在你又回到了需要暴力破解个人密码的问题上，如果系统设计者使用了可能需要数年时间的好的加密算法。

这里的好处是盐有这种影响*，即使你知道它的价值*。即使盐是公开的，只要有一个每个用户的盐，就会破坏攻击者对您的密码数据库使用彩虹表攻击的能力。

（不过，共享盐将允许攻击者开始使用通用密码等运行破解解决方案，并开始将东西扔在墙上……将哈希结果与所有用户进行比较，看看会发生什么）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T00:26:40.407

这是安全的，因为访问盐不会使攻击者更容易逆转散列过程。给定密码、盐和哈希，您可以快速检查三元组是否正确。但是，您不能使用盐的知识来帮助您获取密码。

回想一下，首先需要盐的原因是为了避免相同的密码产生相同的哈希值。如果没有盐，攻击者将能够散列“彩虹表”，并根据编码字典检查散列。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-01T00:26:25.423

加盐增加了对受损数据库执行离线攻击的难度。虽然拥有足够资源的攻击者最终会破解您的所有密码，但加盐通过两种方式使其更难：

*   基于通用密码（称为彩虹表）的预先计算的哈希列表不能应用于加盐密码（至少在不考虑所有盐的情况下）
*   破解一个加盐密码不会提供任何其他密码的信息（例如，两个密码是否相同）。

难度的增加允许有更多的时间来发现和减轻受损数据库的影响。

您可以通过分离散列和盐来获得更好的安全性，因为没有盐的攻击者将不得不暴力破解盐。然而，在实践中，实现这种分离既困难又麻烦，如果攻击者拥有该级别的访问权限，他很可能能够获得盐和密码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T00:26:12.113

Salting 通过在预先制作的表格中查找哈希来防止破解哈希。如果攻击者知道盐，它不会在这个攻击向量中帮助他们，因为他们仍然需要暴力破解密码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T00:27:47.303

每个用户使用不同的盐意味着他们必须花费所有资源来为单个用户强制匹配哈希。因此，它不一定是“安全的”，而是要破解整个数据库非常困难（不可能？），即使破解一个数据库也需要大量的努力。

您可以将每条记录的盐与全局盐结合起来，这样即使您的数据库遭到破坏，它们仍然是缺乏可行蛮力的一个元素。

我会说两者都去 - 毕竟不会受伤......

# css - 在子菜单中保持按钮活动状态

> ID：15736120
> 
> 赞同：0
> 
> 时间：2013-04-01T00:23:15.340
> 
> 标签：css, wordpress-theming

在滚动子菜单选项时，我想将按钮的颜色保持在活动状态

[http://www.milknhny.co.uk/SofiaWork/](http://www.milknhny.co.uk/SofiaWork/)

```
ul.headermenu ul ul li a:hover 
```

以上似乎不起作用，有人可以建议吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:32:43.480

你必须使用 JavaScript 来保持这种风格的完整状态。您所做的是将侦听器绑定到菜单 ul，并在将其（子）子项悬停时保持颜色不变。

CSS4（尚不能安全使用）有一个父选择器；

```
ul ul! < li:hover {

} 
```

# php - 比较日期时间？

> ID：15736122
> 
> 赞同：0
> 
> 时间：2013-04-01T00:23:27.573
> 
> 标签：php, datetime

我一直在对此进行大量研究，并使用了一些代码来了解如何使这项工作发挥作用，但没有任何事情能按我想要的方式工作，或者根本没有工作。

代码是：

```
<?php
$time1 = $user['last_active'];
$time2 = "+5 minutes";
   if (strtotime($time1) > strtotime($time2)) {
      echo "Online!";
   }else{
      echo "Offline!";  
   }
?> 
```

应该比较两个变量，看看最后一个活动变量是大于还是小于5分钟，如果大于，就出现离线。我不知道`NOW()`每个页面上的更新有什么问题，如果用户未登录，我会停止更新。有什么建议或帮助吗？谢谢。

该`$time1`变量来自一个获取的数组，该数组获取`['last_active']`在每个页面上更新的信息。

我修复了我的代码，但它仍然无法正常工作，但是，我认为我已经设法比以前更进一步了..

```
<?php
$first  = new DateTime();
$second = new DateTime($user['last_active']);
$diff = $first->diff( $second );
$diff->format( '%H:%I:%S' );
if($diff->format( '%H:%I:%S' ) > (strtotime("5 minutes"))){
echo "Offline";
}else{
echo "Online";
}
?> 
```

此时我能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T18:43:09.103

没有人指出你实际上有一个错误。“当前时间”永远不会大于“当前时间+5分钟”

如果您改为使用“-5 分钟”作为“在线阈值”，您的第一个代码示例将正常工作。

此外，将没有日期的时间戳与 strtotime() 的输出进行比较，就像您在第二个代码中所做的那样，这不是正确的比较。它有两个问题：

*   每次新的一天到来时，都会重复相同的时间值。

*   strtotime 的输出是一个整数，代表 seconds-since-epoch；format() 的输出是当前日期内小时：分钟：秒的文本表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:29:38.307

至于您的问题如何计算两个日期/时间之间的时间，请在以下帖子中查看解决方案，这应该会给您足够的信息！（复制 ？ ）

[在php中计算经过的时间](https://stackoverflow.com/questions/7850259/calculate-elapsed-time-in-php)

和这里

[如何在PHP中以分钟为单位获取时差](https://stackoverflow.com/questions/365191/how-to-get-time-difference-in-minutes-in-php)

随意编辑

```
<?
$first = new DateTime(); // this would hold your [last active]
//$first->modify("-6 minutes");
$second = new DateTime("NOW");
$difference = $second->diff( $first ); // second diff first
if ($difference->format('%i') > 5) { // comparing minutes only in example ( %i )
 echo "The user is AFK";
} else {
 echo "user might still be active";
}
?> 
```

# ruby-on-rails - Rails、Devise、Heroku 从控制台删除用户帐户

> ID：15736123
> 
> 赞同：2
> 
> 时间：2013-04-01T00:23:55.543
> 
> 标签：ruby-on-rails, heroku, devise

我的生产环境中有一些空的用户帐户是我作为测试制作的，现在我想删除它们。他们没有任何附加的项目，那么我从 heroku 控制台运行什么命令来删除这些？另外，我只需输入“heroku 控制台”即可访问 heroku 控制台，对吗？

我从设计视图中删除了“用户删除”按钮，因为我不希望用户能够删除他们的帐户......认为这是最干净的方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T00:25:34.533

似乎最简单的方法是打开 Heroku 控制台并手动删除您要删除的每个用户。我建议你要*非常*小心，因为它是一个生产环境。

```
heroku run console -a <YOUR APP NAME>
User.find(list_of_ids).destroy_all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-07T04:10:05.880

我通过输入以下内容进入 Heroku 控制台：

```
heroku run rails c 
```

以防万一，您想删除像我这样的某个用户，您可以使用此命令，其中 id 是用户的 id。

```
User.find_by!(id: 6).destroy! 
```

# ruby - 我如何要求具有循环依赖的类？

> ID：15736128
> 
> 赞同：1
> 
> 时间：2013-04-01T00:25:00.923
> 
> 标签：ruby, ruby-on-rails-3

我被 Rail 自动加载丢失的常量给宠坏了。在 Ruby 中，如果我有两个类，一个嵌套在另一个内部但在不同的文件中，我如何要求它们，因为它们相互依赖（循环依赖）。

```
# user.rb
class User < ActiveRecord::Base
   serialize :preferences, User::Preferences
end

# user/preferences.rb
class User::Preferences
end

# user_spec.rb    
require 'user'
require 'user/preferences' 
```

注意：我*不需要*Rails 环境。

如果我先尝试加载用户，代码会失败，因为它还不知道`User::Preferences`。如果我首先加载“用户/首选项”，它会在加载用户时失败，因为现有的用户类不是 ActiveRecord 的子类。

我怀疑我需要删除循环依赖，或者如果可能的话， 通过传递一个在需要时变成常量`serialize`的字符串来延迟加载类。`'User::Preferences'`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:27:35.187

我的一个技巧是在 user/preferences.rb 中创建一个从 ActiveRecord::Base 继承的空 User 类：

```
class User < ActiveRecord::Base; end

class User::Preferences
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:49:02.210

您可以将存根声明放在一个公共基础中，而不是将`User`'s 实现的知识连接到您中，如下所示：`User::Preferences`

```
# user_base.rb
class User < ActiveRecord::Base; end

# user.rb
require 'user_base'
require 'user/preferences'

class User
   serialize :preferences, User::Preferences
   ...
end

# user/preferences.rb
require 'user_base'

class User::Preferences
end 
```

或者，您可以移动`User::Preferences`到独立的模块命名空间，例如`ModelHelper::User::Preferences`. 我想我更喜欢这个解决方案。您有循环依赖的事实是代码异味，唯一导致它的原因是将`User`类重用为`User::Preferences`.

# javascript - JS 画布函数

> ID：15736130
> 
> 赞同：0
> 
> 时间：2013-04-01T00:25:14.923
> 
> 标签：javascript, html

```
<script>
    function confirm() {
        if (document.getElementById("myInput") == "12") {
            var c = document.getElementById("myCanvas");
            var ctx = c.getContext("2d");
            ctx.moveTo(130, 0);
            ctx.lineTo(130, 150);
            ctx.stroke();
        }
    }
</script>
<input type="text" id="myInput" placeholder="Type Your Hour" class="center" />
<input type="submit" value="OK" id="button" class="center" onclick="confirm();" /> 
```

我有这段代码来获取画布像素或位置，我卡在确认功能上，我尝试使用 myInput id 获取输入并将其等于 12，但代码不起作用。

我怎样才能解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:29:59.060

您的 if 语句未正确检查相等性。如果您想知道用户键入了什么，那么您必须从`value`属性中获取该信息：

```
if ( document.getElementById("myInput").value == "12" )
//                                      ^^^^^ 
```

# java - 与大量规则匹配的实时消息

> ID：15736134
> 
> 赞同：2
> 
> 时间：2013-04-01T00:25:46.850
> 
> 标签：java, message, rules, fsm

我有一个场景，消息以 300,000/秒的速度进入我的系统，系统将通过将每条消息与特定规则进行匹配来确定每条消息的去向（客户端）。

现在的挑战是有 10,000 个客户端（假设每个客户端只有一个由用户定义的规则），因此对于每条传入的消息，它将与每个规则匹配以确定它应该去哪里（一条消息可以去多个不同的客户端如果它符合规则）。

现在，让我们更具体一些。

例如，一条消息由以下字段组成。

消息（类型、区域、级别、...）

一条规则可能很复杂，但现在让我们把它变成一个简单的规则

rule1: (输入 (100, 200, 300) && region not in (A, B , C)) || 水平 (100)

请记住，在现实世界中，一条消息大约有 50 个字段左右，并且规则可能比这复杂得多。

这里的问题是：

*   有什么方法可以减少匹配消息所需的时间吗？或者

*   是否可以“将所有规则合并为一个”？

我想到的是 FSM，但我对它一点也不熟悉，所以你的任何提示将不胜感激。

编辑：

我尝试了 Drools，结果证明它是可行的，但它的性能远非好（嗯，它可以适用于大多数其他用例）。

就我而言，它每秒只能处理大约 5k 条消息，但我一眼就能看到 300k 条消息。所以现在我在想也许规则引擎很难满足我的要求。

有任何想法吗 ？

提前非常感谢。

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:57:41.667

让我自己回答。

实际上，我需要的是某种表达式评估器，而不是一个大的规则引擎，所以当我知道这一点时，我发现 GNU JEL（Java 表达式库）已经存在多年了。

JEL 编译每个指定的表达式，然后客户端在评估它时可以给它一个运行时实例的上下文，这可以非常非常快。例如，对于给定的单个表达式，JEL 可以在一秒钟内计算超过 1,000,000 次（这取决于给定表达式的复杂性和要匹配的数据）

所以 JEL 是迄今为止对我来说最合理的解决方案。

希望这篇文章能给你一点启发。

# angularjs - 将工厂数据返回到控制器始终未定义

> ID：15736135
> 
> 赞同：2
> 
> 时间：2013-04-01T00:25:47.070
> 
> 标签：angularjs

试图从工厂返回数据并在工厂内记录输出正确的数据，但一旦传递给控制器​​，它总是未定义的。如果我在控制器中有我的工厂逻辑，它将正常工作。所以这一定是我在这里缺少的一些简单的东西？

**应用**

```
var app = angular.module('app', []);

    app.controller('animalController', ['$log', '$scope', 'animalResource', function($log, $scope, animalResource) {
        $scope.list = function() {
            $scope.list = 'List Animals';
            $scope.animals = animalResource.get(); // returns undefined data
            $log.info($scope.animals);
        };
        $scope.show = function() {};
        $scope.create = function() {};
        $scope.update = function() {};
        $scope.destroy = function() {};
    }]);

    app.factory('animalResource', ['$http', '$log', function($http, $log) {
        return {
            get: function() {
                $http({method: 'GET', url: '/clusters/xhrGetAnimals'}).
                    success(function(data, status, headers, config) {
                        //$log.info(data, status, headers, config); // return correct data
                        return data;
                    }).
                    error(function(data, status, headers, config) {
                        $log.info(data, status, headers, config);
                    });
            },
            post: function() {},
            put: function() {},
            delete: function() {}
        };
    }]); 
```

**日志信息**

```
[Object, Object, Object, Object, Object, Object, Object, Object, Object, Object]
    200 function (name) {
        if (!headersObj) headersObj =  parseHeaders(headers);

        if (name) {
            return headersObj[lowercase(name)] || null;
        }

        return headersObj;
    } Object {method: "GET", url: "/clusters/xhrGetAnimals"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:06:14.197

您`get()`的服务方法没有返回任何内容。`return`内部`success`回调仅从该特定函数返回。

返回`$http`对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T19:06:22.087

Che这个例子是你如何使用承诺并返回工厂然后你访问在你的控制器上注入服务的方法使用点语法访问你在服务上定义的函数

```
'use strict';
        var app;

        app = angular.module('app.formCreator.services', []);

        app.factory('formCreatorService', [
          '$http', '$q', function($http, $q) {
            var apiCall, bjectArrarContainer, deferred, factory, webBaseUrl, _getFormElementsData;
            factory = {};
            deferred = $q.defer();
            bjectArrarContainer = [];
            webBaseUrl = 'https://tools.XXXX_url_XXXXX.com/XXXXXXX/';
            apiCall = 'api/XXXXX_url_XXXX/1000';
            _getFormElementsData = function() {
              $http.get(webBaseUrl + apiCall).success(function(formElements) {
                deferred.resolve(formElements);
              }).error(function(err) {
                deferred.reject(error);
              });
              return deferred.promise;
            };
            factory.getFormElementsData = _getFormElementsData;
            return factory;
          }
        ]); 
```

然后例如这样做

```
 'use strict';
            var app;

            app = angular.module('app.formCreator.ctrls', []);

            app.controller('formCreatorController', [
              'formCreatorService', '$scope', function(formCreatorService, $scope) {
                $scope.formElementsData = {};
                formCreatorService.getFormElementsData().then(function(response) {
                  return $scope.formElementsData = response;
                });
              }
            ]); 
```

# c++ - 有没有办法使用类的成员函数在并发线程中运行而无需在 C++11 中传递 *this？

> ID：15736144
> 
> 赞同：0
> 
> 时间：2013-04-01T00:27:19.503
> 
> 标签：c++, macos, c++11, xcode4.6

我是 C++11 线程的新手，并尝试使用类的成员函数在并发线程中运行。

在回答我之前的问题时，我收到了以下建议：

```
std::thread t1(&SomeClass::threadFunction, *this, arg1, arg2); 
```

我实施了上述建议。它消除了我遇到的编译错误，但引入了运行时错误。在另一个问题中，我收到了删除所有复制机制的建议。实际上，我不想复制数据，因为代码是用于有限元分析的，需要大量内存。

有什么办法可以做到这一点吗？

标题类似于以下内容。

```
SomeClass {
    vector<int*> someVariable;
public:
    ~SomeClass();
    void threadedMethod(bool, bool); // Inside this method the 
                                     // member vector 'someVariable' is used.

    void someMethod();               // In this function the threadedMethod has
                                     // been used twice to make 2 different thread
}; 
```

someMethod 实现是，

```
void SomeClass::someMethod() {
    thread t1(&SomeClass::threadedMethod, *this, arg1, arg2);
    thread t2(&SomeClass::threadedMethod, *this, arg1, arg2);
    t2.join();
    t1.join();
} 
```

析构函数类似于以下内容，

```
SomeClass::~SomeClass() {
    int count  = someVariable.size();
    for(int i=0; i < count; i++) {
        delete someVariable[i];
    }
} 
```

threadMethod 访问变量。这些操作是数据并行的。结果，没有线程将写入同一个内存块。同样，读写内存是不同的。在那里，我认为我不需要任何类型的锁。

如您所见，我正在使用`*this`，这导致了很多副本。我真的需要避免它。任何人都可以建议任何其他方式让我避免复制吗？

如果您需要更多解释，请告诉我。如果在我的能力范围内，我会尽量详细说明。

我正在使用带有 OS X 10.8.3 的 Intel Mac。我在 Xcode 4.6.1 上编码。编译器是 Apple LLVM 4.2（默认编译器）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T07:44:13.610

参数*按值*传递给 的构造函数`std::thread`。因此，此声明：

```
std::thread t1(&SomeClass::threadFunction, *this, arg1, arg2);
//                                         ^^^^^ 
```

触发 的副本`*this`，这不是您想要的。但是，`std::thread`也可以接受*指向*应在其上调用成员函数的对象的指针，就像`std::bind`.

因此，通过传递`this`（而不是`*this`）作为参数，*指针*（而不是指向的对象）将按值传递并最终被复制。`SomeClass`如您所愿，这将不会触发 的副本构造。

因此，您应该将上述语句重写如下：

```
std::thread t1(&SomeClass::threadFunction, this, arg1, arg2);
//                                         ^^^^ 
```

# java - 如何根据对象 instanceof 选择要执行的操作？

> ID：15736145
> 
> 赞同：2
> 
> 时间：2013-04-01T00:27:23.293
> 
> 标签：java, oop, design-patterns

我有一些类的实现`Base`，所有对象都收集在一个`List<Base>`.

如何`action`根据`instanceof`这些对象调用特定对象，而不必使用详细`instanceof`检查？如何根据这些对象的实例选择要执行的服务方法，而不必关心在哪个对象上执行操作。应该以某种方式自动选择正确的服务方法，而无需进行类型转换或实例检查。

```
class Base;
class Foo extends Base;
class Bar extends Base;

class Service {
    List<Base> bases;

    public void someMethod() {
        for (Base base : bases) {
            //perform some instanceof dependend action.
            //these actions cannot be inside of any Base class as it makes use of other objects too.
            if (base instanceof Foo) {
                fooService.action((Foo) base);
            }
            if (base instanceof Bar) {
                barService.action((Bar) base);
            }
        }
    }
}

//custom service methods
class FooService {
    void action(Foo foo) {
    }
}

class BarService {
    void action(Bar bar) {
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:32:34.677

多态性是一种可能性。如果 Base 类包含一个抽象 action() 方法，您可以直接调用它，无需任何 if 语句。

另一个是注册表。对于 Base 的每个子类，您可以注册到服务类的映射。在 someMethod() 中，查找注册表中的类，获取对应的服务类，并调用它。

顺便说一句，冗长并不是 instanceof 语句的唯一问题。一旦创建了 Base 的新子类，您使用这些编写的代码就会中断。满足[Open/Closed 原则](http://en.wikipedia.org/wiki/Open/closed_principle)可以减少代码的脆弱性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T00:32:24.770

一种可能的解决方案是使用该`Visitor`模式。您需要将两个重载方法合并`FooService`到`BarService`一个类中。`action()`然后你需要为`accept()`每个`Foo`和`Bar`类添加一个方法，然后可以调用适当的`action()`方法。有关详细信息，请参阅[http://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)。

可能还有其他更合适的[设计模式](http://en.wikipedia.org/wiki/Software_design_pattern)可以解决这个问题。我建议你研究它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-25T23:34:17.590

我最接近解决这个问题的是：

```
class Base{};
class Foo extends Base{};
class Boo extends Base{}; 
```

额外的 BaseService 接口，因此每个服务类都使用相同的方法：

```
public interface BaseService<T extends Base> {

void action(T base);

} 
```

嘘服务：

```
public class BooService implements BaseService<Boo> {

public void action(Boo boo){
    System.out.println("Action performed by BooService");
    }
} 
```

食品服务：

```
public class FooService implements BaseService<Foo> {

public void action(Foo foo){
    System.out.println("Action performed by FooService");
    }
} 
```

附加的 ServiceSupplier 类，它将根据传递的对象调用适当的服务：

```
public class ServiceSupplier {

private Map<Class<? extends Base>, BaseService> services;

public ServiceSupplier(){
    initializeServiceMap();
}

public BaseService getServiceOfType(Class<? extends Base> clazz){
    return services.get(clazz);
}

private void initializeServiceMap() {
    services = new HashMap<>();
    services.put(Foo.class, new FooService());
    services.put(Boo.class, new BooService());
    }
} 
```

还有你的服务类：

```
public class Service {
List<Base> bases;
ServiceSupplier serviceSupplier;

public Service(){
    serviceSupplier = new ServiceSupplier();

    bases = new ArrayList<>(Arrays.asList(new Foo(), new Boo()));
}

public void someMethod() {
    bases.forEach(base -> serviceSupplier.getServiceOfType(base.getClass()).action(base));
    }
} 
```

似乎只是为了删除一些“if”语句，但拥有更多服务，您需要做的就是将它们添加到 `initializeServiceMap()`方法中。

# php - 如何从单独的目录回显图像？

> ID：15736147
> 
> 赞同：-1
> 
> 时间：2013-04-01T00:27:37.410
> 
> 标签：php, wordpress

所以我现在已经研究出如何从 MySQL 中回显图像。

现在我想想办法从一个单独的目录中回显图像？......在这种情况下是 WordPress。

我的目标是在我的 WordPress 博客上抓取任何具有特色图片的帖子，并将它们回显到我选择的页面上。

所以这是我到目前为止所拥有的：

```
echo "
<div class=\"pagination\" style=\"display:inline\"><ul style=\"background-color:#\"><li><div     class=\"span3_search\"><h2><a href='$link'><b>$title</b></a></h2><br><a href='$link'><img     id=\"result_img\" src=\"$image\" /></a><br /><p>$description</p><br />
<a href='$link'>$link<br /><br /></a><p></div></li></ul></div>
"; 
```

如何回显一个图像 src，它是我的特色图像所在的来源。

IE

```
echo "<img src="PHP WHICH SAYS GRAB WORDPRESS FEATURED IMAGES FROM THIS DIRECTORY etc">"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T00:49:21.543

您可以获取路径的图像，然后附加一个新路径；

```
$image = explode('/');
$image = $image[count($image)];

echo 'mynew/path/toimage/'.$image; 
```

要查看路径的所有部分，请执行；

```
echo '<pre>';
print_r($images);
echo '</pre>; 
```

# wcf - 用于处理身份验证和角色的 WCF 服务

> ID：15736148
> 
> 赞同：2
> 
> 时间：2013-04-01T00:27:40.737
> 
> 标签：wcf, security, authentication, authorization, roleprovider

我正在尝试创建一个简单的 WCF 服务来处理各种安全场景，但我不确定从哪里开始。

WCF 服务将托管在 IIS 上（很可能）。它需要由经过身份验证的活动目录用户和未经身份验证的用户（匿名/外部）访问。我需要能够访问这两种类型的各种方法，尽管经过身份验证的用户应该可以访问其他方法。

我希望能够检查 HttpContext.Current.User.Identity.IsAuthenticated （我认为这将是确定哪种用户类型的最简单方法 - 或者是 ServiceSecurityContext.Current.WindowsIdentity）并访问角色数据库。该服务将由 .net 4.0 网站（不是 webforms 应用程序，也不是 mvc）和其他可能是也可能不是 .net 的外部资源（例如，java 应用程序或 java 网站）访问。

我不清楚从哪里开始。什么类型的绑定、传输、安全模式。我可以在服务中使用会员/角色提供者（SimpleMembership 或旧的 asp.net 会员）吗？

如果我想拥有不同类型的匿名用户，是否需要将它们映射到不同角色的特定活动目录用户，或者我还可以包含某种用户名/密码来进行身份验证？

我还需要能够使用模拟，以便假设正确的权限，一个用户执行的操作可以看起来好像由另一个用户执行。

我一直在寻找各种选择并感到困惑。ADFS、WIF、Microsoft.IdentityModel.dll、ACS 2.0 等。

不知道什么是最好的，什么是矫枉过正的，什么会和不会满足需求，什么会相对容易实施。是否使用 SSL，如果是，如何设置服务 web.config 以及客户端 web.config

我知道这个问题很多，但至少如果我被指出了正确的方向，我可以停止寻找不起作用或过于复杂的解决方案，而专注于正确的解决方案。

# windows-phone-7 - Windows Phone - 为 PhoneApplicationPage 使用泛型类

> ID：15736150
> 
> 赞同：3
> 
> 时间：2013-04-01T00:28:06.487
> 
> 标签：windows-phone-7, xaml, windows-phone-8, windows-phone

我有一个由 AddPage.xaml 和 AddPage.xaml.cs 组成的页面。我想创建一个从 PhoneApplicationPage 扩展的通用类 AddPage，以外包一些重复的代码，如保存或取消。如果我将基类从 PhoneApplicationPage 更改为我的新泛型类，我会收到此错误：*“AddPage”的部分声明不得指定不同的基类。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T05:47:30.740

为此，您需要执行以下操作。

首先，创建你的基类

```
public class SaveCancelPhoneApplicationPage : PhoneApplicationPage
{
    protected void Save() { ... }
    protected void Cancel() { ... }
} 
```

然后，您的 AddPage 需要修改为从基类继承。需要这样做的主要地方是在代码 (AddPage.xaml.cs) 和 xaml 中

代码：

```
public partial class AddPage : SaveCancelPhoneApplicationPage  {  ... } 
```

xml:

```
<local:SaveCancelPhoneApplicationPage
    x:Class="MyPhone.Namespace.AddPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:MyPhone.Namespace" 
       <!-- other xaml elements -->
</local:SaveCancelPhoneApplicationPage> 
```

**更新**：根据评论添加的信息

如果您需要类似通用的功能并且必须使用 Page 来执行此操作（而不是 ViewModel），那么您仍然可以使用通用方法来执行此操作

```
public abstract class SaveCancelPhoneApplicationPage : PhoneApplicationPage
{
    protected override void OnNavigatedTo(blaa,blaa)
    {
        var obj = CreateMyObject();
        obj.DoStuff();
    }

    // You should know what your objects are, 
    // don't make it usable by every phone dev out there
    protected MyBaseObject MyObject { get; set; }

    protected T GetMyObject<T>() where T : MyBaseObject 
    {
        return MyObject as T;
    }
}

public class AddPage : SaveCancelPhoneApplicationPage 
{
    public AddPage()
    {
        MyObject = new MyAddObject();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:19:52.677

为了外包一些功能，您只需声明一些执行常见工作的添加类。拥有另一个页面并不能完成这项工作。

```
public class Add
{
    public bool SaveContent(string filename, string content)
{
    ....//some content
    return true;
}

public string ViewContent(string filename)
{
    string content="";
    .....
    return content;
}
} 
```

在您认为多余的地方添加这部分代码。

```
Add obj=new Add();
obj.SaveContent("myfile.txt","Hello.This is my content.");
string content("myfile.txt"); 
```

告诉我这是否是您的意图。

# php - 使用渲染部分 yii 框架进行问题验证

> ID：15736152
> 
> 赞同：2
> 
> 时间：2013-04-01T00:28:40.643
> 
> 标签：php, ajax, validation, renderpartial, yii-extensions

我正在使用渲染部分加载视图，但验证不起作用并且不显示错误消息。我试图解决 renderpartial 中的 actived processOUTput 问题，但不起作用。

这是我加载表单视图的索引视图

```
<?php echo CHtml::link('Crear Usuario', array('create'), array('id'=>'newUsuario')); ?>
<div id="modal" class="modal hide fade"></div>
<script>
$(document).ready(function() {
    $("#newUsuario").click(function() {
        event.preventDefault(); 
        $("#modal").load($("#newUsuario").attr("href"));
        $("#modal").modal({show:true});
    });
});
</script> 
```

这是我加载视图的操作

```
public function actionCreate() {
    $model = new Usuarios;
    // Uncomment the following line if AJAX validation is needed
    $this->performAjaxValidation($model);
    if(isset($_POST['Usuarios']))
    {
        $model->validate();
        $model->attributes=$_POST['Usuarios'];

        $_POST['Usuarios']['check_tipo'] == 1 ? $model->tipo = 'Administrador' : $model->tipo = 'Normal';
        $model->pass_php = md5($model->pass);
        $model->session = $model->generateSalt();
        $model->pass_hash= $model->hashPassword($_POST['Usuarios']['pass'], $model->session);

        $this->transaction = $model->dbConnection->beginTransaction();
        try {
            if($model->save()) {
                $this->transaction->commit();
                $this->actionIndex();
            }

        } catch(Exception $e) {
            $this->transaction->rollBack();
        }
    }
    $this->renderPartial('create', array('model'=>$model));
} 
```

这是表单的视图

```
 <h4 align="center">Nuevo Usuario</h4>
<div class="form">
    <?php
        $form=$this->beginWidget('CActiveForm', array(
            'id'=>'usuarios-form',
            'enableAjaxValidation'=>true,
            'enableClientValidation'=>true,
            'clientOptions'=>array(
                'validateOnSubmit'=>true,
            ),
        ));
    ?>
    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'email'); ?>
        <?php echo $form->textField($model,'email',array('size'=>60,'maxlength'=>255, 'placeholder'=>'Escriba su email')); ?>
        <?php echo $form->error($model,'email'); ?>

    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'check_tipo'); ?>
        <?php echo $form->checkBox($model,'check_tipo'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'nombre'); ?>
        <?php echo $form->textField($model,'nombre',array('size'=>60,'maxlength'=>255, 'placeholder'=>'Escriba su nombre')); ?>
        <?php echo $form->error($model,'nombre'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'pass'); ?>
        <?php echo $form->passwordField($model,'pass',array('size'=>60,'maxlength'=>255, 'placeholder'=>'Escriba su contraseña')); ?>
        <?php echo $form->error($model,'pass'); ?>
    </div>
</div>
<center>
    <?php echo CHtml::button('Close', array('class'=>'btn', 'data-dismiss'=>'modal', 'aria-hidden'=>true)); ?>
    <?php echo CHtml::submitButton($model->isNewRecord ? 'Create' : 'Save', array('class'=>'btn btn-primary')); ?>
</center>
<?php $this->endWidget(); ?> 
```

当我使用渲染验证和错误消息时，问题只是渲染部分。如果我的英语不好，请帮助我，对不起。

# scripting - 为什么 objshell 不能工作

> ID：15736153
> 
> 赞同：-1
> 
> 时间：2013-04-01T00:28:43.537
> 
> 标签：scripting, vbscript

```
Set objFSO=CreateObject("Scripting.FileSystemObject") 
outFile="C:\Program Files\number2.vbs" 
Set objFile = objFSO.CreateTextFile(outFile,True) 
objFile.WriteLine "Set objWshShell = CreateObject(""WScript.Shell"")" 
objFile.WriteLine "objWshShell.RegWrite ""HKCU\Software\Microsoft\Windows\CurrentVersion\Policies\Explorer\NoFileMenu"", 1, ""REG_DWORD"" " 
objFile.WriteLine "Set  objWshShell = Nothing" 
objFile.Close

------------------Below part doesnt work in script-------------------------------

 ObjFile.Attributes = objFile.Attributes XOR 2

---------------------------Below part doesnt work in script-------------------

Set objShell = Wscript.CreateObject("WScript.Shell")
objShell.Run "C:\Program Files\number2.vbs" 
Set objShell = Nothing 
```

当我执行 objshell.run 时，它说它找不到指定的文件，而对于 objfile 属性，它说它找不到属性的方法？我在没有运行部分的情况下运行了文件，它工作并创建了文件，所以我很困惑为什么如果它首先创建文件运行将无法工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:24:56.273

`TextStream` and `File` are different objects. You also missed quotes.

```
Set objFSO = CreateObject("Scripting.FileSystemObject")
outFile    = "number2.vbs"

' if the file exist...
If objFSO.FileExists(outFile) Then
    ' if it hidden...
    If objFSO.GetFile(outFile).Attributes And 2 Then
        ' force delete with DeleteFile()
        objFSO.DeleteFile outFile, True
    End If
End If

' create TextStream object (that's not a File object)
Set objStream = objFSO.CreateTextFile(outFile, True)
WScript.Echo TypeName(objStream) '>>> TextStream
objStream.WriteLine "MsgBox ""Test"" "
objStream.Close

' get the File object
Set ObjFile = objFSO.GetFile(outFile)
WScript.Echo TypeName(ObjFile)   '>>> File
' now you can access that File properties
' and change it attributes too
ObjFile.Attributes = objFile.Attributes XOR 2

' surround your path with quotes (if needs)
outFile = objFSO.GetAbsolutePathName(outFile)
If InStr(outFile, " ") Then
    outFile = Chr(34) & outFile & Chr(34)
End If
WScript.Echo outFile

Set objShell = CreateObject("WScript.Shell")
objShell.Run outFile 'run the file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T08:32:14.563

```
ObjFile.Attributes = objFile.Attributes XOR 2 
```

“对象不支持此属性或方法：'objFile.Attributes'”这一行的错误应该从表面上看。**TextStream**类没有名为*Attributes*的属性或方法。因此，错误消息。

```
objShell.Run "C:\Program Files\number2.vbs" 
```

在大多数工具和语言中，必须格外小心地处理包含空格的参数。在这种特殊情况下，参数必须用引号引起来：

```
objShell.Run """C:\Program Files\number2.vbs""" 
```

此外，您不妨考虑阅读 Microsoft 关于使用 WSH 运行程序的介绍性白皮书：[http ://technet.microsoft.com/en-us/library/ee156605.aspx](http://technet.microsoft.com/en-us/library/ee156605.aspx)

# r - 按钮提交 R 与闪亮

> ID：15736163
> 
> 赞同：5
> 
> 时间：2013-04-01T00:30:46.593
> 
> 标签：r, input, submit, shiny

我正在尝试实现一个表单来上传文件，但是当我单击提交按钮时开始执行操作，问题是一个奇怪的错误，我不知道它是什么，我做了一个例子教程，它没有问题，现在我正在实现相同但使用 index.html 并且它不起作用。

错误是：“if (input$uploadFasta == 0) return(NULL) 中的错误：参数长度为零”

我的 index.html 就像：

```
<form class="span12 menu-med-upload">
    <div class="row-fluid">
        <center>
          <div class="custom-input-file btn btn-inverse">
            <input type="file" size="1" id="fileFasta" class="input-file" />
          </div>
        </center>
        <button id="uploadFasta" type="button" class="btn action-button shiny-bound-input" >go!</button>
    </div>
</form> 
```

我的 server.R 就像：

```
output$table <- renderText({
    if(input$uploadFasta == 0)
        return(NULL)
    myRenderTable()
}) 
```

有人知道问题出在哪里，谢谢大家，如果这个话题以前是开放的，但我找不到，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T17:34:29.027

操作按钮是一个自定义输入绑定，我敢打赌它没有被加载。

在与 server.R 相同的目录中添加一个 global.R 文件，并让它包含以下内容：

```
addResourcePath(
    prefix='actionbutton', 
    directoryPath=system.file('actionbutton', 
                          package='shinyIncubator')) 
```

然后在您的 index.html 中，将以下内容添加到`<head>`：

```
<script src="actionbutton/actionbutton.js"></script> 
```

（与往常一样，请确保有一个明确的结束`</script>`标记——不要使用`<script />`。）

# python - 使用 interp2d 执行坐标映射/插值时遇到问题

> ID：15736165
> 
> 赞同：1
> 
> 时间：2013-04-01T00:30:55.190
> 
> 标签：python, scipy

我有一个本质上是 4 列的查找表：列 1、2 是各自的 xi,yj 坐标，它们映射到各自的第 3 列和第 4 列中的 x'i,y'j 坐标。

我的目标是提供一种方法，在第一列和第二列（xi，yj）的查找值范围内输入一些（xnew，ynew）位置，然后将该位置映射到插值（x'i，y' j) 来自 lut 的第 3 和第 4 列的位置范围。

我曾尝试使用 interp2d，但无法弄清楚如何将数组输入正确的格式。例如：我不明白为什么`scipy.interpolate.interp2d(x'i, y'j, [xi,yj] kind='linear')`给我以下错误：

```
ValueError: Invalid length for input z for non rectangular grid'. 
```

这似乎很简单，但我一直无法弄清楚。如果需要，我很乐意提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:47:30.177

`interp2d`要求插值函数为 1D，请参阅[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.interp2d.html)：

> **z** : 1-D ndarray 要在数据点处插值的函数的值。如果 z 是多维数组，则在使用前将其展平。

因此，当您输入 时`[xi,yj]`，它会从其`(2, n)`形状转换为`(2*n,)`，因此会出现错误。

您可以设置两个不同的插值函数，每个坐标一个。如果您的 lut 是一个 shape 数组`(n, 4)`，您可以执行以下操作：

```
x_interp = scipy.interpolate.interp2d(lut[0], lut[1], lut[2], kind = 'linear')
y_interp = scipy.interpolate.interp2d(lut[0], lut[1], lut[3], kind = 'linear') 
```

您现在可以执行以下操作：

```
new_x, new_y = x_interp(x, y), y_interp(x, y) 
```

# html - 我如何使用图像

> ID：15736169
> 
> 赞同：-5
> 
> 时间：2013-04-01T00:31:53.537
> 
> 标签：html, css

我有一个`NavBar`并且我需要图像`<li>`

如何使用`<li>`图像？

```
<div id="navBar1">
<ul>
    <!--INVERSE-->
    <li id="navTop4">Caixa</li>
    <li id="navTop3">Documentos -</li>
    <li id="navTop2">Fornecedor -</li>
    <li id="navTop1">Fabrica -</li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:36:30.713

```
#navbar1 ul {
    list-style-image:url('mypic.gif');
} 
```

# ruby-on-rails-3 - 如果 Rails 模型 has_many 孩子，我如何存储第一个的 id？

> ID：15736180
> 
> 赞同：1
> 
> 时间：2013-04-01T00:33:29.780
> 
> 标签：ruby-on-rails-3, nested-attributes

我是 Rails 的新手，所以我可能忽略了一些简单的东西。我有一个称为故事的 Rails 模型。每个故事都有_许多片段，每个片段都属于一个故事。我使用相同的表单来创建故事及其第一个片段，方法是使用表单的 fields_for 部分并将故事模型设置为 accept_nested_attributes_for :segments。我目前能够使用该表单同时创建故事和片段。

问题是每个故事还需要存储它的第一个片段的id，但是当我保存故事时，片段还没有保存，所以它还没有id可以存储在故事中，并且在提交表单后我无法找到该段的句柄，以便我可以在创建故事之前先保存该段。所以我的问题是**如何在故事中保存 first_segment_id 的记录？**

以下代码可能是相关的：

*在 app/models/story.rb*

```
class Story < ActiveRecord::Base
    attr_accessible :segments_attributes
    has_many :segments
    accepts_nested_attributes_for :segments
end 
```

*在 app/models/segment.rb*

```
class Segment < ActiveRecord::Base
  attr_accessible :words
  belongs_to :story
end 
```

*在 app/views/stories* */* _form.html.erb

 *```
<%= form_for(@story) do |f| %>

  #...stories fields...

  <%= f.fields_for :segments do |segment_form| %>
    <div class="field">
      <%= segment_form.label :words %><br />
      <%= segment_form.text_area :words %>
    </div>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**在应用程序/控制器**/故事*_controller.rb*

 **```
 def new
    @story = Story.new

    @segment = @story.segments.build

    # If I try replacing the above with @segment = @story.segments.create
    # then I get the error message "You cannot call create unless the 
    # parent is saved," which is problematic because I need to find some way 
    # to get the id of @segment to save in the parent story, but the segment
    # won't have an id until after it has been saved.  

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @story }
    end
  end

  def create
    @story = Story.new(params[:story])

    #  @segment.save
    #  @story.first_segment_id = @segment.id
    #  If I uncomment the above two lines, I get the error message 
    #  "undefined method `save' for nil:NilClass".  It appears that 
    #  @segment hasn't been passed from the "new" method above to 
    #  this method as a handle of the first segment created, so I'm not 
    #  able to save it to get an id for it before saving the story.  
    #  Is there some way to save the segment here?

    respond_to do |format|
      #...if @story.save...
    end
  end 
```

*表单提交的 params 哈希类似于：*

```
{ "story"=>{ Various_other_story_fields,
 "segments_attributes"=>{"0"=>{"words"=>"dfsdsa"}}},
 "commit"=>"Create Story"} 
```

有没有办法在故事中保存第一段的 id？我想也许我需要在我的故事模型中添加一个 before_create ，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:41:55.620

我会以不同的方式处理这个问题，添加一个数字`sort_order`列，`Segment`以便您不依赖`Segment`id 来确定它们的顺序。然后您可以在`Story`模型上定义类似以下内容，而不是显式引用数据库中的第一段：

```
def first_segment
   segments.order(:sort_order).first
end 
```

如果您确定需要将第一个片段 ID 存储在故事中，您可以`.save`让故事知道其 ID、保存其子级并知道其 ID。就像是：

```
def create
   @story = Story.new(params[:story])
   @story.save # Save the story and its child segment so that they both have IDs
   @story.first_segment_id = @story.segments.first.id
   @story.save
   ...
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:18:44.173

您应该能够执行以下操作：

```
class Story < ActiveRecord::Base
    attr_accessible :segments_attributes
    has_many :segments
    has_one :first_segment
    accepts_nested_attributes_for :segments
end

def new
    @story = Story.new

    @segment = @story.segments.build
    @story.first_segment = @segment
    ... 
```

您必须将 story_id 添加到您的分段表中。***

# php - Android JSON 从 PHP 获取数据

> ID：15736181
> 
> 赞同：1
> 
> 时间：2013-04-01T00:33:35.060
> 
> 标签：php, android, mysql, json, eclipse

有谁知道我做错了什么？我试着做几乎所有的例子。我只想使用 php 从服务器获取 lat 和 lon 坐标到我的 android 手机。

感谢您在高级方面的帮助

这是我遇到问题的代码部分：

```
public void connect()
{
    StrictMode.ThreadPolicy policy = new   
    StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    HttpClient httpclient = new DefaultHttpClient();

    // Prepare a request object
    HttpGet httpget = new HttpGet("SERVER URL"); 

    // Execute the request
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        // Examine the response status
        //Log.i("Info",response.getStatusLine().toString());  Comes back with HTTP/1.1 200 OK

        // Get hold of the response entity
        HttpEntity entity = response.getEntity();

        if (entity != null) {
            InputStream instream = entity.getContent();
            String result= convertStreamToString(instream);

            JSONArray arr = new JSONArray(result);
            JSONObject jObj = arr.getJSONObject(0);
            String lat = jObj.getString("Lat");
            Log.d("OutPut", jObj.getString("Lon"));
            Toast.makeText(this, lat, Toast.LENGTH_LONG).show();
            instream.close();
        }

    } catch (Exception e) {
        Log.e("Error",e.toString());
    }
} 
```

我无法从 JSONObject 中获取数据。我不断收到这个异常。

```
03-31 17:23:41.457: E/Error(317): org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONArray 
```

我服务器的 PHP 代码正在输出：

```
[{"Lat":"47.9255072","Lon":"-97.0846979","id":"34"}] 
```

这是我的 MainActivity 中的所有代码

```
package com.misterbusllc.misterbusllc;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;

import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;

import org.json.JSONArray;
import org.json.JSONObject;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

import android.os.Bundle;
import android.os.StrictMode;
import android.content.Intent;
import android.support.v4.app.FragmentActivity;
import android.util.Log;
import android.view.Menu;
import android.widget.SlidingDrawer;
import android.widget.SlidingDrawer.OnDrawerCloseListener;
import android.widget.SlidingDrawer.OnDrawerOpenListener;
import android.widget.Toast;

public class MainActivity extends FragmentActivity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    connect();

    //contactServer();

    final SlidingDrawer slidingDrawerCost = (SlidingDrawer) findViewById(R.id.slidingDrawerCost);
    final SlidingDrawer slidingDrawerInfo = (SlidingDrawer) findViewById(R.id.slidingDrawerInfo);

    GoogleMap map = ((SupportMapFragment)  getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

    LatLng latLng = new LatLng(47.922612,-97.060776);
    map.setMapType(GoogleMap.MAP_TYPE_NORMAL);
    map.addMarker(new MarkerOptions().position(latLng).title("MisterBus").snippet("MisterBus is currently here").icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_AZURE)));
    map.getUiSettings().setCompassEnabled(true);
    map.getUiSettings().setZoomControlsEnabled(true);
    map.animateCamera(CameraUpdateFactory.newLatLngZoom(latLng, 10));

    slidingDrawerCost.setOnDrawerOpenListener(new OnDrawerOpenListener() {
        @Override
        public void onDrawerOpened() {
            Intent intent = new Intent(getApplicationContext(), Cost.class);
            startActivity(intent);
        }
        });
        slidingDrawerCost.setOnDrawerCloseListener(new OnDrawerCloseListener() {

        @Override
        public void onDrawerClosed() {
            slidingDrawerCost.close();
        }
        }); 

        slidingDrawerInfo.setOnDrawerOpenListener(new OnDrawerOpenListener() {
            @Override
            public void onDrawerOpened() {
                Intent intent = new Intent(getApplicationContext(), info.class);
                startActivity(intent);
            }
            });
            slidingDrawerInfo.setOnDrawerCloseListener(new OnDrawerCloseListener() {

            @Override
            public void onDrawerClosed() {
                slidingDrawerInfo.close();
            }
            }); 

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public void connect()
{
    StrictMode.ThreadPolicy policy = new   
    StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);

    HttpClient httpclient = new DefaultHttpClient();

    // Prepare a request object
    HttpGet httpget = new HttpGet("SERVER URL"); 

    // Execute the request
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        // Examine the response status
        //Log.i("Info",response.getStatusLine().toString());  Comes back with HTTP/1.1 200 OK

        // Get hold of the response entity
        HttpEntity entity = response.getEntity();

        if (entity != null) {
            InputStream instream = entity.getContent();
            String result= convertStreamToString(instream);

            JSONArray arr = new JSONArray(result);
            JSONObject jObj = arr.getJSONObject(0);
            String lat = jObj.getString("Lat");
            Log.d("OutPut", jObj.getString("Lon"));
            Toast.makeText(this, lat, Toast.LENGTH_LONG).show();
            instream.close();
        }

    } catch (Exception e) {
        Log.e("Error",e.toString());
    }
}

    private static String convertStreamToString(InputStream is) {
    /*
     * To convert the InputStream to String we use the BufferedReader.readLine()
     * method. We iterate until the BufferedReader return null which means
     * there's no more data to read. Each line will appended to a StringBuilder
     * and returned as String.
     */
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    return sb.toString();
}

}//end of class 
```

PHP代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset=utf-8" http-equiv="Content-Type" content="application/json"; />
<title>Gps Send</title>
</head>
<body>

<?php
header('Content-type: application/json');
mysql_connect("localhost", "root","password"); 
mysql_select_db("misterbus");
$last =mysql_query("SELECT * FROM location WHERE ID = (SELECT MAX(id)  FROM location)");

while($row=mysql_fetch_assoc($last))
$output[]=$row;
 print(json_encode($output));

mysql_close();
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:36:25.570

您的 PHP 页面包含 HTML 标记：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Gps Send</title>
</head>
<body>

[{"Lat":"47.9255072","Lon":"-97.0846979","id":"34"}]
</body>
</html> 
```

因此，您得到的错误是因为 Android 无法正确理解响应（它假定纯 JSON，而不是 HTML）。您需要删除 HTML 标记，以便响应仅包含纯 JSON。

您可能还想设置一个标头，将其声明为 JSON 内容类型。你可以这样做：

```
header('Content-type: application/json'); 
```

将此代码放在第一个`<?php`标签之后，在其他所有内容之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T03:57:10.830

这是我个人项目中的一个类：http: [//developersfound.com/HttpPostThreadJSon.zip](http://developersfound.com/HttpPostThreadJSon.zip) 这个类只适用于动词 POST，但应该很容易重构以与其他动词一起使用。

```
package com.DevFound;

import org.apache.http.HttpResponse;
import org.apache.http.HttpVersion;
import org.apache.http.ProtocolVersion;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.message.BasicHttpResponse;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONTokener;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class HttpPostThreadJSon {
    private static final int SUCCESS = 1;
    private static final int FAILURE = 0;

    protected static JSONArray doInBackground(HttpPost HttpPostObj) {
        HttpClient HttpClientObj = new DefaultHttpClient();
        ProtocolVersion ProtocolVersionObj = new HttpVersion(1, 1);
        Integer codeVar = 0;
        String ReasonObj = "";
        HttpResponse HttpResponseObj = new BasicHttpResponse(ProtocolVersionObj, codeVar, ReasonObj);
        try {
            HttpResponseObj = HttpClientObj.execute(HttpPostObj);
        } catch (IOException e) {
            e.printStackTrace();
        }
        StringBuilder stringBuilder = new StringBuilder();
        String line;
        BufferedReader bufferedReader = null;
        try {
            bufferedReader = new BufferedReader(new InputStreamReader(HttpResponseObj.getEntity().getContent()));
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            while ((line = bufferedReader.readLine()) != null) {
                stringBuilder.append(line);
            }
        } catch (IOException e) {
            e.printStackTrace();
        }
        JSONTokener tokener = new JSONTokener(stringBuilder.toString());
        JSONArray result = null;
        try {
            result = new JSONArray(tokener);
            return result;
        } catch (JSONException e) {
            //e.printStackTrace();
        }
        return result;
    }
} 
```

从客户端类中，您必须使用以下内容构建帖子对象：

```
HttpPostObj = new HttpPost((DGSession.getSessionStr("HttpPost", getBaseContext()) + "login.php")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-16T10:07:19.953

> $last =mysql_query("SELECT * FROM location WHERE ID = (SELECT MAX(id) FROM location)");

我知道这个问题很久以前就解决了，但是您使用的 mysql 查询并不是获取结果的最佳方式。您在 Select 中执行 Select，这意味着它将在位置表中搜索两次。更好的方法是

“SELECT * FROM location ORDER BY id DESC LIMIT 1”

这将获取具有最高 id 的行，两个查询的结果仍然相等，但是仅使用 1 个 Select 的查询的执行时间比使用 2 个 Select 的查询快。

# java - onLocationChange() - 无法发送发布请求

> ID：15736188
> 
> 赞同：0
> 
> 时间：2013-04-01T00:35:11.567
> 
> 标签：java, android

我正在创建简单的 GPS 跟踪器。应用程序获取 gps 纬度/经度并将其发送到远程服务器上的 php。

```
@Override

public void onLocationChanged(Location loc)
{
   String infLat = Double.toString(loc.getLatitude());
   String infLon = Double.toString(loc.getLongitude());

   String Text = "My current location is: " +
     "Latitud = " + infLat +
     "Longitud = " + infLon;

   Toast.makeText( getApplicationContext(),
                   Text,
                   Toast.LENGTH_SHORT).show();

   uploadLoc(infLat, infLon); // calling method which sends location info
} 
```

这是uploadLoc：

```
public void uploadLoc(String a, String b) {
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://link to script");

    try {

        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("latitude", a));
        nameValuePairs.add(new BasicNameValuePair("longitude", b));
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);

    } catch (ClientProtocolException e) {
        //
    } catch (IOException e) {
       //
    }
} 
```

但我不断收到“应用程序已停止”。当我删除调用 uploadLoc 方法的行时，一切正常，并且 Toast 会随着位置的变化而更新。这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:27:10.223

将您的 Http 帖子放在单独的线程中。

每次您尝试将您的位置发布到远程服务器时，都需要一些时间，最终可能会阻止您的`onLocationChanged(Location loc)`执行，下次 LocationListener 会调用它。

您可以尝试在每次收到位置更新时启动一个新线程，解决方案的问题是，根据您的位置更新接收频率，您最终可能会收到这么多线程。但是，如果您要求每小时更新一次位置，这可能不是一个坏主意。

或者，您可以将所有网络发布请求放在一个队列中并逐个处理。您甚至可以使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)，也可以按照您的要求遵循其他设计模式套件。

关键是异步处理网络操作，因为这样的操作需要时间，在此期间它不会阻塞其他关键操作的执行。

# jquery - jQuery UI 菜单滚动

> ID：15736190
> 
> 赞同：3
> 
> 时间：2013-04-01T00:35:15.753
> 
> 标签：jquery, html, css, jquery-ui

我正在使用本机 jquery ui 菜单并试图让它滚动。我发现它实际上内置了这种行为（有点）。我不确定这是不是故意的。

[JSFiddle 演示](http://jsfiddle.net/brombomb/rn4rB/)

```
/////////////////////////////////// HTML ////////////////////////////////////////////

<div id="container">
    <ul id="menu">
        <div id="scrollup">
        <span class="ui-icon ui-icon-triangle-1-n"></span>
        </div>
        <li><a href="#">Item 1</a></li>
        <li><a href="#">Item 2</a></li>
        <li><a href="#">Item 3</a></li>
        <li><a href="#">Item 4</a></li>
        <li><a href="#">Item 5</a></li>
        <li><a href="#">Item 6</a></li>
        <li><a href="#">Item 7</a></li>
        <li><a href="#">Item 8</a></li>
        <li><a href="#">Item 9</a></li>
        <li><a href="#">Item 10</a></li>
        <li><a href="#">Item 11</a></li>
        <li><a href="#">Item 12</a></li>
        <li><a href="#">Item 13</a></li>
        <li><a href="#">Item 14</a></li>
        <li><a href="#">Item 15</a></li>
        <li><a href="#">Item 16</a></li>
        <li><a href="#">Item 17</a></li>
        <li><a href="#">Item 18</a></li>
        <li><a href="#">Item 19</a></li>
        <li><a href="#">Item 20</a></li>
        <li><a href="#">Item 21</a></li>
        <li><a href="#">Item 22</a></li>
        <div id="scrolldown">
        <span class="ui-icon ui-icon-triangle-1-s"></span>
        </div>
    </ul>
</div>

/////////////////////////////////// CSS ////////////////////////////////////////////

#container {
    height: 350px;
    background: #ccc;
}

#menu {
    max-height: 75%;
    width: 100px;
    padding: 25px 0;
    overflow: hidden;
    margin: 20px;
}

#menu #scrollup,
#menu #scrolldown {
    position: absolute;
    width: 16px;
    height: 16px;
    top: 15px;
    left: 113px;
}

#menu #scrolldown {
    top: 311px;
}

/////////////////////////////////// JQUERY //////////////////////////////////////////

$('#menu').menu().removeClass('ui-menu-icons'); 
```

这是我能想到的最好的，我对此并不满意。我不得不增加顶部和底部填充以允许更大的可滚动区域。这本身并不可怕，但并不理想。我最关心的是向我的用户展示这个列表是可滚动的。我已经使用 jquery ui 图标破解了一些显示箭头，但感觉不太对劲。通过将它们放在右侧，它们会模仿滚动条，但您不能单击它们。

理想情况下，我希望箭头居中，但是当您将它们悬停时，列表仍然可以滚动。通过使用跨度，我可以实现定位，但是文本在下面可见，看起来很糟糕。通过使用 div 它看起来更干净，但是整个区域都不能滚动。

我正在寻找一种更好、更清洁、更直观的方式来实现这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T00:59:45.217

这是侧面滚动，但显然这里没有js

```
 #menu {
          overflow-y: scroll;
          overflow-x: hidden;
          height: 200px;
          width: 200px;
        } 

  <ul id="menu">
        <li><a href="#">Item 1</a></li>
        <li><a href="#">Item 2</a></li>
        <li><a href="#">Item 3</a></li>
        <li><a href="#">Item 4</a></li>
        <li><a href="#">Item 5</a></li>
        <li><a href="#">Item 6</a></li>
        <li><a href="#">Item 7</a></li>
        <li><a href="#">Item 8</a></li>
        <li><a href="#">Item 9</a></li>
        <li><a href="#">Item 10</a></li>
        <li><a href="#">Item 11</a></li>
        <li><a href="#">Item 12</a></li>
        <li><a href="#">Item 13</a></li>
        <li><a href="#">Item 14</a></li>
        <li><a href="#">Item 15</a></li>
        <li><a href="#">Item 16</a></li>
        <li><a href="#">Item 17</a></li>
        <li><a href="#">Item 18</a></li>
        <li><a href="#">Item 19</a></li>
        <li><a href="#">Item 20</a></li>
        <li><a href="#">Item 21</a></li>
        <li><a href="#">Item 22</a></li>
    </ul> 
```

# mysql - MySQL LIMIT 1 返回空值

> ID：15736195
> 
> 赞同：2
> 
> 时间：2013-04-01T00:35:33.583
> 
> 标签：mysql

在这个问题上敲我的头，不知道如何解决。我需要从包含用户信息的团队表（不同的值）中为每个团队代码返回 1 行。

表用户可以根据团队代码有多个值，但我需要它只返回 1（任何一个，哪个都没有关系）。我试过了：

```
SELECT a.teamcode, a.area, c.uniqid, c.fullname, c.email
FROM teams a
LEFT JOIN 
(SELECT uniqid, CONCAT(first_name,  ' ', last_name ) AS fullname, email, teamcode from users LIMIT 1) c
on a.teamcode = c.teamcode
WHERE a.area= 'ZF15' 
```

我也试过max：

```
SELECT a.teamcode, a.area, c.uniqid, c.fullname, c.email
FROM teams a
LEFT JOIN 
(SELECT max(uniqid) as uniqid, CONCAT(first_name,  ' ', last_name ) AS fullname, email, teamcode from users) c
on a.teamcode = c.teamcode
WHERE a.area= 'ZF15' 
```

但是子查询从用户表返回空值。但是，当我删除限制和最大值时，我得到了用户表的值，但我得到了每个团队代码的多行。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:41:18.077

我认为这应该可行，在每个团队的 max(uniqid) 上自行加入用户：

```
SELECT a.teamcode, a.area, 
   c.uniqid, CONCAT(c.first_name,  ' ', c.last_name ) AS fullname, c.email
FROM teams a
   LEFT JOIN (
      SELECT MAX(uniqid) maxuniqid, teamcode
      FROM users 
      GROUP BY teamcode
   ) u on a.teamcode = u.teamcode
   LEFT JOIN users c on c.teamcode = u.teamcode 
       AND c.uniqid = u.maxuniqid
WHERE a.area= 'ZF15' 
```

这从 users 表中获取 max(uniqid)，按团队代码分组（每个团队为 1）。然后加入用户表以获取该用户的姓名和电子邮件。

# c++ - 是否可以使用枚举来访问数组？

> ID：15736200
> 
> 赞同：3
> 
> 时间：2013-04-01T00:36:24.100
> 
> 标签：c++, arrays, oop, data-structures, enums

将以下工作：

```
enum TileBmp {Mask, Grass, Sand, Snow, Swamp, Paved, Rock, Savannah, Lava}

ID2D1Bitmap* pBmpTile[TileBmp]; 
```

这会创建一个大小为 9 的数组，其中任何元素都可以使用其编号或名称访问？例如，pBmpTile[3] 和 pBmpTile[Snow] 是否都指向同一个 ID2D1Bitmap*？

我现在无法尝试，直到某些时候才能尝试。否则我会自己尝试。

如果这不起作用，是否有更清洁的替代方案

`ID2D1Bitmap* pBmpTile[9]`

和

```
ID2D1Bitmap* pBmpMask, pBmpGrass, pBmpSand, pBmpSnow, pBmpSwamp, pBmpPaved, pBmpRock, pBmpSavannah, pBmpLava; 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T00:40:47.273

`TileBmp`是一个*类型*，你的数组声明需要一个*数字*，而不是一个*类型*。

这将起作用，因为单个`enum`值**可以**转换为整数。

```
enum TileBmp {Mask, Grass, Sand, Snow, Swamp, Paved, Rock, Savannah, Lava, TILEBMP_COUNT};

ID2D1Bitmap* pBmpTile[TILEBMP_COUNT]; 
```

> pBmpTile[3] 和 pBmpTile[Snow] 是否都指向同一个 ID2D1Bitmap*？

在这个例子中，是的。

除非另有说明，否则 an 中的第一个值`enum`可以转换为，`0`并且每个其他枚举都`1`大于`enum`它之前的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:41:42.627

```
ID2D1Bitmap* pBmpTile[TileBmp]; 
```

不会工作。枚举名称不是主要表达式，不能用作数组大小。

但是，您可以使用枚举字段来访问数组元素，因为枚举字段映射到整数。例如：

```
 enum TileBmp {Mask, Grass, Sand, Snow, Swamp, Paved, Rock, Savannah, Lava};
  int A[10] = {0,1,2,3,4,5,6,7,8,9};
  std::cout << A[Sand]; //it will print 2 in this case. 
```

# android - 为手机和平板电脑设计布局

> ID：15736205
> 
> 赞同：0
> 
> 时间：2013-04-01T00:36:34.127
> 
> 标签：android

好的，我熟悉这个网站及其内容

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

但我仍然有问题。

我正在为从姜饼到果冻豆的手机和平板电脑设计布局。

我从一个基本的布局文件夹开始，为 Galaxy nexus 手机设计了所有内容。现在我回去添加平板电脑。这里的一个问题是我应该使用 layout-xlarge/layout-large 还是 layout-sw600dp/layout-sw720dp？我猜最小的宽度是我应该使用的。

但这不是问题。这个问题是我试图为 Galaxy Nexus (720x1280) 和 Nexus S (480x800) 做那种简单的事情。这些有很大的不同，但日食似乎并没有让我区分。

所以我只是想清楚我应该做些什么来做到这一点。这是我应该覆盖我想要的设备吗？

layout-hdpi layout-xhdpi layout-sw600dp (代替 layout-large) layout-sw720dp (代替 layout-xlarge)

做那些 layout-hdpi 和 layout-xhdpi 会分开 Nexus S 和 Galaxy Nexus 的布局吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:44:58.343

首先，layout-sw 基于`dp`，与密度无关的像素，而不是像素。您可以将其`dp`视为“实际尺寸”像素，即无论使用什么设备，1dp 都是相同的物理尺寸。

因此，拥有 720x1280 像素屏幕的 Galaxy Nexus 只有 360x640 dp 分辨率，手机和更高的 sw600+ 文件夹之间没有重叠。

large/xlarge 存储桶将继续在所有平板电脑上工作，但如果您需要更细粒度的支持，或者只在 Android 3.2+ 设备上使用平板电脑布局，那么您只需要 sw--dp 文件夹。您也可以同时使用这两种方法，而无需使用参考文件复制/粘贴您的 XML，如以下博客文章中所述。

有关如何支持多个屏幕的更多详细信息，请参阅[Supporting Multiple Screens 指南](http://developer.android.com/guide/practices/screens_support.html)，以及您为什么要使用新的 sw---dp 存储桶的一些原因，请[参阅 Android 开发人员博客文章宣布该功能](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:45:37.097

只需使用`layout-large`和`layout-xlarge`。当您正在开发布局并想知道它在特定设备上的外观时，只需更改视图，它就会从正确的文件夹中提取适当的 XML。

# magento - magento - 使用 local.xml 添加一个块

> ID：15736207
> 
> 赞同：1
> 
> 时间：2013-04-01T00:36:44.683
> 
> 标签：magento, templates, block, php

如果我有一个模板

```
 app\design\frontend\base\default\template\dir\template.phtml 
```

看起来像这样

```
<div class='block block-list'>  
    <div class='block-title'><strong><span>Some Block</span></strong></div>
        <div class='block-content'>  
            &nbsp;<?php echo "my content"; ?>
        </div>
    </div> 
```

如何使用 local.xml 在目录页面上显示它？这段代码不应该工作吗？

```
 <?xml version="1.0"?>
 <layout version="0.1.0">    
    <default>                   
       <reference name="right">
         <block  type="core/template" 
            name="somename"
            template="dir/template.phtml" />
      </reference>
    </default>
 </layout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:59:38.393

我认为您不能`<catalog_category_default translate="label">`在默认布局句柄中拥有自定义布局句柄，`<default>` 如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:37:14.617

您必须在该引用标记之前使用模板引用名称。

```
 <?xml version="1.0"?>
 <layout version="0.1.0">    
    <default>  
     <catalog_category_default translate="label">                 
       <reference name="right">
         <block  type="core/template" 
            name="somename"
            template="dir/template.phtml" />
      </reference>
     </catalog_category_default>
    </default>
 </layout> 
```

# bash - 用于在 bash printf 中着色的 ANSI 转义码

> ID：15736223
> 
> 赞同：12
> 
> 时间：2013-04-01T00:40:43.423
> 
> 标签：bash, shell

线条`8.`及`9.`以下让我感到困惑：

```
#!/bin/bash

a=foo
b=6
c=a
d="\e[33m"  # opening ansi color code for yellow text
e="\e[0m"   # ending ansi code
f=$d

printf "1\. foo\n"
printf "2\. $a\n"
printf "3\. %s\n" "$a"
printf "4\. %s\n" "${!c}"
printf "5\. %${b}s\n" "$a"
printf "6\. $d%s$e\n" "$a" # will be yellow
printf "7\. $f%s$e\n" "$a" # will be yellow
printf '8\. %s%s%s\n' "$d" "$a" "$e" # :(
printf "9\. %s%s%s\n" "$f" "$a" "$e" # :( 
```

是否可以使用`%s`扩展颜色变量并查看颜色开关？

输出：

```
1\. foo
2\. foo
3\. foo
4\. foo
5\.    foo
6\. foo
7\. foo
8\. \e[33mfoo\e[0m
9\. \e[33mfoo\e[0m 
```

**注意**：确实是*黄色*`6.`的`7.`

 ** * *

### 编辑

```
printf "10\. %b%s%b\n" "$f" "$a" "$e" # :) 
```

... 最后！这就是执行此操作的命令，感谢 Josh！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T00:44:05.847

您正在寻找可以扩展参数中的转义字符的格式说明符。方便地，bash 支持（来自`help printf`）：

```
%b        expand backslash escape sequences in the corresponding argument 
```

或者，bash 还支持一种特殊机制，通过该机制将执行转义字符的扩展：

```
d=$'\e[33m' 
```*

# java - 将多个数组列表保存并检索到文件中

> ID：15736225
> 
> 赞同：0
> 
> 时间：2013-04-01T00:40:48.850
> 
> 标签：java

嗨，我想知道这是否可能。我有 5 个多个数组列表。在我将信息添加到每个数组列表之后，是否可以使用 filechooser 将其保存为单个文件。我有 5 个数组列表，我将它们创建为来自不同类的对象。

```
hotelArrayObjects.getDahabArray()
hotelArrayObjects.getRomeArray()
hotelArrayObjects.getParisArray()
hotelArrayObject.getBerlinArray()
hotelArrayObjects.getNiceArray() 
```

想知道是否有任何方法可以做到这一点。我正在考虑使用 Filechooser 使其更加用户友好且更易于检索。

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:25:28.887

您可以使用 java.io.ObjectOutputStream 及其子类将对象写入文件。您可以使用 java.io.ObjectInputStream 及其子类将它们读回。您可以使用这些类中的 readObject() 和 writeObject() 方法。请注意，如果要将对象写入文件，则该对象的定义类应该是可序列化的。在您的情况下，您存储在 ArrayList 中的对象应该是可序列化的。

用于存储和检索对象的 Java 机制不需要使用 FileChooser 选择文件。您可以使用 java.io.File 类打开文件流。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:49:36.963

如果要将信息保存在 arraylist 中，可以执行一些 forloops 然后使用文件编写器

```
String s1;
for(int i=0; i<arraylist.length(); i++) {
   s1+=arraylist.get(i);
} 
```

重复重复然后使用这样的东西：

```
String finalString = s1+s2+s3+s4+s5;
FileWriter fwrite = new FileWriter("hotels.txt");
BufferedWriter out = new BufferedWriter(fwrite);
out.write(finalString); 
```

然后您可以使用 JFileChooser 保存该文件。

# java - 使用仿射变换旋转多边形

> ID：15736230
> 
> 赞同：0
> 
> 时间：2013-04-01T00:42:31.987
> 
> 标签：java, polygon

我目前正在尝试使用仿射变换类旋转多边形。使用旋转方法，多边形的图形表示会更新，但多边形的边界框不会更新。除了更新它的坐标之外，如何旋转多边形？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T00:46:50.257

创建一个新形状，而不是在绘制多边形时只旋转多边形。例如：

```
Polygon shape = new Polygon();
shape.addPoint(...);
....
Rectangle bounds = shape.getBounds();
AffineTransform transform = new AffineTransform();
transform.rotate(Math.toRadians(angle), bounds.width / 2, bounds.height / 2);

Path2D path = (shape instanceof Path2D) ? (Path2D)shape : new GeneralPath(shape);
Shape rotated = path.createTransformedShape( transform );
System.out.println(rotated.getBounds()); 
```

# javascript - 为什么我的 Angular.js $routeProvider 什么都不做？

> ID：15736234
> 
> 赞同：1
> 
> 时间：2013-04-01T00:43:42.677
> 
> 标签：javascript, angularjs, url-routing, single-page-application

我现在正在跟随 Egghead.io 上的视频学习 Angular.js。我在[$routeProvider video](http://egghead.io/video/angularjs-routeprovider-api/)，我的应用根本没有路由。

这是超基本的，这是脚本（app.js）：

```
var app = angular.module('myApp', []);

// routes
app.config(function ($routeProvider) {
    $routeProvider.when('/pizza', { template: 'Yum!!' });
});

app.controller('FirstCtrl', function ($scope) {
    $scope.data = { message: "Hello" };
}); 
```

和html：

```
<div ng-app="myApp">
    <div ng-controller="FirstCtrl">
    {{data.message + " world"}}
    </div>
</div>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.1.3/angular.min.js"></script>
<script src="app.js"></script> 
```

根据我的理解，`http://host/#/pizza`应该简单地显示“Yum!!” 因为我在模板中传递了一个字符串。虽然它似乎没有做任何事情，但我仍然得到由`FirstCtrl`.

为什么`$routeProvider`我的应用程序中没有做任何事情？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T00:45:52.637

您需要`ng-view`在希望 routeProvider 粘贴页面模板的位置放置一个元素。

```
<div ng-app="myApp">
    <div ng-controller="FirstCtrl">
        {{data.message + " world"}}
        <ng-view></ng-view>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-08T20:42:44.290

请注意，像下面这样指示它可以让您跨浏览器兼容。

```
<div ng-view> </div> 
```

或者，就此而言：

```
<ANY ng-view> </ANY> 
```

更多信息可在此处获得：http://docs.angularjs.org/api/ng.directive: [ngView](http://docs.angularjs.org/api/ng.directive:ngView)

# java - 扩展 AbstractTableModel 不更新 JTable 中的单元格内容

> ID：15736236
> 
> 赞同：0
> 
> 时间：2013-04-01T00:44:18.113
> 
> 标签：java, swing, jtable, abstracttablemodel

有人可以告诉我为什么我`JTable`没有用下面的模型更新吗？它第一次出现很好，但是当我输入保存在数组中的新数据时`int nh, string hNam, int vh, string proc_1 , string proc_2`，表不会用新数据更新。

```
public class TableModel extends AbstractTableModel {

    int numRows;
    String columnNames[] = {"NH", "Horse Names", "VH",
        "Proc. I", "Proc. II"};
    Object[][] myData;

    TableModel() {
        super();
        numRows = fnh;
        myData = new Object[fnh][5];

        for (int i = 0; i < fnh; i++) {
            for (int j = 0; j < 5; j++) {
                if (j == 0) {
                    myData[i][0] = (Integer) nh[i];
                } else if (j == 1) {
                    myData[i][1] = (String) hNam[i];
                } else if (j == 2) {
                    myData[i][2] = (Integer) vh[i];
                } else if (j == 3) {
                    myData[i][3] = (String) proc_1[i];
                } else {
                    myData[i][4] = (String) proc_2[i];
                }
            }
        }
    }

    @Override
    public int getColumnCount() {
        return columnNames.length;
    }

    @Override
    public int getRowCount() {
        return myData.length;
    }

    @Override
    public String getColumnName(int col) {
        return columnNames[col];
    }

    @Override
    public boolean isCellEditable(int row, int col) {
        return true;
    }

    @Override
    public Object getValueAt(int row, int col) {

        if (col == 0) {
            return nh[row];
        } else if (col == 1) {
            return hNam[row];
        } else if (col == 2) {
            return vh[row];
        } else if (col == 3) {
            return proc_1[row];
        } else {
            return proc_2[row];
        }
    }

    @Override
    public void setValueAt(Object value, int row, int col) {
        myData[row][col] = value;
        fireTableCellUpdated(row, col);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:48:47.390

如果您要更新 JTable 中的一行并`setValueAt`显式使用，而不仅仅是更改数据中的值。如果您要添加新数据，`JTable`然后在其中创建一个方法，`TableModel` 并重新创建大小比现有数组大 1 的新数据数组，用旧数据填充它，然后向其中添加新数据。然后开火`fireTableRowsInserted(int firstRow, int lastRow)`

# php - 开发始终运行的 PHP 脚本

> ID：15736237
> 
> 赞同：0
> 
> 时间：2013-03-31T17:53:12.373
> 
> 标签：php, console

（我们的服务器是基于 Linux 的）

我是一位经验丰富的 PHP 开发人员，但第一次我将开发一个始终运行并获取一些数据的机器人。

我将用一个简单（**和示例**）场景来解释我的应用程序。我有大约 2000 个网站 url，我的应用程序将访问这个 url 并记录网页的内容。此应用程序将工作 7 天 24 小时。当它完成 2000 个网站时，它将重新开始工作。

但我需要一些关于我的服务器的建议。如您所见，我的应用程序将*无限*运行，直到我关闭服务器。我可以用这个做这个*无限循环*：

```
while(true)
{
     APPLICATION CODES HERE
} 
```

但我认为这对服务器来说是个祸害 :) 有可能在服务器端做这样的事情吗？

我也认为使用*cronjobs*但它不适用于我的场景。因为我的脚本尽快重新开始工作，所以它完成了工作。我必须“**完成工作后重新**开始”，而不是“**每 30 分钟开始一次**”。因为我不知道，也许获取所有 2000 个网站需要 30 多分钟或不到 30 分钟。

我希望我解释得很好。

我也担心内存使用情况。如您所知，垃圾收集器会在每次 PHP 脚本停止后清理内存。但正如我所说，我的应用程序不会停止几天（也许几周）。所以垃圾收集器不会被触发。我在脚本末尾手动取消设置（ [unset() 函数）所有使用的变量。](http://php.net/manual/en/function.unset.php)够了吗？

我需要服务器管理员的一些建议 :)

**PS。**我将其开发为控制台应用程序，而不是 Web 应用程序。我可以从命令行执行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T20:41:44.300

批处理..将所有站点存储在csv或其他文件中，完成后标记它们，然后处理所有未标记的站点，然后处理所有标记的..等等。一次只说1或5个，启动每分钟来自 cron 的批处理脚本..

甚至不要尝试一次处理所有这些错误。任何错误，您都不会知道发生了什么。

甚至可以将作业存储在数据库中，存储处理统计信息等。允许微调和更好的报告。

您可能会遇到时间限制来尝试运行无限的 php 脚本，即使是从命令行也是如此。您的服务器管理员也会讨厌您。如果您没有正确释放资源，可能会遇到内存限制.. 用 php 很容易完成。

阅读：[http ://www.ibm.com/developerworks/opensource/library/os-php-batch/](http://www.ibm.com/developerworks/opensource/library/os-php-batch/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T00:59:56.850

您的脚本可以只在列表中运行一次并退出。这样，可以释放 php 所持有的任何资源。

然后有一个shell脚本在无限循环中调用php脚本。

由于 php 不是为长时间运行的任务而设计的，我不确定垃圾收集是否可以完成任务。每次运行后退出将迫使它释放所有内容。

# objective-c - Objective C HTTP Post请求参数在应用程序和服务器之间丢失

> ID：15736257
> 
> 赞同：1
> 
> 时间：2013-04-01T00:48:18.103
> 
> 标签：objective-c, xcode, post

我正在尝试从我的 iOS 应用程序向服务器发送一个发布请求。该请求在使用 curl 时有效：

```
curl -d "uid=1&type=robbery&x=41.66505&y=-93.73046" http://thawing-ravine-5632.herokuapp.com/sos 
```

这是发出请求的 Objective-C 代码：

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc]
                                    initWithURL:[NSURL
                                                 URLWithString:@"http://thawing-ravine-5632.herokuapp.com/sos"]];

    [request setHTTPMethod:@"POST"];
    [request setValue:x
   forHTTPHeaderField:@"x"];
    [request setValue:y
   forHTTPHeaderField:@"y"];
    [request setValue:type
   forHTTPHeaderField:@"type"];
    [request setValue:uid
   forHTTPHeaderField:@"uid"];

    NSURLConnection * postOutput =[[NSURLConnection alloc]
     initWithRequest:request 
     delegate:self]; 
```

最后， didReceiveData 记录以下内容：

```
2013-03-31 20:29:32.248 THST Mobile[14720:11c03] connectionDidReceiveData {"student_found":0,"school_found":0,"officer_found":0,"text_sent":0,"uid":0,"x":0.0,"y":0.0,"type":null} 
```

但是在发出请求之前记录变量表明它们确实在发出请求之前在应用程序中实例化。通过 SSH 连接到服务器表明在收到请求时它们都只是 nil 或空字符串。所以我的Objective-C代码发出post请求有问题——可能是我设置参数的方式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T00:51:38.990

您将值设置为标头，而不是请求的正文。

```
NSString *params = @"x=1&y=bla&z=foo";
[request setHTTPMethod:@"POST"];
[request setHTTPBody:[params dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# python - 为什么我不能更改列表中的列表？

> ID：15736259
> 
> 赞同：0
> 
> 时间：2013-04-01T00:48:37.070
> 
> 标签：python, list, python-2.7

为什么这不起作用？

```
In [28]: my_list_o_lists = [ [], ["cow", "says", "moo"], [1, 2, 3] ]

In [29]: print(my_list_o_lists)
[[], ['cow', 'says', 'moo'], [1, 2, 3]]

In [30]: m0 = my_list_o_lists[0]

In [31]: m0 = [ "Where is my cow?", "No idea!" ]

In [32]: print(my_list_o_lists)
[[], ['cow', 'says', 'moo'], [1, 2, 3]] 
```

我想将列表中的第一项更改为第 31 行中发布的另一个列表。但它不起作用。非常困惑和谷歌搜索没有帮助。

我在 python 2.7.3 上（在上面的例子中使用 ipython 0.13.1）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T00:54:46.477

您不会更改列表，而是将`m0`名称重新绑定到新列表。要更改列表，您需要更改其内容（如`m0.append('')`）或替换`my_list_o_lists[0]`为新列表（如`my_list_o_lists[0] = ['']`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T00:54:52.530

m0 是一个变量，而不是指向 my_list_o_lists 索引 0 的指针。更改 m0 不会影响 my_list_o_lists。如果你想替换 my_list_o_lists[0]，你需要做

`my_list_o_lists[0] = m0`

完整代码应如下所示：

```
my_list_o_lists = [ [], ["cow", "says", "moo"], [1, 2, 3] ]
m0 = [ "Where is my cow?", "No idea!" ] # Assigning value to variable m0
my_list_o_lists[0] = m0                 # Assigning value of m0 to list index 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T00:59:22.860

问题与`m0`您使用的变量有关。在 Python 中，变量只是附加到对象的名称。如果您分配给变量，您只需将名称附加到不同的对象。

在这种情况下，您首先将名称附加`m0`到`my_list_o_lists[0]`. 然后在下一步中，您要将名称重新绑定到一个新的列表对象。这不会使原始对象（仍在 中`my_list_o_lists`）消失，也不会更改原始对象。只有名称`m0`被移动。

如果你想解决你的问题，你需要做两件事之一。要么直接重新分配以下内容`my_list_o_lists[0]`：

```
my_list_o_lists[0] = [ "Where is my cow?", "No idea!" ] 
```

或者，修改现有列表，而不是替换它：

```
m0 = my_list_o_lists[0]
m0[:] = [ "Where is my cow?", "No idea!" ] # slice assignment reuses the list 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-01T01:33:23.843

这是因为`m0`具有 的值`my_list_o_lists[0]`，但不是对它的引用。
所以，操纵`m0`不会影响`my_list_o_lists[0]`.
看到这个：

```
>>> my_list_o_lists = [ [], ["cow", "says", "moo"], [1, 2, 3] ]
>>> m0 = my_list_o_lists[0]
>>> m0 = [ "Where is my cow?", "No idea!" ]
>>> print m0
['Where is my cow?', 'No idea!']
>>> print my_list_o_lists[0]
[] 
```

要解决这个问题，只需操纵`my_list_o_lists[0]`而不是操纵`m0`.
否则，您可以操纵`m0`并为其赋值`my_list_o_lists[0]`。
就像是：

```
>>> my_list_o_lists[0] = m0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-01T00:58:17.943

仅当将整个列表分配给另一个时，两个变量名称才指向单个列表。例如）

```
a=[1,2,3,4]
b=a
b.append(10)
print a 
```

输出

```
[1,2,3,4,10] 
```

但是由于您只分配了列表的单个元素，因此新变量指向不同的地址，因此更改不起作用。所以用

```
my_list_o_lists[0]=[''] 
```

试试这个

```
a=[[],[],[]]
b=a
b[0]=[1,2,3,4]
print a 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T01:07:03.330

你有点不正常了。尝试这样的事情：

```
>>> m0=['Where is my cow?', 'No idea!']
>>> LoL=[ [], ["cow", "says", "moo"], [1, 2, 3] ]
>>> LoL[0]=m0
>>> LoL
[['Where is my cow?', 'No idea!'], ['cow', 'says', 'moo'], [1, 2, 3]] 
```

或者：

```
>>> LoL=[m0, ["cow", "says", "moo"], [1, 2, 3] ]
>>> LoL
[['Where is my cow?', 'No idea!'], ['cow', 'says', 'moo'], [1, 2, 3]] 
```

# ios - 访问 Obj-c 中的对象

> ID：15736263
> 
> 赞同：0
> 
> 时间：2013-04-01T00:49:24.023
> 
> 标签：ios, objective-c, nsmutabledictionary

这是我的代码

```
-(NSMutableDictionary*)checkArrayForObject:(NSArray *)array withX:(int)mapX withY:(int)mapY withWith:(int)w withHeight:(int)h
{
    NSMutableDictionary *tempDictionary = [[NSMutableDictionary alloc] init];

    int cellWidth2 = w;
    int cellHeight2 = h;

    NSMutableArray *temp = [[NSMutableArray alloc ] initWithCapacity:(cellWidth2*cellHeight2)];

    //lets fill the array with something
    for (int iy=0; iy<cellWidth2; iy++) {
        for (int ix=0; ix<cellHeight2; ix++) {
            [temp addObject:[NSNull null]];
        }
    }

    Boolean overObjectYES = YES;
    Boolean overObjectNo = NO;

    [tempDictionary setObject:[NSNumber numberWithBool:overObjectNo] forKey:@"collision"];
    [tempDictionary setObject:temp forKey:@"regionArray"];

    NSLog(@"mapx, %d", mapX);
    NSLog(@"mapy, %d", mapY);
    NSLog(@"cell width, %d", cellWidth2);
    NSLog(@"cell height, %d", cellHeight2);

    int xx = 0;
    int yy = 0;

     NSLog(@"DO CHECK");

    for (int iy=mapY; iy<(mapY + cellHeight2); iy++) {

        xx = 0;

        for (int ix=mapX; ix<(mapX + cellWidth2); ix++) {

            //make index
            int ii = (iy*mapWidth)+ix;

             NSLog(@"array index, %d", ii);

            if([array objectAtIndex:ii] != [NSNull null])
            {

                NSLog(@"OVERLAPPING OBJECT");

                [tempDictionary setObject:[NSNumber numberWithBool:overObjectYES] forKey:@"collision"];

                //get object in real array
                NSMutableDictionary *obj = [array objectAtIndex:ii];

                //place in temp in same relative position

                //make index
                int ii2 = (yy*cellWidth2)+xx;

                if(ii2 < [temp count])
                {
                    [temp insertObject:obj atIndex:ii2];
                }
            }

            xx++;
        }

        yy++;
    }
    return tempDictionary;
} 
```

在另一种方法中，我调用此方法，但随后我试图访问已存储在数组中的对象，但我似乎无法访问它，或者上面的代码（insertObject:obj 行）似乎没有插入任何东西。

这是我用来访问上述内容的代码......

```
 NSMutableDictionary *regionDictionary = [sharedInstance checkArrayForObject:sharedInstance.playerObjects  withX:sharedInstance.mapTileX withY:sharedInstance.mapTileY withWith:1 withHeight:1];

            Boolean overlap = [[regionDictionary objectForKey:@"collision"] boolValue];

            if(overlap == YES)
            {
               [self setupInfoMsg:[[regionDictionary objectForKey:@"region"]objectAtIndex:0]];
            } 
```

当我单步执行该代码并进入 setupInfoMSg 时，参数 = 0。

我是 Obj-c 的新手，所以这可能是一个简单的错误。

# android - AIR Android GCM ANE MismatchSenderId

> ID：15736269
> 
> 赞同：0
> 
> 时间：2013-04-01T00:50:26.987
> 
> 标签：android, actionscript-3, air, push-notification, google-cloud-messaging

有没有人能够让 Android AIR 扩展[http://myappsnippet.com/gcm/](http://myappsnippet.com/gcm/)工作？我很清楚如何设置 GCM。但是当使用上面的扩展时，我无法停止收到`MismatchSenderId`错误。

我用过[https://github.com/freshplanet/ANE-Push-Notification](https://github.com/freshplanet/ANE-Push-Notification)

它有效。

我还使用[了 http://afterisk.wordpress.com/2012/09/22/the-only-free-and-fully-functional-android-gcm-native-extension-for-adobe-air/](http://afterisk.wordpress.com/2012/09/22/the-only-free-and-fully-functional-android-gcm-native-extension-for-adobe-air/)

它有效。

我什至在从未安装过我的应用程序的“干净”手机上尝试过[http://myappsnippet.com/gcm/](http://myappsnippet.com/gcm/)`MismatchSenderId` ，但仍然出现错误。

如果我使用通过注册其他分机之一获得的注册 ID，则可以使用上述 ANE 接收它。[但是如果我使用来自http://myappsnippet.com/gcm/](http://myappsnippet.com/gcm/)的注册 ID，它会给我同样的`MismatchSenderId`错误。

有人对这种特殊的 ANE 有任何经验吗？我一步一步地仔细阅读了这个例子。我需要这个来工作，因为它实际上在通知上使用了图标、声音和振动。没有它本质上会使其他 ANE 变得毫无价值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T06:33:41.167

问题已解决。我刚刚将更新后的 .ane 通过电子邮件发送给所有遇到类似问题的开发人员 :) 让我知道您的问题是否现在也已解决？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T11:17:15.457

[如果您从 Google 收到不匹配的错误，除了http://myappsnippet.com/gcm/](http://myappsnippet.com/gcm/)的评论部分中解释的原因之外，原因之一可能是因为您已经在应用程序上测试了其他一些 GCM 扩展！你看，如果你已经在你的应用程序中使用了一些其他的 GCM 扩展，现在你正在尝试使用我们的扩展，谷歌会抛出一个不匹配的错误，因为你的 RegId 仍然缓存在谷歌服务器中。你怎么修呢？尝试使用 unregister() 方法从 GCM 注销您的应用程序，然后等待几个小时甚至几天，以便刷新 Google 服务器或更改您的应用程序包名称，您会发现它可以正常工作。我希望你能发现这个通知有用。

# java - Apache Sling 循环重复

> ID：15736273
> 
> 赞同：0
> 
> 时间：2013-04-01T00:52:13.713
> 
> 标签：java, sling

有谁知道为什么下面的代码会输出每个导航元素中的 2 个。

```
//get the full path to the current page
String home = Text.getAbsoluteParent(currentPage.getPath(), 2);    
int absParent = currentStyle.get("absParent", 1);

//checks for invalid and hidden pages.
PageFilter filter = new PageFilter(request);

//utility class that provides an iterator over navigation elements

Navigation nav = new Navigation(currentPage, absParent, filter, 1);

for (Navigation.Element i: nav) {  
%><li <%= i.hasChildren() %>><a href="<%= i.getPath() %>.html"><%= i.getTitle() %></a>      <%
          break;
 } 
```

但是，如果我在 for 循环中添加一个 switch 语句，它会像它应该显示的那样显示每个导航元素的 1 个。

```
for (Navigation.Element i: nav) {  
     switch (i.getType()) {
     case ITEM_BEGIN:
          %><li <%= i.hasChildren() %>><a href="<%= i.getPath() %>.html"><%=     i.getTitle() %></a><%
          break;
  }
 } 
```

这让我发疯，非常感谢任何帮助！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-02-06T04:33:09.143

你可以试试这个代码片段：

```
 <%
    Navigation navRoot = new Navigation(currentPage,2,new PageFilter(request),4);
    for (Navigation.Element e: navRoot) {
        switch (e.getType()) {
            case NODE_OPEN:
            %><ul><%
                break;
            case ITEM_BEGIN:
                %><li ><a href="<%= e.getPath() %>.html"><%=     e.getTitle() %></a> <%
                break;
            case ITEM_END:
            %></li><%
                break;
            case NODE_CLOSE:
            %></ul><%
                break;
        }
    }

    %> 
```

开箱即用实例中的示例组件位于：/apps/geometrixx/components/topnav

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T12:36:48.590

我不知道每个导航元素中有 2 个的确切原因。但是关于“ ”的[CQ5 文档](http://dev.day.com/docs/en/cq/current/javadoc/index.html?com/day/cq/wcm/foundation/Navigation.html)`Navigation`指出

“一个导航元素反映了一个页面，并且可以有不同`Navigation.Element.Types`的 。请注意，对于不同的元素类型，可能会返回 4 次相同的页面。这在绘制导航时提供了最大的灵活性。”

对于元素类型，可能会返回 2 次相同的元素。如果您放置 switch-case 块，则您正在选择特定的元素类型，因此只显示一次。

也许你的答案的关键在于`Navigation.Element.Types`。

# php - 代码中的特殊字符 - PHP

> ID：15736275
> 
> 赞同：0
> 
> 时间：2013-04-01T00:52:42.990
> 
> 标签：php, xml, utf-8, simplexml

在我的代码中，我必须显示对象的某些元素（一个 xml 文件），但我遇到的问题是元素的名称包含特殊字符，如“é”、“à”、“è”、“ç”等...

所以当我尝试例如 t 显示时：

```
echo $xml->CoordonnéesNum->Téléphone; 
```

它不起作用，所以我必须把它改成这样：$xml->Coor->Tel //没有特殊字符

但我有数千个 xml 文件，这些元素以这些特殊字符命名，我无法手动更改它们

我不得不提到我是 php 新手：

所以，如果你能帮助解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T00:53:48.723

试试这个：

```
echo $xml->{"CoordonnéesNum"}->{"Téléphone"}; 
```

# symfony - 如何显示数据库中特定用户名的数据？

> ID：15736278
> 
> 赞同：1
> 
> 时间：2013-04-01T00:52:47.553
> 
> 标签：symfony, symfony-2.1

在我的索引页面上显示了不同的用户。我想要实现的是当有人单击用户名以重定向到显示用户信息的其他页面上时。这是 twig 代码的一部分，它将用户重定向到 hello 路由。

```
{% for user in users %}
<strong><em><a href="{{ path('hello') }}"> {{ user.username}}</a> 
```

这是你好路线：

```
hello:
pattern: /hello
defaults: {_controller:AcmeWebBundle:Default:hello } 
```

我不知道如何在控制器中实现这一点。我可以使用为其他功能的用户存储信息的变量，还是我需要进行数据库查询？以及该查询如何针对显示的特定用户？另外是实体的一部分。谢谢。

```
<?php

namespace Acme\Bundle\WebBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * baza
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class baza
{
    /**
     * @var integer
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string
     *
     * @ORM\Column(name="username", type="string", length=30)
     */
    private $username;

    /**
     * @var string
     *
     * @ORM\Column(name="password", type="string", length=30)
     */
    private $password;

    /**
     * @var string
     *
     * @ORM\Column(name="od", type="string", length=30)
     */
    private $od;

    /**
     * @var string
     *
     * @ORM\Column(name="do", type="string", length=30)
     */
    private $do;

    /**
     * @var float
     *
     * @ORM\Column(name="cena", type="float")
     */
    private $cena;

    /**
     * @var string
     *
     * @ORM\Column(name="comment", type="text")
     */
    private $comment;

    /**
     * @var integer
     *
     * @ORM\Column(name="rating", type="integer")
     */
    private $rating;

    /**
     * @var \DateTime
     *
     * @ORM\Column(name="date", type="date")
     */
    private $date;

    /**
     * @var string
     *
     * @ORM\Column(name="car", type="string", length=20)
     */
    private $car; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T04:05:01.813

在你的模板中试试这个：

```
{% for user in users %}
<strong><em><a href="{{ path('hello', {"id": user.id}</a> 
```

这在你的路由中：

```
hello:
pattern: /hello/{id} 
```

并且您的控制器将具有以下内容：

```
public function helloAction(Request $request, $id) 
```

然后在您的控制器中按 id 检索用户。这和其余的都可以在[书中](http://symfony.com/doc/current/book/index.html)推断出来。

希望这可以帮助

# javascript - 显示 Javascript 图像从文本链接淡入效果

> ID：15736279
> 
> 赞同：1
> 
> 时间：2013-04-01T00:53:36.463
> 
> 标签：javascript

我有一个简单的菜单，它根据您将鼠标光标悬停在哪个链接上显示不同的图像。现在我希望出现的图像会淡入，以便看起来更好，但我对 Javascript 还不是很熟悉，所以我想知道是否有人可以帮助我。

到目前为止，这是我的代码：

Javascript：

```
if (document.images) {

image2 = new Image
image3 = new Image
image4 = new Image
image5 = new Image
image6 = new Image
image7 = new Image
image8 = new Image
image9 = new Image
image10 = new Image

image1.src = "imgs/Categories/1.jpg" 
image2.src = "imgs/Categories/2.jpg"
image3.src = "imgs/Categories/3.jpg"
image4.src = "imgs/Categories/4.jpg"
image5.src = "imgs/Categories/5.jpg"
image6.src = "imgs/Categories/6.jpg"
image7.src = "imgs/Categories/7.jpg"
image8.src = "imgs/Categories/8.jpg"
image9.src = "imgs/Categories/9.jpg"
image10.src = "imgs/Categories/10.jpg"

} 
```

这是HTML：

```
<ul class="menu">
          <li><a href="#" onMouseover="document.imagename.src=image1.src",  onMouseout="document.imagename.src=image10.src">Link 1</a></li>
          <li ><a href="#" onMouseover="document.imagename.src=image2.src" onMouseout="document.imagename.src=image10.src">Link 2 </a></li>
          <li><a href="#" onMouseover="document.imagename.src=image3.src" onMouseout="document.imagename.src=image12.src">Link 3 </a></li>
          <li><a href="#" onMouseover="document.imagename.src=image4.src" onMouseout="document.imagename.src=image10.src"> Link 4 </a></li>
          <li><a href="#" onMouseover="document.imagename.src=image5.src" onMouseout="document.imagename.src=image10.src">Link 5 </a></li>
          <li><a href="#" onMouseover="document.imagename.src=image6.src" onMouseout="document.imagename.src=image10.src">Link 6 </a></li>
          <li><a href="#" onMouseover="document.imagename.src=image7.src" onMouseout="document.imagename.src=image12.src">Link 7 </a></li>
          <li><a href="#" onMouseover="document.imagename.src=image8.src" onMouseout="document.imagename.src=image10.src">Link 8 </a></li>
          <li><a href="#" onMouseover="document.imagename.src=image9.src" onMouseout="document.imagename.src=image10.src">Link 9</a>
          </li>
          </ul> 
```

谢谢！努诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:06:28.323

您可以为此使用 jQuery 淡入和 jQuery 淡出。

这是一个例子： http: [//kaidez.com/tutorial-simple-jquery-fade-in-fade-out/](http://kaidez.com/tutorial-simple-jquery-fade-in-fade-out/)

javascript 部分看起来有点像这样：

```
<script src="http://code.jquery.com/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function() { 
    $('#picOne').fadeIn(1500).delay(3500).fadeOut(1500);
    $('#picTwo').delay(5000).fadeIn(1500);
});
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:11:00.017

我会将您所有的 javascript 从 html 中提取出来并使用 jquery。

```
<script src="http://code.jquery.com/jquery-1.4.4.min.js" type="text/javascript"></script>

<script type="text/javascript">

    $('.menu li').mouseover(function() {
       whichItem = $(this).index();
       $('body').animate({ background-image: 'url(imgs/Categories/'+whichItem+'.jpg)' }, "slow");
    });
</script> 
```

HTML

```
 <ul class="menu">
         <li><a href="#">Link 1</a></li>
         <li><a href="#">Link 2</a></li>
         <li><a href="#">Link 3</a></li>
         <li><a href="#">Link 4</a></li>
          ...      
   </ul> 
```

# c++ - 这个带胡子的笑脸表情是什么：“<:]{%>”？

> ID：15736282
> 
> 赞同：305
> 
> 时间：2013-04-01T00:54:23.677
> 
> 标签：c++, expression, emoticons, digraphs

我遇到了以下程序，它编译时没有错误甚至警告：

```
int main(){
  <:]{%>; // smile!
} 
```

[活生生的例子。](http://ideone.com/inXuVc)

程序是做什么的，那个笑脸是什么？

* * *

## 回答 #1

> 赞同：360
> 
> 时间：2013-04-01T00:56:13.927

该程序使用[有向图](http://en.wikipedia.org/wiki/Digraphs_and_trigraphs)来表示以下内容：

```
[] {}; 
```

这是一个什么都不做的 lambda 表达式。相应的符号具有以下等价物：

```
<: = [
%> = } 
```

尽管现在通常不需要它们，但当您的键盘缺少使用 C++ 的基本源字符集（即图形字符集）所需的某些键时，二合字母很有用。组成有向图的字符组合作为单个标记处理。这反过来弥补了任何装备不足的键盘或其他此类硬件或软件。

* * *

## 回答 #2

> 赞同：297
> 
> 时间：2013-04-01T00:56:06.740

这是一个使用有向图伪装的空 lambda。普通的 lambda 人没有胡须。

* * *

## 回答 #3

> 赞同：68
> 
> 时间：2013-04-01T00:59:42.330

该程序使用[digraphs](http://en.wikipedia.org/wiki/Digraphs_and_trigraphs)，它允许使用可能没有 C++ 通常使用的字符的键盘（或文本编码）进行 C++ 编程。

代码解决了这个问题：

```
int main(){
  []{}; // smile!
} 
```

* * *

## 回答 #4

> 赞同：62
> 
> 时间：2013-04-03T11:45:28.300

> ```
> int main(){
>   <:]{%>; // smile!
> } 
> ```

它基本上是一个使用[有向图的](http://en.wikipedia.org/wiki/Digraphs_and_trigraphs)[Lambda 表达式](http://en.wikipedia.org/wiki/C++11#Lambda_functions_and_expressions)（Lambda 表达式是[C++11](http://en.wikipedia.org/wiki/C++11)的功能之一）（有向图和三联图都适用于 C++）：

```
[] {}; 
```

仅使用有向图：

```
<:]<%}; 

<:]<%%>;

[:>{%>; // like my cubic hat?

[:><%};

[:><%%>; 
```

将它们与三字母组合：

```
<:??)<%??>; // popeye

??(:>{??>; // pirate 
```

# php - PHP JSON 无响应码

> ID：15736283
> 
> 赞同：1
> 
> 时间：2013-04-01T00:54:29.527
> 
> 标签：php, jquery, ajax, json

任何人都可以帮助解决我的ajax调用的这个响应吗？

```
 var dashboardReq = $.ajax({
        url: apiPath + 'dashboard_mobile.php?token=' + token + '&format=json'
        //dataType: 'json'
    }); 
```

它不断地回来：

```
 dashboardReq.error(function(data, jqxhr) {
        console.log(data);
        console.log(jqxhr);
    }); 
```

下面是我得到的。在这个阶段，我已经使用 apiPath 成功登录，并且令牌发送良好，但没有任何返回。

错误只是说：“错误”，发现很难排除故障。

有什么想法吗？

```
Object {readyState: 0, getResponseHeader: function, getAllResponseHeaders: function, setRequestHeader: function, overrideMimeType: function…}
abort: function (e){var t=e||T;return l&&l.abort(t),k(0,t),this}
always: function (){return i.done(arguments).fail(arguments),this}
complete: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
done: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
error: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
fail: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
getAllResponseHeaders: function (){return 2===x?a:null}
getResponseHeader: function (e){var t;if(2===x){if(!c){c={};while(t=Tn.exec(a))c[t[1].toLowerCase()]=t[2]}t=c[e.toLowerCase()]}return null==t?null:t}
overrideMimeType: function (e){return x||(p.mimeType=e),this}
pipe: function (){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()}
progress: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
promise: function (e){return null!=e?b.extend(e,r):r}
readyState: 0
responseText: ""
setRequestHeader: function (e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this}
state: function (){return n}
status: 0
statusCode: function (e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this}
statusText: "error"
success: function (){if(u){var t=u.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})})(arguments),n?o=u.length:r&&(s=t,c(r))}return this}
then: function (){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()}
__proto__: Object 
```

只有在尝试捆绑 appMobi 时才会发生这种情况。

只需使用浏览器，我就可以在 localhost (xampp) 上运行一切正常，也可以在网络上运行。

php 文件以以下结尾：

```
 /* output in necessary format */
    if($format == 'json') {
        header('Access-Control-Allow-Origin: *');
        header('Content-type: application/json');
        echo json_encode($output);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T15:01:12.753

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --allow-file-access-from-files --disable-web-security 
```

用于桌面上的移动开发。

当我在做phonegap的东西时，我必须这样做，所以对你来说可能是同样的问题。

# html - div没有并排出现

> ID：15736289
> 
> 赞同：0
> 
> 时间：2013-04-01T00:55:07.063
> 
> 标签：html, css

我无法让这些框并排显示。我也希望标题和内容之间没有空格。这三个框应该穿过页面。我用“box1”、“box2”和“box3”标记了这些框。它们垂直而不是水平堆叠在一起。

```
<!DOCTYPE html>
    <html>
    <head>
        <title>Learning iOS Development - Home</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/style.css">
        <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
    </head>
    <body>
        <section id="paper">
        <header>
            <img src="images/logo.png" width="400px">
        </header>
        <p>
            Welcome to LearningiOSDevelopment.com. It is here where you can take your first steps to better understanding the iOS Software Development Kit and Objective-C, the tools you need to build a native app for iPhone, iPod, and iPad.Through 10 condense lessons, you'll be able to create your iPhone application in no time. With these lessons and some practice, you'll be ready to test your skills with a quiz at the end. 
    <br>
        <br>
    This course will teach you how to download and use Xcode and program basic interfaces, as well as give you a better understanding as to how Apple's written documentation, a database of files that allows users to reference snippets of code and more features from Xcode. Best of all? It is completely free!
        </p>
        <br>
        <button id="start" name="test">
            Get Started Now
        </button>
        <br>
        <br>
            <div id="box1">
                <header id="whyshouldi">
                What is iOS Development
                </header>
                <p id="whatis">
                    iOS Development is the process used to create native applications for iPhone, iPod, and iPad. Applications are made using the SDK(software development kit), Xcode. Aside from the software, it is necessary that iOS Developers know Objective-C.
                </p>
            </div>

            <div id="box2">
                    <header id="whyshouldi">
                Why Should I learn it?
                    </header>
                <p id="whatis">
            Learning native app development can allow you to better expand the horizon of knowledge in iPhone, and can make you a better programmer overall. It is a great skill to know no matter who you are.
                </p>
            </div>

            <div id="box3">
                    <header id="whyshouldi">
                How Great Will I Become?
                    </header>
                <p id="whatis">
            From using this website you will not become pro efficient in Xcode and Objective-C, but rather you will understand the basic processes in which an app is created and how to use the resources presented to you to further understand iOS Development and it's applications.
                </p>
            </div>

        </section>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>')</script>
    </body>
    </html>

    body {
        background-color: #e3e3e3;
        font: normal 80%/1.4 'Fenix', Helvetica, Arial, sans-serif;
    }
    #paper {
        background-image: url('../images/linedpaperx2.png');
        background-color: white;
        margin: 75px;
        padding: 75px;
    }
    p {
        font-size: 1.3em;
        font-style: thin;
        width: 900px;
    }
    button {
        height: 36px;
        width: 288px;
        background-color: #a43200;
        color: white;
        font-size: 1.3em;
    }
    #box1 {
        width: 288px;
        color: white;
        float: 33%;
    }
    #box2 {
        width: 288px;
        color: 33%;
    }
    h1 {
        background-color: #3477ff;
        text-align: center;
        font-size: 1.3em;
    }
    #whatis {
        width: 288px;
        background-color: #d9e9fd;
        color: black;
        padding: 30px;
    }
    #developer {
        color: white;

    }
    #bluetitle {
        color: white;
        background-color: #3477ff;
    }
    #whyshouldi {
        background-color: #3477ff;
        width:288px;
        padding: 10px 30px 10px 30px;
        color: white;
        font-size: 1.6em;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:59:14.690

适用`float:left`于 divs。并指定适当的`width`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:16:39.543

摆脱了标题和居中框之间的空间。标记不同，这些只是建议。

```
<html>
<head>
  <title>Learning iOS Development</title>
  <style type="text/css">
    body {
      background-color: #e3e3e3;
      font: normal 80%/1.4 'Fenix', Helvetica, Arial, sans-serif;
      margin-left: 10%;
      margin-right: 10%;
    }

    section {
      background-color: white;
      padding: 75px;
    }

    #start {
      height: 36px;
      width: 288px;
      margin-top: 30px;
      margin-bottom: 30px;
      background-color: #a43200;
      color: white;
      font-size: 1.3em;
    }

    h3 {
      background-color: #3477ff;
      padding: 10px 30px 10px 30px;
      color: #fff;
      font-size: 1.6em;
      margin-bottom: 0;
    }

    .group {
      float: left;
      width: 32%;
      margin-right: 5px;
      margin-top: 0;
    }

    .group > p {
      margin-top: 0;
      background-color: #d9e9fd;
      color: black;
      padding: 30px;
    }

  </style>
</head>
<body>
  <section>
  <p id="intro1">
    Welcome to LearningiOSDevelopment.com. It is here where you can take your first steps to better understanding the iOS Software Development Kit and Objective-C, the tools you need to build a native app for iPhone, iPod, and iPad.Through 10 condense lessons, you'll be able to create your iPhone application in no time. With these lessons and some practice, you'll be ready to test your skills with a quiz at the end. 
  </p>
  <p id="intro2">
    This course will teach you how to download and use Xcode and program basic interfaces, as well as give you a better understanding as to how Apple's written documentation, a database of files that allows users to reference snippets of code and more features from Xcode. Best of all? It is completely free!
  </p>

  <input type="button" id="start" value="Get Started Now">

  <div id="container">
    <div class="group">
      <h3>What is iOS Development</h3>
      <p>
        iOS Development is the process used to create native applications for iPhone, iPod, and iPad. Applications are made using the SDK(software development kit), Xcode. Aside from the software, it is necessary that iOS Developers know Objective-C.
      </p>
    </div>

    <div class="group">
      <h3>Why Should I learn it?</h3>
      <p>
        Learning native app development can allow you to better expand the horizon of knowledge in iPhone, and can make you a better programmer overall. It is a great skill to know no matter who you are.
      </p>
    </div>

    <div class="group">
      <h3>How Great Will I Become?</h3>
        <p>
          From using this website you will not become pro efficient in Xcode and Objective-C, but rather you will understand the basic processes in which an app is created and how to use the resources presented to you to further understand iOS Development and it's applications.
        </p>
    </div>
  </div>
  <section>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T01:07:24.713

```
#box1 {
    width: 33%;
    color: white;
    float: left;
}
#box2 {
    width: 33%;
    float: left;
}
  #box3 {
    width: 33%;
    float: left;
} 
```

# vb.net - 将图像从浏览器复制到剪贴板

> ID：15736291
> 
> 赞同：0
> 
> 时间：2013-04-01T00:55:24.357
> 
> 标签：vb.net, image, browser, clipboard, captcha

我需要将图像从网络浏览器控件复制到我的剪贴板，因为每次重新加载时图像都会更改，并且我尝试获取“src”属性并将我的picturebox.imagelocation更改为该属性，但picturebox上的图像不同于webbrowser 控件上的图片。

我正在尝试自动化 Web 服务，它需要填写验证码，并且每次加载页面时都会更改，这就是为什么我需要获取当前显示的验证码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:06:30.413

伪代码：

通过标签“img”为每个元素。获取“src”属性。启动源的实例`HttpWebRequest`或使用`WebClient.DownloadFile`源。

您将需要做一些技巧来确定源相对于 url 的位置。例如，src 可以是“/img/pony.jpg”，在这种情况下，您需要从`WebBrowser`控件中获取 url 的根以使其成为“ [http://mylittle.com/img/pony.jpg](http://mylittle.com/img/pony.jpg) ”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:24:51.903

假设您使用的是 Windows 窗体（如果您使用 WPF，则需要更改获取文档的方式）并且用户没有在 IE 区域设置中阻止剪贴板访问

```
Dim doc As IHTMLDocument2 = DirectCast(webBrowser1.Document.DomDocument, IHTMLDocument2)
Dim body As IHTMLElement2 = DirectCast(doc.body, IHTMLElement2)
Dim imgRange As IHTMLControlRange = DirectCast(body.createControlRange(), IHTMLControlRange)
Dim image As IHTMLControlElement = DirectCast(DirectCast(doc, IHTMLDocument3).getElementById(sImgID), IHTMLControlElement)
imgRange.add(image)
imgRange.execCommand("Copy", False, Nothing) 
```

# labview - 为什么我在 LabVIEW 中将脉冲宽度指定为 2 ms 时，波形图会显示宽度为 3 ms 的脉冲？

> ID：15736298
> 
> 赞同：0
> 
> 时间：2013-04-01T00:56:36.623
> 
> 标签：labview, waveform

我正在尝试生成宽度为 2 毫秒、频率约为 100 Hz 的脉冲波，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/w2Dh9.jpg)

根据此网站：[http](http://www.ni.com/white-paper/2991/en#toc1) ://www.ni.com/white-paper/2991/en#toc1 在“脉冲宽度调制简介”部分下，如果脉冲宽度为 2 ms，则占空比为 20%频率为 100 Hz（或 10 毫秒）。

正如您在上图中所见，“占空比 %”指标正确计算了接近 20% 的百分比。

如果我正确地执行计算，为什么我得到一个宽度为 3 ms 而不是下面显示的 2 ms 的脉冲波形？

![在此处输入图像描述](https://i.stack.imgur.com/yIY0B.jpg)

以下是包含我用来生成波形的逻辑的后面板图：

![在此处输入图像描述](https://i.stack.imgur.com/400xK.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T07:15:51.003

您的生成频率为 1 kHz，因此您处于最低分辨率。您的脉搏高 2 毫秒。我会建议你提高采样率。

# c# - 在 Windows 商店应用程序中检索用户推文

> ID：15736299
> 
> 赞同：-1
> 
> 时间：2013-04-01T00:56:55.487
> 
> 标签：c#, windows-8, twitter, windows-store-apps

如何在 Windows 商店应用程序中检索特定 Twitter 用户“@username”的所有推文？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:00:16.817

我可能会考虑使用 an[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)来调用 Twitter API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:23:05.480

周围有一些 Tweeter Wrapper，

签出这个包装：[https ://github.com/danielcrenna/tweetsharp](https://github.com/danielcrenna/tweetsharp)

> TweetSharp 是一个 Twitter API 库，它极大地简化了将 Twitter 添加到桌面、Web 和移动应用程序的任务。您可以使用 TweetSharp 构建简单的小部件或复杂的应用程序套件。第二个版本是重写，旨在比原始版本更轻、更快、更直观。您编写的代码行数更少，做出的决定更少，并获得更好的结果。Visual Studio T4 模板用于从简单的基于文本的 DSL 自动生成新的 API 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-30T09:14:15.357

几天前我发布了一个关于这个的教程。看一看：

[http://www.codeproject.com/Articles/599505/Databind-Tw​​itter-XML-Feed-in-Windows-8](http://www.codeproject.com/Articles/599505/Databind-Twitter-XML-Feed-in-Windows-8)

应该解释一下:)

# ruby-on-rails - 为什么 Rails 动作控制器不使用线程？

> ID：15736300
> 
> 赞同：0
> 
> 时间：2013-04-01T00:56:59.113
> 
> 标签：ruby-on-rails, ruby, multithreading, actioncontroller

我的 Rails 应用程序有一个需要花费大量时间处理的路由，这使得整个网页冻结。

1.  为什么会这样？是不是线程安全的 Rails 或第三方 gem？
2.  有没有办法解决这个问题？我正在考虑使用进程池，就像线程池一样，除了它更重，它会占用大量内存，但它会比停止整个应用程序便宜。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:15:28.627

Rails 对中间件堆栈中的整个请求使用互斥锁，因此 Rails 进程一次只接受一个请求。

但是，您可以通过启用该`config.threadsafe!`选项并使用多线程服务器（例如 Puma）来禁用此功能。

然后是使用 MRI 的整个障碍，它不会真正让两个线程同时运行，除非它们正在执行非阻塞 I/O。

您需要使用支持真实线程的 Ruby 实现，例如 Rubinius 或 Jruby。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T01:20:34.663

首先要注意的是，您的 Rails 操作不应该是重量级的。当用户请求页面时，您应该立即为用户提供服务。

现在，有些情况下您需要用户等待结果，在这种情况下，您始终可以使用 websockets 或[HTTP 流](http://railscasts.com/episodes/266-http-streaming)。

现在，Ruby 和 Rails 在线程方面存在问题，您可以在“ [Parallelism is a Myth in Ruby](http://www.igvita.com/2008/11/13/concurrency-is-a-myth-in-ruby/) ”中阅读到。

您可以在 Rails 中使用的一种解决方案是使用像 Unicorn 这样的服务器，它可以根据需要分叉尽可能多的进程工作者，并且每个进程都将独立于其他进程工作，Puma 用于创建多线程等。

现在，如果您的操作是一个繁重的流程，您可能希望将工作延迟到像`delayed_job`. 您甚至可以使用 JavaScript 创建一个漂亮的 UI 来获取作业的状态并向用户显示进度。您可以使用 RabbitMQ 执行的任务池，其中后台的另一个进程可以侦听新消息并对其进行操作，甚至给出响应等。

请记住，大多数网络服务器都有客户端超时，并且您真的不希望用户等待一分钟或更长时间而没有响应，因此使用流响应在操作时立即提供一些反馈总是很好的正在完成，或者用一些 JavaScript 代码回答，这些代码将继续访问服务器以查看任务是如何执行的，如果需要，甚至可以使用 websocket。

# javascript - onclick 功能有效，但 onsubmit 无效

> ID：15736307
> 
> 赞同：0
> 
> 时间：2013-04-01T00:58:59.220
> 
> 标签：javascript, onclick, onsubmit

我正在尝试制作一个提交按钮，当它被点击时，图像将移动，另一个按钮，当它被点击时，图像将重置。

不知何故，如果我用`onclick`函数来做，图像会移动，一切都很好，但如果我用函数来做，`onsubmit`那么它就行不通了。任何人都可以给我一个想法为什么？

这就是我的脚本：

```
function catMoveRight()
{
    document.getElementById("cat").style.left=parseInt(document.getElementById("cat").style.left)+1+"px";
}

window.onload=function()
{
    catTimer = null;

    document.getElementById("start").onsubmit=function()
    {
        if(catTimer == null)
        {   
            catTimer = setInterval("catMoveRight()",1000);
        }

    }

} 
```

这是我的 HTML `body`：

```
<img src="cat.jpg" id="cat" style=" position: absolute; left: 10px;"/><br/>
<form action=" " method="post" id="start">
    <input type="submit" value="Start" style="position: absolute; left: 10px; top: 220px;" />
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T01:15:01.190

确保取消表单提交的默认操作。一种方法是`false`从事件处理程序返回：

```
document.getElementById("start").onsubmit = function()
{
    if(catTimer == null)
    {   
        catTimer = setInterval(catMoveRight, 1000);
    }
    return false;
}; 
```

也没有必要将字符串传递给`setInterval`. 不要在不需要`eval`的地方使用。

**示例：http:** [//jsfiddle.net/QD3ev/1/](http://jsfiddle.net/QD3ev/1/)

# javascript - 一个 Rails 视图上的多个 Ajax 请求

> ID：15736320
> 
> 赞同：3
> 
> 时间：2013-04-01T00:59:54.813
> 
> 标签：javascript, ruby-on-rails, ajax

我在一页上有两个 ajax 请求（一个显示日期，一个显示日历）

请求一：点击日期（在日历上），将更新日期。

要求二：可以在日历的月份之间进行更改。

发生的情况是我在 index.js.erb 中同时拥有这两个函数，并且它总是同时执行这两个函数，每次更改月份时都会重置“请求一个”中的日期。

我可以让它一次只执行 index.js.erb 的一个功能吗？

**索引.js.erb**

```
$("#calendar").html("<%= escape_javascript(render('layouts/calendar')) %>");
$("#today").html("<%= escape_javascript(render('layouts/today')) %>"); 
```

**_today.html.erb**

```
<div class="span3 offset2 dateToday">
    <% end %>
    <span id="currentdate">
        <%= @eventDate.strftime("%B") %><br>
        <span id="dayDate"><%= h @eventDate.day %></span>
    </span>
</div> 
```

**_calendar.html.erb**

```
 <h2 id="month">
      <span class="pull-left"><%= link_to "<", :month => (@date.beginning_of_month-1).strftime("%Y-%m-01") %></span>
      <%= h @date.strftime("%B %Y") %>
      <span class="pull-right"><%= link_to ">", :month => (@date.end_of_month+1).strftime("%Y-%m-01") %></span>
  </h2>
  <%= calendar_for(@events, :year => @date.year, :month => @date.month) do |t| %>
      <%= t.head('Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun') %>
      <%= t.day(:day_method => :eventdate) do |date, events| %>
  <div class="day">
      <%= link_to(date.day,  {:day => date }, :remote => true, :class => "btn dayBtn") %>      
  </div>
  <% end %> 
```

**编辑：routes.rb**

```
resources :calendar

root :to => "calendar#index"

match '/faq',   to: 'calendar#faq'
match ':controller/:action' 
```

**编辑 - 链接到 ajax 操作**

```
<%= link_to "<", :month => (@date.beginning_of_month-1).strftime("%Y-%m-01"), :action => "update_calendar", :remote => true %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T01:07:05.963

您要么必须设置逻辑以根据传递的某些参数做出不同的响应，要么需要将它们分解为两个不同的动作，因为它们实际上是两个不同的动作。

因此，如果您使用 param 方法，则会出现类似的情况。

```
-if param[:one]
  $("#calendar").html("<%= escape_javascript(render('layouts/calendar')) %>");
-if param[:two]
  $("#today").html("<%= escape_javascript(render('layouts/today')) %>"); 
```

或者如前所述，将它们分解为不同的动作。

在您的控制器中

```
def update_today
 #your today logic thats in your current action
 respond_to do |format|
   format.js{render}
 end
end

def update_calendar
 #your today logic thats in your current action
 respond_to do |format|
   format.js{render}
 end
end 
```

然后，您必须为这两个操作添加路由。

update_today.js.erb

`$("#today").html("<%= escape_javascript(render('layouts/today')) %>");`

update_calendar.js.erb

`$("#calendar").html("<%= escape_javascript(render('layouts/calendar')) %>");`

# python - 如何确定哪个版本的 Python 适合脚本？

> ID：15736324
> 
> 赞同：1
> 
> 时间：2013-04-01T01:00:25.620
> 
> 标签：python, version

我想确定哪个版本的 Python 最适合 Python 脚本。有没有一种自动化的方法来做到这一点？

我想到的具体问题是确定与此处显示的脚本（称为 ea800_downloader.py）一起使用的 Python 版本：

[http://d.hatena.ne.jp/yamdan/20110129/1296320457](http://d.hatena.ne.jp/yamdan/20110129/1296320457)

我问是因为当我尝试运行它时会出现许多错误。我尝试使用 Python 2.6 和 2.7 版本运行它。错误列表中的第一个如下：

```
File "ea800_downloader.py", line 43
    "" "
       ^
SyntaxError: EOL while scanning string literal 
```

在这种情况下，这似乎是对多行注释的尝试，但某处出了点问题。对此的任何建议将不胜感激。

编辑：正如建议的那样，脚本的代码已发布。

```
 # / Usr / bin / env python! 
  # - * - coding: UTF-8 - * -

  # 
  # Ea800_downloader.Py 
  # 
  # Usage: python Ea800_downloader.Py folder_id OUT_DIR 
  #    
  # folder_id: ID of the folder that you want to download (see below) 
  # 
  # | ID | folder path | 
  # | ---- + ------- ----------------------------- | 
  # | 0 | / ETablet / var / ebook | 
  # | two | / ETablet / var / photos | 
  # | 4 | / ETablet / var / Enotes | 
  # | 8 |? | 
  # | 12 | / ETablet / etc / db | 
  # | fourteen | / ETablet / etc / template | 
  # | 31 | / ETablet | 
  # | 32 | / usr / local / ETablet / bin | 
  # | thirty-three | / ETablet / etc | 
  # | 34 | / ETablet / var | 
  # | 35 | / usr / local / ETablet / lib | 
  # | 37 | / usr / local / ETablet / bin / Ebookreader | 
  # 
  # OUT_DIR: the directory where you want to store the folder where you downloaded 
  to make two directories xmlfiles and files directly under the # OUT_DIR directory 
  to store the downloaded file, to # files directory 
  to # xmlfiles directory stores (in the form of XML) list of files.

  Import sys
   Import os
   Import socket
   Import Xml.Etree.ElementTree as etree
   Import hashlib

  BUF_SIZE = 8192

  class  Connection (object):
      "" "
       . Simple wrapper class for Raw TCP Connection 
       Refer to: Http://Docs.Python.Org/howto/sockets.Html 

      Attributes: 
       - _Sock
       "" "

      def  __ init__ (self, address):
          self._sock = socket.socket ()
          self._sock.connect (address)

      def  Send (self, op):
          totalsent = 0
          op = Op.Encode (" UTF-8 ")
          op_size = len (op)
          while Totalsent <Op_size:
              sent = self._sock.send (op)
              if sent == 0:
                   raise RuntimeError, \ 
                      " socket Connection broken "
              totalsent = totalsent + sent

      def  recv (self, size = one):
          read = 0
          buf = []
          while read <size:
              data = self._sock.recv (BUF_SIZE)
              if Data == "":
                   raise RuntimeError, \ 
                      " socket Connection broken "
              read = read + len (data)
              buf.append (data)

          Return "". join (buf)

      def  close (self):
          self._sock.close ()

  class  Downloader (object):
      "" "
       File downloader for Eee Note EA800\. 

      Attributes: 
       - _cs 
       - _DS 
       - _Files_folder 
       - _Xmlfiles_folder
       "" "

      def  __ init__ (self, OUT_DIR):
           # Connect to command socket 
          Connection Self._Cs = ((" 169.254.2.1 ", twenty thousand))
           # recieve welcome message
          self._cs.recv ()

          # Connect to Data socket 
          Connection Self._Ds = ((" 169.254.2.1 ", 20 001))
           # recieve welcome message
          self._cs.recv ()

          Self._Files_folder = os.path.join (OUT_DIR, " Files ")
          Self._Xmlfiles_folder = os.path.join (OUT_DIR, " Xmlfiles ")

      def  close (self):
           # close connections both
          self._ds.close ()
          self._cs.close ()

      def  _Md5sum (self, Data):
          m = hashlib.md5 ()
          m.update (data)
          Return M.Hexdigest ()

      def  downloadfile (self, folder_id, path):
          "" " EXECUTE 'downloadfile' command "" "

          # Send "downloadfile" request 
          op = " downloadfile \ n % d \ n Path =% s \ n \ \ n :: \ \ n "% (folder_id, path)
          self._cs.send (op)

          # Receive "downloadfilereturnvalue" response
          res = self._cs.recv ()
          Res.Split Res_list = (b " \ n ")

          assert Res_list [0] == " Downloadfilereturnvalue "," not correct response "

          # Extract status and file_size from "downloadfilereturnvalue" response
          status = res_list [1]
          file_size = int (res_list [2])
          MD5 = Res_list [three] [4:]   # drop first four character "MD5 ="

          assert file_size> 0, " file_size is not positive integer "

          # Prepare file and directory to output data
          outfile_path = os.path.join (self._files_folder,
                                      " % 02d "% folder_id,
                                      Path.Lstrip (" / "))
          outfile_dir = os.path.dirname (outfile_path)
          try :
              os.makedirs (outfile_dir)
          except OSError:
               pass

          # Output data to local directory
          data = self._ds.recv (file_size)
          assert Self._Md5sum (Data) == MD5, " invalid MD5 check sum "
          outfile = Open (Outfile_path, " wb ")
          outfile.write (data)
          outfile.close ()

          Print " Downloaded:% s "% path

      def  listfile (self, folder_id):
          "" " EXECUTE 'listfile' command "" "

          # Send "listfile" request 
          op = " listfile \ n % d \ n \ \ n :: \ \ n "% folder_id
          self._cs.send (op)

          # Receive "listfilereturnvalue" response
          res = self._cs.recv ()
          Res.Split Res_list = (b " \ n ")

          assert Res_list [0] == " Listfilereturnvalue "

          # Extract status and file_size from "listfilereturnvalue" response
          status = res_list [1]
          file_size = res_list [2]
          if File_size.Endswith (" \ \ n :: \ \ n "):
              file_size = file_size [: -6]
          file_size = int (file_size)

          assert file_size> 0

          # Output data to console
          data = self._ds.recv (file_size)
          Print Data

      def  xmlfile (self, folder_id):
          "" " EXECUTE 'xmlfile' command "" "

          # Send "xmlfile" request 
          op = " xmlfile \ n % d \ n \ \ n :: \ \ n "% folder_id
          self._cs.send (op)

          # Receive "xmlfilereturnvalue" response
          res = self._cs.recv ()
          Res.Split Res_list = (b " \ n ")

          assert Res_list [0] == " Xmlfilereturnvalue "

          # Extract status and file_size from "xmlfilereturnvalue" response
          status = res_list [1]
          file_size = res_list [2]
          file_size = int (file_size)

          assert file_size> 0

          # Prepare output to File and Directory Data 
          Outfile_path = os.path.join (Self._Xmlfiles_folder, " % 02D.Xml "% folder_id)
           try :
              os.makedirs (self._xmlfiles_folder)
          except OSError:
               pass

          # Output to local Data Directory 
          outfile = Open (Outfile_path, " wb ")
          data = self._ds.recv (file_size)
          outfile.write (data)
          outfile.close ()

          # Parse xmlfile
          tree = etree.parse (outfile_path)

          Return tree

      def  Downloadfolder (self, folder_id):
          "" " recursive download Files in a folder "" "

          tree = self.xmlfile (folder_id)
          self._traversal_and_download (tree.getroot (), u "", folder_id)

      def  _Traversal_and_download (self, Elm, folder_name, folder_id):
           if Elm.Tag == " File ":
              path = folder_name + u " / "+ Elm.Get (" name ")
               try :
                  self.downloadfile (folder_id, path)
              except AssertionError, e:
                   Print e
           else :
               for child in Elm.Getchildren ():
                  Self._Traversal_and_download (child, Elm.Get (" name ", u" "), folder_id)

  if __ name__ == " __ main__ ":
      folder_id = int (sys.argv [1])
      out_dir = sys.argv [2]

      d = Downloader (out_dir)
      d.downloadfolder (folder_id)
      d.close () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:09:24.617

该代码似乎有语法错误。`"" "`在任何版本的 Python 中都不是有效的语法。您需要修复代码或尝试重新下载。尝试其他版本的 Python 将无济于事。您很可能需要删除引号之间的空格。如果您复制并粘贴了代码，您可能需要稍微修正一下格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:11:39.000

它看起来像是复制粘贴错误或编码问题。我去了原始站点，代码在 Python 2.7 下运行得很好。您只需要修复三个双引号之间的空格。

要回答您最初的问题，您可以编写*检查语法*脚本来读取代码，以查看哪些版本的 Python 可以成功编译代码。如果可以运行`compile(somescript, '', 'exec')`，那么在当前版本的 Python 下代码是可以的。这是[IDLE 的*checksyntax()*函数](http://hg.python.org/cpython/file/37352a3ccd54/Lib/idlelib/ScriptBinding.py#l86)使用的策略。

# python - 使用 pandas 的棘手聚合

> ID：15736325
> 
> 赞同：3
> 
> 时间：2013-04-01T01:00:30.327
> 
> 标签：python, pandas

我是 pandas 的新手，并且好奇这是否太棘手而无法完成使用它。

**示例输入：**

```
time       person   game_id   won
-----------------------------------
12:34:01   John     3         False
12:34:04   Ringo    2         True
12:35:05   John     3         False
12:36:01   John     3         True
12:36:12   Ringo    3         True
12:36:41   Paul     4         False
12:37:01   George   2         False
12:37:41   George   2         False 
```

它显示了随着时间的推移，许多人玩了许多游戏。获胜的列指示该人当时是否获胜。

我想要的输出是有多少人每场比赛**至少赢了一次**。但也有多少人玩了游戏却**从未**赢过。

**示例输出：**

```
game_id   won     count
-----------------------
2         True    1
          False   1
3         True    2
          False   0
4         True    0
          False   1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T08:16:20.943

或多或少@DSM 在说什么：

```
In [3]: grouped = df.groupby('game_id')

In [4]: won = grouped.won.sum()

In [5]: DataFrame({True: won, False: grouped.person.nunique() - won}).stack()
Out[5]: 
game_id       
2        False    1
         True     1
3        False    0
         True     2
4        False    1
         True     0
dtype: float64 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T02:35:01.320

```
s1 = (~df.groupby(["game_id", "person"]).won.agg(np.any)).groupby(level=0).sum()
s2 = df.groupby(["game_id", "won"]).person.agg(lambda s:s.nunique())
df2 = s2.unstack()
df2[False] = s1
df2.fillna(0).unstack().swaplevel(0, 1).sort_index() 
```

# object - 使用 Gson 将对象向量保存到 SharedPreferences

> ID：15736329
> 
> 赞同：0
> 
> 时间：2013-04-01T01:00:46.747
> 
> 标签：object, vector, sharedpreferences, gson

我正在使用 Gson 将向量保存到 sharedpreferences

这是我的 setter 和 getter，但我似乎对我的 getter 有一些警告。

我的二传手没有任何警告

```
 Gson gson = new Gson();
     String json = gson.toJson(al);
     editor.putString("accountLabels", json);
     editor.commit(); 
```

我的吸气剂警告我“类型安全：Vector 类型的表达式需要未经检查的转换才能符合 Vector”

```
 Gson gson = new Gson();
    String json = myPref.getString("accountLabels", "Error");
    Vector<AccountLabels> obj = gson.fromJson(json, Vector.class);
    return obj; 
```

我不知道在 sharedpreferences 中保存对象甚至对象向量需要做多少工作，但这对我来说似乎是最好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:54:25.673

我不确定问题是什么。我猜这与解决未经检查的转换警告有关。为此，改变

```
Vector<AccountLabels> obj = gson.fromJson(json, Vector.class); 
```

到

```
Vector<AccountLabels> obj = gson.fromJson(json, new TypeToken<Vector<AccountLabels>>(){}.getType()); 
```

发生警告是因为该`fromJson`方法返回 type `Vector`，但它被分配给 type 的引用`Vector<AccountLabels>`。

（注意：自 2001 年（我认为）和较新的 Collections API 以来，[使用 of`Vector`是不受欢迎的](https://stackoverflow.com/questions/1386275/why-is-java-vector-class-considered-obsolete-or-deprecated)。）

# image-gallery - WPExplorer Adapt 主题：仅显示 5 个作品集图像

> ID：15736335
> 
> 赞同：0
> 
> 时间：2013-04-01T01:02:14.527
> 
> 标签：image-gallery, portfolio

我正在使用 Adapt WP 资源管理器主题，但无法在作品集中显示图像。所有图像都将显示在投资组合页面 ( [http://kefarpublishing.com/testwebsite/kefar-korner-2/](http://kefarpublishing.com/testwebsite/kefar-korner-2/) )，但是当您单击第一个时，滑块箭头显示，但没有图像。仅显示最后五张图像。我尝试了以下方法：

1.  重置永久链接
2.  在投资组合页面上创建画廊
3.  从媒体中删除图像，上传到图库

此外，显示类别的唯一方法是创建一个名为“All”的类别，然后它显示我创建的所有类别，加上一个额外的 All 类别（所以我有两个 alls 和其余的，或者没有类别全部）。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T14:20:54.200

首先禁用任何其他插件，然后查看您的类别菜单是否有效。然后一一激活，看哪个是冲突的。当你找到它时，只需找到你需要的替代插件。

听起来您在帖子中插入了一个画廊，这是不必要的。要在滑块中显示图像，请创建一个投资组合项目，然后单击设置特色图像，上传您想要显示在滑块上的图像（从媒体库中选择它们不起作用，您必须上传到帖子）和然后更新。

# maven - 是否可以通过 maven 访问 github 私有存储库？

> ID：15736338
> 
> 赞同：1
> 
> 时间：2013-04-01T01:02:27.347
> 
> 标签：maven, github

当我尝试从公共 github 存储库添加依赖项时，它工作正常。例子

```
<repository>
<id>https-levonk</id>
<url>https://github.com/levonk/pub-maven-repo/tree/master/release/</url> 
```

```
<dependency>
<groupId>com.levonk</groupId>
<artifactId>codequality</artifactId>
<version>1.0.8</version> 
```

但是当我尝试将其添加到私有存储库并通过添加我的 github 帐户时`~m2/settings.xml`。但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T12:52:01.727

这已在[Github authentication 中得到解答：how to use Github as Maven repo when repo is private](https://stackoverflow.com/questions/11370248/github-authentication-how-to-use-github-as-maven-repo-when-repo-is-private)

虽然有一些关于如何完成这项工作的建议，但以下是选择的答案。

> 现在这个问题没有实际意义。Github 已经取消了下载。他们不再托管二进制文件。可能正是因为我提出的那种虐待......

# asp.net - 动态添加用户控件

> ID：15736341
> 
> 赞同：0
> 
> 时间：2013-04-01T01:03:12.803
> 
> 标签：asp.net, .net, user-controls, updatepanel

我正在尝试在页面加载后添加用户控件。在页面中，根据选择（下拉菜单或复选框）将添加相应的用户控件。我知道如果我们需要添加用户控件，我需要将它们添加到Page_InIt 方法。但只有当页面完全加载并且用户做出选择时，我才会知道要添加哪个用户控件。该页面有更新面板，所以会有很多异步回发，所以我还需要看看如何在用户控件添加到页面后对其进行持久化。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T08:28:04.283

您可以使用

`Request.Form["YourControlID"]`.

检查此链接以了解有关从表单获取回发数据的信息

[读取提交到 ASP.Net 表单的 Post 数据](https://stackoverflow.com/questions/564289/read-post-data-submitted-to-asp-net-form)

另请阅读这篇关于在 ASP.NET 中使用动态控件的文章。它非常有帮助。

[真正了解动态控制](http://weblogs.asp.net/infinitiesloop/archive/2006/08/25/TRULY-Understanding-Dynamic-Controls-_2800_Part-1_2900_.aspx)

# java - 玉：java.lang.OutOfMemoryError：Java 堆空间

> ID：15736345
> 
> 赞同：3
> 
> 时间：2013-04-01T01:03:21.647
> 
> 标签：java, jvm, agents-jade

我一直在使用玉（Java 代理开发框架）来创建基于网络的消息传递系统。

到目前为止，我注意到翡翠运行没有问题，但是在晴朗的一天，我收到了这条消息，

![在此处输入图像描述](https://i.stack.imgur.com/wsglJ.jpg)

JVM 堆空间错误！

经过调查，我发现这是由于集合变量可能阻塞了占用 JVM 空间而没有将其刷新出来的对象。（你可以看到异常是从玉的角度提出的，而我的代码方面没有）

我怎样才能删除这个？

我的代码由一个简单的 TickerBehaviour 类组成，如下所示：

```
public class MyBehaviour extends TickerBehaviour {

 @Override
 public void onTick() {
   // Runs every second.

   ACLMessage msg = new ACLMessage(ACLMessage.INFORM);
   msg.setOntology(username);
   msg.addReceiver(new AID(username, AID.ISLOCALNAME));
   msg.setContent(<my intended message to that identifier>);
   agent.send(msg);
 }
} 
```

我进一步检查了我的代码是否正在创建不必要的引用对象（通过注释最终生成 my`intended message`作为一种方式的代码）我将其归结为删除我的所有功能并运行翡翠代理，令人惊讶的是，我注意到翡翠任务本身是创建这个问题。

我过去常常`visualVM`检查正在进行的堆空间检查，以检查有多少被引用的对象仍然位于 JVM 堆空间中。

较旧的解决方案也没有多大帮助。谁能帮我解决这个问题？

我已经使用了在翡翠容器启动期间推荐的选项，但是仍然存在没有被 GC 删除的引用对象。

系统设置：

1.  操作系统：Linux 64 位。
2.  JVM 版本：IcedTea，1.6.0.27，64 位。
3.  JVM 选项`-Xms1024m`：`-Xmx2048m`和`-XX:MaxPermSize=512M`

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:16:25.767

> 我怎样才能删除这个？

您似乎已经将此作为内存泄漏进行了调查，并得出结论认为泄漏是在 Jade 中。

如果是这种情况，那么首先要做的是搜索 Jade 邮件列表和错误跟踪器，看看这是否是一个已知问题，以及是否有已知的修复或解决方法。

如果失败，你有三个选择：

*   进一步调查并追踪内存泄漏的原因，并为它开发修复程序。如果修复是一般性的，请将其回馈给 Jade 团队。

*   报告 Jade 错误跟踪器上的错误，并希望这会导致修复......最终。

*   创可贴。使用更大的堆运行您的应用程序，并在收到 OOME 时重新启动它。

* * *

另一种可能性是内存泄漏是在您的代码中，或者是由您的代码引起的。例如，你说：

> 经过调查，我发现这是由于集合变量可能阻塞了占用 JVM 空间而没有将其刷新出来的对象。（你可以看到异常是从玉的角度提出的，而我的代码方面没有）

这不是问题出在 Jade 代码中的无懈可击的证据。这意味着当内存最终耗尽时，您正在执行 Jade 方法。我建议您下载 Jade 源代码并进一步调查此（假定的）内存泄漏。找出真正导致它的原因，而不是根据假设和错误推论做出诊断。

请记住，Jade 是许多人成功使用的稳定产品……没有内存泄漏问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T11:22:08.513

我可以推荐的最简单的事情之一是使用[Plumbr](http://plumbr.eu)。它正好适用于这种情况。如果 Plumbr 报告问题在于 Jade 代码，那么您应该向他们提交错误报告。或者它将帮助您在自己的应用程序中发现问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T09:31:19.727

问题在于另一个正在缓冲对象以进行处理的引擎。JADE 不是罪魁祸首。我正在使用一个通用的 ESPER 引擎，并根据正在解析的数据创建新的事件处理对象。

我正在研究如何在不使应用程序崩溃的情况下定期清除这些内容。

抱歉，添麻烦了！

# android - Mono for Android App 中的自定义标头

> ID：15736350
> 
> 赞同：-1
> 
> 时间：2013-04-01T01:04:56.737
> 
> 标签：android, xamarin.android

我正在使用 Mono for Android 开发我的第一个应用程序。我觉得我正在尝试做一些基本的事情，但我没有任何运气。本质上，我想在我的应用程序顶部有一个自定义“横幅”。横幅只是一个黑色矩形，上面有两个词：“Hello”和“World”。你好是红色的，世界是蓝色的。

我对此无能为力。有谁知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:37:25.403

这是一个非常基本的布局示例，可以帮助您入门。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:background="#000000"
        android:padding="5dp" >
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginRight="2dp"
            android:text="Hello"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#FF0000" />
        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="World"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#0000FF" />
    </LinearLayout>
    <!-- The rest of your activity layout goes here.  -->
</LinearLayout> 
```

# objective-c - 未定义符号错误 - NewsYC iOS 应用程序

> ID：15736351
> 
> 赞同：2
> 
> 时间：2013-04-01T01:05:27.540
> 
> 标签：objective-c

我正在尝试构建[NewsYC iOS 应用程序](https://github.com/Xuzz/newsyc)。我可以让它在模拟器中工作，但是当我瞄准我的 iPhone 5 时，我得到一个未定义的符号错误。我对 XCode 和 Objective C 很陌生，所以我不确定如何解决这个问题。我已经阅读了一些关于其他项目的错误信息，并在构建阶段链接了 libHNKit。不太确定还需要发生什么来纠正这个问题。

这是错误：

```
ld: warning: ignoring file /Users/stephenwalker/Library/Developer/Xcode/DerivedData/newsyc-gidnwqwyaspbjdevgkudlemjssmd/Build/Products/Debug-iphoneos/libHNKit.a, file was built for archive which is not the architecture being linked (armv7): /Users/stephenwalker/Library/Developer/Xcode/DerivedData/newsyc-gidnwqwyaspbjdevgkudlemjssmd/Build/Products/Debug-iphoneos/libHNKit.a
Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_HNAnonymousSession", referenced from:
      objc-class-ref in SessionListController.o
  "_OBJC_CLASS_$_HNSessionAuthenticator", referenced from:
      objc-class-ref in HackerNewsLoginController.o
  "_OBJC_CLASS_$_HNNetworkActivityController", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_HNAPISearch", referenced from:
      objc-class-ref in SearchController.o
  "_OBJC_CLASS_$_HNSession", referenced from:
      objc-class-ref in HackerNewsLoginController.o
  "_OBJC_CLASS_$_HNSessionController", referenced from:
      objc-class-ref in MainTabBarController.o
      objc-class-ref in SessionProfileController.o
      objc-class-ref in AppDelegate.o
      objc-class-ref in HackerNewsLoginController.o
      objc-class-ref in SessionListController.o
  "_OBJC_CLASS_$_HNObjectBodyRenderer", referenced from:
      objc-class-ref in AppDelegate.o
  "_OBJC_CLASS_$_HNSubmission", referenced from:
      objc-class-ref in CommentListController.o
      objc-class-ref in EntryReplyComposeController.o
      objc-class-ref in SubmissionTextComposeController.o
      objc-class-ref in SubmissionURLComposeController.o
  "_OBJC_CLASS_$_HNEntryList", referenced from:
      objc-class-ref in MainTabBarController.o
      objc-class-ref in MoreController.o
      objc-class-ref in ProfileController.o
      objc-class-ref in SessionProfileController.o
  "_OBJC_CLASS_$_HNEntry", referenced from:
      objc-class-ref in CommentListController.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:22:09.593

从终端完成后`git submodule init; git submodule update`，在 newsyc 项目的文件导航器中选择 HNKit.xcocdeproj。然后单击“构建设置”，然后您应该会在“仅构建活动架构”旁边看到“多个值”。单击它并将其设置为“否”。

# url - IFrame Like Button 给出了可疑的 URL 错误

> ID：15736353
> 
> 赞同：1
> 
> 时间：2013-04-01T01:05:34.267
> 
> 标签：url, iframe, facebook-like

我创建了一个 Google Sites 站点并使用 IFrame 选项添加了一个 Like 按钮。

该按钮看起来不错，但是当用户单击 Like 时，他们会收到以下错误：

**“抱歉，此帖子包含可疑 URL：未知错误”。**

它看起来像一个类似 Facebook 的问题，因为错误消息显示在 Facebook 品牌的弹出窗口中。

我的网站：**[https ://sites.google.com/site/wheresthezbfairlane/](https://sites.google.com/site/wheresthezbfairlane/)**

我该如何解决 ？

帮助！

谢谢尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-16T22:10:26.323

如果您从 facebook 插件站点复制粘贴的代码，您可能必须删除在 href 属性之后分隔查询字符串的 'amp;'s。

```
<iframe src="//www.facebook.com/plugins/like.php?   
 href=http%3A%2F%2Fwww.facebook.com&amp;width=450&amp;height=80&amp;colorscheme=light&amp;layout=standard&amp;action=like&amp;show_faces=true&amp;send=true"
scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:450px; height:80px;" allowTransparency="true"></iframe> 
```

因此，在上面的代码中只需替换 '&' 和 '＆'

# sql - qt select 不适用于 where 语句

> ID：15736354
> 
> 赞同：0
> 
> 时间：2013-04-01T01:05:42.123
> 
> 标签：sql, postgresql, qt, qsqlquery, qtsql

我正在使用 qt 4.8 和 psql 驱动程序连接到 postgres 9.1 数据库。

我正在做一个通用库来连接并插入数据库；几乎所有方法都准备好了，但在最后一个方法中，我需要从表中进行选择以将值插入到另一个表中。当我尝试选择语句时，它的行为有所不同。依次根据代码，但我所做的任何测试都没有产生正确的解决方案。这是我的代码：

```
struct enfriadores enf;
enf.horaE=time(&enf.horaE);
enf.horaS=time(&enf.horaS)+1900;

  //base1.insertaEvento(db,enf);

QString consulta = "Select id_evento from eventos where extract(epoch from horae)=:hora_bus";

QDateTime hora_bus(QDateTime::fromTime_t(enf.horaE));

//qDebug()<< enf.horaE;

QSqlQuery query(db);
query.prepare(consulta);                                               
query.bindValue(":hora_bus",hora_bus);
query.exec();
query.first();

while(query.next())
{

    int valor = query.value(0).toInt();
    qDebug() << valor << endl;
} 
```

base1.insertaEvento 是来自我所做的类的调用，用于在表上插入数据，之后我需要提取 id。这

```
qDebug() << enf.horaE; 
```

在我将它附加到查询之前，我把它知道时间是否正确，顺便说一句，这是正确的。horaE 取自我在前面提到的类中声明的结构。

当我按原样运行查询时，`while(query.next())`它运行良好但不返回任何结果，如果我删除 while 循环但仍保持`query.next()`编译器返回

```
QSqlQuery::value: not positioned on a valid record
0 
```

我尝试使用 query.first() 方法和 query.setForwardOnly(true) 但结果相同。

另外，如果我用 qDebug() 尝试 hora_bus 的值并直接在 psql 控制台中替换它，我会得到一个肯定的匹配，所以问题不在于插入或格式化数据的方式，而是检索查询的方式我相信但是不知道如何解决这个有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T12:25:59.047

SQL 表达式`extract(epoch from horae)`产生自 1970 年 1 月 1 日以来的秒数，所以这就是应该传递给参数的内容`:hora_bus`。

`QDateTime::fromTime_t(enf.horaE)`表示具有此值，但是它`enf.horaE`不是将 ot 传递给查询，而是传递一个 QDateTime 对象，该对象的文本表示可能是带有年、月等的字符串......无法与许多秒。

所以试试这个：

```
query.bindValue(":hora_bus",enf.horaE); 
```

此外，代码不应忽略`prepare()`and的布尔返回值`exec()`。当查询执行失败时，您不想尝试在结果中循环。

**EDIT1**：确实，当将设置为今天的 QDateTime 传递给与您类似的准备好的查询时， `QSqlQuery::exec()`返回 false 并带有 SQL 错误`invalid input syntax for type double precision`。

**EDIT2**：它似乎`QVariant`不支持使用 a 进行初始化，`long`因此需要显式强制转换为不同的支持类型。我选择`qlonglong`了一个更大的安全值：

```
query.bindValue(":hora_bus",(qlonglong)enf.horaE); 
```

经过测试，它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T05:24:28.660

[http://qt-project.org/doc/qt-4.8/qsqlquery.html#details](http://qt-project.org/doc/qt-4.8/qsqlquery.html#details)

在文档的最后，它提到了以下内容：

> 警告：您必须在创建 QSqlQuery 之前加载 SQL 驱动程序并打开连接。此外，查询存在时连接必须保持打开状态；否则，QSqlQuery 的行为是未定义的。

如果与数据库的连接超时，或者您使用的变量之一超出范围，您可能会提前断开连接并获得未定义的结果。

您还可以检查大多数函数调用的返回值，看看它们是否成功。

希望有帮助。

# flash - 无法构建代码提示缓存？

> ID：15736362
> 
> 赞同：1
> 
> 时间：2013-04-01T01:07:14.040
> 
> 标签：flash, air, flash-cs5, flash-cs6, flash-cs5.5

我在我的 Flash 项目（AS3、Adobe Air 3）中使用了一个非常大的自定义类。但是，我在 Flash Professional CS6 环境中收到此警告：

> ***无法建立代码提示缓存。请将关联的 FLA 保存到不同的文件夹中。类路径上有太多文件。
> 
> * * *

我只有我的 .FLA、其相关的 .SWF 和 .XML（首选项文件），以及我的文档类 .AS。我的自定义类位于 .FLA 旁边的单个文件夹中。

如何修复代码提示缓存？我经常使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:07:14.040

这个错误有很多可能的原因，但是如果你正在使用像我这样的文件（在上面的问题中），其中 .FLA 目录中几乎没有，而 .FLA 目录中几乎没有。 FLA 库，解决方案可能就像**手动删除首选项文件一样简单。**

更详细地说：

第 1 步：关闭 Flash Professional CS6（或您拥有的任何版本……这在 CS5 和 CS5.5 上已知会发生）

第 2 步：删除与 .FLA 位于同一目录中的首选项文件。该名称类似于“[项目名称]-app.xml”（项目名称与您的 FLA 名称相同）。

第 3 步：在 Flash Professional 中重新打开您的 .FLA。错误图标（和问题）应该消失了。

--

还有其他可能的解决方案，具体取决于您的问题的性质。[可以在Adob​​e 论坛](http://forums.adobe.com/thread/629211)上找到这可能是我的解决方案（确实如此）以及其他一些可能的解决方案的原始线索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-10T09:58:25.607

帖子很晚，但因为没有一个答案对我有用；这是我[发现](https://forums.adobe.com/thread/1506250)的工作（使用 Adob​​e Animate 测试）：

> 1.  退出 Adob​​e Flash。
> 2.  删除代码提示文件夹：*C:\Users\<用户>\AppData\Local\Adobe\Flash CC 2014\en_US\Configuration\CodeModel*
> 3.  打开 Adob​​e Flash 并创建一个新文档。*编辑 => 首选项 => 代码编辑器*。*将“缓存文件”*更改为`1500`.
> 4.  写：`import<space>`你应该看到警告：*“Building Code Hint Cache...”*。如果没有，请按`Ctrl`+ `Space`。
> 5.  稍等一下，享受您的代码提示 :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-30T15:48:45.227

我意识到这是一篇旧帖子，但由于我偶然发现了它，我相信其他人也可能会。

我在使用 Adob​​e Flash CC (2014) 时遇到了这个问题，没有代码提示在最长时间内有效，并且我不断收到错误消息，指出“构建代码提示缓存”。

为我解决的问题是删除位于“Library/Application Support/Adobe/Flash CC 2014/en_US/Configuration/ **CodeModel** ”的文件夹“CodeModel” 。

确保在这样做时关闭 Flash，当您重新启动 Flash 时，将自动构建一个新的 CodeModel 文件夹，如果您喜欢我，您的代码提示将像魅力一样发挥作用。

我不保证任何事情，但我觉得这可能也适用于以前版本的 flash。

**编辑：按 control + 空格键似乎也强制代码提示启动**

# c# - EF MVC4 dropdownList 中的必需属性失败

> ID：15736369
> 
> 赞同：1
> 
> 时间：2013-04-01T01:08:16.923
> 
> 标签：c#, asp.net-mvc, entity-framework, razor, asp.net-mvc-4

我用 EF 创建了一个 MVC4 应用程序，我有两个简单的类，Brand 和 CarModel，Brand 有一个名称（必需）和 CarModel 有一个 Brand（必需）。问题是我在 ModelState.IsValid 上遇到错误，因为通过下拉菜单选择品牌，它只填写品牌 ID。

我怎样才能在品牌名称中留下所需但能够使用 CarModel 中的下拉菜单？这是我的代码：

```
 public class Brand
    {

        public int Id { get; set; } 
        [Required]       
        public string Name { get; set; }
        public string Logo { get; set; }

    }

    public class CarModel
    {
        public int Id { get; set; }
        [Required]
        public string Name{ get; set; }
        [Required]
        public Brand Brand{ get; set; }
    } 
```

我有完整的 Crud for Brand 工作正常。但是我正在尝试为 CarModel 做这件事，这是我在控制器中用于创建品牌的内容：

```
 public ActionResult Create()
        {
            ViewBag.BrandSelect = new SelectList(myRepository.GetBrands.ToList(), "Id", "Name");
            return View();
        }

  [HttpPost]
        public ActionResult Crear(CarModel carModel )
        {

            if (ModelState.IsValid)
            {

                myrepository.Create(Modelo);
                return RedirectToAction("Index");
            }

            return View(carModel );
        } 
```

并且在视图中

```
<div class="editor-label">
            @Html.LabelFor(model => model.Brand)
        </div>
        <div class="editor-field">

            @Html.DropDownListFor(model => model.Brand.Id,ViewBag.BrandSelect as SelectList)
            @Html.ValidationMessageFor(model => model.Brand)
        </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:33:43.580

如果我理解正确，您的 CarModel 类应该有一个 BrandId (int) 和一个 Brand 对象。

```
public class CarModel
{
    public int Id { get; set; }
    [Required]
    public string Name{ get; set; }
    [Required]
    public int BrandId { get; set; }

    public Brand Brand{ get; set; }
} 
```

您的 DropDownList 应该绑定到 BrandId

```
 @Html.DropDownListFor(model => model.BrandId, ViewBag.BrandSelect as SelectList)
        @Html.ValidationMessageFor(model => model.Brand) 
```

[更多 EF 代码 First Paren-Child](http://weblogs.asp.net/manavi/archive/2011/01/23/associations-in-ef-code-first-ctp5-part-3-one-to-one-foreign-key-associations.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:34:32.193

您有一个预先填充的项目`BrandSelect`，这意味着它`Brand.Id`保证存在于数据库中。此外，`Brand`当您创建`CarModel`. 因此，您可以使用一个视图模型来代表您`CarModel`的视图并将其返回到您的视图中，这是最佳实践。考虑一下：

**你的模型**

```
public class CarFormModel // this is a "model class" and not your entity
{
    public int Id { get; set; }
    [Required]
    public string Name{ get; set; }
    [Required]
    public int BrandId { get; set; }
    //replacement for your ViewBag.BrandSelect
    //you can also create a viewmodel for this
    //but let's use your entity for a more simple example
    public IEnumerable<Brand> Brands {get;set;}
} 
```

**您的控制器，用于 GET 方法**

```
public ActionResult Create()
{
    var model = new CarFormModel {
        Brands = get_brands_from_database(),
    }
    return View(model);
} 
```

**你的看法**

```
@model CarFormModel
<div class="editor-field">
    @Html.TextboxFor(model => model.Name) // capture the name of the car model
<div>
<div class="editor-field">
    @Html.DropDownListFor(model => model.BrandId, new SelectList(Model.Brands,  "Id", "Name", Model.BrandId)) // capture the brand for the car model
    @Html.ValidationMessageFor(model => model.BrandId)
</div> 
```

**您的控制器，用于 POST 方法**

```
[HttpPost]
public ActionResult Create(CarFormModel carModel)
{
    if (ModelState.IsValid) {
        // map the model back to entity or pass it to your service that creates the model
        myrepository.Create(the_mapped_or_created_carmodel_entity);
        return RedirectToAction("Index");
    }

    return View(carModel);
} 
```

此选项比您现在拥有的更好，因为您没有使用 ViewBag 作为下拉菜单，并且您没有在视图上公开代理对象。一个好的做法是始终在您的视图上使用视图模型。

# r - 绘图轴标题上的特殊字符和上标

> ID：15736370
> 
> 赞同：41
> 
> 时间：2013-04-01T01:08:21.410
> 
> 标签：r, plot, superscript, plotmath

我正在尝试使用特殊字符和上标制作 y 轴标题。我能够做到这一点，但我希望右括号不要上标。这就是我遇到的问题。我认为这只是我的括号，但我已经尝试了（似乎）一切。

```
plot(WatexCl, ConcuM, col = as.numeric(1), pch = as.numeric(Depth), 
   xlab = expression(paste("Concentration Cl  ( ", mu, "moles/g dry wt)")), 
   ylab = expression(paste("Average Conc of S- on plates ( ", mu, "Moles/cm"^"2"),)), 
   data = plates) 
```

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-01T01:38:08.603

`paste`用户经常无法理解的一件事是，在用于绘图标签的表达式中时，您总是不需要引用字符串并将它们一起引用。直接使用布局工具通常更简单（例如`~`和`*`）。例如：

```
df <- data.frame(y = rnorm(100), x = rnorm(100))

plot(y ~ x, data = df,
     ylab = expression(Average ~ Conc ~ of ~ S- ~ on ~ plates ~ 
                       (mu ~ Moles ~ cm^{-2} ~ dry ~ wt)),
     xlab = expression(Concentration ~ Cl ~ (mu ~ moles ~ g^{-1} ~ dry ~ wt))) 
```

或者，您可以为较长的文本部分包含字符串；在这种情况下，可以说更容易做到：

```
plot(y ~ x, data = df,
     ylab = expression("Average Conc of S- on plates" ~
                         (mu ~ moles ~ cm^{-2} ~ "dry wt")),
     xlab = expression("Concentration Cl" ~ (mu ~ moles ~ g^{-1} ~ "dry wt"))) 
```

但请注意这里不需要`paste`字符串和其他功能。

两者都产生：

![在此处输入图像描述](https://i.stack.imgur.com/Qbr3I.png)

请注意 plotmath 与上标 2 的问题。您可能希望为 y 轴边距添加一些额外空间以适应它：

```
op <- par(mar = c(5,4.5,4,2) + 0.1)
plot(y ~ x, data = df,
     ylab = expression("Average Conc of S- on plates" ~
                          (mu ~ moles ~ cm^{-2} ~ "dry wt")),
     xlab = expression("Concentration Cl" ~ (mu ~ moles ~ g^{-1} ~ "dry wt")))
par(op) 
```

生产

![在此处输入图像描述](https://i.stack.imgur.com/PDyMS.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-01T01:22:04.343

这解决了上标右括号的问题：

```
# reproducible data
plates <- data.frame(WatexCl = rnorm(100), ConcuM = rnorm(100), Depth = rnorm(100))

# alter the default plot margins so the 
# superscript in the y-axis label is completely displayed
par(mar=c(5,5,4,2))

# draw the plot
plot(WatexCl ~ ConcuM, data = plates,
     col = as.numeric(1), 
     pch = as.numeric(Depth), 
     xlab = bquote("Concentration Cl ("*mu~"moles/g dry wt)"), 
     ylab = bquote("Average Conc of S- on plates ("~mu~"Moles/cm"^"2"*")")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/dI4J3.png)

# css - IE8 位置固定，位置绝对内部溢出问题

> ID：15736376
> 
> 赞同：3
> 
> 时间：2013-04-01T01:09:20.460
> 
> 标签：css, internet-explorer-8

我一直在研究一个粘性菜单，里面有一个 megamenu 下拉菜单。当用户加载页面时，导航是静态的。导航类似于以下内容。

```
<div class='navigation'>
<ul>

<li><a href="">Home</a></li>
<li>
<a href="">About</a>
<div class='megamenu'>Megamenu</div>
</li>

</ul> 
```

不，megamenu 是绝对位置和左侧：-9999px；负载; 当用户滚动浏览导航时，我将位置更改为固定；这似乎在所有浏览器中都可以正常工作。

我遇到的问题是，在 IE8 中，导航似乎隐藏了溢出，因为导航之外的 megamenu 部分被剪掉了。

我试过在所有东西上设置 z-index 并且没有运气就可以看到溢出。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-14T12:01:51.357

所以我发现这是发生了一些错误。我在 megamenu 上有一个 z-index，它会出现在页面上的其他元素上。如果我删除它，它会起作用。但是我需要在那里，所以我看的更深一些，发现 IE 9 及以下版本讨厌固定菜单和我在导航背景上应用的渐变过滤器。我将其更改为常规颜色，它修复了所有问题。

# python - 查找网站中所有可能的链接 / 使用 Python 进行 Screen-Web Scraping

> ID：15736379
> 
> 赞同：0
> 
> 时间：2013-04-01T01:10:03.447
> 
> 标签：python, web-scraping, screen-scraping, web-crawler, web-search

这里有点开放式问题。我需要浏览招聘网站并搜索职位描述标签和技能要求（我已经完成了）。我基本上想知道，我如何在网站上爬行？如，从 test.com 到 test.com/a 等等....？？基本上，抓取页面。

这是我在页面内搜索的代码。我需要在站点中找到所有可能的此类页面并获取链接。这不是家庭作业。我只是在一边做这个...

```
import urllib2
import re

html_content = urllib2.urlopen('http://www.ziprecruiter.com/job/Systems-     Engineer/b5452eab/?source=customer-cpc-indeed').read()

matchDescription = re.findall('Bachelor', html_content);
matchSkill = re.findall('VMware', html_content);

print matchDescription
print matchSkill

if ( len(matchDescription) and len(matchSkill) )== 0: 
   print 'I did not find anything'
else:
   print 'My string is in the html' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:20:17.973

考虑使用`Scrapy`或其他一些现有的抓取框架。否则，您需要使用`lxml`或其他一些 HTML 解析器手动查找必要的链接，并使用基于`urllib`或类似的手动机制和一些数据结构来存储输入和输出数据。

# sql - 将 varchar 转换为日期 Sql

> ID：15736382
> 
> 赞同：0
> 
> 时间：2013-04-01T01:10:31.013
> 
> 标签：sql, sql-server

我有这样的表格数据

```
date       time       data 
25/09/07   07:49:08   A 
25/09/07   08:49:08   b 
25/09/07   08:50:08   c 
25/09/07   09:49:08   d 
26/09/07   05:21:08   e 
26/09/07   07:10:08   f 
26/09/07   09:21:08   g 
```

表 sql 中的格式日期为`varchar`

我想显示这样的表格

```
date       time      data 
25/09/07   07:49:08   A 
25/09/07   08:49:08   b 
25/09/07   08:50:08   c 
25/09/07   09:49:08   d 
```

如何使用 25/09/07 00:00:00 和 25/09/07 23:59:00 之间的日期查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:12:57.983

这应该非常简单，因为您可以只比较字符串：

```
SELECT *
FROM myTable
WHERE date = '25/09/07'
AND time <= '23:59:00' 
```

*   由于您只是检查一个日期而不是一个范围，因此您可以只使用字符串`=`比较。任何具有不同日期的行都不相等。

*   由于时间是 24 小时制安排的`hh:MM:ss`，你可以做一个词法比较。也就是说，例如，“23:58:03”将小于“23:59:00”，“02:03:59”也是如此。

* * *

要选择一系列日期，最简单的方法可能是：

```
SELECT *
FROM myTable
WHERE (CONVERT(datetime, date, 3) >= '2007-09-25'
       AND CONVERT(datetime, date, 3) < '2007-10-25')
OR    (CONVERT(datetime, date, 3) = '2007-10-25' AND time <= '23:59:00') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:33:48.703

只需在日期上使用“=”运算符。您可能不需要包括时间。

```
SELECT *
FROM   table1 t1
WHERE  t1.date = '25/09/07' 
```

干杯

# google-chrome-extension - Web Store 中新的 Chrome 扩展程序的统计信息和评级需要多长时间才能显示？

> ID：15736392
> 
> 赞同：9
> 
> 时间：2013-04-01T01:12:13.467
> 
> 标签：google-chrome-extension, chrome-web-store

发布了一个新的扩展，它可以在 Chrome 商店中找到并正确显示。

人们告诉我他们已经安装了它并给了它一个评级。

但是，没有任何活动公开显示或在开发人员仪表板中显示。

我只是经历了正常的滞后还是有什么东西坏了？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T01:26:16.833

根据我的经验，每周用户和统计图表等统计数据至少每天更新一次，有时甚至更新两次。至于收视率，他们大约需要一天的时间才能出现。我确定这只是正常的延迟，请等待一天，看看他们是否出现。

# python - Python GUI 中的实时绘图

> ID：15736393
> 
> 赞同：4
> 
> 时间：2013-04-01T01:12:21.063
> 
> 标签：python, user-interface, matplotlib, tkinter, export-to-csv

我正在尝试编写一个 Python GUI，我需要做一个实时绘图。我目前有一个程序从我正在使用的机器接收数据，我希望能够在收到机器输出的值时绘制它们。我一直在研究，从我目前的发现来看，在我看来，tkinter 或任何库都不能在 GUI 中做到这一点。有谁知道 tkinter 是否以及如何做到这一点，或者是否有另一个库能够进行这样的实时绘图？

另外，当我收到数据时，我将如何将收集到的数据写入文件？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T11:00:31.017

看起来您通过轮询获取数据，这意味着您不需要线程或多个进程。只需在您喜欢的界面上轮询设备并绘制一个点。

这是一个带有一些模拟数据的示例，以说明总体思路。它每 100 毫秒更新一次屏幕。

```
import Tkinter as tk
import random

class ServoDrive(object):
    # simulate values
    def getVelocity(self): return random.randint(0,50)
    def getTorque(self): return random.randint(50,100)

class Example(tk.Frame):
    def __init__(self, *args, **kwargs):
        tk.Frame.__init__(self, *args, **kwargs)
        self.servo = ServoDrive()
        self.canvas = tk.Canvas(self, background="black")
        self.canvas.pack(side="top", fill="both", expand=True)

        # create lines for velocity and torque
        self.velocity_line = self.canvas.create_line(0,0,0,0, fill="red")
        self.torque_line = self.canvas.create_line(0,0,0,0, fill="blue")

        # start the update process
        self.update_plot()

    def update_plot(self):
        v = self.servo.getVelocity()
        t = self.servo.getTorque()
        self.add_point(self.velocity_line, v)
        self.add_point(self.torque_line, t)
        self.canvas.xview_moveto(1.0)
        self.after(100, self.update_plot)

    def add_point(self, line, y):
        coords = self.canvas.coords(line)
        x = coords[-2] + 1
        coords.append(x)
        coords.append(y)
        coords = coords[-200:] # keep # of points to a manageable size
        self.canvas.coords(line, *coords)
        self.canvas.configure(scrollregion=self.canvas.bbox("all"))

if __name__ == "__main__":
    root = tk.Tk()
    Example(root).pack(side="top", fill="both", expand=True)
    root.mainloop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T04:32:50.053

据我了解，它可以用 tkinter/Qt/wxpython 等来完成。你只需要使用`mutlithreading`and `multiprocessing`。使用另一个模块可能有更简单的方法，但我不知道。

很长一段时间以来，我一直在研究与此问题类似的问题，而且这似乎是这个社区中一直存在的问题。

以下是一些讨论该问题的线程：

[如何在 Tkinter 窗口中刷新 matplotlib 图？](https://stackoverflow.com/questions/11270078/how-do-i-refresh-a-matplotlib-plot-in-a-tkinter-window)

[如何在拟合函数时更新 matplotlib 图？](https://stackoverflow.com/questions/11239095/how-do-i-update-a-matplotlib-figure-while-fitting-a-function)

# c - 使用 MinGW 构建简单的 DLL

> ID：15736398
> 
> 赞同：5
> 
> 时间：2013-04-01T01:13:12.650
> 
> 标签：c, gcc, dll, mingw

我已经阅读了这里的所有内容以及我在网上可以找到的所有关于这样做的信息，但这些信息已经过时、相互矛盾或不适用。我有一个非常简单的 C 库，我将其编译为 Linux 中的共享库，并且一切正常。我想将此移植到 Windows DLL。自 1990 年代以来我就没有对 Windows 进行过编程，但我对它的复杂性并不是完全一无所知（事实上，它们是我使用 Linux 的原因:-)。

生成库的 MinGW 编译器行是这样的（由 cmake 生成）：

```
gcc.exe -Wl,--export-all -Wl,--enable-auto-import -shared -o libonejoker.dll -Wl,--out-implib,libonejoker.dll.a -Wl,--major-image-version,0,--minor-image-version,0 -Wl,--whole-archive CMakeFiles/onejoker.dir/objects.a -Wl,--no-whole-archive -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32 
```

不知道为什么或是否需要所有这些库，因为我根本没有在库中进行任何操作系统调用，但是 cmake 将它们放在那里。这将创建 dll 和 .dll.a。我告诉 cmake 添加 -Wl,--export-all，尽管这应该是默认值。尝试将我的简单测试程序与新创建的 dll 链接这样做：

```
gcc.exe -g @CMakeFiles/test004.dir/includes_C.rsp -o CMakeFiles/test004.dir/test004.c.obj -c /c/Users/Lee/Projects/OneJoker/src/tests/test004.c

gcc.exe -g -Wl,--whole-archive CMakeFiles/test004.dir/objects.a -Wl,--no-whole-archive  -o test004.exe -Wl,--out-implib,libtest004.dll.a -Wl,--major-image-version,0,--minor-image-version,0  -L/C/Users/Lee/Projects/OneJoker/build/src/lib  ../lib/libonejoker.dll.a -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32 
```

如果程序“test004”没有从 DLL 中调用任何函数，它就可以正常工作。一旦我取消注释从库中调用任何函数的任何行，它就会静默失败，甚至没有进入 main()。gdb 没有给出堆栈跟踪，但是说：

```
During startup program exited with code 0xc0000135. 
```

谷歌搜索并没有发现任何有用的东西。请注意：

*   代码全部使用 C，而**不是**C++。
*   该代码不包含 __declspec()s 或任何其他 Windows 主义；GCC 文档非常清楚地暗示它们不是必需的，但其他有关创建 DLL 的教程将它们放入。我希望 DLL 像在 Linux 上那样导出所有内容。
*   编译器行是由 cmake 生成的，因为我认为这会使移植更容易，但如果手动构建做正确事情的 Makefile 更容易，我很乐意放弃 cmake。

任何指向正确方向的指针都会有所帮助，包括仅将我指向未过时且不适用于 C++ 的文档。

# django - django 呈现一个空白页面

> ID：15736399
> 
> 赞同：5
> 
> 时间：2013-04-01T01:13:21.790
> 
> 标签：django, django-templates, django-views, django-inheritance

首先，我想承认，我对 Django 完全陌生。我正在尽可能地学习。我正在阅读一本名为“Beginning Django E-Commerce”的书。在不希望侵犯版权的情况下，也许你们可以发现我哪里出错了。我正在使用 Django 1.4.3，我正在使用的书可能是为 Django 1 编写的，也许是 1.1，但这里有。

我的 base.html

> ```
> <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "XHTML1-s.dtd" >
> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
> <head>
>     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
>     <title>{% block title %}{% if page_title %}{{ page_title }} - {% endif %}
>             {{ site_name }}{% endblock %}</title>
>     <meta name="keywords" content="{{ meta_keywords }}" />
>     <meta name="description" content="{{ meta_description }}" />
> </head>
> <body>
>     {% block site_wrapper %}{% endblock %}
> </body>
> </html> 
> ```

我的目录.html：

```
{% extends "base.html" %}

{% block site_wrapper %}
<div id="main">
    <a href="#content" class="skip_link">Skip to main content</a>
    <div id="banner">
            <div class="bannerIEPadder">
                    <div class="cart_box">
                            [link to cart here]
                    </div>
                    Modern Musician
            </div>
    </div>
    <div id="navigation">
            <div class="navIEPadder">
                    [navigation here]
            </div>
    </div>
    <div id="middle">
            <div id="sidebar">
                    <div class="sidebarIEPadder">
                            [search box here]
                    <br />
                            [category listing here]
                    </div>
            </div>
            <div id="content">
                    <a name=”content”&gt;</a>
                    <div class="contentIEPadder">
                            {% block content %}{% endblock %}
                    </div>
            </div>
    </div>
    <div id="footer">
            <div class="footerIEPadder">
                    [footer here]
            </div>
    </div>
</div>
{% endblock %} 
```

我的 index.html：

```
{% extends "catalog.html" %}

{% block content %}
    <h2>Welcome!</h2>
{% endblock %} 
```

所有这些文件都存储在模板目录中。此时的书建议我运行以下命令：

```
python manage.py startapp preview 
```

并调整我的 urls.py：

> urlpatterns = patterns('', ... (r'^catalog/$', 'preview.views.home'), )

调整预览目录下的views.py：

```
from django.shortcuts import render_to_response

def home(request):
  return render_to_response("index.html") 
```

然后你应该能够看到一个页面，上面写着：

> 跳转到主要内容 [此处链接到购物车] 现代音乐家 [此处导航] [此处搜索框] [此处分类列表] 欢迎！[此处为页脚]

但是，我得到的只是一个空白页。谁能弄清楚为什么？（这本书可能只是过时了）当我查看空白页的来源时。

这实际上是 base.html 的空白渲染。在开发服务器中，我没有错误：

```
python manage.py runserver localhost:8000      (wd: ~/websites/ecomstore) 
Validating models... 0 errors found Django version 1.4.3, using settings 'ecomstore.settings' 
Development server is running at http://www.localhost.com:8000/ Quit the server with CONTROL-C. 
[01/Apr/2013 02:13:06] "GET /catalog/ HTTP/1.1" 200 352 
[01/Apr/2013 02:13:08] "GET /catalog/ HTTP/1.1" 200 352 
[01/Apr/2013 02:13:09] "GET /catalog/ HTTP/1.1" 200 352 
[01/Apr/2013 02:33:33] "GET /catalog/ HTTP/1.1" 200 352 
```

[我的步骤的完整列表，请参阅此站点](http://d.hatena.ne.jp/pythonista666/?of=10)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:31:45.163

答案是问题是人为错误。我在代码中有一个类型，很可能是间距问题（遗憾的是我没有使用 eclipse）。这个答案在发布之前仔细阅读并仔细检查所有内容，否则您将不得不非常懊悔（像我一样！）。我要去躲在我从下面爬出来的 django 岩石下！快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:05:06.120

**尝试在您的catalog.html**或**base.html**中插入 {% block content %}您的问题将是因为您从**catalog < base**继承，并且在这些模板上没有此**块**用于渲染。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-03T10:34:50.397

首先，您应该告诉 django 您制作的应用程序确实存在。转到 setting.py 并转到 Installed_app 并在其中包含您的应用程序，如下所示：

```
 INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'preview.apps.PreviewConfig',
] 
```

然后你必须去主目录并运行 urls.py 并添加这个 url：

```
from django.conf.urls import url,include
from django.contrib import admin

urlpatterns = [
  url(r'^$', include ('preview.urls')),
  url(r'^admin/', admin.site.urls),
] 
```

在此之后，您应该在预览文件夹中创建一个 python 文件并将其命名为 urls.py。在那里您必须为您的预览应用程序定义您的 url 模式。

```
from django.conf.urls import url
from . import views

urlpatterns = [
url(r'^$', IndexView.as_view()),
] 
```

最后一步是您必须定义视图。为了做到这一点，请转到 previews 文件夹中的 views.py 并运行 views.py

```
from django.views.generic import TemplateView

class IndexView(TemplateView):
  template_name = "index.html" 
```

# javascript - Javascript幻灯片效果

> ID：15736400
> 
> 赞同：2
> 
> 时间：2013-04-01T01:13:25.433
> 
> 标签：javascript, slideshow

我回来了=）基于我知道有效的幻灯片的代码，我用方形框替换了图像，我希望它们以秒为间隔一个接一个地“激活”。我根本不明白代码有什么问题。

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>MiniAnimation</title>

        <script type="text/javascript">

            window.addEventListener("load",onLoadWindow);

            var active_slide;
            var slides;

            function onLoadWindow(e) {
                var slideShow=document.getElementById("boxofBoxes");
                slides=slideShow.getElementsByTagName("div");
                active_slide=0;

                slides[0].classList.add("active");

                setInterval(nextSlide,1000);
            }

            function nextSlide () {
                slides[active_slide].classList.remove("active");
                active_slide++;

                active_slide%=5;

                slides[active_slide].classList.add("active");
            }

        </script>

        <style type="text/css">

            body {
                background-color:lightblue;
            }

            .active {
                opacity:1;
                transition:opacity 1s;
            }

            .box {
                display:block;
                float:left;
                width:25px;
                height:25px;
                background-color:white;
                margin-left:63px;
                opacity:0;
            }

            #boxofBoxes {
                width:503px;
            }

        </style>

    </head>

    <body>
        <div id="boxofBoxes">
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
            <div class="box"></div>
        </div>
    </body>

</html> 
```

再一次感谢你的帮助 ！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:28:57.073

由于您的 CSS 的编写顺序， 将`opacity: 0;`覆盖`opacity: 1;`. 试试这样：

```
.box {
    display:block;
    float:left;
    width:25px;
    height:25px;
    background-color:white;
    margin-left:63px;
    opacity:0;
    transition: opacity 1s;
}

.active {
    opacity: 1;    
} 
```

您必须自己弄清楚不透明度过渡和定位，但希望这会有所帮助！

这是一个 jsFiddle 玩：http: [//jsfiddle.net/sJNvw/](http://jsfiddle.net/sJNvw/)

# javascript - Javascript：获取输入并将其设置为数组名称

> ID：15736401
> 
> 赞同：0
> 
> 时间：2013-04-01T01:13:36.930
> 
> 标签：javascript, arrays

我的脚本中有一组数组，如下

```
var data0 = [100,10,15,20];
var data1 = [5,100,15,20];
var data2 = [5,10,100,20];
var data3 = [5,10,15,100]; 
```

我通过点击事件获得输入，这将是点击的索引。

```
function clickEvent(i) {
var dataNum = "data" + i;
        render2(i); 
    } 
```

我想在我们作为输入的索引处设置一个等于数组的新变量。在java中，这会奏效。但是在这里，我认为 dataNum 是一个字符串而不是一个数组。无论如何，我可以将 dataNum 设置为数组吗？

例如，当我的点击事件返回索引 0 时，我希望将 dataNum 设置为数组 data0

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:16:53.980

如果您使用一个数组来保存数据，这可能会更容易：

```
var data = [
    [100, 10, 15, 20],
    [5, 100, 15, 20],
    [5, 10, 100, 20],
    [5, 10, 15, 100]
]; 
```

然后您可以像访问任何其他数组一样访问数组索引：

```
function clickEvent(i) {
    var dataNum = data[i];
    render2(i); 
} 
```

[***现场演示***](http://jsfiddle.net/dgTw4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:16:52.410

您可以使用 eval("data" + i) 评估字符串中的代码并从中获取数组。

但我会使用另一个答案，将它作为数组数组保存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T01:17:04.960

你应该使用[二维](http://www.leepoint.net/notes-java/data/arrays/arrays-2D.html)数组来处理它。

# c# - ASP.NET Web API 中的 Castle Windsor/DelegatingHandler/IPrincipal 依赖注入 (DI)/控制反转 (IoC)

> ID：15736402
> 
> 赞同：4
> 
> 时间：2013-04-01T01:13:49.677
> 
> 标签：c#, asp.net, dependency-injection, inversion-of-control, castle-windsor

我决定清理这篇文章，并在[ge.tt/3EwoZEd/v/0?c上发布了一个示例项目](http://ge.tt/3EwoZEd/v/0?c)

已经花了大约 30 个小时，但仍然无法弄清楚......非常感谢帮助！

我有一个使用此代码的 ASP.NET Web API 解决方案：**[http](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)** ://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/来实现“基本ASP.NET Web API 中使用消息处理程序的 HTTP 身份验证”。我是 IoC/DI 的新手，我正试图让它与温莎城堡一起工作。

我一直在尝试很多不同的事情，但根据我做错了什么，我得到了以下错误之一：

*   “您好像忘记注册 http 模块 Castle.MicroKernel.Lifestyle.PerWebRequestLifestyleModule”
*   “你调用的对象是空的。” BasicAuthMessageHandler 中的 PrincipalProvider
*   “未找到支持服务 *.DummyPrincipalProvider 的组件”

下面是我的代码：

* * *

**全球.asax.cs：**

```
private static IWindsorContainer _container;

protected void Application_Start()
{
    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);

    var config = (CustomErrorsSection)ConfigurationManager.GetSection("system.web/customErrors");

    IncludeErrorDetailPolicy errorDetailPolicy;

    switch (config.Mode)
    {
        case CustomErrorsMode.RemoteOnly:
            errorDetailPolicy
                = IncludeErrorDetailPolicy.LocalOnly;
            break;
        case CustomErrorsMode.On:
            errorDetailPolicy
                = IncludeErrorDetailPolicy.Never;
            break;
        case CustomErrorsMode.Off:
            errorDetailPolicy
                = IncludeErrorDetailPolicy.Always;
            break;
        default:
            throw new ArgumentOutOfRangeException();
    }

    GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = errorDetailPolicy;

    ConfigureWindsor(GlobalConfiguration.Configuration);

    GlobalConfiguration.Configuration.MessageHandlers.Add(new BasicAuthMessageHandler()
    {
        PrincipalProvider = _container.Resolve<IProvidePrincipal>()
    });
}

public static void ConfigureWindsor(HttpConfiguration configuration)
{
    // Create / Initialize the container  
    _container = new WindsorContainer();

    // Find our IWindsorInstallers from this Assembly and optionally from our DI assembly which is in abother project.  
    _container.Install(FromAssembly.This());
    _container.Kernel.Resolver.AddSubResolver(new CollectionResolver(_container.Kernel, true));

    //Documentation http://docs.castleproject.org/Windsor.Typed-Factory-Facility.ashx  
    // Set the WebAPI DependencyResolver to our new WindsorDependencyResolver  
    var dependencyResolver = new WindsorDependencyResolver(_container);
    configuration.DependencyResolver = dependencyResolver;
} 
```

* * *

**温莎安装程序：**

```
public class PrincipalsInstaller : IWindsorInstaller
{
    public void Install(IWindsorContainer container, IConfigurationStore store)
    {
        container.Register(Classes.FromThisAssembly().BasedOn<DelegatingHandler>());

        container.Register(
            Component.For<IProvidePrincipal>().ImplementedBy<DummyPrincipalProvider>()
        );
    }
} 
```

* * *

**修改后的 DummyPrincipalProvider （来自我从[上面的 URL](http://www.piotrwalat.net/basic-http-authentication-in-asp-net-web-api-using-message-handlers/)获得的原始版本）：**

```
public class DummyPrincipalProvider : IProvidePrincipal
{
    private IUserRepository _userRepo;

    public DummyPrincipalProvider(IUserRepository userRepo)
    {
        this._userRepo = userRepo;
    }

    public IPrincipal CreatePrincipal(string username, string password)
    {
        try
        {
            if (!this._userRepo.ValidateUser(username, password))
            {
                return null;
            }
            else
            {
                var identity = new GenericIdentity(username);
                IPrincipal principal = new GenericPrincipal(identity, new[] { "User" });

                if (!identity.IsAuthenticated)
                {
                    throw new ApplicationException("Unauthorized");
                }

                return principal;
            }
        }
        catch
        {
            return null;
        }
    }
} 
```

* * *

**WindsorDependencyResolver.cs：**

```
internal sealed class WindsorDependencyResolver : IDependencyResolver
{
    private readonly IWindsorContainer _container;

    public WindsorDependencyResolver(IWindsorContainer container)
    {
        if (container == null)
        {
            throw new ArgumentNullException("container");
        }

        _container = container;
    }

    public object GetService(Type t)
    {
        return _container.Kernel.HasComponent(t) ? _container.Resolve(t) : null;
    }

    public IEnumerable<object> GetServices(Type t)
    {
        return _container.ResolveAll(t).Cast<object>().ToArray();
    }

    public IDependencyScope BeginScope()
    {
        return new WindsorDependencyScope(_container);
    }

    public void Dispose()
    {

    }
} 
```

* * *

**WindsorDependencyScope.cs：**

```
internal sealed class WindsorDependencyScope : IDependencyScope
{
    private readonly IWindsorContainer _container;
    private readonly IDisposable _scope;

    public WindsorDependencyScope(IWindsorContainer container)
    {
        if (container == null)
        {
            throw new ArgumentNullException("container");
        }
        _container = container;
        _scope = container.BeginScope();
    }

    public object GetService(Type t)
    {
        return _container.Kernel.HasComponent(t) ? _container.Resolve(t) : null;
    }

    public IEnumerable<object> GetServices(Type t)
    {
        return _container.ResolveAll(t).Cast<object>().ToArray();
    }

    public void Dispose()
    {
        _scope.Dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T07:59:49.330

我假设 IProvidePrincipal 是您自己的实现。恕我直言，使用 IoC 容器的唯一方法是[Composition Root](http://blog.ploeh.dk/2011/07/28/CompositionRoot/)。[ploeh 的博客](http://blog.ploeh.dk/2012/10/03/DependencyInjectioninASP.NETWebAPIwithCastleWindsor/)已经很好地解释了 web api 的入口点/组合根。DelegatingHandler 不是“请求解析”的一部分，因此您可以选择在全局 asax Application_start 中解析它，其中容器作为私有变量存在。

```
GlobalConfiguration.Configuration.MessageHandlers.Add(container.Resolve<BasicAuthMessageHandler>()); 
```

如果您在容器中正确注册了处理程序及其所有依赖项，则无需执行任何其他操作：您从容器中提取并添加到 MessageHandler 中的处理程序实例将具有 IPrincipalProvider 和 (I)UserRepository。请记住，BasicAuthMessageHandler 将充当单例，因此如果您在每个方法调用上都需要一个 (I)UserRepository 的新实例...您可以考虑[使用 TypedFactory](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx?HL=typedfactory)创建您的 (I)UserRepository 作为后期依赖项

当然，从你的 top graph 组件开始的任何组件都必须[在 container 中注册](http://docs.castleproject.org/Windsor.Three-Calls-Pattern.ashx)。

这是最简单的方法......如果您需要更复杂的东西，您可能最终也会为 DelegatingHandlers 创建“组合根”。

顺便说一句：永远，永远，做一些像 UserRepository userRepo = new UserRepository(); 或 PrincipalProvider = new DummyPrincipalProvider()

不应显式创建任何“行为实例”：容器负责在正确的时间提供正确的实例......

**根据 Jon Edit：** 现在 DummyPrincipalProvider 看起来不错：请记住，由于 DummyPrincipalProvider 是在消息处理程序中创建的（由于全局注册而充当单例），因此您总是重用相同的实例。

而不是你的管道

```
var dependencyResolver = new WindsorDependencyResolver(_container);
configuration.DependencyResolver = dependencyResolver; 
```

我宁愿使用 ploeh 实现（见上文）。

您的注册

```
container.Register(
    Component.For<IProvidePrincipal>().ImplementedBy<DummyPrincipalProvider>()
    .UsingFactoryMethod(kernel => kernel.Resolve<DummyPrincipalProvider>())
); 
```

应该替换为

```
container.Register(
    Component.For<IProvidePrincipal>().ImplementedBy<DummyPrincipalProvider>()
); 
```

那是错误的......容器必须解决它，而不是你明确

```
GlobalConfiguration.Configuration.MessageHandlers.Add(new BasicAuthMessageHandler()); 
```

坚持我上面的配置：BasicAuthMessageHandler 通过容器解析。

让我知道它是否有效。

PS：您在容器中注册了 TypedFactory 设施，但您没有使用它......只是为了让您知道。您将 DelegatingHandler(s) 注册为 Transient，但请记住，它们在设计上将是“单例”：将其添加到 MessageHandlers 集合意味着它们将在每个请求上被重用。

**根据乔恩编辑 2：**

我[在 github 上添加了一个示例](https://github.com/cristiano-degiorgis/WebApi4-PrincipalProvider)。您应该能够使用 NuGet 包还原来构建和运行它

您关于 PerWebRequest 的问题取决于 NHibernate 工厂会话创建会话“PerWebRequest”上 UserRepository 的依赖关系：由于 HttpContext，您无法在 Application_Start 中解析 IPrincipalProvider->IUserRepository->ISession。如果你真的需要一个 IUserRepositry 工作 w/ IPrincipalProvider 依赖必须是一个 IUserRepositoryFactory(TypedFactory) 代替。我尝试使用类型化工厂修复您的示例并且它可以工作，但是我遇到了 NHibernate 配置的问题，并且由于我不是这方面的专家，所以我没有再进一步。

如果您需要工厂方面的帮助... LMK 和我将使用 DummyPrincipalProvider 中的工厂更新我的 git 示例

# javascript - 将所有文本链接转换为实际链接

> ID：15736403
> 
> 赞同：1
> 
> 时间：2013-04-01T01:14:10.903
> 
> 标签：javascript, jquery, html

如何将页面中的所有文本链接转换为实际链接？

例如，我想像这样更改所有文本链接：

```
<p>http://www.google.com</p> 
```

或在这样的表中：

```
<td>http://www.google.com</td> 
```

进入这个：

```
<a href="http://www.google.com">http://www.google.com</a> 
```

还有这个：

```
<td><a href="http://www.google.com">http://www.google.com</a></td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:04:45.790

我想这个问题已经被问过了。

这是答案：

[jQuery文本链接脚本？](https://stackoverflow.com/questions/247479/jquery-text-to-link-script)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:25:18.143

这就是你需要的：

```
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>
    function createLinks(){
      $('p, td').filter(function() {
        return this.innerHTML.match(/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?/);
      }).each(function(){
        var link = $('<a>', { href: this.innerHTML,
                              text: this.innerHTML });

        if(this.tagName == "P")
          this.parentNode.replaceChild(link[0], this);
        else{
          this.removeChild(this.childNodes[0])
          this.appendChild(link[0]);
        }
      });
    }

    $(document).ready(function(){
      $('#create_links').click(function(){
        createLinks();
      });
    });
  </script>
  <style>
    a{
      display:block;
    }
  </style>
</head>
<body>
  <p>This shouldn't became a link</p>
  <p>http://www.thisshouldbecamealink.com</p>
  <p>http://www.anotherlink.com</p>
  <table>
    <tr>
      <td>Not a link</td>
    </tr>
    <tr>
      <td>http://www.validlink.com</td>
    </tr>
  </table>
  <button id="create_links">Create links</button>
</body>
</html> 
```

# php - PHP根据数据库设置/显示组合框值

> ID：15736405
> 
> 赞同：0
> 
> 时间：2013-04-01T01:15:01.730
> 
> 标签：php, mysql, combobox

首先，我有两个通过 id 关联的动态组合框，我使用此脚本填充我的组合框。

```
<script type="text/javascript">
$(document).ready(function()    {
$(".country").change(function()    {
var id=$(this).val();
var dataString = 'id='+ id;

$.ajax
({
type: "POST",
url: "ajax_city.php",
data: dataString,
cache: false,
success: function(html)
{
$(".city").html(html);
} 
});

});
});
</script> 
```

这是combobox1的我的php代码：所以当我从中选择项目时，combo2将只显示来自所选项目的所有内容。

```
<select name="municipality" class="country" style="width: 200px;">
              <option selected="selected"></option>
                <?php
                    //include('db.php');
                    $sql=mysql_query("select idmun,munname from municipality");
                    while($row=mysql_fetch_array($sql))
                    {
                    $id=$row['idmun'];
                    $data=$row['munname'];
                    echo '<option value="'.$id.'">'.$data.'</option>';
                     }
                ?>
        </select> 
```

这是combobox2：它只会显示与combo1所选项目相关的值

```
<td>Barangay</td>
<td>
    <select name="barangay" class="city" style="width: 200px;>
      <option selected="selected"></option>
    </select>
</td> 
```

现在上面的代码有效，当我从combo1中选择项目时，combo2填充了与combo1相关的所有项目。**`MY PROBLEM`**现在是如何将值返回/设置/获取回它。例如，我已将其保存到数据库中，并且我想编辑该记录，我需要`display/set`将组合框的项目与数据库相对应。

我有这个解决方案，我已经根据数据库成功设置了combo1的值，但是它只是没有填充整个项目，只是来自数据库的项目。而且它似乎也没有填充我的combo2。

```
<select name="municipality" class="country" style="width: 200px;">
          <option selected="selected"></option>
            <?php
                echo $munname;
                $sql=mysql_query("select idmun,munname from municipality");
                while($row=mysql_fetch_array($sql))
                {
                $id=$row['idmun'];
                $data=$row['munname'];
                 if($id==$_GET['mun']){
                        echo "<option value='".$id."' selected = 'selected'>".$data."</option>";
                    }
                    else {
                        echo "<option value='".$id."'>".$data."</option>";
                    }
                } 
            ?>
    </select> 
```

我已经在这个论坛上搜索过类似的问题，但由于使用了不同的解决方案和代码行，这让我感到困惑，而且我根本不是那个专家。因此，任何好的/简单的示例或解决方案都值得赞赏。

# python - 如何使我的程序不是数组/列表，而是做应该做的事情

> ID：15736409
> 
> 赞同：0
> 
> 时间：2013-04-01T01:16:25.830
> 
> 标签：python, python-3.x

我最近开始使用 python，我想知道如何在不使用数组/列表的情况下使我的程序具有相同的输出。基本上，它会打开一个包含数字的文件，然后打印最大的数字以及文件中的数字数量。我想知道如何将我的程序转换成不使用数组/列表格式的东西。

```
def main():
    infile = open('numbers.dat', 'r')

    numbers = []
    for line in infile:
        numbers.append(int(line))
    infile.close()

    largest = max(numbers)
    print('The largest number in the file is: ',largest)

    count = len(numbers)
    print('The amount of numbers in the file is: ', count)
main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:09:47.277

```
def main():
    with open('numbers.dat') as infile:
        largest_num = float('-inf') # in case all your numbers are negative,
                                    # 0 can't be default
        for i, line in enumerate(infile, 1): # i is the line number
            largest_num = max(largest_num, int(line))
        print 'Largest num is: ', largest_num
        print 'num of lines is: ', i

main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:28:02.230

在这种情况下没有理由不使用数组，但如果你真的想不使用数组，你可以这样做。

```
def main():
    infile = open('numbers.dat', 'r')

    largest = 0
    count = 0
    for line in infile:
        number = int(line)

        if number > largest:
            # If the number on the line we are currently reading is greater than,
            # our previously highest. Set the highest to this number instead.
            largest = number

        # Increment the number of lines we have read.
        count += 1

    infile.close()

    # Finally print the values we got from parsing the file
    print('The largest number in the file is: %s' % largest)
    print('The amount of numbers in the file is: %s' % count)
main() 
```

# for-loop - 关于 Python 中 for 循环的非常基本的 Q

> ID：15736410
> 
> 赞同：0
> 
> 时间：2013-04-01T01:16:50.110
> 
> 标签：for-loop, python-2.7

我正在学习 Python，所以这是一个非常基本的问题，一直困扰着我关于*for*循环的问题。下面是一个非常简单的循环。

```
def rot13(entry):
    for each_word in entry:
        return each_word

print rot13("hello") 
```

当我运行它时，我的输出是“h”。我知道*for*循环总是遍历字符串的每个字符，所以我很困惑为什么它只打印第一个字符而不是整个字符串。通过for循环后，如何让它打印“hello”作为一个字符串？在此先感谢您对新手的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:20:38.983

这是因为当你`return`ing时`each_word`，你`h`只返回字母，然后函数停止。

像这样考虑它：

```
def rot13(entry):
    for each_word in entry: # Starts with h
        print each_word
        # Prints h
        return each_word
        # Returns the letter h. Breaks. 
```

要打印整个单词，您可以完全`return entry`不使用 for 循环。或者，如果您想打印每个字母然后返回单词，请将 return 语句放在 for 循环之外：

```
def rot13(entry):
    for each_word in entry:
        print each_word
    return entry 
```

当被调用时：

```
>>> rot13('hello')
h
e
l
l
o
'hello' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:21:52.697

该声明

```
 return each_word 
```

使控件返回调用语句。这样只`h`打印第一个元素。采用

```
def rot13(entry):
    for each_word in entry:
        print each_word, 
```

打印整个单词。或者要返回整个单词，只需使用`return entry`

# javascript - 在 Moovweb 上时，javascript 是否必须捆绑到一个文件中？

> ID：15736412
> 
> 赞同：2
> 
> 时间：2013-04-01T01:16:52.767
> 
> 标签：javascript, moovweb

我在 Moovweb SDK 中工作。到目前为止，我使用的所有 javascript 都已放入 javascript 的“main”文件夹中，并在该文件夹中捆绑到 main.js 文件中。我们可以拆分 javascript 文件，只包含我们需要的每页内容，而不是将所有脚本捆绑在一起吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T06:18:59.723

要使用 Moovweb SDK 添加单个 Javascript 文件，请使用`insert()`相应 TS 文件中的函数。

您可以使用以下方法从项目文件夹中添加单个 Javascript 文件`assets/`：

```
insert("script", type: "text/javascript", src: asset("javascript/MY_JS_FILE.js")) 
```

您也可以使用相同的技术添加远程托管的 Javascript 文件：

```
insert("script", type: "text/javascript", src: "//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js") 
```

如果您希望在整个站点中添加此 Javascript 文件，您需要将代码行添加到`html.ts`文件中。如果您只希望该 Javascript 文件出现在主页上，请将代码行放在`pages/home.ts`文件中。等等......你明白了！

* * *

默认情况下，如[docs](https://console.moovweb.com/learn/reference/tools/javascript#Fusion)`assets/javascript/main`中一样，Moovweb SDK 将所有 JS 文件放在`main.js`.

使用上述技术，您可以轻松地**不使用捆绑**并单独提供 JS 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T15:52:07.830

您还可以将 JavaScript 范围限定为仅适用于某些页面。

如果您遵循将类添加到所有转换页面的正文的约定，那么您可以轻松地使用它来识别您的 JavaScript 在哪些页面上运行。

例如：

```
x$(document).on("DOMContentLoaded", function() {
  x$("body._home").each(function() {
    // my javascript
  });
}); 
```

将仅在具有“_home”类的正文的页面上运行您的 JS。

这样，您的 JavaScript 仍然与其他脚本捆绑在一起。

# php - 将 foreach php 查询转换为 SQL

> ID：15736415
> 
> 赞同：0
> 
> 时间：2013-04-01T01:16:54.257
> 
> 标签：php, mysql, query-optimization

我有两个执行相当缓慢的 php 函数，因为我有一个大型数据库。一个人请求类别名称。另一个进行子类别计数。下面，我尝试转换为 SQL 以加快查询速度，但不确定如何解决 foreach 循环，或者这是否是最有效的 SQL 查询方法。感谢您的反馈。

首先：

```
function GetCatName($catid){
global $db, $dblang, $the_cats;

foreach($the_cats as $cat){
    if($cat->category_id == $catid && $cat->category_lang == $dblang)
    {
        $x = $cat->category_name;
    }
}
return $x;
} 
```

重写为 SQL：

```
function GetCatName($catid){
global $db, $dblang;

$sql = "SELECT category_name FROM ".table_categories." where category_id = ".$catid." and category_lang = ".$dblang.";";

$x = $db->get_result($sql);

return $x;
} 
```

第二：

```
 function GetSubCatCount($catid){
global $db, $the_cats;

$count = 0;

foreach($the_cats as $cat){
    if(isset($cat->category_parent)){
        if($cat->category_parent == $catid && $cat->category__auto_id <> 0 && $cat->category_lang == $dblang)
        { 
            $count = $count + 1;
        }
    }
}

return $count;
} 
```

重写为 SQL：

```
function GetSubCatCount($catid){
global $db, $the_cats;

$count = 0;

foreach($the_cats as $cat){
    if(isset($cat->category_parent)){
    $sub_cateogories = $db->get_results("SELECT * FROM ".table_categories." where category_parent = ".$cat->category__auto_id." and category_order = 0 AND category__auto_id<>0;");
    $count = count($sub_cateogories);
    }
}

return $count;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:25:21.307

正如我在评论中提到的，您需要使用`$catid`，否则查询没有任何改进。

这可以像您在更换的第一种情况下那样完成

```
$cat->category_id == $catid && $cat->category_lang == $dblang 
```

通过

```
category_id = ".$catid." and category_lang = ".$dblang." 
```

这将使我们将`where`声明更改为

```
category_parent = ".$catid." and category_order = 0 AND category_auto_id<>0 
```

当然不使用 foreach 循环

# java - 实现 Java 树方法

> ID：15736416
> 
> 赞同：-1
> 
> 时间：2013-04-01T01:17:05.010
> 
> 标签：java

我必须为二叉树实现递归方法，并想看看我编写的方法是否正确实现，因为我无法测试它们。这些不是实际的方法。我只需要编写算法的伪代码。

a) 计算树中的节点数

```
countNodes(TreeNode root){
    if(root == null)
        return 0;
    else{
        TreeNode left = root.getLeftChild();
        TreeNode right = root.getRightChild();
        return (countNodes(left)+countNodes(right)) + 1;
    }
} 
```

b) 计算树的高度

```
height(TreeNode root){
    if(root == null)
        return 0;
    else{
        return Math.max(height(root.getLeftChild()), height(root.getRightChild()) +1;
    }
} 
```

c) 找到最大元素

```
maxElem(TreeNode root){
    if(root == null)
        return 0;
    else{
        int temp = 0;
        temp = Math.max(maxElem(root.getLeftChild()), maxElem(root.getRightChild()));
        return Math.max(root.getValue, temp);
    }
} 
```

d) 求元素之和

```
sum(TreeNode root){
    if(root == null)
        return 0;
    else{
        return (sum(root.getLeftChild()) + sum(root.getRightChild())) + root.getValue();
    }
} 
```

e) 求元素的平均值

```
average(TreeNode root){
    int sum = sum(root);
    int elems = countNodes(root);
    return sum/elems;
} 
```

f) 查找特定项目

```
search(int i, TreeNode root){
    if(root == null)
        return false;
    else if(root.getValue == i)
        return true;
    else{ 
        search(i, root.getLeftChild);
        search(i, root.getRightChild);
    }
} 
```

g) 确定一个项目是否是另一个项目的祖先

```
isAncestor(TreeNode p, NodeNode c){
    if(p==null)
        return false;
    else
        return (c in p.getLeftChild() || c in p.getRightChild())
} 
```

h) 确定已满的最高级别

```
maxFull(TreeNode root)
    if(root == null)
        return 0;
    else{
        return(numNodes in level h == 2^h - 1)
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:28:10.120

您的 MaxElm 方法是错误的。如果所有元素都有负值，它将不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:43:40.543

有几个小问题：

1）asMTilsted 建议，如果您的树仅包含负值，则 maxElem 不起作用
2）平均值可能不正确，因为这是一个 int 而不是 double，请尝试对树元素的总和和计数进行类型转换，然后返回他们的商。
3）在您的函数搜索中，您不会在最后一个 else 语句中返回任何内容。试试：（`return search(i, root.getLeftChild()) || search(i, root.getRightChild());`在你的其余代码中，这些是函数而不是属性......

其余的似乎很好:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T01:34:28.367

> 我必须为二叉树实现递归方法，并想看看我编写的方法是否正确实现，因为我无法测试它们。这些不是实际的方法。我只需要编写算法的伪代码。

你**可以**测试它们。

用（比如说）Java 将它们写成真正的代码，编写一些单元测试，然后运行它们。

如果您在一天结束时必须提交的东西是伪代码而不是真正的代码，那么您可以手动将 Java 转换回伪代码......

* * *

严格来说，除非您指定了伪代码语言是/意味着什么，否则您不能说伪代码是否正确。

# php - mySQL 更简单的方法来执行多个语句？

> ID：15736419
> 
> 赞同：1
> 
> 时间：2013-04-01T01:17:08.413
> 
> 标签：php, mysql, sql, mysqli

我的网站上有一个页面，用于编辑我的 CMS 中的文章。我的网站目前有两个不同的`sql`声明，我想知道是否有更好的方法来做到这一点？我正在做的是使用第一条语句来填充表单中的所有字段，但我使用第二条语句来`select`输入类别，所以我可以`loop`在这里使用不同`options`的代码，基本上我想知道是否还有其他事情要做这只有 1 条`sql`声明，非常感谢！

**表类别**

```
cat_id  cat_name
1       soccer
2       baseball
3       baketball 
```

**表文章**

```
art_id  art_cat_id  art_title  art_slug  art_company  
1       1           lorem      lorem     lorem 
```

**HTML / PHP**

```
<?php
 $sql_articles = "SELECT art_id, art_cat_id, art_title, art_slug, art_company, cat_id, cat_name
                FROM app_articles LEFT JOIN app_categories
                ON app_articles.art_cat_id = app_categories.cat_id
                WHERE art_id =".$_GET['art_id']; 

$result = query($sql_articles);
if($result===false) {
    echo("query failed");
}
else {
    $row = mysqli_fetch_array($result)              
?>

<form id="articles" action="" method="post">

<input type="text" name="title" value="<?php echo $row['art_title']; ?>">

<input type="text" name="slug" value="<?php echo $row['art_slug']; ?>"> 

<input type="text" name="company" value="<?php echo $row['art_company']; ?>">

<select name="category">
    <option value="<?php echo $row['art_cat_id'] ?>" selected="selected"><?php echo $row['cat_name'] ?></option>
    <?php
    $sql_categories = "SELECT cat_id, cat_name FROM app_categories";

    $result = query($sql_categories);

    if($result===false) {
            echo("Query Fail");
    }
    else {
        while( $data = mysqli_fetch_array($result)) {
            if ($row['art_cat_id'] == $data['cat_id']) continue;
    ?>     
            <option value="<?php echo $data['cat_id'] ?>"><?php echo $data['cat_name'] ?></option>
    <?php
        }
    }
?>
</select>

<input type="submit" value="Save">
</form>
<?php
    }
?> 
```

**我的第一个声明返回**

```
art_id  art_cat_id  art_title  art_slug  art_company cat_id  cat_name
1       1           lorem      lorem     lorem       1       soccer 
```

**我想我需要的是这样的东西**

```
art_id  art_cat_id  art_title  art_slug  art_company cat_id  cat_name
1       1           lorem      lorem     lorem       1       soccer
                                                     2       baseball
                                                     3       basketball 
```

这甚至可以在一个查询中完成吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:35:22.837

如果您发现自己不断编写查询，这些查询使用相同的子句从同一个表中提取信息`where`，那么您可以生成一条语句，一次性将所有相关数据从数据库中提取出来。然后使用

`$Statement->data_seek(0); // Returns to the first row`

重新使用您的声明。前提是您没有签发：

`$Statement->close();`

但来自你的评论。我引用：

*@DarylGill 这就是我的想法，但我遇到的问题是我正在使用`WHERE art_id =._GET['art_id']`它，这将我的结果限制为仅用于文章的类别，这就是为什么我做了第二条语句，以便我可以获得所有记录并循环它们。有没有更好的解决方法，谢谢！*

通过使用关联数组，有一些选项：

`$Var = mysqli_fetch_array($result, MYSQLI_ASSOC);`

然后执行

```
print_r($Var); 
```

您会注意到数组键名将匹配 MySQL 表中的列名。

从这里你可以使用你认为合适的这个数组，使用一个简单的：

```
foreach ($Var AS $Keys => $Value)
{
  if ($Keys == 'CatExample')
  {
    echo $Value; // This will output everyting with the keyname of 'CatExample'
  }
} 
```

或其他方法，您可以通过实验找到。

# function - __cdecl 将 WinSock 函数包装为纯 C 中的回调并调用它

> ID：15736422
> 
> 赞同：0
> 
> 时间：2013-04-01T01:17:26.400
> 
> 标签：function, callback, winsock, stdcall, cdecl

准备了这样的函数，其中一些 WSA 函数将用作回调：

```
int StartWinSock(int (*WSAStartup)(WORD, LPWSADATA))
{

} 
```

但是在其他代码中，我正在尝试启动它：

```
StartWinSock(WSAStartup); 
```

我收到一个错误：

> 'WSClient::StartWinSock' : 无法将参数 1 从 'int (__stdcall *)(WORD,LPWSADATA)' 转换为 'int (__cdecl *)(WORD,LPWSADATA)'

另外，我不知道如何通过 WSAStartup() 之类的回调函数正确传递参数（其参数：WORD（无符号短版本号）&& LPWSADATA（对 WSAData 的引用））。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:24:35.867

您缺少`__stdcall`来自`WINAPI`宏的函数指针类型的调用约定。因此，编译器假定`__cdecl`此指针的默认调用约定。这两种调用约定不兼容。

考虑创建这个 typedef：

```
typedef int WINAPI (*WSAStartupCallback)(WORD, LPWSADATA); 
```

然后像这样声明你的函数：

```
int StartWinSock(WSAStartupCallback wsaStartup)
{
} 
```

然后，您应该能够使用外部`WSAStartup`指针调用此函数。

# scala - 从 Scala 枚举值中检索名称属性

> ID：15736423
> 
> 赞同：7
> 
> 时间：2013-04-01T01:17:31.067
> 
> 标签：scala

我创建了一个 Scala 枚举，如下所示：

```
object TimerStatus extends Enumeration {
    type Status = Value
    val InProgress = Value(1, "Pause Timer")
    val Paused = Value(-1, "Resume Timer")  
} 
```

然后我有一个包含 TimerStatus 作为成员的 Match 类

如何从我的枚举值中检索“暂停计时器”或“恢复计时器”文本？

我可以使用检索 id`myMatch.timerStatus.id`但我没有看到任何方法来获取`name`

如果不可能，最好的解决方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-01T01:49:55.120

`.toString` [方法](https://github.com/scala/scala/blob/master/src/library/scala/Enumeration.scala#L221)返回`name`.

# ios - 从 ios 到服务器的 RTMP 流式传输？

> ID：15736424
> 
> 赞同：3
> 
> 时间：2013-04-01T01:17:47.583
> 
> 标签：ios, networking, video-streaming, rtmp

现在，我正在使用静态`librtmp.a`库来打开我的 iphone 和服务器之间的 RTMP 连接。当按下录制按钮时，相机开始接收输入，并在 captureoutput 上使用`AVAssetWriter`不同线程中的 's 将视频编码为 h264/AAC。然后将视频保存到特定的 URL。我正在尝试获取这些处理过的帧并使用`librtmp`.

```
-(void)writeURL:(NSURL*)segmentURL {
    NSLog(@"Utilities are writing...");
    NSData *segmentData = [NSData dataWithContentsOfURL:segmentURL];
    const char* body = [segmentData bytes];

    NSLog(@"%i", [segmentData length]);
    NSLog(@"%s", body);

    RTMPPacket packet = _rtmp->m_write;
    RTMPPacket_Alloc(&packet, [segmentData length]);
    packet.m_headerType = RTMP_PACKET_SIZE_MEDIUM;
    packet.m_packetType = RTMP_PACKET_TYPE_VIDEO;
    packet.m_body = (char*)body;

    RTMPPacket_Dump(&packet);
    RTMP_SendPacket(_rtmp, &packet, TRUE);
    //RTMP_Write(_rtmp, packet.m_body, packet.m_nBodySize);
} 
```

每次通话都会崩溃`RTMPPacket_alloc`，我不确定该怎么做。这是通过网络发送数据的正确方法吗？

**编辑：**
样本输出

```
2013-03-31 22:53:16.163 videoAppPrototype[2567:907] Switching encoders
2013-03-31 22:53:16.179 videoAppPrototype[2567:1703] Encoder switch finished
2013-03-31 22:53:16.220 videoAppPrototype[2567:1703] Upload public.mpeg-4
2013-03-31 22:53:16.223 videoAppPrototype[2567:1703] Utilities are writing...
2013-03-31 22:53:16.230 videoAppPrototype[2567:1703] 339171
DEBUG: RTMP PACKET: packet type: 0x09\. channel: 0x00\. info 1: 0 info 2: 0\. Body size: 0\.     body: 0x00 
```

**编辑 2：**
我将代码更改为使用`RTMP_Write()`而不是`RTMP_SendPacket()`.

新方法：

```
-(void)writeURL:(NSURL*)segmentURL {
NSLog(@"Utilities are writing...");
NSData *segmentData = [NSData dataWithContentsOfURL:segmentURL];

NSUInteger len = [segmentData length] / sizeof(unsigned char);
Byte *byteData = (Byte*)malloc(len);
memcpy(byteData, [segmentData bytes], len);
free(byteData);

NSLog(@"%i", [segmentData length]); 

NSLog(@"First write attempt...");
RTMP_Write(_rtmp, (char *)byteData, len);
NSLog(@"Successful?");
} 
```

现在在 RTMP_Write 崩溃，如堆栈跟踪所示：
![堆栈跟踪](https://i.stack.imgur.com/mekAO.png) 如果有人有任何想法或需要更多信息，请让我知道！

# jquery - jQuery单击不会触发异步添加的元素

> ID：15736425
> 
> 赞同：3
> 
> 时间：2013-04-01T01:18:08.937
> 
> 标签：jquery, asynchronous, append

我见过其他应该回答我的问题，但是由于某种原因，他们没有。我指的是这些：
- [jquery click 事件没有触发？](https://stackoverflow.com/questions/5540561/jquery-click-event-not-firing)
- [jquery 函数不适用于异步加载的 dom 元素](https://stackoverflow.com/questions/9352853/jquery-functions-dont-work-on-dom-elements-loaded-asynchromously)

我首先使用 click() 尝试将所选“li”的颜色更改为粉红色。它有效，但不适用于动态附加的“li”。我尝试使用 on() 因为 live() 现在已弃用。我很惊讶它仍然没有工作。

这是您可以运行的示例：

**Javascript：**

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>

<script>
$(document).ready(function(){
  $("#btn1").click(function(){
    $("ol").append("<li class='test'> Appended item </li>");
  });
});
</script>

<script>
$(function () {
  $('.test').on('click', function () {
    $(this).css("background-color","pink");
  });
});
</script> 
```

**HTML：**

```
<body>
  <p>This is a paragraph.</p>
  <p>This is another paragraph.</p>
  <ol>
    <li class='test'> List item 1 </li>
    <li class='test'> List item 2 </li>
    <li class='test'> List item 3 </li>
  </ol>

  <button id="btn1">Append list item</button>
</body> 
```

有人有线索吗？
非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-01T01:25:55.783

您需要使用基于[.on()的事件](http://api.jquery.com/on/)[委托](http://jqfundamentals.com/chapter/events)

```
$('ol').on('click', '.test', function(el){
    $(this).css("background-color","pink");
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/7CFCK/)

# java - 使用 API KEY in 从 google plus 检索活动不起作用

> ID：15736427
> 
> 赞同：3
> 
> 时间：2013-04-01T01:18:38.433
> 
> 标签：java, google-plus, google-api-java-client

我正在使用 APIKEY 设置传输并初始化连接以从 Google Plus 检索活动。

```
HttpRequestInitializer initializer =  (HttpRequestInitializer) new  CommonGoogleClientRequestInitializer("GooglePlusAPIKey");  
plusSvc = new Plus(new NetHttpTransport(),  new GsonFactory(), initializer); 
```

它给了我这个错误：

> `CommonGoogleClientRequestInitializer`不能转换为`HttpRequestInitializer`.

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:41:44.217

错误信息是正确的。HttpRequestInitializer 和 CommonGoogleClientRequestInitializer 没有直接关系，所以强制转换是非法的。它们只是不同包中的相似类——你不能像这样混合匹配。

请参阅此处的文档：http: [//javadoc.google-api-java-client.googlecode.com/hg/1.12.0-beta/com/google/api/client/googleapis/services/CommonGoogleClientRequestInitializer.html](http://javadoc.google-api-java-client.googlecode.com/hg/1.12.0-beta/com/google/api/client/googleapis/services/CommonGoogleClientRequestInitializer.html)

这里的例子可能更容易理解：[https ://code.google.com/p/google-api-java-client/wiki/OAuth2](https://code.google.com/p/google-api-java-client/wiki/OAuth2)

# javascript - 操纵正确 当有两个或多个具有相同 ID 时

> ID：15736435
> 
> 赞同：1
> 
> 时间：2013-04-01T01:20:39.037
> 
> 标签：javascript, css, html, web

我经营一个 phpBB 论坛，我在上面安装了[这个 Syntax Highlighter MOD](https://www.phpbb.com/customise/db/mod/syntax_highlighter_3_using_autoloader/)。今天，我开始研究一项功能，该功能将使用两个 DIV 使代码框在页面上全屏显示。用户单击以全屏加载框的 DIV 将始终具有相同的 ID，但语法突出显示的 DIV ID 每次加载页面时都是随机的。我遇到了用户单击的 DIV 的问题，无论用户单击哪个 DIV 版本，它总是全屏加载代码框的第一个实例。

如果你很难理解我在说什么，[这里有一个丑陋但可用的演示](http://s.codepen.io/PWF/fullpage/BvKFl)。要使丑陋的橙色框全屏加载，请单击其上方的蓝色图像。每个蓝色图像都在其自己的 DIV 中，两者的 ID 均为“first”。第一个丑陋的橙色框的 ID 为“testDIV”，第二个的 ID 为“testDIV2”。代码的编写方式是，每个丑陋的橙色框的 DIV 应根据按钮的 DIV 确定。虽然我的代码适用于此，但它只能找到第一个橙色框。

这是我编写的构成演示的代码。

```
<!-- HTML div Guniea Pigs -->
<div id="first" align="right"><img src="http://cdn2.iconfinder.com/data/icons/metro-uinvert-dock/128/Full_Screen.png" height="24" width="24" onclick="toggleFullScreen()" id="viewToggleImg" style="cursor:pointer"></div>
<div id="testDIV">DIV 1</div>

<!-- Round 2 -->
<div id="first" align="right"><img src="http://cdn2.iconfinder.com/data/icons/metro-uinvert-dock/128/Full_Screen.png" height="24" width="24" onclick="toggleFullScreen()" id="viewToggleImg" style="cursor:pointer"></div>
<div id="testDIV2">DIV 2</div>

<!-- div Styling, to help us see our guinea pigs. -->
<style>
    body{
        background:#000;
    }
    #testDIV{
        background:#F58B00;
        max-height:100px;
    }
    #testDIV2{
        background:#F58B00;
        max-height:100px;
    }
</style>

<!-- JavaScript that will control the way that the page behaves on page toggling. THIS IS WHAT IS MOST IMPORTANT! -->
<script>
    function toggleFullScreen(){
        var toggleDIV = document.getElementById("first"); // This stores the ID of the toggle DIV.
        var testDIV = document.getElementById("first").nextElementSibling; // Since the div ID will fluctuate each time during page load, this will acquire it for us using the previous div in relation to it.

        if (document.getElementById("viewToggleImg").src == "http://cdn2.iconfinder.com/data/icons/metro-uinvert-dock/128/Full_Screen.png")
        {
            // If we are in here, then we are toggling to full screen.
            document.getElementById("viewToggleImg").src='http://cdn2.iconfinder.com/data/icons/metro-uinvert-dock/128/Exit_Full_Screen.png';
            document.getElementById("viewToggleImg").style.marginRight ='20px';
            toggleDIV.style.position = 'fixed';
            toggleDIV.style.top = '0px';
            toggleDIV.style.bottom = '0px';
            toggleDIV.style.left = '0px';
            toggleDIV.style.right = '0px';
            toggleDIV.style.background = '#FFF';
            toggleDIV.style.paddingTop = '10px';
            testDIV.style.position = 'fixed';
            testDIV.style.top = '44px';
            testDIV.style.bottom = '1px';
            testDIV.style.left = '1px';
            testDIV.style.right = '1px';
            testDIV.style.maxHeight = 'none';
        }
        else
        {
            // If we are in here, then we are toggling back to original page view.
            document.getElementById("viewToggleImg").src='http://cdn2.iconfinder.com/data/icons/metro-uinvert-dock/128/Full_Screen.png';
            document.getElementById("viewToggleImg").style.marginRight = '0px';
            toggleDIV.style.position = 'static';
            toggleDIV.style.background = 'none';
            toggleDIV.style.paddingTop = '0px';
            testDIV.style.position = 'static';
            testDIV.style.maxHeight = '100px';
        }
    }
</script> 
```

有人可以就如何解决这个问题提供一些建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:50:52.910

解决此问题的最简单方法是使用关键字传递对单击元素 ( `viewToggleImg`)的引用：`this`

```
onclick="toggleFullScreen(this)" 
```

然后通过DOM遍历方法获取相关元素：

```
function toggleFullScreen(viewToggleImg){
    var toggleDIV = viewToggleImg.parentNode;
    var testDIV = toggleDIV.nextElementSibling; 
```

并在整个函数中使用这些变量。[**更新的笔**](http://s.codepen.io/anon/pen/BJsrh)

不过，我建议使用[jQuery](http://jquery.com/)以不显眼的方式轻松完成此类任务，并与旧浏览器兼容（`nextElementSibling`不适用于 IE<9，以防您需要/想要支持它）。

不过，对于已经在工作的这么小的东西，您不需要 jQuery，所以这里是使用功能检测的修补版本，否则[这个答案](https://stackoverflow.com/a/6549031/1331430)`nextElementSibling`中概述的 shim ：

```
function nextElementSibling( el ) {
    do { el = el.nextSibling } while ( el && el.nodeType !== 1 );
    return el;
}
function toggleFullScreen(viewToggleImg){
    var toggleDIV = viewToggleImg.parentNode;
    var testDIV = toggleDIV.nextElementSibling || nextElementSibling(toggleDIV);
    //... 
```

[**笔**](http://s.codepen.io/anon/pen/vJtKm)和[整页演示](http://s.codepen.io/anon/fullpage/vJtKm)（在 IE8 中测试）

或者使用 jQuery：

```
 var testDIV = $(toggleDIV).next()[0]; 
```

# delphi - 我需要一个 DBGrid OnAfterCellClick

> ID：15736437
> 
> 赞同：0
> 
> 时间：2013-04-01T01:21:06.303
> 
> 标签：delphi, delphi-5, tdbgrid

我有三个 DBGrid 和三个表，其中两个与主字段链接并按预期工作。当用户点击 grid-1 时，它会在 grid-2 中显示三个项目。

当用户单击 grid-2 时，我想使用 Locate 来选择 grid-3 中的行

问题是在数据更改为适当的行之前触发了 grid-2 OnCellClick 事件。例如

```
Grid-2
Flowers  <-- this has focus and Dirt has focus in grid-3
Weeds    
Trees    <-- then I click here

Grid-3
Dirt
Water
Gum     <-- and using Locate in the grid-2 OnCellClick I
            want it to show Gum but grid two is still 
            internally on Flowers and stays on Dirt 
```

在 OnCellClick 事件之后，网格似乎不会更改为 Row。

我需要一个 AfterCellClick 事件。

有人可以说明如何去做吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T01:54:22.913

你不应该使用`OnCellClick`. 改为使用`TDataSet.OnAfterScroll`。移动完成后，当记录（行）指针移动时会自动调用它。这意味着当单击附加到第二个表的网格并将记录指针从 移动`Flowers`到 时`Trees`，第二个表的`OnAfterScroll`事件将*在行更改后*触发，并且在该事件处理程序中您可以`Locate`在第三个表中执行相应的操作。

# .htaccess - 如何重定向到页码？HTACCESS

> ID：15736440
> 
> 赞同：1
> 
> 时间：2013-04-01T01:21:56.713
> 
> 标签：.htaccess, numbers

这是我目前拥有的：

```
http://www.example.com/main?page=2
http://www.example.com/query?page=5
http://www.example.com/archives?page=2 
```

我想将其替换为：

```
http://www.example.com/main/2
http://www.example.com/query/5
http://www.example.com/archives/2 
```

但我仍然想要 $_GET['page'] :)

如何用 htaccess 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:07:45.993

在文档根目录的 htaccess 文件中，添加这些规则（最好在您可能拥有的任何路由规则之上）：

```
RewriteEngine On
RewriteRule ^(.*)/([0-9]+)$ /$1?page=$2 [L] 
```

# paypal - 沙盒 paypal-lightbox 不加载

> ID：15736444
> 
> 赞同：1
> 
> 时间：2013-04-01T01:22:13.107
> 
> 标签：paypal, lightbox, sandbox

从 3 月 27 日星期三开始，我们在沙盒自适应支付（经典 API）环境中测试 PAY 交易时遇到了问题。我们最后一次成功的测试是在 3 月 26 日星期二。在此期间，我们没有进行任何会影响我们的沙盒测试交易的代码或环境更改。

我们遇到的问题是，在我们的应用程序联系沙盒自适应支付环境后，PayPal 灯箱将无法加载。在我们尝试调用灯箱时，我们已经获得了一个支付密钥。您可以在附加的 Firefox 和 Chrome 中的错误控制台屏幕截图中看到我们正在联系的 URL 和 paykey 值。

当我们使用支付密钥向 PayPal 发送请求时，浏览器错误控制台显示“404 – 未找到”错误。除了对 Paypal 的请求产生的错误之外，页面上没有其他 javascript 错误。“404 - 未找到”错误是否与我们在初始请求中从沙箱中返回的 PayKey 值有关？如果是这样，为什么 Paykey 突然失效了，而之前它们还不错？

我们用于自适应支付沙盒的 App ID 是：APP-80W284485P519543T 这是“新”沙盒环境的正确 App ID 吗？

我们正在使用经典 API 沙箱中设置的经过验证的美国企业帐户的用户 ID、密码和签名。

```
<form id="lightbox_form"        action="https://www.sandbox.paypal.com/webapps/adaptivepayment/flow/pay" target="PPDGFrame">
<input id="type" type="hidden" name="expType" value="lightbox">
<input id="type" name="autoredirectondone" type="hidden">
<input type="hidden" name="paykey" id="paykey" value="[paykey is inserted here]">
<input name="submit_order" id="submit_order" type="submit" class="common_input_button" value="Submit Order">
</form>

<script type="text/javascript" src="https://www.paypalobjects.com/js/external/dg.js">
</script>

<script>
var dgFlow = new PAYPAL.apps.DGFlow({ trigger: 'submit_order' });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-02T18:45:34.707

您的表单操作指向旧 URL。沙盒自适应支付的新 URL 是： [https ://svcs.sandbox.paypal.com/AdaptivePayments/Pay](https://svcs.sandbox.paypal.com/AdaptivePayments/Pay)

请参阅：[https ://developer.paypal.com/webapps/developer/docs/classic/adaptive-payments/gs_AdaptivePayments/](https://developer.paypal.com/webapps/developer/docs/classic/adaptive-payments/gs_AdaptivePayments/)

# mysql - mysql查询以使用AND子句在逗号分隔列表中搜索多个值

> ID：15736445
> 
> 赞同：4
> 
> 时间：2013-04-01T01:22:16.120
> 
> 标签：mysql, sql, select

我有下表

```
Id     | Userdefined01
------------------------
1      | 1,2,4,5
2      | 2,5
3      | 4,6,8
4      | 1,5 
```

我想编写一个查询来查找 userdefined01 字段中所有值为 2 和 5 的 Id。那可能吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-01T01:24:53.630

使用`FIND_IN_SET()`-- mysql 的内置函数来搜索 CSV 中的字符串。

```
SELECT  *
FROM    tableName
WHERE   FIND_IN_SET('2', Userdefined01) > 0 AND
        FIND_IN_SET('5', Userdefined01) > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/d4023/1)
*   [MySQL FIND_IN_SET](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_find-in-set)

如果您有时间更改架构，则需要对其进行非规范化。查看示例，它可能是`Many-to-Many`关系，因此您可以将其分解为 3 表设计。

# null - 关闭 FileInputStream 并将其设置为 null 之间的区别

> ID：15736461
> 
> 赞同：1
> 
> 时间：2013-04-01T01:25:48.397
> 
> 标签：null, garbage-collection, fileinputstream

在 Java 中，当我们关闭像 Connection、FileInputStream、FileOutputStream 这样的资源时，与将这些对象实例设置为 null 有何不同？即在这两种情况下，这些对象都有资格进行垃圾回收。那么提供`close`这些类的方法的目的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T22:14:44.943

IO 类的`close`方法通常用于执行清理任务，例如关闭文件处理程序、刷新和关闭套接字。这些清理任务与分配无关，GC 本身无法处理它们。

此外，**设置引用**以`null`明确声明将不再使用该对象**不是推荐的编码实践**。当对象不再可访问时，GC 将自动处理这些情况。显式`null`设置只会使您的源代码混乱。

# gnuplot - 使用 gnuplot 绘制虚线

> ID：15736464
> 
> 赞同：1
> 
> 时间：2013-04-01T01:26:12.623
> 
> 标签：gnuplot

我想知道如何在此图中绘制虚线。我的意思是与点相关的灰色虚线。

![在此处输入图像描述](https://i.stack.imgur.com/4SN6J.jpg)

# php - appcast.xml 是否值得用于 PHP Web 应用程序？

> ID：15736466
> 
> 赞同：0
> 
> 时间：2013-04-01T01:26:33.260
> 
> 标签：php, xml, release, ads, release-management

我正在开发一个成熟的照片库软件[http://fulldecent.github.com/cameralife/](http://fulldecent.github.com/cameralife/)，它是用 PHP 编写的。

这目前通过 Freecode（以前称为 Freshmeat）进行宣传。最近从 Sourceforge 切换后，使用率下降了很多，我怀疑是因为 SF 有联合。我是否应该使用 appcast.xml（例如[https://github.com/andymatuschak/Sparkle/blob/master/Sample%20Appcast.xml](https://github.com/andymatuschak/Sparkle/blob/master/Sample%20Appcast.xml)）来广播软件更新。当我发布新版本时，我还应该做些什么来通知世界。

再具体一点：

*   appcast.xml 是否适用于 PHP 项目？
*   当这种类型的 PHP 项目有新版本可用时，还有其他常见的方法来通知世界吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-22T21:38:10.480

解决方案是支持 Composer

见：[https ://getcomposer.org/](https://getcomposer.org/)

有支持的项目示例：

[https://github.com/PHPOffice/PHPPowerPoint/blob/master/composer.json](https://github.com/PHPOffice/PHPPowerPoint/blob/master/composer.json)

# python - 在 PyQt4 中自动生成事件

> ID：15736467
> 
> 赞同：0
> 
> 时间：2013-04-01T01:26:41.673
> 
> 标签：python, pyqt4

PyQt4 中是否有自动生成事件。
这意味着，通常我们可以在按下按钮时将按钮事件与自定义定义联系起来。
我想通过检查全局布尔变量来生成调用定义的事件。
如果全局变量为真，则事件将调用自定义定义。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T10:12:33.670

您可以通过调用按钮的方法[.animateClick来触发事件](http://qt-project.org/doc/qt-4.8/qabstractbutton.html#animateClick)

# queue - Ocaml 中的重复值

> ID：15736468
> 
> 赞同：3
> 
> 时间：2013-04-01T01:26:45.870
> 
> 标签：queue, duplicates, ocaml

如何从 Ocaml 的队列中删除重复的值（即重复值）？

例如，假设这是一个队列（尽管它以列表的形式呈现）：

```
 [1; 1; 2; 3; 4; 7; 7; 8; 8; 8] 
```

然后，将此函数应用于队列后，我们将得到：

```
 [1; 2; 3; 4; 7; 8] 
```

列表情况下的实现：

```
 let rec deleteDuplicate l = 
        match l with 
         | []                -> [] 
         | x :: []          -> x :: [] 
         | x :: y :: rest -> 
               if x = y then deleteDuplicate (y :: rest) 
               else x :: deleteDuplicate (y :: rest) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:50:20.223

我认为首先要做的是决定你将如何代表你的队列。您可以使用标准 OCaml 库中的 Queue 模块。这使用队列的可变表示。或者你可以使用一个非常好的（简单但聪明的）不可变表示，它由两个列表组成，一个用于头部，一个反向用于尾部。在你决定你的代表之后，我怀疑很容易看出该怎么做。你可以毫无困难地做一个列表。

假设您想使用 OCaml 库中的 Queue 模块。由于这是一个可变队列，我假设您想以命令式风格进行编码。即，您想修改现有队列以便删除重复项。

一种非常直接的方法是先转换为列表，然后将您的函数应用于列表，然后将元素放回队列中。

```
let rec list_of_queue q =
    (* Change queue to list, emptying queue in the process.
     *)
    if Queue.is_empty q then [] else let h = Queue.take q in h :: list_of_queue q

let queue_add_list q l =
    List.iter (fun x -> Queue.add x q) l

let deleteQueueDuplicates q =
    let l = list_of_queue q in
    queue_add_list q (deleteDuplicate l) 
```

# android - 如何使用同一类从不同的片段中获取变量

> ID：15736472
> 
> 赞同：0
> 
> 时间：2013-04-01T01:27:11.783
> 
> 标签：android, fragment

在我的 Android 应用程序中，我有一个包含 4 个片段的活动。所有片段都具有相同的确切字段，因此它们都是从同一个 xml 文件中扩展而来的，并且具有相同的 java 类。但是，我需要获取存储在每个中的数据，因为用户将在每个中输入内容。那么，如果它们都具有相同的类，我将如何获取数据呢？

活动成功.xml

```
<Button
    android:id="@+id/continue_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/cont"
    />

<Button 
    android:id="@+id/export_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/export"
    android:layout_toRightOf="@id/continue_button"
    />

<fragment android:name="org.bah.bu.SuccessFragment"
    android:id="@+id/red1_success"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/continue_button"

    />

<fragment android:name="org.bah.bu.SuccessFragment"
    android:id="@+id/red2_success"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/red1_success"
    /> 
```

片段成功.xml

```
<CheckBox
     android:id="@+id/far"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:text="@string/far"
    />

<CheckBox
    android:id="@+id/lifted"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/lifted"
    /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:22:41.037

`getData()`在 Fragment 类中编写一个方法（以便它返回相关信息）或简单地将标准 getter 用于您需要的任何数据字段。然后，在您的封闭活动中，调用每个 Fragment 实例的`getData()`方法。每个实例将返回它包含的对该实例唯一的数据。

重要的是，不管 Fragments 共享相同的类定义，它们的实例将（或可以）包含不同的数据。与实例而不是类交谈是解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:37:45.403

没关系，我想通了。我使用该`getSupportFragmentManager().findFragmentById(R.id.frag);`方法创建了对片段的 4 个引用，并使用了一种`updateVals()`方法，该方法将片段中视图的数据存储在 java 类的变量中。

# matlab - Matlab 矩阵 - 编辑

> ID：15736474
> 
> 赞同：0
> 
> 时间：2013-04-01T01:27:55.637
> 
> 标签：matlab

如何在类似 excel 的用户界面中编辑存储为 .mat 的 Matlab 矩阵？我想在特定列中找到特定值的所有实例，然后对其进行注视并以这种方式进行编辑。除了做类似的事情之外，还有什么好的方法来编辑矩阵吗？

```
matrix[4;3] = 4 
```

编辑后的更改应保存到矩阵中，以供以后在 matlab 中使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:49:26.967

通过双击工作区中的变量或使用 （其中 x 如果您感兴趣的变量的名称）打开[MATLAB 的变量编辑器：](http://blogs.mathworks.com/community/2008/04/21/variable-editor/)`openvar x`

![在此处输入图像描述](https://i.stack.imgur.com/PmaDx.png)

[或者，可以使用其中一种解决方法](http://www.mathworks.com/support/solutions/en/data/1-BJPDGQ/index.html?product=ML&solution=1-BJPDGQ)将 MAT 文件直接导入 Excel 工作表，但这有点棘手。

# css - 当我向左或向右应用填充时，为什么这个 div 会越过它的父级？

> ID：15736477
> 
> 赞同：0
> 
> 时间：2013-04-01T01:28:28.653
> 
> 标签：css, twitter-bootstrap

这是我在容器右侧使用非常有用的第二个问题`twitter-bootstrap`，但是这一次，我已经能够在 jsFiddle 上重现它！

[这是链接](http://jsfiddle.net/YHPeB/1/)，正如您在 CSS 窗口中看到的那样，我在 div 上应用 a`padding-left`和 a `padding-right`，左侧使 div 越过右侧的父级，如果我只应用 a `padding-right`，我得到相同的结果。

我无法理解这种行为，这可能是我在另一个项目中遇到的相同问题，如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:22:40.093

这是一个工作[示例](http://jsfiddle.net/YHPeB/3/)

您所要做的就是指定一个宽度。我添加了一个边框只是为了查看 div。

```
#child {
    width: auto;
    border: 1px solid red;
    padding-left: 50px;
    padding-right: 50px; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:23:09.657

您观察到的行为源于两个事实：首先，Bootstrap 行设置为`width: 100%`. 其次，他们使用默认的 box-sizing 值，`content-box`.

Box-sizing 是决定如何计算块元素宽度的属性。当它设置为 content-box 时，它只考虑内容的宽度，而不考虑边距、填充或边框。接下来是您设置的填充添加到总宽度中，使其大于 100%，并使其超出父项。

对于您想要设置为的`box-sizing`行为`padding-box`。这会导致元素的计算宽度包括填充。

[**在 JSFiddle 上查看**](http://jsfiddle.net/V9kdz/)

```
#child {
  ...
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box;    /* Firefox, other Gecko */
  box-sizing: border-box;
} 
```

有关 box-sizing 属性的更多信息，我推荐两个很棒的 CSS 资源：Chris Coyier 的[CSS Tricks](http://css-tricks.com/box-sizing/)和[MDN](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)。

# java - 创建堆栈数组时出错

> ID：15736478
> 
> 赞同：1
> 
> 时间：2013-04-01T01:28:51.033
> 
> 标签：java, arrays, stack

我正在用 Java 开发一个项目（我很新）。

我正在尝试创建两个数组，它们引用一组相似的对象（索引 3-16）和各自的 3（索引 0-2）。我希望这些对象是堆栈（我改为“Pile”，它只有一种方法来报告它们的长度）。每个“Pile”对象都准备好接受“Piece”对象。

```
Pile<Piece>[] leftBoard = new Pile[16];
Pile<Piece>[] rightBoard = new Pile[16];
for (int i = 3; i < 16; i++){
    leftBoard[i] = new Pile<Piece>();
    rightBoard[i] = leftBoard[i];
}
for (int i = 0; i < 3; i++){
leftBoard[i] = new Pile<Piece>();
}
for (int i = 0; i < 3; i++){
    rightBoard[i] = new Pile<Piece>();
} 
```

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:30:54.553

`Pile<Piece>[]`是一个泛型数组。[由于 Java 中的类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html#createArrays)，这是非常糟糕的事情™。相反，尝试这样的事情：

```
// Initialize arrays.
ArrayList<Pile<Piece>> leftBoard = new ArrayList<Pile<Piece>>(16);
ArrayList<Pile<Piece>> rightBoard = new ArrayList<Pile<Piece>>(16);

// Fill arrays so we can use the "set" method.
leftBoard.add(Collections.<Pile<Piece>>nCopies(null));
rightBoard.add(Collections.<Pile<Piece>>nCopies(null));

// Store values.
for (int i = 3; i < 16; i++){
    Pile<Piece> thisPiece = new Pile<Piece>();
    leftBoard.set(i, thisPiece);
    rightBoard.set(i, thisPiece);
}
for (int i = 0; i < 3; i++){
    leftBoard.set(i, new Pile<Piece>());
}
for (int i = 0; i < 3; i++){
     rightBoard.set(i, new Pile<Piece>());
} 
```

`ArrayList`也更好，因为它可以动态调整大小（在许多其他方面）。

快速总结：如果你有`String[] array``ArrayList 列表，那么：

*   `array[i]`是相同的`list.get(i)`
*   `array[i] = var`是相同的`list.set(i, var)`
*   您可以将元素添加到末尾`list.add(var)`
*   您可以使用`list.remove(index)`或从任何地方删除元素`list.remove(var)`
*   有关更多信息，请参阅有关该主题的[`ArrayList`文档](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html)或[Java 教程](http://docs.oracle.com/javase/tutorial/collections/implementations/list.html)。

* * *

**编辑**：关于不可修改列表的主题：

```
List<MyObject> l = Collections.unmodifiableList(myList);
l.get(0);             // valid as long as element exists
l.get(0).foo();       // valid
l.get(0).setFoo(bar); // valid
l.remove(foo);        // INVALID
l.add(foo);           // INVALID 
```

因此，您可以操作列表中的对象，但不能修改它们*在列表中的**位置*或列表本身的内容。想象一下处于封锁状态的监狱——没有人进出，但你仍然可以与囚犯交谈。

如果您希望`Pile`s 保留在原处但能够移动`Piece`s，那么一个不可修改的列表对我来说听起来不错。只要您有类似的方法`somePile.setPiece(somePiece)`，这应该可以正常工作。

# labview - 在LabVIEW中并发多个外部可执行文件和DAQ

> ID：15736479
> 
> 赞同：0
> 
> 时间：2013-04-01T01:28:56.810
> 
> 标签：labview, nidaqmx

我正在使用带有 USB 6008 的 LabVIEW 2009 进行加速度计的 DAQ。此外，来自加速度计的 DAQ，我还有几个其他外部可执行文件，它们触发了两个不同的过程（数据写入）。通过使用 System Exec.vi，我可以触发这些外部可执行文件。但是外部可执行文件的数据写入开始时间不同，例如，exe1 需要 1 秒时间才能开始将数据写入文本文件，而 exe2 需要 20 秒时间才能初始化并开始写入数据。

因此，即使我触发了多个外部 exe 文件，还有什么方法可以在同一实例中从所有这些文件以及来自加速度计的 DAQ 开始写入数据。

谢谢你，非常感谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:20:16.320

我不知道 6008，但您可以为数据生成设置一个启动触发器（硬件）。因此，当您开始生成一项任务时，另一项任务也会开始。但是你必须确保两个任务都准备好或者你的超时时间足够长。

# jquery - 文本中的拉斐尔多行向下移动而不是向上移动

> ID：15736485
> 
> 赞同：0
> 
> 时间：2013-04-01T01:30:16.017
> 
> 标签：jquery, raphael

我正在尝试使用 textArea 将动态文本添加到拉斐尔论文中，然后将其复制到拉斐尔文本中。问题是当多行时，拉斐尔文本倾向于向上移动起点。有没有我可以用来将多行文本向下移动的属性或方法？

# ruby-on-rails - 在 rspec 集成测试中测试移动设备但无法设置会话

> ID：15736488
> 
> 赞同：3
> 
> 时间：2013-04-01T01:30:48.073
> 
> 标签：ruby-on-rails, mobile, rspec, integration-testing, session-cookies

我正在为移动页面编写集成测试。我已经按照[Railscast](http://railscasts.com/episodes/199-mobile-devices)中的描述设置了移动系统。如果设备是移动的，基本上会建立一个会话，如果它不是移动的，我的控制器会发送到桌面主页，但如果它是移动的，则会发送到移动主页。Rspec 不支持会话，所以我不知道如何让集成文件知道它应该转到移动主页。

在帮助程序中定义的方法来检测是否移动。

```
 def check_for_mobile
    session[:mobile_override] = params[:mobile] if params[:mobile]
  end

  def mobile_device?
    if session[:mobile_override]
      session[:mobile_override] == "1"
    else
      (request.user_agent =~ /Mobile|webOS/) && (request.user_agent !~ /iPad/)
    end
  end 
```

控制器动作

```
 def home
    check_for_mobile
    if mobile_device?
      @devise_mapping ||= Devise.mappings[:company]
      render "pages/home_mobile"
    elsif company_signed_in?
      redirect_to companies_home_path
    else
      @request = Request.new
      @request.company = params[:company]
      render 'pages/landing'
    end
  end 
```

我基本上需要`mobile_device?`在请求规范中返回 true。我可以编写一堆蹩脚的代码来让它工作，但必须有一个好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T16:59:23.257

添加以下内容（如果 gem 尚未作为依赖项包含，`spec_helper.rb`您可能需要gem）：`rack_session_access`

```
require "rack_session_access/capybara" 
```

添加一个前置过滤器来描述或上下文块：

```
before(:each) do
  session[:mobile_override] = "1"
end 
```

# linux - 在 shell 脚本中立即写入文件（无行缓冲）

> ID：15736491
> 
> 赞同：1
> 
> 时间：2013-04-01T01:31:05.053
> 
> 标签：linux, shell

我有一个这样的脚本，

```
#!/bin/bash

echo "hello" > a.txt

while [ True ]; do

#do something here, very long and possiblely causing system reboot

done 
```

如果执行正常结束，我似乎只能得到一个正常的 a.txt（里面有“hello”）。如果“while 循环”正在运行或在 while 循环期间触发了系统重新启动，则会有一个空白的 a.txt。

通过谷歌搜索，这似乎是一个行缓冲问题，因为 shell 默认打开行缓冲。由于我定制的 Ubuntu 上没有安装“Expect”或“stdbuf”，我尝试替换

```
echo "hello" > a.txt 
```

使用 Perl/C 程序，其中行缓冲区被禁用。在 Perl 中，我使用了 "$|" 并且在 C 中使用了“fflush”。不幸的是，它不起作用。

任何反馈表示赞赏...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:36:55.737

这并不完全正确。回显后，文件将被写入并对其他程序可见。这是有保证的。

您可能会看到此时文件未写入物理磁盘。这可能是由于操作系统的文件系统缓冲而发生的。仅仅因为文件已被写入并且其他程序看到它并不意味着它已被写入磁盘。它可能只是在记忆中。

您可以使用“sync”命令请求操作系统刷新所有缓冲的写入磁盘。在触发重启之前尝试调用它，看看是否能解决您的问题。

> **可以调用sync**实用程序以确保在处理器停止之前已完成所有磁盘写入，而这种方式不适合由 shutdown(8) 完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T02:26:42.930

试试看是否有效：

```
#!/bin/bash
echo "hello"|awk '{print;fflush()}' > a.txt
sync
while [ True ]; do
#do something here, very long and possiblely causing system reboot
done 
```

# azure - 本地和生产的 Azure ACS 配置

> ID：15736492
> 
> 赞同：2
> 
> 时间：2013-04-01T01:31:21.897
> 
> 标签：azure, wif, acs, azure-acs

配置 Azure ACS 以便当我在开发结构中本地运行时仍然可以进行身份​​验证的最佳方法是什么？

我只想配置一次，并且能够在本地开发并发布到 azure，而无需更改配置。只要我能以某种方式伪造声明，我什至愿意在本地开发时不使用联合身份验证。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T04:12:33.720

您可以拥有 of`Web.Config`和`Web.Release.Config`（每个构建配置的转换文件）。Web.Config 用于您的本地开发，其中您有领域，受众 URL 指向您的本地地址，即 127.0.0.1。然后，您可以为 编写转换文件`Web.Config`，例如`Web.Release.Config`，您可以在其中编写转换以将上述值替换为实际部署 URL。我假设您将使用发布版本部署到 azure。

这就是你的 web.config.release 的样子......

```
<microsoft.identityModel>
    <service>
      <audienceUris>
        <add value="https://abc.cloudapp.net/" xdt:Transform="Replace" />
      </audienceUris>
      <serviceCertificate xdt:Transform="Insert">
        <certificateReference x509FindType="FindByThumbprint" findValue="AAAAAAAAAAAAAAAAAAAAAAAAAAA" storeLocation="LocalMachine" storeName="My" />
      </serviceCertificate>
      <federatedAuthentication>
        <wsFederation passiveRedirectEnabled="true" issuer="https://myacs.accesscontrol.windows.net/v2/wsfederation" realm="https://abc.cloudapp.net/" requireHttps="true" xdt:Transform="Replace" />
        <cookieHandler requireSsl="true" xdt:Transform="Replace" />
      </federatedAuthentication>
    </service>   </microsoft.identityModel> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T18:59:48.677

最简单的方法是使用 bhavesh 所说的配置转换，尽管他发布的 web.config 自 NET 4.5 以来已经过时。

您可以将本地开发配置保存在 中`web.config`，将云开发配置保存在中`web.Debug.config`，将生产配置保存在`web.Release.config`.

这是一个示例 web.Debug.config （仅相关部分）：

```
<system.identityModel>
  <identityConfiguration>
    <audienceUris>
      <add xdt:Transform="RemoveAll" />
      <add value="http://myinstance.cloudapp.net/" xdt:Transform="Insert" />
    </audienceUris>
  </identityConfiguration>
</system.identityModel>

<system.identityModel.services>
  <federationConfiguration >
    <cookieHandler requireSsl="false" />
    <wsFederation passiveRedirectEnabled="true" issuer="https://mynamespace.accesscontrol.windows.net/v2/wsfederation" realm="http://myinstance.cloudapp.net/" reply="http://myinstance.cloudapp.net/" requireHttps="false" xdt:Transform="Replace"/>
  </federationConfiguration>
</system.identityModel.services> 
```

现在剩下要做的就是为您的 ACS 门户中的每个配置配置一个依赖方。

您实际上可以为所有 3 种配置配置一个 RP，但实现此目的的唯一方法是以编程方式使用服务管理 API，因为门户仅允许您为每个依赖方配置一个领域/返回 URL 值。

请注意，如果您决定这样做，则必须在 web.config（`reply`属性）中设置返回 url，否则 ACS 将始终使用第一个配置的返回 url（您在门户中看到的那个）覆盖它。

# mysql - 是否有任何工具可以将 MySQL SQL 转换为 PostgreSQL SQL？

> ID：15736495
> 
> 赞同：0
> 
> 时间：2013-04-01T01:32:15.470
> 
> 标签：mysql, postgresql

我们正在将我们的数据库从 MySQL 迁移到 PostgreSQL，并且我们现有应用程序中的大部分 SQL 都需要重写。

我想知道是否有任何工具可以将 MySQL SQL 转换为 PostgreSQL SQL，这样我们就可以避免手动一一重写这些 SQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:24:19.197

SQL 足够复杂，以至于一个通用工具来“理解”一条 SQL 语句并在另一种方言中生成一个兼容的等价物是不切实际的。特别是因为大多数 SQL 对实际上并未在任何地方强制执行的数据做出隐含假设，因此 SQL 语句可能在一个数据集上做一件事情，但在另一个数据集上做一些不同（和意外）的事情。您将如何编写一个工具来转换使用会话变量的 MySQL 查询？还是使用可写公用表表达式的 PostgreSQL 查询？你不可能自动化它。

您也许可以找到工具来自动化简单的语法和方言更改以及常见的一对一函数替换，但仅此而已。除非你有大量简单的、非常相似的 SQL 语句，否则这些工具并不会被大量使用。如果您有大量非常相似且可能最初由机器生成的语句，您可能需要考虑您的应用程序设计，因为这并不是一个真正的好方法。

您通常最好手动修复 SQL，可能在一些简单的数据类型替换之后。

如果您首先修复您的 SQL 以在 ANSI 和 STRICT 模式下运行的 MySQL 上正常工作，这将对您有很大帮助，因此您会发现一些非常愚蠢的 MySQL 主义，您可以将代码更改为 ANSI 引用而不是 MySQL 的引用规则， ETC。

# html - 点击文字在 UIWebView 托管的 HTML 页面中导致闪烁

> ID：15736496
> 
> 赞同：0
> 
> 时间：2013-04-01T01:32:32.017
> 
> 标签：html, ios, uiwebview

我的 iPhone 应用程序中的一个视图控制器包含一个 UIWebVew，它加载一个包含`<input class="textInput">`元素的本地 HTML 文件。

单击此文本输入时，HTML 内容区域的背景会产生 1/4 秒长的灰色视觉效果……有点缩放或阴影或其他东西……很难描述，但很烦人。它消失了，但我宁愿它根本没有发生。

它与文本输入的激活有关。

任何想法可能导致它，以及如何抑制它？

-艾伦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:42:19.560

我刚刚解决了这个问题。故事板中 UIWebView 的背景颜色称为 Clear Color。我把它改成白色，现在一切都很好。

# c - 如何在 C 中打印无符号字符？

> ID：15736497
> 
> 赞同：69
> 
> 时间：2013-04-01T01:32:53.190
> 
> 标签：c, printf

我正在尝试将 char 打印为正值：

```
char ch = 212;
printf("%u", ch); 
```

但我得到：

```
4294967252 
```

我怎样才能进入`212`输出？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-01T01:35:55.387

声明你`ch`的

```
unsigned char ch = 212 ; 
```

您的 printf 将起作用。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-04-01T01:36:30.797

这是因为在这种情况下，该`char`类型已在您的系统上签名^*。发生这种情况时，数据会在默认转换期间进行符号扩展，同时将数据传递给具有可变数量参数的函数。由于 212 大于 0x80，它被视为负数，`%u`将数字解释为一个大的正数：

```
212 = 0xD4 
```

当它被符号扩展时，`FF`s 会在你的号码前附加，所以它变成

```
0xFFFFFFD4 = 4294967252 
```

这是打印的数字。

请注意，此行为特定于您的实现。根据 C99 规范，所有`char`类型都提升为 (signed) `int`，因为 an可以表示 a 、有符号或无符号`int`的所有值：`char`

> 6.1.1.2：如果an`int`可以表示原始类型的所有值，则将该值转换为an `int`；否则，将其转换为`unsigned int`.

这导致将 a 传递`int`给格式说明符`%u`，该说明符需要`unsigned int`.

为避免程序中出现未定义的行为，请按如下方式添加显式类型转换：

```
unsigned char ch = (unsigned char)212;
printf("%u", (unsigned int)ch); 
```

* * *

^*通常，标准将签名留给`char`实施。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/a/2054941/335858)。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-04-01T13:57:22.513

这段代码有两个错误。首先，在大多数带有 signed 的 C 实现中`char`，存在一个问题，`char ch = 212`因为 212 不适合 8 位 signed `char`，并且 C 标准没有完全定义行为（它需要实现来定义行为）。它应该是：

```
unsigned char ch = 212; 
```

其次， in `printf("%u",ch)`,`ch`将被提升为`int`in 正常的 C 实现。但是，说明`%u`符需要一个`unsigned int`，并且 C 标准没有定义传递错误类型时的行为。它应该是：

```
printf("%hhu", ch); 
```

（对于`%hhu`,`printf`期望`unsigned char`在正常的 C 实现中已被提升为`int`。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-14T02:24:25.170

如果您因任何原因无法更改声明，您可以执行以下操作：

```
char ch = 212;
printf("%d", (unsigned char) ch); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-01T01:50:08.990

char 的范围是 127 到 -128。如果您分配 212，则 ch 存储 -44 (212-128-128) 而不是 212。因此，如果您尝试将负数打印为无符号，则会得到**(无符号整数的最大值)-abs(number)**，在这种情况下为 4294967252

因此，如果您想将 212 原样存储在 ch 中，您唯一能做的就是将 ch 声明为

```
unsigned char ch; 
```

现在 ch 的范围是 0 到 255。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-19T16:56:34.790

因为`char`是默认`signed`声明的，这意味着变量的范围是

> -127 至 +127>

你的价值溢出了。要获得所需的值，您必须声明`unsigned`修饰符。修饰符的 ( `unsigned`) 范围是：

```
 0 to 255 
```

要获取任何数据类型的范围，请按照流程`2^bit`示例`char`是 8 位长度来获取其范围`2 ^(power) 8`。

# html - 保证金不起作用？

> ID：15736499
> 
> 赞同：0
> 
> 时间：2013-04-01T01:33:04.910
> 
> 标签：html, css, margin

我在“theform”中有一个 div，“top”，我想居中，2em 作为上边距。它居中，但上边距不是 2em。和 -webkit-box-align: center; 也不起作用，因为我需要以“mainphoto”为中心。

有任何想法吗？保证金可能崩盘？如果是的话，我找不到解决办法。

[http://jsfiddle.net/D2BC4/1/](http://jsfiddle.net/D2BC4/1/)

**HTML**

```
<div id="wrapper">
        <body>
        <?php
        ?>
        <div id="theform">
            <form>
                <div id="top">
                    <div id="mainphoto">

                    </div>
                    <div id="title">

                    </div>
                </div>
            </form>
        </div>
        </body>
    </div> 
```

**CSS**

```
*{  
    font-size:100%;
    margin: 0em;
    padding: 0em;
} 

body{
    width: 100%;
}

#mainphoto{
    display:-webkit-box;
    width:22em;
    height:17em;
    border:1px solid red;
}

#theform{
    display:-webkit-box;
    -webkit-box-orient: vertical;
    width: 55em;
    overflow:auto;
    border:1px black solid;
}

#title{
    display:-webkit-box;
}

#top{
    -webkit-box-orient: horizontal;
    -webkit-box-align: center;
    margin: 2em auto;
    width: 50em;
    height:20em;
    overflow:auto;
    border:2px red solid;
}

#wrapper{
    display:-webkit-box;
    -webkit-box-orient: horizontal;
    -webkit-border-radius:0.9em;
    box-shadow: 3px 10px 5px #888888;
    margin: 3em auto;
    width: 80em;
    height:52em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:38:16.890

为您添加边距以`#mainphoto`使其居中

```
#mainphoto{
    display:-webkit-box;
    width:22em;
    height:17em;
    margin:2em auto 0 auto;
} 
```

工作[演示](http://jsfiddle.net/D2BC4/3/)

希望这有帮助

# javascript - 非附加 Image.onload 垃圾回收

> ID：15736501
> 
> 赞同：4
> 
> 时间：2013-04-01T01:33:08.627
> 
> 标签：javascript, event-handling, garbage-collection

如果通过创建图像`var img=new Image()`，`onload`添加并`img.src`设置处理程序，则将请求并`onload`调用图像数据，尽管图像未附加到 DOM 树。例如。

```
var img=new Image();
img.onload=function(){
    alert('Loaded!');
}
img.src='test.png'; 
```

何时以及如何对该图像进行垃圾收集？JavaScript 是否能够知道`onload`处理程序将被调用，并且只调用一次，然后释放图像？JavaScript 是否会注意到如果`img.src`未设置，因此`onload`将永远不会被调用并且`img`可以立即释放？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-10T13:03:54.157

我已经使用[测试页面](http://pastebin.com/YZkGYmBC)进行了一些调查以找到问题的答案 - 当带有事件处理程序的图像对象（在 JS 中创建且未附加到 DOM 树）被垃圾收集时。

页面中的 JS 代码通过`document.createElement("img")`（`new Image()`工作方式相同）创建 1000 个图像，附加 2 个事件处理程序（加载和错误）并设置`src`属性。
当所有图像都加载完毕后，JS 会尝试释放`gc()`在最后一个加载事件中显式调用的内存（=同步），并立即`src`将此图像的 设置为另一个 URL。此外，计时器设置为第二次尝试释放内存，因此稍后以异步方式完成。

Chrome Developer Tools 中的 Memory Timeline 显示，第一个 GC 收集了除最后一个之外的所有图像。我将此解释为最后一张图片无法被 GC 处理，因为它正在加载新图片。当第二次 GC 发生时，最后一个图像已经被加载并且它也被从内存中删除。

[![记忆时间线](https://i.stack.imgur.com/zdxib.png)](https://i.stack.imgur.com/zdxib.png)

我从这个实验中得出的结论：

*   调用加载/错误事件处理程序，如果 JS 中不存在指向图像对象的链接，则事件，
*   当图像加载过程完成（成功或失败）时，可以对图像对象进行垃圾收集。

在 Chrome Canary 33.0.1733.2 中测试，`--js-flags="--expose-gc"`
源代码[http://pastebin.com/YZkGYmBC](http://pastebin.com/YZkGYmBC)

# javascript - javascript getOwnPropertyNames 方法

> ID：15736502
> 
> 赞同：0
> 
> 时间：2013-04-01T01:33:09.063
> 
> 标签：javascript

为什么**Object.getOwnPropertyNames()**不返回函数的调用和应用方法？

```
 function arr(){};

 Object.getOwnPropertyNames(arr);//output:arguments,length,prototype,caller only 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:35:49.387

因为这些属性在`Function`原型上，而不是在函数本身上。这实际上是该方法的重点，过滤掉原型上的属性而不是对象本身的属性。

# sql - Oracle 使用 REGEXP 验证日期字段

> ID：15736503
> 
> 赞同：0
> 
> 时间：2013-04-01T01:33:14.720
> 
> 标签：sql, regex, oracle11g

我正在使用 Oracle 11G，并且我有一个日期列（Var char 2），其中日期是手动输入到数据库中的，不幸的是，很多时候输入的日期无效。我只想使用某种 REGEXP LIKE 语句选择有效的日期字段。以下是我想选择的可能的有效格式。

```
DATE

JULY 31, 2009
7/31/2009
31-JUL-09 
```

任何不在这 3 种可能格式中的东西我都不想选择。有人可以帮我想出一个 REGEXP 或其他方式来选择这些有效的日期格式。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:30:05.007

尝试 PL/SQL 而不是正则表达式。它会明显变慢，但会更安全，更容易维护和扩展。您应该依靠 Oracle 格式模型来正确执行此操作。我已经看到很多尝试使用正则表达式验证此信息，但我很少看到它正确完成。

如果您真的关心性能，那么真正的答案是修复您的数据模型。

**代码和测试用例：**

```
--Function to convert a string to a date, or return null if the format is wrong.
create or replace function validate_date(p_string in string) return date is
begin
    return to_date(p_string, 'MONTH DD, YYYY');
exception when others then
    begin
        return to_date(p_string, 'MM/DD/YYYY');
    exception when others then
        begin
            return to_date(p_string, 'DD-MON-RR');
        exception when others then
            return null;
        end;
    end;
end;
/

--Test individual values
select validate_date('JULY 31, 2009') from dual;
2009-07-31
select validate_date('7/31/2009') from dual;
2009-07-31
select validate_date('31-JUL-09') from dual;
2009-07-31
select validate_date('2009-07-31') from dual;
<null> 
```

**简单的性能测试：**

```
--Create table to hold test data
create table test1(a_date varchar2(1000)) nologging;

--Insert 10 million rows
begin
    for i in 1 .. 100 loop
        insert /*+ append */ into test1
        select to_char(sysdate+level, 'MM/DD/YYYY') from dual connect by level <= 100000;

        commit;
    end loop;
end;
/

--"Warm up" the database, run this a few times, see how long a count takes.
--Best case time to count: 2.3 seconds
select count(*) from test1;

--How long does it take to convert all those strings?
--6 minutes... ouch
select count(*)
from test1
where validate_date(a_date) is not null; 
```

# sql - SQL 查询更新错误

> ID：15736510
> 
> 赞同：1
> 
> 时间：2013-04-01T01:34:06.987
> 
> 标签：sql, sql-server, sql-update

```
update invd.InvoiceDetail set invd.costprice=883.75
from InvoiceDetail invd
where saleDespatchDetailID = 5 
```

我在此查询中遇到错误：

> 消息 208，级别 16，状态 1，第 1 行
> 无效的对象名称“invd.InvoiceDetail”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T01:35:06.727

由于您提供了别名，因此您将引用别名，因此代码应为：

```
update invd
set invd.costprice=883.75
from InvoiceDetail invd
where invd.saleDespatchDetailID = 5 
```

但是由于您没有将表与另一个表连接起来，因此您实际上并不需要别名。

```
update InvoiceDetail
set costprice=883.75
where saleDespatchDetailID = 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:35:18.133

您没有加入更新，因此您可以直接执行基本`UPDATE`语句。

```
update InvoiceDetail 
set    costprice = 883.75
where  saleDespatchDetailID = 5 
```

以我自己的方式编写`UPDATE`语句，我只`FROM`在我加入更新语句上的表时使用，如下所示

```
UPDATE a
SET    a.ColumnName = 'a'
FROM   table1 a
       INNER JOIN table2 b
            ON a.PK = b.FK
WHERE  a.Column = 'xxx' 
```

# python - 使条目小部件处于活动状态

> ID：15736511
> 
> 赞同：0
> 
> 时间：2013-04-01T01:34:07.567
> 
> 标签：python, tkinter

我正在尝试更改我的窗口，以便条目小部件处于“活动状态”：无需单击小部件，您可以键入并直接进入框（与 IDLE 的`Alt`+`M`窗口相同 --- 当窗口打开时，无需单击进入输入框，您可以在其中输入）。

我尝试使用`entry.icursor()`：

```
from Tkinter import *
class GetFileName:
    def __init__(self, master):
        self.frame = Frame(master)
        self.entryFrame = Frame(self.frame)
        self.fEntry = Entry(self.entryFrame, width = 50, justify = CENTER)
        self.fEntry.icursor(0) # thought this would make it "active"
        # a bunch of other widgets
        self.fEntry.grid(row = 1, column = 2, padx = 5, pady = 5)
        self.entryFrame.grid(row = 1)
        self.frame.grid()

root = Tk(className = ' Module Opener')
app = GetFileName(root)
root.rowconfigure(0, weight = 1)
root.columnconfigure(0, weight = 1)
root.mainloop() 
```

我该如何解决这个问题，使其成为活动窗口？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:07:21.733

您需要调用`focus_set`入口小部件。

# android - 创建一个可重用的 API 来创建/维护 Joomla 帐户以用于 Android 应用程序/移动站点开发

> ID：15736512
> 
> 赞同：0
> 
> 时间：2013-04-01T01:34:09.180
> 
> 标签：android, joomla

我正在使用 Joomla 1.5，并且我已经意识到与从第三方域和脚本创建 Joomla 帐户以及从第三方域/脚本使用 Joomla（登录）进行身份验证相关的一些困难。

我的理解是，困难在于使用密钥对 MD5 散列密码进行加盐以增加安全性，并且该密钥位于 configuration.php 文件中。

一旦安装了 Joomla 1.5，在 configuration.php 中我们已经有一个密钥，形式为：

```
var $secret = 'xxxxxxxxxxxxxxxxxxx'; 
```

现在假设我们可以访问**jos_users**和**jos_sessions 表**，是不是不可能创建一个简单的 PHP 脚本（给定用户名、密码、MD5 散列并使用密钥加密），我们可以使用它来完全绕过 Joomla 并处理直接通过 MySQL 数据库注册、登录、注销和会话数据，而完全不需要安装 Joomla？

我想通过创建一个 /api 文件夹作为项目并在这个平台上构建来做到这一点。

我知道我有很多东西要学，但我希望从逻辑上讲，可以构建一段可重用的代码。

如果没有，我知道可能需要一个简单的插件来帮助使用 Joomla 框架内的 XML-RPC 来促进这些功能，但是我更愿意避免这条路线。

# jquery - jQuery dataTables - 动态选择框

> ID：15736513
> 
> 赞同：1
> 
> 时间：2013-04-01T01:34:24.707
> 
> 标签：jquery, jquery-datatables, jquery-datatables-editor

如何使选择框显示列中的所有不同值？

这里有一个我需要的例子：http:
[//datatables.net/examples/api/multi_filter_select.html](http://datatables.net/examples/api/multi_filter_select.html)

选择框应填充来自 DB 列（或表列）的所有不同值。
如何在添加模式窗口（来自 DataTables Editor 插件）中执行此操作？

这是一个应该这样做的脚本，但它对我不起作用： http: [//datatables.net/forums/discussion/comment/34461#Comment_34461](http://datatables.net/forums/discussion/comment/34461#Comment_34461)

* * *

这是模态窗口JS脚本：

```
$(document).ready(function() {
    editor = new $.fn.dataTable.Editor( {
        "ajaxUrl": "php/browsers.php",
        "domTable": "#example",
        "fields": [
        {"label": "Field 1","name": "field1","type": "select","ipOpts": [   
            {
            "label": "Option 1",
            "value": "option1"  },
            {
            "label": "Option 2",
            "value": "option2"  },
            {
            "label": "Option 3",
            "value": "option3"  },
        ]
        },
        {"label": "Field 2","name": "field2","type": "select","ipOpts": [   
            {
                "label": "Option 1",
            "value": "option1"  }
        ]},
            ]
    } ); 
```

* * *

# actionscript-3 - FlexORM 自引用

> ID：15736522
> 
> 赞同：0
> 
> 时间：2013-04-01T01:35:35.560
> 
> 标签：actionscript-3, flex4

我想知道是否有人使用过名为 FlexORM 的框架，它非常有用，但我遇到了一个问题，我需要为这样的父子表创建一个自引用关联

一个名为 table1 的表有一个名为 parentID 的字段，该字段具有一些 table1 ID 的值，有意义吗？

问题是我不知道如何使用注释构建类，或者是否可以使用此框架来构建类，我知道在其他技术（例如 Doctrine）中，如果像这里一样简单地做到这一点

[http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#one-to-many-self-reference](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#one-to-many-self-referencing)

我尝试过任何类型的组合，但没有结果，对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T03:46:22.593

很难找到因为页面不再可见，无论如何这就是我想要的

[http://flexorm.riaforge.org/wiki/index.cfm/Tree_Structures](http://flexorm.riaforge.org/wiki/index.cfm/Tree_Structures)

谢谢！

# android - 根据编译器，Android 无法实例化 FragmentTransaction 对象

> ID：15736524
> 
> 赞同：2
> 
> 时间：2013-04-01T01:35:54.893
> 
> 标签：android, android-fragments, instantiation

当我尝试实例化 FragmentTransaction() 时出现错误消息：

“无法实例化类型 FragmentTransaction”

在 google Android 参考中它指出：

公共构造函数

片段交易（）

所以如果有 FragmentTransaction() 的构造函数，那么它必须可以做到这一点，

```
 FragmentTransaction fragtransaction = new FragmentTransaction(); 
```

问题是为什么这是不可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:45:05.683

`FragmentTransaction`，根据[文档](http://developer.android.com/reference/android/app/FragmentTransaction.html)，是一个[抽象](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)类，因此不能直接实例化。相反，您应该使用`FragmentManager`'s [beginTransaction](http://developer.android.com/reference/android/app/FragmentManager.html#beginTransaction%28%29)方法来获得有效的`FragmentTransaction`

# asp.net - 自定义响应标头的最大大小/长度是多少？

> ID：15736527
> 
> 赞同：1
> 
> 时间：2013-04-01T01:36:08.527
> 
> 标签：asp.net, http, header, asp.net-web-api

我正在创建几个要从 ASP.Net web api 操作返回的自定义响应标头，我需要知道是否存在我应该关注的硬性或实际大小限制？

# silverlight - Windows 8 天气应用程序中使用的控件

> ID：15736528
> 
> 赞同：0
> 
> 时间：2013-04-01T01:36:16.417
> 
> 标签：silverlight, xaml, windows-8, windows-runtime, windows-store-apps

在 Windows 8 附带的默认天气应用程序中，有一个包含 2 个按钮的预报部分，通过单击这些按钮，应用程序将在该部分滑动并显示新内容。如下图所示：

![在此处输入图像描述](https://i.stack.imgur.com/qqqlV.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/p8iUh.jpg)

这真的很酷，我一直在搜索如何执行此操作或使用的控件类型。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:05:16.177

Bing Weather 是一个 HTML 应用程序，但这并没有什么特别之处 - 一个常规按钮，当单击该按钮时，它会在设置了 Clip 属性的面板上运行 RenderTransform 的动画。

# facebook - 使用未定义的常量 CURLOPT_IPRESOLVE - 假定为“CURLOPT_IPRESOLVE”

> ID：15736529
> 
> 赞同：0
> 
> 时间：2013-04-01T01:36:22.920
> 
> 标签：facebook, codeigniter, codeigniter-url

我有[http://www.idiotminds.com/login-with-facebook-in-codeigniter/](http://www.idiotminds.com/login-with-facebook-in-codeigniter/) 但我有错误

```
> A PHP Error was encountered
> 
> Severity: Notice
> 
> Message: Use of undefined constant CURLOPT_IPRESOLVE - assumed
> 'CURLOPT_IPRESOLVE'
> 
> Filename: facebook/base_facebook.php 
```

我修复**了 CURLOPT_SSL_VERIFYPEER => false，** 但没有修复

**但我启用了 php_curl**

**

```
cURL support enabled
cURL Information libcurl/7.24.0 OpenSSL/0.9.8b zlib/1.2.3 libidn/0.6.5

** 
```

代码

```
public static $CURL_OPTS = array(
    CURLOPT_CONNECTTIMEOUT => 10,
    CURLOPT_RETURNTRANSFER => true,
    CURLOPT_TIMEOUT        => 60,
    CURLOPT_USERAGENT      => 'facebook-php-3.2',
    CURLOPT_SSL_VERIFYPEER => false
  ); 
```

它仍然不起作用，请帮助我，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-24T04:41:33.833

是的，你可能会得到最新的 curl。但是你仍然需要为 php 安装 php-curl。你应该检查你是否有它。

```
php -i |grep curl
//this will be return in your linux command line.
/etc/php/7.1/cli/conf.d/20-curl.ini,
curl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T01:45:36.010

`CURLOPT_IPRESOLVE`仅适用于 >= CURL 版本 7.10.8 并且您的 CURL 版本是 7.24.0。需要更新 CURL 才能使该 CONSTANT 可用。并且对这个常量的支持仅适用于 PHP>=5.3

参考： http: [//gcov.php.net/PHP_5_3/lcov_html/curl/interface.c.gcov.php](http://gcov.php.net/PHP_5_3/lcov_html/curl/interface.c.gcov.php)

# python - Python Tkinter 旋转图像动画

> ID：15736530
> 
> 赞同：3
> 
> 时间：2013-04-01T01:36:29.120
> 
> 标签：python, animation, rotation, tkinter, python-imaging-library

我有一个使用 PIL 创建的 PhotoImage，然后添加到 TKinter 画布中。图像显示良好。但是，我无法让 PIL 旋转功能正常工作。这是我的代码：

```
 #This works fine
 image = Image.open('img.png')
 canvas_image = ImageTk.PhotoImage(rotated_image)
 canvas_object = canvas.create_image(30+10*int(steps),250, image=canvas_image)
 canvas.pack()

 #this does not work
 canvas.delete(canvas_object)
 rotated_image = image.rotate(1)
 canvas_image = ImageTk.PhotoImage(rotated_image)
 canvas_object = canvas.create_image(30+10*int(steps),250, image=canvas_image)
 canvas.update() 
```

但是，在这种情况下，图像只是不显示。我希望能够为图像的旋转设置动画，但我什至根本无法进行旋转！非常感谢任何建议。

编辑：更正，旋转已添加到屏幕后将不起作用

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T02:41:56.220

这是一个使用 Python3 旋转图像的示例：

```
import tkinter as tk
from PIL import ImageTk
from PIL import Image

class SimpleApp(object):
    def __init__(self, master, filename, **kwargs):
        self.master = master
        self.filename = filename
        self.canvas = tk.Canvas(master, width=500, height=500)
        self.canvas.pack()

        self.update = self.draw().__next__
        master.after(100, self.update)

    def draw(self):
        image = Image.open(self.filename)
        angle = 0
        while True:
            tkimage = ImageTk.PhotoImage(image.rotate(angle))
            canvas_obj = self.canvas.create_image(
                250, 250, image=tkimage)
            self.master.after_idle(self.update)
            yield
            self.canvas.delete(canvas_obj)
            angle += 10
            angle %= 360

root = tk.Tk()
app = SimpleApp(root, '/path/to/image.png')
root.mainloop() 
```

对于 Python2 版本，请参阅[修订历史](https://stackoverflow.com/revisions/7d667e06-fc21-4f67-b186-1580505b15de/view-source)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-01T19:27:58.197

这是上面 unutbu 的答案，但在 Python 3 中：

```
import time
import tkinter
from PIL import Image, ImageTk

class SimpleApp(object):
    def __init__(self, master, filename, **kwargs):
        self.master = master
        self.filename = filename
        self.canvas = tkinter.Canvas(master, width=500, height=500)
        self.canvas.pack()

        self.process_next_frame = self.draw().__next__  # Using "next(self.draw())" doesn't work
        master.after(1, self.process_next_frame)

    def draw(self):
        image = Image.open(self.filename)
        angle = 0
        print(self.process_next_frame)
        while True:
            tkimage = ImageTk.PhotoImage(image.rotate(angle))
            canvas_obj = self.canvas.create_image(250, 250, image=tkimage)
            self.master.after_idle(self.process_next_frame)
            yield
            self.canvas.delete(canvas_obj)
            angle += 1
            angle %= 360
            time.sleep(0.002)

root = tkinter.Tk()
app = SimpleApp(root, 'images.png')
root.mainloop() 
```

我花了一段时间才让这个工作，所以我想我会分享。

# angularjs - 在 AngularJS 中，使用 ng-repeat，为什么 $scope 变量会在子级之间发生冲突？

> ID：15736549
> 
> 赞同：0
> 
> 时间：2013-04-01T01:39:58.313
> 
> 标签：angularjs, angularjs-scope, angularjs-ng-repeat

我有一个代表“讨论”或“辩论”的对象，它有两个孩子——每个孩子都是代表辩论中“争用”的孩子对象的集合。一个孩子是“肯定”争论的集合，另一个是“否定”争论的集合。

我正在使用这样的东西：

```
<div ng-controller="contentionGroupCtrl" ng-repeat="(contentionType, contentionGroup) in debate.contentions_sorted" class="contention {[{contentionType}]}-section">
  <a class="button contention-new" ng-click="toggleEditForm()">+ Add New Contention</a>
  <div class="contention-new" ng-show="editing">
    <form ng-submit="formContentionSubmit()" class="ng-scope ng-pristine ng-invalid ng-invalid-required">
      <input type="text" id="contention_name" name="contention[name]" required="required" ng-model="edit.name" placeholder="New Contention" class="ng-pristine ng-invalid ng-invalid-required">
      <div>
        <input type="radio" id="contention_aff_0" name="contention[aff]" required="required" ng-model="edit.aff" value="1">
        <label for="contention_aff_0" class="required">Affirmative</label>
        <input type="radio" id="contention_aff_1" name="contention[aff]" required="required" ng-model="edit.aff" value="0">
        <label for="contention_aff_1" class="required">Negative</label>
      </div>
      <input type="button" ng-click="toggleEditForm()" value="Cancel">
      <input type="submit" value="Save">
    </form>
  </div>
  <div ng-controller="contentionCtrl" ng-repeat="contention in contentionGroup" class="contention" id="contention-{[{ contention.id }]}">
    EACH CONTENTION CONTENT STUFF HERE
  </div>
</div> 
```

这将显示两组争用，每组顶部都有一个“添加新争用”表单。表单基于 toggleEditForm() 方法进行切换。我对“新争用”和“编辑争用”使用相同的表单模板，因此该表单有一个模型（单选按钮）来判断争用是“肯定”还是“否定”争用。

控制器“contentionGroupCtrl”用于争用组，它的 toggleEditForm 方法如下所示：

```
// Toggle New Contention Form
  $scope.toggleEditForm = function() {
    var ct;
    $scope.editing = !$scope.editing; // First display or hide the form
    if ($scope.editing == true) {  // If displaying the form, initialize 
      if ($scope.contentionType == 'aff') {
        ct = 1; // 'aff' equates to 1 in the model
      }
      else {
        ct = 0;
      }
      $scope.edit.aff = ct; // Sets the radio button appropriately

      // We are now editing
      $scope.edit.name = ''; // Blanks out the contention "Name" field for creating a new contention
    }
  }; 
```

一切都很好，除了：假设您打开“肯定”端的“添加新争用”表单。它将显示一个空白名称，并选择了单选按钮“肯定”。如果您然后单击“否定”侧的“添加新争用”按钮，将出现相应的表单，但两个“名称”字段都将被空白，并且两个单选按钮都将被选中用于“否定”。

$scope 应该在每一边都不同，不是吗？每个表单都使用自己的 $scope.edit 模型；为什么修改否定争用方的“edit.name”和“edit.aff”模型会影响肯定方的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T04:13:11.217

根据我在提出这个问题后所学到的知识以及遵循 Mark Rajcok 的建议，这个问题的主要主旨是我正在嵌套 Scopes，这不是最佳实践。

就我而言，我所依赖的其他 $scope 变量需要在子范围内初始化，否则它们是从父范围继承的。这完全是我的*目标*，但它最终在我的实现中变得混乱，我错过了修复它。

然而，最重要的是：尽量不要嵌套范围！相反，使用自定义服务处理控制器之间的数据接口。

# php - 使用 php5 在 mysql 中注册用户帐户

> ID：15736552
> 
> 赞同：0
> 
> 时间：2013-04-01T01:40:52.970
> 
> 标签：php, mysql, sql-insert

我正在尝试使用 MySQL 数据库注册用户。我已将问题缩小到这段代码。

```
$query = "INSERT INTO `Users`(`User`, `Pass`, `Email`, `RegKey`, `KeyList`, `ID`, `UserType`) VALUES ([".$user."],[".$pass."],[".$email."],[".$regkey."],[''],[". $NumUsers + 1 ."],['Default'])";
$result = mysqli_query($con,$query);
if($result != false){
        //Successfully created the user
        mysqli_free_result($result);
        $query = "UPDATE Keys SET Paid=1
        WHERE Key='".$regkey."'";
        $result = mysqli_query($con,$query);
        mysqli_free_result($result);
        header('Location: '.$website.'register.php?success');
} else{
    //Failed to create the user
    mysqli_free_result($result);

    header('Location: '.$website.'register.php?e3');
} 
```

有人可以帮我弄清楚我的 PHP 出了什么问题吗？我已经查找了所有内容，我认为这与查询结果有关，但我不确定。

更新：

我编辑了查询，我相信它遵循 mysql 语法，但我仍然收到错误

更新了 $query

```
$query = "INSERT INTO Users(User, Pass, Email, RegKey, KeyList, ID, UserType) VALUES ('".$user."','".$pass."','".$email."','".$regkey."','',". $NumUsers + 1 .",'Default')"; 
```

更新 2：

修复了 Sql 查询，但我仍然遇到同样的问题......

固定查询：

```
$query = "INSERT INTO `Users`(`User`, `Pass`, `Email`, `RegKey`, `KeyList`, `UserType`) VALUES ('".$user."','".$pass."','".$email."','".$regkey."','','Default')"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:43:49.117

你的`INSERT`说法是错误的。如果您没有参数化该值，则数据类型为字符串（包括日期）的值必须用单引号括起来，而不是用括号括起来。例如：

```
INSERT INTO tableName(strCol, dateCol, intCol) 
VALUES ('string value', '2013-01-01 00:00:00', 0) 
```

作为旁注，如果变量的值来自外部，则查询很容易受到[SQL 注入攻击。](http://bobby-tables.com/)请查看[这篇文章](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php))以了解如何防止它。通过使用`PreparedStatements`，您可以摆脱在值周围使用单引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:21:10.607

我同意这很容易发生 SQL 注入。但我认为这里的问题是您正在尝试插入`ID`. 现在，如果是，`ID`则`auto_increment`您不需要在查询中插入或包含它。

**另一件事，查询本身不正确。**由于这是在 PHP5 中，您应该使用 PDO 或 MySQLi。

试试这个

```
$query = "INSERT INTO `Users`(`User`, `Pass`, `Email`, `RegKey`, `KeyList`, `UserType`) VALUES ('".$user."','".$pass."','".$email."','".$regkey."','','Default')"; 
```

# c++ - C++ 引用指针，类和指针列表，奇怪的返回

> ID：15736553
> 
> 赞同：0
> 
> 时间：2013-04-01T01:41:00.910
> 
> 标签：c++, list, pointers, return-by-reference

我有一个程序，它将类和结构集存储在列表中。

它执行以下操作：

1.  通过引用将输入 (an `int`)、迭代器、列表和指针传递给函数`check()`
2.  迭代列表，直到找到迭代器的数据和输入之间的匹配
3.  将指针设置为迭代器的位置
4.  返回真或假，取决于是否找到匹配项。

我的问题是，当我`display()`从函数检查中调用函数时，无论是 from`it->display()`还是`Ptr->display()`，它都可以正常工作。但是当它通过引用传回时，我尝试显示它。它打印垃圾。

```
//it is the iterator, l is the list, Ptr is the passed pointer
template<class T, class T2, class P>
bool Inspection::check(int input, T it, T2 l, P * &Ptr)
{
    for(it = l.begin(); it != l.end(); ++it){   //Iterates through list using iterator
        if (it->checkExists(input)){        //if input == iterator class's data
            Ptr = &*it;

            //Display data - ERROR CHECKING//
            it->display();          
            Ptr->display();

            return true;
        }
    }
    return false;
} 
```

`checkExists`是一个函数，它与它正在迭代的类中的私有数据进行比较，例如

```
bool Property::checkExists(int input)
{
    if (input == ID)
        return true;
    return false;
} 
```

`display`也很简单

```
void Property::display()
{
    //Prints out property info
    cout << ID << ";" << address << ";" << landTypes[type] << ";" << price << endl;
} 
```

标准调用是（是我在程序前面调用`p`的类的列表）`Property`

```
int input;
Property * temp; //Pointer to a class temp
list<Property>::iterator pIT;

cin >> input;

while(!check(input, pIT, p, temp)){
    ...
}
    temp->display(); 
```

一个典型的输出是（前两个是函数内部的调用并且正确，第三个是`temp->display();`函数外部的调用。

```
1001;5/10 Northfields Ave, North Wollongong, NSW 2500;Townhouse;280000
1001;5/10 Northfields Ave, North Wollongong, NSW 2500;Townhouse;280000
13;�������\314���@�ve, North Wollongong, NSW 2500;Townhouse;280000 
```

编辑：对不起，我链接了错误的显示函数（）。编辑代码以更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:13:34.360

尽管 WhozCraig 指出了设计问题，但在您提供的代码中打印出垃圾的问题如下：

```
 template<class T, class T2, class P>
 bool Inspection::check(int input, T it, T2 l, P * &Ptr)
                                         ^^^^ 
```

您`l`通过值而不是通过引用传递，因此您将返回一个指向临时变量的指针，当您在方法之外取消引用它时该临时变量将不存在。如果您按以下方式修改代码，它应该开始解决这个特定问题，尽管它确实需要重新设计：

```
template<class T, class T2, class P>
bool Inspection::check(int input, T it, T2 &l, P * &Ptr) 
```

# c - C LinkedList将节点添加到末尾

> ID：15736554
> 
> 赞同：0
> 
> 时间：2013-04-01T01:41:04.097
> 
> 标签：c, pointers, insert, linked-list

我正在尝试创建一个可以将信息添加到链接列表的程序。似乎一旦我添加了 2 个以上的节点，之前添加的节点就会被覆盖。在完成这项工作时我有什么遗漏吗？

我从这个函数开始，它要么添加到列表的前面，要么如果已经有一个节点添加到前面，它调用函数 addToBack

```
ListHeadPtr Front(ListHeadPtr theList, list * toBeAdded){

  printf("Received in addToFront\n");

  if(theList == NULL){
    theList = toBeAdded;
    return(theList);
  }

  else{
    theList = addToBack(theList,toBeAdded);
    /*toBeAdded->next = theList;
    theList = toBeAdded;*/
    return (theList);
  }

}

  ListHeadPtr back(ListHeadPtr theList, item * toBeAdded){

  if(theList == NULL){
    theList = addToFront(theList,toBeAdded);
    return(theList);
  }

  else{
    list *current;
    current = theList;
    while (current->next!=NULL){
      current = current->next;
    }
    current->next = toBeAdded;
    return(current);
  }

} 
```

item(toBeAdded 由该函数定义

```
item *createItem(int time){

  item *itemPtr = (list *) malloc(sizeof(item));

  if(NULL == itemPtr)
    {
        printf("Unable to create item\n");
        return (NULL);
    }

  itemPtr->waitTime = time;
  itemPtr->next = NULL;

  return (itemPtr);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:45:23.160

在您的 [addTo]Back 函数中

```
return(current); 
```

应该返回列表的头部。您正在做的是将列表截断为最后两个元素。

避免此类错误的一种方法是精确地使用您的语义。`addToBack`返回的定义是什么？调用者希望它返回列表，并添加节点。函数之前应该有一个文档注释，说明它的作用和返回的内容。该注释可以指导您编写代码......如果最后只有一个语句返回列表，而不是多个返回，那么代码会更好。那么这个错误不可能发生。

# javascript - 我的 jquery tabber 代码有什么问题？

> ID：15736557
> 
> 赞同：0
> 
> 时间：2013-04-01T01:42:00.107
> 
> 标签：javascript, jquery

有人请救救我！我很沮丧，不知道我做错了什么。我的代码有什么问题？它根据 URL 激活特定选项卡。例如，`www.mywebsite.com#tab3`将激活我的 tabber 的 tab3。这就是我实现这一点的方式：我`location.hash`用来获取位置并与 href 进行比较，然后激活该选项卡。但问题就在这里：我有两个不同样式的选项卡（`ul#tabs li a`和`ul.tabs li a`）。我是否选择并进行了很好的比较？这是代码：

```
 var hash = location.hash;

 $(".tab_content").hide(); //Hide all content

 if ($("ul#tabs li a[href='" + hash + "'], ul.tabs li a[href='" + hash + "']").length) {
     $("ul#tabs li a[href='" + hash + "'], ul.tabs li a[href='" + hash + "']").parent().addClass("active"); //Activate tab
     $(hash).show();
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:21:17.030

您可以使用函数来促进此操作：

```
var hash = location.hash;

function active_hash(type) {
    var $node = $("ul" + type + "tabs li a[href='" + hash + "'], ul.tabs li a[href='" + hash + "']");

    if ($node.length) {
        $node.parent().addClass("active");
        $(hash).show();
    }
}

active_hash('#');
active_hash('.'); 
```

# function - 编辑表单中的杂货杂货删除功能

> ID：15736559
> 
> 赞同：0
> 
> 时间：2013-04-01T01:42:14.563
> 
> 标签：function, grocery-crud

在编辑页面中是否可以放置删除功能？我想将它内嵌到编辑表单底部的其他按钮中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T20:49:02.887

您可以使用 JavaScript 来实现。

当您单击按钮时，您的功能应向额外的控制器功能发送请求。

此功能必须删除行并发送成功答案。当 JS 函数得到答案时，您可以重定向到列表页面。

# java - 如果所有从java源编译的字节码都可以反编译成java源？

> ID：15736563
> 
> 赞同：8
> 
> 时间：2013-04-01T01:42:31.447
> 
> 标签：java, bytecode, decompiler

我看到一些java反编译器可以将字节码反编译成可读的java源，我想知道是否所有来自java（不是其他JVM语言）的字节码都可以再次反编译成java源？

* * *

**更新**

对不起，让我把问题说得更清楚。

只说JVM上正常的Java代码（无Android，无字节码增强，无AOP，无混淆），其实我希望字节码能被反编译。但我不知道是否有编译成字节码的java代码形式，永远无法被反编译成可读的java源代码。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T01:55:03.803

> 我想知道是否所有来自 java（不是其他 JVM 语言）的字节码都可以再次反编译为 java 源？

答案是不。

不保证反编译器适用于所有 Java 字节码：

*   一个好的混淆器会故意重新排列字节码，使常见的反编译器不会产生*可读*的源代码......并且可能不会产生*有效*的源代码。

*   许多反编译器在处理较新的 Java 结构时存在问题。

*   许多反编译器对从“复杂”源代码编译的字节码存在问题。

*   即使他们生成可编译的代码，也不能*保证*代码是正确的。

底线是，反编译器的好坏取决于作者的智慧和勤奋。我从来没有听说过一个完美的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-01T01:45:56.893

Java 字节码可以反编译回 Java 源代码。反编译的源代码通常看起来不完全相同，但具有相同的功能。如果您担心有人可能会反编译您的源代码，您可以使用混淆器（如[ProGuard](http://proguard.sourceforge.net/)）来提供帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T01:46:51.633

是的，这（通常）是可能的（为此存在多种工具）。请参阅：[如何“反编译”Java 类文件？](https://stackoverflow.com/questions/272535/how-do-i-decompile-java-class-files)

但是，您可以尝试保护您的文件，请参阅：[如何锁定已编译的 Java 类以防止反编译？](https://stackoverflow.com/questions/49379/how-to-lock-compiled-java-classes-to-prevent-decompilation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T01:52:02.960

我有机会反编译java多个代码，并且总是使用可用的工具进行管理，认为字节码是由编译器生成的，这个过程只需要反转就可以得到原始代码。我知道一种避免这种情况的方法。

我使用了这个工具。

java.decompiler.free.fr

# git - 为什么合并后GIT会说“已经是最新的”，但分支之间的差异仍然存在？

> ID：15736564
> 
> 赞同：38
> 
> 时间：2013-04-01T01:43:16.110
> 
> 标签：git, merge, conflict

我最初在“newfeature”分支工作，我被要求紧急修复实时分支上的错误。我为“generalmaintenance”创建了一个分支，完成了这项工作，然后切换到开发并将其合并。我现在想返回“newfeature”分支并合并我之前合并到其中的更改。

当我切换到“newfeature”并合并到“develop”时，3 个文件中存在冲突。

我陷入了解决冲突的纠结中，最终决定使用 Aptana Studio 3（这是我的 IDE）的“团队”菜单中的“恢复”命令。我希望这会让我回到合并之前，它似乎已经完成了。

无论如何，当我再次合并“开发”时，它说，`Already-up-to-date`但是当比较两个分支之间的文件时，它们非常不同，并且我在另一个分支中添加的更改没有被合并。

请问我现在将如何合并这两个分支？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-01T04:33:04.843

**恢复合并与重置合并**

我的猜测是你实际上*是* `Already-up-to-date`。

问题是[git revert](https://www.kernel.org/pub/software/scm/git/docs/git-revert.html)不会撤消合并，它只会撤消合并带来的更改。当您创建合并提交时，您将合并这两个分支的提交历史。

**合并**

```
 develop
        |
A---B---C
 \       \
  E---F---M
          |
      newfeature 
```

在上述情况下，`develop`合并到`newfeature`中，创建`M`提交。如果您要运行`git log newfeature`，您会看到来自两个分支的所有提交，但是从分支的角度来看`newfeature`，所有这些更改都是由`M`提交执行的。

**还原**

该`git revert`命令不会删除任何提交，而是创建一个新的提交，以撤消提交包含的更改。例如，如果您有一个包含此差异的提交...

```
-This is the old sentence.
+This is the new sentence. 
```

然后恢复它，revert 命令将创建一个新的提交，它刚刚执行了相反的差异，它只是翻转了符号。

```
-This is the new sentence.
+This is the old sentence. 
```

这对于撤消其他开发人员已经拥有的提交造成的损害非常有用。它推动历史前进，而不是改变历史。

**恢复合并**

但是，在非快进合并的情况下，它可能会产生不良影响。

```
 develop
        |
A---B---C
 \       \
  E---F---M---W
              |
         newfeature 
```

假设 W 是一个回复提交，你可以看到 running`git log newfeature`仍然会包含来自开发分支的所有提交。结果，来自的其他合并`develop`将不起作用，因为它看不到您的分支中缺少任何内容。

**使用[git reset](https://www.kernel.org/pub/software/scm/git/docs/git-reset.html)而不是还原。**

将来，如果合并尚未与其他开发人员共享，您可能需要考虑使用`git reset --hard <ref>`（合并的提交哈希在哪里）撤消合并。`<ref>`在上面的示例中，在创建了 merge commit 之后`M`，运行该命令`git reset --hard F`将导致以下结果。

```
 develop
        |
A---B---C
 \       \
  E---F---M
      |
  newfeature 
```

正如您所看到的，这种技术不会像某些人认为的那样消除提交，它只是将您的分支移回您选择的提交。现在如果你跑了`git log newfeature`，你只会得到 commit `F`,`E`和`A`. 现在合并实际上已从您的分支历史记录中消失，因此稍后尝试重新合并`develop`不会导致任何问题。

这种方法并非没有复杂性。意识到您现在正在修改历史记录，因此如果在合并`newfeature`后分支被推送到远程分支`M`，那么 git 会认为您只是过时并告诉您需要运行`git pull`. 如果只是您在那个远程分支上工作，那么请随意`force-push`- `git push -f <remote> <branch>`。这将具有与重置相同的效果，但在远程分支上。

如果这个分支正在被多个开发人员使用，而他们现在已经从中撤出 - 那么这是一个坏主意。这是非常`git revert`有用的原因，因为它在不改变实际历史的情况下撤消更改。

对历史记录使用重置实际上仅适用于尚未共享的提交。

**解决方案 - 还原还原。**

如果合并提交已经被共享，那么最好的方法可能是`git revert`在该合并上使用。但是，正如我们之前所说，您不能简单地将分支合并回来并期望该分支的所有更改重新出现。答案是还原还原提交。

假设您在`develop`尊重合并后在分支上做了一些工作`newfeature`。你的历史看起来像这样。

```
 develop
            |
A---B---C---D
 \       \
  E---F---M---W
              |
         newfeature 
```

如果你合并`develop`到`newfeature`现在，你只会得到`D`，因为它唯一的提交还不是`newfeature`分支历史的一部分。您还需要做的是恢复该`W`提交 -`git revert W`应该做的伎俩是`git merge develop`.

```
 develop
                    |
A---B---C-----------D
 \       \           \
  E---F---M---W---M---G
                      |
                 newfeature 
```

这将恢复原始合并提交所做的所有更改——这些更改实际上是由原始合并提交进行的`C`，`B`但被还原了`W`，然后它`D`通过新的合并提交引入我`G`建议在合并最近的更改*之前*`develop`还原还原，我怀疑这样做以该顺序触发冲突的可能性较低。

**TL;博士**

还原会创建一个“还原提交”。撤消还原时，您需要对第一次还原时创建的还原提交运行还原命令。它应该很容易找到，git 倾向于自动评论恢复，以便它们以“Reverted”一词开头。

`git revert <commit>`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-11-02T08:17:10.040

找到了一个hacky解决方案。但它有效。

无论[eddiemoya](https://stackoverflow.com/users/845488/eddiemoya)回答什么都是完全有帮助的。非常感谢您的解释。我遇到了类似的情况。在哪里，我可以看到很多内容，`git diff <branch>`但 git merge 说已经是最新的了。

由于日志中有很多还原，我无法找到确切的还原提交。（是的，坏事。一开始就不应该发生）

解决方案

```
git checkout branchX -- . 
```

这会将所有从 branchX 的更改暂存到我当前的分支。使用您最喜欢的 git 客户端，取消暂存和还原任何不打算使用的内容。

做出新的承诺并快乐:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-10-15T15:01:28.223

我也遇到过同样的情况。我所做的是我刚刚创建了一个新分支，并从不同的提交中挑选了所有需要的文件，然后合并了这个分支。

操作如下所示：

*   创建了一个新分支
*   用于`git cherry-pick -n xxxxxxx`从不同的提交中获取所需的文件
*   然后提交这些文件`git commit -m 'Your commit message'`
*   然后将这个樱桃采摘的分支合并到所需的分支中

# c++ - 拍摄一张图像的一部分以创建另一张图像

> ID：15736565
> 
> 赞同：2
> 
> 时间：2013-04-01T01:43:33.220
> 
> 标签：c++, python, opencv, image-processing, imagemagick

我正在处理我想从中取出部分并制作一个新图像的图像。我可以使用 ImageMagick 或 OpenCV。这是一个示例图像：

![在此处输入图像描述](https://i.stack.imgur.com/iPj2G.png)

从这张图片中，我想取出标题，两个带注释的文本（一个在圆圈中，一个在矩形中），以及底部的文本。

因此，最终图像将具有：图像标题、带注释的文本 1、带注释的文本，这是一些测试。图像的这些部分不必在新图像中以任何特定顺序排列。

**问题**

*   我可以使用什么样的策略来做到这一点？
*   霍夫或康尼会帮忙吗？
*   我在想，由于我想要返回的图像部分都是文本，也许霍夫线可以检测到直线，然后我将图像的这些部分裁剪掉......
*   我的主要目标是提取文本，以便将其发送到 OCR

我试图侵蚀图像并想出了这个：

![在此处输入图像描述](https://i.stack.imgur.com/E2fnz.png)

**我的策略**

以下是我的策略，只保留部分图像具有白色背景和文本。但是，我不确定这是否适用于 OpenCV ......

图像中会有不同的 ROI

*   图像顶部总会有白色背景，我们称之为空间标题。所以我裁剪了图像顶部的矩形部分并将其另存为单独的图像
*   图像底部总会有白色背景，我们称之为主体。所以我裁剪了图像底部的矩形部分并将其另存为单独的图像
*   图像顶部会有一些文本，我们称之为带注释的文本。这将是正方形或圆形。我可以使用[此答案](https://stackoverflow.com/a/15699181/131194)中提到的技术来裁剪图像的这些部分并将它们保存为单独的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T05:47:09.733

如果您只处理外观相似的字体，并且您不是在寻找超级高效的字体，您可以简单地对字母表中的每个字母（26 上和 26 下）执行相关性。对峰值进行阈值化并将它们加在一起。然后，您可以在峰周围定义边界框。

# sencha-touch - 煎茶触摸getView（）？

> ID：15736567
> 
> 赞同：0
> 
> 时间：2013-04-01T01:43:44.920
> 
> 标签：sencha-touch

如何`getView(`在 Sencha touch 中调用 view_name)`？我通常在 extjs 上执行此操作，但我不能在 sencha touch 上执行此操作。我无法理解应用程序的概念。

```
run_edit: function(data) {
    $this = this;
    this.mode = "update";
    this.data = data;
    this.win = this.getView('Group_prop').create();

    var form = this.win.down('form');
    var util = this.getController('controller_Helper');

    form.getForm().loadRecord(data);
    util.form_lock({
        form:form,
        items:['GROUP_KODE']
    });
    util.form_require({
        form:form,
        items:['GROUP_KODE','GROUP_NAMA']
    });

    this.win.show();
}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T13:59:02.673

我看到您正在尝试创建一个视图并将其设置为窗口，在 sencha touch 中您可以这样做：

```
Ext.Viewport.add(Ext.create('MyApp.view.ViewName')); 
```

除了 Viewport，您可以使用任何其他容器并将新创建的视图设置为它

```
Ext.getCmp('myContainerId').add(Ext.create('MyApp.view.ViewName')); 
```

要稍后获取此视图，您必须`id`在视图中指定配置，然后像这样获取它：

```
var view = Ext.getCmp('ViewId'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:04:29.847

有两种方法可以调用视图

1.

```
 Ext.Viewport.setActiveItem({xtype:'TwowayMakePayment'});  // view xtype 
```

2.

```
 var getti=Ext.create('VUCFyn.view.AfterLogin'); //create object 4 d view
    Ext.Viewport.add(getti);       // next add the object
    Ext.Viewport.setActiveItem(getti);     // final Active that obj 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T17:07:13.373

好的，看来您正在尝试获取视图：`Group_prop`。确保此视图在其配置中有一个`id`或最好是一个集合。`itemId`例如

```
Ext.define('MyApp.view.GroupProb', {
    extend: 'Ext.Panel',
    alias: 'widget.group_prob',
    config: {
        ...
        itemId: 'groupProb',
        ...
    },
    ....
}); 
```

现在在您的控制器中，您需要为此视图创建一个引用以正确访问它。所以你的控制器看起来像这样：

```
Ext.define('MyApp.controller.MyController', {
    extend: 'Ext.app.Controller',
    config: {
        refs : {
            groupProb : {
                autoCreate: true,
                selector: '#groupProb',
                xtype: 'group_prob'
            }
        },
        control: {
            ...
        },
        ...
    },
    run_edit: function(data) {
        $this = this;
        this.mode = "update";
        this.data = data;
        this.win = this.getView('Group_prop').create();

        var form = this.win.down('form');
        var util = this.getController('controller_Helper');

        form.getForm().loadRecord(data);
        util.form_lock({
            form:form,
            items:['GROUP_KODE']
        });

        this.win.show();
    },
   ...
}); 
```

现在从您的`run_edit`函数来看，您似乎正在使用`windows`变量`this.win`（如果我错了，请纠正我）。在 Sencha Touch 中，您可以使用`Panels`. 同样在此函数的末尾，您调用`show`函数 on `this.win`，这表明您要在显示`run_edit`时执行`this.win`。话虽如此，您可能希望您的`run_edit`函数看起来像这样：

```
run_edit: function() {
    var me = this,
        mode = 'update',
        data = data,
        groupProbPanel = me.getGroupProb();

    // This assumes that your form component has an itemId.
    // You need one inorder use the down method. 
    var form = groupProbPanel.down('#form_itemId');

    // You may want to double check this. I don't think that is how you 
    // you get the controller.
    var util = this.getController('controller_Helper');

    form.getForm().loadRecord(data);
    util.form_lock({
        form:form,
        items:['GROUP_KODE']
    });
} 
```

由于我们希望在`groupProbPanel`显示时发生这种情况，我们需要在我们的配置中设置一个[显示事件监听器。](http://docs.sencha.com/touch/2-1/#!/api/Ext.Panel-event-show)`control`所以你的控制器`config`应该是这样的：

```
...,
config: {
    refs : {
        groupProb : {
            autoCreate: true,
            selector: '#groupProb',
            xtype: 'group_prob'
        }
    },
    control: {
        groupProb : {
            show: 'run_edit'
        },
        ...
    },
    ...
},
... 
```

# bash - Bash 在数组中查找值

> ID：15736571
> 
> 赞同：1
> 
> 时间：2013-04-01T01:44:08.273
> 
> 标签：bash

我用这个函数在数组中查找值有一段时间，但我想改进它：

```
 # Checks if the first argument is found in the subsequent ones.

 function my_function_is_value_in() {

   local -r NEEDLE=$1
   local -ra HAYSTACK=( "${@:2}" )

   local value
   for value in "${HAYSTACK[@]}"; do
     [[ $value == "$NEEDLE" ]] && return 0
   done

   return 1

 } 
```

我现在认为对“参数重命名以提高可读性”数组的分配`HAYSTACK`效率低下，特别是对于“搜索”功能，可能会这样运行多次：

```
my_function_is_value_in coconut cherry coriander coconut cottage-cheese 
```

Bash 是否有一种有效的方法来执行上述操作，或者`${@:2}`直接循环执行是否尽可能高效？

`perl`与's比较/对比`grep( /pattern/ @array)`.. 这是一个专门的功能来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:05:37.580

你可能会得到更好的结果，但我没有做任何测量来证明这两种方式：

```
function my_function_is_value_in()
{
    local -r NEEDLE=$1
    shift
    local value
    for value in "$@"
    do
        [[ $value == "$NEEDLE" ]] && return 0
    done
    return 1
} 
```

想法是shell不需要以这种方式复制参数数组。那应该加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T16:25:20.000

似乎比显式循环更快：

```
my_function_is_value_in ()
{
  [[ "${@:2}" =~ "$1" ]] && return 0 || return 1
} 
```

# iphone - 无法删除 OpenAL 缓冲区

> ID：15736572
> 
> 赞同：3
> 
> 时间：2013-04-01T01:44:15.327
> 
> 标签：iphone, ios, openal

我正在为 iPhone 和 OpenAL 使用 XCode 4.5。问题是我无法在播放声音后删除声音缓冲区：`alSourcePlay().`如果我不播放源 - 缓冲区被删除并且 nemory 被释放而没有问题。

加载声音：

```
alGenBuffers(1, &bufferID);

// Loading awaiting data blob into buffer.
alBufferData(bufferID, format, outData, size, freq);

// Getting source ID from OpenAL.
alGenSources(1, &sourceID);

// Attacing buffer to source.
alSourcei(sourceID, AL_BUFFER, bufferID);

//playing sound (if i comment this line, the problem dissapears)
alSourcePlay(soundId); 
```

释放声音：

```
//detaching buffer
alSourcei(sourceID, AL_BUFFER, bufferID);
//deleting source
alDeleteSources(1, &sourceID);
//deleting buffer
alDeleteBuffers(1, &bufferID); 
```

删除缓冲区不会引发任何错误，但不会从内存中释放。我正在使用 Instruments 来监控内存。

我花了一周的时间寻找解决方案并阅读 OpenAL 文档。

如果您有 OpenAL 方面的经验，请提供帮助！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-24T16:30:46.667

从文档中：

> **alDeleteBuffers**
> 
> ***说明：***该函数删除一个或多个缓冲区，释放缓冲区使用的资源。无法删除附加到源的缓冲区。有关如何从源中分离缓冲区的信息，请参阅 alSourcei 和 alSourceUnqueueBuffers。
> 
> **alSourcei**
> 
> ***备注***：缓冲区名称 0 保留为“NULL 缓冲区”，并被 alSourcei(..., AL_BUFFER, ...) 接受为长度为零的有效缓冲区。NULL 缓冲区对于从源中分离缓冲区非常有用使用此调用或使用 alSourceQueueBuffers 附加。

这应该有效：

```
//detaching buffer
alSourcei(sourceID, AL_BUFFER, 0); //<-- detach using NULL buffer
//deleting source
alDeleteSources(1, &sourceID);
//deleting buffer
alDeleteBuffers(1, &bufferID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-08T17:50:21.570

释放声音时，呼叫应该是：

```
alSourcei(sourceID, AL_BUFFER, 0); 
```

这是根据 OpenAL 程序员指南：

[http://connect.creativelabs.com/openal/Documentation/OpenAL_Programmers_Guide.pdf](http://connect.creativelabs.com/openal/Documentation/OpenAL_Programmers_Guide.pdf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-04T16:24:13.917

我不知道这是否对您来说是相关信息，但我遇到了同样的问题，我通过在删除源后 1 秒删除缓冲区来解决它。因此，当需要删除时，我将缓冲区存储在一个带有时间戳的字典中，该时间戳告诉它何时应该被删除，然后通过调用来删除缓冲区

```
alDeleteBuffers(1, &bufferID); 
```

一旦时间戳已经过去，其他地方。这背后的基本原理是 iOS OpenAL 在另一个线程中运行，您需要给它时间来处理源删除。

# html - 带有 z-index 的子菜单不想浏览内容

> ID：15736575
> 
> 赞同：3
> 
> 时间：2013-04-01T01:45:06.267
> 
> 标签：html, css, navigation

由于某些未知原因，z-index 似乎不起作用。我尝试制作子菜单。即第二个酒吧。回顾它未能做到的#content....

[http://jsfiddle.net/PaD2v/](http://jsfiddle.net/PaD2v/)

**HTML**

```
 <html>
    <head>
        <title>Мэрия Skrillax-RP</title>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <link rel="stylesheet" type="text/css" href="master.css" />
        <link rel="stylesheet" type="text/css" href="http://meyerweb.com/eric/tools/css/reset/reset.css" />
        <link href='http://fonts.googleapis.com/css?family=Poiret+One&subset=cyrillic' rel='stylesheet' type='text/css'>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.1/jquery-ui.min.js"></script>
        <script type="text/javascript" src="master.js"></script>
    </head>
    <body>
        <div id="wrapper">
            <div id="banner"><img src="http://i.imgur.com/f2EWgQP.png?1"><p id="banner text"></div>
            <ul id="navigation">
                <li><a href="#">Главная Страница</a></li>
                <li><a href="#">Задачи</a>
                    <ul class="submenu">
                        <li><a href="">Охрана</a></li>
                        <li><a href="">Министерство Обороны</a></li>
                        <li><a href="">Министерство Юстиций</a></li>
                        <li><a href="">Министерство Культуры</a></li>
                        <li><a href="">Министрество</a></li>
                    </ul>
                </li>
                <li><a href="#">Список Сотрудников</a>
                    <ul class="submenu">
                        <li><a href="">Hello</a></li>
                        <li><a href="">Hello2</a></li>
                    </ul>
                </li>
                <li><a href="#">Вакансии</a></li>
                <li><a href="#">Авторизация</a></li>
            </ul>
            <div id="content">
                <p>Hello! Welcome to the www.mayor.freeiz.com!<br><br> Currently I am working on adding different types of information</p>
            </div>
        </div>
            <div id="footer">Hello</div>
    </body>
</html> 
```

**CSS**

```

    html {
        高度：;
    }
    身体 {
        背景图片：url（“http://www.gtagaming.com/images/potd/200604/10501.jpg”）；
        背景附件：固定；
        背景尺寸：100% 100%；
        高度：100%；
    }
    #包装器{
        宽度：1024px；
        最小高度：100%；
        边距：0 自动；
    }
    ＃横幅 {
        高度：216px；
    }
    ＃导航 {
        位置：相对；
        列表样式类型：无；
        字体大小：18px；
        背景颜色：橙色；
        字体系列：'EB Garamond'，衬线；
        不透明度：0.8；
        z-index：15000001；

    }

    #导航>李{
        向左飘浮;

    }
    #导航一个{
        显示：块；
        填充：10px 10px；
        白颜色;
        字体粗细：粗体；
        宽度：183.81px；
        高度：40px；
        文本对齐：居中；
        背景颜色：蓝色；
        左边框：1px 纯黑色；
        文字装饰：无；
    }
    #navigation a:悬停{
        背景颜色：白色；
        颜色：蓝色；
        边框顶部：3px 纯红色；
        不透明度：0.9999；
        边距底部：-3px；
    }
    #banner h1 {
        字体大小：20px；
        文本对齐：居中；
        位置：相对；
        顶部：1024 像素；
    }
    ＃内容 {
        位置：相对；
        高度：500 像素；
        背景颜色：白色；
        不透明度：0.9；
        明确：两者；
        z-索引：1；
    }

    #内容p{
        位置：相对；
        顶部：6px；
        字体大小：30px；
        z-索引：1；
    }

    #页脚{
        垂直对齐：底部；
        背景颜色：橙色；
        宽度：1024px；
        高度：50 像素；
        边距：0 自动；
    }

    .子菜单{
        显示：无；
        位置：相对；

    }
    .submenu li {
        边框顶部：2px 纯黑色；
    }
    #navigation li:hover .submenu {
        显示：块；
        z-index：99999999999999999999999999999999999999；
    }

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:49:33.910

而不是`relative`你`.submenu`使用位置的`absolute`位置

css

```
.submenu {
    display:none;
    position:absolute;  
} 
```

工作[演示](http://jsfiddle.net/PaD2v/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T01:52:11.043

相对定位不会使元素脱离正常的文档流。因此，当它出现时，它会像平常一样占据空间`div`并将其下方的所有东西推下。

要将其从正常文档流中删除，使其位于所有内容之上，请使用`position: absolute`. 在这种情况下，我们想要放在一切之上的是子菜单，所以将它应用到`.submenu`.

# python - eric5(python IDE)：如何使“运行脚本”对话框消失

> ID：15736578
> 
> 赞同：0
> 
> 时间：2013-04-01T01:45:33.050
> 
> 标签：python, python-3.x, pyqt, pyside

eric5(python IDE)：如何使“运行脚本”对话框消失

困扰我的是每次按F2总是弹出“运行脚本”对话框，但我几乎没用过，那么如何在脚本即将运行时让“运行脚本”对话框消失呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T09:54:29.753

你不能（目前但希望这会改变）。

有一个“重新启动脚本（F4）”选项可以绕过“运行脚本”对话框和“程序已终止”对话框，以便在第一个之后运行。在我的 Eric5 (5.3.3) 版本上，它有一个指向圆圈的绿色箭头。

请参阅此处：[eric 用户组](http://www.mentby.com/Group/eric-users-list/preventing-run-script-dialog-from-popping-up.html)

# c++ - File.cpp:148：错误：“。”之前的预期主表达式 代币不同的符号

> ID：15736581
> 
> 赞同：0
> 
> 时间：2013-04-01T01:45:53.723
> 
> 标签：c++

我正在努力完成这段代码。

```
#include (sorry but it won't show up the #include such as stdio.h AND OTHERS) But this is not the problem.

using namespace std;

struct CustomerFile {
    int arrivalTime;

    string driverfName,
        driverlName,
        typeOfDriver,
        driverLicNumber,
        vehicleMake,
        vehicleModel,
        Lot_taken,
        vehicleRegNumber,
        attendantName,
        ParkingArea,
        Comments,
        checkOutDateTime,
        checkInDateTime;
};

int arrivalTime;

string driverfName,

    driverlName,
    typeOfDriver,
    driverLicNumber,
    vehicleMake,
    vehicleModel,
    Lot_taken,
    vehicleRegNumber,
    attendantName,
    ParkingArea,
    Comments,
    checkOutDateTime,
    checkInDateTime;

int main(int argc, char * * argv) {

    FILE * cfPtr;

    if ((cfPtr = fopen("CustomerFile.dat", "rb+")) == NULL) {
        printf("file could not be opened");
    } else {
        printf("\nFile is Written to");
        printf("\nFile is open");

        printf("\n\n\nEnter Vehicle Registration Number: ");
        scanf("%s", & CustomerFile.vehicleRegNumber);

        while (CustomerFile.vehicleRegNumber != 0) /*#IF THE USER does not enter 0 the loops should begin, but there is a problem here*/
        {

            printf("\nFirst Name: ");
            fscanf("%s", CustomerFile.driverfName); /*here is the problem, I think is had something to do with the struct name*/
            printf("\nLast Name:  ");
            printf("\nType of Driver:  ");
            printf("\nDriver's License Number:  ");
            printf("\nVehicle Make:  ");
            printf("\nVehicle Model:   ");
            printf("\nComments   ");
            printf("\nParking SpaceTaken ");

            printf("\n\nenter firstname, lastname");
            fscanf(stdin, "%s%s%s%s%s%s%s%s1f", CustomerFile.driverfName I think this has something to do with the statement * /
                                CustomerFile.driverlName   / * okay here * /
                                CustomerFile.typeOfDriver       / * okay here * /
                                CustomerFile.driverLicNumber         / * okay here * /
                                CustomerFile.vehicleMake      / * okay here * /
                                CustomerFile.vehicleModel       / * okay here * /
                                CustomerFile.Comments       / * okay here * /
                                &CustomerFile.Lot_taken);       / * okay here * /

                        fwrite( sizeof(struct CustomerFile ), 1, cfPtr);

                }
                        fclose( cfPtr);
                }

return 0;

} 
```

好的，问题是它不断给出错误；***

> File.cpp:144：错误：“。”之前的预期主表达式 令牌
> 
> File.cpp:148：错误：“。”之前的预期主表达式 令牌
> 
> File.cpp:162：错误：“。”之前的预期主表达式 令牌
> 
> File.cpp:172：错误：从 'unsigned int' 到 'const void*' 的无效转换</p>
> 
> File.cpp:172: 错误: 从 'FILE*' 到 'size_t' /usr/include/stdio.h:708: 错误: 函数'size_t fwrite(const void*, size_t, size_t, FILE)的参数太少*)' File.cpp:172: 错误：此时在文件中

我相信或读到它与 C++ 编译器不适用于 c99 的事实有关。如果是这样，那么您如何在 C++ 中使用结构？我知道您仅通过 CustomerFile.driverlName 使用结构，但是，编译器一直拒绝它。我也遇到了while循环的问题。我熟悉 c 和 c++，我们同时学习了 c 和 c++，代码要用 c++ 编写，但教科书提供的 c 代码不能在 c++ 编译器中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T01:48:51.157

`CustomerFile`是一个类，因此当您尝试访问它的数据成员时，它将不起作用，就好像它是一个*实例*一样。要创建实例，请执行以下操作：

```
CustomerFile file; 
```

`Customer.`并替换with的所有实例，`file.`它应该可以解决错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T01:54:42.553

您定义了一个数据类型`CustomerFile`。要使用定义的结构`CustomerFile`，您必须创建一个对象并使用它。例如：

```
CustomerFile  customer; 
customer.vehicleModel = "ABC"; 
```

`vehicleRegNumber`是字符串类型而不是整数类型比较它`0`像这样

```
while (customer.vehicleRegNumber != "0" ) 
```

`,`在变量名之间添加

```
 fscanf( stdin, "%s%s%s%s%s%s%s%s1f", customer.driverfName, customer.driverlName , 
```

该`fscanf()`函数是一个 C 函数，它不知道`std::string`（或类）。所以你使用了一个像这样的临时 c 字符串

```
 char temp[100];
      printf("\nFirst Name: ");
      fscanf(stdin, "%99s", temp );
      customer.driverfName = temp; 
```

# redis - 无法阻止工头

> ID：15736582
> 
> 赞同：2
> 
> 时间：2013-04-01T01:45:54.017
> 
> 标签：redis, foreman

我有以下个人资料，我与工头一起为 heroku 网站做开发工作：

```
web: gunicorn project_name.wsgi -b 0.0.0.0:$PORT
worker: python manage.py rqworker default
redis: redis-server 
```

一切都很好，直到我添加了 redis 行。虽然应用程序运行良好，但我无法使用 control-c 杀死工头——它只是继续运行。我可以杀死工头的唯一方法是杀死 redis-server 进程。

我怎样才能让工头响应（并停止）control-c？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T22:06:47.143

这通常是因为 redis 或 memcached 不会关闭。所以我刚刚创建了一个脚本，我运行它来杀死开发环境。目前是：

```
#!/bin/bash

redis-cli SHUTDOWN
killall memcached 
```

# firefox - Firefox“可见性”属性错误？

> ID：15736586
> 
> 赞同：0
> 
> 时间：2013-04-01T01:46:17.030
> 
> 标签：firefox, visibility

我有一些 div (class="boxes") 在段落标签中有一些文本。我想要的是文本是不可见的，除非悬停。

然而，事情的表现很奇怪。当我使用： .boxes p{visibility:hidden;} .boxes p:hover{visibility:visible;} 文本被隐藏但在悬停时不可见。

当我尝试： .boxes p{visibility:visible;} .boxes p:hover{visibility:hidden;}
文本将（片刻后）消失，但如果光标完全移动，则“闪烁”。

知道这里发生了什么吗？Firefox 经常自动更新，所以我相信我运行的是最新版本。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:04:04.080

通过使框不可见，选择器停止匹配它们，这使它们可见，然后使您的原始选择器再次匹配它们，并且您从无限循环中获得闪烁。

如果你想让你的盒子仍然可以悬停，或者给它们另一个父元素并隐藏它们：

```
.boxes .parent:hover p {
    visibility: hidden;
} 
```

或者在悬停时给框零不透明度：

```
.boxes p:hover {
    opacity: 0;
} 
```

# c# - Datagrid 值绑定到外部 ComboBox

> ID：15736587
> 
> 赞同：0
> 
> 时间：2013-04-01T01:46:36.830
> 
> 标签：c#, wpf, binding, datagrid, combobox

我希望能够`DataGrid`通过外部设置 a 的当前选定行>单元格的值`ComboBox`。

我拥有的代码在 setter 部分工作正常，**但无法使`ComboBox`所选值与网格值匹配**......似乎我缺少映射。

这是我所拥有的：

1- Datagrid 绑定到`ObservableCollection<Object>`：

```
<DataGrid ItemsSource="{Binding}" 
          SelectedItem="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type UserControl}, AncestorLevel=2},
          Path=SelectedCounterparty, Mode=TwoWay}"> 
```

2-`ObservableCollection<Object>`有一个我应该绑定到组合框的属性（即组合框选定的项目应该采用该属性值）：

```
public CurrenciesEnum Ccy
{
    get { return this._ccy; }
    set
    {   
        if (value != this._ccy) 
        {
            this._ccy = value;
            NotifyPropertyChanged("Ccy");
        }
    }
} 
```

3- Combobox 源是一个枚举：

```
public enum CurrenciesEnum { USD, JPY, HKD, EUR, AUD, NZD }; 
```

4-组合框的当前映射：

```
<ObjectDataProvider x:Key="Currencies" MethodName="GetNames" ObjectType="{x:Type System:Enum}">
    <ObjectDataProvider.MethodParameters>
        <x:Type TypeName="ConfigManager:CurrenciesEnum" />
    </ObjectDataProvider.MethodParameters>
</ObjectDataProvider>

<ComboBox ItemsSource="{Binding Source={StaticResource Currencies}}" SelectedItem="{Binding Ccy, Mode=TwoWay}"/> 
```

**工作原理：**能够通过组合框设置网格中当前选定项的“Ccy”属性。

**什么不：** ComboBox 选定的项目在更改行时与网格中的当前选定项目不匹配（并且默认为 USD 或先前选择的值），换句话说，似乎没有正确绑定。关于如何解决这个问题的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:43:20.457

假设您已绑定`ObservalbeCollection<MyDataGridItem> MyDataGridItems`到 datagrid`ItemsSource`属性。

在 中定义一个属性`view model`来绑定`SeletedItem`数据网格，如下所示。

```
private MyDataGridItem SelectedDataGridRow;

public MyDataGridItem SelectedDataGridRow
{
    get
    {
        return selectedDataGridRow;
    }
    set
    {
        selectedDataGridRow= value;
        NotifyPropertyChanged("SelectedDataGridRow");
    }
} 
```

假设您要绑定到 DataGrid 列的属性是`MyColumn`（MyColumn 是`MyDataGridItem`类的属性）

然后在 Ccy 属性的 setter 方法中，按如下方式设置 MyColumn 属性。

```
 public CurrenciesEnum Ccy
 {
    get { return this._ccy; }
    set
    { 
        if (value != this._ccy) 
        {
            this._ccy = value;

            //This is the code you need to implement

                this.MyDataGridItems
                    .Where(item=> item== this.SelectedDataGridRow)
                    .First()
                    .MyColumn = value;

            NotifyPropertyChanged("Ccy");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T10:43:26.810

终于找到问题了。

这是因为 ComboBox SelectedItems 会返回一个字符串（[CSharp Corner: Binding an Enum to a ComboBox](http://www.c-sharpcorner.com/uploadfile/mahesh/binding-an-enum-to-a-combobox/)），我在该字符串中绑定到 Enum 本身。

所以为了解决这个问题，我定义了一个转换器并在我的绑定中使用它：

**转换器：**

```
[ValueConversion(typeof(string), typeof(Object))]
public class StringToCurrencyEnumConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {   
        if (value!=null)
        {
            CurrenciesEnum enumValue = (CurrenciesEnum)value;
            return enumValue;
        }
        return null;
    }

    public object ConvertBack(object value, Type targetTypes, object parameter, CultureInfo culture)
    {
        if (value != null)
        {
            string temp = ((CurrenciesEnum) value).ToString();
            return temp;
        }
        return null;
    }
} 
```

**更新绑定：**

```
<Grid.Resources>
    <local:StringToCurrencyEnumConverter x:Key="StringToCcyEnum" />
</Grid.Resources>

<ComboBox 
    ItemsSource="{Binding Source={StaticResource Currencies}}"
    SelectedValue="{Binding Spc1Ccy, Mode=TwoWay, Converter={StaticResource StringToCcyEnum}}"/> 
```

# emacs - 如何在 org-mode 中自动跟踪到 gnus 消息的链接？

> ID：15736590
> 
> 赞同：5
> 
> 时间：2013-04-01T01:47:20.697
> 
> 标签：emacs, org-mode, gnus

我将 org-mode + gnus + Gmail 用于我的日常 GTD 例程。其概念是将所有传入的消息视为任务，并使用 org-capture 将 INBOX 中的所有消息转换为 org-mode 的任务。一旦所有新消息都转换为任务，将它们存档，并希望 INBOX 保持为零。

我的工作流程如下：

1.  打开 gnus INBOX 的摘要视图，并选择一条新消息
2.  使用 org-store-link (Cc l) 捕获消息
3.  打开我的 todo 文件 (todo.org)，并为其创建一个新任务，然后使用 org-insert-link (Cc Cl) 将捕获的链接粘贴到任务的主体
4.  返回 gnus 摘要视图并归档消息 (B del)

问题是当将邮件移动到存档文件夹时，捕获的链接会损坏，我无法再点击该链接。这是因为捕获的链接包含 IMAP 文件夹的名称，并且归档邮件会更改邮件的 IMAP 文件夹名称。例如，

*   捕获的链接：`[[gnus:nnimap%2Blocalhost:%5BGmail%5D.Important#1364607772002.9702fb8c@Nodemailer][Email from Geeklist Team: Geekli.st Suggestions & Activi]]`（IMAP 文件夹名称为`"[Gmail]Important"`）
*   存档邮件的链接：`[[gnus:nnimap%2Blocalhost:%5BGmail%5D.All Mail#1364607772002.9702fb8c@Nodemailer][Email from Geeklist Team: Geekli.st Suggestions & Activi]]`（IMAP 文件夹名称为`"[Gmail]All Mail"`）

所以我的问题是：当消息移动到其他文件夹时，如何自动更新捕获的链接？我想有一些钩子可以做到这一点，但我找不到为此目的的好样本。或者欢迎任何针对这种例程的更简单的解决方案。TIA。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T19:16:16.760

我不使用 'org-store-link' 和 'org-insert-link' 而是使用[捕获模板](http://orgmode.org/org.html#Capture-templates)，它会自动生成指向消息的链接（下面的 %a）。因此，您不必切换缓冲区来存储 TODO 条目：

```
（setq 组织捕获模板
  '(
    （“m”“邮件中的 TODO”条目（文件+标题“~/gitfiles/org/gtd.org”“收件箱”）
     "* TODO %?，链接：%a")))

```

由于我所有的电子邮件都到达收件箱并存档在“存档”文件夹中，因此我可以使用以下函数将捕获缓冲区中组织模式链接中的字符串“收件箱”替换为“存档”：

```
(defun hs/replace ()
   （交互的）
   （转到字符 1）
   （替换字符串“收件箱”“存档”））

```

当我点击 Cc Cc 来归档捕获条目时，此挂钩会调用该函数：

```
(add-hook 'org-capture-prepare-finalize-hook 'hs/replace)
```

所以，我的工作流程如下：

*   在摘要缓冲区中选择一条消息
*   点击 Cc cm 以使用 Link to message 捕获 TODO 项目并编写描述（由于消息仍在收件箱中，生成的链接包含组“INBOX”）
*   点击 Cc Cc 以归档 TODO 条目（这调用函数“hs/replace”，它将字符串 INBOX 替换为存档）
*   在存档文件夹中存档电子邮件。

高温高压

# java - 如何使用具有继承的泛型？

> ID：15736601
> 
> 赞同：2
> 
> 时间：2013-04-01T01:49:13.490
> 
> 标签：java, generics

我写了一些带有继承的泛型，但不能让它工作类型安全。我的目标是提供一个`BaseService`关于我可以执行该`action(base)`方法的一般信息，无论`base`对象是 a`Foo extends Base`还是`Bar extends Base`.

以下不起作用，为什么？

```
class Base;
class Foo extends Base;

interface BaseService<T extends Base> {
    void action(T base);
}

class FooService implements BaseService<Foo> {
    void action(Foo foo) {
    }
}

//usage:
//complains that the method is not applicable for the argument,
//and that I should change action(T) to action(Base). Why?
Base base;
getService().action(base);

//just to demonstrate the problem
BaseService<? extends Base> getService() {
    return new FooService();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:45:39.797

泛型的存在是为了进行静态类型检查。当你写

> 我的目标是提供一个通用的 BaseService，无论基础对象是 Foo extends Base 还是 Bar extends Base，我都可以执行 action(base) 方法。

您表明您不需要任何静态类型检查。所以要做到这一点，参数类型应该是`Base`而不是`T`.

由于`getService()`is的返回类型`BaseService<? extends Base>`，编译器甚至不知道是什么`T`（除了它是 的某些未知子类型`Base`），因此您根本无法调用该`action`方法。但是即使返回类型`getService()`是`FooService`，参数类型`T`也是`Foo`，所以你不能用 type 来调用它`Base`。

您可能应该多考虑一下您实际上希望编译器通过使用泛型来检查什么。

# assembly - 计算寄存器中 1 数量的最快方法，ARM 程序集

> ID：15736602
> 
> 赞同：17
> 
> 时间：2013-04-01T01:49:16.453
> 
> 标签：assembly, arm

所以我之前有一个关于位操作的面试问题。该公司是一家知名的 GPU 公司。我在汇编语言方面的背景很少（尽管我是计算机体系结构的博士生，但很奇怪），正如这个叙述所表明的那样，我搞砸了。问题很简单：

“编写一个快速代码，计算 32 位寄存器中 1 的数量。”

现在我正在研究手臂组装。所以很自然地，我再次重新审视了这个问题，并通过研究 ISA 得出了这段代码。

**对于您那里的武装专家，这是正确的吗？有没有更快的方法来做到这一点？**作为初学者，我自然认为这是不完整的。“xx”中的 AND 指令感觉是多余的，但没有其他方法可以在 ARM isa 中移动寄存器...

R1 将包含最后的位数，而 R2 是我们要计数的位的寄存器。r6 只是一个虚拟寄存器。注释用（）括起来

```
 MOV   R1, #0                (initialize R1 and R6 to zero)
    MOV   R6, #0        
xx: AND   R6, R6, R2, LSR #1    (Right shift by 1, right most bit is in carry flag)
    ADDCS R1, #1                (Add #1 to R1 if carry  flag is set)
    CMP R2, #0                  (update the status flags if R2 == 0 or not)
    BEQ xx                      (branch back to xx until R2==0) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-01T09:52:24.677

此代码是否快速取决于处理器。可以肯定的是，它在 Cortex-A8 上不会很快，但在 Cortex-A9 和更新的 CPU 上可能会运行得非常快。

然而，这是一个非常简短的解决方案。

期望 r0 中的输入，并在 r0 中返回输出

```
 vmov.32 d0[0], r0
  vcnt.8  d0, d0
  vmov.32 r0, d0[0]

  add r0, r0, r0, lsr #16
  add r0, r0, r0, lsr #8
  and r0, r0, #31 
```

主要工作在[vcnt.8 指令](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0489c/CIHCFDBJ.html)中完成，该指令对 NEON 寄存器中每个字节的位进行计数，并将位计数存储回 D0 的字节中。

没有`vcnt.32`形式，只有`.8`，所以你需要将 4 个字节水平相加，这就是其余代码正在做的事情。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-01T08:43:52.307

位黑客的最佳参考是

*   [黑客的喜悦](https://www.google.se/search?q=hacker's+delight)（印刷）
*   [Bit Twiddling Hacks](http://graphics.stanford.edu/~seander/bithacks.html)（在线）

`Bit Twiddling Hacks`页面说

```
The best method for counting bits in a 32-bit
integer v is the following:

v = v - ((v >> 1) & 0x55555555);                    // reuse input as temporary
v = (v & 0x33333333) + ((v >> 2) & 0x33333333);     // temp
c = ((v + (v >> 4) & 0xF0F0F0F) * 0x1010101) >> 24; // count 
```

然后我建议你使用`gcc`and `objdump`（或[这个很棒的在线 gcc 工具](http://goo.gl/dF7RZy)）来看看这个高级代码片段看起来像 arm 指令。

```
00000000 <popcount>:
 0: 1043        asrs    r3, r0, #1
 2: f003 3355   and.w   r3, r3, #1431655765 ; 0x55555555
 6: 1ac0        subs    r0, r0, r3
 8: 1083        asrs    r3, r0, #2
 a: f000 3033   and.w   r0, r0, #858993459  ; 0x33333333
 e: f003 3333   and.w   r3, r3, #858993459  ; 0x33333333
12: 18c0        adds    r0, r0, r3
14: eb00 1010   add.w   r0, r0, r0, lsr #4
18: f000 300f   and.w   r0, r0, #252645135  ; 0xf0f0f0f
1c: eb00 2000   add.w   r0, r0, r0, lsl #8
20: eb00 4000   add.w   r0, r0, r0, lsl #16
24: 1600        asrs    r0, r0, #24
26: 4770        bx  lr 
```

所以看起来这会给你结果`12`指令，大致可以转化为相同数量的周期。

将上面的整数旋转与[libgcc](https://github.com/mirrors/gcc/blob/master/libgcc/libgcc2.c#L808)`look up table`使用的方法进行比较，考虑到额外的内存访问，查找表应该会更慢。

```
00000028 <__popcountSI2>:
28: b410        push    {r4}
2a: 2200        movs    r2, #0
2c: 4c06        ldr r4, [pc, #24]   ; (48 <__popcountSI2+0x20>)
2e: 4613        mov r3, r2
30: fa40 f103   asr.w   r1, r0, r3
34: 3308        adds    r3, #8
36: 2b20        cmp r3, #32
38: b2c9        uxtb    r1, r1
3a: 5c61        ldrb    r1, [r4, r1]
3c: 440a        add r2, r1
3e: d1f7        bne.n   30 <__popcountSI2+0x8>
40: 4610        mov r0, r2
42: bc10        pop {r4}
44: 4770        bx  lr
46: bf00        nop
48: 00000000    andeq   r0, r0, r0
<.. snipped ..> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-01T13:17:53.003

由于这是标记为 ARM，因此该[`clz`](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/CIHJGJED.html)指令最有帮助。这个问题也被描述为*人口计数*。`gcc`为此有[__builtin_popcount()](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)。[ARM 工具](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0081b/CHDJJGAJ.html)也是如此。有[这个链接](http://www.sciencezero.org/index.php?title=ARM:_Count_ones_%28bit_count%29)（不要对您的解决方案感到难过，有人制作了一个几乎相同的网页），还有[Dave Seal 的](http://www.ciphersbyritter.com/NEWS4/BITCT.HTM)版本，其中包含针对非`clz`ARM 的六条指令。这`clz` [是有利](http://en.wikipedia.org/wiki/Find_first_set#Properties_and_relations)的，可用于产生更快的算法，具体取决于输入。

除了[auselen 的](https://stackoverflow.com/users/1163019/auselen)良好阅读建议之外，^([Hacker's Delight](http://www.hackersdelight.org/corres.txt))这个有趣的[博客](http://realtimecollisiondetection.net/blog/?p=78)可能会有所帮助，它在图形上下文中讨论此类事情。至少我发现理解一些 Qt 的 blitting 代码很有用。但是，它在编写*人口计数*例程时有一些用处。

该`carry add`单元在分而治之的意义上很有用，从而解决了问题`O(ln n)`。 *如果数据包含1*或*0*`clz`则更有用。

 **[Hacker's Delight](http://www.hackersdelight.org/corres.txt)条目有更多关于 Dave Seal 的 ARM 代码的背景。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-01T02:01:42.157

您可以使用预先计算的查找表并将迭代次数减少到 2 或 4。

您也可以使用对数方法。

有关详细信息，请参阅[此 Wikipedia 文章](http://en.wikipedia.org/wiki/Hamming_weight)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-26T21:04:40.790

```
 LDR r0, = 0x000000FF;
    MOV r1, #0;
    MOV r3, #0; this will always be zero
    MOV r2,r0;
rep MOVS r2, r2, LSR #1;
    ADC r1,r1, r3;  this adds r1 with zero plus the carry bit
    CMP r2, #0;
    BNE rep 
```

这样就可以了，r3 只是一个带有 0 的虚拟寄存器，以使 ADC 正常工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-10-08T17:50:57.940

long count_bits_long（长）；

```
 vmov.32 d0[0], r0       // R0 --> SIMD

    vcnt.8  d0, d0          // count bits in bytes
    vpaddl.u8 d0, d0        // add adjacent pairs of bytes and put into 16b words
    vpaddl.u16 d0, d0       // add adjacent pairs of 16b words and put into 32b word

    vmov.32 r0, d0[0]       // SIMD --> R0

    mov pc, lr              // return 
```**

# java - 在没有 CMS、Struts 或类似的东西的情况下制作在线词典是否有风险？

> ID：15736604
> 
> 赞同：0
> 
> 时间：2013-04-01T01:49:16.863
> 
> 标签：java, jsp, servlets, content-management-system

我参与了我研究的研究所的一个项目，该项目包括建立一个主题在线词典。我正在考虑从零开始，构建一个 MySQL 数据库并将其与 servlet 和 jsps 一起使用。我不是专业人士，这是我第一次接触真正的项目，所以我担心这种方式将来可能会导致诸如维护困难之类的问题。我知道有很多 CMS，但我想利用这次经验将我所有的理论能力付诸实践。是的，我有时间可以浪费了。我需要知道的是：我不了解诸如 Struts 或 Spring 之类的东西这一事实排除了我制作功能系统的可能性吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:59:29.043

如果您愿意学习新技术并在开始学习和应用它时花费几个小时，那么不，不了解 spring 或 struts 并不妨碍您创建功能系统。维护是一个全新的球赛/讨论。即使是世界上最好的程序员也无法创建零维护系统。你唯一能做的就是充分了解系统（并准备好继续学习），这样你就可以在它周围设置最好的护栏，也可以调试问题。现在，如果您计划构建的这个系统需要成为一个专业级的系统，那么我建议雇用/获得过去构建过 Web 应用程序并且可以维护它的人。那个人可以帮助携带你，直到你可以接管。

学习的最佳方式 (IMO) 是获取示例应用程序，部署它并开始阅读代码。看看您是否可以将来自浏览器的请求（我假设您的应用程序是 Web 应用程序）跟踪到框架、控制器/模型并返回到视图。获取一个示例 spring mvc 应用程序（例如[http://static.springsource.org/docs/Spring-MVC-step-by-step/](http://static.springsource.org/docs/Spring-MVC-step-by-step/)），看看您是否能理解它。

# xpages - 是否可以在 XPages 中的 Java 中执行 @Unique() ？

> ID：15736607
> 
> 赞同：5
> 
> 时间：2013-04-01T01:49:33.847
> 
> 标签：xpages

当我想要文档的唯一键时，我偏爱使用@Unique()。我喜欢它基于用户名和时间。

有没有办法从 Java bean 中获取它？

如果不是，那么在 Java 中获得不会重复的唯一编号的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-01T03:25:28.200

这是我在需要唯一编号时使用的：

String controlNumber = UUID.randomUUID().toString();

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-04T19:24:28.327

是的你可以。当您获得会话调用的句柄时，请评估。您可以使用此方法评估任何公式表达式。

```
String ID = (String)session.evaluate("@Unique").elementAt(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T13:17:28.310

罗素的回答是正确的。但是如果你需要一个更短的唯一键，你也可以试试这个替代方案：

```
public static String getUnique() {
    String CHARLIST = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";

    long number=System.currentTimeMillis();
    int base=CHARLIST.length();

    String result="";
     while (number > 0){
      result = CHARLIST.charAt((int)(number%base))+result;
      number = number/base;
     }
     return result;
} 
```

这基本上是将毫秒数从 1970 转换为 62 基数。您甚至可以通过从 2012/12/31 左右开始获取时间来缩短此时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T13:56:48.593

那这个呢：

```
public String getUnique() {
    try {
        return (String) getCurrentSession().evaluate("@Unique").elementAt(0);
    } catch (NotesException e) {
        return "";
    }
}

// retrieve handle to a Notes-Domino object in the bean class
public static Session getCurrentSession() {
    FacesContext context = FacesContext.getCurrentInstance();
    return (Session) context.getApplication().getVariableResolver()
            .resolveVariable(context, "session");
} 
```

它将返回一个熟悉的 Unique 字符串。不幸的是，您的服务器签名，而不是在浏览器中运行时的当前用户名。我是客户，它将按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T13:25:28.463

以下是我很久以前开发的 LotusScript 代码，作为我的 .DominoFramework 的一部分，用于重现 @Unique() 的行为。您应该能够将其转换为 Java 以获得一组类似于您习惯的值。

```
Function unique() As String
  Dim   Index       As Integer
  Try:  
    On Error GoTo Catch
    Randomize
    Unique = ""
    For Index% = 1 To 4
      Unique$ = Unique$ + Chr$(CInt(Rnd(Index%)*26)+65)
    Next Index%
    Unique$ = Unique$ + "-"
    For Index% = 6 To 11
      Unique$ = Unique$ + Chr$(CInt(Rnd(Index%)*26)+65)
    Next Index%
    Exit Function
Catch:
  Stop
  DominoException.throw Me,  Nothing
  Exit Function
End Function 
```

# python - 如何使用 help() 命令跳转到指定的函数名

> ID：15736610
> 
> 赞同：0
> 
> 时间：2013-04-01T01:49:44.577
> 
> 标签：python, console, helper

我总是`help(object)`在 Python 中使用命令，我想知道有什么方法可以跳过大部分文本并跳转到我想要的函数。例如：

```
>>> import boto
>>> s3 = boto.connect_s3()
>>> help(s3) 
```

它给了我对这个对象的很长的描述：

```
Help on S3Connection in module boto.s3.connection object:
...
...
...
server_name(self, port=None) 
```

更清楚地说，我可以做类似的事情：

```
>>> help(s3, server_name) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:51:39.560

只需传入方法：

```
help(s3.server_name) 
```

# javascript - 在没有 jquery 的情况下检测多个类名

> ID：15736615
> 
> 赞同：1
> 
> 时间：2013-04-01T01:50:13.803
> 
> 标签：javascript, jquery

学习 DOM0 javascript，教授抛出了一个曲线球。他用班级名称写了几十个段落：体育、生活、书籍、喜剧，然后是：

```
<p class="sports books comedy">
    I found this book: http://www.amazon.com/Teed-Off-Laughs-Greens-Sports/dp/0233995005/ref=sr_1_1?ie=UTF8&s=books&qid=1277749796&sr=1-1 You don't have to be good to play, but a low level of self-esteem is helpful! Humorous collection of colour photographs and hilarious text reduces our heroes of the golf course to mere mortals. No golfing disaster is left secret and the 80 photographs only go to prove the fallibility of international stars.
</p> 
```

必须在不使用 Jquery 的情况下对其进行样式设置，我的想法是：

```
window.onload=function(){
    var elements = document.getElementsByTagName('*');
    for (var i=0; i<elements.length; i++) {
        if (elements[i].className == 'sports') {
            elements[i].style.border="2px solid green";
        }

        else if (elements[i].className == 'life') {
            elements[i].style.color="red";
        }

        else if (elements[i].className=="books") {
            elements[i].style.textAlign="right";
        }

        else if (elements[i].className=="comedy") {
            elements[i].style.fontSize="200%";
        }
    }
} 
```

它适用于除多个类名之外的所有内容。试图找到解决它的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T01:53:12.360

```
elements[i].className.indexOf('sports') >= 0 
```

如果任何类是运动类，它将起作用，尽管它也会增加子字符串的问题（也将匹配“othersports”）

所以大概

```
var classlist;
classlist = elements[i].className.split(/\s+/);
if(classlist.indexOf('sports') >= 0) 
```

那有点冗长，但应该适合您想要做的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T02:26:01.263

```
elements[i].classList.contains('sports') 
```

ben336的答案也有效，并且曾经是最好的方法，但是现在有一种本地方法可以做到这一点，我们应该更喜欢它（因为它更快，代码更少）。唯一的缺点是它不能在没有 polyfill 的 IE8 或 IE9 中工作。

# c - 位移导致负数

> ID：15736618
> 
> 赞同：-1
> 
> 时间：2013-04-01T01:50:34.837
> 
> 标签：c, bit-shift

我正在处理一项处理压缩和解压缩的任务。更具体地说，游程编码的变体（9 位块）。我遇到的问题涉及“类型”位的符号。我能够获得所需的位，但是，在该位应该为 1 的情况下，我的 printf 返回 -1。这会让我相信我在移位时没有做正确的事情，但我不知道那可能是什么。

```
void bitShift(char * mostFreq, unsigned char * byteBuf, int byteCount) {
    char type;
    int typels = 0;
    int typers = 7;

    int i = 0;
    for(i = 0; i < byteCount - 1; i++) {
            type = byteBuf[i];
            printf("type before = %d\t", (unsigned int)type);
            type = type << typels;
            type = type >> typers;
            typels++;
            printf("type after = %d\n", (unsigned int)type);
    }/*End for i*/

    for(i = 0; i < byteCount; i++)
            byteBuf[i] = 0;

}/*End bitShift*/

void decompressFile(char * mostFreq) {
    unsigned char byteBuf[9] = { 0 };
    int num, byteCount, i;
    num = 0; byteCount = 0; i = 0;
    unsigned char buf;
    while((num = read(0,&buf, 1)) > 0) {
            byteBuf[byteCount] = buf;
            byteCount++;
            if(byteCount == 9) {/*Flush bytes if buffer is full*/
                    bitShift(mostFreq, byteBuf, byteCount);
                    for(i = 0; i < 9; i++) {
                            byteBuf[i] = 0;
                    }/*End for i*/
                    byteCount = 0;
            }/*End if*/
    }/*End while*/
    if(num == 0) {/*If EOF*/
            if(byteCount != 0) {/*Bits have not been flushed*/
                    bitShift(mostFreq, byteBuf, byteCount);
            }/*End if*/
    } else if(num < 0) {
            perror("Read error");
            exit(1);
    }/*End else if*/

}/*End decompressFile*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T01:57:56.073

你的问题是你声明`type`为一个普通`char`的，在你的系统中似乎是一个签名类型。

因此，例如，当您有 时`0x80`，它实际上是`-128`一个负数，并且当它向右移动时，符号位被扩展：1 位：`0xC0 (-64)`，2 位：`0xE0 (-32)`，... 7 位：`0xFF (-1)`。

将其更改为`unsigned char`并完成！

# timer - MPI定时器和CUDA定时器的区别

> ID：15736619
> 
> 赞同：0
> 
> 时间：2013-04-01T01:50:52.087
> 
> 标签：timer, cuda, mpi

我有一个 MPI 程序，它将调用一个 CUDA 函数。我用 MPI 定时器和 CUDA 定时器来测量 CUDA 函数的运行时间。但是，使用 MPI 定时器的测量值比使用 CUDA 定时器的测量时间多 2 秒。我想知道为什么会发生这种情况。

MPI 计划的结构如下：

```
 int main(){
MPI initiation

Start timing with MPI_Wtime 

Call CUDA function

End timing with MPI_Wtime 

MPI finalization

} 
```

CUDA 函数的结构如下：

```
void CUDA_fun(){

Start CUDA timer event 

Call global function

End CUDA timer event

} 
```

Linux x86_64

显卡 C2075

CUDA 4.2

MPICH2 1.4.1p1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T03:15:22.693

正如 pQB 所述，MPI 定时器和 CUDA 定时器之间的测量差异是由启动 CUDA 事件的开销引起的。我已经进行了有/没有 CUDA 事件的实验。结果与陈述相符。

更新：正如 talonmies 所说，额外的时间是 CUDA 上下文初始化所需的时间。在 linux 中，通过使用 nvidia-smi -pm 1 启用持久性模式，可以减少额外的时间。

# redirect - JavaScript 清除超时

> ID：15736625
> 
> 赞同：0
> 
> 时间：2013-04-01T01:51:43.747
> 
> 标签：redirect, settimeout

好的..如果用户采取任何行动，我必须清除 setTimeout 并且我不希望它继续并重定向到 Google。但它不起作用..有人可以看看这个吗？

```
script type="text/javascript">

function redirect() {
    window.location = "https://google.com";
 }

var timer = window.setTimeout("redirect()", 8000);
var capital = window.prompt("MY Question?","");

if(capital != null && capital.length < 1)  {
clearTimeout(timer);
document.getElementById("firstdiv").innerHTML="Sorry.<br /> The answer is.";
 }
else {
if(window.confirm("Is that your final answer?")){ 

 document.getElementById("firstdiv").innerHTML = "The answer to the question is: " + capital + ", so says you.";}
else{
var capital = window.prompt("What is the capital of Missouri?","");
 document.getElementById("firstdiv").innerHTML = "The answer to the question is: " + capital + ", so says you.";}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:54:20.913

您需要将计时器的 ID 传递给`clearTimeout`：

```
clearTimeout(timer); 
```

另外，不要将字符串传递给`setTimeout`. 传递一个函数：

```
var timer = window.setTimeout(redirect, 8000);
// Or
var timer = window.setTimeout(function() {
    redirect();
}, 8000); 
```

# java - java - 如何创建和操作长度为 1000 万位的位数组

> ID：15736626
> 
> 赞同：21
> 
> 时间：2013-04-01T01:51:54.323
> 
> 标签：java, bitmap

我刚遇到一个问题；用伪代码很容易解决，但是当我开始用 java 编码时；我开始意识到我不知道从哪里开始......

这是我需要做的：

1.  我需要一个大小为 1000 万（位）的位数组（我们称之为 A）。
2.  我需要能够将此数组中的元素设置为 1 或 0 (A[99000]=1)。
3.  我需要遍历这 1000 万个元素。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-01T03:13:31.940

Java 中的“正确”方式是使用 Hunter McMillen 指出的已经存在的 BitSet 类。如果您正在弄清楚如何管理大型位数组纯粹是为了思考一个有趣的问题，那么计算字节数组中位的位置只是基本的模运算。

```
public class BitArray {

    private static final int ALL_ONES = 0xFFFFFFFF;
    private static final int WORD_SIZE = 32;
    private int bits[] = null;

    public BitArray(int size) {
        bits = new int[size / WORD_SIZE + (size % WORD_SIZE == 0 ? 0 : 1)];
    }

    public boolean getBit(int pos) {
        return (bits[pos / WORD_SIZE] & (1 << (pos % WORD_SIZE))) != 0;
    }

    public void setBit(int pos, boolean b) {
        int word = bits[pos / WORD_SIZE];
        int posBit = 1 << (pos % WORD_SIZE);
        if (b) {
            word |= posBit;
        } else {
            word &= (ALL_ONES - posBit);
        }
        bits[pos / WORD_SIZE] = word;
    }

} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-04-01T04:29:06.560

使用[`BitSet`](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html)（正如 Hunter McMillen 在评论中已经指出的那样）。您可以轻松[获取](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html#get%28int%29)和[设置](http://docs.oracle.com/javase/7/docs/api/java/util/BitSet.html#set%28int,%20boolean%29)位。要迭代只需使用正常`for`循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-02T13:41:10.910

这是*phatfingers* 'BitArray'的更优化的实现

```
class BitArray {

    private static final int MASK = 63;
    private final long len;
    private long bits[] = null;

    public BitArray(long size) {
        if ((((size-1)>>6) + 1) > 2147483647) {
            throw new IllegalArgumentException(
                "Field size to large, max size = 137438953408");
        }else if (size < 1) {
            throw new IllegalArgumentException(
                "Field size to small, min size = 1");
        }
        len = size;
        bits = new long[(int) (((size-1)>>6) + 1)];
    }

    public boolean getBit(long pos) {
        return (bits[(int)(pos>>6)] & (1L << (pos&MASK))) != 0;
    }

    public void setBit(long pos, boolean b) {
        if (getBit(pos) != b) { bits[(int)(pos>>6)] ^= (1L << (pos&MASK)); }
    }

    public long getLength() {
        return len;
    }
} 
```

由于我们使用 64 个字段，我们将最大大小扩展到 137438953408 位，这大致适合 16GB 的内存。此外，我们使用掩码和位移来代替除法和模运算，以减少计算时间。改进是相当可观的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T01:53:53.613

```
byte[] A = new byte[10000000];
A[99000] = 1;
for(int i = 0; i < A.length; i++) {
    //do something
} 
```

如果你真的想要位，你可以使用 boolean 并让 true = 1 和 false = 0。

```
boolean[] A = new boolean[10000000];
//etc 
```

# java - 在 Java 中复制复杂的数据结构

> ID：15736627
> 
> 赞同：2
> 
> 时间：2013-04-01T01:51:56.420
> 
> 标签：java, data-structures, decorator, composite

我在我的 Java 程序中使用复合模式，这样一个组件被三个类扩展。

1.  叶类扩展组件
2.  复合扩展组件
3.  装饰器扩展组件（用于装饰叶子）

组合当前使用 List 实现，其中每个元素可以是叶子、另一个组合或装饰器。我正在考虑添加我将使用命令/备忘录模式的撤消/重做功能。

现在我的问题是，如何在此处创建列表的深层副本，以便以后恢复？基本上，需要找到一种方法，允许我在执行另一个命令之前在当前时间创建一个新的列表副本。我认为必须有一些递归的方式来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T01:54:53.320

最便宜的代码方法（但在整体 CPU 和内存使用方面可能不是最便宜的）是将您的类标记为可序列化，将列表序列化到内存缓冲区，然后将其反序列化回对象。如果你做得对，结果将是你的对象列表的深层副本。

# c# - 未使用 OnLoaded 事件设置文本块文本属性

> ID：15736630
> 
> 赞同：0
> 
> 时间：2013-04-01T01:52:27.697
> 
> 标签：c#, silverlight, windows-phone-7, events, textblock

我在特定页面上有一个 texblock。我从上一页导航，单击列表框中的一个选项，该对象存储在 APP.Xaml 文件中作为属性。在我的导航页面上，我在我的列表框的 Loaded 事件中调用此对象，并将它们的文本属性设置为它们在我的 App.xaml 文件中存储的属性上的相应等效项。

问题是，4 个列表框中只有一个有效，而另一个无法显示。任何人都知道为什么会这样。我的代码如下。

```
 private void StopNameTextBlock_Loaded(object sender, RoutedEventArgs e)
    {
        StopNameTextBlock.Text = (Application.Current as App).SelectedBusStop.StopName;
    }

    private void BusDirectionTextBlock_Loaded(object sender, RoutedEventArgs e)
    {   
        BusDirectionTextBlock.Text = "Towards: " + (Application.Current as App).SelectedBusStop.BusDirection;
    }

    private void BusesServedTextBlock_Loaded(object sender, RoutedEventArgs e)
    {
        BusesServedTextBlock.Text = "Buses Served: " + (Application.Current as App).SelectedBusStop.BusesServed;
    } 
```

从上面的代码。第一个文本块会填充，但其他文本块不会。帮助 下面是 XAML 代码。

```
<StackPanel Name="StopInfo" Orientation="Vertical" Margin="0,0,0,620">
            <TextBlock Name="BusDirectionTextBlock" Loaded="BusDirectionTextBlock_Loaded" />
            <TextBlock Name="BusesServedTextBlock" Loaded="BusesServedTextBlock_Loaded" />
            <TextBlock Name="TimeRequestedTextBlock" />
        </StackPanel> 
```

# php - 在 while 循环中，检查是否有一些行指定列 int 不高于 0

> ID：15736631
> 
> 赞同：2
> 
> 时间：2013-04-01T01:52:45.843
> 
> 标签：php, mysql

**说明与问题**

好的，我们的表中有以下列，

[用户名] - [消息] - [状态] - [id]

在某些指定的 PHP 页面中，我们使用 while 循环来发布存储在数据库中的所有行。

好的，但是现在我想检查该表中是否有任何行，如果没有，则回显错误。

没关系，就这么简单：

```
$check = $fetch->rowCount(); 
```

进而

```
if ($check == 0) { } 
```

但是现在，我想检查“状态”列是否为 0。

因此，如果没有列 'status' 值为 0 的行，它将回显一条消息。如果根本没有行，它将回显一条消息。

*如果存在列 'status' 值为 0 的行，它将回显所有行。*

但至少对我来说有一些问题，这样做。

**问题**

我不能在循环内执行所有 IF 语句检查，因为如果没有行，循环就无法运行。

但是好的，我们可以检查循环之外是否有行，但是我如何检查是否有行+它们的状态列的值是否高于“0”？

> **我让它以某种方式工作，但不像我想要的那样..**
> 
> 如果同时存在列'status'值为0的行+列status值大于0的行，它将回显消息+显示行，这不应该像这样工作！

这是我尝试构建的代码：

```
 $check = $fetch->rowCount();
        if ($check == 0) {
            echo '<br /> EMPTY';
        }
        while($row = $fetch->fetch( PDO::FETCH_ASSOC )) {
            if ($check > 0 && $row['status'] == 0) {
                echo 
                '<div class="background">'.$row['email'].' <span style="margin-left: 10px;"><font color="#ff0000">UNANSWERED</font></span><span id="right"><a href="index.php?recover='.$row['recover_id'].'">Read More</a></span></div><br />
                ';
            } else {
                echo 'There are no rows!';
            }
        } 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:02:51.507

试试这个：

```
$check = $fetch->rowCount();
if ($check == 0) {
    echo '<br /> EMPTY';
}
else
{
        while($row = $fetch->fetch( PDO::FETCH_ASSOC )) {
            if ($check > 0 && $row['status'] == 0) {
                echo "status  0";
                // or echo "<br/> BLANK!";
            }
            else
            {
                echo '<div class="background">'.$row['email'].' <span style="margin-left: 10px;"><font color="#ff0000">UNANSWERED</font></span><span id="right"><a href="index.php?recover='.$row['recover_id'].'">Read More</a></span></div><br />';
            }           
       }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:05:25.867

`But now, I want to check if column 'Status' is 0. So if there are no rows with columns 'status' with value 0, it will echo a message. If there are no rows at all, it will echo a message. If there are rows with column 'status' with value 0, it will echo all rows.`

为什么不在您的`WHERE`子句中将该条件发送到数据库

```
SELECT username,message,status,id FROM yourTABLE where status=0 
```

所以当有这样的行时，它会显示它们。如果没有这样的行，那么您的行数将为 0，然后您可以相应地回显消息

**提示**

从表中获取所有行，然后将它们带到 PHP 中只是丢弃其中的大部分，就像去水果店购买所有可用的水果，把它们带回家然后说不，我不需要橙子、苹果、杏子等等等等。您必须将条件发送到您的数据库，而不是在没有任何条件的情况下将所有数据带入，然后将条件放入 PHP 中。

# linux - 在cmd文件中传递变量并在linux中执行

> ID：15736634
> 
> 赞同：0
> 
> 时间：2013-04-01T01:53:05.390
> 
> 标签：linux, windows, shell, batch-file, cmd

我有一个问题，即 .cmd 文件无法将数据发送到另一个 cmd 文件。根据要求，我的第一个 cmd 文件正在获取一个 IP 地址以发送到另一个 cmd 文件，该文件将进一步远程登录到 linux 机器。

从第一个 cmd 文件：Main_telnet.cmd

```
echo %IPAddress% >> telnet.cmd 
```

现在在第二个文件中，因为它将在 linux 服务器上运行

```
echo "$IPAddress"
telnet $IPAddress 
```

我试过使用`telnet $1`

我不确定我的第一个 cmd 文件是否正在传递 IP 地址，或者第二个文件是否无法读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:09:51.843

不知道我是否真的得到了，你的问题是什么。您的 Main_telent.cmd 将变量 %IPaddress% 的内容写入文件（它将其附加到该文件，这意味着，它添加了额外的一行 - 真的，您想要做什么？）您可以使用 '键入 telnet.cmd'。

你的第二个文件：它是在 Windows 上运行的，正如你的第一句话所暗示的那样，还是在 linux 上运行，正如你稍后所说的那样？

尽管如此（Windows 或 Linux）：它必须从文件中读取变量

编辑：啊等等！是否要将 %IPAddress% 作为参数传递给 telnet.cmd？

第一个 cmd 文件

```
REM Main_telnet.cmd
rem get ipaddress
echo %IPAddress%
telnet.cmd %IPAddress% 
```

第二个 cmd 文件

```
REM telnet.cmd
echo connecting to: %1
telnet %1 
```

# .net - C# 中的 Parallel.ForEach - 我错过了什么？

> ID：15736637
> 
> 赞同：1
> 
> 时间：2013-04-01T01:53:13.753
> 
> 标签：.net, .net-4.0, task-parallel-library

我试图弄清楚为什么我试图构建的（使用 TPL）没有按预期工作。

这是场景：我有一堆通过中央服务处理器的服务请求类，并返回服务结果对象。有时我需要为单个“调用”执行多个（我会说 2 到 5 个）这些请求。所以我有这样的事情：

```
ServiceRequestType1 Request1 = new ServiceRequestType1();
ServiceRequestType2 Request2 = new ServiceRequestType2();
ServiceRequestType3 Request3 = new ServiceRequestType3();
ServiceRequestType4 Request4 = new ServiceRequestType4();

ServiceProcessor sp = new ServiceProcessor();

ServiceResultType1 = sp.ProcessType1(Request1);
ServiceResultType2 = sp.ProcessType2(Request2);
ServiceResultType3 = sp.ProcessType3(Request3);
ServiceResultType4 = sp.ProcessType4(Request4);

// do stuff with the ServiceResult objects... 
```

这 4 个请求在我的本地机器上同步运行时 - 所有处理都非常快（通常每个不到 10 毫秒），即使他们正在访问数据库以获取数据。我对这种表现很满意。但是随着时间的推移，随着数据库大小的增长和性能的降低，我想看看是否可以使用 Parallel.ForEach() 让多个请求在大致相同的时间内并行运行。

所以我设置了这样的东西：

```
ConcurrentBag<ServiceResultBase> results = new ConcurrentBag<ServiceResultBase>();

Parallel.ForEach<IServiceRequest>(request.Requests, serviceRequest =>
{
   ServiceResultBase serviceResult = ExecuteServiceRequest(serviceRequest);
   results.Add(serviceResult);
}); 
```

正如我现在一直在测试的那样，问题是我得到的结果非常不一致。有时所有请求一起运行得很好，所有 4 个请求总共在 < 10 毫秒内执行。有时，一些请求的运行时间小于 10 毫秒，但其他请求的运行时间超过 3000 毫秒，有时一个或多个请求的运行时间超过 30,000 毫秒。有时一个或多个请求根本无法完成。我正在尝试调试并找到其根本原因，但到目前为止，很难说出问题出在哪里以及为什么 Parallel.ForEach 对我来说是这样的。

使用时我应该注意什么问题或选项`.ForEach()`？我在这里阅读了一些其他引用 TPL 的帖子，但与我所经历的完全不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:04:46.853

它肯定与 TPL 无关，问题在于您用于访问数据库的库，或者数据库本身，与表/行锁相关的某种或并发问题。使用 SQL Profiler 检查查询的执行情况并从那里开始。

# c - 如果我有一个 C 函数并且我正在使用 gdb 调试它，我如何找到函数的返回值？

> ID：15736639
> 
> 赞同：3
> 
> 时间：2013-04-01T01:53:44.493
> 
> 标签：c, debugging, gdb, stack, cpu-registers

我有一个任务要求我通过寄存器检查找到 main 的返回值（我们正在学习 gdb），我将如何去做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T01:55:33.980

通常，请查看调用约定。

在 x86 中，所有调用约定在 EAX 上返回小整数结果，在 EDX:EAX（EDX 持有较高位）上返回大（64 位）结果，浮点结果在 FP0 中。

在 x64 中，RAX 上返回小整数结果，FP0 上返回浮点结果。

在 ARM（包括拇指模式）中，整数结果在 R0 中返回。

如果你想弄清楚在哪里放置断点，我的建议是在*main*函数的开头放置一个断点。如果这样做，返回地址（即*main*执行完毕后将返回的地址）将是堆栈顶部的值。如果您在此处设置断点，您将在*main*函数完成执行后立即中断。

由于*main*的返回类型为*int*，您可以查看 EAX（或 RAX 或 R0）以查看*main*返回的值。

# database - “选择更新”何时锁定和解锁？

> ID：15736640
> 
> 赞同：25
> 
> 时间：2013-04-01T01:53:45.457
> 
> 标签：database, postgresql, locking

这是我的伪代码：</p>

```
re = [select **result** from table where **condition**=key for update]

if[re satisfies]
{
    delete from table where **condition** = key;
}

commit 
```

我想问一下条件等于“key”的行是否已经被删除了，是否可以自动解锁被“select for update”阻塞的锁，也就是说如果此时另一个进程进入并选择相同的“key” “不能被这一个挡住吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-01T07:10:24.440

锁定是在命令执行期间（通常是在开始时或附近）执行的。*只有*在事务提交或回滚时才会释放锁（[咨询锁除外）。](http://www.postgresql.org/docs/current/static/explicit-locking.html)没有，也没有命令可以反转表级命令的效果。这一切都[在 PostgreSQL 文档的并发控制部分进行了](http://www.postgresql.org/docs/current/interactive/mvcc.html)解释。*`FOR UNLOCK``UNLOCK``LOCK`*

 *您必须提交或回滚您的事务以释放锁。

此外，询问“此行是否已被另一个并发事务删除”实际上没有意义。在删除该行的事务提交之前，它并没有真正被删除......即使这样，它也可能已经删除并重新插入了该行，或者另一个并发事务可能已经再次插入了该行。

您是否有机会构建任务队列或消息队列系统，因为如果是这样，那么问题就解决了，您不应该尝试重新发明那个异常复杂的轮子。请参阅[PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)、[ActiveMQ](https://en.wikipedia.org/wiki/Apache_ActiveMQ)、[RabbitMQ](https://en.wikipedia.org/wiki/RabbitMQ)、[ZeroMQ](https://en.wikipedia.org/wiki/%C3%98MQ)等（未来的 PostgreSQL 版本[可能包括`FOR UPDATE SKIP LOCKED`](https://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.5#SKIP_LOCKED)，因为正在测试，但在撰写本文时尚未发布）。

我建议您发布一个新问题，更详细地描述您要解决的潜在问题。您假设问题的解决方案是“找出该行是否已被删除”或“解锁该行”。这可能不是真正的解决方案。这有点像有人说“我在哪里买汽油”当他们的推车不去时，他们认为它已经没油了。燃料不是问题，问题是手推车不消耗燃料，你必须踩踏板。

说明背景。解释你想要达到的目标。最重要的是，不要发布伪代码，发布*您遇到问题的实际代码*，最好以独立且可运行的形式发布。*

# ruby-on-rails - 对多个模型使用相同的视图

> ID：15736644
> 
> 赞同：0
> 
> 时间：2013-04-01T01:54:06.527
> 
> 标签：ruby-on-rails, helper, rails-activerecord, view-helpers

我有一个带有相关控制器的“部分”模型和一个“页面”模型，并且希望两者都呈现相同的视图。无论是渲染页面还是部分，我都在尝试获取类别。

在页面中，通过部分引用类别。

通过以下方式链接到某个部分时，它会正确呈现：/sections/8

但是，当通过以下方式链接到页面时：/pages/2

我在助手的“if @page.category”部分收到错误：“# 的未定义方法 `category'”。

页面.rb

```
class Page < ActiveRecord::Base
  attr_accessible :skin_id, :section_id, :name, :title, :content

  belongs_to :skin
  belongs_to :section
  validates_presence_of :skin
  validates_presence_of :section
end 
```

部分.rb

```
class Section < ActiveRecord::Base
  attr_accessible :category_id, :skin_id, :page, :name, :title, :content

  has_many :pages

  belongs_to :category
  belongs_to :skin

  validates_presence_of :category
  validates_presence_of :skin
  validates_presence_of :name
  validates_presence_of :title
end 
```

pages_helper.rb

```
module PagesHelper

  def category
    if @page.category
      @page.category
    else 
      @page.section.category
    end
  end
end 
```

page.html.haml

```
-@sections = Section.all
%nav#side
  %ul
    -@sections.each do |section|
      -if section.category == category
        %li
          = link_to section.title, section
          %ul
            -section.pages.each do |page|
              %li
                = link_to page.title, page 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T01:59:45.290

首先将 'has_one :category, :through => :section' 添加到您的页面模型中

```
class Page < ActiveRecord::Base
  attr_accessible :skin_id, :section_id, :name, :title, :content

  belongs_to :skin
  belongs_to :section

  has_one :category, :through => :section

  validates_presence_of :skin
  validates_presence_of :section
end 
```

接下来将它们分成部分。

在您的部分文件夹中创建一个名为 _section.html.haml 的文件。然后执行以下操作

_section.html.haml

```
%li
  = link_to section.title, section
    %ul
      -section.pages.each do |page|
        %li
          = link_to page.title, page 
```

然后你的 page.html.haml

```
%nav#side
  %ul
    -@sections.each do |section|
      -if section.category == category
        = render :partial => "sections/setion", :locals => {:section => section} 
```

您现在应该能够重用部分部分，并且应该能够从页面访问类别海峡。

# javascript - 不同长度电话号码的正则表达式

> ID：15736649
> 
> 赞同：0
> 
> 时间：2013-04-01T01:54:40.117
> 
> 标签：javascript, regex

我在 Google 上搜索了电话号码正则表达式验证，但无法根据我的要求使其工作。

基本上，我对前缀有三组独立的规则：

*   对于 10 位数字，我需要确保前 3 个是从 2-9 开始的数字。
*   对于 11 位数字，我需要确保前 4 位是从 1-9 开始的数字。
*   对于任何大于 12 位的数字，我需要确保前 7 位是 0-9 之间的数字。

之后我可以允许像 1888GOSUPER 这样的字母或类似的东西（这属于第二个条件）

这是我到目前为止所拥有的，但我不确定我是否已经涵盖了所有内容：

```
var reg10 = /^[2-9]{3}[a-z0-9]+$/i;
var reg11 = /^[1-9]{4}[a-z0-9]+$/i;
var reg12plus = /^[0-9]{7}[a-z0-9]+$/i; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:04:58.250

这可以由一个正则表达式处理（包括您的长度检查，正如其他人所建议的那样）。可能可以比这更简洁，但我觉得这在你的 3 个特别独立的前缀要求的上下文中更具可读性：

`^(?:[2-9]{3}[a-z0-9]{7})$|^(?:[1-9]{4}[a-z0-9]{7})$|^(?:[0-9]{7}[a-z0-9]{5,})$`

基本上通过“交替”结合你的三个不同的案例`|`

这可以稍微“标准化”，而不会“破坏”意图的清晰性，方法是对整个表达式进行分组，然后用开始/结束锚点包围（而不是在每个选项中重复这些，如上所述）。虽然这会导致总体上相似的长度规则，但当我们添加额外的非捕获组时：

`^(?:(?:[2-9]{3}[a-z0-9]{7})|(?:[1-9]{4}[a-z0-9]{7})|(?:[0-9]{7}[a-z0-9]{5,}))$`

# java - 如何使用多态处理反序列化？

> ID：15736654
> 
> 赞同：31
> 
> 时间：2013-04-01T01:55:06.447
> 
> 标签：java, gson

我有一个像这样的课程：

```
public class Barn {
    String type;
    Animal animal;
}

public class Horse extends Animal {
}

public class Cow extends Animal {
} 
```

我想序列化它们的列表：

```
List<Barn> barns = new ArrayList<Barn>();

Barn barn1 = new Barn();
barn1.setType("horse");
barn1.setAnimal(new Horse());
barns.add(barn1);

Barn barn2 = new Barn();
barn2.setType("cow");
barn2.setAnimal(new Cow());
barns.add(barn2);

...

Group<Barn> barns = gson.fromJson(serialized); 
```

当我序列化时，Animal 属性的类型信息将丢失。有没有办法以某种方式安装解析器侦听器，以便在遇到列表中的每个元素时提供正确的类来反序列化？这就是手动提供描述类类型的字符串背后的想法。

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-01T04:39:31.133

在 Gson 项目代码库中是[RuntimeTypeAdapter](https://github.com/google/gson/blob/master/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java)，据报道它适用于多态序列化和反序列化。我想我还没有尝试过使用它。有关详细信息，请参阅[http://code.google.com/p/google-gson/issues/detail?id=231](http://code.google.com/p/google-gson/issues/detail?id=231)。请注意，它尚未包含在任何 Gson 版本中。

如果使用它不符合您的需求，则需要自定义反序列化处理。以下是一种这样的方法，假设您要使用演示的 JSON 结构。（如果 JSON 结构可能不同，我会采取一些不同的方法。）

```
import java.lang.reflect.Type;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonDeserializationContext;
import com.google.gson.JsonDeserializer;
import com.google.gson.JsonElement;
import com.google.gson.JsonObject;
import com.google.gson.JsonParseException;
import com.google.gson.reflect.TypeToken;

public class App
{
  public static void main(String[] args)
  {
    Barn[] barns = {new Barn(), new Barn()};
    barns[0].type = "horse";
    barns[0].animal = new Horse();
    barns[1].type = "cow";
    barns[1].animal = new Cow();

    String json = new Gson().toJson(barns);
    // [{"type":"horse","animal":{}},{"type":"cow","animal":{}}]

    BarnDeserializer deserializer = new BarnDeserializer("type");
    deserializer.registerBarnType("horse", Horse.class);
    deserializer.registerBarnType("cow", Cow.class);
    Gson gson = new GsonBuilder().registerTypeAdapter(Barn.class, deserializer).create();

    List<Barn> barns2= gson.fromJson(json, new TypeToken<List<Barn>>(){}.getType());
    for (Barn barn : barns2)
    {
      System.out.println(barn.animal.getClass());
    }
  }
}

class BarnDeserializer implements JsonDeserializer<Barn>
{
  String barnTypeElementName;
  Gson gson;
  Map<String, Class<? extends Animal>> barnTypeRegistry;

  BarnDeserializer(String barnTypeElementName)
  {
    this.barnTypeElementName = barnTypeElementName;
    gson = new Gson();
    barnTypeRegistry = new HashMap<>(); // Java 7 required for this syntax.
  }

  void registerBarnType(String barnTypeName, Class<? extends Animal> animalType)
  {
    barnTypeRegistry.put(barnTypeName, animalType);
  }

  @Override
  public Barn deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) 
      throws JsonParseException
  {
    JsonObject barnObject = json.getAsJsonObject();
    JsonElement animalTypeElement = barnObject.get(barnTypeElementName);
    Barn barn = new Barn();
    barn.type = animalTypeElement.getAsString(); 
    Class<? extends Animal> animalType = barnTypeRegistry.get(barn.type);
    barn.animal = gson.fromJson(barnObject.get("animal"), animalType);
    return barn;
  }
}

class Barn {String type; Animal animal;}
class Animal {}
class Horse extends Animal {}
class Cow extends Animal {} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-12-30T18:49:29.197

您可以为此使用[Gson Fire](https://github.com/julman99/gson-fire)。代码看起来像这样：

```
GsonFireBuilder builder = new GsonFireBuilder()
    .registerTypeSelector(Barn.class, new TypeSelector<Barn>() {
        @Override
        public Class<? extends Barn> getClassForElement(JsonElement readElement) {
            String type = readElement.getAsJsonObject().get("type").getAsString();
            if(type.equals("horse")){
                return Horse.class; 
            } else if(type.equals("cow")) {
                return Cow.class;
            } else {
                return null; //returning null will trigger Gson's default behavior
            }
        }
    });
Gson gson = builder.createGson(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-09-04T09:10:30.523

您不需要编写自己的适配器。

最后，gson 有自己的[RuntimeTypeAdapterFactory](https://github.com/google/gson/blob/master/extras/src/main/java/com/google/gson/typeadapters/RuntimeTypeAdapterFactory.java)来处理 java 多态性，但不幸的是它不是 gson 核心库的一部分（为了使用它，您必须将类复制并粘贴到您的项目中）。

假设你有这个`Animal.class`：

```
public class Animal {
    protected String name;
    protected String type;

    public Animal(String name, String type) {
        this.name = name;
        this.type = type;
    }
} 
```

并且`Horse.class`：

```
public class Horse extends Animal {
    public Horse(String name) {
        super(name, "horse");
    }
} 
```

`RuntimeTypeAdapterFactory`您可以使用以下代码初始化：

```
RuntimeTypeAdapterFactory<Animal> runtimeTypeAdapterFactory = RuntimeTypeAdapterFactory
.of(Animal.class, "type")
.registerSubtype(Horse.class, "horse")
.registerSubtype(Cow.class, "cow");

Gson gson = new GsonBuilder()
    .registerTypeAdapterFactory(runtimeTypeAdapterFactory)
    .create(); 
```

[在这里](https://stackoverflow.com/questions/47134470/how-does-polymorphism-work-with-gson-retrofit/47189060#47189060)您可以找到一个完整的工作示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-03T15:20:30.913

我也对该功能感兴趣，并已向 GSon 添加了功能请求

[https://github.com/google/gson/issues/869](https://github.com/google/gson/issues/869)

# python - 打印张量变量

> ID：15736655
> 
> 赞同：1
> 
> 时间：2013-04-01T01:55:13.470
> 
> 标签：python, numpy

我有一个张量变量，它是一个大小为 4 * 5 的矩阵，我想知道是否有一种快速的方法可以将此变量打印到控制台。我可以使用没有 for 循环的 print 来打印这个变量吗*？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T02:10:06.520

NumPy 数组可以用很好的格式打印：

```
In [187]: arr = np.arange(4*5).reshape(4,5)

In [188]: print(arr)
[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]
 [15 16 17 18 19]] 
```

有关控制 NumPy 数组如何显示的更多方法，请参见[numpy.set_printoptions 。](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:02:15.810

当然！

```
print ("{} {} {} {}\n" * 5).format(*t) 
```

细节取决于张量的确切布局。在这里，我假设一个包含 20 个浮点数的元组。

或者，如果您真的很懒惰：

```
print (("{} "*4 + "\n")*5).format(*t) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T02:10:05.253

```
def main():
    matrix = [
        [ 1,  2,  3,  4],
        [ 5,  6,  7,  8],
        [ 9, 10, 11, 12],
        [13, 14, 15, 16],
        [17, 18, 19, 20],
    ]
    print("{} {} {} {} {}".format(*matrix))

if __name__ == '__main__':
    main() 
```

结果：

```
[1, 2, 3, 4] [5, 6, 7, 8] [9, 10, 11, 12] [13, 14, 15, 16] [17, 18, 19, 20] 
```

# javascript - 数组中的javascript for-in循环

> ID：15736656
> 
> 赞同：-1
> 
> 时间：2013-04-01T01:55:17.967
> 
> 标签：javascript

如果代码是这样的：

```
arr=Array("a","b","c");
for(i in arr);
{
 alert(i);
} 
```

没有任何警报，但如果是这样：

```
arr=new Array("a","b","c");
for(i in arr)
{
 alert(i);//alerts 0,1,2
} 
```

是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T01:58:16.523

`Array`是一个构造函数。要创建一个新对象，您应该使用 new 运算符来创建对象，然后将构造函数绑定到该对象并对其运行。但在这种情况下，它实际上应该以任何一种方式工作，您的问题很可能与您的 for 循环旁边的分号有关，如评论中所述。

顺便说一句，为了创建一个新数组，通常建议使用更简单的符号

```
var arr = ["a","b","c"]; 
```

在 javascript 中使用带有数组的 for-in 循环也是有问题的，因为这会影响数组上定义的任何其他属性。（所以如果你`arr.x = 2`说它也会迭代`x`.

最好使用迭代形式

```
var i =0, length =arr.length;
for ( ;i<length; i++) {

    alert(arr[i]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:33:19.250

您得到不同结果的原因是您为 for/in 循环使用了不正确的语法。

```
for(i in arr);
{
 alert(i);
} 
```

不应该有第一个分号。

另请注意，迭代数组的更好方法是：

```
arr.forEach(function(value, index){
    alert(value); // or alert(index);
}); 
```

正如 bfavaretto 所提到的。

调用不带`new`关键字的 Array 函数将创建并返回一个新的 Array 对象，其方式与使用`new`关键字的方式相同。

所以这两个会提醒同样的事情：

```
arr1 = new Array("a","b","c");
arr2 = Array("a","b","c"); 
```

# xcode - 卸载情节提要视图

> ID：15736657
> 
> 赞同：0
> 
> 时间：2013-04-01T01:55:21.760
> 
> 标签：xcode, storyboard

我正在使用以下内容打开故事板视图：

```
 GroupProximity *proximity = [self.storyboard instantiateViewControllerWithIdentifier:@"groupproximity"];

     [self.navigationController pushViewController:proximity animated:YES]; 
```

但是，当我使用顶栏上的后退按钮时，似乎活动并未停止。按下后退按钮时如何卸载情节提要视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:08:07.697

实施`viewWillDisappear:`。在这里，您使计时器无效，使其不复存在。

有关与 NSTimer 相关的特殊生命周期/内存问题的更多信息，请参阅我书中的讨论：

[http://www.aeth.com/iOSBook/ch12.html#_unusual_memory_management_situations](http://www.apeth.com/iOSBook/ch12.html#_unusual_memory_management_situations)

# java - 用词创建类别的最佳方法

> ID：15736659
> 
> 赞同：1
> 
> 时间：2013-04-01T01:55:48.073
> 
> 标签：java, store, categories, words

我目前正在做一个小“刽子手”项目。我想让用户可以从不同的类别中进行选择，例如“国家”或“食物”，这让我思考什么是处理和排序这些类别的最佳方式。

我将单词保存到一个小文本文件中，如下所示：

```
Countries: Hungary Austria Argentina Canada;
Food: Donut Bread Hamburger; 
```

现在，我创建了一个多维 ArrayList，它存储所有单词，每个类别在该 ArrayList 中的一个单独的 ArrayList 中。

```
ArrayList< ArrayList<String> > words = new ArrayList< ArrayList<String> >();

// ... read words from .txt file and store it in the words-ArrayList ... 
```

我知道，在每个类别中，第一个单词是一个类别的标题，所以如果我想获取所有类别的标题，它看起来像这样：

```
for( ArrayList list : words ) {
    System.out.println( list.get(0) );
} 
```

现在我使用的这种方法效果很好，对我来说似乎有点太复杂了，我想知道是否有更简单的方法可以做到这一点。我要提前感谢您可以给我的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T01:59:49.030

最好用`Map<String, List<String>>`我的钱。Map 可以是 HashMap，单词 category 是键，而 List（具体形式的 ArrayList）是相关值。

然后要提取类别，您需要做的就是提取键集并遍历它。例如，

```
 Map<String, List<String>> mapList = new HashMap<String, List<String>>();

  // fill map here...

  for (String key : mapList.keySet()) {
     List<String> list = mapList.get(key);

     System.out.printf("%s: %s%n", key, list);
  } 
```

如果您希望键按特定顺序排列，那么您需要使用 Map 的其他具体实现之一，例如 TreeMap。

举个简单的例子：

```
import java.io.InputStream;
import java.util.*;

public class MapList {
   public static void main(String[] args) {
      Map<String, List<String>> mapList = new HashMap<String, List<String>>();

      String sourcePath = "MapListData.txt";
      InputStream source = MapList.class.getResourceAsStream(sourcePath);
      if (source == null) {
         return;
      }
      Scanner scan = new Scanner(source);
      while (scan.hasNextLine()) {
         String line = scan.nextLine().trim();
         if (!line.isEmpty()) {
            line = line.replace(";", "");
            String[] mainTokens = line.split("\\s*:\\s*");
            if (mainTokens.length == 2) {
               String key = mainTokens[0];
               List<String> list = new ArrayList<String>();
               String[] subTokens = mainTokens[1].split("\\s+");
               for (String subToken : subTokens) {
                  list.add(subToken);
               }
               mapList.put(key, list);
            }
         }
      }

      if (scan != null) {
         scan.close();
      }

      for (String key : mapList.keySet()) {
         List<String> list = mapList.get(key);

         System.out.printf("%s: %s%n", key, list);
      }
   }
} 
```

对我来说回报：

```
Beer: [Pilsner, Weiss, Brown_Ale, IPA]
Countries: [Hungary, Austria, Argentina, Canada]
Food: [Donut, Bread, Hamburger] 
```

# javascript - 使用 Webview/javascript 的 Android 应用程序。什么是安全问题？

> ID：15736660
> 
> 赞同：20
> 
> 时间：2013-04-01T01:56:18.090
> 
> 标签：javascript, android, webview, xss, malware

我正在使用`Webview`和`Javascript`制作`addJavascriptInterface(true)`.

我的应用程序将包含将从外部站点加载的数据（html）。

当我启用 addJavascriptInterface(true) 时，我担心我的应用程序的*跨站点脚本 XSS/安全性。*

我应该注意哪些事情，以免任何恶意代码在我的应用程序上运行？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-02-20T07:54:01.560

我从 Syracuse 大学找到了一项名为[Attacks on WebView in the Android System](http://www.cis.syr.edu/~wedu/Research/paper/webview_acsac2011.pdf)的很好的研究，它说明了使用`WebView`with`addJavascriptInterface(true)`如何启用两种攻击。一是恶意网站现在可以通过您分配给界面的电话服务（例如联系人、相机等）访问您的应用程序，二是恶意应用程序可以通过将代码插入到易受攻击的网站访问它的Javascript。

基本上，应用程序开发人员的解决方法是确保`WebView`在您的 WebView 中不允许查看除预期之外的其他 URL。例如，假设您将 Facebook.com 嵌入到您`WebView`的`WebView`. 这在 iFrame 中最为常见……尽管本文对此进行了更深入的探讨。

这是他们提供的示例，可确保在`WebView`原始预期之外的其他 URL 中查看：

```
WebViewclient wvclient = New WebViewClient() {
  // override the "shouldOverrideUrlLoading" hook.
  public boolean shouldOverrideUrlLoading(WebView view,String url){
    if(!url.startsWith("http://www.facebook.com")){
    Intent i = new Intent("android,intent.action.VIEW",
    Uri.parse(url));
    startActivity(i);
  }
}
// override the "onPageFinished" hook.
public void onPageFinished(WebView view, String url) { ...}
}
webView.setWebViewClient(wvclient); 
```

这是一项很棒的研究，并概述了几种不同的攻击方式。值得一读！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-09-30T08:47:59.710

**当您为其启用 javascript**时，4.2 之前的 webview 中存在漏洞 。

**使用启用 Javascript：**

启用 JavaScript 后，您可以在应用程序代码和 JavaScript 代码之间创建接口。

**addJavascriptInterface（对象对象，字符串名称）方法：**

addJavascriptInterface 方法将提供的 Java 对象注入 WebView。

使用提供的名称将对象注入到主框架的 JavaScript 上下文中，这允许从 JavaScript 访问 Java 对象的方法。

对于运行 Android 4.1 或更早版本的应用程序，所有公共方法（包括继承的方法）都可以访问，因此当用户使用 addJavascriptInterface 方法安装的应用程序加载外部网页时，它可以使用 WebView 和 javascript 调用 java 对象（如 'Javascript管道”和使用反射来调用任何其他未注册的 Java 类）允许攻击者调用 Android 的 Java 方法。

**修复：**

对于运行 Android 4.2 的应用程序，所有使用 JavascriptInterface 注释的公共方法都可以从 JavaScript 访问。

因此，如果您为 SDK 版本 17 或更高版本开发应用程序，则必须将 @JavascriptInterface 注释添加到您希望 JavaScript 可用的任何方法。

如果您不提供注释，则在 Android 4.2 或更高版本上运行时，您的网页将无法访问该方法。

[参考](http://blogs.avg.com/mobile-2/analyzing-android-webview-exploit/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-18T15:07:20.840

我写了这个[要点](https://gist.github.com/scottyab/6f51bbd82a0ffb08ac7a)来帮助锁定Android的Webview，类似于@Noni A的回答它只允许通过覆盖加载白名单的url，`shouldOverrideUrlLoading`但`shouldInterceptRequest`我相信AJAX类型调用也会使用它。

# android - 如何将手机的屏幕坐标映射到我的电脑屏幕？

> ID：15736663
> 
> 赞同：1
> 
> 时间：2013-04-01T01:57:11.370
> 
> 标签：android, coordinates, mouse, screen-resolution

我终于开发了我的应用程序，我可以用我的 Android 手机控制 PC 鼠标。我正在使用触摸屏来控制鼠标。

问题是鼠标光标仅在受手机屏幕尺寸限制的特定区域内移动。我希望能够到处移动光标？我需要某种映射吗？

这就是我从手机发送坐标的方式：

```
public boolean onTouchEvent(MotionEvent evt)
{   
    String coords = Math.round(evt.getX()) + ", " + Math.round(evt.getY());

    Log.d(TAG, coords);

    msgIO.sendMessage(soc, coords);

    return true;
} 
```

澄清一下：假设手机屏幕限制为 300x700，PC 屏幕限制为 1080x720。现在，如果我使用手机的触摸屏发送坐标，它只会将鼠标光标移动到 300x700 矩形内的 pc 端。我想在 1080x720 矩形内移动它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:31:13.067

我想你可以用数学来解决它。

您需要将 4 个参数发送到 PC。

```
String coords = Phone_Touched_X;
coords += ", "
coords += Phone_Touched_Y
coords += ", "
coords += Phone_Screen_X
coords += ", "
coords += Phone_Screen_Y 
```

PC端：

```
Position_X = PC_Screen_X * Phone_Touched_X / Phone_Screen_X;
Position_Y = PC_Screen_Y * Phone_Touched_Y / Phone_Screen_Y; 
```

例子：

您在 300x700 的手机屏幕上触摸了 200,200。并将其发送到 1080x720 的 PC。

```
Position_X = 1080 * 200 / 300 = 720
Position_Y = 720 * 200 / 700 = 205 
```

请注意，您还需要考虑是否以纵向模式操作手机。在这种情况下，您应该传递 700x300 而不是 300x700。

```
Position_X = 1080 * 200 / 700 = 308
Position_Y = 720 * 200 / 300 = 480 
```

# visual-studio-2010 - VS2010 使用命令行参数调试

> ID：15736672
> 
> 赞同：4
> 
> 时间：2013-04-01T01:58:36.480
> 
> 标签：visual-studio-2010, bulletphysics, bullet

我已经在该`project properties -> debugging -> command arguments`部分中为我的应用程序设置了命令行参数。

如果我直接从命令行运行程序，我会这样做：

`progname arg1 arg2`

所以我将 VS 中的命令行参数设置为

`arg1 arg2,`

如此处所述[。](https://stackoverflow.com/questions/298708/debugging-with-command-line-parameters-in-visual-studio)

但是，该程序的运行方式似乎与从命令行运行它的方式不同。参数是文本文件，并且在命令行中它可以正确加载这些文本文件，在 VS2010 中它不会以某种方式加载。任何想法为什么？

* * *

***编辑：更新/澄清帖子：***

我没有任何例外。

我的解释可能过于简单化了这个问题。我实际上并没有加载文本文件，而是加载了一个物理引擎，它应该在运行时确定，所以我需要命令行参数。

在高层次上用于加载物理引擎的代码是：

```
if ( argc > 2 )
{
    #ifndef PAL_STATIC
        PF->LoadPALfromDLL(); 
    #endif
        //DebugBreak(); // for debugging ;)
        PF->SelectEngine(argv[1]);

        if (!pp) {
    #ifdef _WIN32
            MessageBox(NULL,L"Could not start physics!",L"Error",MB_OK);  

         /* ^ This is the error I am getting, i.e. pp is NULL, 
         so "PF->SelectEngine(argv[1]);" is not loading engine correctly */

    #else
            printf("Could not start physics engine %s!\n",argv[1]);
    #endif

    return -1;
}
```

我正在使用 Bullet，它的运行方式如下：

```
progname.exe arg1 arg2, 
```

`arg1`是物理引擎名称，`arg2`是要加载的物理文件，但它挂在`arg1`.

我在命令行上调用它的具体方式是：

```
progname.exe Bullet filename. 
```

如果我在命令行上执行此操作，它可以工作，但是如果我将这些参数传递给调试器，我会遇到问题`could not load physics engine`。

这可能是物理引擎加载器内部的结果，它来自另一个来源，但我的猜测是，无论我在命令行中还是在 VS 的调试器设置中传递这些参数，这应该以相同的方式工作。

我将查看 UAC 设置，看看他们说什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-21T13:38:08.187

[正如它在： https](https://msdn.microsoft.com/en-us/library/17w5ykft.aspx) ://msdn.microsoft.com/en-us/library/17w5ykft.aspx中所说，您可以尝试为每个“\”字符添加反斜杠，以在路径内转义它们。例如 ：

之前：“C:\somewhere\someplace\physics_engine”

之后：“C:\\somewhere\\someplace\\physics_engine”

# ruby-on-rails - 传递实例变量时如何在重定向中添加额外的参数？

> ID：15736673
> 
> 赞同：1
> 
> 时间：2013-04-01T01:58:57.727
> 
> 标签：ruby-on-rails

```
#in update function
redirect_to @post 
```

在这里，我想在重定向时添加一些额外的参数。但是，当我尝试添加

```
redirect_to @post, :mypara => 'abc' 
```

重定向到的页面在地址栏中没有此参数，所以我尝试使用打印出来

```
<%= params[:mypara] %> 
```

但仍然什么也看不到。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:06:03.580

你应该`post_path`这样使用：

```
redirect_to post_path(@post, :mypara => 'abc') 
```

这：

```
redirect_to @post 
```

实际上翻译为：

```
redirect_to post_path(@post) 
```

如果要传递额外的参数，则不能使用快捷方式。你必须使用`post_path`.

# combinations - 查找 n 个已排序元素的中间 k 组合的有效方法

> ID：15736676
> 
> 赞同：1
> 
> 时间：2013-04-01T01:59:31.517
> 
> 标签：combinations, median

假设我有一个由*n 个*元素组成的排序数组*N 。*现在，给定*k*，我需要一种高效的方法来生成中间组合的 k 组合（如果所有*k*组合都按字典顺序排序）。

 ***例子：

`N = {a,b,c,d,e} , k = 3`

1：`a,b,c`
2：`a,b,d`
3：`a,b,e`
4：`a,c,d`
5：`a,c,e`
6：`a,d,e`
7：`b,c,d`
8：`b,c,e`
9：`b,d,e`
10：`c,d,e`

我需要算法来生成组合号 5。

* * *

组合数系统上的维基百科页面解释了如何获得它（以贪婪的方式）。但是，由于*n*非常大，我需要找到所有*k*小于*n*的中间组合，我需要比这更有效的东西。

我希望由于兴趣的组合始终位于中间，因此有某种直接的方法可以找到它。例如，上面列表中的第一个 k 组合总是由*N中的前**k*个元素给出，类似地，最后一个组合总是由最后*k*个元素给出。有没有办法找到中间组合？

 **[http://en.wikipedia.org/wiki/Combinatorial_number_system](http://en.wikipedia.org/wiki/Combinatorial_number_system)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:32:22.573

如果您正在寻找一种从词典索引或唯一组合的排名中获取 K 索引的方法，那么您的问题属于二项式系数。二项式系数处理在总共有 N 个项目的 K 组中选择唯一组合的问题。

我用 C# 编写了一个类来处理处理二项式系数的常用函数。它执行以下任务：

1.  将任何 N 选择 K 的所有 K 索引以良好的格式输出到文件。K-indexes 可以替换为更具描述性的字符串或字母。

2.  将 K 索引转换为正确的词典索引或排序二项式系数表中条目的等级。这种技术比依赖迭代的旧已发布技术快得多。它通过使用帕斯卡三角形中固有的数学属性来做到这一点，并且与迭代集合相比非常有效。

3.  将已排序二项式系数表中的索引转换为相应的 K 索引。所使用的技术也比旧的迭代解决方案快得多。

4.  使用[Mark Dominus](http://blog.plover.com/math/choose.html)方法计算二项式系数，它不太可能溢出并且适用于更大的数字。

5.  该类是用 .NET C# 编写的，并提供了一种通过使用通用列表来管理与问题相关的对象（如果有）的方法。此类的构造函数采用一个名为 InitTable 的 bool 值，当它为 true 时，将创建一个通用列表来保存要管理的对象。如果此值为 false，则不会创建表。无需创建表即可使用上述 4 种方法。提供了访问器方法来访问表。

6.  有一个关联的测试类，它显示了如何使用该类及其方法。它已经通过多个案例进行了广泛的测试，并且没有已知的错误。

要了解此类并下载代码，请参阅[制表二项式系数](http://tablizingthebinomialcoeff.wordpress.com/)。

以下测试代码将计算任何 N 选择 K 组合的中值字典元素：

```
void TestMedianMethod()
{
   // This test driver tests out the GetMedianNChooseK method.
   GetMedianNChooseK(5, 3);  // 5 choose 3 case.
   GetMedianNChooseK(10, 3); // 10 choose 3 case.
   GetMedianNChooseK(10, 5); // 10 choose 5 case.
}

  private void GetMedianNChooseK(int N, int K)
  {
     // This method calculates the median lexicographic index and the k-indexes for that index.
     String S;
     // Create the bin coeff object required to get all
     // the combos for this N choose K combination.
     BinCoeff<int> BC = new BinCoeff<int>(N, K, false);
     int NumCombos = BinCoeff<int>.GetBinCoeff(N, K);
     // Calculate the median value, which in this case is the number of combos for this N
     // choose K case divided by 2.
     int MedianValue = NumCombos / 2;
     // The Kindexes array holds the indexes for the specified lexicographic element.
     int[] KIndexes = new int[K];
     // Get the k-indexes for this combination.  
     BC.GetKIndexes(MedianValue, KIndexes);
     StringBuilder SB = new StringBuilder();
     for (int Loop = 0; Loop < K; Loop++)
     {
        SB.Append(KIndexes[Loop].ToString());
        if (Loop < K - 1)
           SB.Append(" ");
     }
     // Print out the information.
     S = N.ToString() + " choose " + K.ToString() + " case:\n";
     S += "   Number of combos = " + NumCombos.ToString() + "\n";
     S += "   Median Value = " + MedianValue.ToString() + "\n";
     S += "   KIndexes = " + SB.ToString() + "\n\n";
     Console.WriteLine(S);
  } 
```

**输出：**

```
5 choose 3 case:
   Number of combos = 10
   Median Value = 5
   KIndexes = 4 2 0

10 choose 3 case:
   Number of combos = 120
   Median Value = 60
   KIndexes = 8 3 1

10 choose 5 case:
   Number of combos = 252
   Median Value = 126
   KIndexes = 9 3 2 1 0 
```

你应该能够很容易地将这个类移植到你选择的语言上。您可能不必移植类的通用部分来实现您的目标。根据您使用的组合数量，您可能需要使用比 4 字节整数更大的字长。*****

# java - Hadoop hdfs，java客户端无法连接hdfs

> ID：15736680
> 
> 赞同：1
> 
> 时间：2013-04-01T01:59:59.870
> 
> 标签：java, hadoop, hdfs

我正在尝试将我的 java 客户端连接到我的 hadoop HDFS，但是当我尝试从我的配置中获取 fs 时我被卡住了

```
Configuration conf = new Configuration();
conf.set("fs.default.name", _PATH_);
conf.set("fs.hdfs.impl", "org.apache.hadoop.hdfs.DistributedFileSystem");
FileSystem f = FileSystem.get( conf ); 
```

然后我得到这个exp..

```
java.lang.RuntimeException: class org.apache.hadoop.security.JniBasedUnixGroupsMappingWithFallback not org.apache.hadoop.security.GroupMappingServiceProvider 
```

我用谷歌搜索了它，但注意到少数人来了。有什么建议吗？

PS：我使用包 hadoop-common, hadoop-hdfs from 2.0.0-cdh4.2.0

谢谢安东尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:30:21.220

试试下面的代码：

```
Path coreSitePath = new Path("/path/of/HADOOP_HOME", "conf/core-site.xml");
conf.addResource(coreSitePath);
FileSystem fs = FileSystem.get(conf) 
```

# azure - 以编程方式使用移动服务

> ID：15736681
> 
> 赞同：1
> 
> 时间：2013-04-01T02:00:42.623
> 
> 标签：azure, azure-mobile-services

我最近一直在研究移动服务，我喜欢允许开发人员让用户使用他们想要的任何凭据（Facebook、Twitter、Microsoft 帐户等）登录并允许推送的身份验证和推送通知功能通知是通用的，因此不必为每个操作系统编写不同的代码。

但是，我的问题是移动服务似乎非常有限。具体来说，似乎唯一暴露的接口是直接对数据库执行操作。我似乎无法理解如何在通用 REST API 上实现移动服务身份验证。

例如，我看不到在 node.js 中做这样的事情的任何方法：

```
var express = require('express');
var azure = require('azure');
var app = express();

app.get('/nearbyFriends', function(req, res){
  if(azure.getUser(req).isAuthenticated()) { // pseudo code obviously
    // find and return nearby friends
  }
});

app.listen(3000); 
```

我的问题是，我似乎只使用移动服务来进行简单的数据存储，我不能真正使用它来制作一个更强大的 API，而只是碰巧利用了身份验证提供程序组件。

我注意到我可以更改某些操作的默认操作，但只需要修改 Windows Azure 页面上的脚本来执行可能重要的业务逻辑似乎是非常糟糕的设计，我仍然必须使用数据库来支持每个 REST 操作，这对我正在做的事情不一定有意义。

我错过了重点吗？移动服务不应该以我设想的方式使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T21:39:15.637

Azure 移动服务现在支持自定义 API 端点来精确执行您所描述的操作：http: [//msdn.microsoft.com/en-us/library/windowsazure/dn303368.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dn303368.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T08:58:32.087

移动服务目前仍处于预览阶段。您谈论的许多功能很可能会在将来添加，甚至是在不久的将来。今年的 Build 大会上可能会发布更多信息。我确实知道移动服务团队正在倾听并接受用户反馈，并且我相信随着时间的推移会添加新功能。

# clojure - 使用 core.logic 解决和积之谜

> ID：15736682
> 
> 赞同：1
> 
> 时间：2013-04-01T02:01:02.447
> 
> 标签：clojure, prolog, clojure-core.logic, minikanren

因此，我一直在尝试自学 clojure 和 core.logic，并决定尝试实现求和积问题的解决方案（[http://en.wikipedia.org/wiki/Impossible_Puzzle](http://en.wikipedia.org/wiki/Impossible_Puzzle)）。

到目前为止，我已经实现了前两个步骤。

```
(ns sum-product-problem.core
  (:refer-clojure :exclude [==])
  (:use clojure.core.logic)
  (:require [clojure.core.logic.fd :as fd]))

(def non-unique-factors
  (tabled [product]
    (fresh [p q x y]
      (fd/in p q x y (fd/interval 2 99))
      (fd/>= q p)
      (fd/* p q product)
      (fd/>= y x)
      (fd/* x y product)
      (fd/distinct [p x]))))

(defn inscruitable-summands [sum x]
  (fresh [y product]
    (conde
      [(fd/> (* 2 x) sum)]
      [(fd/in y (fd/interval 2 99))
       (fd/+ x y sum)
       (fd/* x y product)
       (non-unique-factors product)
       (inscruitable-summands sum (+ x 1))])))

(defn solution []
  (run* [q]
    (fd/in q (fd/interval 17 17))
    (inscruitable-summands q 2))) 
```

当域被限制为（解决方案）中的单个数字时，这似乎给出了正确的答案，但是如果我扩展该域，它会立即停止工作。

搜索单个成员域时的结果也包含多次答案。这似乎是由 inscruitable-summands 的每次递归引起的，但我不太确定为什么。

最后，我希望有人可以快速查看我的非唯一因素函数。感觉有点麻烦，我想知道是否有人可以提出更好的选择？

谢谢你的帮助，院长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:13:51.220

我不相信这个难题可以单独使用 CLP(FD) 工具来解决（尽管更精通 Prolog 的人可能能够回答这个问题），我在 Prolog 中看到的解决方案需要某种形式的子查询工具，例如`setof`.

# python - Python粘贴使用Bottle框架断管错误

> ID：15736685
> 
> 赞同：5
> 
> 时间：2013-04-01T02:01:24.007
> 
> 标签：python, paste

我正在使用实现 WSGI 请求和响应的 Bottle 框架，并且由于单线程问题，我将服务器更改为 PythonWSGIServer 并使用 Apache bench 进行了测试，但结果包括与此问题类似的错误损坏管道[如何防止 errno 32 损坏管道？](https://stackoverflow.com/questions/11866792/how-to-prevent-errno-32-broken-pipe). 我已经尝试了答案，但无济于事。

```
 Traceback (most recent call last):
  File "/Library/Python/2.7/site-packages/paste/httpserver.py", line 1068, in process_request_in_thread
    self.finish_request(request, client_address)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 641, in __init__
    self.finish()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/SocketServer.py", line 694, in finish
    self.wfile.flush()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

服务器代码如下所示，我不知道如何使用线程池改善连接？

```
from paste import httpserver

    @route('/')
    def index():
        connection = pymongo.MongoClient(connectionString)
        db = connection.test
        collection = db.test
        return str(collection.find_one())

    application = default_app()
    httpserver.serve(application, host='127.0.0.1', port=8082) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-08T23:45:30.033

问题在于 WSGIServer 是同步服务器，不适用于高并发用户同时发送请求。为了绕过这些回退，有很多第三方框架可以使用。其中流行的是 Gevent greenlet 库、Tornado 和 CherryPy。它们都基于事件驱动和异步方法，使它们能够处理多个并发用户。

# objective-c - UITableViewController 应用程序崩溃

> ID：15736686
> 
> 赞同：3
> 
> 时间：2013-04-01T02:01:33.723
> 
> 标签：objective-c, core-data, uitabbarcontroller, nsmanagedobject, freeze

`UITableViewController`滚动或时冻结：`viewDidAppear`。我看到当问题开始时，应用程序开始无法控制地分配对象。我有以下项目`iOS`：基本上从 下载信息`CoreData`，但是当我去显示表中的数据时，应用程序冻结（设备和模拟器）。但是如果我在下载的时候显示排列`NSLog`没有错误。代码如下：

> **我看到当问题开始时，应用程序开始无法控制地分配对象。**
> 
> *UITableViewController 在滚动或 viewDidAppear 时冻结：*

**表视图控制器.h**

```
@interface Set_ScheduleViewController : UITableViewController
{
    STCore *core;
    UILabel *label;
    NSArray *objects;
}
@end 
```

**表视图控制器.m：**

```
@implementation Set_ScheduleViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    core = [[STCore alloc] init];
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)reloadData
{
    NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES];
    objects = [core getAllClassesUsingSortDescriptions:@[sort]];
    [[self tableView] reloadData];
}

- (void)viewDidAppear:(BOOL)animated
{
    [self reloadData];
    [super viewDidAppear:animated];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [objects count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 120, 20)];
        label.textColor = [UIColor colorWithHex:0x88B6DB];
        label.font = [UIFont systemFontOfSize:12.0f];
        label.backgroundColor = [UIColor clearColor];
        label.textAlignment = UITextAlignmentRight;
        label.minimumFontSize = 12.0f;

        tableView.separatorColor = [UIColor colorWithHex:0xDAE1E6];

        cell.textLabel.backgroundColor = [UIColor clearColor];
        cell.textLabel.textColor = [UIColor colorWithHex:0x393B40];
        cell.textLabel.font = [UIFont boldSystemFontOfSize:16.0f];

        cell.detailTextLabel.backgroundColor = [UIColor clearColor];
        cell.detailTextLabel.textColor = [UIColor colorWithHex:0x393B40];
        cell.detailTextLabel.font = [UIFont systemFontOfSize:12.0f];
    }

    cell.textLabel.text = [[objects objectAtIndex:indexPath.row] name];
    cell.detailTextLabel.text = [[objects objectAtIndex:indexPath.row] location];

    STMultipleDate *dates = [STMultipleDate new];
    for (Schedule *sch in [[objects objectAtIndex:indexPath.row] schedule]) {
        STDate *date = [STDate new];
        [date setWeekday:[[sch day] integerValue]];
        [date setHour:[[sch hour] integerValue]];
        [date setMinutes:[[sch minutes] integerValue]];

        [dates addDate:date];
    }

    label.text = [STCore splitDates:dates];
    cell.accessoryView = label;
    return cell;
}

- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section
{
    if ([objects count] < 1) {
        return NSLocalizedString(@"SETSCH_FOOTER_DEFAULT_404", @"");
    }
    return nil;
} 
```

**STCore.m**

```
- (NSArray *)getAllClassesUsingSortDescriptions:(NSArray *)descs
{
    if (![self isReady]) {
        return @[];
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Classes" inManagedObjectContext:_context];

    [fetchRequest setEntity:entity];
    [fetchRequest setSortDescriptors:descs];

    NSError *error;
    NSArray *returned = [_context executeFetchRequest:fetchRequest error:&error];

    if (error) {
        [_delegate core:self didRecivedAnError:error];
    }

    return returned;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:25:50.117

在您`viewDidLoad`中，您使用 锁定上下文`[[core context] lock];`，这导致您`getAllClassesUsingSortDescriptions`等待锁定清除。取下锁。

# php - 如何确保用户只在我的网页上点击一次，比如“喜欢”按钮

> ID：15736687
> 
> 赞同：1
> 
> 时间：2013-04-01T02:01:39.130
> 
> 标签：php, javascript, session

我的网页上有 javascript/php/ 和 mysql，所以任何想法都会有帮助。用例：任何人访问网页并点击喜欢按钮，这就是他不能继续点击“喜欢”按钮。我应该在php中使用会话吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:05:47.607

我已经很长时间没有这样做了，但我认为有某种方法可以在单击后禁用按钮，也许这有助于[http://forums.asp.net/t/1235703.aspx/1](http://forums.asp.net/t/1235703.aspx/1)使用 js

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:17:12.887

最好将其视为与 cookie 缓存相结合的幂等操作，该 cookie 缓存隐藏了某些东西已被“喜欢”的事实。

点赞是一个操作，“*确保该用户喜欢这个东西*”。

在他们单击按钮后，使用将 AJAX 发送到服务器的 JS 将其锁定，然后将类似内容存储在存储喜欢对象数组的 cookie 中。*如果页面被刷新，除非cookies和*“likes”的SQL表中没有like，否则不要让它可点击。（因此您支持将其锁定在服务器端和客户端）。

如果客户端 cookie 不符合后备存储“真相”，请不要忘记使缓存的点赞无效。

这应该是一个足够复杂的方法来解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T02:04:34.397

存储，存储，存储。当某人通过会话登录时，喜欢/评论......然后将该人的ID存储在特定行中，您可以将它们一起存储在数据库中，`IP`然后`USER Agent`就像获取该行一样简单，并且搜索用户`id`以检查他/她是否已经喜欢。

只是一个插图..

```
if($_POST['check']) {

$like = $_POST['like'];
$ip = $_SERVER['REMOTE_ADDR'];
$browser = $_SERVER['HTTP_USER_AGENT'];

//mysql_query goes here

} 
```

# c - Ubuntu 12.4 上的报警系统调用

> ID：15736690
> 
> 赞同：3
> 
> 时间：2013-04-01T02:01:52.807
> 
> 标签：c, ubuntu, signals, virtualbox

我个人讨厌这类问题，但我被困住了。我有一个正在尝试在**Ubuntu 12.4上运行的程序** *（内核：Linux 3.2.0-39-generic-pae #62-Ubuntu SMP i686 i686 i386 GNU/Linux；编译器：gcc（Ubuntu/Linaro 4.6.3- 1ubuntu5）4.6.3）*：

```
#include    <stdio.h>
#include    <signal.h>
#include    <unistd.h>

/*
 * sleep1.c
 *      purpose show how sleep works
 *      usage   sleep1
 *      info    sets handler, sets alarm, pauses, then returns
 */

int main()
{
    void    onbell(int);

    printf("about to sleep for 4 seconds\n");
    signal(SIGALRM, onbell);            /* catch it */
    alarm(4);                   /* set clock    */
    pause();                    /* do nothing   */
    printf("Morning so soon?\n");           /* back to work */
    return 0;
}

void
onbell(int s)
{
    printf("Alarm received from kernel\n");
} 
```

问题是，*SIGALRM*永远不会通过。如果我在上面运行*strace*，最后三行是：

```
rt_sigaction(SIGALRM, {0x80484c1, [ALRM], SA_RESTART}, {SIG_DFL, [], 0}, 8) = 0
alarm(4)                                = 0
pause( 
```

暂停永远不会回来。当我在使用内核报告自身的系统上运行相同的代码时*：Linux 2.6.24-32-generic i686 GNU/Linux；编译器：gcc (GCC) 4.2.4 (Ubuntu 4.2.4-1ubuntu4)*使用 strace 运行的相同代码显示：

```
rt_sigaction(SIGALRM, {0x8048470, [ALRM], SA_RESTART}, {SIG_DFL}, 8) = 0
alarm(4)                                = 0
pause()                                 = ? ERESTARTNOHAND (To be restarted)
--- SIGALRM (Alarm clock) @ 0 (0) ---
write(1, "Alarm received from kernel\n", 27Alarm received from kernel
) = 27 
```

知道为什么在**Ubuntu 12.4**系统上从未收到警报，或者可以做些什么来弄清楚发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:19:10.680

您不能从信号处理程序中安全地调用 printf() 或相当数量的其他 i/o 函数。它有时有效，但不可靠。它不是异步信号安全的。查看其他列表：http: [//man7.org/linux/man-pages/man7/signal.7.html](http://man7.org/linux/man-pages/man7/signal.7.html)

然而，它有时会“意外”起作用，使人们认为它通常是可以接受的。

尝试在信号处理程序内增加一个变量，然后在信号处理程序外检查它的值是否发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:10:38.770

我认为问题在于信号永远不会被触发的可能性。毕竟，strace 显示`rt_sigaction`返回 0 表示设置信号配置成功。我认为`SIGALRM`信号根本没有被发送。

**编辑**：似乎是这样。我希望@Gonzalo 不介意我引用他发布的标题为“SIGALRM 永不触发”的 VirtualBox[票证。](https://www.virtualbox.org/ticket/10585)你说你在虚拟盒子上测试。它似乎确实反映了这种行为。

# api - Windows 认证工具包中支持的 API 错误

> ID：15736691
> 
> 赞同：0
> 
> 时间：2013-04-01T02:02:09.380
> 
> 标签：api, window, app-certification-kit, wack

我正在开发 Windows 8 应用程序，当我使用 Windows 认证工具包测试该应用程序时，它抛出了一个错误，即该应用程序类型不支持的 API，如下所示，

此应用程序类型不支持 MSCORLIB 中的 API System.Reflection.CustomAttributeNamedArgument.get_MemberInfo，PUBLICKEYTOKEN=B77A5C561934E089。Microsoft.VisualStudio.TestPlatform.Extensions.MSAppContainerAdapter.dll 调用此 API。

我应该怎么办 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:09:09.297

这可能是因为您在构建中包含了测试项目。尝试删除对测试项目的引用并将其从构建中排除，看看是否仍然出现错误。

# c# - 向 C# 异步回调场景添加强大的超时？

> ID：15736693
> 
> 赞同：0
> 
> 时间：2013-04-01T02:02:36.030
> 
> 标签：c#, .net, windows-phone-7, asynchronous, async-await

我在 MSDN 上遇到了这个 C# 代码示例，它展示了如何使用委托来包装异步 DNS 查找操作的回调方法：

[http://msdn.microsoft.com/en-us/library/ms228972.aspx](http://msdn.microsoft.com/en-us/library/ms228972.aspx)

从代码中可以看出，每次请求的发起方法都会增加一个计数器，每次执行回调方法时，计数器就会减少一次。初始化方法处于循环中，直到计数器达到零，在等待时保持 UI 更新。我在示例中没有看到的是一种稳健的方法，用于在过程花费太长时间时使启动方法超时。我的问题是：

*   在这个例子中建立一个健壮的超时机制的好方法是什么？如果决定中止整个操作，是否有必要进行任何调用以清理任何未决的 DNS 查找？如果有人知道在此调用/回调对场景中演示强大的超时处理的良好资源或示例，我想知道它。

*   自 VS2012 以来添加 的*async-await*模式是否更好地服务于这种情况？

*   是否有与在 Windows Phone 上下文中执行相关的任何提示或特定领域的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:44:38.740

Dns 类特别没有取消请求的功能。一些 API 会（生成的 WCF 代理），而另一些则不会（Dns 和许多其他 API）。

至于您的问题（在超时的情况下回答）：

1.  有多种方法可以使 uber-request（包装多个 DNS 请求的异步请求）超时。可以简单地检查代码调用 UpdateUserInterface 的时间。在本示例的上下文中，这将是最简单的方法（尽管对于大多数现实世界的场景来说可能会达不到要求，除非您愿意占用一个线程来执行此操作）。至于清理 - 如果您的意思是在操作完成后清理内存，那将会发生（除非存在库错误）。如果您的意思是清理以节省资源，那么事实是大多数人在大多数情况下都不会打扰。成本和增加的复杂性（再加上它是“较少经过的路径”意味着较少的测试这一事实）意味着应该中止的调用通常会被搁置并在自己的甜蜜时间完成。

2.  如果您可以访问它，使用 Tasks (await/async) 执行非阻塞超时实际上是非常引人注目的。您需要做的就是以下（伪代码）：

    异步任务> GetAddresses(IEnumerable hosts, int timeoutms) { List> tasks = new List>(); foreach (var host in hosts) { tasks.Add(GetEntryAsync(host); } var wait = Task.Delay(timeoutms); // 创建一个在时间过去时触发的任务 var any = await Task.WhenAny( wait, Task.WhenAll(tasks)); // 等待超时或所有 dns 请求。 if (any == wait) { throw new MyTimeoutException(); }

    return tasks.Select(t => t.Result).ToArray(); // 还应该在这里检查异常。}

3.  真的没有提示.. 很大一部分异步操作甚至是不可取消的，至少在我看来，不值得仅仅为了获得取消语义而重写。

# javascript - 如何获得滑块引导程序的值？

> ID：15736694
> 
> 赞同：21
> 
> 时间：2013-04-01T02:02:49.663
> 
> 标签：javascript, twitter-bootstrap, slider, bootstrap-slider

如何将滑块引导的值获取到隐藏的输入？

```
<input type="hidden" name="min_value" id="min_value" value="">
<input type="hidden" name="max_value" id="max_value" value=""> 
```

```
$(function () {
  $("#slider-range-s1").slider({
    range: true,
    min: 0,
    max: 500,
    value: [0, 500]
  });
}); 
```

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-05-19T05:34:41.137

我认为它目前已损坏。

文档指出：

> 方法
> 
> .slider('getValue')
> 
> 获取价值。

然而，调用`$('#sliderDivId').slider('getValue')`返回 jQuery 选择器而不是值......

现在您可以手动从数据对象中获取它... `$('#sliderDivId').data('slider').getValue()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-10T18:56:59.837

快速修复：

```
$.fn.slider = function (option, val) {

    if (typeof option == 'string') {
        if (this.length) {
            var data = this.eq(0).data('slider');
            if (data)
                return data[option](val);

            return null;
        }
    }

    return this.each(function () {
        var $this = $(this),
            data = $this.data('slider'),
            options = typeof option === 'object' && option;
        if (!data) {
            $this.data('slider', (data = new Slider(this, $.extend({}, $.fn.slider.defaults, options))));
        }
    })
}; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-26T13:03:36.970

问题是，有超过 1 个具有相同 ID 的元素（滑块*div*和滑块 div 内的*输入*）*，*在此示例中为 $('#sliderDivId')。如果使用 JQuery 选择输入元素，则可以使用滑块 API。

 *```
$('input[id="sliderDivId"]').slider('getValue') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-26T20:18:00.473

在撰写本文时它有点不稳定，但你可以让它工作：

1/ 确保您指定了一个以“value[0]”开头的空范围。除非您这样做，否则它的内部值字段将变为未定义，例如

```
$('#setBidDialogSlider').slider({ value: [0], max: max, step: 0.2, formater: function(v) { return v.toFixed(2)+"BTC" } }); 
```

2/ 现在你终于可以捕捉到事件中的价值了

```
$('#setBidDialogSlider').slider().on('slide', function(ev) {
    $scope.dialog.order_value = ev.value*$scope.dialog.price;
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-19T04:45:33.030

我知道我迟到了，但这仍然是坏的，但要修复它打开`bootstrap-sliders.js`并注入这三件事：

第一个功能的最后`Slider`：

```
this.calculateValue(); 
```

* * *

之前：`return val;`在`calculateValue`函数中

```
grandVal = val; 
```

* * *

函数后`$.fn.slider`：

```
$.fn.sliderValue = function(){
    return grandVal;
};
var grandVal; 
```

现在您可以通过以下方式访问该值`$('#MySliderId').sliderValue()`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-13T02:20:19.250

您可以从内置函数中使用它

```
$( "#slider-range-s1" ).slider({
    range: true,
    min: 0,
    max: 500,
    value: [ 0, 500 ]
    slide: function( event, ui ) {
        // u could use this function
        $(".min-slider-value").html( "$" + ui.values[ 0 ]);
        $(".max-slider-value").html( "$" + ui.values[ 1 ]);
    },
    change: function(event, ui) {
        // or u could use this function
        $(".min-slider-value").html( "$" + ui.values[ 0 ]);
        $(".max-slider-value").html( "$" + ui.values[ 1 ]);
    }
}); 
```

谢谢你，我想我可以和你们分享这个：D*

# javascript - 如何使用 JS 或 jQuery 从另一个网站获取 div/class 中的文本？

> ID：15736696
> 
> 赞同：2
> 
> 时间：2013-04-01T02:03:06.497
> 
> 标签：javascript, jquery, class, html, datalife-engine

我有一个做电影评论的网站。该网站是使用datalife引擎制作的，据我所知，对DLE知之甚少，没有办法使用插件。

我正在尝试构建简单的代码，以获取 IMDB 网站上 DIV 中的文本，并在我的网站上打印出来。我正在寻找的是一种在我查看电影时提供电影 IMDB 链接的方法，脚本获取类名为“titlePageSprite star-box-giga-star”的元素并将其打印在我的网站。

我一直在寻找这个，据我所知，最好的方法是使用jquery（我对btw一无所知），当我实现我认为正确的代码时，它根本不会打印任何内容。 ..

我测试的是这个把这个放在标签之间

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script> 
```

（如果你问的话，我想我已经尝试过使用 jquery 1.9 的链接）

然后把这个放在身上进行测试：

```
<script type="text/javascript">
jQuery(function($){
    $('#result').load('http://www.imdb.com/title/tt2306299/ #titlePageSprite star-box-giga-star');
});
</script> 
```

并在我想打印的地方测试打印

```
<div id="result"></div> 
```

什么都没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:09:38.127

您的示例显示了所谓的跨域请求 (CORS)，除非目标网站 (imdb) 允许这样做，否则您将在浏览器控制台中看到错误，而不是预期的结果。

# eclipse - eclipse jvm崩溃

> ID：15736697
> 
> 赞同：0
> 
> 时间：2013-04-01T02:03:20.577
> 
> 标签：eclipse

我遇到一个问题，当我启动 Eclipse 时，它​​总是提醒我：JVM 已终止。退出代码=13

```
/usr/bin/java
-Dosgi.requiredJavaVersion=1.5
-Dhelp.lucene.tokenizer=standard
-XX:MaxPermSize=256m
-Xms40m
-Xmx256m 
```

我真的不知道如何解决，我以前在我的linux系统中安装过eclipse，但是我不知道为什么我更换新版本的eclipse后它开始提醒我这个错误，之前安装的eclipse已被删除.请帮我解决它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T07:57:22.633

尊敬的先生，您的 Eclipse 和 JVM 版本可能不兼容。请通过以下链接找到答案：

[http://faisalbhagat.blogspot.com/2013/08/jvm-exit-code-13.html](http://faisalbhagat.blogspot.com/2013/08/jvm-exit-code-13.html)

# haskell - 交换列表的前两个元素，（Haskell）

> ID：15736698
> 
> 赞同：2
> 
> 时间：2013-04-01T02:03:48.287
> 
> 标签：haskell, syntax-error, swap

为了交换列表的前两个元素，我编写了以下代码：

```
swap_first_two_elements :: [a]->[a]
swap_first_two_elements list=case list of
  x:y:_ -> y:x:_
  [x] -> Nothing
  []-> Nothing 
```

但是，终端显示如下所示的错误：

```
[1 of 1] Compiling Main             ( test.hs, interpreted )

test.hs:3:16: Pattern syntax in expression context: _
Failed, modules loaded: none.
Prelude> 
```

谁喜欢告诉我它有什么问题？

顺便说一句，我还尝试将最后两行合并为：

```
[x] || [] ->Nothing 
```

怎么错了？终端显示：

```
test.hs:4:3: Parse error in pattern: [x] || []
Failed, modules loaded: none. 
```

谁喜欢告诉我它有什么问题？谢谢XD

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T02:33:35.923

错误是您不能`_`在分支的结果中使用。 `_`保留以指示未使用的变量。如果要重用列表的尾部，则必须将其绑定到另一个名称：

```
swap_first_two_elements :: [a]->[a]
swap_first_two_elements list = case list of
  x:y:xs -> y:x:xs
  [x]    -> Nothing
  []     -> Nothing 
```

但是，如果你编译它，你会得到另一个错误。您的案例分支返回不同类型的值。第一个分支返回 type 的值`[a]`，但您的第二个和第三个分支返回 type 的值`Maybe [a]`。要修复它，您必须将第一个分支包装在 a 中`Just`（并修复您的类型签名以指示您正在返回`Maybe [a]`而不是返回`[a]`）：

```
swap_first_two_elements :: [a] -> Maybe [a]
swap_first_two_elements list = case list of
  x:y:xs -> Just (y:x:xs)
  [x]    -> Nothing
  []     -> Nothing 
```

最后的改进是您可以通过对所有内容使用后备模式匹配将最后两个案例分支合并为一个：

```
swap_first_two_elements :: [a] -> Maybe [a]
swap_first_two_elements list = case list of
  x:y:xs -> Just (y:x:xs)
  _      -> Nothing 
```

# jquery - 重用fancybox，销毁活动实例，然后重新调用它？

> ID：15736701
> 
> 赞同：1
> 
> 时间：2013-04-01T02:04:11.943
> 
> 标签：jquery, fancybox, fancybox-2

好的，所以在我看来这很简单，但我无法弄清楚。

假设您有一个 fancybox（使用 FB 2.1.4），代码开头如下：

```
$(document).ready(function() {
 $("#Button").click(function() {
  $.fancybox({
   padding    : 15,
   href       : "#FormAjax",
   afterClose : function(){
    $("#Error").hide();
   }
  });
 }); 
```

现在假设您将其绑定为：

```
 $("#FormAjax").bind("submit", function() { 
```

然后你继续这个功能，做很多事情，等等。然后，一旦说完了，你就刷新了页面上的一个 div，并包含一个调用来编辑你刚刚做的事情（因此，你想要相同的重新打开fancybox，所有代码都可以重新运行。

问题是，据我所知，jQuery 将 active 参数设置为 1，并且需要将其恢复为 0 才能重新运行。

我已经阅读过 removeData()、.remove()、.clone() 和 .detach()，我从未尝试过这些，因为我不明白如何使用它们，以及 jQuery 网站上的示例，我不能做出正面或反面，或者我应该说，我不明白如何将这种类型的函数推断为不同的东西。我还尝试将 fancybox 代码包装在一个 div 中并用新的 JavaScript 代码刷新 div（当我用新的 HTML 刷新它时它可以工作，但当我尝试 JS 时它不起作用）。

提前感谢您的任何帮助。

# asp.net - 使用 ASP.NET MVC 添加发票行

> ID：15736709
> 
> 赞同：4
> 
> 时间：2013-04-01T02:05:05.177
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, asp.net-mvc-4, visual-studio-2012

我正在使用 MVC 4 技术创建 ASP.NET 应用程序，并且我希望允许最终用户在发票上输入行项目。我希望用户能够在发票中添加任意数量的行项目，然后当他们完成后能够单击表单上的保存按钮，然后将发票和所有行项目数据写入数据库。有人可以帮助指导我如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-19T13:50:32.060

这是我在其他几个想法失败后决定这样做的方式。这听起来可能很奇怪，但请多多包涵。我使用 MVC 索引视图作为基础。

在用户看到发票之前，我将一个新的发票添加到数据库中，这样我就有了一个发票 ID。然后我显示发票索引视图。但`@foreach (var item in Model)`我没有将表格显示为`@foreach (var item in Model.LineItems)`. 现在它是空白的，但是在我添加一些 LineItsms 之后，我将显示一个 LineItems 列表——这正是发票的内容。

但我们也希望能够添加我们的发票索引视图。因此，在索引视图的顶部，在您可以编码的部分，创建一个新的 LineItem 并将其 LineItem.invoiceID 保存为 Model.ID。然后在显示 LineItems 表之前添加部分视图 - 创建 LineItem。

现在，您可以在页面上添加新的发票行列表。

以下是 LineItem 的索引视图中的一些代码：

```
@model MyAppName.Models.Invoice

@{
    ViewBag.Title = "Index";
    MyAppName.Models.LineItem line = new LineItem();
    line.invoiceID = Model.ID;
}

<h2>Invoice</h2>

@Html.Partial("Create", line)

<table>
    <tr>
        <th>
            @Html.DisplayName("Amount")
        </th>
        <th>
            @Html.DisplayName("Description")
        </th>
        <th></th>
    </tr>

@foreach (var item in Model.LineItems)
{
    <tr>
        <td>
@Html.DisplayFor(modelItem => item.Amount)
        </td> 
```

```
@Html.DisplayFor(modelItem => item.Description
    </td>
    <td>
        @Html.ActionLink("Delete", "DeleteConfirmed", new { id = item.invoiceID })
    </td>
    </tr>
}
    <tr>
        <th>Total</th>
        <th>R @Model.LineItems.Sum(amt => amt.Amount)</th>
        <th></th>
        <th></th>
    </tr>
</table> 
```

这是它的样子（除了我的不是发票）：

![截屏](https://i.stack.imgur.com/ModCe.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:41:06.683

你想要这样的[东西](http://jsfiddle.net/Bw5Ey/4/ "这个")。但是对于您的情况，情况会复杂得多。使用 jquery 来简化您的工作。

```
$('#add_item').click(function() {
    $('#invoice_listing tbody')
        .append(
            "<tr><td>" + $('#item').val() + "</td>" +
            "<td>" + $('#amount').val() + "</td></tr>"
        )
}); 
```

在添加每个行项目时，[添加项目] 按钮将触发一个事件，以将行项目数据的 ajax 发布到 MVC 控制器。然后控制器将执行业务逻辑并将行项目数据存储到数据库中。一旦事务成功，控制器应该向客户端浏览器返回一个“成功”标志。使用 JSON 会有所帮助。您的 javascript 应该识别“成功”标志，并将该项目添加到项目列表中。

最后，用户将按下[保存]按钮，完成整个发票数据输入。然后，您应该将发票标记为成功输入。

尽量不要让用户在未保存的情况下继续添加订单项。当添加项目行后保存失败时，他们会生气。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-01T02:12:08.587

有一个弹出窗口，您的用户可以在其中搜索订单项并添加它们。选择后捕获`ItemId`并使用它来构建一行，可能是 a`tr`或 a `div`。因此，对于每个包含行项目的行项目，您将拥有一个`tr`或，然后是一个或两个文本框。说一个文本框的数量和另一个价格。然后要么做一个 ajax 发布，你迭代所有的 div 并将该信息作为 json 数据并将其发布到你的控制器方法。或者格式化每个 div，您的绑定可以收集它们并在您进行回发时提交 - 通过您的提交按钮。那应该让你开始。`div``Id`

# xslt - 如何在不知道节点名称的情况下使用 XSLT 将 XML 转换为 CSV

> ID：15736710
> 
> 赞同：1
> 
> 时间：2013-04-01T02:05:17.807
> 
> 标签：xslt

我想使用 XSLT 解析 XML 文件并将其转换为 CSV 格式。XML 格式如下所示：

```
 <a:level1>
              <a:level2>
                <b:level3">
                  <b:date a:value="TODAY">
                    <c:level4>
                      <d:level5>
                        <d:level6 a:value="AAA">
                          <d:level7 a:value="AAA_AAA">
                            <d:level8 a:value="XXX/123">
                              <d:leaf a:value="150415">
                                <b:leaf1>100</b:leaf1>
                                <b:leaf2>100</b:leaf2>
                              </d:leaf>
                              <d:leaf a:value="200814">
                                <b:leaf1>1961</b:leaf1>
                                <b:leaf2>1961</b:leaf2>
                              </d:leaf>
                            </d:level8>
                          </d:level7>
                        </d:level6>
                        <d:level6 a:value="BBB">
                          <d:level7 a:value="BBB_BBB">
                            <d:level8 a:value="XXX/123">
                              <d:leaf a:value="1505">
                                <b:leaf1>0.42</b:leaf1>
                                <b:leaf2>0.42</b:leaf2>
                              </d:leaf>
                            </d:level8>
                          </d:level7>
                        </d:level6>
                      </d:level5>
                    </c:level4>
                  </b:date>
                </b:level3>
              </a:level2>
            </a:level1> 
```

目标是仅提取具有值的节点并将节点名称用作标题。输出 CSV 文件将如下所示：

```
 date, level6, leve7, level8, leaf, leaf1, leaf2
            TODAY, AAA , AAA_AAA, XXX/123, 150415, 100,100
            TODAY, AAA , AAA_AAA, XXX/123, 200814, 1961,1961
            TODAY, BBB , BBB_BBB, XXX/123, 1505, 0.42,0.42 
```

我是 XSLT 的新手，你有关于如何在 CSV 中构造标题和行的示例吗？节点 level6、level7、level8、leaf 的名称可能在不同的文件中发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:14:06.247

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:a="some:a">
 <xsl:output method="text"/>

 <xsl:variable name="vFirstLeaf" select=
 "(//*[@a:value][not(descendant::*[@a:value])])[1]"/>

 <xsl:variable name="vAllLevels" select=
 "$vFirstLeaf/ancestor-or-self::*[@a:value]
 |
  $vFirstLeaf/*
 "/>

 <xsl:template match="/">
  <xsl:apply-templates select="$vAllLevels" mode="title"/>
  <xsl:text>&#xA;</xsl:text>
  <xsl:apply-templates mode="lastNormal" select=
  "//*[@a:value and not(descendant::*[@a:value])]"/>
 </xsl:template>

 <xsl:template match="*" mode="title">
  <xsl:if test="not(position()=1)">, </xsl:if>
  <xsl:value-of select="local-name()"/>
 </xsl:template>

 <xsl:template match="*" mode="lastNormal">
  <xsl:apply-templates mode="value"
    select="ancestor-or-self::*[@a:value]"/>
  <xsl:apply-templates select="*"/>
  <xsl:text>&#xA;</xsl:text>
 </xsl:template>

 <xsl:template match="*" mode="value">
  <xsl:if test="not(position()=1)">, </xsl:if>
  <xsl:value-of select="@a:value"/>
 </xsl:template>

 <xsl:template match="*">
  <xsl:text>, </xsl:text>
  <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<a:level1 xmlns:a="some:a" xmlns:b="some:b"
          xmlns:c="some:c" xmlns:d="some:d">
    <a:level2>
        <b:level3>
            <b:date a:value="TODAY">
                <c:level4>
                    <d:level5>
                        <d:level6 a:value="AAA">
                            <d:level7 a:value="AAA_AAA">
                                <d:level8 a:value="XXX/123">
                                    <d:leaf a:value="150415">
                                        <b:leaf1>100</b:leaf1>
                                        <b:leaf2>100</b:leaf2>
                                    </d:leaf>
                                    <d:leaf a:value="200814">
                                        <b:leaf1>1961</b:leaf1>
                                        <b:leaf2>1961</b:leaf2>
                                    </d:leaf>
                                </d:level8>
                            </d:level7>
                        </d:level6>
                        <d:level6 a:value="BBB">
                            <d:level7 a:value="BBB_BBB">
                                <d:level8 a:value="XXX/123">
                                    <d:leaf a:value="1505">
                                        <b:leaf1>0.42</b:leaf1>
                                        <b:leaf2>0.42</b:leaf2>
                                    </d:leaf>
                                </d:level8>
                            </d:level7>
                        </d:level6>
                    </d:level5>
                </c:level4>
            </b:date>
        </b:level3>
    </a:level2>
</a:level1> 
```

**产生想要的正确结果**：

```
date, level6, level7, level8, leaf, leaf1, leaf2
TODAY, AAA, AAA_AAA, XXX/123, 150415, 100, 100
TODAY, AAA, AAA_AAA, XXX/123, 200814, 1961, 1961
TODAY, BBB, BBB_BBB, XXX/123, 1505, 0.42, 0.42 
```

# asp.net - 无法从同一目录访问子网页 aspx

> ID：15736716
> 
> 赞同：1
> 
> 时间：2013-04-01T02:05:43.303
> 
> 标签：asp.net, url-rewriting

我输入 `Context.RewritePath("/users/abc/default.aspx", False)` 了 Global.asax Application_BeginRequest

当我点击**www.mydomain.com**时，它会根据需要打开用户 default.aspx 页面。（原始位置是**www.mydomain.com/users/abc/default.aspx**）。

现在的问题是在同一位置 /users/abc/profile.aspx 有一个文件名 profile.aspx （实际位置是**www.mydomain.com/users/abc/profile.aspx**）并且它不起作用。

我尝试打开 **www.mydomain.com/profile.aspx、www.mydomain.com/users/abc/profile.aspx**但这些都没有链接或实时打开...我在哪里做错了？

# r - 如何从命名号码（没有名称）中仅提取号码？

> ID：15736719
> 
> 赞同：104
> 
> 时间：2013-04-01T02:05:59.473
> 
> 标签：r, vector, named, lm

我正在寻找`B1(newx)`线性模型系数的值，而不是名称。我只想要 0.5 的值。我不想要“newx”这个名字。

```
newx <- c(0.5,1.5.2.5)

newy <- c(2,3,4)

out <- lm(newy ~ newx) 
```

`out`好像：

```
Call:
lm(formula = newy ~ newx)

Coefficients:
(Intercept)         newx  
       1.5         1.0 
```

我到了这里。但现在我被困住了。

```
out$coefficients["newx"]

newx 

1.0 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2013-04-01T02:09:47.813

对于这样的单个元素，请使用`[[`而不是`[`. 比较：

```
coefficients(out)["newx"]
# newx 
#    1 

coefficients(out)[["newx"]]
# [1] 1 
```

更一般地说，使用`unname()`：

```
unname(coefficients(out)[c("newx", "(Intercept)")])
# [1] 1.0 1.5

head(unname(mtcars))
#                     NA NA  NA  NA   NA    NA    NA NA NA NA NA
# Mazda RX4         21.0  6 160 110 3.90 2.620 16.46  0  1  4  4
# Mazda RX4 Wag     21.0  6 160 110 3.90 2.875 17.02  0  1  4  4
# Datsun 710        22.8  4 108  93 3.85 2.320 18.61  1  1  4  1
# Hornet 4 Drive    21.4  6 258 110 3.08 3.215 19.44  1  0  3  1
# Hornet Sportabout 18.7  8 360 175 3.15 3.440 17.02  0  0  3  2
# Valiant           18.1  6 225 105 2.76 3.460 20.22  1  0  3  1

## etc. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2020-02-01T12:47:02.823

如果问题是关于删除名称，另一种方法是在这里

```
my_vec <- # some quantile function(returns named vector)
names(my_vec) <- NULL
my_vec
## [1] 1 2 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-03T18:56:30.927

另一种方法是使用`broom`包：

```
broom::tidy(out)$estimate[1]
#1.5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-23T07:49:15.163

一个简单而直接的方法是

```
as.numeric(out$coefficients["newx"]) 
```

# java - 每次编译时，我都会收到找不到符号的错误

> ID：15736725
> 
> 赞同：0
> 
> 时间：2013-04-01T02:06:41.363
> 
> 标签：java, jscrollpane, jtextarea, joptionpane

我是 JTextArea 和 JScrollPane 的新手，每当我编译时都会收到此错误，Project3.java:95: cannot find symbol symbol : class Dimension location: class Project3 scroll.setPreferredSize(new Dimension(200, 400));

有人可以帮帮我吗？

```
 JTextArea listBox = new JTextArea(input);
    JScrollPane scroll = new JScrollPane(listBox);  
    listBox.setLineWrap(true);  
    listBox.setWrapStyleWord(true); 
    scroll.setPreferredSize(new Dimension(200, 400));
    JOptionPane.showMessageDialog(null, scroll, "Dictionary enteries" JOptionPane.PLAIN_MESSAGE);

   return aLineFromFile; 
```

这是完整的方法。

```
 public static String listDictionary()throws IOException
{
   String input = "";
   BufferedReader br = new BufferedReader(new FileReader("dictionary.txt"));
   String aLineFromFile = null;

   while((aLineFromFile = br.readLine()) != null)
   {
        input += aLineFromFile + "\n";
   }
   br.close();
    JTextArea listBox = new JTextArea(input);
    JScrollPane scroll = new JScrollPane(listBox);  
    listBox.setLineWrap(true);  
    listBox.setWrapStyleWord(true); 
    scroll.setPreferredSize(new Dimension(200, 400));
    JOptionPane.showMessageDialog(null, scroll, "Dictionary enteries", JOptionPane.PLAIN_MESSAGE);

   return aLineFromFile;
} 
```

我已经导入，导入java.io。*; 导入 javax.swing。*; 导入 java.util.*；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:07:33.493

维度在[java.awt](http://docs.oracle.com/javase/1.5.0/docs/api/java/awt/class-use/Dimension.html)中，所以添加`import java.awt.Dimension;`

我建议使用 Eclipse 或 Netbeans。他们会告诉你，你需要像这样添加导入。

# php - php_self 有问题

> ID：15736727
> 
> 赞同：0
> 
> 时间：2013-04-01T02:06:53.087
> 
> 标签：php, mysql

我正在尝试实现一个用户输入评论并在同一页面中显示的页面。我遇到的问题是，每次您访问该页面时，页面中都没有评论（实际上有评论）。这是我的场景：

1.  我转到页面，没有评论，我输入评论“你好”，它会立即显示。
2.  我转到另一个页面，然后我回到评论页面并且没有评论。（评论“你好”应该已经显示）
3.  我输入评论“hi”，评论“hello”和“hi”都会显示

我解决不了这个问题。。

这是我的代码，很长

```
 <?php
 session_start(); //starts or continues the session
 require_once('functions.php'); //needed for some function calls
 error_reporting(E_ALL ^ E_NOTICE);
 ?>

<!DOCTYPE html>
<html lang = "en">

<head>
<script type = "text/javascript" src = "functions.js"></script>
<link href="style.css" rel="stylesheet" type="text/css">      
</head>

<body>

<?php
 GetUserLayout($_SESSION['userId'], $_SESSION['superUser']);

 ?>

    <div id = "shareyouridea_form" class = "post">
      <h1> Share your post</h1>    
      <!-- used for the form -->
      <form id = "idea_form" method = "post"  
        action = "<?php echo $PHP_SELF;?>"
    onkeypress = "return DisableEnterKey(event);">
        <table>
      <caption> 
        <strong> 
          <br /> Share post form:
        </strong> 
      </caption>
      <tr class = "spacearound"> <!-- input for bright idea -->
                <td> &emsp;Post: </td>
                <td>
          <textarea form = "idea_form" name = "b_idea" rows = "12" 
          cols = "85" title = "Please describe your product idea" 
          id = "bright_idea" maxlength = "1000"
          onkeypress = 
          "return InputLimiter(event, 'lettersSpacePunctuation');">
          </textarea>
                </td>
              </tr>
    </table>

        <p>
      &emsp;&emsp;&emsp;&nbsp;
      <input type = "reset" value = "Reset" />
      &emsp;&emsp;        
      <input type = "submit" value = "Share Idea!"
        title = "complete form first to submit"
        id = "submit_button"
        name = "add_comment"
                onmousedown = "IsIdeaFormCompleted();" />
    </p>
          </form> <!-- end idea_form -->            
        </div>
  </div> <!-- end of ShareYourIdea_middle -->
  <script>
        DisplayFooter();
 </script>

 <?php
  if(isset($_POST['add_comment'])){ // if add comment was pressed

   // get variables
 $name = $_SESSION['firstName'];
     $empId = $_SESSION['userId'];
     $idea = $_POST['b_idea'];

    // CONNECTING TO OUR DATABASE
$db = mysqli_connect(dbHost, dbUser, dbPassword, dbName);

   if (mysqli_connect_errno()) { //if connection to the database failed
 echo("<p id = 'greatideadescription'>
          Connection to database failed: " .
      mysqli_connect_error($db) . "</p>");
exit("goodbye");
  }  //by now we have connection to the database

// WE WRITE OUR QUERY TO INSERT POST INFO TO DATABASE
 $query = "INSERT INTO posts(postId,empl_Id,post,postDate)
        VALUES('','$empId','$idea',NOW())";
    $result = mysqli_query($db, $query);

  }

 ?>

 <?php
  // WE DO A QUERY TO SHOW ALL COMMENTS IN THE PAGE
 $query = "SELECT firstName,lastName, post,
      date_format((date_add(postDate,interval -7 hour)),'%a, %M, %d, %Y at %I:%i%p' ) as        mydatefield 
      FROM users INNER JOIN posts ON userId = empl_Id
      ORDER BY postDate DESC";

 $result = mysqli_query($db,$query);
 if (!$result) { //if the query failed
    echo("<p id = 'greatideadescription'>
     Error, the query could not be executed: " .
     mysqli_error($db) . "</p>");
    mysqli_close($db);}

if (mysqli_num_rows($result) == 0) { //if no rows returned
  echo("<div id = 'blogs'>
          <div id ='name'>
            No posts detected
          </div>
        </div>
        <div class='fb-like' data-href='http://jacobspayroll.zxq.net/index/blog.php'   data-send='true' data-width='450' data-show-faces='true'></div>
    ");
  mysqli_close($db); //close the database
  exit("</table></div></form></div></div>
      <script>DisplayFooter();</script></body></html>");
      } //by now we know that we have some products purchases returned
  $numRows = mysqli_num_rows($result); //gets number of rows
  $numFields = mysqli_num_fields($result); //gets number of fields
  //prints the data in the table

  while($row = mysqli_fetch_assoc($result)){
  $posted = $row['post'];
  $message = wordwrap($posted,5);
  echo 
    '<div id ="blogs">
        <table id = "blog_id">
          </br>
           <div id = "name">
            <strong>'.$row['firstName'] . '&nbsp;' .$row['lastName'].
          '</strong>
          &nbsp;: ' .$message .
          '<br/> 
          </div>
          <div id ="date">'.
          $row['mydatefield'] . '
          </div>
          <div id ="delete_comment">
            Delete this comment 
          </div>
          <p>
        </table>
    </div>';    
 }
  mysqli_close($db); 

  ?>
  </body>

  </html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T02:07:59.040

你有错误的用法`PHP_SELF`

```
//You must use  Server and execution environment information `$_SERVER[]`

$_SERVER['PHP_SELF'];

// For your form action like this
 action = "<?php echo $_SERVER['PHP_SELF'];?>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:14:31.427

正如凯尔提到的那样，您弄错了，但您可能想要使用`$_SERVER['SCRIPT_NAME']`而不是`$_SERVER['PHP_SELF']`then 如果您将它们用于您的脚本，您可能想要添加一些脚本来获取 GET 参数。如果你使用 PHP_SELF，你可能有一个用户链接，`script.php/%22%3E%3Cscript%3Ealert('xss')%3C/script%3E%3Cfoo`看起来像`action="script.php/"><script>alert('xss')</script>`或者可能是一个重定向来收集 cookie 等，换句话说就是 XSS 攻击。

[$_SERVER['PHP_SELF'] vs $_SERVER['SCRIPT_NAME'] vs $_SERVER['REQUEST_URI']](http://raptor.hk/_serverphp_self-vs-_serverscript_name-vs-_serverrequest_uri/)

[XSS 问题](http://seancoates.com/blogs/xss-woes)

[$_SERVER['PHP_SELF'] 和 $_SERVER['SCRIPT_NAME'] 有什么区别？](https://stackoverflow.com/a/6719197/1700963)

# animationdrawable - Android Frame 动画不会进行多个图像

> ID：15736731
> 
> 赞同：0
> 
> 时间：2013-04-01T02:07:30.510
> 
> 标签：animationdrawable

我在 res 文件夹中创建了一个名为 anim 的文件夹。我已将 9 个连续图像放在 res 文件夹内名为 drawable 的文件夹中。现在我创建了这个：

公共类 AndroidAnimationActivity 扩展 Activity {

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.about_screen);
    ImageView myAnimation = (ImageView)findViewById(R.id.myanimation);
    final AnimationDrawable myAnimationDrawable= (AnimationDrawable)myAnimation.getDrawable();
    myAnimation.post(new Runnable(){  
        public void run() {   
            myAnimationDrawable.start();  
            }
        });
    }
} 
```

如您所见，我试图在名为 about_screen 的页面上显示此动画。它只显示第一帧，其余帧不显示（作为动画）。我见过几个人和我有类似的问题，但不完全相同。我希望有人可以帮助我。请具体。我是一个新的安卓学习者。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T19:55:27.370

即使我遇到了这个问题，解决方案也很简单。问题是，您`myAnimationDrawable.start()`在函数内部调用`onCreate()`。

你有两种可能的选择...

第一个，使动画具有交互性，以便您可以`myAnimationDrawable.start()` 在某些`onClick()`函数内部调用。

第二种选择是调用`myAnimationDrawable.start()`inside `View.OnFocusChangeListener()`。在这种情况下，您不必使其具有交互性。

# java - 忽略 isPalindrome() 方法中的字母 - Java

> ID：15736733
> 
> 赞同：0
> 
> 时间：2013-04-01T02:07:55.323
> 
> 标签：java, oop, palindrome

我想知道如何修改以下方法以在检查字符串是否为回文时忽略某个字母并将其作为通配符...

示例：“哇”，在这种情况下，该方法应返回 false 但

"pat" ， 't' 可以是通配符（视为 ap），因此它返回 true

"job" ，同样 b 可以是通配符并被视为 aj，因此方法返回 true。

这是我到目前为止所拥有的，我有一个忽略特殊字符和空格的单独方法，因此不需要在这篇文章中考虑。

```
private static boolean checkPalindrome2(String word) {
    if(word.length() < 2) { 
        return true;  
    }
    char first  = word.charAt(0);
    char last   = word.charAt(word.length()-1);
    if(first != last) { 
        return false; 
    }
    else { 
        return checkPalindrome2(word.substring(1,word.length()-1));
    }
} 
```

这是我的测试课，

```
public class testPalindromes {

    public static void main(String[] args) {
        //if (Palindromes.isPalindrome("a") == true) {
        //  System.out.println("true");
        //} else {
        //  System.out.println("false");
        //}

        // block above is the same as this
        // isPalindrome already returns true or false, 
        // and true and false can be printed as strings
        System.out.println(isPalindrome("a"));

        if (Palindromes.isPalindrome("cat") == true) {
            System.out.println("true");
        } else {
            System.out.println("false");
        }
        if (Palindromes.isPalindrome("w o    w") == true) {
            System.out.println("true");
        } else {
            System.out.println("false");
        }
        if (Palindromes.isPalindrome("   a  ") == true) {
            System.out.println("true");
        } else {
            System.out.println("false");
        }
        if (Palindromes.isPalindrome("mom!") == true) {
            System.out.println("true");

        if (Palindromes.isPalindrome2("cat")==true){
            System.out.print("true");
        } else {
            System.out.println("false");
            }

        }

    }

} 
```

isPalindrome2 是调用上述 checkPalindrome2 方法的方法，我的测试类中的最后一个案例（单词 cat）应该返回 true，因为 t 将是通配符（如上所述，通配符再次替换为 c 制作 cat，cac 是回文)

提前感谢所有帮助/输入！！！！ps，我特意实现了一个递归方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:11:41.840

只需在您的基本案例中添加额外的条件：

```
// both first and last have to NOT be the special character
// and first has to not equal last for this to return false
if(first != special && last != special && first != last)
    return false; 
else
    return checkPalindrome(word.substring(1,word.length()-1)); 
```

# multithreading - 等待/异步如何工作？

> ID：15736736
> 
> 赞同：0
> 
> 时间：2013-04-01T02:08:20.670
> 
> 标签：multithreading, async-await

假设线程 A 使用'await' 等待线程 B 上的某些事情完成。当 B 忙于工作负载时，A 被认为已被标记为“暂停点”。A 中的执行流程将继续挂起代码块的“调用者”方法。当 B 完成后，它会通知 A 从暂停点继续。

我的问题是：

*   为暂停点保留的上下文信息的内容是什么？

*   上下文信息如何存储？

*   B如何通知A它的完成？

*   A的上下文信息是如何恢复的？（我认为一旦 A 的上下文信息被恢复，A 将从暂停点“自然”恢复）

*   'async' 和 'await' 分别对编译器有什么影响。换句话说，编译器在幕后做了什么特别的工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:19:59.633

首先，忘记线程。`async`并且`await`与线程几乎没有关系，更多的是与重写方法有关，因此您可以更轻松地使用延续传递样式。

我建议您阅读我的[`async`/ `await`intro 帖子](http://blog.stephencleary.com/2012/02/async-and-await.html)，然后跟进[MSDN 文档](http://msdn.microsoft.com/en-us/library/hh191443.aspx)（非常好）。这将回答你所有的问题，除了最后一个问题，[Jon Skeet 的 eduasync 博客系列](http://msmvps.com/blogs/jon_skeet/archive/tags/Eduasync/default.aspx)回答得最好。

# actionscript-3 - 在 Actionscript 3 中拖动 Sprite 数组

> ID：15736738
> 
> 赞同：0
> 
> 时间：2013-04-01T02:08:38.677
> 
> 标签：actionscript-3

我的目标是在事件上生成一个圆圈，并在发生拖动时`MOUSE_WHEEL`移动*所有*`MOUSE_DOWN`圆圈，如 和 检测到的`MOUSE_UP`。我通过将每个`Sprite`创建的元素添加到一个数组中来完成此操作，并在鼠标向上/向下时迭代它。注意：`Node`只是`Sprite`类型的扩展。

但是，由于某种原因，只有最近绘制`Sprite`的数组被移动。任何想法为什么？

我的画布课：

```
 public function Canvas() {
        trace("Starting it");

        const background:Sprite = new Sprite();
        background.graphics.beginFill(0x00000000);
        background.graphics.drawRect(0, 0, this.stage.stageWidth, this.stage.stageHeight);
        background.graphics.endFill();
        addChild(background);

        background.addEventListener(MouseEvent.MOUSE_WHEEL, createNode);
        background.addEventListener(MouseEvent.MOUSE_DOWN, startObjectMove);
        background.addEventListener(MouseEvent.MOUSE_UP, endObjectMove);

        mNodeList = new Array();
    }
...
} 
```

我的 startObjectMove 和 endObjectMove 方法：

```
 public function startObjectMove(pEvent:MouseEvent) : void {
        trace("Starting drag...");
        trace("There are " + mNodeList.length + " in list");
        for (var i:int = 0; i < mNodeList.length; i++) {
            var node:Node;
            node = Node(mNodeList[i]);
            node.startMove(pEvent);
        }
    }
    public function endObjectMove(pEvent:MouseEvent) : void {
        trace("Ending drag...");
        trace("There are " + mNodeList.length + " in list");
        for (var i:int = 0; i < mNodeList.length; i++) {
            var node:Node;
            node = Node(mNodeList[i]);
            node.endMove(pEvent);
        }
    } 
```

`endMove`and方法`startMove`只是调用`this.startDrag()`and 。`this.endDrag()`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:50:23.367

您一次只能在一个对象上使用 startDrag 和 stopDrag。

您需要在舞台本身上监听鼠标按下事件 - 当用户单击时，存储每个节点的初始位置（在 Node 类中创建两个公共变量/属性），并记录鼠标从哪里开始。

然后，每当鼠标移动直到它被释放时，计算它从鼠标向下移动了多远，并将这个量添加到每个节点的初始位置以设置它的位置。

你需要做这样的事情：

```
var initX:int;//Variables to store the mouse position on click:
var initY:int;

stage.addEventListener(MouseEvent.MOUSE_DOWN):void {

    initX = stage.mouseX;//Store the starting mouse position
    initY = stage.mouseY;

    //Store the node positions:
    for(var i:int = 0; i < mNodeList.length; i++){
        var node:Node = Node(mNodeList[i]);
        node.startX = node.x;
        node.startY = node.y;
    }

    //Listen for mouse move events
    stage.addEventListener(MouseEvent.MOUSE_MOVE,mouseMove);
}

stage.addEventListener(MouseEvent.MOUSE_UP):void {
    //Stop listening for mouse move events
    stage.removeEventListener(MouseEvent.MOUSE_MOVE,mouseMove);
}

//MouseMove event handler:

function mouseMove(e:MouseEvent):void{
        for(var i:int = 0; i < mNodeList.length; i++){
                var node:Node = Node(mNodeList[i]);

                // Position each as amount the mouse has moved 
                // to each node's initial position:

                node.x = (stage.mouseX-initX) + node.startX;
                node.y = (stage.mouseY-initY) + node.startY;
        }

} 
```

# java - Java 跟踪堆栈的高度

> ID：15736739
> 
> 赞同：0
> 
> 时间：2013-04-01T02:08:42.303
> 
> 标签：java, stack

我正在做一个大约有 20 个堆栈的项目。我想知道是否有一种相对简单的方法来跟踪每个堆栈的高度。我能做的唯一方法是有一个单独的变量来跟踪高度。当堆栈被弹出和推送时，该变量将递增/递减。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:42:32.187

使用继承自 Vector 的 size() 命令。例子：

```
 Stack<Integer> s= new Stack<Integer>();
    s.push(3);
    s.push(4);
    s.push(5);
    s.pop();
    System.out.println(s.size()); 
```

这输出 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:43:50.017

对于每个堆栈， stack.size() 将返回它的“高度”——这很容易让我觉得我误解了你的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T02:44:23.790

如果您在谈论`java.util.Stack`它具有`size()`继承自`Vector`.

请参阅[http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html](http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html)

# java - 将 JInternalFrame 添加到 fsem 框架

> ID：15736740
> 
> 赞同：0
> 
> 时间：2013-04-01T02:08:50.943
> 
> 标签：java, swing, fullscreen, paintcomponent, jinternalframe

我正在尝试将 jinternal 框架添加到处于全屏独占模式的框架中。但是，当我添加它时，它会用白色填充整个屏幕。这是我的代码。

```
 JFrame f = new JFrame();
    f.setTitle("Platform Game"); 
    f.setLocationRelativeTo(null); 
    f.setUndecorated(true);
    GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice gs = ge.getDefaultScreenDevice();
    gs.setFullScreenWindow(f);
    f.setVisible(true);
    createFrame(f);

protected static void createFrame(JFrame f)
{
    JInternalFrame frame = new JInternalFrame("Options", false, true, false, false);
    frame.setVisible(true);
    frame.setSize(10, 10);
    frame.setLocation(10, 10);
    JDesktopPane pane = new JDesktopPane();
    pane.add(frame);
    f.setContentPane(pane);

    try 
    {
        frame.setSelected(true);
    } 
    catch (java.beans.PropertyVetoException e) 
    {
        e.printStackTrace();
    }
} 
```

如果有人知道如何正确执行此操作，请发布它，或告诉我我做错了什么。

细节

操作系统：Windows 7

JDK：JDK 1.7.0_11

IDE：日食

我在 jframe 上使用面板，我正在面板上绘图

绘画代码

```
public void paintComponent(Graphics g)
{
    super.paintComponent(g);

    for(int i = 0; i<1000; i++)
        g.drawImage(bi, i*bi.getWidth()-getXs(), 0, bi.getWidth(), Main.HEIGHT, null);

    g.setColor(Color.WHITE);

    for(int x = 0; x<Main.X_TILES; x++)
    {
        for(int y = 0; y<Main.Y_TILES; y++)
        {
            Block block = map[x][y];

            if(block!=null && x*Block.WIDTH>=xs-Block.WIDTH && x*Block.WIDTH<=xs+Main.WIDTH)
                g.drawImage(block.getImage(x,y), x*Block.WIDTH-getXs(), y*Block.HEIGHT, Block.WIDTH, Block.HEIGHT, null);
        }
    }

    for(Entity entity : entities)
    {
        if(entity!=null && entity.getX()>=xs-Block.WIDTH && entity.getX()<=xs+Main.WIDTH)
            g.drawImage(entity.getImage(), entity.getX()-getXs(), entity.getY(), entity.getWidth(), entity.getHeight(), null);
    }

    if(displayDebug)
    {
        g.drawString("Free memory "+Runtime.getRuntime().freeMemory()/1024+" KB", 10, 12);
        g.drawString("Total memory "+Runtime.getRuntime().totalMemory()/1024+" KB", 10, 24);
        g.drawString("Max memory "+Runtime.getRuntime().maxMemory()/1024+" KB", 10, 36);
        g.drawString("X "+character.getX(), 10, 48);
        g.drawString("Y "+character.getY(), 10, 60);
        g.drawString("XS "+xs, 10, 72);
    }

    g.setColor(Color.BLACK);
    g.drawString("Life "+character.getHealth(), 700, 12);
    g.dispose();
} 
```

[我在全屏模式下](https://stackoverflow.com/questions/6119874/jinternalframe-in-full-screen-mode?rq=1)看到了一个类似问题 JInternalFrame 的答案，说直接放在面板上，但我试过了，它仍然没有用。

编辑：当我注释掉我的绘画代码时，我将它直接添加到面板而不是它的工作，但它不会拖动，所以我的新问题是如何在完成绘画工作时让它出现。他们是一种使用绘画组件绘制组件的方法吗？

为了澄清，在没有绘画代码的情况下添加到面板时仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:14:50.497

你是说你在你的框架中添加了一个 JPanel（第二个代码片段），但实际上你正在用这一行中的 JDesktopPane 替换你的框架的全部内容：

```
f.setContentPane(pane); 
```

因此，除非您在 Frame 的玻璃窗格中的某处或类似奇怪的某处添加您的游戏面板（具有覆盖 paintComponent 方法的那个），否则它将永远不会显示，因为 JDesktopPane（以及您添加到其中的 JInternalFrame）是唯一的组件此时的框架。

此外，为了完整起见，您应该将 setVisible(true) 调用移到初始化的最后（即之后`createFrame(f);`），并完全删除您的paintComponent 方法（`g.dispose();`）中对 dispose() 的调用。

至少这是我想象的情况，尝试发布一个更简洁和独立的示例，如果这没有帮助，可以展示您遇到的问题。

这是一个修改后的示例，它将在同一个全屏组件中显示自定义图形（在本例中仅为文本）和 JInternalFrame：

```
public class FrameTest {

    public static void main(String[] args) {
        JFrame f = new JFrame();
        f.setTitle("Platform Game");
        f.setLocationRelativeTo(null);
        f.setUndecorated(true);
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice gs = ge.getDefaultScreenDevice();
        gs.setFullScreenWindow(f);

        JDesktopPane pane = new MyPanel();
        JInternalFrame frame = new JInternalFrame("Options", false, true, false, false);
        frame.setVisible(true);
        frame.setSize(100, 100);
        frame.setLocation(10, 10);
        pane.add(frame);
        f.setContentPane(pane);

        f.setVisible(true);
    }

    private static class MyPanel extends JDesktopPane {
        public void paintComponent(Graphics g) {
            super.paintComponent(g);

            g.setColor(Color.BLACK);

            g.drawString("Free memory " + Runtime.getRuntime().freeMemory() / 1024 + " KB", 10, 12);
            g.drawString("Total memory " + Runtime.getRuntime().totalMemory() / 1024 + " KB", 10, 24);
            g.drawString("Max memory " + Runtime.getRuntime().maxMemory() / 1024 + " KB", 10, 36);
        }
    }
} 
```

# jquery - 您如何选择使用 jquery 序列化的 json 信息？

> ID：15736742
> 
> 赞同：0
> 
> 时间：2013-04-01T02:09:05.420
> 
> 标签：jquery, json, serialization

如果我的 jquery 序列化发布以下内容：

```
{"PurchaseOrders":[{"Id":"8a4c70a63db7b320013dc35247960095","Version":124,"Context":{"RealmId":"1","CustomerId":"111","ProjectId":"2222","Operation":null} 
```

如何排除

```
{"PurchaseOrders":[ 
```

从我的帖子中，同时仍然提交它包含的所有内容？

我目前正在使用此脚本进行序列化： [https ://github.com/tlowrimore/jquery.serialize-object/blob/master/jquery.serialize-object.js](https://github.com/tlowrimore/jquery.serialize-object/blob/master/jquery.serialize-object.js)

```
(function($) {
    var methods = {
        setValue: function(path, value, obj) {
            if(path.length) {
                var attr = path.shift();
                if(attr) {
                    obj[attr] = methods.setValue(path, value, obj[attr] || {});
                    return obj;
                } else {
                    if(obj.push) {
                        obj.push(value);
                        return obj;
                    } else {
                        return [value];
                    }
                }
            } else {
                return value;
            }
        }
    };

    $.fn.serializeObject2 = function() {
        var obj     = {},
            params  = this.serializeArray(),
            path    = null;

        $.each(params, function() {
            path = this.name.replace(/\]/g, "").split(/\[/);
            methods.setValue(path, this.value, obj);
        });

        return obj;
    };
})(jQuery);

$(document).ready(function() {

    $("#btn-add-po-submit").click(function(e) {

        e.preventDefault();

        var formData = $("#form-add-po").serializeObject2();
        var url = $("#form-add-po").attr("action");

        console.log(url);

        $.ajax({
            type: 'POST',
            contentType: "application/json",
            url: url,
            dataType: 'json',
            data: JSON.stringify(formData),
            error : function(jqXHR, textStatus, errorThrown) {
                console.error(textStatus);
            },
            success : function(data, textStatus, jqXHR) {
                console.log(textStatus);

            }
        });
        /*$('#result').text(JSON.stringify($('form').serializeObject()));
        return false;*/
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:12:22.803

JSON 对象应该是某个变量的一部分。如果它是分开的，`var obj`那么您可以使用`obj['PurchaseOrders']`or获取 PurchaseOrders 数组`obj.PurchaseOrders`。

# javascript - Connect-Domain 在以下情况下不会捕获错误：

> ID：15736744
> 
> 赞同：0
> 
> 时间：2013-04-01T02:09:15.517
> 
> 标签：javascript, node.js, express

我正在使用连接域模块 ( [https://github.com/baryshev/connect-domain](https://github.com/baryshev/connect-domain) ) 在我的 Express 应用程序中集中错误处理。

在大多数情况下，它都有效。但是，由于我不明白的原因，当我在 fs.exists 检查中抛出错误时，它不会捕获错误而是使节点崩溃。

```
app.get( "/anurl/", function( req, res ){
    ...
    fs.exists( filename, function( exists ) {
        if ( !exists ) throw new Error( "bah!" );
        ...
    });
}); 
```

编辑：

经过相当多的测试，我了解到上述不是问题的真正原因。

实际问题与使用 Redis 作为会话存储有关：

```
app.use( connectDomain() );
app.use( express.session({
    secret: "secretz",
    store: new RedisStore({ client: redis })
})); 
```

使用上述内容，connectDomain 不再适用于异步抛出的任何错误。（这包括对文件系统、超时、数据库连接等的调用）

如果我将以上内容更改为以下内容...

```
app.use( connectDomain() );
app.use( express.session({ secret: "secretz" })); 
```

...然后一切正常。

所以关于 RedisStore 的一些东西正在破坏 Connect-Domain。不幸的是，我需要使用 Redis 来保持我的会话。

任何有关如何解决此问题的进一步建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T10:42:39.387

我刚刚尝试使用此代码：

```
var http = require('http');
var express = require('express');
var connectDomain = require('connect-domain');
var fs = require('fs');

var app = express();
app.use(connectDomain());

app.get('/', function (req, res) {
    fs.exists('test', function (err) {
        if (!err) throw new Error('bah!');
        res.writeHead(200, {'Content-Type': 'text/plain'});
        res.end('Hello World\n');
    });
});

app.use(function (err, req, res, next) {
    res.end(err.message);
});

http.createServer(app).listen(1339, '0.0.0.0'); 
```

错误被成功捕获。

`node.js: 0.10.1`

`connect-domain: 0.5.0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:13:19.673

看看是否与以下相关：

“扔与扔新”的东西

[http://www.javascriptkit.com/javatutors/trycatch2.shtml](http://www.javascriptkit.com/javatutors/trycatch2.shtml)

# c++ - 加入在先前调用 a() 中创建的 a() 中的线程。这可能吗？

> ID：15736745
> 
> 赞同：2
> 
> 时间：2013-04-01T02:09:19.663
> 
> 标签：c++, c, multithreading, join, pthreads

**已解决/简短回答：是的，您可以。虫子在别的地方。如果您想知道它在哪里，请继续阅读。**

我必须处理项目（在项目之间进行独立的计算）。项目在函数 a() 中处理；

我想要做的是每当调用 a() 时，创建一个包含所有 a() 处理代码的新线程，然后立即退出 a()。下次将调用 a() （由我无权访问的调用者立即调用），将再次创建一个新线程并终止。当进行了 8 个后续调用（我有 8 个内核）时，在 a() 中加入之前的 8 个线程并继续...

这可能吗？我可以加入在先前调用 a() 中创建的 a() 线程内吗？

我的程序，虽然它在 1 个线程上完美运行，但它在任何其他数量上都会出错。

==================================================== ================================

添加代码供您查看：

首先。我无权访问调用 a() 的函数。如果不涉及线程，调用者会等到 a() 完成它的计算，然后再次调用它，提供下一个 x,y* s。我想做的是并行计算 8 个 a()s。如果 a() 可以开始计算并返回（创建线程并退出），调用者将使用新的 x,y* 再次调用 a()，而旧的仍在计算中。这就是概念。每个 x,y* 对的计算完全独立于任何其他对。

```
int counter = 0;
pthread_t threads[8]; //i have 8 cores
thread_args args[8]; //arguments that pass to the threads
int res[8]; //threads store their results here

void a(int x, int y*) { //a() is being called by caller immediately after it returns with a new pair of x,y*
    args[counter].x = x; //struct thread_args has x,y,my_counter
    args[counter].y = y;
    args[counter].my_counter = counter;
    pthread_create(&threads[counter], NULL, calculate_xy, (void *)&args[counter]);
    //calculate_xy stores results in res[args->my_counter]     

    if(++counter != 8)
        return;

    //it reaches here every 8th call of a(); (total number of a() calls is an exact multiple of 8)
    counter = 0;
    for (int i = 0; i < 8; ++i)
        pthread_join(threads[i], NULL);

    //GO ON... append the 8 results to a text and go on...
}//end a() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:42:47.930

首先，无论您的代码中有什么错误，这都是一个糟糕的设计。您的函数`a()`具有全局状态（过去创建的线程和到目前为止创建的数量），这在单线程程序中已经够糟糕了，但在多线程程序中，如果多个线程可以同时调用`a()`. 即使不是，也有很多理由避免使用全局状态：

[http://www.youtube.com/watch?v=-FRm3VPhseI](http://www.youtube.com/watch?v=-FRm3VPhseI)

一个更好的设计是让`a()`函数接受一个额外的参数，一个指向包含计数器的结构的指针和一个`pthread_t`迄今为止创建的所有线程的值数组。然后，“状态`a()`”将不是全局状态，而是属于使用 的程序部分的状态`a()`。

至于为什么你的程序现在崩溃了，没有看到任何代码都很难说。我怀疑您要么`a()`在没有同步的情况下从多个线程调用，要么只是在数组索引的某处出现粗心的错误/错字...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:57:35.023

我原来的问题的答案是肯定的。您可以在函数中加入线程，这些线程是在先前调用同一函数时创建的。

我的代码中的错误是每次调用 a() 时 y* 指向的地方都会在调用者内部重用。所以，虽然我认为以前创建的线程仍然在正确地完成它们的工作，但它们并不是因为在它们的生命中，y* 参数指向的位置被反复重写，在每次来自调用者的新 a() 调用中，其内容接下来的 x,y* 对混乱线程的计算。

谢谢你们。你引导我解决问题。

# bash - 名称包含在函数参数中的 Bash 扩展数组

> ID：15736751
> 
> 赞同：1
> 
> 时间：2013-04-01T02:09:52.700
> 
> 标签：bash

我想让这段代码更自然：

```
#!/bin/bash

 declare -ra dev_monikers=(foo bar baz)
 declare -ra starwars_expletives=(farkled kark crink)

 function f() {
   local -r weird_expansion="$1[@]"
   local -ra words_to_use=(${!weird_expansion})
   echo "${words_to_use[@]}"
 }

 f dev_monikers
 echo ---
 f starwars_expletives 
```

`weird_expansion`具体来说：使用那个辅助变量确实很奇怪。在 Bash 中有没有更简单的方法来做到这一点？

上述输出：

```
foo bar baz
---
farkled kark crink 
```

我尝试过但*不起作用*的事情：

```
words_to_use=(${${1}[@]}) # error
words_to_use=(${$1[@]}) # error
words_to_use=(${!$1[@]}) # error
words_to_use=(${!1[@]}) # error
words_to_use=(${!${1}[@]}) # error
words_to_use=(${${!1}[@]} # error 
```

相比之下，最初的荒谬看起来不那么不合理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:29:21.790

尝试这个：

```
function f() {
    eval "echo \${$1[@]}"
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T03:04:39.373

这不一定更漂亮，但没有辅助变量：

```
function f() {
    local -a words_to_use=($(eval echo \$\{${1}[@]\}))
    echo ${words_to_use[@]}
} 
```

# ruby-on-rails - 从 Rails 控制台删除多条记录

> ID：15736752
> 
> 赞同：18
> 
> 时间：2013-04-01T02:10:00.440
> 
> 标签：ruby-on-rails, command-line, console

我正在尝试从 Rails 控制台中删除我的数据库中的多条记录。我知道我可以做 User.find(1).destroy。如果我想删除 ID 为 100 - 200 的所有用户怎么办。有没有办法在控制台中执行此操作？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-01T02:12:36.593

你可以做类似的事情`User.delete_all("id > 100 AND id < 200")`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-05T23:21:34.127

Rails 5 中的新语法是 Mischa 在他的评论中提到的语法：`User.where("id > 100 AND id < 200").delete_all`

`delete_all`在 rails 5.1 中将不推荐使用传递条件。

# c++ - 将 wxString 转换为 time_t

> ID：15736755
> 
> 赞同：0
> 
> 时间：2013-04-01T02:10:10.857
> 
> 标签：c++, datetime, wxwidgets, time-t

我有一个以日期为值的 wxString。日期格式的存储取决于区域设置或区域设置。

例如。wxString dateStr = "9/10/2013" [意大利的 dd/mm/yyyy 格式作为区域语言环境设置]。

当我使用 wxDateTime::ParseDate(dateStr) 解析日期字符串并尝试使用 wxDateTime::GetTicks() 函数将其转换为 time_t 时。但是当日小于或等于 12 时，它会交换日和月的值，例如 2013 年 3 月 10 日或 2013 年 11 月 12 日。我将月份分别设为 3 和 12，将天分别设为 10 和 11。但如果日期大于 12 即 14/10/2013 或 28/10/2013，它工作正常。

我想根据语言环境设置将上述日期字符串转换为 time_t。我正在使用 windows 和 linux 来开发环境。

请通过示例或代码片段帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:16:27.057

我建议您[`wxDateTime::ParseDateFormat`](http://docs.wxwidgets.org/2.8/wx_wxdatetime.html#wxdatetimeparseformat)改用，然后您可以指定日期字符串的确切格式。

您遇到问题的原因`ParseDate`是它首先尝试解析美国格式的日期字符串（格式为`mm/dd/yyyy`），如果失败，它会尝试其他格式。

# cruisecontrol.net - 如何在 CruiseControlNet 构建上自定义 buildCondition="IfModificationExists"？

> ID：15736756
> 
> 赞同：0
> 
> 时间：2013-04-01T02:10:12.170
> 
> 标签：cruisecontrol.net, ccnet-config

好的..我一直在搜索这个特定的问题，并且确实找到了一些示例，但并不完全是我想要的答案。任何想法，输入将不胜感激！

我的情况是..

我有一个通过 CCNet 进行的日常构建过程。它们在构建时都有一个 buildCondition="ifModificationExists" 参数。当且仅当有修改（检查源“更新”）时，这允许 CCNet 构建。

问题是，我在每个构建的最后部分添加了一个版本提交过程。这意味着，如果我要构建 1.0.0.3，我将提交更改的 AssemblyInfo.cs 文件（包含更新的版本号），并允许我在构建每个版本时检查日志。

这完全搞砸了整个自动化的每日构建过程。你看，因为它在每次构建时都会提交版本，无论它是否有任何其他更新，CCNet 认为在每天早上构建之前总是有修改。事实上，唯一的修改是上次构建的版本更新。

我想不出一种方法来解决这个问题，通过在存在修改时保持版本更新+每日自动构建。

有什么帮助吗？:)

编辑 1\. 这是我的每个构建的触发器部分：

```
<!--TRIGGERS --> 
    <triggers>
    <scheduleTrigger time="04:00" buildCondition="IfModificationExists" name="Scheduled"> 
    </scheduleTrigger>
    </triggers> 
```

编辑 2\. 这是我使用 powershell 提交文件 (AssemblyInfo.cs) 的部分

```
 <powershell>
            <script>commit.ps1</script>
            <executable>C:\WINDOWS\system32\WindowsPowerShell\v1.0\powershell.exe</executable>
            <scriptsDirectory>D:\SRC\BuildTools</scriptsDirectory>
            <buildArgs>D:\SRC\ProjectName\branches\3.0.3\</buildArgs>
            <description>BuildCommit Dir D:\SRC\ProjectName\branches\3.0.3\src</description>
        </powershell> 
```

先感谢您，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:18:27.700

我认为您应该能够使用过滤的源代码管理来做您需要的事情：

[http://cruisecontrolnet.org/projects/ccnet/wiki/Filtered](http://cruisecontrolnet.org/projects/ccnet/wiki/Filtered)

# extjs - 表格行点击 Sencha Touch 2

> ID：15736758
> 
> 赞同：0
> 
> 时间：2013-04-01T02:10:33.880
> 
> 标签：extjs, row, clickable

我想让我的表格行在 sencha touch 中可点击，这可能吗？我现在正在使用 onclick，但似乎不起作用......我想让 tr 带有可点击的位置，以防你没有看到。

```
Ext.define('android.view.EventDetail', {
    extend: 'Ext.Panel',
    xtype: 'eventdetail',
    requires: [
        'android.store.Eventstore',
       'android.store.Placesstore',
    ],

    config: {
        fullscreen: 'true',
        title: 'Details',
        styleHtmlContent: true,
        scrollable: 'vertical',
        style: 'background-color: #FFF',

        tpl: [
            '<div class="detail"><table width="100%" class="bottomBorder"><tr><td><div class="imglist"><img src="http://admin.hishanghai.info/{picture}" width="120" height="120"></div><div class="title">{name}</div><div class="description">{description}</div></td></tr><tr><td><b>When:</b> {[this.timestart(values.time_start)]}</td></tr><tr onclick="goPlaces(values.id_place);"><td><b>Where:</b> {[this.showPlace(values.id_place)]}</td></tr><tr><td><b>Share</b></td></tr><tr><td><b>Link:</b> <a href="http://{website}">{website}</a></td></tr><tr><td><b>Phone:</b> {phone}</td></tr></table></div><div class="promote">Promote your own Event on HiShanghai</div>',
             {
             compiled: true,

             showPlace: function(id_place){
                var placesstore = Ext.getStore('Placesstore');
                var i =0;
                var placeid = 0;
                var aRecord;
                while(placeid != id_place){
                    aRecord = placesstore.getAt(i);
                    placeid = aRecord.data.id;
                    i+=1;
                    }
                var naam = aRecord.data.name;
                return naam;
                 },

             }
        ],

        //record: null
    },

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T02:22:26.693

找到了，贴在这里给别人。你让你的 tr 可点击

```
tpl: [<tr onclick="goPlaces({id_place})">] 
```

然后转到您的 index.html 并制作函数

```
<script>
   function goPlaces(plid){
            ... code here ...
             }
</script> 
```

另请查看[http://www.sencha.com/forum/showthread.php?260146-Tpl-table-on-click-show-other-js&p=953213#post953213](http://www.sencha.com/forum/showthread.php?260146-Tpl-table-on-click-show-other-js&p=953213#post953213)

# plugins - Wordpress 在插件提交时给出权限错误

> ID：15736761
> 
> 赞同：-1
> 
> 时间：2013-04-01T02:10:43.663
> 
> 标签：plugins, wordpress

我正在创建一个新插件（基于我之前创建的有效插件）。选项页面显示正常，但是当我提交时，我得到“您没有足够的权限访问此页面”。错误。

它基于的插件可以正常工作并提交。我不确定为什么这会出现问题。

下面是创建插件的脚本、页面以及在提交时创建新项目的代码。

```
add_action( 'wp_enqueue_scripts', 'add_product_focus_styles' );
    add_action( 'wp_enqueue_scripts', 'add_product_focus_scripts' );

    function add_product_focus_styles() {
        wp_register_style( 'pfstyles', plugins_url('/css/product-focus.css', __FILE__));
        wp_enqueue_style( 'pfstyles' );
    }

    function add_product_focus_scripts() {
        //wp_register_script('rpjs',plugins_url('/js/productfocus.js', __FILE__),'','',true);
        //wp_enqueue_script('rpjs');
    }

    register_activation_hook(__FILE__, 'product_focus_activate');

    // activating the default values
    function product_focus_activate(){
        product_focus_start();
    }

    function product_focus_start() { 
        global $wpdb;
        /*
                  code that creates my table
                */
    }
     /**
     * Add the menu items to the WordPress menu bar
     */
     add_action('admin_menu', 'create_product_focus_menu_page');

    function create_product_focus_menu_page() {
       add_menu_page('Add Focus', 'Add Focus', 'administrator', 'productfocus/product-focus-create.php','',   plugins_url('productfocus/images/icon.png'));
       add_submenu_page('productfocus/product-focus-create.php', 'Edit Focus', 'Edit Focus', 'administrator', 'productfocus/product-focus-edit.php');

        add_action( 'admin_init', 'add_product_focus_styles' );
        add_action( 'admin_init', 'add_product_focus_scripts' );
    }

    if(isset($_POST['createFocus'])){
        global $wpdb;
        $table_name = $wpdb->prefix."productfocus";

        $pfname = $_POST['pfname'];
        $pfdate = $_POST['pfdate'];
        $return = $_SERVER['HTTP_REFERER'];

        $q = $wpdb->prepare("INSERT INTO $table_name (pfname,pfdate) VALUES (%s,$d,)",$pfname,$pfdate);
        $wpdb ->query($q);

        header("location: ".$_SERVER['PHP_SELF']."?page=productfocus/product-focus-create.php");
        exit;
    } 
```

为什么会显示“创建”页面但我尝试提交表单时出现错误的任何线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:23:33.813

原来用于提交页面的按钮名称在提交函数中不匹配。

# javascript - 当href是同一页时window.location.href不起作用

> ID：15736763
> 
> 赞同：2
> 
> 时间：2013-04-01T02:11:27.457
> 
> 标签：javascript, cfml

我有一个输入表单，它接受报告的参数。我将这些提交到同一页面。生成报告后，我想将用户移动到报告的顶部。但是，javascript 不会成为锚点。当我的 href 是不同但其他方面相同的页面时，锚点起作用，但当它是同一页面时，它不会。例子：

```
<script type="text/javascript">
function moveto() {
window.location.href = "frag6.cfm#betty";
}
</script>
</head>
<body>
<script type = "text/javascript">
moveto()
</script>
<cfset subtest = ArrayNew(1)>
<cfloop from = "1" to = "10" index = "m">
<cfloop from = "1" to = "3" index = "i">
<cfloop from = "1" to = "4" index = "j">
<cfset test[i][j] = "#m#_#i#_#j#">
</cfloop>
</cfloop>
</cfloop>

<cfdump var = "#test#">
<cfloop from = "1" to = "3" index = "i">
<cfloop from = "1" to = "4" index = "j">
<cfset subtest[j] = test[i][j]>
</cfloop>

<cfdump var = "#subtest#">
</cfloop>
<a name = "betty"> here I am </a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:31:54.910

您应该为锚点使用**id属性而不是 name 和****location.hash**而不是 location.href

```
<div id="happyanchor"></div>

<script>
function goToAnchor(anchor){
    location.hash = anchor;
}

goToAnchor('happyanchor');
</script> 
```

# c# - Excel AddOLEObject 函数在窗口 2008 R2 上不起作用

> ID：15736772
> 
> 赞同：1
> 
> 时间：2013-04-01T02:12:59.593
> 
> 标签：c#, asp.net, excel

***我编写了一个将pdf***文件添加到 Excel 工作表中的函数（C#，ASP.Net） 。它在我的开发环境中 100% 工作，但是当我在 windows 2008 R2 服务器上发布时，结果出现以下错误。我做了与我的开发设置相同的设置。我不知道是怎么回事。

> System.Runtime.InteropServices.COMException (0x800A03EC)：无法插入对象。在 Microsoft.Office.Interop.Excel.Shapes.AddOLEObject（对象类类型，对象文件名，对象链接，对象 DisplayAsIcon，对象IconFileName，对象 IconIndex，对象 IconLabel，对象左侧，对象顶部，对象宽度，对象高度）在 E_BOM_View.GenerateGPNApplyForm（Int32 ProjectID）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T07:19:50.333

最后，我找到了解决我的问题的方法。我解决的方法是需要在***Adob​​e Reader XI中取消选中启动时******启用保护模式***（因为我是 Adob​​e Reader 用户）。如果您是 Foxit Reader，则无需执行任何操作。您可以从该菜单中找到复选框***Edit*** > ***Preferences*** > ***Security(Enchanced)***或完成的文档在这里[http://helpx.adobe.com/acrobat/kb/protected-mode-troubleshooting-reader.html](http://helpx.adobe.com/acrobat/kb/protected-mode-troubleshooting-reader.html)

# ios - iOS 应用上传照片到 Facebook 和服务器方法

> ID：15736774
> 
> 赞同：0
> 
> 时间：2013-04-01T02:13:05.433
> 
> 标签：ios, facebook, facebook-graph-api, facebook-javascript-sdk

当用户在 iOS 应用程序上拍照时，必须完成以下操作（无特定顺序）：

*   照片必须上传到我们的服务器。
*   照片必须发布到 Facebook

这样做的最佳方法是什么？

**场景一：**

1.  iOS 应用将照片上传到我们的服务器
2.  iOS 应用将照片上传到 Facebook

**场景二：**

1.  iOS 应用将照片上传到服务器
2.  我们的服务器将照片上传到 Facebook

**问题：**

1.  哪种方法更好（场景 1 或场景 2，或者还有其他更好的方法）？
2.  其他执行此类操作的应用程序遵循哪种方法。（Instagram / Foodspotting 等应用程序）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:23:35.367

根据您的要求和您提供的信息（我不知道是否有其他要求），我可能会出于以下原因选择方案 2：

**用户至上**：在这种情况下，我正在考虑离开用户设备的数据。大多数人的数据计划有限，这意味着，您应该尝试使用尽可能少的资源（在这种情况下，数据和他们的注意力范围）。

**您有更多的灵活性：**您可以在出现错误时重试上传到 facebook，而不会打扰用户。例如，如果出于某种原因，您无法在第一次尝试上传到 Facebook，那么您可以重试，而不会占用用户的注意力。

**你有更多的控制/测量：**在这里我假设你的应用程序具有某些功能。但是，假设您允许人们将文件上传到您的服务器，但他们可以选择是否发布到 Facebook，然后您可以开始查看实际发布到 Facebook 的用户百分比，并开始查看有关您的用户的模式。这种信息总是有价值的。

# php - 您可以通过 iCloud 通过 PHP 验证 iOS UUID

> ID：15736775
> 
> 赞同：0
> 
> 时间：2013-04-01T02:13:18.847
> 
> 标签：php, ios, icloud, uuid

我没有使用 iCloud，但一直在查看一些文档。我只是想弄清楚是否可以向 iCloud 发送 UUID 和 App ID (?) 并让 iCloud 告诉我这对是否合法 - 如果 UUID 实际上属于我的应用程序的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:15:24.223

5 月 1 日之后，您将无法访问设备的 UUID。你试图做的事情是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:15:07.023

除了应用程序本身之外，无法通过任何其他方式连接到 iCloud。您甚至无法在应用程序上获取用户的 iCloud 电子邮件。

# php - -> 和 => 有什么区别？什么是 ：：？

> ID：15736781
> 
> 赞同：-2
> 
> 时间：2013-04-01T02:13:52.860
> 
> 标签：php

我对javascript有点陌生，我正在尝试了解backbone.js的工作原理并了解它的工作原理，但是有时我会遇到这样的行：

```
"admin"=>password_hash("pass",PASSWORD_BCRYPT) 
```

我了解此代码正在加密通行证，但我不了解 => 符号。

此外，我遇到过 :: ，我也不明白。

有人知道我在哪里可以更好地阅读这个吗？我一直在搜索，但找不到任何能清楚解释它的教程。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:25:10.377

这看起来更像 PHP。你可以从这里开始[PHP.NET](http://www.php.net)

[至于 :: 看看这个（:: used in Classes ）](https://stackoverflow.com/questions/8776788/best-practice-on-php-singleton-classes)
[逻辑运算符](http://php.net/manual/en/language.operators.logical.php)
[比较运算符](http://php.net/manual/en/language.operators.comparison.php)

# ruby-on-rails - 如何添加具有正确关系的种子数据？

> ID：15736788
> 
> 赞同：2
> 
> 时间：2013-04-01T02:14:36.697
> 
> 标签：ruby-on-rails, ruby, foreign-keys, relationship, seed

我正在使用`Ruby on Rails`. 我坚持使用正确的数据库关系将种子数据添加到我的数据库中。

一个论坛有很多话题，一个话题属于一个论坛。这是其中一种关系的样本。

到目前为止，我所知道的只是创建一个与数据库中的任何其他表都不相关的实例，例如：

`Forum.create(attributes {})`

这样做的目的是让我的嵌套路由可以正常工作：`/forums/:forum_id/topics/:id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:40:09.793

有几种方法可以做到这一点。

在 db/seeds.rb 添加如下内容：

```
form = Forum.create(attributes {})
form.topics.create(attributes{}) 
```

或者

```
form = Forum.create(attributes {})
topic1 = Topic.create(attributes{})
topic2 = Topic.create(attributes{})

form.topics << topic1
form.topics << topic2 
```

然后，当您想为数据库播种时，只需运行：

```
rake db:seed 
```

# c++ - Winsock2 的listen() 函数为每个端口找到一个连接；甚至那些不存在的？

> ID：15736789
> 
> 赞同：-1
> 
> 时间：2013-04-01T02:14:50.113
> 
> 标签：c++, sockets, networking, tcp, winsock2

我正在尝试创建一种方法，该方法使用 TCP 协议侦听到特定端口的连接请求，除了 Windows 操作系统附带的库之外没有其他库。该方法似乎可以很好地创建套接字并绑定到端口；问题似乎出在 listen() 函数上。即使没有对任何端口的连接请求，它也会不断返回零值，这意味着直接来自微软的网站 -

> 如果没有发生错误，listen 返回零。

奇怪的是，所有端口值都会发生这种情况。它似乎找到了随机尝试端口的连接请求，范围从 1234 到 8000 到 -154326。对于其中的每一个，它都返回一个零值。

它应该做的是持续运行，直到找到连接请求（这是 SOMAXCONN 显然表明的）；再一次，直接来自微软的网站——

> 如果没有可用的套接字描述符，listen 尝试继续运行。

这是方法本身 -

```
bool listenOnPort(SOCKET networkSocket, int portNumber) {
    WSADATA wsadata;
    int error = WSAStartup(0x0202, &wsadata);
    if(error) {
        cout << "Failed to start up Windows Sockets API." << endl;
        return false;
    }
    if(wsadata.wVersion != 0x0202) {
        WSACleanup();
        cout << "Failed to find a valid Windows Sockets API." << endl;
        return false;
    }
    SOCKADDR_IN address;
    address.sin_family = AF_INET;
    address.sin_port = htons(portNumber);
    address.sin_addr.s_addr = htonl(INADDR_ANY);
    networkSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if(networkSocket == INVALID_SOCKET) {
        cout << "Failed to create a network socket." << endl;
        return false;
    }
    if(bind(networkSocket, (LPSOCKADDR)&address, sizeof(address)) == SOCKET_ERROR) {
        cout << "Failed to bind to the port." << endl;
        return false;
    }
    cout << "Listening for a connection to port " << portNumber <<"..." << endl;
    listen(networkSocket, SOMAXCONN);
    cout << "Found a connection!" << endl;
} 
```

感谢您提供任何解释/建议 - 提前感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:17:08.797

你混淆`listen`了`accept`. `listen`为您的应用程序保留端口，并将传入连接排队。 `accept`等待传入连接（如果尚未排队）。

`listen`当没有传入连接尝试时将成功。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T02:21:21.467

[http://linux.die.net/man/2/listen](http://linux.die.net/man/2/listen)

listen() 将 sockfd 引用的套接字标记为被动套接字，即将使用 accept(2) 接受传入连接请求的套接字。

您必须先调用“listen()”，然后才能调用“accept()”；但“accept()”是接受新连接的调用（并为每个新连接提供一个新套接字）。

这是“accept()”的手册页：

[http://linux.die.net/man/2/accept](http://linux.die.net/man/2/accept)

更好的是，查看 Beej 的指南以获得关于套接字编程的精彩介绍：

[http://beej.us/guide/bgnet/output/html/multipage/](http://beej.us/guide/bgnet/output/html/multipage/)

PS：

如果您使用的是 Windows 套接字，请不要忘记调用 WSAStartup() :)

# node.js - 等待异步完成后再返回

> ID：15736791
> 
> 赞同：3
> 
> 时间：2013-04-01T02:14:57.130
> 
> 标签：node.js, asynchronous, mongoose

mongoosejs 异步代码。

```
 userSchema.static('alreadyExists',function(name){
    var isPresent;
        this.count({alias : name },function(err,count){
        isPresent = !!count
        });
    console.log('Value of flag '+isPresent);
    return isPresent;
}); 
```

我知道 isPresent 在 this.count 异步函数调用回调之前返回，所以它的值是 undefined 。但是我如何等待回调改变 isPresent 的值然后安全返回？

异步流中有什么影响 `(function(){ asynccalls() asynccall() })();`。如果 var`foo = asynccall() or (function(){})()` 上面两个会让 return 等待会发生什么？

可以`process.nextTick()`帮忙吗？

我知道有很多这样的问题，但没有解释在异步完成之前返回的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:31:13.257

没有办法做到这一点。您需要更改函数的签名以获取回调而不是返回值。

使 IO 异步是 Node.js 的主要动机之一，而等待异步调用完成则违背了目的。

如果你给我更多关于你想要达到的目标的背景信息，我可以给你一些关于如何用回调来实现它的指导。

编辑：您需要以下内容：

```
userSchema.static('alreadyExists',function (name, callback) {
    this.count({alias : name}, function (err, count) {
        callback(err, err ? null : !!count);
        console.log('Value of flag ' + !!count);     
    });
}); 
```

然后，您可以像这样使用它：

```
User.alreadyExists('username', function (err, exists) {
    if (err) {
        // Handle error
        return;
    }

    if (exists) {
        // Pick another username.
    } else {
        // Continue with this username.
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T15:09:48.583

有同样的问题。我希望我的 mocha 测试运行得非常快（就像他们最初所做的那样），但同时在我的应用程序中存在并运行反 DOS 层。像最初那样运行这些测试非常快，我正在使用的 ddos​​ 模块开始响应 Too Many Requests 错误，导致测试失败。我不想仅仅出于测试目的而禁用它（我实际上希望进行自动化测试来验证 Too Many Requests 案例是否存在）。

我有一个地方供所有为 HTTPS 请求准备客户端的测试使用（填充正确的标头、经过身份验证、使用 cookie 等）。它或多或少看起来像这样：

```
var agent = thiz.getAgent();
thiz.log('preReq for user ' + thiz.username);
thiz.log('preReq for ' + req.url + ' for agent ' + agent.mochaname);

if(thiz.headers) {
    Object.keys(thiz.headers).map(function(header) {
        thiz.log('preReq header ' + header);
        req.set(header, thiz.headers[header]);
    });
}
agent.attachCookies(req); 
```

所以我想在那里注入一个睡眠，每 5 次这个客户端被测试请求执行一个请求就会启动 - 所以整个套件会快速运行，并且每 5 个请求都会等待让 ddos​​ 模块认为我的请求不受惩罚由太多请求错误。

我在这里搜索了大多数关于 Async 和其他库或实践的条目。所有这些都需要进行回调——这意味着我将不得不重新编写数百个测试用例。

最后，我放弃了任何优雅的解决方案，转而使用适合我的解决方案。这是添加一个 for 循环试图检查不存在文件的状态。它导致操作执行的时间足够长，我可以将其校准为持续大约 6500 毫秒。

```
for(var i = 0; i < 200000; ++i) {
    try {
        fs.statSync('/path' + i);
    } catch(err) {
    }
}; 
```

# python - 使用python的矩阵

> ID：15736794
> 
> 赞同：0
> 
> 时间：2013-04-01T02:15:17.523
> 
> 标签：python

我是 python 新手，我正在编写一个矩阵程序，但是有一个问题我不知道如何获得正确的输出，我需要帮助。这就是问题：给定一个 nXn 矩阵 A 和一个 kXn 矩阵 B 找到 AB 。这就是我到目前为止所拥有的。先感谢您

```
def matrixmult (A, B):
    rows_A = len(A)
    cols_A = len(A[0])
    rows_B = len(B)
    cols_B = len(B[0])

    if cols_A != rows_B:
      print "Cannot multiply the two matrices. Incorrect dimensions."
      return

    # Create the result matrix
    # Dimensions would be rows_A x cols_B
    C = [[0 for row in range(cols_B)] for col in range(rows_A)]
    print C

    for i in range(rows_A):
        for j in range(cols_B):
            for k in range(cols_A):
                C[i][j] += A[i][k]*B[k][j]
    return C 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:28:50.490

你的功能：

```
def matrixmult (A, B):
    rows_A = len(A)
    cols_A = len(A[0])
    rows_B = len(B)
    cols_B = len(B[0])

    if cols_A != rows_B:
      print "Cannot multiply the two matrices. Incorrect dimensions."
      return

    # Create the result matrix
    # Dimensions would be rows_A x cols_B
    C = [[0 for row in range(cols_B)] for col in range(rows_A)]
    print C

    for i in range(rows_A):
        for j in range(cols_B):
            for k in range(cols_A):
                C[i][j] += A[i][k]*B[k][j]
    return C 
```

这似乎与[此功能](https://stackoverflow.com/a/10508133/298607)相同。

如果我运行这个：

```
matrix=[[1,2,3],
    [4,5,6],
    [7,8,9]]

print matrixmult(matrix, matrix)    # that is your function... 
```

它返回：

```
[[30, 36, 42], [66, 81, 96], [102, 126, 150]] 
```

这与 Numpy 相同：

```
import numpy as np

a=np.array(matrix)
b=np.array(matrix)
print np.dot(a,b)
#  [[ 30  36  42]
    [ 66  81  96]
    [102 126 150]] 
```

与矩阵乘法相同，更简洁地说：

```
def mult(mtx_a,mtx_b):
    tpos_b = zip( *mtx_b)
    rtn = [[ sum( ea*eb for ea,eb in zip(a,b)) for b in tpos_b] for a in mtx_a]
    return rtn 
```

所以——问题可能出在你的输入数据上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:33:03.780

使用 numPy 库来解决您的问题。

> 将 numpy 导入为 np
> 
> x = np.array( ((2,3), (3, 5)) )
> 
> y = np.array( ((1,2), (5, -1)) )
> 
> 打印 x * y

数组([[ 2, 6], [15, -5]])

更多示例： http: [//www.python-course.eu/matrix_arithmetic.php](http://www.python-course.eu/matrix_arithmetic.php)

下载 numPy： [http ://scipy.org/Download](http://scipy.org/Download)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-26T15:18:47.203

一个班轮：

```
def matrixmult(m1, m2):
    return [
        [sum(x * y for x, y in zip(m1_r, m2_c)) for m2_c in zip(*m2)] for m1_r in m1
    ] 
```

解释：

> zip(*m2) - 从第二个矩阵中获取一列
> 
> zip(m1_r, m2_c) - 从 m1 行和 m2 列创建元组
> 
> sum(...) - 对乘法行求和 * col

测试：

```
m1 = [[1, 2, 3], [4, 5, 6]]
m2 = [[7, 8], [9, 10], [11, 12]]
result = matrixmult(m1, m2)
assert result == [[58, 64], [139, 154]] 
```

# sql - 在 SQL 中查找最古老祖先的所有后代

> ID：15736796
> 
> 赞同：2
> 
> 时间：2013-04-01T02:15:34.510
> 
> 标签：sql, sql-server-2008, tsql

几天来，我一直在尝试找出解决此问题的方法，但未能找到答案。我拥有的是一个如下所示的数据集：

```
Id      ParentId    Name
16      NULL        i_ss_16_Grommets
25      16          ss_25_Grommets
26      NULL        inactive_Grommets Clone
27      NULL        inactive_Grommets Clone Clone
46      25          ss_46_Grommets
47      46          ss_47_Grommets
48      47          Grommets 
```

我需要想出一个函数，我可以在其中传递一个 Id，然后获取正确的名称。我需要查找名称的方式涉及一种反向层次结构，因为它是要使用的分支中最小的孩子。例如，如果我传入 Id 46，我需要该函数返回“Grommets”。如果我传入 Id 47，我需要看到“Grommets”，如果我传入 Id 26，我会看到“inactive_Grommets Clone”，因为没有后代。

尽管看起来我可以去掉后面带下划线的任何东西，但我不能这样做，因为不能保证孩子的名字会相同。

希望这是有道理的。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T07:28:18.027

具有递归 CTE 的选项

```
DECLARE @Id int = 46
;WITH cte AS
 (
  SELECT Id, ParentId, Name
  FROM dbo.test60
  WHERE Id = @Id
  UNION ALL
  SELECT t.Id, t.ParentId, t.Name
  FROM dbo.test60 t JOIN cte c ON t.ParentId = c.Id
  )
  SELECT TOP 1 *
  FROM cte
  ORDER BY Id DESC 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/97d43/1)上的演示[](http://sqlfiddle.com/#!3/97d43/1)

# java - 来自 if/else 语句的 Java 字符串赋值

> ID：15736798
> 
> 赞同：0
> 
> 时间：2013-04-01T02:15:38.807
> 
> 标签：java, string

我对java很陌生，我一直在尝试调试这段代码一段时间。我想肯定有一些我对字符串不完全了解的东西，所以我想我会硬着头皮去 Stackoverflow 上提问。

```
int s1Len = s1.length();
int s2Len = s2.length();                
if(s1Len < s2Len){
    String bigInput = s2;
    String smallInput = s1;
}
else{
    String bigInput = s1;
    String smallInput = s2;
}

char[] bigCharArr = bigInput.toCharArray();
char[] smallCharArr = smallInput.toCharArray(); 
```

错误是当我尝试将变量 bigInput 和 smallInput 转换为 char 数组时，编译器无法识别它们。早些时候我没有 if/else 语句来确定较大的字符串，它工作正常。我使用了 print 语句，并且在我通过 if/else 语句之前，可以识别字符串 bigInput 和 smallInput。

s1 和 s2 也是我之前解析的另一个 String 中的其他 String 类标记。

任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T02:16:47.463

当您在块中声明变量时，它是该块的本地变量，并且不能从块外部访问

在块外声明你的字符串

```
 String bigInput = "";
      String smallInput = "";

      int s1Len = s1.length();
      int s2Len = s2.length();                
      if(s1Len < s2Len){
           bigInput = s2;
           smallInput = s1;
      }
      else{
           bigInput = s1;
           smallInput = s2;
      }

      char[] bigCharArr = bigInput.toCharArray();
      char[] smallCharArr = smallInput.toCharArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T02:17:56.223

您在 if/else 块中声明变量。这意味着它在 if/else 块中是本地的，并且只能在 if/else 块的括号之间看到。

尝试

```
int s1Len = s1.length();
int s2Len = s2.length();                
String bigInput = "";
String smallInput = "";

if(s1Len < s2Len){
    bigInput = s2;
    smallInput = s1;
}
else{
    bigInput = s1;
    smallInput = s2;
}

char[] bigCharArr = bigInput.toCharArray();
char[] smallCharArr = smallInput.toCharArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T02:20:33.977

定义

```
String bigInput;
String smallInput; 
```

在代码的顶部。

# php - MySQL - PHP 列总和

> ID：15736802
> 
> 赞同：0
> 
> 时间：2013-04-01T02:16:36.933
> 
> 标签：php, mysql

我在整个互联网上进行了搜索，发现了有关如何使用 PHP 和 MySQL 表进行列求和的各种“有用”提示。问题是我无法让他们中的任何一个工作。

本质上，我有一个非常简单的数据库，有 2 个用户。数据库中的表称为用户，每个条目都有一个“名称”和“总步数”。我要做的就是显示每个用户的总步数的结果，然后是他们的步数总和。

这是我的代码：

```
<?php
$steps = mysql_query("SELECT SUM(Total_Steps) AS value_sum FROM users");
$row = mysql_fetch_assoc($steps);
$sum = $row['value_sum'];
?> 
```

但是，我在加载页面时收到此错误：

```
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /nfs/nfs4/home/msnether/apache/htdocs/st.php 
```

由于我还不太了解 PHP 或 MySQL，所以这非常令人沮丧，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:19:40.453

如果你“不太了解 PHP 和 Mysql”那么，了解`or die(mysql_error())`将是你未来非常有用的工具。就在这里加上吧，看看mysql会让你有什么礼貌的理解。

```
$steps = mysql_query("SELECT SUM(Total_Steps) AS value_sum FROM users") or die(mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:30:43.457

如果您是使用 php 和 mysql 的初学者，以下是您的基本步骤。

首先：为数据库用户、通行证、主机设置配置

```
$conn = mysql_connect('database_server','database_username','database_password'); 
```

SECOND ：执行数据库连接。

```
mysql_select_db($conn,'database name'); 
```

第三：创建一个查询（您可以在此处插入您的查询）..

```
$sql= mysql_query("SELECT SUM(Total_Steps) AS value_sum FROM users"); 
```

最后：使用 MYSQL 函数显示的记录，如..

```
while($row = mysql_fetch_array($sql)){
    echo $row['dabatase_columnname'];
    echo $row['database_columnname'];
} 
```

# ios - 如果子视图包含手势，取消 UIGestureRecognizer？

> ID：15736804
> 
> 赞同：2
> 
> 时间：2013-04-01T02:16:44.580
> 
> 标签：ios, uipangesturerecognizer

我最初使用`UITouch`方法 ( `touchesMoved: withEvent:`) 是为了检测视图中的移动。由于它似乎没有经常更新，我改用 a `UIPanGestureRecognizer`（尽管这实际上并没有解决最初的问题）。

使用此功能后，无论我实际喜欢什么触摸（不同的子视图），收到的运动触摸都会响应。但是现在我对所有有运动的子视图都有疑问。即使在触摸子视图时，我也需要手势识别器仍然移动视图，但是如果子视图也在这个方向（左/右）移动，我需要我的识别器取消。

似乎`gestureRecognizerShouldBegin:`可以从某个地方开始，但就我而言，我无法解释所有子视图。

`UISlider`如果触摸的子视图（即另一个平移识别器，水平滚动视图等）需要在左/右方向上移动而不必单独考虑每个子视图，是否可以取消平移手势识别器？

# node.js - 在 node.js 中跨文件共享变量而不使用全局变量

> ID：15736806
> 
> 赞同：10
> 
> 时间：2013-04-01T02:16:52.657
> 
> 标签：node.js, express, socket.io

我正在尝试将我的 socket.io 代码与我的主文件（app.js）分开到一个单独的文件（socket.js）中。但是，我需要在 app.js 中定义我的 io 对象，该对象也在我的 socket.js 文件中使用。

目前，我将 io 设置为全局变量，因此可以从 app.js 访问它（ app.js[中的全局变量可在路由中访问？](https://stackoverflow.com/questions/9765215/global-variable-in-app-js-accessible-in-routes)），但我知道这是不好的做法。有没有更好的方法来做到这一点（在这种情况下注入可以工作，因为我需要将变量从 app.js 导出到 socket.js 而不是相反）？谢谢！

应用程序.js

```
var app = express(),
  server = require('http').createServer(app);

//KIV -> io is set as a global variable
io = require('socket.io').listen(server);
require('./socket'); 
```

socket.js

```
io.sockets.on('connection', function(socket) {
    //xxx
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-01T03:26:06.410

其中一种方法是将对象作为参数传递给函数（正如@Thomas 的回答中已经描述的那样）。

另一种方法是创建一个新文件，比如“global.js”。仅将您希望全局化的那些项目放在此文件中。例如

```
var Global = {
    io : { }
};    
module.exports = Global; 
```

现在，在你的 app.js 中，

```
var app = express(),
    server = require('http').createServer(app), 
    global = require('./global.js');

global.io = require('socket.io').listen(server);
require('./socket'); 
```

在你的 socket.js 中：

```
var global = require('./global.js');
global.io.sockets.on('connection', function(socket) {
    //xxx
} 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-01T02:32:28.820

应用程序.js

```
var app = express(),
  server = require('http').createServer(app),
  socket = require('./socket');

var io = require('socket.io').listen(server);

socket(io) 
```

socket.js

```
module.exports = function (io) {
  io.sockets.on('connection', function(socket) {
    // Your code here

  });
} 
```

# c# - 跨多个控件共享事件处理程序

> ID：15736807
> 
> 赞同：6
> 
> 时间：2013-04-01T02:16:54.090
> 
> 标签：c#, winforms, optimization, button, event-handling

在我用 C# 编写的 Windows 窗体应用程序中，我有一堆按钮。当用户的鼠标悬停在按钮上时，我希望按钮的边框发生变化。

目前我有以下多个实例（每个按钮的副本）：

```
private void btnStopServer_MouseEnter(object sender, EventArgs e)
{
    oldColor = btnStopServer.FlatAppearance.BorderColor;
    btnStopServer.FlatAppearance.BorderColor = mouseOverColor;
}

private void btnStopServer_MouseLeave(object sender, EventArgs e)
{
    btnStopServer.FlatAppearance.BorderColor = oldColor;
} 
```

由于我有很多按钮，因此更改按钮边框颜色的代码占用了大量空间。

**有没有更简单的方法可以做到这一点？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T02:23:13.003

您应该将单个`MouseEnter`和`MouseLeave`连接到需要此功能的每个控件（而不是为每个控件编写每个方法的新版本）。假设您使用的是 Visual Studio，这可以通过在每个 Button 的属性窗格中更改事件的目标方法名称来完成。如果您先编写以下代码，则此方法将出现在属性`MouseEnter`和`MouseLeave`事件的下拉列表中。

然后代码需要检查触发事件*的*按钮，如下所示：

```
private void btnWithHoverBorder_MouseEnter(object sender, EventArgs e)
{
    Button eventButton = (Button) sender;
    oldColor = eventButton.FlatAppearance.BorderColor;
    eventButton.FlatAppearance.BorderColor = mouseOverColor;
}

private void btnWithHoverBorder_MouseLeave(object sender, EventArgs e)
{
    Button eventButton = (Button) sender;
    eventButton.FlatAppearance.BorderColor = oldColor;
} 
```

我认为`oldColor`是全球性的？如果在捕获`MouseEnter`相应按钮之前为另一个按钮触发事件的地方发生“奇怪”的事情，这可能会不同步。`MouseLeave`为了使它更健壮，我会考虑将旧颜色存储在 Button 的`.tag`属性中，以便它是独立的。

例如：

```
private void btnWithHoverBorder_MouseEnter(object sender, EventArgs e)
{
    Button eventButton = (Button) sender;
    eventButton.tag = eventButton.FlatAppearance.BorderColor;
    eventButton.FlatAppearance.BorderColor = mouseOverColor;
}

private void btnWithHoverBorder_MouseLeave(object sender, EventArgs e)
{
    Button eventButton = (Button) sender;
    eventButton.FlatAppearance.BorderColor = (Color)eventButton.tag;
} 
```

（标签基本上是一个钩子，用来标记与特定控件实例相关的“任何东西”，还没有属性。它的类型`Object`意味着你可以在那里标记任何东西，但是当你从中读取时，你需要将它转换回你首先放在那里的任何类型.但是因为它是一个`Object`你可以放任何东西的地方,包括例如一个包含多个属性的自定义类,或者一个数组等,如果你需要标记一个控件不止一件事）。

# java - 运动体 LIBGDX 中的碰撞检测

> ID：15736808
> 
> 赞同：3
> 
> 时间：2013-04-01T02:16:59.137
> 
> 标签：java, box2d, collision-detection, libgdx

我设法在 libgdx 中使用了 box2d。但是，[此处](https://stackoverflow.com/questions/15453176/how-to-use-the-libgdx-contactlistener)给出的示例代码仅适用于动态主体。我尝试使用它并且效果很好，但是当我将 Dynamic 更改为 KinematicBody 时，代码不起作用。这是我的代码

```
 @Override
        public void create() {
      // Create our body definition
            BodyDef groundBodyDef =new BodyDef();
            groundBodyDef.type = BodyDef.BodyType.StaticBody;
    // Set its world position
            groundBodyDef.position.set(new Vector2(0, 10));

    // Create a body from the defintion and add it to the world
             groundBody = world.createBody(groundBodyDef);

    // Create a polygon shape
            PolygonShape groundBox = new PolygonShape();
    // Set the polygon shape as a box which is twice the size of our view port and 20 high
    // (setAsBox takes half-width and half-height as arguments)
            groundBox.setAsBox(camera.viewportWidth, 10.0f);
    // Create a fixture from our polygon shape and add it to our ground body
            groundBody.createFixture(groundBox, 0.0f);
    // Clean up after ourselves
            groundBox.dispose();

            //endregion

            BodyDef bodyDef = new BodyDef();
    // We set our body to dynamic, for something like ground which doesnt move we would set it to StaticBody
            bodyDef.type = BodyDef.BodyType.KinematicBody;
    // Set our body's starting position in the world
            bodyDef.position.set(bolaX, bolaY);

    // Create our body in the world using our body definition
             body = world.createBody(bodyDef);

    // Create a circle shape and set its radius to 6
            CircleShape circle = new CircleShape();
            circle.setRadius(20f);

    // Create a fixture definition to apply our shape to
            FixtureDef fixtureDef = new FixtureDef();
            fixtureDef.shape = circle;
            fixtureDef.density = 20;

            fixtureDef.friction = 0;
            fixtureDef.restitution = 0.6f; // Make it bounce a little bit

    // Create our fixture and attach it to the body
            Fixture fixture = body.createFixture(fixtureDef);

    // Remember to dispose of any shapes after you're done with them!
    // BodyDef and FixtureDef don't need disposing, but shapes do.
            circle.dispose();

            Gdx.input.setInputProcessor(this);
    }

     @Override
        public void render() {

            world.step(1/60f, 6, 2);

            Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
            camera.update();

            //batch.getProjectionMatrix().set(camera.combined);
            batch.begin();
            textureBodies = body.getPosition();
            float angle = MathUtils.radiansToDegrees * body.getAngle();
            //batch.draw(ball,textureBodies.x ,textureBodies.y  );
            batch.draw(ball, textureBodies.x - (bola.getWidth() / 2) , textureBodies.y - (bola.getHeight()/2) , // the bottom left corner of the box, unrotated
                    1f, 1f, // the rotation center relative to the bottom left corner of the box
                    bola.getWidth(), bola.getHeight(), // the width and height of the box
                    1, 1, // the scale on the x- and y-axis
                    angle);
            batch.end();

            debugRenderer.render(world, camera.combined);
                if(Gdx.input.isKeyPressed(Input.Keys.DPAD_UP)){
                    Gdx.app.log("Input Test", "key down: " + "aw ---- x" +  body.getPosition().x + "  y   " + body.getPosition().y);
                    vel += 1;
                    //Gdx.app.log("vel","" + vel);
                    body.setLinearVelocity(0f,vel);
                } else{
                    vel -= 1;
                   // Gdx.app.log("vel","" + body.getPosition().y);
                    body.setLinearVelocity(0f,vel);
                }

  int numContacts = world.getContactCount();
        if (numContacts > 0) {
            Gdx.app.log("contact", "start of contact list");
            for (Contact contact : world.getContactList()) {
                Fixture fixtureA = contact.getFixtureA();
                Fixture fixtureB = contact.getFixtureB();
                Gdx.app.log("contact", "between " + fixtureA.toString() + " and " + fixtureB.toString());
            }
            Gdx.app.log("contact", "end of contact list");
        }

        } 
```

这是图像。您可以看到左侧是 DynamicBody，右侧是 KinematicBody。

![在此处输入图像描述](https://i.stack.imgur.com/FZPEJ.png)

获取联系人适用于 Dynamic Body 但不适用于 Kinematic Body。你能告诉如何检测运动体中的碰撞吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T06:41:33.233

运动体不会与静态体发生碰撞。可能这会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-14T08:13:29.353

运动体仅受速度影响，不受力影响 静态体具有 O 位移，但受力影响，即它们在碰撞时产生冲量，而动态体两者都有

# arrays - 更有效地将值存储在数组的哈希中

> ID：15736809
> 
> 赞同：0
> 
> 时间：2013-04-01T02:17:06.470
> 
> 标签：arrays, performance, perl, hash

我正在编写一个生成大型数组散列（HoA）数据结构的脚本。我正在尝试优化我的脚本，因为目前它需要永远运行。

最近我从一个网站上读到，可以进一步提高脚本执行速度的一种方法是使用子例程将值存储在数组哈希中。它说它对大型数据结构特别有用。

这是文章给出的例子。

```
sub build_hash{
    # takes 3 params: hashref, name, and value
    return if not $_[2];

    push(@{ $_[0]->{'names'} }, $_[1]);
    push(@{ $_[0]->{'value'} }, $_[2]);

    # return a reference to the hash (smaller than making copy)
    return $_[0];
} 
```

文章说调用这个子例程来构建 HoA比将值推送到子例程之外的数组散列上**快 40% 。**该子例程据说速度很快，因为它使用引用构建数据结构。

我想通过构建我自己的 HoA 来测试这个子程序。假设我想创建以下数组散列。

```
%HoA = (
    'C1' =>  ['1', '3', '3', '3'],
    'C2' => ['3','2'],
    'C3' => ['1','3','3','4','5','5'],
    'C4'  => ['3','3','4'],
    'C5' => ['1'],
); 
```

我将如何实现 build_hash 来做到这一点？另外，我该如何调用这个子程序？

这就是我所拥有的，但它不是很有效。

```
# let AoA be an array of arrays that contains the values I want to assign
# to each key in %HoA
my @AoA = (
            ['1', '3', '3', '3'],
            ['3','2'],
            ['1','3','3','4','5','5'],
            ['3','3','4'],
            ['1']
          );
my %HoA;
my $count = 1;

foreach my $ref (@AoA){
    build_hash(\%HoA, $ref, "C$count");
    $count++;
}

sub build_hash {
    # takes 3 params: hashref, arrayref, and key
    return if not $_[2];
    push(@{ $_[0]->{$_[1]} }, $_[2]);

    # return reference to HoA_ref (smaller than making copy)
    return $_[0];
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-26T18:27:59.467

我很高兴你喜欢我的演示文稿，但我认为如果没有随之而来的谈话，这张幻灯片的重点就不会出现。我试图展示如何直接访问 @_ 而不是将内容复制到局部变量中，可以在非常频繁地调用和其他最小的 sub 上节省一些时间。

构建 HoA 不太可能真的是程序中缓慢的部分。我建议您在进行幻灯片中显示的更改之前执行我所做的更改，即在您的程序上运行 Devel::NYTProf 并查看时间的去向。然后你就会知道需要修复什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T02:39:35.233

```
my %HoA; $HoA{"C$_"} = $AoA[$_-1] for 1..@AoA; 
```

或者

```
my %HoA; @HoA{ map "C$_", 1..@AoA } = @AoA; 
```

或者

```
my %HoA = map { "C$_" => $AoA[$_-1] } 1..@AoA; 
```

从最快到最慢排序（我认为），但它们几乎都和另一个一样快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T03:12:36.830

那些幻灯片根本*不是这么说的。*Perrin 展示的是一种减少子调用开销的方法，*假设您完全需要子例程*，因为调用子例程需要时间。您不会通过在不需要的地方添加子例程来使代码更快。

# apache - 使用 Apache RewiteEngine / .htaccess 后无法显示图像

> ID：15736813
> 
> 赞同：1
> 
> 时间：2013-04-01T02:17:26.673
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting

我在这里有一个问题：

在我的服务器上，有：

[http://www.domain.com/folder1/abc/html/index.html](http://www.domain.com/folder1/abc/html/index.html)

在 index.html 中有一些图片或 pdf 文件的链接：

然后我使用 .htaccess 使 URL 更短并且它可以工作：

[http://www.domain.com/~abc](http://www.domain.com/~abc)

但是在浏览器中，图片的链接显示：

[http://www.domain.com/pic.jpg](http://www.domain.com/pic.jpg)

无法显示。甚至我试图访问：

[http://www.domain.com/~abc/pic.jpg](http://www.domain.com/~abc/pic.jpg)

我收到 404 错误。

这是我的 .htaccess，我有什么问题还是遗漏了什么？

```
选项 +FollowSymLinks
重写引擎开启
RewriteRule ^~(.*)$ /personalpages/personal_space/$1/html/
重写规则 ^~(.*)$/(.*)$ /personalpages/personal_space/$1/html/$2

```

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T04:10:43.653

你可以试试这个：

```
Options +FollowSymlinks -MultiViews
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI}  !/personalpages/ [NC]
RewriteRule ^([^/]+)/?$   /personalpages/personal_space/$1/html/  [L,NC]

RewriteCond %{REQUEST_URI}  !/personalpages/ [NC]
RewriteRule ^([^/]+)/(.*)/?$  /personalpages/personal_space/$1/html/$2  [L,NC] 
```

# java - 使用 SwingUtilities.invokeLater(Runnable r) 的另一种方法？

> ID：15736816
> 
> 赞同：1
> 
> 时间：2013-04-01T02:18:02.627
> 
> 标签：java, swing, event-dispatch-thread

我所有的示例程序都创建了一个`JFrame`包含其组件所有代码的 big，而不是为组件创建单独的类，然后将这些组件添加到 big `JFrame`. 这个 big`JFrame`是通过在匿名内部实例化来运行或显示的`Runnable`，如下所示。

```
public static void main(String args[]) {  
    // Create the frame on the event dispatching thread.  
    SwingUtilities.invokeLater(new Runnable() {  
        public void run() {  
            new StopWatch();  // Or any other JFrame
        }  
    });  
} 
```

类`StopWatch`实现`ActionListener`。如果我将其作为类`StopWatch`实现`ActionListener`，`Runnable`然后将其作为可运行对象传递给`invokeLater`方法，会有什么不同吗？有没有其他方法可以做上面的代码？

# google-maps - 在没有标记的 Google Maps v3 中显示 InfoWindow onMouseOver

> ID：15736817
> 
> 赞同：2
> 
> 时间：2013-04-01T02:18:49.633
> 
> 标签：google-maps, google-maps-api-3

我有一张地图，其中有定义不同位置的多边形。

我试图在指针悬停在多边形上时触发一个信息窗口，然后在鼠标离开时将其删除。我有多边形的中心坐标，并且没有标记。

我发现的所有信息窗口示例都基于标记点。

没有标记我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:27:05.767

您可以将 infoWindow 创建附加到多边形`mouseover`事件。然后在用户鼠标移出时关闭窗口。像这样的东西：

```
google.maps.event.AddListener("mouseover", polygon, function() {
    infoWindow.setPosition(latLng)
    infoWindow.open(map)

})
google.maps.event.AddListener("mouseout", polygon, function() {
    infoWindow.close()
}) 
```

# hadoop - 从普通数据库表创建大数据

> ID：15736821
> 
> 赞同：-2
> 
> 时间：2013-04-01T02:19:12.200
> 
> 标签：hadoop, bigdata

我们有一个应用程序，其中包含一个包含我们每天都在引用的事务数据的表。它有数百万行。显然查询该表非常慢。

有什么方法可以从该表中创建大数据并使用 hadoop 和相关技术来查询结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:31:54.903

您可以使用 Apache Sqoop，将大型数据库导入 Hadoop。每天最后（或根据您自己的计划），您可以将已完成的交易导入您加载的现有数据库中。因此，您每天都会通过这种方式将事务添加到 Hadoop 中的现有数据中。

你需要看到的技术

Sqoop：从数据库 Hive 导入数据：提供类似 SQL 的接口来查询该数据 Search Apache Hive Oozie：安排每天导入数据的工作。搜索 Apache oozie Sqoop 具有执行增量加载的功能，您可以使用它。

除了 Hive 你可以使用 Impala 来查询数据，它的工作速度非常快

# javascript - 合并这两个 if...else 语句

> ID：15736826
> 
> 赞同：0
> 
> 时间：2013-04-01T02:19:55.733
> 
> 标签：javascript, jquery

抱歉，我是 jQuery 新手。所以我有这个带有两个 if else 语句的 jQuery 代码，我想合并它，因为我觉得这是不必要的重复。它们是有些不同的代码，因为一次作用于`ul#tabs li a`，另一个作用于`ul.tabs li a`。如何合并它们以提高性能？这是代码：

```
$(document).ready(function() 
{
    var hash = location.hash;

    $(".tab_content").hide(); //Hide all content

    if ($("ul#tabs li a[href='" + hash + "']").length) 
    { 
        $("ul#tabs li a[href='" + hash + "']")
            .addClass("active")
            .parent()
            .addClass("active"); //Activate tab

        $(hash).show();
    }
    else 
    {
        do stuff
    }  

    if ($("ul.tabs li a[href='" + hash + "']").length) 
    {
        $("ul.tabs li a[href='" + hash + "']")
            .addClass("active")
            .parent()
            .addClass("active"); //Activate tab

        $(hash).show();
    }
    else 
    {
        do stuff
    }  
}); 
```

如何合并这两个代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:24:48.823

逗号运算符 ,`,`在 CSS 和 jQuery 中用于指定多个选择器：

```
 var sel = $("ul.tabs li a[href='" + hash + "'], ul#tabs li a[href='" + hash + "']");
    if (sel.length) { 
        sel.addClass("active").parent().addClass("active"); //Activate tab
        $(hash).show();
    }
    else {
        do stuff
    } 
```

您可以进一步减少重复：

```
var sel = $("ul.tabs, ul#tabs").find("li a[href='" + hash + "']");
.... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T02:29:58.377

[您可以使用带逗号的多个选择器](http://api.jquery.com/multiple-selector/)：

```
if ($("ul.tabs li a[href='" + hash + "'], ul#tabs li a[href='" + hash + "'] ").length) { 
```

对于您的情况，您可以使用以下`each()`方法：

```
var el = $("ul.tabs li a[href='" + hash + "'], ul#tabs li a[href='" + hash + "']");

if(el.length) {
    el.each(function() {
        $(this).addClass("active").parent().addClass("active");
        $(hash).show();
    }); 
} else {
   // do else stuff
} 
```

# python - 使用python在json中查找文本

> ID：15736830
> 
> 赞同：0
> 
> 时间：2013-04-01T02:20:47.650
> 
> 标签：python, json

我有一个 json 文件，我正在将其导入 Python 并试图寻找一个短语的出现。如果我试试这个：

```
any(keyword in s for s in json_data) 
```

其中关键字是我正在寻找的东西，而 json_data 是我从使用 json.load() 中得到的。即使关键字在 json_data 中，它也总是返回 false。这是我如何索引到 json：

```
json_data["thing1"]["thing2"][0]["thing3"] 
```

字段 [0] 从 0-16 不等，我想要的东西在 thing3 中。为什么即使关键字在 json_data 中我也不能得到 True？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:25:53.980

```
any(keyword in s for s in json_data) 
```

正在查找一级词典，`thing1`位于何处。您必须查看包含 的字典`thing3`，这是索引的字典

```
any(keyword in s for s in json_data["thing1"]["thing2"]) 
```

假设您`thing3`正在`keyword`寻找...

# ios - 在 iOS 上查找 Facebook SDK 版本

> ID：15736831
> 
> 赞同：60
> 
> 时间：2013-04-01T02:20:58.420
> 
> 标签：ios, facebook

我知道我使用的是最新版本（v3.2.1）。但我想在标题中或以编程方式找到它。

在 iOS 中，我在 FacebookSDK.framework 标头中找不到版本号。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-07-10T13:09:46.310

大约在 2014 年之后，只需执行以下操作：

```
NSLog( @"### running FB sdk version: %@", [FBSDKSettings sdkVersion] ); 
```

* * *

对于非常旧的版本。3.6左右之前：

我找到了一种打印 SDK 版本（FB_IOS_SDK_VERSION_STRING）的无证方法，试试这个

```
NSLog(@"### FB SDK VERSION : %@",
    [[FBRequestConnection class] performSelector:@selector(userAgent)]); 
```

使用 sdk 3.5.1 为我工作

希望有帮助...

* * *

更新：从 FB SDK 3.6 开始， **“SDK 版本号在 FacebookSDK.h 中定义，可从 [FBSDKSettings sdkVersion] 获得”**

[https://developers.facebook.com/ios/change-log-3.x/](https://developers.facebook.com/ios/change-log-3.x/)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-06-05T10:50:01.507

您可以找到`FBSDKCoreKit.h`定义为的 Facebook SDK 版本

`#define FBSDK_VERSION_STRING @"X.XX.X"`. 看看下面的图片。

[![在此处输入图像描述](https://i.stack.imgur.com/ySVka.png)](https://i.stack.imgur.com/ySVka.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-01T02:37:46.720

看看`FBSDKVersion.h`。那里有一个定义：

`#define FB_IOS_SDK_VERSION_STRING @"3.2.1"`

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-03-31T16:42:23.787

对于那些运行 SDK 版本 >= 4 的用户，`[FBSDKSettings sdkVersion]`.

```
#import <FBSDKCoreKit/FBSDKCoreKit.h>

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    NSLog(@"### Running FB SDK Version: %@", [FBSDKSettings sdkVersion]);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-04T17:42:43.670

从我做的SDK目录：

```
% find . -name \*.h -exec fgrep -i version {} /dev/null \; 
```

除其他内容外，还返回了以下行：

```
./FBSDKCoreKit.framework/Headers/FBSDKCoreKit.h:#define FBSDK_VERSION_STRING @"4.11.0" 
```

这将帮助您识别版本，而无需实际链接/运行/记录。

Facebook 可能是世界上唯一一家在其 tar/zip 文件以及解压后的根目录中省略版本号的科技公司。我觉得这很莫名其妙。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-09-25T12:03:44.347

在 swift 2, FBSDK 4.4 中你可以输出版本字符串：

```
print("FBSDK Version: \(FBSDK_VERSION_STRING)");
//outputs:
//FBSDK Version: 4.4.0 
```

FBSDKSettings.version() 为我返回 0。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-20T16:06:01.473

要检查 facebook SDK 的当前版本，请使用以下行：

```
 print("SDK version \(FBSDKSettings .sdkVersion())") 
```

就我而言，SDK 版本 4.8.0

针对 swift 2.0 和 xCode 7.0+ 进行测试

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-09T02:54:42.103

对于 Facebook SDK 3.18，我必须这样做

```
#import <FacebookSDK/FacebookSDK.h>

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    NSLog( @"My app is running FB sdk version: %@", [FBSettings sdkVersion]);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-12T03:50:36.280

Try(Android) - 我只发布了这个，因为我正在寻找这个答案并且没有看到 android。

```
String s = FacebookSdk.getSdkVersion();
                Log.d("FacebookSKD_V",s); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-12-12T15:27:45.597

如果您使用的是 pod，您可以检查 Info.plist 文件：

`"Pods/FBSDKCoreKit/Support Files/Info.plist"`

版本是关键`CFBundleShortVersionString`

我的版本是 4.18.0

例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
  <key>CFBundleDevelopmentRegion</key>
  <string>en</string>
  <key>CFBundleExecutable</key>
  <string>${EXECUTABLE_NAME}</string>
  <key>CFBundleIdentifier</key>
  <string>${PRODUCT_BUNDLE_IDENTIFIER}</string>
  <key>CFBundleInfoDictionaryVersion</key>
  <string>6.0</string>
  <key>CFBundleName</key>
  <string>${PRODUCT_NAME}</string>
  <key>CFBundlePackageType</key>
  <string>FMWK</string>
  <key>CFBundleShortVersionString</key>
  <string>4.18.0</string>
  <key>CFBundleSignature</key>
  <string>????</string>
  <key>CFBundleVersion</key>
  <string>${CURRENT_PROJECT_VERSION}</string>
  <key>NSPrincipalClass</key>
  <string></string>
</dict>
</plist> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-11T07:49:18.710

在 Xcode 12 的 11.0 之后，无法在 SPM 上获取它。

# android - 从 Android 应用程序和“正在运行的应用程序”启动另一个应用程序

> ID：15736832
> 
> 赞同：0
> 
> 时间：2013-04-01T02:21:00.323
> 
> 标签：android, android-intent

我有一个 Android 应用程序（我们称之为 AppA），它将使用意图调用另一个应用程序（AppB），使用此处描述的方法：

[从 Android 上的另一个应用程序启动一个应用程序](https://stackoverflow.com/questions/3872063/android-launch-an-application-from-another-application)

使用这些方法，当我按下 AppB 上的后退按钮时，我会按预期返回 AppA。但是，我注意到，当我导航到主屏幕然后调用“最近的应用程序”屏幕时，两个应用程序都会出现在那里，因此，我可以重新打开每个 AppA 和 AppB 并独立使用它们。

有什么办法可以避免这种行为？在我的场景中，如果 AppB 是从中打开的，则用户无法操作 AppA。因此，如果用户在 AppA 从 AppA 打开 AppB 时切换到 home，当切换回 AppA 时，用户应该看到 AppB，因为如果不先关闭 AppB，它应该无法使用 AppA。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:31:37.350

使用`FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS`标志

```
Intent i = new Intent(this, AppB);
i.setFlags(Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T02:31:16.537

`Recent Apps`您可以以编程方式从列表中删除您的活动。例如看这个问题：

[以编程方式从最近的应用程序中删除应用程序](https://stackoverflow.com/q/13385289/1043882)

# java - 键绑定没有响应

> ID：15736836
> 
> 赞同：1
> 
> 时间：2013-04-01T02:21:20.893
> 
> 标签：java, swing, key-bindings, key-events

我遵循了某人在另一个问题上发布的关于通过键绑定来控制对象的示例。为了简单起见，它所控制的只是在按下 VK_UP 时打印“woo”，但它并没有这样做。

[这里](https://stackoverflow.com/questions/7940173/how-do-i-use-keyeventdispatcher/7940227#7940227)的一些代码我仍然无法正常工作。

这里主要

```
import javax.swing.*;

@SuppressWarnings("serial")
public class apples extends JFrame {

    static boolean running;

public static void main(String[] args){
    JFrame f = new JFrame();
    Peach p = new Peach();
    f.getContentPane().add(new test());
    f.add(new test());
    f.add(p);
    f.setSize(400,250);
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.setVisible(true);
    p.run();
    }

} 
```

这是关键绑定的东西

```
 import java.awt.*;
import java.awt.event.*;
import java.util.HashMap;
import java.util.Map;
import javax.swing.*;

@SuppressWarnings("serial")
public class Peach extends JPanel {

    public void paint(Graphics g){
        setOpaque(false);
        super.paintComponent(g);
        this.setBackground(Color.WHITE);

        g.setColor(Color.BLACK);
        g.fillOval(x, y, br, br);

        g.drawString("Sort of Pong?", 157, 20);

        g.setColor(Color.BLACK);
        g.fillRect(paddlex, paddley, psizex, psizey);

        //g.setColor(new Color(51, 255, 204));
        //g.fillRect(100, 100, 80, 100);
        repaint();
    }

public void Panel(){    Thread go = new Thread();
    go.start(); }

    int xpos;
    final int left = -1; //left increment
    final int right = 1; //right increment
    int up = -1; // up increment (negative because down is revered in coordinates)
    int down = 1; // down increment
    boolean check = true; // moving or not
    int x =200; // ball position x
    int y=100; // ball position y
    boolean rightmove = true; // moving right or left
    boolean leftmove = false; // moving left
    boolean upmove = true; // moving up
    boolean downmove = false; // moving down
    int paddlex = 100; // paddle position x
    int paddley = 100; // paddle position y
    int psizex = 100; // paddle size in x dimension 
    int psizey = 100; // paddles size in y dimension
    int cdy; // for checking other side for collisions
    int cdx; // for checking other side for collisions
    int br = 8; // ball radius
    boolean shipupmove = false;
    boolean shipdownmove = true;
    int shipspeed = 1;
    boolean goup;
    long counter = 0;

    public void calc(){
        cdy = psizey + paddley; // for checking other side for collisions
        cdx = psizex + paddlex; // for checking other side for collisions
    }

    public void run(){
        while(true){
            move();
            collisiond();
            calc();
            counter++;
            try
            {
            Thread.sleep(8);
            }
            catch(InterruptedException ex)
            {
                        }
        }
    }

    public void move(){
            if (rightmove){
                if(x <377){
                    x = (x+right);
                }else{rightmove = false; leftmove = true;}
            }
    if(leftmove)
        if(x > 0){                      
        x = (x-right);
        }else{rightmove = true; leftmove= false;}

    if (downmove){
        if(y <205){
            y = (y+down);
        }else{downmove = false; upmove = true;}
    }
    if(upmove)
            if(y > 0){                      
                y = (y+up);
        }else{downmove = true; upmove= false;}  

}

    public void collisiond(){
        if(leftmove && (x ==(cdx+1) || x == (cdx-1) || x == cdx)&& y >= paddley-br && y <= cdy){
            leftmove = false; rightmove = true;
        }
        if(rightmove && (x ==(paddlex-br+1) || x == (paddlex-br-1) || x == paddlex-br) && y >= paddley && y <= cdy){
            rightmove = false; leftmove = true;
        }
        if(upmove && ((y == cdy+1) || (y == cdy-1) || (y == cdy)) && x >= paddlex && x<= cdx){
            upmove = false; downmove = true;
        }
        if(downmove && ((y == paddley - br +1) || (y == paddley - br -1) || (y == paddley - br)) && x > paddlex && x < cdx){
            downmove = false; upmove = true;
        }
    }

    public void movepaddle(){
        if(shipupmove && paddley !=0){
            this.paddley = paddley - 1  ;
        }
        if (shipdownmove && paddley < (205-psizey)){
            this.paddley = paddley + 1;
        }
        if(paddley < 16){
            shipupmove = false; shipdownmove = true;
        }
        if(cdy > 189){
            shipupmove = true; shipdownmove = false;
        }
        repaint();

}
}
class test extends JPanel{

        private static final long serialVersionUID = 1L;
        private Map<Direction, Boolean> directionMap = new HashMap<Direction, Boolean>();
        int DELAY = 5;

        enum Direction {
            UP(KeyEvent.VK_UP,true),
            DOWN(KeyEvent.VK_DOWN, false);
            private int KeyCode;
            boolean moveing;

            Direction(int KeyCode, boolean moveing) {
                this.KeyCode = KeyCode;
                this.moveing = moveing;

            }

            public int getKeyCode(){
                return KeyCode;
            }
            public boolean moveing(){
                return moveing;
            }

        }

    public test(){

        for(Direction direction : Direction.values()){
        directionMap.put(direction, false);

        }
        setBindings();  
        Timer timer = new Timer(5, new TimerListener());
        timer.start();
    }   
    private void setBindings(){
        InputMap in = getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW);
        ActionMap act = getActionMap();
        for(final Direction d : Direction.values()){
            KeyStroke press = KeyStroke.getKeyStroke(d.getKeyCode(), 0 ,false);
            KeyStroke rel = KeyStroke.getKeyStroke(d.getKeyCode(),0,true);
            in.put(press, "key pressed");
            in.put(rel, "key released");
            act.put(d.toString()+"pressed", new AbstractAction(){

                private static final long serialVersionUID = 1L;

                public void actionPerformed(ActionEvent e) {
                    directionMap.put(d, true);      
                }       
            });
            act.put(d.toString()+"released", new AbstractAction(){

                private static final long serialVersionUID = 1L;

                public void actionPerformed(ActionEvent e) {
                                directionMap.put(d, false);
                }
            });
        }

    }

public class TimerListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            for(Direction d : Direction.values()){
                if(directionMap.get(d)){
                    if(d.moveing()){
                        System.out.println("woo");
                    }
                }
            }

        }

    }

} 
```

任何见解将不胜感激谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:25:13.323

`Object`分配给的“actionMapKey”`InputMap`必须与您在`ActionMap`

例如...

```
in.put(press, "key pressed");
in.put(rel, "key released");
act.put("key pressed", new AbstractAction(){...} 
```

# css - JavaScript 库应该如何设置默认 CSS 样式（是否有“！notimportant”？）

> ID：15736838
> 
> 赞同：6
> 
> 时间：2013-04-01T02:21:21.730
> 
> 标签：css, javascript

当 JavaScript 库创建`<div>`. 时，它通常会在 div 上设置一个类，以便库的用户可以自己设置样式。然而，对于 JS 库来说，想要为`<div>`.

库执行此操作的最明显方法是使用内联样式：

```
<div style="application's default styles" class="please-style-me">
  ...
</div> 
```

但是，这将使应用程序的默认样式胜过用户的样式。一种解决方法是使用嵌套 div：

```
<div style="application's default styles">
  <div class="please-style-me">
    ...
  </div>
</div> 
```

这适用于许多样式，例如“font”，但不适用于其他样式，例如“position”，其中内部 div 的样式不会覆盖外部 div。

在 JavaScript 库中创建具有默认值的用户样式元素的最佳实践是什么？我不希望用户包含默认的 CSS 文件（让你的库保持独立是很好的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:41:39.747

当 JS 库具有应该使用但也应该被覆盖的默认样式集时，JS 库应该包含单独的样式表。

JavaScript 应尽可能避免直接添加样式，并在合理的情况下将所有样式推迟到 CSS。

打开和关闭一组样式是很常见的。优雅地处理这些情况的方法是使用 CSS 类。

简单地使用外部样式表可能不合理的情况是动画。当然可以使用 CSS 动画，但是为了支持跨浏览器，异步插值用于将样式从一个值设置为另一个值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:34:02.310

没有`!notimportant`或`!unimportant`在 CSS 中。而且我还没有遇到公认的最佳实践。似乎 CSS 文件是用户可修改样式的事实标准。

但是，如果您想将所有内容保存在一个库中，我会以您的第二个示例为例，使用您的应用程序默认样式，然后向其附加一个 CSS 类，并在类名前添加一些独特的东西。然后，如果实施者想要覆盖您的样式，实施者可以只使用`!important`覆盖您的用户样式。

在 CSS 文件中添加`!important`一个或两个样式应该不是什么大问题，但是如果您要创建一堆内联样式，这可能不是最好的解决方案。

# ruby - Ruby：'next if' 和 'if' 语句

> ID：15736841
> 
> 赞同：1
> 
> 时间：2013-04-01T02:22:12.443
> 
> 标签：ruby, url, loops, syntax

我正在在线查看有关如何构建搜索引擎的代码（下面的链接）。作为一个新手程序员，我很难解释循环的方式。

**红宝石代码：**

```
def crawl_web(urls, depth=2, page_limit = 100)
  depth.times do
    next_urls = []
    urls.each do |url|
      url_object = open_url(url)
      next if url_object == nil                                      # [1]
      url = update_url_if_redirected(url, url_object)
      parsed_url = parse_url(url_object)
      next if parsed_url == nil
      @already_visited[url]=true if @already_visited[url] == nil     # [2]
      return if @already_visited.size == page_limit                  # [3]
      next_urls += (find_urls_on_page(parsed_url, url)-@already_visited.keys)
      next_urls.uniq!
    end
    urls = next_urls
  end
end 
```

**问题：**

1.  如果 url_object 为 nil，程序是否退出块并返回到“urls.each”行的开头？
2.  这段代码是否显示：“如果我们正在查看的 url 已被访问，或者如果已经访问的 URL 为 nil？”
3.  这个问题取决于我的第二个问题。如果问题 #2 中的其中一个语句为真......我们应该只在站点大小与 page_limit 相同的情况下返回唯一的 next_urls。

任何建议都有帮助！感谢您到目前为止的阅读！

*链接：* [http ://www.skorks.com/2009/07/how-to-write-a-web-crawler-in-ruby/](http://www.skorks.com/2009/07/how-to-write-a-web-crawler-in-ruby/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:26:27.597

1.  确实
2.  它显示：`@already_visited[url]`如果我们之前没有访问过这个 url，则设置为 true
3.  是的，只有当`@already_visited`“列表”的大小与页面的限制相同时才返回。它实际上并没有返回任何东西，大部分工作似乎都是在 instance variable 上完成的`@already_visited`，所以不需要返回任何东西。

# arrays - 在 shell 脚本中声明字符串数组时出现语法错误

> ID：15736845
> 
> 赞同：1
> 
> 时间：2013-04-01T02:23:07.773
> 
> 标签：arrays, shell

我有一个 shell 脚本可以在`.txt`格式和`.md`. 它在 Mac 终端中运行良好。

当我尝试在 Ubuntu 中运行 shell 脚本时，以下行

```
PLUGINMETA=("Contributors" "Donate link" "Donate Link" "Tags" "Requires at least" "Tested up to" "Stable tag" "License" "License URI") 
```

引发以下语法错误。

```
Syntax error: "(" unexpected (expecting "}") 
```

该特定行只是声明一个字符串变量列表。我不确定它为什么会产生语法错误。有人可以告诉我哪个有错误吗？

**编辑**：

该文件的完整源代码位于[https://github.com/sudar/wp-plugin-in-github/blob/master/readme-convertor.sh](https://github.com/sudar/wp-plugin-in-github/blob/master/readme-convertor.sh)

我已经拿起了相关的行并在上面添加了。不确定我是否必须包含更多行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T06:15:10.817

该死的！！，我似乎使用了错误的外壳。我是用`sh`, 而不是`bash`.

在 mac 中，`sh`映射到`bash`，但在 Ubuntu 中没有。

# javascript - 使用 Rails 加载页面时的 jQuery Mobile 弹出窗口

> ID：15736855
> 
> 赞同：1
> 
> 时间：2013-04-01T02:23:47.807
> 
> 标签：javascript, ruby-on-rails, jquery-mobile

我正在尝试使用 jQuery Mobile 和 Rails 打开页面加载弹出窗口。

可以使用链接打开弹出窗口，但我无法在加载时打开它。

HTML 代码

```
<div data-role="popup" id="popup-choix" data-history="false" data-overlay-theme="a" data-transition="flow" data-position-to="window">
    <ul>...</ul>
</div> 
```

Javascript代码

```
$(document).on("pageshow", function() {
  $('#popup-choix').popup('open'); 
}); 
```

我检查了 Chrome 并且 Javascript 正确链接到页面。

我在页面上有一个链接可以打开弹出窗口。它完美地工作。

```
<div class="div-popup"><a href="#popup-choix" data-rel="popup">...</a></div> 
```

我想问题出在我的Javascript上......

* * *

**更新**

我将 Javascript 放在 中`popup.js`，然后使用`application.js`清单调用它。

**更新 2**

我在[popup.js中编写了 javascript 并使用](https://github.com/BR41N1/Instavert/blob/master/app/assets/javascripts/popup.js)[manifest](https://github.com/BR41N1/Instavert/blob/master/app/assets/javascripts/application.js)调用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T06:02:02.090

**更新**

> **注意：**对于*Ruby on Rails*用户，请阅读此[评论](https://stackoverflow.com/questions/15736855/jquery-mobile-popup-on-page-load-with-rails?noredirect=1#comment22447470_15736855)。

一旦页面加载/显示，这是打开弹出窗口的正确方法。

```
$(document).on("pageshow", function() {
 $('#popup-choix').popup('open');
}); 
```

在某些浏览器中，一旦页面加载，弹出窗口就不会显示，因此，添加超时以打开弹出窗口是必不可少的。

[来源](https://stackoverflow.com/questions/13772868/jquery-mobile-popup-on-pageinit)

```
$(document).on("pageshow", function() {
 setTimeout(function () {
    $('#popup-choix').popup('open');
 }, 100); // delay above zero
}); 
```

如果要打开特定页面，请添加`'#PageId'`而不是`document`.

# sql - JOIN 访问“查找”字段不返回任何结果

> ID：15736856
> 
> 赞同：0
> 
> 时间：2013-04-01T02:23:48.090
> 
> 标签：sql, ms-access

我有一个奇怪的问题，我认为这与我的查找结构方式有关。

```
TABLE Category
   ID
   CategoryName

TABLE Product
   ID
   ProductName
   Category - Number (SELECT [Category].[ID], [Category].[Category Type] FROM Category ORDER BY [Category Type];)

TABLE SalePrices
   Several fields related to sale date, price, &c.
   ProductName - Text (SELECT [Product].[ID], [Product].[Product Name] FROM Product ORDER BY [Product Name]; 
```

由于某种原因，当我运行以下查询时，我得到一个空白结果集：

```
SELECT SalePrices.[Product Name], Product.[Product Name]
FROM SalePrices INNER JOIN Product ON SalePrices.[Product Name] = Product.[Product Name]; 
```

我有一个查询，显示`SalePrices.UnitPrice`我想用`ProductName`and显示的 MIN `CategoryName`，但我没有得到结果，所以我想先简化一下。

当我加入 Product 和 Category 时，我必须匹配`Product.[Category Type] = Category.ID;`，但是当我尝试这样做时，`SalePrices.[Product Name] = Product.[ID];`我得到了一个`TYPE MISMATCH`错误。我不确定我哪里出错了。

最终目标是将`SalesPrices`<->`ProductName`连接与这个结合起来：

```
SELECT Product.[Product Name], Category.[Category Type]
FROM Product INNER JOIN Category ON Product.[Category Type] = Category.ID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T14:27:26.277

正如@Scotch 和@HansUp 在评论中所建议的那样，在Access 表中定义“查找”字段通常被认为是一个*坏主意*，除了最琐碎的情况之外。*它们隐藏了数据库中的真实情况，当您实际尝试使用*它们时，它们可能会导致各种混乱（正如您所发现的）。（参考：[这里](http://access.mvps.org/access/lookupfields.htm)，来自@HansUp 的评论。）

您最好的做法是将表中的查找字段替换为包含相关表中的 ID（键）值的常规数字字段。`[Product]`然后，如有必要，您可以创建并保存选择查询以显式进行查找并显示结果，因为它们以前出现在`[SalePrices]`数据表视图中。

# visual-studio-2012 - 程序文件保存的文件

> ID：15736858
> 
> 赞同：0
> 
> 时间：2013-04-01T02:23:54.917
> 
> 标签：visual-studio-2012, hidden, visible, program-files

我在 Visual Basic.net 中开发了一个应用程序。当我将此应用程序安装到 ProgramFiles/[Appname] 文件夹并创建一个保存在同一文件夹中的文件（设置文件，从应用程序中创建）时，该文件不可见，但应用程序仍然可以读取它。

这个文件保存在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:53:08.870

在 Windows Vista 和更高版本上，写入 Program Files 目录需要管理权限。您的文件可能受到虚拟化（写入操作的重定向）到虚拟存储的影响。您可以在`C:\Users\<username>\AppData\Local\VirtualStore`.

显而易见的解决方案是首先不要尝试将设置保存在错误的位置。您的应用应该在 下创建一个文件夹`%APPDATA%`，并在其中写入它的设置。[这个对相关问题的回答](https://stackoverflow.com/a/3511235/62576)可以提供一些可能有帮助的链接。

# php - 对我的多语言网站方法的看法

> ID：15736860
> 
> 赞同：1
> 
> 时间：2013-04-01T02:24:14.293
> 
> 标签：php, coding-style, internationalization, multilingual

我正在以自己的方式处理双语网站。我的方法应该允许正确的搜索引擎索引，并将所有内容都放在一个页面上，而无需外部文件。

一个函数将处理要显示的内容：

```
<?
    function l($en, $fr){
        echo ($_GET['lang'] === 'fr') ? $fr : $en ;
    }
?> 
```

然后将根据 URL 中的语言显示相应的文本 (/?lang=en)

```
<h1><? l('welcome!', 'bienvenue!') ?></h1> 
```

对于图像，这是我的解决方案：

```
<img src="<? l('hi-en.png', 'hi-fr.png')?>" width="100" height="20"> 
```

如果使用，任何人都可以说出这种方法的缺点吗？对包含所有语言内容的页面使用单个函数处理语言是否不寻常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:31:47.553

使用像您的`l`函数这样的单例或全局函数的一般想法非常普遍。你绝对是在正确的轨道上！

但是，您的方法确实有一些缺点：

*   如果您在代码中的许多地方都有相同的文本或图像，则需要在*每个*地方维护翻译。
*   更新或更正翻译需要涉足代码，这对于没有经验的编码人员或非编码人员（例如，如果您有翻译人员帮助您）来说是非常困难的。
*   如果您要添加一种新语言，您将不得不修改*每个源文件*，这将是非常痛苦的。这可能不太可能，但如果它发生了，你会很生气。

一个更典型的解决方案是将翻译放在一个单独的文件中，或者作为一个简单的散列，或者作为一个像 XML 这样的结构化数据格式，然后你的`l`函数看起来就像`l('welcome')`：该参数是一个键，`l`它将从单独的文件中查找给定语言的正确翻译。

# r - 创建描述特定值的现有索引位置的新变量

> ID：15736872
> 
> 赞同：3
> 
> 时间：2013-04-01T02:25:26.183
> 
> 标签：r, indexing, dataframe, columnname

我在 R 中有一个数据框，其中有一列包含唯一 ID 和 10 个变量，如下所示：

```
 id V1 V2 V3 V4 V5 V6 V7 V8 V9 V10
1  555  2  1 10  3  8  9  5  7  4   6
2  681 10  5  4  8  7  3  6  2  9   1
3 2300  8  5 10  2  3  1  6  9  4   7 
```

我想创建命名的变量`or1`，通过`or10`它捕获每行值 1:10 的列位置。

因此，例如，在第一行中，数字 1 出现在名为 的列中`V2`，所以`or1 = 2`。如果我设法对上面的三行正确执行此操作，我将得到以下信息：

```
 id or1 or2 or3 or4 or5 or6 or7 or8 or9 or10
1  555  2   1   4   9   7  10   8   5   6    3
2  681 10   8   6   3   2   7   5   4   9    1
3 2300  6   4   5   9   2   7  10   1   8    3 
```

我设法`or1`使用一组荒谬的 if/then 语句来创建，但我知道有一种更好的方法可能涉及索引。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T02:34:18.767

这样做：

```
> ord <- data.frame(id = dat$id, t(apply(dat[, -1], 1, order)))
    id X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
1  555  2  1  4  9  7 10  8  5  6   3
2  681 10  8  6  3  2  7  5  4  9   1
3 2300  6  4  5  9  2  7 10  1  8   3 
```

（如果“id”不是第一列，我会替换`dat[, -1]`为更健壮的`dat[!colnames(dat) %in% "id"]`）

然后，要获得与您想要的完全一样的列名：

```
colnames(ord) <- sub("^X", "or", colnames(ord)) 
```

# wpf - WPF Caliburn Micro TreeView HierarchicalDataTemplate 节点扩展事件

> ID：15736882
> 
> 赞同：2
> 
> 时间：2013-04-01T02:26:55.113
> 
> 标签：wpf, treeview, caliburn.micro, hierarchicaldatatemplate

我高高在上，在这儿砸头太久了。使用 MVVM、Caliburn Micro、WPF、XAML，并尝试将数据后期绑定到节点。我已经对第一级或第二级进行了数据绑定，并且我想观察节点上的“扩展”事件，这样我就可以检查我的小延迟获取子节点，也许可以获取数据并增长树。我已经尝试了很多事情，我想我现在已经准备好了，我应该能够做到。

```
Message.Attach="[Event TreeViewItem.Expanded] = [Action NodeExpanding($this)]" 
```

但这永远不会触发......在同一级别，以下工作正常：

```
Message.Attach="[Event SelectedItemChanged] = [Action SetSelectedItem($this.SelectedItem)]" 
```

而且我确实让这个事件在我的 ViewModel 上很好地触发，所以我必须接近......

任何帮助表示赞赏！tnx，-J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T03:33:34.323

我的猜测（可能很接近）是它可能与`DataContext`节点有关。CM`DataContext`默认将 用作操作的目标，因此在没有明确设置上下文的情况下，您会尝试针对绑定到节点的数据项触发事件，当然数据项没有任何处理方式这个。

您仍然可以通过`Action.TargetWithoutContext`在树视图项上设置附加属性来设置操作的目标 - 这样 CM 就知道在哪里查找连接消息

通常我发现绑定到祖先是最简单的：

```
<TreeViewItem
    cal:Action.TargetWithoutContext="{
        Binding DataContext,
        RelativeSource={RelativeSource AncestorType=UserControl}}" /> 
```

或者您可以使用`ElementName`任何适合您的方法，只要记住**您需要指向目标 ViewModel ，这将是`DataContext`父容器的**。我曾`DataContext`多次忘记使用它，并为它为什么不起作用而挠头（您没有遇到绑定错误，因为您的绑定仍然有效但它只是不起作用 - CM LogManager.GetLog() 在这里有帮助！ )

# c# - 如何向 Visual Studio Intellisense 添加按钮

> ID：15736884
> 
> 赞同：35
> 
> 时间：2013-04-01T02:27:51.597
> 
> 标签：c#, visual-studio, visual-studio-extensions, vs-extensibility

我想在 Visual Studio 的 IntelliSense 返回的选项列表顶部添加一个按钮。单击按钮时，将执行我的自定义代码（除其他外，这将导致出现弹出窗口）。

我将其称为“按钮”，因为当用户单击该项目时，我希望出现一个弹出窗口，而不是完成用户输入的正常 IntelliSense 操作。

例如，当我们在文本编辑器中输入类名时，通常静态属性和静态方法会出现在 IntelliSense 中。但我想在该列表的顶部添加另一个项目。

无论是什么输入/内容导致 IntelliSense 出现，此项都应出现在 IntelliSense 列表的顶部。该项目永远不会改变。

这是否可能，如果可以，您能否就我应该如何实现这一目标提供一些指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T10:53:21.750

1) 在 C# 或 VB 项目中，打开一个代码文件并将光标放在要插入代码片段的位置。

2) 以三种方式之一调出代码片段菜单：

```
 Press CTRL+K, CTRL+X.

    On the Edit menu, point to IntelliSense, and then click Insert Snippet.

    Right-click the mouse and then select the Insert Snippet command on the shortcut menu. 
```

3) 从代码片段插入器中选择代码片段，然后按 TAB 或 ENTER，或双击该片段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:28:45.800

在 IntelliSense 属性页中，为不需要的 IntelliSense 功能清除文本框选项或复选框选项：

```
Show completion list after a character is typed

Committed by typing the following characters

Committed by pressing the space bar

IntelliSense pre-selects most recently used members applies to IntelliSense for Most Recently Used Members 
```

有关详细信息，请参阅 IntelliSense、C#、文本编辑器、选项对话框

# java - Java：Math.random() 最大值（双倍小于 1）

> ID：15736885
> 
> 赞同：6
> 
> 时间：2013-04-01T02:28:15.277
> 
> 标签：java, math, random, double, precision

我对这个有点好奇。Math.random() 给出的值在 [0.0,1.0) 范围内。那么它可以提供的最大价值是多少？换句话说，小于 1.0 的最接近 1.0 的双精度值是多少？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T02:42:25.750

Java 使用 64 位[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)表示，因此理论上小于 1 的最接近的数字是`3FEFFFFFFFFFFFFF`十六进制表示，即 0 表示符号，-1 表示指数，1.9999999999999997 表示 52 位有效数。这大致等于`0.9999999999999998`。

参考：[IEEE-754 计算器](http://babbage.cs.qc.cuny.edu/IEEE-754/)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-21T19:58:07.427

您想要的数字由`Math.nextAfter(1.0, -1.0)`.

该函数的名称有点用词不当。 `Math.nextAfter(a, 1.0)`返回大于`a`（即，之后的下一个值`a`）的最小双精度值，并`Math.nextAfter(a, -1.0)`返回小于`a`（即，*之前* `a`的值）的最大值。

注意：另一张海报说，`1.0-Double.MIN_NORMAL`。那是错误的。 `1.0-Double.MIN_NORMAL`正好等于 1.0。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-01T02:36:35.757

双精度的最小正值是[`Double.MIN_NORMAL`](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#MIN_NORMAL)。因此，小于 1.0 的最大数是`1.0-Double.MIN_NORMAL`。

`Double.MIN_NORMAL`等于 2 ^(-1022)，所以答案仍然*非常*接近 1.0。您必须将 的值打印`1.0-Double.MIN_NORMAL`到小数点后 308 位，然后才能看到除 9 之外的任何内容。

# ios - iOS 反向地理编码问题未返回 placemark.locality 的值

> ID：15736886
> 
> 赞同：4
> 
> 时间：2013-04-01T02:28:17.230
> 
> 标签：ios, iphone, geocoding

当我使用 CLGeocoder 获取当前城市名称时，我遇到了一个非常奇怪的问题。我用来验证的地方是库比蒂诺。我 100% 确定这不是覆盖问题。

NSLog 正确打印了地标，但是当涉及到 placemark.locality 时，它会打印（null）。我尝试了其他属性，它们都有效。我环顾四周，人们似乎也有类似的问题，但没有可行的答案。提前感谢您的帮助。

代码如下：

```
[geoCoder reverseGeocodeLocation:newLocation
                       completionHandler:^(NSArray *placemarks, NSError *error) {  

                           NSLog(@"%@",placemarks);

                           CLPlacemark *placemark =[placemarks objectAtIndex:0];
                           NSLog(@"%@",placemark);
                           NSString *city = placemark.locality;
                           NSLog(@"City：%@", city);
                           if (!city){
                              city = placemark.subAdministrativeArea;
                           }
                           NSLog(@"City：%@", city); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-02T14:05:24.413

你可以试试这个，

```
[geoCoder reverseGeocodeLocation:newLocation completionHandler:^(NSArray *placemarks, NSError *error) {
            for (CLPlacemark *placemark in placemarks) {
                NSString *city = [placemark locality];
                NSLog(@"%@", city);
            }
} 
```

# actionscript-3 - 使用 Air/actionscript 3 居中 admob 广告

> ID：15736888
> 
> 赞同：0
> 
> 时间：2013-04-01T02:28:37.580
> 
> 标签：actionscript-3, air, admob, scale, dpi

我有一个舞台大小为 1024x600 像素的 Air/As3 应用程序，它自动缩放以适应 1280x720 像素的屏幕。当我请求 admob 广告（使用 ANE）时，报告的广告宽度尺寸为 320（标准横幅），但此尺寸基于 DPI 而不是实际像素，我无法计算 x 位置以使其与屏幕中心对齐。如何获得广告的实际像素宽度尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T02:08:45.043

从 dp 单位到屏幕像素的转换由下式给出

> 像素 = dp * (dpi / 160)

正如这里所解释的

[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

因此，如果您正在缩放 Flash 内容，则无关紧要，因为 admob 广告并不关心。要将广告置于屏幕底部居中，请使用以下命令：

```
 admob.addToStage((Capabilities.screenResolutionX/2)-(((admob.getAdSize().width)*(Capabilities.screenDPI/160))/2),(Capabilities.screenResolutionY)-((admob.getAdSize().height)*(Capabilities.screenDPI/160))); 
```

# delphi - cxGrid 仅大写字母

> ID：15736897
> 
> 赞同：1
> 
> 时间：2013-04-01T02:30:20.840
> 
> 标签：delphi, devexpress, delphi-xe2, delphi-xe

有没有办法让 cxGrid (devexpress) 只接受大写字母？或者它只接受某些字段的大写字母？我在网格中找不到任何可以实现此目的的设置...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T07:10:25.117

设置`Column.Properties`为`TextEdit`然后

```
Column.Properties.CharCase = ecUpperCase 
```

# batch-file - 在 Windows 上通过 Cygwin 运行 shell 脚本

> ID：15736898
> 
> 赞同：70
> 
> 时间：2013-04-01T02:30:42.380
> 
> 标签：batch-file, cygwin

我有一堆曾经在 Linux 机器上运行的 shell 脚本。现在，我们已经切换到 Windows，我需要在那里运行这些脚本。我安装了[Cygwin](http://en.wikipedia.org/wiki/Cygwin)，但是有没有办法让脚本使用 Cygwin 运行，但是**调用是从 Windows 批处理进行的**？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-04-01T02:45:14.517

当然。在我的（漂亮的香草）Cygwin 设置`bash`中，`c:\cygwin\bin`我可以使用如下命令从 Windows 批处理文件运行`bash`脚本（比如）：`testit.sh`

```
C:\cygwin\bin\bash testit.sh 
```

`.bat`...它可以像在命令行中键入一样容易地包含在文件中，并且具有相同的效果。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2013-09-12T19:15:46.340

还有一件事——如果你在一些 Windows 文本编辑器中编辑了 shell 脚本，它会产生`\r\n`行尾，cygwin 的 bash 不会接受那些`\r`. `dos2unix testit.sh`在执行脚本之前运行：

```
C:\cygwin\bin\dos2unix testit.sh
C:\cygwin\bin\bash testit.sh 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-02-27T16:04:41.467

如果您可以访问 Windows 上的 Notepad++ 编辑器，则有一项功能可让您轻松解决此问题：

1.  在 Notepad++ 中打开出现错误的文件。
2.  进入“编辑”菜单并选择“EOL 转换”
3.  “UNIX/OSX 格式”有一个选项。选择该选项。
4.  重新保存文件。

我这样做了，它解决了我的问题。

希望这可以帮助！

[在http://danieladeniji.wordpress.com/2013/03/07/microsoft-windows-cygwin-error-r-command-not-found/](http://danieladeniji.wordpress.com/2013/03/07/microsoft-windows-cygwin-error-r-command-not-found/)阅读更多信息

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-03-14T00:40:13.780

只是想补充一点，您可以这样做以对目录下的所有文件应用 dos2unix 修复，因为当我们不得不“修复”一堆脚本时，它为我节省了大量时间。

```
find . -type f -exec dos2unix.exe {} \; 
```

我会将其作为对 Roman 的回答的评论，但我还无权发表评论。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-03-18T09:06:20.783

现有答案似乎都在 DOS 控制台窗口中运行此脚本。

这可能是可以接受的，但例如意味着颜色代码（更改文本颜色）不起作用，而是按原样打印出来：

> 没有项目“[032mGroovy[0m”

我前段时间找到了这个解决方案，所以我不确定是否`mintty.exe`是标准的 Cygwin 实用程序，或者您是否必须运行`setup`程序才能获得它，但我是这样运行的：

```
D:\apps\cygwin64\bin\mintty.exe -i /Cygwin-Terminal.ico  bash.exe .\myShellScript.sh 
```

...这会导致脚本在 Cygwin BASH 控制台而不是 Windows DOS 控制台中运行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-19T20:08:57.510

如果您不介意在脚本文件名中始终包含 .sh，那么您可以为 Cygwin 和 Unix (Macbook) 保留相同的脚本。

举例说明：
1\. 始终在脚本文件名中包含 .sh，例如 test1.sh
2\. test1.sh 示例如下所示： 3\. 在装有 Cygwin 的 Windows 上，键入“test1.sh”以运行 4 . 在 Unix 上，你也可以输入“test1.sh”来运行
``#!/bin/bash echo '$0 = ' $0 echo '$1 = ' $1 filepath=$1``

注意：在 Windows 上，您需要使用文件资源管理器执行以下操作：
1\. 打开文件资源管理
器 2\. 右键单击​​扩展名为 .sh 的文件，例如 test1.sh
3\. 打开方式... -> 选择sh.exe
在此之后，您的 Windows 10 会记住使用 sh.exe 执行所有 .sh 文件。

注意：使用此方法，您无需在脚本文件名前加上 bash 即可运行

# c# - 转换为字典需要有一个节点 钥匙

> ID：15736901
> 
> 赞同：2
> 
> 时间：2013-04-01T02:31:11.187
> 
> 标签：c#

```
public Dictionary<Node<T>, IList<Node<T>>> FlattenedMap { get; private set; }
private List<Node<T>> _dependencies; (note: these T instances have a NodeId and related ParentNodeId properties in it to work with) 
```

....更多代码，然后：

```
public void CreateFlattenedMap()
{
    var groups = _dependencies.GroupBy(d => d.ParentId); // attempt to groupy the list by ParentNodeId

    var dictionary = parentGroups.ToDictionary(d => d.Key, d => d.ToList()); // attempt to flatten out each pair of parent Node<T> instances with their corresponding Parent Node<T>.Children list

    FlattenedMap = dictionary;
} 
```

我正在尝试将组转换为字典，但我不希望密钥成为 Id。因为我的 FlattenedMap 有一个 Node 的键，所以不知道该怎么做，`ToDictionary`并且键是 d，而不是 d.Key，基本上是为了让这个分配快乐。

所以问题就在这里：`FlattenedMap = dictionary;`因为字典最终`<int, List<Node<T>>>`不是我想要的，而是`<Node<T>, List<Node<T>>`为了满足我希望我的字典如何通过属性形成作为最终结果。

更新

所以我尝试做但不适用于下面的伪代码是因为 d 是类型 T 并且字典确实需要 Node 作为键，而不是 d.Key （不是 T.Key） 我试图做类似的事情这个：

```
var dictionary = parentGroups.ToDictionary(d => new Node<T>(d), d => d.ToList()); 
```

实际上，现在我考虑一下， List 不需要是`List<d>`or `IList<d>`but `List<Node<T>(d)>`or list of `<Node<d>>`（请记住， T 是 d 的一个实例，Node 期望任何已经实现了 d 肯定具有的 INode 的实例）。

真的，ToDictionary 正在创建这个： `<d.Key, List<d>>`所以你最终`(<int, List<d>)`得到的不是我的最终字典所期望的。

不知何故，我需要在 ToDictionary 中即时将 d 转换为 Node，所以我最终得到 Dictionary>...希望我说得对，但你可以理解我想说的话.

**更新**

所以尝试了一些不同的方法，因为我首先将我的 _dependencies 转换为所有 Node 实例，以尝试使其更易于使用或使其在我的 CreateFlatnedMap() 中工作

现在播种，在循环原始依赖项列表并将它们中的每一个首先转换为节点（换句话说，节点（d））之后，我正在 IList> 列表中尝试使用 GroupBy。

所以现在，虽然同样的问题（这里是我的班级更完整的图片）：

```
 public class Tree<T> where T : INode
    {
        private readonly IList<T> _sourceDependencies;
        private readonly List<Node<T>> _nodeDependencies;

        public Node<T> RootNode { get; set; }
        public Dictionary<Node<T>, IList<Node<T>>> FlattenedMap { get; private set; }

         public Tree(T rootNode, IList<T> dependencies )
        {
            RootNode = new Node<T>(rootNode); //convert the custom type to Node<T> first so we can work with it
            _sourceDependencies = dependencies;
            _nodeDependencies = ConvertListToNodes(_sourceDependencies);

            FlattenedMap();
        }

        private List<Node<T>> ConvertListToNodes(IList<T> listToConvert)
        {
            List<Node<T>> nodeList = _sourceDependencies.Select(sourceNode => new Node<T>(sourceNode)).ToList();
        }

       public void CreateFlattenedMap()
        {
            var parentGroups = _nodeDependencies.GroupBy(d => d.ParentNodeId);

            var dictionary = parentGroups.ToDictionary(d => new Node<T>(d), d => d.ToList());

            FlattenedMap = dictionary;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:46:38.277

这会做你想要的吗？

```
var dictionary = parentGroups.ToDictionary(
    d => new Node<T>(d.Key), 
    d => d.ToList()); 
```

# c# - 将日期/时间对象传递给 SQL 时转换失败

> ID：15736906
> 
> 赞同：0
> 
> 时间：2013-04-01T02:31:34.130
> 
> 标签：c#, sql-server

我正在尝试将新信息添加到表中，但是*在将日期/时间从字符转换为字符串时，它给了我这个 Conversion failed 错误*。

这是我的代码的一部分：

```
try
{
    string sp = "add"; 

    comando.CommandType = CommandType.StoredProcedure;
    comando.CommandText = sp;
    comando.Parameters.Clear();

    comando.Parameters.Add(new SqlParameter("@person", SqlDbType.VarChar));
    comando.Parameters.Add(new SqlParameter("@reason", SqlDbType.VarChar));

    comando.Parameters.Add(new SqlParameter("@information", SqlDbType.VarChar));
    comando.Parameters.Add(new SqlParameter("@date", SqlDbType.DateTime));
    comando.Parameters[0].Value = obj.person;
    comando.Parameters[1].Value = obj.reason;
    comando.Parameters[2].Value = obj.information;
    comando.Parameters[3].Value = obj.date;
    comando.ExecuteNonQuery();
}
catch (Exception exc)
{
    throw exc;
} 
```

要获取我正在使用的日期的信息，这`obj.date = DateTime.Now;`是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:35:26.857

或者，您可以使用`AddWithValue()`

```
comando.CommandType = CommandType.StoredProcedure;
comando.CommandText = sp;

comando.Parameters.AddWithValue("@person", obj.person);
comando.Parameters.AddWithValue("@reason", obj.reason);
comando.Parameters.AddWithValue("@information", obj.information);
comando.Parameters.AddWithValue("@date", DateTime.Now);

// assuming connection is already open

comando.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T03:04:05.737

我不记得有时如何或为什么将纯日期/时间对象发送到 SQL 中不会像我们预期的那样工作。

解决方案是将日期/时间对象转换为通用[ISO 8601 格式](http://en.wikipedia.org/wiki/ISO_8601)：`yyyyMMdd HH:mm:ss.fff`- SQL 绝对喜欢这种格式。

这是一个摘自[J W 的答案](https://stackoverflow.com/a/15736935/238722)的片段，它实际上展示了最佳实践：

```
const String UniversalDateTime = "yyyyMMdd HH:mm:ss.fff";

comando.CommandType = CommandType.StoredProcedure;
comando.CommandText = sp;

comando.Parameters.AddWithValue("@person", obj.person);
comando.Parameters.AddWithValue("@reason", obj.reason);
comando.Parameters.AddWithValue("@information", obj.information);
comando.Parameters.AddWithValue("@date", obj.date.ToString(UniversalDateTime));

// assuming connection is already open

comando.ExecuteNonQuery(); 
```

SQL 收到日期/时间字符串表示后，该值将自动转换为 SQL 的内部日期/时间值。

* * *

PS。`T`我记得还尝试使用as 分隔符尝试 ISO 8601 格式： `yyyyMMddTHH:mm:ss.fff`. 试试带空格的版本，它在使用 en-US SQL 语言环境和非 en-US 语言环境时也适用于我。

# xcode - +[CCSprite spriteWithSpriteFrameName:] 中的断言失败？

> ID：15736908
> 
> 赞同：1
> 
> 时间：2013-04-01T02:31:38.243
> 
> 标签：xcode, cocos2d-iphone, sprite, ccsprite, cgsize

由于某种原因，我**在 +[CCSprite spriteWithSpriteFrameName:] 中遇到断言失败。**

我基本上是在尝试“更新PinkBerries”，或者换句话说，创建更多的精灵“浆果”以添加到屏幕上。他们是我游戏中的“敌人”。

这是我的代码：

```
- (id) init
{
    if((self = [super init]))
    {

        CCLOG(@"%@ init", NSStringFromClass([self class]));

        self.touchEnabled = YES;

        [self scheduleUpdate];
    }
    return self;
}

-(void)updatePinkBerries:(ccTime)dt
{
    CGSize winSize = [CCDirector sharedDirector].winSize;

    double curTime = CACurrentMediaTime();

    if (curTime > _nextPinkBerrySpawn)
    {
        // Figure out the next time to spawn an asteroid
        float randSecs = randomValueBetween(0.20, 1.0); _nextPinkBerrySpawn = randSecs + curTime;

        // Figure out a random Y value to spawn at
        float randY = randomValueBetween(0.0, winSize.height);

        // Figure out a random amount of time to move from right to left
        float randDuration = randomValueBetween(2.0, 10.0);

        // Create a new asteroid sprite
        CCSprite *pinkBerry = [CCSprite spriteWithSpriteFrameName:@"ship.png"]; [_batchNode addChild:pinkBerry];

        // Set its position to be offscreen to the right
        pinkBerry.position = ccp(winSize.width + pinkBerry.contentSize.width/2, randY);

        // Move it offscreen to the left, and when it's done, call removeNode
        [pinkBerry runAction:
         [CCSequence actions:
          [CCMoveBy actionWithDuration:randDuration position:ccp(-winSize.width- pinkBerry.contentSize.width, 0)],
          [CCCallFuncN actionWithTarget:self selector:@selector(removeNode:)], nil]];
    }
} 
```

> 编辑：完整的断言日志：
> 
> 2013-03-31 19:39:09.225 Berry Muncher-iOS[19550:c07] -[CCFileUtils fullPathForFilename:resolutionType:]：cocos2d：警告：找不到文件：Sprites.plist 2013-03-31 19:39:09.225 Berry Muncher-iOS[19550:c07] cocos2d: CCSpriteFrameCache: 试图使用文件 'Sprites.png' 作为纹理 2013-03-31 19:39:09.425 Berry Muncher-iOS[19550:c07] cocos2d: CCSpriteFrameCache: Frame 'ship. png' 未找到 2013-03-31 19:39:09.426 Berry Muncher-iOS[19550:c07] *** +[CCSprite spriteWithSpriteFrameName:]、/Users/Sur​​aya/Desktop/Kobold2D/Kobold2D-2.1.0 中的断言失败/ **Kobold2D** /libs/cocos2d-iphone/cocos2d/CCSprite.m:105

编辑：我的 plist 的截图

![在此处输入图像描述](https://i.stack.imgur.com/gmTbX.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T15:53:31.853

我从 Ray Wanderlich 教程中认识到这一点。因为他的作品与您可能使用的不同，您应该创建自己的文件`CCSpriteBatchNode`和随附的`plist`文件，以免他项目中的项目名称与您的项目名称混淆。

# angularjs - AngularJS 模型、多个 $scope 和双向数据绑定

> ID：15736912
> 
> 赞同：5
> 
> 时间：2013-04-01T02:32:24.283
> 
> 标签：angularjs

我喜欢 AngularJS 不需要模型的特殊语法，但有一种情况我似乎无法理解。采取以下

我的 dataService 包装了我正在使用的任何类型的数据存储：

```
app.factory('dataService', function() {
    var data = 'Foo Bar';

    return {
        getData: function() {
            return data;
        }
    };
}); 
```

我有两个控制器都访问相同的数据：

```
app.controller('display', function($scope, dataService) {
    $scope.data = dataService.getData();
});

app.controller('editor', function($scope, dataService) {
    $scope.data = dataService.getData();
}); 
```

如果我有两个视图，其中一个修改数据，为什么另一个不自动更新？

```
<div ng-controller="display">
<p>{{data}}</p>
</div>

<div ng-controller="editor">
<input type="text" value="{{data}}"/>
</div> 
```

我了解这在诸如 Knockout 之类的东西中是如何工作的，在这种情况下，我将被迫将数据设为可淘汰的可观察对象。因此，对应用程序某一部分的任何修改都会触发订阅并更新另一部分的视图。但我不确定如何在 Angular 中进行操作。

有什么建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-01T03:02:14.837

我建议进行一些更改以使其正常工作。

1.  将数据对象从字符串更改为对象类型
2.  使用[ng-model](http://docs.angularjs.org/api/ng.directive:ngModel)绑定输入字段

HTML

```
<div ng-controller="display">
  <p>{{data.message}}</p>
</div>

<div ng-controller="editor">
  <input type="text" ng-model="data.message"/>
</div> 
```

脚本

```
app.factory('dataService', function() {
    var data = {message: 'Foo Bar'};

    return {
        getData: function() {
            return data;
        }
    };
}); 
```

演示：[小提琴](http://plnkr.co/edit/hMFgXKIiEOKVNatgPGLR?p=preview)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:57:11.450

我没有遇到同样的情况，但是让我跳出来的是你坚持在范围内的东西。有一个角度视频讨论了范围。您应该将模型对象放在范围内，而不是将范围用作模型对象。

在您的示例中，将使用 string 创建两个范围`data`。由于`data`是字符串且不可变，因此更改时将在编辑器范围内替换。在您的示例中，如果您`dataService`返回了一个对象并且该对象在控制器之间共享，那么您的问题可能会得到解决。尝试`dataService`返回`model`{data: `data`} 并绑定到`model.data`而不是`data`.

这是未经测试的，但应该根据我对角度工作的了解来工作。

# php - 登录后回显你好用户名

> ID：15736916
> 
> 赞同：0
> 
> 时间：2013-04-01T02:32:45.013
> 
> 标签：php, html, login

要求用户的第一件事是登录；如果登录成功，则将用户发送到 index.php；否则；他们被要求重新输入他们的详细信息。

我希望用户登录后用户名显示在 index.php 上；

所以使用 index.php 文件中的 echo 函数`GET`从登录到用户名

```
//check to see if they match
if($username==$dbusername&&$password==$password)
{
$_SESSION['username']=$username;
    echo "Welcome '.$username.'";
    header('Location: nindex.php');
    die(); 
}
else
echo "incorrect password";

}
else
    die("That user does not exist");
}
else
    die("please provide a  username and password");

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T02:35:59.017

```
header("Refresh: 5; url=index.php");
echo "Welcome '" . $username . "'";
exit;#should be added so rest of page doesn't load. 
```

或者

```
echo "Welcome '" . $username . "'";?>
<meta http-equiv="refresh" content="5; url=index.php" />
<?php
exit;#should be added so rest of page doesn't load. 
```

应该告诉他们`Welcome 'username'`然后在 5 秒后重定向到您的页面，您可以将 5 更改为您认为足够长的任何数字。建议使用元数据，因为标头可能会给您错误/警告。

**编辑：**

看起来您想`Welcome 'username'`在 index.php 页面上进行打印，并且确保您`session_start()`在每个页面的顶部都有。

```
if(isset($_SESSION['username'])){
    echo "Welcome '{$_SESSION['username']}'";
} 
```

并`echo "Welcome '.$username.'";`从您的登录页面中删除。如果您希望它显示一次，我可以根据需要修改我的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T02:34:49.953

在调用'header'之前你不能回显任何输出，否则你会得到那个错误。

echo命令需要在被调用页面nindex.php中完成

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T02:34:10.130

```
<?php

  if(!empty($username) && !empty($password)) {

      if($username == $dbusername && $password == $dbpassword) {

            $_SESSION['username'] = $username;
            header("Location: index.php?id=$username");
            die();
      }else {
        echo 'incorrect username/password combination';
      }
  }else {
  echo 'Username and Password NOT FOUND! ';  
  } 
```

在**index.php** 中放

```
if(isset($_GET['id'])){
echo 'Welcome '.$_GET['id'];
}else {
echo '(write) a 404 page';

} 
```

# c++ - OpenGL Loader Generator 未定义对 gl::BindBuffer 等的引用（OpenGL 函数）

> ID：15736923
> 
> 赞同：1
> 
> 时间：2013-04-01T02:33:53.550
> 
> 标签：c++, opengl, reference, undefined

我在使用[OpenGL Loader Generator](https://bitbucket.org/alfonse/glloadgen/wiki/Home)时遇到问题，当我尝试编译我的代码时，它不起作用。它会抛出一个错误，说明对我使用的任何 opengl 函数的未定义引用，例如 gl::BindBuffer、gl::GenBuffers 等。我使用的是 pointer_cpp/func_cpp 样式。

我正在使用的简单代码是

```
#include "gl_core_3_3.hpp"
#include <GL/glfw.h>

int main(int argc, char *argv[]) {
    glfwInit();
    glfwOpenWindow(1024, 768, 0, 0, 0, 0, 0, 0, GLFW_WINDOW);

    gl::exts::LoadTest didLoad = gl::sys::LoadFunctions();
    if(!didLoad) {
        glfwTerminate();
        return 1;
    }

    return 0;
} 
```

当我编译它时，它也表示对 gl::sys::LoadFunctions 的未定义引用。我用来编译的命令是

```
g++ main.cpp -lglfw -lGL -lGLU 
```

我在 Arch Linux 上并使用带有 clang 的 Vim 作为我的 IDE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:17:05.723

```
g++ main.cpp -lglfw -lGL -lGLU 
```

我看不到您在哪里包含生成的源文件。它不是一个只有标题的加载系统。它不会生成库，但会生成必须编译的*源代码。*

# ios - 为什么使用与 NSNotificationCenter 不同的实例对象从单例调用方法？

> ID：15736931
> 
> 赞同：1
> 
> 时间：2013-04-01T02:34:51.070
> 
> 标签：ios, singleton, nsnotifications

简短版：

我遇到了一个问题，即在一个对象的不同实例上调用了一个方法，而不是 NSNotificationCenter 将通知推送到（尽管只创建了一个实例）。

长版：

我有一个由 OpenGL 更新/绘制循环操作的“拼图”对象实例。

我创建了一个 Control 单例来管理不同的触摸事件，如下所示：

```
@implementation Controls

static Controls *SharedGameControls = nil;

-(id)init {
    self = [super init];
    return self;
}

+ (Controls*)SharedGameControls{
    if (SharedGameControls == nil){
        SharedGameControls = [[super allocWithZone:NULL] init];
    }
    return SharedGameControls;
}

+ (id)allocWithZone:(NSZone *)zone
{
    return self.SharedGameControls;
}

- (id)copyWithZone:(NSZone *)zone
{
    return self;
}

-(void)oneFingerSwipeDelegator:(UISwipeGestureRecognizer *)swipe{
    switch (GState.currentMode)
    {
        case PuzzleLayer: {
            CGPoint Origin = [swipe locationInView: _view];
            //I believe this line should call oneFingerSwipe on the object instance 
            //provided to the singleton
            [_oneFingerSwipeDelegate oneFingerSwipe:Origin Direction:swipe.direction];
            break;
        }
        default:{
            break;
        }
    }
}

-(void)setDefaultState{
    GState = [GameState SharedGameState];

    UISwipeGestureRecognizer *oneFingerSwipeUp = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeDelegator:)];
    [oneFingerSwipeUp setDirection:UISwipeGestureRecognizerDirectionUp];
    [_view addGestureRecognizer:oneFingerSwipeUp];

    UISwipeGestureRecognizer *oneFingerSwipeDown = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeDelegator:)];
    [oneFingerSwipeDown setDirection:UISwipeGestureRecognizerDirectionDown];
    [_view addGestureRecognizer:oneFingerSwipeDown];

    UISwipeGestureRecognizer *oneFingerSwipeLeft = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeDelegator:)];
    [oneFingerSwipeLeft setDirection:UISwipeGestureRecognizerDirectionLeft];
    [_view addGestureRecognizer:oneFingerSwipeLeft];

    UISwipeGestureRecognizer *oneFingerSwipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(oneFingerSwipeDelegator:)];
    [oneFingerSwipeRight setDirection:UISwipeGestureRecognizerDirectionRight];
    [_view addGestureRecognizer:oneFingerSwipeRight];

    UITapGestureRecognizer * single = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapDelegator:)];
    single.numberOfTapsRequired = 1;
    [_view addGestureRecognizer:single];
}

-(void)singleTapDelegator:(UITapGestureRecognizer *)tap{
    CGPoint origin = [tap locationInView: _view];
    NSValue *Origin = [NSValue valueWithCGPoint:origin];
    switch (GState.currentMode)
    {
        case PuzzleLayer: {
            [[NSNotificationCenter defaultCenter] postNotificationName:@"puzzleTap" object:nil userInfo:[NSDictionary dictionaryWithObject:Origin forKey:@"Origin"]];
            break;
        }
        default:{
            break;
        }
    }
}

@end 
```

'_oneFingerSwipeDelegate' 在 .h 文件中定义为

```
@property (nonatomic, assign) id oneFingerSwipeDelegate; 
```

然后在 Puzzle 类中，事件是这样处理的：

```
@implementation Puzzle

-(id)init{
    self =[super init];
    if (self){
        GControls = [Controls SharedGameControls];
        //I believe, possibly wrongly, that the line below will set this object instance
        //to be the object oneFingerSwipe is called on
        GControls.oneFingerSwipeDelegate = self;
        GControls.twoFingerSwipeDelegate = self;
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(singleTap:) name:@"puzzleTap" object:nil];
        _Started = false;
       //other code omitted
    }
    return self;
}

//implementation of the delegate in Controls.h
-(void)oneFingerSwipe:(CGPoint)touchPoint Direction:(UISwipeGestureRecognizerDirection)direction{
    //do some stuff with objects inside puzzle
}

//observer for 'puzzleTap'
-(void)singleTap:(NSNotification*)note{
    GLKVector3 Near,Far;
    NSDictionary *dict = [note userInfo];
    CGPoint origin = [[dict objectForKey:@"Origin"] CGPointValue ];
    //Do stuff with objects inside puzzle
}

//other code omitted
@end 
```

所以我正在测试手势识别以确保一切正常，我注意到我的滑动没有被处理。

点击正确地将通知发送到 Puzzle 对象中的 singleTap 方法（该方法在 Puzzle 实例的子对象上设置一个“已选择”标志）。

滑动正确地调用了拼图对象上的 oneFingerSwipe 方法，但由于某种原因无法检测到哪个对象已被点击“选择”。

仔细观察后，我注意到当我进入 singleTap 时，我看到了一个拼图对象的地址，这与进入 Control 单例调用的 oneFingerSwipe 方法时显示的地址不同。

如此有效，出于某种原因，Control 单例正在对通知发送到的对象的孪生实例进行操作（或相反）。每个实例中的所有对象似乎都具有与相应双胞胎不同的内存地址。

因此，当调用 oneFingerSwipe 时，子对象上的“选定”标志尚未更新，因此不会调用滑动逻辑。

当我切换到使用通知进行滑动时，问题就消失了。

我真的不明白这里发生了什么。当我将拼图实例分配给 oneFingerSwipe 属性时，控制单例是否会创建拼图实例的副本？

我使用Objective C 只工作了大约6 个月，还有很多我不明白的地方。

感谢您通过那堵文字墙，感谢您抽出时间来看看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T05:52:48.510

看起来直接方法调用发生在与 NSNotificationCenter 将通知推送到的对象不同的对象上的原因是，它实际上是一个不同的对象。我在一个循环中实例化了许多不同的拼图对象，而每个拼图对象又将自己设置为 oneFingerSwipe 的目标。当我逐步浏览时，我碰巧看到了两个非常相似但不同的物体，并错误地得出了一个是另一个的副本的结论。非常感谢评论者花时间研究这个冗长的问题并为我指明正确的方向。现在我已经切换到只使用 NSNotifications，但我将更多地阅读使用委托，看看它是否更适合我的需要。

# html - 叠加背景颜色和图像

> ID：15736932
> 
> 赞同：0
> 
> 时间：2013-04-01T02:34:51.403
> 
> 标签：html, css, menu, overlay

我正在尝试在背景图像上叠加背景颜色（蓝色）。我有一个要显示在背景颜色上方的菜单。我试过使用 z-index 属性，但它不适合我。我确定它与菜单的属性有关，但我被卡住了。我尝试将菜单放在另一个 div 中，但无法正确设置 div 尺寸。

这是我的索引页。

```
<link rel="stylesheet" type="text/css" href="Practice.css">

</head>

<body  background="http://localhost/jim/BatikVilla/Background.jpg">

<div id='blue'>
<div id='cssmenu'>
<ul>
 <li class='active'><a href='index2.php'>Home</a></li>
 <li class='has-sub '><a href='Product.php'>Products</a>
    <ul>
       <li class='has-sub '><a href='Men.php'>Men</a>
          <ul>
             <li><a href='Sarong.php'>Sarong</a></li>
             <li><a href='Shirt.php'>Shirt</a></li>
     <li><a href='MenSlipper.php'>Slipper</a></li>
          </ul>
       </li>
       <li class='has-sub '><a href='Women.php'>Women</a>
          <ul>
             <li><a href='DarGyi.php'>DarGyi</a></li>
             <li><a href='LongDress.php'>Long Dress</a></li>
     <li><a href='WomenSlipper.php'>Slipper</a></li>
          </ul>
       </li>
    </ul>
 </li>
 <li><a href='About.php'>About</a></li>
 <li><a href='Contact.php'>Contact</a></li>
</ul>
</div>
</div>

</body>
</html> 
```

和我的 CSS

```
<style>
@charset "UTF-8";
@import url(http://fonts.googleapis.com/css?family=Oxygen+Mono);

#blue{
height:400px;
background-color:blue;
}

#cssmenu{
clear:both;
float:left;
margin:0;
padding:0;
width:100%;
background:#fff;
position:relative;
}

div ul {
float:right;
list-style: none;
margin:0;
padding: 0;  
position: relative;
right:50%;
}
div ul:after {
content: ""; clear: both; display: block;
}
div ul li {
float: left;
margin:0 0 0 1px;
padding:0;
position:relative;
left:50%;
top:1px;
}
div ul li:hover {
background: #4b545f;
}
div ul li:hover a {
color: #fff;
}

div ul li a {
display: block; 
margin:0;
padding:.6em .5em .4em;
font-size:1em;
line-height:1em;
background:#ddd;
color: #444; 
text-decoration: none;
}

div ul ul {
display:none;
position: absolute; 
top: 2em;
left:0;
right:auto;
width:10em;
}
div ul li:hover > ul {
display: block;
}

div ul ul li {
left:auto;
margin:0;
clear:left;
width:100%;
}

div ul ul li a {
padding: 15px 40px;
color: #fff;
}   

div ul ul li a:hover {
background: #4b545f;
}

div ul ul ul {
position: absolute;
left: 100%;
top:0;
} 
```

如果可以，请你帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T04:15:11.283

我希望能帮助你。试试这个CSS：

```
#blue{
    position: absolute;
    /*left: 0; top:0; bottom:0; right :0;*//* For FULL SCREEN OVERLAY */
    left: 5px; top:5px; right :5px;/* SCREEN OVERLAY w/ 5px Margin */
    height:400px;
    background-color: rgba(0, 0, 225, 0.6);    
} 
```

您可以在元素 ID 中添加内容：蓝色。

这里的演示：http: [//jsfiddle.net/Tv97Y/](http://jsfiddle.net/Tv97Y/)

# apache - 不指定 index.php 无法访问目录

> ID：15736933
> 
> 赞同：0
> 
> 时间：2013-04-01T02:34:57.477
> 
> 标签：apache, .htaccess, mod-rewrite

我想让我的应用程序根目录可以在不指定 index.php 的情况下访问

```
www.domainname.com/dev/ 
```

我现在的 .htaccess 是

```
<IfModule mod_rewrite.c>
   RewriteEngine on
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule> 
```

在我的本地主机中它可以工作，但是在我的主机中，当我访问时，它说“目录访问被禁止”我应该改变什么？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T05:27:31.537

也许这会解决问题。

在根目录的 .htaccess 文件中添加类似这样的内容：

```
DirectoryIndex  index.php  index.html 
```

默认情况下，从左到右找到的第一个文件将被加载。您可以根据需要添加更多文件或删除*index.html*。这只是一个例子。

# matlab - 填充时间序列图

> ID：15736937
> 
> 赞同：0
> 
> 时间：2013-04-01T02:35:53.223
> 
> 标签：matlab, time-series

我有这段代码，我想做的是填充这个用时间序列制作的函数图。我尝试了完整和区域方法，但没有成功实施它们。我还尝试使用 TP1out 而不是 TP1 进行绘图，但是这样做我失去了 ZOH 插值并且图形变为线性。如果有人知道如何解决这个问题，我将不胜感激。

```
TP1out = [1 0 0 1 0];
time = 0:4; 
TP1 = timeseries(TP1out,time,'name','task 1');
TP1.DataInfo.Interpolation = tsdata.interpolation('zoh');
plot(TP1), grid on
axis([0 4 0 1.5]) 
```

![在此处输入图像描述](https://i.stack.imgur.com/MVfJB.png)

我知道这很愚蠢，但我尝试了很多东西，比如：

```
>> area(TP1)
Undefined function 'real' for input arguments of type
'timeseries'.

Error in xychk (line 48)
    x = real(y); y = imag(y);

Error in area (line 45)
            [msg,x,y] = xychk(args{1:nargs},'plot');

>> area(time,TP1)
Error using specgraph.areaseries/set
Array must be numeric or logical.

Error in specgraph.areaseries (line 40)
  set(h,args{:})

Error in area (line 83)
                    h = [h
                    specgraph.areaseries('YData',datachk(y(:,k)),
                    ...

>> area(time,TP1.Data)
Error using area (line 46)
Inputs must be 2-D. 
```

# css - 正则表达式匹配 CSS 颜色十六进制代码

> ID：15736939
> 
> 赞同：4
> 
> 时间：2013-04-01T02:36:20.180
> 
> 标签：css, ruby, regex

这应该很容易......我正在尝试用 ruby​​ 匹配 css 文件中连续的 3 个十六进制数字。这就是我所拥有的..

```
File.open(ARGV[0], 'r') do |source|
  source.each { |line|
  puts line if line =~ /\h{3}/
}
end 
```

这不会在具有多个此类值的文件中返回任何内容。如果我将 line 更改为，`line =~ /\h/`那么几乎每一行都会返回。我知道我必须缺少一些基本的东西，但它是什么？

编辑。这是一些示例输入。有效的十六进制颜色当然可以是三个十六进制值组合，但现在我只关心六个值的组合。

```
#captcha fieldset{border-top:1px solid #c0c0c0;border-bottom:1px solid#c0c0c0;margin:0;padding:10px}
#captcha legend{color:gray}
#captcha .divider{display:none}
#captcha .captcha_refresh{font-size: 9px;color:gray}
#captcha .captcha_other_options{padding-top:5px;font-size: 9px}
#captcha .recaptcha_text{font-size: 11px;line-height:16px}
#captcha .captcha_optout{font-size: 11px;padding:10px 0 5px}
#captcha #recaptcha_image{font-weight:bold;margin:10px 0 0 0}
#captcha #recaptcha_image a.recaptcha_audio_cant_hear_link{font-size: 9px;font-weight:normal}
#captcha .captcha_loading{border:0}
#captcha .captcha_image img{border:1px solid #c0c0c0}
#captcha .captcha_input input{direction:ltr;margin-top:4px;width:137px}
#captcha .captcha_input label{margin-right:4px}
.register #captcha .captcha_input label{color:#666;font-weight:bold}
#generic_dialog.captcha .generic_dialog_popup{width:340px} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-01T02:54:20.237

这个如何？

```
/(?<=#)(?<!^)\h{3}/ 
```

如果您想要 3 或 6 个字符，则使用此变体...

```
/(?<=#)(?<!^)(\h{6}|\h{3})/ 
```

### 控制台测试

```
1.9.3p392 :002 > css = "#captcha fieldset{border-top:1px solid #c0c0c0;border-bottom:1px solid#c0c0c0;margin:0;padding:10px}"
 => "#captcha fieldset{border-top:1px solid #c0c0c0;border-bottom:1px solid#c0c0c0;margin:0;padding:10px}"
1.9.3p392 :003 > css.scan(/(?<=#)(?<!^)(\h{6}|\h{3})/)
 => [["c0c0c0"], ["c0c0c0"]] 
```

# automapper - 有 AutoMapper 合并功能吗？

> ID：15736942
> 
> 赞同：5
> 
> 时间：2013-04-01T02:36:40.390
> 
> 标签：automapper

AutoMapper 初学者问题：我希望 AutoMapper 能让我将 DTO 中的属性合并回现有的业务对象中。我没有看到那样的东西。AutoMapper.Map() 生成一个新对象并填充它，但我需要将 DTO 更改复制回原始业务对象。是否有采用源对象和目标对象的 Map 函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T03:12:07.653

Map 方法被重载。您可以使用地图（src，dst）。

# python - 在 Django 中创建用户对象：为什么 first_name 和 last_name 都存储为 (u'Name',)？

> ID：15736944
> 
> 赞同：0
> 
> 时间：2013-04-01T02:36:46.173
> 
> 标签：python, django

我创建了一个用户注册表单，出于某种原因，first_name 和 last_name 字段存储在 (u'',) 中。我该如何防止这种情况？

views.py（不相关的东西省略了）：

```
def register(request):           

   if request.method == 'POST':
         form = RegistrationForm(request.POST)
         if form.is_valid():
             user = User.objects.create_user(
                     username=form.cleaned_data['username'],
                     email=form.cleaned_data['email'],
                     password=form.cleaned_data['password']
                     )
             user.first_name=form.cleaned_data['first_name'],
             user.last_name=form.cleaned_data['last_name'],
             user.save()
             userprofile, created = UserProfile.objects.get_or_create(user = user)
             return HttpResponse("you have been successfully registered!") 
```

模型.py：

```
class UserProfile(models.Model):
     user = models.OneToOneField(User) 
```

例如，我注册了一个名为 Joe Bruin 的用户。名称存储为 (u'Joe',) (u'Bruin',)。我认为 form.cleaned_data 出了点问题，但我不确定如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T02:42:40.410

您有尾随逗号：

```
user.first_name=form.cleaned_data['first_name'],
user.last_name=form.cleaned_data['last_name'], 
```

这使它们成为元组。你不想要那个。删除结尾的逗号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:47:55.300

`first_name`并且`last_name`不存储在`u''`. `u''`just 表示返回的字符串是 unicode 格式。django 中的默认编码是[unicode](http://docs.djangoproject.com/en/dev/ref/unicode/)。查看数据库中实际存储的内容。

来自[Django Docs 通用字符串处理](https://docs.djangoproject.com/en/dev/ref/unicode/#general-string-handling)：

```
# Python 2 legacy:
my_string = "This is a bytestring"
my_unicode = u"This is an Unicode string"

# Python 3 or Python 2 with unicode literals 
from __future__ import unicode_literals

my_string = b"This is a bytestring"
my_unicode = "This is an Unicode string" 
```

请注意 Python 3 中的默认设置是 unicode。

# desktop-application - 从 Web 开发背景开发离线原生应用程序

> ID：15736945
> 
> 赞同：-2
> 
> 时间：2013-04-01T02:36:59.463
> 
> 标签：desktop-application

我打算创建一个需要离线运行的简单簿记软件。问题是，我来自 Web 开发背景，如果是这种情况，我可以轻松编写它（MySQL 数据库和 php ......）

我知道这个问题可能正处于主观主义的边缘（没有这样的词！），但谁能帮助我从基于 Web 的过渡到桌面？比如你会推荐什么语言？我可以使用什么 IDE？MySQL的替代品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:25:14.600

**选项 1：**
您可以使用现有的 Web 应用程序开发技能，并使用在本地运行的 *服务器*和*MySQL创建基于浏览器的桌面应用程序。*
【**优势：**马上就可以开始】

**选项 2：**
开发桌面应用程序，使用这些：（
*除了我的建议之外，还有很多选择）*
IDE：*Eclipse*
语言：*Java*
RDBMS/后端：*MySQL*

希望这可以帮助

# ruby-on-rails - 从使用 Koala 访问 Facebook Graph API on Rails 的对象列表中获取更多信息

> ID：15736947
> 
> 赞同：0
> 
> 时间：2013-04-01T02:37:15.673
> 
> 标签：ruby-on-rails, facebook, facebook-graph-api, koala

在实例化与 Graph API 的连接后，我可以这样做：

```
@graph.get_connections("me", "friends") 
```

这将返回一个包含他们的姓名和 ID 的朋友列表。

如果我想从这些朋友那里获得更多信息，我可以这样做：

```
@graph.get_connections("me", "friends").each do |f|
    fdetails = get_object(f['id'])
    # do stuff
end 
```

但是这样一来，我将不得不向 Graph API 发出与朋友数量一样多的请求！

有没有什么东西可以从最初的通话中给我每个用户想要的字段？

简而言之，我该怎么做？

```
@graph.get_connections("me", "friends", :fields => "image,bio") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T08:53:36.443

你可以在你的控制器中试试这个：

```
 graph  = Koala::Facebook::API.new(session[:token])
          user = graph.get_object("me")
          @friends = graph.get_connections(user["id"], "friends?fields=id,name,link")
session[:token] : contain my token 
```

在您看来，例如：

```
 <% @friends.each do |f| %>
<%= link_to f["name"], f["link"], :target => '_blank'%> 
```

# javascript - 如何获取光标的相对坐标？

> ID：15736951
> 
> 赞同：0
> 
> 时间：2013-04-01T02:37:54.877
> 
> 标签：javascript, html

我有一个画布。当按下左键时，我需要获取光标相对于画布左上角的坐标。但是 Javascript 给我的只是`clientX`,`clientY`和. 我试图计算这个。但是画布没有, ,或可用。`screenX``screenY``clientX``clientY``screenX``screenY`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T02:43:47.870

假设你有你的画布

```
<canvas id="myCanvas"></canvas> 
```

您可以首先使用获取 Canvas 的位置

```
var element = document.getElementById('myCanvas');
var rect = element.getBoundingClientRect(); 
```

这将为您提供一个具有以下属性的对象：顶部、右侧、底部和左侧。因此，要计算光标相对于左上角的坐标，只需从 clientX 和 clientY 的左上角 X 和 Y 坐标中减去该坐标。

```
var canvasCursor = { top: clientY - rect.top,
                    left: clientX - rect.left } 
```

# node.js - 使用复合，使用 validatesPresenceOf 时出现更新错误

> ID：15736954
> 
> 赞同：0
> 
> 时间：2013-04-01T02:38:25.077
> 
> 标签：node.js, compoundjs, jugglingdb

我正在使用 Compound 和 mongodb 创建**一个**应用**程序**。复合使用jugglingdb和jugglingdb-mongodb连接mongodb。

我使用化合物的脚手架为客户生成了一个 crud。然后，我添加`Client.validatesPresenceOf('name');`到 app/models/client.js

```
module.exports = function (compound, Client) {
  Client.validatesPresenceOf('name');
}; 
```

在创建时，它可以工作，但在更新时它会失败。

我也尝试将验证添加到 db/schema.js，但我得到了同样的错误。

这是我得到的错误

> /Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/connection/server.js:529 抛出错误；^ 错误：发送后无法设置标题。在 ServerResponse.OutgoingMessage.setHeader (http.js:708:11) 在 ServerResponse.res.setHeader (/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/express/node_modules/connect/lib/patch.js:59 :22) 在 ServerResponse.res.location (/Users) 的 ServerResponse.res.set.res.header (/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/express/lib/response.js:518:10) /camilo/Documents/Pruebas/Nodejs/interno2/node_modules/express/lib/response.js:649:8) 在 ServerResponse.res.redirect (/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/express/lib /response.js:691：ModelConstructor 的代码（在 (/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/compound/node_modules/kontroller/lib/base.js:157:17), :84:9) 进行评估。(/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb/lib/model.js:827:33) 在 ModelConstructor.next (/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb/ lib/hooks.js:48:18) 在 ModelConstructor。(/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb/lib/model.js:826:38) 在 ModelConstructor.next (/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb/ lib/hooks.js:48:18) 在 /Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb/lib/model.js:825:30 在 /Users/camilo/Documents/Pruebas/Nodejs/interno2 /node_modules/jugglingdb-mongodb/lib/mongodb.js:249：9 在 /Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/collection.js:703:14 处为空。(/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/db.js:1709:18) 在 EventEmitter 的 g (events.js:175:14)。在 Server.Base._callHandler (/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/connection/base.js: 130:25) 在 /Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/connection/server.js:464:24 在 MongoReply.parseBody (/Users/camilo /Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/responses/mongo_reply.js：132:5) 无效。(/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/connection/server.js:410:22) 在 EventEmitter.emit (events.js:95:17 ) 为空。(/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/connection/connection_pool.js:190:13) 在 EventEmitter.emit (events.js:98:17 ) 在套接字。(/Users/camilo/Documents/Pruebas/Nodejs/interno2/node_modules/jugglingdb-mongodb/node_modules/mongodb/lib/mongodb/connection/connection.js:382:22) 在 Socket.EventEmitter.emit (events.js:95 :17) 在套接字。(_stream_readable.js:699:14) 在 Socket.EventEmitter.emit (events.js:92:17) 在 emitReadable_ (_stream_readable.js:382:10) 在 emitReadable (_stream_readable.js:377:

**版本：**

*   节点：0.10.1
*   复合js：1.1.5-21
*   jubblingdb: 0.2.0-27
*   jugglingdb-mongodb: 0.0.4-1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T16:55:36.177

问题是 jubblingdb 0.2.0-27 上的一个错误。作者更新到0.2.0-28，问题解决。

# perl - 如何使用 perl 包具有相同的模块名称

> ID：15736956
> 
> 赞同：-2
> 
> 时间：2013-04-01T02:39:38.227
> 
> 标签：perl

```
 package B;
    use Moose;

    has 'b' => (
        is => 'ro',
        isa => 'Str',
        default => 'Hello',
   );

    package main;                                                                                                                                         
    my $b = B->new; 
```

我使用此代码，但错误是：

**无法通过 t.pl 第 30 行的包“B”找到对象方法“new”。**

我知道**B**模块已经安装，那么我如何在我的文件中引用**B**而不是**B**模块？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-01T02:41:03.910

“B”是现有核心模块的名称。不要将您的模块命名为“B”。

# html - 我在 HTML 工具包的 VB 脚本中收到错误代码“预期语句”

> ID：15736957
> 
> 赞同：0
> 
> 时间：2013-04-01T02:39:58.190
> 
> 标签：html, vbscript

下面是我在 HTML Kit 中处理的代码，并且已经尝试了我所知道的所有修复但不能修复的代码。

这是我得到的错误：

```
ERROR: An error has occurred in the script on this page
       Line: 35
       Char: 2
       ERROR: Expected Statement
       Code: 0 
```

我的脚本：

```
1\. <script language = vbscript>
2\. Option Explicit
3.
4\. DIM valueofhome, countyhome, charleston, berkeley, dorchester, rate, taxowed
5.
6\. 'input
7\. valueofhome= inputbox("What is the value of the home?")
8\. countyhome= inputbox("What county is home in?")
9.
10\. Select Case countyhome
11.
12\.  Case "charleston"
13\. 
14\.   if valueofhome >= 150000 then
15\.       rate= .02
16\.         
17\.     elseif valueofhome >= 50000 then
18\.       rate= .015
19\.         
20\.     else 
21\.     rate= .010
22\. End if
23\.     
24\. case "dorchester"
25\. 
26\.   if valueofhome >= 150000 then
27\.       rate= .0175
28\.         
29\.     if valueofhome >= 50000 then 
30\.       rate= .015
31\.         
32\.     else
33\.      rate= .0125
34.
35\.  case "berkeley" <<<<<<<<-----------Here is where it is saying the error is
36\. 
37\.   if valueofhome >= 150000 then
38\.       rate= .0275
39\.         
40\.     if valueofhome >= 50000 then
41\.       rate= .0225
42\.         
43\.     else 
44\.      rate= .02  
45\. End if  
46\. 
47\. case else   
48\. msgbox("You didn't type in charleston, berkeley, or dorchester")            
49.
50\. End select
51\.     
52\. taxowed= cint(valueofhome) * rate                           
53\.     
54\. 'output
55\. document.write "<br>value of home" & valueofhome 
56\. document.write "<br>county home" & countyhome  
57\. document.write "<br>tax owed" & taxowed
58\. document.write msgbox("You didn't type in charleston, berkeley, or dorchester")
59.
60\. </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:48:56.630

你错过了一些东西：

*   `elseif`29号线
*   `End if`前`case "berkeley"`
*   `elseif`在 40 号线

# clojure - ^:dynamic 在 Clojure 中做了什么？

> ID：15736960
> 
> 赞同：6
> 
> 时间：2013-04-01T02:40:30.603
> 
> 标签：clojure

我搜索了“clojure 动态”和“clojure 动态范围”，并阅读了 10 多篇文章，但我仍然不清楚`^:dyanmic`它的作用。 [我认为这篇文章可能正在回答我的问题](http://blog.rjmetrics.com/lexical-vs-dynamic-scope-in-clojure/)，但代码示例似乎“缺失”了，所以我什至不确定它是否指的是我感到困惑的同一件事。

我正在尝试解决[clj-http](https://github.com/dakrone/clj-http/blob/master/src/clj_http/client.clj)项目中的问题，但首先我必须了解代码。它具有如下定义的功能：

```
(defn ^:dynamic parse-html
  "Resolve and apply crouton's HTML parsing."
  [& args]
  {:pre [crouton-enabled?]}
  (apply (ns-resolve (symbol "crouton.html") (symbol "parse")) args)) 
```

但我不明白这`^:dynamic`意味着/做什么。谁能用非常简单的方式向我解释一下？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T02:58:42.440

它将函数定义为动态范围。

换句话说，这允许某人`parse-html`在给定的函数调用中重新绑定，并使该新绑定仅适用于从该特定调用调用的函数。

如果`parse-html`不是动态范围的，那么重新绑定将导致新绑定被任何使用的代码看到，`parse-html`而不仅仅是由执行重新绑定的函数调用激活的代码。

> 动态范围可用于替代全局范围的变量。一个函数可以说“让 current_numeric_base = 16；调用其他函数；” 其他函数都将以十六进制打印。然后当它们返回时，基数设置函数返回，基数将返回到原来的状态。 [http://c2.com/cgi/wiki?DynamicScoping](http://c2.com/cgi/wiki?DynamicScoping)

* * *

正如下面评论中所指出的，您实际上不能重新绑定在 Clojure 中没有动态作用域的变量。如果可以的话，更新一个词法范围的变量将影响所有执行的代码，即使它运行在与重新绑定发生位置不同的调用堆栈中。

所以也许一些伪代码会使动态范围和词法范围之间的区别变得清晰。

使用动态范围变量的示例：

```
(def ^:dynamic a 0)

(defn some-func [x] (+ x 1))

; re-binds a to 1 for everything in the callstack from the (binding)
; call and down
(binding [a 1] 
   (print (some-func a)))

 ; a was only re-bound for anything that was called from
 ; within binding (above) so at this point a is bound to 0.
(print (some-func a)) 
```

**将打印：** 2 1

词法范围变量的示例：

```
(def a 0)

(defn some-func [x] (+ x 1))

; re-binds a to 1 for everyone, not just things that 
; are in the callstack created at this line
(set-var [a 1]  ; set-var is a made up function that can re-bind lexically scoped variables
   (print (some-func a)))

; a was lexically scoped so changing it changed
; it globally and not just for the callstack that
; contained the set-var.
(print (some-func a)) 
```

**将打印：** 2 2

# jboss - JMS 服务器的最佳实践是什么？它应该部署在消费者端还是生产者端？

> ID：15736961
> 
> 赞同：0
> 
> 时间：2013-04-01T02:40:36.063
> 
> 标签：jboss, jms, weblogic, integration, message-queue

从架构的角度来看，我想知道在具有 2 个应用程序和 OSB 作为中间件的集成场景中，最佳实践是什么：JMS 消费者在 JBoss 上运行，而 OSB 应用程序封装了一个服务提供者。JMS 队列应该驻留在 JBoss（外部服务器）还是 WebLogic Server 上？也就是说，如果我可以选择，JMS 服务器应该在消费者端还是生产者端？有什么好处和坏处？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:50:19.617

这取决于您的需要，您可以在您的 Web 逻辑服务器中创建一个外部目的地，该目的地连接到生产者端的生产者队列。在这种安排中，您的消费者将在连接到生产者队列的外部目的地的本地端进行侦听。

我可以想到以下好处：

A> 外部目标映射到 WebLogic JNDI 树，部署到服务器的任何 MDB 都可以使用其本地 JNDI 名称简单地引用远程目标。

B> 由于您直接与远程资源通信，因此在交付等方面没有滞后/延迟。

C> 一个问题可能是您将无法在消费端生成消息，因为该用户可能没有对队列的入队访问权限。但这一切都取决于您的设置。这对于某些情况（如测试等）可能是必需的。

# eclipse - 任何 Eclipse 插件可以在编辑器中显示文件的 Mercurial 差异？

> ID：15736962
> 
> 赞同：0
> 
> 时间：2013-04-01T02:40:40.043
> 
> 标签：eclipse, mercurial

如果文件属于 Mercurial 或 Git 存储库，Vim 的[vim-signify](https://github.com/mhinz/vim-signify)等插件会显示正在编辑的文件的差异状态。它通过在编辑器窗口的左侧显示自上次提交以来更改的行的指示符来显示此信息。

是否有任何与**Mercurial**一起使用的类似**Eclipse****插件**？也就是说，在编辑属于 Mercurial 存储库的文件时，已更改的行会以某种方式突出显示或指示。

 ***** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T19:00:25.920

唯一值得的一个:)：[https ://bitbucket.org/mercurialeclipse/main/wiki/Home](https://bitbucket.org/mercurialeclipse/main/wiki/Home)****

# c# - 标签文本不变

> ID：15736964
> 
> 赞同：1
> 
> 时间：2013-04-01T02:41:00.100
> 
> 标签：c#, asp.net

情况如下：我有一个按钮，当我单击它时，它将执行一些语句，我希望它显示一些状态消息。

```
 protected void Button1_Click(object sender, EventArgs e)
 {
    //executes some statements
    //shows some status message like "Done"
 } 
```

我想过使用标签文本来显示不同的状态消息，但标签文本仅在方法完成时显示最后一条状态消息。它不显示中间状态消息....我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T06:12:57.780

您还可以使用文字，它也允许一些格式

```
<asp:Literal ID="ltrlMessages" runat="server"></asp:Literal>

protected void Button1_Click(object sender, EventArgs e)
{
    ltrlMessages.Text = "status message one";
    //
    //executes some statements
    //
    ltrlMessages.Text += "</br> status message two";
    //
    //some other statements
    //
    ltrlMessages.Text += "</br> status message three and so on";

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T02:50:57.660

ASP.Net 无法按照您尝试的方式工作。整个方法将完成（将标签更新为一个且只有一个最终值），然后渲染页面（使用标签的最终值。）

我可以想到两种方法来做你正在寻找的东西：

1）编写一堆Web服务方法并用ajax调用每个方法。在每次 ajax 调用后更新客户端的标签 (div)。

2) 页面呈现后立即重新提交页面（当前操作完成）。您仍然需要保持页面状态以了解您当前在进程中的位置（例如 4 个操作中的 2 个）（增加隐藏的表单变量或会话变量，然后在页面加载中使用该变量的值决定如果发生什么情况`IsPostback`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T03:39:26.593

或者尝试这样做：

```
Label1.Text = "First Status";
// Do something
Label1.Text += "\nSecond Status";
// Do something again
Label1.Text += "\nDone!!"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-01T03:21:28.363

如果您想为此显示所有状态。您可以使用其他控件（例如`Listbox`）来处理将在每次执行中调用的状态数组/列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-21T16:37:19.713

尝试

```
Label1.Text="starting stuff";
this.refresh();
//do stuff
Label2.Text="finishing stuff"; 
```

this.refresh() 导致屏幕在方法的中间重新绘制，而不是在默认情况下在末尾重新绘制。

# android - Cocos2d-x 多点触控在 iOS 上的表现很奇怪

> ID：15736965
> 
> 赞同：1
> 
> 时间：2013-04-01T02:41:02.190
> 
> 标签：android, c++, ios, multi-touch, cocos2d-x

```
CCSetIterator iter = touches->begin();

        for (; iter != touches->end(); iter++)
            {
            CCTouch* touchPoint = (CCTouch*)(*iter);

            if(touchPoint->getID()==0)
            {
                CCLog("TOUCH_1");
                location1 = touchPoint->getLocationInView();
                location1 = CCDirector::sharedDirector()->convertToGL(location1);

            }

            if(touchPoint->getID()==1)
            {

                CCLog("TOUCH_2");

                location2 = touchPoint->getLocationInView();
                location2 = CCDirector::sharedDirector()->convertToGL(location2);
                CCSprite* lightning = CCSprite::create("lightningFrame_0.png");
                lightning->setScale(.4);
                lightning->setPosition(ccp((location1.x+location2.x)/2,(location1.y+location2.y)/2));
                lightning->setScaleX(ccpDistance(location1,location2)/1920);
                this->addChild(lightning,0,0);

                float angleRad = atanf((location2.y-location1.y)/(location2.x-location1.x));
                float angleDeg = CC_RADIANS_TO_DEGREES(angleRad);
                lightning->setRotation(-angleDeg);
                addBoxBodyForSprite(lightning);
                CCAction* removeChild = CCCallFuncN::create(this,callfuncN_selector(HelloWorld::spriteDone));
                CCAction* fadeAway = CCFadeOut::create(.5);
                lightning->runAction(CCSequence::create(animInt.lightningAnimation(), removeChild ,NULL));
                lightning->runAction(fadeAway);

            }

    } 
```

上面的代码获取了两个接触点，并在它们之间添加了一个闪电精灵。它在 Android 上运行完美，但在 iOS 上，有时会混淆位置 1 和位置 2。如果我像“驰骋”一样缓慢地应用 2 次触摸，它可以在 iOS 上运行。为什么会有这样的行为。这让我困惑了一周左右。任何信息都会很棒！

# php - 调试 Cakephp

> ID：15736968
> 
> 赞同：0
> 
> 时间：2013-04-01T02:41:18.357
> 
> 标签：php, cakephp

我的 Cakephp 应用程序有问题。我发现每天一次或每两天一次 PHP 会锁定并变得无响应，导致进程崩溃并重新启动。

从我读过的内容来看，这可能是由无限循环中的方法引起的。由于应用程序非常大，无论如何我可以在日志中捕获所有用户的活动，并查看哪些方法尚未完成。

如果有人可以建议我可以用来做这样的事情的插件、组件或方法。仅供参考，我想避免在我的应用程序中的每个方法中添加日志语句。

**附加信息：**

1.  蛋糕PHP 2.1
2.  PHP 错误日志中的错误消息：PHP 致命错误：

    ...lib\Cake\Model\Datasource\CakeSession.php 在第 609 行中超过了 300 秒的最大执行时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T03:52:24.357

您是否考虑过编写自定义日志方法并简单地捕获 cakephp 的异常/错误？这将避免您必须将日志语句放在每个地方。

[http://book.cakephp.org/2.0/en/core-libraries/logging.html](http://book.cakephp.org/2.0/en/core-libraries/logging.html)

根据您的应用程序有多大，您可以考虑实施 nosql 日志系统。couchbase 和 memcached ( [http://www.couchbase.com/](http://www.couchbase.com/) ) 来存储所有记录的事件。可能比 cakephp 默认将所有日志信息存储在一个大文本文件中更可取。

# html - 如何使导航中的href跨越整个div

> ID：15736969
> 
> 赞同：0
> 
> 时间：2013-04-01T02:41:22.077
> 
> 标签：html, css, href, nav

我试图让我的导航跨越整个 div，我希望他们的背景颜色/目标的宽度为 33%

```
<nav>
<a href="index.html" id="nav1">Home</a>
<a href="lesson1.html" id="nav2">Lesson 1: Intro</a>
<a href="lesson2.html" id="nav1">Lesson 2: Creating a Project</a>
</nav>

#nav1 {
    background-color: #a43200;
    color: white;
    text-decoration: none;
    padding: 10px 100px 10px 100px;
    font-size: 1.3em;
}
#nav2 {
    background-color: #c73d00;
    color: white;
    padding: 10px 100px 10px 100px;
    font-size: 1.3em;
    text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T02:58:49.517

您的设置有一些问题（例如：您有多个`id`s，**这是一个 no-no**，所以我将它们更改为`class`es）。

我也经历过并尝试删除一些重复的样式。所以你会看到很多按钮样式被压缩成一种`#nav a`样式，然后自定义颜色被应用到不同的样式中。

我已将该`font-size`属性设置`#nav`为 12px，但这仅用于演示目的。请根据您的喜好编辑此内容。

这个小提琴应该有帮助：

**小提琴：http:**
[//jsfiddle.net/fACmM/](http://jsfiddle.net/fACmM/)

**HTML：**

```
<div id="nav">
<a href="index.html" class="nav1">Home</a>
<a href="lesson1.html" class="nav2">Lesson 1: Intro</a>
<a href="lesson2.html" class="nav1">Lesson 2: Creating a Project</a>
</div> 
```

**CSS：**

```
#nav
{
    width:100%;
    font-size:12px;
}
#nav a
{
    width:33%;
    float: left;
    color: white;
    padding: 10px 0px;
    font-size: 1.3em;
    text-decoration: none;
    text-align:center;
}

.nav1 {
    background-color: #a43200;
}
.nav2 {
    background-color: #c73d00;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T03:04:19.067

顺便说一下，这篇[文章](http://css-tricks.com/the-difference-between-id-and-class/)可以帮助您理解为什么在当前代码中使用 class 而不是`class`id`id`

html

```
<nav>
<a href="index.html" class="nav1">Home</a>
<a href="lesson1.html" class="nav2">Lesson 1: Intro</a>
<a href="lesson2.html" class="nav1">Lesson 2: Creating a Project</a>
</nav> 
```

css

```
nav {width:960px}
nav a {
    float:left; 
    text-decoration: none;
    padding: 10px 50px 10px 50px;
    font-size: 1.3em;
    color: white;
}
.nav1 {
    background-color: #a43200;
}
.nav2 {
    background-color: #c73d00;
} 
```

工作[演示](http://jsfiddle.net/audAt/9/)

希望这对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T02:54:11.813

在你的 CSS 中添加了 display:block。

见小提琴：http: [//jsfiddle.net/djwave28/audAt/6/](http://jsfiddle.net/djwave28/audAt/6/)

```
<nav>
    <ul>
        <li><a href="index.html" id="nav1">Home</a>
        </li>
        <li><a href="lesson1.html" id="nav2">Lesson 1: Intro</a>
        </li>
        <li><a href="lesson2.html" id="nav1">Lesson 2: Creating a Project</a>
        </li>
    </ul>
</nav>

nav ul {
    list-style:none;
}
nav ul li {
    float:left;
    width:30%;
}
#nav1 {
    position:relative: float:left;
    background-color: #a43200;
    color: white;
    text-decoration: none;
    padding: 10px 0px 10px 0px;
    font-size: 1.3em;
    display:block;
}
#nav2 {
    display:block;
    position:relative: float:left;
    background-color: #c73d00;
    color: white;
    padding: 10px 0px 10px 0px;
    font-size: 1.3em;
    text-decoration: none;
} 
```

# c# - 为什么对 EventHandler 没有限制 ?

> ID：15736970
> 
> 赞同：6
> 
> 时间：2013-04-01T02:41:23.350
> 
> 标签：c#, event-handling, eventargs

我只是偶然发现（当编译的东西我认为不会编译时）EventHandler**不受**类型 System.EventArgs 的限制。

这是内联文档：

```
#region Assembly mscorlib.dll, v4.0.0.0
// C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\mscorlib.dll
#endregion

namespace System
{
    // Summary:
    //     Represents the method that will handle an event.
    //
    // Parameters:
    //   sender:
    //     The source of the event.
    //
    //   e:
    //     An System.EventArgs that contains the event data.
    //
    // Type parameters:
    //   TEventArgs:
    //     The type of the event data generated by the event.
    [Serializable]
    public delegate void EventHandler<TEventArgs>(object sender, TEventArgs e);
} 
```

这是文档和实现之间的不匹配吗？

*我问是因为我很好奇。这根本不是抱怨。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-01T03:37:26.607

.net 4.5 中删除了类型约束。

这是 .net 4.5 签名。 [http://msdn.microsoft.com/en-us/library/db0etb8x%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/db0etb8x%28v=vs.110%29.aspx)

```
[SerializableAttribute]
public delegate void EventHandler<TEventArgs>(
    Object sender,
    TEventArgs e
) 
```

这是 .net 4.0 签名。 [http://msdn.microsoft.com/en-us/library/db0etb8x%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/db0etb8x%28v=vs.100%29.aspx)

```
[SerializableAttribute]
public delegate void EventHandler<TEventArgs>(
    Object sender,
    TEventArgs e
)
where TEventArgs : EventArgs 
```

# css - 如何通过媒体查询使用 CSS3 加载图像？

> ID：15736971
> 
> 赞同：0
> 
> 时间：2013-04-01T02:41:28.190
> 
> 标签：css, mobile, media-queries

我在这里注意到关于stackoverflow的这个问答： [如何在css中指定不同的图像，具体取决于用户是在桌面还是移动浏览器上访问](https://stackoverflow.com/questions/8632486/how-to-specify-a-different-image-in-css-depending-if-the-user-visits-on-a-deskto)

他的HTML：

```
<img src="image.jpg"
     data-src-960px="image-960px.jpg"
     data-src-1260px="image-1260px.jpg"
     alt=""> 
```

和 CSS 是：

```
img[data-src-960px] {
            content: attr(data-src-960px, url);
        } 
```

我正在尝试将其合并到网页中，但失败得很惨……

我的 HTML：

```
<div class="container">
    <div><img src="images/header.jpg" data-src-mobile="images/header_mobile.jpg" alt="Philadelphia" /></div>
</div> 
```

我的 CSS：

```
img[data-src-mobile] {
    content: attr(data-src-mobile, url) !important;
} 
```

我有一个专门用于移动设备的样式表。但这根本行不通。它总是加载： `images/header.jpg`

里面的`url`参数`attr`应该有什么东西吗？我试过用 替换`url`，`../images/header_mobile.jpg`但这也不起作用。

你怎么用这个？我似乎根本无法在互联网上找到更多细节...... :(

对于这里的价值是一些对人们说这有效的参考：

[使用 CSS/HTML 通过 3 个简单步骤制作响应式网站](http://css.dzone.com/articles/using-csshtml-make-responsive)

[使用 CSS3 的响应式图像](http://nicolasgallagher.com/responsive-images-using-css3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-20T02:27:52.883

使用`min-width`、和。`max-width`_ 例如：`:after``content:url`

```
@media screen and (min-width: 961px)
{
a:after {content:url("http://www.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-800x188.png");}
}

@media screen and (max-width: 960px){
a:after {content:url("http://www.eclipse.org/eclipse.org-common/themes/solstice/public/images/logo/eclipse-426x100.png");}
}
```

```
<a tabindex="1"></a>
```

**参考**

*   [斯图尼科尔斯 | CSS 播放 | 内容： - CSS 画廊](http://www.cssplay.co.uk/menu/content100.html)

*   [CSS 内容和属性](https://davidwalsh.name/css-content-attr)

*   [内容 - CSS | MDN](https://developer.mozilla.org/en-US/docs/Web/CSS/content)

# bash - ${1:-} 是什么意思？

> ID：15736978
> 
> 赞同：0
> 
> 时间：2013-04-01T02:42:31.393
> 
> 标签：bash

你能帮我解释一下 BASH 脚本中的表达式吗？

```
${1:-} 
```

我以前从未见过它，所以我尝试了一些。

```
echo ${1:-}
echo ${1} 
```

我看不出有什么区别。

非常感谢你！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-01T02:55:19.690

从[手册页](http://linux.die.net/man/1/bash)：

> ${参数：-字}
> 
> 使用默认值。如果参数未设置或为空，则替换单词的扩展。否则，参数的值被替换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T03:04:23.957

只是一个改编自[这里的小例子](http://wuhrr.wordpress.com/2008/12/08/bash-shell-scripting-a-colon-difference/)

```
varName="Aloha"
echo "varName is not empty: the two constructs behave the same"
echo ${varName-Hello World}
echo ${varName:-Hello World}
echo ""
unset varName
echo "varName is unset: they still behave the same way"
echo ${varName-Hello World}
echo ${varName:-Hello World}
echo ""
varName=""
echo "varName is empty: this is where the two differs"
echo ${varName-Hello World}
echo ${varName:-Hello World}
echo "" 
```

`:-`如果变量为空或未设置，basicalli会更改变量的值，如果未设置，`:`则更改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T03:16:40.730

它没有太多目的。`${1-}`启用时是相关`set -u`的，在这种情况下，它是另一个类似于`${1+"$1"}`防止在取消引用具有预期可能未设置的值的参数时引发错误的黑客。

```
 $ ( f() { printf '<%s> <%s>\n' $# ${1-}; }; set -u; f )
<0> <>
 $ ( f() { printf '<%s> <%s>\n' $# $1; }; set -u; f )
-bash: $1: unbound variable 
```

当参数未设置或为空时，添加冒号将扩展备用。在任何一种情况下，当扩展未引用时，结果将始终为无参数（无论 IFS 值如何）。由于在 Bash 的联机帮助页中指定的不幸方式，人们不知道 the`-`和PE 运算符之间的区别并不少见。`:-`

像往常一样，我建议永远不要`set -u`在脚本中使用。如果您是发现它对调试有用的人之一，请仅暂时使用它。

# asp.net-mvc - MVC jQuery POST 在第二个请求中更新购物车信息失败

> ID：15736981
> 
> 赞同：0
> 
> 时间：2013-04-01T02:42:39.427
> 
> 标签：asp.net-mvc, jquery

我只是想使用 jQuery POST 更新购物车。第一个请求就成功了。但是，它似乎在第二个请求中引发了 500 服务器错误。问题是在我调试之后。第二次尝试渲染视图而不是将 JSON 对象发送到回调函数时的操作结果。下面是我的代码。这是我购物车中的操作结果

```
 [HttpPost]
    public ActionResult UpdateResultCart(int productId)
    {
        // Retrieve the album from the database
        var addedProduct = _db.Products
            .Single(pr => pr.ProductID == productId);

        // Add it to the shopping cart
        var cart = ShoppingCartModel.GetCart(this.HttpContext);

        cart.AddToCart(addedProduct);

        // Set up our ViewModel
        var shoppingCartData = new ShoppingCartViewModel
        {
            CartItems = cart.GetCartItems(),
            CartTotal = cart.GetTotal()
        };
        return Json(shoppingCartData);
    } 
```

这是我的 JavaScript 函数

```
$(function () {   
$("#AddCartProduct").click(function () {
    var productId = $(this).attr("data-id");
    if (productId != '') {
        // Perform the ajax post
        // Assign handlers immediately after making the request,
        // and remember the jqxhr object for this request
        var jqxhr = $.post("/Cart/UpdateResultCart", { "productId": productId },   function(data) {
            alert("success");
            $('#cart-item').text(": " + data.CartItems.length + " Items");
            $('#total-price').text("Total Price:" + numberToCurrency(data.CartTotal));                
        })
        .done(function() { alert("second success"); })
        .fail(function() { alert("error"); });   
    }
});
}); 
```

最后，这是我在局部视图中需要更新的 HTML 元素

```
@if (Request.IsAuthenticated) {           
<ul>
    <li>             
        @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
        {
            @Html.AntiForgeryToken()
            <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
        }
    </li>
    |
    <li><a href="#">Account</a></li>
    |
    <li>
        <a href="#">Cart</a>
        <label class="cart-item">: 0 Items</label>|
        <label class="total-price">$0.00</label>
    </li>               

</ul>    
} else {
<ul>
    @*<li>@Html.ActionLink("Register", "Register", "Account", routeValues: null, htmlAttributes: new { id = "registerLink" })</li>*@
    <li>@Html.ActionLink("Log in", "Login", "Account", routeValues: null, htmlAttributes: new { id = "loginLink" })</li>|
    <li><a href="#">Account</a></li>|
    <li>
        <a href="#">Cart</a>
        <label class="cart-item">: 0 Items</label>|
        <label class="total-price">$0.00</label>
    </li>               
</ul>
} 
```

谢谢

# c# - 扩展表达式树

> ID：15736988
> 
> 赞同：0
> 
> 时间：2013-04-01T02:43:56.383
> 
> 标签：c#, linq, entity-framework, lambda, expression

我是表达式树的新手，不知道如何实现以下内容。将感谢任何想法或链接。

我有 2 个实体需要映射到相应的视图模型。我希望映射器成为独立的表达式，可以在我的应用程序的各个部分中重用。

这个映射器表达式是将 MainEntity 转换为 MainEntityViewModel：

```
public static Expression<Func<MainEntity, MainEntityViewModel>> MainMapper =
    me => new MainEntityViewModel()
        {
            Property1 = me.Property1, // direct mapping
            OtherEntityModel = new OtherEntityViewModel() // here i'd like to use outer expression
                {
                    Name = me.OtherEntityObject.Name,
                    Description = me.OtherEntityObject.Description
                }
        }; 
```

我还希望我的 OtherEntity 是一个单独的表达式，如下所示：

```
public static Expression<Func<OtherEntity, OtherEntityViewModel>> OtherMapper =
    oe => new OtherEntityViewModel()
        {
            Name = oe.Name,
            Description = oe.Description
        }; 
```

但我不知道如何在第一个映射器中应用它。我想我需要以某种方式扩展第一棵树（添加表达式节点或其他），但不知道该怎么做。
谢谢！
PS：我知道 AutoMapper 等，但想使用手动映射。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:26:50.410

尝试这个：

```
public static Func<MainEntity, OtherEntity, Func<OtherEntity, OtherEntityViewModel>, MainEntityViewModel> 
                MainMapper = me, oe, oMapper  => new MainEntityViewModel()
                                                    {
                                                        Property1 = me.Property1, // direct mapping
                                                        OtherEntityModel = oMapper.Invoke(oe)
                                                    };

public static Func<OtherEntity, OtherEntityViewModel> 
                OtherMapper = oe => new OtherEntityViewModel()
                                        {
                                            Name = oe.Name,
                                            Description = oe.Description
                                        }; 
```

我不太清楚你为什么需要使用 Expression，但如果你愿意，你可以把它放回去

# python - 如何快速估计两个（纬度、经度）点之间的距离？

> ID：15736995
> 
> 赞同：62
> 
> 时间：2013-04-01T02:44:39.233
> 
> 标签：python, math, maps, mapping, latitude-longitude

我希望能够估计两个（纬度，经度）点之间的距离。我想下冲，因为这将用于 A* 图形搜索，我希望它**很快**。这些点之间的距离最多为 800 公里。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2013-04-01T03:22:43.357

Python中的[Haversine 公式（两个 GPS 点之间的方位角和距离）](https://stackoverflow.com/questions/4913349/haversine-formula-in-python-bearing-and-distance-between-two-gps-points)的答案提供了可以回答您的问题的 Python 实现。

使用下面的实现，我在一台较旧的笔记本电脑上**在不到 1 秒的时间内执行了 100,000 次迭代。**我认为就您的目的而言，这应该足够了。但是，您应该在优化性能之前分析任何内容。

```
`from math import radians, cos, sin, asin, sqrt
def haversine(lon1, lat1, lon2, lat2):
    """
    Calculate the great circle distance between two points 
    on the earth (specified in decimal degrees)
    """
    # convert decimal degrees to radians 
    lon1, lat1, lon2, lat2 = map(radians, [lon1, lat1, lon2, lat2])
    # haversine formula 
    dlon = lon2 - lon1 
    dlat = lat2 - lat1 
    a = sin(dlat/2)**2 + cos(lat1) * cos(lat2) * sin(dlon/2)**2
    c = 2 * asin(sqrt(a)) 
    # Radius of earth in kilometers is 6371
    km = 6371* c
    return km`
```

`低估`haversine(lat1, long1, lat2, long2) * 0.90`或任何你想要的因素。我看不出在您的低估中引入错误有什么用。`

 `* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-04-01T11:06:20.173

由于距离相对较小，您可以使用等距矩形距离近似。这种近似比使用 Haversine 公式更快。因此，要获得从参考点 (lat1/lon1) 到您正在测试的点 (lat2/lon2) 的距离，请使用以下公式。重要提示：您需要将所有纬度/经度点转换为弧度：

```
R = 6371  // radius of the earth in km
x = (lon2 - lon1) * cos( 0.5*(lat2+lat1) )
y = lat2 - lat1
d = R * sqrt( x*x + y*y ) 
```

由于“R”以公里为单位，因此距离“d”将以公里为单位。

参考：[http ://www.movable-type.co.uk/scripts/latlong.html](http://www.movable-type.co.uk/scripts/latlong.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-01T02:56:34.557

速度的一种想法是将经纬度坐标转换为 3D (x,y,z) 坐标。预处理点后，使用点之间的欧几里得距离作为实际距离的快速计算下冲。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-12-10T19:55:34.033

如果点之间的距离相对较小（米到几公里的范围），那么快速方法之一可能是

```
from math import cos, sqrt
def qick_distance(Lat1, Long1, Lat2, Long2):
    x = Lat2 - Lat1
    y = (Long2 - Long1) * cos((Lat2 + Lat1)*0.00872664626)  
    return 111.319 * sqrt(x*x + y*y) 
```

Lat、Long 以弧度为单位，距离以 km 为单位。

Haversine 距离的偏差约为 1%，而速度增益则超过 ~10 倍。

0.00872664626 = 0.5 * pi/180，

111.319 - 是对应于赤道 1 度的距离，您可以将其替换为中值，如 [https://www.cartographyunchained.com/cgsta1/](https://www.cartographyunchained.com/cgsta1/) 或用简单的查找表替换。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-01T03:48:33.600

为了获得最大速度，您可以创建类似[彩虹表](http://en.wikipedia.org/wiki/Rainbow_table)的坐标距离。听起来您已经知道您正在使用的区域，因此似乎预先计算它们可能是可行的。然后，您可以加载最近的组合并使用它。

例如，在美国大陆，经度跨度为 55 度，纬度为 20，即 1100 个整数点。所有可能组合之间的距离是一个[握手问题](http://en.wikipedia.org/wiki/Metcalfe%27s_law)，由 (n-1)(n)/2 或大约 600k 个组合来回答。存储和检索这似乎很可行。如果您提供有关您的要求的更多信息，我可能会更具体。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-09-15T08:51:39.573

您可以`cdist`从`scipy`空间距离类中使用：

**例如**：

```
from scipy.spatial.distance import cdist 
df1_latlon = df1[['lat','lon']]
df2_latlon = df2[['lat', 'lon']]
distanceCalc = cdist(df1_latlon, df2_latlon, metric=haversine) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-07T12:10:30.257

要计算 2 个点之间的半正弦距离，您可以简单地使用[mpu.haversine_distance()](https://mpu.readthedocs.io/en/latest/mpu.html)库，如下所示：

```
>>> import mpu
>>> munich = (48.1372, 11.5756)
>>> berlin = (52.5186, 13.4083)
>>> round(mpu.haversine_distance(munich, berlin), 1)
>>> 504.2 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-08-02T07:26:23.653

请使用以下代码。

```
def distance(lat1, lng1, lat2, lng2):
    #return distance as meter if you want km distance, remove "* 1000"
    radius = 6371 * 1000 

    dLat = (lat2-lat1) * math.pi / 180
    dLng = (lng2-lng1) * math.pi / 180

    lat1 = lat1 * math.pi / 180
    lat2 = lat2 * math.pi / 180

    val = sin(dLat/2) * sin(dLat/2) + sin(dLng/2) * sin(dLng/2) * cos(lat1) * cos(lat2)    
    ang = 2 * atan2(sqrt(val), sqrt(1-val))
    return radius * ang 
````

# xaml - WinRT 中 UserControl 的 IsLoaded 属性

> ID：15736999
> 
> 赞同：1
> 
> 时间：2013-04-01T02:45:12.883
> 
> 标签：xaml, windows-8, winrt-xaml

看起来好像XAML`IsLoaded`中的对象中没有属性`UserControl`，即使`Loaded`事件存在。

但是[IsLoaded 上的 MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.isloaded%28v=vs.110%29.aspx)告诉它应该在那里，因为`UserControl`它源自`FrameworkElement`.

所以我猜它在 XAML 中被删除了（文档是针对 WPF 的）。但我不敢相信他们只是在 WinRT 中删除了它，他们一定是用别的东西代替了它？

**所以，问题**：我如何访问WinRT中的`IsLoaded`布尔值？`UserControl`

当然，总是可以通过在`Loaded`事件上注册回调来在每个用户控件上手动完成，但是对于这样一个简单的事情来说是很痛苦的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:32:49.680

Silverlight 中也没有`FrameworkElement.IsLoaded`，WinRT 更接近 Silverlight，而不是 WPF。

至于它为什么被删除，我可以根据WPF 属性的[文档](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.isloaded%28v=vs.110%29.aspx)做出有根据的猜测：

> 在新构造的 FrameworkElement 中，此属性以 false 开始，并在设置为 true 后保持为 true，即使随后通过代码从连接的逻辑树中删除了该元素。当元素加载到表示引擎中时，一般表示逻辑会设置真实状态。

基本上，WPF 中的属性有时是*错误*的。`Loaded`一个控件可以多次加载（并触发其事件），同时被卸载。WPF`IsLoaded`属性可以说即使不是真的加载了控件。那是……非常糟糕。

由于至少以下原因之一，他们可能将其删除而不是修复它：

*   他们不想破坏 WPF 与旧版本的兼容性，或者在 WPF 与 SL / WinRT 中具有不同行为的属性
*   跟踪某物是否已加载既困难又容易出错，因此本身就很危险
*   查询控件的加载状态可能是不好的做法/无论如何都是个坏主意

`Unloaded`如果你真的想自己实现它，那么至少听听`Loaded`. 但我认为，根据您要执行的操作，可能会有更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-01T06:11:09.830

“加载”控件只是可视化树中的一个控件，因此您可以使用 VisualTreeHelper 检查您的控件和应用程序的 RootVisual 之间是否存在路径，但它可能效率不高，我仍然建议处理事件。如果你真的经常需要它，你可以实现一个附加的属性/行为，它会给你一个可绑定的 IsLoaded 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-01T03:18:50.197

框架的 Windows 运行时版本中没有`IsLoaded`属性。正如您所指出的，您提供的链接不适用于 Windows 运行时。为此，请参阅此 MSDN 链接：[FrameworkElement](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.frameworkelement#properties)。

该`Loaded`事件似乎是完成您所要求的唯一方法。