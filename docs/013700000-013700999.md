# StackOverflow 问答 13700000-13700999

# java - 移动拨号器的 VOIP 协议

> ID：13700000
> 
> 赞同：0
> 
> 时间：2012-12-04T09:47:00.023
> 
> 标签：java, android, sip, voip, h.323

我想制作一个带宽高效的 voip 拨号器。似乎无法决定使用哪种协议。我看到 3 个主要候选 SIP、H.323、IAX2。谁能建议我使用什么，为什么？也可能有一些链接或书籍可以阅读更多内容:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T11:21:54.657

最灵活和最好的协议很`SIP`容易构建。

`H.323`是最复杂和最难构建的。

Android API level 15 Samples 文件夹中有一个名为`SipDroid`Project 的 Demo App，它是 android API 15 Level 附带的。您可以浏览该项目。

# php - 跟踪哪些随机 swf 加载

> ID：13700005
> 
> 赞同：0
> 
> 时间：2012-12-04T09:47:19.613
> 
> 标签：php, javascript, html

以下代码在同一 div 中一次随机加载 3 个 swf 文件。我如何在 PHP 或 javascript b'se 中跟踪特定时间加载的 swf 我想在 if($i==1) 之类的地方使用 IF 语句，其中 $i 是一个变量，当 1.swf 加载和 $ 时等于 1 i==2 加载 2.swf 时。

```
 function loadFlash(){

                function getRandomFilename()
                {
                    var names = [
                        '1.swf', 
                        '2.swf',
                        '3.swf'
                    ];
                    var r = Math.floor(Math.random() * names.length);
                    return names[r];
                }

                var flashvars = {};
                var params = {wmode:"opaque"};
                var attributes = {};
                swfobject.embedSWF(getRandomFilename(), "SWF_Output", "900", "120", "8.0.0", false, flashvars, params, attributes);

            } 
```

暴徒......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:24:47.460

像这样编辑您的代码：

```
function loadFlash(){
    function getRandomFilename() {
        var names = [
            '1.swf', 
            '2.swf',
            '3.swf'
        ];
        var r = Math.floor(Math.random() * names.length);
        return [names[r], r];
    }

    var flashvars = {};
    var params = {wmode:"opaque"};
    var attributes = {};
    var file = getRandomFilename();
    swfobject.embedSWF(file[0], "SWF_Output", "900", "120", "8.0.0", false, flashvars, params, attributes);
    //file[0] will be the file name   ('1.swf' - '3.swf')
    //file[1] will be the array index (0 - 2)
} 
```

您将无法访问函数`names[r]`之外`getRandomFilename`（[超出范围](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)）

# iphone - iOS 企业应用程序：如何推出更新？

> ID：13700006
> 
> 赞同：5
> 
> 时间：2012-12-04T09:47:19.293
> 
> 标签：iphone, ios, deployment, enterprise, updates

如果一个组织的所有成员都获得了一个 iOS（iPhone 和 iPad）应用程序二进制文件，该二进制文件是在 Apple Enterprise Deployment 方案下签署的，用于临时部署，如何管理更新？是否必须手动向用户发送更新的二进制文件/手动提示（电子邮件等）下载更新的二进制文件？或者是否有本地机制来检查远程 .ipa 是否已更新，并提示用户更新？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:50:12.957

没有本地方法，您必须通知用户更新或在应用程序中构建您自己的检查。

[HockeyKit](http://hockeykit.net/)可能可以帮助您，尽管您可以将它用于企业应用程序的临时构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T14:12:09.447

另一种可能性是使用[testflightapp.com](http://www.testflightapp.com)。我以这种方式管理内部应用程序。当您上传新版本时，所有注册用户都会收到一封电子邮件，他们可以直接从电子邮件（如果它在设备上）或使用试飞网络应用程序进行升级。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T20:51:57.357

[名为Apperian EASE](http://www.apperian.com/ease/)（企业应用服务环境）的移动应用管理解决方案就是为此设置的。可以通过两种方式更新应用程序：

(1) 在用户设备上运行本机“应用程序目录”。进行更新时，管理员可以决定他们是否希望更新是强制性的（立即的）、可选的或在特定日期/时间安装。当需要更新应用程序时，“应用程序目录”将显示推送通知徽章。

(2) 有一个 EASE SDK，应用程序可以在其中检查服务器以查看是否有更新的版本可用。如果是，则另一个调用允许应用程序“自我更新”。

在上述任何一种情况下，更新都是通过不需要 MDM 的无线 (OTA) 方法完成的。

另一种替代方法（DIY 除外）是使用 MDM 解决方案，但所有用户都必须注册 MDM 才能接收应用程序更新。

# c# - 在主窗口上创建按钮并将流保存到文件

> ID：13700010
> 
> 赞同：0
> 
> 时间：2012-12-04T09:47:47.640
> 
> 标签：c#, button, kinect-sdk, kinect.toolbox

我有一个功能有一个记录按钮

```
 protected void StartRecord(object sender, RoutedEventArgs e)
    {
        MessageBox.Show("Start Recording");
        //string generatedName = Guid.NewGuid().ToString();
        string generatedName = @"c:\Desktop\Stream.recorded";
        //recordStreamPathAndName = @"C:" + generatedName + ".recorded";
        //this.recordStream = File.Create(recordStreamPathAndName);
        this.recordStream = File.Create(generatedName);
        this.Recorder = new KinectRecorder(KinectRecordOptions.Color | KinectRecordOptions.Skeletons, recordStream);
    } 
```

此代码是否允许我创建记录按钮？如果确实如此，我如何创建它以显示在主窗口上并实际开始录制？在这里回答：这是 .xaml 代码

```
 <Button Click ="StartRecord" DataContext="{Binding}" Name="StartRecording" Width="50" Height="50" Canvas.Left="709" Canvas.Top="0" /> 
```

更新：创建按钮并创建文件。但是没有任何东西保存到文件中。

```
 void sensor_AllFramesReady(object sender, AllFramesReadyEventArgs e)
    {
          // some stuff

        using (SkeletonFrame skeletonFrame = e.OpenSkeletonFrame())
        {
          if (skeletonFrame == null)
          {
              return;
          }

           // Start recorder
            this.StartRecord(sender, e);  
         // parameter asks for (object, Routedeventargs)
         // but I have only (object, AllFramesReadyargs) declared in this function.

         // some stuff here

        }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:16:38.290

您需要在 XAML 中创建按钮并将其连接到回调。就像是：

```
<Button Click="StartRecord"> 
```

在您的代码隐藏中，您的函数声明如下所示：

```
private void StartRecord(object sender, RoutedEventArgs e)
{
    // code here
} 
```

告诉你的程序当按钮被点击时你想做什么。

# php - 更改单选按钮的错误消息

> ID：13700011
> 
> 赞同：1
> 
> 时间：2012-12-04T09:47:48.613
> 
> 标签：php, frameworks, zend-framework2, validation

如果未选中任何按钮，我想更改单选按钮组的错误消息文本。目前我正在尝试这样：

```
 $this->add(
        array(
            'name' => 'target_code',
            'validators' => array(
                array(
                    'name' => 'NotEmpty',
                    'options' => array(
                        'messages' => array(
                            \Zend\Validator\NotEmpty::IS_EMPTY => 'My Custom Error Message.'
                        )
                    )
                )
            )
        )); 
```

这行不通。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T09:57:48.763

我用过这个，它对我有用。

**选项 1：**更改错误消息

形式：

```
$this->add(array(
    'type' => 'Radio',
    'name' => 'gender',
    'options' => array(
        'label' => 'Select your gender',
        'value_options' => array(
            1 => 'Male',
            2 => 'Female',
        ),
    )
)); 
```

表单过滤器：

```
$this->inputFilter->add($factory->createInput(array(
            'name' => 'gender',
            'required' => true,
            'validators' => array(
                array(
                    'name' => 'InArray',
                    'break_chain_on_failure' => true,
                    'options' => array(
                        'haystack' => array(1, 2),
                        'messages' => array(
                            \Zend\Validator\InArray::NOT_IN_ARRAY => 'Please select your gender!'
                        ),
                    ),
                ),
                array(
                    'name' => 'NotEmpty',
                    'break_chain_on_failure' => true,
                    'options' => array(
                        'messages' => array(
                            \Zend\Validator\NotEmpty::IS_EMPTY => 'Please select your gender!',
                        ),
                    ),
                ),
            ),
))); 
```

查看错误：

```
foreach ($form->get('gender')->getMessages() as $message) {
    echo $message;
    break;
} 
```

问题：

```
'break_chain_on_failure' => true 
```

“break_chain_on_failure”对我不起作用，所以我显示了第一条错误消息:)

**选项 2**：将一项设置为始终选中

```
$this->add(array(
    'type' => 'Radio',
    'name' => 'gender',
    'options' => array(
        'label' => 'Select your gender',
        'value_options' => array(
            1 => 'Male',
            2 => 'Female',
        ),
    ),
    'attributes' => array(
        'value' => '1' //set checked to '1'
    )
)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:22:17.893

这个[链接](http://zend-framework-community.634137.n4.nabble.com/zf2-custom-messages-in-input-filter-td4655498.html)可能有用。我不明白原因，但它说：“您必须将 required 设置为 false 并将 allow_empty 设置为 true 才能在 NotEmpty 验证器上设置自定义消息。”

# scala - 如何在Scala中获取与类参数同名的字段？

> ID：13700012
> 
> 赞同：2
> 
> 时间：2012-12-04T09:47:47.420
> 
> 标签：scala, case-class

采取一个简单的类，如下所示：

```
class Person(name: String, age: Int) {} 
```

现在，当我实例化这个类时，我通常希望它的用户能够使用`name`和`age`. 喜欢：

```
val ronald = new Person("Ronald", 22)
val ronaldsName = ronald.name  // <- 
```

这当然行不通，除非我定义一个**getter** called`name`或创建`Person`一个**case class**。后者是一个简单的解决方案，但我觉得我在滥用案例类？

前者还是有点不方便，因为我不能简单地：

```
class Person(name: String, age: Int) {
  def name = name
} 
```

因此，我必须将`name`类构造函数中的第一个重命名为其他名称，例如`personName`or`_name`或`n`。但这在我看来有点令人困惑，而且远没有那么优雅。它是相同的概念/变量/值，所以它应该具有完全相同的名称，对吧？

那么......这里最好或正确的做法是什么？只是添加它是*如此*`case`诱人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T09:48:44.703

您只需添加`val`即可将参数转换为类的公共字段：

```
class Person(val name: String, val age: Int)
             ^^^               ^^^ 
```

正如您所注意到的，案例类默认执行此操作。

# vba - 如何定义组合框的变量而不将它们记录到 Excel 工作表中？

> ID：13700016
> 
> 赞同：1
> 
> 时间：2012-12-04T09:48:02.327
> 
> 标签：vba, excel, combobox, userform

我有这个报告格式化工具开发任务，我想添加我的用户表单一些组合框。当我在互联网上搜索如何使用它们时，我总是看到它们，它们从 Excel 表中获取它们的值。我的文件已经包含 2 张纸，我不希望它有更多。是否可以在代码中存储组合框的值？

[http://www.contextures.com/Excel-VBA-ComboBox-Lists.html](http://www.contextures.com/Excel-VBA-ComboBox-Lists.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:57:45.983

是的，这是可能的——如果我的评论的答案是肯定的:)

根据您的需要尝试以下代码。假设您有一个 VBA 代码，并且您有一个`combobox1`

```
With ComboBox1
   .AddItem "I am"
   .AddItem "Adding"
   .AddItem "Static"
   .AddItem "Values"
   .AddItem "From"
   .AddItem "VBA"
End With 
```

如果您需要进一步的信息，请告诉我们。**希望你能用你迄今为止尝试过的任何东西来更新你的问题。**

# php - 在固定的时间间隔后重新加载 div 的内容

> ID：13700017
> 
> 赞同：1
> 
> 时间：2012-12-04T09:48:02.960
> 
> 标签：php, javascript, jquery, internet-explorer-9

我想在固定时间间隔后重新加载 div (Recent_updates) 的内容。我使用了以下 javascript 代码

```
var refreshId = setInterval(function()
    {
        $('#Recent_updates').fadeOut("slow").load('Recent_updates.php').fadeIn("slow");
    }, 60000); 
```

最近的_updates.php

```
<?php
include("include/connect.php");
include("library/paginator.php");
?>
<div style="text-align:right;">
    <?
    $query = "select * from settings";
    $tab = mysql_query($query);
    $row = mysql_fetch_array($tab);
    $item_no = $row['items_to_show'];
    $scroll = $row['scroll_interval'];

    $online_paginate = new Paginator;
    $online_paginate->sql = "select * from recent_updates where status='Active' and picture1!='' and selling_method!='want_it_now' and selling_method!='ads' and bid_starting_date <= now() and expire_date>=now() order by item_id desc"; // sql statement
    $online_paginate->rows_on_page = $item_no;
    $results = $online_paginate->get_page_result(); // result set
    $num_rows = $online_paginate->get_page_num_rows(); // number of records in result set
    $nav_links = $online_paginate->navigation("&nbsp; | &nbsp;"); // the navigation links (define a CSS class
    ?>
</div>

<table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr bgcolor="#d79196" class="detail9txt">
    <input type="hidden" value="2" name="len">
    <td align="center" width="20%"><b>Picture</b> </td>
    <td width="30%" align="center"><b>Name / Responses</b> </td>
    <td width="50%" align="center"><b>Description</b> </td>
</tr><tr style="height:10px;"><td></td></tr>
<?
if ($num_rows > 0) {
    while ($bestsellers_fetch = mysql_fetch_array($results)) {
        $temp = $bestsellers_fetch['item_id'];
        $sql = "SELECT count(`user_id`) as response FROM `watch_list` where `item_id`=$temp group by `item_id`";
        $res = mysql_query($sql);

        $response = mysql_fetch_row($res);

        $counttop = $counttop + 1;
        if (!empty($bestsellers_fetch['sub_title']))
            $item_subtitle1 = $bestsellers_fetch['sub_title'];
        else
            $item_subtitle1 = substr($bestsellers_fetch['item_title'], 0, 20);
        $item_title1 = substr($bestsellers_fetch['item_title'], 0, 40)
        ?>
        <tr>
            <td class="tr_botborder" style="vertical-align:middle;" width="20%" align="center"><div align="center"><a href="detail.php?item_id=<?= $bestsellers_fetch['item_id']; ?>" class="bestsellerstxt"><img src="thumbnail/<?= $bestsellers_fetch['picture1']; ?>" alt="" width="79" height="70" border="0" /></a></div></td>
            <td class="tr_botborder" style="vertical-align:middle;" width="30%" align="center"><div align="center"><span class="bestsellerstxt"><a href="detail.php?item_id=<?= $bestsellers_fetch['item_id']; ?>" class="bestsellerstxt"><?= $item_subtitle1; ?> <?= $item_title1; ?></a><br/><?php if ($response[0] != '') { ?><a style="text-decoration:none;color:#336666;" href="detail.php?item_id=<?= $bestsellers_fetch['item_id']; ?>"> <?php echo $response[0] . '&nbsp;responses'; ?></a> <?php } else { ?><span style="color:#666666;"><?php
            echo '0&nbsp;responses';
        }
        ?></span></span></td>
            <td class="tr_botborder" style="vertical-align:middle;" width="50%" align="center"><div align="center"><span class="bestsellerstxt"><a href="#" class="bestsellerstxt"><?= html_entity_decode($bestsellers_fetch['detailed_descrip']); ?></a></span></td>
        </tr>

        <?
        if ($counttop != 2) {

        }
    }
} else {
    ?>
    <tr><td height="148" align="center" class="featxt">No Items Available</td></tr>
    <?
}
?>
</table>
<div style="text-align: right;"><?php echo $nav_links; ?></div> 
```

此代码在除 IE 之外的所有浏览器中都能正常工作。当我在我的 ie9 上进入页面并且在几（5-8）分钟后没有做任何事情时，页面就变成了空白。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:53:19.287

我经历过这个...实际上加载失败是因为 IE 严格验证返回的 HTML。所以请确保`Recent_updates.php`返回有效的 html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:54:10.820

我不确定 IE9，但我在旧版本的 IE 中遇到过此类问题。该浏览器有打开与服务器的持久连接的坏习惯，并且大多数服务器（如果不是全部）对每个用户的打开连接数量都有限制。知道您有 1 分钟的时间间隔并且持续连接在 5 分钟后超时，只需数一下，您就会明白为什么......

# asp.net - 将 OData substringof 与链接模型属性一起使用

> ID：13700018
> 
> 赞同：0
> 
> 时间：2012-12-04T09:48:14.703
> 
> 标签：asp.net, asp.net-web-api, odata

像这样使用 odata substringof 方法：

```
filter=substringof('" + $("#txtSearch").val() + "',Postcode) eq true 
```

没关系，但是如果我想搜索这样的链接属性：

```
filter=substringof('" + $("#txtSearch").val() + "',Client.Name) eq true 
```

它返回结果，但未应用过滤器。我基本上有一个作业和客户模型，我想通过 WebApi 按客户名称搜索作业。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:39:14.330

您只能过滤展开的属性。在你的情况下，你应该这样做：

```
$filter=substringof('" + $("#txtSearch").val() + "', Client/Name)&$expand=Client 
```

祝你好运！

# c - c中静态数组的广义函数

> ID：13700021
> 
> 赞同：1
> 
> 时间：2012-12-04T09:48:31.877
> 
> 标签：c

我有一些不同大小的结构的静态数组，我希望创建一个填充这些数组的通用函数，我希望将特定数组填充为该函数的参数。最好的方法是什么？（除了避免使用静态数组，遗憾的是他们无能为力）。

（相关位）代码：

```
typedef struct{
    char ip[IP_LEN+1];
    char netmask[IP_LEN+1];
} ipAndNetmaskStruct; 
typedef struct{
    char port[PORT_LEN+1];
} portStruct;

static ipAndNetmaskStruct source[1024];
static ipAndNetmaskStruct dest[1024];
static portStruct source_port[1024];
static portStruct dest_port[1024];

//just an example of wha
void doSomthingWithStruct(the array and a specific field in each stcut in it){
    for(int i=0;i<5;i++){
        THEARRAY[i].SPECIFICFIELD="Somthing";
        // as in source[i].ip="somthing";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:13:27.047

你的意思是这样的吗？

```
void doSomethingWithStruct(void* structptr,int ssize,int cnt, int offset,void* val,int vsize)
{
   int i;
   for(i=0;i<cnt;i++)
   {
      //perhaps add bool as a function parameter to check if mem should be allocated ?
      memcpy( ((uint8_t*)structptr)+i*ssize+offset, val,vsize);
   }
}

//usage
typedef struct{
    char ip[IP_LEN+1];
    char netmask[IP_LEN+1];
} ipAndNetmaskStruct; 
static ipAndNetmaskStruct source[1024];
char data[IP_LEN+1];

doSomethingWithStruct(source,sizeof(ipAndNetmaskStruct),1024,/*if it was netmask it would have been sizeof(char)*(IP_LEN+1)*/0,data,IP_LEN+1); 
```

编辑：您可以使用`offsetof`获取成员的偏移量 - 在“stddef.h”中定义，并且本着您也可以使用的精神`#define sizeof_member(s,m) sizeof(((s *)0)->m)`

例子：

```
#define doSomethingWithStruct(srcptr,type,member,val) doSomethingWithStruct(srcptr,sizeof(type),sizeof(srcptr)/sizeof(type),offsetof(type,member),val,sizeof_member(type,member)) 
```

# magento - 在magento中按多选属性过滤的产品集合

> ID：13700023
> 
> 赞同：1
> 
> 时间：2012-12-04T09:48:33.523
> 
> 标签：magento

嗨，我想根据多选属性获取所有产品集合。我写了以下查询，但它给了我所有没有被过滤的产品。

```
 $collection = Mage::getModel('catalog/product')
                    ->getCollection()
                    ->addAttributeToSelect('*')
                    ->addAttributeToFilter('author_name', 45)
 foreach($collection as $product){
        echo $product->getName().'<br />';
    } 
```

谁能给我查询如何获取按多选属性值过滤的集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-25T02:45:18.713

那这个呢？

```
$collection = Mage::getModel('catalog/product')
      ->getCollection()
      ->addAttributeToSelect('*')
      ->addAttributeToFilter('author_name',array('in' => array('45', '46','47'))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:07:23.043

try `addAttributeToFilter('author_name', array('eq' => 45))`

# ruby - `#{*.inspect}` 是什么意思？

> ID：13700025
> 
> 赞同：-1
> 
> 时间：2012-12-04T09:48:44.770
> 
> 标签：ruby

我有一个关于`puts #{parse_options.inspect}`. `parse_options`是一个定义为的函数：

```
def parse_options
  options = {}
  case ARGV[1]
  when "-e"
    options[:e] = ARGV[2]
  when "-d"
    options[:d] = ARGV[2]
  end
  options
end 
```

它的输出是`options`hashmap 的值。我想知道的`inspect`是应该如何工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:54:04.097

`"#{ expression }"`是一个[表达式替换](http://web.njit.edu/all_topics/Prog_Lang_Docs/html/ruby/syntax.html#exprsub)：将计算表达式的结果放在字符串中。`parse_options`是一个方法调用，它返回`options` [哈希值](http://www.ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#hash)（返回值在 Ruby 中是隐式的）。`{}`构造一个空哈希。[`inspect`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-inspect)是一个方法`hash`，它转储哈希。

所以它的内容如下：将调用`inspect`返回的哈希的评估放在字符串中`parse_options`（嗯，它应该是*发送* `inspect`到哈希的结果，详细信息......）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:53:35.203

Inspect 将哈希作为字符串返回，请参阅文档：[http ://ruby-doc.org/core-1.9.3/Hash.html#method-i-inspect](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-inspect)

# c# - CreateChildControls 调用了两次

> ID：13700027
> 
> 赞同：1
> 
> 时间：2012-12-04T09:48:46.777
> 
> 标签：c#, asp.net, composite-controls

我有一个复合服务器控件，我在其中实现了 CreateChildControls。此控件是一个网格，其中还包括分页和排序控件。

单击排序链接时，首先调用 CreateChildControls，然后调用事件处理程序，然后我再次从事件处理程序调用 CreateChildControls，以便使用新的排序顺序重建控件。

当回发由控件事件处理程序触发时，是否有任何方法可以跳过 CreateChildControls？

这甚至可能吗，还是我必须在事件处理程序之前通过 CreateChildControls，以便 asp.net 可以将事件连接到现有控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-28T12:00:33.167

我写这个问题的时候并不知道，但这实际上是自定义控件自然生命周期的一部分。

`CreateChildControls()`每次`EnsureChildControls()`被调用。诀窍是`ChildControlsCreated`在第一次调用结束时设置属性`CreateChildControls()`，因此整个过程不会发生多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T12:36:23.730

我有类似的情况，但我有两件事要做：我正在加载控件，然后我根据用户之前的选择显示信息。当用户更改下拉列表或单击按钮时，将重新加载页面并将他们的选择添加到查询字符串中。所以，我的解决方案是这样的：

```
protected override void CreateChildControls()
{
    base.CreateChildControls();
    AddControls();
    if (Page.IsPostBack)
        return;
    ShowProcedure() // The time-intensive code that I don't want to call twice.
} 
```

AddControls 填充控件，并启用回发选项。ShowProcedure 使用查询字符串中的值来显示大量数据。这样，我不会在 CURRENT 值上调用 ShowProcedure。

# c# - 在循环结束时调整正在读取的文件的名称而不中断循环

> ID：13700028
> 
> 赞同：0
> 
> 时间：2012-12-04T09:48:46.663
> 
> 标签：c#, date, increment

每天结束时会生成 2 份报告。我希望能够在每个月底对它们进行分析。

每个文件里面都有一千行左右的长 ASCII 字符串。这已成功编码，但一次只能提取和执行一个文件的分析。

我将尝试在下面放入代码的相关结构。我希望这足以让您了解需要做什么。如果没有，我很乐意发布整个内容。

```
using (StreamReader reader = new StreamReader("YYYYMMDD----1234D.dat"))
{
while loop //this goes through all the lines in the file. 
{if //if meets certain criteria then store into a list, otherwise ignore

}
foreach // this part does the analysis of all the values in the list, totals, etc 
```

.

第一个报告是上述格式，另一个有不同的数字代替 1234D（为了参数，5678D，所以：yyyymmdd----5678D）。这两个数字始终保持不变。

我希望能够将每个文件中的所有数据都存储到我的列表中，然后对整个月进行分析，而不是每天进行细分，所以当它到达文件末尾，将名称增加一天，循环遍历该名称等（或查找所有带有 X 月的文件 - 以更好者为准）。这将填充列表，然后 foreach 将执行其分析和输出。预计我会将所有需要的文件放入与程序当前使用的文件夹相同的文件夹中。

当前代码：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Linq;

class Program 
{
    public class EntryLine
    {
        public int I { get; set; }
        public string LineStart { get; set; }
        public string Letters { get; set; }
        public int TVolume { get; set; }
        public long TPrice { get; set; }
        public double MVolume { get; set; }
        public string Currency { get; set; }
        public string DateTime {get; set; }

    }

    static void Main(string[] args)
    {
        List<EntryLine> myList = new List<EntryLine>();
        int i = 1;
        using (StreamReader reader = new StreamReader("20121203----1234D.dat"))
        {
            string line;
            var locations = new Dictionary<string, int[]>() {
            {"210", new [] {405, 4, 128, 12, 141, 12, 247, 15, 121, 3}}, 
            {"310", new [] {321, 4, 112, 12, 125, 12, 230, 15, 105, 3}}, 
            {"410", new [] {477, 4, 112, 12, 125, 12, 360, 15, 105, 3}} 
        };

            while ((line = reader.ReadLine()) != null)
            {
                var lineStart = line.Substring(0, 3);

                if (lineStart == "210" || lineStart == "310" || lineStart == "410")
                {
                    var currentLocations = locations[lineStart];
                    var letters = line.Substring(currentLocations[0], currentLocations[1]);

                    var tvolume =
                        int.Parse(line.Substring(currentLocations[2], currentLocations[3])) +
                        int.Parse(line.Substring(currentLocations[4], currentLocations[5]));

                    var tprice = long.Parse(line.Substring(currentLocations[6], currentLocations[7]));
                    var mvolume = tprice * tvolume * 0.01 * 0.0000001;
                    var currency = line.Substring(currentLocations[8], currentLocations[9]);

                    myList.Add(new EntryLine()
                    {
                        I = i,
                        LineStart = lineStart,
                        Letters = letters,
                        TVolume = tvolume,
                        TPrice = tprice,
                        MVolume = mvolume,
                        Currency = currency
                    });
                    i = i + 1;
                }
            }

            var x = myList.GroupBy(g => new { g.Letters, g.Currency })
                .Select(a => new { a.Key.Letters, a.Key.Currency, TSum = a.Sum(s => s.TVolume), MSum = a.Sum(s => s.MVolume) });

            foreach (var item in x)
            {
                Console.WriteLine("{0} currency: {1} tvolume: {2} mVolume: {3}", item.Letters, item.Currency, item.TSum, item.MSum);
            }
        } Console.ReadLine();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:34:05.027

有很多方法可以做到这一点。这是一个选择：首先，将过程分解为几个函数，以便于代码维护。然后使用一个函数遍历所有文件并构建信息列表，然后使用另一个函数分析该信息。

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;

namespace ReportAnalysis {
static class Program {
    static void Main() {
        //lets run the analysis for Nov, 2012

        //First, read in all report files, and store relevant lines
        var reportInfo = ReportAnalyzer.ReadFiles(2012, 11);

        //Now analyze all files at once
        ReportAnalyzer.RunAnalysis(reportInfo);
    }
}
class ReportAnalyzer {
    struct ReportFile {
        public string Path;
        public DateTime Date;
        public List<string> Lines;
    }

    public static IList<ReportFile> ReadFiles(int year, int month) {
        //Put names of files here.
        string[] fileNames = new string[] { "{0:YYYYMMDD}----1234D.dat", "{0:YYYYMMDD}----5678D.dat" };

        DateTime dateStart = new DateTime(year, month, 1); //start of month
        DateTime dateEnd = dateStart.AddMonths(1); //start of NEXT month (i.e. 1 day past end of this month)

        var reportList = new List<ReportFile>();

        DateTime date = dateStart;
        while (date < dateEnd) {  //we don't actually get to dateEnd, just the day before it.
            foreach (var fileTemplate in fileNames) {
                //insert the date in YYYYMMDD format
                var file = string.Format(fileTemplate, date);
                if (File.Exists(file)) {
                    var report = new ReportFile() {
                        Date = date,
                        Path = file,
                        Lines = GetReportLines(file)
                    };
                    reportList.Add(report);
                }
            }
            //now jump to next day
            date = date.AddDays(1);
        }
        return reportList;
    }

    private static List<string> GetReportLines(string file) {
        var lines = new List<string>();
        try {
            using (StreamReader reader = new StreamReader(file)) {
                while (!reader.EndOfStream) {
                    var line = reader.ReadLine();
                    if (true /* insert criteria */)
                        lines.Add(line);
                }
            }
        } catch (Exception ex) {
            //log the error however you see fit
            lines.Add(string.Format("ERROR Could not open report file {0}: {1}", file, ex.Message));
        }
        return lines;
    }

    public static void RunAnalysis(IList<ReportFile> reports) {
        foreach (var r in reports) {
            //Do whatever analysis you need
            Console.WriteLine(r.Date);
            Console.WriteLine(r.Path);
            foreach (var line in r.Lines)
                Console.WriteLine(line);
        }
    }
}
} 
```

这是一个“short-n-sweet”版本，只涉及*重要*部分：

```
void ProcessReports {
    string[] fileNames = new string[] { "{0:YYYYMMDD}----1234D.dat", "{0:YYYYMMDD}----5678D.dat" };
    DateTime dateStart = new DateTime(year, month, 1); //start of month
    DateTime dateEnd = dateStart.AddMonths(1); //start of NEXT month (i.e. 1 day past end of this month)
    List<string> lines = new List<string>();
    DateTime date = dateStart;
    while (date < dateEnd) {  //we don't actually get to dateEnd, just the day before it.
        foreach (var fileTemplate in fileNames) {
            //insert the date in YYYYMMDD format
            var file = string.Format(fileTemplate, date);
            if (File.Exists(file)) {
                using (StreamReader reader = new StreamReader(file)) {
                    while (!reader.EndOfStream) {
                        var line = reader.ReadLine();
                        if (true /* insert criteria */)
                            lines.Add(line);
                    }
                }
            }
        }
        //now jump to next day
        date = date.AddDays(1);
    }   
    //Now we have all the lines. Let's process them;
    foreach (var line in lines) {
        //do something with the report lines
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:20:40.970

您需要动态创建文件名，而不是对其进行硬编码。然后您可以遍历所有文件以生成值列表，然后处理它们。

为什么不把它分成几个方法呢？就像是：

```
public void Process()
{
    // logic to get string[] of filenames here. You could loop through each
    // day you need a list for and generate a filename for the given day
    var values = new List<T>();
    foreach (var filename in filenames)
    {
        var valuesFromFile = GetValuesFrom(filename);
        values.AddRange(valuesFromFile);
    }
    ProcessValues(values);
}

private List<T> GetValuesFrom(string filename)
{
    var values = new List<T>();
    while loop //this goes through all the lines in the file. 
    {if //if meets certain criteria then store into a list, otherwise ignore
    }
    return values;
}

private void ProcessValues(List<T> values)
{
    foreach // this part does the analysis of all the values in the list, totals, etc
} 
```

T 当然是你的值的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:57:28.810

如果您只是将您的块`foreach`移出您的`using`块，那么没有什么可以阻止您`using`使用第二个文件名复制块，或者将`using`块放入您将文件名传递到的自己的循环中：

```
string[] filenames = new string[] {
    "20121203 ----1234D.dat",
    "20121204 ----1234D.dat",
    "20121205 ----1234D.dat" };
List<Whatever> yourListOfMatchingItems = new List<Whatever>();

foreach (string filename in filenames)
{
    using (StreamReader reader = new StreamReader(filename))
    {
        while (/* whatever you had before */)
        {
            if (/* whatever you had before */)
            {
            }
        }
    }
}
foreach (/* item in your list */)
{
} 
```

# tsql - 从 SQL Server 中的子查询获取多个列值返回 null

> ID：13700029
> 
> 赞同：0
> 
> 时间：2012-12-04T09:48:47.910
> 
> 标签：tsql, join, subquery

我有以下查询：

```
SELECT p.IdS, 
       p.PID, 
       a.Destination, 
       d.DelDate, 
       d.DelTimeE, 
       d.DelTimeL,
       td.EDateTime, 
       td.ECode, 
       td.[Source]
FROM Parcel p
LEFT JOIN Party a ON p.IdS = a.IdS
LEFT JOIN DateAndTime d ON p.IdS = d.IdS
LEFT OUTER JOIN 
(SELECT TOP(1) PID, 
               EDateTime, 
               ECode, 
               [Source] 
               FROM TgData 
               WHERE ECode='I' ORDER BY ID ASC) AS td
ON p.PID = td.PID
LEFT JOIN Ships s ON p.IdS = s.ShipId
WHERE s.IsFinalized='1' AND s.DComplete='2012-11-30' AND DelDate IS NOT NULL
ORDER BY Destination ASC 
```

但是对于某些人来说，出于我未知的原因，即使我知道应该在那里显示一些值，数据库响应中的 td 列总是“NULL”。查询在 < 1 秒内执行

我还尝试了另一种方式来做到这一点：

```
 SELECT p.IdS, 
           p.PID, 
           a.Destination, 
           d.DelDate, 
           d.DelTimeE, 
           d.DelTimeL,
       (SELECT TOP(1) EDateTime FROM TgData WHERE ECode='I' AND PID=p.PID ORDER BY ID ASC) AS EDateTime
       (SELECT TOP(1) ECode FROM TgData WHERE ECode='I' AND PID=p.PID ORDER BY ID ASC) AS ECode
       (SELECT TOP(1) [Source] FROM TgData WHERE ECode='I' AND PID=p.PID ORDER BY ID ASC) AS [Source]
FROM Parcel p
LEFT JOIN Party a ON p.IdS = a.IdS
LEFT JOIN DateAndTime d ON p.IdS = d.IdS
LEFT JOIN Ships s ON p.IdS = s.ShipId
WHERE s.IsFinalized='1' AND s.DComplete='2012-11-30' AND DelDate IS NOT NULL
ORDER BY Destination ASC 
```

这将获得正确的数据，但查询需要 20 秒才能显示 470 行。:P

任何提示或提示都会很可爱，在过去的 24 小时里，我一直在思考这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:59:34.867

试试这个查询

```
SELECT 
    p.IdS, 
    p.PID, 
    a.Destination, 
    d.DelDate, 
    d.DelTimeE, 
    d.DelTimeL,
    EDT.EDateTime AS EDateTime,
    EC.ECode AS ECode,
    TDL.Source as Source
FROM Parcel p
LEFT JOIN Party a ON p.IdS = a.IdS
LEFT JOIN DateAndTime d ON p.IdS = d.IdS
LEFT JOIN Ships s ON p.IdS = s.ShipId
LEFT JOIN (SELECT PID , TOP(1) EDateTime FROM TgData WHERE ECode='I') as EDT ON EDT.PID = p.PID
LEFT JOIN (SELECT PID , TOP(1) ECode FROM TgData WHERE ECode='I') AS EC ON EC.PID=p.PID
LEFT JOIN (SELECT PID , TOP(1) Source FROM TgData WHERE ECode='I') AS TDL ON TDL.PID=p.PID
WHERE s.IsFinalized='1' 
    AND s.DComplete='2012-11-30' 
    AND DelDate IS NOT NULL
ORDER BY Destination ASC 
```

# django - 使用 Django 1.5 实现多种用户类型

> ID：13700030
> 
> 赞同：37
> 
> 时间：2012-12-04T09:48:49.647
> 
> 标签：django, django-models, django-1.5

[使用 Django 1.5 新的可配置用户模型](https://docs.djangoproject.com/en/dev/releases/1.5-beta-1/#configurable-user-model)功能实现多种用户类型的推荐方法是什么？

我想要两种用户类型：私人用户和交易用户，每个用户都有自己的一组必填字段。

我可以考虑两种方法来实现这一点：

## 1）多表继承

```
class BaseUser(AbstractBaseUser):
  email = models.EmailField(max_length=254, unique=True)
  # ...

class PrivateUser(BaseUser):
  first_name = models.CharField(max_length=30)
  last_name = models.CharField(max_length=30)
  # ...

class TradeUser(BaseUser):
  company_name = models.CharField(max_length=100)
  # ... 
```

将多表继承与可配置用户模型结合使用有什么问题吗？

## 2）使用具有“类型”属性的单个模型

```
class User(AbstractBaseUser):
  email = models.EmailField(max_length=254, unique=True)
  user_type = models.CharField(max_length=30, choices={
    'P': 'Private',
    'T': 'Trade',
  })
  first_name = models.CharField(max_length=30, blank=True)
  last_name = models.CharField(max_length=30, blank=True)
  company_name = models.CharField(max_length=100, blank=True)
  # ... 
```

这种方法需要一些依赖于`user_type`.

这些方法中的哪一种最适合我的用例？或者也许有更好的方法来实现这一目标？

另外，在第 1 种情况下，我如何过滤我的用户？

谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-06T21:48:43.103

警告：Django 1.5 非常新，人们仍在研究它的新功能。所以我的回答无非是我的意见，基于最近的研究来回答这个问题。

这两种方式都是实现结果的有效方式，各有优缺点。

让我们从：

**第二种选择**

*   没有嵌套模型，也没有模块化。`AbstractBaseUser`，顾名思义，是一个抽象模型，没有具体的表
*   有未使用的字段
*   您需要使用使用额外字段的模型检查 user_type 是否有任何迭代：

    ```
    def foo():
        if user.user_type == 'Private':
            # ...
        else:
            # ... 
    ```

生成的 SQL 大致如下：

```
CREATE TABLE "myapp_user" (
    "id" integer NOT NULL PRIMARY KEY,
    "password" varchar(128) NOT NULL,
    "last_login" datetime NOT NULL,
    "email" varchar(254) NOT NULL UNIQUE,
    "user_type" varchar(30) NOT NULL,
    "first_name" varchar(30) NOT NULL,
    "last_name" varchar(30) NOT NULL,
    "company_name" varchar(100) NOT NULL
); 
```

**第一个选项**

*   具有实体逻辑分离的嵌套模型
*   很瘦
*   **如果要使用**-like 函数，则必须`BaseUserManager`为每个孩子实现 **`create_user`**
***   您不能使用简单的`BaseUser.objects.all()`*访问子类**

 **生成的 SQL 大致如下：

```
CREATE TABLE "myapp_baseuser" (
    "id" integer NOT NULL PRIMARY KEY,
    "password" varchar(128) NOT NULL,
    "last_login" datetime NOT NULL,
    "email" varchar(254) NOT NULL UNIQUE
);

CREATE TABLE "myapp_privateuser" (
    "baseuser_ptr_id" integer NOT NULL PRIMARY KEY REFERENCES "myapp_baseuser" ("id"),
    "first_name" varchar(30) NOT NULL,
    "last_name" varchar(30) NOT NULL
);

CREATE TABLE "myapp_tradeuser" (
    "baseuser_ptr_id" integer NOT NULL PRIMARY KEY REFERENCES "myapp_baseuser" ("id"),
    "company_name" varchar(100) NOT NULL
); 
```

* 想象以下情况：

```
>>> BaseUser.objects.create_user('baseuser@users.com', password='baseuser')
>>> PrivateUser.objects.create_user('privateuser@users.com', password='privateuser', first_name='His', last_name='Name')
>>> TradeUser.objects.create_user('tradeuser@users.com', password='tradeuser', company_name='Tech Inc.')
>>> BaseUser.objects.all()
[<BaseUser: baseuser@users.com>, <BaseUser: privateuser@users.com>, <BaseUser: tradeuser@users.com>]
>>> PrivateUser.objects.all()
[<PrivateUser: privateuser@users.com>]
>>> TradeUser.objects.all()
[<TradeUser: tradeuser@users.com>] 
```

因此，您不能直接使用`BaseUser.objects.all()`. Jeff有一篇[出色的博客文章](http://jeffelmore.org/2010/11/11/automatic-downcasting-of-inherited-models-in-django/)，更好地解释了如何实现“自动向下转换” `BaseUser`。

也就是说，您应该考虑每种方法的优缺点及其对项目的影响。当涉及的逻辑很小（如示例中所述）时，两种方法都有效。但在更复杂的情况下，一种方法可能比另一种更好。我会选择多模型选项，因为它更具可扩展性。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T13:11:24.683

也许你应该考虑 AbstractUser？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-06T20:59:43.327

您只能将一个模型分配给 AUTH_USER_MODEL 的新自定义用户模型。使用多表继承，您有两个模型。所以这是一个问题。

在涵盖两种用户类型的单个用户模型的情况下，您可以抽象模型方法中的条件逻辑。您还可以根据不同的用户类型为不同的用户类型使用不同的管理器。这也可以帮助您在使用特定用户类型时变得明确。

其他选项可能是仅将最常见的属性存储在单个用户模型中，然后将两种用户类型的细节附加到它们自己的表中，这些表链接到您的主用户表。

如果两个用户有大部分共同点（至少在数据方面），我会把它们放在一个地方。最后，我会考虑什么更简单，更容易维护。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T13:32:57.133

我会使用具有“类型”属性的单个模型。原因如下：

*   只有一张桌子，只有一种型号
*   如果要从一种类型转换为另一种类型，只需更改属性
*   为一种类型存在而其他类型不存在的字段实现 getter 和 setter = 使用起来更简单。**

# java - 我们可以根据两个逗号和双引号来拆分 CSV 文件的行吗？

> ID：13700034
> 
> 赞同：0
> 
> 时间：2012-12-04T09:49:07.910
> 
> 标签：java, oracle, jsp, oracle10g

我有 CSV 文件，其中包含用逗号分隔的 6 列：

```
VendorCode, VendorName, Material, MaterialDescription, Reason, Quantity 
```

我能够从除“原因”列之外的每一列中检索数据，因为它包含该列中的值：

```
Pitted, Rusty 
```

（我的意思是该列中有逗号分隔值）

（因此 Pitted 值被插入到“Reason”arraylist 中，Rusty 被插入到“Quantity”arraylist 中对于该特定行）

**例如**：

一行 csv 文件包含：

```
AA90,ABC LTD.,2.71E+11,ASSY/LAM`E'CE-MSSL-RINDER,"VisualCrack,BH,Damage,Burr",330

```

**DESIRED OUTPUT :** **"pitty,rusted" 应被视为单个字符串并存储在数据库中**

我试过这个

```
while ((thisLine = myInput2.readLine()) != null)  {

    String[] str = thisLine.split(",");
    for(int j=0; j<str.length; j++) {
        switch(j) {
            case 0: DR_VendorCode.add(str[j]);//getContents()); break;
            case 1:DR_VendorName.add(str[j]);//getContents()); break;
            ....
        }

        i1++;
    }
}

for(int k=0;k<DR_VendorCode.size()+1;k++) {

    String DR_VCODE=DR_VendorCode.get(k).toString();
    String DR_VNAME=DR_VendorName.get(k).toString();
    ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:08:30.847

我建议您搜索包含的模式

```
"  ,   " // (make sure multiple commas could also occur) 
```

即双引号，1个或多个逗号，双引号。

1.  并将其中的逗号替换为一个符号左右。
2.  然后随意替换所有逗号；
3.  将您的符号替换回逗号。

这是部分伪代码！我不知道如何替换模式，但你会发现。

```
String inlineCommasReplaced = thisLine.replace( \"\,\", \"\|\"); // replace pattern "," with "|"
String outterCommasReplaced = inlineCommasReplaced.replace(",", ",,"); // Replace the comma seperated with double commas for instance
String replaceBackInlineCommas = outterCommasReplaces.replace( \"|,\", \"\,\"); // replace back the "|" to ","
String[] str = replaceBackInlineCommas.split(",,"); // split on ,, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:47:51.370

Here you go ...

```
String regex = "\"[^\"]+\"|[^,]+";
Pattern p = Pattern.compile(regex);
Matcher m = p.matcher(thisLine);
while(m.find()) {
    System.out.println(thisLine.substring(m.start(),m.end()));
    // I suppose you could construct an array here rather than just printing it
} 
```

Output ...

```
AA90
ABC LTD.
2.71E+11
ASSY/LAM`E'CE-MSSL-RINDER
"VisualCrack,B.H,Damage,Burr"
330 
```

To handle 5th (actually any but only one) column with multiple embedded quotes ...

```
String regex = "\".*\"|[^,]+"; 
```

Output ...

```
AA90
ABC LTD.
2.71E+11
ASSY/LAM`E'CE-MSSL-RINDER
"VisualCrack,B.H,"Damage",Burr"
330 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:11:00.803

终于在@xagyg 的帮助下解决了问题

最终代码是：

```
import java.io.BufferedReader;
import java.io.DataInputStream;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;
import java.util.StringTokenizer;
import java.util.regex.Matcher;
//import org.apache.commons.collections.*;
//import org.apache.commons.collections.MultiMap;
//import org.apache.commons.collections.MultiHashMap;
import java.util.regex.Pattern;

public class readFileandPopulate{

  public static void main(String[] args) 
  {
      ArrayList<String> total=new ArrayList<String>();

     ArrayList<String> vcode=new ArrayList<String>();
      ArrayList<String> vname=new ArrayList<String>();
      ArrayList<String> material=new ArrayList<String>();
      ArrayList<String> mat_desc=new ArrayList<String>();
      ArrayList<String> reason=new ArrayList<String>();
      ArrayList<String> quantity=new ArrayList<String>();

      try
      {
          FileInputStream fstream1 = new FileInputStream("C:\\filesuploaded\\DEVELOPMENT_REJECTION.csv");
          DataInputStream in1 = new DataInputStream(fstream1);
          BufferedReader br1 = new BufferedReader(new InputStreamReader(in1));
          String strLine1;
          while ((strLine1 = br1.readLine()) != null)  
          {
              String regex = "\"[^\"]+\"|[^,]+";
              Pattern p = Pattern.compile(regex);
              Matcher m = p.matcher(strLine1);
              while(m.find()) {
                  total.add(strLine1.substring(m.start(),m.end()));
                  }
          }
          for(int i = 0; i < total.size(); i++)
          {
              if(i % 6 == 0)
                  vcode.add(total.get(i));
              else if(i % 6 == 1)
                  vname.add(total.get(i));
              else if(i % 6 == 2)
                  material.add(total.get(i));
              else if(i % 6 == 3)
                  mat_desc.add(total.get(i));
              else if(i % 6 == 4)
                  reason.add(total.get(i));
              else if(i % 6 == 5)
                  quantity.add(total.get(i));
          }
          System.out.println("vcode content: "+vcode);
          System.out.println("vname content: "+vname);
          System.out.println("material content: "+material);
          System.out.println("mat_desc content: "+mat_desc);
          System.out.println("reason content: "+reason);
          System.out.println("quantity content: "+quantity);      
          in1.close();

      }
      catch (Exception e)
          {     e.printStackTrace();
                System.err.println("Error: " + e.getMessage());
          }

  }

} 
```

# json - Openstack Folsom 服务器详细信息 JSON 响应无法解组

> ID：13700038
> 
> 赞同：0
> 
> 时间：2012-12-04T09:49:19.833
> 
> 标签：json, openstack, openstack-nova

> 如果您在 Folsom 中点击获取服务器详细信息的 api，您会注意到实体“地址”。
> 
> 该实体有一个子元素作为网络名称列表。似乎不可能解组对 Java 对象的 JSON 响应，因为响应似乎不遵循模式，因为网络名称将取决于实现。有解决方法还是我出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:01:31.567

这听起来像[https://bugs.launchpad.net/nova/+bug/1084560](https://bugs.launchpad.net/nova/+bug/1084560) - 如果您想帮助修复错误，我会去那里发表评论。

# node.js - 将 Socket.io 流连接到节点 repl 流

> ID：13700042
> 
> 赞同：5
> 
> 时间：2012-12-04T09:49:27.930
> 
> 标签：node.js, sockets, socket.io

我用 socket.io 创建了一个快速应用程序。现在我想要一个浏览器终端与我在 node.js 中创建的 repl 连接。这是我想出的

```
var io = io.listen(server);
var sessionSockets = new SessionSockets(io, sessionStore, cookieParser);

sessionSockets.on('connection', function (err, socket, session) {
  var stream = createStream(socket);
  var replInstance = repl.start({
    prompt: "> ",
    input: stream,
    output: stream
  });
  repls[socket.id] = replInstance;
});

var createStream = function(socket) {
  var stream = new Stream();
  stream.readable = true;
  stream.resume = function() {};

  stream.write = function(data) {
    socket.emit('stdout', data);
  };

  socket.on('stdin', function(data) {
    // emit data to repl stream - DOES NOT WORK
    stream.emit('data', data);
  });

  return stream;
}; 
```

它所做的是将控制台输出推送到 socket.io 连接并在前端显示它们。它没有在 repl 中从前端输入数据。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:21:24.420

我刚刚尝试了您的代码，我认为您可能需要在您的流发射上换行以便 repl 识别它：

```
// emit data to repl stream - DOES NOT WORK
stream.emit('data', data+'\n'); 
```

# jquery - 每张幻灯片上 bxslider 中的自定义暂停选项值

> ID：13700043
> 
> 赞同：0
> 
> 时间：2012-12-04T09:49:32.497
> 
> 标签：jquery, bxslider

我在`ul`元素上应用了 bxslider。但我想为每张幻灯片设置不同的暂停属性值。

```
slider = $('.bxslider').bxSlider({
    speed:500,
    pause:5000,
    onSlideBefore: function(){
    },
    onSlideAfter: function(){
    }
}); 
```

在里面`onSlideBefore`，或者`onSlideAfter`我想设置下一张（如果代码在里面`onSlideBefore`）或当前幻灯片（如果代码在里面`onSlideAfter`）的暂停值，这样每个图像幻灯片都有自己的过渡值。

以任何方式感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T06:42:11.913

我用下面的代码解决了我的问题。不确定这是否是正确的方法。如果对您有帮助，请尝试一下。
我在里面添加了一个新的公共方法`jquery.bxslider.min.js`，如下所示。

```
n.setPause = function (t) {
    if(s.settings.auto){
        clearInterval(s.interval);
        s.interval = setInterval(function () {
        s.settings.autoDirection=="next"?n.goToNextSlide() : n.goToPrevSlide()}, t)
    }
}; 
```

其中，t 是每个单独图像幻灯片的毫秒数。

在我的 JSP 中，我添加`onSlideAfter`了 $slider 是应用 bxslider 的 jQuery 元素的函数。

```
onSlideAfter: function(){
    $slider.setPause(current image pause in milliseconds);
} 
```

# c - 在 CVI/Labwindows 中同步线程

> ID：13700044
> 
> 赞同：1
> 
> 时间：2012-12-04T09:49:41.317
> 
> 标签：c, multithreading, thread-synchronization, cvi

我有两个（或更多线程）并行工作。它们的目的是测量硬件设备，它们依赖于外部硬件刺激。在执行过程中的某个时刻，它们触发硬件设备并等待刺激。但我只有一个刺激装置。

因此线程必须等待，直到每个线程都准备好接收刺激。现在另一个线程（可能是调度主线程）必须触发设备并且线程可以继续。

同步这个的最佳实践是什么？最好用动态数线程？

**编辑：** 我们使用 CVI/Labwindows。这提供了一些线程，但主要是通过不良记录的宏。我已经弄清楚了如何注册线程，启动它们并等待它们完成。

似乎也有创建线程安全变量和锁的工具。但是他们的语法让我望而却步，因此我想/需要自己构建某种互斥体/信号量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:06:16.623

我不知道你是不是这个意思，唯一具有多线程的 C（ISO 和 ANSI）版本是 C11。周围没有太多的实现，所以也许你的意思有所不同。

在 C11 中，用于在线程之间进行同步的工具是双重的。一种是经典的线程数据结构，即互斥体和条件变量，其精神与它们也存在于 POSIX 线程中的精神相同。（信号量只是一个可选功能。）

C11 中用于同步线程的第二个工具是`atomic`变量。这是 POSIX 中没有等效的功能，但所有现代架构都本机支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:33:23.800

1.  所以首先你所有的 N 个工作线程都必须进入“就绪模式”

2.  您的刺激线程发送刺激。（它必须等到所有其他人都准备好）

3.  然后所有线程应该开始工作。

因此，在 1 和 2 之间，您需要一个信号量（初始计数 0，最大计数 nThreads），每个工作线程发出一次信号，并由刺激线程等待 N 次。
在 2\. 和 3\. 之间，您还需要同步，因为工作线程应该等到刺激线程发送了他的刺激。这也可以通过每个工作线程的信号量（初始计数 0 最大计数 1）来实现。

刺激线程的伪代码：

```
init stimulus-semaphore and one semaphore for each worker-thread
start threads
while (1) {
  for (int i=0;i<nThreads;i++)
    wait for stimulus-semaphore
  do the stimulus-thing
  for (int i=0;i<nThreads;i++)
    signal threads[i] semaphore
} 
```

工作线程的伪代码：

```
while (1) {
  signal stimulus-semaphore
  wait for this threads semaphore
  do the work to be done after stimulus was sent
} 
```

# python - 在 python 中编写更好的递归深度优先搜索

> ID：13700045
> 
> 赞同：4
> 
> 时间：2012-12-04T09:49:49.670
> 
> 标签：python

我正在尝试在 python 中构建一个图形库（以及标准图形算法）。我试图实现 DFS，这就是它的样子

```
def DFS(gr, s, path):
    """ Depth first search 
    Returns a list of nodes "findable" from s """
    if s in path: return False
    path.append(s)
    for each in gr.neighbors(s):
        if each not in path:
            DFS(gr, each, path) 
```

这工作正常，但我对它的使用方式不满意。例如，目前您需要这样做

```
 path = []
 DFS(mygraph, "s", path)
 print path 
```

而不是这个，我想以这种方式使用 DFS

```
path = DFS(mygraph, "s")
print path 
```

使用递归 DFS，我无法想出像上面那样工作的实现。有人可以给我一些关于如何实现这一目标的指示吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:53:02.613

只需创建一个调用您已有的包装器方法：

```
def DFS(gr, s):
    path = []
    DFS2(gr, s, path)
    return path 
```

这`DFS2`是您在上面显示的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-04T19:06:29.167

其实你为什么不直接设置`path`一个空列表的默认值呢？因此，使用相同的代码但参数略有不同：

```
# Original
def DFS(gr, s, path):

# Modified
def DFS(gr, s, path=[]):

# From here you can do
DFS(gr, s) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-01T07:41:43.803

您可以按照 chutsu 的建议对访问的节点使用空的默认值，但要小心使用[可变的默认参数](https://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument/52572954#52572954)。此外，我建议使用集合而不是列表进行持续查找。

```
def DFS(gr, s, visited=None):
    """ Depth first search 
    Returns a list of nodes "findable" from s """
    if visited == None:
        visited = set([s])

    for each in gr.neighbors(s):
        if each not in visited:
            visited.add(each)
            DFS(gr, each, visited)

    return visited 
```

# visual-studio-2008 - 为什么这个后期生成事件在 Visual Studio 2008 中不起作用？

> ID：13700047
> 
> 赞同：0
> 
> 时间：2012-12-04T09:49:52.983
> 
> 标签：visual-studio-2008

我有一个在 Visual Studio 2012 中有效但在 Visual Studio 2008 中无效的构建后事件，脚本如下：

```
xcopy "$(SolutionDir)..\ABC\defaultSettings.xml" "$(SolutionDir)$(SolutionName)\$(OutDir)" /Y 
```

我正在使用一个智能设备项目，`.Net Compact Framework`但我认为它与此无关。

知道为什么构建后事件不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:03:28.847

宏名称似乎正确。也许问题是 .xml 不存在。

看看这篇[文章](http://geekswithblogs.net/dchestnutt/archive/2006/05/30/80113.aspx)。它解释了如何从构建后事件失败中获得更有意义的消息。

您也可以尝试去掉引号并改用 Copy 命令。

# php - 解析 HTML 以修复微排版和字形问题

> ID：13700054
> 
> 赞同：20
> 
> 时间：2012-12-04T09:50:30.347
> 
> 标签：php, localization, html-parsing, typography

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-06T19:53:34.890

My somewhat-friend Sean built something that I use for this purpose quite often. You can view the demo here: [http://files.seancoates.com/lexentity/](http://files.seancoates.com/lexentity/) he blogged about it here: [http://seancoates.com/blogs/lexentity](http://seancoates.com/blogs/lexentity) and you can grab the source here: [https://github.com/scoates/lexentity](https://github.com/scoates/lexentity)

It might not meet your full language needs, but it's a start with English.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T23:12:06.570

You might be interested in [tidy](http://php.net/manual/en/class.tidy.php). It is boundled with PHP 5+ (all you need to use it is libtidy). It not just parses HTML, but repairs it too.

But with the localization, you are on your own - [intl](http://php.net/manual/en/book.intl.php) does not have any data about quotes - f.ex.; at least i could not found them.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-10T23:44:49.537

As about quotes read this [Q tag](http://www.w3.org/TR/html401/struct/text.html#h-9.2.2), others I would use bbcode library. As it would be really difficult to write algorithm to distinguish between dashes You need. BBcode allows editor to choose, but in that case when editor has to make an action You may think of providing some kind of button to insert special characters. For things that are easy to recognize, You just create new rules for BBcode lib and if they have to be local aware You would create different set of rules for different languages. Obvously inheritance in OOP would come handy here.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-12T22:57:37.240

As others have said, a regex-based solution could be dangerous/forbidden...

But if you have a lock-down on the kind of content you want to use this tool on (and it sounds like you do if the content is coming from your CMS), it sounds like an extension to the Perl program Demoroniser could take care of this for you: [http://www.fourmilab.ch/webtools/demoroniser/](http://www.fourmilab.ch/webtools/demoroniser/)

# backbone.js - Backbone - 将两个集合交给一个视图

> ID：13700074
> 
> 赞同：1
> 
> 时间：2012-12-04T09:51:45.280
> 
> 标签：backbone.js

我有一个 Backbone 视图，例如，一个 Edit Profile 视图，我将在其中将视图交给我的 User 模型实例。但是，例如，我希望允许用户从选择下拉列表中选择他们最喜欢的社交网络。现在，这个社交网络列表由他们在应用程序的另一个区域填充。

我的问题是，1\. 存储这些社交网络的最佳方式是什么？每个人都有一个模型，所以是社交网络的集合？和 2\. 然后我是否将集合（社交网络）和模型（用户）传递给我的 Edit Profile 视图？

这是最好的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T10:08:19.767

基本上你可以使用 initialize -function 来做这种事情。您可以将另一个作为模型或集合传递，另一个作为一些参数传递，您只需保存对它的引用。您也可以给视图一个模型和一个集合。

```
var EditProfileView = Backbone.View.extend({
  initialize: function(options) {
    this.user = options.user:
    // or do this
    this.socialNetworks = options.socialNetworks; 
  }
});

// when creating an instance do
var foo = new EditProfileView({user: someUser, collection: socialNetworks});
// or
var foo = new EditProfileView({model: someUser, socialNetworks: socialNetworks});
// also this will work as well
var foo = new EditProfileView({model: someUser, collection:socialNetWorks}); 
```

另外，如果你不想分配它，你可以做

```
var foo = new EditProfileView({user: someUser, socialNetworks: socialNetworks});
// the options given to a view on initialization 
// are saved to an options property in the view
// so the following should hold true
foo.options.user === someUser;
foo.options.socialNetworks === socialNetworks; 
```

希望这可以帮助！

# centos - 在 CentOs 6.3 上安装 CutyCapt

> ID：13700080
> 
> 赞同：1
> 
> 时间：2012-12-04T09:52:16.180
> 
> 标签：centos, cutycapt

我正在尝试在 CentOS 6.3 上安装**[CutyCapt](http://cutycapt.sourceforge.net/)**

```
yum install Xvfb
yum install xorg-x11-fonts*
yum install subversion libqt4-webkit libqt4-dev 
```

我在安装 libqt4-webkit 和 libqt4-dev 时遇到问题
我得到了这个[**SO 链接**](https://stackoverflow.com/questions/3309446/trouble-installing-cutycapt-on-centos)
，我尝试了该解决方案但没有帮助。
请给我一个方法

# c++ - 为什么输出是无限的？

> ID：13700081
> 
> 赞同：0
> 
> 时间：2012-12-04T09:52:16.013
> 
> 标签：c++, c, loops, while-loop, infinite-loop

```
int i;
while(i=10)
{
    printf("%d\n",i);
    i=i+1;
} 
```

有一个程序，其中 while(i=10) 表示 while(1)[通常] 表示 while 循环为真。所以它应该只打印一次 10 并将 i 的值增加 1 即 i 变为 11。但是输出是无限重复打印'10'。为什么会这样？我的平台是：64 位 Windows 7 并使用 32 位 Dev C++ 编译器。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T10:04:07.000

我认为您想在 while 条件中使用双等号（比较）而不是单等号（赋值）。您还应该将变量 i 初始化为 10（否则将永远不会执行 while 块）。

```
int i=10;
while (i==10)
{
    printf("%d\n",i);
    i=i+1;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T09:53:51.703

在 while 循环中查看，

`while(i=10) // assigns the value 10 to the i which is always true (becuase any non-zero value is true in such a case).`

您使用的是`assignment operator` `=`，因此此分配返回的值是其值，`rvalue`并且`10`将`10`始终为真。

这就是为什么无限循环。

您应该在 while 循环中使用`while(i == 10)`or`while(i < = 10)`或任何比较运算符。

比较运算符的结果为`1`(true) 或`0`(false)。当 in`while(cond)` `cond`为 false 时，循环终止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T10:17:19.440

在您的 while 条件部分中，您正在分配值`i`而不是进行比较

```
 while(i=10) 
```

当程序编译成功时，这种类型的错误很难跟踪。为避免此类错误，请按**相反**顺序进行比较

`while(10==i) or if(10==x`） ETC..

万一你误用`while(10=i)`了，编译器会抛出类似的错误

```
The left-hand side of an assignment must be a variable, property or indexer 
```

节省以后调试的宝贵时间。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T09:54:16.623

`while(i=10)`设置`i`为`10`，然后检查它，即将它转换为`true`or `false`。Only `0`would be `false`，所以`true`每次都会这样，因此永远循环。

我猜你想要`while(i==10)`。Double`=`表示“检查相等性”。单一`=`的意思是“设定值”。

**编辑：**事实上我不确定你想要什么。如果您没有`i`在循环之前进行初始化，那么也许您确实打算在条件中设置它。在这种情况下，您为什么`10`每次都设置为感到惊讶？

**再次编辑：**好的，所以通过您的评论，您*的*意思是在条件中设置它。所以你需要了解这种情况是如何运作的。你写的实际上是这样的：

```
while ( (bool)(i=10) ) 
```

这设置`i`为`10`，然后转换`10`为`bool`，始终为`true`。然后在循环中，`i`递增到`11`. 然后当它回到循环顶部时，它立即设置`i`回`10`. 所以你正在有效地做：

```
set i to 10; <-----\
print i (=> 10);    |
set i to 11;        |
go back to the top; / 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T10:08:16.267

我认为您缺少的关键是条件语句在循环的每次迭代中都会*执行。*对于`i=10`循环的每次迭代，而不仅仅是第一次迭代，都会执行此操作（并针对零进行测试的结果参考）。

您的代码等效于：

```
int i;
int j = (i=10);
while(j)
{
    printf("%d\n",i);
    i=i+1;
    j = (i=10);
} 
```

`j = (i=10);`相当于哪里`i = 10; j = i;`。

所以步骤变成了：

1.  分配`10`给`i`，并将结果引用 ( `i`) 中的值分配给`j`（分配按约定返回引用或指针）。
2.  如果值为真（总是如此），则执行循环块
    1.  称呼`printf`
    2.  增量`i`
    3.  分配`10`给`i`，并将结果引用 ( `i`) 中的值分配给`j`。

如果从分配返回的值为零，则测试分配的 while 循环只能失败/停止循环。

实际上，像这样编写循环是不好的风格，因为它们看起来与非常常见的`while(i==10)`相等检查太相似了。有时在使用对象时会测试赋值的返回值，例如`while(nextObjPtr = collection.getNextObj())`，因为一旦`getNextObj`返回空指针就会失败。然而，即使这样，也会更清楚地写出：

```
while((nextObjPtr = collection.getNextObj()) != nullptr) 
```

或 C++11 之前的版本：

```
while((nextObjPtr = collection.getNextObj()) != NULL) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T09:54:40.117

```
 while(i=10) 
```

条件不对！其实不是条件！

你应该写

```
while(i<10) 
```

# shader - 不显示 THREE.Mesh 对象的某些面

> ID：13700082
> 
> 赞同：0
> 
> 时间：2012-12-04T09:52:17.277
> 
> 标签：shader, webgl, three.js

我使用 three.js 库在 WebGL 中编码，我想使用着色器。我的对象是 THREE.Mesh 对象。

为了使用着色器，我创建了三个缓冲区来将信息传输到着色器。

*   VerticesArray 包含对象的所有顶点。
*   NormalsArray 包含所有点的法线。
*   IndicesArray 包含 verticesArray 中顶点的等级。（面是三角形，所以三个索引链接同一个面的三个顶点）。

要创建论文数组，我这样做：

```
 this.mesh = new THREE.Mesh(
            new THREE.SphereGeometry( 15, 15, 15 ),
            new THREE.MeshLambertMaterial( { color: 0xF40029 } )
        );

    this.vertices = new Array();

    for(var i = 0 ; i < this.mesh.geometry.vertices.length ; i++){
        this.vertices.push(this.mesh.geometry.vertices[i].x);
        this.vertices.push(this.mesh.geometry.vertices[i].y);
        this.vertices.push(this.mesh.geometry.vertices[i].z);
    }

this.normals = new Array();

    for(var i = 0 ; i < this.mesh.geometry.faces.length ; i++){ 

            this.normals[this.mesh.geometry.faces[i].a*3] = this.mesh.geometry.faces[i].vertexNormals[0].x;
            this.normals[this.mesh.geometry.faces[i].a*3+1] = this.mesh.geometry.faces[i].vertexNormals[0].y;
            this.normals[this.mesh.geometry.faces[i].a*3+2] = this.mesh.geometry.faces[i].vertexNormals[0].z;

            this.normals[this.mesh.geometry.faces[i].b*3] = this.mesh.geometry.faces[i].vertexNormals[1].x;
            this.normals[this.mesh.geometry.faces[i].b*3+1] = this.mesh.geometry.faces[i].vertexNormals[1].y;
            this.normals[this.mesh.geometry.faces[i].b*3+2] = this.mesh.geometry.faces[i].vertexNormals[1].z;

            this.normals[this.mesh.geometry.faces[i].c*3] = this.mesh.geometry.faces[i].vertexNormals[2].x;
            this.normals[this.mesh.geometry.faces[i].c*3+1] = this.mesh.geometry.faces[i].vertexNormals[2].y;
            this.normals[this.mesh.geometry.faces[i].c*3+2] = this.mesh.geometry.faces[i].vertexNormals[2].z;

    }

this.indices = new Array();

    for(var i = 0 ; i < this.mesh.geometry.faces.length ; i++){
        this.indices.push(this.mesh.geometry.faces[i].a);
        this.indices.push(this.mesh.geometry.faces[i].b);
        this.indices.push(this.mesh.geometry.faces[i].c);
    }

this.vertexBuffer = gl.createBuffer();

    gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.vertices), gl.STATIC_DRAW);
    this.normalBuffer = gl.createBuffer();

    gl.bindBuffer(gl.ARRAY_BUFFER, this.normalBuffer);
    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.normals), gl.STATIC_DRAW);
    this.indexBuffer = gl.createBuffer();

    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(this.indices), gl.STREAM_DRAW);
    this.indexCount = this.indices.length; 
```

在这一步，我有一个奇怪的问题，在显示器上我可以看到我的两个主题，但有些人脸没有显示。

你有想法解决我的问题吗？

我们可以在下图中看到我的问题。显示两个球。 [http://img341.imageshack.us/img341/1094/ballsk.jpg](http://img341.imageshack.us/img341/1094/ballsk.jpg)

感谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:52:20.757

这是一样的

[如何在three.js中重新定向三角形面](https://stackoverflow.com/questions/10983473/how-to-re-orient-triangle-faces-in-three-js)

我还没有找到一个简单的解决方案来重新定位three.js 中的面孔，以便所有人都向外看。我的简单解决方法是用相反的方向再次绘制所有内容。

例如，请参阅[http://www.menne-biomed.de/uni/3d/alphahull.html](http://www.menne-biomed.de/uni/3d/alphahull.html)

# wordpress - 文件/文件夹权限和所有权破坏了 wordpress 功能，什么是安全的解决方案？

> ID：13700084
> 
> 赞同：0
> 
> 时间：2012-12-04T09:52:22.783
> 
> 标签：wordpress, apache, security, chmod, chown

除了安全困境之外，我有一个运行（在共享主机上）的 wordpress 网络非常满意。

当我第一次安装应用程序时，我是通过 plesk Cpanel 完成的。后来当我开始添加插件时，我意识到服务器使用了safe_mode On。我要求主机将其删除，他们确实这样做了，但在此之前，由于 safe_mode On 设置导致的权限问题，我确实通过 FTP 安装了我的大部分插件。

但现在我似乎遇到了一个限制我的不同环境。因为我通过 FTP 安装插件，所以我的 FTP 用户是文件的所有者。现在，当我尝试通过正常的 wordpress 例程进行更新时，它没有足够的流文件夹权限，当我将其设置为 777 时，它没有足够的权限用于插件文件夹，因为 apache 不是文件夹和文件的所有者.

我不想将所有文件夹设置为 777（775 也不起作用），更改所有者（我通过 Wordpress 插件创建文件夹进行了测试）有效，但[http://codex.wordpress.org/Changing_File_Permissions](http://codex.wordpress.org/Changing_File_Permissions)告诉我我不应该让 apache 成为我的文件和文件夹的所有者。

你能给我一些建议吗：

*   关于让 apache 成为我的文件和文件夹的所有者的安全问题
*   关于 777 权限的安全问题（我认为这显然是一个安全风险，但也许我忽略了一些东西）
*   我还能做些什么来使wordpress正常运行吗

如果您需要有关共享主机的更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:45:28.783

我过去也遇到过类似的问题。

最终，我发现自己用细齿梳通读了 WordPress.org 上的 Hardening WordPress 文章，并特别注意了这一部分：[http](http://codex.wordpress.org/Hardening_WordPress#File_Permissions) ://codex.wordpress.org/Hardening_WordPress#File_Permissions ，它建议混合使用 755 和 644。

您可能想要运行递归更改（以确保它们回显到下面的文件夹），然后将 WordPress Firewall 2 之类的东西作为安全插件弹出。

最终，共享托管环境只能在一定程度上得到保护（因为它是共享的）——但这两者都是一个好的开始。

# iphone - xcode ios：设置单元格图像尺寸

> ID：13700086
> 
> 赞同：0
> 
> 时间：2012-12-04T09:52:29.113
> 
> 标签：iphone, objective-c, ios, xcode

我正在从我的网络服务器加载一组图像，以显示在右侧的单元格中。但是，图像有不同的大小，因此即使显示列表，它们也看起来不一样。无论如何，我可以将图像设置为固定尺寸，如 100 x 80 吗？

我的代码如下：

```
cell.lotImageView.image = [UIImage imageNamed:@"blankthumbnail.png"];
cell.lotImageView.clipsToBounds = YES;

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0), ^{
    //load image from web server
    NSString *strURL = [NSString stringWithFormat:@"%@/images/%@", user.url, lotPhoto[row]];
    NSURL *url = [[NSURL alloc] initWithString:strURL ];
    UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:url]];

    dispatch_async(dispatch_get_main_queue(), ^{
        // let's make sure the cell is still visible (i.e. hasn't scrolled off the screen)
        mainTableCell *cell = (mainTableCell *)[tableView cellForRowAtIndexPath:indexPath];
        if (cell)
        {
            cell.lotImageView.clipsToBounds = YES;
            cell.lotImageView.image =image;
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:02:02.430

这是一种可以为图像实现所需尺寸的方法。您可以将以下功能放在您的应用程序委托中，并可以在整个应用程序中使用。这是代码：

```
+(UIImage *) resizeImage:(UIImage *)orginalImage resizeSize:(CGSize)size {

    CGFloat actualHeight = orginalImage.size.height;
    CGFloat actualWidth = orginalImage.size.width;
    if(actualWidth <= size.width && actualHeight<=size.height){
        return orginalImage;
        //NSLog(@"hi thassoods");
    }
    float oldRatio = actualWidth/actualHeight;
    float newRatio = size.width/size.height;
    if(oldRatio < newRatio){
        oldRatio = size.height/actualHeight;
        actualWidth = oldRatio * actualWidth;
        actualHeight = size.height;
    }
    else {
        oldRatio = size.width/actualWidth;
        actualHeight = oldRatio * actualHeight;
        actualWidth = size.width;
    }
    CGRect rect = CGRectMake(0.0,0.0,actualWidth,actualHeight);
    UIGraphicsBeginImageContext(rect.size);
    [orginalImage drawInRect:rect];
    orginalImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return orginalImage;
} 
```

但是，是的，如果您指定的新尺寸与图像的原始尺寸不成比例，那么您的图像分辨率可能不会保持正确。

一切顺利！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T09:58:13.537

您可以尝试调整图像大小。这段代码做到了：

```
- (UIImage *)imageWithImage:(UIImage *)image convertToSize:(CGSize)size
{
    UIGraphicsBeginImageContext(size);
    [image drawInRect:CGRectMake(0, 0, size.width, size.height)];
    UIImage *destImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return destImage;
} 
```

# c++ - 什么列表[i]++；应该怎么做？

> ID：13700091
> 
> 赞同：3
> 
> 时间：2012-12-04T09:52:42.053
> 
> 标签：c++, algorithm, list, sorting

我需要了解称为珠排序的算法。我找到了该算法的 c++ 实现，但我并不完全理解它。最让我困惑的是这一行发生了什么：

```
 List[i]++; 
```

请帮帮我

这是完整的代码：

```
#include <iostream>
#include <vector>

using std::cout;
using std::vector;

void distribute(int dist, vector<int> &List) {
    //*beads* go down into different buckets using gravity (addition).
    if (dist > List.size() )
        List.resize(dist); //resize if too big for current vector

    for (int i=0; i < dist; i++)
        List[i]++;
}

vector<int> beadSort(int *myints, int n) {
    vector<int> list, list2, fifth (myints, myints + n);

    cout << "#1 Beads falling down: ";
    for (int i=0; i < fifth.size(); i++)
        distribute (fifth[i], list);
    cout << '\n';

    cout << "\nBeads on their sides: ";
    for (int i=0; i < list.size(); i++)
        cout << " " << list[i];
    cout << '\n';

    //second part

    cout << "#2 Beads right side up: ";
    for (int i=0; i < list.size(); i++)
        distribute (list[i], list2);
    cout << '\n';

    return list2;
}

int main() {
    int myints[] = {734,3,1,24,324,324,32,432,42,3,4,1,1};
    vector<int> sorted = beadSort(myints, sizeof(myints)/sizeof(int));
    cout << "Sorted list/array: ";
    for(unsigned int i=0; i<sorted.size(); i++)
        cout << sorted[i] << ' ';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T09:55:08.613

它将列表中第*i 个*元素的值增加 1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:54:35.283

它只是在索引处访问`vector<int>`函数（称为）参数中的元素并将其值增加 1`List``i`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:48:33.710

C 中的 ++ 运算符递增一个变量。请参阅此处以获取快速参考： [http ://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Arithmetic_operators](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Arithmetic_operators)

在这种情况下，变量是位于`i`名为 的数组的位置的数组元素，`List`在 C 中表示为 `List[i]`。

# c - C：数组没有获得新的内存地址

> ID：13700093
> 
> 赞同：0
> 
> 时间：2012-12-04T09:52:52.283
> 
> 标签：c, arrays, pointers

运行以下命令时，它会一直打印相同的内存地址。

```
#include <stdio.h>

int array[5] = {2, 4, 6, 8, 10};
int *pointer;

int main()
{
        pointer = array;
        printf("%p:\t%d\n", pointer, *pointer);
        return 0;
} 
```

我不知道这是否是一个问题，但我仍然很想知道为什么会这样，当在 main() 中声明它时会不断返回新地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T09:55:31.570

纯属巧合。
您不能依赖地址在不同的运行中相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:27:13.920

请注意，在大多数现代桌面（当然还有服务器）操作系统上，进程处理的地址是[虚拟](http://en.wikipedia.org/wiki/Virtual_memory)的。这意味着当操作系统加载程序以在您的进程中运行时，它会在 RAM 的物理页面和进程“看到”的虚拟页面之间建立映射。

每次运行程序时，这个映射对你来说似乎都是一样的，但这完全是巧合。操作系统也可以应用随机化或任何其他使映射发生变化的方法。

请注意，由于存在虚拟地址，您的任意数量的程序完全有可能*同时*（并行）运行并且*仍然*看到完全相同的数组地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:25:20.380

这个问题是一个争论不休的话题，并且由来已久。

最初，当程序在物理内存中运行时，事物的地址过去依赖于执行前内存中的内容。

后来，使用现代 CPU，每个进程都会获得自己的地址空间，因此没有多样性。

然后，安全人员来了，说故意随机化程序起始地址和代码位置可以防止一系列安全攻击。他们中的一些人被一群软件工程师私刑处死，他们说提高一致性对于进行更有用的软件测试很重要。然而，一些编译器（例如 Visual Studio 2010）会默认执行代码位置的随机化。

在大多数情况下，这仍然是不可能的，而且对数据的需求也较少。这就是为什么你会得到相同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T21:02:14.390

您通常在发布的代码中为“数组”获得相同地址，但如果您在 main 内部声明数组则获得不同地址的原因是 main 外部的数组具有全局范围，因此分配在单个固定位置，而如果在 main 中声明的数组，则在进入 main 时在堆栈上分配（并且可以想象，如果您从其他地方调用 main，则可以分配多次）。

其他答案中描述的随机化地址的安全功能适用于堆栈，而不适用于具有静态持续时间的变量，因为常见的漏洞利用通过用恶意代码覆盖堆栈来工作，然后通过覆盖返回地址来跳转到它，返回地址也被存储在堆栈上。用恶意代码覆盖非堆栈变量仍然会给攻击者留下执行它的问题，因此安全问题较小。

# c# - 数组不允许减去索引c#

> ID：13700096
> 
> 赞同：1
> 
> 时间：2012-12-04T09:52:57.700
> 
> 标签：c#, c#-4.0

我有以下程序计算每个文档条目的文档频率 (freq)

```
 foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key)))
         {                                                              
            _docFreq[i][termIndex]++;
         } 
```

以及获取术语索引的过程

```
rivate int GetTermIndex(string term)
    {
        int i;
        if (_wordsIndex.TryGetValue(term, out i))
            return i;
        else
            return 0;
    } 
```

其中，所有术语都在另一个字典 (_wordsIndex) 中编入索引。

根据上述过程，如果freq中的entry.Key不存在，那么GetTermIndex将返回0，这将向上计数_docFreq(_docFreq[i][0])，这就是问题所在。那么，当 entry.Key 不存在时，我怎么能避免计数呢？我试图做类似的事情

```
rivate int GetTermIndex(string term)
    {
        int i;
        if (_wordsIndex.TryGetValue(term, out i))
            return i;
        else
            return -1;
    } 
```

但当然会出现错误“索引超出数组范围”，因为_docFreq[i][-1] 没有索引。

请问有什么帮助吗？？非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:56:07.250

`termIndex`如果是-1 ，就不要计算它：

```
foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key)))
{
    if (termIndex >= 0)
        _docFreq[i][termIndex]++;
} 
```

或使用 LINQ `Where`：

```
foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key)).Where(ti => ti >= 0))
{
    _docFreq[i][termIndex]++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T09:56:45.130

检查函数返回的值：

```
foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key))) {
  if (termIndex != -1) {
    _docFreq[i][termIndex]++;
  }
} 
```

或者：

```
foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key)).Where(i => i != -1)) {
  _docFreq[i][termIndex]++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T09:56:58.583

怎么样

```
 foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key)).Where(index=>index>=0))
     {                                                              
        _docFreq[i][termIndex]++;
     } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T09:57:26.070

确保跳过那些无效值：

```
foreach (var termIndex in freq.Select(entry => GetTermIndex(entry.Key))).Where(x => x >= 0)
     {                                                              
        _docFreq[i][termIndex]++;
     } 
```

# oracle - 在 Plsql 中选择第二行

> ID：13700106
> 
> 赞同：0
> 
> 时间：2012-12-04T09:53:31.100
> 
> 标签：oracle, select, plsql, top-n

可以说我有下表：

```
 SomeTable(
    id, 
    price
 ) 
```

如何从该表中选择价格第二高的行？注意：这必须在 Pl/SQL 中以与数据库无关的方式完成。是否可以在没有任何循环的情况下做到这一点？

1.  我知道这是如何使用 Oracle 结构`rownum`或 mysql 结构来完成的`limit`，所以我不是在寻找那些。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:12:04.817

```
CREATE TABLE mytable (id NUMBER PRIMARY KEY, price NUMBER NOT NULL);
INSERT INTO mytable VALUES (1, 10);
INSERT INTO mytable VALUES (2, 20);
INSERT INTO mytable VALUES (3, 20);
INSERT INTO mytable VALUES (4, 30);

SELECT id, price 
 FROM (
       SELECT id, price, RANK() OVER (ORDER BY price DESC) AS r
         FROM mytable
      )
 WHERE r=2;

 ID PRICE
--- -----
  2    20
  3    20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T09:29:23.127

这不是很简单吗？天知道为什么我之前没有考虑过！

select max(price) from tnum where price <> (select max(price) from tnum)

# c# - 具有不可靠/不规则结构的查询字符串（使用 LINQ？）

> ID：13700107
> 
> 赞同：1
> 
> 时间：2012-12-04T09:53:31.880
> 
> 标签：c#, string, linq, parsing, rtsp

我目前正在尝试解析通常看起来像下面代码字段中的示例的 RTSP 消息（取自 RF2326）。但是由于消息的某种不规则结构，以及定义较弱的分隔符等，我遇到了几个问题。

对此的一些想法：

*   逐行遍历字符串：但是如果命令/参数分成两行怎么办？
*   按某些字符拆分行以进行键/值解析-> 我必须确保第一次出现的例如“：”是键/值的分隔符。
*   用空格 (" ") 分割行 - 但也可能出现像 CSeq:312 (没有空格) 这样的行。

另外：我只能假设标题部分（直到示例中的 Content-Length）与正文分开，以中断（`\r\n`）。如果只有一个呢？

有没有办法解决这个优雅可靠的问题？也许与LINQ？

*   客户端 -> 服务器：

    ```
    DESCRIBE rtsp://server.example.com/fizzle/foo RTSP/1.0
    CSeq: 312
    Accept: application/sdp, application/rtsl, application/mheg 
    ```

*   服务器 -> 客户端：

    ```
    RTSP/1.0 200 OK
    CSeq: 312
    Date: 23 Jan 1997 15:35:06 GMT
    Content-Type: application/sdp
    Content-Length: 376

    v=0
    o=mhandley 2890844526 2890842807 IN IP4 126.16.64.4
    s=SDP Seminar
    i=A Seminar on the session description protocol
    u=http://www.cs.ucl.ac.uk/staff/M.Handley/sdp.03.ps
    e=mjh@isi.edu (Mark Handley)
    c=IN IP4 224.2.17.12/127
    t=2873397496 2873404696
    a=recvonly
    m=audio 3456 RTP/AVP 0
    m=video 2232 RTP/AVP 31
    m=whiteboard 32416 UDP WB
    a=orient:portrait 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T04:04:18.650

您可以使用我的库来解析 SDP ...

看看@ [https://net7mma.codeplex.com/](https://net7mma.codeplex.com/)

这里还有一篇文章解释它-> [http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp](http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp)

需要帮助请叫我！

# sql - 如何在sql列中搜索带引号的值并替换它？

> ID：13700114
> 
> 赞同：0
> 
> 时间：2012-12-04T09:53:42.490
> 
> 标签：sql, sql-server

在我的 sql 表中，我有一列，其中包含以下值：

![在此处输入图像描述](../Images/228f491fcf32c0160e5b1bb70d4b339f.png)

我需要找到这些类型的条目并删除单引号，因为我不需要它们，但是如何通过 where 子句中的查询来获取它们？如果我使用 select * from table 1 where desc = 'the values is '10'，它根本不会工作，因为语句不正确。如何修改我的 where 子句以获得所需的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T09:57:27.367

双引号将其转义：

```
select * from table 1 where desc = 'i am ''not'' a graduate' 
```

作为旁注，不要选择`*`，明确列出您感兴趣的列：

```
select id, "desc" from table 1 where desc = 'i am ''not'' a graduate' 
```

…并且不要用 SQL 保留字命名你的列 ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T20:03:40.590

你也可以这样做：

```
select * from table 1 where desc like '%'%' 
```

# c# - 无法引用dll文件的内容

> ID：13700115
> 
> 赞同：0
> 
> 时间：2012-12-04T09:53:48.027
> 
> 标签：c#, asp.net, web-config

我有一个在 IIS 中运行的 C# 网站。我需要在我的 aspx 页面中使用 Web 服务。我使用命令 wsdl.exe 创建了一个代理类并为它生成了一个 dll。我复制了 bin 目录下的 dll，但我无法从我的*.aspx.cs*文件中引用代理类。

我收到一个错误：

> CS0246：找不到类型或命名空间名称“TestSearchProxy”（您是否缺少 using 指令或程序集引用？）”

我尝试使用以下语法在 web.config 中添加程序集引用：

```
<add assembly="TestSearchProxy, Version=0.0.0.0, Culture=neutral" /> 
```

我无法获取 dll 的 PublicKeyToken，因为 dll 不是强类型的。

即使添加了程序集，我仍然会收到上述错误。我需要在 IIS 中直接对网站进行更改，而无法在 Visual Studio 中进行更改。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:05:59.093

有很多关于如何执行此操作的示例，包括在 MSDN 站点上。检查其中一些。

[http://www.c-sharpcorner.com/UploadFile/1d42da/web-service-basics/](http://www.c-sharpcorner.com/UploadFile/1d42da/web-service-basics/)

[http://msdn.microsoft.com/en-us/library/8wbhsy70(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/8wbhsy70(v=vs.80).aspx)

[http://msdn.microsoft.com/en-us/library/ms186209(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms186209(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:40:51.583

我终于能够解决这个问题。这是我经过大量搜索后发现的一个非常有用的链接。 [http://www.sitepoint.com/net-web-services-5-steps-3/](http://www.sitepoint.com/net-web-services-5-steps-3/)

这是我通过这个练习学到的关键点

如果直接在/bin目录下添加dll，则无需将程序集引用添加到web.config

我正在做的一个愚蠢的错误是我使用与代理类文件名相同的名称来声明该类。类名是TestSearch，代理文件名是TestSearchProxy。无论如何，我将此归咎于我的 Java 背景。:)

# drupal - Drupal 在主题的自定义页面中显示视图

> ID：13700127
> 
> 赞同：0
> 
> 时间：2012-12-04T09:54:14.817
> 
> 标签：drupal, drupal-6, drupal-views, drupal-theming, drupal-themes

我在 Drupal 中创建了一个新主题。我需要在自定义页面中显示一个视图，但我不想使用该区域。我需要我们将它添加到 tpl 页面的 php 代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:58:37.770

您可以`views_embed_view`在模板中使用。第一个参数是视图的集合名称，第二个参数是显示名称。

`<?php echo views_embed_view('myview', 'block'); ?>`

# php - 当我从表单 php 和 javascript 中获取值时，确认框不起作用

> ID：13700132
> 
> 赞同：1
> 
> 时间：2012-12-04T09:54:25.657
> 
> 标签：php, javascript

这对我来说似乎很奇怪，但是当我调用该函数时，我的弹出确认框会起作用，但是一旦我尝试从我的 php 代码中的表单中获取值，弹出框根本不起作用！

javascipt：

```
function ConfirmBox(){
    cert = cValForm.elements["cVal"].value;
    answer = confirm("Are you sure you want to delete " + cert + " and all of its courses?");
     if (answer){
         alert("Entry Deleted");
     }
     else{
         alert("No action taken");
     }             
} 
```

PHP：

```
echo "<form name='cValForm'>";
echo "<input type='hidden' name='cVal' value='TEST' /> ";
echo "<input type='button' onclick='ConfirmBox()' value='Delete'/>";
echo "</form>"; 
```

一旦我注释掉该行：

```
cert = cValForm.elements["cVal"].value; 
```

除了摆脱字符串中的证书值之外，弹出窗口也完全正常。我从表格中得到的价值是错误的吗？或者我在这里完全错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:00:17.473

我认为您的脚本中断了，因为它无法找到该`cVal`字段的值。

更改您的 HTML 以使用 ID 和名称：

```
<form name='cValForm'>
  <input type='hidden' id="cVal" name='cVal' value='TEST' />
  <input type='button' onclick='ConfirmBox()' value='Delete'/>
</form> 
```

然后首先检查 JavaScript，如果元素被选中：

```
function ConfirmBox(){
    var certField = document.getElementById( 'cVal' );
    var cert = certField ? certField.value : '';
    var answer = confirm("Are you sure you want to delete " + cert + " and all of its courses?");
     if (answer){
         alert("Entry Deleted");
     }
     else{
         alert("No action taken");
     }             
} 
```

此外，您应该将关键字添加`var`到所有变量声明中，以将这些变量的范围限制为本地函数。在您的情况下，这些变量将是全局的，这可能会产生一些副作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:00:58.063

试试这个

```
function ConfirmBox(){
    cValForm = document.forms[index];
    cert = cValForm.elements["cVal"].value;
    answer = confirm("Are you sure you want to delete " + cert + " and all of its courses?");
     if (answer){
         alert("Entry Deleted");
     }
     else{
         alert("No action taken");
     }             
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:02:55.000

试试下面的代码：

```
var cert = document.getElementsByName("cVal").value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:01:47.580

JavaScript 第 2 行更改为：

```
cert = document.getElementById('cVal'); 
```

PHP 第 2 行更改为：

```
echo "<input type='hidden' id='cVal' value='TEST' /> "; 
```

# c# - 异步客户端/服务器通信 C#

> ID：13700136
> 
> 赞同：0
> 
> 时间：2012-12-04T09:54:42.017
> 
> 标签：c#, client-server, asyncsocket

我正在学习客户端/服务器编程，并且正在制作一个异步客户端/服务器聊天应用程序。

我可以将客户端连接到服务器并发送一条消息，但是在将相同的消息（仅用于测试目的）发送回客户端时遇到问题。任何帮助表示赞赏...

客户代码

```
byte[] dataBuffer = new byte[10];
    public AsyncCallback callBack;
    public Socket clientSocket;
    IAsyncResult ar;
    Random rnd=new Random();

private void btnSend_Click(object sender, RoutedEventArgs e)
    {
        try
        {
            Object objData = txtMessage.Text;
            byte[] byData = Encoding.ASCII.GetBytes(objData.ToString());
            if (clientSocket != null)
            {
                clientSocket.Send(byData);
                lbxMessages.Items.Add(txtMessage.Text);
            }
            txtMessage.Text = "";
            btnSend.IsEnabled = false;
        }
        catch(SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    }

//SocketPacket CLASS
    public class SocketPacket
    {
        public Socket thisSocket;
        public byte[] dataBuffer = new byte[10];//test no, prevous [1]
    }

//METHODS
    private void WaitForData()
    {
        try
        {
            if (callBack == null)
            {
                callBack = new AsyncCallback(OnDataReceived);
            }
            SocketPacket sckPack = new SocketPacket();
            sckPack.thisSocket = clientSocket;
            ar = clientSocket.BeginReceive(sckPack.dataBuffer, 0, sckPack.dataBuffer.Length, SocketFlags.None, callBack, sckPack);

        }
        catch(SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    }

    public void OnDataReceived(IAsyncResult ar)
    {
        try
        {
            SocketPacket sckID = (SocketPacket)ar.AsyncState;
            int iRx = sckID.thisSocket.EndReceive(ar);
            char[] chars = new char[iRx + 1];
            Decoder d = Encoding.UTF8.GetDecoder();
            int charLen = d.GetChars(sckID.dataBuffer, 0, iRx, chars, 0);
            String szData = new String(chars);
            this.Dispatcher.Invoke((Action)(() =>
            {
                lbxMessages.Items.Add(txtMessage.Text + szData);
            }));
            WaitForData();
        }
        catch (ObjectDisposedException)
        {
            Debugger.Log(0, "1", "\n OnDataRecieved: Socket has been closed\n");
        }
        catch(SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    } 
```

服务器代码

```
private void OnClientConnect(IAsyncResult asyncResult)
    {
        try
        {
            workerSocket[clientCount] = listenSocket.EndAccept(asyncResult);
            WaitForData(workerSocket[clientCount]);
            ++clientCount;

            if (clientCount<4)//allow max 3 clients
            {

                String str = String.Format("Client # {0} connected", clientCount);                   

                this.Dispatcher.Invoke((Action)(() =>
                {
                    lbxMessages.Items.Add(str);
                    lblConnectionStatus.Content =clientCount + " Connected";
                }));

                listenSocket.BeginAccept(OnClientConnect, null);
            }
        }
        catch (ObjectDisposedException)
        {
            System.Diagnostics.Debugger.Log(0, "1", "\n OnClientConnection: Socket has been closed\n");
        }
        catch (SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    }

public class SocketPacket
    {
        public Socket currentSocket;
        public byte[] dataBuffer = new byte[50];//allowing the 50 digist to be sent at once
    }

    private void WaitForData(Socket socket)
    {
        try
        {
            if (workerCallBack == null)
            {
                workerCallBack = OnDataReceived;
            }
            SocketPacket sckPack = new SocketPacket();
            sckPack.currentSocket = socket;
            socket.BeginReceive(sckPack.dataBuffer, 0, sckPack.dataBuffer.Length, SocketFlags.None, workerCallBack, sckPack);
        }
        catch(SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    }

    public void OnDataReceived(IAsyncResult asyncResult)
    {
        try
        {
            SocketPacket socketData = (SocketPacket)asyncResult.AsyncState;
            int iRx = 0;
            iRx = socketData.currentSocket.EndReceive(asyncResult);
            char[] chars = new char[iRx];
            Decoder decoder = Encoding.UTF8.GetDecoder();
            int charLen = decoder.GetChars(socketData.dataBuffer, 0, iRx, chars, 0);
            String receivedData = new String(chars);

            this.Dispatcher.Invoke(DispatcherPriority.Normal, (Action)(() => lbxMessages.Items.Add(receivedData)));

            //Does not work - does not send same message back to client
            //byte[] byData = Encoding.ASCII.GetBytes(receivedData);
            //if (listenSocket != null)
            //{
            //    listenSocket.Send(byData);
            //}

            WaitForData(socketData.currentSocket);

        }
        catch (ObjectDisposedException)
        {
            System.Diagnostics.Debugger.Log(0, "1", "\n OnDataRecieved: Socket has been closed\n");
        }
        catch (SocketException se)
        {
            MessageBox.Show(se.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:49:45.330

您应该使用相同的套接字来发送和接收数据。您在 socketData.currentSocket 上调用 EndReceive，因此您还应该调用 socketData.currentSocket.Send。

在服务器端有两个套接字。一个用于“收听”，您在其上调用accept。客户端连接后，accept 调用为该客户端连接创建一个套接字，然后您可以使用该套接字为该特定客户端发送和接收数据。

您不使用“侦听”套接字来发送/接收数据。它没有连接到特定的连接。它仅用作接受新客户端连接的一种方式。

请参阅[http://msdn.microsoft.com/en-us/library/fx6588te.aspx](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)

# java - 通过 main 中的内部类对象访问外部类变量

> ID：13700138
> 
> 赞同：3
> 
> 时间：2012-12-04T09:54:45.713
> 
> 标签：java, nested-class

```
class Host {
    int x=2;

    class Helper {
        int x = 7;
    }

    public static void main(String[] args){
        Host ho = new Host();
        Helper he = ho.new Helper();
        System.out.println(ho.x);
        System.out.println(he.x);

    }
} 
```

所以在这里我得到了预期的输出

```
2
7 
```

现在我想问一下，比如说，我想访问`ho`'s `x`from `he`。

即我想要在这里`2`通过 Helper 对象打印我的东西`he`：

```
System.out.println(???); 
```

我知道这样的东西没有用，我只是想澄清一下我对嵌套类的概念。我认为这应该是可能的，因为 Helper 对象`he`有点“绑定”到 Host 对象`ho`。因为`he`没有`ho`. 从 Helper 类内部我可以做到`System.out.println(Host.this.x);`并且它有效。我无法弄清楚如何从 main 内部进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:05:54.547

回到过去，在旧版本的 Java 中，您使用`this$0`的是访问外部实例的方式，而不是`Host.this`. 规范已更改，但该字段仍可通过反射获得：

```
Field this$0 = he.getClass().getDeclaredField("this$0");
Host host = (Host) this$0.get(he);
System.out.println(host.x); 
```

我不知道任何其他方式（除了修改`Host`类以添加`getX`或`getHost`方法）。

现在，为什么没有反射就不能访问？我可以看到两个可能的原因：

*   他们忘记了
*   这种来自实例外部的访问破坏了封装

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:24:04.997

正如其他答案已经指出的那样，您不能。原因在于[JLS #15.8.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.3)`this`中定义的方式

> 关键字 this 只能用在实例方法、实例初始化器或构造器的主体中，或者在类的实例变量的初始化器中。**如果它出现在其他任何地方，则会发生编译时错误。**

而且由于您只能使用`this`(cf [JLS #15.8.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.8.4) ) 访问封闭实例，因此只能在内部类中完成：

> `C.this`如果当前类不是 C 类或 C 本身的内部类，则[调用] 是编译时错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:59:32.467

基本的 Java 概念，主机类可以访问内部类变量`x`，反之亦然。你可以像@Nikita Beloglazov 所说的那样做。但是直接使用变量，不可能

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:05:17.033

您可以在返回外部类的内部类中创建方法：

```
class Helper {
    int x = 7;

    public Host outer() {
        return Host.this;
    }
}

// In main;
System.out.println(he.outer().x); 
```

它类似于访问`x`内部`Helper` ，但更通用。

# javascript - 动态 IFRAME 内容 - 如何访问该 IFRAME？

> ID：13700139
> 
> 赞同：0
> 
> 时间：2012-12-04T09:54:45.467
> 
> 标签：javascript

我正在将内容动态加载到`<iframe>`

```
<iframe style='border:none;' id='abc' src="http://localhost:39217/Home/GetContent/some_dynamic_code"></iframe> 
```

成功响应后，该 iframe 中就是该内容

```
<html>
   <head>
      <script type="text/javascript">
          function onPageLoad() {
              if (document.readyState === "complete") {
                  var cont = document.getElementById("abc");
                  alert(cont);    
              }
          }
      </script>
   </head>

   <body onload='onPageLoad()'>
      <a target="_blank" href='http://lorem'>
        <img class='abc' style='max-width:300px; max-height: 38px;' alt='' src='/Images/image.png' />
      </a>
   </body>
</html> 
```

这`iframe`将在我的网站之外（由用户）使用，但我希望能够更改`<img>` `src`. 但是，我还需要在更改图像`width/height`后`iframe`更改。那么，我怎样才能`iframe`使用 JS 访问它呢？`alerts`我上面的代码`null`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:16:27.480

我在这里为你做了一个例子：http: [//jsfiddle.net/KRaWU/2/](http://jsfiddle.net/KRaWU/2/)

我使用 jQuery 来实现这一点，我建议你也这样做。

```
// this will find a button within an iframe
var obj = $('iframe').contents().find('.actionButton').find('input[type="submit"]');
// this will change the value of the button, and you can see that the text is changed.
obj.attr('value', 'LOG ME IN'); 
```

你可以类比找到一个img并改变它的src。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:03:27.703

iFrame 和它们的父母之间的 JS 交互是我所知道的不可能或至少很麻烦的事情。我知道某处有一个属性`window.frames`，甚至可能`frame.parent`但总的来说，像这样的 JS 交互是不可能的。我认为您应该考虑另一种类型的解决方案（如果可以满足您的需求，则可能是 ajaxcall）。

# c++ - pthread_create 成功后线程什么也不做

> ID：13700143
> 
> 赞同：0
> 
> 时间：2012-12-04T09:55:07.420
> 
> 标签：c++, pthreads

在我的项目中，我想创建一个线程，它什么都不做，只是将一些字符串附加到文本文件以测试它是否有效。我在 Ubuntu 12.04 上使用 IDE Eclipse Juno。我的部分代码是：

```
pthread_t processThread;
threadData * thData = new threadData;
int t = pthread_create(&processThread, NULL, 
                       BufferedData::processData, (void *)thData); 
```

其中 threadData 是带有线程参数的结构。BufferedData 类的线程启动成员函数，因此 processData 方法是静态的。它的声明是：

```
static void * processData(void * arg); 
```

在这部分代码之后，我检查了 t 值 - pthread_create 的返回值。每次它都等于 0，所以我认为线程的启动是成功的。但它仍然什么都不做 - 它不会将字符串附加到文件中。函数 processData 做什么并不重要：将字符串附加到文件，抛出异常，写入 cout 或其他东西。它每次都什么都不做。

我不是经验丰富的 C++ 程序员，所以我不知道要检查、编辑或做什么来解决问题。IDE没有给我任何错误的回应，它面对一切都很好。

感谢您的回答。

编辑：processData 函数的代码：

```
void * BufferedData::processData(void * arg) {
HelperFunctions h;
h.appendToFile("log", "test");
    return 0;
} 
```

appendToFile 方法将字符串“test”写入文件“log”。这在其他项目中经过测试并且有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-03T02:57:27.030

现在你的线程将在一段时间内完成（不是无限的），所以这可以帮助你：

```
int pthread_join(pthread_t thread, void **status); 
```

在下面`code`，当您的线程创建时，`pthread_join`函数等待您的线程返回。在这种状态下使用`pthread_exit()`代替`return`关键字。

试试这个`pthread_join()`：

```
void *ret;
pthread_t processThread;
threadData * thData = new threadData;
int t = pthread_create(&processThread, NULL, 
                       BufferedData::processData, (void *)thData);

if (pthread_join(processThread, &ret) != 0) {
    perror("pthread_create() error");
    exit(3);
  }

   delete ret;      // dont forget to delete ret (avoiding of memory leak) 
```

并使用`pthread_exit()`：

```
void * BufferedData::processData(void * arg) {
int *r = new int(10);
HelperFunctions h;
h.appendToFile("log", "test");
    pthread_exit(static_cast<void*>(a));
} 
```

## 一般说明

允许调用`thread`等待目标的结束`thread`。

`pthread_t`是用于唯一标识线程的数据类型。它`pthread_create()`由应用程序在需要线程标识符的函数调用中返回和使用。

status 包含一个指针，指向由结束线程传递的状态参数作为`pthread_exit()`. 如果结束线程以返回终止，则 status 包含指向该`return`值的指针。如果线程被取消，状态可以设置为`-1`。

## 返回值

如果成功，则`pthread_join()`返回`0`。如果不成功，则`pthread_join()`返回`-1`并设置`errno`为以下值之一：

错误`Code`：

```
Description :

EDEADLK
    A deadlock has been detected. This can occur if the target is directly or indirectly joined to the current thread.
EINVAL
    The value specified by thread is not valid.
ESRCH
    The value specified by thread does not refer to an undetached thread. 
```

笔记：

返回成功时`pthread_join()`，目标线程已被分离。多个线程不能`pthread_join()`用来等待同一个目标线程结束。如果一个`pthread_join()`线程在另一个线程成功地`pthread_join()`为同一个目标线程发出之后再发出一个目标线程，那么第二个线程`pthread_join()`将不成功。

如果线程调用`pthread_join()`被取消，目标线程不会被分离

# android - Android：使用 StartActivityFor 结果

> ID：13700145
> 
> 赞同：0
> 
> 时间：2012-12-04T09:55:09.027
> 
> 标签：android, android-intent

在我的应用程序中，我有一个隐藏图标的标题，当我单击列表视图时，我有一个带有列表视图的适配器我使用侦听器进入登录屏幕，当登录成功时应该返回列表视图（适配器）并且图标应该得到在标题上可见。我发送的意图如下： http: [//pastebin.com/4SKnyjVX](http://pastebin.com/4SKnyjVX)

下面是onclick登录按钮

```
public void onClick(View v) {

    String password = etPassword.getText().toString();

    if(password.equals("guest")){
        Intent returnIntent = new Intent();
        returnIntent.putExtra("result",result);
        setResult(1,returnIntent);     
        finish();
    } else {
        //----
    }

    finish();                  
} 
```

如何使用 onActivityResult 设置标志并在单击侦听器中使用此标志，并使用它使图标可见。任何建议表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:15:29.603

你必须覆盖`onActivityResult(int requestCode, int resultCode, Intent resultIntent)`：

*   `requestCode` is the integer that you originally passed as the second parameter to `startActivityForResult()`. You should check this matches your original request, in case you have multiple requests you have to differentiate between.
*   `resultCode` and `resultIntent` is the integer and intent you pass to `setResult()` in your code above.

So your method should look something like:

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent resultIntent) {
    if (requestCode == 1) { // original request
        if (resultCode == 1) { // success
            String result = resultIntent.getStringExtra("result");
            // Login successful, update your model and call adapter.notifyDataSetChanged() or something
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:10:19.423

在您之前的活动中，您在标题中有带有隐藏图标的列表视图，覆盖函数 onActivityResult() 类似这样 -

```
protected void onActivityResult (int requestCode, int resultCode, Intent data) {
    boolean success = data.getBooleanExtra("result", false);
    if(success) {
        hiddenIcon.setVisibility(View.VISIBLE);
    }
    else {
        showDialog("Error");
   }
} 
```

我已经用这种方式改变了你的 onClick

```
public void onClick(View v) {

        String password = etPassword.getText().toString();
        Intent returnIntent = new Intent();
        if(password.equals("guest")){
            returnIntent.putExtra("result", true);
            setResult(RESULT_OK, returnIntent);     
        } 
        else {
            returnIntent.putExtra("result", false);
            setResult(RESULT_OK, returnIntent);
        }

        finish();                  
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:02:12.573

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==RESULT_OK){
        Bundle basket=data.getExtras();
        String s=basket.getString("result");
        //Your Code Here
    }
} 
```

这会有所帮助

# asp.net-mvc - 在 ASP.NET MVC 2 中创建 List 类型的视图

> ID：13700146
> 
> 赞同：0
> 
> 时间：2012-12-04T09:55:18.523
> 
> 标签：asp.net-mvc, asp.net-mvc-2

将近 2 年之后，我正在练习 MVC 2（我将在不久后做 MVC 4），只是为了在我跳到 MVC 4 之前进行修改。

我正在创建一个名为**Category**的数据对象的强类型视图。我想创建一个列表类型的视图，即显示**类别**表中所有记录的视图。

我记得曾经有每种视图类型的 T4 模板—— **Index**、**List**、**Create**等，您可以从中进行选择。

但我找不到他们。当我创建视图时，**添加视图**对话框显示了一个禁用的输入字段**View content**。

![找不到要自动生成的不同类型的视图](../Images/1bacd78426218222f0dac6fd5df092ce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:01:32.493

我认为您不能让 Visual Studio 为您生成列表。毕竟，您需要一些查找逻辑来获取要在列表中显示的所有对象。

您可能想查看[此博客文章](http://www.iwantmymvc.com/populate-drop-down-list-mvc-3 "从 ASP.NET MVC 3 应用程序的视图模型中的数据填充 html 选择列表")，了解将对象列表传递到下拉列表的好方法。但是，您需要自己提供这些对象。

# android - Android phonegap 代码从 sdcard 获取某个目录的完整路径？

> ID：13700147
> 
> 赞同：0
> 
> 时间：2012-12-04T09:55:20.240
> 
> 标签：android

如何获取 android sdcard 中文件夹的完整路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:06:53.417

使用以下字符串获取文件夹的完整路径：

```
String path=Environment.getExternalStorageDirectory()
                                .toString() + File.separator +Folder_Name 
```

# objective-c - 关于在objective-c中声明常量

> ID：13700148
> 
> 赞同：2
> 
> 时间：2012-12-04T09:55:21.570
> 
> 标签：objective-c

如果你不考虑#define，在objective-c项目中声明常量有两种臭名昭著的方法：

```
// Util.h
extern NSString * const MyConstant;

// Util.m
NSString * const MyConstant = @"value"; 
```

或其他直接在头文件中

```
// Util.h
static NSString *const MyConstant = @"value"; 
```

现在，有两个问题：

1）两种方法都可以，第二种方法很方便，因为我只有一个地方可以编辑值。然而，正如我从 Apple .h 文件中看到的那样，第一种方法总是首选，我想知道静态方法是否有任何缺点。

2）查看 Apple 文档，我们经常会遇到很长的常量名称，例如：**NSTextInputContextKeyboardSelectionDidChangeNotification**。如果您使用这样的长常量名称，您通常会使用什么约定来分配值。如果我想使用描述性的东西，我可以使用**@"nsTextInputContextKeyboardSelectionDidChangeNotification"**，但听起来有点奇怪。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:13:39.590

我不会向你解释这两种常量声明的所有细节——简而言之：

第一个将常量声明与常量定义分开。头文件只包含声明。它还方便地隐藏了常量的实际值。

第二个问题更大——头文件包含常量的声明和定义。这意味着当您包含标头时，将再次创建常量。我认为从多个文件中包含这将无法正常工作。

第二个问题 - 长常量名没问题。您的示例有点极端，但没有任何问题。

**编辑**：添加有关`static NSString* const`in 标头的更多信息。让我们有一个标题`A.h`：

```
//A.h
static NSString *const MyConstant = @"value";
```

和包含它的文件`A.m`

```
//A.m
#import "A.h"

printA() {
   NSLog(@"A.h Constant: %@", MyConstant);
}
```

首先请注意，在编译之前，预处理器会删除标头。这意味着在编译之前不会有任何`A.h`文件，并且`A.m`看起来像这样：

```
//A.m
static NSString *const MyConstant = @"value";

printA() {
   NSLog(@"A.h Constant: %@", MyConstant);
}
```

让我们创建另一个具有完全相同内容的常量头`B.h`和实现文件：`B.m`

```
//B.h
static NSString *const MyConstant = @"value2";
```

```
//B.m
#import "B.h"

printB() {
   NSLog(@"B.h Constant: %@", MyConstant);
}
```

请注意，该常量被声明了两次，具有相同的名称和不同的值。这是可能的，因为`static`该常量对于包含它的文件来说是私有的。如果你删除`static`，你会得到一个编译错误，因为编译器会找到两个同名的公共全局常量。

从理论上讲，它可以`static NSString* const`在头文件中使用，并且一切都会正常工作，但正如您所见，它并不能完全按照您的意愿进行，并且可能是难以发现的错误的来源。这就是为什么你应该`static`只使用来自实现文件的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:24:44.433

只是补充一下-您展示的第二种方式没有多大意义。

如果您要在这样的一个地方声明和定义一个常量，通常在 .m 文件而不是 .h 文件中完成。

对于只在类本身中使用而不公开的常量，您可以这样做。

# android - 如何将yuv420sp数据转为jpeg数据？

> ID：13700150
> 
> 赞同：0
> 
> 时间：2012-12-04T09:55:27.167
> 
> 标签：android

相机中的预览数据是 yuv420sp 样式数据。但是datacallback中传递的数据是jpeg数据。如何在datacallback之前将yuv420sp数据转换为jpeg数据？

在 JAVA 层转换非常困难。那你还有什么方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:07:22.293

无需转换。Camera.PictureCallBack 返回一个 JPEG。请参阅“http://developer.android.com/reference/android/hardware/Camera.html#takePicture(android.hardware.Camera.ShutterCallback, android.hardware.Camera.PictureCallback, android.hardware.Camera.PictureCallback, android.硬件.Camera.PictureCallback)"

# google-app-engine - gwt typerror（无法调用 null 的方法“X”）

> ID：13700152
> 
> 赞同：2
> 
> 时间：2012-12-04T09:55:37.403
> 
> 标签：google-app-engine, gwt

我有一个非常简单的 GWT 应用程序，其中包含一个用于数据库操作的简单 rpc 回调。它所做的只是从数据库中检索一个字符串。这在本地运行良好。它通过回调检索字符串并将其显示在屏幕上。

但是当我将它部署到 appengine 时，它​​不起作用并给了我错误' gwt typerror ( cannot call method 'X' of null ) '。我尝试过调试、记录等，但它什么也没给我，我非常迷茫。

```
 EntityService.Util.getInstance().getEntityName(
                Function.getHash("john"), Function.getHash("name"),
                Function.getHash("english"), new AsyncCallback<String>() {

                    @Override
                    public void onSuccess(String result) {
                        l.setText(result);
                    }

                    @Override
                    public void onFailure(Throwable caught) {
                        l.setText(caught.getMessage());
                    }
                }); 
```

你们有任何线索可能会发生什么，或者为什么我在 appengine 上收到此错误？我试图只连接通过回调部署的 appengine 上的数据库，这工作正常。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:13:35.697

如果您在进入 appengine 之前尝试使用以下任一解决方案，则调试此类错误会更容易 -

`pretty`解决方案 1 -只要您不进入 prod 模式，就在模式下编译您的应用程序。

Pretty 模式可以让您更轻松地在 Web 模式下进行调试。异常是可读的。

解决方案 2 - 集成`Webmode Exception handling`- [http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions](http://code.google.com/p/google-web-toolkit/wiki/WebModeExceptions)

这两种解决方案都会增加一些运行时性能损失，并且应该在开发周期中使用。一旦你完善了测试应用程序关闭 webmode 异常和漂亮的编译。

# java - 按位置排序 ArrayList

> ID：13700159
> 
> 赞同：0
> 
> 时间：2012-12-04T09:56:05.487
> 
> 标签：java, arraylist

我有一个播放器的 ArrayList。该数组当前在第一个登录的玩家中排序，到最近的一个。

但是，我想从玩家位置从高到低对 ArrayList 进行排序。位置存储在 Player 类中，由

```
player.getX(); 
```

我想我应该有一个循环，每个项目都被添加到一个新的 ArrayList 中，但我不太清楚如何实际实现它。

我怎样才能做到这一点？

环形：

```
for (int i = 0; i < otherPlayers.size(); i++) {
    Player currentPlayer = otherPlayers.get(i);
} 
```

编辑：添加循环示例

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T09:58:53.260

您可以让 Player 实现`Comparable`和使用`Collections.sort(players)`，也可以直接创建这样的比较器

```
 Collections.sort(players, new Comparator<Player>() {
        public int compare(Player o1, Player o2) {
            return o2.getX().compareTo(o1.getX());
        }
    }); 
```

假设`player.getX()`返回一个`Integer`

**编辑**

假设您有自己的`List<Player>`名字`otherPlayers`，如果您想直接对其进行排序，而无需自己编写循环和排序算法，则可以依靠Java内置方法`Collections.sort()`对其进行排序。但这意味着要么你的类`Person`实现了`Comparable`接口，要么你可以像上面那样传递一个实例`Comparator`作为方法的第二个参数`Collections.sort()`。

该`Comparator.compare()`方法接受两个对象并返回一个整数，表示第一个参数是否小于第二个参数，等于或大于。这就是排序算法知道如何对列表中的元素进行排序的方式。因此，通过创建一个`Comparator`比较`Player.getX()`两个`Player`实例的结果（列表的元素）的实例，您可以按照您的要求对位置标准的原始列表进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:00:19.657

用 对其进行排序`Collections#sort`。

```
List<Player> players = new ArrayList<Player>();
Collections.sort(players, new Comparator<Player>(){
                    public int compare(Player p1, Player p2){
                      return p1.getX().compareTo(p2.getX());
                    }
                 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:57:42.477

玩家应该实现`Comparable<Player>`

然后你必须在 Player 类中实现一个 compareTo 方法。在使用排序之后`Collections.sort(listOfPlayers);`

[http://www.vogella.com/blog/2009/08/04/collections-sort-java/](http://www.vogella.com/blog/2009/08/04/collections-sort-java/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T09:59:32.930

让 Player 实现

```
Comparable 
```

然后实施

```
compareTo() 
```

方法并按位置进行比较。然后你可以通过以下方式进行排序

```
Collections.sort(yourList); 
```

或者

```
Collections.sort(yourList, Collections.reverseOrder()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:02:24.863

尝试`Collections.sort(List, Comparator)`

# c# - C# 中的 BACnet 协议栈

> ID：13700162
> 
> 赞同：0
> 
> 时间：2012-12-04T09:56:22.063
> 
> 标签：c#

我正在编写一个定制的 C# 应用程序来与 BACnet 设备进行通信。是否有任何用 C# 编写的 BACnet 协议栈，我可以下载源代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:08:34.027

您可以使用源代码尝试 bacnet 堆栈：

[http://bacsharp.sourceforge.net/](http://bacsharp.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-09T01:12:25.120

并不是说我已经尝试过了，但现在终于有了一个 NuGet 包，这可能值得评估。

（但 BacSharp 是一个好的项目/配置的外壳/种子。）

我还推荐（高级和免费）VTS 工具（- YABE 是一个更高级的可视化视图的明智工具）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-08-23T14:36:56.113

对于匿名结帐尝试：

svn 结帐[http://svn.code.sf.net/p/bacnet/code/tags/bacnet-stack-0-8.2/](http://svn.code.sf.net/p/bacnet/code/tags/bacnet-stack-0-8.2/)

这对我有用。0.8.2 是截至 2014 年 8 月 23 日的最新稳定版本。

# html - 位置：固定图像重叠div

> ID：13700167
> 
> 赞同：1
> 
> 时间：2012-12-04T09:56:37.943
> 
> 标签：html, css, z-index

好的，我正在尝试获取位置固定以隐藏在特定 DIV 后面的图像。据我了解，这应该可以使用`z-index`. 但是，我已经尝试了所有方法，但无法使其正常工作。

网址：[http ://www.aadesigns.net/who-we-are/testimonials/](http://www.aadesigns.net/who-we-are/testimonials/)

我遇到问题的图像是快乐的女人在庆祝。一切都很好，直到它到达页面底部，你会看到她的重叠 DIV。

我已经在萤火虫中待了大约 1.5 个小时，试图通过操纵 z-index 来弄清楚如何做到这一点......

任何帮助将不胜感激。

编辑*更具体地说，我需要图像在页脚和 footer_bottom DIV 后面消失

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:00:21.107

添加`z-index:100`到 img 内联样式。最好将此内联样式转换为如下所示的类

```
.testimonials img{
    position:fixed;
    left:50%;
     margin-left:-600px;
    bottom:0; 
    z-index:100
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:03:01.433

适用`z-index: 100;`于`img`

```
<img src="http://www.aadesigns.net/wp-content/uploads/2012/09/happycustomer1.png" alt="" title="happycustomer" style="position:fixed;left:50%;margin-left:-600px;bottom:0;z-index: 100;"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T09:59:01.200

定义你的`#footer z-index:-1;` **添加这个 css**

```
#footer{
z-index:-1;
} 
```

## --------

**或第二个选项**

```
.testimonials img{
z-index:1;
} 
```

# search - solr 按名字和姓氏搜索

> ID：13700172
> 
> 赞同：1
> 
> 时间：2012-12-04T09:56:44.777
> 
> 标签：search, solr

我有关于用户存储信息的文本字段，包括名字和姓氏。例如：约翰·贝尔。当我搜索“John”或“Bell”或“John Bell”时，它可以正常工作。
但是当我通过“Bell John”搜索时 - 搜索结果为 0。是否有可能解决这个问题？架构配置：

```
<field name="content" type="content_ws" indexed="true" stored="true" />

<fieldType name="content_ws" class="solr.TextField" positionIncrementGap="100">
      <analyzer type="query">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
      </analyzer>
      <analyzer type="index">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
      </analyzer>
    </fieldType> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:19:33.947

通过使用[DisMax](http://lucidworks.lucidimagination.com/display/solr/The+DisMax+Query+Parser)查询解析器并将[qs](http://lucidworks.lucidimagination.com/display/solr/The+DisMax+Query+Parser#TheDisMaxQueryParser-The%7B%7Bqs%7D%7D%28QueryPhraseSlop%29Parameter)参数设置为大于 2 的值将帮助您以相反的顺序查找查询。

查询应该是这样的：

```
http://localhost:8993/solr/select?defType=dismax&q="Bell John"&qs=2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T18:19:43.357

使用标准查询处理程序，您可以使用邻近参数创建查询。

例如`q=content:"Bell John"~2`，其中 2 是斜率或分开的令牌数。

当您搜索 John bell 时，单词就在位置上，因此零的接近斜率起作用。创建与搜索相同的单词的位置没有变化。

但是，当查询是`Bell John`创建单词的跳数是2

例如

```
Bell John - Query data  
Bell - One hop would bring Bell and John at the same position  
John  
John Bell - Second hop would recreate the indexed term. 
```

因此，对于受尊敬的查询，在这种情况下，斜率应至少为 2。

# objective-c - 如何使用 Objective-C 文字检查 NSDictionary 的键

> ID：13700174
> 
> 赞同：2
> 
> 时间：2012-12-04T09:56:50.230
> 
> 标签：objective-c, nsdictionary

解析 JSON时**，我得到 NSDictionary**并一次通过一个（已知）键。在调试错误时，我开始想：我应该如何处理**丢失的键与值为零的问题？**

早些时候我会使用这样的东西来检查密钥是否存在：

```
 if ([dict objectForKey:@"public"])
        newItem.isPublic = [dict objectForKey:@"public"] ? YES : NO; 
```

但现在我使用 Objective-C 对象文字编写了这个。刚开始想，这个检查实际上做了什么：

```
 if (dict[@"public"])
        newItem.isPublic = dict[@"public"] ? @YES : @NO; 
```

我应该检查 nil 或 [NSNull null] 还是有一些更简单、更明显的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T10:05:49.817

新的文字语法在这里没有区别。代码被`dict[@"public"]`翻译成`[dict objectForKeyedSubscript:@"public"]`，它被记录为与`valueForKey:`，它反过来调用`objectForKey:`。

至于条件测试，写法`if ([dict objectForKey:@"foo"])`同`if ([dict objectForKey:@"foo"] != nil)`。换句话说，`[NSNull null]`这里算为真，所以如果你想要不同的行为，你必须明确检查。零不能直接存储在字典中，它必须包装在 中`NSNumber`，再次被视为真值。

另请参阅[Objective-C Literals 规范](http://clang.llvm.org/docs/ObjectiveCLiterals.html)和[NSDictionary 类参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)。

# dependency-injection - 温莎城堡使用相同的接口解决多个依赖项

> ID：13700177
> 
> 赞同：1
> 
> 时间：2012-12-04T09:56:58.700
> 
> 标签：dependency-injection, castle-windsor

问题：

类构造函数如下：

```
public class ParsingRulesProvider : IParsingRulesProvider{
    public ParsingRulesProvider(List<IParsingRule> rules){}
} 
```

我们有两个规则：

```
public class ARule : IParsingRule{
    public ARule(IASomeObject someObject){}
}

public class BRule : IParsingRule{
    public BRule(IBSomeObject someObject){}
} 
```

问题：

代码注册方法：

1.  `ParsingRulesProvider`与规则 A 和 B？
2.  `ParsingRulesProvider`与所有实现IParsingRule 的对象？
3.  `ARule`和`BRule`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:21:57.650

AD1)

```
container.Kernel.Resolver.AddSubResolver(new ListResolver(container.Kernel, true)); 
```

AD2)

```
container.Register(Component
    .For<IParsingRulesProvider>()
    .ImplementedBy<ParsingRulesProvider>()); 
```

AD3)

```
 container.Register(Component
            .For<IParsingRule>()
            .ImplementedBy<ARule>()
            .LifeStyle.Singleton
            .Named("ARule"));

    container.Register(Component
        .For<IParsingRule>()
        .ImplementedBy<BRule>()
        .LifeStyle.Singleton
        .Named("BRule")); 
```

# html - IE7中的偏移量下拉菜单

> ID：13700178
> 
> 赞同：0
> 
> 时间：2012-12-04T09:57:01.697
> 
> 标签：html, css, drop-down-menu, internet-explorer-7

我在 IE7 的下拉菜单中遇到了一些问题。它在所有其他浏览器中都可以正常工作，但由于某种原因在 IE7 中出现偏移。有任何想法吗？请参阅下面的菜单代码和 Firebug 计算的 CSS 以及演示问题的图像。

正确的菜单

![正确的菜单](../Images/08181d8df6b021145feeb587c394dfe0.png)

偏移菜单

![偏移菜单](../Images/4c0a88e8edffe04c4f9378d0bc290e67.png)

HTML

```
<ul id="coolMenu">
 <li class="">
    <a class="donate" href="#">
        User Options
        <span class="downarrowclass"></span>
    </a>

    <ul id="style_me" style="display: none;">
        <li>
            <a href="#">Candidate Panel</a>
        </li>
        <li>
            <a href="#">Access details</a>
        </li>
        <li>
            <a href="#">Personal details</a>
        </li>
        <li>
            <a href="#">History</a>
        </li>
        <li>
            <a href="#">Withdraw application</a>
        </li>
        <li>
            <a href="#">Jobs by e-mail</a>
        </li>
        <li>
            <a href="#">Log off</a>
        </li>
    </ul>
</li>
</ul> 
```

CSS

```
#coolMenu,
#coolMenu ul {
   list-style: none;
}
#coolMenu {
   float: right;
}
#coolMenu > li {
   /*float: left;*/
}
#coolMenu li a {
    display: block;
    text-decoration: none;
color: #ffffff;
width: 100px;
text-align: center;
}
#coolMenu ul {
    position: absolute;
    display: none;
    z-index: 999;
}

#coolMenu li:hover ul {
display: block;
}

.dropdown a li{
color: #124162 !important;
}

#coolMenu li #style_me  li  a{
color: #124162 !important;
width: 140px !important;
}

#coolMenu li #style_me  li  a:hover {
color: #ffffff !important;
} 
```

如果有帮助，IE 开发人员选项卡中似乎存在某种形式的偏移： ![IE 开发人员选项卡](../Images/6bdbd94955bca61c46458e0627f62c8e.png)

此外，这里是 iedeveloper 中用于 ul coolmenu 的计算代码。 ![即开发者](../Images/9077237811de1499bdb4bae127d79ff7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:40:44.067

这可以通过使用以下代码专门针对 IE7 来解决：

```
Html.ie7 #coolMenu ul {
top: 59px;
left: 71px;
} 
```

# mysql - SQL 连接并重复结果？

> ID：13700183
> 
> 赞同：2
> 
> 时间：2012-12-04T09:57:15.540
> 
> 标签：mysql, sql

我有 3 张桌子：

```
1)participant
  ***********
  +id_participant
  +id_poste
  +name
  +email

2) profile_formaion
  ****************
  +id_poste
  +id_formation

3) formation
  *********
  +id_formation
  +lable 
```

`EXAMPLE:`

数据：参与者

```
1 | 2 | user1 | user1@mail.com 
```

数据：profile_formation

```
2 | 3
2 | 4 
```

数据：编队

```
1 |lable1
2 |lable2
3 |lable3
4 |lable4 
```

任何人都可以帮助我如何使用 sql statement(join) 来获得结果：

数据：结果

```
1 | 2 | user1 | user1@mail.com | label3
1 | 2 | user1 | user1@mail.com | label4 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:00:48.863

```
SELECT 
    participant.id_participant,
    participant.id_poste,
    participant.name,
    participant.email,
    formation.lable 
FROM participant
INNER JOIN profile_formaion ON
    profile_formaion.id_poste = participant.id_poste 
INNER JOIN formation ON
    formation.id_formation = profile_formaion.id_formation 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:06:05.893

选择页。`id_participant`，页。`id_poste`，页。`name`，页。`email`，F。`lable`FROM 参与者 p 加入 profile_formaion pf on p.id_poste = pf.id_poste 加入形成 f on pf.id_formation = f.id_formation

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:02:36.457

这应该这样做

```
select p.*, f.lable
from participant p
join profile_formaion pf on pf.id_poste = p.id_poste
join formation f on f.id_formation = pf.id_formation 
```

# javascript - html5游戏中的音效

> ID：13700189
> 
> 赞同：2
> 
> 时间：2012-12-04T09:57:27.407
> 
> 标签：javascript, html, html5-audio

我试图在每次点击时在游戏中播放音效，但有时声音会播放而其他声音不会！

我正在使用下一个代码：

```
<script>

var hitSound = new Audio();

function playEffectSound()
{
    hitSound = document.getElementById('effects'); 
    hitSound.loop =  false; 
    hitSound.currentTime = 0; 
    hitSound.play();    
}

</script>
    <audio id="effects" hidden>
    <source src="sound/mp3/effect.mp3" type="audio/mpeg">
    <source src="sound/wav/effect.wav" type="audio/wav">
</audio> 
```

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:58:29.643

您可以使用以下代码播放音频

```
function playEffectSound(sound) {
    //Does the sound already exist?
    if (document.getElementById(sound) != null) {
        document.getElementById(sound).play();
        return;
    }

    //Create elements
    var audioElement = document.createElement("audio");
    var sourceElement = document.createElement("source");

    sourceElement.src = sound + ".mp3";
    sourceElement.type = "audio/mpeg";

    var sourceElementWave = document.createElement("source");

    sourceElementWave.src = sound + ".wav";
    sourceElementWave.type = "audio/wav";

    //Add sources to audio
    document.body.appendChild(sourceElementWave);
    document.body.appendChild(audioElement);

    audioElement.setAttribute("id", sound);
    audioElement.appendChild(sourceElement);
    audioElement.loop = false;
    audioElement.currentTime = 0;
    audioElement.play();
} 
```

你可以这样使用它： playEffectSound("sounds/effect"); 它会播放声音/效果.mp3 或声音/效果.wav

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:15:47.737

每当您使用音频标签时，请尝试在音频标签之后编写其脚本，如果您在该音频标签之前编写脚本，则会在播放音频时出现问题，

我会推荐在页面末尾编写脚本，这是编写脚本的标准方式。

[http://jsfiddle.net/LyDWH/4/](http://jsfiddle.net/LyDWH/4/)

```
<!DOCTYPE html>
<html>
<body>
<audio id="effects" hidden >
    <source src="http://www.w3schools.com/html/horse.mp3" type="audio/mpeg">
</audio>
        <div onclick= "playEffectSound();">Horse Click Me..!</div>
</body>
<script>
var hitSound = new Audio();
function playEffectSound()
{
    hitSound = document.getElementById('effects'); 
    hitSound.currentTime = 0;
    hitSound.play();    
}

</script>
</html>
​ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-24T20:42:40.513

尝试每次点击添加一个新的 var 声音和 sound.play() 它会正常工作

# jakarta-mail - JavaMail 无法正常工作

> ID：13700192
> 
> 赞同：0
> 
> 时间：2012-12-04T09:57:29.513
> 
> 标签：jakarta-mail

嗨，当我在家用电脑上尝试以下代码时，它工作正常。

```
 Properties props=new Properties();
   props.put("mail.smtp.host", "smtp.gmail.com");
   props.put("mail.smtp.socketFactory.port", 465);
   props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
   props.put("mail.smtp.auth", true);
   props.put("mail.smtp.port", 465);

  Session sess=Session.getDefaultInstance(props,
          new javax.mail.Authenticator() {
          protected PasswordAuthentication getPasswordAuthentication(){
          return new PasswordAuthentication("user email ID","password");

          }
          });

  try{
     Message msg=new MimeMessage(sess); 
     msg.setFrom(new InternetAddress("sunnykeerthi@gmail.com"));
     msg.setRecipients(Message.RecipientType.TO, InternetAddress.parse("sunnykeerthi@gmail.com"));
     msg.setSubject("Hi this is mail");
     msg.setText("Hi this is an email sent from java");
     Transport.send(msg);
     JOptionPane.showMessageDialog(null, "message has been sent");

  }
  catch(Exception e)
  {
      JOptionPane.showMessageDialog(null, e);
  } 
```

但是当我在我的办公室电脑上尝试相同的操作时，它给了我附加屏幕中的错误。 ![Java 邮件错误 o/p](../Images/8f562e4582805038310edcfa455f423d.png) 请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:00:36.240

您的公司是否可能正在过滤端口 25？当您将 gmail 设置为 smtp 时，您可以从本地桌面客户端（outlook、thunderbird ...）发送邮件吗？

您可以尝试在您的 java 代码中设置您的公司 smtp 服务器吗？

# inno-setup - 如何在 Inno Setup 中获取时差？

> ID：13700195
> 
> 赞同：3
> 
> 时间：2012-12-04T09:57:37.343
> 
> 标签：inno-setup

我想写一个`while`像下面这样的超时循环......如何在 Inno Setup 中写这个？

```
InitialTime = SystemCurrentTime ();

Timeout = 2000; //(ms)

while (!condition) {    
    if (SystemCurrentTime () - InitialTime > Timeout) {
    // Timed out
       break;
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T19:35:35.240

为了简化 Inno Setup，您可以使用[`GetTickCount`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724408(v=vs.85).aspx)调用。

> GetTickCount 函数的分辨率受限于系统计时器的分辨率，通常在 10 毫秒到 16 毫秒的范围内。

因此，它不会恰好在 2000 毫秒（或您想要的任何值）处超时，但足够接近可以接受。

您必须注意的其他限制是：

> 经过的时间存储为 DWORD 值。因此，如果系统连续运行 49.7 天，时间将归零。

在代码中，它显示如下：

```
[Code]
function GetTickCount: DWord; external 'GetTickCount@kernel32 stdcall';

procedure WaitForTheCondition;
const 
  TimeOut = 2000;
var
  InitialTime, CurrentTime: DWord;
begin
  InitialTime := GetTickCount;
  while not Condition do
  begin
    CurrentTime := GetTickCount;
    if    ((CurrentTime - InitialTime) >= TimeOut) { timed out OR }
       or (CurrentTime < InitialTime) then { the rare case of the installer running  }
                                           { exactly as the counter overflows, }
      Break;
  end;
end; 
```

上述功能并不完美，在*极少数情况下*，计数器溢出时正在运行（机器每49.7天连续运行一次），因为一旦发生溢出它就会超时（可能在所需的等待之前） ）。

# django - 删除 Django ORM 中的重复项——多行

> ID：13700200
> 
> 赞同：30
> 
> 时间：2012-12-04T09:57:56.720
> 
> 标签：django, django-models

我有一个有四个字段的模型。如何从我的数据库中删除重复的对象？

Daniel Roseman 对[这个问题](https://stackoverflow.com/questions/5877306/remove-duplicates-in-a-django-query)的回答似乎很合适，但我不确定如何将其扩展到每个对象有四个字段要比较的情况。

谢谢，

W。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-12-04T10:19:31.707

```
def remove_duplicated_records(model, fields):
    """
    Removes records from `model` duplicated on `fields`
    while leaving the most recent one (biggest `id`).
    """
    duplicates = model.objects.values(*fields)

    # override any model specific ordering (for `.annotate()`)
    duplicates = duplicates.order_by()

    # group by same values of `fields`; count how many rows are the same
    duplicates = duplicates.annotate(
        max_id=models.Max("id"), count_id=models.Count("id")
    )

    # leave out only the ones which are actually duplicated
    duplicates = duplicates.filter(count_id__gt=1)

    for duplicate in duplicates:
        to_delete = model.objects.filter(**{x: duplicate[x] for x in fields})

        # leave out the latest duplicated record
        # you can use `Min` if you wish to leave out the first record
        to_delete = to_delete.exclude(id=duplicate["max_id"])

        to_delete.delete() 
```

你不应该经常这样做。改为对数据库使用`unique_together`约束。

这留下了`id`数据库中最大的记录。如果要保留原始记录（第一个），请使用`models.Min`. 您还可以使用完全不同的字段，例如创建日期或其他内容。

**底层 SQL**

注释 django ORM`GROUP BY`在查询中使用的所有模型字段上使用语句时。从而使用`.values()`方法。`GROUP BY`将对具有相同值的所有记录进行分组。重复的（不止一个`id`for ）稍后在on annotated生成的语句`unique_fields`中被过滤掉。`HAVING``.filter()``QuerySet`

```
SELECT
    field_1,
    …
    field_n,
    MAX(id) as max_id,
    COUNT(id) as count_id
FROM
    app_mymodel
GROUP BY
    field_1,
    …
    field_n
HAVING
    count_id > 1 
```

重复的记录稍后会在`for`循环中删除，但每个组中最常见的记录除外。

**空 .order_by()**

可以肯定的是，`.order_by()`在聚合之前添加一个空调用总是明智的`QuerySet`。

用于排序的字段`QuerySet`也包含在`GROUP BY`语句中。Empty`.order_by()`会覆盖模型`Meta`中声明的列，因此它们不包含在 SQL 查询中（例如，按日期的默认排序可能会破坏结果）。

您目前可能不需要覆盖它，但有人可能会在稍后添加默认排序，从而破坏您宝贵的删除重复代码，甚至不知道这一点。是的，我确信你有 100% 的测试覆盖率……</p>

只需添加空`.order_by()`以确保安全。;-)

[https://docs.djangoproject.com/en/3.2/topics/db/aggregation/#interaction-with-default-ordering-or-order-by](https://docs.djangoproject.com/en/3.2/topics/db/aggregation/#interaction-with-default-ordering-or-order-by)

**交易**

当然，您应该考虑在单个事务中完成所有操作。

[https://docs.djangoproject.com/en/3.2/topics/db/transactions/#django.db.transaction.atomic](https://docs.djangoproject.com/en/3.2/topics/db/transactions/#django.db.transaction.atomic)

# jquery - JQuery 缓动插件

> ID：13700203
> 
> 赞同：0
> 
> 时间：2012-12-04T09:57:59.503
> 
> 标签：jquery, easing

我想使用 JQuery 缓动导航到我页面中的命名部分，到目前为止它可以工作。

在其中一个部分中，我有一个表格，我希望它垂直和水平居中，所以我将它放在一个子 div 中，并垂直/水平居中。

我不知道该怎么做是更改 javascript，以便在跳转到表单部分时，表单缓和到页面的中间。

我正在使用以下代码块：

```
$('.nav a').bind('click',function(event){

    var $anchor = $(this);

    $('html, body').stop().animate({
        scrollTop: $($anchor.attr('href')).offset().top
    }, 1500,'easeInOutExpo');

    event.preventDefault();
});    
       ​ 
```

这是我所拥有的JSFiddle，任何人都可以启发我吗？谢谢！

[http://jsfiddle.net/soraya_soch/LyDWH/](http://jsfiddle.net/soraya_soch/LyDWH/)

**[编辑]**

我的目标是在单击链接时，页面会缓和并集中表单的 div。 ![在此处输入图像描述](../Images/01146f057965b97884ec91538a873d67.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:41:46.663

检查一下，它没有将表单 div 设置为垂直居中，这有助于实现如上图所示设置所需的输出，因为也没有给出垂直中心

[http://jsfiddle.net/LyDWH/3/](http://jsfiddle.net/LyDWH/3/)

对 CSS 和 HTML 页面进行了细微更改

```
div.cn {
    display: table-cell;
    width: 960px;
    height: 2000px;
    background: gray;
    text-align: center;
}

div.inner {
    display: inline-block;
    width: 200px;
    height: 200px;
    background: red;
    margin-top: 20%;
}
​ 
```

# iphone - Coredata 或 Sqlite 哪个更好

> ID：13700208
> 
> 赞同：-3
> 
> 时间：2012-12-04T09:58:15.680
> 
> 标签：iphone, ios, core-data

您能帮忙选择 Coredata 还是 sqlite 吗？哪一个更好 ？因为我在数据库中有复杂的查询。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:02:23.163

这个博客会帮助你一点

[http://blog.mcohen.me/2010/06/19/why-i-chose-sqlite-instead-of-core-data/](http://blog.mcohen.me/2010/06/19/why-i-chose-sqlite-instead-of-core-data/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:02:29.753

答案当然是“视情况而定”。根据您想要实现的目标，它们都有各自的优点和缺点。

查看这篇文章和其他文章，在两者之间进行选择：http: [//answers.oreilly.com/topic/1959-when-to-use-sqlite-instead-of-core-data-on-the-iphone/](http://answers.oreilly.com/topic/1959-when-to-use-sqlite-instead-of-core-data-on-the-iphone/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:14:24.360

Sqlite 是一个 RDMS 系统，涉及 SQL，而 CoreData 是 xcode 中的面向对象编程。两者都处理数据库中的大量数据。两者都有自己的写入和保存到数据库的方式。你需要知道他们的具体方式......在决定使用哪个方面，这真的取决于你所处的环境......如果你使用的是简单的查询或数据库中的数据很少，你可以使用 plist 或 userdefaults . 选择权在你，因为你最清楚自己需要什么……

# tapestry - 如何在挂毯网格中设置下拉菜单

> ID：13700211
> 
> 赞同：0
> 
> 时间：2012-12-04T09:58:22.803
> 
> 标签：tapestry

```
<t:grid t:id="selectedListGrid" t:source="selecteditemlist"
    row="item" rowsPerPage="5" inPlace="true" >
    <p:sizecell>
        <select t:model="sizeOption" t:value="1"/>
    </p:sizecell> 
```

这是我的 TML 文件的一部分，下面是我设置模型的地方。我的网格不在表单内，下拉列表为空。有什么信号吗？

```
@Property
static final private String[] sizeOption = new String[] {"1","2","3","4"}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:11:09.093

1.  您忘记了所选组件的 Tapestry 命名空间。使用`<t:select ... />`.
2.  如果没有封闭的表单组件，它将无法工作。

# postgresql - 如何将csv数据导入postgres表

> ID：13700212
> 
> 赞同：2
> 
> 时间：2012-12-04T09:58:27.813
> 
> 标签：postgresql

我试图将 csv 文件数据导入 postgres 表。在 pgAdmin 中以 pgscript 的形式运行以下行

```
\copy users_page_rank FROM E'C:\\Users\\GamulinN\\Desktop\\users page rank.csv' DELIMITER ';' CSV 
```

它返回一个错误：

```
[ERROR    ] 1.0: syntax error, unexpected character 
```

有谁知道这里可能出了什么问题？我检查了[这篇](https://stackoverflow.com/questions/2987433/how-to-import-csv-file-data-into-a-postgres-table)文章，但无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T10:21:02.160

要将文件导入 postgres，`COPY`您需要以下条件之一：

1）连接`psql`到数据库并运行您的命令：

```
\copy users_page_rank FROM E'C:\\Users\\GamulinN\\Desktop\\users page rank.csv' DELIMITER ';' CSV 
```

它将文件从当前计算机复制到表中。详情[在这里](http://www.postgresql.org/docs/current/static/app-psql.html)。

2) 使用任何工具连接到数据库并运行此 SQL 脚本：

```
COPY users_page_rank FROM E'C:\\Users\\GamulinN\\Desktop\\users page rank.csv' DELIMITER ';' CSV 
```

它将使用 postgres 将文件从服务器复制到表中。详情[在这里](http://www.postgresql.org/docs/current/static/sql-copy.html)。（使用此命令，您只能`COPY`从 postgresql**数据目录**中的文件。所以您需要先在那里传输文件。）

# android - 如何在 Android Map Fragment 中禁用地图旋转功能

> ID：13700226
> 
> 赞同：34
> 
> 时间：2012-12-04T09:59:09.827
> 
> 标签：android, google-maps, google-maps-android-api-2, mapfragment

我使用[适用于 Android 的 Google Maps Api 版本 2](https://developers.google.com/maps/documentation/android/)将 MapFragment 添加到我的应用程序中。

这个 Fragments 在速度和 API 可用性方面提高了很多。可悲的是，它还允许用两指手势旋转地图。我想禁用旋转，因为通常会识别这两个手指手势而不是缩放手势。

如何禁用地图旋转？

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-12-04T10:10:37.177

如果您查看文档中的正确位置，结果是直截了当的。

GoogleMap 中有一个[UiSettings](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/UiSettings)类，它允许启用和禁用手势。

```
 SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.maps_fragment);
  GoogleMap map = mapFragment.getMap();
  map.getUiSettings().setRotateGesturesEnabled(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-10T13:11:22.407

如果您使用如下代码创建 Google 地图：

```
GoogleMapOptions googleMapOptions = new GoogleMapOptions();
...
mapFragment = SupportMapFragment.newInstance(googleMapOptions); 
```

然后你也可以像这样禁用旋转手势：

```
GoogleMapOptions googleMapOptions = new GoogleMapOptions();
...
googleMapOptions.rotateGesturesEnabled(false);
mapFragment = SupportMapFragment.newInstance(googleMapOptions); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-24T17:35:49.497

`SupportMapFragment mapFragment = (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map); mapFragment.getMapAsync(this);`

并在 onmapReady 中插入：

`mMap.getUiSettings().setRotateGesturesEnabled(false);`

# c - LNK2001，再次

> ID：13700228
> 
> 赞同：1
> 
> 时间：2012-12-04T09:59:20.953
> 
> 标签：c, lnk2001

我寻找了类似的问题，但唯一的主题可能是关于使用库的问题，我会避免这样做......这是我的问题，我收到了这个错误：

```
1>Signal generator.obj : error LNK2001: unresolved external symbol "double __cdecl findMaxModulus(double *,int)" (?findMaxModulus@@YANPANH@Z) 
```

我正在使用 Visual Studio Professional 2008 开发 ac 程序。我有一个主文件和另一个包含我编写的所有函数的文件，myFunctions.h/c。问题是当我包含“myFunctions.c”时这些错误不会出现，而当我包含“myFunctions.h”时它们会出现。

我正在做我在大学时记得的事情（我现在更喜欢 matlab），这是

```
/* Home-made includes */
#include "myType.h"
#include "myFunctions.h" 
```

就在包含其他标头（stdlib、数学等）之后

有什么猜测吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:01:42.043

该错误意味着链接器找不到该函数。这很可能意味着您根本没有编译`myFunctions.c`文件。确保将其作为“源文件”添加到 Visual Studio 中的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:10:34.360

如果您想尝试`gcc`编译这两个`.c`文件，如下所示：

`gcc -Wall main.c myfunction.c -o final.out`

您缺少另一个`.c`文件。因此在链接阶段链接器无法解析外部符号（这是您的函数）。按我说的试试。

对于 Visual Studio：您需要检查是否检查了所有源文件以进行构建。有一个选项可以包含来自多个源文件的文件数量。

# c++ - 我可以在内部函数中禁用宏吗？

> ID：13700232
> 
> 赞同：2
> 
> 时间：2012-12-04T09:59:28.720
> 
> 标签：c++, visual-studio-2010

> **可能重复：**
> [我可以重新定义一个 C++ 宏然后再定义它吗？](https://stackoverflow.com/questions/1793800/can-i-redefine-a-c-macro-then-define-it-back)

我有一个应用程序在应用程序生命周期中多次调用来自第三方 SDK 的函数。此第三方函数使用其 _3RDPARTY_ASSERT（它是 _ASSERT 的包装器）检查某些错误。

我的问题是，在其中一个调用中，我有时会期待一个错误（然后处理它）。在这种情况下，我想禁用断言，因为它在调试时很烦人，但在所有其他情况下都保留它。

我试图用 pragma push_macro/pop_macro 来处理它，但我还没有找到办法。这可能吗？

我有 3rdParty.cpp 的来源，但不想碰它。

这将是代码的简化版本：

**我的.cpp：**

```
#include "3rdparty.h"

HRESULT MyMethod(...)
{
    HRESULT hr;
    hr = _3rdParty(...);
    if (SUCCEEDED(hr))
        hr = _3rdParty(...);
    if (SUCCEEDED(hr))
        hr = _3rdParty(...);
    ...    
    if (SUCCEEDED(hr))
        hr = _3rdParty(...); // This call shouldn't throw the assertion, as I expect it to fail sometimes!
    if (FAILED(hr))
        doSomething();
    else
        doSomethingElse();
    ...
    if (SUCCEEDED(hr))
       hr = _3rdParty(...);
    return hr;    
} 
```

**3rdParty.cpp：**

```
...
#define _3RDPARTY_ASSERT (_ASSERT)
...
HRESULT _3rdParty(...)
{
    HRESULT hr;
    hr = SomeFunction();
    _3RDPARTY_ASSERT(SUCCEEDED(hr));
    return hr;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:05:44.147

这里的问题是，除非它被内联，否则函数将被标记化并编译一次。这意味着在调用函数时是否定义了宏并不重要，只有在编译函数本身时才重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:08:45.807

如果您有权访问 的定义`_3RDPARTY_ASSER`，例如

```
#define _3RDPARTY_ASSERT definition 
```

然后保存该定义：

```
#define SAVE_ASSERT definition 
```

然后在您的代码中，当您不想要一个断言时，您可以`#undef _3RDPARTY_ASSERT`或`#define`它到其他东西。

在该代码之后，您可以通过以下方式重新启用旧定义

```
#define _3RDPARTY_ASSERT SAVE_ASSERT 
```

我更喜欢的第二个解决方案是：如果您可以访问 3'd 方代码，您可以创建另一个不断言的版本`_3rdParty(...)`，然后根据需要使用它。

# apache - htaccess 检查查询字符串的一部分的长度

> ID：13700239
> 
> 赞同：3
> 
> 时间：2012-12-04T09:59:37.737
> 
> 标签：apache, .htaccess, mod-rewrite, drupal-6

如果请求的一部分短于 255 个字符（与缓存和 linux 中的 255 个字符的文件名限制有关），我希望 apache 跳过某些重写。

我写了这个：

```
RewriteCond %{QUERY_STRING} "utm_campaign" 
RewriteCond %{QUERY_STRING} "utm_medium" 
RewriteCond %{QUERY_STRING} ^(.*\/)([^\/\n]{0,255})$ 
RewriteRule .* - [S=2] 
```

我针对 url ( `q=path/to/page?utm_campaign=xxx&utm_medium=xxx`) 测试了正则表达式，它匹配但 query_string 变量似乎有不同的内容，因为这之后的 2 条规则仍然被执​​行。在这种情况下应该匹配的部分`page?utm_campaign=xxx&utm_medium=xxx`（以及之后的所有内容）如果它少于 255 个字符，则可以跳过接下来的 2 个重写规则。

我正在使用 Drupal 6 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:50:31.443

之前的部分？不在 %{QUERY_STRING} 中（在这种情况下与 PHP 中的 $_SERVER['QUERY_STRING'] 相反，因此会造成混淆），将 %{REQUEST_URI} 添加到 RewriteCond 解决了问题：

```
RewriteCond %{QUERY_STRING} "utm_campaign" 
RewriteCond %{REQUEST_URI}%_{QUERY_STRING} "utm_medium" 
RewriteCond %{QUERY_STRING} ^(.*\/)([^\/\n]{0,255})$ 
RewriteRule .* - [S=2] 
```

由于答案在评论中，因此不确定如何为此解决方案给予@Kamil Šrot 功劳？

# .htaccess - Htaccess重定向，重定向循环

> ID：13700240
> 
> 赞同：0
> 
> 时间：2012-12-04T09:59:40.137
> 
> 标签：.htaccess, url, url-redirection

我想重定向`mysite.com/index.php`到`mysite.com/index.php?id_category=12&controller=category`

这是我的 htaccess 文件。

但它不起作用。铬说：`This webpage has a redirect loop`。

```
Options +FollowSymLinks +SymLinksIfOwnerMatch

RewriteEngine On
RewriteBase /

RewriteRule index\.php http://mysite.com/index.php?id_category=12&controller=category 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:16:23.260

这应该有效：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/index.php$
RewriteCond %{QUERY_STRING} ^$
RewriteRule (.*) http://www.mywebsite.com/index.php?foo=bar [R=301,L] 
```

第一个条件检查 URI 是否等于，`index.php`第二个条件检查 GET 值是否为空。两个条件之间的 AND 在这里是隐含的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:13:22.193

可能你应该改变使用另一个文件名而不是 index.php 的命运。但你可以尝试：

RewriteRule index.php index.php?id_category=12&controller=category

# php - 将图像从 url 直接上传到数据库 blob 字段

> ID：13700242
> 
> 赞同：3
> 
> 时间：2012-12-04T09:59:44.337
> 
> 标签：php, database, image, url

我正在尝试将图像直接从 url 上传到数据库 blob 字段。

我设法做到这一点的唯一方法是将图像保存在我的网络服务器文件夹中并读取文件并返回内容。

我正在寻找一种将 url 数据内容直接传输到数据库 blob 字段的方法。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_POST, 0);
curl_setopt($ch, CURLOPT_URL, $link);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch);
$savefile = fopen('objectPic/temp'.$counter.'.jpg', 'w');
fwrite($savefile, $result);
fclose($savefile);
$fp = fopen('objectPic/temp'.$counter.'.jpg', 'r');
$data = fread($fp, filesize('objectPic/temp'.$counter.'.jpg'));
$data = addslashes($data);
fclose($fp);

return $data; 
```

好的，这是功能：

```
function GetImageFromUrl($link) {

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_POST, 0);
    curl_setopt($ch, CURLOPT_URL, $link);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $result = curl_exec($ch);
    curl_close($ch);
    return $result;
} 
```

这是代码：

```
$pic1 = GetImageFromUrl($pic1); 
```

数据库插入

插入帖子值（''，'2'，'2'，'$objTypeId'，''，'0'，''，'1'，''，''，''，''，''， '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '' , '', '', '', '', '', '', '', '$pic1', '$pic2', '$pic3')");

很多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:09:39.563

尝试这个

```
 $file = fopen("http://url/img.jpg", "rb");
        $output = fread($file, 10000);
    fclose($file);
    // insert sql code here 
   mysql_query(" INSERT INTO table SET image='$output'"); 
```

# gcc - 黑莓 10 未定义对 `__sync_fetch_and_add_4 的引用

> ID：13700246
> 
> 赞同：0
> 
> 时间：2012-12-04T09:59:52.757
> 
> 标签：gcc, blackberry-10

在使用 C++ 的 Blackberry 10 上，我收到以下链接错误

`__sync_fetch_and_add_4 undefined reference to __sync_fetch_and_sub_4 undefined reference to`对__sync_bool_compare_and_swap_4的未定义引用

任何人都知道我错过了哪个图书馆。Momentics IDE 使用的是 GCC 4.6.3

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:05:28.343

黑暗中的狂野刺，但它是“数学”库，可以通过包含`LIBS += -lm`在您的`.pro`文件中来添加。

# ruby-on-rails - 运行资产时jruby jndi连接rake中止：预编译

> ID：13700248
> 
> 赞同：0
> 
> 时间：2012-12-04T09:59:52.513
> 
> 标签：ruby-on-rails, jruby, jndi

我按照这里的说明[https://gist.github.com/1564440](https://gist.github.com/1564440)为我的 jruby on rails 应用程序配置 jndi 连接。当我运行 rake assets:precompile 我有这个错误：

耙中止！jdbc 适配器需要驱动程序类和 url

我错过了什么？

# sharepoint-2010 - 具有 inforpath 任务表单的自定义 Windows 工作流 - 在同一表单中切换多个视图

> ID：13700251
> 
> 赞同：3
> 
> 时间：2012-12-04T10:00:13.383
> 
> 标签：sharepoint-2010, sharepoint-2007, workflow-foundation, infopath, sharepoint-workflow

我正在通过向任务表单添加更多视图来自定义开发的 Windows 工作流程。在 Workflow.xml 中有定义为“Task0_FormURN,Task1_FormURN,Task2_FormURN,Task3_FormURN,Task4_FormURN,Task5_FormURN”的任务表单（此处已删除标签）。这些表格中的每一个都适用于当前的工作流程。

但是，当我在工作流 xml 中添加一个新视图并将表单增加为“Task6_FormURN”并在工作流属性后面的代码中将“TaskType”属性设置为“6”时，它只显示默认视图。当前添加的视图不会显示为下一个表单，而是显示默认视图。

我已经发布并部署了 inforpath 表单，并且它也在中央管理 inforpath 模板文件夹中正确更新。我使用了 Sharepoint 2007、Visual Studio 2008、Inforpath 2007。

在 Inforpath 表单中是否需要进行任何配置才能查看新添加的视图？除了这些，我如何获得工作流和 Inforpath 视图之间的连接？

伟大的帮助朋友。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:15:45.537

这可以通过规则来完成。可以在信息路径表单选项部分中指定规则。

`Form Options -> Open and Save ->Rules`您可以定义一个规则以根据 TaskType 切换视图。

希望这会帮助你。

# java - mvn proguard：复制之前是否有可能的混淆依赖

> ID：13700252
> 
> 赞同：1
> 
> 时间：2012-12-04T10:00:16.020
> 
> 标签：java, maven, obfuscation, maven-plugin, proguard

我有如下插件配置：

```
<project>
    ...
    <build>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.6</version>
            <executions>
                <execution>
                    <id>copy-dependencies</id>
                    <phase>package</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration> 
                        <outputDirectory>${project.build.directory}/libs</outputDirectory>
                        <overWriteReleases>true</overWriteReleases>
                        <overWriteSnapshots>true</overWriteSnapshots>
                        <overWriteIfNewer>true</overWriteIfNewer>
                    </configuration>
                </execution>
            </executions> 
        </plugin>
        <plugin>
            <groupId>com.pyx4me</groupId>
            <artifactId>proguard-maven-plugin</artifactId>
            <version>2.1.0-SNAPSHOT</version>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>proguard</goal>
                    </goals>
                </execution>
            </executions>   
            <configuration>
                <proguardVersion>4.8</proguardVersion>
                <obfuscate>true</obfuscate>
                <includeDependency>true</includeDependency> 
                <injar>${project.artifactId}-${project.version}.jar</injar>
                <outjar>${project.artifactId}-${project.version}-obf.jar</outjar> 
                <outputDirectory>${project.build.directory}</outputDirectory> 
                <maxMemory>256m</maxMemory>             
                <options>
                    <option>-keepclasseswithmembers class **, !some.specific.package.** { *; }</option>
                    <option>-keep public class some.specific.package.Main { public *; public static *; }</option>
                    <option>-allowaccessmodification</option>
                    <option>-dontskipnonpubliclibraryclasses</option>
                    <option>-dontskipnonpubliclibraryclassmembers</option>
                    <option>-dontwarn org.apache.log4j.**</option>
                </options>
                <libs>
                    <lib>${java.home}/lib/rt.jar</lib>
                    <lib>${java.home}/lib/javaws.jar</lib>
                    <lib>${javafx_home}/lib/jfxrt.jar</lib>
                </libs>    
            </configuration>

            <dependencies>
                <dependency>
                    <groupId>net.sf.proguard</groupId>
                    <artifactId>proguard-base</artifactId>
                    <version>4.8</version>
                </dependency>
            </dependencies>
        </plugin>
    </build>
...
</project> 
```

我想混淆`some.specific.package`jar 的特定包及其依赖项（在复制之前）。有可能做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:22:54.557

您是否尝试过带有否定（！）的命令*-keeppackagenames*要混淆的包？我尝试了以下操作，结果只是包*org.neo4j.cineasts.domain*被混淆了。见下文：

```
<configuration>
                <proguardVersion>4.8</proguardVersion>
                <obfuscate>true</obfuscate>
                <includeDependency>true</includeDependency>
                <injar>${project.artifactId}-${project.version}.jar</injar>
                <outjar>${project.artifactId}-${project.version}-obf.jar</outjar>
                <outputDirectory>${project.build.directory}</outputDirectory>
                <maxMemory>256m</maxMemory>
                <options>
                    <option>-keep public class org.neo4j.cineasts.controller.** { public *; public static *; }</option> 
                    <option>-keeppackagenames !org.neo4j.cineasts.domain</option>
                    <option>-allowaccessmodification</option>
                    <option>-dontskipnonpubliclibraryclasses</option>
                    <option>-dontskipnonpubliclibraryclassmembers</option>
                </options>
                <libs>
                    <lib>C:/devtools/Java/jdk1.6.0_29_64/jre/lib/rt.jar</lib>
                    <lib>C:/devtools/Java/jdk1.6.0_29_64/jre/lib/javaws.jar</lib>
                </libs>
            </configuration> 
```

最好的，迈克尔

# r - netcdf 文件中的变量出现翻转

> ID：13700254
> 
> 赞同：5
> 
> 时间：2012-12-04T10:00:16.037
> 
> 标签：r, netcdf

我已经从

```
f=open.ncdf("file.nc")
[1] "file Lfile.nc has  2 dimensions:"
[1] "Longitude   Size: 1440"
[1] "Latitude   Size: 720"
[1] "------------------------"
[1] "file filr.nc has   8 variables:"
[1] "short ts[Latitude,Longitude]  Longname:Skin Temperature (2mm) Missval:NA" 
```

然后我想使用变量 soil_moisture_c

```
A = get.var.ncdf(nc=f,varid="soil_moisture_c",verbose=TRUE) 
```

然后我用`image(A)`. 我得到了下面显示的地图，我什至把它调换了，`image(t(a))`但改成了另一个方向，而不是应该的样子。无论如何，为了知道出了什么问题，我使用了 netcdf 查看器 Panoply，并且地图被正确绘制，如下所示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T10:35:59.900

原因是您使用的NetCDF接口非常低级，您所做的只是读出没有任何维度信息的变量。网格的方向实际上是任意的，坐标信息需要在特定的上下文中理解。

```
library(raster) ## requires ncdf package for this file  
d <- raster("LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T185959Z_20040114.nc", varname = "soil_moisture_c") 
```

（我使用了与您不同的文件，但它应该工作相同）。

事实证明，即使 raster 没有工作也无法做到这一点，但它确实很容易纠正：

```
d <-  flip(t(d), direction = "x") 
```

这会转置数据并围绕“x”（经度）翻转，从而保持地理参考与原始上下文的关系。

使用 maptools 中的地图绘制它以检查：

```
plot(d)

library(maptools)
data(wrld_simpl)
plot(wrld_simpl, add = TRUE) 
```

通过从文件中读取尺寸信息，还有许多其他方法可以实现这一点，但这至少是为您完成大部分艰苦工作的捷径。

![来自光栅的图像图](../Images/dea630357672247c142e498452585122.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-04T10:59:10.610

作为对@mdsumner 更好的解决方案的补充，这是一种`ncdf`仅使用库的方法。

```
library(ncdf)
f <- open.ncdf("LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040101.nc")
A <- get.var.ncdf(nf,"soil_moisture_c") 
```

您所需要的只是找到您的尺寸，以便有一个连贯的 x 和 y 轴。如果您查看您的 netCDF 对象尺寸，您会看到以下内容：

```
str(f$dim)
List of 2
 $ Longitude:List of 8
  ..$ name         : chr "Longitude"
  ..$ len          : int 1440
  ..$ unlim        : logi FALSE
  ..$ id           : int 1
  ..$ dimvarid     : num 2
  ..$ units        : chr "degrees_east"
  ..$ vals         : num [1:1440(1d)] -180 -180 -179 -179 -179 ...
  ..$ create_dimvar: logi TRUE
  ..- attr(*, "class")= chr "dim.ncdf"
 $ Latitude :List of 8
  ..$ name         : chr "Latitude"
  ..$ len          : int 720
  ..$ unlim        : logi FALSE
  ..$ id           : int 2
  ..$ dimvarid     : num 1
  ..$ units        : chr "degrees_north"
  ..$ vals         : num [1:720(1d)] 89.9 89.6 89.4 89.1 88.9 ...
  ..$ create_dimvar: logi TRUE
  ..- attr(*, "class")= chr "dim.ncdf" 
```

因此，您的尺寸是：

```
 f$dim$Longitude$vals -> Longitude
 f$dim$Latitude$vals -> Latitude 
```

现在你`Latitude`从 90 变为 -90 而不是相反，它`image`更喜欢，所以：

```
 Latitude <- rev(Latitude)
 A <- A[nrow(A):1,] 
```

最后，正如您所注意到的，对象 A 的 x 和 y 被翻转，因此您需要对其进行转置，并且由于某些原因，您的 NA 值由 value 表示`-32767`：

```
A[A==-32767] <- NA
A <- t(A) 
```

最后是剧情：

```
image(Longitude, Latitude, A)
library(maptools)
data(wrld_simpl)
plot(wrld_simpl, add = TRUE) 
```

![在此处输入图像描述](../Images/cf5811b34a2d2623912f91dbab487f27.png)

**编辑：**要在您的 31 个文件上执行此操作，让我们调用您的文件名向量`ncfiles`和`yourpath`存储它们的目录（为简单起见，我将假设您的变量总是被调用`soil_moisture_c`并且您的 NA 总是`-32767`）：

```
ncfiles
 [1] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040101.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040102.nc"
 [3] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040103.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040104.nc"
 [5] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040105.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040106.nc"
 [7] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040107.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040108.nc"
 [9] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040109.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040110.nc"
[11] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040111.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040112.nc"
[13] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040113.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040114.nc"
[15] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040115.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040116.nc"
[17] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040117.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040118.nc"
[19] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040119.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040120.nc"
[21] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040121.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040122.nc"
[23] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040123.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040124.nc"
[25] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040125.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040126.nc"
[27] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040127.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040128.nc"
[29] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040129.nc" "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040130.nc"
[31] "LPRM-AMSR_E_L3_D_SOILM3_V002-20120520T173800Z_20040131.nc"

yourpath
 [1] "C:\\Users"

library(ncdf)
library(maptools)
data(wrld_simpl)
for(i in 1:length(ncfiles)){
    f <- open.ncdf(paste(yourpath,ncfiles[i], sep="\\"))
    A <- get.var.ncdf(f,"soil_moisture_c")
    f$dim$Longitude$vals -> Longitude
    f$dim$Latitude$vals -> Latitude
    Latitude <- rev(Latitude)
    A <- A[nrow(A):1,]
    A[A==-32767] <- NA
    A <- t(A)
    close.ncdf(f) # this is the important part
    png(paste(gsub("\\.nc","",ncfiles[i]), "\\.png", sep="")) # or any other device such as pdf, jpg...
    image(Longitude, Latitude, A)
    plot(wrld_simpl, add = TRUE)
    dev.off()
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-01T15:35:07.057

您还可以使用 CDO 从命令行简单地反转纬度：

```
cdo invertlat file.nc file_inverted.nc 
```

# python - 使用 NumPy 对曲面进行多元线性回归 - 示例

> ID：13700255
> 
> 赞同：1
> 
> 时间：2012-12-04T10:00:16.710
> 
> 标签：python, numpy, least-squares

这个问题很接近：[用 numpy minimum squares 拟合线性曲面](https://stackoverflow.com/questions/12617985/fitting-a-linear-surface-with-numpy-least-squares)，但没有样本数据。我一定非常慢，但似乎我无法让它工作。

我有以下代码：

```
 import numpy as np
    XYZ = np.array([[0, 1, 0, 1],
        [0, 0, 1, 1],
        [1, 1, 1, 1]])
    A = np.row_stack((np.ones(len(XYZ[0])), XYZ[0, :], XYZ[1:]))
    coeffs = np.linalg.lstsq(A.T, XYZ[2, :])[0]
    print coeffs 
```

输出是：

```
 [  5.00000000e-01   5.55111512e-17   9.71445147e-17   5.00000000e-01] 
```

我想要`z = a + bx + cy`，即三个系数，但输出给了我四个。我在这里哪里出错了？我预计 coeffs 是这样的：

```
 [ 1.0 0.0 0.0] 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:24:43.323

`XYZ[1, :]`彼得施耐德（评论）是对的：你会想喂`row_stack`：

```
>>> A = np.row_stack((np.ones(len(XYZ[0])), XYZ[0, :], XYZ[1, :]))
>>> np.linalg.lstsq(A.T, XYZ[2, :])[0]
array([  1.00000000e+00,  -7.85046229e-17,  -7.85046229e-17]) 
```

# c# - 不可表示的日期时间

> ID：13700258
> 
> 赞同：22
> 
> 时间：2012-12-04T10:00:22.573
> 
> 标签：c#, datetime

我有需要两个日期时间参数的方法

```
public  void SomeReport(DateTime TimeFrom, DateTime TimeTo)
{
    // ommited 
    TimeFrom.ToString("ddMMyy"), TimeTo.ToString("ddMMyy")));
    // ommited
} 
```

当我发送这个参数时

```
 DateTime TimeTo = DateTime.Now;
 DateTime TimeFrom = new DateTime().AddHours(-1); 
```

发生此错误：

> System.ArgumentOutOfRangeException ：添加或减去的值会导致无法表示的 DateTime。

可能是什么问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-12-04T10:03:33.130

`new DateTime()`是`01/01/0001 00:00:00`哪个也是`DateTime.MinValue`。

你从那减去一小时。

猜测您正试图从`TimeTo`值中减去一个小时：

```
var TimeFrom = TimeTo.AddHours(-1); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-04T10:02:24.827

`new DateTime()`返回可表示的最小值`DateTime`；添加`-1`小时数会导致`DateTime`无法表示。

你可能想要`DateTime TimeFrom = TimeTo.AddHours(-1);`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-04T10:02:36.857

尝试：

```
DateTime TimeTo = DateTime.Now;
DateTime TimeFrom = TimeTo.AddHours(-1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-09T10:38:34.163

看看你的日期或时间数据。日期或时间没有足够的数字 示例日期必须是 8 位数字 20140604 和时间 6 位数字，例如 180203。因此，你会出错。我也收到此错误并找到时间 18000 并将其更改为 180000 问题已解决。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T10:03:44.160

创建一个`DateTime`with`new DateTime()`给你一个`DateTime`with `DateTime.MinValue`...你实际上不能减去任何东西......否则你会得到你得到的异常......见[MSDN](http://msdn.microsoft.com/en-us/library/03ybds8y.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T10:14:52.883

在您的情况下`TimeFrom`，保存无法添加 -1 的日期时间。您可以调用

```
DateTime TimeFrom = TimeTo .AddHours(-1); 
```

或者

```
DateTime TimeFrom = new DateTime().now.AddHours(-1); 
```

它们都产生相同的结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-20T12:55:03.383

在我的错误中，我将时间用作 24:00 而不是 00:00

# mongodb - 服务器崩溃后 MongoDB 无法启动

> ID：13700261
> 
> 赞同：77
> 
> 时间：2012-12-04T10:00:31.230
> 
> 标签：mongodb, ubuntu, administration

我的 Ubuntu 计算机崩溃了，当我重新启动它时，MongoDB 无法正常工作。我尝试了以下命令，并得到以下输出：

```
$ mongo
Error: couldn't connect to server 127.0.0.1:27017 src/mongo/shell/mongo.js:91
exception: connect failed

$ service mongodb status
mongodb stop/waiting

$ service mongodb restart
stop: Unknown instance: 
start: Rejected send message, 1 matched rules; type="method_call",
       sender=":1.57" (uid=1000 pid=2227 comm="start mongodb ")
       interface="com.ubuntu.Upstart0_6.Job" member="Start" error name="(unset)"
       requested_reply="0"
       destination="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init")

$ tail /var/log/mongodb/mongodb.log
[initandlisten] exception in initAndListen: 12596 old lock file, terminating
dbexit: 
[initandlisten] shutdown: going to close listening sockets...
[initandlisten] shutdown: going to flush diaglog...
[initandlisten] shutdown: going to close sockets...
[initandlisten] shutdown: waiting for fs preallocator...
[initandlisten] shutdown: closing all files...
[initandlisten] closeAllFiles() finished
dbexit: really exiting now 
```

（重新格式化输出以匹配网站布局。）

发生了什么？我该如何解决？

* * *

## 回答 #1

> 赞同：178
> 
> 时间：2012-12-04T10:00:31.230

日志文件告诉您您有一个*“旧锁文件”*。MongoDB 在运行时会保留一个[锁定](https://stackoverflow.com/a/6857973/41283)文件。它在启动时创建此文件，并在停止时将其删除。当计算机崩溃（或 MongoDB 崩溃，例如 via `kill`）时，该文件不会被删除，因此数据库不会启动。此文件的存在表明 MongoDB 未正常关闭。

可以做两件事：

1.  如果这是一台开发机器并且您没有使用过您的数据库（也没有使用过您的程序），您可以手动删除该文件。对于在 Ubuntu 12.10 上运行的 MongoDB 2.2.2，它位于`/var/lib/mongodb/mongod.lock`. 对于其他版本，该文件可能位于不同的路径中，也可能命名为`mongo.lock`.

2.  更安全的方法是遵循 MongoDB 的[耐久性和修复](http://www.mongodb.org/display/DOCS/Durability+and+Repair)指南。综上所述，对于具有上述配置的机器，您应该执行以下命令：

    ```
    sudo -u mongodb mongod --repair --dbpath /var/lib/mongodb/
    sudo service mongod start 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-29T14:07:22.450

我所要做的就是运行：sudo mongod --repair

然后：

须藤蒙戈

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-01T10:35:04.280

根据我的经验，我通常会删除数据库文件夹中的“mongod.lock”文件——在我的例子中：

*我浏览到我的 ubuntu 上安装数据库的位置，即“数据”文件夹。（cd 数据）；列出文件 (ls) *然后，我将删除在数据库崩溃时自动创建的“mongod.lock”文件，方法是发出“rm mongod.lock”文件。

之后，我将发出“./mongod”来启动 mongo 守护程序或 mongo 来启动 mongo shell。一切都会好起来的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-30T04:58:37.930

如果您没有使用**Bluepill**或**Monit**等监控工具，您将不得不面对这个问题，因为在服务器崩溃后由于某种原因 mongo 没有自动启动其守护进程，那么您必须手动使其工作，就像`sudo service mongod restart` 我认为这个问题一样，但它需要还有一些任务要完成，请`/etc/mongod.conf`在启动 mongo 守护程序之前确保您的 dbpath 在。

对我来说是

```
storage:
  dbPath: /var/lib/mongodb 
```

当我输入`mongod`命令时，它显示`MongoDB starting : pid=10795 port=27017 dbpath=/data/db 64-bit host=xyz.com`确保您的 dbpath 与 /etc/mongod.conf 中提到的相同

为此，您可以键入`sudo mongod --dbpath /var/lib/mongodb`然后使用`mongod`命令在所需的 dbpath 处启动 mongo 进程。

**仅供参考：**`mongod`使用命令启动您的 mongo 进程

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-31T06:34:25.630

检查您的服务器上是否有足够的可用空间。如果没有剩余空间，mongodb 将无法启动。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-02T23:07:34.620

这可能不是最好的解决方案，但如果你很绝望，你可以试试这个。似乎只有期刊对我来说是个问题，所以我采取了以下步骤：

1.  **创建一个新的数据目录**。可能是 /var/lib/mongodb2
2.  **更新您的 mongod.conf**以指向新的数据目录。
3.  **启动**mongoDB。
4.  如果启动成功，那么你可以**再次关闭 mongo**并继续，否则你可以在这里停止阅读。
5.  找到您以前的数据目录并将**数据库文件复制**到新的数据目录（例如，admin.0 admin.1 admin.ns 等）
6.  **再次启动mongoDB**（仍然使用新的数据目录）

完成这些步骤后（不到 5 分钟），我启动并运行，所有数据似乎都正常。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-18T10:15:50.493

从 mongo 数据目录中删除`.lock`文件`dbpath`对我有用。

例如`sudo sudo rm {data-directory}/mongod.lock`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-03T05:47:10.433

多谢你们。我们还遇到了一个问题，即 MongoDB 一遍又一遍地重新启动，它抱怨**旧的锁定文件**。我从 Windows 服务列表中停止了 MongoDB，然后删除了该`mongod.lock`文件。之后，我能够正确启动 MongoDB 服务并且工作正常。

# visual-studio-2010 - COM - #include 生成的标头与 #import 生成的 tlb

> ID：13700266
> 
> 赞同：4
> 
> 时间：2012-12-04T10:00:42.887
> 
> 标签：visual-studio-2010, visual-c++, com, idl

我有许多生成 COM DLL 的项目，这些项目输出以下内容：

```
projectname_i.h
projectname_i.c
projectname_p.c
projectname_i.tlb 
```

然后在另一个项目使用这个 DLL 的地方，它的使用方式如下：

```
#import "projectname.tlb" named_guids no_namespace 
```

我想将其更改为使用包含而不是导入。

`#import`想要从to更改背后的原因`#include`是因为我想启用`/MP`编译器开关以加快构建时间。

[http://msdn.microsoft.com/en-us/library/bb385193.aspx](http://msdn.microsoft.com/en-us/library/bb385193.aspx)

所以我想知道的是：

*   为什么 COM DLL 有一个 TLB 和一个 H？
*   应该使用哪个，为什么？
*   使用#include 和#import 有什么区别？切换到#include 会有什么不可预见的后果吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T13:05:01.510

> Why do COM DLLs have a TLB and a H?

The generated `_i.h` file contains the declarations you wrote in the IDL file in a format that's usable by a C or c++ compiler. The `.tlb` file is a type library, it contains the IDL declarations in a format that's usable by any language that supports COM. It gets embedded in the COM server DLL as a resource. Whomever uses your COM server will need it. If you don't build the proxy/stub DLL then it may also be needed at runtime to marshal calls across apartments.

> What is the difference between using #include vs #import?

As long as the client is written in C or C++, #including the `_i.h` file is enough to get the necessary declarations to use the server. Do note however that the #import directive does *more*, it auto-generates a `.tlh` and a `.tli` file that get #included in the client code. These files declare smart pointer types for the interfaces in the COM server, types that make it a **lot** easier to use the server. Open these files in a text editor to see what they contain. If your client code uses the XxxxPtr types or catches the _com_error exceptions that are auto-generated from error return codes then you are looking at a *very* substantial rewrite of the client code if you don't want to use the #import directive.

If the COM server is stable and its interface declarations are not going to change anymore then you could check-in the .tlh and .tli files and replace the #import by two #includes for these files. Be sure to leave a comment in the code that shows a maintainer how to re-generate the files, "never change" is an elusive goal. And, of course, this trick isn't appropriate if you try to make /MP effective, that indicates that the COM server is still changing.

# java - java: 计算器、BNF、AST 加减法

> ID：13700267
> 
> 赞同：0
> 
> 时间：2012-12-04T10:00:47.893
> 
> 标签：java, substring, abstract-syntax-tree, indexof, bnf

我正在尝试编写一种进行加法和减法的方法

使用 indexOf() ， lastIndexOf()

例如 string s = "3 + 3" 我想把这个字符串分成两个子字符串然后做一些操作。

```
// for addition
String s = "3 + 3";
int indexOfPlus = s.indexOf('+');

String beforePlus = s.substring(0,indexOfPlus);
String afterPlus= s.substring(indexOfPlus+1);
 .....
 .....

// for subtraction
String s = "3 - 3";
int indexOfMinus = s.indexOf('-');

String beforeMinus = s.substring(0,indexOfMinus);
String afterMinus = s.substring(indexOfMinus+1);

 ....
 .... 
```

我的问题是：但是，我不确定如何将诸如“3+ -1”或“3-+1”之类的字符串分解为子字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:19:51.130

首先，我建议为每个操作数和操作使用单独的字段，这样您就不必拆分任何内容而只需解析数字。

有一种叫做正则表达式的东西，虽然它有点先进，但它可以让你使用 String.split() 方法更轻松地执行这些操作，这个方法将正则表达式作为参数并将分割后的字符串作为数组返回，例如 (" 5+5").split("[-+]") 将分别返回 5 和 5 作为字符串。

```
using indexOf only I would do something like this (for "3- +1"):

int i1,i2;
String op;
i1 = s.indexOf("-");
i2= s.indexOf("+");
if ( i1<0 || i2<0)
   //only one operation
else if(i1<i2)
   //minus logic;
else if (i2<i1)
   // plus logic 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:07:02.237

你可以做的是，首先检查你的字符串，然后使用 doo 运算（即“1+-1”->“1-1”、“1--1”->“1+1”等）有操作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:08:56.913

我会将 + 和 - 中的每一个都视为两个不同的运算符，一个二元运算符和一个一元运算符。如果您在表达式的开头或在另一个运算符之后看到“-”，则它是一元-。如果您在两个表达式之间看到它，它是二进制的。在 AST 形式中，一元 - 有一个孩子，二元 - 有两个孩子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:25:24.183

使用 javax.script.ScriptEngineManager：

`ScriptEngineManager manager = new ScriptEngineManager();` 

 ````
ScriptEngine engine = manager.getEngineByName("js");<br>
Object result = engine.eval("3+ -4");<br>
System.out.println(result);<br> 
````  `输出：-1.0

或者

使用 BeanShell [http://www.beanshell.org/download.html](http://www.beanshell.org/download.html)
`Interpreter interpreter = new Interpreter();` 

 ````
interpreter.eval("result = 3+-4");<br>
System.out.println(interpreter.get("result"));<br> 
```` 

`输出：-1``

# javascript - 在 JS 中声明一个成员函数

> ID：13700273
> 
> 赞同：6
> 
> 时间：2012-12-04T10:01:08.423
> 
> 标签：javascript, function, member

我尝试了两种在 JS 中声明成员函数的方法：

```
function init() {
    var name = "Mozilla";
    function displayName() {
        alert(name);
    }
}
a = new init();
a.displayName() 
```

和

```
function init() {
    var name = "Mozilla";
    displayName = function() {
        alert(name);
    }
}
a = new init();
a.displayName() 
```

第一种方法告诉我的`displayName()`是`undefined`。我看到它的方式是创建一个`Function`带有名称的类型变量`displayName`，因此它应该可以工作。有人愿意解释为什么它不起作用吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T10:05:14.240

它不起作用，因为这就是 JavaScript 现在的工作方式。只是在构造函数中声明一个函数并不会在构造函数创建的对象上设置它，您必须显式地在对象和函数之间建立链接（直接通过将其分配给对象，或者更常见的是间接通过原型）。

你这样做的典型方式是通过原型继承，尽管你也可以直接将函数分配给单个对象（更多下文——但你谈到了“成员函数”，而在 JavaScript 中做类似事情的典型方式是通过原型） .

有几种方法可以设置原型继承。即使在旧版浏览器中也与广泛的 JavaScript 引擎兼容的经典方法是通过`prototype`构造函数上的属性来引用对象。该对象成为通过创建的实例的原型`new FunctionName`。您向该对象添加属性以在该函数创建的实例之间共享它们。

因此，使用原型继承：

```
function Init(name) {
    this.name = name;
}
Init.prototype.displayName = function() {
    alert(this.name);
};

var i = new Init("Mozilla");
i.displayName(); 
```

以上注意事项：

1.  在 JavaScript 中，压倒性的约定是构造函数以大写字母开头。所以我叫它`Init`而不是`init`.

2.  所有函数都自动具有一个`prototype`属性，即一个空白对象。

3.  我向该对象添加了一个属性，该属性`displayName`引用了一个函数。

4.  我没有对名称进行硬编码，而是将其`Init`作为参数传递。

5.  请注意，我将名称存储在新构造的实例的属性上；在对 的调用中`Init`，该实例可作为`this`.

6.  类似地，因为`displayName`作为从对象检索函数引用的表达式的一部分被调用，`this`是对 的调用中的对象`displayName`，因此`this.name`具有名称。

7.  为了简单起见，我将匿名函数分配给`displayName`. （属性有名称，函数没有。）我倾向于不在实际代码中这样做。

8.  通过原型构造的所有实例`new Init`都将共享函数的相同副本。`displayName`

更多探索（在我的博客上）：

*   [*神话方法*](http://blog.niftysnippets.org/2008/03/mythical-methods.html)
*   [*你必须记住`this`*](http://blog.niftysnippets.org/2008/04/you-must-remember-this.html)
*   [*匿名者匿名*](http://blog.niftysnippets.org/2010/03/anonymouses-anonymous.html)

如果您对在 JavaScript（和层次结构）中构建对象类感兴趣，您可能也对我的[`Lineage`工具包感兴趣。](http://code.google.com/p/lineagejs/)

从 ES5 开始，还有另一种选择：[`Object.create`](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.5). 这允许您直接创建对象并为其分配原型，而无需使用构造函数。但是正如您使用的那样`new`，这意味着您正在使用构造函数，我不会对此进行详细介绍。

现在，如果您不想使用，则*不必*使用 JavaScript 的原型特性。例如，您可以这样做：

```
function Init(name) {
    var name = name;

    this.displayName = function() {
        alert(name);
    };
}
var i = new Init("Mozilla");
i.displayName(); 
```

这不使用 JavaScript 的原型特性，而是在`displayName`每次调用时创建一个新函数`Init`并将其直接分配给对象。（任何质量合理的 JavaScript 引擎都足够聪明，可以重用函数的*代码*，但每个实例都会有不同的函数*对象）。*以上也使`name`属性完全私有，因为我们在每次调用时创建的函数是局部变量的*闭包*`name`。（更多：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T10:04:21.127

要创建类似成员函数的东西，您需要将其添加到构造函数的原型中：

```
function init() {
    this.name = 'Mozilla';
}
init.prototype.displayName = function() {
    alert(this.name);
} 
```

我还强烈建议您阅读有关 JavaScript 中的对象系统如何工作的内容。MDN 上有一篇很好的文章：[https ://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Introduction_to_Object-Oriented_JavaScript)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T10:04:14.907

以下应该有效：

```
function Init() {
    var name = "Mozilla";
    this.displayName = function() {
        alert(name);
    }
}
a = new Init();
a.displayName() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T10:13:24.550

您可以使用的标准之一是

```
var init = (function() {

    var name = "Mozilla"; // Shared by all instances

    function init() {
        this.name = "IE"; // Spesific to the created instance                  
    }    

    init.prototype = {
        displayName: function() {
            alert(name);
            alert(this.name);
        }        
    }

    return init;

})();

var a = new init();
a.displayName();​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:10:41.190

在您的第一种方法中：

> 函数 init() { var name = "Mozilla"; 功能显示名称（）{警报（名称）；} } a = 新的初始化（）；a.displayName()

function displayName(){} 只能在 init() 中调用，类似私有函数，不能作为对象的公共函数(init())

# php - 控制器覆盖 Magento（现有方法未覆盖）

> ID：13700274
> 
> 赞同：1
> 
> 时间：2012-12-04T10:01:12.760
> 
> 标签：php, magento, magento-1.7

我正在尝试覆盖 Magento 社区模块中的 Ajax 控制器。问题是我的控制器只有在方法不存在时才会被调用。我不能覆盖任何被覆盖的控制器方法。

这是我的代码

配置.xml：

```
<frontend>
    <routers>
        <overriden_module>
            <args>
                <modules>
                    <My_Module before="Overriden_Module">My_Module</My_Module>
                </modules>
            </args>
        </overriden_module>
    </routers>
</frontend> 
```

我正在重写一个 ajax 控制器，所以 - AjaxController.php：

```
<?php
require_once (Mage::getModuleDir('controllers', 'Overriden_Module') . DS .'AjaxController.php');

class My_Module_AjaxController extends Overriden_Module_AjaxController {

//This is an overridden method and no hit
public function streetAction() {
    die('FOO');
}

// This action is not overridden and gets called
public function otherAction(){
    die('BAR')
}

} 
```

根据要求，这是我要覆盖的模块中的路由器部分：

```
<routers>
        <module_name>
            <use>standard</use>
            <args>
                <module>Module_name</module>
                <frontName>frontname</frontName>
            </args>
        </module_name>
        <checkout>
            <args>
                <modules>
                    <Module_Name before="Mage_Checkout">Module_Name_Checkout</Module_Name>
                </modules>
            </args>
        </checkout>
    </routers> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T09:52:03.303

好的，经过一些调试，我发现了导致问题的原因。我正在重写的模块还定义了与前端同名的管理路由器。当 Magento 搜索匹配的路由器进行调度时，它将首先检查管理路由器，因此运行模块的管理控制器，甚至不检查前端路由器。

如果您`$this->_routers`在下面的代码中转储，您将看到我在说什么。

`app/code/core/Mage/Core/Controller/Varien/Front.php line 174:`

```
while (!$request->isDispatched() && $i++<100) {
        foreach ($this->_routers as $router) {
            if ($router->match($this->getRequest())) {
                break;
            }
        }
    } 
```

所以答案是简单地覆盖管理控制器

# oracle - Oracle 存储过程需要重新编译才能获取表数据

> ID：13700276
> 
> 赞同：2
> 
> 时间：2012-12-04T10:01:25.333
> 
> 标签：oracle, recompile

问题：要从我的 SP 获得结果，我每次都需要重新编译。

SP 的目的：从表中的每一行构造 XML。

说明：在第一次运行 SP 后编译后，除非重新编译，否则 SP 不会返回任何数据，即使表中有有效行也是如此。

我的代码大纲是..

```
 qry := 'select * from mytable where flag2 = 0 and flag1 = 1';
  qContext := DBMS_XMLGEN.newContext(qry);
  DBMS_XMLGEN.setrowtag(qContext, 'RowFromDB');
  DBMS_XMLGEN.setrowsettag(qContext, 'RowTag');
  dbms_xmlgen.setmaxrows(qContext, 1);  
  retXML := '';

  loop
      tmprowxml := DBMS_XMLGEN.getxml(qContext);      
      exit when dbms_xmlgen.getnumrowsprocessed(qContext) = 0;      
      tmprowxml := replace(tmprowxml, '<?xml version="1.0"?>');                 
      retXML := retXML || tmprowxml;    

      // code to update flag2 to 1          
  end loop;  

  DBMS_XMLGEN.closecontext(qcontext);

  COMMIT;

  return retXML; 
```

感谢任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T12:06:12.020

您是否在运行之间删除并重新创建表？远射，但这会使程序无效。

# postgresql - 如何在 PostgreSQL 中实现循环约束？

> ID：13700284
> 
> 赞同：1
> 
> 时间：2012-12-04T10:01:41.543
> 
> 标签：postgresql, database-design

我想强制一个表中的一行必须在另一个表中具有匹配的行，反之亦然。我目前正在这样做以解决您无法引用尚未创建的表的事实。有没有更自然的方式我不知道？

```
CREATE TABLE LE (id int PRIMARY KEY);
CREATE TABLE LE_TYP (id int PRIMARY KEY, typ text);

ALTER TABLE LE ADD CONSTRAINT
  twowayref FOREIGN KEY (id) REFERENCES LE_TYP (id) DEFERRABLE INITIALLY DEFERRED;

ALTER TABLE LE_TYP ADD CONSTRAINT
  twowayref_rev FOREIGN KEY (id) REFERENCES LE (id) DEFERRABLE INITIALLY DEFERRED; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:24:47.197

你正在做的事情是你有循环约束的理想选择。在您的解决方案中没有什么可以改进的。

然而，有两点值得为下一位读者简要提及。首先，在您的代码中使用此解决方案并不清楚您选择顺序的原因。如果您这样做，您可能需要注意延迟哪个约束。通常这很明显，但您可能希望根据引用相应表的其他外键来选择插入顺序。

另一个是关于是否需要围绕循环依赖进行工程的想法。一方面，这样做似乎是一个明显的简化，这似乎是一个好主意。

然而值得指出的是，在这种情况下，您可能希望查看多表继承。这样，您可能会这样做：

```
CREATE TABLE p1 (
     id serial not null,
     attribute1 int not null,
     attribute2 text not null,
     check (attribute1 > 1 or length(attribute2) > 10)
);

CREATE TABLE p2 (
     id int not null, -- shared primary key with p1
     attribute3 int not null,
     attribute4 text not null
);

CREATE TABLE combined (
     primary key (id)
) INHERITS (p1, p2); 
```

这会将您的所有列放在一个表中，但为您提供该表的逻辑接口，就好像它是连接在一个公共字段上的两个表一样。

# surfaceview - 怎么画得更快？SurfaceView、SurfaceHolder 脏矩形

> ID：13700286
> 
> 赞同：0
> 
> 时间：2012-12-04T10:01:48.267
> 
> 标签：surfaceview, rect, surfaceholder

我对 SurfaceView 有疑问。

函数 DrawWave 由定时器间隔 5ms 调用，但实际上两次调用之间需要超过 30ms，（我尝试删除 drawColor，drawPath）。

我尝试了“模式1”和“模式2”，通过使用Dirty rect，希望它可以运行得更快。Interval是一样的，都是30ms以上，（这个宽度是800px，eScrX-sScrX<20px）

问题 1：使用 SurfaceView/SurfaceHolder 是不是我做错了什么？

问题2：如何提高绘图速度？我希望它能在 10 毫秒内完成绘图。

我的代码：

```
public class VS_VChannel extends SurfaceView
{//Wave Show Class
    //-------------------------------------------------------------------------------
    private Paint paint = new Paint();  
    private SurfaceHolder sHolder = null;
    private Canvas cvs = null;
    private Path P = new Path();
    //Data source of the wave point Y
    protected VSChannel Channel = null;
    private float drawY;
    //-------------------------------------------------------------------------------
    public VS_VChannel(Context context) 
    {
        super(context);
    }
    //------------------------------------------------------------------------------
    public VS_VChannel(Context context, AttributeSet attrs) 
    {
        super(context, attrs);
        //Bind the wave data source whith AttributeSet name:vs_wave
        String vsName = attrs.getAttributeValue(null, "vs_wave");
        Channel = (VSChannel)VS.GetItem(vsName);//Find the wave data source from collection with name
        //
        paint.setAntiAlias(true);         
        paint.setDither(true);  
        paint.setColor(Channel.getColor());
        paint.setStyle(Paint.Style.STROKE);     
        paint.setStrokeWidth(2);                
        //
        sHolder = this.getHolder(); 
        this.setZOrderOnTop(true);  
        sHolder.setFormat(PixelFormat.TRANSPARENT);
    }
    //------------------------------------------------------------------------------
    /** DrawWave is Call by a timer Interval 5ms, 
     *  BUT actually it need more than 30ms between twice call,(tried delete drawColor, drawPath)
     *  I try as "Mode 1" and "Mode 2", by using Dirty rect, hope it can run faster
     *  The Interval is the same, both more than 30ms,
     *  (The width of this is 800px, and eScrX-sScrX<20px)
     */
    protected void DrawWave(int sScrX, int eScrX)
    {   
        Rect rect = new Rect(sScrX, 0, eScrX+8, getHeight());   //Mode 1    
        //Rect rect = new Rect(0, 0, getWidth(), getHeight());  //Mode 2
        //
        cvs = sHolder.lockCanvas(rect);     
        cvs.drawColor(Color.TRANSPARENT, PorterDuff.Mode.CLEAR);
        cvs.drawPath(P, paint);
        sHolder.unlockCanvasAndPost(cvs);   
    }
    //-------------------------------------------------------------------------------
    protected void GetWaveY()
    {
        drawY = Channel.GetWaveY(getHeight());
    }
    //-------------------------------------------------------------------------------
    protected void MoveTo(float x)
    {
        P.moveTo(x, drawY);
    }
    //-------------------------------------------------------------------------------
    protected void LineTo(float x)
    {
        P.lineTo(x, drawY);
    }
    //-------------------------------------------------------------------------------
    protected void DrawReturn()
    {
        P.reset();//Clear
        P.moveTo(0, drawY);
    }
    //-------------------------------------------------------------------------------
}
//------------------------------------------------------------------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T19:54:44.833

如果您在显示线程之上运行，则只能以该线程允许的速度进行处理和绘制。我可能会建议在另一个线程中绘制位图，然后使用表面支架解锁、绘制位图并发布。

# cassandra - 时间戳/日期作为 cassandra 列族/赫克托的关键

> ID：13700288
> 
> 赞同：2
> 
> 时间：2012-12-04T10:01:55.833
> 
> 标签：cassandra, hector

我必须创建和查询具有复合键为 [timestamp,long] 的列族。另外，在查询时，我想对时间戳进行范围查询（例如 xxx 和 yyy 之间的时间戳）这可能吗？

目前我正在做一些非常有趣的事情（我知道这是不正确的）。我为给定范围创建带有时间戳字符串的键，并与 long 连接。

```
like ,
1254345345435-1234
3423432423432-1234
1231231231231-9999 
```

并将一组密钥传递给 hector api。（所以如果我有 1 个月的日期范围并且我想要每分钟的数据，我创建 30 * 24 * 60 * [辅助键的数量 - 长]）

我可以用复合键解决连接问题。但查询部分是我想要理解的。

据我了解，当我们使用 RandomPartitioner 时，我们不能真正根据范围进行查询，因为键是 MD5 校验和。这种用例的理想设计是什么？

我的架构和要求如下：（实际csh）

```
 CREATE TABLE report(
        ts timestamp,
        user_id long,
        svc1 long,
        svc2 long,
        svc3 long,
        PRIMARY KEY(ts, user_id));

select from report where ts between (123445345435 and 32423423424) and user_id is in (123,567,987) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:20:48.130

您不能对复合键的第一个组件进行范围查询。相反，您应该编写一个标记值，例如 daystamp（当天午夜的 unix 纪元）作为键，然后编写一个复合列作为 timestamp:long。这样，您可以提供构成您的范围的键，并对复合列的时间戳组件进行切片。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T16:23:08.467

非规范化！您必须以能够启用您希望执行的查询类型的方式对您的模式进行建模。我们为这种情况创建了一个反向（又名倒置，反向）索引。

```
CREATE TABLE report(
    KEY uuid PRIMARY KEY,
    svc1 bigint,
    svc2 bigint,
    svc3 bigint
);

CREATE TABLE ReportsByTime(
    KEY ascii PRIMARY KEY
) with default_validation=uuid AND comparator=uuid;

CREATE TABLE ReportsByUser(
    KEY bigint PRIMARY KEY
)with default_validation=uuid AND comparator=uuid; 
```

请参阅[此处](http://www.royans.net/arch/cassandra-inverted-index/)以获得很好的解释。您现在正在做的是`ascii`在表中生成您自己的键`times`，以使您自己能够执行您想要的范围切片查询 - 它不一定`ascii`只是您可以用来以编程方式生成您自己的切片键的东西。

您可以使用这种方法来促进您的所有查询，这可能不会直接适合您的应用程序，但想法是相同的。您可以通过向上面每个表的列键添加有意义的值来从中挤出更多信息。

```
cqlsh:tester> select * from report;
 KEY                                  | svc1 | svc2 | svc3
--------------------------------------+------+------+------
 1381b530-1dd2-11b2-0000-242d50cf1fb5 |  332 |  333 |  334
 13818e20-1dd2-11b2-0000-242d50cf1fb5 |  222 |  223 |  224
 13816710-1dd2-11b2-0000-242d50cf1fb5 |  112 |  113 |  114

cqlsh:tester> select * from times;
 KEY,1212051037 | 13818e20-1dd2-11b2-0000-242d50cf1fb5,13818e20-1dd2-11b2-0000-242d50cf1fb5 | 1381b530-1dd2-11b2-0000-242d50cf1fb5,1381b530-1dd2-11b2-0000-242d50cf1fb5
 KEY,1212051035 | 13816710-1dd2-11b2-0000-242d50cf1fb5,13816710-1dd2-11b2-0000-242d50cf1fb5 | 13818e20-1dd2-11b2-0000-242d50cf1fb5,13818e20-1dd2-11b2-0000-242d50cf1fb5
 KEY,1212051036 | 13818e20-1dd2-11b2-0000-242d50cf1fb5,13818e20-1dd2-11b2-0000-242d50cf1fb5

cqlsh:tester> select * from users;
 KEY         | 13816710-1dd2-11b2-0000-242d50cf1fb5 | 13818e20-1dd2-11b2-0000-242d50cf1fb5
-------------+--------------------------------------+--------------------------------------
 23123123231 | 13816710-1dd2-11b2-0000-242d50cf1fb5 | 13818e20-1dd2-11b2-0000-242d50cf1fb5 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T12:16:22.510

为什么不使用宽行，其中键是时间戳，列名称为长值，那么您可以将多个键（时间戳）传递给 getKeySlice，并通过名称（即 id）选择多个列到 withColumnSlice。

由于我不知道什么是列名和值，我觉得这可以帮助你。您能否提供有关列族定义的更多详细信息。

# haskell - Haskell 课堂展示

> ID：13700295
> 
> 赞同：1
> 
> 时间：2012-12-04T10:02:15.117
> 
> 标签：haskell

我想打印一个矩阵。例如：

```
 data Matrix = Matr [[Int]]

       instance Show Matrix where
                show(Matr (x:xs)) = show(x)++"\n"++show(head(xs))

       Example of use:

                Matr [[1,2,3],[4,5,6],[7,8,9]]
                [1,2,3]
                [4,5,6]
                [7,8,9] -- this line is not showed on my instance Show 
```

如何显示矩阵中的所有元素？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:20:40.240

您必须遍历所有元素

```
instance Show Matrix where
  show (Matr d) = print d
    where print [] = []
          print (x:xs) = show x ++ "\n" ++ print xs 
```

其他方式

```
instance Show Matrix where
  show (Matr d) = concatMap ((++"\n").show) d 
```

# cppcheck - 由于包含路径，cppcheck 未检测到资源泄漏

> ID：13700297
> 
> 赞同：1
> 
> 时间：2012-12-04T10:02:18.687
> 
> 标签：cppcheck

有人可以帮忙吗？当我简单地通过“cppcheck 文件”分析我的源代码时，它会输出分析结果，例如

```
Checking ../bst_hal/daemon_rls/src/event_handler.c...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_ARCH_ARM...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_ARCH_ARM;CFG_HANDLE_FAULT_SIG...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_CHECK_DISPLAY_STATE...
**[../bst_hal/daemon_rls/src/event_handler.c:236]: (error) Resource leak: fd_w**
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_CHECK_DISPLAY_STATE;CFG_SENSORD_SIMU...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_DISCARD_OLD_CMD...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_HANDLE_FAULT_SIG...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_SENSORD_SIMU... 
```

但是在我通过 -I 指定了一些路径之后：

```
cppcheck --force -I<patha> -I<pathb> ... file.c 
```

我的泄漏错误消失了：

```
Checking ../bst_hal/daemon_rls/src/event_handler.c...
Checking ../bst_hal/daemon_rls/src/event_handler.c: ARRAY_SIZE...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_ARCH_ARM...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_CHECK_DISPLAY_STATE...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_CHECK_DISPLAY_STATE;CFG_SENSORD_SIMU...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_DATA_INPUT_SRC_FILE...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_LOG_TO_LOGCAT...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_LOG_WITH_TIME...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_SENSORD_SIMU...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_SENSOR_G_EMU...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_TARGET_OS_ANDROID...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CFG_TARGET_OS_LINUX...
Checking ../bst_hal/daemon_rls/src/event_handler.c: CONTAINER_OF...
Checking ../bst_hal/daemon_rls/src/event_handler.c: OFFSET_OF... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:50:00.143

我是一名 Cppcheck 开发人员。这看起来很有趣。源代码是开源的吗？

# colorbox - 颜色框窗口大小证明

> ID：13700303
> 
> 赞同：0
> 
> 时间：2012-12-04T10:02:27.097
> 
> 标签：colorbox

我正在尝试使用以下 js 调用 colorbox：

```
$.colorbox({html: '<img src="example.com/some.jpg">some more html tags..',}); 
```

img 是动态生成的。问题是颜色框打开但窗口很小。如何使颜色框自动对齐窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T04:37:05.183

你知道图像的尺寸是多少吗？如果是这样，您可以通过将尺寸放在`<img>`元素上来解决它：

```
<img src='example.jpg' width='500' height='500'/> 
```

# java - EJB 和 CDI bean 序列化的最佳实践

> ID：13700306
> 
> 赞同：23
> 
> 时间：2012-12-04T10:02:31.357
> 
> 标签：java, serialization, ejb, deserialization, cdi

我还没有遇到任何与序列化相关的问题。但是 PMD 和 Findbugs 检测到一系列关于序列化的潜在问题。一个典型的案例是被检测为不可序列化的注入记录器。但还有更多 -`EntityManager`和几个 CDI bean。

我还没有找到任何关于如何正确处理序列化的最佳实践。

*   将通过反序列化注入`@Inject`和`@PersistenceContext`重新注入的字段吗？
*   他们应该被标记为`transient`？
*   还是我应该忽略/关闭代码检查？
*   我真的应该按照 PMD 的建议为所有这些领域提供访问器吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-11-19T17:57:09.270

我意识到这是一个老问题，但我相信提供的唯一答案是不正确的。

> 由@Inject 和@PersistenceContext 注入的字段会在反序列化时重新注入吗？

不，他们不会。我个人在集群环境中使用 JBoss 体验过这一点。如果 bean 具有钝化能力，那么容器必须注入一个可序列化的代理。该代理被序列化和反序列化。一旦反序列化，它将找到正确的注入并重新连接它。但是，如果您将字段标记为瞬态，则代理不会序列化，并且您将在访问注入的资源时看到 NPE。

需要注意的是，注入的资源或 bean 不一定是 Serializable，因为代理会。唯一的例外是必须可序列化或注入瞬态的 @Dependent 范围 bean。这是因为在这种情况下不使用代理。

> 它们应该被标记为瞬态吗？

不，见上文。

> 还是我应该忽略/关闭代码检查？

这取决于你，但这是我会做的。

> 我真的应该按照 PMD 的建议为所有这些领域提供访问器吗？

我不会。在我们的项目中，当我们知道我们正在使用 CDI 时，我们会禁用此检查。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-08-14T19:30:47.320

这个答案将详细说明 EJB 3.2 ( [JSR 345](https://jcp.org/en/jsr/detail?id=345) )、JPA 2.1 ( [JSR 338](http://jcp.org/en/jsr/detail?id=338) ) 和 CDI 1.2 ( [JSR 346](http://docs.jboss.org/cdi/spec/1.2/cdi-spec.html) ) 的序列化/钝化语义。值得注意的是，Java EE 7 总体规范 ( [JSR 342](http://www.jcp.org/en/jsr/detail?id=342) )、Managed Beans 1.0 规范 ( [JSR 316](http://download.oracle.com/otndocs/jcp/managed_beans-1.0-fr-eval-oth-JSpec/) ) 和 Commons Annotations 规范 1.2 ( [JSR 250](http://jcp.org/en/jsr/detail?id=250) ) 在序列化/钝化。

我还将涉及静态代码分析器的主题。

# EJB

相关章节是“4.2 有状态会话 Bean 的会话状态”和“4.2.1 实例钝化和会话状态”。

`@Stateless`并且`@Singleton`实例永远不会被钝化。

`@Stateful`实例可能被钝化。从 EJB 3.2 开始，类开发人员可以使用`@Stateful(passivationCapable=false)`.

EJB 规范明确指出，对诸如`UserTransaction`、`EntityManagerFactory`和容器管理之类的事物的引用`EntityManager`由容器负责。除非持久性上下文中的所有实体和 EntityManager 实现都是可序列化的，否则不会钝化使用扩展持久性上下文的 @Stateful 实例。

请注意，应用程序管理的 EntityManager 始终使用扩展的持久性上下文。此外，@Stateful 实例是唯一可以使用具有扩展持久性上下文的容器管理的 EntityManager 的 EJB 会话实例类型。此持久性上下文将绑定到 @Stateful 实例的生命周期，而不是单个 JTA 事务。

EJB 规范没有明确说明容器管理的具有扩展持久性上下文的 EntityManager 会发生什么。我的理解是：如果有一个扩展的持久性上下文，那么这个家伙必须根据之前定义的规则被视为可序列化或不可序列化，如果是，则进行钝化。如果钝化继续进行，那么@Stateful 类开发人员只需关心对应用程序管理的实体管理器的引用。

除了描述我们作为开发人员应该做出的假设之外，EJB 规范没有指定瞬态字段会发生什么。

第 4.2.1 节说：

> Bean Provider 必须假定瞬态字段的内容可能会在 PrePassivate 和 PostActivate 通知之间丢失。
> 
> [...]
> 
> 虽然容器不需要使用 Java 编程语言的序列化协议来存储钝化会话实例的状态，但它必须达到等效的结果。一个例外是容器不需要在激活期间重置瞬态字段的值。通常，不鼓励将会话 bean 的字段声明为瞬态。

老实说，要求容器“达到与 Java 序列化协议相同的结果”，同时完全没有说明瞬态字段会发生什么，这是非常可悲的。带回家的教训是，不应将任何东西标记为瞬态。对于容器不能处理的字段，使用`@PrePassivate`写a`null`和`@PostActivate`restore。

# JPA

JPA 规范中没有出现“钝化”一词。`EntityManagerFactory`JPA 也没有为、`EntityManager`和`Query`等类型定义序列化语义`Parameter`。规范中与​​我们相关的唯一一句话是（“6.9 查询执行”部分）：

> CriteriaQuery、CriteriaUpdate 和 CriteriaDelete 对象必须是可序列化的。

# CDI

“6.6.4.钝化作用域”节将钝化作用域定义为显式注释的作用域`@NormalScope(passivating=true)`。此属性默认为 false。

一个暗示是`@Dependent`——这是一个伪作用域——不是一个能够钝化的作用域。同样值得注意的是，`javax.faces.view.ViewScoped`无论出于何种原因，大多数互联网似乎都相信这不是一个能够钝化的范围。例如，“Java 9 Recipes: A Problem-Solution Approach”一书中的“17-2\. Developing a JSF Application”一节。

具有钝化能力的作用域要求声明“具有该作用域的类的实例具有钝化能力”（“6.6.4\. 钝化作用域”一节）。“6.6.1\. 具有钝化能力的 bean” 节将这样的对象实例简单地定义为可转移到辅助存储的对象实例。特殊的类注释或接口不是明确的要求。

EJB 的实例：s @Stateless 和 @Singleton 不是“具有钝化能力的 bean”。@Stateful 可能是（有状态是唯一让 CDI 管理生命周期的 EJB 会话类型 - 即，永远不要将 CDI 范围放在 @Stateless 或 @Singleton 上）。如果其他“托管 bean”及其拦截器和装饰器都是可序列化的，则它们只是“具有钝化能力的 bean”。

不被定义为“支持钝化的 bean”并不意味着无状态、单例、EntityManagerFactory、EntityManager、Event 和 BeanManager 等内容不能用作您编写的支持钝化的实例中的依赖项。这些东西被定义为“支持钝化的依赖项”（参见“6.6.3\. 支持钝化的依赖项”和“3.8\. 附加的内置 bean”部分）。

CDI 通过使用具有钝化功能的代理使这些依赖项具有钝化能力（请参阅“5.4\. 客户端代理”和“7.3.6\. 资源生命周期”一节中的最后一个项目符号项）。请注意，要使 EntityManagerFactory 和 EntityManager 等 Java EE 资源具有钝化能力，它们必须声明为 CDI 生产者字段（“3.7.1\. 声明资源”部分），它们不支持除 @Dependent 之外的任何其他范围（请参阅“3.7\. 资源”部分）并且必须在客户端使用 @Inject 查找它们。

其他@Dependent 实例——尽管没有以正常范围声明并且不需要以CDI“客户端代理”为前端——如果该实例可转移到辅助存储（即可序列化），也可以用作具有钝化能力的依赖项。这个家伙将与客户端一起序列化（请参阅“5.4.客户端代理”部分中的最后一个项目符号项）。

为了完全清楚并提供一些例子；@Stateless 实例、对 CDI 生成的 EntityManager 的引用和可序列化的 @Dependent 实例都可以用作类中的实例字段，并带有钝化能力范围的注释。

# 静态代码分析器

静态代码分析器是愚蠢的。我认为对于高级开发人员来说，他们与其说是助手，不如说是令人担忧的原因。这些分析器针对可疑的序列化/钝化问题引发的错误标志的价值肯定非常有限，因为 CDI 要求容器验证实例“确实具有钝化能力，此外，它的依赖项具有钝化能力”或“抛出javax.enterprise.inject.spi.DeploymentException 的子类”（“6.6.5\. 钝化能力的 bean 和依赖项的验证”和“2.9\. 容器自动检测到的问题”一节）。

最后，正如其他人所指出的，值得重复一遍：我们可能永远不应该将字段标记为`transient`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T06:50:21.797

PMD 和 FindBugs 只检查接口，也没有关于代码运行环境的信息。要使工具安静下来，您可以将它们标记为瞬态，但它们都将在反序列化时正确地重新注入，并且无论瞬态关键字如何都将首次使用。

# iphone - 是否可以为 infoPlist.strings（应用程序名称）设置默认语言？

> ID：13700307
> 
> 赞同：2
> 
> 时间：2012-12-04T10:02:34.600
> 
> 标签：iphone, ios, ipad, localization

我有一个 iPad 应用程序，我也想在其中本地化应用程序名称。我知道如何通过添加 infoPlist.strings 文件来做到这一点。（假设）到目前为止，我已经添加了两种运行良好的俄语和英语。现在的问题是我想将俄语名称设置为默认值的任何其他人。就像如果我选择法语，那么应用程序名称应该是俄语，如果是俄语，那么俄语，如果是英语，那么只有应用程序名称应该是英语..

如果您需要更多信息，请告诉我。目前我正在使用下面的代码。

```
 NSUserDefaults *localeDefaults = [NSUserDefaults standardUserDefaults];

    [localeDefaults removeObjectForKey:@"AppleLanguages"];

    NSString *currentDeviceLanguage = [NSLocale preferredLanguages][0];

#ifdef DEBUG
    NSLog(@"language:%@",currentDeviceLanguage);
#endif

    if([currentDeviceLanguage isEqualToString:@"en"])
    {
        [localeDefaults setObject:@[@"en"] forKey:@"AppleLanguages"];
    }
    else
    {
        [localeDefaults setObject:@[@"fr"] forKey:@"AppleLanguages"];
    }

    [localeDefaults synchronize]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:43:48.800

我不认为这是支持的，Apple 是一家讲英语的公司，所以英语是默认的“基线”语言。

我可以理解您为什么要在其他俄语国家（例如乌克兰或白俄罗斯）默认使用俄语。

您可以进行乌克兰（英国）和白俄罗斯（是）本地化并复制俄语翻译，尽管我认为这将是一个丑陋的黑客解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-10T07:03:08.683

这可以使用文件[`CFBundleDevelopmentRegion`](https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CoreFoundationKeys.html#//apple_ref/doc/uid/20001431-130430)中的密钥来实现`Info.plist`。如果应用程序不包含用户首选语言的本地化，请将其值设置为您希望系统使用的默认语言。

# objective-c - 如何检查是否使用 Pass in Passbook

> ID：13700310
> 
> 赞同：1
> 
> 时间：2012-12-04T10:02:37.937
> 
> 标签：objective-c, ios6, xcode4.5, passbook

我需要在我的一个应用程序中使用 PassBook。我已成功创建通行证。我最近两天一直在研究 PassBook 文档，但无法弄清楚如果我们想知道通行证是否已被使用，我该如何做到这一点？由于通行证独立于应用程序，所以我猜我们的网络服务器应该了解它。可能吗？

任何方向将不胜感激！

法鲁克·贾维德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:09:18.990

通行证通常会有条形码，就像票上的条形码一样。然后我们扫描条形码，您的背部应该使该条形码无效，现在当再次扫描它时，它的代码将显示为无效。

您可以通过 Apple 的推送通知服务器更新通行证，告诉它它已被使用。

# c++ - 如何使用 string::find 在一次操作中查找“+”或“-”

> ID：13700311
> 
> 赞同：6
> 
> 时间：2012-12-04T10:02:44.287
> 
> 标签：c++, string, stl, find

我想找到复数`+`或`-`复数的位置，例如

```
x + y*i 

x - y*i 
```

通常，我会这样做：

```
int found = str.find("+");
if (found != string::npos)
    cout << "'+' also found at: " << found << endl;

found = str.find("-");
if (found != string::npos)
    cout << "'-' also found at: " << found << endl; 
```

如何`find`在一次运行中提供多个选项来查找？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T10:05:09.013

使用[`std::string::find_first_of()`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_of)：

```
size_t found = str.find_first_of("+-"); 
```

其中（来自链接的参考页面）：

> **查找与给定字符序列中的一个字符相等的第一个字符。**搜索从 pos 开始，即找到的字符不能位于 pos 之前的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:09:08.740

使用`find_first_of()`.

这是`std::string`方法的参考。 [http://www.cplusplus.com/reference/string/string](http://www.cplusplus.com/reference/string/string)

# batch-file - 创建批处理文件以阻止特定程序

> ID：13700312
> 
> 赞同：0
> 
> 时间：2012-12-04T10:02:47.533
> 
> 标签：batch-file

如何创建自动运行批处理文件来阻止/关闭便携式程序？

例如：如果（xxx.exe 正在运行）则（立即关闭或阻止访问互联网）

谢谢你。

我已经测试了这个批处理命令：

```
@echo off
:TOP
    tasklist /FI "IMAGENAME eq taskmgr.exe" /FO | grep taskmgr.exe
        if ERRORLEVEL == 0 taskkill /f /im taskmgr.exe
GOTO TOP 
```

但它无法运行，这是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:33:40.497

我很确定这是不可能的，无论如何都是批量的。

您可以编辑某些文件的注册表项以阻止它们运行，但这将是系统范围的，而不仅仅是便携式程序。

有太多的变量需要考虑，这真的不是你可以批量做的事情。

# fortran - 使用模块文件分发已编译的 fortran 库

> ID：13700315
> 
> 赞同：2
> 
> 时间：2012-12-04T10:03:02.810
> 
> 标签：fortran

我有一个`Fortran`使用很多模块的库。我`ifort`在 Windows 上使用编译器。因此，我得到了`*.lib`库的`*.mod`文件和使用的模块的文件。

`*.mod`这样做的缺点是，如果我想在另一个程序中使用已编译的库，我还必须分发文件。如何防止这种情况？我看到两种可能性：

1.  创建一个接口，其中定义了用于调用库模块内的函数或过程的函数。所以，我只需要提供定义接口的文件。
2.  使用函数定义中应该从库外部使用的所有模块函数和过程使用 c 接口和导出名称`bind(c)`。然后我可以使用类 c 的头文件分发该库。

还有其他可能吗？分发使用模块的已编译 fortran 库的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:41:45.787

我认为，`.mod`到目前为止，如果应该使用从 Fortran 调用的文件，那么分发文件也是最简单的。如果要从其他语言调用，则无论如何都需要 C 接口。

坏事是失去了 Fortran 显式接口。如果您提供带有接口块的包含文件，则使用选项号 1 您可能仍然可以拥有它，但`.mod`恕我直言，仅提供文件更好。

# excel - Excel宏来组装word文档

> ID：13700316
> 
> 赞同：1
> 
> 时间：2012-12-04T10:03:03.913
> 
> 标签：excel, ms-word, vba

我考虑修改我的宏代码以进行优化，因为：我的宏为 excel 文件的每一行创建一个新文档并将其保存在第 j 行的第二列的名称下 .. 结果我得到一个excel文件5行，5word文档，多用户，数量庞大！所以我想在一个单字文档中组装，我的意思是，宏应该在单个文档中创建一个新页面，而不是为每个文档创建一个新行，结果我只会得到 1 个单词文档 5 页在线获取excel文件5。是 - 我可以请吗？

代码：

```
Sub MacroAutoJB() 

Dim WordApp As Word.Application 
Dim WordDoc As Word.Document 
Dim oWdApp As Object 

Dim i As Byte 
Dim sChemin As String 
Dim wb As Workbook 

Dim OutApp As Object 
Dim OutMail As Object 
Dim strbody As String 

On Error Resume Next 
Dim nom As String 
Dim sName As String 
Dim sPath As String 

On Error Resume Next 
Dim j As Integer 
j = ActiveSheet.UsedRange.Rows.Count 'count number of lines used in the file

Dim n As Byte 
n = Cells(1, Columns.Count).End(xlToLeft).Column 

If ActiveWorkbook.Name Like "WPaie*.xls" Then 

    user = Environ("username") 
    sName = ActiveWorkbook.Name 
    sPath = "C:\Documents and Settings\" & user & "\My Documents\" 
    sName = Replace(sName, ".xls", "_Word") 
    MkDir sName 

    For j = 2 To j 'start the loop the opeation until the next will be for each line used in the file

        Set WordApp = CreateObject("word.application") 
        nom = Sheets(1).Cells(j, 2) 
        mail = Sheets(1).Cells(2, n) 

        Set oWdApp = CreateObject("Word.Application") 
        Set WordDoc = oWdApp.Documents.Open("C:\Documents and Settings\" & user & "\Class.doc") 

        For i = 1 To n - 1 
            WordDoc.Bookmarks("Sig" & i).Range.Text = Cells(j, i) 
        Next i 

        WordDoc.Bookmarks("Signet").Range.Text = Cells(j, 2) 
        WordDoc.Bookmarks("Sigmail").Range.Text = Cells(j, n) 

        WordDoc.SaveAs Filename:=sPath & sName & "\" & nom & ".doc" 
        WordApp.Visible = False 
        oWdApp.Quit 
        ActiveDocument.Close True 
        WordApp.Quit 

    Next j 
    ActiveWorkbook.Close 
```

# cloud-foundry - Cloud Foundry 中基于 jesque 的应用程序的连接被拒绝

> ID：13700318
> 
> 赞同：0
> 
> 时间：2012-12-04T10:03:06.077
> 
> 标签：cloud-foundry

我正在尝试`resque(i.e jesque java version)`在 Cloud Foundry 中部署基于独立的应用程序，我在部署应用程序时绑定了 redis 服务。

我正在使用`STS`所有这些过程。但是我越来越像

```
 redis.clients.jedis.exceptions.JedisConnectionException: java.net.ConnectException: Connection refused
        at redis.clients.jedis.Connection.connect(Connection.java:134)
        at redis.clients.jedis.BinaryClient.connect(BinaryClient.java:69)
        at redis.clients.jedis.Connection.sendCommand(Connection.java:79)
        at redis.clients.jedis.BinaryClient.select(BinaryClient.java:148)
        at redis.clients.jedis.Jedis.select(Jedis.java:328)
        at net.greghaines.jesque.TestUtils.createJedis(TestUtils.java:75)
        at net.greghaines.jesque.TestUtils.resetRedis(TestUtils.java:45)
        at com.accenture.creditcard.UseCreditCard.resetRedis(UseCreditCard.java:23)
        at com.accenture.creditcard.UseCreditCard.main(UseCreditCard.java:56)
    Caused by: java.net.ConnectException: Connection refused
        at java.net.PlainSocketImpl.socketConnect(Native Method)
        at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
        at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at redis.clients.jedis.Connection.connect(Connection.java:129) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:46:29.990

将应用程序推送到云代工厂时，CF 提供的数据服务具有不同的配置，例如，您自己的配置中的用户名/密码。对于 Java 独立应用程序，您必须首先从 Cloud Foundry 提供的名为“VCAP_SERVICES”的可行环境中检索绑定服务的连接信息。您应该找到设置与 Cloud Foundry 提供的 Redis 服务的连接所需的所有属性。

对于其他类型的应用程序，例如 spring web 应用程序，CF 有一个称为自动重新配置的功能，它负责按照特定的编程约定自动建立连接。这是您感兴趣的文档：http: [//docs.cloudfoundry.com/frameworks/java/spring/spring.html](http://docs.cloudfoundry.com/frameworks/java/spring/spring.html)

# sql - SQL Server、ISABOUT、加权项

> ID：13700320
> 
> 赞同：10
> 
> 时间：2012-12-04T10:03:23.930
> 
> 标签：sql, sql-server, full-text-search, containstable, isabout

我试图弄清楚加权术语在 SQL SERVER 中的 ISABOUT 查询中是如何工作的。

这是我目前所在的位置：

每个查询都返回以下行：

**QUERY 1（权重1）：** *初始排名*

```
SELECT * FROM CONTAINSTABLE(documentParts, title, 'ISABOUT ("e" weight (1) ) ') ORDER BY RANK DESC, [KEY]

KEY     RANK
306342  249
272619  156
221557  114 
```

**QUERY 2（权重 0.8）：** *排名增加，保留初始顺序*

```
SELECT * FROM CONTAINSTABLE(documentParts, title, 'ISABOUT ("e" weight (0.8) ) ') ORDER BY RANK DESC, [KEY]

 KEY     RANK
 306342  321
 272619  201
 221557  146 
```

**QUERY 3（权重 0.2）：** *排名增加，保留初始顺序*

```
SELECT * FROM CONTAINSTABLE(documentParts, title, 'ISABOUT ("e" weight (0.2) ) ') ORDER BY RANK DESC, [KEY]

 KEY    RANK
 306342 998
 272619 877
 221557 692 
```

**QUERY 4（权重 0.17）：** *排名下降，最佳匹配现在排在最后，这些术语的反向行为从 0.17 开始*

```
SELECT * FROM CONTAINSTABLE(documentParts, title, 'ISABOUT ("e" weight (0.17) ) ') ORDER BY RANK DESC, [KEY]

 KEY      RANK
 272619   960
 221557   958
 306342   802 
```

**QUERY 5（权重 0.16）：** *排名上升，最佳匹配现在排名第二*

```
SELECT * FROM CONTAINSTABLE(documentParts, title, 'ISABOUT ("e" weight (0.17) ) ') ORDER BY RANK DESC, [KEY]

 KEY      RANK
 272619   978
 306342   935
 221557   841 
```

**QUERY 6（权重 0.01）：** *排名下降，最佳匹配再次排在最后*

```
SELECT * FROM CONTAINSTABLE(documentParts, title, 'ISABOUT ("e" weight (0.01) ) ') ORDER BY RANK DESC, [KEY]

 KEY    RANK
 221557 105
 272619 77
 306342 50 
```

权重 1 的最佳匹配排名为 249，当权重下降到 0.2 时，最佳匹配排名增加到 998。从 0.2 到 0.17 排名下降，从 0.16 开始，结果倒置（*再现此行为的权重值取决于术语，可能在搜索的列上...*）

似乎有一点重量意味着相反，例如“不包括这个词”。你对这种行为有什么解释吗？为什么体重减少时排名会增加？为什么在某个点之后排名会下降，直到结果反转，您如何预测这一点？

当用户搜索创建以下查询的内容时，我使用自定义“断字器”：

```
CONTAINSTABLE(documentParts, title, 
      'ISABOUT (
          "wordA wordB wordC" weight (0.8), 
          "wordA*" NEAR "wordB*" NEAR "wordC*" weight (0.6), 
          "wordA*" weight (0.1), 
          "wordB*" weight (0.1), 
          "wordC*" weight (0.1), 
       ) ') 
```

我会期待 0.1 字的大排名吗？
以下查询是否与上述相同，我是否期望 0.1 排名出现一些奇怪的行为？

```
CONTAINSTABLE(documentParts, title, '
      ISABOUT ( "wordA wordB wordC" weight (0.8) ), 
      OR ISABOUT ( "wordA*" NEAR "wordB*" NEAR "wordC*" weight (0.6) ), 
      OR ISABOUT ( "wordA*" weight (0.1) ), 
      OR ISABOUT ( "wordB*" weight (0.1) ), 
      OR ISABOUT ( "wordC*" weight (0.1) ), 
      ') 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-17T10:01:40.197

根据我的经验，当权重加起来为 1 时，我得到了最好的结果。

```
CONTAINSTABLE(documentParts, content, 
          'ISABOUT (
              "wordA wordB wordC" weight (0.5), 
              "wordA*" NEAR "wordB*" NEAR "wordC*" weight (0.2), 
              "wordA*" weight (0.1), 
              "wordB*" weight (0.1), 
              "wordC*" weight (0.1) 
           ) ') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:50:58.093

由于时钟在滴答作响，我最终得到了这样的结果，它取得了很好的结果......：

```
SELECT [KEY], SUM([RANK]) AS [RANK] FROM (
    SELECT [KEY], ([RANK]*1)/(SUM([RANK]) OVER( PARTITION BY 1)/ CAST(COUNT([RANK]) OVER( PARTITION BY 1) AS FLOAT)) AS [RANK] 
        FROM CONTAINSTABLE(documentParts, content, 
              'ISABOUT (
                  "wordA wordB wordC" weight (0.8), 
                  "wordA*" NEAR "wordB*" NEAR "wordC*" weight (0.6), 
                  "wordA*" weight (0.4), 
                  "wordB*" weight (0.4), 
                  "wordC*" weight (0.4) 
               ) ') c
        WHERE c.RANK>0
        UNION ALL      
        SELECT [KEY], ([RANK]*2)/(SUM([RANK]) OVER( PARTITION BY 1)/ CAST(COUNT([RANK]) OVER( PARTITION BY 1) AS FLOAT)) AS [RANK] 
        FROM CONTAINSTABLE(documents, title, 
              'ISABOUT (
                  "wordA wordB wordC" weight (0.8), 
                  "wordA*" NEAR "wordB*" NEAR "wordC*" weight (0.6), 
                  "wordA*" weight (0.4), 
                  "wordB*" weight (0.4), 
                  "wordC*" weight (0.4) 
               ) ') c
         WHERE c.RANK>0
    ) t 
    GROUP BY [KEY]
ORDER BY [RANK] DESC 
```

我会把它传递给测试团队，然后收工......

# javascript - $.get 在 Internet Explorer 8 及更低版本中出现 AJAX 错误

> ID：13700323
> 
> 赞同：1
> 
> 时间：2012-12-04T10:03:29.133
> 
> 标签：javascript, jquery, ajax, internet-explorer

AJAX 请求的其余代码工作正常，但此`$.get`请求导致错误。

```
$.get(
    'login.php?pass=' + password , 
    function(data) {
        var check = data;
        $('#main').load(check);
    }
); 
```

错误是`80020101`。

有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:33:45.597

这是一种预感，所以如果有错请告诉我，我将删除我的答案。

您的`login.php`脚本可能会返回 JavaScript，并且在该 JavaScript 中存在错误。专门寻找这样的结构：

```
{
   a: 'x',
   b: 'y',
} 
```

看到大括号前那个悬空的逗号了吗？那绊倒了IE！

**PS**，如果您要清楚地发送这样的密码，我当然希望您使用的是 HTTPS

**PPS**你应该使用`'...?pass=' + encodeURIComponent(password)`

# silverlight - 在 Silverlight 中捕获 ctrl + I 和 ctrl + B

> ID：13700324
> 
> 赞同：1
> 
> 时间：2012-12-04T10:03:29.680
> 
> 标签：silverlight

如何在 Silverlight中捕获`CTRL`+`I`和`CTRL`+ ？`B`当我按`CTRL`+时，会弹出`B`“*整理收藏夹”窗口。*

# matlab - 如何在 MatLab 中进行插值

> ID：13700328
> 
> 赞同：0
> 
> 时间：2012-12-04T10:03:45.600
> 
> 标签：matlab

我有一个 1x1 点矩阵，它指定驱动器相对于时间的速度。该速度在整个操作过程中发生变化；这意味着两点之间的差异正在发生变化。

给你举个例子：`M = [1; 2; 3; 5; 7; 9; 11; 15; 19]`。（只是这是一个 892x1 矩阵）

我想让这个矩阵加倍（所以改变每个时间步的相对速度），同时保持速度变化的方式。例如：`M' = [1; 1.5; 2; 2.5; 3; 4; 5; 6; 7; 8; 9; 10; 11; 13; 15; 17; 19].`

在 MatLab 中是否有一种简单的方法可以做到这一点？

到目前为止，我已经尝试过`upsampling`（用零填充时间步）；`interp`（它用低通插值填充它。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:08:40.850

尝试

```
M = [1; 2; 3; 5; 7; 9; 11; 15; 19];

% create new time, with twice as many sampling times
t_new = linspace(1, numel(M), 2*numel(M)-1);

% interpolate
Mt = interp1(M, t_new), 
```

请注意，`interp1` 它还接受其他参数，例如`spline`或`pchip`允许您指定要使用的插值内核。阅读`help interp1`以获取更多信息。

或者，您可以使用类似的东西

```
pp = spline(t, M);    % creates a cubic-splines interpolator
Mt = ppval(pp, t_new) % to evaluate M at all new times t_new 
```

# mysql - MySQL中视图使用视图的效率

> ID：13700331
> 
> 赞同：2
> 
> 时间：2012-12-04T10:03:51.540
> 
> 标签：mysql, views

我最近被介绍了视图的概念，我发现它们对于将复杂的查询拆分成部分很有帮助。

我的问题是当我开始从视图进行查询时是否存在任何效率劣势，而这些视图又是来自其他视图的查询等...

所以我会例如：

```
view1 -> query from tables A, B & C
view2 -> query from tables D, E & F
view3 -> query joining view1 & view2 
```

查询 view3 而不是设计连接表 A、B、C、D、E 和 F 的单个查询时，会不会有任何速度劣势？

如果我选择使用视图方法，重要的是，我在 view1、view2 和 view3 的设计中有 ORDER BY 子句还是最好不要在任何视图中放置任何 ORDER BY 子句我在查询 view3 时只使用 ORDER BY？

非常感谢您的帮助！博加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:09:41.420

参见`order by`CREATE [VIEW 语法](http://dev.mysql.com/doc/refman/5.5/en/create-view.html)

> 视图定义中允许使用 ORDER BY，但如果您使用具有自己 ORDER BY 的语句从视图中进行选择，则会忽略它。

在[View Processing Algorithms](http://dev.mysql.com/doc/refman/5.5/en/view-algorithms.html)中，您可以看到 MySQL 如何处理视图上的选择。一如既往，这取决于。;-)

该`MERGE`算法似乎是最有效的，因为算法`temptable`首先将视图结果复制到临时表并对其进行查询。但是你不能总是使用合并，见最后一节

> 如果不能使用 MERGE 算法，则必须使用临时表。如果视图包含以下任何构造，则不能使用 MERGE：
> 
> *   聚合函数（SUM()、MIN()、MAX()、COUNT() 等）
> *   清楚的
> *   通过...分组
> *   拥有
> *   限制
> *   UNION 或 UNION ALL
> *   选择列表中的子查询
> *   仅指文字值（在这种情况下，没有基础表）

# java - 将转义的 Unicode 字符转换回实际字符

> ID：13700333
> 
> 赞同：33
> 
> 时间：2012-12-04T10:04:09.560
> 
> 标签：java, unicode, utf-8, utf8-decode

我在 Java 中的字符串变量中有以下值，它的 UTF-8 字符编码如下

```
Dodd\u2013Frank 
```

代替

```
Dodd–Frank 
```

（假设我无法控制如何将此值分配给此字符串变量）

现在如何正确转换（编码）它并将其存储回`String`变量中？

我找到了以下代码

```
Charset.forName("UTF-8").encode(str); 
```

但这会返回一个`ByteBuffer`，但我想要一个`String`返回。

**编辑**：

一些更多的附加信息。

当我使用`System.out.println(str);`我得到

```
Dodd\u2013Frank 
```

我不确定什么是正确的术语（UTF-8 或 unicode）。请原谅我。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-04T10:16:56.667

尝试

```
str = org.apache.commons.lang3.StringEscapeUtils.unescapeJava(str); 
```

来自[Apache Commons Lang](https://commons.apache.org/proper/commons-lang/javadocs/api-3.4/org/apache/commons/lang3/StringEscapeUtils.html#unescapeJava(java.lang.String))

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-04T20:27:31.247

# `java.util.Properties`

您可以利用[`java.util.Properties`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Properties.html)支持带有 '\uXXXX' 转义序列的字符串这一事实，并执行以下操作：

```
Properties p = new Properties();
p.load(new StringReader("key="+yourInputString));
System.out.println("Escaped value: " + p.getProperty("key")); 
```

不优雅，但实用。

为了处理可能的情况`IOExeception`，您可能需要一个 try-catch。

```
Properties p = new Properties();
try { p.load( new StringReader( "key=" + input ) ) ; } catch ( IOException e ) { e.printStackTrace(); }
System.out.println( "Escaped value: " + p.getProperty( "key" ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T18:31:06.987

假设您有一个 Unicode 值，例如 00B0（度数符号，或上标 'o'，如西班牙语中 'primero' 的缩写）

这是一个可以满足您需求的功能：

```
public static String  unicodeToString( char  charValue )
{
    Character   ch = new Character( charValue );

    return ch.toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-26T14:42:57.967

我曾经`StringEscapeUtils.unescapeXml`对从提供 XML 结果的 API 加载的字符串进行转义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-04T19:51:29.250

`UnicodeUnescaper`从`org.apache.commons:commons-text`也可以接受。

`new UnicodeUnescaper().translate("Dodd\u2013Frank")`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-11T06:40:43.030

尝试

> str = org.apache.commons.text.StringEscapeUtils.unescapeJava(str);

因为 org.apache.commons.lang3.StringEscapeUtils 已被弃用。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-10-24T20:42:23.563

也许以下解决方案可以正确解码字符串而无需任何其他依赖项。

这在 scala repl 中有效，但在仅 Java 的解决方案中应该同样有效。

```
import java.nio.charset.StandardCharsets
import java.nio.charset.Charset

> StandardCharsets.UTF_8.decode(Charset.forName("UTF-8").encode("Dodd\u2013Frank"))
res: java.nio.CharBuffer = Dodd–Frank 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-12-04T10:08:35.597

您可以像这样将该字节缓冲区转换为字符串：

```
import java.nio.charset.Charset;
import java.nio.charset.CharsetDecoder;
import java.nio.ByteBuffer

public static CharsetDecoder decoder = CharsetDecoder.newDecoder();

public static String byteBufferToString(ByteBuffer buffer)
{
    String data = "";
    try 
    {
        // EDITOR'S NOTE -- There is no 'position' method for ByteBuffer.
        //                   As such, this is pseudocode.
        int old_position = buffer.position();
        data = decoder.decode(buffer).toString();
        // reset buffer's position to its original so it is not altered:
        buffer.position(old_position);  
    }
    catch (Exception e)
    {
        e.printStackTrace();
        return "";
    }
    return data;
 } 
```

# iphone - 机架空间身份验证

> ID：13700336
> 
> 赞同：1
> 
> 时间：2012-12-04T10:04:16.567
> 
> 标签：iphone, ios, asihttprequest, rackspace-cloud

我正在尝试使用 RackSpace API 进行身份验证以使用 ASIHttp 库获取 Auth-Token 但我的问题是有时它可以正常工作但大多数时候我都遇到了这个崩溃

```
libobjc.A.dylib`objc_release:
0x16cd090:  pushl  %ebp
0x16cd091:  movl   %esp, %ebp
0x16cd093:  subl   $8, %esp
0x16cd096:  calll  0x16cd09b                 ; objc_release + 11
0x16cd09b:  popl   %ecx
0x16cd09c:  movl   8(%ebp), %eax
0x16cd09f:  testl  %eax, %eax
0x16cd0a1:  je     0x16cd0d5                 ; objc_release + 69
0x16cd0a3:  movl   (%eax), %edx
0x16cd0a5:  movl   16(%edx), %edx
0x16cd0a8:  andl   $-4, %edx
0x16cd0ab:  testb  $2, 2(%edx)
0x16cd0af:  je     0x16cd0c5                 ; objc_release + 53
0x16cd0b1:  movl   1002149(%ecx), %ecx
0x16cd0b7:  movl   %ecx, 4(%esp)
0x16cd0bb:  movl   %eax, (%esp)
0x16cd0be:  calll  0x16cc08c                 ; objc_msgSend
0x16cd0c3:  jmp    0x16cd0d5                 ; objc_release + 69
0x16cd0c5:  movl   %eax, (%esp)
0x16cd0c8:  movl   $0, 4(%esp)
0x16cd0d0:  calll  0x16ce9d0                 ; -[NSObject release]
0x16cd0d5:  addl   $8, %esp
0x16cd0d8:  popl   %ebp
0x16cd0d9:  ret 
```

我无法理解到底出了什么问题。请帮我解决这个问题。

编辑 ：

这是我正在使用的代码

```
+ (void)authenticate
{
    [accessDetailsLock lock];
    ASIHTTPRequest *request = [[ASIHTTPRequest alloc] initWithURL:[NSURL URLWithString:RACSPACE_AUTHENTICATE_API]];
    [request addRequestHeader:@"Content-type" value:@"application/json"];

    NSMutableDictionary *dic = [[NSMutableDictionary alloc] init];
    [dic setObject:RACSPACE_USER_NAME forKey:@"username"];
    [dic setObject:RACSPACE_PASSWORD forKey:@"apiKey"];

    NSMutableDictionary *dic1 = [[NSMutableDictionary alloc] init];
    [dic1 setObject:dic forKey:@"RAX-KSKEY:apiKeyCredentials"];

    NSMutableDictionary *finalDic = [[NSMutableDictionary alloc] init];
    [finalDic setObject:dic1 forKey:@"auth"];

    SBJSON *sbJson= [[SBJSON alloc] init];
    NSString *strJson =[sbJson stringWithObject:finalDic];
    NSLog(@"%@",strJson);
    [request setPostBody:(NSMutableData*)[strJson dataUsingEncoding:NSUTF8StringEncoding]];

    [strJson release];
    [dic release];
    [dic1 release];
    [finalDic release];
    [request startSynchronous];

    if (![request error])
    {
        NSDictionary *responseHeaders = [request responseHeaders];
        NSLog(@"Response%@",[responseHeaders description]);
        NSLog(@"Response 2=%@",[request responseString]);
        SBJSON *parser = [[SBJSON alloc] init];
        NSDictionary *jsonObject = [[parser objectWithString:[request responseString]] objectForKey:@"access"];
        [parser release];

        authToken = [[jsonObject objectForKey:@"token"] objectForKey:@"id"];

        NSArray *services = [jsonObject objectForKey:@"serviceCatalog"];

        for (NSDictionary *service in services)
        {
            if ([[service valueForKey:@"type"] isEqualToString:@"object-store"])
            {
                if ([[service valueForKey:@"name"] isEqualToString:@"cloudFiles"])
                {

                    NSDictionary *endpoint = [[service valueForKey:@"endpoints"] objectAtIndex:0];
                    storageURL = [NSURL URLWithString:[endpoint valueForKey:@"publicURL"]];

                }
            }
            else if([[service valueForKey:@"type"] isEqualToString:@"rax:object-cdn"])
            {
                if ([[service valueForKey:@"name"] isEqualToString:@"cloudFilesCDN"])
                {
                    NSDictionary *endpoint = [[service valueForKey:@"endpoints"] objectAtIndex:0];
                    cdnManagementURL = [NSURL URLWithString:[endpoint valueForKey:@"publicURL"]];

                }
            }
        }
        [request release];
        [accessDetailsLock unlock];
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T21:55:22.433

从我所见，您似乎正在释放一个已经在自动释放池中的对象。

看看这一行：

```
NSString *strJson = [sbJson stringWithObject:finalDic]; 
```

从[SBJson 源](https://github.com/stig/json-framework/blob/v3.0.4/Classes/SBJsonWriter.m#L63)我可以看到这返回了一个自动释放的 NSString。然后，您将在此行下面发布：

```
[strJson release]; 
```

这导致 EXC_BAD_ACCESS。

我在 Rackspace 的移动团队工作，所以让我知道这是否适合您，或者我是否可以以任何其他方式提供帮助。

# php - 如何在不发布表单的情况下检查表单中重复的用户名，如果用户名已经存在，则将注意力集中在用户名上？

> ID：13700342
> 
> 赞同：0
> 
> 时间：2012-12-04T10:04:39.270
> 
> 标签：php, javascript, ajax, html

我有一个用户填写的表格。它的用户注册表单。我希望当用户填写用户名文本时，我的表单应该搜索用户名是否存在。如果存在，则用户名文本字段应该获得焦点。我的数据库表名是用户，它包含名为 id、用户名、密码的列，地位。这是我的代码。

```
<form name="user" action="#" method="post">
    <label>Username</label>
    <input type="text" maxlength="25" name="username" />
    /*here i want to check from my db table weather username exists or not*/
    <label>Password</label>
    <input type="password" maxlength="25" name="password" />
    <input type="submit" value="Submit" />
</form> 
```

当用户提交表单时我可以这样做。但我的要求是在不提交表单的情况下检查值，并且用户名应该得到关注。在php中我有以下代码

```
<?php
    mysql_connect("localhost","root","") or die(mysql_error());

    mysql_select_db("test") or die(mysql_error());
    $username = $_REQUEST['username'];
    $query=mysql_query("SELECT * from user where name='$username'");
    $row=mysql_num_rows($query);
    if($row==1){
        echo "true";
    } else {
        echo "false";
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:10:14.027

向您的服务器端脚本发出 ajax 请求，该脚本检查数据库并返回您可以解释的内容。然后在 ajax 成功响应上对其进行操作（聚焦该字段）。

网上有成千上万这样的例子。检查@danish hashmi 的示例（[http://blog.webwizo.com/2011/06/03/check-username-availability-in-php-with-jquery-ajax/](http://blog.webwizo.com/2011/06/03/check-username-availability-in-php-with-jquery-ajax/)）或谷歌搜索更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:10:37.577

HTML 表单

```
<form method="post" action="register.php">
    ......
    <label for="username">Username</label>
    <input type="text" maxlength="25" name="username" id="username">
    ......
</form> 
```

JS

```
<script src="jquery-1.8.0.min.js"></script>
<script>
$(document).ready(function(){
    $('#username').keyup(check_username); //use keyup,blur, or change
});
function check_username(){
    var username = $('#username').val();
    jQuery.ajax({
            type: 'POST',
            url: 'check_username.php',
            data: 'username='+ username,
            cache: false,
            success: function(response){
                if(response == 0){
                   alert('available')
                }
                else {
                     alert('not available')
                     //do perform other actions like displaying error messages etc.,
                }
            }
        });
}
</script> 
```

写下你的表用户名签入`check_username.php`，这个 php 的响应是使用提供的用户名的行数，如下所示

```
<?php
    /*** mysql hostname ***/
    $hostname = 'localhost';

    /*** mysql username ***/
    $username = 'username';

    /*** mysql password ***/
    $password = 'password';

    /*** mysql databse ***/
    $dbname = 'database';

    try 
    {
        $dbh = new PDO("mysql:host=$hostname;dbname=mysql", $username, $password);
        /*** echo a message saying we have connected ***/
        //echo 'Connected to database';
    }
    catch(PDOException $e)
    {
        echo $e->getMessage();
    }   

    $stmt = $dbh->prepare("SELECT * FROM user where name = ?");
    $stmt->execute(array($_POST['username']));
    echo $stmt->rowCount();
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:11:24.163

我正在考虑您在 name="username" 字段的 keyup 事件上绑定检查用户是否存在（应该给它一个 id）。您使用 jquery 或任何其他 js 库吗？
使用库来实现您计划要做的事情会简单得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:12:03.990

为此，您可以在更改事件上设置文本框并将文本框值传递给 ajax 调用，如下所示。
`input type="text" id="username"`

现在在 js 文件中添加以下代码。

```
 $(document).ready(function(){
  $(#username).change(function(e)
  {
    e.preventDefault();
    $.ajax({
       url : 'youphpfile.php?username='+$(#username).val();,
//or $(#username).attr('value')
       dataType: 'json',
       success : function()
       {} 
    });
  });
}); 

```

现在在 youphpfile.php 文件中检查发送的用户名参数。

`$username = $_REQUEST['username']; // $_GET['username']; get will be good for faster response.`

 `mysql_connect` 

`and check username`

你完成了。干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:15:50.000

您可能需要一个 Web 服务来检查用户名是否存在，并且当用户名字段失去焦点时，使用 jQuery 对服务进行 ajax 调用。

```
$(document).ready(function(){
    $('input[name="username"]').blur(function(){
        var txt = $(this);
        var username = txt.val();
        $.ajax({
            type: "POST",
            url: "myUsernameService.php",
            data: { uname: username }
        }).done(function(res) {
            if (res == "false"){
                txt.removeClass("valid").addClass("invalid");
            } else {
                txt.removeClass("invalid").addClass("valid");
            }
        });
    });
}); 
```

我不建议再次关注用户名文本框，因为 AJAX 调用可能需要几秒钟才能返回一个值，此时用户可能正忙于输入另一个字段。

上面的代码假定您在“myUsernameService.php”上有一个方法，该方法接受一个名为“uname”的变量并返回一个字符串“true”或“false”。

# java - Web 服务器可以在没有请求的情况下将数据发送到桌面应用程序吗？

> ID：13700347
> 
> 赞同：1
> 
> 时间：2012-12-04T10:05:03.687
> 
> 标签：java, json, swing, request

我在每台 PC 上都有几台 PC，我设置了小型 swing 应用程序，通过 JSON 请求获取数据到一个 Web 服务器。我可以从 Web 服务器接收数据而不向 Web 服务器发送请求，换句话说，Web 服务器可以在没有 Java 应用程序请求的情况下发送数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:07:43.697

这可以通过多种方式实现。一种常见的方法是打开一个连接并在客户端应用程序中进行阻塞读取。收到东西后，它看起来像是来自服务器的推送。然后您处理推送并进行另一次阻塞读取。

另一种选择是定期检查网络服务器上是否有适合您的东西。您将重试间隔设置得足够频繁，因此从您的应用程序的角度来看，它看起来像是实时推送。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:15:02.497

如果您使用 HTTP，我认为最明智的方法是放弃实时要求并使用每 5 秒轮询一次服务器的线程。始终保持 HTTP 连接打开的成本很高，因为它会阻塞请求处理器线程并限制您可以拥有的客户端数量。

如果您确实需要近乎实时的更新（通常情况并非如此），您也可以考虑迁移到注册机制之类的东西。您必须在客户端上打开一个服务器，并在客户端向服务器注册其地址后让服务器推送更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-12T14:09:02.477

如果你有足够的服务器资源，你可以考虑使用 websockets。

每台 PC 都可以打开一个到服务器的套接字。当您打开套接字时，您需要向服务器发送 pc 的唯一 ID。然后，您需要将此 ID 存储在包含所有在线 pc 和套接字的数据库或文件中。

然后服务器将知道哪些电脑在线以及使用哪个套接字与这台电脑通信。在此之后，您可以根据您的应用程序向这台 PC 发送您需要的任何信息。

# javascript - 表中的 appendChild

> ID：13700349
> 
> 赞同：0
> 
> 时间：2012-12-04T10:05:06.807
> 
> 标签：javascript, jquery, graphics, onload, appendchild

好的，这解释起来有点复杂，所以我希望我能理解这一点。

我有一张包含一些折线图的表格。该表工作正常，但在 IE6 和 7 中未绘制线条（8 和 9 工作正常）

我调用一个函数来计算线条，然后用该线条创建一个 div。然后该函数使用 appendchild() 将该行包含在表中。

XHTML

```
<table>
<tr class="outTR">
        <th><h:outputText value="#  {valuegraph}" /></th>
        <c:forEach items="#{valuegraphlist}" var="el">
            <td><h:outputText value="#{value}" /></td>
        </c:forEach>
    </tr>
</table> 
```

JAVASCRIPT

这就是我调用第一个函数的方式

```
$(document).ready(function() {
    initgraphics();
});

function initgraphics() {
    var p = $("#imgId_" + firstStep);
    var position = p.position();
    var img = $("img:first", ".stats");
    var i = 0;
    var width2 = img.width() / 2;
    var Y0 = position.top + p.height();
    $("img.img_base", ".stats").each(function() {
        jsBaseX[i++] = $(this).position().left + width2;
    });

    drawLineGraphic(jsBaseX, valuegraph, Y0, "0000FF", "00FF00", true);
}

function drawLineGraphic(BaseX, arrY, Y0, colourDot, colourLine, minus) {

    $.each(BaseX, function() {
        nextX = this;
        nextY = Y0 - arrY[idx];

        doter(nextX, nextY, 4, colourDot);

        lastX = nextX;
        lastY = nextY;
        idx++;
    });
}

function doter(x, y, d,color){
var str="background: #"+color+";
var ele = document.createElement("div");
ele.setAttribute("style", str);
ele.setAttribute("class", "class1");
ele.setAttribute("id", "p_"+x+"_"+y);   
document.body.appendChild(ele); 
```

}

当函数到达 appendChild... 它崩溃...

有任何想法吗？？

# javascript - 无法将未定义转换为对象？

> ID：13700359
> 
> 赞同：0
> 
> 时间：2012-12-04T10:05:40.713
> 
> 标签：javascript, jquery

错误：无法将未定义转换为对象：`this.page[1]=100;`。已经定义好了，怎么回事？ ![在此处输入图像描述](../Images/a05a2b9b59da34bc2d3a26fdbed72a5f.png)

```
var sheepclass ;
(function($) {
    sheepclass = function(handler){
        var $div = $('div');            
        this.handler = $.extend({
            'sizes': 'thin', 
            'eat': 'grass',
            'color': 'white',
            'page':[],
            myalert: function() {
                myconsole();
                function myconsole() {
                    this.page[0] = 100; 
                    console.log(this.page[0]);
                }
            },
            myalert2: function() {
                this.myalert();
            }
        },handler);
    }
})(jQuery);

$(document).ready(function(){
    var blacksheep = new sheepclass({'color':'black'});
    blacksheep.handler.myalert2();
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:20:16.913

很多这样的代码似乎毫无意义。处理程序是不必要的`document.ready`，因为没有 DOM 操作，就像 IIFE 一样。您的代码可以简化为：

```
var sheepclass = function(handler){
    this.handler = $.extend({
        'sizes': 'thin', 
        'eat': 'grass',
        'color': 'white',
        'page':[],
        myalert: function() {
            var context = this;
            function myconsole() {
                context.page[0] = 100; 
                console.log(context.page[0]);
            }
            myconsole();
        }
    },handler);
}

var blacksheep = new sheepclass({'color':'black'});
blacksheep.handler.myalert(); 
```

还要注意，没有必要使用一个除了调用另一个方法之外什么都不做的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:10:55.653

试试这个，通过使用`that`辅助变量传递上下文

```
var sheepclass ;
(function($) {
    sheepclass = function(handler){
        var $div = $('div');
        var that = this;
        this.handler = $.extend({
            'sizes': 'thin', 
            'eat': 'grass',
            'color': 'white',
            'page':[],
            myalert: function() {
                myconsole();
                function myconsole() {
                    that.handler.page[0] = 100; 
                    console.log(that.handler.page[0]);
                }
            },
            myalert2: function() {
                this.myalert();
            }
        },handler);
    }
})(jQuery);

$(document).ready(function(){
    var blacksheep = new sheepclass({'color':'black'});
    blacksheep.handler.myalert2();
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:11:14.303

inside`myconsole` `this`不等于你的对象，而是指`Window`代。因此`this.page`是`undefined`- 您索引的值`page`没有任何区别。

您必须将呼叫更改为：

```
myconsole.call(this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:14:14.413

因为“this”指的是 myconsole 函数。

尝试这个：

```
var sheepclass ;
(function($) {
    sheepclass = function(handler){
        var $div = $('div');    
        **var page = this.page;**
        this.handler = $.extend({
            'sizes': 'thin', 
            'eat': 'grass',
            'color': 'white',
            'page':[],
            myalert: function() {
                myconsole();
                function myconsole() {
                    **page**[0] = 100; 
                    console.log(**page**[0]);
                }
            },
            myalert2: function() {
                this.myalert();
            }
        },handler);
    }
})(jQuery); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:16:48.727

`that`为_`this`

```
 var sheepclass ;
    (function($) {
        sheepclass = function(handler){
            var $div = $('div');            
            this.handler = $.extend({
                'sizes': 'thin', 
                'eat': 'grass',
                'color': 'white',
                'page':[200,300],
                myalert: function() {
                    var that = this;
                    myconsole();
                    function myconsole() {
                        that.page = that.page || []
                        that.page[0] = 100; 
                        console.log(that.page[0]);
                    }
                },
                myalert2: function() {
                    this.myalert();
                }
            },handler);
        }
    })(jQuery);

    $(document).ready(function(){
        var blacksheep = new sheepclass({'color':'black'});
        blacksheep.handler.myalert2();
    }) 
```

# android - 当用户选择“总是”时，使用 Jelly bean 4.1.1 的 Galaxy S3 中的呼叫拦截不起作用？

> ID：13700363
> 
> 赞同：1
> 
> 时间：2012-12-04T10:05:46.637
> 
> 标签：android, call, galaxy, android-4.2-jelly-bean

我成功捕捉到广播，如果号码确实满足要求，我终止此呼叫请求并发出另一个请求，即允许用户选择弹出窗口，我的 onReceive 在这里

```
@Override
public void onReceive(Context context, Intent intent) {
    final String oldNumber = intent.getStringExtra(Intent.EXTRA_PHONE_NUMBER);          

    final String newNumber = this.getResultData();
    boolean useAmivox = true;

    Bundle bundle = intent.getExtras();

    Log.d(DTAG, "bundle: " + bundle.toString());

    Log.d(DTAG, "Number: " + oldNumber );

    if( oldNumber != null ){
        boolean isGlobal= PhoneNumberUtils.isGlobalPhoneNumber(oldNumber);
        Log.d(DTAG, "isGlobal: " + isGlobal );
        boolean isIntl= PhoneNumberUtils.toaFromString(oldNumber)== PhoneNumberUtils.TOA_International ? true:false;
        Log.d(DTAG, "isIntl: " + isIntl );
        useAmivox = isGlobal && isIntl; 
    }
    if( oldNumber.contains(TAG))
        useAmivox=true;

    if ( !oldNumber.contains(TAG) && useAmivox) {

        setResult(Activity.RESULT_OK, null, null);
        Intent lIntent = new Intent();
        lIntent.setAction(Intent.ACTION_CALL);

        lIntent.setData(Uri.parse("tel:" + oldNumber + TAG));
        lIntent.putExtra(Intent.EXTRA_PHONE_NUMBER, oldNumber);
        lIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(lIntent);
   }else{
        if (oldNumber != null)
            setResult(Activity.RESULT_OK, oldNumber.replace(TAG, ""),
                    null);
    }
} 
```

清单是这样的

```
<receiver
        android:name="com.amivox.callintercepttest.OutCallInterceptor"
        android:enabled="true"
        android:exported="true" >
        <intent-filter android:priority="10" >
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
</receiver> 
```

在带有果冻豆 4.1.1 的 Galaxy S3 中发生的情况是，如果用户选择电话，即不是我的应用程序，则不会进行任何呼叫，即我的广播接收器总是将结果设置为 null。此代码自 2.x 以来一直在工作，如果用户选择将“默认值”设置为“电话”，我的广播接收器没有任何负面影响；）果冻豆模拟器测试也可以正常工作，但带有果冻的 Galaxy S3豆没有！有没有人遇到过同样的问题并找到了解决方案？

# mongodb - MongoDB 副本集 pymongo 连接

> ID：13700367
> 
> 赞同：1
> 
> 时间：2012-12-04T10:05:50.457
> 
> 标签：mongodb, pymongo

我有三个 mongod 节点，添加到副本集（例如 localhost:27001,27002,27003）。如果应用程序不知道哪个节点是主节点，如何从 pymongo 连接到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:09:27.167

您只需提供每个副本，驱动程序将为您选择主副本。请参阅此处的文档：

[pymongo 连接到副本集](http://api.mongodb.org/python/1.10.1/examples/replica_set.html#id1)

具体来说

```
>>> Connection("mongodb://morton.local:27017,morton.local:27018,morton.local:27019")
Connection(['morton.local:27019', 'morton.local:27017', 'morton.local:27018']) 
```

# drupal - 使用 drupal 创建基于会员的网站

> ID：13700371
> 
> 赞同：3
> 
> 时间：2012-12-04T10:06:09.157
> 
> 标签：drupal, drupal-7

使用 drupal，我正在创建一个基于注册的网站，该网站有四个会员计划。根据选择的会员计划，用户必须使用任何支付模块支付会员费。如何创建会员计划和此类付款功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:08:28.787

有一个名为 lm_Paypal [http://drupal.org/project/lm_paypal](http://drupal.org/project/lm_paypal)的模块。使用那个模块。该模块还可以在付款后分配用户的更改角色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T06:14:56.263

您可以使用以下链接使用 drupal 创建会员网站：您必须使用 ubercart。

1) [http://10kwebdesign.com/10kblog/step-step-setting-membership-community-site-using-drupal](http://10kwebdesign.com/10kblog/step-step-setting-membership-community-site-using-drupal)

2) [http://www.leveltendesign.com/blog/rachel/how-create-memberships-drupal-ubercart#.UPjnmsXMgqY](http://www.leveltendesign.com/blog/rachel/how-create-memberships-drupal-ubercart#.UPjnmsXMgqY)

如果您愿意为此付费，那么只需访问[http://www.moneyscripts.net/](http://www.moneyscripts.net/)上的“会员套件模块”即可。这是一个付费模块，并且有据可查。

# c# - 如何将 XML 节点的内容保存到字符串？

> ID：13700375
> 
> 赞同：1
> 
> 时间：2012-12-04T10:06:35.207
> 
> 标签：c#, xml, parsing

我有这样的XML：

```
<album>
  <image size="small">http://exaplem/example.jpg</image>
  <image size="medium">http://exaplem/example.jpg</image>
  <image size="large"> http://userserve-ak.last.fm/serve/174s/42566323.png </image>
  <image size="extralarge"> http://exaplem/example.jpg </image>
</album> 
```

...我想提取并保存`<image size="large">...</image>`为字符串。

我的目标是获取提取元素的子文本节点。例如`http://userserve-ak.last.fm/serve/174s/42566323.png`.

我试过了

```
XmlNodeList xnList = xml.SelectNodes("image[@size='large']");
foreach (XmlNode xn in xnList)
{
    .....
} 
```

……但我迷路了。

做我需要做的最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:15:47.317

最好使用 LINQ 2 XML：

假设您有以下 xml 文档：

```
</album>
  <image size="small">http://exaplem/example.jpg</image>
  <image size="medium">http://exaplem/example.jpg</image>
  <image size="large"> http://userserve-ak.last.fm/serve/174s/42566323.png </image>
  <image size="extralarge"> http://exaplem/example.jpg </image>
</album> 
```

尝试这样的事情：

```
var doc = XDocument.Parse(yourDocumentString);
var largeImageUrl = doc.Root.Elements("image").Single(image => image.Attribute("size").Value == "large").Value; 
```

# iphone - 如何在xcode中将文本文件转换为xml

> ID：13700381
> 
> 赞同：0
> 
> 时间：2012-12-04T10:07:11.200
> 
> 标签：iphone, objective-c, xcode, ipad, ios-simulator

我有一个大文本文件，我想将其转换为 Xcode。我将主包中的文本文件（拖放）添加到我的项目中。我可以看到文本文件`viewDidLoad`。
但我喜欢将其转换为 XML 文件。例如我的文件看起来像：

```
 asasasasasas          
  wewewewewewe        
  qwqwqwqwqwqw
xyz_ 22 aaaaaaaaaaa        
fgfgfgfgfgfgfg        
ererererererer

abc_ 12 bbbbbbbbbb       
jkjkjkjkjkjkjk     
lalallalalalal 
```

在上面提到的，我想消除前3行，从`xyz_ 22`作为（父母）开始，`jkjkjkj`作为孩子`lalalala`作为孩子。

我只需要知道如何实现它......我会写代码:)

mycode: - (IBAction)readUsingObjectiveC:(id)pId { NSString * zStr = [NSString stringWithContentsOfFile:@"/Users/dd007/Desktop/abc.txt" encoding:NSASCIIStringEncoding error:NULL]; NSLog(@"readUsingObjectiveC zStr=\n%@",zStr);

```
// now to extract the data line by line
NSArray * zAryOfLines = [zStr componentsSeparatedByString:@"\n"];
if([zAryOfLines count] == 0) 
{
    NSLog(@"readUsingObjectiveC zAryOfLines count = 0");
    return;
} 
//for (int i=0; i<([zAryOfLines count]-30); ++i)
for ( int i=30; i<zAryOfLines ; i++)  

{
         if([[zAryOfLines objectAtIndex:i] isEqualToString:@"xyz_ "])
         {
             NSLog(@"<msg1>%@<msg1/>\n",[zAryOfLines objectAtIndex:i]);
             NSLog(@"<msg2>%@<msg2/>\n",[zAryOfLines objectAtIndex:i+1]);
             NSLog(@"<msg3>%@<msg3/>\n",[zAryOfLines objectAtIndex:i+2]);
[zArrayOfLines writeToFIle:@"/.....documents/..save.xml" automatically:YES encodingNSASCIIStringEncoding error:NULL];             
         }
     } 
```

我正在转换为 xml 格式，但我喜欢将文件保存为 .xml .. 但我收到错误任何人都可以告诉我我在哪里做错了吗？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:19:53.777

我认为您想将 .txt 转换为 .xml，因此为了实现这一点，我将 .txt 读取为 nsstring，我使用 NSString 的 componentsSeparatedByString:@"\n" 方法将其切割成 NSArray（注意 \r 字符）并且在不使用您不想要的线之后创建一个新的 NSString 以将标签 XML 添加到您的行中扩展名为 .xml 的新文件。

如果您需要帮助编写我描述的代码，请说出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:17:05.913

您不能使用 XCode 将文件转换为 xml，您有两种选择：

您可以创建解析文件并生成 XML 文件的 python 或 ruby​​ 脚本，然后使用 xml 解析器，

或者你可以创建一个类，用你想要的规则解析你的纯文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:34:41.297

在 iOS 中没有直接将文本转换为 xml 的选项。但是您可以通过手动传递数据来做到这一点。

您可以使用任`libXml`一框架或`GDataXml`执行此操作。

对于`libXml`xml 生成示例代码，请访问此[**链接**](http://www.wrox.com/WileyCDA/WroxTitle/Professional-iPhone-and-iPad-Database-Application-Programming.productCd-0470636173,descCd-DOWNLOAD.html)并下载 Chapter 10.zip

请查看本教程以[使用 GDataXML 读取和写入 XML 文档](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)

TCMXMLWriter也是一个开源[xmlgenerator](https://github.com/monkeydom/TCMXMLWriter)：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:47:47.660

我认为这样的代码适用于您的示例：

```
NSString *contentFile = [[NSString alloc] initWithContentsOfFile:pathFile encoding:NSUTF8StringEncoding error:nil];
NSArray *lineFile = [contentFile componentsSeparatedByString:@"\n"];
NSMutableString *xmlFile = [[NSMutableString alloc] init];
For(int i = 3; i < lineFile.count; i++)//i = 3 for don't take the 3 first line
{
    if ([((NSString *)[lineFile objectAtIndex:i]) rangedOfString:@"test"].location != NSNotFound)
    {
        xmlFile = [NSString stringWithFormat:@"%@<nameTag>%@</nameTag>", xmlFile, (NSString *)[lineFile objectAtIndex:i]];
    }
    else if ...
} 
```

并将他的 nsstring 保存在新文件中。如果 i 是 4 的 3 的倍数等，则可能在循环中按数字生成...

# java - 变量未初始化，我不能将 null 用于布尔值

> ID：13700389
> 
> 赞同：0
> 
> 时间：2012-12-04T10:07:37.390
> 
> 标签：java, compiler-errors, boolean, try-catch

我在这里遇到了一个小问题，可能是因为我不知道如何使用 try 和 catch。

我的方法有点长，但我认为问题很简单。我遇到了 input1 input2 和 input3 变量未初始化的问题 - 我无法初始化它们，因为我需要程序在未定义此变量的情况下返回错误，并且我无法`null`继续查找此错误.

如何进行？

```
public void print() {
    boolean input1;
    boolean input2;
    boolean input3;
    String gate;
    boolean calc;

    for (String a : operations.keySet()) {
        if (Gate2.contains(operations.get(a).Gate)) {
            if (inputs.containsKey(operations.get(a).input1)) {
                input1 = inputs.get(operations.get(a).input1);
            }
            if (inputs.containsKey(operations.get(a).input2)) {
                input2 = inputs.get(operations.get(a).input2);
            }
            if (result.containsKey(operations.get(a).input1)) {
                input1 = result.get(operations.get(a).input1);
            }
            if (result.containsKey(operations.get(a).input2)) {
                input2 = result.get(operations.get(a).input2);
            }
            gate = operations.get(a).Gate;
            calc = cc.calc(input1, input2, gate);
            result.put(a, calc);

        }else if (Gate3.contains(operations.get(a).Gate)) {
            if (inputs.containsKey(operations.get(a).input1)) {
                input1 = inputs.get(operations.get(a).input1);
            }
            if (inputs.containsKey(operations.get(a).input2)) {
                input2 = inputs.get(operations.get(a).input2);
            }
            if (inputs.containsKey(operations.get(a).input3)) {
                input3 = inputs.get(operations.get(a).input3);
            }
            if (result.containsKey(operations.get(a).input1)) {
                input1 = result.get(operations.get(a).input1);
            }
            if (result.containsKey(operations.get(a).input2)) {
                input2 = result.get(operations.get(a).input2);
            }
            if (result.containsKey(operations.get(a).input3)) {
                input3 = result.get(operations.get(a).input3);
            }
            gate = operations.get(a).Gate;
            calc = cc.calc(input1,input2,input3, gate);
            result.put(a, calc);

        }else if ("not".equals(operations.get(a).Gate)) {
            if (inputs.containsKey(operations.get(a).input1)) {
                input1 = inputs.get(operations.get(a).input1);
            }

            if (result.containsKey(operations.get(a).input1)) {
                input1 = result.get(operations.get(a).input1);
            }

            gate = operations.get(a).Gate;
            calc = cc.calc(input1, gate);
            result.put(a, calc);
        }

    }

    System.out.format(" Inputs --> ");
    for (String a : inputs.keySet()) {

        int bit2 = inputs.get(a) ? 1 : 0;
        System.out.format("%5s", bit2);
    }
    System.out.format(" Results --> ");
    for (String a : result.keySet()) {

        int bit2 = result.get(a) ? 1 : 0;
        System.out.format("%3s", bit2);
    }
    System.out.format("\n");

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T10:10:54.223

您正在使用原始布尔值，因此您需要将其初始化为真或假。您可以改用包装器[java.lang.Boolean](http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:23:29.160

为了扩展这一点，布尔值实际上是三态的：真、假或空。所以你可以把

```
Boolean input1 = null;
...
if (input1 == null) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:26:27.163

对于局部变量，我们需要在使用前对其进行初始化，而对于类/实例变量，它们被隐式初始化为默认值（在对象的情况下为 null）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:31:31.123

要么使用可以具有 true/false/null 的布尔类，要么使用另一个变量来指示它们是否已初始化：你可以将它们初始化为 false，添加另一个变量 isInit 并将其初始化为 false，一旦你初始化变量 switch isInit为真，这样你可以检查它们是否使用 isInit 初始化

# prolog - Prolog - 除数之和 - 编译错误

> ID：13700391
> 
> 赞同：0
> 
> 时间：2012-12-04T10:07:40.980
> 
> 标签：prolog, sum, division

我正在尝试创建一个 Prolog 程序 divisor_sum 来总结数字 X（不包括 X）的所有除数。

```
acc_divisor_sum(X,_,X).
acc_divisor_sum(X,Y,C):- A=:=0, A is X mod N, C is N+1, Y is Y+C, acc_divisor_sum(X,Y,C).
acc_divisor_sum(X,Y,C):- A=\=0, A is X mod N, C is N+1, acc_divisor_sum(X,Y,C).
divisor_sum(X,Y):- acc_divisor_sum(X,Y,1). 
```

我得到的错误。

```
 ?- divisor_sum(12,Y).
ERROR: =:=/2: Arguments are not sufficiently instantiated
^  Exception: (9) _L144=:=0 ? creep
   Exception: (8) acc_divisor_sum(12, _G204, 1) ? creep 
```

我的代码有什么问题？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:07:55.347

There is no bound A yet. You need to move the `=:=`-test *after* the `A is ...`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:21:42.650

我认为您应该使用带有 4 个 args 的谓词：

```
% @arg1 : Number to study
% @arg2 : current divisor
% @arg3 : current sum of divisors
% @arg4 : final sum of divisors
acc_divisor_sum(X, Div, S, TT) 
```

现在，当**0 是 X mod N**成功时，你知道另一个除数，你可以在搜索中获得时间。

# google-chrome - 如何在 Chrome 中更改响应标头

> ID：13700394
> 
> 赞同：9
> 
> 时间：2012-12-04T10:07:46.100
> 
> 标签：google-chrome, google-chrome-extension, header, response

我正在处理互联网上的一些 mp3 链接。

使用 Chrome 开发人员工具时，我看到一些响应标头带有`Content-Type:application/octet-stream`（这些链接强制 Chrome 下载），一些链接带有响应标头`Content-Type:audio/mpeg`（这些链接允许 Chrome 流式播放它们）。

是否有任何允许更改响应标头的 Chrome 扩展程序？因为我想改变 Content-Type

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-04T10:33:46.350

请参阅[Chrome 开发者页面](https://developer.chrome.com/trunk/extensions/webRequest.html#event-onHeadersReceived)。

这是一个将 of 修改为 text/plain 的简单`Content-Type`示例`https://www.google.com/`。

```
chrome.webRequest.onHeadersReceived.addListener(details => {
    let header = details.responseHeaders.find(e => e.name.toLowerCase() === 'content-type') ;
    header.value = 'text/plain';
    return {responseHeaders: details.responseHeaders};
}, {urls: ['https://www.google.com/']}, ['blocking', 'responseHeaders']); 
```

请注意，您`webRequest`必须`webRequestBlocking`在`manifest.json`.

# salesforce - 在 Salesforce 之外显示定价信息

> ID：13700395
> 
> 赞同：2
> 
> 时间：2012-12-04T10:07:50.960
> 
> 标签：salesforce, integration

我们的应用程序中有一个 Salesforce 集成，用户可以使用 SAML SSO 和 JIT 用户配置访问他们的 Salesforce 帐户。我们还显示了一些帐户和用户详细信息。我们想要显示 Salesforce 定价信息（支付给 Salesforce.com 的订阅金额、到期日等）。从哪里以及如何为任何特定帐户获取此数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:59:20.217

与 Salesforce.com 的合同未存储在您的 Salesforce.com 实例中。它存储在 Salesforce 的版本中（公司使用自己的软件进行销售）。

与 Salesforce 签订的每份合同都是不同的，但几乎所有合同都取决于某种类型的用户数量。您可以构建一个报告，显示每种许可证类型的活动用户数。将其与您的实际合同（您与 Salesforce.com 签署的合同）中的信息相结合，您应该有一个很好的估计。

# xml - 用于混合通用和特定内容的 XML 模式

> ID：13700399
> 
> 赞同：1
> 
> 时间：2012-12-04T10:08:13.403
> 
> 标签：xml, xsd

是否可以将以下 XML 文档类表示为 XML 模式：

*   根元素“root”恰好包含一个元素“消息”作为第一个子元素
*   随后，可能有任意进一步的子元素，但没有进一步的“消息”元素

示例实例：

```
<root>
  <message type="S">Order saved</message>
  <order number="4711"/>
</root>

<root>
  <message type="S">3 countries selected</message>
  <country value="ES">Spain</country>
  <country value="FR">France</country>
  <country value="IT">Italy</country>
</root> 
```

我的想法是使用一个`xs:element`和的序列`xs:any`，如下所示：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="message" maxOccurs="1">
           <xs:complexType>
             <xs:simpleContent>
               <xs:extension base="xs:string">
                 <xs:attribute name="type"></xs:attribute>
               </xs:extension>
             </xs:simpleContent>
           </xs:complexType>
        </xs:element>
        <xs:any processContents="skip" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

但是随后，包含两个“消息”子级的文档将通过（因为第二个“消息”元素将符合 xs:any）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:54:55.287

您可以约束将匹配 xs:any 的元素名称。在 XSD 1.0 中，您可以说接受哪些命名空间，在 XSD 1.1 中，您可以更具体：事实上，有一个明确的关键字 notQName="##definedSibling" 完全符合您的要求。Saxon 和 Xerces 目前支持 XSD 1.1。

# php - PHP - getimagesize() 重定向不起作用

> ID：13700401
> 
> 赞同：2
> 
> 时间：2012-12-04T10:08:17.990
> 
> 标签：php, getimagesize

问题：getimagesize() 不适用于某些 URL，尤其是重定向的 URL。

我用谷歌搜索并检查了stackoverflow，但无济于事。

这是我在本地机器上看到的：

```
var_dump(getimagesize('http://gan.doubleclick.net/gan_impression?lid=41000000015155731&pubid=21000000000506299&lsrc=17'));

> Array
(
    [0] => 120
    [1] => 90
    [2] => 2
    [3] => width="120" height="90"
    [bits] => 8
    [channels] => 3
    [mime] => image/jpeg
) 
```

在我的服务器上：

```
var_dump(getimagesize('http://gan.doubleclick.net/gan_impression?lid=41000000015155731&pubid=21000000000506299&lsrc=17'));

> bool(false) 
```

我尝试了其他图像和 URL，它们工作正常。正是这个 URL 给了我一个问题。我还尝试了以下（在我的服务器上），这*确实*有效：

```
echo strlen(file_get_contents('http://gan.doubleclick.net/gan_impression?lid=41000000015155731&pubid=21000000000506299&lsrc=17'));

> 4829 // This number means it works 
```

错误日志什么都没有，我也没有其他提示。我猜这是需要在 php.ini 中更改的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:27:04.093

也许在您的文件`allow_url_fopen`中被禁用？`PHP.ini`您可以编辑`PHP.ini`文件或`cUrl`改用。

例子：

```
<?php
//Download content
$ch = curl_init();
curl_setopt ($ch, CURLOPT_URL, 'http://gan.doubleclick.net/gan_impression?lid=41000000015155731&pubid=21000000000506299&lsrc=17');
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
$file_contents = curl_exec($ch);
curl_close($ch);

file_put_contents('file', $file_contents); //Put content in ./file

var_dump(getimagesize('file')); //Get image size

unlink('file'); //Remove the file
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:51:51.220

如果`file_get_contents`有效，那么肯定`fopen`会有效

由于您遇到权限问题，Curl 本来是最好的选择，但您也可以使用[FastImage](https://github.com/olekukonko/fastimage) .. 来**读取图像标题**并获取信息，而***不必在本地保存整个文件***

例子

```
$img = new FastImage("http://gan.doubleclick.net/gan_impression?lid=41000000015155731&pubid=21000000000506299&lsrc=17");
var_dump($img->getSize(),$img->getType()); 
```

输出

```
array (size=2)
  0 => int 120
  1 => int 90
string 'jpeg' (length=4) 
```

[简单演示](http://codepad.viper-7.com/F3cTcO)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:21:52.793

希望它可以帮助你。由于该链接上有 302 标头，不幸的是 getimagesize 无法识别该标头。您可以获取到您的服务器以确保 getimagesize 有效！

```
 // fetch content to local
    $content = file_get_contents($file_path);
    $fetch_from_remote = file_put_contents($to_local_path, $content);

    if($fetch_from_flag === FALSE){
        // error
    }

    // defining vars to resize photo
    $file_info = getimagesize($to_local_path); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:26:52.203

你有两个我能想到的选择：

1）将文件获取到您的计算机（使用 cURL 或 file_get_contents）并在那里应用您想要的任何处理

2）调用标头（cURL库），检查状态是否= 200，如果是..直接应用该函数，如果其他http状态代码则遵循重定向或忽略文件。

# json - 如何使用代理和登录凭据从 https 网页解析 JSON 数组？

> ID：13700403
> 
> 赞同：1
> 
> 时间：2012-12-04T10:08:25.247
> 
> 标签：json, https

嗨，我是 Android 和 Java 的新手。

我需要从[https://url.com/impact/empid](https://url.com/impact/empid)解析 JSONArray，它需要使用办公室网络的代理凭据进行访问，并且网站必须使用用户名和密码作为登录凭据传递。

请帮助我提供示例代码。

# python - 无法让 PythonAnywhere 为我抓取网页

> ID：13700415
> 
> 赞同：3
> 
> 时间：2012-12-04T10:08:48.200
> 
> 标签：python, pythonanywhere

我一直在尝试在 PythonAnywhere 上尝试让一些 python 在网络服务器上工作。我最初是从 Arvixe 切换过来的，因为它们运行的​​是 2.4，而且 PythonAnywhere 的名字太吸引人了。

我的应用程序包含两个文件：phones.py 和 phonesearch.py​​。他们应该一起在craigslist上搜索电话价格。

我在 2.7 中进行了本地测试，它运行得很好，生成了一个带有表格和所有价格的 html 页面 (celly.html)。当我上传它时，它会很好地生成 html，但拒绝向我的价格表 ([intprices]) 添加任何内容。

我的怀疑：（a）因为它在本地运行良好，PythonAnywhere 不允许它与 craigslist 通信；或 (b) 因为我像穴居人一样做这件事，而不是使用微框架，PythonAnywhere 拒绝了我；或者 (c) 我对自己的错误视而不见，我错过了一些明显的东西。

我的 python 脚本位于 /home/tseymour/mysite 中，html 是在*相同*的/mysite/static/celly.html 中生成的。该文件在[http://tseymour.pythonanywhere.com/static/celly.html提供](http://tseymour.pythonanywhere.com/static/celly.html)

您会注意到我所有的单元格都填充了“N/A”，这意味着它在 SearchPhone.py 中的 try:" 中引发了 IndexError。这意味着我的列表正在被填充！

但这是为什么呢？！我相信这是因为我是 PythonAnywhere n00b。

请指教。

搜索电话.py

```
from BeautifulSoup import BeautifulSoup
import urllib
import re

def SearchPhone(phone):

    y = "http://losangeles.craigslist.org/search/moa?query=" + phone + "+-%22buy%22+-%22fix%22+-%22unlock%22+-%22broken%22+-%22cracked%22+-%22parts%22&srchType=T&minAsk=&maxAsk="

    site = urllib.urlopen(y)
    html = site.read()
    site.close()
    soup = BeautifulSoup(html)

    prices = soup.findAll("span", {"class":"itempp"})
    prices = [str(j).strip('<span class="itempp"> $</span>') for j in prices]

    for k in prices[:]:
        if k == '': #left price blank
            prices.remove(k)
        elif int(k) <= 75: #less than $50: probably a service (or not true)
            prices.remove(k)
        elif int(k) >= 999: #probably not true
            prices.remove(k)

    #Find Average Price
    intprices = []
    newprices = prices[:]
    total = 0
    for k in newprices:
        total += int(k)
        intprices.append(int(k))

    intprices = sorted(intprices)

    try:
        del intprices[0]
        del intprices[-1]

        avg = total/len(newprices)
        low = intprices[0]
        high = intprices[-1]

        if len(intprices) % 2 == 1:
            median = intprices[(len(intprices)+1)/2-1]
        else:
            lower = intprices[len(intprices)/2-1]
            upper = intprices[len(intprices)/2]
            median = (float(lower + upper)) / 2

        namestr = str(phone)
        medstr = "Median: $" + str(median)
        avgstr = "Average: $" + str(avg)
        lowstr = "Low: $" + str(intprices[0])
        highstr = "High: $" + str(intprices[-1])
        samplestr = "# of samples: " + str(len(intprices))
        linestr = "-------------------------------"

    except IndexError:
        namestr = str(phone)
        medstr = "N/A"
        avgstr = "N/A"
        lowstr = "N/A"
        highstr = "N/A"
        samplestr = "N/A"
        linestr = "-------------------------------"

    return (namestr, medstr, avgstr, lowstr, highstr, samplestr, linestr) 
```

电话.py

```
from SearchPhone import SearchPhone

phones = ["Iphone 4", "Iphone 5","Galaxy s3", "Galaxy s2", "LG Lucid", "LG Esteem", "HTC One S", "Droid 4",
          "Droid RAZR MAXX", "HTC EVO", "Galaxy Nexus", "LG Optimus 2", "LG Ignite",
          "Galaxy Note", "HTC Amaze", "HTC Rezound", "HTC Vivid", "HTC Rhyme", "Motorola Photon",
          "Motorola Milestone", "myTouch slide", "HTC Status", "Droid 3", "HTC Evo 3d", "HTC Wildfire",
          "LG Optimus 3d", "HTC ThunderBolt", "Incredible 2", "Kyocera Echo", "Galaxy S 4g",
          "HTC Inspire", "LG Optimus 2x", "Samsung Gem", "HTC Evo Shift", "Nexus S", "LG Axis", "Droid 2",
          "G2", "Droid x", "Droid Incredible"
          ]

f = open('/home/tseymour/mysite/static/celly.html','w')

f.write("""<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Celly Blue Book</title>
</head>

<body>
</body>
</html>
""")

#table
f.write('<table width="100%" border="1">')
for x in phones:
    print "SEarchphone0"
    y = SearchPhone(x)
    print "SEarchphone"
    f.write( "\t<tr>")
    f.write( "\t\t<td>" + str(y[0]) + "</td>")
    f.write( "\t\t<td>" + str(y[1]) + "</td>")
    f.write( "\t\t<td>" + str(y[2]) + "</td>")
    f.write( "\t\t<td>" + str(y[3]) + "</td>")
    f.write( "\t\t<td>" + str(y[4]) + "</td>")
    f.write( "\t</tr>")

f.write('</table>')

f.close() 
```

另外，我确实上传了beautifulsoup，以防万一

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T11:31:25.550

PythonAnywhere 在这里开发。你没有说你使用的是免费的还是付费的 PythonAnywhere 帐户，但如果它是免费的，那么我认为你正在进入我们的白名单。对于免费帐户，我们只允许访问一组特定的网站——这是因为人们利用我们做坏事。

我们将网站放在白名单上，这样如果免费帐户拥有官方可公开访问的 API，他们就可以使用它们，不幸的是 Craigslist 没有 -[恰恰相反，不幸的是](http://www.business2community.com/trends-news/craigslist-goes-to-war-against-the-open-web-0302026)。

如果您注册了付费帐户，那么您可能可以做您想做的事，但如果我刚刚链接到的文章是正确的，那么您可能需要确保您有优秀的律师......

# excel - Excel 宏 - 删除以某些字符开头的单词

> ID：13700417
> 
> 赞同：1
> 
> 时间：2012-12-04T10:08:56.000
> 
> 标签：excel, vba

在 Excel 的 VB 宏中，如何删除所有出现的以某个字符串开头的单词？

例如：

字符串内容如下：`xxxx $AUD543.43 yyyy`

我想搜索以开头的字符串中的任何内容，`$AUD`并在下一个空格之前删除整个单词

所以上面的例子应该导致：

`xxxx yyyy`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:12:45.783

使用正则表达式。在 VBA >> 工具 >> 选项中添加对 Microsoft VBScript 正则表达式的引用。

```
Dim txt As String
txt = "$Audthisfew is$Aud $Auda test $Aud"

Set regEx = New RegExp

With regEx
    .Global = True
    .Pattern = "((^, )\$Aud)"
    Debug.Print .Replace(txt, "")
End With 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:37:16.487

如果我不提醒您展示“您（已经）尝试过的东西”的期望，那将是我的疏忽。（我这样做是为了避免因为回答问题而被骂。）我的职责已经完成，我现在继续做下去。

您实际上不一定需要 VBA 代码来执行此操作；您可以使用 Find() 函数来完成它，尽管它更笨拙，我不建议将它用于非常大的工作表。不过，您已经指定了 VBA 代码，并且您应该拥有。更改范围以匹配您要搜索的范围。另外，您应该注意，在您的示例中，x 和 y 之间只有一个空格，但这与您的要求不同，它是以 $AUD 开头并在下一个空格之前结束的单词。如果您只想要一个空格，请相应地调整公式。

```
Sub ReplaceText()

Dim rng As Excel.Range
Dim s_Contents As String
Dim l_FindAUD As Long, l_FindSpace As Long

For Each rng In ActiveSheet.UsedRange

    s_Contents = rng.Value

    'Does the $AUD expression exist in this cell?
    l_FindAUD = InStr(1, s_Contents, "$AUD", vbTextCompare)

    If l_FindAUD > 0 Then

        'If so, is it followed by a space?
        l_FindSpace = InStr(l_FindAUD, s_Contents, " ")

        If l_FindSpace > 0 Then

            'If so, take all of the content up to but not including the $
            'and all of the contents from the space onwards, merge them
            'together and write to the cell.
            s_Contents = Left$(s_Contents, l_FindAUD - 1) & Mid$(s_Contents, l_FindSpace)
            rng.Value = s_Contents
        End If

    End If

Next

End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:19:33.733

虽然不完全符合您的要求，但您也可以使用 Excel 公式来实现这一点。假设您的文本在 A1 中，则公式为：

```
=TRIM(LEFT(A1,FIND("$AUD",A1)-1))&RIGHT(A1,LEN(A1)-FIND(" ",A1,FIND("$AUD",A1))+1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T15:01:47.240

我的示例用于删除单元格的最后几个单词

例如：

在单元格 A1 中： `ABCDE[Acct:12345]`

在单元格 A2 中： `FGHIJ[Acct:67890]`

在单元格 A3 中： `KLMNO`

要删除所有以“[Acct:”开头的单词，注意不是每个单元格都包含“[Acct:”

现在在 B 列中，插入下面的函数，这将返回 "[Acct:" =LEFT(A1,FIND("[Acct:",A1)-1) 左侧的单词

结果：AB ABCDE[Acct:12345] ABCDE FGHIJ[Acct:67890] FGHIJ KLMNO #VALUE！现在在 C 列中，插入下面的函数，这将检查 B 列是否为#VALUE！然后返回我们想要的 =IF(ISERROR(C1)=TRUE,A1,B1))

结果：

```
 A                          B                C

   ABCDE[Acct:12345]          ABCDE            ABCDE

   FGHIJ[Acct:67890]          FGHIJ            FGHIJ

   KLMNO                      #VALUE!          KLMNO 
```

然后您可以复制三列并粘贴值，然后删除列 A 和 B ，列 C 将是您想要的最终结果。

# android - 使用 ADT R21 在 Eclipse 上预览 Nexus 10 布局

> ID：13700426
> 
> 赞同：0
> 
> 时间：2012-12-04T10:09:32.640
> 
> 标签：android, layout, adt

出于某种原因，在将 ADT 更新到 R21 后，我无法像以前那样预览任何尺寸的布局：

![在这里找不到 Nexus 10](../Images/8773f35d3b3d5289c5a088d2770993e9.png)

## 

因此，我使用 AVD 管理器声明了一个新的 Android 虚拟设备，但在那里，我找不到任何看起来像 Nexus 10 分辨率的东西：

![在此处输入图像描述](../Images/79cdd7a9cdf49a6eae78cf3332e2e32b.png)

有没有人有同样的麻烦？如何使用酷炫的“预览所有屏幕”功能预览 Nexus 10 布局？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T20:21:50.963

您需要为 Nexus 10 创建一个新的“设备定义”，并在其中填充有关该设备的分辨率、内存等信息。您可以在 Android 虚拟设备管理器中找到“设备定义”选项卡。创建新设备定义后，它将作为一个选项出现在“创建新的 Android 设备 (AVD)”对话框中。

祝你好运！

注意：我正在运行 Mac OS X 10.8.2 和 Eclipse ADT v21

~~我尝试在此处添加图像，但我至少需要 10 个声望。对不起。~~

![AVD 管理器](../Images/78393b66c15edf3b3d3e317f6edc7776.png)

# java - 将android项目添加到git

> ID：13700429
> 
> 赞同：6
> 
> 时间：2012-12-04T10:09:40.580
> 
> 标签：java, android, eclipse, git

将项目添加到 git 时我必须忽略哪些文件？我应该添加 .classpath 文件吗？.classpath 的目的是什么？我使用 Eclipse 并推送到 Jenkins 服务器

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-04T10:13:06.017

用于 android 的典型 gitignore 文件将包括以下内容：

```
# built application files
*.apk
*.ap_

# files for the dex VM
*.dex

# Java class files
*.class

# generated files
bin/
gen/

# Local configuration file (sdk path, etc)
local.properties 
```

来自[github 上的 Gitignore](https://github.com/github/gitignore/blob/master/Android.gitignore)

在 Eclipse 中创建项目时，默认情况下它会在项目目录中创建一个 .classpath 文件。该文件将用于存储类路径中成功编译和执行项目所需的文件名和其他依赖文件。通常，当您更新项目库等时，此文件将自动更新。

在我看来，您应该将其添加到 git 中。有关更多信息，请参见此线程：

[.classpath 和 .project - 是否检查版本控制？](https://stackoverflow.com/questions/2818239/classpath-and-project-check-into-version-control-or-not)

# asp.net - asp .net Gridview改变垂直线的颜色

> ID：13700434
> 
> 赞同：3
> 
> 时间：2012-12-04T10:09:48.373
> 
> 标签：asp.net

我正在尝试更改 asp .net gridview 的水平线和垂直线的颜色。我正在更改单元格边框颜色，但仅更改了水平线。你可以看到附上的图片。![在此处输入图像描述](../Images/b9ee8eb74b4864968d91cfb68eeef020.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:22:56.877

您可以使用`RowDataBound`：

```
protected void gridView1_RowDataBound(Object sender, GridViewRowEventArgs e)
{
    foreach (TableCell tc in e.Row.Cells)
    {
        tc.Attributes["style"] = "border-right:3px solid red; border-bottom:3px solid blue";
    }
} 
```

当然，您也可以使用 CSS 类（通过`tc.CssClass`）代替内联 css。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-22T09:41:36.590

只需删除所有边框并执行以下操作，在 Grid View 标记中添加以下代码行。

```
CellPadding="4" CellSpacing="1" Height="100%" GridLines="None" BackColor="#9CB6DB" 
```

您将获得所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:14:42.807

您可以通过 RowDataBound 事件更改它，如下所示：

```
protected void grid_RowDataBound(object sender, GridViewRowEventArgs e)
{
    // check if it's a data row (not header and footer)
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        // take a color from a condition or not... i don't know what is your case
        string color = condition ? "#ff9900" : "some-other-color";

        // set the color on X column, where X is your column index (starting by 0)
        e.Row.Cells[X].Attributes.Add("Style", "background-color: " + color + ";");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T12:52:36.317

简单地使用网格视图的属性作为

```
<asp:GridView ID="grd_data" runat="server" 
     GridLines="Both" CssClass="gridline"></asp:GridView> 
```

您还可以使用特定的水平和垂直

在样式表中创建一个 CSS 作为外部文件或内联

```
.gridline tr, .gridline td, .gridline th
{
    border-top: 1px solid  #DDDDDD;
    border-bottom: 1px solid  #DDDDDD;
    border-left:1px solid  #DDDDDD;
    border-right:1px solid  #DDDDDD;
} 
```

# php - 为什么在编码时需要格式化以及如何格式化

> ID：13700435
> 
> 赞同：0
> 
> 时间：2012-12-04T10:09:50.283
> 
> 标签：php, html, css, formatting

格式化代码的正确方法是什么？为什么这么有必要？为什么所有程序员都应该遵循相同的格式规则，基本上，规则是什么？

为什么程序员喜欢写成

```
<html>
    <head>
        <title>Title</title>
    </head>

    <body>
        <!--body-->
    </body>
</html> 
```

代替

```
<html>
<head>
<title>Title</title>
</head>
<body>
<!--body-->
</body>
</html> 
```

有人可以说得更清楚吗？而且，关于 javascript 和 css 格式有什么特别之处吗？格式化的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:19:39.830

它是关于能够回顾您的代码并轻松查看哪些部分是包含在其他标记中的代码块。通常你会在一个页面中有很多 div，许多 div 包含在其他 div 中。简单的缩进可以帮助找出与您当前正在查看的开始 div 匹配的内容。

```
<div id='start'>
<div id='insideStart'>
<div id='insideInsideStart'>
</div>
</div>
</div> 
```

看起来不像

```
<div id='start'>
   <div id='insideStart'>
      <div id='insideInsideStart'>
      </div>
   </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:22:41.950

这是一个非常适合在以下书籍中阅读的问题

*   清洁代码
*   务实的程序员

但要回答你的问题。

首先：**“为什么程序员更喜欢写成……”** 这仅仅是为了使代码更清晰，并且更符合结构。作为人类和其他编码人员，使您对我来说更清楚的结构。

遵守一套命名约定和结构标准有助于新开发人员更快地进入您的代码，并且更不容易出现诸如拼写错误和常见错误等错误。

您要问的另一个问题是：**“格式化的优点和缺点是什么”**

优点 - 以上所有

缺点 - 这可能会影响性能，但我认为不会。

你问的最后一个问题是**“为什么所有程序员都应该遵循相同的格式规则，基本上，规则是什么？？”**

只要您遵循团队约定，就应该如何编码没有明确的规则。这使开发人员在您完成清理烂摊子的肮脏工作或试图弄清楚您在执行现在开始变旧或正在出错的功能时找出您的思维方式之后更容易。

但是，如果您愿意，在命名变量和函数等时，有一些“常用方法”，这些在此处进行了详细[说明](http://javascript.crockford.com/code.html)。这些适用于您要求的 javascript，但其中大部分也可以用于其他语言。

我希望这回答了你的问题。

但正如@BoltClock 所说，这就是你应该追求的目标，让你的代码清晰。这是所有程序员的第一要务，或者应该是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T10:16:38.283

格式化没有*正确*的方法。

换行和缩进通常只是为了人类可读性（除了某些语言，如 Python），并且没有一个所有人都同意的真正标准。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:19:21.780

一般的经验法则是用 4 个空格或一个制表符缩进代码。许多开源项目在其编码标准中遵守 4 个空格规则，仅举几例：

*   [阿帕奇](http://portals.apache.org/development/code-standards.html)
*   [安卓](http://source.android.com/source/code-style.html#use-spaces-for-indentation)
*   [网络套件](http://www.webkit.org/coding/coding-style.html)
*   [曾德](http://framework.zend.com/manual/1.12/en/coding-standard.coding-style.html)

在您的 HTML 示例中，它的用处不大，因为结束标记明确说明了它们的元素类型，但它对于查找嵌套 div 和其他元素的开始/结束标记仍然很有用。

在其他使用大括号语法的语言中（以及不使用大括号语法的语言，例如 PLSQL），缩进代码非常有帮助。例子：

```
for(...)
{
if(..)
{
while(..)
{

}
}
else
{

}
} 
```

与以下相比，上述内容难以阅读：

```
for(...)
{
    if(..)
    {
        while(..)
        {

        }
    }
    else
    {

    }
} 
```

通过上面的缩进，可以轻松快速地读取每个块的执行流程和开始/结束大括号。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T10:19:56.340

对我来说最重要的事情（在这个例子中是 HTML，但它也适用于编程）是告诉范围。

您的 HTML 示例非常简单，但通常会有更多的嵌套结构，这可能会让人很困惑。例如：

```
<html>
<head></head>
<body>
<div id="container">
<div class="shadow">
<div class="inner">
<h1>Hello World</h1>
</div>
<div id="handle">
<span id="foo">Bar</span>
</div>
</div>
<div id="morefoo">
<h3>Hi</h3>
</div>
</div>
</body>
</html> 
```

如果我告诉你用类 shadow 向 div 添加另一个 div，你可能需要做一些`<div>` `</div>`计数。但是使用下面格式化的标记，这很容易。

```
<html>
    <head></head>
    <body>
        <div id="container">
            <div class="shadow">
                <div class="inner">
                    <h1>Hello World</h1>
                </div>
                <div id="handle">
                    <span id="foo">Bar</span>
                </div>
            </div>
            <div id="morefoo">
                <h3>Hi</h3>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T10:23:02.343

在写下 HTML 标记或 CSS 时——这与编程无关。无论如何，编写**清晰**干净的 HTML 标记的标准是将**任何子**元素缩进一个，`tab`因此代码看起来像您的第一个示例。这样，代码的结构和可读性就很好。

在写下 CSS 代码时，没有标准的 AFAIK，但我看到了三种格式化 CSS 代码的样式：

**1.**

```
body { ... }
div#container { ... }
div#container #left-column { ... } 
```

**2.**

```
body {
    ...
}
div#container {
    ...
}
div#container #left-column {
    ...
} 
```

**3.**

```
body {
    ...
}
div#container {
    ...
}
    div#container #left-column {
        ...
    } 
```

第二个和第三个示例之间的区别在于，在第三个示例中，通过`div#container #left-column`多缩进一个选项卡，您正在炫耀此规则适用于 parent 内部的元素`div#container`。第一个示例使 CSS 代码更紧凑，但可读性较差，并且在一行中有许多规则时不是很好的选择（行可能会变得很长）。

在这里写下 JS 代码时，格式化规则应该与写下 PHP 代码时相同（或至少非常相似）......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-04T10:23:39.437

在大多数情况下，格式化是为了程序员的利益，而不是为了计算机。

就计算机而言，缩进完全无关紧要。这可以在“代码最小化器”的操作中看到，它采用一个程序并删除所有空白以将其压缩并使其成为更小的下载。同样，也有“代码整理”工具，它们的作用正好相反——采用格式错误的程序并设置缩进，使其更具可读性。

所以缩进代码的真正原因是让它可读。这是为了你的利益。

你可能认为你的代码没有缩进就完全可读，但我可以向你保证不是。如果您认为是这样，请在六个月未阅读旧代码后尝试返回一些旧代码。但这不仅仅是为了你自己。如果您需要与其他人共享代码——比如在这样的网站上——其他人会发现您的代码更容易阅读，因此如果他们可以轻松阅读您的代码，他们会更容易帮助您。

 * 注意：所有这一切的例外是少数语言，如 Python，其中缩进是代码的重要组成部分，并告诉程序哪些行是哪个结构的一部分。在这些语言中，缩进是语言的一部分，所以它存在于程序和程序员中。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-12-04T10:20:47.383

你应该明白，对于编译器来说，这样的代码在性能上完全没有区别：

```
<html>
    <head>
        <title>Title</title>
    </head>

    <body>
        <!--body-->
    </body>
</html> 
```

和这个

```
<html>
<head>
<title>Title</title>
</head>
<body>
<!--body-->
</body>
</html> 
```

甚至这个

```
<html>    <head><title>Title</    title></head>
<body><!--body--></body>                                  </html> 
```

它们都将以相同的方式编译和工作，具有完全相同的性能。但是，代码格式化的主要目的是***可读性***。像这样将代码分成块，让程序员更容易理解，从而让他更清楚地看到程序的逻辑。对于您和在您之后使用代码的人来说，它更容易维护和理解。
所有这一切都导致了更高效的开发（因为您在理解代码上浪费的时间更少，因为一切都是有条理的，导致更少的开发错误，更少的错误，从而让您花更多的时间在开发上，使开发更容易和更快）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-04T10:22:08.893

每种语言都有不同的编码标准，或多或少流行。

为什么使用编码标准：让您/您的团队/其他人更容易阅读，在项目中给人一种“统一”的感觉。想想在更大的项目中没有编码标准，你会看到这样的代码：

```
if (condition) return FALSE;
else {
$x=1;
} else $x=3;if (condition2) return true; 
```

PHP 编码标准示例：

*   Zend 标准[http://framework.zend.com/manual/1.12/en/coding-standard.coding-style.html](http://framework.zend.com/manual/1.12/en/coding-standard.coding-style.html)

*   PEAR 标准[http://pear.php.net/manual/en/standards.php](http://pear.php.net/manual/en/standards.php)

*   Kohana 标准[http://kohanaframework.org/3.0/guide/kohana/conventions](http://kohanaframework.org/3.0/guide/kohana/conventions)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-04T10:20:58.507

编码中的一个大问题是代码维护。一位开发人员总是认为他的代码将永远有效，是防弹的，永远不需要任何更改。这显然不是真的。因此，另一个开发人员肯定必须挖掘这段代码，如果原始编码人员没有格式化和记录他的代码，这通常很困难。格式化是关于可读性和可重用性的。

您可以遵循通常接受的准则，例如 javascript 的总结：http: [//google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml ?showone=Code_formatting#Code_formatting](http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml?showone=Code_formatting#Code_formatting)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-04T10:16:25.367

据我所知，这三个规则支配着代码缩进的思想。

*   让您阅读清楚
*   知道代码块的开始和结束
*   为了让它更好，对于稍后将处理您的代码的人

如何缩进代码？- 我会以此为基础，从括号或函数的开始到结束，或者基于循环、数组的任务......

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2012-12-04T10:23:53.790

确保您的网站正常运行的一个好方法是编写您的 HTML。这将使您可以专注于内容和功能并在开始使一切变得漂亮之前对其进行测试。

有关更多信息，请阅读这两篇文章：-

[**1.正确标记在网页设计中的意义**](http://tympanus.net/codrops/2011/08/31/html-only-the-significance-of-proper-markup/)

[**2\. 漂亮的 HTML 代码是什么样的**](http://css-tricks.com/what-beautiful-html-code-looks-like/)

# javascript - 选择框高度在 chrome 中不起作用

> ID：13700438
> 
> 赞同：2
> 
> 时间：2012-12-04T10:10:07.633
> 
> 标签：javascript, jquery, html, css

页面上有 3 个单选按钮和一个选择框。单击第一个单选按钮然后在选择框中它将分别显示与第一个单选按钮相关的内容...选择第一个单选按钮它工作正常，当我选择第二个单选按钮时，选择框高度正在减小，无法看到完全一样，第三个也一样，它发生在 chrome 中，FF 工作正常

我的代码

```
 <label><input type="radio" name="reward-venue" value="Fly" checked /><div class="radio-icon Fly-sprite"></div></label>
    <label><input type="radio" name="reward-venue" value="Drive" /><div class="radio-icon Drive-sprite"></div></label> 
    <label><input type="radio" name="reward-venue" value="Stay" /><div class="radio-icon Stay-sprite"></div></label> 

 <div>
    Reward program
      <select name="program">
        <option value=""> - select one - </option>
        {{#fly_programs}}
        <optgroup label="Fly">
          {{#reward_program}}
          <option value="{{reward_program_id}}">{{name}}</option>
          {{/reward_program}}
        </optgroup>
        {{/fly_programs}}
        {{#drive_programs}}
        <optgroup label="Drive">
          {{#reward_program}}
          <option value="{{reward_program_id}}">{{name}}</option>
          {{/reward_program}}
        </optgroup>
        {{/drive_programs}}
        {{#stay_programs}}
        <optgroup label="Stay">
          {{#reward_program}}
          <option value="{{reward_program_id}}">{{name}}</option>
          {{/reward_program}}
        </optgroup>
        {{/stay_programs}}
      </select>
  </div> 
```

用于隐藏和显示的 js

```
 var show_optgroup = $('optgroup[label=' + venue_name + ']')
    , hide_optgroup = $('optgroup[label!=' + venue_name + ']')
    ;

    show_optgroup.show();
    show_optgroup.children('option').show();
    hide_optgroup.hide();
    hide_optgroup.children('option').hide();

    this.$el.find('option:selected').removeAttr('selected');
    this.$el.find('option:first').attr('selected', 'selected');
    $.uniform.update();
    return this;
  }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T14:29:17.770

像这样的东西可以吗？

```
$('[name="reward-venue"]').click(function(){
    $('optgroup[label!='+$(this).val()+']').hide();
    $('optgroup[label!='+$(this).val()+']').children('option').hide();  
    $('optgroup[label='+$(this).val()+']').show();
    $('optgroup[label='+$(this).val()+']').children('option').show();
    $('[name="program"]')[0].selectedIndex=0;
});​ 
```

# typo3 - 如何获取文件对象的绝对路径

> ID：13700439
> 
> 赞同：0
> 
> 时间：2012-12-04T10:10:07.373
> 
> 标签：typo3, typoscript

在 TYPO3 模板中，我使用以下代码插入图像：

```
page.10.marks{
  GRAFIK-LINKS = IMAGE
  GRAFIK-LINKS.file = fileadmin/images/header-a.png
} 
```

现在，只要我不使用语音 URL，它就可以正常运行，但是当启用 RealURL 或 CoolURI 等扩展时，图像不再显示。问题是生成的 HTML 使用相对路径引用这些图像：

```
<img xmlns="http://www.w3.org/1999/xhtml" width="520" height="180" border="0" alt="" src="fileadmin/images/header-a.png" /> 
```

然后被翻译成`http://example.com/speaking-URL/in-deep-path/fileadmin/images/header-a.png`但在那里找不到:(

如何让 TYPO 在这里使用绝对引用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:42:43.973

这解决了我的问题：

```
config.absRefPrefix = / 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T15:16:25.810

除非你真的需要绝对链接，否则你应该设置一个**基本标签**来处理相对链接。

例子：

```
config.baseURL = http://www.yourdomain.tld/ 
```

文档：

*   [参考](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsref/4.6.0/view/1/6/#id825230)
*   [RealURL 维基](http://wiki.typo3.org/Realurl/manual#TypoScript_configuration)

# wcf - 调试 IIS Express Web 服务/silverlight 应用程序时出现安全错误

> ID：13700442
> 
> 赞同：3
> 
> 时间：2012-12-04T10:10:16.297
> 
> 标签：wcf, silverlight, iis-express

我在一个包含 WCF SOAP Web 服务的 asp.net Web 应用程序上托管了一个 silverlight 应用程序。该应用程序正在使用 SSL 的 HTTPS://... 链接下运行。当我将它部署在运行 IIS 7.5 的测试服务器上时，一切正常且符合预期。我还有第二个 Web 应用程序，包括一个 RESTful WCF 服务，该服务使用 SSL 在我的本地机器和提到的测试服务器上运行（但在这种情况下没有 silverlight 客户端）。

我的问题是 Silverlight 客户端在应该进行反序列化的部分从 SOAP 服务获取响应时收到安全错误，但仅在我的本地计算机上。

```
 return base.Channel.EndGet...(IAsyncResult)  // <-- exception reported here: 
```

```
    System.ServiceModel.CommunicationException：发生错误时
    试图向 URI 'https://localmachinename.domain.com:8000/Service.svc' 发出请求。
    这可能是由于尝试以跨域方式访问服务而没有
    适当的跨域策略，或不适合 SOAP 服务的策略。
    您可能需要联系服务所有者发布跨域策略文件
    并确保它允许发送与 SOAP 相关的 HTTP 标头。这个错误也可能是
    由在 Web 服务代理中使用内部类型而不使用
    InternalsVisibleToAttribute 属性。请参阅内部异常了解更多信息
    细节。---> System.Security.SecurityException --->
    System.Security.SecurityException：安全错误。    
    在 System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
    在 System.Net.Browser.BrowserHttpWebRequest.c__DisplayClassa.b__9（对象 sendState）
    在 System.Net.Browser.AsyncHelper.c__DisplayClass4.b__0（对象 sendState）
    --- 内部异常堆栈跟踪结束 ---
    在 System.Net.Browser.AsyncHelper.BeginOnUI（SendOrPostCallback beginMethod，对象状态）
    在 System.Net.Browser.BrowserHttpWebRequest.EndGetResponse（IAsyncResult asyncResult）
    在 System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse（IAsyncResult 结果）
    --- 内部异常堆栈跟踪结束 ---
    在 System.ServiceModel.Channels.Remoting.RealProxy.Invoke(Object[] args)
    在 proxy_2.EndGetTypes(IAsyncResult)
    在 NameSpace.ClientClass.ServiceContractInterfaceImplementation.EndGetTypes（IAsyncResult 结果）

```

我的 SOAP 服务的 clientaccesspolicy.xml 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<access-policy>
  <cross-domain-access>
    <policy>
      <allow-from http-request-headers="SOAPAction">
        <domain uri="*" />
      </allow-from>
      <grant-to>
        <resource path="/" include-subpaths="true"/>
      </grant-to>
    </policy>
  </cross-domain-access>
</access-policy> 
```

任何提示我做错了什么？部署的应用程序在我们的测试 Web 服务器上运行良好。

2012 年 12 月 6 日：问题仍然存在。一些更新/更多信息：
Web 服务使用 Windows 身份验证和模拟。测试服务器和本地机器之间的唯一区别是应用程序池以不同的身份运行，这两种身份都是技术域用户。我发现的唯一区别是我本地计算机上的用户未在 Active Directory 中授予“受信任的委派”标志。所以我认为这可能是一个 Kerberos 问题。但是，当我运行我的宁静 WCF 服务和客户端时，这从来都不是问题。此外，使用 SOAP 服务的 Windows 窗体客户端，一切都在我的本地机器上运行良好，并且可以按预期进行开发/调试。
所以它必须是一个 Silverlight 问题。
我没有得到的是，假设这个可怕的安全错误是由跨域策略问题引起的，就像在大多数情况下那样，这些域在哪里交叉？一切都应该在本地机器上进行，没有调用其他服务。这不应该使用 IIS Express 发生，不是吗？
有人能帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:21:44.533

clientaccesspolicy.xml 应该放在**wwroot**文件夹中，并且还包括[crossdomain.xml](http://msdn.microsoft.com/en-us/library/cc197955%28v=vs.95%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T10:19:18.757

如果您在解决方案中有多个启动项目，请确保您正在运行您的服务和正确的 Silverlight 项目。我有两个silverlight 项目并且开始了一个不包含clientaccesspolicy.xml 的错误项目。

# android - 尝试运行应用程序时出现 Android Dalvik 转换错误

> ID：13700443
> 
> 赞同：-2
> 
> 时间：2012-12-04T10:10:17.343
> 
> 标签：android, dalvik

当我再次打开工作并尝试在模拟器上运行时，我保存了工作并关闭了eclipse，它说：

> > [2012-12-04 15:08:09 - Dex Loader] 无法执行 dex：com/android/dx/util/FileUtils [2012-12-04 15:08:09 - TestApp] 转换为 Dalvik 格式失败：无法执行 dex：com/android/dx/util/FileUtils

我不知道为什么这即将到来的帮助请..

说明资源路径位置类型转换为Dalvik格式失败：无法执行dex：com/android/dx/util/FileUtils TestApp Unknown Android Packaging Problem

在错误选项卡中收到此错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:33:01.310

只需清理您的项目....

在 eclipse goto -->projects --> select clean --> 选择你的项目（在弹出窗口中显示）

# eclipse-cdt - Eclipse CDT 仅指定一些文件夹作为资源

> ID：13700445
> 
> 赞同：2
> 
> 时间：2012-12-04T10:10:27.607
> 
> 标签：eclipse-cdt

在 Eclipse CDT 4.2 中，我只想包含几个文件夹作为资源。例如“/root”是创建项目“myproject”的地方。我只想包括这些文件夹并排除任何其他文件夹。

*   /root/A
*   /root/B
*   /root/C/D

我知道这可以在

```
 Project -> Resource -> Resource Filters 
```

但是那里的用户界面让我感到困惑。

*   位置和相对路径有什么区别。
*   “递归应用”复选框也让我有些困惑。
*   有一种方法可以指定正则表达式，但是如果我放置一个以 * 开头的正则表达式，例如 */root/A/* 或 */myproject/A/*，它会给出错误提示“在索引 0 附近悬挂元字符”。

简而言之，由于这些看似令人困惑的选项（对我而言），我还无法达到上述要求。请澄清

PS：源码的方式在于linux我的文件系统和专有的源代码控制系统，它们都是链接。不确定这是否重要，但只是提一下。

例如 root/A/file.c --> [链接到 file.c 的版本控制系统]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-25T15:24:48.493

*   位置和相对路径有什么区别。

位置是完整路径（例如`/home/user123/workspcae/proj1/src/foo.c`），其中相对路径只是项目目录中的一部分（例如`src/foo.c`）

*   “递归应用”复选框也让我有些困惑。

表示该规则不仅适用于 projet-root，还适用于任何子目录。即匹配的规则在`src/*.c`没有“递归应用”的情况下不会做任何事情，因为它只匹配子目录中的文件`src`

*   有一种方法可以指定正则表达式，但如果我放置一个以 * 开头的正则表达式，例如*/root/A/*或*/myproject/A/*，它会给出错误提示“在索引 0 附近悬挂元字符”。

您使用的是通配符，而不是正则表达式。正则表达式要复杂得多，星号表示前一个“对象”可能出现零次或多次。如果没有这个先前的对象，Eclipse 会感到困惑。只是不要检查正则表达式框，它应该可以按预期工作，或者在星号前添加一个点，表示任何字符。

***要解决您的问题，请执行以下操作：***

> 项目 -> 属性 -> 资源 -> 资源过滤器

*   仅包括：
    *   文件夹：（名称匹配）a
    *   文件夹：（名称匹配）b
    *   文件夹：（名称匹配）c
*   排除所有：
    *   文件：（名称匹配）*

> 文件夹 c -> 属性 -> 资源 -> 资源过滤器

*   仅包括：
    *   文件夹：（名称匹配）d
*   排除所有：
    *   文件：（名称匹配）*

# python - IRCUtils：无法制作内存视图，因为对象没有缓冲区接口

> ID：13700451
> 
> 赞同：0
> 
> 时间：2012-12-04T10:10:36.970
> 
> 标签：python, interface, buffer, irc, python-2to3

我正在考虑制作一个简单的 IRC 机器人。似乎为此目的编写了各种 Python 软件，具有不同的功能集和不同程度的复杂性。我发现[这个包](http://dev.guardedcode.com/docs/ircutils/index.html#)似乎有一个非常用户友好的界面，并安装了它。

我首先遇到的问题是这个包似乎是在没有考虑 Python 3 的情况下编写的。我在上面运行了 2to3 转换器工具，随后能够导入包。但是，在尝试从文档中复制示例时，我在问题标题中得到了错误。这是我的脚本，删除了频道名称：

```
from ircutils import bot

class hambot (bot.SimpleBot):
    def on_channel_message (self, event):
        if event.message == 'go away hambot':
            self.quit('Goodbye.')

def main ():
    hb = hambot('hambot')
    hb.connect('irc.synirc.org', channel = '(channel name removed)')
    hb.start()

if __name__ == '__main__': main() 
```

这是我尝试运行它时得到的结果。第一个例外只引用了一个名为 的脚本`asynchat.py`，它似乎是 Python 本身的一部分，而不是 IRCUtils 包的一部分，所以我对问题可能是什么有点迷茫。

```
Python 3.2.3 (default, Apr 11 2012, 07:15:24) [MSC v.1500 32 bit (Intel)] on win
32
Type "help", "copyright", "credits" or "license" for more information.
>>> import hambot
>>> hambot.main()
Traceback (most recent call last):
  File "C:\Python32\lib\asynchat.py", line 243, in initiate_send
    data = buffer(first, 0, obs)
  File "C:\Python32\lib\asynchat.py", line 56, in buffer
    memoryview(obj)
TypeError: cannot make memory view because object does not have the buffer inter
face

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "D:\Docs\programs\python\hambot\hambot.py", line 11, in main
    hb.start()
  File "C:\Python32\lib\site-packages\ircutils\client.py", line 271, in start
    self.conn.start()
  File "C:\Python32\lib\site-packages\ircutils\connection.py", line 115, in star
t
    asyncore.loop(map=self._map)
  File "C:\Python32\lib\asyncore.py", line 216, in loop
    poll_fun(timeout, map)
  File "C:\Python32\lib\asyncore.py", line 162, in poll
    write(obj)
  File "C:\Python32\lib\asyncore.py", line 95, in write
    obj.handle_error()
  File "C:\Python32\lib\asyncore.py", line 91, in write
    obj.handle_write_event()
  File "C:\Python32\lib\asyncore.py", line 466, in handle_write_event
    self.handle_write()
  File "C:\Python32\lib\asynchat.py", line 194, in handle_write
    self.initiate_send()
  File "C:\Python32\lib\asynchat.py", line 245, in initiate_send
    data = first.more()
AttributeError: 'str' object has no attribute 'more'
>>> 
```

StackOverflow 上已经有一个与此错误消息有关的问题，但接受的答案指出，在这种情况下，它与一个名为“gevent”的包有关，据我所知，它甚至没有安装在我的机器上，所以我做了不认为它与此有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:04:54.853

问题的出现是因为 Python 3 中字符串的工作方式发生了变化。以下错误可能是相关的：http: [//bugs.python.org/issue12523](http://bugs.python.org/issue12523)

IRCUtils 库可以按如下方式工作：除了运行 2to3 脚本之外，对以下内容进行以下更改`connection.py`：

```
Line 31: change from
    self.set_terminator("\r\n")
to
    self.set_terminator(b"\r\n")

Line 63: change from
    data = "".join(self.incoming)
to
    data = "".join([x.decode('utf8', 'replace') for x in self.incoming])

Line 96: change from
    self.push("%s %s\r\n" % (command.upper(), " ".join(params)))
to
    self.push(bytes("%s %s\r\n" % (command.upper(), " ".join(params)), 'utf8')) 
```

# scala - 使用 Akka 在一天中的固定时间安排任务

> ID：13700452
> 
> 赞同：19
> 
> 时间：2012-12-04T10:10:39.027
> 
> 标签：scala, scheduled-tasks, akka

我是 Akka 的初学者。我需要在每天的固定时间安排一项任务，比如早上 8 点。例如，我知道如何定期安排任务

```
import akka.util.duration._

scheduler.schedule(0 seconds, 10 minutes) {
  doSomething()
} 
```

> 在 Akka 中在一天中的固定时间安排任务的最简单方法是什么？

## 一个小括号

使用此功能很容易做我想做的事。玩具实现看起来像

```
scheduler.schedule(0 seconds, 24 hours) {
  val now = computeTimeOfDay()
  val delay = desiredTime - now

  scheduler.scheduleOnce(delay) {
    doSomething()
  }
} 
```

这并不难，但我介绍了一点比赛条件。事实上，考虑一下如果我在早上 8 点之前启动它会发生什么。外部关闭将开始，但到我计算时，`delay`我们可能会在上午 8 点之后。这意味着应该立即执行的内部关闭将被推迟到明天，从而跳过一天的执行。

有一些方法可以解决这种竞争条件：例如，我可以每 12 小时执行一次检查，而不是立即安排任务，而是将其发送给一次不会接受多个任务的参与者。

但很可能，这已经存在于 Akka 或某些扩展中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T01:03:04.700

一次编写，每天运行

```
val GatherStatisticsPeriod = 24 hours

private[this] val scheduled = new AtomicBoolean(false)

def calcBeforeMidnight: Duration = { 
  // TODO implement 
} 

def preRestart(reason: Throwable, message: Option[Any]) {
  self ! GatherStatisticsScheduled(scheduled.get)
  super.preRestart(reason, message)
}

def schedule(period: Duration, who: ActorRef) = 
  ServerRoot.actorSystem.scheduler
    .scheduleOnce(period)(who ! GatherStatisticsTick)

def receive = {

  case StartServer(nodeName) => 
    sender ! ServerStarted(nodeName)
    if (scheduled.compareAndSet(false, true)) 
      schedule(calcBeforeMidnight, self)

  case GatherStatisticsTick =>
    stats.update
    scheduled.set(true)
    schedule(GatherStatisticsPeriod, self) 

  case GatherStatisticsScheduled(isScheduled) =>
    if (isScheduled && scheduled.compareAndSet(false, isScheduled))
      schedule(calcBeforeMidnight, self)

} 
```

我相信 Akka 的调度程序以一种或另一种方式在内部处理重启。我使用非持久方式向自己发送消息 - 实际上没有严格的传递保证。此外，刻度可能会有所不同，因此 GatherStatisticsPeriod 可能是一个函数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-05T11:29:57.987

要在 Akka 中使用这种调度，您必须自己推出或者使用 Quartz，通过[Akka Camel](http://doc.akka.io/docs/akka/2.1.0-RC3/scala/camel.html)或[akka 的原型石英](https://github.com/theatrus/akka-quartz)。

如果您不需要任何花哨且极其准确的东西，那么我只需计算所需的第一次延迟并将其用作调度调用的开始延迟，并相信间隔。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-02-16T10:40:30.407

假设您想在每天下午 13 点运行您的任务。

```
import scala.concurrent.duration._
import java.time.LocalTime

val interval = 24.hours
val delay = {
  val time = LocalTime.of(13, 0).toSecondOfDay
  val now = LocalTime.now().toSecondOfDay
  val fullDay = 60 * 60 * 24
  val difference = time - now
  if (difference < 0) {
    fullDay + difference
  } else {
    time - now
  }
}.seconds

system.scheduler.schedule(delay, interval)(doSomething()) 
```

另请记住，服务器时区可能与您的不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-15T08:01:30.533

只是为了添加另一种方法来实现它，这可以使用[Akka Streams](https://doc.akka.io/docs/akka/current/stream/index.html)通过[勾选](https://doc.akka.io/docs/akka/current/stream/operators/Source/tick.html#source-tick)消息并按时过滤来完成。

```
Source
  .tick(0.seconds, 2.seconds, "hello") // emits "hello" every two seconds
  .filter(_ => {
    val now = LocalDateTime.now.getSecond
    now > 20 && now < 30 // will let through only if the timing is right.
  })
  .runForeach(n => println("final sink received " + n)) 
```

# mysql - Mysql Group By 实现细节 - mysql 在没有运算符的 Group By 查询中选择哪一行？

> ID：13700456
> 
> 赞同：0
> 
> 时间：2012-12-04T10:10:47.457
> 
> 标签：mysql, sql, database, group-by

我有一个表，每个“website_id”都有多行

```
CREATE TABLE `MyTable` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `tagCheckResult` int(11) DEFAULT NULL,
  `website_id` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `IX_website_id` (`website_id`),
) ENGINE=InnoDB; 
```

我正在尝试选择每个 website_id 的最新条目

```
-- This creates a temporary table with the last entry per website_id, and joins it
-- to get the entire row
SELECT *
FROM `WebsiteStatus` ws1 
JOIN (
    SELECT MAX(id) max_id, website_id FROM `WebsiteStatus` 
    GROUP BY website_id) ws2
ON ws1.id = ws2.max_id 
```

现在，我知道获取每个 website_id 最后一行的正确方法如上所述。我的问题是 - 我还尝试了以下更简单的查询，它似乎返回与上面完全相同的结果：

```
SELECT * FROM `WebsiteStatus` 
GROUP BY website_id
ORDER BY website_id DESC 
```

我知道原则上`GROUP BY`没有运算符（例如`MAX`），就像我在第二个查询中所做的那样，可以返回任何相关行......但实际上它返回最后一个。mysql中是否有一个实现细节可以保证总是如此？

（只是出于学术好奇心，我知道第一个查询“更正确”）。

# c# - 使用三元运算符检查 null - null 引用是否与 null 不同

> ID：13700460
> 
> 赞同：2
> 
> 时间：2012-12-04T10:10:55.000
> 
> 标签：c#, linq, tsql, asp.net-mvc-4

我正在尝试使用三元运算符来检查一个值是否为空并返回一个表达式或另一个。在将其合并到 LINQ 表达式中时，我遇到的是 LINQ 表达式的 Transact-SQL 翻译尝试执行“column = null”而不是“column IS NULL”。我有理由相信这是因为我正在执行以下操作：

```
mappedColumnName == (myVar == null ? null : myOtherVar) 
```

因为它将以下内容转换为 Transact-SQL 中的 columnName IS NULL：

```
mappedColumnName == null 
```

有人对这个有经验么？我非常想让这个工作。

整个 LINQ 表达式：

```
(from MenuItem in menuContext.Menus
   where MenuItem.IsSysAdmin == (ClientID == 1 ? true : false)
   && MenuItem.IsActive == true
   && MenuItem.ParentMenuCode == (ActiveSubMenu==null?null:ActiveMenu)
   && MenuItem.ClientID == (UseClientMenu ? ClientID : 0)
   && MenuItem.EmployeeID == (UseEmployeeMenu ? EmployeeID : 0)
   orderby MenuItem.SortOrder, MenuItem.MenuName
   select MenuItem); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:09:20.957

你为什么不使用

```
mappedColumnName == (myVar == null ? DBNull.Value: myOtherVar) 
```

反而？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:17:49.773

我实际上从未尝试在 linq 中使用三元运算符，尽管您可以将其写为：

```
(
    (myVar == null && mappedColumnName == null      ) ||
    (myVar != null && mappedColumnNmae == myOtherVar)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:26:37.180

试试这个

```
(from MenuItem in menuContext.Menus
   where MenuItem.IsSysAdmin == ((ClientID == 1 )? true : false)
   && MenuItem.IsActive == true
   && MenuItem.ParentMenuCode == ( (ActiveSubMenu==null) ?null:ActiveMenu)
   && MenuItem.ClientID == (UseClientMenu ? ClientID : 0)
   && MenuItem.EmployeeID == (UseEmployeeMenu ? EmployeeID : 0)
   orderby MenuItem.SortOrder, MenuItem.MenuName
   select MenuItem); 
```

# linux - Linux DMA 操作 - 如何启动传输

> ID：13700461
> 
> 赞同：2
> 
> 时间：2012-12-04T10:10:59.600
> 
> 标签：linux, linux-device-driver, dma

我已经阅读了 Linux 设备驱动程序[LDD3](http://oreilly.com/catalog/linuxdrive3/book/)、DMA-API.txt、DMA-HOWTO.txt 还查看了驱动程序/dma/dmatest.c 但我无法弄清楚您是如何启动 dma 传输的。所有关于映射内存的讨论，但没有关于如何启动事务的讨论。PCI 示例驱动程序具有传输功能，但它使用“特定”DMA 操作，我试图找出一个更通用/可移植的实现，它不依赖于硬件

我正在尝试制作类似的东西

1.  dma_map_single()
2.  启动读/写事务
3.  中断事务已完成，使用处理程序或 wait_event_freezable_timeout
4.  dma_unmap_single()

我只是读/写我映射的内存吗？如何注册回调处理程序？

编辑：为了提供更多细节，我正在一个 ARM 平台上工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-25T10:26:31.063

也许赛灵思的一个例子可以提供帮助： http: [//www.wiki.xilinx.com/Zynq+Linux+pl330+DMA](http://www.wiki.xilinx.com/Zynq+Linux+pl330+DMA)

来自三星的驱动程序（已包含在 linux 内核中）： http: [//lxr.free-electrons.com/source/drivers/dma/pl330.c](http://lxr.free-electrons.com/source/drivers/dma/pl330.c)

# c# - 如何隐藏菜单图像部分

> ID：13700462
> 
> 赞同：1
> 
> 时间：2012-12-04T10:11:02.033
> 
> 标签：c#, winforms

如何隐藏子菜单项中的选定区域？请参考附图..![在此处输入图像描述](../Images/ddd594f1da45977489976286f7c0ce13.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T06:39:38.790

迟到的答案：

使用**ShowImageMargin()**方法在右键单击时隐藏 ContexMenu Strip。& 请选择子项作为另一个 ContexMenuStrip。

```
 ContextMenuStrip1.ShowImageMargin = true; 
```

这隐藏了您标记的区域。

# magento - Magento 验证类

> ID：13700464
> 
> 赞同：1
> 
> 时间：2012-12-04T10:11:07.520
> 
> 标签：magento

我需要验证用户名。用户名应该只允许字符和空格。它不应该接受数字。当前允许数字的验证类。但是，如果我使用不允许空格的类“validate-alpha”。谁能告诉我应该使用哪个验证类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:26:02.797

您可以创建自己的自定义验证类

```
<script type="text/javascript">
var theForm = new VarienForm('theForm', true);
Validation.add('validate-alpha-spac','You failed to enter baz!',function(v)        {
    return Validation.get('IsEmpty').test(v) ||  /^[a-zA-Z0-9 ]+$/.test(v)
});  
</script> 
```

见[http://magento-quickies.tumblr.com/post/6579512188/magento-custom-form-validation](http://magento-quickies.tumblr.com/post/6579512188/magento-custom-form-validation)

或者

```
 Validation.addAllThese([
      'validate-alpha-space', 
      'Please use letters only (a-z or A-Z) in this field.', 
      function (v) { return Validation.get('IsEmpty').test(v) ||  /^[a-zA-Z0-9 ]+$/.test(v)
 }]), 
```

见[http://blog.baobaz.com/en/blog/custom-javascript-form-validators](http://blog.baobaz.com/en/blog/custom-javascript-form-validators)

# iphone - textFieldDidBeginEditing - 不工作

> ID：13700465
> 
> 赞同：0
> 
> 时间：2012-12-04T10:11:07.917
> 
> 标签：iphone, objective-c, ios

我的头文件

```
MyClass.h
@interface MyClass : UIViewController<UITextFieldDelegate>
{
}
@property (retain, nonatomic) IBOutlet UITextField *customValue;

MyClass.m

- (void)viewDidLoad
{
    customValue.delegate=self;
}
- (void)textFieldDidBeginEditing:(UITextField *)customValue
{
    NSLog(@"custom tips value %@",customValue.text);
} 
```

我的 NSLog 正在打印消息，但`customValue.text`没有显示并且显示为空。

**编辑 1** 我需要在用户输入值时获取在文本文件中输入的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:55:21.303

`textFieldDidBeginEditing`顾名思义，当您开始在 textField 上进行编辑时，它将起作用。

为了满足您的要求，您需要使用`shouldChangeCharactersInRange`委托方法。

```
- (BOOL)textField:(UITextField *)e shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *substring = textField.text;
    substring = [substring stringByAppendingString:string];
    NSLog(@"Text : %@",substring);
    return YES;
} 
```

**textFieldDidBeginEditing**：

> 告诉代理指定文本字段的编辑开始。
> 
> `- (void)textFieldDidBeginEditing:(UITextField *)textField Parameters`
> 
> **文本域**
> 
> ```
> The text field for which an editing session began. 
> ```
> 
> **讨论**
> 
> 此方法通知委托指定的文本字段刚刚成为第一响应者。您可以使用此方法来更新您的委托的状态信息。例如，您可以使用此方法显示在编辑时应该可见的覆盖视图。
> 
> 委托执行此方法是可选的。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 在 UITextField.h 中声明

**文本字段：shouldChangeCharactersInRange：replacementString：**

> 询问委托人是否应该更改指定的文本。
> 
> `- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`
> 
> 参数
> 
> **文本域**
> 
> ```
> The text field containing the text. 
> ```
> 
> **范围**
> 
> ```
> The range of characters to be replaced 
> ```
> 
> **细绳**
> 
> ```
> The replacement string. 
> ```
> 
> **返回值**
> 
> 如果应替换指定的文本范围，则为 YES；否则，不保留旧文本。讨论
> 
> 每当用户在文本字段中键入新字符或删除现有字符时，文本字段都会调用此方法。可用性
> 
> ```
> Available in iOS 2.0 and later. 
> ```
> 
> 在 UITextField.h 中声明

更多检查[**UITextFieldDelegate**](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:13:23.583

这是因为`textFieldDidBeginEditing:`在用户**第一次**触摸 textField 时调用。

要`textField`在用户更改时获取 的文本，请将“Editing Changed”事件连接到文件所有者的 IBAction。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:23:30.720

用这个

```
- (BOOL)textField:(UITextField *)customTipsValue shouldChangeCharactersInRange:(NSRange)range 
 replacementString:(NSString *)string
{
NSLog(@"textfield value %@",customTipsValue.text);
return YES;
}// return NO to not change text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:14:11.667

你有没有注意到这个方法

```
- (void)textFieldDidBeginEditing:(UITextField *)customTipsValue 
```

当您开始编辑 textField 时调用，而不是在您输入字符时调用。

在此处查看更多信息：

[UITextField 参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:15:16.200

当它开始编辑模式时，只需设置清除文本字段为否..

```
- (void)viewDidLoad
{
       customValue.delegate=self;
       [customValue setClearsOnBeginEditing:NO];// Add this line
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T10:17:06.073

你将需要这个[textField:shouldChangeCharactersInRange:replacementString:](http://developer.apple.com/library/ios/documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textField%3ashouldChangeCharactersInRange%3areplacementString%3a)

# java - Java：捕获未初始化的变量

> ID：13700469
> 
> 赞同：0
> 
> 时间：2012-12-04T10:11:26.327
> 
> 标签：java, exception, exception-handling, try-catch, nameerror

假设我们有一个在特定条件下声明变量的情况：

```
if (x = 1)
 boolean z = true; 
```

稍后，我们想用 try-catch 测试变量 z 是否存在。这可能吗？如果可以，我们应该捕获什么异常？

```
try {
 if (z)
  //do smth
} catch (<exception?> ex) {
 //do smth_else
} 
```

当然可以在之前声明 z 并在 if 块中相应地更改它的值，但只是假设，以上在 Java 中可能吗？例如，Python 有 NameError ，当访问的本地或全局变量未声明时将引发。

谢谢！

恒指。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:13:51.713

如果你这样声明你的变量怎么办：

```
Boolean x = null; 
```

在这种情况下，您可以检查它是否`null`存在。

更好的选择是使用枚举来表示未初始化的值：

```
public enum MyEnum {
    UNINITIALIZED, TRUE, FALSE;
} 
```

因为如果您在几个月后尝试维护您的代码，您（或其他人）可能会对 Boolean 为空感到困惑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:17:47.747

如果我们使用的变量未声明或在当前范围内不可见，我们将得到编译错误。如果它被声明，我们可以检查 NullPointerException 是否是对象。对于原始数据类型，我们应该检查默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:13:38.073

> 假设我们有一个在特定条件下声明变量的情况：

那么很难假设，因为那不会编译：

*   你应该用它`==`来测试是否相等
*   除非有块，否则不能在 if 语句中声明变量

现在假设您将该声明包含在一个块中，该变量的范围将是该块，您将无法在您的 try / catch 块中使用它（当然，除非它在 ​​if 块内，但我没有不要认为那是你想要的）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T17:11:34.890

这是不可能的，Java 是一种强类型编程语言，因为每个变量都必须先声明一个数据类型，然后才能使用它。

```
int x = 1;
boolean z = null;

if (x == 1)
 z = true;

try {
 if (z)
  //do smth
} catch (NullPointerException npe ) {
 //do smth_else
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:13:35.173

不，这在 Java 中是不可能的。必须先声明变量，然后才能引用它，否则会出现编译错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T10:14:06.783

```
Boolean z = null;
if (x = 1){
  z = true;
}

if(z == null){
 //not initialized

}else{
  //initialized
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T10:17:57.680

1，首先你的java语法是错误的：它可以如下

```
if (x == 1)
  boolean z = true; 
```

2、在Java中你必须在使用它之前声明变量。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-13T12:19:50.500

到目前为止，我了解，您将无法编译这段代码。我不记得任何异常类，但我认为即使您为此类错误“发明”异常。它不会编译。因为**原始类型的默认值被分配给称为字段的未初始化类变量，但对于方法体中使用的变量，它会产生编译时错误**

# android - Android SecurityException：没有 uri 的权限

> ID：13700474
> 
> 赞同：1
> 
> 时间：2012-12-04T10:11:37.733
> 
> 标签：android, security, securityexception

我尝试从我的应用程序查询其他应用程序（不是我的应用程序）的内容提供者。该应用程序中的提供程序定义为：

```
android:readPermission="android.permission.BIND_APPWIDGET" 
android:grantUriPermissions="true" 
```

从我的应用程序中，我将用户权限 android.permission.BIND_APPWIDGET 添加到清单文件，但我得到：

```
java.lang.SecurityException: Permission Denial: opening provider com.* from ProcessRecord{427afe60 29052:*/u0a72} (pid=29052, uid=10072) requires android.permission.BIND_APPWIDGET or com.*.ACCESS 
```

有没有人有想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:27:36.653

你不能给你的应用程序 BIND_APPWIDGET 因为那是一个签名|系统权限。有关详细信息，请参阅[Android 核心资源清单](https://android.googlesource.com/platform/frameworks/base/+/master/core/res/AndroidManifest.xml)。

# jquery - jQuery 动画不起作用

> ID：13700477
> 
> 赞同：1
> 
> 时间：2012-12-04T10:11:48.357
> 
> 标签：jquery, jquery-animate

代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<script src="jQuery/jquery-1.8.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {           
        $(document).keydown(function () {
            alert("hello");
            $('div').animate({ left: '+=10px' }, 500);
        });
    });

</script>
<style type="text/css">
div
{
     height: 50px; width: 50px; background-color: Red;
}
</style>
</head>
<body>

<div></div>

</body>
</html> 
```

我只想在每个按键上将我的 div 向右移动，但由于某种原因，这不起作用。我收到“你好”警报，因此动画语句中可能存在一些我无法弄清楚的小错误。

谁能告诉我为什么这不起作用以及正确的方法？

提前致谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:18:30.097

这是因为 left/top/right/bottom 属性仅适用于定位元素。

因此，您要么需要在 div 上使用`position:relative`/ ，要么`position:absolute`为 div 设置动画`margin-left`。（*取决于你想要的最终结果..*）

[从规格中](http://www.w3.org/TR/CSS2/visuren.html#position-props)引用

> **9.3.2 框偏移：** ' `top`', ' `right`', ' `bottom`', ' `left`'
> 
> 如果元素的“**位置**”属性的值不是“***静态***”，则称该元素已定位。定位元素生成定位框，根据四个属性进行布局：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:14:04.583

[演示](http://jsfiddle.net/Luj2u/)

试试这个代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
<script src="jQuery/jquery-1.8.3.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {           
        $(document).keydown(function () {
            alert("hello");
            $('#tomove').animate({ left: '+=10px' }, 500);
        });
    });

</script>
<style type="text/css">
div
{
     height: 50px; width: 50px; background-color: Red; position:absolute; top:0; left:0;
}
</style>
</head>
<body>

<div id="tomove"></div>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:22:38.670

您必须在 css 上将位置设置为相对：

```
position: relative; 
```

看看这个[小提琴](http://jsfiddle.net/velthune/dkhBY/20/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-24T13:51:56.003

**解决方案：** 您必须先用绝对或相对定位它才能移动它。

像这样：

```
position: relative;
/* OR */
position: absolute; 
```

# sql - 通过另一个表中的值限制表中的行数

> ID：13700478
> 
> 赞同：2
> 
> 时间：2012-12-04T10:11:50.180
> 
> 标签：sql, oracle, sqlplus

我有一张名为 ward 的桌子（与医院打交道）：

```
Create table ward(
    Wno varchar(15) Primary Key,
    Name varchar(20) Not Null,
    Number_of_beds integer Not Null
); 
```

和一张给病人的桌子：

```
Create table patient(
    Pid varchar(15) Primary Key,
    Name varchar(20) Not Null,
    Address varchar(50) Not Null,
    Date_of_birth date Not Null
 ); 
```

我需要以某种方式约束患者，以便如果将患者分配到特定病房，那么患者人数不能超过病房的床位数量。我想将 Wno 作为外键添加到患者表中，但真的不知道从那里去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:06:46.867

您可以将外键添加到患者表中，如下所示。抱歉，此查询在 MYSQL 中。我注意到你需要 Oracle。然而逻辑是相似的:) 语法需要改变。

```
Create table ward(
    Wno varchar(15) Not null Primary Key,
    Name varchar(20) Not Null,
    Number_of_beds integer Not Null
); 
```

和一张给病人的桌子：

```
Create table patient(
    Pid varchar(15) Primary Key,
    Name varchar(20) Not Null,
    Address varchar(50) Not Null,
    Date_of_birth date Not Null,
    WardNo varchar(15),
    foreign key (wardno) references ward (wno)  ' -- adds the foreign key relation
 ); 
```

为了检查病房是否已满，您可以使用`insert`或`update trigger`

免费床位数可通过以下查询获得：

```
SELECT p.wardno, (w.number_of_beds - count(pid)) as freebeds
from patient as p
left join ward as w
on p.wardno = w.wno
group by wardno 
```

现在我们创建一个触发器来检查是否有任何患者进入病房，其中 freebed count = 0。

**更新到 Oracle 版本**

```
 CREATE OR REPLACE TRIGGER FreeBedsWardTrigger
       BEFORE UPDATE OR INSERT
       ON patient
       FOR EACH ROW
    DECLARE
       max_beds    INTEGER;    -- max number of beds for the ward
       used_beds   INTEGER;    -- used beds for the ward
    BEGIN
       SELECT   COUNT (pid)
         INTO   used_beds
         FROM   patient
        WHERE   wardno = :NEW.wardno;

       SELECT   number_of_beds
         INTO   max_beds
         FROM   ward
        WHERE   wno = :NEW.wardno;

       IF (max_beds - used_beds) > 0
       THEN
          RETURN;
       ELSE
          RAISE_APPLICATION_ERROR (-100100,
                                   'No more beds available in this ward.');
       END IF;
    END; 
```

# mysql - 将另一个表中的字段值与常量一起插入到表中

> ID：13700480
> 
> 赞同：1
> 
> 时间：2012-12-04T10:11:54.863
> 
> 标签：mysql

你们可以告诉 INSERT 从另一个表中插入一个字段值以及来自表单和天数计算的恒定输入...

我试过这个但没有用

```
INSERT INTO keluar (nodaftar, idruang, tglkeluar, lamainap, createdby)
SELECT 
  '".$this->input->post('HiddenPasien')."',
  '".$this->input->post('asalruang')."',
  '".date('Y-m-d H:i:s')."',
  TIMESTAMPDIFF(DAY,  tgldaftar, date('Y-m-d H:i:s')),
  '".$this->session->userdata('username')."' 
FROM pasien 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:18:48.553

从一个表插入到另一个表并同时添加额外的常量或变量数据的一般语法如下：

```
INSERT INTO `table2`(Field1, Field2, Field3, ...)
   SELECT t1.Field1, t1.Field2, **Constant or VariableExpression**, ...
   FROM `table1` t1; 
```

例如

```
INSERT INTO `table2`(Field1, Field2, Field3)
   SELECT t1.Field1, t1.Field2, CURRENT_TIMESTAMP
   FROM `table1` t1; 
```

SQL Fiddle[示例在这里](http://www.sqlfiddle.com/#!2/bee90/1)

# ruby - Rails 3 yaml错误

> ID：13700481
> 
> 赞同：9
> 
> 时间：2012-12-04T10:11:56.390
> 
> 标签：ruby, yaml, rails-3-upgrade

我目前正在将我的应用程序从 rails 2.3 升级到 3.0 和 ruby​​ 1.9.3。在进行所需的更改并尝试访问我的应用程序的主页后，我收到以下错误。

```
Psych::SyntaxError ((/apps/myapp/config/locales/en.yml): did not find expected node     content while parsing a flow node at line 73 column 14):
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:203:in `parse'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:203:in `parse_stream'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:151:in `parse'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:127:in `load'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:297:in `block in load_file'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:297:in `open'
/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/psych.rb:297:in `load_file' 
```

完整的堆栈跟踪可以在以下位置找到： http: [//pastie.org/5478123](http://pastie.org/5478123)

en.yml 的第 73 行包含

```
order: [:year, :month, :day] 
```

有人可以帮我解决这个问题。目前 myapp 在 Rails 2.3.14 和 ruby​​ 1.8.7 上运行

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-04T19:05:52.090

Ruby 1.9.3 使用[Psych](https://github.com/tenderlove/psych)作为其 Yaml 解析器，而 1.8.7 使用旧的和过时的 Syck。您看到的[问题是 LibYaml 中的一个已知问题](https://github.com/tenderlove/psych/issues/12)，这是构建 Psych 的库，并且是由于在流上下文中允许使用冒号时出现的一些歧义。

有一个关于这个的[Ruby 错误](https://bugs.ruby-lang.org/issues/4383)。

解决方案是更改您的 Yaml 以使用块上下文：

```
order: 
  - :year
  - :month
  - :day 
```

Rails 已[更改生成此 Yaml 的模板以避免此错误](https://github.com/rails/rails/commit/dc94d813e2d158c5a284212c5d8146c677dbb877)。

# jquery - 类别/子类别的嵌套 JSON 并使用 jQuery 获取唯一元素

> ID：13700485
> 
> 赞同：0
> 
> 时间：2012-12-04T10:12:09.030
> 
> 标签：jquery, json

我正在为运动和子运动创建 JSON，如下所示：

```
{
    "sportName": "Men's Basketball",
    "path": "mbasket",
    "sportID": 7,
    "parentSportName": "Basketball"
}, {
    "sportName": "Women's BasketBall",
    "path": "wcc",
    "sportID": 8,
    "parentSportName": "Basketball"
}, {
    "sportName": "Women's Cross Country",
    "path": "wbasket",
    "sportID": 9,
    "parentSportName": "Cross Country"
}, {
    "sportName": "Men's Cross Country",
    "path": "mcc",
    "sportID": 10,
    "parentSportName": "Cross Country"
} 
```

现在我想将**sportName 嵌套在 parentSportName 下**，即 Cross Country 将包含 Men's Cross country 和 Women's Cross Country。我需要对 JSON 进行哪些更改？

PS：我正在创建一个**嵌套列表**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:18:19.500

添加包含嵌套运动数组的父运动的顶级数组。此示例通过 json lint 验证器。

```
var parentSports= 
    [
      {
         "parentSportName": "Basketball",
         "sports":[
           {
             "sportName": "Men's Basketball",
             "path": "mbasket",
             "sportID": 7
           }, {
             "sportName": "Women's BasketBall",
             "path": "wcc",
             "sportID": 8
           }]
      },{
         "parentSportName": "Cross Country",
         "sports": [
            {
             "sportName": "Women's Cross Country",
             "path": "wbasket",
             "sportID": 9
            }, {
             "sportName": "Men's Cross Country",
             "path": "mcc",
             "sportID": 10
            }]
      }
    ]; 
```

示例：http: [//jsfiddle.net/Jrf37/](http://jsfiddle.net/Jrf37/)

# java - 解压文件 - 路径

> ID：13700487
> 
> 赞同：-1
> 
> 时间：2012-12-04T10:12:25.240
> 
> 标签：java, zip, zipfile

我正在尝试用 Java 解压缩文件并将所有内容添加到数组列表中，而不是写入磁盘。我遇到的问题是我将某个路径传递给 zip 文件，然后当它读取 zip 文件并将文件添加到列表时 - 当我来处理文件时，它们在我的项目目录中有奇怪的路径不存在。

请问有人可以帮我吗？公共无效 processZipFile（字符串路径）{

```
 File file = new File(path);
    file.setReadable(true);
    ZipFile zip;
    ArrayList<File> files = new ArrayList<File>();
    try {
        zip = new ZipFile(file);
        Enumeration<ZipEntry> entries = (Enumeration<ZipEntry>) zip
                .entries();
        while (entries.hasMoreElements()) {
            ZipEntry entry = entries.nextElement();
            File f = new java.io.File(entry.getName());
            allFiles.add(f);
        }
    } catch (ZipException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:24:56.650

AFAIK，您`entry.getName()`不会返回任何可用于打开文件的有用信息。请记住，这只是一个 zip 条目，而不是物理文件。我建议您使用[zipFile.getInputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipFile.html#getInputStream%28java.util.zip.ZipEntry%29)为数组中的每个条目存储 inputStreams ，然后从输入流中提取您的内容，最后在这些流对您无用时关闭它们。

# c++ - 这是从 std::vector 中删除项目的有效方法吗？

> ID：13700495
> 
> 赞同：4
> 
> 时间：2012-12-04T10:12:47.123
> 
> 标签：c++, stdvector

这是我的代码，用于更新向量中的项目列表并删除其中一些：

```
std::vector<Particle*> particles;

...

int i = 0;
while ( i < particles.size() ) {
    bool shouldRemove = particles[ i ]->update();
    if ( shouldRemove ) {
        delete particles[ i ];
        particles[ i ] = particles.back();
        particles.pop_back();
    } else {
        i++;
    }
} 
```

当我找到一个应该删除的项目时，我用向量中的最后一个项目替换它，以避免可能多次复制后备数组的其余部分。是的，我知道这是过早的优化......

这是从向量中删除项目的有效方法吗？我在这个区域的某个地方偶尔（！）崩溃，但无法精确追踪它们（LLDB 无法向我显示这条线），所以我想确保这部分没问题。还是……？

更新：我发现了这个错误，确实它在我的代码的另一部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:30:24.223

是的，这是一种**有效的方式**。但是，如果它不是您程序中的性能瓶颈，那么最好使用智能指针来管理`Particle`对象的生命周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:37:05.860

看看[std::remove_if](http://www.cplusplus.com/reference/algorithm/remove_if/)。

此外，使用共享指针可能会很好，因为它可以让生活更轻松:-)

```
typedef std::shared_ptr< Particle > ParticlePtr;

auto newend = std::remove_if( particles.begin(), particles.end(), [](ParticlePtr p) {return p->update();} );
particles.erase( newend, particles.end() ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:04:08.473

您正在对 STL 向量进行迭代，因此请使用迭代器，这就是它们的用途。

```
std::vector<Particle*>::iterator particle = particles.begin();
while ( particle != particles.end() ) {
    bool shouldRemove = particle->update();
    if ( shouldRemove ) {
        particle = particles.remove(particle); //remove returns the new next particle
    } else {
        ++particle;
    }
} 
```

或者，更好的是，使用智能指针和[擦除/删除习语](http://en.wikipedia.org/wiki/Erase-remove_idiom)。Remove_if 本身就像您描述的那样，将旧成员移动到向量的后面并返回一个指向第一个无效成员的迭代器。传递这个和向量的`end()`to`erase`允许擦除擦除所有旧成员，因为它们在一个连续的块中。在您的场景中，您必须在调用擦除之前删除每个：

```
auto deleteBegin = std::remove_if(
  particles.begin(), particles.end(),
  [](Particle* part){ return part->update();}));
for(auto deleteIt = deleteBegin; deleteIt != particles.end(); ++deleteIt)
    delete *deleteIt;
std::erase(deleteBegin, particles.end()); 
```

或 C++11 之前：

```
bool ShouldDelete(Particle* part) {
     return part->update();
}

typedef vector<Particle*> ParticlesPtrVec;

ParticlesPtrVec::iterator deleteBegin = std::remove_if(
    particles.begin(), particles.end(), ShouldDelete);
for(ParticlesPtrVec::iterator deleteIt = deleteBegin; 
         deleteIt != particles.end(); ++deleteIt)
    delete *deleteIt;
std::erase(deleteBegin, particles.end()); 
```

然后测试整个代码的性能并优化实际瓶颈所在的位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:24:18.333

我在代码中看不到任何直接问题。您可能对向量内的实际指针有一些问题。

尝试在您的代码上运行 valgrind 以检测任何隐藏的内存访问问题，或切换到智能指针。

# windows - MS.Internal.XcpImports.MethodEx（IntPtr ptr，字符串名称，CValue[] cvData

> ID：13700496
> 
> 赞同：8
> 
> 时间：2012-12-04T10:12:50.387
> 
> 标签：windows, windows-phone-7

我收到一个错误“值不在预期范围内”。堆栈跟踪如下所示。请帮忙...

```
at MS.Internal.XcpImports.MethodEx(IntPtr ptr, String name, CValue[] cvData)
   at MS.Internal.XcpImports.MethodPack(IntPtr objectPtr, String methodName, Object[] rawData)
   at MS.Internal.XcpImports.UIElement_TransformToVisual(UIElement element, UIElement visual)
   at Microsoft.Phone.Controls.Pivot.ReleaseMouseCaptureAtGestureOrigin()
   at Microsoft.Phone.Controls.Pivot.OnManipulationDelta(Object sender, ManipulationDeltaEventArgs args)
   at MS.Internal.CoreInvokeHandler.InvokeEventHandler(Int32 typeIndex, Delegate handlerDelegate, Object sender, Object args)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T17:56:41.517

可能是您尝试在异步函数中访问主线程对象或 UI 线程对象。因为异步函数的线程具有较低的优先级，因此您无法从这里访问主线程对象..

# asp.net-mvc - 传入字典的模型项的类型为“System.Collections.Generic.List`1[System.Int32]”

> ID：13700498
> 
> 赞同：0
> 
> 时间：2012-12-04T10:12:52.850
> 
> 标签：asp.net-mvc, asp.net-mvc-4, html.dropdownlistfor

ASP.Net MVC 4

我正在尝试在下拉列表中填充国家列表（数据库中国家表中的数据）。我收到以下错误：

```
The model item passed into the dictionary is of type 
System.Collections.Generic.List`1[System.Int32]', but this dictionary requires a model    item of type 'BIReport.Models.Country'. 
```

我是 ASP.Net MVC 的新手，我不明白这个错误。我的感觉是 Index 方法返回的与我在视图中使用的模型不匹配。

模型：：

```
namespace BIReport.Models
{
  public partial class Country
  {
    public int Country_ID { get; set; }
    public string Country_Name { get; set; }
    public string Country_Code { get; set; }
    public string Country_Acronym { get; set; }
  }

 } 
```

控制器：：

```
 public class HomeController : Controller
{
    private CorpCostEntities _context;

    public HomeController()
    {
        _context = new CorpCostEntities();
    }

    //
    // GET: /Home/

    public ActionResult Index()
    {
        var countries = _context.Countries.Select(arg => arg.Country_ID).ToList();
        ViewData["Country_ID"] = new SelectList(countries);
        return View(countries);
    }

} 
```

看法：：

```
@model BIReport.Models.Country
<label>
Country @Html.DropDownListFor(model => model.Country_ID, ViewData["Country_ID"] as SelectList)
</label> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:14:56.253

问题出在您视图的第 1 行。像这样改变它：

```
@model IEnumerable<BIReport.Models.Country> 
```

如果您已经通过以下方式进行操作，也无需传递模型以查看：

```
ViewData["Country_ID"] = new SelectList(countries); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:16:45.280

您正在选择 CountryID，因此您将有一个整数列表传递到视图中。

我认为你真的想要这样的东西：

```
public ActionResult Index()
{
    var countries = _context.Countries.ToList();
    ViewData["Country_ID"] = new SelectList(countries, "Country_ID", "Country_Name");
    return View();
} 
```

我不太确定为什么您将单一国家作为您的视图模型。

更新：

我仍然不确定为什么模型是一个国家，如果您只是要发布所选国家的 ID，那么您根本不需要模型（或者只是有一个整数）。不过，这会很好：

看法

```
@model MvcApplication1.Models.Country

@Html.DropDownListFor(m => m.Country_ID, ViewData["Country_ID"] as SelectList) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T09:05:10.793

当您说@model BIReport.Models.Country 时，这意味着您的视图需要一个包含单个国家/地区详细信息的模型。相反，您需要在下拉列表中显示国家列表。因此，您应该告诉视图查找国家/地区详细信息列表。因此@model IEnumerable。

# asynchronous - 异步任务队列的用途

> ID：13700499
> 
> 赞同：1
> 
> 时间：2012-12-04T10:12:55.097
> 
> 标签：asynchronous, celery

我是 Web 开发的新手，所以请耐心等待。我刚刚遇到了[Celery，一个异步任务队列](http://celeryproject.org/)。阅读文档后，我得到的`celery`是为代码添加延迟，然后在后台运行其进程。我不太明白，我认为它就像一个普通的AJAX，如果是，使用这个所谓的有什么好处`asynchronous task queue`，如果不是，普通的ajax调用和异步任务队列有什么区别。如果你们给我一些现实世界的例子会很好。谢谢。

# qt4 - 我需要哪些 PCL 库来编译 QT4 项目

> ID：13700500
> 
> 赞同：1
> 
> 时间：2012-12-04T10:12:57.653
> 
> 标签：qt4, point-cloud-library

我正在寻找我必须在 QT4 项目中链接的 PCL 库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T23:17:41.947

我找到了解决方案。缺少 QT 文件的 /QT/4.8.0/ 文件夹。

为此，他们还想在她自己的 qt 项目中实现 pcl。

*   下载 QT creator -> 安装
*   为 VS2010 下载 QT 4.8.0 -> 安装
*   下载 pcl 二进制文件 -> 安装
*   将以下代码添加到您的项目文件中
*   享受 PCL

这是我的 *.pro 文件，带有 openCV 和 PCL 包括/链接：

```
#openCV
INCLUDEPATH += C:\\opencv2_4_0_VS_bin\\build\\include
LIBS += -LC:\\opencv2_4_0_VS_bin\\lib\\Debug\\ \
-lopencv_core240d \
-lopencv_highgui240d  \
-lopencv_imgproc240d  \
-lopencv_features2d240d  \
-lopencv_calib3d240d \
-lopencv_contrib240d \
-lopencv_flann240d \
-lopencv_legacy240d \
-lopencv_ml240d \
-lopencv_objdetect240d \
-lopencv_ts240d \
#-lopencv_gpu240d \
-lopencv_video240d

# PCL
INCLUDEPATH += C:\\PCL_1_6_0\\include\\pcl-1.6
INCLUDEPATH += C:\\PCL_1_6_0\\3rdParty\\Boost\\include
INCLUDEPATH += C:\\PCL_1_6_0\\3rdParty\\Eigen\\include
INCLUDEPATH += C:\\PCL_1_6_0\\3rdParty\\FLANN\\include
INCLUDEPATH += C:\\PCL_1_6_0\\3rdParty\\Qhull\\include
INCLUDEPATH += C:\\PCL_1_6_0\\3rdParty\\VTK\\include\\vtk-5.8
INCLUDEPATH += C:\\Program Files (x86)\\OpenNI\\Include

LIBS += -L"C:\Program Files (x86)\OpenNI\Lib\openNI.lib"

LIBS += -LC:\\PCL_1_6_0\\3rdParty\\Qhull\\Lib\\ \
-lqhullstatic

LIBS += -LC:\\PCL_1_6_0\\lib\\ \
-lpcl_apps_release \
-lpcl_common_release \
-lpcl_features_release \
-lpcl_filters_release \
-lpcl_io_release \
-lpcl_io_ply_release \
-lpcl_kdtree_release \
-lpcl_keypoints_release \
-lpcl_octree_release \
#-lpcl_range_image_border_extractor_release \
-lpcl_registration_release \
-lpcl_sample_consensus_release \
-lpcl_search_release \
-lpcl_segmentation_release \
-lpcl_surface_release \
-lpcl_tracking_release \
-lpcl_visualization_release

LIBS += -LC:\\PCL_1_6_0\\3rdParty\\VTK\\lib\\vtk-5.8\\ \
-lMapReduceMPI \
-lmpistubs  \
-lQVTK \
-lvtkalglib \
-lvtkCharts \
-lvtkCommon \
-lvtkDICOMParser \
-lvtkexoIIc \
-lvtkexpat \
-lvtkFiltering \
-lvtkfreetype \
-lvtkftgl \
-lvtkGenericFiltering \
-lvtkGeovis \
-lvtkGraphics \
-lvtkhdf5 \
-lvtkHybrid \
-lvtkImaging \
-lvtkInfovis \
-lvtkIO \
-lvtkjpeg \
-lvtklibxml2 \
-lvtkmetaio \
-lvtkNetCDF \
-lvtkNetCDF_cxx \
-lvtkpng \
-lvtkproj4 \
-lvtkRendering \
-lvtksqlite \
-lvtksys \
-lvtktiff \
-lvtkverdict \
-lvtkViews \
-lvtkVolumeRendering \
-lvtkWidgets \
-lvtkzlib

LIBS += -LC:\\PCL_1_6_0\\3rdParty\\FLANN\\lib\\ \
-lflann_cpp_s

LIBS += -LC:\\PCL_1_6_0\\3rdParty\\Boost\\lib\\ \
-llibboost_date_time-vc100-mt-1_49 \
-llibboost_thread-vc100-mt-1_49 \
-llibboost_filesystem-vc100-mt-1_49 \
-llibboost_system-vc100-mt-1_49 \
-llibboost_iostreams-vc100-mt-1_49 
```

不幸的是，我还有其他链接问题:-(

当我尝试使用可视化器（pcl::visualization::PCLVisualizer）时，它给了我一些这样的错误：

```
vtkCommon.lib(vtkDebugLeaks.obj):-1: Fehler:LNK2019: Verweis auf nicht aufgelöstes externes Symbol "__imp__MessageBoxA@16" in Funktion ""protected: static int __cdecl vtkDebugLeaks::DisplayMessageBox(char const *)" (?DisplayMessageBox@vtkDebugLeaks@@KAHPBD@Z)". 
```

（对不起，它是德语，但您可以看到错误 LNK2019 和丢失的文件）

vktCommon.lib 似乎是一个外部链接错误。此库缺少 vtkWin32outputWindow.obj 文件。SystemTools.obj 文件也丢失了。

我可以找到解决方案。

pcl::visualization::CloudViewer 工作正常。

顺便提一句。我正在寻找解决方案如何为点云区域着色（由 pcl::PointIndices 定义）。我想为从分割中检测到的底层着色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:28:59.063

您正在使用哪个操作系统？

如果您右键单击您的项目文件，它会显示一个选项 - 添加库-> 外部库。在此窗口中，选择您的库文件并包含文件位置。它将在您的 .pro 文件中生成包含语句。

确保使用从用于编译当前项目的同一编译器编译的库。例如 - 在 Windows 上，如果您使用 Win32-VC10 二进制文件进行 PCL，那么请确保您也使用 VC10 编译器来编译 qt 项目。

# android - 如何在操作栏选项卡之间平滑切换，而无需每次都重新加载片段

> ID：13700502
> 
> 赞同：1
> 
> 时间：2012-12-04T10:13:04.147
> 
> 标签：android, android-ui

我的以下**操作栏选项卡实现**方法是否有效？因为每当我在选项卡之间切换时，选项卡内容片段都会被替换并在框架布局中再次加载。

我想在第一次自己添加片段并在选项卡之间切换时平滑地显示片段（无需重新加载）。

**注意：**我尝试在**onCreate**方法上添加所有片段。但是片段相互重叠并同时在框架布局中显示所有片段。

**我的代码：**

```
public class ManageActivity extends SherlockFragmentActivity implements ActionBar.TabListener {

    private Activity mActivity;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_manage);

        getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab tab1 = getSupportActionBar().newTab();
        tab1.setText("Tab1");
        tab1.setTabListener(this);
        getSupportActionBar().addTab(tab1);

        ActionBar.Tab tab2 = getSupportActionBar().newTab();
        tab2.setText("Tab2");
        tab2.setTabListener(this);
        getSupportActionBar().addTab(tab2);

        ActionBar.Tab tab3 = getSupportActionBar().newTab();
        tab3.setText("Tab3");
        tab3.setTabListener(this);
        getSupportActionBar().addTab(tab3);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        String selectedtab = tab.getText().toString();

        if(selectedtab.equalsIgnoreCase("Tab1"))
        {
            getSupportFragmentManager().beginTransaction().replace(R.id.tabfragment_container, new Tab1Fragment()).commit();
        }
        else if (selectedtab.equalsIgnoreCase("Tab2")) {
            getSupportFragmentManager().beginTransaction().replace(R.id.tabfragment_container, new Tab2Fragment()).commit();
        } 
        else if (selectedtab.equalsIgnoreCase("Tab3")){
            getSupportFragmentManager().beginTransaction().replace(R.id.tabfragment_container, new Tab3Fragment()).commit();
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // TODO Auto-generated method stub
    }
} 
```

**活动管理.xml：**

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/tabfragment_container"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".ManageActivity" >
</FrameLayout> 
```

注意：我的选项卡内容是使用加载器管理器从 Sqlite 查询数据的 Listfragments。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:24:35.323

我使用包含我所有片段的[ViewPager 。](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)每次选择选项卡时，我只在 Viewpager 中切换位置。

```
 @Override
   public void onTabSelected(Tab tab, FragmentTransaction ft) {
      int position = adapter.findItemPosition(this.id);
      ViewPager viewPager = (YourActivity)getActivity().getViewPager(); // Convenience method
      if (viewPager != null) {
         viewPager.setCurrentItem(position, this.shouldScroll);
      } else {
         Log.d(getClass().getSimpleName(), "No pager available");
      }
   } 
```

要使此代码正常工作，您需要一个 Viewpager，并且必须通过 PagerAdapter 的实例将所有选项卡添加到 ViewPager。我使用[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)因为大多数时候没有那么多标签。

这也使您的用户能够滑动浏览选项卡。如果用户通过滑动更改所选选项卡，您需要更新所选选项卡。我在所有应用程序中都使用 ActionBarSherlock。因此，下一个 Snippet 使用 supportActionBar。此代码示例是一个简单的侦听器，可以在 ViewPager 上设置以通过滑动更新选项卡更改。

```
 private final class TabPageChangedListener extends ViewPager.SimpleOnPageChangeListener {

      @Override
      public void onPageSelected(int position) {
         ActionBar actionBar = getSupportActionBar();
         if (actionBar != null) {
            actionBar.setSelectedNavigationItem(position);
         } else {
            Log.e(getClass().getSimpleName(),
                  "No actionbar available to change selected tab.");
         }
      }
   } 
```

如果您不希望标签可滑动，也可以通过覆盖 ViewPager 并拦截滑动触摸动作来禁用滑动。

# c# - 这里的演员在哪里？LINQ to Entities 仅支持转换实体数据模型基元类型

> ID：13700505
> 
> 赞同：24
> 
> 时间：2012-12-04T10:13:16.000
> 
> 标签：c#, entity-framework

我有许多实体框架表，我`IHistoricEntity`使用它们的部分类支持接口。`IHistoricEntity`有财产`ActiveTo` `Datetime?`。

```
// Auto generated LINQ to Entities domain service:
[EnableClientAccess()]
public partial class ProductService : LinqToEntitiesDomainService<ProductDBEntities>
{
    public IQueryable<ANALYSIS_CODES> GetANALYSIS_CODES()
    {
        return this.ObjectContext.ANALYSIS_CODES;
    }
 ...
}

// My Partial class to add interface
public partial class ANALYSIS_CODES : IHistoricEntity
{} 
```

我正在尝试将此工作代码重构为一种方法：

```
List<ANALYSIS_CODE> filtered = (from rec in ps.GetANALYSIS_CODES() where rec.ActiveTo == null select rec).ToList() 
```

像这样：

```
private List<T> Filter<T>(IQueryable<T> queryable) where T : IHistoricEntity
{
    return (from rec in queryable where rec.ActiveTo == null select rec).ToList();
}

// called like this:
List<ANALYSIS_CODE> filtered = Filter(ps.GetANALYSIS_CODES()); 
```

这给出了这个例外`ToList`：

> 无法将类型“ANALYSIS_CODES”转换为类型“IHistoricEntity”。LINQ to Entities 仅支持转换实体数据模型基元类型。

但是我在哪里要求它转换为`IHistoricEntity`? 我已经说了，`T`必须支持`IHistoricEntity`。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-12-04T11:15:36.673

`rec.ActiveTo`指在您的界面中定义的属性。因此，Linq 需要先`rec`转换为`IHistoricEntity`才能访问该属性。

不要被 中引发的异常所迷惑`.ToList()`：Linq 查询仅在需要记录时才被评估和执行，在这种情况下，当集合被转换为`List<>`.

**更新**：我验证了@hvd 的评论，确实，添加一个`where T: class`子句将 Linq 表达式从

```
System.Collections.Generic.List`1[MyType]
    .Where(x => (Convert(x).ActiveTo == Convert(null))) 
```

到

```
System.Collections.Generic.List`1[MyType]
    .Where(x => (x.ActiveTo == Convert(null))) 
```

# jquery - Wordpress AJAX 在加载时暂时禁用点击事件

> ID：13700513
> 
> 赞同：0
> 
> 时间：2012-12-04T10:13:28.980
> 
> 标签：jquery, wordpress

嗨，我有这个 jQuery 代码：

```
$('#myid').click(function() {   

    var data = {
            action: 'xxx_ajax_response',
            xxx_ajax_response_nonce: the_ajax_script.xxx_ajax_response_nonce    
        };      
    //do an ajax request

    $.post(the_ajax_script.ajaxurl, data, function(response) {

        $(this).next().slideToggle();   

    });

    //return false;
}); 
```

当 AJAX 功能仍在执行/加载时如何暂时禁用点击事件？但是在成功加载 AJAX 后恢复点击？我尝试过更改课程，但我正在使用 id 选择器并且不起作用。有没有简单的方法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:18:08.197

`click`只需在回调函数之外设置一个标志变量：

```
var _doing_ajax = false;
$('#myid').click(function() {   
    if ( _doing_ajax ) {
        return false;
    }
    var data = {
            action: 'xxx_ajax_response',
            xxx_ajax_response_nonce: the_ajax_script.xxx_ajax_response_nonce    
        };      

    _doing_ajax = true;
    //do an ajax request
    $.post(the_ajax_script.ajaxurl, data, function(response) {

        $(this).next().slideToggle();   
        _doing_ajax = false;
    });

    //return false;
}); 
```

基本上你定义了一个新的局部变量，默认值设置为`false`. 在`.click()`回调函数的开头，检查标志变量的值——如果为真，则返回假。就在开始 AJAX 请求之前，您将变量设置为`true`. 完成 AJAX 调用后，`false`再次将变量设置为，以便进一步单击将再次启用 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:46:17.917

您可以使用 jQuery [unbind](http://docs.jquery.com/Events/unbind)在加载时从元素中删除事件，并在加载数据后再次[绑定](http://docs.jquery.com/Events/bind)它。您在[jQuery.post()](http://api.jquery.com/jQuery.post/)中编写`bind`函数`success``$.post()`

这篇文章可能有助于[在 jQuery 中删除事件处理程序的最佳方法？](https://stackoverflow.com/questions/209029/best-way-to-remove-an-event-handler-in-jquery)

# php - Drupal7 - 如何在页面中从 mysql 中选择记录？

> ID：13700521
> 
> 赞同：2
> 
> 时间：2012-12-04T10:13:38.183
> 
> 标签：php, mysql, drupal, drupal-7

当我在 drupal 中创建基本页面时，我选择了**PHP 代码的****文本格式**。现在我可以在这里编写 PHP 代码了。

 **我想列出 MySQL 中的记录，如何在此处包含数据库连接？

这是在内容中编写 PHP 代码的好方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:17:05.263

您可以直接调用drupal api函数，而无需在页面中`db_query()`添加任何函数。`dbconection`不建议在页面内添加 php 代码，尝试为此创建自己的模块或使用视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T13:57:51.693

第一：您不应该使用 PHP 输入格式。它的存在在 Drupal 中引起了激烈的争论，许多人倾向于完全删除它。这既是安全的噩梦，也是维护的恐怖。

也就是说，您正在寻找的 PHP 是：

```
<?php
// Create an object of type SelectQuery
$query = db_select('users', 'u');

// Add extra detail to this query object: a condition, fields and a range
$query->condition('u.uid', 0, '<>');
$query->fields('u', array('uid', 'name', 'status', 'created', 'access'));
$query->range(0, 50);
?> 
```

有关[动态查询](https://drupal.org/node/310075)的更多信息，请参见 Drupal.org。不需要设置你的数据库，Drupal 已经处理好了。

如果您希望您的代码连接到与主 Drupal 数据库不同的数据库，您可以将该数据库添加到您的 settings.php：

```
$databases['gallery']['gallery'] = array(
  'driver' => 'mysql',
  'database' => 'gallery',
  'username' => 'username',
  'password' => 'secret',
  'host' => 'localhost',
); 
```

这引入了一个使用数据库“gallery”的称为“gallery”的新[数据库资源。](https://drupal.org/node/310071)当您想要使用来自另一个数据库的资源时很有用，例如来自“图库应用程序”的记录。

`$options`然后，您可以使用-parameter中的键查询该数据库，如下所示：

```
<?php
// Create an object of type SelectQuery
$query = db_select('pictures', 'p', array('target' => 'gallery'));

// Add extra detail to this query object: a condition, fields and a range
$query->condition('p.status', 'published', '=');
$query->fields('p', array('path', 'title', 'date'));
$query->range(0, 50);
?> 
```**

# c# - 防止 Web.config 继承

> ID：13700522
> 
> 赞同：0
> 
> 时间：2012-12-04T10:13:39.480
> 
> 标签：c#, asp.net-mvc, webforms, web-config

我一直在寻找解决此问题的方法，但在任何地方都找不到...

**背景：**我有两个网络应用程序；一个正在运行 Umbraco CMS，这是根 Web 应用程序。第二个是 MVC 4 应用程序，是根应用程序中的**虚拟目录**，即 /rootapp/quote。

每个应用程序都有自己的 Web.config。最初我遇到了配置继承问题，但我（几乎）通过`<location>`在父应用程序配置中放置标签来解决这个问题，如下所示：

```
 <location path="." inheritInChildApplications="false">
    <system.web>
   ....
    </system.web>
  </location> 
```

这修复了错误，但生成了一个我无法修复的新错误。我理解这是因为父 Web.config 已经定义了 Razor。

我`<remove name="system.web.webPages.razor"/>`在子应用程序中尝试过没有运气，有什么想法如何阻止继承..？

**错误**

```
Line 3:  <configuration>
Line 4:    <configSections>
Line 5:      <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
Line 6:        <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
Line 7:        <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:34:52.137

它是野兽的本性。我的问题是您是否可以修改您的部署以使报价应用程序不在您的根目录中：

```
Url 1: http://server/root/cms

Url 2: http://server/root/quote 
```

然后配置 IIS 将任何到 /root 的请求重定向到 /root/cms

# svn - WordPress Plugins repo，获取稳定标签

> ID：13700527
> 
> 赞同：2
> 
> 时间：2012-12-04T10:13:55.890
> 
> 标签：svn, wordpress, svn-externals

我的机器上运行着一个本地 SVN 服务器。在其中，我有一个包含一些默认`/wp-content`内容的存储库，我用于每个项目（默认插件、默认主题框架等）。今天我只记得我可以用它`svn:externals`来获取每个插件的最新文件，而不是在我的仓库中保存每个插件的文件。

这很好，但有一个问题 - 并非所有插件的稳定标签都是-`/trunk`所以我最终可能会得到一个开发版本（即在 中`/trunk`），而不是`stable`由.`stable``readme.txt`

所以我的问题是 - 有没有办法获取`stable`标签，无论它是什么，使用`svn:externals`（或其他任何东西 - 当我现在考虑它时，我可能能够运行一个 shell 脚本来检查每个插件的`stable`标签和相应地更新回购）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:43:21.823

托管在 WordPress.org 上的插件需要有一个`readme.txt`以特定方式格式化的名为的文件。看到这个： [http ://wordpress.org/extend/plugins/about/readme.txt](http://wordpress.org/extend/plugins/about/readme.txt)

readme.txt 顶部附近的标签之一是`Stable tag:`.

当 Wordpress.org 博客管理员去下载插件时，wordpress.org 在 svn 中查找 trunk/readme.txt，获取 stable 标签，然后从 tags/ *stable-tag* /获取插件

所以发布更新的开发者需要创建一个新的稳定标签，然后修改 readme.txt 并签入到主干。

我不知道你是否可以用 svn:externals 来解决这个问题。但值得一试。

# ruby-on-rails - bundle show gemname 和 gem list gemname 之间的区别

> ID：13700529
> 
> 赞同：2
> 
> 时间：2012-12-04T10:14:03.697
> 
> 标签：ruby-on-rails, gem

如果我在 rails 命令提示符中执行***gem list rack-cache***，那么它不会显示具有该名称的 gem，但是如果我执行***bundle show rack-cache***那么它会为我提供***/vendor/bundle/ruby/1.9.1/gems/rack之类的路径-cache-1.2***存储 gem 的位置。

我不理解这种行为，因为如果 gem 存在于后一个命令的路径中，那么为什么当我给出 gem list rack-cache 命令时它不显示。有什么不同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T10:29:21.850

混乱来自捆绑器正在解决的问题。

当您将 Gems 安装到系统范围的 gem 存储库中时，一旦您拥有几个应用程序，您最终会得到多个版本的 gem。

因此，例如，您最终可能会得到 3 个 Rails 版本：3.2.8、3.2.6 和 3.1.0

如果您做一个`require rails`ruby​​gems 可以使用这些版本中的任何一个，并且如果您最初针对 3.1.0 构建的应用程序与 3.2.8 中的某些更改不兼容，那么您最终会感到困惑。

bundler 所做的是准确安装 Gemfile.lock 中指定的 gem，并锁定它们以供该应用程序使用。因此，Bundler 修改了 ruby​​gem 的加载路径，因此只有 Gemfile.lock 中的 Gem 对应用程序真正可用。

因此`bundle install`，不是将 gems 安装到系统范围的 gem 目录中，而是安装到每个项目的不同路径。这就是为什么您在捆绑程序目录中而不是系统范围内看到 gem。如果您`rack-cache`通过安装，`gem install`您还将在`gem list`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:37:22.160

**`bundle show`**和之间有一个小的区别**`gem list`**

**`bundle show`**将列出您当前应用程序中安装的所有 gem [您可以在 Gemfile.lock 文件中看到它们]，其中**`gem list`**将列出安装在任何`gemset`设置为使用的任何 gem 下的所有 gem。
**`bundle show gem_name`**将给出路径。
**`gem list gem_name`**将与安装到本地 gem 或 gemset 中的所有版本提供相同的 gem_name。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T10:41:12.610

捆绑展示：

显示作为捆绑包一部分的所有 gem，或给定 gem 的路径

$ 捆绑显示 [GEM] [--paths]

在 Mac 上处于开发模式时，gem 仍会安装在默认 gem 路径中，而在生产模式下，它们会安装在特定于项目的文件夹中。试着在每台机器上做一个 bundle show rails ，你就会明白我的意思了。

当您运行 gem list 时，它会在主 gem 文件夹中查找，并且由于您的生产 gem 位于特定于项目的文件夹中，因此 global gem 命令不知道要查找那里。因此，您将需要执行 bundle exec 以在服务器上运行任何这些项目特定的 gemscommands。出于我的目的，我为 bundle exec 创建了一个别名。此外，要列出项目的 gem，您可以执行 bundle list。

请参阅[http://gembundler.com/rationale.html#deploying-your-application](http://gembundler.com/rationale.html#deploying-your-application)了解这背后的基本原理

# php - PHP AJAX 响应，如何添加不同的条件？

> ID：13700532
> 
> 赞同：0
> 
> 时间：2012-12-04T10:14:05.177
> 
> 标签：php, jquery

我希望能够设置以下内容：

1）如果邮件已经存在则返回错误 2）如果成功则返回错误 3）如果错误则返回错误

目前它可以工作，但允许您添加相同的电子邮件地址并发送成功的回复，但需要为现有电子邮件添加一个

```
$('form').submit(function(){

// check if passwords match; you might want to do more thorough validation
    var hasError = false;
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var emailaddressVal = $("#email").val();
    if(emailaddressVal == '') {
            $("#email").after('<span class="error">Please enter your email address.</span>');
            hasError = true;
    }

    else if(!emailReg.test(emailaddressVal)) {
            $("#email").after('<span class="error">Enter a valid email address.</span>');
            hasError = true;
    } else if(hasError == false) {
            // make ajax post request and store the response in "response" variable
     $.post('submit.php', $(this).serialize(), function(response){

         // process response here (assume JSON object has boolean property "ok"
         if(response.ok==true){
             // sweet, it worked!
             alert('OK!');
         }else{
             // handle error
             alert('Ooops');
         }
     }, 'json');
    }

    // stop the form from being submitted
return false;
}); 
```

而php是：

```
<?php
ini_set('display_errors', 1);
error_reporting(E_ALL);

$con = mysql_connect("localhost","root",""); //Replace with your actual MySQL DB Username and Password
if (!$con) { die('Could not connect: ' . mysql_error()); } 
mysql_select_db("table", $con); //Replace with your MySQL DB Name

$first_name=mysql_real_escape_string($_POST['firstname']); 
$last_name=mysql_real_escape_string($_POST['lastname']); 
$email=mysql_real_escape_string($_POST['email']); 

$sql="INSERT INTO email_list (first_name,last_name,email) VALUES ('$first_name','$last_name','$email')"; 

if (!mysql_query($sql,$con)) { die('Error: ' . mysql_error()); } 
echo "The form data was successfully added to your database."; 
mysql_close($con);
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:21:46.400

只需在添加之前检查数据库中的电子邮件。希望这可以帮助。

```
 <?php
    $first_name=mysql_real_escape_string($_POST['firstname']); 
    $last_name=mysql_real_escape_string($_POST['lastname']); 
    $email=mysql_real_escape_string($_POST['email']); 
    $sql = "SELECT * FROM email_list WHERE `email`='$email'";
    $res= @mysql_query($sql);
    if(@mysql_num_rows($res)>0)
    {
      echo "Email Already Exists" ;

    }
    else
{
 $sql="INSERT INTO email_list (first_name,last_name,email) VALUES ('$first_name','$last_name','$email')"; 

    if (!mysql_query($sql,$con)) { die('Error: ' . mysql_error()); } 
    echo "The form data was successfully added to your database."; 
  }
    ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:23:49.537

```
$sql="SELECT email FROM email_list WHERE email = '$email'";
$result = mysql_query($sql, $con) or die('Error: ' . mysql_error());
if (mysql_num_rows($result) > 0)
{
  // Error - Email already exists
   echo "Error: The email address already exists."; 
} else {
   $sql="INSERT INTO email_list (first_name,last_name,email) VALUES ('$first_name','$last_name','$email')"; 

   if (!mysql_query($sql,$con)) { die('Error: ' . mysql_error()); } 
   echo "The form data was successfully added to your database."; 
}

mysql_close($con); 
```

我添加了一个检查以查看电子邮件地址是否已经存在，如果存在则输出错误。mysql错误也有错误输出。

如果您需要以某种方式格式化输出，请使用 JSON。但是以上内容应该可以帮助您入门。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:17:16.273

只需在您的 php 文件末尾添加以下行

```
$value = mysql_insert_id() > 0;

echo json_encode( array('ok'=> $value ) ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:26:42.350

jQuery

```
$('form').submit(function(){

// check if passwords match; you might want to do more thorough validation
    var hasError = false;
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var emailaddressVal = $("#email").val();
    if(emailaddressVal == '') {
            $("#email").after('<span class="error">Please enter your email address.</span>');
            hasError = true;
    }

    else if(!emailReg.test(emailaddressVal)) {
            $("#email").after('<span class="error">Enter a valid email address.</span>');
            hasError = true;
    } else if(hasError == false) {
            // make ajax post request and store the response in "response" variable
     $.post('submit.php', $(this).serialize(), function(response){

         // process response here (assume JSON object has boolean property "ok"
         if(response.ok=='0'){
             alert('required fields empty');
         }else if(response.ok=='1'){
               alert('email already exists');
         }
else if(response.ok=='2')
{
alert('thankyou for your input');
}
     }, 'json');
    }

    // stop the form from being submitted
return false;
}); 
```

php代码

```
 <?php
    ini_set('display_errors', 1);
    error_reporting(E_ALL);

    $con = mysql_connect("localhost","root",""); //Replace with your actual MySQL DB Username and Password
    if (!$con) { die('Could not connect: ' . mysql_error()); } 
    mysql_select_db("table", $con); //Replace with your MySQL DB Name

    $first_name=mysql_real_escape_string($_POST['firstname']); 
    $last_name=mysql_real_escape_string($_POST['lastname']); 
    $email=mysql_real_escape_string($_POST['email']); 

    if(empty($first_name) || empty($last_name) || empty($email) ) {

        echo json_encode( array('ok'=> '0' ) );
        exit();
    }

    $sql="Select * from email_list where email='".$email."' ";
    $sqll=mysql_query($sql) or die($sql."<br/><br/>".mysql_error());
    $data=mysql_fetch_array($sqll);
    if($data['email']) {

        echo json_encode( array('ok'=> '1' ) );
        exit();

    }

    $sql="INSERT INTO email_list (first_name,last_name,email) VALUES ('$first_name','$last_name','$email')"; 
mysql_query($sql) or die($sql."<br/><br/>".mysql_error());
    $value = mysql_insert_id() > 0;
    if($value)
    echo json_encode( array('ok'=> '2' ) );
    mysql_close($con);
    exit();
    ?> 
```

# spring - Spring JPA & Hibernate persistence_1_0.xsd not found

> ID：13700533
> 
> 赞同：0
> 
> 时间：2012-12-04T10:14:08.823
> 
> 标签：spring, hibernate, jpa

所以我在 Spring WS 中实现 JPA 和 Hibernate 时遇到了这个问题。
我已经正确配置了所有内容，并且根据教程它应该可以工作 - 但事实并非如此。
问题在于`persistance.xml`，这里是它的样子：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
                http://java.sun.com/xml/ns/persistence/persistance_1_0.xsd"
            version="1.0">

    <persistence-unit name="hibernatePersistenceUnit" transaction-type="RESOURCE_LOCAL">
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="none" />
        </properties>
    </persistence-unit>
</persistence> 
```

我得到的例外是：

```
Caused by: java.io.FileNotFoundException: class path resource [persistence_1_0.xsd] cannot be resolved to URL because it does not exist
    at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:177)
    at org.springframework.orm.jpa.PersistenceUnitReader.validateResource(PersistenceUnitReader.java:281)
    at org.springframework.orm.jpa.PersistenceUnitReader.readPersistenceUnitInfos(PersistenceUnitReader.java:108)
    ... 57 more 
```

我一直在努力解决这个问题......有人知道我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:41:07.800

您需要包含包含 persistence_1_0.xsd 的适当 jar 文件。

这在这里解释。

[xsi:schemaLocation 有什么用？](https://stackoverflow.com/questions/5875021/what-is-the-use-of-xsischemalocation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:46:28.090

.xsd 文件的 url 中有一个类型。尝试使用：http: [//java.sun.com/xml/ns/persistence/persistence_1_0.xsd](http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd)。调试这些类型问题的一个好方法是尝试在浏览器中点击 url，成功的请求表示有效的链接。

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence" 
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
                http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
            version="1.0">

    <persistence-unit name="hibernatePersistenceUnit" transaction-type="RESOURCE_LOCAL">
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="none" />
        </properties>
    </persistence-unit>
</persistence> 
```

您确保您的项目名称不包含任何空格，项目的路径也不应包含任何空格。这会在 Hibernate 实体管理器中产生错误。

# wordpress - 单击wordpress中的日历小部件时如何显示帖子

> ID：13700535
> 
> 赞同：-1
> 
> 时间：2012-12-04T10:14:12.930
> 
> 标签：wordpress, calendar, widget

[http://wordpress.org/support/topic/calendar-widget-how-to-display-posts-from-specific-category-only](http://wordpress.org/support/topic/calendar-widget-how-to-display-posts-from-specific-category-only)

我试过上面的链接。在该链接中，他们没有提供代码详细信息。我想更改编码以链接帖子和日历小部件。如何使用代码更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:41:59.470

也许你可以用插件试试这个。这个说它完全符合您发布的 URL 的目的。

[日历类别](http://wordpress.org/extend/plugins/calendar-category/)

# c++ - 在 C++ 中创建静态全局变量时

> ID：13700538
> 
> 赞同：10
> 
> 时间：2012-12-04T10:14:18.967
> 
> 标签：c++, language-lawyer

我知道全局变量是按同一编译单元的声明顺序创建的，并且未在多个编译单元之间定义创建顺序。

我前段时间读过，全局变量是在调用定义它们的编译单元中的任何代码之前创建的。这是由标准定义的吗？

例子：

文件1.cpp

```
int f1v1 = f1_1();
int f1v2 = f1_2();

void f1(){...}

int f1_1(){...}
int f1_2(){...} 
```

文件2.cpp

```
static int f2v1 = f2_1();
static int f2v2 = f2_2();

int f2_1(){...}
int f2_2(){...} 
```

主文件

```
#include "file1.h"
#include "file2.h"

int main()
{
    f1();

    return 0;
} 
```

在这种情况下，是否由 before和 before`f1_1()`调用的标准保证？由标准保证并且完全被调用，因为没有调用file2.cpp中定义的函数并且在file2.cpp之外不可见？`f1_2()``f1()``f2_1()``f2_2()``f2v1``f2v2`

编辑：

当file1.cpp在lib1中编译，file2.cpp在lib2中编译时，标准规定的行为是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:30:38.870

基于[basic.start.init]：

`f1_1()`保证在之前执行`f1_2()`（第 2 段：“在单个翻译单元中定义的具有有序初始化的变量应按照它们在翻译单元中的定义顺序进行初始化。”）。

两者都保证在之前执行`f1()`（第 4 段：“如果初始化延迟到 main 的第一条语句之后的某个时间点，它应该发生在同一定义的任何函数或变量的第一次 odr-use (3.2) 之前翻译单元作为要初始化的变量。”）。

关于`f2_1()`and `f2_2()`，[basic.stc.static]para.2 说“如果具有静态存储持续时间的变量具有初始化或具有副作用的析构函数，即使它看起来未使用，也不应被消除，......”。这意味着如果它们包含副作用，它们肯定会被调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:31:22.197

如果我理解你的问题是正确的，C++ 保证*在一个编译单元*（即一个 cpp 文件）中按声明顺序初始化变量。跨编译单元的初始化顺序未定义。

在编译过程中，会调用*符合标准*`f2_*`的函数，即使里面的函数没有运行。但是，如果编译器足够聪明，它可以完全忽略它们，如果它确定生成的程序会*像符合标准一样*行事。（即，如果它可以毫无疑问地保证在调用这些函数的程序和不调用这些函数的程序之间的行为没有区别）*`file2.cpp`*

# python - Django：Windows 7 上的 django-admin.py 有什么问题

> ID：13700542
> 
> 赞同：0
> 
> 时间：2012-12-04T10:14:40.687
> 
> 标签：python, django

在 Windows XP 上，我可以打开命令行，`cd`进入目录并键入

```
django-admin.py startproject thesampleproject 
```

但在我的 Windows 7 机器上，我得到的只是下面。发生了什么？我成功安装了 Python 和 Django。

![在此处输入图像描述](../Images/100dd6d6287bd6beb92dd060e6a73c21.png)

```
echo %path% 
```

![在此处输入图像描述](../Images/7bc2e7f007ccc54f668369539b5d6988.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:34:22.317

检查您的`ftype`和`assoc`值是否设置正确：

```
> assoc .py
.py=Python.File
> ftype Python.File
Python.File="c:\Python27\python.exe" "%1" %* 
```

请特别注意 Python.File 行应该以 结束，`"%1" %*`否则您可能会遇到屏幕截图中的情况。如果设置错误，请进行设置：

```
> assoc .py=Python.file
> ftype Python.File="c:\Python27\python.exe" "%1" %* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-07T21:15:33.187

我使用 Windows 7，该命令`django-admin.exe`对我有用，而不是`django-admin.py`希望此信息对可能需要它的人有用....

# c# - 如何在 C# 中向特定朋友发送 Facebook 通知

> ID：13700547
> 
> 赞同：0
> 
> 时间：2012-12-04T10:14:57.247
> 
> 标签：c#, asp.net, .net

我能够在网格中获取我的朋友。现在选择一些我想发送通知的特定朋友。我正在做这样的事情：

```
foreach(GridViewRow gvrow in gvFriends.Rows) 
{
    CheckBox chkdelete = (CheckBox) gvrow.FindControl("chkselect");
    if (chkdelete.Checked) 
    {
        usrid = Convert.ToInt64(gvFriends.DataKeys[gvrow.RowIndex].Value);
        Dictionary < string, string > data = new Dictionary < string, string > ();
        data.Add("link", "http://localhost:51067/FacebookTestApp/FacebookUsers.aspx");
        data.Add("picture", "http://localhost:52591/facebook_notification/Koala.jpg");
        data.Add("caption", "invitation");
        data.Add("name", "App invitation");
        data.Add("message", "you are invited for app");
        FaceBookConnect.Post(ViewState["Code"].ToString(), "me/feed", data);
    }
} 
```

它没有显示任何错误，但是当我的朋友检查他的帐户时，他没有收到任何通知。我想向他们发送通知并单击通知，他们应该重定向到我的 asp 页面....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:53:51.073

如果您使用“ [Facebook Developer Toolkit](http://facebooktoolkit.codeplex.com/) ”，您可以使用*SendNotification*功能。

# iphone - xcode中UIPIckerView顶部的工具栏？

> ID：13700552
> 
> 赞同：6
> 
> 时间：2012-12-04T10:15:26.083
> 
> 标签：iphone, xcode, uipickerview, uitoolbar

我需要`toolbar`在`UIPickerView`. 我不想使用`actionSheet`，因为我希望视图的其余部分处于活动状态。我已经使用了以下代码：

```
- (BOOL)textFieldDidBeginEditing:(UITextField *)textField {
  [txtstate resignFirstResponder];
  pickerView = [[UIPickerView alloc]init] ;
  pickerView.frame=CGRectMake(10, 75, 180,20);
  pickerView.delegate = self;
  pickerView.showsSelectionIndicator = YES;

  UIToolbar* toolbar = [[UIToolbar alloc] init];
  toolbar.frame=CGRectMake(0,75,180,10);
  toolbar.barStyle = UIBarStyleBlackTranslucent;
  UIBarButtonItem *flexibleSpaceLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

  UIBarButtonItem* doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                       style:UIBarButtonItemStyleDone target:self
                                                                      action:@selector(doneClicked:)];

   [toolbar setItems:[NSArray arrayWithObjects:flexibleSpaceLeft, doneButton, nil]];

   textField.inputAccessoryView = toolbar;
   [pickerView addSubview:toolbar];
   [self.view addSubview:pickerView];
} 
```

通过使用上面的代码，我的工具栏被添加了，但它隐藏在下面`UIPickerView`并且被添加到了中间。我怎样才能使工具栏出现在前面（在顶部`UIPickerView`）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-12-30T14:34:13.587

有一种更简单的方法您可以将选择器作为文本字段的 inputView 插入，并将工具栏作为 inputAccessoryView 添加到您的文本字段，例如：

```
textField.inputView = pickerView;
textField.inputAccessoryView = toolBar; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T10:24:25.277

你可以使用这个 getPicker

```
-(void)getValuePicker
{
    ViewForValuePicker = [[UIView alloc]initWithFrame:CGRectMake(0, 219, 320, 266)];

    UIToolbar *toolBar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 44)];
    toolBar.barStyle = UIBarStyleBlackOpaque;

    UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneBtnPressToGetValue)];

    [toolBar setItems:[NSArray arrayWithObject:btn]];
    [ViewForValuePicker addSubview:toolBar];

    valuePicker = [[UIPickerView alloc] initWithFrame:CGRectMake(0, 44, 320, 216)];
    valuePicker.delegate=self;
    valuePicker.dataSource=self;
    valuePicker.showsSelectionIndicator=YES;

    [ViewForValuePicker addSubview:valuePicker];

    [appDelegate.window addSubview:ViewForValuePicker];
} 
```

及其委托方法

```
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    return 1;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component;
{
    return [pickerValueAry count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component;
{
    NSMutableArray *ary = [[NSMutableArray alloc] initWithArray:pickerValueAry];
    id str=[ary objectAtIndex:row];
    return str;
}

- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{    
    NSLog(@"selectedRowInPicker >> %d",row);
} 
```

您可以按照我的回答获取更多[链接](https://stackoverflow.com/questions/13524294/how-to-use-uipickerview-on-second-viewcontroller/13524698#13524698)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T10:29:31.457

只需添加此代码，`viewDidLoad`当 textFieldBegin 只需更改如下所示的框架...

首先在文件中为日期选择器的后视图创建​​全局 UIView，`.h`如下所示..

```
UIView *viewPicker;
UIPickerView * pickerView; 
```

然后像下面这样使用它..

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    viewPicker.frame = CGRectMake(0, 112, 320, viewPicker.frame.size.height);  
    [UIView commitAnimations];
    return YES;
} 
```

添加以下代码...

```
 viewPicker = [[UIView alloc]initWithFrame:CGRectMake(0, 480, 320, 258)];
    UIToolbar* toolbar = [[UIToolbar alloc] init];
    toolbar.frame=CGRectMake(0,0,320,44);
    toolbar.barStyle = UIBarStyleBlackTranslucent;
    UIBarButtonItem *flexibleSpaceLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem* doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                   style:UIBarButtonItemStyleDone target:self
                                                                  action:@selector(doneClicked:)];

    [toolbar setItems:[NSArray arrayWithObjects:flexibleSpaceLeft, doneButton, nil]];
    pickerView = [[UIPickerView alloc]init] ;
    pickerView.frame=CGRectMake(0, 44, 320,216);
    pickerView.delegate = self;
    pickerView.showsSelectionIndicator = YES;

    [viewPicker addSubview:pickerView];
    [viewPicker addSubview:toolbar];
    [self.view addSubview:viewPicker]; 
```

并在完成按钮中单击只是再次设置这样的框架..

```
-(IBAction)doneClicked:(id)sender
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    viewPicker.frame = CGRectMake(0, 370, 320, 258);
    [UIView commitAnimations];
} 
```

我希望这可以帮助你...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:42:32.327

您可以尝试使用以下代码：

```
- (BOOL)textFieldDidBeginEditing:(UITextField *)textField {
    [textField resignFirstResponder];

    UIView *view = [[UIView alloc]initWithFrame:CGRectMake(20, 100, 180, 260)];

    pickerView = [[UIPickerView alloc]init] ;
    pickerView.frame=CGRectMake(0, 44, 180,216);
    pickerView.delegate = self;
    pickerView.showsSelectionIndicator = YES;

    UIToolbar* toolbar = [[UIToolbar alloc] init];
    toolbar.frame=CGRectMake(0,0,180,44);
    toolbar.barStyle = UIBarStyleBlackTranslucent;
    UIBarButtonItem *flexibleSpaceLeft = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];

    UIBarButtonItem* doneButton = [[UIBarButtonItem alloc] initWithTitle:@"Done"
                                                                   style:UIBarButtonItemStyleDone target:self
                                                                  action:@selector(doneClicked:)];

    [toolbar setItems:[NSArray arrayWithObjects:flexibleSpaceLeft, doneButton, nil]];

    textField.inputAccessoryView = toolbar;

    [view addSubview:toolbar];
    [view addSubview:pickerView];
    [self.view addSubview:view];

    return YES;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-08T20:11:30.367

好的...在故事板编辑器上创建一个垂直堆栈视图，在上面添加工具栏和下面的选择器视图怎么样？它们不必真正相互关联，只需要同时显示和隐藏即可。有点像下面这样：

[![等级制度](../Images/b4d5e41d96ffed243016c58a52846bd4.png)](https://i.stack.imgur.com/XTTz9.png)

[![在此处输入图像描述](../Images/cf5dd249b05612e8a22e8ad07d39dfed.png)](https://i.stack.imgur.com/30DIc.png)

这真的很容易做到，你不必做编码魔术。

是的，我知道这个问题已有 7 年历史，但仍有人在寻找这个问题的解决方案。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-04T10:17:54.960

你可以这样设置你的 UIPickerView ： -

```
-(void)showPicker{

    menu = [[UIActionSheet alloc] initWithTitle:@"Select Time"
                                       delegate:self
                              cancelButtonTitle:nil
                         destructiveButtonTitle:nil
                              otherButtonTitles:nil];

    pickerView=[[UIPickerView alloc] init];
    pickerView.frame= CGRectMake(0.0, 44.0, 0.0, 0.0);
    pickerView.delegate=self;
    pickerView.dataSource=self;
    pickerView.showsSelectionIndicator = YES;
    txtopsbox.inputView=pickerView; 

    dateTool = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    dateTool.barStyle=UIBarStyleBlackOpaque;
    [dateTool sizeToFit]; 
    NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(DatePickerDoneClick)];
    [barItems addObject:flexSpace];

    UIBarButtonItem *cancel = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(cancelClicked:)];

    [barItems addObject:cancel];

    [dateTool setItems:barItems animated:YES];
    [menu addSubview:dateTool];
    [menu addSubview:pickerView];
    [menu showInView:self.view];
    [menu setBounds:CGRectMake(0,0,320, 464)];
    [pickerView release];

    } 
```

**更新**

你也可以像另一种方式一样做： -

```
- (IBAction)showPicker
    {
        if(pickerVisible == NO)
        {
            // create the picker and add it to the view
            if(self.datePicker == nil) self.datePicker = [[[UIDatePicker alloc] initWithFrame:CGRectMake(0, 460, 320, 216)] autorelease];
            [self.datePicker setMaximumDate:[NSDate date]];
            [self.datePicker setDatePickerMode:UIDatePickerModeDate];
            [self.datePicker setHidden:NO];
            [self.view addSubview:datePicker];

            // the UIToolbar is referenced 'using self.datePickerToolbar'
            [UIView beginAnimations:@"showDatepicker" context:nil];
            // animate for 0.3 secs.
            [UIView setAnimationDuration:0.3];

            CGRect datepickerToolbarFrame = self.datePickerToolbar.frame;
            datepickerToolbarFrame.origin.y -= (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
            self.datePickerToolbar.frame = datepickerToolbarFrame;

            CGRect datepickerFrame = self.datePicker.frame;
            datepickerFrame.origin.y -= (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
            self.datePicker.frame = datepickerFrame;

            [UIView commitAnimations];
            pickerVisible = YES;
        }
    }

    - (IBAction)done
    {
        if(pickerVisible == YES)
        {
            [UIView beginAnimations:@"hideDatepicker" context:nil];
            [UIView setAnimationDuration:0.3];

            CGRect datepickerToolbarFrame = self.datePickerToolbar.frame;
            datepickerToolbarFrame.origin.y += (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
            self.datePickerToolbar.frame = datepickerToolbarFrame;

            CGRect datepickerFrame = self.datePicker.frame;
            datepickerFrame.origin.y += (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
            self.datePicker.frame = datepickerFrame;
            [UIView commitAnimations];

            // remove the picker after the animation is finished
            [self.datePicker performSelector:@selector(removeFromSuperview) withObject:nil afterDelay:0.3];
        }
    } 
```

# java - 如何在 Lotus Notes 中上传 OLE/2 嵌入对象？

> ID：13700555
> 
> 赞同：0
> 
> 时间：2012-12-04T10:15:36.857
> 
> 标签：java, file-upload, lotus-notes, lotus-domino, ole

根据[此答案](https://stackoverflow.com/a/6223820/399107)中的文档引用，在 Notes 应用程序上上传的文档是 OLE/2 嵌入式对象。是否可以使用 Java API 将文件作为 OLE/2 嵌入对象上传？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:21:44.003

Lotus Notes 以两种方式支持 OLE/2 嵌入对象。

1.  该对象使用 Domino Designer 嵌入到表单中，因此每当使用该表单创建新的 Notes 文档时都会创建一个新的对象实例。在 Java API 中，您可以使用 Document.getEmbeddedObjects() 属性访问现有的 OLE/2 对象，但没有可用的方法来创建新的 OLE/2 对象。

2.  该对象嵌入在 Notes 文档中的富文本字段中（即，由最终用户添加或通过 Notes 客户端在表单属性的启动选项卡上的“在字段中创建对象”选项添加）。在 Java API 中，您可以使用 RichTextItem.getEmbeddedObjects() 属性访问现有的 OLE/2 对象，还可以通过 RichTextItem.embedObject() 方法创建新的 OLE/2 对象——但适当的 OLE 服务器程序可用于您希望嵌入的对象类型必须安装在运行 Java 代码的同一台计算机上。

# iphone - 在 iphone 中监听 tcp 端口

> ID：13700557
> 
> 赞同：1
> 
> 时间：2012-12-04T10:15:49.093
> 
> 标签：iphone, objective-c, ios, ipad, sockets

我需要监听 TCP 端口并从我的 iphone 中的端口收集二进制数据，这是如何做到的。我已经搜索了很多相同但没有找到任何有价值的东西，请帮助我任何链接，或者示例代码非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:19:30.890

您唯一需要做的就是打开一个套接字，您有两个选择：

在纯 C 中创建套接字：C 中的 [套接字](http://www.linuxhowtos.org/C_C++/socket.htm)

或者使用 Apple 提供的类来处理套接字：

[Cocoa 流编程指南简介](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Streams/Streams.html#//apple_ref/doc/uid/10000188-SW1)

如果你要做一些简单的事情，第一个选项是最简单的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:53:17.187

github上有一个非常有用的socket库，叫做GCDAsyncSocket，可以用来制作TCP/UDP的socket，并附带了读写数据的委托方法

[GCDAsyncSocket](https://github.com/robbiehanson/CocoaAsyncSocket)

# java - JPA Query.getResultList() - 以通用方式使用

> ID：13700565
> 
> 赞同：34
> 
> 时间：2012-12-04T10:16:07.083
> 
> 标签：java, hibernate, jpa

我正在创建一个包含多个表的复杂查询，并且需要列出结果。通常，我使用`EntityManager`并将结果映射到 JPA 表示：

```
UserEntity user = em.find(UserEntity.class, "5"); 
```

然后我可以访问用户`UserEntity`类定义的所有值。但是如何访问从本机多表查询返回的字段值？我得到的是一个对象列表。到目前为止这很好，但是那个对象是什么“是”？大批？地图？收藏？...

```
//simpleExample
Query query = em.createNativeQuery("SELECT u.name,s.something FROM user u, someTable s WHERE s.user_id = u.id");
List list = query.getResultList();

//do sth. with the list, for example access "something" for every result row. 
```

我想答案很简单，但大多数例子只是展示了直接转换为 targetClass 时的用法。

PS：在示例中，我当然可以使用类映射。但在我的情况下`someTable`，它不是由 JPA 管理的，因此我没有实体，也没有它的类表示，而且由于我加入了 20 个表，我不想创建所有类只是为了访问这些值。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-04T10:37:55.287

一般规则如下：

*   如果`select`包含单个表达式并且它是一个实体，那么结果就是那个实体
*   如果`select`包含单个表达式并且它是一个原语，那么结果就是那个原语
*   如果`select`包含多个表达式，则结果`Object[]`包含相应的原语/实体

所以，在你的情况下`list`是一个`List<Object[]>`.

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2014-01-25T18:39:43.843

`TypedQuery`由于可以使用JPA 2.0 a ：

```
TypedQuery<SimpleEntity> q = 
        em.createQuery("select t from SimpleEntity t", SimpleEntity.class);

List<SimpleEntity> listOfSimpleEntities = q.getResultList();
for (SimpleEntity entity : listOfSimpleEntities) {
    // do something useful with entity;
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-05T21:45:26.220

如果您需要一种更方便的方法来访问结果，可以将任意复杂的 SQL 查询的结果转换为 Java 类，并且非常简单：

```
Query query = em.createNativeQuery("select 42 as age, 'Bob' as name from dual", 
        MyTest.class);
MyTest myTest = (MyTest) query.getResultList().get(0);
assertEquals("Bob", myTest.name); 
```

该类需要声明为@Entity，这意味着您必须确保它具有唯一的@Id。

```
@Entity
class MyTest {
    @Id String name;
    int age;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-12-04T10:33:03.100

上面的查询返回 Object[] 的列表。因此，如果您想从列表中获取 u.name 和 s.something，那么您需要迭代并为相应的类转换这些值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-24T15:07:35.790

这是对我有用的示例。我认为实体类中需要 put 方法将 sql 列映射到 java 类属性。

```
 //simpleExample
    Query query = em.createNativeQuery(
"SELECT u.name,s.something FROM user u,  someTable s WHERE s.user_id = u.id", 
NameSomething.class);
    List list = (List<NameSomething.class>) query.getResultList(); 
```

实体类：

```
 @Entity
    public class NameSomething {

        @Id
        private String name;

        private String something;

        // getters/setters

        /**
         * Generic put method to map JPA native Query to this object.
         *
         * @param column
         * @param value
         */
        public void put(Object column, Object value) {
            if (((String) column).equals("name")) {
                setName(String) value);
            } else if (((String) column).equals("something")) {
                setSomething((String) value);
            }
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-19T00:41:00.083

我有同样的问题，我发现一个简单的解决方案是：

```
List<Object[]> results = query.getResultList();
for (Object[] result: results) {
    SomeClass something = (SomeClass)result[1];
    something.doSomething;
} 
```

我知道这绝对不是最优雅的解决方案，也不是最佳实践，但它确实有效，至少对我而言。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-26T22:28:10.323

如果您创建一个具有所有必需属性的 bean 并使用 Java 8+ 流转换结果会怎样？

像这样：

```
public class Something {

    private String name;
    private String something;

    // getters and setters
} 
```

进而：

```
import javax.persistence.Query;

...

Query query = em.createNativeQuery("SELECT u.name,s.something FROM user u, someTable s WHERE s.user_id = u.id", Something.class);
List<?> list = query.getResultList();

return list
         .stream()
         .map(item -> item instanceof Something ? (Something) item : null)
         .collect(Collectors.toList()); 
```

这样，您无需返回`List<Object[]>`或隐藏警告`@SuppressWarnings("unchecked")`

附言：

1 - 我知道这篇文章很老了。但是...我在 2021 年在这里，所以其他人也会来这里 =)

2 - 这是错误的还是不好的做法？让我知道 :D

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-18T22:59:16.323

您还可以将您的休眠更新到高于 5.4.30.final 的版本

# android - WebView 适用于 android 2.3.3，在 4.0.1 上显示空白页

> ID：13700567
> 
> 赞同：3
> 
> 时间：2012-12-04T10:16:12.043
> 
> 标签：android, android-webview

我不认为这是重复的，但[这个问题](https://stackoverflow.com/questions/2568063/android-webview-shows-a-blank-page)可能是相关的。

正如标题：这在 android 2.3.3 上完美运行，在 4.0.1 上随机显示一个空白页面。它通常首先工作，然后开始显示空白页，直到重新安装应用程序。

我用来显示一个简单（仅限 html）网页的代码如下：

```
@Override
public void afterTextChanged(final Editable arg0){
    final String result = getResult();
    final String base64 = encode(result);
    //This is the WebView
    results.loadData(base64, "text/html; charset=utf-8", "base64");
}

private String encode(final String value){
    try{
        final byte[] bytes = value.getBytes("UTF-8");
        final String base64 = Base64.encodeToString(bytes,
                              android.util.Base64.DEFAULT);
        return base64;
    }
    catch(UnsupportedEncodingException e){
        return "YOULOOZE";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:20:09.257

检查您的 HTML 格式是否正确。我不确定它验证的 Doctype。

这发生在我身上，因为我使用

```
<script ... /> 
```

代替

```
<script ...></script> 
```

任何微小的错误都会让你的 webview 静默失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T06:14:24.203

我不确定这是您的解决方案，但可以提供帮助。自 Android 4.0 WebKit 更新到版本 534.30。我注意到在某些网页上，在完成加载后，WebView 将其内容重定向到一个新页面，该页面显示以下内容：“网页不可用文件：///android_asset/webkit/ 处的网页可能暂时关闭或它可能已永久移至新网址”。这是新版本 WebKit 的错误，在我的情况下，资产文件夹中的 javascript 不能离线工作。

# cpu - 12MB 16 路 L3 高速缓存中的标识集和 64B 高速缓存行

> ID：13700569
> 
> 赞同：1
> 
> 时间：2012-12-04T10:16:19.353
> 
> 标签：cpu, cpu-cache

组数为 (12 * 2^20) / (16 * 2^6) = 3 * 2^12。由于集合的数量不是 2 的幂，物理地址如何映射到集合？

# sql-server - 在 SQL Server 上插入许多记录之前禁用索引是一种好习惯吗？

> ID：13700575
> 
> 赞同：1
> 
> 时间：2012-12-04T10:16:28.737
> 
> 标签：sql-server, database

阅读有关数据库效率的内容时，我已经说过表索引会为插入/更新/删除操作带来额外的成本。

在处理单个记录时这不是问题，但在隐含许多记录时可能会出现问题。

我有几个应用程序，我在其中使用 SQL Server 作为 DBMS，并添加了导入操作，允许用户在一次操作中将多条记录加载到业务模型中，而不必为每条记录手动填写表格。

现在我的问题是：在执行导入操作之前在 SQL Server 中禁用表索引是一种好习惯吗？这是否取决于操作中涉及的记录数或数据量？我必须注意与此做法相关的任何辅助问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:37:23.630

这取决于

*   您需要导入多少行，
*   您需要多久导入一次，
*   导入需要多长时间，以及
*   有多少其他人受到影响。

当您删除索引时，您会为所有人删除它们。因此，在您重建它们之前，针对受​​影响表的每个查询都将在没有索引的情况下运行。

当您导入数百万行时，删除索引会产生很大的不同。但是如果它影响到其他用户，我不会删除索引，直到非常清楚没有其他实用的方法可以完成导入。您可以通过以下方式避免影响其他用户

*   一次导入更少的行（更多事务），
*   首先导入临时表，或
*   在非工作时间排队导入。

# java - 无法在 JavaFX TableView 单元格值上显示工具提示

> ID：13700580
> 
> 赞同：5
> 
> 时间：2012-12-04T10:16:43.250
> 
> 标签：java, javafx-2

在我`JavaFX` `TableView`的一个`TableColumn`上，我将 Cell Factory 设置为渲染`ProgressBar`，而对于其他`TableColumn`的，我将 Cell Factory 设置为 show `ToolTip`。就像下图一样。第二列显示进度条，其他 3 列渲染以显示工具提示，其中包含要显示的简单字符串值。

![在此处输入图像描述](../Images/a837c91f3bf8c2a365f9fb5d1994f3bb.png)

我遇到了`TableView`未在表中显示/显示更新值的问题，即 UI 未验证/刷新/绘制`TableView`元素。如果我单击对`ColumnHeader`任何列进行排序，那么只有我可以看到`TableView`更新。手动对表格列进行排序以刷新表格内容没有意义，因此我搜索并找到了显示/隐藏表格列以更新表格视图的解决方案。

为了解决这个问题，我在下面编写了一个代码来解决`TableView`更新/刷新问题，但由于这个代码现在`ToolTip`不可见。

**在每个特定时间间隔后更新表视图的代码**

```
 class TableProgressBarUpdator implements Runnable {

        TableView table;

        public TableProgressBarUpdator(TableView fxtable) {
            table = fxtable;

        }

        public void start() {
            new Thread(this).start();
        }

        public void run() {

            while (keepUpdating) {
                try {
                    updateProgressbar();
                    Thread.sleep(1000);
                } catch (Exception e) {
                    LogHandler.doErrorLogging("Error while updating tables cell", e);
                }
            }
            LogHandler.doDebugLogging("Table process repainting is completed.");
        }

        private void updateProgressbar() throws Exception {
            Platform.runLater(new Runnable() {
                @Override
                public void run() {
                    ((TableColumn) table.getColumns().get(0)).setVisible(false);
                    ((TableColumn) table.getColumns().get(0)).setVisible(true);
                }
            });

        }
    } 
```

**开始更新表视图**

```
public void startUpdatingTableProgress() {
    keepUpdating = true;
    TableProgressBarUpdator tpu = new TableProgressBarUpdator(table);
    tpu.start();
} 
```

**停止更新表视图**

```
public void stopUpdatingTableProgress() {
        keepUpdating = false;
    } 
```

**添加更多显示渲染类的代码以显示进度条和显示工具提示。**

**显示进度条表视图的代码。**

```
public static class ProgressBarTableCell<S, T> extends TableCell<S, T> {

        private final ProgressBar progressBar;
        private ObservableValue<T> ov;

        public ProgressBarTableCell() {
            this.progressBar = new ProgressBar();
            progressBar.setPrefHeight(23);
            setAlignment(Pos.CENTER);
        }

        @Override
        public void updateItem(T item, boolean empty) {
            super.updateItem(item, empty);
            if (item == null) {
                setGraphic(null);
                setText(null);
            } else {
                if (item.toString().equalsIgnoreCase("Processing")) {
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {

                            if (getGraphic() == null) {
                                setGraphic(progressBar);
                                progressBar.setProgress(-1);
                            } else {
                                ProgressBar objpProgressBar = (ProgressBar) getGraphic();
                                objpProgressBar.setProgress(-1);
                            }
                            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                        }
                    });
                } else {
                    Platform.runLater(new Runnable() {
                        @Override
                        public void run() {
                            if (getGraphic() == null) {
                                setGraphic(progressBar);
                                progressBar.setProgress(0);
                            } else {
                                ProgressBar objpProgressBar = (ProgressBar) getGraphic();
                                objpProgressBar.setProgress(0);
                            }
                            setContentDisplay(ContentDisplay.GRAPHIC_ONLY);
                        }
                    });
                }
            }
        }
    } 
```

**显示工具提示的代码**

```
public class ToolTip extends TableCell {

        @Override
        protected void updateItem(Object object, boolean selected) {
            if (object == null) {
                setGraphic(null);
                setText(null);
            }else{
                setText(object.toString());
                setTooltip(new Tooltip(object.toString()));
            }
        }
    } 
```

**问题 -**

**如果我从 TableProgressBarUpdator 类中注释掉这两行，那么我可以看到第一列、第三列和第四列中每个单元格值的工具提示，但是现在表视图内容没有更新/刷新，当我取消注释这些行时，我是看不到工具提示。**

```
((TableColumn) table.getColumns().get(0)).setVisible(false);
((TableColumn) table.getColumns().get(0)).setVisible(true); 
```

总之，由于这两行，我的工具提示渲染不起作用，如果我删除这两行，则表视图内容不会刷新/更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T07:25:47.943

您无需`TableView`手动更新。您的班级可能有与此相关的问题`TableView's column`。

您必须创建如下所示的类：

```
public static class Test{

private StringProperty name;

private Test() {
   name = new SimpleStringProperty();
}

public Test(String name) {
    this.name = new SimpleStringProperty(name);
}

public void setName(String name) {
    this.name.set(name);
}

public String getName() {
    return name.get();
}

public StringProperty nameProperty() {
    return name;
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T23:03:54.193

您确定需要在 ProgressBarTableCell 中调用 Platform.runLater() 吗？我希望它已经在应用程序线程中。这可能会导致进度条更新被放置在应用程序线程中队列的末尾，在计划的表更新之后。

您的 TableCell 的值是否包含在 ObservableProperty 中（看起来您应该有一个 SimpleStringProperty）？如果你这样做了，表应该认识到它需要刷新，并且你不应该求助于切换列可见性作为强制表刷新的黑客手段。

# php - 按 sql DESC 顺序计数

> ID：13700581
> 
> 赞同：1
> 
> 时间：2012-12-04T10:16:43.917
> 
> 标签：php, mysql

我有这个代码来计算一个主题的回复数，

```
$sql = mysql_query("SELECT count(*) FROM ".prefix."REPLY WHERE TOPIC_ID = '$t' AND R_AUTHOR = '$m' ".$Open_SQL." ") or die(mysql_error());
    $Count = mysql_result($sql, 0, "count(*)");
    if ($Count > 0) {
        $Count = $Count;
    }
    else {
        $Count = "";
    }
return($Count);
mysql_free_result($sql);
} 
```

它显示结果很好，我需要在 DESC 中订购此结果。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:36:59.530

您只是在选择`Count(*)`这意味着没有要排序的内容，因为您将准确获得一个数据行，其中包含`count`.

您可能想要做的是添加 -`GROUP BY`子句并选择不同的 Stuff 并按计数排序：

```
table
user | type
1      apple
2      apple
3      cherry 
```

使用这样的表，您可以按类型分组，然后对樱桃/苹果计数进行排序。

`SELECT count(*) AS c, type FROM table GROUP BY type ORDER by c DESC/ASC`

结果：

```
c | type
2   apple
1   cherry 
```

但没有`GROUP BY`它只会返回总数：`3`- 当然不可能排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:31:02.060

你可能想做这样的事情

```
SELECT some-field, count(*) as count 
FROM your-table
WHERE your-clauses
AND more-clauses
GROUP BY some-field
ORDER BY some-field desc 
```

# magento - Magento：点击添加到购物车打开订单。提交表单重定向以添加到购物车页面后

> ID：13700583
> 
> 赞同：0
> 
> 时间：2012-12-04T10:16:46.630
> 
> 标签：magento

我正在开发一个 magento 网站。单击“添加到购物车”按钮后，客户需要什么处方表将被打开。

填写处方表后，它重定向到添加到购物车页面。用户添加的购物车页面产品列表处方应与产品一起显示。

谁能指导我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:35:42.713

1) 使用打开的 javascript 弹出窗口切换 addtocart url。

2）使用ajax做addtocart。

3）在弹出窗口中显示表格

4) 填写后执行 ajax post 到控制器，将项目保存到引用项 (setData)。

5) 成功后重定向到购物车

6) 使用 getData 在渲染器中显示自定义数据。

我想这个流程会让你朝着正确的方向前进？

# android - 弹出软键盘时，Gridview 的子项顺序发生变化

> ID：13700588
> 
> 赞同：0
> 
> 时间：2012-12-04T10:16:54.027
> 
> 标签：android, gridview

我的活动包含一个 textview 并且在它之下它有 gridview 元素。**阶段 1：**活动开始时，它会按照我设置的顺序调整元素（如 item1、item2、..）[stage1 图片](http://imgur.com/eab97)。**第 2 阶段：**但是当我单击 edittext 时，gridview 元素会被调整为为软键盘[stage2 图片](http://imgur.com/KLwVL)分配空间。**第 3 阶段：**所以当我按下后退按钮时，软键盘消失（像往常一样），但 gridview 元素的顺序正在改变[stage3 图片](http://imgur.com/HRBFc)。gridview 子项的顺序发生变化。**谁能建议我如何避免订单中的这种不确定性？**下面是我的整个代码和 xml 文件，尽管我认为这些对于解决这个问题并不是那么必要。

```
public class PresentActivity extends Activity {

GridView gridView;

    static final String[] TEXT = new String[] { 
        "item1", "item2","item3", "item4", "item5","item6","item7","item8" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        setGridView();        
    }

    public void setGridView()
    {
        gridView = (GridView)findViewById(R.id.gridView1);

        gridView.setAdapter(new ImageAdapter(this, TEXT));

        gridView.setNumColumns(3);

        gridView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View v,
                    int position, long id) {

                String currentText=(String) ((TextView)v.findViewById(R.id.grid_item_label)).getText();

    Toast.makeText(getApplicationContext(), currentText, Toast.LENGTH_SHORT).show();

            }
        });  

    }

} 
```

这是我的自定义适配器类。

```
public class ImageAdapter extends BaseAdapter{

    private Context context;
    private final String[] textValues;

    public ImageAdapter(Context context, String[] textValues) {
        this.context = context;
        this.textValues = textValues;
    }

    @Override
    public int getCount() {

        return textValues.length;
    }

    @Override
    public Object getItem(int arg0) {

        return null;
    }

    @Override
    public long getItemId(int position) {

        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View gridView;

        if (convertView == null) {

            gridView = new View(context);

            // get layout from imagewithtext.xml
            gridView = inflater.inflate(R.layout.imagewithtext, null);

            // set value into textview
            TextView textView = (TextView) gridView
                    .findViewById(R.id.grid_item_label);
            textView.setText(textValues[position]);

            // set image based on selected text
            ImageView imageView = (ImageView) gridView
                    .findViewById(R.id.grid_item_image);

            String extractedText = textValues[position];

            System.out.println("the position value is>>>>>>"+position);

            if (extractedText.equals("item1")) {
                imageView.setImageResource(R.drawable.icon);
            }
            else if (extractedText.equals("item2")) {
                imageView.setImageResource(R.drawable.icon);
            } else if (extractedText.equals("item3")) {
                imageView.setImageResource(R.drawable.icon);
            }else if(extractedText.equals("item4")){
                imageView.setImageResource(R.drawable.icon);
            } else if (extractedText.equals("item5")) {
                imageView.setImageResource(R.drawable.icon);
            } else if (extractedText.equals("item6")) {
                imageView.setImageResource(R.drawable.pic1);
            }
            else if(extractedText.equals("item7")){
                imageView.setImageResource(R.drawable.pic1);
            }
            else{
                imageView.setImageResource(R.drawable.pic1);
            }

        } else {
            gridView = (View) convertView;
        }

        return gridView;    

    }

} 
```

包含gridview的xml文件：

```
<LinearLayout
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   android:orientation="vertical">

<RelativeLayout
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

     <Button 
        android:id="@+id/button1"
        android:layout_width="200px"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:text="@string/button"
        android:onClick="button1"
        />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_alignParentRight="true"
        android:text="@string/present_location"
      />

</RelativeLayout>

<EditText 
    android:id="@+id/editText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:hint="@string/editText1_hint"
    />

<GridView
    android:id="@+id/gridView1"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:gravity="center"
    android:columnWidth="100dp"
    android:stretchMode="columnWidth"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

</GridView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:28:54.687

假设您的项目仅包含 1 个 ImageView 和 1 个 TextView（为简单起见）。

您在适配器中的 getView 方法应该这样做：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder vh;
    if (convertView == null) {
        final LayoutInflater inflater = LayoutInflater.from(getContext());
        convertView = inflater.inflate(R.layout.imagewithtext,null);
        //Custom ViewHolder, you have to create it in the same class.
        vh = new ViewHolder();
        vh.imageView = convertView.findViewById(R.id.imageView1);
        vh.textView = convertView.findViewById(R.id.textView1);
        convertView.setTag(vh);
    } else {
        vh = (ViewHolder) convertView.getTag();
    }
    vh.imageView.setImageResource(R.drawable.whatever);
    vh.textView.setText("Whatever text you want to set here");
    return gridView;    
} 
```

在您的适配器中，只需添加以下内容：

```
private class ViewHolder{

    public ViewHolder(){}

    public ImageView imageView;
    public TextView textView;
    //Add any views you want to use in getView here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:22:09.443

GridViewActivity:-(这是主要活动)

```
public class GridVieweActivity extends Activity {

  GridView gridView;

  static final String[] TEXT = new String[] { "item1", "item2", "item3",
      "item4", "item5", "item6", "item7", "item8" };

  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    setGridView();
  }

  public void setGridView() {
    gridView = (GridView) findViewById(R.id.gridView1);

    gridView.setAdapter(new ImageAdapter(this, TEXT));

    gridView.setNumColumns(3);

    gridView.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View v,
          int position, long id) {

        String currentText = (String) ((TextView) v
            .findViewById(R.id.textView1)).getText();

        Toast.makeText(getApplicationContext(), currentText,
            Toast.LENGTH_SHORT).show();

      }
    });

  }

} 
```

图像适配器：-

```
public class ImageAdapter extends BaseAdapter {

  private Context context;
  private final String[] textValues;

  public ImageAdapter(Context context, String[] textValues) {
    this.context = context;
    this.textValues = textValues;
  }

  @Override
  public int getCount() {

    return textValues.length;
  }

  @Override
  public Object getItem(int arg0) {

    return null;
  }

  @Override
  public long getItemId(int position) {

    return 0;
  }

  @Override
  public View getView(int position, View convertView, ViewGroup parent) {

    LayoutInflater inflater = (LayoutInflater) context
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View gridView;

    if (convertView == null) {

      gridView = new View(context);

      // get layout from imagewithtext.xml
      gridView = inflater.inflate(R.layout.imagewithtext, null);

      // set value into textview
      TextView textView = (TextView) gridView
          .findViewById(R.id.textView1);
      textView.setText(textValues[position]);

      // set image based on selected text
      ImageView imageView = (ImageView) gridView
          .findViewById(R.id.imageView1);

      String extractedText = textValues[position];

      System.out.println("the position value is>>>>>>" + position);

      if (extractedText.equals("item1")) {
        imageView.setImageResource(R.drawable.ic_launcher);
      } else if (extractedText.equals("item2")) {
        imageView.setImageResource(R.drawable.ic_launcher);
      } else if (extractedText.equals("item3")) {
        imageView.setImageResource(R.drawable.ic_launcher);
      } else if (extractedText.equals("item4")) {
        imageView.setImageResource(R.drawable.ic_launcher);
      } else if (extractedText.equals("item5")) {
        imageView.setImageResource(R.drawable.ic_launcher);
      } else if (extractedText.equals("item6")) {
        imageView.setImageResource(R.drawable.ic_launcher);
      } else if (extractedText.equals("item7")) {
        imageView.setImageResource(R.drawable.ic_launcher);
      } else {
        imageView.setImageResource(R.drawable.ic_launcher);
      }

    } else {
      gridView = (View) convertView;
    }

    return gridView;

  }

} 
```

main.xml:-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <RelativeLayout
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <Button
            android:id="@+id/button1"
            android:layout_width="200px"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:onClick="button1"
            android:text="Button" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="Present Location" />
    </RelativeLayout>

    <EditText
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Hint" />

    <GridView
        android:id="@+id/gridView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:columnWidth="100dp"
        android:gravity="center"
        android:horizontalSpacing="10dp"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"
        android:verticalSpacing="10dp" >
    </GridView>

</LinearLayout> 
```

带文字的图片：-

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="64dp"
        android:layout_height="64dp"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" >
    </ImageView>

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/imageView1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="2dp"
        android:ellipsize="marquee"
        android:text="TextView"
        android:textSize="18sp" >
    </TextView>

</RelativeLayout> 
```

上面的代码工作正常。

# magento - Magento - 在模板文件中加载一个小部件实例

> ID：13700596
> 
> 赞同：0
> 
> 时间：2012-12-04T10:17:11.177
> 
> 标签：magento

我创建了一个自定义小部件，我想在 phtml 模板文件中加载它的一个实例。

如何通过“Widget ID”或“Widget Instance Title”加载我的 Widget？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:46:01.757

您也可以在模板文件中以编程方式调用它，如下所示：

```
Mage::app()->getLayout()->createBlock(‘catalog/product_widget_new’, null, array(‘products_count’=>5, ‘template’=>’catalog/product/widget/new/content/new_list.phtml’))->toHtml(); 
```

当然，您需要用自己的变量替换变量。

# listview - 通过 JSON Ajax 调用填充的 JQuerymobile Listview

> ID：13700598
> 
> 赞同：3
> 
> 时间：2012-12-04T10:17:17.383
> 
> 标签：listview, jquery-mobile, jsonp

我正在尝试使用 json 结果填充列表视图。我已经安装了提琴手，并且可以承认我确实得到了 json 结果。我积极验证了 JSON 结果。但是不知何故，它们没有出现在列表视图中。我似乎无法找出哪里出了问题。

JSON 结果：[{"Id":1,"Title":"Electrical"},{"Id":2,"Title":"Piping"},{"Id":3,"Title":"Mechanical" },{"Id":4,"Title":"软件"}]

代码：

```
<!DOCTYPE html>
<head>
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script src="http://ajax.microsoft.com/ajax/jquery.templates/beta1/jquery.tmpl.js"></script>
    <style>
    .count {
        position: absolute;
        font-size: 11px;
        font-weight: bold;
        padding: .2em .5em;
        top: 50%;
        margin-top: -1em;
    }

    .ui-li-aside {
        float: right;
        width: 50%;
        text-align: right;
        margin: 1.4em 0px 0px 0px !important;
        position: absolute;
        right: 25px; 
    }

    .ui-li-heading, .ui-li-desc {
        width: 90%;
        text-overflow: ellipsis;
    }

    strong { font-style: normal; }
    </style>

    <script type="text/javascript" >
        var hackerNews = (function($,undefined) {
            var pub = {}, $this = $(this);
            pub.init = function() {
                $("#btnRefresh").live("click", function () {
                    pub.getAndDisplayNews();
                });
                $this.bind("news.updated", function (e, news) {
                    displayNews(news);
                });
                $this.bind("news.updated", function(e, news) {
                    $("#itemCount").text(news.items.length);
                });
            };
            pub.getAndDisplayNews = function() {
                //$.mobile.loading();
                getNews(function () {
                    //$.mobile.loading();
                });
            };
            function getNews(callback) {
                $.ajax({
                    url: "http://localhost:31634/expertREST.svc/GetKnowledgeFields",
                    dataType: "jsonp",
                    success: function (data, textStatus, xhr) {
                        $this.trigger("news.updated", data);
                        if (callback) callback(data);
                    }
                });
            }
            function displayNews(news) {
                var newsList = $("#hackerNews").find(".newsList");
                newsList.empty();
                $("#newsItem").tmpl(news.items).appendTo(newsList).trigger("create");
                newsList.listview("refresh");
            }
            return pub;
        }(jQuery));
        hackerNews.init();
        hackerNews.getAndDisplayNews();
        </script>
</head>

<body>

<div data-role="page" id="hackerNews">
    <div data-role="header" data-backbtn="false">
        <a id="btnRefresh" href="#" data-icon="refresh">Refresh</a>
        <h1>Find-an-Expert &nbsp;<span id="itemCount" class="count ui-btn-up-c ui-btn-corner-all">0</span></h1>
    </div>
    <div id="content" data-role="content">
        <ol class="newsList" data-role="listview"></ol>
    </div>
</div>

<script id="newsItem" type="text/x-jquery-tmpl">
    <li data-messageId="${Id}" class="newsItem">
        <h3>${Title}</h3>
    </li>
</script>

</body> 
```

有人有线索吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T00:45:00.733

我发现在定义`type`设置时会得到更好的结果。例子：

```
$.ajax({
    url: "http://localhost:31634/expertREST.svc/GetKnowledgeFields",
    type: 'GET',
    dataType: "jsonp",
    success: function (data, textStatus, xhr) {
        $this.trigger("news.updated", data);
        if (callback) callback(data);
    }
 }); 
```

我还建议设置`async`为 false，但我发现这不受以下支持`jsonp`：

> 跨域请求和 dataType: "jsonp" 请求不支持同步操作。

编辑：`error`不能使用，这不是很有帮助。

> 注意：跨域脚本和 JSONP 请求不调用此处理程序。这是一个[Ajax 事件](http://docs.jquery.com/Ajax_Events)。

不知道如何进一步解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T01:05:02.170

JSONP 通过将响应附加到 DOM 来工作。在 JSONP 调用期间，JQuery 会自动在 GET 调用中添加“回调”参数。然后，您的服务必须返回使用回调函数包装的结果，格式为：

```
callback(<jsondata>) 
```

这是一个简单的 PHP 示例（在 prod 中，添加回调名称验证）：

> ```
> // .. prepare result
> 
> $callback = $_GET['callback'];
> echo $callback.'('. json_encode($result).  ');'; ?> 
> ```

此外，您对“绑定”的使用也是错误的，因为将“数据”传递给它只会将第一条记录提供给“displayNews”。通过直接调用函数来简化它：

> ```
> success: function (news, textStatus, xhr) {
>       displayNews(news);
>       $("#itemCount").text(news.length);
>       if (callback) callback(news);
> } 
> ```

最后，更改您的 displayNews 以遍历列表：

```
 function displayNews(news) {
        var newsList = $("#hackerNews").find(".newsList");
        newsList.empty();
        $.each(news, function(k,v) {
         $("#newsItem").tmpl(v).appendTo(newsList).trigger("create");
    });
    newsList.listview("refresh");
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T08:51:07.000

嗯，谢谢你的反馈。我注意到 ajax 调用甚至没有到达成功事件，所以这让我想如果我回来的 json 没有任何问题。也许我也忘了提到我的服务是 WCF 服务 .NET4。谷歌搜索并猜猜是什么。我必须在我的 web.config 中添加***crossDomainScriptAccessEnabled="true"***选项：

```
<bindings>
  <webHttpBinding>
    <binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" />
  </webHttpBinding>
</bindings> 
```

显然，这是 WCF 使用 jsonp 所需要的。

[我在以下链接](http://bendewey.wordpress.com/2009/11/24/using-jsonp-with-wcf-and-jquery/)上找到了解释

谢谢。

# asp.net-mvc - 如何在每个操作中使用异步为 MVC4 中的 _Layout 设置 ViewBag

> ID：13700600
> 
> 赞同：1
> 
> 时间：2012-12-04T10:17:18.307
> 
> 标签：asp.net-mvc, asp.net-mvc-4, async-await

用例很简单。登录用户的信息显示在 _Layout.cshtml 中。每次都需要刷新该信息。

我找到了两种方法来做到这一点

*   拥有`BaseController`and 在其`OnActionExecuting`方法集中`ViewBag.UserInfo = ...;`，稍后在 _Layout.cshtml 中使用
*   在`_Layout.cshtml`做`@{Html.RenderAction("GlobalUserInfo", "UserInfo");}`

问题是，如果从异步方法返回 UserInfo，这两种方法会因死锁或异常而惨遭失败`public async Task<UserInfo>GetUserInfo(){...}`。

所以问题是这样的：当使用 async/await 检索数据时，如何在每个操作上设置 ViewBag 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:46:02.037

MVC 不是很`async`友好，尤其是过滤器。

您可以编写自己的`RenderAsyncAction`扩展方法或在所有`async`操作中复制代码。

或者，您可以尝试一些 hack。我在我的博客上描述了[为什么`Result`在 ASP.NET 中使用会死锁](http://nitoprograms.blogspot.com/2012/07/dont-block-on-async-code.html)，但有一个解决方法：`ConfigureAwait(false)`在*每个* `await`in 中使用`GetUserInfo`。

然后你可以定义一个同步包装器：

```
public UserInfo GetUserInfoBlocking()
{
  return GetUserInfo().Result;
} 
```

您应该能够使用`GetUserInfoBlocking`in`OnActionExecuting`或`RenderAction`。

请注意副作用：

*   这种方法每个请求使用*多个线程，因此这会**降低*可伸缩性。纯`async`方法每个线程使用多个请求，因此它*提高*了可伸缩性。
*   任何异常`GetUserInfo`都将包含在 中`AggregateException`，因此请确保您的日志记录将捕获`InnerException`详细信息，否则您将在日志中得到无意义的错误。

绝对最好`async`一直向下使用而不是像这样阻塞。但有时 MVC 并没有给你留下选择的余地（希望这在未来会有所改变）。

# jquery - jQuery - 代码看起来正确但不起作用

> ID：13700604
> 
> 赞同：0
> 
> 时间：2012-12-04T10:17:35.540
> 
> 标签：jquery

在我的正常职业生涯中仍然在学习这门语言，当我有机会整理简单的例子时。这是一个待办事项列表，用户在其中输入一项杂务并单击按钮提交要在下面显示的条目。然而，下面的代码，尽管它看起来（对我来说）是正确的，但它不会像预期的那样......

### HTML（在 Body 标签之间）

```
<div id="toDoContainer">
    <h1>To Do</h1>
    <p>Here's your very own to do list, complete with added jQuery</p>
    <form id="toDo">
        <input type="text" name"toDoEntry" />
        <button id="addButton">Add</button>
    </form>

    <div id="toDoList"></div>

    <p>Tick a box next to your entry show as complete</p>
</div> 
```

### 查询：

```
$(document).ready(function(){
    $('button').click(function() {
        var toDoItem = $('input[name=toDoEntry]').val();
        if(toDoItem.length === 0) {
            alert('You need to add an entry into the toDo list');
        } else {
            $('#toDoList').append(toDoItem);
        }
    });
}); 
```

关于我哪里出错的任何想法？

西蒙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:20:46.770

您有一个简单的 HTML 语法错误。

改变：

```
 <input type="text" name"toDoEntry" /> 
```

至：

```
 <input type="text" name="toDoEntry" /> 
```

* * *

同时删除您的`<form>`标签。这将使您远离页面的当前实例。

有关 HTML 表单的更多信息，请阅读这篇有用的博客文章：

[http://webdesign.about.com/od/forms/ss/html-forms-tutorial.htm](http://webdesign.about.com/od/forms/ss/html-forms-tutorial.htm)

* * *

我还建议拆分您的“待办事项”，否则它们将相互连接。

例如，如果您添加“任务 1”和“任务 2”，这将成为“任务 1Task2”。我建议将它们放在一个`<ul>`列表中：

```
$(document).ready(function(){
    $('button').click(function() {
        var toDoItem = $('input[name=toDoEntry]').val();
        if(toDoItem.length === 0) {
            alert('You need to add an entry into the toDo list');
        } else {
            var $li = $("<li/>");
            $li.append(toDoItem);
            $('#toDoList').append($li);
        }
    });
});​ 
```

* * *

[**-- 查看工作演示 --**](http://jsfiddle.net/QMTkp/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T10:19:50.733

写

```
 <input type="text" name="toDoEntry" /> 
```

反而

```
<input type="text" name"toDoEntry" /> 
```

你忘记了“=”

# javascript - coffee -cj 覆盖每个类的 module.exports

> ID：13700614
> 
> 赞同：0
> 
> 时间：2012-12-04T10:18:09.783
> 
> 标签：javascript, coffeescript, commonjs

我只是无法理解它应该如何工作：据我了解，在 CoffeeScript 中定义类/模块的一种非常常见的方法是`module.exports = class MyClass`在文件顶部使用。我也猜想咖啡编译器会促进这种模式。举这个极简主义的例子：

```
# src/Foo.coffee
module.exports = class Foo

# src/Bar.coffee
module.exports = class Bar 
```

然后编译并加入两者：

```
coffee -cj all.js src 
```

结果是 all.js，其中 module.exports 为每个模块重新定义/覆盖：

```
// Generated by CoffeeScript 1.4.0
(function() {
  var Bar, Foo;

  module.exports = Bar = (function() {
    function Bar() {}
    return Bar;
  })();

  module.exports = Foo = (function() {
    function Foo() {}
    return Foo;
  })();

}).call(this); 
```

如果我现在尝试这样做，结果将是一个错误，指出找不到 Foo 模块，这是正确的，因为最后一个模块（此处：Bar）已将 module.exports 重新定义为仅包含它自己。

```
Foo = require('foo'); 
```

我想这是一个相当菜鸟的问题，但我似乎无法在任何地方得到一个好的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T07:04:54.263

这几乎是理想的行为……您将两个模块合并为一个，并且它们都希望处于顶级，因此其中一个必须获胜。

一种可能的解决方案如下：

```
# src/Foo.coffee
module.exports.Foo = class Foo

# src/Bar.coffee
module.exports.Bar = class Bar 
```

产生：

```
# all.js
(function() {
  var Bar, Foo;

  module.exports.Bar = Bar = (function() {
    function Bar() {}
    return Bar;
  })();

  module.exports.Foo = Foo = (function() {
    function Foo() {}
    return Foo;
  })();

}).call(this); 
```

然后你可以使用（在 CoffeeScript 中）

```
{Foo, Bar} = require "all" 
```

获取其中包含的类

# javascript - 在两个字符串之间使用 OR `||`

> ID：13700617
> 
> 赞同：1
> 
> 时间：2012-12-04T10:18:17.430
> 
> 标签：javascript, jquery

我想在两个字符串之间使用 or `or`，但它对我不起作用，我该怎么办？

**演示：http:** [//jsfiddle.net/NP8E3/](http://jsfiddle.net/NP8E3/)

```
<input type="checkbox" id="DA">
<input type="checkbox" id="DE">

$('#DA'+ OR +'#DE').live('click', function () {
    alert('ok');
})​ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T10:19:14.713

您必须改用逗号：`$('#DA, #DE')`. 这是[多选择器](http://api.jquery.com/multiple-selector/)语法。

也就是说，`.live()`已弃用，您应该[`.on()`](http://api.jquery.com/on/)在第一时间考虑切换到委托形式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:19:34.127

您可以`comma`在选择器中使用：

```
$('#DA, #DE').live('click', function () {
    alert('ok');
}) 
```

# python - 蟒蛇 | 盖伊 | 在发送管理员邮件之前查找电子邮件大小？

> ID：13700621
> 
> 赞同：1
> 
> 时间：2012-12-04T10:18:34.610
> 
> 标签：python, google-app-engine

管理员邮件的大小限制为 16kb，在将其发送给管理员之前，是否有办法在 python gae 中确定电子邮件大小？我想发送多封电子邮件，而不是超过 1 封。

其他选择是尝试发送邮件并跟踪异常以及异常中断电子邮件，但预处理会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:27:01.127

```
sys.getsizeof(object[, default]) 
```

[获取大小](http://docs.python.org/2/library/sys.html#sys.getsizeof)

我没有在 gae 中使用过邮件，但大概您可以获得要发送的内容的大小，将其添加到空邮件的大小上，这可能会起作用。

# algorithm - 快速轴对齐单元遍历算法

> ID：13700625
> 
> 赞同：4
> 
> 时间：2012-12-04T10:18:46.413
> 
> 标签：algorithm, language-agnostic, geometry, aabb

*   给定一个轴对齐的正方形，分为四个大小相等的单元格 A、B、C 和 D。
*   给定一条从点 s1 到点 s2 的线段。

找到按遍历顺序排序的段（如果有）遍历的单元格的最快方法是什么？

![细胞草图](../Images/0027e87a72085e67a22d025f7acd91cc.png)

在上面的例子中，正确的结果是：

*   第 1 段：[D]
*   第 2 段：[A，B]
*   第 3 段：[C、D、B]
*   第 4 段：[]
*   第 5 段：[C]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T13:38:51.697

你可以试试Amanatides 和 Woo[的“A Fast Voxel Traversal Algorithm for Ray Tracing”](http://www.cse.yorku.ca/~amana/research/grid.pdf)。

它旨在处理大网格，但该原理对您的应用程序也很有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T21:07:57.213

仅使用简单的线相交公式即可完成以下操作：

观察您的网格由 6 个线段组成（3 个水平，3 个垂直）。如果您要将这些线段中的每一个都无限延伸（使它们成为线，没有起点或终点），那么您已经将 2D 空间划分为 16 个区域。

定义一个 4x4 的区域数组。对于每个这样的区域，存储哪条线（如果有）在北侧、东侧等划分它。这将是我们的遍历数据结构。

现在，要找到给定查询段 S 遍历的单元格，从 u 开始到 v 结束，我们将使用此遍历数据结构从 u 到 v 进行直线遍历，以跟踪我们当前所在的区域我们正在离开该区域的哪些位置。

*   确定Au为u所在的区域，Av为v所在的区域。由于这些区域的轴对齐特性，每个区域的比较不应超过 4 次（x 坐标上 2 次，y 轴上 2 次）。
    另外，定义当前位置为p，当前区域为A；最初，它们分别是 u 和 Au。

*   首先，将 A 报告为 S 穿过的区域。确定线段* (p, v] 与 A 的 4 条边中每一边的分界线之间的第一个交点。如果找到这样的交点 q，则包含 q 的边决定了哪个相邻区域将成为我们的新 A - 在这种情况下，我们的新 p 将是交点 q。使用这个新的 A 和 p，重复此步骤。
    如果没有找到交点，p 必须位于与 v 相同的区域，步行已完成。

* *(p, v] 含义：p和v之间的段，不包括p但包括v。*

# android - 如何在android的edittext框中显示数字键盘？

> ID：13700628
> 
> 赞同：0
> 
> 时间：2012-12-04T10:18:50.327
> 
> 标签：android

我只想在 EditText 中编写整数类型，但是当我单击 EditText 时，它会打开普通键盘，但是在执行此操作时我只需要一个带数字的键盘（全部在对话框中）。

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:21:01.343

将此添加到您的`edittext`xml

```
android:inputType="number" 
```

有关更多信息，请参阅[此](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)

**编辑：** 用于以编程方式设置

```
yourEdittext.setInputType(InputType.TYPE_CLASS_NUMBER); 
```

# excel - EXCEL：由于名称差异很小，将 SUMIFS 与多个 VLOOKUP 组合

> ID：13700629
> 
> 赞同：0
> 
> 时间：2012-12-04T10:18:52.390
> 
> 标签：excel, vlookup, sumifs

好的，这将是一个很难问的问题，但我会试一试。

我在一个工作表（工作表）中有三张工作表（Sheet1、Sheet2、Sheet3）。

**Sheet1**包含 ~100,000 行，其中包含*Company (A)*、*Holding (B)*、*Product (C)*、*Year (D)*、*Spend (E)*列。
**Sheet2**包含 100 行，其中包含*Company (A)*、*Holding (B)*、*Product Spend in certain Year (C)*列。
**Sheet3**包含 100 行，其中包含*Company (A)*、*ID (B)*、 Variant1 *(C)*、*Variant2 (D)*、*Variant3 (E) 列*。

我想要的是在**Sheet2**中计算*Product Spend in certain Year*。通过使用函数*SUMIFS*，我已经能够在**Sheet1**中将其作为测试。所以在**Sheet1中**我使用了：

 ***```
=SUMIFS(E:E,A:A,"Fake Ltd",B:B,"Fake Holding",C:C,"Dog Food",D:D,"2011") 
```

问题是所有工作表中的公司名称都不相同。我试图通过[FuzzyFind](https://stackoverflow.com/questions/13291313/matching-similar-but-not-exact-text-strings-in-excel-vba-projects)解决它，但这还不够完美。所以我决定改变我的方法，这就是**Sheet3**存在的原因。此表在一行中包含一家公司的所有不同名称变体（类似于关系数据库）。

现在我需要在**Sheet2中使用此***SUMIFS*函数，其中公司名称与**Sheet3**中所有可能的其他公司名称相关，因此它可以将出现在**Sheet1**中的公司名称相加，就好像它是一个公司名称一样。**Sheet3**中的*Company*列是“选择”的公司名称，也是**Sheet2**中使用的名称。是**Sheet1**给出了问题。

 *******所以不知何故，我需要在**Sheet2中将***SUMIFS*与*VLOOKUP*结合起来，但我不确定如何。任何人有任何线索？我会尽力改进我的问题，我可以想象如果我没有做最好的解释工作。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:12:02.733

除非 Sheet1 是只读的，否则只需向 Sheet1 添加另一列，您可以在其中从 Sheet3 中查找正确的公司名称。然后根据此列在 Sheet2 中构建您的 SUMIFS。

如果您使用的是 Excel 2010/13，请考虑安装[Powerpivot](http://www.microsoft.com/en-us/bi/powerpivot.aspx)作为替代方案。在这里，您只需通过 Company name 列将 Sheet1 中的表与 Sheet3 中的表链接 - 然后生成一个数据透视表，为您提供所需的所有聚合！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:08:48.337

我认为您所追求的是 excel 的数组功能。

[http://office.microsoft.com/en-au/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx](http://office.microsoft.com/en-au/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx)

对于工作表 C，我建议重复模式：公司、变体

这样，您可以交叉引用任何和所有在 C 中匹配的公司，而无需尝试与偏移量 1、2、3 ... n 进行比较

然后，您可以组合结果并使用它来匹配多个条件：

[http://blog.contextures.com/archives/2012/07/12/check-multiple-criteria-with-excel-index-and-match/](http://blog.contextures.com/archives/2012/07/12/check-multiple-criteria-with-excel-index-and-match/)

（标准本质上是与公司名称和年份匹配的所有行的联合）。

一旦你得到了匹配的行数组，你就可以在顶部应用你的 sumif。************

# shell - 在shell中转换为大写

> ID：13700632
> 
> 赞同：10
> 
> 时间：2012-12-04T10:19:03.953
> 
> 标签：shell, awk, uppercase

我正在从键盘读取一个字符并将其转换为大写，然后再次显示该字符。但这显示错误。我怎样才能做到这一点。

我的代码：-

```
read a;
a=echo $a | tr 'a-z' 'A-Z'
echo $a 
```

我也试过这个： -

```
read option;
eval $(awk -v option=$option '{print "a="toupper(option);}')
echo $a 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-12-04T10:22:52.123

如果您想存储`a`back in的结果`a`，那么您可以使用*命令替换*：

```
read a;
a=$(echo $a | tr 'a-z' 'A-Z')
echo $a 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-04T10:46:09.073

这可以通过以下方式本地完成`bash`：

```
read a;
a="${a^^}"
echo "$a" 
```

无需调用其他命令，例如`tr`，因为`bash`可以自己执行此操作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-12-20T08:51:58.077

AWK 是在完全支持 Unicode 的情况下转换大写/小写的正确方法；-)

```
echo "öäüßè" | awk 'BEGIN { getline; print toupper($0) }' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-04T10:25:35.370

使用命令替换：

```
a=`echo $a | tr 'a-z' 'A-Z'` 
```

注意 echo 和 tr 周围的记号``。`

 `* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T12:29:57.753

`awk`是错误的方式去这里，但这是可以做到的一种方式：

```
a=$(awk 'BEGIN { getline; print toupper($0) }')
echo $a 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-08T04:08:49.647

无法获取

```
a=`echo $a | tr 'a-z' 'A-Z'` 
```

工作，但是

```
a=`echo $a | tr '[a-z]' '[A-Z]'` 
```

做了（注意额外的正则表达式 [] 括号。
在 /usr/bin/sh 脚本中，这与

```
...
while getopts ":l:c:" option; do  
   case "$option"  
   in  
      l) L_OPT=`echo ${OPTARG}| tr '[a-z]' '[A-Z]'`  
         ;;  
      c) C_OPT=`echo ${OPTARG} | tr '[a-z]' [A-Z]'`  
         ;;  
      \?)  
         echo $USAGE  
         exit 1  
         ;;  
   esac  
done  
... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-20T12:57:45.487

使用 bash 脚本

```
printf "Type your Message Here: " read message

echo Upper Case: $message | tr [:lower:] [:upper:];
echo Lower Case: $message | tr [:upper:] [:lower:] 
````

# security - Wifi 管理器如何加密配置文件 (WinCE)

> ID：13700633
> 
> 赞同：1
> 
> 时间：2012-12-04T10:19:06.870
> 
> 标签：security, wifi, windows-ce, truststore, password-storage

您好我正在尝试开发一个小型 Wifi 管理器，我有一个问题：

我需要在将配置文件保存在磁盘中时对其进行加密，并在加载时对其进行解密。

我将使用密码短语来做到这一点，那么如何存储我的密码短语： - 如果我将它存储在一个文件中，它很容易转储 - 如果我对其进行硬编码，它将在我的二进制文件中的某处可见 -我是windowsce下的，不知道有没有安全存储可以保存数据？- 我知道在 Linux 下，我们可以拥有信任库，并且通过调整一些权限，只有“root”才能访问它，这对我来说已经足够了，有没有可能在 WinCE 下做类似的事情？

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T20:50:23.170

Microsoft 的无线零配置将 WiFi 密钥存储在 eapol.h 中定义的注册表项中。`[HKLM]\Comm\EAPOL\Config`

该字符串使用带有标志的[CryptProtectData](http://msdn.microsoft.com/en-us/library/aa922939.aspx)进行加密。`CRYPTPROTECT_SYSTEM`

# c# - 筛选 IEnumerable

> ID：13700635
> 
> 赞同：7
> 
> 时间：2012-12-04T10:19:14.217
> 
> 标签：c#, filtering

我有 3 个具有以下属性的类：

优惠清单类：

```
Guid Id
IEnumerable<Offer> Offers 
```

优惠等级：

```
Guid Id
Product Product
bool IsSealed 
```

产品类别：

```
Guid Id 
```

一个 OfferList 包含多个 Offer，一个 Offer 有确切的 1 个产品。

如何过滤 OfferList 以仅包含未密封的 Offer？

```
OfferList offerList = this.GetOfferList(id).Offers.Where(o => !o.IsSealed)); 
```

这将返回类型为 Offer 的 IEnumerable，而不是过滤 OfferList。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T10:25:27.583

有趣 - 你在这里问的内容有点令人困惑。

我*想*你是在问如何`Offers`就地过滤。如果是这样的话：

`IEnumerable<T>`是不可变的（您必须转换为具体的*或*`List<T>`类似的以获得可变性），并且`Offers`是`IEnumerable<T>`- 所以您不能期望`Offers.Where(o => !o.IsSealed));`更改属性 - 它返回一个可枚举的，在您枚举它时过滤源。*`Offers`*

 *相反，你会做

```
var offerList = this.GetOfferList(id)
offerList.Offers = offerList.Offers.Where(o => !o.IsSealed)); 
```

但是请注意，这隐藏了共享该实例`Offers`的任何其他代码的原始引用。`OfferList`在您开始枚举之前，它实际上也不会进行任何过滤。但这通常更可取。如果您希望它在那里完成，然后 - 使用`.ToArray()`or`.ToList()`在结尾处`Where`强制完成枚举。

更好的方法是在`OfferList`类上有一个属性或方法，它可以按需返回一个新的可枚举：

```
public IEnumerable<Offer> UnsealedOffers {
  get {
    return Offers.Where(o => !o.IsSealed);
  }
} 
```

这样你就不会破坏主可枚举。

请注意，此代码容易为`Offers`null (a `NullReferenceException`) *，并且*返回 null 可枚举（而不是返回空的枚举）并不是很好 - 所以如果有`Offers`可能为 null - 那么要么阻止这种情况发生；或使用：

```
return (Offers ?? Enumerable.Empty<Offer>()).Where(o => !o.IsSealed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:23:18.987

如果您的意思是要更新原始`OfferList`实例，则可以将过滤后的序列分配给其`Offers`字段：

```
OfferList offerList = this.GetOfferList(id);
offerList.Offers = offerList.Offers.Where(o => !o.IsSealed); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:28:32.970

您需要一份新的未密封报价清单吗？

```
List<Offer> offers = this.GetOfferList(id).Offers
                         .Where(o => !o.IsSealed)
                         .ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:22:37.690

你需要设置`Offers`你的`OfferList`班级。您不能直接转换为 ，`OfferList`因为它不是 a`List`或未实现`IEnumerable`。

`OfferList list = new OfferList() { Offers = this.GetOfferList(id).Offers.Where(o => !o.IsSealed)) };`*

# c# - iTextSharp pdf合并假脱机问题

> ID：13700645
> 
> 赞同：0
> 
> 时间：2012-12-04T10:19:36.723
> 
> 标签：c#, pdf, merge, itextsharp

我有一个程序需要几个 pdf（甚至 1000+）并将它们合并到一个 pdf 中。

该程序运行良好，但我遇到了假脱机错误。

如果我用 Acrobat 打开合并的 pdf 并打印它，而不是向打印机发送一个包含 n 页的假脱机，它会发送与原始 pdf 数量一样多的假脱机，导致打印机处理它的速度非常慢。

这是该类的摘要

```
Document document = new Document ( iTextSharp.text.PageSize.A4 );
PdfWriter writer = PdfWriter.GetInstance ( document, new FileStream ( outputFilename, FileMode.Create ) );
writer.SetFullCompression();            
document.Open();
PdfContentByte cb = writer.DirectContent;

foreach( var file in files ) {
PdfReader reader = new PdfReader ( file );
int n = reader.NumberOfPages;
int i = 0;
while ( i < n) 
{
    i++;
    document.SetPageSize ( reader.GetPageSizeWithRotation ( i ) );                
    document.NewPage();
    page = writer.GetImportedPage ( reader, i );
    rotation = reader.GetPageRotation ( i );        
    cb.AddTemplate ( page, 1f, 0, 0, 1f, 0, 0 );
}
}

document.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:31:36.957

请下载iText in Action - Second Edition[第 6 章。](http://www.manning.com/lowagie2/samplechapter6.pdf)您会发现您使用了错误的类来连接 PDF。我一遍又一遍地重复这一点，我真的很想知道是什么让你使用`PdfWriter`而不是`Pdf(Smart)Copy`连接 PDF。您是否在网站的某处找到了该代码示例？如果是这样，请让我知道，以便我们可以一起打那个页面的作者！

如果您使用代码示例，则将页面作为 XObjects 导入。这增加了嵌套级别，可能会导致麻烦，因为嵌套级别有限制。此外，当您逐页添加时`PdfWriter`，您的 PDF 可能会包含过多的冗余信息：您的文件可能会膨胀。这可以通过使用来避免`PdfSmartCopy`。

最后（书中没有提到的东西）：您应该在从对象`FreeReader()`复制所有页面后使用该方法。`PdfReader`这将显着加快您的代码速度，并减少所需的内存。

我意识到以上都没有解释为什么不同的线轴被发送到打印机，但是让我们先从代码中明显的缺陷开始，然后从那里开始。

# sql-server - SQL Server 使用所有者帐户执行视图

> ID：13700660
> 
> 赞同：0
> 
> 时间：2012-12-04T10:20:03.127
> 
> 标签：sql-server

我想将数据从受限表推送到 Excel。

我已经创建了一个视图并从表中提取数据，现在一个 Excel 帐户已被授予访问该视图的权限，但仍然无法获取数据。

这里最好的选择是什么，

*   `owner access option`，如果可能的话在 SQL Server 中（使视图作为 dbo 运行，即使是从 Excel 用户调用时） - 可能是反安全性

*   存储过程？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T08:41:27.713

存储过程带我一路回家。

# search - 如何停止所有搜索引擎，机器人抓取一些网址

> ID：13700663
> 
> 赞同：3
> 
> 时间：2012-12-04T10:20:09.587
> 
> 标签：search, search-engine, bots, search-engine-bots

我想计算广告点击小部件。

我在 robots.txt 文件中使用过：

```
User-agent: *
Allow: /
Disallow: */ads_count/* 
```

我还添加`nofollow`了该小部件中的所有链接。

但是许多机器人仍然遵循该小部件中的网址。我有客户端 ip 来计算 url，我有很多 IP 表单机器人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:43:43.990

您是否尝试在 */ads_count 之前删除 (*)？正如 SEO 的谷歌文档所说，如果你想阻止所有的机器人，就像你做的那样：

```
User-agent: * // (to whom? (*) means all bots!
Disallow: /ads_count 
```

> 请注意，指令区分大小写。例如， Disallow: /junk_file.asp 会阻止[http://www.example.com/junk_file.asp](http://www.example.com/junk_file.asp)，但会允许[http://www.example.com/Junk_file.asp](http://www.example.com/Junk_file.asp)。Googlebot 将忽略 robots.txt 中的空格（尤其是空行）和未知指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T14:45:27.457

`Allow`并且通配符不是原始 robots.txt 规范的一部分，因此并非所有 robots.txt 解析器都会知道/注意这些规则`*`。`Disallow`

如果你想屏蔽所有以 开头的页面`/ads_count/`，你只需要：

```
User-agent: *
Disallow: /ads_count/ 
```

但是：并非所有机器人都尊重 robots.txt。因此，您仍然会受到忽略 robots.txt 的恶意机器人的攻击。

# php - 使用 PHP 字符串 + 结果返回未知等号？

> ID：13700664
> 
> 赞同：0
> 
> 时间：2012-12-04T10:20:10.393
> 
> 标签：php, string, strpos

我有一个字符串变量，命名`$message`如下：

```
 * Time Stamp: 2012-12-03 16:36:04 
        * Speed: 7 km/h 
        * Heading: 356 deg (N) 
        * Event ID: -48 
        * Event Desc: .Arrived at Inbound Receiving 
        * Event Value: -56
        * Event Value Type: 0 
```

然后我尝试使用以下代码从变量中提取事件和时间戳值：

```
$event = null;
$lines = explode(PHP_EOL, $message);
foreach($lines as $line) {
  // skip empty lines
  if(strlen($line) == 0) {
    continue;
  }
  $tokens = explode(':', $line);
  // tokens[0] contains the key , e.g. Event Value
  // tokens[1]~[N] contains the value (where N is the number of pieces), e.g. -56
  // stitch token 1 ~ N
  $key = $tokens[0]; 
  unset($tokens[0]);
  $val = implode(': ', $tokens);
  // do your extra logic here, e.g. set $event variable to value
  if(strpos($key, 'Event Desc') > -1) {
    $event = $val;
  }
   if(strpos($key, 'Time Stamp') > -1) {
   $time = $val;
  }
} 
```

这很好用，唯一的问题是返回的值是：

```
.Arrived at Arrived at Inbound Receiving =

2012-12-03 16:36:04  = 
```

等号从何而来，如何将其与尾随空格一起删除？

我的预期结果是：

```
.Arrived at Arrived at Inbound Receiving 
```

和

```
2012-12-03 16:36:04 
```

这就是它在字符串变量中的显示方式。一如既往地感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:34:17.350

你可以试试

```
preg_match_all("/ ([a-z ]+):([a-z0-9:\-. ]+)/i", $string,$match);
$values = array_combine($match[1], $match[2]) ;

echo $values['Time Stamp'] ,PHP_EOL ;
echo $values['Speed'] ,PHP_EOL ;
echo $values['Heading'] ,PHP_EOL ;
echo $values['Event Desc'] ,PHP_EOL ;
// .... etc 
```

输出

```
 2012-12-03 16:36:04 
 7 km
 356 deg 
 .Arrived at Inbound Receiving 
```

[在线演示](http://eval.in/4255)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:26:23.390

这将为您提供适当的密钥和价值。

```
list($key, $value) = explode(':', $line, 2);
$key = trim($key);
$value = trim(quoted_printable_decode($value)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:26:23.263

我的猜测是您正在`$message`从电子邮件中获取内容。如果是这种情况，请先尝试通过[quoted_printable_decode](http://php.net/manual/en/function.quoted-printable-decode.php)运行内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:24:31.353

如果你使用

```
echo $time;
echo $event; 
```

它将显示 2012-12-03 16:36:04 .Arrived at Inbound Receiving only

# iphone - UITabBarController，任何可能的方式来移动下一个视图控制器与水平滑动？

> ID：13700669
> 
> 赞同：1
> 
> 时间：2012-12-04T10:20:21.687
> 
> 标签：iphone, objective-c, ios, ios4

我是 iOS 新手。不确定是否有可能带来以下逻辑。

```
1\. UITabBarController has three UIViewController.
2\. While Swipping horizontally in the second UIViewController, i want to move
   to the third UIViewController. 
```

可能吗？。如果是这样，请建议如何实现相同的目标。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:25:35.103

在第二个 ViewController 中，在 ViewDidLoad 中添加以下行

```
UISwipeGestureRecognizer *swipeRecognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(gotoNextPage:)];
[self.view addGestureRecognizer:swipeRecognizer];
[swipeRecognizer release]; 
```

并添加方法

```
-(void)gotoNextPage:(id)sender {
    [self.tabBarController setSelectedViewController:thirdViewController];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:28:15.170

您可以使用我正在执行的 Touch Delegate Method 弹出到上一个视图

```
-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    UITouch *touch = [touches anyObject];

    CGPoint startPosoition = [touch previousLocationInView:self.view];

    CGPoint endPosition = [touch locationInView:self.view];

    if (endPosition.x - startPosoition.x > 20)
    {
        [self.navigationController popViewControllerAnimated:YES];
    } else
    {
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:29:17.587

是的，这是可以做到的。对于 1\. 我假设您知道如何使用视图控制器设置基于标签栏的应用程序。对于 2\. 在您的第二个视图控制器的视图和手势处理程序中实现滑动手势识别器：`[self.yourTabBarController setSelectedIndex:2];`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T10:30:27.713

使用此代码；

```
UISwipeGestureRecognizer *swipeGestureNextPage = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(loadPreviousPageClicked)];
 swipeGestureNextPage.direction = UISwipeGestureRecognizerDirectionRight;
 [self.view addGestureRecognizer:swipeGestureNextPage];

-(void)loadPreviousPageClicked
{

//use navigation controller here accordingly

} 
```

而已。

# python - 夹层中的多种语言问题

> ID：13700671
> 
> 赞同：4
> 
> 时间：2012-12-04T10:20:22.000
> 
> 标签：python, django, translation, multiple-languages, mezzanine

我在夹层中使用**多种语言**，它与自己的*核心模板*一起工作正常。但我尝试在我*自己的模板*中使用它然后它**不工作**。

我已经按照正确的步骤使用了所有东西。我有*locale*文件夹，其中*django.po*包含我可以翻译的所有文本以及编码的*django.mo*文件。

当我选择其他英语朗时购买。在我的浏览器中，它不会翻译我的模板文本，而是更改核心模板的文本。

我不知道为什么它不翻译我的模板数据*因为如果有任何类型的错误，那么它一定不能翻译核心模板，但它确实如此。*

请帮我解决我的问题，任何建议将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-08T06:47:16.503

您的 .po 文件是否包含“模糊”一词？如果是这样，您可能想阅读以下文章：[http](http://blog.e-shell.org/124) ://blog.e-shell.org/124 ，正如之前的 SO 问题中所述：[Django 缺少某些字符串的翻译。知道为什么吗？](https://stackoverflow.com/questions/463714/django-missing-translation-of-some-strings-any-idea-why?rq=1)

如果这不是您的问题的原因，您确定您正确使用了国际化模板标签吗？

首先，确保您在每个模板的顶部加载了相关的模板标签：

```
{% load i18n %} 
```

然后，对于您想要翻译的任何文本：

```
{% trans "Insert your text here" %} 
```

另请参阅：[https](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-template-code) ://docs.djangoproject.com/en/dev/topics/i18n/translation/#internationalization-in-template-code和[https://docs.djangoproject.com/en/dev/topics/i18n/翻译/#implementation-notes](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#implementation-notes)。

# android - 在 Android 2.3 与 Android 4.0 中接收短信

> ID：13700672
> 
> 赞同：0
> 
> 时间：2012-12-04T10:20:24.760
> 
> 标签：android

我编写了一个 SMS 应用程序来使用在线提供的各种示例接收 SMS。我在 Android 2.3 设备上对其进行了测试，它运行良好。

现在，我将 API 级别更改为 Android 4.0 并尝试在 Android 4.0 设备上运行它，但没有任何反应。我在 Eclipse 中检查了 logcat，那里也没有显示任何内容。

知道需要做什么才能使其工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:34:18.270

> 再次检查您实际上是**在 Activity 中创建和注册广播接收器，**否则它将不会被调用，因为**在 Android 3.1 之后它需要应用程序处于启动状态才能接收广播**。

# xml - 您可以在 XML Schema 属性名称中使用模式吗？

> ID：13700677
> 
> 赞同：2
> 
> 时间：2012-12-04T10:20:42.257
> 
> 标签：xml, schema

这是一个 XML 示例：

```
<Search ID="Blah"
        input="Some search"
        line1="first line of result"
        line2="second line of result"
        line3="third line of result"
        /> 
```

名为 line1 到 line3 的属性是可选的且未绑定 - 给定的搜索元素可以具有一直到 line99 或其他内容的行属性（实际上从不高于 2 位）。有没有办法在 XML 模式中指定可接受的属性名称模式，以便我可以验证这一点，而无需手动指定所有可选属性名称，直到我实际使用的任何属性名称？

理想情况下，我想要以下内容：

```
<xs:attribute name="line[0-9][0-9]" type="xs:string" use="optional" /> 
```

在架构定义中。

我怀疑这是不可能的，但我所做的所有搜索都试图确定最终找到在属性的实际值上使用模式的方法，而不是它们的名称，所以如果有人可以请确认这是否可能与否，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:46:18.433

不，那是不可能的。如果您阅读关于[属性声明](http://www.w3.org/TR/xmlschema11-1/#cAttribute_Declarations)的 XML 规范，您会注意到属性名称的类型为[NCName](http://www.w3.org/TR/2012/REC-xmlschema11-2-20120405/datatypes.html#NCName)，其中不包括`[`and`]`字符。

另一方面，使用属性来传达查询结果是一种非常奇怪的用法。一种更自然的格式是

```
<search id="..." input="...">
    <result>
       <line nr="1">bla bla</line>
       <line nr="2">more bla bla</line>
       ...
       <line nr="99">extra bla</line>
    </result>
</search> 
```

# javascript - Onload 函数在 IE 中导致错误

> ID：13700690
> 
> 赞同：1
> 
> 时间：2012-12-04T10:21:09.613
> 
> 标签：javascript, html, internet-explorer

我的 onload 函数在 IE 中导致以下错误。

0x800a138f - Microsoft JScript 运行时错误：属性“initialize”的值为 null 或未定义，而不是 Function 对象。

Javascript

```
<head>
    <script type="text/javascript">

        function initialize() {
            // Create a style map using pre-define map_style script
            //var styledMap = new google.maps.StyledMapType(styles,{name: "Styled Map"});

            "use strict";
            jsonData = locations;
            var latLng;
            var marker;
            var mapOptions = { zoom: 6, center: new google.maps.LatLng(54.40977114, -3.22742939), mapTypeId: google.maps.MapTypeId.TERRAIN };

            map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

            directionsDisplay.setMap(map);

            directionsDisplay.setPanel(document.getElementById("directionsPanel"));

            for (i = 0; i < jsonData.length; i += 1) {
                latLng = new google.maps.LatLng(jsonData[i].lat, jsonData[i].lng);

                // Create marker for office and put it on map
                marker = new google.maps.Marker({
                    position: latLng,
                    map: map,
                    title: jsonData[i].title
                });
            }
        }

        function attachInstructionText(marker, text) {
            "use strict";
            google.maps.event.addListener(marker, 'click', function () {
                stepDisplay.setContent(text);
                stepDisplay.open(map, marker);
            });
        }
    </script>  
    <script src="https://www.google.com/jsapi"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=xxxxxxxxxxxxxxxxxxxxxxxxx&sensor=true"></script>    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>   
</head>

<body onload="initialize()">
          ......
</body> 
```

# jquery - 如何使用 jQuery 从 JSON 中获取唯一结果？

> ID：13700694
> 
> 赞同：0
> 
> 时间：2012-12-04T10:21:21.187
> 
> 标签：jquery, json

> **可能重复：**
> [使用 jQuery 从 JSON 数组中获取唯一结果](https://stackoverflow.com/questions/6680430/get-unique-results-from-json-array-using-jquery)

我为运动创建了 JSON，看起来像

```
 [
    {
        "sportName": "Men's Basketball",
        "path": "mbasket",
        "sportID": 7,
        "parentSportName": "Basketball"
    },
    {
        "sportName": "Women's BasketBall",
        "path": "wcc",
        "sportID": 8,
        "parentSportName": "Basketball"
    },
    {
        "sportName": "Women's Cross Country",
        "path": "wbasket",
        "sportID": 9,
        "parentSportName": "Cross Country"
    },
    {
        "sportName": "Men's Cross Country",
        "path": "mcc",
        "sportID": 10,
        "parentSportName": "Cross Country"
    }
] 
```

我想使用 jQuery 获取唯一的 parentSportName，但我想知道我的 JSON 结构是否正确或者我需要做一些修改。我需要在创建嵌套列表时重新获取值，并且我的 SLOC 正在增加。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-04T10:34:01.610

这可能会为您做到：

```
var myobj;
try{
myobj=[{"sportName":"Men's Basketball","path":"mbasket","sportID":7,"parentSportName":"Basketball"},{"sportName":"Women's BasketBall","path":"wcc","sportID":8,"parentSportName":"Basketball"}];
}

if (myobj==undefined){
//json data has problem.
} 
```

# c#-4.0 - 当 int res=num1 & num2 其中 num1 和 num2 是整数类型时 & 如何工作

> ID：13700695
> 
> 赞同：1
> 
> 时间：2012-12-04T10:21:40.863
> 
> 标签：c#-4.0

什么`&`时候工作

```
int num1=10,num2=9;
int res=num1 & num2; // where num1 and num2 are integers 
```

`res=8;`它是如何工作的价值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T10:23:35.287

是`&`按位与运算符。*只有在 num1和*num2中都设置了相应的位时，结果中的每个位才会被设置。

如果你用二进制写数字可能更有意义：

```
num1           1010 = 10
num2           1001 =  9
------------------------
num1 & num2    1000 =  8 
```

# iphone - 检查文本的近似匹配

> ID：13700697
> 
> 赞同：0
> 
> 时间：2012-12-04T10:21:43.907
> 
> 标签：iphone, ios, string, ipad, sqlite

我正在研究 Sqlite，并添加了一些问题和答案数据。我在文本字段中匹配该数据。当我输入正确答案时，它工作正常，但是大约正确的答案呢？我不知道该怎么做。

示例：如果我输入 CORRECT，那么如果它匹配，它就可以正常工作。但...

如果我输入 CORRET，那么它必须显示“答案大致正确”

如何解决这个问题？谁能帮我。我正在匹配来自 Sqlite 的数据。

感谢和问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:07:04.377

下面这个 sqlite 命令可以帮助你。

```
[NSString stringWithFormat:"select username from tblData where name is %%@%",name]; 
```

此命令将带入您的所有数据，例如，如果您输入“正确”，则需要 1correct、2correct、anycorrect、correctany。

如果没有的话，试试 %%;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:52:09.157

使用此代码从 coredata 中获取数据，并与文本字段数据进行比较；

```
AppDelegate *appDelegate =  (AppDelegate*)[[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"MileageTrack" inManagedObjectContext:context]; //Where MileageTrack is my coredata entity
    [fetchRequest setEntity:entity];

    NSMutableArray *array = [[NSMutableArray alloc] init];
    int i=0;

    NSError *error;

    NSArray *objects = [context executeFetchRequest:fetchRequest error:&error];

    for (MileageTrack *info1 in objects) {

        NSMutableDictionary *dict1 = [[NSMutableDictionary alloc] init];
        [dict1 setObject:info1.tripusage forKey:@"answer"];
if([[dict1 objectForKey:@"answer"] isEqualToString:textfield.text])
{
NSLog(@"correct answer");

}
else
{
NSLog(@"wrong answer");

} 
```

# javascript - 管理面板，如自定义 CMS 框架

> ID：13700709
> 
> 赞同：0
> 
> 时间：2012-12-04T10:22:09.177
> 
> 标签：javascript, jquery, asp.net, json, asp.net-mvc-3

我想创建一个框架，比如 Admin panel ，它几乎可以控制前端显示的所有方面。

例如（最基本的）：如果假设要在导航区域中显示的链接是从服务器传递的，带有 order 和 url 等。

整个目标是节省繁琐任务的时间。你可以开始创建菜单并开始为其分配页面。给出 Url，要渲染的实际文件（如果是静态文件），如果是动态文件，则相应地给出文件。这完全是服务器端可管理的，可以使用不同的 portlet 之类的东西。

所以基本的路线图有：

**像这样的领域：**

**标题区域 -**可以包含徽标、链接等。

**导航区域 -**可以包含链接和子菜单。

**内容区 -**现在这是棘手的部分，它有如下区域：左、中和右。它包含必须显示的顺序。因此，当有一天我们想要更改文章在页面上的显示方式时，我们可以轻松地做到这一点，而无需任何部署。现在这些 Zones ，可以有 n 个内部元素，例如 word cloud 或广告区域。

**页脚区域：**再次类似于页眉区域。

目前已经存在一个框架，它使用 XSLT 文件从服务器端提取数据。例如：如果有一个网格，它将在 XSLT 文件中嵌入一个标签。现在无论数据的来源是什么，我们将其序列化为 XML 并将其提供给 XSLT 文件，并且 html 是从该文件派生的，并附加到页面中的图层。

这种方法的问题是：

1.  XSLT 转换发生在服务器端，因此服务器负责获取数据，运行 XSLT 转换，并将生成的 html 附加到图层 div。所以，根据我的说法，首先这不是服务器的关注点。其次，对于较大的应用程序，这可能会更慢。
2.  XSLT 转换无法进行调试。因此，每当我们遇到数据问题时，它总是有点“试错法”。
3.  维护它是一项令人毛骨悚然的工作，即样式更改和其他内容。
4.  添加动态值。就像 JavaScript 实际上不能很容易地在此使用。其次，我们不能使用 JQuery 或任何其他库，因为这一切都发生在服务器上。

现在我想到的是在 XSLT 的地方使用 Templating - Javascript - JSON 组合，这将被卸载到客户端并相应地进行渲染。

实现自定义 CMS 的其他方法是什么？

基于 JavaScript 的方法可能有什么问题？

有没有类似用途的现有框架？

# java - 创建一个复制构造函数和一个覆盖的 clone() 方法

> ID：13700712
> 
> 赞同：2
> 
> 时间：2012-12-04T10:22:13.553
> 
> 标签：java, constructor, copy, overriding, clone

我无法理解如何创建和实现复制构造函数，以及重写的 clone() 方法（不在同一个类中）。

我知道对于“实际副本”，您必须进行深度克隆而不是简单克隆（我花了很长时间才弄清楚......）。我在这里找到的一个更明显的解决方案（对我来说）是创建一个复制构造函数。

为简洁起见，假设我有一个包含两个整数的 Dog 对象。在另一个类 Cat 中，我有一个 Cat 对象，它由 100 个 Dog 对象组成的数组（例如 Dog[] cat = new Dog[100]）。到目前为止，我已经尝试了以下方法：

```
// for a copy constructor
public Cat(Cat cat) {
    Dog[] copy = new Dog[100];
    for (int i = 0; i < 100; i++) {
        copy[i] = cat[i];
    }
} 
```

类似的东西总是会给我一个类型不匹配（“表达式的类型必须是数组类型，但它解析为 Cat”和“不能从 Cat 转换为 Dog”）。可能是因为我现在是凌晨 5 点，但我就是不明白为什么这不起作用。副本和猫不是同一类型吗？

如果我尝试用自己的 clone() 方法覆盖，我会得到同样的错误。我以前从未使用过 clone() （或者看到过它），所以我想在尝试提出自己的想法之前先看看我不理解的内容。不过，对于它的价值，我之前已经注释掉了以下内容，编译器在 return 语句上抛出了：

```
protected Cat clone() {
    Dog[] copy = new Dog[100];
    int count = 0;
    (while (count < cat.length) {
        copy[count] = (Dog) cat[count];
        count++;
    }
    return copy;
} 
```

相同类型不匹配错误。将标头更改为“protected Dog[] clone()”会使编译器错误消失，但显然这并没有让我有任何收获。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:52:42.250

在您的情况下，您正在尝试复制对象中的`Dog`s数组`Cat`。但是，您正在尝试将`Cat`对象用作数组（通过使用`[]`and `length`）

您可能的意思是将猫的内容复制到新猫中。然后你的构造函数会变成这样：

```
private Dogs[] myCatsDogs;

// for a copy constructor
public Cat(Cat otherCat) {
    this.myCatsDogs = new Dog[100];
    for (int i = 0; i < 100; i++) {
         this.myCatsDogs[i] = otherCat.myCatsDogs[i];
    }
} 
```

对于`clone()`方法同样适用。另请注意，clone 不经常使用（因为很难正确实现，另请参见Bloch 的[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0321356683) Item 10）。如果可以，请始终使用复制构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:10:25.250

这是我在 Stand 复制构造函数下的简单示例....

```
public class Dog {
public final List<String> names;
public int age;
public int weight;

public Dog() {
    names = new ArrayList<String>();
}

protected Dog(Dog original) {
    names = new ArrayList<String>(original.names);
    age = original.age;
    weight = original.weight;
}

public Dog copy() {
    return new Dog(this);
} 
```

}

```
public class Dalmatian extends Dog {
    public int spots;

public Dalmatian() { }

protected Dalmatian(Dalmatian original) {
    super(original);
    spots = original.spots;
}

public Dalmatian copy() {
    return new Dalmation(this);
} 
```

}

希望有帮助....

# javascript - 设置超时问题

> ID：13700719
> 
> 赞同：1
> 
> 时间：2012-12-04T10:22:40.737
> 
> 标签：javascript, settimeout

我正在尝试在 Javascript 中创建 jquery fadeto 类型的效果，但我的 setTimeout 命令有问题。

这是代码：

```
function textfade(y) {
    var x = document.getElementById("test");
    var y;           
    if (y == undefined) {
        y = 1.0;
    } 

    x.style.opacity = y;
    y -=0.1;
    setTimeout(function(){ textfade(y); }, 50);
} 
```

问题是`x.style.opacity = y`。

没有它，超时运行正常。然而，有了它，它会运行一次函数然后死掉。虽然我觉得这是一个简单的错误，但我没有修复它的想法。

任何建议将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:29:39.710

`y`您每次执行时都重新声明`textfade()`，有效地销毁/重置传递的参数。

消除：

```
var y; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:36:08.590

确保在`test`元素已经可用后运行它。在这里它工作正常：http: [//jsfiddle.net/3yDMP/](http://jsfiddle.net/3yDMP/)。在这里：[http://jsfiddle.net/3yDMP/3/](http://jsfiddle.net/3yDMP/3/) - 不，因为当 dom 尚未准备好且不可用时，函数是在 head 中调用的，而不是在 onload 中（如在第一个小提琴中）。

所以，在你可能是

```
<head>
  <script>
       function textfade() {...}
  </script>
</head>
<body onload="textfade()">
    <div id="test"> ... </div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:29:34.890

恕我直言，调用内部闭包会更好，`setTimeout`其中当前不透明度级别保持在淡入淡出函数本身之外，因此您不必传递它。

```
function textfade(el) {
    if (typeof el === "string") {
        el = document.getElementById(el);
    }

    var opacity = 1.0;

    (function fade() {
        el.style.opacity = opacity;
        opacity -= 0.1;
        if (opacity > 0) {
             setTimeout(fade, 50);
        }
    })();
} 
```

演示在[http://jsfiddle.net/alnitak/TQHYj/](http://jsfiddle.net/alnitak/TQHYj/)

# objective-c - 在 UIScrollview 的子视图上添加 UIPinchGestureRecognizer

> ID：13700724
> 
> 赞同：1
> 
> 时间：2012-12-04T10:22:43.883
> 
> 标签：objective-c, ios, uiscrollview, zooming

我正在添加一个视图作为 a`UIScrollview`的子视图。此子视图确定`contentsize`. `scrollview`在这个视图中，我添加了一个 UIPinchGesture 并在手势的选择器目标方法中调整视图大小并重置滚动视图的内容大小。顺便说一句，我之前尝试过缩放滚动视图，但它没有满足我的要求，所以我用`UIPinchGesture`. 我的问题是，通常滚动视图的内容大小大于它的框架，因此启用了滚动。当我尝试用两根手指捏住时，会触发滚动视图的滚动，并且很少识别出 Pinchgesture。我不能禁用滚动，`UIScrollview`因为这是我的要求之一。谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:36:03.510

将`delayContentTouches`属性设置`UIScrollView`为`NO`（而不是默认值`YES`）。这将允许触摸立即传播到滚动视图的子视图。

# android - TimeZone.getDefault() 没有给我我所在的时区

> ID：13700725
> 
> 赞同：4
> 
> 时间：2012-12-04T10:22:49.563
> 
> 标签：android

这种硬编码`GMT+2`就像一个魅力。

```
calendarCurrent.setTimeZone(TimeZone.getTimeZone("GTM+2")); 
```

当然我不需要硬编码，所以我使用

```
calendarCurrent.setTimeZone(TimeZone.getDefault()); 
```

但这从来没有给我适当的价值。难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-09-15T07:47:47.037

我猜它应该自动工作。

但我看到人们使用**setDefault(..)**

```
TimeZone.setDefault(TimeZone.getTimeZone("Europe/London")); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T10:53:16.867

系统会自动检测默认时区，因此您无需显式调用 TimeZone.setDefault()。

时区自动检测在模拟器上不起作用，但您可以使用 -timezone 启动标志来设置它。

此外，更改时区的推荐方法是通过设置应用程序，该应用程序不包含在当前 sdk 中。现在您可以使用以下内容：

```
AlarmManager alarm = (AlarmManager) getSystemService(Context.ALARM_SERVICE);
alarm.setTimeZone(timezone); 
```

它适用于

`<uses-permission android:name="android.permission.SET_TIME_ZONE"/>`

# c# - 如何在 WPF 中制作可编辑的 DataGrid？

> ID：13700728
> 
> 赞同：0
> 
> 时间：2012-12-04T10:22:57.773
> 
> 标签：c#, .net, wpf, datagrid, observablecollection

基本上我的主窗口中有以下内容：

```
public ObservableCollection<KeyValuePair<string, int>> Environment { get; set; } 
```

我想将它绑定到数据网格，以便我可以编辑数据网格并`Environment`进行更新。具体来说，我希望能够添加新行、删除行和编辑单个单元格。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:39:06.470

在 xaml 中，您可以编写：

```
<DataGrid ItemsSource="{Binding}">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="SomeString">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding SomeString}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="SomeInt>
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding SomeInt}"/>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

在make后面的代码中：带有字段SomeString和SomeInt“ViewModel”类的数据类“DataClass”，继承INotifyPropertyChanged并使用“DataClass”写：

```
 ObservableCollection<ViewModel> Environment 
```

并用成对的 SomeString 和 SomeInt 对其进行实例化

使用 DataGrid 环境设置控件的数据上下文：

```
 MyUserControl.DataContext =  Environment; 
```

# sql - 使用变量名在远程服务器中执行存储过程

> ID：13700741
> 
> 赞同：1
> 
> 时间：2012-12-04T10:23:44.170
> 
> 标签：sql, sql-server, sql-server-2012

我有一个游标及其获取数据库名称和链接服务器名称，以在每个游标中执行一个过程

```
Declare getDBLinkServer cursor for  
select DatabaseName, LinkServerName from DBnLinkServer  
Open getDBLinkServer  
fetch next from getDBLinkServer into @DatabaseName, @LinkServerName  
While @@FETCH_STATUS = 0  
Begin  
    exec @LinkServerName.@DatabaseName.dbo.someProcedure 'some' 
    fetch next from getDBLinkServer into @DatabaseName, @LinkServerName  
End  
Close getDBLinkServer  
Deallocate getDBLinkServer 
```

这显示了`Incorrect syntax near '.'`如何避免它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:33:29.477

使用动态 sql。像这样：

```
declare @sql nvarchar(max)
set @sql = 'exec ' + @LinkServerName + '.' + @DatabaseName + '.dbo.'+@someProcedure+' ''some''' 

exec sp_executeSQL @sql 
```

# mysql - UNION SELECT 错误 1064 但如果单独执行则有效

> ID：13700747
> 
> 赞同：0
> 
> 时间：2012-12-04T10:24:01.997
> 
> 标签：mysql, select, union

我有两台 mySQL 服务器——离线版是 5.5.25，在线版是 5.0.95。我正在尝试运行 UNION SELECT 以将两个结果集连接在一起。两个查询都使用相同的连接从相同的表中提取相同的数据 - 每个查询的唯一区别是 where 查询。基本语法是：

```
(SELECT QUERY A) 
UNION 
(SELECT QUERY B) 
ORDER BY date_created DESC, subscription_rate_id ASC 
```

如果我离线运行此查询，我会收到此错误：

> *错误号：1064*
> 
> *您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'INNER JOIN `webmaster`d ON附近使用的正确语法`d`。`dupe_master_id`= `webmaster`。`webmaster_id`在第 16 行*

如果我单独运行查询，那么它们都可以工作。如果我在线运行整个查询，它可以工作。这仅发生在我的离线 mySQL 中，它正在运行两者的较新的 mySQL 版本。我相信该错误与查询 B 有关-但查询 A 中存在相同的 INNER JOIN。

该查询非常长并且不容易缩短/分解，这就是我没有将其粘贴在这里的原因。如果绝对必要，我会找到一种方法来提供它。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:31:05.760

去掉周围的牙套

```
FROM (`webmaster`) 
```

到

```
FROM `webmaster` 
```

有关不同版本和错误消息，请参阅[SQL Fiddle](http://www.sqlfiddle.com/#!2/90ead/5/2)。

# c++ - 获取 MySQL 查询返回数据的类型

> ID：13700751
> 
> 赞同：3
> 
> 时间：2012-12-04T10:24:05.793
> 
> 标签：c++, mysql, mysql-connector

我知道如何获取标准表中列的类型（例如`SHOW FIELDS FROM ...`），但是有什么方法可以从自定义查询中获取返回数据的类型，其中包含不同的列选择和不同表的连接（例如`SELECT table1.var1,table2.var2 FROM table1 JOIN table2`）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-26T15:26:52.700

MySQL 站点上标题为[使用 MySQL 连接器/C++ 开发数据库应用程序](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html)的文章包含[以下小节](http://dev.mysql.com/tech-resources/articles/mysql-connector-cpp.html#rsmeta)：

> ## 访问结果集元数据
> 
> 当正在处理的 SQL 语句直到运行时才知道时，该`ResultSetMetaData`接口可用于确定用于从结果集中检索数据的方法。`ResultSetMetaData`提供有关给定结果集结构的信息。对象提供的数据`ResultSetMetaData`包括结果集中的列数、名称或标签以及这些列的类型以及每列的属性以及指定列的表所属的表、模式和目录的名称。
> 
> 当`getMetaData()`在`ResultSet`对象上调用时，它会返回一个`ResultSetMetaData`描述该对象列的`ResultSet`对象。
> 
> 一些相关方法的签名如下所示。有关`ResultSetMetaData`接口支持的方法的完整列表，请检查连接器/C++ 安装中的 resultset_metadata.h 标头。
> 
> ```
> /* resultset.h */
> ResultSetMetaData * ResultSet::getMetaData() const;
> 
> /* prepared_statement.h */
> ResultSetMetaData * PreparedStatement::getMetaData() const;
> 
> /* resultset_metadata.h */
> std::string ResultSetMetaData::getCatalogName(unsigned int columnIndex);
> std::string ResultSetMetaData::getSchemaName(unsigned int columnIndex);
> std::string ResultSetMetaData::getTableName(unsigned int columnIndex);
> 
> unsigned int ResultSetMetaData::getColumnCount();
> unsigned int ResultSetMetaData::getColumnDisplaySize(unsigned int columnIndex);
> std::string ResultSetMetaData::getColumnLabel(unsigned int columnIndex);
> std::string ResultSetMetaData::getColumnName(unsigned int columnIndex);
> int ResultSetMetaData::getColumnType(unsigned int columnIndex);
> std::string ResultSetMetaData::getColumnTypeName(unsigned int columnIndex);
> 
> int ResultSetMetaData::isNullable(unsigned int columnIndex);
> bool ResultSetMetaData::isReadOnly(unsigned int columnIndex);
> bool ResultSetMetaData::isWritable(unsigned int columnIndex); 
> ```
> 
> 以下代码片段演示了如何检索所有列名或标签、它们的数据类型和大小以及它们所属的表名和模式名。
> 
> ```
> ResultSet *rs;
> ResultSetMetaData *res_meta;
> 
> res_meta = rs -> getMetaData();
> 
> int numcols = res_meta -> getColumnCount();
> cout << "\nNumber of columns in the result set = " << numcols << endl;
> 
> cout.width(20);
> cout << "Column Name/Label";
> 
> cout.width(20);
> cout << "Column Type";
> 
> cout.width(20);
> cout << "Column Size" << endl;
> 
> for (int i = 0; i < numcols; ++i) {
>   cout.width(20);
>   cout << res_meta -> getColumnLabel (i+1);
> 
>   cout.width(20); 
>   cout << res_meta -> getColumnTypeName (i+1);
> 
>   cout.width(20); 
>   cout << res_meta -> getColumnDisplaySize (i+1) << endl;
> }
> 
> cout << "\nColumn \"" << res_meta -> getColumnLabel(1);
> cout << "\" belongs to the Table: \"" << res_meta -> getTableName(1);
> cout << "\" which belongs to the Schema: \"" << res_meta -> getSchemaName(1) << "\"" << endl;
> 
> //delete res_meta;
> delete rs; 
> ```
> 
> 从 1.0.5 版开始，连接器负责在`ResultSetMetaData`对象超出范围时自动清理它们。这将使客户端免于`ResultSetMetaData`显式删除对象。由于元数据对象的隐式销毁，客户端将无法`ResultSetMetaData`直接删除对象。任何删除对象的尝试都会`ResultSetMetaData`导致编译时错误。同样，使用`auto_ptr`模板类实例化类型的对象会`ResultSetMetaData`导致编译时错误。例如，如果未`delete res_meta;`注释该语句，则使用 Connector/C++ 1.0.5 及更高版本编译上述代码会失败。
> 
> ###  准备好的语句和结果集元数据
> 
> `PreparedStatement::getMetaData()`检索一个`ResultSetMetaData`对象，该对象包含有关对象列的信息，该`ResultSet`对象将在`PreparedStatement`执行对象时返回。
> 
> 因为一个`PreparedStatement`对象是预编译的，所以可以知道`ResultSet`它将返回的对象，而不必执行它。因此，可以调用对象的方法`getMetaData`，`PreparedStatement`而不是等待执行它然后调用返回的对象的`ResultSet::getMetaData`方法。`ResultSet`
> 
> 该方法`PreparedStatement::getMetaData`仅在 Connector/C++ 1.0.4 及更高版本中受支持。

# ruby-on-rails - 如何使用 WATIR 检测 jquery UI 对话框元素？

> ID：13700753
> 
> 赞同：2
> 
> 时间：2012-12-04T10:24:10.950
> 
> 标签：ruby-on-rails, jquery-ui, testing, watir, watir-webdriver

我对使用非常陌生`WATIR`。我正在编写一些小脚本进行测试，它非常酷。我有一个`Jquery UI Dialog box`用户注册。所以，对话框有`Username text-box`,`password text-box`和`submit button`。但我无法单击提交按钮。我无法检测到对话框内的任何元素。请有人建议我忽略这一点。

```
require "rubygems"
require "watir-webdriver"
require "watir-webdriver/extensions/alerts"

if browser.button(name: "commit").exists?
#then browser.button(name: "commit").click
then browser.javascript_dialog.button(name: "commit").click
puts " Dialog box Detected"
else puts " Failed"
puts " Dialog box is not Detected"
end 
```

它显示失败并且未检测到对话框..

这是我需要做的示例... [模态示例](http://jqueryui.com/dialog/#modal-form)我需要在对话框中找到任何元素。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:07:40.440

您要与之交互的元素位于框架中。单击“创建新用户”按钮：

```
require "watir-webdriver"
browser = Watir::Browser.new :firefox
browser.goto "http://jqueryui.com/dialog/#modal-form"
browser.frame(:class => "demo-frame").button(:id => "create-user").click 
```

# api - 将联合 OAuth2 登录集成到 API 服务中？

> ID：13700762
> 
> 赞同：2
> 
> 时间：2012-12-04T10:24:36.507
> 
> 标签：api, oauth, federated-identity

我们正在构建一个公共 API，使用此 API 的客户端需要进行身份验证，我们建议`OAuth2 API`为此目的公开一个。

但是，我们还需要联合身份验证，因此我们看到客户端`OAuth 2`与我们的 API 交谈，而我们的 API`OAuth1/2`在`SAML2`后台与身份提供者交谈。

完整的流程是：

1.  客户端将 OAuth2 与我们的 API 对话。
2.  在此流程开始时，我们的 API 将客户端重定向到“选择您的联合提供商”HTML 页面。
3.  在选择提供者时，我们的 API 与提供者进行 OAauth1/2 对话，将任何重定向传递回客户端，因此用户可以提供登录详细信息。
4.  我们的 API 将访问代码交换为访问令牌和刷新令牌（API 保持这些私有，并且即使客户端离线也可以使用它们）。
5.  我们的 API 生成访问代码并将其传递给客户端。
6.  客户端将访问代码交换为访问令牌。

提供者提供的访问令牌/刷新令牌由 API 在后台使用，例如保持 Google 日历最新，而不是传递给客户端。

我还没有找到任何使用 API 完成此操作的示例。那么，为 API 服务提供联合身份验证的既定模型是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T20:33:30.050

查看 Ping Identity 在其[OAuth Essentials 页面](https://www.pingidentity.com/resource-center/oauth-essentials.cfm)上提供的一些信息。具体来说，有一份题为“基于标准的移动应用程序 IdM 架构白皮书”（免费 w/注册）的白皮书讨论了如何使用 SAML + OAuth 来保护需要联合的本地移动应用程序. [注意：我为 Ping 工作]。它列出了解决此用例以及其他 OAuth 相关案例所需的信息流和令牌交换。

HTH-伊恩

# functional-programming - When exactly do we use let rec?

> ID：13700780
> 
> 赞同：1
> 
> 时间：2012-12-04T10:25:34.923
> 
> 标签：functional-programming, ocaml

I know that `let rec` is used when I want `recursive`.

For example,

`let rec power i x = if i = 0 then 1.0 else x *. (power (i-1) x);;`

Ok, I understand that.

* * *

But how about this one:

`let x y = y + y in x 2`?

**Should I use `rec` inside?**

I think I should, because it has `x 2` inside, loading itself, but it seems it is fine with compiler.

**So when I should use `let rec` and shouldn't?**

* * *

Also, what is the difference between

`let (-) x y = y - x in 1-2-3;;`

and

`let rec (-) x y = y - x in 1-2-3;;`

**Are they both legal?**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T10:40:05.060

You need to understand the scoping rules of OCaml first.

When you write `let f XXX = YYY in ZZZ`, if you use `f` in `YYY` then you need `rec`. In both cases (ie with or without `rec`),`f` will be defined in `ZZZ`.

So:

```
let x y = y + y in
x 2 
```

is perfectly valid.

For you second question: no it is not equivalent, if you try it on the toplevel, the second statement loop for ever and is equivalent to `let rec loop x y = loop y x in ()`. To understand why it is looping for ever, you can understand the application of `loop` as an expansion where the identifier is replaced by its body. so:

So `loop` body is `function x y -> loop y x`, which can be expanded to `function x y -> (function a b -> loop b a) y x` (I've renamed the parameter names to avoid ambiguity), which is equivalent to `function x y -> loop x y` when you apply the body and so on and so on. So this function never does anything, it just loops forever by trying to expand/apply its body and swapping its arguments.

# vb.net - 在特定时间创建 HTML

> ID：13700790
> 
> 赞同：0
> 
> 时间：2012-12-04T10:26:25.487
> 
> 标签：vb.net, datetime, time

如果有以下代码：

```
Public Shared Function GetNextWeekDay() As Date
    Dim value As Date = Date.Now
    Do
        value = value.AddDays(1)
    Loop While (value.DayOfWeek = DayOfWeek.Saturday) Or (value.DayOfWeek = DayOfWeek.Sunday)
    Return value
End Function

Public Shared Function DPLoadData() As String
    Dim s As StringBuilder = New StringBuilder("<head><meta http-equiv=""content-type"" content=""text/html;charset=utf-8"" /><META HTTP-EQUIV=""REFRESH"" CONTENT=""900"">")
    s.Append("<style type=""text/css"" media=""all""> body{font-family: Arial;}h4{font-size: 10pt;font-weight: bold;white-space: nowrap;margin-top: 0; margin-bottom: 10px;}")
    s.Append("th{font-size: 9pt;font-weight: normal;text-align: center;white-space: nowrap;}td{font-size: 9pt;}.content td{border: solid 1px #dadada;}")
    s.Append(".content th {border: solid 1px #dadada;background-image: url(""tbl_header_row_bg.gif""); background-repeat: repeat-x; white-space: nowrap;}</style></head>")

  s.Append("<h3>" & "Daily Plan" & "</h3>")
        Dim strCurrDay As String = ""
        s.Append("<h5>" & strCurrDay & "</h5>")

    Dim CurrDateFirstDay As Date = GetNextWeekDay()
    strCurrDay = FormatDateTime(CurrDateFirstDay, DateFormat.LongDate)
    s.Append("<h5>" & strCurrDay & "</h5>")
    s.Append(LoadDataGroupByDate(CurrDateFirstDay))

    Return s.ToString()

End Function 
```

函数 DPLoadData 生成一个带有表格的 HTML 文件，并用预订填充它。目前，HTML 文件显示明天的预订（例如，如果今天是星期一，则显示星期二的预订，如果今天是星期五，则显示星期一的预订）。

我需要的是 HMTL 文件在下午 5 点生成例如：如果今天是星期一，那么 HTML 文件应该在星期一下午 5 点生成，并且应该显示星期二到星期二下午 5 点和星期二下午 5 点的预订文件应该在星期三生成，并且应该显示星期三的预订直到星期三下午 5 点，依此类推。

我怎样才能做到这一点？请帮忙。

我的解决方案：

```
 Public Shared Function GetNextWeekDay() As Date
    Dim value As Date = Date.Now
    Dim intHour As Integer
    Dim intMinute As Integer
    Dim intSecond As Integer

    intHour = 17
    intMinute = 0
    intSecond = 0

    Dim newdatetime As DateTime = New Date(value.Year, value.Month, value.Day, intHour, intMinute, intSecond)

    If DateTime.Now < newdatetime Then

        If value.DayOfWeek = DayOfWeek.Saturday Then
            value = value.AddDays(2)
            Return value
        End If

        If value.DayOfWeek = DayOfWeek.Sunday Then
            value = value.AddDays(1)
            Return value
        End If

        Return value

    ElseIf DateTime.Now > newdatetime Then
        Do
            value = value.AddDays(1)
        Loop While (value.DayOfWeek = DayOfWeek.Saturday) Or (value.DayOfWeek = DayOfWeek.Sunday)
        Return value
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:32:18.370

据我了解您的问题，您基本上是在寻找一种在给定时间执行程序的方法？如果是这样，请查看[cron](http://en.wikipedia.org/wiki/Cron "Cron - 维基百科")或[Windows 调度程序](http://support.microsoft.com/kb/308569 "Windows 调度程序")，具体取决于您运行它的操作系统。

* * *

更新：所以基本上你只需要比较当前时间并检查它是否在下午 5 点之前。然后你应该有一个函数返回从当天下午 5 点到明天下午 5 点的数据。

您可能想看看[这个 DateTime 的 VB 教程](http://www.vb6.us/tutorials/date-time-functions-visual-basic "Visual Basic 中的日期时间函数")。基本上，您需要将当前时间与由下午 5 点的当前日期组成的日期时间进行比较。

* * *

更新：只需扩展您的 if 条件以检查今天不是周六或周日。这是我刚刚整理的一个小代码片段。我对 VB 不是很熟悉，所以这可能不是 100% 正确，但我想你明白了。

```
Public Function GetNextWeekDay() As Date
    Dim value As Date = Date.Now
    Dim intHour As Integer
    Dim intMinute As Integer
    Dim intSecond As Integer

    intHour = 17
    intMinute = 0
    intSecond = 0

    Dim newdatetime As DateTime = New Date(value.Year, value.Month, value.Day, intHour, intMinute, intSecond)

    If value.DayOfWeek <> DayOfWeek.Saturday And value.DayOfWeek <> DayOfWeek.Sunday And DateTime.Now < newdatetime Then
        Return value.Date
    Else
        Do
            value = value.AddDays(1)
        Loop While (value.DayOfWeek = DayOfWeek.Saturday) Or (value.DayOfWeek = DayOfWeek.Sunday)
        Return value.Date
    End If
End Function 
```

# css - 我不能强制图像在 div 内居中

> ID：13700794
> 
> 赞同：-1
> 
> 时间：2012-12-04T10:26:35.997
> 
> 标签：css

我有一个简单的图像滑块，问题是过渡效果在容器左侧起飞，复制图像，这是示例：http: [//ivangodfather.no-ip.org :84/studio/es/ proyectos/proyectos/edificio-fs](http://ivangodfather.no-ip.org:84/studio/es/proyectos/proyectos/edificio-fs)

解决方案可能是使用类“box_clone”将 div 中的 img 居中，但我尝试过但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:35:47.297

我认为由于图像位于 DIV 而不是 CSS 背景中，因此您可以使用

```
width: XXXpx; margin: 0 auto; 
```

在 div 上并删除 box_clone

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:41:18.003

也许您应该将 css 规则添加`text-align:center;`到包含图像的 div 中。抱歉，如果我错了，我现在看不到提供的示例。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T10:29:34.953

尝试将其添加到 div

```
style="background-repeat: no-repeat;
                                background-position: center;" 
```

# android - 两个片段之间的基本通信

> ID：13700798
> 
> 赞同：75
> 
> 时间：2012-12-04T10:26:46.040
> 
> 标签：android, android-fragments

我有一项活动 - `MainActivity`。在这个活动中，我有两个片段，这两个片段都是我在 xml 中以声明方式创建的。

我正在尝试将`String`用户输入的文本传递`Fragment A`到`Fragment B`. 然而，事实证明这是非常困难的。有谁知道我如何做到这一点？

我知道片段可以使用`getActivity()`. 所以我猜我会从那里开始？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-04T10:41:50.027

看看 Android 开发者页面：http: [//developer.android.com/training/basics/fragments/communicating.html#DefineInterface](http://developer.android.com/training/basics/fragments/communicating.html#DefineInterface)

基本上，您在 Fragment A 中定义一个接口，并让您的 Activity 实现该接口。现在你可以在你的 Fragment 中调用接口方法，你的 Activity 就会收到这个事件。现在在您的活动中，您可以调用您的第二个片段以使用接收到的值更新文本视图

您的 Activity 实现了您的界面（参见下面的 FragmentA）

```
public class YourActivity implements FragmentA.TextClicked{
    @Override
    public void sendText(String text){
        // Get Fragment B
        FraB frag = (FragB)
            getSupportFragmentManager().findFragmentById(R.id.fragment_b);
        frag.updateText(text);
    }
} 
```

Fragment A定义了一个Interface，需要的时候调用该方法

```
public class FragA extends Fragment{

    TextClicked mCallback;

    public interface TextClicked{
        public void sendText(String text);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        // This makes sure that the container activity has implemented
        // the callback interface. If not, it throws an exception
        try {
            mCallback = (TextClicked) activity;
        } catch (ClassCastException e) {
            throw new ClassCastException(activity.toString()
                + " must implement TextClicked");
        }
    }

    public void someMethod(){
        mCallback.sendText("YOUR TEXT");
    }

    @Override
    public void onDetach() {
        mCallback = null; // => avoid leaking, thanks @Deepscorn
        super.onDetach();
    }
} 
```

片段 B 有一个公共方法来处理文本

```
public class FragB extends Fragment{

    public void updateText(String text){
        // Here you have it
    }
} 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-10-23T14:48:40.943

其他一些示例（甚至在撰写本文时的[文档](https://developer.android.com/training/basics/fragments/fragment-ui.html)）使用过时的`onAttach`方法。这是一个完整更新的示例。

[![在此处输入图像描述](../Images/c1c1c6bfc3e05a622400b7cd4182ed88.png)](https://i.stack.imgur.com/xPoKN.png)

# 笔记

*   您不希望 Fragments 直接相互交谈或与 Activity 交谈。这将它们与特定的 Activity 联系在一起，使重用变得困难。
*   解决方案是制作一个Activity将实现的回调监听器接口。当 Fragment 想要向另一个 Fragment 或其父 Activity 发送消息时，它可以通过接口来完成。
*   Activity 可以直接与其子片段公共方法通信。
*   因此，Activity 充当控制器，将消息从一个片段传递到另一个片段。

# 代码

*MainActivity.java*

```
public class MainActivity extends AppCompatActivity implements GreenFragment.OnGreenFragmentListener {

    private static final String BLUE_TAG = "blue";
    private static final String GREEN_TAG = "green";
    BlueFragment mBlueFragment;
    GreenFragment mGreenFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // add fragments
        FragmentManager fragmentManager = getSupportFragmentManager();

        mBlueFragment = (BlueFragment) fragmentManager.findFragmentByTag(BLUE_TAG);
        if (mBlueFragment == null) {
            mBlueFragment = new BlueFragment();
            fragmentManager.beginTransaction().add(R.id.blue_fragment_container, mBlueFragment, BLUE_TAG).commit();
        }

        mGreenFragment = (GreenFragment) fragmentManager.findFragmentByTag(GREEN_TAG);
        if (mGreenFragment == null) {
            mGreenFragment = new GreenFragment();
            fragmentManager.beginTransaction().add(R.id.green_fragment_container, mGreenFragment, GREEN_TAG).commit();
        }
    }

    // The Activity handles receiving a message from one Fragment
    // and passing it on to the other Fragment
    @Override
    public void messageFromGreenFragment(String message) {
        mBlueFragment.youveGotMail(message);
    }
} 
```

*GreenFragment.java*

```
public class GreenFragment extends Fragment {

    private OnGreenFragmentListener mCallback;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_green, container, false);

        Button button = v.findViewById(R.id.button);
        button.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                String message = "Hello, Blue! I'm Green.";
                mCallback.messageFromGreenFragment(message);
            }
        });

        return v;
    }

    // This is the interface that the Activity will implement
    // so that this Fragment can communicate with the Activity.
    public interface OnGreenFragmentListener {
        void messageFromGreenFragment(String text);
    }

    // This method insures that the Activity has actually implemented our
    // listener and that it isn't null.
    @Override
    public void onAttach(Context context) {
        super.onAttach(context);
        if (context instanceof OnGreenFragmentListener) {
            mCallback = (OnGreenFragmentListener) context;
        } else {
            throw new RuntimeException(context.toString()
                    + " must implement OnGreenFragmentListener");
        }
    }

    @Override
    public void onDetach() {
        super.onDetach();
        mCallback = null;
    }
} 
```

*BlueFragment.java*

```
public class BlueFragment extends Fragment {

    private TextView mTextView;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.fragment_blue, container, false);
        mTextView = v.findViewById(R.id.textview);
        return v;
    }

    // This is a public method that the Activity can use to communicate
    // directly with this Fragment
    public void youveGotMail(String message) {
        mTextView.setText(message);
    }
} 
```

# XML

*activity_main.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dp">

    <!-- Green Fragment container -->
    <FrameLayout
        android:id="@+id/green_fragment_container"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:layout_marginBottom="16dp" />

    <!-- Blue Fragment container -->
    <FrameLayout
        android:id="@+id/blue_fragment_container"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1" />

</LinearLayout> 
```

*片段绿色.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:background="#98e8ba"
              android:padding="8dp"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <Button
        android:id="@+id/button"
        android:text="send message to blue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

*片段蓝色.xml*

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:orientation="vertical"
              android:background="#30c9fb"
              android:padding="16dp"
              android:layout_width="match_parent"
              android:layout_height="match_parent">

    <TextView
        android:id="@+id/textview"
        android:text="TextView"
        android:textSize="24sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-06-05T00:30:37.990

最好和推荐的方法是使用共享 ViewModel。

[https://developer.android.com/topic/libraries/architecture/viewmodel#sharing](https://developer.android.com/topic/libraries/architecture/viewmodel#sharing)

来自谷歌文档：

```
public class SharedViewModel extends ViewModel {
private final MutableLiveData<Item> selected = new MutableLiveData<Item>();

public void select(Item item) {
    selected.setValue(item);
}

public LiveData<Item> getSelected() {
    return selected;
}
}

public class MasterFragment extends Fragment {
private SharedViewModel model;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);
    itemSelector.setOnClickListener(item -> {
        model.select(item);
    });
}
}

public class DetailFragment extends Fragment {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    SharedViewModel model = ViewModelProviders.of(getActivity()).get(SharedViewModel.class);
    model.getSelected().observe(this, { item ->
       // Update the UI.
    });
}
} 
```

**ps**：两个片段从不直接通信

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-30T09:59:31.270

考虑我的 2 个片段 A 和 B，假设我需要将数据从 B 传递到 A。

然后在 B 中创建一个接口，并将数据传递给 Main Activity。在那里创建另一个接口并将数据传递给片段 A。

分享一个小例子：

片段 A 看起来像

```
public class FragmentA extends Fragment implements InterfaceDataCommunicatorFromActivity {
public InterfaceDataCommunicatorFromActivity interfaceDataCommunicatorFromActivity;
String data;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    return super.onCreateView(inflater, container, savedInstanceState);
}

@Override
public void updateData(String data) {
    // TODO Auto-generated method stub
    this.data = data;
    //data is updated here which is from fragment B
}

@Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);
    try {
        interfaceDataCommunicatorFromActivity = (InterfaceDataCommunicatorFromActivity) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement TextClicked");
    }

}

} 
```

片段B看起来像

```
class FragmentB extends Fragment {
public InterfaceDataCommunicator interfaceDataCommunicator;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    // call this inorder to send Data to interface
    interfaceDataCommunicator.updateData("data");
}

public interface InterfaceDataCommunicator {
    public void updateData(String data);
}

@Override
public void onAttach(Activity activity) {
    // TODO Auto-generated method stub
    super.onAttach(activity);
    try {
        interfaceDataCommunicator = (InterfaceDataCommunicator) activity;
    } catch (ClassCastException e) {
        throw new ClassCastException(activity.toString()
                + " must implement TextClicked");
    }

}

} 
```

主要活动是

```
public class MainActivity extends Activity implements InterfaceDataCommunicator {
public InterfaceDataCommunicatorFromActivity interfaceDataCommunicatorFromActivity;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void updateData(String data) {
    // TODO Auto-generated method stub
    interfaceDataCommunicatorFromActivity.updateData(data);

}

public interface InterfaceDataCommunicatorFromActivity {
    public void updateData(String data);
}

} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-07-06T07:09:58.603

片段之间有多种通信方式。

*   通过`interface` [示例的传统通信方式](https://codinginflow.com/tutorials/android/fragment-to-fragment-communication-with-interfaces)
*   如果您遵循 MVVM 模式，则通过 ViewModel[示例](https://developer.android.com/guide/fragments/communicate)
*   **广播接收器：**通过`LocalBraodcastManager` [示例](https://androidwave.com/fragment-communication-using-eventbus/)或`EventBus` [示例](https://stackoverflow.com/questions/12448423/broadcast-received-twice/68265717#68265717)等...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-31T09:22:40.850

看看[https://github.com/greenrobot/EventBus](https://github.com/greenrobot/EventBus) 或[http://square.github.io/otto/](http://square.github.io/otto/)

甚至...... [http://nerds.weddingpartyapp.com/tech/2014/12/24/implementing-an-event-bus-with-rxjava-rxbus/](http://nerds.weddingpartyapp.com/tech/2014/12/24/implementing-an-event-bus-with-rxjava-rxbus/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-18T15:58:56.490

有一种简单的方法可以使用架构组件实现活动片段之间的通信。可以使用 ViewModel 和 LiveData 在活动的片段之间传递数据。

参与通信的片段需要使用与活动生命周期相关的相同视图模型对象。视图模型对象包含 livedata 对象，数据由一个片段传递到该对象，第二个片段侦听 LiveData 上的更改并接收从片段一发送的数据。

有关完整示例，请参见[http://www.zoftino.com/passing-data-between-android-fragments-using-viewmodel](http://www.zoftino.com/passing-data-between-android-fragments-using-viewmodel)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-08-18T20:06:10.173

学习“setTargetFragment()”

其中“ startActivityForResult() ”建立了 2 个活动之间的关系，“ setTargetFragment() ”定义了 2 个片段之间的调用者/被调用者关系。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-14T15:33:01.670

我为我的活动提供了一个所有片段都可以使用的界面。如果您在同一个活动上有许多片段，这可以节省大量代码重写，并且比为具有相似功能的每个片段制作单独的界面更清洁/更模块化。我也喜欢它的模块化方式。不利的一面是，一些片段可以访问他们不需要的功能。

```
 public class MyActivity extends AppCompatActivity
    implements MyActivityInterface {

        private List<String> mData; 

        @Override
        public List<String> getData(){return mData;}

        @Override
        public void setData(List<String> data){mData = data;}
    }

    public interface MyActivityInterface {

        List<String> getData(); 
        void setData(List<String> data);
    }

    public class MyFragment extends Fragment {

         private MyActivityInterface mActivity; 
         private List<String> activityData; 

         public void onButtonPress(){
              activityData = mActivity.getData()
         }

        @Override
        public void onAttach(Context context) {
            super.onAttach(context);
            if (context instanceof MyActivityInterface) {
                mActivity = (MyActivityInterface) context;
            } else {
                throw new RuntimeException(context.toString()
                        + " must implement MyActivityInterface");
            }
        }

        @Override
        public void onDetach() {
            super.onDetach();
            mActivity = null;
        }
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-07T08:37:37.120

您可以使用 2 方法在 2 之间进行通信`fragments`：

## 1)

可以`LiveData`用来观察一个`fragment`在另一个的数据变化

**创建共享 ViewModel**

```
public class SharedViewModel extends ViewModel {

private MutableLiveData<String> name;

public void setNameData(String nameData) {
    name.setValue(nameData);
}

public MutableLiveData<String> getNameData() {
    if (name == null) {
        name = new MutableLiveData<>();
    }

    return name;
}
} 
```

**片段一**

```
 private SharedViewModel sharedViewModel;

 public FragmentOne() {

 }

 @Override
 public void onCreate(@Nullable Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     sharedViewModel = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);
     submitButton.setOnClickListener(new View.OnClickListener() {
           @Override
           public void onClick(View view) {

            sharedViewModel.setNameData(submitText.getText().toString());
           }
      });

 } 
```

**片段二**

```
 private SharedViewModel sharedViewModel;

 public FragmentTwo() {

 }

 @Override
 public void onCreate(@Nullable Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);

     sharedViewModel = new ViewModelProvider(requireActivity()).get(SharedViewModel.class);

     sharedViewModel.getNameData().observe(this, nameObserver);
 }

 Observer<String> nameObserver = new Observer<String>() {
    @Override
    public void onChanged(String name) {
       receivedText.setText(name);
    }
 }; 
```

有关 viewmodel 的更多详细信息，您可以参考：[mvvm-viewmodel-livedata](https://nabeelj.medium.com/android-how-to-share-data-between-fragments-using-viewmodel-and-livedata-android-mvvm-9fc463af5152)，[通信片段](https://developer.android.com/guide/fragments/communicate#fragments)

## 2)

您可以使用[eventbus](https://github.com/greenrobot/EventBus)来实现相同的目的

```
implementation 'org.greenrobot:eventbus:3.2' 
```

**定义事件**

```
public static class MessageEvent { /* Additional fields if needed */ } 
```

**注册/注销订阅者**

```
 @Override
 public void onStart() {
     super.onStart();
     EventBus.getDefault().register(this);
 }

 @Override
 public void onStop() {
     super.onStop();
     EventBus.getDefault().unregister(this);
 } 
```

**收听事件**

```
@Subscribe(threadMode = ThreadMode.MAIN)  
public void onMessageEvent(MessageEvent event) {/* Do something */}; 
```

**发布活动**

```
 EventBus.getDefault().post(new MessageEvent()); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-16T15:24:49.937

从 Fragment 1.3.0 开始，我们提供了一种在 Fragment 之间进行通信的新方式。

从 Fragment 1.3.0 开始，每个 FragmentManager 都实现了 FragmentResultOwner。这意味着 FragmentManager 可以充当片段结果的中央存储。此更改允许组件通过设置块结果并侦听这些结果来相互通信，而无需这些组件相互直接引用。

**片段监听器：**

```
override fun onCreate(savedInstanceState: Bundle?) {
super.onCreate(savedInstanceState)
// Use the Kotlin extension in the fragment-ktx artifact
setFragmentResultListener("requestKey") { requestKey, bundle ->
    // We use a String here, but any type that can be put in a Bundle is supported
    val result = bundle.getString("bundleKey")
    // Do something with the result
 }
} 
```

**片段发射器：**

```
button.setOnClickListener {
val result = "result"
// Use the Kotlin extension in the fragment-ktx artifact
setFragmentResult("requestKey", bundleOf("bundleKey" to result))
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-02T12:29:57.863

基本上，以下是两个片段之间的通信方式：

```
i) ViewModel
ii) Fragment Result API
iii) Interface 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-12-04T10:33:05.227

## 更新

忽略这个答案。并不是说它不起作用。但是有更好的方法可用。此外，Android 强烈反对 Fragment 之间的直接通信。见[官方文档](https://developer.android.com/training/basics/fragments/communicating.html)。感谢用户@Wahib Ul Haq 的提示。

## 原始答案

好吧，您可以在 Fragment B 中创建一个私有变量和 setter，并从 Fragment A 本身设置值，

**片段B.java**

```
private String inputString;
....
....

public void setInputString(String string){
   inputString = string;
} 
```

**片段A.java**

```
//go to fragment B

FragmentB frag  = new FragmentB();
frag.setInputString(YOUR_STRING);
//create your fragment transaction object, set animation etc
fragTrans.replace(ITS_ARGUMENTS) 
```

或者您可以按照您的建议使用 Activity ..

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2017-05-30T04:56:34.647

我最近创建了一个库，它使用注释为您生成那些类型转换样板代码。 [https://github.com/zeroarst/callbackfragment](https://github.com/zeroarst/callbackfragment)

这是一个例子。单击一个`TextView`on`DialogFragment`触发回调`MainActivity`，`onTextClicked`然后获取`MyFagment`要与之交互的实例。

```
public class MainActivity extends AppCompatActivity implements MyFragment.FragmentCallback, MyDialogFragment.DialogListener {

private static final String MY_FRAGM = "MY_FRAGMENT";
private static final String MY_DIALOG_FRAGM = "MY_DIALOG_FRAGMENT";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    getSupportFragmentManager().beginTransaction()
        .add(R.id.lo_fragm_container, MyFragmentCallbackable.create(), MY_FRAGM)
        .commit();

    findViewById(R.id.bt).setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            MyDialogFragmentCallbackable.create().show(getSupportFragmentManager(), MY_DIALOG_FRAGM);
        }
    });
}

Toast mToast;

@Override
public void onClickButton(MyFragment fragment) {
    if (mToast != null)
        mToast.cancel();
    mToast = Toast.makeText(this, "Callback from " + fragment.getTag() + " to " + this.getClass().getSimpleName(), Toast.LENGTH_SHORT);
    mToast.show();
}

@Override
public void onTextClicked(MyDialogFragment fragment) {
    MyFragment myFragm = (MyFragment) getSupportFragmentManager().findFragmentByTag(MY_FRAGM);
    if (myFragm != null) {
        myFragm.updateText("Callback from " + fragment.getTag() + " to " + myFragm.getTag());
    }
} 
```

}

# java - 在 Java 中将异步 Web 服务调用设为同步

> ID：13700803
> 
> 赞同：0
> 
> 时间：2012-12-04T10:26:52.190
> 
> 标签：java, web-services, rest, asynchronous, synchronous

我是Web服务开发的初学者。我们正在使用 Spring 3 在 Java 中构建 REST Web 应用程序。

我们正在使用的 Web 服务具有异步登录方法。我们为他们提供了一个回调侦听器 URL，他们的服务在其中回发响应。

因此，当我们发送登录请求时，我们会收到一个空白响应作为确认。服务会在侦听器 URL 上发送包含实际数据的响应。

请帮忙，我应该如何设计/实现将登录服务调用为同步调用？谢谢。

**编辑：** 下面是回发消息的侦听器/控制器，它提取令牌并设置为对象。

```
@Controller
public class PostbackController {

    @Autowried
    public LoginResponse loginRS;

    @RequestMapping(value = "/callbacklistener", method = RequestMethod.POST)
    @ResponseBody
    public String postbackHandler(@RequestParam("postback") String requestMessage) {
        //We extract the token value from requestMessage.
        String token = requestMessage;
        loginRS.setToken(token);
        return "<Confirm/>";
    }
} 
```

下面是一个调用登录服务并等待 10 秒的线程。它每 2 秒检查一次对象的状态。

```
public class LoginService extends Thread {

    @Autowried
    public LoginResponse loginRS;

    public LoginService() {
        this.start();
    }

    @Override
    public void run() {
        try {
            System.out.println("Thread Start.");
            this.login();
            System.out.println("Thread Complete.");
        } catch (InterruptedException e) {}
    }

    public LoginResponse login() {
        String loginXML = "";
        String response = "";//by calling REST web service using RESTtemplate we get blank response.

        for(i=0; i < 6; i++) {
            if(loginRS.getToken().length > 0))  {
                //Got the response exit from thread
                break;
            }
            else {
                //Wait for 2 second
                Thread.sleep(2000)
            }
        }
        return loginRS;
    }
} 
```

如果您需要更多信息，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:37:22.990

一些伪代码给你的想法

```
Login request sender Thread{

    acknowledgement = sendLoginRequest

    sleep() or wait on some lock

}

ListenerThread{

    response received = listenForResponse

    lock.notifyAll() or interrupt Login Thread

} 
```

这样做会使其同步。

**更新：**

```
public class PostbackController {

        @Autowried
        public LoginResponse loginRS;
        //instance 1 injected by Spring where you set the token
}

public class LoginService extends Thread {

    @Autowried
    public LoginResponse loginRS;

    //a NEW instance will be created here also by Spring which will not have that token you set, as this is a new instance. So Thread will keep sleeping always.
} 
```

制作`PostbackController`嵌套类`LoginService`并使用相同的实例`PostbackController`

# matlab - Matlab中如何去除特殊区域的噪声

> ID：13700813
> 
> 赞同：1
> 
> 时间：2012-12-04T10:27:29.600
> 
> 标签：matlab, filtering, noise

我有一张尺寸为 180x220 的图像，其中包含该区域中的一些噪声，例如 (145:180,1:65)。

我的问题是如何在不影响图像其他部分的情况下使用 Matlab 去除该区域的噪声。

非常感谢你。

编辑：我想从下图中去除区域 (1:146,1:25) 和 (1:15,25,174) 中的噪声：

![在此处输入图像描述](../Images/2d8538d4ed19d837774165fdc3dd706c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:35:38.593

一般来说，这会像

```
% filter image in-place
img(145:180, 1:65) = medfilt2(img(145:180, 1:65)); 
```

请注意，大多数过滤器需要感兴趣区域的某些上下文来进行适当的插值/平均/等，因此您可能希望采用这种方法：

```
% Note: increase ROI by 10 on each side
offset = 10;
img_tmp = img(145-offset : 180+offset, 1 : 65+offset); 

% apply filter
img_tmp = medfilt2(img_tmp, [additional parameters]);

% put filtered image back in its proper place
img(145:180, 1:65) = img_tmp(offset:end-offset+1, 1:end-offset+1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:36:14.920

```
img = double(imread('img.jpg'));
h = fspecial('gaussian', hsize, sigma); % decide how to filter the image
img_filt = imfilter(img, h, 'replicate'); 
```

现在，仅在噪声区域使用过滤后的图像

```
img(145:180,1:65,:) = img_filt(145:180,1:65,:); 
```

**编辑：**在您发布图像后，我想您只想用香草色替换噪声区域？如果是这样，则执行以下操作（假设为灰色图像）：

```
med_pixel = median(img(:)); % detect the dominant color
img(1:146,1:25) = med_pixel;
img(1:15,25,174) = med_pixel; 
```

... 等等

# c# - Active Directory OU 树到 jqTree

> ID：13700814
> 
> 赞同：1
> 
> 时间：2012-12-04T10:27:32.767
> 
> 标签：c#, json, active-directory, jqtree

我需要从 Active Directory OU创建一个有效的[jqTree JSON 结构。](http://mbraak.github.com/jqTree/)我正在使用递归方法（InfoNode）对此进行测试，但我无法得到它。

生成的 json 进入字符串 json。要处理的第一个节点是具有默认域根的 DirectoryEntry 父节点。递归方法 (InfoNode) 获取当前子节点，按“OU”过滤并创建 JSON 属性“标签”和“路径”。之前检查此节点是否有更多子节点来写入当前 JSON 项的末尾。最后，如果有更多的孩子，再次运行方法（InfoNode）：

```
public static DirectoryEntry root = new DirectoryEntry("LDAP://RootDSE");
public string dom = (string)root.Properties["defaultNamingContext"].Value;

public string json = "";

public Form1()
{
    InitializeComponent();
    DirectoryEntry parent = new DirectoryEntry("LDAP://" + dom);
    InfoNode(parent);
    System.IO.File.WriteAllText(@"json.txt", json);
}

void InfoNode(DirectoryEntry node)
{
    string[] arr = node.Name.Split('=');

    if (arr[0] == "OU")
    {
        json += "'children':[{'label':'" + arr[1] + "','path':'" + node.Path + "'";

        if (nodo.Children == null)
        {
            json += "}]";
        }
        else
        {
            json += ",";
        }              
    }

    if (node.Children != null)
    {
        foreach (DirectoryEntry child in node.Children)
        {
            InfoNode(child);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:12:31.113

您应该提供有关代码失败的更多详细信息。

我会试一试:-)

您可以尝试修改您的代码，如下所示。不是最佳的（在拆分之前使用startswith，更多的string.Format，在递归调用该方法之前使用startswith测试孩子会更好），但我想它应该可以工作。

当您在树中进行时，您可能需要从 ldap 源加载子项。

```
public string json = "";

public Form1()
{
    InitializeComponent();
    DirectoryEntry parent = new DirectoryEntry("LDAP://" + dom);
    json = InfoNode(parent);
    System.IO.File.WriteAllText(@"json.txt", json);
}

public string InfoNode(DirectoryEntry node)
{
    string[] arr = node.Name.Split('=');
    var result = string.Empty;

    if (arr[0].Equals("ou",StringComparison.InvariantCultureIgnoreCase))
    {
        result = "'{'label':'" + arr[1] + "','path':'" + node.Path + "'";

        if (node.Children.Cast<DirectoryEntry>().Any())
        {
            result += String.Format(", children:[{0}]",
                                    String.Join(",\n ",
                                                node.Children.Cast<DirectoryEntry>()
                                                    .Select(InfoNode).Where(s=>!string.IsNullOrEmpty(s))
                                                    .ToArray()));
        }
        result += "}";
    }
    return result;
} 
```

# xml - 在 SOAP 中发送多个条目

> ID：13700815
> 
> 赞同：0
> 
> 时间：2012-12-04T10:27:35.887
> 
> 标签：xml, web-services, soap, nsurlconnection

我正在创建一个使用 XML 与 SOAP Web 服务通信的应用程序。我需要一次发送多个条目。SOAP 页面说我需要使用这样的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <InsertArrivaliOS xmlns="http://microsoft.com/webservices/">
      <GuestID>long</GuestID>
      <Key>string</Key>
      <NumberOfGuests>int</NumberOfGuests>
      <Table>string</Table>
      <Note>string</Note>
      <ArrivalDate>dateTime</ArrivalDate>
    </InsertArrivaliOS>
  </soap:Body>
</soap:Envelope> 
```

我想发送 2 个 InsertArrivaliOS 节点。有可能做这样的事情吗？

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <InsertArrivaliOS xmlns="http://microsoft.com/webservices/">
      <GuestID>long</GuestID>
      <Key>string</Key>
      <NumberOfGuests>int</NumberOfGuests>
      <Table>string</Table>
      <Note>string</Note>
      <ArrivalDate>dateTime</ArrivalDate>
    </InsertArrivaliOS>
<InsertArrivaliOS xmlns="http://microsoft.com/webservices/">
      <GuestID>long</GuestID>
      <Key>string</Key>
      <NumberOfGuests>int</NumberOfGuests>
      <Table>string</Table>
      <Note>string</Note>
      <ArrivalDate>dateTime</ArrivalDate>
    </InsertArrivaliOS>
  </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:32:37.843

您可以将 InsertArrivaliOS 包装在带有列表的其他元素中。定义架构时，您可以添加另一种类型，然后将其作为无界 InsertArrivaliOS 元素的序列。所以你的 xml 代码看起来像这样：

```
 <soap:Body>
   <listArrival xmlns="http://example.org">
    <InsertArrivaliOS xmlns="http://microsoft.com/webservices/">
      <GuestID>long</GuestID>
      <Key>string</Key>
      <NumberOfGuests>int</NumberOfGuests>
      <Table>string</Table>
      <Note>string</Note>
      <ArrivalDate>dateTime</ArrivalDate>
    </InsertArrivaliOS>
<InsertArrivaliOS xmlns="http://microsoft.com/webservices/">
      <GuestID>long</GuestID>
      <Key>string</Key>
      <NumberOfGuests>int</NumberOfGuests>
      <Table>string</Table>
      <Note>string</Note>
      <ArrivalDate>dateTime</ArrivalDate>
    </InsertArrivaliOS> 
   </listArrival>
  </soap:Body> 
```

看到这个想法了吗？还是您无法修改架构？

# bison - Bison 语句结构中的 OR 条件

> ID：13700816
> 
> 赞同：1
> 
> 时间：2012-12-04T10:27:43.967
> 
> 标签：bison, flex-lexer

我有以下野牛文件-

```
%union
{
    int integer_value;
    double double_value;
    char* string_value;
}

%token <integer_value> INTEGER
%token <string_value> VAR
%token <string_value> INTEGER_DECLARATION
%token <double_value> DOUBLE
%token <string_value> DOUBLE_DECLARATION

%%

program:
        program statement '\n'
        |
        ;

statement:
        | INTEGER_DECLARATION VAR '=' INTEGER {//implementation} 

        | INTEGER_DECLARATION VAR '='  DOUBLE {//implementation as above}                            

%% 
```

由于两者的实现`INTEGER_DECLARATION VAR '=' INTEGER`是`INTEGER_DECLARATION VAR '=' DOUBLE`相同的，是否可以在语句结构中设置`OR`条件 bw`INTEGER`和？`DOUBLE`

我试过`INTEGER_DECLARATION VAR '=' INTEGER|DOUBLE`了，但它提示 `warning: rule useless in parser due to conflicts: statement: DOUBLE`并且确实引用`DOUBLE`被忽略了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:54:15.847

您发布的主要代码片段尽可能简洁。`statement: INTEGER_DECLARATION VAR '=' INTEGER|DOUBLE`试图说 a`statement`只能由a 组成`DOUBLE`。

你可以这样写：

```
program:
      program statement '\n'
    |
    ;

statement:
      decl_part INTEGER {//implementation uses info in $1} 
    | decl_part DOUBLE {//implementation as above}                            
    ;

decl_part:
      INTEGER_DECLARATION VAR '=' {//partial implementation passes some info via $$}
    ; 
```

但这是否会改善您已经拥有的东西，这是值得商榷的。

或者你可以写：

```
program:
      program statement '\n'
    |
    ;

statement:
      INTEGER_DECLARATION VAR '=' number
    ;

number:
      INTEGER
    | DOUBLE
    ; 
```

当您以后想要扩展您的语言时，这种技术具有优势，例如，支持十六进制常量。

另一个注意事项：我认为您不希望在您的作品中使用第一个交替符号`statement`. 你拥有它的方式，两者都`program`可以`statement`是 epsilon（空），我相信这会导致解析器冲突。

# mule - Mule JDBC 休息服务

> ID：13700818
> 
> 赞同：0
> 
> 时间：2012-12-04T10:27:48.947
> 
> 标签：mule

我需要从数据库中获取数据并将内容公开为 Restful 服务，我找不到任何有用的文档。

任何人都可以分享文件或链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:18:18.267

Take a look at [http://www.mulesoft.org/extensions/rest-module](http://www.mulesoft.org/extensions/rest-module)

You can combine it with JDBC endpoints to fetch data from the DB.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-23T12:50:28.350

一个简单的例子是：-

```
<flow name="testFlow">
        <http:listener config-ref="HTTP_InboundRequest"  path="/test" doc:name="HTTP"/>
        <set-variable doc:name="Variable" value="23" variableName="eventId"/>
        <db:select config-ref="Oracle_Configuration" doc:name="Database">
            <db:parameterized-query><![CDATA[select ID, NAME where EVENT_ID=#[flowVars['eventId']]]]></db:parameterized-query>
        </db:select>
        <set-payload value="{&quot;status&quot;:&quot;Success&quot;}" doc:name="Set Payload"/>
    </flow> 
```

您可以在其中根据您的要求修改代码并将数据库值显示为 JSON 响应。所以，如果你部署一个类似这样的服务，它会暴露为一个 Rest api

# java - java/swing: gui 冻结，没有线程挂起

> ID：13700820
> 
> 赞同：1
> 
> 时间：2012-12-04T10:27:52.403
> 
> 标签：java, multithreading, swing, user-interface, freeze

首先它是一个巨大的应用程序，问题涉及很多行，所以我不能真正附加任何代码。

在主要包括清除和重新添加元素到某个集合的更改之后，应用程序的摆动 GUI 冻结。在执行添加的代码时不会发生冻结，但会在一段时间后发生。奇怪的是没有线程被挂起。

我的问题是无限循环是否是这个问题的唯一解释。我觉得不太可能是这种情况，因为添加的代码完成后没有问题。可能存在一些不同步的集合访问问题，但我不认为它会导致这种情况。由于没有挂起线程，因此看起来我们也没有处理来自同步问题的死锁。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:26:31.590

到头来还是**僵局**。

我的团队负责人告诉我，等待监视器（在“同步”上）的线程在 Eclipse 中没有显示为挂起。他找到了两个线程并要求暂停它们。然后我看到他们正在等待对方释放被占用的监视器。

死锁不是我输入的代码的错。只是我所做的更改在其他地方显示了错误的同步。

*谢谢大家对我的帮助，我真的很感激。这是我关于 stackoverflow 的第一个问题，我很惊讶你的反应速度有多快。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:32:37.690

庞大的应用程序 + 操作集合 -> 垃圾收集器开始了？

SO的一些相关阅读： [增加maxpermsize和最大堆大小的副作用](https://stackoverflow.com/questions/6902135)

还有关于 GC 调优的 Oracle 文章： [http ://www.oracle.com/technetwork/java/gc-tuning-5-138395.html](http://www.oracle.com/technetwork/java/gc-tuning-5-138395.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:34:46.800

这可能是因为在执行事件的摆动中的事件调度程序线程中等待（由于一些繁重的处理）。理想情况下，您应该在单独的线程中执行任何资源密集型任务，以便 UI 不会冻结

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:29:20.970

您可能已经知道这一点，但为了它，我想说，如果您没有在应用程序中长时间运行的进程中使用 Swing 工作程序，那么这将是使用它的理想情况。

# php - Facebook 应用程序表单集成

> ID：13700821
> 
> 赞同：0
> 
> 时间：2012-12-04T10:28:07.493
> 
> 标签：php, facebook, forms

我有一个简单的 php 邮件脚本，我经常在网站上使用，我正在尝试将它集成到 facebook 应用程序中。该应用程序像往常一样通过 Heroku 运行并且设置正确。

然而，表格不起作用，它会通过所有动作，但实际上并没有发送电子邮件。

我想知道是否有人可以对此有所了解？本质上，它是 Facebook 页面标签应用程序的竞赛答案表。我应该使用 fb:form 还是什么？

提前致谢

凯夫

表格的 HTML

```
<form action="mailer.php" id="form" method="post" name="form">
<div class="field form-inline">
<label class="contact-info" for="txtName">Name*</label> <input class=
"txt" id="name" name="name" type="text" value="">
</div>

<div class="field form-inline">
<label class="contact-info" for="txtEmail">Email*</label> <input class=
"txt" id="email" name="email" type="text" value="">
</div><br>
<br>
<br>
<br>

<div class="submit">
<input class="submit" name="submit" type="submit" value="Submit Form">
</div>
</form> 
```

PHP 表格

```
<?php
$name    = $_POST['name'];
$email   = $_POST['email'];

$form_message = "Name: $name \nEmail: $email";

// echo for form completion

$myString = "Thank you for filling out our feedback form.";
echo $myString;

//header( "Location: http://www.google.com");//

mail("kevinhowbrook@me.com", "Email Subject", $form_message, "From: $email" );

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:59:55.870

只要您可以调试（并且显示回显的文本），我猜这是邮件功能本身的问题。如果您不将其与其他信息一起使用，任何垃圾邮件过滤器都会阻止它。

我通过快速谷歌搜索找到了一些页面：

[http://www.transio.com/content/how-pass-spam-filters-php-mail](http://www.transio.com/content/how-pass-spam-filters-php-mail)

[http://www.velvetblues.com/web-development-blog/avoid-spam-filters-with-php-mail-emails/](http://www.velvetblues.com/web-development-blog/avoid-spam-filters-with-php-mail-emails/)

您还可以使用 PHP 邮件程序类，如下所示：

[http://code.google.com/a/apache-extras.org/p/phpmailer/](http://code.google.com/a/apache-extras.org/p/phpmailer/)

# hibernate - 获取特定月份和年份的记录

> ID：13700822
> 
> 赞同：0
> 
> 时间：2012-12-04T10:28:07.603
> 
> 标签：hibernate, date, hql

我需要使用 Hibernate 从特定月份和年份中提取记录。

我的代码：

```
if (!Converter.isStringNullOrEmpty(month ) && !Converter.isStringNullOrEmpty(year) ) {
    restrictionAnno = Restrictions.eq("year(dtControllo)",month );
    restrictionMese = Restrictions.eq("month(dtControllo)",year);
} 
```

这会产生一个休眠异常：

```
could not resolve property: month(dtControllo) of: it.iet.ortles.hbean.TableauPresenza 
```

如何解决此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:04:09.367

There are two thing I want to mention:

first: year and month variables should cross

```
restrictionAnno = Restrictions.eq("year(dtControllo)",year);
restrictionMese = Restrictions.eq("month(dtControllo)",month); 
```

second: you could try "lt" and "gt" methods for catching records in between.

```
restrictionAnno = Restrictions.lt(field, monthEndDate);
restrictionMese = Restrictions.gt(field, monthStartDate); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:32:22.573

我过去处理这个问题的一种方法是通过在我的数据库中创建一个视图来将休眠完全排除在外。因此，如果我有一个包含 、 、 列的表，`Event`我将使用我的 RDBMS 创建一个视图，该视图从. `EVENT_ID``START_DATE``NAME``START_DATE`

该视图看起来像：

**V_EVENT**

> EVENT_ID、START_DATE、NAME、START_MONTH、START_YEAR

拥有此视图后，您可以创建实体并运行使用视图中的两个附加列`START_YEAR`和`START_MONTH`. 这简化了在 Hibernate/ORM 中创建 where 子句语句。

# active-directory - 通用 ldap 嵌套组实现

> ID：13700823
> 
> 赞同：0
> 
> 时间：2012-12-04T10:28:08.743
> 
> 标签：active-directory, ldap, nested, openldap, ldap-query

我需要为通用 AD 服务实现嵌套组成员身份。以前，我使用的是特定的搜索过滤器（“member:1.2.840.113556.1.4.1941:=")，通过它使用单个搜索请求，我能够获取该用户所属的所有组成员身份. 但是，看起来搜索过滤器似乎只适用于 MS AD 服务器，而不适用于通用 AD 服务器。

那么，是否有人知道我们可以在搜索请求中发送的任何特定搜索过滤器（适用于所有 AD 服务器），通过它我可以通过单个搜索查询获得嵌套组成员资格。

提前感谢您对此的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:32:31.133

“member:1.2.840.113556.1.4.1941”是 LDAP_MATCHING_RULE_IN_CHAIN，其他 LDAP 供应商很可能不会实现。 [LDAP 维基](http://ldapwiki.willeke.com/wiki/1.2.840.113556.1.4.1941)

编辑：

如果您想重新分配组，您可以执行以下操作：

使用过滤器：

```
 (&(objectCategory=organizationalPerson)(objectClass=User)(sAMAccountName=YOURUSER)

    get "distinguishedName"  (this is the user's distinguishedName)
    get "memberOf"  (this is a collection of distinguishedNames of the groups the user is a member of (minus the primary group in MS Active Directory, which should be "Domain Users"))

    Foreach memberOf in the collection: (This is the first level, so there is no need to check if he is there, because he is.)

    (&(objectCategory=group)(distinguishedName=THISMEMBEROF))

    get "member" (this is a collection of distinguishedNames of group members)

    Foreach memberOf in the collection: 

    This is the second level (the groups within the groups), so first check if the users distinguishedName is present.
    (&(objectCategory=group)(distinguishedName=THISMEMBEROF))

    get "member" (this is a collection of distinguishedNames of group members)

Foreach memberOf in the collection: 

This is the third level (the groups within the groups), so first check if the users distinguishedName is present.
(&(objectCategory=group)(distinguishedName=THISMEMBEROF))

get "member" (this is a collection of distinguishedNames of group members)

etc. 
```

# file - 错误：未捕获的 Ext.JSON.decode()：您正在尝试解码无效的 JSON 字符串

> ID：13700824
> 
> 赞同：2
> 
> 时间：2012-12-04T10:28:08.913
> 
> 标签：file, codeigniter, extjs, upload, compiler-errors

我的代码有问题。我正在尝试使用 ExtJS 和 Codeigniter 制作上传文件形式。

下面是我的代码，

```
 Ext.require([
    'Ext.form.field.File',
    'Ext.form.Panel',
    'Ext.window.MessageBox'
]);

Ext.onReady(function(){

    Ext.create('Ext.form.Panel', {
        title: 'Upload a Photo',
        width: 400,
        bodyPadding: 10,
        frame: true,
        renderTo: Ext.getBody(),
        items: [{
            xtype: 'filefield',
            name: 'photo',
            fieldLabel: 'Photo',
            labelWidth: 50,
            msgTarget: 'side',
            allowBlank: false,
            anchor: '100%',
            buttonText: 'Select Photo...'
        }],

        buttons: [{
            text: 'Upload',
            handler: function() {
                var form = this.up('form').getForm();
                if(form.isValid()){
                    form.submit({
                        url: '../upload',
                        waitMsg: 'Uploading your photo...',
                        success: function(fp, o) {
                            Ext.Msg.alert('Success', 'Your photo "' + o.result.file + '" has been uploaded.');
                            Ext.Ajax.request({
                                url: o.data.url,
                                method: "GET",
                                success: function(response, request) {
                                    // do whatever you need to with the generated HTML
                                    alert(response.responseText);
                                },
                                failure: function(response, request) {
                                    alert('failed');
                                }
                            });
                        }
                    });
                }
            }
        }]
    });

}); 
```

但我的控制台输出显示错误，如“Uncaught Ext.JSON.decode(): You're trying to decode an invalid JSON String”。所以，如果有人有同样的问题或正在解决这个问题，请告诉我..

谢谢！！！

**结论：** 哦，我明白了。实际上我使用 Codeigniter 作为我的框架。如果我将 json 返回到此 url，此问题将得到解决。

```
url: '../upload',
waitMsg: 'Uploading your photo...',
success: function(fp, o) {
Ext.Msg.alert('Success', 'Your photo "' + o.result.file + '" has been uploaded.');
Ext.Ajax.request({
   url: o.data.url,
   method: "GET",
   success: function(response, request) {
      // do whatever you need to with the generated HTML
      alert(response.responseText);
   },
   failure: function(response, request) {
      alert('failed');
   }
   }); 
```

所以，我像这样创建我的控制器（作为示例）..

```
public function upload(){
        echo json_encode(1);
    } 
```

并且我的代码没有更多错误结果..谢谢Broncha！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:42:26.210

您的 AJAX 响应不是纯 JSON。尝试`response`在控制台中输出

```
success: function(response, request) {
  // do whatever you need to with the generated HTML
  console.log(response);
}, 
```

并检查响应是否为纯 JSON

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:14:29.220

有类似的问题，但我实际上可以访问服务器代码进行更改。

ExtJS4

```
Ext.define('MyApp.store.Thing', {
extend : 'Ext.data.Store',
model : 'MyApp.model.Thing',
autoLoad : true,

proxy : {
    type : 'jsonp', // Needs to be used because we are going cross domain
    url : 'http://remotehost:8081/Servlet',
    reader : {
        type : 'json',
        totalProperty : 'totalCount',
        root : items,
        successProperty : 'success',
    },
} }); 
```

Java 小服务程序

```
...
String cb = request.getParameter("callback");
response.setContentType("application/x-javascript; charset=utf-8");
usersObject.put("totalCount", usersCount);
usersObject.put("success", true);
usersObject.put("items", itemsArray);
response.getWriter().write(cb + '(' + itemsObject.toString() + ')');
... 
```

这是关键：

response.getWriter().write( **cb + '(' + itemsObject.toString() + ')'** );

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T07:34:45.923

我的问题是一样的，我在谷歌上搜索只知道这个问题的 [解决方案 URL 解决方案在这里](http://www.sencha.com/forum/showthread.php?248357-Uncaught-Ext.JSON.decode%28%29-You-re-trying-to-decode-an-invalid-JSON-String)

我认为这是使用 Sencha Free 和 Purchase 的区别。在使用`Form.load(...)`JSON 对象映射到表单的所有文本字段时，您不仅如实编写了 json 字符串，而且还保持这种格式：

```
{success:true,data:{... json string object ...}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-19T10:04:40.717

```
public class UploadHelper {
    /**
     * @param responseContext
     * @throws IOException
     */
    public static void writeHtmlResponse(String responseContext) throws IOException {
        HttpServletResponse response = ServletActionContext.getResponse();
        response.setCharacterEncoding("utf-8");
        response.setContentType("text/html");
        Writer writer = ServletActionContext.getResponse().getWriter();
        StringBuffer sb = new StringBuffer();
        sb.append("<html>\n");
        sb.append("\n<pre>");
        sb.append(responseContext);
        sb.append("</pre>\n");
        sb.append("<script type='text/javascript'> \n window.name='").append(responseContext).append("';").append("</script>");
        sb.append("\n</html>");
        writer.write(sb.toString());
        writer.close();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-05T11:12:19.543

我在 Struts 2 下遇到了这个错误。

我所要做的就是在 struts.xml 中使用以下内容：

```
<result name="success" type="stream">
    <param name="contentType">application/json</param>
    <param name="inputName">someBeanAttribute</param>
</result> 
```

所以，基本上你需要`application/json`在你的应用程序中指定某个地方。

# php - 使用 GD 的 PNG 文件中的损坏图像

> ID：13700830
> 
> 赞同：0
> 
> 时间：2012-12-04T10:28:35.810
> 
> 标签：php, png, gd

我编写了一个脚本来上传、缩放、重新采样和保存图像以用作我网站上的头像。这适用于 JPG 和 GIF 文件，但是当我尝试上传 PNG 文件时，它只会返回一个损坏的图像文件。我在这里搜索了答案，但没有找到任何有帮助的东西。

*   是的，我知道 MIME 类型是正确的。
*   是的，我知道文件完好无损
*   是的，我知道这是在“选择”案例“png”
*   不，没有输出错误或警告。

这是到目前为止我得到的代码，或者至少是出现故障的代码：

```
if(@$_FILES['newAvatar']['name'] != '') {
    $filename = 'profpics/' . $_SESSION['id'] . '__' . date("Y_m_d__H_i_s") . '__' . $_FILES['newAvatar']['name'];
    move_uploaded_file($_FILES['newAvatar']['tmp_name'], $filename);

    // Kontrollera filändelse för att gd ska veta vilken filtyp att konvertera från.
    switch(end( explode( ".", strtolower($filename) ) )):
        case "jpg":
            $image = imagecreatefromjpeg($filename);
            break;
        case "jpeg":
            $image = imagecreatefromjpeg($filename);
            break;
        case "gif":
            $image = imagecreatefromgif($filename);
            break;
        case "png":
            $image = imagecreatefrompng($filename);
            break;
        default:
            $image = imagecreatefromjpeg($filename);
    endswitch;

    // Max slutliga dimensioner
    $max_width = 200;
    $max_height = 270;

    // Nuvarande dimensioner
    $old_width = imagesx($image);
    $old_height = imagesy($image);

    // Beräkna skala
    $scale = min($max_width/$old_width, $max_height/$old_height);

    // Sätt nya dimensioner utifrån den beräknade skalan
    $new_width = ceil($scale*$old_width);
    $new_height = ceil($scale*$old_height);

    // Skapa tomt bildobjekt
    $new = imagecreatetruecolor($new_width, $new_height);

    // Förminska (troligtvis, annars förstora, men det lär väl aldrig hända)
    imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $old_width, $old_height);

    // Spara

    // Kontrollera filändelse för att gd ska veta vilken filtyp att spara som.
    switch(end( explode( ".", strtolower($filename) ) )):
        case "jpg":
            imagejpeg($new, $filename, 60);
            break;
        case "jpeg":
            imagejpeg($new, $filename, 60);
            break;
        case "gif":
            imagegif($new, $filename, 60);
            break;
        case "png":
            imagepng($new, $filename, 60);
            break;
        default:
            imagejpeg($new, $filename, 60);
            break;
    endswitch;

    // Förstör objekt
    imagedestroy($image);
    imagedestroy($new);

    $sql = "UPDATE tblprofiles SET strAvatarPath = '" . $filename . "' WHERE userId = " . $_SESSION['id'];
    mysql_query($sql) or die(mysql_error() . "<br />" . $sql);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:34:52.353

最大可能的质量`imagejpg()`是 100，但`imagepng()`只有 9，你有 60，也许你混淆了 imagepng 和 imagejpg。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:34:18.660

解决方案很简单。我刚刚错过了 imagepng() 中的质量参数不应该是百分比，而是 0 到 9 之间的数字。

```
imagepng($new, $filename, 6); 
```

# java - 使用 liferay 创建工作流

> ID：13700831
> 
> 赞同：0
> 
> 时间：2012-12-04T10:28:36.897
> 
> 标签：java, workflow, liferay-6

我想在 liferay 中创建一个自定义的多审批工作流程。请给我一些想法。

*   如何使用我的 portlet 创建工作流？

*   请给我步骤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T13:17:28.697

检查下面的链接，你需要 Liferay 开发工作室（IDE）

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/lp-6-1-dgen08-designing-workflows-with-kaleo-designer-for-java-0](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/lp-6-1-dgen08-designing-workflows-with-kaleo-designer-for-java-0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T19:21:48.313

我更喜欢 Aperte Workflow 的简单性。

这是描述如何将 Aperte 集成到 liferay 中的链接， [http: //rupalchatterjee.wordpress.com/2013/07/03/integrate-aperte-workflow-in-liferay-6-1/](http://rupalchatterjee.wordpress.com/2013/07/03/integrate-aperte-workflow-in-liferay-6-1/)

这是显示如何在 Aperte 中创建简单工作流的链接， [https://github.com/bluesoft-rnd/aperte-workflow-core/wiki/Sample-process-with-Aperte-Modeler](https://github.com/bluesoft-rnd/aperte-workflow-core/wiki/Sample-process-with-Aperte-Modeler)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-18T11:27:29.063

你有 1.aperte 工作流 2.kaleo 工作流 3.BPMN2 activiti 工作流选项..

# asp.net - 使用 Response.Write 时如何设置浏览器

> ID：13700833
> 
> 赞同：0
> 
> 时间：2012-12-04T10:28:49.557
> 
> 标签：asp.net, xml, httpresponse, response.addheader

我的应用程序正在将 XML 写入文件，然后下载该文件（Response.Write），然后用户可以打开。

问题：无论我使用什么浏览器（Chrome、Firefox 等），下载的文件都会在 IE 中打开。我希望在创建它的浏览器中打开下载的文件。

```
 strXML = "<ROWSET></ROWSET>";
        Response.Clear();
        Response.Charset = "";
        Response.ContentType = "text/xml";
        Response.AddHeader("content-disposition", "attachment; filename=\"kupot.xml\"");
        Response.Write(strXML);
        Response.Flush();
        Response.End();
        Response.Close(); 
```

如果下载的文件是在例如 Chrome 中创建的，那么我应该怎么做

感谢所有帮助/想法。

谢谢

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:36:53.660

删除内容处置标头。这告诉浏览器您要将其作为原始文件下载。当然，这将由与您系统上的 XML 文件类型相关联的任何内容打开。

如果您只想将 XML 内容直接返回到浏览器，请使用：

```
 Response.ContentType = "text/xml";
    Response.Write(strXML);
    Response.Flush(); 
```

您也可能不需要执行`Clear`,`Charset`和.`End``Close`

# sql - 从多个相似结果中选择单个记录

> ID：13700836
> 
> 赞同：2
> 
> 时间：2012-12-04T10:28:56.043
> 
> 标签：sql, asp-classic, vbscript, views

```
SELECT     TOP (100) PERCENT dbo.vwLatestEquipment.equipServID, dbo.tblEquipInvoice.invoiceDateSent, dbo.tblEquipment.equipManafacturer, 
                  dbo.tblEquipInvoice.contractNumber, dbo.tblEquipment.equipmentID, dbo.tblEquipment.equipStatus, dbo.tbl_work_locations.work_location, 
                  dbo.vwLatestEquipment.calibDueDate
FROM         dbo.vwLatestEquipment INNER JOIN
                  dbo.tblEquipLocations ON dbo.vwLatestEquipment.locationID = dbo.tblEquipLocations.locationID INNER JOIN
                  dbo.tblEquipInvoice ON dbo.tblEquipLocations.invoiceID = dbo.tblEquipInvoice.invoiceID INNER JOIN
                  dbo.tblEquipment ON dbo.vwLatestEquipment.equipServID = dbo.tblEquipment.equipServID INNER JOIN
                  dbo.tbl_work_locations ON dbo.tblEquipInvoice.workLocationID = dbo.tbl_work_locations.work_id
GROUP BY dbo.tbl_work_locations.work_location, dbo.vwLatestEquipment.equipServID, dbo.tblEquipInvoice.invoiceDateSent, dbo.tblEquipment.equipManafacturer, 
                  dbo.tblEquipInvoice.contractNumber, dbo.tblEquipment.equipmentID,       dbo.tblEquipment.equipStatus, dbo.tbl_work_locations.work_location, 
                  dbo.vwLatestEquipment.calibDueDate
ORDER BY dbo.vwLatestEquipment.equipServID 
```

这是我的继任者传给我的，上面的视图可以正常工作，除了它为设备ID的每个项目返回calibDateDue的所有值我想要的是它返回每个项目的最新calibDueDate设备 (equipmentID) 今天任何帮助都将不胜感激，因为我很受煎熬，无法取得太大进展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:33:45.167

> 我想要的是它为每件设备（设备ID）返回最新的calibDueDate。

由于您使用的是`TOP (100) PERCENT`，我将假设您使用的是 SQL Server。然后你可以使用排名功能：

```
ROW_NUMBER() OVER(PARTITION BY equipmentID
                  ORDER BY calibDueDate DESC) 
```

然后只选择 rank = 1 的行，如下所示：

```
;WITH CTE 
AS
(
    SELECT 
      dbo.vwLatestEquipment.equipServID, 
      dbo.tblEquipInvoice.invoiceDateSent, 
      dbo.tblEquipment.equipManafacturer, 
      dbo.tblEquipInvoice.contractNumber, 
      dbo.tblEquipment.equipmentID, 
      dbo.tblEquipment.equipStatus, 
      dbo.tbl_work_locations.work_location, 
      dbo.vwLatestEquipment.calibDueDate,
      ROW_NUMBER() OVER(PARTITION BY equipmentID 
                        ORDER BY calibDueDate DESC) row_num
    FROM dbo.vwLatestEquipment 
    INNER JOIN dbo.tblEquipLocations 
            ON dbo.vwLatestEquipment.locationID=dbo.tblEquipLocations.locationID 
    INNER JOIN dbo.tblEquipInvoice
            ON dbo.tblEquipLocations.invoiceID=dbo.tblEquipInvoice.invoiceID 
    INNER JOIN dbo.tblEquipment 
            ON dbo.vwLatestEquipment.equipServID=dbo.tblEquipment.equipServID
    INNER JOIN dbo.tbl_work_locations 
            ON dbo.tblEquipInvoice.workLocationID=dbo.tbl_work_locations.work_id
) 
SELECT TOP (100) PERCENT *
FROM CTE 
WHERE row_num = 1
ORDER BY equipServID; 
```

# json - json_decode 给出 NULL

> ID：13700838
> 
> 赞同：0
> 
> 时间：2012-12-04T10:29:05.637
> 
> 标签：json

可能是一个重复的问题，我想我知道它发生的原因，但无法解决。

我得到了一个传递给 php 的 json 字符串。在`console.log(JSON.stringify(obj));`我得到带有正常引号的正确字符串 - > "" 但是当我`error_log()`在 php 端做一个时，我得到了这个：

```
 {&quot;obj&quot;:{&quot;1063&quot;:{&quot;id&quot;:{&quot;article_id&quot;:&quot;1063&quot;,&quot;article_no_internal&quot;:&quot;400086&quot;,&quot;article_name_internal&quot;:&quot;Hotelbox Kurzurlaub&quot;},&quot;stk&quot;:&quot;100&quot;}}} 
```

它充满了“和我的`var_dump(json_decode($part_list_array, true));`回报`NULL`

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:32:35.477

看起来您的字符正在转换为 HTML 实体。试试这个：

```
var_dump(json_decode(html_entity_decode($part_list_array), true)); 
```

# javascript - 转义用户生成的内容 - 这是什么意思？

> ID：13700839
> 
> 赞同：0
> 
> 时间：2012-12-04T10:29:06.200
> 
> 标签：javascript, html, xss

我开始使用 Google 的[分享](https://developers.google.com/+/plugins/share/)按钮。我实际上正在使用共享链接，并且在文档中的某个地方它说：

> 注意：将 {URL} 替换为您要共享的页面的 URL。您必须正确转义可能出现在 {URL} 中的任何用户生成的内容

这是什么意思，我该如何逃避呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:39:13.217

转义某些内容意味着您将可能的有害字符转换为对计算机无害的内容进行翻译。

例如：

```
url = "<script>doSomeNastyStuff();</script>"; 
```

是可能有害的内容字符串。主要是因为您在应用程序的某处存储了普通的 javascript。

当逃避这个时，你基本上把它变成了根本无害的东西。

例子：

```
url = "\"\x3Cscript\x3EdoSomeNastyStuff();\x3C\x2Fscript\x3E\""; 
```

现在您已将有害脚本转换为普通字符，并且在打印或存储时您不必担心将有害脚本注入您的代码中。

转义字符的其他示例是这个

```
var sayHello = "Hello "world", as you like to call yourself"; 
```

现在，这个在 javascript 代码中未转义会产生错误，因为字符串已经终止并且单词 'world' 现在是一个变量，然后一个新的字符串开始。

这是相同的字符串转义以允许引号。

```
var sayHello = "Hello \"world\", as you like to call yourself"; 
```

这是完全有效的！

Dillen 的建议正是您解决问题的正确方法，但我认为解释转义方法也是合适的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:33:07.497

您必须对您的 URL 进行 URL 编码，您可以使用任何编程语言来执行此操作。有关更多信息，请参阅：[http ://www.permadi.com/tutorial/urlEncoding/](http://www.permadi.com/tutorial/urlEncoding/)

**Javascript**

```
var url = encodeURIComponent("http://example.com"); 
```

**PHP**

```
$url = urlencode("http://example.com"); 
```

**C＃**

```
var url = HttpUtility.UrlEncode("http://example.com"); 
```

# amazon-web-services - 通过 vpn 进行 Erlang 节点通信

> ID：13700841
> 
> 赞同：3
> 
> 时间：2012-12-04T10:29:13.673
> 
> 标签：amazon-web-services, erlang, openvpn

我正在尝试通过 vpn 通信 2 个 erlang 节点、服务器（在 Amazon AWS 上）和客户端。当我启动 erlang shell 时，我指定了节点名称和 cookie，但不起作用。通过 vpn 进行 erlang 通信有特殊注意事项？就我而言，有必要设置 tun0 设备吗？

这是路由结果：

目标网关 Genmask 标志 MSS 窗口 irtt Iface
0.0.0.0 10.8.0.5 128.0.0.0 UG 0 0 0 tun0
0.0.0.0 192.168.1.254 0.0.0.0 UG 0 0 0 wlan0
10.8.0.1 10.8.0.5 255.255.205.205 UGH55.255.205 05
10.8.0.5 0.0.0.0 2555.255.255.255 UH 0 0 0
隧道46.51.166.55 192.168.1.254 255.255.2554 255.255.255.255 ugh 0 0 0 0 wlan0
128.0.0.0 10.8.0.0 10.8.0.0 ug 0 0 0隧道
0.0.0.0 255.255 .0 0.0.0.0 255.255。 0.0 U 0 0 0 wlan0
192.168.1.0 0.0.0.0 255.255.255.0 U 0 0 0 wlan0

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T11:36:05.497

我解决了这个问题。
这是程序。

Erlang 服务器启动：
**erl -name server@10.8.0.1 -setcookie aStringCookie -kernel inet_dist_listen_min 9000 inet_dist_listen_max 9005**

10.8.0.1 是 VPN 服务器 IP

客户端：
**erl -name client@10.8.0.6 -setcookie aStringCookie -kernel inet_dist_listen_min 9000 inet_dist_listen_max 9005**

10.8.0.6 是 VPN 客户端 IP

在 AWS 安全组上，我打开了 4369 TCP/UDP 端口和用于初始化服务器的另一个端口。我还为 ping 测试打开了 ICMP 端口。
在 VPN 服务器配置文件中，您可以启用/禁用通过 VPN 重定向客户端默认网络网关的行
**push “redirect-gateway def1 bypass-dhcp”**。

我测试了一些 rpc，它们工作正常。

谢谢大家

乔瓦尼·C

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:24:32.217

我认为问题可能与erl的长名称和短名称有关。

你现在用sname了吗？

> -sname 名称
> 
> 使 Erlang 运行时系统成为一个分布式节点，类似于 -name，但节点名称 Name@Host 的主机名部分将是短名称，不是完全限定的。
> 
> 如果 DNS（域名系统）没有运行，这有时是运行分布式 Erlang 的唯一方法。使用 -sname 标志运行的节点和使用 -name 标志运行的节点之间不能进行通信，因为节点名称在分布式 Erlang 系统中必须是唯一的。

[http://www.erlang.org/doc/reference_manual/distributed.html](http://www.erlang.org/doc/reference_manual/distributed.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:32:04.597

防火墙设置都正确吗？`epmd`Erlang 需要在所有主机上运行的实例之间建立 tcp 连接。

尝试打开 TCP 端口 4369，或接受来自 tun0 的任何内容。

# c# - 限制 2 个单独列表的组合计数 - C#

> ID：13700842
> 
> 赞同：1
> 
> 时间：2012-12-04T10:29:15.713
> 
> 标签：c#, list, count

我在 Visual C# 项目中有以下类：

```
 public class Bus
    {
    private int BusNumber;
    public int busNumber
    {
        get { return BusNumber; }
        set { BusNumber = value; }
    }

    public List<CircularRoute> circularRoute = new List<CircularRoute>();
    public List<LongDistance> longDistance = new List<LongDistance>();
    } 
```

有什么方法可以限制两个列表合并的数量吗？我知道如果我使用多态列表，我可以使用 if 语句轻松完成此操作。不过，目前这对我来说不是一个选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:34:11.483

不，您不能限制列表的长度。

你可以做什么——使类型的公共属性`IEnumerable<T>`。以及从私人列表中添加或删除项目的方法。在这些方法上实现任何逻辑。

```
public class Bus
{
    private int busNumber;
    private List<CircularRoute> circularRoutes = new List<CircularRoute>();
    private List<LongDistance> longDistances = new List<LongDistance>(); 
    private const int MaxTotalRoutes = 10;

    public int BusNumber
    {
        get { return busNumber; }
        set { busNumber = value; }
    }

    public IEnumerable<CircularRoute> CircularRoutes
    {
        get { return circularRoutes; }
    }

    public IEnumerable<LongDistance> LongDistances
    {
        get { return longDistances; }
    }

    public void AddRoute(CircularRoute route)
    {
        if (circularRoutes.Count + longDistances.Count == MaxTotalRoutes)
        {
             // throw exception, do nothing, whatever 
             return;
        }

        circularRoutes.Add(route);
    }

    // add methods for adding and removing routes
} 
```

**顺便说一句**，在 C# 中，我们使用 PascalCase 来命名属性，使用驼峰命名法来命名字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T10:34:44.357

不要将列表公开 - 将它们保密并提供添加到每个列表的方法。

在这些方法中，您可以*检查*两个列表的计数，并且仅在它们低于您的阈值时添加。

如果您需要公开列表，我建议返回这些私有列表的*副本*（使用复制构造函数），这样就不会违反不变量。

```
private List<CircularRoute> circularRoute = new List<CircularRoute>();

public AddRoute(CircularRoute route)
{
  if(circularRoute.Count + longDistance.Count < threshold)
  {
    // add logic.
  }
  else
  {
    // Perhaps throw an exception
  }
}

public IEnumerable<CircularRoute> CircularRoutes
{
   get { return new List<CircularRoute>(circularRoute); }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:32:41.340

自己使用列表，不。如果底层实现是 ObservableCollection，您可能会这样做。

另一种方法是通过轮询。但是，这不会阻止您进入无效状态。只有当你进入它时它才会告诉你。

列表本身不支持请求的功能。

# windows - 如何在 c++ windows 7 中列出可用的监视器？

> ID：13700852
> 
> 赞同：3
> 
> 时间：2012-12-04T10:29:55.297
> 
> 标签：windows, winapi

我正在尝试使用 c++ 在 Windows 7 中获取附加的监视器，我使用的代码如下

```
void ListDisplayDevices()
{
    int index=0;
    DISPLAY_DEVICE dd;
    dd.cb = sizeof(DISPLAY_DEVICE);

    while (EnumDisplayDevices(NULL, index++, &dd, 0))
    {
        if (dd.StateFlags & DISPLAY_DEVICE_PRIMARY_DEVICE) printf("* ");
        printf("%s, %s\n", dd.DeviceName, dd.DeviceString);
    }
} 
```

但是这个函数的输出很简单

```
* \, A
\, A
\, A
\, R
\, R
\, R
\, V 
```

这里可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-26T12:59:03.927

她是我的尝试：

```
int main()
{
       DISPLAY_DEVICE dd;
       dd.cb = sizeof(dd);
       int deviceIndex = 0;
       // la première fois, on parcours les adapteurs video
       while (EnumDisplayDevices(0, deviceIndex, &dd, 0))
       {
             // deviceName contient ici le nom d'une carte video
             std::string deviceName = dd.DeviceName;
             int monitorIndex = 0;
             DISPLAY_DEVICE ddMonitor;
             ddMonitor.cb = sizeof(ddMonitor);
             // la deuxième fois on parcours les moniteurs pour chaque adapteur video
             while (EnumDisplayDevices(deviceName.c_str(), monitorIndex, &ddMonitor, 0))
             {
                    // ici Devicename contient le nom d'un moniteur
                    std::cout << "Nom moniteur = " << ddMonitor.DeviceName << std::endl;
                    ++ monitorIndex;
             }
             ++deviceIndex;
       }
       return 0;
} 
```

它在单显示器计算机上输出以下内容： `Nom moniteur = \\.\DISPLAY1\Monitor0`

# json - 春季 3.2RC1 中来自 JodaTime 的 jackson2 JSON ISO 8601 日期

> ID：13700853
> 
> 赞同：14
> 
> 时间：2012-12-04T10:30:01.600
> 
> 标签：json, spring, spring-mvc, jackson, jodatime

我正在使用 Spring MVC 3.2RC1 中的 REST API。

我正在获取一个带有 org.joda.time.DateTime 时间戳的 JPA 实体，并让 Spring 使用将其序列化为 JSON

```
@RequestMapping(value = "/foobar", method = RequestMethod.GET, produces = "application/json")
@ResponseBody 
```

在 Spring 中使用默认的 Jackson2 设置，因为我只添加了

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-annotations</artifactId>
    <version>2.1.1</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>2.1.1</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.1.1</version>
</dependency> 
```

到我的 POM 并让 Spring 自行连接。

控制器正在生成：

```
"created":{"year":2012,"dayOfMonth":30,"dayOfWeek":5,"era":1,"dayOfYear":335,"weekOfWeekyear":48,"weekyear":2012,"monthOfYear":11,"yearOfEra":2012,"yearOfCentury":12,"centuryOfEra":20,"millisOfSecond":39,"millisOfDay":52684039,"secondOfMinute":4,"secondOfDay":52684,"minuteOfHour":38,"minuteOfDay":878,"hourOfDay":14,"millis":1354282684039,"zone":{"uncachedZone":{"cachable":true,"fixed":false,"id":"Europe/Stockholm"},"fixed":false,"id":"Europe/Stockholm"},"chronology":{"zone":{"uncachedZone":{"cachable":true,"fixed":false,"id":"Europe/Stockholm"},"fixed":false,"id":"Europe/Stockholm"}},"afterNow":false,"beforeNow":true,"equalNow":false} 
```

但我希望它是 ISO8601 日期，例如 2007-11-16T20:14:06.3Z （或带有偏移量）。

我的猜测是我需要访问 ObjectMapper 并设置 mapper.enable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS); 但是如何在使用时访问 ObjectMapper

```
<mvc:annotation-driven /> 
```

PS 我使用 UserType 将对象持久化到带有 JPA/Hibernate4 的 PostgreSQL 以获得 JodaTime 支持。DS

**更新**

下面的配置解决了 java.util.Date 的问题，但 JodaTime 仍然没有骰子。

```
<annotation-driven>
    <message-converters>
        <beans:bean
            class="org.springframework.http.converter.StringHttpMessageConverter" />
        <beans:bean
            class="org.springframework.http.converter.ResourceHttpMessageConverter" />
        <beans:bean
            class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <beans:property name="objectMapper">
                <beans:bean
                    class="org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean"
                    p:indentOutput="true" p:simpleDateFormat="yyyy-MM-dd'T'HH:mm:ss.SSSZ">
                </beans:bean>
            </beans:property>
        </beans:bean>
    </message-converters>
</annotation-driven> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T19:22:43.473

或者，如果您更喜欢用 Java 进行配置，它可能如下所示：

```
@Configuration
@EnableWebMvc
public class RestConfig extends WebMvcConfigurerAdapter {

    private ObjectMapper objectMapper() {
        Jackson2ObjectMapperFactoryBean bean = new Jackson2ObjectMapperFactoryBean();
        bean.setIndentOutput(true);
        bean.setSimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSZ");
        bean.afterPropertiesSet();
        ObjectMapper objectMapper = bean.getObject();
        objectMapper.registerModule(new JodaModule());
        return objectMapper;
    }

    private MappingJackson2HttpMessageConverter mappingJackson2HttpMessageConverter() {
        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();
        converter.setObjectMapper(objectMapper());
        return converter;
    }

    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        converters.add(mappingJackson2HttpMessageConverter());
    }

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-18T13:26:37.757

只是为了总结答案并发布 Spring 中 JodaTime 序列化的工作解决方案（在 Spring 3.2 上测试）

弹簧上下文.xml

```
<bean id="objectMapper"
    class="org.springframework.http.converter.json.Jackson2ObjectMapperFactoryBean"
    p:indentOutput="true" p:simpleDateFormat="yyyy-MM-dd'T'HH:mm:ss.SSSZ">
</bean>
<bean
    class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"
    p:targetObject-ref="objectMapper" p:targetMethod="registerModule">
    <property name="arguments">
        <list>
            <bean class="com.fasterxml.jackson.datatype.joda.JodaModule" />
        </list>
    </property>
</bean>

<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.StringHttpMessageConverter" />
        <bean
            class="org.springframework.http.converter.ResourceHttpMessageConverter" />

        <bean
            class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper" ref="objectMapper" />
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

Maven 依赖项（com.fasterxml.jackson-version 为 2.1.1）

```
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-core</artifactId>
    <version>${com.fasterxml.jackson-version}</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>${com.fasterxml.jackson-version}</version>
</dependency>
<dependency>
    <groupId>com.fasterxml.jackson.datatype</groupId>
    <artifactId>jackson-datatype-joda</artifactId>
    <version>${com.fasterxml.jackson-version}</version>
</dependency> 
```

在此之后，您在 ResponseBody 中的 JodaTime 字段将在 JSON 中自动序列化为“createdDate”：“2013-01-18T15:15:36.365+02:00”

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-01-06T18:04:34.543

我最终使用[jackson-datatype-joda](https://github.com/FasterXML/jackson-datatype-joda)让它工作：

添加另一个 Maven 依赖项（匹配您的 Jackson 版本号）：

```
<dependency>
    <groupId>com.fasterxml.jackson.datatype</groupId>
    <artifactId>jackson-datatype-joda</artifactId>
    <version>${jackson.version}</version>
</dependency> 
```

然后将 JodaModule（处理转换）注册到 Jackson 的 ObjectMapper（这里在 Spring 中完成，但您可以创建一个辅助类）：

```
<bean class="org.springframework.beans.factory.config.MethodInvokingFactoryBean"
    p:targetObject-ref="objectMapper" p:targetMethod="registerModule">
    <property name="arguments">
        <list><bean class="com.fasterxml.jackson.datatype.joda.JodaModule"/></list>
    </property>
</bean> 
```

（您需要为 ObjectMapper 提供一个 id，以便可以通过这种方式引用它）。

Hibernate模块也是这样注册的：[https ://github.com/FasterXML/jackson-module-hibernate](https://github.com/FasterXML/jackson-module-hibernate)

请注意，您需要设置一个（简单）日期格式，如问题所示，但禁用`SerializationFeature.WRITE_DATE_KEYS_AS_TIMESTAMPS`似乎没有任何区别。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-04T21:37:34.567

我正在努力解决杰克逊从实体字段与 joda DayTime 创建的完全相同的 b@#$d ：

```
modifiedOn": {

"year": 2013,
"dayOfWeek": 6,
"era": 1,
"dayOfYear": 124,
"dayOfMonth": 4,
"weekOfWeekyear": 18,
"monthOfYear": 5,
"yearOfCentury": 13,
"centuryOfEra": 20,
"millisOfSecond": 0,
"millisOfDay": 81801000,
"secondOfMinute": 21,
"secondOfDay": 81801,
"minuteOfHour": 43,
"minuteOfDay": 1363,
"weekyear": 2013,
"yearOfEra": 2013,
"hourOfDay": 22,
"millis": 1367700201000,
"zone": {
    "uncachedZone": {
        "cachable": true,
        "fixed": false,
        "id": "Europe/Belgrade"
    },
    "fixed": false,
    "id": "Europe/Belgrade"
},
"chronology": {
    "zone": {
        "uncachedZone": {
            "cachable": true,
            "fixed": false,
            "id": "Europe/Belgrade"
        },
        "fixed": false,
        "id": "Europe/Belgrade"
    }
},
"afterNow": false,
"beforeNow": true,
"equalNow": false
} 
```

正如这里提到的 [https://github.com/FasterXML/jackson-datatype-joda](https://github.com/FasterXML/jackson-datatype-joda) 使用 Jackson 2.0 非常容易，但对于像我这样的新手来说，很难弄清楚如何让它工作，但最终找到了代码：

maven 中的依赖 - 这很简单

```
<dependency>
 <groupId>com.fasterxml.jackson.datatype</groupId>
 <artifactId>jackson-datatype-joda</artifactId>
 <version>2.1.2</version>
</dependency> 
```

以及 FasterXML 文档中的一些代码

```
objectMapper mapper = new ObjectMapper();
mapper.registerModule(new JodaModule()); 
```

...但是如何实施呢？这是示例 - 新类：

```
public class JodaObjectMapper extends ObjectMapper {

    public JodaObjectMapper() {
        super();
        registerModule(new JodaModule());
    }
} 
```

最后一步 - 除了 spring.xml

```
<mvc:annotation-driven>
 <mvc:message-converters register-defaults="true">
 <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
 <property name="objectMapper">
 <bean class="net.jvw.JodaObjectMapper"/>
 </property>
 </bean>
 </mvc:message-converters>
</mvc:annotation-driven> 
```

所以现在让我们看看生成的 json

```
"modifiedOn": 1367701129075 
```

终于有一些容易处理的事情了

来自博客文章[http://vanwilgenburg.wordpress.com/2013/01/14/return-usable-joda-dates-in-json-with-jackson/](http://vanwilgenburg.wordpress.com/2013/01/14/return-usable-joda-dates-in-json-with-jackson/)

如果有人想查看我的实体类或控制器的更多代码 - 请在评论中提问，我将在此答案中添加足够的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-15T19:01:14.117

我一直在努力解决同样的问题，并尝试以这种方式将 DateTime 的 Spring 序列化简化为 JSON `app-servlet.xml`：

```
<mvc:annotation-driven>
    <mvc:message-converters>
        <bean class="org.springframework.http.converter.json.MappingJackson2HttpMessageConverter">
            <property name="objectMapper">
                <bean class="no.bouvet.jsonclient.spring.JsonClientJackson2ObjectMapperFactoryBean"/>
            </property>
        </bean>
    </mvc:message-converters>
</mvc:annotation-driven> 
```

在这里，您可以从[java-json-client](https://github.com/bouvet-openlab/java-json-client)库中找到[no.bouvet.jsonclient.spring.JsonClientJackson2ObjectMapperFactoryBean](https://github.com/bouvet-openlab/java-json-client/blob/master/json-client/src/main/java/no/bouvet/jsonclient/spring/JsonClientJackson2ObjectMapperFactoryBean.java)

# .net - WPF DataGrid 以编程方式添加复杂列

> ID：13700856
> 
> 赞同：3
> 
> 时间：2012-12-04T10:30:13.943
> 
> 标签：.net, wpf, xaml, wpfdatagrid

我正在尝试以编程方式将列添加到我的 DataGrid 中，因为它们直到运行时才知道。我已经完成了大部分工作，并且从后面的代码中添加一个“正常”列不是问题。但是，我现在尝试添加的列有一个 DataTemplate。这是 XAML：

```
<DataGridTemplateColumn Header="{Binding colHeader}">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Border BorderBrush="{Binding BorderColour}" BorderThickness="2">
                <TextBlock Text="{Binding TextInfo}" />
            </Border>
        </DataTemplate>
     </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn> 
```

通常我会使用这样的东西来创建一个列来添加到网格中：

```
Private Function AddColumn(colHeader As String, colBinding As String) As DataGridColumn
    Dim textColumn As New DataGridTextColumn()
    textColumn.Header = colHeader
    textColumn.Binding = New Binding(colBinding)
    Return textColumn
End Sub 
```

但我对如何添加更复杂的 XAML 感到困惑。有什么建议么？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T11:17:56.943

使用属性在资源字典中定义列的 DataTemplate，`x:Key`然后在后面的代码中访问它以设置单元格模板。

```
<DataTemplate x:Key="your_data_template">
    <Border BorderBrush="{Binding BorderColour}" BorderThickness="2">
        <TextBlock Text="{Binding TextInfo}" />
    </Border>
</DataTemplate> 
```

然后在后面的代码中

```
textColumn.CellTemplate = Application.Current.FindResource("your_data_template") as DataTemplate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:18:04.840

参考链接：http: [//blogs.msdn.com/b/scmorris/archive/2008/04/14/defining-silverlight-datagrid-columns-at-runtime.aspx](http://blogs.msdn.com/b/scmorris/archive/2008/04/14/defining-silverlight-datagrid-columns-at-runtime.aspx)

代码片段来自上面的链接：（这是一种方法。该链接中还解释了其他方式）

xml:

```
<UserControl.Resources>
<local:DateTimeConverter x:Key="DateConverter" />

<DataTemplate x:Key="myCellTemplate">
    <TextBlock 
        Text="{Binding Birthday, 
        Converter={StaticResource DateConverter}}" 
        Margin="4"/>
</DataTemplate>

<DataTemplate x:Key="myCellEditingTemplate">
    <basics:DatePicker 
        SelectedDate="{Binding Birthday, Mode=TwoWay}" />
</DataTemplate> 
```

代码背后：

```
DataGridTemplateColumn templateColumn = new DataGridTemplateColumn();
templateColumn.Header = "Birthday";
templateColumn.CellTemplate = (DataTemplate)Resources["myCellTemplate"];
templateColumn.CellEditingTemplate = 
                   (DataTemplate)Resources["myCellEditingTemplate"];
targetDataGrid.Columns.Add(templateColumn); 
```

# c++ - 使用 foreach 将多个 wxTextCtrls 的标签设置为空值

> ID：13700857
> 
> 赞同：1
> 
> 时间：2012-12-04T10:30:15.117
> 
> 标签：c++, wxwidgets, deque, mem-fun

我一直在尝试使用 for_each 将 wxTextCtrl 的多个标签设置为空值，如下所示：

```
std::deque<wxTextCtrl*> dqImg;

for_each (dqImg.begin(),dqImg.end(),bind1st(mem_fun(&wxTextCtrl::SetLabel),"")); 
```

问题是它给了我这个错误：

```
Error 1 error C2535: 'void std::binder1st<_Fn2>::operator ()(const wxString &) const' : member function already defined or declared d:\...\visualstudio2012\vc\include\xfunctional  286 
```

你能解释一下我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T18:29:32.413

我不太了解错误消息（您使用哪个版本的编译器？）但是您应该使用`bind2nd`，而不是`bind1st`，因为返回的仿函数的第一个参数`mem_fun()`是`wxTextCtrl*`。

# c++ - 子类型和子类之间有什么区别？

> ID：13700860
> 
> 赞同：1
> 
> 时间：2012-12-04T10:30:23.310
> 
> 标签：c++

子类型和子类之间有什么区别，我如何判断一个类是否是另一个类的子类型/子类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:40:13.847

C++ 将子类称为“派生类”。

在 C++ 中，类是类型，唯一的“子类型”是派生类。因此，如果您选择在 C++ 中使用“子类型”和“子类”这两个词，它们可能是同一回事。根据您的学术背景，我想您可能会说私有继承不会*创建*子类型，在这种情况下它们是不同的。就此而言，在某些学术背景下，“子类型”的概念是不合法的（正式的类型理论存在于 OOP 之前。就此而言，在计算机科学之前存在，除非你算上 Babbage）。

在 C++11 中，您可以测试是否`AClass`是派生类`Another`（可选地排除它们是同一类的情况）：

```
std::is_base_of<Another, AClass>::value && !std::is_same<Another, AClass>::value 
```

即使继承是私有的，这个表达式也是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:06:14.303

这些是理论概念，而不是 C++ 概念。但是让我们看看如何将它们应用于 C++。

*   *子类*化是指通过从另一个继承来形成新类型。C++ 提供了这种机制并将子类称为“派生类”。

*   *子类型*是指在需要类型值的地方使用子类型值的可能性。在 C++ 中，您可以认为公共继承意味着子类型化关系，或者您可以更具限制性并仅在虚函数的覆盖确保尊重 LSP 的情况下考虑子类型化。并且考虑到私有或受保护的继承不（但仍然是子类化的情况）是理智的，无论您对虚函数覆盖施加或不施加任何约束。

所以，像往常一样，精确的定义——我故意没有给出——将接受或排除一些极端情况（C++ 中的私有或受保护的基类）甚至整个域（您是否考虑类型模板参数的约束？是否遵守类型系统？如果您的定义足够开放以适用于许多语言，您最终可能会回答“是”，因此认为 C++ 有两个具有交互作用的类型系统。现在考虑显式专业化的影响第二个。）并且通常会做出精确的定义，以简化提出它们的其余工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:37:30.947

来自：[http ://www.cs.princeton.edu/courses/archive/fall98/cs441/mainus/node12.html](http://www.cs.princeton.edu/courses/archive/fall98/cs441/mainus/node12.html)

> 子类型和子类在支持重用方面存在重要区别。子类允许重用类内部的代码——实例变量声明和方法定义。因此，它们在支持类内的代码重用方面很有用。另一方面，子类型可用于支持外部重用，从而产生一种形式的多态性。也就是说，一旦一种数据类型被确定为另一种数据类型的子类型，任何可以应用于超类型元素的函数或过程也可以应用于子类型元素。

你应该阅读全文。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-04T11:06:00.300

类是程序员定义的新类型，所以我认为子类==子类型。

**史蒂夫杰索普**写道：

> C++ 将子类称为“派生类”。

我想不是。子类是类中的类（就像 Engine 是 Car 的一部分）。

看下面的例子：

```
#include <iostream>

using namespace std;

class Car
{
    public:
    class Engine //Engine is subclass
    {
        public:
        static void Start()
        {
               cout << "Engine is starting... \n";
        }      
    };
};

class Animal
{
    public:
    static void Eat()
    {
           cout << "Animal is eating... \n";
    }     
};

class Wolf : Animal //Wolf is derived class
{
      public:
      static void Howl()
      {
             cout << "Wolf is howling... \n";
      }
};

int main()
{
    Car::Engine::Start();
    Animal::Eat();
    Wolf::Howl();

    system("PAUSE"); //keep Console Window open in Debug Mode
    return 0;
} 
```

# magento - 添加/编辑产品时删除后端的简短描述验证

> ID：13700866
> 
> 赞同：0
> 
> 时间：2012-12-04T10:30:35.203
> 
> 标签：magento, magento-1.5

我将商店从 1.3 版升级到 1.5 版，并注意到添加/编辑产品时的简短描述字段是强制性的（这不适用于 1.3 版）。

我可以知道要编辑哪个文件以删除简短描述字段上的验证吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:47:18.357

您应该可以转到 Catalog > Attributes > Manage Attributes，搜索 Attribute Code `short_description`，单击该行，更改`Value Required`为`No`。

# security - AX 2012 安全开发隐藏菜单项

> ID：13700870
> 
> 赞同：1
> 
> 时间：2012-12-04T10:30:41.540
> 
> 标签：security, axapta, dynamics-ax-2012

我正在尝试为 AX 2012 上的某些用户设置角色，但我似乎无法隐藏某些菜单项。

示例：我授予对客户表单的访问权限。结果：**销售**和**销售和市场营销**菜单项打开并引导我进入客户表格。

如果我不希望该用户看到销售和营销菜单项怎么办？

此外，某些菜单项始终可以访问（需要自助服务许可证才能查看它们，以便任何人都可以看到它们），例如 Home=> 公共区域中的工作项。好吧，我想为特定用户隐藏那些。

我相信我必须通过编程来做到这一点，但我不知道从哪里开始，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T18:24:05.653

我相信对于销售和营销菜单项案例，您可以在 AOT 中创建一个新权限，专门为该菜单项授予权限。然后，将该权限添加到职责（然后应将其分配给角色）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T18:50:52.260

客户指的是 CustTable，销售和销售和营销指的是应收账款和“销售和营销”？

那么我是否正确，您希望允许访问“所有客户”菜单项，但这会导致两个模块都可见，而您只希望其中一个模块可见？

如果是这样，恐怕它确实不需要编写代码就可以工作。其次，我担心您将无法这样做，因为 Morphx 为我们处理了这件事，而我们无法进入 Dynamcis Ax 的那部分。

可能有不同的解决方案或解决方法。您可以创建菜单项的副本并替换其中一个菜单项。这样，您就可以将任一菜单项置于不同的角色中。（但也许你已经想到了这一点:)）

# javascript - 如何使用 jQuery 在 mouseleave 操作上添加超时

> ID：13700873
> 
> 赞同：0
> 
> 时间：2012-12-04T10:30:59.663
> 
> 标签：javascript, jquery, timeout, hover, mouseevent

我在列表上有菜单，这是 html：

```
 <div class="main_menu">
   <ul>
      <li>
        <a href="#" target="_self"><span>Content</span></a>
        <div id="submenu_01" class="sub_menu_main"></div>
      </li>
      <li>
        <a href="#" target="_self"><span>Content</span></a>
        <div id="submenu_02" class="sub_menu_main"></div>
      </li>
   </ul>
 </div> 
```

现在 - 在悬停列表元素时，我需要显示`sub_menu_main`每个 li 的 div 并且具有不同的内容。此外，我想在 mouseleve 操作上有一些超时，以便将列表的 div 元素更改一段时间保持在室外，而另一个尚未出现。

这是我的功能：

```
$('.main_menu ul li').mouseenter(function(){
    $('.sub_menu_main').css('display','block');
});
$('.main_menu ul').find('li').each().mouseleave(function(){
    setTimeout(function(){
        $('.sub_menu_main').css('display','none');
    },2000);
}); 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:33:26.640

没有必要，`.each()`因为`.mouseleave()`会`li`像这样自动绑定到每个

```
$('.main_menu ul').find('li').mouseleave(function(){
   setTimeout(function(){
       $('.sub_menu_main').hide();
   },2000);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:18:13.367

你可以试试这个，它不漂亮，但也许有人可以帮助清理它：

```
function getSubMenu(e) {
    var $target = $(e.target);
    var submenu = $target;
    if ($target.is('a') || $target.is('span') || $target.is('li')) {
        var $li = $target.parents('li');
        $submenu = $li.find('.sub_menu_main');
    }
    return $submenu;
}
$('.sub_menu_main').hide();
$('.main_menu ul li').hover(function(e) {
    var $submenu = getSubMenu(e);
    $($submenu).show();
}, function(e) {
    var $submenu = getSubMenu(e);
    setTimeout(function() {
        $($submenu).hide();
    }, 2000);
});​ 
```

**[演示](http://jsfiddle.net/K5yt2/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:33:58.593

您还没有确切地说出问题所在，但对于初学者来说，您不需要空调`each()`用：

```
$('.main_menu ul').find('li').mouseleave(function() {
    setTimeout(function(){
        $('.sub_menu_main').css('display','none');
    }, 2000);
}); 
```

除此之外，它应该可以正常工作。

# jquery - IOS HTML5应用程序中的iScroll4 js - 滚动到顶部问题

> ID：13700879
> 
> 赞同：0
> 
> 时间：2012-12-04T10:31:09.823
> 
> 标签：jquery, ios, css, html, cordova

我正在尝试构建一个相当复杂的 HTML5 IOS 应用程序 - 它的布局类似于 Facebook（3 个面板 - 向左或向右滑动以显示设置/通知）。中央面板包含 5 个“页面”，它们只是通过简单脚本隐藏/显示的隐藏 div。

所以作为一个简短的概述，我的布局是 -

```
 <div class="settings">
    Settings Info....

 </div>
 <div class="mainpage">
    <div id="wrapper">
       <div id="scroller">
          <div class="bookings">
            bookings info 
          </div>
          <div class="clientsList">
            clients info
          </div>          
          <div class="shop">
             shop info
          </div>
          <div class="training">
             training info
          </div>
         </div>
     </div>
 </div>
 <div class="notifications">
    notifications info....

 </div> 
```

我的问题是我需要显示的 div 滚动，因为它们将包含从服务器中提取的动态内容——我尝试使用 IScroll 4 在 5 个显示的 div 周围创建一个滚动条——但是每当我显示它们开始滚动的页面时快速回到顶部 - 我想这是因为它无法计算出 Div 的高度，因为它们隐藏在负载上？

我尝试使用以下脚本在选择页面链接时重置滚动条，因此一旦页面加载它就会计算出高度 - 它可以在浏览器中工作 - 但不能在 IOS 上！非常烦人 - 是否有人对滚动 Div 或页面导航的替代方法有任何想法？

```
 function updateMyscroll(){
        myScroll.destroy();
        myScroll = null;
        myScroll = new iScroll('wrapper');

        setTimeout(function() {
        myScroll.refresh();
        },0);

} 
```

干杯保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:15:22.060

我在 iScroll 上遇到过类似的问题。这些通常通过严格遵循[iScroll 主页提供的信息来解决](http://cubiq.org/iscroll)

首先我建议将结构更新为 UL-LI 格式：

```
<div id="wrapper">
  <div id="scroller">
    <ul>
      <li class="bookings">bookings info</li>
    .
    .
    . 
```

我还要声明`position:relative`#wrapper

你用函数做的事情`updateMyscroll()`对我来说似乎是正确的，除了我也会尝试定位到`scroller`而不是`wrapper`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:50:28.160

我设法通过在页面加载后创建新版本的滚动条来解决我的问题 - 使用以下脚本 - 页面加载略有延迟 - 但在 iphone 3、4、4s 和 5 上的 ios 5+ 上运行良好平板电脑。

```
var articleScroll
    var articleDefined =""
    function NewScrollArticle() {
        if (articleDefined == "added"){
        blogScroll.destroy();
        alert('added')
       articleScroll = null;
       }
        articleScroll = new iScroll('articleBlog',{checkDOMChanges: false,
                      topOnDOMChanges: false});
        setTimeout(function(){blogDefined ="added"},2000);            

        } 
```

# java - 如何在 gwt 中创建这些类型的图像？

> ID：13700881
> 
> 赞同：0
> 
> 时间：2012-12-04T10:31:11.547
> 
> 标签：java, gwt, java-canvas

[http://yuml.me/diagram/scruffy/class/samples](http://yuml.me/diagram/scruffy/class/samples)

![在此处输入图像描述](../Images/ec2a57636b72941c84999e65300fad4d.png)

我知道如何绘制这样的矩形：

```
 context.fillRect(x, y, width, height); 
```

如何使用 gwt 画布创建这些类型的图像（不是直线边框、渐变、阴影）？这可能吗？我需要寻找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:35:51.177

是的，您可以从以下内容开始：

```
// Define the path
ctx.beginPath();
ctx.lineTo(..., ...);
ctx.lineTo(..., ...);
...
ctx.closePath();

// Stroke the path
ctx.setStrokeStyle("#...");
ctx.stroke();

// Fill the path
final CanvasGradient gradient = ctx.createLinearGradient(...);
gradient.addColorStop(0., "#...");
gradient.addColorStop(1., "#...");
ctx.setFillStyle(gradient);
ctx.fill(); 
```

阴影必须单独绘制。

# objective-c - 关于 C 静态/非静态浮点数组（Xcode，Objective C）

> ID：13700885
> 
> 赞同：1
> 
> 时间：2012-12-04T10:31:31.073
> 
> 标签：objective-c, arrays, for-loop, static

基本上我有一个类方法返回一个`float array`. 如果我返回 a`static array`我会遇到它太大或什至可能太小的问题，具体取决于输入参数，因为所需数组的大小取决于输入大小。如果我只返回一个`float array[arraysize]`我已经解决了尺寸问题，但我还有其他问题。

比如说，我分别处理每个元素，`non-static float array`例如

```
 NSLog(@"array[0] %f array[1] %f array[2] %f",array[0],array[1],array[2]); 
```

它打印数组的正确值。但是，如果我改为使用循环，例如

```
 for (int i = 0; i < 3; i++) 
 {
    NSLog(@"array[%i] %f",i,array[i]);
 } 
```

我得到了一些非常奇怪的数字（奇怪的是，除了最后一个索引）。为什么这两件事会产生不同的结果？我知道简单地返回 a 是不好的做法`non static float`，但即便如此，这两种寻址数组的方法对我来说看起来是一样的。

类方法的相关代码（用于非静态版本）...

```
 float array[arraysize];

    //many lines of code later

    if (weShouldStoreValue == true) {
         array[index] = theFloat;
         index = index + 1;
     }

    //more lines of code later

    return array; 
```

请注意，它返回一个 (float*)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:06:33.693

你不能这样做，当你退出方法或函数范围时，数组会死掉。
您可以在纯 C 中使用 malloc 执行此操作：

```
float* array= malloc(arraysize*sizeof(float));

//many lines of code later

if (weShouldStoreValue == true) {
     array[index] = theFloat;
     index = index + 1;
 }

//more lines of code later

return array; 
```

不要忘记释放相关的内存。
如果您习惯使用垃圾收集器并且不关心内存，请将 malloc 的数据包装到 NSData 对象中，以便将其释放，使用如下方法进行分配：

```
+ (id)dataWithBytesNoCopy:(void *)bytes length:(NSUInteger)length freeWhenDone:(BOOL)freeWhenDone;
// Pass YES to the freeWhenDone argument 
```

但是此时为什么不使用 NSMutableArray 的数字呢？

# java - 如何使用 Java 代码比较 VARCHAR 数据类型以确保数据库中的数据相同

> ID：13700889
> 
> 赞同：0
> 
> 时间：2012-12-04T10:31:44.557
> 
> 标签：java, sql, jdbc

由于数据迁移，如何将两个不同数据库中的值与列中的相同数据进行比较。我正在运行 jUnit 测试并且值没有通过相同的测试。我究竟做错了什么？正确知道我将源数据库和目标数据库设置为同一个数据库，即它们是相同的东西。我这样做是因为我想确保连接在整个过程中都是正确的，并将任何问题缩小到语法错误。名称列的行中的值为；计划管理、错误和增强、硬件和软件请求。

```
public class DemandTypeCopier {

    public static String QUERY_CREATECOPY = "select name from tr_demandtype where name=?";

}

public void testQUERY_CREATECOPY() throws Exception{

    UnitTestHelper helper = new UnitTestHelper();
    Connection con = helper.getConnection(helper.sourceDBUrl);
    Connection conTarget = helper.getConnection(helper.targetDBUrl);
    String x = "Initiative management";

    PreparedStatement stmt = con.prepareStatement(DemandTypeCopier.QUERY_CREATECOPY);
    stmt.setString(1, x);
    ResultSet sourceVal = stmt.executeQuery();

    stmt = conTarget.prepareStatement(DemandTypeCopier.QUERY_CREATECOPY);
    stmt.setString(1, x);
    ResultSet targetVal = stmt.executeQuery();

    assertTrue(helper.resultSetsEqual(sourceVal,targetVal));

}

public boolean resultSetsEqual (ResultSet source, ResultSet target) throws SQLException{
    while(source.next())
    {
            target.next();
            ResultSetMetaData metadata = source.getMetaData();
            int count = metadata.getColumnCount();
            for (int i =1; i<=count; i++)
            {
               if(source.getObject(i) != target.getObject(i))
               {
              return false;
               }
            }
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:53:40.077

问题是在比较数据时，您正在测试对象身份而不是相等性。

```
source.getObject(i) != target.getObject(i) 
```

以上将测试从两个结果集中返回的对象是否*相同*，这在大多数（所有？）情况下都不是真的。你真正想做的是测试平等：

```
source.getObject(i).equals(target.getObject(i)) 
```

请注意，如果 source.getObject(i) 返回 null，则上述内容将引发 NullPointerException，因此除非数据库中的任何列都不允许 null 值，否则您需要添加代码来处理 null 值。

在查询中添加 ORDER BY 子句，否则无法保证返回结果的顺序。

检查 target.next() 的结果，以便正确处理两个结果集大小不相等的情况。

# java - 骆驼单元测试命中自定义组件

> ID：13700892
> 
> 赞同：1
> 
> 时间：2012-12-04T10:32:02.543
> 
> 标签：java, routing, apache-camel

我有编写组件（端点）的骆驼项目。它用于路由 (mycomponent:somename) 我的路由单元测试在组件完成后开始失败。（它使用一些与自己的客户端编写的http通信）我可以根据“无法连接到服务器......”，“无法读取属性......”看到错误。

因此，看起来端点没有被我用于此目的的直接替换。我需要的，真正的路由单元测试，我不需要启动 Web 服务来运行一些测试，它应该只是路由测试。

示例代码：

```
public class MyTest extends CamelTestSupport {

@Override
public String isMockEndpoints() {
    return "*";
}

@Override
protected RouteBuilder createRouteBuilder() throws Exception {
    return new RouteBuilder() {
        @Override
        public void configure() throws Exception {
            includeRoutes(new MyRoute());
        }
    };
}

@Test
public void testRouteToRd() throws Exception {
    context.getRouteDefinitions().get(0).adviceWith(context, new AdviceWithRouteBuilder() {

        @Override
        public void configure() throws Exception {
            replaceFromWith("direct:incomponent");   // replacing from
        }
    });

    getMockEndpoint("mock:myconnector:outcomponent").expectedMessageCount(1);
    template.sendBody("direct:incomponent", OK_MESSAGE);  // and sending to direct
    assertMockEndpointsSatisfied();
}
} 
```

为什么我开始用这个配置来打真正的组件（在组件完成之前它工作得很好）有人可以帮忙，谢谢。

很抱歉，但复制粘贴和“玩”配置对我有帮助。更换

```
@Override
public String isMockEndpoints() {
    return "*";
} 
```

和：

```
@Override
public String isMockEndpointsAndSkip() {
    return "*";
} 
```

我现在所有的测试都很好。但是仍然不明白为什么会这样，我用直接替换端点并将消息发送到直接（不是真实的）

所以，非常抱歉，如果不是好问题，请关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-18T08:51:07.360

在 Camel 测试中使用`adviceWith`时，您必须重写该方法`isUseAdviceWith`，然后`context.start()`在发送数据之前调用。

例子：

```
 @Override
public boolean isUseAdviceWith() {
    // tell we are using advice with, which allows us to advice the route
    // before Camel is being started
    return true;
}

@Test
public void testRouteToRd() throws Exception {
context.getRouteDefinitions().get(0).adviceWith(context, new AdviceWithRouteBuilder() {

    @Override
    public void configure() throws Exception {
        replaceFromWith("direct:incomponent");   // replacing from
    }
});

context.start(); // NECESSARY IF USING ADVICEWITH

getMockEndpoint("mock:myconnector:outcomponent").expectedMessageCount(1);
template.sendBody("direct:incomponent", OK_MESSAGE);  // and sending to direct
assertMockEndpointsSatisfied(); 
```

}

参考：[Camel AdviceWith 文档](http://camel.apache.org/advicewith.html)

# sql-server - 我们真的需要在 SQL Server 2008 R2 中运行 Vacuuming 吗？

> ID：13700893
> 
> 赞同：4
> 
> 时间：2012-12-04T10:32:03.290
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2, sql-server-2000

我正在使用 SQL Server 2008 R2。以前我们使用 PostGreSQL 8.0.2。那时我们需要对 PostGreSQL 进行吸尘。但现在我们使用的是 SQL Server 2008 R2。吸尘真的需要这个吗？还是由服务器自己处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:56:12.520

大多数管理员会部署一些定期维护作业的组合。SQL Server 具有[重建​​和重组](http://msdn.microsoft.com/en-us/library/ms189858.aspx)索引的命令。一个很好的起点是[Ola Hallengren 的维护脚本](http://ola.hallengren.com/)。

# aggregation - DTrace 不打印聚合

> ID：13700900
> 
> 赞同：0
> 
> 时间：2012-12-04T10:32:37.403
> 
> 标签：aggregation, output, dtrace

我正在尝试从 OS X 10.8 的终端执行以下非常简单的 DTrace 使用。

`sudo dtrace -n 'syscall:::entry { @counts["System Call Entry"] = count(); }'`

当我点击 ^CI 时，期望打印出聚合`@counts`，但我只是打印出一个空白行。有人可以告诉我为什么没有打印聚合吗？

这真的很奇怪，因为如果我执行以下脚本，我确实会看到聚合的打印输出，因此聚合中确实存储了值。

`sudo dtrace -n 'syscall:::entry { @counts[probefunc] = count(); } tick-1sec { printa(@counts); exit(0); }'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T22:43:12.300

您必须让探测器运行**更长时间**才能设置和收集一些数字。我发现实际开始/收集需要 1 到 10 秒，只有这样才能在点击 ^C 后打印汇总结果。

这种延迟在 OSX 和 Solaris 上很明显，但为什么有时需要更长的时间我无法确定。*[当然有一个完全合乎逻辑（且未知）的原因。]*

此外，如果您添加：

```
dtrace:::BEGIN { printf("Starting...\n"); } 
```

进入您的探针，您会看到延迟启动。但是，收集第一组数字需要更多时间。在 syscall:::entry 探测器触发并积累一些东西之前，它不会打印“聚合”。

# jquery - Twitter Bootstrap，Typeahead，图像

> ID：13700904
> 
> 赞同：0
> 
> 时间：2012-12-04T10:32:49.813
> 
> 标签：jquery, twitter-bootstrap, bootstrap-typeahead

我正在尝试使用 Twitter Bootstrap 2.2.1 创建 Typeahead 搜索。我设法使用 JSON 而不是这样的字符串：

```
$('#search').typeahead({
    minLength: 3,
    source: function (query, process) {
    $.post('@Url.Action(<MySearchAction>, <MyControllerName>)', { Text: query }, function (data) {
            var source = [];
            $.each(data, function (index, value) {
                source.push(JSON.stringify(value));
            });
            process(source);
        });
    },
    updater: function (item) {
        var itemJSON = JSON.parse(item);
        window.location.href = '@Url.Action(<MyDetailsAction>, <MyControllerName>)/' + itemJSON.ID;
    },
    highlighter: function (item) {
        var itemJSON = JSON.parse(item);
        return itemJSON.Name;
    },
}); 
```

现在我想做更多

1.  在 typeahead 中使用 JSON 是正确的方法吗？
2.  我想在下拉列表中显示不同类型的对象 - 假设我有歌曲和专辑类型，我想显示找到的所有歌曲然后是分隔符，然后是找到的所有专辑。
3.  我想在下拉列表中显示图像 - 比如专辑的封面。

我在这里阅读了主题[Allow loading images and custom HTML in typeahead results](https://github.com/twitter/bootstrap/issues/2441)。
引用该主题：*“使用项目和菜单选项的组合，您可以指定新模板”*，但我仍然不知道如何以正确的方式进行操作。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T15:49:21.673

由于 typeahead 使用源函数处理字符串，因此我使用这些字符串作为访问数据的键。

有点像这样

```
$('#search').typeahead({
    myData: {"key":{image:"image.jpg",description:"lorem blahblah"}},
    source: //Load data in a function
        //add data to myData with the key being the string you would process, 
        //and the value being an object you want to get values from

    highlighter: function(item){
        var item = this.options.myData[item];
        var image = item.image;
        var description = item.description
        return "<img src='"+image+"'>" so on and so forth;
    } 
```

那应该让你开始。

# rename - 在 Bazaar 中更改远程仓库的名称

> ID：13700908
> 
> 赞同：0
> 
> 时间：2012-12-04T10:33:02.847
> 
> 标签：rename, bazaar

我想在 Bazaar 中更改结帐 repo 的名称，但我不确定如果我只是重命名文件夹是否会产生任何问题。有没有办法安全地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T13:41:23.037

您可以**安全地更改本地存储库的目录名称**。
唯一需要担心的是，如果您为其他用户发布此存储库，例如作为共享文件夹。

但也许我误解了这个问题......
所以如果你谈到**重命名远程存储库**，那么你只需要将`bind`所有本地结帐到这个新地址。

`Bind`命令文档：
[http ://doc.bazaar.canonical.com/bzr.dev/en/user-reference/bind-help.html](http://doc.bazaar.canonical.com/bzr.dev/en/user-reference/bind-help.html)

# c# - C# 错误：LINQ to Entities 无法识别该方法

> ID：13700912
> 
> 赞同：0
> 
> 时间：2012-12-04T10:33:15.487
> 
> 标签：c#, linq-to-entities

我在测试运行报告时收到以下错误：

LINQ to Entities 无法识别方法 'System.Decimal PerformCurrencyConversion(System.Decimal, System.Decimal, System.Decimal, System.String, System.DateTime)' 方法，并且此方法无法转换为存储表达式。

这是我的查询：

```
List<BusinessPlanningElements> productSales = (from sale in ctn.ProductSales
    where sale.DateSold.Year == reportRequest.Year && sale.ProductID == t.ProductID
    group sale by sale.DateSold.Month into ds
    select new BusinessPlanningElements
    {
      Month = ds.Select(it => it.DateSold.Month).FirstOrDefault(),
      EURNumberOfUnitSold = ds.Where(it => it.EURSales.HasValue).Where(it => it.EURSales != 0).Count(),
      GBPNumberOfUnitSold = ds.Where(it => it.GBPSales.HasValue).Where(it => it.GBPSales != 0).Count(),
      USDNumberOfUnitSold = ds.Where(it => it.USDSales.HasValue).Where(it => it.USDSales != 0).Count(),
      EURCumulativeNumberOfUnitsSold = ctn.ProductSales.Where(it => it.EURSales.HasValue && it.EURSales != 0 && it.ProductID == t.ProductID && it.DateSold.Month <= ds.Key).Count(),
      GBPCumulativeNumberOfUnitsSold = ctn.ProductSales.Where(it => it.GBPSales.HasValue && it.GBPSales != 0 && it.ProductID == t.ProductID && it.DateSold.Month <= ds.Key).Count(),
      USDCumulativeNumberOfUnitsSold = ctn.ProductSales.Where(it => it.USDSales.HasValue && it.USDSales != 0 && it.ProductID == t.ProductID && it.DateSold.Month <= ds.Key).Count(),
      USDTotalSales = PerformCurrencyConversion(ds.Sum(it => it.USDSales.HasValue ? it.USDSales.Value : 0), 0M, 0M, reportRequest.Currency, DateTime.Now.AddMonths(-2)),
      GBPTotalSales = PerformCurrencyConversion(0M, ds.Sum(it => it.GBPSales.HasValue ? it.GBPSales.Value : 0), 0M, reportRequest.Currency, DateTime.Now.AddMonths(-2)),
      EURTotalSales = PerformCurrencyConversion(0M, 0M, ds.Sum(it => it.EURSales.HasValue ? it.EURSales.Value : 0), reportRequest.Currency, DateTime.Now.AddMonths(-2)),
      USDCumulativeTotalSales = PerformCurrencyConversion(ctn.ProductSales.Sum(it => it.USDSales.HasValue && it.USDSales != 0 && it.ProductID == t.ProductID && it.DateSold.Month <= ds.Key ? it.USDSales.Value : 0), 0M, 0M, reportRequest.Currency, DateTime.Now.AddMonths(-2)),
      GBPCumulativeTotalSales = PerformCurrencyConversion(ctn.ProductSales.Sum(it => it.GBPSales.HasValue && it.GBPSales != 0 && it.ProductID == t.ProductID && it.DateSold.Month <= ds.Key ? it.GBPSales.Value : 0), 0M, 0M, reportRequest.Currency, DateTime.Now.AddMonths(-2)),
      EURCumulativeTotalSales = PerformCurrencyConversion(ctn.ProductSales.Sum(it => it.EURSales.HasValue && it.EURSales != 0 && it.ProductID == t.ProductID && it.DateSold.Month <= ds.Key ? it.EURSales.Value : 0), 0M, 0M, reportRequest.Currency, DateTime.Now.AddMonths(-2)),
    }).ToList(); 
```

PerformCurrencyConversion 方法几乎可以获取转换率列表，并将值转换为用户指定的货币。它接受如下参数：

```
public decimal PerformCurrencyConversion(decimal usd, decimal gbp, decimal eur, string Currency, DateTime saleMonth)
{
    //Logic
} 
```

过去我在整个代码库中多次使用过这种方法，没有任何问题或错误，例如

```
List<MonthlyProductSales> monthlyProductSales = (from sale in productSales
     orderby sale.DateSold descending
     group sale by new { sale.DateSold.Month, sale.Product.Name } into ds
     select new MonthlyProductSales
     {
         Name = ds.Select(it => it.Product.Name).FirstOrDefault(),
         Month = ds.Select(it => it.DateSold.Month).FirstOrDefault(),
         Year = ds.Select(it => it.DateSold.Year).FirstOrDefault(),
         USDNumberItemsSold = ds.Where(it => it.USDSales.HasValue).Where(it => it.USDSales != 0).Count(),
         GBPNumberItemsSold = ds.Where(it => it.GBPSales.HasValue).Where(it => it.GBPSales != 0).Count(),
         EURNumberItemsSold = ds.Where(it => it.EURSales.HasValue).Where(it => it.EURSales != 0).Count(),
         USDRevenueTotal = PerformCurrencyConversion(ds.Sum(it => it.USDSales.HasValue ? it.USDSales.Value : 0), 0M, 0M, reportRequest.Currency, DateTime.Now.AddMonths(-2)),
         GBPRevenueTotal = PerformCurrencyConversion(0M, ds.Sum(it => it.GBPSales.HasValue ? it.GBPSales.Value : 0), 0M, reportRequest.Currency, DateTime.Now.AddMonths(-2)),
         EURRevenueTotal = PerformCurrencyConversion(0M, 0M, ds.Sum(it => it.EURSales.HasValue ? it.EURSales.Value : 0), reportRequest.Currency, DateTime.Now.AddMonths(-2)),
     }).ToList(); 
```

谁能看到有什么区别，或者我如何解决这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:47:45.003

区别在于 LINQ 实现。

在第一个代码示例中，您使用的是**LINQ to Entities**（即实体框架的 LINQ 实现）。此实现将您的 LINQ 转换为最终在数据库上执行的 SQL。

在第二个代码示例中，您使用的是**LINQ to Objects**（即内存中的集合）。此实现不会转换为 SQL 或其他语言，而只是创建一个在内存集合上执行的操作链。因此，这种 LINQ 实现可以使用 .NET 函数，例如`PerformCurrencyConversion`.

因此，您可以首先使用 LINQ to Entities 查询数据库，并将结果存储在数组或列表中，然后对该数组或列表执行 LINQ to Objects 查询——然后您可以使用内置的 .NET职能。

# json - WCF & JSON：序列化长为字符串

> ID：13700925
> 
> 赞同：0
> 
> 时间：2012-12-04T10:33:59.673
> 
> 标签：json, wcf, wcf-data-services

我有一个 wcf 数据服务和一个正常的 rest wcf 服务。两种服务都返回相同的实体对象。

```
[DataContract]
public partial class MyEntity
{
    #region Primitive Properties
    [DataMember]
    public virtual long ID
    {
        get;
        set;
    }
    .... 
```

正常的 rest wcf 服务使用以下服务契约：

```
[ServiceContract]
public interface MyService
{
    [OperationContract]
    [WebGet(UriTemplate="MyEntity/{id}",ResponseFormat=WebMessageFormat.Json)]
    public MyEntity GetMyEntity(string id)
} 
```

而 wcf 数据服务将 long 值作为**字符串**返回：

```
{{"id": ... ,"uri": ... ,"type":"Model.MyEntity"},"ID":"865176660053852161"} 
```

MyService ServiceContract 返回 long as **number**：

```
{ "ID":865176660053852161 } 
```

似乎 wcf 数据服务和“正常”休息服务使用两种不同的序列化机制。

问题是：我的客户端应用程序使用 JavaScript，因此无法处理 64 位数字。我本来预计，“正常”休息服务也会返回 64 位数字作为字符串。

*   在序列化/反序列化过程中，我在哪里可以将数字转换为字符串？
*   万一有人知道：为什么 wcf 数据服务/基于休息的 wcf 之间的行为不同？

为了保持一致性，我希望在服务器端的序列化过程中进行转换，但我不知道这是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T09:21:15.257

我现在的解决方法是为 poco 生成调整 t4 模板，以便像这样生成实体对象：

```
[DataContract]
public partial class MyEntity
{
    #region Primitive Properties

    public virtual long ID
    {
        get { return _iD; }
        set { _iD = value; _iDStr = value.ToString(); }
    }

    [DataMember(Name="ID")]
    private string _iDStr;
    private long _iD;

    ... 
```

这将在 WCF 响应中将 ID 作为字符串返回，而实体框架仍然使用 long 值...。

# powershell - Powershell检查int和double的类型

> ID：13700927
> 
> 赞同：2
> 
> 时间：2012-12-04T10:34:04.290
> 
> 标签：powershell, integer, double

我需要用户填写一个整数，但是使用下面显示的代码，也允许使用双精度数。如何将其更改为仅允许整数？

```
do{

    $opgegevenGetal = read-host "Enter an integer"

    if(![bool]($opgegevenGetal -as [int])){
        write-host "Only integers please"
    }

}

until ([bool]($opgegevenGetal -as [int])) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:47:28.450

尝试：

```
do{
    $opgegevenGetal = read-host "Enter an integer"
    $a = ""
    if(  ![int32]::TryParse( $opgegevenGetal , [ref]$a ))
      {
        write-host "Only integers please"
      }
  } until ($a -gt 0) 
```

接受`0`作为输入的代码：

```
do{
    $opgegevenGetal = read-host "Enter an integer"
    $a = ""
    if(  ![int32]::TryParse( $opgegevenGetal , [ref]$a ))
      {
        write-host "Only integers please"
      }
  } until ($a -gt 0 -or $opgegevenGetal -eq '0') 
```

或者：

```
do{
    $opgegevenGetal = read-host "Enter an integer"
    $a = ""
    $b = [int32]::TryParse( $opgegevenGetal , [ref]$a )
    if(  !$b)
      {
        write-host "Only integers please"
      }
  } until ($b) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-07T14:14:51.887

[克里斯蒂安回答的](https://stackoverflow.com/a/13701172/2495)更紧凑的版本：

```
$value = 0
$read = Read-Host 'Enter an integer'
while( ![int]::TryParse( $read, [ref]$value ) ) {
  $read = Read-Host 'Only integers please'
} 
```

# android - 缩放活动的特定部分

> ID：13700931
> 
> 赞同：0
> 
> 时间：2012-12-04T10:34:14.427
> 
> 标签：android, android-activity

我想缩放活动的特定部分。例如，我们都知道放大镜。我想这样做。假设活动的某些部分具有非常小的字体，并且用户无法阅读该部分。所以当用户单击时在该部分上，该特定部分必须被缩放。我想那样做。

可能吗？？提前致谢。

[我的屏幕](http://i.stack.imgur.com/GZTQ9.jpg)

# jquery-mobile - Jquery Mobile主干选择框未显示

> ID：13700937
> 
> 赞同：2
> 
> 时间：2012-12-04T10:34:24.050
> 
> 标签：jquery-mobile, backbone.js, routing, handlebars.js, drop-down-menu

我已经使用带有 Backbone 和 Handlebar 的 Jquery mobile 我有一个选择框，它使用来自 cakephp 的 JSON 数据加载国家列表，HTML 代码是：

```
<select name="Country" id="Country"  data-native-menu="false">
    <option value="all">All Countries</option>
    {{#each output.countries}}
    <option value="{{Country.id}}" >{{Country.name}}</option>
    {{/each}}
</select> 
```

但问题是列表太大了。因此，当浏览器窗口大小较小时，jquery mobile 会根据以下内容尝试打开新页面： [jqm docs](http://jquerymobile.com/demos/1.2.0/docs/forms/selects/custom.html)

但就我而言，它没有打开页面。我调试了代码，但它给了我 jquery mobile.js version is 1.1.1 in that on line 3414 中的错误

```
if ( active.url.indexOf( dialogHashKey ) > -1 && !$.mobile.activePage.is( ".ui-dialog" ) ) {
            settings.changeHash = false;
            alreadyThere = true;
        } 
```

这行特定的代码给出了错误：Uncaught TypeError: Cannot call method 'indexOf' of undefined

在这里，我知道 active.url 未定义，因为 urlHistory.getActive() 具有未定义的值，而是应该包含当前 URL。我不知道为什么它是未定义的。有路由问题吗？我在 jqm config 中做了以下设置：

`$(document).bind("mobileinit", function () { $.mobile.ajaxEnabled = false; $.mobile.linkBindingEnabled = false; $.mobile.hashListeningEnabled = false; $.mobile.pushStateEnabled = false;});`

请帮帮我。

# android - Android 活动未在某些设备上启动（错误膨胀类）

> ID：13700939
> 
> 赞同：2
> 
> 时间：2012-12-04T10:34:28.453
> 
> 标签：android, resolution, sony, runtimeexception, inflate-exception

我的程序（实际上不是我的，我只是想修复这个错误）在大多数手机上都可以正常工作，但它不能在[Sony Xperia P](http://www.gsmarena.com/sony_xperia_p-4436.php)上启动。

当我启动程序时，会出现以下消息：

应用程序意外停止。

该应用程序在此手机上也没有启动器图标（只有默认图标）。

错误日志说：

```
java.lang.RuntimeException: unable to start Activity
android.view.InflateException: Binary XML file line #16: error inflating class android.view.ImageView 
```

当应用程序调用时出现错误消息：

```
setContentView(R.layout.menu_0_splash); 
```

我注意到可绘制资源是为以下分辨率定义的：

1024x600 320x240 400x240 480x320 800x480 854x480

这款手机是 960x540，所以我最好的问题是也有默认资源。

可能是什么问题呢？

布局文件（现在复制/粘贴-d）：

```
<?xml version       = "1.0" 
encoding    = "utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/m0_relativeLayout"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/gradient_green" >

<ImageView #this is the problematic line
    android:id="@+id/arrow_top"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="@dimen/m0_arrow_top_margintop"
    android:src="@drawable/splash_arrow_top" />

<ImageView
    android:id="@+id/arrow_bottom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="@dimen/m0_arrow_bottom_marginbottom"
    android:src="@drawable/splash_arrow_bottom" />

<ImageView
    android:id="@+id/belt_top"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:src="@drawable/splash_belt_top" />

<ImageView
    android:id="@+id/belt_bottom"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:src="@drawable/splash_belt_bottom" />

<ImageView
    android:id="@+id/t_ad"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:adjustViewBounds="true"
    android:src="@drawable/t_ad" />

<ImageView
    android:id="@+id/title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@+id/t_ad"
    android:adjustViewBounds="true"
    android:src="@drawable/splash_title" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T10:36:38.143

假设您实际上从日志中复制/粘贴了错误，那么您有一个错字：

> java.lang.RuntimeException：无法启动 Activity android.view.InflateException：二进制 XML 文件第 16 行：错误膨胀类 android.view.ImageVeiw

`ImageView`在您的其中一个 layout.xml 文件中拼写错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T15:09:33.217

最后我意识到出了什么问题......手机有一个特殊的分辨率（960x540），它找不到ImageView-s的源图像和这个分辨率的尺寸文件 - 这就是为什么应用程序在其他手机上运行，​​因为他们使用“共同”的决议。

感谢您的帮助，我很感激 +1

# c# - 冻结最后几行，前几列和网格视图的标题

> ID：13700940
> 
> 赞同：-1
> 
> 时间：2012-12-04T10:34:29.523
> 
> 标签：c#, gridview

请提出任何解决方法来冻结我的网格视图的最后 4 行。

我已成功冻结标题行并留下 2 列。根据要求，我还需要冻结最后 4 行。

冻结最后 4 行网格视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T06:11:05.480

# CSS

```
.frozenFooter
{
    font-weight:bold;
    background-color: Green;
    color: Black;
    position: relative;
    bottom:expression(getScrollBottom(this.parentNode.parentNode.parentNode.parentNode));
}

.frozenCell  {
font-size: 14px;
font-weight: bold;
text-align: center;
background-color: Gray;
color:Black ;
border-right: 1px solid silver;
position:relative;
cursor: default;
/*IE5+ only*/
/*left: expression(document.getElementById("div-datagrid").scrollLeft-2);*/
/*left:expression((this.parentElement.parentElement.parentElement.parentElement.scrollLeft-2)+'px');*/

left: expression(document.getElementById("pnlContainer").scrollLeft-2);
}
.lockedForLastRow  {
font-size: 14px;
font-weight: bold;
text-align: center;
background-color: Gray;
color:Black ;
border-right: 1px solid silver;
position:relative;
cursor: default;
/*IE5+ only*/
/*left: expression(document.getElementById("div-datagrid").scrollLeft-2);*/
/*left:expression((this.parentElement.parentElement.parentElement.parentElement.scrollLeft-2)+'px');*/

left: expression(document.getElementById("pnlContainer").scrollLeft-2);
}
.frozenHeader
{
    font-size: 14px;
    font-weight: bold;
    text-align: center;
    background-color: Green;
    color:Black ;
    border-right: 1px solid black;
    position:relative;
    cursor: default;
    top: expression(document.getElementById("pnlContainer").scrollTop-2);
    z-index : 10;
}

</style> 
```

# 脚本

函数 getScrollBottom(p_oElem) { 返回 p_oElem.scrollHeight - p_oElem.scrollTop - p_oElem.clientHeight; }

# HTML

```
 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false"
        Width="96%"  ShowFooter="false" onrowdatabound="GridView1_RowDataBound">
    <Columns>
        <asp:TemplateField HeaderText="C1">
            <ItemTemplate>
                <asp:Label ID="Label2" runat="server" Text='<%# Bind("C1") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C1 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C2">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("C2") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C2 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C3">
            <ItemTemplate>
                <asp:Label ID="Label3" runat="server" Text='<%# Bind("C3") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C3 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C4">
            <ItemTemplate>
                <asp:Label ID="Label4" runat="server" Text='<%# Bind("C4") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C4 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C5">
            <ItemTemplate>
                <asp:Label ID="Label5" runat="server" Text='<%# Bind("C5") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C5 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C6">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("C6") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C6 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C7">
            <ItemTemplate>
                <asp:Label ID="Label7" runat="server" Text='<%# Bind("C7") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C7 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C8">
            <ItemTemplate>
                <asp:Label ID="Label8" runat="server" Text='<%# Bind("C8") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C8 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C9">
            <ItemTemplate>
                <asp:Label ID="Label9" runat="server" Text='<%# Bind("C9") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C9 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="C10">
            <ItemTemplate>
                <asp:Label ID="Label1" runat="server" Text='<%# Bind("C10") %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                C10 Footer Here
            </FooterTemplate>
        </asp:TemplateField>
    </Columns> 
```

```
 </asp:GridView>

</asp:Panel> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T06:14:43.393

```
protected void Page_Load(object sender, EventArgs e)
{
    DataTable dt = new DataTable();
    dt.Columns.Add("C1");
    dt.Columns.Add("C2");
    dt.Columns.Add("C3");
    dt.Columns.Add("C4");
    dt.Columns.Add("C5");
    dt.Columns.Add("C6");
    dt.Columns.Add("C7");
    dt.Columns.Add("C8");
    dt.Columns.Add("C9");
    dt.Columns.Add("C10");
    DataRow drRow;
    for (int i = 0; i < 10; i++)
    {
        drRow = dt.NewRow();
        drRow[0] = "C10000000" + i;
        drRow[1] = "C20000000" + i;
        drRow[2] = "C30000000" + i;
        drRow[3] = "C40000000" + i;
        drRow[4] = "C50000000" + i;
        drRow[5] = "C60000000" + i;
        drRow[6] = "C70000000" + i;
        drRow[7] = "C80000000" + i;
        drRow[8] = "C90000000" + i;
        drRow[9] = "C100000000" + i;
        dt.Rows.Add(drRow);
    }
    GridView1.DataSource = dt;
    GridView1.DataBind();
    GridView1.Rows[9].Cells[0].ID = "footerCell";
    GridView1.Rows[9].Attributes.Add("class", "frozenFooter");
}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    e.Row.Cells[0].CssClass = "frozenCell";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T09:27:50.190

另一个 Css 仅用于最后一行的第一个单元格（为左滚动而冻结），它被冻结为页脚

```
.GVFixedFooterFirstCell
{ 
    font-weight:bold; 
    background-color: Green; 
    color: Black;
    position: relative;
    bottom: expression(document.getElementById("pnlContainer").scrollHeight - document.getElementById("pnlContainer").scrollTop - document.getElementById("pnlContainer").clientHeight);
    left: expression(document.getElementById("pnlContainer").scrollLeft-2);
    z-index:10;
} 
```

# java - java中用于串行调用方法的正确约定

> ID：13700942
> 
> 赞同：1
> 
> 时间：2012-12-04T10:34:40.997
> 
> 标签：java, coding-style

什么是更好的编程风格`Java`？
例如，如果我有：

`SomeObject createObject();`

`void process(SomeObject o);`

这是否更好？

`process(createObject())`或者

`SomeObject o = createObject();
process(o);`

或者是其他东西？还是没有区别或缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:38:06.763

如果您需要参考`SomeObject`当前范围内的其他地方，那么最好使用第二种样式：

```
SomeObject o = createObject();
process(o);

// use instance o some other way:
// o.setBase(10); 
```

否则使用第一种风格更紧凑，即

```
process(createObject()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:38:03.813

第二个有好处，你可以`o`在调用后使用引用`process(o);`

```
SomeObject o = createObject();
process(o);
// you can use o here, too 
```

如果您不再需要参考`o`，那`process(createObject());`很好。

虽然第二个版本的可读性更好，但我可能会使用第一个。

（另请注意，您要求的方式`createObject()`必须是一种`static`方法）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:39:31.197

这取决于要求，如果您确定 SomeObject 不会在其他任何地方使用，您应该使用第一种方法，否则第二种更好。我认为这与编程风格无关

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:41:20.090

您可以使用任何方法，但在将结果传递给其他方法之前调用该方法是好的。

因此，如果先前调用的方法中有异常，那么您可以轻松跟踪它。

这种方法的可读性也是一个优点，如果有的话，您还可以使用相同的对象引用调用其他方法。

# axis2 - Axis和Axis2开发Web Service的区别

> ID：13700943
> 
> 赞同：6
> 
> 时间：2012-12-04T10:34:41.070
> 
> 标签：axis2, axis, rad

在我的项目中，我将不得不开发一些基于 Web Service 技术的数据输入/输出接口。所以直到现在我一直在研究它。

我对使用 Java 的 Web 服务感到好奇的是我可以使用或不使用什么库。

当我搜索 java 库时，我发现 Axis2 和 CXF 是非常常见且著名的 java w/s 库。问题是我必须使用包含轴的 RAD 7.0。

Axis 和 Axis2 之间似乎有巨大的变化，不幸的是我不能使用 Axis2。

现在，我的合作伙伴提供 WSDL，我必须实现客户端 W/S。如果我通过 Axis 或 Axis2 或 CXF 从 WSDL 创建客户端代理代码，它们是否都是相同的代码？

或者，如果我必须制作 WSDL 来为 Axis 提供我的 W/S 接口，这对 Axis2 或 CXF 用户来说会是问题吗？

在我的情况下，我很新，害怕使用 Axis。有人可以给我一些建议吗？

谢谢。

祝你有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-10T02:43:03.000

我发现的其他一些差异：

*   > 对于 Axis 2 开发，Java 版本 5 和更高版本是必需的。对于 Axis 1，不需要 java v5 或更高版本。它适用于 Java v4。

*   > Axis 是旧 JAX-RPC 1.1 的 RI，Axis 2 是新 JAX-WS 2.x 的实现

*   > Axis 不支持 Annotations ，Axis 2 支持注解，因此支持使用注解开发 Web 服务的新方法，例如 @Webservice / @Webmethod 注解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T10:31:25.630

不，他们每个人都会生成不同的代码。尽管它们都出于相同的目的而工作。

我个人更喜欢 Axis2 而不是 Axis。

只是为了了解它们的各种优点和缺点，你可以通过这个： [比较链接](http://www.asjava.com/web-services/cxf-axis2-comparison/ "Axis、Axis2 和 CXF 的区别")

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-27T17:08:40.153

通过经验，我确实发现某些 WSDL 可以由 Axis1 解析，但不能由 Axis2 解析，并且 Axis2 发送的某些消息在与 Axis1 一起使用的服务上不起作用。

来自生成的 WSDL 的数组中的细微差别，而不是手写的，以及重音字符被服务器端以不同方式解释（即适用于 CDATA，但并非没有）

就个人而言，我使用 wsimport 从 JDK 生成的任何东西，而不是其他工具，但是某些框架（例如 Curam）需要 axis/axis2

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-09T05:56:31.387

某些 WSDL 可以由 Axis1 解析，但不能由 Axis2 解析。并且 Axis1 支持到 Java 1.4 版本之后，您会得到与 enum 关键字相关的异常。

> 使用 -source 5 或更高版本将“枚举”用作关键字。

因为 Axis 正在生成带有*enum*关键字的 java 类。

您可以覆盖这些类和包名称（就像在 Axis2 中将枚举包变为常量一样）并使您自己的 Axis 托管版本与 Java 1.5 或更高版本兼容。我创建了自己的管理版本的轴来支持 java 1.5 或更高版本上的旧版 wsdl，它甚至可以使用 java 10。

最好使用axis或axis2，因为它是标准的并且在某些框架或技术上是必需的。

# jquery - 使用 jQuery、jQueryUI 或 Ajax 上传文件时的 ASP.NET MVC 3 消息

> ID：13700944
> 
> 赞同：1
> 
> 时间：2012-12-04T10:34:40.533
> 
> 标签：jquery, asp.net, ajax, asp.net-mvc-3

当我点击提交按钮“input type="submit" id="submit" value="Save"”。它开始上传我从硬盘中选择的文件。但这一切都无关紧要，因为我用“上传”文本制作了一个 div，并且该 div 的样式是可见性：隐藏；现在我想要的是，当我单击提交按钮（文件开始上传的时间）时，div 变得可见，我尝试了几件事，包括“[如何在文件上传时显示状态消息？](https://stackoverflow.com/questions/823416/how-can-i-display-a-status-message-while-a-file-is-uploading) ”但没有运气，可能只是我，但我对 jQuery 相当陌生，所以我会很感激一些帮助。

谢谢

编辑：我尝试了下面的所有代码，但没有任何效果，我也尝试过

```
$('#editform').submit(function() {
        $('#loadingdiv').show();
        return true;
    }); 
```

（editform 是我正在使用的表单 ID）但没有运气，有人知道为什么会这样吗？

我的整个编辑页面如下

```
@using (Html.BeginForm("Edit", "Admin",FormMethod.Post, new { enctype = multipart/form-data", id = "editform" })){
@Html.EditorForModel()
<div class="editor-field">
    @if (Model.ImageData == null)
    {
        @:None
    }
    else
    {
        <img width="150" height="150"
             src="@Url.Action("GetImage", "Product", new { Model.ProductID })" alt="bic boii" />
    }
    <div>
        Upload nieuw image: &nbsp; &nbsp; &nbsp;
        <input type="file" name="Image" />
    </div>
</div>

<div>
    Upload nieuw document:
    <input type="file" name="Pdf" />
</div>

<script type="text/javascript">
    $('#editform').submit(function() {
        $('#loadingdiv').show();
        return true;
    });

</script>
<input type="submit" id="submit" value="Opslaan" />
@Html.ActionLink("Ga terug", "Index")
<div id="loadingdiv">
    Bezig met uploaden.
</div>} 
```

嗯，在我的表单上放了一个断点后，它完全跳过了我的脚本，我不确定那是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:06:26.240

```
$("#submit").click(function () { $("#yourContainerId").show(); }); 
```

这表示：单击提交按钮时，启动一个函数，您可以在其中选择包含消息的 div（我在这里调用了它的 id yourContainerId）并显示它。

如果它不起作用，它应该返回一个错误，这可能有助于我们了解正在发生的事情。如果您在问题上发布您的客户代码，也可能会更容易。也许您的代码中有一些错误会阻止执行到达您尝试显示消息的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:40:57.080

您可以使用 Ajax 上传文件吗？然后你可以在 ajax 调用之前调用 Div 的显示，当它完成后隐藏 div。

```
$.ajax({

    type: "POST",
    url: "/SomeController/SomeAction",
    data: $('form').serialize(),
    timeout: 3000,
    async: false,
    beforeSend: function() {
        $("loading").show();

    },

    complete: function() {
        $("loading").hide();

    },        
    cache: false,
    success: function(result) {

         return result;

    },
    error: function(error) {
        $("laoding").hide();
        alert("Some problems have occured. Please try again later: " + error);

    }

}); 
```

# flyway - 验证数据库后，flyway 可以处理迁移吗？

> ID：13700948
> 
> 赞同：1
> 
> 时间：2012-12-04T10:34:47.830
> 
> 标签：flyway

flyway 可以在迁移之前对数据库进行验证检查吗？

**方案 1**

例如：我正在尝试在现有数据库上执行 flyway。我已经在我的 db_users 表中插入了几个用户。

但是我的 sql 脚本具有为 db_users 表创建语句以及所有用户的插入语句，包括已经插入的用户。

我可以在创建表之前进行 IF NOT_EXISTS 检查，但是在每次插入之前都很难进行检查。

**方案 2**

我已经在我的数据库中迁移了脚本 V1、V2、V3。我修改了脚本 V2 并进行了一些更改。下次我启动应用程序时，flyway 会识别此更改。

**方案 3**

我在 V2 sql 脚本中有一个 create table 语句。但是在启动我的应用程序后，我手动删除了该表。下次启动应用程序时，Flyway 会识别 DB 更改并再次执行 V2 吗？

请让我知道如何在 Flyway 中处理这些情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:55:53.150

您所问的一切都在文档中。如果它们不够清楚，请告诉我如何改进它们。如果找不到信息，请告诉我原因。

场景一：[https ://flywaydb.org/documentation/existing](https://flywaydb.org/documentation/existing)

场景二：[https ://flywaydb.org/documentation/command/validate](https://flywaydb.org/documentation/command/validate)

场景 3：[https ://flywaydb.org/documentation/faq#outside-changes](https://flywaydb.org/documentation/faq#outside-changes)

# api - Graph API Explorer App 和我的应用程序之间的结果集差异

> ID：13700950
> 
> 赞同：3
> 
> 时间：2012-12-04T10:34:48.017
> 
> 标签：api, facebook-graph-api, facebook-stream-story

我希望有人可以为我阐明这一点，因为它已经让我发疯了一段时间了。

我有一个试图读取用户提要的应用程序。用户已为此提供了足够的权限，如下所述。我确实得到了一个结果集，但结果集不完整。

如果我使用 Graph Api Explorer 应用程序以完全相同的权限运行相同的 Graph API 请求，如下文所述，我将获得完整且正确的结果集。

我在下面详细介绍了两个结果集。我已将此示例中的结果限制为 2（因为查询中的前 2 个结果是突出显示此问题的结果）。但是，您可以通过删除限制或设置任何其他限制来复制此操作。

如您所见，使用相同的权限集和两个请求的有效访问令牌，响应完全不同。我所知道的应用程序中缺少的类型数据与实际返回的数据之间的唯一**区别是**

1）第一个丢失的结果是用户在朋友页面上的帖子 2）第二个丢失的结果是用户通过应用程序共享的数据 3）我的应用程序返回的所有结果都是我在自己的“时间轴”上发布的帖子/Wall'（无论现在指的是什么

我的应用程序（即使权限与 Graph Api Explorer 应用程序相同）不会返回这两种类型的帖子有什么原因吗？

非常感谢所有帮助和建议。

**图 API 查询**

```
me/feed?fields=id,comments,type,likes,story_tags,with_tags,to 
```

**我的应用程序的结果集**

```
{
  "data": [
    {
      "id": "XXXXXXXX_101523YYYY25626", 
      "comments": {
        "count": 0
      }, 
      "type": "link", 
      "created_time": "2012-12-03T16:04:33+0000"
    }, 
    {
      "id": "XXXXXXXXX_570424YYYY73312", 
      "comments": {
        "count": 0
      }, 
      "type": "link", 
      "created_time": "2012-12-03T14:45:38+0000"
    }
  ], 
  "paging": {
    "previous": "....", 
    "next": "...."
  }
} 
```

**来自 Graph Api Explorer App 的结果集**

```
{
  "data": [
    {
      "id": "XXXXXXXX_10152YYYYY50626", 
      "comments": {
        "count": 0
      }, 
      "type": "status", 
      "story_tags": {
        "64": [
          {
            "id": "ZZZZZZZZZZ", 
            "name": "Name", 
            "offset": 64, 
            "length": 12, 
            "type": "user"
          }
        ]
      }, 
      "created_time": "2012-12-03T16:46:41+0000"
    }, 
    {
      "id": "XXXXXXX_1015230YYYYYYY626", 
      "comments": {
        "count": 0
      }, 
      "type": "photo", 
      "likes": {
        "data": [
          {
            "name": "Name", 
            "id": "ZZZZZZZZ"
          }, 
          {
            "name": "Name, 
            "id": "ZZZZZZZZ"
          }
        ], 
        "count": 2
      }, 
      "story_tags": {
        "0": [
          {
            "id": "ZZZZZZZZZ", 
            "name": "Name", 
            "offset": 0, 
            "length": 13, 
            "type": "user"
          }
        ]
      }, 
      "created_time": "2012-12-03T16:40:24+0000"
    }
  ], 
  "paging": {
    "previous": "......", 
    "next": "......"
  }
} 
```

**我的应用程序的权限**

```
{
  "data": [
    {
      "installed": 1, 
      "read_stream": 1, 
      "email": 1, 
      "read_insights": 1, 
      "user_birthday": 1, 
      "user_relationships": 1, 
      "user_photos": 1, 
      "user_videos": 1, 
      "user_photo_video_tags": 1, 
      "user_about_me": 1, 
      "user_status": 1, 
      "friends_about_me": 1
    }
  ], 
  "paging": {
    "next": "..."
  }
} 
```

**Graph Api Explorer 的权限**

```
{
  "data": [
    {
      "installed": 1, 
      "read_stream": 1, 
      "email": 1, 
      "read_insights": 1, 
      "user_birthday": 1, 
      "user_relationships": 1, 
      "user_photos": 1, 
      "user_videos": 1, 
      "user_photo_video_tags": 1, 
      "user_about_me": 1, 
      "user_status": 1, 
      "friends_about_me": 1
    }
  ], 
  "paging": {
    "next": "...."
  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T13:24:12.600

随着新内容被推送到提要，提要结果几乎总是不同的。查看每次更新的时间：

*   **图资源管理器**：2012-12-03T16:40:24+0000
*   **您的应用程序**：2012-12-03T14:45:38+0000

您在 Graph Explorer 中获得的两个故事都比您在应用程序中获得的故事晚两个小时。Graph Explorer 本身是基于 API 构建的，不会直接进行内部调用来获取结果。要检查这一点，您可以使用 Firebug 或 Google Chrome 检查器并查看正在进行的 AJAX 调用。

一个和另一个之间应该没有区别。Explorer 只是一个很好的测试工具，但在返回结果方面没有任何“优势”。

对于像这样变化的数据集，通过您的应用程序和图形资源管理器进行的调用之间的直接比较可能不是最佳选择，因为结果通常会有所不同。

facebook.com 上的真实提要与您通过 API 获得的版本之间也可能存在延迟。这可以解释您的通话之间的暂时延迟，因为这个过时的视图没有“全局状态”（即：提要为每个人返回 -4 小时的结果）：[https ://developers.facebook.com/docs/参考/api/](https://developers.facebook.com/docs/reference/api/)

希望这有助于解决您的问题。

# android - 是否可以在 Android 中使用 CXF 网络服务？

> ID：13700951
> 
> 赞同：2
> 
> 时间：2012-12-04T10:34:48.530
> 
> 标签：android, web-services

我想在我的 android 程序中使用 CXF 网络服务设置，是否可以为两者使用相同的网络服务？日志消息如下。谁能告诉我问题是什么？

```
12-04 08:59:28.432: E/Trace(850): error opening trace file: No such file or directory (2)
12-04 08:59:29.285: E/dalvikvm(850): Could not find class 'org.jida.mns.web.ws.connector.WSConnector', referenced from method com.example.list.MainActivity.onCreate
12-04 08:59:29.332: E/AndroidRuntime(850): FATAL EXCEPTION: main
12-04 08:59:29.332: E/AndroidRuntime(850): java.lang.NoClassDefFoundError: org.cdac.nms.web.ws.connector.WSConnector
12-04 08:59:29.332: E/AndroidRuntime(850):  at com.example.list.MainActivity.onCreate(MainActivity.java:49)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.app.Activity.performCreate(Activity.java:5008)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.os.Looper.loop(Looper.java:137)
12-04 08:59:29.332: E/AndroidRuntime(850):  at android.app.ActivityThread.main(ActivityThread.java:4745)
12-04 08:59:29.332: E/AndroidRuntime(850):  at java.lang.reflect.Method.invokeNative(Native Method)
12-04 08:59:29.332: E/AndroidRuntime(850):  at java.lang.reflect.Method.invoke(Method.java:511)
12-04 08:59:29.332: E/AndroidRuntime(850):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
12-04 08:59:29.332: E/AndroidRuntime(850):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
12-04 08:59:29.332: E/AndroidRuntime(850):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:53:30.783

我不能代表您的具体案例或堆栈跟踪。但至于在android中使用cxf构建你的WS客户端，应该是可以的。

例如，请参阅这个项目[http://code.google.com/p/android-ws-client/](http://code.google.com/p/android-ws-client/)，它使用 CXF 在 android 上构建客户端。

# algorithm - 图变换——顶点到边，边到顶点

> ID：13700954
> 
> 赞同：19
> 
> 时间：2012-12-04T10:34:55.920
> 
> 标签：algorithm, graph

是否有任何算法或有任何名称可以将图转换为可以将边转换为顶点并将顶点转换为边的图？就为了我们可以从中得到一个新的图表或任何与这个问题类似的东西？我不确定这是否真的有意义，但如果你能给我任何关于此类问题的提示，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-10T23:57:45.910

LineGraph 是 Wolfram 语言中的一个内置函数：

[http://reference.wolfram.com/language/ref/LineGraph.html](http://reference.wolfram.com/language/ref/LineGraph.html)

这就是它的作用：

*   LineGraph[g] 中的每个顶点对应于 g 中的一条边。
*   对于无向图 g，如果 LineGraph[g] 中的两个顶点的对应边共享一个公共顶点，则它们是相邻的。
*   对于有向图g，如果LineGraph[g] 中的两个顶点对应的边是相连的，则它们是相邻的，即一条边的目标是另一条边的源。
*   LineGraph 适用于无向图、有向图和多重图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-24T13:39:02.927

您要的是折线图。您可以使用[networkx line_graph 函数](https://networkx.github.io/documentation/networkx-1.10/reference/generated/networkx.generators.line.line_graph.html)来创建给定图形的折线图或对偶图。但是，请注意，此函数不会传播原始图形中的数据，因此如果需要，您将不得不破解它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-29T07:44:24.237

您是否考虑过**基于模式的图形转换**？就像你会

*   搜索图形模式，例如您想变成节点的边类型，以及
*   定义将该边转换为节点/顶点的操作，例如将所有边属性转换为新节点/顶点的属性。

在图变换文献中，这两个步骤被称为**图变换规则**的*左侧*和*右侧*。

 **该领域有很多可用的科学文献，例如：[http ://www.springer.com/de/book/9783319211442](http://www.springer.com/de/book/9783319211442)

还有专门的图形转换开发解决方案，例如[Soley Studio](https://www.soley.io/en/pr-soley-studio/)。

希望有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-04T10:47:48.777

我相信您可以使用以下 Python 库轻松地将边缘转换为顶点：http: [//networkx.lanl.gov/](http://networkx.lanl.gov/)

您可以获取边列表、节点列表并交换两者以构建新图。你只需要一些 Python 的（基本）知识。**

# java - 构建信息亭应用程序

> ID：13700955
> 
> 赞同：0
> 
> 时间：2012-12-04T10:35:01.340
> 
> 标签：java, .net, kiosk

我的要求是为信息亭构建和部署自定义应用程序。我在网上阅读了一些关于如何构建一个的材料，但没有一个能满足我的好奇心。我担心的是：

1) 将提款卡输入自助服务终端后，我如何检测提款卡并获取必要的详细信息？

2) 是否有我需要从信息亭制造商处获得的 API？

3) 我如何在自助服务终端上添加指向我的应用程序的附加菜单。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:41:22.767

> 1) 将提款卡输入自助服务终端后，我如何检测提款卡并获取必要的详细信息？

你的程序应该监听一个事件或轮询事件的发生。这完全取决于您用于获取 ATM 卡信息的硬件。硬件上应该有一个SDK。查找文档。

> 2) 是否有我需要从信息亭制造商处获得的 API？

如果信息亭本身是硬件，请从制造商处获取。许多信息亭添加了一个硬件来连接 ATM 卡。在这种情况下，请尝试为该硬件制造商获取 API/Docs/SDK。

# java - 将 C 指针转换为 Java

> ID：13700969
> 
> 赞同：0
> 
> 时间：2012-12-04T10:36:08.280
> 
> 标签：java, c, pointers, n-queens

我的任务是创建一个非常快速的 nqueens 程序。到目前为止，Bruteforce 算法和 Backtrack 都在工作，但我发现了一个似乎更快的 C 程序。现在我尝试将它从 C 转换为 Java，但是我无法转换指针，因为我不了解指针发生了什么。这些是必须转换的行：

编辑：我已将转换更新为我所理解的：

```
final int[] aStack = new int[MAX_BOARDSIZE * 2];
int bitfield; //That's what I've got so far

//Conversion 1:
register int* pnStack;       -> int pnStack;

//Conversion 2:
pnStack = aStack + 1;        -> pnStack = 1;

//Conversion 3:
pnStack = aStack + 1;        -> pnStack = 1;
*pnStack++ = 0;              -> aStack[pnStack++] = 0;

//Conversion 4:
bitfield = *--pnStack;       -> bitfield = aStack[--pnStack];

//Conversion 5:
*pnStack++ = bitfield;       -> aStack[pnStack++] = bitfield;

//Conversion 7:
pnStack == aStack            -> pnStack == aStack[0] ??????? 
```

一个解决方案会很好，但如果你能解释一下这里发生了什么，我会尝试自己找到它。指针是我从未真正学习过 c 和 c++ 的原因。

问候，丹尼斯·菲舍尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:43:21.597

在数组中，解释指针就像在数组中使用索引一样。

表示索引当前位置的`*`值。

所以

```
pnStack = aStack;  <-- int pnStack = 0;
pnStack++;         <-- pnStack++;
bitfield = *pnStack <-- bitfield = aStack[pnStack];
bitfield = *--pnStack <-- bitfield = aStack[--pnStack]; (first decrement index, then retrieve the value) 
```

# c# - 并发框架（TDF），这里需要集合的深层副本吗？

> ID：13700974
> 
> 赞同：1
> 
> 时间：2012-12-04T10:36:24.477
> 
> 标签：c#, collections, concurrency, cloning, tpl-dataflow

我对传递到广播块的列表集合有疑问。这是我到目前为止所拥有的（伪代码，因为完整的代码库太长了）：

```
private BroadcastBlock<List<Quote>> tempBCB;
private TransformBlock<List<Quote>, Dictionary<int, IParentOrder>> tfb1;
private TransformBlock<List<Quote>, Dictionary<int, IParentOrder>> tfb2;
private BatchBlock<Dictionary<int, IParentOrder>> batchBlock;
private JoinBlock<List<Quote>, Dictionary<int, IParentOrder>[]> joinBlock;
private TransformBlock<Tuple<List<Quote>, 
    Dictionary<int, IParentOrder>[]>,List<MySignal>> transformBlock;

tempBCB = new BroadcastBlock<List<Quote>>(quoteList => {
    return quoteList;
    //return Cloning.CloneListCloneValues<Quote>(quoteList);
});

tfb1 = new TransformBlock<List<Quote>, Dictionary<int, IParentOrder>>(
    quotes => {//do something and return Dictionary<int, IParentOrder>});

tfb2 = new TransformBlock<List<Quote>, Dictionary<int, IParentOrder>>(
    quotes => {//do something and return Dictionary<int, IParentOrder>});

batchBlock = new BatchBlock<Dictionary<int, IParentOrder>>(2);

joinBlock = new JoinBlock<List<Quote>, Dictionary<int, IParentOrder>[]>(
    new GroupingDataflowBlockOptions { Greedy = false });

transformBlock = new TransformBlock<Tuple<List<Quote>, 
    Dictionary<int, IParentOrder>[]>, List<MySignal>>(
    tuple => { //do something and return List<MySignal>;});

//Linking
tempBCB.LinkTo(tfb1);
tempBCB.LinkTo(tfb2);
tfb1.LinkTo(batchBlock);
tfb2.LinkTo(batchBlock);
tempBCB.LinkTo(joinBlock.Target1);
batchBlock.LinkTo(joinBlock.Target2);
joinBlock.LinkTo(transformBlock); 
```

我的问题是，在当前的实现中，`tempBCB`我在 final 中得到了奇怪的结果`TransformBlock<TInput, TOutput>`。

例如，`Dictionary<int, IParentrOrder>`作为元组一部分的集合大小不相等，即使实现`tfb1`和`tfb2`100% 相同。

实现中被注释掉的行`tempBCB`对广播列表做了一个深拷贝，这似乎解决了问题，但问题是这个深拷贝使我的代码慢了大约 10 倍，这是我需要找到的数量级一个不同的解决方案。

首先，我不确定这是问题所在，还是只是速度变慢导致并发操作按预期执行，即使错误仍然隐藏在那里。

其次，如果广播块中缺少深拷贝会导致这些问题，我怎样才能让它更快？

这是我的深拷贝代码：

```
public static List<TValue> CloneListCloneValues<TValue>(List<TValue> original) 
    where TValue : ICloneable
{
    List<TValue> ret = new List<TValue>(original.Count);

    foreach (TValue entry in original)
    {
        ret.Add((TValue)entry.Clone());
    }

    return ret;
} 
```

我可能会将 a`Quote[]`而不是馈`List<Quote>`入广播块，但我看不出它如何有助于加快深度复制的性能。

我的问题是：

*   深拷贝问题是这里的真正问题吗（我怀疑，因为`List<Quote>`任何转换块都不会改变流入广播块的 , ）？
*   如果是，为什么以及如何使深层副本更有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T08:03:14.710

我回答我自己的问题，因为我最终解决了这个问题。svick 警告的问题与广播块中是否`List<Quote>`需要深拷贝无关（实际上它不需要深拷贝）。该问题与广播块有关，该广播块被请求完成（对链接的数据流块的完整传播设置为真），在批处理块之前，它也链接到 joinBlock，可能将所有项目流式传输到 joinBlock。我只是取出了 joinBlock，因为我重写了转换块（它们现在返回自己的转换项以及原始项以及使 joinBlock 过时。

注意主 transformBlock 中的并发性：将 MaxDegreeOfParallelism 设置为 > 1 即使在这种轻量工作负载下也已经提供了性能优势，但是，当向其投入更重的工作负载时，它确实会发挥作用。

这里是编译和工作的完整代码（我重命名了一些类，但结构保持如前所述）：

```
public class Test
{
    private Stopwatch watch;

    private BroadcastBlock<List<InputObject>> tempBCB;
    private BatchBlock<Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>> batchBlock;
    private TransformBlock<Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>[], List<FinalObject>> transformBlock;
    private ActionBlock<List<FinalObject>> justToFlushTransformBlock;

    private CoreLogic core1;
    private CoreLogic core2;

    public Test()
    {
        tempBCB = new BroadcastBlock<List<InputObject>>(input => input);

        //here batch size = 2
        batchBlock = new BatchBlock<Tuple<List<InputObject>,Dictionary<int,IntermediateObject>>>(2, new GroupingDataflowBlockOptions { Greedy = false });

        transformBlock = new TransformBlock<Tuple<List<InputObject>,Dictionary<int,IntermediateObject>>[],List<FinalObject>>(array =>
        {
            List<InputObject> inputObjects = array[0].Item1;
            List<FinalObject> ret = inputObjects.ConvertAll(x => new FinalObject(x));

            foreach (var tuple in array)
            {
                //iterate over each individual object
                foreach (var dictionary in tuple.Item2)
                {
                    ret[dictionary.Key].outputList.Add(dictionary.Value);
                }
            }

            return ret;
        }, new ExecutionDataflowBlockOptions { MaxDegreeOfParallelism = DataflowBlockOptions.Unbounded });

        justToFlushTransformBlock = new ActionBlock<List<FinalObject>>(list =>
            {
                //just in order to accept items from the transformBlock output queue
            });

        //Generate 2 CoreLogic objects
        core1 = new CoreLogic();
        core2 = new CoreLogic();

        //linking
        tempBCB.LinkTo(core1.transformBlock, new DataflowLinkOptions { PropagateCompletion = true });
        tempBCB.LinkTo(core2.transformBlock, new DataflowLinkOptions { PropagateCompletion = true });

        core1.transformBlock.LinkTo(batchBlock);
        core2.transformBlock.LinkTo(batchBlock);

        batchBlock.LinkTo(transformBlock, new DataflowLinkOptions { PropagateCompletion = true });

        transformBlock.LinkTo(justToFlushTransformBlock, new DataflowLinkOptions { PropagateCompletion = true });
    }

    public void Start()
    {
        const int numberChunks = 30;

        watch = new Stopwatch();
        watch.Start();

        for (int j = 1; j <= numberChunks; j++)
        {
            int collectionSize = 10000 * j;

            List<InputObject> collection = new List<InputObject>(collectionSize);
            for (int i = 0; i < collectionSize; i++)
            {
                collection.Add(new InputObject(i));
            }

            tempBCB.Post(collection);
        }

        tempBCB.Complete();

        Task.WhenAll(core1.transformBlock.Completion, core2.transformBlock.Completion).ContinueWith(_ =>
            {
                batchBlock.Complete();
            });

        transformBlock.Completion.Wait();

        watch.Stop();

        Console.WriteLine("Elapsed time (in milliseconds): " + watch.ElapsedMilliseconds);
        Console.ReadLine();
    }
}

public class CoreLogic
{
    private Random rand;
    public TransformBlock<List<InputObject>, Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>> transformBlock;

    public CoreLogic()
    {
        const int numberIntermediateObjects = 10000;

        transformBlock = new TransformBlock<List<InputObject>, Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>>(input =>
        {
            //please ignore the fact that `input` is not utilized here, the point is to generate a collection of IntermediateObject and return

            Dictionary<int, IntermediateObject> ret = new Dictionary<int, IntermediateObject>();
            for (int i = 0; i < numberIntermediateObjects; i++)
            {
                IntermediateObject value = new IntermediateObject(i);

                ret.Add(i, value);
            }

            var tuple = new Tuple<List<InputObject>, Dictionary<int, IntermediateObject>>(input, ret);

            return tuple;
        });
    }
}

public class InputObject : ICloneable
{
    public int value1 { get; private set; }

    public InputObject(int value)
    {
        this.value1 = value;
    }

    object ICloneable.Clone()
    {
        return Clone();
    }

    public InputObject Clone()
    {
        return (InputObject)this.MemberwiseClone();
    }
}

public class IntermediateObject
{
    public int value1 { get; private set; }

    public IntermediateObject(int value)
    {
        this.value1 = value;
    }
}

public class FinalObject
{
    public InputObject input { get; private set; }
    public List<IntermediateObject> outputList;

    public FinalObject(InputObject input)
    {
        this.input = input;

        this.outputList = new List<IntermediateObject>();
    }
}

public static class Cloning
{
    public static List<TValue> CloneListCloneValues<TValue>(List<TValue> original) where TValue : ICloneable
    {
        List<TValue> ret = new List<TValue>(original.Count);

        foreach (TValue entry in original)
        {
            ret.Add((TValue)entry.Clone());
        }

        return ret;
    }
} 
```

我希望这可以帮助其他可能遇到类似问题的人。我喜欢 TPL Dataflow，尤其是 svick 确实帮助并激励了我更深入地挖掘。谢谢你！

# vba - VBA遍历行以从1个旧行创建2个新行

> ID：13700979
> 
> 赞同：0
> 
> 时间：2012-12-04T10:36:45.663
> 
> 标签：vba, excel

我正在尝试获取一行数据并从中创建另一个工作表上的两个新行。

原始行将有 10 列，这些列基于从查找和表中派生的数据。

然后，我希望使用按特定顺序放置的某些单元格将这一行变为 2 行。

我已经使用录音机创建了一个 marco，但它只记录了记录的内容。我需要马可循环下一行所基于的工作表，直到它找到一个空白单元格然后停止。

示例原始表将具有：

```
aaa 98765 zx 1a23a xz date amount1 amount2 text 4567 1234 
```

新表将有

```
aaa 98765 zx date amount1 text 1234
aaa 1a23a xz date amount2 text 4567 
```

因此，如果原始工作表有 2 行，则工作表 2 将有 4 行，依此类推，那么当宏在原始工作表中遇到空白单元格时，它应该停止。

谁能建议我应该做些什么来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:41:11.243

见下文。期望数据从 A1 开始，我将结果输出到 N1。更改这些并添加相关的工作表引用：

```
Option Explicit
Option Base 1

Sub Process()

Dim dataInput() As Variant, dataOutput() As Variant
Dim i As Double

dataInput = Range("A1").CurrentRegion
ReDim dataOutput(UBound(dataInput, 1) * 2, 7)

    For i = 1 To UBound(dataInput) Step 2

        dataOutput(i, 1) = dataInput(1, 1)
        dataOutput(i, 2) = dataInput(1, 2)
        dataOutput(i, 3) = dataInput(1, 3)
        dataOutput(i, 4) = dataInput(1, 6)
        dataOutput(i, 5) = dataInput(1, 7)
        dataOutput(i, 6) = dataInput(1, 9)
        dataOutput(i, 7) = dataInput(1, 10)

        dataOutput(i + 1, 1) = dataInput(1, 1)
        dataOutput(i + 1, 2) = dataInput(1, 4)
        dataOutput(i + 1, 3) = dataInput(1, 5)
        dataOutput(i + 1, 4) = dataInput(1, 6)
        dataOutput(i + 1, 5) = dataInput(1, 8)
        dataOutput(i + 1, 6) = dataInput(1, 9)
        dataOutput(i + 1, 7) = dataInput(1, 11)

    Next i

Range("N1").Resize(UBound(dataOutput, 1), UBound(dataOutput, 2)) = dataOutput

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:07:48.677

让我们假设您的数据`Worksheet 1`从单元格 A1 开始。此代码将向下移动每一行，直到没有数据剩余并将其放入`Worksheet 2`.

```
Sub SplitRowData()
    Dim data as Range, item as range

    Set data = Worksheets(1).Range("A1:A" & Range("A1").End(xlDown).Row)

    For each item in data
        //Add code to work on each row - sample shown below
        With Worksheets(2)
            .Range("A1") = Range("A1")
        End With
    Next item
End Sub 
```

这有帮助吗？我不确定您使用什么代码来拆分行。显示的样本已经看起来很复杂，可以缩小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:11:59.227

这是您的代码，我对其进行了测试，并且效果很好。

希望你的问题现在很清楚。

```
Sub RECOLOCATE()

Dim i, j As Integer

Dim LastCell As Long

LastCell = ThisWorkbook.Sheets("DataSheet").Range("A100000").End(xlUp).Row - 1

j = 0

For i = 0 To LastCell

    ThisWorkbook.Sheets("NewSheetAdd").Range("A1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("A1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("B1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("B1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("C1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("C1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("D1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("F1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("E1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("G1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("F1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("I1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("G1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("J1").Offset(i, 0).Value

j = j + 1

    ThisWorkbook.Sheets("NewSheetAdd").Range("A1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("A1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("B1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("D1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("C1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("E1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("D1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("F1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("E1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("H1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("F1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("I1").Offset(i, 0).Value
    ThisWorkbook.Sheets("NewSheetAdd").Range("G1").Offset(j, 0).Value _
    = ThisWorkbook.Sheets("DataSheet").Range("K1").Offset(i, 0).Value
j = j + 1

Next i

End Sub 
```

如果需要更多帮助，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:26:56.967

很难想象你真正需要做什么。所以我坚持这个要求——**你想取一行并从中创建两行**

看看下面的代码和结果：

代码：

```
Option Explicit

Sub blabla()

Dim rngMain As Range
Dim rngFinal As Range
Dim i, j, k, m As Integer
Dim varMain As Variant
Dim varFinal As Variant

Set rngMain = Sheets("Sheet1").Range("A2:B11")
varMain = rngMain.Value

'-- we set second arrays rows into two times of first array, columns remain the same
ReDim varFinal(LBound(varMain) To UBound(varMain) * 2, LBound(varMain, 2) To UBound(varMain, 2))

k = 1
j = 2

For i = LBound(varMain) To UBound(varMain)
 For m = LBound(varMain, 2) To UBound(varMain, 2)
    If k < UBound(varFinal) And j < UBound(varFinal) Then
    '-- here we are just adding the values as it is from input to output
    '-- so you can do any calculation that you need here

        varFinal(k, m) = varMain(i, m)
        varFinal(j, m) = varMain(i, m)
    Else
        Exit For
    End If
  Next m

    k = (i * 2) + 1 '-- 1 * 2 = 2 -> + 1 = 3 --> creating odd
    j = (i * 2) + 2  '-- 2 * 1 = 1 -> + 2 = 4 --> creating even
Next i

'output final array to sheet
Set rngFinal = Sheets("Sheet1").Range("D2")
rngFinal.Resize(UBound(varFinal), UBound(Application.Transpose(varFinal))) = varFinal

End Sub 
```

结果：

![在此处输入图像描述](../Images/b5596701ce8dc27de942e54cc58f86d3.png)

如果您可以更清楚地了解在新的双排组中需要什么，我很乐意为您提供帮助。

# objective-c - 使用 UIScrollView 和 UIImageView 实现简单的照片库，如 iPhone 的“照片”

> ID：13700980
> 
> 赞同：0
> 
> 时间：2012-12-04T10:36:47.317
> 
> 标签：objective-c, uiscrollview, uiimageview, uigesturerecognizer

我有一个用 UIImageView 填充的 UIScrollView。我希望每个 UIImageView 都能够缩放和平移，并轻弹到下一页，就像 iPhone 的照片应用程序一样。我四处寻找，到目前为止我所拥有的是：

```
NSArray *pages = [self loadImages];

_pageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
NSUInteger pageCount = [pages count]; // Adjustable
for (int i = 0; i < pageCount; i++) {

    CGFloat x = i * self.view.frame.size.width;

    // Page Settings
    UIImageView *pageView = [[UIImageView alloc] initWithFrame:CGRectMake(x, 0, self.view.frame.size.width, self.view.frame.size.height)];

    pageView.backgroundColor = [UIColor greenColor];
    pageView.image = [pages objectAtIndex:i];
    pageView.userInteractionEnabled = YES;
    pageView.tag = i;

    UIScrollView *pageScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    pageScroll.maximumZoomScale = 2.0f;
    pageScroll.minimumZoomScale = 1.0f;
    pageScroll.zoomScale = 1.0f;
    pageScroll.bouncesZoom = YES;
    pageScroll.contentSize = CGSizeMake(pageView.frame.size.width, pageView.frame.size.height);
    pageScroll.pagingEnabled = NO;
    pageScroll.delegate = self;
    [pageScroll addSubview:pageView];

    // Gesture Reocgnisers
    UIPinchGestureRecognizer *pinchGr = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(pinchImage:)];
    pinchGr.delegate = self;
    [pageView addGestureRecognizer:pinchGr];

    UIPanGestureRecognizer *panGr = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(panImage:)];
    [pageView addGestureRecognizer:panGr];

    [_pageScrollView addSubview:pageView];

}
_pageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * pageCount, self.view.frame.size.height);

_pageScrollView.pagingEnabled = YES;

_pageScrollView.delegate = self;

[self.view addSubview:_pageScrollView]; 
```

它们仅适用于分页（水平滚动）。但是，我对如何为每个 UIImageView 实现 UIGestures 很感兴趣。在stackoverflow中各种好的问题和答案的帮助下，我实现了像这样的缩放和平移：

```
- (void) pinchImage:(UIPinchGestureRecognizer*)pgr {

  [self adjustAnchorPointForGestureRecognizer:pgr];

  if ([pgr state] == UIGestureRecognizerStateBegan || [pgr state] == UIGestureRecognizerStateChanged) {

    CGFloat currentScale = pgr.view.frame.size.width / pgr.view.bounds.size.width;
    CGFloat newScale = currentScale * pgr.scale;

    if (newScale < 1.01f) {
        newScale = 1.01f;
    }
    if (newScale > 3.0f) {
        newScale = 3.0f;
    }

    CGAffineTransform transform = CGAffineTransformMakeScale(newScale, newScale);
    pgr.view.transform = transform;
    pgr.scale = 1;
  }
}

- (void) panImage:(UIPanGestureRecognizer*)panGr {

  if ([panGr state] == UIGestureRecognizerStateBegan || [panGr state] == UIGestureRecognizerStateChanged) {

    CGPoint p = [panGr translationInView:self.view];
    NSLog(@"[PAMPHLET PAGE]: Point: %@", NSStringFromCGPoint(p));
    CGPoint movedPoint = CGPointMake(panGr.view.center.x + p.x, panGr.view.center.y + p.y);

    if (panGr.view.frame.size.width > panGr.view.center.x + p.x &&
        panGr.view.frame.size.height > panGr.view.center.y + p.y) {
        panGr.view.center = movedPoint;
        NSLog(@"Current: %f / %f", panGr.view.center.x, panGr.view.center.y);
    }

    [panGr setTranslation:CGPointZero inView:self.view];
  }
} 
```

这几乎在那里工作，但有几个问题。Zoom & Pan 都不受 UIImageView 的限制，当缩小或平移到边界之外时，图像超出了下一个视图，一切都出错了。我仍在弄清楚这一点，但不知道我应该从哪里开始。

如何“限制”这些手势的有效区域，还是应该尝试其他方法？这甚至是实现这一目标的正确方法吗？我只是想制作简单的照片库，例如照片应用程序...

请，任何帮助将不胜感激。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:39:03.257

如果您从[此处](https://github.com/mwaterfall/MWPhotoBrowser)使用 MWPhotoBrowser ，除了您期望的功能外，它还将负责下载远程图像。

# node.js - 将图像与节点合并

> ID：13700990
> 
> 赞同：1
> 
> 时间：2012-12-04T10:37:02.450
> 
> 标签：node.js, graphicsmagick

我正在使用 Node.js GM 并尝试在某个 x、y 点将图像合并到另一个图像上。如何使用 GraphicsMagick 实现这一目标？是否可以使用附加并指定坐标而不是从左到右？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:20:50.103

您正在寻找`composite`方法参见 GM 的文档

[http://www.graphicsmagick.org/composite.html](http://www.graphicsmagick.org/composite.html)

`append`通常用于创建精灵很方便

# android - 视频文件无法流式播放

> ID：13700991
> 
> 赞同：1
> 
> 时间：2012-12-04T10:37:03.930
> 
> 标签：android, streaming, media-player

我正在尝试通过意图（默认媒体播放器）播放远程视频文件，但我也想在流式传输时将其保存在本地。我正在尝试使用以下代码将蒸汽本地保存在工作正常的视频文件中。现在我想在文件被流式传输后立即开始我的意图但是当意图开始时我得到错误“ `Sorry this video can not be played`”。请注意，如果我在流式传输完成时（何时）将意图代码移动到此方法的末尾，`downloadedSize==totalSize`那么它可以正常工作，但我想在流式传输的同时播放。有什么帮助吗？

```
public String DownloadVideo(String Url, String fileName)
    {
    String filepath=null;
    try {
    URL url = new URL(Url);
    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
    urlConnection.setRequestMethod("GET");
    urlConnection.setDoOutput(true);
    urlConnection.connect();

    File SDCardRoot = Environment.getExternalStorageDirectory();
    File file = new File(SDCardRoot,fileName);
    if(file.createNewFile())
    {
    file.createNewFile();
    }
    FileOutputStream fileOutput = new FileOutputStream(file);
    InputStream inputStream = urlConnection.getInputStream();
    int totalSize = urlConnection.getContentLength();
    int downloadedSize = 0;

    byte[] buffer = new byte[1024];
    int bufferLength = 0; //used to store a temporary size of the buffer
    int counter=0;

    while ( (bufferLength = inputStream.read(buffer)) > 0 ) {

    fileOutput.write(buffer, 0, bufferLength);

    if(downloadedSize>2048)
    {
        Intent i = new Intent(Intent.ACTION_VIEW);
            i.setDataAndType(Uri.parse(file.getPath()),"video/*");
        startActivity(i);
    }
    downloadedSize += bufferLength;
    counter++;
    }
    fileOutput.close();
    if(downloadedSize==totalSize) {
        filepath=file.getPath();
                                }
    } catch (MalformedURLException e) {
    e.printStackTrace();
    } catch (IOException e) {
    filepath=null;
    e.printStackTrace();
    }
    return filepath;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:49:36.350

我认为问题出在这一行：

```
i.setDataAndType(Uri.parse(file.getPath()),"video/*"); 
```

您将本地文件传递给 Intent，但那是尚未下载的文件。我认为您应该使用 Url 流式传输视频，并将内容存储在文件中

```
// Use the url of the remote location
i.setDataAndType(Uri.parse(Url),"video/*");
// Also, try to use lowercase for variables e.g. url vs Url 
```

这样，您正在流式传输远程 url，并将内容保存到本地文件。我可能会误解代码，但我会先调查一下

# c# - Windows Phone 7 下载图像并显示它

> ID：13700993
> 
> 赞同：5
> 
> 时间：2012-12-04T10:37:05.797
> 
> 标签：c#, windows-phone-7, filestream

我是 windows phone 平台的新手，我正在尝试构建一个简单的应用程序，它从文本框中读取图像 url，然后单击下载按钮将此图像下载到手机内存中，然后将其显示在图像控件中。

此代码是在用户单击下载按钮时编写的：

```
string url = "http://some-url-image-name.jpg";
WebClient client = new WebClient();
client.DownloadStringCompleted += DownloadCompleted;
client.DownloadStringAsync(new Uri(url)); 
```

这是 DownloadStringCompleted 事件处理程序：

```
private void DownloadCompleted(object sender, DownloadStringCompletedEventArgs e)
        {
            if (e.Error != null)
                return;
            string result = e.Result;
            using (var stream = new MemoryStream(Encoding.Unicode.GetBytes(e.Result)))
            {
                var bi = new BitmapImage();
                bi.SetSource(stream);
                image.Source = bi;
            }
        } 
```

它给出了一个“未指定的错误”异常。如何解决？或者有人知道更好的方法吗？

另一个问题，e.Result 的本质是什么？是作为字符串下载的图像内容还是某物的路径或什么？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T10:55:18.860

图片是二进制内容，而不是字符串。您必须使用`WebClient.OpenReadAsync`（而不是`DownloadStringAsync`），或直接将您的网址设置为您的来源`BitmapImage`：

```
var bi = new BitmapImage(new Uri("http://some-url-image-name.jpg")); 
```