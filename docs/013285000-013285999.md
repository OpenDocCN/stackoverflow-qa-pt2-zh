# StackOverflow 问答 13285000-13285999

# grails - Grails 域类的 newInstance(map)？

> ID：13285005
> 
> 赞同：0
> 
> 时间：2012-11-08T08:15:09.820
> 
> 标签：grails, groovy

有一个域类，其字段`id`由 Grails 注入。用地图实例化这样的类会导致`id == null`：

```
def obj = DomainClass.class.newInstance(id:100, name:'Joe')
assert obj.id != null // it fails 
```

在 Grails 中分配所有隐藏属性的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T12:35:16.190

您可以自定义 GORM 如何使用 DSL 为数据库生成标识符。默认情况下，GORM 依赖于本地数据库机制来生成 id。检查文档以[自定义域类标识符的生成方式](http://grails.org/doc/latest/ref/Database%20Mapping/id.html)。

```
static mapping = {
    id generator: 'assigned'
} 
```

分配生成器时，构造函数上的 id 初始化存在一个错误，请查看此博客文章，其中包含此错误的临时解决方法： [通过构造函数为 Grails 中的域对象分配 ID](http://www.redcube.de/assigning-id-domain-objects-grails-via-constructor/)。

# c# - 如何判断一个点是否在椭圆内？

> ID：13285007
> 
> 赞同：5
> 
> 时间：2012-11-08T08:15:20.253
> 
> 标签：c#, geometry

我很难找到经典的“包含”方法，如果一个点在矩形、椭圆或其他对象内，该方法会返回。这些对象位于画布中。

我试过 VisualTreeHelper.FindElementsInHostCoordinates 但我找不到路。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T10:10:18.757

这对我有用。*（如果觉得有用请投票！）

[http://my.safaribooksonline.com/book/programming/csharp/9780672331985/graphics-with-windows-forms-and-gdiplus/ch17lev1sec22](http://my.safaribooksonline.com/book/programming/csharp/9780672331985/graphics-with-windows-forms-and-gdiplus/ch17lev1sec22)

```
 public bool Contains(Ellipse Ellipse, Point location)
        {
            Point center = new Point(
                  Canvas.GetLeft(Ellipse) + (Ellipse.Width / 2),
                  Canvas.GetTop(Ellipse) + (Ellipse.Height / 2));

            double _xRadius = Ellipse.Width / 2;
            double _yRadius = Ellipse.Height / 2;

            if (_xRadius <= 0.0 || _yRadius <= 0.0)
                return false;
            /* This is a more general form of the circle equation
             *
             * X^2/a^2 + Y^2/b^2 <= 1
             */

            Point normalized = new Point(location.X - center.X,
                                         location.Y - center.Y);

            return ((double)(normalized.X * normalized.X)
                     / (_xRadius * _xRadius)) + ((double)(normalized.Y * normalized.Y) / (_yRadius * _yRadius))
                <= 1.0;
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T08:46:35.293

使用 C# 并不是那么简单。

首先你需要一个[`GraphicsPath`](http://msdn.microsoft.com/en-us/library/system.drawing.drawing2d.graphicspath.aspx). 然后将它初始化为您想要的形状，对于椭圆使用方法[`AddEllipse`](http://msdn.microsoft.com/en-us/library/3xca09c0.aspx)。然后使用该[`IsVisible`](http://msdn.microsoft.com/en-us/library/25esxk64.aspx)方法检查您的点是否包含在形状中。您可以使用多种`AddLine`方法之一来测试任意形状。

例如。

```
Rectangle myEllipse = new Rectangle(20, 20, 100, 50);
// use the bounding box of your ellipse instead
GraphicsPath myPath = new GraphicsPath();
myPath.AddEllipse(myEllipse);
bool pointWithinEllipse = myPath.IsVisible(40,30); 
```

# php - 使用php为pdf文件创建缩略图

> ID：13285010
> 
> 赞同：2
> 
> 时间：2012-11-08T08:15:46.957
> 
> 标签：php, imagemagick

我一直在努力为 pdf 文件创建缩略图。我使用下面的链接安装和配置 ImageMagick [安装和配置 ImageMagick](http://www.elxsy.com/2009/07/installing-imagemagick-on-windows-and-using-with-php-imagick/)和代码我用下面的代码将 pdf 文件转换为缩略图

```
<?php
 exec("C:/ImageMagick-6.8.0-Q16/convert.exe a.pdf -resize 546x274^ -quality 80 temp.jpg 2>&1", $array);  

?> 
```

它不是在转换，而是在转换图像。代码是

```
<?php
 exec("C:/ImageMagick-6.8.0-Q16/convert.exe a.jpg -resize 546x274^ -quality 80 temp.jpg 2>&1", $array);  
?> 
```

任何人都可以帮我为pdf文件创建缩略图。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T06:40:00.680

Smargasy, Inc. 提供免费的直接下载 PDF 测试文件，其中包含解决 TYPO3 CMS 中“PDF 缩略图生成问题”的详细说明。” [http://www.smargasy.com/fileadmin/media_data/community/Smargasy_PDF-Thumbnail-兼容性测试文件.pdf](http://www.smargasy.com/fileadmin/media_data/community/Smargasy_PDF-Thumbnail-Compatibility-Test-File.pdf) "。测试文件有助于隔离在共享主机环境中使用 ImageMagick 和 GhostScript 作为图像处理和转换程序的系统上的问题。

这也应该有助于解决您的问题，因为解决方案既是示例 PHP 脚本，又是使用示例标准兼容的 PDF 文件进行测试。

最好的问候，迈克尔·布莱斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T21:02:00.160

我在自己的服务器上使用内置的 PHP 调用。这对我有用。

```
 if(!file_exists(THUMBS_DIR . $name . "." . $out_format))
    {            
        $im = new imagick();
        $im->setResolution(300,300);
        $im->readImage(ABS_PATH . $path);
        //$im->setImageColorspace(255);
        //$im->adaptiveSharpenImage(2,1);
        //$im->setCompression(Imagick::COMPRESSION_JPEG);
        $im->setCompressionQuality(100);
        $im->resizeImage(700,1000,Imagick::FILTER_LANCZOS,1, TRUE);
        $im->setImageFormat($out_format);
        $im->writeImage(THUMBS_DIR . $name . "." . $out_format);
        $im->clear();
        $im->destroy();
    } 
```

# php - PHP - 使用包含来模板页面是否常见？

> ID：13285013
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:15:53.763
> 
> 标签：php, templates

网络编程新手。我想知道使用包含来模板页面是否很常见。例如，您将页眉、导航和页脚代码都放在单独的文件中，然后将它们包含在内容不同的特定页面中。这与我在研究中遇到的模板语言或模板引擎（如 Smarty）有何不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:25:35.330

我使用这种方法，我认为它适合网络开发，

但更喜欢使用 require_once 函数而不是 include 函数

对模板引擎了解不多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:58:31.553

包含模板的问题是您必须包含设法包含页脚和页眉的文件。特殊情况很难维护，可能会导致修改大量文件。

最好的方法是使用可以处理页脚、页眉、侧边栏等的布局**来装饰您的模板**

从纯粹的技术角度来看，您的模板包含在一般演示文稿中，而不是您的模板包含围绕自身的一般演示文稿。

Symfony1 和 Twig 模板引擎正在这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:59:20.170

恕我直言，我宁愿拥有一个包含不会跨页面移动的任何内容的单一布局视图。

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta></meta>
        <styles></styles>
    </head>
    <body>
        <nav></nav>
        <header></header>
        <section class="rightColumn"></section>
        <section class="mainContainer">
             <?php include('your/awesome/view.php') ?>
        </section>
        <footer></footer>
        <script></script>
    </body>
</html> 
```

你可以看看[TWIG](http://twig.sensiolabs.org/)模板引擎。
这很容易

**布局.html.twig**

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta name="description" content="{% block metaDesc %}{% endblock %}"></meta>
        <style></style>
        {% block appendStyle %}{% endblock %}
    </head>
    <body id="{% block bodyId %}{% endblock %}">
        <nav></nav>
        <header></header>
        <ul class="breadcrumb">
            {% block breadcrumb %}{% endblock %}
        </ul>
        <section class="rightColumn"></section>
        <section class="mainContainer">
            {% block body %}{% endblock %}
        </section>
        <footer></footer>
        <script></script>
        {% block appendScript %}{% endblock %}
    </body>
</html> 
```

**page.html.twig**

```
{% extends '::layout.html.twig' %}

{% block metaDesc %}Hey, that is my description !{% endblock %}

{% block appendStyle %}
    <link rel="stylesheet" href="path/to/specific.css">
{% endblock %}

{% block bodyId %}index{% endblock %}

{% block breadcrumb %}
    <li><a href="">Homepage</a></li>
{% endblock %}

{% block body %}
    <h1>Awesome Website</h1>
    <h3>Latest news..</h3>
    <article></article>
{% endblock %} 
```

# xaml - XAML 中的 CSS 等价物

> ID：13285018
> 
> 赞同：12
> 
> 时间：2012-11-08T08:16:43.373
> 
> 标签：xaml

在 Web 开发中，样式表非常常用。在 Swing 中有用于处理 GUI 的布局管理器。我对 XAML 应用这些范例之一的假设是否正确？两个都？在这种情况下首选哪一个？

我已经检查过 Intellisense，但除了`Style`字段外，我没有发现任何特别明显的东西，而且我不清楚谷歌搜索的关键字是什么。建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T11:01:19.210

您正在寻找的是 ResourceDictionary。这比仅仅将样式放在 App.Resources 元素中要灵活得多，并且可以让您更好地控制样式的范围。

将样式放入 App.Resources 有许多缺点：

*   它可以很快填满并变成一个庞大而臃肿的列表
*   那里的每一种风格都可以在全球范围内使用。你可能不想要那个。

使用 A ResourceDictionary 在很大程度上解决了这个问题：

*   样式可以保存在一个或多个程序集中，并且可以跨应用程序重复使用
*   通过包含（或不包含）资源字典，您可以控制将哪些样式添加到页面
*   您可以以对您来说合乎逻辑的方式对样式和模板进行分组和组织

资源字典非常接近地映射到 CSS 文件。基本上，您使用这些来存储混合的东西：

*   风格
*   控制模板和数据模板
*   刷子等

而且，与样式表一样，您可以将它们应用于整个控件类型或使用命名样式的控件

```
<UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Project.Ui;component/Styles/DialogStyles.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/Project.Ui;component/Icons/Error.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/Project.Ui;component/Icons/Exit.xaml"/>
                <ResourceDictionary Source="pack://application:,,,/Project.Ui;component/Icons/Warning.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
</UserControl.Resources> 
```

定义资源字典：

```
 <ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                        xmlns:po="http://schemas.microsoft.com/winfx/2006/xaml/presentation/options"
                        xmlns:sys="clr-namespace:System;assembly=mscorlib"
                        xmlns:Infrastructure="clr-namespace:Hsbc.Ice.Shell.Infrastructure"
                        xmlns:Ui="clr-namespace:Hsbc.Ice.Shell.Infrastructure.Ui">

        <LinearGradientBrush x:Key="{x:Static Ui:Brushes.SelectedRowBackgroundBrushKey}" StartPoint="0.5,0" EndPoint="0.5,1" 
                                 po:Freeze="True">
            <GradientStop Color="#4D5F6E96" Offset="0"/>
            <GradientStop Color="#2191A0BE" Offset="0.2"/>
            <GradientStop Color="#2191A0BE" Offset="0.45"/>
            <GradientStop Color="#745F6E96" Offset="1"/>
        </LinearGradientBrush>
    </ResourceDictionary> 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-08T08:22:38.413

将样式作为资源存储在程序集中的更好方法，以便它可以在多个文件中作为 css 使用

您可以检查：[Silverlight 和样式](http://lostechies.com/gabrielschenker/2010/01/06/silverlight-and-styles/)

另请检查：[**如何通过 Application.Resources 设置 Silverlight 控件样式**](http://www.itscodingtime.com/itscodingtime/post/Setting-Silverlight-Control-Styles-via-ApplicationResources.aspx)

将这样的样式放在 Application.Xaml 文件中或为您创建新的

```
<Application xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
             x:Class="AppResStyle.App"
             >
    <Application.Resources>
        <Style x:Key="ButtonStyle" TargetType="Button">
            <Setter Property="BorderBrush" Value="Green" />
            <Setter Property="Foreground" Value="Blue" />
     </Style>
    </Application.Resources>
</Application> 
```

现在您可以在多个 uercontrol 中使用这样的方式为按钮分配样式

```
<UserControl x:Class="AppResStyle.Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    Width="130" Height="80">
    <Grid x:Name="LayoutRoot" Background="White">
        <Button Content="Button1" Height="75" Width="125" Style="{StaticResource ButtonStyle}" />
    </Grid>
</UserControl> 
```

# jqgrid - jqGrid中afterSaveCell的使用

> ID：13285021
> 
> 赞同：0
> 
> 时间：2012-11-08T08:17:06.580
> 
> 标签：jqgrid

我正在使用 Jqgrid。我在其中使用 afterSaveCell 甚至。但是在这个偶函数中不能调用。所以有什么问题请告诉我。我的代码

```
jQuery("#list").jqGrid(
{
....
editurl:"editMedicineGridData.html",
onCellSelect : function(rowid, iCol, cellcontent) {
 ..
},
gridComplete: function(){ 
 calculateTotal();
},                                          afterSaveCell: function (rowid, name, val, iRow, iCol) {
 alert("After Save Cell");
 calculateTotal();
} 
```

在此代码中 onCellSelect 和 gridComplete 正在工作，但 afterSaveCell 不工作我使用的是 jqgrid 4.4.1 。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:08:50.673

您没有发布您使用的更完整的 jqGrid 代码，所以我只能猜测您在做什么。我想您使用的编辑模式*是单元格编辑*。回调[afterSaveCell](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acell_editing#events)只能用于单元格编辑，不能用于表单编辑的内联编辑。

# javascript - 任何人都可以帮助我处理下面的这段代码吗？

> ID：13285024
> 
> 赞同：-3
> 
> 时间：2012-11-08T08:17:19.627
> 
> 标签：javascript

```
<script type="text/javascript">

function evenNumbers() {
    var i;
    for (i=0;i<=20;i++) {
        if (i%2==0) {
            document.write(i+"\n");
        }
    } 
} 
</script> 
```

我正在尝试使用`\n`转义序列打印数字，但它不起作用。任何人都可以请帮忙。注意：我不想使用`<br/>`标签，我也尝试过`/\n/`and `/\r/`。但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:19:43.390

一个简单的换行符在 HTML 中没有任何意义，它只是一个空格。

要么打印`<pre>`标签内的所有内容，保留空白格式，要么使用 HTML 标签，如`<br>`，`<li>`或其他任何合适的标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:20:25.320

仅当您的内容位于标签`'\n'`内时，才会反映该字符。`<pre>`在 html 中使用换行符：`<br />`.

# sql - 如何在 C++ builder 5 中将字符编码更改为 utf-8

> ID：13285025
> 
> 赞同：0
> 
> 时间：2012-11-08T08:17:19.893
> 
> 标签：sql, utf-8, c++builder

我有一个问题，我制作的程序无法显示字符串，因为它包含未知字符。我猜该程序是用拉丁文编码的，但它怎么能编码为 utf-8？

我不能简单地更改字符，因为我们是从客户那里收到的。

还是我需要在 SQL 中更改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:34:23.163

**当字段或表名有空格或非英文名称时，**使用 [ ]作为表名或字段名****

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T17:37:44.320

C++ builder 5 本身不支持 UTF8。它使用在 Windows 中定义的字符集，在控制面板/区域配置下。例如，如果您住在瑞典，您的字符集可能会适应瑞典语。如果您尝试打开数据库中的文本或应用程序中的文件，则该文本需要使用与本示例中的 Windows、瑞典语相同的字符集进行编码。在另一种情况下，你会得到奇怪的字符。

按照这个例子，如果你想从你的瑞典语应用程序中显示拉丁字符，你需要可以使用 Unicode VCL 控件，比如[Tnt 控件](http://tnt.ccci.org/delphi_unicode_controls/)

然后，读取字符串后，需要先将其从拉丁文转换为Unicode，然后才能放入Tnt控件中。您可以使用 MultiByteToWideChar 函数。无论如何，我建议您将您的 C++ Builder 更新到最新版本以支持本机 Unicode，生活会轻松很多。

如果您只是想在数据库中编码字符串并且它不在乎是否丢失符号，您可以在将文本字符集从拉丁文转换为 Windows 字符集之前将其输入数据库。您可以使用 Notepad++ 转换文本的字符集。**

# jenkins - Jenkins 不显示当前配置

> ID：13285027
> 
> 赞同：2
> 
> 时间：2012-11-08T08:17:26.310
> 
> 标签：jenkins, ubuntu-12.04

我目前正在和詹金斯争吵。我使用 Ubuntu Server 12.04 并从官方 apt-repository（包 jenkins）安装。一切顺利，我可以访问 GUI。

当我开始配置系统（例如/configure）时，我注意到系统似乎没有存储我配置的值。然后我检查了配置文件。事实证明，Jenkins 存储了正确的配置，但始终显示默认配置。

我检查了 /var/log/jenkins 中的日志文件，但没有找到任何提示。

我很感激任何帮助。

保重，亚历克斯

因为我现在不能回答我自己的问题：似乎我已经解决了这个问题。我做了什么：

```
1\. apt-get purge jenkins
2\. Checked that everything is deleted
3\. Add Jenkins Repository (http://pkg.jenkins-ci.org/debian-stable/)
4\. apt-get update
5\. apt-get install jenkins 
```

我不知道为什么，但这解决了我的问题。它也可能是一个干扰浏览器缓存，它阻止了 GUI 更新......

干杯，亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T10:58:21.807

正如[AlexWerz](https://stackoverflow.com/users/1808555/alexwerz)本人所回答的：

“看来我已经解决了这个问题。

我做了什么：

```
1\. apt-get purge jenkins
2\. Checked that everything is deleted
3\. Add Jenkins Repository (http://pkg.jenkins-ci.org/debian-stable/)
4\. apt-get update
5\. apt-get install jenkins 
```

我不知道为什么，但这解决了我的问题。
它也可能是一个干扰浏览器缓存，它阻止了 GUI 更新......

干杯，亚历克斯”

# java - 标记接口

> ID：13285029
> 
> 赞同：7
> 
> 时间：2012-11-08T08:17:28.947
> 
> 标签：java, marker-interfaces

有人可以解释一下java中标记接口的合同吗？

例如：如果`Clonable`是一个没有字段/方法的标记接口，那么`clone()`定义在哪里？

为什么我们要在使用`Clonable`时实现 i/f `clone()`？

那么我的问题是，如果`clone()`是`java.lang.Object`类的方法，为什么要实现`Clonable`i/f 来覆盖`clone()`.

有人可以详细说明 java 的这种约定吗？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T08:22:14.147

`clone()``java.lang.Object`在所有类扩展的类中定义，但是它是`protected`. 这实际上是一个具体的方法实现，它逐个字段地克隆对象，但前提是您已经实现了`Cloneable`接口以表明这是允许的。

在实践中，许多人重写了该`clone()`方法，以便他们可以制作它`public`并允许从类外部进行克隆。

这整个模式非常不寻常，不是您通常会复制的东西，我想不出 JVM 中有许多其他示例，其中有配对的标记接口和方法。从**Java 5**开始，最好使用注解作为标记。例如，`@XmlRootElement`用于将类型标记为 Jax-B 可序列化（Java 5 之后）与`Serializable`用于指示类是二进制可序列化的接口（Java 5 之前）的对比。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-09-08T07:07:28.800

**What is a marker interface ?**

Interface which does not contain any method to implement are called marker or the tag interfaces.

**Why marker interfaces ?**

The basic idea of having marker interfaces are to mention that the class is implementing an interface of which the behavior is implicit. The class is not expected to implement anything to adhere to the contract defined by the interface. In contrast it is to indicate the JVM regarding an expected functionality to perform implicitly.

**Java Example**

*   Serializable - Eligible to serialize this type of objects Remote - This type is eligible remote method calls Clonnable - Eligible to make a field-for-field copy of instances

**Can we create custom marker interfaces ?**

Yes, It is possible.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:26:39.820

`Clonable`不包含`clone()`受保护的方法`java.lang.Object`。

更多信息[在这里](https://stackoverflow.com/questions/1138769/why-is-the-clone-method-protected-in-java-lang-object)

来自 Josh Bloch 的 Effective Java 的引文：

*“Cloneable 接口旨在作为对象的 mixin 接口，用于宣传它们允许克隆。不幸的是，它无法达到此目的......这是一种非常非典型的接口使用，而不是要模拟的......为了实现接口要对一个类产生任何影响，它和它的所有超类都必须遵守一个相当复杂、无法执行且大部分未记录的协议”*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T08:29:12.863

标记接口是*标记*类的常用技术。它们不会向类添加行为（通常）。`Clonable`接口就是这样一个*标签*：每个带有标签的*类*都`Clonable`能够克隆自己（这是规则）。

Same with `Serializable`, although there is some more hidden magic behind that marker interface (the object serializer looks for some methods and fields, that the *tagged* class may implement or not)

*Bonus info*: forget about `Clonable`, its broken. If you want to create clones in real life, look for the copy constructor pattern.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-01T09:33:08.933

The `java.lang.object` class is a super/parent class of all java classes, if you want to create an object in java ,then it should be implements `java.lang.object` class. If you are not importing Object super class in your code then compiler will implicitly import that in your code.. SO automatically all its properties and behavior is available for you are object(program) ,including clone() method, if you call clone() method in your program that mean clone() method is called from super class (Object class),not from child class.

**Marker Interfaces:** Its true Marker Interfaces are empty interface it does not contains properties and behaviors. Now, The Question may be Raised.

**Q.** Who will implement Predefined Marker interface, if used in our program?

**Answer**: JVM will take that responsibility because, inside JVM that Marker interface functionality is defined, so it implements and adding some advance functionality to you are program.

So programmer no need to implements `Clonable` Marker interface, JVM will take that responsibility.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-08T08:18:44.407

标记接口本身没有任何主体。它们只是要求 java 解释器以预定义的特定方式来处理扩展它们的类的对象。

# php - 如何防止在 CI 中显示双重验证错误？

> ID：13285030
> 
> 赞同：1
> 
> 时间：2012-11-08T08:17:28.603
> 
> 标签：php, codeigniter, validation

我为表单中的多个字段设置了相同的回调函数：

```
foreach($fields as $class => $i)
{
    ++$i;
    $validation->set_rules('car_' . $i . '_one', $class, 'trim|xss_clean|callback_validate_car_fields[TRUE]');
    $validation->set_rules('car_' . $i . '_twor', $class, 'trim|xss_clean|callback_validate_car_fields[FALSE]');
    $validation->set_rules('in_car_' . $i . '_one', $class, 'trim|xss_clean|callback_validate_car_fields[TRUE]');
    $validation->set_rules('in_car_' . $i . '_two', $class, 'trim|xss_clean|callback_validate_car_fields[FALSE]');
} 
```

（`class`variale`Car`在这种情况下是）

这是回调函数：

```
function validate_car_fields($input, $required)
{

    if ($required === "TRUE" && empty($input))
    {
        $this->form_validation->set_message('validate_car_fields', 'Field %s can not be empty!');
        return FALSE;
    }

    return TRUE;
} 
```

它显示了双倍的错误：

```
* Field Car can not be empty!
* Field Car can not be empty!
* Field Car can not be empty!
* Field Car can not be empty! 
```

在这种情况下，这是可以理解的行为，但我想每个**字段名称**只显示一个错误，而不是每个字段显示 4 个错误。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:21:04.063

试试这个

```
function validate_car_fields($input, $required)
{
    static $validation_failed_once = FALSE;

    if ($required === "TRUE" && empty($input))
    {
        // Return FALSE without setting error message from 2nd validation fail onwards
        if ($validation_failed_once) return FALSE;

        $this->form_validation->set_message('validate_car_fields', 'Field %s can not be empty!');
        // Set error message only for the first validation error
        $validation_failed_once = TRUE;
        return FALSE;
    }

    return TRUE;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:04:04.950

它正在考虑使用新功能编辑或创建（[扩展本机库](http://codeigniter.com/user_guide/general/creating_libraries.html)） ：`libraries/MY_Form_validation.php`

```
function remove_duplicate_errors() {

    $arr = array();
    foreach(array_keys($this->_error_array) as $h) {
        if (in_array($arr, $this->_error_array[$h]))
            unset($this->_error_array[$h]);
        else $arr[] = $this->_error_array[$h];
    }

} 
```

`$this->form_validation->remove_duplicate_errors();`并在完成后调用`$this->form_validation->run()`。这应该删除字符串相同的所有情况。但是请在您的设计中考虑另一种方法，因为了解这 4 种方法中的哪一种不正确可能会很有用。

# python - 使用 django Form 子类创建下拉列表

> ID：13285032
> 
> 赞同：0
> 
> 时间：2012-11-08T08:17:31.657
> 
> 标签：python, django

我需要`user`创建一个事件，它有一个`Category`。当用户进入 create_event 页面时，他会看到一个实例`dropdown list`。我`Category`需要确保只有那些`Category`由 s​​ 创建的`user`应该显示在下拉列表中

我尝试为此进行子类`Form`化，以便可以在视图和模板中使用它，如下所示。

create_event 的模板：

```
<h3>select from existing categories</h3>
{{category_choices_form.as_p}} 
```

create_event 的视图：

```
def create_event(request,..):
    user_categories = Category.objects.filter(creator=request.user)
    form_data = get_form_data(request)
    category_choices_form = CategoryChoicesForm(request.user,form_data)# is this correct?
    ...

def get_form_data(request):
    return request.POST if request.method == 'POST' else None 
```

然后我创建了`Form`子类

```
class CategoryChoicesForm(forms.Form):
    def __init__(self, categorycreator,*args, **kwargs):
        super(CategoryChoicesForm, self).__init__(*args, **kwargs)
        self.creator=categorycreator
    categoryoption = forms.ModelChoiceField(queryset=Category.objects.filter(creator=self.creator),required=False,label='Category') 
```

但是，行开始`categoryoption =`会导致错误说`name 'self' is not defined`

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:28:48.790

当您想要将模型公开为 html 表单时，总是更喜欢使用[ModelForm](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)而不是简单的表单。当然，除非您正在做很多奇怪或复杂的事情，并且构建一个简单的表单更直接。

所以在你的情况下

```
from django.forms import ModelForm

class CategoryForm(ModelForm):
    class Meta:
        model = Category
        # exclude = ('blah', 'foo') # You can exclude fields from your model, if you dont want all of them appearing on your form. 
```

你的`get_form_data`功能是不必要的。这是您在视图中使用表单的方式

```
from django.template import RequestContext
from django.shortcuts import render_to_response

def create_event(request,..):
    if request.method == 'POST':
        form = CategoryForm(request.POST)
        if form.is_valid():
            # do stuff and redirect the user somewhere

    else:
        # We're in a GET request, we just present the form to the user
        form = CategoryForm()
    return render_to_response('some_template.html', {'form':form}, context_instance=RequestContext(request)) 
```

* * *

关于`self is not defined` 错误：

在你的`CategoryChoicesForm`你有这条线

```
 categoryoption = forms.ModelChoiceField(queryset=Category.objects.filter(creator=self.creator),required=False,label='Category') 
```

这是在班级级别，`self`只能在一个`instance`级别上使用。`self`在那里不“可见”。它在一个方法中是可见的`CategoryChoicesForm`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:32:00.267

使用表单，您应该以这种方式更改查询集：

```
class CategoryChoicesForm(forms.Form):
    categoryoption = forms.ModelChoiceField(
                           queryset = Category.objects.none(),
                           required=False,label='Category')

    def __init__(self, categorycreator,*args, **kwargs):
        super(CategoryChoicesForm, self).__init__(*args, **kwargs)
        self.creator=categorycreator
        self.fields['categoryoption'].queryset = Category.objects.filter( 
                                                           creator=self.creator
                                                                        ) 
```

# syntax - cmd语法错误网络用户密码

> ID：13285034
> 
> 赞同：2
> 
> 时间：2012-11-08T08:17:38.350
> 
> 标签：syntax, passwords, cmd

我有点愚蠢，并设法破坏了我朋友的帐户。发生的事情是：我打算将他的用户名从“Firstname Surname”更改为“Firstname Penis Surname”。为此，我以管理员身份进入他的笔记本电脑上的 cmd（Windows 按钮 -> cmd -> ctrl+shift+enter）。然后我写了

net user USER fullname:"Firstname Penis Surname"

我没有意识到我忘记了“全名”之前的“/”，所以我更改了用户的密码，而不是更改全名。现在的问题是......我们无法弄清楚该帐户的密码是什么。我们已经尝试了几乎所有的东西......全名，全名：“Firstname Penis Lastname”，全名：，全名：“Firstname，Lastname”等等，但没有任何效果。因此，由于通过 cmd 更改用户密码的语法是

网络用户用户密码

我使用了“：”和“/”和“（空格）”语法不知何故搞砸了，我们无法弄清楚密码。不用说，旧密码不再起作用了。当我像我一样搞砸语法时，任何人都知道帐户密码是什么？干杯

操作系统：Windows 7

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T03:33:37.560

嗯...这可能有效，具体取决于您的权限。假设您没有注销：

以管理员身份运行命令提示符，它应该让您无需密码即可执行此操作；键入网络用户您的姓名 *

输入您的密码

输入您的密码（再次）

你应该完成 - 天

# javascript - jquery javascript google maps：获取坐标

> ID：13285042
> 
> 赞同：0
> 
> 时间：2012-11-08T08:18:24.090
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我有带坐标属性的 div：

```
 <div class="c" coordinates="32.100,-118.3232">
    ..
    </div> 
```

我在 jquery 的帮助下得到坐标：

```
 var coord = $(".c").attr("coordinates"); 
```

当我需要将它放入我的谷歌地图javascript时，我是否需要以某种方式转换它：

```
 var latlng = new google.maps.LatLng(coord );
    addmarker(latlng)

function addmarker(latilongi) // function to add new marker when click on compare
{
    var marker = new google.maps.Marker({
        position: latilongi,
        title: 'new marker',
        draggable: true,
        map: map
    });
    map.setCenter(marker.getPosition())
} 
```

当它部署到我的页面上时，它似乎没有落入正确的位置，

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:33:26.863

如果`var coord = $(".c").attr("coordinates")`确实有效，您将拥有相同的

`var coord = "32.100,-118.3232"`

那是一个字符串，但该`google.maps.LatLng()`对象采用 2 个数字参数。所以，

```
var coord = "32.100,-118.3232";
var arr = coord.split(',');
var latlon = new google.maps.LatLng(parseFloat(arr[0]),parseFloat(arr[1]));
addmarker(latlon); 
```

# list - Guava Multiset 和 Multipmap

> ID：13285050
> 
> 赞同：2
> 
> 时间：2012-11-08T08:18:48.427
> 
> 标签：list, map, guava, multimap, multiset

我想知道 guava 的 multiset 和 multipmap 与 JDK 的 List 和 Map 在 1\. 时间性能和 2\. 内存消耗方面哪个更好

谁能解释一下番石榴的时间和记忆性能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T16:57:34.930

你混合了很多东西。

[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)，[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)并且[`Map`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.html)是 Java 集合库的 3 个基础接口。Guava 的[`Multiset`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)and [`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)，虽然听起来相似，但不是`Set`and的直接扩展`Map`。

[`Multiset`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multiset.html)并不是真正的 a [`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)（实际上它直接扩展[`Collection`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)），因为它允许重复，但也不（必然）满足排序[`List`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html)（为此，您可以拥有 a [`LinkedHashSet`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashSet.html)，这是一个[`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/Set.html)实现）。**[Multisets](http://en.wikipedia.org/wiki/Multiset)**通常被称为**bag**。

[`Multimap`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Multimap.html)是一个映射（但不是`Map`接口的扩展），接受同一个键的多个值。

另外，请考虑查看*[Multiset & Multimap：What's the Point？](https://stackoverflow.com/questions/2858127/multiset-multimap-whats-the-point)*虽然这最初是针对 C++ 的，但公认的答案为您提供了这些有意义的良好用例的具体示例。

* * *

因此，性能和内存消耗不是这里的**主要**关注点。主要关注的是这些是否适合您的用例的数据结构。

此外，接口实际上不允许您对内存消耗做出任何假设（除了对您对列表、集合或映射类型的期望的一般假设之外），因为它们仅定义 API 的合同。如果您想比较它们，您想查看的是这些接口的实际实现。

# jquery - AppJS - 不安全的 JavaScript 尝试使用 URL 访问框架

> ID：13285054
> 
> 赞同：0
> 
> 时间：2012-11-08T08:19:02.153
> 
> 标签：jquery, html, appjs

我正在制作一个桌面应用程序，我可以在其中使用 AppJS 过滤 iframe 内的一些特定 div。我有一个问题，我无法隐藏一些 div，有一个代码：

```
 <!DOCTYPE html>
<html>
<style>

</style>
<head>
<link type="text/css" rel="stylesheet" href="style.css" />
<script>
function resizeIframe(newHeight)
{
    document.getElementById('iframe1').style.height = parseInt(newHeight,10) + 10 + 'px';
}
</script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.js"></script>

</head>
<body onload='parent.resizeIframe(document.body.scrollHeight)'>
<h1>hello world</h1>
<iframe name='iframe1' id="iframe1" src="http://www.example.com" frameborder="0" border="0" cellspacing="0" style="border-style: none;width: 100%; height: 100%;"></iframe>

<script>
$(function(){
            var f=$('#iframe1')
            f.load(function(){ 
                f.contents().find('div').hide(); 
            })

        })

</script>
</body>
</html> 
```

我从控制台收到错误 Unsafe JavaScript 尝试使用 URL 访问框架

有可能解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:25:23.867

[由于Cross-Domain Policy](http://jimbojw.com/wiki/index.php?title=Introduction_to_Cross-Domain_Ajax)，您无法直接执行此操作。

但是，您可以首先使用 php 脚本从您自己的服务器（代理）获取目标 url 的内容，然后在 javascript/jquery 中加载其内容。这只是一个小修复，并不适合您希望加载的所有类型的页面。

例如：

```
<iframe src="path_to_my_server_php_script/iframe.php?url=http://example.com"></iframe> 
```

iframe.php 基本代码：{您也可以在这里设置标题或操作 html 代码}

```
<?php
    $url = $_GET['url'];
    $html = file_get_contents($url);
    echo $html;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:23:19.793

在创建窗口调用中添加一个选项以关闭安全性：

禁用安全性：真

有关示例，请参见 wiki 页面：[https ://github.com/appjs/appjs/wiki/app-object](https://github.com/appjs/appjs/wiki/app-object)

此设置应关闭跨域策略。

# datetime - 将日期时间格式转换为只有小时和分钟的时间

> ID：13285060
> 
> 赞同：0
> 
> 时间：2012-11-08T08:19:24.267
> 
> 标签：datetime, time, type-conversion

我有日期时间格式的值。例如：2012-10-17 00:05:00.000 我将它们转换为时间格式，例如：00:05:00.000 但对我来说仍然太长了。我只想要那段时间的小时和分钟部分。有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:26:25.973

尝试这个：

```
var dateTime = new DateTime(2012, 10, 17, 0, 5, 0, 0);
var hoursAndMinutes = dateTime.ToShortTimeString(); 
```

# jquery - 第二次拖动 div 的同一个元素 li 不应该是拖放

> ID：13285066
> 
> 赞同：0
> 
> 时间：2012-11-08T08:20:01.783
> 
> 标签：jquery, html, jquery-ui-draggable, jquery-ui-droppable

当将一个元素从一个盒子拖放`<div id="catalog" >`到一个盒子`<div id="dialogIteration">`时，工作正常。但是当第二次拖放同一个元素时，它很容易被丢弃但我想要的是它不应该被丢弃并警告“声明已经退出” 。

示例代码[http://jsfiddle.net/coolanuj/7683X/28](http://jsfiddle.net/coolanuj/7683X/28)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:28:21.037

在你的内部使用一个标志，`draggable`这将表明它是否已经被放到你的对话框中。

```
drop: function (evt, ui) {
    // logic
    if (ui.draggable.attr('data-dropped')) {
        // don't perform the drop
    } else {
        // perform the drop
        ui.draggable.attr('data-dropped', true);
    }
} 
```

如果您只希望当前被丢弃的那个不再存在`droppable`，那么在成功丢弃时重置`draggable`属性。

```
drop: function (evt, ui) {
    // logic
    if (ui.draggable.attr('data-dropped')) {
        // don't perform the drop
    } else {
        // perform the drop
        $('tag[data-dropped=true]').attr('data-dropped', false);
        ui.draggable.attr('data-dropped', true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:03:28.633

这是一个例子：http: [//jsfiddle.net/7683X/35/](http://jsfiddle.net/7683X/35/)

我使用`:contains`选择器检查文本是否已经被拖放到可放置元素中：

```
drop: function(event, ui) {
    if($("#dialogIteration ol:contains('"+ui.draggable.text()+"')").length > 0)
    {
       alert("Statement already exits");
       return false;
    }

    ...
} 
```

# android - 将图像从 URL 加载到 ListView

> ID：13285070
> 
> 赞同：0
> 
> 时间：2012-11-08T08:20:15.387
> 
> 标签：android, android-listview, adapter, listadapter

如何在 imageView 中为来自 URL 的列表项加载图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:23:23.320

只需您可以使用此[库](https://github.com/thest1/LazyList)

它使用了延迟加载的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:28:37.930

我在 ListView 适配器的 getView() 中使用了它。

```
Webview kWebview = new Webview(context);
kWebview.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
kWebview.setFocusable(false);
kWebview.setClickable(false);
kWebview.setLongClickable(false);
kWebview.setFocusableInTouchMode(false);
kWebview.setInitialScale(100);
kWebview.setBackgroundColor(Color.BLACK);

WebSettings kSet = kWebview.getSettings();
kSet.setLoadWithOverviewMode(false);
kSet.setLoadsImagesAutomatically(true);
kSet.setAppCacheEnabled(true);
kSet.setAppCachePath(_context.getCacheDir().toString());
kSet.setCacheMode(WebSettings.LOAD_DEFAULT);
kSet.setAllowFileAccess(true);
kSet.setDomStorageEnabled(true);

kWebview.loadUrl("http://image_url"); 
```

Webview 比 ImageView 加载更流畅

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:48:40.020

试试这个代码：

```
string path = item.ImgPath;
URL url = new URL(path);
URI uri = new URI(url.Protocol, url.UserInfo, url.Host, url.Port, url.Path, url.Query, url.Ref);
url = uri.ToURL();

//convert it into bitmap
var bitmap = Android.Graphics.BitmapFactory.DecodeStream(url.OpenStream());

//set bitmap drawable
System.IO.Stream stream = url.OpenStream();
Img.SetImageBitmap(bitmap); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-08T08:23:18.220

试试下面的代码：

```
try
{
     URL img_value = null;
     img_value = new URL("ImageUrl");
     Bitmap mIcon1 = BitmapFactory.decodeStream(img_value.openConnection().getInputStream());
     Image.setImageBitmap(mIcon1);
}
catch(Exception e)
{
} 
```

# nasm - NASM 汇编程序数据错误

> ID：13285079
> 
> 赞同：1
> 
> 时间：2012-11-08T08:20:54.200
> 
> 标签：nasm

在： 之后`section .data`，该行显示为：`number db 7 dup 0`。错误信息是：`Comma expected after operand 1`。但是，没有操作数。为什么会出现错误信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T02:01:36.037

NASM 不像`dup`MASM 那样使用，而是使用`TIMES`

```
number          times 7 db 0 
```

手册中的第 3.2.5 节： [3.2.5 次：重复指令或数据](http://www.nasm.us/doc/nasmdoc3.html)

# biztalk - 具有可变路径的 Biztalk 文件发送端口

> ID：13285084
> 
> 赞同：0
> 
> 时间：2012-11-08T08:21:14.090
> 
> 标签：biztalk

是否可以根据提升的属性使发送端口更改输出位置？

我们有一个接口，需要根据客户端将其发送到不同的端口。但是我们会定期添加客户端，因此添加新的发送端口（在管理员和编排中）将需要大量维护，而唯一发生的事情就是目录更改

文件夹是这样的...

```
\\server\SO\client1\Out
\\server\SO\client2\Out
\\server\SO\client3\Out 
```

我尝试使用`SourceFilename`来创建一个类似的文件名，`client1\Out\filename.xml`但这不起作用。

有没有办法用一个发送端口做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T21:47:15.630

可以在上下文中设置[OutboundTransportLocation](http://msdn.microsoft.com/en-us/library/bts.outboundtransportlocation.aspx)属性。此属性包含文件适配器将输出的文件的完整路径/名称。所以在你的情况下，我想你可以做一些事情（如果必须在管道组件中完成）：

```
message.Context.Write(
  OutboundTransportLocation.Name,
  OutboundTransportLocation.Namespace,
  string.format(@"\\server\SO\{0}\Out", client)); 
```

当然，您可以在编排中做类似的事情。

不需要动态端口...

# google-chrome - 谷歌浏览器禁用屏幕标尺

> ID：13285087
> 
> 赞同：55
> 
> 时间：2012-11-08T08:21:30.907
> 
> 标签：google-chrome

自 Google Chrome 上次更新以来，检查元素时会显示屏幕标尺。有谁知道如何禁用此标尺？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-03T12:57:30.800

这是一个老问题，但现在您可以启用或禁用现在`Chrome Developer Tools -> Settings -> Show Rulers`（您也可以按 F1 访问设置）。

![如何在 Chrome 中启用或禁用标尺](../Images/11005d9b934e5f776ce103ffd03113b1.png)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2014-10-11T03:29:36.177

转到**“设置”->“常规”**选项卡。

在页面末尾，单击**“恢复默认值并重新加载”**按钮。=)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2014-10-30T16:00:25.177

在 Chrome 38 中，开发者工具的菜单项左侧有一个“切换设备模式”按钮。单击它将切换标尺和设备仿真列表的显示。

![切换设备模式按钮是左起第二个，激活时突出显示蓝色](../Images/2345b6bdf21142c5e22418e5dce0b7b3.png)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-11-09T10:02:14.923

暂时不可能。

您需要等待 Chrome 25 或使用 Canari。

[https://plus.google.com/115203843155141445032/posts/771CKRcKYdM](https://plus.google.com/115203843155141445032/posts/771CKRcKYdM)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-07-09T23:36:44.287

这现在称为[设备模式](https://developer.chrome.com/devtools/docs/device-mode)。它允许您选择不同的设备屏幕尺寸以及模拟不同的网络速度。

您可以通过单击控制台上的**电话图标**来启用/禁用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-15T00:35:12.757

升级到最新的开发版本为我解决了这个问题： [http ://www.google.com/chrome/intl/en/eula_dev.html?dl=mac](http://www.google.com/chrome/intl/en/eula_dev.html?dl=mac)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-19T20:28:58.460

这开始突然发生在我身上。我在没有其他人使用的个人计算机上使用 Chrome 检查元素进行开发。

今天早上，我让整个标尺和菜单的东西看起来好像是凭空出现的。

上述建议无济于事。当我到达标尺的配置复选框时，我发现它已关闭。

通过在包含标尺复选框的同一配置菜单中重置默认值，我能够恢复旧的外观。希望能帮助像我一样陷入困境的人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-02T18:59:06.647

当您打开 unspect 编辑器时，只需单击图标（在 unspector 的右上角）进入设置，您会发现一个大按钮，上面写着**restore defaults and reload**。这对我有用。祝你好运

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-07-08T22:57:38.387

我正在使用 Chrome Canary（版本 45.0.2451.0 canary），并且标尺的存在似乎与是否启用了仿真有关。恢复默认值（如上所述）将其关闭，或者您可以前往底部的抽屉并执行此操作。

# python - 当我从数组中调用特定实体时遇到 python 舍入数字的问题

> ID：13285088
> 
> 赞同：1
> 
> 时间：2012-11-08T08:21:33.357
> 
> 标签：python, list, rounding

我有一个数组：

```
a = [0.313767818199811, 0.169656461527218, 0.934219696497667] 
```

当我做

```
print a
[0.313767818199811, 0.169656461527218, 0.934219696497667]

print a[0]
0.3137678182 
```

我需要将每个数字的所有数字保留在一个数组中。我需要`a[0]`平等`0.313767818199811`

告诉python保留数字的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:24:45.893

`a[0]`确实等于完全扩展。为了显示目的， print 语句正在截断它（使用`str`）。

下面的代码可能会使这一点更清楚。特别是，它解释了打印`a`和调用`a[0]`（非）元素之间的差异：`str(a)``repr``str``a`

```
>>> str(a)
'[0.313767818199811, 0.169656461527218, 0.934219696497667]'
>>> str(a[0])
'0.3137678182'

>>> repr(a)
'[0.313767818199811, 0.169656461527218, 0.934219696497667]'
>>> repr(a[0])
'0.313767818199811' 
```

如上面代码中所建议的，您可以`a[0]`按如下方式以全精度显示：

```
>>> print repr(a[0])
0.313767818199811 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T08:26:09.477

您可以使用：

```
print '%.15f' % a[0]
>> 0.313767818199811 
```

它将在小数点后显示 15 位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:25:59.730

你可能需要`repr()`在这里，`print`使用`str()`所以你的输出被截断：

```
In [13]: repr(a[0])
Out[13]: '0.313767818199811'

In [14]: repr(a[1])
Out[14]: '0.169656461527218' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:26:42.277

使用格式：`print '%.17f' % a[0]`17 位数字。如果您再次遇到此问题，请使用 google 'python float print precision'

# sql - How to get Distinct values from all columns of a table in SQL Server

> ID：13285092
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:21:47.233
> 
> 标签：sql, sql-server, select, distinct

I want to retrieve record for distinct value with it's ID ,Table is like this ::

```
ID     Name
1      Soap
2      eridu
3      Soap
4      rewfig
5      Soap 
```

Now I want result:

```
ID  Name
1   Soap
2   eridu
3   rewfig 
```

I use like this: [Table Name is tblRecord

```
select Distinct(Name) ,ID
  from tblRecord
 where Name in (select Distinct(Name) 
                  from tblRecord
               ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:25:00.697

```
SELECT ID, Name
FROM 
(
    SELECT ID, Name,
            ROW_NUMBER() OVER  (PARTITION BY NAME ORDER BY ID ASC) rn
    FROM tableName
) s
WHERE rn = 1
ORDER BY ID 
```

*   [**See SQLFiddle Demo**](http://sqlfiddle.com/#!3/576a6/3)

but the simpliest Solution if you have no other column is

```
SELECT MIN(ID) ID, Name
FROM tableName
GROUP BY Name 
```

*   [**SQLFiddle Demo**](http://sqlfiddle.com/#!3/576a6/4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:24:23.410

Try this:

```
;WITH CTE AS
(
  SELECT Id, Name, ROW_NUMBER() OVER(PARTITION BY Name ORDER BY Id) row_num
  FROM Table
)
SELECT Id, Name
FROM CTE
WHERE row_num = 1; 
```

This will give you:

```
ID  NAME
2   eridu
4   rewfig
1   Soap 
```

If you want to get the exact output like what you did in your question. You will need to generate a new ranking number for the result. Try to use `DENSE_RANK()` function like so:

```
;WITH CTE AS
(
  SELECT Id, Name, ROW_NUMBER() OVER(PARTITION BY Name ORDER BY Name) row_num
  FROM Table1
)
SELECT DENSE_RANK() OVER(ORDER BY Name) ID, Name
FROM CTE
WHERE row_num = 1; 
```

This should give you the exact desired result set:

```
ID  NAME
1   eridu
2   rewfig
3   Soap 
```

## [SQL Fiddle Demo](http://www.sqlfiddle.com/#!3/e4abb/5)

# fossil - 化石中常见的页眉和页脚

> ID：13285099
> 
> 赞同：1
> 
> 时间：2012-11-08T08:22:24.497
> 
> 标签：fossil

我有一个主远程存储库和两个本地存储库。但是，似乎对页眉/页脚/css 的更改不会在整个存储库中传播。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T15:23:50.740

Fossil 会将每个存储库接口的配置（无论您放在页眉/页脚/css 等中的什么）视为与文件版本控制无关的东西。当您使用您不是管理员的存储库时，这是有道理的。即使您没有权限对中央存储库进行相同的更改，您也将始终控制本地计算机上的 UI（默认情况下您是管理员），并使其外观和行为随心所欲。

要将更改传播到配置（包括页眉/页脚/css 等），您可以使用化石配置选项。只需键入`fossil configuration --help`即可查看如何跨存储库导出、导入和同步配置。

# mysql - 基于用户权重的mysql搜索

> ID：13285105
> 
> 赞同：0
> 
> 时间：2012-11-08T08:23:01.680
> 
> 标签：mysql, search

我想根据用户权重进行搜索，例如...

我有以下搜索参数...
Location
Age
Gender
Sexual-Orientation
Marital-status
和其他一些...

要求为每个参数添加权重，例如如果用户将权重设置为...
location weightage 为 10
性别到 5
年龄到 3

则搜索结果应该与位置更相关，而不是与性别相关，甚至更不与年龄相关。

我不知道该怎么做！！！请告诉我这怎么可能使用mysql。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:42:05.120

您可以在 mysql 中轻松完成此操作，因为它将布尔值视为数字：false 为 0，true 为 1。生成的查询可能类似于

```
SELECT name from customers 
ORDER BY (location = 'Fort Worth, TX')*10 + (age > 21)*3 DESC 
LIMIT 0,20; 
```

这将为每个客户创建一个“分数”。沃思堡 21 岁以上的人获得 13 分，沃思堡的年轻人获得 10 分，其他地方 21 岁以上的人获得 3 分，其他人获得 0 分。我们按此分数降序排列，以便首先显示最佳匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:40:12.630

据我所知，您不能真正做到这一点，但是您可以根据一个或多个属性对结果进行排序，其中第一个属性是具有最高优先级的属性，最后一个属性是最不重要的，例如：

```
ORDER BY Location, Gender, Age 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T06:29:48.700

大多数面向搜索引擎的网站都使用`FULL-TEXT-SEARCH`. `select`与...相比，它会更快`LIKE`...我添加了一个示例和一些链接...我认为这对您很有用...在此全文搜索中也有一些条件...

**步骤1**

```
CREATE TABLE articles (
    id INT UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    title VARCHAR(200),
    body TEXT,
    FULLTEXT (title,body)
); 
```

**第2步**

```
INSERT INTO articles (title,body) VALUES
    ('MySQL Tutorial','DBMS stands for DataBase ...'),
    ('How To Use MySQL Well','After you went through a ...'),
    ('Optimizing MySQL','In this tutorial we will show ...'),
    ('1001 MySQL Tricks','1\. Never run mysqld as root. 2\. ...'),
    ('MySQL vs. YourSQL','In the following database comparison ...'),
    ('MySQL Security','When configured properly, MySQL ...'); 
```

**STEP:3**
*自然语言全文搜索：*

```
SELECT * FROM articles
    WHERE MATCH (title,body) AGAINST ('database'); 
```

*布尔全文搜索*

```
SELECT * FROM articles WHERE MATCH (title,body)
     AGAINST ('+MySQL -YourSQL' IN BOOLEAN MODE); 
```

浏览此链接 [viralpatel.net](http://viralpatel.net/blogs/full-text-search-using-mysql-full-text-search-capabilities/)、[devzone.zend.com](http://devzone.zend.com/26/using-mysql-full-text-searching/)、[sqlmag.com](http://www.sqlmag.com/article/sql-server-70/sample-full-text-search-engine-8967)、[colorado.edu](http://www.colorado.edu/conflict/peace/usip_exmpl_srch.html)、[en.wikipedia.org](http://en.wikipedia.org/wiki/Full_text_search)

# wordpress - 如何在 Wordpress Multisite 中创建个人资料页面

> ID：13285106
> 
> 赞同：0
> 
> 时间：2012-11-08T08:23:02.370
> 
> 标签：wordpress

我找不到为 Wordpress 多站点网络下的所有用户创建前端个人资料页面的方法。如果可能，我还希望个人资料页面位于主站点上，而不是子站点上。我不想使用任何像 buddypress 这样的社交网络插件。我只想创建一个像这样的页面`http://mainsite.com/profile/username`

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:49:24.247

也许您可能会查看 Buddypress，它是 Wordpress 之上的一个社交层，能够做您需要的事情（即类似的东西`http://mainsite.com/profile/username`）。

链接：[http ://buddypress.org/](http://buddypress.org/)

更具体地说，在 Buddypress 中，默认行为是`http://mainsite.com/members/username`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:24:07.827

我注意到您已经编辑了问题，并且您正在寻找一种无需任何插件即可完成此任务的方法。Wordpress 中有一系列标签来显示作者的数据。所以基本上你可以创建一个页面，然后使用 the_author_meta 标签。例如，以下代码会回显名称存储在中的用户的名字和姓氏`$userID`：

```
<?php 
$pagename = $userID;
echo the_author_meta(user_firstname, $userID ); 
echo the_author_meta(user_lastname, $userID ); 
?> 
```

请注意，`$pagename`如果您使用静态页面作为主页，则该变量为空，但您的情况并非如此。

来源：[https ://codex.wordpress.org/Template_Tags/the_author_meta](https://codex.wordpress.org/Template_Tags/the_author_meta)

# android - 在 android 2.x 上实现 onLongClickListener、onDragListener

> ID：13285107
> 
> 赞同：1
> 
> 时间：2012-11-08T08:23:13.843
> 
> 标签：android, api, onlongclicklistener

起初：我知道`onDrag`并且`onLongClick`仅在 API 11(android 3.0) 或更高版本上可用。

类实现`onDragListener`和`onLonglickListener`. 它仅适用于 API 11 及更高版本。当我想设置`setonLongclickListener`时，`view`我使用这样的代码：

```
 .....
 protected static final int sdk = android.os.Build.VERSION.SDK_INT;
 ......
 ......
 if(sdk >= 11){ 
     for (int i = 0; i < LlayoutFront.getChildCount(); i++){ 
         LlayoutFront.getChildAt(i).setOnDragListener(this);
     }   
     LlayoutDeleteArea.setOnDragListener(this);
     LlayoutSetupArea.setOnDragListener(this);
     findViewById(R.id.RelativeLMain).setOnDragListener(this);
 } 
```

但是当我尝试运行它时应用程序崩溃了`android 2.1`。

`@SuppressLint("NewApi")`在我的课没有挽救我的情况之前。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T08:05:49.397

我解决了它；）删除实现方法`onDragListener`和`onLongClickListener`我的类。并像这样修改代码：

```
if(sdk >= 11){ 
    for (int i = 0; i < LlayoutFront.getChildCount(); i++){
        LlayoutFront.getChildAt(i).setOnDragListener(new OnDragListener() {                 
            public boolean onDrag(View v, DragEvent event) {
                return myOnDrag(v, event);
            }
        });
    }
    LlayoutDeleteArea.setOnDragListener(new OnDragListener() {                  
        public boolean onDrag(View v, DragEvent event) {
            return myOnDrag(v, event);
        }
    });
    LlayoutSetupArea.setOnDragListener(new OnDragListener() {                   
        public boolean onDrag(View v, DragEvent event) {
            return myOnDrag(v, event);
        }
    });
    findViewById(R.id.RelativeLMain).setOnDragListener(new OnDragListener() {                   
        public boolean onDrag(View v, DragEvent event) {
            return myOnDrag(v, event);
        }
    });
} 
```

# cloud-foundry - 如何逐步将系统服务添加到 Cloud Foundry

> ID：13285109
> 
> 赞同：2
> 
> 时间：2012-11-08T08:23:15.023
> 
> 标签：cloud-foundry

我想向微云添加新的系统服务。并按照文档“如何逐步将系统服务添加到 Cloud Foundry”中指定的步骤添加回显服务。但是我在我的微云所在的系统中看不到指定的文件夹结构。谢谢赛德什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:35:24.337

文档位于 CloudFoundry.org 的源代码树中。对于开发工作，这是最好的信息所在。这是我使用的文档：[https ://github.com/cloudfoundry/oss-docs/tree/master/vcap/adding_a_system_service](https://github.com/cloudfoundry/oss-docs/tree/master/vcap/adding_a_system_service)

另一个想法是：如果您想添加“服务”，那么我建议不要使用 Micro Cloud Foundry，而是设置一个 Ubuntu 虚拟机并从 CloudFoundry.org 安装代码库。可以在此处找到这样做的说明：[https ://github.com/cloudfoundry/oss-docs/tree/master/vcap/single_and_multi_node_deployments_with_dev_setup](https://github.com/cloudfoundry/oss-docs/tree/master/vcap/single_and_multi_node_deployments_with_dev_setup)

希望有帮助，约翰

# ubuntu - 输入“chmod -R 744 /home”后无法登录ubuntu

> ID：13285120
> 
> 赞同：0
> 
> 时间：2012-11-08T08:24:26.360
> 
> 标签：ubuntu, login, chmod

就在几天前，我以 root 身份登录我的 ubuntu PC，输入“chmod -R 744 /home”，然后重新启动我的 PC。从那以后，我发现由于权限问题，我无法登录我的帐户。我唯一可以登录的帐户是“guest”。任何人都可以帮助我，以便我可以使用我的原始帐户登录 ubuntu 吗？

我的 ubuntu 版本是 12.04 LTS。

这对我来说是一个大问题，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:29:18.943

选项1：

*   在 Live CD 上启动并安装您的磁盘

选项 2：

*   在恢复模式下重新启动您的机器（启动时按 ESC 或 SHIFT 多次）然后按照这种教程进行操作：

[http://naveenubuntu.blogspot.com/2012/05/recover-login-password-of-ubuntu-1204.html](http://naveenubuntu.blogspot.com/2012/05/recover-login-password-of-ubuntu-1204.html)

当您以 root 身份登录时，使您的文件系统可读写（如上面的链接所示）

选项 1 或 2 完成后

```
chmod 755 /<mounted path>/home
chmod 755 /<mounted path>/home/<your user> 
```

或者

```
chmod 755 /home
chmod 755 /home/<your user> 
```

755 将添加回允许目录浏览的“x”标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:30:03.123

使用 live ubuntu CD 从 CD 或 U 盘启动，并修复您`/home`目录的权限恢复正常

# android - 选项卡式活动不起作用

> ID：13285121
> 
> 赞同：2
> 
> 时间：2012-11-08T08:24:36.517
> 
> 标签：android, android-activity, android-tabhost, android-tabactivity

我一直在尝试将三个不同的活动分别添加到不同的选项卡中......一个活动是开始蓝牙发现和选择蓝牙设备以进行配对

第二个将是基于蓝牙的鼠标垫

我在关注很多网上的东西..基本上这个[http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

但不知何故，它显示了这个错误

```
11-08 13:41:24.673: D/AndroidRuntime(22886): Shutting down VM
11-08 13:41:24.673: W/dalvikvm(22886): threadid=1: thread exiting with uncaught exception (group=0x40ab6228)
11-08 13:41:24.714: E/AndroidRuntime(22886): FATAL EXCEPTION: main
11-08 13:41:24.714: E/AndroidRuntime(22886): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kant.BluetoothTest2/com.kant.BluetoothTest2.TabControllerActivity}: java.lang.RuntimeException: Your TabHost must have a FrameLayout whose id attribute is 'android.R.id.tabcontent'
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2194)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2229)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.ActivityThread.access$600(ActivityThread.java:139)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1261)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.os.Looper.loop(Looper.java:154)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.ActivityThread.main(ActivityThread.java:4945)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at java.lang.reflect.Method.invokeNative(Native Method)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at java.lang.reflect.Method.invoke(Method.java:511)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at dalvik.system.NativeStart.main(Native Method)
11-08 13:41:24.714: E/AndroidRuntime(22886): Caused by: java.lang.RuntimeException: Your TabHost must have a FrameLayout whose id attribute is 'android.R.id.tabcontent'
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.widget.TabHost.setup(TabHost.java:163)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.widget.TabHost.setup(TabHost.java:182)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.TabActivity.onContentChanged(TabActivity.java:135)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:281)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.Activity.setContentView(Activity.java:1885)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at com.kant.BluetoothTest2.TabControllerActivity.onCreate(TabControllerActivity.java:16)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.Activity.performCreate(Activity.java:4531)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1071)
11-08 13:41:24.714: E/AndroidRuntime(22886):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2150)
11-08 13:41:24.714: E/AndroidRuntime(22886):    ... 11 more 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:33:24.923

正如这里所说：

11-08 13:41:24.714: E/AndroidRuntime(22886): Caused by: java.lang.RuntimeException: 你的 TabHost 必须有一个 id 属性为 'android.R.id.tabcontent' 的 FrameLayout

您缺少具有正确 ID 的 frameLayout，因此请查看我的代码并尝试执行相同操作。希望能帮助到你 ：）

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rootview"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TabHost
    android:id="@+id/mainTabHost"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
     >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
           >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

                 <include layout="@layout/view_offer_tab1" />
                 <include layout="@layout/view_offer_tab2" />

        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

# plone - MultiCheckBoxWidget 呈现为 In-Out-Widget

> ID：13285122
> 
> 赞同：2
> 
> 时间：2012-11-08T08:24:40.680
> 
> 标签：plone, dexterity, z3c.form

我们有以下敏捷模式：

```
from plone.app.form.widgets import MultiCheckBoxWidget

visibilityVocabulary = SimpleVocabulary(
[
    SimpleTerm(u'OSP', title=u'OSP'),
    SimpleTerm(u'BIZ', title=u'BIZ'),
]

class ISomeSchema(Interface):
     # ...
     form.widget(visibility=MultiCheckBoxWidget)
     visibility = schema.Set(title=Visibility',
                             value_type=schema.Choice(vocabulary=visibilityVocabulary)
                             ) 
```

该字段使用 In-And-Out Widget 呈现，而不是使用我们架构中指定的复选框。

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:56:50.517

中的小部件`plone.app.form`用于`zope.formlib`表单。灵巧使用`z3c.form`表单库。

试试`z3c.form.browser.checkbox.CheckBoxFieldWidget`吧。像这样：

```
from zope import schema
from zope.schema.vocabulary import SimpleVocabulary
from zope.schema.vocabulary import SimpleTerm

from plone.directives import form

from z3c.form.browser.checkbox import CheckBoxFieldWidget

visibilityVocabulary = SimpleVocabulary(
[
    SimpleTerm(u'OSP', title=u'OSP'),
    SimpleTerm(u'BIZ', title=u'BIZ'),
])

class ISomeSchema(form.Schema):

     form.widget(visibility=CheckBoxFieldWidget)
     visibility = schema.Set(
             title=u'Visibility',
             value_type=schema.Choice(vocabulary=visibilityVocabulary)
         ) 
```

# asp.net-mvc - Infragistics 隐藏列更新

> ID：13285125
> 
> 赞同：3
> 
> 时间：2012-11-08T08:24:48.790
> 
> 标签：asp.net-mvc, razor, infragistics, ignite-ui, iggrid

我在实体框架代码优先 MVC 项目上使用 Infragistics。我想显示一个带有隐藏列（ID）的表，它必须是可编辑的。这是我到目前为止所得到的：

```
<table id="igTests"></table>
@(Html.Infragistics().Grid<BusinessModel.VO.TestVO>().ID("igTests")
    .AutoGenerateColumns(false)
    .Columns(column =>
    {
        column.For(x => x.TestId).DataType("int").HeaderText("id");
        column.For(x => x.TestNum).DataType("int").HeaderText("Test num");
        column.For(x => x.Type).DataType("string").HeaderText("Type");
        column.For(x => x.Nature).DataType("string").HeaderText("Nature");
        column.For(x => x.TeamName).DataType("string").HeaderText("Team");
        column.For(x => x.CreateDate).DataType("date").HeaderText("Creation date");
    })
    .Features(feature => {
        feature.Sorting().CaseSensitive(true);
        feature.Filtering().Mode(FilterMode.Simple);
    })
    .PrimaryKey("TestId")
    .DataSource(Model.TestsVO.AsQueryable())
    .DataBind()
    .Render()) 
```

这是显示的内容： ![](../Images/157dbf805882ce3760b2386615ed885f.png)

现在让我们添加更新功能（我知道 readOnly 是无用的，因为我们不应该看到它）：

```
feature.Updating().EnableAddRow(true).EnableDeleteRow(true).EditMode(GridEditMode.Row).ColumnSettings(settings =>
            settings.ColumnSetting().ColumnKey("TestId").ReadOnly(true)
        ); 
```

并隐藏我的 ID 列：

```
column.For(x => x.TestId).DataType("int").HeaderText("id").Hidden(true); 
```

这是我得到的。如您所见，该表的行为就像我的 ID 列是可见的。

![](../Images/b97d87353182f7f6be1e76bfd5343d5c.png)

这发生在我添加更新功能时。您是否知道如何修复“添加新行”行，就像我的列是可见的一样？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:54:42.617

可能你应该添加这个

```
}).Features(features => features.Hiding()
           .ColumnSettings(settings =>
           {
                 settings.ColumnSetting().ColumnKey("id").Hidden(true).AllowHiding(false) 
```

[http://www.infragistics.com/products/jquery/sample/grid/column-hiding-on-initialization](http://www.infragistics.com/products/jquery/sample/grid/column-hiding-on-initialization)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:43:54.930

我让它`.Width("0px")`在我的 ID 列上使用和 ReadOnly 工作。有点脏但别无选择...

# c++ - TVITEM LPARAM 存储字符串

> ID：13285126
> 
> 赞同：0
> 
> 时间：2012-11-08T08:24:48.513
> 
> 标签：c++, winapi, treeview, common-controls, lparam

我有一个树视图，列出了放在上面的文件。

当我创建一个新的树视图项目时，我想将文件的地址作为字符串存储在该项目中，并在以后为各种邪恶目的检索它。

查看 Microsoft 文档中的[TVITEM 结构](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773456%28v=vs.85%29.aspx)，显然`LPARAM`是存储值的地方：

> 参数
> 
> ```
> Type: LPARAM
> 
> A value to associate with the item. 
> ```

所以，我已经这样做了：

```
TVITEM tvi;
tvi.mask = TVIF_TEXT;
tvi.pszText = const_cast<char *> (str0.c_str());
tvi.cchTextMax = sizeof(tvi.pszText);
tvi.lParam = (LPARAM) foo;  // SETTING LPARAM HERE, foo IS A const char * 

TVINSERTSTRUCT tvis;
tvis.item = tvi;
tvis.hInsertAfter = 0;
tvis.hParent = hti0;

// Send message to update tree, and return tree item.
return TreeView_InsertItem(tvw_filelist_, &tvis); 
```

然后，当我尝试检索我的价值时......

```
HTREEITEM htiSel = TreeView_GetSelection(tvw_filelist_);

TVITEM tvItem;
tvItem.hItem = htiSel;

TreeView_GetItem(tvw_filelist_, &tvItem);
const char * info = (const char *) tvItem.lParam;
MessageBox(NULL, info, "Alert", MB_OK); 
```

...我只是得到垃圾，表明我的指针超出范围或正在打盹什么的。该指针的大小始终为 4。

这是做我想做的事情的正确方法吗？如果是这样，发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:27:47.073

当然，在尝试了很长时间之后花时间发布一个问题，答案会在几秒钟内出现。

原来 TVITEM 掩码需要包含 TVIF_PARAM，类似于[这个问题](https://stackoverflow.com/questions/3707516/sendmessage-lparam-empty)。

如果我将上面的代码更改为：

```
tvi.mask = TVIF_TEXT | TVIF_PARAM; 
```

它按预期工作。

~~不过，我仍然不确定这是否是 LPARAM 的推荐用途。~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:59:48.843

```
struct CustomTreeData
{
    LPSTR str;   // or even std::string to forget about memory managment
    // TODO: any other data you need
};
...
TVITEM tvi;
tvi.mask = TVIF_TEXT | TVIF_PARAM;

CustomTreeData* myDataPtr = new CustomTreeData;   // the memory should be free later
myDataPtr->str = stringWhatIWant;   // And don't forget to alloc memory for str!
tvi.lParam = (LPARAM) myDataPtr; 
```

我不检查此代码，但它应该可以工作。快乐编码:)

# java - java等级到GPA

> ID：13285128
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:24:50.667
> 
> 标签：java, syntax-error

我有一个 java 应用程序，可以将输入等级 A、B、C、D、E 和 F 转换为 GPA 点，但是我有错误，不确定错误在哪里，还有我如何改进下面的代码，以便用户不输入其他输入比等级？

```
 import java.lang.*;
import java.io.*;
import java.util.*;
import java.util.Scanner;

  public class Program
 {
     public static void main(String[] args) 
    {
      Scanner keyboard = new Scanner (System.in);

      String letterGrade = " ";
      double gradePoints;
      boolean error = true;

      System.out.println("Enter A Letter Grade: ");
      letterGrade = keyboard.next();

      if( letterGrade == "A+")
      {
          gradePoints = 4.0;
      }
      else if ( letterGrade == "A")
      {
          gradePoints = 4.0;
      }
      else if( letterGrade == "A-")
      {
          gradePoints = 3.67; 
      }
      else if ( letterGrade == "B+")
      {
          gradePoints = 3.33;
      }
      else if( letterGrade == "B")
      {
          gradePoints = 3.0; 
      }
      else if ( letterGrade == "B-")
      {
          gradePoints = 2.67;
      }
      else if( letterGrade == "C+")
      {
          gradePoints = 2.33; 
      }
      else if ( letterGrade == "C")
      {
          gradePoints = 2.0;
      }
      else if( letterGrade == "F")
      {
          gradePoints = 0.0; 
      }
      else(error)
      {
        System.out.println("Error, you did not enter the correct information");
      }
        if(!error)
        {
        System.out.println("Your grade point(GPA) is " + gradePoints);

        }

    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:29:00.130

您必须使用 equals() 方法检查字符串是否相等

```
if(letterGrade = "A+")

to 

if(letterGrade.equals("A+")) 
```

但是，您将“A+”分配给 letterGrad，而不是检查 letterGrad==A+

`=`是赋值运算符，`==`是相等运算符（检查两个原语是否具有相等的值，或者两个对象引用是否指向同一个对象）。'.equals()' 是 java.lang.Object() 类的一个方法，用于检查两个对象是否相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:29:31.807

第一的

您不会将字符串（或其他对象）与`==`; 你用的`equals`方法。直接比较`==`告诉你两个对象是否相同，而不是它们的值是否相同。对于字符串，在您的程序`equalsIgnoreCase`中会更合适。

另外，请注意比较运算符是`==`; `=`是赋值运算符，不检查是否相等；`letter = "F"`放入`letter`一个持有`F`. 您的错误是由于表达式`letter = "F"`“返回”正在分配的值（包含“F”的字符串）。

正在做

```
if (letter = "F") { 
```

方法

```
letter <-- new String("F")
if ("F") <-- This does not compile because it expects a boolean (if (true)  or if(false) 
```

关于输入控件，除了已经完成的工作之外，您不能做太多事情，否则您将需要一个 GUI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:29:11.540

以这种方式检查

```
 else if( letterGrade.equalsIgnoreCase("A-"))
   {
      gradePoints = 3.7; 
   } 
```

其他地方也有变化

如果要检查用户输入是否有效，可以通过这种方式进行检查

```
 String grades = "A+B+CDA-";

    if(grades.indexOf("A")==0){
        System.out.println("imhere");
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:29:19.020

首先你的`if`说法是错误的。

应该是`if( letterGrade == "A+")`。

请注意，您应该`==`用于比较。

如果你想比较两个字符串，java 提供了更好的方法来匹配字符串的内容，因为`==`运算符比较引用而不是内容。

`if(letterGrade.equals("A+"))` 或者`if( "A+".equals(letterGrade))`

它们都将返回一个布尔值（`true`如果 letterGrade 的内容与“A+”匹配，`false`否则）。

# python - 长链表

> ID：13285130
> 
> 赞同：0
> 
> 时间：2012-11-08T08:24:54.207
> 
> 标签：python, linked-list, long-integer

我将如何使用单个链表创建一个 long ？我需要开始，但我不知道如何。有人可以告诉我如何获得基本的 BigInt 吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-08T17:16:13.830

Python2.7 没有 bigint，但有 int 和 longs，请参阅[python 文档](http://docs.python.org/2/library/stdtypes.html "看这里")。Python3 只有整数。然而在实践中，由于 Python 不是一种类型语言，您可以在 long 和 int 之间无缝切换。一旦达到 maxint，数字就会转换为 long，它没有大小限制。

```
>>> import sys
>>> sys.maxint
9223372036854775807
>>> 2**10
1024
>>> 2**20
1048576
>>> 2**50
1125899906842624
>>> 2**100
1267650600228229401496703205376L 
```

[您可以在 SO 上](https://stackoverflow.com/questions/280243/python-linked-list#280284)找到链表的实现。通常一个列表可以携带任何对象，因为 Python 是动态类型的。我看不出链接列表与 long 有什么关系。

# windows-phone-8 - 为什么我的应用在 Fast App Switcher 中出现黑屏？

> ID：13285132
> 
> 赞同：0
> 
> 时间：2012-11-08T08:25:15.967
> 
> 标签：windows-phone-8

任何想法为什么我的应用程序在休眠/暂停时会绘制黑屏（用户按下窗口键，然后长按后退键以查看所有休眠应用程序）？

它是 Directx113D 应用程序，应该非常接近 Marble Maze 和 Direct3D 示例的实现。他们表现得很好。

我已经尽我所能以类似的方式打破这两个样本，但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T14:48:22.347

好的，我已经解决了这个问题。

问题出在阿尔法上。我不知道为什么，但是当应用程序获得焦点时，它会很好地绘制 alpha。但是，当发送到背景 alpha 混合以某种方式关闭并且每个像素的 alpha 保持为 0 时。对于我的混合状态，我更改了：

```
SrcBlendAlpha = D3D11_BLEND_ZERO 
DestBlendAlpha = D3D11_BLEND_ZERO 
```

到

```
SrcBlendAlpha = D3D11_BLEND_ZERO 
DestBlendAlpha = D3D11_BLEND_ONE 
```

# php - JQuery .load 我需要将内容从一个 url 加载到另一个

> ID：13285136
> 
> 赞同：0
> 
> 时间：2012-11-08T08:25:31.510
> 
> 标签：php, jquery, iframe, canvas, joomla

我想从我自己网站[http://www.salcombeyurts.com/stage/yurt1.html](http://www.salcombeyurts.com/stage/yurt1.html)上的 URL 的 ID maininner 的 div 中加载内容到另一个 url [http://www.salcombeyurts 上的 id yurt1_avail 的 div 中。 com/stage/availability.html](http://www.salcombeyurts.com/stage/availability.html)在同一站点上。

我在 CMS 之外尝试了一个测试，它可以工作。我正在使用这个 JQuery：

```
<div id="yurt1_avail"></div>
<script type="text/javascript">
$(document).ready(function() {
$('#yurt1_avail').load('yurt1.html #maininner');
});
</script> 
```

使用 CMS/MySQL 和 .htaccess 重写 SEF URL 时是否可以这样做？这是否仅适用于静态内容 html 页面？

如果这种方法不起作用，我有什么替代方法？我需要将一个页面上的可用性表的内容加载到一个摘要页面上，该页面将显示 3 个不同的可用性表。我正在使用 Joomla，我选择的可用性组件只能直接链接到，它没有用于嵌入文章或模块的模块选项或短代码。

也许可以使用 iFrames，但是我将如何使用 CSS 来隐藏所有其余的页面内容？我只需要#maininner 的内容。

或者 HTML5/CSS3 标记中有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:11:26.587

AJAX 调用是一个 http 请求，因此即使您有 URL 重写它也可以工作。

案例 1 - 如果您需要将内容上传到主 div（通常显示内容的布局部分），那么您必须完全禁用您的编辑器（默认情况下是 tinyMCE）。不要试图通过单击“HTML”按钮来编辑 HTML 源代码，它不会起作用，因为 JavaScript 代码已被 TinyMCE 清理。

案例 2 - 如果 AJAX 请求的内容要上传到其他地方，例如在侧边栏中，您将不得不使用 Joomla 模块，也许是代码友好的模块，例如其中之一：[http://extensions .joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-modules)

# c - 将指针作为本地指针传递给函数

> ID：13285138
> 
> 赞同：0
> 
> 时间：2012-11-08T08:25:32.397
> 
> 标签：c, pointers

```
gcc 4.7.2 c89 
```

你好，

我有以下功能：

```
void module_param_destroy(module_param_t *param)
{
    param = NULL;

    /* Stop the compiler from complaining */
    APR_UNUSED(param);
} 
```

我这样称呼它：

```
module_param_destroy(module->call_param); 
```

是否将参数`param`设置为NULL。当我传递本地副本时，我认为它在这里没有做任何有用的事情。

这样做会更好：

```
void module_param_destroy(module_t *md)
{
    md->param = NULL;

    /* Stop the compiler from complaining */
    APR_UNUSED(md->param);
} 
```

并这样称呼它：

```
module_param_destroy(md); 
```

这些结构已从 malloc 全局分配内存。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T08:34:02.960

如果 param 指向从 获得的内存`malloc`，则将其设置`NULL`为不足以正确清理。

有两种常用的使用方法`module_param_destroy`：

```
void module_param_destroy(module_param_t *param)
{
    free(param);
} 
```

或者

```
void module_param_destroy(module_param_t **param)
{
    free(*param);
    *param = NULL;
} 
```

主要区别在于，对于第二个变体，param 被设置为一个可测试的值，以表明它已被清理。对于第一个变体，您必须记住，`module_param_destroy`在函数返回后传递给的指针是不可用的。

你分别称它们为

```
module_param_destroy(module->call_param); 
```

和

```
module_param_destroy(&module->call_param); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:31:22.657

你的第二个`module_param_destroy`对我来说看起来不错，但为了完整起见，这是你第一个函数的工作版本：

```
void module_param_destroy(module_param_t **pparam)
{
    *pparam = NULL;
} 
```

编辑：是的，正如另一个答案中所解释的那样，它不会释放任何内存，因此这是指向`malloc`ed 内存的最后一个指针，您必须`free`先将其设置为`NULL`...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T08:31:43.340

第一个版本不会更改指针，因为您正在分配指针的*本地*副本，而是使用指向指针的指针进行分配：

```
void module_param_destroy(module_param_t **param)
{
    *param = NULL;    
} 
```

并这样称呼它：

```
module_param_destroy(&module->call_param); 
```

# development-environment - ovirt:create iso/nfs 存储域错误

> ID：13285146
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:26:00.243
> 
> 标签：development-environment, virtualization, fedora

创建时遇到问题

> “新域”iso/nfs 存储，它打印“执行操作时出错新 NFS 存储域：未安装存储域远程路径”

错误代码是 477。

我跟着“http://wiki.ovirt.org/wiki/Troubleshooting_NFS_Storage_Issues”发现vdsm用户现在不能使用mount。

> “安装：只有 root 可以做到这一点”

我使用的版本：

```
oVirt Engine Version: 3.1.0-2.fc17 
oVirt Node Hypervisor 2.5.4-0.1.fc17 
```

错误日志：

```
2012-11-08 09:15:00,004 INFO  [org.ovirt.engine.core.bll.AutoRecoveryManager] (QuartzScheduler_Worker-77) Checking autorecoverable storage domains done
2012-11-08 09:17:28,920 WARN  [org.ovirt.engine.core.bll.GetConfigurationValueQuery] (ajp--0.0.0.0-8009-2) calling GetConfigurationValueQuery (StorageDomainNameSizeLimit) with null version, 
using default general for version
2012-11-08 09:17:29,333 INFO  [org.ovirt.engine.core.vdsbroker.vdsbroker.ValidateStorageServerConnectionVDSCommand] (ajp--0.0.0.0-8009-3) [7720b88f] START, ValidateStorageServerConnectionVDSCommand(vdsId = 12bcf124-29a4-11e2-bcba-00505680002a, storagePoolId = 00000000-0000-0000-0000-000000000000, storageType = NFS, connectionList = [{ id: 6556c55d-42a4-4dcc-832c-4d8987ebe6bd, connection: 200.200.101.219:/usr/lwq/iso };]), log id: 52777a80
2012-11-08 09:17:29,388 INFO  [org.ovirt.engine.core.vdsbroker.vdsbroker.ValidateStorageServerConnectionVDSCommand] (ajp--0.0.0.0-8009-3) [7720b88f] FINISH, ValidateStorageServerConnectionVDSCommand, return: {6556c55d-42a4-4dcc-832c-4d8987ebe6bd=0}, log id: 52777a80
2012-11-08 09:17:29,392 INFO  [org.ovirt.engine.core.bll.storage.AddStorageServerConnectionCommand] (ajp--0.0.0.0-8009-3) [7720b88f] Running command: AddStorageServerConnectionCommand internal: false. Entities affected :  ID: aaa00000-0000-0000-0000-123456789aaa Type: System
2012-11-08 09:17:29,404 INFO  [org.ovirt.engine.core.vdsbroker.vdsbroker.ConnectStorageServerVDSCommand] (ajp--0.0.0.0-8009-3) [7720b88f] START, ConnectStorageServerVDSCommand(vdsId = 12bcf124-29a4-11e2-bcba-00505680002a, storagePoolId = 00000000-0000-0000-0000-000000000000, storageType = NFS, connectionList = [{ id: 6556c55d-42a4-4dcc-832c-4d8987ebe6bd, connection: 200.200.101.219:/usr/lwq/iso };]), log id: 36cb94f
2012-11-08 09:17:29,656 INFO  [org.ovirt.engine.core.vdsbroker.vdsbroker.ConnectStorageServerVDSCommand] (ajp--0.0.0.0-8009-3) [7720b88f] FINISH, ConnectStorageServerVDSCommand, return: {6556c55d-42a4-4dcc-832c-4d8987ebe6bd=477}, log id: 36cb94f
2012-11-08 09:17:29,658 ERROR [org.ovirt.engine.core.bll.storage.NFSStorageHelper] (ajp--0.0.0.0-8009-3) [7720b88f] The connection with details 200.200.101.219:/usr/lwq/iso failed because of
 error code 477 and error message is: 477
2012-11-08 09:17:29,717 INFO  [org.ovirt.engine.core.bll.storage.AddNFSStorageDomainCommand] (ajp--0.0.0.0-8009-11) [1661aa36] Running command: AddNFSStorageDomainCommand internal: false. En
tities affected :  ID: aaa00000-0000-0000-0000-123456789aaa Type: System
2012-11-08 09:17:29,740 INFO  [org.ovirt.engine.core.vdsbroker.vdsbroker.CreateStorageDomainVDSCommand] (ajp--0.0.0.0-8009-11) [1661aa36] START, CreateStorageDomainVDSCommand(vdsId = 12bcf12
4-29a4-11e2-bcba-00505680002a, storageDomain=org.ovirt.engine.core.common.businessentities.storage_domain_static@4a900545, args=200.200.101.219:/usr/lwq/iso), log id: 50b803a0
2012-11-08 09:17:35,233 ERROR [org.ovirt.engine.core.vdsbroker.vdsbroker.BrokerCommandBase] (ajp--0.0.0.0-8009-11) [1661aa36] Failed in CreateStorageDomainVDS method
2012-11-08 09:17:35,234 ERROR [org.ovirt.engine.core.vdsbroker.vdsbroker.BrokerCommandBase] (ajp--0.0.0.0-8009-11) [1661aa36] Error code StorageDomainFSNotMounted and error message VDSGeneri
cException: VDSErrorException: Failed to CreateStorageDomainVDS, error = Storage domain remote path not mounted: ('/rhev/data-center/mnt/200.200.101.219:_usr_lwq_iso',)
2012-11-08 09:17:35,260 INFO  [org.ovirt.engine.core.vdsbroker.vdsbroker.BrokerCommandBase] (ajp--0.0.0.0-8009-11) [1661aa36] Command org.ovirt.engine.core.vdsbroker.vdsbroker.CreateStorageD
omainVDSCommand return value 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:06:57.993

据我所知，VDSM 确实 sudo 来运行特权命令，但挂载错误仍然很奇怪。您可以发送共享 vdsm 日志吗？

此外，您可能会在引擎用户或 vdsm 邮件列表上获得更多关注。

# php - 如何用php添加用户表单的数量来输入数据

> ID：13285150
> 
> 赞同：0
> 
> 时间：2012-11-08T08:26:18.730
> 
> 标签：php, forms

我设计了一个表格来按月记录项目的付款计划，所以用户已经知道项目将花费多长时间有些项目有 4 个月，所以意味着用户必须记录 4 个月的付款，有些项目有 8 个月，所以意味着用户有记录 8 次付款我想要的是用户可以选择输入表单进行记录，例如，如果选择 4，那么表单将显示为 4，因此任何建议使用 php 进行编码

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:33:36.583

您的问题非常不清楚，但听起来您正在尝试创建一个带有“月”选择的多选项框的表单。这是您必须在 PHP 中回显的下拉框的 HTML。

```
<select>
  <option value="4">4 Months</option>
  <option value="8">8 Months</option>
</select> 
```

# c# - HttpWebRequest 不会抛出异常

> ID：13285159
> 
> 赞同：0
> 
> 时间：2012-11-08T08:26:55.297
> 
> 标签：c#, httpwebrequest, timeout, httpwebresponse, webexception

我对 httpwebrequest 异常有疑问。我使用以下代码发出请求并捕获异常。

```
try
{    
    Uri url= new Uri("https://www.example.com");
    HttpWebRequest request2 =(HttpWebRequest)WebRequest.Create(url);

    request2.Timeout = 10000;

    HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse();
    response2.Close();
}
catch (TimeoutException)
{
    listBox.Items.Insert(0, "Timeout");
}
catch (WebException ex)
{
    using (WebResponse response = ex.Response)
    {
        HttpWebResponse httpResponse = (HttpWebResponse)response;
        listBox.Items.Insert(0, "Status code(Benchmark):" + httpResponse.StatusCode);
    }
}
catch
{
    listBox.Items.Insert(0, "Failure");
} 
```

在公司网络中，当我输入一个不存在的网址（例如 www.oiuahsdupiasduiuhid.com）时；它抛出 webexception 。我得到状态码：未找到或服务不可用。但是，如果我在家里尝试，它不会抛出任何异常。它等待大约 1 秒，然后没有任何错误停止工作。我删除了所有异常以查看发生了什么，但问题是它没有显示任何错误。您对问题所在有任何想法吗？

或任何建议，我该如何用不同的方式处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:34:09.997

如果不了解您的应用程序设计的更多信息，特别是调用堆栈中的异常处理，很难说为什么它的行为就像您在家时一样。

但是当我刚刚尝试了您的确切代码时，它确实抛出了 a `WebException`，但是`httpResponse.StatusCode`抛出了 a`NullReferenceException`因为`httpResponse`是 null 。如果您可能在调用堆栈中进一步吞下此异常，它可以解释您所看到的情况。

`httpResponse`在许多`WebException`情况下会为空，因为您的请求没有收到任何响应，特别是在超时情况下。

在铸造之前`WebException.Response`，您需要检查[`WebException.Status`](http://msdn.microsoft.com/en-us/library/system.net.webexception.status.aspx)属性。如果该状态表明收到了响应，那么您可以去 check `WebException.Response`，否则它将为空。尝试类似：

```
if(e.Status == WebExceptionStatus.ProtocolError) {
    listBox.Items.Insert("Status Code : {0}", 
       ((HttpWebResponse)e.Response).StatusCode);
}
else
{
    listBox.Items.Insert("Status : {0}", ex.Status);
} 
```

作为旁注，你`response2.Close();`永远不会在`HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse();`抛出异常时被调用，所以你应该将它包装在一个 using 块中：

```
using(HttpWebResponse response2 = (HttpWebResponse)request2.GetResponse())
{
    // do something with response
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:05:32.043

感谢 psubsee2003。我得到了我的答案。这是我的代码，它工作正常。我在 webexception 中添加了以下代码。

```
if (ex.Status == WebExceptionStatus.ProtocolError)

 {
   using (WebResponse response = ex.Response)

{
   HttpWebResponse httpResponse = (HttpWebResponse)response;
   listBox2.Items.Insert(0, "Status:" + httpResponse.StatusCode);

}
 }

else
{
   listBox2.Items.Insert(0, "Status: " + ex.Status);
 } 
```

# javascript - 如何为 Ajax 编程保持 ID 的唯一性？

> ID：13285160
> 
> 赞同：1
> 
> 时间：2012-11-08T08:26:58.230
> 
> 标签：javascript, ajax

在我看来，Ajax 编程中的大多数事情都是通过“发明”ID 来解决的。可能出现的问题是，保持 ID 的唯一性。您如何解决问题（例如在管理消息列表时……）？通过生成长随机字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:28:32.953

如果这些消息对应于数据库中的服务器端，则应使用数据库中的 ID（如果它们在数据库中没有唯一标识符，则应该使用）。

如果它们仅存在于客户端上，您可以使用数字 ID 并每次递增。

# javascript - JQuery 列表选择器行为不端

> ID：13285164
> 
> 赞同：0
> 
> 时间：2012-11-08T08:27:32.643
> 
> 标签：javascript, jquery, html, jquery-selectors, html-lists

我知道很多人都问过有关选择器的问题，但无论我做什么看起来都不错，但最终还是无法正常工作。我有一个动作列表。每当单击它们的“文件夹”时，就会显示或隐藏这些动作。当点击动作本身时，我不希望他们再次隐藏......但是他们这样做了。谁能看到我的问题是什么？我尝试了很多变化；也许只是晚了。

相关代码：

函数.js

```
$(function() {
    $(".menuitems").hide();

    $("#dmenu li").not(".menuitems li").click(function() {
        $(this).children(".menuitems").slideToggle();
    });

    $(".menuitems").children("li").click(function() {
        $.get("aux/" + $(this).text() + ".html", function(data) {
            $("#content").html(data);
        }, "text");
    });
}); 
```

main.html

```
<div id="content">
All contents come here!!
</div>

<div id="leftnavigation">
<h3>Options</h3>
<ul id="dmenu" style="list-style-type:none; margin-left:-50">
    <li>__Registration
        <ul class="menuitems">
            <li>FindExisting</li>
            <li>CreateNew</li>
        </ul>
    </li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:37:27.810

你想查看所有里面有 .menuitems 的 li 元素，你可以这样做：

```
$(function() {
    $("#dmenu li:has(.menuitems)").click(function() {
        $(this).children(".menuitems").slideToggle();
    });
    $(".menuitems").hide().find("li").click(function() {
        $.get("aux/" + $(this).text() + ".html", function(data) {
            $("#content").html(data);
        }, "text");
      return false;
    });
}); 
```

# c# - 为什么注册两个相同的附加属性在 Silverlight 中有效，但在 WPF 中失败？

> ID：13285169
> 
> 赞同：0
> 
> 时间：2012-11-08T08:27:49.727
> 
> 标签：c#, .net, wpf, silverlight, dependency-properties

看看这段代码：

```
var property = DependencyProperty.RegisterAttached(
                "SomeAttachedProperty",
                typeof(object),
                typeof(View),
                new PropertyMetadata(default(object)));

var sameProperty = DependencyProperty.RegisterAttached(
                "SomeAttachedProperty",
                typeof(object),
                typeof(View),
                new PropertyMetadata(default(object))); 
```

WPF 中的第二次注册失败，`AgrumentException`显示“属性已注册”（这是正确的）。

在 WPF 的反编译源中，`DependencyProperty`我发现：

```
FromNameKey key = new FromNameKey(name, ownerType);
lock (Synchronized) 
{ 
     if (PropertyFromName.Contains(key))
     { 
          throw new ArgumentException(SR.Get(SRID.PropertyAlreadyRegistered,
                                      name, ownerType.Name));
     }
} 
```

但是在 SL 中，我没有找到任何对具有相同名称和类型的现有属性的检查。

所以问题是为什么 SL 不检查它而 WPF 呢？有一些基本的限制还是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:05:38.203

如果没有静态 Get 和 Set 访问器，附加依赖属性的注册是不完整的，即使在 Silverlight 中，您也不能在同一个类中将它们写两次。

```
class MayClass
{
    public static readonly DependencyProperty SomethingProperty =
        DependencyProperty.RegisterAttached(
           "Something", typeof(object), typeof(MyClass));

    // required
    public static object GetSomething(UIElement element)
    {
        return element.GetValue(SomethingProperty );
    }

    // required
    public static void SetSomething(UIElement element, object value)
    {
        element.SetValue(SomethingProperty , value);
    }
} 
```

# opengl - GLSL 着色器编程#version 标头错误：无法识别的预处理指令

> ID：13285170
> 
> 赞同：1
> 
> 时间：2012-11-08T08:27:55.030
> 
> 标签：opengl, 3d, shader, fragment-shader, vertex-shader

我刚开始 GLSL 着色器编程，但是 `unrecognized preprocessing directive` 每当我将`#version`指令放在预处理器指令头堆栈中时，我都会得到，尽管我在源文件中包含了所有与 opengl 相关的头文件和文件，

**着色器：**

```
#version 400
in vec3 Color; 
out vec4 FragColor; 
void main() 
{ 
    FragColor = vec4(Color, 1.0); 
} 
```

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:43:55.790

> 该`#version`指令必须出现在着色器中的任何其他内容之前，注释和空白除外。

甚至预处理器指令也是非法的（NVIDIA 接受但 AMD 不接受！）。如果这没有帮助，请给我们更多信息。例如`glGetString(GL_VERSION)`和`glGetString(GL_VENDOR)`。

参考您的评论，您会误解着色器的编译方式。C++ 编译器无法编译着色器。将你的着色器放入一个文本文件并在运行时加载它，然后调用 OpenGL 的编译方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-01T12:06:12.743

预`#version`处理器命令在 c++ 编译时运行，`glsl`仅基于文本，不应编译。如果您`#include "file"`在标头或`.cpp`程序中，它将触发编译和错误。因此，不要将`#include`glsl 文件放入您的应用程序中。

# jquery - jquery 获取 RadioButton 添加的属性值

> ID：13285173
> 
> 赞同：2
> 
> 时间：2012-11-08T08:28:10.037
> 
> 标签：jquery

我有一个问题，现在让我发疯。在我的网页上，我有一个 RadioButton，我像这样向它添加属性：

> **在 ...asp**

```
<div id="radio" class="C_Radio">
    <asp:RadioButton id="rad1" GroupName="typeSelect" runat="server" />
    <asp:RadioButton id="rad2" GroupName="typeSelect" runat="server" />
</div> 
```

> **在...asp.vb**

```
rad1.Attributes.Add("rad1", "10") 
rad2.Attributes.Add("rad2", "20") 
```

> **在 fireBug 我看到这个：**

```
<div class="C_Radio" id="radio">
    <span rad1="10">
    <span rad2="20"> 
```

所以值在那里，但我无法取回它们。

> **我在 JQuery 中尝试了以下内容**

```
var test;

test = $("#radio input:checked + label").text();    //label of radioButton
test = $("#radio input:checked").val();         //id of selected radioButton
test = $(test);                     //undefined
test = $(test).val();                   //undefined
test = $(test).attr();                  //undefined
test = $(test).attr("test");            //undefined
test = $(test).attr("value");           //id of selected radioButton
test = $("rad1").val();             //undefined
test = $("rad1").attr();                //undefined
test = $("#radio").attr("rad1");        //undefined
test = $("#radio input:checked").attr("rad1");      //undefined
test = $("input[name='radio']:checked").val();      //undefined
test = $("input[name='rad1']:checked").val();       //undefined 
```

任何人都可以帮助我吗？我可以用我知道的其他方式来做，但我想解决这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:50:10.823

这种情况是这样解决的：

```
test = $("#rad1").parent().attr("rad1");  //Result 10
test = $("#rad2").parent().attr("rad2");  //Result 20 
```

# iphone - iPhone UITextField inputView 错误：分配给只读属性

> ID：13285177
> 
> 赞同：1
> 
> 时间：2012-11-08T08:28:23.843
> 
> 标签：iphone, ios, uitextfield, uipickerview

当我想将 UIPicker 分配为 UITextField 的 inputView 时遇到问题。它显示错误“***分配给只读属性***”。请帮忙，因为我认为这与财产合成无关。

我在下面添加了我的代码：

```
@interface DriverWaitingDetails : UIViewController<UITextFieldDelegate,UIPickerViewDataSource, UIPickerViewDelegate>
{

IBOutlet UILabel *baseLabel;
IBOutlet UITableView *driverTableView;
IBOutlet UIPickerView *basePicker;
}

 @property(nonatomic, retain) IBOutlet UIPickerView *basePicker;
 @property(nonatomic,retain)IBOutlet UILabel *baseLabel;
 @property(nonatomic,retain)IBOutlet UITableView *driverTableView;

@end 
```

实施代码：-

```
-(void)viewDidLoad
{

basePicker=[[UIPickerView alloc] initWithFrame:CGRectMake(0,100,320, 500)];
self.navigationItem.title=@"Driver Table";
baseLabel.userInteractionEnabled = YES;
basePicker.delegate = self;
basePicker.dataSource = self;
[basePicker setShowsSelectionIndicator:YES];
baseLabel.inputView=nil;
[super viewDidLoad];    
} 
```

附截图：- ![UITextField 错误图像](../Images/5d59155644c3d08a0b128768de5fefd0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T08:33:26.067

您正在设置的输入视图`UILabel`。您将 baseLabel 声明为`UILabel`not `UITextField`。

```
IBOutlet UILabel *baseLabel; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:45:48.167

你已经声明

`IBOutlet UILabel *baseLabel;`

UILabel 继承自`UIView : UIResponder : NSObject`，属性定义在`UIResponder`：

```
@property (readonly, retain) UIView *inputView 
```

由于该属性`inputView`是只读的，因此您不能为其分配任何值。

# android - 如何在android中更改蓝牙波特率？

> ID：13285180
> 
> 赞同：2
> 
> 时间：2012-11-08T08:28:39.617
> 
> 标签：android, bluetooth

我需要通过蓝牙接收从硬件设备发送到我的安卓手机的数据。但我没有收到确切的数据。有一些缺失的样本。是否可以在 android 上更改我的蓝牙设备的波特率？另外，谁能告诉我如何找到我的android蓝牙的默认波特率？

# scala - 在 Scala 中，命名与 ORM 类等效的案例类的最惯用方式是什么？

> ID：13285184
> 
> 赞同：2
> 
> 时间：2012-11-08T08:28:46.103
> 
> 标签：scala, lift

我必须使用 Lift 的 Mapper（我知道 Scala 可能有更好的 ORM，但这不是我现在有权改变的东西）。通常，使用 Mapper，表是这样定义的：

```
package com.sample.model

import net.liftweb.mapper._

class Table extends LongKeyedMapper[Table] with IdPK {
  def getSingleton = Table

  object other_table_id extends MappedLongForeignKey(this, OtherTable)
  object date_field extends MappedDate(this)
  object string_field extends MappedString(this, 255)

  def toCaseClass = ...
}

object Table extends Table with LongKeyedMetaMapper[Table] 
```

现在我想为 Table 定义一个案例类以更轻松地操作记录，因为 Mapper 不是很“Scala-惯用”，不是很安全，而且绝对不是不可变的。我的案例类看起来像这样：

```
case class TableCC(id: Long, otherTableId: Long, dateField: Option[Date], ...) {
  def toMapper = ...
} 
```

我应该如何命名案例类，我应该把它放在哪里？

1.  在具有不同名称（TableCC 或 TableCaseClass）的 com.sample.model 中？
2.  在具有相同名称（表）的不同包（例如 com.sample.model.caseclass）中？
3.  在表对象中？
4.  ...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T14:58:19.940

首先，我知道你说过你不能使用另一个 ORM，但是有一些基于案例类的 scala 的 ORM 可以很好地工作。（Slick 基本上是这样工作的，其他一些也是如此）

就个人而言，如果您打算使用这个案例类作为操作域的主要方式，我会将它们全部放在自己的包中。这样，如果您正在操作域，您可以执行

```
import com.sample.model.caseclass._ 
```

需要注意的几点：

不要将其命名为与案例类相同的名称，这会让人感到困惑，我保证在某些时候你会想要在同一个文件中使用这两个类，在这种情况下你将不得不为其中一个类命名。

我会使用像 Table 和 TableCC 这样的命名。这样，在您的 IDE 中，您可以轻松找到其中一个。

# clojure - 为什么（每个？字符串？[]）应该产生真？

> ID：13285187
> 
> 赞同：12
> 
> 时间：2012-11-08T08:28:56.993
> 
> 标签：clojure

查看源代码`every?`可以清楚地*说明原因*

```
(every? string? []) => true 
```

这是因为`every?`递归实现并用于`(nil? (seq coll))`结束递归。但是，我的问题是，这种行为有什么意义？刚刚被那个绊倒了。

我已经解决了我的问题

```
(and (seq x) (every? string? x)) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T10:45:08.700

因为它的功能与 forall-quantifier 相同。也就是说，它最初被假定为真，并且谓词的每次应用都是试图证明它是假的。存在量词（因为不一致`some`而`any?`在 Clojure 中被调用）以相反的方式工作 - 它假设为假，并且谓词的每次应用都是试图证明它是真的。

换句话说，某事对所有人来说都是真的总是正确的，而某事对没有人来说是真的总是错误的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-08T11:33:13.243

函数`every?`实现[全称量化](http://en.wikipedia.org/wiki/Universal_quantification)。

从`(every? string? []) => false`它可以得出`[]`包含`x`这样的对象`(string? x) => false`（这就是全称量词的[否定的工作方式）。](http://en.wikipedia.org/wiki/Universal_quantification#Negation)这导致矛盾，所以`(every? string? [])`必须返回`true`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-08T12:25:22.343

它在数学中如此定义，这是有充分理由的。`every?`如果以任何其他方式定义，这将是一场一致性灾难。

使用当前定义，`every? foo`当且仅当所有连接的集合也满足时，连接的结果才满足`every? foo`。在空列表上`every?`返回`false`会破坏这种方便的等价性和许多其他等价性（例如，删除一个元素有时会导致从 切换`every?`到`true`。`false`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:59:21.513

或者更好地问为什么要`(every? string? [])`yield `false`？在某些要求中，这两种变体都会导致错误的答案。但显然这比在空序列上出错要好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-01T23:28:54.323

我的回答是[空洞的事实](https://en.wikipedia.org/wiki/Vacuous_truth)。
Wiki 很好地涵盖了它，所以我将简单地引用当前的第一段：

> 在数学和逻辑中，空洞的真理是断言空集的所有成员都具有某种属性的陈述。例如，只要房间里没有手机，“房间里所有手机都关闭”的陈述就会成立。在这种情况下，“房间里的所有手机都打开”的陈述也将是空洞的，就像两者的合取一样：“房间里的所有手机都打开和关闭”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-03T08:28:12.040

它归结为“and”和“or”操作的标识值。对于任何布尔值 B，B 具有与 相同的值`B & T`。因此，没有值的“与”必须为真。类似地，与 B 具有相同的值也是正确`B | F`的，因此没有值的“或”是错误的。

类似地，无项的乘积为 1，无项之和为 0，它们是乘法和加法运算符的恒等值。

# appharbor - Appharbor - 构建失败 - 签名查询字符串参数或授权标头

> ID：13285197
> 
> 赞同：1
> 
> 时间：2012-11-08T08:29:21.407
> 
> 标签：appharbor

我有一个工作的 ASP。NET Web 应用程序在[AppHarbor](https://appharbor.com/)上。但是从昨天开始，当我们提交更改时，我们收到如下构建错误。

它可能与我们正在部署的代码有关吗？

```
Code-InvalidArgument-Code
Message-Either the Signature query string parameter or the Authorization header should be specified, not both-Message
ArgumentValue-
00ae7439f3e3d4956d325c6868fe1853b48671a4db49deb209c1ce0691b5dc66c9dcda413d6c1223df705c8b085e088eee552ed255fb60068878d386a150d21bad/008faea860883ff98643593aa166cdf07b19d415bc8abdc1132a2d1ed9f9d7fa4b5dbe316f6bd04eb77d714fd3bfb2e259ac4bdbbcc8e839d3569227c8e51ba83d-ArgumentValue
ArgumentName-Authorization-ArgumentName
RequestId-B2EC5601E4D4C6C8-RequestId
HostId-6ot5sQ9xgCaC6GgipaU5ULqd9TfvF23IH6bcLmc8Wmupe1UP5GeR8vGPws5b71iN-HostId
-Error 
```

# netbeans - netbeans中的元素不允许属性“ng-click”

> ID：13285199
> 
> 赞同：5
> 
> 时间：2012-11-08T08:29:29.083
> 
> 标签：netbeans, angularjs

我只是喜欢 AngularJs。我用 netbeans 编写所有项目，我想坚持使用 netbeans。我在网上搜索了一个在 netbeans 中支持 AngularJs 的插件，但没有运气。

有一个[插件](http://plugins.netbeans.org/plugin/40296/)，但它似乎不起作用，或者我无法让它工作。

我不是在寻找一个成熟的插件，如果我能摆脱编辑器中的警告，我会很满意。

我的问题：

1.  有谁知道支持 AngularJs 的 netbeans 工作插件？
2.  如果没有，指向如何使 netbeans 理解自定义属性的说明的链接也将有所帮助/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T18:21:32.973

您可以在它们前面加上 data- 或 x- ...

# java - OpenGL ES 缓冲区不干净

> ID：13285204
> 
> 赞同：0
> 
> 时间：2012-11-08T08:29:42.797
> 
> 标签：java, android, opengl-es, opengl-es-1.1

我目前正在开发在**Android中以****OpenGL ES**渲染的 2D 游戏。我的精灵似乎可以正确渲染，但遗憾的是，当我不希望它们渲染时，它们会保留在屏幕上。当我绘制缓冲区中没有任何内容的帧时，我仍然可以看到以前绘制的精灵。

 **这是代码。

```
public void renderFrame()
{
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
    gl.glEnable(GL10.GL_TEXTURE_2D);

    gl.glViewport(0, 0, viewPort.getWidth(), viewPort.getHeight());
    gl.glMatrixMode(GL10.GL_PROJECTION);
    gl.glLoadIdentity();
    gl.glOrthof(position.x - frustumWidth * zoom / 2, 
                position.x + frustumWidth * zoom/ 2, 
                position.y - frustumHeight * zoom / 2, 
                position.y + frustumHeight * zoom/ 2, 
                1, -1);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();

    gl.glEnable(GL10.GL_BLEND);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);

    gl.glBindTexture(GL10.GL_TEXTURE_2D, textureId);

    /*
     *   Buffer filling code goes here
     */

    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    verticesIntBuffer.position(0);
    gl.glVertexPointer(2, GL10.GL_FLOAT, vertexSize, vertices);

    gl.glDrawElements(GL10.GL_TRIANGLES, 6, GL10.GL_UNSIGNED_SHORT,                     
                   shortBufferIndices);

    gl.glDisable(GL10.GL_BLEND);
} 
```

我认为*glClear*会清理缓冲区，但这在这里看起来不像。

该解决方案对我也不起作用[清除/释放 OpenGL ES 缓冲区](https://stackoverflow.com/questions/7922546/clearing-releasing-opengl-es-buffers)

关于如何明确清理缓冲区的任何想法？由于渲染先前的精灵仍然发生，可能会发生什么的另一个想法？

非常感谢您的耐心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:57:09.980

您应该清除颜色和深度缓冲区：

```
gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT); 
```**

# mysql - mysql：错误代码[1267]；非法混合排序规则 (latin1_general_cs,IMPLICIT) 和 (latin1_swedish_ci,IMPLICIT) 用于操作 '='

> ID：13285207
> 
> 赞同：3
> 
> 时间：2012-11-08T08:29:50.073
> 
> 标签：mysql, sql, mysql-error-1267

我想让`password`我的用户表的列`case sensitive`在 mysql 中。

以下是表的说明：

```
/*Table: mst_user*/

   FIELD          TYPE          COLLATION        
-------------  ------------  -----------------
user_id        VARCHAR(100)  latin1_swedish_ci
first_name     VARCHAR(25)   latin1_swedish_ci
last_name      VARCHAR(25)   latin1_swedish_ci
USER_PASSWORD  VARCHAR(50)   latin1_swedish_ci
user_status    INT(11)       (NULL)           
version_id     INT(11)       (NULL)           
active_status  INT(11)       (NULL)           
user_type      INT(11)       (NULL) 
```

为了使`USER_PASSWORD`字段区分大小写，我执行了以下查询：

```
ALTER TABLE `mst_user` MODIFY `USER_PASSWORD` VARCHAR(50) COLLATE `latin1_general_cs`; 
```

这有效，该字段现在区分大小写。

但是我有一个存储过程，它`SELECT`对该表执行查询以检查用户是否存在给定凭据。

存储过程::

```
CREATE PROCEDURE `usp_password_verify`(ip_login_id         VARCHAR(200),
                                 ip_user_password    VARCHAR(200),
                                INOUT success     INT(1),
INOUT tbl_usr_password          VARCHAR(100),
INOUT  pkg_user_password         VARCHAR(100))
BEGIN
  SELECT COUNT(*)
    INTO success
    FROM mst_user
   WHERE UPPER (user_id) = UPPER (ip_login_id)
   AND USER_PASSWORD=ip_user_password;

   SET tbl_usr_password = '';
   SET pkg_user_password= '';
END$$ 
```

当我从我的 java 代码中调用这个存储过程时，我收到以下错误：

```
**error code [1267]; Illegal mix of collations (latin1_general_cs,IMPLICIT) and (latin1_swedish_ci,IMPLICIT) for operation '='** 
```

谁能帮助这有什么问题？作为一个简单查询工作的东西在存储过程中执行时会出错！？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-08T09:01:28.980

如[表达式整理中所述](http://dev.mysql.com/doc/en/charset-collation-expressions.html)：

> MySQL 分配强制值如下：
> 
> `[ deletia ]`
> 
> *   列或存储的例程参数或局部变量的排序规则具有 2 的强制力。
> 
> `[ deletia ]`
> 
> MySQL 使用具有以下规则的强制值来解决歧义：
> 
> `[ deletia ]`
> 
> *   如果双方具有相同的强制力，则：
>     
>     
>     *   如果两边都是 Unicode，或者两边都不是 Unicode，那就是错误。

您*可以*在表达式中添加显式[`COLLATE`](http://dev.mysql.com/doc/en/charset-collate.html)子句以强制其中一个操作数具有具有较低强制力值的显式排序规则：

```
USER_PASSWORD=ip_user_password COLLATE 'latin1_general_cs' 
```

在这种情况下，您甚至可能要考虑`latin1_bin`？

无论如何，您**都不应该以纯文本形式存储密码**。相反，存储用户密码的*加盐*哈希并简单地验证哈希是否与存储的哈希匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-27T08:56:32.187

我在遇到同样的错误后来到这里。经过提供的解决方案后，很明显 COLLATION 是我的错误的触发器。我的代码与原始问题类似，但我的错误是`MySQL said: #1267 - Illegal mix of collations (utf8mb4_0900_ai_ci,IMPLICIT) and (utf8mb4_general_ci,IMPLICIT) for operation '='`.

我也试图收集密码和用户名（目前没有散列），我通过为这两个参数显式添加 COLLATION 来修复它。

第一个代码（不稳定的代码）：

```
WHERE user.username = username
AND user.password = password 
```

我当前的代码（工作代码）：

```
WHERE user.username = username COLLATE utf8mb4_0900_ai_ci
AND user.password = password COLLATE utf8mb4_0900_ai_ci 
```

仅将排序规则添加到密码以强制排序规则匹配用户名或仅添加到用户名不起作用。即使一个参数已经有正确的排序规则，它仍然有一个错误。因此，我向两个参数添加了相同的排序规则，并且它起作用了。

*请注意，这是我的数据库中已经使用的实际 COLLATION，但由于某种原因，在过程调用中它并不一致。*

请记住在完成后对您的密码进行加盐/哈希处理，我的代码仍在进行中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-19T13:40:02.327

我知道这有点晚了，但是如果这可以节省某人半天的时间，那么它仍然值得放下。

所以，我的设置是这样的：10.1.22-MariaDB, `utf8mb4_general_ci`. 一切都好，我恢复了我的数据库转储，一切正常。

该数据库原本是在`utf8_general_ci`，但由于某些原因被恢复为`utf8_unicode_ci`. 将其更改回`utf8_general_ci`并检查数据库中没有工件，例如列或表定义整理为`utf8_unicode_ci`而不是`utf8_general_ci`

尝试更新特定表会导致非法的排序规则混合，而没有任何明显的原因。

归结为实际上不是表本身，而是关联的触发器。

事实上，触发器调用了一个过程，该过程在我的数据库中没有排序规则信息，但`utf8_unicode_ci`在`information_schema.ROUTINES.DATABASE_COLLATION`.

在新数据库排序规则的上下文中重新创建过程解决了我的问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-28T01:33:56.557

所以在努力解决这个错误之后：

```
ERROR 1267 (HY000): Illegal mix of collations (utf8mb4_unicode_ci,COERCIBLE) and (utf8mb4_general_ci,COERCIBLE) for operation '=' 
```

我设法通过更改导入数据库文件来解决这个问题：

```
CHARSET utf8mb4 COLLATE utf8mb4_unicode_ci NO SQL 
```

这是如果您正在导入函数/过程/触发器，我的数据库具有大量所有这些功能......我将其更改为：

CHARSET=utf8mb4 整理=utf8mb4_general_ci;

我真的希望这对某人有所帮助。我知道以上内容很有帮助，但我仍然花了几个小时才将其转化为解决方案。谢谢

# php - 用php从gnip解码json

> ID：13285210
> 
> 赞同：2
> 
> 时间：2012-11-08T08:29:59.177
> 
> 标签：php, json

我已经在这工作了好几个小时，我一辈子都无法弄清楚如何解码这个 json 文件。我正在使用 gnip 来捕获 Twitter 数据。Gnip 以 JSON 格式返回数据。我需要一种在 php 中对此进行解码并能够访问每个 json 对象的方法。我以前曾使用过 json，但我无法将注意力集中在这个问题上。我在简单测试中遇到的一件有趣的事情是，如果我有这样的 json 代码

```
{"foo":123} 
```

我可以使用 json_decode() 函数对此进行解码。但是如果json格式是这样的

```
{

 "foo":123

} 
```

它不解码：/

这是json代码的链接：

[https://dl-web.dropbox.com/get/Public/myjson.json?w=b7ad8e2c](https://dl-web.dropbox.com/get/Public/myjson.json?w=b7ad8e2c)

如果此链接不起作用，则应该

[https://dl.dropbox.com/u/57604377/myjson.json](https://dl.dropbox.com/u/57604377/myjson.json)

我试图像这样访问它。

我将所有这些 json 代码放在一个文件中，然后读取文件并将内容放入一个名为 $json 的变量中，

```
$obj = json_decode($json) 
```

我尝试了这两种方法来访问初学者的“id”值

```
echo $obj->id 
```

和

```
echo $obj->{'id'} 
```

它不返回任何东西

我希望你们中的一些聪明人能给我一些见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T23:15:57.783

在名为 json.php 的文件中给出此代码：

```
<?
  $json = file_get_contents("php://stdin");

  $obj = json_decode($json);
  var_dump($obj);

  // Different echos go here
?> 
```

并在您的测试文件中查找

```
cat multiline_gnip.json | php json.php 
```

然后对我来说以下工作：

```
echo $obj->id
echo $obj->{id}
echo $obj->{'id'} 
```

将 json_decode 行更改为：

```
$obj = json_decode($json, true); 
```

给我一个关联数组，然后这个工作：

```
echo $obj["id"] 
```

介意分享一些你用来解析这个的代码吗？

为了完整起见，这里是我的 php --version

带有 Suhosin-Patch (cli) 的 PHP 5.3.15（构建时间：2012 年 8 月 24 日 17:45:44） 版权所有 (c) 1997-2012 The PHP Group Zend Engine v2.3.0，版权所有 (c) 1998-2012 Zend Technologies

（免责声明：我为 Gnip 工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T01:15:01.313

您应该使用 php cli 来测试您的函数和数据。从那里发现你的错误应该相当简单。

# javascript - 比较 JS 中最新日期的最佳方法？

> ID：13285213
> 
> 赞同：1
> 
> 时间：2012-11-08T08:30:08.387
> 
> 标签：javascript, parsing, date, twitter

我说的是那些以 twitter API 返回其日期的格式编码的，比如......

`"Tue Jan 12 21:33:28 +0000 2010"`

我想到的最好的事情是尝试用正则表达式将它分割成更像......

`20100112213328`,

但*必须*有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:36:02.427

您可以使用类似的字符串创建一个新的 Date 对象`"Tue Jan 12 21:33:28 +0000 2010"`。

```
var dateString = "Tue Jan 12 21:33:28 +0000 2010";
var twitterDate = new Date(dateString); 
```

然后，您可以简单地使用 < 和 > 进行比较。

```
var now = new Date();
if (now < twitterDate) {
    // the date is in the future
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:41:09.377

JavaScript Date 将正确解析 Twitter 日期：

```
 var d1 = new Date ("Tue Jan 12 21:33:28 +0000 2010")
    , d2 = new Date ("Tue Jan 12 22:33:28 +0000 2010"); 
```

您可以使用转换为数字形式的 getTime 方法来比较这些：

```
 if (d1.getTime() < d2.getTime())
  {
       //...
  } 
```

或者，简单地说

```
if (d1 < d2)
{
} 
```

如果需要，明确强制编号：

```
if (+(d1) < +(d2))
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:56:08.593

就 ECMAScript 规范 5.1 而言（参见 15.9.1.15），唯一支持的日期时间字符串交换格式是`YYYY-MM-DDTHH:mm:ss.sssZ`（以及更短的形式）。

否则（15.9.4.2）：

> 如果字符串不符合该格式，则函数可能会退回到任何特定于实现的启发式或特定于实现的日期格式。

我会使用基于正则表达式的解决方案，该解决方案简短且保证可以在任何地方工作；依赖用户的浏览器和本地化参数对我来说似乎有点怪异。

# xcode - 如何在 ARC 项目中对单个文件使用 ARC 转换器？

> ID：13285220
> 
> 赞同：1
> 
> 时间：2012-11-08T08:31:09.390
> 
> 标签：xcode, automatic-ref-counting, converter, automated-refactoring

该项目已经是一个 ARC 项目。

但是某些文件通过在其编译器标志中放置 -fno-objc-arc 标志来手动禁用 arc。

现在我想使用xcode的arc convert工具将一些非arc文件转换成arc。我怎样才能做到这一点？

由于该项目现在已经弧。如果我尝试运行转换工具，无论选择多少文件，它都会产生太多错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:38:21.143

如果您*真的*想要该工具，您可以将源移动到专用的过渡目标（例如静态库），然后转换该目标。

如果一切都失败了，只需`-fno-objc-arc`从该源中删除，然后查看属性并删除编译器警告等。

# javascript - Django 获取最后一个 GET 参数

> ID：13285222
> 
> 赞同：0
> 
> 时间：2012-11-08T08:31:15.553
> 
> 标签：javascript, jquery, django, get, url-parsing

我已经使用 Django 几个月了，所以我还是新手。

我想从 URL 中获取最后一个 GET 参数。这是 URL 的示例：

```
example.com?q=Something&filter1=Test&filter1=New&filter2=Web&filter3=Mine 
```

有没有办法用 django 获取最后插入的 GET 参数？可能是`filter1`，`filter2`或者`filter3`..

在使用 javascript/jQuery 进行初始刷新后，也许有办法做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:32:11.877

您可以尝试自己解析 url 参数。例如：

## 蟒蛇/Django

```
from urlparse import urlparse, parse_qsl

full_url = ''.join([request.path, '?', request.META['QUERY_STRING']])
#example.com?q=Something&filter1=Test&filter1=New&filter2=Web&filter3=Mine
parameters = parse_qsl(urlparse(full_url)[4])
#[(u'q', u'Something'), (u'filter1', u'Test'), (u'filter1', u'New'), (u'filter2', u'Web'), (u'filter3', u'Mine')]
last_parameter = parameters[-1]
#(u'filter3', u'Mine') 
```

## Javascript

```
var params = window.location.search.split("&");
//["?q=Something", "filter1=Test", "filter1=New", "filter2=Web", "filter3=Mine"]
var last_param = params[params.length-1].replace("?","").split("=");
//["filter3", "Mine"] 
```

此示例不使用 jQuery，并提供 url 解析的基本知识。有很多图书馆，可以为你做。

# android - 如何设置PorterDuffXfermode，结果偏向太多

> ID：13285225
> 
> 赞同：0
> 
> 时间：2012-11-08T08:31:34.697
> 
> 标签：android, android-canvas

以下是我的程序和参考图片。

程序 ：

```
int width = src.getWidth();
int height = src.getHeight();
Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
Canvas canvas = new Canvas (bitmap);
Paint paint = new Paint();
paint.setAntiAlias(true);
paint.setDither(true);
canvas.drawBitmap(src, 0, 0, paint);
paint.setXfermode(new PorterDuffXfermode(Mode.MULTIPLY)); 
paint.setColor(Color.RED);
paint.setAlpha(35);
canvas.drawRect(0, 0, width, height, paint); 
```

参考图片：

![在此处输入图像描述](../Images/d76d235c9b2fb1858499f1366e762d72.png)

我使用上面的程序为照片添加了一种透明的红色（带 alpha）。但我不清楚为什么照片变成了深红色。“理想结果”是由 Photoshop 制作的。我只是在原始照片之前添加了一个红色图层。而不是更改为低透明度和 MULTIPLY。

它们是不是相同的处理概念或我的程序有什么问题？它不能使用 Mode.MULTIPLY 来创建“理想结果”吗？有人可以给我一些意见吗？

谢谢谢谢非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:57:15.587

```
Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
Canvas mCanvas = new Canvas(bitmap);
Paint paint = new Paint();
paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.LIGHTEN));
paint.setColor(Color.RED);
paint.setAlpha(95);
mCanvas.drawBitmap(src, 0, 0, null);
mCanvas.drawRect(0, 0, src.getWidth(), src.getHeight(), paint); 
```

使用模式`Lighten`和 Alpha 为 95，我得到的东西更接近您的要求。

结果：

![在此处输入图像描述](../Images/bee67d95f407e60f1b10ca39487491ac.png)

# php - 使用 curl 在 iframe 中加载网站

> ID：13285230
> 
> 赞同：0
> 
> 时间：2012-11-08T08:31:57.423
> 
> 标签：php, iframe, curl

我是 Curl 的新手，如何加载外部网站？我正在使用以下代码：

```
 function Get_Domain_Contents($url){
        $ch = curl_init();
        $timeout = 5;
        curl_setopt($ch,CURLOPT_URL,$url);
        curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
        curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
        curl_setopt($ch, CURLOPT_TIMEOUT, 10);
        $data = curl_exec($ch);
        curl_close($ch);

        return $data;   
} 
```

现在我想知道如何在`iframe`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:37:52.113

尝试这个：

```
file_get_contents('http://someurl.com'); 
```

# grails - 如何使用 GORM 按天/周/年分组？

> ID：13285232
> 
> 赞同：0
> 
> 时间：2012-11-08T08:32:00.777
> 
> 标签：grails, grails-orm

我需要返回与一天/一周或一年相关的计数。

示例：假设我有在某个日期下的订单

```
class Order {
    Date orderDate
} 
```

我如何了解每天/每周/每年的订单量等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:18:06.330

我刚刚偶然发现[这个博客](http://www.intelligrape.com/blog/2012/11/08/create-game-leaderboard-using-sqlprojection/)建议使用新的 sqlProjection 用于 Grails 2.0，并且还有 Grails 1.x 的替代解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:52:22.673

它未经测试，但你需要这样的东西：

```
class Order {
    Date orderDate
    BigDecimal amount
    static namedQueries = {
        summaryProojectionByDate = {
            projections {
                count("id", "orderCount")
                sum("amount", "amountSum")
                groupProperty("orderDate", "orderDate")
            }
        }
    }
} 
```

这按特定日期分组。我认为在 HQL 中很难按周分组。

# playframework - 如何在网络套接字上设置子频道

> ID：13285233
> 
> 赞同：0
> 
> 时间：2012-11-08T08:32:06.783
> 
> 标签：playframework, websocket, netty

我正在使用 play20

我有使用 Netty 3.5.0 的网络套接字，我需要找到在每个套接字上使用子通道的方法。

这是可能的，如何？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:47:36.550

您可以为每个频道上的消息使用不同的前缀。例如，如果您想在频道 1 上发送“hello”，则改为发送“1hello”。然后你有一个 Web 套接字处理程序，它解析这些消息并根据前缀将它们分派给其他参与者或迭代者。

# java - 如何使用在 if 之外的 if 语句中声明的变量？

> ID：13285234
> 
> 赞同：2
> 
> 时间：2012-11-08T08:32:07.470
> 
> 标签：java

如何使用在块`if`外的语句中声明的变量`if`？

```
if(z<100){
    int amount=sc.nextInt();
}

while(amount!=100)
{ //this is wrong.it says we cant find amount variable ?
    something
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T08:33:47.423

的范围`amount`绑定在花括号内，因此您不能在外面使用它。

解决方案是将其置于 if 块之外（请注意，`amount`如果 if 条件失败，则不会分配）：

```
int amount;

if(z<100){

    amount=sc.nextInt();

}

while ( amount!=100){  } 
```

或者您可能打算将 while 语句放在 if 中：

```
if ( z<100 ) {

    int amount=sc.nextInt();

    while ( amount!=100 ) {
        // something
   }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-08T08:33:44.647

为了`amount`在外部范围内使用，您需要在`if`块外声明它：

```
int amount;
if (z<100){
    amount=sc.nextInt();
} 
```

为了能够读取它的值，您还需要确保在所有路径中都为其分配了一个值。您还没有展示您想要如何执行此操作，但一种选择是使用其默认值 0。

```
int amount = 0;
if (z<100) {
    amount = sc.nextInt();
} 
```

或者更简洁地使用条件运算符：

```
int amount = (z<100) ? sc.nextInt() : 0; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T08:33:17.220

你不能，它只限于 if 块。要么让它的范围更可见，比如在 if 之外声明它并在该范围内使用它。

```
int amount=0;
if ( z<100 ) {

amount=sc.nextInt();

}

while ( amount!=100 ) { // this is right.it will now find amount variable ?
    // something
} 
```

[在此处](http://www.java-made-easy.com/variable-scope.html)检查有关 java 中的变量范围

# javascript - 除非我有警报，否则 Jquery 变量没有得到正确的值

> ID：13285237
> 
> 赞同：0
> 
> 时间：2012-11-08T08:32:24.743
> 
> 标签：javascript, jquery

这让我发疯，我不知道是什么导致了这个问题。我有两个数组，一个列出 pageID，另一个列出页面。

当我尝试使用以下代码时，“页面”总是发回“正面”。如果我在声明变量“var newObject”之前在 for 循环期间发出警报，则输出是正确的，并且页面显示“front、insideLeft、insideRight 和 back”。

所有其他属性都正确输出。

请在下面找到我的代码：

```
 var pageID = ["cardFront","cardInsideL","cardInsideR","cardBack"];
    var pages = ["front","insideLeft","insideRight","back"];

    for (var i=0; i<pageID.length; i++) {
        var cfTextarea = $('#' + pageID[i] + ' textarea'); //array of textareas

        //Get each textarea properties and encode to json
        $("#" + pageID[i] + " textarea").each(function(){

        var txtOffset = $(this).offset();
        var divOffset = $("#" + pageID[i]).offset();

        var newObject = { 
            'page'      : pages[i],
            'id'        : $(this).attr('id'),
            'src'       : $(this).attr('src'),
            'width'     : $(this).width(),
            'height'    : $(this).height(),
            'top'       : txtOffset.top - divOffset.top,
            'left'      : txtOffset.left - divOffset.left,
            'rotation'  : '0',
            'colour'    : $(this).css("color"),
            'size'      : $(this).css("font-size"),
            'bold'      : $(this).css("font-weight"),
            'underline' : $(this).css("text-decoration"),
            'align'     : $(this).css("text-align"),
            'font'      : $(this).css("font-family"),
            'text'      : $(this).val() 
        };
        data.textareas.push(newObject);
        });
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:35:03.613

问题是您传递给的函数`each`只会得到`i=0`.

您可以通过这样做来解决这个问题（未经测试，但这是标准方法）：

```
function mk_add_text_area(data, page_id, page) {
    return function(elem) {
        var txtOffset = $(elem).offset();
        var divOffset = $("#" + page_id).offset();

        var newObject = { 
            'page'      : page,
            'id'        : $(elem).attr('id'),
            'src'       : $(elem).attr('src'),
            'width'     : $(elem).width(),
            'height'    : $(elem).height(),
            'top'       : txtOffset.top - divOffset.top,
            'left'      : txtOffset.left - divOffset.left,
            'rotation'  : '0',
            'colour'    : $(elem).css("color"),
            'size'      : $(elem).css("font-size"),
            'bold'      : $(elem).css("font-weight"),
            'underline' : $(elem).css("text-decoration"),
            'align'     : $(elem).css("text-align"),
            'font'      : $(elem).css("font-family"),
            'text'      : $(elem).val() 
        };
        data.textareas.push(newObject);
    }
} 
```

然后以后...

```
 //Get each textarea properties and encode to json
    $("#" + pageID[i] + " textarea").each(mk_add_text_area(data, pageID[i], pages[i])); 
```

# c# - 如何在 mvc3，C# 中将数字显示到小数点后 2 位？

> ID：13285240
> 
> 赞同：16
> 
> 时间：2012-11-08T08:32:37.170
> 
> 标签：c#, asp.net, asp.net-mvc-3

> **可能重复：**
> [使用字符串格式显示最多 2 位小数或简单整数](https://stackoverflow.com/questions/6951335/using-string-format-to-show-decimal-upto-2-places-or-simple-integer)
> [如何在 2 位小数中设置小数点？](https://stackoverflow.com/questions/13284682/how-to-set-decimal-point-in-2-decimal-places)

我的视图中有价格字段。它有以下值`2.5 and 44.` 我想显示这个值`2.50 and 44.00`我使用下面的代码

```
@{decimal prolistprice = decimal.Parse(item.OtherFields["Price"].ToString());}
  $@Math.Round(prolistprice, 2, MidpointRounding.AwayFromZero) 
```

在其中`item.OtherFields["price"] is a object`我将其转换为字符串，然后转换为十进制

但 Math.round 不工作它只显示 2.5 和 44 .. 任何人都可以帮助这个

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-11-08T08:41:46.057

`Math.Round`就是这样做的 - 回合。

要格式化您可以使用的数字，`.ToString(formatString)`如下所示：

```
item.OtherFields["price"].ToString("0.00") 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-08T09:07:09.427

使用字符串格式功能

```
1\. string.Format("{0:n2}", 200000000.8776);
2\. string.Format("{0:n3}", 200000000.8776);
3\. string.Format("{0:n2}", 0.3);

/* OUTOUT
1\. 200,000,000.88
2\. 200,000,000.878
3\. 0.30
*/ 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-08T08:36:00.800

这应该适合你

```
yourvalue.ToString ("0.00"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T08:43:05.680

```
decimal dValue = 2.5;
string sDisplayValue = dValue.ToString("0.00"); 
```

# .net - 使常量可用于 T4 模板和普通源代码

> ID：13285241
> 
> 赞同：0
> 
> 时间：2012-11-08T08:32:40.390
> 
> 标签：.net, t4

我有一个 T4 模板，它需要访问一个整数常量，以便它可以在**构建时**生成正确的文件结构。生成的文件*不是*源代码，因此无法在运行时访问此常量。**我的 C# 源代码在运行时**也应该可以使用这个常量。

理想情况下，我希望只在一个地方设置这个整数常量的值，以避免将来出现维护问题，同事可能会在 C# 代码中将值设置在一个地方而忘记在模板中设置它。

我可以在哪里放置这个常量，所以我只需要在一个地方编辑它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:40:45.207

我会把它放在`app.config`/`web.config`文件中，然后在 T4 模板和源代码中读取它。

# android - WebService在android android.app.Service没有响应

> ID：13285246
> 
> 赞同：1
> 
> 时间：2012-11-08T08:32:51.087
> 
> 标签：android, web-services, service

我正在创建应用程序，它只是从服务器中提取消息显示通知并始终运行服务。

我需要，始终在后台运行的通知服务 - 每 2 分钟一次。该服务调用Web服务检查，是否有任何新的消息？

所以我只是简单的服务调用我的登录 Web 服务来检查工作。但它挂起并显示未响应消息。意外关闭。

我确信必须有另一种方法来调用 Web 服务 Using Service 但我找不到正确的方法。请告诉我我应该如何在后台调用网络服务来检查带有“app.Service”的消息。谢谢

```
enter code here

public class NotifyService extends Service {
private Long counter = 0L;
private Timer timer = new Timer();

private static String SOAP_ACTION = "http://tempuri.org/Validation";
private static String METHOD_NAME = "Validation";
private static String NAMESPACE = "http://tempuri.org/";
private static String URL = "**********************/Trackingservice.asmx?WSDL";

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onCreate() {
    super.onCreate();
    Toast.makeText(this, "Service created ...", Toast.LENGTH_LONG).show();
}
@Override
@Deprecated
public void onStart(Intent intent, int startId) {
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
        try{
        login();
        }
        catch(Exception e)
        {
            e.printStackTrace();
            Toast.makeText(this, "ERROR ..."+e, Toast.LENGTH_LONG).show();
        }
}
//  @Override
//  public int onStartCommand(Intent intent, int flags, int startId) {
//      try{
//          login();
//          }
//          catch(Exception e)
//          {
//              e.printStackTrace();
//              Toast.makeText(this, "ERROR ..."+e, Toast.LENGTH_LONG).show    ();
//          }
//      return Service.START_NOT_STICKY;
//    }

@Override
public void onDestroy() {
    super.onDestroy();
    Toast.makeText(this, "Service destroyed ...", Toast.LENGTH_LONG).show();
}

public void login() {

    // Initialize soap request + add parameters
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    // Use this to add parameters
    request.addProperty("UserName", "omega");
    request.addProperty("Password", "omega");

    // Declare the version of the SOAP request
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    envelope.dotNet = true; // for using Dot Net Web Service

    try {

        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
        // this is the actual part that will call the webservice
        androidHttpTransport.call(SOAP_ACTION, envelope);
        // Get the SoapResult from the envelope body.
        SoapObject result = (SoapObject) envelope.bodyIn;

        if (result != null) {
            // Get the first property and change the label text
            String temp = result.getProperty(0).toString();
            if (new Boolean(temp)) {
                Toast.makeText(getApplicationContext(), "Login Success",
                        Toast.LENGTH_SHORT).show();
            } else {
                Toast.makeText(getApplicationContext(),
                        "Login Fails, Please check username and password",
                        Toast.LENGTH_SHORT).show();
            }
        } else {
            Toast.makeText(getApplicationContext(),
                    "No Response, Service Not availble", Toast.LENGTH_LONG)
                    .show();
        }
    } catch (Exception e) {
        e.printStackTrace();
        Toast.makeText(
                getApplicationContext(),
                " Network Exception : " + e
                        + "Please check network connectivity.",
                Toast.LENGTH_LONG).show();

    }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:06:29.930

您可以使用计时器来满足您的要求作为解决方案之一::

```
autoUpdate = new Timer();
    autoUpdate.schedule(new TimerTask() {
        @Override
        public void run() {
            runOnUiThread(new Runnable() {
                public void run() {
                    //call your service from here
                }
            });
        }
    }, 0, 5000);//here provide the duration 
```

希望这可以帮助 ：）

# python - 在保存到磁盘之前缩放 Django ImageField

> ID：13285248
> 
> 赞同：0
> 
> 时间：2012-11-08T08:32:55.320
> 
> 标签：python, django, python-imaging-library

我想在模型保存到磁盘之前缩放一个 ImageField，但是以某种方式得到一个不可读的图像。目标是在不将其保存到磁盘的情况下对其进行扩展。

这是我迄今为止的尝试：

```
IMAGE_MAX_SIZE = 800, 800
class Picture(models.Model):
    ...
    image = models.ImageField(upload_to='images/%Y/%m/%d/')

    # img is a InMemoryUploadedFile, received from a post upload
    # removing the scale function results in a readable image
    def set_image(self, img):
        self.image = img
        self.__scale_image()

    def __scale_image(self):
        img = Image.open(StringIO(self.image.read()))
        img.thumbnail(IMAGE_MAX_SIZE, Image.ANTIALIAS)
        imageString = StringIO()
        img.save(imageString, img.format)
        self.image.file = InMemoryUploadedFile(imageString, None, self.image.name, self.image.file.content_type, imageString.len, None) 
```

我没有收到错误，但生成的图像无法正确显示。任何想法如何纠正这个问题？

谢谢西蒙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T00:21:20.210

我很接近，但不完全在那里。此功能现在可以正常工作，并且在缩放期间的任何时候图像都不会保存到光盘中。

```
IMAGE_MAX_SIZE = 800, 800
class Picture(models.Model):
    ...
    image = models.ImageField(upload_to='images/%Y/%m/%d/')

    # img is a InMemoryUploadedFile, received from a post upload
    def set_image(self, img):
        self.image = img
        self.__scale_image(self.image, IMAGE_MAX_SIZE)

    def __scale_image(self, image, size):
        image.file.seek(0) # just in case
        img = Image.open(StringIO(image.file.read()))
        img.thumbnail(size, Image.ANTIALIAS)
        imageString = StringIO()
        img.save(imageString, img.format)

        # for some reason content_type is e.g. 'images/jpeg' instead of 'image/jpeg'
        c_type = image.file.content_type.replace('images', 'image')
        imf = InMemoryUploadedFile(imageString, None, image.name, c_type, imageString.len, None)
        imf.seek(0)
        image.save(
                image.name,
                imf,
                save=False
            ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T12:22:43.400

最好使用 sorl-thubnail。

# extjs - 以编程方式隐藏边框布局区域内的组件

> ID：13285249
> 
> 赞同：5
> 
> 时间：2012-11-08T08:32:59.780
> 
> 标签：extjs, extjs4, extjs4.1, extjs-mvc

我有一个边界布局，比如说两个区域；中部和西部。westregion 添加了 splitter 参数并且是可折叠的。现在我有一个工具栏，我想从中隐藏/显示西部区域。我通过调用`toggleTargetCmp()`分离器的方法解决了这个问题。我知道，这是一种私有方法，不应该使用，但我没有找到其他方法来存档它。到现在为止还挺好。这一切都有效。

`getCollapseTarget()`但是现在，如果单击工具栏中的按钮，我想隐藏拆分器和占位符（我使用拆分器的方法获取占位符 ownet ）。我尝试了它，`setVisible(false)`它适用于拆分器，但它不适用于占位符......在更深入地查看占位符实例后，我可以告诉它已设置为`hidden: true`但它使用`hideMode: 'offsets'`默认情况下的加号`hiddenAnchestor: false`，该加号未记录在API。

根据**[hideMode](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.AbstractComponent-cfg-hideMode)**的 API 文档，我尝试`'display'` 在调用之前将其设置为`setVisible(false)`没有任何运气，占位符仍然可见。

那么我怎样才能隐藏占位符呢。还是有更好的存档方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:14:44.910

你试过隐藏方法吗？它完全按照您的描述工作 - 隐藏区域和拆分器。在我的项目中，我这样做：

```
panel.hide(); 
```

其中 panel 是borderPanel 项目之一。

# php - 如何使用 Elastica 进行查询

> ID：13285250
> 
> 赞同：4
> 
> 时间：2012-11-08T08:33:02.790
> 
> 标签：php, elasticsearch, elastica

这是我第一次使用 Elastica 并从 ElasticSearch 查询数据

对我来说，作为初学者，我有一个关于如何使用 Elastica 查询以下代码的问题？：

```
curl 'http://localhost:9200/myindex/_search?pretty=true' -d '{     
  "query" : {
    "term": {
      "click": "true"
    }   },   "facets" : {
    "matches" : {
      "terms" : {
          "field" : "pubid",
          "all_terms" : true,
          "size": 200 
      }
    }   
  } 
}' 
```

希望有人可以在这里帮我一把。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T14:55:22.497

这应该这样做：

```
// Create a "global" query
$query = new Elastica_Query;

// Create the term query
$term = new Elastica_Query_Term;
$term->setTerm('click', 'true');

// Add term query to "global" query
$query->setQuery($term);

// Create the facet
$facet = new Elastica_Facet_Terms('matches');
$facet->setField('pubid')
      ->setAllTerms(true)
      ->setSize(200);

// Add facet to "global" query
$query->addFacet($facet);

// Output query
echo json_encode($query->toArray()); 
```

要运行查询，您需要连接到您的 ES 服务器

```
// Connect to your ES servers
$client = new Elastica_Client(array(
    'servers' => array(
        array('host' => 'localhost', 'port' => 9200),
        array('host' => 'localhost', 'port' => 9201),
        array('host' => 'localhost', 'port' => 9202),
        array('host' => 'localhost', 'port' => 9203),
        array('host' => 'localhost', 'port' => 9204),
    ),
)); 
```

并指定要运行查询的索引和类型

```
// Get index
$index = $client->getIndex('myindex');
$type = $index->getType('typename'); 
```

现在您可以运行查询

```
$type->search($query); 
```

* * *

**编辑**：如果您使用的是命名空间环境和当前版本的 Elastica，请将创建新对象的所有行相应更改为

```
$query = new \Elastica\Query;
$facet = new \Elastica\Facet\Terms 
```

等等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-13T03:26:35.547

您也可以这样查询：（感谢[http://tech.vg.no/2012/07/03/using-elastica-to-query-elasticsearch/](http://tech.vg.no/2012/07/03/using-elastica-to-query-elasticsearch/)的优秀文章）

```
<?php
$query = new Elastica_Query_Builder('{     
    "query" : {
        "term": {
            "click": "true"
            }   
        },
    "facets" : {
        "matches" : {
            "terms" : {
                "field" : "pubid",
                "all_terms" : true,
                "size": 200 
                }
            }   
        } 
    }');

// Create a raw query since the query above can't be passed directly to the search method used below
$query = new Elastica_Query($query->toArray());

// Create the search object and inject the client
$search = new Elastica_Search(new Elastica_Client());

// Configure and execute the search
$resultSet = $search->addIndex('blog')
                    ->addType('posts')
                    ->search($query);

// Loop through the results
foreach ($resultSet as $hit) {
    // ...
} 
```

# javascript - 如果域名 = 则更改 div 的类

> ID：13285251
> 
> 赞同：1
> 
> 时间：2012-11-08T08:33:05.137
> 
> 标签：javascript

我有 2 个域访问我的站点，但我想更改 ID 为 #logo 的 div 的类。

我尝试了以下但没有运气...

```
<script type="text/javascript"> 
var hasChar1 = window.location.href.indexOf('domain01') != -1;
var hasChar2 = window.location.href.indexOf('domain') != -1;
if (hasChar1)
{
   if (hasChar1)
   {document.getElementById("logo").className = "logoNZ";}
   else
   {document.getElementById("logo").className = "";}
}
else if (hasChar2)
{document.getElementById("logo").className = "";}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:38:13.400

为什么在自身内部插入相同的 if 语句？

这应该有效：

```
document.getElementById('logo').className = (window.location.hostname.indexOf('domain') !== -1) ? 'logoNZ' : 'notLogoNZ'; 
```

确保将此代码放在正文的末尾，在已经渲染的 div 之后！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:39:21.573

你有没有尝试过这样的事情？

```
if (window.location.hostname == "domain01"){
    document.getElementById("logo").className = "logoNZ";
}
else if (window.location.hostname == "domain"){
    document.getElementById("logo").className = "";
} 
```

# perl - 关闭文件句柄上的读取行

> ID：13285252
> 
> 赞同：0
> 
> 时间：2012-11-08T08:33:10.913
> 
> 标签：perl

我正在为我的 prgram 使用这个子程序来等待长达几个小时的任务来完成它在 Windows 上所做的事情。当 windows 任务完成时，它会更新文本文件中的字符串，让 Linux 脚本知道 Windows 已完成。

我在运行时收到此错误：readline() on closed filehandle

这是子

```
my $numberOfChecks = 28;
my $sleepTime = 900;
my $communicationsFile = "/home/user/ICAhome/Win_To_Linux_ComFile.txt";
my $winBuild = "1";

sub waitForWindowsBuild {
    while ($numberOfChecks-- $$ $winBuild == "1"){
        open (MYFILE, $communicationsFile);

        while (<MYFILE>){
            chomp;
            if ($_ eq $buildValue){
                $winBuild="1";
            }

            sleep($sleepTime);
        }

        close(MYFILE);
    }
} 
```

谁能告诉我发生了什么事？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:34:18.110

检查是否`open`成功。例如，

```
open (MYFILE, $communicationsFile)
   or die("Can't open $communicationsFile: $!\n"); 
```

# file - 如何使用 groovy 从目录中获取最新文件？

> ID：13285253
> 
> 赞同：4
> 
> 时间：2012-11-08T08:33:10.077
> 
> 标签：file, groovy

我有一个包含文件列表的目录。我想从所述目录的所有内容中获取最新文件。我将如何做到这一点？

我正在使用此代码，但我没有从中获取最新文件。请帮忙。

```
def fileDir = new File("A/B").listFiles().first() 
```

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T09:20:41.267

很简单：

```
new File( 'A/B' ).listFiles()?.sort { -it.lastModified() }?.head() 
```

（取否定的 lastModified，因为我们首先要最新的文件）

# java - 从java运行批处理文件？

> ID：13285262
> 
> 赞同：-2
> 
> 时间：2012-11-08T08:33:33.153
> 
> 标签：java, batch-file, exe

> **可能重复：**
> [如何从我的 Java 应用程序运行批处理文件？](https://stackoverflow.com/questions/615948/how-do-i-run-a-batch-file-from-my-java-application)

是的，我知道这个问题已经被问过很多次了。我已经看到了解决方案，但没有一个对我有用。目前我正在这样做：

```
public static void main(String args[])
        throws IOException
{
    Runtime rt = Runtime.getRuntime();
    rt.exec("C:\\sample-win32\\sample.bat");    
} 
```

令人惊讶的部分是eclipse运行顺利，没有错误或异常出现。但是文件'sample.bat'没有做它应该做的事情。请帮忙。

说这是我的批处理文件。我只是制作一个文件夹并打开它。当我双击批处理文件时，它工作正常。但是当我使用java程序时，什么也没有发生。

```
md 1

start 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:59:35.397

批处理文件中的路径可能有问题。仅使用绝对路径或`cd`在脚本开头添加命令以跳转到定义的文件夹。

您可能希望控制台上有输出，但看不到任何输出。这是因为您必须重定向流。[请参阅此问题和 Brian 的答案以获得解决方案。](https://stackoverflow.com/questions/882772/capturing-stdout-when-calling-runtime-exec)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:08:51.153

请记住，将某些内容传递给 exec 方法与输入 run 或 command 相同

# sql - 在编写透视查询以从不同的选择语句中选择列时需要帮助

> ID：13285264
> 
> 赞同：2
> 
> 时间：2012-11-08T08:33:40.687
> 
> 标签：sql, sql-server, pivot, sql-server-2012

我正在使用 SQL Server 2012，我需要帮助才能获得以下输出。我的表结构如下：

```
declare @TestTable table (MaterialCode char(5), ItemCode char(5), ItemName varchar(50))

insert into @TestTable values ('AA-01', 'A0001', 'iPhone')
insert into @TestTable values ('AA-02', 'A0001', 'iPad')
insert into @TestTable values ('AA-03', 'A0001', 'iPod')

insert into @TestTable values ('AA-01', 'B0001', 'Galaxy Tab')
insert into @TestTable values ('AA-02', 'B0001', 'Galaxy Note')

insert into @TestTable values ('AA-01', 'C0001', 'Nokia Lumnia')
insert into @TestTable values ('AA-02', 'C0001', 'Motorola')
insert into @TestTable values ('AA-03', 'C0001', 'Samsung S3')
insert into @TestTable values ('AA-04', 'C0001', 'Sony')

--select * from @TestTable

select MaterialCode, ItemCode as [A_ItemCode], ItemName as [A_ItemName] 
from @TestTable where ItemCode='A0001'

select MaterialCode, ItemCode as [B_ItemCode], ItemName as [B_ItemName] 
from @TestTable where ItemCode='B0001'

select MaterialCode, ItemCode as [C_ItemCode], ItemName as [C_ItemName] 
from @TestTable where ItemCode='C0001' 
```

而我需要的输出应该是从上面三个select语句产生的，应该如下：

![在此处输入图像描述](../Images/47951e077354b1f39db3332b92b9e43c.png)

如您所见，当没有记录时，NULL 会显示在那里。谁能帮我得到这个输出。TIA。

**编辑**

@JohnLBevan，我尝试了您的枢轴方法，当我有另一条记录时 ItemCode = D0001

```
insert into @TestTable values ('AA-05', 'D0001', 'Test1') 
```

现在，即使该记录也显示为

```
AA-05   NULL    NULL    NULL    NULL    NULL    NULL 
```

如何避免这些类型的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:43:23.883

不使用枢轴，但这会给你想要的结果：

```
SELECT coalesce(a.MaterialCode, b.MaterialCode, c.MaterialCode) MaterialCode 
, a.ItemCode A_ItemCode
, a.ItemName A_ItemName
, b.ItemCode B_ItemCode
, b.ItemName B_ItemName
, c.ItemCode C_ItemCode
, c.ItemName C_ItemName
FROM (select * from @TestTable where ItemCode='A0001') a
full outer join (select * from @TestTable where ItemCode='B0001') b
    on a.MaterialCode = b.MaterialCode
full outer join (select * from @TestTable where ItemCode='C0001') c
    on a.MaterialCode = c.MaterialCode
    or b.MaterialCode = c.MaterialCode 
```

这是一个使用枢轴的替代方案，尽管这感觉更混乱：

```
SELECT MaterialCode
, case when [A0001] is null then null else 'A0001' end A_ItemCode
, [A0001] A_ItemName
, case when [A0001] is null then null else 'B0001' end B_ItemCode
, [B0001] B_ItemName
, case when [A0001] is null then null else 'C0001' end C_ItemCode
, [C0001] C_ItemName
FROM @TestTable a
pivot (
    max(ItemName) 
    for ItemCode in ([A0001],[B0001],[C0001])
) pvt 
```

**编辑**

如果你想要更灵活的东西，这里有一个动态版本：

```
declare @dynamicSql nvarchar(max)
, @dynamicSqlPart nvarchar(max)

select * into #TestTable from @TestTable

set @dynamicSql = 'SELECT MaterialCode ' + CHAR(10)
select @dynamicSql = @dynamicSql + ', case when [' + ItemCode + '] is null then null else ''' + ItemCode + ''' end ' + ItemCode + '_ItemCode ' + CHAR(10)
    + ', ' + QUOTENAME(ItemCode) + ' ' + ItemCode + '_ItemName ' + CHAR(10)
, @dynamicSqlPart = ISNULL(@dynamicSqlPart + ',','') +  QUOTENAME(ItemCode)
from (select distinct ItemCode from @TestTable) x

set @dynamicSql = @dynamicSql + 'from #TestTable a' + CHAR(10)
    + 'pivot (' + CHAR(10)
    + ' max(ItemName) ' + CHAR(10)
    + ' for ItemCode in (' + @dynamicSqlPart + ')' + CHAR(10)
    + ') pvt' + CHAR(10)

print isnull(@dynamicSql,'?')
exec (@dynamicSql)

drop table #TestTable 
```

# android - 用手指移动任何 RelativeLayout（不更改布局参数）

> ID：13285268
> 
> 赞同：4
> 
> 时间：2012-11-08T08:33:57.440
> 
> 标签：android, android-animation

我有一个视图，我想用手指移动它。我想得到 xDelta 和 yDelta 并只翻译视图的矩阵（不是图像视图，任何视图，例如 RelativeLayout）。我想知道如何做到这一点：

1.  覆盖RelativeLayout 的onDraw 并在那里应用翻译矩阵。那可能吗？
2.  我目前正在对每个 onTouch 事件应用动画。动画的持续时间为 0，x/y 的开始/结束相同（setFillAfter = true）。它只是将视图放在我想要的位置。但这不是太贵了吗？

不能直接通过onDraw来操作任何视图的矩阵吗？我试过这样的事情：

```
@Override
protected void onDraw(Canvas canvas) {
    if (getDx() != 0 && getDy() != 0) {
        m = canvas.getMatrix();
        m.postTranslate(dx, dy);
        canvas.setMatrix(m);
    }
    super.onDraw(canvas);
} 
```

但似乎我做错了。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T12:10:38.163

如果要实现拖动手势，则可以使用**onTouchListener**并在其**MotionEvent.ACTION_MOVE**中使用 setPadding 设置填充到该视图。

这是示例代码：

```
case MotionEvent.ACTION_MOVE:
    yourView.setPadding((int)event.getRawX(), (int)event.getRawY(), 0, 0); 
```

onTouchListener 示例：-

```
OnTouchListener drag= new OnTouchListener() {

        @Override
    public boolean onTouch(View v, MotionEvent event) {

        switch(event.getAction() & MotionEvent.ACTION_MASK){
           case MotionEvent.ACTION_DOWN:

            break;
           case MotionEvent.ACTION_POINTER_DOWN:

            break;
           case MotionEvent.ACTION_MOVE:
               img.setPadding((int)event.getRawX(), (int)event.getRawY(), 0, 0);
            break;
           case MotionEvent.ACTION_UP:
            break;
           case MotionEvent.ACTION_POINTER_UP:

            break;
           }        return true;
    }
}; 
```

您需要在运行时创建拖动图像并且必须调整其位置。在此示例代码中，我没有调整位置，因此不会在触摸位置创建拖动的图像。您还需要考虑要拖动的图像的高度和宽度。

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:07:55.787

I hate to be the one to tell you that your problem is even easier than you thought, but here's what it looks like:

```
@Override
protected void onDraw(Canvas canvas) {
    if (getDx() != 0 && getDy() != 0) {
        canvas.translate(getDx(), getDy());
    }
    super.onDraw(canvas);
} 
```

Hope this helps!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T06:20:07.193

如果你想永久移动你的布局（如果是临时的，我们可以使用动画）然后使用[android Official Page 的 Drag And Drop API](http://developer.android.com/guide/topics/ui/drag-drop.html)。希望对你有帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-16T17:54:43.667

有助于实现它的几件事：

1.  确保您的视图最初在您想要使用的方向上有足够的空间。像'match_parent'等

2.  使用 GestureDetector.onSimpleGestureListener 并覆盖**onDraw (return true;) , onScroll** -- 使用**onTouchEvent**连接就可以直接得到**距离**，也可以使用**event1 和 event2自己计算**

3.  将此信息存储在变量中并调用**invalidate()**

4.  在您的 onDraw 方法中 - 通过**canvas.translate(..use those variables..) 使用此信息；超级.onDraw（画布）；**

你会达到的结果

PS：绘图以left-top为0,0开始

# android - 像动画一样捕捉笔记

> ID：13285269
> 
> 赞同：0
> 
> 时间：2012-11-08T08:34:00.480
> 
> 标签：android, list, animation

我需要在“Catch notes”应用程序中创建一个动画。我指的动画是当你按下列表中的一个对象时，它上面的所有对象都会上升，而它下面的所有对象都会下降，所有这些都带有动画。

我在想通过使用常规列表视图是不可能的。所以也许这样做的方法只是以某种方式手动放置对象？

有更好的想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:39:50.440

获取所有可见项目（listView.getFirstVisiblePosition() 到 getLastVisiblePosition()）并使用 listView.getChildAt(index) 获取视图。然后，您可以使用 ObjectAnimator 或类似工具对视图上方和下方的所有视图进行动画处理。

例子：

```
for (int i = listView.getFirstVisiblePosition(); i < myListAdapter.getCount() && i <=    listView.getLastVisiblePosition(); i++) {
  View v = listView.getChildAt(i - listView.getFirstVisiblePosition());
  ListItem listItem = myListAdapter.getListItem(i);
  if (v != null) {
    ObjectAnimator.ofFloat(v, "translationY", 0, -screenHeight).start();
  }
} 
```

# c++ - 使用 boost::assign::list_of

> ID：13285272
> 
> 赞同：13
> 
> 时间：2012-11-08T08:34:05.003
> 
> 标签：c++, boost, c++98

这编译：

```
std::vector<int> value = boost::assign::list_of(1)(2); 
```

但不是这个：

```
Constructor(std::vector<int> value)
{
}

Constructor (boost::assign::list_of(1)(2)); 
```

是否有一种用于初始化传递给构造函数的向量的单线解决方案？

更好的是，如果构造函数通过引用来复制到类变量：

```
Constructor(std::vector<int>& value)
{
    _value = value;
} 
```

**更新**

如果我尝试以下操作：

```
enum Foo
{
    FOO_ONE, FOO_TWO 
};

class Constructor
{
public:
    Constructor(const std::vector<Foo>& value){}
};

Constructor c(std::vector<Foo>(boost::assign::list_of(FOO_ONE))); 
```

我得到编译器错误：

```
error C2440: '<function-style-cast>' : cannot convert from 'boost::assign_detail::generic_list<T>' to 'std::vector<_Ty>'
1>          with
1>          [
1>              T=Foo
1>          ]
1>          and
1>          [
1>              _Ty=Foo
1>          ]
1>          No constructor could take the source type, or constructor overload resolution was ambiguous 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-07-23T09:08:32.250

这是一个烦人的问题，我们之前也有过一段时间。我们使用以下`convert_to_container`方法修复它：

```
Constructor c(boost::assign::list_of(1)(2).convert_to_container<std::vector<int> >() ); 
```

在构造函数中使用**std::list**也有更多问题。请参阅[使用 boost 的 list_of 将 std::list 传递给构造函数不会编译](https://stackoverflow.com/questions/20135896/pass-stdlist-to-constructor-using-boosts-list-of-doesnt-compile)以获得适当的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-09T09:23:39.000

我正在使用此模板就地制作 std::vector 的临时实例：

```
#include <vector>
namespace Util {
//init vector
template <typename ELEMENT_TYPE > struct vector_of
    : public std::vector<ELEMENT_TYPE>
{
    vector_of(const ELEMENT_TYPE& t)
    {
        (*this)(t);
    }
    vector_of& operator()(const ELEMENT_TYPE& t)
    {
        this->push_back(t);
        return *this;
    }
};
}//namespace Util 
```

用法如下所示：

```
Constructor (Util::vector_of<int>(1)(2)); 
```

构造函数签名如下所示：

```
Constructor(const std::vector<int>& value)
{
    _value = value;
} 
```

# c# - 在运行时动态创建控件

> ID：13285278
> 
> 赞同：0
> 
> 时间：2012-11-08T08:34:19.400
> 
> 标签：c#, c#-4.0

我想在 C# 运行时创建控件。我使用如下所示的方法：

解析 XML 文件并从 XML 文件中获取所有值，例如：

```
TextView.Name = DOC.SelectSingleNode("//TextViewObject/Name").InnerText;
TextView.Value = DOC.SelectSingleNode("//TextViewObject/Value").InnerText;
TextField.Name = DOC.SelectSingleNode("//TextFieldObject/Name").InnerText; 
```

我应该使用什么方法在运行时创建控件？如何从这些控件中获取值？

# symfony - Simfony2 实体字段类型中从 Doctrine Query 到 QueryBuilder

> ID：13285281
> 
> 赞同：4
> 
> 时间：2012-11-08T08:34:21.160
> 
> 标签：symfony, doctrine-orm, dql, query-builder

我在*Symfony2.1*表单中使用*实体字段类型。*在这里，我将使用参数仅返回与长复杂查询匹配的实体（参见[官方文档](http://symfony.com/doc/current/reference/forms/types/entity.html#using-a-custom-query-for-the-entities)中的示例）。*`query_builder`*

 *显然，`query_builder`实体字段类型的参数接受 Doctrine *QueryBuilder*对象。另一方面，我有大型实体存储库，其中包含由*EntityManager*的`createQuery()`函数获得的复杂 DQL 查询，该函数返回一个 Doctrine *Query*对象。所以，我不能直接在实体字段类型中使用所有这些查询。此外，重写所有查询以使用 QueryBuilder 将是无稽之谈。

有没有这样一种方法可以自动从*Query*对象转换为*QueryBuilder*对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:04:01.830

来自 Symfony2 文档：

> **query_builder** - 类型：`Doctrine\ORM\QueryBuilder`或`Closure`<---
> 
> 如果指定，则用于查询应用于该字段的选项子集（及其顺序）。此选项的值可以是`QueryBuilder`对象或`Closure`. 如果使用 a `Closure`，它应该采用单个参数，即`EntityRepository`实体的 the。

现在，我没有时间尝试一个例子，但在我看来，如果你使用`Closure`你可以返回`ArrayCollection`（或至少`array`）目标实体对象。您`Closure`将对象`EntityRepository`作为参数，因此无需重写所有这些内容。

介意试一试吗？:)

# 更新

……抱歉让你久等了……

这种方式似乎是不可能的。相反，您必须`choice`手动使用表单类型和提要实体对象（或对象存储库）。

I've made some simplified example here: [http://ideone.com/LHdi2E](http://ideone.com/LHdi2E)

Hope this helps...*

# php - wordpress 表单上的必需警报

> ID：13285285
> 
> 赞同：0
> 
> 时间：2012-11-08T08:34:28.697
> 
> 标签：php, javascript, jquery, ajax, wordpress

它工作的联系表，如果你填写它，它会发送消息。如果您不填写电子邮件框，表格不会提醒您，问题是我可以向用户显示一个单词或某种提醒吗？

这是我的标记：

```
<div class="form">
        <h2>ESCRIBENOS</h2>
        <form method="post" action="process.php">
        <div class="element">
            <label>Nombre (obligatorio):</label><br/>
            <input type="text" name="name" class="text" />
        </div>
        <div class="element">
            <label>Email (obligatorio):</label><br/>
            <input type="text" name="email" class="text" />
        </div>
        <div class="element">
            <label>Telefono:</label><br/>
            <input type="text" name="website" class="text" />
        </div>
        <div class="element">
            <label>Mensaje:</label><br/>
            <textarea name="comment" class="text textarea" /></textarea>
        </div>
        <div class="element">

            <input type="submit" id="submit"/>
            <div class="loading"></div>
        </div>
        </form>
        </div> 
```

这是我的脚本：

```
$(document).ready(function() {

//if submit button is clicked
$('#submit').click(function () {        

    //Get the data from all the fields
    var name = $('input[name=name]');
    var email = $('input[name=email]');
    var website = $('input[name=website]');
    var comment = $('textarea[name=comment]');

    //Simple validation to make sure user entered something
    //If error found, add hightlight class to the text field
    if (name.val()=='') {
        name.addClass('hightlight');
        return false;
    } else name.removeClass('hightlight');

    if (email.val()=='') {
        email.addClass('hightlight');
        return false;
    } else email.removeClass('hightlight');

    if (comment.val()=='') {
        comment.addClass('hightlight');
        return false;
    } else comment.removeClass('hightlight');

    //organize the data properly
    var data = 'name=' + name.val() + '&email=' + email.val() + '&website=' + 
    website.val() + '&comment='  + encodeURIComponent(comment.val());

    //disabled all the text fields
    $('.text').attr('disabled','true');

    //show the loading sign
    $('.loading').show();

    //start the ajax
    $.ajax({
        //this is the php file that processes the data and send mail
        url: "../process.php",  

        //GET method is used
        type: "GET",

        //pass the data         
        data: data,     

        //Do not cache the page
        cache: false,

        //success
        success: function (html) {              
            //if process.php returned 1/true (send mail success)
            if (html==1) {                  
                //hide the form
                $('.form').fadeOut('slow');                 

                //show the success message
                $('.done').fadeIn('slow');

            //if process.php returned 0/false (send mail failed)
            } else alert('Sorry, unexpected error. Please try again later.');               
        }       
    });

    //cancel the submit button default behaviours
    return false;
}); 
}); 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:07:30.197

试试这个：

```
var name = $('input[name=name]');
        var email = $('input[name=email]');
        var website = $('input[name=website]');
        var comment = $('textarea[name=comment]');

        //Simple validation to make sure user entered something
        //If error found, add hightlight class to the text field

        $('input[type=text]').each(function(){
             if($(this).val().length == 0){
                $(this).addClass('hightlight');
                alert('Empty input field')
                return false;
             }
        }); 
```

....您的其余代码

注意：这不适用于 textarea 但我认为您可以自己弄清楚！

* * *

编辑：

```
 var valid = false;

    $('input[type=text]').each(function(){
             if($(this).val().length == 0){
                $(this).addClass('hightlight');
                alert('Empty input field')
                valid = false;
             }else{
                valid = true;
             }
        });

    if(valid == false) return; 
        console.log('All input fields are filled in..'); 
```

...您的其余代码。您可以删除所有输入字段的 if else 语句。为了检查文本区域，您可以为所有字段提供相同的类并执行以下操作：

```
$('form.classofallelements').each(function(){ 
```

# php - 谷歌 Picasa 搜索 API

> ID：13285290
> 
> 赞同：0
> 
> 时间：2012-11-08T08:34:55.793
> 
> 标签：php, google-api, picasa

我可以使用 API 在 Google Picasa 上按关键字搜索吗？

**UPD**答案是 -[通过社区搜索列出照片](https://developers.google.com/picasa-web/docs/1.0/developers_guide_php#ListCommunityPhotos)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T10:52:47.647

这是来自谷歌的 api 文档

[https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#SearchByTags](https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol#SearchByTags)

# javascript - JavaScript 在 Chrome 扩展 HTML 桌面通知中不起作用

> ID：13285296
> 
> 赞同：2
> 
> 时间：2012-11-08T08:35:08.340
> 
> 标签：javascript, html, google-chrome-extension, notifications, desktop

我正在开发一个带有 HTML 桌面通知的 Chrome 扩展程序，但是当它们出现时，它们看起来好像没有执行任何 JavaScript。我从一个复杂的 JS 开始，然后我将测试简化为这个：

```
<!DOCTYPE html>
<head>
    <title>notification</title>
</head>
<body>
    <script>document.write("content")</script>
    <img src='notification.png'><p>Yep!</p><p id="test"></p>
</body>
</html> 
```

我可以看到我硬编码的任何内容，但没有 DOM 操作（或简单的 document.write）在工作。我试图将 JS 放在一个单独的文件中，但它不起作用。我当前的 Chrome 版本是 23.0.1271.64 (Apple v.)。

你能帮助我吗？

[更新] 这是 manifest.json：

```
{
  "name": "BB",
  "version": "1.0",
  "manifest_version": 2,
  "description": "",
  "icons": {"48": "BB.png"},
  "browser_action": {
    "default_title": "BB",
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "background": {
    "scripts": ["bkg.js"]
  },
  "permissions": [
    "notifications"
  ],
  "web_accessible_resources": [
    "notification.html","popup.html","popup.js"
  ]
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:04:02.507

[**由于内容安全策略 (CSP)**](http://developer.chrome.com/stable/extensions/contentSecurityPolicy.html)，您必须使用外部脚本。

这是我如何让它工作的：

**背景.js**

```
var notification = webkitNotifications.createHTMLNotification('notification.html');
notification.show(); 
```

**通知.html**

```
<!DOCTYPE html>
<head>
  <title>notification</title>
  <script src="notification.js"></script>
</head>
<body>
    <img src='notification.png'><p>Yep!</p><p id="test"></p>
</body>
</html> 
```

最后是**notification.js**。添加事件侦听器以等待页面加载很重要：

```
document.addEventListener('DOMContentLoaded', function() {
  document.getElementById('test').innerHTML = 'test';
}); 
```

`p`然后应该用测试内容填充标签的文本。

[顺便说一句：我认为您不需要将**notification.html**添加到您的`web_accessible_resources`.]

# listview - 基本：如何让 KendoUI 小部件呈现

> ID：13285297
> 
> 赞同：0
> 
> 时间：2012-11-08T08:35:08.607
> 
> 标签：listview, kendo-ui

我正在尝试学习使用 KendoUI。

我做了一个小教程，一切似乎都很好。作为下一步，我想开始实施一些演示。我从列表视图开始，但是我似乎无法让它正确呈现。

我把我的尝试放在这里：

*   [http://kendoui.herokuapp.com/listview](http://kendoui.herokuapp.com/listview)

我试图重新创建的演示和源代码在这里：

*   [http://demos.kendoui.c​​om/mobile/listview/index.html](http://demos.kendoui.com/mobile/listview/index.html)

Firebug 显示没有 javascript 错误，并且所有 CSS 文件似乎都被正确引用，所以我不明白为什么复制完全相同的代码会有任何问题。

如果您对可能出现的问题有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:12:21.707

您需要包含移动设备的 CSS 样式表：kendo.mobile.all.min.css

# c# - ObservableCollection 还是 IEnumerable？

> ID：13285299
> 
> 赞同：0
> 
> 时间：2012-11-08T08:35:14.637
> 
> 标签：c#, wpf, .net-4.0

加载列表框的 ObservableCollection 或 IEnumerable 哪个更快？

我目前正在使用 IEnumerable 作为列表框的 ItemSource。

如果我将其更改为 ObservableCollection，它是否会对性能产生任何影响，如果可能的话？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:42:48.413

这实际上取决于哪个类正在实现 IEnumerable。IEnumerable 只是一个接口，任何数量的类都可以在实际实现的后面。您并没有真正绑定 IEnumerable，因为那是一个接口，但是您正在绑定一些实现 IEnumerable 的集合/列表。ObservableCollection 还实现了 IEnumerable，因此应该能够安全地将其用作 ItemSource。

通过 IEnumerable 枚举来填充 ListBox 绝不应该成为应用程序的性能瓶颈，除非您将使用一些自定义类在迭代值时执行大量逻辑，在这种情况下，您的设计可能会存在缺陷。

话虽如此，最好的方法当然是简单地测量。没有什么可以替代衡量和做出假设总是可能会回来咬你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:46:32.200

我对 WPF 和 C# 很陌生，但到目前为止我所了解的是，如果您使用 IEnumerable 作为 ItemSource，例如 List，除非您将其替换为 List，否则您将无法看到该 List 中的更改不同的：

```
IEnumerable<int> myList = new List<int>();
myList.Add(3); 
```

在这种情况下（前提是你做了所有必要的事情来通知你的 GUI发生了`myList`变化）什么都不会发生。如果你做这样的事情，而不是：

```
myList = new List<int> { 100, 200, 300 }; 
```

您的 GUI 将被通知。

相反，如果您使用 ObservableCollection，即使您使用该`Add`方法添加新元素，您的 GUI 也会收到通知。因此，您必须决定是否要向 ListBox 添加元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:09:44.370

如果您绑定到实现`IEnumerable`但不是a 的集合，`ObservableCollection`例如 a `List`，则不会通知绑定目标添加/删除项目。

不使用 ObservableCollection 仅在集合中的项目数不变的情况下才有意义。只有这样才能将 ObservableCollection 与其他对象进行比较。如果项目的数量发生变化，那么您别无选择，只能使用 ObservableCollection。

此外，正如其他用户已经指出的那样，您不必将 ObservableCollection 与 IEnumerable 进行比较，而是与实现 IEnumerable 的类进行比较。

例如，可以在 Stack Overflow 问题*[ObservableCollection<> 与 List<>](https://stackoverflow.com/questions/4196968/observablecollection-vs-list)*中找到比较 ObservableCollection - List 。

# c# - 序列化为 XML 非嵌套重复序列

> ID：13285309
> 
> 赞同：4
> 
> 时间：2012-11-08T08:36:17.263
> 
> 标签：c#, xml-serialization

我需要序列化为具有多个非嵌套值的数组，即

```
 <MyArray>
    <Code>code1</Code>
    <Name>name associated with code 1</Name>
    <Code>code2</Code>
    <Name>name associated with code 2</Name>
    <Code>code3</Code>
    <Name>name associated with code 3</Name>
    <Code>code4</Code>
    <Name>name associated with code 4</Name>
  </MyArray> 
```

我在我的阵列上尝试了各种属性 - 例如

```
[XmlArray(ElementName="MyArray")]        
[XmlArrayItem(ElementName="")]        
public List<MyPair> MyPairs { get; set; } 
```

注意：MyPair 对象包含 2 个字符串属性（代码和名称）：

但无济于事，我总是为每一对获得一个包含元素（这通常会更好，但不是架构要求的 - 而且我无法控制）。非常感谢任何帮助。

**编辑**这是一个巨大的 xml 文档的一部分，是否可以将 XElement 的手动序列化用于其中的一部分，而将 XMLSerialization 用于其余部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:54:54.227

除了手动序列化您的项目之外，我没有看到其他方法。

```
XElement xElem = new XElement("MyArray", 
                               array.Select(m => new XElement[] { 
                                               new XElement("Code", m.Code), 
                                               new XElement("Name", m.Name) })
                              );
var xml = xElem.ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:24:52.193

只是为了关闭它。我解决了这个问题，我认为这可以称为有点hack，因为我想避免手动序列化整个对象图。所以：

*   使用xml序列化序列化为字符串
*   操纵字符串以删除有问题的额外嵌套元素
*   将 xml 整个字符串解析为单个 XElement（允许将其正确序列化为 WCF 的 xml）

# css - 如何在 html 中的 div 内排列 3 个 div（left/bottomcenetr/topright）？

> ID：13285313
> 
> 赞同：0
> 
> 时间：2012-11-08T08:36:47.257
> 
> 标签：css, html

我试图实现这一目标

```
| Div     |                  |Div nav wrapper|
| logo    |                          
|container||  Div banar container            |
|         ||                                 | 
```

我试过这个

```
 <div class="grid_12">
        <!--logo_container start here-->
        <div id="logo_container">
            <a href="#" id="logo"></a>

        </div>
            <div style="margin-top: 57px" class="grid_13">
            <div id="banar_container">
                <a href="#" id="banar"></a>
            </div>
            </div>

        <!--logo_container end here-->
        <div id="nav_wrapper">
            <ul id="nav">
                <li class="current_page_item"><a href="index.html">Home</a></li>
                <li><a href="about.html">My Profile</a></li>
                <li><a href="#">LogOut</a>

                </li>

            </ul>
        </div>
        <!--#nav_wrapper-->
    </div> 
```

和CSS是

```
.grid_12 {
width:940px;
}
 .grid_13 {
width:851px;
 }
#logo_container{
    float:left;
    margin-top:20px;}

#logo{
    background:url(../images/bp.jpg) no-repeat left;
    width:100px;
    float:left;
    height:100px;
}
#banar_container
{
  float: left;
}

 #banar
 {
background:url(../images/Banner1.png) no-repeat left;
width: 851px;
float:left;
height: 71px;
 }

 #nav_wrapper {
position:relative;
display:inline;
float:right;
margin-right:25px;
margin-top:6px;

height:50px; 

} 
```

它不是那样的..那我该怎么办？

这是我的完整代码...这是我正在尝试但未能做到的...所以请大家看看这个并告诉我我的错

伙计们，我还在为此苦苦挣扎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:55:28.837

我希望你会发现这个例子很有用。请注意，正如您所说，大小是固定的，但通过使用百分比相对于它的父级仍然是流动的。

HTML

```
<div id="example">
    <div class="box01"></div>
    <div class="box02"></div>
    <div class="box03"></div>
</div> 
```

​CSS

```
#example {
    width: 400px;
    height: 400px;
}

div.box01 {
    float: left;
    width: 20%;
    height: 100%;
    background-color: #eee;
}

div.box02 {
    float: right;
    min-width: 100px;
    min-height: 100px;
    background-color: #ccc;
}

div.box03 {
    float: right;
    width: 80%;
    min-height: 100px;
    background-color: #aaa;
}​ 
```

**[代码示例](http://tinkerbin.com/iq4VFduk)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:04:08.613

Most confusing job in web designing for me is to align divs like these but if you understand every aspect of float, display and some other properties important for layout designing then you can easily create such layouts.

Check this fiddle for an example [http://jsfiddle.net/DeepakKamat/xQKXz/1/](http://jsfiddle.net/DeepakKamat/xQKXz/1/)

The HTML :

```
<div class="container">
<div id="div1">Div 1</div>
<div id="div2">Div 2</div>
<div id="div3">Div 3</div>
</div>​ 
```

The CSS :

```
.container {backgroundcolor:yellow;display:block;width:400px;height:150px;padding:10px;}
.container div {margin:2px;color:white;}
#div1 {background-color:blue;width:20%;height:100%;border:2px dashed white;float:left;}
#div2 {background-color:green;display:inline-block;width:20%;height:70px;float:right;border:2px dashed white;}
#div3 {background-color:red;display:inline-block;width:76%;height:48%;border:2px dashed white;}​ 
```

I hope this helps you.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:47:16.477

不确定您的 div 宽度和高度的值是多少。

检查此**[演示](http://tinkerbin.com/DpNDZMUL)**

* * *

更新**[了演示](http://tinkerbin.com/BOnc8Fjr)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:50:03.550

你可以这样做：

```
 <div class="wrapper">
<div class="div1"></div><div class="div2"></div>
    <div class="div3"></div>
    </div>​ 
```

和 CSS：

```
div{border:solid 1px black;}
.div1 {
    width:50px;
    height:100px;
    float:left;
}

.div2 {    
    width:50px;
    height:18px;
    float:right;    
}
.div3 {
    width:250px;
    height:80px;
    float:left;
}
.wrapper{
    width:304px;
    border:none;
}​ 
```

[演示](http://jsfiddle.net/4YX9H/)

或者甚至可能是这样的：http: [//jsfiddle.net/4YX9H/1/](http://jsfiddle.net/4YX9H/1/) - div2 的宽度和高度几乎可以是任意的（它必须不比其父级宽）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T08:52:00.307

诀窍是要意识到你需要更多的 div 而不仅仅是这三个。也就是说，`div`s 2 和 3 需要有一个父级是 1 的兄弟姐妹`div`。试试这样：[http ://codepen.io/anon/pen/rLDqc](http://codepen.io/anon/pen/rLDqc)

HTML：

```
<div id="left">This is your div on the left</div>
<div id="center">
  <div id="main">Hello, this is the third div</div>
  <div id="right">This is the div in the top right</div>
</div>
<div class="clear"></div> 
```

CSS：

```
#left{
  width:30%;
  background:red;
  height:100px;
}
#center{
  width:70%;
  background:blue;
  height:100px;
}
#left, #center{
  float:left;
}
#right{
  position:relative; 
  display:inline; 
  float:right;
}
#main{
  margin-top: 57px;
  float: left;
}
.clear{
  clear:both;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T09:01:07.573

```
#div1 {
width: 100%;
}

#div2, #div3, #div4 {
width: 33.3%;
float: left;
}

<div id="div1">
<div id="div2"></div><div id="div3"></div><div id="div4></div>
</div> 
```

根据您的需要更改内部 div 的宽度。

# css - 旋转不适用于ie中的内部元素

> ID：13285314
> 
> 赞同：0
> 
> 时间：2012-11-08T08:37:13.403
> 
> 标签：css, rotation

我创建了一个 div，在该 div 中还有其他三个元素（画布）。我已经对该 div 应用了旋转，它也完美地适用于 firefox 和 chrome 中的内部元素。但在 IE 中，旋转并未应用于内部元素。ie有什么特别的方法吗？

这是旋转的代码，

```
transform: rotate(-5deg);
-webkit-transform: rotate(-5deg); /* Safari and Chrome */
-o-transform: rotate(-5deg); /* Opera */
-moz-transform: rotate(-5deg); /* Firefox */
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.992546151641322, M12=0.12186934340514761, M21=-0.12186934340514761, M22=0.992546151641322, SizingMethod='auto expand')"; 
```

# unix - Tar 创建一个意外大的文件

> ID：13285315
> 
> 赞同：2
> 
> 时间：2012-11-08T08:37:18.620
> 
> 标签：unix, tar

想也许这里有人可能知道发生了什么，但基本上我要做的是获取一个目录，并制作一个 tar 文件，省略两个级别的子目录（root/1/2）。鉴于它需要在一堆平台上工作，我认为最简单的方法是查找并 egrep 该目录，这很好地为我提供了文件列表。

但随后我将该文件列表通过管道传输到`xargs tar rvf`命令中，生成的文件类似于 33gb。我试图将 find 输出到一个文件中，并使用`tar -T`该文件作为输入，它仍然输出大约 33gb，当我对整个目录进行直接 tar（不省略任何内容）时，它会出现在我的位置d 期望它是 6-ish gb。

有什么想法吗？或者如何解决这个问题？我真的需要弄清楚这一点，我猜它与向它提供文件列表而不是让它只是 tar 一个目录有关，但不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:32:51.960

您的 find 命令将返回目录和文件

考虑使用 find 来查找目录并排除一些

```
tar cvf /path/to/archive.tar $(find suite -type d ! -name 'suite/tmp/Shared/*') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T00:37:46.090

当您在文件列表中指定目录时，`tar`将目录和其中的所有文件打包。如果您随后单独列出目录中的文件，它会（再次）打包文件。如果列出子目录，它会再次打包每个子目录的内容。等等。

如果您要创建文件列表，请确保它确实是文件列表并且不包含任何目录。

```
find . -type f ... 
```

省略号可能是`find`消除子目录中文件的选项，也可能是`grep -v`消除它们的选项。请注意，`-name`通常只匹配名称的最后一个组成部分。GNU`find`具有`! -path '*/subdir/*'`或变体允许您根据路径删除文件，而不仅仅是名称：

```
find . -type f ! -path './root/1/2/*' -print 
```

# bash - 如果条件错误，则编写 bash 脚本

> ID：13285326
> 
> 赞同：0
> 
> 时间：2012-11-08T08:38:12.947
> 
> 标签：bash

这是我第一个将我的内容同步到服务器的 bash 脚本。我想将要同步的文件夹作为参数传递。但是，它没有按预期工作。

这是我的脚本（保存为sync.sh）：

```
echo "STARTING SYNCING... PLEASE WAIT!"
var="$1" ;
echo "parameter given is $var"

if [ "$var"=="main" ] || [ "$var"=="all" ] ; then
    echo "*** syncing  main ***" ;
    rsync -Paz /home/chris/project/main/ user@remote_host:webapps/project/main/ 
fi

if [ "$var"=="system" ] || [ "$var"=="all" ] ; then
    echo "*** syncing  system ***" ;
    rsync -Paz /home/chris/project/system/ user@remote_host:webapps/project/system/ 
fi

if [ "$var"=="templates" ] || [ "$var"=="all" ] ; then
    echo "*** syncing  templates ***" ;
    rsync -Paz /home/chris/project/templates/ user@remote_host:webapps/project/templates/ 
fi 
```

这是我的输出：

```
chris@mint-desktop ~/project/ $ sh ./sync.sh templates
STARTING SYNCING... PLEASE WAIT!
parameter given is templates
*** syncing  main ***
^Z
[5]+  Stopped                 sh ./sync.sh templates 
```

尽管我给出了“模板”作为参数，但它忽略了它。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:44:07.530

您需要在操作员的两侧留出一个空间`==`。将其更改为：

```
if [ "$var" == "main" ] || [ "$var" == "all" ] ; then
    echo "*** syncing  main ***" ;
    rsync -Paz /home/chris/project/main/ user@remote_host:webapps/project/main/ 
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:42:17.230

根据以下评论，这是我建议的更正脚本：

```
#!/bin/bash
echo "STARTING SYNCING... PLEASE WAIT!"
var="$1" ;
echo "parameter given is $var"

if [ "$var" == "main" -o "$var" == "all" ] ; then
    echo "*** syncing  main ***" ;
    rsync -Paz /home/chris/project/main/ user@remote_host:webapps/project/main/ 
fi

if [ "$var" == "system" -o "$var" == "all" ] ; then
    echo "*** syncing  system ***" ;
    rsync -Paz /home/chris/project/system/ user@remote_host:webapps/project/system/ 
fi

if [ "$var" == "templates" -o "$var" == "all" ] ; then
    echo "*** syncing  templates ***" ;
    rsync -Paz /home/chris/project/templates/ user@remote_host:webapps/project/templates/ 
fi 
```

# codeigniter - 将 tank_auth 视图限制为网络时代的 div

> ID：13285328
> 
> 赞同：0
> 
> 时间：2012-11-08T08:38:15.723
> 
> 标签：codeigniter, web-applications, tankauth

嗨 Tank_auth 和网络大师！

我有 tank_auth 与我的 CodeIgniter 应用程序一起使用。目前，tank_auth 的登录/注册视图占据了整个屏幕。在我的网站上，我希望登录/注册视图占据我定义的一个 div。例如，我希望登录/密码字段只出现在右上角，而不是占据整个屏幕......你能指出我正确的方向吗？- 我在某处读到，我必须以某种方式限制 div 中的视图，但对于我的生活，我不明白如何！

非常感谢，

米兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:04:15.163

为登录创建 div。为登录创建一个视图。使用对视图的 javascript 调用填充 div。

```
<?php

//controller
//users.php
class Users {

//...

    public function div_login()
    {
        $this->load->view('div_login_view.php');
    }

//...

//------------------------------------------

//view
//div_login_view.php
echo form_open('users/login');
echo form_input('username');
echo form_password('password');
echo form_submit('Login');
echo form_close();

//------------------------------------------

//index page (or whatever page you want the form on)

<div id="login_div"></div>

<script type="text/javascript">

    $(document).ready(function(){
        var login_form = $.get('/users/div_login');
        if (login_form.status === 200){
            $('#login_div').html(login_form.responseText)
        }else{
            alert('There was an error getting the login form.');
        }
    })
</script> 
```

# php - Gz（un）在PHP中压缩并保存到文件

> ID：13285340
> 
> 赞同：0
> 
> 时间：2012-11-08T08:39:02.353
> 
> 标签：php, compression

有人可以解释为什么这个代码：

```
$str = "StackOverflow"; 
echo $str . " - ";

$strCompressed = gzcompress($str);
//echo $strCompressed . " - ";

$strUncompressed = gzuncompress($strCompressed);
echo $strUncompressed . " - "; 
```

给出预期的输出：`StackOverflow - StackOverflow -`

但是这段代码（从文件中写入和读取）：

```
$str = "StackOverflow";
$strCompressed = gzcompress($str);

$file = "test.cache";
$fp = fopen($file, "w");
fwrite($fp, $strCompressed);
fclose($fp);

$strCompressed = readfile($file);
echo gzuncompress($strCompressed); 
```

不产生 wated 输出`StackOverflow`？

另外，我想知道，如果我取消注释第一个示例 ( `//echo $strCompressed . " - ";`) 中注释的代码行，脚本将输出如下内容：`StackOverflow - xś.ILÎö/K-JËÉ/`，因此您可以看到没有第二个`StackOverflow -`示例，因为该行被注释掉了。任何见解都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:43:06.773

试试这个：

```
$strCompressed = file_get_contents($file);
echo gzuncompress($strCompressed); 
```

`readfile`不返回文件的内容但输出它们

# java - 记录 jax-ws http 请求和响应

> ID：13285342
> 
> 赞同：6
> 
> 时间：2012-11-08T08:39:11.217
> 
> 标签：java, logging, jax-ws

我需要在 JAX-WS WebService 调用中记录完整的 http 请求和响应。对于请求，我需要请求标头和正文，对于响应，我需要响应标头和正文。

经过一番研究，我发现我可以通过该属性获取此信息：

```
-Dcom.sun.xml.ws.transport.http.client.HttpTransportPipe.dump=true 
```

并显示我需要的信息，但它会将其转储到控制台，我需要使用内部请求 ID 将其存储在数据库中。

我试图实现一个处理程序：

```
public class LoggingHandler implements SOAPHandler<SOAPMessageContext> {

    @Override
    public boolean handleMessage(SOAPMessageContext context) {
        Boolean outbound = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);
        if (outbound) {
            System.out.println("SOAP outbound!!!!!");
            Map<String, List<String>> responseHeaders = (Map<String, List<String>>) context
                    .get(SOAPMessageContext.HTTP_RESPONSE_HEADERS);
            try {
                String headers = getHeaders(responseHeaders);
                System.out.println(headers);
                String body = getBody(context.getMessage());
                System.out.println(body);
            } catch (Exception ex) {
                // TODO: What do I have to do in this case?
            }
        } else {
            System.out.println("SOAP inbound!!!!!");
            Map<String, List<String>> requestHeaders = (Map<String, List<String>>) context
                    .get(SOAPMessageContext.HTTP_REQUEST_HEADERS);
            try {
                String headers = getHeaders(requestHeaders);
                System.out.println(headers);
                String body = getBody(context.getMessage());
                System.out.println(body);
            } catch (Exception ex) {
                // TODO: What do I have to do in this case?
            }
        }
        return true;
    }

    private String getBody(SOAPMessage message) throws SOAPException, IOException {
        OutputStream stream = new ByteArrayOutputStream();
        message.writeTo(stream);
        return stream.toString();
    }

    public String getFullHttpRequest(HttpServletRequest request) throws IOException {
        InputStream in = request.getInputStream();
        String encoding = request.getCharacterEncoding();
        encoding = encoding == null ? "UTF-8" : encoding;
        String body = IOUtils.toString(in, encoding);
        return body;
    }

    private String getHeaders(Map<String, List<String>> headers) throws IOException {
        StringBuffer result = new StringBuffer();
        if (headers != null) {
            for (Entry<String, List<String>> header : headers.entrySet()) {
                if (header.getValue().isEmpty()) {
                    // I don't think this is legal, but let's just dump it,
                    // as the point of the dump is to uncover problems.
                    result.append(header.getValue());
                } else {
                    for (String value : header.getValue()) {
                        result.append(header.getKey() + ": " + value);
                    }
                }
                result.append("\n");
            }
        }
        return result.toString();
    }

} 
```

但在这种情况下，我可以获取 http 请求标头和正文，但在响应中，我只获取正文，http 响应标头始终为空。

关于如何归档的任何想法？目标是能够将完整的 http 请求和响应存储在数据库中。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T05:28:50.423

你也可以试试

```
 -Dcom.sun.xml.ws.transport.http.HttpAdapter.dump=true 
```

我假设您从某种 Java EE 应用程序服务器（而不是独立客户端）中提供 Web 服务。您无法在 Web/Java EE 容器的上下文之外访问 Java EE 基础`HttpServletRequest`架构`HttpServletResponse`。

您可以尝试使用实际的 servlet 响应对象（在 Web 上下文中）

```
 HttpServletResponse response = (HttpServletResponse) messageContext.get(SOAPMessageContext.SERVLET_RESPONSE); //messageContext is the SOAPMessageContext
    List<String> responseHeaderNames = (List<String>)response.getHeaderNames();
        for(String headerName : responseHeaderNames){
             //Do whatever you want with it.
              } 
```

我严重怀疑您是否能够在处理程序中获得完整的响应标头。你的问题真的让我很感兴趣，我花了很多时间研究这部分。在我看到的所有代码示例中，甚至[地铁站点](http://metro.java.net/guide/ch05.html#from-server-side-handler)上的示例都没有尝试实现此功能，我认为原因很简单。在调用处理程序时，容器可能没有足够的确定信息来在出站消息上标记 http 标头。你也许可以添加东西，但这也是值得怀疑的。

# sql-server-2005 - 如何在 SQL Server 2005 中编写此查询

> ID：13285346
> 
> 赞同：0
> 
> 时间：2012-11-08T08:39:32.387
> 
> 标签：sql-server-2005

![在此处输入图像描述](../Images/6295256c258f38263bd00c3dacbe46a4.png)

这张表表明

*   `Emp 1`在 2010 年 1 月 14 日工作了 7.0 小时`Project 1`。
*   `Emp 2`已于 2010 年 1 月 15 日工作了 8.0 小时`Project 2`。
*   `Emp 1`于 2010 年 1 月 16 日工作了 8.0 小时`Project 1`。

我想像这样更新该表：

*   我想用 7.0 为 Emp 1 更新列 [14 Jan] 列第一行
*   我想用 8.0 为 Emp 2 更新列 [15 Jan] 列第二行
*   我想用 8.0 为 Emp 1 更新列 [16 Jan] 列第三行

因此结果应该是：

![在此处输入图像描述](../Images/f1c5195aa8d46f91b298adcc94f565a1.png)

谁能建议我如何在 SQL Server 2005 中编写相同的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T12:11:54.357

[H 从这里](http://forums.asp.net/t/1857224.aspx/1?How+to+write+this+Update+Query+in+SQL+Server+2005+)得到了很好的回复

# php - 如何为每个循环添加两个不同的数组

> ID：13285348
> 
> 赞同：0
> 
> 时间：2012-11-08T08:39:43.103
> 
> 标签：php, google-analytics

你好朋友我的问题很简单但很难理解我想是的。

这是更多代码：-

```
 $graph1 = new gapi($ga_email,$ga_password);

    $dimensions = array('date');
    $metrics    = array('visits');

    $graph1->requestReportData($ga_profile_id,
                           $dimensions,
                           $metrics,
                            'date'
                           );

$graph2 = new gapi($ga_email,$ga_password);

$dimensions = array('date');
$metrics    = array('visits');

$graph2->requestReportData($ga_profile_id,
                       $dimensions,
                       $metrics,
                       'date',
                       $filter, // Filter the data
                       '2012-09-07', // Start Date
                       '2012-10-07', // End Date
                       1,  // Start Index
                       500 // Max results

                       ); 
```

我有一个数组可以说

```
 $resultsg1 = $graph1->getResults(); 
```

和

```
 $resultsg2 = $graph2->getResults(); 
```

我试图从每个循环代码中获取这个值是here

```
data.addRows([
          <?php
          foreach($results as $result)
         {
            echo '["'.date("l, F j, Y",strtotime($result->getDate())).'", '.$result->getVisits().'," Visits :'.$result->getVisits().'","'.date("l, F j, Y",strtotime($result->getDate())).'",'.$result->getVisits().'," Visits :'.$result->getVisits().'"],';
          }

          ?>
         ]); 
```

现在我的问题我需要这样的输出：-

```
foreach($resultsg1 as $result1 and resultsg2 as $results2 )

 {
                echo '["'.date("l, F j, Y",strtotime($result1->getDate())).'", '.$result1->getVisits().'," Visits :'.$result1->getVisits().'","'.date("l, F j, Y",strtotime($result2->getDate())).'",'.$result2->getVisits().'," Visits :'.$result2->getVisits().'"],';
              }

              ?>
             ]); 
```

任何帮助都非常感谢.... :)

**注意**：- 此代码的目的是简单地创建一个包含两个不同月份的图表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:49:06.440

您可以使用[SPL](http://docs.php.net/book.spl)的[MultipleIterator](http://docs.php.net/class.multipleiterator)

```
<?php
echo 'phpversion: ', phpversion(), "\n";
$resultsg1 = data(1);
$resultsg2 = data(2);
$iterator = new MultipleIterator();
$iterator->attachIterator(new ArrayIterator($resultsg1));
$iterator->attachIterator(new ArrayIterator($resultsg2));

foreach( $iterator as $e ) {
    echo 'r1:', $e[0]->bar(), ', r2:', $e[1]->bar(), "\n";
}

// boilerplate
function data($n) {
    return array_map(function($e) use($n) { return new Foo($n.'-'.$e); }, range(1, 9));
}

class Foo {
    public function __construct($n) {
        $this->n = $n;
    }
    public function bar() {
        return $this->n;
    }
} 
```

印刷

```
phpversion: 5.4.7
r1:1-1, r2:2-1
r1:1-2, r2:2-2
r1:1-3, r2:2-3
r1:1-4, r2:2-4
r1:1-5, r2:2-5
r1:1-6, r2:2-6
r1:1-7, r2:2-7
r1:1-8, r2:2-8
r1:1-9, r2:2-9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:47:55.493

```
foreach($results1 as $k => $result)
{
     echo $result->getDate() , $results2[$k]->getDate() 
} 
```

如果长度不同，需要检查 isset($results2[$k])

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:48:15.910

不确定我是否完全理解您的要求，但是如果您有多个数组并且想要将它们连接在一起然后循环遍历它们，请查看 array_merge，如果更复杂的结构数组合并递归

```
$results = array_merge($result1, $resultg1); 
```

foreach($results 作为 $result) ....

# spring - 将 Spring 3.1.2 war 文件安装到 WebSphere 8.5 beta 时出现 Multipart requests 错误

> ID：13285349
> 
> 赞同：3
> 
> 时间：2012-11-08T08:39:46.097
> 
> 标签：spring, websphere, multipart

尝试使用管理控制台将 Spring 3.1.2 (servlet 3.0) WAR 安装到 WebSphere 8.5 beta 时，我收到以下错误：

```
[2012/11/08 10:19:32:585 CAT] 00000021 srt E com.ibm.ws.webcontainer.srt.SRTServletRequest parseParameters SRVE0133E: An error occurred while parsing parameters. {0}
java.lang.UnsupportedOperationException: SRVE8020E: Servlet does not accept multipart requests 
```

我已经将我的 DispatcherServlet 配置为处理多部分请求（即使我不需要对此的支持，但 WebSphere 8.x 似乎需要这个，请参阅下面的 JIRA）。

```
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
    <multipart-config>
        <max-file-size>10000000</max-file-size>
    </multipart-config>
</servlet>
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

不幸的是，Spring JIRA [https://jira.springsource.org/browse/SPR-9191](https://jira.springsource.org/browse/SPR-9191)只是暗示这个 web.xml 配置或 Spring Java 配置注释 @MultipartConfig 应该可以工作。

WebSphere 7 (servlet 2.5) 或 WebSphere 8.0 (servlet 3.0) 上不会出现此问题。我可以使用 WebSphere 8，但是任何关于它为什么不能在 8.5 beta 中工作的信息都会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-03-20T08:47:12.247

检查您的架构版本`web.xml`，它应该至少是 3.0

[http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd](http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd)

# javascript - three.js - 在管几何形状的每个部分画线

> ID：13285359
> 
> 赞同：0
> 
> 时间：2012-11-08T08:40:08.793
> 
> 标签：javascript, html5-canvas, three.js

我从外部 json 文件创建了一个具有 200 个坐标的管几何图形。请找到以下代码。

```
function plotPath()
        {                                           
            var obj = getPath();
            var segments = obj.path.length;
            var closed = false;
            var debug = false;
            var radiusSegments = 12;
            var tube;
            var points = [];
            var x=0,y=0,z=0; var vertices=[];           

            var point2x, point2y;

            function v(x,y,z) {
                  return new THREE.Vertex(new THREE.Vector3(x,y,z));
                };

            for(var i=0; i<obj.path.length; i++)
            {                               
                var point = obj.path[i].point;                              
                points.push(point);                 
            }

            extrudePath = new THREE.SplineCurve3(points);           
            extrudePath.dynamic = true;         

            tube = new THREE.TubeGeometry(extrudePath, segments, 60, radiusSegments, closed, debug);
            tube.dynamic = true;

            tube.verticesNeedUpdate = true;
            tube.dynamic = true;

            var faceIndices = [ 'a', 'b', 'c', 'd' ];
            var f;

            console.log(tube.faces[0]);
            for ( var i = 0; i < tube.faces.length; i ++ ) 
            {                           
                f = tube.faces[i];
                color = new THREE.Color( 0xffffff );
                color.setRGB( Math.random(), Math.random(), Math.random());

                for(var j=0;j<4;j++)
                {
                    vertexIndex = f[ faceIndices[ j ] ];    
                    p = tube.vertices[ vertexIndex ];                   
                    f.vertexColors[ j ] = color;
                }
            }

            tubeMesh = new THREE.Mesh(tube ,new THREE.MeshBasicMaterial( 
                    { color: 0xffffff, shading: THREE.FlatShading, side: THREE.DoubleSide, wireframe: false, transparent: false, 
                        vertexColors: THREE.VertexColors, overdraw: true } ));

            var v = new THREE.Vector3(1,0,0).normalize();           
            tubeMesh.applyMatrix(matrix.makeRotationAxis(v, 0));
            tubeMesh.applyMatrix(matrix.makeTranslation(-500,0,0)); 

            if ( tube.debug ) tubeMesh.add( tube.debug );                                   
            scene.add(tubeMesh);
            objects.push(tubeMesh);                                         
        } 
```

现在我想在每个段放置/绘制一些标记，例如带有文本的线条。我试图通过在每个坐标的 x 和 y 上加 10 来画线，但是管子是平移的，所以无法从确切的点画线。下面是我用来添加行的代码。

```
for(var i=0; i<obj.path.length; i++)
            {                               
                var point = obj.path[i].point;
                point2x = point.x+10;
                point2y = point.y+10;

                var lineGeo = new THREE.Geometry();
                  lineGeo.vertices.push(v(point.x, point.y, 0), v(point2x, point2y, 0));
                  var lineMat = new THREE.LineBasicMaterial({
                    color: 0x000000, lineWidth: 2});
                  var line = new THREE.Line(lineGeo, lineMat);
                  line.type = THREE.Lines;
                  scene.add(line);

                points.push(point);                 
            } 
```

如何在管几何的每个部分绘制/放置带有文本的此类标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:29:26.297

如果您希望您的线条与您的管一起移动/旋转，则将线条添加为 的子级`tubeMesh`，而不是 . 的子级`scene`。

```
tubeMesh.add( line ); 
```

如果您需要知道如何正确绘制线条，请查看 three.js 线条示例。

# php - 无法在 CodeIgniter 中上传 Excel 文件

> ID：13285360
> 
> 赞同：2
> 
> 时间：2012-11-08T08:40:09.027
> 
> 标签：php, codeigniter

我想在 CodeIgniter 中多次上传 excel 文件，但没有成功

（您尝试上传的文件类型是不允许的。）

控制器编码：

```
 $this->load->library('upload');
                $this->load->helper('file');
                //$config['upload_path'] = XLS_PATH;
                $config['upload_path'] = './public/test/files/test/';
                $config['allowed_types'] = 'xls|xlsx';
                $config['max_size'] = 0;

                $this->upload->initialize($config);

                echo $this->upload->file_type;

                if (!$this->upload->do_upload('userfile'))
                {

                    echo $this->upload->display_errors();

                }
                else
                {
                      $this->upload->do_upload('userfile');

                } 
```

意见：

```
<form method="post" enctype="multipart/form-data">
<input type="file" id="userfile" name="userfile"/>
<input type="submit" name="submit" id="sumit" value="Test" />
 </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:01:12.197

该库中有错误，也许[这](http://codeigniter.com/forums/viewthread/204725/)会有所帮助

# jquery - jQuery获取td宽度

> ID：13285362
> 
> 赞同：4
> 
> 时间：2012-11-08T08:40:12.227
> 
> 标签：jquery, width, html-table

我想学习 jQuery "td width"，例如：

```
if(td.width=="100"){
    alert("td width = 100");
} 
```

请解释。

```
<table width="200" border="1">
    <tr>
        <td width="100">Number</td>
        <td width="50">Order</td>
    </tr>
    <tr>
        <td width="100">1</td>
        <td width="50">Car</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T08:52:27.820

这是一个简单的扩展，可以编辑 css 以减少干扰。

```
var tdWidthLimit = 100;

$('td').each(function() {
    tdWidth = $(this).width();
    if (tdWidth >= tdWidthLimit)
    {    
        alert('hightlighted td width is ' + tdWidth);
        $(this).css({'background-color' : '#f00'});
    }
}); 
```

工作演示[在这里](http://jsfiddle.net/py26n/)​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:47:49.767

```
$('td').each(function(){
      if($(this).width() == 100){
           alert(this.textContent + " width = 100");
      }
}); 
```

这将查看您所有的 td，然后提醒 td 的文本内容和“width = 100”，如果宽度为 100

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:42:15.650

jQuery width 是一个方法，需要调用该方法：

```
if(td.width() === 100) {
    alert("td width = 100");
} 
```

并且 td 当然必须是一个 jQuery 对象。请注意，它将获取 jQuery 对象集合中的第一个元素并获取其宽度。如果你有很多元素，你需要使用 .each() 来循环该集合中的每个元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T08:42:36.290

这里：

```
if($('table td').width() == 100) {
    alert('width == ' + $('table td').width());
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T08:44:54.960

如果你想更好地理解 jQuery ，我建议你阅读一下[jQuery Fundamentals 。](http://jqfundamentals.com/)

在您当前的示例中，它应该如下所示：

```
if($('td').width() === 100) {
    alert("td width = 100");
} 
```

请注意，如果您的页面中有多个`td`元素，则会出现问题，因此我建议您考虑更具体的查询选择器。

# mysql - Mysql WHERE IN 子查询

> ID：13285365
> 
> 赞同：2
> 
> 时间：2012-11-08T08:40:18.547
> 
> 标签：mysql, group-by, subquery

我想列出在同一张表上匹配的所有行。到目前为止，我已经想出了这个

```
SELECT *
FROM parim_firms
WHERE firm_name IN (
    SELECT firm_name
    FROM parim_firms
    GROUP BY firm_name
    HAVING COUNT(*) > 1
) 
```

但是这个查询继续运行，尽管子查询本身在 0.1 秒内运行。

我该如何优化呢？

我认为子查询对每一行执行，而不仅仅是一次。我对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:42:12.167

加入它怎么样？

```
SELECT  a.*
FROM    parim_firms a
        INNER JOIN
        (
            SELECT firm_name
            FROM parim_firms
            GROUP BY firm_name
            HAVING COUNT(*) > 1
        ) b ON a.firm_name = b.firm_name 
```

*PS：请务必在列上添加索引`firm_name`以加快执行速度。*

# android - 开始新的活动，但类名与前一个活动相同

> ID：13285366
> 
> 赞同：0
> 
> 时间：2012-11-08T08:40:18.483
> 
> 标签：android, android-activity

我一直在尝试找到以下问题的解决方案，但没有成功：我有一个活动类，它显示需要记录的网页（演示文稿）（用户输入的内容、持续时间等）。在某些页面上，有一些按钮可以打开新的演示文稿。调用活动 - CLMWebView.class：

```
Intent intent = new Intent(this, CLMWebView.class);
this.startActivity(intent); 
```

在这些代码行之间有一些 intent.putExtra，我相信这与此无关。如您所见，我正在尝试使用与调用活动相同的类开始新活动。然而，什么也没有发生。有任何想法吗？

编辑：CLMWebView.class 的 Android 清单

```
<activity android:name="com.msoft.views.CLMWebView"
    android:configChanges="orientation|keyboard" 
    android:icon="@drawable/svicon" 
    android:launchMode="singleTop">
        <intent-filter>
            <action android:name="android.intent.action.PICK"/>
            <action android:name="android.intent.action.CHOOSER" />
            <action android:name="android.intent.action.WEB_SEARCH" />
        </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:48:09.633

`singleTop`活动、可见和在同一任务中不会重新创建。

引用官方文档：

> 类似地，也可以创建“singleTop”活动的新实例来处理新意图。但是，如果目标任务在其堆栈顶部已经有活动的现有实例，则该实例将接收新意图（在 onNewIntent() 调用中）；未创建新实例。在其他情况下——例如，如果“singleTop”活动的现有实例在目标任务中，但不在堆栈的顶部，或者如果它在堆栈的顶部，但不在目标任务中 -将创建新实例并将其推送到堆栈上。

一个更好的选择是将功能放置在一个片段中，并且每次都将一个新片段添加到后堆栈。

# single-sign-on - 尝试推广 SSOTicket 时出错

> ID：13285368
> 
> 赞同：0
> 
> 时间：2012-11-08T08:40:21.130
> 
> 标签：single-sign-on, biztalk, biztalk-2010

我正在尝试为 FTP 发送端口签发 SSO 票证。我已经创建了具有适用于接收端口的映射的附属应用程序。

对于发送端口，我在编码阶段使用了一个管道组件，只有标准代码：

```
ISSOTicket ssoTicket = new ISSOTicket();
        inmsg.Context.Promote("SSOTicket",
           "http://schemas.microsoft.com/BizTalk/2003/system-properties", ssoTicket.IssueTicket(0));

return inmsg; 
```

当我尝试推广结果时，`IssueTicket(0)`我收到一条错误消息，指出

> 属性“SSOTicket”具有长度大于 256 个字符的值。

这怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T13:19:51.910

我解决了。问题是当我应该使用 inmsg.Context.Write 时，我试图提升 SSOTicket 属性。

# extjs - 将商店与 Ext.menu.Menu 关联

> ID：13285370
> 
> 赞同：5
> 
> 时间：2012-11-08T08:40:23.263
> 
> 标签：extjs, extjs4.1

我是 extjs 的新手。我想在从 Ext.menu.Menu 中选择菜单项时关联一个商店。我正在使用 extjs 4.1.0。我在网上搜索甚至通过了 sencha doc，但我找不到任何方法来实现这一点。

有什么方法可以实现吗？

提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T09:37:28.677

我在项目中使用带有商店的菜单。这是一个例子：

```
Ext.define("Ext.ux.menu.DynamicMenu", {
    extend: "Ext.menu.Menu",
    alias: 'widget.dynamicmenu',
    loaded: false,
    loadMsg: 'Loading...',
    store: undefined,
    icon: '',
    constructor: function (config) {
        var me = this;
        Ext.apply(me, config);

        me.callParent();
    },
    initComponent: function () {
        var me = this;
        me.callParent(arguments);
        me.on('show', me.onMenuLoad, me);
        listeners = {
            scope: me,
            load: me.onLoad,
            beforeload: me.onBeforeLoad
        };
        me.mon(me.store, listeners);
    },
    onMenuLoad: function () { var me = this; if (!me.store.loaded) me.store.load(); },
    onBeforeLoad: function (store) { this.updateMenuItems(false); },
    onLoad: function (store, records) { this.updateMenuItems(true, records); },
    updateMenuItems: function (loadedState, records) {
        var me = this;
        me.removeAll();
        if (loadedState) {
            me.setLoading(false, false);
            Ext.Array.each(records, function (record, index, array) {
                me.add({
                    text: record.get('DisplayName'),
                    data: record,
                    icon: me.icon
                });

            });
            me.store.loaded = true;
        }
        else {
            me.add({ width: 75, height: 40 });
            me.setLoading(me.loadMsg, false);
        }
        me.loaded = loadedState;
    }
}); 
```

如果 IIRC，我在 sencha 论坛上找到了这个，但再也找不到链接了。我对图标等做了一些调整，...

在 Ext.Array.each(records, .... 您需要定义自己的逻辑，这取决于您的模型。我的模型有一个 DisplayName，我用它来显示为文本。我还将我的记录存储在我在菜单项中创建的数据属性。你在那里完全自由。

祝你好运！

# xml - XML 配置文件 XmlDoument.Save 未更新 ConnectionString

> ID：13285372
> 
> 赞同：0
> 
> 时间：2012-11-08T08:40:27.403
> 
> 标签：xml, save, connection-string, document, xmldocument

我有一个配置文件，我在其中存储 ConnectionString。我想通过使用 XMLDocument 物理更改 connectionString。但是在我更改并调用 XmlDocument.Save("DatabaseSetting.config") 后，它没有生效。我的代码如下：

```
 ConfigXmlDocument doc = new ConfigXmlDocument();
                    doc.Load("DatabaseSetting.config");
                    XmlNode ConStrinNode = doc.SelectSingleNode("/connectionStrings/add");
                    ConStrinNode.Attributes["connectionString"].Value = newString;
                    doc.Save("DatabaseSetting.config"); 
```

任何快速帮助都将得到重视。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:14:39.363

哦，我明白了！！XML 文件在 bin 文件夹中更新。抱歉打扰了。

# c - 如何杀死正在运行的线程？

> ID：13285375
> 
> 赞同：4
> 
> 时间：2012-11-08T08:40:36.343
> 
> 标签：c, multithreading, pthreads

> **可能重复：**
> [杀死 pthread 中的线程](https://stackoverflow.com/questions/2084830/kill-thread-in-pthread)

在包含启动线程的源代码之后，过了一会儿我想杀死它。怎么做 ？**无需对线程函数进行任何更改**

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>

pthread_t test_thread;

void *thread_test_run (void *v) // I must not modify this function
{
    int i=1;
    while(1)
    {
       printf("into thread %d\r\n",i);
       i++; 
       sleep(1);
    }
    return NULL
}

int main()
{
    pthread_create(&test_thread, NULL, &thread_test_run, NULL);

    sleep (20);
    // Kill the thread here. How to do it?

   // other function are called here...

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T08:45:53.557

您可以使用[pthread_cancel()](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_cancel.3.html)杀死一个线程：

```
int pthread_cancel(pthread_t thread); 
```

请注意，线程可能没有机会进行必要的清理，例如释放锁、释放内存等。所以您应该首先使用`pthread_cleanup_push()`添加将在线程取消时调用的清理函数。从 man [pthread_cleanup_push(3)](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_cleanup_push.3.html)：

> 这些函数操纵调用线程的线程取消清理处理程序堆栈。 **清理处理程序是在取消线程时**（或在下文描述的各种其他情况下）自动执行的函数；**例如，它可能会解锁一个互斥体，以便进程中的其他线程可以使用它。**

关于是否阻塞线程是否会被取消的问题，并不能保证，注意手册中也提到了这一点：

> 由 pthread_setcanceltype(3) 确定的线程取消类型可以是**异步的或延迟的（新线程的默认值）**。异步可取消性意味着线程可以随时取消（**通常是立即取消，但系统不保证这一点**）。延迟可取消性意味着取消将被延迟，直到线程下一次调用作为取消点的函数。

所以这意味着唯一*保证*的行为是线程将在调用`pthread_cancel()`.

**注意**：如果您无法更改线程代码以添加清理处理程序，那么您唯一的其他选择是使用[pthread_kill() 终止](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_kill.html)线程，但是由于上述原因，这是一种非常糟糕的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T09:15:53.547

简短的回答是：在线程正在运行的代码的配合下，您可以使用它支持的任何方法终止它。如果没有线程正在运行的代码的合作，你甚至不应该尝试它。如果线程在你杀死它时持有一个关键锁怎么办？如果线程已分配内存并且没有其他代码可以释放该内存怎么办？

# c# - 将 64base 字节数组转换为 PDF 并在 webBroswer 组件中显示

> ID：13285376
> 
> 赞同：0
> 
> 时间：2012-11-08T08:40:37.400
> 
> 标签：c#

这就是我想做的：

从数据库中获取一个 64base 字节数组（实际上是 pdf 格式）。这行得通。然后我想在 webbrowser 组件中显示 pdf。

我首先将 pdf 保存到 file.pdf 然后打开它：

```
 byte[] bitjes = isc.GetFileById(fileid); // Getting the bytes

        FileStream stream = new FileStream(@"C:\NexusPDF\" + filename, FileMode.CreateNew);
        BinaryWriter writer = new BinaryWriter(stream);
        writer.Write(bitjes, 0, bitjes.Length);
        writer.Close();

        webBrowser.Navigate(@"C:\NexusPDF\" + filename); 
```

但这给了我各种涉及读/写访问的问题。所以我想我必须使用 memorystream 类来解决这个问题。

```
 byte[] bitjes = isc.GetFileById(fileid);

        MemoryStream memstream = new MemoryStream(bitjes);

        BinaryWriter writer = new BinaryWriter(memstream);
        writer.Write(bitjes, 0, bitjes.Length);
        writer.Close(); 
```

但这就是我卡住的地方！我不能只在 webBrowser 组件中显示这个，可以吗？我必须使用 binaryreader 才能显示 pdf 吗？

我是以正确的方式解决这个问题，还是有更好的选择？

主要是我不想将文件保存在磁盘上。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:55:40.050

您**也许**可以使用数据 URL 方案。此 URL 方案指定内联内容。

```
webBrowser.Navigate("data:application/pdf;base64," + X); 
```

其中 X 是 base 64 字符串。

无需将 base 64 PDF 字符串转换为字节数组！

有关详细信息，请参阅[http://www.ietf.org/rfc/rfc2397.txt 。](http://www.ietf.org/rfc/rfc2397.txt)

# python - 从顶级包访问变量

> ID：13285377
> 
> 赞同：0
> 
> 时间：2012-11-08T08:40:55.320
> 
> 标签：python

我有以下结构 -

```
invoize/
    __init__.py
    globals.py
    view/
       __init__.py
       tags.py 
```

globals.py 包含一个名为 app 的变量。

1.  我想从 tags.py 访问该变量。
2.  我想修改它，使其状态在全球范围内得到反映（不仅仅是本地参考）。

如何从 tags.py 访问变量*app*以实现上述目标？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:44:52.513

使用[相对导入](http://docs.python.org/2/tutorial/modules.html)：

```
from ..invoize import globals
print globals.app
globals.app = True 
```

请注意，要使其正常工作：

1.  你需要一个`__init__.py`在顶层，旁边`view`和`invoize`

2.  您需要`tags`从包外部导入（您将无法进入`view`文件夹并运行`python tags.py`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T11:48:41.770

您是否尝试过编辑 PYTHONPATH 环境变量以包含“/invoize/”目录？

我是这样回答你的问题的：

[gp@imdev1 /testdir/invoize/view] 导出 PYTHONPATH=$PYTHONPATH:/testdir/

[gp@imdev1 /testdir/invoize/view] echo $PYTHONPATH /opt/python3/lib/python3.3/selenium/webdriver/support/:/opt/python3/lib/python3.3/selenium/webdriver/ie/: /测试目录/

在 /testdir/invoize/globals.py 中：

```
app = 'murtaza52' 
```

在 /testdir/invoize/view/tags.py 中：

> 导入 invoize.globals
> 
> 打印 invoize.globals.app
> 
> invoize.globals.app += 'newvalue'
> 
> 打印 invoize.globals.app

[gp@imdev1 /testdir/invoize/view]$ python tags.py

穆尔塔扎52

murtaza52 新值

# vb.net - 使用什么类而不是数组，或者如何重新调整和保存 RAM

> ID：13285378
> 
> 赞同：0
> 
> 时间：2012-11-08T08:40:57.933
> 
> 标签：vb.net, visual-studio, class

我有一些代码，我使用数组来保存大量数据（有时超过 100 万个数据点），我使用数组是因为它们可以在 2 个方向上动态定义，并且能够在特定位置插入值。但是我发现，当我使用`Redim`更改数组的维度时，它会在 RAM 中创建数组的副本，导致我最终用完 RAM。我发现`Erase`可以用来删除数组并节省 RAM，然后我可以`Redim`用来创建一个新数组。然而，这意味着我同时没有地方保存我的数据，除非我创建第二个数组并手动复制数据。

有没有一种方法可以`Redim`在不丢失 RAM 的情况下创建一个数组，但使用一种更有效的方式来保存数据，而不是手动复制到一个新数组并再次返回。或者是否有另一个类可以用来保存数据，而不是满足上述要求的数组。

如果您想要一些示例代码，请索取示例代码。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:45:47.590

以这种方式使用数组的内存效率不是很高。

你最好使用[List(of T)](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx)看看[这个答案的原因](https://stackoverflow.com/questions/434761/array-versus-listt-when-to-use-which)

在这种情况下，您可以使用一个类来保存每个数据点。使用 List(of T) 允许您插入到列表的中间，而无需创建整个数据的副本。

```
'Define your datapoint class
Private Class DataPoint
    Public Property X As Long
    Public Property Y As Long
    Public Sub New(ByVal X As Long, ByVal Y As Long)
        Me.X = X
        Me.Y = Y
    End Sub
End Class

'create and initialise the list
Dim MyDataPoints As New List(Of DataPoint)
'add some data to it
MyDataPoints.Add(New DataPoint(1, 2))
MyDataPoints.Add(New DataPoint(1, 2))
MyDataPoints.Add(New DataPoint(4, 3))
'Now insert a new datapoint at an arbitrary position in the list
MyDataPoints.Insert(2, New DataPoint(5, 6)) 
```

# java - 为什么指向类的空指针可以访问静态函数？

> ID：13285395
> 
> 赞同：0
> 
> 时间：2012-11-08T08:41:50.630
> 
> 标签：java, static-methods

> **可能重复：**
> [使用空对象引用调用静态方法时会发生什么？](https://stackoverflow.com/questions/2223663/what-happens-when-a-static-method-is-invoked-using-a-null-object-reference)

我很好奇如何 - 以及为什么 - 这种行为是实施的：

如果我持有一个指向具有静态函数的类的空指针，{nullPointer}.doSomething() 仍然可以工作！例如，运行下面的例子不会导致空指针异常！

这怎么可能？

```
Class A { 
   int a; 
   static void doSomething() {...}
}

Class B {
   void test() {
     A a = null;
     //This will not throw an exception!
     a.doSomething();   

   }
} 
```

# openldap - ldap - 锁定/解锁帐户

> ID：13285396
> 
> 赞同：0
> 
> 时间：2012-11-08T08:41:55.200
> 
> 标签：openldap

我想在 Ldap 中创建帐户，但它只需要在未来从日期到日期处于活动状态。我对 Ldap 使用 ppolicy 覆盖。我尝试使用它：我创建帐户并在创建时使用它锁定它

pwdAccountLockedTime = 现在。

我设置

pwdLockoutDuration = (FROM - NOW) 以秒为单位

pwdMaxAge = (TO - NOW) 秒。

该帐户是使用正确的 pwdAccountLockedTime 创建的，但在 pwdLockoutDuration 持续时间到期后，该帐户未自动解锁 - 为什么？也许是因为我设置了 pwdAccountLockedTime 手册？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T15:17:35.550

我没有将 pwdPolicySubentry 属性设置为我的新条目，并且 Ldap 使用默认配置中的 pwdLockoutDuration，而不是我的条目中的自定义 pwdLockoutDuration。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-08T09:00:41.423

从我得到的 MSDN 中，一旦锁定持续时间过去，用户就会自动解锁。

所以检查你是否得到零`lockoutTime`

在 Lockout-Duration 属性中添加 Lockout-Time 属性，然后将其与当前时间进行比较。Lockout-Duration 中的零表示该帐户被永久锁定，直到管理员解锁为止。

从msdn网站复制。[点击这里](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676843%28v=vs.85%29.aspx)

> 此属性值仅在帐户成功登录时才会重置。这意味着该值可能不为零，但该帐户并未被锁定。要准确确定帐户是否被锁定，您必须将 Lockout-Duration 添加到该时间，并将结果与​​当前时间进行比较，同时考虑当地时区和夏令时。

# wordpress - Wordpress 插件和路径

> ID：13285400
> 
> 赞同：0
> 
> 时间：2012-11-08T08:42:16.353
> 
> 标签：wordpress

嘿伙计们，我有一个插件及其在 /courses.php 上的显示信息（使用主题）

如何让它在 /courses/single_course.php 上显示信息

我想我只需要在主题中创建一个 /courses/ 文件夹并在其中包含 single_course.php 。但是，这似乎不起作用。

我试过谷歌搜索，但我正在努力找出解决这个问题的关键字！^_^

**好的编辑因为没人理解：**

*   我有插件工作。这是一个自定义插件
*   我想知道如何使以下工作[http://www.example.com/plugin/index.php](http://www.example.com/plugin/index.php) [http://www.example.com/plugin/index.php](http://www.example.com/plugin/index.php)
*   目前要使[http://www.example.com/plugin](http://www.example.com/plugin)工作，您只需要在主题目录中创建 plugin.php 并为插件中的函数提供回调。
*   创建 /wp-content/theme/themename/plugin/index.php 没有按预期工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T17:33:04.010

WP 使用特定目录来放置其主题和插件以维护组织标准。

```
// Pointing to theme WP themes directory
$_SERVER['DOCUMENT_ROOT']."/wp_content/themes/"  
// Pointing to theme WP plugins directory
$_SERVER['DOCUMENT_ROOT']."/wp_content/plugins/" 
```

或者您可以使用 wordpress 中的内置函数

```
// for themes in any php file after headers
get_template_directory_uri() . '/js/custom_script.js'
// for plugins in you main plugin class
plugins_url('/js/newscript.js', __FILE__); 
```

我建议将插件保留在插件中，将主题保留在主题中。您可能正在寻找的是创建一些额外的插件功能，这些功能将要求您在加载相关插件时包含额外的 php 函数和类。

首先在您的插件目录下创建一个文件夹，并使用适当的网络证券对其进行 chmod

```
cd /path/to/wordpress/install/wp-content/plugins/your-plugin/
mkdir php
chmod 755 
```

接下来复制或创建并编辑新的 single_courses.php 文件。如果您从头开始创建新文件，我在下面列出了一种快速方法。否则就 cp 过去。在这两种情况下，我们都需要使用 chmod 确保正确的 Web 访问权限。

```
cd /path/to/wordpress/install/wp-content/plugins/your-plugin/
echo -n "/*Extra Plugin Functions*/" > single_courses.php
chmod  644 single_courses.php 
```

现在我们需要确保将新文件包含在我们的主插件文件中

```
/* Main Plugin File :: ./wp-content/plugins/your-plugin/theplugin.php */
...
include_once $_SERVER['DOCUMENT_ROOT']."/wp_content/plugins/you-plugin/php/single_courses.php"
... 
```

这就是实现它的基本方法。也使用相同的过程来挂钩主题 php 文件。在您的服务器上创建目录和文件时，请务必确保实施了适当的安全措施，否则您会打开您的 Web 目录和/或服务器以被黑客入侵。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:46:58.007

您必须向我们提供有关您正在使用的插件以及您想要实现的目标的更多信息。解决方案可能很简单，只需将插件提供的短代码粘贴到所需页面的帖子区域即可。或者，您可能必须编辑插件本身。

# c# - 服务器宕机时取消 HTTPWebRequest

> ID：13285403
> 
> 赞同：0
> 
> 时间：2012-11-08T08:42:26.650
> 
> 标签：c#, .net, api, windows-services, httpwebrequest

我创建了一个使用 HTTPWebRequest 调用 API（返回 JSON）的 Windows 服务。

API 不会返回任何东西，直到它有“交付”的东西。所以我将超时设置得很高，并让请求等待，直到它收到响应。

问题是当我测试关闭或断开运行 API 的服务器时。HTTPWebRequest 不会停止请求。所以我不知道 API 服务器是否已关闭。

请求代码：

```
HttpWebRequest Request = (HttpWebRequest)HttpWebRequest.Create(Url);
Request.Method = "POST";
Request.ContentType = "application/x-www-form-urlencoded";
Request.ContentLength = PostData.Length;
Request.Timeout = Timeout;
Request.KeepAlive = true;
using (StreamWriter sw = new StreamWriter(Request.GetRequestStream()))
{
    sw.Write(PostData);
}
using (HttpWebResponse Response = (HttpWebResponse)Request.GetResponse())
{
    using (StreamReader sr = new StreamReader(Response.GetResponseStream()))
    {
        ResponseText = sr.ReadToEnd();
    }
} 
```

当请求的服务器出现故障时，是否有“中断”请求？我曾尝试使用 webbrowser 调用 API 服务器，一段时间后断开它并返回错误给网页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:56:14.117

保持请求异步总是好的（请参阅 HttpWebRequest - [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)中的 BeginXXX 方法）。使用异步 API 可确保您在收到服务器响应之前不会被阻止。

除了使用异步 API，您还可以使用心跳请求（可能只是对服务器上 ping 服务的 HEAD HTTP 请求，它返回空正文和 HTTP 200 状态），以跟踪服务器活着。如果此请求超时，则服务器不活动 - 在这种情况下，您可以取消/只是“忘记”已发出请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:52:05.657

如果服务器在线，您只能使用后台工作人员进行检查。它有一些缺点，但可以正常工作。

# php - 将表格从 aspx 页面解析到 MySQL db 的 PHP 代码

> ID：13285412
> 
> 赞同：1
> 
> 时间：2012-11-08T08:43:31.360
> 
> 标签：php, html, parsing, dom

我需要将一个 HTML 表解析为一个 mysqldb 我通过网站搜索，我看到了一些代码如何通过 DOMdocument 来完成，我的问题是因为它的动态表看起来像 php 只获取 HTML 源代码（和你一样当您右键单击网页并按显示源时获取）但是当页面出现在浏览器上时实际的 HTML 代码不会加载到 Domdocument 变量中，示例和参考将不胜感激Chaim

# json - twitter 搜索 api 错误 file_get_contents

> ID：13285421
> 
> 赞同：0
> 
> 时间：2012-11-08T08:44:13.070
> 
> 标签：json, search, curl, twitter, file-get-contents

我有以下问题：当这个脚本运行时

```
 $url = 'http://search.twitter.com/search.json?q=obama';
    $tw = file_get_contents($url,0,null,null); 
```

我收到这条消息。

```
Warning (2): file_get_contents(http://search.twitter.com/search.json?q=obama) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 420 Client Error (420) 
```

但这很奇怪，因为它一直在工作！你能帮助我吗？添加...我尝试以这种方式使用 CURL

```
$url = 'http://search.twitter.com/search.json?q=obama';
$c = curl_init();
curl_setopt($c, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($c, CURLOPT_URL, $url);
$contents = curl_exec($c);
echo $contents;
curl_close($c); 
```

但是调用返回此消息“错误”：“您已受到速率限制。增强您的冷静。”}这似乎很荒谬，因为我之前没有提出任何要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T10:43:20.443

我到处发现这种情况下的最佳实践是使用 CURL。我不知道为什么，但后来我尝试使用*urlencode*传递参数（'obama'） ，这似乎是该语法（以前不正确）是此警告的主要原因。

# android - onResume() 的奇怪行为 - 线程已经启动

> ID：13285422
> 
> 赞同：1
> 
> 时间：2012-11-08T08:44:25.660
> 
> 标签：android

我有一个复制蓝牙 OBEX 协议的类。此类基于蓝牙聊天示例。`onCreate()`在我的方法中构造了这个类的一个实例

```
bluetoothCommunicator = new BluetoothCommunicator(BaseClass.this); 
```

这个`BluetoothCommunicator`类有两个扩展 Thread 的内部类

`AcceptThread`和`ReadInputThread`

从初始化通信套接字的基类中，我也有`onResume()`和`onPaused()`方法。

```
@Override
public void onResume() {
     bluetoothCommunicator.resumeCommunicator();    
} 
```

这将调用 resumeCommunicator 方法：

```
public void resumeCommunicator() {
        Log.i("RESUME COMMUNICATOR: ", "COMMUNICATOR IS RESUMED");
        if(server == null)
            Log.i("Server: ", "IS NULL"); 

        if (server == null) {
            AcceptThread server = new AcceptThread();
            server.start();
        }

        if(!server.isAlive()) {
            server.start();
        }
    } 
```

在这个方法中，`server`是一个实例`AcceptThread`

但是这种`onResume`方法会给我带来一些问题。当我将我的应用程序放在后台并尝试再次打开它时，该`onResume`方法被调用，但它说线程已经启动，并引发异常。仅仅通过查看方法中的代码，这听起来很奇怪`resumeCommunicator`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:05:23.620

你的线程很可能已经死了。一个已经死掉的线程不是活的，不能重新启动。在活动中使用蓝牙通信线程似乎很奇怪。您可能应该将其放在服务中。

# jquery - 使用 PHP 添加的动态元素的 jQuery 验证

> ID：13285424
> 
> 赞同：1
> 
> 时间：2012-11-08T08:44:29.797
> 
> 标签：jquery, validation, dynamic

我正在尝试验证一些动态添加到页面但我没有任何运气的复选框。

如您所见，规则是必须至少选中一个复选框。

这是我将复选框添加到页面的代码：

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
 echo utf8_decode("<input type='checkbox' class='ne_serijaliziraj' name='smjer{}' value='{$row[0]}'>{$row[1]}"); 
```

}

这是我的验证码：

```
$(function(){
  $('#submit_second').click(function(){
    $("#sp_drugi_korak").validate({
      rules: {
          "smjer{}": {
              required: true,
              minlength: 1
          }
       }
   }); 
```

任何帮助都感激不尽！谢谢！

# jquery - Jquery水平下拉菜单？

> ID：13285425
> 
> 赞同：0
> 
> 时间：2012-11-08T08:44:29.927
> 
> 标签：jquery, html, css, drop-down-menu

我想做一个下拉菜单。我尝试做这样的事情：http: [//jsfiddle.net/GPpbz/11/](http://jsfiddle.net/GPpbz/11/)

```
<div>
    <nav>Parent Menu</nav>
    <nav>Sub Menu</nav>
    <nav>Sub Menu</nav>
</div> 
```

但我有一个问题。当鼠标离开父li时，子菜单容器slideUp。它应该在鼠标悬停在子菜单容器上时可见。也许我无法解释，但如果你看例子，你就会明白我的意思。

我怎么解决这个问题。或者你提供不同的东西吗？（子菜单是 100% 宽度的内联）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T08:54:39.143

如果你把你的html改成这个会好得多

```
<nav>
    <ul id="top_menu">
        <li><a href="#">deneme</a></li>
        <li><a href="#">deneme</a>
            <ul>
                <li><a href="#">deneme</a></li>
                <li><a href="#">deneme</a></li>
                <li><a href="#">deneme</a></li>
                <li><a href="#">deneme</a></li>
           </ul>
        </li>
        <li><a href="#">deneme</a></li>
        <li><a href="#">deneme</a></li>
    </ul>
</nav> 
```

并为此编写适当的 jquery。

# android - 在 Iphone 中获取键盘

> ID：13285428
> 
> 赞同：0
> 
> 时间：2012-11-08T08:44:31.720
> 
> 标签：android, iphone, ios, cordova

我正在使用cordova 2.1.0 在IOS/android 中开发一个应用程序。在 index.html 文件中，我在锚标记中使用以下内容来获取在 android 中预填充电话号码的键盘：

```
href="tel:'+messagePhoneArray[i]+'" 
```

与在 iphone 中获取键盘的方法相同，或者需要其他任何东西。我有 iPod 但没有 iphone 来测试它。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:29:23.037

是的，这将`messagePhoneArray[i]`在 iPhone 和其他一些平台上发起呼叫。

# java - 动态报告 + 休眠

> ID：13285429
> 
> 赞同：0
> 
> 时间：2012-11-08T08:44:36.863
> 
> 标签：java, hibernate, dynamic-reports

我想知道如何使用 Hibernate 数据集作为 DynamicReports 的数据源。我对此一无所知，也无法通过谷歌搜索任何可接受的解决方案。
有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T11:14:05.060

我试图解决类似的任务 - 将 ejbql 与 DynamicReports 一起使用。我已经使用一点本地 JasperReports API 使它工作。这是我的走动。

```
JasperReportBuilder builder = report()
.columns(
        col.column("CriterionName",       "CriterionName",      type.stringType()),
        col.column("Description",   "Description",  type.stringType()) )
      .title(Templates.createTitleComponent("entityManagerDatasource"))
      .pageFooter(Templates.footerComponent)
      .setQuery("SELECT c.CriterionName, c.Description from ConfigCriterions c", 
    QueryLanguage.EJBQL)
      .addParameter(JRJpaQueryExecuterFactory.PARAMETER_JPA_ENTITY_MANAGER, entityManager);
    JasperDesign design = builder.toJasperDesign();
    List<JRField> fields = design.getFieldsList();
    int i = 0;
    for (JRField field:fields)  {
        ++i;
        field.setDescription("COLUMN_" + i);
    }       

    JasperReport report = JasperCompileManager.compileReport(design);
    JasperPrint jasperPrint = JasperFillManager.fillReport(report, null); 
```

# git - 从 git 中的某个提交（回到历史）中删除文件

> ID：13285430
> 
> 赞同：0
> 
> 时间：2012-11-08T08:44:49.067
> 
> 标签：git, gerrit

想象一下，您已经提交了几个更改（在单独的提交中）。例如，我们有 3 个提交：A、B 和 C。

现在，您发现在提交 B 中添加了一个您不应该提交的文件（包括一些更改）。

您将如何在该提交中删除该文件？

一个例子会很棒。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:00:47.560

你也可以

```
git rebase --interactive A
```

并编辑提交 B 以不包含有问题的文件

但同样的警告适用，如果您在 B 之后的任何提交中对文件进行了更改，这些将无法应用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:52:12.660

```
git filter-branch --index-filter 'git rm --cached --ignore-unmatch filename' HEAD 
```

此命令将从所有提交中删除一个文件 [来自历史记录]。

**警告：**如果您已经与他人共享您的工作，不建议使用此命令。在使用此命令之前，请确保您了解全部含义。

# macos - 终端脚本

> ID：13285435
> 
> 赞同：1
> 
> 时间：2012-11-08T08:45:05.287
> 
> 标签：macos, unix, terminal

我想编写一个脚本，在我运行脚本后通过我的 id（两层身份验证）连接到我的服务器。

```
ssh id@server->password 
```

在此身份验证之后，再进行一次身份验证超级用户身份验证

```
username :

password : 
```

我的操作系统是 MAC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:27:29.093

把所有事情都做好，这样才能“正常工作”，这是一件很棘手的事情。记录最差的问题是对登录目录、.ssh 目录和 .ssh 目录中的文件的正确保护。这是我用来正确设置所有内容的脚本：

```
#!/bin/tcsh -x
#
# sshkeygen.sh
#

# make sure your login directory has the right permissions
chmod 755 ~

# make sure your .ssh dir exists and has the right permissions
mkdir -pv -m 700 ~/.ssh
chmod 0700 ~/.ssh

# remove any existing rsa/dsa keys
rm -f ~/.ssh/id_rsa* ~/.ssh/id_dsa*

# if your ssh keys don't exist
set keyname = "`whoami`_at_`hostname`-id_rsa"
echo "keyname: $keyname"

if( ! -e ~/.ssh/$keyname ) then
    # generate them
    ssh-keygen -b 1024 -t rsa -f ~/.ssh/$keyname -P ''
endif

cd ~/.ssh

# set the permissions
chmod 0700 *id_rsa
chmod 0644 *id_rsa.pub

# create symbolic links to them for the (default) id_rsa files
ln -sf $keyname     id_rsa
ln -sf $keyname.pub id_rsa.pub 
```

我有另一个脚本将“ `whoami`*at*`hostname` -id_rsa.pub”文件复制到共享服务器（以管理员身份），然后将其合并到该系统的 .ssh/authorized_keys 文件中，然后将其复制回本地计算机。第一次运行这些脚本时，系统会提示用户输入共享服务器的管理员密码，但之后一切都会“正常工作”。

哦，它是“Mac”（不是“MAC”）。[\迂腐] ;-)

# asp.net-mvc-3 - 如何从 Visual Studio 2010 将 MVC 3 应用程序发布到远程服务器

> ID：13285437
> 
> 赞同：0
> 
> 时间：2012-11-08T08:45:16.243
> 
> 标签：asp.net-mvc-3, visual-studio-2010, iis-7

我有安装了 Windows 2008 R2、IIS 7、MVC 3、ASP.NET 4 框架的服务器机器。我想使用 Visual Studio 2010 将 ASP.NET MVC 3 Razor 应用程序从本地计算机发布到远程服务器。该应用程序还使用了实体框架。我的服务器中需要哪些工具来发布 mvc 3 应用程序和必要的步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:37:04.787

使用此 URL 来执行此操作

配置[服务器端的](http://weblogs.asp.net/scottgu/archive/2010/09/13/automating-deployment-with-microsoft-web-deploy.aspx) 链接和下载[webDeploy的链接](http://www.iis.net/downloads/microsoft/web-deploy)

在[Vs 2010中进行发布的链接](http://weblogs.asp.net/scottgu/archive/2010/07/29/vs-2010-web-deployment.aspx)

并且您必须从此[链接在服务器中安装 MVC 工具](http://www.microsoft.com/en-us/download/details.aspx?id=4211)

# jquery - 使用 jQuery 设置 div 背景图片 url

> ID：13285439
> 
> 赞同：0
> 
> 时间：2012-11-08T08:45:28.260
> 
> 标签：jquery, html, css

```
var _options = {
        button_delete_src: '/Content/images/delete_button.png'
    };

var _css = {
        button_delete: {
            'background': 'url(\'' + _options.button_delete_src + '\') no-repeat;'
        }
    };

$('<div></div>').css(_css.button_delete).appendTo(container); 
```

创建的 div 没有在呈现的 html 中设置背景 css。你能帮助我吗？

编辑：在 IE 中工作，但不在 Chrome 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:53:32.413

这应该根据您的代码工作：

```
$('<div></div>').css('background',_css.button_delete.background).appendTo(container); 
```

但我认为你想要这样的东西：

```
var $div =  $('<div></div>');    
for(var key in _css.button_delete)
    $div.css(key,_css.button_delete[key]);

$div.appendTo(container); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:09:08.787

终于让它工作了：

```
$(function(){
var _options = {
    button_delete_src: 'http://bigcrow.files.wordpress.com/2010/03/my-tattoo.jpg'
};

var _css = {
    button_delete: {
        'width': '1000px',
        'height':'1000px',
        'background': 'url(' + _options.button_delete_src + ') no-repeat'
    }
};

$('<div></div>').css(_css.button_delete).appendTo('#container');
}); 
```

# css - 如何使用 CSS 定位 div 内的第一个链接？

> ID：13285440
> 
> 赞同：7
> 
> 时间：2012-11-08T08:45:38.610
> 
> 标签：css, pseudo-class, targeting

例如我有这个：

```
<div>
  <a href="#">sample 1</a>
  <a href="#">sample 2</a>
  <a href="#">sample 3</a>
</div> 
```

我想用 CSS 定位第一个链接。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-08T08:47:11.200

您可以使用第一个子选择器：

```
div > a:first-child { /* your css */ } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-08T08:47:41.920

试试这个代码：

```
div > a:first-child{
   //your css code
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T08:50:19.637

```
div a:nth-of-type(n)
{
   /* css */
} 
```

其中 n 是您想要的行数..在您的情况下

```
div a:nth-of-type(1)
{
   /* css */
} 
```

# javascript - JS 日期比较是如何工作的？

> ID：13285441
> 
> 赞同：8
> 
> 时间：2012-11-08T08:45:46.130
> 
> 标签：javascript, date, comparison

假设我有一个`Date`从字符串构造的正确对象：`"Tue Jan 12 21:33:28 +0000 2010"`。

```
var dateString = "Tue Jan 12 21:33:28 +0000 2010";
var twitterDate = new Date(dateString); 
```

然后我使用`<`and`>` *小于*和*大于*比较运算符来查看它是否比类似构造的`Date`. 使用这些运算符比较日期的算法是指定的，还是*特别未指定*，例如`localeCompare`？换句话说，这样我能保证得到一个更新的日期吗？

```
var now = new Date();
if (now < twitterDate) {
    // the date is in the future
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T08:55:14.610

[ECMAScript 中对象的关系操作](http://ecma-international.org/ecma-262/5.1/#sec-11.8.5)依赖于内部[ToPrimitive](http://ecma-international.org/ecma-262/5.1/#sec-9.1) 函数（带有提示编号），当它被定义时，您可以使用[valueOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/valueOf)访问该函数。

尝试

```
var val = new Date().valueOf(); 
```

您将获得日期的内部值，与许多语言一样，它是自 UTC 时间 1970 年 1 月 1 日午夜以来的毫秒数（与使用 UTC 相同`getTime()`）。

这意味着通过设计，您可以确保始终让日期比较正常工作。

[本文](http://www.adequatelygood.com/2010/3/Object-to-Primitive-Conversions-in-JavaScript)将为您提供更多详细信息`toPrimitive`（但与比较无关）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:58:28.427

Javascript 中的日期值是数字，如[ECMA 脚本规范](http://ecma-international.org/ecma-262/5.1/#sec-15.9.1.1)中所述。因此，日期值作为数字进行比较。

这是您的代码[演示](http://jsfiddle.net/pUASN/)（我在未来设置了 twitterDate）。

```
(function(){
    var dateString = "Tue Jan 12 21:33:28 +0000 2014";
    var twitterDate = new Date(dateString);

    var now = new Date();
    if (now < twitterDate) {
         document.write('twitterDate is in the future');
    }
    else
    {
        document.write('twitterDate is NOT in the future');
    }

})()​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:55:24.837

我想是的。使用`if (now < twitterDate)`，它评估为`if (now.valueOf()<twitterDate.valueOf())`。`valueOf()`传递自 01/01/1970 00:00:00 以来经过的毫秒数，因此这两个数字的比较是有效的。

像这样检查

```
var then = new Date("Tue Jan 12 21:33:28 +0000 2010")
   ,now  = new Date;

console.log(then.valueOf(),'::',now.valueOf(),'::',now<then);
  //=> 1263332008000 :: 1352365105901 :: false 
```

# matlab - matlab：带有一个或多个文件的uigetfile

> ID：13285449
> 
> 赞同：2
> 
> 时间：2012-11-08T08:46:11.770
> 
> 标签：matlab, file

我有一个愚蠢的问题。我想知道在以下情况下选择了多少文件：

```
[fileName, pathName, filterIndex] = uigetfile({'*.*';'*.xls';'*.txt';'*.csv'}, 'Select file(s)', 'MultiSelect', 'on'); 
```

当超过 1 个时，我可以做 length(fileName);

没关系。但是当只选择一个时，这给了我文件名的实际长度（字符数量）：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:57:17.303

你应该先检查一下[`iscell(filename)`](http://www.mathworks.fr/fr/help/matlab/ref/iscell.html "`iscell`")。

```
[fileName, pathName, filterIndex] = uigetfile({'*.*';'*.xls';'*.txt';'*.csv'}, 'Select file(s)', 'MultiSelect', 'on');
if iscell(fileName)
    nbfiles = length(fileName);
elseif ~isempty(fileName)
    nbfiles = 1;
else
    nbfiles = 0;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T14:19:40.423

文件名 = cellstr（文件名）

是另一种（更简单）的解决方案，如果选择了一个或多个文件，则始终接收一个独立的文件名单元

# clojure - Clojure 中的头部保留

> ID：13285450
> 
> 赞同：6
> 
> 时间：2012-11-08T08:46:22.460
> 
> 标签：clojure

阅读“Clojure 编程”（第 98 页）中关于头部保留的段落，我无法弄清楚`split-with`示例中发生了什么。我尝试过使用 repl 进行实验，但这让我更加困惑。

```
(time (let [r (range 1e7) 
            a (take-while #(< % 12) r)
            b (drop-while #(< % 12) r)]
        [(count a) (count b)]))
"Elapsed time: 1910.401711 msecs"
[12 9999988]

(time (let [r (range 1e7) 
            a (take-while #(< % 12) r)
            b (drop-while #(< % 12) r)]
        [(count b) (count a)]))
"Elapsed time: 3580.473787 msecs"
[9999988 12]

(time (let [r (range 1e7) 
            a (take-while #(< % 12) r)
            b (drop-while #(< % 12) r)]
        [(count b)]))
"Elapsed time: 3516.70982 msecs"
[9999988] 
```

正如您从上一个示例中看到的那样，如果我不计算`a`，则耗时会以某种方式增加。我想，我在这里错过了一些东西，但是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T16:26:20.093

[对于计数](https://github.com/clojure/clojure/blob/d0c380d9809fd242bec688c7134e900f0bbedcac/src/jvm/clojure/lang/Counted.java)集合，该`count`函数是 O(1) ，其中包括向量和列表。

另一方面，序列[不被计算在内](https://github.com/clojure/clojure/blob/d0c380d9809fd242bec688c7134e900f0bbedcac/src/jvm/clojure/lang/RT.java#L525)，这使得`count`它们为 O(n)。这里重要的部分是函数`take-while`和`drop-while`返回序列。他们也是懒惰的事实并不是这里的主要因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:34:52.083

使用 time aa benchmark 时，多次运行测试以获得准确的结果

```
user> (defn example2 [] (let [r (range 1e7)                                             
              a (take-while #(< % 12) r)                                     
              b (drop-while #(< % 12) r)]                        
             [(count a) (count b)]))
#'user/example2

user> (dorun (take 1000 (repeatedly example2)))
nil

user> (time (example2))
"Elapsed time: 614.4 msecs"
[12 9999988] 
```

我将运行时的差异归咎于热点编译器尚未完全优化生成的类。我多次运行第一个和第二个示例并得到混合的相对结果：

运行示例一两次：

```
autotestbed.core> (time (let [r (range 1e7)                                                                
                                        a (take-while #(< % 12) r)                                     
                                                    b (drop-while #(< % 12) r)]                        
                              [(count a) (count b)]))
"Elapsed time: 929.681423 msecs"                                                                           
[12 9999988]
autotestbed.core> (time (let [r (range 1e7)                                                                
                                        a (take-while #(< % 12) r)                                     
                                                    b (drop-while #(< % 12) r)]                        
                              [(count a) (count b)]))
"Elapsed time: 887.81269 msecs"                                                                            
[12 9999988] 
```

然后运行示例二几次：

```
core> (time (let [r (range 1e7)                                                                
                  a (take-while #(< % 12) r)                                     
                  b (drop-while #(< % 12) r)]                        
             [(count a) (count b)]))
"Elapsed time: 3838.751561 msecs"                                                                          
[12 9999988]
core> (time (let [r (range 1e7)                                                                
                  a (take-while #(< % 12) r)                                     
                  b (drop-while #(< % 12) r)]                        
             [(count a) (count b)]))
"Elapsed time: 970.397078 msecs"                                                                           
[12 9999988] 
```

有时第二个例子也一样快

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:22:43.563

[计数](http://clojure.org/data_structures)为 O(1)。这就是为什么您的测量不依赖于它的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-09T06:29:01.743

它显示的时间完全取决于系统....如果您重新执行它，它将为每次执行显示一些不同的经过时间

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T10:55:26.870

`let`即使我们不使用此值，也会执行表单中的绑定。

```
(let [x (println "Side effect")] 1) 
```

上面的代码打印“副作用”，并返回 1。

在您的所有三个示例中，都以 let 形式使用了相同的绑定，所以我在这里看不到任何区别。顺便说一句，在我的机器上，你所有的片段都花了大约相同的时间。

当你尝试这样的事情时，真正的区别是：

```
(time (let [r (range 2e7) 
        a (take 100 r)
        b (drop 100 r)]
    [(count a)]))
"Elapsed time: 0.128304 msecs"
[100]

(time (let [r (range 2e7) 
        a (take 100 r)
        b (drop 100 r)]
    [(count b)]))
"Elapsed time: 3807.591342 msecs"
[19999900] 
```

由于`b`和`a`是惰性序列，因此`count`可以`O(n)`及时工作。但是在第一个示例中，我们不计算 b 的计数，因此它几乎立即起作用。

# c# - 从 p/invoke 修改结构布局

> ID：13285459
> 
> 赞同：2
> 
> 时间：2012-11-08T08:46:57.227
> 
> 标签：c#, pinvoke, structlayout

我正在寻找有关更改返回/传递到 ap/invoke 函数的对象的结构/类布局的最佳实践指南。我一直在寻找这个问题的答案，但也许我太累了，我没有有效地寻找。

我能想到的最简单的例子（真正的例子在这里有点太复杂了）是像[GetWindowRect](http://www.pinvoke.net/default.aspx/user32.getwindowrect)这样的东西。

如果我想为 RECT 结构添加一些额外的属性，我应该将它添加到结构本身的定义中，还是应该切换到子类化以添加额外的属性？

Microsoft 或其他可靠来源围绕以下方法是否有最佳实践？这两者都违反最佳实践吗？

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool GetWindowRect(HandleRef hWnd, out RECT lpRect);

[StructLayout(LayoutKind.Sequential)]
public struct RECT
{
    public int Left;        // x position of upper-left corner
    public int Top;         // y position of upper-left corner
    public int Right;       // x position of lower-right corner
    public int Bottom;      // y position of lower-right corner

    public string Extra;    // ADDED
} 
```

**相对**

```
[DllImport("user32.dll")]
[return: MarshalAs(UnmanagedType.Bool)]
static extern bool GetWindowRect(HandleRef hWnd, out RECT lpRect);

[StructLayout(LayoutKind.Sequential)]
public class RECT
{
    public int Left;        // x position of upper-left corner
    public int Top;         // y position of upper-left corner
    public int Right;       // x position of lower-right corner
    public int Bottom;      // y position of lower-right corner
}

public class RectEx : RECT
{
    public string Extra;    // Added

    public RectEx(RECT r)
    {
        Left = r.Left;
        Top = r.Top;
        Right = r.Right;
        Bottom = r.Bottom;
        Extra = "test";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:55:41.023

这是另一种选择：这允许您维护本机功能并为您正在使用的对象提供一些安全性。

```
// used internally in native method
[StructLayout(LayoutKind.Sequential)]
internal struct RECT
{
    public int Left;        // x position of upper-left corner
    public int Top;         // y position of upper-left corner
    public int Right;       // x position of lower-right corner
    public int Bottom;      // y position of lower-right corner
}

// public accessible struct with extra fields 
public struct RectEx
{
    public int Left;        // x position of upper-left corner
    public int Top;         // y position of upper-left corner
    public int Right;       // x position of lower-right corner
    public int Bottom;      // y position of lower-right corner

    public dynamic Extra = "Extra";
}

public static class UnsafeNativeMethods
{
    //used internally to populate RECT struct
    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    private static extern bool GetWindowRect(HandleRef hWnd, out RECT lpRect);

    //public safe method with exception handling and returns a RectEx
    public static RectEx GetWindowRectangle(HandleRef hWnd)
    {
        RECT r = new RECT();
        RectEx result = new RectEx();

        try
        {
            GetWindowRect(hWnd, r);
            result.Left = r.Left;
            result.Top = r.Top;
            result.Right = r.Right;
            result.Bottom = r.Bottom;
            // assign extra fields
        }
        catch(Exception ex)
        {
            // handle ex
        }

    return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T13:30:28.257

您还可以使用： **StructLayout(LayoutKind.Explicit)**

```
[StructLayout(LayoutKind.Sequential)]
public struct Point 
{
   public int x;
   public int y;
}   

[StructLayout(LayoutKind.Explicit)]
public struct Rect 
{
   [FieldOffset(0)] public int left;
   [FieldOffset(4)] public int top;
   [FieldOffset(8)] public int right;
   [FieldOffset(12)] public int bottom;
} 
```

（来自[http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.layoutkind.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.layoutkind.aspx)）

# cassandra - cql3查询有超过1个EQ限制和ORDER BY

> ID：13285461
> 
> 赞同：8
> 
> 时间：2012-11-08T08:46:57.390
> 
> 标签：cassandra, cql3

使用 CF：

```
CREATE TABLE history (
  domain text,
  iid text,
  timeid timeuuid,
  data text,
  comments text,
  PRIMARY KEY (domain, iid, timeid)
); 
```

我想这样查询它：

```
select domain, iid, timeid, data, comments from mappings
where domain = 'a' and iid = 'b'  order by timeid desc; 
```

但它失败并出现以下错误（cassandra 1.1.5）：

```
Bad Request: Order by currently only support the ordering of columns following their declared order in the PRIMARY KEY 
```

我做错了吗？解决方法是什么？谢谢

PS 我得到了它与单个 EQ 限制和 ORDER BY 一起使用，但我需要至少 2 个限制和 order by。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-22T13:02:47.500

您可以将“排序依据”列更改为主键中的第二列：

`select * from history where domain = 'a' and iid = 'b' order by iid desc;`

这有点令人困惑，因为您`iid`使用相等进行限制，但它有效 - 您将获得按 . 排序的结果`timeid`。

我相信这是因为`iid`并`timeid`形成一个复合列，当您按`iid`降序排序时，它会排序所有复合列组件，包括`timeid`.

# php - 出现在现场和下拉问题

> ID：13285466
> 
> 赞同：0
> 
> 时间：2012-11-08T08:47:23.840
> 
> 标签：php, html, css

我的网址：[http ://bitly.com/Pa3xJS](http://bitly.com/Pa3xJS)

问题 #1：在 IE 中，`<!--[if lte IE8]>< ![endif]-->`出现在网站上？这应该是正确的标记，为什么会出现？

问题 #2：在 IE 中，当您将鼠标悬停在下拉“商店”上时，您无法单击位于 jquery 滑块上方的子导航。与其重新编码，是否有快速的 CSS 修复？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:05:11.543

**问题 2：**

您需要设置 z-index 堆栈，以便标题位于主要内容区域上方

```
#header { position: relative; z-index: 2; }
#content-wrapper {position: relative; z-index:1; } 
```

**问题一：**

只需检查在“IE”和“8”之间添加一个空格，如下所示：

```
<!--[if lte IE 8]>< ![endif]--> 
```

# css - 子菜单 DIV 的 IE9 奇怪的 CSS 行为

> ID：13285467
> 
> 赞同：0
> 
> 时间：2012-11-08T08:47:27.443
> 
> 标签：css

我有这段代码：

```
#bizMxp{position:absolute;min-width:140px;left:5px;z-index:100000;display:none;top:134px}
#bizMxp div{background-color:#fff;border:4px #6db03f solid;border-top:0;padding:15px;margin-top:20px}

$('.mxpbiz').hover(function(){$('#bizMxp').show('fast');},function(){$('#bizMxp').hide();}); 

<div id="mainMenu">
    <ul>
        <li<%=TabAttiva("mxpbiz",act)%>><a class="mxpbiz" href="#"><%=Lexicon("MXP BIZ")%></a></li>
    </ul>
    <div id="bizMxp">
        <div>
            <a href="/about"><%=Lexicon("About us")%></a><br/>
            <a href="/building"><%=Lexicon("The Building")%></a><br/>
            <a href="/where"><%=Lexicon("Location")%></a>
        </div>
    </div>
</div> 
```

并且它与 Chrome、FF 和 IE <= 8 完美配合，但即使我使用绝对位置和 z-index，IE9 子菜单的 div 也不会出现......有什么我可能错过的 IE9 吗？...... .

在此先感谢大家！:-)))

干杯，路易吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:16:26.093

您使用的是哪个 JS 框架？jQuery？

我在 JSFIDDLE 上试用了您的代码：http: [//jsfiddle.net/PaEk9/](http://jsfiddle.net/PaEk9/) 它适用于我的 IE9。

也许这是 IE 加载 jQuery 的问题——我也知道这个问题。尝试将您的脚本放在页面底部，或者在 DOM-Ready Method 之外的脚本上使用`jQuery`美元符号而不是美元符号。`$`

像这样使用 DOM-Ready 函数：

```
jQuery(document).ready(function($){
    // your code, now using '$'
}); 
```

也许这有帮助。

# css - 为按钮添加 CSS 定位

> ID：13285469
> 
> 赞同：0
> 
> 时间：2012-11-08T08:47:35.593
> 
> 标签：css

我有一个用于 php 分页脚本的上一个和下一个按钮，它们都属于分页类。

```
.paginate {
   font-family:Arial, Helvetica, sans-serif;
   padding: 3px;
   width:400px;
}

.paginate a {
   padding:2px 5px 2px 5px;
   margin:2px;
   text-decoration:none;
   color: #fff;
   width: 180px;
} 
```

所以我给了他们自己的个人课程下一个和上一个

下一个

```
.next {
   background: url("../images/more.fw.png") no-repeat;
   height: 87px;
   width:128px;
   padding:10px;
   margin:50px;
   font-family:Arial;
   font-size:24px;
   color:#fff;
   position:fixed;
   top:585px;
   right:470px;
} 
```

以前的

```
.previous {
   background: url("../images/previous.fw.png") no-repeat;
   height: 87px;
   width:128px;
   padding:10px;
   margin:50px;
   font-family:Arial;
   font-size:24px;
   color:#fff;
   position:fixed;
   top:585px;
   right:620px;
} 
```

正如您在下面的链接中看到的那样，当这些按钮设置在页面顶部时，这些按钮非常适合并排放置，但是我想要做的是让按钮坐在上面部分下方 20 像素处。但是，如果我从顶部 558px 更改 ti，会发生什么是按钮位于不同的高度，并且不会彼此相邻。

任何想法，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:50:57.920

您将样式设置为`position: fixed`，因此当屏幕滚动时它们不会移动 - 这是您想要的吗？

```
.paginate {
    position: relative;
    ...

.next {
    position: absolute;
    display: block;
    ... 
```

现在设置你的按钮`top`和`right`所有相对于分页容器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:51:02.867

您可以 `position:absolute;`在 .next 和 .previous 上设置按钮，这样按钮的药水就不会改变

# css - li 元素内的 div 显示块使其具有空白空间

> ID：13285476
> 
> 赞同：0
> 
> 时间：2012-11-08T08:48:05.557
> 
> 标签：css, html, html-lists

我有以下代码：

```
<div class="settingsMenu" style="top: 135px; left: 149px; display: block;">
        <ul>
            <li class="download" onclick="downTemplate('template1')">Download</li>
            <li class="delete" onclick="showConfirmationDialog ($(this))">
                Delete
                <div class="deleteItemConfirmation">
                    <div class="confirmationText">Are you sure?</div>
                    <div class="buttons"><button onclick="deleteTemplate ('template1')">Yes</button> <button onclick="hideConfirmationDialog();">No</button></div>
                </div>
            </li>
            <li class="info">Info</li>
        </ul>
    </div> 
```

CSS：

```
.settingsMenu{
    position: absolute;
    top: 0;
    left: 0;
    display: none;
    background-color: #FFFFFF;
    border: 1px solid #b5044a;
    border-radius: 5px;
    width: 150px;
    padding: 10px 0;
    margin: 0;
    z-index: 200;
}

.settingsMenu ul{
    list-style-type: none;
    width: 100%;
    margin: 0px;
    padding: 0;
}

.settingsMenu ul li {
    color: #000000;
    cursor: pointer;
    float: left;
    font-size: 14px;
    font-weight: normal;
    font-family: Arial;
    height: 18px;
    max-width: 100px;
    margin: 5px 20px;
    padding: 0;
    display: block;
    padding-left: 30px;
}

.settingsMenu ul li.edit{
    background: url("../img/edit-context-menu-icon.svg") no-repeat scroll center left white;
}

.settingsMenu ul li.delete{
    background: url("../img/delete-context-menu-icon.svg") no-repeat scroll center left white;
}

.settingsMenu ul li.info{
    background: url("../img/info-context-menu-icon.svg") no-repeat scroll center left white;
} 
```

问题是：虽然 div.deleteItemConfirmation 有 "display: none;" 一切都正确显示，当它的显示属性变为“显示：块；” 的文字前出现奇怪的空格

```
<li>Delete</li> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:38:28.727

这可以帮助你：

```
<ul>
<li>
one</li><li>
two</li><li>
three</li>
</ul> 
```

或者

```
<ul>
  <li>one</li
  ><li>two</li
  ><li>three</li>
</ul> 
```

或有评论...

```
<ul>
  <li>one</li><!--
  --><li>two</li><!--
  --><li>three</li>
</ul> 
```

我从[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)获得了这个想法，并在一些类似的情况下帮助了我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:50:08.940

尝试改变

```
<li class="delete" onclick="showConfirmationDialog ($(this))">
    Delete 
```

至

```
<li class="delete" onclick="showConfirmationDialog ($(this))">Delete 
```

# facebook-graph-api - 如何将通知发布为应用程序

> ID：13285477
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:48:08.237
> 
> 标签：facebook-graph-api, notifications, request, facebook-php-sdk

如何使用 facebook php sdk 作为应用程序向用户发布通知？

我附上了一张图片，在这张图片中，我们可以看到来自 SongPop 的应用程序向我发布了一条通知。我想做这样的东西。我认为这个应用程序向他们的用户发布通知，我可以向特定用户发布通知吗？

![来自申请的通知](../Images/1cb97dc58c82152ce86a9b789b22a42b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:38:53.697

您必须在您的应用配置中设置一个画布页面 url，然后尝试使用此代码

```
$url = "https://graph.facebook.com/$user_id/notifications";
$notification_message = 'My Example Notification Message';
$app_access_token = $app_id . '|' . $app_secret;
$attachment = array(
 'access_token' => $app_access_token, // access_token is a combination of the AppID & AppSecret combined
 'href' => '', // Link within your Facebook App to be displayed when a user click on the notification
 'template' => $notification_message, // Message to be displayed within the notification
   );
// set the target url
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output
$result = curl_exec($ch);
curl_close ($ch); 
```

# javascript - 我需要一个无法在 javascript 中按字母键的文本框

> ID：13285479
> 
> 赞同：-3
> 
> 时间：2012-11-08T08:48:09.703
> 
> 标签：javascript

我需要一个无法按 Java Script 中的字母键并删除输入的字符的文本框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T08:59:02.030

只需将此属性添加到您的输入中：

```
onkeydown = "if(/[a-z]/i.test(String.fromCharCode((event||window.event).keyCode))){return false;}" 
```

# c++ - 从字符串元素中提取整数值并相加

> ID：13285481
> 
> 赞同：1
> 
> 时间：2012-11-08T08:48:12.740
> 
> 标签：c++, string, extraction, addition

我有以下代码行：

```
vector<string> c;
string a;
for(int i=0;i<4;i++){
   cin>>a;
   c.push_back(a);
} 
```

如果我提供输入为：

120 美元,132 美元,435 美元,534 美元

如何分别提取整数值并将它们相加以获得总值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T08:51:44.797

您可以使用例如[`std::getline`](http://en.cppreference.com/w/cpp/string/basic_string/getline)使用逗号的自定义“行”分隔符，从字符串中删除最后一个字符 (the `'$'`) 并用于[`std::stoi`](http://en.cppreference.com/w/cpp/string/basic_string/stol)转换为整数：

```
std::vector<int> c;

for (int i = 0; i < 4; i++)
{
    std::string a;
    std::getline(std::cin, a, ',');

    a = a.substr(a.length() - 1);  // Remove trailing dollar sign

    c.push_back(std::stoi(a));
} 
```

**编辑：**使用[`std::accumulate`](http://en.cppreference.com/w/cpp/algorithm/accumulate)：

```
int sum = std::accumulate(c.begin(), c.end(), 0); 
```

**编辑2：**使用[`std::strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol)而不是`std::stoi`：

该函数`std::stoi`是最新的 C++ 标准 (C++11) 中的新函数，并且尚未在所有标准库中都支持。然后你可以使用旧的 C 函数`strtol`：

```
c.push_back(int(std::strtol(a.c_str(), 0, 10))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:50:04.913

您可以使用正则表达式和流：

```
#include <regex>
#include <iostream>
#include <sstream>

const std::string Input("120$,132$,435$,534$");

int main(int argc, char **argv)
{
    const std::regex r("[0-9]+");
    int Result = 0;

    for (std::sregex_iterator N(Input.begin(), Input.end(), r); N != std::sregex_iterator(); ++N)
    {
        std::stringstream SS(*N->begin());
        int Current = 0;
        SS >> Current;
        Result += Current;
        std::cout << Current << '\n';
    }

    std::cout << "Sum = " << Result;

    return 0;
} 
```

输出：

```
120
132
435
534
Sum = 1221 
```

如果必须确保数字后跟 a`'$'`则将正则表达式更改为：`"[0-9]+\\$"`该`stringstream`部分将忽略`'$'`数字转换中的尾随：

```
#include <regex>
#include <iostream>
#include <sstream>

const std::string Input("120$,132$,435$,534$,1,2,3");

int main(int argc, char **argv)
{
    const std::regex r("[0-9]+\\$");
    int Result = 0;

    for (std::sregex_iterator N(Input.begin(), Input.end(), r); N != std::sregex_iterator(); ++N)
    {
        std::stringstream SS(*N->begin());
        int Current = 0;
        SS >> Current;
        Result += Current;
        std::cout << Current << '\n';
    }

    std::cout << "Sum = " << Result;

    return 0;
} 
```

输出：

```
120
132
435
534
Sum = 1221 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:07:19.057

如果输入不是太大（特别是如果它是单行），最简单的解决方案是将它全部打包成一个字符串，然后解析它，创建一个`std::istringstream`来转换每个数字字段（或使用`boost::lexical_cast<>`, if奇怪的是，它具有适当的语义——通常在将字符串转换为内置数字类型时会这样做）。但是，对于这么简单的事情，可以直接从流中读取：

```
std::istream&
ignoreDollar( std::istream& stream )
{
    if ( stream.peek() == '$' ) {
        stream.get();
    }
    return stream;
}

std::istream&
checkSeparator( std::istream& stream )
{
    if ( stream.peek() == ',' ) {
        stream.get();
    } else {
        stream.setstate( std::ios_base::failbit );
    }
    return stream;
}

std::vector<int> values;
int value;
while ( std::cin >> value ) {
    values.push_back( value );
    std::cin >> ignoreDollar >> checkSeparator;
}
int sum = std::accumulate( values.begin(), values.end(), 0 ); 
```

（在这种特殊情况下，只在循环中执行所有操作可能会更简单`while`。但是，操纵器是一种普遍有用的技术，并且可以在更广泛的环境中使用。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T09:22:05.387

一个简单的版本：

```
int getIntValue(const std::string& data)
{
  stringstream ss(data);
  int i=0;
  ss >> i;
  return i;
}

int getSum(std::vector<std::string>& c)
{
  int sum = 0;  
  for (auto m = c.begin(); m!= c.end(); ++m)
  {
    sum += getIntValue(*m);
  }
  return sum;
} 
```

完毕

# libreoffice-calc - 公式锁定

> ID：13285484
> 
> 赞同：0
> 
> 时间：2012-11-08T08:48:23.663
> 
> 标签：libreoffice-calc

在 LibreOffice Calc 中，我有三列。第一列和第二列是值，第三列是前两列之间的差异。有很多行，所以为了用公式填充第三列，我将公式`$A1-$B1`放入第一个单元格并向下拖动填充后续行。

但是我希望能够上下移动整个第二行，对齐不同的行值以查看它们的差异。当我突出显示并移动第二列时，公式会随之移动。

过去`$A1-$B1`是现在`$A1-$B2`。通常是一个很好的功能，但在这种情况下它是令人沮丧的。我希望它留下来`A1-B1`。

解决方案很简单，`$A$1-$B$1`问题是，就像我说的那样，有很多行并且遍历每个公式并添加第二个`$`太耗时，并且将这些`$A$1-$B$1`地方`$A$1-$B$1`拖到每一行中。

[编辑] 在等待回复时，我决定通过第三栏工作。实际上，即使将第二列的内容加倍`$A$1-$B$1`然后移动第二列的内容，第三列的值也会发生变化。

我怎样才能避免这种情况？

有没有办法在选择的公式上应用公式锁定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:13:31.857

我在 LibreOffice 论坛上问过，我被介绍到这个功能......功能完美。

```
=INDIRECT("A" & ROW() ) - INDIRECT("B" & ROW()) 
```

# entity-framework - 如何避免实体框架 4.3.1 中的重复插入

> ID：13285485
> 
> 赞同：1
> 
> 时间：2012-11-08T08:48:42.273
> 
> 标签：entity-framework, linq-to-entities, duplicates, entity-framework-4.3.1

我有一个使用代码优先方法创建的小模型 - 一个`City`只包含有关城市名称的信息的类。

```
public class City
{
    public City()
    {
        Posts = new List<Post>();
    }

    public City(string cityName)
    {
        Name = cityName;
    }

    public virtual ICollection<Post> Posts { get; private set; }
    public int Id { get; set; }
    public string Name { get; private set; }
} 
```

一个`Post`类表示邮政编码和城市参考的组合

```
public class Post
{
    public virtual City City { get; set; }        
    public int Id { get; set; }
    public string ZipCode { get; set; }        
} 
```

两个实体都在上下文中定义了它们的集合作为它们的配置

```
public DbSet<City> Cities { get; set; }
public DbSet<Post> Posts { get; set; }

modelBuilder.Configurations.Add(new CityMap());
modelBuilder.Configurations.Add(new PostMap());

public class CityMap : EntityTypeConfiguration<City>
{
    public CityMap()
    {
        // Primary Key
        HasKey(t => t.Id);

        // Properties
        // Table & Column Mappings
        ToTable("City");
        Property(t => t.Id).HasColumnName("Id");
        Property(t => t.Name).HasColumnName("Name");
    }
}

public class PostMap : EntityTypeConfiguration<Post>
{
    public PostMap()
    {
        // Primary Key
        HasKey(t => t.Id);

        // Properties
        // Table & Column Mappings
        ToTable("Post");
        Property(t => t.Id).HasColumnName("Id");            
        Property(t => t.ZipCode).HasColumnName("ZipCode");

        // Relationships
        HasRequired(t => t.City)
        .WithMany(t => t.Posts)
        .Map(map=>map.MapKey("CityId"));
    }
} 
```

我已经使用静态方法创建了用于操作这些对象的类，这些静态方法获取或创建对象并将它们返回给调用者。

```
private static City GetCity(string cityName)
{
        City city;

        using (var db = new DbContext())
        {
            city = db.Cities.SingleOrDefault(c => c.Name == cityName);

            if (city == null)
            {
                city = new City(cityName);
                db.Cities.Add(city);
                db.SaveChanges();                    
            }
        }

        return city;
    }

    private static Post GetPost(string zipCode, string cityName)
    {
        Post post;

        City city = GetCity(cityName);

        using (var db = new DbContext())
        {      
            post = db.Posts.SingleOrDefault(p => p.City.Id == city.Id && p.ZipCode == zipCode);
            if (post == null)
            {
                post = new Post { City = city, ZipCode = zipCode };

                // State of city is unchanged
                db.Posts.Add(post);

                // State of city is Added
                db.SaveChanges();
            }
        }

        return post;
    } 
```

想象一下，我称之为方法

```
GetPost("11000","Prague"); 
```

方法`GetCity`被启动，如果不存在，方法创建一个`city`然后调用该`SaveChanges()`方法。

如果我将返回`city`的实体设置为新`Post`实例，实体框架会为相同的`city`.

我怎样才能避免这种行为？我只想插入在上一步中创建或加载的`post`引用的新实体。`city`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:43:01.193

`State`当您将其附加到未更改时，您需要设置您的城市

```
context.Entry(city).State = EntityState.Unchanged; 
```

# javascript - 在 HTML 链接中使用 onClick 传递多个值

> ID：13285489
> 
> 赞同：20
> 
> 时间：2012-11-08T08:49:24.583
> 
> 标签：javascript, html

您好我正在尝试使用 HTML onclick 函数传递多个值。我使用 Javascript 创建表格

```
var user = element.UserName;
var valuationId = element.ValuationId;
$('#ValuationAssignedTable').append('<tr> <td><a href=# onclick="return ReAssign(\'' + valuationId + ',' + user + '\')">Re-Assign</a> </td>  </tr>'); 
```

但是在我的 Javascript 函数中，用户名是未定义的，并且值是一个字符串，其中值和用户名相结合

```
function ReAssign(valautionId, userName) {
    valautionId;
    userName;

} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-08T08:53:08.983

如果`valuationId`和`user`是 JavaScript 变量，并且源代码是纯静态 HTML，不是以任何方式生成的，您应该尝试：

```
<a href=# onclick="return ReAssign(valuationId,user)">Re-Assign</a> 
```

**如果它们是从 PHP 生成的，并且它们包含字符串值，请在每个**变量周围使用转义引号，如下所示：

```
<?php
    echo '<a href=# onclick="return ReAssign(\'' + $valuationId + '\',\'' + $user + '\')">Re-Assign</a>';
?> 
```

逻辑类似于问题中的更新代码，它使用 JavaScript 生成代码（也许使用 jQuery？）：不要忘记将转义引号应用于**每个**变量：

```
var user = element.UserName;
var valuationId = element.ValuationId;
$('#ValuationAssignedTable').append('<tr> <td><a href=# onclick="return ReAssign(\'' + valuationId + '\',\'' + user + '\')">Re-Assign</a> </td>  </tr>'); 
```

**这个故事的寓意是**

```
'someString(\''+'otherString'+','+'yetAnotherString'+'\')' 
```

将被评估为：

```
someString('otherString,yetAnotherString'); 
```

而您需要：

```
someString('otherString','yetAnotherString'); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-06-05T08:09:57.593

## **解决方案：在 JS 中生成的 html 使用 onclick 传递多个参数**

> 对于在 JS 中生成的 html，请执行以下操作（我们使用单引号作为字符串包装器）。每个参数都必须用单引号括起来，否则您的所有参数都将被视为单个参数，例如 functionName('a,b') ，现在它是一个值为 a,b 的单个参数。
> 
> 我们必须使用字符串转义字符反斜杠（）来用单引号关闭第一个参数，在其间给出一个分隔符逗号，然后用单引号开始下一个参数。（这是使用的魔法代码`'\',\''`）

## ***例子：***

```
$('#ValuationAssignedTable').append('<tr> <td><a href=# onclick="return ReAssign(\'' + valuationId  +'\',\'' + user + '\')">Re-Assign</a> </td>  </tr>'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-01T17:46:29.257

```
 $Name= "'".$row['Name']."'";
  $Val1= "'".$row['Val1']."'";
  $Year= "'".$row['Year']."'";
  $Month="'".$row['Month']."'";

 echo '<button type="button"   onclick="fun('.$Id.','.$Val1.','.$Year.','.$Month.','.$Id.');"  >submit</button>'; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-09-16T19:44:57.010

用反引号( ` ) 将每个参数括起来

例子：

```
<button onclick="updateById(`id`, `name`)">update</button>

function updateById(id, name) {
   alert(id + name );
   ...
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-08T08:54:25.530

请试试这个

```
for static values--onclick="return ReAssign('valuationId','user')"
for dynamic values--onclick="return ReAssign(valuationId,user)" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-08T08:56:10.433

那是因为您将字符串传递给函数。只需删除引号并传递实际值：

```
<a href=# onclick="return ReAssign(valuationId, user)">Re-Assign</a> 
```

猜测 ReAssign 函数应该返回`true`or `false`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-08T09:25:52.240

这里有几件事...

如果你想在 onclick 事件发生时调用一个函数，你只需要函数名加上参数。

然后，如果您的参数是一个变量（它们看起来像），那么您将不需要在它们周围加上引号。不仅如此，如果这些是全局变量，您还需要在“窗口”中添加。在此之前，因为它是包含所有全局变量的对象。

最后，如果这些参数不是变量，您需要排除斜线来转义这些字符。由于 onclick 的值是用双引号括起来的，所以单引号不会成为问题。所以你的答案看起来像这样......

```
<a href=# onclick="ReAssign('valuationId', window.user)">Re-Assign</a> 
```

如果您想要的不仅仅是快速解决方案，这里还有一些额外的事情需要注意。

您看起来像是在尝试使用 + 运算符来组合 HTML 中的字符串。HTML 是一种脚本语言，因此当您编写它时，整个内容本身就是一个字符串。从现在开始您可以跳过这些，因为它不是您的浏览器将运行的代码（只是一大堆东西，任何已经存在的东西都是浏览器具有特殊含义的东西）。

接下来，您使用的锚标记/链接实际上不会将用户带到另一个网站，只是运行一些代码。我会使用锚标记以外的其他东西，并使用适当的 CSS 来格式化它以使其看起来像你想要的那样。这实际上取决于设置，但在许多情况下，span 标签就可以了。给它一个类（如 class="runjs"）并为此设置 CSS 规则。要让它模仿链接的行为，请使用以下命令：

```
.runjs {
    cursor: pointer;
    text-decoration: underline;
    color: blue;
} 
```

这使您可以省略无论如何都没有使用的 href 属性。

最后，您可能希望使用 JavaScript 来设置此链接的 onclick 属性的值，而不是手写。它通过将页面代码与页面结构分开来保持页面清洁。在您的课堂上，您可以像这样更改所有这些链接...

```
var links = document.getElementsByClassName('runjs');
for(var i = 0; i < links.length; i++)
    links[i].onclick = function() { ReAssign('valuationId', window.user); }; 
```

虽然这在某些较旧的浏览器中不起作用（因为 getElementsByClassName 方法），但它只有三行，并且完全符合您的要求。这些链接中的每一个都有一个与之相关的匿名函数，这意味着除了该标签的 onclick 值之外，它们没有任何变量与它们相关联。另外，如果您愿意，您可以通过这种方式包含更多代码行，所有代码都集中在一个整洁的位置。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-11-08T09:00:06.230

```
function ReAssign(valautionId, userName) {
   var valautionId 
   var userName 
 alert(valautionId);
 alert(userName);
  }

<a href=# onclick="return ReAssign('valuationId','user')">Re-Assign</a> 
```

# android - 如何设置 ActionBar 的样式，选定选项卡上的选项卡背景

> ID：13285490
> 
> 赞同：17
> 
> 时间：2012-11-08T08:49:25.473
> 
> 标签：android, android-actionbar, android-tabs, android-styles

我正在努力设计 ActionBar 的样式。我的应用程序有一个带有三个选项卡的 ActionBar。我试图让选定的选项卡具有背景颜色，而未选定的选项卡显示不同的颜色。我正在关注此参考：[自定义操作栏](http://android-developers.blogspot.com/2011/04/customizing-action-bar.html)。但是所有选项卡都显示 Selected 颜色。

我的`styles.xml`文件如下：

```
<style name="MyActionBarTabStyle" parent="android:style/Widget.Holo.Light.ActionBar.TabBar">
    <item name="android:background">@drawable/tab_background</item>
    <item name="android:paddingLeft">32dp</item>
    <item name="android:paddingRight">32dp</item>
</style> 

<style name="MyActionBarTabBarStyle" parent="android:style/Widget.Holo.Light.ActionBar.TabBar">

    <item name="android:background">@drawable/red</item>
</style> 

<style name="AppTheme.Light" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/ActionBar.Light</item>
    <item name="android:actionBarTabStyle">@style/MyActionBarTabStyle</item>
    <item name="android:actionBarTabBarStyle">@style/MyActionBarTabBarStyle</item>

</style> 
```

tab_background 只是一个 9 补丁。我也不确定我是否从正确的父级 ( `parent="android:style/Widget.Holo.Light.ActionBar.TabBar`) 继承了操作栏选项卡。我查看了参考资料，发现很难理解样式层次结构

为什么我的标签不显示选中或不显示？提前感谢你的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-08T11:22:58.307

我解决了我的问题。我最初没有使用 State List Drawables。我直接使用了背景图像，而不是通过 StateListDrawable。使用 StateListDrawable，您可以根据标签是否被选中来设置不同的背景。

所以我添加了文件`tab_background_select.xml`

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true"
        android:drawable="@drawable/tab_background" />

</selector> 
```

我从我的`styles.xml`：

```
 <item name="android:background">@drawable/tab_background_select</item> 
```

# c# - 如何确定使用 WMI 连接了哪些打印机

> ID：13285491
> 
> 赞同：1
> 
> 时间：2012-11-08T08:49:29.257
> 
> 标签：c#, .net, printing, wmi

我一直在试图找到一种方法来确定哪些已安装的打印机是“连接的”。经过一番谷歌搜索后，我想我必须深入研究 WMI。

所以我建立了这个测试：

```
// Struct to store printer data in.
public struct MyPrinter 
{ 
    public string Availability; 
    public string ExtendedPrinterStatus; 
    public string Name; 
    public string PrinterStatus; 
    public string Status; 
    public string StatusInfo; 

    public MyPrinter(string a, string eps, string n, string ps, string s, string si) 
    { 
        Availability = a; 
        ExtendedPrinterStatus = eps; 
        Name = n; 
        PrinterStatus = ps; 
        Status = s; 
        StatusInfo = si; 
    } 
}

var installedPrinters = new string[numPrinters];
PrinterSettings.InstalledPrinters.CopyTo(installedPrinters, 0);

var searcher = new ManagementObjectSearcher("SELECT * FROM Win32_Printer"); 
var data = new List<MyPrinter>(); 

foreach (var printer in searcher.Get()) 
{ 
    if (installedPrinters.Contains(printer["Name"].ToString()))
    {
        var availability = (printer["Availability"] ?? "").ToString(); 
        var extendedPrinterStatus = (printer["ExtendedPrinterStatus"] ?? "").ToString(); 
        var name = (printer["Name"] ?? "").ToString(); 
        var printerStatus = (printer["PrinterStatus"] ?? "").ToString(); 
        var status = (printer["Status"] ?? "").ToString(); 
        var statusInfo = (printer["StatusInfo"] ?? "").ToString(); 

        data.Add(new MyPrinter(availability, extendedPrinterStatus, name, printerStatus, status, statusInfo)); 
    }
} 
```

我有 6 台打印机，其中 2 台是网络打印机。我已经在连接所有打印机的情况下运行此程序，所有结果如下所示：

```
Availability = "" // printer["Availability"] = null
ExtendedPrinterStatus = "2" // 2 = Unknown
Name = "{printer name here}"
PrinterStatus = "3" // 3 = Idle
Status = "Unknown"
StatusInfo = "" // Null 
```

所以打印机之间的唯一区别是名称。我再次运行脚本，但这次我断开了笔记本电脑与网络的连接。因此，在这种情况下，2 台打印机不再连接。

奇怪的是（对我来说）结果是完全一样的。

我运行此测试的原因是，找出我需要为我的案例使用哪个字段。

所以最后，我无法弄清楚如何确定打印机是否连接。所以我想要的是一种在 C# 中找出已安装 + 连接的打印机的方法。如果有一种方法可以在不使用 WMI 类的情况下做到这一点，那么我也可以，只要它有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T07:56:41.250

我和一位同事尝试了很多方法来找到解决方案，我们认为这很有效：

```
private string[] GetAvailablePrinters()
{
    var installedPrinters = new string[PrinterSettings.InstalledPrinters.Count];
    PrinterSettings.InstalledPrinters.CopyTo(installedPrinters, 0);

    var printers = new List<string>();
    var printServers = new List<string>();
    var searcher = new ManagementObjectSearcher("SELECT * FROM Win32_Printer");

    foreach (var printer in searcher.Get())
    {
        var serverName = @"\\" + printer["SystemName"].ToString().TrimStart('\\');
        if (!printServers.Contains(serverName))
            printServers.Add(serverName);
    }

    foreach (var printServer in printServers)
    {
        var server = new PrintServer(printServer);
        try
        {
            var queues = server.GetPrintQueues();
            printers.AddRange(queues.Select(q => q.Name));
        }
        catch (Exception)
        {
            // Handle exception correctly
        }
    }

    return printers.ToArray();
} 
```

诀窍是当打印服务器不可用时，GetPrintQueues 会抛出一些特定的异常。通过仅添加不引发此类异常的打印机，我们可以获得所有已连接打印机的列表。这不会检查打印机是否打开/关闭，因为这实际上并不重要。如果它被关闭，文档将被放置在打印队列中，稍后可以打印。

我希望这可以帮助其他遇到此问题的人。

**旁注：** 我决定不捕获该特定异常的原因是因为我必须仅针对该异常引用一个 dll。

# logging - snort 日志文件格式

> ID：13285492
> 
> 赞同：1
> 
> 时间：2012-11-08T08:49:39.887
> 
> 标签：logging, snort

在 /etc/sysconfig/snort 中，我评论了以下行：“#BINARY_LOG=1” /usr/local/snort/var/log/eth0 中的日志文件仍然生成，但无法在 Wireshark 中读取，它不是ascii 也是如此。如何读取此文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T01:55:39.543

这里没有太多信息可以继续，但我猜您正在记录统一 2 文件，这些文件需要由一个名为 barnyard2 的程序处理。请在此处下载：[http ://www.securixlive.com/barnyard2/](http://www.securixlive.com/barnyard2/)

Barnyard2 读取 Unified2 文件并将它们记录到本地和/或远程数据库，包括 mysql、mssql 和 postgres。

此外，如果您下载了 snort 源包，应该包含一个名为 u2spewfoo 的工具。这是统一2文件的解析器，并将其内容输出到您的屏幕。这有助于确保被记录的文件确实是一个统一文件。希望这可以帮助！

# python - Python 信号处理程序和重入

> ID：13285494
> 
> 赞同：3
> 
> 时间：2012-11-08T08:49:52.993
> 
> 标签：python, signals, reentrancy

[Python 中的信号处理程序](http://docs.python.org/2/library/signal.html)是可重入的吗？

我有一个定时器的信号处理程序，它每秒对堆栈进行多次快照 - 它是一个统计分析器。如果需要太长时间，我的信号处理程序可以重新输入吗？如果是这样，我该如何保护它？

[我的代码](https://github.com/williame/will_profile)：

```
import signal, time, traceback, threading

def start(interval=0.1):
    global _interval, _samples
    _samples = []
    signal.signal(signal.SIGALRM,_sample)
    signal.setitimer(signal.ITIMER_REAL,interval,interval)

def stop():
    global _samples
    signal.setitimer(signal.ITIMER_REAL,0,0)
    samples, _samples = _samples, []
    samples.append((time.time(),None,None,[]))
    return samples

def _sample(signo,frame):
    thread = threading.current_thread()
    row = (time.time(),thread.ident,thread.name,traceback.extract_stack(frame))
    if not _samples or row[1:] != _samples[-1][1:]: # new stack since last sample?
        _samples.append(row) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:01:17.847

一般来说，没有办法阻止python中的信号。但是 SIGALRM 和好友不能叠加，所以一次只能发送一个。如果您只是在处理程序函数的末尾安排下一个计时器事件，则不必担心重入。

# ruby - 未初始化的常量 Twitter (NameError)

> ID：13285495
> 
> 赞同：2
> 
> 时间：2012-11-08T08:50:02.303
> 
> 标签：ruby, rubygems, opensuse

嘿伙计们，我在使用 twitter gem 时遇到了问题。我有一个包含此内容的文件 (twitter.rb)

```
require "rubygems"
require "twitter"

puts Twitter.user_timeline("roykasa").first.text
puts Twitter.user("roykasa").location
search = Twitter::Search.new
search.containing("hate").to("StewieJokess").
result_type("recent").each do |r| puts r.text end 
```

当我运行该文件时，我收到此错误：未初始化的常量 Twitter (NameError) 我在 SO 上的某个地方读到了一个用户遇到类似问题的地方，他通过安装新版本的 ruby​​ 和 ruby​​gems 解决了这个问题，但我遇到的问题是正在运行suse 12.1 并且正在运行 ruby​​ 和 ruby​​ gems 的最新版本。在任何地方都找不到来自第 3 方的 rpm。至少我已经搜索过了。有谁知道另一种解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:05:03.317

如果您正在运行 Ruby 1.8.x，您应该能够通过将您自己的脚本重命名为不同于`twitter.rb`.

这是因为`twitter`gem 中的主文件的名称与此完全相同，并且您的文件可能会在`$LOAD_PATH`订单创建的组合虚拟文件系统中覆盖它。在 Ruby 1.9.x 之前，`require`不仅从库目录加载，而且更喜欢加载相对于进程当前工作目录的文件，在这种情况下，是脚本所在的目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-06T07:29:38.130

不要将您的文件命名为*twitter.rb*，还要确保同一目录中没有其他名称为*twitter.rb的文件*

# java - 如何用多行文本覆盖图像（文本将位于画布的中心）

> ID：13285510
> 
> 赞同：1
> 
> 时间：2012-11-08T08:51:09.027
> 
> 标签：java, android, xml, android-manifest

我正在开发摄影应用程序，我用文本覆盖图像。

这是我的代码：

```
Bitmap mBitmap = BitmapFactory.decodeResource(getResources(),
        R.drawable.themes11);
// create a mutable bitmap with the same size as the background image's size
bmOverlay = Bitmap.createBitmap(mBitmap.getWidth(),
        mBitmap.getHeight(), Bitmap.Config.ARGB_4444);
// create a canvas on which to draw
Canvas canvas = new Canvas(bmOverlay);
TextPaint paint = new TextPaint();
paint.setColor(Color.RED);

paint.setTextSize(40);
paint.setFlags(Paint.ANTI_ALIAS_FLAG);
// if the background image is defined in main.xml, omit this line
canvas.drawBitmap(mBitmap, 0, 0, null);

// draw the text and the point
canvas.drawPoint(50, 100, paint);
// canvas.drawText(InstaTextActivity.CurrentWord, 300, 200, paint);
StaticLayout layout = new StaticLayout(InstaTextActivity.CurrentWord,
        paint, display.getHeight(),
        android.text.Layout.Alignment.ALIGN_NORMAL, (float) 1.0,
        (float) 0.0, true);

canvas.translate(width / 5, height / 5);
layout.draw(canvas);
imageview_img.setImageBitmap(bmOverlay); 
```

在此代码中，我将文本覆盖在屏幕宽度/2 和高度/2 上，它将显示在图像顶部，但我希望文本居中对齐。此外，当我写一个大文本时，它会将表单中心对齐到右侧。

看看图像，看看我想要它：

图片背景：

![背景图像](../Images/0718bb1521c61fa48d64631cfa878bbe.png)

我想要的结果：

![结果](../Images/13fe9b32f6c4736113f737f57b87c376.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:53:57.767

使用以下方法测量文本的高度和宽度。然后在画布上绘制文本时

`left = width/2 - textWidth/2`
`top = height/2 - textHeight/2`

但是，如果您需要多行文本来处理长文本，那就有点棘手了。

```
/**
 * Method to get the height of the paint
 * 
 * @param brush The TextPaint used to paint the text
 * @param text The text which needs to be measured
 * @return height of the text
 */
public static int measureTextHeight(Paint brush, String text) {
    Rect result = new Rect();
    // Measure the text rectangle to get the height
    brush.getTextBounds(text, 0, text.length(), result);
    return result.height();
}
/**
 * Method to get the width of the paint
 * 
 * @param brush The TextPaint used to paint the text
 * @param text The text which needs to be measured
 * @return width of the text
 */
public static int measureTextWidth(Paint brush, String text) {
    Rect result = new Rect();
    // Measure the text rectangle to get the height
    brush.getTextBounds(text, 0, text.length(), result);
    return result.width();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-21T11:29:08.077

**我用这个。为我工作。**

```
public Bitmap drawMultilineTextToBitmap(Context gContext,
                                   int gResId,
                                   String gText) {

  // prepare canvas
  Resources resources = gContext.getResources();
  float scale = resources.getDisplayMetrics().density;
  Bitmap bitmap = BitmapFactory.decodeResource(resources, gResId);

  android.graphics.Bitmap.Config bitmapConfig = bitmap.getConfig();
  // set default bitmap config if none
  if(bitmapConfig == null) {
    bitmapConfig = android.graphics.Bitmap.Config.ARGB_8888;
  }
  // resource bitmaps are imutable,
  // so we need to convert it to mutable one
  bitmap = bitmap.copy(bitmapConfig, true);

  Canvas canvas = new Canvas(bitmap);

  // new antialiased Paint
  TextPaint paint=new TextPaint(Paint.ANTI_ALIAS_FLAG);
  // text color - #3D3D3D
  paint.setColor(Color.rgb(61, 61, 61));
  // text size in pixels
  paint.setTextSize((int) (14 * scale));
  // text shadow
  paint.setShadowLayer(1f, 0f, 1f, Color.WHITE);

  // set text width to canvas width minus 16dp padding
  int textWidth = canvas.getWidth() - (int) (16 * scale);

  // init StaticLayout for text
  StaticLayout textLayout = new StaticLayout(
    gText, paint, textWidth, Layout.Alignment.ALIGN_CENTER, 1.0f, 0.0f, false);

  // get height of multiline text
  int textHeight = textLayout.getHeight();

  // get position of text's top left corner
  float x = (bitmap.getWidth() - textWidth)/2;
  float y = (bitmap.getHeight() - textHeight)/2;

  // draw text to the Canvas center
  canvas.save();
  canvas.translate(x, y);
  textLayout.draw(canvas);
  canvas.restore();

  return bitmap;
} 
```

来源：[http ://www.skoumal.net/en/android-drawing-multiline-text-on-bitmap/](http://www.skoumal.net/en/android-drawing-multiline-text-on-bitmap/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T12:59:35.607

这不是一种非常精致的方法（未针对内存使用进行优化），但可以完成工作。您将需要修改代码以便在保持单词完整的字符串处拆分。希望这可以帮助。

```
package org.edu.abhi;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.os.AsyncTask;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.View;
import android.view.WindowManager;

/**
 * @author Abhishek_Nandi
 * 
 */
public class DummyUserSpace extends View {

    /***************************************************************************
     * Calls superclass constructor. This will call {@link #init(Context)}
     * 
     * @param context
     *            The Context the view is running in, through which it can
     *            access the current theme, resources, etc.
     **************************************************************************/
    public DummyUserSpace(Context context) {
        super(context);
        init(context);
    }

    /***************************************************************************
     * Calls superclass constructor. This will call {@link #init(Context)}
     * 
     * @param context
     *            The Context the view is running in, through which it can
     *            access the current theme, resources, etc.
     * @param attrs
     *            The attributes of the XML tag that is inflating the view.
     * @param defStyle
     *            The default style to apply to this view. If 0, no style will
     *            be applied (beyond what is included in the theme). This may
     *            either be an attribute resource, whose value will be retrieved
     *            from the current theme, or an explicit style resource.
     **************************************************************************/
    public DummyUserSpace(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        init(context);
    }

    /***************************************************************************
     * Calls superclass constructor. This will call {@link #init(Context)}
     * 
     * @param context
     *            The Context the view is running in, through which it can
     *            access the current theme, resources, etc.
     * @param attrs
     *            The attributes of the XML tag that is inflating the view.
     **************************************************************************/
    public DummyUserSpace(Context context, AttributeSet attrs) {
        super(context, attrs);
        init(context);
    }

    /**
     * Width of the View
     */
    int viewWidth = 0;
    /**
     * Height of the View
     */
    int viewHeight = 0;

    /**
     * {@link Paint} which is used to draw {@link #text}
     */
    Paint textPaint;
    /**
     * The text which needs to be drawn
     */
    String text = "can be spared the burden of having to perform manual memory management. In some languages, memory for the creation of objects is implicitly allocated on the stack, or explicitly allocated and deallocated from the heap. In the latter case the responsibility of managing memory resides with the programmer. If the program does not deallocate an object, a memory leak occurs. If the program attempts to access or deallocate memory that has already been deallocated, the result is undefined and difficult to predict, and the program is likely to become unstable and/or crash. This can be partially remedied by the use of smart pointers, but these add overhead and complexity. Note that garbage collection does not prevent \"logical\" memory leaks, i.e. those where the memory is still referenced but never used.. o have as few implementation dependencies as possible. It is intended to let application developers \"write once, run anywhere\" (WORA), meaning that code that runs on one platform does not need to be recompiled to run on another. Java is as of 2012 one of the most popular programming languages in use, particularly for client-server web applications, with a reported 10 million users";

    /**
     * Common constructor routine
     * 
     * @param context
     *            The Context the view is running in. It is used to get the
     *            density of the device
     */
    private void init(Context context) {
        textPaint = new Paint();
        textPaint.setColor(Color.WHITE);
        textPaint.setTextSize(40);
        textPaint.setStrokeWidth(6.0f);
        WindowManager manager = (WindowManager) context
                .getSystemService(Context.WINDOW_SERVICE);
        DisplayMetrics outMetrics = new DisplayMetrics();
        manager.getDefaultDisplay().getMetrics(outMetrics);
        padding *= outMetrics.density;
        lineSpacing *= outMetrics.density;
    }

    /**
     * Split the string and compute the {@link #startY}, {@link #textHeight}
     * which is required for drawing the view
     */
    private void prepareForDrawing() {
        viewWidth = getWidth();
        viewHeight = getHeight();
        if (viewHeight == 0) {
            return;
        }

        textHeight = Utility.measureTextHeight(textPaint, text);
        if (0 == textHeight) {
            return;
        }
        maxLines = (viewHeight - 2 * padding) / (textHeight + lineSpacing);
        prepareMultiLineText(textPaint, text);
        int noOfLines = splittedText.size();
        int section = noOfLines / 2;
        int center = viewHeight / 2;
        if (noOfLines % 2 == 0) {
            center -= lineSpacing / 2;
        } else {
            center -= textHeight / 2;
        }
        startY = center - (section - 1) * (textHeight + lineSpacing)
                + lineSpacing;
    }

    /**
     * The starting position from where the view will start drawing
     */
    private int startY = 0;
    /**
     * Height of the text
     */
    private int textHeight = 0;
    /**
     * Maximum lines this view can hold
     */
    private int maxLines = 1;
    /**
     * Padding from the view border
     */
    private int padding = 20;
    /**
     * Spacing between each line
     */
    private int lineSpacing = 10;

    private final String loadingText = "Loading..";

    /*
     * (non-Javadoc)
     * 
     * @see android.view.View#onDraw(android.graphics.Canvas)
     */
    @Override
    protected void onDraw(Canvas canvas) {
        if (!computationComplete) {
            new DrawComputations().execute();
            canvas.drawText(
                    loadingText,
                    getWidth() / 2
                            - Utility.measureTextWidth(textPaint, loadingText)
                            / 2,
                    getHeight() / 2
                            - Utility.measureTextHeight(textPaint, loadingText)
                            / 2, textPaint);
        } else {
            for(int count = 0; count<splittedText.size() ; count++){
                String trimmed = splittedText.get(count);
                //System.out.println(trimmed);
                canvas.drawText(
                        trimmed,
                        viewWidth / 2
                                - Utility.measureTextWidth(textPaint, trimmed)
                                / 2, startY + (count - 1)
                                * (textHeight + lineSpacing), textPaint);
            }
        }

    }

    /**
     * Denotes the computation has completed and the view is ready to be drawn
     */
    boolean computationComplete = false;

    /**
     * This {@link AsyncTask} performs the computation in background and updates
     * the view when computation is finished and the view is ready to be drawn
     * 
     * @author Abhishek_nandi
     * @version 1.0
     */
    class DrawComputations extends AsyncTask<Void, Void, Void> {

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#doInBackground(Params[])
         */
        @Override
        protected Void doInBackground(Void... params) {
            prepareForDrawing();
            computationComplete = true;
            return null;
        }

        /*
         * (non-Javadoc)
         * 
         * @see android.os.AsyncTask#onPostExecute(java.lang.Object)
         */
        @Override
        protected void onPostExecute(Void result) {
            invalidate();
        }
    }

    /**
     * Collection which holds the multi-line text
     */
    private List<String> splittedText = new ArrayList<String>();

    /**
     * This method is responsible for stripping {@link #text} into individual
     * lines in order to form the multi line text. This method can be used as a
     * utility.
     * 
     * @param paint
     *            The {@link Paint} which is used to draw the text
     * @param str
     *            The string which needs to be stripped
     */
    private void prepareMultiLineText(Paint paint, String str) {
        if (str == null || str.trim().length() == 0)
            return;
        str = str.trim();
        String result = str;
        int boxWidth = viewWidth;
        try {
            float textWidth = paint.measureText(str) + 2 * padding;
            result = str;
            while (textWidth > boxWidth) {
                if (result.length() == 0)
                    break;//keeping the entire word intact//if(result.lastIndexOf(" ")!=-1){result = result.substring(0, result.lastIndexOf(" "))}else
                result = result.substring(0, result.length() - 1);
                textWidth = paint.measureText(result) + 2 * padding;
            }
            result = result.trim();
            boolean exceeded = false;
            if (splittedText.size() == maxLines) {
                exceeded = true;
                result = result.substring(0, result.length()-2).concat("..");
            }
            splittedText.add(result);
            if (!exceeded && result.length() != str.length()) {
                prepareMultiLineText(textPaint, str.substring(result.length()));
            }
        } catch (Exception e) {
            Log.e("CustomView", "prepareMultiLineText", e);
        }
    }

} // END of class
// END of file 
```

![这是它的样子](../Images/b84a71c1710e6740929b363c90c1ffa8.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-25T07:45:30.430

你应该使用[`StaticLayout`](http://developer.android.com/reference/android/text/StaticLayout.html)这个。它测量和绘制多行文本、处理换行、行距、对齐等。

```
StaticLayout layout = new StaticLayout("your long text", textPaint,
    pixelsToFitWidthTo, Layout.Alignment.ALIGN_NORMAL, 1f, 0f, true);
int boxHeight = layout.getHeight(); // measure 
```

文本甚至可以是 HTML 格式，只需将文本包装在`Html.fromHtml()`：

```
Html.fromHtml("your long <b>and bold</b> text"); 
```

# unit-testing - 如何在 JUnit 测试中的无状态会话 Bean 中测试来自另一个 Eclipse 项目的实体类

> ID：13285512
> 
> 赞同：1
> 
> 时间：2012-11-08T08:51:16.560
> 
> 标签：unit-testing, junit, jpa-2.0, ejb-3.1, openjpa

所以这就是我正在尝试做的事情并坚持：

我有一个带有 @Entity (EJB 3.1) 类的共享 Eclipse Java 项目，该项目被其他几个 Eclipse WebApp 项目使用。这个项目本身没有persistence.xml！使用该项目的其他 WebApp 项目在 WebContent/META-INF 下声明自己的 persistence.xml，并使用 jar-file 标签在其 persistence.xml 中引用该项目的 JAR。当然，共享项目的 JAR 作为部署依赖添加到这些 WebApp 项目中，放在 WEB-INF/lib 下。

现在我正在创建 JUnit4 测试用例来测试这些 WebApp 项目中的无状态会话 bean。我正在使用 Apache TomEE 1.5.0 Plus，在测试用例中，我使用 @Before 方法使用 EJBContainer.createEJBContainer() 方法以嵌入式模式启动 OpenEJB 容器。为了使其正常工作，我创建了一个备用 test.persistence.xml（它使用与 HSQL 内存数据库不同的数据源并使用正向映射创建表）。我已将它放在 src 文件夹的 META-INF 中，并在 @Before 方法中，我将“openejb.altdd.prefix”设置为“test”，以便读取备用 test.persistence.xml。所有这些设置都有效。

问题是，OpenJPA 2.2.0 一启动，它就会抱怨共享项目中没有持久类！这是因为，test.persistence.xml 中的 jar-file 标签引用了一个不存在的 jar！当 Eclipse 部署其他 WebApp 项目时，它会在 WEB-INF/lib 下创建 JAR，而实际的 persistence.xml 指的是该路径下的 jar！但是，在运行 JUnit 测试用例时，我没有找到任何这样的 JAR。

那么如何在 test.persistence.xml 中引用这个 JAR 或共享项目中的类，而不会使测试用例本身过度依赖部署结构或任何特定的硬编码路径！该测试用例最终将提交到存储库，因此必须使任何检出它的开发人员都可以简单地运行它。

任何指向正确方向的指针将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T09:32:24.587

IMO 最简单和更好的方法是使用 Arquillian。控制包装、容器的生命周期等要容易得多。TomEE 还提供了与 Arquillian 的出色集成（适配器），您可以使用它。

检查文档页面[http://tomee.apache.org/documentation.html](http://tomee.apache.org/documentation.html) 有一个 arquillian 部分。

您还可以查看 TomEE 示例页面，您可以在其中找到大量小样本，包括 arquillian。

希望它可以帮助让 - 路易斯

# php - 用href从表中删除行

> ID：13285514
> 
> 赞同：0
> 
> 时间：2012-11-08T08:51:37.263
> 
> 标签：php, javascript, html, symfony

我想删除表中的一行并使用 href 链接删除数据库，但是当我单击链接行时不会删除我的表：

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="example">
<thead>
<tr>

<th> </th>
<th>Kpi</th>
<th>Criticity</th>
<th>Service</th>
<th>Condition Kpi</th>
<th>Condition 1</th>
<th>Condition 2</th>
<th>Condition 3</th>
<th>Edit</th>
<th>Delete</th>

</tr>
</thead>
<tbody>

{% for kpi in KPIs %}
<tr class="gradeU">
<td >{{kpi.getid}}</td>
<td>{{ kpi.kpi }}</td>
<td>{{ kpi.criticity}}</td>
<td>{{ kpi.service }}</td>
<td>{{ kpi.conditionkpi }}</td>
<td>{{ kpi.num1 }}</td>
<td>{{ kpi.num2 }}</td>
<td>{{ kpi.num3 }}</td>
<td><a class="edit" href="">Edit</a></td>
<td value="{{kpi.getid}}"><a href="#" onclick="suppLigne(this.parentNode.parentNode)"> Supprimer </a>

</tr>
{% endfor %}

</tbody>
</table>
ma fonction javascript:
function suppLigne( ligne){
ligne.parentNode.removeChild( ligne);
} 
```

我也试过在我的控制器中使用这个功能，但仍然没有好的答案

```
 public function supprimerkpiAction()
{ 
        $session =$this->get('request')->getSession() ;
        $user_name = $session->get('user_name');

$repository = $this->getDoctrine()->getEntityManager()->getRepository('AdminBlogBundle:Conditionalertes');
$id=$this->getRequest()->query->get('id');
                $em = $this->getDoctrine()->getEntityManager();
$uti=$repository->find($id);
                $em->remove($uti);
                $em->flush();

   $KPIs =  $repository->findAll();

      return $this->render('AdminBlogBundle:GestionKPI:supprimer.html.twig', array('user_name'=>$user_name,'KPIs'=>$KPIs));

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:02:32.050

1.  添加操作以删除“KPI”，无论它叫什么`deleteAction`。2、用kpi id添加Param id。
2.  为该 deleteAction 创建命名路由并将其命名为 YourBundleKpiDelete。并将参数添加到路由 ex。`/kpi/delete/{id}`
3.  在您的模板中使用以下代码：

    ```
    <td><a class="delete" href="{{ path('YourBundleKpiDelete', {'id':kpi.id} }}">Delete</a></td> 
    ```

4.  你准备好了。巴杜姆 tss。

# android - 两个微调器，微调器2依赖微调器1

> ID：13285517
> 
> 赞同：1
> 
> 时间：2012-11-08T08:51:45.983
> 
> 标签：android

我有两个微调器，当我选择微调器 1 时，它显示类别示例作业、房地产等。微调器 2 包含与微调器 1 中的特定类别相关的子类别，例如如果用户在微调器 1 中选择作业，那么微调器 2 应该只显示作业子热门工作、软件、硬件等类别 如果在 spinner1 房地产中，那么在 spinner 2 中它应该显示出租、租赁等。我该如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T08:54:42.687

简单来说，您必须为 Spinner 1 注册 ItemSelectedListener 并根据选择的值，设置 Spinner2 的适配器

代码片段：

```
spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parentView, View selectedItemView, int position, long id) {
                if(position==1)
                  adapterForSpinner2=new ArrayAdapter..... //Depends on your data
                else if(position==2)
                   adapterForSpinner2=new ArrayAdapter.....//Depends on your data

                //Setting up adapter based on selection  
                spinner2.setAdapter(adapterForSpinner2);        
            }

            @Override
            public void onNothingSelected(AdapterView<?> parentView) {
                // your code here
            }

        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-12T14:21:06.210

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ddServerName.setOnItemSelectedListener(this);
    ddServerPath.setOnItemSelectedListener(this); 
```

}

```
@Override
public void onItemSelected(AdapterView<?> adapterView, View view, int i, long l) {

    Toast.makeText(getApplicationContext(), "Item selected local "+adapterView.getItemAtPosition(i).toString(),
            Toast.LENGTH_SHORT).show();
    //sincronizare dropdouwn list
    if (view == ddServerName.getSelectedView()) ddServerPath.setSelection(i);
    else ddServerName.setSelection(i);
} 
```

# python - 在 Heroku 上持续集成/测试 Python

> ID：13285518
> 
> 赞同：2
> 
> 时间：2012-11-08T08:51:48.097
> 
> 标签：python, unit-testing, heroku, continuous-integration

所以我一直在寻找将 Heroku 用于小型个人项目（Python Flask + MongoDB）的方法，但是我似乎找不到太多关于如何在 Heroku 上进行简单连续集成测试或简单单元测试的信息暂存实例。我认为在实际公开之前，有必要确保一切都在生产中正常工作。

关于如何实现这一目标似乎没有太多信息。有几个 CI 插件会有所帮助，但它们目前仅适用于 Ruby/RoR（[tddium](https://www.tddium.com/)、[Rails on Fire](https://www.railsonfire.com/)），并且在 Heroku 上进行适当的测试似乎是一个应该由许多人解决的问题。[Buildpacks](https://devcenter.heroku.com/articles/buildpacks)似乎是实现我所需要的一种潜在方法，但我宁愿使用现有工具也不愿自己重新发明轮子。

所以问题是，我有什么选择？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T13:26:13.460

我不建议在 Heroku 上运行您的测试，因为该平台不是为此而设计的。与简单地使用另一个托管服务相比，让平台正常工作可能需要更长的时间。还有很多其他选择（例如，我是创始人之一的 Codeship）。

在[Codeship](https://codeship.io)，我们目前正在开发 Python 支持，该支持即将发布。MongoDB（以及许多其他工具）很好地集成并且开箱即用。我们还非常注重帮助您经常部署并很好地集成，这样您就可以在您的应用程序上工作，而不是在您的基础架构上工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T16:39:31.177

[CircleCi](https://circleci.com)有 Python 支持！它还直接支持 MongoDB。您将能够非常轻松地进行设置。

包括 Circle 在内的所有托管 CI 解决方案都没有直接在 Heroku 上运行。我们（Circle - 我是创始人）已经研究过了，但是人们编写测试的方式让这很尴尬（它们真的被设计为在同一台机器上运行）。Heroku 也非常慢且内存受限，而 CI 系统的主要目标是快速为您提供结果。

# windows-phone-7 - 将经过测试的图片添加到 Windows Phone 模拟器上的图片中心

> ID：13285519
> 
> 赞同：1
> 
> 时间：2012-11-08T08:51:50.763
> 
> 标签：windows-phone-7

我想在模拟器上将一些经过测试的图片文件添加到 People Hub，有没有简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T16:36:13.453

这是一篇博客文章，解释了[如何将测试图像添加到 Windows Phone 模拟器](http://www.softwareisinthedetails.com/2012/11/add-test-images-on-windows-phone-emulator.html)

# php - 原则 2：自定义外键名称

> ID：13285520
> 
> 赞同：4
> 
> 时间：2012-11-08T08:51:51.263
> 
> 标签：php, pdo, doctrine-orm, foreign-keys

有什么办法可以在 Doctrine 2 中自定义外键？

我的问题是，当我尝试克隆表时出现错误。因为当我克隆表时，外键也被克隆了，而且名称相同，我得到一个错误。

# excel - 我可以使用 Apache POI 将克隆的工作表存储为新的 Excel 文件吗？

> ID：13285523
> 
> 赞同：0
> 
> 时间：2012-11-08T08:51:59.977
> 
> 标签：excel, apache-poi

我克隆了一个工作表并对其进行了更改。现在我想将它存储为一个新的 Excel 文件。我怎样才能做到这一点？我看着工作簿和工作表的方法，找不到任何可以让我这样做的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T09:24:19.223

FileOutputStream fileOut = new FileOutputStream(newFilePath); wb.write(fileOut);

其中 wb 是工作簿

# java - JTextPane 文本背景颜色不起作用

> ID：13285526
> 
> 赞同：6
> 
> 时间：2012-11-08T08:52:08.260
> 
> 标签：java, swing, background-color, jtextpane, styleddocument

我正在尝试用 a 制作一个小的 HTML-wysiwyg，`JTextPane`但我无法`BackgroundAction`正常工作。我正在使用`setCharacterAttributes`，`StyledDocument`但`JTextPane`似乎有问题。视图还可以，但`Document`不是。

这是一个显示问题的小演示代码。有2个`JTextPane`：

1.  我在第一个中设置了文本的背景颜色
2.  我检索第一个文本`JTextPane`并将其设置在第二个文本上

    --> 尽管它们的文本相同，但它们显示的内容不同。

有没有办法在当前选定的文本上设置背景颜色并让`JTextPane`报告更新 HTML 文本？

```
import java.awt.Color;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;
import javax.swing.text.StyledDocument;

public class TestDifferentStyles {

    private void initUI() {
        JFrame frame = new JFrame(TestDifferentStyles.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        final JTextPane textPane = new JTextPane();
        final JTextPane textPane2 = new JTextPane();
        textPane2.setEditable(false);
        textPane.setContentType("text/html");
        textPane2.setContentType("text/html");
        textPane.setText("<html><head></head><body><p>Hello world</p></body></html>");
        SimpleAttributeSet set = new SimpleAttributeSet();
        StyleConstants.setForeground(set, Color.GREEN);
        StyleConstants.setBackground(set, Color.BLACK);
        ((StyledDocument) textPane.getDocument()).setCharacterAttributes(0, textPane.getDocument().getLength(), set, false);

        JPanel panel = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.fill = GridBagConstraints.BOTH;
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        panel.add(textPane, gbc);
        panel.add(textPane2, gbc);
        frame.add(panel);
        frame.setSize(500, 400);
        frame.setVisible(true);
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                System.err.println(textPane.getText());
                textPane2.setText(textPane.getText());
            }
        });
    }

    public static void main(String[] args) {

        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestDifferentStyles().initUI();
            }
        });
    }

} 
```

输出结果（黑色边框在 each 周围`JTextPane`）： ![输出结果](../Images/1233e0bac0322e3b22ee8562f507fb3b.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T13:51:48.127

这是可以设置背景颜色的Action的代码：

```
public class BackgroundColorAction extends StyledEditorKit.StyledTextAction {

    private Color color;

    public BackgroundColorAction(Color color) {
        super(StyleConstants.Background.toString());
        this.color = color;
    }

    @Override
    public void actionPerformed(ActionEvent ae) {
        JEditorPane editor = getEditor(ae);
        if (editor == null) {
            return;
        }
        //Add span Tag
        String htmlStyle = "background-color:" + Util.getHTMLColor(color);
        SimpleAttributeSet attr = new SimpleAttributeSet();
        attr.addAttribute(HTML.Attribute.STYLE, htmlStyle);
        MutableAttributeSet outerAttr = new SimpleAttributeSet();
        outerAttr.addAttribute(HTML.Tag.SPAN, attr);
        //Next line is just an instruction to editor to change color
        StyleConstants.setBackground(outerAttr, this.color);
        setCharacterAttributes(editor, outerAttr, false);
    }
} 
```

我在设置背景颜色时遇到了很多麻烦。但最后，我设法破解了它。`对不起，我忘记发布子程序了。干得好：

```
/**  
 * Convert a Java Color to equivalent HTML Color.
 *
 * @param color The Java Color
 * @return The String containing HTML Color.
 */
public static String getHTMLColor(Color color) {
    if (color == null) {
        return "#000000";
    }
    return "#" + Integer.toHexString(color.getRGB()).substring(2).toUpperCase();
} 
```

# javascript - XMLHttpRequest 仅在加载 xml 文件时在 Firefox 本地工作

> ID：13285532
> 
> 赞同：1
> 
> 时间：2012-11-08T08:52:27.540
> 
> 标签：javascript, xml, parsing, load, xmlhttprequest

您好，我是社区的新手。我想问一个问题。

我正在尝试创建一个模板 HTML5 来加载和做测验。我有包含问题和答案的 xml 文件，我正在尝试在我的模板中加载它。

我使用的代码是这样的：

**加载 xml 文件**

```
// The Script that loads the XML File Locally only works in Firefox for now

function loadXMLDoc(XMLname) {

    var xmlDoc;

    if (window.XMLHttpRequest) {
        xmlDoc = new window.XMLHttpRequest();
        xmlDoc.open("GET", XMLname, false);
        xmlDoc.send("");
        return xmlDoc.responseXML;
    }

    // IE 5 and IE 6
    else if (ActiveXObject("Microsoft.XMLDOM")) {
        xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = false;
        xmlDoc.load(XMLname);
        return xmlDoc;
    }
    else {
        xmlhttp = new XMLHttpRequest();

        //Open the file using the GET routine
        xmlhttp.open("GET", XMLname, false);         

        //Send request
        xmlhttp.send(null); 

        //xmlDoc holds the document information now
        return xmlDoc.responseXML; 
    }

    alert("Error loading document!");
    return null;
}​ 
```

**将内容传递给我的 HTML5 模板**

```
xmlDoc=loadXMLDoc("test"+file+".qxml"); 
```

* * *

我的问题是 xmlfile 中的数据没有被检索到。在服务器或任何其他浏览器上，xmlDoc 变量显示为空。

你能指出我的方向吗，因为我是 Javascript xmlhttprequest 方法的新手。非常感谢您抽出宝贵时间。

文件扩展名不是 xml（它是 .qxml）。问题是文件.qxml 的扩展名。那么有什么方法可以绕过这个并使用我的扩展名 qxml 而不是 xml 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:22:27.330

尝试[覆盖](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#overrideMimeType%28%29)服务器返回的 mime 类型，并告诉您的浏览器数据是 XML。

```
// The Script that loads the XML File Locally only works in Firefox for now

function loadXMLDoc(XMLname) {

    var xmlDoc;

    if (window.XMLHttpRequest) {
        xmlDoc = new window.XMLHttpRequest();
        xmlDoc.open("GET", XMLname, false);
        xmlDoc.overrideMimeType('text/xml');
        xmlDoc.send("");
        return xmlDoc.responseXML;
    }

    // IE 5 and IE 6
    else if (ActiveXObject("Microsoft.XMLDOM")) {
        xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.async = false;
        xmlDoc.load(XMLname);
        return xmlDoc;
    }
    else {
        xmlhttp = new XMLHttpRequest();

        //Open the file using the GET routine
        xmlhttp.open("GET", XMLname, false);         

        xmlhttp.overrideMimeType('text/xml');

        //Send request
        xmlhttp.send(null); 

        //xmlDoc holds the document information now
        return xmlDoc.responseXML; 
    }

    alert("Error loading document!");
    return null;
}​ 
```

# c# - c# 使用调用更新进度条和标签

> ID：13285538
> 
> 赞同：0
> 
> 时间：2012-11-08T08:52:49.223
> 
> 标签：c#, progress-bar, invoke

我有这个问题：在我的表单中，我有一个进度条和一个标签，我的目标是显示下载进度并在标签中显示字节数。由于这些值来自后台工作人员，我使用以下代码：

```
void WebClient_DownloadProgressChanged(object sender, DownloadProgressChangedEventArgs e)
{
    string sFormatted = string.Format("{0} of {1}", e.BytesReceived, e.TotalBytesToReceive);

    Invoke(new MethodInvoker(delegate
    {
        myProgressBar.Value = e.ProgressPercentage;
        myLabel.Text = sFormatted;
    }));
} 
```

并且这段代码工作正常，但是进度条会在一段时间后刷新，并且标签会正确刷新：

例如：我有 10000 字节要下载，我已经下载了 5000，标签正确显示 10000 中的 5000，但条形图显示为 30% 而不是 50...

我该如何解决这个问题？

提前致谢

# iphone - iPhone上的uibarbutton和popoverview

> ID：13285544
> 
> 赞同：-1
> 
> 时间：2012-11-08T08:53:14.263
> 
> 标签：iphone, ios, uipopovercontroller, uibarbuttonitem

我正在寻找一个很棒的教程来在 iPhone 上实现 popoverview 到目前为止我发现的只是在谈论 ipad 或正在崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:02:08.547

您无法在 iPhone 中实现 UIPopover。请参考[UIElementGuidelines](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html#//apple_ref/doc/uid/TP40006556-CH13-SW41)

对于一个不错的弹出教程检查这个[网站](http://www.raywenderlich.com/1056/ipad-for-iphone-developers-101-uipopovercontroller-tutorial)。

对于 iPhone 中的弹出框，请使用以下开源控件：

1.  [FPPpopover](http://www.50pixels.com/blog/labs/open-library-fppopover-ipad-like-popovers-for-iphone/)
2.  [iPhone 中的模态视图](http://doganberktas.com/2010/05/18/adding-transparent-modal-view-programatically-iphone/)
3.  [KG模态](http://www.cocoacontrols.com/platforms/ios/controls/kgmodal)
4.  [MJPopupview 控制器](http://www.cocoacontrols.com/platforms/ios/controls/mjpopupviewcontroller)
5.  [UA模态面板](http://www.cocoacontrols.com/platforms/ios/controls/uamodalpanel)
6.  [RNB模糊视图](http://www.cocoacontrols.com/platforms/ios/controls/rnblurmodalview)

有关更多信息，请查看此[网站](http://www.cocoacontrols.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:58:11.060

这可以帮助您找到很好的示例代码

[https://github.com/takashisite/TSPopover](https://github.com/takashisite/TSPopover)

[https://github.com/kyoshikawa/ZPopoverController](https://github.com/kyoshikawa/ZPopoverController)

[https://github.com/ddebin/DDPopoverBackgroundView](https://github.com/ddebin/DDPopoverBackgroundView)

[https://github.com/werner77/WEPopover](https://github.com/werner77/WEPopover)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:55:15.353

你不能在 iphone 中实现标准的 popoverview。必须制作一个复制 popoverview 的自定义视图。

检查这些：

[http://www.50pixels.com/blog/labs/open-library-fppopover-ipad-like-popovers-for-iphone/](http://www.50pixels.com/blog/labs/open-library-fppopover-ipad-like-popovers-for-iphone/)

# spring - 上下文Spring JSF应用程序中的休眠延迟加载异常

> ID：13285545
> 
> 赞同：1
> 
> 时间：2012-11-08T08:53:16.290
> 
> 标签：spring, hibernate, jsf, session, lazy-initialization

我正在开发一个基于 Spring、Hibernate 和 JSF 的 Web 应用程序，并且我面临一个已知问题，该问题之前已经讨论过几次。见下文 ：

> 17:42:11,970 错误 [STDERR] 11 月 7 日。2012 17:42:11 javax.faces.component.UIInput updateModel GRAVE: createProjectForm:projectStatus: 处理您提交的信息时出错。17:42:11,972 信息 [STDOUT] 17:42:11 错误 org.hibernate.LazyInitializationException 无法初始化代理 - 没有会话 org.hibernate.LazyInitializationException：无法初始化代理 - org.hibernate.proxy.AbstractLazyInitializer.initialize 没有会话(AbstractLazyInitializer.java:57) 在 org.hibernate.proxy.pojo.BasicLazyInitializer.invoke(BasicLazyInitializer.java:75) 在 org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.invoke(JavassistLazyInitializer.java:160) 在 com。 company.entity.TLsta_$$_javassist_6.setLStat(TLsta_$$_javassist_6.

我尝试了以下解决方案但没有成功:(:

*   OpenViewInSession 过滤器
*   @Transactional 注解
*   Hibernate.initialize(对象)

我认为我的问题与无法获得当前 Hibernate 会话的 JSF 有关，但我不知道如何解决这个问题。

我在用着 ：

*   JSF 1.2
*   Richfaces 3.3.2
*   春天 2.5
*   休眠 3.2.5
*   JBoss 4.2

在下面找到我的配置文件和源代码：

web.xml

```
<!-- Hibernate filter -->
<filter>
  <filter-name>hibernateFilter</filter-name>
  <filter-class>
      org.springframework.orm.hibernate3.support.OpenSessionInViewFilter
  </filter-class>
  <init-param>
      <param-name>sessionFactoryBeanName</param-name>
      <param-value>sessionFactory</param-value>
  </init-param>
</filter>
<filter-mapping>
  <filter-name>hibernateFilter</filter-name>
  <url-pattern>/*</url-pattern>
  <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
</filter-mapping>

<!-- Security --> 
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>ERROR</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
</filter-mapping>
<!-- jsf listener -->
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener>

<!-- spring listener -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-  class>
</listener>
<listener>
    <listener- class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<!-- jsf servlet -->
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>

<!-- RichFaces login -->
<login-config>
    <auth-method>BASIC</auth-method>
</login-config> 
```

应用程序上下文.xml

```
<!-- DataSource -->
<bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
    <property name="jndiName">
        <value>java:oracleDS</value>
    </property>
</bean>

<!-- Session Factory -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource"/>
    </property>
    <property name="mappingLocations" value="classpath:*.hbm.xml" />

    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</prop>
            <prop key="hibernate.show_sql">false</prop>
        </props>
    </property>
</bean>

 <!-- Generic DAO -->
<bean id="genericDAO" class="com.company.dao.GenericDaoImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
</bean>

<tx:annotation-driven transaction-manager="txManager"/>

<bean id="genericManager" class="com.company.services.GenericManagerImpl">
    <property name="dao" ref="genericDAO"/>
</bean>

<context:component-scan base-package="com.company">
    <context:include-filter type="regex" expression="com.company.beans.projectdirectory.Maintain*"/>
    <context:include-filter type="regex" expression="com.company.beans.projectdirectory.services.ProjectDirectoryManager"/>
    <context:include-filter type="regex" expression="com.company.beans.app.*"/>
</context:component-scan>
<context:annotation-config /> 
```

Create.xhtml 可以访问导致错误的属性：

```
<rich:comboBox value="#{createProjectBean.project.TPsta.PStat}"id="projectStatus" selectFirstOnUpdate="false"  width="145"
required="true" requiredMessage="#{msg.CMP_requiredPrjStatusError}">
<f:selectItems  value="#{createProjectBean.projectStatusOptions}" />
</rich:comboBox> 
```

知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:21:08.450

看起来您在“调用应用程序”阶段之前发生的“UpdateModelValuesPhase”中遇到了这个异常。“调用应用程序”阶段通常是您进行大部分处理的地方。

如果您正在使用 openSessionInView 过滤器并且仍然收到此异常，则可能是您在上一个请求期间加载了代理，但在当前请求期间尝试访问它。由于代理与已关闭的旧会话相关联，因此您会收到 LazyInitialization 异常。

# mercurial - 尝试删除 Mercurial 标签时发生冲突

> ID：13285546
> 
> 赞同：3
> 
> 时间：2012-11-08T08:53:22.547
> 
> 标签：mercurial, .hgtags

我的 Mercurial 存储库中有稳定的标记，我能够标记新的稳定版本的代码，并且一切正常。

但是我们决定有一个稳定的分支，它只包含稳定的代码，我创建了这个分支，但是现在我有问题切换到 Hg “stable” 分支而不是 Hg “stable” 标签。

因此，由于不再使用稳定标签，我想使用命令删除这些标签：hg tag --remove stable

但我收到警告：

hg tag --remove stable 警告：tag stable 与现有分支名称 .hgtags 冲突

我该如何解决这个奇怪的问题？是否建议手动编辑 .hgtags 文件？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T03:22:11.630

您可以手动编辑该`.hgtags`文件。它只是存储库中的另一个文件。如果你把它搞砸了，你可以重新编辑它并重新提交它。

# c# - c#封装：从其他项目中获取类型

> ID：13285547
> 
> 赞同：3
> 
> 时间：2012-11-08T08:53:22.327
> 
> 标签：c#, types, encapsulation, .net-assembly, projects

我需要解释一下才能解决问题。

我有3个项目：

项目 1 可以看到项目 2 和 3。

项目 2 可以看到项目 3。

项目 3 是一个 dll，其他的是应用程序。

我必须设计一个有很多子类的类。子类都有一个在基类中声明为抽象的方法，因此它们都必须使用它。它们需要分布在所有项目中，因为方法中的代码直接与项目交互。

抽象基类在项目 3 中，子类在 2 和 1 中。我遇到的问题是：

这是我写的方法：

```
 public static IEnumerable<Type> GetSubClasses(Type typ)
   {
       IEnumerable<Type> subclasses =
       from type in Assembly.GetAssembly(typ).GetTypes()
       where type.IsSubclassOf(typ) && !type.IsAbstract
       select type;
       return subclasses;
   } 
```

我正在尝试获取该类型的所有子类，但是当我这样做时，我只从当前项目中获取子类。例如，如果我尝试从项目 1 中获取它们，我不会从项目 2 中获取子类。

我怎么做？我知道我可以从项目 2 中获得程序集引用，但它没有 GetAssembly(Type t) 方法，借助它我得到了所有子类。如果它会是一样的，我只需要在那里做同样的事情。

我的第二个问题是，有没有更简单的方法？在许多项目中都有这些类有点..“大”，也许有一种解决方案可以让它们成为一个。就像我说的，他们都需要拥有的方法的代码，需要直接与他们所在的项目进行交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:23:11.690

问题是你在打电话`Assembly.GetTypes()`。这只会为您提供该特定程序集中的类。如果您有`Assembly`所有三个程序集的对象，您可以执行类似的操作

```
assem1.GetTypes()
.Concat(assem2.GetTypes())
.Concat(assem3.GetTypes()) 
```

所以问题是如何获得这三个`Assembly`对象。从项目 1 你可以说

```
var assem1 = typeof(SomeClassInProj1).Assembly;
var assem2 = typeof(SomeClassInProj2).Assembly;
var assem3 = typeof(SomeClassInProj3).Assembly; 
```

在您无法“看到”其他程序集的项目中，您需要加载它们。请参阅 的文档[`Assembly.Load`](http://msdn.microsoft.com/en-us/library/3te3zcz1.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T08:57:52.273

您必须加载所有可能包含您想要查找的类型的程序集，并像在循环中那样查找类型。

我已经做了类似的事情来从当前应用程序 bin 文件夹中的程序集中获取所有类的列表，这些类继承自某个基类：

```
// load all files from current dir which ends with `.dll`
var q = from s in Directory.GetFiles(Directory.GetCurrentDirectory(), "*.dll")
        select s;

var types = q.Select(s => getTypes(s, myBaseType))
             .SelectMany(typeList => typeList).ToList(); 
```

和函数getTypes：

```
IEnumerable<Type> getTypes(string filePath, Type baseType) {
    Assembly a = Assembly.LoadFrom(filePath);
    return a.GetTypes().Where(t => t.IsSubclassOf(baseType) && !t.IsAbstract);
} 
```

您必须处理一些例外情况，例如`BadImageFormatException`当您的文件夹中有不是 .net 程序集的 dll 时。

另一种方法可能是配置要检查的程序集列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:15:57.227

任何基类或接口都不应该知道或关心它的继承者或实现者。任何交互都应仅限于被覆盖的抽象或虚拟成员。

同样，导出公共类型的程序集并非旨在了解有关导入程序的任何信息。使用“早期绑定”这样做会创建一个循环引用。

您可以想象地反映加载到您的应用程序域中的所有程序集，并查看哪些程序集从某个类型继承，但是，您打算如何处理这些信息？可能有一种更简单、更快的方法来实现这一目标。

# forms - 在 magento Grid/From 中保存文件时出错

> ID：13285549
> 
> 赞同：0
> 
> 时间：2012-11-08T08:53:38.893
> 
> 标签：forms, magento, grid

我正在为我的**magento**管理模块开发一个新的网格，我已经在 From 中添加了这个字段来上传文件或图像：

```
$fieldset->addField('type_prev', 'file',
     array(
         'label' => 'Preview',
          'required' => false,
          'name' => 'type',
      )); 
```

但是在我的控制器中，当我尝试获取以下值时：

```
Zend_Debug::dump($_FILES['type_prev']); 
```

我得到了这个错误：注意：未定义的索引：type_prev ...

所有其他领域都运作良好！

这是我的表单声明：

```
 protected function _prepareForm()
    {
         $form = new Varien_Data_Form(
                array(
                  'id' => 'edit_form',
                  'action' => $this->getUrl('*/*/save', array('id' => $this->getRequest()->getParam('id'))
                     ),
                 'method' => 'post',
                 'enctype'   => 'multipart/form-data'
                 )
              );
      $form->setUseContainer(true);
      $this->setForm($form);
      return parent::_prepareForm();
   } 
```

你能帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:21:36.557

我只是将名称和 ID 更改为“预览”并且它有效！

```
$fieldset->addField('preview', 'file',
            array(
                'label' => 'Preview',
                'required' => false,
                'name' => 'preview', 
```

谢谢 ！));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:25:52.470

试试这个（使用 name 属性）：

```
Zend_Debug::dump($_FILES['type']); 
```

# ebay-api - 易趣 getOrders API

> ID：13285551
> 
> 赞同：1
> 
> 时间：2012-11-08T08:53:50.350
> 
> 标签：ebay-api

我正在构建一个 .net 服务以从 ebay 获取订单。我的服务运行良好，但是我不知道应该如何处理数据。

例如，我使用 CreateTimeTo 和 CreateTimeFrom 过滤器返回过去 24 小时的订单。我将它们保存到我的数据库中，现在有些订单没有返回地址信息。

我的问题是，将已导入的订单导入数据库的最佳方法是什么。例如，导入我的系统的订单没有发货信息，而客户在一周后完成了发货信息，我将如何在我的系统中更新该订单？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:51:11.510

我肯定会使用 modtimefrom modtimeto 过滤器。通过这种方式，您可以获得在上一个“x 间隔”中已修改的所有订单。这样，您将获得新订单和修改（结帐完成 - 付款 - 发货）等等。无论如何，我最喜欢的过滤器是 NumberOfDays。这个充当 ModTimeFrom/ModTimeTo 但更简单，您不必处理日期。

没有地址的订单意味着买家尚未完成结帐（未选择付款，因此也没有送货地址）。

一旦买家完成结账或订单被标记为已付款，整个地址将可用。

您可以通过调用 GetSellerTransaction 获取买家默认地址发货

我希望我能理解你的问题并有所帮助。

# jquery - 在 jQuery 中创建 HTML DOM

> ID：13285553
> 
> 赞同：0
> 
> 时间：2012-11-08T08:54:01.253
> 
> 标签：jquery

我有一个 HTML 页面，其中有页面和标题。现在我将页面内容和页面标题存储在 jQuery 变量中：

```
$content = jQuery('div p').find ('content').text();
$title = jQuery('div').find ('title').text(); 
```

现在我想创建一个 HTML DOM，例如：

```
<div class="enter-content">
  <h4>$title</h4>
  <p>$content</p>
</div> 
```

然后我想将这个 HTML DOM 存储在一个变量中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:02:38.230

您可以这样做，这只是一种替代方法，并且更易于管理。

```
var title = jQuery('div').find ('title').text();
var content = jQuery('div p').find ('content').text();

var HTML = new String("");
HTML += '<div class="enter-content">';
HTML += '<h4>##Title##</h4>';
HTML += '<p>##Content##</h4>';
HTML += '</div>';
HTML = HTML.replace(/##Title##/g, title);
HTML = HTML.replace(/##Content##/g, content); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:00:08.447

```
var yourDOM=$('<div class="enter-content"><h4>'+$title+'</h4><p>'+$content+'</p></div>'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:15:24.267

`$title`如果您期望并`$content`包含特殊字符（例如`<`），则通过连接构建 HTML 字符串不是一个好主意。一个安全的解决方案如下所示：

```
var div = $("<div class='enter-content'/>").append($("<h4/>").text($title)).append($("<p/>").text($content)); 
```

# soundcloud - 在 Soundcloud API 上使用流派过滤器

> ID：13285555
> 
> 赞同：1
> 
> 时间：2012-11-08T08:54:02.520
> 
> 标签：soundcloud

我在 Soundcloud API 上使用流派过滤器，代码：

```
$tracks = $client->get('tracks', array('genres' => 'punk')); 
```

它运行良好并返回所有朋克流派的曲目，但是当我尝试更改代码时：

```
$tracks = $client->get('tracks', array('genres' => 'rock')); 
```

它不能返回所有类型为摇滚的曲目。

我的问题是：我们在哪里可以从 Soundcloud 中找到正确的音乐流派？

也许 Soundcloud API 应该为我们提供一种获取常见流派列表的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:17:08.077

不幸的是，我们不提供检索流派列表的方法。[你可以在这里](https://www.google.com/search?q=get%20all%20genres%20soundcloud%20api&oq=get%20all%20genres%20soundcloud%20api&sugexp=chrome,mod=0&sourceid=chrome&ie=UTF-8#hl=en&newwindow=1&safe=off&tbo=d&sclient=psy-ab&q=site%3agroups.google.com%20get%20all%20genres%20soundcloud%20api&oq=site%3agroups.google.com%20get%20all%20genres%20soundcloud%20api&gs_l=serp.3...4339.11035.0.11397.31.27.4.0.0.19.302.5517.0j13j13j1.27.0.les;..0.0...1c.1.22juihcs3XA&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=f3be7966d981f367&bpcl=37643589&biw=1440&bih=733)查看讨论。

请测试这个链接，它似乎对我有用：[http ://api.soundcloud.com/tracks?genres=rock&client_id=YOUR_CLIENT_ID](http://api.soundcloud.com/tracks?genres=rock&client_id=YOUR_CLIENT_ID)

如果问题出在特定的 SDK 上，请立即告诉我们，以便我们进行调查。

# scala - 我怎样才能加入开始的演员？

> ID：13285559
> 
> 赞同：0
> 
> 时间：2012-11-08T08:54:14.753
> 
> 标签：scala

开始演员后

```
val a = actor {
  loop {
    react {
      case "end" => exit
      ...
    }
  }
} 
```

并向其发送“结束”消息

```
a ! "end" 
```

我想确保线程完成。怎么可能加入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:10:00.580

据我所知，不能像 Java 方式那样明确地加入演员。这个概念是引入基于事件的编程，所以它应该只对事件做出反应。但是，您可以设置出口并通过 . 将初始演员 (A) 链接到结束演员 (B) `link`。这样，当 B 结束时，初始参与者 A 会收到一个事件。如果你没有收到任何事件，你就知道演员没有终止。请参阅此处的线程：[https ://stackoverflow.com/a/4304602/999865](https://stackoverflow.com/a/4304602/999865)

如果您不关心资源并且*知道*线程将终止，您也可以让参与者继承自`DaemonActor`. 守护进程不会阻塞任何系统资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:16:07.987

在我看来，做你想做的事情的“演员方式”实际上是让你的演员回复请求者的消息“完成”，所以它可以采取行动。这样它仍然是异步事件处理

# http - 如何从 HttpResponseMessage 获取当前的 cookie/会话 ID？

> ID：13285560
> 
> 赞同：3
> 
> 时间：2012-11-08T08:54:23.500
> 
> 标签：http, asp.net-web-api, .net-4.5, system.net.httpwebrequest

我尝试使用来自 System.net.http 的新 .net 4.5 HttpClient。

我这样设置我的客户

```
CookieContainer cookieJar = new CookieContainer();
         HttpClientHandler handler = new HttpClientHandler
         {
             CookieContainer = cookieJar,
             AllowAutoRedirect = true
         };
         handler.UseCookies = true;
         handler.UseDefaultCredentials = false;

         HttpClient client = new HttpClient(handler as HttpMessageHandler); 
```

然后我做一个`client.GetAsync(url)`

现在我正在检查响应并尝试获取下一篇文章的 cookie/会话值。

我尝试通过代码测试现有页面的登录场景......

如何在响应中获取 cookie 信息？还是我在这里走错了路？任何解释都会很棒......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-27T19:36:47.750

cookie 以标头的形式存在，该标头是在客户端上创建 cookie 的指令。这些标头具有“Set-Cookie”形式作为实际标头，其值为“CookieTitle={form encoding value}”。获取该 cookie 如下所示：

```
var cookieTitle = "MyCookieTitle";

var response = ... // get response object
var cookie = response.Headers.GetValues("Set-Cookie").First(x => x.StartsWith(cookieTitle)); 
```

这将为您提供标头的原始字符串，如下所示：

```
CookieTitle=this+is+the+value+of+the+cookie 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T15:53:52.093

您无需获取 cookie 并为您的下一个 POST 重新指定它们。HttpClient 会为你做这件事。

只要您发布到的 URL 在 cookie 定义的路径内，cookie 就会自动随请求一起重新发送。

例如，如果您像这样创建 cookie，

```
 public class CookieController : ApiController
    {
        public HttpResponseMessage Get() {
            var httpResponseMessage = new HttpResponseMessage();
            var cookieHeaderValues = new List<CookieHeaderValue>();
            cookieHeaderValues.Add(new CookieHeaderValue("foo","bar") 
                                         {Domain = "myhost",Path = "/"});
            httpResponseMessage.Headers.AddCookies(cookieHeaderValues);
            return  httpResponseMessage;
        }
    } 
```

对以下任何 URL 的任何请求都`http://myhost/` 将自动发送到此 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:20:15.693

您可以检查 HTTP 响应的“Set-Cookie”标头。

# cruisecontrol.net - 从 stylecop 检查中排除文件

> ID：13285566
> 
> 赞同：5
> 
> 时间：2012-11-08T08:54:48.603
> 
> 标签：cruisecontrol.net, nant, stylecop

我想从 stylecop 检查中排除 /Properties/AssemblyInfo.cs。我们可以这样做吗？问题是我已经将 stylecop 与 nant 集成在一起。在 nant 中，我正在标记产品版本，因此来自 Assembly info 的信息会发生变化，并在 nant 电子邮件中发出警告。我正在使用 stylecopcmd 进行 nant 集成。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T20:02:07.497

有几种方法可以做到这一点。推荐的方法是使用[文件列表](http://stylecop.codeplex.com/wikipage?title=Using%20File%20Lists&referringTitle=Documentation)。这是一个例子：

```
<StyleCopSettings Version="4.3">
  <SourceFileList>
    <SourceFile>AssemblyInfo.cs</SourceFile>
    <Settings>
    <GlobalSettings>
      <BooleanProperty Name="RulesEnabledByDefault">False</BooleanProperty>
    </GlobalSettings>
    </Settings>
  </SourceFileList>
</StyleCopSettings> 
```

或者，您可以使用[此处](http://stylecop.codeplex.com/wikipage?title=Using%20StyleCop%20on%20Legacy%20Projects&referringTitle=Documentation)`ExcludeFromStyleCop`记录的项目文件中的设置：

```
<Compile Include="AssemblyInfo.cs"> 
  <ExcludeFromStyleCop>true</ExcludeFromStyleCop> 
</Compile> 
```

# ruby-on-rails - Rails 3.2 bootstrap-sass 未安装

> ID：13285568
> 
> 赞同：4
> 
> 时间：2012-11-08T08:55:06.833
> 
> 标签：ruby-on-rails, twitter-bootstrap, ruby-on-rails-3.2, sass, bootstrap-sass

我正在尝试在我的 Rails 3.2 应用程序上安装 bootstrap-sass gem，但在调用时遇到此错误`compass install bootstrap`：

没有这样的框架：“引导程序”

我在我的 Gemfile 中安装了 gem：

```
gem 'compass', '~> 0.12.2'
group :assets do
  ...
  gem 'sass-rails', '~> 3.2.4'
  gem 'compass-rails', '~> 1.0.3'
  gem 'bootstrap-sass', '~> 2.1.1.0'
end 
```

我已将 import 语句放入我的 application.css.scss 文件中：

```
@import "bootstrap"; 
```

我的 application.js 中需要引导程序：

```
//= require jquery
//= require jquery_ujs
//= require bootstrap
... 
```

我在我的 config.ru 文件中需要 bootstrap-sass：

```
require 'bootstrap-sass'

require ::File.expand_path('../config/environment',  __FILE__)

run MYAPP::Application 
```

任何人都知道问题可能是什么，或者遇到了同样的问题？

这是 bootstrap-sass 的 git：[https ://github.com/thomas-mcdonald/bootstrap-sass.git](https://github.com/thomas-mcdonald/bootstrap-sass.git)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-11T00:14:30.780

bootstrap-sass 没有很好的文档记录，我需要一些时间来解决问题。忘掉指南针吧。宝石文件：

> ```
> gem 'bootstrap-sass', '~> 2.1.1.0'
> gem 'bootswatch-rails' 
> ```

使用 bootswatch-rails gem 可以快速改变你的主题

在资产/样式表中，创建一个 your_own_sytlesheet.css.scss

> ```
>  @import "bootswatch/cerulean/variables";
> 
> // Then bootstrap itself
> @import "bootstrap";
> 
> // Bootstrap body padding for fixed navbar
> body { padding-top: 60px; }
> 
> // Responsive styles go here in case you want them
> @import "bootstrap-responsive";
> 
> // And finally bootswatch style itself
> @import "bootswatch/cerulean/bootswatch";
> 
> // Whatever application styles you have go last
> //@import "base"; 
> ```

您可以通过将 cerulean 替换为其他名称来轻松更改主题。

至少它现在对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T21:47:13.167

弄清楚了...

所以为了让安装工作，我不得不打电话给`bundle exec compass install bootstrap`. 这`compass install bootstrap`在包含所有 gem 的包的上下文中执行。然而，这又引发了一些问题。

安装将几个新的引导 javascript 文件写入我的 assets/javascripts 目录。在 Rails 3.2 中，这些是由资产管道自动加载的，但是顺序错误，所以在我的浏览器控制台中，我收到了缺少构造函数的错误消息，并在未定义的对象上调用了“popover”。在挖掘之后，解决方案只是删除所有新生成的 javascript 文件，因为它们已经包含`//= require bootstrap`在 application.js 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:51:00.933

你不需要宝石。只需将引导库（scss 和 js 文件）复制到您的资产。确保在 @import 'bootstrap' 之前的 application.css.scss 中没有更多文本；并且不需要编辑 config.ru 文件

还要查看您的页面代码。application.css 中显示什么？您是否在 ApplicationController 的控制器继承中使用了用户？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T11:01:48.610

在您的 gem 文件中，尝试将引导 gem 保留在资产之外。

**源 'https://rubygems.org'

gem 'rails', '3.2.8'
gem 'bootstrap-sass', '2.1.1'** 

然后运行命令

**$捆绑安装。**

然后检查并确保使用命令安装了引导程序。

**$捆绑列表**

# c - free() 失败

> ID：13285571
> 
> 赞同：2
> 
> 时间：2012-11-08T08:55:15.790
> 
> 标签：c, memory-management, calloc

如果我像这样在循环中分配内存

```
for(file = 0; file < nfile; file++){
...
...
...
   for(yy = 0; yy < ngridy; yy++){
      for(xx = 0; xx < ngridx; xx++) {
         tmparr1[xx+(ngridx*yy)] = (double *)calloc(nptperf[file], sizeof(double));
         tmparr2[xx+(ngridx*yy)] = (double *)calloc(nptperf[file], sizeof(double));
      }
   } 
```

稍后在代码中的某个时候，我会像这样释放内存：

```
for(yy = 0; yy < ngridy; yy++){
    for(xx = 0; xx < ngridx; xx++) {
       free(tmparr1[xx+(ngridx*yy)]);
       free(tmparr2[xx+(ngridx*yy)]);
    }
} 
```

是否有可能`free()`不释放内存并因此导致分配更多内存？我在每个`file`循环中分配和释放一次内存。此外，`nptperf[file]`通常在 1-3 百万点左右，并且`ngridx = ngridy = 100`.

该程序适用于`ngridx = ngridy = 80`和更少，但在`100`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:59:08.707

您在循环体内使用了错误的变量（`gg`and`ggy`而不是`xx`and `yy`）。除其他问题外，这会导致（几乎）所有分配的内存泄漏，因为您丢失了`calloc()`ed 指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:21:03.483

有两种可能：

1.  `free()`可能会失败，这意味着您没有释放您使用的内存（您的问题）
2.  你的程序有一个错误，你没有释放你使用的内存，你正在泄漏内存。

第一个不太可能发生，我不知道`free()`如果使用得当会失败的任何情况。如果传递了正确的指针，则该内存将被释放，如果传递`NULL`，它将什么也不做。

第二个更有可能发生，但在上面的代码片段中它看起来没问题。如上所述，您可以使用[Valgrind](http://en.wikipedia.org/wiki/Valgrind) (/ˈvælɡrɪnd/) 检查是否出现问题。[编译](http://valgrind.org/docs/manual/quick-start.html#quick-start.intro) `-O0 -ggdb`并让 Valgrind 检查分配和释放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T08:58:23.403

用你的程序运行一个像[**Valgrind**](http://valgrind.org/)这样的工具，看看你是否泄漏了任何内存。从您发布的代码来看，您似乎没有泄漏内存。但是使用 Valgrind 将证实这一点，并且它还可以指出可能存在的其他问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T01:55:42.567

程序可能内存不足，calloc 返回 null，随后内存损坏并最终被杀死。

我建议检查 calloc 的返回值，而不是假设它成功了。

如果程序需要大量内存，请确保有足够的交换空间来处理需求。请记住，系统上可能还有其他应用程序正在运行。

另一种选择是分而治之。一种可能性是将其变成在多台机器上运行的分布式应用程序。在不知道应用程序的其余部分做什么的情况下，这可能可行，也可能不可行。

# oracle - BI Publisher flash 模板中未加载数据 - 错误 #2032

> ID：13285586
> 
> 赞同：0
> 
> 时间：2012-11-08T08:56:14.077
> 
> 标签：oracle, oracle10g, flash-builder, bi-publisher

我用一级 XML 数据创建了一个简单的报告，并遵循了 oracle 教程[http://docs.oracle.com/cd/E10383_01/doc/bip.1013/e10416/flashtemp.htm中的所有指南](http://docs.oracle.com/cd/E10383_01/doc/bip.1013/e10416/flashtemp.htm)

当我从 Flash Builder 运行应用程序时，它运行良好，是教程中的简单数据网格但是当我将 swf 文件上传到发布者中的 flash 模板时，它无法运行并出现错误#2032，我已经搜索并搜索了任何错误的线索！没有教程或帮助是有用的。

这是我的 flex 应用程序源代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" minWidth="955" minHeight="600">
    <mx:Script>
        <![CDATA[
            [Bindable]
            public var dataXML:XML = 
                <ROWSET>
                <ROW>
                <ACCOUNT_NUMBER>999222111</ACCOUNT_NUMBER>
                <CURR_CODE>USD</CURR_CODE>
                <INSTALLMENT_AMOUNT_LC>8840</INSTALLMENT_AMOUNT_LC>
                </ROW>
                </ROWSET>;
        ]]>
    </mx:Script>
    <mx:Panel left="10" top="10" width="477" height="267" layout="absolute">
        <mx:DataGrid left="0" right="1" top="0" bottom="10" dataProvider="{dataXML.ROW}"
                     horizontalCenter="-1">
            <mx:columns>
                <mx:DataGridColumn dataField="ACCOUNT_NUMBER" headerText="Account Number"/>
                <mx:DataGridColumn dataField="CURR_CODE" headerText="Currency Code"/>
                <mx:DataGridColumn dataField="INSTALLMENT_AMOUNT_LC" headerText="Instalment Amount"/>
            </mx:columns>
        </mx:DataGrid>
    </mx:Panel> 
```

我不知道代码有什么问题！或者是什么导致了错误，BI 或 swf 文件。

谁能帮我 ？

我使用 Oracle 10g 和 Flash builder 4.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:08:46.443

经过大量搜索后，我得出的结果是，没有解决方案可以将使用 Flex Builder 4.6 构建的报表与我所知道的**Oracle 10g BI Publisher 链接起来。**

但是当我降级到 Flex Builder 2.0 时，它对我有用，当报表在 Oracle BI Publisher 中运行时，我现在能够看到使用此版本 Flex 构建的 flash 模板中的数据，而无需更改任何代码上面的问题。

我相信这是 Oracle 10g 与其 BI Publisher 以及 Adob​​e 的 Flex Builder 新版本之间的向后兼容性问题。

# java - Tomcat 不读取 web.xml 文件

> ID：13285587
> 
> 赞同：0
> 
> 时间：2012-11-08T08:56:19.520
> 
> 标签：java, servlets

我的结构就像

> *   网页内容
>     *   元信息
>     *   网络信息
>         *   jsp
>             *   索引.jsp
>     *   web.xml

文件`web.xml`尽可能简单

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN"
    "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">

<web-app>
  <display-name>servlets</display-name>
  <welcome-file-list>
    <welcome-file>WEB-INF/jsp/index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

但是当我在浏览器中使用 eclipse 执行它时，我得到了`404 error`，但是当我将 index.jsp 移动到根目录时它工作正常。

编辑：更改后

> jsp
> 
> --index.jsp
> 
> 元信息
> 
> 网络信息
> 
> --web.xml

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE web-app
    PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.2//EN"
    "http://java.sun.com/j2ee/dtds/web-app_2_2.dtd">

<web-app>
  <display-name>servlets</display-name>
  <welcome-file-list>
    <welcome-file>jsp/index.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

**解决方案**

我发现编译时我的 Tomcat 服务器没有重新启动。现在，当我每次编译 servlet 时，tomcat 都重新启动它可以工作。

谢谢你的病人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:02:44.030

您不能直接访问 WEB-INF 中的文件，这只能通过 servlet 而不是您。

该目录（WEB-INF）包含所有与应用程序相关但不在应用程序文档根目录中的资源。这是您的 Web 应用程序部署描述符所在的位置。请注意，WEB-INF 目录不是公共文档的一部分。此目录中包含的任何文件都不能直接提供给客户端。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T08:57:52.013

`web.xml`必须立即在内部`WEB-INF`（也不在 的子目录中`WEB-INF`）

也尝试改变这个

`<welcome-file>WEB-INF/jsp/index.jsp</welcome-file>`

至

`<welcome-file>jsp/index.jsp</welcome-file>`

更新：

根据您的新目录结构，您的`<welcome-file>`标签应为：

`<welcome-file>jsp/index.jsp</welcome-file>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:07:21.063

首先

`web.xml`应该在里面`web-inf`

第二

您的路径`index.jsp`不正确`web.xml`。

根据您的目录结构，`index.jsp`在里面`webcontent\jsp\indiex.jsp`为什么要使用路径`web-inf\jsp\index.jsp`

根据您的`current`目录结构，它应该是`.\jsp\indiex.jsp`

更新：OP 已更新目录结构。

你不应该把 jsps 放在 WEB-INF 中，你应该把 jsps 放在 webcontent和`web.xml`. `WEB-INF`重新组织您的目录结构。把`web.xml`里面`web-inf`和`jsp`文件夹放在里面，`webcontent`然后`web.xml`把欢迎jsp的路径放在里面`jsp\index.jsp`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:00:18.347

当您的 URL 不正确时会出现 404 错误。

检查 URL 是否正确。根据您的目录结构，您的 URL 应该是这样的：**localhost:8080/jsp/index.jsp**

还要确保 web.xml 在 WEB-INF 目录中。

# text - 从 uiwebview Xcode 中获取选定的文本

> ID：13285589
> 
> 赞同：5
> 
> 时间：2012-11-08T08:56:26.973
> 
> 标签：text, uiwebview, xcode4.3

我有一个`UIWebView`从`htmlString`. 我需要当用户选择文本的一部分并按下按钮时，我将能够提取它以便在其他地方使用它，所以我使用这个代码：

```
 // The JS File   
NSString *filePath  = [[NSBundle mainBundle] pathForResource:@"HighlightedString" ofType:@"js" inDirectory:@""];
NSData *fileData    = [NSData dataWithContentsOfFile:filePath];
NSString *jsString  = [[NSMutableString alloc] initWithData:fileData encoding:NSUTF8StringEncoding];
[WebV2 stringByEvaluatingJavaScriptFromString:jsString];

// The JS Function
NSString *startSearch   = [NSString stringWithFormat:@"getHighlightedString()"];
[WebV2 stringByEvaluatingJavaScriptFromString:startSearch];

NSString *selectedText   = [NSString stringWithFormat:@"selectedText"];
NSString * highlightedString = [WebV2 stringByEvaluatingJavaScriptFromString:selectedText];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Highlighted String" 
                                                message:highlightedString
                                               delegate:nil 
                                      cancelButtonTitle:@"Oh Yeah" 
                                      otherButtonTitles:nil];
[alert show]; 
```

连同`HighlightedString.js`：

```
/*!
 ------------------------------------------------------------------------ 
 // Search Highlighted String
 ------------------------------------------------------------------------ 
 */
var selectedText = "";

function getHighlightedString() {
    var text        = window.getSelection();
    selectedText    = text.anchorNode.textContent.substr(text.anchorOffset, text.focusOffset - text.anchorOffset);

}

// ...
function stylizeHighlightedString() {

    var range               = window.getSelection().getRangeAt(0);
    var selectionContents   = range.extractContents();
    var span                = document.createElement("span");

    span.appendChild(selectionContents);

    span.setAttribute("class","uiWebviewHighlight");
    span.style.backgroundColor  = "black";
    span.style.color            = "white";

    range.insertNode(span);
}

// helper function, recursively removes the highlights in elements and their childs
function uiWebview_RemoveAllHighlightsForElement(element) {
    if (element) {
        if (element.nodeType == 1) {
            if (element.getAttribute("class") == "uiWebviewHighlight") {
                var text = element.removeChild(element.firstChild);
                element.parentNode.insertBefore(text,element);
                element.parentNode.removeChild(element);
                return true;
            } else {
                var normalize = false;
                for (var i=element.childNodes.length-1; i>=0; i--) {
                    if (uiWebview_RemoveAllHighlightsForElement(element.childNodes[i])) {
                        normalize = true;
                    }
                }
                if (normalize) {
                    element.normalize();
                }
            }
        }
    }
    return false;
}

// the main entry point to remove the highlights
function uiWebview_RemoveAllHighlights() {
    selectedText = "";
    uiWebview_RemoveAllHighlightsForElement(document.body);
} 
```

结果我总是一无所获......警报视图什么也没显示......这段代码有什么问题？有什么帮助吗？有任何想法吗 ？这将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T07:00:04.583

解决方案实际上非常简单，不需要上面的所有代码！对于任何未来的用户，只需使用：

```
 NSString *textToSpeech = [WebV2 stringByEvaluatingJavaScriptFromString: @"window.getSelection().toString()"];
 NSLog(@" -**-*--****-*---**--*-* This is the new select text %@",[WebV2 stringByEvaluatingJavaScriptFromString: @"window.getSelection().toString()"] ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T01:28:33.610

```
NSString *theSelectedText = [self.webView stringByEvaluatingJavaScriptFromString:@"window.getSelection().toString()"]; 
```

这会将您的选择传递给字符串变量。

# javascript - 如何在执行悬停功能之前添加等待时间

> ID：13285593
> 
> 赞同：2
> 
> 时间：2012-11-08T08:56:39.260
> 
> 标签：javascript, jquery, hover, settimeout, jquery-hover

我正在处理一个嵌套菜单，当我的鼠标移到一个选项上时，会出现一个子列表。这是我的悬停功能：

```
$( ".sublist" ).parent().hover( function () {
    $(this).toggleClass("li_hover",300); //use to change the background color
    $(this).find(".sublist").toggle("slide", {}, 500); //sub list show / hide
}); 
```

现在，我想在子列表出现之前添加一小段时间，以防止疯狂的鼠标从用户身上移动。有人对此有什么好的建议吗？

* * *

更新：

谢谢你们，我对我的程序做了一点改动，最近它看起来像这样：

```
function doSomething_hover (ele) {
    ele.toggleClass("li_hover",300);
    ele.find(".sublist").toggle("slide", {}, 500);
}

$(function () {
    $( ".sublist" ).parent().hover( function () {
        setTimeout(doSomething_hover($(this)), 3000);
    });
}): 
```

这很奇怪 setTimeout 不会延迟任何事情。但是如果我将函数调用更改为`doSomething_hover`（不带“（）”），该函数将延迟良好。但我不能将任何 jquery 元素传递给函数，所以它仍然无法正常工作，有人可以告诉我如何`doSomething_hover($(this))`工作`setTimeout`吗？

* * *

更新 2：得到了 setTimeout 的工作，但它似乎不是我想要的：我真正想要的是什么都不会发生，如果鼠标悬停在小于 0.5 秒的选项上。

无论如何，这是我让 setTimeout 工作的代码：

```
function doSomething_hover (ele) {
    ele.toggleClass("li_hover",300);
    ele.find(".sublist").toggle("slide", {}, 500);
}

$(function () {
    $( ".sublist" ).parent().hover( function () {
        var e = $(this);
        setTimeout(function () { doSomething_hover(e); }, 1000);
    });
}): 
```

* * *

最终更新：当我将鼠标移出时，我使用 clearTimeout 完成了这项工作。所以代码应该是：

```
 $( ".sublist" ).parent().mouseover( function () {
        var e = $(this);
        this.timer = setTimeout(function () { doSomething_hover(e); }, 500);
    });

    $( ".sublist" ).parent().mouseout ( function () {
        if(this.timer){
            clearTimeout(this.timer);
        }
        if($(this).hasClass("li_hover")){
            $(this).toggleClass("li_hover");
        }
        $(this).find(".sublist").hide("slide", {}, 500);

    }); 
```

这是`$(document).ready()`. 其他代码将与上述相同。

* * *

真的。最终更新：所以，`mouseover`有时`mouseout`会导致错误，因为当我将鼠标移动到子列表时，父母的`mouseover`事件将被触发，并隐藏子列表。问题可以通过使用`hover`函数来解决：

```
 $( ".sublist" ).parent().hover( 
        function () {
            var e = $(this);
            this.timer = setTimeout(function () { doSomething_hover(e); }, 500);
        },
        function () {
            if(this.timer){
                clearTimeout(this.timer);
            }
            $(this).find(".sublist").hide("slide", {}, 500);
            if($(this).hasClass("li_hover")){
                $(this).toggleClass("li_hover",300);
            }
        }
    ); 
```

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:02:02.727

```
timeout = setTimeout('timeout_trigger()', 3000);
clearTimeout(timeout);

jQuery(document).ready(function () {
//hide a div after 3 seconds
setTimeout( "jQuery('#div').hide();",3000 );
}); 
```

参考 [链接](http://www.jquery4u.com/jquery-functions/settimeout-example/)

```
function hover () {
$( ".sublist" ).parent().hover( function () {
$(this).toggleClass("li_hover",300); //use to change the background color
$(this).find(".sublist").toggle("slide", {}, 500); //sub list show / hide
});
}
setTimeout( hover,3000 ); 
```

……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:02:57.717

请试试这个：

**代码**

```
setInterval(doSomthing_hover, 1000);

function doSomthing_hover() {
    $(".sublist").parent().hover(function() {

        $(this).toggleClass("li_hover", 300); //use to change the background color
        $(this).find(".sublist").toggle("slide", {}, 500); //sub list show / hide
    });

}​ 
```

**SetTime 与 setInterval**

At a fundamental level it's important to understand how JavaScript timers work. Often times they behave unintuitively because of the single thread which they are in. Let's start by examining the three functions to which we have access that can construct and manipulate timers.

var id = `setTimeout(fn, delay);` - Initiates a single timer which will call the specified function after the delay. The function returns a unique ID with which the timer can be canceled at a later time.

var id = `setInterval(fn, delay);` - Similar to setTimeout but continually calls the function (with a delay every time) until it is canceled.

`clearInterval(id);`, `clearTimeout(id);` - Accepts a timer ID (returned by either of the aforementioned functions) and stops the timer callback from occurring.

In order to understand how the timers work internally there's one important concept that needs to be explored: timer delay is not guaranteed. Since all JavaScript in a browser executes on a single thread asynchronous events (such as mouse clicks and timers) are only run when there's been an opening in the execution.

*Further read this:* [http://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T08:58:28.793

你可以使用`.setTimeout`

```
$(".sublist").parent().hover(function() {
    setTimeout(function() {
        $(this).toggleClass("li_hover", 300); //use to change the background color
        $(this).find(".sublist").toggle("slide", {}, 500); //sub list show / hide
    }, 1000);
});​ 
```

# background - 在 Specflow 的功能文件中使用挂钩

> ID：13285594
> 
> 赞同：3
> 
> 时间：2012-11-08T08:56:48.803
> 
> 标签：background, hook, specflow, scenarios

让我在 TestRun、Feature、Scenario 或 Step 级别执行某些操作。我知道我们可以使用 Hooks。我想知道的是，当我编写规范时，如何将这些写入功能文件中。

根据我的理解，我可以使用 Backgroud 编写一些通用的东西，这些东西要在所有场景之前在功能中运行。然而，它建议我们不应该在背景部分有长列表。另外，如果我有一些对于测试运行很常见的东西或多个功能，我可以使用标签将它们分组，是否有任何语法可以用来编写它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T08:37:45.810

钩子实现不能在特性文件中用 Gherkin 表示，它们必须在步骤实现文件中实现：

使用标签 @foo 标记场景和/或功能，并在使用 [Binding] 属性装饰的某些类中，使用钩子属性注释方法，例如 [BeforeTestRun("foo")]。

更多信息和可用的钩子可以[在 specflow wiki](https://github.com/techtalk/SpecFlow/wiki/Hooks)中找到。

如果您担心在后台有很长的步骤列表，那么这些步骤可能过于冗长，您可以考虑将它们合并到一个步骤中。如果您需要为测试运行中的所有测试做一些事情，也许无论如何在功能中提及它并不重要，因此它可以像上面描述的那样放在一个步骤实现文件中。

# c# - 如何在 c# 代码的消息框中将字符串变量的字体颜色设为红色？

> ID：13285598
> 
> 赞同：1
> 
> 时间：2012-11-08T08:57:12.560
> 
> 标签：c#, winforms

我有这个代码

```
public static bool Delete(int ID, string ProductName)
    {
        if (MessageBox.Show(productName + " will be deleted Permanently ", "Confirm Delete Option", MessageBoxButtons.YesNo, MessageBoxIcon.Warning) == DialogResult.No)
            {
                return false;
            }
        {
            return true;
        } 
    } 
```

我需要的是在红色下方的消息框中制作**产品名称**

```
if (MessageBox.Show(productName + " will be deleted Permanently " 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T09:12:02.867

您必须为此创建自己的表单。在那里你创建一个标签并定义你的字体。之后，您可以定义您的`no`和`yes`按钮。

```
private void No_button_Click(object sender, EventArgs e)
{
    this.DialogResult = DialogResult.No;
    this.Close();
    this.Close();
} 
```

按钮也是`yes`如此 创建您自己的表单还有许多其他优点，例如定义位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T08:59:58.030

MessageBox 无法做到这一点。

您需要使用您喜欢的布局定义自己的表单，然后以模态方式显示它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T10:52:42.697

您将需要制作自己的 MessageBox 来实现这一点。[这很简单，只需创建一个表单，然后使用 Visual Designer 或 System.Drawing.Color = http://msdn.microsoft.com/en-us/library/system.drawing.color.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.color.aspx)更改前景色

# objective-c - Objective c 缩放和相对定位：数学

> ID：13285603
> 
> 赞同：0
> 
> 时间：2012-11-08T08:57:19.347
> 
> 标签：objective-c, math, zooming

我有一个 UIScroll 视图，它有一个 UIImageView。
我已经编写了缩放代码。

现在假设我的标签在
0,10
10,10

对于初始大小的图像。
但是当图像放大时，这些标签仍然保留在同一个位置。我希望标签在放大和缩小时移动到正确的位置。

这怎么可能实现。
假设在原点 0,0 有一个 10x10 的正方形，
我在 0,10 和 10,10 有一个标签

现在，当我们放大到 2 倍时，正方形的大小是 20x20，所以我希望标签位于 0,20 和 20,20。

我希望我的疑问现在清楚了。

# java - 文本文件到图像的转换

> ID：13285609
> 
> 赞同：0
> 
> 时间：2012-11-08T08:57:43.950
> 
> 标签：java, image, javax.imageio

我有一个字符串，我将其转换为 bytes[] 然后我将其编码为图像，但问题是它没有将其创建回图像

```
 BufferedReader reader2 = new BufferedReader(new FileReader("e:\\imageinString.txt"));
    String buffer, lined = "";

    while ((buffer = reader2.readLine()) != null) {
        lined = lined + buffer;
    }

    byte[] byteArray = lined.getBytes("UTF-16");

    InputStream in = new ByteArrayInputStream(byteArray);
    BufferedImage bImageFromConvert = ImageIO.read(in);

    ImageIO.write(bImageFromConvert, "bmp", new File("e:\\ppp.bmp"));
    reader2.close(); 
```

我收到此错误，但我在控制台上收到此错误

```
 Exception in thread "main" java.lang.IllegalArgumentException: image == null!
at javax.imageio.ImageTypeSpecifier.createFromRenderedImage(ImageTypeSpecifier.java:925)
at javax.imageio.ImageIO.getWriter(ImageIO.java:1591)
at javax.imageio.ImageIO.write(ImageIO.java:1520)
at imagereading.Imagereading.main(Imagereading.java:47) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:07:45.063

这将对您有所帮助。

```
BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_3BYTE_BGR);
Graphics2D g2 = image.createGraphics();
g2.drawString(s, x, y);
...
g2.dispose();
ImageIO.write(image, "jpg", file); 
```

或者，如果您更喜欢导出为 png，那么您可以拥有支持透明度的图像。

```
BufferedImage image = new BufferedImage(width, height, BufferedImage.TYPE_4BYTE_ABGR); 
```

# asp.net-mvc - 跨域传递承载令牌以及如何将它们注入 WIF 管道

> ID：13285610
> 
> 赞同：0
> 
> 时间：2012-11-08T08:57:49.300
> 
> 标签：asp.net-mvc, asp.net-web-api, wif, claims-based-identity

我一直在为我们的服务和网站实现一个基于声明的骨架架构。我正在使用 WIF、.NET 4.5、MVC / Web Api。

我已经实施了 STS（WS-Federation / WS-Trust）和几个依赖方，并且一切正常。

现在，我希望能够在一个依赖方中进行身份验证并使用相同的令牌（我假设是引导令牌）对另一个依赖方进行 Ajax 调用。我可以在 HTML 中获取引导令牌（这甚至是个好主意吗？），并将其作为某种形式的身份验证（基本等）添加到 Ajax 调用标头中。

我不知道如何在最终依赖方中拦截请求，并“告诉”WIF 使用该引导令牌并使用它来做魔术（加载、验证、身份验证、授权、创建主体、创建会话令牌，把它写在锅里）。

我想我可以使用可用的类手动完成所有这些，但必须有一点我可以为此而挂钩。可能围绕 SAM / FAM 模块，但我无法确切了解如何。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:49:44.067

SAML 不适合在 html 中使用。格式很复杂，并且过于依赖 WS-Security 进行加密。这些天，我看到更多采用 OAuth2（过去是 OAuth-Wrap），尽管也很复杂。如果您想探索这条路，我推荐 ThinkTecture Identity Server 作为快速解决方案。

[http://weblogs.thinktecture.com/cweyer/2012/11/oauth2-in-thinktecture-identityserver-v2-implicit-grant-flow-with-javascript.html](http://weblogs.thinktecture.com/cweyer/2012/11/oauth2-in-thinktecture-identityserver-v2-implicit-grant-flow-with-javascript.html)

谢谢巴勃罗。

# php - PHP 一旦表单值保存显示弹出窗口

> ID：13285617
> 
> 赞同：0
> 
> 时间：2012-11-08T08:58:23.043
> 
> 标签：php, javascript

我是 PHP 新手。

我的要求是一旦表单值保存到 mysql 数据库中，它需要将输入的值显示到弹出窗口中。

我做了这部分。问题总是打开新标签并显示细节。它没有打开弹出窗口。

```
 <?php

error_reporting(E_ALL);
ini_set('display_errors', 'On');
//echo '<pre>';
//echo print_r($_POST);
//echo '</pre>';

$message = "";
$firstname ="";
$lastname = "";
$email = "";
$mobile = "";
$nic = "";
$msg ="";
$genrateID = "";

if ( isset ( $_POST['Submit'] ) ){
    $firstname = $_POST['firstname'];
    $lastname = $_POST['lastname'];
    $email = $_POST['email'];
    $mobile = $_POST['mobile'];
    $nic = $_POST['nic'];

    if($firstname ==''){
        $message .= "Enter firstname";
    }else if($lastname ==''){
        $message .= "Enter lastname";
    }else if($email==''){
        $message = "Enter email address";
    }else if(!is_valid_email($email)){
        $message .= "Enter valid email address";
    }else if($mobile==''){
        $message = "Enter email address";
    }else if(!is_valid_phone($email)){
        $message .= "Enter valid email address";
    }else if($nic==''){
        $message = "Enter nic number";
    }else if(!is_valid_nic($nic)){
        $message .= "Enter valid nic address";

    }else{
        if(empty($message)){
             $con = mysql_connect("192.168.1.5","root","root");
             if (!$con){
                die('Could not connect: ' . mysql_error());
                exit;
             }
             mysql_select_db("customerinfo", $con);
             $genrateID =uniqid (rand(), true);
             // mysql_query("INSERT INTO customerinfo (firstname ,lastname,email,mobile,nic) VALUES ('$firstname', '$lastname','$email','$mobile','$nic')" ) or die(mysql_error());
             $status = mysql_query("INSERT INTO customer (firstname ,lastname,email,mobile,nic,customerID)
             VALUES ('$firstname', '$lastname','$email','$mobile','$nic','$genrateID')");
            if($status =='1'){
                $msg ="Data has been saved successfully";

 $link = "<script>window.open('http://localhost/UserCRM/result.php?firstname=$firstname&lastname=$lastname&mobile=$mobile&email=$email&id=$genrateID','menubar=no,width=430,height=360,toolbar=no')</script>";
                echo $link;
                $message = "";
                $firstname ="";
                $lastname = "";
                $email = "";
                $mobile = "";
                $nic = "";
                $genrateID ="";
               // $msg ="";

            }else{
                $msg = "Data has been saved unsuccessfully!!";
            }
            mysql_close($con);
        }

    }
}

?> 
```

我的表格是：

```
 <form id="form" method="post" action="index.php" style="width:700px;" >..... </form> 
```

请指出我的代码有什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T19:01:18.950

问题是 Firefox 默认在新选项卡而不是新窗口中打开 URL。有关更多信息，请参阅[此问题](https://stackoverflow.com/questions/726761/javascript-open-in-a-new-window-not-tab)。提供窗口名称对我有用（firefox 16.0.2 linux）。

```
window.open('http://stackoverflow.com', 'new window', 'menubar=no, width=430, height=360, toolbar=no'); 
```

# java - Java GridBagLayout - 如何无间隙地一一定位我的组件？

> ID：13285619
> 
> 赞同：1
> 
> 时间：2012-11-08T08:58:24.247
> 
> 标签：java, swing, gridbaglayout

我正在使用 GridBagLayout 通过以下代码放置我的 GUI 组件，希望组件在列中一个一个地放置，没有任何间隙：

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestGUI extends JFrame{

    public TestGUI(){

        JPanel bigPanel = new JPanel(new GridBagLayout());
        JPanel panel_a = new JPanel();
        JButton btnA = new JButton("button a");
        panel_a.add(btnA);

        JPanel panel_b = new JPanel();
        JButton btnB = new JButton("button b");
        panel_b.add(btnB);

        GridBagConstraints c = new GridBagConstraints();
        c.gridx = 0;
        c.gridy = 0;
        c.weighty = 1D;
        c.fill = GridBagConstraints.HORIZONTAL;
        c.anchor = GridBagConstraints.NORTH;
        bigPanel.add(panel_a, c);

        c.gridx = 0;
        c.gridy = 1;
        c.fill = GridBagConstraints.HORIZONTAL;
        bigPanel.add(panel_b, c);

        this.add(bigPanel);
    }

    public static void main(String[] args) {

        TestGUI gui = new TestGUI();
        gui.setVisible(true);
        gui.pack();
    }
} 
```

我希望面板将在列中一一显示。但现在我得到了这个： ![在此处输入图像描述](../Images/8c07021ee8c3cf6d61aa2901e639695d.png)

因为我要在 bigPanel 中添加更多组件，并且需要对布局进行更多自定义，所以我需要使用 GridBagLayout 而不是其他布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:39:48.960

您需要添加一个额外的组件，以便它将填充剩余的可用空间并将两个按钮面板推到顶部。当您将添加更多组件时，您当然可以删除该组件。

另一个选项（不需要额外的组件）是`weighty=1.0`为`panel_b`and设置`anchor=NORTH`，但是当您添加更多组件时，您必须更改它。

```
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class TestGUI extends JFrame {

    public TestGUI() {

        JPanel bigPanel = new JPanel(new GridBagLayout());
        JPanel panel_a = new JPanel();
        JButton btnA = new JButton("button a");
        panel_a.add(btnA);

        JPanel panel_b = new JPanel();
        JButton btnB = new JButton("button b");
        panel_b.add(btnB);

        GridBagConstraints c = new GridBagConstraints();
        c.gridwidth = GridBagConstraints.REMAINDER;
        c.fill = GridBagConstraints.HORIZONTAL;
        c.weightx = 1.0;
        bigPanel.add(panel_a, c);
        bigPanel.add(panel_b, c);
        c.weighty = 1.0;
        // Temporary panel to fill the rest of the bigPanel
        bigPanel.add(new JPanel(), c);
        this.add(bigPanel);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                TestGUI gui = new TestGUI();
                gui.pack();
                gui.setVisible(true);
            }
        });
    }
} 
```

# generics - 温莎城堡没有解决逆变泛型接口（再次）

> ID：13285626
> 
> 赞同：2
> 
> 时间：2012-11-08T08:58:40.940
> 
> 标签：generics, castle-windsor

因为我无法评论这个问题的答案[Castle Windsor resolve a generic interface](https://stackoverflow.com/questions/13120390/castle-windsor-resolving-a-generic-interface)

所以我再问一次，我的设置与上面的问题完全相同。

这将返回 True：

```
var res = typeof(IBaseInterface<Details1, string>).IsAssignableFrom(typeof(Impl2)); 
```

有一个组件注册为

```
Impl2 / IBaseInterface<Details, String> = Transient 
```

但如果我这样做

```
var details = container.Resolve<IBaseInterface<Details1, string>>().GetDetails(new Details1()); 
```

它惨遭失败：

```
No component for supporting the service Test.IBaseInterface`2[[Test.Details1, Test, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]] was found 
```

我正在使用 Castle 3.1 顺便说一句。

经过一番调查，我可以看到有一个错误

```
DefaultNamingSubSystem.GetHandlersNoLock(Type service) 
```

或者

```
AbstractHandler.Supports(Type service) 
```

由于我的实现被注册为封闭接口 IBaseInterface 但 Supports() 方法检查

```
ComponentModel.Services.Contains(service); // here service = IBaseInterface<,> 
```

显然 Castle 在我的组件服务中找不到开放的通用服务

# ruby-on-rails - 在使用 Devise 注册期间保留 POST 数据

> ID：13285634
> 
> 赞同：2
> 
> 时间：2012-11-08T08:59:05.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, devise

我可能以错误的方式处理这个问题......所以如果你有一个更优雅的解决方案，我会全神贯注。

想象一下，我正在制作一个像 Kickstarter 这样的系统。我希望我的用户能够在我要求他们注册之前指定他们想要承诺多少。

然后，如果他们没有注册，我需要他们先注册，然后再将他们放回他们刚刚登录的流程中。Devise 通过将用户重定向回默认情况下使这`after_sign_up_path_for`变得`after_sign_in_path_for`容易.

所以这总是会发出一个 GET 请求。但是，如果我有从 POST 收到的数据，其中包含他们想要承诺的金额，但那会丢失。

将发布的数据存储在会话中的唯一方法是这样做吗？或者是否有一种聪明的方法可以在没有用户的情况下开始创建质押记录（无需运行作业来销毁孤立的质押记录）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:26:26.023

我发现 highgroove.com 上这篇博文中描述的方法在这方面非常有趣：http:  [//highgroove.com/articles/2012/10/09/lazy-user-registration-for-rails-apps.html](http://highgroove.com/articles/2012/10/09/lazy-user-registration-for-rails-apps.html)

基本思想是始终有一个匿名用户在手边，即使当前的访问者没有注册。像这样，您可以像往常一样创建例如关联，并且——一旦访问者实际注册——您编辑用户而不是所有关联对象。

如果用户从未注册，您可以简单地查找废弃的用户帐户并将其删除，包括他们的关联，而不是查找所有类型的废弃模型。

# qt - 递归搜索返回不正确值的目录

> ID：13285638
> 
> 赞同：0
> 
> 时间：2012-11-08T08:59:12.437
> 
> 标签：qt, recursion, qdir

从递归搜索目录返回正确值时出现问题。代码如下

```
#include <QCoreApplication>
#include <QDir>
#include <QString>

#include <QDebug>

static QString findDirectoryPathFromId(const QString &startPath, const QString &id)
{
    QDir dir(startPath);

    QFileInfoList list = dir.entryInfoList(QDir::AllDirs | QDir::NoDotAndDotDot | QDir::NoSymLinks);

    QString path;

    foreach(QFileInfo dinfo, list)
    {
        if (dinfo.fileName() == id)
        {
            qDebug() << "****************Found****************" << dinfo.filePath();
            return dinfo.filePath();

        }

        else
        {
            findDirectoryPathFromId(dinfo.absoluteFilePath(), id);
       }

    }

return QString();

}

int main(int argc, char *argv[])
{
    QCoreApplication app(argc, argv);

    QStringList args = app.arguments();

    QString path = findDirectoryPathFromId("/home/project/dirtest", args.at(1));

    qDebug() << "Return path" << path;

    return 0;
} 
```

该函数在打印“Found”调试语句时查找目录，但返回值为空字符串。

有人可以解释我在这里做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:31:02.100

我想我已经修好了。

我需要检查递归调用是否找到了目录并将其返回。

```
 path = findDirectoryPathFromId(dinfo.absoluteFilePath(), id);

        if (!path.isNull())
            return path; 
```

这个对吗。

# java - 为什么 actionPerform() 在 Event Dispatch Thread 中运行，而 componentAdded() 不是？

> ID：13285644
> 
> 赞同：1
> 
> 时间：2012-11-08T08:59:32.663
> 
> 标签：java, multithreading, swing, event-dispatch-thread

我在下面有Ex1：

```
main(String args[]) {
    JFrame frame = new JFrame("Title");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JButton button = new JButton("Press Here");
    ContainerListener container = new ContainerAdapter() {
      public void componentAdded(final ContainerEvent e) {
          System.out.println("On the event thread? : " +
                  EventQueue.isDispatchThread());
      }
    };
    frame.getContentPane().addContainerListener(container);
    frame.add(button, BorderLayout.CENTER);
    frame.setSize(200, 200);
    System.out.println("I'm about to be realized: " +
      EventQueue.isDispatchThread());
    frame.setVisible(true);
  } 
```

我的结果是：在事件线程上？: 错误 | 我即将意识到：假

其他Ex2：

```
public class GridBagLayoutTester
    extends JPanel implements ActionListener{   
public GridBagLayoutTester() {
    setLayout(new GridBagLayout());
    GridBagConstraints gbc = new GridBagConstraints();

    JButton button = new JButton("Testing");
    // do something...
    button.addActionListener(this);
    add(button, gbc);
}

public void actionPerformed(ActionEvent e) {
    System.out.println("On the event thread? : " +
                  EventQueue.isDispatchThread());
}

public static void main(String[] args) {
    JFrame frame = new JFrame("GridBagLayoutDemo");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);    
    Container contentPane = frame.getContentPane();
    contentPane.setLayout(new BorderLayout());
    contentPane.add(new GridBagLayoutTester(), BorderLayout.CENTER);
    frame.setSize(800, 600);
    frame.pack();
    frame.setVisible(true);
    System.out.println("I'm about to be realized: " +
      EventQueue.isDispatchThread());
} 
```

}

结果是：我即将实现：假| 在事件线程上？： 真的

我的问题是为什么 Ex1-componentAdded() 在初始线程中运行，而 Ex2-actionPerformed() 在 EDT 中运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:22:03.543

**关于 Java 中的 GUI 应用程序的一些事实：**

**-**在**Java GUI**应用程序中，该`main()`方法是**短暂的**，在(EDT)中**调度 GUI 的构建后，****它会退出**。`Event Dispatcher Thread`

 ****-**所以它有`EDT's` **责任处理 GUI**。

**现在来到你的代码：**

**- Initial** Thread 是`main()`线程，`EDT`是**GUI Thread**。

**-**在 EX1 中，您强制 GUI 在`main()`线程上运行，这是一种错误的做法，而在 EX2 中，当您使用`GridBagLayoutTester`扩展**JPanel**时，`main()`线程**通过将 GUI 的工作委派给 EDT 来获得较早的机会**.

**-** `main()`方法应该用于执行`EventQueue.invokeLater()`进一步处理 GUI 的方法，这将**有助于 UI 响应并避免处理任何非 UI 工作。**

**-**此外，Java 有`SwingUtilities`一个类，它分别在和和线程之间进行了**很好的同步。**`UI``Non-UI``UI``Non-UI`

**例如：正确的做法......**

```
public class Test extends JFrame{

   public Test(){

       this.setSize(300,300);
       this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

  public static void main(String[] args){

       EventQueue.invokeLater(new Runnable(){

              public void run(){

                   new Test().setVisible(true);

                }

           });

   }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:32:42.080

您在 main 方法中的第一行创建了一个 JFrame 类型的新对象。这个创建启动了一个新线程（实际上它启动了多个线程）——一个等待事件队列项的新线程。例如，这可以是鼠标单击。回答您的问题：主线程 - 真正称为“main” - 正在调用 main 方法的 10 行代码。这应该在几毫秒内完成。之后主线程消失了，不再存在。但正如我之前所说，AWT/Swing 库在内部创建了一个（是的，更多）线程，基本上是一个检查用户输入的无限循环。并且从该线程调用 actionPerformed 方法。

我给你的建议：

*   在 main 方法的第一行创建一个断点。

*   调试你的程序。

*   当调试器在第一行停止时（在创建 JFrame 之前）转到您的命令行并启动 jconsole

*   转到标签线程

*   注意线程“主”

*   执行单行（新 JFrame）

*   注意线程“main”和线程“AWT-*”的共存

*   在调试器上按播放，“main”将消失，但 AWT 将持续存在**

# winapi - 消息时如何拦截子控件鼠标

> ID：13285645
> 
> 赞同：1
> 
> 时间：2012-11-08T08:59:32.773
> 
> 标签：winapi, visual-c++, mousewheel, wtl

我需要在框架窗口中获取鼠标滚轮事件，但它们被子窗口捕获。如何将鼠标滚轮消息从所有子窗口重定向到此窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:24:35.670

它已经为您完成了开箱即用。确保您不会阻止事情以通常的方式滚动。

[WM_MOUSEWHEEL 消息 (Windows)](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645617%28v=vs.85%29.aspx)

> 当鼠标滚轮旋转时发送到焦点窗口。**DefWindowProc 函数将消息传播到窗口的父级。**不应该有消息的内部转发，因为 DefWindowProc 将它向上传播到父链，直到它找到一个处理它的窗口。

# mysql - MySQL 按 2 列排序（日期/频率）

> ID：13285648
> 
> 赞同：0
> 
> 时间：2012-11-08T08:59:42.410
> 
> 标签：mysql

我有一个`favorite`有 4 列的表

*   `employee_id`
*   `product_id`
*   `frequency`
*   `last_consumed_date`

现在我得到了最高的 6 行，`frequency`最少`employee_id`有`frequency`6 行。

`employee_id`以1为例

```
SELECT * FROM `favorites` 
WHERE `employee_id` = 1
AND `frequency` >= 6
ORDER BY `frequency` DESC LIMIT 0,6 
```

到现在为止还挺好！

但是现在我想`last_consumed_date`在一个月（30天）内更喜欢这些行，所以我必须做一些事情：

```
DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= `lastchanged` 
```

* * *

这是一个表格示例，以使其更清楚
表格已填充：

```
1   5 11  2012-10- 3  
1  13  8  2012-11- 7  
1  18 20  2012- 9-25
1  42 10  2012-11- 3
1  28 15  2012-10-17
1   9  7  2012-10- 8
1  64  9  2012-11- 1
2  24  8  2012- 8-28
2  12  5  2012-10-16
2   5 12  2012-11-11 
```

Today is `2012-11- 8`
30 days back 是`2012-10- 9`
SQL 后返回的 Table：

```
1  28 15  2012-10-17 <Sorted by 30 days interval and frequency>
1  42 10  2012-11- 3 
1  64  9  2012-11- 1 
1  13  8  2012-11- 7 
1  18 20  2012- 9-25 <Sorted by frequency>
1   5 11  2012-10- 3 
```

* * *

现在的问题是，我如何在 1 个查询中订购这 2 个东西？首先是按日期排序（间隔 30 天），然后是按单独结果的频率排序（间隔内和所有其他）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:17:10.533

哦，我想我通过试错找到了答案^v^

```
SELECT * FROM `favorites` 
WHERE `employee_id` = 1
AND `frequency` >= 6
ORDER BY (DATE_SUB(CURDATE(),INTERVAL 30 DAY) <= `lastchanged`) DESC,
    `frequency` DESC 
LIMIT 0,6 
```

对于那些试图帮助的人！谢谢

# c# - .Continue 在任务完成之前开始

> ID：13285652
> 
> 赞同：9
> 
> 时间：2012-11-08T08:59:49.423
> 
> 标签：c#, .net, wpf, task-parallel-library, async-await

我在 C#、VS2012、WPF 4.5 中有以下代码。我的期望是，`.ContinueWith`将在任务完全完成后执行（这是延续的全部目的，不是吗？）。

这应该导致 2 in 的值`finalResult`。

```
int myTestInt = 0;

Task task = Task.Factory.StartNew(async () =>
{
   myTestInt = 1;
   await Task.Delay(TimeSpan.FromSeconds(6));
   myTestInt = 2;

}).ContinueWith(_ =>
   {
      int finalResult = myTestInt;
   }); 
```

实际上，`finalResult`被赋值为 1 而不是。因此，似乎该`await`语句的延续已经开始。

这是预期的行为吗？我在这里错过了什么吗？`ContinueWith`一个任务完全完成后我不能依靠启动吗？

更新：

贾斯汀的回答只是启发我检查以下内容：

```
int myTestInt = 0;
Task task=Task.Factory.StartNew(async () =>
{
   myTestInt = 1;
   await Task.Delay(TimeSpan.FromSeconds(6));
   myTestInt = 2;
});

task.Wait();
int result2 = myTestInt; 
```

finalResult 仍然设置为 1。有没有办法可靠地等待包含`await`s 的任务完成？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-08T15:28:43.887

当您将`async`委托传递给`Task.Factory.StartNew`时，返回的`Task`仅代表该委托的第一部分（直到它`await`尚未完成）。

但是，如果您将`async`委托传递给新`Task.Run`方法（为此而包括在内），则返回`Task`的代表整个委托。因此，您可以`ContinueWith`按预期使用。（虽然`await`通常是比 更好的选择`ContinueWith`）。

有关`StartNew`vs的更多信息`Run`，请参阅[Stephen Toub 关于该主题的帖子](http://blogs.msdn.com/b/pfxteam/archive/2011/10/24/10229468.aspx)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T09:04:54.977

await 将立即将控制权返回给调用函数，在本例中是您的任务的 StartNew。这意味着任务将完成并执行 ContinueWith。如果您真的希望在 ContinueWith 之前完成任务，则不要等待 Task.Delay。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-10-30T16:11:14.330

我在 MSDN 中看到了这个：:-)

```
public async  void button1_Click(object sender, EventArgs e)
{
    pictureBox1.Image = await Task.Run(async() =>
    {
        using(Bitmap bmp1 = await DownloadFirstImageAsync())
        using(Bitmap bmp2 = await DownloadSecondImageAsync())
        return Mashup(bmp1, bmp2);
    });
} 
```

所以不要忘记**“async()** ”！！！

# php - PHP如何使用复选框删除多条记录

> ID：13285653
> 
> 赞同：0
> 
> 时间：2012-11-08T08:59:49.593
> 
> 标签：php, javascript, jquery

我在删除表中的多条记录时遇到了一点问题。我使用复选框来删除它们，但它不起作用。我不知道它的确切代码是什么。

这是我的PHP代码

```
<?php   
    echo "<form action='#'>
        <fieldset>
            <input type='text' name='search' value='' id='searchtalents' placeholder='Search Keywords..' size='40'/>
        </fieldset> 
    </form>";

    echo "<form name='tmsform' method='POST' action=''>";

    $sql = "SELECT * FROM talentinfo WHERE 1 LIMIT 10";
    $result = mysql_query($sql);
    if (!$result) {
        echo "Could not successfully run query ({$sql}) from DB: " . mysql_error();
        exit;
    }

    if (mysql_num_rows($result) == 0) {
        echo "No rows found";
        exit;
    }

    echo"<div id='talentinfo'><table id='mr_database' name='myform' style='border:1px solid #fff;' cellspacing=0 cellpading='2' class='pretty'>
        <thead>
            <tr>
                <th></th>
                <th></th>
                <th></th>
                <th>Mr Tracking Number</th>
                <th>First Name</th>
                <th>Middle Name</th>
                <th>Last Name</th>
                <th>Address</th>
                <th>Contact Number</th>
                <th>School</th>
                <th>Course</th>
                <th>Year Graduated</th>
                <th>Position Considered</th>
                <th>Referred Location</th>
                <th>Unit</th>
            </tr>
        </thead>";

    $counter = 40000;
    while ($row = mysql_fetch_assoc($result)) {
    $filled = (($counter % 2) == 1) ? "style='background-color:#BCD9E1;'" : "" ;
    $id = $row['talents_id'];

    echo "<tbody><tr {$filled} class='tmsdel'>";        
    echo "<td><a href ='#' rel='#edit_talents{$counter}'><center><img src='img/edit.gif' width='25' height='21' title='Edit'></center></a></td>";
    echo "<td><a href ='#'  id=".$row['talents_id'].'&idelete=talents'." class='delete'><center><img src='img/delete.png' width='25' height='21' title='Delete'></center></a></td>";
    echo "<td><input type='checkbox' name='checkbox[]' id='check".$row['talents_id']."' value='".$row['talents_id'].'&idelete=talents'."'/></td>";          
    echo "<td><a href='#' rel='#tracing_number{$counter}' style='text-decoration:none; font-weight:bold; color:#444;'>" . $row ['mr_tracking_number'] . "</a></td>";
    echo "<td>" . $row['firstname'] . "</td>";
    echo "<td>" . $row['middlename'] . "</td>";
    echo "<td>" . $row['lastname'] . "</td>";
    echo "<td>" . $row['address'] . "</td>";
    echo "<td>" . $row['contact_number'] . "</td>";
    echo "<td>" . $row['school'] . "</td>";
    echo "<td>" . $row['course'] . "</td>";
    echo "<td>" . $row['year_graduated'] . "</td>";
    echo "<td>" . $row['position_considered'] . "</td>";
    echo "<td>" . $row['referred_location'] . "</td>";
    echo "<td>" . $row['unit'] . "</td>";
    echo "</tr></tbody>";
?> 
```

这是我的 Javascript

```
$(function(){
    $(document).ready(function(){
    });     

    $("#delete-all").click(function(){
        $("#mr_database").remove();
        $.ajax({
            url: "modules/delete-all.php",
            type: "get",
            async: false,
            data: "check"
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T07:30:27.507

请按照以下步骤操作：

1.  首先，您需要将任何类名应用于所有复选框。
2.  按钮上的调用函数单击删除然后

    ```
     var allVals = '';

      $("#delete-all").click(function(){

       $('.checkboxclass :checked').each(function() {
         allVals = allVals + $(this).val() + ',';
       });
    } 
    ```

3.  然后你需要传入`allVals`变量`ajax`并发布到 .php 文件

    喜欢：数据：`'ids=' + allVals` 在 $.ajax 中

4.  最后，您可以在 php 文件中获取此变量并对其执行删除过程。

    喜欢： `$ids = explode(',', $_REQUEST['ids');` 并在 mysql 查询中使用 id

    希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:13:23.720

相当简单的答案，因为我在这里看到的是一个用于查看表格并删除浏览器中的 html 而不是服务器上的数据的脚本。

您需要编写这里提到的 modules/delete-all.php 脚本： url: "modules/delete-all.php"

其中应包含“delete * FROM Talentinfo”SQL 查询。

但是，这将无缝删除所有表格内容。所以你可能想做一个提示：

```
$("#delete-all").click(function(){

Check = confirm("Do you really want to delete ALL DATA ? (Hint: there is no undo)");
if (Check == true) {
 $("#mr_database").remove();
    $.ajax({
        url: "modules/delete-all.php",
        type: "get",
        async: false,
        data: "check"
    });

}
}); 
```

delete_all.php 应该全部删除，所以只需：

```
<?php   

$sql = "delete * FROM talentinfo ";
$result = mysql_query($sql);
if (!$result) {
    echo "Could not successfully run query ({$sql}) from DB: " . mysql_error();
    exit;
} else {
    print "ok";
}
?> 
```

# javascript - 添加自定义快捷方式到eclipse

> ID：13285660
> 
> 赞同：2
> 
> 时间：2012-11-08T09:00:08.713
> 
> 标签：javascript, eclipse

我用 eclipse 做了很多 javascript 的东西，所以“console.log()”是我的朋友。

有没有办法告诉eclipse在cmd + shift + c这样的快捷方式上插入“console.log（）”（例如）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:27:40.747

这不是自定义快捷方式。这个怎么样：

1.  首选项 -> JavaScript -> 编辑器 -> 模板 -> 新建

    `Name: log
    Pattern: console.log()`

2.  点击【确定】

3.  打开.js文件

4.  类型`l`

5.  为内容辅助使用快捷命令（出现对话框）

6.  选择`log`

7.  它将`console.log()`在编辑器上插入

# android - Android - 从方形位图中切出一个圆圈

> ID：13285661
> 
> 赞同：17
> 
> 时间：2012-11-08T09:00:08.690
> 
> 标签：android

我正在尝试使用以下代码从方形位图中切出一个圆圈

```
 Canvas canvas=new Canvas(bitmapimg );
        int circleXCoord = bitmapimg .getWidth() / 2;
        int circleYCoord = bitmapimg .getHeight() / 2;
        int circleRadius = bitmapimg .getWidth() / 2;

        Rect rect = new Rect(circleXCoord - circleRadius, circleYCoord - circleRadius, circleXCoord + circleRadius, circleYCoord + circleRadius);

        int width = rect.width();
        int height = rect.height();

        Paint paint = new Paint();
        paint.setStyle(Paint.Style.STROKE);
        paint.setColor(Color.BLUE);
        canvas.drawRect(rect, paint);
        canvas.drawBitmap(bitmapimg , rect, rect, paint);
        Path p = new Path();
        p.addCircle(circleXCoord, circleYCoord, width / 2F, Path.Direction.CW);
        canvas.clipPath(p, Region.Op.DIFFERENCE);
        canvas.drawColor(0, PorterDuff.Mode.CLEAR); 
```

这个想法是将正方形（矩形）位图附加到画布上，然后剪辑圆形路径。清除矩形和圆形之间的差异（使其透明）。

该代码适用于 Android 4，但在 Android 2.3.3 设备上，差异区域显示为黑色而不是透明。

我在这里遗漏了什么还是姜饼不支持 PorterDuff.Mode.CLEAR？有没有更好的方法从Android中的正方形切出一个圆？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-06T06:10:38.730

似乎 PorterDuff.Mode.Clear 不适用于姜饼

解决了问题（使用此代码从正方形切圆）

```
 public Bitmap BitmapCircularCroper(Bitmap bitmapimg){
    Bitmap output = Bitmap.createBitmap(bitmapimg.getWidth(),
            bitmapimg.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas canvas = new Canvas(output);

    final int color = 0xff424242;
    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, bitmapimg.getWidth(),
            bitmapimg.getHeight());

    paint.setAntiAlias(true);
    canvas.drawARGB(0, 0, 0, 0);
    paint.setColor(color);
    canvas.drawCircle(bitmapimg.getWidth() / 2,
            bitmapimg.getHeight() / 2, bitmapimg.getWidth() / 2, paint);
    paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));
    canvas.drawBitmap(bitmapimg, rect, rect, paint);
    return output;

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-02T09:39:27.943

```
import android.graphics.PorterDuff.Mode;
import android.graphics.Bitmap.Config;

public static Bitmap getCircularBitmap(Bitmap bitmap) 
{
    Bitmap output;

    if (bitmap.getWidth() > bitmap.getHeight()) {
        output = Bitmap.createBitmap(bitmap.getHeight(), bitmap.getHeight(), Config.ARGB_8888);
    } else {
        output = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getWidth(), Config.ARGB_8888);
    }

    Canvas canvas = new Canvas(output);

    final int color = 0xff424242;
    final Paint paint = new Paint();
    final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());

    float r = 0;

    if (bitmap.getWidth() > bitmap.getHeight()) {
        r = bitmap.getHeight() / 2;
    } else {
        r = bitmap.getWidth() / 2;
    }

    paint.setAntiAlias(true);
    canvas.drawARGB(0, 0, 0, 0);
    paint.setColor(color);
    canvas.drawCircle(r, r, r, paint);
    paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
    canvas.drawBitmap(bitmap, rect, rect, paint);

    return output;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-24T20:51:27.147

对于仍在关注此问题的任何人，此答案将引起一些问题。

1.) 您在此实例中创建的画布将没有硬件加速。即使您的 Paint 对象具有抗锯齿功能，画布也不会。当您决定在 onDraw() 调用中将其绘制回原始画布时，这将导致伪影。

2.) 这需要更多的资源。您必须创建第二个位图（这可能导致 OOM）和一个辅助 Canvas 以及您必须做的所有不同的更改。

请查看 Romain Guy 的回答。您创建一个 BitmapShader，然后创建一个 RoundRect 给您一个圆形。您只需要知道 RectF 的尺寸，以便它可以正确确定圆。

这意味着如果您知道中心点 (x, y) 和半径，您可以轻松确定 RectF。

```
left = x - radius;
top = y - radius;
right = x + radius;
bottom = y + radius; 
```

这也意味着使用下面发布的此解决方案，您只需在屏幕上绘制一次，其他所有操作都在屏幕外缓冲区中完成。

[http://www.curious-creature.com/2012/12/11/android-recipe-1-image-with-rounded-corners/](http://www.curious-creature.com/2012/12/11/android-recipe-1-image-with-rounded-corners/)

最好的解决方案在这里找到：

```
BitmapShader shader;
shader = new BitmapShader(bitmap, Shader.TileMode.CLAMP, Shader.TileMode.CLAMP);

Paint paint = new Paint();
paint.setAntiAlias(true);
paint.setShader(shader);

RectF rect = new RectF(0.0f, 0.0f, width, height);

// rect contains the bounds of the shape
// radius is the radius in pixels of the rounded corners
// paint contains the shader that will texture the shape
canvas.drawRoundRect(rect, radius, radius, paint); 
```

# python - 摆脱 Satchmo / Django 中的默认视图？

> ID：13285662
> 
> 赞同：1
> 
> 时间：2012-11-08T09:00:10.400
> 
> 标签：python, django, satchmo

只是好奇获得普通 404 错误而不是查看预定义 url 的正确/透明方式是什么？

Satchmo 的默认安装`/quickorder`使用购物车视图处理 url。我想完全禁用对此 url 的处理。到目前为止，我确实得到了商店树顶部*url.py中的以下 url 替换：*

```
from django.conf.urls.defaults import *
from satchmo_store.urls import urlpatterns
from satchmo_utils.urlhelper import replace_urlpattern

replace_urlpattern(
        urlpatterns,
        url(r'^quickorder/$', handler404)
    ) 
```

来自`handler404`django.conf.urls.defaults 但它返回 Django 自己的内容，而不是商店的默认 404 页面，就像您要求不存在的页面一样[http://www.google.com/quickorder_somenonsenseintheurl](http://www.google.com/quickorder_somenonsenseintheurl)。

知道如何在避免修改默认 Satchmo 安装的同时覆盖它吗？

# javascript - 引导弹出窗口不显示内容

> ID：13285663
> 
> 赞同：5
> 
> 时间：2012-11-08T09:00:11.183
> 
> 标签：javascript, jquery, html, twitter-bootstrap, popover

我试图让引导弹出窗口在网站上工作，我已经取得了一些成功。单击链接时，我可以显示弹出框，但是除了标题之外，我在框中看不到任何内容。我已经尝试了两种方法：

```
<a class="btn btn-link login-popover" rel="popover" data-placement="bottom" data-title="Sign in to the website builder" data-html="true" data-content="Lo4545445"> Sign in  <span class="caret"></span></a> 
```

和

```
$('.login-popover').popover({
    placement: 'bottom',
    title: 'Sign in to the website builder',
    content: 'testing 123',
    trigger: 'click'
}); 
```

然而，没有人真正显示框中的内容。[您可以通过访问http://www.onemobi.net/new](http://www.onemobi.net/new)并单击`Sign in`顶部来了解我的意思。

**编辑：**我不会同时做这两件事。我试过一个，然后另一个。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-08T09:11:37.240

您必须将代码放在函数中

```
$(document).ready(function() {
  $('.login-popover').popover({
    placement: 'bottom',
    title: 'Sign in to the website builder',
    content: 'testing 123',
    trigger: 'click'
  });
}); 
```

或者

```
$(function () { 
   $(".login-popover").popover();    
}); 
```

然后它工作。但是为什么要定义两次弹出设置（在脚本和数据属性中）？

**尤里卡！**

您似乎更改了 bootstrap.css 中的默认样式。弹出框的内容实际上显示在 a 中`<p>`，但是您有

```
.btn-group {
  font-size: 0;
  white-space: nowrap;
} 
```

很明显，通过改变 font-size: 0; 内容将可见（在 chrome 检查器中测试）添加到您的 CSS

```
.btn-group {
  font-size: 12px; /*or whatever size */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T01:06:44.397

当我检查当前版本（v2.2.2）时，这个错误已经解决。请下载最新的。

# javascript - Casper JS waitForResource 带有一个宁静的 API

> ID：13285664
> 
> 赞同：5
> 
> 时间：2012-11-08T09:00:14.347
> 
> 标签：javascript, functional-testing, casperjs

我们在使用 casper.js 进行功能测试时遇到了一点问题。

我们两次请求相同的资源，首先使用 GET，然后使用 POST 方法。现在在等待第二个资源（POST）时，它匹配第一个资源并直接转到“then”函数。

我们希望能够在“test”函数中检查 HTTP 方法，这样我们就可以正确识别资源。现在我们使用状态码（res.status），但这并不能完全解决我们的问题，我们真的需要http方法。

```
// create new email
this.click(xPath('//div[@id="tab-content"]//a[@class="button create"]'));

// GET
this.waitForResource('/some/resource', 
    function then() {
        this.test.assertExists(xPath('//form[@id="email_edit_form"]'), 'Email edit form is there');

        this.fill('form#email_edit_form', {
            'email_entity[email]': 'test.bruce@im.com',
            'email_entity[isMain]': 1
        }, true);

        // POST
        this.waitForResource(
            function test(res) {
                return res.url.search('/some/resource') !== -1 && res.status === 201;
            },
            function then() {
                this.test.assert(true, 'Email creation worked.');
            },
            function timeout() {
                this.test.fail('Email creation did not work.');
            }
        );
    },
    function timeout() {
        this.test.fail('Email adress creation form has not been loaded');
    }); 
```

或者也许有更好的方法来测试这种情况？尽管由于这是一项功能测试，我们需要将所有这些步骤保留在一个测试中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T08:44:44.883

`res`传递给函数的参数`test`有一个 ID。我创建了一个助手来测试这个 ID 并将其列入黑名单，因此相同的资源不会被第二次接受。

```
var blackListedResourceIds = [],
    testUniqueResource = function (resourceUrl, statusCode) {
        return function (res) {
            // check if resource was already loaded
            var resourceFound = res.url.search(resourceUrl) !== -1;

            // check statuscode
            if (statusCode !== undefined) {
                resourceFound = resourceFound && res.status === statusCode;
            }

            // check blacklisting
            if (!resourceFound || blackListedResourceIds[res.id] !== undefined) {
                return false;
            } else {
                blackListedResourceIds[res.id] = true;
                return true;
            }
        };
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T07:40:45.663

You can try to alter the form action url to add some query string, therefore generating a new resource appended to the stack. Could be done this way:

```
casper.thenEvaluate(function() {
    var form = __utils__.findOne('#email_edit_form');
    form.setAttribute('action', form.getAttribute('action') + '?plop');
}); 
```

That's a hack though, and functional testing should never be achieved that way. Let's hope more information will be added to the response objects in the future.

# vxworks - 如何使用 PROFILE_BOOTAPP 配置文件打开 VxWorks 项目

> ID：13285667
> 
> 赞同：1
> 
> 时间：2012-11-08T09:00:24.537
> 
> 标签：vxworks

我正在尝试在 vxworks 中创建自定义引导加载程序。当我尝试使用配置文件“PROFILE_BOOTAPP”打开一个项目时。没有这样的选择。有没有人遇到过类似的情况？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-09T13:45:59.243

如果在项目创建期间 PROFILE_BOOTAPP 选项不可用，很可能是因为您基于 SMP 源构建的项目。使用单处理器 (UP) 重做 VSB，然后重试。

# javascript - Window.Print() 在 chrome/Firefox 中不起作用

> ID：13285668
> 
> 赞同：1
> 
> 时间：2012-11-08T09:00:25.940
> 
> 标签：javascript, dom

我正在使用以下代码打印 div 中的内容。它在 IE 中运行良好，但在 chrome 和 firefox 中显示空白屏幕。

代码：

```
var DocumentContainer = document.getElementById('TermsMainDiv');
    var WindowObject = window.open('', "PrintWindow", 
"width=800,height=700,top=200,left=200,toolbars=no,scrollbars=yes,status=no,resizable=no");
    WindowObject.document.writeln(DocumentContainer.innerHTML);
    WindowObject.document.close();
    WindowObject.focus();
    WindowObject.print();
    WindowObject.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:02:46.247

IE 和其他浏览器的单独代码。现在工作正常。

代码：

```
 <script type='text/javascript'>
 var originalContents;
    function Print() {

        if (/MSIE (\d+\.\d+);/.test(navigator.userAgent)) {
            var DocumentContainer = document.getElementById('TermsSCMainDiv');
            var WindowObject = window.open('', "PrintWindow", 
"width=800,height=700,top=200,left=200,toolbars=no,
 scrollbars=yes,status=no,resizable=no");
            WindowObject.document.writeln(DocumentContainer.innerHTML);
            WindowObject.document.close();
            WindowObject.focus();
            WindowObject.print();
            WindowObject.close();
        }
        else {
            originalContents = document.body.innerHTML;
            var printable = document.getElementById('TermsSCMainDiv');
            document.body.innerHTML = printable.innerHTML;
            printCoupon();
        }
    }

    function printCoupon() {
        window.print();
        endPrintCoupon();
    }

    function endPrintCoupon() {
        document.body.innerHTML = originalContents;
        document.getElementById('TermsSCMainDiv').scrollIntoView(true);
        location.reload();
    }
 </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-24T22:33:50.353

这似乎也有效：

```
WindowObject.document.writeln(html);
WindowObject.document.close();
WindowObject.scrollTo(0,0); 
WindowObject.focus();
WindowObject.print(); 
```

当我发现注释掉 .print() 函数会导致弹出页面的正确呈现时发现了这一点。scrollTo 触发通常由页面前面的打印对话框阻止的呈现。

# javascript - 是 javascript 是否区分大小写调用的 html 控件的 ID

> ID：13285669
> 
> 赞同：1
> 
> 时间：2012-11-08T09:00:26.737
> 
> 标签：javascript, asp.net, html, dhtml

我有这个控制

```
 <input id="btnBackMP" type="button" value="<" onclick="BackGroup('MP') ;" 
  disabled="disabled" style="background-color: #BF0000; width: 28px;" /> 
```

在 backGroup 函数中，我使用了这个代码行：

```
 document.getElementById('btnback' + Key).disabled = true; 
```

此行在 Web Dev 上运行良好，但是当我在服务器（iis 7）上发布我的站点时，此行停止工作，直到我将其更改为以下内容：

```
document.getElementById('btnBackMP'+ Key).disabled = true; 
```

有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:04:46.207

Have you changed in calling function argument too since before your are passing 'MP' as argument and using as key

```
<input id="btnBackMP" type="button" value="<" onclick="BackGroup() ;" 
  disabled="disabled" style="background-color: #BF0000; width: 28px;" /> 
```

and why do not you directly change to this line only :-

```
document.getElementById('btnBackMP').disabled = true; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:16:13.043

元素 ID 区分大小写。id 必须是唯一的，但理论上您可以在同一文档中使用 id="elementa" 和 id="elementA" 来引用两个不同的节点。

不建议这样做

[有关https://developer.mozilla.org/en-US/docs/DOM/element.id](https://developer.mozilla.org/en-US/docs/DOM/element.id)的更多详细信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:16:35.383

根据`id`HTML 规范，属性值区分大小写；参见例如[HTML 4.01 on`id`](http://www.w3.org/TR/REC-html40/struct/global.html#adef-id)。因此，它们在 JavaScript 中使用时也区分大小写。请注意，该`document.getElementById`方法查询 DOM，此处必须遵循 HTML 约定。

所以`btnbackMP`和`btnBackMP`是不同的`id`价值观。正如所指出的，您的代码似乎也有另一个错误，但这可能只是制定问题的一个问题。（我想最后一行代码应该`btnBack`没有`btnBackMP`。）

# android - 如何将android工具目录添加到Windows 7路径？

> ID：13285670
> 
> 赞同：13
> 
> 时间：2012-11-08T09:00:30.730
> 
> 标签：android, hierarchyviewer

我喜欢快速启动hierarchyviewer。目前我使用提示导航到 .... \AppData\local\android\android-sdk\tools\ 然后是 hierarchyviewer

我想我需要在 Windows 7 路径中添加一些东西，但我不知道该怎么做。

有什么建议么？

问候

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-08T09:05:47.117

假设您已经下载并安装了 Android SDK，并将其解压到某个驱动器中。设置 PATH 有两种方法：

使用命令提示符：

```
set path=%path%;D:\android-sdk-windows\tools; 
```

另一个是按照以下步骤操作：

```
My Computer->Property->Advanced->Environment Variables->Edit Path Variable and add “D:\ android-sdk-windows\tools” into the Path Variables. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:23:02.033

在您的计算机属性-高级-环境变量-系统变量中，找到变量“路径”，在其中添加您的 android/tools 路径。

操作就像在你的计算机路径中添加 java.exe

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-28T13:42:40.443

```
C:\Users\user\AppData\Local\Android\Sdk\tools\bin 
```

并将它添加到您的路径用户变量

# c - 输出应该是什么？

> ID：13285674
> 
> 赞同：4
> 
> 时间：2012-11-08T09:01:06.847
> 
> 标签：c, pointers

我在这里期待h。但它显示g。为什么？

```
char *c="geek"; 
printf("%c",++*c); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-08T09:04:03.160

You are attempting to modify a string literal, which is [undefined behaviour](http://en.wikipedia.org/wiki/Undefined_behavior). This means that nothing definite can be said about what your program will print out, or indeed *whether* it will print anything out.

Try:

```
char c[]="geek"; 
printf("%c",++*c); 
```

For further discussion, see the [FAQ](http://c-faq.com/decl/strlitinit.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:05:24.303

这是`undefined behaviour`因为您正在尝试修改`string literal`

*c 会给字符`'g'`，但是当你应用这个 ++*c 意味着你正在尝试做

`*c=*c+1;`这是修改字符串及其未定义的语言标准

最好使用`char`数组来解决这个问题，因为“字符串”文字存储在只读内存中并且修改它会导致这种情况。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-08T09:05:30.227

表达式将像这样计算 (++(*c))，

首先，内部 *C 将被评估，因此它将打印 g。然后增量运算符将应用于指针变量 C。在此打印语句之后，指针 c 将指向下一个字符“e”。

# android - 如何用加速度计和陀螺仪通过电话测量汽车的速度？

> ID：13285677
> 
> 赞同：9
> 
> 时间：2012-11-08T09:01:13.350
> 
> 标签：android, accelerometer, gyroscope

我想知道汽车的当前速度并通过路径。我有一部带有加速度计和陀螺仪的安卓手机，它可以向我发送数据。这是电话坐标系中的数据，可能与汽车坐标系不同。

如何将这种加速度和旋转转换为汽车坐标系？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-08T10:20:01.383

您的一般问题的一般答案是`no`。加速度衡量的是速度的变化，所以你能从加速度中得到的最好的结果就是速度的变化。

要获得 ，`absolute speed`您必须拥有`initial speed`并将其添加到速度变化中：

`v(t) = v0 + a*t`

因此，如果您要让汽车沿直线行驶，并且您的设备固定在汽车上，您可以轻松获得速度变化（尽管测量误差会累加并很快导致差异）

在实践中，您将面临许多尝试实施它的问题，即：

*   您需要`initial speed`根据与加速度相同的参考来确定 。这将需要一些测量和大量三角函数，因为您会以不同的速率从不同的传感器获得这两个值。
*   汽车不会直线移动，因此您的加速度参考将不断移动（更多的三角学和微积分）。
*   如果设备在用户手中，则设备相对于汽车的移动将增加更多的计算（和累积的误差）。

问候。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-08T11:57:20.507

**You need some sort of external reference (e.g. GPS is such a thing): If you just integrate the acceleration, the error will go indefinitely.**

Because [these sensors are not accurate enough.](https://stackoverflow.com/a/7835988/341970) the error will quickly get out of control. (The linked answer is about position but the same holds for the velocity.)

In case of a car, you are better off with the GPS. If want to do something fancy, you could enforce the environmental constraints deduced from a map, that is, assume that the car goes on a road and not through buildings, etc. You will find more details on this in Chapter 5 of the PhD thesis entitled [Pedestrian Localisation for Indoor Environments](http://www.cl.cam.ac.uk/research/dtg/www/files/publications/public/abr28/ojw28_thesis.pdf).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-08T09:09:00.860

看起来是可以做到的。我没有特定于 Android 的示例，但这个论坛有很多关于它的讨论：[http ://www.edaboard.com/thread119232.html](http://www.edaboard.com/thread119232.html)

不过，如果您使用 Android Location 类会容易得多。具体来说 getSpeed() 方法应该给你你需要的东西：http: [//developer.android.com/reference/android/location/Location.html](http://developer.android.com/reference/android/location/Location.html)

Location 类依赖于位置提供程序，因此您的应用程序将需要适当的权限。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-08T09:20:58.390

如果汽车以相同的恒定速度行驶一段时间，两者都不会提供任何东西。唯一的方法是 GPS，它对它提供的每个位置都有计算速度。

# magento - magento 中自定义选项的 Html/php 文件

> ID：13285678
> 
> 赞同：0
> 
> 时间：2012-11-08T09:01:14.943
> 
> 标签：magento

我添加了一个单独的产品，其中包含来自管理员的该产品的自定义选项。但是我在前端获得的视图必须进行编辑，因为我只想为该产品提供自己的样式。那么自定义选项 html 来自哪些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:48:00.570

1.  [打开模板路径提示](http://www.redlightblinking.com/blog/magento-tutorials/magento-debugging-how-to-debug-template-paths-logging-and-display-errors)
2.  在管理员中该产品的“设计”选项卡中，为要更改的块指定不同的模板/模板。

# java-me - 在三星设备上运行 codenameone j2me 应用程序

> ID：13285679
> 
> 赞同：1
> 
> 时间：2012-11-08T09:01:15.583
> 
> 标签：java-me, lwuit, device, codenameone

我使用代号创建 j2me 应用程序，它在诺基亚手机中运行良好，但是我想在三星设备（例如 S8300）上安装或运行它，我会出错。

我该如何解决这个错误？

我搜索了该设备的详细信息，发现它没有操作系统，但可以使用 MIDP2.0 运行 java。我可以为这些设备类型做什么？如何在这些设备上运行它？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:26:47.757

有几件事可能是问题所在：

1) jar 文件太大。Java 设备通常对 jar 文件的最大大小有限制，其中一些小得令人难以置信。尝试安装一个较小的 jar 文件，例如 hello world。如果这是问题，请确保使用“混淆”，因为它还会从 jar 文件中删除未使用的代码。

2）根据运营商品牌，三星设备通常不允许直接从 PC 安装 jar 文件（使用蓝牙或 USB 电缆）:-(

只有可能的称为OTA-Download。在那里，您需要创建一个 jad 文件和一个 jar 文件，将它们放在网络服务器上，然后在设备的移动浏览器中从 jad 调用 url。您需要更改`MIDlet-Jar-URL`内部以在您的 Web 服务器上拥有 jar 文件的绝对 url。

这一切都相当复杂。要检查您的网络服务器是否设置正确并且该 jad 文件没有语法错误，您可以使用我的 jad 检查器： [jadcheck.appspot.com](http://jadcheck.appspot.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:23:32.857

检查您是否没有使用 Java 5 语言功能，并且在 java.util 等类方面将自己限制在 CLDC 1.1 API 规范中。

代号一包括对这些功能的支持，这些功能在诺基亚上运行良好，其中 VM 更兼容，但在使用这些功能时在某些设备上失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T09:18:56.237

我们必须通过硬编码而不是使用 lwit 或代号设计器来创建 UI。由于某些没有操作系统且仅支持 MIDP 的设备无法运行由 lwuit 或代号为 desiner 创建的这些类型的应用程序。

可能是设备中资源文件路径的原因！

# android - 安装 Hyper V 后，Android SDK 的 Intel HAXM 被禁用

> ID：13285682
> 
> 赞同：17
> 
> 时间：2012-11-08T09:01:31.433
> 
> 标签：android, xamarin.android, windows-phone-8

我正在开发一套移动应用程序——特别是 Windows Store/Mobile 8 和 Android。

在安装了 VS2012 和 Monodroid 之后，我能够在模拟器中启动 x86 Android 映像，并利用英特尔 HAXM 加速（模拟器输出确认 HAXM 工作）来使 VM 流畅。

然后我安装了 Windows Phone 8 SDK——它启用了 Hyper V 角色——现在模拟器说它找不到 HAXM。然后我卸载并尝试重新安装 HAXM，但现在它不会 - 说我的处理器不支持它。

VT-x 扩展仍然在 BIOS 中启用 - 所以我认为 Hyper-V 已阻止英特尔 HAXM 工作。

当然它不是一个杀手 - 但是一个非加速的 Android 图像比启用 HAXM 的图像要慢得多 - 其他人遇到过这个问题吗？谷歌搜索并没有带来任何明显的...

**更新（2012 年 11 月 30 日）**

根据@alexw 的建议，我尝试停止和禁用 Hyper-V；重新启动。它仍然不起作用。

我意识到下一步可能是Windows Phone SDK（并删除Hyper-V）然后再试一次-确认它确实是Hyper-V的*存在*。目前这不太方便 - 但我会尽快尝试并更新。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-06T17:00:35.123

要让 HAXM 再次检测到 VT，您可以做的最好的事情就是关闭整个 Hyper-V“功能”。打开“控制面板->“程序”->“打开或关闭Windows功能”（在“程序和功能”下）并找到“Hyper-V”，取消选中，重新启动。

看起来 Hyper-V 和 HAXM 是互斥的，这有点令人讨厌，因为您甚至需要重新启动两次才能启用或禁用任一功能。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-10-11T14:27:59.737

我的情况与您一样，需要支持 Hyper-V 和 Intel HAXM。禁用和启用该功能然后重新启动是矫枉过正，所以我找到了一个替代解决方案。

您可以创建 2 个引导条目，一个用于 Windows 并启用 Hyper-V 的常规配置，另一个用于禁用 Hyper-V 的配置。我使用第二个（Hyper-V 禁用）登录，并且能够安装 Intel HAXM。

为此，您需要：

1.  以管理员身份打开命令提示符
2.  输入命令：**bcdedit /copy {current} /d "Windows 8 - No Hyper-V"**
3.  这将输出格式为**{GUID}**的 id ，您需要将其复制以在下一个命令中使用它。
4.  输入命令：**bcdedit /set {**步骤 3 的复制 GUID **} hypervisorlaunchtype off**

更多细节在这篇[文章](http://blogs.msdn.com/b/virtual_pc_guy/archive/2008/04/14/creating-a-no-hypervisor-boot-entry.aspx)中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-08T20:53:53.010

我在 Windows 8 上安装 HAXM 时遇到了类似的问题。我做了以下没有效果：

*   使用此处的说明禁用管理程序 ( [http://blogs.msdn.com/b/virtual_pc_guy/archive/2008/04/14/creating-a-no-hypervisor-boot-entry.aspx](http://blogs.msdn.com/b/virtual_pc_guy/archive/2008/04/14/creating-a-no-hypervisor-boot-entry.aspx) )
*   仔细检查处理器是否支持 VT-x 并在 BIOS 中启用（BIOS 表示“支持”，但没有打开它的选项
*   验证控制面板中的所有 Hyper-V 服务都已停止（并且从未自动启动）
*   执行完全关机和冷启动。

但是，我尝试在上述操作之后安装 VirtualBox（VirtualBox 安装良好）并创建了一个新 VM。运行虚拟机导致我的机器蓝屏，但重启后 HAXM 安装正常。也许运行 VirtualBox 会在操作系统级别翻转某种标志以允许安装 HAXM。

当时我也在运行 AVAST，根据这个（[运行新的 Intel emulator for Android](https://stackoverflow.com/questions/10761696/running-the-new-intel-emulator-for-android/14649702#14649702)），这可能会导致问题。但是，我不必禁用 AVAST 即可安装 HAXM。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-30T06:15:13.763

我有同样的问题。经过长时间的搜索，我找到了答案。就我而言，我已经安装了 Avast Antivirus，首先卸载 avast，重新启动您的 PC，安装 Haxm，然后重新启动。您可以再次安装防病毒软件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T20:57:06.047

您可以尝试在不需要时停止 Hyper-V 服务，并在您想要处理 WP8 项目时重新启用它。这是一种痛苦，但 HAXM 提供的性能改进是巨大的。

打开 services.msc，找到 hvboot 服务（Hyper-V）并停止它。如果这没有帮助，您可能需要禁用该服务并重新启动您的电脑。

# objective-c - 将github项目复制到自己的项目中

> ID：13285690
> 
> 赞同：0
> 
> 时间：2012-11-08T09:02:03.207
> 
> 标签：objective-c, ios, github, terminal

我想将一个 github 项目复制到我自己的项目中。我在终端中执行了以下操作

```
cd *your-project-location*
git submodule add git@github.com:escoz/QuickDialog.git 
```

我给了我的项目文件夹所有读写权限，但在终端中它给出了以下错误。

```
MacBook-Pro-van-Stef-2:FormsExample geelenstef$ git submodule add git@github.com:escoz/QuickDialog.git
Cloning into 'QuickDialog'...
Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.
Clone of 'git@github.com:escoz/QuickDialog.git' into submodule path 'QuickDialog' failed 
```

有人有想法吗？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:43:40.150

您正在使用对 github 的读/写访问权限，因此您需要设置 SSH 密钥来允许这样做。如果您只想要只读访问权限，请改用`https://`URL 方案。

如果你想对这个项目进行更改，那么你需要在 github 上 fork 并使用读/写访问 ( `git@github...`) 来访问它，正如我所说的，这需要一个 SSH 密钥，并且超出了 stackoverflow 的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T09:05:40.003

使用它添加为子模块： git submodule add [https://github.com/escoz/QuickDialog](https://github.com/escoz/QuickDialog)

# c++ - 保证在处置类时处置类成员

> ID：13285694
> 
> 赞同：3
> 
> 时间：2012-11-08T09:02:27.777
> 
> 标签：c++, destructor, composition

我有以下情况：

我的 A 类包含 B 类的堆栈成员对象：

```
Class A{
    B b;
} 
```

我正在使用 B 对象来重新定义 A 的初始化和销毁​​的行为。

```
Class B{
    B(){cout<<"taken care of some specific context initialization"<<endl;}
    ~B(){cout<<"cleaning the context initialization done before"<<endl;}
} 
```

到目前为止，这是有效的，因为 ~B() 在 b 被销毁时被调用（我猜它是在 A 析构函数之后完成的）。

这是我正在寻找的行为，但我害怕编译器说：“嘿，你没有使用对象，我要回收之前的内存”的可能性。我想它应该发生，但是在任何编译器中都有可能吗？我的意思是，是否设定了您必须等待A被破坏的标准？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:08:01.083

C++ 遵循一种as-if 行为，这意味着**只要程序的行为不受影响，***理论上*就有可能`b`被销毁。如果它没有受到影响，那么它何时被破坏并不重要。

 **但在实践中，`b`将在其所有者`A`实例的析构函数被销毁后立即被销毁。

它由以下方式保证：

### 12.4 析构函数 [class.dtor]

> 8)**在执行析构函数的主体**并销毁主体内分配的任何自动对象后，**X 类的析构函数调用 X 的直接非变体非静态数据成员的析构函数，X 的直接基类的析构函数**，如果 X是最派生类（12.6.2）的类型，它的析构函数调用 X 的虚拟基类的析构函数。[...]（强调我的）

请注意，其可观察行为表现得好像正在发生这种情况的实现仍然符合标准。在您的特定情况下，由于析构函数具有 IO 操作，因此可以保证此行为实际发生。**

# jvm - JVM的作用

> ID：13285695
> 
> 赞同：0
> 
> 时间：2012-11-08T09:02:28.387
> 
> 标签：jvm, virtual-machine, vm-implementation

JVM（可能还有 CLI）会被视为虚拟*机*（相当于“普通”程序堆栈中的 x86）还是虚拟*操作系统*（相当于 Windows）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:09:58.520

严格来说，它是一个虚拟机，即：它执行一种特殊的低级语言（类似于 x86 ASM。CLI 使用 MSIL，JVM 使用“字节码”）并将它们翻译成目标机器的操作码（x86，x86_64 , ARM .. 等）用于在主机 CPU 上执行。

它还管理编组（即：正确处理并将变量传递到本机内存堆栈/堆）以允许从托管世界内部到运行 VM 的外部操作系统的函数调用。

但实际上，除了自动垃圾收集和 CPU 架构独立性之外，单独的 JVM 和 CLI 都不是很有帮助，但它们由一个大型基础库（Java 类或 .NET BCL）补充，它允许你做许多平台相关的东西，而无需调用特定于平台的 API 并手动对所有内容使用封送处理。

这就是为什么每个操作系统都有不同的 Java 运行时环境。每个人的 JVM 都转换为特定的 CPU 架构，并使用不同的平台特定 API 来完成统一基础库作为托管世界中的友好 API 向您公开的内容。

希望对您有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:17:23.260

jvm被认为是一台真正的计算机，只是没有在硬件中实现。机器有它自己的存储容量、它自己的内存模型、它自己的中央处理器的特定行为和它自己的内部机器代码。这台机器可以通过类、API 等表示的新可能性和模块进行扩展......

它有自己的基于堆栈的架构，就像大多数虚拟机一样。

# javascript - 用 id 和 index 替换 a 的内容

> ID：13285702
> 
> 赞同：0
> 
> 时间：2012-11-08T09:02:46.490
> 
> 标签：javascript, jquery

我有这样的表结构

```
<table>
    <tr id="tr_1">
        <td>Content1</td>
        <td>Content2</td>
        <td>Content3</td>
        <td>Content4</td>
    </tr>
    <tr id="tr_2">
        <td>Content5</td>
        <td>Content6</td>
        <td>Content7</td>
        <td>Content8</td>
    </tr>
    <tr id="tr_1">
        <td>Content11</td>
        <td>Content12</td>
        <td>Content13</td>
        <td>Content14</td>
    </tr>
    <tr id="tr_2">
        <td>Content15</td>
        <td>Content16</td>
        <td>Content17</td>
        <td>Content18</td>
    </tr>
</table> 
```

我将行 index(2) 和`<tr>`id (tr_1) 传递给一个 js 函数，用于替换该行中 2nd 3 rd td 的内容。我有一个 jquery 函数

```
document.getElementById('tr_1').getElementsByTagName("td")[2].innerHTML = '<td>New html</td>'; 
```

但这取代了第一个`tr`html。我们如何`tr_1`用索引 2替换 id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:10:52.810

尝试这个：

```
jQuery("[id=tr_1]:eq(1) td:eq(1)").html("new html"); 
```

请注意，您需要插入 jquery 插件：

[http://jquery.com/download/](http://jquery.com/download/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:12:23.763

如果您使用的是 jquery .. 那么这应该可以工作..

```
$("#tr_1 td").eq(2).html("<td>New html</td>"); 
```

这是 eq() 的链接... [http://api.jquery.com/eq/](http://api.jquery.com/eq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:14:22.047

尝试这个

```
<script language="javascript" type="text/javascript" src="jquery-1.8.2.js"></script>
<script language="javascript" type="text/javascript">
$(document).ready(function() {
    $('#tr_1 td:eq(1)').html('Replacing Content of td 2');
    $('#tr_1 td:eq(2)').html('Replacing Content of td 3');
});                
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:20:28.600

您没有唯一的 ID。对于 JavaScript 来说，DOM 使用唯一 ID 是必不可少的。

在 jQuery 中，您可以使用它来定位 id 设置为的 to tr 元素`tr_1`：

```
$("tr[id=tr_1]"); 
```

要获取这些 tr 中的第二个元素，您需要使用[jQuery.fn.each](http://api.jquery.com/each/)

```
$("tr[id=tr_1]").each(function() {
    $("td", this).eq(1).html("new html");
}); 
```

# php - Phpinfo（）不显示卷曲

> ID：13285704
> 
> 赞同：5
> 
> 时间：2012-11-08T09:02:55.207
> 
> 标签：php, curl

我`php_curl.dll`在我设置`xampp/php/ext/`的文件夹和文件中（删除了';'）。我也设置在文件中。然后我重新启动了 Apache，即使我重新启动了 2 次系统。但直到我可以“调用未定义的函数 curl_init()”``php.ini``extension=php_curl.dll``extension_dir = "C:\xampp\php\extensions\"``php.ini``Phpinfo()``t see curl. and I am getting error like`

我有 PHP 版本 5.2.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T20:31:43.667

检查您的 Apache`error_log`文件。即使`php_curl.dll`在您的 中激活`php.ini`，启动问题也可能会禁用您的`php_curl.dll`，因此它不会出现在`phpinfo()`. 搜索任何这样的行：

`PHP Warning: PHP Startup: Unable to load dynamic library`

还要检查`php.ini`是否加载了正确的文件（显示在开头`phpinfo()`）以及您`extension_dir`的配置是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T15:01:44.227

“在[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)。从固定下载您需要的文件页面底部的 curl 扩展名列表，例如 Windows 7 64 位机器将与非 nts 文件一起正常工作。”

资料来源： http: [//www.developingtheweb.co.uk/php-5-4-3-and-5-3-13-curl-extension-fix/](http://www.developingtheweb.co.uk/php-5-4-3-and-5-3-13-curl-extension-fix/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-29T19:50:06.500

您可能需要使用整个路径而不是相对路径。

将该行更改为此为我修复了它：extension="C:\php\ext\php_curl.dll"

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:32:01.940

并非每个`php_curl.dll`都与您的系统配置兼容。确保您使用的是扩展的兼容版本。

然而，为了确保您正在编辑正确的 php.ini，您可以阅读 phpinfo 的输出。它会告诉你哪个 php.ini 文件已被加载。确保您正在修改同一个文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:36:47.193

添加

```
extension=php_curl.dll 
```

在 php.ini 中

# ubuntu - 带有 Ubuntu 11.04x64/MediaTemple 的 Phantom.js - 分段错误

> ID：13285706
> 
> 赞同：0
> 
> 时间：2012-11-08T09:02:57.750
> 
> 标签：ubuntu, segmentation-fault, ubuntu-11.04, phantomjs, mediatemple

我正在尝试在 Ubuntu 11.04 x64 上使用 Phantom.js 1.7。主机是mediatemple。当我做“./phantomjs”时，我得到了这个 -

PhantomJS 崩溃了。[请阅读https://code.google.com/p/phantomjs/wiki/CrashReporting](https://code.google.com/p/phantomjs/issues/entry)上的崩溃报告指南，并在[https://code.google.com/p/phantomjs/issues/entry](https://code.google.com/p/phantomjs/wiki/CrashReporting)上提交错误报告与崩溃附加转储文件：/tmp/7dac25de-0ce0-d719-2e631f5b-593eb037.dmp 分段错误

（已经提交了错误报告 - [https://code.google.com/p/phantomjs/issues/detail?id=860&thanks=860&ts=1352298059](https://code.google.com/p/phantomjs/issues/detail?id=860&thanks=860&ts=1352298059)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T08:07:31.440

当进程试图访问 CPU 无法物理寻址的内存时，就会发生分段错误。

这意味着当您尝试启动 phantomjs 时，您从他们那里租用的服务器上可能没有足够的 RAM。

我会尝试增加您的 RAM，以便您的进程有更多内存可供访问。

* * *

**编辑**当我在 linux ubuntu 12.04 机器上运行 phantomjs 时，通过检查它的内存使用情况，它在创建的所有进程中平均，大约 0.7GB - 1.1GB 的 RAM 使用量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T18:26:21.160

尝试像这样添加：

```
var page = require('webpage').create();
//...
page.settings = { 
  // userAgent: agent, 
  loadImages: false//, 
  // localToRemoteUrlAccessEnabled: true, 
  // javascriptEnabled: true,
  // loadPlugins: false 
};
page.open(page.address, function (status) {
//... 
```

它帮助到我 ：）

# c++ - dlmopen 的 OSX 替代品

> ID：13285710
> 
> 赞同：4
> 
> 时间：2012-11-08T09:03:03.840
> 
> 标签：c++, c, macos

OSX 上缺少 dlmopen 我正在将 Linux 应用程序移植到 OSX 并且我正在大量使用它，在 Mac 上还有其他替代 dlmopen 的方法吗？

# objective-c - 分配字符串时发送到实例的无法识别的选择器

> ID：13285712
> 
> 赞同：0
> 
> 时间：2012-11-08T09:03:20.133
> 
> 标签：objective-c, ios, nsstring, uibutton, subclass

我有一个自定义按钮，我想分配一个字符串，然后将该按钮作为@selector 中的参数传递。出于这个原因，在头文件 CustomButton 中，我放置了一个属性“名称”。但是，当我将字符串分配给按钮时，出现此错误。

```
'NSInvalidArgumentException', reason: '-[UIButton setName:]: unrecognized selector sent 
to instance 0x8484560' 
```

这是什么意思？

CustomButton.h 中的代码：

```
 @interface CustomButton : UIButton

 @property (nonatomic, strong)NSString * name;

 @end 
```

CustomButton.m 中的代码：

```
 @synthesize name; 
```

在 MapViewController.m

```
CustomButton *rightButton = [CustomButton buttonWithType:UIButtonTypeInfoLight];

NSLog(@"The button is %@", rightButton);
/*The button is <UIButton: 0x8484560; frame = (0 0; 18 19); opaque = NO; layer = 
  <CALayer: 0x8484670>>*/

rightButton.name = self.nameTable; //the error is here 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:36:24.523

所以，我有一个类似的“自定义按钮”，它似乎工作正常：

```
CustomButton* btn = [CustomButton buttonWithType:UIButtonTypeCustom];
[btn setName:@"Road Runner"];
//OR 
btn.name = @"Road Runner";

NSLog(@"Custom button %@", btn);
/*
OUTPUT: <CustomButton: 0x68283f0; baseClass = UIButton; frame = (0 0; 0 0); 
opaque = NO; layer = <CALayer: 0x6828500>>
*/

NSLog(@"Button's name is %@", btn.name);
/* 
OUTPUT: Road Runner //the name that was set earlier
*/ 
```

因此，请检查您是否正确创建了`CustomButton`该类，因为在控制台中，它是正在显示的 UIButton。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:11:54.553

你是如何设置标题的？你还没有发布代码。应该是这样的——

```
[rightButton setTitle:[NSString stringWithFormat:@"%@", buttonTitle]  forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:18:45.510

将按钮类型更改为`UIButtonTypeCustom`。

```
CustomButton *rightButton = [CustomButton buttonWithType:UIButtonTypeCustom]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:21:41.207

没有 setName :D setTitle forState （如 sriskar 所说）或 button.titleLabel.text IIRC

# logging - Boost 1.52.0 上的 Boost.Log 安装错误

> ID：13285714
> 
> 赞同：2
> 
> 时间：2012-11-08T09:03:29.223
> 
> 标签：logging, boost

我试图将 Boost.Log 编译成 boost_1_52_0。一旦我开始执行以下命令：

C:\boost_1_52_0>bjam --with-log variant=debug define=BOOST_LOG_USE_CHAR define=B OOST_LOG_USE_WINNT6_API 阶段 --build-type=complete --link= 执行配置检查

编译未完成，生成的lib文件较少，曾经我写了一个hello world程序来利用boost.log，它报错“错误2错误LNK1104：无法打开文件'libboost_log-vc100-mt-gd-1_52.lib '。

以下是输出：

```
 - has_icu builds           : no

Component configuration:

    - chrono                   : not building
    - context                  : not building
    - date_time                : not building
    - exception                : not building
    - filesystem               : not building
    - graph                    : not building
    - graph_parallel           : not building
    - iostreams                : not building
    - locale                   : not building
    - log                      : building
    - math                     : not building
    - mpi                      : not building
    - program_options          : not building
    - python                   : not building
    - random                   : not building
    - regex                    : not building
    - serialization            : not building
    - signals                  : not building
    - system                   : not building
    - test                     : not building
    - thread                   : not building
    - timer                    : not building
    - wave                     : not building

...patience...
...patience...
...patience...
...found 9657 targets...
...updating 17 targets...
compile-c-c++ bin.v2\libs\log\build\msvc-10.0\debug\threading-multi\text_file_ba
ckend.obj
text_file_backend.cpp
libs\log\src\text_file_backend.cpp(956) : warning C4244: 'initializing' : conver
sion from 'unsigned short' to 'unsigned char', possible loss of data
libs\log\src\text_file_backend.cpp(1197) : error C2039: 'get_generic_category' :
 is not a member of 'boost::system'
        libs\log\src\text_file_backend.cpp(1169) : while compiling class templat
e member function 'void boost::log_mt_nt6::sinks::basic_text_file_backend<CharT>
::do_consume(const boost::log_mt_nt6::basic_record<CharT> &,const std::basic_str
ing<_Elem,_Traits,_Ax> &)'
        with
        [
            CharT=char,
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
        libs\log\src\text_file_backend.cpp(1439) : see reference to class templa
te instantiation 'boost::log_mt_nt6::sinks::basic_text_file_backend<CharT>' bein
g compiled
        with
        [
            CharT=char
        ]
libs\log\src\text_file_backend.cpp(1197) : error C3861: 'get_generic_category':
identifier not found

    call "C:\Program Files\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 >n
ul
cl /Zm800 -nologo @"bin.v2\libs\log\build\msvc-10.0\debug\threading-multi\text_f
ile_backend.obj.rsp"

...failed compile-c-c++ bin.v2\libs\log\build\msvc-10.0\debug\threading-multi\te
xt_file_backend.obj...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\threading-multi>boost_log-vc1
00-mt-gd-1_52.dll for lack of <pbin.v2\libs\log\build\msvc-10.0\debug\threading-
multi>text_file_backend.obj...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\threading-multi>boost_log-vc1
00-mt-gd-1_52.lib for lack of <pbin.v2\libs\log\build\msvc-10.0\debug\threading-
multi>text_file_backend.obj...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\threading-multi>boost_log-vc1
00-mt-gd-1_52.pdb for lack of <pbin.v2\libs\log\build\msvc-10.0\debug\threading-
multi>text_file_backend.obj...
...skipped <pstage\lib>boost_log-vc100-mt-gd-1_52.dll for lack of <pbin.v2\libs\
log\build\msvc-10.0\debug\threading-multi>boost_log-vc100-mt-gd-1_52.dll...
...skipped <pstage\lib>boost_log-vc100-mt-gd-1_52.lib for lack of <pbin.v2\libs\
log\build\msvc-10.0\debug\threading-multi>boost_log-vc100-mt-gd-1_52.lib...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\threading-multi>boost_log_set
up-vc100-mt-gd-1_52.dll for lack of <pbin.v2\libs\log\build\msvc-10.0\debug\thre
ading-multi>boost_log-vc100-mt-gd-1_52.lib...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\threading-multi>boost_log_set
up-vc100-mt-gd-1_52.lib for lack of <pbin.v2\libs\log\build\msvc-10.0\debug\thre
ading-multi>boost_log-vc100-mt-gd-1_52.lib...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\threading-multi>boost_log_set
up-vc100-mt-gd-1_52.pdb for lack of <pbin.v2\libs\log\build\msvc-10.0\debug\thre
ading-multi>boost_log-vc100-mt-gd-1_52.lib...
...skipped <pstage\lib>boost_log_setup-vc100-mt-gd-1_52.dll for lack of <pbin.v2
\libs\log\build\msvc-10.0\debug\threading-multi>boost_log_setup-vc100-mt-gd-1_52
.dll...
...skipped <pstage\lib>boost_log_setup-vc100-mt-gd-1_52.lib for lack of <pbin.v2
\libs\log\build\msvc-10.0\debug\threading-multi>boost_log_setup-vc100-mt-gd-1_52
.lib...
compile-c-c++ bin.v2\libs\log\build\msvc-10.0\debug\link-static\threading-multi\
text_file_backend.obj
text_file_backend.cpp
libs\log\src\text_file_backend.cpp(956) : warning C4244: 'initializing' : conver
sion from 'unsigned short' to 'unsigned char', possible loss of data
libs\log\src\text_file_backend.cpp(1197) : error C2039: 'get_generic_category' :
 is not a member of 'boost::system'
        libs\log\src\text_file_backend.cpp(1169) : while compiling class templat
e member function 'void boost::log_mt_nt6::sinks::basic_text_file_backend<CharT>
::do_consume(const boost::log_mt_nt6::basic_record<CharT> &,const std::basic_str
ing<_Elem,_Traits,_Ax> &)'
        with
        [
            CharT=char,
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
        libs\log\src\text_file_backend.cpp(1439) : see reference to class templa
te instantiation 'boost::log_mt_nt6::sinks::basic_text_file_backend<CharT>' bein
g compiled
        with
        [
            CharT=char
        ]
libs\log\src\text_file_backend.cpp(1197) : error C3861: 'get_generic_category':
identifier not found

    call "C:\Program Files\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 >n
ul
cl /Zm800 -nologo @"bin.v2\libs\log\build\msvc-10.0\debug\link-static\threading-
multi\text_file_backend.obj.rsp"

...failed compile-c-c++ bin.v2\libs\log\build\msvc-10.0\debug\link-static\thread
ing-multi\text_file_backend.obj...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\link-static\threading-multi>l
ibboost_log-vc100-mt-gd-1_52.lib for lack of <pbin.v2\libs\log\build\msvc-10.0\d
ebug\link-static\threading-multi>text_file_backend.obj...
...skipped <pstage\lib>libboost_log-vc100-mt-gd-1_52.lib for lack of <pbin.v2\li
bs\log\build\msvc-10.0\debug\link-static\threading-multi>libboost_log-vc100-mt-g
d-1_52.lib...
compile-c-c++ bin.v2\libs\log\build\msvc-10.0\debug\link-static\runtime-link-sta
tic\threading-multi\text_file_backend.obj
text_file_backend.cpp
libs\log\src\text_file_backend.cpp(956) : warning C4244: 'initializing' : conver
sion from 'unsigned short' to 'unsigned char', possible loss of data
libs\log\src\text_file_backend.cpp(1197) : error C2039: 'get_generic_category' :
 is not a member of 'boost::system'
        libs\log\src\text_file_backend.cpp(1169) : while compiling class templat
e member function 'void boost::log_mt_nt6::sinks::basic_text_file_backend<CharT>
::do_consume(const boost::log_mt_nt6::basic_record<CharT> &,const std::basic_str
ing<_Elem,_Traits,_Ax> &)'
        with
        [
            CharT=char,
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Ax=std::allocator<char>
        ]
        libs\log\src\text_file_backend.cpp(1439) : see reference to class templa
te instantiation 'boost::log_mt_nt6::sinks::basic_text_file_backend<CharT>' bein
g compiled
        with
        [
            CharT=char
        ]
libs\log\src\text_file_backend.cpp(1197) : error C3861: 'get_generic_category':
identifier not found

    call "C:\Program Files\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 >n
ul
cl /Zm800 -nologo @"bin.v2\libs\log\build\msvc-10.0\debug\link-static\runtime-li
nk-static\threading-multi\text_file_backend.obj.rsp"

...failed compile-c-c++ bin.v2\libs\log\build\msvc-10.0\debug\link-static\runtim
e-link-static\threading-multi\text_file_backend.obj...
...skipped <pbin.v2\libs\log\build\msvc-10.0\debug\link-static\runtime-link-stat
ic\threading-multi>libboost_log-vc100-mt-sgd-1_52.lib for lack of <pbin.v2\libs\
log\build\msvc-10.0\debug\link-static\runtime-link-static\threading-multi>text_f
ile_backend.obj...
...skipped <pstage\lib>libboost_log-vc100-mt-sgd-1_52.lib for lack of <pbin.v2\l
ibs\log\build\msvc-10.0\debug\link-static\runtime-link-static\threading-multi>li
bboost_log-vc100-mt-sgd-1_52.lib...
...failed updating 3 targets...
...skipped 14 targets... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T13:17:37.250

经过数小时的尝试，Boost 1.52.0 上的 boost filesyetem V3 存在与 boost.log 版本 1.1 不兼容的问题。因此，它需要使用“svn”来下载 Boost.Log v2 主干。命令如下：

svn co [https://boost-log.svn.sourceforge.net/svnroot/boost-log](https://boost-log.svn.sourceforge.net/svnroot/boost-log) boost-log

然后，我执行以下步骤：

1.  将“boost\log”文件夹从 boost-log 复制到“\boost_1_52_0\boost”文件夹
2.  将“libs\log”文件夹从 boost-log 复制到“\boost_1_52_0\libs”文件夹
3.  在命令提示符下，进入“boost_1_52_0”文件夹，执行“bootstrap.bat --show-libraries”
4.  在“boost_1_52_0”文件夹中，执行“b2.exe”

手指交叉，您可能会在编译结束时收到以下消息。

```
...
compile-c-c++ bin.v2\libs\log\build\msvc-10.0\release\link-static\threading-mult
i\default_filter_factory.obj
default_filter_factory.cpp
msvc.archive bin.v2\libs\log\build\msvc-10.0\release\link-static\threading-multi
\libboost_log_setup-vc100-mt-1_52.lib
common.copy stage\lib\libboost_log_setup-vc100-mt-1_52.lib
bin.v2\libs\log\build\msvc-10.0\release\link-static\threading-multi\libboost_log
_setup-vc100-mt-1_52.lib
        1 file(s) copied.
...updated 87 targets...

The Boost C++ Libraries were successfully built!

The following directory should be added to compiler include paths:

    D:/boost_1_52_0

The following directory should be added to linker library paths:

    D:\boost_1_52_0\stage\lib 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:24:42.100

此版本的 Boost.Log 使用已弃用的“get_generic_category()”函数，该函数现已从 Boost.System 中删除。因此，您可以降级 Boost，或手动将 Boost.Log 更改为`get_generic_category()`（`generic_category()`以及等）。`get_system_category()``system_category()`

**更新**似乎我弄错了：根据[文档](http://www.boost.org/doc/libs/1_52_0/libs/system/doc/reference.html)，上述功能仍然存在，除非定义了 BOOST_SYSTEM_NO_DEPRECATED 。所以检查 Boost.Log 是否定义了它。

# javascript - jQuery对每个元素只执行一次点击功能？

> ID：13285715
> 
> 赞同：2
> 
> 时间：2012-11-08T09:03:31.400
> 
> 标签：javascript, jquery

通过添加框按钮 (#purchase)，我将框/物品添加到购物车。（这需要 25 个学分）

当你点击里面的橙色 div 时，学分也会减少 15 个学分，并淡出顶部 div（因此你可以看到哪个元素已经花费了 15 个学分。淡出只发生一次，这很好，但是当它正在淡出，用户仍然可以单击 div，这会导致积分减少超过应有的程度。

我用 .one() 尝试了一些东西，但它只适用于附加的元素之一。谁能告诉我如何做到这一点？以及为什么。

[**JSFiddle**](http://jsfiddle.net/WXyk6/)

**代码** *HTML*

```
<button id="purchase">Add a box </button>
<input id="money">
<div class="container"></div> 
```

*JS*

```
var counter = 0;
$("#money").val(250);

$('#purchase').click(function() {

   if ($("#money").val() < 25) {return;}
    var box = $('<div class="box"' + (counter) + '><div class="yellow"' + (counter) + '><div class="buy"' + (counter) + '></div></div></div>').appendTo('.container');
    $("#money").val(Number($("#money").val()) - 25).triggerHandler('change');

});

$('#money').change(function() {
    $('#purchase').prop("disabled", $(this).val() < 25);
});

$('.container').on('click', '.buy', function() {
    if ($("#money").val() < 15) {return;}
    $(this).fadeOut(4000, callbackFunction);
    $("#money").val(Number($("#money").val()) - 15).triggerHandler('change');
});

function callbackFunction() {
 alert('done');   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:06:04.787

您可以使用`one()`附加一个事件处理程序，每个元素只能运行一次。试试这个：

```
$('.container').one('click', '.buy', function() {
    if ($("#money").val() < 15) {return;}
    $(this).fadeOut(4000, callbackFunction);
    $("#money").val(Number($("#money").val()) - 15).triggerHandler('change');
}); 
```

API 参考：[one()](http://api.jquery.com/one/)

**更新**

您也可以使用以下方法手动实现此目的`unbind()`：

```
$('.container').on('click', '.buy', function() {
    $(this).unbind('click');
    if ($("#money").val() < 15) {return;}
    $(this).fadeOut(4000, callbackFunction);
    $("#money").val(Number($("#money").val()) - 15).triggerHandler('change');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T10:16:15.613

检查代码并为您希望仅实现一次单击的元素实现它

```
$("purchase").one("click", function() {
if ($("#money").val() < 25) {return;}
var box = $('<div class="box"' + (counter) + '><div class="yellow"' + (counter) + '><div       class="buy"' + (counter) + '></div></div></div>').appendTo('.container');
$("#money").val(Number($("#money").val()) - 25).triggerHandler('change');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T10:29:05.083

创建元素时绑定事件：

```
var counter = 0;
$("#money").val(250);

$('#purchase').click(function() {

    if ($("#money").val() < 25) {return;} // or alert('not enough money');
    $('<div class="box">').data('counter',counter)
           .append($('<div class="yellow">').data('counter',counter)
           .append($('<div class="buy">').data('counter',counter).one('click',buy_click)
                  )).appendTo('.container');
    $("#money").val(Number($("#money").val()) - 25).triggerHandler('change');

});

$('#money').change(function() {
    $('#purchase').prop("disabled", $(this).val() < 25);
});

var callbackFunction=function() {};

var buy_click=function() {
    if ($("#money").val() < 15) {return;}
    $(this).fadeOut(4000, callbackFunction);
    $("#money").val(Number($("#money").val()) - 15).triggerHandler('change');
}; 
```

> 使用 data() 来保存数据，而不仅仅是数字

# php - SoapFault 异常：[Client] 看起来我们没有 XML 文档

> ID：13285716
> 
> 赞同：1
> 
> 时间：2012-11-08T09:03:39.247
> 
> 标签：php, soap

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-06-11T08:15:13.530

我懂了：

> 致命错误：未捕获的 SoapFault 异常：[Client] 看起来我们没有 XML 文档...

而且，我更改了 php.ini 文件行

> ;always_populate_raw_post_data = -1

有了这个：

> always_populate_raw_post_data = -1

例如没有**;**

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T16:00:11.797

尝试添加

```
error_reporting( 0 ) ; 
```

到页面顶部。

# c++ - Passing pointer array as void pointer to new thread in c++

> ID：13285718
> 
> 赞同：1
> 
> 时间：2012-11-08T09:03:48.387
> 
> 标签：c++, arrays, multithreading, pointers, void

I am currently working on a project where I have to build a shell for a C++ dll, so a new C# GUI can use its functions. However I got the following problem, in the C++ portion I have to create a new thread for specific reasons, and I want to pass an int array to the new thread. Note that the values assigned to the array in the function in which this happens are gained from the C# portion of the code.

```
__declspec( dllexport ) void CreateReportPane(int &id, int &what)
{
    DWORD threadId; 
    int iArray[2] = { id, what};    

    HANDLE hThread = CreateThread( NULL, 0, CreateReportPaneThread, iArray, 0,  &threadId);
    if (hThread == NULL) 
    {           
        ExitProcess(3);
    }    
} 
```

The problem arises in the new thread, I can reliably fetch the first value out of the array, but the 2nd value seems to be released, here is the code on the other side.

```
DWORD WINAPI CreateReportPaneThread(LPVOID lparam)
{
    int id, what;
    id = *(( int * )lparam);
    what = *(((int *)lparam)+1) ; 
    CreateReportPaneOriginal(id, what);

    return 0;
} 
```

Is there any way to prevent the values in the array from getting released while not holding the original thread captive? A big thank you in advance

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:07:26.040

```
int iArray[2] = { id, what};    

HANDLE hThread = CreateThread(...,CreateReportPaneThread, iArray, ...); 
```

问题是这`iArray`是一个本地数组，这意味着当函数`CreateReportPane()`返回时它会被破坏。所以`CreateReportPaneThread()`所指的是不存在的。你得到第一个值只是偶然。没有这样的保证，你甚至会得到第一个值。

使用动态数组：

```
int * iArray  = new int[2];
iArray[0] = id;
iArray[1] = what;

HANDLE hThread = CreateThread(...,CreateReportPaneThread, iArray, ...); 
```

完成后请记住在以下位置编写*解除分配*数组`CreateReportPaneThread`：

```
DWORD WINAPI CreateReportPaneThread(PVOID *data)
{
     int *array = static_cast<int*>(data);

     int id = array[0], what = array[1];

     delete []array; //MUST DO IT to avoid memory leak!

     //rest of your code
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:06:29.727

动态分配数组以防止数组在退出时超出范围`CreateReportPane()`：

```
int* iArray = new int[2];
iArray[0] = id;
iArray[1] = what; 
```

否则线程正在访问一个不再有效的数组，这是未定义的行为。当不再需要它时，线程例程`CreateReportPaneThread()`必须然后数组（注意使用and not ）。`delete[]``delete[]``delete`

# delphi - Delphi中如何获取结构项

> ID：13285724
> 
> 赞同：3
> 
> 时间：2012-11-08T09:04:08.743
> 
> 标签：delphi

今天是我与德尔福的第一天。

我有这样的记录：

```
type 
  FT_Device_Info_Node = record
    Flags         : DWord;
    DeviceType    : Dword;
    ID            : DWord;
    LocID         : DWord;
    SerialNumber  : array [0..15] of Char;
    Description   : array [0..63] of Char;
    DeviceHandle  : DWord;
  end; 
```

后来我只能读取数组，例如它可以工作：`FT_DeviceInfoList[0].SerialNumber` 但是我无法访问任何 DWord 项目，例如`FT_DeviceInfoList[0].ID`是不可能的。

你能为我澄清一下吗？

编辑：这是我想从记录中获取信息的按钮单击过程：

```
procedure TForm1.checkFTDIClick(Sender: TObject);
var
  i : integer;
begin
  ftStatus := FT_CreateDeviceInfoList(@dwNumDevs);
  SetLength(FT_DeviceInfoList,dwNumDevs);
  ftStatus :=  FT_GetDeviceInfoList(FT_DeviceInfoList, @dwNumDevs);
  If ftStatus <> FT_OK then ShowMessage('Error '+IntToStr(ftStatus));

  Form1.ComboBox1.Items.Clear;
  for i:=0 to dwNumDevs-1 do
  begin
    Form1.ComboBox1.Items.Add(FT_DeviceInfoList[i].Description);//works
    //Form1.ComboBox1.Items.Add(FT_DeviceInfoList[i].ID);//compilation error
  end;
  Form1.ComboBox1.ItemIndex := 0;

end; 
```

FT 东西来自 FTDI 库，返回状态正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:42:08.587

您的预期代码是：

```
Form1.ComboBox1.Items.Add(FT_DeviceInfoList[i].ID); 
```

这会导致编译错误。那是因为`Add`需要一个 type 的参数`string`。但是您传递的是`DWORD`一个整数参数。

通过调用将其从整数数据类型转换为字符串`IntToStr`：

```
Form1.ComboBox1.Items.Add(IntToStr(FT_DeviceInfoList[i].ID)); 
```

# playframework-2.0 - How can I get the Oauth Access Token when using play-authenticate?

> ID：13285726
> 
> 赞同：3
> 
> 时间：2012-11-08T09:04:28.337
> 
> 标签：playframework-2.0

I am using play-authenticate to login a user with Google Oauth2\. Now I want to get the Access Token so I can use some Google APIs.

Can anyone help me out here? Is it so obvious that I am missing how to do it?

I can get a User like this (from the examples):

```
final AuthUser u = PlayAuthenticate.getUser(session()); 
```

But what I really need is the

```
OAuth2AuthUser.getOAuth2AuthInfo().getAccessToken() 
```

I can't cast the `AuthUser` as an `OAuth2AuthUser`. so how can I do it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:14:10.603

我们提出了一个解决方案，它覆盖了我们的 UserServicePlugin 的更新方法。只需创建一个派生自 com.feth.play.module.pa.service.UserServicePlugin 的类，并将该类注册为您的 play.plugins 文件中的插件（正如您在使用 play-authenticate 时可能已经完成的那样）。

然后，在覆盖的更新方法中，您可以随意存储访问令牌。

```
@Override
public AuthUser update(final AuthUser knownUser)
{
    if (knownUser instanceof OAuth2AuthUser)
    {
        OAuth2AuthUser oAuth2AuthUser = (OAuth2AuthUser) knownUser;
        String oauth2accessToken = oAuth2AuthUser.getOAuth2AuthInfo().getAccessToken();
        Context.current().session().put("oauth2accessToken", oauth2accessToken);
    }

    return knownUser;
} 
```

[文档](https://github.com/joscha/play-authenticate/blob/master/samples/java/Getting%20Started.md)说这是“当用户登录时调用的方法。您可以在此处使用来自登录提供程序的数据进行配置文件更新，或者增加最后登录日期。”

实际上，调用 Authenticate.authenticate （就像您从路由中所做的那样）依次调用 PlayAuthenticate.handleAuthentication、PlayAuthenticate.loginAndRedirect、PlayAuthenticate.storeUser 并最终更新当前用户服务插件。

# java - 中文字母顺序 - java.text.Collat or

> ID：13285727
> 
> 赞同：3
> 
> 时间：2012-11-08T09:04:32.130
> 
> 标签：java, internationalization, locale, chinese-locale

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:30:43.177

Java 6 或 7 中没有 Collat​​or 可以按照与第一个样本相同的顺序对中文进行排序。

```
public static void main(String... args) {
    String text1 = "啊&lt;波&lt;词&lt;的&lt;俄&lt;佛&lt;歌&lt;和&lt;及&lt;课&lt;了&lt;馍&lt;呢&lt;票&lt;气&lt;日&lt;四&lt;特&lt;瓦&lt;喜&lt;以&lt;只";
    findLocaleForSortedOrder(text1);
    String text2 = "啊&lt;波&lt;词&lt;的&lt;俄&lt;佛&lt;歌&lt;和&lt;及&lt;课&lt;了&lt;呢&lt;票&lt;气&lt;日&lt;四&lt;特&lt;瓦&lt;喜&lt;以&lt;只&lt;馍";
    findLocaleForSortedOrder(text2);
}

private static void findLocaleForSortedOrder(String text) {
    System.out.println("For " + text + " found...");
    String[] preSorted = text.split("<");
    for (Locale locale : Collator.getAvailableLocales()) {
        String[] sorted = preSorted.clone();
        Arrays.sort(sorted, Collator.getInstance(locale));
        if (Arrays.equals(preSorted, sorted))
            System.out.println("Locale " + locale + " has the same sorted order");
    }
    System.out.println();
} 
```

印刷

```
For 啊&lt;波&lt;词&lt;的&lt;俄&lt;佛&lt;歌&lt;和&lt;及&lt;课&lt;了&lt;馍&lt;呢&lt;票&lt;气&lt;日&lt;四&lt;特&lt;瓦&lt;喜&lt;以&lt;只 found...

For 啊&lt;波&lt;词&lt;的&lt;俄&lt;佛&lt;歌&lt;和&lt;及&lt;课&lt;了&lt;呢&lt;票&lt;气&lt;日&lt;四&lt;特&lt;瓦&lt;喜&lt;以&lt;只&lt;馍 found...
Locale zh_CN has the same sorted order
Locale zh has the same sorted order
Locale zh_SG has the same sorted order 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T20:15:40.790

为什么不一样？因为有几种不同的方法可以对表意字符甚至整个单词进行排序。让我印象深刻的是：

*   按笔画数
*   通过使用拉丁音译然后“自然”排序（当然根据中文的特定规则）

还有其他方法，例如[Unicode Technical Report #35](http://unicode.org/reports/tr35/)提到了其中的一些方法（更多的是巧合，不是故意的），但您必须有足够的时间来完成它。

要回答您的问题，为什么这些排序顺序不同，这仅仅是因为 Java 包含自己的排序规则并且它不依赖于操作系统的规则（如 Excel 那样）。这些规则可能不同。您可能还想尝试[ICU](http://site.icu-project.org/)，它是 Java 中类和规则的来源（通常比 JDK 领先一步）。

# bash - tar 目录内容而不在存档中创建根文件夹

> ID：13285737
> 
> 赞同：0
> 
> 时间：2012-11-08T09:05:00.593
> 
> 标签：bash, tar, hidden-files

我在文件夹中的 bash 脚本中运行以下代码段。这将创建一个没有根文件夹的存档，因为我在要存档其内容的文件夹中运行脚本。

```
tar -pczf $ARCHIVE_NAME --exclude=${ARCHIVE_NAME} --exclude=$(basename ${0}) *

Archive Contents:
/a/
/b/
/c/
/a_normal_file 
```

效果很好，但由于我使用 * 它没有在直接目录中归档隐藏文件。我进行了一些搜索，发现[归档（ubuntu tar）隐藏目录](https://stackoverflow.com/questions/4572973/archiving-ubuntu-tar-hidden-directories)，然后将其更改为：

```
tar -pczf $ARCHIVE_NAME --exclude=${ARCHIVE_NAME} --exclude=$(basename ${0}) .

Archive Contents:
/./a/
/./b/
/./c/
/./.a_hidden_file
/./a_normal_file 
```

仍然有效，但现在正在创建一个名为“。”的根文件夹。特点。内容就在其中。我如何获得以前的结果，但它仍然在直接目录中存档隐藏文件？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T10:13:00.283

使用 -C, --directory 目录

```
--directory=$(dirname ${0}) 
```

例子：

```
$ ls -a xxx
.  ..  aaa  .bbb
$ tar cvf test.tar --exclude test.tar -C xxx .
./
./.bbb
./aaa 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:18:23.783

虽然它不会影响存档的解包（因为`.`只是指同一个目录），但如果它困扰您，您可以将通配符从`*`to更改为`.[^.]* *`也包括所有隐藏文件。

此外，如果您有以 开头的隐藏文件`..`，例如`..a`，您也需要添加`..?*`到列表中。

# javascript - 使用 ZeroClipboard 从剪贴板复制：想要获取格式化文本

> ID：13285741
> 
> 赞同：2
> 
> 时间：2012-11-08T09:05:11.263
> 
> 标签：javascript, zeroclipboard

我正在使用 JS 将一些文本复制到剪贴板：[ZeroClipboard](http://davidwalsh.name/clipboard)。我正在复制的此文本位于`<div>`标签内，并且包含 HTML 格式。它可以工作，但是当我复制文本时，HTML 标签会被原样复制！我想要的是在客户端给我格式化文本的东西，而我目前正在获取未格式化的文本。请帮忙！

代码：

```
var clip = new ZeroClipboard.Client();
clip.addEventListener('mousedown', function () {
        clip.setText(document.getElementById('oSource').innerText);
    });

    clip.addEventListener('complete', function (client, text) {
        alert('copied: ' + text);
    });

    //glue it to the button
    clip.glue('Button1');
    clip.glue('Button2'); 
```

我知道这类似于[这个问题](https://stackoverflow.com/questions/5084713/copying-styled-text-from-a-page-to-the-clipboard-with-javascript)，但他在这里使用了 createTextRange，而不是 ZeroClipBoard

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:43:00.920

我不得不使用 Flash 文件 Zeroclipboard10.swf 来复制富文本。当我添加这一行时它起作用了。

```
ZeroClipboard.setMoviePath("ZeroClipboard10.swf"); 
```

# android - ajax 总是通过自签名 SSL 在 android 上失败

> ID：13285747
> 
> 赞同：1
> 
> 时间：2012-11-08T09:05:42.533
> 
> 标签：android, ajax, ssl

我正在通过 ajax 获取一些要在页面上显示的字符串，并不断收到错误结果：

```
$.ajax({
url : '/myurl',
data : post_param,
dataType : 'json',
type : 'POST',
success : function(data) {
    //show data on the page
}
error : function(XMLHttpRequest, textStatus, errorThrown) {
console.log(XMLHttpRequest.text);
console.log(textStatus);
console.log(errorThrown);
}
}); 
```

在控制台日志中，
XMLHttpRequest.text : undefined,
textStatus : error,
errorThrown : , （我认为只是一个空字符串）

JQuery : 1.8.2
Android : 2.3
顺便说一句，ajax 请求是通过自签名 SSL 发送的，POST 参数中有 Unicode 字符可能会导致问题。

任何建议将不胜感激。

# xcode - Xcode，是否可以输入坐标然后获取位置？

> ID：13285748
> 
> 赞同：0
> 
> 时间：2012-11-08T09:05:43.397
> 
> 标签：xcode

我想知道这种类型的任务是否可行，如果可以，如何完成，或者是否有这方面的教程？我相信这样的任务涉及搭配，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:15:46.477

[反向地理编码变得简单](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_clgeocoder/)

那是反向地理编码的一个很好的教程。调整他们向您显示的内容，将地点的输入切换为坐标的输入，您将获得所需的内容。

# java - Android/Java Class cast exception.Converting a string to byte array

> ID：13285750
> 
> 赞同：-3
> 
> 时间：2012-11-08T09:05:48.657
> 
> 标签：java, exception

```
 String item="stringItem"; 
```

需要将此字符串项转换为字节数组

```
 byte[] byteItemArray = stringItem.getByte(); 
```

这会引发类转换异常。我应该使用类型转换吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:09:53.077

尝试`byte [] val= ((String) getValue(key)).getBytes();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:07:59.290

由此我怀疑这条线导致了类转换异常

```
(byte[]) getValue(key); 
```

getValue() 返回什么。如果它没有返回 byte[] 的对象，您将得到异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:36:47.547

尝试这个：

```
(byte[]) getValue(key).getBytes(); 
```

# android - ImageView 的旋转

> ID：13285751
> 
> 赞同：0
> 
> 时间：2012-11-08T09:05:51.010
> 
> 标签：android, bitmap, rotation, imageview

我有一个 ImageView，我设置了一个 OnTouchListener 以启用用手指手势拖动和旋转它。我的问题与旋转有关，当我使用实际代码这样做时，结果是位图按预期旋转但覆盖了以前的版本，如附图所示。有谁知道为什么会这样？谢谢。

```
//Touch event related variables
int touchState;
final int IDLE = 0;
final int TOUCH = 1;
final int PINCH = 2;
float dist0, distCurrent;
float angle;

public boolean onTouch(View view, MotionEvent event) {
    boolean handledHere = false;

    float distx, disty;

    final int action = event.getAction();

    switch(action & MotionEvent.ACTION_MASK){
    case MotionEvent.ACTION_DOWN:
        //A pressed gesture has started, the motion contains the initial starting location.
        touchState = TOUCH;
        break;
    case MotionEvent.ACTION_POINTER_DOWN:
        //A non-primary pointer has gone down.
        touchState = PINCH;

        //Get the distance when the second pointer touch
        distx = event.getX(0) - event.getX(1);
        disty = event.getY(0) - event.getY(1);
        dist0 = FloatMath.sqrt(distx * distx + disty * disty);

        break;
    case MotionEvent.ACTION_MOVE:
        //A change has happened during a press gesture (between ACTION_DOWN and ACTION_UP).

        if(touchState == PINCH){                        
            //Get the current distance
            distx = event.getX(0) - event.getX(1);
            disty = event.getY(0) - event.getY(1);
            distCurrent = FloatMath.sqrt(distx * distx + disty * disty);

            // use angle to rotate view
            angle = getDegreesFromRadians((float) (Math.atan(disty/distx)));
            Log.i("Angle of rotation", angle + "");

            drawMatrix((ImageView) view);

        } else {
            handledHere = startDrag (view);
        }

        break;
    case MotionEvent.ACTION_UP:
        //A pressed gesture has finished.
        touchState = IDLE;
        break;
    case MotionEvent.ACTION_POINTER_UP:
        //A non-primary pointer has gone up.
        touchState = TOUCH;
        break;

    }

    return handledHere;
}

    private void drawMatrix(ImageView view){
    float curScale = distCurrent/dist0;

    if (curScale < 0.5){
        curScale = 0.5f;    
    } else if (curScale > 1.5){
        curScale = 1.2f;
    }

    Bitmap originalBitmap = Bitmap.createBitmap(view.getWidth(), view.getHeight(), Bitmap.Config.ARGB_8888); //view.getDrawingCache();
    Canvas canvas = new Canvas(originalBitmap);
    view.draw(canvas);
    int[] originalSize = (int[]) view.getTag();
    int newHeight = (int) (originalSize[1] * curScale); //(view.getHeight() * curScale);
    int newWidth = (int) (originalSize[0] * curScale); //(view.getWidth() * curScale);

    view.setImageBitmap(getResizedBitmap(originalBitmap, newHeight, newWidth));

}

private Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    // create a matrix for the manipulation
    Matrix matrix = new Matrix();
    // rotate the bipmap
    matrix.postRotate(angle);
    // recreate the new Bitmap
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);
    return resizedBitmap;
} 
```

![图像旋转](../Images/ab824f0d9a6bf45fabee212ccd34b17b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:36:25.287

为什么不使用 ImageView.setScaleType(MATRIX) 并使用 Matrix 方法。您甚至可以使用 Matrix 进行缩放、平移和旋转。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:23:14.200

我认为您应该在绘制旋转图像之前清除画布。

`canvas`我将在中实例化并在绘制图像之前`constructor`应用`PorterDuff`

```
Paint paint = new Paint();
paint.setXfermode(new PorterDuffXfermode(Mode.CLEAR));
canvas.drawPaint(paint); 
```

# .htaccess - .htaccess 上移一级目录问题

> ID：13285759
> 
> 赞同：1
> 
> 时间：2012-11-08T09:07:02.443
> 
> 标签：.htaccess

我无法找到答案，所以它是：

我需要像这样获取 URL：//mydomain/index.php?var=username（或 https://，如果用户想要安全连接）。

要使用我想使用的漂亮 URL：//mydomain/user/username（这应该保留在浏览器 URL 行中）以获取：//mydomain/index.php?var=username

我已将 .htaccess 配置为：

```
RewriteEngine on
RewriteBase /
RewriteRule ^user/([^/]+)/?$ /index.php?var=$1 [L] 
```

但它不起作用。当我使用重定向 [R,L] 时它工作正常，但在浏览器的 URL 行中是丑陋的 URL :(

请你能帮帮我，我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:45:05.913

你的评论

> 它不返回错误，它显示页面，但似乎 URL 是这样的： //mydomain/user/ 而不是 od //mydomain/ 所以所有链接（包括相对路径都指向 //mydomain/ user/... 而不是 //mydomain/...)

描述正常（预期）行为。您的浏览器认为该页面是从 //mydomain/user/userid 提供的，因此所有相关链接都将使用基本路径 //mydomain/user/ 解析。更重要的是，您的 htaccess 规则允许使用可选的斜杠，因此 //mydomain/user/userid/ 也是有效的。这样的请求将解析与 //mydomain/user/userid/ 相关的所有链接，因此“foo.html”的 href 将指向 //mydomain/user/userid/foo.html。

这里唯一真正的解决方案是通过在开头添加“/”来使所有链接都相对于根文件夹。例如，而不是像这样的东西：

```
<a href="foo.html">
<img src="images/pic.jpg" alt="" />
<link rel="stylesheet" type="text/css" href="css/styles.css" />
<form action="processme.php" method="post"> 
```

你应该使用

```
<a href="/foo.html">
<img src="/images/pic.jpg" alt="" />
<link rel="stylesheet" type="text/css" href="/css/styles.css" />
<form action="/processme.php" method="post"> 
```

# javascript - 克隆 a 并将内部元素的 name 属性增加 1

> ID：13285760
> 
> 赞同：7
> 
> 时间：2012-11-08T09:07:08.543
> 
> 标签：javascript, jquery

我必须在表单中实现“添加新行”功能。表单的结构类似于：

```
<table>
<tr>
     <td><input type="text" name="v1[label]" /></td>
     <td><input type="text" name="v1[observation]" /></td>
     <td><input type="text" name="v1[remarks]" /></td>
</tr>
<tr>
     <td><input type="text" name="v2[label]" /></td>
     <td><input type="text" name="v2[observation]" /></td>
     <td><input type="text" name="v2[remarks]" /></td>
</tr>
<tr>
    <td colspan="3">
       <input type="button" id="addrow" value="Add One More Row">&nbsp;
       <input type="submit" name="proceed" value="Submit" />
    </td> 
</tr>
</table> 
```

如图所示，每一行的数量都在增加`v[]`。v1、v2..等等

**我在寻找什么**

单击“再添加一行”按钮时，应发生以下情况

*   在最后一行（带有按钮的行）上方插入一个新行
*   name 属性值在该行中增加 1（即 v2[label] 变为 v3[label]，v2[observation] 变为 v3[observation] 等等）

**我尝试了什么**

我最接近的是使用`jQuery's` `clone()`. 这确实完美地添加了行。但是我发现每次单击按钮时很难找到一种方法将 name 属性的值增加 1。

**当前正在使用 jQuery**

```
$('input:button[id="addrow"]').click(function(){

   var secondlast = $('table tr:last').prev('tr');
   secondlast.clone().insertBefore(secondlast);

}); 
```

如果我单击该按钮两次，我将添加以下 HTML

```
<tr>
     <td><input type="text" name="v2[label]" /></td>
     <td><input type="text" name="v2[observation]" /></td>
     <td><input type="text" name="v2[remarks]" /></td>
</tr>

<tr>
     <td><input type="text" name="v2[label]" /></td>
     <td><input type="text" name="v2[observation]" /></td>
     <td><input type="text" name="v2[remarks]" /></td>
</tr> 
```

因此添加了一行，但 name 属性仍为 v2，而第三行和第四行应为 v3 和 v4。我知道`clone()`不能这样做，这就是为什么我正在寻找替代方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T09:32:02.383

```
$('input:button[id="addrow"]').click(function(){
    var secondlast = $('table tr:last').prev('tr');
    var newClone = secondlast.clone();
    // find all the inputs within your new clone and for each one of those
    newClone.find('input').each(function() {
        var currentNameAttr = $(this).attr('name'); // get the current name attribute
        // construct a new name attribute using regular expressions
        // the match is divided into three groups (indicated by parentheses)
        // p1 will be 'v', p2 will be the number, p3 will be the remainder of the string
        var newNameAttr = currentNameAttr.replace(/^(v)(\d+)(.*)$/, function(match, p1, p2, p3) {
            return p1+(parseInt(p2)+1)+p3;
        });
        $(this).attr('name', newNameAttr);   // set the incremented name attribute 
    });
    // insert after is I assume what you want
    newClone.insertAfter(secondlast);
}); 
```

**编辑**

```
// you could also simply increment any digit you find as Batman indicated
var newNameAttr = currentNameAttr.replace(/\d+/, function(match) {
    return (parseInt(match)+1);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:20:51.143

如果您需要将这些输入中的数据发送到服务器，则很难确定您必须采用多少 v*... 相反，我建议您使用 [] 在数组中添加行。

您的 HTML 将如下所示：

```
<table>
<tr>
     <td><input type="text" name="v[label][]" /></td>
     <td><input type="text" name="v[observation][]" /></td>
     <td><input type="text" name="v[remarks][]" /></td>
</tr>
<tr>
     <td><input type="text" name="v[label][]" /></td>
     <td><input type="text" name="v[observation][]" /></td>
     <td><input type="text" name="v[remarks][]" /></td>
</tr>
<tr>
    <td colspan="3">
       <input type="button" id="addrow" value="Add One More Row">&nbsp;
       <input type="submit" name="proceed" value="Submit" />
    </td> 
</tr>
</table> 
```

post 变量将是唯一的：`v`并且很容易循环通过它来获取数据，这是一个 PHP 示例。

```
foreach($_POST['v']['label'] as $k=>$v){
    $_POST['v']['label'][$k]; // label
    $_POST['v']['observation'][$k]; // label
    $_POST['v']['remarks'][$k]; // label
} 
```

这允许无限数量的输入，无需处理和重新格式化每个克隆的名称，并且更易于使用。

# javascript - 一直说未定义结果属性。为什么？

> ID：13285770
> 
> 赞同：1
> 
> 时间：2012-11-08T09:07:30.627
> 
> 标签：javascript, jquery

这是我的对象，我已经定义了所有属性和函数，但它仍然给我这个错误`result is not defined`。

这是我的代码

```
var Xml = {
    to      : null,
    from    : null,
    url     : null,
    result  : null,  //<--- I defined result here

    init: function (fromaddress, toaddress, link) {
        from    = fromaddress;
        to      = toaddress;
        url     = link;

        this.requestXml();
        return this;
    },

    requestXml: function () {
        $.ajax({
            type: "GET",
            url: url,
            dataType: "xml",
            success: this.parseXml
        });
    },

    parseXml: function (xml) {
        console.log('xml: ' + $(xml));
        result = $(xml); //<--- Assigning value to result here
    },

    getResult: function () {
        console.log('Result: ' + result); // <--- Here is says result is not defined
        return result;
    }
}; 
```

我怎么解决这个问题？

**更新**

我在下面调用 getResult()

```
var Route = {
fromurl : null,
tourl   : null,
from    : null,
to      : null,

init: function (fromaddress, toaddress) {
    from        = fromaddress;
    to          = toaddress;
    fromurl     = 'http://demo.com/url'+fromurl;
    tourl       = 'http://demo.com/url'+tourl;

    Route.searchRoute();
},

searchRoute: function () {
    var xml = Xml.init(from, to, fromurl);
    console.log(xml.getResult()); //<---- calling getResult();
}

 }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:10:31.390

“未修饰”表达式`result`将引用一个名为 的全局变量`result`，而您没有该变量。

仅仅因为对的引用在`result`文本上位于对象内部，就认为该引用引用该对象的属性是不正确的。在其他语言中可能是这种情况，但在 JavaScript 中则不然。

您的问题的解决方案是对该问题的评论之一。在这些情况下使用`this.`作为前缀有效。试试这个代码：

```
var x = 1;

var p = {
   x: 2,
   f: function () {alert(x); alert(this.x);}
}

p.f(); 
```

在这里，您将看到 1 个警报，然后是 2 个。

*回答更新的问题*

您在这里遇到的是一个经典问题。你写

```
var xml = Xml.init(from, to, fromurl);
console.log(xml.getResult()); //<---- calling getResult(); 
```

第一行最终触发了一个 Ajax 请求。一旦该请求被触发，您将立即转到您调用的第二行`xml.getResult()`。**在**您的Ajax调用能够`getResult`填充.**`result`**

 **一种方法是将您想要对结果*执行*`init`的操作传递给方法。在这种情况下，您似乎想要记录结果，因此请尝试

```
var xml = Xml.init(from, to, fromurl, function () {console.log(xml.getResult()}); 
```

这里我们有一个新的第四个参数，`Xml.init`所以我们必须通过更新`Xml`对象来处理它，就像这样（未测试）：

```
.
.
.
init: function (fromaddress, toaddress, link, callback) {
    from    = fromaddress;
    to      = toaddress;
    url     = link;

    this.requestXml(callback);
    return this;
},

requestXml: function (callback) {
    $.ajax({
        type: "GET",
        url: url,
        dataType: "xml",
        success: callback
    });
},

.
.
. 
```

换句话说，当您要进行异步调用时，请立即使用结果。不要把它们留到以后，因为你永远不知道它们什么时候会“准备好”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:15:06.447

您应该使用`this`，但如果您使用构造函数可能会更容易，这样您就可以访问所有方法中的属性：

```
function Xml(to, from, url, result) {
  this.to      = to || null;
  this.from    = from || null;
  this.url     = url || null;
  this.result  = result || null;
  // init logic
}

Xml.prototype = {

  parseXml: function (xml) {
    console.log('xml: ' + $(xml));
    this.result = $(xml);
  },

  getResult: function () {
    console.log('Result: ' + this.result);
    return this.result;
  }

  ...

}

var xml = new Xml(to, from, url, result); // init 
```

**编辑：**对象文字可能不是最佳选择。如果您想避免`this`混淆，您的案例更适合上述构造函数或模块模式：

```
function Xml() {

  var xml = {}
    , to = null
    , from = null
    , url = null
    , result = null;

  xml.parseXml = function( xml ) {
    ...
  };

  ...

  return xml;

}

var xml = Xml(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:19:31.677

尝试`XML.result`

请参阅[理解 Javascript](https://stackoverflow.com/questions/8813871/understanding-this-in-javascript)中的“this”，以讨论其中的来龙去脉`this`以及它指向不同时代的意义。**

# shell - shell脚本替换给定句子中的单词

> ID：13285771
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:07:33.177
> 
> 标签：shell, unix

我需要一个 unix shell 脚本，它在执行时接受一个句子并将给定的单词替换为另一个单词。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T11:31:09.683

如果您需要命令来执行此操作，请尝试 sed。

例如，在句子中`hello`替换为：`goodbye``hello world`

```
$ sed 's/hello/goodbye/g' <<< "hello world"
goodbye world 
```

如果你想在 bash 脚本中这样做：

```
#!/bin/bash

if [[ $# -lt 3 ]]
then
     echo "Usage: $(basename $0) word replacement sentence" >&2
     exit 1
fi

word="$1"
replacement="$2"
sentence="$3"

echo "${3//$1/$2}" 
```

例子：

```
$ replace.sh hello goodbye "hello world"
goodbye world 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:37:23.860

使用 sed：

sed 's/source/destination/' file_with_sentence.txt

*   来源是搜索词
*   目的地是替代品
*   file_with_sentence... 是 sef 解释

您可以将其包装到一些 unix shell 脚本中（您没有告诉您使用的是哪个 shell）

甚至更好：

echo "这是我的句子" | sed 's/源/目标/'

# c++ - 错误：不完整类型'类堆栈的无效使用 ' [默认启用]

> ID：13285775
> 
> 赞同：0
> 
> 时间：2012-11-08T09:07:48.617
> 
> 标签：c++, templates, mingw

我一直在尝试为堆栈和一个简单的程序组合一个类模板来运行它并确保它工作。我在编译（使用 MinGW）时不断收到这个错误，我不确定我在这里做错了什么。先感谢您。

错误：

```
In file included from Stacktemp_Driver.cpp:8:0:
stacktemp.h: In instantiation of 'class Stack<int>':
Stacktemp_Driver.cpp:23:14:   required from here
stacktemp.h:123:8: warning: invalid use of incomplete type 'class Stack<int>' [e
nabled by default]
stacktemp.h:16:7: warning: declaration of 'class Stack<int>' [enabled by default
]
stacktemp.h:153:6: warning: invalid use of incomplete type 'class Stack<int>' [e
nabled by default]
stacktemp.h:16:7: warning: declaration of 'class Stack<int>' [enabled by default
] 
```

这是我的 stacktemp.h 代码：

```
#ifndef STACKTEMP_H
#define STACKTEMP_H
#include <stdlib.h>
#include <string>
#include <iostream>
#include <stdexcept>

template <class Type>
class Stack
{
 public:
  Stack();              //default constructor
  Stack(const Stack<Type> & a);//copy constructor
  ~Stack();                          //destructor
  Stack & operator=(Stack<Type> & a);//assignment operator
  bool operator!=(Stack<Type> & a);         //is not equal operator
  bool operator==(Stack<Type> & a);         //is equal operator
  Type & operator[](int subscript);         //subscript operator
  bool isfull() const;                      //determine if stack is full
  bool isempty() const;                     //determine if stack is empty
  bool push(Type item) throw(Stack*);      //add to top of the stack
  void outerpush() throw(std::overflow_error);
  bool pop(Type item) throw(Stack*);       //remove top of the stack
  void outerpop() throw(std::underflow_error);
  int capacity();                          //returns capacity of the stack
  int size();                              //returns size of the stack
  void print_stack();       //print the contents of the stack

 private:
  Type * data;                          
  int stack_size;                          //capacity of stack
  int tos;                                 //top of stack indicator
};

//constructors and destructor
template <class Type>
Stack<Type>::Stack()       //default constructor
{
  stack_size = 10;
  data = new Type[stack_size];
  tos = 0;
}

template <class Type>
Stack<Type>::Stack(const Stack<Type> & a)     //copy constructor
{
  stack_size = a.stack_size;
  data = new Type[stack_size];
  for (int i = 0; i < stack_size; i++)
    data[i] = a.data[i];
  tos = a.tos;
}

template <class Type>
Stack<Type>::~Stack()
{
  delete [] data;
}

//overloaded operators
template <class Type>
Stack<Type> & Stack<Type>::operator=(Stack<Type> & a)
{
  if (this == &a)
    return *this;
  delete [] data;
  stack_size = a.stack_size;
  data = new Type[stack_size];
  for (int i = 0; i < stack_size; i++)
    data[i] = a.data[i];
  tos = a.tos;
  return *this;
}

template <class Type>
Type & Stack<Type>::operator[](int subscript)
{
  if (subscript < 0 || subscript > (stack_size - 1))
    {std::cerr << "*** Out of range subscript = " << subscript << std::endl;
      exit(1);
    }
  return data[subscript];
}

template <class Type>
bool Stack<Type>::operator==(Stack<Type> & a)
{
  if (stack_size != a.stack_size)
    return false;
  for (int i = 0; i < stack_size; i++)
    {
      if (data[i] != a.data[i])
    return false;
    }
  return true;
}

//template class methods
template <class Type>
bool Stack<Type>::isfull() const
{
  return tos == stack_size;
}

template <class Type>
bool Stack<Type>::isempty() const
{
  if (tos == 0)
    return true;
  else
    return false;
}

template <class Type>
  bool Stack<Type>::push(Type item) throw(Stack*)
{
  if (isfull())
    throw this;
  data[tos] = item;
  tos = tos + 1;
  return true;
}

template <class Type>
void Stack<Type>::outerpush() throw(std::overflow_error)
{
  using std::cout;
  using std::cin;
  using std::endl;

  cout << "Please enter a value to place on top of stack: " << endl;
  Type item;
  cin >> item;
  try {
    this->push(item);
  }
  catch(Stack * dsx)
     {
      cout << "Error in ";
       throw std::overflow_error("Overflow error");
     }
}

template <class Type>
bool Stack<Type>::pop(Type item) throw(Stack*)
{
  if (isempty())
   throw this;
  tos = tos - 1;
   item = data[tos];
  return true;
}

template <class Type>
void Stack<Type>::outerpop() throw(std::underflow_error)
{
  using std::cout;
  using std::cin;
  using std::endl;

  Type item;
  try {
    this->pop(item);
  }
  catch(Stack * dsx)
  {
    cout << "Error in ";
    throw std::underflow_error("Underflow error");
  }
}

template <class Type>
int Stack<Type>::capacity()
{
  return stack_size;
}

template <class Type>
int Stack<Type>::size()
{
  return tos;
}

template <class Type>
void Stack<Type>::print_stack()
{
  for (int i = 0; i < tos; i++)
    std::cout << "a[" << i << "] = " << data[i] << std::endl;
}

#endif 
```

这是我的 Stacktemp_Driver.cpp 代码：

```
#include "stacktemp.h"
#include <iostream>
#include <string>
#include <cstring>

void menu(void);

int main()
{
  using std::cout;
  using std::cin;
  using std::endl;
  using std::string;

  char* ans1;
  Stack<int> stack1;
  Stack<int> stack2;

  int ans;
  cin >> ans;

  while (ans != 8)
    {
      if (ans == 1)
    {
      stack1.print_stack();
      menu();
      cin >> ans;
    }
      else if (ans == 2)
    {
      try {
        stack1.outerpush();
      }
      catch(std::overflow_error &oe)
        {
          cout << oe.what() << endl;
          menu();
          continue;
        }
      menu();
      cin >> ans;
    }
      else if (ans == 3)
    {
      try {
        stack1.outerpop();
      }
      catch(std::underflow_error &ue)
        {
          cout << ue.what() << endl;
          menu();
          continue;
        }
      menu();
      cin >> ans;
    }
      else if (ans == 4)
    {
      int cap = stack1.capacity();
      cout << "The capacity of the stack is: " << cap << std::endl;
      menu();
      cin >> ans;
    }
      else if (ans == 5)
    {
      int sz = stack1.size();
      cout << "The size of the stack is: " << sz << std::endl;
      menu();
      cin >> ans;
    }
      else if (ans == 6)
    {
      stack2 = stack1;
      menu();
      cin >> ans;
    }
      else if (ans == 7)
    {
      if (stack1 == stack2)
        cout << "The stacks are equal." << endl;
      else
        cout << "The stacks are NOT equal." << endl;
      menu();
      cin >> ans;
    }
      else
    {
      cout << "Please enter an integer between 1 and 8.";
      menu();
      cin >> ans;
    }
    }

  return 0;
}

void menu()
{
  using std::cout;
  using std::cin;
  using std::endl;

  cout << "Please select from the following menu: (1-8)" << endl;
  cout << "1\. Display stack" << endl;
  cout << "2\. Place a double value onto the top of stack" << endl;
  cout << "3\. Remove a value from the top of stack" << endl;
  cout << "4\. Check the total capacity of the stack" << endl;
  cout << "5\. Check the current number of items on stack" << endl;
  cout << "6\. Copy stack to stack2" << endl;
  cout << "7\. Check to see if stack and stack2 are equal" << endl;
  cout << "8\. Quit" << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:20:53.173

正如您的编译器告诉您的那样，问题出在下一行：

```
bool push(Type item) throw(Stack*);
bool pop(Type item) throw(Stack*); 
```

Stack 在这一点上真的是不完整的类型。

问题是你为什么要抛出一个指向你的类的指针？理想情况下， throw 类型继承自`std::exception`，或者可以为您提供更多信息的东西（如[本答案](https://stackoverflow.com/a/4284039/476681)中所述）。

另一方面，[不推荐使用 throw 规范](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2010/n3051.html)。

* * *

顺便说一句，这是一个展示问题的最小示例：

```
struct A
{
    void foo() throw( A* )
    {
        throw this;
    }
};

void menu()
{
    A a;
    a.foo();
} 
```

# objective-c - 当我们将子视图从一个视图移动到另一个视图时，子视图的框架会发生什么？

> ID：13285783
> 
> 赞同：0
> 
> 时间：2012-11-08T09:08:05.373
> 
> 标签：objective-c, ios, xcode, interface-builder

我注意到两件不同的事情。

当我通过程序执行此操作时，子视图的框架不会改变。

当我在界面生成器中执行此操作时，子视图的框架都在中间。

这是针对 iOS 的。我不确定MaCos。

我不确定所有这些都记录在哪里。以及自动调整大小蒙版如何影响这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:59:16.327

我认为当我们通过代码将子视图从一个视图移动到另一个视图时，子视图的框架保持与前一个父视图对齐的相同坐标，这意味着如果子视图的 x 坐标与父视图的 x 距离为 10 像素坐标那么这个子视图将与新的父视图相距 10 像素，并且 y 坐标也会发生同样的情况，但在界面构建器的情况下，子视图将其中心对齐到父视图的 s=center。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:17:55.443

您需要设置您的视图，因为它出现在模拟器屏幕上。我的意思是，例如，如果您的应用程序使用状态栏启动，则在添加子视图之前，最好将状态栏放入根视图。除此之外，您的视图的 'Clip Bounds' 和 Auto Resize SubViews 属性发挥着重要作用。这些属性可能会遇到您遇到的问题。

# iphone - 如何在 iPhone 的 viewDidlLoad 中访问另一个类数据进行访问？

> ID：13285784
> 
> 赞同：0
> 
> 时间：2012-11-08T09:08:16.510
> 
> 标签：iphone, ios6

我将 Nsobject 类中的一些数据传递给 UIViewController。在视图控制器中，我只访问 viewwillappear 内的数据。我无法访问 viewDidLoad 中的值。如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:11:55.013

例如从 ViewDidLoad 调用一个函数

```
-(void)getData
{
 //you can access data here....
} 
```

所以创建一个名为 getData 的函数并从 viewDidLoad 调用它

亲爱的编码快乐...!!!!!!!!!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:39:26.110

使用委托访问其他类[示例](http://mobiledevelopertips.com/objective-c/the-basics-of-protocols-and-delegates.html) [examle1](http://agilewarrior.wordpress.com/2012/03/19/simple-objective-c-protocol-example/)

# android - Textview中HTML内容的高度 - Android

> ID：13285786
> 
> 赞同：1
> 
> 时间：2012-11-08T09:08:21.363
> 
> 标签：android, html, textview, android-fragments

再会！

我有一个使用 html.fromhtml() 来设置段落内容样式的应用程序。

但是我对它们创建的间距（垂直）没有任何控制`<br>`或`<p>`标签，因为css在android中不起作用。

无论如何该怎么做？

到目前为止，这是我的代码：

```
 con.setText(Html.fromHtml("<b>Lorem Ipsum Dolor</b><br/><br/>" +
            "<p>Lorem Ipsum Dolor</p>"+
            "<p>Crest PTY 1000</p>" +
            "<p>Phone: (02) 8217-1300</p>"+
            "<p>BSB 032-0052</p><br/>" +            
            "<b>Trading Hours</b><br/><br/>"+
            "<p>Monday – Thursday 9:30am – 4:00pm</p>" +            
            "<p>Friday 9:30am – 5:00pm<br/></p>" +
            "<p>Saturday 10:00am – 1:00pm</p><br/>"+            
            "<b>Languages</b><br/><br/>"+
            "Mandarin, Cantonese, Bahasa Indonesia,<br/><br/> Japanese, Vietnamese, Greek<br/><br/><br/>"+          
            "<b>Morning Style</b><br/><br/>"+           
            "Safe deposit box - This one<br/>"+
            "Internet Banking kiosks<br/>"+
            "Night safe<br/>" +
            "Coin Deposit Machine<br/>" +
            "Cash Exchange Machine<br/>" +
            "Migrant Services<br/><br/>")); 
```

截屏

![在此处输入图像描述](../Images/8c2bf8612c1823223c8bcef720845ddf.png)

很感谢任何形式的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:20:03.610

您可以使用以下方法设置 TextView 的行距：
`con.setLineSpacing(5, 1);`

[TextView.setLineSpacing（浮动，浮动）](http://developer.android.com/reference/android/widget/TextView.html#setLineSpacing(float,%20float))

# c# - 将数据插入 Access 数据库时出错

> ID：13285787
> 
> 赞同：0
> 
> 时间：2012-11-08T09:08:26.560
> 
> 标签：c#, asp.net, ms-access

我正忙于学校作业，我有一个由三个表组成的基本访问数据库。Book、Reader 和 BookRated 其中 BookRated 是与来自 Reader 的主键 userName 和来自 Book 的 ISBN 的交集表构成 BookRated 的复合主键（作为外键）。

我正在尝试将信息插入 BookRated 表中，但出现以下错误

> > System.Data.OleDb.OleDbException：您无法添加或更改记录，因为表“Book”中需要相关记录。

```
bool added;

    int i;
    conn = new OleDbConnection(@"Provider=Microsoft.Jet.OleDb.4.0;
                                Data Source =" + Server.MapPath("App_Data\\BookRateInitial.mdb"));
    conn.Open();

    OleDbCommand cmd2 = conn.CreateCommand();
    cmd2.CommandText = @"INSERT INTO bookRated([frnISBN], [title], [rating], [review], [frnUserName])
                      VALUES(@ISBN, @title, @rating, @review, @userName)";
        //adding my parameters
    cmd2.Parameters.AddRange(new OleDbParameter[]
    {
        new OleDbParameter("@title", bookTitle),
        new OleDbParameter("@rating", rating),
        new OleDbParameter("@review", review), 
        new OleDbParameter("@ISBN", isbn), 
        new OleDbParameter("@userName", userName),
    });
    added = true;
    i = cmd2.ExecuteNonQuery();
    conn.Close();
    return added; 
```

现在所有的值都是字符串。

关于这个错误来自哪里的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:13:18.387

检查`relationship`表`bookRated`。有关此错误的详细信息，请查看[Microsoft 支持站点](http://support.microsoft.com/kb/319320)

# html - HTML CSS - 手风琴样式

> ID：13285788
> 
> 赞同：0
> 
> 时间：2012-11-08T09:08:29.110
> 
> 标签：html, css

我正在尝试使用 HTML 和 CSS 创建手风琴，但遇到了一些问题：

**演示：http:** [//jsfiddle.net/MMFBz/](http://jsfiddle.net/MMFBz/)

问题 1 - 每个标签都应该有一个`1px dashed #C5B7A6`边框顶部，除了第一个。当我创建一个伪元素`:first-of-type`或`:first-child`它什么都不做...

*   为什么第一个边框不会自行移除？

问题 2 - 检查/打开标签后，它的标题颜色需要为`#EF7C4D`.

*   一旦打开或检查，我将如何定位标签以更改其颜色，然后在关闭后恢复为白色？

问题 3 - 每篇文章中的文本应该有一个`opacity: 0`，然后在打开时设置为 1。当我将它设置为 0 时，效果很好，但是一旦打开就将文本淡入淡出将不起作用。

*   这怎么可能？

问题 4 - 每篇文章都应`height`自动设置一组，由内容量决定。如果我删除`height: 150px;`我会失去过渡效果（逐渐向下滑动打开）。

*   关于如何获得相同效果而不使用固定高度的任何想法？

**HTML**

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Accordion with CSS3</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link href='http://fonts.googleapis.com/css?family=Oswald:300' rel='stylesheet' type='text/css'>
    </head>

    <body>
        <div id="container">
            <section class="ac-container">
                <div>
                    <input id="ac-1" name="accordion-1" type="checkbox" checked />
                    <label for="ac-1">Label One</label>
                    <article>
                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque varius arcu lectus, sit amet tempus nibh. Integer quis eros sed dui varius luctus in non ipsum. Proin congue, nibh nec rhoncus fermentum, ipsum magna imperdiet libero, id viverra lorem nisi ac ante. Integer eu tortor ac nunc pulvinar fermentum vel vulputate enim. Curabitur id diam urna. Vestibulum venenatis malesuada mauris, rhoncus ullamcorper tortor dictum vel. Fusce luctus metus id felis ultricies lacinia. Praesent luctus varius augue, id consectetur eros iaculis sit amet. Fusce tempor dolor ut leo tempus sit amet ornare eros cursus. Nulla dui dolor, posuere vel vestibulum ac, sollicitudin sed enim. Mauris ac vestibulum enim. Vivamus nulla nulla, tincidunt ut elementum quis, posuere eget velit. Nullam placerat blandit cursus. </p>
                    </article>
                </div>

                <div>
                    <input id="ac-2" name="accordion-1" type="checkbox" />
                    <label for="ac-2">Label Two</label>
                    <article>
                        <p>Vestibulum viverra, nisl in aliquet malesuada, ipsum tellus cursus nibh, et pellentesque lorem quam eu arcu. Vivamus ultricies gravida aliquam. Maecenas quis est lectus, in laoreet mi. Pellentesque eleifend nunc ac mi tempus laoreet. Maecenas sit amet nisi massa, ac laoreet arcu. Curabitur accumsan auctor adipiscing. Curabitur lacinia molestie nisi, sit amet sollicitudin neque aliquet eu. In lacus nisi, porttitor nec euismod sed, hendrerit sed eros. Integer eu felis velit, a vulputate mauris. Etiam dui magna, convallis vel tristique non, pharetra eu erat. Duis suscipit lectus quis elit volutpat sit amet semper elit dapibus. </p>
                    </article>
                </div>

                <div>
                    <input id="ac-3" name="accordion-1" type="checkbox" />
                    <label for="ac-3">Label Three</label>
                    <article>
                        <p>Maecenas vitae mattis dolor. Cras sit amet elit ac mi facilisis iaculis. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec sollicitudin scelerisque justo eu bibendum. Nam ac odio tellus. Suspendisse tristique lectus vel mi tristique tristique. Morbi sed auctor libero. Aliquam sagittis vestibulum felis, ut varius tellus venenatis vitae. Donec ac nisi sem, et imperdiet nulla. Mauris vel nulla justo, in volutpat libero. Fusce vestibulum rutrum nibh vel scelerisque. Curabitur viverra libero nec enim adipiscing et venenatis ante auctor.</p>
                    </article>
                </div>

                <div>
                    <input id="ac-4" name="accordion-1" type="checkbox" />
                    <label for="ac-4">Label Four</label>
                    <article>
                        <p>Phasellus lobortis sapien et risus imperdiet tempor. Integer vestibulum ligula a velit eleifend rutrum. Nam erat magna, lacinia quis porta tempus, vulputate ac odio. Praesent vel mi vel purus malesuada convallis. Sed tincidunt euismod tortor. Mauris leo nibh, semper nec sodales sit amet, faucibus vel nunc. Morbi quis nibh quis diam semper blandit. Fusce vitae viverra sem. Phasellus tempor nunc in urna eleifend fermentum varius felis pretium. Mauris convallis felis vel massa vehicula ut ullamcorper est imperdiet. In orci leo, ullamcorper in varius a, aliquam id libero. Nam urna metus, dignissim sit amet egestas eu, sollicitudin ac lorem. Fusce ac libero sem, nec porttitor dui.</p>
                    </article>
                </div>

                <div>
                    <input id="ac-5" name="accordion-1" type="checkbox" />
                    <label for="ac-5">Label Five</label>
                    <article>
                        <p>Duis lectus tortor, malesuada vel viverra in, aliquam nec metus. Cras euismod enim et enim lacinia eleifend. Nunc ornare, mauris eleifend scelerisque suscipit, metus lorem rhoncus est, in porttitor mi ipsum at erat. Phasellus fermentum elit et purus tincidunt vel bibendum enim tincidunt. Etiam posuere risus id dolor volutpat nec auctor risus aliquet. Sed ac erat porttitor odio interdum venenatis et at arcu. Aenean quis massa ut sem tincidunt suscipit. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; In pellentesque, lorem vitae ultrices posuere, elit nibh tincidunt nibh, nec lacinia diam sapien eu mauris. Sed euismod risus non libero imperdiet in fermentum elit vehicula. Vestibulum orci mi, sodales eu pellentesque at, ornare eu ipsum. Phasellus eget dolor ipsum, varius rhoncus turpis. Donec consectetur convallis ornare. </p>
                    </article>
                </div>

                <div>
                    <input id="ac-6" name="accordion-1" type="checkbox" />
                    <label for="ac-6">Label Six</label>
                    <article>
                        <p>Nullam hendrerit varius risus in vestibulum. Integer mattis gravida arcu, ut bibendum leo sagittis eget. In consectetur lorem adipiscing sem tincidunt placerat. Vestibulum sit amet lacus ipsum. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque sit amet justo dui, id consectetur ipsum. Ut hendrerit convallis nunc, eu mollis nulla ornare dapibus. Proin quam nulla, mollis eget laoreet ut, blandit id velit. Curabitur a odio risus, a cursus tortor. Aliquam erat volutpat. Vivamus eros odio, semper vel volutpat vel, commodo in eros. Sed porttitor malesuada nisi sed mattis. Etiam feugiat consequat rutrum. Sed in mi nunc, ornare tristique erat. Vestibulum a ligula dui. </p>
                    </article>
                </div>

                <div>
                    <input id="ac-7" name="accordion-1" type="checkbox" />
                    <label for="ac-7">Label Seven</label>
                    <article>
                        <p>Nullam elit ipsum, blandit nec dictum hendrerit, rutrum vitae ante. Sed accumsan porttitor placerat. Nullam feugiat congue rutrum. Morbi at quam eu mauris egestas dictum eget id odio. Maecenas sed turpis non nunc dapibus placerat. Vestibulum mattis auctor risus, in fringilla erat venenatis quis. Fusce posuere congue massa, sed semper odio iaculis porttitor.</p>
                    </article>
                </div>

                <div>
                    <input id="ac-8" name="accordion-1" type="checkbox" />
                    <label for="ac-8">label Eight</label>
                    <article>
                        <p>Integer quis lectus nec tellus egestas volutpat commodo bibendum massa. Phasellus iaculis iaculis magna, et semper nunc mattis quis. Praesent dictum, quam id sodales ornare, erat nibh dapibus nibh, eget porttitor dui sem et erat. Praesent lobortis vulputate nulla, nec sagittis justo ultrices eu. Sed at consectetur lacus. Cras molestie dictum lorem, ut tincidunt magna malesuada in. Praesent posuere mi eget justo mattis hendrerit. Proin vitae quam justo. Donec consequat mauris sed dui eleifend vitae dictum risus faucibus. Curabitur gravida consequat mi, ut hendrerit metus laoreet sed. Cras in justo quis neque hendrerit cursus ac vel eros. Sed pretium, lectus sed tempus lacinia, ipsum sapien dapibus elit, quis sodales nisl tortor quis sem. Donec aliquam nibh eget tellus ornare porta. Phasellus bibendum diam et mi pulvinar pellentesque.</p>
                    </article>
                </div>
            </section> <!-- .ac-container -->
        </div> <!-- #container -->
    </body>
</html> 
```

**CSS**

```
body {
    background: #202024;
    color: #FFF;
    font: .75em Arial, Helvetica, sans-serif;
}
#container {
    width: 500px;
    margin: 0 auto;
}
#container label {
    font: 1.75em 'Oswald', Arial, Helvetica, sans-serif;
    letter-spacing: 1px;
    text-transform: uppercase;
    color: #FFF;
    padding: 5px 0;
    position: relative;
    z-index: 20;
    display: block;
    cursor: pointer;

    border-top: 1px dashed #C5B7A6; /* ------- Problem 1 ------- */

    -webkit-transition: color 0.5s ease-in-out;
    -moz-transition: color 0.5s ease-in-out;
    -o-transition: color 0.5s ease-in-out;
    -ms-transition: color 0.5s ease-in-out;
    transition: color 0.5s ease-in-out;
}
.ac-container label:first-of-type,
.ac-container label:first-child {
    border: none; /* ------- Problem 1 ------- */
}
.ac-container label:hover {color: #EF7C4D;}
.ac-container label:checked {
    color: #EF7C4D; /* ------- Problem 2 ------- */
}
.ac-container label:hover:after,
.ac-container input:checked + label:hover:after{
    content: '';
    position: absolute;
    width: 24px;
    height: 24px;
    right: 0;
    top: 7px;
    background: transparent url(http://i.stack.imgur.com/l3caj.png) no-repeat center center;    
}
.ac-container input:checked + label:hover:after {background-image: url(http://i.stack.imgur.com/CnUMt.png);}
.ac-container input {display: none;}
.ac-container article{
    margin-top: -1px;
    overflow: hidden;
    height: 0px;
    position: relative;
    z-index: 10;

    -webkit-transition: height 0.3s ease-in-out;
    -moz-transition: height 0.3s ease-in-out;
    -o-transition: height 0.3s ease-in-out;
    -ms-transition: height 0.3s ease-in-out;
    transition: height 0.3s ease-in-out;
}
.ac-container article p {
    padding: 5px;
/*  opacity: 0; /* ------- Problem 3 ------- */
}
.ac-container input:checked ~ article {
    height: 150px; /* ------- Problem 4 ------- */

    -webkit-transition: height 0.5s ease-in-out;
    -moz-transition: height 0.5s ease-in-out;
    -o-transition: height 0.5s ease-in-out;
    -ms-transition: height 0.5s ease-in-out;
    transition: height 0.5s ease-in-out;
}
.ac-container input:checked {height: auto;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:07:37.253

问题 1：因为`label`s 不是`ac-container`. 如果您将顶部边框放在`div`s 上，它会起作用。

问题2：选择器应该是`.ac-container input[type='checkbox']:checked + label`，因为标签本身没有被检查。标签的颜色也会被默认颜色覆盖，所以试着放一个`!important`看看它是如何工作的。

问题3：我这样说：

```
.ac-container input:checked ~ article {
    opacity: 1;

    -webkit-transition: opacity,height 0.5s,0.5s ease-in-out;
    -moz-transition: opacity,height 0.5s,0.5s ease-in-out;
    -o-transition: opacity,height 0.5s,0.5s ease-in-out;
    -ms-transition: opacity,height 0.5s,0.5s ease-in-out;
    transition: opacity,height 0.5s,0.5s ease-in-out;
}

.ac-container article{
    opacity:0;

    -webkit-transition: opacity,height 0.3s,0.3s ease-in-out;
    -moz-transition: opacity,height 0.3s,0.3s ease-in-out;
    -o-transition: opacity,height 0.3s,0.3s ease-in-out;
    -ms-transition: opacity,height 0.3s,0.3s ease-in-out;
    transition: opacity,height 0.3s,0.3s ease-in-out;

} 
```

问题4：似乎您需要指定高度，除非您使用javascript：[类似问题](https://stackoverflow.com/questions/3508605/css-transition-height-0-to-height-auto)

# sharepoint - 带有自定义母版页的共享点“库设置”中的异常

> ID：13285789
> 
> 赞同：0
> 
> 时间：2012-11-08T09:08:31.470
> 
> 标签：sharepoint, sharepoint-2010

**表单服务器模板**

**样式库**

**SiteCollectionImages**

**页面**

我有几个默认的共享点库，其中“库设置”单击出现异常：

![在此处输入图像描述](../Images/75d591ab170e9042fa2dbe02a6e37a40.png) **System.NullReferenceException：对象引用未设置为对象的实例。在 Microsoft.SharePoint.ApplicationPages.ListEditPage.OnLoad(EventArgs e) 在 ASP._layouts_listedit_aspx.OnLoad(EventArgs e) 在 System.Web.UI.Control.LoadRecursive() 在 System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)**

我所有的调查都表明这个问题是因为 **DocumentTemplateUrl**为空！

```
this.strDocTemplateURL = "";
  if (this.iBaseType == SPBaseType.DocumentLibrary)
  {
    this.strDocTemplateURL = ((SPDocumentLibrary) this.spList).DocumentTemplateUrl;
    this.DocumentLibraryGeneralLinks.Visible = true;
  }
  if (this.strDocTemplateURL.Length != 0) 
```

但一个非常重要的注意事项是，此错误仅出现在自定义母版页中！

默认 v4 母版页正常工作。

有什么想法会导致那里出现问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:33:39.190

如果不浏览您的母版页，我的猜测是自定义母版页中缺少一些 javascript。我会尝试比较使用 v4 母版页呈现时的 HTML 页面源代码与使用自定义母版页呈现的输出。然后我会比较 javascript - 不仅在头部和页面底部，而且在整个页面中。我会特别比较 ContextInfo 对象分配，并确保将这些属性分配给相似的值。

我的想法是库设置按钮需要一些javascript代码或引用，但找不到，这就是导致错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T09:58:18.980

至少这是一个非常奇怪的问题或奇怪的异常。但是在自定义母版页上发现了可能导致此异常的控件。

在该设置页面上找到了可能导致问题的两行代码：

**1) web.Lists.TryGetList(listTitle);**

**2) RightsSensitiveVisibilityHelper.UserHasRights(PermissionContext.CurrentSite, SPBasePermissions.AddListItems, PermissionMode.Any, list);**

没有例外，但如果我们使用其中一种方法，就会出现异常！

我认为这个错误是因为 webpart 在 OnLoad 方法中包含奇怪的代码，它确保子控件和创建标题：

```
 protected override void OnLoad(EventArgs e)
    {
        try
        {
            base.OnLoad(e);
            this.EnsureChildControls();
            this.InitWebPartHeader();
        }
        catch (Exception ex)
        {
            this.Controls.Clear();
            this.Controls.Add(new LiteralControl(ex.Message));
        }
    } 
```

我不知道为什么我们有这段代码，但也有注释“确保在事件之前调用 CreateChildControls()。”。

所以我希望这将为那些寻找同样错误的人节省时间。

# c++ - 预处理器定义在 Visual Studio 中有效，在 Qt-creator 中无效

> ID：13285791
> 
> 赞同：1
> 
> 时间：2012-11-08T09:08:32.467
> 
> 标签：c++, visual-studio, qt, qmake, c-preprocessor

**。轮廓：**

```
DEFINES += MY_HEADER=\"test.h\" 
```

**cpp文件：**

```
#include MY_HEADER 
```

在 Qt-Creator 编译失败并出现错误：

> 错误 C2006：“#include”：需要一个文件名，找到“标识符”

编译器命令行似乎是正确的：

> "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\BIN\nmake.exe" -f Makefile.Debug cl -c -nologo -Zm200 -Zc:wchar_t- /E -Zi -MDd /E -GR -EHsc -W3 -w34100 -w34189 -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DMY_HEADER="test.h" -DLLL=3 -DQT_DLL -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_THREADS_UPSPORT 4.7.4\include\QtCore" -I"c:\Qt\4.7.4\include" -I"c:\Qt\4.7.4\include\ActiveQt" -I"debug" -I"..\testdefine “ -我”。” -I"c:\Qt\4.7.4\mkspecs\win32-msvc2010" -Fodebug\@C:\Users\Ekimov-A\AppData\Local\Temp\nm9C17.tmp

当使用 Qt-addin 将项目导入 Visual Studio 时，此代码编译时没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:06:35.370

这似乎是一个 qmake 错误（功能？）。可能的解决方法：

```
DEFINES += 'MY_HEADER=\\\"test.h\\\"' 
```

或者

```
DEFINES += MY_HEADER=\\\"test.h\\\" 
```

# php - 在其他输入字段中自动增加日期

> ID：13285792
> 
> 赞同：0
> 
> 时间：2012-11-08T09:08:34.950
> 
> 标签：php, javascript, jquery

我有 1 个下拉框和 2 个输入字段。

当我从下拉列表中选择一个值时，（我将值 12 Month 和 60 Month 放在里面）看图片

![选择月数](../Images/aaa41dd3b495c9b50e59a3f71ddde5cd.png)

当我使用 jquery datepicker 获取像 '08/11/2012' 这样的日期时，请查看下一张图片

![使用 Datepicker 选择日期](../Images/62cdf77322d505f1fb49642d4069cfb7.png)

然后我想在第二个输入字段中自动获取 + 12 个月的日期 - '08/11/2013' 看图片

![从下拉列表的值自动增加日期](../Images/b67181948d3c0d0b80722d36d5538edd.png)

因此，当我取一个 60 个月的值时，它必须像 '08/11/2017' 一样计数 + 60 个月

我不知道如何意识到这一点。所有值都来自 MySQL 数据库

这是我现在拥有的代码：

```
 <table id="BLth1B" cellspacing="0" >
         <tr>
          <td id="BLth1" colspan="3">&nbsp;&nbsp;JUGEMENT</td>
        </tr>
        <tr>
          <td id="mySaisie">&nbsp;Régime</td>
          <td id="mySaisie">&nbsp;Date Jugement</td>
          <td id="mySaisie" >&nbsp;Date de Fin</td>
        </tr>
        <tr>
          <td>
            <select id="basic-combo" name="basic-combo">
            <option value="0"></option> 
    <?php

    $QryRegime = "SELECT id_regimes, regimes_ref, mois_reg FROM amep_regimes";
    $ResRegime = mysql_query($QryRegime) OR die(mysql_error());

    while($rowregime = mysql_fetch_assoc($ResRegime)) { 
    echo "<option  value=". $rowregime['id_regimes'] .">" . $rowregime['regimes_ref'] . " - " . $rowregime['mois_reg'] . "&nbsp;</option>";  
    }
    ?>
            </select> 
        </td>
          <td><input class="input20" id="datumanfang" /></td>
          <td><input class="input20"/></td>
        </tr>
    </table> 
```

如果有人可以帮助我吗？

提前 THX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:26:35.937

首先，ID 应该始终是唯一的，这就是为什么它被称为 id...所以请确保您更改此 ID...

```
 <td id="mySaisie">&nbsp;Régime</td>
 <td id="mySaisie">&nbsp;Date Jugement</td>
 <td id="mySaisie" >&nbsp;Date de Fin</td> 
```

Datepicker 有这个选项。看看文档。

[http://api.jqueryui.com/datepicker/#method-setDate](http://api.jqueryui.com/datepicker/#method-setDate)

并做这样的事情......

```
$(function(){
    $('#datumanfang').datepicker({
         onSelect: function(date,obj){
             var selectvalue=$('#basic-combo').val(); // get a select value
             var addeddate=date.setMonth(date.getMonth() + selectvalue); //add that value
             $(#idOfLastInput).datepicker( "setDate", addeddate);  // give and id to the last input... and select that
         }
    });
}); 
```

我建议您使用[date.js](http://www.datejs.com/)进行日期计算和使用日期对象。

# audio - 删除音频文件的第一段

> ID：13285793
> 
> 赞同：1
> 
> 时间：2012-11-08T09:08:49.363
> 
> 标签：audio

是否有任何工具或代码可用于删除许多音频文件的前 10 秒？您可以选择包含大量音频文件的文件夹的路径，然后处理它们。文件为 mp3 格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T10:21:00.740

**选项 1：脚本语言。**

我以前在使用 Matlab 的 wav 文件上做过类似的事情，因为它有方便的内置`wavread`和`wavwrite`命令。但是，任何抽象工作的文件读/写部分的脚本语言都应该适合目的。最简单的方法是拥有一个包含要处理的文件的收件箱类型文件夹，以及一个用于修改文件的发件箱类型文件夹。然后，您只需创建一个执行以下操作的脚本。. .

*   查看文件夹中的文件，也许将文件名组织成一个列表

*   开始循环列表中的文件

    *   在当前循环索引处打开文件

    *   将文件转换为原始（未压缩）样本数组

    *   按适当数量的样本截断文件

    *   将原始样本转换回您想要的压缩格式

    *   将文件写入发件箱

Matlab有`mp3read`和[可用的](http://www.mathworks.com/matlabcentral/fileexchange/6152-MP3WRITE%20and%20MP3READ)`mp3write`函数，而且我确信对于您熟悉的任何脚本语言都有类似的功能。我可以预见的唯一问题是，压缩和未压缩格式之间的重复转换可能会开始留下可听的伪影。为了保真度，最好的解决方案可能是直接修改 mp3 文件格式，尽管这实际上需要对 mp3 格式本身有很好的理解（除非有此类功能的库）

**选项 2：在声音编辑软件中进行批处理**

看起来好像您可以使用 Audacity 批量处理音频剪辑......

[http://manual.audacityteam.org/man/Batch_Processing](http://manual.audacityteam.org/man/Batch_Processing)

... 和其他编辑软件，如 Audition，可能具有类似的批处理功能。您必须搜索文档以查看这些批处理过程是否会执行您想要的操作。

# wordpress - Wordpress Facebook 插件不再显示粉丝页面

> ID：13285796
> 
> 赞同：2
> 
> 时间：2012-11-08T09:09:01.073
> 
> 标签：wordpress, facebook-page

官方的 Wordpress Facebook 插件不再显示我的任何粉丝页面。我已尝试删除应用程序信息，然后卸载插件，重新安装并再次完成设置过程。它似乎工作正常，但是当我尝试通过单击添加帖子页面上的“将您的 Facebook 帐户链接到您的 WordPress 帐户”链接之一进行身份验证时，会出现一个弹出窗口几秒钟，但实际上没有显示任何内容就消失了信息，并且下拉框中仍然没有列出粉丝页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:35:23.307

可能该插件的代码已过时。我建议您访问 Facebook 文档并生成您自己的代码并将其放在您的 HTML 中而不使用插件：http: [//developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)

# asp.net-mvc - 用于控制对实体的访问的 ASP.MVC 最佳安全实践

> ID：13285799
> 
> 赞同：1
> 
> 时间：2012-11-08T09:09:04.607
> 
> 标签：asp.net-mvc, entity-framework, security, architecture

让我们有以下实体的系统：

```
public class Doctor
{
    public int ID { get; set; }
    public int DepartmentID { get; set; }
    public string Name { get; set; }
    public ICollection<Recipe> Recipes { get; set; }
}

public class Patient
{
    public int ID { get; set; }
    public string Name { get; set; }
    public ICollection<Recipe> Recipes { get; set; }
}

public class Recipe
{
    public int ID { get; set; }
    public int DoctorID { get; set; }
    public int PatientID { get; set; }
    public Doctor Doctor { get; set; }
    public Patient Patient { get; set; }
    public ICollection<RecipeDetails> Details { get; set; }
}

public class RecipeDetails
{
    public int ID { get; set; }
    public Guid SomeGuid { get; set; }
    public double SomeValue { get; set; }
} 
```

我们也有要求：

*   医生应该能够编辑他的食谱
*   医生应该只能看到他部门内医生的食谱
*   医生应该能够通过可用的食谱进行搜索
*   医生应该能够根据可用的食谱详细信息生成报告

现在我已经实施了以下安全检查：

```
public void ValidateAccess(Doctor doctor, Recipe aRecipe, EntityAction action)
{
    if (action == EntityAction.Modify && doctor.ID == aRecipe.Doctor.ID)
        return;
    if (action == EntityAction.Read && doctor.DepartmentID == aRecipe.Doctor.DepartmentID)
        return
    throw new SecurityException();
} 
```

当我有收据实体时，这非常适合简单的方法，我可以通过在我的逻辑方法开始时调用此方法来轻松验证访问。

但是现在我遇到了问题，当我没有确切的实体但对它们有一些统计数据时，这个解决方案将不适用于搜索和报告。

让我们想象一下，我想为名称为“aName”的患者生成报告，这些患者的收据带有“someGuid”组件，我将有一些带有 2 个标准的查询：

```
var res = RecipeRepository.Query(r => aName.Contains(r.Patient.Name)).SelectMany(r => r.Details).Where(d => d.SomeGuid == someGuid).Sum(d => d.SomeValue); 
```

此查询不正确，它将显示所有配方的统计信息，包括那些应该隐藏的配方。为了解决这个问题，我们应该将我们的访问条件添加到我们的查询中：

```
currentDoctor.DepartmentID == r.Doctor.DepartmentID 
```

所以现在我有疑问：

```
var res = RecipeRepository.Query(r => aName.Contains(r.Patient.Name) && currentDoctor.DepartmentID == r.Doctor.DepartmentID).SelectMany(r => r.Details).Where(d => d.SomeGuid == someGuid).Sum(d => d.SomeValue); 
```

问题是我应该将此部分添加到系统中对收据进行任何计算的每个查询中。

更新（2012-11-12）：

第一个例子非常简单，可以像 StuartLC 在他的帖子中提到的那样解决。但是我们的系统中有更复杂的报告。例如 - 显示所有在他们的食谱中包含 someGuid 组件的患者。现在我们的查询从另一个存储库开始，因此我们不能应用来自 RecipeRepository 的私有或受保护方法。这是示例查询：

```
var res = PatientRepository.Query(p => p.Name.Contains(aName) && p.Recipes.Any(r => r.Details.Any(d => d.SomeGuid == someGuid))); 
```

在这种情况下，我们仍然需要将过滤器直接添加到查询中：

```
var res = PatientRepository.Query(p => p.Name.Contains(aName) && p.Recipes.Any(r => currentDoctor.DepartmentID == r.Doctor.DepartmentID && r.Details.Any(d => d.SomeGuid == someGuid))); 
```

结束更新。

可以应用什么模式或实践来简化此解决方案并防止将表达式复制粘贴到每个查询？我会很感激你的回答和建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:38:03.230

如果您的存储库模式`Query()`方法返回一个 non-materialized `IQueryable<T>`，那么您可以将数据访问限制的问题重构为帮助方法，每个“可限制”实体一个，例如：

```
private IQueryable<Recipe> ApplyAccessFilters(IQueryable<Recipe> query, User user)
{
    IQueryable<Recipe> filteredQuery = query;

    // Custom method to determine if user is restricted to just his / her recipes
    if (!CheckUserPermission(currentUser, Access.MaySeeAllRecipies) ))
    {
        filteredQuery = filteredQuery
                              .Where(r => r.DepartmentId = currentUser.DepartmentId)
    } // Else no restriction, e.g. Admin Users can access all recipes

    // Other access related filters here

    return filteredQuery;
} 
```

然后，每个需要访问限制的 MVC 控制器操作都可以使用此方法来构建生成的过滤器表达式，例如：

```
var recipes =  RecipeRepository.Query(r => r.SomeFields == someFilters); // NB, do NOT materialize the lambda
var recipesForDoctor =  ApplyAccessFilters(recipes, currentUser) // Access Filter
...
return View(recipesForDoctor); // [AsEnumerable()] - Consider materializing here 
```

您可以以相同的方式处理其他问题，例如分页。

更棒的是，你可以让这个访问过滤器[fluent](https://stackoverflow.com/questions/293353/fluent-interfaces-method-chaining)，在这种情况下过滤器很容易看：

```
return View(RecipeRepository
            .Query(r => r.SomeFields == someFilters)
            .ApplyAccessFilters(currentUser)
            .Paginate(pagingInfo)
            .AsEnumerable()); 
```

# dos - MS-DOS 文件/目录特征

> ID：13285803
> 
> 赞同：1
> 
> 时间：2012-11-08T09:09:08.380
> 
> 标签：dos

每当我们在 MS-DOS 中创建任何新文件时，默认情况下它都会创建类似“.”的目录。和 ”..”。这些目录是什么？它对操作系统有什么帮助？还有有什么办法可以删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:10:41.657

`.`和`..`目录分别是指向自身及其父目录的链接。无法删除它们。

目录的目的`..`是让您可以导航回目录的父级。目录的目的`.`是能够引用当前目录，必须指定完整的名称和路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-08T09:11:02.993

这 ”。” directory 是指向它所在目录的指针。

“..”目录是指向父目录的指针。

例子

*   `C:\Temp\.\SomeFolder\`是同一个目录`C:\Temp\SomeFolder`，
*   `C:\Temp\..\SomeFolder\`是同一个目录`C:\SomeFolder\`。

**编辑**

DOS 中的绝对路径是“根目录”（即它以[卷](http://en.wikipedia.org/wiki/Volume_%28computing%29)开头）。一个例子是

```
volume
C:\someFolder\someFile.txt 
```

相对路径是依赖于当前目录的路径。例如：

```
REM Change the directory to an absolute path
CD C:\Data\Movies

REM Now change the directory to "C:\Data\Music" using a relative path.
REM We are saying "The Music folder, inside the parent folder of C:\Data\Movies"
CD ..\Music 
```

# c# - 通过 C# 代码验证谷歌证书？

> ID：13285805
> 
> 赞同：0
> 
> 时间：2012-11-08T09:09:16.073
> 
> 标签：c#, .net, security, authentication, .net-4.0

当我浏览*google.com*时，我可以通过单击地址栏来确保它是*google.com ：*

![在此处输入图像描述](../Images/388540c509ebc1b44c3a5b349a2fc067.png) ![在此处输入图像描述](../Images/78fbbd2e3ea3372bcb800d3884bc4b41.png)

但是让我们假设谷歌正在公开 `Service1`，而我 - 使用 c# 使用此服务（wcf） -

我的服务如何确保他连接到 google.com ？

我知道这里涉及到一个证书。

我已经 *知道*如何从我的商店读取本地证书。但是这个证书不在我的商店里。

问题 ：

那么**如何**（以及在​​什么**阶段**）我可以读取谷歌的证书数据并确保我连接到它们？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:15:27.240

```
ServicePointManager.ServerCertificateValidationCallback = 
    (sender, certificate, chain, policyError) => {
        var subject = certificate.Subject;
        return subject == "CN=www.google.com, O=Google Inc, L=Mountain View, S=California, C=US";
    }; 
```

# php - Windows 和 Linux 中的 PHP 日期函数

> ID：13285806
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:09:19.130
> 
> 标签：php, linux, windows, date

我使用的功能日期：

```
 public function datetime() {
        $today = getdate();
        $datetime =  $today['year'].'-'.$today['mon'].'-'.$today['mday'].' '.
                    ($today['hours']+8).':'.$today['minutes'].':'.$today['seconds'];
        return $datetime;
    } 
```

有两个服务器 [ A 和 B ]：服务器 A 使用 Windows，服务器 B 使用 Linux

两个服务器的日期和时间都是相同的，但是当我运行这个 php 代码时，时间的输出是不同的。

这是为什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:12:20.487

如果您只需要日期，请执行以下操作：

```
<?php 
    date_default_timezone_set('America/Los_Angeles');
    $today = date('Y-m-d');
    echo $today;
    ?> 
```

如果您还需要时间戳，请执行以下操作

```
<?php 

        date_default_timezone_set('America/Los_Angeles');
        $today = date('Y-m-d H:i:s');
        echo $today;
        ?> 
```

希望对你有帮助

# vb.net - 向 vb.net 应用程序发送通知消息

> ID：13285808
> 
> 赞同：2
> 
> 时间：2012-11-08T09:09:25.760
> 
> 标签：vb.net, winforms, notifications

我正在开发一个 vb.net windows 应用程序，我希望在发生新事件时通知我的一些用户。（例如：更新表中的字段，或在表中添加新行）此通知应该具有相同的 UI作为我的其他 vb 表单。（我想在单独的表单上显示它，而不是任何 Windows 消息框）

我不知道解决这个问题的最简单方法。

提前致谢。

-编辑-

我试图解释的“通知”类似于 facebook。例如：在浏览 facebook 时，朋友对状态发表评论，页面左上角有通知。我正在尝试开发这个在添加、删除或编辑 sql 记录时使用实时数据的 Windows 应用程序。此应用程序在多台计算机上同时运行（到目前为止只有 2 台），当 1 个用户修改记录时，将通过此“通知弹出窗口”通知其他用户。

是的，使用 Windows 窗体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:53:03.247

除了Fabian的回答。

在数据库中，您应该有一个布尔值，False = 未读，True = 读取“通知”。

您可以进行获取所有 False 通知的 linq 查询。您编辑数字、颜色和 UI 的对象。

```
Dim getUnread = (From rec In db.Notifications
                Where rec.messageBoolean = False
                Select rec).toList()
'number of notifications
dim numberOfNotifications as Integer = getUnread.count

If numberOfNotifications >0 Then 
   labalNotify.text = numberOfNotifications.tostring()
   'change colors, add icons, make the world go round.

  End If 
```

我想你明白了

玩得开心

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:15:26.683

我认为您正在使用Winforms？

步骤是：

*   制作一个新表格
*   当事件发生时（即在您的事件处理程序中），使用：

    ```
    var myForm = new NotificationForm();
    NotificationForm.Show(); 
    ```

另请参阅[在 C# 中单击按钮时显示新表单](https://stackoverflow.com/questions/1553235/to-show-a-new-form-on-click-of-a-button-in-c-sharp)

如果您希望通知以不显眼的方式显示，`Label`请在表单上的某处添加并更新`Label.Text`属性。

要检查 SQL 数据库记录中的更改，您需要查看使用 Web 服务（如果应用程序需要可扩展），或者要直接访问 SQL Server 数据库，请查看[SqlConnection](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.aspx)类。

祝你好运。

# java - 自动完成 JCombo 框 (Java2S) 在更改事件上设置错误值

> ID：13285809
> 
> 赞同：0
> 
> 时间：2012-11-08T09:09:27.927
> 
> 标签：java, swing, autocomplete, jtable, jcombobox

参考[问题](https://stackoverflow.com/questions/10897839/how-to-implement-auto-complete-functionality-in-a-cell-in-jtable/10901944#10901944)！由 abg 和由 mKorBel 回答。

并使用 J2s[自动完成组合框](http://www.java2s.com/Code/Java/Swing-Components/AutocompleteComboBox.htm)！

mKorBel 对于我的案例的答案中的代码在以下代码中存在另一个问题，当我编辑第三行时它工作正常，但是当我单击第一行进行编辑时，它将第一行的值设置为选定的第三行。

```
 comboBox.addActionListener(new ActionListener() 
    {

       public void actionPerformed(ActionEvent e) 
       {

          JComboBox comboBox = (JComboBox) e.getSource();
          String    itemStr= comboBox.getSelectedItem().toString();
          int  selectedRowLocal= tblDetailInfoParts.getSelectedRow();

          if (selectedRowLocal != -1) 
          {
             if ((itemStr != null) && (itemStr.compareTo("") != 0) ) 
             {
                tblDetailInfoParts.setValueAt(itemStr, selectedRowLocal, 15);
             }

          }

       }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T02:44:20.057

我没有将动作侦听器添加到组合框（即添加到 JTable），而是添加了[Rob Camick 的表格单元侦听器](http://tips4java.wordpress.com/2009/06/07/table-cell-listener/)！在我添加了组合框的单元格中，我听到了对我来说非常有效的变化。（这在我之前关于 Java2s Autocomplete Combo Box By **@mKorbel**的问题的评论中指出）

```
 private void formWindowOpened(java.awt.event.WindowEvent evt) 
 {
    AddingPartsChangeEvent();
 } 
```

My Table Cell Listener To My JTable 的代码如下

```
 private void addingPartsChangeEvent() 
   {

      Action actionProd = new AbstractAction() 
      {

         public void actionPerformed(ActionEvent e) 
         {
            try 
            {
               boolean newChk = false;
               TableCellListener tcl = (TableCellListener) e.getSource();
               int selectedRow = tcl.getRow();
               int selectedCol = tcl.getColumn();

               if (selectedCol == 4) 
               {
                  Object partO = tcl.getNewValue();
                  String design = null;
                  String partStr = partO.toString();
                  tblDetailInfoParts.setValueAt(partStr,selectedRow, 15) ;
               }

            } 
            catch (Exception ex) 
            {
               ex.printStackTrace();
            }
         }
      };
      TableCellListener tclProd = new TableCellListener(tblDetailInfoParts,
      actionProd);
    } 
```

# c++ - 将 .txt 文件读入数组

> ID：13285810
> 
> 赞同：1
> 
> 时间：2012-11-08T09:09:30.270
> 
> 标签：c++, arrays, multidimensional-array

> **可能重复：**
> [文件中的 C++ 匹配字符串并获取行号](https://stackoverflow.com/questions/7779469/c-match-string-in-file-and-get-line-number)

我被分配了一个硬件任务，所以我不是要求一整套代码，但也许是一些关于我应该做什么的提示。分配如下： 包含文本文件 babynames2004.txt。包含美国最受欢迎的 1000 个名字的列表。它是一个以空格分隔的文件，包含 1000 个条目，其中排名在前，然后是相应的男孩名和女孩名。最受欢迎的名字排在最前面，最不受欢迎的名字排在最后。编写一个允许用户输入名称的程序。然后程序应该从文件中读取并在女孩和男孩中搜索匹配的名字，然后将该信息存储在一个数组中。如果找到匹配项，它应该输出名称的排名。程序还应指出是否不匹配。

```
#include <iostream>
#include <cstdlib>
#include <fstream>
using namespace std;
//function prototypes
void input(int search(const int name[][Max_Girl_Name], int, int, int );
void display(

int main()
{
  const int Max_Girl_Name = 1000, Max_Boy_Name = 1000;     //array sizes
  int name[][Max_Girl_Name], count(0);

  ifstream inputfile; //open stored file
  inputFile.open("c:/temp/babynames2004.txt")
  if (inputFile.fail())
  {
     cout<<"Error opening File\n";
  }
  else 
  {
     while(!inputFile.eof())
     inputFile>>name[count];
     count++
  }

  input(
  searchname = (
  display(

  inputFile.close();

  cout << count " is ranked " << Rank <<  

}

system("PAUSE");
return 0;
}

int search(const int name[][Max_Girl_Name], int name_input, int targetname, int size_Dimension_1)
{
  for(int i = 0;i<size_Dimension_1;i++)
  {
    int index = 0;
    bool found = false;
    while ((!found) && (index < number_used))
      if (target == name[index])
         found = true
      else 
           index++;

      if(found)
               return index;
      else -1;
    }
} 
```

我也有几个想法：

1.  这是否可以使用多维数组来解决，例如`names[boy_name][girl_name]`？
2.  这个程序的功能会是`search(value)`, `input(void)`,`output(void)`吗？
3.  您将如何遍历数组的两个索引？

我希望我足够清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:47:58.113

在一些提示之前，只是关于如何处理事情的建议。在编码成为您的第二天性之前，您应该花时间在伪代码中写出您希望最终代码执行的操作。然后将这些行更改为注释并开始充实您需要满足要求的变量和循环等。通过这样做（a）你变得更有条理，并且（b）它可以让你记录你的方法。

```
//The text file babynames2004.txt is included. 

//Contains a list of the 1000 most popular names in the US. It is a space-delimited file of //1000 entries in which the rank is listed first, followed by the corresponding boy name //and girl name. 
const int Max_Name = 1000

//The most popular names are listed first and the least popular names are listed last. 
int rankArray[Max_Name];//a given index in all three corespondss to the row in the file
char boyArray[Max_Name][SomeConstantMaxLengthValue];
char girlArray[Max_Name][SomeConstantMaxLengthValue];

//write a program that allows the user to input a name. 
int main(unsigned int argc, const char** argv )
{
    std::cin >> searchName;

    //The program should then read from the file and search for a matching name among the   
    //girls and boys then store this information in an array. If a match is found, it 
    //should output the rank of the name. The program should also indicate if there is no 
    //match.
    if ( readNameFromFile( searchName , rank, girlName, boyName ) )
    {
        Store( rank,girlName,boyName );
        std::cout << .... //details retireved...
    }
    else
    {
         //Not found - do something helpful
    }
} 
```

`readFromFile`并且`Store`是完成工作的位，请考虑*通过引用传递参数*（google/c++ 教科书）*，以便您可以*在函数中操作它们。*请参阅有关读取文件的 Ians 提示。*

您的问题似乎只希望您存储用户选择的那些，否则它希望您**搜索文件**并选择正确的行。确实，阅读所有内容然后存储更有效，但这是您的决定。如果您确实阅读了所有内容，那么您只需要遍历 2 个名称数组，直到名称匹配。然后从 rank、girl 和 boy 数组中提取详细信息...*提示* `strncmp(...)`或可能您是否可以`std::string`用于名称

```
std::string boyNames[Max_Name];
std::string girlNames[Max_Name]; 
```

它可能更容易，但我猜你需要使用`char`

需要谨慎选择实际的数组，因为名称是任意长度，因此您可能需要考虑如何记录详细信息 - 如果它将是 char 数组，那么您需要在存储等时确保长度... . 看看你是怎么上去的，如果有任何问题就回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:41:11.177

根据您的知识水平，您被困在数组中。您应该有 3 个一维数组，就像您已经定义的那样。（在实际程序中，您将定义一个包含三个项目boysname、girlsname 和rank 的类）

1.应该是这样的：

```
int maxLines=1000;
int maNameLength=100; // This would go away later coz you would use std::string when you learnt them
char boysName[maxLines][maxNameLength];
char girlsName[maxLines][maxNameLength];
int rank[maxLines]; 
```

（所以这里是你的“多维数组”，那是女孩和男孩的名字）

2.你是对的，3个这样的功能就可以了。输入函数应该例如逐行读取文件，将其分成三个字段并将它们存储在这些数组中。这可以通过各种方式完成，使用 std:: 库中的高级构造，或者作为初学者，您可能想手动完成。（注意文件的行数超过数组大小，或者名称长于 maxNameLength）。搜索功能应该通过您的数组并检查名称是否相等，如果找到则返回数组索引，否则例如 -1

然后输出函数获取这个数组索引，首先检查它是否有效（>=0 和 lt maxLines），然后输出排名或未找到）。

不要沮丧，作为初学者，您有很多工作要做才能启动和运行这个程序......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:35:32.127

**提示**

`ifstream`有一个名为的方法`getline`，允许您指定所需的分隔符。

由于男孩名和女孩名彼此之间没有任何特定关系，您可以将它们存储在完全独立的列表中，但是如果*两个*列表中都出现了一个名字会发生什么？

每个名称都有一个等级，因此信息确实需要以这样一种方式存储，即 2 条数据可以相互关联。

# ios - 比较 kCFFTPResourceType 和 number

> ID：13285811
> 
> 赞同：1
> 
> 时间：2012-11-08T09:09:30.697
> 
> 标签：ios, xcode, cfstream

我正在写一个FTP下载系统，列表功能：

```
NSLog(@"%@", listDir.filesInfo); 
```

我在服务器上看到我的文件：

```
{
    kCFFTPResourceGroup = group;
    kCFFTPResourceLink = "";
    kCFFTPResourceModDate = "2012-11-04 15:49:00 +0000";
    kCFFTPResourceMode = 511;
    kCFFTPResourceName = "eyeview__0000_sport_general.jpg";
    kCFFTPResourceOwner = owner;
    kCFFTPResourceSize = 169790;
    kCFFTPResourceType = 8;
},
    {
    kCFFTPResourceGroup = group;
    kCFFTPResourceLink = "";
    kCFFTPResourceModDate = "2012-11-04 15:49:00 +0000";
    kCFFTPResourceMode = 511;
    kCFFTPResourceName = "eyeview__0001_sport_reading.jpg";
    kCFFTPResourceOwner = owner;
    kCFFTPResourceSize = 224795;
    kCFFTPResourceType = 8;
}, 
```

接下来我想做的是：

```
for (NSDictionary *file in listDir.filesInfo)
    {
        NSLog(@"%@", [file objectForKey:(id)kCFFTPResourceName]); //Prints the file name

        if ([file objectForKey:(id)kCFFTPResourceType]==8) //*My problem
        {
            [filesList addObject:[file objectForKey:(id)kCFFTPResourceName]]; //Works perfectly in case outside the if function
        }

    } 
```

*我的问题是比较错误，我怎么写才能工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:13:54.160

`[file objectForKey:]`不会返回`int`. 它返回一个`NSNumber`（又名`CFNumberRef`）。

演示：

```
NSNumber * n = [file objectForKey:(id)kCFFTPResourceType];
const int i = n.intValue;
if (8 == i) {
  [filesList addObject:[file objectForKey:(id)kCFFTPResourceName]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T13:08:23.220

当需要 kCFFTPResourceType 详细信息时，这可能很有用。

[kCFFTPResourceType 详细信息](http://man7.org/linux/man-pages/man2/getdents.2.html)

# java - java中的正则表达式从给定的字符串中找到像 ${...} 这样的模式

> ID：13285821
> 
> 赞同：5
> 
> 时间：2012-11-08T09:09:57.257
> 
> 标签：java, regex

我是正则表达式的菜鸟。

我有这样的字符串：-

```
String str = "sbs 01.00 sip ${dreamworks.values} print ${fwVer} to 
              used ${lang} en given ${model}  in ${region}"; 
```

我必须提取与此类型匹配的所有模式 ${....}

喜欢：- 对于给定的 str 结果应该是

```
${dreamworks.values} 
${fwVer}   
${lang}
${model}
${region} 
```

进一步，如果它发现任何重复，则只给出一个。例如：-

```
String feed = "sip ${dreamworks.values} print ${fwVer} to ${fwVer} used
                ${lang} en ${lang}given ${model}  in ${region}" 
```

结果应该是：-

```
 ${dreamworks.values}  
 ${fwVer}   
 ${lang}
 ${model}
 ${region} 
```

只要

这是我的回答：-

```
PLACEHOLDER_PATTERN = "\\$\\{\\w+\\}"; 
```

但是这个没有给出正确的结果。它只给

```
${fwVer}
${lang}
${model}
${region} 
```

所以请建议我正确的正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T09:11:41.963

您没有考虑`.`单词之间的中间值。`\\w`不包括`dot(.)`.

您需要将模式更改为： -

```
PLACEHOLDER_PATTERN = "\\$\\{.+?\\}"; 
```

`dot(.)`匹配一切，这就是你想要的，对吧？

另外，我在这里使用了`reluctant`量词 -`.+?`所以它只匹配第一个`}`after `{`，因为如果你使用一个贪婪的量词`(.+)`，`dot(.)`也会匹配`}`方式直到它找到最后一个`}`。

* * *

**更新： -**

要获取唯一值，您可以使用以下模式：-

```
"(\\$\\{[^}]+\\})(?!.*?\\1)" 
```

它将只匹配那些模式，后面没有包含相同模式的字符串。

**注意： -**在这里，我使用`[^}]`, 代替`.+?`. 它将匹配除 之外的任何字符`}`。所以，现在在这种情况下，你不需要`reluctant`量词。

`\1`用于`backreferencing`，但我们需要用反斜杠对其进行转义，因此`\\1`, 和`(?!...)`用于`negative look ahead`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:12:39.917

也就是说，因为`.`不包含在`\w`. 然后您需要创建自己的[角色类](http://www.regular-expressions.info/charclass.html)并将其添加到那里。

```
PLACEHOLDER_PATTERN = "\\$\\{[\\w.]+\\}"; 
```

请参阅[Regexr 上](http://regexr.com?32o49)的模式。

但是，这并不能解决问题，即您不希望重复，但这不是正则表达式的工作。

如果大括号之间可以有更多不同的字符，那么[Rohits 的答案](https://stackoverflow.com/a/13285846/626273)会更好，这将匹配任何字符直到右括号。

# java - 找不到“http://java.sun.com/jsp/jstl/core”的标签库描述符

> ID：13285826
> 
> 赞同：57
> 
> 时间：2012-11-08T09:10:15.260
> 
> 标签：java, eclipse, tomcat, jstl

我在我的 JSP 页面的最顶部包含了这个：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %> 
```

我已经将 JSTL JAR 文件放在了`WEB-INF/lib`目录中。但是，JSP 仍然无法解析 taglib。我收到以下错误：

> 找不到“<a href="http://java.sun.com/jsp/jstl/core" rel="noreferrer">http://java.sun.com/jsp/jstl/ 的标签库描述符核心”</p>

我正在使用 Eclipse Juno，项目结构如下所示：

![在此处输入图像描述](../Images/df7d77c4a0b7fed43ecccfb120802000.png)

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-09T12:02:27.030

> Can not find the tag library descriptor for “http://java.sun.com/jsp/jstl/core”</p>

Based on [one of your previous questions](https://stackoverflow.com/questions/13217635/eclipse-juno-ee-cant-detect-external-jar) you're using Tomcat 7\. In that case you need JSTL 1.2\. However, you've there a `jstl.jar` file while JSTL 1.2 has clearly the version number included like so `jstl-1.2.jar`. The sole filename `jstl.jar` is typical for JSTL 1.0 and 1.1\. This version requires a `standard.jar` along in `/WEB-INF/lib` which contains the necessary TLD files. However, in your particular case the `standard.jar` is clearly missing in `/WEB-INF/lib` and that's exactly the reason why the taglib URI couldn't be resolved.

To solve this you must remove the wrong JAR file, download [jstl-1.2.jar](https://repo.maven.apache.org/maven2/javax/servlet/jstl/1.2/jstl-1.2.jar) and drop it in its entirety in `/WEB-INF/lib`. That's all. You do not need to extract it nor to fiddle in project's *Build Path*.

Don't forget to remove that loose `c.tld` file too. It absolutely doesn't belong there. This is indeed instructed in some poor tutorials or answers elsewhere in the Internet. This is a myth caused by a major misunderstanding and misconfiguration. There is never a need to have a loose JSTL TLD file in the classpath, also not in previous JSTL versions.

In case you're using Maven, use the below coordinate:

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

You should also make sure that your `web.xml` is declared conform *at least* Servlet 2.4 and thus not as Servlet 2.3 or older. Otherwise EL expressions inside JSTL tags would in turn fail to work. Pick the highest version matching your target container and make sure that you don't have a `<!DOCTYPE>` anywhere in your `web.xml`. Here's a Servlet 3.0 (Tomcat 7) compatible example:

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    version="3.0">

    <!-- Config here. -->

</web-app> 
```

###See also:

*   [Our JSTL wiki page](https://stackoverflow.com/tags/jstl/info) (you can reach there by hovering the mouse on [jstl](/questions/tagged/jstl "show questions tagged 'jstl'") and clicking *info* link)
*   [How to install JSTL? The absolute uri: http://java.sun.com/jstl/core cannot be resolved](https://stackoverflow.com/questions/4928271/how-to-install-jstl-the-absolute-uri-http-java-sun-com-jstl-core-cannot-be-r/)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2017-04-18T19:05:57.437

我有同样的问题，尽管有 jstl

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

我还必须添加“标准”：

```
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
</dependency> 
```

此外，如上一篇文章所述：

*   对于 1.0 版，请使用：http: [//java.sun.com/jstl/core](http://java.sun.com/jstl/core)
*   对于 1.1（及更高版本）使用：http: [//java.sun.com/jsp/jstl/core](http://java.sun.com/jsp/jstl/core)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-08T09:13:46.060

URI 取决于您使用的 JSTL 版本。对于 1.0 版，请使用：

```
http://java.sun.com/jstl/core 
```

对于 1.1（及更高版本），您需要使用：

```
http://java.sun.com/jsp/jstl/core 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-12-10T13:52:29.650

如果你使用 maven，你的 pom 的`<dependencies>`标签应该是这样的：

```
<dependencies>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp.jstl</groupId>
        <artifactId>javax.servlet.jsp.jstl-api</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>
</dependencies> 
```

这个对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-06-06T05:09:55.617

下载 jstl-1.2.jar 而不是 jstl.jar 可以解决问题

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-23T19:07:29.257

要解决 jsp 中的问题，我们必须在 pom 文件中使用以下依赖项。如果您不使用 maven，请下载依赖 jar 并将其添加到您的 WEB-INF 目录。

```
<dependency>
    <groupId>jstl</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>taglibs</groupId>
    <artifactId>standard</artifactId>
    <version>1.1.2</version>
    <scope>compile</scope>
</dependency> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-22T06:54:33.190

我发现有时即使有正确的依赖关系，Eclipse 仍然会引发错误。以下是我用来进行 Eclipse 更新的方法：

**方法一：复制粘贴jsp。**

[更深层的jsp发生错误](https://i.stack.imgur.com/U4F26.png)

我还发现一个奇怪的情况，当同一个jsp在我的目录更深时，找不到它的taglibs。但是，当它位于 /webapp/ 下时，它没有问题。

我试过maven clean、maven build、project clean，都不能解决问题。

我通过删除错误的jsp来解决它可以再次将正确的jsp从外部文件夹复制到内部文件夹。然后可以识别标签库。

[在外部文件夹中复制粘贴 jsp 后解决了 jsp 错误](https://i.stack.imgur.com/mxSlk.png)

因此，我认为这可能是 Eclipse 本身的错误。

我的依赖就像

```
 <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency> 
```

**方法2：更改jstl的版本并改回**

尝试更改 jstl 的版本，然后 maven clean 和 maven update，然后再改回版本和 maven clean。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-02-16T06:25:30.677

确保以下两个 jar 都存在于构建路径中：

1.  标准 1.1.2.jar
2.  jstl-api-1.2.jar

Maven依赖项是：

```
<dependency>
    <groupId>javax.servlet.jsp.jstl</groupId>
    <artifactId>jstl-api</artifactId>
    <version>$1.2</version>
</dependency>

<dependency>
   <groupId>taglibs</groupId>
   <artifactId>standard</artifactId>
   <version>1.1.2</version>
</dependency 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-06T15:35:34.643

这也有效：

```
<dependency>
    <scope>compile</scope>
    <groupId>javax.servlet.jsp.jstl</groupId>
    <artifactId>jstl-api</artifactId>
    <version>1.2</version>
</dependency>

<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

所以使用 jstl 1.2 而不是 standard.jar 和 jstl-api 1.2

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-08T09:50:12.197

您还需要在 web.xml 中进行配置。请参考下面的代码。

```
<taglib>
    <taglib-uri>http://java.sun.com/jsp/jstl/core</taglib-uri>
    <taglib-location>/WEB-INF/lib/c.tld</taglib-location>
</taglib> 
```

如果您仍然遇到任何问题，请告诉我。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-04T08:24:52.653

为了使它工作：

将**jstl**和**标准**jar 文件添加到您的库中。

希望能帮助到你.. ：）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-07-11T12:17:59.957

添加maven依赖：

```
<dependency>
  <groupId>jstl</groupId>
  <artifactId>jstl</artifactId>
  <version>1.2</version>
  <scope>compile</scope>
</dependency>
<dependency>
  <groupId>taglibs</groupId>
  <artifactId>standard</artifactId>
  <version>1.1.2</version>
  <scope>compile</scope>
</dependency> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-02-21T15:06:59.727

好吧，我已经阅读了这篇文章，似乎还不足以解决这个问题。

Tomcat 8 上基于 Spring 的应用程序将无法工作。

这是解决方案

**第 1 步**⇒ 在 pom.xml 中添加以下依赖项

```
<!-- JSTL Support -->

     <dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>javax.servlet-api</artifactId>
    <version>3.1.0</version>
</dependency>
<dependency>
    <groupId>javax.servlet.jsp</groupId>
    <artifactId>javax.servlet.jsp-api</artifactId>
    <version>2.3.1</version>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jstl</artifactId>
    <version>1.2</version>
</dependency> 
```

**步骤 2** ⇒ 在您的 JSP 页面中添加所有以下两条语句，确保您在 <%@ page %> 标记中使用 isELIgnored="false" 属性

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" isELIgnored="false" pageEncoding="ISO-8859-1"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%> 
```

**第 3 步**⇒ 删除您到目前为止在 web.xml 或其他任何地方所做的所有其他配置 :)

**第 4 步**⇒ 清理 Tomcat 并重新启动 Tomcat。

旁注 ⇒ 实际上，JSTL 仅适用于 Tomcat 8 上的 3.x Servlet 规范。

```
[http://www.kriblog.com/j2ee/jsp/jstl-with-spring-4-on-tomcat-8.html] 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-07-20T12:23:24.990

我收到了相同的错误消息（Eclipse Enterprise 2020-06，Tomcat 8.5，动态 Web 项目），即使我下载了 jst 库的 1.2.5 版（[此处](http://tomcat.apache.org/download-taglibs.cgi)），将其放入“WEB-INF/lib”文件夹并添加`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>`到 jsp 文件的最顶部。

改用1.2 版（[此处](https://repo1.maven.org/maven2/javax/servlet/jstl/1.2/jstl-1.2.jar)）修复它。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-01-04T15:06:31.623

这是处理 JSTL 时非常常见的错误。

**简单地解决这个错误** **： -**

1.  下载**jstl-1.1.2.jar**和**standard-1.1.2.jar**
2.  然后只需**将它们粘贴到**您的 Dynamic Web App 项目的 WEB-INF 下的 lib 文件夹中。

你会发现错误已经消失了！

希望这可以帮助。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-11-30T04:50:09.710

只需下载**javax.servlet.jsp.jstl.jar**并添加到您的构建路径，`WEB-INF/lib`如果您只是开发动态 Web 应用程序。

当您使用 maven 开发动态 Web 应用程序时，然后在 pom 文件中添加**javax.servlet.jsp.jstl依赖项。**

谢谢

尼尔马尔拉杰桑吉耶夫

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-04-09T00:16:19.900

什么对我有用（我在 Eclipse 2019 中使用 Java 8 和 Tomcat 9）：

**pom.xml**

```
 <!-- jstl -->
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp.jstl</groupId>
        <artifactId>javax.servlet.jsp.jstl-api</artifactId>
        <version>1.2.1</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency> 
```

**.jsp 文件**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html> 
```

# javascript - 如何使用 node.js 将 facebook 图像保存到我的 Web 服务器文件夹中并表达

> ID：13285830
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:10:34.027
> 
> 标签：javascript, facebook, node.js, facebook-graph-api, express

我需要将 Facebook 中用户相册中的图像保存到我的服务器文件夹中。我的服务器在 node.js 和 express 中运行。我尝试了 http.get 但它不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:27:24.333

首先，您将使用 facebook graph api 获取照片的来源。

然后你就可以使用任何你想要的库来下载这张照片。

我推荐你使用[request](https://github.com/voxpelli/node-request) lib，因为它可以处理 SSL 和重定向。

替代解决方案是替换`https://`为`http://`. 之后，您将能够使用`http.get`.

# javascript - 调整动态加载的 MediaElementjs 视频的大小

> ID：13285831
> 
> 赞同：4
> 
> 时间：2012-11-08T09:10:35.447
> 
> 标签：javascript, html, video, resize, mediaelement

所以我有一个视频，我用 jQuery 的 .load() 加载到页面中。这是您可以在“视频”部分看到问题的网站：http: [//guillaumep.com/](http://guillaumep.com/)。

这是我必须使用的视频标签：

```
<video><source src="URLTOVIDEO.mp4" type="video/mp4" /> 
```

这是在加载到 my 后立即生成视频 HTML 的代码`#contentFrame`：

```
$('video').wrap('<div class="videowrapper">')

.attr({ 'style': 'width: 100%; height: 100%;' })
.mediaelementplayer({ success: function (player) { 
    correctVideoSize($(player).parent(4).eq(0)); }
}); 
```

然后我有代码可以根据窗口的形状实际调整视频播放器的大小，以便视频始终以最大尺寸显示，而不会溢出窗口：

```
function correctVideoSize(videoContainer) {
    var videoContainerHeight = $(window).height() - 100;
    var videoContainerWidth = $(window).width() * 0.92;
    var videoContainerRatio = videoContainerWidth / videoContainerHeight;
    var videoRatio = videoContainer.width() / videoContainer.height();
    console.log('videoRatio : ' + videoRatio);
    console.log('videoContainerRatio : ' + videoContainerRatio);

    if (!isNaN(videoRatio) && videoContainerRatio < videoRatio)
    {
        videoContainer.height(videoContainerWidth / videoRatio).width(videoContainerWidth);
    }
    else if (!isNaN(videoRatio))
    {
        videoContainer.height(videoContainerHeight).width(videoContainerHeight * videoRatio);
    }

    return videoContainer;
} 
```

以这种方式调整图像大小绝对有效，如您所见： http: [//guillaumep.com](http://guillaumep.com)，但对于视频，我不明白我应该如何、何时、何地以及在何处调整大小。您可以在这里看到问题：http: [//guillaumep.com/2012/10/22/test-video/](http://guillaumep.com/2012/10/22/test-video/)。

我尝试了很多不同的东西，并让视频在 $(window).resize() 事件上正确调整大小，但我猜只是因为 MediaElementJs 已经挂钩到这个事件并做了一些魔术。

我真的迷路了，感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-21T21:50:14.113

我在这里有点晚了。在我的谷歌搜索结果中找到了这个，因为我遇到了和你一样的问题。事实上，窗口调整大小确实触发了媒体播放器调整大小的正确事件。如果您真的想要一个简单的解决方案，您可以像这样手动触发该事件：（jquery）

```
$(window).trigger('resize'); 
```

我将查看源代码，看看是否可以为我们找到更好的解决方案。目前，手动触发它可以解决您的问题。

编辑

显然，所有调整大小绑定都是这样的：

```
mediaelement.setPlayerSize();
mediaelement.setControlsSize(); 
```

那应该更直接地解决您的问题。祝你好运！

# mysql - dbi 将 undef 视为空，但查询会在 mysql 中产生结果

> ID：13285834
> 
> 赞同：3
> 
> 时间：2012-11-08T09:10:47.737
> 
> 标签：mysql, perl, dbi

我有一个只产生一行和一列的 mysql 查询，当以交互方式检查查询时，我可以看到结果，这就是我想要的。但是当我使用时， `$sth->fetchrow_hashref;` 我得到了 undef。有谁知道这里可能出了什么问题？我很感谢任何方向上的任何一点。y 会产生你的结果。

这是在执行后直接完成的：

```
sub _get_next_hashref
{
    my $self = shift;
    if($self->{sth} ne '') {
    if(my $hash_ref = $self->{sth}->fetchrow_hashref)
    {
        return $hash_ref;
    } else {
        $self->{sth} = '';
        return undef;
        }
    } else {
    return undef;
    }    
} 
```

一些附加信息：
执行的查询以 结尾`limit 1`，因此始终应该只有一行。出于某种原因，否则会导致更多行的数据内工作完美，但仅产生单行结果的数据内数据不起作用。

```
$sql = "select sort_order from forum.metatag_sort where metatag=? order by id desc limit 1";
$self->{sth} = $self->{dbh}->prepare($sql);
if($self->{sth}->execute(@args)) {
    return _get_next_hashref();
} 
```

@args 中只有元标记，一个 int。 返回大于 1 的答案的情况对我来说完美无缺，但是返回正好 1 的情况会失败
。 `select count(sort_order) from forum.metatag_sort where metatag=?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:34:06.027

您的`_get_next_hashref`-definition 看起来像某些类的方法，但您将其称为函数：

```
if($self->{sth}->execute(@args)) {
    return _get_next_hashref();
} 
```

所以它没有得到任何对象信息，除了 . 它不能返回任何东西`undef`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:55:10.437

您似乎忘记设置`$sql`SQL 字符串：

> ```
> "select sort_order from forum.metatag_sort where metatag=? order by id desc limit 1"
> $self->{sth} = $self->{dbh}->prepare($sql); 
> ```

你在使用`strict`和`warnings`吗？考虑一下：

```
"some code";
print "bar"; 
```

`use warnings`应该告诉你这一行：

> 在 scratch.pl 第 5318 行的 void 上下文中对常量（某些代码）的无用使用。

* * *

我冒昧地为您修改了代码。

*   正如@MoritzBunkus 所说，您无需与`$self->{sth}`任何东西进行比较。如果里面有语句句柄，那就是真的。如果不是，那就是假的。
*   `return`如果“then”块中`else`有 a，则不要将 a放入`return`块中。你不需要`else`. 只需将其放在 - 语句下方`if`即可。
*   `return`没有参数总是返回`undef`。请参阅[ProhibitExplicitReturnUndef](http://search.cpan.org/dist/Perl-Critic/lib/Perl/Critic/Policy/Subroutines/ProhibitExplicitReturnUndef.pm)。

这是我的做法：

```
sub _get_next_hashref {
  my ($self) = @_;
  if ($self->{sth}) {
    if(my $hash_ref = $self->{sth}->fetchrow_hashref) {
      return $hash_ref;
    }
    # this will only be called if there was no result, thus no else needed
    undef $self->{sth}; # set to undef (or = '') if you must
  }
  # see above
  return; # returns undef if no param is given
} 
```

# php - 在服务器类型 https 上运行 modx evolution 需要什么

> ID：13285840
> 
> 赞同：0
> 
> 时间：2012-11-08T09:11:17.940
> 
> 标签：php, https, modx, modx-evolution

我有一个 http 网站，客户希望它是 https。该站点在 MODX Evolution 1.0.6 上运行。

将该http站点作为https运行需要什么？我知道我需要一个证书，但是我是否需要将作为 http 的代码更改为 https 或者我可以将开关从 http 切换到 https 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:59:32.433

使用http检查你的链接模板 - 特别是那个基本的href标签，检查你所有的系统变量是否相同......然后检查你所有的javascripts等是否相同......最后你可能不得不使用mod rewrite来强制你所有的通过 https 的流量。这看起来可以解决问题：

```
http://stackoverflow.com/questions/3239739/need-to-redirect-all-traffic-to-https 
```

# html - 为什么我不能在 Firefox 中的下拉列表的文本中间对齐？

> ID：13285844
> 
> 赞同：0
> 
> 时间：2012-11-08T09:11:28.893
> 
> 标签：html, css

[代码](http://jsfiddle.net/8UA3J/1/)：

```
<select class="dropdown">
    <option value="1">Select</option>
    <option value="2">Value 1</option>
    <option value="2">Value 2</option>    
</select>

.dropdown
{
    padding:0 8px 0 8px;
    margin:0;
    border:0;
    background-color:#ffffff;
    height:26px;
    line-height:26px;
    font-size:13px;
    color:#000000;
    width:425px;
    border:1px solid #000000;
    vertical-align:middle;
} 
```

在 Firefox 上，文本没有在中间对齐。为什么？我该如何解决？(火狐16.0.2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:26:24.633

尝试这个：

```
 .dropdown{ background-color: #FFFFFF; border: 1px solid #000000; color: #000000; font-size: 13px; margin: 0; padding: 8px; vertical-align: middle; width: 425px; } 
```

* * *

# objective-c - UIActivityViewController - 邮件活动 - 如何设置电子邮件收件人和主题？

> ID：13285848
> 
> 赞同：5
> 
> 时间：2012-11-08T09:11:45.490
> 
> 标签：objective-c, ipad, email, ios6, uiactivityviewcontroller

> **可能重复：**
> [如何在 iOS 6 中为 UIActivityViewController 设置收件人？](https://stackoverflow.com/questions/12623260/how-do-i-set-recipients-for-uiactivityviewcontroller-in-ios-6)

使用时是否可以设置邮件的主题和/或电子邮件收件人`UIActivityViewController`？

我能够成功发送消息，但不知道如何设置主题或设置邮件收件人。

# perl - 在字符串中使用 @ 时哈希值不正确

> ID：13285849
> 
> 赞同：1
> 
> 时间：2012-11-08T09:11:53.103
> 
> 标签：perl, hash, hashcode

我正在尝试使用此代码生成哈希值

```
use Digest::SHA qw(sha1_hex); print sha1_hex("prady@prady.com") 
```

生成的值为

> 642732893b7d25cf6a47773fa1c4988fac2ff3ad

当我使用免费生成器检查哈希码时

[http://sha1-hash-online.waraxe.us/](http://sha1-hash-online.waraxe.us/)

我得到哈希码为

> e49ece87a60590483bb74c24e82f9d64d13d98c1

我通过从字符串中删除@符号执行了相同的测试，我从网站以及代码中获得了匹配值。两者都返回相同的哈希码

> 08e1698b5818d8fdf0f7b31132c3b44c49671644

由代码和网站生成的哪个是正确的？这是在字符串上使用 @ 符号时的已知行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:14:58.807

一直用`use strict; use warnings;`！

与您的说法相反，您`@`的字符串中没有。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-08T09:16:11.883

Using `@something` inside a double-quoted string is interpreted as an array name by Perl. You would have caught that mistake if you'd used `use warnings;` and `use strict;`. The solution is simple: escape the `@`, like this: `print sha1_hex("some\@where.org")`. Or use single-quoted strings.

# android - permanent BroadcastReceiver?

> ID：13285852
> 
> 赞同：3
> 
> 时间：2012-11-08T09:11:55.693
> 
> 标签：android, broadcastreceiver

I use a broadcastReceiver to trigger alarms in an app that has an alarm clock feature. The class is currently very simple

```
public class MyReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    Intent scheduledIntent = new Intent(context, AlarmUp.class);
    scheduledIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(scheduledIntent);

}} 
```

The problem is that it gets cancelled in the case of device reboot, so the alarm doesn't trigger. Is there any way to get the receiver to automatically continue after a reboot? Thx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T09:15:58.167

> Is there any way to get the receiver to automatically continue after a reboot?

Unfortunately no. The system destroys all pending intents when the phone is turned off.

To solve your problem, you should filter on the `android.intent.action.BOOT_COMPLETED` to have a `BroadcastReceiver` called on device boot up. Then you can re-schedule all the needed alarms.

Something like this in your manifest :

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<receiver
    android:name=".broadcasts.InitReceiver"
    android:exported="false" >
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
        <action android:name="android.intent.action.TIME_SET" />
        <action android:name="android.intent.action.TIMEZONE_CHANGED" />
    </intent-filter>
</receiver> 
```

You can notice that there is also `TIME_SET` and `TIMEZONE_CHANGED` as you probably want your alarms to work even is the user is traveling from a timezone to another.

And something like this for the broadcast.

```
public class YourBroadcastReceiverName extends BroadcastReceiver {

    private AlarmManagerFacade alarmManager;

    @Override
    public void onReceive(Context context, Intent intent) {

        // Retreive data related to alarms
        Cursor cursor = context.getContentResolver().query(Alarm.CONTENT_URI, null,
                Alarm.COLUMN_ACTIVE + " = ? ",
                new String[] { String.valueOf(1) }, "");

        if (cursor.moveToFirst()) {

            // Schedule all the active alarms.
            alarmManager = new AlarmManagerFacade(context);
            do {
                // TODO : Schedule alarm according to data in cursor.
            } while (cursor.moveToNext());
        }
        cursor.close();
    }
} 
```

( This code is coming from one of my app. Some object may not be available in the Android SDK. )

In order to be able to re schedule all the alarms, you need to **have them stored** somewhere.

You can write your own [ContentProvider](https://developer.android.com/reference/android/content/ContentProvider.html) for example.

*   It works well with other android components thanks to the [CursorAdapter](https://developer.android.com/reference/android/widget/CursorAdapter.html) widget.
*   It is not the easiest solution but it's the way to go if you want to follow android guidelines.

There may be other simpler alternative to store your alarms, like using [SharedPreferences](https://developer.android.com/reference/android/content/SharedPreferences.html).

*   It's easy to use.
*   But you will need to hack around to store multiple alarms in a friendly manner.

One last alternative is that you can create an object containing the information, serialize it and store it as a file on the SD Card.

*   It's ugly and not flexible.
*   But it not that hard to implement ...

If you want to have a closer look to the different storage options you can read about it in the docs here : [http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

I hope all this help you. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:16:28.700

Edit your manifest file,

```
<receiver android:name=".RecieverName" 
             android:enabled="true" 
             android:exported="false">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED"/>
            </intent-filter>
        </receiver> 
```

It will automatically start on device reboot.

also declare the permission for it,

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

# google-chrome - 在 chrome 浏览器中从火线视频摄像头捕获图像

> ID：13285853
> 
> 赞同：2
> 
> 时间：2012-11-08T09:11:59.983
> 
> 标签：google-chrome, camera, webrtc, firewire

我可以在谷歌 chrome 浏览器上使用 MediaStream api 从连接到火线端口的摄像头捕获源视频吗？或者仅适用于连接在 USB 上的相机？

# mysql - MYSQL：左外连接sql需要很长时间

> ID：13285854
> 
> 赞同：2
> 
> 时间：2012-11-08T09:12:00.707
> 
> 标签：mysql, sql, optimization

我有这个查询，执行时需要很长时间

```
SELECT DISTINCT ticket.`id`, 
                `sender`, 
                `text`, 
                `receivedtime`, 
                `priorityid`, 
                `cityid`, 
                `categoryid`, 
                `statusid`, 
                `activeuserid`, 
                `note`, 
                `operationid`, 
                '' AS SMSHistory, 
                '' AS replySMS, 
                '' AS ticketHistory 
FROM   `ticket` 
       LEFT OUTER JOIN tickethistory 
                    ON tickethistory.ticketid = ticket.id 
       LEFT OUTER JOIN users 
                    ON tickethistory.uid = users.uid 
ORDER  BY ticket.`id` DESC 
LIMIT  0, 50 
```

这是表结构：

## 票：

```
CREATE TABLE   `ticket` (
    `id` int(10) NOT NULL AUTO_INCREMENT,
    `sender` varchar(50) NOT NULL,
    `text` text NOT NULL,
    `receivedTime` datetime NOT NULL,
    `priorityId` int(10) NOT NULL,
    `cityId` int(10) NOT NULL,
    `categoryId` int(10) NOT NULL,
    `statusId` int(10) NOT NULL,
    `activeUserId` int(11) NOT NULL,
    `note` text NOT NULL,
    `operationId` int(10) NOT NULL,
    `gateway` varchar(80) NOT NULL,
    KEY `Index 1` (`id`),
    KEY `sender` (`sender`),
    KEY `priorityId` (`priorityId`),
    KEY `cityId` (`cityId`),
    KEY `categoryId` (`categoryId`),
    KEY `statusId` (`statusId`)
  ) ENGINE=MyISAM DEFAULT CHARSET=utf8;

  ---- 
```

## 票务历史：

```
 CREATE TABLE   `tickethistory` (
    `id` int(10) NOT NULL AUTO_INCREMENT,
    `ticketId` int(10) NOT NULL,
    `uid` int(11) NOT NULL,
    `actionId` int(10) NOT NULL,
    `time` datetime NOT NULL,
    `param1` text NOT NULL,
    `param2` text NOT NULL,
    `param3` text NOT NULL,
    KEY `Index 1` (`id`),
    KEY `ticketId` (`ticketId`),
    KEY `uid` (`uid`)
  ) ENGINE=MyISAM DEFAULT CHARSET=utf8;

  ---- 
```

用户：

```
CREATE TABLE IF NOT EXISTS `users` (
  `Uid` int(11) NOT NULL AUTO_INCREMENT,
  `UserName` varchar(255) NOT NULL,
  `Upassword` varchar(32) NOT NULL,
  `UName` text NOT NULL,
  `Ucountry` text NOT NULL,
  `Umobile` varchar(255) NOT NULL,
  `UregisterDate` date NOT NULL DEFAULT '0000-00-00',
  `Ugroup` char(1) NOT NULL DEFAULT 'U',
  `Usender` varchar(11) NOT NULL DEFAULT 'SMS',
  `Ucredits` decimal(11,2) NOT NULL DEFAULT '0.00',
  `Uemail` varchar(255) NOT NULL,
  `CreditUpdatedDate` date DEFAULT NULL,
  `USMSC` varchar(30) NOT NULL,
  `repeatedDuration` int(10) DEFAULT '0',
  `langid` varchar(10) DEFAULT 'Ar',
  `parentId` int(11) NOT NULL DEFAULT '0',
  `Usess` varchar(255) NOT NULL DEFAULT '0',
  PRIMARY KEY (`Uid`),
  UNIQUE KEY `UserName` (`UserName`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8; 
```

* * *

这是解释命令的结果：

```
 'id';'select_type';'table';'type';'possible_keys';'key';'key_len';'ref';'rows';'Extra'
  '1';'SIMPLE';'ticket';'ALL';'';'';'';'';'348580';'Using temporary; Using filesort'
  '1';'SIMPLE';'tickethistory';'ref';'ticketId';'ticketId';'4';'ticket.id';'2';'Distinct'
  '1';'SIMPLE';'users';'eq_ref';'PRIMARY';'PRIMARY';'4';'tickethistory.uid';'1';'Using index; Distinct' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:36:11.517

EXPLAIN 建议它使用临时表和文件排序来对 TICKET 表中的记录进行排序。这有点奇怪，因为您正在排序的 ID 上有一个索引，但鉴于它匹配 350K 记录，这可能就是它慢的原因。

当您尝试查找最新记录时，请尝试包含限制性“where”子句，例如将搜索限制在上周（不要忘记在 receivedTime 上创建索引）。

您可能还考虑没有从 ticketHistory 到 User 的外部连接 - UID 列不是 NULL，因此不应该有没有匹配用户的记录。

# magento - Magento 1.7.0.2 按多个类别过滤 - SQL 错误

> ID：13285855
> 
> 赞同：2
> 
> 时间：2012-11-08T09:12:01.720
> 
> 标签：magento, magento-1.7

参考 Magento [1.7 按多个类别过滤产品](https://stackoverflow.com/questions/12498556/magento-1-7-filter-products-by-multiple-categories) 我有一个新问题：

我正在使用 Magento 1.7.0.2，并且所描述的按多个类别（通过 AND）过滤产品集合的解决方案对我不起作用。

我的分类结构：

*   根
    *   猫 1
        *   猫 1a
        *   猫 1b
    *   猫 2
        *   猫 2a
        *   猫 2b
    *   猫 3

例如，产品可以同时在 cat 1a、cat 2 和 cat 2b 中。如果我过滤，它应该被列出：

*   在猫 1a 之后
*   在猫 1a 和猫 2 之后
*   在猫 1a 和 2b 和 2 之后

如果我过滤，它一定**不**可见：

*   在猫 3 之后
*   在猫 1 和猫 1a 之后
*   在猫 1a 和 2a 之后

我的代码：

```
$_productCollection = Mage::getModel('catalog/product')
        ->getCollection()
        ->joinField('category_id', 'catalog/category_product', 'category_id', 'product_id = entity_id', null, 'left')
        ->addAttributeToSelect('*')
        ->addAttributeToFilter('category_id',
            array("finset" => array(53, 46))
        ); 
```

这给了我一个 SQL 错误：

```
#1582 - Incorrect parameter count in the call to native function 'FIND_IN_SET'
SELECT `e`.*, `at_category_id`.`category_id` FROM `catalog_product_entity` AS `e`
LEFT JOIN `catalog_category_product` AS `at_category_id` ON (at_category_id.`product_id`=e.entity_id) WHERE (FIND_IN_SET(53, 46, at_category_id.category_id)) 
```

我要做什么才能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:49:34.317

几天后，我想出了实现目标的方法。神奇的词：自定义 SQL 查询。

这是一个 SQL 语句 (MySQL) 示例，用于一次按多个类别过滤所有 product_id。

```
SELECT a.product_id as entity_id
    FROM catalog_category_product a
    WHERE EXISTS (SELECT b.product_id
                  FROM catalog_category_product b
                  WHERE b.product_id = a.product_id and b.category_id = 53)
      AND EXISTS (SELECT b.product_id
                  FROM catalog_category_product b
                  WHERE b.product_id = a.product_id and b.category_id = 46)
      AND EXISTS (SELECT b.product_id
                  FROM catalog_category_product b
                  WHERE b.product_id = a.product_id and b.category_id = 39)
    GROUP BY a.product_id 
```

如果您愿意，您可以重复“并且存在......”直到世界末日；）这将过滤所有产品，同时在类别 53、46 和 39 中。

您可以在此处阅读有关 Magento 中自定义 SQL 命令的更多信息：http: [//magentotutorials.blogspot.de/2011/07/magento-code-to-run-custom-sql-query.html](http://magentotutorials.blogspot.de/2011/07/magento-code-to-run-custom-sql-query.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:24:24.033

您在通话中缺少一个数组：

```
->addAttributeToFilter('category_id', array(
     array('finset' => array(53, 46)),
 ) 
```

# matlab - Matlab - 使用字符串值索引数组

> ID：13285857
> 
> 赞同：12
> 
> 时间：2012-11-08T09:12:04.870
> 
> 标签：matlab

我有一个预定义的 20 个位置数组，对应于我身体的 20 个关节。关节标有字符串值（例如“left_knee”、“head”、“left_eye”等）。

我想通过使用附加的字符串值来引用数组中的某个值。例如，我想存储观察到的关节的位置。最初数组中的所有位置都是`(-1 , -1)`，然后如果我发现某个关节，我想做类似`Joints('left_knee') = [100 200]`.

我怎样才能在 Matlab 中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T09:29:24.800

s怎么样`struct`？

```
Joints.left_knee = [100 200];
Joints.head      = [-1 -100]; 
```

获取所有字段`fieldnames`，动态引用单个条目，如下所示：

```
someVar = 'left_eye';
Joints.(someVar) = [200 250]; 
```

等等如果你碰巧有多个关节，都需要相同类型的数据，但它们都属于同一个系统，你也可以制作多维结构：

```
Joints(1).left_knee = [100 200];
Joints(1).head      = [-1 -100];

Joints(2).left_knee = [200 450];
Joints(2).head      = [-10 -189];

Joints(3).left_knee = [-118 264];
Joints(3).head      = [+33  78]; 
```

只是为了向您展示一些在多 D 结构的上下文中有用的技术：

```
>> someVar = 'head';
>> Joints.(someVar)     % will be expanded cell-array, 1 entry for each dimension
ans =
    -1  -100
ans =
   -10  -189
ans =
    33    78
>> [Joints.(someVar)]   % will collect those data in regular array
ans =
    -1  -100   -10  -189    33    78
>> {Joints.(someVar)}   % will collect those data in cell array
ans = 
    [1x2 double]    [1x2 double]    [1x2 double]
>> [A,B,C] = deal(Joints.(someVar));  % will assign data to 3 separate vars
A =
    -1  -100
B =
   -10  -189
C =
    33    78 
```

键入`help struct`以获取更多信息并了解相关功能。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-08T09:46:46.390

您可以使用内置[映射容器](http://www.mathworks.com/help/matlab/map-containers.html)将值映射到唯一键。这是一个简单的例子：

```
valueSet = {[-1, 1], [2, 3], [1,5], [1,8]};
keySet = {'left_knee', 'right_knee', 'left_eye', 'right_eye'};
Joints = containers.Map(keySet,valueSet);
Joints('left_knee')

ans =
    -1     1 
```

您可以按如下方式获取地图对象的值/键：

```
values(Joints)

ans = 
    [1x2 double]    [1x2 double]    [1x2 double]    [1x2 double]

keys(Joints)

ans = 
    'left_eye'    'left_knee'    'right_eye'    'right_knee' 
```

有关更多“示例和操作方法”，请参阅[文档](http://www.mathworks.com/help/matlab/map-containers.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-08T09:43:54.183

要扩展@RodyOldenhuis 解决方案，您还可以将索引存储在结构数组中，并为数据使用普通矩阵。这样，您仍然可以将普通矩阵运算应用于所有矢量数据：

```
idx.left_knee  = 1;
idx.right_knee = idx.left_knee + 1;
idx.left_elbow = idx.right_knee+ 1;
idx.right_elbow= idx.left_elbow+ 1;

joint_pos = rand(4,8);
t = linspace(0,1,8);
joint_vel = diff(joint_pos,2)./diff(t);

joint_vel(idx.right_knee,:) 
```

在我的示例中，我为 8 个时间点的 4 个关节的位置和速度建立了一个数据结构，以说明我的技术。

在使用多维数据集时，我发现这更容易使用。当然，这取决于您的应用程序，例如，如果您只想存储常量，@RodyOldenhuis 的解决方案显然要简单得多。

# php - Php - rowspan 在同一行显示数据库中的所有记录

> ID：13285861
> 
> 赞同：1
> 
> 时间：2012-11-08T09:12:20.573
> 
> 标签：php, sql, html-table

我的 rowspan 有问题，它将数据库中的所有数据打印到一行中！即使ID不同的那个！输出应该是课程名称和参加该课程的所有学生，把我的代码只取数据库中的第一个课程名称并将其与数据库中的所有学生姓名一起打印出来！

我的代码是

```
 <h2> List of course Name with students names</h2>

<?php

        include('../connect.php');
        $id=$_SESSION['login_user'];

        $sql = "SELECT C.CourseName ,GROUP_CONCAT(s.Studntname) AS Studntname
                FROM course AS c
                INNER JOIN student AS s
                ON s.CourseID = c.CourseID"; 

        $result = mysql_query ($sql, $connection); 

          echo "<center>";

        echo "<table>";
        echo "<tr> <th>Course Name</th> <th> Student Name</th>  </tr>";

        // loop through results of database query, displaying them in the table
        while($row = mysql_fetch_array( $result )) {
                // echo out the contents of each row into a table
               echo "<tr>";

                echo '<td>' . $row['CourseName'] . '</td>';
                echo "<td rowspan='' >" .$row['Studentname'] . "</td>";

                echo "</tr>";

        }
        echo "</table>"; 
         echo "</center>";

?> 
```

我的两张表是：

**课程**

```
CourseName var(30)
CourseID   int(7) 
```

**学生**

```
Studentname var(30)
StudentID   int(7) 
CourseID    int(7) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T11:01:16.867

问题在于您的查询。您没有使用`GROUP BY`，它需要指定聚合数据*分组的*列（因此得名）。

```
 $sql = "SELECT C.CourseName ,GROUP_CONCAT(s.Studntname) AS Studntname
            FROM course AS c
            INNER JOIN student AS s ON s.CourseID = c.CourseID
            GROUP BY C.CourseName "; 
```

当然，如果您需要列出没有人上过的课程，您必须使用`LEFT JOIN`而不是`INNER JOIN`：

```
 $sql = "SELECT C.CourseName ,GROUP_CONCAT(s.Studntname) AS Studntname
            FROM course AS c
            LEFT JOIN student AS s ON s.CourseID = c.CourseID
            GROUP BY C.CourseName "; 
```

至于`rowspan=''`部分 - 我不明白这一点。没有意义。任何一个

*   不要放在那里，使用普通的`<td>`
*   如果您需要单元格*跨越多行*，请使用正确的值，例如`<td rowspan="2">`

# php - Google 搜索中的 AND/OR 运算符优先级

> ID：13285866
> 
> 赞同：1
> 
> 时间：2012-11-08T09:12:32.033
> 
> 标签：php, operators

我需要使用他们的 SiteSearch API 进行高级 Google 搜索。我目前正在使用通过 curl 发送到我的搜索引擎的以下格式的字符串：

```
$search_url = "http://www.google.com/search?start=0&num=20&as_qdr=" . $as_qdr . "&q=" . $q . "&sort=date&client=google-csbe&output=xml_no_dtd&cx=" . $cx; 
```

问题是我的查询需要采用以下形式：

（“我的句子”和“约翰·多伊”）或“迈克·泰森”

不幸的是，我在 Google 文档中找不到任何东西来替换通常的 sql 括号。我曾尝试使用括号本身，但尽管大多数结果看起来准确，但有些结果与查询并不真正匹配。例如，它们包含“MY SENTENCE”和“MIKE TYSON”，但不包含 JOHN DOE。

甚至可以在 Google 中进行如此复杂的查询吗？

**编辑：** 我只是忘了提到我直接在 google.com 上尝试了括号（不使用 API），以进行测试。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T11:05:24.757

根据*不*隶属于 Google的[Google Guide](http://www.googleguide.com)网站，您可以混合使用运算符（或者）和双引号作为组化合物，以实现您想要的，这一切都在[本文](http://www.googleguide.com/or_operator.html)中进行了描述。 此外，整个[Crafting Your Query](http://www.googleguide.com/crafting_queries.html)文章也很有趣，可以了解如何在使用搜索时充分利用 Google 的可能性。*`OR``|``"`* 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-17T15:09:24.717

您不能在 Google 上强制执行以下操作顺序：( *"MY SENTENCE" AND "JOHN DOE") OR "MIKE TYSON"。* Google 没有 AND 运算符。或者永远是第一位的；括号无所谓。*

# sbt - 如何设置“解析器”以自动获取最新的 ScalaTest？

> ID：13285867
> 
> 赞同：1
> 
> 时间：2012-11-08T09:12:32.757
> 
> 标签：sbt, scalatest

我正在运行 Scala 2.9.2 和 ScalaTest 2.0M4。我有 ScalaTest jar 的本地副本，现在想从 repo 中自动获取它。

[Scalatest 网站](http://www.scalatest.org/download#20m4)对此进行了说明：

```
..is available [at] the Sonatype OSS Maven repository (which is mirrored on the central Maven repository as well):

group id: org.scalatest
artifact id: scalatest_2.9.0 (for Scala 2.9.0+)
version: 2.0.M4
Or via sbt (version 0.10 or higher) with:

libraryDependencies += "org.scalatest" %% "scalatest" % "2.0.M4" % "test" 
```

现在，我必须在我的“project/plugins.sbt”中添加什么“解析器”才能达到这个目的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:53:01.007

让它与这个一起工作：

在`project/plugins.sbt`：

```
resolvers += "SonaType" at "https://oss.sonatype.org/content/groups/public" 
```

在`build.sbt`：

```
libraryDependencies += "org.scalatest" %% "scalatest" % "latest.integration" % "test" 
```

我没有得到的是在“libraryDependencies”之后添加“in Test”不起作用，但会给出：

```
object scalatest is not a member of package org 
```

好吧，我把它留在这里。如果有人知道为什么“测试中”在这里不受欢迎，请留言。谢谢。

# iphone - 关闭 UIViewController 并在另一个类中更改 ui

> ID：13285872
> 
> 赞同：0
> 
> 时间：2012-11-08T09:12:44.240
> 
> 标签：iphone, ios, xcode, cocoa, uiviewcontroller

在我的应用程序中，我有 2 类`UIViewController`. 这`FirstViewController`是一个具有此方法的视图，它将一个 uitableview 添加到控制器的视图中：

```
 -(IBAction)SetTabState:(id)sender{
    if (sender == History) {
            [self.view  addSubview:HistoryView];
    }
} 
```

现在，在`SecondViewController`课堂上，我有 2 个选项可以返回。导航返回的第一个选项就是返回，效果很好：

```
[self dismissModalViewControllerAnimated:YES]; 
```

第二个选项导航回来并从SeconedViewController调出视图历史所以我正在尝试这样的事情：

```
[self dismissModalViewControllerAnimated:YES];
FirstViewController *Vc = [[FirstViewController alloc]init];
[Vc SetTabState:Vc.History]; 
```

事实是，从类中触发方法`UIViewController`是我从未理解过的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:24:36.817

您需要在关闭模式之前传递信息。像这样的东西：

```
SecondViewController.m:
- (IBAction) secondButtonTouched:(UIButton)button {
  FirstViewController *fVC = (FirstViewController *)self.presentingViewController;
  [fVC SetTabState:History];
  [fVC dismissModalViewControllerAnimated:YES];
} 
```

您需要获取对现有的引用`FirstViewController`，而不是创建新的引用。

注意：您应该为 SecondVC 传递一个弱引用（或委托/协议）以具有对 FirstVC 的引用，而不是假设`presentingViewController`是 type `FirstViewController`。我这样做是为了简化我的代码。

# java - proguard 可以安全地降级 Java 类吗？

> ID：13285873
> 
> 赞同：0
> 
> 时间：2012-11-08T09:12:51.323
> 
> 标签：java, proguard, java1.4

proguard 是否能够安全*将类文件从 Java 6 降级到 Java 1.4，还是我还需要运行[Retroweaver](http://retroweaver.sourceforge.net/)？

我希望能够使用 Java 6 的一些编译时特性，例如泛型和注释，但不幸的是我需要让我的应用程序在 Java 1.4.2 上运行。proguard 可以通过使用标志来做到这一点`-target 1.4`吗？

*安全地，我的意思是它预先验证它们并检查它们将在 1.4 上运行，因此我不必在每次进行更改时都在该版本上测试我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:32:31.920

ProGuard 的`-target`选项只是设置类文件中的版本号。它不会修改或检查实际代码以确保其兼容。最有用的应用程序是将类文件升级到 Java 1.6 ( `-target 1.6`)，在这种情况下，ProGuard 的预验证步骤添加了所需的预验证属性（仍然不更改实际代码）。所以是的，你需要另一个工具，比如 Retroweaver 来降级到 Java 1.4。

# c# - Asp.Net 身份验证（自动注销）

> ID：13285874
> 
> 赞同：1
> 
> 时间：2012-11-08T09:12:58.590
> 
> 标签：c#, asp.net, asp.net-mvc-3

在我的应用程序中，我使用了 Asp.Net 表单身份验证，

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
                    1,
                    adminResult.UserName,
                    DateTime.Now,
                    DateTime.Now.AddDays(2),
                    true,
                    "Administrator",
                    FormsAuthentication.FormsCookiePath
                    );
                string hash = FormsAuthentication.Encrypt(ticket);
                HttpCookie coockie = new HttpCookie(FormsAuthentication.FormsCookieName, hash);
                if (ticket.IsPersistent)
                {
                    coockie.Expires = ticket.Expiration;
                }
                Response.Cookies.Add(coockie);
                if (Url.IsLocalUrl(returnUrl))
                {
                    return Redirect(returnUrl);
                }
                else
                {
                    return RedirectToAction("Dashboard", "Cockpit");
                } 
```

但它会在 10 到 15 秒内自动注销。

解决方案是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:18:51.213

可能是因为垃圾收集器清除并重新分配了机器密钥给您的应用程序。[生成机器密钥](http://aspnetresources.com/tools/machineKey)并将其放在 web.config 中

```
<system.web>
    <machineKey validationKey="###YOUR KEY HERE ###"
                decryptionKey="## decrypt key here ##" 
                validation="SHA1" decryption="AES" /> 
```

MachineKey 用于 ViewState 加密和验证，并`FormAuthentication`使用此密钥签署身份验证票，如果您未在其中指定`web.config`它会自动分配，但如果您自己指定它，收集器将不会清除它... [这里](http://msdn.microsoft.com/en-us/library/ms998288.aspx#paght000007_machinekeyexplained)是一篇信息性文章它可以帮助您更好地了解 MachineKey 的重要性/工作原理

# oracle - 创建历史触发器

> ID：13285876
> 
> 赞同：2
> 
> 时间：2012-11-08T09:13:09.870
> 
> 标签：oracle, triggers, history

我正在尝试编写历史触发器，但无法使其正常工作。

这是代码：

```
create or replace
TRIGGER abc BEFORE
    UPDATE ON abc REFERENCING OLD AS oldValue NEW AS newValue
    FOR EACH ROW 
    BEGIN
        INSERT
    INTO history
        (
            id,
            record_id,
            col_name,
            old_val,
            new_val
        )
        VALUES
        (
            MF_SEQ_HISTORY.nextval,
            :oldvalue.id,
            :oldvalue.column_name,
            :oldvalue.object_value,
            :newvalue.object_value
        );
        END; 
```

如您所见，我正在尝试保存已更新的列名、值和新值。

我得到的错误是：

```
Error(19,13): PLS-00049: bad bind variable 'OLDVALUE.COLUMN_NAME'
Error(20,13): PLS-00049: bad bind variable 'OLDVALUE.OBJECT_VALUE'
Error(21,13): PLS-00049: bad bind variable 'NEWVALUE.OBJECT_VALUE' 
```

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:59:07.277

也许最好使用提供的功能来启用 Oracle 数据库中的表的版本。看一下工作区管理器：DBMS_WM.EnableVersioning。

[http://www.oracle-base.com/articles/9i/workspace-management-9i.php](http://www.oracle-base.com/articles/9i/workspace-management-9i.php)

```
exec dbms_wm.enableversioning('LANDEN','view_wo_overwrite');

insert into landen values (1,'Nederland','The Netherlands','Nederland','NL','NL','NL',sysdate);
update landen set naamnl = 'Holland' where pk = 1;

select pk,naamnl from landen;

1   Holland

select pk,naamnl,retiretime from landen_lt;

1   Nederland   08-11-2012 11:01:14,466296000 +01:00
1   Holland 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:55:08.097

希望这是您正在寻找的东西：- [http://birijan.com.np/?q=oracle+trigger+-+column+level+auditing](http://birijan.com.np/?q=oracle%20trigger%20-%20column%20level%20auditing)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:22:19.533

您提供的代码没有任何问题。有用。但是表 ABC 是否有名为 column_name 和 object_value 的列？如果是这样，请给出 sqlplus 的输出`DESC ABC`

```
SQL> create table abc (id number, column_name varchar2(30), object_value varchar2(30));

Table created.

SQL> create table history (id number, record_id number, col_name varchar2(30), old_val varchar2(30), new_val varchar2(30));

Table created.

SQL> create sequence mf_seq_history start with 1;

Sequence created.

SQL> create or replace
  2  TRIGGER abc BEFORE
  3      UPDATE ON abc REFERENCING OLD AS oldValue NEW AS newValue
  4      FOR EACH ROW
  5      BEGIN
  6          INSERT
  7      INTO history
  8          (
  9              id,
 10              record_id,
 11              col_name,
 12              old_val,
 13              new_val
 14          )
 15          VALUES
 16          (
 17              MF_SEQ_HISTORY.nextval,
 18              :oldvalue.id,
 19              :oldvalue.column_name,
 20              :oldvalue.object_value,
 21              :newvalue.object_value
 22          );
 23          END;
 24  /

Trigger created.

SQL> insert into abc values (1, 'COL', 'TEST');

1 row created.

SQL> insert into abc values (1, 'COL2', 'TEST2');

1 row created.

SQL> update abc set object_value ='a';

2 rows updated.

SQL> select * from history;

        ID  RECORD_ID COL_NAME
---------- ---------- ------------------------------
OLD_VAL                        NEW_VAL
------------------------------ ------------------------------
         1          1 COL
TEST                           a

         2          1 COL2
TEST2                          a

SQL> 
```

# javascript - HTML 内容可编辑 div：选择文本事件

> ID：13285877
> 
> 赞同：10
> 
> 时间：2012-11-08T09:13:15.370
> 
> 标签：javascript, jquery, html, jquery-events

我有一个可内容编辑的**div**

`<div class="editable" contenteditable="true"></div>`

用户可以在其中输入任何内容。当用户在 div 中进行选择时，有什么方法可以获取事件。

就像是：

```
$('.editable').onSelection(function(e, selection){alert(selection);} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T10:14:54.470

你可以尝试这样的事情：

没有 'selectend' 事件，但我们可以通过观察 mouseup 事件来确定用户完成选择的时间

```
$(function () {
    $('.editable').on('selectstart', function () {
        $(document).one('mouseup', function() {
            alert(this.getSelection());
        });
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-09T18:42:01.220

在@Elliot 的回答和@Michael Bates 的评论之后，这似乎对于鼠标和键盘选择事件都完美无缺（例如在 TypeScript 中）：

```
export function attachSelectionListener(element: HTMLElement) : void {
  if (!element.contentEditable) {
    return;
  }
  element.onselectstart = () => handleSelectionChange(element);
}

function handleSelectionChange(element: HTMLElement): void {
  document.onmouseup = () => retrieveSelection(element);
  document.onkeyup = () => retrieveSelection(element);
}

function retrieveSelection(element: HTMLElement) : void {
  const selection = document.getSelection();

  // Ignore empty selection
  if (!selection || !selection.toString()) {
    return;
  }
  alert(selection.toString());
} 
```

在您的应用程序中使用它时，您可能想检查是否需要在某个时候再次删除侦听器。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-08T10:05:07.547

```
$('#ta').select(function() {
alert('Handler for .select() called.');
}); 
```

.select( handler(eventObject) ) 返回： jQuery 将事件处理程序绑定到“select” JavaScript 事件，或在元素上触发该事件。

.select( handler(eventObject) ) handler(eventObject)每次触发事件时执行的函数。

.select( [eventData], handler(eventObject) ) eventData 将传递给事件处理程序的数据映射。handler(eventObject) 每次触发事件时执行的函数。

检查[链接](http://api.jquery.com/select/)

# ruby - 如何避免接收到的 JSON 数据中的转义引号用作 Ruby 哈希？

> ID：13285878
> 
> 赞同：0
> 
> 时间：2012-11-08T09:13:16.827
> 
> 标签：ruby, json, sinatra

我正在 Ruby/Sinatra 中构建一个出版物，它使用 JSON 中的两个参数（“local_delivery_time”和“tubelines”）响应 GET 调用（来自我无法控制的 API 服务器）。目前一个示例调用是；

[http://my.herokuapp.com/edition/?local_delivery_time=0012-11-02T21:00:00+00:00&tubelines=%7B%22Bakerloo%22=%3E%220%22,%20%22Central%22= %3E%220%22,%20%22Circle%22=%3E%220%22,%20%22District%22=%3E%220%22,%20%22DLR%22=%3E%220%22,% 20%22Hammersmith%20and%20City%22=%3E%220%22,%20%22Jubilee%22=%3E%220%22,%20%22Metropolitan%22=%3E%221%22,%20%22Northern% 22=%3E%220%22,%20%22地上%22=%3E%221%22,%20%22皮卡迪利%22=%3E%220%22,%20%22维多利亚%22=%3E%220%22 ,%20%22滑铁卢%20和%20城市%22=%3E%220%22%7D](http://my.herokuapp.com/edition/?local_delivery_time=0012-11-02T21:00:00+00:00&tubelines=%7B%22Bakerloo%22=%3E%220%22,%20%22Central%22=%3E%220%22,%20%22Circle%22=%3E%220%22,%20%22District%22=%3E%220%22,%20%22DLR%22=%3E%220%22,%20%22Hammersmith%20and%20City%22=%3E%220%22,%20%22Jubilee%22=%3E%220%22,%20%22Metropolitan%22=%3E%221%22,%20%22Northern%22=%3E%220%22,%20%22Overground%22=%3E%221%22,%20%22Piccadilly%22=%3E%220%22,%20%22Victoria%22=%3E%220%22,%20%22Waterloo%20and%20City%22=%3E%220%22%7D)

因此，一旦它从 uri 未编码，“tubelines”参数就会作为 Ruby 哈希（我相信？），即

{"Bakerloo"=>"0", "Central"=>"0", "Circle"=>"0", "District"=>"0", "DLR"=>"0", "Hammersmith and City "=>"0", "Jubilee"=>"0", "Metropolitan"=>"1", "Northern"=>"0", "Overground"=>"1", "Piccadilly"=>"0 ", "维多利亚"=>"0", "滑铁卢和城市"=>"0"}

但是当我尝试在它上面运行这个 .each 代码时（将值为“1”的键推送到另一个数组）；

```
tubelines.each do |key, value|
    if value == "1"
        @selectedlines.push(key)
    end
end 
```

我收到此错误“NoMethodError - # 的未定义方法‘每个’”，它显示带有转义引号的散列。像这样;

{\"Bakerloo\"=>\"0\", \"中央\"=>\"0\", \"Circle\"=>\"0\", \"区\"=>\"0 \", \"DLR\"=>\"0\", \"Hammersmith and City\"=>\"0\", \"Jubilee\"=>\"0\", \"Metropolitan\"= >\"1\", \"北方\"=>\"0\", \"地上\"=>\"1\", \"皮卡迪利\"=>\"0\", \"维多利亚\ "=>\"0\", \"滑铁卢和城市\"=>\"0\"}

我无法更改调用的格式，那么如何处理转义引号以便使用哈希？我尝试通过 JSON 解析它，但解析器似乎对转义引号有同样的问题（它返回一个意外的令牌错误），当我手动输入完全相同的哈希时，代码运行良好。

我已经看到很多关于编码 JSON 对象和转义引号的问题，但没有发现任何关于在接收 JSON 对象或调用时处理转义引号的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T00:44:06.807

我同意 Frederick Cheung 的意见，这是一种发送数据的混乱方式。让他们用 POST 请求发送 JSON 怎么样？处理起来容易得多：

```
post "/edition", :provides => :json do
  data = JSON.parse params["data"]
  local_delivery_time = data["local_delivery_time"]
  tubelines = data["tubelines"]
  # do something here...
end 
```

他们只是向那里发送 POST 请求，将“数据：”键中的所有数据。

也有可能与 GET 一起使用，但主要的事情是不要在 url 中发送疯狂的东西，因为它只会让你的生活变得艰难。我相信你会很高兴将它传递给运行服务器的人！:)

# android-activity - 未找到启动器活动

> ID：13285882
> 
> 赞同：0
> 
> 时间：2012-11-08T09:13:34.087
> 
> 标签：android-activity, android-manifest, adb

```
[2012-11-08 10:11:10 - BlueParking] Android Launch!
[2012-11-08 10:11:10 - BlueParking] adb is running normally.
[2012-11-08 10:11:10 - BlueParking] No Launcher activity found!
[2012-11-08 10:11:10 - BlueParking] The launch will only sync the application package on the device!
[2012-11-08 10:11:10 - BlueParking] Performing sync
[2012-11-08 10:11:10 - BlueParking] Automatic Target Mode: using device 'S5830bf8abc43'
[2012-11-08 10:11:10 - BlueParking] Uploading BlueParking.apk onto device 'S5830bf8abc43'
[2012-11-08 10:11:11 - BlueParking] Installing BlueParking.apk...
[2012-11-08 10:11:15 - BlueParking] Success!
[2012-11-08 10:11:15 - BlueParking] \BlueParking\bin\BlueParking.apk installed on device
[2012-11-08 10:11:15 - BlueParking] Done! 
```

当我想安装我的应用程序时，我得到了这个控制台输出。但是，这是我的 Android 清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.blueparking.manager"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-feature
        android:name="android.hardware.location"
        android:required="true" />
    <uses-feature
        android:name="android.hardware.location.gps"
        android:required="false" />

    <application
        android:name=".application.BlueParkingApplication"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.Light.NoTitleBar" >
        <activity
            android:name=".LoginActivity"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="androi.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MainActivity"
            android:screenOrientation="portrait" />

        <receiver
            android:name="com.littlefluffytoys.littlefluffylocationlibrary.StartupBroadcastReceiver"
            android:exported="true" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
        <receiver
            android:name="com.littlefluffytoys.littlefluffylocationlibrary.PassiveLocationChangedReceiver"
            android:exported="true" />
    </application>

</manifest> 
```

如您所见，LoginActivity 是 Launcher Activity。谁能告诉我这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:24:30.580

Manifest.xml 似乎没问题。

类的名称是 LoginActivity？扩展活动？您是否正确加载布局？

如果你把 LoginActivity 的代码放在这里，我们可以看到失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T10:01:22.340

您需要像这样在清单中指定启动器活动

```
<activity android:name=".MainActivity" android:label="@string/app_name">
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

看起来您已经这样做了，因此您可以尝试在 Android Studio 中的 Edit Configuration 中选择“Launch Options” - Default Activity。我也有这个问题。

[在这里](http://www.onactivityresult.com)查看有关 android 活动的更多信息

# sql - SQL：在我对我没有创建的帖子发表评论后返回来自其他用户的评论

> ID：13285885
> 
> 赞同：0
> 
> 时间：2012-11-08T09:13:51.677
> 
> 标签：sql, postgresql, subquery

对不起，荒谬的问题标题。我不知道如何概括它。

我需要在我的评论留在我没有创建的帖子上之后出现的评论列表。

我正在使用postgres。我的帖子表结构：

```
CREATE TABLE posts (
    id integer NOT NULL,
    parent_id integer DEFAULT (-1),
    msg character varying(140),
    user_id integer,
    create_dte numeric(10,0) DEFAULT 0
); 
```

只能有一级评论。原始帖子的`parent_id`值为-1。评论有`parent_id`一个原始帖子的`id`。

我可以对我没有创建的帖子发表评论：

```
select p1.id, p1.msg 
from   posts p1 
where  p1.user_id = MY_USER_ID 
and    p1.parent_id in (
    select p2.id 
    from   posts p2 
    where  p2.parent_id = -1 
    and    p2.user_id != MY_USER_ID) 
```

有人可以给我一个关于如何选择具有相同`parent_id` 和更大的帖子的提示`create_dte`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:36:52.950

```
select 
    posts.*
from 
    posts
        inner join
    (
        select parent_id, MAX(create_dte) lastpostdate
        from posts 
        where user_id=2
        group by parent_id
    ) lastpost
        on posts.parent_id = lastpost.parent_id
        and posts.create_dte>lastpost.lastpostdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T08:00:29.863

我使用上面@podiluska 的答案作为此解决方案的起点：

```
select
    posts.*
from
    posts
        inner join
        (
            (
                select h1.parent_id, min(h1.create_dte_timestamp) as min_date
                from posts h1
                where
                    h1.parent_id != -1 and
                    h1.user_id = USER_ID and
                    h1.parent_id not in
                    (
                        select h2.id
                        from posts h2
                        where h2.id = h1.parent_id and h2.user_id = USER_ID
                    )
                    group by h1.parent_id
            )
        ) lastpost
        on posts.parent_id = lastpost.parent_id

where
    posts.create_dte_timestamp > lastpost.min_date and
    posts.user_id != USER_ID 
```

# ruby-on-rails - 考拉响应时间。20秒等待响应

> ID：13285889
> 
> 赞同：2
> 
> 时间：2012-11-08T09:14:07.463
> 
> 标签：ruby-on-rails, ruby, facebook, facebook-graph-api, koala

我是新手，`Rubyonrails`我`Koala gem`确定我做错了什么。我一直在将我的代码调整为最小表达式，但问题仍然存在。然后我尝试在没有 koala gem 的情况下做同样的事情，但问题仍然存在。

这是代码：

```
require 'koala'
require 'open-uri'

puts Time.now

@graph = Koala::Facebook::API.new
resp = @graph.graph_call("cocacola", {}, "get", {})
puts resp

puts Time.now

coke_url = "https://graph.facebook.com/cocacola"
response = open coke_url
response = JSON.parse response.read
puts response.inspect

puts Time.now 
```

我必须等待 Facebook 的回复总是 21 秒。如果我将[https://graph.facebook.com/cocacola](https://graph.facebook.com/cocacola)放在我的浏览器上，响应是即时的¿不一样？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:55:35.327

我在我的应用程序中使用考拉，并没有这样的经验。唯一的区别是我不匿名使用它。相反，我创建了一个应用程序，并使用访问令牌来访问 Facebook API。这可能是根本原因，因为我发现[这篇文章](http://planet.infowars.com/uncategorized/why-facebook-is-slow-death-to-anonymous)似乎也相关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-09T18:01:19.490

最后，这是一个 DNS 问题（感谢 jpgeek）。

当我对任何网站进行 GET 请求时，响应是在 21 秒后，但使用同一网站的 IP，响应是瞬时的。

我在谷歌上找到了解决方案：http: [//www.mikeperham.com/2010/02/10/asynchronous-dns-resolution/](http://www.mikeperham.com/2010/02/10/asynchronous-dns-resolution/)

我在 Gemfile 中使用了这个个人解决方案（我不确定它是否是最好的）：

```
group :development do
    require 'resolv'
    require 'resolv-replace'
end 
```

现在它工作正常！

# php - 检索 URL 的扩展名

> ID：13285894
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:14:22.017
> 
> 标签：php

我想点击一个网址 -`http://www.blahblah.com/on/demand`

每次点击后，上述 URL 都会生成一个扩展名。

IE`http://www.blahblah.com/on/demand/C1212`

所以，我想做的是获取生成的扩展名（C1212）我不知道我该怎么做？有谁知道我怎么能用 PHP 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:36:51.967

希望这能回答你。试试这个。

```
<?php
    $url = $_SERVER['REQUEST_URI'];
    $extension = end(explode('/',$url));
    echo $extension;        
?> 
```

# jquery - 新的 google.maps.LatLng(var) 返回 (NaN,NaN)

> ID：13285898
> 
> 赞同：0
> 
> 时间：2012-11-08T09:14:27.087
> 
> 标签：jquery, google-maps

我已经有隐藏形式的坐标了。

```
var coordinate=$k('#input_hidden_coordinate').val();
//it returns valid 8.48749, 76.94862
var latlng = new google.maps.LatLng(coordinate);
alert(latlng); 
```

高于警报 (NaN,NAN) 而不是 (8.48749, 76.94862)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:39:05.830

可能它不起作用，因为坐标是一个字符串，而 google.maps.LatLng() 将接受一对数值。尝试这个：

```
var coordinate=$k('#input_hidden_coordinate').val().split(',');
var latlng = new google.maps.LatLng(coordinate[0],coordinate[1]);
alert(latlng); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T23:42:11.130

该对象接受两个参数，而不是一个。

新的 google.maps.LatLng($lat, $lng)

不是

新的 google.maps.LatLng($coords)

另一个答案是这样说的，但直到我在另一页上看到它这样解释时我才明白。

# mysql - 备份MySQL数据库的有效方法

> ID：13285899
> 
> 赞同：1
> 
> 时间：2012-11-08T09:14:27.313
> 
> 标签：mysql, database-backups

我正在使用 mysqldump 来备份我的数据库。由于数据库和网络服务器在同一台机器上，mysqldump 会占用所有 CPU 并且站点会“关闭”，直到 mysqldump 完成。

将数据库移动到另一台机器并在该机器上进行备份的解决方案是什么？还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:21:13.373

这可能有点太多了，但我建议使用复制。MySQL有一个主从复制。这将允许您始终在另一台机器上拥有相同的数据库（只读），并且不需要您的机器工作太辛苦，因为它一直在发生。它也很容易设置。你可以在这里阅读更多关于它的信息： [mysql 站点描述](http://dev.mysql.com/doc/refman/5.6/en/replication.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T10:13:07.023

如果您想要平滑的备份（不干扰生产系统），主从复制是一个非常好的方法。但是，您可能不想为备用从属服务器保留服务器，并且确实 mysqldump 正在使用大量资源。

你可以试试 Percona XtraBackup 这是一个开源工具。在文件系统级别上工作，比 mysqldump 快得多。[http://www.percona.com/doc/percona-xtrabackup/](http://www.percona.com/doc/percona-xtrabackup/)您甚至可以在您当前的设置上尝试它，因为它不会在表上放置任何锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T09:20:39.403

我使用旧 mysql gui 工具中的[mysql 管理员](http://filippogiomi.it/media/mysql-gui-tools-5.0-r17-win32.msi)创建从我的网站到我的电脑的备份。

~90 mb 备份只需不到 2 分钟

# jquery - 如何在第一张和最后一张幻灯片上丢失下一张和上一张按钮？

> ID：13285900
> 
> 赞同：0
> 
> 时间：2012-11-08T09:14:29.587
> 
> 标签：jquery

```
 //NEXT
  $('.social-next a').on('click', function(e){
    e.preventDefault();
    $('.social').animate({'margin-left': '-=940'}, 500);
  });

  //PREVIOUS
  $('.social-previous a').on('click', function(e){
    e.preventDefault();
     $('.social').animate({'margin-left': '+=940'}, 500);
  }); 
```

使用此代码，您可以永远滑动，从所有内容中滑到任何地方，我无法让按钮消失，我开始遇到奇怪的错误。我尝试使用 first 和 last 来突出隐藏按钮，但我不确定我哪里出错了，我开始尝试替代方法，我什至不好意思提及......我知道这只是一个简单的 1-2-liner 虽然...

HTML：

```
 <div class="social">
        <div class="slide">
        <div class="intro">xxx.</div><!-- <a href="#" class="show-slides">view more..</a> -->
        </div>

        <div class="slide">
            <div class="intro">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima error.<a href="#" class="open-slides"></div>
            <div class="content">dolor dolor dolor </div><a href="#" class="close-slides"></a>
        </div>

        <div class="slide">
            <div class="intro">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima error.</div><a href="#" class="open-slides">
            <div class="content">ipsum ipsum ipsum ipsum ipsum</div><a href="#" class="close-slides"></a>
        </div>

        <div class="slide">
            <div class="intro">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima error.<a href="#" class="open-slides"></div>
            <div class="content"><div class="tekst">Lorem Lorem Lorem Lorem Lorem</div></div><a href="#" class="close-slides"></a>
        </div>

    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:22:31.823

该代码中没有任何内容可以为我们提供第一个或最后一个位置，唯一应用的是额外边距，因此检查位置的唯一方法是从边距。

例如，在第一张幻灯片上，margin-left 将为 0，您可以检查并隐藏上一个按钮，在最后一张幻灯片上，margin 将为 2820 像素，因此您可以检查并隐藏下一个按钮。

这是一种令人讨厌的做法，但在不更改标记的情况下，您可以通过此代码获得所有可用的信息。

编辑 - 我已经更改了代码以使用动画的回调函数，以及一个过滤器以不允许动画在它已经运行时开始，这似乎工作得很好并且完全符合你的要求：我'已经更新了[演示](http://jsfiddle.net/6S3cQ/7/)，所以试一试

```
var increment = -94;
$('.social-next a').on('click', function(e) {
    e.preventDefault();
    $('.social').filter(':not(:animated)').animate({
        'margin-left': '+=' + increment
    }, 500, function() {
        checkButtons($('.social').css("margin-left"))
    });
});

$('.social-previous a').on('click', function(e) {
    e.preventDefault();
    intMar = +$('.social').css("margin-left").replace("px", "");
    $('.social').filter(':not(:animated)').animate({
        'margin-left': '-=' + increment
    }, 500, function() {
        checkButtons($('.social').css("margin-left"))
    });
});

function checkButtons(margin) {
    intMar = +margin.replace("px", "");
    var children = $('.social').children('.slide').length;
    var limit = increment * (children - 1);
    switch (intMar) {
    case 0:
        $('.social-previous').hide();
        break;
    case limit:
        $('.social-next').hide();
        break;
    default:
        $('.social-previous').show();
        $('.social-next').show();
        break;
    }
}​ 
```

# python - 如何在 IronWorker 中捆绑 Python 依赖项？

> ID：13285901
> 
> 赞同：9
> 
> 时间：2012-11-08T09:14:31.580
> 
> 标签：python, iron.io

我正在[用 Python 编写一个简单的 IronWorker](http://dev.iron.io/worker/languages/python/)来使用 AWS API 做一些工作。

为此，我想使用通过 PiPy 分发的[boto 库。](https://github.com/boto/boto)IronWorker 运行时环境中默认不安装 boto 库。

如何将 boto 库依赖项与 IronWorker 代码捆绑在一起？

理想情况下，我希望我可以使用诸如[可用于 Ruby IronWorkers 的 gem 依赖捆绑](http://dev.iron.io/worker/languages/ruby/merging-gems/)之类的东西- 即`myRuby.worker`指定

```
gemfile '../Gemfile', 'common', 'worker' # merges gems from common and worker groups 
```

在[Python Loggly 示例](https://github.com/iron-io/iron_worker_examples/blob/master/python/Loggly.py#L6)中，我看到使用了 hoover 库：

```
#here we have to include hoover library with worker.
hoover_dir = os.path.dirname(hoover.__file__)
shutil.copytree(hoover_dir, worker_dir + '/loggly') #copy it to worker directory 
```

但是，我看不到您在哪里/如何指定您想要的 hoover 库版本，或者从哪里下载它。

在 Python IronWorkers 中使用 3rd 方库的官方/正确方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-11T12:58:12.507

较新的 iron_worker 版本具有对`pip`命令的本机支持。所以，你需要：

```
runtime "python"
exec "something.py"

pip "boto"
pip "someotherpip"

full_remote_build true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-08T19:20:09.147

[编辑]自从编写并接受此答案以来，我们已经对我们的工具集进行了一些研究。下面[我同事的回答](https://stackoverflow.com/a/14278696/177467)是推荐的前进课程。[/edit]

我为 IronWorker 编写了 Python 客户端库。我也受雇于 Iron.io。

如果您使用 Python 客户端库，最简单（也是推荐）的方法是复制库的已安装文件夹，并在上传包时包含它。这就是上面的 Python Loggly 示例所做的。正如你所说，这并没有指定版本或从哪里下载库，因为它不在乎。它只需要安装在您系统上的那个并使用它。当您在本地机器上输入“import boto”时，无论您得到什么，都会被上传。

另一种选择是使用我们的[CLI](http://dev.iron.io/worker/reference/cli)上传您的工人，并带有[.worker 文件](http://dev.iron.io/worker/reference/dotworker)。

为此，您需要执行以下操作：

创建一个 botoworker.worker 文件：

```
runtime "binary"
build 'pip install --install-option="--prefix=`pwd`/pips" boto'
file 'botoworker.py'
exec "botoworker.sh" 
```

第二行是将运行以安装依赖项的 pip 命令。您可以像从命令行运行任何 pip 命令一样对其进行修改。它将在“构建”阶段在工作人员上执行该命令，因此它只执行一次，而不是每次运行任务时执行。

第三行应该更改为您要运行的 Python 文件——它是您的 Python 工作文件。这是我们用来测试的：

```
import boto 
```

如果将其保存为 botoworker.py，则上述内容无需任何修改即可工作。:)

第四行是一个 shell 脚本，它将实际运行您的工作程序。我已经包括了我们在下面使用的那个。只需将其保存为 botoworker.sh，您就不必担心修改上面的 .worker 文件。

```
PYTHONPATH="$HOME/pips/lib/python2.7/site-packages:$PYTHONPATH" python botoworker.py "$@" 
```

您会注意到它指的是您的 Python 文件——如果您不将 Python 文件命名为 botoworker.py，请记住在此处也进行更改。所有这一切都是设置您的 PYTHONPATH 以包含已安装的库，然后运行您的 Python 文件。

要上传此文件，只需确保您已安装 CLI（gem install iron_worker_ng，确保您的 Ruby 版本为 1.9.3 或更高版本），然后在您的 shell 中运行“iron_worker upload botoworker”，与您的 botoworker.worker 文件相同的目录在。

希望这可以帮助！

# c# - 最初在 Resharper 中的哪些功能现在包含在 Visual Studio (2012) 中？

> ID：13285903
> 
> 赞同：1
> 
> 时间：2012-11-08T09:14:42.743
> 
> 标签：c#, asp.net, visual-studio, resharper

我假设 Resharper 和 Visual Studio 都是不断添加的功能。Resharper 部分添加了 Visual Studio 中最缺少的那些功能，我猜随着 Visual Studio 的发展，Visual Studio 将添加越来越多原本在 Resharper 中的功能。Visual Studio 团队要么弄清楚他们在 Visual Studio 中需要什么，要么查看 Resharper 等插件形式的可用内容。例如，VS 2012 似乎添加了在缺少时添加“使用”语句的提示，尽管 VS 功能不如 Resharper 好。

问题：最初在 Resharper 中的哪些功能现在包含在 Visual Studio (2012) 中？

我是从 C# 和 ASP.NET 的角度来询问的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T14:50:34.433

同步 html 标签编辑（页眉和页脚）

# java - 如何在 Java 中将 PST 转换为 GMT(-0800)？

> ID：13285904
> 
> 赞同：0
> 
> 时间：2012-11-08T09:14:51.987
> 
> 标签：java, timezone, simpledateformat

实际上在我的java程序中就像下面的代码......

```
 String date1=null;
  String formate="IST";
  SimpleDateFormat sourceFormat = new SimpleDateFormat("z");

   SimpleDateFormat gmtFormat = new SimpleDateFormat("'GMT('Z')'");
   date1 = gmtFormat.format(sourceFormat.parse(formate));
   System.out.println(date1);//output GMT(+0530) 
```

听说它给出了正确的值，但时区可能会改变`PST---- GMT(-0800)`。

但我的代码总是只显示`GMT(+0530)`

请帮我将时区转换`ACT,,PST,IST.....etc` 为`GMT(+11:00),GMT(-08:00),GMT(+0530).......etc`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:57:57.390

```
java.text.SimpleDateFormat sourceFormat = new SimpleDateFormat("z");

java.text.SimpleDateFormat gmtFormat = new SimpleDateFormat("'GMT('ZZZ')' zzzz");

java.util.Date date1 = sourceFormat.parse("IST");

TimeZone gmtTime = TimeZone.getTimeZone("IST");

gmtFormat.setTimeZone(gmtTime);

//System.out.println("Source date: " + date1);

System.out.println("   "+ gmtFormat.format(date1)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-19T14:54:39.963

在我看来更清洁。

```
 TimeZone gmtTime = TimeZone.getTimeZone("IST");
        long gmtOffset = gmtTime.getOffset(new Date().getTime())/ TimeUnit.HOURS.toMillis(1); 
```

# android - Android子菜单，如何返回主菜单？

> ID：13285914
> 
> 赞同：0
> 
> 时间：2012-11-08T09:15:29.597
> 
> 标签：android, submenu

我为我的 ContextMenu 使用 xml，就像：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android"> 
  <item android:id="@+id/Ordermenu" android:title="Order">
    <menu android:id="@+id/OrderBySubMenu">
      <item android:id="@+id/OrderByASC" android:title="Order ASC"   /> 
      <item android:id="@+id/OrderByDESC" android:title="Order DESC"  />
      <item android:id="@+id/Cancel" android:title="Cancel"  />
    </menu>
   </item> 
 <item android:id="@+id/ActionAmenu" android:title="Action A"/>
</menu> 
```

我使用以下代码在我的 onCreateContextMenu 中显示菜单

```
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.layout.my menu, menu); 
```

我使用以下代码管理选项单击：

```
public boolean onContextItemSelected(MenuItem item) {
  switch (item.getItemId()) {
  case R.id.Displaymenu:
     //do stuff
     return true;
  case R.id.OrderByASC:
     //do stuff
     return true;
  case R.id.OrderByDESC:
     //do stuff
     return true;
  default :
     return(super.onOptionsItemSelected(item));
} 
```

启动上下文菜单它显示两个选项：

*   命令
*   行动A

单击订单显示子菜单：

*   订购 ASC
*   订购 DESC
*   取消

现在，如果用户单击取消（或单击硬件后退按钮），则未指定任何操作，因此它调用 super.onOptionsItemSelected(item) 返回我的主要活动。

在这种情况下，我怎样才能设法返回主菜单？即显示初始：

*   命令
*   行动A

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:25:30.313

我很久以前试过这个，但我认为你也必须覆盖 onPrepareOptionsMenu 才能让它工作。这是在显示之前调用的，您必须在此处设置要向用户显示的项目的标志。

尝试这样的事情：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) 
{
    // Clear the previous layout
    menu.clear();

    if(showMainMenu) 
    {
        // Add main menu items..
        menu.add(0, R.id.ordermenu, 0, "True");
    } 
    else 
    {
        // Add sub-menu items
        menu.add(0, R.id.ordermenuASC, 0, "True");
    }

    return super.onPrepareOptionsMenu(menu);
} 
```

因此，当用户单击主菜单项时，将布尔标志更改为重做该过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T09:21:59.723

最后，它只能通过添加：

```
case R.id.Cancel:
   openContextMenu(findViewById(selected_view_id));
   return true; 
```

在公共布尔 onContextItemSelected(MenuItem item)

selected_view_id 由

```
selected_view_id=v.getId(); 
```

在 onCreateContextMenu

希望它会帮助别人。

# android - 从 IntelliJ 运行 Robolectric 测试会导致 OutOfMemory

> ID：13285915
> 
> 赞同：1
> 
> 时间：2012-11-08T09:15:41.930
> 
> 标签：android, intellij-idea, robolectric

我正在尝试按照此处的示例从使用 Robolectric 的 IntelliJ 运行单元测试 :: [http://pivotal.github.com/robolectric/intellij-quick-start.html](http://pivotal.github.com/robolectric/intellij-quick-start.html)

为 Junit4 添加了 Robolectric 罐子和罐子。当测试运行时，我看到以下输出 >>

![智能输出](../Images/0244b2dffc09d93077ec4ffc4a690c7e.png)

用谷歌搜索并发现了一些我需要指定一些 vm args 的建议。这篇文章描述了一个与 Eclipse [java 堆空间](https://stackoverflow.com/questions/7075875/java-heap-space)类似的问题。这篇文章涉及将 Robolectric 与 Maven 项目结合使用。我读过在 Maven 项目中使用 Robolectric 更容易，但我选择不这样做，因为我的 Android 项目对 Maven 没有其他用途。

如果有人对这里的问题有任何智慧，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T20:14:54.093

我遇到了同样的问题并在这里找到了答案：[https ://coderwall.com/p/rcgyfq](https://coderwall.com/p/rcgyfq)

```
1.- Copy the file "/Applications/IntelliJ IDEA.app/bin/idea.vmoptions" to "~/Library/Preferences/IntelliJIdea12/idea.vmoptions"
2.- Edit file "~/Library/Preferences/IntelliJIdea12/idea.vmoptions"
3.- For example change -Xmx800m by -Xmx2048m
4.- Restart IntellijIDEA 12 
```

这阻止了我的内存不足异常并大大减少了我的整体测试时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T11:34:01.200

也许会有所帮助。您需要在项目的根目录中具有 android sdk 位置的适当 local.properties 文件才能正确运行 Robolectric：

```
sdk-location=c:\\Development\\android-sdk-windows
sdk.dir=c:\\Development\\android-sdk-windows 
```

# html - CSS, HTML Overlay 背景与透明度

> ID：13285916
> 
> 赞同：1
> 
> 时间：2012-11-08T09:15:43.033
> 
> 标签：html, css, overlay

一段时间以来，我一直在反对这一点：

![条纹背景示例](../Images/0ee272ad7294e4701a32c21c8029953c.png)

我会尽量对这个问题给出最好的描述：

在图像上，您会看到一个标题（`h2`例如）。您在带有条纹的背景上看到它（身体背景）。我想要实现的是让这个标题带有灰色条纹的背景（在图像上用蓝色边框标记），但是在文本所在的地方我不想有这个背景，而是身体的背景（标记红色边框）。

我对此的唯一解决方案是：

```
<h1><span>Our Solutions</span></h1> 
```

```
h1
{
  background: url(stripes.png);
}
h1 span
{
  background: url(body-stripes.png)
} 
```

但是将标题的条纹与身体的条纹匹配存在问题。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:46:36.133

我会在周围放置一个包装器`H1`，但匹配条纹的关键是使用背景定位。

```
<div id='bar'><h1>Our Solutions</h1></div> 
```

```
#bar
{
  width:100%;
  background: url(stripes.png);
}
h1{
  display: inline-block;
  width:50px;
  height:18px;
  overflow: hidden;
  background-attachment: fixed;
  background: url(body-stripes.png);
  background-position: -4px 0px;
} 
```

然后一次更改“-4px”1 个像素，直到条纹匹配。在此示例中，“-4px”将背景图像向左移动 4 个像素。

# asp.net - gridview rowCommand中的行索引

> ID：13285918
> 
> 赞同：10
> 
> 时间：2012-11-08T09:15:48.723
> 
> 标签：asp.net

只想将值从变量转移到另一个变量：

```
 protected void gvVariableDetail_RowCommand(object sender, GridViewCommandEventArgs e)
        {

            if (e.CommandName == "Edit")
            {

                 int index = Convert.ToInt32(e.CommandArgument);
                 GridViewRow gvRow = gvVariableConfig.Rows[index];
                 int rowIndex = index;

            }

        } 
```

但是 rowindex 仍然有零值，并且索引得到了行值（在这种情况下，我尝试编辑第 2 行，因此索引值为 1（从 0 开始））。所以希望任何人都知道如何将索引值传输到 rowIndex。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-08T09:20:58.950

您可以使用该`CommandSource`属性并将其[`NamingContainer`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.namingcontainer.aspx)转换为`GridViewRow`. 然后你可以使用它的`RowIndex`属性：

```
GridViewRow gvr = (GridViewRow)((Control)e.CommandSource).NamingContainer; 
int rowIndex    = gvr.RowIndex; 
```

如果你想使用`CommandArgument`你必须从 aspx 设置它：

```
CommandArgument='<%# ((GridViewRow) Container).RowIndex %>' 
```

那么这也有效：

```
int RowIndex = int.Parse(e.CommandArgument.ToString()); 
```

# c# - 如何反向迭代队列？

> ID：13285923
> 
> 赞同：3
> 
> 时间：2012-11-08T09:16:09.277
> 
> 标签：c#

`foreach`循环`Queue`从最旧的项目开始迭代并以最新的项目结束。如果我需要从最新开始并以最旧结束（可能会在某些时候中断，因为在大多数情况下我只需要遍历几个最新项目）怎么办？

我正在寻找直接有效的解决方案。无需重新创建新对象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T09:19:55.083

您可以使用 Linq 的`Reverse()`功能：

```
Queue myQueue;

foreach (var item in myQueue.Reverse())
{
    // do things
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:18:00.760

`for`循环是你的朋友。

你有两个选择

*   颠倒顺序`Queue`
*   使用`for`循环。

> ```
> for (int i = list.Length; i >= 0; i--)
> {
> 
> } 
> ```

颠倒队列的顺序。

```
Queue queue;

foreach (var item in queue.Reverse())
{

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-26T04:41:49.487

两者`Reverse()`都`ToArray()`表现不佳。如果可能，请更改`Queue<T>`为`LinkedList<T>`.

LinkedList 就像一个双端队列（[https://en.wikipedia.org/wiki/Double-ended_queue](https://en.wikipedia.org/wiki/Double-ended_queue)）。

更多详细信息：[https ://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlist-1](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.linkedlist-1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-08T09:18:30.710

请改用 for 循环。

编辑：添加了如何在循环中检索项目的示例。

编辑：将示例更改为`Queue`但是如果不检查现在是否比使用更昂贵，我不会知道`QueueList.Reverse()`

逆转

```
for (int i = QueueList.Count; i >= 0; i--)
{
   var Item = QueueList.ToArray().ToList()[i] as SomeObject;
} 
```

普通的

```
for (int i = 0; i < QueueList.Count; i++)
{
   var Item = QueueList.ToArray().ToList()[i] as SomeObject;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-08T09:20:52.260

```
var newestItems = queue.Reverse().TakeWhile(item => IsNewest(item));
// if condition is simple, you can use lambda without creating named method 
```

然后：

```
foreach(var item in newestItems)
    // do stuff 
```

可读，但价格昂贵。在这种情况下（使用 时`Reverse`）Linq 会将队列的所有项目复制到缓冲区中。

*顺便说一句*，如果您需要颠倒队列中的顺序，请考虑`Stack`改用。它将是 FILO 队列类型。

# c# - 如何定义多个泛型参数的约束

> ID：13285924
> 
> 赞同：40
> 
> 时间：2012-11-08T09:16:09.683
> 
> 标签：c#, generics

我想知道为什么我不能在谷歌上得到这样简单的东西。此代码不可编译。我怎样才能做到这一点？

```
public class TestStep<StartEvent, CompletedEvent> 
    where StartEvent : MyBase1, MyInterface1, new() &&
    where CompletedEvent : MyBase2, MyInterface2, new()
{
} 
```

请帮忙。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-11-08T09:19:04.973

尝试不使用“&&”

```
public class TestStep<StartEvent, CompletedEvent> 
    where StartEvent : MyBase1, MyInterface1, new()
    where CompletedEvent : MyBase2, MyInterface2, new()
{
} 
```

# javascript - 将 getusermedia 插入基于 node.js 和 socket.io 的聊天引擎

> ID：13285930
> 
> 赞同：1
> 
> 时间：2012-11-08T09:16:18.917
> 
> 标签：javascript, html, node.js, websocket, webrtc

我有这个代码在运行

**客户端：**

```
$(function(){
  var iosocket = io.connect();
  iosocket.on('connect', function () {
    $('#incomingChatMessages').append($('<li>Connected</li>'));
    iosocket.on('message', function(message) {
      $('#incomingChatMessages').append($('<li></li>').text(message));
    });
    iosocket.on('disconnect', function() {
      $('#incomingChatMessages').append('<li>Disconnected</li>');
    });
  });
  $('#outgoingChatMessage').keypress(function(event) {
    if(event.which == 13) {
      event.preventDefault();
      iosocket.send($('#outgoingChatMessage').val());
      $('#incomingChatMessages').append($('<li></li>').text($('#outgoingChatMessage').val()));
      $('#outgoingChatMessage').val('');
    }
  });
}); 
```

**服务器端**

```
var fs = require('fs'), http = require('http'), socketio = require('socket.io');
var server = http.createServer(function(req, res) {
  res.writeHead(200, { 'Content-type': 'text/html'});
  res.end(fs.readFileSync(__dirname + '/index.html'));
}).listen(8080, function() {
  console.log('Listening at: localhost');
});

socketio.listen(server).on('connection', function (socket) {
  socket.on('message', function (msg) {
    console.log('Message Received: ', msg);
    socket.broadcast.emit('message', msg);
  });
}); 
```

**问题**：如何包含 getUserMedia 和其他 WEBRTC API 来创建简单的视频应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:54:28.600

您是否查看或发现了一个名为[webrtc.io](https://github.com/webRTC/)的开源代码集。如果您查看示例代码（在 webrtc.io-demo 项目中），您会发现如何使用 getusermedia 和 peerconnection API 的一个非常好的示例。这段代码确实实现了 node.js 但 websocket.io 而不是 socket.io。我对两者都不太了解，所以我不确定它们之间是否存在任何兼容性。

# php - 使用通配符或正则表达式获取 POST 变量

> ID：13285937
> 
> 赞同：0
> 
> 时间：2012-11-08T09:16:43.443
> 
> 标签：php

如何使用正则表达式获取 POST 变量，如下所示：

```
$var = $_POST['foo?']; 
```

或者

```
$var = $_POST['foo\w{1}']; 
```

编辑：

我的表单有许多不同名称的按钮：file1、file2、file3。当按下按钮时，它当然会传递文件 1 或文件 2，...我想使用该名称获取值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:19:38.680

在数组中循环运行，并检查键

像：

```
// some POST: array('a' => 1, 'b' => 2, 'cc11' => 6666666)

foreach( $_POST as $k => $v ) {
   if ( preg_match('#^[^\d]+$#', $k) ) { // not number key 
      // you actions ...
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:20:39.583

您必须遍历 $_POST 数组：

```
$regex = "@foo\w{1}@";
$vars = array();

foreach($_POST as $name=>$value) {
    if(preg_match($regex, $name)) {
        $vars[$name] = $value;
    }
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:24:34.607

我能想到的最简单的事情是：

```
$allPostKeys = implode(',',array_keys($_POST));
$wildcardVals = array();
if (preg_match_all('/,?(foo[0-9]),?/',$allPostKeys,$matches))
{
    $wildCardKeys = $matches[1];
    while($key = array_shift($wildCardKeys))
    {
        $wildcardVals[$key] = $_POST[$key];
    }
}
if (!empty($wildcardVals))
{//do stuff with all $_POST vals that you needed
} 
```

`[0-9]`在正则表达式中替换为`.`以匹配*任何*字符，或者您需要看到匹配的任何字符。
使用具有以下键的数组对此进行了测试`bar,zar,foo1,foo2,foo3`，它返回`array('foo1' => 'val1','foo2' => 'val2','foo3' => 'val3')`了，我认为这就是您所需要的。

*响应您的编辑*
超`$_POST`全局也可以是多维数组：

```
<input type="file" name="file[]" id="file1"/>
<input type="file" name="file[]" id="file2"/>
<input type="file" name="file[]" id="file3"/> 
```

这样，您可以轻松地遍历文件：

```
foreach($_POST['file'] as $file)
{
    //process each file individually: $file is the value
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-08T09:29:22.990

在你的情况下，你可以这样做：

```
<?php
    $_POST = array(
        "foo" => "bar",
        "file1" => "something",
        "file2" => "somethingelse",
        "file3" => "anothervalue",
        "whocares" => "aboutthis"
    );
    $files = array();
    foreach ($_POST as $key => $value) {
        if (preg_match("/file(\d+)/", $key, $match)) {
            $files[$match[1]] = $value;
        }
    }
    print_r($files);
?> 
```

输出（其中键匹配文件[ **NUMBER** ]）：

```
Array ( 
    [1] => something 
    [2] => somethingelse 
    [3] => anothervalue 
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-08T09:46:47.293

将表单字段命名为数组数据结构：

```
<input name="files[]" ...>

foreach ($_POST['files'] as $file) {
    ...
} 
```

# javascript - 目标 =“_blank” 在 IOS 中不起作用

> ID：13285940
> 
> 赞同：5
> 
> 时间：2012-11-08T09:16:47.467
> 
> 标签：javascript, html, ios, cordova

我正在使用 phonegap/cordova 2.1.0 开发移动应用程序（IOS/android）UI。我想在新窗口/页面中打开锚标记的 href 属性中给出的链接。我试过了 ：

```
target="_blank" 
```

但它不适用于IOS。任何解决方法可用？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T09:29:23.333

如果您可以使用 JQuery ：

```
<a href="http://link.com" rel="external">link</a> 
```

Javascript：

```
$(document).ready(function(){
    $('a[rel="external"]').click(function() {
        window.open($(this).attr('href'));
        return false;
    });
}); 
```

[来源](https://css-tricks.com/forums/discussion/14623/target_blank-vs-jquery/p1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T10:15:11.633

不要触摸你的 javascript 文件，只需在 @end 标记之前在 MainViewController.m 文件上写下这段代码。我和你一样使用科尔多瓦框架。

*   (BOOL) webView:(UIWebView*)WebView 应该StartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {

    NSString *url = request.URL.absoluteString;

    NSString *pathExtension = [[url lastPathComponent] pathExtension];

    if([pathExtension isEqualToString:@"pdf"]){

    ```
    [[UIApplication sharedApplication] openURL:request.URL];

    return NO; 
    ```

    } else if([[request.URL host] isEqualToString:@"www.yoururl.com"]){

    ```
    [[UIApplication sharedApplication] openURL:request.URL];

    return NO; 
    ```

    }

    return [super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType]; }

在这里您可以查看两种不同的说明，所有 pdf 文件都将在新窗口中打开，并且在 request.URL 之后您需要写入您的 url。如果你 www.yoururl.com/folder1/folder2 你不需要写所有的 url，因为也许你会有很多不同的 url。您只需要从您的站点编写 www.yoururl.com。

希望它对你有帮助，这对我有用。=)

# c# - 不同的布尔大小

> ID：13285942
> 
> 赞同：1
> 
> 时间：2012-11-08T09:17:02.387
> 
> 标签：c#, boolean, marshalling

> **可能重复：**
> [Marshal.SizeOf 结构返回过多的数字](https://stackoverflow.com/questions/13233812/marshal-sizeof-structure-returns-excessive-number)

正如[MSDN](http://msdn.microsoft.com/en-us/library/eahchzkf.aspx)所说，这`sizeof(bool)`是**1**个字节。但是当我将 bool 放入 struct 时，sizeof struct 变为**4**字节。有人可以解释这种行为吗？

```
[StructLayout(LayoutKind.Sequential)]
public struct Sample1
{
    public bool a1;
}

int size1 = Marshal.SizeOf(typeof (Sample1));  // 4
int size2 = sizeof (bool);                     // 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:22:41.423

您不能直接比较`sizeof`和`Marshal.SizeOf`。例如，如果我们以相同的方式测量它，我们会得到相同的结果：

```
static unsafe void Main() { // unsafe is needed to use sizeof here
    int size1 = sizeof(Sample1); // 1
} 
```

*据推测*，`Marshal`假设每个字段对齐 4 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T09:29:06.267

当使用结构/类时，大小总是与特定大小对齐，在每个架构上它可能不同，但通常是 4，所以如果你在 bool 之后有 int，我们从 4 的乘法开始，导致处理器读取 4 个字节块。
这是在设置类（或结构）中成员的顺序时值得考虑的事情

示例：

```
[StructLayout(LayoutKind.Sequential)]
public struct Sample1
{
    public bool a1;//take 1 byte but align to 4
}
public struct Sample2
{
    public bool a1;//take 1 byte but align to 4
    public int  a2;//take 4 bytes (32bit machine) start at a multiplication of 4
    public bool a3;//take 1 byte but align to 4
}
public struct Sample3
{
    //here the compiler (with the right optimizations) can put all the bools one after the other without breaking the alignment
    public bool a1;
    public bool a2;
    public bool a3;
    public bool a4;
    public int  a5;
}
int size1 = Marshal.SizeOf(typeof (Sample1));  // 4
int size1 = Marshal.SizeOf(typeof (Sample2));  // 12
int size1 = Marshal.SizeOf(typeof (Sample3));  // 8
int size2 = sizeof (bool);                     // 1 
```

# ipad - 横屏模式越狱ipad3问题

> ID：13285943
> 
> 赞同：2
> 
> 时间：2012-11-08T09:17:04.617
> 
> 标签：ipad, landscape

我在 appstore 中发布了一个应用程序，并且可以与所有 5.1 及更高版本的 ipad 完美配合。当越狱的 ipad3 使用 de 应用程序时，就会出现问题。该应用程序使用情节提要，并且所有应用程序的横向模式都是固定的。当此 ipad 使用游戏屏幕时，方向变为纵向模式。我能做些什么？

# jquery - Drupal 7 Nivo 滑块错误

> ID：13285947
> 
> 赞同：2
> 
> 时间：2012-11-08T09:17:21.933
> 
> 标签：jquery, drupal-7, nivo-slider

我是一个完整的 Drupal 菜鸟，目前正在尝试让 nivo 滑块在我的新站点上工作。我已经按照各种说明（主要来自[这个视频](http://www.youtube.com/watch?v=ITor-ptI9aA&list=PL708F0EEDA6735005&index=4&feature=plpp_video)）并添加了模块，但是当我到达该过程的最后时，当滑块应该工作时，我反而让我的图像一个一个堆叠在另一个之上，并在调试控制台中消息“vns.nivoSlider 不是函数”。

我以前在非 Drupal 网站上使用过 Nivo 滑块，我知道它应该多么容易，有人知道这里出了什么问题吗？！

更新：我卸载并重新安装了与 Nivo Slider 相关的所有 Drupal 模块，现在它可以工作了！奇怪的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:22:28.317

看来您可能没有插入必要的 javascript 文件或在页面上执行代码之后插入它们。您能否提供一个指向相关页面的链接，以帮助确定这是否是原因？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-10T07:03:48.303

我在 Drupal 7 上的 Nivo Slider 中遇到了同样的问题。起初我没有阅读模块的文档，但看起来 Nivo Slider 的库不包含在包中，这意味着您需要手动上传它。您可以查看文档：[https://www.drupal.org/project/views_nivo_slider](https://www.drupal.org/project/views_nivo_slider)

```
install/enable Library API
download Nivo Slider libs from https://github.com/gilbitron/Nivo-Slider/downloads
unzip the archive to sites/all/libraries/nivo-slider 
```

完成上述过程后，冲洗外壳。希望它对你有用。

# ios - UITabbar 中的 UISplitViewController

> ID：13285949
> 
> 赞同：0
> 
> 时间：2012-11-08T09:17:25.060
> 
> 标签：ios, cocoa-touch, uisplitviewcontroller

我在 TabbarController 中有一个 UISplitViewController，它工作正常，直到我将 SplitView 留在纵向模式并在我的其他视图中更改为横向并返回到我的 splitview 选项卡。之后，我的控制器尝试调用 willPresentViewController 并失败

```
2012-11-08 10:08:27.047 app[77747:c07] *** Assertion failure in -[UIPopoverController    _incrementSlideTransitionCount:],
/SourceCache/UIKit_Sim/UIKit-2372/UIPopoverController.m:510 
```

我认为这是因为当我回来时拆分视图没有旋转。我试过这个控件[https://github.com/grgcombs/IntelligentSplitViewController](https://github.com/grgcombs/IntelligentSplitViewController)但它也没有工作。

我可以解决一点，但我现在遇到的问题是，当我以我描述的那种方式旋转时，风景中的主人总是黑色的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T14:07:35.557

整个“离开标签，旋转，回到标签”可能会很痛苦，因为非活动标签不会获得旋转事件。

在过去，我使用了两种不同的方法来解决这个问题：

1.  `UITabBarController`创建将旋转事件转发到的自定义子类，`UIViewControllers`即使它们不是活动选项卡。
2.  让`UIViewController`需要了解轮换的人使用`NSNotificationCenter`并注册该事件`UIDeviceOrientationDidChangeNotification`

我使用哪一个实际上取决于我需要多少个标签来跟踪该信息。如果 1 个选项卡需要信息，则 #2 可能是前进的方向，但如果 5 个选项卡中有 4 个需要它，那么 #1 可能是要走的路。

# c# - 如何通过 C# 在 WinRT 上使用 Google Analytics API

> ID：13285952
> 
> 赞同：1
> 
> 时间：2012-11-08T09:17:49.400
> 
> 标签：c#, windows-8, google-analytics, windows-runtime, gdata-api

我正在开发一个必须连接到 Google Analytics 的 C# Windows Store 应用程序。

我找到了[Google API Client Library For .NET](http://code.google.com/p/google-api-dotnet-client/)，但它在 WinRT 下不起作用。

可以围绕 HttpClient 创建自己的包装器，但我宁愿将其作为最坏的情况。

您能否建议任何其他连接到 API 的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T05:54:10.040

您提供链接的库带有[源](http://code.google.com/p/google-api-dotnet-client/source/browse/)。我建议您下载它们并尝试从中创建一个 Windows 应用商店类库。通过这种方式，您将看到它在多大程度上依赖于 .NET for Windows Store 应用程序中不可用的 API。

由于该库只是基于 Web 的 API 的包装器，因此移植可能不会那么困难。这肯定比编写自己的包装器更容易。

# verilog - 无法在iverilog中编译unisim代码

> ID：13285956
> 
> 赞同：0
> 
> 时间：2012-11-08T09:18:05.620
> 
> 标签：verilog, xilinx, icarus

我一直在尝试使用 icarus verilog 从 xilinx 提供的 unisim 库中编译 ICAP_SPARTAN6.v。

我得到下面的编译错误：

```
/opt/Xilinx/14.3/ISE_DS/ISE/verilog/src/unisims/ICAP_SPARTAN6.v:79: syntax error
/opt/Xilinx/14.3/ISE_DS/ISE/verilog/src/unisims/ICAP_SPARTAN6.v:79: error: invalid module item. 
```

引用的相关代码行如下：

```
 tri (weak1, strong0) done_o = p_up;//line 78
  tri (pull1, supply0) [15:0] di_t = (icap_idone == 1 && WRITE == 1)? 16'bz : dix; //line 79 
```

我还想指出，我不太清楚 tri 究竟是如何工作的。我认为它类似于电线，除了有 3 种状态，但它后面的括号对我来说没有意义，这使得调试更加困难 :) 任何帮助将不胜感激。-谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:13:24.573

`tri`并且`wire`是等价的。

括号中的关键字确定驱动强度，允许开关和门级建模。规则有些复杂，但基本上较强的信号可以覆盖较弱的信号，因此在同一信号上驱动 a`pull1`和`strong0`可能会导致`0`状态，而不是`X`or `Z`。

该错误看起来像 iverilog 中的错误或缺失功能。删除向量范围可以成功编译。

# c# - 在 .NET 中计算当前速度 - 使用 GPS

> ID：13285964
> 
> 赞同：0
> 
> 时间：2012-11-08T09:18:40.807
> 
> 标签：c#, .net, gps

我想知道用 GPS 计算当前速度的最佳方法是什么。我有一个外部 GPS 接收器，它通过 USB 连接到我的汽车笔记本电脑。它只给了我以下信息： - 经度 - 纬度 - 高度

我的尝试是获取两个带有时间戳的位置信息。然后我找到时间差（timestamp2 - timestamp1）并计算速度（距离/时间）。

是否有任何其他可能性或任何可用的库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T09:37:46.270

要计算距离，您将需要[Haversine Formula](http://en.wikipedia.org/wiki/Haversine_formula)。

你会在网上找到很多它的实现，这是我在 C# 中使用的一个：

```
private static double ArcInMeters(double lat0, double lon0, double lat1, double lon1)
{
    double earthRadius = 6372797.560856; // m
    return earthRadius * ArcInRadians(lat0, lon0, lat1, lon1);
}

private static double ArcInRadians(double lat0, double lon0, double lat1, double lon1)
{
    double latitudeArc = DegToRad(lat0 - lat1);
    double longitudeArc = DegToRad(lon0 - lon1);
    double latitudeH = Math.Sin(latitudeArc * 0.5);
    latitudeH *= latitudeH;
    double lontitudeH = Math.Sin(longitudeArc * 0.5);
    lontitudeH *= lontitudeH;
    double tmp = Math.Cos(DegToRad(lat0)) * Math.Cos(DegToRad(lat1));
    return 2.0 * Math.Asin(Math.Sqrt(latitudeH + tmp * lontitudeH));
}

private static double DegToRad(double x)
{
    return x * Math.PI / 180;
} 
```

# c# - C#中分层成员的数据结构

> ID：13285968
> 
> 赞同：-1
> 
> 时间：2012-11-08T09:18:50.057
> 
> 标签：c#, wsdl, hierarchical

我正在尝试从 WSDL 文件中读取数据并卡住，因为可能有一个大的分层树，我不知道使用哪种数据结构来获取输入和输出，因为它们可以将输入作为对象和对象可以指向耦合简单的输入和第二个对象......这可以继续下去。所以不知道用什么。也许是树，也许是索引。最佳实践是什么，您能否举个小例子来控制数据？

PS 我正在开发自动化测试生成工具，它将使用 WSDL 文件进行生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:53:11.637

WSDL 基于 XML，它已经是一个树结构。不知道为什么要先将其读入对象——只需使用[Linq to XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)直接读取 WSDL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T09:44:10.360

你最好的选择是使用好的旧类。首先要做的是使用 svcutils.exe（代码生成器工具）之类的实用程序从 WSDL 创建客户端代码。从这个表格中，您将了解树的深度。

一旦你有了结构的对象视图，然后开始创建类并应用 OOP 设计模式。这将至少有助于两件事：

1.  避免代码重复和
2.  当您开始在代码中构建对象时，它会让您知道哪个节点属于哪个父节点等。

希望这可以帮助。

还要考虑的另一件事是使用某种对象序列化机制。在处理从 XML 到对象的复杂树状数据时，序列化将极大地帮助您，反之亦然。

# python - 用于管理 dns 和 dhcp 的 Python 模块

> ID：13285973
> 
> 赞同：1
> 
> 时间：2012-11-08T09:19:02.643
> 
> 标签：python, django, dns, dhcp

我正在 django 中编写一个应用程序，它将在 RHEL 服务器上创建/销毁 dns (bind) 和 dhcp (dhcpd) 记录。我想知道python中是否有一个模块/模块可以让我这样做而无需担心自己编辑配置文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T03:25:35.117

尝试使用 dnspython 中的 dns.zone.Zone 类获取区域文件： [http ://www.dnspython.org/docs/1.10.0/html/dns.zone-module.html#from_file](http://www.dnspython.org/docs/1.10.0/html/dns.zone-module.html#from_file)

名册 DNS 管理可能有一个您可以使用的 API。 [http://code.google.com/p/roster-dns-management/](http://code.google.com/p/roster-dns-management/)

# python - Python/Django：电子邮件模板未呈现。显示 html 标签并且不转换实体

> ID：13285976
> 
> 赞同：1
> 
> 时间：2012-11-08T09:19:04.493
> 
> 标签：python, django, email, django-templates

我正在使用模板发送电子邮件，但模板未正确呈现。它显示 html 标签并且不呈现特殊字符。

它确实呈现了上下文，例如，如果我为它提供一个 "username":some_name 那么它会在我执行 {{username}} 时正确显示用户名

my_template.html：

```
<p>hello &oslash;</p> 
```

在视图中：

```
from django.core.mail import EmailMultiAlternatives
from django.template.loader import get_template
from django.template import Context

t = get_template('my_template.html')
msg = EmailMultiAlternatives("hi", t.render(Context({})), from_email, [user.email])
msg.send() 
```

收到的电子邮件显示带有 p 标签。此外，实体的外观与模板中所写的完全一样。除了需要渲染特殊字符外，我只使用 .txt 文件就可以了。如果我直接将它们写入 txt 文件，则在尝试发送时会出错。

我也尝试过使用 django 的 send_mail()。还向模板添加了一个 html 标记。结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T09:32:49.987

多部分/替代电子邮件有两个部分：

1.  电子邮件的纯文本版本
2.  电子邮件的 html 版本

所以在这里你只需要做 #2 并添加 html 部分！

按照此处的示例... [https://docs.djangoproject.com/en/dev/topics/email/#sending-alternative-content-types](https://docs.djangoproject.com/en/dev/topics/email/#sending-alternative-content-types) ...您可能只需要在味精之前添加这样的一行.send()`

```
msg.attach_alternative(t.render(Context({})), "text/html") 
```

# sql - 映射两个数据库表的字段

> ID：13285983
> 
> 赞同：1
> 
> 时间：2012-11-08T09:19:45.887
> 
> 标签：sql, database, abap, sap-data-dictionary

场景是，我有 2 个数据库表 A 和 B。表 B 是表 A 的升级版本。（即它可能有不同的字段名称和一些额外的字段）。我需要比较这两个表以告知用户这些额外的字段并向他建议表之间的字段映射。

目前我正在考虑按顺序使用字段名称、数据元素和域等信息来比较它们。

有没有标准的方法来做到这一点？提前致谢。

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:21:28.453

没有标准工具可以做到这一点——你为什么要这样做呢？规范的方法是扩展原始表并在适当位置填充新字段。

# sql - 子文件夹中的累积文件数

> ID：13285985
> 
> 赞同：3
> 
> 时间：2012-11-08T09:19:51.083
> 
> 标签：sql, postgresql, common-table-expression, recursive-query

我确实有一个包含文件列表的表格。有id_folder、id_parrent_folder、size（文件大小）：

```
create table sample_data (
    id_folder bigint ,
    id_parrent_folder bigint,
    size bigint
); 
```

我想知道，每个文件夹（从给定文件夹开始）的每个子文件夹（包括当前文件夹）中有多少文件。鉴于下面发布的示例数据，我希望得到以下输出：

```
id_folder     files
100623           35
100624           14 
```

样本数据：

```
insert into sample_data values (100623,58091,60928);
insert into sample_data values (100623,58091,59904);
insert into sample_data values (100623,58091,54784);
insert into sample_data values (100623,58091,65024);
insert into sample_data values (100623,58091,25600);
insert into sample_data values (100623,58091,31744);
insert into sample_data values (100623,58091,27648);
insert into sample_data values (100623,58091,39424);
insert into sample_data values (100623,58091,30720);
insert into sample_data values (100623,58091,71168);
insert into sample_data values (100623,58091,68608);
insert into sample_data values (100623,58091,34304);
insert into sample_data values (100623,58091,46592);
insert into sample_data values (100623,58091,35328);
insert into sample_data values (100623,58091,29184);
insert into sample_data values (100623,58091,38912);
insert into sample_data values (100623,58091,38400);
insert into sample_data values (100623,58091,49152);
insert into sample_data values (100623,58091,14444);
insert into sample_data values (100623,58091,33792);
insert into sample_data values (100623,58091,14789);
insert into sample_data values (100624,100623,16873);
insert into sample_data values (100624,100623,32768);
insert into sample_data values (100624,100623,104920);
insert into sample_data values (100624,100623,105648);
insert into sample_data values (100624,100623,31744);
insert into sample_data values (100624,100623,16431);
insert into sample_data values (100624,100623,46592);
insert into sample_data values (100624,100623,28160);
insert into sample_data values (100624,100623,58650);
insert into sample_data values (100624,100623,162);
insert into sample_data values (100624,100623,162);
insert into sample_data values (100624,100623,162);
insert into sample_data values (100624,100623,162);
insert into sample_data values (100624,100623,162); 
```

我尝试使用 postgresql 中的示例（[postgresql docs](http://www.postgresql.org/docs/9.1/static/queries-with.html)），但它（显然）不能以这种方式工作。任何帮助表示赞赏。

- 编辑

我尝试了以下查询：

```
WITH RECURSIVE included_files(id_folder, parrent_folder, dist_last_change) AS (
SELECT 
    id_folder, 
    id_parrent_folder, 
    size
FROM 
    sample_data p 
WHERE 
    id_folder = 100623
UNION ALL
SELECT 
    p.id_folder, 
    p.id_parrent_folder, 
    p.size
FROM 
    included_files if, 
    sample_data p
WHERE 
    p.id_parrent_folder = if.id_folder
)
select * from included_files 
```

这是行不通的，因为每个孩子都有很多父母，因此子文件夹中的行会成倍增加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T10:32:24.253

使用您的示例数据，这将返回您想要的内容。我不是 100% 确定它会覆盖你的树中所有可能的异常：

```
with recursive folder_sizes as (
   select id_folder, id_parent_folder, count(*) as num_files
   from sample_data
   group by id_folder, id_parent_folder
), 
folder_tree as (

   select id_folder, id_parent_folder, num_files as total_files
   from folder_sizes
   where id_parent_folder = 100623

   union all 

   select c.id_folder, c.id_parent_folder, c.num_files + p.total_files as total_files
   from folder_sizes c
     join folder_tree p on p.id_parent_folder = c.id_folder

)
select id_folder, id_parent_folder, total_files
from folder_tree; 
```

这是一个 SQLFiddle 演示：[http ://sqlfiddle.com/#!12/bb942/2](http://sqlfiddle.com/#!12/bb942/2)

不过，这仅涵盖单个级别的层次结构（由于`id_parent_folder = 100623`条件）。为了涵盖任意数量的级别，我只能想到一个两步方法，首先收集所有子文件夹，然后再次向上遍历该树，以计算文件总数。

像这样的东西：

```
with recursive folder_sizes as (
   select id_folder, id_parent_folder, count(*) as num_files
   from sample_data
   group by id_folder, id_parent_folder
), 
folder_tree_down as (
   select id_folder, id_parent_folder, num_files, id_folder as root_folder, 1 as level
   from folder_sizes

   union all 

   select c.id_folder, c.id_parent_folder, c.num_files, p.root_folder, p.level + 1 as level
   from folder_sizes c
     join folder_tree_down p on p.id_folder = c.id_parent_folder
), 
folder_tree_up as (

   select id_folder, id_parent_folder, num_files as total_files, level
   from folder_tree_down
   where root_folder = 100623

   union all 

   select c.id_folder, c.id_parent_folder, c.num_files + p.total_files as total_files, p.level
   from folder_tree_down c
     join folder_tree_up p on p.id_parent_folder = c.id_folder

)
select id_folder, id_parent_folder, total_files
from folder_tree_up
where level > 1; 
```

这会产生与第一条语句相同的输出，但我*认为*它应该适用于无限数量的级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T18:50:39.047

非常好的问题要考虑，我赞成！

在我看来，需要考虑 2 个案例：

1.  多级路径和
2.  多子节点。

到目前为止，我提出了以下查询：

```
WITH RECURSIVE tree AS (
    SELECT id_folder id, array[id_folder] arr
      FROM sample_data sd
     WHERE NOT EXISTS (SELECT 1 FROM sample_data s
                        WHERE s.id_parrent_folder=sd.id_folder)
    UNION ALL
    SELECT sd.id_folder,t.arr||sd.id_folder
      FROM tree t
      JOIN sample_data sd ON sd.id_folder IN (
        SELECT id_parrent_folder FROM sample_data WHERE id_folder=t.id))
,ids AS (SELECT DISTINCT id, unnest(arr) ua FROM tree)
,agg AS (SELECT id_folder id,count(*) cnt FROM sample_data GROUP BY 1)
SELECT ids.id, sum(agg.cnt)
  FROM ids JOIN agg ON ids.ua=agg.id
 GROUP BY 1
 ORDER BY 1; 
```

我已将以下行添加到`sample_data`：

```
INSERT INTO sample_data VALUES (100625,100623,123);
INSERT INTO sample_data VALUES (100625,100623,456);
INSERT INTO sample_data VALUES (100625,100623,789);
INSERT INTO sample_data VALUES (100626,100625,1); 
```

这个查询虽然不是最优的，并且会随着行数的增长而变慢。

* * *

**全面测试**

为了模拟原始情况，我做了一个小python脚本，它扫描文件系统并将其存储到数据库中（因此延迟，我还不擅长python脚本）。

已创建以下表格：

```
CREATE TABLE fs_file(file_id bigserial, name text, type char(1), level int4);
CREATE TABLE fs_tree(file_id int8, parent_id int8, size int8); 
```

扫描我的 MBP 的整个文件系统需要 7.5 分钟，我在`fs_tree`表中有 870k 条目，这与原始任务非常相似。上传后，运行以下命令：

```
CREATE INDEX i_fs_tree_1 ON fs_tree(file_id);
CREATE INDEX i_fs_tree_2 ON fs_tree(parent_id);
VACUUM ANALYZE fs_file;
VACUUM ANALYZE fs_tree; 
```

我已经尝试对此数据运行我的第一个查询，并且不得不在 aprx 1 小时后将其杀死。改进的一个需要大约 2 分钟（在我的 MBP 上）才能在*整个*文件系统上完成这项工作。它来了：

```
WITH RECURSIVE descent AS (
    SELECT fs.file_id grp, fs.file_id, fs.size, 1 k, 0 AS lvl
      FROM fs_tree fs
     WHERE fs.parent_id = (SELECT file_id FROM fs_file WHERE name = '/')
    UNION ALL
    SELECT DISTINCT CASE WHEN k.k=0 THEN d.grp ELSE fs.file_id END AS grp,
           fs.file_id, fs.size, k.k, d.lvl+1
      FROM descent d
      JOIN fs_tree fs ON d.file_id=fs.parent_id
      CROSS JOIN generate_series(0,1) k(k))
/* the query */
SELECT grp, file_id, size, k, lvl
  FROM descent
 ORDER BY 1,2,3; 
```

Query 使用我的表名，但更改它应该不难。它将为`file_id`在`fs_tree`. 要获得所需的输出，您可以执行以下操作：

```
SELECT grp AS file_id, count(*), sum(size)
  FROM descent GROUP BY 1; 
```

一些注意事项：

1.  *只有*在没有重复项的情况下，查询才会起作用。我认为这是一个正确的方法，因为在一个目录中不可能有 2 个同名的条目；
2.  查询不关心树的深度或兄弟数量，尽管这确实会影响性能；
3.  对我来说，这是很好的体验，因为任务计划系统也需要类似的功能（我目前正在使用一个）；
4.  在考虑任务时，单个条目可以有多个父项（但不是其他情况）并且查询仍然有效；
5.  这个问题也可以通过其他方式解决，比如按升序遍历树，或者使用预先计算的值来避免最后的分组步骤，但这比一个简单的问题要大一些，所以我把它当作一个练习为你。

**建议**

为了让这个查询工作，你应该通过聚合来准备你的数据：

```
WITH RECURSIVE
fs_tree AS (
    SELECT id_folder file_id, id_parrent_folder parent_id,
           sum(size) AS size, count(*) AS cnt
      FROM sample_data GROUP BY 1,2)
,descent AS (
    SELECT fs.file_id grp, fs.file_id, fs.size, fs.cnt, 1 k, 0 AS lvl
      FROM fs_tree fs
     WHERE fs.parent_id = 58091
    UNION ALL
    SELECT DISTINCT CASE WHEN k.k=0 THEN d.grp ELSE fs.file_id END AS grp,
           fs.file_id, fs.size, fs.cnt, k.k, d.lvl+1
      FROM descent d
      JOIN fs_tree fs ON d.file_id=fs.parent_id
      CROSS JOIN generate_series(0,1) k(k))
/* the query */
SELECT grp file_id, sum(size) size, sum(cnt) cnt
  FROM descent
 GROUP BY 1
 ORDER BY 1,2,3; 
```

为了加快速度，您可以实现[物化视图](http://wiki.postgresql.org/wiki/Materialized_Views)并预先计算一些指标。

* * *

**样本数据**

这是一个小转储，将显示表中的数据：

```
INSERT INTO fs_file VALUES (1, '/Users/viy/prj/logs', 'D', 0),
    (2, 'jobs', 'D', 1),
    (3, 'pg_csv_load', 'F', 2),
    (4, 'pg_logs', 'F', 2),
    (5, 'logs.sql', 'F', 1),
    (6, 'logs.sql~', 'F', 1),
    (7, 'pgfouine-1.2.tar.gz', 'F', 1),
    (8, 'u.sql', 'F', 1),
    (9, 'u.sql~', 'F', 1);

INSERT INTO fs_tree VALUES (1, NULL, 0),
    (2, 1, 0),
    (3, 2, 936),
    (4, 2, 706),
    (5, 1, 4261),
    (6, 1, 4261),
    (7, 1, 793004),
    (8, 1, 491),
    (9, 1, 491); 
```

**请注意**，我稍微更新了创建语句。

这是我用来扫描文件系统的脚本：

```
#!/usr/bin/python

import os
import psycopg2
import sys
from stat import *

def walk_tree(full, parent, level, call_back):
    '''recursively descend the directory tree rooted at top,
       calling the callback function for each regular file'''

    if not os.access(full, os.R_OK):
        return

    for f in os.listdir(full):
        path = os.path.join(full, f)
        if os.path.islink(path):
            # It's a link, register and continue
            e = entry(f, "L", level)
            call_back(parent, e, 0)
            continue

        mode = os.stat(path).st_mode
        if S_ISDIR(mode):
            e = entry(f, "D", level)
            call_back(parent, e, 0)
            # It's a directory, recurse into it
            try:
                walk_tree(path, e, level+1, call_back)
            except OSError:
                pass

        elif S_ISREG(mode):
            # It's a file, call the callback function
            call_back(parent, entry(f, "F", level), os.stat(path).st_size)
        else:
            # It's unknown, just register
            e = entry(f, "U", level)
            call_back(parent, e, 0)

def register(parent, entry, size):
    db_cur.execute("INSERT INTO fs_tree VALUES (%s,%s,%s)",
                   (entry, parent, size))

def entry(name, type, level):
    db_cur.execute("""INSERT INTO fs_file(name,type, level)
                   VALUES (%s, %s, %s) RETURNING file_id""",
                   (name, type, level))
    return db_cur.fetchone()[0]

db_con=psycopg2.connect("dbname=postgres")
db_cur=db_con.cursor()

if len(sys.argv) != 2:
    raise SyntaxError("Root directory expected!")

if not S_ISDIR(os.stat(sys.argv[1]).st_mode):
    raise SyntaxError("A directory is wanted!")

e=entry(sys.argv[1], "D", 0)
register(None, e, 0)
walk_tree(sys.argv[1], e, 1, register)

db_con.commit()

db_cur.close()
db_con.close() 
```

此脚本适用于 Python 3.2，并基于[官方 python 文档](http://docs.python.org/3.2/library/stat.html)中的示例。

希望这可以为您澄清事情。

# php - facebook->getUser 使用 nginx 返回 null

> ID：13285993
> 
> 赞同：2
> 
> 时间：2012-11-08T09:20:12.147
> 
> 标签：php, facebook, sdk

我使用 nginx 作为反向代理：

```
location /facebook/
{

    proxy_pass  http://upload  #this is an nother server;
    proxy_redirect off;
} 
```

和我的代码：

```
$facebook = new Facebook(array(
 'appId'  => "xx", 
 'secret' => "xxxxxxxx", 
));

$user = $facebook->getUser();

if ($user){
    $user_profile = $facebook->api('/me');
    var_dump($user_profile);
}

else
{

    $url=$facebook->getLoginUrl( array( 'scope' => $req_perms) );
    //if I used nginx I must change redirect_uri 
    $url = str_replace('http%3A%2F%2Fupload%2F', 'http%3A%2F%2F'. $mydomian .'%2F',$url);
    header("Location:".$url);
} 
```

如果我不使用 nginx 作为反向代理，它工作正常，但如果我使用它，它会创建一个无限循环，因为`$facebook->getUser()`返回 0。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T09:47:20.317

您登录的 URL 必须与开发者应用程序[https://developers.facebook.com/apps/YOUR_APP_ID/summary](https://developers.facebook.com/apps/YOUR_APP_ID/summary)在“*选择您的应用程序如何与 Facebook 集成*”下设置的 URL 匹配，否则它将无法工作.

# rubymotion - 无法从模型获取 Bubblewrap 数据到控制器

> ID：13285996
> 
> 赞同：2
> 
> 时间：2012-11-08T09:20:23.903
> 
> 标签：rubymotion

我正在使用最新版本的 Rubymotion 构建一个 iOS 应用程序。我有一个表格视图，我想用来自远程 API 的数据填充。

我将控制器命名为：*ProjectsController*

我将模型命名为：*项目*

在控制器 viewDidLoad 中，我想从 API 获取项目列表。我在 Project 模型中创建了一个名为 load_projects 的静态方法。

```
def self.load_projects
 BW::HTTP.get("#{URL}projects?id=25&project_id=24&access_token=#{TOKEN}") do |response|
  result_data = BW::JSON.parse(response.body)
  output = result_data["projects"]
  output
 end
end 
```

这是我在控制器中的 viewDidLoad：

```
def viewDidLoad
 super
 @projects = Project.load_projects
 self.navigationItem.title = "Projekt"
end 
```

我在 viewDidLoad 中没有得到与在模型中相同的响应。在模型方法中，我得到了正确的响应数据，但在 viewDidLoad 中，我得到了一个返回的“元”对象。一个 BubbleWrap::HTTP::Query 对象。我究竟做错了什么？

**更新一**

我尝试像这样使用下面的第一个答案，但出现错误：

```
def tableView(tableView, cellForRowAtIndexPath:indexPath)
    cellIdentifier = self.class.name
    cell = tableView.dequeueReusableCellWithIdentifier(cellIdentifier) || begin
      cell = UITableViewCell.alloc.initWithStyle(UITableViewCellStyleDefault, reuseIdentifier:cellIdentifier)
      cell
    end

    project = @projects[indexPath.row]['project']['title']
    cell.textLabel.text = project
    cell
  end 
```

错误是：

```
projects_controller.rb:32:in `tableView:cellForRowAtIndexPath:': undefined method `[]' for nil:NilClass (NoMethodError)
2012-11-09 01:08:16.913 companyapp[44165:f803] *** Terminating app due to uncaught exception 'NoMethodError', reason: 'projects_controller.rb:32:in `tableView:cellForRowAtIndexPath:': undefined method `[]' for nil:NilClass (NoMethodError) 
```

我可以在这里显示返回的数据而不会出错：

```
def load_data(data)
    @projects ||= data
    p @projects[0]['project']['title']
  end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:27:49.807

哈，我刚刚遇到了完全相同的问题。

我得到的解决方案如下：

BW::HTTP 方法是异步的，因此您的 self.load_projects 方法将返回一个请求对象，而不是您想要的 JSON 数据。

本质上 BW:HTTP.get 立即完成执行，而 self.load_projects 方法返回不正确的数据。

向我建议的解决方案如下：

更改您的 load_projects 方法，使其接受视图控制器委托：

```
def self.load_projects(delegate)
  BW::HTTP.get("#{URL}projects?id=25&project_id=24&access_token=#{TOKEN}") do |response|
    result_data = BW::JSON.parse(response.body)
    delegate.load_data(result_data)
    delegate.view.reloadData
  end
end 
```

如果要导入表视图控制器，请不要忘记重新加载数据。

请注意，委托正在调用 load_data 方法，因此请确保您的视图控制器实现：

```
class ProjectsController < UIViewController

  #...

  Projects.load_projects(self)

  #...

  def load_data(data)
    @projects ||= data
  end
  #...
end 
```

然后用@projects 做任何你想做的事