# StackOverflow 问答 15282000-15282999

# r - 聚合中get和mget的不同行为（R）

> ID：15282000
> 
> 赞同：1
> 
> 时间：2013-03-07T21:21:57.987
> 
> 标签：r, aggregate

我有一个列名的字符数组（`chr [1:5]`命名`keynn`），我想对其执行聚合。数组的所有元素都是数据框的有效列名 ( `mydata`)，但它是字符串而不是变量（“YEAR”而不是`mydata$YEAR`）。

我尝试使用`get()`从名称中返回列，它适用于第一个元素，如下所示：

```
attach(mydata)
aggregate(mydata, by=list(get(keynn, .GlobalEnv)), FUN=length) 
```

我尝试使用 mget()，因为我的数组作为多个元素，如下所示：

```
attach(mydata)
aggregate(mydata, by=list(mget(keynn, .GlobalEnv)), FUN=length) 
```

但我收到一个错误：

```
value for 'YEAR' not found. 
```

如何获得相当于 get 的多个列的聚合依据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T00:58:43.123

我建议`attach`一般不要使用

如果您只是想从中获取列，`mydata`则可以使用`[`索引列表

```
aggregate(mydata, by = mydata[keynn], FUN = length) 
```

应该工作——并且很清楚你想从中得到`keynn`什么`mydata`

使用的问题`attach`是它添加`mydata`到搜索路径（不复制到全局环境）

尝试

```
 attach(mydata)
 mget(keynn, .GlobalEnv) 
```

所以如果你要使用`mget`and `attach`，你需要

```
 mget(keynn, .GlobalEnv, inherits = TRUE) 
```

这样它就不会只在全球环境中搜索。

但这比付出更多的努力（恕我直言）

有效的原因`get`是`inherits = TRUE`默认情况下。因此，您可以使用`lapply(keynn, get)`if `mydata`were attached ，但同样丑陋且不清楚它在做什么。

* * *

另一种方法是使用`data.table`，它将评估相关`by`数据表中的参数

```
 library(data.table)

 DT <- data.table(mydata)

 DT[, {what you want to aggregate} , by =keynn] 
```

请注意，keynn 不需要是名称的字符向量，它可以是名称列表或名称函数的命名列表等

# c - 左操作数必须是左值，C编程

> ID：15282003
> 
> 赞同：2
> 
> 时间：2013-03-07T21:22:07.693
> 
> 标签：c

我试图了解链接列表是如何工作的；在更改导师的示例代码时，我得到“左操作数必须是左值”错误......这是我的代码。任何帮助表示赞赏:)

```
struct node
{
    char name[20];
    struct node *next;
};

/*Function to allocate memory and initialize node - returns pointer to node*/
struct node*mknode(char *str)
{
    struct node *np;

    np = (struct node*)malloc(sizeof(struct node));

    if(np)
    {
        np->name = *str;
        np->next = NULL; /*sets the 'next' pointer to last list item to NULL*/
    }

    return np;

}

int main(void)
{

int i,menu,k=1,number;
char name[20];
char *str = name;
struct node* n;
struct node *head=NULL;

printf("Link Lists\n    1-Enter Data into lists\n   2-Display All List Items\n  3-Quit Program :(\n");

    do 
    {
        printf("\nPlease choose an option:  ");
        scanf("%d",&menu);

        switch (menu)
        {
            case 1:
                printf("\nPlease Enter A Number:");
                scanf("%d",&name);

                n=mknode(str); /*create new node with i as data*/

                append_node(&head,n); /*add new node to end of list*/
            break; 
```

这是我得到错误的地方

```
np->name = *str; 
```

将结构数据类型从整数更改为字符后

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:24:15.030

在 C 中，数组不是可修改的左值，即**不能分配给数组**。如果我正确理解您要执行的操作，您可以尝试：

```
strcpy(np->name, str); 
```

* * *

如果`str`不是受信任的字符串（如果您之前没有验证它），您可以使用`memcpy`而不是`strcpy`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:33:31.490

此语句有两个错误

```
np->name = *str; 
```

first`name`被声明为一个数组，你不能通过赋值来改变数组的位置。相反，您必须将字符串的内容复制到`name`使用`strcpy`

```
strcpy_s( np->name, sizeof(name), str ); 
```

第二个错误是您`str`在分配中取消引用字符串，当您取消引用字符串时，`*str`您只是在复制字符串的第一个字符，就像在写`str[0]`

您也可以将 name 声明为 char 指针，但随后需要分配并稍后释放字符串：

```
typedef struct node {
  char* name;
  struct node* next;
} node;
...

np->name = strdup(str); /* allocates enough space for string and copies it. */ 
```

# html - 创建顶部菜单项和右侧登录菜单

> ID：15282007
> 
> 赞同：0
> 
> 时间：2013-03-07T21:22:22.787
> 
> 标签：html, css

创建顶部菜单项和登录文本向右对齐的最佳方法是什么？

**CSS**

```
body {
    margin: 0px;
}
#header {
    height: 25px;
    width: 100%;
    background-color: rgb(34, 34, 34);
    color: #fff;
    font-family:'segoe ui', arial, helvetica, sans-serif;
    font-size: 13px;
    padding: 10px;
}
#header ol {
    display: block;
    list-style: none;
    margin: 0;
    padding: 0;
}
#header li {
    position: relative;
    display: -moz-inline-box;
    display: inline-block;
    line-height: 27px;
    padding: 0;
    vertical-align: top;
    margin-right: 10px;
}
#login_details {
    float: right;
    display: inline-block;
} 
```

**HTML**

```
<div id="header">

<ol>
    <li>Page 1</li>
    <li>Page 2</li>
    <li>Page 3</li>
    <li>Page 4</li>
</ol>

<div id="login_details">
dd
</div>

</div> 
```

我目前正在尝试执行此操作，但**login_details**中的文本未正确对齐到右侧。

[http://jsfiddle.net/KqqyY/](http://jsfiddle.net/KqqyY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:24:29.337

使用 CSS`text-align`属性并制作`ol` `float:left`. 我还添加了更多内容：

```
#login_details {
    float: right;
    display: inline-block;
    text-align: right;
}

#header ol {
    display: block;
    list-style: none;
    margin: 0;
    padding: 0;
    float: left;
}

#header {
    height: 25px;
    // Get rid of the 100% width to make it fit on screen
    background-color: rgb(34, 34, 34);
    color: #fff;
    font-family:'segoe ui', arial, helvetica, sans-serif;
    font-size: 13px;
    padding: 10px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:25:26.560

将您的`login_details`div 放在列表之前：

```
<div id="header">
    <div id="login_details">dd</div>
    <ol>
        <li>Page 1</li>
        <li>Page 2</li>
        <li>Page 3</li>
        <li>Page 4</li>
    </ol>
</div> 
```

并更改您的 CSS 以包含`line-height: 27px;`您的 login_details div：

```
#login_details {
    float: right;
    display: inline-block;
    line-height: 27px;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/KqqyY/1/)**

由于您将登录详细信息框浮动到右侧，因此它需要位于列表之前才能位于同一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:29:10.180

你的`#header`容器有一个 100%，然后你添加填充使它增长大于 100%，你可以解决这个问题`box-sizing:border-box`

```
#header {
    height:45px; /* The original 25px plus the paddings from the top and bottom */
    -webkit-box-sizing:border-box;
    -moz-box-sizing:border-box;
    box-sizing:border-box;
} 
```

**看到这个 JSFiddle：http: [//jsfiddle.net/KqqyY/2/](http://jsfiddle.net/KqqyY/2/)**

# ruby-on-rails - ActiveRecord 不会使用 STI 构建正确的类

> ID：15282009
> 
> 赞同：0
> 
> 时间：2013-03-07T21:22:24.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, sti

我在我的应用程序中使用单表继承，并且遇到了从祖先构建继承用户的问题。例如，使用以下设置：

```
class School < ActiveRecord::Base

  has_many :users

end

class User < ActiveRecord::Base

  attr_accessible :type #etc...

  belongs_to :school

end

Class Instructor < User

   attr_accessible :terms_of_service
   validates :terms_of_service, :acceptance => true

end

Class Student < User

end 
```

如何从**School**`instructor`的实例构建一个或记录？尝试类似的事情只给我一个新的**用户**实例，我将无法访问讲师特定的字段，例如在生成特定于讲师的表格时导致错误，从控制台构建会给我一个批量分配错误（因为它是尝试创建**用户**记录而不是指定的**讲师**记录）。我举了**学校的例子**`student`**`School.first.instructors.build(....)`**`terms_of_service`******，但是我想从 User 表继承一些其他关联，因此我不必重复数据库中的代码或字段。我是否遇到此问题是因为无法在 STI 设置中共享关联？**********

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:26:13.160

您应该明确指定讲师

```
class School < ActiveRecord::Base

  has_many :users
  has_many :instructors,:class_name => 'Instructor', :foreign_key => 'user_id'

end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:43:12.217

还有什么：

```
class School < ActiveRecord::Base
  has_many :users
  has_many :instructors
end

class Instructor < User 
  attr_accessible :terms_of_service # let it be at the first place. :)

  validates :terms_of_service, :acceptance => true
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:43:49.880

好的，问题的一部分似乎源于我的**学校**模型中有旧的`users`关联。删除它并为学生和教师单独添加关联是有效的。

 **更新**School.rb**：

```
class School < ActiveRecord::Base

  #removed:
  #has_many :users this line was causing problems

  #added
  has_many :instructors
  has_many :students

end 
```********

# javascript - express.index 发送 json 对象的问题

> ID：15282013
> 
> 赞同：0
> 
> 时间：2013-03-07T21:22:28.197
> 
> 标签：javascript, arrays, json, node.js, express

我正在使用 express 来做一个非常简单的页面。我的`index.js`样子是这样的：

```
exports.index = function(req, res){
  res.render(
    'index', 
        { 
            title: 'Expressssss',
            Tin: varTin,
            Tout : varTout,
            Hin : varHin,
            Tout_array : { 'date': 'Thu Mar 07 2013 22:00:04 GMT+0100 (CET)', 'value': '10062' }
        }
    );
}; 
```

在文件上，`index.ejs`我可以使用这些值，例如`<%= Tin %>`......这很好用......

问题是这`data = <%= Tout_array %>;`似乎效果不佳。使用 chromes 控制台，它在这一行出现错误。解析后的html代码如下：

```
data = [object Object]; 
```

此时的错误是

```
 Uncaught SyntaxError: Unexpected identifier 
```

我究竟做错了什么？为什么解析任何其他变量都很好，但不是这个嵌套的 json 结构？我正在使用它，因为我想发送一个更大的数组。

比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:31:04.567

如果您尝试从 EJS 模板生成客户端 Javascript，我认为您想要这样：

```
data = <%- JSON.stringify(Tout_array) %>; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:31:14.920

尝试这个：

```
<%= JSON.stringify(Tout_array) %> 
```

# parsing - 通用解析错误

> ID：15282022
> 
> 赞同：1
> 
> 时间：2013-03-07T21:23:20.463
> 
> 标签：parsing, syntax-error, runtime-error, 4d-database

在 4D 应用程序中，我有以下代码行：

```
Begin SQL
UPDATE Keys
   SET Desc = :$desc,
       KeyStamp = :$key_stamp
 WHERE KeyTitle = :$key_title
End SQL 
```

尝试运行代码时，显示以下错误：

> 通用解析错误。在以下子字符串区间内或附近解析失败 - ( 16, 23 ) - ... SET Desc = ...

有人看到代码的问题吗？`Keys`不是关键字或任何东西，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:38:26.187

似乎有人忘记了这`Desc`是“降序”的关键字。解决方案是重命名该列并更新对该列的所有引用。否则，无法在 SQL 中引用该列。

# html - Div 内部的垂直居中链接

> ID：15282025
> 
> 赞同：0
> 
> 时间：2013-03-07T21:23:35.003
> 
> 标签：html, css, vertical-alignment

[http://www.fccorp.us/index.php](http://www.fccorp.us/index.php)

左侧的垂直列是我的站点菜单系统。该列是一个高度为 100% 的 div，不同的细节都覆盖在它上面。

这些按钮是带有空白按钮作为背景的 DIV，上面有链接。我有两个不同大小的按钮，大的一个 60 像素高，一个小的 30 像素。无论按钮的 DIV 高度如何，使用 CSS 可以让链接垂直居中吗？

我看过这里并使用了一些 CSS 网站和 Android 应用程序。这里的网站建议我不能，但我不明白为什么 CSS 组不会创建垂直居中功能，因为它似乎非常需要。

我只是错过了一些东西，还是我真的想得到一些 CSS 不可用的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:26:35.420

根据您的站点，您可以使用它`line-height`来调整文本的垂直位置。

尝试将此应用于 30px 高的链接：

```
line-height: 30px; 
```

这对于 60px 高：

```
line-height: 60px; 
```

此外，您不应该在`<div>`标签内嵌套`<a>`标签。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:37:41.543

用这个：

```
.menubuttonthick{line-height:60px;}
.menubuttonthin{line-height:30px;} 
```

这将使您的所有链接居中。

另一方面，目前您具有以下结构：

```
<a href="#">
  <div>text</div>
</a> 
```

那是无效的 HTML。我不是那种“HTML 必须始终有效”的人，但是当您可以轻松修复它时，我认为让它有效不会有什么坏处。您应该使用以下内容：

```
<div>
  <a href="#">text</a>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:35:34.613

将此添加到您的 CSS 中。无论按钮的高度如何，它都会起作用：

```
.menubar a div {
    display: table-cell;
    vertical-align: middle;
} 
```

# php - Php MySql PDO BindParam 偶尔工作

> ID：15282028
> 
> 赞同：1
> 
> 时间：2013-03-07T21:23:47.137
> 
> 标签：php, mysql, pdo, sqlbindparameter

到目前为止，我有以下代码，它基于传递给页面的 $_GET 术语进行了 2 个查询。

查询 1) 根据从 $_GET -> Works 传递的表名检索列名。

查询 2) 从该表中检索数据 -> 不起作用。

第二个查询是这样的：

```
$table_data = db_adminQuery('SELECT * FROM :tbl_name', array(':tbl_name' => $p )); 
```

当我将查询更改为：

```
$table_data = db_adminQuery('SELECT * FROM events', array()); 
```

它有效，但我不明白为什么它一开始就不起作用。如果我遗漏了什么或有一些愚蠢的错误，请告诉我，因为我不知道这有什么问题。

这是完整的来源：

```
 if(isset($_GET['page']))
    {
        $pages = array('events','news','ads','slider');
        $page = trim($_GET['page']);

        if(in_array($page, $pages))
        {
            include 'db.php';
            administer($page);
        }

    }

    function administer($p)
    {

        /*
        *
        *   TABLE COLUMN NAMES & TYPES
        *
        */

        $columns_tmp = db_adminQuery('SELECT * FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = \'evented\' AND TABLE_Name = :table_name', array(':table_name' => $p));

        if(!empty($columns_tmp))
        {
            $columns = array();
            foreach ($columns_tmp as $key => $value) 
            {   
                array_push($columns, array('name' => $value['COLUMN_NAME'], 'type' => $value['DATA_TYPE']));
            }
        }

        /*
        *
        *   TABLE DATA
        *
        */

        $table_data = db_adminQuery('SELECT * FROM :tbl_name', array(':tbl_name' => $p ));
        print_r($table_data);

        $table = '<table cellpadding="0" cellspacing ="0">'.PHP_EOL;
        $table .= '<tr>'.PHP_EOL;

        foreach ($columns as $key => $value) 
        {   
            $table .= '<th style="padding:5px;">'.$value['name'].'</th>';
        }

        $table .= '</tr>'.PHP_EOL;

        foreach ($table_data as $data_key => $data_value) 
        {
            $table .= '<tr>'.PHP_EOL;
            //$table .= '<td>'.$data_value.'</td>';
            $table .= '</tr>'.PHP_EOL;
        }

        $table .= '</table>';

        echo $table;    
    }

    function db_adminQuery($query, $params = array(), $return = true)
    {
        global $db;

        if($stmt = $db->prepare($query))
        {
            // PARAMETERS
            if(!empty($params))
            {
                foreach($params as $key => $value) 
                {
                    $stmt->bindParam($key, $value); 
                    echo $key.' - '.$value.'<br>';      
                }
            }

            $stmt->execute();

            if($return == true)
            {
                $result = $stmt->fetchAll(PDO::FETCH_ASSOC);

                return $result;
            }
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:21:27.317

在 SQL 中，需要在 prepare() 查询之前修复所有表名和所有列名以及其他 SQL 语法。否则解析无法验证您命名的表是否确实存在，并且您有足够的权限对​​其进行操作等等。查询优化器可能会决定它当时使用哪些索引（尽管我相信 MySQL 的情况，优化器在执行（）时间之前不会这样做）。

所以不能参数化表名、列名、表达式、SQL关键字等。

仅在通常使用常量值的地方使用查询参数，例如带引号的字符串文字、带引号的日期文字或数字常量。

要将表名安全地插入 SQL 字符串，请确保在插入之前将该值**列入白名单。**也就是说，将表名输入与代码中的已知表列表进行匹配。要么对其进行硬编码，要么将其放入配置文件中，要么查询数据库实例以发现存在哪些表。

如果用户输入的字符串与已知存在的内容不匹配，则他们一定犯了错误，否则他们正试图实施 SQL 注入。无论哪种方式，都不要使用他们的输入。要么使用一些默认的表名，要么给他们一个错误，让他们再试一次。

# python - 带有 Python/Django 错误的 SUD 中的 Wsdl

> ID：15282029
> 
> 赞同：1
> 
> 时间：2013-03-07T21:23:51.053
> 
> 标签：python, wsdl, suds

因此，我正在使用 python 中的应用程序的 url 进行基本的 Web 服务调用。我只是在测试连接以查看 Web 服务是否响应。我的代码如下：

```
from suds.client import Client

client = Client("File:///C:/Users/zsssss/Documents/TrannsTubalService.wsdl")

print client 
```

但是，我不断收到如下错误：

```
pydev debugger: starting
Traceback (most recent call last):
File "C:\Users\zsssss\AppData\Local\Aptana Studio 3\plugins\org.python.pydev_2.7.0.2013012902\pysrc\pydevd.py", line 1397, in <module>
debugger.run(setup['file'], None, None)
File "C:\Users\zsssss\AppData\Local\Aptana Studio 3\plugins\org.python.pydev_2.7.0.2013012902\pysrc\pydevd.py", line 1090, in run
pydev_imports.execfile(file, globals, locals) #execute the script
File "C:\Users\zsssss\My Documents\Aptana Studio 3 Workspace\sudsclient\src\transtube.py", line 7, in <module>
client = Client("File:///C:/Users/zn483d/Documents/TrannsTubalService.wsdl")
File "C:\Python27\lib\site-packages\suds\client.py", line 112, in __init__
self.wsdl = reader.open(url)
File "C:\Python27\lib\site-packages\suds\reader.py", line 152, in open
d = self.fn(url, self.options)
File "C:\Python27\lib\site-packages\suds\wsdl.py", line 159, in __init__
self.build_schema()
File "C:\Python27\lib\site-packages\suds\wsdl.py", line 220, in build_schema
self.schema = container.load(self.options)
File "C:\Python27\lib\site-packages\suds\xsd\schema.py", line 93, in load
child.open_imports(options)
File "C:\Python27\lib\site-packages\suds\xsd\schema.py", line 305, in open_imports
imported = imp.open(options)
File "C:\Python27\lib\site-packages\suds\xsd\sxbasic.py", line 542, in open
result = self.download(options)
File "C:\Python27\lib\site-packages\suds\xsd\sxbasic.py", line 560, in download
d = reader.open(url)
File "C:\Python27\lib\site-packages\suds\reader.py", line 79, in open
d = self.download(url)
File "C:\Python27\lib\site-packages\suds\reader.py", line 95, in download
fp = self.options.transport.open(Request(url))
File "C:\Python27\lib\site-packages\suds\transport\https.py", line 60, in open
return  HttpTransport.open(self, request)
File "C:\Python27\lib\site-packages\suds\transport\http.py", line 62, in open
return self.u2open(u2request)
File "C:\Python27\lib\site-packages\suds\transport\http.py", line 118, in u2open
return url.open(u2request, timeout=tm)
File "C:\Python27\Lib\urllib2.py", line 400, in open
response = self._open(req, data)
File "C:\Python27\Lib\urllib2.py", line 418, in _open
'_open', req)
File "C:\Python27\Lib\urllib2.py", line 378, in _call_chain
result = func(*args)
File "C:\Python27\Lib\urllib2.py", line 1310, in file_open
return self.open_local_file(req)
File "C:\Python27\Lib\urllib2.py", line 1350, in open_local_file
raise URLError(msg)
urllib2.URLError: <urlopen error [Error 2] The system cannot find the file specified: u'C:\\Users\\zsssss\\Documents\\TrannsTubalResponse.xsd'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-19T09:10:22.107

有点老问题，但有同样的问题。为此，我使用了 pathlib：

```
import pathlib
filepath = '/var/www/yourwsdlfile.extension'
fileuri = pathlib.Path(filepath).as_uri()
client = Client(url=fileuri) 
```

在 Ubuntu 上使用 suds-jurko 0.6 为我工作。我注意到我的 fileuri 最终成为 'file:///var/www/secureitemdelivery.asmx'

# .net - 无法使用 EntityFramework ObjectContext.CreateQuery 查询 DB2 当前日期

> ID：15282033
> 
> 赞同：0
> 
> 时间：2013-03-07T21:24:02.963
> 
> 标签：.net, entity-framework, db2

我正在使用 DB2、Entity Framework 和 C# 4.0 一起工作得很好。我的问题是尝试使用下一个代码获取系统日期时...

```
var query = dbcontext.CreateQuery<TResult>("SELECT current date FROM sysibm.sysdummy1;");
var result = query.AsEnumerable().First(); 
```

查询在 DB2 中执行正常，但 EF 产生异常并显示消息“查询 sintax 无效。靠近标识符 'date' ...”。

好像EF自己做sql解析，但不使用DB2语法左右。

那么..有没有办法强制EF将SQL“按原样”传递给BD？

或者也许在 DB2 中使用函数或其他变量来不使用那种奇怪的语法（“当前日期”，在其他 SQL 方言中，它实际上看起来像一个列名后跟一个别名）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:26:49.780

我假设您正在使用 ObjectContext 和 DbContext，尽管有 dbContext 名称。ObjectContext.CreateQuery 接受 ESQL 查询，而不是数据库特定的 SQL 查询。如果要发送特定于数据库的 SQL 查询，则需要使用[ExecuteStoreQuery](http://msdn.microsoft.com/en-us/library/dd487208.aspx)

# c++ - 使用 libcurl 进行多部分下载

> ID：15282035
> 
> 赞同：0
> 
> 时间：2013-03-07T21:24:08.387
> 
> 标签：c++, download, libcurl, multipart

我希望能够分解文件并分段下载。根据我的阅读，我应该能够使用 libcurl 中的 curlopt_range 来完成此操作。不幸的是，我看到的所有示例代码都是针对 php 的，我对此一无所知。我的一个或多个问题是 1\. 是否可以使用 libcurl 部分下载文件 2\. 我将如何保存这两个单独的部分，因为我认为我必须在它们下载后将它们组合起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:43:23.190

是的，可以使用[curl_easy_setopt](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)的[CURLOPT_RANGE](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTRANGE)选项指定要下载的远程资源的哪些部分。您只需进行两次（或更多）下载，每次下载自己单独的部分。完成后，您将各个部分合并为一个完整的部分。

# telerik - Telerik UploadedFiles.SaveAs 不覆盖

> ID：15282036
> 
> 赞同：0
> 
> 时间：2013-03-07T21:24:09.350
> 
> 标签：telerik

我一直在试图弄清楚为什么我的 Telerik 代码不起作用。我正在尝试覆盖当前存储在该指定路径但它没有覆盖的文档。

这是代码

```
if(ulDocument.UploadedFiles.Count > 0){
    string targetFolder = Server.MapPath("~\Documents\PDF\");
    LogInfo(ulDocument.UploadedFiles[0].FileName);
    ulDocument.UploadedFiles[0].SaveAs(Path.Combine(targetFolder, String.Format("{0}{1}", shi.Id, ulDocument.UploadedFiles[0].GetExtension())), true);        
} 
```

# ember.js - Ember.CollectionView 和 Ember.ContainerView 的区别

> ID：15282037
> 
> 赞同：4
> 
> 时间：2013-03-07T21:24:09.310
> 
> 标签：ember.js

我已经浏览了源代码注释和[emberjs api](http://emberjs.com/api/)，但我并不觉得我对这两种类型的 Ember.View 之间的差异有一个非常清晰的概念。如果有人可以描述使用 Ember.ContainerView 而不是 Ember.CollectionView 的情况，反之亦然，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T23:55:49.700

## CollectionView = 一遍又一遍的同一个子视图

当您想为数组中的每个元素都拥有一个视图对象时，这很有用。例如，如果有一个帖子列表并希望为每个帖子显示一个 PostSummary 视图。典型的 ember 应用程序将通过使用`{{each}}`已使用 CollectionView 实现的 handlebars 助手来完成此操作。

## ContainerView = 不同的子视图

Ember.ContainerView 当您需要以编程方式管理任意子视图列表时。CollectionView 扩展了 ContainerView。作为替代方案，您可以使用把手助手来使用助手周围的条件插入子模板`{{view}}`。

# android - 提高 GPS 频率和精度

> ID：15282045
> 
> 赞同：2
> 
> 时间：2013-03-07T21:24:39.967
> 
> 标签：android, gps

我正在探索将 GPS 用于 VR 游戏的可能性。在我当前的测试版本中，频率和准确度都非常低。

在清单中我有

```
<uses-permission android:name="android.permission.LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

我实例位置管理器喜欢

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 
           0, 0, this); 
```

然后我使用 distanceBetween 函数来获取方位和距离

```
public void onLocationChanged(Location location) {
    if(lastLocation != null) {          
        Location.distanceBetween(lastLocation.getLatitude(), lastLocation.getLongitude(), location.getLatitude(), location.getLongitude(), distanceBetween);
        newGpsDataToSend = true;

        if(debug)
            debugListener.debugGPS(distanceBetween);

        releaseSendThread();
    }

    lastLocation = location;        
} 
```

频率低于 1hz（5-10hz 应该是可能的吧？）并且方位和距离非常跳跃。

我在代码中做错了吗？我不关心电池消耗等，我只想从手机中获得最快最可靠的数据。

完整源码 [https://github.com/AndersMalmgren/FreePIE/blob/VRWalk/Lib/Android/FreePIE%20Android%20IMU/src/com/freepie/android/imu/UdpSenderTask.java#L120](https://github.com/AndersMalmgren/FreePIE/blob/VRWalk/Lib/Android/FreePIE%20Android%20IMU/src/com/freepie/android/imu/UdpSenderTask.java#L120)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T13:20:34.557

对于高采样频率（将 1 Hz 计为 GPS 采样的高频率），您将获得 GPS 读数，其中位置之间的距离小于 GPS 精度。因此，正如观察到的那样，方位角和距离是跳跃的。为了获得更好的方位，降低采样频率或通过过滤或计算平均值来处理数据。

例如，对于飞行记录应用程序，我大约每 2 到 5 秒采样一次，并且我正在计算最后 5 个高度读数的平均值来计算垂直速度。

# python - 设置 scikit-learn - 导入时出现 numpy 错误

> ID：15282046
> 
> 赞同：2
> 
> 时间：2013-03-07T21:24:48.383
> 
> 标签：python, installation, pip, scikit-learn

我正在尝试设置 scikit-learn，但是在安装了 numpy 和 scikit-learn（使用 pip）之后，我在尝试 imort sklearn 时得到了这样的结果：

```
import sklearn
RuntimeError: module compiled against API version 8 but this version of numpy is 7
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/usr/local/lib/python2.7/site-packages/sklearn/__init__.py", line 32, in <module>
  from .base import clone
File "/usr/local/lib/python2.7/site-packages/sklearn/base.py", line 10, in <module>
  from scipy import sparse
File "/Library/Python/2.7/site-packages/scipy-0.13.0.dev_c31f167_20130304-py2.7-macosx-10.8-intel.egg/scipy/sparse/__init__.py", line 182, in <module>
from .csr import *
File "/Library/Python/2.7/site-packages/scipy-0.13.0.dev_c31f167_20130304-py2.7-macosx-10.8-intel.egg/scipy/sparse/csr.py", line 15, in <module>
from .sparsetools import csr_tocsc, csr_tobsr, csr_count_blocks, \
File "/Library/Python/2.7/site-packages/scipy-0.13.0.dev_c31f167_20130304-py2.7-macosx-10.8-intel.egg/scipy/sparse/sparsetools/__init__.py", line 5, in <module>
from .csr import *
File "/Library/Python/2.7/site-packages/scipy-0.13.0.dev_c31f167_20130304-py2.7-macosx-10.8-intel.egg/scipy/sparse/sparsetools/csr.py", line 26, in <module>
_csr = swig_import_helper()
File "/Library/Python/2.7/site-packages/scipy-0.13.0.dev_c31f167_20130304-py2.7-macosx-10.8-intel.egg/scipy/sparse/sparsetools/csr.py", line 22, in swig_import_helper
_mod = imp.load_module('_csr', fp, pathname, description)
ImportError: numpy.core.multiarray failed to import 
```

试图重新安装东西但没有成功

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:57:20.503

在 github 上查看[这个问题](https://github.com/jsalvatier/scikits.bvp_solver/issues/2)，听起来它可能需要特定版本的 numpy - 他们使用 1.7.0b2。

# bash - 删除名称中带有双引号的文件

> ID：15282051
> 
> 赞同：0
> 
> 时间：2013-03-07T21:25:03.897
> 
> 标签：bash

我正在尝试删除目录中的文件。一些文件的名称有双引号，而另一些则没有。这些文件的一个示例是：
`"DDD344".csv`
`D2DW.csv`
这两个文件都位于目录中的子目录中`YM`。

对于`find`这些文件并删除它们，我`find`这样调用：
`find YM -name "*.csv" -print | xargs rm`

上面的命令会导致很多`No such file or directory`错误。
我尝试通过`sed`以下方式使用：

`find yum/yum_hyd -name "\"*\".csv" | sed 's/"/\"/g' | xargs rm`
但无济于事。如何删除文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T23:25:16.887

问题是您正在使用`xargs`. `xargs`是一个非常糟糕的程序，除了与非标准`-0`选项一起使用外，绝不应该用于任何事情。即便如此，我想不出在这种情况下这样做有什么好处。您应该直接从 find 执行 rm。

```
find . -type f -name '"*".csv' -exec rm -f -- {} + 
```

将工作。如果你有 GNU find，你也可以使用`-delete`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:32:44.557

试试这个：

```
find yum/yum_hyd -name "\"*\".csv" |sed 's/"/\\"/g'|xargs rm 
```

解释：

你想`"`用`\"`. 但如果你`\"`直接写，sed 认为它是 plain `"`，你必须转义反斜杠。所以`\\"`有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:34:46.000

直到最近我才知道这个选项，但您可以通过以下方式列出文件的 inode：

> $ ls –il

在输出中，您将看到第一列包含 inode 值。然后，您可以将该值用于`find -inum`有问题的文件并将其删除。输出

2616366 -rw-r--r-- 1 等等

```
$ find . -inum 2616366 -exec rm -f {} \; 
```

这将删除具有该特定 inum 的文件。

作为测试，您可以运行以下命令来定位您的文件。

```
ls -il \"* | awk '{print $1}' | xargs -n1 -I {} find -inum {} 
```

满意后，用“rm”命令替换该命令的最后部分（“find -inum {}”）。

这也类似于[SuperUser上的问题](https://superuser.com/questions/143125/remove-a-file-on-linux-using-the-inode-number)

# php - PHP Mysql更新集替换完全匹配

> ID：15282055
> 
> 赞同：1
> 
> 时间：2013-03-07T21:25:23.693
> 
> 标签：php, mysql, replace, preg-replace, match

我需要帮助替换数据库中的确切数字。

我的桌子看起来像这样..

```
ID NAME    IMAGES
-------------------------------
1  person1  1,2,3...101,102,103 
```

当我使用

```
mysql_query("UPDATE table SET images = REPLACE(images, '3,', '') WHERE id = '1'"); 
```

它从所有以 3 结尾的数字中删除所有 3..

```
13, = 1
23, = 2
113, = 11 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:30:28.680

正如已经提到的，正确的解决方案是规范化数据。但是，如果您被这个表结构*卡住了*，您仍然可以使用 3 个条件执行单个`UPDATE`语句`CASE`来匹配开头、中间或结尾的数字。

要将其从列表的开头或结尾删除，您可以使用 a `SUBSTR()`，并继续使用`REPLACE()`将其从列表的中间删除。

```
UPDATE
  table
SET images = 
  CASE
    /* if 3 is in the leftmost position in the list, remove first 2 chars... */
    WHEN LEFT(images, 2) = '3,' THEN SUBSTR(images, 3)
    /* if 3 is in the rightmost position in the list, remove last 2 chars... */
    WHEN RIGHT(images, 2) = ',3' THEN SUBSTR(images, 1, LENGTH(images) - 2)
    /* Otherwise replace a single 3 bounded by commas with a single comma */
    ELSE REPLACE(images, ',3,', ',')
  END
WHERE id = '1' 
```

# jinja2 - 如何在 Jinja2 中使用 FunctionLoader 包含宏/其他模板？

> ID：15282059
> 
> 赞同：6
> 
> 时间：2013-03-07T21:25:30.100
> 
> 标签：jinja2

我正在尝试使用沙盒 Jinja2 环境来处理模板自定义。

我试过同时使用 DictLoader 和 FunctionLoader，但一直遇到类似的问题……我现在最关心的是 FunctionLoader。

我无法管理`include`其他`import`模板（包含宏）。FuctionLoader 指定的“加载”函数永远不会为引用的模板调用。

我试过没有运气：

*   只是期望导入会使用基本的“导入”和“包含”语法命中加载器
*   将加载器传递到上下文中，看看它是否会以这种方式拉动
*   将模板的字典传递到上下文中，也希望它可以引入
*   还有几件事，我都忘了

我确信必须有一种方法来支持这一点 - 有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T17:27:14.440

导入语法必须使用带引号的字符串。

坏的：

```
{% import utils %}
{% import utils.macros as macros %}
{% from utils.macros import macro_1 , macro_2 %} 
```

好的：

```
{% import "utils" as utils %}
{% import "utils.macros" as macros %}
{% from "utils.macros" import macro_1 , macro_2 %} 
```

带引号的字符串被传递到`FunctionLoader`或用作键`DictLoader`

# asp.net-mvc - System.FormatException: p0 : Wa - 输入字符串的格式不正确。jqGrid错误过滤查询

> ID：15282062
> 
> 赞同：0
> 
> 时间：2013-03-07T21:25:45.770
> 
> 标签：asp.net-mvc, jqgrid, filter, toolbar

我正在关注 Oleg 的一个示例，该示例使用 jqGrid 中的 filterToolbar 来执行服务器端搜索/过滤。搜索名称时，filteredQuery.Count() 行会引发错误，但似乎与 FormatMapping 有关。当我执行“eq” - 相等搜索时，我没有收到错误，但在执行“cn” - 包含搜索时会出现错误。几乎就像格式字符串存在问题一样，但是这个确切的代码在它所取自的示例代码中可以正常工作。我正在使用 ASP.NET MVC 4。任何帮助将不胜感激。谢谢！！

```
public JsonResult DynamicGridData(string sidx, string sord, int page, int rows, bool _search, string filters)
    {
        var context = new NonTaxContext();
        var objectContext = ((IObjectContextAdapter)context).ObjectContext;
        var set = objectContext.CreateObjectSet<Team>();

        var serializer = new JavaScriptSerializer();

        Filters f = (!_search || string.IsNullOrEmpty(filters)) ? null : serializer.Deserialize<Filters>(filters);

        ObjectQuery<Team> filteredQuery =
        (f == null ? (ObjectQuery<Team>)set : f.FilterObjectSet((ObjectQuery<Team>)set));

        filteredQuery.MergeOption = MergeOption.NoTracking; // we don't want to update the data

        var totalRecords = filteredQuery.Count();

        var pagedQuery = filteredQuery.Skip("it." + sidx + " " + sord, "@skip",
                                            new ObjectParameter("skip", (page - 1) * rows))
                                     .Top("@limit", new ObjectParameter("limit", rows));

        // to be able to use ToString() below which does NOT exist in the LINQ to Entity
        var queryDetails = (from item in pagedQuery
                            select new { item.TeamId, item.Code, item.Name }).ToList();

        return Json(new
        {
            total = (totalRecords + rows - 1) / rows,
            page,
            records = totalRecords,
            rows = (from item in queryDetails
                    select new[] {
                                    item.TeamId.ToString(),
                                    item.Code,
                                    item.Name
                                }).ToList()
        });
    }

private static readonly string[] FormatMapping = {
        "(it.{0} = @p{1})",                 // "eq" - equal
        "(it.{0} <> @p{1})",                // "ne" - not equal
        "(it.{0} < @p{1})",                 // "lt" - less than
        "(it.{0} <= @p{1})",                // "le" - less than or equal to
        "(it.{0} > @p{1})",                 // "gt" - greater than
        "(it.{0} >= @p{1})",                // "ge" - greater than or equal to
        "(it.{0} LIKE (@p{1}+'%'))",        // "bw" - begins with
        "(it.{0} NOT LIKE (@p{1}+'%'))",    // "bn" - does not begin with
        "(it.{0} LIKE ('%'+@p{1}))",        // "ew" - ends with
        "(it.{0} NOT LIKE ('%'+@p{1}))",    // "en" - does not end with
        "(it.{0} LIKE ('%'+@p{1}+'%'))",    // "cn" - contains
        "(it.{0} NOT LIKE ('%'+@p{1}+'%'))" //" nc" - does not contain
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:38:02.003

您使用的是什么技术堆栈？我个人不得不修改该示例，因为我无法使用“LIKE”关键字，因为它正在使用 Linq/Entity Frameworks 进行翻译，并且不得不将我`"cn"`的转换为

```
 "(it.{0}.ToLower().Contains(@{1}.ToLower()))",// "cn" - contains 
```

# javascript - HTML5 音频：在 IE 10 中设置 currentTime

> ID：15282064
> 
> 赞同：1
> 
> 时间：2013-03-07T21:25:50.723
> 
> 标签：javascript, html5-audio

我为 HTML5 动画构建了一个播放器，在 IE9、Chrome、FF、iOS、Android 和 Surface 上一切正常。在最近发布的 IE10 中，我正在解决一个错误，即设置音轨的 currentTime 不起作用。我快速修改了以下代码：

**HTML**：

```
<audio controls>
  <source src="http://images.apple.com/html5/showcase/audio/letsgosurfing-thedrums.mp3" type="audio/mpeg"/>
</audio>
<button>Jump to middle</button> 
```

**Javascript**：

```
$('button').on('click', function(event){
  $('audio')[0].currentTime(15);
}); 
```

这是小提琴：http: [//jsfiddle.net/RMEmB/1/](http://jsfiddle.net/RMEmB/1/)

**这在除**IE10之外的所有支持 mp3 文件的浏览器上都可以正常工作。是否先开始播放声音并不重要。有没有人解决这个问题？

特别是 Windows 7 上的 IE 10，我附近没有 Win 8 来测试。

# ios - 为什么这个简单的 LiveCode iOS 不能外部编译？

> ID：15282065
> 
> 赞同：4
> 
> 时间：2013-03-07T21:26:00.757
> 
> 标签：ios, objective-c, xcode, livecode

我使用 LiveCode iOS 外部 SDK 创建了一个简单的外部。test.lcidl 文件如下：

```
external test

function testMyExternal
    return boolean 
```

test.mm 文件如下：

```
bool testMyExternal(void) {
    return true;
} 
```

test.ios 文件是默认的 Foundation 框架。

这就像它得到的一样简单，但它不会编译......为什么不呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:26:00.757

这个问题是在 LiveCode listserve 上提出的，我在这里提问和回答，因为答案对其他人有用。

这里有几个问题：

首先是 ios 文件，它指定框架和库以针对包括 Foundation 框架编译外部框架，但 .lcidl 文件中未指定 use objc-objects 子句。如果您不想使用目标 c 对象，请从 .ios 文件中删除基础框架。

其次是文件是一个.mm，它是Objective-C++，并且没有指定use c++-naming 子句。如果您不想要 C++，您可以将 C 的 .mm 更改为 .c 或 Objective-C 的 .m。

更多细节可以在[文档的第 6.3 节中找到](http://www.runrev.com/developers/documentation/externals-sdk/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-08T10:32:17.117

蒙特设法回答了他自己的问题，但在这种情况下，外部是一个 .mm 文件，这意味着它的 obj-c++。这意味着您需要在 lcidl 文件中添加使用 c++ 命名，否则生成的胶水代码将查找 C 样式（未损坏）名称（C++ 'mangles' 函数名称以包含键入信息，以便它们可以重载）

# asp.net - 如何在多个网站asp.net之间共享相同的登录名

> ID：15282071
> 
> 赞同：0
> 
> 时间：2013-03-07T21:26:16.637
> 
> 标签：asp.net, web-applications, security

我在同一台服务器上的不同虚拟文件夹中有多个网站。我为管理员创建了一个 UserManager 网站，以便为网站创建用户帐户。我正在使用 aspnet 表和登录表单。问题是当我将登录页面添加到另一个网站时，登录成功但不会将它们重定向到该网站的主页，因为 ApplicationID 不存在。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:36:53.787

您应该查看 AD FS 身份验证。它基本上就像 Active Directory 的单一标志。

如果您使用表单身份验证来对所有应用程序进行身份验证，您应该：

1.  确保您的 cookie 是域 cookie（在 web.config 文件的表单身份验证标记中的 cookie 名称开头添加句点）
2.  添加机器密钥以确保应用程序可以解密 cookie

# codeigniter - 如何使“关注”按钮更改为“关注”社交网络codeigniter

> ID：15282072
> 
> 赞同：0
> 
> 时间：2013-03-07T21:26:24.263
> 
> 标签：codeigniter

我正在使用 Codeigniter 制作一个社交网络，并且当您已经在关注一个人时，我试图让用户视图显示一个按钮我该怎么做？

模型

```
<?php

class User_model extends CI_Model {

function get_All(){
        $this->db->select('*');    
        $this->db->from('membership');
//          $this->db->join('following', 'following.id = membership.id');
        $q = $this->db->get();      

    if($q->num_rows() > 0) {
        foreach ($q->result() as $rows) {
            $data[] = $rows;

        }

        return $data;
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:54:00.797

这是一点工作。假设可以搜索所有用户，您可能有一个所有用户的列表，以及所有用户的“朋友”列表。然后你通过两个比较它们。以下是一个想法：

```
 Database Members: All members               |ID_User|...other user stuff...

 Database Followers: Lists all friendship   |ID_User|ID_Follower| 
```

为此，您需要两个查询：一个用于所有查询，一个用于 ID_User=$UserID 的关注者。当您按照建议遍历所有成员时，您可以

```
function get_Followers(){
       $friends= $this->db->query('SELECT * FROM Followers WHERE ID_User=$UserID');
       $follow_array=$row->ID_Follower;
} 
```

现在：

```
 $follow_array    //A list of all friends.
 $q               //Your original list of members 
```

然后你可以使用：

```
if($q->num_rows() > 0) {
    foreach ($q->result() as $rows) {
        if(in_array($rows->ID_Follower, $Follower_array))
        {
        $data=true;
        }
        else
        {
        $data=false;
        }

    }

    return $data;
  } 
```

但是请注意，这可能是一个非常依赖服务器的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T03:08:52.760

我将假设您正在谈论访问个人资料，如果您正在关注该人，您会看到一个按钮。这只需要视图本身中的一个查询和逻辑。

按照这个假设，您已经将您正在查看的个人资料的人传递给视图，因此您所需要的只是查看者正在关注的人员列表，以便与该 ID 进行比较。

我不太确定你的代码中的查询在做什么，因为没有对你的数据库的描述，所以我将给代码以表的布局方式，这是一个用户表和一个下表，只是一个加入用户表。假设下表有 3 列 id、userId、followingId，其中 userId 是您，followingId 是您关注的人。

控制器

```
$data['following'] = $this->modelName->getFollowing($userId); //pass current userId
$this->load->view('viewName',$data); 
```

模型：

```
public function getFollowing($userId)//$userId to be passed as the person viewing.
{
    $this->db->where('userId',$userId);
    $data = $this->db->get('following');
    if($this->db->num_rows() > 0)
    {
       return $data;
    } else {
       $data=array();
       $return $data;
    } 
```

然后在视图中它是一个简单的 if 语句。

```
if(in_array($profileId,$following))
    {
        echo button;
    } 
```

# c++ - 尝试从文件中读取数字时得到奇怪的数字

> ID：15282079
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:26:52.473
> 
> 标签：c++, char, int, ifstream, cstring

我正在尝试从文本文件中读取数字，并且不允许使用二进制文件。我已经尝试了两种方法来做到这一点，并且都返回了一个奇怪的结果。

第一种方法：

```
 char *theNumber; 
    int i = 0;
    while(data>>text)
    {
        theNumber[i] = text;  
        i++;
    } 
```

返回一些奇怪的重音字符。第二

```
int theNumber;
while(data>>text)
{
     theNumber = text; // I tried theNumber<<text; as well
} 
```

当我计算出这个结果时，它会在文本文件包含 123 时返回一些大数字。

* * *

```
string filename;
    char text;
    int p; //first prime number
    int q; //second prime number
    unsigned long long toBeEncrypted; 

    cout<<"Enter name of file to encrypt: ";
    cin>>filename;
    ifstream data;
    ofstream encryptedData;
    encryptedData.open("RSA_cipher.txt");

    cout<<"Please enter two prime numbers:"<<endl;
    p = getPrime(1);
    q = getPrime(2);

    //doing stuff with file
    int theNumber;
    data >> theNumber;
    //int i = 0;
    /*while(data>>text)
    {
        theNumber[i] = text;  
        i++;
    }*/cout<<theNumber; 
```

...//与问题无关的其他内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:30:50.863

这段代码：

```
char *theNumber; 
int i = 0;
while(data>>text)
{
    theNumber[i] = text;  
    i++;
} 
```

有**未定义的行为**，因为您正在使用`theNumber[i]`访问一个您甚至没有分配的数组。你应该这样做：

```
 char theNumber[255]; // Buffer size depends on the particular application
 int i = 0;
 while(data>>text)
 {
     theNumber[i] = text;  
     i++;
} 
```

第二次尝试：

```
theNumber = text; 
```

可能有效也可能无效，具体取决于您如何定义`text`. 如果不知道 的定义，这是无法回答的`text`。

无论如何，如果您想从输入流中读取数字，只需执行以下操作：

```
int number;
data >> number; 
```

**更新：**

在您更新的最后一个代码片段`data`中，构建了流，但从未打开。它不与任何文件关联。因此，尝试从该流中读取不会成功，并且不会存储任何内容`number`（未初始化）。

```
ifstream data;

// data is not associated to any file after construction...

int theNumber;
data >> theNumber; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:28:44.803

这**不会**为您的号码创建存储空间。

```
char *theNumber; 
```

这是一个指针。它指向任意位置，因为您尚未为其分配地址。

试试这个。

```
char theNumber[10];  // Whatever size you need. 
```

或这个。

```
int theNumber; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:29:47.417

您没有为`char *theNumber;`. 指向随机位置，您正在打印随机
字符`theNumber`

# c# - 创建逗号分隔列表和删除尾随逗号的优雅方式

> ID：15282083
> 
> 赞同：9
> 
> 时间：2013-03-07T21:27:04.580
> 
> 标签：c#

当我生成逗号分隔的列表时，我讨厌我必须砍掉尾随的逗号。

有没有更好的办法？我经常这样做，所以寻找意见。

```
for(int x = 0; x < list.Count; x++)
{
  sb.Append(list[x].Name);
  sb.Append(",");
}

var result = sb.toString().Substring(0, result.length - 2); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-07T21:28:22.007

使用[String.Join](http://msdn.microsoft.com/en-us/library/dd992421.aspx)和 Linq 的[IEnumerable.Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx)扩展方法。

```
var str = String.Join(",", list.Select(x => x.Name)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T21:28:29.163

### 描述

您可以使用`String.Join`and `Enumerable.Select`(namespace System.Linq) 方法

> **String.Join**连接字符串数组的所有元素，在每个元素之间使用指定的分隔符。
> 
> **Enumerable.Select**将序列的每个元素投影到一个新表单中。

### 样本

```
String.Join(",", list.Select(x => x.Name)); 
```

### 更多信息

*   [MSDN - String.Join 方法（字符串，字符串 []）](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)
*   [MSDN - Enumerable.Select](http://msdn.microsoft.com/en-us/library/bb548891.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-07T21:29:20.780

基本情况：

```
string.Join(",",list.Select(l => l.Name)); 
```

使用空检查：

```
string.Join(",",list.Where(l => l != null).Select(l => l.Name)); 
```

带有空/空检查：

```
string.Join(",",list.Where(l => !string.IsNullOrEmpty(l)).Select(l => l.Name)); 
```

修剪：

```
string.Join(",",list.Select(l => l.Name.Trim())); 
```

既：

```
string.Join(",",list.Where(l => !string.IsNullOrEmpty(l)).Select(l => l.Name.Trim())); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T22:39:19.970

如果性能是一个问题，我不建议这样做，但可以使用`Aggregate`LINQ 的方法进行这样的连接。

例如

```
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication14
{
    class Program
    {
        static void Main(string[] args)
        {
            List<Example> list = new List<Example>()
            {
                new Example() { Name = "John Doe" },
                new Example() { Name = "Jane Doe" },
                new Example() { Name = "Fred Doe" },
            };

            string s = list.Select(item => item.Name)
                           .Aggregate((accumulator, iterator) => accumulator += "," + iterator);
        }
    }

    public class Example
    {
        public string Name { get; set; }
    }
} 
```

但是，如果您的加入逻辑最终变得更加复杂（我怀疑这种情况很少发生），这可能很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T22:26:38.403

还有一个不雅的解决方案`Join`

```
for(int x = 0; x < list.Count; x++)
{
    if (x > 0)
        sb.Append(",");

    sb.Append(list[x].Name);
}

var result = sb.toString(); 
```

# c# - C#中的继承和容器

> ID：15282089
> 
> 赞同：3
> 
> 时间：2013-03-07T21:27:43.953
> 
> 标签：c#, inheritance, containers, upcasting

我在这里使用 C# 工作，假设我有：

```
class A
{}

class B : A
{}

List<B> myList; 
```

我想，在部分代码中将此 myList 转换为，`List< A>,`但是当我尝试时，我得到一个错误：

```
List<A> myUpcastedList = (List<A>)myList; //not working 
```

有可能吗？如果是，语法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:31:24.613

`List<B>`不能转换为`List<A>`. 您必须创建新的`List<A>`并用源commection 中的项目填充它。您可以为此使用 LINQ to Objects：

```
var aList= bList.Cast<A>().ToList(); 
```

您还应该阅读一些关于协变和逆变的内容，例如在[Eric Lippert 的博客上](http://blogs.msdn.com/b/ericlippert/archive/tags/covariance+and+contravariance/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T21:56:46.147

老虎列表不能用作动物列表，因为您可以将乌龟放入动物列表但不能放入老虎列表。

`IEnumerable<T>`在 C# 4 和 5 中，如果您使用而不是，这是合法的，`List<T>`因为没有办法将乌龟放入动物序列中。所以你可以说：

```
List<B> myList = new List<B>();
IEnumerable<A> myUpcastedList = myList; // legal 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:30:56.883

据我所知，这是不可能的。另一种方法是执行以下操作。

```
using System.Linq;

var myUpcastedList = myList.Cast<A>().ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T21:32:31.233

我以前可以：

```
List<A> myUpcastedList = myList.ToList<A>(); 
```

虽然这会生成列表的副本...不确定这是您的意图

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T21:34:10.167

你可以使用这个问题也许对你[有用](https://stackoverflow.com/questions/1169215/why-cant-listparent-listchild)

```
List<A> testme = new List<B>().OfType<A>().ToList(); 
```

# c# - 动态更改 SharePoint 呈现模板中的标签文本

> ID：15282091
> 
> 赞同：0
> 
> 时间：2013-03-07T21:28:06.327
> 
> 标签：c#, asp.net, templates, sharepoint

如果我没有渲染模板，我可以将以下内容添加到我的 aspx 页面：

```
<asp:label ID="myLabel" runat="server" /> 
```

然后在我的代码后面：

```
myLabel.Text = "Hello World"; 
```

但由于我的标签在 a 内，`<SharePoint:RenderingTemplate>`我无法以正常方式访问它。

还有其他方法吗？

**编辑**：我发现很多类似[这篇](http://jamestsai.net/Blog/post/Using-ASPNET-Web-User-Control-with-Code-Behind-in-SharePoint.aspx)文章的文章都在谈论为每个渲染模板创建一个 .dll。将字符串输出到页面真的那么复杂吗？我应该澄清一下，我对所有想法持开放态度。我不需要后面的代码。我只需要向模板输出一个动态字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:41:15.907

您可以创建自己的标签控件并以您喜欢的任何方式使用它。

这里有一个例子：[扩展标签控件](http://www.codeproject.com/Articles/3457/Extending-the-Label-Control)，但它基本上就像你扩展任何其他控件一样。

然后我会做什么：`.Text`直接在该自定义控件中设置，或者更好的是使用资源文件。然后你可以像这样在标签上创建你的 won 属性：

```
<Custom:label ID="myLabel" specialresource="myLabel" runat="server" /> 
```

在您的班级中，您可以只处理该`specialresource`属性，例如将其设置`.Text`为您从资源中获得的任何内容。

# jaxb - 复杂类型到字符串解组

> ID：15282097
> 
> 赞同：1
> 
> 时间：2013-03-07T21:28:22.457
> 
> 标签：jaxb, unmarshalling

谁能告诉我如何在 JAXB 中将复杂对象转换为字符串？

场景：下面的 Car 对象有一个名为 Person 的嵌套元素。Person 元素有 2 个字段。有谁知道如何将 Person 对象解组为单个字符串？我不需要任何其他信息，只需要人名。

有没有办法用 JAXB 做到这一点？

例如

XML

```
<Car>
    <Owner>
        <Name>
          John Blogs
        </name>
     </owner>
</Car> 
```

如何创建如下 Java 对象：

```
class Car{
    private String owner; //John Blogs
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:46:22.947

如果您想在您的 Java 模型中存储一个 XML 片段`String`，那么您可以使用`@XmlAnyElement`带有`DomHandler`指定的注解来实现这一点。

**堆栈溢出示例**

*   [JAXB 按原样使用 String](https://stackoverflow.com/questions/13121914/jaxb-use-string-as-it-is/13123294#13123294)
*   [如何使用 JAXB 编组有时包含 XML 内容有时不包含的字符串？](https://stackoverflow.com/questions/12428727/how-to-marshall-a-string-using-jaxb-that-sometimes-contains-xml-content-and-some/12429211#12429211)
*   [使用 JAXB 提取 XML 元素的内部文本](https://stackoverflow.com/questions/5537416/using-jaxb-to-extract-inner-text-of-xml-element/5553682#5553682)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-10T17:08:57.280

为了解决我在上面发布的评论中的问题，我使用了 Eclipse MOXy 的 @XmlPath 属性，它很有效。

# java - Netbeans Maven项目未将主类添加到清单

> ID：15282098
> 
> 赞同：20
> 
> 时间：2013-03-07T21:28:22.373
> 
> 标签：java, maven, netbeans, deployment, netbeans-7

我遇到了与[这个](https://stackoverflow.com/questions/12266735/no-main-manifest-attribute-in-jar-netbeans)问题类似的问题。我已经尝试了列出的所有建议，但仍然不知所措。我的问题是我正在尝试构建一个 maven 项目并将其分发到其他机器，但是 jar 文件没有填充正确的 Manifest。每次构建和运行时，我都会收到以下错误：`no main manifest attribute, in myjar.jar`. 我需要编辑某种配置文件吗？我只是不知道发生了什么事。我也尝试过[此修复](https://stackoverflow.com/questions/2848642/how-to-setup-main-class-in-manifest-file-in-jar-produced-by-netbeans-project)，但无济于事。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-03-07T21:38:19.283

您可以将其添加到项目的 pom 文件中，`<project>`标签内：

```
<build>
    <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-jar-plugin</artifactId>
          <version>2.4</version>
          <configuration>
              <archive>
                  <manifest>
                      <mainClass>your.main.class</mainClass>
                  </manifest>
              </archive>
          </configuration>
      </plugin>
  </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-03-08T09:45:34.473

另一种选择是使用`maven shade plugin`. 与`maven jar plugin`tigran 显示的不同，`maven shade plugin`在生成的 jar 中包含您的依赖项。该插件的示例用法是：

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>2.0</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                  <mainClass>your.main.Class</mainClass>
                </transformer>
              </transformers>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

# php - ini_set() 总是返回 false

> ID：15282099
> 
> 赞同：5
> 
> 时间：2013-03-07T21:28:24.423
> 
> 标签：php, security, session, ini-set

在我当前的项目中，我有一个 security.php ，其中包含一些函数和一些 ini_set() 语句。

```
ini_set('session.use_trans_sid', 0);
ini_set('session.use_only_cookies', 1);
ini_set('session.cookie_secure', 1);
ini_set('session.hash_function', 'whirlpool');
ini_set('session.cookie_httponly', 1);
ini_set('session.hash_bits_per_character', '5'); 
```

所以这是我的问题。如果我进行某种检查...

```
if(ini_set('session.use_trans_sid', 0) === false)
    echo "Foo!"; 
```

无论我尝试设置哪一个，它总是返回 false。我以为问题出在 security.php 权限上，但我错了。

编辑

```
var_dump(ini_set('display_errors', '0')); 
```

返回字符串（0）“”

还有什么想法吗？

谢谢，塞巴斯蒂安

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2016-04-15T19:09:25.817

`ini_set`总是返回一个字符串，所以这个严格的比较总是错误的：

```
ini_set('session.use_trans_sid', 0) === false 
```

如果要检查值而不更改它，请使用`ini_get`：

```
if (ini_get('session.use_trans_sid') == 0) ... 
```

或者

```
if (!ini_get('session.use_trans_sid')) ... 
```

`ini_set`将设置值*并*返回先前的值。

# css - CSS响应显示不同

> ID：15282106
> 
> 赞同：0
> 
> 时间：2013-03-07T21:28:43.533
> 
> 标签：css, twitter-bootstrap

一个问题我不太明白。我做了一个在线示例，当我调整窗口大小时，SPAN 会一一响应。在线示例 [http://jsfiddle.net/Pva7y/1/](http://jsfiddle.net/Pva7y/1/)

在线图片 ![在此处输入图像描述](../Images/7baabfab37ccd75200fac56f5ccfbc27.png) ![在此处输入图像描述](../Images/e6e9936074a02f3775047b222b7d792c.png)

但是，我将相同的代码复制到我的本地 html 中，将 SPAN 响应放在一起。本地图像。

为什么不同？谢谢

![在此处输入图像描述](../Images/53ae919a600957addb623c0a76a7074e.png)

HTML：

```
<div class="row ">
    <div class="span7 blue">
    1
    </div>
    <div class="span2 red">
       2
   </div>
    <div class="span3 green">
      3
    </div>
</div> 
```

CSS：

```
.blue{background-color:blue;}
.red{background-color:red;}
.green{background-color:green;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:10:53.200

首先是你忘了使用`container`div。正确的模式是

```
<div class="container">
  <div class="row">
    <div class="span12">
      1 2 3
    </div>
  </div>
</div> 
```

请参阅更正[的 jsfiddle (1)](http://jsfiddle.net/Pva7y/2/)。

接下来，如果您希望您的页面具有响应性并使布局适合视口的大小，您还必须包含`bootstrap-responsive.css`. 见[jsfiddle (2)](http://jsfiddle.net/Pva7y/3/)。在您的本地 HTML 中，您使用合并到一个 CSS 的两个`bootstrap.css`和`bootstrap-responsive.css`/或以前的文件来减少客户端-服务器请求数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T21:34:49.873

您`<div>`的 s 浮动在您的 Fiddle 中，但从您的屏幕截图来看，它们并未浮动在您的本地 html 中。而且由于 bootstrap.css 使用 span 类浮动`<div>`元素，我猜 bootstrap.css 没有正确加载到您的本地 html 文件中。

解决问题的一种方法是检查 Inspector（如果您使用的是 Chrome）或 Firebug（如果您使用的是 Firefox）。查看`<div>`你的 fiddle 和你本地的 html 中三个 s 的计算机样式，并比较它们。它们的样式肯定是不同的，因为它们在同一个浏览器上看起来不同，所以这是开始故障排除的方法。

# css - Firefox 的 CSS 修复：Box shadow 属性

> ID：15282108
> 
> 赞同：0
> 
> 时间：2013-03-07T21:28:50.903
> 
> 标签：css, firefox

这是我的 CSS 代码：

```
.thzPartsHeader, .thzPartsContainer {
    border:1px solid #0080ff;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
    -webkit-box-shadow:0 0 6px #0080ff, 0 0 20px #292929 inset;
    -moz-box-shadow:0 0 6px #0080ff, 0 0 20px #292929 inset;
    box-shadow:0 0 6px #0080ff, 0 0 20px #292929 inset;
    padding: 5px 20px 5px 20px;
    margin:auto;

    font-family:georgia;
    font-size: 12px;
    color:#ffffff;
    background-color:#000000;
} 
```

这是 HTML 代码：

```
<fieldset class="thzPartsContainer">
    <legend class="thzPartsHeader"><b>Code Will Appear Below</b></legend>
    <textarea class="textArea" id="txtarea" name="codearea"></textarea>
</fieldset> 
```

这就是它在 Google Chrome 中的显示方式（这正是我想要的）：

![https://googledrive.com/host/0BxoUWoRI6JTIRi11REZfWEtrcU0/chromepreview.jpg](../Images/ec8764723d11f3c5d317004869fb7276.png)

但这就是它在 Firefox 中的显示方式（没有发布图片的声誉：o）：（ [来源：][[googledrive.com](https://googledrive.com/host/0BxoUWoRI6JTIRi11REZfWEtrcU0/firefoxpreview.jpg)][）][![https://googledrive.com/host/0BxoUWoRI6JTIRi11REZfWEtrcU0/firefoxpreview.jpg](../Images/263bf69dddc473c2db94a951a419414c.png)](https://i.stack.imgur.com/lwm3l.jpg)

看起来好像阴影被移位并且`margin:auto`属性在Firefox中不起作用。他们俩的解决方法是什么？请帮忙。

[http://jsfiddle.net/f2ndc/](http://jsfiddle.net/f2ndc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:48:00.373

您问题的阴影部分是

[带有 <fieldset> 的框阴影 CSS。火狐与 Chrome](https://stackoverflow.com/questions/7289273/box-shadow-css-with-a-fieldset-firefox-vs-chrome)

不是最好的解决方案，因为你必须有一个固定的高度和宽度，`<legend>`但添加它可以工作

```
.thzPartsHeader{
    position: absolute;
    top: -9px;
    left: 50%;
    margin-left: -75px;
}
.thzPartsContainer{
  padding-top: 9px;
  position: relative;
} 
```

小提琴：http: [//jsfiddle.net/FBca7/2/](http://jsfiddle.net/FBca7/2/)

# xcode - 如何创建可重复使用的按钮

> ID：15282111
> 
> 赞同：1
> 
> 时间：2013-03-07T21:28:53.237
> 
> 标签：xcode, object, button, subclass

我是 Xcode 和目标 c 的新手。我想创建一个具有特定外观的按钮（可能是一个 UIBarButtonItem，用于导航栏），我将在不同的视图中重复使用它。我已经搜索了很长时间，但无法弄清楚如何。

继承 UIBarButtonItem 是否合适？我试图这样做，但我很快就不知所措了。一旦我将 .h 和 .m 文件创建为 UIBarButtonItem 的子类，我是否必须实例化 UIBarButtonItem？这些文件不会自动为我创建一个按钮对象（从父类导入），我可以将其称为 self 吗？在它自己的子类中实例化一个按钮似乎很奇怪。

我想做的一件事是添加该行，

`button.titleLabel.lineBreakMode = NSLineBreakByWordWrapping;`

但我不知道如何使用该属性创建可重用按钮。

即使这完全是创建可重用自定义按钮的错误方法，我显然需要提高我对对象的理解，因此我的误解的解释将不胜感激！

请？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-16T21:51:25.407

您可以在没有子类化的情况下做到这一点 - 通过创建一个类别（在 Objective-C 中做事的首选方式）。使用类别，您可以为对象提供自定义方法，而无需对其进行子类化。您*不能*（轻松）提供自定义属性，但在您的情况下，这无关紧要。

*使用类别*

这是您的类别头文件的外观：

```
//  UIButton+StyledButton.h

#import <UIKit/UIKit.h>

@interface UIButton (StyledButton)
- (void) styleButton; 
@end 
```

然后在实现文件中：

```
//
//  UIButton+StyledButton.m
//

#import "UIButton+StyledButton.h"

@implementation UIButton (StyledButton)

- (void) styleButton {
    //style your button properties here
    self.titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
} 
```

（‘self’指的是按钮对象，它也获取了你在类中编写的自定义方法。）

要使用它，`#import "UIButton+StyledButton.h"`那么你可以做这种事情......

```
on viewDidLoad {
    [super viewDidLoad];
    UIButton* myButton = [[UIButton alloc] initWithFrame:myFrame];
    [myButton styleButton];
} 
```

*使用子类*

子类等价物看起来像这样：

头文件...

```
//  MyCustomButton.h

#import <UIKit/UIKit.h>

@interface MyCustomButton : UIButton
- (id)initWithCoder:(NSCoder *)coder;
- (id)initWithFrame:(CGRect)frame;
@end 
```

实现文件...

```
//  MyCustomButton.m

#import "MyCustomButton.h"

@implementation MyCustomButton

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        [self styleButton];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        [self styleButton];
    }
    return self;
}

- (void) styleButton {
    //style your button properties here
    self.titleLabel.lineBreakMode = NSLineBreakByWordWrapping;
} 
```

您提供了两个初始化方法 -`initWithFrame`是在代码中分配/初始化对象时调用的方法；`initWithCoder`如果从情节提要或 xib 加载对象，则系统调用的 init 方法。

要在代码中创建您的自定义按钮之一，您可以像处理任何其他对象一样分配/初始化：

```
MyCustomButton* button = [[MyCustomButton alloc] initWithFrame:buttonFrame]; 
```

您也不会分配/初始化超类实例，这是由`initWithFrame:`子类中的方法在调用`[super initWithFrame:frame]`. `self`指的是您的自定义子类实例，但这*包括*它的超类中的所有（公共）属性和方法 - 除非您在子类中实现了覆盖。

要在情节提要/xib 中使用您的子类按钮，只需拖出一个常规按钮，然后在 Identity Inspector 中将其类型设置为您的自定义按钮类。`initWithCoder`当按钮从 storyboard/xib 加载到视图中时，该方法会自动调用。

*更新*

从您的评论来看，您似乎仍然存在一些困惑，所以这里有一些高度压缩的去混淆注释......

远离继承 UINavigationController 除非你真的知道你在做什么。很少有必要。

navController 界面上的按钮是它包含的 viewControllers 的属性。查找的`navigationItem`属性`UIViewController`（类似地 - 在 a 的情况下`UIToolbar`- 视图控制器有一个`toolbarItems`属性）。这允许导航控制器具有上下文感知能力。

我的示例中的“viewDidLoad”假定为常规`UIViewController`. 我的例子也是常规的一个类别，`UIBUtton`它*与*`UIBarButtonItem`.

在尝试之前先尝试让 UIButton 类别与常规 ViewController 一起使用`UIBarButtonItem`（它不*继承*自`UIButton`）。

`UIBarbuttonItem`没有`initWithFrame`，因为组织栏（`UINavigationBar`或`UIToolbar`）的东西 - 在这种情况下是导航控制器 - 负责它的最终大小和定位。viewController 控制 barButtonItems 的相对顺序，以及它们是出现在左侧还是右侧，以及它的内容和（某些方面）的外观，但其余的取决于 NavController。

# 3d - Direct3D 或 XNA 渲染自定义台球

> ID：15282112
> 
> 赞同：1
> 
> 时间：2013-03-07T21:28:59.003
> 
> 标签：3d, xna, directx, direct3d, 3d-modelling

我正在开发一个数学游戏，其中数字（0-99）用于问题和答案（如标准台球，但它们通常只能达到 15）。

因此，我认为至少以编程方式生成数字会比在 3DSMax 或类似软件中模拟 99 个不同的球要聪明得多。

我在 C#/XNA 中工作，但也可以在 DX11/C++ 中处理解释。

我不是在寻找代码，而是在寻找一种方法：一种看起来像这样的项目符号列表（如果这接近正确的话）：

*   在 3DS 中构建一个白色且上面有条纹的 shpere。
    *   或者，条带应该是我稍后添加的纹理的一部分吗？
*   在 DrawModel 期间更改球的颜色（如果是实心的）或菌柄的颜色（如果是条纹的）
*   以某种方式将数字添加到球中，使其看起来与球的其余部分具有相同的质量

也许有一种神奇的方法可以获取纹理并将其包裹在球体周围而不会产生任何扭曲，然后我可以生成纹理并将它们粘贴在球体上。但正如你可以猜到的，我不知道该走哪条路。

感谢您的任何指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:09:13.397

你会想要在纹理贴图上打印你的数字。这个纹理实际上是一个“贴花”，它被粘贴到你的球体的一部分上。实现这样一个简单的固定贴花的一种简单方法是编写一个像素着色器，该着色器确定该点是在贴花区域的内部还是外部。如果不是，您可以进行额外测试以确定像素应该是白色背景还是彩色条纹。

您可以通过为每个顶点指定适当的纹理坐标来将贴花映射到您的球体，或者，您可以编写一个像素着色器，从 3D 模型坐标计算纹理坐标。

无论哪种方式，你总是会在球体上得到扭曲。我建议您查看[地图投影](http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html)，它们都可以解决您在平面图像和球体之间转换的基本问题。我特别建议查看“gnomonic”和“orthographic”投影，这两种投影都易于理解和实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:51:45.640

如果您希望使用 XNA / MonoGame / ANX 来解决它，该方法实际上取决于您使用的是 Reach 配置文件还是 HighDef 配置文件。

使用覆盖面配置文件，我建议：

1.  创建渲染目标
2.  将渲染目标清除为球的颜色
3.  在渲染目标上绘制白色条纹
4.  将数字绘制到渲染目标上
5.  动态创建（或使用现有的）球体网格
6.  使用基本效果和 rendertarget 纹理渲染球体网格

有了高调，这是一个编写像素着色器的案例：

1.  采用“白色”纹理、“颜色”纹理、颜色和“数字”纹理
2.  将白色纹理渲染为白色
3.  渲染颜色纹理提供的颜色
4.  渲染数字纹理

（我建议使用与 Reach 配置文件示例类似的技术来渲染数字纹理。渲染文本是一种痛苦，因此不妨尽可能利用内置的东西）。[（前）XNA 团队在http://create.msdn.com](http://create.msdn.com)提供了一个重新着色示例

# c - 在 C 中，程序返回值的限制是什么？或者，是什么原因造成的？

> ID：15282118
> 
> 赞同：1
> 
> 时间：2013-03-07T21:29:24.487
> 
> 标签：c, echo, return-value

遇到了这种好奇心：

```
int main() {
  ...
  return 9000;
} 
```

`~$ ./a.out || echo $?`产量`40`。

嗯，也许“40”是数字太高的退出状态？

更改`return 9000`为`return 41`--echoes 41。

怎么样`100`？这也呼应了。怎么样`1000`？这与`231`--hmm 相呼应，因此 40 一定不能是数字太高的退出状态。

试试`232`--echoes 232。

可以这么说，我突然发现自己对 C 程序中返回值的限制感到好奇。有人有这方面的信息吗？[这篇 Wikipedia 文章](http://en.wikipedia.org/wiki/Exit_status#C_language)提供了一些常见信息，但并未解释上述行为。

# .net - 如何使用 DTE 创建 WebApi 项目？

> ID：15282119
> 
> 赞同：0
> 
> 时间：2013-03-07T21:29:28.347
> 
> 标签：.net, powershell, envdte

我正在尝试使用 DTE 在 powershell 脚本中创建一个 WebApi 项目。

当我尝试传递项目模板的文件夹名称时，出现以下错误。

```
PS> $projTplPath = $dte.Solution.GetProjectTemplate("WebApiApplicationProjectTemplatev4.0", "CSharp")
Exception calling "GetProjectTemplate" with "2" argument(s): "The system cannot find the file specified. (Exception from HRESULT: 0x80070002)"
At line:1 char:1
+ $projTplPath = $dte.Solution.GetProjectTemplate("WebApiApplicationProjectTemplat ...
+ ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : ComMethodTargetInvocation 
```

如果我尝试使用不同的、更简单的项目模板名称来使用相同的方法，它就可以正常工作。

例如：

```
PS> $projTplPath = $dte.Solution.GetProjectTemplate("AjaxServerControl", "CSharp") 
```

工作没问题。创建 ClassLibrary 或 ConsoleApplication 也是如此。

WebApi 项目模板的项目模板名称是什么？更好的是，项目模板类型列表是什么？我似乎在 MSDN 上找不到枚举或其他此类列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:12:23.830

我在安装中看到“WebApiApplicationProjectTemplatev4.1”。

这是我查看的位置：C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\ProjectTemplates\CSharp\Web\1033

# .net - 写入应用程序日志而不创建源

> ID：15282120
> 
> 赞同：2
> 
> 时间：2013-03-07T21:29:29.873
> 
> 标签：.net, event-log

我想写入默认的应用程序事件日志，而不是自动创建事件日志源或通过`EventLog.CreateEventSource`. 该程序可能以非管理员身份运行，他们无法创建事件日志源。此应用程序没有安装程序。在这种情况下，我可以为“始终有效”的源指定一些东西吗？

作为参考，错误消息是：

```
System.Security.SecurityException: The source was not found, but some or all event logs could not be searched.  To create the source, you need permission to read all event logs to make sure that the new source name is unique.  Inaccessible logs: Security. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:57:45.133

不注册事件源就无法编写，并且需要管理权限才能创建事件源。如果您有管理权限并且在没有先创建源的情况下写入日志，Windows 会自动创建事件源。

来自 MSDN：

> 使用 WriteEvent 和 WriteEntry 将事件写入事件日志。必须指定事件源才能写入事件；在使用源编写第一个条目之前，您必须创建和配置事件源。
> 
> 在安装应用程序期间创建新的事件源。这允许操作系统有时间刷新其已注册事件源及其配置的列表。如果操作系统尚未刷新其事件源列表，并且您尝试使用新源写入事件，则写入操作将失败。您可以使用 EventLogInstaller 或使用 CreateEventSource 方法配置新源。您必须拥有计算机的管理权限才能创建新的事件源。

[EventLog.Source 属性](http://msdn.microsoft.com/en-us/library/system.diagnostics.eventlog.source%28v=vs.100%29.aspx)

# google-apps-script - 如何使用 Apps 脚本修改页面级别权限？

> ID：15282123
> 
> 赞同：1
> 
> 时间：2013-03-07T21:29:50.597
> 
> 标签：google-apps-script, google-sites

我有一个设置了页面级别权限的网站。每个页面都从父页面继承，然后在某个点停止。满足要求后，我想允许访问子页面。

API 具有站点级别的访问权限，例如

```
site.addViewer(viewer)   
site.removeViewer(viewer)    
site.addCollaborator(collaborator)    
site.getCollaborators()    
site.removeCollaborator(collaborator) 
```

但在页面级别我只看到

```
page.getAuthors 
```

（我认为与合作者相同，但看不到更改名称的原因？）

是否可以从站点中的脚本更改页面级别权限？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:11:01.750

似乎不可能。[问题跟踪器中的这个问题](https://code.google.com/p/google-apps-script-issues/issues/detail?id=1021)表明他们正在处理它。但是这个问题是一年多前创建的，所以我不确定它的状态......

# cakephp - CakePHP 2.3 在 AppModel 中使用国际化时出错

> ID：15282125
> 
> 赞同：0
> 
> 时间：2013-03-07T21:29:52.103
> 
> 标签：cakephp, internationalization

我试图在我的 AppModel 中定义一些状态常量，以便在每个模型中都可用。为了获取它们的字符串值，我想将它们存储在一个数组中，但是当我尝试将字符串国际化时，它会导致以下错误：

致命错误：在第 181 行的 /home/dev/www/test/lib/Cake/Utility/ClassRegistry.php 中调用未定义函数 AppModel()

我的代码：

```
class AppModel extends Model {
    const STATUS_INACTIVE = 0;
    const STATUS_ACTIVE = 1;
    public $statuses = array(
        self::STATUS_INACTIVE => __('Inactive'),
        self::STATUS_ACTIVE => __('Active')
    );
} 
```

我查看了核心，发现以下行引发了错误：

```
$instance = new $appModel($settings); 
```

$appModel($settings) 语句导致它，我试图调试它并得到同样的错误。任何帮助或想法朝着正确的方向解决这个问题表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:03:39.793

我不认为你可以在 PHP 中定义 $statuses 那样的东西。问题是您不能使用函数的结果来定义类属性。

[http://www.php.net/manual/en/language.oop5.properties.php](http://www.php.net/manual/en/language.oop5.properties.php)

> 类成员变量称为“属性”。您可能还会看到使用“属性”或“字段”等其他术语来提及它们，但出于本参考的目的，我们将使用“属性”。它们是通过使用关键字 public、protected 或 private 之一定义的，后跟一个普通的变量声明。这个声明可能包括一个初始化，但是这个初始化必须是一个常量值——也就是说，**它必须能够在编译时被评估，并且不能依赖于运行时信息才能被评估。**

如果你想用翻译的标签设置属性，把它移到你的构造函数中，这意味着初始化对象；

```
class AppModel extends Model {
    const STATUS_INACTIVE = 0;
    const STATUS_ACTIVE = 1;
    public $statuses;

    public function __construct($id = false, $table = null, $ds = null) {
        parent::__construct($id, $table, $ds);
        $this->statuses = array(
            self::STATUS_INACTIVE => __('Inactive'),
            self::STATUS_ACTIVE => __('Active')
        );
    }
} 
```

或者将其移至另一个方法，以便仅在实际使用时生成，就像这样；

```
public function getStatusOptions()
{
   return array(
        self::STATUS_INACTIVE => __('Inactive'),
        self::STATUS_ACTIVE => __('Active')
   );
} 
```

另一个注意事项; *定义类常量并*使其可重用而不将它们添加到 AppModel 的一个好技巧是使用接口；

```
interface ActiveInactive {
    const STATUS_INACTIVE = 0;
    const STATUS_ACTIVE = 1;
}

interface FooBar {
     const HELLO = 'world';
}

class MyModel extends AppModel implements ActiveInactive, FooBar {

    public function test()
    {
        echo self::STATUS_INACTIVE;  // outputs '1'
        echo self::HELLO;            // outputs 'world'
    }

}

 class MyHelper extends Helper implements ActiveInactive, FooBar {

    public function test()
    {
        echo self::STATUS_INACTIVE;  // outputs '1'
        echo self::HELLO;            // outputs 'world'
    }

} 
```

这样你就可以在任何地方重复使用这些常量；在助手、模型、控制器中。你可以“组合”这些常数:)

# arrays - 存储用户输入的数组

> ID：15282126
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:29:54.923
> 
> 标签：arrays, string

正如您可能看到的那样，我还没有掌握数组的窍门。我正在尝试创建一个将存储用户输入的 10 个字符串的字符串，尽管我怀疑我是否采取了正确的方法。目前我收到错误 'java.lang.ArrayIndexOutOfBoundsException: 10 at InputLoop.main(InputLoop.java:22)' 任何帮助将不胜感激！

```
import java.util.Scanner;

public class InputLoop
{
public static void main(String[] args)
{
    Scanner scan = new Scanner(System.in);

    String array[] = new String[10];
    int num =11, i =0;
    System.out.println ("Enter a word");
    for (i=0;i<num;i++)
    {
         while (scan.hasNextInt()) // while non-integers are present...
        {

            scan.next();           //...read and discard input, then prompt again
            System.out.println ("Bad input. Enter a word");

        }

        array[i] = scan.next();

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:37:44.530

当你在 Java 中对数组做任何事情时，你必须记住数组索引*从 0 开始*。

所以当你声明一个大小为 10 的数组时，你会得到一个从 0 或 0-9 开始的 10 元素数组。数组的第 10 个实际上在索引 9 处。

所以你`num = 11`应该在哪里`num = array.length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:38:02.887

Num 需要设置为 10。你循环了 11 次。对于大小为 n 的数组，索引从 0 到 n-1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:38:27.357

在这里，您要声明大小为 10 的数组并用 11 初始化 num

```
String array[] = new String[10]; 
```

所以数组的索引从 0 到 9 即总共 10...

并且您的 for 循环将从 0 旋转到 10 即总共 11 ......它会导致 arrayindexoutofbound

要么使值 num=10 要么使您的数组大小为 11 ..

# sql - Query to get data from table2 based on info in table1

> ID：15282127
> 
> 赞同：-3
> 
> 时间：2013-03-07T21:29:56.950
> 
> 标签：sql

Alright, let's say I have 2 tables.

Table 1 has:

```
ServerName         |    ServerIP 

Something1         |    192.168.0.1
Something2         |    192.168.0.2
Something3         |    192.168.0.3 
```

Table 2 has:

```
PlayerName         |    PlayerIP

MyName1            |    192.168.0.1
MyName2            |    192.168.0.1
MyName3            |    192.168.0.2 
```

How can I get all players(table2) that match the ServerIP in table1?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:33:08.417

```
select t2.PlayerName 
from 
  table2 t2, table1 t1 
where
  t2.PlayerIP = t1.ServerIP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:32:53.157

Some pseudo SQL..

`SELECT table2.playername from table2 JOIN table1 ON table1.serverip = table2.ip`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:33:19.773

You can use an [inner join](http://en.wikipedia.org/wiki/Join_%28SQL%29#Inner_join)

```
SELECT t2.PlayerName, t1.ServerIP 
FROM Table1 t1
    INNER JOIN Table2 t2 ON t1.ServerIP = t2.IP 
```

# ruby-on-rails - Rails：MD5 校验和如何在回形针中工作？

> ID：15282130
> 
> 赞同：1
> 
> 时间：2013-03-07T21:30:13.983
> 
> 标签：ruby-on-rails, paperclip

我真的很困惑：

从官方回形针维基页面：

> 如果模型具有名为指纹的属性，则分配的原始文件的 MD5 校验和将放置在模型中。

我的表中有一个`attachment_fingerprint`，回形针会自动将 md5 值插入该字段。

问题是，校验和是如何生成的？它是在上传之前还是在上传之后生成的？

例如，原始文件的校验和为 1，而文件在上传过程中损坏，其校验和现在变为 2，回形针将在字段中插入哪个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:02:43.450

文件成功上传到服务器**后**，计算指纹校验和并保存到指纹列。不过，文件在上传过程中不太可能损坏。如果您真的担心这一点，您必须在客户端预先计算相同的 MD5，将其与上传的文件一起发送，然后在服务器上检查原始 MD5 哈希值与回形针计算的一个。

# colors - 根据“if”语句更改文本颜色

> ID：15282133
> 
> 赞同：1
> 
> 时间：2013-03-07T21:30:22.880
> 
> 标签：colors, python-3.1

这是我的第一篇文章，我需要一些帮助。我已经开始学习 pyhon 并且已经到了准备制作自己的程序的地步。

我正在编写一个程序，它是 MMO“狂神境界”的“统计”检查器，并且希望能够根据统计是 < 还是 > 0 来更改文本的颜色。

我看过这个论坛，答案要么对我的非程序员来说太复杂，要么与我的需要无关。

本质上，我希望下面的代码提取物根据计算机运行的“if”语句以不同的颜色打印。

```
if hpc < 0:
    print ('    HP is above average by ' + hpc)
else:
    if hpc == 0:
        print ('    HP is average') 
```

如果有人可以帮助我并尝试用“简单”的语言解释它，我将非常感激，

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:21:33.613

您需要在 python 中添加一个模块才能在 Windows 中完成此任务。colorama 模块可以做到这一点。 [https://pypi.python.org/pypi/colorama](https://pypi.python.org/pypi/colorama) 或者，您可以尝试使用 python 的 win32api（我认为它可以在 64 位 Windows 上运行） [http://sourceforge.net/projects/pywin32/](http://sourceforge.net/projects/pywin32/)

# c# - Kinect 语音识别和骨骼跟踪不能一起工作

> ID：15282137
> 
> 赞同：0
> 
> 时间：2013-03-07T21:30:39.210
> 
> 标签：c#, multithreading, event-handling, kinect-sdk

我正在编写一个应用程序，它可以接受几个不同的外部输入（键盘按下、动作手势、语音）并产生类似的输出（例如，在键盘上按“T”与说出“Travel”这个词会做同样的事情大声）。因此，我不希望任何输入管理器相互了解。具体来说，我不希望 Kinect 管理器（尽可能多地）了解语音管理器，反之亦然，即使我使用的是 Kinect 的内置麦克风（语音管理器应该与任何麦克风一起使用）。我在语音管理器中使用 System.Speech，而不是 Microsoft.Speech。

我遇到了一个问题，即一旦启用 Kinect 运动识别模块，语音模块就会停止接收输入。我已经尝试了很多事情，比如[反转骨架流和音频流](https://stackoverflow.com/questions/14046729/i-cant-get-kinect-sdk-to-do-speech-recognition-and-track-skeletal-data-at-the-s)，以不同的方式捕获音频流等等。我终于缩小了问题的范围：关于我如何初始化我的模块的一些东西不能很好地与如何我的应用程序处理事件。

该应用程序运行良好，直到动作捕捉开始。如果我完全排除 Kinect 模块，这就是我的主要方法的外观：

```
 // Main.cs
    public static void Main()
    {

        // Create input managers
        KeyboardMouseManager keymanager = new KeyboardMouseManager();
        SpeechManager speechmanager = new SpeechManager();

        // Start listening for keyboard input
        keymanager.start();    

        // Start listening for speech input
        speechmanager.start()

        try
        {
           Application.Run();  
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.StackTrace);
        }

    } 
```

我正在使用`Application.Run()`，因为我的 GUI 是由外部程序处理的。此 C# 应用程序的唯一工作是接收输入事件并根据该输入运行外部脚本。

键盘和语音模块都偶尔接收事件。另一方面，Kinect 会不断产生事件。如果我的手势很少发生，那么轮询循环可能是每次轮询之间等待时间的答案。但是，我正在使用 Kinect 来控制鼠标移动……我不能在骨架事件捕获之间等待，因为那样鼠标会很迟钝；我的骨架捕获循环需要尽可能保持不变。这提出了一个大问题，因为现在我不能让我的 Kinect 管理器在同一个线程上（或消息泵？我对区别有点模糊，因此我认为问题出在此处）：根据我的理解它，在同一个线程上不会允许键盘或语音事件始终如一地通过。反而，`System.Windows.Forms`, 这样它就可以与`Application.Run()`. 现在，我的主要方法如下所示：

```
 // Main.cs
    public static void Main()
    {

        // Create input managers
        KeyboardMouseManager keymanager = new KeyboardMouseManager();
        KinectManager kinectManager = new KinectManager();
        SpeechManager speechmanager = new SpeechManager();

        // Start listening for keyboard input
        keymanager.start();

        // Attempt to launch the kinect sensor
        bool kinectLoaded = kinectManager.start();

        // Use the default microphone (if applicable) if kinect isn't hooked up
        // Use the kinect microphone array if the kinect is working
        if (kinectLoaded)
        {
           speechmanager.start(kinectManager);
        }
        else
        {
           speechmanager.start();
        }

        try
        {
           // THIS IS THE PLACE I THINK I'M DOING SOMETHING WRONG
           Application.Run(kinectManager);  
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.StackTrace);
        } 
```

出于某种原因，一旦 Kinect 传感器启动，Kinect 麦克风就会失去其“默认性”（如果此观察结果不正确，或者有解决方法，请告诉我）。因此，我需要`start()`在语音管理器中创建一个特殊的方法，如下所示：

```
 // SpeechManager.cs

    /** For use with the Kinect Microphone **/
    public void start(KinectManager kinect)
    {
        // Get the speech recognizer information
        RecognizerInfo recogInfo = SpeechRecognitionEngine.InstalledRecognizers().FirstOrDefault();

        if (null == recogInfo)
        {
            Console.WriteLine("Error: No recognizer information found on Kinect");
            return;
        }

        SpeechRecognitionEngine recognizer = new SpeechRecognitionEngine(recogInfo.Id);

        // Loads all of the grammars into the recognizer engine
        loadSpeechBindings(recognizer);

        // Set speech event handler
        recognizer.SpeechRecognized += speechRecognized;

        using (var s = kinect.getAudioSource().Start() )
        {
            // Set the input to the Kinect audio stream
            recognizer.SetInputToAudioStream(s, new SpeechAudioFormatInfo(EncodingFormat.Pcm, 16000, 16, 1, 32000, 2, null));

            // Recognize asycronous speech events
            recognizer.RecognizeAsync(RecognizeMode.Multiple);
        }
    } 
```

作为参考，`start()`Kinect 管理器中的方法如下所示：

```
 // KinectManager.cs
    public bool start()
    {
        // Code from Microsoft Sample
        kinect = (from sensorToCheck in KinectSensor.KinectSensors where sensorToCheck.Status == KinectStatus.Connected select sensorToCheck).FirstOrDefault();

        // Fail elegantly if no kinect is detected
        if (kinect == null)
        {
            connected = false;
            Console.WriteLine("Couldn't find a Kinect");
            return false;
        }

        // Start listening
        kinect.Start();

        // Enable listening for all skeletons
        kinect.SkeletonStream.Enable();

        // Obtain the KinectAudioSource to do audio capture
        source = kinect.AudioSource;
        source.EchoCancellationMode = EchoCancellationMode.None; // No AEC for this sample
        source.AutomaticGainControlEnabled = false; // Important to turn this off for speech recognition

        kinect.AllFramesReady += new EventHandler<AllFramesReadyEventArgs>(allFramesReady);

        connected = true;
        return true;
    } 
```

因此，当我禁用动作捕捉（通过让我的 main() 看起来类似于第一个代码段）时，语音识别工作正常。当我启用动作捕捉时，动作效果很好，但没有语音被识别。在这两种情况下，键盘事件总是有效的。没有错误，通过跟踪发现语音管理器中的所有数据都正确初始化了……*看起来*语音识别事件就消失了。如何重新组织此代码以便输入模块可以独立工作？我是否使用线程，或者只是 Application.Run() 以不同的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:11:23.493

Microsoft Kinect SDK 有几个[已知问题](http://msdn.microsoft.com/en-us/library/jj663798.aspx)，其中之一是如果您在启动音频处理器后开始跟踪骨架，则不会处理音频。从已知问题：

```
Audio is not processed if skeleton stream is enabled after starting audio capture

Due to a bug, enabling or disabling the SkeletonStream will stop the AudioSource
stream returned by the Kinect sensor. The following sequence of instructions will
stop the audio stream:
    kinectSensor.Start();
    kinectSensor.AudioSource.Start(); // --> this will create an audio stream
    kinectSensor.SkeletonStream.Enable(); // --> this will stop the audio stream as an undesired side effect

The workaround is to invert the order of the calls or to restart the AudioSource after changing SkeletonStream status.
    Workaround #1 (start audio after skeleton):
    kinectSensor.Start();
    kinectSensor.SkeletonStream.Enable();
    kinectSensor.AudioSource.Start();

    Workaround #2 (restart audio after skeleton):
    kinectSensor.Start();
    kinectSensor.AudioSource.Start(); // --> this will create an audio stream
    kinectSensor.SkeletonStream.Enable(); // --> this will stop the audio stream as an undesired side effect
    kinectSensor.AudioSource.Start(); // --> this will create another audio stream

Resetting the SkeletonStream engine status is an expensive call. It should be made at application startup only, unless the app has specific needs that require turning Skeleton on and off. 
```

我也希望当您说您使用 SDK 的“版本 1”时，您的意思是“版本 1.6”。如果您使用的不是 1.5 或 1.6，那么您只是在伤害自己，因为 1.5 中进行了许多更改。

# mysql - 为什么“WHERE col LIKE 'a%'”可以使用索引，但不能使用“WHERE col LIKE '%a%'”？

> ID：15282138
> 
> 赞同：2
> 
> 时间：2013-03-07T21:30:42.920
> 
> 标签：mysql, sql, indexing

我刚找到这个帖子：

[对于 5000 条记录的表，类似 MySQL 的查询运行速度极慢](https://stackoverflow.com/questions/1938349/mysql-like-query-runs-extremly-slow-for-5000-records-table)

我有兴趣了解 asaph 的帖子，他说：

> 我不希望 select * from customer 像 '%a%' 这样的代码会很快，因为它不可能使用索引。必须检查每条记录。如果可能，请考虑 select * from customer where code like 'a%'，因为这可能会使用索引。

有人可以解释两个选择语句之间的区别吗？我知道一个人只有一个通配符，只会找到以“a”开头的东西。但为什么那个可以被索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T21:38:32.443

尽管 MySQL 的 B-tree 索引的[实际细节](http://en.wikipedia.org/wiki/B-tree)比这更复杂，但对于大多数用途来说，在列上创建索引可以让 MySQL 引擎`SELECT`在您的表上执行 s，就好像它是按该列*排序的一样。*

如果该`code`列上有一个索引，并且您正在搜索记录 where `code LIKE 'a%'`，那么所有 MySQL（或任何其他 SQL 包，只要它足够聪明）所要做的就是从 'a 的开头吐出所有记录' 到 'b' 的开头。但是，如果您正在搜索 where 记录`code LIKE '%a%'`，那么已经对表进行排序`code`将无济于事，因为行是否匹配 WHERE 子句与其在索引中的位置没有简单的关系。`code`所以对于第二个查询，除了检查表中每一行的条目的每个字符（除非它已经缓存了结果）之外，数据库无法合理地做任何事情。

这很容易直观地理解，因为您可以想象自己作为人类做一些相当相似的事情。如果你想在牛津英语词典中找到所有以'a'开头的单词，那么你只需浏览从'a'开头到'b'开头的所有页面，所有你看到的都是一个单词以“a”开头。如果您想在字典中的任何位置找到所有带有“a”的单词，那么被排序的字典不会为您提供太多帮助。如果你足够老练，你可以合理地利用字典的顺序*（*例如，利用你的知识，字典中第一个 'b...' 单词之前的所有单词都包含一个 'a'），但是最终你'

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T21:36:05.643

从[手册](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)：

> 大多数 MySQL 索引（`PRIMARY KEY`、`UNIQUE`、`INDEX`和`FULLTEXT`）都存储在 B 树中。B 树索引可用于使用`=`、`>`、`>=`、`<`、`<=`或`BETWEEN`运算符的表达式中的列比较。以下`SELECT`语句不使用索引：
> 
> ```
> SELECT * FROM tbl_name WHERE key_col LIKE '%Patrick%'; 
> ```
> 
> `LIKE`如果参数 to`LIKE`是不以通配符开头的常量字符串，则索引也可用于比较。例如，以下`SELECT` 语句使用索引：
> 
> ```
> SELECT * FROM tbl_name WHERE key_col LIKE 'Patrick%';
> SELECT * FROM tbl_name WHERE key_col LIKE 'Pat%_ck%'; 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T21:41:01.370

MySQL 使用[BTREE](http://en.wikipedia.org/wiki/B-tree)索引。

如果您使用带有*前导*通配符的 LIKE 进行字符串比较，那么 MySQL 执行表扫描会更快，因为索引不能用于缩小结果范围。

如果您使用带有*尾随*通配符的 LIKE 进行字符串比较，那么使用索引会更快，因为需要扫描的记录更少。

# google-maps - GeoXml3 将 kml（点）的融合表层解析为谷歌地图

> ID：15282151
> 
> 赞同：0
> 
> 时间：2013-03-07T21:31:08.863
> 
> 标签：google-maps, kml, google-fusion-tables

我有一个 kml 点加载到融合表层中。我想使用geoxml3将数据解析为图层范围上的une map.fitBounds，但这不起作用。下面的确切代码适用于 KML 多边形，但不适用于 KML 点图层。

代码：

```
 var queryText = encodeURIComponent("SELECT * FROM 1CNJWjLDYgBkJGZVslJ67Fak4DyqadEFuIabzQ60 ");
    var query = new google.visualization.Query('http://www.google.com/fusiontables/gvizdata?tq='  + queryText);

    query.send(zoomTo);
    }

    function zoomTo(response) {
    if (!response) {
      alert('no response');
      return;
    }
    if (response.isError()) {
      alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
      return;
    } 

      FTresponse = response;
      //for more information on the response object, see the documentation
      //http://code.google.com/apis/visualization/documentation/reference.html#QueryResponse
      numRows = response.getDataTable().getNumberOfRows();
      numCols = response.getDataTable().getNumberOfColumns();
      var geoXml = new geoXML3.parser();
      var bounds = new google.maps.LatLngBounds();
      for (var i = 0; i < numCols; i++){
        if (FTresponse.getDataTable().getColumnLabel(i) == 'geometry') {
          var ColIndex = i;
        }
      }
      if (!ColIndex){
        alert('Geometry column "geometry" not found.')
      }
      for (var i = 0; i < numRows; i++){
          var kml = FTresponse.getDataTable().getValue(i,ColIndex);
          geoXml.parseKmlString("<Placemark>"+kml+"</Placemark>");
          bounds.union(geoXml.docs[i].bounds);
      }    

          map.fitBounds(bounds);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:49:15.170

parse 方法不应该用于解析来自 FusionTables 的 KML 字符串（parseKmlString 方法就是为了做到这一点）。

```
 var kml = FTresponse.getDataTable().getValue(i,ColIndex);
      geoXml.parseKmlString("<Placemark>"+kml+"</Placemark>"); 
```

注意：存储在 FusionTables 中的 KML 片段不包含`<Placemark>`geoxml3 查找的标签，这就是为什么它们被添加到传递给 geoxml3 的字符串中的原因。

GViz 查询响应有 500 行的限制（在我能找到的任何地方似乎都没有记录，我能找到的最好的就是[对它的引用](http://osdir.com/ml/google-visualization-api/2011-07/msg00446.html)，但从那时起文档已经移动）。

看起来您将在您的表格中遇到该限制，以克服使用[FusionTables API v1.0](https://developers.google.com/fusiontables/docs/v1/getting_started)的限制，该 API 返回 GeoJSON，而不是 KML（因此您将不再需要 geoxml3）。

[使用 GViz 和 geoxml3 从 FusionTables 解码 KML“点”的示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_FusionTables_zoomToKmlMarkersA.html)（表包含少于 500 个点）

[使用 Fusion Tables API v1.0 从 Fusion Tables 解析标记的示例](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=14.620282&lng=-90.504716&zoom=12&type=m&tablequery=SELECT%20%20geometry,%20name,%20description%20FROM&tableid=1npi-QWwoZ6LP_9wwHiwiG2omzMm6R9Qoj5aMjkM)

# c# - 仅选择职位为服务员的员工

> ID：15282156
> 
> 赞同：0
> 
> 时间：2013-03-07T21:31:25.887
> 
> 标签：c#, mysql, sql, visual-studio-2010, sql-server-2012

我正在使用 sql server 2012 和 Visual Studio 2010，到目前为止我拥有的是数据库中的一个表和一个小型 c# 应用程序，它将员工加载到`datagridview`

但是我想做的是只选择职位为“服务员”的员工

到目前为止，我已经编写了有关添加记录、编辑删除和显示整个数据的查询。

到目前为止，我已经设法仅通过读取指定的列来显示名称：

```
 private void LoadEmpName()
      {
            sc.Close();
            try
            {
                sc.Open();
                cmd.CommandText = "select * from myEmployees";
                dr = cmd.ExecuteReader();
                if (dr.HasRows)
                {
                    while (dr.Read())
                    {

                        lstNames.Items.Add(dr[1].ToString());
                    }
                }
                sc.Close();

            }
            catch (Exception e)
            {
                MessageBox.Show(e.ToString());
            }
        } 
```

是否可以更改我现有的代码，以便仅显示列为“服务员”的员工（仅限名字），还是我必须编写一个完全不同的查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:34:21.933

如果您有一个名为“JobTitle”的列，那么您的查询将变为：

```
"select * from myEmployees where JobTitle like '%waiter%'"; 
```

“like”是比较运算符，“%”是任意数量的字符的通配符。

如果您想查询不同的事物，可以采用多种方法。最简单的方法是简单地创建一个在查询字符串中包含部分时间测试的新方法：

```
"select * from myEmployees where PartTime = 1"; 
```

但是，对于用户可以执行的每个可能的搜索，您都需要一个新的查询，这将变得低效维护。

当您填充数据网格时，您应该查看在客户端中进行过滤。您带来所有数据（如果您有大量数据，则使用分页），然后让用户通过指定自己的过滤器来决定他们有兴趣查看的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:34:31.053

`where`您应该在 SQL 查询中添加一个子句。我不知道您的数据库结构，但类似；

```
cmd.CommandText = "select * from myEmployees where title='waiter'"; 
```

在 SQL 中而不是在 C# 中进行过滤效率更高。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:34:33.197

```
select * from myEmployees where jobtitle='Waiter' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T21:36:51.150

Discalimer：OP 询问“是否可以更改我现有的代码，以便只显示被列为‘服务员’的员工（仅限名字），还是我必须编写一个完全不同的查询？”

因此，纯粹是为了回答您“不必”使用新查询。您可以在添加之前放置一个 if（假设您的第二列是“职位”）：

```
 while (dr.Read())
                {
                    if(dr[2].ToString().EqualsIgnoreCase("Waiter")){
                        lstNames.Items.Add(dr[1].ToString());
                    }
                } 
```

虽然我不会推荐它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T21:57:00.723

您将不得不更改查询。这是更好的方法。 **我喜欢@CrisF 解决方案。只是除了它。**

```
 private void LoadEmpName()
    {

        try
        {
            sc.Open();
            //it will return all employees containing word waiter in Column JobTitle.
            cmd.CommandText = "select * from myEmployees where JobTitle like '%waiter%' ";

            dr = cmd.ExecuteReader();
            while (dr.Read())
            {
               lstNames.Items.Add(dr[1].ToString());
            }

        }
        catch (Exception e)
        {
            MessageBox.Show(e.ToString());
        }
        finally
        {
           sc.Close();
        }
    } 
```

# php - Dropbox使用没有cURL的PHP 创建一个文件夹

> ID：15282167
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:31:50.943
> 
> 标签：php, dropbox-api

我正在关注本教程[http://fabi.me/en/php-projects/dropphp-dropbox-api-client/](http://fabi.me/en/php-projects/dropphp-dropbox-api-client/)。

我设法使用 sample.php 对应用程序进行身份验证，并使用 sample.php 对其进行了测试

现在我正在尝试使用 SDK 创建一个文件夹，但我不知道如何去做。在第 2 点和第 3 点，代码似乎是乱码。

我试过这个直到现在：

```
<?php

error_reporting(E_ALL);
require_once("DropboxClient.php");

$dropbox = new DropboxClient(array('app_key' => "YOUR_APP_KEY",
'app_secret'=> "YOUR_APP_SECRET",'app_full_access' => false,),'en'); 

$this->apiCall("fileops/create_folder", "POST", array('root' => , 'path' => ));
?> 
```

出于安全原因，我显然用自己的方式更改了 YOUR_APP_KEY 和 YOUR_APP_SECRET。

我无法创建文件夹/目录。我的 php 代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:44:33.720

尝试添加`curl_setopt($context, CURLOPT_UPLOAD,1);`

如果您在 VPS 上，请执行`I removed the 1.1.0 (sudo pecl uninstall oauth), than downloaded 1.0.0 from the oauth page and built oauth.so from source, and since then everything work.`；

对于 DropPHP，将 cURL 禁用为： `$myDropPHP->SetUseCurl(false);`

如果您不确定为什么不起作用，请尝试简单地转储数据：

```
$dump = $this->apiCall("fileops/create_folder", "POST", array('root' => , 'path' => ));
var_dump($dump); exit; 
```

这将帮助您查找错误或不工作的原因...或查看日志 PHP 文件以查找错误（tail -f /var/log/error.log）

或者... [https://serverfault.com/questions/485285/install-oauth-extension-for-php-in-debian-wheezy](https://serverfault.com/questions/485285/install-oauth-extension-for-php-in-debian-wheezy)

尝试使用 DROPBOX PEAR：[http ://pear.dropbox-php.com/](http://pear.dropbox-php.com/)

您可以代替此修复，使用 DROPBOX PHP API 客户端：[http ://www.dropbox-php.com/](http://www.dropbox-php.com/)

您拥有的此代码可能已过时或与旧版本（有效）的某些库冲突，但新版本未解决。这需要手动更改代码。在上面的链接上使用 DROPBOX PHP API 客户端并判断它是否有效。

我在 Codecanyon 上找到了一个 Dropbox API，查看简单的 YT 链接：[http ://www.youtube.com/watch?v=Y3Gy5Ci3sog](http://www.youtube.com/watch?v=Y3Gy5Ci3sog)

# c# - 在信息对象列表上调用 linq 的最有效方法是什么？

> ID：15282171
> 
> 赞同：0
> 
> 时间：2013-03-07T21:32:13.810
> 
> 标签：c#, performance, linq, extension-methods

我试图从我附加的库对象列表中获取我的信息对象中的数据。我拥有的两种解决方案似乎都非常低效。有没有办法将其减少为单个 OfType 调用，而 linq 查询不是更长的变体？

```
using System;
using System.Collections.Generic;
using System.Linq;

namespace LinqQueries
{

    // Test the linq queries
    public class Test
    {
        public void TestIt()
        {
            List<ThirdParty> As = new List<ThirdParty>();

            // This is nearly the query I want to run, find A and C where B 
            // and C match criteria
            var cData = from a in As
                        from b in a.myObjects.OfType<MyInfo>()
                        where b.someProp == 1
                        from c in b.cs
                        where c.data == 1
                        select new {a, c};

            // This treats A and B as the same object, which is what I
            // really want, but it calls two sub-queries under the hood, 
            // which seems less efficient 
            var cDataShorter = from a in As
                               from c in a.GetCs()
                               where a.GetMyProp() == 1
                               where c.data == 1
                               select new { a, c };
        }
    }

    // library class I can't change
    public class ThirdParty
    {
        // Generic list of objects I can put my info object in
        public List<Object> myObjects;
    }

    // my info class that I add to ThirdParty
    public class MyInfo
    {
        public List<C> cs;
        public int someProp;
    }

    // My extension method for A to simplify some things.
    static public class MyExtentionOfThirdPartyClass
    {
        // Get the first MyInfo in ThirdParty
        public static MyInfo GetB(this ThirdParty a)
        {
            return (from b in a.myObjects.OfType<MyInfo>()
                    select b).FirstOrDefault();
        }

        // more hidden linq to slow things down...
        public static int GetMyProp(this ThirdParty a)
        {
            return a.GetB().someProp;
        }

        // get the list of cs with hidden linq
        public static List<C> GetCs(this ThirdParty a)
        {
            return a.GetB().cs;
        }
    }

    // fairly generic object with data in it
    public class C
    {
        public int data;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:40:46.580

如果您说您`cDataShorter`正在产生正确的结果，那么您可以像这样重写它：

```
As.SelectMany(a => a.myObjects, (aa, mo) => new R {Tp = aa, Mi = mo as MyInfo})
  .Where(r => r.Mi != null && r.Mi.someProp == 1)
  //.Distinct(new Comparer<R>((r1, r2) => r1.Tp.Equals(r2.Tp))) 
  // If you need only one (first) MyInfo from a ThirdParty 
  // You don't need R if you're not going to use Distinct, just use an anonymous
  .SelectMany(r => r.Mi.cs, (rr, c) => new {a = rr.Tp, c})
  .Where(ao => ao.c.data == 1)      

public class R {
    public ThirdParty Tp;
    public MyInfo Mi;
} 
```

为简单起见，`Comparer`从[那里](https://stackoverflow.com/questions/98033/wrap-a-delegate-in-an-iequalitycomparer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T15:14:20.093

不幸的是，答案是“视情况而定”。我必须以两种方式编写查询并对其进行计时。

1000 个第三方对象，每个 1 个 MyObject，每个 1000 个 c，所有结果都符合条件，第一次查询速度是原来的两倍。如果没有 MyObjects 符合条件，则查询 1 的速度要快两个数量级。但是，如果你有多个MyObjects，效率倒转，100个ThirdParty，100个MyObjects，每个100个C，所有结果匹配，第二个查询比第一个快两个数量级。没有 MyObjects 匹配，第一个出来得更快。

实际上，我最终实施了较慢的解决方案，因为它使代码更清晰，而且较慢查询的性能也不是那么糟糕。

# php - SIMpleXML XPath 从 XML 节点获取字符串值

> ID：15282172
> 
> 赞同：0
> 
> 时间：2013-03-07T21:32:16.543
> 
> 标签：php, xpath, simplexml

我一直在尝试自己开发一个 xml 驱动的水平菜单作为一个私人项目。
但似乎我被卡住了.. 大致..
XML 文件（navigation.xml）

```
<navigation>
    <menu>
        <link>url</link>
        <tag>hover help text</tag>
        <text>Link text</text>
    </menu
</navigation> 
```

所以，我有一个存储旧链接/文本/标签名称的变量，我想通过 SimpleXML/XPath 更新它。但它似乎不起作用..
PHP 代码：

```
$load = SimpleXML_load_file('database/navigation.xml');
    foreach( $load->xpath("menu[@link=". $link ." and @tag=". $tag ." and @text=". $text ."]") as $item ) {
      $item->link = $link2; //link2->new link value, $link->old value
      $item->tag = $tag2; //tag2->new tag value, $tag->old value
      $item->text = $text2; //text2->new text value, $text->old value
    }
    $load->asXML('database/navigation.xml'); 
```

有什么办法可以让它工作吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:36:01.017

“@link”中的“@”符号用于引用元素的属性，而不是子元素。

```
foreach( $load->xpath("menu[link=". $link ." and tag=". $tag ." and text=". $text ."]") as $item ) { 
```

您可能需要将您的陈述用引号括起来

```
foreach( $load->xpath(sprintf("menu[link=\"%s\" and tag=\"%s\" and text=\"%s\"]",$link,$tag,$text) as $item ) { 
```

# perl - 从 Perl 发布到 WEB API 会导致 [FromBody] 中出现空值

> ID：15282174
> 
> 赞同：0
> 
> 时间：2013-03-07T21:32:19.160
> 
> 标签：perl, asp.net-web-api

我们创建了一个 WEB API（在 .NET 框架 4.0 中）并将端点信息提供给我们的一个客户。他们在 Perl 中创建了一个发布到我们端点的程序。

到目前为止，他们发布的每个帖子都以 null 的形式到达我们的端点。当我们最初开始编程时，在通过 $.ajax 发布时，我们在 JQuery 中遇到了同样的问题。我们通过在发布数据的开头添加一个“=”来解决它。

他们提交的 Perl 代码如下：

```
sub _postPackages {
    my ($self,$dataToSend) = @_;

    use LWP::UserAgent;
    my $ua = LWP::UserAgent->new;
    $ua->agent("integrationapp/1.0 ");

    # Create a request
    my $req = HTTP::Request->new(POST => $self->{postAddress} );

    $req->content_type("application/json;charset=utf-8");
    $req->content($dataToSend->{data});

    #print Data::Dumper->Dump([$req]);

    # Pass request to the user agent and get a response back
    my $res = $ua->request($req); 
```

其中**postAddress**是我们的端点，**$dataToSend**是消息数据。他们是否可能需要在**$dataToSend**消息的开头添加“=”。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:58:52.290

这是一些伪代码在这里..

但我猜你想做这样的事情：

```
# some post sub
my ($self, $data) = @_; 
my $ua = $self->get_user_agent();
my $json_xs = $self->get_json_xs();

my $json_encoded = $json_xs->utf8->encode($data);
$self->set_post_data($json_encoded);
$self->set_api_call();

my $response_body = $ua->post(
    $self->get_api_call(),
    'Content'      => $self->get_post_data(),
    'Content-type' => "application/json;charset=UTF-8"
);  
print STDERR "POSTING NEW RESOURCE: " . Dumper($self); 
```

# java - Java 使用的内存远多于使用 -Xmx 分配的内存

> ID：15282178
> 
> 赞同：30
> 
> 时间：2013-03-07T21:32:32.070
> 
> 标签：java, memory, memory-management, stack

我有一个项目我正在为一个类编写（用Java），教授说我们不允许使用超过200m 我用-Xmx50m 将堆栈内存限制为50m（只是为了绝对确定）但根据顶部, 它仍然使用 300m

我尝试运行[Eclipse 内存分析器](http://www.eclipse.org/mat/)，它只报告 26m

难道这一切都是堆栈上的内存吗？我很确定我永远不会超过大约 300 个方法调用的深度（是的，这是一个递归 DFS 搜索），所以这意味着每个堆栈帧几乎都用完了兆字节，这似乎很难相信。

该程序是单线程的。有谁知道我可能会减少内存使用的其他地方？另外，我如何检查/限制堆栈正在使用多少内存？

更新：我现在使用以下 JVM 选项没有效果（根据顶部仍然大约 300m）：`-Xss104k -Xms40m -Xmx40m -XX:MaxPermSize=1k`

另一个更新：实际上，如果我让它运行更长一点（使用所有这些选项）大约一半的时间它会在 4 或 5 秒后突然下降到 150m（另一半不会下降）。真正奇怪的是我的程序没有随机性（正如我所说它是单线程的），所以没有理由在不同的运行中表现不同

它可能与我正在使用的 JVM 有关吗？

```
java version "1.6.0_27"
OpenJDK Runtime Environment (IcedTea6 1.12.3) (6b27-1.12.3-0ubuntu1~10.04)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode) 
```

根据java -h，默认JVM是-server。我尝试添加 -cacao，现在（使用所有其他选项）它只有 59m。所以我想这可以解决我的问题。谁能解释为什么这是必要的？另外，有什么我应该知道的缺点吗？

另一个更新：与服务器相比，可可真的很慢。这是一个糟糕的选择

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-07T21:41:07.477

top 命令反映了 Java 应用程序使用的内存总量。其中包括：

*   JVM本身的基本内存开销
*   堆空间（以 -Xmx 为界）
*   永久代空间（-XX:MaxPermSize - 并非所有 JVM 的标准）
*   线程堆栈空间（每个堆栈的-Xss）可能会根据线程数显着增长
*   本机分配使用的空间（使用 ByteBufer 类或 JNI）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-10-11T09:45:17.893

```
Max memory = [-Xmx] + [-XX:MaxPermSize] + number_of_threads * [-Xss] 
```

这里最大堆内存为 -Xmx ，最小堆内存为 -Xms ，堆栈内存为 -Xss 和 -XX maxPermSize

以下示例说明了这种情况。我已经使用以下启动参数启动了我的 tomcat：

```
-Xmx168m -Xms168m -XX:PermSize=32m -XX:MaxPermSize=32m -Xss1m 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-07T21:37:13.497

与`-Xmx`您一起配置堆大小。配置堆栈大小使用`-Xss`参数。这两个参数的总和应该大约是您想要的：

```
-Xmx150m -Xss50m 
```

例如。

另外还有`-XX:MaxPermSize`控制参数。此参数的`-client`默认值为 32mb 和`-server`64mb。根据您的配置计算它也是如此。PermGen 空间是：

> 永久代用于保存 VM 本身的反射，例如类对象和方法对象。

所以基本上它存储 JVM 的内部数据，比如类定义和实习字符串。

最后我必须说有一个部分是你无法控制的，那就是本地 java 进程使用的内存。Java 是程序，就像其他程序一样，所以它也使用内存。如果您在任务管理器中查看内存使用情况，您将看到此内存以及您的程序内存消耗。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-07T21:34:53.783

重要的是要注意“使用的总内存”（Linux 领域的 RSS）包括 JDK 堆（+其他 JDK 区域）以及分配的任何“本机内存”。

例如，这些人发现在 GC 之间分配过多的 jaxbcontexts（具有关联的本机内存）可能会导致它使用大量额外的 RAM。如果您不关闭它（或 GZipStream 等），另一个常见的显然是 ZipInflater

[http://sleeplessinslc.blogspot.com/2014/08/jvm-native-memory-leak.html](http://sleeplessinslc.blogspot.com/2014/08/jvm-native-memory-leak.html)

他的最终解决方法/修复是“更频繁地”进行 GC（通过使用 GC1 垃圾收集器，或指定*较小*的[讽刺地] -Xmx 设置）或通过缓存 JaxBContext 对象（因为它们没有关闭方法，因此您无法控制泄漏）。

另请注意，有时您可以通过检查 jstack 找到内存罪魁祸首：http: [//javaeesupportpatterns.blogspot.com/2011/09/jaxbcontext-performance-problem-case.html](http://javaeesupportpatterns.blogspot.com/2011/09/jaxbcontext-performance-problem-case.html)

有时也可能“错过”关闭，例如 GZipStreams 意外[http://kohsuke.org/2011/11/03/quiz-time-memory-leak-in-java](http://kohsuke.org/2011/11/03/quiz-time-memory-leak-in-java)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-07T21:46:07.763

您是否尝试过使用 JVisualVM？

[http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jvisualvm.html)

我经常发现它可以帮助我追踪这些东西。它会向您显示每种内存的使用量，甚至让您深入了解并找出什么。

# android - 如何将 JSONObject 转换为类对象？

> ID：15282181
> 
> 赞同：26
> 
> 时间：2013-03-07T21:32:55.293
> 
> 标签：android, gson

我需要为我的 android 项目使用 gson 库将 JSONObject 转换为 Location 对象。我不确定如何做到这一点。谁能帮我这个。提前致谢。

我有一个类似的代码

```
JSONArray input = new JSONArray(extras.getString("loc_json")); 
```

我想将从 JSONArray 获取的 JSONObject 转换为 Location 类对象。我只是想知道是否有直接执行此操作的函数。

如果我以错误的方式提出问题，请原谅我。由于我没有直接的功能，所以我是这样做的。

```
 loc_temp = (Location) gson.fromJson(input.getJSONObject(i).toString(), Location.class);; 
```

对不起这个愚蠢的问题。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-07T21:40:45.820

这是GSON[的教程- 我认为它应该有助于加深您的理解。](http://www.javacodegeeks.com/2011/01/android-json-parsing-gson-tutorial.html)本质上，解析是这样完成的：

```
String mJsonString = "...";
JsonParser parser = new JsonParser(); 
JsonElement mJson =  parser.parse(mJsonString);
Gson gson = new Gson();
MyDataObject object = gson.fromJson(mJson, MyDataObject.class); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-02-07T03:05:15.700

如果您仍想使用**org.json.JSONObject**：

```
org.json.JSONObject o;
ObjectMapper m = new ObjectMapper();
MyClass myClass = m.readValue(o.toString(), MyClass.class); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-20T05:43:11.513

使用**com.google.gson.JsonObject & JsonArray** 而不是 org.json。*

像这样 ：

```
Gson gson = new Gson();
Type typeOfT = new TypeToken<List<Location.class>>(){}.getType();
JsonParser parser = new JsonParser();
JsonObject jo = (JsonObject) parser.parse(jsonStr);
JsonArray ja = jo.getAsJsonArray("memberName");
list = gson.fromJson(ja, typeOfT); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-17T09:39:54.780

对于科特林

```
 val objType = object : TypeToken<MyClass>() {

    }.getType()
    var myclassObj = gson.fromJson(value,objType) 
```

或者

```
 val objectResponse = Gson().fromJson(Gson().toJson(resp), MyClass::class.java) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-19T11:01:41.257

将 JSONObject 转换为模型类::

```
val jsonObject = JSONObject(data[0].toString())
val jsonModel = jsonObject.getJSONObject(KEY.message).toString()
val chatModel = Gson().fromJson(model, ChatModel::class.java)) 
```

# android - Cordova 2.5.0，“AndroidManifest.xml：文件丢失”

> ID：15282182
> 
> 赞同：2
> 
> 时间：2013-03-07T21:32:57.930
> 
> 标签：android, eclipse, cordova

我下载了 cordova 2.5.0 并按照说明进行操作。当我尝试在 Eclipse 中“构建”项目时，出现以下错误：

AndroidManifest.xml：文件丢失！

但是项目中有 /IS/ 一个 AndroidManifest.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T00:01:58.017

我不确定我是如何修复它的。我想我删除了项目中的 AndroidManifest.xml 文件。然后我只是在目录中创建了一个新目录并刷新，突然间它看到它并停止抱怨......

# tomcat - Servlet 访问过滤器和角色

> ID：15282184
> 
> 赞同：0
> 
> 时间：2013-03-07T21:33:05.803
> 
> 标签：tomcat, servlets, servlet-filters

我正在使用 Servlet 过滤器来实施访问控制。扩展它以测试用户角色的最佳方法是什么？我可以想到几种解决方案，但没有一个是优雅的。

编写角色测试并不难。但是如何将角色传递给给定 url 的过滤器？

例如在 web.xml

```
<filter>
    <filter-name>accessControl</filter-name>
    <filter-class>filter.AccessControlFilter</filter-class>
    <init-param>
        <param-name>loginPage</param-name>
        <param-value>/login/login.jsp</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>accessControl</filter-name>
    <url-pattern>/admin/*</url-pattern>
</filter-mapping>
<filter-mapping>
    <filter-name>accessControl</filter-name>
    <url-pattern>/domain/*</url-pattern>
</filter-mapping> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T09:53:10.690

好吧，这就是为什么总是建议不要自定义 Authorization ，当有可用的标准并且在 Plenty 中有实现它们的框架时。

我最喜欢的是 Spring Security。检查本教程，这应该使您朝着正确的方向前进

*   [一大堆 Spring Security 教程](http://www.mkyong.com/tutorials/spring-security-tutorials/)
*   [Spring Security - 使用角色的访问限制](http://www.mkyong.com/spring-security/spring-security-access-control-example/)

另一种广泛使用的替代方案，但不如 spring 那样优雅和简单。

[JAAS](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jaas/tutorials/index.html)

# python - 设置 matplotlib 颜色栏范围

> ID：15282189
> 
> 赞同：25
> 
> 时间：2013-03-07T21:33:28.970
> 
> 标签：python, matplotlib

我想设置 matplotlib 颜色条范围。这是我到目前为止所拥有的：

```
import numpy as np
import matplotlib.pyplot as plt
x = np.arange(20)
y = np.arange(20)
data = x[:-1,None]+y[None,:-1]

fig = plt.gcf()
ax = fig.add_subplot(111)

X,Y = np.meshgrid(x,y)
quadmesh = ax.pcolormesh(X,Y,data)
plt.colorbar(quadmesh)

#RuntimeError: You must first define an image, eg with imshow
#plt.clim(vmin=0,vmax=15)  

#AttributeError: 'AxesSubplot' object has no attribute 'clim'
#ax.clim(vmin=0,vmax=15) 

#AttributeError: 'AxesSubplot' object has no attribute 'set_clim'
#ax.set_clim(vmin=0,vmax=15) 

plt.show() 
```

如何在此处设置颜色条限制？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-07T21:35:22.650

精氨酸。它总是你尝试的最后一件事：

```
quadmesh.set_clim(vmin=0, vmax=15) 
```

作品。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-26T19:08:18.290

Matplotlib 1.3.1 - 看起来颜色条刻度仅在颜色条被实例化时才绘制。更改颜色条限制 (set_clim) 不会导致重新绘制刻度。

我找到的解决方案是在与原始颜色条相同的轴条目中重新实例化颜色条。在这种情况下，axes[1] 是原始颜色条。添加了一个新的颜色条实例，该实例使用 cax=（子轴）kwarg 指定。

```
 # Reset the Z-axis limits
           print "resetting Z-axis plot limits", self.zmin, self.zmax
           self.cbar = self.fig.colorbar(CS1, cax=self.fig.axes[1]) # added
           self.cbar.set_clim(self.zmin, self.zmax)
           self.cbar.draw_all() 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-05-27T10:01:14.047

[对不起，实际上是弗吉尼亚州对 The Red Gator 的评论，但没有足够的声誉来评论]

在绘制imshow 对象*后*，我一直在更新它的颜色条，并且数据使用 imshowobj.set_data() 进行了更改。使用 cbarobj.set_clim() 确实会更新颜色，但不会更新颜色条的刻度或范围。相反，您必须使用 imshowobj.set_clim() 来正确更新图像和颜色条。

```
data = np.cumsum(np.ones((10,15)),0)
imshowobj = plt.imshow(data)
cbarobj = plt.colorbar(imshowobj) #adjusts scale to value range, looks OK
# change the data to some data with different value range:
imshowobj.set_data(data/10) #scale is wrong now, shows only dark color
# update colorbar correctly using imshowobj not cbarobj:
#cbarobj.set_clim(0,1) #! image colors will update, but cbar ticks not
imshowobj.set_clim(0,1) #correct 
```

# grails - 创建和安装 grails 插件 - 我的插件如何在安装期间/安装后访问依赖于插件的资源？

> ID：15282193
> 
> 赞同：4
> 
> 时间：2013-03-07T21:33:39.533
> 
> 标签：grails, plugins, dependencies

这个问题是我在这里发布的另一个问题的扩展：

[在 Grails 2 中，如何从应用程序所依赖的插件中包含 Gant 脚本中的目标？](https://stackoverflow.com/questions/15253070/in-grails-2-how-do-you-includetargets-from-gant-scripts-from-a-plugin-your-app/15253738?noredirect=1#15253738)

我正在编写一个 grails 插件，它是我公司特定版本的 shiro 插件，例如。我的公司四郎。我在 BuildConfig.groovy 中将 shiro 设置为我的插件的依赖项，如下所示：

```
plugins {compile(":shiro:1.1.4")} 
```

我打包插件并尝试将其安装到一个名为 foo 的新 grails 应用程序中：

```
foo> grails install-plugin ../my-company-shiro/grails-my-company-shiro-01.zip 
```

没问题。现在，我想在 foo 中运行一个脚本，它是 my-company-shiro 的一部分，它又引用了来自 shiro 插件的脚本：

```
foo>grails create-auth-controller 
```

我得到以下失败：

```
Error Error executing script CreateAuthController: No such property: shiroPluginDir for class: ..... 
```

这发生在 b/c 我正在执行的脚本之一尝试访问 shiro 的脚本之一，如下所示：

```
includeTargets << new File (shiroPluginDir, "/scripts/_ShiroInternal.groovy") 
```

这个参考在我编译我的插件时有效，但当我在另一个 grails 应用程序中安装它时不在这里。

我是否在 BuildConfig.groovy 中错误地设置了依赖项，以至于 shiro 的文件没有包含在我的插件中，因此我无法引用它？

*   shiro 插件出现在我的 .grails 缓存 my-compnay-shiro/plugins/shiro-1.1.4
*   当我将 my-company-shiro 插件安装到 foo 时，在 .grails 缓存 foo/plugins/my-company-shiro-0.1/dependencies.groovy 和 plugin.xml 文件中引用 shiro。我在这里没有看到任何 shiro 的脚本或文件，但我不知道它们是否应该被复制到这里。

安装时对 shiroPlugin 的引用是否不正确？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T00:25:23.307

`grails install-plugin`已弃用，您需要改为使用`BuildConfig.groovy`。我在这里进行了测试，在应用程序中声明了自定义插件并且它可以工作，您可以使用它`grails.plugin.location`来指定插件的文件夹。

考虑一个名为**shiro-test**的插件，BuildConfig 应该是：

```
grails.project.dependency.resolution = {
   ...
   legacyResolve true // whether to do a secondary resolve on plugin installation, not advised and here for backwards compatibility
   ...
}

grails.plugin.location."shiro-test" = "path/to/plugin" 
```

然后你刷新你的依赖并可以从`shiro-test`.

# php - 在 PHP/Javascript 中调用浏览器后退按钮

> ID：15282204
> 
> 赞同：1
> 
> 时间：2013-03-07T21:34:28.120
> 
> 标签：php, javascript

我有一个表单，它会将用户发送到不同的表单，以防他们没有完成它以返回表单并完成任何遗漏的内容。现在，除非用户按下浏览器后退按钮，否则页面会重新加载，这意味着任何数据都会丢失。

几乎当他们返回上一页时，他们已经填写的任何内容都应该保持不变。

我有以下两页：

第 1 页：

```
<?PHP

echo "<a href='page2.php'>NEXT</a>";
echo "<input type=text size=25 name=txt />";
?> 
```

第2页：

```
<?php
$refer = $_SERVER['HTTP_REFERER'];
$lastlink = "<a href='$refer'>BACK</a>";

echo $lastlink;
?> 
```

在第二页上，如果我单击“返回”返回到第 1 页，则在第 1 页中输入的任何内容都将丢失，这是我不想要的。如何在不使用 Javascript 的情况下解决它？用Javascript？我知道在 javascript 中我可以使用

```
<a href="javascript:history.go(-1);">BACK</a> 
```

但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:36:06.893

看看[html5 历史 API](http://diveintohtml5.info/history.html)。History api + ajax 是很棒的组合

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T21:43:32.617

您还可以使用会话`$_POST`在提交时存储并检查它是否在第一个表单的页面加载时设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:37:46.370

我通常满足于：

```
history.back(-1); 
```

使用服务器端逻辑发送回上一页不是一个好方法，所以我不鼓励它。

# .net - 有没有办法匹配正则表达式参数而不关心它们的顺序？

> ID：15282207
> 
> 赞同：1
> 
> 时间：2013-03-07T21:34:42.183
> 
> 标签：.net, regex

我正在尝试转换这样的搜索查询：

```
bridge AND (car OR boat) 
```

进入与此匹配的正则表达式：

```
My car goes over bridge. 
```

我接近得到它（我认为），这就是我到目前为止所拥有的：

```
.*(bridge).*(car|boat) 
```

虽然这不起作用，但是这样做：

```
.*(car|boat).*(bridge) 
```

我的正则表达式似乎取决于字符串中单词的顺序。有没有办法匹配参数而不关心它们的顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:38:41.440

简短的回答：不，不是在一个正则表达式中。正则表达式用于匹配*有序*的字符序列。

当然，您*可以*生成一个明确允许两种排序的模式。即，如果您想以任何顺序匹配 A 或 B，您将生成如下内容：`(?:.*A.*B)|(?:.*B.*A)`。但是如果术语数量增加，覆盖所有排列将产生相当大的正则表达式。

更好的解决方案可能是将每个术语与一个单独的正则表达式匹配，然后自己组合匹配项，例如通过实现一个简单的布尔表达式树。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:47:56.753

您可以使用前瞻断言`(?= ... )`来完成此操作。在处理交替 (|) 时，这样的断言将克服排列的负担。

例如：

```
^(?=.*?\bbridge\b)(?=.*?\b(car|boat)\b) 
```

由于断言是“零宽度”，因此在此示例中，一旦评估了任一断言，您仍处于字符串的开头。实际上，此模式表示“匹配字符串的开头”，并且“确保在字符串开头之后的某个点找到“桥”和“汽车或船”。

每个断言都对应于查询的 AND 部分；OR 将由交替处理。当您的查询更改时，这可能会更改，但适用于您的示例。

# jquery - 难以从 HTML 字符串中找到特定 Span 的内部文本

> ID：15282210
> 
> 赞同：2
> 
> 时间：2013-03-07T21:34:47.233
> 
> 标签：jquery, find, each, html

我是 Jquery 的新手，在识别 HTML 字符串中的特定标签时遇到问题。我的 HTML 字符串是：

```
<span id="name">myname</span>  
<span id="familyname">mysurname</span>     
<span id="telnum">mytelnum</span>  
<span id="postcode">myPostCode</span> 
<span id="email">my@email.com</span> 
```

我想要的是将每个跨度内部文本放在单独的变量中。

预期结果是：

```
var a = 'myname';
var b = 'mysurname';
var c = 'telnum';
var d = 'myPostCode';
var e = 'my@email.com'; 
```

但在我的代码中，听起来 find 功能不起作用！这是我的代码：

```
var myHtmlCode = '<span id="name"> myname</span> <span id="familyname">mysurname</span> <span id="telnum"> mytelnum</span><span id="postcode"> myPostCode</span><span id="email">my@email.com</span>';

var $temp = $(myHtmlCode).find('span').contents().each(function() {
    alert(this.val());  
}); 
```

任何帮助表示赞赏....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:37:42.453

不要调用`contents`，这里没用，因为你可以从元素中调用`text`函数。`span`

如果您希望能够探索已解析的字符串，则必须将跨度嵌入到一个顶级元素中。

您可以将文本放在这样的对象中：

```
var texts = {};
$('<div>'+myHtmlCode+'</div>').find('span')
  .each(function(){ texts[this.id] = $(this).text() }); 
```

然后，您可以阅读文本，例如`texts.name`。

[**演示**](http://jsbin.com/usapum/1/edit)（打开控制台查看`texts`对象）。

当然，您也可以将其用作全局变量，即使用`window.name`而不是`texts.name`，但确实建议避免使全局名称空间混乱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:22:49.947

我使用了以下代码：

```
var $temp = $(myHtmlCode).each(function () {

            if (this.id == "name") {

            alert(this.innerHTML);
            } 
        }); 
```

# node.js - Node.js 和 postgresql 的问题

> ID：15282216
> 
> 赞同：0
> 
> 时间：2013-03-07T21:35:23.133
> 
> 标签：node.js, postgresql, pg

我正在用 node 中的 express 做一个应用程序。在提出使用 PostgreSQL 的想法之前，我曾考虑过不同的 DBMS（我没有任何 NoSQL 经验），但由于一些意外错误，这让我很困扰。

我正在尝试检查用户登录时是否存在，但是 Select 语句不起作用，不知道为什么：

```
var query = client.query('SELECT "name" FROM "User" WHERE "pass" = $1',  [req.body.password]);
console.log(query.toString());
query.on('row', function(row) {
    console.log('user "%s"', row.name);
}); 
```

在此之后，初始页面应该呈现（实际工作）。顺便说一句，我正在使用`node-postgres`驱动程序。

如果我把`client.query('SELECT * FROM "User"');`数据库之类的东西完美地工作（我也不需要这种行为）。我已经阅读了有关 PostgreSQL 标识符问题的信息，但它仍然在发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T22:48:31.183

好的，原来用户表存在，我创建的表区分大小写。它的工作原理知道。

我在 psql 上尝试过`select * from user`，它返回了当前用户。试过`select * from "User"`了，结果我错了。有趣的事情。

# database - OleDbDataAdapter 填充创建重复行

> ID：15282220
> 
> 赞同：1
> 
> 时间：2013-03-07T21:35:38.903
> 
> 标签：database, vb.net, ms-access, oledb

我遇到了一个问题，我使用数据适配器更新然后重新填充数据表。调用填充方法后，行被复制。一个 ID 具有正确的（新）ID，而另一个 ID 显示 -1。下面的代码完美运行，是我希望我的更复杂代码执行的更简单的形式。考虑以下内容：

```
Imports WindowsApplication1.testDataSet
Imports WindowsApplication1.testDataSetTableAdapters
Imports System.Data.OleDb
Public Class Form1
    Private Sub Button1_Click(ByVal sender As System.Object, _
    ByVal e As System.EventArgs) Handles Button1.Click
        Dim DA As New testTableAdapter
        Dim DT As New testDataTable
        DA.Fill(DT)
        Dim NR As testRow = DT.Rows.Add
        NR.SomeText = "Test"
        Dim DA2 As New OleDbDataAdapter("SELECT * FROM test", _
        DA.Connection.ConnectionString)
        Dim CB As New OleDbCommandBuilder(DA2)
        DA2.Update(DT)
        DA.Fill(DT)
        For Each R As testRow In DT.Rows
            Debug.Print(R.ID)
        Next
    End Sub
End Class 
```

上面的代码完美运行。它们的键列不显示 -1，没有重复项。现在考虑我的应用程序中的以下代码，该代码导致重复行，其中键列在最后一个之后导致 -1 `LoadLoadNumbers()`。

```
 Dim AccountLoans As IEnumerable(Of LoanNumbersRow) = _
    From L As LoanNumbersRow In LoanNumbers _
    Select L Where L.AccountID = ID

    If Not frmFindLoans.IsDisposed AndAlso _
    frmFindLoans.DialogResult = Windows.Forms.DialogResult.OK Then
        For Each L As LoanNumbersRow In AccountLoans
            If (From R As DataGridViewRow In frmFindLoans.dgvLoans.Rows _
            Select R Where R.Cells("LoanNumber").Value = L.LoanNumber).Count = 0 Then
                If L.IsWhenDeletedNull Then
                    L.WhenDeleted = Now
                    L.DeletedBy = UserName()
                End If
            End If
        Next

        Dim NewLoan As LoanNumbersRow
        Dim FindLoan As IEnumerable(Of LoanNumbersRow)
        For Each R As DataGridViewRow In frmFindLoans.dgvLoans.Rows
            FindLoan = From L As LoanNumbersRow In LoanNumbers.Rows _
            Select L Where L.LoanNumber = R.Cells("LoanNumber").Value And _
            L.AccountID = ID
            If FindLoan.Count = 0 Then
                NewLoan = LoanNumbers.Rows.Add
                NewLoan.AccountID = Acc.AccountID
                NewLoan.LoanNumber = R.Cells("LoanNumber").Value
                NewLoan.LoanBusinessName = R.Cells("LoanBusiness").Value
                NewLoan.LoanBorrower = R.Cells("LoanBorrower").Value
                NewLoan.AddedBy = UserName()
                NewLoan.WhenAdded = Now
            End If
        Next
        Try
            Dim CB As New OleDbCommandBuilder(LoanNumbersAdapter)
            LoanNumbersAdapter.Update(LoanNumbers)
        Catch ex As Exception
            MsgBox(ex.Message, MsgBoxStyle.Critical, "Error saving loan number data")
            Exit Sub
        End Try

        If Not LoadLoanNumbers() Then Exit Sub
    End If 
```

来自模块的其他变量等：

```
Public LoanNumbersAdapter As OleDbDataAdapter
Public LoanNumbers As New LoanNumbersDataTable
Public Sub InitializeAdapters()
    LoanNumbersAdapter = New OleDbDataAdapter( _
    "SELECT * FROM LoanNumbers WHERE WhenDeleted IS NULL ORDER BY WhenAdded DESC", AccountingConn)
End Sub
Public Function LoadData(ByVal DA As OleDbDataAdapter, ByVal DT As DataTable) As Boolean
    Try
        DA.Fill(DT)
        Return True
    Catch ex As Exception
        MsgBox(ex.Message, MsgBoxStyle.Critical, "Error loading the " & DT.TableName & " table")
        Return False
    End Try
End Function
Public Function LoadLoanNumbers() As Boolean
    Return LoadData(LoanNumbersAdapter, LoanNumbers)
End Function 
```

为什么顶部的简单测试可以正常工作，但我的实际应用程序在键列上创建了带有 -1 的重复行？我想我可以在更新后填充之前清除数据表，但是一旦它开始变成一个大表，它不会陷入困境吗？*顺便说一句：数据库是 MS 访问，它是 .NET 3.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T18:31:56.017

这是我的胶带解决方案:(

```
''' <summary>
''' Removes any rows where the ID/key column is less than zero
''' </summary>
<Extension()> Public Sub DeleteRelics(ByVal DT As DataTable)
    If DT.PrimaryKey.Count = 0 Then Exit Sub
    For Each R As DataRow In _
    (From Rows As DataRow In DT.Rows _
     Select Rows Where Rows(DT.PrimaryKey.First.ColumnName) < 0)
        R.Delete()
    Next
    DT.AcceptChanges()
End Sub 
```

# java - 如何在 rJava 包中使用 toJava 在 Java 中使用 R 函数

> ID：15282221
> 
> 赞同：3
> 
> 时间：2013-03-07T21:35:41.157
> 
> 标签：java, r

我有一个用 R 编写的长函数，我想用 Java 调用这个函数。现在我正在使用 JRI 来链接 R 和 Java。如果我只使用 eval(XX)，我可以在 java 环境中从 R 获得返回。但是因为我的函数很长，所以评估每一行都是不切实际的。如何使用`toJava()`来生成引用以及如何在 java 中使用它？

我用谷歌搜索了一个例子：在此处输入代码

```
.jinit()
  # requires JRI and REngine classes
  .jengine(TRUE)
  f <- function() { cat("Hello!\n"); 1 }
  fref <- toJava(f)
  # to use this in Java you would use something like:

 # public static REXP call(REXPReference fn) throws REngineException, REXPMismatchException {
  #  return fn.getEngine().eval(new REXPLanguage(new RList(new REXP[] { fn })), null, false);
  # }
  # .jcall("Call","Lorg/rosuda/REngine/REXP;","call", fref) 
```

我可以在 R 环境中创建 Fref，但如何在 Java 中引用它

例如：R中的函数是： `f= function (){a=c(1,2,3); b=c(2,3,4); return (a+b)}` 如何在Java中加载这个函数来计算结果？

# javabeans - 优缺点 bean vs SSJS？

> ID：15282222
> 
> 赞同：0
> 
> 时间：2013-03-07T21:35:47.243
> 
> 标签：javabeans, xpages

我试图构建一个始终检索相同文档（计数器文档）、获取当前值、递增它并使用新值保存文档的 bean。最后，它应该将值返回给调用方法，这将在我的 Xpage 中获得一个新的序列号。

由于 Domino 对象不能被序列化或单例化，创建一个 bean 这样做有什么好处，而不是创建一个 SSJS 函数做同样的事情？

我的 bean 必须调用会话、数据库、视图和文档，然后每次都会调用它们。

除了会话和数据库之外，在 SSJS 函数中也是如此。

豆：

```
public double getTransNo() {
        try {
            Session session = ExtLibUtil.getCurrentSession();
            Database db = session.getCurrentDatabase();
            View view = db.getView("vCount");
            view.refresh();
            doc = view.getFirstDocument();
            transNo = doc.getItemValueDouble("count");
            doc.replaceItemValue("count", ++transNo);

            doc.save();
            doc.recycle();
            view.recycle();
        } catch (NotesException e) {
            e.printStackTrace();
        }

        return transNo;
    } 
```

SSJS：

```
function getTransNo() {
    var view:NotesView = database.getView("vCount");
    var doc:NotesDocument = view.getFirstDocument();
    var transNo = doc.getItemValueDouble("count");
    doc.replaceItemValue("count", ++transNo);
    doc.save();
    doc.recycle();
    view.recycle();
    return transNo;     
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T06:40:31.963

两段代码都不好（抱歉直言不讳）。
如果您的视图中有一个文档，则不需要视图刷新，这可能会在另一个视图的刷新之后排队并且非常慢。大概您正在谈论单个服务器解决方案（因为复制计数器文档肯定会导致冲突）。

您在 XPages 中所做的是创建一个 Java 类并将其声明为应用程序 bean：

```
 public class SequenceGenerator {
    // Error handling is missing in this class
    private double sequence = 0;
    private String docID;

    public SequenceGenerator() {
      // Here you load from the document
      Session session = ExtLibUtil.getCurrentSession();
      Database db = session.getCurrentDatabase();
      View view = db.getView("vCount");
      doc = view.getFirstDocument();
      this.sequence = doc.getItemValueDouble("count");
      this.docID = doc.getUniversalId();
      Utils.shred(doc, view); //Shred currenDatabase isn't a good idea
    }   

    public synchronized double getNextSequence() {
      return this.updateSequence();
    }

    private double updateSequence() {
       this.sequence++;
       // If speed if of essence I would spin out a new thread here
       Session session = ExtLibUtil.getCurrentSession();
       Database db = session.getCurrentDatabase();        
       doc = db.getDocumentByUnid(this.docID);
       doc.ReplaceItemValue("count", this.sequence);
       doc.save(true,true);
       Utils.shred(doc);
       // End of the candidate for a thread
       return this.sequence;
     }
 } 
```

SSJS 代码的问题：如果 2 个用户一起点击会发生什么？至少你也需要在`synchronized`那里使用。使用 bean 也可以在 EL 中访问它（您需要注意不要经常调用它）。同样在Java中，您可以将写回推迟到不同的线程 - 或者根本不写回，并且在您的类初始化代码中读取带有实际文档的视图并从那里选择值。

**更新**： Utils 是一个具有静态方法的类：

```
 /**
 * Get rid of all Notes objects
 * 
 * @param morituri = the one designated to die, read your Caesar!
 */
public static void shred(Base... morituri) {

    for (Base obsoleteObject : morituri) {
        if (obsoleteObject != null) {
            try {
                obsoleteObject.recycle();
            } catch (NotesException e) {
                // We don't care we want go get
                // rid of it anyway
            } finally {
                obsoleteObject = null;
            }
        }
    }

} 
```

# ios - 核心数据 NSValidationErrorObject，导致崩溃

> ID：15282231
> 
> 赞同：3
> 
> 时间：2013-03-07T21:36:32.390
> 
> 标签：ios, objective-c, cocoa-touch, core-data

我正在开发一个有用户的应用程序，每个用户都与关注者有多对多的关系。我目前在保存新用户对象时遇到了一些问题。该应用程序在 `managedObjectContext save`. 我收到以下错误：

```
Unresolved error Error Domain=NSCocoaErrorDomain Code=1560 "The operation couldn’t be   completed. (Cocoa error 1560.)" UserInfo=0x8580640 {NSDetailedErrors=(
"Error Domain=NSCocoaErrorDomain Code=1550 \"The operation couldn\U2019t be completed.  (Cocoa error 1550.)\" UserInfo=0x85820c0 {NSValidationErrorObject=<User: 0x7575870> (entity:  User; id: 0x75757c0 

NSValidationErrorKey=followers, NSLocalizedDescription=The operation couldn\U2019t be completed. (Cocoa error 1550.), NSValidationErrorValue=Relationship 'followers' on managed object (0x7575870) <User: 0x7575870> (entity: User; id: 0x75757c0 
"Error Domain=NSCocoaErrorDomain Code=1550 \"The operation couldn\U2019t be completed. (Cocoa error 1550.)\" UserInfo=0x8586830 {NSValidationErrorObject=<User: 0x7571ec0> (entity: User; id: 0x7571f00 

"Error Domain=NSCocoaErrorDomain Code=1550 \"The operation couldn\U2019t be completed. (Cocoa error 1550.)\" UserInfo=0x858e820 {NSValidationErrorObject=<User: 0x7573120> (entity: User; id: 0x7573160  

[...] 
```

我真的无法弄清楚是什么导致了这次崩溃。我的关系是这样的：

![在此处输入图像描述](../Images/b185c2fa68fe34526e9f788b1469d083.png)

![在此处输入图像描述](../Images/391a0d1a294208db0e3a5a74d121d095.png)

该模型有一个自定义的 NSManagedObject 子类，带有`@property (nonatomic, retain) NSSet *followers;`. 正如我所说，我不确定是什么原因造成的，所以任何指导或想法都会很棒！

**更新**

应用程序在此方法中崩溃：

```
- (void)saveContext
{
    NSError *error = nil;
    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;
    [managedObjectContext setMergePolicy:NSMergeByPropertyObjectTrumpMergePolicy];
    if (managedObjectContext != nil) {
        if ([managedObjectContext hasChanges] && ![managedObjectContext save:&error]) {
            // Replace this implementation with code to handle the error appropriately.
            // abort() causes the application to generate a crash log and terminate. You   should not use this function in a shipping application, although it may be useful during development.
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            // Uncomment "abort" makes it work, but I still get the error. 
            abort();
        }
    }
} 
```

**更新 2**

我的模型中的更多代码以及它如何使用它们：

我如何设置我的获取请求控制器：

```
- (NSSortDescriptor *)sortDescriptorForFetchRequest
{
    NSSortDescriptor *sortDescriptor;
    if ([self.postType isEqualToString:@"following"] || [self.postType isEqualToString:@"followers"]) {
        sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"userId" ascending:NO];
    } else {
        sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"postId" ascending:NO];
    }

    return sortDescriptor;
}

- (NSEntityDescription *)entityForFetchRequest
{
    NSEntityDescription *entity;
    if ([self.postType isEqualToString:@"followers"] || [self.postType isEqualToString:@"following"]) {
        entity = [NSEntityDescription entityForName:@"User" inManagedObjectContext:[self.appController managedObjectContext]];
    } else {
        entity = [NSEntityDescription entityForName:@"Post" inManagedObjectContext:[self.appController managedObjectContext]];
        }

    return entity;
}

- (void)setUpFetchResultController
{
    if (self.fetchedResultsController == nil) {
        NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
        [fetchRequest setEntity:[self entityForFetchRequest]];
        [fetchRequest setPredicate:[self predicateBasedOnPostType:self.postType]];
        NSArray *sortDescriptors = @[[self sortDescriptorForFetchRequest]];
        [fetchRequest setSortDescriptors:sortDescriptors];

        self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:[self.appController managedObjectContext] sectionNameKeyPath:nil cacheName:[self cacheName]];
        self.fetchedResultsController.delegate = self;
    }
} 
```

还有我的模型`User`：

```
+ (void)addUserFromDictionary:(NSDictionary *)dictionary forUser:(User *)user  inManagedObjectContext:(NSManagedObjectContext*)moc follower:(BOOL)follower following: (BOOL)following
{
    User *localUser;
    if (follower) {
        if ([dictionary isKindOfClass:[NSArray class]]) {
            NSEnumerator *enumerator = [dictionary objectEnumerator];
            id value;
            while (value = [enumerator nextObject]) {
                localUser = [self parseUserFromDictionary:value inManagedObjectContext:moc];

               if ([self user:localUser alreadyFollowingUser:user inManagedObjectContext:moc] == NO) {
                   [user addFollowersObject:localUser];
                   [localUser addFollowingObject:user];
              }   
            }
        }
    }
}

+ (User *)parseUserFromDictionary:(NSDictionary *)dictionary inManagedObjectContext:(NSManagedObjectContext*)moc
{
    NSNumberFormatter *numberFormatter= [[NSNumberFormatter alloc] init];
    NSNumber * userId = [numberFormatter numberFromString:(NSString *)[dictionary valueForKey:@"id"]];

    User *user;

    if ([self userAlreadyExist:userId inManagedObjectContext:moc] == NO) {
        NSEntityDescription *userDescription = [NSEntityDescription entityForName:@"User" inManagedObjectContext:moc];
        user = [[User alloc] initWithEntity:userDescription insertIntoManagedObjectContext:moc];
    } else {
        user = [User findUser:userId inManagedObjectContext:moc];
    }

    user.name = [dictionary valueForKey:@"name"];
    [...]    
    return user;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-16T03:38:24.810

预感：不同MOC中的对象之间的关系？如果你这样做，可能会发生奇怪的事情！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-13T07:48:31.177

我在一个单独的项目中复制了您的代码和数据模型。我认为这可能是您的数据中的一个循环或其他什么，所以我尝试了以下所有代码：

```
[userA addFollowersObject:userB];
[userB addFollowingObject:userA];

[userB addFollowersObject:userA];
[userA addFollowingObject:userB];

[userA addFollowersObject:userA];
[userA addFollowingObject:userA];

[userB addFollowingObject:userB];
[userB addFollowersObject:userB]; 
```

...但保存一直有效。我能想到的最后一件事是多线程。您是否正在使用多个线程来访问您的 ManagedObjectContext？如果是这样，那可能会导致您的数据不一致，从而导致错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T22:15:16.510

如果您提供有关模型定义的更多详细信息，包括`User`和 ，将会很有帮助`Followers`。这是一个猜测，但你的逆是`followers`不正确的吗？

我希望看到用户定义的关系如下：

```
M followers    User    following 
```

和 Follower 中的关系定义如下：

```
M following    User    followers 
```

# android - 给出错误：无法解析 MessageDigest

> ID：15282232
> 
> 赞同：0
> 
> 时间：2013-03-07T21:36:34.463
> 
> 标签：android, md5

我正在尝试将用户输入的密码转换为 md5 哈希。以下代码 smippet 取自博客。但它在eclipse（android开发）中显示错误：

MessageDigest 无法解析。

```
public class MainActivity extends Activity {

private String md5(String in) {
    MessageDigest digest;
    try {
        digest = MessageDisgest.getInstance("MD5");
        digest.reset();
        digest.update(in.getBytes());
        byte[] a = digest.digest();
        int len = a.length;
        StringBuilder sb = new StringBuilder(len << 1);
        for(int i=0;i<len;i++) {
            sb.append(Character.forDigit((a[i] & 0xf0) >> 4, 16));
            sb.append(Character.forDigit(a[i] & 0x0f, 16));
        }
        return sb.toString();
    } catch (NoSuchAlgorithmException e) { e.printStackTrace();}
    return null;

} 
```

我找不到任何错误。有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:41:54.753

尝试更改`MessageDisgest`为`MessageDigest`

# c++ - Emacs 作为大型 C++ 项目的 IDE

> ID：15282233
> 
> 赞同：21
> 
> 时间：2013-03-07T21:36:45.050
> 
> 标签：c++, emacs, ide

我是 Emacs 新手。我必须尝试搜索如何使用 Emacs 与大型 C++ 项目一起使用，特别是索引代码和自动完成函数名称以及行为类似于 Eclipse。我使用 Vim 已经有一段时间了，我使用 ctags 来索引项目中的代码，而 Vim 过去常常尝试使用选项下拉菜单自动完成我的代码。我现在正试图用 Emacs 实现同样的目标。但是，在我的搜索过程中，结果指向 CEDET 和自动完成以及其他 3rd 方插件。

我尝试将 ctags 与`ctags -e -R .`etags 一起使用，但没有成功。

我是否错过了 Emacs 实现相同行为的默认方式？实现我想要的最好和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T22:26:18.603

我成功地使用了带有自动完成功能的 CEDET。基本上，自动完成是下拉框的提供者，它的来源来自各种事物，最有趣的是来自 CEDET（但也来自我推荐的 etags 和 Gnu Global）。

CEDET 的一个很好的起点是[http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html](http://alexott.net/en/writings/emacs-devenv/EmacsCedet.html)

Alex Ott 的 emacs 配置在那里：[https](https://github.com/alexott/emacs-configs) ://github.com/alexott/emacs-configs——这是一个有用的资源。

请注意，您需要从 bzr 获取 CEDET，并正确安装/配置自动完成功能。我强烈建议 el-get 安装自动完成功能（以及其他一些东西）。您需要为 EDE 设置通用项目，以使自动完成功能适用于不属于结构化 EDE 项目的随机 C/C++ 文件。

您将不得不花一些时间来配置 emacs，但这是有回报的。正确设置后，该工具的生产力惊人。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-07T22:31:11.653

**索引**

您可能想要使用[GNU/global](http://www.gnu.org/software/global/)而不是 ctags：它支持 C++，并且在我看来对大型项目更有效（特别是因为您可以更新索引而不是从头开始重建它）。使用 CEDET/Semantic 仍然要简单得多（如果您花时间进行设置，这也是一个很棒的工具）。

示例使用：

```
$ cd sources
$ gtags -v         # create the index
$ cd subdirectory
$ [hack hack hack]
$ global -u        # update the index (can be called from anywhere in the project) 
```

在 Emacs 中，`gtags-mode`在源代码缓冲区中激活以访问 gtags 命令：

*   `gtags-find-tag`( `M-.`) ：在你的源文件中找到指定标签的定义（`gtags`如果有多个，让你在所有可能的定义中选择，如果只有一种可能，则直接跳转）
*   `gtags-pop-stack`( `M-*`) : 返回上一个位置
*   `gtags-find-rtag`: 在源文件中查找指定标签的所有用途

下面是我的配置，如果找到索引`gtags`，它会自动激活：`gtags-mode`

```
;; gtags-mode
(eval-after-load "gtags"
  '(progn
     (define-key gtags-mode-map (kbd "M-,") 'gtags-find-rtag)))
(defun ff/turn-on-gtags ()
  "Turn `gtags-mode' on if a global tags file has been generated.

This function asynchronously runs 'global -u' to update global
tags. When the command successfully returns, `gtags-mode' is
turned on."
  (interactive)
  (let ((process (start-process "global -u"
                                "*global output*"
                                "global" "-u"))
        (buffer  (current-buffer)))
    (set-process-sentinel
     process
     `(lambda (process event)
        (when (and (eq (process-status process) 'exit)
                   (eq (process-exit-status process) 0))
          (with-current-buffer ,buffer
            (message "Activating gtags-mode")
            (gtags-mode 1)))))))

(add-hook 'c-mode-common-hook 'ff/turn-on-gtags) 
```

* * *

**自动完成**

我不知道有什么比[`auto-complete`](http://cx4a.org/software/auto-complete/index.html). 即使它不包含在 Emacs 中，使用打包系统也很容易安装（例如在[marmalade](http://marmalade-repo.org/packages/auto-complete)或[melpa](http://melpa.milkbox.net/)存储库中）。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-07T22:21:33.190

这取决于您在 IDE 中寻找什么。我一直在将 Emacs 用于一个相当大的 C++ 项目。当然，您需要将 emacs 配置为您希望它在任何其他 IDE 中更大程度地工作。

但是，CEDET 是一个开始，尽管它并不完美。

然而，Emacs 有一个非常好的自动完成模式[http://cx4a.org/software/auto-complete/](http://cx4a.org/software/auto-complete/)它不是智能感知，但它应该以某种方式与 CEDET 集成，以便为您提供非常好的自动完成。

我经常使用的另一个重要功能是`ff-find-other-file`轻松从头文件和实现文件跳转的功能。

然后，您当然需要滚动自己的 bulid。CEDET 对项目有一些支持，但我没有测试过。然而，Emacs 与 make 等命令行构建工具集成得很好。错误会打印在缓冲区中，您可以在 Emacs 中轻松跳转到正确的行。

GDB 也很好地与 Emacs 集成`M-x gdb`，然后记住`gdb-many-windows` 命令。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-11-15T18:34:41.990

我建议在 CppCon 2015 上观看 Atila Neves 的闪电演讲，标题为[Emacs as a C++ IDE](https://youtu.be/5FQwQ0QWBTU)。

有关详细信息，请参阅我[对此相关问题](https://stackoverflow.com/a/33721012/783510)的回答。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-29T13:01:56.740

请参阅[https://emacs.stackexchange.com/questions/26518/sequence-of-packages-to-be-installed-to-make-emacs-an-ide-for-cc](https://emacs.stackexchange.com/questions/26518/sequence-of-packages-to-be-installed-to-make-emacs-an-ide-for-c-c)

我使用 GNU Global 和两个流行的 Emacs 插件：

*   代码完成公司

*   用于代码导航的 emacs-helm-gtags

# c# - 视图中的多个数据上下文

> ID：15282235
> 
> 赞同：4
> 
> 时间：2013-03-07T21:36:48.630
> 
> 标签：c#, wpf, xaml, binding, wpf-controls

我已经尝试了几次在帖子中找到答案，但还没有找到（至少在我对 WPF 相当陌生的情况下）。

我在视图构造函数中定义了一个数据上下文：

```
this.DataContext = viewModel; 
```

如果可能，我想在单个视图中使用多个数据上下文？我从其他人那里听到了多个不一致的答案。目标是我需要访问多个视图模型中的属性。例如，我的视图 XAML 用于如下所示的情况：

```
<MultiBinding Converter="{StaticResource multiBooleanToVisibilityConverter}">
                <Binding Path="ResultControlsVisibileByDefault" UpdateSourceTrigger="PropertyChanged"/>
                <Binding Path="StarWidthValueList.Count" UpdateSourceTrigger="PropertyChanged"/>
            </MultiBinding> 
```

如果我可以在适当的视图模型中显式引用每个属性，那就太好了。

注意：有多个基于覆盖在主窗口中的窗口的视图模型。它们基于用户做出的类似向导的选择而变得活跃。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-08T17:30:37.370

我发现的最简单的解决方案是让一个 ViewModel 将其他 ViewModel 保存为`Properties`. 然后视图可以从所有不同的视图模型中访问他想要的属性......

为了说明，您可以拥有一个 VMContainer：

```
public class VMContainer
{
    public FirstViewModel   VM1 { get; set; }
    public SecondViewModel  VM2 { get; set; }
} 
```

现在，在您的视图中，将您设置为您已经在其中设置特定 VM 属性`DataContext`的实例`VMContainer`...

然后你可以在 XAML 中做这样的事情

```
<Textbox Text="{Binding VM1.SomePropertyInFirstViewModel}" />
<Textbox Text="{Binding VM2.SomePropertyInSecondViewModel}" /> 
```

值得注意的是，您不必*为此*创建一个全新的`VMContainer`类。您还可以在现有 VM 中为该其他 VM 添加一个新属性（如果可能/符合逻辑，取决于您的 VM 所代表的内容）

# java - 我什么时候应该重新抛出异常？

> ID：15282237
> 
> 赞同：0
> 
> 时间：2013-03-07T21:36:51.050
> 
> 标签：java, exception, exception-handling

我有以下代码：

```
 method1() throws Exception{
 //throws an Exception
 }

 method2() throws Exception{
    method1();
    //do something
 }

 method3() throws Exception{
     method2();
     //do something
 }

 method4() throws Exception{
   try{
       method3();
       //do something
    }catch(Exception e){
       //catch exception
     } 
  } 
```

如果在 method1() 中发生异常，它会冒泡到 method4() 并在那里被捕获。

但是，我在一些与此类似的问题的答案中发现，其中异常以以下方式引发：

```
 method1() throws Exception{
   //throws an Exception
 }

 method2() throws Exception{
    try{
       method1();
    }catch(Exception e){
        throw e;
    }
  } 
```

重新抛出异常的最佳方法是什么？为什么更好？

在我阅读的有关“异常处理”最佳实践的文章中，他们说要早扔，晚抓。这是否意味着我们必须从内部方法中尽可能地重新抛出异常？

如果我的 method1() 抛出 SQLException，我应该只在 method4() 中捕获它还是在 method1() 本身中处理它？

**更新：** 比如说，如果方法 1() 中发生异常，我想在 UI 中显示一些消息。那么解决方案是什么？我应该把它冒泡还是返回一个表明问题的值？

method4() 将向 UI 显示一些消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:27:22.417

只是抛出异常`throw e;`对我来说似乎不合理。如果`throw`您声明了一个自己的异常类，该类封装了一组基本异常，请使用。或者使用它，如果您的程序检测到无效（业务）数据，这本身不会导致异常。

此外，我会尝试减少`throw`方法中的声明数量。最好使代码对任何类型的异常都更加健壮，而不是拥有大量异常和`try` `catch`块。一直明确地冒泡一个异常（使用`throw`）会使程序更长且可读性更低。

尽可能尝试处理异常；例如，如果用户试图打开一个不存在的文件，显示一个警告并返回一个值，这表明父进程失败了。

**Throw early**的意思是：你的方法应该尽早验证输入数据并抛出运行时异常，如果有什么不符合规定的话。**赶上迟到**至少意味着：避免捕捉异常，如果你对此无能为力的话。让他们宁愿冒泡并记录他们或通知用户（取决于系统）

`Exception`检查和之间的区别`RuntimeException`。

# android - 未发送 HttpGet 参数

> ID：15282240
> 
> 赞同：4
> 
> 时间：2013-03-07T21:37:03.853
> 
> 标签：android, apache, http, http-get

我在 android 上使用 apache.http 并且大部分工作正常但是当我尝试使用参数执行获取请求时，这些也不会被发送。我究竟做错了什么？这是代码

```
HttpClient httpclient = new DefaultHttpClient();
HttpUriRequest request = new HttpGet(uri);

HttpParams p = new BasicHttpParams();
p.setParameter("param", "value");
request.setParams(p);

request.setHeader("Accept", "application/json, text/javascript, */*; q=0.01");

HttpResponse response = null;

try {
    response = httpclient.execute(request);
} catch (ClientProtocolException e) {
    e.printStackTrace();
} 
```

在服务器上我只得到这个没有参数

```
GET /api/v1/activity/ HTTP/1.1
Host: example.com
Connection: Keep-Alive
Accept-Encoding: gzip
Accept: application/json, text/javascript, */*; q=0.01 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:57:53.603

您将不得不修改 URI，如下所示：

```
HttpClient httpclient = new DefaultHttpClient();

String url = "http://example.com";
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add( new BasicNameValuePair( "param", "value" ) );
URI uri = new URI( url + "?" + URLEncodedUtils.format( params, "utf-8" );

HttpUriRequest request = new HttpGet(uri);

request.setHeader("Accept", "application/json, text/javascript, */*; q=0.01");

HttpResponse response = null;

try {
    response = httpclient.execute(request);
} catch (ClientProtocolException e) {
    e.printStackTrace();
} 
```

# spring - 从数据库中用于只读的附加 readOnlyEntityManager

> ID：15282241
> 
> 赞同：1
> 
> 时间：2013-03-07T21:37:06.767
> 
> 标签：spring, hibernate, jpa, replication, persistence-unit

我正在探索使用 MySQL Master/Slave 在基于 JPA 的 webapp 上实现从 slave 读取和写入 master 的方法。

我认为我可以选择追求并喜欢一些关于过去实现相同目标的经历的意见。

首先，我想 -

*   创建一个名为的附加持久性单元`readOnlyPU`
*   创建一个附加`readOnlyEntityManagerFactory`的使用`readOnlyPU`
*   和都共享相同的实体对象`readOnlyPU`，`writeOnlyPU`这意味着 2 个不同的 Hibernate Cache 具有相同的对象副本。
*   需要时，`readOnlyEntityManager` 在我的代码中使用。

我认为这种方法应该可行，但我想询问您对该方法的看法，以及这种方法是否对于启用 Master/Slave 复制很常见。

# facebook - 创建后如何获取 Facebook 测试用户电子邮件和密码？

> ID：15282245
> 
> 赞同：5
> 
> 时间：2013-03-07T21:37:15.257
> 
> 标签：facebook, facebook-graph-api, integration-testing, selenium-webdriver

我正在使用 Selenium 测试 Facebook auth 应用程序。目前我正在使用测试套件中的脚本通过发布到此处找到的测试用户 api 来创建 Facebook 测试用户： [https ://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)

```
https://graph.facebook.com/APP_ID/accounts/test-users?
installed=true
&name=FULL_NAME
&locale=en_US
&permissions=read_stream
&method=post
&access_token=APP_ACCESS_TOKEN 
```

这给了我一个回应：

```
{ 
  "id": "1234...",  
  "access_token":"1234567..." , 
  "login_url":"https://www.facebook.com/platform/test_account..."
  "email": "example...@tfbnw.net",
  "password": "1234..."
} 
```

这给了我测试的用户名和密码。但是，如果我想在以后的测试中重用用户，我不知道如何获取此信息。我可能在看东西。如果我执行 GET 请求以获取已注册测试用户的列表，则响应如下所示：

```
{
 "data" [
   { 
    "id": "1231....",  
    "access_token":"1223134..." , 
    "login_url":"https://www.facebook.com/platform/test_account.." 
   }
   { 
    "id": "1231....",  
    "access_token":"1223134..." , 
    "login_url":"https://www.facebook.com/platform/test_account.." 
   }
 ]
} 
```

此响应没有给我任何电子邮件/密码，我需要在完整测试中登录测试用户。我宁愿不使用`access_token`and登录他们，`login_url`因为这不适用于网站上的 Facebook 身份验证流程。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T21:40:44.647

请参阅[https://developers.facebook.com/docs/test_users/#changepw](https://developers.facebook.com/docs/test_users/#changepw)

Facebook 不存储明文密码，并且只会根据文档在用户创建时返回密码。您可以在不知道用户密码的情况下随时将用户的密码更改为任何密码，这样您就可以将所有测试用户设置为在创建后拥有您想要的任何密码，并在运行测试时依赖该密码。

# map-projections - 解释地图投影细节

> ID：15282248
> 
> 赞同：0
> 
> 时间：2013-03-07T21:37:32.437
> 
> 标签：map-projections, proj

不是阅读或解释地图投影的专家。我有以下描述的数据集。

> 坐标采用阿尔伯斯等面积圆锥投影，具有以下投影设置：比例 = 1；东虚（米）= 5000000；伪北（m）= 0；经度原点 = 20；纬度原点 = 0；标准并行 1 = 45；标准平行线 2 = 55，椭圆体为 WGS 84。

是否等同于*+proj=lonlat +datum=WGS84*

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T11:31:28.040

不，你为什么认为它们是等价的，实际上完全不同。

尝试：`+proj=aea +lat_1=45 +lat_2=55 +lon_0=20 +x_0=5000000 +datum=WGS84`

[https://github.com/OSGeo/proj.4/wiki/GenParms](https://github.com/OSGeo/proj.4/wiki/GenParms)

# sql - 在查询中插入固定值

> ID：15282252
> 
> 赞同：1
> 
> 时间：2013-03-07T21:37:46.203
> 
> 标签：sql, sql-server

遇到这个问题，想找人帮我解决。我认为在程序代码中解决问题会更容易，但我开始重新考虑这个想法。

`PIVOT`使用从语句中提取数据的 SQL 查询，`SELECT`其中一个字段`[Cat_Entries]`是用作单元格标签的硬编码值。Cat_Entries 的值是使用`COUNT(EventGUID)`和/或`CAST(SUM(Duration) AS varchar(10)) AS TotalRepairTime`在相同句子中计算的。

从`SELECT`下面的语句中，您可以看到使用`UNION`三个查询中的一个来生成输出。但是，如果“子查询”作为计算结果没有返回值。然而，要求是 `[Cat_Entries]`无论值如何都显示标签。

以下是数据现在的样子：

```
Cat     Cat Entries           6/1/2012  7/1/2012  8/1/2012  9/1/2012
------  --------------------  --------  --------  --------  --------
00000A  Critical Down Time       1       
00000A  Critical Outage          1       
00000A  Total Repair Time        65         
00000B  Critical Down Time                                     6
00000B  Total Repair Time                                      90
00000C  Critical Down Time       1          5    
00000C  Critical Outage          1          5    
00000C  Total Repair Time        30         240    
00000D  Critical Down Time                                     2     
00000E  Critical Down Time                          1    
00000G  Critical Down Time                                     1    
00000M  Critical Down Time        1                            3    
00000M  Critical Outage           1                 3    
00000M  Total Repair Time         60                180 
```

...这就是所需输出的样子（** 表示插入的空行）：

```
 Cat     Cat Entrie s          6/1/2012  7/1/2012  8/1/2012  9/1/2012
    ------  --------------------  --------  --------  --------  --------
    00000A  Critical Down Time       1       
    00000A  Critical Outage          1       
    00000A  Total Repair Time        65         
    00000B  Critical Down Time                                     6
**  00000B  Critical Outage          
    00000B  Total Repair Time                                      90
    00000C  Critical Down Time       1          5    
    00000C  Critical Outage          1          5    
    00000C  Total Repair Time        30         240 
    00000D  Critical Down Time                                     2   
**  00000D  Critical Outage          
**  00000D  Total Repair Time 
```

这是存储过程`PIVOT`：

```
SELECT @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT '],[' + cast([Year] as varchar(4))
FROM  vCatCountByMonthYear  where SiteGUID = @SiteGuid 
and [Year] BETWEEN @StartDate AND @StopDate ORDER BY '],[' + cast([Year] as varchar(4)) 
FOR XML PATH('') ), 1, 2, '') + ']' 

SET @query = N'SELECT Cat,[Cat_Entries], ' + @cols +' FROM (SELECT Cat,[Year],
[Cat_Entries],Value,OrderBy FROM vCatCountByMonthYear 
where SiteGUID = ' + CHAR(39) + CONVERT(nvarchar(36), @SiteGuid) + CHAR(39) + ' and 
[Year] BETWEEN ' + CHAR(39) + @StartDate + CHAR(39) + ' AND ' + CHAR(39) + 
@StopDate + CHAR(39) + ' ) p PIVOT ( Sum ([Value] ) FOR [Year] IN ( '+ @cols +' ) ) 
AS pvt ORDER BY Cat,OrderBy' 

execute(@query) 
```

...这是`VIEW`存储过程使用的：

```
SELECT SiteGUID, Cat_Entries, EntriesCount AS Value, 
       CONVERT(date, CAST(Month AS varchar(2)) + '-1-' + CAST(Year AS varchar(4))) AS MonthYear, 
       Month, Year, OrderBy, Cat, EventId
FROM (SELECT SiteGUID, 'Critical Down Time' AS Cat_Entries, COUNT(EventGUID) AS EntriesCount,
             Month, Year, 1 AS OrderBy, Cat, EventId
FROM dbo.vCatCountTotalEntries
GROUP BY SiteGUID, Month, Year, Cat, EventId

UNION
      SELECT SiteGUID, 'Critical Outage' AS Cat_Entries, COUNT(EventGUID) AS EntriesCount,
             Month, Year, 2 AS OrderBy, Cat, EventId
      FROM   dbo.vCatCountEqpEntries
      GROUP BY SiteGUID, Cat, Month, Year, Cat, EventId
UNION
      SELECT SiteGUID, 'Total Repair Time' AS Cat_Entries, 
             CAST(SUM(Duration) AS varchar(10)) AS TotalRepairTime, Month, Year, 3 AS OrderBy,
             Cat, EventId
      FROM   dbo.vCatCountOnEqpRprTm
      GROUP BY SiteGUID, Cat, Month, Year, Cat, EventId) AS W 
```

一如既往，我感谢您的时间和努力！R。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:37:42.767

因此，为了获得额外的行，您的主要选择查询必须能够考虑它们，这意味着您无法将它们过滤掉。

您当前在 startdate 和 stopdate 之间执行 [Year]，因此您的初始结果集只会包含日期之间的值。不要在那里限制它，而是让你的 PIVOT 为你做那个限制。

所以你应该做的唯一改变就是把你的年份过滤器从你的主要选择中去掉，你应该会看到你正在寻找的结果，我相信。

这是一个例子来说明我的意思：

```
 CREATE TABLE #years(year_name VARCHAR(20), year_actual int)
            --Insert three years
    INSERT INTO #years
            ( year_name, year_actual )
    SELECT 'rat', -- year_name - varchar(20)
              1924  -- year_actual - int
    UNION ALL
    SELECT 'ox',
              1925
    UNION ALL
    SELECT 'tiger',
              1926

            --I only care about two of those years
    SELECT year_name, [1924], [1925]
    FROM
            --I need to select all the years so that all three rows show
    (SELECT year_name, year_actual FROM #years) yr
    PIVOT
            --Here I select the years I actually care to count
    (COUNT(year_actual) FOR year_actual IN ([1924], [1925])) pvt 
```

结果：

```
 --Now I pulled all three rows, with 'dragon' having zero rows
    ox  0   1
    rat 1   0
    tiger   0   0 
```

# sql - 从多个表中选择不同的值，其中一个有多个

> ID：15282256
> 
> 赞同：0
> 
> 时间：2013-03-07T21:37:52.040
> 
> 标签：sql, sql-server-2008

我已经搜索过这个问题，但没有找到任何类似的东西。我有两个表，都有一个字段，FormID。在表 A 中，FormID 是唯一的。在表 B 中，可以有多个具有相同 FormID 的记录——表 B 是一个问题跟踪表，所以如果表单中存在多个数据输入问题，那里就会有多个记录。

以下查询有效：

```
select distinct b.FormID
from b
where b.FormID = a.FormID
and a.status='done' 
```

到目前为止，它确实会生成唯一 FormID 的结果列表。但是，我还需要在此查询中获取其他一些列，并且当我将这些列添加到选择或连接时，我会获得所有重复的 FormID。

我努力了：

```
select distinct (b.FormID), a.FormType, a.Site, a.uid, b.ProbID, b.Date
from b, a
where b.FormID = a.FormID
and a.status='done' 
```

以及使用连接的几个变体，但它们都以具有重复 FormID 的所有行结束。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:10:23.077

尝试

```
SELECT  b.FormID, 
        MAX(a.FormType) FormType, 
        MAX(a.Site) Site, 
        MAX(a.uid) uid, 
        MAX(b.ProbID) ProbID, 
        MAX(b.Date) Date
  FROM b INNER JOIN 
       a ON b.FormID = a.FormID
 WHERE a.status='done'
 GROUP BY b.FormID 
```

# php - 超链接使用

> ID：15282258
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:37:56.583
> 
> 标签：php, html

真的超链接不应该用于执行操作吗？

例如，这样做会不好：

```
<a href="?action=doThis" class="btn">do this button</a> 
```

而不是这个：

```
<form action="?doThis" method="post">
   <input type="hidden" name="action" value="doThis">
   <input type="submit" value="do this">
</form> 
```

两者都有效，但都正确吗？

更新

我在我正在阅读的一本书中引用了参考资料。这本书是作者 Kevin Yank 的**PHP & MySQL: Novice to Ninja ，参考文献在第 135 页。**

我确实想确认，因为我在这本书中读到了一些对我来说似乎不寻常的东西，我认为更好的确认方法是询问社区。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:39:24.243

这不是使用链接的问题，而是 GET 与 POST 的问题。

GET 请求应该就是这样：获取东西。它不应该改变服务器上的任何东西。

POST 请求可能会改变一些事情，应该在这种情况下使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:46:37.423

这两种方法都是完全可以接受的——它们只是以稍微不同的方式发送信息。信息到达时如何处理信息由您决定。

# iphone - Objective C Hpple 获取注释元素信息

> ID：15282259
> 
> 赞同：1
> 
> 时间：2013-03-07T21:37:57.823
> 
> 标签：iphone, objective-c, web-scraping, hpple

我开始了我的 iPhone 编程冒险，用一个简单的 HTML 抓取。我正在使用 Hpple 库来完成这项工作，我有一个问题......假设我有以下 html 来解析......

```
<div>
    <div> A <!-- Comment 1 --></div>
    <div> B </div>
    <div> C <!-- Comment 2 --></div>
</div> 
```

如何检索评论的部分？它们没有出现在物体上......我正在检查文档，但没有任何东西指向那个方向......（谷歌搜索“hpple comment”也不会产生最好的结果......）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:40:56.003

注释不被视为内容的一部分，除了人类之外，几乎所有解析器都将其删除。

`<div>`同样，您不能要求解析器告诉您前两个元素之间有多少空格和换行符。

# sql - 在 T-SQL 中将 DateTime 舍入到下一天？

> ID：15282263
> 
> 赞同：1
> 
> 时间：2013-03-07T21:38:03.093
> 
> 标签：sql, sql-server-2008, tsql, datetime

我有一个日期，我想把它四舍五入到第二天。

**例如**：

```
SomeDate DATETIME,
NewDate DATETIME

SomeDate = '01/05/2012 8:00:0 PM'
NewDate = Get the next day value here (in this sample it would be '01/05/2012 8:00:0 PM' + 4 Hours which is '02/05/2012 00:00:00 AM') 
```

**简而言之，我想要的是：**

```
NewDate = '02/05/2012 00:00:00 AM' 
```

有什么快速的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:40:47.507

这应该有效：

```
SELECT DATEADD(Day, DATEDIFF(Day, 0, SYSDATETIME()), 1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T22:04:08.460

要始终获得第二天，您可以执行以下操作：

```
SELECT DATEADD(day, 1, CAST(@date As Date)) 
```

如果您想将`DateTime`值“四舍五入”到最接近的一整天，您可以执行以下操作：

```
SELECT 
   CASE WHEN CAST(@date As Time) < '12:00' THEN 
       CAST(@date As Date) 
   ELSE 
       DATEADD(day, 1, CAST(@date As Date))
   END 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T21:41:14.680

明天

```
Select DateAdd(day, Datediff(day, 0, getdate()) +1, 0) 
```

从今天开始的月份：

```
Select Dateadd(month, 1, Dateadd(Day, Datediff(day, 0, getdate()), 0)) 
```

# nusoap - 当 nusoap 从 PHP 应用程序调用 Web 服务时，处理超时问题

> ID：15282265
> 
> 赞同：0
> 
> 时间：2013-03-07T21:38:05.977
> 
> 标签：nusoap

调用 .net web 服务时，我在我的 PHP 应用程序中使用了 nusoap。

问题是，在某些情况下，.net Web 服务花费的时间超过了某些请求的实际时间，所以我想增加我的 SOAP 调用等待响应的时间。

是否有任何功能或任何方式可以让我保持 nusoap 呼叫等待，直到我收到来自 web 服务的响应。

谢谢，拉玛

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-03T06:43:03.610

Nusoap 默认超时为 30 秒。

增加响应超时来解决这个问题。

```
// creates an instance of the SOAP client object
 $client = new nusoap_client($create_url, true);

// creates a proxy so that WSDL methods can be accessed directly
$proxy = $client -> getProxy();

// Set timeouts, nusoap default is 30
$client->timeout = 0;
$client->response_timeout = 100; 
```

注意：此设置也有一段时间不起作用。所以我直接转到**nusoap.php**文件并更改了 $response_timeout = 120。默认情况下，此值设置为 30 秒。

现在解决了：）

参考：[超时设置](http://geodata.grid.unep.ch/webservices/table_values_request.txt)-[第二参考](http://www.oos-shop.de/doc/nusoap/html/class_8soapclient_8php-source.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-25T14:34:36.037

当您创建 nusoap_client 的 istance 尝试

```
$client = new nusoap_client($$creat_url, true,false,false,false,false,0,300); 
```

其中所有 false 参数默认为 false，0 为超时，300 为 response_timeout

谢谢

# perl - 从命令行搜索 cpan.org

> ID：15282267
> 
> 赞同：5
> 
> 时间：2013-03-07T21:38:12.547
> 
> 标签：perl, cpan

我想知道 CPAN 是否有允许用户搜索 CPAN.org 上所有可用模块的功能。

我可能只是写一些东西来发送获取请求并吐回答案......只是想知道是否已经有一个内置的实用程序......这真的很棒。

我喜欢在 debian 或 ubuntu linux 中，有“apt-cache search”或“aptitude search”这个东西，它可以告诉你哪些软件包已经安装，哪些软件包可能对你的系统可用。如果 perl 模块/CPAN 有这样的东西，那将是一件非常棒的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-07T21:41:31.400

您可以交互地运行 Perl 的 CPAN 模块：

```
# perl -MCPAN -e shell
Terminal does not support AddHistory.

cpan shell -- CPAN exploration and modules installation (v1.9800)
Enter 'h' for help.

cpan[1]> i /JSON::XS/
Reading '/home/alt/.cpan/Metadata'
  Database was generated on Wed, 06 Mar 2013 23:07:32 GMT
Module  < Catalyst::Action::Deserialize::JSON::XS (BOBTFISH/Catalyst-Action-REST-1.06.tar.gz)
Module  < Catalyst::Action::Serialize::JSON::XS (BOBTFISH/Catalyst-Action-REST-1.06.tar.gz)
Module  < JSON::XS               (MLEHMANN/JSON-XS-2.33.tar.gz)
Module  < JSON::XS::Boolean      (MLEHMANN/JSON-XS-2.33.tar.gz)
Module  < JSON::XS::VersionOneAndTwo (LBROCARD/JSON-XS-VersionOneAndTwo-0.31.tar.gz)
Module  < Mojo::JSON::XS         (YSYROTA/Mojo-JSON-Any-0.990104.tar.gz)
Module  < Mojo::JSON::XS::_Bool  (VTI/Mojo-JSON-Any-0.990103.tar.gz)
Module  < Sledge::Plugin::JSON::XS (TOKUHIROM/Sledge-Plugin-JSON-XS-0.05.tar.gz)
8 items found 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T22:07:47.640

还有`cpan`可能在您的路径中的脚本。所以，而不是打字

```
perl -MCPAN -eshell 
```

你可以输入

```
cpan 
```

这会让你进入 CPAN shell。

然后，在`CPAN>`提示符下键入`i /ModuleName/`以搜索模块。真正好的是让 cpan 脚本处理`i /ModuleName/`但现在，只有 -L 可用，它列出了特定模块作者的模块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:42:48.750

就在这里。你试过什么？

[这是 CPAN 手册](http://perldoc.perl.org/CPAN.html#SYNOPSIS)，描述了您可以从命令行执行的所有操作。

具体来说，在交互模式下运行 cpan 后，`m Module::Name`将搜索一个模块。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-14T22:18:45.313

在我看来，进入 cpan shell 并不是真正的“从命令行”。

我需要能够将 cpan 的输出通过管道传输到其他外部命令（grep/awk/sed/etc）

为此，此语法有效

```
echo 'm /keyword/' | cpan 
```

例子：

```
-sh-4.2$ echo 'm /SFTP/' | cpan | grep   Recursive
Module  < Net::SFTP::Recursive   (GEOTIGER/Net-SFTP-Recursive-0.12.tar.gz)

or 
-sh-4.2$ echo 'm /SFTP.*Recursive/' | cpan

cpan shell -- CPAN exploration and modules installation (v1.9800)
Enter 'h' for help.

cpan[1]> Reading '/home/myuser/.cpan/Metadata'
  Database was generated on Thu, 14 Oct 2021 17:17:03 GMT
Module id = Net::SFTP::Recursive
    CPAN_USERID  GEOTIGER (Geo Tiger <tiger.geo@gmail.com>)
    CPAN_VERSION undef
    CPAN_FILE    G/GE/GEOTIGER/Net-SFTP-Recursive-0.12.tar.gz
    INST_FILE    (not installed)
cpan[2]> Lockfile removed. 
```

当然，创建一个脚本来做到这一点很容易

```
cat << EOF > cpancmd
#!/bin/ksh
echo "\$*" | cpan
EOF
chmod 755 cpancmd
./cpancmd m /SFTP/ | grep Recursive 
```

或者使用更具体的脚本或别名来定位子命令“i”或“m”等。

# symfony - 未定义的方法 registerNamespaces() symfony2

> ID：15282274
> 
> 赞同：4
> 
> 时间：2013-03-07T21:38:30.293
> 
> 标签：symfony, symfony-2.1, fosuserbundle

我正在关注这个 FOSTwitterBundle 文档： [https ://github.com/FriendsOfSymfony/FOSTwitterBundle](https://github.com/FriendsOfSymfony/FOSTwitterBundle)

我是一步一步做的，但是当我访问我的网站时，我收到了这个错误：

```
 Fatal error: Call to undefined method Composer\Autoload\ClassLoader::registerNamespaces() in C:\xampp\htdocs\Symfony\app\autoload.php on line 16 
```

我的 autoload.php 是这样的：

```
<?php

use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';

// intl
if (!function_exists('intl_get_error_code')) {
    require_once __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

$loader->registerNamespaces(array(
        // ...
        'FOS'    => __DIR__.'/../vendor/bundles',
        // ...
  ));

return $loader; 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-23T20:25:26.123

对于 symfony 2.* 替换这个

```
$loader->add('FOS' => __DIR__.'/../vendor/bundles'); 
```

和

```
$loader->add('FOS', __DIR__.'/../vendor/bundles'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-08T13:53:21.967

基本问题是安装说明是针对 Symfony 2.0 的。您正在使用 S2.1。我没有在 twitter 包里闲逛。很难说它是否会在 2.1 下运行。通过 git submodule 而不是使用 composer 安装它似乎很奇怪。

尝试重新开始并添加：“friendsofsymfony/twitter-bundle”：“dev-master”到您的 composer.json 并进行安装。这应该会降低包并为您处理自动加载。

否则，替换：

```
$loader->registerNamespaces(array('FOS'    => __DIR__.'/../vendor/bundles'));
with
$loader->add('FOS' => __DIR__.'/../vendor/bundles'); 
```

S2.1 使用与 S2.0 不同的类加载器，具有不同的接口。它至少会让你摆脱错误消息。

但同样，请先尝试 composer 路线，然后可能会向项目提交补丁以更新自述文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:44:48.980

认证？我不久前使用了[https://github.com/hwi/HWIOAuthBundle 。](https://github.com/hwi/HWIOAuthBundle)如何与 FOSUB 集成：[https ://github.com/hwi/HWIOAuthBundle/issues/81](https://github.com/hwi/HWIOAuthBundle/issues/81)

# ruby-on-rails - resource_url (inherited_resources) 上的命名空间控制器测试错误

> ID：15282276
> 
> 赞同：5
> 
> 时间：2013-03-07T21:38:36.387
> 
> 标签：ruby-on-rails, ruby, rspec, namespaces

我正在使用inherited_resources，并且我有一个控制器，例如：

```
class Admin::PostsController < InheritedResources::Base
end 
```

在我的控制器测试中：

```
it "redirects to the post" do
  post = Post.create! valid_attributes
  put :update, {:id => post.to_param, :post => valid_attributes}, valid_session
  response.should redirect_to([:admin, post])
end 
```

我收到此错误：

```
undefined method `posts_url' for #<Admin::PostsController:0xec6fb20> 
```

奇怪的是它只发生在测试中！应用程序运行正常。

我错过了什么？

[编辑] 我发现报告了这个问题，但没有答案就关闭了[https://github.com/josevalim/inherited_resources/issues/193](https://github.com/josevalim/inherited_resources/issues/193)

[编辑] 我刚刚找到了它发生的原因并在上面的问题页面上做出了回应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-23T10:54:56.530

你试过这个吗：

```
response.should redirect_to '/your_url' 
```

它可能会解决您的问题。

# python - 如何使 Qt 撕下菜单出现在 alt-tab 导航中？

> ID：15282278
> 
> 赞同：1
> 
> 时间：2013-03-07T21:38:45.317
> 
> 标签：python, qt, menu, pyqt4

Qt 撕下菜单似乎没有出现在 Alt-tab 任务切换器导航中，大概是因为它们不是顶级小部件。这意味着一旦撕下的菜单窗口被另一个窗口遮挡，用户就不可能再次看到它。

这是一个例子：

```
import sys
from PyQt4 import QtGui

app = QtGui.QApplication(sys.argv)
QtGui.QApplication.setQuitOnLastWindowClosed(False)
w = QtGui.QMainWindow(parent=None)
menu = w.menuBar().addMenu("Menu")
menu.setTearOffEnabled(True)

quit_action = QtGui.QAction("&Quit", w, triggered=QtGui.qApp.quit)
menu.addAction(quit_action)

w.show()
app.exec_() 
```

要重现问题：

*   运行程序
*   打开标有“菜单”的菜单
*   点击虚线“撕下”菜单
*   关闭主窗口
*   使用 Alt-Tab 切换到完全遮盖撕下菜单的其他窗口
*   此时，没有办法找到撕掉的菜单窗口

我只尝试在 GNOME 2 和 GNOME Shell 中重现 Linux 上的问题，但我假设它发生在所有系统上。

如何使撕下的菜单窗口出现在 Alt-tab 导航中？

# regex - 解析为数据字符串但省略引号

> ID：15282282
> 
> 赞同：0
> 
> 时间：2013-03-07T21:38:58.000
> 
> 标签：regex, regex-negation

我需要使用 RegEx 来遍历一串文本，但只返回我需要的部分。例如，假设字符串如下：

> 1234,Weapon Types,100,Handgun,"这是正文，"和"，仅此而已。"""

`\d*,Weapon Types,(\d*),(\w+),` 大部分时间都让我受益，但这是我遇到问题的最后一部分。有没有办法让我捕捉到字符串的其余部分，即

> "这是文本，"和"，仅此而已。"""

不拿起报价？我试过否定它们，但是它只是在引号处停止字符串。

请记住，该字符串的文本是未知的，因此无法进行文字匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:13:32.677

你给了我们一些非常难以解决的问题。可以在字符串中嵌套逗号。一旦遇到双引号，我们可以忽略所有内容，直到结束引号。这将使用逗号。

但是你的解析器怎么知道下一个双引号不是结束字符串。它怎么知道它是一个嵌套的双引号？

如果我可以稍微修改您的输入字符串以明确什么是嵌套引号，那么解析很容易......

```
 var txt = "1234,Weapon Types,100,Handgun,\"This is the text, &quot;and&quot;, that is all.\",other stuff";
        var m = Regex.Match(txt, @"^\d*,Weapon Types,(\d*),(\w+),""([^""]+)""");
        MessageBox.Show(m.Groups[3].Value); 
```

但是如果你的输入字符串必须有这样的嵌套引号，那么我们必须想出一些其他规则来检测字符串的真正结尾是什么。这个怎么样？

```
 var txt = "1234,Weapon Types,100,Handgun,\"This is the text, \"and\", that is all.\",other stuff";
        var m = Regex.Match(txt, @"^\d*,Weapon Types,(\d*),(\w+),""(.+)"",");
        MessageBox.Show(m.Groups[3].Value); 
```

结果是……

这是文本，“和”，仅此而已。

# android - 在 android 中绘制一个像饼图一样的二维圆锥。

> ID：15282283
> 
> 赞同：3
> 
> 时间：2013-03-07T21:39:03.643
> 
> 标签：android

我正在尝试绘制动态雷达，但无法正确绘制锥形。我可以让两条线正常工作，但我无法让它们之间的阴影正常工作。

我的目标：

![在此处输入图像描述](../Images/4e95cdf3c06e383d2c336d33a63da527.png)

我得到了什么：

![在此处输入图像描述](../Images/d2ac08c46e4048f8f8105db758d4e12b.png)

这是我的代码：

```
paint.setColor(Color.WHITE);
RectF oval = new RectF(0,0,200,200);
canvas.drawArc(oval,(float)globalAzimuth+26, (float)globalAzimuth-26,false,paint); 
```

globalAzimuth 是手机所面对的方向。雷达像手机一样旋转。线条旋转良好且同步，但弧线变得更大并且显然非常偏离。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:47:28.587

看起来您将参数`sweepAngle`视为*停止*角度。它应该是从 开始顺时针扫过的度数`startAngle`。

[从文档：](http://developer.android.com/reference/android/graphics/Canvas.html#drawArc%28android.graphics.RectF,%20float,%20float,%20boolean,%20android.graphics.Paint%29)

> sweepAngle : 顺时针测量的扫角（以度为单位）

编辑：看起来你可以使用一个常数`52`作为扫角，因为你只是从任一方向移动 26 度`globalAzimuth`（尽管你的线看起来比 52 度更接近，所以我不确定）。如果你这样做，你需要记住它是顺时针方向的，所以你`startAngle`应该是`globalAzimuth - 26`，而不是加号。

# javascript - javascript regex ...如何转义连字符

> ID：15282290
> 
> 赞同：1
> 
> 时间：2013-03-07T21:39:37.390
> 
> 标签：javascript, regex, replace

如何在替换语句中转义连字符

```
var lvs = "ui-btn ui-btn-up-XXX  ui-li ui-li-has-icon ui-btn-hover-e ui-btn-up-ZZZ" ;

var lvs = lvs.replace(/\bui-btn-up-[^\b]*?\b/gi , "" ) ;
alert( lvs); 
```

我尝试了许多正斜杠和反斜杠的变体

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:56:32.147

我认为您使用断字符 ( `\b`) 使其过于复杂。这对你想做的事情不起作用吗？

```
var lvs = lvs.replace(/ui-btn-up(-\w+)?/gi, ""); 
```

这也假设您要删除`ui-btn-up`. 如果没有，那么使用：

```
var lvs = lvs.replace(/ui-btn-up-\w+/gi, ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:45:48.803

你想这样做吗：

```
var lvs = lvs.replace(/\sui-btn-up-\S+\s*?/gi , "" ) ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T21:54:39.173

这对我来说没问题：-

```
lvs = "ui-btn ui-btn-up-XXX  ui-li ui-li-has-icon ui-btn-hover-e ui-btn-up-ZZZ" ;
var lvs = lvs.replace(/\bui-btn-up-\w*\s*/gi , "" ) ;
alert( lvs); 
```

[http://jsfiddle.net/keith_nicholas/6KA9T/](http://jsfiddle.net/keith_nicholas/6KA9T/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:44:37.870

你不必逃避`-`。

```
'sonia-b-cat'.replace(/a-b-c/, '123') // 'sonia123at' 
```

只有当它在字符类中时，您才需要使用反斜杠对其进行转义

```
'z-z'.replace(/[abc\-]/, '123') // 'z123z' 
```

# sql - 如何使用 SQL Server 使用单个列来填充另一个表中的两个单独的列？

> ID：15282292
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:39:44.187
> 
> 标签：sql, sql-server, sql-server-2008, multiple-columns

我有两张桌子：

```
dbo.Products [ItemID] [ProductID]
dbo.Accessory [PartItemID] [AccessoryItemID] 
```

表中的两列都与表中的列`Accessory`匹配。如何让表格显示适当的而不是, 和？`ItemID``Products``Accessory``ProductID``PartItemID``AccessoryItemID`

例如：

```
ItemID=1, ProductID=Part, PartItemID=1,AccessoryItemID=5
ItemID=5, ProductID=Accessory, PartItemID=5, AccessoryItemID=NULL 
```

我希望输出看起来像这样：

```
ProductID=Part, PartItemID=1, Accessory=Accessory, AccessoryItemID=5 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:52:40.147

正如@PM77-1 所说，但更具体地说，`JOIN`是所有密钥都需要的。您可以多次加入同一个表。

在你的情况下：

```
SELECT p1.ProductID as PartItem
     , a.PartItemID
     , p2.ProductID as AccessoryItem
     , a.AccessoryItemID
  FROM dbo.Accessory a
  LEFT JOIN dbo.Products p1
       ON p1.ItemID = a.PartItemID
  LEFT JOIN dbo.Products p2
       ON p1.ItemID = a.AccessoryItemID 
```

这将在您的附件表中每行输出相应的产品作为零件和附件。

# iphone - 在移动设备上查看时，响应式菜单和购物车图标被挤压

> ID：15282296
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:39:59.803
> 
> 标签：iphone, html, css, mobile, mobile-safari

我正在开发一个响应式网站 ( [http://tinyurl.com/bvcqmhg](http://tinyurl.com/bvcqmhg) )，在我的 iPhone（可能还有其他移动设备）上查看时，购物车和响应式菜单的图标会被挤压。图标是 png 文件，它们与 css 背景属性一起放置。这个问题有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:44:46.660

看起来您没有在它们上设置宽度或高度。这就是我首先要尝试的。

# jquery - Jquery Ajax调用不成功

> ID：15282304
> 
> 赞同：0
> 
> 时间：2013-03-07T21:40:26.487
> 
> 标签：jquery, ajax, vb.net, call, webmethod

我有一个对 webmethod 的 ajax 调用，但调用总是失败。这是下面需要的代码。LetterReportDataStore 类进入数据库并填充并返回一个数据表。

```
 $(document).ready(function () {
           BindGridView('eastern');

    });

    function BindGridView(r) {
        $.ajax({
            type: "POST",
            url: "AgencyLetterReport.aspx/GetLetterReportData",
            data: "{}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                alert('Success');
                for (var i = 0; i < data.d.length; i++) {
                    $("#grdviewe").append("<tr><td>" + data.d[i].Username +
                                          "</td><td>" + data.d[i].Name + "</td></tr>");
                }
                                },
            error: function () { alert('Failed'); }
        })
    }

    <WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Shared Function GetLetterReportData() As LetterReportData()
    Dim region As String = "eastern"
    Dim list As List(Of LetterReportData) = New List(Of LetterReportData)
    Dim dt As DataTable = LetterReportDataStore.LoadGridData(region)

    For Each r As DataRow In dt.Rows
        Dim _data As LetterReportData = New LetterReportData
        _data.Username = r.Item(0)
        _data.Name = r.Item(1)

        list.Add(_data)
    Next
    Return list.ToArray()
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:26:55.777

我已经想通了。我将我的网络方法更改为以下。我在其中一个数据字段中获得了一些空值，因此我使用 .Tostring 将其设为空字符串。我还将 List 更改为 ArrayList，但我认为 List 也可以。问题是我相信的空值。

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Shared Function GetLetterReportData(ByVal region As String) As ArrayList
    'Dim region As String = "eastern"
    Dim list As ArrayList = New ArrayList
    Dim dt As DataTable = LetterReportDataStore.LoadGridData(region)

    For Each r As DataRow In dt.Rows
        Dim _data As LetterReportData = New LetterReportData
        _data.Username = r.Item(0).ToString
        _data.Name = r.Item(1).ToString

        list.Add(_data)
    Next
    Return list
    'Return region
End Function 
```

这是我的 jquery 调用

```
$(document).ready(function () {
        $("#tabs").tabs();
        BindGridView('eastern');          
    });

    function BindGridView(r) {
        $.ajax({
            type: "POST",
            url: "AgencyLetterReport.aspx/GetLetterReportData",
            data: "{'region' : '" + r + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (data) {
                //alert(data.d[0].Username);
                for (var i = 0; i < data.d.length; i++) {
                    $("#grdviewe").append("<tr class='GridviewScrollC1Item'><td>" + data.d[i].Username +
                                          "</td><td>" + data.d[i].Name + "</td>" +
                                          "</tr>");
                }
                $('#grdviewe').gridviewScroll({
                    width: $(window).width() - 200,
                    height: $(window).height() - 200
                });
            },
            error: function () { alert('Error on loading data.'); }
        })
    } 
```

如果您在 .append 调用中注意到这一行，class='GridviewScrollC1Item'。我不得不添加这个，因为 gridview 列在数据绑定上丢失了 css 并使列不与标题对齐。尽管gridview的设置如下。标题 css 保留，但 alterrow 样式和 rowstyle 丢失。我现在正在尝试修复更改行样式。

```
 <asp:GridView ID="grdviewe" runat="server" Width="100%" ShowHeaderWhenEmpty="True">
     <AlternatingRowStyle BackColor="#EEF2FF" />
     <HeaderStyle CssClass="GridviewScrollC1Header" /> 
     <RowStyle CssClass="GridviewScrollC1Item" />
 </asp:GridView> 
```

希望这对任何人都有帮助！

# javascript - 删除 html 文档中的第一个 DIV 标记

> ID：15282309
> 
> 赞同：-6
> 
> 时间：2013-03-07T21:40:46.833
> 
> 标签：javascript, jquery, html

我使用 JScript、php 和 jquery 制作了一个小型聊天框。聊天框内容存储在一个 HTML 文档中，该文档回显到文本区域。用户输入的每条消息都存储在一个新的 div 标签中：

```
<div>Message</div>
<div>Second msg</div> 
```

当有 50 多条消息或文件大小 > 10kb 时，如何删除第一个 div 标签（这样我就不会使用所有带宽）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:42:04.257

简单的：

```
$('div:first').remove() 
```

有支票

```
if ($('div').length) > 50) {
    $('div:first').remove();
} 
```

# python - 时间戳后从标准输出获取行

> ID：15282314
> 
> 赞同：1
> 
> 时间：2013-03-07T21:41:03.540
> 
> 标签：python, regex, shell, logging, stdout

在标准输出上打印出大量错误/警告/信息日志。我只对开始特定操作后记录的行感兴趣。

其他信息：我正在使用 Python 远程登录到 shell 环境。我在 shell 上执行命令并存储动作开始的时间。然后我调用一个命令来查看在标准输出上吐出的日志。我希望在该时间戳返回 Python 之后读取 greped 行。我还存储了当前时间，但不确定如何使用它（也许是日期范围上的 grep？）

我可以重定向到一个文件并使用 find 但日志很大，我宁愿不阅读所有内容。我可以 grep -n 获取行号，然后阅读所有内容，但我不知道该怎么做。

egrep 的概念正则表达式类似于：{a-timestamp}*

任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:24:15.623

```
awk '/the-timestamp-I-have/,0' the-log-file 
```

这将打印从 开始的行`the-log-file`，从匹配的第一行开始，`the-timestamp-I-have`一直到最后一行。

参考：

*   [http://www.catonmat.net/blog/awk-one-liners-explained-part-three/](http://www.catonmat.net/blog/awk-one-liners-explained-part-three/)
*   [http://www.catonmat.net/blog/ten-awk-tips-tricks-and-pitfalls/#awk_ranges](http://www.catonmat.net/blog/ten-awk-tips-tricks-and-pitfalls/#awk_ranges)

# c++ - 通过原始缓冲区数据缩放和旋转纹理到另一个纹理

> ID：15282316
> 
> 赞同：0
> 
> 时间：2013-03-07T21:41:08.693
> 
> 标签：c++, geometry, gpu, ogre, c++-amp

我将此提交给gamedev，但它们似乎相当慢，所以我希望我能在这里找到答案。

我一直在搞乱 C++ AMP 和 OGRE，试图让我更容易根据自己的喜好写入/更改纹理。在这我一直试图在我的“动态”纹理上绘制一个纹理，结果很奇怪。我的图像的 3/4 似乎被裁剪掉了，这让我发疯，因为我似乎找不到修复方法。

这是问题的视频：[http ://www.youtube.com/watch?v=uFWxHtHtqAI](http://www.youtube.com/watch?v=uFWxHtHtqAI)

为了便于理解，这里有所有必要的代码，即使内核确实是手头的问题所在：

# 动态纹理.h

```
#define ValidTexCoord(x, y, width, height) ((x) >= 0 && (x) < (width) && (y) >= 0 && (y) < (height))

void TextureKernel(array<uint32, 2> &buffer, array_view<uint32, 2> texture, uint32 x, uint32 y, Real rot, Real scale, bool alpha)
{
    Real
        c = cos(-rot) / scale,
        s = sin(-rot) / scale;
    int32
        //e = int32(sqrt((texture.extent[1] * texture.extent[1]) + (texture.extent[0] * texture.extent[0])) * scale * 0.5F),
        dx = texture.extent[1] / 2,
        dy = texture.extent[0] / 2;

    parallel_for_each(buffer.extent, [=, &buffer](index<2> idx) restrict(amp)
    {
        int32
            tex_x = int32((Real(idx[1] - x) * c) - (Real(idx[0] - y) * s)) + dx,
            tex_y = int32((Real(idx[1] - x) * s) + (Real(idx[0] - y) * c)) + dy;

        if(ValidTexCoord(tex_x, tex_y, texture.extent[1], texture.extent[0]))
        {
            if(!alpha || (alpha && texture(tex_y, tex_x) != 0))
            {
                buffer(idx) = texture(tex_y, tex_x);
            }
        }
        else
        {
            buffer(idx) = 0x336699FF;
        }
    });
}

template<typename T, int32 Rank>
void SetKernel(array<T, Rank> &arr, T val)
{
    parallel_for_each(arr.extent, [&arr, val](index<Rank> idx) restrict(amp)
    {
        arr(idx) = val;
    }); 
}

class DynamicTexture
{
    static int32
        id;

    array<uint32, 2>
        buffer;

public:
    const int32
        width, 
        height;

    TexturePtr
        textureptr;

    DynamicTexture(const int32 width, const int32 height, uint32 color = 0) : 
        width(width),
        height(height),
        buffer(extent<2>(height, width))
    {
        SetKernel(buffer, color);

        textureptr = TextureManager::getSingleton().createManual("DynamicTexture" + StringConverter::toString(++id), ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME, TextureType::TEX_TYPE_2D, width, height, 0, PixelFormat::PF_A8R8G8B8);
    }

    ~DynamicTexture()
    {
    }

    void Texture(TexturePtr texture, uint32 x, uint32 y, Real rot = 0.F, Real scale = 1.F, bool alpha = false)
    {
        HardwarePixelBufferSharedPtr 
            pixelbuffer = texture->getBuffer();

        TextureKernel(buffer, array_view<uint32, 2>(texture->getHeight(), texture->getWidth(), (uint32 *)pixelbuffer->lock(HardwareBuffer::HBL_READ_ONLY)), x, y, rot, scale, alpha);

        pixelbuffer->unlock();
    }

    void CopyToBuffer()
    {
        HardwarePixelBufferSharedPtr 
            pixelbuffer = textureptr->getBuffer();

        copy(buffer, stdext::make_checked_array_iterator<uint32 *>((uint32 *)pixelbuffer->lock(HardwareBuffer::HBL_DISCARD), width * height));

        pixelbuffer->unlock();
    }

    void Reset(uint32 color)
    {
        SetKernel(buffer, color);
    }
};

int32 
    DynamicTexture::id = 0; 
```

# 主文件

```
void initScene()
{
    dynamictexture = new DynamicTexture(window->getWidth(), window->getHeight());

    TextureManager::getSingleton().load("minotaur.jpg", Ogre::ResourceGroupManager::DEFAULT_RESOURCE_GROUP_NAME, Ogre::TextureType::TEX_TYPE_2D, 0);
}

bool frameStarted(const FrameEvent &evt) 
{
    static Real
        ang = 0.F;

    ang += 0.05F;

    if(ang > Math::TWO_PI)
    {
        ang = 0.F;
    }

    dynamictexture->Reset(0);
    dynamictexture->Texture(TextureManager::getSingleton().getByName("minotaur.jpg"), dynamictexture->width / 2, dynamictexture->height / 2, ang, 4.F, true);
    dynamictexture->CopyToBuffer();

    return true; 
} 
```

如您所见，动态纹理是窗口的大小（在本例中为 800x600），minotaur.jpg 为 84x84。我只是将它放置在宽度和高度的一半（中心），将其旋转 ang（弧度），然后将其缩放为 4 倍。

在内核本身中，我只是遵循了一个 2D 旋转矩阵（其中 x 和 y 被参数“x”和“y”偏移）：

```
x' = x cosθ - y sinθ
y' = x sinθ + y cosθ 
```

另请注意， idx[1] 表示数组中的 x 值，而 idx[0] 表示 y，因为它的排列方式`value = buffer[y + (x * height)]`（或类似的方式，但只要知道它的格式正确）。

感谢您的任何帮助！

问候， Tannz0rz

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T07:27:16.523

感谢这个人，我找到了解决方案：[https ://sites.google.com/site/ofauckland/examples/rotating-pixels](https://sites.google.com/site/ofauckland/examples/rotating-pixels)

```
const Real
    HALF_PI = Math::HALF_PI;
const int32
    cx = texture.extent[1] / 2,
    cy = texture.extent[0] / 2;

parallel_for_each(buffer.extent, [=, &buffer](index<2> idx) restrict(amp)
{
    int32
        tex_x = idx[1] - x,
        tex_y = idx[0] - y;
    Real
        dist = sqrt(Real((tex_x * tex_x) + (tex_y * tex_y))) / scale,
        theta = atan2(Real(tex_y), Real(tex_x)) - angle - HALF_PI;

    tex_x = int32(dist * sin(theta)) + cx;
    tex_y = int32(dist * cos(theta)) + cy;

    if(ValidTexCoord(tex_x, tex_y, texture.extent[1], texture.extent[0]))
    {
        buffer(idx) = texture(tex_y, tex_x);
    }
}); 
```

# python - Django 静态设置

> ID：15282318
> 
> 赞同：1
> 
> 时间：2013-03-07T21:41:13.973
> 
> 标签：python, django, python-2.7

我查看了无数答案和问题，试图找到一个明确的指南或方法来做到这一点，但似乎每个人都有不同的方法。有人可以向我解释如何在模板中提供静态文件吗？

假设我刚刚使用 Django 1.4 创建了一个全新的项目，我需要做什么才能渲染图像？我应该把媒体和静态文件夹放在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:49:29.333

1.  将您的静态文件放入`<app>/static`或添加绝对路径`STATICFILES_DIRS`
2.  配置你的网络服务器（你不应该用 Django 提供静态文件）来提供文件`STATIC_ROOT`
3.  指向`STATIC_URL`Web 服务器提供的基本 URL
4.  跑`./manage.py collectstatic`
5.  确保`RequestContext`在您的渲染调用中使用并`{{ STATIC_URL }}`为路径添加前缀
6.  喝咖啡，拍拍自己的背

关于在 Django 前面运行 Web 服务器的更多信息。Django 实际上是一个应用服务器。它并没有被设计为在提供静态文件方面有任何好处。这就是为什么它在`DEBUG=False`. 此外，不应将 Django 开发服务器用于生产。这意味着在任何时候都应该有一些东西在 Django 面前。它可能是一个 WSGI 服务器，例如 gunicorn，也可能是一个“真正的”Web 服务器，例如 nginx 或 Apache。

如果您正在运行反向代理（例如 nginx 或 Apache），您可以绑定`/static`到文件系统中的路径，并将其余流量传递给 Django。这意味着您`STATIC_URL`可以是相对路径。否则，您将需要使用绝对 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:43:42.977

创建的项目应该有一个静态文件夹。将所有资源（图像，...）放在那里。然后，在您的 HTML 模板中，您可以引用 STATIC_ROOT 并添加资源路径（相对于静态文件夹）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:59:55.113

这是官方文档：

如何管理静态文件： [https ://docs.djangoproject.com/en/1.4/howto/static-files/](https://docs.djangoproject.com/en/1.4/howto/static-files/)

一般静态文件： [https ://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/)

如果您打算在生产类型设置中部署，那么您应该阅读此处的部分： [https ://docs.djangoproject.com/en/1.4/howto/static-files/#staticfiles-production](https://docs.djangoproject.com/en/1.4/howto/static-files/#staticfiles-production)

通常，您将我们的静态和媒体文件夹放在 django 项目应用程序之外

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T01:35:06.827

*   在设置中定义您的 STATICFILES_DIRS、STATIC 和 MEDIA 路径。
*   在您的模板文件夹、urls.py、settings.py 等旁边创建 staticfiles 文件夹...
*   您不必创建媒体文件夹，因为它会在您上传图像时自动创建。
*   在你的 urlconf 中放这个：

    ```
    from django.conf.urls import patterns, include, url
    from django.contrib import admin
    from django.conf import settings
    from django.contrib.staticfiles.urls import staticfiles_urlpatterns
    from django.conf.urls.static import static

    admin.autodiscover()

    urlpatterns = patterns('',
        .............
    ) + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)

    urlpatterns += staticfiles_urlpatterns() 
    ```

*   在模板中：

    ```
    {% load static %}
    <img src="{% static 'images.png' %}">
    <img src="{{MEDIA_URL}}images.png"> 
    ```

# c++ - 如何在 C++ 中编写使用其他函数的函数

> ID：15282319
> 
> 赞同：1
> 
> 时间：2013-03-07T21:41:14.233
> 
> 标签：c++, templates, function-pointers

考虑以下代码，它包含在我制作的库中。

```
#include <complex>

std::complex<double> besselJ(int order, std::complex<double> z)
{
    // Function call
}

std::complex<double> besselH1(int order, std::complex<double> z)
{
   // Function call
} 
```

请注意，这两个函数具有相同的签名。现在，我想编写第三个函数，无论它是作用于`besselJ`还是作用于`besselH1`. 我尝试了以下

```
template<std::complex<double> (*T)(int, std::complex<double>)>
std::complex<double> diffBessel(int order, std::complex<double> z)
{
    return T(order-1, z)-T(order+1,z);
} 
```

当成员函数尝试使用该语法`diffbessel<besselJ>(int, std::complex<double>`时，GCC 会抱怨`the value of 'besselJ' is not usable in a constant expression`。请参阅[此答案](https://stackoverflow.com/a/2156899/1415916)以获取解释。

有没有办法像上面的模板化代码一样，如果它在不使用包装`besselJ`和`besselH1`in `struct`s 的情况下工作的话？我认为结构会增加不必要的复杂性。

更新：这很好用，正如@aschepler 建议的那样。实际代码中存在名称冲突。花了额外的第 1001 次看才能看到它。我对其他 StackOverflow 文章感到困惑，这些文章暗示这不起作用，因为函数指针是可变的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T21:44:38.243

**前提：**

假设`besselJ`在您的示例中是*函数*的名称，而不是您用作模板参数的*变量*的名称，那么将函数指针作为非类型模板参数传递*应该可以*工作。

看一个[活生生的例子](http://liveworkspace.org/code/NhL3i%2449)。

**替代解决方案：**

如果您的函数指针保存在其值在运行时计算的变量中，则不允许您将该函数指针用作模板参数。如果要使用运行时函数指针，可以只使用常规*函数*参数而不是模板参数：

```
#include <complex>

std::complex<double> diffBessel(
    std::complex<double> (*fxn)(int, std::complex<double>),
    int order,
    std::complex<double> z
    )
{
    return fxn(order-1, z) - fxn(order+1,z);
} 
```

**更惯用的解决方案：（**需要 C++11）

如果您想要更大的灵活性，可以使用 C++11 `std::function<>`：

```
#include <complex>
#include <functional>

std::complex<double> diffBessel(
    std::function<std::complex<double>(int, std::complex<double>)> fxn,
    int order,
    std::complex<double> z
    )
{
    return fxn(order-1, z)- fxn(order+1,z);
} 
```

在这两种情况下，您的函数都可以这样调用：

```
int main()
{
    std::complex<double> c;
    /* ... */
    diffBessel(besselH1, 2, c);
} 
```

**更多可能性：**

作为进一步的可能性，如果您不想或不能使用`std::function<>`，您可以通过将其设为模板来让您的函数接受任何可调用对象：

```
template<typename F>
std::complex<double> diffBessel(
    F f,
    int order,
    std::complex<double> z
    )
{
    return f(order-1, z) - f(order+1,z);
} 
```

同样，您调用它的方式与调用先前版本的方式完全相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T21:44:23.600

模板需要在编译时知道它们的参数。在运行时将模板参数从变量中拉出是行不通的。

只需将函数指针作为函数参数即可。它不需要是模板函数。

```
std::complex<double> diffBessel(int order,
                                std::complex<double> z,
                                std::complex<double> (*T)(int, std::complex<double>)) 
```

# c++ - COM 服务器作为 Windows 服务，不能将数组作为函数参数传递

> ID：15282328
> 
> 赞同：0
> 
> 时间：2013-03-07T21:41:57.617
> 
> 标签：c++, arrays, windows, service, com

我正在将 COM 服务器（使用 ATL）实现为 Windows 服务。我在服务标头中定义了以下方法：

```
STDMETHOD(SetBytes)(long lenSource, const BYTE* pSource, VARIANT_BOOL *pResult); 
```

此方法在 IDL 文件中声明：

```
[
object,
uuid(351C5A5F-3EB8-4CC5-AB79-6DCD27C2F7E0),
dual,
pointer_default(unique)
]
interface ISampleInterface: IUnknown {
  HRESULT SetBytes([in] long lenSource, [in,ref,size_is(lenSource)] const BYTE* pSource, [out,retval] VARIANT_BOOL *pResult);
}; 
```

我从我的测试应用程序中调用它，如下所示：

```
CoInitialize(NULL);
IUnknownPtr unknown_ptr;
HRESULT hr = unknown_ptr.CreateInstance(__uuidof(MyLib::SampleManager));

if (FAILED(hr)) {
  ...
};

MyLib::ISampleInterfacePtr sample_ptr;
sample_ptr = unknown_ptr; // no check here, assume sample_ptr is not null

VARIANT_BOOL function_result = VARIANT_FALSE;
vector<uint8_t> flash_data(1000, 2);
function_result = sample_ptr->SetBytes(flash_data.size(), &flash_data[0]); 
```

我正在通过执行以下操作来注册服务：

```
MyService.exe /regserver
MyService.exe -service 
```

然后我一步一步地执行测试代码。当我要去 tli 文件时，我们可以看到以下内容

```
HRESULT _hr = raw_SetBytes(lenSource, pSource, &_result); 
```

pSource 绝对没问题，它指向包含我的数据的内存区域。但是当我走得更远（我通过调试器连接到服务）并且我在服务的函数 SetBytes 中时，这个数组中只有一个字节包含在内存区域中，并且这个指针指向不同的地址。

我尝试通过 dll 实现服务器（它在系统中使用 regsvr32 [dllname] 注册）并且在这种情况下指针绝对没问题，并且所有长度都被传递，而不仅仅是一个字节。

我是 COM 技术的新手，想知道我错在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:29:01.030

您需要使用 a`SAFEARRAY`在 COM 中传递字节数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:31:31.620

你也许可以将你的 BYTE 数组包装成一个 SAFEARRAY。

```
 STDMETHODIMP MyClass::getVariantFromCharArray( char *inputCharArray, UINT inputCharArrayLength, VARIANT *outputVariant)
      {
          SAFEARRAYBOUND saBound;
          char  *pData = NULL;

          saBound.cElements = inputCharArrayLength;
           saBound.lLbound      = 0;

          VariantInit( outputVariant);
          (*outputVariant).vt = VT_UI1 | VT_ARRAY;
          (*outputVariant).parray = SafeArrayCreate( VT_UI1, 1, &saBound);

          if ( (*outputVariant).parray)
          {
             SafeArrayAccessData( (*outputVariant).parray, (void **)&pData);
        memcpy( pData, inputCharArray, inputCharArrayLength);
        SafeArrayUnaccessData( (*outputVariant).parray);    

        return S_OK;
    }
    else
    {
        return E_OUTOFMEMORY;
    }
} 
```

# jquery - jQuery 元素值操作

> ID：15282329
> 
> 赞同：0
> 
> 时间：2013-03-07T21:41:57.737
> 
> 标签：jquery, asp.net-mvc-3, html

我有一系列要绑定到我的 MVC 模型的复选框。所以我尝试获取复选框值并将这些值添加到一个隐藏的输入字段，该字段具有正确的 ID 以绑定到我的模型。

```
@foreach (var answer in question.Answers)
{
   <input type='checkbox' id='@answer.Id' value='@(answer.AnswerText)' onchange="toggleHidden(this)"/> 
}
<input type="hidden" id='[@countHolder]' name='WrappedAnswers' value="" /> 
```

我的javascript代码是：

```
function toggleHidden(elem) {
    var isChecked = $(elem).is(":checked");
    if (isChecked) {
        var checkString = elem.value + "|";
        var currentString = $('#[@(countHolder)]').val();
        $('#[@(countHolder)]').val(currentString + checkString);
    }
    else {
        // Remove checkString from $('#[@(countHolder)]').value
    }
} 
```

如您所料，代码不起作用。我在javascript方面不是很好，我做错了什么。

谢谢。

**编辑**：这是呈现的代码

```
<!-- Answers -->
<input type='checkbox' id='158' name='WrappedAnswers' value='Answer 1' onchange="toggleHidden(this)"/> 
<input type='checkbox' id='159' name='WrappedAnswers' value='Answer 2' onchange="toggleHidden(this)"/> 
<input type='checkbox' id='160' name='WrappedAnswers' value='Answer 3' onchange="toggleHidden(this)"/> 

<input type="hidden" id='[5]' name='WrappedAnswers' value="" />

<script type="text/javascript">
function toggleHidden(elem) {
     var isChecked = $(elem).is(":checked");
     if (isChecked) {
        var checkString = elem.value + "|";                                          
        $('#[5]').val($('#[5]').val() + checkString);
     }
     else {
     }
 }
 </script>
 <!-- End Answers --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:52:21.840

而不是处理每个更改（检查/取消检查）并且必须将值添加/删除到“管道分隔”字符串（隐藏字段的值）中，我将为将通过的表单添加一个“提交时”处理程序复选框并添加已选中的复选框。

如果您将复选框包含在一个 div 容器中，那么从 jQuery 中选择它们会更容易。因此，代码将类似于：

```
<div id="checkContainer">
    @foreach (var answer in question.Answers)
    {
        <input type="checkbox" id="@answer.Id" value="@(answer.AnswerText)" /> 
    }
</div>
<input type="hidden" id="countHolder" name="WrappedAnswers" value="" />
<script>
     $("form").submit() {
          var $checkboxes = $("#checkContainer").find("[type='checkbox']");
          $checkboxes.each(function() {
              if ($(this).is(":checked")) {                  
                  $("#countHolder").val($("#countHolder").val() + "|" + $(this)val());
              }
          });
          return true;
     }
</script> 
```

# javascript - 如何让 jQuery 在 Amazon Webstore 上运行

> ID：15282331
> 
> 赞同：-4
> 
> 时间：2013-03-07T21:42:01.993
> 
> 标签：javascript, jquery, amazon

我只是想***明确***地知道如何让 jQuery 在 Amazon Webstore 上运行。Amazon Webstore 上有关于 jQuery 的文档，内容如下：

> “通常你可以使用简单的'$'处理程序来引用java对象，在亚马逊网上商店使用“jQuery”引用代替。但是，如果你想使用“$”处理程序编写你的JavaScript，你可以使用jQuery.noConflict 。”

我试图这样做（可能不正确）并且没有成功。我确保我所有的 .js 都链接在标题中，这就是我知道要检查的故障排除。

我想要做的就是拥有一个 jQuery 幻灯片/滑块和灯箱。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:59:32.300

像这样的东西：

```
jQuery.noConflict();
jQuery(document).ready(function(){
    jQuery("selector").method();
}); 
```

... 代替：

```
$(document).ready(function(){
    $("selector").method();
}); 
```

# soundcloud - Soundmanager 2 事件不会触发/触发

> ID：15282333
> 
> 赞同：1
> 
> 时间：2013-03-07T21:42:08.547
> 
> 标签：soundcloud, soundmanager2

soundmanager 2 事件不会触发。这是一个片段，其中 console.logs 根本不触发，因此任何不同的事件都不会在应该触发的时候触发。

```
soundManager.setup({
    url: "js/swf/",
    preferFlash: false,
    useFlashBlock: false,
    onready: function() {

        soundManager.play(url, id, {
            id: id,
            url: url,

            onplay: function() {    
                console.log("test");        
            },
            onresume: function() {
                console.log("test");
            },
            onpause: function() {
                console.log("test");
            },
            onfinish: function() {
                console.log("test");
                next();
            },
            whileplaying: function() {
                console.log("test");
            },      
        }); 

    },

    defaultOptions: {
        multiShotEvents: true, // allow events (onfinish()) to fire for each shot, if supported.
    }

}); 
```

这是因为我禁用了闪光灯吗？当前存在一个错误，即 flash 不能在 chrome 中工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T13:34:45.097

你应该使用

```
var sound = soundManager.createSound({id: 'soundId', url: '1.mp3'});
sound.play({
    onplay: function() {
        ...
    }
}) 
```

你错过了“createSound”

# ember.js - 嵌套路由映射

> ID：15282335
> 
> 赞同：0
> 
> 时间：2013-03-07T21:42:16.083
> 
> 标签：ember.js, ember-data, ember-router

这是我的设置

```
DS.RESTAdapter.configure 'plurals',
  child: 'children'

App.Router.map ->
  @resource 'people', ->
    @resource 'person', path: ':person_id', ->
      @route 'children'

App.PerosnChidlrenRoute = Ember.Route.extend
  model: -> App.PerosnChidlren.find() 
```

所以，这里有两个问题：首先是 PersonChildren 打的是 /person_childrens 而不是 /people/:person_id/children。第二个是你可以提到的不正确的复数形式：）你能解释一下我如何正确设置路由和复数形式吗？

ps 我试着把所有东西都放在[http://jsfiddle.net/UJkn3/1/](http://jsfiddle.net/UJkn3/1/)

# python - 创建阿拉伯语语料库

> ID：15282336
> 
> 赞同：2
> 
> 时间：2013-03-07T21:42:28.883
> 
> 标签：python, nlp, nltk, sentiment-analysis, rapidminer

我正在对阿拉伯语进行情感分析，我想创建自己的语料库，为此，我从 facebook 收集 300 个状态并将它们分为正面和负面，现在我想做这些状态的标记化，为了获得单词列表，然后生成单字和双字，三字并使用交叉折叠验证，我目前正在使用 nltk python，该软件是否能够执行阿拉伯语或 rapis 的任务Minner 会更好地工作，你怎么看，我想知道如何生成二元组、三元组和使用交叉折叠验证，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T07:00:21.353

嗯，我觉得rapidminer很有意思，可以处理这个任务。它包含几个处理文本挖掘的运算符。此外，它还允许创建具有高流畅性的新运算符。

# ruby-on-rails - rename_sth 是如何工作的？

> ID：15282339
> 
> 赞同：0
> 
> 时间：2013-03-07T21:42:45.673
> 
> 标签：ruby-on-rails

例如

```
rename_column :user, :email_address, :email 
```

它从什么名称重命名，又重命名为什么名称？这里有三个属性让我完全困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:46:24.363

```
rename_column :user, :email_address, :email 
```

**:user** - 表名

**:email_address** - 来自（旧名称）

**:email** - to(新名字)

在一个迁移文件（单个迁移）中，您一次可以提醒多个表，这就是为什么将表名作为参数传递以确保正确表中的列将被重命名。

# fitnesse - Fitnesse slim：调用泛型方法（fitSharp）

> ID：15282341
> 
> 赞同：1
> 
> 时间：2013-03-07T21:42:54.613
> 
> 标签：fitnesse, fitsharp, fitnesse-slim

```
Linux 3.2.0-3-amd64 #1 SMP Mon Jul 23 02:45:17 UTC 2012 x86_64 GNU/Linux
Mono 2.10.8.1 (Debian 2.10.8.1-7) (64-bit)
glib-sharp 2.12.0.0
FitNesse (v20121220)
FitSharp release 2.2 for .net 4.0 
```

我有一个 C# 夹具，其中包含以下通用方法

```
public Func<T> GetProcedure<T>(string name)
{
    return () => default(T);
} 
```

**问题**：如何从 Slim 脚本表中调用*GetProcedure ？*

```
| show | GetProcedure; <?specify type here?> | text | 
```

我在源码中发现了如下测试，所以应该是可以的。但是，我不知道如何在脚本表中定义类型 T 以便 slim 可以解析它... [https://github.com/jediwhale/fitsharp/blob/master/source/fitSharpTest/NUnit/Machine/ MemberQueryTest.cs](https://github.com/jediwhale/fitsharp/blob/master/source/fitSharpTest/NUnit/Machine/MemberQueryTest.cs)

```
[Test] public void GenericMethodWithParmsIsInvoked() {
    var member = new MemberName("genericmethodofsystemint32", "genericmethod", new[] { typeof(int)});

    var method = MemberQuery.FindInstance(MemberQuery.FindMember, instance, new MemberSpecification(member, 1));
    Assert.IsNotNull(method);
    var result = method.Invoke(new object[] {123});
    Assert.AreEqual("sample123", result.Value.ToString());
}

// This method found via the reflection above.
// see: fitSharp.Test.Double.SampleClass
public string GenericMethod<T>(T input) {
    return "sample" + input;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:24:12.033

不幸的是，Slim 不支持泛型方法。如果您使用 Fit 测试系统，您会说“getprocedure of mytype”作为方法名称。

# java - Java 更新程序问题

> ID：15282348
> 
> 赞同：0
> 
> 时间：2013-03-07T21:43:12.337
> 
> 标签：java, file, sockets, object, updates

我有一个程序，它使用服务器发送的信息，使用套接字来更新计算机上的文件。我的工作方式，但我想让它更直观、更简单、更可靠等。这是前面的代码：

```
int filesize = 6022386; // filesize temporary hardcoded

    int bytesRead;
    int current = 0;

    /**
     *  receive file
     */
    try {
        byte[] byteArray = new byte[filesize];
        java.io.InputStream inStream = socket.getInputStream();
        bytesRead = inStream.read(byteArray, 0, byteArray.length);
        FileOutputStream fileOutStream = new FileOutputStream(
                "C:\\Program Files\\AVTECH\\NPS\\Files\\bin\\NPS Game.txt");
        BufferedOutputStream buffOutStream = new BufferedOutputStream(
                fileOutStream);
        current = bytesRead;

        do {
            bytesRead = inStream.read(byteArray, current,
                    (byteArray.length - current));
            if (bytesRead >= 0)
                current += bytesRead;
        } while (bytesRead > -1);

        buffOutStream.write(byteArray, 0, current);
        buffOutStream.flush();
        buffOutStream.close();
        inStream.close();
        socket.close();
    } catch (Exception e) {
        e.printStackTrace();
        socket.close();
    } 
```

如您所见，在`do, while`循环中，它使用输入流来获取数据。现在我已经更新了我的程序，我让流发送一个名为 的对象`UpdateObject`，该对象包含`byte[]`数组和文件目录。这是该代码：

```
 int filesize = 6022386; // filesize temporary hardcoded

    int bytesRead;
    int current = 0;
    try {
        byte[] byteArray = o.getFile();
         java.io.InputStream inStream = socket.getInputStream();
         bytesRead = inStream.read(byteArray, 0, byteArray.length);

        FileOutputStream fileOutStream = new FileOutputStream(o.getPath());
        BufferedOutputStream buffOutStream = new BufferedOutputStream(
                fileOutStream);
        current = bytesRead;

        do {
            bytesRead = inStream.read(byteArray, current,
                    (byteArray.length - current));
            if (bytesRead >= 0)
                current += bytesRead;
        } while (bytesRead > -1);

        buffOutStream.write(byteArray, 0, current);
        buffOutStream.flush();
        buffOutStream.close();
        inStream.close();
        socket.close();
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

现在我的问题是：我如何更改它而不是使用, 来仅使用通过套接字发送`instream`的 byte[] 对象？`UpdateObject`我做了一些谷歌搜索，但我不觉得我知道要问的正确问题。任何帮助都会很棒！提前致谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:51:37.497

通过将 try catch 块中的大部分代码替换为：

```
FileOutputStream fileOutStream = new FileOutputStream(
    UpdateObject.getDirectory()+"\\NPS Game.txt");
fileOutStream.write(UpdateObject.getBytes()); //this is the byte[] array
fileOutStream.close(); 
```

希望这可以帮助。

# javascript - a:active 不能在移动设备上工作

> ID：15282354
> 
> 赞同：0
> 
> 时间：2013-03-07T21:43:35.873
> 
> 标签：javascript, iphone

我的问题是：当我在移动设备上单击它时，为什么这个 div（with class="menu_cent"）不能工作类 .menu_cent:active，但在桌面上它的工作原理。

```
 <div class="m_10">
        <a href="#" onclick="set_lng('en')"><div class="menu_cent">English</div></a>
    </div>

    .menu_cent   
{background:#fff;font-family:Arial, Helvetica, sans-serif;word-wrap:break-word;min-height:16px;background:#FFF;border:1px solid #d9d9d9;padding:10px;line-height:1.3;text-align:center;font-size:16px;color:#888;font-weight:700;cursor:pointer}

    .menu_cent:active   
{background:#f1f1f1;font-family:Arial, Helvetica, sans-serif;word-wrap:break-word;min-height:16px;background:#FFF;border:1px solid #d9d9d9;padding:10px;line-height:1.3;text-align:center;font-size:16px;color:#888;font-weight:700;cursor:pointer} 
```

我曾尝试使用

```
<div class="m_10">
    <a href="#" onclick="set_lng('en')"><div onClick="style.backgroundColor='#f1f1f1';" class="menu_cent">English</div></a>
</div> 
```

它有效，但有延迟。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:54:33.777

如果您希望链接成为目标，则将活动伪类放在错误的元素上。以下是您想要处理的方法：

```
a:active div.menu_cent{
 property: blah;
} 
```

否则，您可以设置 div:active （我知道这适用于 WebKit 浏览器，不了解其他浏览器），但通常您主要需要锚元素上的 :active 和 :visited 伪类。

**此外**，您在该 :active 块中设置了两次背景。这就是为什么您没有看到任何变化的部分原因。

# cocos2d-iphone - CCRotateBy 动作间歇性地跳动/生涩？Cocos2d

> ID：15282358
> 
> 赞同：0
> 
> 时间：2013-03-07T21:43:43.693
> 
> 标签：cocos2d-iphone, ccaction

我有一个 cpCCSprite 的子类，它仅用于使用花栗鼠 spaceManager，我的类如下所示：

```
@implementation Helmet

+(id) helmetWithGame:(Game*)game {

    return [[[self alloc] helmetInit:game] autorelease];

}

- (id) helmetInit:(Game*)game {

    cpShape *helmet_1;
    cpShape *helmet_2;
    cpShape *helmet_3;
    cpShape *reference;

    reference = [game.spaceManager addCircleAt:cpvzero mass:STATIC_MASS radius:2];

    helmet_1 = [game.spaceManager addCircleToBody:reference->body radius:20 offset:cpv(-5, 2)];

    helmet_2 = [game.spaceManager addCircleToBody:reference->body radius:8 offset:cpv(16, -14)];

    helmet_3 = [game.spaceManager addCircleToBody:reference->body radius:8 offset:cpv(8, -14)];

    reference->group    =1;
    helmet_1->group     =1;
    helmet_2->group     =1;
    helmet_3->group     =1;

    [self initWithFile:@"Helmet.png"];
    [self setBody:reference->body];

    self.spaceManager = game.spaceManager;
    self.autoFreeShapeAndBody = YES;

    gameScreenSize = game.contentSize;

    return self;
}

- (void) generateAndShowOn:(Game *)game {

    float startX = (float)((arc4random_uniform(101)) + 100);//returns number from 100 to 200 and casts it as a float
    float startY;

    int endXRange = (game.contentSize.width * .8) - (game.contentSize.width * .5);
    float endX = (float)((arc4random_uniform(endXRange)) + (game.contentSize.width * .5));
    float endY;

    BOOL shouldStartTop;

    if ((arc4random_uniform(101)) < 50) {//returns number from 0 to 100 and checks to see if it is less than 50\. If it is, than the helmut starts at the top
        shouldStartTop = YES;
        startY = game.contentSize.height + (self.contentSize.height * .5);
        endY = -self.contentSize.height;
    }

    else {

        shouldStartTop = NO;
        startY = -(self.contentSize.height * .5);
        endY = game.contentSize.height + self.contentSize.height;
    }

    self.position = ccp(startX, startY);
    [game addChild:self];

    ccBezierConfig bezier;
    bezier.controlPoint_1 = ccp (startX, startY);
    bezier.controlPoint_2 = ccp (endX, endY);
    bezier.endPosition    = ccp (endX, endY);

    id rotate =[CCRotateBy actionWithDuration:1.5f angle:360];
    id curve = [CCBezierTo actionWithDuration:1.5f bezier:bezier];
    id spawn = [CCSpawn actions:rotate, curve, nil];

    [self runAction:spawn];

    [self schedule:@selector(doneAnimating) interval:1.6];

}

- (void) doneAnimating{

    if ([[self delegate]respondsToSelector:@selector(helmetPastBounds:)]) {
        [[self delegate]helmetPastBounds:self];

    }
}

- (void) dealloc {

    CCLOG(@"%s", __PRETTY_FUNCTION__);

    [super dealloc];
}

@end 
```

所以每秒调用一个这个类的新实例，这样屏幕上一次可以有多个头盔。然后我有另一种方法，在操作完成后稍微调用它以移除当前头盔并释放它。但是我遇到的问题是动作经常跳动/生涩，而 FPS 为 60。我是否需要对这些动作做一些不同的事情，或者是什么原因造成的？

# knockout.js - 在淘汰赛中，如何延迟数据绑定直到填充数组？

> ID：15282360
> 
> 赞同：0
> 
> 时间：2013-03-07T21:43:55.737
> 
> 标签：knockout.js

我现在已经多次遇到这种模式，但还没有找到一种优雅的方式来处理它。我正在尝试设置具有只读和编辑模式的页面。

这是html：

```
<div>
    <span data-bind="text: EventType, if: !EditMode()"></span>
    <select data-bind="options: $root.EventTypes, optionsValue: 'Id', 
        optionsText: 'Name', value: EventType, if: EditMode()"></select>
</div>
<div>
    <a href="#" data-bind="click: edit">Edit</a>
</div> 
```

和javascript：

```
function viewModel(eventJSON) {
    var self = this;

    self.EventType = ko.observable(eventJSON.EventType);
    self.EventTypes = ko.observableArray([]);

    self.edit = function() {
        $.getJSON("url...", function(eventTypesJSON) {
            self.EventTypes(eventTypesJSON);
        }
    }
} 
```

我遇到了数据绑定的时间问题。当调用 applyBindings 时，span 会被正确填充。但是，当我进入编辑模式时，下拉列表未设置为所选值，并且 EventType 设置为未定义。

这是我认为正在发生的事情：

1.  用户单击 Edit 按钮并进行 ajax 调用以检索 EventType。
2.  选择是数据绑定的。由于 EventTypes 数组为空，因此 EventType 设置为 null。
3.  ajax 调用完成并填充 EventTypes。
4.  由于 EventType 先前设置为 null，因此选择了下拉列表中的第一项。（例如，原来的 EvenType 值丢失了。）

我想要它做什么：

1.  用户单击 Edit 按钮并进行 ajax 调用以检索 EventType。
2.  ajax 调用完成并填充 EventTypes 数组。
3.  选择是数据绑定的，并且选择了列表中的正确项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-09T20:40:40.573

我相信我今天遇到了同样的问题并找到了解决方案：

*   SELECT 从可观察数组中获取选项的值和文本。
*   可观察数组的数据在视图模型的其余部分被填充后加载。
*   数组的选定值来自视图模型的另一个字段。

我能够通过将选定的值传递给从 Web 服务调用加载数组的函数来使其工作。调用完成后，我将值分配回最初用作选定值的可观察对象。这样做会强制该字段的订阅者重新绑定，以便现在正确填写的 SELECT 更改所选值。

我知道这对你来说已经晚了，可能不完全是你的情况，但听起来很相似，可能会帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:14:35.827

不要将*EventTypes*数组设置为空，而是使用最初选择的事件类型引导它，这样在启用选择时它不会清除*EventType*值。一旦 ajax 从调用返回，内容无论如何都会被覆盖。IE：

```
self.EventTypes = ko.observableArray([eventJSON.EventType]); 
```

或者，如果由于某种原因您无法事先初始化数组，并且由于初始事件仍在 ajax 回调的范围内，只需在加载数组后重置*EventType ：*

```
$.getJSON("url...", function(eventTypesJSON) {
   self.EventTypes(eventTypesJSON);
   self.EventType(eventJson.EventType);
} 
```

在后者中，请注意不要对初始视图模型参数和 ajax 回调中的参数使用相同的名称，否则后者将覆盖第一个。

# windows - 如何在windows中制作后台应用程序

> ID：15282364
> 
> 赞同：-3
> 
> 时间：2013-03-07T21:44:17.360
> 
> 标签：windows, vb.net

这真是一个错误的问题。你需要告诉我的只是制作一个隐藏表单并在 onload 事件中编写你的代码，但你仍然低估了这篇文章。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:49:34.997

听起来您可能对创建[Windows 服务](http://en.wikipedia.org/wiki/Windows_service)感兴趣。

您应该能够搜索诸如“VB.net 中的 Windows 服务”之类的术语，以找到一些更深入的教程。

我在[code.msdn.microsoft.com](http://code.msdn.microsoft.com/windowsdesktop/VBWindowsService-3fc2805b)上在线找到了一个示例。

如果链接被破坏，这里是文章的一些片段：

> 第1步。在 Visual Studio 2010 中，添加一个名为 VBWindowsService 的新 Visual Basic/Windows/Windows 服务项目。项目模板会自动添加一个名为 Service1 的组件类，该组件类继承自 System.ServiceProcess.ServiceBase。
> 
> 第2步。将默认 Service1 重命名为“SampleService”。在设计器中打开服务并将 ServiceName 属性设置为 VBWindowsService。
> 
> 第三步。要将自定义事件日志功能添加到您的服务，请将事件日志组件从工具箱拖放到设计视图，并将其 Log 属性设置为 Application，并将其 Source 设置为 VBWindowsService。事件日志组件将用于将一些消息记录到应用程序日志中。
> 
> 第4步。要定义服务启动和停止时发生的情况，请在代码编辑器中找到创建项目时自动覆盖的 OnStart 和 OnStop 方法，并编写代码以确定服务开始运行时发生的情况。
> 
> 注意：服务应用程序设计为长时间运行。因此，它通常会轮询或监视系统中的某些内容。在 OnStart 方法中设置监视。但是， OnStart 实际上并不进行监控。OnStart 方法必须在服务操作开始后返回操作系统。它不能永远循环或阻塞。要建立一个简单的监控机制，一个通用的解决方案是在 OnStart 中创建一个计时器。然后计时器会定期在您的代码中引发事件，此时您的服务可以进行监控。另一种解决方案是生成一个新线程来执行主要服务功能。

我删除了对示例的一些细节的引用，并省略了源代码。

# extjs - Ext JS4：什么配置将文本包装在其父容器中？

> ID：15282376
> 
> 赞同：1
> 
> 时间：2013-03-07T21:44:53.960
> 
> 标签：extjs, extjs4

我的页面右侧有一个 vbox 面板：

```
 {
            xtype: 'panel',
            region: 'east',
            itemId: 'clipboard',
            autoScroll: true,
            width: 200,
            layout: {type:'vbox',align: 'stretch',pack: 'start'},
            collapsible: false,
            split: true,
            border: false,
        } 
```

发生事件时，我需要将带有文本的新图像添加到“剪贴板”条中：

```
var clipboard = Ext.ComponentQuery.query('panel[itemId=clipboard]')[0];
clipboard.add(
    {
        xtype: 'panel',
        layout: { type: 'vbox', align: 'center',pack: 'start'},
        data: data,
        margin: '5 0 5 0',
        items: [{
            xtype: 'image',
            src: 'resources/images/clipboardItem.png',
            height: 32,
            width: 32
        }, {
            xtype: 'box',
            html: 'This text needs to wrap around because it is too wide to fit in the clipboard strip.'
        }]
    }); 
```

图像正确地居中于文本之上。文本应环绕，使其不比剪贴板宽。然而，它的容器并没有缩小到条带的宽度。文本长度决定了其直接容器的宽度。

我需要进行哪些配置更改，以便我添加到剪贴板的每个项目都有一个居中的图像，然后是一个可能在剪贴板边界内环绕的文本块，并且当用户更改宽度时一切都会调整剪贴板？

[http://jsfiddle.net/nxSmS/](http://jsfiddle.net/nxSmS/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T00:08:49.090

只需为框添加宽度...

```
xtype: 'box',
width: '100%',
html: '<p>This text is super long and will be too wide for the panel</p>', 
```

# regex - 每个数字组匹配 1 个连字符

> ID：15282377
> 
> 赞同：1
> 
> 时间：2013-03-07T21:44:54.530
> 
> 标签：regex, numbers, hyphen

我正在尝试提出一些正则表达式来匹配任意数量的数字组的 1 个连字符。无字符 ([az][AZ])。

123-356-129811231235123-1235612346123451235

```
/[^\d-]/g 
```

上面的一个将匹配下面的字符串，但它会让以下内容通过：

1223--1235---123123------

我正在查看以下帖子[如何将连字符与正则表达式匹配？](https://stackoverflow.com/questions/4068629/how-to-match-hyphens-with-regular-expression)寻求答案，但我没有找到任何接近的东西。

@Konrad Rudolph 举了一个很好的例子。

[正则表达式匹配 7-12 位数字；可能包含空格或连字符](https://stackoverflow.com/questions/2095711/regular-expression-to-match-7-12-digits-may-contain-space-or-hyphen)

这个工具对我有用[http://www.gskinner.com/RegExr/](http://www.gskinner.com/RegExr/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:00:16.263

假设它不能以连字符开头：

```
^\d(-\d|\d)*$ 
```

分解：

```
^             # match beginning of line
   \d         # match single digit
   (-\d|\d)+  # match hyphen & digit or just a digit (0 or more times)
$             # match end of line 
```

这使得每个连字符*都*必须紧跟一个数字。但请记住，以下是合法模式的示例：

```
213-123-12314-234234
1-2-3-4-5-6-7
12234234234 
```

[gskinner 示例](http://regexr.com?341vg)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:24:38.077

或者：

```
^(\d+-)+(\d+)$ 
```

所以它是一组或多组数字，后跟连字符+最后一组数字。没什么特别的，但在我的测试中，它只有在两边都有连字符和数字时才匹配。

# google-maps - 谷歌地图 - 通过 URL 在启动时缩放和打开特定信息窗口？

> ID：15282381
> 
> 赞同：0
> 
> 时间：2013-03-07T21:45:07.727
> 
> 标签：google-maps, url, infowindow

我有一个使用 googledocs 作为其数据源的谷歌地图应用程序，带有 100 个标记。

我希望能够在从 URL 启动时放大并打开这些现有制造商之一的 infoWindow。

此地图的链接将源自另一个应用程序，该应用程序将有权访问所需的 PK，唯一标识所需的标记。

我将如何构建 URL 来实现这一点？

例子？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:56:06.247

让它工作使用： function getUrlParams() { var params = {}; window.location.search.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(str,key,value) { params[key] = value; } ); 返回参数；

# javascript - Valums 文件上传器拖放区域更改

> ID：15282388
> 
> 赞同：0
> 
> 时间：2013-03-07T21:45:28.470
> 
> 标签：javascript, valums-file-uploader, fine-uploader

我有一个按钮和一个拖放区域。我想将值文件上传器应用于此按钮。但是希望将拖放区域保留为除此之外的另一个框。我如何实现它？我目前的实现如下：

```
 that.imageUploader = new qq.FileUploaderBasic({
                button: $('#sprPictureUpload')[0],
                action: '/ui/rest/utils/upload/image/file',
                allowedExtensions:SUPPORTED_IMAGE_TYPES,
                forceMultipart: true,
                multiple: config.multiple,
                inputName: 'photoFile',
                onSubmit: function(id, fileName) {
                    renderImagePlaceHolders.call(that, id, fileName);
                },

            }); 
```

html 如下所示：

```
<section class="upload-section" data-section="upload">
    <div class="upload-area">
        <div style="">
            <h3 style="color:#aaa">
                Drag images here
            </h3>
            <h5 style="color:#aaa"> or if you prefer ...</h5>
            <a id="sprGenericPictureUpload" class="btn btn-primary">
                <i class="icon-upload icon-white"></i> Choose image to Upload 
            </a>
        </div>
    </div>
</section> 
```

所以我想要的是单击`#sprPictureUpload`并拖动该`.upload-area`部分中的任何位置应该启动照片上传。还有一种方法可以将上传器应用于具有相同配置的两个不同元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:51:39.697

我建议不要使用 FineUploaderBasic 而是使用 FineUploader 模式。FineUploader 模式为您提供拖放功能。

FineUploader 模式文档在这里：

[http://docs.fineuploader.com/integrating/modes/fineuploader.html](http://docs.fineuploader.com/integrating/modes/fineuploader.html)

# ruby - Rspec/mocks 引发未初始化的常量 BasicObject::RSpec

> ID：15282389
> 
> 赞同：2
> 
> 时间：2013-03-07T21:45:31.740
> 
> 标签：ruby, rspec, rspec-mocks

我刚刚安装了 rspec 和 rspec-mocks 但我无法运行最简单的设置

```
irb(main):001:0> require 'rspec'
=> true
irb(main):004:0> require 'rspec/mocks'
=> false
irb(main):006:0> RSpec::Mocks::setup(Object.new)
NameError: uninitialized constant BasicObject::RSpec
    from /usr/local/Cellar/ruby/1.9.1-p376/lib/ruby/gems/1.9.1/gems/rspec-mocks-2.13.0/lib/rspec/mocks.rb:60:in `block in add_extensions'
    from /usr/local/Cellar/ruby/1.9.1-p376/lib/ruby/gems/1.9.1/gems/rspec-mocks-2.13.0/lib/rspec/mocks.rb:60:in `class_eval'
    from /usr/local/Cellar/ruby/1.9.1-p376/lib/ruby/gems/1.9.1/gems/rspec-mocks-2.13.0/lib/rspec/mocks.rb:60:in `add_extensions'
    from /usr/local/Cellar/ruby/1.9.1-p376/lib/ruby/gems/1.9.1/gems/rspec-mocks-2.13.0/lib/rspec/mocks.rb:11:in `setup'
    from (irb):6
    from /usr/local/Cellar/ruby/1.9.1-p376/bin/irb:12:in `<main>' 
```

我想知道可能出了什么问题，我需要加载其他宝石吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-21T18:08:39.117

Jonathan 是在正确的轨道上，但问题的根源是与 1.8.7 不兼容，因为 ::BasicObject 仍然存在于 Ruby 1.9 中。

*通过将补丁*限制为 Ruby 1.8 来更恰当地指定作者正在修补的内容的正确解决方案：

```
def method_host
  # On 1.8.7, Object.ancestors.last == Kernel but
  # things blow up if we include `RSpec::Mocks::Methods`
  # into Kernel...not sure why.
  return Object unless defined?(::BasicObject) && RUBY_VERSION =~ /^1\.8\.\d+/

  # MacRuby has BasicObject but it's not the root class.
  return Object unless Object.ancestors.last == ::BasicObject

  ::BasicObject
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T20:30:41.587

如果您坚持使用 Ruby 1.9.1，我想我已经为您提供了解决方案，但有一个警告——这有点 hack！

如果您查看您的错误消息，它会说失败位于 /lib/rspec/mocks.rb 的第 60 行。所以让我们看一下：[https ://github.com/rspec/rspec-mocks/blob/v2.13.0/lib/rspec/mocks.rb](https://github.com/rspec/rspec-mocks/blob/v2.13.0/lib/rspec/mocks.rb)

```
def add_extensions
  method_host.class_eval { include RSpec::Mocks::Methods } # (line 60)
  Class.class_eval  { include RSpec::Mocks::AnyInstance }
  $_rspec_mocks_extensions_added = true
end 
```

请注意，此私有方法的第一行（第 60 行）正在调用“method_host”。所以让我们看一下私有方法'method_host'的几行：

```
def method_host
  # On 1.8.7, Object.ancestors.last == Kernel but
  # things blow up if we include `RSpec::Mocks::Methods`
  # into Kernel...not sure why.
  return Object unless defined?(::BasicObject)

  # MacRuby has BasicObject but it's not the root class.
  return Object unless Object.ancestors.last == ::BasicObject

  ::BasicObject
end 
```

您可以看到有几个条件，它有时会返回“Object”，否则会返回“BasicObject”。所以，这让我想知道我们是否不能添加我们自己的条件。

```
return Object unless defined?(::BasicObject::RSpec) 
```

我们可以通过创建一个文件来测试它，我们称之为 mocks_hack.rb，我们将在其中重新定义“method_host”以包含我们的条件。

```
module RSpec
  module Mocks
    class << self

    private

      def method_host
        # On 1.8.7, Object.ancestors.last == Kernel but
        # things blow up if we include `RSpec::Mocks::Methods`
        # into Kernel...not sure why.
        return Object unless defined?(::BasicObject)

        # MacRuby has BasicObject but it's not the root class.
        return Object unless Object.ancestors.last == ::BasicObject

        # Jon's hack for Anurag Uniyal
        return Object unless defined?(::BasicObject::RSpec)

        ::BasicObject
      end
    end
  end
end 
```

从 mocks_hack.rb 的当前目录，启动 irb 和以下代码应该“工作”。

```
require 'rspec'
require './mocks_hack'
RSpec::Mocks::setup(Object.new) 
```

现在，这附带了一个免责声明——这是一个 hack，我不完全理解进行这种更改可能会产生什么影响。希望它有所帮助，并且是一种可行的解决方法。

# csv - 删除两个字符之间的 \n （新行）

> ID：15282390
> 
> 赞同：1
> 
> 时间：2013-03-07T21:45:34.847
> 
> 标签：csv, sed, awk

当它们是两个标签时，我尝试使用 awk 或 sed 删除 \n 。

示例：一个 csv 文件框架，在一列中有新行。我需要删除这个新行，但不是文本，也不是每行之间的新行。

```
row1-col1;row1-
col2;
row2-col1;row2-
col2; 
```

应该看起来像：

```
row1-col1;row1-col2;
row2-col1;row2-col2; 
```

我尝试了许多过滤器都没有成功，现在我有点困惑。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:55:34.230

如果它真的只是连接每一行的问题，你可以这样做：

```
awk '(NR % 2) == 1 { saved=$0; next; } { printf("%s%s\n", saved, $0); }' file.txt 
```

第一个子句保存每个奇数行而不打印，第二个子句打印保存的行后跟当前行，中间没有换行符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:57:29.470

尝试这个：

```
awk '{if ($0~/;$/)print $0;else printf $0}' file 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T23:40:24.967

```
$ cat file                      
row1-col1;row1-
col2;
row2-col1;row2-
col2;

$ awk '{ORS=(NR%2?"":"\n")}1' file
row1-col1;row1-col2;
row2-col1;row2-col2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:53:59.613

如果您的行总是拆分，`-`那么您可以使用以下`sed`脚本：

```
sed ':a;N;$!ba;s/-\n/-/g' file.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T21:55:22.230

一种使用方式`sed`。它将所有输入追加到最后一行 ( `$!`)，然后删除所有带有前面的换行符`-`。

```
sed -n ':a ; $! { N; b a }; s/-\n/-/g ; p' infile 
```

它产生：

```
row1-col1;row1-col2;
row2-col1;row2-col2; 
```

# jpa - 获取Ebean play framework 2.0中的特定列

> ID：15282394
> 
> 赞同：2
> 
> 时间：2013-03-07T21:45:55.303
> 
> 标签：jpa, playframework, ebean

我正在尝试从表中的**名称**列中获取唯一名称列表。

```
List<String> li =  Ebean.find(User.class).where().? 
```

我该怎么办？

例如，如果我的表看起来像：

```
insert into users (name, age, height) values ('John', 19, 187);
insert into users (name, age, height) values ('Sam', 24, 160);
insert into users (name, age, height) values ('John', 21, 177); 
```

我希望我的列表看起来像

```
['John', 'Sam'] 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:45:56.163

您可以将`li`数组声明为空，然后通过迭代填充它：

```
List<String> li = new ArrayList<String>();

for(User user: User.find.select("name").findList()) {
    li.add(user.name);
}

return li; 
```

# jailbreak - Theos make: *** [内部安装] 错误 1

> ID：15282395
> 
> 赞同：1
> 
> 时间：2013-03-07T21:46:04.833
> 
> 标签：jailbreak, theos

我将开始开发越狱调整。我从本教程开始：http: [//brandontreb.com/beginning-jailbroken-ios-development-building-and-deployment/](http://brandontreb.com/beginning-jailbroken-ios-development-building-and-deployment/)

我使用此命令收到以下错误

```
sudo make package install

/Users/.../fooproject/theos/makefiles/targets/Darwin/iphone.mk:41:
Deploying to iOS 3.0 while building for 6.0 will generate armv7-only binaries.
Making all for application fooProject...
Copying resource directories into the application wrapper...
make[2]: Nothing to be done for `internal-application-compile'.
Making stage for application fooProject...
dpkg-deb: Baue Paket »com.alex.fooproject« in »./com.alex.fooproject_0.0.1-12_iphoneos-  arm.deb«.
make install requires that you set THEOS_DEVICE_IP in your environment. It is also      recommended that you have public-key authentication set up for root over SSH, or you'll be entering your password a lot.
make: *** [internal-install] Error 1 
```

好的，变量 THEOS_DEVICE_IP 已设置。我用这个命令做到了：

```
export THEOS_DEVICE_IP=192.168.178.39 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-15T07:47:34.890

你应该把

```
THEOS_DEVICE_IP = 192.168.2.4 
```

在 Make 文件的**第一**行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-10T21:12:10.263

将 THEOS_DEVICE_IP = 192.0.0.0 放在 makefile 的第一行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-27T09:20:52.807

在`make`命令之前使用此命令

```
export SDKVERSION=6.0 
```

其中 6.0 是您的 ios sdk 版本

# javascript - 从 ASP.NET 中的按钮播放声音

> ID：15282397
> 
> 赞同：2
> 
> 时间：2013-03-07T21:46:11.257
> 
> 标签：javascript, asp.net

我知道这是一个在网络上涉及很多的话题，但我现在真的很沮丧。

我正在使用 ASP 3.5，当用户单击我网站上的按钮时，我想播放音频 .wav 文件。应该很简单吧？

这是我的代码：

这个 JavaScript 函数被放置在一个 asp:Content 块中。我已经验证它是正确的，其他js函数都可以工作。

```
function playSound() {
            document.getElementById("soundDummy").innerHTML = "<embed src='file.wav' autostart=true loop=false volume=100 hidden=true>";
            return true;
        } 
```

soundDummy 是一个没有任何内容的随机 div。

但是，按钮是在我后面的代码中生成的。

```
audioScript = "<input type=\"image\" src=\"images/Audio_Icon_Small.jpg\" onclick=\"playSound('" + person.audioName + ".wav')\" style=\"border-width:0px;\" />"; 
```

我这样做是因为它是一个有很多不同人“个人资料”的网站，可以这么说，我希望一个人能够点击一个按钮并听到一个与他们相关的 .wav 文件。

当我单击按钮时，页面只是刷新，没有播放。有什么建议么？

编辑：抱歉，我在按钮内传递参数存在一些差异，并且我的 playSound() 没有采用方法。我在玩 playSound() 方法并对其进行了更改，因此它现在不需要参数，但想象一下它确实如此。

Edit2：再次道歉，但使用 Response.Write(audioScript) 将音频脚本写入页面

Edit3：好的，想通了！我认为这是由于我自己的愚蠢，对所有试图帮助我的人感到抱歉（尤其是乔希：/）

所以问题是我的 Response.Write(audioScript) 使我的按钮不在我的 soundDummy div 中。出于某种原因，我认为我可以将我的按钮生成放在一个不同的 div 中，而不是我从我的 javascript 函数中嵌入 html 的那个。所以现在它看起来有点像这样：

```
<div style="text-align: center">
   <p>
      <div id="soundDummy">
         <% Response.Write(audioScript); %>
      </div> 
```

相对于：

```
<div id="soundDummy"></div>
<div style="text-align: center">
   <p>
       <% Response.Write(audioScript); %> 
```

如果有人能告诉我为什么第一个有效，而第二个无效，那就太好了！但就目前而言，我很高兴它终于发出了声音:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:48:50.827

当您单击该元素时，浏览器会认为您正在尝试提交表单。

您需要防止事件冒泡。这可以通过返回 false 或使用[preventDefault](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)来完成。

防止事件传播并非在所有浏览器中都一致地实现，所以我建议使用 jQuery，但这里有一个快速的小提琴可以证明这一点：

[http://jsfiddle.net/jwcarroll/S2vhX/](http://jsfiddle.net/jwcarroll/S2vhX/)

```
<form>Will Submit
    <input id="will" type='image' src='' />Won't Submit
    <input id="wont" type='image' src='' />
</form>

(function () {

    function stopDefAction(evt) {
        evt.preventDefault();
    }

    document.getElementById('wont').addEventListener(
        'click', stopDefAction, false);

}()); 
```

这是一个使用 jQuery 播放声音的工作示例（无需提交表单）：

[http://jsfiddle.net/jwcarroll/CtFRY/](http://jsfiddle.net/jwcarroll/CtFRY/)

```
<form>
    Sword Slash
    <input class="playsound" type='image' src=''  
           data-audio-url='http://noproblo.dayjo.org/ZeldaSounds/LOZ/LOZ_Sword.wav' />
    Shield
    <input class="playsound" type='image' src='' 
           data-audio-url='http://noproblo.dayjo.org/ZeldaSounds/LOZ/LOZ_Shield.wav' />
    <audio id="playTarget" src="" autoplay style="display:none">
</form>

(function () {

    $(".playsound").on("click", function (e) {
        var url = $(this).data("audio-url");

        $("#playTarget").attr("src", url);

        e.preventDefault();
    });

}()); 
```

# wordnet - 查询扩展，扩展哪个词？

> ID：15282400
> 
> 赞同：0
> 
> 时间：2013-03-07T21:46:30.813
> 
> 标签：wordnet, sql-execution-plan

假设我们有一个带有以下术语的查询：

```
A and B and C and D 
```

现在假设查询过于严格，我们想扩展查询，但是已经有办法找到要扩展的词条。当然，扩展限制搜索空间的术语是有意义的。

我的问题是已经有一个现有的程序来找出在查询扩展期间要使用哪个术语

# vba - 测试字段是否为空 ms 访问

> ID：15282405
> 
> 赞同：3
> 
> 时间：2013-03-07T21:46:57.340
> 
> 标签：vba, ms-access

我试图在 MS Access 中创建一个 SQL 语句，它将在表中查找空白字段。比如说，一个病人的姓氏丢失了——这个查询应该把它捡起来。

我该怎么做呢？我能够确定如何为第一条记录执行此操作，但对于整个表来说，这被证明是困难的

```
Dim Rst As recordSet
Dim f As Field

'Current Record set
Set Rst = CurrentDb.OpenRecordset("tblWebMeetingData")

'Holds current fields data
Dim fieldData

'With Rst
    'Do Until Rst.EOF
       For Each f In Rst.Fields
            If IsNull(f.Value) Then
                MsgBox ("Field Name: " & f.Name)
            End If
       Next
    'Loop
'End With

Rst.Close 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:06:49.197

更优雅：

```
Dim i As String
i = "tblWebMeetingData"
Dim j As Integer
Dim rst As Recordset

' For each Field in the table
For j = 0 To CurrentDb.TableDefs(i).Fields.Count - 1
    ' Return the number of lines that are null
    Set rst = CurrentDb.OpenRecordset("SELECT count(*) FROM " & CurrentDb.TableDefs(i).Name & " WHERE " & CurrentDb.TableDefs(i).Fields(j).Name & " IS NULL")
    rst.MoveFirst
    ' Check if it's more than one
    If rst.Fields(0).Value > 0 Then
        MsgBox CurrentDb.TableDefs(i).Fields(j).Name
    End If
Next 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T22:09:11.907

`MoveNext`在我看来，如果您之前使用过，您的代码会做您想做的事`Loop`。我在这个版本中做了一些其他的小改动。

```
Dim Rst As DAO.recordSet
Dim f As DAO.Field
Dim db As DAO.Database

'Current Record set
Set db = CurrentDb
Set Rst = db.OpenRecordset("tblWebMeetingData", dbOpenTable, dbOpenSnapshot)

With Rst
    Do While Not .EOF
       For Each f In .Fields
            If IsNull(f.Value) Then
                MsgBox "Field Name: " & f.Name
            End If
       Next
       .MoveNext
    Loop
End With

Rst.Close 
```

但是，在您所说的问题中，您想要*“在 MS Access 中创建一个 SQL 语句，它将在表中查找空白字段*”。但是，您向我们展示了检查`DAO.Recordset`. 我不确定你真正想要什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-08T14:20:57.367

为什么不只是：

```
Public Sub CheckNull(FieldName as String)
    Dim rs as DAO.RecordSet

    Set rs = CurrentDB.OpenRecordset("SELECT IDField FROM tblMyTable WHERE " & FieldName & " Is Null")

    If rs.eof then exit sub

    Do until rs.Eof
        debug.print rs!IDField
        rs.movenext
    Loop
End Sub 
```

*这应该在代码中查找FieldName*为 Null 的所有记录，然后将结果打印到您将 FieldName 作为字符串传递的即时窗口。

# c++ - 将 BITMAP 转换为 HBITMAP

> ID：15282409
> 
> 赞同：4
> 
> 时间：2013-03-07T21:47:19.003
> 
> 标签：c++, windows, winapi

如果我有一个`BITMAP`named `bitmap`，如何将其转换为 HBITMAP？

到目前为止，我已经尝试过：

```
HBITMAP hbm = (HBITMAP)&bitmap; //doesn't work

HANDLE hand = &bitmap;
HBITMAP hbm = hand; //doesn't work

CImage cim;
cim.Attach(&bitmap);
HBITMAP hbm = cim.Detach(); //definitely doesn't work

CBitmap cbm;
cbm.Attach(bitmap);
CImage cim;
cim.Attach(cbm.Detach());
HBITMAP hbm = cbm.Detach(); //desperate I know, horribly failed 
```

必须有一些简单的，一条线的方法来做到这一点，但我就是找不到。我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T21:50:37.587

调用[`CreateBitmapIndirect`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183486.aspx)传递你的`BITMAP`. 嘿 presto，一个`HBITMAP`返回。

对于它的价值，自己寻找答案的一个好方法是转到 MSDN 主题描述[`BITMAP`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183371.aspx). 向下滚动到页面底部并查看“*另请参阅*”部分。使用该类型的最重要的函数将在此处列出，并且确实`CreateBitmapIndirect`存在。这始终是找出任何特定 Win32 类型可以做什么的有用方法。

# android - Android 上的 HDF5 支持

> ID：15282410
> 
> 赞同：6
> 
> 时间：2013-03-07T21:47:27.793
> 
> 标签：android, hdf5

如何在 Android 上使用[HDF5 软件？](http://www.hdfgroup.org/HDF5/)可以为 Android 平台编译原生 C++ 库，然后使用 HDF5 Java 绑定调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-02T10:57:36.500

## 您不能（轻松）使用 Android 的交叉编译器进行编译

如果你想让它工作，你需要在 ARM 设备上编译，特别是 Android 工具链。老实说，不要在 NDK 项目中使用 HDF5，因为即使您设法生成了二进制文件，它也不受支持。

我继续尝试使用 NDK-CMake-gradle 对其进行编译，但它无法确定各种类型的大小。我以前见过这种行为，它通常需要将可执行文件上传到模拟器或设备，运行它并读回结果。不酷。

根据他们自己的[FAQ](https://support.hdfgroup.org/HDF5/faq/compile.html)：

> 不，HDF5 中的交叉编译存在两个问题。
> 
> 首先，HDF5 在几个地方使用了 AC_TRY_RUN。这个宏试图编译和运行一个测试程序，但这不适用于交叉编译，因为它为主机系统构建程序，并试图在构建系统上运行它。为了解决这个问题，需要将宏替换为非动态测试（即，在不执行测试程序的情况下确定正确的设置），或者用一个参数修改每个 AC_TRY_RUN，告诉它在交叉编译时要做什么（这将可能意味着为交叉编译设置一个悲观的默认值）。
> 
> 其中许多 AC_TRY_RUN 实例用于检查编译器功能。例如，HDF5 通过运行测试程序来检查 Fortran 编译器是否支持内部函数“SIZEOF”。根据结果​​，makefile 条件设置为在构建 H5test_kind 时切换要使用的源文件（在本例中为 H5test_kind_SIZEOF.f90 或 H5test_kind.f90）。还有许多 C++ 编译器检查。其他 AC_TRY_RUN 检查包括：检查是否支持大文件，检查 SZIP 压缩是否可以编码，检查 gettimeofday 是否使用时区结构，以及检查转换能力的更多内容。
> 
> 第二个（破坏性的？）问题是 H5Tinit.c 的生成，在较小程度上，H5libsettings.c 实际上是在“make”中生成的，而不是通过配置生成的。生成它们的程序是编译为在目标平台上运行的 C 程序，但是它们随后在构建平台上的“make”期间运行，因此会失败（或者在某些情况下，只会产生不正确的结果）。HDF5 需要在配置期间生成这些源文件，而无需在构建系统上执行与机器相关的程序。（换句话说，对于 H5Tinit.c，HDF5 需要做 H5detect 所做的事情，但是使用可以在构建平台上配置期间运行的脚本语言。由于 h5detect 应该检测目标上的机器字节顺序和浮点格式平台，

## 解决此问题的旧方法

我已经发布了相当长的说明，介绍如何解决问题，将其编译为名为[Android HDF5 Compilation How-to](https://gist.github.com/palmerc/e723d63c0e07ed6a862205e92d3157db)的要点。

我已经针对 v1.8.18 测试了这个公式，它仍然有效。这是我编写的[脚本](https://gist.github.com/palmerc/9dcbf7513cd760f2784f4fc160180a3f)，作为驱动 .和. 的编译`armeabi`的起点。`armeabi-v7a``x86`

但是在测试中，一些库函数似乎存在导致崩溃的问题，所以正如我最初所说，如果你不能让编译干净地工作，你可能应该避免使用 HDF5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-23T20:05:05.013

嗯，好久不见，没人回答。目前，我正在做一个在 Android 上支持 hdf5 格式的项目。原来我遇到了一个问题。

> 兼容性：当前的 hdf5 库是用本机代码编写的。仅当您使用 android 工具链进行交叉编译时才有效。注意：JHDF5 是一个很好的 hdf5 Java 库。但是兼容问题仍然存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T20:13:11.987

另一个解决方案可能是[jHDF](http://jhdf.io)，它是一个纯 Java HDF5 库，因此不存在 c/c++ 编译问题。只需将依赖项添加到您的 Android 项目中，它应该可以工作。

该库处于早期阶段，因此如果您有问题，请打开一个问题。

免责声明：我是 jHDF 的作者，所以可能有偏见。

# ruby-on-rails - Rspec 规范更新操作失败

> ID：15282415
> 
> 赞同：1
> 
> 时间：2013-03-07T21:47:54.163
> 
> 标签：ruby-on-rails, rspec

我有以下请求规范

```
it "updates an open time" do
  # Create an OpenTime
  open_time = OpenTime.create(:start_time => (Time.now + 2.hours), :end_time => (Time.now + 10.hours))
  # Build an open_time update param
  params = {:open_time => {:start_time => (Time.now + 5.hours)}}
  # Send param to open_times#update
  put open_time_path(open_time.id) , params
  # Check to see if OpenTime was updated
  open_time.should_receive(:update_attributes).with({:start_time => (Time.now + 5.hours)})
end 
```

这是我的 open_times 控制器

```
def update
  @open_time = OpenTime.find(params[:id])
  if @open_time.update_attributes(params[:open_time])
    flash[:success] = "Time updated."
    redirect_to @open_time
  else
    render 'edit'
  end
end 
```

测试失败，预期：1 收到：0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:08:48.397

接收的不是那个对象`update_attributes`，而是由返回的一个新对象`OpenTime.find`，因此，您应该确保 find 返回您的对象：

```
OpenTime.stub(:find).and_return(open_time)
open_time.should_receive(:update_attributes).with({:start_time => (Time.now + 5.hours)}) 
```

进而：

```
put open_time_path(open_time.id) , params 
```

另外，我会`target_time = Time.now + 5.hours`在测试开始时添加，然后在参数和匹配器中使用该时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T23:09:21.293

正如[kr1 所](https://stackoverflow.com/users/305475/kr1)注意到的，当从控制器调用它时，您必须对 OpenTime.find 方法进行存根以返回您的 OpenTime 实例。将您的测试代码更改为：

```
it "updates an open time" do
  target_time = (Time.now + 5.hours)
  # Create an OpenTime
  open_time = OpenTime.create(:start_time => (Time.now + 2.hours), :end_time => (Time.now + 10.hours))

  # Build an open_time update param
  params = {:open_time => {:start_time => target_time}}

  # Stub OpenTime to return your instance
  OpenTime.stub(:find).and_return(open_time)

  # Set expectation on open_time to receive :update_attributes
  open_time.should_receive(:update_attributes).with({:start_time => target_time})

  # Send param to open_times#update
  put open_time_path(open_time.id) , params
end 
```

这里发生的事情是您构建了 OpenTime(open_time) 的实例，并且通过对 OpenTime 类进行存根，您是在说“如果有人在 OpenTime 类上调用 find，则不要运行 find，而只是返回 open_time（您刚刚创建的实例）”。然后你在你的实例上设置期望接收:update_attributes。当您调用**put open_time_path(open_time.id) 时，**您的控制器创建操作的参数将处理请求，并且 OpenTime.find(...) 将返回您的实例（open_time）并调用 :update_attribute 。

希望它有意义。

# java - OSGI web bundle 的奇怪问题，现在完全消失了

> ID：15282418
> 
> 赞同：1
> 
> 时间：2013-03-07T21:48:07.200
> 
> 标签：java, web, osgi

我最近一直在学习OSGI，在使用STS 3.1 + virgo tomcat server 3.6 构建web bundle时遇到了这个问题，任务很简单，只需要部署我的bundle并显示一个jsp页面，有一些那里有很好的教程，但他们基本上都使用spring来做到这一点，我在为OSGI配置spring MVC时遇到了一些困难，我尝试访问的jsp文件一直给我404错误，所以我决定从头开始重建并希望找到实验失败的原因，首先应该是显示一个没有spring的jsp页面，但是如果我只是导入一些javaweb相关的包，设置Web-ContextPath，在web-info文件夹下放一个jsp文件，404错误是还在那里，我不知道还能做什么，有人能告诉我可能是什么原因造成的吗？应该

我已将此脚本附加到我的 web.xml 中，就像其中一个示例所示（有人可以告诉我它有什么作用吗？）

```
 <context-param>
    <param-name>contextClass</param-name>
    <param-value>org.eclipse.virgo.web.dm.
    ServerOsgiBundleXmlWebApplicationContext
    </param-value>
    </context-param> 
```

我的 manifest.MF 看起来像这样：

```
Manifest-Version: 1.0
Bundle-ClassPath: WEB-INF/classes
Web-ContextPath: /osgitest
Import-Package: 
javax.servlet;version="[3.0.0,3.0.0]",
javax.servlet.http;version="[3.0.0,3.0.0]",
javax.servlet.jsp;version="[2.2.0,2.2.0]",
javax.servlet.jsp.el;version="[2.2.0,2.2.0]",
javax.servlet.jsp.jstl.core;version="[1.2.0.v20110728,1.2.0.v20110728]",
org.eclipse.virgo.web.dm;version="[3.6.0.RELEASE,3.6.0.RELEASE]",
org.slf4j;version="[1.7.2,1.7.2]"
Bundle-SymbolicName: c2c.osgitest.web
Bundle-Version: 1.0.0 
```

我正在使用

```
http://localhost:8080/osgitest/login.jsp 
```

任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-11T01:54:59.003

> 所以我决定从头开始重建，希望能找到实验失败的原因。首先要做的应该是显示一个没有 Spring 的 JSP 页面。

如果 Spring 只是一个选项（并且可以接受其他解决方案），我建议使用 Eclipse IDE、[WebSphere Developer Tools](https://www.ibm.com/developerworks/mydeveloperworks/blogs/wasdev/entry/download_wdt?lang=en)和[WebSphere Liberty Profile](http://wasdev.net)。

在 Eclipse IDE 中，`OSGi Bundle Project`使用`Web 3.0`支持创建，然后添加 JSP 页面。当你运行它时，它应该可以工作。您可能希望将捆绑包的配置（主要是 META-INF/MANIFEST.MF）与您的配置进行比较（然后决定也许利用 Spring）。

# c - 我的内核模块使用了多少内存？

> ID：15282419
> 
> 赞同：10
> 
> 时间：2013-03-07T21:48:13.593
> 
> 标签：c, linux, memory, kernel

lsmod ， /proc/modules 和slabinfo ， /proc/meminfo 没有给出我的内核模块正在使用多少内存

有没有办法找到这个？

顺便说一句，我基本上写了一个小测试程序，一个设备驱动程序需要 ioctl 调用来分配 1MB，我每秒从我的应用程序发送这个 ioctl 消息，所以我的驱动器每秒执行 kmalloc。我看不到“cat /proc/meminfo | grep Slab”的增加

-- 剪断 ---

```
int device_ioctl(
         struct file *file,
         unsigned int ioctl_num, 
         unsigned long ioctl_param)
{
    /* 
     * Switch according to the ioctl called 
     */
    printk ( "<l> inside ioctl %d IOCTL_ALLOC_MSG = %d\n", ioctl_num,IOCTL_ALLOC_MSG );
    switch (ioctl_num) {
    case IOCTL_ALLOC_MSG:
        allocfunc(); // kmalloc 1MB // printk in this function is OK
        break;
    case IOCTL_DEALLOC_MSG:
        deallocfunc();
        break;
    }

    return 0;
} 
```

* * *

应用程序/用户空间

```
 while ( !stop )
        {
            ret_val = ioctl(memfile, IOCTL_ALLOC_MSG);

            if (ret_val < 0) {
                printf("ioctl failed. Return code: %d, meaning: %s\n", ret_val, strerror(errno));
                return -1;
            }
            sleep ( 10 );

        } 
```

我没有看到slabinfo中内存的增长。我知道 linux 确实 cache->slabs->pages->objects 但在用户空间中必须有某种方法来确定特定内核模块的内存大小。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-10T21:53:20.533

我不确定它是否适合您，但您可以获得模块占用的内存量，`cat /proc/modules`第二列是第一列中的模块正在使用的字节大小。

示例输出显示了 drm 模块使用了多少内存：

```
cat /proc/modules |grep ^drm|awk '{print $1 " " $2}' 
```

示例答案：

```
drm_kms_helper 49394
drm 286028 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:13:45.507

假设没有办法直接做到这一点（据我所知，可能有）......

您可以使用[LTTng](http://lttng.org)来跟踪您的内核事件。如果那里没有方便的事件，即使每次模块分配内存时，您也应该创建一个新的跟踪。

然后，您可以分析跟踪并绘制内存使用随时间增长和缩减的图表。

# java - 将数组复制到列表

> ID：15282421
> 
> 赞同：3
> 
> 时间：2013-03-07T21:48:26.627
> 
> 标签：java

我想知道是否有一种将数组复制到列表的单行方式，而不是以下方式：

```
String array[] = new String[]{"1", "2", "3", "4" } ;

List list = new ArrayList();

for (int i=0; i< array.length; i++){
    list.add(array[i] );
} 
```

编辑：感谢两个信息丰富的答案，非常有帮助:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T21:49:19.710

是的，有一个衬里，使用[**Arrays.asList(T...a)**](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html)将数组转换为列表，并将其作为参数传递给采用 Collection 的 ArrayList 重载构造函数。

```
List<String> list = new ArrayList<String>(Arrays.asList(array)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T21:51:13.327

如果您需要列表格式的数组，但实际上不需要在结构上修改数组，您可以这样做`List<String> list = Arrays.asList(array);`：
否则，@PremGenError 的答案就是答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T22:21:36.077

最简单的方法是：

```
List<String> fixedList = Arrays.asList(array); 
```

但是，这将返回由指定数组支持的固定大小的列表。这意味着尝试修改列表（例如`list.add("10")`）将导致在`java.lang.UnsupportedOperationException`**运行时出现**- 所以要小心。

可以根据固定大小的列表构造一个可修改的列表：

```
List<String> modifiableList = new ArrayList<String>(fixedList); 
```

这两个步骤都可以合并为一行代码，如下所示：

```
List<String> list = new ArrayList<String>(Arrays.asList(array)); 
```

# python - Python CGIHTTPServer 中的文件上传错误

> ID：15282424
> 
> 赞同：1
> 
> 时间：2013-03-07T21:48:33.320
> 
> 标签：python, file-upload, cgi

我正在开发一个数据服务器的 Web 界面，允许我办公室的用户上传文件进行存储。现在，我正在使用**Python 2.7**在我的**32 位 Windows XP**桌面上运行[CGIHTTPServer](http://docs.python.org/2/library/cgihttpserver.html) ，并对各种文件（通常是图像和视频文件）执行一些测试。

 ****对于大多数文件，一切似乎都运行良好。但是，当我上传大约**4MB**或更大的文件时，请求失败，服务器抛出`IOError: [Errno 22] Invalid argument`错误。

这是完整的回溯，以防万一，但我怀疑不是：

```
Traceback (most recent call last):
File "C:\Python27\lib\SocketServer.py", line 284, in _handle_request_noblock
self.process_request(request, client_address)
File "C:\Python27\lib\SocketServer.py", line 310, in process_request
  self.finish_request(request, client_address)    
File "C:\Python27\lib\SocketServer.py", line 323, in finish_request
  self.RequestHandlerClass(request, client_address, self)
File "C:\Python27\lib\SocketServer.py", line 639, in __init__
  self.handle()
File "C:\Python27\lib\BaseHTTPServer.py", line 337, in handle
  self.handle_one_request()
File "C:\Python27\lib\BaseHTTPServer.py", line 325, in handle_one_request
  method()
File "C:\Python27\lib\CGIHTTPServer.py", line 61, in do_POST
  self.run_cgi()
File "C:\Python27\lib\CGIHTTPServer.py", line 287, in run_cgi
  stdout, stderr = p.communicate(data)
File "C:\Python27\lib\subprocess.py", line 740, in communicate
  return self._communicate(input)
File "C:\Python27\lib\subprocess.py", line 960, in _communicate
  self.stdin.write(input)
IOError: [Errno 22] Invalid argument 
```

起初我怀疑是代码错误，但在调用我的任何代码之前服务器崩溃了，所以我对在哪里寻找解决方案感到困惑。

服务器的这种基本实现是否有可能无法处理更大的文件？我在网上查了一下，没有发现有这种情况的迹象。如果是这种情况，我也会期待不同的错误消息。****

# playframework-2.0 - 播放框架：使用假应用程序进行测试

> ID：15282427
> 
> 赞同：1
> 
> 时间：2013-03-07T21:48:40.537
> 
> 标签：playframework-2.0, playframework-2.1

我正在尝试测试这样的功能：

```
@Test
    public void testAddTask() {
        FakeApplication fakeApplication = fakeApplication(inMemoryDatabase());
        start(fakeApplication);
        Task task=new Task();
        task.title="test Task";
        task.save();
        assertThat(Task.find.where().ilike("title", "task")).isNull();
        stop(fakeApplication);

    } 
```

哪个成功哪个是错误的

```
@Test
    public void testAddTask(){
        running(fakeApplication(inMemoryDatabase()), new Runnable() {
            public void run() {
                Task task=new Task();
                task.title="test Task";
                task.save();
                assertThat(Task.find.where().ilike("title", "task")).isNull();
            }
        });
    } 
```

失败了，这就是我所期望的。

不应该`startfakeapplication`与`running(fakeApplication()?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T18:44:50.663

是[的，它也一样](https://github.com/playframework/Play20/blob/2.1.0/framework/src/play-test/src/main/java/play/test/Helpers.java#L364)

```
/**
 * Executes a block of code in a running application.
 */
public static synchronized void running(FakeApplication fakeApplication, final Runnable block) {
    try {
        start(fakeApplication);
        block.run();
    } finally {
        stop(fakeApplication);
    }
} 
```

差异的原因可能是在运行其他一些测试后没有清理。`running()`有`try..finally`构造，建议放入`stop(fakeApplication);`带有注释的方法`@After`（以及`fakeApplication`in 的初始化`@Before`）。

我不喜欢`running()`辅助方法，因为它不允许在`run()`.

# jetty - 为什么我的码头部署战争正在寻找 org.apache.juli.logging.LogFactory？

> ID：15282429
> 
> 赞同：4
> 
> 时间：2013-03-07T21:48:50.437
> 
> 标签：jetty, embedded-jetty

我正在尝试从嵌入式码头服务器内部部署战争文件。我的 WAR 的 WEB-INF/lib 中有 commons-logging jar。JspServlet 的 init 方法正在寻找这个 org.apache.juli.logging.LogFactory 类。我正在使用码头 7.5。

在研究如何使用嵌入式 Jetty 部署战争时，我还看到了让 jsps 工作的问题。这是否与此有关，因为它是 JspServlet 正在寻找这个类？

WAR 非常简单，基本上就是 Spring MVC 3 的 HelloWorld 示例。此时我只是在做原型。Jetty 服务器也很简单，这里是：

```
public class JettyServer extends Server {

    Server server;
    int port;

    public JettyServer(int port) {
        server = new Server(port);

        WebAppContext webapp = new WebAppContext();
        webapp.setContextPath("/");
        webapp.setWar("webapps/myWar.war");
        server.setHandler(webapp);
    }

    public void startServer() throws Exception {
        server.start();
        server.join();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T14:02:56.253

您的构建中有一个旧的 JspServlet（您粘贴的错误来自 Tomcat 6 的 JspServlet！）

确保使用与使用相同的服务器端 JSP 支持 jar `jetty-distribution--7.5.0.v2011090`。

这是 Jetty 附带的清单。

```
[jetty-distribution-7.5.0.v20110901]$ sha1sum lib/jsp/*.jar
84d1928dbcf564dab574577ac454ef7cacec2b9a  lib/jsp/com.sun.el_1.0.0.v201004190952.jar
5618cc694d1e1ce8956fa441b551c8b690547fab  lib/jsp/ecj-3.6.jar
b4628cebfe2612db3c646ffbde43029fd3d0d7a0  lib/jsp/javax.el_2.1.0.v201004190952.jar
2c891df2ef4882fd250d34d7a873061bf4c3d9bc  lib/jsp/javax.servlet.jsp_2.1.0.v201004190952.jar
582f581db2e9646d1f61313f3d96ced8c0acdac5  lib/jsp/javax.servlet.jsp.jstl_1.2.0.v201004190952.jar
3bd086e9e7bdcff906ad25fed4e5805ad101fc5e  lib/jsp/jetty-jsp-2.1-7.5.0.v20110901.jar
3ec4b7e53369ed311a3171fe6b73beb773a46e25  lib/jsp/jsp-impl-2.1.3-b10.jar
b070c22fe31d84de75135da39faff654fe42c933  lib/jsp/org.apache.taglibs.standard.glassfish_1.2.0.v201004190952.jar 
```

Jetty 使用来自 Apache 的 Jasper 编译器，并由 Glassfish 进行了修改。

# php - 如何在 php 5.2 中记录错误？

> ID：15282431
> 
> 赞同：0
> 
> 时间：2013-03-07T21:48:52.993
> 
> 标签：php, http, iis, logging, error-logging

这告诉我一些日志文件在 windows\temp 中的位置：

```
<?php
phpinfo();
?> 
```

![在此处输入图像描述](../Images/50308feb717f59c58f49eccac7b8f7cf.png)

但是，当我打开该文件时，我得到：

```
[06-Feb-2013 11:01:34] PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\Program Files (x86)\PHP\ext\php_mssql.dll' - The specified module could not be found.
 in Unknown on line 0
[06-Feb-2013 11:04:37] PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\Program Files (x86)\PHP\ext\php_mssql.dll' - The specified module could not be found.
 in Unknown on line 0
[06-Feb-2013 11:04:37] PHP Warning:  PHP Startup: Unable to load dynamic library 'C:\Program Files (x86)\PHP\ext\php_mssql.dll' - The specified module could not be found.
 in Unknown on line 0 
```

这是文件的全部内容，。请注意，我们已经使用这个网站几个月了，有几十个用户。

我无法找到日志文件，。

我们正在运行 IIS 8，我也一直在尝试使用它来查找 http 错误，但不能。

php和iis的错误日志在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:07:47.790

如果 in `php.ini`contains`error_log=On`那么它将存储一个日志文件。

您需要添加一个用于加载的模块，此错误显示是因为 in`php.ini`是活动模块，但如果您不使用，则应禁用或注释。

Windows 存储在系统默认日志文件中，因此查找`php.ini`文件并搜索`error_log`.

或者查找存储在系统环境中的方式可能存在，按日期查找：

![在此处输入图像描述](../Images/978bcaf7f361556be84fb2eb635436de.png)

或在搜索`C:\inetpub\temp\php-errors.log`中搜索或键入 php*.log。

里面也可以默认存储`Log file directory: C:\Windows\System32\LogFiles`。

你能检查一下并开始开发吗？

![在此处输入图像描述](../Images/93a00a421e096b1714fbb29e2289ebba.png)

如您所见，查看 error.log 文件。

有关设置 IIS7 及更高版本的信息，请参阅官方 PHP.NET 文档：[http](http://php.net/manual/en/install.windows.iis7.php) ://php.net/manual/en/install.windows.iis7.php确保所有参数都已完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T21:51:31.940

检查您的 php.ini 文件并确保**log_errors = On**，还确保**error_log = syslog**（syslog 是 Windows 上的事件查看器），打开事件查看器并查找错误。

# powershell - PowerShell：命令模式下的字符串扩展

> ID：15282433
> 
> 赞同：2
> 
> 时间：2013-03-07T21:49:07.323
> 
> 标签：powershell

命令模式下字符串扩展的规则是什么？如果在 cmd.exe 上，我会这样写：

```
c:\asdoc.exe -doc-sources+=src 
```

我需要将其转换为计算实际源路径（“src”）的字符串，因此在该行上方的某个`$sourcePath = "src"`位置执行。现在我需要将该 cmd.exe 命令转换为 PowerShell 命令。我尝试了以下方法，但它不起作用：

```
& c:\asdoc.exe -doc-sources+=$sourcePath    # does NOT work
& c:\asdoc.exe -doc-sources+="$sourcePath"  # does NOT work
& c:\asdoc.exe -doc-sources+=($sourcePath)  # does NOT work 
```

我使用了[EchoArgs](http://weblogs.asp.net/soever/archive/2010/01/26/debugging-executing-program-from-powershell-using-echoargs-exe.aspx)实用程序，它给了我以下结果：

```
Arg 0 is <-doc-sources+=$sourcePath> # case 1

Arg 0 is <-doc-sources+=$sourcePath> # case 2

Arg 0 is <-doc-sources+=>            # case 3
Arg 1 is <src path> 
```

在此示例中，如何使字符串“正确”扩展？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:53:53.557

如果我正确理解您，您希望将所有内容都扩展并作为一个参数。尝试用引号“收集”参数。

```
PS > $sourcepath = "src"

PS > & EchoArgs.exe "-doc-sources+=$($sourcePath)"
Arg 0 is <-doc-sources+=src> 
```

所以试试这个：

```
& c:\asdoc.exe "-doc-sources+=$($sourcePath)" 
```

下面的示例也可以在您想要扩展变量而不是变量内的属性时使用（例如 `$myobject.sourcepath`）

```
& c:\asdoc.exe "-doc-sources+=$sourcePath" 
```

# video - AVFoundation & Video Effects

> ID：15282434
> 
> 赞同：3
> 
> 时间：2013-03-07T21:49:12.947
> 
> 标签：video, avfoundation, cifilter

我正在尝试自己进行一些视频编辑，我得到了排序和混合视频/音频，所有这些都正常工作，甚至是一些基本的慢动作！:) 现在我想将视频过滤器集成到图层本身（否则我将使用 AVPlayerItemVideoOutput 与 CIFilter 一起使用），还要集成到最终导出的视频文件中。因此，我目前正在研究将上面提到的 CIFilter“渲染”到最终视频中，同时仍然使用 CMTime 保持非常精确的时序控制。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-27T17:04:36.577

您可以使用[AVVideoCompositing](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVVideoCompositing_Protocol/Reference/Reference.html)和[AVAsynchronousVideoCompositionRequest](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVAsynchronousVideoCompositionRequest_Class/Reference/Reference.html#//apple_ref/occ/instm/AVAsynchronousVideoCompositionRequest/sourceFrameByTrackID:)协议来实现自定义合成器。

```
CVPixelBufferRef pixelBuffer = [AVAsynchronousVideoCompositionRequest sourceFrameByTrackID:trackID];
CIImage *theImage = [CIImage imageWithCVPixelBuffer:pixelBuffer];
CIImage *motionBlurredImage = [[CIFilter *filterWithName:@"CIMotionBlur" keysAndValues:@"inputImage", theImage, nil] valueForKey:kCIOutputImageKey];
CIContext *someCIContext = [CIContext contextWithEAGLContext:eaglContext];
[someCIContext render:motionBlurredImage toCVPixelBuffer:outputBuffer]; 
```

[然后按照Apple 文档中的](https://developer.apple.com/library/ios/documentation/3ddrawing/conceptual/opengles_programmingguide/WorkingwithEAGLContexts/WorkingwithEAGLContexts.html)描述使用 OpenGL 渲染像素缓冲区。这将允许您实现任意数量的转换或您想要的过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-04T21:01:34.440

2015 年的 WWDC 演讲解释了如何做到这一点。

从 20:32 开始观看[https://developer.apple.com/videos/play/wwdc2015/510/](https://developer.apple.com/videos/play/wwdc2015/510/)

*出口：*

步骤 01：

```
let vidComp = AVVideoComposition(asset: avAsset,
    applyingCIFiltersWithHandler: {
    request in
        filtered = request.sourceImage.imageByClampingToExtent();
        filtered = filtered.imageByApplyingFilter("CIGaussianBlur",
            withInputParameters: [kCIInputRadiusKey: 100])
        filtered = filtered.imageByCroppingToRect(request.sourceImage.extent)
        request.finishWithImage(filtered, context: cicontext)
 }) 
```

步骤02：

```
let export = AVAssetExportSession(asset: avAsset,
    presetName: AVAssetExportPreset1920x1080)
export.outputFileType = AVFileTypeQuickTimeMovie
export.outputURL = outURL
export.videoComposition = vidComp
NSFileManager.defaultManager().removeItemAtURL(outURL)
export.exportAsynchronouslyWithCompletionHandler() 
```

*回放：*

步骤 01：

```
let vidComp = AVVideoComposition(asset: avAsset,
    applyingCIFiltersWithHandler: {
 // same as earlier example
 }) 
```

步骤02：

```
let playerItem = AVPlayerItem(asset: avAsset)
playerItem.videoComposition = vidComp
let player = AVPlayer(playerItem: playerItem)
player.play() 
```

乔纳森的回答也是正确的。但是，Apple 现在已经停止使用 OpenGL。下面是在 Swift 中使用 Metal 的相同代码，

```
let theImage = CIImage.init(cvImageBuffer: foregroundPixelBuffer)

let blurFilter = CIFilter.init(name: "CIMotionBlur")
blurFilter?.setValue(theImage, forKey: "inputImage")

if let destinationImage = blurFilter?.outputImage {
    context?.render(destinationImage, to: outputBuffer)
} 
```

上下文应声明如下，

```
context = CIContext.init(mtlDevice: device) 
```

和设备如下，

```
// Ask for the default Metal device; this represents our GPU.
guard let defaultMetalDevice = MTLCreateSystemDefaultDevice() else {
    print("Metal is not supported on this device.")
    return nil
}
device = defaultMetalDevice 
```

上下文和设备实例应该声明一次并重新使用以从它们的缓存能力中受益。

# java - Android SDK 帮助 (java)

> ID：15282436
> 
> 赞同：-4
> 
> 时间：2013-03-07T21:49:18.350
> 
> 标签：java, android, random, numbers

所以我真的不太擅长编程，但我正在阅读并试图改变这一点，目前我需要一些帮助。我有一个简单的应用程序，它将生成 7 个随机数 1-49 并将这 7 个数字放在一个文本框中。我只需要执行此操作的 for 循环的帮助，到目前为止我所拥有的是代码/伪代码。

```
String str = "";
for (int i = 0; i < 7; i++) 
```

generate ... 随机代码数组以跟踪生成的随机数，因此不会发生冲突 方法调用通过数组然后继续循环

```
str += random + "_" ;
txtTextBox.settext(str); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:58:30.917

会是这样的

```
String str = "";

Random rand = new Random();

for(int i=0; i<7; i++){
    str += (rand.nextInt(49) + 1) + " ";
}

txtTextBox.setText(str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:02:11.653

好吧，这就是随机的工作原理：并包含在我认为您的代码中。

首先你需要你的随机数：`Random r = new Random();`然后是生成你的数字的代码`r.nextInt(max - min + 1) + min;`（这将包括你的最小和最大数字）现在将它添加到你的代码中。像这样的东西：

```
 Random r = new Random();
    for (int i = 0; i < amount; i++) {
        str += r.nextInt(max - min + 1) + min;
    }
txtTextBox.settext(str); 
```

# knockout.js - 替换 observableArray 的内容后重置选择元素

> ID：15282438
> 
> 赞同：2
> 
> 时间：2013-03-07T21:49:22.350
> 
> 标签：knockout.js

我尝试创建一个功能，其中我有两个（或更多）不同的元素数组，例如：

```
var cities1 = ["Paris", "London", "Warsaw", "Moscow"];
var cities2 = ["Rome", "Paris", "Berlin", "Amsterdam"]; 
```

我可以将它们分配给绑定到选择元素的 observableArray。问题是当我在这些数组中有一个共同元素时，就像在这个例子中：'Paris'。当我选择“巴黎”然后将 observableArray 中的数据从 city1 切换到 city2 时，我没有得到选择已更改的信息。

请检查我准备说明问题的小提琴：http: [//jsfiddle.net/zbkkzdsp/3upSH/](http://jsfiddle.net/zbkkzdsp/3upSH/) 你知道如何在 observableArray 中切换数据导致选择元素中的“重置”选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T17:40:16.330

正如迈克尔·贝斯特所指出的，城市实际上并没有改变。如果您的城市本身就是视图模型，那么您所描述的将会自动发生。

但是，由于您只有原语，因此您需要明确告诉您 viewmodel 在数组更改时“清除” city 的当前值。然后它将自动选择第一个元素。

您可以通过在点击事件中设置`self.City`为来执行此操作`''`，或者通过订阅`self.City.Available`并设置`self.City`为`''`then 来执行此操作。您还需要确保将订阅`self.City`更新为在更新值为 时不发出警报`''`。

此外，我将您的`click`事件中的一些重复功能移至第三个功能，并使这两个`click`功能代理此功能。您的`click`函数在做完全相同的事情，只是使用不同的数据集，所以这消除了一些代码重复。ATM 看起来很轻率，因为它只有 1 行开始，但是如果您在 City 更新中添加更多功能，这将帮助您减少错误并更快地进行更改。

我在下面的代码示例中提供了两种清除 City 值的方法，并注释掉了非订阅版本，以便参考。

```
var cities1 = ["Paris", "London", "Warsaw", "Moscow"];
var cities2 = ["Rome", "Paris", "Berlin", "Amsterdam"];

function MyViewModel() {
    var self = this;

    self.City = ko.observable();
    self.City.Available = ko.observableArray();

    self.City.subscribe(function (newValue) {
        if(newValue != '') {
          alert('City has changed to ' + newValue);
        }
    });

    self.City.Available.subscribe(function(newValue) {
       self.City(''); 
    });

    self.click1 = function () {
        self.loadCityList(cities1);
    };

    self.click2 = function () {
        self.loadCityList(cities2);
    };

    self.loadCityList = function(cityList) {
        // clear city w/o subscription
        //self.City('');
        self.City.Available(cityList);        
    }

};

ko.applyBindings(new MyViewModel()); 
```

作为离别说明，如果您想允许城市名称使用空字符串，或者只是想要一种更强大的方法来在城市被清除时抑制更改警报，您可以向 City 添加一个 sub-observable 并在 true 和 false 之间切换. 如果你这样做了，我建议添加一个“clearCity”函数来封装所有这些逻辑。前任

```
function MyViewModel() {
    ...
    self.City.isLoading = ko.observable(false);

    self.City.subscribe(function (newValue)) {
        if(self.City.isLoading()) {
            self.City.isLoading(false);
        } else {
            alert('City has changed!');
        }
    });

    ...

    //could also put this on city as self.City.clearCity
    self.clearCity = function() {
        self.City.isLoading(true);
        self.City('');
    }

    ...

} 
```

# javascript - 如何在 javascript 的 for 循环中更改函数名称

> ID：15282440
> 
> 赞同：1
> 
> 时间：2013-03-07T21:49:33.437
> 
> 标签：javascript, function, for-loop

我想将 for 循环中的函数名称更改为类似的名称。

```
<script>
for (var x=1;x<10;x++){
function name_x(){
   code
}
</script> 
```

因此，生成了名称为 name_1、name_2 等的 10 个函数。

谢谢

编辑：

这就是我需要一个 for 循环来创建 5 个函数 id_1、id_2、id_3、id_4、id_5

```
<html>
<head>
<script>
function id_1(a){
var id = document.getElementById(a);
if (id.innerHTML==="innerHTML2"){
    id.innerHTML="innerHTML1";
}
else if (id.innerHTML==="innerHTML1"){
    id.innerHTML="innerHTML2";
}
}
</script>
</head>
<body>
<a id="id1" href="javascript:id_1('id')">innerHTML1</a>
<a id="id2" href="javascript:id_2('id')">innerHTML1</a>
<a id="id3" href="javascript:id_3('id')">innerHTML1</a>
<a id="id4" href="javascript:id_4('id')">innerHTML1</a>
<a id="id5" href="javascript:id_5('id')">innerHTML1</a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T21:51:47.360

这看起来很邪恶，但是如果您在浏览器中，您可以将`window`其用作全局对象。否则，定义一些对象来容纳方法：

```
var obj = {}, x;
for (x = 1; x < 10; x++) {
    obj['name_' + x]() { /* code */ }
} 
```

然后您可以通过`obj.name_1()`或拨打电话`obj['name_1']()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T21:53:29.703

您可以改为创建一个函数*数组*：

```
var fs = [];
for (var x = 1; x < 10; x++){
    fs.push( function() {
       /* code */
    });
}
fs[1](); // call second function 
```

您可以改用对象，但我不推荐它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:22:39.073

由于您的代码应该直接应用于您单击的链接，因此您可以使用`this`. 此外，需要将 javascript 代码放在 中`onclick`，而不是`href`. 如果您需要一个`href`值使其看起来像一个链接，您可以使用`#`：

```
<a id="id1" href="#" onclick="javascript:swapContents(this);">innerHTML1</a> 
```

然后您可以使用传入的参数作为对元素的引用（使用有意义的函数名是一种很好的编程习惯，因此我将函数重命名为`swapContents`）：

```
function swapContents(el){
    if (el.innerHTML === "innerHTML2"){
        el.innerHTML = "innerHTML1";
    } else if (el.innerHTML === "innerHTML1"){
        el.innerHTML = "innerHTML2";
    }
} 
```

`id`此外，根据 HTML 规范，所有元素都应具有唯一值。如果您希望它们以某种方式统一，请给它们相同的`class`or`name`或自定义属性：

```
<a id="id1" class="id" href="#" onclick="javascript:swapContents(this);">innerHTML1</a>
<a id="id2" class="id" href="#" onclick="javascript:swapContents(this);">innerHTML1</a>
<a id="id3" class="id" href="#" onclick="javascript:swapContents(this);">innerHTML1</a>
<a id="id4" class="id" href="#" onclick="javascript:swapContents(this);">innerHTML1</a>
<a id="id5" class="id" href="#" onclick="javascript:swapContents(this);">innerHTML1</a> 
```

演示：http: [//jsfiddle.net/V6yG9/](http://jsfiddle.net/V6yG9/)

# installation - 使用 CMake，我如何连接文件并安装它们

> ID：15282444
> 
> 赞同：11
> 
> 时间：2013-03-07T21:49:41.213
> 
> 标签：installation, cmake

我是 CMake 的新手，我遇到了一个无法解决的问题。我正在使用 CMake 编译带有一堆可选子目录的项目，并按预期构建共享库文件。那部分似乎工作正常。这些子目录中的每一个都包含一个 sql 文件。我需要将所有选定的 sql 文件连接到一个 sql 头文件并安装结果。所以一个文件像：

```
sql_header.sql
sub_dir_A.sql
sub_dir_C.sql
sub_dir_D.sql 
```

如果我直接在 make 文件中执行此操作，我可能会更智能地执行以下操作以仅处理选定的子目录：

```
cat sql_header.sql  > "${INSTALL_PATH}/somefile.sql"
cat sub_dir_A.sql  >> "${INSTALL_PATH}/somefile.sql"
cat sub_dir_C.sql  >> "${INSTALL_PATH}/somefile.sql"
cat sub_dir_D.sql  >> "${INSTALL_PATH}/somefile.sql" 
```

我已经弄清楚了其中的一部分，就像我可以使用的那样：

```
LIST(APPEND PACKAGE_SQL_FILES "some_file.sql") 
```

我假设我可以将其放置在每个子目录 CMakeLists.txt 文件中以收集文件名。我可以创建一个宏，例如：

```
CAT(IN "${PACKAGE_SQL_FILES}" OUT "${INSTALL_PATH}/somefile.sql") 
```

但是我在 CMake 最初运行和从 make install 运行之间迷路了。也许有更好的方法来做到这一点。我需要它才能在 Windows 和 Linux 上工作。

我会很高兴有一些提示可以为我指明正确的方向。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T22:33:10.797

您可以主要使用 CMake[`file`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:file)和[`function`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:function)命令创建连接文件。

首先，创建一个`cat`函数：

```
function(cat IN_FILE OUT_FILE)
  file(READ ${IN_FILE} CONTENTS)
  file(APPEND ${OUT_FILE} "${CONTENTS}")
endfunction() 
```

假设您在变量中有输入文件列表`PACKAGE_SQL_FILES`，您可以使用如下函数：

```
# Prepare a temporary file to "cat" to:
file(WRITE somefile.sql.in "")

# Call the "cat" function for each input file
foreach(PACKAGE_SQL_FILE ${PACKAGE_SQL_FILES})
  cat(${PACKAGE_SQL_FILE} somefile.sql.in)
endforeach()

# Copy the temporary file to the final location
configure_file(somefile.sql.in somefile.sql COPYONLY) 
```

写入临时文件的原因是真正的目标文件只有在其内容发生变化时才会更新。请参阅[此答案](https://stackoverflow.com/a/15276850/424459)，了解为什么这是一件好事。

您应该注意，如果您通过`add_subdirectory`命令包含子目录，则就 CMake 变量而言，子目录都有自己的范围。在子目录中，使用`list`只会影响该子目录范围内的变量。

如果你想创建一个在父范围内可用的列表，你需要使用[`set(... PARENT_SCOPE)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:set)，例如

```
set(PACKAGE_SQL_FILES
    ${PACKAGE_SQL_FILES}
    ${CMAKE_CURRENT_SOURCE_DIR}/some_file.sql
    PARENT_SCOPE) 
```

到目前为止，所有这些都只是在构建树的根目录中创建了连接文件。要安装它，您可能需要使用以下[`install(FILES ...)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command:install)命令：

```
install(FILES ${CMAKE_BINARY_DIR}/somefile.sql
        DESTINATION ${INSTALL_PATH}) 
```

因此，每当 CMake 运行时（无论是因为您手动调用它还是因为它在您执行“make”时检测到更改），它都会更新构建树中的连接文件。只有运行“make install”后，文件才会最终从构建根目录复制到安装位置。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-06-13T16:46:32.093

从 CMake 3.18 开始，CMake[命令行工具](https://cmake.org/cmake/help/latest/manual/cmake.1.html#run-a-command-line-tool)可以使用`cat`. `PACKAGE_SQL_FILES`因此，假设一个包含文件列表的变量，您可以`cat`使用以下命令运行命令[`execute_process`](https://cmake.org/cmake/help/latest/command/execute_process.html)：

```
# Concatenate the sql files into a variable 'FINAL_FILE'.
execute_process(COMMAND ${CMAKE_COMMAND} -E cat ${PACKAGE_SQL_FILES}
    OUTPUT_VARIABLE FINAL_FILE
    WORKING_DIRECTORY ${CMAKE_CURRENT_LIST_DIR}
)
# Write out the concatenated contents to 'final.sql.in'.
file(WRITE final.sql.in ${FINAL_FILE}) 
```

解决方案的其余部分类似于弗雷泽的回应。您可以使用`configure_file`因此生成的文件仅在必要时更新。

```
configure_file(final.sql.in final.sql COPYONLY) 
```

您仍然可以使用`install`相同的方式安装文件：

```
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/final.sql
    DESTINATION ${INSTALL_PATH}) 
```

# matlab - matlab中的经验分位数

> ID：15282445
> 
> 赞同：0
> 
> 时间：2013-03-07T21:49:46.947
> 
> 标签：matlab

有谁知道如何在matlab中计算分布的经验分位数？具体来说，我在使用empiricalQuantiles() 函数时遇到问题，需要计算滚动人口的经验分位数（一个矩阵，即每100 个点为49x1025）。

如果您还可以提供有关如何计算经验分布的倒数的信息（应该给出大致相同的答案），那就太好了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T04:47:33.940

```
% Simulating empirical data
empiricalData=randn(50000,1);
% Quantile evaluation
% For instance: Median
y = quantile(empiricalData,[.50]); 
```

# c# - 表达式的值不变

> ID：15282446
> 
> 赞同：2
> 
> 时间：2013-03-07T21:49:51.710
> 
> 标签：c#

我正在尝试使用线性插值移动光标。我的问题是，`y0 + (y1 - y0) * ((x - x0) / (x1 - x0))`尽管 x 发生了变化，但从不改变的值。我无法弄清楚我错过了什么。

```
public void MoveCursor(int x1, int y1)
    {
        int y, y0, x, x0;

        y0 = Cursor.Position.Y;
        x0 = Cursor.Position.X;

        for (x = x0; x >  x1; x--)
        {
            y = y0 + (y1 - y0) * ((x - x0) / (x1 - x0));

            this.Cursor = new Cursor(Cursor.Current.Handle);
            Cursor.Position = new Point(x,y);
            Cursor.Clip = new Rectangle(this.Location, this.Size);

            Console.Out.WriteLine("X:{0} Y:{1}", x, y);

            System.Threading.Thread.Sleep(100);

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T13:49:55.707

尝试使用浮点数：

```
 y = (int)(y0 + (float)(y1 - y0) * (x - x0) / (x1 - x0)); 
```

# c# - 如何在 C# 中解析 CSV

> ID：15282447
> 
> 赞同：-8
> 
> 时间：2013-03-07T21:49:55.323
> 
> 标签：c#

我有一些点坐标，如下所示：

> -123.118069008,49.2761419674,0 -123.116802056,49.2752350159,0 -123.115385004,49.2743520328,0 -123.114912944,49.2738039982，.............. -123.118069008,49.2761419674,0

你能告诉我如何使用 C# 创建这样的东西：

```
new google.maps.LatLng(-123.118069008,49.2761419674),
new google.maps.LatLng(-123.116802056,49.2752350159),
.....
new google.maps.LatLng(-123.118069008,49.2761419674)]; 
```

如您所见，我需要：

1.  添加“新的 google.maps.LatLng()”
2.  从 -123.118069008,49.2761419674,0 中删除 0
3.  解析它直到最后一行以 ; 结尾

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:59:34.193

这是我所知道的最简单的方法......

```
 var txt = "-123.118069008,49.2761419674,0 -123.116802056,49.2752350159,0 -123.115385004,49.2743520328,0";
        var output = new StringBuilder();
        foreach (var group in txt.Split(' '))
        {
            var parts = group.Split(',');
            var lat = double.Parse(parts[0]);
            var lng = double.Parse(parts[1]);
            if (output.Length > 0)
                output.AppendLine(",");
            output.Append("new google.maps.LatLng("+lat+","+lng+")");
        }
        MessageBox.Show("["+output+"]"); 
```

结果是……

[新 google.maps.LatLng(-123.118069008,49.2761419674),

新的 google.maps.LatLng(-123.116802056,49.2752350159),

新的 google.maps.LatLng(-123.115385004,49.2743520328)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:54:50.403

未经测试且未编译，但这应该可以帮助您入门

```
var items = data.Split(',');
for(int i = 0; i < items.Length; i = i + 2)
{
    var lat = int.Parse(items[i].Replace("0-","-"));
    var lng = int.Parse(items[i+1]);
} 
```

你会想做数组边界检查等，希望这仍然有帮助。

# excel - 访问输出到 Excel 模板和格式

> ID：15282448
> 
> 赞同：0
> 
> 时间：2013-03-07T21:49:55.653
> 
> 标签：excel, ms-access, export, vba

所以我使用 VBA 代码将查询导出到 Excel。这可行，但生成的文件很难看，我正在尝试对其应用一些简单的格式（数千个分隔符和美元符号、列宽等）。我已经看到在 VBA 中手动执行的代码，但这很丑陋，将来很难改变，所以我正在考虑使用 Excel 模板文件。

我的问题是设置模板文件似乎对生成的电子表格没有影响。模板文件应该在这里做什么？还有哪些其他方法可以将简单格式应用于此电子表格？

```
 DoCmd.OutputTo acOutputQuery, QueryName, "ExcelWorkbook(*.xlsx)", FileName & ".xlsx", OpenFile, template, 0, acExportQualityPrint 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:47:15.967

将 OutputTo 与 Excel 一起使用时，不能使用模板文件。从[MSDN 文档](http://msdn.microsoft.com/en-us/library/office/ff192065.aspx)：

> ## DoCmd.OutputTo 参数
> 
> *   *名称*：模板文件
> *   *必需*/可选：可选
> *   *数据类型*：变体
> *   *描述*：一个字符串表达式，它是您要用作**HTML、HTX 或 ASP 文件模板的文件的全名，包括路径。**

如果你想格式化你的输出，你可能不得不在 VBA 中手动完成（这可能很麻烦，正如你所提到的），或者可能得到一个可以为你做的第三方控件/库/类，但是我个人不知道。

# c# - 创建超过 500 个 hiddenBoxFor 可以使加载时间过长吗？

> ID：15282453
> 
> 赞同：1
> 
> 时间：2013-03-07T21:50:25.980
> 
> 标签：c#, asp.net-mvc, html

我有一个简单的问题要问你。

我有一个视图，在 for 循环中，我创建了这个：

```
@for (int i = 0; i < Model.Count(); i++)
            {
                <tr>
                    <td>@Html.DisplayFor(x => x[i].OtherObj.m_ObjName)@Html.HiddenFor(x => x[i].m_Card.m_CardName)</td>
                    <td>@Html.DisplayFor(x => x[i].m_NbInStock)@Html.HiddenFor(x => x[i].m_NbInStock)</td>
                    <td>@Html.DisplayFor(x => x[i].m_QtyAllowed)@Html.HiddenFor(x => x[i].m_QtyAllowed)</td>
                    <td>@Html.CheckBoxFor(x => x[i].m_IsForSelling)</td>

                    @Html.HiddenFor(x => x[i].m_ObjID)
                    @Html.HiddenFor(x => x[i].m_OtherObj)
                    @Html.HiddenFor(x => x[i].m_OtherObjID)
                    @Html.HiddenFor(x => x[i].m_IsAllocated)
                    @Html.HiddenFor(x => x[i].m_IsReallyThere)
                </tr>
            } 
```

你明白了。我想我必须为对象的每个属性创建隐藏框，并且列表可以填充许多项目。现在500是一个近似值，它可能会增长更多。

我的观点是，该过程“似乎”正常滚动，直到调试到达视图中的最后一行代码：

```
<div>
    @Html.ActionLink("Back to List", "SearchIndex")
</div> 
```

而且，到那时，页面最终显示大约需要几分钟或四分钟。恐怕一旦我有了所有可用的数据，它就会飞涨。

是因为需要所有隐藏字段吗？也许生成 HTML 页面可能需要一段时间？

谢谢你的智慧。

****编辑 ******

 **我想我有罪魁祸首：

```
section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

我曾经把这行代码放在视图的末尾，这可能是原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:10:07.413

> 现在500是一个近似值，它可能会增长更多。

我建议你后退一步。由于多种原因，这可能是一个坏主意：

*   每次发布页面时的请求大小都很大
*   许多可能被篡改的字段，因此都需要验证
*   大型 DOM
*   在渲染引擎上加载（这不应该花费*几分钟*，但解析所有这些表达式不是免费的）。

## 备择方案

*   将内容分成更小的页面；和/或使用数据分页和/或延迟加载。

*   将会话状态用于您始终与页面往返的用户特定数据。

*   如果数据不是特定于用户的（例如产品列表），`Cache`则比`Session`.

*   对数据库进行更多的访问。现代数据库在缓存查询和数据方面非常“聪明”；在需要时提取这些数据甚至可能不会影响磁盘子系统（因此既快速又高效）。

*   本地存储（根据您的示例数据可能不适用，但值得一提）**

# apache - 尝试通过 XAMPP 启动 Apache 的错误

> ID：15282457
> 
> 赞同：2
> 
> 时间：2013-03-07T21:50:48.100
> 
> 标签：apache, service, path, installation, xampp

这是当我尝试在未激活 Apache 服务的情况下运行 Apache 时出现的情况：

```
>Status change detected: running
>Status change detected: stopped
>Error: Apache shutdown unexpectedly.
>This may be due to a blocked port, missing dependencies, 
>improper privileges, a crash, or a shutdown by another method.
>Check the "/xampp/apache/logs/error.log" file
>and the Windows Event Viewer for more clues 
```

这是我尝试安装 Apache 服务时发生的情况：

```
>Installing service...
>Apache Service detected with wrong path
>Change XAMPP Apache settings or
>Uninstall/disable the other service manually first
>Found Path: ERROR: Not Able To Open Service Manager
>Expected Path: "c:\xampp\apache\bin\httpd.exe" -k run service
>Successful! 
```

...在服务（失败）尝试后尝试启动 Apache：

```
>Attempting to start Apache service...
>System Error.  Code: 5.
>Access is denied 
```

有谁知道这里发生了什么和/或能够帮助解决问题？

我已经卸载并重新安装了（压缩文件提取）安装程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:12:46.040

听起来有些东西可能已经在端口 80 上运行。跑步时会发生什么

```
netstat -an |find /i "listening" 
```

从命令行？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-01T00:34:50.213

我也收到了这些信息。您可能有 IIS 和 XAMPP 在端口 80 发生冲突。您可以：

*   禁用 IIS（如果您不打算定期运行服务器）。
*   更改 XAMPP 默认端口。
*   更改 IIS 默认端口。

**更改 XAMPP 默认端口**

打开您的***XAMPP\apache\conf\httpd.conf***文件并将“ **80** ”端口更改为其他端口，例如“ **8080** ”。

打开您的***XAMPP\apache\conf\extra\httpd-ssl.conf***文件并将“ **443** ”端口更改为另一个数字。它应该使两个服务都运行而不会发生冲突。

# objective-c - Objective-C：具有块返回类型的块的类型签名

> ID：15282459
> 
> 赞同：0
> 
> 时间：2013-03-07T21:50:51.743
> 
> 标签：objective-c, nested, block

我在编写嵌套块时遇到问题。假设我想要一个带有整数的块。该块返回一个接受另一个整数的块，并返回两个整数的和。我没有任何运气写出来。这是一次尝试，并不比我的任何其他尝试差：

```
(int ^(int)) (^bblock)(int) = ^(int a) {
    return ^(int b){ return a + b; };
}; 
```

任何人都可以发现有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:00:27.390

相当丑陋，但您可以使用括号而不是 typedef 来做到这一点：

```
int (^(^functor)(int))(int) = ^(int a) {
    return Block_copy(^(int b) {
        return a + b;
    });
}; 
```

# algorithm - 用元素填充容器的算法，知道它们的垂直位置

> ID：15282460
> 
> 赞同：0
> 
> 时间：2013-03-07T21:50:56.400
> 
> 标签：algorithm, alignment, positioning, fill

我的问题有点类似于这个主题：

[将元素装入盒子](https://stackoverflow.com/questions/11790287/fit-elements-into-box)

尽管在我的情况下，我有一个大小不一的容器，以及一些具有已知垂直位置的预定义元素。元素将在容器内分配而不会重叠，并占用完整的可用宽度。如果两个或更多重叠，它们应该具有相同的宽度。

![在此处输入图像描述](../Images/659a859b6388f308e7979eaae84f9594.png)

任何人都知道任何可能在这里有用的算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:32:33.773

一种方法是将这个问题建模为凸优化问题，然后使用求解器来解决它（大量求解器可在线获得）。[您可以在Boyds 凸优化书](http://www.stanford.edu/~boyd/cvxbook/bv_cvxbook.pdf)的平面规划章节（第 438 页）中找到有关此方法的更多信息。他们在[cvx 软件](http://cvxr.com/cvx/download/)的示例文件夹中有一个 matlab 实现。我希望我没有让它变得更复杂，看到其他解决方案会很有趣。

# ios - 是否可以在主 UITableView 之上实现 UITableView 覆盖？

> ID：15282462
> 
> 赞同：0
> 
> 时间：2013-03-07T21:51:07.600
> 
> 标签：ios, objective-c

基本上，我有一个 UITableView，并且有一个包含文本框的单元格。我想实现一个覆盖表视图，它会弹出以显示预输入结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T21:54:39.600

所以，要非常客观地回答你的问题，是的，是的，你可以。

# php - 如何在 Laravel 4 中使用 rackspace php-opencloud

> ID：15282463
> 
> 赞同：4
> 
> 时间：2013-03-07T21:51:08.473
> 
> 标签：php, laravel, laravel-4, composer-php

我正在尝试将[php-opencloud 库](https://github.com/rackspace/php-opencloud)与 Laravel 4 一起使用（这是我第一次使用它，我有点害怕......）

我已将此添加到我的 composer.json 中，尝试了 composer 更新，它正确下载了 lib，但下一步是什么？我怎样才能自动加载它？

```
"repositories": {
    "php-opencloud": {
        "type": "package",
        "package": {
            "name": "rackspace/php-opencloud",
            "version": "1.4.1",
            "source": {
                "url": "https://github.com/rackspace/php-opencloud.git",
                "type": "git",
                "reference": "origin/master"
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:54:04.757

您通过 Composer 安装的大多数软件包都使用自动加载：

*   [基本用法：自动加载^(*Composer 文档*)](http://getcomposer.org/doc/01-basic-usage.md#autoloading)

这基本上只是在您的引导程序中包含一个文件，您就可以开始了：

```
require 'vendor/autoload.php'; 
```

这与您放置`composer.json`文件的位置有关。

# bash - sed 和转义字符

> ID：15282466
> 
> 赞同：0
> 
> 时间：2013-03-07T21:51:34.143
> 
> 标签：bash, ubuntu, sed

`sed`特殊符号如何操作？我试图

这是我的脚本（它修复了 Ubuntu 下的 Qt 项目文件，'cos Ubuntu 没有 qt-multimadia）：

```
OldInclude='QT       += multimedia'
NewInclude='
       INCLUDEPATH += //usr//include//QtMobility
       INCLUDEPATH += //usr//include//QtMultimediaKit'

find -iname "*.pro" -type f -exec sed -i "s/$OldInclude/$NewInclude/g" {} \; 
```

在文件中：

```
#-------------------------------------------------
#
# Project created by QtCreator 2013-03-07T02:19:23
#
#-------------------------------------------------
QT       += multimedia
QT       -= gui
TARGET = MultiItem
TEMPLATE = lib
DEFINES += MULTIITEM_LIBRARY
SOURCES += multiitem.cpp
//Even more lines here 
```

但它什么都不能代替 - 看起来我对输入字符串做错了什么。

如何准确地替换它们？我要更新的文件如下：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:19:57.790

如果要 sed 放入换行符，则需要在替换中使用 \n 字符：

```
$ OldInclude='QT       += multimedia'
$ NewInclude='\nINCLUDEPATH += /usr/include/QtMobility\nINCLUDEPATH += /usr/include/QtMultimediaKit'
$ sed "s@$OldInclude@$NewInclude@g" your_snippet.txt 
```

产生我认为你想要的结果。

# r - 在 R 中获取有关 tryCatch 错误的堆栈跟踪

> ID：15282471
> 
> 赞同：20
> 
> 时间：2013-03-07T21:51:49.363
> 
> 标签：r, error-handling

这与其他一些问题有关，但我似乎无法弄清楚如何应用答案，所以我问了一个新问题。

我试图从一段看起来像这样的代码中找出一个无意义的错误：

```
tryCatch(MainLoop(), 
  error=function(e) { fatal(lgr, paste('caught fatal error:', as.character(e))); 
                      exit.status <<- 1 }) 
```

问题是该错误似乎与隐藏在库函数中的某些内容有关：

```
Error in nrow(x): (subscript) logical subscript too long 
```

这`nrow`不在我的代码中，因为上面的 C 级错误仅适用于我的任何`nrow`调用中都不会发生的索引类型。

所以我真的很想从里面得到一个堆栈跟踪`tryCatch`。这是一个类似的问题：

```
x <- function() { y(); }
y <- function() { z(); }
z <- function() { stop("asdf") }

> x()
Error in z() : asdf
> tryCatch(x(), error=function(e) { print(conditionCall(e)) } )
z()
> tryCatch(x(), error=function(e) { dump.frames() } )
> last.dump
$`tryCatch(x(), error = function(e) {
    dump.frames()
})`
<environment: 0x1038e43b8>

$`tryCatchList(expr, classes, parentenv, handlers)`
<environment: 0x1038e4c60>

$`tryCatchOne(expr, names, parentenv, handlers[[1]])`
<environment: 0x1038e4918>

$`value[[3]](cond)`
<environment: 0x1038ea578>

attr(,"error.message")
[1] "asdf"
attr(,"class")
[1] "dump.frames" 
```

如何获取包含调用的堆栈跟踪`y()`？我必须停止使用`tryCatch`吗？有什么更好的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-07T23:27:30.783

对于交互式使用，可以`trace(stop, quote(print(sys.calls())))`在调用时打印调用堆栈`stop()`。

从`?tryCatch`,

```
 The function 'tryCatch' evaluates its expression argument in a
 context where the handlers provided in the '...'  argument are
 available. 
```

然而

```
 Calling handlers are established by 'withCallingHandlers'...
 the handler is called... in the context where the condition
 was signaled... 
```

所以

```
>     withCallingHandlers(x(), error=function(e) print(sys.calls()))
[[1]]
withCallingHandlers(x(), error = function(e) print(sys.calls()))

[[2]]
x()

[[3]]
y()

[[4]]
z()

[[5]]
stop("asdf")

[[6]]
.handleSimpleError(function (e) 
print(sys.calls()), "asdf", quote(z()))

[[7]]
h(simpleError(msg, call))

Error in z() : asdf 
```

如果有内部 tryCatch，这将被阻止

```
withCallingHandlers({
    tryCatch(x(), error=function(e) stop("oops"))
}, error=function(e) print(sys.calls())) 
```

因为我们只能在 tryCatch '处理'错误之后访问调用堆栈。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-30T22:54:31.577

是的，有可能。它在编码方面不太优雅，但对输出很有帮助！欢迎任何意见！

我把它放在我的 misc 包中，如果你想要文档，可以从那里使用它。 [https://github.com/brry/berryFunctions/blob/master/R/tryStack.R](https://github.com/brry/berryFunctions/blob/master/R/tryStack.R) 下一个CRAN版本计划很快发布，到那时：

```
devtools::install_github("brry/berryFunctions")
# or use:
source("http://raw.githubusercontent.com/brry/berryFunctions/master/R/instGit.R")
instGit("brry/berryFunctions")

library(berryFunctions)
?tryStack 
```

这是为了快速参考：

```
tryStack <- function(
expr,
silent=FALSE
)
{
tryenv <- new.env()
out <- try(withCallingHandlers(expr, error=function(e)
  {
  stack <- sys.calls()
  stack <- stack[-(2:7)]
  stack <- head(stack, -2)
  stack <- sapply(stack, deparse)
  if(!silent && isTRUE(getOption("show.error.messages"))) 
    cat("This is the error stack: ", stack, sep="\n")
  assign("stackmsg", value=paste(stack,collapse="\n"), envir=tryenv)
  }), silent=silent)
if(inherits(out, "try-error")) out[2] <- tryenv$stackmsg
out
}

lower <- function(a) a+10
upper <- function(b) {plot(b, main=b) ; lower(b) }

d <- tryStack(upper(4))
d <- tryStack(upper("4"))
cat(d[2]) 
```

> d <- tryStack（上（“4”））
> 
> 这是错误堆栈：
> 
> 尝试堆栈（上（“4”））
> 
> 上（“4”）
> 
> 较低(b)
> 
> + 10 中的错误：二元运算符的非数字参数

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-05T17:18:13.473

我是`evaluate::try_capture_stack()`.

```
x <- function() {
  y()
}
y <- function() {
  z()
}
z <- function() {
  stop("asdf")
}
env <- environment()
e <- evaluate::try_capture_stack(quote(x()), env)
names(e)
#> [1] "message" "call"    "calls"
e$calls
#> [[1]]
#> x()
#> 
#> [[2]]
#> y()
#> 
#> [[3]]
#> z()
#> 
#> [[4]]
#> stop("asdf") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-11T16:26:17.347

我参加聚会有点晚了，但我发现最好的方法是在您尝试的函数中使用退出处理程序。

```
main <- function()
{
  on.exit({
    msg <- capture.output(traceback())
    if (msg != "No traceback available ")
    {
      print(msg)
    }
  }
  )
  # rest of code
}

withCallingHandlers(
  expr =
    {
      main()
    },
  error = function(e) 
  {
    print(e)
  }
) 
```

# javascript - 遍历 javascript 中的对象集合并从该函数返回 true

> ID：15282480
> 
> 赞同：8
> 
> 时间：2013-03-07T21:52:35.517
> 
> 标签：javascript, arrays, loops

我有一个名为集合的对象，我想测试一下 justin 是否是这个集合的一部分。

```
collection = { 0:{screen_name:"justin"},1:{screen_name:"barry"}} 
```

我正在尝试发现最有效的方法，将名称传递给调用的函数`present_user(user)`，以查看用户是否是集合的一部分，我有点难过。

所以我的收藏是由对象 0、1、n+1 组成的。我正在尝试遍历这个集合。到目前为止我只测试 [0]

```
function present_user(user) {
  collection[0]["screen_name"] == user -> return true in the case of "justin"
} 
```

如果将用户名“justin”传递给函数，我如何迭代此集合的所有值并返回 true？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T21:56:38.217

你的集合是一个对象而不是一个数组，所以这将是一种方法：

```
var present_user = function(user){
    for (var k in collection) {
        if (collection[k]['screen_name'] == user) return true;
    }
    return false;
}; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-07T21:55:38.873

如果您的外部对象键都是数字，您应该使用数组来代替：

```
var collection = [{screen_name:"justin"}, {screen_name:"barry"}]; 
```

然后迭代：

```
function present_user(user) {
    for(var i=0; i < collection.length; i++) {
        if(collection[i].screen_name === user) return true;
    }
} 
```

您也可以循环对象集合（使用`for..in`，请参阅[mVChr 的答案](https://stackoverflow.com/a/15282544/825789)），但在这种情况下，您似乎真的应该使用数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-03-27T12:40:10.853

您还可以将集合或对象转换为数组，以便您可以使用数组方法进行迭代：

```
Object.values(collectionOrObject); 
```

[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_objects/Object/values)

当您使用本机 javascript dom 选择器时，这尤其会派上用场，例如：

```
document.getElementsByClassName('someClass'); 
```

返回一个集合

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T21:59:23.033

如果您提前知道集合中有多少对象，则可以使用添加`length`属性并使用

```
Array.prototype.some.call(collection, function (elem) {
    return elem.screen_name = 'justin';
}); 
```

理想情况下`collection`最初是一个数组，所以你可以使用`collection.some`，但我知道这可能是不可能的。

如果在这种情况下您无法提前知道长度，则必须手动迭代。对不起。

```
var exists = false, i;
for (i in collection) {
    if (collection.hasOwnProperty(i)) {
        /* may also want to check `screen_name` property existence
        if (collection[i].screen_name == 'justin') {
            exists = true;
            break;
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T22:00:49.680

```
 function any(user) {
    return collection.filter(function (item) { return item == user }).length > 0;
 } 
```

这里唯一的“陷阱”是您需要在这里有一个数组而不是一个对象，如果您将集合变量修改为数组没有问题，在我看来，这种函数式方法将是最优雅的方法。

不过要考虑的另一件事是，此代码在找到第一个匹配项时不会停止，它将测试数组中的所有项目，因此我建议仅在数组不大时使用它。

# fullcalendar - 日历导航按钮事件

> ID：15282485
> 
> 赞同：1
> 
> 时间：2013-03-07T21:52:47.710
> 
> 标签：fullcalendar

任何人都知道如何测试全日历导航按钮事件。我需要知道用户何时按下“上个月”或“下个月”按钮。我在文档中没有找到这个事件地址，但如果可能被称为不同的东西，那么我正在寻找。

我有一个有一年历史的大日历，我试图只加载当前月份的事件以减少加载时间。历史事件用于跟踪事件。

我会很感激帮助......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:01:49.217

见回调函数[viewDisplay](http://arshaw.com/fullcalendar/docs/display/viewDisplay/) ...

# php - 使用 PHP 计算从 CSV 文件处理数据的表中的行数

> ID：15282488
> 
> 赞同：0
> 
> 时间：2013-03-07T21:53:00.453
> 
> 标签：php, count, html-table, import-from-csv

我的问题是我不知道如何计算已过滤并从 CSV 文件输出的数据行。

我想做一些类似的事情：

```
$author = $_GET['author'];

$booklist = array();
$title1 = 'Harry Potter and the Deathly Hallows';
array_push($booklist, $title1);
$title2 = 'Harry Potter and the Goblet of Fire';
array_push($booklist, $title2);
$title3 = 'Harry Potter and the Prisoner of Azkaban';
array_push($booklist, $title3);

if (strtolower($author) == strtolower('J.K. Rowling')){
    echo '<h1>', ucwords($author), '</h1>';
    echo "<p>" . $title1 . "</p>";
    echo "<p>" . $title2 . "</p>";
    echo "<p>" . $title3 . "</p>";
    $number = count($booklist);
    echo "<p>We have $number of $author 's books.</p>";
} 
```

哪个会输出；

```
J.K. Rowling
Harry Potter and the Deathly Hallows
Harry Potter and the Goblet of Fire
Harry Potter and the Prisoner of Azkaban
We have 3 of J.K. Rowling 's books. 
```

但是，我的问题是，我的值来自 CSV 文件，并且正在输出的数据已被 IF 语句过滤。

CSV 文件包含以下值：

```
name,author,isbn,price
name,author,isbn,price
name,author,isbn,price
name,author,isbn,price 
```

到目前为止，我管理的内容如下：

```
<?php
$author = $_GET['author'];

echo '<h1>', ucwords($author), '</h1>';
echo '<table border=1>'; //start table
$handle = fopen("books.csv", "r");

while (($books = fgetcsv($handle)) !== FALSE) {  
    list($bookname, $bookauthor, $bookisbn, $bookprice) = $books;

    if (strtolower ($author)==strtolower($bookauthor)) {
        $booklist = array();
        array_push($booklist, $bookname);
        $number = count($booklist);
        echo '<tr><td>',$bookname, //names
        '</td><td>',$bookauthor, //authors
        '</td><td>',$bookisbn, //ISBN
        '</td><td>',$bookprice, //price
        '</td></tr>';
    }
}
fclose($handle);
echo '</table>'; //end table
echo '<p> There are ', $number, ' books by this author. </p>';
?> 
```

我的输出是：

```
J.K. Rowling
title1, J.K. Rowling, ISBN, Price
title2, J.K. Rowling, ISBN, Price
title3, J.K. Rowling, ISBN, Price
There are 1 books by this author. 
```

好像不算。

我不是 PHP 方面的佼佼者，因此我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:56:26.257

您`$booklist`每次都通过循环重新声明。将它移到循环之外，你应该会很好。

```
$booklist = array(); //move here
while (($books = fgetcsv($handle)) !== FALSE) {  
list($bookname, $bookauthor, $bookisbn, $bookprice) = $books;

if (strtolower ($author)==strtolower($bookauthor))
 {
   array_push($booklist, $bookname);
   $number = count($booklist);
   echo '<tr><td>',$bookname, //names
   '</td><td>',$bookauthor, //authors
   '</td><td>',$bookisbn, //ISBN
   '</td><td>',$bookprice, //price
   '</td></tr>';
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T21:56:53.683

尝试移动以下行；

```
$booklist = array(); 
```

到 while 循环之上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T21:57:29.680

`$number`总是为 1（或未定义，没有）。而不是计算数组，`$number=0;`在循环之前设置然后使用`$number++;`

# mysql - MySQL - 在表中选择相关项目

> ID：15282489
> 
> 赞同：1
> 
> 时间：2013-03-07T21:53:01.887
> 
> 标签：mysql, sql, performance

我正在跟踪用户对我们网站上课程页面的访问。我这样做是为了对于任何给定的课程（又名产品），我可以拉出用户访问过的其他顶级课程页面的列表，他们也访问过当前页面 - 就像亚马逊的“查看过此项目的客户也查看过”特征。

我所拥有的是工作，但随着收集的数据不断增长，查询时间变得越来越慢。我现在有大约 30 万条记录，每个查询需要 2 秒以上。我们希望在达到大约 2M 条记录时开始修剪数据，但考虑到我们目前面临的性能问题，我认为这是不可能的。我想知道是否有更好的方法来解决我的问题。

这是血腥的细节......

我有一个简单的三列 InnoDB 表，其中包含用户 ID、课程编号和时间戳。用户 ID 和课程编号字段被编入索引，用户 ID/课程编号也被编入索引。这是表架构：

```
CREATE TABLE IF NOT EXISTS `coursetracker` (
  `user` varchar(38) NOT NULL COMMENT 'user guid',
  `course` char(8) NOT NULL COMMENT 'subject code and course number',
  `visited` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'last visited time',
  UNIQUE KEY `ndx_user_course` (`user`,`course`),
  KEY `ndx_user` (`user`),
  KEY `ndx_course` (`course`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COMMENT='tracking user visits to courses'; 
```

表中的数据如下所示：

```
user                                   | course   | visited
=======================================|==========|====================
{00001A4C-1DE0-C4FB-0770-A758A167B97E} | OFFC2000 | 2013-01-19 23:18:03
{00001FB0-179E-1E28-F499-65451E5C1465} | FSCT8481 | 2013-01-30 13:12:29
{0000582C-5959-EF2B-0637-B5326A504F95} | COMP1409 | 2013-01-13 16:09:42
{0000582C-5959-EF2B-0637-B5326A504F95} | COMP2051 | 2013-01-13 16:20:41
{0000582C-5959-EF2B-0637-B5326A504F95} | COMP2870 | 2013-01-13 16:25:41
{0000582C-5959-EF2B-0637-B5326A504F95} | COMP2920 | 2013-01-13 16:24:40
{00012C64-2CA1-66DD-5DDC-B3714BFC91C3} | COMM0005 | 2013-02-18 21:32:36
{00012C64-2CA1-66DD-5DDC-B3714BFC91C3} | COMM0029 | 2013-02-18 21:34:04
{00012C64-2CA1-66DD-5DDC-B3714BFC91C3} | COMM0030 | 2013-02-18 21:34:50
{00019F46-6664-28DD-BCCD-FA6810B4EBB8} | COMP1409 | 2013-01-16 15:48:49 
```

我用来获取任何给定课程（本例中为 COMP1409）的相关课程的示例查询如下所示：

```
SELECT `course`,
       count(`course`) c
FROM `coursetracker`
WHERE `user` IN
        (SELECT `user`
         FROM `coursetracker`
         WHERE `course` = 'COMP1409')
    AND `course` != 'COMP1409'
GROUP BY `course`
ORDER BY c DESC LIMIT 10 
```

此查询的结果如下所示：

```
course   | c
=========|====
COMP1451 | 470
COMP1002 | 367
COMP2613 | 194
COMP1850 | 158
COMP1630 | 156
COMP2617 | 126
COMP2831 | 119
COMP2614 | 95
COMP1911 | 79
COMP1288 | 76 
```

所以，除了性能之外，上面的一切都完全按照我的意愿工作。该表是如此简单，以至于没有什么可以索引的了。SQL 查询产生我正在寻找的数据。我对如何更快地做到这一点没有想法。我将不胜感激有关该方法的任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:00:22.487

您可以尝试加入：

```
SELECT c1.`course`,
       count(c1.`course`) as c
FROM `coursetracker` c1
INNER JOIN `coursetracker` c2
ON c1.`user` = c2.`user`
WHERE c2.`course` = 'COMP1409'
AND c1.`course` != 'COMP1409'
GROUP BY c1.`course`
ORDER BY c DESC LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:02:03.640

很难在没有看到您的解释的情况下分辨，但也许将表格加入自身会更快？

```
SELECT `course`, count(`course`) c
FROM `coursetracker` c
 INNER JOIN `coursetracker` c2 ON c.user = c2.user
WHERE c2.`course` = 'COMP1409'
AND  c.`course` != 'COMP1409'
GROUP BY `course`
ORDER BY c DESC LIMIT 10 
```

# ios - addSubview 的内存泄漏故障排除

> ID：15282490
> 
> 赞同：0
> 
> 时间：2013-03-07T21:53:04.560
> 
> 标签：ios, memory-leaks, addsubview

使用 addSubview 时防止内存泄漏的正确方法是什么？我收到 Instruments 的投诉，称此代码存在泄漏。我究竟做错了什么？

示例代码：

我的.h

```
@interface MyCustomControl : UIControl {
    UILabel *ivarLabel;
}

@property (nonatomic, retain) UILabel       *ivarLabel; 
```

我的

```
@synthesize ivarLabel;

- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {

        self.ivarLabel = [[UILabel alloc] initWithFrame:CGRectMake( 0, 0, 10, 10)];
        [self addSubview:self.ivarLabel];

    }
    return self;
}

- (void)dealloc {

    [ivarLabel release];

    [super dealloc];
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T21:56:38.130

而不是这个：

```
 self.ivarLabel = [[UILabel alloc] initWithFrame:CGRectMake( 0, 0, 10, 10)]; 
```

做这个：

```
 ivarLabel = [[UILabel alloc] initWithFrame:CGRectMake( 0, 0, 10, 10)]; 
```

第一个片段将在 ARC 中工作。

**但为什么？**

内部的 setter ( `self.ivarLabel = ...`) 将具有与此相同的逻辑：

```
-(void)setIvarLabel:(UILabel *)newLabel {
    if (ivarLabel != value) {
        [ivarLabel release];
        ivarLabel = [newLabel retain];
    }
} 
```

你可以看到`alloc`你做的（`[UILabel alloc]`）加上里面做的保留`if`，将创建一个保留计数2。减去`release`上的`dealloc`，给你1。这就是你有泄漏的原因。

# python - 安装starspan配置错误

> ID：15282492
> 
> 赞同：0
> 
> 时间：2013-03-07T21:53:14.063
> 
> 标签：python, cmd, configure

我想安装[starspan](https://github.com/Ecotrust/starspan)。我下载并提取了文件。在命令行中，我导航到 starspan 文件夹并`configure`根据[安装文件](https://github.com/Ecotrust/starspan/blob/master/INSTALL)键入。但是我只会回来：

```
'configure' is not recognized as an internal or external command,
operable program or batch file. 
```

我究竟做错了什么？

我在 Windows 7 (64it) 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T01:10:56.493

我根本不熟悉这个软件，但是那个文件中的命令—— `./configure`等等——是 GNU Autotools 系统的一部分，它通常用于在 *nix 环境中从源代码编译软件。您是否希望在您的机器上编译它？如果没有，您可能需要查找 Windows 二进制文件。

一点后续：看起来这个项目依赖于 Windows 中的 MinGW ( [http://www.mingw.org/ )。](http://www.mingw.org/)那是另一个我不熟悉的软件，但它看起来带有 GCC（编译器）、shell 和其他一些组件。可能你只需要先安装它，放入它提供的 shell，然后从那里运行这些命令。

# python - 在与 unittest 子类无关的 Nose 中运行单个测试功能

> ID：15282503
> 
> 赞同：1
> 
> 时间：2013-03-07T21:53:56.927
> 
> 标签：python, nose

`nose`发现以 开头的测试`test_`，以及 的子类`unittest.TestCase`。

如果希望运行单个`TestCase`测试，例如：

```
# file tests.py
class T(unittest.TestCase):
    def test_something():
        1/0 
```

这可以在命令行上完成：

```
nosetests tests:T.test_something 
```

有时我更喜欢编写一个简单的函数并跳过所有`unittest`样板：

```
def test_something_else():
    assert False 
```

`nose`在这种情况下，当它运行我所有的测试时，它仍然会运行。但是我怎么能告诉`nose`使用（Unix）命令行只运行那个测试呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:38:12.543

那将是：

```
nosetests tests:test_something_else 
```

另一个技巧是使用属性

```
from nose.plugins.attrib import attr

@attr('now')
def test_something_else():
    pass 
```

要运行带有该属性标记的所有测试，请执行：

```
nosetests -a now 
```

相反，避免运行这些测试：

```
nosetests -a !now 
```

# objective-c - ivar 布局字符串格式

> ID：15282506
> 
> 赞同：0
> 
> 时间：2013-03-07T21:54:03.210
> 
> 标签：objective-c, objective-c-runtime, ivar

一个类的 ivar 布局被定义为一个`class_ro_t`struct`uint8_t`数组字段（看看[http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-runtime-new.h](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/objc-runtime-new.h)）。那么，如何解读呢？存储在其中的数据的格式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:06:56.433

这是用于打印 Objective-C 2 元数据结构的 Apple 代码：[http](http://www.opensource.apple.com/source/cctools/cctools-782/otool/print_objc2_32bit.c?txt) ://www.opensource.apple.com/source/cctools/cctools-782/otool/print_objc2_32bit.c?txt 。

# linux - 如何更改 rvm 安装位置？

> ID：15282509
> 
> 赞同：26
> 
> 时间：2013-03-07T21:54:08.100
> 
> 标签：linux, rvm

目前我已经安装了 rvm`/home/john/.rvm`

如何将 rvm 移动到该位置`/opt/local/rvm`？

我尝试使用 rvmrc 文件来解决这个问题（根据此处的 rvm 文档：[https](https://rvm.io/workflow/rvmrc/) ://rvm.io/workflow/rvmrc/ ）但没有运气，我在`rvmrc`下面找到了一个文件`/etc/`

有没有我可以遵循的分步说明？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-08T20:25:04.623

通过在线进行一些研究来弄清楚自己，希望这可以帮助某人：

假设你想从 移动`home/username/.rvm`到`/opt/local/rvm`

1.  更新您`.bash_profile`或`.bashrc`：

    > ```
    > if [ -s "$HOME/.rvmrc" ]; then
    >     source "$HOME/.rvmrc"
    > fi # to have $rvm_path defined if set
    > if [ -s "${rvm_path-$HOME/.rvm}/scripts/rvm" ]; then
    >     source "${rvm_path-$HOME/.rvm}/scripts/rvm"
    > fi 
    > ```

2.  找到你的`.rvmrc`under `$HOME/.rvmrc`，如果没有找到，创建一个并将这一行放入其中：

    `export rvm_path=/opt/local/rvm`

3.  将您的文件移动到新位置：`mv $HOME/.rvm/* /opt/local/rvm`
4.  执行`rvm repair all`和`rvm reload`

你很高兴去！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-01-08T14:09:32.133

你可以做

```
curl -sSL https://get.rvm.io | bash -s -- --path /path/you/want/rvm/installed/to 
```

# android - 如何配置 ant 构建以在我的 Android 项目中包含共享库？

> ID：15282512
> 
> 赞同：1
> 
> 时间：2013-03-07T21:54:24.763
> 
> 标签：android, ant

我的项目引用了一个共享库。我在清单文件中声明了这一点，如下所示：

```
<uses-library android:name="com.myapp.mysharedlib"/> 
```

在我的 .classpath 文件中，我引用了 lib 的位置：

在 Eclipse 中，我调整我的构建路径以适应，并且我不导出文件。但是，运行以下失败：

```
ant debug 
```

构建中断了我对 mysharedlib 的引用。

我的问题是，如何在不将共享库合并到我的项目中（即复制到库中）的情况下使用 ant 进行编译？

# java - 如果 Andengine 项目的源代码适用于 Android，我如何将其作为 Java 应用程序运行？

> ID：15282516
> 
> 赞同：0
> 
> 时间：2013-03-07T21:54:47.140
> 
> 标签：java, android, andengine

我正在尝试让 sketchytruck 示例在 Java 中工作。它在[这里](http://www.google.com/url?sa=t&rct=j&q=sketchytruck%20andengine&source=web&cd=3&ved=0CD8QFjAC&url=https%3A%2F%2Fgithub.com%2Fsebnil%2FSketchy-Truck%2Ftree%2Fmaster%2Fandengine&ei=lwU5UdDrGYzU0gHm9YGwBA&usg=AFQjCNFtmtAxpZG8TVq_gB0ia_XwGzdgWg&bvm=bv.43287494,d.dmQ)找到。在有人给我“你看起来不够努力”之前，我有。我试过[这个](https://stackoverflow.com/questions/2569315/convert-android-project-to-regular-java-project-inside-eclipse)，我按照指示做了所有事情，但现在我收到一个错误，说选择不包含主要类型。我创建了一个主要类型

```
package se.treplex.sketchytruck;

import com.badlogic.gdx.backends.lwjgl.LwjglApplication;
import se.treplex.sketchytruck.GameActivity;

public class SketchyDesktop {

public static void main(String[] args) {
    new LwjglApplication(new GameActivity(), "SketchyTruck", 320, 480, false);
    }
} 
```

然后它说 LwjglApplication 无法解析为类型。所以我尝试修复没有做任何事情的项目设置。我注意到 GameActivity 扩展了 LayoutGameActivity 并且我花了大约 3 个小时在谷歌上搜索作为 Java 应用程序运行但没有运气的引擎源。所以我的问题是我主要使用什么来让它作为 Java 应用程序工作？如果没有，那么你如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:04:02.717

AndEngine 有一些（次要的）Android 依赖项。（日志记录、活动子类、GLSurfaceView 子类……）。如果不进行更改，它将仅在 Android（和 BlackBerry 10）上运行。

# javascript - 请求 shopify cart.json 停止工作并出现错误 330

> ID：15282519
> 
> 赞同：0
> 
> 时间：2013-03-07T21:55:05.880
> 
> 标签：javascript, jquery, shopify

我使用 jQuery 从 Shopify 获取购物车数据内容并将其显示在另一个站点上。它刚刚停止工作。Google Chrome 显示请求“失败”，当我在另一个选项卡中打开此请求时，Google 显示：

```
Error 330 (net::ERR_CONTENT_DECODING_FAILED): Unknown error. 
```

当我用谷歌搜索这条消息时，我只收到报告说它与压缩有关。由于 Shopify 是托管的网上商店，因此调试起来有点困难。

我使用这种方法来获取购物车内容：

```
Shopify.getCart = function(callback) {
  console.log("getCart")
  jQuery.ajax({url: 'http://shop-here/cart.json', dataType: 'jsonp', cache: false, success:
    function(cart){
      console.log("response: " + callback)
      console.log(cart)
      if (callback !== undefined && (typeof callback) === 'function') {
        callback(cart);
      }
      else {
        Shopify.onCartUpdate(cart);
      }
    }
  });
}; 
```

出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:16:27.237

Shopify 解决了这个问题。如错误消息所示，这是 Shopify 服务器上的错误。

# python - 在python中，如何临时从文件中提取信息，并使用该信息来操作同一个文件

> ID：15282521
> 
> 赞同：0
> 
> 时间：2013-03-07T21:55:21.237
> 
> 标签：python, bioinformatics, biopython

所以我最近经常遇到这个问题。假设我有一个文本文件，我需要从中读取文件，将一些值存储在列表中。接下来，我想使用该列表中的信息来编辑另一个文件。
我一直在打开文件，将变量存储在列表中，关闭文件。再次打开文件，运行实际分析并再次关闭文件。
我在想可能有更好的方法来解决这个问题。我在下面包含了一个示例...

与往常一样，我将不胜感激任何帮助/建议！

我有这个文件：

```
>sctg_0002_0001  length=2745
TCCCCCTCCCGTACCGGTTTGCGCTATTATACCGGCCTTGAATCGAGCAAAGGCTCCAAACAATTTCATTACAAACAGATTGGGGATGTATGACGTGGCT
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
TTGACACGCTTGTTTCTGATGTCATCACCCATGAAGAGCTGTTATTTGGCCACCTGGCGTTCCTGCCTAAGCGTTGAGTGAATATTAAACACCTCTGCCC
>sctg_0003_0001  length=2175
CAACAACCACTCTTAGCGCTGCTTGCCGCTGCCGATACCGAACGGGATGCGGTAGTCGCTGCTCTGCTCACCCAGACTCACGGTCAGGTTGCCCTGAGTA
NNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
... 
```

当我运行这个脚本

```
from Bio import SeqIO
out=open("out.txt","a")
ID=[]
for record in SeqIO.parse("input.fas","fasta"):
    ID.append("_".join(str(record.id).rsplit("_")[1:])) #get the part following the ">"

n=1
for record in SeqIO.parse("input.fas","fasta"):
    if n==len(ID):
        #print >>out, n
        print >>out, "SEQUENCE_ID="+record.id+"e_"+ID[0]+"b"
        print >>out, "SEQUENCE_TEMPLATE ="+record.seq
        print >>out, "="
        n=n+1
        break
    else:
        #print >>out, n
        print >>out, "SEQUENCE_ID="+record.id+"e_"+ID[n]+"b"
        print >>out, "SEQUENCE_TEMPLATE ="+record.seq
        print >>out, "="
        n=n+1
out.close() 
```

我得到了预期的输出，但是我认为可能有更好的方法来解决它

```
SEQUENCE_ID=sctg_0002_0001e_0003_0001b
SEQUENCE_TEMPLATE =TCCCCCTCCCGTACCGGTTTGCGCTATTATACCGGCCTTGAATCGAGCAAAGGCTCCAAACAATTTCATTACAAACAGATTGGGGATGTATGACGTGGCTNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNTTGACACGCTTGTTTCTGATGTCATCACCCATGAAGAGCTGTTATTTGGCCACCTGGCGTTCCTGCCTAAGCGTTGAGTGAATATTAAACACCTCTGCCC
=
SEQUENCE_ID=sctg_0003_0001e_0004_0001b
SEQUENCE_TEMPLATE =CAACAACCACTCTTAGCGCTGCTTGCCGCTGCCGATACCGAACGGGATGCGGTAGTCGCTGCTCTGCTCACCCAGACTCACGGTCAGGTTGCCCTGAGTANNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
=
SEQUENCE_ID=sctg_0004_0001e_0005_0001b
SEQUENCE_TEMPLATE =CAACAACCACTCTTAGCGCTGCTTGCCGCTGCCGATACCGAACGGGATGCGGTAGTCGCTGCTCTGCTCACCCAGACTCACGGTCAGGTTGCCCTGAGTANNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
=
SEQUENCE_ID=sctg_0005_0001e_0002_0001b
SEQUENCE_TEMPLATE =CAACAACCACTCTTAGCGCTGCTTGCCGCTGCCGATACCGAACGGGATGCGGTAGTCGCTGCTCTGCTCACCCAGACTCACGGTCAGGTTGCCCTGAGTANNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNNN
= 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:14:32.423

您可以在一个循环中完成所有处理并避免使用 list `ID`。我认为它更清洁：

```
from Bio import SeqIO
out = open("out.txt", "a")
records = list(SeqIO.parse("input.fas","fasta"))
previous = records[-1]
for record in records:
    id = "_".join(str(record.id).rsplit("_")[1:])
    out.write("SEQUENCE_ID=" + previous.id + "e_" + id + "b\n")
    out.write("SEQUENCE_TEMPLATE =%s\n=\n" % previous.seq)
    previous = record
out.close() 
```

# oauth-2.0 - 无法刷新 Reddit OAuth 2.0 访问令牌

> ID：15282524
> 
> 赞同：9
> 
> 时间：2013-03-07T21:55:23.987
> 
> 标签：oauth-2.0, reddit

我无法刷新 Reddit 访问令牌。

当我发送以下请求时`https://ssl.reddit.com/api/v1/access_token`

```
Content-Type: application/x-www-form-urlencoded
Authorization: #####
client_secret=#####&grant_type=refresh_token&client_id=#####&refresh_token=##### 
```

我得到状态`200`，但内容是`{"error": "invalid_request"}`。

根据[OAuth 2.0 规范](https://www.rfc-editor.org/rfc/rfc6749#section-6)和[Reddit 规范](http://www.reddit.com/r/changelog/comments/11jab9/reddit_change_permanent_oauth_grants_using/)，我做的一切都是正确的。

我也尝试过没有`client_id`和`client_secret`相同的结果。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T06:49:52.313

Reddit 的 OAuth 实现非常独特（而且不是很好）。

在 reddit 上刷新令牌的必要参数是：

1.  client_id
2.  client_secret
3.  grant_type (=refresh_token)
4.  刷新令牌
5.  [范围](https://github.com/reddit/reddit/wiki/OAuth2#authorization-parameters)
6.  [状态](https://github.com/reddit/reddit/wiki/OAuth2#authorization-parameters)
7.  [期间](https://github.com/reddit/reddit/wiki/OAuth2#authorization-parameters)
8.  **重定向uri**

您还需要使用*client_id*作为登录名和*client_secret*作为密码的基本 HTTP 身份验证标头。

我不得不查看 reddit 的[源代码](https://github.com/reddit/reddit/blob/master/r2/r2/controllers/oauth2.py#L170)，以找出我的请求中缺少什么……在琐碎的事情上浪费了太多的开发时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-07T00:42:52.170

如果有人正在寻找更明确的答案：

这是我在 PHP 中的做法。

```
 $authorizeUrl = 'https://ssl.reddit.com/api/v1/access_token';
    $clientId = "YOUR_CLIENT_ID";
    $clientSecret = "YOUR_CLIENT_SECRET";

    $post = array(
        "client_id" => $clientId,
        "client_secret" => $clientSecret,
        "grant_type" => "refresh_token",
        "refresh_token" => "STORED_REFRESH_TOKEN_VALUE",
        "scope" => "identity",
        "state" => "WHATEVER_VALUE",
        "duration" => "temporary",          
        "redirect_uri" => "https://example.com/reddit",
    );

    $payload = http_build_query($post);

    $ch = curl_init($authorizeUrl);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/x-www-form-urlencoded'));
    curl_setopt($ch, CURLOPT_HEADER, 1);
    curl_setopt($ch, CURLOPT_USERPWD, $clientId . ":" . $clientSecret);
    curl_setopt($ch, CURLOPT_TIMEOUT, 30);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $payload);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE);
    $result = curl_exec($ch);
    curl_close($ch);        

    print_r($result); 
```

# windows - Windows 7 VBScript 按标题选择窗口

> ID：15282525
> 
> 赞同：0
> 
> 时间：2013-03-07T21:55:29.993
> 
> 标签：windows, windows-7, vbscript

因此，以下代码似乎适用于 Windows XP，但不适用于 Windows 7：

```
Dim objFileSys

Set objFileSys = CreateObject("Scripting.FileSystemObject")

If objShell.AppActivate("Query Express") Then 
Else
    objShell.run chr(34) & "I:\SQL-Queries\QueryExpress\QueryExpress.exe" & chr(34),1,False
End If 
```

基本上，它会检查窗口是否已经打开。如果它没有打开，它会打开它。

很简单吧？好吧，这段代码不能像 Windows 7 中的脚本那样工作。有人能告诉我如何更新它才能工作吗？

谢谢！

# ruby-on-rails - Capistrano 部署使用乘客不更改版本

> ID：15282532
> 
> 赞同：1
> 
> 时间：2013-03-07T21:55:47.033
> 
> 标签：ruby-on-rails, capistrano, passenger

我有一个使用虚拟 Ubuntu 服务器、Apache、Passenger 和 Capistrano 的 Rails 应用程序。

我第一次使用 Capistrano 部署应用程序时，我已将 Passenger 设置为选择第一个版本，并在 httpd.conf 文件中使用以下代码：

```
<VirtualHost *:80>
  ServerName ndeavor.ameipro.com
  DocumentRoot /opt/bitnami/projects/ndeavor/releases/20130306192753/public
 <Directory /opt/bitnami/projects/ndeavor/releases/20130306192753/public>
   Allow from all
   Options -MultiViews
 </Directory>
</VirtualHost> 
```

这开始了我的 Rails 应用程序的正确第一个版本。

现在，当我 Cap Deploy 时，我希望 Capistrano 自动让Passenger 启动新版本。

所以，我在 deploy.rb 中取消了这些行的注释

```
# If you are using Passenger mod_rails uncomment this:
  namespace :deploy do
  task :start do ; end
  task :stop do ; end
  task :restart, :roles => :app, :except => { :no_release => true } do
   run "#{try_sudo} touch #{File.join(current_path,'tmp','restart.txt')}"
  end
 end 
```

新版本未启动。我应该从 https.conf 文件中删除 VirtualHost 条目吗？我错过了一些步骤吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:17:04.027

使用 Capistrano 进行部署时，您的发布目录中有一个名为 current 的符号链接。您的文档根目录应指向位于`myapp/releases/current/public`. 然后，Capistrano 更新每次部署的符号链接以指向最新版本。

# php - 如何更新使用 phar.cache_list 指令缓存的 phar？

> ID：15282534
> 
> 赞同：5
> 
> 时间：2013-03-07T21:56:06.750
> 
> 标签：php, apache, phar

我将我的 phar 添加到了[cache_list](http://www.php.net/manual/en/phar.configuration.php#ini.phar.cache-list)指令中，`php.ini`并且缓存效果很好。几天后我更新了 phar 现在我收到以下错误：

```
Warning: Phar::webPhar(phar:///usr/share/app/app.phar/www.php): failed to open
stream: phar error: internal corruption of phar "/usr/share/app/app.phar"
(crc32 mismatch on file "www.php") in /usr/share/app/app.phar on line 8 
```

如果我注释掉该`cache_list`指令，phar 可以正常工作并加载，但现在我无法再缓存它。这让我觉得 PHP 正在查看`crc32`旧文件。

我已经尝试重新启动 apache 我不知道如何“刷新”缓存，或者这是否是问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-19T12:50:38.500

我建议删除或重命名您的旧 app.phar 文件。系统应该在您下次加载时重新生成一个新的。如果出现相同的错误，您将遇到以下两个问题之一：

*   您缓存的 phars 的路径之一是错误的，导致整个列表失败。
*   您正在缓存的 phar 之一没有元数据，导致它失败。

第二个的一个很好的测试是添加一段垃圾元数据（也就是说，如果你还没有使用元数据）。[phar::setMetadata()](http://www.php.net/manual/en/phardata.setmetadata.php)

像往常一样，检查所有路径。

如果不能很好地了解您正在运行的代码或更改了什么，我真的无法提出任何进一步的建议。

# objective-c - 更改 ImageBrowserCell 突出显示尺寸

> ID：15282539
> 
> 赞同：0
> 
> 时间：2013-03-07T21:56:25.103
> 
> 标签：objective-c, ikimagebrowserview, ikimagebrowsercell

我想调整标准高`IKImageBrowserCell`光尺寸。[我在这里](http://foo.com)发现了关于 stackoverflow 的类似问题（在链接中您可以看到标准`IKImageBrowserCell`选择突出显示）。

我发现了一些完全自定义的苹果示例代码`IKImageBrowserCell`以及突出显示维度。这些是设置框架的两个重写方法

```
- (NSRect) imageFrame
{
//  //get default imageFrame and aspect ratio
    NSRect imageFrame = [super imageFrame];

    if(imageFrame.size.height == 0 || imageFrame.size.width == 0) return NSZeroRect;

    float aspectRatio =  imageFrame.size.width / imageFrame.size.height;

    // compute the rectangle included in container with a margin of at least 10 pixel at the bottom, 5 pixel at the top and keep a correct  aspect ratio
    NSRect container = [self imageContainerFrame];
    container = NSInsetRect(container, 8, 8);

    if(container.size.height <= 0) return NSZeroRect;

    float containerAspectRatio = container.size.width / container.size.height;

    if(containerAspectRatio > aspectRatio){
        imageFrame.size.height = container.size.height;
        imageFrame.origin.y = container.origin.y;
        imageFrame.size.width = imageFrame.size.height * aspectRatio;
        imageFrame.origin.x = container.origin.x + (container.size.width - imageFrame.size.width)*0.5;
    }
    else{
        imageFrame.size.width = container.size.width;
        imageFrame.origin.x = container.origin.x;       
        imageFrame.size.height = imageFrame.size.width / aspectRatio;
        imageFrame.origin.y = container.origin.y + container.size.height - imageFrame.size.height;
    }

    //round it
    imageFrame.origin.x = floorf(imageFrame.origin.x);
    imageFrame.origin.y = floorf(imageFrame.origin.y);
    imageFrame.size.width = ceilf(imageFrame.size.width);
    imageFrame.size.height = ceilf(imageFrame.size.height);

    return imageFrame;
}

//---------------------------------------------------------------------------------
// imageContainerFrame
//
// override the default image container frame
//---------------------------------------------------------------------------------
- (NSRect) imageContainerFrame
{
    NSRect container = [super frame];

    //make the image container 15 pixels up
    container.origin.y += 15;
    container.size.height -= 15;

    return container;
} 
```

这是生成选择突出显示的代码

```
/* selection layer */
if(type == IKImageBrowserCellSelectionLayer){

    //create a selection layer
    CALayer *selectionLayer = [CALayer layer];

    selectionLayer.frame = CGRectMake(0, 0, frame.size.height, frame.size.height);

    float fillComponents[4] = {1.0, 0, 0.5, 0.3};
    float strokeComponents[4] = {1.0, 0.0, 0.5, 1};

    //set a background color
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    color = CGColorCreate(colorSpace, fillComponents);
    [selectionLayer setBackgroundColor:color];
    CFRelease(color);

    //set a border color
    color = CGColorCreate(colorSpace, strokeComponents);
    [selectionLayer setBorderColor:color];
    CFRelease(color);

    [selectionLayer setBorderWidth:2.0];
    [selectionLayer setCornerRadius:5];

    return selectionLayer;
} 
```

这是该代码的结果：

![在此处输入图像描述](../Images/091b8789bef560fa0a79473fe4074735.png)

如您所见，选择的框架已更改，但我无法以我不希望的方式对其进行修改。我只是想让高光与图像缩略图的大小相同。我试图修改选择代码 ( `selectionLayer.frame = CGRectMake(0, 0, frame.size.height, frame.size.height);`) 但没有任何反应。任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T18:57:43.943

要自定义您的选择框布局，您必须覆盖`-[IKImageBrowserCell selectionFrame]`

* * *

如果您想要自定义IKImageBrowserCell的**布局**，以下是您可能想要覆盖的方法。

```
- (NSRect) imageContainerFrame; 
- (NSRect) imageFrame; 
- (NSRect) selectionFrame;
- (NSRect) titleFrame;
- (NSRect) subtitleFrame;   
- (NSImageAlignment) imageAlignment; 
```

如果您想自定义IKImageBrowserCell的**外观**，以下是您可能想要覆盖的方法

```
- (CGFloat) opacity;
- (CALayer *) layerForType:(NSString *) type; 
```

# ruby-on-rails - Rails 无限循环 - 堆栈级别太深

> ID：15282552
> 
> 赞同：1
> 
> 时间：2013-03-07T21:57:11.793
> 
> 标签：ruby-on-rails, ruby

我遇到了`stack level too deep`一个无限循环，但我不知道为什么，所以我希望其他人能发现它。

我的游戏模型中有这个方法：

```
def self.record_win_or_tie(game_id)
  game = Game.find(game_id)

  if game.home_team_score > game.away_team_score 
    game.home_team_won = true
    game.save
  end

end 
```

当我从控制台为条件为真的游戏运行它时（即game.home_team_score 大于game.away_team_score），如果一遍又一遍地运行相同的查询。

```
SELECT `games`.* FROM `games` WHERE `games`.`id` = 1 LIMIT 1 
```

如果我为条件为假的 game_id 运行代码，则查找游戏的查询只发生一次，并且没有无限循环。

*** 更新 ***

我发现问题在于我从我的 GameObserver 调用该方法：

```
class GameObserver < ActiveRecord::Observer
  def after_save(game)
    Game.record_win_or_tie(game.id)
  end
end 
```

但是，我不知道如何调整我的代码。要求是自动更新`game.home_team_won`或`game.away_team_won`在某人更新`game.home_team_score`或之后自动更新`game.away_team_score`。

看来我不能使用观察者来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:15:52.280

使用实例变量来确保它只保存一次。但是，因为这是一个类方法，所以它不是线程安全的。而是将此作为实例方法，如下所示：

```
def record_win_or_tie
  return if @inside_callback
  @inside_callback = true

  if home_team_score > away_team_score 
    update_attributes(:home_team_won => true)
  end      
end 
```

现在你可以让你的观察者像这样触发 instance_method：

```
class GameObserver < ActiveRecord::Observer
  observe :game

  def after_save(game)
    game.record_win_or_tie
  end
end 
```

请注意，如果您在`before_save`回调中执行此逻辑（而不实际保存在回调中）而不是`after_save`：

```
class Game < ActiveRecord::Base
  def record_win_or_tie
    self.home_team_won = true if home_team_score > away_team_score 
  end
end

class GameObserver < ActiveRecord::Observer
  observe :game

  def before_save(game)
    game.record_win_or_tie
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T22:13:02.973

会不会是你定义了一个 after_save 回调来再次调用 Game.record_win_or_tie？这将解释无限递归。

否则我们需要查看整个游戏模型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:44:29.993

```
class Game < ActiveRecord::Base
  # def self.record_win_or_tie(game_id) # deprecated
end

class GameObserver < ActiveRecord::Observer
  def after_save(game)
    if (game.home_team_score > game.away_team_score) && game.home_team_won != true
      game.home_team_won = true
      game.save
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T23:59:03.247

如果由于某种原因它必须在 after_save 中，而不是保存当前实例并触发后保存，或者添加虚假实例变量，请直接在 db 上调用 update。

```
if game.home_team_score > game.away_team_direct
  Game.update_all({:home_team_won => true}, :id => id)
end
# Check the syntax, as I wrote it off the top of my head 
```

但就个人而言，如果可能的话，我会将其移至另一个答案中提到的 before_save 。

# java - Android Java：如何让你的应用记住答案

> ID：15282554
> 
> 赞同：0
> 
> 时间：2013-03-07T21:57:20.453
> 
> 标签：java, android, xml, database

我正在我的android手机上制作一个测验应用程序，我现在很长一段时间都在努力解决一个问题，因为我不知道如何继续。我的测验应用程序的目标是让用户听声音并猜出它的名字。因此，您必须在文本框中输入您的答案。如果您输入错误的答案，您可以再试一次。如果您输入正确答案，应用程序必须记住您输入了正确答案。因此，如果您完成了一个问题并且稍后将返回该问题页面，您将看到您输入的正确答案。

我的应用程序可以检查您输入的答案，但我的问题是您是否必须创建一个完整的数据库才能让应用程序记住您的答案？这可能在应用程序上吗？

我希望有人可以帮助我解决我的问题，因为我对java和制作应用程序不太熟悉......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:01:04.527

您可以轻松地为此使用 SharedPreferences。

只需保存一个布尔值即可将问题标记为已回答。例子：

```
SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context);
preferences.edit().putBoolean("Question_ID", true).commit(); 
```

[http://developer.android.com/reference/android/content/SharedPreferences.Editor.html](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:01:18.353

您可以在 Android 上使用以下存储选项：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

如果你有大量的测验问题，那么毫无疑问你应该使用 SQLite。

但是，如果您的问题数量较少，那么将数据作为 CSV 存储到文件中或使用 SharedPreferences 可能是让您开始使用功能性应用程序的最小可行解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:00:52.023

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

您可以使用简单文件、共享首选项或数据库。阅读上面链接的页面。它有你需要的一切，包括示例代码和很好的解释。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:44:01.700

如果你的问题是有序的——即使你是随机呈现它们，它们也应该是有序的，因为你在应用启动时从某个流中读取它们或将它们放在某个数组中——那么用户的答案可以采用相同的顺序，并且你的程序的问题“用户做对了吗？” （以及测验软件可能会问到的许多其他有用的问题）的回答很简单：这是什么#问题，内部？哦，是 42。那么 userGotItRight[42] 是真是假？

userGotItRight[] 是一个布尔数组，您可以毫不费力地将其保存在单个 SharedPreference 中。

您不需要 SQL。您肯定不需要 1:1 的问题映射到 SharedPreference 键。随着程序的发展，您可以存储演变的可序列化对象数组而不是布尔数组，或者您可能对每个问题库都有偏好。

# deployment - VSTO Outlook 加载项引用外部库失败

> ID：15282565
> 
> 赞同：0
> 
> 时间：2013-03-07T21:58:11.193
> 
> 标签：deployment, outlook, vsto, add-in

我正在开发适用于 Outlook 的 VSTO 插件，版本 2007-2013，最低 .Net 版本为 4.0。在我的项目中，我有几个引用的库。当我通过 MSI（通过 Wix 构建）部署加载项时，加载项本身会加载到 Outlook 中，但是引用的库不可用。

它在我的开发机器上运行良好，所以我假设这是某种信任问题。我不确定需要做什么才能使包含的库本身受到信任。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:28:03.860

您是否使用 VS 安装项目进行插件部署？如果是这样，您可能想尝试

`Right-click setup project icon => Add => Assembly...`

添加您的外部库。

关于信任问题，请看MSDN上的这些[文章](http://msdn.microsoft.com/en-us/library/bb772086.aspx)。[包含列表](http://msdn.microsoft.com/en-us/library/bb608607.aspx)也可能对您的情况有所帮助。

此外，要在您的开发机器上测试部署，我建议您先清理您的项目/解决方案

`Right-click Project/Solution icon in Solution Explorer => Clean`

然后将您的插件部署并安装到您的机器上。

# java - 如何为 jar 定义 ivy 配置仅用于编译而不是运行时

> ID：15282568
> 
> 赞同：0
> 
> 时间：2013-03-07T21:58:17.567
> 
> 标签：java, ivy

我在将我的应用程序部署到已经包含 servlet-api 的 tomcat 容器上时遇到了一个问题，并且我的应用程序也依赖于 servlet-api，因为它们发生了不同的冲突。

是否可以为我的应用程序定义常春藤，仅在编译期间而不是运行时包含 servlet-api。

怎么做。

依赖 org="java" name="servlet-api" rev="default" conf="compile"

将 conf 作为编译传递失败 ivy 验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T23:33:33.950

听起来像是功能上类似于 Maven“提供”范围的依赖项。

我的建议是创建一个额外的配置和映射，例如：

```
<configurations>
  <conf name="compile" description="Compile dependencies"/>
  <conf name="runtime" description="Runtime dependencies" extends="compile"/>
  <conf name="provided" description="Provided dependencies"/>
</configurations>

<dependencies>
  <dependency .. conf="compile->default"/>
  <dependency .. conf="runtime->default"/>
  <dependency .. conf="provided->default"/>
</dependencies> 
```

在您的构建文件中，用于编译的类路径可以包含额外的依赖项，如下所示：

```
<ivy:cachepath pathid="compile.path" conf="compile,provided"/> 
```

# javascript - 如何在 jQuery .each() 函数中使变量可访问？

> ID：15282569
> 
> 赞同：4
> 
> 时间：2013-03-07T21:58:27.483
> 
> 标签：javascript, jquery, scope, closures

这是一个常见困境的例子：如何在`markup`this 中访问`.each()`？

我对学习如何从闭包中访问外部变量比对这个特定问题更感兴趣。我可以通过从每个函数内部分配来解决这个问题`markup`，但我宁愿学习一种更优雅的方式来处理这类问题。

```
// hide form & display markup
function assessmentResults(){

  // get assessment responses
  var markup = parseForm();

  // show assessment results to user
  $('#cps-assess-form fieldset').each( function() {
    var q = $(this).find('.fieldset-wrapper');
    var i = 0;

    // hide form questions
    q.slideUp();

    // insert markup
    $('<div>'+markup[i]+'</div>').insertAfter(q);
    i++;
  });

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:01:31.567

阅读[文档](http://api.jquery.com/each/)，它已经有一个索引！

```
.each( function(index, Element) ) 
```

不需要`i`

```
$('#cps-assess-form fieldset').each( function(index) {
    var q = $(this).find('.fieldset-wrapper').slideUp();
    $('<div/>').html(markup[index]).insertAfter(q);
}); 
```

你失败的原因是`i`函数内部，所以每次迭代都会重置它。您需要将其移到函数之外才能正常工作。

# ruby - 根据长度获取数组元素

> ID：15282571
> 
> 赞同：1
> 
> 时间：2013-03-07T21:58:32.567
> 
> 标签：ruby, arrays, string

假设我有一个数组，其中包含两个字母单词，一直到十五个字母单词。如何从数组中只得到三个字母的单词？

```
a = ['aa', 'ab', 'ad', ... , 'zoogeographical']
b = []
a.each do |x|
    if x.length = 3
        b.push(x)
    end
end 
```

似乎会有更简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:00:41.713

我认为该`select`方法是您正在寻找的方法：

```
 a.select {|string| string.length == 3 } 
```

# r - 从表格数据生成有用的图表 - 'r' 初学者

> ID：15282573
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:58:39.457
> 
> 标签：r

这是我正在阅读的书中的图表：

![在此处输入图像描述](../Images/c2183e305d0375c2609df31608d67392.png)

我正在尝试使用 R 绘制此表格数据。

这是我到目前为止所拥有的：

```
a <- c(1000 , 5 , 1050 , 1050 , -2 , 1029 , 1029 , 4 , 1070 , 1070 , -3 , 
1038 , 1038 , 2 , 1059 , 1059 , 4 , 1101)
matrix(a , 3 , 6) 
```

此代码返回：

```
 [,1] [,2] [,3] [,4] [,5] [,6]
[1,] 1000 1050 1029 1070 1038 1059
[2,]    5   -2    4   -3    2    4
[3,] 1050 1029 1070 1038 1059 1101 
```

当我尝试使用以下方法绘制此数据时：

```
> plot(matrix(a , 3 , 6)) 
```

这是结果：

![在此处输入图像描述](../Images/89f654498b5475c7599011689378f75a.png)

这个图不是很有用，我是“R”的新手。有没有可以使用 'R' 生成的更有趣的图表？如何对此进行修改，以便绘制两条线，“Y”轴上的“ETF A”列和“X”轴上的“回报（增加或减少百分比）、“余额、年终”行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:42:06.913

这个怎么样：

```
a <- c(1000 , 5 , 1050 , 1050 , -2 , 1029 , 1029 , 4 , 1070 , 1070 , -3 , 
     1038 , 1038 , 2 , 1059 , 1059 , 4 , 1101)
x <- matrix(a , 3 , 6)

# make it a data.frame :)
z <- data.frame(b = c(x[1, ], x[3, ]), year = c(rep(0, 6), rep(1, 6)))

# make a mysterious plot
plot(z[, 2], z[, 1]) + segments(x0=z[1:6, 2], y0=z[1:6, 1], x1=z[7:12, 2], y1=z[7:12, 1]) 
```

![在此处输入图像描述](../Images/70edefc292c932fe2f007b2917fc2ea6.png)

可以进行编辑以更改 x 和 y 实验室、标题等。在控制台中键入 ?par 以查看许多选项。斜率与您的百分比增加/减少密切相关。:)

# php - PHP preg_split 分隔符模式，在字符链处拆分

> ID：15282574
> 
> 赞同：0
> 
> 时间：2013-03-07T21:58:47.337
> 
> 标签：php, design-patterns, delimiter, preg-split

使用以下字符串：

```
$str = '["one","two"],a,["three","four"],a,,a,["five","six"]';

preg_split( delimiter pattern, $str ); 
```

我将如何设置**分隔符模式**才能获得此结果：

```
$arr[0] = '["one","two"]';
$arr[1] = '["three","four"]';
$arr[2] = '["five","six"]'; 
```

换句话说，有没有办法在模式 ',a,' AND ',a,,a,' 但首先检查 ',a,,a,' 进行拆分，因为 ',a,' 是'，一个，，一个，'？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:04:19.420

看起来您实际上想要做的是将方括号中的部分分开。你可以这样做：

```
$arr = preg_split("/(?<=\])[^[]*(?=\[)/",$str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:07:27.813

如果它只能是`,a,`and `,a,,a,`，那么这就足够了：

```
preg_split("/(,a,)+/", $str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:03:38.593

如果您只想要括号之间的内容，我认为您应该使用 preg_match 而不是 preg_split

1.  [使用正则表达式提取括号中的内容](https://stackoverflow.com/questions/5449173/extract-whatever-is-in-brackets-using-regular-expressions)
2.  [php preg_split() 查找两个单词之间的文本](https://stackoverflow.com/questions/4988474/php-preg-split-to-find-text-inbetween-two-words)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:03:58.333

看看这段代码：

```
$result = array();

preg_match_all("/(\[[^\]]*\])/", '["one","two"],a,["three","four"],a,,a,["five","six"]', $result);

echo '<pre>' . print_r($result, true); 
```

它将返回：

```
Array
(
    [0] => Array
        (
            [0] => ["one","two"]
            [1] => ["three","four"]
            [2] => ["five","six"]
        )

    [1] => Array
        (
            [0] => ["one","two"]
            [1] => ["three","four"]
            [2] => ["five","six"]
        )
) 
```

# asp.net-mvc-3 - 为什么我的 textBoxFor 使用我的路线数据？

> ID：15282577
> 
> 赞同：5
> 
> 时间：2013-03-07T21:58:54.080
> 
> 标签：asp.net-mvc-3

所以我有这三行：

```
<div style="background-color: lightgreen;">@Html.TextBoxFor(m => m.Id)</div>
<div style="background-color: green;">@Html.DisplayTextFor(m => m.Id)</div>
<div style="background-color: pink;">@Model.Id</div> 
```

我已经确定浅绿色值不是我的 Model.Id 而是由我的路线设置的 Id：

```
routes.MapRoute("Default", "{controller}/{action}/{id}", new { controller = "MyFunController", action = "Index", id = UrlParameter.Optional }); 
```

我在这里遇到了一些解释：

*   [http://forums.asp.net/t/1792086.aspx/1](http://forums.asp.net/t/1792086.aspx/1)
*   [http://www.hanselman.com/blog/TheWeeklySourceCode38ASPNETMVCBetaObscurityModelStateIsValidIsFalseBecauseModelBinderPullsValuesFromRouteData.aspx](http://www.hanselman.com/blog/TheWeeklySourceCode38ASPNETMVCBetaObscurityModelStateIsValidIsFalseBecauseModelBinderPullsValuesFromRouteData.aspx)
*   [http://ayende.com/blog/3683/reproduce-a-bug](http://ayende.com/blog/3683/reproducing-a-bug)

但它们都让我胃口大开。我正在寻找一种聪明的方法来解决这个问题，我不想更改模型的属性名称，也不想更改路由项的名称。如果我这样做，这对我来说将代表很多工作，而且并不理想。

我确定我不是唯一一个有这个问题的人？

（这是 MVC 4）

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T22:10:56.510

`ModelState`您可以在呈现视图的控制器操作中从（Html 助手从中获取它的位置）中删除有问题的值：

```
public ActionResult SomeAction(int id)
{
    ModelState.Remove("Id");
    MyViewModel model = ...
    return View(model);
} 
```

现在它是`Id`您的视图模型的属性，它将被 TextBox 使用，而不是来自路由的属性。

显然，这只是一个丑陋可怕的解决方法。正确的方法当然是正确定义您的视图模型，这样您就不会遇到这种命名冲突。

# android - 访问 xml 布局中当前主题的值

> ID：15282578
> 
> 赞同：0
> 
> 时间：2013-03-07T21:58:54.483
> 
> 标签：android, android-layout, android-theme

我希望特定的 TextView 具有与 Button 相同的字体大小，但它们似乎不同。如果我的 Button 没有设置自定义 textSize，如何从当前主题中获取该值并将其设置为我的 TextView 的 textSize？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:06:27.350

样式应该相当简单。按钮的父级是 android.widget.TextView，因此您可以创建一个将其用作父级的样式并覆盖默认的 textSize。然后让两者都使用这种风格。

# xml - XSLT 翻译：我有一个带有嵌套数据的 XML 文件，我需要将它翻译成一个平面 xml 文件

> ID：15282579
> 
> 赞同：-1
> 
> 时间：2013-03-07T21:58:59.110
> 
> 标签：xml, xslt, xml-parsing

这是我正在使用的...

```
<response code="OK">
      <enrollments>
           <enrollment enddate="9999-12-31T00:00:00Z" startdate="1753-01-01T00:00:00Z" status="1" flags="2228225" guid="a469dd60-8350-4749-8281-7772b6798bcc" reference="MajorMinor.109457483" domainid="616401" entityid="6557156" userid="1554956" id="6557282">
-                <data>
-                   <status>
                        <performance code="2" signal="Red"/><pace signal="Green"/>
                    </status>
                </data>
                <user guid="a992267a-a2ca-4e0c-a8d1-447d0243a4d8" reference="109457483" id="1554956" lastlogindate="1753-01-01T00:00:00Z" email="bak05016@thisone.edu" username="rbaker4" userspace="Thisone" lastname="Baker" firstname="Ryan"/>
                   <domain id="616401" name="This one"/>
-             <grades seconds="0" complete="1" passingscore="0.7" letter="F" possible="100" achieved="45">
-               <items>
                   <item title="" categoryid="1" periodid="0" itemid="DEFAULT"/>
                   <item title="Test 1" categoryid="1" periodid="0" itemid="JECIY"/>
                   <item title="This test will be fun" status="261" letter="F" possible="100" achieved="10" categoryid="1" periodid="0" itemid="7I673" duedate="9999-12-31T23:59:59.9999999Z" scoreddate="2013-03-05T23:31:43.653Z" responseversion="4"/>
                   <item title="Do this homework recieve credit" status="261" letter="B" possible="100" achieved="80" categoryid="1" periodid="0" itemid="39AM7" duedate="9999-12-31T23:59:59.9999999Z" scoreddate="2013-03-07T16:54:08.033Z" responseversion="1"/>
             </items>
-        <categories>
             <category id="1" name="Include" letter="F" possible="200" achieved="90"/><category id="0" name="Exclude" possible="0" achieved="0"/>
         </categories>
     </grades>
   </enrollment>
 </enrollments>
</response code> 
```

因此，我正在使用此代码并使用以下代码运行 XSLT 翻译。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" />

<xsl:template match="/">

<Enrollments xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="results.xsd">
      <xsl:for-each select="response/enrollments/enrollment">
      <Enrollment>
        <FirstName>
          <xsl:value-of select="user/@firstname"/>
        </FirstName>
        <LastName> 
          <xsl:value-of select="user/@lastname"/>
        </LastName>
        <ID>
          <xsl:value-of select="user/@id"/>
        </ID>
        <Email>
          <xsl:value-of select="user/@email"/>
        </Email>
        <Grade>
          <xsl:value-of select="grades/@achieved"/>
        </Grade>
        <Assignments>
          <xsl:value-of select="grades/items/item/@title"/>
            </xsl:for-each>
        </Assignments>
      </Enrollment>
      </xsl:for-each>
    </Enrollments>
</xsl:template>
</xsl:stylesheet> 
```

我的问题是 xslt 中的 assignments 标记返回来自 xml 数据的已知结果。我需要一种方法来让它返回分数等级的信息。在某种程度上，对于每个项目，将在表中创建一个新列，列标题是分配 ex 的名称。“做这个作业获得学分”然后表格的内容就是他们得分的成绩。我正在使用的原始 xml 文档大约有 4000 行，我们需要对其进行翻译，以便以可用的格式将其放入我们的数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T05:46:13.497

Perhaps you are looking for something like this for your XSLT inside the `Assignments` element?

```
<xsl:for-each select="grades/items/item">
  <Assignment>
    <Title><xsl:value-of select="@title"/></Title>
    <Grade><xsl:value-of select="@achieved"/></Grade>
  </Assignment>
</xsl:for-each> 
```

# r - 如何在 R 中生成许多最独特的颜色？

> ID：15282580
> 
> 赞同：168
> 
> 时间：2013-03-07T21:59:01.957
> 
> 标签：r, colors, palette, color-palette, colorbrewer

我正在绘制一个分类数据集，并希望使用独特的颜色来表示不同的类别。给定一个数字`n`，我如何获得`n`R 中最具特色的颜色数量？谢谢。

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2015-10-15T09:31:04.347

`RColorBrewer`我加入了包装中的所有定性调色板。定性调色板应该提供 X 种最独特的颜色。当然，将它们混合到一个调色板中也会产生相似的颜色，但这是我能得到的最好的颜色（74 种颜色）。

```
library(RColorBrewer)
n <- 60
qual_col_pals = brewer.pal.info[brewer.pal.info$category == 'qual',]
col_vector = unlist(mapply(brewer.pal, qual_col_pals$maxcolors, rownames(qual_col_pals)))
pie(rep(1,n), col=sample(col_vector, n)) 
```

[![colour_Brewer_qual_60](../Images/1987b16310580021b54182eb0c420a42.png)](https://i.stack.imgur.com/sSY7d.png)

其他解决方案是：从图形设备中获取所有 R 颜色并从中采样。我删除了灰色阴影，因为它们太相似了。这给出了 433 种颜色

```
color = grDevices::colors()[grep('gr(a|e)y', grDevices::colors(), invert = T)] 
```

[![一套 20 种颜色](../Images/47da678ead936a142888dcece073d391.png)](https://i.stack.imgur.com/49UkY.png)

```
pie(rep(1,n), col=sample(color, n)) 
```

有 200 种颜色`n = 200`：

```
pie(rep(1,n), col=sample(color, n)) 
```

[![一套 200 种颜色](../Images/b80a52c7b8896da45da6724acac311ec.png)](https://i.stack.imgur.com/6rVZ5.png)

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-03-07T22:06:18.947

这里有几个选项：

1.  看看`palette`函数：

    ```
     palette(rainbow(6))     # six color rainbow
     (palette(gray(seq(0,.9,len = 25)))) #grey scale 
    ```

2.  和`colorRampPalette`功能：

    ```
     ##Move from blue to red in four colours
     colorRampPalette(c("blue", "red"))( 4) 
    ```

3.  查看[`RColorBrewer`包装](https://rdrr.io/cran/RColorBrewer/)（和[网站](http://colorbrewer2.org/)）。如果您想要发散的颜色，请在网站上选择**发散**。例如，

    ```
     library(RColorBrewer)
     brewer.pal(7, "BrBG") 
    ```

4.  [I want hue](https://medialab.github.io/iwanthue/)网站提供了许多漂亮的调色板。同样，只需选择您需要的调色板。例如，您可以从网站获取 rgb 颜色并制作自己的调色板：

    ```
     palette(c(rgb(170,93,152, maxColorValue=255),
         rgb(103,143,57, maxColorValue=255),
         rgb(196,95,46, maxColorValue=255),
         rgb(79,134,165, maxColorValue=255),
         rgb(205,71,103, maxColorValue=255),
         rgb(203,77,202, maxColorValue=255),
         rgb(115,113,206, maxColorValue=255))) 
    ```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2016-02-20T21:32:35.170

你也可以试试这个[`randomcoloR`包](https://github.com/ronammar/randomcoloR)：

```
library(randomcoloR)
n <- 20
palette <- distinctColorPalette(n) 
```

您可以看到在饼图中可视化时选择了一组高度不同的颜色（如此处其他答案所建议的那样）：

```
pie(rep(1, n), col=palette) 
```

[![在此处输入图像描述](../Images/c0b5609a951ef4fa4fa053593b3ff792.png)](https://i.stack.imgur.com/iE177.png)

用 50 种颜色显示在饼图中：

```
n <- 50
palette <- distinctColorPalette(n)
pie(rep(1, n), col=palette) 
```

[![在此处输入图像描述](../Images/e68f739dc9b710bd3eb9d1809eed614c.png)](https://i.stack.imgur.com/NuJ6x.png)

* * *

## 回答 #4

> 赞同：24
> 
> 时间：2017-04-16T14:19:50.070

不是对 OP 问题的回答，但值得一提的是，该[`viridis`](https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html)软件包具有用于顺序数据的良好调色板。它们在感知上是统一的，色盲安全且易于打印。

要获取调色板，只需安装包并使用功能`viridis_pal()`。有“A”、“B”、“C”、“D”四个选项可供选择

```
install.packages("viridis")
library(viridis)
viridis_pal(option = "D")(n)  # n = number of colors seeked 
```

[![在此处输入图像描述](../Images/53a876d61c4d10e6cfc679510a08b023.png)](https://i.stack.imgur.com/NocNM.png)

[![在此处输入图像描述](../Images/e7e93b8c838ddcae10863c7d19041062.png)](https://i.stack.imgur.com/9wKNt.png)

[![在此处输入图像描述](../Images/721b343b61507d6ace2748b3a661d3a6.png)](https://i.stack.imgur.com/m8IEc.png)

![](../Images/e734afbf467817e3eb1b8ff0cf245195.png)

YouTube 上还有一个精彩的演讲，解释了优秀色彩图的复杂性：

[Matplotlib 的更好的默认颜色图 | 科学 2015 | 纳撒尼尔·史密斯和斯特凡·范德沃尔特](https://www.youtube.com/watch?v=xAoljeRJ3lU)

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-03-07T22:05:58.837

您可以`colorRampPalette`从基础或`RColorBrewer`包中使用：

使用`colorRampPalette`，您可以按如下方式指定颜色：

```
colorRampPalette(c("red", "green"))(5)
# [1] "#FF0000" "#BF3F00" "#7F7F00" "#3FBF00" "#00FF00" 
```

您也可以提供十六进制代码：

```
colorRampPalette(c("#3794bf", "#FFFFFF", "#df8640"))(5)
# [1] "#3794BF" "#9BC9DF" "#FFFFFF" "#EFC29F" "#DF8640"
# Note that the mid color is the mid value... 
```

您可以使用`RColorBrewer`预先存在的调色板中的颜色：

```
require(RColorBrewer)
brewer.pal(9, "Set1")
# [1] "#E41A1C" "#377EB8" "#4DAF4A" "#984EA3" "#FF7F00" "#FFFF33" "#A65628" "#F781BF"
# [9] "#999999" 
```

查看`RColorBrewer`其他可用调色板的包装。希望这可以帮助。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-11-02T16:06:30.093

我建议对大型调色板使用外部资源。

[http://tools.medialab.sciences-po.fr/iwanthue/](http://tools.medialab.sciences-po.fr/iwanthue/)

具有根据各种参数组成任何大小的调色板的服务，并且

[https://graphicdesign.stackexchange.com/questions/3682/where-can-i-find-a-large-palette-set-of-contrasting-colors-for-coloring-many-d/3815](https://graphicdesign.stackexchange.com/questions/3682/where-can-i-find-a-large-palette-set-of-contrasting-colors-for-coloring-many-d/3815)

从图形设计师的角度讨论了一般问题，并提供了许多可用调色板的示例。

要包含 RGB 值的调色板，您只需复制向量中的值，例如：

```
colors37 = c("#466791","#60bf37","#953ada","#4fbe6c","#ce49d3","#a7b43d","#5a51dc","#d49f36","#552095","#507f2d","#db37aa","#84b67c","#a06fda","#df462a","#5b83db","#c76c2d","#4f49a3","#82702d","#dd6bbb","#334c22","#d83979","#55baad","#dc4555","#62aad3","#8c3025","#417d61","#862977","#bba672","#403367","#da8a6d","#a79cd4","#71482c","#c689d0","#6b2940","#d593a7","#895c8b","#bd5975") 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-11-26T02:15:40.753

我找到了一个提供 20 种独特颜色列表的网站：[https ://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/](https://sashat.me/2017/01/11/list-of-20-simple-distinct-colors/)

```
col_vector<-c('#e6194b', '#3cb44b', '#ffe119', '#4363d8', '#f58231', '#911eb4', '#46f0f0', '#f032e6', '#bcf60c', '#fabebe', '#008080', '#e6beff', '#9a6324', '#fffac8', '#800000', '#aaffc3', '#808000', '#ffd8b1', '#000075', '#808080', '#ffffff', '#000000') 
```

你可以试一试！

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-07-16T16:33:40.080

为此，您可以使用**Polychrome包。**它只需要颜色的数量和一些`seedcolors`. 例如：

```
# install.packages("Polychrome")
library(Polychrome)

# create your own color palette based on `seedcolors`
P36 = createPalette(36,  c("#ff0000", "#00ff00", "#0000ff"))
swatch(P36) 
```

![](../Images/5fb416152a9612950a28892d7abab260.png)

[您可以在https://www.jstatsoft.org/article/view/v090c01](https://www.jstatsoft.org/article/view/v090c01)了解有关此软件包的更多信息。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-04-13T07:54:01.453

在我的理解中，搜索独特的颜色与从单位立方体中有效搜索有关，其中立方体的 3 个维度是沿红色、绿色和蓝色轴的三个向量。这可以简化为在圆柱体中搜索（HSV 类比），您可以在其中固定饱和度 (S) 和值 (V) 并找到随机色调值。它在许多情况下都有效，请在此处查看：

[https://martin.ankerl.com/2009/12/09/how-to-create-random-colors-programmatically/](https://martin.ankerl.com/2009/12/09/how-to-create-random-colors-programmatically/)

在 R 中，

```
get_distinct_hues <- function(ncolor,s=0.5,v=0.95,seed=40) {
  golden_ratio_conjugate <- 0.618033988749895
  set.seed(seed)
  h <- runif(1)
  H <- vector("numeric",ncolor)
  for(i in seq_len(ncolor)) {
    h <- (h + golden_ratio_conjugate) %% 1
    H[i] <- h
  }
  hsv(H,s=s,v=v)
} 
```

另一种方法是“统一”使用 R 包 [https://cran.r-project.org/web/packages/uniformly/index.html](https://cran.r-project.org/web/packages/uniformly/index.html)

这个简单的函数可以生成与众不同的颜色：

```
get_random_distinct_colors <- function(ncolor,seed = 100) {
  require(uniformly)
  set.seed(seed)
  rgb_mat <- runif_in_cube(n=ncolor,d=3,O=rep(0.5,3),r=0.5)
  rgb(r=rgb_mat[,1],g=rgb_mat[,2],b=rgb_mat[,3])
} 
```

可以通过网格搜索想到更多涉及的功能：

```
get_random_grid_colors <- function(ncolor,seed = 100) {
  require(uniformly)
  set.seed(seed)
  ngrid <- ceiling(ncolor^(1/3))
  x <- seq(0,1,length=ngrid+1)[1:ngrid]
  dx <- (x[2] - x[1])/2
  x <- x + dx
  origins <- expand.grid(x,x,x)
  nbox <- nrow(origins) 
  RGB <- vector("numeric",nbox)
  for(i in seq_len(nbox)) {
    rgb <- runif_in_cube(n=1,d=3,O=as.numeric(origins[i,]),r=dx)
    RGB[i] <- rgb(rgb[1,1],rgb[1,2],rgb[1,3])
  }
  index <- sample(seq(1,nbox),ncolor)
  RGB[index]
} 
```

通过以下方式检查此功能：

```
ncolor <- 20
barplot(rep(1,ncolor),col=get_distinct_hues(ncolor))          # approach 1
barplot(rep(1,ncolor),col=get_random_distinct_colors(ncolor)) # approach 2
barplot(rep(1,ncolor),col=get_random_grid_colors(ncolor))     # approach 3 
```

但是，请注意，用人类可感知的颜色定义一个独特的调色板并不简单。上述哪种方法会产生不同的颜色集还有待测试。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-07-03T16:08:57.243

您可以像这样生成一组颜色：

```
myCol = c("pink1", "violet", "mediumpurple1", "slateblue1", "purple", "purple3",
          "turquoise2", "skyblue", "steelblue", "blue2", "navyblue",
          "orange", "tomato", "coral2", "palevioletred", "violetred", "red2",
          "springgreen2", "yellowgreen", "palegreen4",
          "wheat2", "tan", "tan2", "tan3", "brown",
          "grey70", "grey50", "grey30") 
```

这些颜色尽可能不同。对于那些相似的颜色，它们会形成渐变，以便您轻松分辨它们之间的差异。

# mysql - 按最近日期选择单个 id [MYSQL][PHP]

> ID：15282581
> 
> 赞同：0
> 
> 时间：2013-03-07T21:59:04.237
> 
> 标签：mysql, date, select

对你们聪明的人来说应该是一个简单的。

我试图从最近的日期/时间戳的语句中获取一个`id`（`integer`） ，其中“id = 学生id”。`select`

这是桌子

所以如果我有

```
order_id | date_bought         | pupil_id
-----------------------------------------
14       | 2013-03-07 21:50:00 | aaa1111
15       | 2013-03-07 21:55:00 | bbb1111 
```

所以从这组数据中，我想要的值是 15。

那我怎么把它放到一个php变量中，谢谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:00:43.933

试试这个

```
SELECT order_id FROM table ORDER BY date_bought DESC LIMIT 1 
```

至于把它放到PHP中，你用什么来连接MySQL？PDO、MySQLi 还是旧的 API？

# python - 如何从 index.html 中的模板返回 appengine 数据存储对象的键？

> ID：15282582
> 
> 赞同：1
> 
> 时间：2013-03-07T21:59:09.380
> 
> 标签：python, google-app-engine, templates, post, request

我希望我的用户能够通过单击每个对象旁边的按钮来修改显示的数据存储对象的属性。

为了做到这一点，我相信当用户单击按钮时，我需要从 index.html 中获取数据存储对象的 id：

来自 index.html：

```
{% for polyhedron in polyhedrons %}
    {{ polyhedron.name }}
    {{ polyhedron.color }} 
    <form action="/correction" method=post>
        <input type=submit id="{{ polyhedron.key }}" name=content value="red">
        <input type=submit id="{{ polyhedron.key }}" name=content value="green">
    </form> 
```

处理程序：

```
class CorrectionHandler(webapp2.RequestHandler):
    def post(self):
        polyhedron_object = self.request.get("id")
        polyhedron_object.color = self.request.get('content') 
```

然而， self.request.get("id") 根本不返回任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:11:19.597

我会为对象的 ID 使用隐藏的输入。我不确定您使用的是[db.Model](https://developers.google.com/appengine/docs/python/datastore/modelclass)还是[ndb.Model](https://developers.google.com/appengine/docs/python/ndb/modelclass)。如果您将 db.Model 用于您的对象，我会这样做：

```
{% for polyhedron in polyhedrons %}
{{ polyhedron.name }}
{{ polyhedron.color }} 
<form action="/correction" method=post>
    <input type="hidden" name="key" value="{{ polyhedron.key().id() }}">
    <input type="submit" id="{{ polyhedron.key().id() }}" name="color" value="red">
    <input type="submit" id="{{ polyhedron.key().id() }}" name="color" value="green">
</form> 
```

如果您使用的是 ndb.Model，我会这样做

```
{% for polyhedron in polyhedrons %}
{{ polyhedron.name }}
{{ polyhedron.color }} 
<form action="/correction" method=post>
    <input type="hidden" name="key" value="{{ polyhedron.key.urlsafe() }}">
    <input type="submit" id="{{ polyhedron.key.urlsafe() }}" name="color" value="red">
    <input type="submit" id="{{ polyhedron.key.urlsafe() }}" name="color" value="green">
</form> 
```

如果您使用 db.Model，您的处理程序是：

```
class CorrectionHandler(webapp2.RequestHandler):
    def post(self):
        polyhedron_object_key = self.request.get("key")
        polyhedron_object = Polyhedron.get_by_id(polyhedron_object_key)
        polyhedron_object.color = self.request.get('color') 
```

如果您使用的是 ndb.Model，您的处理程序是：

```
class CorrectionHandler(webapp2.RequestHandler):
    def post(self):
        polyhedron_object_key = self.request.get("key")
        polyhedron_object = ndb.Key(urlsafe=polyhedron_object_key).get()
        polyhedron_object.color = self.request.get('color') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:26:28.573

我认为 polyhedron.key 包含 Key('Polyhedron', 1) 之类的东西。要仅获取对象 ID，请尝试以下操作：

```
{% for polyhedron in polyhedrons %}
    {{ polyhedron.name }}
    {{ polyhedron.color }} 
    <form action="/correction" method=post>
        <input type=submit id="{{ polyhedron.key.id() }}" name=content value="red">
        <input type=submit id="{{ polyhedron.key.id() }}" name=content value="green">
    </form> 
```

然后在您的处理程序中再次构建密钥：

```
class CorrectionHandler(webapp2.RequestHandler):
    def post(self):
        polyhedron_object = self.request.get("id")
        polyhedron__key = ndb.Key('Polyhedron', self.request.get('id'))
        polyhedron_object.color = self.request.get('content') 
```

Polyhedron 是您的模型名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:49:52.433

您正在混淆您的 HTML 属性。当你这样做时：

```
self.request.get("foo") 
```

它返回以“foo”作为“名称”的 HTML 元素的值。因此，将您的 HTML 更改为：

```
<form action="/correction" method=post>
    <input type=submit name="{{ polyhedron.key.id }}" value="red">
    <input type=submit name="{{ polyhedron.key.id }}" value="green">
</form> 
```

进而

```
self.request.get("123") 
```

将返回 id 为 123 的颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-03T01:35:57.647

如果您使用的是 db.model，这应该非常简单

首先，您不使用输入标签的 id 请求值，而是使用名称。

其次，正如 Aaron 所提到的，您的用户不需要看到该密钥。保持隐藏

所以你的 html 应该是这样的

```
{% for polyhedron in polyhedrons %}
    {{ polyhedron.name }}
    {{ polyhedron.color }} 
   <form action="/correction" method=post>
        <input type="hidden" name="key" value="{{polyhedron.key()}}">
        <input type="submit" id="{{ polyhedron.key().id() }}" name="color" value="red">
        <input type="submit" id="{{ polyhedron.key().id() }}" name="color" value="green">
   </form> 
```

最后你的处理程序应该是这样的

```
class CorrectionHandler(webapp2.RequestHandler):
    def post(self):
        color = self.request.get("color")
        polyhedron_key = self.request.get("key")
        polyhedron_object = db.get(polyhedron_key)

        if color == "red":
            polyhedron_object.color = "red"
        else:
            polyhedron_object.color = "green"
        polyhedron_object.put() 
```

如您所见，我在其中使用了一些 python 代码，但如果您使用 Java，则可以遵循相同的逻辑。我希望它有帮助

# java - java 5中的文件IO同步

> ID：15282583
> 
> 赞同：1
> 
> 时间：2013-03-07T21:59:17.440
> 
> 标签：java, io, synchronization

我有一项工作将在目录 A 中的 csv 文件中写入大量数据。然后有另一项工作将在一段时间后从目录 A 读取文件。将要写入的进程每天运行一次。该过程将每天多次读取运行。

我将首先将文件写入一个临时文件夹，例如 dir_timestamp。完成后，该文件将移动到目录。现在的问题是

如果在将文件移动到目录时，另一个进程来尝试读取它怎么办？它的阅读方式将是

```
File dir = new File (path_to_dir);
File[] files = dir.listFiles();
for (File f : files)
{
    //do stuff
} 
```

*   部分写入的文件对进程 2 可见吗？
*   如果是，那么如果我将文件复制到具有某个名称而没有任何扩展名的目录并在读取必须有一些扩展名（可能是 .csv）时添加一个过滤器会不会很好？复制后，我可以用扩展名重命名它吗？
*   即使我进行重命名，Java`File.Rename()`实际上也用于移动文件。底层java会在重命名时从头开始复制文件还是什么？

# d3.js - 消失的 cubism.js 规则

> ID：15282584
> 
> 赞同：0
> 
> 时间：2013-03-07T21:59:18.590
> 
> 标签：d3.js, cubism.js

默认 cubism.js 规则仅涵盖当前浏览器。向下滚动浏览器后，规则（行）结束。除了诉诸javascript之外，无论如何要扩展它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T16:25:28.993

在 cubism.js 中使用了以下来控制线条的样式（规则）

```
function cubism_ruleStyle(line) {
  line
    .style("position", "absolute")
    .style("top", 0)
    .style("bottom", 0)
    .style("width", "1px")
    .style("pointer-events", "none");
} 
```

通过将“绝对”更改为“固定”，即使在我向下滚动屏幕后，我也会在屏幕上划出一条线。感谢 tanya 提出的类似问题，[将 div 置于屏幕中间 - 即使页面向上/向下滚动](https://stackoverflow.com/questions/6334495/center-div-in-the-middle-of-the-screen-even-when-page-is-scrolled-up-down)

# android - 自定义对象的 QuickBlox 错误 (Android)

> ID：15282585
> 
> 赞同：1
> 
> 时间：2013-03-07T21:59:19.253
> 
> 标签：android, quickblox

我想在我的自定义对象类中插入一些数据，但我收到错误：“禁止。需要用户。”。这是我的代码：

```
HashMap<String, Object> fields = new HashMap<String, Object>();
fields.put("user", username);
fields.put("name", ada.getTitle());
fields.put("type", ada.getType());
fields.put("text", ada.getText());
fields.put("status", ada.getStatus());
QBCustomObject qbCustomObject = new QBCustomObject();
qbCustomObject.setClassName("Ada");
qbCustomObject.setFields(fields);
qbCustomObject.setUserId(userId);
QBCustomObjects.createObject(qbCustomObject, new QBCallback() {
            @Override
            public void onComplete(Result result) {
            // get creates score
            QBCustomObjectResult qbCustomObjectResult = (QBCustomObjectResult) result;
                    QBCustomObject qbCustomObject = qbCustomObjectResult.getCustomObject();
             }

             @Override
             public void onComplete(Result result, Object o) {

             }
}); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T10:22:59.427

为了创建/更新/删除对象，您必须以用户身份登录。

登入

```
 final QBUser user = new QBUser("testuser", "testpassword");

 QBUsers.signIn(user, new QBCallbackImpl() {
                @Override
                public void onComplete(Result result) {
                    if (result.isSuccess()) {
                        QBUserResult qbUserResult = (QBUserResult) result;
                    } else {
                        handleErrors(result);
                    }
                }
            }); 
```

# java - Java JSON 解析器可以访问远程服务吗？

> ID：15282587
> 
> 赞同：0
> 
> 时间：2013-03-07T21:59:29.210
> 
> 标签：java, json, web-services

我想知道是否可以使用 Java JSON 框架（例如 Jackson、Google GSON 或 JSON.simple）从不同的服务器读取 JSON。

我有一个 Web 服务服务器，我想点击它来接收 JSON，然后将该 JSON 转换为 Java 对象。目前我知道如何做到这一点的唯一方法是使用 jQuery 访问服务器，获取 JSON，然后将其发布到 java 实用程序。有效地“卷曲”另一台服务器将是一个很好的捷径，这样我就可以消除 ajax 调用。

我只看到了这些框架的本地文件示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:07:24.663

此代码段将指定 URL 处的任何内容下载到 string `result`。然后，您可以使用常用的 JSON 解析器处理字符串。

```
URL url = new URL("http://the.address.i.want");
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
String inputLine, result = "";
while ((inputLine = in.readLine()) != null) {
    // System.out.println(inputLine);
    result += inputLine + "\n";
}
in.close(); 
```

# jquery - 在 Visual Studio 2012 Web 项目中使用 jquery 执行 AJAX GET 时出现网络错误

> ID：15282594
> 
> 赞同：2
> 
> 时间：2013-03-07T21:59:36.357
> 
> 标签：jquery, ajax, visual-studio-2012, get, xmlhttprequest

我有一个简单的 jquery.ajax 调用，用于检查用户的凭据。我的问题是它适用于其他任何地方（IE8、9、10、Chrome、Firefox、带有 IE8 的 VS2008），但在我的特殊情况下，我使用 Visual Studio 2012 并使用任何浏览器从那里启动它会导致通用的“网络错误” ”。我的电话看起来完全像这样：

```
var username = $('#Username').val();
    var password = $('#Password').val();
    var qstr = "userName=" + username + "&password=" + password;
$.ajax({
        type: "GET",
        url: "http://" + serverId + "/ADService/Service1.asmx/LoginUser",
        data: qstr,
        async: false,
        timeout: 5000,
        dataType: "xml",
        success: function (xml) {
            alert('Success');
            result = $(xml).find('result').text();
            userId = $(xml).find('userId').text();
            name = $(xml).find('name').text();
            role = $(xml).find('role').text();
        }
    , error: function (xmlHttpRequest, ajaxOptions, thrownError) {
        alert('response: ' + xmlHttpRequest.responseText);
        alert('status: ' + xmlHttpRequest.statusText);
    }
    }).done(function (data) {
        createCookie("userId", userId);
        createCookie("name", name);
        createCookie("role", role);
        eraseCookie("returningFromPage");

        if (result == "VALID") {
            if (role == "Engineer") {
                window.location.href = "EngrView.aspx";
            }
            else {
                window.location.href = "AD_Select.aspx";
            }
        }
        else {
            alert("Login failed");
        }
    })
    .fail(function () {
        alert("Login failed (.fail function)");
    }); 
```

对于我提到的配置，这个调用总是在“错误”事件处理程序中以“网络错误”的通用响应结束，并且没有关于发生了什么的其他信息。

看着提琴手，调用实际上确实从服务器发出，并且响应正常且正确。我觉得有一些我不知道的 VS2012 设置正在扼杀我的电话。有任何想法吗？

# java - 如何创建在两种泛型类型上运行的可迭代泛型类？

> ID：15282596
> 
> 赞同：1
> 
> 时间：2013-03-07T21:59:49.927
> 
> 标签：java, data-structures, iterator

如何创建在两种泛型类型上运行的可迭代泛型类？

也就是说，如果我有一个名为：

```
public class PriorityQueue<K,V> {} 
```

`Iterable`如果我无法使用，我该如何实施`implements Iterable<K,V>`？Eclipse 给出错误提示：

> Iterable 类型的参数数量不正确；它不能用参数参数化

我一定是误解了如何实现我自己的可迭代集合。

关于这个问题：我想让我的优先队列可迭代，还是让队列存储的条目可迭代？

* * *

编辑：

对于我的家庭作业，我必须以链表方式实现 PriorityQueue ADT。我已经实现了所有方法，除了一个 -- `min()`。我正在考虑这样做的方式是通过创建一个私有方法来迭代`Entry`存储在我的列表中的所有对象。`entries()`但我不知道如何解决这个问题。

我现在有一个指向链表头部的链接和一个指向尾部的链接。如何制作所述`entries()`方法以便我可以返回`Iterable`条目的对象？

这是我的`Entry<K,V>`对象：

```
public class Entry<K,V> implements Comparable {

  private V _value;
  private K _key;
  private Entry<K,V> _prev;
  private Entry<K,V> _next;

  public Entry(K key, V value) {
    this._value = value;
    this._key = key;
    this._prev = null;
    this._next = null;
  }

  public V getValue() {
    return this._value;
  }

  public K getKey() {
    return this._key;
  }

  public Entry<K,V> getNext() {
    return _next;
  }

  public void setNext(Entry<K,V> link) {
    this._next = link;
  }

  public Entry<K,V> getPrev() {
    return _prev;
  }

  public void setPrev(Entry<K,V> link) {
    this._prev = link;
  }

  @Override
  public int compareTo(Object arg0) {
    if (arg0 instanceof Entry<?,?>) {

    }
    return 0;
  }
} 
```

这是我`PriorityQueue<K,V>`到目前为止：

```
public class PriorityQueue<K,V> implements Iterable<K>{

  private Entry<K,V> _head;
  private Entry<K,V> _tail;
  private int _size;

  public PriorityQueue() {
    this._head = null;
    this._tail = null;
    this._size = 0;
  }

  public int size() {
    return _size;
  }

  public boolean isEmpty() {
    return (size() == 0);
  }

  public Entry<K,V> min() {

  }

  public Entry<K,V> insert(K k, V x) {
    Entry<K,V> temp = new Entry<K,V>(k,x);
    if (_tail == null) {
      _tail = temp;
      _head = temp;
    }
    else {
      _tail.setNext(temp);
      temp.setPrev(_tail);
      _tail = temp;
    }
    return temp;
  }

  public Entry<K,V> removeMin() {
    Entry<K,V> smallest = min();
    smallest.getPrev().setNext(smallest.getNext());
    smallest.getNext().setPrev(smallest.getPrev());

    return smallest;
  }

  @Override
  public Iterator<K> iterator() {
    // TODO Auto-generated method stub
    return null;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:14:05.270

您必须为返回的 Iterable 对象使用包装类。在您的情况下，我假设它是类型条目。例如，您的代码应如下所示：

```
public class PriorityQueue<K, V> implements Iterable<Entry<K, V>> {
} 
```

当然，您始终可以创建自定义包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:03:10.057

可迭代意味着您可以迭代其类型的对象。它接受一个类型参数。从文档中：

> 公共接口可迭代
> 
> 实现这个接口允许一个对象成为“foreach”语句的目标。

如果您希望它在您的键上是可迭代的，您的类应该实现`Iterable<K>`。如果您希望它对您的值是可迭代的，您的类应该实现 `Iterable<V>`。

这是一篇关于实现 Iterable的[博客文章。](http://blog.dreasgrech.com/2010/03/javas-iterators-and-iterables.html)

通常，您想让队列存储的条目可迭代，您可能还想弄清楚按什么顺序排列。

如果您正在徘徊实现优先队列，您可能还想看看 Java 自己的[PriorityQueue](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)实现并遵循它。

# javascript - 坐标轴按比例正确显示，但未正确绘制图形条

> ID：15282602
> 
> 赞同：0
> 
> 时间：2013-03-07T22:00:02.967
> 
> 标签：javascript, coffeescript, d3.js

我正在尝试将数据集显示为图形，但是虽然 x 和 y 轴相对于我设置的 x 和 y 比例正确显示，但图形条没有正确地绘制在 SVG 画布上。

这是显示的图表：![在此处输入图像描述](../Images/4ff35478500079e86219a390c195b4d9.png)

这是我用 CoffeeScript 编写的数据集和 svg 组件：

```
dataset = [[1992, 1], [1994, 3], [1995, 3], [1996, 1], [1997, 3], [1998, 6], [1999, 11], [2000, 36], [2001, 37], 
        [2002, 46], [2003, 171], [2004, 442], [2005, 514], [2006, 753], [2007, 756],
        [2008, 660], [2009, 829], [2010, 903], [2011, 4425], [2012, 1635], [2013, 8]]

w = 800
h = 500
padding = 40

xScale = d3.scale.linear()
        .domain([d3.min(dataset, (d)-> d[0]) - 1, d3.max(dataset, (d)-> d[0]) + 1])
        .range([padding, w - padding * 2])

yScale = d3.scale.linear()
        .domain([0, d3.max(dataset, (d)-> d[1])])
        .range([h - padding, padding])

xAxis = d3.svg.axis()
        .scale(xScale)
        .orient('bottom')
        .tickFormat(d3.format("0"))

yAxis = d3.svg.axis()
        .scale(yScale)
        .orient('left')

svg = d3.select('body')
    .append('svg')
    .attr('width', w)
    .attr('height', h)

svg.selectAll('.bar')
    .data(dataset)
    .enter()
    .append('rect')
    .attr('class', 'bar')
    .attr('x', (d)-> xScale(d[0]))
    .attr('y', (d)-> yScale(d[0]))
    .attr('width', (d, i)-> w / dataset.length * i)
    .attr('height', (d)-> d * 4)

svg.selectAll('text')
    .data(dataset)
    .enter()
    .append('text')
    .attr('x', (d)-> xScale(d[0]))
    .attr('y', (d)-> yScale(d[1]))

svg.append('g')
    .attr('class', 'axis')
    .attr('transform', 'translate(0,' + (h - padding) + ')')
    .call(xAxis)

svg.append('g')
    .attr('class', 'axis')
    .attr('transform', 'translate(' + padding + ',0)')
    .call(yAxis) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T01:26:18.777

从您的代码：

```
.attr('width', (d, i)-> w / dataset.length * i)
.attr('height', (d)-> d * 4) 
```

两者都有问题。

对于宽度，您不应乘以`i`，甚至不必依赖数据。需要更多类似的东西：

```
.attr('width', widthPerYear) // don't need a function here 
```

`widthPerYear`是你需要决定的事情。从技术上讲，它可以是`w/dataset.length`，但假设数据集的长度与整个范围相同。

对于身高，你需要

```
.attr('y', (d)-> h - yScale(d[1])) 
```

# php - 从脚本语言中调用 shell 命令会降低性能吗？

> ID：15282614
> 
> 赞同：9
> 
> 时间：2013-03-07T22:00:50.927
> 
> 标签：php, python, ruby, perl, shell

在编写 python、perl、ruby 或 php 时，我经常使用...

```
PERL:
`[SHELL COMMAND HERE]`
system("[SHELL]", "[COMMAND]", "[HERE]")

Python
import os
os.system("[SHELL COMMAND HERE]")
from subprocess import call
call("[SHELL]", "[COMMAND]", "[HERE]")

ruby 
`[SHELL COMMAND HERE]`
system("[SHELL COMMAND HERE]")

PHP
shell_exec ( "SHELL COMMAND HERE" ) 
```

在 shell 中生成子进程会在多大程度上降低程序的性能？例如，我只是用 perl 和 libcurl 编写了一个脚本，并且很难使用 libcurl 的所有参数来使其工作。我停止使用 libcurl 并开始使用`curl`，性能似乎得到了提高，脚本编写变得更加容易，此外，我可以在只安装基本 perl（没有 cpan 模块）和基本 shell 实用程序的系统上运行我的脚本。

为什么产生这个子shell 被认为是不好的编程习惯？理论上，它是否应该比在语言中使用特定的绑定/等效库慢得多？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T22:31:11.853

执行 shell 命令不好的第一个原因是可维护性。如果没有语言切换，任务之间的上下文切换就够糟糕了。安全性也是一个考虑因素，但编码实践会使其不那么重要（避免注入，...）

有几个因素会影响性能：

1.  分叉一个进程：这需要一段时间，但如果正在执行的代码执行良好，这将变得不那么重要。
2.  优化变得不可能：当控制权移交给另一个进程时，解释器或编译器无法执行任何优化。此外，您无法执行任何优化。
3.  阻塞：Shell 命令是阻塞操作。它们不会像代码的本机部分那样被安排。
4.  解析：如果需要对输出做一些事情，就需要对其进行解析。在本机代码中，数据已经存在于相关的数据结构中。解析也容易出错。
5.  命令行生成：为可执行文件生成命令行可能需要迭代。有时这需要比本地执行相同的循环更多的周期。

大多数这些问题是在循环执行外部命令时出现的。可能很容易找到这些都不是问题的例子。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T00:32:00.770

Ferrix 很好地说明了几个与性能相关的问题。

关于安全性和可维护性，我将提交以下内容：

1.  可移植性/与外部依赖项隔离

    *   `wget`当然，如果您在 Linux 上，您可以拨打电话。在 Windows 或 Mac 上，它会死得很惨，你要么必须向老板解释为什么必须重新编写它才能使用内置方法，要么支持需要使用的用户/同事你的工具（两者都不会很有趣）。

    *   有一天，您将花费数小时试图弄清楚为什么您的脚本不再工作，结果却发现您的外部程序的升级版本需要不同的命令行参数并且不再按照您的代码预期的方式工作。

2.  一种语言 (Perl/Python/PHP) 中的转义字符不一定映射到 shell 语言中的转义字符（例如：SQL 注入攻击可以说是一种语言 (HTML) 中的非转义字符与不同的语言（SQL））。

3.  在一种语言中调试已经够难了——尝试调试为另一种语言生成命令的命令更加困难（尤其是在转义引号时，很容易得到类似`\\\\\"some value\\\\\"`...的字符串）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-25T18:16:43.393

谁说生成 shell 进程是不好的做法？当心教条主义者。没有硬性规定可以定义何时做或不做。在您的示例中，当您开始使用 curl 时，您可以更快地完成项目并获得更好的性能。证据*总是在布丁中*。

就性能而言，分叉（和执行）一个新进程会导致命中，因此您应该避免在较短的操作中使用它。但如果子进程运行几秒钟，您将不会注意到启动它所需的 25 毫秒（只是一个占位符#）。但是如果有一个运行非常快的瞬态函数，你经常调用它，通过子shell调用它会导致显着的性能损失。

关于子流程的一件事是它们可以从命令行独立测试。所以它们是真正独立的工具，这对于某些问题非常有用。

最后一件事要考虑。如果您相信“工作的正确工具”，并且正确的工具恰好已经在盒子上，并且您可以通过炮轰它来解决手头的任务，那为什么不呢？在我的生活中，我见过太多最终无关紧要的代码，因为问题已经被一些免费提供（并且已经安装）的工具解决了。它恰好不适合程序员选择的单片（读取单一工具）实现环境。

推论是“如果你只有一把锤子，那么一切看起来都像钉子”。不要害怕伸手去拿螺丝刀，当心“一锤子治所有人”的邪教徒。

# asp.net-mvc - foreach 中 switch 语句的正确剃刀语法

> ID：15282616
> 
> 赞同：14
> 
> 时间：2013-03-07T22:01:00.860
> 
> 标签：asp.net-mvc, razor

我花了很长时间试图找到在我的 mvc 视图页面上的 foreach 循环内创建 switch 语句的正确语法。

这是我迄今为止的最新尝试（在许多其他尝试之后），但 Razor 引擎不会接受它。这里的错误就在`@foreach`并且表明它缺少关闭`}`

```
@foreach (var item in Model) {

    String s = item.RegistrationStatus.ToString();

    // Make sure this mirrors values in RegistrationStatus enum!
    switch (s)
    {
        case "New": 
            <tr class='info'>
                break;

        case "Arrived": 
            <tr class='success'>
            break;

        default:
            <tr>

    }

......

} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-07T22:34:57.563

你可以按照贾斯汀的建议做一些事情：

```
@foreach (var item in Model) {

    String s = item.RegistrationStatus.ToString();

    // Make sure this mirrors values in RegistrationStatus enum!
    switch (s)
    {
        case "New":
            @:<tr class='info'>
            break;

        case "Arrived":
            @:<tr class='success'>
            break;

        default:
            @:<tr>
            break;
    }

    ......
} 
```

但是，如果您[使用 Razor V2 运行 MVC4](http://blog.sigma.se/en/Development/Mario-Ienasescu/Dates/2012/4/Whats-new-in-Razor-for-ASPNET-MVC4/)，您可以轻松地使用辅助方法（或常规方法）：

```
public static class MyHelperExtensions
{
    public static string GetCssClass(this HtmlHelper helper, RegistrationStatus status)
    {
        // Make sure this mirrors values in RegistrationStatus enum!
        switch (status)
        {
            case RegistrationStatus.New:
                return "info";

            case RegistrationStatus.Arrived:
                return "success";

            default:
                return null; // Return null so that the attribute won't render.
        }
    }
} 
```

然后像这样使用它：

```
@foreach (var item in Model)
{    
    <tr class='@Html.GetCssClass(item.RegistrationStatus)'>

    .....
} 
```

这更具可读性并且更易于维护。如果 GetCssClass() 方法返回`null`，那么 Razor V2 甚至不会呈现属性（在这种情况下`class=`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T22:03:43.063

您可以使用 Html.Raw 方法：

```
 case "New": 
        Html.Raw("<tr class='info'>")
        break; 
```

另请参阅[MVC3 Razor：在代码块中显示 html](https://stackoverflow.com/questions/6602419/mvc3-razor-displaying-html-within-code-blocks)以了解其他选项，例如：

```
 case "New": 
       @:<tr class='info'>
       break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T18:40:36.133

有时最好在单独的行中使用 {。使用这种方法，您可以获得更多代码行。另一方面，您会得到清晰的 html 标记行，而没有“@:”垃圾。这允许您在“浏览器内”调试期间快速将整个 html 行“按原样”从/粘贴到真实的 html。

```
@foreach (var item in Model) {
    String s = item.RegistrationStatus.ToString();

    // Make sure this mirrors values in RegistrationStatus enum!
    switch (s)
    {
        case "New":
        {
            <tr class='info'>
        }
            break;
        case "Arrived":
        {
            <tr class='success'>
        }
            break;
        default:
        {
            <tr>
        }
            break;
    }

......
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-25T15:04:34.233

ASP NET CORE 2.2 MVC 的变体

```
@foreach (var item in Model) {

    String s = item.RegistrationStatus.ToString();

    // Make sure this mirrors values in RegistrationStatus enum!
    switch (s)
    {
        case "New":
            @Html.Raw("<tr class='info'>")
            break;

        case "Arrived":
            @Html.Raw("<tr class='success'>")
            break;

        default:
            @Html.Raw("<tr>")
            break;
    }

    ......
    @Html.Raw("/<tr>")
} 
```

# spring-mvc - 在 Spring MVC 3.2 中实现 JSONP

> ID：15282617
> 
> 赞同：6
> 
> 时间：2013-03-07T22:01:03.367
> 
> 标签：spring-mvc, jsonp

我知道可以在 Spring MVC 的早期版本中使用自定义过滤器来实现 JSONP。此外[，此示例](http://www.iceycake.com/2012/06/xml-json-jsonp-web-service-endpoints-spring-3-1/)`MappingJacksonHttpMessageConverter`描述了一种在 Spring MVC 3.1 中通过扩展类和修改域对象来实现 JSONP 的方法。

除了使用上述方法之外，还有更简单（或传统）的方法来解决 Spring MVC 3.2 中的 JSONP 问题吗？我在 Spring 3.2 文档中根本没有看到 JSONP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T09:15:42.027

像这样更简单的方法

```
@RequestMapping(value = "/jsonp", method = RequestMethod.GET)
@ResponseBody
public String jsonp(@RequestParam("c")String callBack) throws Exception{
    ObjectMapper objectMapper = new ObjectMapper();
    Map<String, Object> map = new HashMap<String, Object>();
    map.put("data", "<p>jsonp data<p>");
    return objectMapper.writeValueAsString(new JSONPObject(callBack,map));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-26T21:25:34.057

使用 spring 4.1，您可以通过 @ControllerAdvice 简单地做到这一点

[https://spring.io/blog/2014/07/28/spring-framework-4-1-spring-mvc-improvements](https://spring.io/blog/2014/07/28/spring-framework-4-1-spring-mvc-improvements)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-22T16:01:03.343

您可以简单地使用 Bhagya Silva 的 spring-jsonp-support 作为项目的依赖项。

[https://github.com/bhagyas/spring-jsonp-support](https://github.com/bhagyas/spring-jsonp-support)

有关 README.md 文件的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-15T12:19:27.733

我一直在为 JSONP 方法寻找一种更简单的 OOB 方法（JSONP/CORS 应该内置于 IMO...不需要任何自定义代码）...从未找到任何...但是在与 Spring 团队联系后，它事实证明，[JSONP 现在在 4.0.5 中支持 OOB，`MappingJacksonJsonView`](https://jira.spring.io/browse/SPR-8346)并且稍后会内置对 CORS 的支持。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-05T18:38:13.003

这是处理这种情况的最简单方法

```
 @GET
    @Path("/jsonp")
    @Produces("application/json")
    public Response jsonp(@QueryParam("data") String json, 
            @QueryParam("callback") String callBack     
            @Context HttpServletRequest request) throws Exception { 

     String jsonResponse= "{ \"sttaus\" :\"some data\" }";
     try{ 
        .. // do your business logic      

     }catch(Exception e){ ... }

     return Response.status(201).entity(callBack+"("+jsonResponse+")").build(); 
   } 
```

# haskell - 在 Haskell 中将列表分成相同长度的子列表

> ID：15282621
> 
> 赞同：0
> 
> 时间：2013-03-07T22:01:27.030
> 
> 标签：haskell

我正在尝试编写一个 Haskell 代码，它接受一个列表并返回一个列表列表。当我按照以下代码执行此操作时，我得到“函数 reGroup 中的非详尽模式”

```
reGroup :: [[Int]] -> [Int] -> [[Int]]
reGroup [[]] [] = [[]]
reGroup [[]] xs = reGroup [(take 3 xs)] (drop 3 xs)
reGroup [[a]] [] = [[a]]
reGroup [[a]] xs = reGroup [[a], (take 3 xs)] (drop 3 xs)

-- calling the reGroup function from another function as follow
reGroup [[]] [1,2,3,4,5,6,7,8,9] 
```

我想要的是`[1,2,3,4,5,6,7,8,9]`-> `[[1,2,3], [4,5,6], [7,8,9]]`。我做错了什么或者有人可以告诉我一个简单的方法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T22:21:05.077

在没有累加器（第一个参数）的情况下尝试这样做可能更容易。然后我们会有

```
groupThree :: [a] -> [[a]] --why only work with Ints?
--if the list begins with three elements, stick them in a group
--then group the remainder of the list
groupThree (a:b:c:more) = [a,b,c]:groupThree more
--grouping an empty list gives you an empty list
groupThree [] = []
--if we have some number of elements less than three
--we can just stick them in a list
groupThree other = [other] 
```

或使用 drop and take

```
groupThree :: [a] -> [[a]]
groupThree [] = []
groupThree ls = (take 3 ls):groupThree (drop 3 ls) 
```

它做同样的事情。

您的代码不起作用的原因是

```
reGroup [xs,ls] y 
```

与您的任何情况都不匹配-您只有代码来处理第一个参数是一个元素的列表，该元素是空列表或只有一个元素的列表。

蓄能器的正确使用是

```
reGroup back [] = back
reGroup back ls = reGroup (back ++ [take 3 ls]) (drop 3 ls) 
```

不幸的是，这是非常低效的，因为您要附加到列表的末尾（花费的时间与该列表的长度成正比......模懒惰）。相反，您应该使用

```
reGroup back [] = reverse back
reGroup back ls = reGroup ((take 3 ls):back) (drop 3 ls) 
```

虽然我更喜欢没有累加器的版本，因为它更懒（因此可以处理无限列表）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T22:18:05.147

```
 [[a]] 
```

只是一个包含一个元素的列表，如 [[1]]。

因此，在一次递归之后，您可以从

```
reGroup [[]] [1,2,3,4,5,6,7,8,9] 
```

至

```
reGroup [[1,2,3]] [4,5,6,7,8,9] 
```

但是对于这种情况（一个包含 3 个元素的列表）没有定义模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T22:18:02.470

尝试这个：

```
reGroup xs n =
    if drop n xs == []
    then [take n xs]
    else [take n xs] ++ (reGroup (drop n xs) n) 
```

可能不是最有效的，但这是一个开始。

它输出：

```
> reGroup [1..9]
[[1,2,3],[4,5,6],[7,8,9]]
> reGroup [1..10]
[[1,2,3],[4,5,6],[7,8,9],[10]] 
```

而您收到该错误的原因是因为您没有涵盖该函数可以匹配的所有模式。`_`尝试为您的基本案例投入一两个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T22:23:58.213

将您的代码稍微更改为此

```
reGroup :: [[Int]] -> [Int] -> [[Int]]; 
reGroup [[]] [] = []; 
reGroup a [] = a; 
reGroup [[]] xs = reGroup [(take 3 xs)] (drop 3 xs); 
reGroup a xs = a ++ reGroup [(take 3 xs)] (drop 3 xs); 
```

做这项工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T22:26:47.093

```
take3 :: [a] -> [[a]]
take3 [] = []
take3 (x:[]) = [[x]]
take3 (x:y:[]) = [[x,y]]
take3 (x:y:z:xs) = [[x,y,z]] ++ take3 xs 
```

# git - git branch -txy/z 后.git/config 的内容

> ID：15282622
> 
> 赞同：1
> 
> 时间：2013-03-07T22:01:29.737
> 
> 标签：git

假设这`scratch`是一个远程仓库并且`bough`是这个仓库中的一个分支。这意味着由 打印的行之一`git branch -r`将是`scratch/bough`。如果现在我执行

```
% git branch -t twig scratch/bough
Branch twig set up to track remote branch bough from scratch. 
```

然后检查 的内容`.git/config`，我看到其中添加了一个新部分：

```
[branch "twig"]
        remote = scratch
        merge = refs/heads/bough 
```

该`merge`属性的值可能会让人认为有一个文件`.git/refs/heads/bough`，但实际上*并没有这样的文件*。但*现在*有一个文件`.git/refs/heads/twig`：

```
.git/refs
├── heads
│   ├── master
│   └── twig
├── remotes
│   └── scratch
│       └── HEAD
└── tags 
```

这让我意识到，要么这条线`merge = refs/heads/bough`并不意味着我认为它的原因（IOW，该值指`.git`的是现有文件的相对于 的路径），要么 git 中有一个非常重要的错误。

所以，让我们假设前者是这种情况。那么这条线的`merge = refs/heads/bough`真正含义是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:15:29.757

该`merge`行指的是远程仓库中存在的引用，而不是本地仓库中的引用。的本地上游分支`twig`实际上将是`refs/remotes/scratch/bough`.

并且为了记录，并不是所有的 refs 都作为`.git/refs`. 您也可以使用打包的 refs `.git/packed-refs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:15:55.037

```
[branch "twig"]
    remote = scratch
    merge = refs/heads/bough 
```

该块的含义如下：*本地*分支`twig`设置为在远程有一个上游分支`bough`，`scratch`即`scratch/bough`远程跟踪分支。因此，例如，当您在其上推动时，`twig`它将推动到`scratch/bough`.

# php - SSL 页面发布到非安全表单

> ID：15282624
> 
> 赞同：0
> 
> 时间：2013-03-07T22:01:31.470
> 
> 标签：php, forms, ssl, https, web

由于正在传输安全内容，我有一个需要 SSL 的页面。但是，我在页面上有一个第三方嵌入表单，该表单发布到没有安装 SSL 的第三方站点。它工作正常，只是我的浏览器收到一条烦人的消息。

“尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。

您确定要继续发送此信息吗？”

无论如何我可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:04:28.223

如果您无法控制第三方应用程序并且他们没有启用 ssl，**那么没有**

唯一的机会：如果第三方启用了 https，您可以`<form action=""`在站点加载后尝试修改属性以使用 https。但你告诉他们没有。

最后的机会：您可以在您的网站上提供一个 HTTPS 代理，该代理与第三方网站进行非 HTTPS 通信。然后在站点加载后修改表单操作以使用该代理。

所以我的建议是：

*   尝试与第三方交谈（发送电子邮件）并告诉他们您的问题。也许他们会有所帮助。

*   如果第一个没有帮助，请使用我的代理尝试。可以很容易地用 PHP 实现。如果你愿意，我可以举个例子。

# ruby-on-rails - Rails 3，未知验证器：'EmailValidator'

> ID：15282628
> 
> 赞同：18
> 
> 时间：2013-03-07T22:02:01.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, email

我尝试在我的 rails 应用程序中添加电子邮件验证器。我创建了以下文件`/lib/validators/email_validator.rb`

```
class EmailValidator < ActiveModel::EachValidator
  def validate_each(object, attribute, value)  
    unless value =~ /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i  
      object.errors[attribute] << (options[:message] || "is not formatted properly")  
    end  
  end  
end 
```

在 application.rb 我添加了这一行：

`config.autoload_paths << "#{config.root}/lib/validators"`

这是我的用户模型：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password,:name
  validates :email, :presence => true, :uniqueness => true, :email => true  
end 
```

如果我想启动服务器，我得到一个错误：

```
Unknown validator: 'EmailValidator' (ArgumentError) 
```

有人知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T22:08:12.687

> 如果您将自定义验证器放在 app/validators 中，它们将自动加载，而无需更改您的 config/application.rb 文件。

资源：[Rails 3 自定义验证器应该存储在哪里？](https://stackoverflow.com/questions/5263239/where-should-rails-3-custom-validators-be-stored)（第二个答案）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-20T11:03:20.767

发生此错误，因为 rails 在您的验证文件之前加载模型文件

尝试在模型文件的开头手动要求您的验证文件

```
require_dependency 'validators/email_validator.rb' 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-06-20T10:03:13.807

尝试修改后的用户模型；

```
class User < ActiveRecord::Base

  attr_accessible :email, :password,:name

  validates :email, :presence => true, :uniqueness => true

end 
```

# php - 从 Dropbox 目录中提取和显示网站库中的图像

> ID：15282629
> 
> 赞同：4
> 
> 时间：2013-03-07T22:02:03.417
> 
> 标签：php, jquery, dropbox

我正在与一位摄影师客户合作创建一个简单的网站，我希望建立一个从 Dropbox 文件夹中提取的照片库，所以每当她想更新画廊中的图像时，她只需要将照片从 Dropbox 文件夹中换出。很简单，对吧？

有没有办法使用 jQuery 或 PHP 从 Dropbox 目录中提取图像并将它们显示到网页上？我已经成功地从 Dropbox 上的文本文件中提取了文本，但我不知道目录中的图像是否可以这样做。

我做了一些谷歌搜索，但我一直得到教我如何上传和下载图片到 Dropbox 目录的结果——这不是我想要的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:46:15.867

这真的很简单。这是来自[http://davidwalsh.name/generate-photo-gallery](http://davidwalsh.name/generate-photo-gallery)的片段。 点击此链接，您将找到解决问题的简单方法（包括演示）。

```
/** settings **/
$images_dir = '<path-to-your-dropbox>';
$thumbs_dir = '<path-to-your-generated thumbnails>';
$thumbs_width = 200;
$images_per_row = 3;

/** generate photo gallery **/
$image_files = get_files($images_dir);
if(count($image_files)) {
  $index = 0;
  foreach($image_files as $index=>$file) {
    $index++;
    $thumbnail_image = $thumbs_dir.$file;
    if(!file_exists($thumbnail_image)) {
      $extension = get_file_extension($thumbnail_image);
      if($extension) {
        make_thumb($images_dir.$file,$thumbnail_image,$thumbs_width);
      }
    }
    echo '<a href="',$images_dir.$file,'" class="photo-link smoothbox" rel="gallery"><img src="',$thumbnail_image,'" /></a>';
    if($index % $images_per_row == 0) { echo '<div class="clear"></div>'; }
  }
  echo '<div class="clear"></div>';
}
else {
  echo '<p>There are no images in this gallery.</p>';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T22:28:02.217

不久前我做过类似的事情。所以，是的，这是可能的。您可以搜索“没有数据库的 php 库”。您只需指定 Dropbox 图像目录的路径并使其可通过网络访问。

您需要了解 Dropbox 的工作原理吗？简而言之：它将本地目录（比如摄影师计算机上的“C:/Dropbox/gallery/”）与 Dropbox 的服务器同步。之后，安装并使用摄影师帐户登录的所有其他 Dropbox 实例都将获取“C:/Dropbox/Gallery/”的任何更改并将其应用到他们自己的副本（例如，“/var/www/Dropbox/gallery “例如在网络服务器上）。

因此，首先您需要在 Web 服务器上安装 Dropbox ( [https://www.dropbox.com/install?os=lnx](https://www.dropbox.com/install?os=lnx) )。有问题吗？如果是，则需要另找方法。如果没有，您可以只编写一个简单的函数/类，它将扫描提供的 Web 目录（如 /var/www/Dropbox/gallery）以查找图像并生成图像的 Web 可访问路径。

最简单的例子：

```
<?php
$images = glob("/var/www/Dropbox/gallery/*.*");
for ($i=0; $i<count($files)-1; $i++)
{
    $img = $images[$i];
    echo '<img src="/'.$img.'" alt="random image" />";
}
?> 
```

另外，您可能对此感兴趣：[My PHP DropBox Gallery 1.0 Beta](https://forums.dropbox.com/topic.php?id=15885)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-14T05:37:03.687

我想我为像我这样的初学者找到了一个非常好的解决方案。投递箱相当限制您可以使用它做什么。但是，您可以通过 FTP 客户端同步 FTP 文件夹和子目录。我使用开源的 WINSCP。我让它在后台运行。它会不断扫描 ftp 和 Dropbox 文件夹以进行同步。如果文件从一个文件夹中消失，它也会从另一个文件夹中消失。因此，您可以使用 Dropbox 来编辑图库中的照片，并使用上面的 javascript 创建一个很棒的灯箱。可能还有其他解决方案，但我发现这非常简单。此外，如果您担心空间问题，您可以简单地检索文件并将其从 Dropbox 中删除。我知道这是一年前发布的，但我一整天都在试图弄乱 Dropbox 核心 api，不幸的是它在我头上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-08T05:22:25.320

您也可以尝试使用[Dropbox 选择器](https://www.dropbox.com/developers/dropins/chooser/js)拉取图像。

迈克尔

# python - 计算整数中数字总和的函数的错误输出

> ID：15282633
> 
> 赞同：1
> 
> 时间：2013-03-07T22:02:29.063
> 
> 标签：python, function, python-3.x

我需要编写一个函数来计算并返回整数中数字的总和。

这是我的代码：

```
def main():
    number1=input("Enter a number: ")
    number=list(number1)
    i=0
    while len(number)!=i:
        numbers=[]
        x=int(number[i])
        numbers.append(x)
        number.remove(number[i])

print(numbers)
x=float(sum(numbers))
print(x)

main() 
```

输出如下所示：

```
Enter a number: 123
[3]
3.0 
```

我不确定为什么 1 和 2 不在列表中，也不用于计算总和......有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:04:19.083

您`numbers` *在循环内*重新初始化。不要这样做，而是将其移到循环之外：

```
numbers=[]
while len(number)!=i:
    # ... 
```

否则你最终会重置每个数字的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T22:26:30.133

在你尝试高级的东西之前学习基础知识对你有好处，但只是为了好玩，这里是有经验的 Python 编码器解决这个问题的方法：

```
def main():
    number1=input("Enter a number: ")  # for Python 2.x, need to use raw_input()
    return float(sum(int(ch) for ch in number1))

x = main()
print(x) 
```

我们可以使用内置函数`sum()`对数字求和，并使用“生成器表达式”获得数字数字，该“生成器表达式”在调用时直接循环字符串`int()`。

这只是您将很快在 Python 中学习的有趣内容的一种体验。:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T19:52:55.417

如果你对这种编程感兴趣，你也可以用更实用的方式来做。然后它看起来像这样：

```
def main():
    number1=input("Enter a number: ")  # for Python 2.x, need to use raw_input()
    return float(sum(map(int, number1))

x = main()
print(x) 
```

# openid - Facebook OpenID 与 Google OpenID

> ID：15282644
> 
> 赞同：1
> 
> 时间：2013-03-07T22:02:56.940
> 
> 标签：openid

Facebook OpenId 提供商与其他最著名的提供商（例如 google）有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:08:32.783

Facebook 不是开放 ID 提供者 他们使用自己的类似 OpenID 的系统，称为 Facebook 连接
[http://developers.facebook.com/docs/concepts/login/](http://developers.facebook.com/docs/concepts/login/)

Google 也不是 Open ID 提供商。Google 为 Google 帐户用户使用联合登录是基于 OpenID 建议
[https://developers.google.com/accounts/docs/OpenID](https://developers.google.com/accounts/docs/OpenID)

OpenId 是一个 Open Id 提供者
[http://openid.net/](http://openid.net/)

# user-experience - 我可以更改 LiveCode 中进度条的默认颜色吗？

> ID：15282648
> 
> 赞同：1
> 
> 时间：2013-03-07T22:03:11.703
> 
> 标签：user-experience, livecode

有没有办法将进度条的默认颜色更改为绿色以外的任何颜色？例如，我希望它是红色的，直到它达到 100%，然后它变成绿色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:03:11.703

这个问题是在 LiveCode 列表服务上提出的，我在这里回答是因为其他人可能会觉得它很有用。

不，这是不可能的，但很容易创建一个自定义进度条，您可以根据自己的喜好设置颜色。

创建两个图形。一个用于边界，一个用于酒吧。随意设置颜色和图形效果。将它们分组，然后将以下内容添加到组脚本中：

```
setProp uPercent pPercent -- 0..100
   put the rect of grc "border" of me into tRect
   put round(item 1 of tRect+(item 3 of tRect-item 1 of tRect)*pPercent/100) into item 3 of tRect
   set the rect of grc "bar" of me to tRect
end uPercent 
```

# python - 如何读取 zip 文件中的文本文件？

> ID：15282651
> 
> 赞同：11
> 
> 时间：2013-03-07T22:03:38.007
> 
> 标签：python, python-3.x

所以说我有一个名为“files.zip”的压缩文件，它包含“text1.txt”：

```
words 
```

和“text2.txt”：

```
other words 
```

如何告诉 python 打开并读取 text1.txt 文件？我知道通常要打开 zip 文件之外的文本文件，我会这样做：

```
file = open('text1.txt','r') 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2020-03-29T18:29:06.153

如果您需要以文本模式打开 ZIP 存档中的文件，例如将其传递给`csv.reader`，您可以使用`io.TextIOWrapper`：

```
import io
import zipfile

with zipfile.ZipFile("files.zip") as zf:
    with io.TextIOWrapper(zf.open("text1.txt"), encoding="utf-8") as f:
        ... 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-07T22:06:20.190

您可以像这样使用[zipfile](https://docs.python.org/3/library/zipfile.html)模块：

```
zip = zipfile.ZipFile('test.zip')
file = zip.read('text1.txt') 
```

不要忘记导入 zipfile 模块：`import zipfile`

# java - Spring Web 服务响应中没有端点适配器

> ID：15282656
> 
> 赞同：13
> 
> 时间：2013-03-07T22:03:49.597
> 
> 标签：java, spring, spring-ws

我只是无法使用 Spring Web Services 找出这个错误。我相信我做的一切都是正确的。

**肥皂错误响应**

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <SOAP-ENV:Fault>
         <faultcode>SOAP-ENV:Server</faultcode>
         <faultstring xml:lang="en">No adapter for endpoint [public void org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.PersonManagerSyncSoapBindingImpl.readPerson(org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.ReadPersonRequest,org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.Imsx_RequestHeaderInfoType,org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.holders.ReadPersonResponseHolder,org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.holders.Imsx_ResponseHeaderInfoTypeHolder)]: Is your endpoint annotated with @Endpoint, or does it implement a supported interface like MessageHandler or PayloadEndpoint?</faultstring>
      </SOAP-ENV:Fault> 
```

**注释**

```
@Endpoint  
public class PersonManagerSyncSoapBindingImpl implements org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.PersonManagerSyncPortType{

    @PayloadRoot(localPart = "readPersonRequest", namespace = "http://www.imsglobal.org/services/lis/pms2p0/wsdl11/sync/imspms_v2p0")
    @ResponsePayload
    public void readPerson(@RequestPayload org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.ReadPersonRequest parameters, org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.Imsx_RequestHeaderInfoType headerInfoParameters, @RequestPayload org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.holders.ReadPersonResponseHolder response, @RequestPayload org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.holders.Imsx_ResponseHeaderInfoTypeHolder headerInfoResponse) {
        response.value = new org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.ReadPersonResponse();
        headerInfoResponse.value = new org.imsglobal.www.services.lis.pms2p0.wsdl11.sync.imspms_v2p0.Imsx_ResponseHeaderInfoType();
    } 
```

**spring-ws-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>  
<beans xmlns="http://www.springframework.org/schema/beans"  
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
            xmlns:context="http://www.springframework.org/schema/context"  
            xmlns:sws="http://www.springframework.org/schema/web-services"  
            xsi:schemaLocation="http://www.springframework.org/schema/beans  
                                     http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  
                                     http://www.springframework.org/schema/web-services  
                                     http://www.springframework.org/schema/web-services/web-services-2.0.xsd  
                                     http://www.springframework.org/schema/context  
                                     http://www.springframework.org/schema/context/spring-context-3.0.xsd"> 

    <context:component-scan base-package="*"></context:component-scan>
    <sws:annotation-driven/>

    <sws:dynamic-wsdl id="personServiceManagement"                                                           
        portTypeName="PersonManagerSyncPortType"                                                         
        locationUri="/endpoints/"                                                       
        targetNamespace="http://www.imsglobal.org/services/lis/pms2p0/wsdl11/sync/imspms_v2p0">                               
        <sws:xsd location="/WEB-INF/wsdl/xsd/PersonManagementService.xsd"/>                                                  
    </sws:dynamic-wsdl>

</beans> 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-03-06T14:46:01.650

我有一个类似的错误信息。我的问题出在我从 XSD 生成的请求和响应类中。它错过了@XMLRootElement 注释。这导致操作描述（在 WSDL 中）和已实现方法的描述（在 Endpoint 中）不匹配。**将 JAXBElement 添加到我的端点方法解决了我的问题。**

```
import javax.xml.bind.JAXBElement;

@PayloadRoot(namespace = "http://foo.bar/books", localPart = "GetBook")
@ResponsePayload
public JAXBElement<MyReponse> getBook(@RequestPayload JAXBElement<MyRequest>) {
    ... 
```

有关更多详细信息，请参阅此博客：[spring-ws：端点没有适配器](https://jbossadventure.wordpress.com/2013/04/16/spring-ws-no-adapter-for-endpoint/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-12T09:30:38.863

我认为您缺少返回值。Spring-WS 使用方法签名来映射请求/响应组合。例如，我在生成的 WSDL 中有以下操作：

```
<wsdl:operation name="GetHiredCandidates">
    <wsdl:input message="tns:GetHiredCandidatesRequest" name="GetHiredCandidatesRequest"></wsdl:input>
    <wsdl:output message="tns:GetHiredCandidatesResponse" name="GetHiredCandidatesResponse"></wsdl:output>
</wsdl:operation> 
```

要在此操作上映射一个方法，`ResponsePayload`并且`RequestPayload`需要匹配 WSDL 中定义的输入和输出：

```
@ResponsePayload
public GetHiredCandidatesResponse getKandidaat (@RequestPayload GetHiredCandidatesRequest) {
    ..

    return getHiredCandidatesResponse;
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-27T14:58:10.480

[我对 Spring-ws 和 SOAPUI 有类似的问题，并在No adapter for endpoint SWS](https://stackoverflow.com/questions/11683468/no-adapter-for-endpoint-sws)的帮助下解决了这个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-24T11:07:16.383

就我而言，从对 jdom 的依赖切换到 jdom2 后，问题就消失了。

# java - 谷歌地图精度问题

> ID：15282657
> 
> 赞同：15
> 
> 时间：2013-03-07T22:03:50.017
> 
> 标签：java, android, api, google-maps

我有一个谷歌地图应用程序，它可以获取用户的纬度和经度值，并通过使用谷歌 JSON 响应存储一系列超市对象及其相对经度和经度值。我使用覆盖类在地图上放置一个标记，该标记取决于从显示可用超市的列表视图中选择的超市。

**这一切都很好，我似乎有一个小问题是我的覆盖类的准确性。地图标记似乎不是很准确，因为标记指向从我的地理点对象传递给它的指定纬度和经度点的错误位置。（有时距离它应该在的地方最多 11 英里）。**

我已经尝试在我的清单中声明 LOCATION_FINE 使用权限，但这似乎没有任何区别。当我使用 JSON 响应而不是 GPS 时，我需要这个吗？

模拟器上的地图有多准确？我可能在这里抓着稻草，但我听到很多人说在模拟器上使用 Google API 时它并不准确。

没有使用 GPS。

编辑

补充这个问题。我还有一个更深入的问题。我相信问题出在我的 update() 方法中，因为问题是不正确的对象 lat 和 long 值被发送到标记。

我将发布我的代码，只是为了看看是否有人能找到任何问题。

地名类：

```
public class GeoName {

private String id;
private Geometry geometry;
private String name;

public String getId() {
    return id;
}
public void setId(String id) {
    this.id = id;
}
public Geometry getGeometry() {
    return geometry;
}
public void setGeometry(Geometry geometry) {
    this.geometry = geometry;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}

} 
```

PostalCodeAdapter 类：

```
package com.example.restfulweb;

public class PostalCodeAdapter extends BaseAdapter {

private Context ctx = null;
Location l;
Dialog d;
Double Latt;
Double Longg;

private List<GeoName> names = new ArrayList<GeoName>();

public PostalCodeAdapter(Context ctx, List<GeoName> locations) {
    this.ctx = ctx;
    this.names = locations;
}

@Override
public int getCount() {     

    return names.size();

    }

@Override
public Object getItem(int arg0) {
    return null;
}

@Override
public long getItemId(int arg0) {
    return 0;
}

@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {

    LinearLayout layout = new LinearLayout(ctx);
    AbsListView.LayoutParams params = new AbsListView.LayoutParams(LayoutParams.FILL_PARENT, 
            LayoutParams.FILL_PARENT);
    layout.setLayoutParams(params);

    layout.setOrientation(LinearLayout.HORIZONTAL);

    GeoName location = this.names.get(arg0);

    Location l = location.getGeometry().getLocation();

    Latt = l.getLat();
    Longg = l.getLng();

    TextView value = new TextView(this.ctx);
    value.setText(location.getName());
    value.setMaxHeight(100);
    value.setTypeface(Typeface.DEFAULT, Typeface.NORMAL);
    value.setGravity(Gravity.CENTER);
    value.setOnClickListener(new CityClickListener(location));

    layout.addView(value);

    return layout;
}

class CityClickListener implements OnClickListener {

    private GeoName geoName = null;

    CityClickListener(GeoName name) {
        this.geoName = name;
    }

    @Override
    public void onClick(View v) {

        AlertDialog.Builder builder = new AlertDialog.Builder(ctx);
        builder.setView(createView());
        builder.setTitle("Details of " + geoName.getName());
        builder.setCancelable(true);

        builder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   dialog.cancel();
               }
        });

        AlertDialog alert = builder.create();
        alert.show();

        updateMap();    
    }

    private void updateMap() {

        MapActivity mapAct = (MapActivity)ctx;
        MapView map = (MapView)mapAct.findViewById(R.id.map);
        map.setScrollBarStyle(MapView.SCROLLBARS_INSIDE_INSET);
        map.setBuiltInZoomControls(Boolean.TRUE);
        map.displayZoomControls(Boolean.TRUE);

********** ISSUE: THE PASSED LAT AND LONG VALUES ARE NOT BEING PASSED TO THE OVERLAY **********
        GeoPoint point = new GeoPoint((int)(Latt* 1E6), (int)(Longg * 1E6));
        MapController mc = map.getController();
        mc.setZoom(17);
        mc.setCenter(point);
        mc.animateTo(point);

            List<Overlay> overlay = map.getOverlays();

        overlay.clear();

        Drawable marker = ctx.getResources().getDrawable(R.drawable.marker);
        MyItemizedOverlay overlays = new MyItemizedOverlay(marker, map, ctx);

        OverlayItem pointerConverted = new OverlayItem(point, geoName.getName(), null);

        overlay.add(overlays);
        overlays.addOverlay(pointerConverted);

    }

    private View createView() {

        LinearLayout l = new LinearLayout(ctx);
        l.setOrientation(LinearLayout.VERTICAL);
        LinearLayout.LayoutParams params = new LayoutParams(100, 300);
        l.setLayoutParams(params);

        TextView city = new TextView(ctx);
        city.setText("Supermarket: " + geoName.getName() + "");
        city.setMaxHeight(100);
        city.setTypeface(Typeface.DEFAULT, Typeface.NORMAL);
        city.setGravity(Gravity.CENTER);
        //city.setTextColor(ctx.getResources().getColor(R.color.white));

        TextView orientation = new TextView(ctx);
        //orientation.setText("Orientation : " + geoName.lat + " || " + geoName.lng);
        orientation.setMaxHeight(100);
        orientation.setTypeface(Typeface.DEFAULT, Typeface.NORMAL);
        orientation.setGravity(Gravity.CENTER); 
        l.addView(city);
        l.addView(orientation);

        return l;
    }   
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-10T19:36:28.230

设法对此进行排序。

对于使用 JSON 分层响应的其他任何人。确保从正确的 GeoPoint 对象类中访问纬度和经度值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T07:28:19.023

为简单起见，您可以使用带有最近更新的 Google Maps Android API v2，您的任务会变得更简单。 [https://developers.google.com/maps/documentation/android/start](https://developers.google.com/maps/documentation/android/start)

您只需要创建 GoogleMap 对象并添加适当的侦听器。

# ios - NSString initWithContentsOfURL 问题

> ID：15282658
> 
> 赞同：0
> 
> 时间：2013-03-07T22:03:50.467
> 
> 标签：ios, objective-c

我正在更新一个 iOS 应用程序以成为一个好孩子，并清除一些不推荐使用的方法。我一直在使用`NSString initWithContentsOfURL`并且正在尝试实施新版本`initWithContentsOfURL:usedEncoding:error:`。

我在视图控制器中使用了以下内容：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSURL *url = [[NSURL alloc] initWithString:@"http://myurl.com/directory/file.txt"];
    NSError *error;
    NSStringEncoding *encoding = NULL;
    NSString *tryString = [[NSString alloc] initWithContentsOfURL:url
                                                 usedEncoding:encoding
                                                        error:NULL];
    NSLog(@"string:%@", tryString);
    [super viewDidLoad];
} 
```

`error:NULL`但我一直在这一点上断线。我已经尝试`error:nil`并使用指向预定义错误对象的指针，`nil`但`NULL`同样的事情发生了。有没有人有任何想法或提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:21:22.877

```
NSError *error = nil;
NSStringEncoding encoding = 0;

NSString *tryString = [[NSString alloc] initWithContentsOfURL:url
                                                 usedEncoding:&encoding
                                                        error:&error]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:06:02.287

错误和编码都应该像这样传递：

```
NSError *error = nil;
NSStringEncoding encoding = nil;

NSString *tryString = [[NSString alloc] initWithContentsOfURL:url
                                                 usedEncoding:&encoding
                                                        error:&error]; 
```

# python - 循环 200 到 205 的 Python 整数

> ID：15282662
> 
> 赞同：1
> 
> 时间：2013-03-07T22:04:05.217
> 
> 标签：python, arrays, list, python-2.7, set

我需要在我的应用程序配置中输入一个 http-response 代码列表，并希望提供一个 python 速记，这样他们就不会列出每个代码。

类似于以下内容：

```
class settings: 
  success_codes= 200..299        # successful request
  retry_codes= 400..404,500-503  # retry later
  fail_codes = 504,505,506       # don't retry again 
```

python 不支持像这样的干净语法来定义范围吗？我需要多个范围。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:06:03.607

`ranges`在 Python 2.x 中使用,：

```
success_codes = range(200, 300)
retry_code    = range(400, 405) + range(500, 504)
fail_codes    = range(504, 507) 
```

作为参考，在 Python 3.x 中（也适用于 Python 2.x）：

```
success_codes = list(range(200, 300))
retry_code    = list(range(400, 405)) + list(range(500, 504))
fail_codes    = list(range(504, 507)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:06:31.877

只需使用范围功能：

```
vals = range(start, stop + 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:07:45.353

这适用于所有版本的python

```
class settings: 
  success_codes = list(range(200, 299 + 1)) # successful request
  retry_codes = list(range(400, 404 + 1)) + list(range(500, 503 + 1)) # retry later
  fail_codes = list(range(504, 506 + 1)) # don't retry again 
```

在早期版本的 python 中，`list(range())`可以替换为`range()`. 此外，显然，您可以直接将 1 添加到上限值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T22:12:56.310

就像很多人建议的那样，使用 range(n, m+1) 是有效的。但是，您是否需要在内存中创建所有可能的值？

在大多数情况下，您可以使用：

```
if return_code < 200 or return_code >= 299:
    do_something() 
```

或者：

```
if return_code in range(200, 299+1):
    do_something() 
```

# c++ - 无法将字符分配给字符串变量

> ID：15282664
> 
> 赞同：0
> 
> 时间：2013-03-07T22:04:12.003
> 
> 标签：c++, string, variable-assignment, user-input

我正在尝试将用户输入字符串分解为不同的变量。用户字符串的确切格式必须是“星期二 6:40 PM”。我编写了程序，以便一旦循环到达第一个空格，其余变量将被填充，因为只有日期名称的长度不同。我已经尝试了几次，似乎无法获得任何输出。有人知道为什么吗？

```
void input( Time & time ){
    string inputTime;
    string charholder;
    string day;
    string hour;
    string minute;
    string amPm;

    cout << "Enter a day and time: ";
    getline(cin, inputTime);

    for (int i = 0; i < inputTime.length() ; i++) {

        charholder = inputTime[i];
        cout << i << endl;

        if (charholder != " ") {
            day[i] = inputTime[i];
        }

        else {
            hour[0] = inputTime[i+1];
            minute[0] = inputTime[i+3];
            minute[1] = inputTime[i+4];
            amPm[0] = inputTime[i+6];
            amPm[1] = inputTime[i+7];
            break;
        }
    }

    cout << day << hour << minute << amPm; 
} 
```

编辑：正确代码：

```
void input( Time & time ){
    string inputTime;
    char charholder;
    string day;
    string hour;
    string minute;
    string amPm;

    cout << "Enter a day and time: ";
    getline(cin, inputTime);

    int i = 0;

    while (charholder != ' ') {

        charholder = inputTime[i];
        i++;
    }

    day = inputTime.substr(0,i);
    hour = inputTime.substr(i,1);
    minute = inputTime.substr(i+2,2);
    amPm = inputTime.substr(i+5,2);

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:07:23.077

将单个分配`char`给 an`std::string`是可以的。但是您有许多默认构造的字符串，然后您尝试将元素分配给 using`operator[]`和索引。但它们的大小都是 0，因此这些位置无效。

```
std::string foo; // empty string
foo[0] = 'x':    // Oops! foo[0] holds for the null-termination character. Modifying is UB
foo[1] = 'x':    // Oops! foo[1] is out of bounds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:06:51.967

这将创建一个长度为 0 的字符串。

```
string hour; 
```

这*不会改变字符串的长度*。

```
hour[0] = inputTime[i+1]; 
```

如果您需要字符串为特定长度，请调用[`std::string::resize()`](http://en.cppreference.com/w/cpp/string/basic_string/resize)

# magento - 添加启用所见即所得的类别属性

> ID：15282668
> 
> 赞同：11
> 
> 时间：2013-03-07T22:04:19.583
> 
> 标签：magento, wysiwyg, categories, custom-attributes

我正在关注本教程： http: [//www.atwix.com/magento/add-category-attribute/](http://www.atwix.com/magento/add-category-attribute/) 一切正常，属性已添加到类别中，但字段下方没有 WYSIWYG 按钮。WYSIWYG 在系统 > 配置 > 内容管理中启用。

```
$this->startSetup();
$this->addAttribute('catalog_category', 'custom_att', array(
    'group'         => 'General',
    'input'         => 'textarea',
    'type'          => 'text',
    'label'         => 'My attribute',
    'backend'       => '',
    'visible'       => true,
    'required'      => false,
    'wysiwyg_enabled' => true,
    'visible_on_front' => true,
    'is_html_allowed_on_front' => true,
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
));
$this->endSetup(); 
```

无论我尝试什么，我的属性都没有启用 WYSIWYG。任何人都可以帮忙吗？或者也许有一个解决方法？

编辑：我搜索了其他帖子，但都说这段代码应该添加所见即所得：

```
'wysiwyg_enabled' => true, 
```

但事实并非如此。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T14:28:51.563

今天试图完成同样的任务，并通过 magento 代码搜索设法用这段代码完成我的任务：

```
$productEntityTypeId = $installer->getEntityTypeId('catalog_product');
$installer->addAttribute($productEntityTypeId, 'some_text', array(
    'group'         => 'General',
    'input'         => 'textarea',
    'type'          => 'text',
    'label'         => 'Some Text',
    'backend'       => '',
    'visible'       => true,
    'required'      => false,
    'visible_on_front' => true,
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
));
$installer->updateAttribute($productEntityTypeId, 'some_text', 'is_wysiwyg_enabled', 1);
$installer->updateAttribute($productEntityTypeId, 'some_text', 'is_html_allowed_on_front', 1); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-24T10:25:13.193

这有效：

```
$installer->updateAttribute('catalog_category', 'certifications', 'is_wysiwyg_enabled', 1);
$installer->updateAttribute('catalog_category', 'certifications', 'is_html_allowed_on_front', 1); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-23T08:24:24.753

这对我有用：

```
$installer->addAttribute('catalog_category', 'short_description', array(
    'type' => 'varchar',
    'label' => 'Short Description',
    'input' => 'textarea',
    'default' => '',
    'sort_order' => 1,
    'required' => false,
    'wysiwyg_enabled' => true,
    'visible_on_front' => true,
    'is_html_allowed_on_front' => true,
    'global' => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
    'group' => 'General Information',
)); 
```

请注意以下三个条目：

```
 'wysiwyg_enabled' => true,
    'visible_on_front' => true,
    'is_html_allowed_on_front' => true, 
```

使用 Magento CE 1.9.2.0。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-30T13:38:33.987

在 magento 根目录中创建 php 文件并粘贴以下代码并从浏览器运行它：-

```
ini_set('display_errors',0);
require_once 'app/Mage.php';
Mage::app();

$setup = new Mage_Eav_Model_Entity_Setup('core_setup');

function createNewAttributeSet($name) {
    Mage::app('default');
    $modelSet = Mage::getModel('eav/entity_attribute_set')
    ->setEntityTypeId(4) // 4 == "catalog/product"
    ->setAttributeSetName($name);
    $modelSet->save();
    $modelSet->initFromSkeleton(4)->save(); // same thing
}

// Replace your attribute name with "extra_info"

$setup->addAttribute('catalog_category', 'extra_info', array(
        'group'             => 'General Information',
        'type'              => 'text',
        'backend'           => '',
        'frontend'          => '',
        'label'             => 'Extra Information',
        'wysiwyg_enabled' => true,
        'visible_on_front' => true,
        'is_html_allowed_on_front' => true,
        'input'             => 'textarea',
        'class'             => '',
        'source'            => 'eav/entity_attribute_source_boolean',
        'global'     => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_STORE,
        'visible'           => 1,
        'required'          => 0,
        'user_defined'      => 0,
        'default'           => '',
        'searchable'        => 0,
        'filterable'        => 0,
        'comparable'        => 0,
        'visible_on_front'  => 0,
        'unique'            => 0,
        'position'          => 1,
));
$setup->updateAttribute('catalog_category', 'extra_info', 'is_wysiwyg_enabled', 1);
$setup->updateAttribute('catalog_category', 'extra_info', 'is_html_allowed_on_front', 1); 
```

# android - Android - 从资源可绘制中显示图像

> ID：15282671
> 
> 赞同：1
> 
> 时间：2013-03-07T22:04:32.553
> 
> 标签：android, image, android-intent, resources

我是 Android 应用程序的新手，我正在从事一个由我的朋友发起的项目。下面的代码来自一个加载一个视图的类，该视图有一个小图像，周围有一些文本。

当我单击缩略图时，我希望图像全屏显示（在标准的 Android 图像查看器上）。我尝试了几种不同的解决方案，但都没有奏效。

此示例引发以下异常：

```
E/AndroidRuntime(13768): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=android.resource://com.app.mid/2130837533 typ=image/png } 
```

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.view_n1);

    ImageView img = (ImageView) findViewById(imageResource);

    img.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            Intent intent = new Intent();
            intent.setAction(android.content.Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.parse("android.resource://com.app.mid/" + R.drawable.p_page_11_image_0001), "image/png");
            startActivity(intent);              
        }
    });        
} 
```

图像位于可绘制文件夹 (..\res\drawable-xhdpi) 内。我正在使用 Eclipse ADT，并将其配置为在我的 Galaxy Nexus 上运行。

同样，我尝试了几种解决方案，但都没有运气。有什么想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:38:43.463

尝试使用 Intent.ACTION_VIEW 而不是 android.content.Intent.ACTION_VIEW

```
Intent i = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(yourUri, "image/png");
startActivity(intent); 
```

# sql - oracle sql中的重复输出结果

> ID：15282674
> 
> 赞同：0
> 
> 时间：2013-03-07T22:04:48.400
> 
> 标签：sql, oracle

有人知道它会从输出中删除这样的重复项的语句吗？

```
DEPARTMENT_ID  DEPARTMENT_NAME                FULL_NAME               JOB_TITLE      
 50            Shipping                  Alana Walsh          Sales Representative
 50            Shipping                  Alana Walsh          Sales Representative  
 50            Shipping                  Winston Taylor       Sales Manager   
 50            Shipping                  Winston Taylor       Sales Manager
 60              IT                      Alexander Hunold     Sales Representative
 60              IT                      Alexander Hunold     Sales Representative 
```

这是我到目前为止所拥有的：

```
select employees.department_id, departments.department_name, first_name || ' ' || last_name as full_name, job_title
from departments, employees, jobs
where employees.department_id = departments.department_id
and job_title like '%Sales%'
order by job_title, full_name; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:05:36.027

您可以使用`SELECT DISTINCT`删除重复项。

```
select distinct employees.department_id, departments.department_name, first_name || ' ' || last_name as full_name, job_title
from departments, employees, jobs
where employees.department_id = departments.department_id
and job_title like '%Sales%'
order by job_title, full_name; 
```

或者，您也可以在每列上使用 GROUP BY

```
select employees.department_id, departments.department_name, first_name || ' ' || last_name as full_name, job_title
from departments, employees, jobs
where employees.department_id = departments.department_id
and job_title like '%Sales%'
group by employees.department_id, departments.department_name, first_name || ' ' || last_name as full_name, job_title
order by job_title, full_name; 
```

**看起来您还缺少工作机会？这可能是您的查询返回重复结果的原因。**

我还建议您尽可能使用显式连接语法。

```
FROM departments
 INNER JOIN employees ON employees.department_id = departments.department_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:12:09.930

您可以`DISTINCT`按照 Matt Busche 的指示使用 a 。

然而，在许多情况下，人们错误地添加了 a`DISTINCT`以掩盖他们缺少连接条件的事实。在您的情况下，您将三个表连接在一起- `departments`、`employees`和`jobs`- 但您只有一个连接条件。因此，您正在对`jobs`表进行笛卡尔连接，这几乎肯定不是您想要的。该`jobs`表与其他两个表有何关系？如果我们假设`job_id`在 the`jobs`和`employees`table 中都有 a，你会想要类似的东西

```
select employees.department_id, 
       departments.department_name, 
       first_name || ' ' || last_name as full_name, 
       job_title
  from departments, employees, jobs
 where employees.department_id = departments.department_id
   and jobs.job_id             = employees.job_id
   and job_title            like '%Sales%'
 order by job_title, full_name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-24T22:07:50.753

我想联合都可以产生这样的结果。基本上，您想根据我的理解复制数据集的每个不同行。

例如，如果查询是这样的： 查找 HR 部门的员工，输出结果一式两份。输出员工的名字和部门。

表名：工人列：worker_idint first_name varchar last_name varchar Salary int join_date datetime department varchar

select first_name , department from worker where department='HR' union all select first_name , department from worker where department='HR';

这将使每行两次，就像您在输出中一样。

因此，在您的情况下，您可以在临时表中获取不同的记录，然后在同一个表上进行自联接以根据需要塑造结果。这将是一项艰巨的任务，但我可以想到这个方向的解决方案。

# javascript - 打印每个循环 单独使用 javascript

> ID：15282676
> 
> 赞同：0
> 
> 时间：2013-03-07T22:05:05.417
> 
> 标签：javascript, jquery

目前我正在使用以下代码打印带有打印图标的整个页面：

```
<a href="javascript:window.print()">
<img src="images/printIcon.gif" alt="Print the Records" width="40" height="40" border="0" /> 
</a> 
```

我正在阅读 JSP 中的对象列表并使用`<c:foreach>`. 我想在每个对象的详细信息旁边显示一个打印图标，并在单击它时仅打印（到外部打印机）该单个对象的详细信息。整个页面在单个 div 中。

我不确定这是否可以完成。我可以使用某种 ID 控制每个循环吗？

编辑：

例子：

```
 <c:forEach var="case" items="${distributions}">
     <table>
        <tr> 
            Print case details
        </tr>
     </table>
  </c:foreach> 
```

如果我有 10 个分布，我会得到 10 个表，所以在每个表旁边都需要一个打印图标，当点击它时，只打印那个单独的表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:18:37.650

我没有做以下事情，但理论上它应该可以工作：

1）定义一个打印样式表，其中：

```
body.detail-print .detail-item{display:none}
body.detail-print .detail-item.current{display:block} 
```

2) 定义一个事件监听器，例如使用 jQuery

```
$(".detail-item .print").click(function(e) {
    $("body").addClass("detail-print");
    $(this).closest(".detail-print").addClass("current");
    window.print();
}); 
```

这应该只打印打印样式表中可见的内容。

我在这里看到的唯一问题：如果有人想在之后打印整个页面，浏览器将只打印最后选择的项目。您可以使用 setTimeout 重置类。我暂时没有更好的主意...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:22:51.157

在您的块中，您可以将数据放在 td 中，然后使用本文中描述的方法[打印](https://stackoverflow.com/a/2255438/2033671)该 td 的内容。

```
<script type="text/javascript">
$(function(){
 $(".printable").each(function(){
   var $td = $(this);
   var $printIconTD = $('<td><img src="images/printIcon.gif" alt="Print the Records" width="40" height="40" border="0" /></td>');
   $td.parent().append($printIconTD);
   $printIconTD.click(function(){
        Popup($td.html());
   });

});
});
</script>

....

 <c:forEach var="case" items="${distributions}">
 <table>
    <tr> 
        <td class="printable">Print case details</td>
    </tr>
 </table> 
```

此解决方案的唯一问题是上帝，每个人都禁用了弹出窗口，因此您必须在页面上放置各种通知，让用户知道

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:25:07.623

A different way to what has been suggested would be to reload the page showing only the selected object and then call the printer dialog (e.g. on document load). So the printer icons next to the objects could link to the same page and pass it a parameter that you'll be printing and the ID of the object that you want to print.

# jsp - Jetty 如何编译 JSP？

> ID：15282678
> 
> 赞同：0
> 
> 时间：2013-03-07T22:05:31.440
> 
> 标签：jsp, configuration, jetty

我正在处理一个遗留项目，其中包括 jetty-6.1.9.jar、jsp-2.1.jar、jsp-api-2.1.jar、servlet-api-2.5-6.1.9.jar 并在 JRE 1.7.0_03 下运行.

Jetty 服务器在 MyServer.java 的 main 方法中启动。它创建一个 WebAppContext 并调用 WebAppContext.setWar($webAppRoot) 其中 $webAppRoot 是一个目录的完整路径，该目录下是通常的 WEB-INF 结构。

所有应用程序类和相关 JAR 都在调用 MyServer.main 的类路径中指定，WEB-INF/lib 中没有 JAR，WEB-INF/class 中也没有类（是的，我知道这搞砸了）。html、javascript、css 和 JSP 文件位于 $webAppRoot 中。

Jetty 文档谈论[JSP2.1](http://docs.codehaus.org/display/JETTY/Embedding+Jetty)支持表明 ant-1.6.5 是必需的依赖项。该项目不包括 ant，但 JSP 已编译并在您点击它们时工作。

当我将应用程序类文件移动到 WEB-INF/classes 并将它们的依赖 JAR 移动到 WEB-INF/lib 时，Jetty 会抛出一个找不到类的错误，说当我点击其中一个 JSP 时它找不到与 ANT 相关的类。为什么在原始配置中没有 ANT 的 JSP 编译，但是当我将东西移动到 WEB-INF 时，需要 ANT？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T19:47:44.280

你从哪里得到那些 jsp 罐子？

JSP 是一种疯狂的技术，它拥有比厨房抽屉更多的叉子……我最近提倡我们对它进行分叉，因为我们使用的那个似乎已经死了（jsp.java.net 上的那个），我们需要一个合理的路径来获取更新一个 IP 可接受的 jsp 进入码头。无论如何，我离题了，目前我们在jetty 7、8和9中拥有的jsp版本默认行为是使用系统编译器，如果设置了某个属性（org.apache.jasper.compiler.disablejsr199=true）那么它而是查找我们当前分发的 eclipse 编译器或之后的 ant 编译器。所以...这种行为完全取决于您正在使用的 jsp 实现。如果您的类路径中没有 ant 并且正在编译 jsps，那么很可能它是由系统编译器完成的。

另外，我知道您正在处理一个遗留项目，但确实建议您更新到最新且受支持的 jetty 版本。并且除非更新到码头 6.1.26，否则会被推荐，因为在 6.1.9 和最后一个维护版本之间修复了很多东西。除此之外，如果您遇到 jsp 问题，那么仅从 6.1.26 发行版更新 jsp jar 可能有助于解决这个问题。您可能只需要打开这些 jsp jar 的源代码（我相信它位于 maven Central 的 org/mortbay/jetty 下）。

最后，自从我接触jetty 6以来已经有好几年了，也许您需要将ant放入webapp类加载器中，并且它以前可以工作，因为它在系统类加载器中？如果它在 $jetty.home/lib 下，那么也许 webapp 上下文被配置为在 webapp 类加载器中使用父优先级并从那里拉出 ant？

[编辑] 我注意到 6.1.9 有一个 maven-jetty-jspc-plugin 所以你可能应该只预编译你的 jsps 并完成它。（[http://repo2.maven.org/maven2/org/mortbay/jetty/maven-jetty-jspc-plugin/](http://repo2.maven.org/maven2/org/mortbay/jetty/maven-jetty-jspc-plugin/)）

# oracle - 多语言列索引上的 Oracle 停止列表

> ID：15282680
> 
> 赞同：1
> 
> 时间：2013-03-07T22:05:43.670
> 
> 标签：oracle, text, full-text-search

我不明白 oracle stoplist 如何处理多语言列索引。我知道如何创建 multi_column 词法分析器，但我没有看到将特定停止列表关联到每个特定语言词法分析器的选项。此外，我正在阅读

> Blockquote 在索引时，词法分析器首选项 AUTO_LEXER 自动检测文档的语言并适当地标记和停止文档。块引用

没有提到 MULTI_LEXER。假设在多词法分析器上根据行语言在每一行上应用正确的停止列表是否正确？

# browser - 如何通过 piwik 跟踪浏览器版本？

> ID：15282681
> 
> 赞同：8
> 
> 时间：2013-03-07T22:05:48.503
> 
> 标签：browser, matomo

我是一名开发人员，我正在尝试收集数据以确定我们需要哪些浏览器来支持我们的网站。我们已经安装并跟踪了几个月的 piwik。但我注意到它似乎没有跟踪访问者正在使用哪个版本的 IE。

有没有办法让 Piwik 跟踪浏览器和版本并使其在报告中可见？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-07T23:43:21.640

在访问者>>设置选项卡中已经有一种方法。只需点击“相关报告：浏览器版本”

![在此处输入图像描述](../Images/8e16f5861ef1ad9362ed0994afa190b2.png)

# python - AlignIO 在 FASTA 文件中找不到记录

> ID：15282682
> 
> 赞同：1
> 
> 时间：2013-03-07T22:05:51.093
> 
> 标签：python, biopython

我想开始使用 Biopython 来对齐序列文件，但库一直给我错误。我的代码如下：

```
from Bio import AlignIO
import Bio

alignment = AlignIO.read("A_prot.fasta","fasta")
print alignment 
```

我确保放在`A_prot.fasta`与我的程序相同的目录中，但我收到一条错误消息：

```
Traceback (most recent call last):
  File "bio_seq_align.py", line 5, in <module>
   alignment = AlignIO.read("A_prot.fasta","fasta")
  File "/usr/lib/python2.7/site-packages/biopython-1.61-py2.7-linux-i686.egg/Bio/AlignIO/__init__.py", line 427, in read
raise ValueError("No records found in handle")
ValueError: No records found in handle 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-10T00:29:42.417

您可能会收到“ValueError：在句柄中找不到记录”的一个原因是您机器上的文件是否实际上是空的。

这就是我使用您在上面的评论中链接到的[ftp://ftp.ebi.ac.uk/pub/databases/ipd/imgt/hla/A_prot.fasta发生的事情，](ftp://ftp.ebi.ac.uk/pub/databases/ipd/imgt/hla/A_prot.fasta)

```
>>> from Bio import AlignIO
>>> align = AlignIO.read("A_prot.fasta", "fasta")
Traceback (most recent call last):
...
ValueError: Sequences must all be the same length 
```

这是预期的结果 - FASTA 文件不是一组对齐的序列。如果您想将其作为对齐方式加载，请首先运行 MUSCLE、Clustal Omega 等对齐工具。但是，查看文件和长度范围后，我怀疑这对于此示例是否合理：

```
>>> from Bio import SeqIO
>>> lengths = set(len(record) for record in SeqIO.parse("A_prot.fasta", "fasta"))
>>> lengths
set([17, 19, 26, 50, 51, 53, 59, 65, 66, 71, 72, 73, 74, ..., 364, 365]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T11:46:17.643

peterjc 很好地指出了`AlignIO`必须具有相同长度的对齐序列。如果你想读入一个包含未对齐序列的fata，你可以使用`SeqIO`如下：

```
>>> from Bio import SeqIO
>>> handle = open("A_prot.fasta", "rU")
>>> print handle
<open file 'A_prot.fasta', mode 'rU' at 0x13fc1d8>
>>> 
```

要将序列读入字典，您可以使用以下内容：

```
>>> record_dict = SeqIO.to_dict(SeqIO.parse(handle, "fasta"))
>>> print len(record_dict)
2186 # Fasta file contains 2186 entries
>>> 
```

在这种情况下，记录 ID 成为关键。要访问与特定密钥相关的信息，请使用：

```
>>> record_dict['HLA:HLA00001']
SeqRecord(seq=Seq('MAVMAPRTLLLLLSGALALTQTWAGSHSMRYFFTSVSRPGRGEPRFIAVGYVDD...CKV', SingleLetterAlphabet()), id='HLA:HLA00001', name='HLA:HLA00001', description='HLA:HLA00001 A*01:01:01:01 365 bp', dbxrefs=[])
>>> 
```

有关更多信息，请参阅[AlignIO](http://biopython.org/wiki/AlignIO)和 [SeqIO](http://biopython.org/wiki/SeqIO)文档

# android - Android：如何坚持 Activity 开始时的相同方向

> ID：15282683
> 
> 赞同：4
> 
> 时间：2013-03-07T22:05:52.983
> 
> 标签：android, android-activity

我知道如何将活动锁定在特定方向（在*AndroidManifest.xml*中）：

```
android:screenOrientation="landscape|portrait" 
```

我知道如何以编程方式锁定特定方向：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT) 
```

但是，如何将活动锁定到开始的方向？例如，如果它开始肖像，它应该坚持下去。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:14:44.503

`getResources().getConfiguration().orientation`在您的应用启动时使用，然后像上面那样以编程方式设置方向。该方法将返回 `ORIENTATION_LANDSCAPE`或 `ORIENTATION_PORTRAIT`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T01:16:37.713

找到了解决方案：

```
switch (((WindowManager) getSystemService(WINDOW_SERVICE)).getDefaultDisplay().getRotation()) {
  case Surface.ROTATION_90:
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    break;
  case Surface.ROTATION_180:
    setRequestedOrientation(9/* reversePortait */);
    break;
  case Surface.ROTATION_270:
    setRequestedOrientation(8/* reverseLandscape */);
    break;
  default :
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
} 
```

[在这里](https://stackoverflow.com/a/9319860/1324235)找到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:20:34.193

我就是这样做的：

```
android:screenOrientation="portrait"
android:configChanges="keyboard|keyboardHidden|orientation" 
```

在清单中的活动中

# python - 基本的python程序

> ID：15282686
> 
> 赞同：0
> 
> 时间：2013-03-07T22:06:01.297
> 
> 标签：python

我试图完成程序，但答案是错误的，我无法确定到底是什么。

问题：给定两条线的方程（y=mx+b），确定两条线是否平行、相同或相交。计算并输出交点。

我的代码：

```
equation_1 =raw_input("Please enter the equation of your 1st line(y=mx+b): ")
equation_2 =raw_input("Please enter the equation of your 2nd line(y=mx+b): ")

plus_1 = equation_1.find('+')
plus_2 = equation_2.find('+')

x_1 = equation_1.find('x')
x_2 = equation_2.find('x')

equalsign_1 = equation_1.find('=')
equalsign_2 = equation_2.find('=')

b1 = equation_1[x_1+1:]
b2 = equation_2[x_2+1:]

m1 = equation_1[equalsign_1+1:x_1]
m2 = equation_2[equalsign_2+1:x_2]

if m1==m2 and b1!=b2:
    print "Your equations are parallel. "

elif m1==m2 and b1==b2:
    print "Your equations are the same. "

else: 
    equation_intersect_y = float(b2)-float(b1)
    equation_intersect_x = float(m2)-float(m1) # equation_intersect_x = float(m1)-float(m2)

    poi_x = float(equation_intersect_y)/float(equation_intersect_x)
    poi_y = float(b1)*float(poi_x)+float(m1)` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:31:57.787

您用于计算的方程式`poi_x`是错误的。此外，您的代码用于计算的公式已经`poi_y`互换。这是一个稍微修改过的代码，应该会有所帮助：`m``b`

```
#! /usr/bin/env python
equation_1 ="y=2x+3"
equation_2 ="y=-0.5x+7"

plus_1 = equation_1.find('+')
plus_2 = equation_2.find('+')

x_1 = equation_1.find('x')
x_2 = equation_2.find('x')

equalsign_1 = equation_1.find('=')
equalsign_2 = equation_2.find('=')

b1 = float(equation_1[x_1+1:])
b2 = float(equation_2[x_2+1:])

m1 = float(equation_1[equalsign_1+1:x_1])
m2 = float(equation_2[equalsign_2+1:x_2])

print m1,b1,m2,b2

if m1==m2 and b1!=b2:
    print "Your equations are parallel. "

elif m1==m2 and b1==b2:
    print "Your equations are the same. "

else:
    equation_intersect_y = b2 - b1
    equation_intersect_x = m1 - m2

    poi_x = equation_intersect_y/equation_intersect_x
    poi_y = m1*poi_x+b1

    print poi_x, poi_y 
```

输出是：

```
2.0 3.0 -0.5 7.0
1.6 6.2 
```

这是一个更好的代码，可以减少重复：

```
#! /usr/bin/env python
def parse_equation_string(eq_string):
    x_pos = eq_string.find('x')
    equal_pos = eq_string.find('=')

    b = float(eq_string[x_pos+1:])
    m = float(eq_string[equal_pos+1:x_pos])
    return m, b

def get_point_of_intersection(line1, line2):
    m1, b1 = line1
    m2, b2 = line2

    if m1==m2 and b1!=b2:
        return "The lines are parallel. "

    elif m1==m2 and b1==b2:
        return "The lines are the same. "

    else:
        equation_intersect_y = b2 - b1
        equation_intersect_x = m1 - m2

        poi_x = equation_intersect_y/equation_intersect_x
        poi_y = m1*poi_x+b1

        return poi_x, poi_y

equation_1 = "y=2x+3"
equation_2 = "y=-0.5x+7"

line_1 = parse_equation_string(equation_1)
line_2 = parse_equation_string(equation_2)

print line_1, line_2
print get_point_of_intersection(line_1, line_2) 
```

输出是：

```
(2.0, 3.0) (-0.5, 7.0)
(1.6, 6.2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:58:49.653

第一对建议：

在执行操作之前（在第一个“if”语句之前）将方程打印回用户：

```
print "Equation 1  y={}x+{}".format(m1, b1)
print "Equation 2  y={}x+{}".format(m2, b2) 
```

re 或字符串函数 split 和 strip 可能比字符串索引更容易：

```
m1 = equation_1.split('=')[1].split('x')[0]
b1 = equation_1.split('=')[1].split('+')[1] 
```

在更难的测试用例之前给程序一些简单的测试用例： 1: y=0x+-3 2: y=1x+0 在 X = 3 处相交

```
1: y=-1x+0
2: y=0x+3
intersects at  X = -3

1: y=2x+2
2: y=-2x+0
intersects at X = -0.5 
```

现在剩下的就是代数：

先手工做一个hard case：

假设它们不平行或相同：找到 x1=x2 和 y1=y2 的点 找到两个 Y 相等的 X： 因此：
(m1)*x1 + b1 = y1 = y2 = (m2)*x2 + b2 重写找到 X：(m1)*x1 + b1 = (m2)*x2 + b2 但在兴趣点 (X) x1 = x2 重写：(m1 + m2)*X = b2 -b1 重写：X = (b2 - b1) / (m1 + m2)

现在我们可以看到这与您的 equation_intersect x 公式不匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:12:39.330

不应该

```
b1 = equation_1[x_1+1:]
b2 = equation_2[x_2+1:] 
```

是

```
b1 = equation_1[plus_1+1:]
b2 = equation_2[plus_2+1:] 
```

或者

```
b1 = equation_1[x_1+2:]
b2 = equation_2[x_2+2:] 
```

我也觉得

```
m1 = equation_1[equalsign_1+1:x_1]
m2 = equation_2[equalsign_2+1:x_2] 
```

应该

```
m1 = equation_1[equalsign_1+1:x_1-1]
m2 = equation_2[equalsign_2+1:x_2-1] 
```

# java - 检查数组中的值

> ID：15282689
> 
> 赞同：0
> 
> 时间：2013-03-07T22:06:14.823
> 
> 标签：java, arrays

我需要检查数组以查看用户输入是否已经存在，并显示一条消息，说明它是否存在。第一部分正在工作，但我试图创建一个检查单词的方法，我不确定我是否走在正确的道路上，干杯。

```
 import java.util.Scanner;

public class InputLoop {
    public static void main(String[] args) {
        Scanner scan = new Scanner(System.in);

        String array[] = new String[10];
        int num = array.length, i = 0;
        System.out.println("Enter a word");
        for (i = 0; i < num; i++) {
            while (scan.hasNextInt()) // while non-integers are present...
            {

                scan.next(); // ...read and discard input, then prompt again
                System.out.println("Bad input. Enter a word");

            }

            array[i] = scan.next();
            WordCheck();
        }
    }

    public void WordCheck(String[] i) {
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter another word");

        if (scan.next().equals(array[i])) {
            System.out.println("The word has been found");
        } else {
            System.out.println("The word has not been found");
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:23:52.723

对。你显然已经经历了一个糟糕的思考过程，所以让我们清理一下，重新思考一下。

*   第一步：你想接受一些用户输入
*   第二步：将其与所有以前的用户输入进行比较，看看它是否存在。

*   如果存在，则返回一条消息，指示该值已被输入。
*   否则忽略输入并继续执行

*   重复第一步。

* * *

## 解决方案

所以，让我们回顾一下你已经拥有什么，以及你需要如何改变它。

`public static void main(String[] args)`

如果我是你，我会避免直接从这里调用方法。如果你这样做，每个方法都需要是静态的，这对你的类的功能范围进行毫无意义的调整。在 main 方法中创建类的新实例，并将此代码移动到类的构造函数中。这将消除使每个方法都成为静态的需要。

```
Scanner scan = new Scanner(System.in);
String array[] = new String[10]; 
```

`System.in`好的，您已经创建了一个从流中获取输入的扫描仪对象。从键盘输入时，这是一件合理的事情。您还创建了一个数组来包含每个项目。如果您只希望用户能够输入 10 个值，那么这很好。就个人而言，我会使用[ArrayList](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)，因为这意味着您可以根据用户的需要接收尽可能多的用户输入。

其次，您需要一个函数来比较输入与所有其他输入。你目前所拥有的显然是行不通的，所以让我们再试一次。

您将需要一些输入，`userInput`和一个集合来比较它，`allInputs`。

`allInputs`需要从程序中的任何点都可以访问，因此将其设置为字段而不是局部变量可能是明智的。

然后，因为您将 userInput 与所有值进行比较，所以您将需要一个 foreach 循环：

```
for(String s : allInputs)
{
    if(s.equals(userInput))
    {
       // Output message code.
    }
} 
```

* * *

现在的诀窍是把它装进一个适用于这个程序的循环中。这取决于您，因为我们不是代码编写服务。希望我的回答能让你走上正轨:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:26:29.980

一个简单的解决方案是使用`Set`：

```
Set<String> words = new HashSet<String>(); 
```

使用方法添加单词`add()`并检查是否已经使用`contains(word)`方法添加了单词。

*编辑*

如果必须使用`Arrays`，您可以保持数组排序并进行二进制搜索：

```
Arrays.sort(words);
boolean isAlreadyAdded = Arrays.binarySearch(words, newWord) >= 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:22:02.123

您将不得不遍历整个数组并检查 scan.next() 是否等于其中任何一个 - 如果是则返回 true - 如下所示：

```
String toCheck = scan.next();
for (String string : i) { //For each String (string) in i
    if (toCheck.equals(i)) {
        System.out.println("The word has been found");
        return;
    }
}
System.out.println("The word has not been found"); 
```

这假设您调​​用`WordCheck()`，将数组传递给它 - 此方法也必须是静态的，您才能从该`main()`方法调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-20T17:37:22.327

您可以使用 arraylist.contains("name") 方法检查是否存在重复的用户条目。

# r - R kmeans 数据点

> ID：15282699
> 
> 赞同：0
> 
> 时间：2013-03-07T22:06:55.620
> 
> 标签：r, statistics, k-means, correspondence

我正在使用以下内容执行 kmeans 分析：

```
km = kmeans(mat2, centers = 4) 
```

我还绘制了 kmeans 分析，`library(fpc)`用于获得如下视觉效果：

```
plotcluster(mat2, km$cluster) 
```

结果如下：![在此处输入图像描述](../Images/0e2a48ea130e8fd827f40dc90ae47d99.png)

每行`mat2`对应于图中的一个点。我给矩阵中的每一行起了一个名字，如下所示：

```
rownames(mat2) = names      #names is a vector corresponding to the rows of mat2 
```

我可以通过以下属性找到矩阵中每一行的成员资格：

```
km$cluster 
```

这给出了矩阵中每一行的名称，后跟图中相应的整数。但是，我想访问更多数据。

**如何从这些聚类点访问更多数据？**例如，我想找到图中的整数和矩阵中的行之间的对应关系。为了澄清，回答这个问题可以让我知道矩阵中的哪一行对应于图中最高的 2？一旦我知道哪些整数对应于矩阵中的哪些行，那么我就有了矩阵中每一行的名称，并且可以给出有意义的解释。

我还想找到图中某个点与其所属的集群中心之间的距离度量。我可以得到图中的（x，y）坐标与矩阵中的行之间的对应关系吗？我能否获得一个交互式 GUI，以便当我单击图中的一个聚类点时，我可以看到更多上述数据？我愿意使用不同的库进行绘图。总结为两个问题：

1.  如何获得图中的整数与矩阵中的行之间的对应关系？
2.  是否有现有的软件包或工具可以让我更轻松地完成这项工作？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:13:31.647

这是回答你的一些问题，但里面有很多。如果您想与您的绘图进行交互以识别点，您可以查看`?identify`. 这是使用您所追求的特定行的答案。如果您想询问有关交互式 GUI 的问题，可能会发布一个特定的问题。

```
mat <- matrix(rnorm(160), ncol=2)
km <- kmeans(mat, centers=4)
df <- as.data.frame(cbind(mat, km$cluster))
names(df) <- c("Var1", "Var2", "cluster")

#Get the row of df with highest Var1 and cluster == 2
which(df$Var1 == max(df$Var1[df$cluster==2]))
# 76

#Use this to extract the row
df[which(df$Var1 == max(df$Var1[df$cluster==2])),]

#You can subset you data based on one of the variables
#Get the rows with cluster == 2
df.2 <- df[df$cluster == 2,] 
```

# desire2learn - 未创建课程文件文件夹

> ID：15282702
> 
> 赞同：0
> 
> 时间：2013-03-07T22:07:03.447
> 
> 标签：desire2learn

我正在使用 Valence API 创建课程。

在 DOME 中，我们将 d2lTools.CMS.CoursePathEnforced 变量设置为 on。

根据文档：

> 小路：
> 
> > 用于此课程的课程内容的根路径。请注意，如果您的>>后端服务为新的组织单位设置了路径强制，那么您应该将>>此属性保留为空字符串，后端服务可以为您填充它。

所以我在创建课程时将路径属性设置为空字符串。

但是，永远不会为课程路径创建该文件夹，因此当用户尝试将内容添加到课程时，他们会收到错误消息。我无法手动设置路径，因为它需要课程的组织单位 ID，在创建之前我不知道。

这是一个错误还是我没有正确配置一些东西？

干杯，伊恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:51:23.380

这是您应该发送的 JSON 结构示例（请注意，CourseTemplateId 和 SemesterId 属性指的是课程模板和新课程所派生的学期的 D2LID 值）：

```
{"LocaleId": null, 
 "CourseTemplateId": 1234, 
 "Name": "Extensibility 105", 
 "ShowAddressBook": false, 
 "ForceLocale": false, 
 "StartDate": null, 
 "EndDate": null, 
 "Path": "", 
 "SemesterId": 5678, 
 "Code": "EXT-105"} 
```

create 调用在成功创建后返回 JSON，如下所示：

```
{"Name": "Extensibility 105",
 "StartDate": null, 
 "CourseTemplate": {"Name": "ExtensibilityTemplate", 
                    "Code": "EXT-TMPL",
                    "Identifier": "1234"},
 "EndDate": null, 
 "Path": "/content/enforced/7531-EXT-105/",
 "IsActive": true,
 "Semester": {"Name": "Spring 2013",
              "Code": "S2013", 
              "Identifier": "5678"},
 "Code": "EXT-105",
 "Department": {"Name": "ExtensibilityDepartment",
                "Code": "1",
                "Identifier": "2468"},
 "Identifier": "7531"} 
```

请注意，该调用`Identifier`为新课程分配了一个属性，然后将该身份合并到强制内容`Path`中，正如人们所期望的那样。

# javascript - document.submit() 在 IE 中不起作用（适用于 chrome、ff 和 safari）

> ID：15282705
> 
> 赞同：2
> 
> 时间：2013-03-07T22:07:16.597
> 
> 标签：javascript, html, internet-explorer

我已经彻底搜索，找不到适合我具体情况的解决方案。我有一个使用 构建的弹出窗口`window.open("","","")`，在该窗口内我构建了一个如下所示的表单：

```
<form id="uploadImageForm" action="<?php  echo $_GET['action']; ?>" enctype="multipart/form-data" method="post">
    <input type="file" name="files[0]" size="40"/>
    <input type="text" name="token" value="<?php  echo $_GET['token']; ?>"/>
</form> 
```

然后我调用`doUpload`从另一个窗口调用的函数。我可以很好地使用这个功能，而且这些`document.forms["uploadImageForm"].`东西在除 IE 之外的所有其他浏览器中都运行良好。使用 IE 的调试器观察 DOM 中的变量表明，`document.forms["uploadImageForm"].action ="http://server_api_call.html";`两者 `document.forms["uploadImageForm"].token.value = comGroupId;` 都可以正常工作，但无论出于何种原因，它都会死掉`document.forms["uploadImageForm"].submit();`

此表格位于 www.joynme.com/alex/w/index.html -> “登录” -> “使用电子邮件签名” 非常感谢任何帮助！（也是第一篇文章，如果我的格式很糟糕，很抱歉！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:20:19.523

在提交之前尝试设置此属性：

`document.forms["uploadImageForm"].setAttribute("encoding","multipart/form-data");`

IE通过js提交多部分表单有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T02:40:29.630

找到了解决方案：

在构建表单时，我最初将一个`action=" "`字符串作为空白字符串传递。但是，我当时正在执行一个`document.myformname.action="API_CALL.html"`，将操作两次添加到表单中......显然 IE 不喜欢这样

干杯! 并感谢您的建议，亚历克斯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:15:44.297

也许 IE 的表单存在问题，因为它没有`<input type="submit" />`.

无论哪种情况，您引用表单元素的方法都已过时且不标准。您应该通过标准化方法引用 HTML 节点：`document.getElementById`、`document.getElementsByTagName`等。您还可以使用更过时的`document.querySelector`方法`document.querySelectorAll`(IE8+)。

# python - PyQt 和 PySide 等成熟包的术语是什么？

> ID：15282708
> 
> 赞同：2
> 
> 时间：2013-03-07T22:07:26.133
> 
> 标签：python, pyqt, terminology, pyside

我为 GUI 了解了它们，它们确实是我最喜欢的用于此类目的的 Python 选项。然而，它们远不止这些。他们实现了网络套接字、媒体管理、正则表达式、基本几何，`QVariant`基本上是一个动态属性处理程序......

我的意思是，将它们称为“GUI 包”似乎很奇怪。它可以像一个 GUI 一样小，但它也可以是顶级 Python 上的一个完整掩码，您从不使用裸函数并依赖于`QObjects`一切。

这个概念有名字吗？如果我在做，比如说，科学编程，还有其他我应该注意的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:34:22.933

框架、平台、工具包。PyQT 称自己为工具包。[DirectX](http://en.wikipedia.org/wiki/DirectX)是您所描述的功能齐全的框架，它旨在在 Windows 和 Xbox 等平台上运行。我使用[ExpressJS](http://expressjs.com/)用于 Web 开发的框架，但它的大部分核心功能要么在 NodeJS 服务器中，它没有被官方称为框架 AFAIK；它通过用于服务器端互联网代码的 javascript 接口公开了几乎整个操作系统。对于科学编程，Matlab 和 Octave 都称自己为语言，但我会称它们为平台，因为它们具有图形界面和 GUI 构建工具，以及整个模块生态系统，并且因为您的代码存在于它们的系统内部。相比之下，OpenGL、scipy 和 numpy 是库，因为它们被用作项目内部的组件。还有像[Wordpress](http://wordpress.org/)和[Drupal这样的内容管理系统 (CMS)，像](http://drupal.org/)[Tryton](http://www.tryton.org/)这样的企业资源规划系统 (ERP)，可能还有一堆其他的“框架”和“平台”软件类别的子类别。

总而言之，对软件进行[分类并不容易。](http://xkcd.com/867/)我们需要标准化一个分类法，然后制定[新的](http://xkcd.com/927/)标准化分类法来弥补第一个分类法的不足；）

# javascript - javascript：如何选择和解析文件

> ID：15282711
> 
> 赞同：1
> 
> 时间：2013-03-07T22:07:29.063
> 
> 标签：javascript

Javascript 新手，希望编写一个接受输入文件的程序`filenames.txt`，测试每一行以查看它是否包含大于 256 个字符的文件路径，然后将结果以屏幕文本和可序列化格式输出，即.csv

这是我到目前为止的代码，我在问如何访问所选文件并解析它以获取超过 256 个字符的路径

```
<html>

<head>
    <title>256 character finder</title>
    <link href="https://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="https://netdna.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
</head>

<body>

    Pick a file:
    <br>
    <input id="lefile" type="file" style="display:none">

    <div class="input-append">
       <input id="fileSelect" class="input-large" type="text">
       <a class="btn" onclick="$('input[id=lefile]').click();">Browse</a>
    </div>

    <div>
        <input type="text" value="whatever" class="field left" readonly>
    </div>

</body>

<script type="text/javascript">

    $(document).ready(function() {
        $('input[id=lefile]').change(function() {
           $('#fileSelect').val($(this).val());
        });

    }

</script>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:14:27.667

[http://jsfiddle.net/Fcg2X/](http://jsfiddle.net/Fcg2X/)

尝试这个：

```
$(document).ready(function() {
    $('[type=file]').change(function() {
        if (!("files" in this)) {
            alert("File reading not supported in this browser");
        }
        var file = this.files && this.files[0];
        if (!file) {
            return;
        }
        var fileReader = new FileReader();
        fileReader.onload = function(e) {
            var text = e.target.result;
            //do something with text
            document.body.innerHTML = text;
        };
        fileReader.readAsText(this.files[0]);
    });
}); 
```

顺便说一句，不支持的浏览器包括 IE9，所以请注意。虽然多年来一直在 Firefox 和 Chrome 中工作。

# javascript - 使用 Greasemonkey 删除一个 javascript 函数

> ID：15282714
> 
> 赞同：5
> 
> 时间：2013-03-07T22:07:31.687
> 
> 标签：javascript, function, greasemonkey

我访问了一个 HTML 头部带有 javascript 文件的网站

```
<script language="javascript" src="javscript.js"></script> 
```

这个文件里面的代码是：

```
// keypress management 
if (document.layers) document.captureEvents(Event.KEYPRESS)
function update(e) {        
    if (document.all) {             // Explorer
        if (event.keyCode==13) document.forms[0].submit();  // 13 = ENTER
        else if (event.keyCode==26) runHelp(hplk);          // 26 = CTRL+Z
        return;
    } else {                                                // mozilla
        if (e.which==13) document.forms[0].submit();        // 13 = ENTER
        else if (e.which==26) runHelp(hplk);                // 122 = CTRL+Z     
        return;         
    }
}
document.onkeypress=update; 
```

我想用 Greasemonkey 禁用/删除/替换这个功能。

我试过了

```
unsafeWindow.update = function(){} 
```

没有结果！（控制台中没有错误）

有没有办法杀死这个功能？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-07T23:07:10.687

目前尚不清楚这`update`是一个全局函数。如果不是，那么这种方法将行不通。

但是您可以使用以下命令覆盖按键处理程序：

```
unsafeWindow.document.onkeypress = function(){}; 
```

* * *

* * *

[`@run-at document-start`](http://wiki.greasespot.net/Metadata_Block#.40run-at)对于有选择地阻止或替换任何 JS（在 Firefox 上）的通用、 高性能方法，请使用[checkForBadJavascripts 函数](https://gist.github.com/2620135)，如下所示：

```
// ==UserScript==
// @name        _Replace select javascript on a page
// @include     http://YOUR_SERVER.COM/YOUR_PATH/*
// @require     https://gist.github.com/raw/2620135/checkForBadJavascripts.js
// @run-at      document-start
// @grant       GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/

checkForBadJavascripts ( [
    [   false,
        /document\.onkeypress\s*=\s*update/,
        function () {
            addJS_Node (myKeypressFunction.toString() );
            addJS_Node ('document.onkeypress = myKeypressFunction;');
        }
    ]
] );

function myKeypressFunction (evt) {
    /*  DO WHATEVER HERE BUT USE NO GREASEMONKEY FUNCTIONS INSIDE
        THIS FUNCTION.
    */
    console.log ("Keypress function fired.");
} 
```

* * *

[有关更多信息，请参阅此答案`checkForBadJavascripts`。](https://stackoverflow.com/a/10468821/331508)

# php - 模型在自身内部调用自己是不好的做法吗？

> ID：15282719
> 
> 赞同：2
> 
> 时间：2013-03-07T22:07:53.827
> 
> 标签：php, laravel, eloquent

这是一个例子，在 Laravel 中使用 Eloquent。

假设我正在开发 CMS。

*   控制器采用路由并通过路由查找页面。
*   该模型提供了一个静态函数，该函数使用路由来找出它正在寻找的行的 id
*   然后模型**使用自己**执行数据库查询并返回结果

**示例控制器代码：**

```
Route::get('(.*)', function($route)
{
    $page = Page::load_by_route($route);
}); 
```

**示例型号代码：**

```
class Page extends Eloquent {

    public static function load_by_route($route)
    {
        // Explode the route and trace to find the actual id of the row we need.
        // ... some lines of code to accomplish it...

        // Use the $id we discovered to perform the actual query
        $page = Page::find($id)->first();

        return $page;
    }
} 
```

在你问“为什么你不能首先使用*Page::where('route', '=', $route)->first()*之前：我不知道'如何做'这个例子。我只是想知道在页面模型中使用 Page:: 是否不好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T22:10:51.507

不，但约定说用来`self`引用当前类：

```
$page = self::find($id)->first(); 
```

# java - HttpClient如何跟踪请求

> ID：15282720
> 
> 赞同：1
> 
> 时间：2013-03-07T22:07:55.650
> 
> 标签：java, httpclient, office365

问题是我想从代码（Java）注册一个帐户。我有这个表格要注册：

[https://portal.microsoftonline.com/Signup/MainSignUp15.aspx?&OfferId=55A1B852-7BB9-4d78-AE46-0D1B213D1725&dl=LITEPACK_P2&Country=US&culture=en-us&ali=1](https://portal.microsoftonline.com/Signup/MainSignUp15.aspx?&OfferId=55A1B852-7BB9-4d78-AE46-0D1B213D1725&dl=LITEPACK_P2&Country=US&culture=en-us&ali=1)

当然，这里我们有一个验证码，这就是我不想注册自动帐户的原因。我只想从代码注册，我会以某种方式输入验证码。

让我们认为没有验证码。

我想用 注册这个`HttpClient`，但我不知道怎么做。我真的不知道该怎么做，我正在考虑使用`httpPost`正确的名称值，但是我必须在哪里发帖？，到哪个 URL？。

也许你可以给我一个工具来跟踪我的请求过程或者我应该怎么做？

在此先感谢您，任何小费都将不胜感激。

# zend-framework - zend框架有框架吗？

> ID：15282722
> 
> 赞同：0
> 
> 时间：2013-03-07T22:08:08.943
> 
> 标签：zend-framework, zend-framework2

在我的办公室，我们目前使用 ZF1，我们正在寻找使用 ZF2。

我们需要很*长时间*才能将简单的网站放在一起，因为 ZF 似乎不够有条理——在我看来，它几乎是一个非框架。

无论如何，我想知道是否有人在上面构建了一种更“标准”的框架，或者是易于使用且有据可查的骨架应用程序 - 一个拥有您在其他更简单框架中可以找到的所有标准东西的应用程序，例如CI/蛋糕/交响乐等

我问的原因是因为我认为没有任何方法可以说服我的老板我们应该使用其他东西，而且我认为如果整个过程可以简化一点，它将极大地受益于团队的其他成员。

干杯，约翰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T09:39:28.783

我写了一篇关于这个的博客文章..认为它在这种格式下可能更有用:)

[http://john-hunt.com/2013/03/08/php-frameworks-a-serious-issue/](http://john-hunt.com/2013/03/08/php-frameworks-a-serious-issue/)

# mysql - 将“schema.sql”文件导入 PHPMyAdmin

> ID：15282725
> 
> 赞同：2
> 
> 时间：2013-03-07T22:08:21.957
> 
> 标签：mysql, phpmyadmin

我正在将站点从一台服务器移动到另一台服务器，并已成功将文件移动过来并设置了一个新的 mySQL 数据库。然后我将旧数据库导入新数据库，一切正常。我还提供了另一个文件，但我无法导入它。它是一个“schema.sql”文件。有人可以解释这是什么以及我将如何将它导入/与我的其他数据库一起导入吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:17:07.627

在 phpMyAdmin

```
1\. Databases -> Create Database -> Set name and correct collation -> Create

2\. Choose newly created database in left pane

3\. Import -> File to import -> Choose file -> Click Go 
```

# c - 模拟导致转储？

> ID：15282726
> 
> 赞同：-3
> 
> 时间：2013-03-07T22:08:32.330
> 
> 标签：c

我是*C*的新手，在进行模拟时需要帮助来解决问题。

当我运行 10 次模拟时，它运行良好。但是，当我运行 100 次模拟时，错误消息显示**分段错误（核心转储） 。**提前感谢您帮助解决此问题。

顺便说一句，我的代码真的很长（大约 1000 行）而且很丑。如果谁能提供帮助，我非常乐意提供我的代码供您查看。

谢谢，简

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:11:55.310

我认为您需要添加跟踪打印和/或学习如何使用 GDB 之类的调试器及其 GUI 前端 DDD。您需要测试您的代码并确定它失败的地方并学习正确的调试技术。

你不能只把你所有的代码看成一个盒子，然后说它不起作用。您需要确定哪些有效，哪些无效。

段错误意味着您在某处处理内存错误，访问了该程序允许访问的内存之外的内存。

由于这是一个初学者问题，我将借此机会向初学者推广我建议的问答网站。简单的问题都可以，并得到积极的建设性建议。如果您喜欢这个想法，请成为[追随者](http://area51.stackexchange.com/proposals/52242/beginner-programmers?referrer=YHFcRobXPDGfDpFmz1HCvA2)

# objective-c - 在 UITableView 中搜索，但保留每个部分的结果

> ID：15282728
> 
> 赞同：1
> 
> 时间：2013-03-07T22:08:33.787
> 
> 标签：objective-c, uitableview, uisearchbar

当我查看此表以查找产品时，我强迫自己按产品名称搜索。
在此列表中，您将找到名称、图像、产品描述和拇指。
请看下面的代码：

```
-(void) lookinfor
{
    NSString *searchText        = search_bar.text;
    NSMutableArray *searchArray = [[NSMutableArray alloc] init];
    dict_produtos               = [[NSMutableDictionary alloc] init];

    for (NSDictionary *dictionary in array_sections)
    {
        NSArray *array = [dictionary valueForKey:@"products"];
        [searchArray addObjectsFromArray:array];
    }

    for (NSDictionary *dicts in searchArray)
    {
        NSString *sTemp = [dicts objectForKey:@"name"];

        NSRange titleResultsRange = [sTemp rangeOfString:searchText options:NSCaseInsensitiveSearch];

        if (titleResultsRange.length != 0)
        {
            [dict_produtos setObject:sTemp forKey:@"name"];
            [dict_produtos setObject:[dicts objectForKey:@"thumb"] forKey:@"thumb"];
            [dict_produtos setObject:[dicts objectForKey:@"image"] forKey:@"image"];
            [dict_produtos setObject:[dicts objectForKey:@"description"] forKey:@"description"];
        }
    }
    searchArray = nil;
} 
```

我完美地得到了整个列表，即寻找名称并让拇指进入表格的单元格，完美，这就是我需要的。

所以，在计算部分的行时，只返回 1 行（名称、图像、拇指和描述）。所以只返回 1 个产品。

这是我发现将所有数据保存在一起的唯一解决方案

因此，我在搜索时无法保留这些部分，而且，只出现 1 个结果（其他结果没有出现，即使找到了超过 1 条记录）
有没有人有一个更好的解决方案？

感谢大家的帮助！

# sql-server - 我可以配置 SSMS 智能感知以正确排序吗？

> ID：15282729
> 
> 赞同：2
> 
> 时间：2013-03-07T22:08:44.357
> 
> 标签：sql-server, sorting, intellisense, sql-server-2008

我正在使用两个具有相似名称的表：`Projections`和`ProjectionStatus`.

如果我键入`select * from projections`，智能感知会自动将表名补全为`ProjectionStatus`. 我必须向下箭头`Projections`或删除错误自动完成的表名才能获得我想要的查询。

有没有办法配置智能感知按字母顺序对列表进行排序？

更改表的名称不是一种选择。（显然`projections`会`projection_status`阻止这个问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:13:28.830

它通常默认按字母顺序排序，为什么不尝试清除缓存？这似乎解决了 99% 的智能感知问题。

在 SSMS 中，编辑 > 智能感知 > 刷新本地缓存

或者只是，`Ctrl`+ `Shift`+ `R`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T15:22:57.297

我正在为数据库中的表获取智能感知的这种排序顺序：

AccountContacts
AccountSentEmail
AccountStandards
Accounts

当我将该列表放入 Excel 并对其进行排序时... Excel 将其排序为以下顺序：

AccountContacts
**Accounts**
AccountSentEmail
AccountStandards

为什么 IntelliSense 不能正确排序？

...即使清除了缓存。

谢谢。

* * *

在发布上述内容后，我看到了这个：

SSMS 在大多数情况下按字母顺序排序，但**它不遵循我们在小学时**针对较长单词的较短版本所学的规则。Intellisense 认为投影应该排在投影状态之后。– 乔恩·克罗威尔 20​​13 年 3 月 7 日 22:19

我的评论：

*“这不符合我们在小学时学到的规则”*

是：

“这简直太棒了！”

* * *

哦，好吧，我想我们只能忍受它。

# linux - 如何在 sed 中用相同的数字和括号外的字母替换方括号内的字母和数字？

> ID：15282733
> 
> 赞同：0
> 
> 时间：2013-03-07T22:08:58.833
> 
> 标签：linux, string, bash, replace, sed

例如，我将如何做到这一点：

```
replace: today_is_sunny[0F]
with: today_is_sunny_F[0] 
```

请记住，方括号内的零可以是任何数字，而方括号内的字母始终是 F。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:12:11.500

我认为这应该可以解决问题

```
sed 's|today_is_sunny\[\([0-9]\)F\]|today_is_sunny_F\[\1\]|' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:14:56.287

您可以尝试以下方法：

```
echo "today_is_sunny[0F]" | sed 's/\[\([0-9]\)F\]/_F\[\1\]/g' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:16:05.073

这条短线应该可以解决您的问题：

```
sed 's/\[/_F&/;s/.]/]/' file 
```

例如

```
kent$  echo "today_is_sunny[0F]"|sed 's/\[/_F&/;s/.]/]/'
today_is_sunny_F[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:16:44.970

考虑任何数字：

```
sed -e 's;\(\[\)\([0-9]\)F;_F\1\2;' 
```

用法可能是：

```
echo 'today_is_sunny[0F]' | sed -e 's;\(\[\)\([0-9]\)F;_F\1\2;' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T22:34:46.410

使用命名字符类的示例：

```
sed -r 's/\[([[:digit:]])([[:alpha:]])\]/\2[\1]/' 
```

# iphone - 使用 Objective-C API 获取 Youtube 频道播放列表

> ID：15282736
> 
> 赞同：6
> 
> 时间：2013-03-07T22:09:29.590
> 
> 标签：iphone, objective-c, youtube, gdata

我正在尝试使用 Google 的 Objective-C Youtube API 来获取 youtube 频道的播放列表 - 没有运气。

-我从以下网址下载了 Google 的官方 API： [http ://code.google.com/p/gdata-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FYouTubeSample](http://code.google.com/p/gdata-objectivec-client/source/browse/#svn%2Ftrunk%2FExamples%2FYouTubeSample)

但是示例应用程序并没有真正做任何事情——它甚至不是一个 iOS 示例应用程序。似乎是一个 Mac OS 应用程序。它的自述文件说：“这个示例应该在 GTL.framework 上自动构建和复制，作为构建和运行过程的一部分。”

好吧……然后呢？

你如何让它在 iPhone 应用程序中工作？

我还没有找到任何实际的说明来完成这项工作。

知道我们应该在这里做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-21T20:43:13.080

youtube 的“gdata-objectivec-client”已被 JSON-API [Link](https://code.google.com/p/gdata-objectivec-client/)取代。向下滚动到 youtube。

此处为支持 JSON-API 是详细信息[链接](https://developers.google.com/appengine/docs/java/endpoints/consume_ios)。

要获取播放列表，请查看[Link](https://code.google.com/p/google-api-objectivec-client/source/browse/trunk/Examples/YouTubeSample/YouTubeSampleWindowController.m)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T09:52:11.297

我花了一天半的时间试图弄清楚如何使用他们作为示例给出的 MAC OSX 应用程序。我最终得到了一个 iPhone 应用程序，我设法构建它来获取我从 YouTube 上传的所有视频。

链接：[YouTube项目](https://github.com/naorcho/YouTubeUploadsList)

为了使它工作：

*   您必须从 google 添加 GData 项目
*   在 LTMasterViewController.m-> (GDataServiceGoogleYouTube *)youTubeService: 输入你的用户名和密码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T04:55:50.463

您可以在此路径尝试源代码 [https://bitbucket.org/eivvanov/youtubedemo/overview](https://bitbucket.org/eivvanov/youtubedemo/overview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T12:36:28.877

对于迷路的新手：考虑一个示例函数，这将有助于理解获取、解析、显示等的整个周期，并将 youtube 频道的视频专门带到您的 tableview 中。我没有在这里写 tableview 部分

```
-(void)initiateRequestToYoutubeApiAndGetChannelInfo
{
NSString * urlYouCanUseAsSample = @"https://www.googleapis.com/youtube/v3/search?key={YOUR_API_KEY_WITHOUT_CURLY_BRACES}&channelId={CHANNEL_ID_YOU_CAN_GET_FROM_ADDRESS_BAR_WITHOUT_CURLY_BRACES}&part=snippet,id&order=date&maxResults=20";

NSURL *url = [[NSURL alloc] initWithString: urlYouCanUseAsSample];

// Create your request
NSURLRequest *request = [NSURLRequest requestWithURL:url];

// Send the request asynchronously remember to reload tableview on global thread
[NSURLConnection sendAsynchronousRequest:request queue:[[NSOperationQueue alloc] init] completionHandler:^(NSURLResponse *response, NSData *data, NSError *connectionError) {

 // Callback, parse the data and check for errors
if (data && !connectionError) {
    NSError *jsonError;

    NSDictionary *jsonResult = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&jsonError];

    if (!jsonError) {
    // better put a breakpoint here to see what is the result and how it is brought to you. Channel id name etc info should be there

        NSLog(@"%@",jsonResult);

    /// separating "items" dictionary and making array

        // 
id keyValuePairDict = jsonResult;
NSMutableArray * itemList = keyValuePairDict[@"items"];
        for (int i = 0; i< itemList.count; i++) {

    /// separating VIDEO ID dictionary from items dictionary and string video id
        id v_id0 = itemList[i];
        NSDictionary * vid_id = v_id0[@"id"];
        id v_id = vid_id;
        NSString * video_ID = v_id[@"videoId"];

    //you can fill your local array for video ids at this point

       //     [video_IDS addObject:video_ID];

    /// separating snippet dictionary from itemlist array
        id snippet = itemList[i];
        NSDictionary * snip = snippet[@"snippet"];

     /// separating TITLE and DESCRIPTION from snippet dictionary
        id title = snip;
        NSString * title_For_Video = title[@"title"];
        NSString * desc_For_Video = title[@"description"];

    //you can fill your local array for titles & desc at this point 

          //  [video_titles addObject:title_For_Video];
           // [video_description addObject:desc_For_Video];

     /// separating thumbnail dictionary from snippet dictionary

        id tnail = snip;
        NSDictionary * thumbnail_ = tnail[@"thumbnails"];

     /// separating highresolution url dictionary from thumbnail dictionary

        id highRes = thumbnail_;
        NSDictionary * high_res = highRes[@"high"];

     /// separating HIGH RES THUMBNAIL IMG URL from high res dictionary

        id url_for_tnail = high_res;
        NSString * thumbnail_url = url_for_tnail[@"url"];
    //you can fill your local array for titles & desc at this point

            [video_thumbnail_url addObject:thumbnail_url];

        }
     // reload your tableview on main thread   
//[self.tableView    performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];
 performSelectorOnMainThread:@selector(reloadInputViews) withObject:nil waitUntilDone:NO];

  // you can log all local arrays for convenience
     //   NSLog(@"%@",video_IDS);
      //  NSLog(@"%@",video_titles);
      //  NSLog(@"%@",video_description);
      //  NSLog(@"%@",video_thumbnail_url);
    }
    else
    {
        NSLog(@"an error occurred");
    }
   }
}];

} 
```

# animation - 如何为 UIBezierPath 绘图设置动画以缓慢而不是立即出现？

> ID：15282741
> 
> 赞同：0
> 
> 时间：2013-03-07T22:09:51.883
> 
> 标签：animation, ios6, core-animation

我正在编写一个应用程序（XCode 4.6），它显示各种不同路径的图形 - 现在它只是直线和贝塞尔路径，但最终它会变得更加复杂。我目前没有使用任何图层，显示实际上非常简单。

我的 drawRect 代码如下所示：

```
- (void)drawRect:(CGRect)rect :(int) points :(drawingTypes) type //:(Boolean) initial
{
    //CGRect bounds = [[UIScreen mainScreen] bounds];
    CGRect appframe= [[UIScreen mainScreen] applicationFrame];

    CGContextRef context = UIGraphicsGetCurrentContext();

    _helper = [[Draw2DHelper alloc ] initWithBounds :appframe.size.width  :appframe.size.height :type];

    CGPoint startPoint = [_helper generatePoint] ;

    [_uipath moveToPoint:startPoint];
    [_uipath setLineWidth: 1.5];

    CGContextSetStrokeColorWithColor(context, [UIColor lightGrayColor].CGColor);

    CGPoint center = CGPointMake(self.center.y, self.center.x) ;

    [_helper createDrawing :type :_uipath :( (points>0) ? points : defaultPointCount) :center];

    [_uipath stroke];
}

- (void)drawRect:(CGRect)rect
{
    if (_uipath == NULL)
       _uipath = [[UIBezierPath alloc] init];
    else
        [_uipath removeAllPoints];

    [self drawRect:rect  :self.graphPoints :self.drawingType ];
} 
```

实际路径由辅助对象 (_helper) 生成。我想为这条路径的显示设置动画，使其在绘制时缓慢出现几秒钟 - 最简单和最快的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T14:09:17.643

“慢慢出现”是什么意思？我假设您的意思不是立即全部淡入，而是意味着您希望它看起来像是用笔绘制的路径？

为此，请执行以下操作：

创建一个与视图大小相同的 CAShapeLayer，并将其添加为视图的子层。从您的贝塞尔路径中获取 CGPath。

将 CGPath 安装到 shapeLayer 中。

创建一个 CABasicAnimation，将形状图层的 strokeEnd 属性的值从 0.0 设置为 1.0。这将导致绘制形状，就好像它从头到尾被跟踪一样。您可能需要一个包含单个连续子路径的路径。如果您希望它绕回并连接，请将其设为封闭路径。

您可以对形状图层和路径的动画更改执行各种很酷的技巧。以及它的设置（如 strokeStart 和 strokeEnd、stokeColor、fillColor 等）。如果为路径本身设置动画，则必须确保开始路径和结束路径在内部具有相同数量的控制点。（并且路径弧很棘手，因为路径具有不同数量的控制点，具体取决于弧的角度。）

# breeze - 使用 DateTimeOffset 列上的谓词查询 Breeze 时出错

> ID：15282742
> 
> 赞同：1
> 
> 时间：2013-03-07T22:10:05.247
> 
> 标签：breeze

我正在尝试使用 DateTimeOffset 列上的谓词查询我的实体，但从 Breeze.WebApi 获得 500 错误响应。错误信息是

```
Unable to perform operation: leon types:System.Nullable`1[System.DateTimeOffset], System.DateTime 
```

我看到产生的uri类似于

```
http://localhost:49800/api/Breeze Orders?$filter=LocalDateTime%20le%20datetime'2013-03-03T00%3A00%3A00.000Z' 
```

什么工作：

*   我可以查询其他日期时间、文本列
*   我可以将新数据保存到我的“LocalDateTime”字段中

查询的完整错误响应是：

```
<Error>
<Message>An error has occurred.</Message>
<ExceptionMessage>
Unable to perform operation: leon types:System.Nullable`1[System.DateTimeOffset], System.DateTime
</ExceptionMessage>
<ExceptionType>System.Exception</ExceptionType>
<StackTrace>
at Breeze.WebApi.ParseTreeVisitor.CoerceTypes(String operatorName, Expression& leftExpr, Expression& rightExpr) at Breeze.WebApi.ParseTreeVisitor.VisitBinary(ParseTreeNode node, String operatorName, Expression leftExpr, Expression rightExpr) at Breeze.WebApi.ParseTreeVisitor.VisitNode(ParseTreeNode node) at Breeze.WebApi.ParseTreeVisitor.Parse(Type rootType, ParseTreeNode node) at Breeze.WebApi.ExpressionTreeBuilder.Parse(Type rootType, String source) at Breeze.WebApi.ODataActionFilter.BuildFilterFunc(String filterQueryString, Type elementType) at Breeze.WebApi.ODataActionFilter.OnActionExecuted(HttpActionExecutedContext actionExecutedContext) at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception) at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response) at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t) at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously)
</StackTrace>
</Error> 
```

.

编辑

到达那里，但不完全。安装 Breeze 1.2.8 后，客户端现在生成正确类型的 uri，例如

```
http://localhost:49800/api/Breeze/Orders?$filter=LocalDateTime%20ge%20datetimeoffset'2013-01-01T11%3A00%3A00.000Z' 
```

在我的情况下，不需要使用 setEntityTypeForResourceName 来修复实体类型。上面的uri仍然给我错误：

```
Unable to perform operation: leon types:System.Nullable`1[System.DateTimeOffset], System.DateTimeOffset 
```

从更改我的服务器端模型

```
public Nullable<System.DateTimeOffset> LocalDateTime { get; set; } 
```

至

```
public System.DateTimeOffset LocalDateTime { get; set; } 
```

允许我的 uri 工作。那么我们能否修复可为空的 DateTimeOffset。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T04:52:12.130

这在 v 1.2.7 中已修复。如果您仍然看到错误，请回帖。

- - 更多信息 - -

自 1.2.7 以来已经有几个帖子表明此错误仍在发生。事实证明，问题不在于微风不理解“dataTimeOffsets”。除了涉及“DateTimeOffsets”的查询**之外**，微风非常宽容查询中**不正确**的实体类型/资源名称映射。这篇文章有点长，所以如果您只需要修复，请阅读最后一段。

 **当查询中声明的**资源名称**（'from' 子句中的值）无法映射到现有 entityType 名称（定义在元数据）。

如果微风可以找到映射到查询中声明的资源名称的实体类型，它将使用该实体类型的元数据来验证查询并创建 OData 过滤器字符串。但是，如果它找不到匹配的实体类型，这是一个完全可以接受的条件，因为某些“资源名称”不会映射到实体，它会尝试通过查看查询中涉及的任何常量参数来推断任何查询子句中涉及的数据类型并使用他们的数据类型。问题是 javascript 日期对象可以映射到 .NET 的“DateTime”或“DateTimeOffset”，而 Breeze 只能选择一个，在这种情况下会选择“错误”的那个。

当从查询返回数据时，这种错误映射不会导致问题，因为微风仅使用查询的实体类型来验证和构造适当的 OData 过滤器字符串。检查从任何查询返回的数据以确定返回的每个项目的实体类型，因此不需要资源名称/实体类型映射。（由于使用了“expand”或“select”子句，单个查询可能会返回多个实体类型。）

映射问题的根本原因涉及到资源名称到实体类型的映射，这些实体类型在每个 MetadataStore 中保持不变。此映射可通过**MetadataStore.getEntityTypeNameForResourceName**和**MetadataStore.setEntityTypeForResourceName**方法获得。使用实体框架元数据时，微风假定实体框架“EntitySet”名称对应于“resourceNames”。 **这个假设是造成问题的原因**。如果您查询与您的 EntitySet 名称之一不同的“resourceName”，Breeze 不知道相应的“实体类型”，并回退到推断查询中使用的数据类型，而不是使用“实体类型”元数据。

有两个相当简单的修复，其中任何一个都有效。

1) 使用 MetadataStore.setEntityTypeForResourceName 方法将您的资源名称映射到您的实体类型。请注意，您可以将任意数量的资源名称映射到相同的实体类型。

2) 将您的方法（对应于资源名称）命名为 EF 中定义的相应 EntitySet 的名称，而不是返回的类型的名称。一个常见的约定是 EntitySet 名称（以及资源​​名称）是复数形式，而 EntityType 名称通常是单数形式。即“客户”是资源名称，“客户”是实体类型**

# c# - 哪个线程拥有 RunWorkerCompleted？

> ID：15282743
> 
> 赞同：1
> 
> 时间：2013-03-07T22:10:07.320
> 
> 标签：c#, wpf

这一切都是新的……</p>

如果我从主 UI 线程启动一个 BackgroundWorker，我可以成功地在同一个 BackgroundWorker 的 RunWorkerCompleted 事件中更新我的 UI 控件。这部分效果很好。

但是，如果我从 UI 线程以外的线程启动 BackgroundWorker，那么如果我尝试操作任何 UI 控件，就会在 RunWorkerCompleted 方法中出现错误。

我的问题：启动 BackgroundWorker 的线程是否与拥有 RunWorkerCompleted 方法的线程相同？如果是这样，是否可以启动一个 BackgroundWorker，使其关联的 RunWorkerCompleted 方法位于 UI 线程上？

（仅供参考，我通过在有问题的 RunWorkerCompleted 方法中使用调度程序解决了这个问题，但我希望有另一种方法。谢谢。）

# jquery - html，选择选项，jquery click 仅适用于 firefox

> ID：15282747
> 
> 赞同：1
> 
> 时间：2013-03-07T22:10:30.290
> 
> 标签：jquery, html

这仅适用于 Firefox，我不知道为什么。单击橙色跨度可在每个浏览器中使用。单击选择选项仅适用于 Firefox... 为什么？

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script>
</head>
<body>

    <script type="text/javascript">
        $(document).ready(function() {
            $('.click').click(function() {
                alert("clicked");
            });
        });
    </script>

    <select>
        <option class="click" value="">click</option>
    </select>

    <br /><br /><br /><br />

    <span class="click" style="display:inline-block;width:50px;height:20px;background-color:orange;padding:4px;">click</span>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:12:37.630

您不能单击选择选项，您可以在选择中捕获**更改**事件，这适用于所有浏览器：

```
<script type="text/javascript">
    $(document).ready(function() {
        $(document.getElementById("colors")).change(function() {
            alert($(this).val());
        });
    });
</script>

<select id="colors">
    <option value="click1">click2text</option>
    <option value="click2">click2text</option>
</select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:12:41.687

`onclick`不是 的标准事件`<option>`，firefox 添加了它很好，但它没有在规范中定义。

您应该改用`<select>`'onchange` 事件：

```
$(document).ready(function() {
        $('select').change(function() {
            if (this.value == "theValue")
                alert("clicked");
        });
    }); 
```

# knockout.js - Knockout mapping如何添加和更新

> ID：15282748
> 
> 赞同：1
> 
> 时间：2013-03-07T22:10:30.767
> 
> 标签：knockout.js, knockout-mapping-plugin

我有一个如下所示的 js 对象

```
{Messages: [
    {Content: "some content",
    Id: "203",
    IsNew: false,
    Subject: "some Subject"},
    ....
]} 
```

我希望至少可以观察到“IsNew”。为此，我使用了 ko.mapping 插件

```
//Within success of ajax call
var vm = ko.mapping.fromJS(data) 
```

但我也需要在我的 vm 上观察到“SelectedMessage”和 SetSelected 函数。但我不确定这些成为我的虚拟机一部分的最佳方式。

有人可以解释我如何在我的虚拟机上包含这些属性，当我使用更新的消息列表更新虚拟机时，如何保持这些属性不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:27:06.350

# android - Phonegap (android) - 在 InAppBrowser 中启用 URL TextView

> ID：15282752
> 
> 赞同：1
> 
> 时间：2013-03-07T22:10:46.833
> 
> 标签：android, cordova

如何在 Android 上运行的 Phonegap 2.5.0 的 InAppBrowser 中启用 URL 字段？目前，当我点击该字段以键入 URL 时，没有任何反应（尽管在 Eclipse 中它报告“TextView 不支持文本选择。操作模式已取消。”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:38:39.517

是的，这是设计使然。该文本字段中的位置不可编辑。如果您想要这种类型的功能，您可能需要返回使用[ChildBrowser](https://github.com/phonegap/phonegap-plugins/tree/master/Android/ChildBrowser)或自己编辑[InAppBrowser](https://git-wip-us.apache.org/repos/asf?p=cordova-android.git;a=blob;f=framework/src/org/apache/cordova/InAppBrowser.java;h=886a95b02ef90fb4b10ddbdd7a31b1c8219dee75;hb=25aef945d14eae7167ece73c11e32d8471114bee)代码。

# rvm - 安装 Rails 时遇到问题

> ID：15282756
> 
> 赞同：0
> 
> 时间：2013-03-07T22:10:58.460
> 
> 标签：rvm

好吧，今天我的 rvm 内爆（因为我现在不记得的原因，并且几乎为此诅咒自己）......

已经安装回来了。

正在尝试安装导轨...

这就是我不断得到的：

```
ERROR:  Error installing rails:
bundler requires RubyGems version >= 1.3.6 
```

不知道是什么意思...

我该如何解决？

旁注：现在我记得为什么我内爆了我的 rvm。这是安装 readline 包。我想拥有 Rails 控制台，并认为这是要走的路……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:20:32.510

尝试做一个

```
gem update --system 
```

更新您的 RubyGems。它应该让你进入 2.0 版。

# c# - 我想检查单击了哪个按钮

> ID：15282761
> 
> 赞同：2
> 
> 时间：2013-03-07T22:11:09.537
> 
> 标签：c#, winforms, visual-studio-2010, file-io

现在我有一个将文件复制到另一个目录的主窗体。

我想在 catch 语句中处理“已存在同名文件”的情况。

我希望通过弹出另一个窗口来完成此操作，询问是通过按钮替换还是保留。然后使用 if 语句检查单击了哪个按钮

当前代码：

```
 catch (IOException x)
            {
                Copy copy = new Copy();
                copy.ShowDialog();
            } 
```

目标：

```
 catch (IOException x)
            {
                Copy copy = new Copy();
                copy.ShowDialog();

                    if (//Replace button was clicked)
                        do this
                    else if (//Keep button was clicked)
                        do this
            } 
```

我似乎找不到能达到这个目的的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:22:49.880

您可以让您的“复制”对话框在`DialogResult`单击按钮时返回。例如，您可以使用`DialogRsult.OK`替换按钮和`DialogResult.Cancel`保留按钮。像这样的东西：

单击复制对话框中的替换按钮时，您可以在`Replace_Click`事件处理程序中进行设置

```
this.DialogResult = DialogResult.OK;
this.Close(); 
```

`DialogResult.Cancel`在`Keep_Click`事件处理程序中以类似的方式设置

你可以这样调用你的对话框：

```
Copy copy = new Copy();
DialogResult dr = copy.ShowDialog();  

if(dr == DialogResult.OK)
    //Replace clicked
else if(dr == DialogResult.Cancel)
    //Keep clicked 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:21:24.347

您应该考虑改用[DialogResult](http://support.microsoft.com/kb/816145)类。

你想要这样的东西：

```
catch (IOException x)
{
   DialogResult dr = new DialogResult ();
   dr.ShowDialog(); 

   if (dr == DialogResult.OK)
      MessageBox.Show ("File replaced.");

   else if (dr == DialogResult.Cancel)
      MessageBox.Show ("File kept.");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T22:23:40.087

不要使用异常来处理这种情况。
只需测试文件是否存在并使用带有 YesNo 按钮的简单 MessageBox

```
sourceFile = "Your_Source_File_To_Copy";
string destFile = Path.Combine(destFolder, Path.GetFileName(sourceFile));
if(File.Exists(destFile))
{
    DialogResult dr = MessageBox.Show("File already exist! Do you wish to overwrite?", 
                                      "Warning!",
                                      MessageBoxButtons.YesNo);
    if(dr == DialogResult.Yes)
         // Overwrite
    else
         // Do something else
} 
```

正如[利珀特先生在这个答案中所说](https://stackoverflow.com/questions/3802658/try-catch-bad-form?rq=1)，

> 例外是为了帮助您调试程序，而不是控制其流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:20:01.990

您是否查看过 Form.ShowDialog 方法？

[http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx](http://msdn.microsoft.com/en-us/library/c7ykbedk.aspx)

来自 MSDN 的代码摘录：

```
public void ShowMyDialogBox()
{
   Form2 testDialog = new Form2();

   // Show testDialog as a modal dialog and determine if DialogResult = OK. 
   if (testDialog.ShowDialog(this) == DialogResult.OK)
   {
      // Read the contents of testDialog's TextBox. 
      this.txtResult.Text = testDialog.TextBox1.Text;
   }
   else
   {
      this.txtResult.Text = "Cancelled";
   }
   testDialog.Dispose();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T22:24:27.910

复制前检查文件是否存在：

```
 if (File.Exists(destFileName))
    {
        Copy copy = new Copy();
        System.Windows.Forms.DialogResult res = copy.ShowDialog();
        if (res == System.Windows.Forms.DialogResult.Yes)
            File.Copy(sourceFileName, destFileName, true);
    }
    else
    {
        File.Copy(sourceFileName, destFileName);
    } 
```

还要适当地设置表单`DialogResult`中的属性。`Copy`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-07T22:24:56.137

也许实现你自己的结果就是你想要的。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        var result = new Form2().ShowDialog();
        MessageBox.Show(result.ToString());
    }
}

public partial class Form2 : Form
{

    ButtonResult buttonResult;

    public Form2()
    {
        InitializeComponent();
    }

    public new ButtonResult ShowDialog()
    {
        base.ShowDialog();
        return buttonResult;
    }

    private void KeepButton_Click(object sender, EventArgs e)
    {
        buttonResult = ButtonResult.Keep;
        this.Close();
    }

    private void ReplaceButton_Click(object sender, EventArgs e)
    {
        buttonResult = ButtonResult.Replace;
        this.Close();
    }
}

public enum ButtonResult
{
    None = 0,
    Keep = 1,
    Replace = 2,
} 
```

# javascript - 淡出 Div 内容 - 空 Div 内容 - 淡入新内容

> ID：15282762
> 
> 赞同：2
> 
> 时间：2013-03-07T22:11:12.170
> 
> 标签：javascript, video, fadein, fadeout

我正在为我的按钮使用 onClick 功能。我的按钮代码如下所示：

```
<a onClick="fadeNext('#myDIV1',500);">Button 1</a>
<a onClick="fadeNext('#myDIV2',500);">Button 2</a> 
```

我的 JS 函数如下所示：

```
function fadeNext(selectedId, speed) {

          var containerID = '#imageSwap';
          var vis = ($(containerID + ' div:visible').length > 0) ? $(containerID + ' div:visible').eq(0) : $(containerID + ' div').eq(0);
          var next = $(selectedId);
          vis.fadeOut(speed);

          next.fadeIn(speed);
          } 
```

这会正确淡化内容并且效果很好，但视频内容 (Vimeo) 在不可见时仍会播放。尝试了这个 JS，但仍然没有运气：

```
function fadeNext(selectedId, speed) {

          var containerID = '#imageSwap';
          var vis = ($(containerID + ' div:visible').length > 0) ? $(containerID + ' div:visible').eq(0) : $(containerID + ' div').eq(0);
          var next = $(selectedId);
          vis.fadeOut(speed, function() {
              $(this).empty().show();
          });

          next.fadeIn(speed);
          } 
```

有了这个 JS，内容不再淡出或清空。

我是一名 JS 菜鸟，无法让 empty() 代码正常工作。主要原因是我的 DIV 将包含视频 (Vimeo)。当用户单击更改内容时，我希望卸载视频，因此不再播放视频/声音。

任何帮助/建议将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T04:28:51.963

查看我的小提琴叉：http: [//jsfiddle.net/tutanramen/umJQ9/16/](http://jsfiddle.net/tutanramen/umJQ9/16/)

我添加了指向外部资源的链接：[https ://raw.github.com/vimeo/player-api/master/javascript/froogaloop.js](https://raw.github.com/vimeo/player-api/master/javascript/froogaloop.js)

然后我给每个 iframe 一个 id（v1 和 v2，但它们没有在这个小提琴中使用）和一类播放器。

然后将此添加到fadeNext：

```
$(".player").each(function() {
    $f($(this)[0]).api("pause");
}); 
```

现在，当您单击以选择其他视频时，它实际上会暂停所有视频。

# php - 我需要了解课程

> ID：15282768
> 
> 赞同：2
> 
> 时间：2013-03-07T22:12:14.067
> 
> 标签：php, oop

我正在编写一个新的预订系统，因为我之前写的一个现在已经使用了几年而且看起来很次品。我想写一个非常灵活和可移植的，我想使用类。

我是 php 语言中的类和 OOP 的新手，我之前写过一堂课，而且进展顺利。但是，我现在对此感到困惑。这是我到目前为止所拥有的：

```
class Order 
{
    protected $require_gender = false;
    protected $require_age = false;
    protected $require_names = false;   
    protected $require_address = false; 
    protected $require_contact = false; 
    protected $require_dates = false;   
    protected $require_additional = false;

    function __construct() 
    {
        foreach(func_get_args() as $arg)
        {
            switch($arg) 
            {
                case "names":
                case "name": $this->require_names = true; break;
                case "age": $this->require_age = true; break;
                case "mf":
                case "gender": $this->require_gender = true; break;
                case "address": $this->require_address = true; break;
                case "contact": $this->require_contact = true; break;
                case "date":
                case "dates": $this->require_dates = true; break;
                case "additional": $this->require_additional = true; break;
            }
        }
    }   
}
class Person extends Order 
{   
    private $gender;
    private $age;
    private $names = array('first' => "", 'last' => "", 'full' => "");
    private $address = array(   '1' => "",
                    '2' => "",
                    '3' => "",
                    '4' => "",
                    'Postcode' => "",
                    'Country' => "");
    private $contact = array('telephone' => "", 'email' => "");
    private $dates = array();
    private $additional;
    private $active;    

    function setGender($var)        {$this->gender = $var;}
    function setAge($var)       {$this->age = $var;}
    function setNames($var)         {$this->names = $var;}
    function setAddress($var)       {$this->address = $var;}
    function setContact($var)       {$this->contact = $var;}
    function setDates($var)         {$this->dates = $var;}
    function setAdditional($var)    {$this->additional = $var;}
    function setActive($var)        {$this->actrive = $var;}
} 
```

到目前为止，我想，很好。但现在我很困惑。因为我认为所谓的“超类”或父类将是客户的订单。因为这就是他们正在做的事情，所以他们正在订购门票。然后在这之下，他们需要添加任意数量的人。

我还希望（使其可移植）能够设置要求，对于每个预订系统，这是因为要求需要更改。例如，并非每个人都想知道日期或邮政地址。这不会因人而异，但每次使用此代码时都会*有所不同。*所以我想从逻辑上讲我会写：

```
$order = new Order("names","address","dates");

$p = new Person(); 
```

`new Order`然后，我将根据我想要使用的要求`names`设置a`address`和`dates`. 这样，我想，person 对象会做出相应的反应，只允许设置这些东西，并且只在被要求时处理这些参数。但后来我发现 - 当我创建时`new Person()`，它也会自动运行`class Orders()`！我不希望它这样做。我想`Orders()`成为制定所有要求并总体上管理整个秩序的霸主，而人只是成为该秩序中的一个人。

我不确定我的问题是否是因为我使用`extend`而不是`implements`或类似的东西，但是有人可以解释一下我接下来应该改变或做什么吗？我渴望学习。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:19:37.573

如果您不希望父类的构造函数在子对象的实例化时运行，则需要为子类添加构造函数。这可以是一个空函数：

在`Person`：

```
function __construct() 
{
  // uncomment the next line should you want to call the parent constructor
  // parent::__construct();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:20:44.487

您的问题是您使用继承的方式，即扩展。人们通常会说，如果类具有“is-a”关系，那么继承是很好用的。对于两个类 A 和 B，如果说“B 是 A 的一种”是合乎逻辑的，那么让 B 扩展 A 是可以的。

//jk

# foreach - 如何调整这个 wordpress 循环查询代码以包含分页？

> ID：15282778
> 
> 赞同：0
> 
> 时间：2013-03-07T22:12:48.747
> 
> 标签：foreach, pagination, wordpress

我已经获取了以下代码来查询我在 Wordpress 中的帖子，并且所有工作都按预期进行。

我现在想为此添加分页。既然我知道它可以工作，我不想过多地更改代码，任何人都可以建议最好的方法来调整它以包含分页吗？

如果存在，我希望它最多显示和`18 posts per page`拥有其他页面。此代码用于自定义类别模板，但我还在阅读设置下设置了一个静态页面设置，并且主要帖子的显示使用 home.php，我想使用相同或相似的循环代码来分页. 任何帮助表示赞赏。这是代码：`next``prev links`

```
<div id="Items">
<ul>
<?php
// Grid sorted alphabetically
if (is_category('categoryName')) 
{
$args = array( 'posts_per_page' => -1, 'orderby'=> 'title', 'order' => 'ASC', 'category' => 41 );
$categoryNameposts = get_posts( $args ); 
}
foreach( $categoryNameposts as $post ) :    setup_postdata($post); 
?>
<li><?php get_template_part( 'content', get_post_format() ); ?></li>
<?php endforeach; ?>
</ul>
</div><!-- #ItemsEnd --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:18:31.087

您应该让 wordpress 知道您希望在 query_posts 中每页显示多少帖子。用这两行替换你的 $args：

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$args = array( 'posts_per_page' => 18, 'paged' => $paged, 'orderby'=> 'title', 'order' => 'ASC', 'category' => 41 ); 
```

现在显示 Next-Previous 链接：

```
<div class="paginationClass">
   <?php next_posts_link(); ?>
   <?php previous_posts_link(); ?>
</div> 
```

同样在 is_category 函数中，使用 categorySlug，而不是 categoryName。

# c# - 如何让 Intellisense 自动解决缺少的 Using 指令

> ID：15282782
> 
> 赞同：6
> 
> 时间：2013-03-07T22:13:06.650
> 
> 标签：c#, eclipse, visual-studio-2010, xna, intellisense

我刚刚安装了 VS2010 以进行一些 XNA 开发，并且我注意到，在日常使用 Eclipse 之后，似乎缺少一个非常有用的功能。当我开始从另一个命名空间输入类名时，智能感知不会显示它，因此我无法自动完成。我必须输入全名，将光标悬停在输入的类名上，然后单击出现的菜单以添加 using 指令。

有没有办法获得类似 Eclipse 中的行为，它显示当前项目中的所有类名并在您自动完成时自动添加导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T22:49:45.153

你必须使用visual studio + resharper。Resharper 是 vs 的最佳插件。它是生产力的助推器！虽然它不是免费的，但它是值得的，而且还有 30 天的免费试用期。当你开始使用 resharper 时，你不能离开它。另外，我建议你也使用 stylecop。这是一个开源代码规则验证和执行

# jsf-2 - primefaces 3.5 上传文件不起作用，我使用的是 netbean 7.2.1

> ID：15282784
> 
> 赞同：1
> 
> 时间：2013-03-07T22:13:07.580
> 
> 标签：jsf-2, primefaces

问题在于来自 primefaces web.xml 的文件上传器

```
<filter>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <filter-class>org.primefaces.webapp.filter.FileUploadFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>PrimeFaces FileUpload Filter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping> 
```

.xhtml

```
 </h:form>
               ...
            </h:form>
            <h:form enctype="multipart/form-data">
                <p:fileUpload value="#{contratosMB.fileContrato}" mode="simple"/>

                <p:commandButton value="Submit" ajax="false"  
                                 actionListener="#{contratosMB.upload}" update=":form2:formgen:growl"/>
            </h:form> 
```

contratosMB.java

```
 public void upload() {  
        if(fileContrato != null) {  
            JsfUtil.addSuccessMessage("Se ha cargado correctamente el archivo: " + fileContrato.getFileName()); 
        }  
    } 
```

我读了一些这样的问题，但没有任何帮助......我将commons-fileupload和commons-io添加到项目中，但不工作不进入上传方法，不发送异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:51:24.943

尝试改变

`actionListener="#{contratosMB.upload}"`

到

`action="#{contratosMB.upload}"`.

> 看看这个： [action 和 actionListener 之间的区别](https://stackoverflow.com/questions/3909267/differences-between-action-and-actionlistener)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T15:02:11.767

它可以创建和编辑faces-config：

```
 <dependency>
    <groupId>commons-fileupload</groupId>
    <artifactId> commons-fileupload</artifactId>
    <version>1.2.1</version>
</dependency>
<dependency>
    <groupId>commons-io</groupId>
    <artifactId> commons-io</artifactId>
    <version>1.4</version>
</dependency> 
```

但不要为我工作，因为表单上传器在其他表单内部......

```
 <h:form>
  ...
        <h:form enctype="multipart/form-data">  

            <p:messages showDetail="true"/>  

            <p:fileUpload value="#{contratosMB.fileContrato}" mode="simple"/>  

            <p:commandButton value="Submit" ajax="false"  
                             actionListener="#{contratosMB.upload}"/>  

        </h:form>  
    </h:form> 
```

任何人都可以告诉我为什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-15T11:54:17.943

嵌套“表单”元素是非法的。尝试以高级模式上传文件并使用 FileUploadListener 访问 FileUploadEvent 和数据。

# php - MySQL 分组方式 + 顺序

> ID：15282785
> 
> 赞同：0
> 
> 时间：2013-03-07T22:13:07.787
> 
> 标签：php, mysql, database, group-by

我在分组行时遇到问题。

示例表

```
ID, GroupID, INFO, COUNTER
1, 123456, INFO, 21
2, 654321, INFO, 20
3, 123456, INFO, 30
4, 654321, INFO, 11 
```

首先，我想用这个来展示它们：

```
SELECT * 
FROM table 
GROUP BY GroupID 
ORDER BY COUNTER DESC 
LIMIT 0, 60 
```

所以它应该只显示一种组类型。可以，但是顺序不好。所以我认为它没有得到正确的`counter`配对数量`GroupID`。

正确显示的结果是：（主订单选择器必须是`count`）

```
ID, GroupID, INFO, COUNTER
3, 123456, INFO, 30
2, 654321, INFO, 20 
```

我该怎么解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:20:24.840

```
 SELECT tablename.* FROM tablename 
    WHERE tablename.COUNTER = 
(SELECT MAX(COUNTER) FROM tablename AS f WHERE f.GroupID = tablename.GroupID) 
    ORDER BY tablename.COUNTER DESC 
```

**已编辑：**这将为您提供包含每个 GroupID 的 COUNTER 最大值的完整行，并按 COUNTER desc 对最终结果进行排序。

# mysql - 如何选择与特定日期匹配的记录，但前提是不存在最近的记录？

> ID：15282786
> 
> 赞同：0
> 
> 时间：2013-03-07T22:13:08.083
> 
> 标签：mysql, date

我有一个脚本，根据他们在我们俱乐部在线商店购买会员资格的最后日期，向会员资格即将到期的会员发送自动续订通知：

```
SELECT members.id, first, last, class, email, name AS membershipType, lifetime, store_transactions.dateModified FROM store_transactions 
LEFT JOIN members ON memberID = members.id 
WHERE 
(
DATE(store_transactions.dateModified) = SUBDATE(CURDATE(), INTERVAL 1 YEAR) 
/*AND 
NOT EXISTS(SELECT * FROM store_transactions WHERE DATE(store_transactions.dateModified) > SUBDATE(CURDATE(), INTERVAL 1 YEAR))*/
)
AND categoryID = 1 AND lifetime != 'Y' 
GROUP BY members.id 
ORDER BY last, first 
```

我每天通过 CRON 作业运行这个脚本，并且通过向一年前购买会员资格的所有成员发送电子邮件，它运行良好（或者我认为是这样）。但是，我没有考虑到会员可以在我的脚本发送自动提醒之前更新他们的会员资格）。

**更新：在尝试实施你们中的几个人推荐的解决方案时（谢谢！），这是我目前的查询：

```
SELECT members.id, first, last, class, email, name AS membershipType, lifetime, store_transactions.dateModified, categoryID FROM store_transactions 
LEFT JOIN members ON memberID = members.id 
GROUP BY members.id
HAVING categoryID = 1 AND lifetime != 'Y'
AND DATE(MAX(store_transactions.dateModified)) = '2012-03-24' /* specific date to simplify debugging */
ORDER BY last, first 
```

我觉得这非常接近正确的解决方案，但是由于我的 store_transactions 表具有不同类别的事务，可以由同一个成员（即会员、活动门票、广告、捐赠等）。出于此查询的目的，我只对查看成员类别事务（“categoryID = 1”）感兴趣。附加的“lifetime != 'Y'”禁止此查询返回终身成员，其成员资格永不过期。

总而言之，我希望此查询返回恰好在一年前具有“categoryID = 1”事务的成员的记录，除非他们有“categoryID = 1”的更新事务。这是我的 store_transactions 表中的字段，以防万一：

id invoice memberID categoryID productID name price 数量 dateModified addedBy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:16:14.417

也许像

```
WHERE (0 in (SELECT COUNT(*) FROM store_transactions WHERE ...)) 
```

会工作？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:17:18.493

尝试检查`MAX(store_transactions.dateModified)`.

```
SELECT members.id
FROM store_transactions 
LEFT JOIN members ON memberID = members.id 
GROUP BY members.id
HAVING DATE(MAX(store_transactions.dateModified)) > SUBDATE(CURDATE(), INTERVAL 1 YEAR) 
```

我简化了一点，但你应该得到正确的想法。

**编辑：**

您可以同时使用`WHERE`和`HAVING`。where 位于`GROUP BY`and 过滤满足或不满足条件的各个行。have 子句包括对组的聚合。

```
SELECT members.id
FROM store_transactions
LEFT JOIN members ON memberID = members.id 
WHERE categoryID = 1 AND lifetime != 'Y'
GROUP BY members.id
HAVING DATE(MAX(store_transactions.dateModified)) > SUBDATE(CURDATE(), INTERVAL 1 YEAR) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:21:52.827

另一种想法，虽然我认为我更喜欢 JodyT 的 DATE(MAX(dateModified)) 方法：

```
WHERE pk NOT IN (SELECT pk FROM store_transactions WHERE DATE(store_transactions.dateModified) > SUBDATE(CURDATE(), INTERVAL 1 YEAR)) 
```

（其中 pk 是您桌子上的一些唯一键）

# xamarin - 本机链接失败 - Xamarin For Visual Studio

> ID：15282788
> 
> 赞同：3
> 
> 时间：2013-03-07T22:13:11.607
> 
> 标签：xamarin, xamarin.ios

我正在尝试使用 Xamarin For Visual Studio Trial 在 Windows Visual Studio 上构建一个 iOS 应用程序。编译时出现此错误：

错误 136 MT5201：本机链接失败。请查看提供给 gcc 的用户标志：“-L/Users/brandon/Library/Caches/Xamarin/mtbs/builds/iCropTrak_vsios/9bc8504a-65b2-484f-b71c-1d0cb02d21f6”“-lgdal_x86”“-lc3dsqlite3”“-lstdc++” “-all_load”[K:\Development\AZSim\Products\CropTrak\iCropTrak_vsios.csproj] 0 0

它在 mac 上编译得很好 - 但在 windows 版本上运行时遇到了麻烦。关于为什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T02:16:10.020

你`{ProjectDir}`在你的项目选项中使用吗？如果是这样，您可能会遇到目录在平台之间不匹配的当前[限制。](http://forums.xamarin.com/discussion/2025/linker-error-linking-with-an-external-a-lib#latest)

您应该能够通过[使用](http://forums.xamarin.com/discussion/comment/5371/#Comment_5371)该属性替换`{ProjectDir}`或**更好地解决它。**`[LinkWith]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T21:00:14.137

您可以将 Native 引用捆绑在 dll 中。

看看这个：[http ://forums.xamarin.com/discussion/comment/5371/#Comment_5371](http://forums.xamarin.com/discussion/comment/5371/#Comment_5371)

和这个：

[https://github.com/viniciusjarina/NativeBindingVS](https://github.com/viniciusjarina/NativeBindingVS)

谢谢你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-27T11:22:36.160

我们在两周前发现了这个问题，这只发生在模拟器 AFAIK 中。似乎依赖 LevelDB 离开了他们的 Main 符号。我将在 Firebase 上提交一个错误。解决方法是更改​​模拟器上**注册器的行为：**

1.  打开您的项目设置
2.  转到**构建**选项卡
3.  选择**iOS 构建**选项
4.  输入其他`--registrar:static`mtouch**参数**文本框
5.  点击**确定**

不要忘记在**iPhoneSimulator**平台的**Release**和**Debug**配置中添加这个。

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-28T03:00:14.450

当我检查包的[来源](https://github.com/xamarin/GoogleApisForiOSComponents)时，我发现它们依赖于

```
Xamarin.Build.Download 
```

当我安装包问题解决了。**

# php - 在 blob 存储 Azure 中创建容器 - PHP

> ID：15282789
> 
> 赞同：1
> 
> 时间：2013-03-07T22:13:15.420
> 
> 标签：php, azure, azure-storage

我正在关注本教程，关于操作 blob：

[http://www.windowsazure.com/en-us/develop/php/how-to-guides/blob-service/](http://www.windowsazure.com/en-us/develop/php/how-to-guides/blob-service/)

不清楚以下几点：

1）如何建立连接，在示例中它使用了这行代码：

```
For accessing a live service:

require_once 'vendor\autoload.php';

use WindowsAzure\Common\ServicesBuilder; use WindowsAzure\Blob\Models\CreateContainerOptions; use WindowsAzure\Blob\Models\PublicAccessType; use WindowsAzure\Common\ServiceException;

// Create blob REST proxy. $blobRestProxy = ServicesBuilder::getInstance()->createBlobService($connectionString) 
```

如何设置连接字符串？- 访问 blob 存储需要什么凭据。

鉴于我也有我的 Microsoft 帐户详细信息。

2) 你将如何创建一个新的存储帐户

当您登录门户时，会为您设置一个密钥/帐户。你如何通过php创建一个新的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T02:41:25.853

在您引用的那个教程中，连接字符串格式显示在文章顶部附近：

`DefaultEndpointsProtocol=[http|https];AccountName=[yourAccount];AccountKey=[yourKey]`

现在您需要在门户中创建一个存储帐户。每个存储帐户都有一个名称 ( `yourAccount`) 和一个密钥 ( `yourKey`)。通过门户创建存储帐户后，您会看到它已列出。例如，我`dmakhome`为此示例创建：

![已创建存储帐户](../Images/8b75348687e5b9f67938038195c2ea17.png)

单击其名称，这将打开该存储帐户的仪表板视图：

![存储帐户仪表板](../Images/3f6afce8625be8708f87f8ac8697af0a.png)

在屏幕的最底部，在黑色底部边框中，您会看到一个图标**Manage Keys**。单击它，然后您将看到主键和辅助键（您可以抓住任何一个）：

![存储密钥](../Images/8e1a0f9210f818bbaa706e8e02b06fbb.png)

将密钥复制到剪贴板，并创建一个上述格式的 $connectionString，替换您的存储帐户名称和新复制的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T14:12:57.340

```
<?php
require_once 'vendor\autoload.php';

use WindowsAzure\Common\ServicesBuilder;

use WindowsAzure\Common\ServiceException;

use WindowsAzure\Table\Models\Entity;

use WindowsAzure\Table\Models\EdmType;

$connectionString = 'DefaultEndpointsProtocol=http;AccountName=NAME;AccountKey=KEY';

$tableRestProxy = ServicesBuilder::getInstance()->createTableService($connectionString);

//Than try to create table or blob

try {

 $tableRestProxy->createTable('newtasks');

}
catch(ServiceException $e){

  $code = $e->getCode();

  $error_message = $e->getMessage();

  echo $code.": ".$error_message."<br />";

} 
```

# c - C while 循环 feof

> ID：15282790
> 
> 赞同：0
> 
> 时间：2013-03-07T22:13:23.023
> 
> 标签：c, feof

这是制作电影精灵的更大程序的一部分，由于某种原因，程序在到达这个 while 循环时崩溃，我不明白我的问题是什么。

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <string.h>
#include <ctype.h>

FILE *fp, *fopen();
char *arrayoffilms[45];
int main()
{
    char line[100],junk[100];
    fp=fopen("filmtitles.txt","r");
    int i=0;
    while(!feof(fp)) {
        fscanf(fp,"%[^\n]s",line);
        strcpy(arrayoffilms[i],line);
        fscanf(fp,"%[\n]s",junk);
        i++;
    }
    fclose(fp);
    printf("%s\n\n\n",arrayoffilms[i]);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T00:37:21.917

`feof`在进行实际读取尝试并达到 EOF 之前，永远不会返回 true。读取尝试通常具有指示失败的返回值。为什么不使用这些呢？

不要混淆`%[`and`%s`格式说明符；`%[`不提供扫描集`%s`；`%[^\n]s`告诉 scanf 读取“一个或多个非'\n'字符，后跟一个's'字符”。那有意义吗？仔细想想，这个格式说明符的目的是什么？如果用户只是按下回车键，而 scanf 没有得到它的“一个或多个非'\n'字符”会发生什么？在我们寻找非'\n' 字符之前，删除任何'\n' 字符很重要。格式字符串中的任何空白字节都将导致 scanf 消耗尽可能多的空白，直到第一个非空白字符。我会假设您想要`%[^\n]`，或者甚至可能`%99[^\n]`会防止线路溢出。

也许您还想计算scanf处理的字节数，因此您可以`malloc`正确的长度并复制到arrayoffilms，出于某种我无法想象的原因。您可以使用`%n`格式说明符，它将告诉您 scanf 处理了多少字节。

我注意到您想阅读并丢弃一行的其余部分。在我的示例中，如果在遇到换行符之前读取了 99 个字符，则只会丢弃一行的其余部分。我将使用分配抑制 '*': `%*[^\n]`。

组合这些格式说明符会产生一个格式字符串`" %99[^\n]%n%*[^\n]"`、两个参数（一个`char *`for`%[`和一个`int *`for `%n`）以及一个预期的返回值 1（因为分配了 1 个输入）。当返回值不为 1 时，循环将结束，这可能是由“reading beyond eof”等错误引起的。

```
int length;
while (fscanf(fp, " %99[^\n]%n%*[^\n]", line, &length) == 1) {
    arrayoffilms[i] = malloc(length + 1);
    strcpy(arrayoffilms[i], line);
    i++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:21:09.800

问题可能与`feof`. 您希望`while`循环在到达文件末尾时终止，或者换句话说，当您无法使用`fscanf`.

你可以去下面的代码：

```
 while(fscanf(fp,"%[^\n]s",line)) {
    strcpy(arrayoffilms[i],line);
    fscanf(fp,"%[\n]s",junk);
    i++;
 } 
```

此外，与文件指针相关的错误检查是绝对必要的，并且是一个好习惯。你肯定会想要使用它：

```
fp=fopen("filmtitles.txt","r");
if(fp == NULL)  /* error handling */
    printf("Could not open file: filename\n"); 
else{
/* do stuff */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-24T01:34:05.797

fgets() 也发生了类似的事情，所以有些人说永远不要使用它。这么看，如果你说

```
while (!feof(ipf)) { 
```

到 feof() 为真时，您已经到达文件末尾。您刚刚读取的字节是垃圾，可能是 NULL。不要使用它。这有效：

```
while (!feof(ipf)) {
  if (!feof(ipf)) {
    ch = fgetc(ipf); 
```

它也适用于 fgets()，我多年来一直以这种方式使用它。如果这是 Pascal（或者可能是 Perl）并且您阅读“直到” feof 会起作用，那么这是一个预测试与一个后测试问题。所以测试两次。

# c++ - 在二进制表示法中，小数点“.”之后的数字是什么意思？

> ID：15282791
> 
> 赞同：42
> 
> 时间：2013-03-07T22:13:27.787
> 
> 标签：c++, c, floating-point, ieee-754

我有这个关于如何将基数为 10 的数字转换为 IEEE 754 浮点表示的示例

```
Number: 45.25 (base 10) = 101101.01 (base 2) Sign: 0
Normalized form N = 1.0110101 * 2^5
Exponent esp = 5  E = 5 + 127 = 132 (base 10) = 10000100 (base 2)
IEEE 754: 0 10000100 01101010000000000000000 
```

这对我来说很有意义，除了一段：

```
45.25 (base 10) = 101101.01 (base 2) 
```

45 是二进制的 101101 ，这没关系..但是他们如何获得 0.25 作为 .01 ？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-03-07T22:18:30.707

简单的地方价值。在 base 10 中，你有这些地方：

> ... 10 ³ 10 ² 10 ¹ 10 ⁰ **。**10 ^(-1) 10 ^(-2) 10 ^(-3) ...
> 
> ……千、百、十、个。十分之一，百分之一，千分之一……

同样，在二进制（基数 2）中，您有：

> ... 2 ³ 2 ² 2 ¹ 2 ⁰ **。**2 ^(-1) 2 ^(-2) 2 ^(-3) ...
> 
> ... 八，四，二，一。一半，四分之一，八分之一...

所以`.`in 二进制之后的第二位是 2 ^(-2)的单位，众所周知，它是 1/4 的单位（或者，0.25）。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-03-07T22:20:10.533

您可以通过重复乘以新基数（在本例中新基数为 2）将小数点后的部分转换为另一个基数，如下所示：

```
0.25 * 2 = 0.5 
```

-> 第一个二进制数字为0（取整数部分，即小数点前的部分）。

继续乘以小数点后的部分：

```
0.5 * 2 = 1.0 
```

-> 第二个二进制数字是 1（同样，取整数部分）。

这也是我们停止的地方，因为小数点后的部分现在为零，所以没有什么可以乘的了。

因此小数部分的最终二进制表示为： 0.01 [2]。

**编辑：**

可能还值得注意的是，即使从以 10 为底的有限小数部分开始，二进制表示通常也是无限的。示例：将 0.2 [10]转换为二进制：

```
0.2 * 2 = 0.4   ->   0
0.4 * 2 = 0.8   ->   0
0.8 * 2 = 1.6   ->   1
0.6 * 2 = 1.2   ->   1
0.2 * 2 = ... 
```

所以我们最终得到： 0.001100110011... [2]。

如果二进制表示最终是无限的，使用这种方法你很容易看到。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-03-07T22:18:35.257

考虑到它们与整数的工作方式完全相同，其他基数中的“小数”（小数位）令人惊讶地不直观。

```
base 10
scinot 10e2  10e1  10e0 10e-1 10e-2 10e-3
weight 100.0 10.0   1.0  0.1   0.01  0.001
value  0     4      5     .2      5      0

base 2
scinot 2e6 2e5 2e4 2e3 2e2 2e1 2e0 2e-1 2e-2 2e-3
weight 64  32  16   8   4   2   1   .5   .25 .125
value   0   1   0   1   1   0   1   .0    1    0 
```

如果我们从 45.25 开始，它大于/等于 32，所以我们添加一个二进制 1，然后减去 32。
剩下 13.25，它小于 16，所以我们添加一个二进制 0。
剩下 13.25 ，它大于/等于 8，所以我们添加一个二进制 1，然后减去 8。
我们剩下 05.25，它大于/等于 4，所以我们添加一个二进制 1，然后减去 4。
我们剩下01.25 小于 2，所以我们添加一个二进制 0。
剩下的 01.25，大于/等于 1，所以我们添加一个二进制 1，然后减去 1。
对于整数，我们将有零离开了，所以我们停下来。但是：
我们剩下 00.25，它小于 0.5，所以我们添加一个二进制 0。
我们剩下 00.25，它大于/等于 0.25，所以我们添加一个二进制 1，然后减去 0.25。
*我们有零，所以我们停止（或者不，如果你愿意，你可以继续计算零）*

 *请注意，并非所有十进制的“简单”数字总是达到零停止点。0.1（十进制）转换为基数 2，无限重复：0.0001100110011001100110011 ...但是，二进制中的所有“简单”数字总是会很好地转换为基数 10。

您也可以对分数 (2.5)、无理数 (pi) 甚至虚数 (2i) 基数执行相同的过程，但基数不能介于 -1 和 1 之间。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-03-07T22:17:56.587

2.000 [10] = 2 ^(+1) = 10.000 [2]
1.000 [10] = 2 ^(+0) = 01.000 [2]
0.500 [10] = 2 ^(-1) = 00.100 [2]
0.250 [10] = 2 ^(-2) = 00.010 [2]
0.125 [10] = 2 ^(-3) = 00.001 [2]

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-07T22:16:29.583

以 2 为底的分数是 .1 = 1/2, .01 = 1/4。...

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-07T22:23:09.500

这样想

(点) 2^-1 2^-2 2^-3 等

所以

. 0/2 + 1/4 + 0/8 + 0/16 等

见[http://floating-point-gui.de/formats/binary/](http://floating-point-gui.de/formats/binary/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-13T09:13:33.200

您可以将 0.25 视为 1/4。

除以 2 in（以 2 为底）将小数点左移一位，同样的方法除以 10 in（以 10 为底）将小数点左移一位。一般除以 M in (base M) 将小数点左移一位。

所以

```
base 10                  base 2
--------------------------------------
1                      =>      1
1/2 = 0.5              =>    0.1
0.5/2 = 1/4 = 0.25     =>   0.01 
0.25/2 = 1/8 = 0.125   =>  0.001
.
.
. 
```

等等*

# java - 复利公式不起作用，在主要方法和第二种方法中输出奇怪的数字（不给我正确答案）

> ID：15282794
> 
> 赞同：-3
> 
> 时间：2013-03-07T22:13:35.390
> 
> 标签：java, methods

是的，我以前用相同的代码问过问题，但出现了更多我似乎无法解决的问题，开始复利公式正在打印出奇怪数量的代码。还有 System.out.println(compound); 在主要方法中不起作用，因为“化合物无法解析为变量错误）所以我无法打印它。

```
import java.io.*;

class cexample {
    public static double squared(double x){
        return x*x;
    } 

    public static void main(String[] args)   throws IOException {
        System.out.println(balance(0.0, 0.0,1.0));
        System.out.println(balance);
    }

    static public double balance(double principal, double rate, double years) throws IOException{
        double amount = 0;
        String input;
        String input2;
        years = 1;
        BufferedReader myInput = new BufferedReader (new InputStreamReader (System.in));
        System.out.print("How much would you like to take out? ");
        input = myInput.readLine ();
        principal = Double.parseDouble (input);        
        System.out.print("Enter the interest rate: ");
        input2 = myInput.readLine ();
        rate = Double.parseDouble (input2);
        System.out.println("Now, enter the amount of years (1-10)");
        input = myInput.readLine ();
        years = Double.parseDouble (input);  
        for (int i = 0; i < years; i++) {
            // equation, M = P *( 1+ rate) * years^2
            amount = principal * (1 + rate) *( squared(years));
            //amount += principal;
        }
        System.out.println("The amount is " + amount);
        return amount; //- principal;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:41:09.280

我不是真正的 Java 专家，但我会改用数学函数，这应该可以完成工作：

```
import java.lang.Math;

P * Math.pow((1 + r), (years/period)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:23:36.377

复利的公式是

```
principal * (1+(rate/compounding periods) ^ (years / compounding periods) 
```

在您的情况下，复利期为 1

另一种计算方法是

```
for(# of years)
  principal *= 1+rate 
```

你正在做这两个，另外还平方年数，虽然我不知道你从哪里得到这个想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:24:45.500

这条线给你带来了问题，因为`balance`它是一种方法。返回并重新阅读[我对您上一个问题的回答](https://stackoverflow.com/questions/15276735/how-to-call-method-to-main-method-program-runs-but-does-not-print-out-questions/15276831#15276831)。看起来您只是复制了我给您的部分代码，而没有阅读或理解它。你需要确保你实际上在做你认为你正在做的事情。

而且你总是得到 0 作为结果（正如我已经在对上一个问题的评论中解释的那样），因为你在一年中传递了 1，并且你的`for`循环从 1 开始，所以你实际上从来没有计算任何东西。

# c# - 在 Wpf Listview 中显示行号

> ID：15282801
> 
> 赞同：1
> 
> 时间：2013-03-07T22:14:24.387
> 
> 标签：c#, wpf, listview

我有一个从 sql server 数据库创建的列表视图，你如何包含行号？

```
 <ListView x:Name="lstName" Height="400" Canvas.Top="55" Width="450">
                <ListView.View>
                    <GridView>                     
                        <GridViewColumn Header="Number" Width="auto" 
                         DisplayMemberBinding="{Binding Path=Id}" />
                        <GridViewColumn Header="FirstName" Width="auto" 
                         DisplayMemberBinding="{Binding Path=FName}" />
                        <GridViewColumn Header="LastName" Width="auto" 
                         DisplayMemberBinding="{Binding Path=LName}" />
                        <GridViewColumn Header="StreetAddress" Width="auto" 
                         DisplayMemberBinding="{Binding Path=Street}" />
                        <GridViewColumn Header="City" Width="auto" 
                         DisplayMemberBinding="{Binding Path=City}" />
                        <GridViewColumn Header="State" Width="auto"
                         DisplayMemberBinding="{Binding Path=State}" />                       
                    </GridView>                        
                </ListView.View>
            </ListView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T23:12:03.203

您可以将 设置`AlternationCount`为`ListView`大于可以返回的可能行数的值。然后，绑定到`ListView.AlternationIndex`以获取当前项目的从零开始的索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:21:02.420

我没有看到一个简单的方法来做到这一点，因为 WPF 的理念是绑定到数据，然后视图应该是独立的。

但我可以看到一种让它工作的技巧。

您将 ( `OneTime`)绑定`Counter`到您的 ViewModel 中的一个属性，并且在该属性的访问器中，除了返回它之外`get`，您还可以迭代。`counter`

这样，每个`ListView`项目都会有一个适当的索引。

但是请注意该解决方案，之后您将无法将索引追溯到项目。如果您出于某种原因还需要这样做，您实际上应该`IdInTable`在对象中创建一个字段并在您的 ViewModel 中正确填充它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-02T14:07:19.940

这是一篇很老的帖子，我看到很多人问我们如何使用 AlternationCount 和 AlternationIndex 来避免从零开始的索引。因此，对于像我这样的其他用户正在寻找解决方案。你可以用一些不寻常（或者你可以说很奇怪）的解决方法来做到这一点，但它对我有用：

隐藏第一项行（状态为 Model.Status）：

```
<ListView.ItemContainerStyle>
  <Style TargetType="ListViewItem">
    <Style.Triggers>
      <DataTrigger Binding="{Binding Status}" Value="Status">
        <Setter Property="Visibility" Value="Collapsed" />
      </DataTrigger>
     </Style.Triggers>
 </Style>
 </ListView.ItemContainerStyle> 
```

之后在第一行添加一个虚拟记录：

```
FileDetail fd = new FileDetail()
{
  FileName = "File Name",
  Count = "Count",
  Status = "Status",
  FilePath = "File Path"
};
FileList.Add(fd); 
```

相应地管理整个代码中的迭代。

你可以用那个 0 行做一件事。您可以隐藏原始标题并将此 0 行作为标题。

```
<ListView.Resources>
  <Style TargetType="{x:Type GridViewColumnHeader}">
   <Setter Property="Visibility" Value="Collapsed" />
  </Style>
 </ListView.Resources> 
```

# themes - 在 Aptana 中，某些行的开头是不同的颜色

> ID：15282804
> 
> 赞同：1
> 
> 时间：2013-03-07T22:14:31.970
> 
> 标签：themes, aptana, color-scheme

我花了大约一个小时来寻找解决这个问题的方法，但我就是做不到。一些行/字符将在 Aptana 中显示不同的颜色（所有分号、一些制表符和一些整体）。我今天才安装它，所以我不太了解该软件的使用方法。

这是一张可以帮助您了解想法的图片：

![在此处输入图像描述](../Images/7bf4878513a01648505a7263690c8080.png)

我想摆脱某些部分更轻的方式（这条`some text`线是插入符号所在的线，这不是问题）

PS如果这是问这个问题的错误地方，我很抱歉，但我通过谷歌和 Aptana 偏好搜索感到沮丧。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T04:50:03.247

我也花了太多时间在这个问题上。

phazei 的答案是正确的： [Aptana 3，php 代码背景高亮](https://stackoverflow.com/questions/12033197/aptana-3-php-code-background-highlighting)

但我的主要问题是我不知道去哪里找。因此，为了深入了解我是如何找到答案的：

事实证明，您可以通过右键单击您感兴趣的文本并选择 Show in -> Properties 来查看编辑器正在使用什么标记以及它如何对任何文本块进行分类。

# wpf - Telerik Rad 网格视图页眉空间

> ID：15282806
> 
> 赞同：0
> 
> 时间：2013-03-07T22:14:34.550
> 
> 标签：wpf, silverlight, telerik, telerik-grid

在我们当前的项目中，我们正在使用telerik rad控件来开发silverlight项目，根据登录用户，列显示在数据网格上，对于某些用户，一些网格列被设置为不可见，这导致列之间的间隙,当用户登录时，列之间的空间看起来不太好，有没有人知道如何解决这个差距，非常感谢。

我们正在使用转换器，

```
<telerik:GridViewDataColumn DataMemberBinding="{Binding LastQtyNotAvail}" Width="150" IsVisible="{Binding IsColumnVisibleToCustomer, Source={StaticResource PFOViewModel}}" IsReadOnly="True" TextAlignment="Right" HeaderTextAlignment="Center"/> 

public bool IsColumnVisibleToCustomer
 {get
 { 
   return !WebContext.Current.User.IsInRole("Customer");
 }
} public bool IsInRole(string role) { if ((this.Roles == null)) { return false; } return global::System.Linq.Enumerable.Contains(this.Roles, role); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:44:08.317

我会使用一些 jQuery 来检查网格中的列数并根据它设置填充或边距。我的猜测是这些列仍然没有内容，所以你也可以使用 jQuery 删除那些。只需检查 $("#column").html() == ""

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:40:57.527

您最好处理 RadGridView 的 AutoGeneratingColumns 事件。然后，您可以根据您想象的任何条件取消列的生成。

[Telerik 文档将为您提供尽可能好的样本](http://www.telerik.com/help/silverlight/gridview-prevent-column-autogenerate.html)

如果您不使用列的自动生成，请尝试删除（网格的）加载事件中的列。

就像是：

```
void Grid_Loaded(object sender, RoutedEventArgs e)
{
    RadGridView grid = sender as RadGridView;
    var remove = ((IEnumerable<GridViewDataColumn>)grid.Columns).FirstOrDefault(o => o.UniqueName == "PropertyName");
    if (remove != null)
    {
        grid.Columns.Remove(remove);
    }
} 
```

# ios - 在ios上生成高分辨率pdf

> ID：15282811
> 
> 赞同：2
> 
> 时间：2013-03-07T22:15:04.977
> 
> 标签：ios, pdf, retina-display

有什么方法可以在支持视网膜显示的 ios 上生成高分辨率 PDF？我制作了一个基本的 PDF 生成器，但在我的 iPad 3 上它看起来仍然像素化。感谢您的各种建议！

**更新：**

在我的 PDF 文件中，文本流畅美观。但是当我使用代码来绘制这个 pdf 时，我在视网膜显示器上被像素化了（绘图代码在底部）。

PDF生成：

```
 NSString *fileName = [self.bookManager cacheBookFileForPage:i];
    UIGraphicsBeginPDFContextToFile(fileName, CGRectZero, nil);

    CGContextRef currentContext = UIGraphicsGetCurrentContext();

    CGContextSetTextMatrix(currentContext, CGAffineTransformIdentity);

    CGContextTranslateCTM(currentContext, 0, 100);
    CGContextScaleCTM(currentContext, 1.0, -1.0);

    // TODO: Temporary numbers
    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, 768 * 2, 1024 * 2), nil);

    NSString *textToDraw = @"text";
    CFStringRef stringRef = (__bridge CFStringRef)textToDraw;

    CTFontRef ctFont= CTFontCreateWithName(CFSTR("Arial"), 20 * 2, &CGAffineTransformIdentity);

    NSDictionary *attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                                (__bridge id)ctFont, (NSString *)kCTFontAttributeName,
                                nil];

    NSAttributedString *string = [[NSAttributedString alloc] initWithString:textToDraw
                                                                 attributes:attributes];

    CFRelease(ctFont);

    CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString((__bridge CFAttributedStringRef)string);

    // TODO: temporary        
    CGRect frameRect = CGRectMake(100, 100, 800 * 2, 50 * 2);
    CGMutablePathRef framePath = CGPathCreateMutable();
    CGPathAddRect(framePath, NULL, frameRect);

    // Get the frame that will do the rendering.
    CFRange currentRange = CFRangeMake(0, 0);
    CTFrameRef frameRef = CTFramesetterCreateFrame(framesetter, currentRange, framePath, NULL);
    CGPathRelease(framePath);

    // Draw the frame.
    CTFrameDraw(frameRef, currentContext);

    CFRelease(frameRef);
    CFRelease(stringRef);
    CFRelease(framesetter);

    // Close the PDF context and write the contents out.
    UIGraphicsEndPDFContext(); 
```

PDF绘图：

```
// This will return pageRef from PDF
CGPDFPageRef page = [self.bookManager contentForPage:index + 1];

CGContextSetRGBFillColor(context, 1.0f, 1.0f, 1.0f, 1.0f);
CGContextFillRect(context, CGContextGetClipBoundingBox(context));
CGContextTranslateCTM(context, 0.0f, [self.view.layer bounds].size.height);

CGRect transformRect = CGRectMake(0, 0, [self.view.layer bounds].size.width, [self.view.layer bounds].size.height);
CGAffineTransform pdfTransform = CGPDFPageGetDrawingTransform(page, kCGPDFCropBox, transformRect, 0, true);

// And apply the transform.
CGContextConcatCTM(context, pdfTransform);

CGContextScaleCTM(context, 1.0f, -1.0f);

CGContextSetInterpolationQuality(context, kCGInterpolationHigh);
CGContextSetRenderingIntent(context, kCGRenderingIntentDefault);

CGContextDrawPDFPage(context, page); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T08:37:26.037

我认为您遇到的问题之一是您正在缩放您正在绘制的内容。不要使用那个变换！只需创建您的 pdf 上下文并在其中进行本地绘制。你的字体看起来很清晰，因为它们现在以全分辨率绘制，而不是半分辨率，然后该字体的位图被放大，这当然会引入锯齿。

tl; dr：直接绘制到 pdf，不要对文本使用缩放变换。

# java - 在运行时立即获取系统输出（更新 ProgressBar）Java

> ID：15282812
> 
> 赞同：1
> 
> 时间：2013-03-07T22:15:12.670
> 
> 标签：java, swing, concurrency, event-dispatch-thread, jprogressbar

我正在通过 runtime.exec 运行一个命令，这需要一些时间。我想在此期间更新我的 ProgressBar。
我已经得到了我想要的系统输出，问题是：当这个过程完成时，我一下子得到了它。而不是一步一步更新我的ProgressBar ...

这是一些代码

```
public Runtime rt = Runtime.getRuntime();
public Process pp;

  public doit() {
      try {
          pp = rt.exec(a_long_timed_process);
          InputStream is = pp.getErrorStream();
          InputStreamReader isr = new InputStreamReader(is);
          BufferedReader br = new BufferedReader(isr);
          String line = null;
          while ((line = br.readLine()) != null) {
              if (line.contains("In:")) {
                  int a = line.indexOf("In:");              //get a string
                  int b = line.lastIndexOf("%");            //between 
                  String lineout = line.substring(a + 3, b);//"0.00" and "99.99"
                  double nr = Double.parseDouble(lineout);  //make it a double
                  int round = (int) nr;                     //make it a usable int
                  System.out.println(round);
                  myProgressBar.setValue(round);            //UPDATE Progressbar
              }
          }
          pp.waitFor();
      } catch (IOException ex) {
          Logger.getLogger(Sox.class.getName()).log(Level.SEVERE, null, ex);
      } catch (InterruptedException ex) {
          Logger.getLogger(Sox.class.getName()).log(Level.SEVERE, null, ex);
      }
  } 
```

感谢您的每一个帮助
在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:17:17.007

如果您希望能够同时处理其输出，则必须在不同的线程中运行该进程。一个好方法是使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)。

从文档中：

> 此类用于创建操作系统进程。
> 
> [...]
> 
> 启动一个使用默认工作目录和环境的新进程很容易：

```
Process p = new ProcessBuilder("myCommand", "myArg").start(); 
```

> 下面是一个示例，它使用修改后的工作目录和环境启动进程，并将标准输出和错误重定向到附加到日志文件中：

```
ProcessBuilder pb =
  new ProcessBuilder("myCommand", "myArg1", "myArg2");
Map<String, String> env = pb.environment();
env.put("VAR1", "myValue");
env.remove("OTHERVAR");
env.put("VAR2", env.get("VAR1") + "suffix");
pb.directory(new File("myDir"));
File log = new File("log");
pb.redirectErrorStream(true);
pb.redirectOutput(Redirect.appendTo(log));
Process p = pb.start();
assert pb.redirectInput() == Redirect.PIPE;
assert pb.redirectOutput().file() == log;
assert p.getInputStream().read() == -1; 
```

另请参阅[此处](https://stackoverflow.com/questions/5591215/run-external-program-concurrently)以了解您可以根据需要进行调整的另一个代码示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T00:22:08.010

您在启动的过程中看到了输出缓冲的效果。在 Java 代码中您无能为力。

# aptana - 从 Aptana Studio 3 卸载插件？

> ID：15282813
> 
> 赞同：7
> 
> 时间：2013-03-07T22:15:12.997
> 
> 标签：aptana

如何从 Aptana Studio 3 中卸载插件？我似乎找不到要删除的菜单选项。我发现了一些关于从 Aptana Studio 2 中删除插件的搜索结果，但对于 Aptana Studio 3 却没有。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T20:17:18.373

您可以按以下方式执行此操作：

转到“关于 Aptana Studio”（或只是关于）。在 Windows 上，这应该在“帮助”下。在 Mac 上，它是最左侧的菜单。在那里您可以单击安装详细信息，您可以删除/更改您的配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T05:00:23.883

....在您的 Aptana 安装文件夹中有一个名为 fulluninstall.txt 的 .txt 文件，其中包含信息。或者您可以按照此链接访问卸载 wiki：

[https://wiki.appcelerator.org/display/tis/Uninstalling+Studio](https://wiki.appcelerator.org/display/tis/Uninstalling+Studio)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-16T14:10:52.467

它在同一页面上，您可以在其中安装新软件：

*   帮助 > 安装新软件
*   在“隐藏已安装的项目”复选框下
*   有一个链接“**已经安装了什么？** ”

按此链接，您可以查看您实际拥有的插件并管理它们（更新、删除..）

# python - Python 重新编译。不平衡括号错误

> ID：15282815
> 
> 赞同：1
> 
> 时间：2013-03-07T22:15:27.573
> 
> 标签：python, regex

我正在尝试编译一个正则表达式，以便能够`r'#\w+'`从推文中累积一系列主题标签 ()。我希望能够编译两个正则表达式，它们可以从推文的开始和结束来做到这一点。我正在使用 python 272，我的代码是这样的。

```
HASHTAG_SEQ_REGEX_PATTERN           = r"""
(                                       #Outermost grouping to match overall regex
#\w+                                    #The hashtag matching. It's a valid combination of \w+
([:\s,]*#\w+)*                          #This is an optional (0 or more) sequence of hashtags separated by [\s,:]*
)                                       #Closing parenthesis of outermost grouping to match overall regex
"""

LEFT_HASHTAG_REGEX_SEQ      = re.compile('^' + HASHTAG_SEQ_REGEX_PATTERN , re.VERBOSE | re.IGNORECASE) 
```

当我正在编译正则表达式的行被执行时，我收到以下错误：

```
sre_constants.error: unbalanced parenthesis 
```

我不知道为什么会这样，因为在我的正则表达式模式中没有看到不平衡的括号。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T22:17:26.310

此行在 FIRST 之后被注释掉`#`：

```
 v----comment starts here
([:\s,]*#\w+)*  ... 
```

逃脱它：

```
([:\s,]*\#\w+)* 
```

这行也是，但它不会导致括号不平衡:)

```
v----escape me
#\w+                                    #The hashtag matching ... 
```

```
HASHTAG_SEQ_REGEX_PATTERN           = r"""
(                 # Outermost grouping to match overall regex
\#\w+             # The hashtag matching. It's a valid combination of \w+
([:\s,]*\#\w+)*   # This is an optional (0 or more) sequence of hashtags separated by [\s,:]*
)                 # Closing parenthesis of outermost grouping to match overall regex
""" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T22:19:26.520

你有一些未转义的哈希值，你想合法使用，但把`VERBOSE`你搞砸了：

```
\#\w+
([:\s,]*\#\w+)*   #reported issue caused by this hash 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-07T22:29:54.667

如果您将模式编写如下，则不会遇到此问题：

```
HASHTAG_SEQ_REGEX_PATTERN = (
'('    #Outermost grouping to match overall regex
'#\w+'     #The hashtag matching. It's a valid combination of \w+
'([:\s,]*#\w+)*'    #This is an optional (0 or more) sequence of hashtags separated by [\s,:]*
')'    #Closing parenthesis of outermost grouping to match overall regex
) 
```

就个人而言，我从不使用 re.VERBOSE，我从不提醒有关空格和其他规则的规则

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:25:17.267

或者，用于`[#]`向正则表达式添加一个`#`不打算开始评论的符号：

```
HASHTAG_SEQ_REGEX_PATTERN           = r"""
(                   #Outermost grouping to match overall regex
[#]\w+                #The hashtag matching. It's a valid combination of \w+
([:\s,]*[#]\w+)*      #This is an optional (0 or more) sequence of hashtags separated by [\s,:]*
)                   #Closing parenthesis of outermost grouping to match overall regex
""" 
```

我觉得这更具可读性。

# sql - PL/SQL 动态循环值

> ID：15282817
> 
> 赞同：0
> 
> 时间：2013-03-07T22:15:28.370
> 
> 标签：sql, plsql, oracle11g

我的目标是保留一个包含绑定值和参数的表，稍后将由 dbms_sql 使用。下面的 pl/sql 示例是基本的，其目的是说明我在从先前的循环对象中调用值时遇到的问题。

表**account_table**保存账户信息

```
CREATE TABLE account_table (account number, name varchar2(100)));

INSERT INTO mytest 
    (account, name) 
VALUES 
    (1 ,'Test');
COMMIT; 
```

表**MYTEST**保存绑定信息

```
CREATE TABLE mytest (bind_value varchar2(100));

INSERT INTO mytest (bind_value) VALUES ('i.account');
COMMIT;

DECLARE
  v_sql VARCHAR2(4000) := NULL;
  v_ret VARCHAR2(4000) := NULL;
BEGIN
  FOR I IN (
    SELECT account
    FROM account_table
    WHERE ROWNUM = 1
  ) LOOP

    FOR REC IN (
      SELECT *
      FROM mytest
    ) LOOP

      v_sql := 'SELECT ' || rec.bind_value || ' FROM dual';
      EXECUTE IMMEDIATE v_sql INTO v_ret;

      dbms_output.put_line ('Account: ' || v_ret);
    END LOOP;

  END LOOP;
END;
/ 
```

我无法存储名称**i.account**并稍后使用该对象的值。我的想法是使用 NDS；但是，虽然**v_sql**的值看起来没问题（它会显示“Select i.account from dual”），但**i.account**会引发无效标识符的异常。有没有办法获取对象的值？我们正在使用 Oracle 11g2。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:28:09.367

动态 SQL 将没有 PL/SQL 块的上下文。您不能在动态 SQL 语句中使用在 PL/SQL 块中定义的标识符。因此，您不能引用`i.account`和引用您在动态 SQL 语句之外定义的循环。当然，您可以动态生成整个 PL/SQL 块，但动态 PL/SQL 通常是一种非常糟糕的方法——很难正确处理这类事情。

但是，如果您尝试使用 的值`i.account`，则可以执行类似的操作

```
v_sql := 'SELECT :1 FROM dual';
EXECUTE IMMEDIATE v_sql
   INTO v_ret
  USING i.account; 
```

`i.account`但是，如果您想从表中获取字符串，这似乎对您没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T06:59:29.950

您是否总是尝试使用相同的 where 子句访问同一个表，但每次都只是查找不同的列？如果是这样，你可以这样做：

```
p_what_I_want := 'ACCOUNT';
--
SELECT decode(p_what_I_want
               ,'ACCOUNT', i.account
               , 'OTHER_THING_1', i.other_thing_1
               , 'OTHER_THING_2', i.other_thing_2
               , 'OTHER_THING_1', i.default_thing) out_thing
INTO l_thing
FROM table; 
```

上面的语句不是动态的，而是根据需要返回不同的列......

# jquery - getJSON 不支持 async:false

> ID：15282821
> 
> 赞同：2
> 
> 时间：2013-03-07T22:15:48.193
> 
> 标签：jquery, synchronous

我在下面有这段代码，它应该返回调用的结果。我需要同步执行此操作，以便我知道一切都很好，但是它似乎不起作用。我究竟做错了什么？

```
/* jQuery library:
 * http://code.jquery.com/jquery-1.9.1.min.js
 */
function getJSON(url){
    var result;
    $.getJSON(url, { async: false, success: function(data) {
        result = data;
        alert(data); // **Edit**: also undefined
    }});
    alert(result); // undefined
    return result;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T22:17:14.553

> getJSON 不支持 async:false

[`getJSON`](http://api.jquery.com/jQuery.getJSON/) **没有**选择`async: false`。你必须使用[`ajax`](http://api.jquery.com/jQuery.ajax)它。

根据文档，`getJSON`相当于：

```
$.ajax({
  dataType: "json",
  url: url,
  data: data,
  success: success
}); 
```

...您可以轻松地添加一个`async: false`选项（现在，请注意 jQuery 将放弃对它的支持）。

> 我需要同步执行此操作，以便我知道一切都很好

您不需要同步地做任何事情来“知道一切都很好”，完全有可能（并且正常）异步处理结果（无论是“好”还是错误）。

* * *

在对您的问题的评论中，您写道：

> jsonp？这是我正在使用的代码。

[JSON-P](http://en.wikipedia.org/wiki/JSONP#JSONP)与[JSON](http://json.org)不同（除非您在 URL 中有或类似，`getJSON`否则不会执行 JSON-P ），并且 JSON-P**本质上**是异步的。与真正的 ajax 调用不同，不可能使 JSON-P 同步。`callback=?`**`XMLHttpRequest`**

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T22:19:29.743

`$.getJSON()`不支持`async: false`，甚至无法将该选项传递给`$.getJSON()`（查看[jQuery doc](http://api.jquery.com/jQuery.getJSON/)中的参数）。

在内部，如果您查看[doc 页面](http://api.jquery.com/jQuery.ajax/)，`$.getJSON()`它会告诉您，如果 ajax 请求是跨域的并且是针对 JSONP 的，那么它不支持.`$.ajax()``$.ajax()``async: false`

这样做的原因是跨域 JSON 请求是用 JSONP 实现的，根据定义，它是一个动态插入的`<script>`标签，只能是异步的。它不能是同步的。

如果请求是跨域的，则需要将请求编码为异步的，如果不是跨域的`$.ajax()`，则直接使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-24T16:30:33.393

我只是在 getJSON 之前插入此代码：

```
$.ajaxSetup({
    async: false
}); 
```

原始答案：[是否可以将 async:false 设置为 $.getJSON 调用](https://stackoverflow.com/questions/2765411/is-it-possible-to-set-asyncfalse-to-getjson-call)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T22:23:19.743

[`$.getJSON`](http://api.jquery.com/jQuery.getJSON/)是 的简写`$.ajax`。

> 这是一个简写的 Ajax 函数，相当于：
> 
> $.ajax({ dataType: "json", url: url, data: data, success: 成功 });

您会注意到没有传递异步选项的选项。您尝试添加的参数`async: false`实际上是将通过`url`ajax 请求发送到的数据。

尝试这样做：

```
$.ajax({
  dataType: "json",
  url: url,
  async: false,
  data: data,
  success: success
}); 
```

另外，你的说法

> 我需要同步执行此操作，以便我知道一切都很好

是不正确的。您可以从异步回调中“知道一切都很好”。如果您这样编写示例代码，您的示例代码将完全按照您在上面尝试执行的操作：

```
function getJSON(url){
    var result;
    $.getJSON(url, function(data) {
        alert(data);
        // do other stuff with data, call other methods etc. etc.
    });
} 
```

您甚至可以单独定义回调函数并将其传递给`$.getJSON`，如下所示：

```
function jsonCallback(data) {
    alert(data);
    // do other stuff with data, call other methods etc. etc.
} 
function getJSON(url){
    var result;
    $.getJSON(url, jsonCallback);
} 
```**

# asp.net-mvc - ASP.NET MVC：多个视图文件夹和 _ViewStart.cshtml 文件

> ID：15282823
> 
> 赞同：5
> 
> 时间：2013-03-07T22:15:54.237
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, viewengine

我有一个 MVC 项目，需要有 2 个不同的 View 文件夹。一个在`~/Views/`，一个在`~/Framework/Views/`。这是通过创建一个基于 razor 视图引擎的自定义视图引擎来完成的，如下所示：

```
public class MyViewEngine : RazorViewEngine
{
    private static string[] AdditionalViewLocations = new[]{
        "~/Framework/Views/{1}/{0}.cshtml",
        "~/Framework/Views/{1}/{0}.vbhtml",
        "~/Framework/Views/Shared/{0}.cshtml",
        "~/Framework/Views/Shared/{0}.vbhtml"
    };

    public MyViewEngine()            
    {
        base.PartialViewLocationFormats = base.PartialViewLocationFormats.Union(AdditionalViewLocations).ToArray();
        base.ViewLocationFormats = base.ViewLocationFormats.Union(AdditionalViewLocations).ToArray();
        base.MasterLocationFormats = base.MasterLocationFormats.Union(AdditionalViewLocations).ToArray();
    }
} 
```

问题是我想在 2 个 Views 文件夹中的每一个中使用不同的 _ViewStart.cshtml 文件（即`~/Views/_ViewStart.cshtml`用于文件夹中的视图和文件`~/Views/`夹中的视图），但是视图引擎只使用它找到的第一个是原始的。`~/Framework/Views/_ViewStart.cshtml``~/Framework/Views/``~/Views/`

这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-09T01:49:25.503

这绝对是可能的，我想你只是错过了一些东西。

我已经使用您提供的视图引擎（逐字复制和粘贴）自己对此进行了测试。我没有看到与您相同的行为。我有两个`_ViewStart.cshtml`文件，一个在`~/Framework/Views/_ViewStart.cshtml`，一个在`~/Views/_ViewStart.cshtml`。

当我在 中运行视图时`~/Framework/Views/`，它使用`_ViewStart.cshtml`Framework 文件夹中的 。当我在 中运行视图时`~/Views/`，它使用`_ViewStart.cshtml`Views 文件夹中的 。

在使用 DotPeek 时仔细检查代码`RazorViewEngine`也可以确认这正是它的行为方式。视图引擎开始检入`_ViewStart.cshtml`与正在呈现的视图在同一文件夹中命名的文件，然后向上遍历目录树，直到到达应用程序的根目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-07T22:29:36.793

的选择`_ViewStart`是分层的，但您已添加`~/Framework/Views`并行到`~/Views`. 我不认为 Razor 设置为实际执行您想要的操作（即两个完全平行的视图位置）。但是，如果您要放入`Framework`主`Views`文件夹，则您`_ViewStart`的 s 将正确加载。

# excel - 如何使用 SendKeys 从 DOS 应用程序复制粘贴到 Excel？

> ID：15282825
> 
> 赞同：3
> 
> 时间：2013-03-07T22:15:56.337
> 
> 标签：excel, vba, sendkeys

我正在尝试模拟此操作：

*   激活另一个应用程序，
*   发送按键 ctrl+c,
*   返回Excel，
*   发送按键 ctrl+v

并在单元格中具有该值。

它是一个 DOS 窗口风格的应用程序，所以按键是管理它的唯一方法。

我设法激活并将诸如 ENTER 之类的击键输入到该 DOS 风格的应用程序中，但是当我尝试`ctrl`+时`C`，它没有看到做任何事情。

我尝试在 Excel VBA 中模拟它：

```
Range("E7").Select
SendKeys "^c"
Range("G7").Select
SendKeys "^v" 
```

E7 值不会被复制，但 G7（粘贴目标）会突出显示，就好像它被选中进行复制一样。

注意：我不是试图将内容从 Excel 复制到 Excel，而是使用 Excel 执行击键。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T13:54:06.307

我今天遇到了同样的问题。

我在将 CTRL-C 发送到应用程序后稍等片刻就解决了这个问题。如果您立即执行另一个脚本行，似乎没有任何内容被复制。

```
SendKeys "^c"
WScript.Sleep 100 ' wait a bit after CTRL+C (otherwise nothing is copied) 
```

事实上，当切换到另一个应用程序并发送 CTRL+V 时，似乎也会发生同样的问题。同样，我通过等待解决了它：

```
AppActivate "Microsoft Excel"
WScript.Sleep 100 ' wait a bit after making window active
SendKeys "^v" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-15T09:31:14.423

问题是复制和粘贴需要一些时间，而 VBA 并没有等待它。

首先，您需要指定发送密钥方法的第二个参数，即“等待”。将其设置为真。因此，VBA 执行一直在等待，直到发送密钥完成。

其次，您需要等到将数据复制到剪贴板的过程完成。sendkeys 中的“等待”没有这样做，因为它不是关于通过 VBA 发送密钥，而是关于 Windows 使用剪贴板。为此，请使用我的函数 IsCopyingCompleted。

这是 final 的样子：

```
SendKeys "^a", True 'Select all
SendKeys "^c", True 'Copy
Do
    DoEvents
Loop Until Me.IsCopyingCompleted()
YourSheet.Paste

Function IsCopyingCompleted() As Boolean
'Check if copying data to clipboard is completed

    Dim tempString As String
    Dim myData As DataObject

    'Try to put data from clipboard to string to check if operations on clipboard are completed
    On Error Resume Next
    Set myData = New DataObject
    myData.GetFromClipboard
    tempString = myData.GetText(1)
    If Err.Number = 0 Then
        IsCopyingCompleted = True
    Else
        IsCopyingCompleted = False
    End If
    On Error GoTo 0

End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-28T22:57:27.133

我遇到了同样的问题 - 我开发了代码并且它在我的计算机上运行 - SendKeys“^v”......但它在另一个用户的计算机上不起作用！我正在尝试一切......延迟，欣赏，从Excel访问，让用户检查各种设置，selection.paste......不好。最后我注意到不同的语法......我们使用的是相同的办公版本，我不确定 Windows。但是我输入了 6 种不同的语法，如果失败则跳过它......发送带有大写 v 的键，括在花括号中，花括号中的每个组件用加号分隔，等等。它工作！其中 2 个命令将 ^V 放在 Outlook 正文中......我删除了这 2 个，我很高兴。

# socket.io - socketio_manage - 命名空间

> ID：15282826
> 
> 赞同：2
> 
> 时间：2013-03-07T22:16:00.607
> 
> 标签：socket.io, gevent, gevent-socketio

谁能详细解释一下 gevent socketio_manage，什么是命名空间以及如何调用命名空间中的方法？

我在网上验证了很多文档，但没有得到关于 socketio_manage 的明确描述

# sql - 聚合函数别名错误

> ID：15282827
> 
> 赞同：0
> 
> 时间：2013-03-07T22:16:04.060
> 
> 标签：sql, oracle, function, alias, aggregate

我有以下 SQL 代码：

```
SELECT  ACTIVITY_TYPE, COUNT(EVENT_ID) as etv, SUM(etv) as etva, AVG(etva)
FROM ACTIVITIES, "EVENTS"
WHERE ACTIVITIES.ACTIVITY_ID="EVENTS".ACTIVITY_ID
GROUP BY ACTIVITY_TYPE; 
```

这是试图回答这个问题：

> d) 提供有关所提供的各种活动类型的管理信息的查询。对于每种类型的活动，查询应显示参加该类型活动的总人数以及参加每种活动的平均人数。

不幸的是，我收到以下错误：

```
ORA-00904: "ETVA": invalid identifier 
```

任何帮助都会很棒！

编辑：

```
SELECT  ACTIVITY_TYPE, COUNT(EVENT_ID), AVG(COUNT(EVENT_ID))
FROM ACTIVITIES, "EVENTS"
WHERE ACTIVITIES.ACTIVITY_ID="EVENTS".ACTIVITY_ID
GROUP BY ACTIVITY_TYPE; 
```

这是我现在收到此错误的新查询：

```
ORA-00937: not a single-group group function 
```

表结构：

```
CREATE TABLE "GROUPS" (
  GROUP_ID NUMBER( 4 ) NOT NULL CONSTRAINT GROUP_ID_PK  PRIMARY KEY ,
  GROUP_NAME VARCHAR2(35) NULL,
  GROUP_NUMBER_OF_MEMBERS NUMBER( 3 ) NOT NULL ,
  GROUP_LEADER_ID NUMBER( 4 ) NOT NULL
);

CREATE TABLE MEMBERS (
  MEMBER_ID NUMBER( 4 ) NOT NULL CONSTRAINT MEMBER_ID_PK  PRIMARY KEY ,
  MEMBER_SURNAME VARCHAR2( 35 ) NOT NULL ,
  MEMBER_FIRST_NAME VARCHAR2( 35 ) NOT NULL ,
  MEMBER_DOB DATE NOT NULL ,
  MEMBER_GENDER VARCHAR2( 1 ) NOT NULL CONSTRAINT MEMBER_GENDER_CHECK CHECK ( MEMBER_GENDER IN ( 'M' , 'F' ) ),
  GROUP_ID NUMBER( 4 ) NOT NULL,
  CONSTRAINT GROUP_ID_FK_MEMBER FOREIGN KEY (GROUP_ID) REFERENCES "GROUPS"(GROUP_ID)
);

CREATE TABLE CHALETS (
  CHALET_NO NUMBER( 4 ) NOT NULL CONSTRAINT CHALET_ID_PK  PRIMARY KEY ,
  CHALET_NAME VARCHAR2( 35 ) NOT NULL,
  CHALET_CAPACITY NUMBER( 2 ) NOT NULL,
  CHALET_RATE NUMBER( 6 , 2 ) NOT NULL
);

CREATE TABLE SUPERVISORS (
  SUPERVISOR_ID NUMBER ( 4 ) NOT NULL CONSTRAINT SUPERVISOR_ID_PK PRIMARY KEY ,
  SUPERVISOR_SURNAME  VARCHAR2( 35 ) NOT NULL , 
  SUPERVISOR_FIRST_NAME VARCHAR2( 35 ) NOT NULL ,
  SUPERVISOR_MOBILE_NUMBER VARCHAR2( 11 ) NOT NULL
);

CREATE TABLE ACTIVITIES (
  ACTIVITY_ID NUMBER ( 4 ) NOT NULL CONSTRAINT ACTIVITY_ID_PK PRIMARY KEY , 
  ACTIVITY_TYPE VARCHAR ( 35 ) NOT NULL , 
  ACTIVITY_TITLE VARCHAR2( 35 ) NOT NULL
);

CREATE TABLE BOOKINGS (
  BOOKING_ID NUMBER( 4 ) NOT NULL CONSTRAINT BOOKING_ID_PK PRIMARY KEY , 
  GROUP_ID NUMBER( 4 ) NOT NULL , 
  CHALET_ID NUMBER( 4 ) NOT NULL ,
  BOOKING_START_DATE DATE NOT NULL , 
  BOOKING_END_DATE DATE NOT NULL ,
  CONSTRAINT GROUP_ID_FK_BOOKING FOREIGN KEY (GROUP_ID) REFERENCES GROUPS(GROUP_ID) ,
  CONSTRAINT CHALET_ID_FK_BOOKING FOREIGN KEY (CHALET_ID) REFERENCES CHALETS(CHALET_NO)
);

CREATE TABLE "EVENTS" (
  EVENT_ID NUMBER ( 4 ) NOT NULL CONSTRAINT EVENT_ID_PK PRIMARY KEY , 
  MEMBER_ID NUMBER ( 4 ) NOT NULL , 
  SUPERVISOR_ID NUMBER ( 4 ) NOT NULL ,
  ACTIVITY_ID NUMBER ( 4 ) NOT NULL ,
  EVENT_COMMENTS VARCHAR2( 500 ) ,
  EVENT_DATE DATE NOT NULL , 
  EVENT_TIME_SLOT VARCHAR2( 2 ) NOT NULL ,
  CONSTRAINT MEMBER_ID_FK_EVENT FOREIGN KEY (MEMBER_ID) REFERENCES MEMBERS(MEMBER_ID) ,
  CONSTRAINT SUPERVISOR_ID_FK_EVENT FOREIGN KEY (SUPERVISOR_ID) REFERENCES SUPERVISORS(SUPERVISOR_ID) ,
  CONSTRAINT ACTIVITY_ID_FK_EVENT FOREIGN KEY (ACTIVITY_ID) REFERENCES ACTIVITIES(ACTIVITY_ID)
);

ALTER TABLE "GROUPS" ADD CONSTRAINT MEMBER_ID_FK_GROUP_LEADER FOREIGN KEY (GROUP_LEADER_ID) REFERENCES MEMBERS(MEMBER_ID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:23:39.847

问题出在`AVG(etva)`.

您不能在定义**别名**的地方使用别名。`SELECT list`

更大的问题是您不能 `AVG`对值 ( `SUM()`) 使用聚合函数。

根据您需要的任务描述，`AVG(etv)`因为它已经在上面由**codingbiz**指出。

**继续** 发布新查询后。

我的理解是，`EVENTS`会有记录将成员与他们参与的活动联系起来。

`JOIN` `EVENTS`如果是这样，您将需要`sub-query`计算来自`EVENTS`“活动”和“活动”的成员的计数，以获取活动标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:10:48.160

正如我从发布的结构中了解的那样。每个活动都是独一无二的，在每个活动中只参加一个成员。因此，您无法计算每个活动的平均成员数，因为它只是具有特定活动的事件的总和。只有参与者总数是可能的：

```
SELECT  ACTIVITY_TYPE, COUNT(EVENT_ID)
FROM ACTIVITIES, "EVENTS"
WHERE ACTIVITIES.ACTIVITY_ID="EVENTS".ACTIVITY_ID
GROUP BY ACTIVITY_TYPE; 
```

如果我错了，请纠正我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T14:08:17.623

查询中的 etv 和 etva 不是列，而是别名。您无法选择它们。要选择它们，请遵循此并为您的查询/列提供有意义的别名：

```
SELECT ACTIVITY_TYPE, count_etv, sum_etva, AVG(sum_etva) avg_atva
  FROM
  (
   SELECT ACTIVITY_TYPE, count_etv, SUM(count_etv) as sum_etva
     FROM
   (
    SELECT ACTIVITY_TYPE, COUNT(EVENT_ID) as count_etv  
       --, SUM(etv) as etva, AVG(etva) -- NOT columns you cannot select them
     FROM ACTIVITIES, "EVENTS"
    WHERE ACTIVITIES.ACTIVITY_ID="EVENTS".ACTIVITY_ID
   GROUP BY ACTIVITY_TYPE
   )
   GROUP BY ACTIVITY_TYPE, count_etv
  )
 GROUP BY ACTIVITY_TYPE, count_etv, sum_etva
 / 
```

第二个查询 - 更干净，更具可读性......：

```
SELECT ACTIVITY_TYPE -- optional
      , total_events  -- optional
     , AVG(total_events) avg_events
  FROM
  (
   SELECT ACTIVITY_TYPE
        , COUNT(EVENT_ID) total_events
     FROM ACTIVITIES, "EVENTS"
    WHERE ACTIVITIES.ACTIVITY_ID="EVENTS".ACTIVITY_ID
    GROUP BY ACTIVITY_TYPE
   )
  GROUP BY ACTIVITY_TYPE, total_events
  / 
```

# ember.js - Ember.js - 如何在一个插座中有多个区域和多个模型

> ID：15282831
> 
> 赞同：2
> 
> 时间：2013-03-07T22:16:15.217
> 
> 标签：ember.js

我试图让 2 个小部件出现在 ember.js 应用程序的多个路由中。我已经设置了以下作为演示，[http://jsfiddle.net/adice/EyDcy/5/](http://jsfiddle.net/adice/EyDcy/5/)

您会看到我已经找到了一种方法，方法是将以下内容添加到路由中：

```
App.IndexRoute = Em.Route.extend({
    setupController: function(controller,model) {
       this._super(controller,model);
       controller.set('user',App.UsersStore.find(2));
       controller.set('site',App.SiteData.find(1));
     }
}); 
```

但是，如果我想让它适用于每条路线，我真的必须手动将它添加到我制作的所有路线中吗？我试图将它添加到 ApplicationRoute，但一直返回错误。

还有一种填充id的方法吗？我想做

```
App.appData = Em.Object.create({
    currentUserId: 2
});

App.IndexRoute = Em.Route.extend({
    setupController: function(controller,model) {
       this._super(controller,model);
       controller.set('user',App.UsersStore.find(App.appData.currentUserId));
       controller.set('site',App.SiteData.find(1));
     }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T17:27:56.500

由于您想在每条路由中访问该用户对象，因此您不必依赖路由器，但可能可以将用户对象视为您希望从应用程序中的任何位置访问的全局变量。有几个地方可以存储这些对象。在[你的 jsfiddle 的这个更新版本中，](http://jsfiddle.net/ahx_/EyDcy/6/)我把它放在了 ApplicationController 的“currentUser”属性中：

```
App.ApplicationController = Ember.Controller.extend({
  init: function() {
    this.set('currentUser', App.UsersStore.find(2))
  }
}); 
```

使用[“需要”语法](http://emberjs.com/guides/controllers/dependencies-between-controllers/)，您可以从其他控制器访问其他控制器。查看 UserDetailsController：

```
App.UserDetailsController = Ember.ObjectController.extend({
  needs: 'application',
  content: Ember.computed.alias('controllers.application.currentUser')
}) 
```

我刚刚了解如何使用的一件事是 {{render}} 助手：

```
{{render "user_details"}} 
```

有了这个，你可以在你的应用程序的任何地方渲染任意模板（“user_details”）+控制器（“UserDetailsController”），不管你在哪个路由。（我认为这就是 ember.js 人们在谈论“单例控制器”时的意思。）

结合所有这些，我希望您对如何解决问题有更好的了解。

# javascript - 如何判断页面上是否加载了 AjaxControlToolkit.HTMLEditor

> ID：15282842
> 
> 赞同：0
> 
> 时间：2013-03-07T22:16:52.573
> 
> 标签：javascript, asp.net, ajax, asp.net-ajax

我在我的页面上使用 AjaxControlToolkit.HTMLEditor，但根据某些变量，编辑器的 Visible 控件可以在代码隐藏中设置为 false。我正在像这样在 Javascript 中获得对 HTMLEditor 的引用

```
var email = $get('<%=TemplateEditor.ClientID%>').control; 
```

但我需要一种方法来判断控件是否加载到页面上。如果不是，我不想调用上面的代码，因为它会出错。如果控件已加载到页面上，谁能告诉我如何在 Javascript 中进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:29:51.093

这是一个坏把戏，但我认为工作..

将一个`<asp:HiddenField>`放入页面中，然后在更改 TemplateEditor 的 Visible 属性的代码中将 Value 属性设置为“True”或“False”。

之后，简单地说：

```
var isVisible = $get('<%=HiddenField.ClientID%>').value;
var email;

if (hiddenFieldValue == "True")
    email = $get('<%=TemplateEditor.ClientID%>').control; 
```

希望这有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:30:52.873

您应该能够检查`Sys.Extended.UI.HTMLEditor`页面上是否存在。如果编辑器不可见，我认为不会加载脚本。

```
if(typeof Sys.Extended.UI.HTMLEditor !== "undefined") {
     // editor exists on page
} 
```

编辑

如果无法通过您提供的 ID 找到控件，则修补 javascript 控制台`$get()`似乎返回 null 。`$get()`也许尝试：

```
var editor = $get('<%=TemplateEditor.ClientID%>');
if(editor !== null) {
    var email = editor.control;
    // you'll probably want to do more processing here.
} 
```

# iphone - 如何创建捕捉到选择的滑块

> ID：15282843
> 
> 赞同：0
> 
> 时间：2013-03-07T22:16:57.537
> 
> 标签：iphone, ios, cocoa-touch

我将如何制作一个捕捉选择的滑块。我有3个选择，一个在左边，一个在右边，一个在中间。当用户将滑块向左拖动一点时，它将动画并捕捉到左侧的选择。右侧和中间的效果相同。

如果您熟悉应用程序 UBER，他们有一些东西（有 4 个部分）正是我所说的。此处的屏幕截图（底部的滑块）： ![http://i.imgur.com/xTPfDcY.png](../Images/e552ac0c7441a74df88a52fdd74b591c.png)

知道我将如何实现这一点吗？我应该使用 UISlider 还是不使用？

非常感谢，加布

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T22:27:42.830

在不考虑 Uber 滑块的自定义外观的情况下，您可以通过侦听滑块上的 Touch Up Inside 事件（和 Touch Up Outside，为了完整起见）并将其值设置为最接近的整数来实现这种“动画捕捉”行为价值：

```
- (IBAction)sliderTouchUp:(UISlider *)sender
{
    [sender setValue:floorf([sender value] + 0.5) animated:YES];
} 
```

将最小值设置为 1 并将最大值设置为 3 将在滑块上为您提供三个“停止”，当用户释放滑块时，它将动画到最近的停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:36:41.563

基本思想是，当用户移动它时，您要查看滑块的当前值，如果它落在您的“捕捉”范围内，则将滑块的值设置为所需的位置。像这样的东西：

```
- (void)sliderUpdated:(UISlider *)slider {
    float val = slider.value;
    if (val>= 0.46 && val <= 0.54) {
        [slider setValue:0.5 animated:YES];
    }
} 
```

显然，您将需要检查三个不同的范围。我发布的代码使滑块看起来中间有一个棘爪。您可能还需要跟踪滑块的移动方向，以便知道将滑块向左还是向右移动。

# list - Scala List.contains(x) 返回 false，但 exists(_.== x) 返回 true

> ID：15282847
> 
> 赞同：4
> 
> 时间：2013-03-07T22:17:09.083
> 
> 标签：list, scala, collections, contains, exists

我正在使用 Scala 中的一些简单数据结构和集合，我注意到我认为是奇怪的行为。这是对象：

```
class State (protected val trackmap: Map[Int, List[String]]) {

  override def clone : State = {
    new State(Map() ++ trackmap)
  }

  override def toString = { "State: " + trackmap.toString }

  def equals (other: State) : Boolean = {
    //println("Comparing " + trackmap + " to " + other.trackmap)
    trackmap == other.trackmap  

  }

  def == (other: State) : Boolean = {
    this equals other
  }
} 
```

还有我的相关测试：

```
 test("state equality") {
    val state = new State( Map(1 -> List("engine"), 2 -> List("a"), 3 -> List("b")) )

    expect(true) { state equals state.clone }
    expect(true) { state == state.clone }
    expect(false) { state == new State(Map(1 -> List("a"))) }
    expect(false) { state equals new State(Map(1 -> List("a"))) }

    expect(true) { List(state).exists( _.equals (state.clone) )}
    expect(true) { List(state).exists( _.== (state.clone) )}
    expect(true) { List(state).contains( state.clone )}
  } 
```

除了我希望通过的最后一个之外，所有这些都通过了。我还没有查看 Scala 源代码，但我认为 contains 基本上会在第二个存在调用时实现。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-07T22:42:08.237

您没有覆盖 Scala 的*实际*equals 方法，这就是它表现奇怪的原因。像这样重写你的equals方法，事情应该可以工作：

```
override def equals (other: Any) : Boolean = {
    other match{
      case that: State =>
        //println("Comparing " + trackmap + " to " + other.trackmap)
        trackmap == that.trackmap
      case _ => false
    }
} 
```

看，Scala 中的 equals 方法接受类型为 Any 而非 State 的参数，您需要为其添加`override`关键字。

顺便说一句，您甚至不需要 == 方法，因为 Scala 会自动将其重新映射为 equals 方法！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-07T22:41:40.423

您的`equals`方法没有被 调用`contains`，因为您没有覆盖 上的默认实现`Any`。对此的线索是编译器不会抱怨缺少`override`修饰符。

正确的方法签名是

```
override def equals(other: Any): Boolean 
```

当您调用`List(state).exists( _.equals (state.clone)`时，它会解析为您的实现，因为编译器知道参数的类型是`State`。因此，它选择了专用于该类型的方法的重载变体。

的签名`contains` *始终*采用`Any`类型参数，而不管 的类型参数如何`List`，因此方法调用将解析为 的默认实现`equals`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T22:51:08.220

您对`equals`and`==`的实施不应该是这样。出于这个原因，Scala 有这个`case`类。

然后你的班级看起来像这样

```
case class State(protected val trackmap: Map[Int, List[String]]) {

  override def clone: State = {
    new State(Map() ++ trackmap)
  }

  override def toString = { "State: " + trackmap.toString }
} 
```

如果您想手动实现它们，则需要实现`Equals`特征。并覆盖以下方法：

```
override def canEqual(other: Any) = 
  other.isInstanceOf[State]

override def equals(other: Any) = {
  other match {
    case that: State => (that canEqual this) && trackmap == that.trackmap
    case _ => false
  }
}

override def hashCode() = {
  val prime = 41
  prime + trackmap.hashCode
} 
```

# mysql - Perl 和 MYSQL - 在年-月-日时：分：秒（unix？）样式时间戳之间选择数据

> ID：15282854
> 
> 赞同：0
> 
> 时间：2013-03-07T22:17:20.297
> 
> 标签：mysql, perl, date

我整天都在寻找答案，并尝试了我所有的想法。我正在做的事情看似容易，但对我来说非常困难。我必须这样做而不安装额外的 Perl 模块。

我正在尝试选择在两个日期之间输入的名称列表。我知道这些示例显然不严格或不安全，但我只是想弄清楚。一旦我找到了达到所需结果的方法，我将在稍后解决所有这些问题。

$to 和 $from 的传入数据示例：

```
$to= '2013-03-01 00:00:01';
$from= '2013-03-01 23:23:59'; 
```

数据库中的`entered`列也是这种格式。

我试过了：

```
$names = DBI->connect("$sdb","$user","$password");
   $getnames = $names->prepare(qq{SELECT DISTINCT `name` 
    FROM `users` 
    WHERE `entered` 
    BETWEEN UNIX_TIMESTAMP($from) 
    AND UNIX_TIMESTAMP($to) 
    AND `active` = ? 
    AND `confirmed` = ? 
    ORDER BY `entered` DESC});
    $getnames->execute($active,$confirmed); 
```

我试过了：

```
 $names = DBI->connect("$sdb","$user","$password");
    $getnames = $names->prepare(qq{SELECT DISTINCT `name`
   FROM `users`
   WHERE `entered` BETWEEN ?
   AND ?
   AND `active` = ?
   AND `confirmed` = ?
   ORDER BY `entered` DESC});
   $getnames->execute($from,$to,$active,$confirmed); 
```

我也尝试了上述两种方法的许多变体，但我不断得到：

```
Can't call method "prepare" on an undefined value at users-by-date.pl line 120 even when I hard code the variables. 
```

有人可以告诉我如何做到这一点吗？我的查询在 phpmyadmin 中执行得很好，但是我需要使用 Perl 将结果打印到页面上。我相信这与日期格式有关。不，我无法更改数据库中的日期格式。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T09:34:33.280

```
$names = DBI->connect("$sdb","$user","$password"); 
```

应该

```
$names = DBI->connect($sdb, $user, $password) or die "Couldn't connect to database: $!"; 
```

添加`or die...`零件将有两个目的：

1）它会立即停止您的程序，防止您以后尝试使用数据库句柄时出现虚假错误，而真正的问题是它无法连接到数据库。

2）它会告诉你*为什么*数据库连接失败。（数据库的错误信息将在`$!`.）

我还删除了变量周围的双引号，因为它们不是必需的。

# angularjs - 通过 Angular 指令显示 Flash tag causes Flash to attempt to load {{expression}} I have an AngularJS directive: myApp.directive('movie', function(){ return { restrict: 'E', replace: true, scope: { product:'=' 问问题 问问题 2013-03-07T22:17:37.400 4640 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have an AngularJS directive: myApp.directive('movie', function(){ return { restrict: 'E', replace: true, scope: { product:'=', codebase: '@' }, template: '' + '<param value="{{product.flashURL}}" name="movie">' + '<param value="true" name="play">' + '<param value="true" name="menu">' + '<param value="transparent" name="wmode">' + '<param value="noscale" name="scale">' + '<embed wmode="transparent" style="width:550px;height:320px;" src="{{product.flashURL}}" scale="noscale" '="" +="" pluginspage="http://www.macromedia.com/go/getflashplayer" play="true" name="movieEmbed" menu="true" id="movieEmbed">' + '' };}); It is used like this: <movie product="productInScope" codebase="http://flashcodebase...">I made this directive to fix the problem I was having by simply including this HTML in a view, which is this: the instant the object tag is rendered, the Flash attempts to load a movie at the URL "{{product.flashURL}}". That obviously fails, and by the time Angular gets around to interpolating the expression, it's too late. Unfortunately, restructuring it as a directive didn't help the problem. Interestingly, the {{codebase}} expression seems to always work; maybe it evaluates first, causing the Flash to load and attempt to fetch the URL? How would you rewrite this directive (or use some simpler approach) so that the object tag is not created until the flashURL is available? I ran into a similar issue trying to embed a PDF via directive. The problem is that when the template is placed into the DOM the bindings have not yet been interpolated, as @mfelix supposes. However it is trickier because object invokes code outside the browser so it isn't guaranteed to play well with invalid or dynamic attributes (depends on the plugin I suppose). I wound up having to write a link function, which $observes the variable, just as in the ng-src/ng-href solution. In the case of ng-src or ng-href, the $observe callback on the variable simply sets the corresponding attribute and everything works because HTML5 (or as we used to call it, DHTML) is cool like that. For example, you might have an tag without a corresponding href. The browser handles this just fine. And when you set an href on it after the first Angular digest, the browser can deal with it. But for the tag, it doesn't work so well, because even if the plugin is misconfigured (say, missing src attribute), the browser has no way of knowing that and it will still invoke the corresponding plugin, which will treat missing information in a highly idiosyncratic way. In my case, Firefox handled it gracefully and Chrome barfed. So the next approach I tried was to use the $observing callback to inject a child element containing the fully specified object tag (concatenating the variable into the template string using the + operator). Simplified example directive definition: scope: ... link: function(scope, element, attrs) { attrs.$observe('src', function(value) { if (value) { element.html( ''); } else { element.html(""); // We have to put something into the DOM } }); }, etc: ... When src finally has a value, and when its value changes, the callback you register via $observe will be invoked. My third solution, which I like best, was to process the PDFs into GIFs and display them as images, completing forgoing accursed plugins (and no, PDF.js wasn't cutting it). So maybe you can turn your Flash movies into animated .gifs. That would be awesome. angularjsangularjs-directive 4 1 回答 1 This answer is useful 11 我在尝试通过指令嵌入 PDF 时遇到了类似的问题。问题是当模板被放入 DOM 时，绑定还没有被插入，正如@mfelix 所假设的那样。然而它更棘手，因为object调用浏览器之外的代码，所以不能保证它可以很好地使用无效或动态属性（取决于我想的插件）。 我最终不得不编写一个link函数，其中$observes的变量，就像在ng-src/ng-href解决方案中一样。在ng-srcor的情况下ng-href，变量的$observe回调只是设置了相应的属性，一切正常，因为 HTML5（或者我们以前称之为 DHTML）就像那样很酷。例如，您可能有一个没有相应href. 浏览器处理得很好。当你href在第一个 Angular 摘要之后设置它时，浏览器可以处理它。但对于标签，它并不能很好地工作，因为即使插件配置错误（例如，缺少 src 属性），浏览器也无法知道，它仍然会调用相应的插件，该插件将高度处理丢失的信息异想天开的方式。就我而言，Firefox 优雅地处理了它，而 Chrome 则被拒绝了。 所以我尝试的下一个方法是使用$observing回调来注入一个包含完全指定object标记的子元素（使用 + 运算符将变量连接到模板字符串中）。 简化示例指令定义： scope: ... link: function(scope, element, attrs) { attrs.$observe('src', function(value) { if (value) { element.html( ''); } else { element.html(""); // We have to put something into the DOM } }); }, etc: ... 当srcfinally 有一个值，并且当它的值改变时，你通过 $observe 注册的回调将被调用。 我最喜欢的第三个解决方案是将 PDF 处理为 GIF 并将它们显示为图像，完成上述被诅咒的插件（不，PDF.js 并没有削减它）。因此，也许您可 以将您的 Flash 电影转换为动画 .gif。那将是真棒。 于 2013-03-08T01:19:09.967 回答 Related 1 python - 发布更多文件并将它们保存到 db - django 1 sql - 如何设置从一个表中获取的值等于另一个表访问的条件 2 cordova - PhoneGap 2.5 的语法是否改变了？ 1 mysql - 在这种情况下首选哪种数据结构/类型 5 java - 从当前日期减去两天（以纪元毫秒为单位）java 1 .net - 无需注册即可创建自定义文化 3 javascript - 可以在javascript中使用带有标签的break吗？ 2 php - 在 WHILE 循环内 - 试图踢到不同的位置 2 database-normalization - 如何规范医生表以遵循 2NF？ 6 php - php没有在数据库上显示结果 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15282859
> 
> 赞同：4
> 
> 时间：
> 
> 标签：angularjs, angularjs-directive

I have an AngularJS directive:

```
myApp.directive('movie', function(){
return {
    restrict: 'E',
    replace: true,
    scope: { product:'=', codebase: '@' },
    template: '<object style="width:550px;height:320px;" name="movie" id="movie" codebase="{{codebase}}"' +
              ' classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" tabindex="-1">' +
              '<param value="{{product.flashURL}}" name="movie">' +
              '<param value="true" name="play">' +
              '<param value="true" name="menu">' +
              '<param value="transparent" name="wmode">' +
              '<param value="noscale" name="scale">' +
              '<embed wmode="transparent" style="width:550px;height:320px;" src="{{product.flashURL}}" scale="noscale"' +
              ' pluginspage="http://www.macromedia.com/go/getflashplayer" play="true" name="movieEmbed" menu="true" id="movieEmbed">' +
              '</object>'
};}); 
```

It is used like this:

```
<movie product="productInScope" codebase="http://flashcodebase..." /> 
```

I made this directive to fix the problem I was having by simply including this HTML in a view, which is this: the instant the object tag is rendered, the Flash attempts to load a movie at the URL "{{product.flashURL}}". That obviously fails, and by the time Angular gets around to interpolating the expression, it's too late.

Unfortunately, restructuring it as a directive didn't help the problem. Interestingly, the {{codebase}} expression seems to always work; maybe it evaluates first, causing the Flash to load and attempt to fetch the URL?

How would you rewrite this directive (or use some simpler approach) so that the object tag is not created until the flashURL is available?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-08T01:19:09.967

我在尝试通过指令嵌入 PDF 时遇到了类似的问题。问题是当模板被放入 DOM 时，绑定还没有被插入，正如@mfelix 所假设的那样。然而它更棘手，因为`object`调用浏览器之外的代码，所以不能保证它可以很好地使用无效或动态属性（取决于我想的插件）。

我最终不得不编写一个`link`函数，其中`$observes`的变量，就像在`ng-src`/`ng-href`解决方案中一样。在`ng-src`or的情况下`ng-href`，变量的`$observe`回调只是设置了相应的属性，一切正常，因为 HTML5（或者我们以前称之为 DHTML）就像那样很酷。例如，您可能有一个`<a>`没有相应`href`. 浏览器处理得很好。当你`href`在第一个 Angular 摘要之后设置它时，浏览器可以处理它。但对于`<object>`标签，它并不能很好地工作，因为即使插件配置错误（例如，缺少 src 属性），浏览器也无法知道，它仍然会调用相应的插件，该插件将高度处理丢失的信息异想天开的方式。就我而言，Firefox 优雅地处理了它，而 Chrome 则被拒绝了。

所以我尝试的下一个方法是使用`$observing`回调来注入一个包含完全指定`object`标记的子元素（使用 + 运算符将变量连接到模板字符串中）。

简化示例指令定义：

```
scope: ...
link: function(scope, element, attrs) {
        attrs.$observe('src', function(value) {
          if (value) {
            element.html(
              '<object width="100%" type="application/pdf" data="'+value+'">');
          } else {
            element.html("<div></div>"); // We have to put something into the DOM
          }
        });
      },
 etc: ... 
```

当`src`finally 有一个值，并且当它的值改变时，你通过 $observe 注册的回调将被调用。

我最喜欢的第三个解决方案是将 PDF 处理为 GIF 并将它们显示为图像，完成上述被诅咒的插件（不，PDF.js 并没有削减它）。因此，也许您可​​以将您的 Flash 电影转换为动画 .gif。那将是真棒。</movie>

# vb.net - 使按钮单击更改图片框中的图片 Visual Basic

> ID：15282874
> 
> 赞同：3
> 
> 时间：2013-03-07T22:18:34.433
> 
> 标签：vb.net, visual-studio-2010, picturebox

我在 Visual Basic 2010 Express 上有一个图片框和多个按钮。我正在寻找一个示例代码，用于在单击按钮时将图片放入框中，并在单击另一个按钮时更改。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-07T22:33:31.790

如果您像标记问题一样使用 VBA（在编辑之前）......然后试试这个。

```
Private Sub button1_Click()
    picture1.Picture = "C:\1.jpg"
End Sub

Private Sub button2_Click()
 picture1.Picture = "C:\2.jpg"
End Sub 
```

如果它的 vb.net（我指出是因为你说 Visual Studio 2010 Express）试试这个

```
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    PictureBox1.Image = Image.FromFile("C:\1.jpg")
End Sub

Private Sub Button2_Click(sender As Object, e As EventArgs) Handles Button2.Click
    PictureBox1.Image = Image.FromFile("C:\2.jpg")
End Sub 
```

异常处理取决于你:)

# database - Grails多数据源域问题

> ID：15282879
> 
> 赞同：3
> 
> 时间：2013-03-07T22:18:42.797
> 
> 标签：database, grails, connection, datasource

我有一个项目，其中表分布在 2 个数据源之间。我正在配置代码以根据 grails 文档 [http://grails.org/doc/2.0.0.M2/guide/conf.html#dataSourcesAndEnvironments中的 3.3.6 主题访问表](http://grails.org/doc/2.0.0.M2/guide/conf.html#dataSourcesAndEnvironments)

一切似乎都很好，但我收到以下错误

> 消息：创建名为“transactionManagerPostProcessor”的 bean 时出错：bean 初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“transactionManager”的 bean 时出错：设置 bean 属性“sessionFactory”时无法解析对 bean“sessionFactory”的引用；嵌套异常是 org.springframework.beans.factory.BeanCreationException：创建名为“sessionFactory”的 bean 时出错：调用 init 方法失败；嵌套异常是 org.hibernate.MappingException：关联引用未映射的类：br.com.fisgo.Provider
> 
> 由 MappingException 引起：关联引用未映射的类：br.com.fisgo.Provider

关于我为什么会收到此错误的任何想法？

问候。

我会尝试一下。它不会那么简单，因为公司域链接回提供者它只需要更多的努力

```
class Company {
    String name
    String cnpj
    String email
    Address address
    Phone phone
    String registration
    String source

    Set provider = new HashSet<Provider>()

    static hasMany = [provider: Provider] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-07T22:47:27.413

您应该使用较新的文档，例如[http://grails.org/doc/latest/guide/conf.html#dataSourcesAndEnvironments](http://grails.org/doc/latest/guide/conf.html#dataSourcesAndEnvironments)

看起来您正在尝试跨数据源链接。这是不可能的，因为每个`DataSource`都有一个单独的`SessionFactory`，并且它们不能直接一起工作。当您使用 Hibernate 和 NoSQL GORM 插件时，也会发生同样的问题。

你可以很容易地模仿它。给定一个需要引用的域类 Foo `Provider`，您可以保留外键并按需查找它（当您加入两个域类之间时，这实际上是 Hibernate 为您所做的）：

```
class Foo {
   Long providerId

   Provider getProvider() {
      providerId ? Provider.get(providerId) : null
   }
   void setProvider(Provider provider) {
      providerId = provider.id
   }
   static transients = ['provider']
} 
```

由于 Groovy 将 getter/setter 对视为一个属性，因此您可以像使用“真实”链接一样使用它：

```
def foo = ...
def bar = foo.provider.bar 
```

# ruby - Ruby 块、过程和局部变量

> ID：15282881
> 
> 赞同：7
> 
> 时间：2013-03-07T22:18:46.910
> 
> 标签：ruby

在 Ruby 中，procs 似乎可以访问在声明它们时存在的局部变量，即使它们在不同的范围内执行：

```
module Scope1
    def self.scope1_method
        puts "In scope1_method"
    end
end

module Scope2
    def self.get_proc
        x = 42
        Proc.new do
            puts x
            puts self
            scope1_method
        end
    end
end

Scope1.instance_eval(&Scope2.get_proc) 
```

输出：

```
42
Scope1
In scope1_method 
```

这是如何以及为什么会发生的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T22:37:10.490

该调用为其给出的块`Proc.new`创建一个[闭包。](http://en.wikipedia.org/wiki/Closure_(computer_science))在为块创建闭包时，块被绑定到`Proc.new`调用范围内的原始变量。

### 为什么这样做？

它允许 Ruby 块充当闭包。闭包非常有用，维基百科条目（上面链接）很好地解释了它们的一些应用程序。

### 这是怎么做到的？

这是在 Ruby VM（在 C 代码中）通过复制进入`Proc.new`方法之前存在的 Ruby 控制框架来完成的。然后该块在该控制帧的上下文中运行。这有效地复制了该帧中存在的所有绑定。在 Ruby 1.8 中，您可以`proc_alloc`在`eval.c`. 在 Ruby 1.9 中，您可以`proc_new`在`proc.c`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:33:41.983

此行为是设计使然。在 Ruby 中，blocks、procs 和 lambdas 是词法[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)。阅读[这篇博](http://www.elonflegenheimer.com/2012/07/08/understanding-ruby-closures.html)文，简要解释 Ruby 的三种闭包风格之间的差异。

# ruby-on-rails - Rails 3 中的局部动态渲染

> ID：15282882
> 
> 赞同：2
> 
> 时间：2013-03-07T22:18:55.243
> 
> 标签：ruby-on-rails, dynamic, rendering, render, partial-views

在我正在开发的应用程序中，我`task_types`在模型中定义了一个方法：

```
task.rb
  def self.task_types
["ad_hoc"]
  end 
```

我`task_types`用来填充下拉菜单，但我也想用它来动态渲染部分。

我想到的是，对于每种任务类型，都会有一个相关的评论框。我继续做了一个助手，它将根据选择的任务类型调用正确的部分：

```
#tasks_helper.rb
module TasksHelper

  def completion_comment(task)
    task_types = @task.task_type
    render :partial => "#{Task.task_types}", :locals => {:task => task}
  end
end 
```

不幸的是，当我调用completion_comment 时，我收到了错误消息`"The partial name (["ad_hoc"]) is not a valid Ruby identifier."`

我正在寻找的是一种动态的方式来呈现适当的部分。我认为我在正确的轨道上，但我不确定如何从我的`task_types`方法中提取数组元素（正如您在错误消息中看到的那样，括号和引号被拉入渲染操作）。或者，也许我需要使用不同的方法来动态渲染部分。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T20:02:46.573

这是有效的：

```
module TasksHelper

  def render_task_form(task)
    render :partial => "/tasks/completed/#{task.task_type.downcase}"
  end
end 
```

我很早之前就尝试过这个解决方案，并且收到一个错误消息“部分名称 (/tasks/completed/) 不是有效的 Ruby 标识符；请确保您的部分名称以字母或下划线开头，并且后跟任何组合由字母、数字或下划线组成。”

我又试了一次，为了解决这个问题，我从数据库中删除了所有任务。现在部分动态呈现。希望这对其他人有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:30:56.693

您需要一个字符串而不是整个`task_types`数组。`@task.task_type`应该返回一个键 a) 匹配任务类型数组中的一个元素并且 b) 匹配一个已知的部分。

以下是需要的有点复杂，但应该可以解决问题：

```
tasks_helper.rb
module TasksHelper

  def completion_comment(task)
    if Task.task_types.include? task.task_type
      render  :partial => task.task_type,
              :locals => {
                :task => task
              }
    else
      # render a generic comment box here
    end
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-22T08:14:45.950

在 Rails 4 中，视图或部分名称应该响应有效的 Ruby 标识符。因此，整个视图名称必须遵循与 ruby​​-identifier 相同的格式：

*   它应该以 _ 或字符开头
*   它不能以数字开头
*   它只能有 _ 和字母数字。

因此，考虑到 task_type 是一个有效的 ruby​​ 标识符（它应该是），它会起作用。在生成此代码在 Rails 4 中不起作用

```
render '/tasks/completed/some-task' 
```

但这会起作用

```
render '/tasks/completed/some_task'  # note the underscore. 
```

# android - onResume 方法不适用于 Twitter 实现

> ID：15282883
> 
> 赞同：4
> 
> 时间：2013-03-07T22:18:56.287
> 
> 标签：android, twitter

试图将 Twitter 与我的应用程序集成。按照教程进行操作，但它不起作用。

我有一个`PreferenceActivity`有一个`CheckBoxPreference`。如果单击，我将执行以下操作：

```
chkTwitter.setOnPreferenceClickListener(new OnPreferenceClickListener() {           
    @Override
    public boolean onPreferenceClick(Preference _pref) {
        Intent fbIntent = new Intent(getApplicationContext(), TwitterConnectActivity.class);
        _pref.setIntent(fbIntent);
        return false;
    }
}); 
```

我的 TwitterConnectActivity 被调用，我在那里配置 Oauth 对象并调用 Twitter 的身份验证网站。

当我点击 Authorize App 时，我`onResume`的被调用：

```
@Override
    protected void onResume() {
        super.onResume();
        if (this.getIntent()!=null && this.getIntent().getData()!=null){
            Uri uri = this.getIntent().getData();

            if (uri != null && uri.toString().startsWith(CALLBACK_URL)) {
                String verifier = uri.getQueryParameter(oauth.signpost.OAuth.OAUTH_VERIFIER); 
```

问题是它`this.getIntent().getData()`是空的，所以我从不进入 if 条件。

我的 AndroidManifest 看起来像这样：

```
 <activity
            android:name=".SettingsActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="my_twitter" android:scheme="callback" />
            </intent-filter>
        </activity>
        <activity
            android:name=".TwitterConnectActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity> 
```

当然，我定义了我的回调 URL，例如：`private String CALLBACK_URL = "callback://my_twitter";`

任何人都可以帮助我吗？

干杯，费利佩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T13:07:22.307

改用 StartActivityForResult。

# scala - reduceLeft 可以并行执行吗？

> ID：15282884
> 
> 赞同：8
> 
> 时间：2013-03-07T22:19:11.127
> 
> 标签：scala

我刚开始学习 Scala，所以请耐心等待 :-)

我对 reduceLeft 的行为方式有疑问。这里有一个例子：

```
List(1, 2, 3, 4, 5) reduceLeft (_ + _) 
```

我想知道是否可以同时进行计算，例如：

第一回合：

*   过程 1 计算：1 + 2
*   过程 2 计算：4 + 5

第二轮：

*   过程 1 计算：3 + 3

第三轮：

*   过程 1 计算：6 + 9

如果我只使用reduce 函数而不是reduceLeft，至少这是我所期望的。或者 reduceLeft 真的一次只做一次减少吗？

```
((((1 + 2) + 3) + 4) + 5) 
```

这基本上意味着它不能并行执行，如果可能的话，应该总是更喜欢reduce而不是reduceLeft/Right？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-07T22:53:49.323

答案是肯定的，而且非常简单：

```
List(1, 2, 3, 4, 5).par.reduce (_ + _) 
```

该`par`方法将列表转换为并行集合。当您调用`reduce`此并行集合时，它将并行执行。

请参阅[并行收集文档](http://docs.scala-lang.org/overviews/parallel-collections/overview.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T22:56:16.893

正如您所注意到的，`reduceLeft`它是不可并行化的，因为它明确地假定了一种非关联的形式：`(B,A) => B`.

只要使用关联运算符，`reduce`就可以并行化。

还有一个 call 的类似物，`foldLeft`它`aggregate`有两个功能：一个映射成可组合的形式，两个是关联的，用于合并元素： `(B,A)=>B, (B,B) => B`.

这个，只要两个函数在输出上达成一致，并且你可以在任何你想要的地方混合一个零，就可以并行化。

所以如果你想能够并行，

```
reduceLeft/Right ->  reduce
foldLeft/Right   ->  aggregate 
```

在某些情况下，可能会`reduce`比限制性更强`reduceLeft`，但`aggregate`会起作用。

也就是说，这只会使语句*能够*并行。要使其*真正*并行，您需要使用继承自的集合，这些集合的名称中`ParIterable`都有:等。获得并行集合的最简单方法是调用常规集合（反之亦然，从平行与非平行）。这样做是因为通常除了速度之外没有理由并行，但是并行增加了开销。所以你应该只在有足够的工作要做的情况下并行操作，虽然你可能知道，但编译器可能不知道。因此，您要明确选择您想要的集合类型。（并行集合返回并行，顺序返回顺序。）`Par``ParVector``.par``.seq`

# javascript - Javascript：检测用户是否点击了指向外部站点的链接

> ID：15282893
> 
> 赞同：1
> 
> 时间：2013-03-07T22:19:52.073
> 
> 标签：javascript, href

我正在尝试找到一个创造性的解决方案。我知道那里有很多脚本，其中很多来自 stackoverflow 本身，它们可以通过 body onload 对网页进行“扫描”——但这并不是我想要的。

我正在寻找一个可以包含在页面标题中的脚本（通过包含，因此它包含在所有页面中），它检测用户单击的 href 是外部的还是本地的，如果它是本地的，它将显示一个消息。

我已经有一个解决方案，它要求我在每个 href 上包含一个 onClick 处理程序。问题是这个特定的站点实际上有数百个href。我正在寻找一个非常干净的解决方案，可以节省我的时间。

我有一些我正在玩的脚本，我只是想知道是否有人熟悉这种可以轻松做到这一点的方式。

我更喜欢 Javascript 而不是 Jquery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:34:14.580

您应该依靠使用委托的冒泡机制，而不是附加单个事件处理程序

```
var body = document.getElementsByTagName('body')[0];

body.addEventListener('click', function(e){ 
    if(e.target.nodeName === "A"){
        var href = e.target.getAttribute('href'),
            selfhost = window.location.hostname;
        if(href.indexOf(selfhost) !== -1){
            // display message here
        }
    }
}, false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T22:27:53.203

使用`$.on()` [http://api.jquery.com/on/](http://api.jquery.com/on/)并将其绑定到您的文档。因此，您只需附加 1 个处理程序即可处理所有数千个链接。例如。

```
var onClickLink = function(e) {
    // handle event here
};
$(document).on('click', 'a', onClickLink); 
```

# php - 将 % 替换为 - 在 url PHP

> ID：15282900
> 
> 赞同：0
> 
> 时间：2013-03-07T22:20:14.180
> 
> 标签：php, url, url-rewriting, htmlspecialchars, magic-quotes-gpc

好的，我有一个可能很愚蠢的问题在我的网站上，我有搜索选项，即使用 GET 方法输入，但是当有人输入长分隔词时

我有时是空白的

我的网址里有这个

[http://www.example.com/search.php?page=1&txtPretraga=I%AM%SOMETIMES%BLANK](http://www.example.com/search.php?page=1&txtPretraga=I%AM%SOMETIMES%BLANK)

我不知道如何改变它？我想要这样的干净 URL [http://www.example.com/search.php?page=1&txtPretraga=I-AM-SOMETIMES-BLANK](http://www.example.com/search.php?page=1&txtPretraga=I-AM-SOMETIMES-BLANK)

我想在我的 ULR 中用 - 更改 %

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:21:59.543

您可以在您的 php 代码中使用 str_replace：http: [//php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

```
$search_qry = "Whatever%They%Type";
$replace = str_replace($search_qry, "%", "-"); 
```

编辑：在你的字符串的情况下 - 它们有空格，在 URL 中显示为 %，所以在你做你的 $_GET 之前使用它

```
$search_qry = "Whatever They Type";
$replace = str_replace($search_qry, " ", "-"); 
```

编辑 2 因为这是一个 $_GET - 必须在发送之前使用 Javascript 来清理字符串。（在这里使用 jQuery 和 javascript）

```
<script type = "text/javascript">
    $(document).ready(function(){
        $('.example-input').blur(function(){
            var str = $(this).val();
            var clean_str = str.replace(" ", "-");
            $(this).val(clean_str);
        });
    });
</script> 
```

这应该在通过 get 发送之前清除输入框中的字符串。或者代替 .blur，您可以使用 $('submit-button').click(function(){...

或者，您可以使用 .htaccess 文件进行 mod 重写。但我还不够了解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:23:52.557

好的，我解决了这个问题:)

这不是 PHP 的问题，它是 Javascript 的问题，我写了这个函数

```
<script type="text/javascript">
function provera() {
var x=document.forms["hsearch"]["txtPretraga"].value;
var n=str.replace(" ","-");
}
</script> 
```

# c# - 使用 linq 和实体框架按日期排序

> ID：15282901
> 
> 赞同：1
> 
> 时间：2013-03-07T22:20:16.040
> 
> 标签：c#, linq, datetime, entity, sql-order-by

我有这个代码：

```
List<jogo> lista_realizados = tt.jogo.Where(c => c.activo == 1 && 
                                                 c.progresso == 2 && 
                                                 c.id_torneio == torn.id_torneio)
                                     .ToList();
var q1 = lista_realizados.Select(c => new { resultado = c.resultado, 
                                            id = c.id_jogo,
                                            torneio = c.torneios.nome, 
                                            Data = c.data, 
                                            Hora = c.hora, 
                                            jogador = c.jogador.Nome_jogador, 
                                            jogador2 = c.jogador2.Nome_jogador, 
                                            Clube = c.clubeparceiro.nome, 
                                            agendadopor = c.alterado_por}) 
                          .OrderByDescending(p =>  p.Data.Value.Month )
                          .ToList();

gvListaJogos.DataSource = q1;

gvListaJogos.DataBind(); 
```

我得到列表，然后我尝试按字段排序列表`Data`——它`Date`在 sql 中定义为 a。并且在代码中显示为`?Datetime`.

但似乎该列表是按字符串而不是按日期排序的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:49:08.720

我猜gvListaJogos 是一个ListBox。

确保 ListBox 的 Sorted 属性设置为 false。

# wso2 - WSO2 Greg 和 ESB 集成示例

> ID：15282903
> 
> 赞同：4
> 
> 时间：2013-03-07T22:20:21.317
> 
> 标签：wso2, wso2esb

我正在尝试使用 Greg 来保存部署到非 WSO2 容器（Weblogic/JBoss）中的服务的端点 URL。我想使用 WSO2 ESB 通过这些端点执行数据的中介和路由。

但是，当我查看 WSO2 ESB 示例时，不清楚我如何指示 ESB 使用 WSO2 的 Greg。下面是用于让 ESB 使用部署到文件系统的注册表的 xml。

```
<definitions xmlns="http://ws.apache.org/ns/synapse">    
    <registry provider="org.wso2.carbon.mediation.registry.ESBRegistry">
        <parameter name="root">file:./repository/samples/resources/</parameter>        
        <parameter name="cachableDuration">15000</parameter>    
    </registry>
 </definitions> 
```

我的假设是注册表标签的 provider 元素应该能够被提供对 Greg 访问的 Web 服务地址覆盖。

一切都说完了，我想创建连接到 Greg 的简单 BPMN 配置文件，获取文件使用的服务的 URI 和 URL，然后稍后在 BPMN 路由中将它们作为属性引用。

第一个问题，这是标准配置，还是有更好的方法来集成 WSO ESB 和 Greg。

第二个问题，有没有我可以参考的例子来回答这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T20:21:31.220

请参考以下文档。

[1] [http://wso2.org/library/tutorials/2010/04/sharing-registry-space-across-multiple-product-instances](http://wso2.org/library/tutorials/2010/04/sharing-registry-space-across-multiple-product-instances)

[2] [http://docs.wso2.org/wiki/display/ESB460/Storing+Various+WSO2+Enterprise+Service+Bus+Configurations](http://docs.wso2.org/wiki/display/ESB460/Storing+Various+WSO2+Enterprise+Service+Bus+Configurations)

其中包括如何在高级别的地方存储和使用 WSO2 治理注册表。

如果您需要通过治理注册表中的 API 管理端点，以下将有所帮助。

[3] [http://docs.wso2.org/wiki/display/Governance453/Endpoints+with+Governance+API](http://docs.wso2.org/wiki/display/Governance453/Endpoints+with+Governance+API)

[4] [http://docs.wso2.org/wiki/display/Governance453/Endpoint+Look-up+Sample](http://docs.wso2.org/wiki/display/Governance453/Endpoint+Look-up+Sample)

此外，该线程还包括一些提示，您可以如何访问注册表中的自定义存储属性

[5][如何从 WSO2 ESB 和 Registry 访问系统属性](https://stackoverflow.com/questions/15210972/how-to-access-system-property-from-wso2-esb-and-registry)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T20:13:24.653

WSO2 Governance Registry 是一个元数据存储库，因此您可以使用它来存储部署的 SOA 工件（WSDL、Schems、策略、中介配置、自定义工件等）。之后，您可以通过治理注册表来治理这些工件。您可以在 ESB 文档[1] 中找到更多详细信息。

[1] [http://docs.wso2.org/wiki/display/ESB460/Config+and+Governance+Partitions+in+a+Remote+Registry](http://docs.wso2.org/wiki/display/ESB460/Config+and+Governance+Partitions+in+a+Remote+Registry)

感谢和问候，

阿吉特

# iphone - 带有某些关键字的 Safari 浏览器中的 Web 视图打开链接

> ID：15282909
> 
> 赞同：0
> 
> 时间：2013-03-07T22:20:35.740
> 
> 标签：iphone, ios, objective-c, xcode, hyperlink

我正在尝试在我的 web 视图中打开某些链接，这些链接将在 safari 中显示。这是我到目前为止的代码。

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
if ( inType == UIWebViewNavigationTypeLinkClicked ) {
    [[UIApplication sharedApplication] openURL:[inRequest URL]];
    return NO;
}
return YES;
} 
```

问题是如果链接包含关键字“google”，我只想打开 safari。关于做什么的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:22:14.310

你可以这样检查，它会达到目的

```
-(BOOL) webView:(UIWebView *)inWeb shouldStartLoadWithRequest:(NSURLRequest *)inRequest navigationType:(UIWebViewNavigationType)inType {
   if ( inType == UIWebViewNavigationTypeLinkClicked ) {
      if ([[inRequest.URL absoluteString] rangeOfString:@"google" options:NSCaseInsensitiveSearch].location!=NSNotFound){
         [[UIApplication sharedApplication] openURL:[inRequest URL]];
         return NO;
       }
    }
 return YES;
} 
```

# java - 如何使用 javax swing timer 的整数数组来交替速度

> ID：15282911
> 
> 赞同：0
> 
> 时间：2013-03-07T22:20:53.247
> 
> 标签：java, random, timer

我正在尝试使用具有随机生成的 x 坐标的固定线长度来模拟降雨。我已经让随机 x 坐标正常工作，但我希望线条在重新绘制到窗口上后也具有不同的下降速度。我正在使用 javax swing 计时器和 java Random 生成整数以作为索引传递到我的“速度”数组中。然而速度并没有改变。它保持不变并且太快了。

```
public class rain extends JPanel implements ActionListener {
int i = 0;
int[] speed = {5, 10, 15, 20, 25, 30, 35, 40, 45, 50};
double[] x = {10, 202, 330, 140, 250, 160, 470, 180, 290, 510};
double y1 = 10, y2 = 20;
double down = 1;
Random random = new Random();
//Timer t = new Timer(speed[i], this);

public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D l = (Graphics2D) g;
        Line2D line = new Line2D.Double(x[i], y1, x[i], y2);
        l.setColor(Color.blue);
        l.draw(line);
        Timer t = new Timer(speed[i], this);
        t.start();
}

public void actionPerformed(ActionEvent e) {        
        if (y2 < 380) {
            y1 += down; 
            y2 += down;
        }else{
            y1 = 10;
            y2 = 20;
            i = random.nextInt(10);

        }
    repaint();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:30:34.463

每次重新绘制面板时，您都会启动一个新的 Timer，并且所有以前的 Timer 仍在运行。您应该更改算法以使用唯一计时器，并根据前一个和当前速度计算新的 y。

例如，时间将每 40 毫秒重绘一次。如果速度为 N，则新的 y 将是前一个 +`(N * down)`

# javascript - 将 jScrollPane 设置为向左和向右自动滚动，但在单击时暂停？

> ID：15282918
> 
> 赞同：0
> 
> 时间：2013-03-07T22:21:24.287
> 
> 标签：javascript, jquery, jquery-jscrollpane

小提琴：http: [//jsfiddle.net/RJShm/](http://jsfiddle.net/RJShm/)

我有一个 jScrollPane，它当前从左到右滚动，然后向左滚动，然后停止。我想要的是不断地从左到右，从右到左滚动，然后重复。通过使用，我的工作非常接近`pane.bind('jsp-scroll-x'...`，但我似乎无法让它在一个周期后向右滚动。当前代码：

```
pane.bind('jsp-scroll-x', function (event, pos_x, at_left, at_right) {
  if (at_right)
  {
    api.scrollToX(0);
    $(this).unbind(event);
  }
}); 
```

我还希望它在单击窗格中的任何内容（滚动条、箭头、内容、任何内容）时停止自动滚动，并且最好在几秒钟无点击后重新启动。

所以，简而言之，我该如何：

1.  使 jScrollPane 自动向左/向右滚动
2.  单击时停止自动滚动
3.  在窗格内没有单击几秒钟后重新启动自动滚动

谢谢

**编辑**：[jScrollPane 设置](http://jscrollpane.kelvinluck.com/settings.html)和[api](http://jscrollpane.kelvinluck.com/api.html)为您提供方便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T20:01:36.530

我已经更新了用于切换无限滚动的处理程序，还实现了单击处理程序来暂停滚动并在超时（5 秒）后恢复。请参阅下面的代码草案并查看**演示：http:** [//jsfiddle.net/p6jLt/](http://jsfiddle.net/p6jLt/)

```
var defaultSettings = {
    showArrows: true,
    animateScroll: true,
    animateDuration: 5000
},
pauseSettings = {
    showArrows: true,
    animateScroll: false
};

var pane = $('.scroll-pane').jScrollPane(defaultSettings);

var api = pane.data('jsp');
var isFirst = true,
    posX = 0,
    isLeft = false,
    timer;

pane.bind('jsp-scroll-x', scrollFx)
    .mousedown(function () {

    //lets make sure the below is
    //executed only once after automatic croll
    if (posX != -1) {
        $(this).unbind('jsp-scroll-x');
        api.scrollToX(posX);
        api.reinitialise(pauseSettings); //no animation
        posX = -1;
    }
}).mouseup(function () {
    clearTimeout(timer); //clear any previous timer
    timer = setTimeout(function () {
        isFirst = true;
        posX = 0; //reset the killer switch
        api.reinitialise(defaultSettings); //animateed scroll
        pane.bind('jsp-scroll-x', scrollFx); //rebind
        api.scrollToX(isLeft ? 0 : api.getContentWidth()); //resume scroll
    }, 5000);
});

var scroll = api.scrollToX(api.getContentWidth());

function scrollFx(event, pos_x, at_left, at_right) {
    if (posX == -1) { //kill scroll
        $(this).unbind(event);
        return false;
    }

    if (at_right) {
        api.scrollToX(0);
        isLeft = true; //used for restart
    } else if (at_left && !isFirst) {
        api.scrollToX(api.getContentWidth());
        isLeft = false; //used for restart
    }
    isFirst = false;
    posX = pos_x;
} 
```

**问题：**插件有时会出现滚动问题，但不会破坏无限滚动。您可能会在滚动条上找到一些小问题，但它在大多数情况下都有效。彻底测试它，看看它是如何进行的。

# python - 当脚本从命令行运行时，pygame.mixer 声音不播放

> ID：15282925
> 
> 赞同：2
> 
> 时间：2013-03-07T22:21:59.607
> 
> 标签：python, audio, raspberry-pi

我正在研究一个 Raspberry Pi 项目，我有一个 python 脚本，它接受一些串行输入并根据输入播放声音。我已经设置了脚本，当我从 GUI（即 startx）中运行它时它工作得很好。如果我退出 GUI 并尝试从命令行运行脚本，脚本执行得很好，但我的声音不播放。我只是得到一个瞬间的静态点击。我可以告诉脚本正在运行，因为我让它打印调试代码并且打印工作正常。有没有办法让声音从命令行工作？

我希望在没有用户输入的情况下打开 Raspberry Pi 时执行此脚本，我相信这意味着它将从命令行运行。如果出于某种原因，在 GUI 启动之前声音根本不会播放，我将如何设置它以加载 GUI，然后在启动时执行脚本而无需任何用户输入？

这将嵌入道具中，并在按下某些按钮（通过 arduino 即串行输入连接）时播放声音。所以我需要一个解决方案，让它在开机后自动运行脚本，并且能够在没有连接键盘、鼠标或显示器的情况下播放声音。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T02:23:27.853

原来是文件路径命名。如果我对根目录进行命令行测试，它不起作用，但如果我“cd Desktop/containingFolder”，那么声音就会播放。我将尝试如何在 python 脚本中设置文件，以便它可以工作。

更新路径名解决了这个问题。我只需要它们是完整路径而不是相对路径。

# jquery - Jquery：单击锚链接时如何使内容显示在导航栏下方？

> ID：15282929
> 
> 赞同：1
> 
> 时间：2013-03-07T22:22:15.583
> 
> 标签：jquery, css, xhtml

我在顶部有一个固定导航，当我单击锚链接将我带到页面中的某个部分时，我希望它显示在可见空间中。

当用户单击导航链接以转到页面中的特定部分时，如何使内容显示在导航下方（而不是后面）？

我愿意将 jquery 与 css 一起使用

可以在 jsfiddle 中查看演示

[演示](http://jsfiddle.net/dev1212/8yMN7/18/)

代码

```
<div id="wrapper">

    <div id="branding">
    <h1>Branding</h1>
    <ul id="mainNav"> 
    <li class="first"><a href="#">Home</a></li> 
    <li><a href="#link1">link1</a></li> 
    <li><a href="#link2">link2</a></li> 
    <li><a href="#link3">link3</a></li> 

    </ul> 

    </div> 

    <div id="content"> 

        <div id="form-b">

        <form id="comments_form" action="#" method="post">

    <fieldset>
      <legend>Your Contact Details  Link1 <a name="link1"></a> </legend>

      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>

    <fieldset>
      <legend>Your Contact Details  Link 2<a name="link2"></a> </legend>
      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>
    <fieldset>
      <legend>Your Contact Details  Link 3<a name="link3"></a></legend>
      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>

    <fieldset>
      <legend>Your Contact Details  </legend>
      <p>
      <label for="author">Name: <span class="required">(Required)</span></label>
      <input name="author" id="author" type="text" />
      </p>

      <p>
      <label for="email">Email Address: <span class="feedback">Incorrect email address. Please try again.</span></label>
      <input name="email" id="email" type="text" />
      </p>

      <p>
      <label for="url">Web Address:</label>
      <input name="url" id="url" type="text" />
      </p>
    </fieldset>

    <fieldset id="submit-b">
      <legend>  </legend>
    <div class="wrap">  
      <p>
    <input id="submit" class="submit" name="submit" type="submit"/>
    </p>
    </div>
    </fieldset>

    </form>

        </div>

    </div> 

    <div id="footer">
    <p>Footer</p>
    </div>

    </div> 
```

CSS

```
<!--

/* Pretty Stuff
================================== */

/* Zero down margin and paddin on all elements */
* {
  margin: 0;
  padding: 0;
}

body {
  font: 92.5%/1.6 "Lucida Grande", "Lucida Sans", "Lucida Sans Unicode", Verdana, sans-serif;

}

h1 {
  font-size: 2.4em;
  font-weight: normal;
}

h2 {
  font-size: 2.0em;
  font-weight: normal;
}

p, li {
  font-size: 1.4em;
}

h1, h2, p {
  margin: 1em 0;
}

#branding h1 {
  margin: 0;
}

#wrapper {
  background-color: #fff;
}

#branding {
   width:100%;  
}
#branding {

  background-color:#b0b0b0;
  padding: 20px 20px 20px 0 ;

  /** for fixed postion **/
          position:fixed;
         z-index:99998;
             /*Making sure it sticks to left of window in IE7*/
              left:0;
             /*Change to reflect height of your header.
             Remember to accomadate for padding!*/
             height:100px;
}

#form-b {
 /* height: 500px;
    overflow: auto;
    position: fixed;
    top: 164px;
    width: 98%;
*/
  margin-top:150px;
}
#mainNav {
  list-style: none;
  background-color:#eee;
}

#footer {
  background-color:#b0b0b0;
  padding: 1px 20px;
}

/* The Core Technique
================================= */

body {
  text-align: center; 
  min-width: 1260px;
}

#wrapper {
  width: 100%; 
  margin: 0 auto; 
  text-align: left; 
}

#content { 
  width: 100%;
  float: right; 
}

#mainNav li{ 
/*  width: 180px; 
  float: left;  */
  display:inline;

} 
#submit-b {
   /* border: 0px solid red;
    bottom: 77px;

    position: fixed;
    text-align: cemter;
    width: 100%;
 */
 width:100%;
        float:left;
}
#submit-b {
        position:fixed;
        bottom:0;
        z-index:999999;
    }
.wrap {
        position:relative;
        margin:0 auto;
               /*replace 900px with your width*/
        width:900px;
    }

#footer { 
  clear: both; 
} 

/* Add some padding 
================================== */

#mainNav {
  padding-top: 20px;
  padding-bottom: 20px;
   position: fixed;
    width: 100%;
}

#mainNav * {
  padding-left: 20px;
  padding-right: 20px;
}

#mainNav * * {
  padding-left: 0;
  padding-right: 0;
}

#content * {
  padding-right: 10px;
}

#content * * {
  padding-right: 0;
}

-->

/* fieldset styling */
fieldset {
  margin: 1em 0 0 0; /*  space out the fieldsets a little*/
  padding: 1em;
  border : 1px solid #ccc;
  background-color:#F5F5F5
}

/* legend styling */
legend {
  font-weight: bold;
}

form p {
  position: relative;
  width: 100%;
}

/* style for  labels */
label {
  float: left;
  width: 10em;
}

#remember-me label {
  width: 4em;
}

/* style for required labels */
label .required {
  font-size: 0.83em;
  color:#760000;
}

/* style error messages */
label .feedback {
  position: absolute;
  margin-left: 11em;
  left: 200px;
  right: 0;
  font-weight: bold;
  color:#760000;
  padding-left: 18px;
  background: url(images/error.png) no-repeat left top;
}

/* :KLUDGE: Explicitly set the width for IE6- */
* html .feedback{
  width: 10em;
}

input {
  width: 200px;
}

input[type="text"], textarea {
  border-top: 2px solid #999;
  border-left: 2px solid #999;
  border-bottom: 1px solid #ccc;
  border-right: 1px solid #ccc;
}

input.radio, input.checkbox, input.submit {
  width: auto;
}

/* style form elements on focus */
input:focus, textarea:focus {
  background: #ffc;
}

input.radio {
  float: left;
  margin-right: 1em;
}

textarea {
  width: 300px;
  height: 100px;
}

/* Date of Birth form styling */

#monthOfBirthLabel, #yearOfBirthLabel {
  text-indent: -1000em;
  width: 0;
}

#dateOfBirth {
  width: 3em;
  margin-right: 0.5em;
}

#monthOfBirth {
  width: 10em;
  margin-right: 0.5em;
}

#yearOfBirth {
  width: 5em;
}

/* Color form styling */
#favoriteColor {
  margin: 0;
  padding: 0;
  border: none;
  background: transparent;
}

#favoriteColor h2 {
  width: 10em;
  float: left;
  font-size: 1em;
  font-weight: normal;
}

#favoriteColor div {
  width: 8em;
  float: left;
}

#favoriteColor label {
  /*width: 3em;*/
  float: none;
  display: inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T23:49:30.320

您将无法使用现有的设置来执行此操作。固定元素将充当所有现代浏览器视口上的屏幕。

在我看来，您有两个选择：

1）像这样连接一些jQuery：

```
`$('div#branding ul li a').click (function (e) {
    e.preventDefault();
    var location = $($(this).attr('href')).offsetParent();
    $('div.content').scrollTop(location.top);
});` 
```

如果你打算走这条路，我强烈建议将 id 添加到与名称相同的锚补充中。如果这不可能，您需要将该代码块中的选择器更改为

`$('s[name=' + $(this).attr('href').substr(1) + ']')`

2) 将您的固定标题更改为绝对标题，将 div.content 绝对定位在其正下方，并将 doc.content 上的溢出-y 设置为“自动”

**编辑**

[这是一个工作示例](http://jsfiddle.net/8yMN7/50/)

这是我添加的javascript。这依赖于您向那些匹配其当前`name`属性的链接添加一个 ID：

```
$('ul#mainNav li a').click(function (e) {
    e.preventDefault();
    if($(this).attr('href') !== '#'){
        var location = $($(this).attr('href')).offset().top - 150; /* For your header height, subtract 150 or whatever it ends up being */
        $('html, body').animate({scrollTop: location}, 600);
    } else {
        $('html, body').animate({scrollTop: 0}, 600);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T23:51:06.997

您的问题是指向锚点的链接会自动滚动页面，直到该锚点位于窗口顶部。出于这个原因，将粘性导航与基于锚的链接结合起来并不是一个好主意，但您可以通过移动 HTML 中的锚并调整一些 CSS 来使其工作。因此，例如，如果您将 link2 的锚点放在第一个字段集中的某个位置，您可以让它正确排列，但这不是一个干净的做法。

# jquery-ui - 如果 jQuery 工具提示位于 iframe 内的链接上（在 FF 和 IE 中），它会保持打开状态

> ID：15282934
> 
> 赞同：1
> 
> 时间：2013-03-07T22:22:38.187
> 
> 标签：jquery-ui, iframe, fancybox-2, jquery-ui-tooltip

我正在用帮助图标替换标准的“重置密码”文本链接，但我发现当 jQuery 工具提示位于 iframe 内的链接上时，一旦单击链接，它就会保持打开状态，直到刷新父页面。

我正在使用内联框架，但在链接到另一个页面时我也遇到了同样的问题。我尝试在标签内移动标题`<span>`，以及关闭 iframe 并使用以下功能打开一个新的，但工具提示只是在页面上保持打开状态。

**更新**- 我创建了一个小提琴来演示问题[http://jsfiddle.net/chayacooper/7k77j/2/](http://jsfiddle.net/chayacooper/7k77j/2/) *（单击“重置链接”）*。我在 Firefox 和 IE 中都遇到了这个问题（在 Chrome 和 Safari 中很好）。

*HTML*

```
<a href="#inline_form" class="fancybox_inline" title="Forgot Your Password?"><img src="help.jpg"></a> 
```

*关闭 iframe 和打开新 iframe 的函数*

```
function close_iframe() {
    parent.jQuery.fancybox.close();
     }

function open_iframe() {
    $.fancybox.open([{href:'reset_password.html'}], { type:'iframe'           
         });
     } 
```

我正在使用 jquery-1.8.2、jquery-ui-1.9.1 和 fancyapps2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T14:11:58.327

可能是 fancybox 和 jQueryUI 工具提示之间的不兼容或错误。

本质上，fancybox 显示的是第二种形式，但浏览器没有看到该[`mouseout`](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/mouseout)事件。[`.close()`](http://api.jqueryui.com/tooltip/#event-close)您可以通过向jQueryUI 工具提示的事件添加回调函数来检查这一点。

```
$('a[href="#inline_form1"]').tooltip({
    close: function( event, ui ) {
      console.log('closing')
    }
}) 
```

`closing`当鼠标移出“重置链接”锚点时，您应该能够在 IE、Firefox 和 Chrome 的控制台中看到。但是，在 Chrome 中单击“重置链接”时，您`closing`会再次看到日志行，但在 IE9 中它不会再次出现。因此浏览器缺少该事件。

`.tooltip('close')`我们可以通过在单击“重置链接”时手动调用来解决此问题，如下所示：

```
$('a[href="#inline_form1"]').on('click', function() {
  $(this).tooltip('close')
}) 
```

创建工具提示的方式存在一个小问题，这意味着仅使用上面的*单击处理程序*就会出错

> 未捕获的错误：无法在初始化之前调用工具提示上的方法；试图调用方法“关闭”

这似乎是由于使用对`$(document).tooltip()`具有标题属性的所有元素使用事件委托的方法引起的。这是为所有元素创建工具提示的最简单方法，因此我理解为什么使用它，但它可以向整个页面添加不必要的事件和处理，而不是针对特定元素。因此，查看错误告诉我们需要在要调用的元素上显式创建工具提示`'close'`。所以需要添加如下初始化

```
$('a[href="#inline_form1"]').tooltip(); 
```

sp 这里是完整的 JavaScript

```
$(function () {
    $(".fancybox").fancybox({
      title: ''
    })

    $(".fancybox").eq(0).trigger('click')

    $(document).tooltip();
    $('a[href="#inline_form1"]').tooltip()

     $('a[href="#inline_form1"]').on('click', function() {
       $(this).tooltip('close')
    })
}) 
```

**注意：**您只需要一个 jQuery [document.ready](http://api.jquery.com/ready/)包装函数 -`$(function (){ ... })`部分 :-)

# .htaccess - .htaccess URL 重写失败 - 在此服务器上找不到请求的 URL

> ID：15282936
> 
> 赞同：3
> 
> 时间：2013-03-07T22:22:39.027
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有一个非常简单的重写规则。我的整个 .htaccess 文件如下：

```
RewriteEngine On
ReWriteRule ^([a-zA-Z0-9\-]+)$ /index.php?page=$1 [L,NC] 
```

这在我的一台运行 Apache 的开发机器上完美运行。但是，它在我的其他运行 Apache 的开发机器上不起作用（mod_rewrite 在 apache2handler 下的 PHP 信息中列出）。它也不适用于我认为运行 Windows 的实时服务器。

我尝试添加以下内容：

```
RewriteBase / 
```

我不是 mod_rewrite 向导，我确信这是一个非常简单的解决方案，但它目前正在躲避我并不断收到 404 not found 错误。

在这不起作用的两个环境中，有一点不同的是，该站点不在 URL 的根目录中。所以例如它是`http://localhost/site`和`www.example.com/site`

我在 .htaccess 文件中尝试了各种语法调整，并将站点添加到基础：

```
RewriteBase /site 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T12:34:00.827

删除“RewriteBase /site”并尝试在 index.php 之前删除 / 使用 .htaccess 时不应出现斜线

```
RewriteEngine On
ReWriteRule ^([a-zA-Z0-9\-]+)$ index.php?page=$1 [L,NC] 
```

# sql - SQL Server 2008 R2 中父/子类型记录的完整路径转储列表

> ID：15282938
> 
> 赞同：2
> 
> 时间：2013-03-07T22:22:45.777
> 
> 标签：sql, sql-server, recursion, sql-server-2008-r2

我需要检索存储在数据库中的组（文件夹）的完整路径列表，如下所示：

```
select * from groups;

group_id    parent_group_id    name
--------    ---------------    -------------------------------
1           NULL               Root
2           1                  Folder1
3           2                  Folder2
4           3                  Folder3 
```

组的可能深度没有限制（几乎可以无限嵌套），所以我事先不知道我可以有多少级别。

我希望能够从查询中获得以下结果并将其加载到一个表中，我可以使用该表在其他查询中将完整路径与 group_ids 连接起来：

```
group_id   path
--------   --------------------------------------------
1          /Root
2          /Root/Folder1
3          /Root/Folder1/Folder2
4          /Root/Folder1/Folder2/Folder3 
```

我一直在查看其他一些具有类似需求的示例，但它似乎从来没有完全符合我的要求，而且没有一个明确的示例，我很难独自完成。

我唯一能想到的是将同一个表的别名连接到最大级别数，这可能很多，这是不切实际的。我需要一种方法以某种方式为每个组以递归方式循环并上树，将路径附加到变量直到最后，然后将最深的子 ID 及其完整路径存储在表中。

**性能也很重要。**这是一个生产数据库，我不能承受减速，这就是为什么我只想在需要时转储它，然后重用静态数据。最终，我想转储数千条记录，每条记录都链接到一个 group_id 并打印它们的完整路径。

如果不免费给我整个东西，有人能指出我正确的方向，也许能给我一个通用的例子来复制吗？

我们使用的是 SQL Server 2008 R2。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T22:31:17.207

听起来像使用递归 CTE 可能能够解决的问题。CTE（或公用表表达式）将允许您创建类似表的结构，而无需创建表或视图。CTE 还允许您创建递归查询，这在您的情况下可以提供极大的帮助。该结构允许您将 CTE 加入到自身中，从而获得您打算在此处实现的“级联”类型的结果。

例如，您可以执行以下操作：

```
WITH grouppaths (group_id, group_path) AS
(
    SELECT group_id, pathname
    FROM GroupPath
    WHERE parent_group_id IS NULL

    UNION ALL

    SELECT gp.group_id, gps.group_path + '/' + gp.pathname
    FROM GroupPath gp
    JOIN grouppaths gps ON gps.group_id = gp.parent_group_id
)

SELECT 
  group_id, group_path
FROM
  grouppaths 
```

您可以使用 SqlFiddle[在此处查看。](http://sqlfiddle.com/#!3/b32a7/9)

Microsoft 在此处提供有关使用 CTE 的信息和示例：http: [//msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms190766%28v=sql.105%29.aspx)

更具体地说，此链接提供有关*递归*CTE 的更多信息：http: [//msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-08T00:21:51.097

根据马特约翰逊发布的链接，我能够这样解决我的挑战：

```
WITH group_paths (group_id, group_path)
AS
(
-- Anchor member definition
    SELECT g.group_id, cast('/'+g.name as varchar(max)) as group_path
    FROM dbo.blgroup AS g
    WHERE parent_group_id=0
    UNION ALL
-- Recursive member definition
    SELECT g.group_id, cast(group_path + '/' + g.name as varchar(max))
    FROM dbo.blgroup AS g
    INNER JOIN group_paths AS gp
        ON g.parent_group_id = gp.group_id
)
-- Statement that executes the CTE
SELECT group_id, group_path
FROM group_paths 
```

结果看起来像这样，这正是我所需要的：

```
group_id    group_path
----------- ----------------------------------------
1000001     /Servers
1000002     /Depot
1000003     /Jobs
1000004     /Component Templates
1000006     /System Packages
1000005     /Components
1000008     /Patch Repository
1000007     /Device
1000010     /Device/Imported
1000011     /Device/Provisioned
1000009     /Patch Repository/Patches By Subscription
2000148     /Components/Customers 
```

# javascript - 输入空格时如何触发 ng-change？

> ID：15282942
> 
> 赞同：27
> 
> 时间：2013-03-07T22:22:51.263
> 
> 标签：javascript, angularjs

我有一个在 textarea 的值更改时调用的函数。它工作得很好，除非按下空格键，然后什么都不被调用。有没有办法激活这个？从技术上讲，内容正在发生变化，我希望无论如何都可以调用该函数。

我附上了代码的小提琴。您可以看到`$scope.log`按下空格键时数组不会推送新元素（输入键也是如此），但它与任何其他非空格键一起使用。

小提琴样本：http: [//jsfiddle.net/UJWLN/4/](http://jsfiddle.net/UJWLN/4/)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-03-08T00:09:45.547

您可以在输入中使用指令 ng-trim 并将其设置为 false，如下所示：

```
<textarea ng-change="changeFunction()" ng-model="myModel" ng-trim="false"></textarea> 
```

但这并不适用于所有情况。如果您希望在每次击键时执行某些操作，请尝试使用自定义指令。我给你写了一篇：

[http://jsfiddle.net/UJWLN/6/](http://jsfiddle.net/UJWLN/6/)

```
myApp.directive('ngKeystroke', function(){
    return {
        restrict: 'A',
        link: function(scope, elem, attrs){
            elem.bind("keyup", function(){
                scope.log.push('called');
                scope.$digest(); 
            });
        }
    };
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-10T08:16:51.607

为了在空格键上触发`ng-change`事件，我使用了`ng-trim`. 它工作正常。

```
<textarea ng-model="myCtrl.content" name="content" ng-trim="false" rows="5" cols="15" maxlength="250"></textarea> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-08T02:10:20.687

最好试试这个[jsfiddle](http://jsfiddle.net/WVPDx/)

## `html`

```
<div ng-controller="MyCtrl">
    <textarea key-listener="changeFunction()" ng-model="myModel"></textarea>
    <div>{{log}}</div>
</div> 
```

## `javascript`

```
var myApp = angular.module('myApp',[]);

function MyCtrl($scope) {
    $scope.log=[];
    $scope.changeFunction=function(){
        $scope.log.push('Called');
    }
}

myApp.directive('keyListener', function() {
    return function(scope, elm, attrs) {
        elm.bind("keyup", function(event) {
            scope.$apply(attrs.keyListener);
        });
    };
}) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-08T18:57:26.233

如果有人回到这个。

我刚刚在文档中阅读了这个： [https:](https://docs.angularjs.org/api/ng/input/input%5Btext%5D) //docs.angularjs.org/api/ng/input/input%5Btext%5D ngTrim（可选）

布尔值

如果设置为 false Angular 将不会自动修剪输入。**对于 input[type=password] 控件，此参数将被忽略，它永远不会修剪输入。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-04T08:19:46.383

对我来说，以下代码有效：

**HTML：**

```
<input type="text" ng-model="typedEmail" ng-keyup="($event.keyCode == 32) ? validateEmail(typedEmail) : ''"> 
```

**控制器：**

```
$scope.validateEmail = function(emailId){
 //Your Code goes here
}; 
```

*事件代码 32：指空格键事件代码*

**同理**，
*事件代码 13：指 Enter 键事件代码*
*事件代码 16：指 Shift 键事件代码*
*事件代码 17：指 Control 键事件代码*
*事件代码 18：指Alt键事件代码*

只需参考[ng-key](https://docs.angularjs.org/api/ng/directive/ngKeyup)文档，您就可以在那里尝试 keyCode 值（在角度文档的示例中）。

# regex - 正则表达式匹配字母字符作为第一个字符和其余的字母数字

> ID：15282945
> 
> 赞同：1
> 
> 时间：2013-03-07T22:23:05.360
> 
> 标签：regex

我正在尝试编写一个正则表达式来匹配以下内容：

```
must start with a letter
the rest must be alphanumeric 
at least one character in length
max characters 12 
```

我应该能匹配吗

```
a
k2jdj
hello
example72812 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:25:10.433

你可以试试

```
[a-zA-Z][a-zA-Z0-9]{0,11} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:27:58.727

这个？

```
 [a-zA-Z][a-zA-Z0-9]{0,11} 
```

# java - Java xml架构设计

> ID：15282947
> 
> 赞同：0
> 
> 时间：2013-03-07T22:23:12.203
> 
> 标签：java, xml, xsd

我想生成 XSD 的多态 java 类。是否可以开发支持以下 xml 的多态 xml 模式？

这样我就有了面向对象的继承类结构......

以下是可能的情况：

```
<Product>
    <Car>
            <FastCar>
                    <engine> </engine>
            </FastCar>
    </Car>
</Product>

<Product>
    <Car>
            <SlowCar>
                    <engine> </engine>
            </SlowCar>
    </Car>
</Product> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:36:23.620

这可以通过 jaxb 来完成，特别是 xjc 实用程序，它将一个 XSD 文件作为参数，以及您想要的 java 类的一些详细信息（包、路径等）。

[http://jaxb.java.net/2.2.6/](http://jaxb.java.net/2.2.6/)

# jquery - Jquery If 语句检查 div 左侧的边距以将不透明度应用于单独的 id

> ID：15282955
> 
> 赞同：0
> 
> 时间：2013-03-07T22:23:40.297
> 
> 标签：jquery, css, if-statement

我一直在尝试稍微调整一下以使其正常工作，到目前为止，我还无法使用 jquery 来检查 a`div`的左边距并在它处于该`left: 0px`位置的情况下输出任何动作，我的案例将不透明度应用于单独的 div。这是我的[jfiddle](http://jsfiddle.net/K8CMp/3/)。在 jfiddle 中，我想检查灰色 div“trim”，并在它具有的条件下`marginLeft: 0px`，将不透明度应用于 div“l1”。如果我需要更多解释，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:28:56.953

jQuery对象没有`marginLeft`属性，你应该使用`css`方法，还要注意它`=`是一个赋值运算符`true`，你应该使用`==`或`===`比较运算符。

```
$(document).ready(function(){
    if ( $('#trim').css('marginLeft') == '0px' ){
        $('#l1').animate({opacity:".5"});
    } else {
        $('#l1').animate({opacity:"1"});
    }
}); // You are missing `)` here 
```

[http://jsfiddle.net/5djZ4/](http://jsfiddle.net/5djZ4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:29:15.690

[http://jsfiddle.net/K8Cmp/7/](http://jsfiddle.net/K8CMp/7/)

使用[jQuery .css() 方法](http://api.jquery.com/css/)：

```
$(document).ready(function(){
    if($('#trim').css("margin-left") == "0px"){
        $('#l1').animate({opacity:".5"});
    }else{
        $('#l1').animate({opacity:"1"});
    }
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-07T22:29:26.107

好吧，在你正在做的小提琴中

```
$('#trim').marginLeft 
```

这个怎么样：

```
$('#trim').attr('marginLeft') 
```

# eclipse - Eclipse 的 Perforce 插件显示已删除的文件

> ID：15282957
> 
> 赞同：2
> 
> 时间：2013-03-07T22:23:48.363
> 
> 标签：eclipse, perforce

我正在使用 Eclipse 的 Perforce 插件，由于某种原因，它在软件仓库中显示已删除的文件。这些是在某个时间点从软件仓库中删除的文件，但 Perforce 将它们与文件名旁边的“<- deleted ->”一起显示。

当我使用常规 P4V 应用程序查看软件仓库时，我看不到这些已删除的文件。

Perforce 插件之前没有显示已删除的文件，所以我不确定发生了什么。几天前我确实将我的 Eclipse 从 Indigo 升级到了 Juno，所以也许这会影响插件？

那么有什么方法可以让我的 Perforce Eclipse 插件不显示已删除的文件？我试图在 Eclipse 中删除 P4 连接并重新创建它，但它仍然显示已删除的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T17:41:57.207

最新的 P4Eclipse 插件有很多问题，所以我降级到以前的版本：

[ftp://ftp.perforce.com/perforce/r12.2/bin.java/p4eclipse42.zip](ftp://ftp.perforce.com/perforce/r12.2/bin.java/p4eclipse42.zip)

该版本没有出现最新版本出现的以下问题：

*   显示仓库中已删除的文件
*   当您获得最新版本并且没有任何新文件时，不显示“最新”消息
*   当您从已签出的软件仓库获取较新的文件时，不显示消息告诉您需要解决冲突
*   不按完整路径的字母顺序显示更改列表中的文件

# c# - 什么字符是html编码的？

> ID：15282962
> 
> 赞同：1
> 
> 时间：2013-03-07T22:24:17.517
> 
> 标签：c#, soap

**TL;DR** Düsseldor 编码为 D&#252;sseldor，Düsseldorf 未编码（默认 MVC 编码）为什么？

我正在构建一个具有肥皂访问权限的 api。当我收到请求时，我对所有数据进行 html 编码。就在我结束当前请求之前，我复制了 Response.Stream 并将其保存以进行日志记录。

我注意到杜塞尔多夫被我的 api 编码为“Düsseldorf”。这是意料之中的。但在我的日志中，它显示杜塞尔多夫编码为“D&#252;sseldorf”（双重编码）我的日志在 MVC 序列化写入响应流后保存。

我认为这是因为肥皂在通过网络发送它们之前对值进行编码。

所以我的下一个测试是在我的 api 中关闭 html 编码。所以这次杜塞尔多夫给了肥皂序列化程序。

但它被编码为杜塞尔多夫？

编辑：当我说我打开/关闭编码时，我的意思是请求中的每个字段我使用 HttpUtility.HtmlEncode("some field")。并将其保存到数据库中。然后我使用 MVC 视图返回数据，如下所示：

```
public ActionResult CreateAccessCode ( CreateAccessCodeRequest request )
{
    var response = new Response (request);
    return new ContentResult (response);
} 
```

我的问题是当 ContentResult 方法运行时，它似乎做了一些自己的编码，我想知道那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:31:58.503

SOAP 使用 XML - HTML 和 XML 需要稍微不同的编码，但在您的情况下它可能是也可能不是问题。

您手动构建的 XML 很可能是不正确的。请*不要*用字符串连接构造 XML - XDocument/XmlDocument 更适合这种情况。

# jquery - 加载页面时将图像滑入页面

> ID：15282965
> 
> 赞同：2
> 
> 时间：2013-03-07T22:24:29.783
> 
> 标签：jquery, sliding

我试图在页面加载时将图像滑入页面，我的脚本工作正常，但是当图像没有被检查时，它首先加载图像，然后执行脚本。我试图预加载图像，但仍然出现故障。

这是一个测试链接： http: [//luvly.co.nz/space/akatarawa-road.html](http://luvly.co.nz/space/akatarawa-road.html)

这是我一直在处理的脚本：

预载

```
$.fn.preload = function() {
            this.each(function(){
                $('<img/>')[0].src = this;
            });
        }

        // Usage:

        $(['images/aka/aka1.2.jpg',
            'images/aka/aka2.jpg',
            'images/aka/aka3.jpg',
            'images/aka/aka4.jpg',
            'images/aka/aka5.jpg',
            'images/aka/aka6.jpg', 
            'images/aka/aka7.jpg', 
            'images/aka/aka8.jpg', 
            'images/aka/aka9.jpg', 
            'images/aka/aka10.jpg']).preload(); 
```

滑块：

```
$(function() {
  $("#1-slide").one('load', function () {
    $(this).show("slide", { direction: "right" }, 1000);
  }).each(function() {
    if(this.complete) $(this).load();
  });
}); 
```

另外我知道我不应该使用数字来启动 ID，但它目前仅用于测试目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:33:02.713

只需确保在运行脚本之前加载图像，因此请尝试以下操作：

```
<body>
<img src=image1.jpg" style="display:none" />
....
Your script calling 
```

此解决方案取决于首先调用您想要在幻灯片中的图像，因此在运行脚本之前将其下载到缓存中。所以会先缓存

# asp.net - 使用 XMLDOM 的网页每 5 分钟更新一次

> ID：15282967
> 
> 赞同：0
> 
> 时间：2013-03-07T22:24:36.347
> 
> 标签：asp.net, xml, xml-parsing

我有一个网页加载一个 URL 并使用

... Server.createobject("Microsoft.XMLDOM")

每 5 分钟一次。它处理数据并将其存储在数据库中。

基本上，它需要循环运行，每 5 分钟运行一次并解析 xml。

有一个更好的方法吗？

我愿意接受建议。

TIA史蒂夫42

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T19:27:26.917

有两种方法可以做到这一点。一种是使用 JavaScript 代码从客户端调用服务器，另一种是将该调用分离到 Web 服务并将其放入 Windows 服务或类似的东西中。

第一个选项可能是这样的：

```
$(document).ready(function() {
    setTimeout(functionToCall, (1000 * 60 * 5)); // Make a call every five minutes
});

function functionToCall() {
    $.ajax({
        url: 'call to your page',
        type: 'GET
    }).done(function() {
        alert("Things processed");
    }).fail(function() {
        alert("Error occurred");
    });
} 
```

这是我的想法，可以给你一个想法。它可能不是最理想的解决方案，但它应该为您提供一些指导。

# mysql - MySQL LENGTH() > 0 and NOT NULL 没有得到预期的结果

> ID：15282969
> 
> 赞同：-1
> 
> 时间：2013-03-07T22:24:44.300
> 
> 标签：mysql, select, string-length, notnull

查看我的结果集，尽管我有条件，但我看到一个空白字段。

我尝试选择：

```
SELECT column
FROM table
WHERE LENGTH(column) > 0 AND column IS NOT NULL 
```

我也试过：

```
WHERE LENGTH(column) <> 0 AND column IS NOT NULL 
```

但是，我仍然看到一个空白字段。

在我的 SELECT 中，我尝试检查该字段的内容：

```
SELECT column, LENGTH(column), HEX(column) 
```

ETC...

但是，它们都分别出现为 0 和看似空的。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:46:49.680

```
 SELECT 
      ....  
  FROM contacts as co 
  JOIN clients as cl 
    ON co.contact_client = cl.client_oldid 
  -- this starts a where clause
  WHERE cl.client_status = 2 
  -- ORDER BY ends a WHERE clause, and goes only for ordering:
  order by 
    cl.client_name  
    AND LENGTH(co.contact_email) > 0  -- so, order by result of this 0 or 1
    AND co.contact_email is not null  -- then, order by result of this 0 or 1
    AND TRIM(co.contact_EMAIL) <> '   -- then, order by result of this 0 or 1 
```

# asp.net - 发布 Web 应用程序和网站

> ID：15282971
> 
> 赞同：1
> 
> 时间：2013-03-07T22:24:48.633
> 
> 标签：asp.net

我了解引用存储在 ASP.NET Web 应用程序和 Web.Config 的项目 (vbproj) 文件中（[http://msdn.microsoft.com/en-us/library/37e2zyhb%28v=vs.71%29 .aspx](http://msdn.microsoft.com/en-us/library/37e2zyhb%28v=vs.71%29.aspx) ) 用于网站。

我最近将网站转换为 Web 应用程序。我现在注意到，即使 Web.Config 中的版本信息不正确，Web 应用程序也会发布（使用 Publish 选项），然后通过浏览器访问 Web 应用程序时出现错误。

如果 Web.Config 中的程序集版本不正确，我无法发布网站。

我读到网络应用程序是预编译的（在发布之前），而网站是在第一次通过浏览器访问网站时编译的。

因此，我相信我所说的应该是相反的，即我应该能够在 Web.Config 中发布具有不正确版本的网站（因为它们没有被编译）并且我不应该能够发布 Web 应用程序。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:41:01.333

经过进一步研究；我发现 ASP.NET Web 应用程序是使用 MSBuild 构建的，而 ASP.NET 网站是使用 ASPnet_Compiler 构建的。ASPnet_Compiler 在构建时在 Web.Config 中查找引用的程序集（添加程序集标记），而 MSBuild 在构建时在项目文件 (vbproj) 中查找。

Web 应用程序在没有 vbproj 的情况下部署。我相信项目文件用于链接。因此，在运行时，Web 应用程序使用 Web.Config 中的信息来识别要在本地 bin 文件夹中查找的程序集，然后 GAC（仅适用于 aspx 页面）即命名空间仍然必须手动导入到部分类后面的代码中。

如果有人有任何意见或更好的答案，请发表。

# c++ - 错误 LNK2019 C++ 难以忍受的简单程序

> ID：15282972
> 
> 赞同：0
> 
> 时间：2013-03-07T22:24:49.433
> 
> 标签：c++, lnk2019

我正在编写一个程序来搜索一系列素数，大约进行到一半以检查我的进度，我决定构建它以确保一切正常，我不断收到错误 LNK2019！它说这是一个未解决的外部问题。我做了一些研究，但我对任何事情都不太了解。这是代码。

```
#include <iostream>

using namespace std;

int singlePrime(int subjectNumber);

int main() {
    cout<<"Would you like to find a single prime number(1), or a range(2)?"<<endl;

    int methodchoice;
    cin>>methodchoice;

    if(methodchoice ==1) {
        int subjectNumber;
        cout<<"Which number would you like to test for primeness?"<<endl;
        cin>>subjectNumber;
        int singlePrime(subjectNumber);
    }

    if(methodchoice==2) {
        int  lowRange;
        int highRange;

        cout<<"Input the low value for your range."<<endl;
        cin>> lowRange;

        cout<<"Input the high value for your range"<<endl;
        cin>> highRange;

        for (int index=lowRange; index<highRange;index++) {
            if (index=highRange) {
                break;
            }

            singlePrime(index);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:27:15.523

在这里，您声明了一个从未*定义*过的函数：

```
int singlePrime(int subjectNumber); 
```

链接器抱怨是因为您调用了这个函数，但它的主体却无处可寻。

要验证这是问题所在，请将声明替换为包含一些虚拟实现的定义：

```
int singlePrime(int subjectNumber)
{
    return 0;
} 
```

另请注意，您对`singlePrime`此处调用的整数进行了无用的初始化：

```
if (methodchoice ==1) {
    int subjectNumber;
    cout<<"Which number would you like to test for primeness?"<<endl;
    cin>>subjectNumber;
    int singlePrime(subjectNumber);
//  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Why this?
} 
```

您可能意味着这一行要做其他事情（很可能调用该`singlePrime()`函数），因为`singlePrime`在该块的范围之外将不可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:27:14.473

它可能标记了这个函数原型：

`int singlePrime(int subjectNumber);`

您还没有为函数定义主体。您需要实现它（或至少给它一个虚拟实现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T22:29:17.957

好吧，我的心理调试技能已经查明了问题所在。以下代码：

```
int singlePrime(int subjectNumber); 
```

告诉编译器存在一个被调用的函数`singlePrime`，它接受一个`int`并返回一个`int`.

当然，您永远不会提供该函数的代码......编译器假定它在其他一些 .cpp 文件中并说“哦，好吧，链接器会处理这个问题。”

当链接器出现时，它发现它应该找到一个调用的函数，该函数`singlePrime`接受一个`int`并返回一个`int`。但该功能无处可寻。

简单修复，更改：

```
int singlePrime(int subjectNumber); 
```

进入

```
int singlePrime(int subjectNumber)
{
  // some code here to do whatever singlePrime is supposed to do
  // be sure to return the correct number. For now, return the 
  // number of the beast!

  return 666;
} 
```

在您的代码中，您似乎尝试调用此函数：

```
if (methodchoice ==1) {
    int subjectNumber;
    cout<<"Which number would you like to test for primeness?"<<endl;
    cin>>subjectNumber;
    int singlePrime(subjectNumber); // What?
} 
```

但这不是您在 C 或 C++ 中调用函数的方式。你应该仔细看看你的书或课堂笔记。你会做这样的事情：

```
// call singlePrime and store the result in a variable called
// ret so that we can use it.
int ret = singlePrime(subjectNumber); 
```

* * *

为了将来参考，如果您发布了*完整*的错误消息，将会有所帮助。你知道，万一我们的水晶球因为太阳耀斑而失灵。

# jqgrid - 如何隐藏 jqGrid treegrid 中的行，在 expandNode 事件后触发？

> ID：15282974
> 
> 赞同：2
> 
> 时间：2013-03-07T22:24:54.277
> 
> 标签：jqgrid, treegrid

我有一个有 2 个级别的基本树形网格，我希望隐藏一些行，而其他行可见；我以编程方式使用 $("#" + rowId).hide() 和 $("#" + rowId).show() 执行此操作，因为哪些行可见取决于网格外的数据。那部分工作正常。

但是，当我折叠一个节点然后展开它时，所有子节点都是可见的，即使是我隐藏的节点。显然，jqGrid 几乎只是在行上执行 .hide() 和 .show() ，这否定了我的设置。所以我的想法是在每一行中添加一个隐藏字段来存储它是否应该可见，然后在展开事件之后重新隐藏/显示。问题是，我不确定如何捕获事件并在它之后立即执行代码。

Oleg 在这里展示了一种捕获事件的方法：[jqGrid treeGrid catch expand collaps events](https://stackoverflow.com/questions/9178682/jqgrid-treegrid-catch-expand-collaps-events)

不幸的是，这对我不起作用，因为它只会覆盖我在那里所做的任何隐藏/显示。我需要在 jqGrid 函数之后执行代码。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:40:34.243

解决方案对我来说似乎很容易。只需对您引用[的答案中的代码进行少量修改。](https://stackoverflow.com/a/9181899/315935)您可以执行以下操作

```
var orgExpandNode = $.fn.jqGrid.expandNode;
$.jgrid.extend({
    expandNode: function (rc) {
        // here you can insert the code which will be executed
        // before the original expandNode
        var res = orgExpandNode.call(this, rc);

        // now you can execute some code after the original expandNode
        // for example the next line hide the node in the grid
        $("#1_1_1").hide(); // hide some row of the grid

        return res; // return the value from expandNode
    }
}); 
```

看[演示](http://www.ok-soft-gmbh.com/jqGrid/HoldRowHidden.htm)。该演示在 TreeGrid 中有一个节点，该节点具有`id="1_1_1"`，但它一直处于隐藏状态。

**更新：** [免费 jqGrid](https://github.com/free-jqgrid/jqGrid)有`beforeExpandRow`, `afterExpandRow`,`beforeExpandNode`和`afterExpandNode`回调和`"jqGridTreeGridBeforeExpandRow"`, `"jqGridTreeGridAfterExpandRow"`, `"jqGridTreeGridBeforeExpandNode"`,`"jqGridTreeGridAfterExpandNode"`事件。因此，在使用免费 jqGrid 的情况下，不需要对上述 TreeGrid 方法进行子类化。

# sql - Play Framework Scala Anorm 参数索引超出范围

> ID：15282981
> 
> 赞同：1
> 
> 时间：2013-03-07T22:25:16.423
> 
> 标签：sql, scala, playframework, anorm

我正在使用 Play Framework 2.1，当我尝试执行此 MySQL 代码以创建新表时出现异常。

```
[SQLException: Parameter index out of range (1 > number of parameters, which is 0).] 
```

执行调用它的代码是这个 def：

```
def create(name: String):Boolean = {
if(!contains(name)) // a function that tests if the table already exists
{
  val query = SQL("""
      CREATE TABLE `database`.`{name}` (
      `id` INT NOT NULL ,
      `address` TEXT NULL ,
      `city` TEXT NULL ,
      `state` TEXT NULL ,
      `zip` INT NULL ,
      `ownerid` INT NULL ,
      `price` DOUBLE NULL ,
      `rooms` INT NULL ,
      `available` BIT NULL ,
      `type` TEXT NULL ,
      PRIMARY KEY (`id`) );
  """).on('name -> name).execute()(conn) //Play compilation error is highlighting this line
  true
}
else    false 
```

}

如果我只使用更改字符串的“+name+”方法，这将有效，但这会使它对 SQL 注入开放，并且使用 .on 似乎是执行此操作的正确方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T22:59:41.880

所以看起来是 PreparedStatement 不能使用表名作为参数，所以看起来我必须手动更改字符串。如果有人对如何在避免 SQL 注入的同时做到这一点有任何见解，那就太好了。

# sql - 将序数格式转换为数字

> ID：15282991
> 
> 赞同：4
> 
> 时间：2013-03-07T22:26:09.060
> 
> 标签：sql, database, oracle, plsql

我需要将 FIRST/ SECOND /THIRD /FOURTH /FIFITH .... 转换为 1 2 3 4 5 .... oracle 中是否有函数。其他方式如下，但我想要相反

```
SELECT TO_CHAR(to_date(3,'J'), 'fmJSPTH') FROM dual; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-07T23:01:59.873

好问题！

```
create table t (w varchar2(30));

insert into t values ('First');
insert into t values ('THIRD');
insert into t values ('eleventh');
insert into t values ('Twenty-eighth');
insert into t values ('two hundred fifty sixth');

select 
  t.w, dict.n
from t
left join (
  select
    level n,
    regexp_replace(to_char(to_date(level,'J'),'fmJSPTH'),'[^A-Z]') w
  FROM dual
  connect by level <= 1000
) dict on regexp_replace(upper(t.w),'[^A-Z]')=dict.w 
```

[小提琴](http://www.sqlfiddle.com/#!4/1669f/5)

# javascript - 如何查找可能缺少某些字符但遵循特定顺序的模式？

> ID：15282993
> 
> 赞同：0
> 
> 时间：2013-03-07T22:26:15.017
> 
> 标签：javascript, regex

我正在尝试验证`"KQkq" <or> "-"`，在第一种情况下，任何字母都可能丢失（期望所有字母，在这种情况下应该是`"-"`）。字符的**顺序**也很重要。

法律示例的快速示例如下：

*   `-`
*   `Kkq`
*   `q`

这是为了进行国际象棋[FEN](http://en.wikipedia.org/wiki/Forsyth%E2%80%93Edwards_Notation)验证，我已经使用以下方法验证了前两部分：。

```
var fen_parts = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";
fen_parts = fen_parts.split(" ");

if(!fen_parts[0].replace(/[1-8/pnbrqk]/gi,"").length
&& !fen_parts[1].replace(/[wb]/,"").length
&& !fen_parts[2].replace(/[kq-]/gi,"").length /*not working, allows KKKKKQkq to be valid*/
){
    //...
} 
```

但是简单地使用`/[kq-]/gi`验证第三部分允许引入太多东西，这里有一些非法示例的快速示例：

*   `KKKKQkq`（有不止一个K）
*   `QK`（顺序不正确）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T22:50:58.020

这似乎对我有用......

`^(-|(K)?((?!\2)Q)?((?!\2\3)k)?((?!\2\3\4)q)?)$`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-07T22:32:58.920

你可以做

```
-|K?Q?k?q? 
```

尽管您需要进行第二次测试以确保输入不为空。或者，仅使用正则表达式：

```
KQ?k?q?|Qk?q?|kq?|q|- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T23:13:36.150

如果表达式不匹配，则`.match()`返回A。`null`在这种情况下，您可以使用`logical OR`to 默认为具有空字符串的数组（一种类似于`.match()`成功匹配时返回的结构），这将允许您检查匹配表达式的长度。`0`如果表达式不匹配或`K?Q?k?q?`匹配空字符串，则长度将是。如果模式匹配，长度将为`> 0`. 在代码中：

```
("KQkq".match(/^(?:K?Q?k?q?|-)$/) || [""])[0].length 
```

因为`|`它比您预期的“更强”，所以有必要将您的实际表达式包装在一个非捕获组`(?:)`中。

* * *

回答完问题后，让我们看一下其余的代码：

```
if (!fen_parts[0].replace(/[1-8/pnbrqk]/gi,"").length) 
```

是，从javascript的角度来看，相当于

```
if (!fen_parts[0].match(/[^1-8/pnbrqk]/gi)) 
```

翻译为“如果有任何字符，则为假，但`1-8/pnbrqk`”。这种表示法不仅更易于阅读，而且执行速度更快，因为没有不必要的字符串突变（替换）和计算（长度）。

# oauth - 仅使用 JavaScript 通过 OAuth 发布推文

> ID：15282995
> 
> 赞同：0
> 
> 时间：2013-03-07T22:26:17.933
> 
> 标签：oauth, twitter, twitter-oauth, javascript

我正在尝试找出一种仅通过 JavaScript 将推文发布到 twitter 的方法，用于我的个人项目。它不会公开访问，所以我不担心安全性，这通常是您通过 JS 进行 OAuth 时需要担心的问题。

基本上我想：重定向到 twitter OAuth 登录 -> 接受 -> 重定向回我自己的页面 -> 推文/做某事。

我一直在寻找，我似乎无法找到一种方法来做到这一点（我也找不到任何好的 JavaScript OAuth 库）。我没想到会这么难。

有什么建议/解决方案吗？

# php - Joomla 3.0 中的 JUser::getParameters

> ID：15282997
> 
> 赞同：1
> 
> 时间：2013-03-07T22:26:20.667
> 
> 标签：php, joomla, joomla3.0

在 joomla 1.5.XI 中用于`JUser::getParameters($loadsetupfile=false, $path=...);`从自定义 xml 加载用户参数。

在 Joomla3.0 中 JUser::getParameters() 已被删除。请参阅[文档](http://docs.joomla.org/Potential_backward_compatibility_issues_in_Joomla_3.0_and_Joomla_Platform_12.1#JUser)。

它说要使用[getParam](http://docs.joomla.org/API16%3aJUser/getParam)，但它不支持路径参数。

那么如何在 Joomla3.0 中加载用户参数呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T23:43:35.170

你现在用一个插件来做到这一点。您是否尝试过在 Google 上搜索

将自定义字段添加到 joomla 用户配置文件

第一次点击解释了它。实际上有一个关于这个问题的问题： [Creating Joomla user profile plug-in](https://stackoverflow.com/questions/15029699/creating-joomla-user-profile-plug-in)

# java - Java中的持久阻塞队列？

> ID：15282998
> 
> 赞同：5
> 
> 时间：2013-03-07T22:26:24.873
> 
> 标签：java, concurrency, persistent-storage, blockingqueue

**TL;博士; 我需要知道是否有一个具有持久阻塞队列的库。**

我有一个经典的生产者/消费者计划。他们共享一个`LinkedBlockingQueue`来共享数据，而我`BlockingQueue#take`在 Consumers 中使用方法，因为我需要他们永远活着等待新的元素。

问题是我有很多数据而且我不能丢失它们。即使在消费者停止之后，生产者也可以坚持生成一些数据。我正在考虑`H2`在达到某个阈值后实现我的 BlockingQueue ta 用于存储/获取数据。我的主要问题是我需要性能，并且我需要按照元素的创建顺序来使用它们。

是否有一个持久阻塞队列的实现可以用于这样的事情？如果没有，我有什么建议可以实现这样的目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T22:29:44.083

你可以试试[ActiveMQ](http://activemq.apache.org/)。ActiveMQ 可以写入您的文件系统，因此如果生产者生成的元素比消费者可以采取的多得多，那么您要么有很多阻塞（无论队列的上限是多少）或过多的数据（如果没有上限到队列中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-08T00:23:22.150

我会使用 ActiveMQ lib 和 Spring JMS，这是一个使用示例

启动代理

```
BrokerService broker = new BrokerService();
broker.addConnector("tcp://localhost:61616");
broker.start(); 
```

阅读味精

```
ConnectionFactory cf = new ActiveMQConnectionFactory("tcp://localhost:61616");
JmsTemplate t = new JmsTemplate(cf);
Message msg = t.receive(); 
```

发信息

```
ConnectionFactory cf = new ActiveMQConnectionFactory("tcp://localhost:61616");
JmsTemplate t = new JmsTemplate(cf);
t.send("test", new MessageCreator() {
  public Message createMessage(Session session) throws JMSException {
    return session.createTextMessage("test");
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T23:05:48.547

您是否遇到过[Amazon SQS](http://aws.amazon.com/sqs/)，它是一个无界队列，速度非常快，它保证了顺序。您希望将数据保留多长时间？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-04T22:25:02.943

您可以使用任何 JMS 实现来支持过多的传入数据。这是一个生产者消费问题，jms 就是为此而设计的。