# StackOverflow 问答 14566000-14566999

# c# - Entity Framework 4 Code First 多对多关系慢

> ID：14566000
> 
> 赞同：1
> 
> 时间：2013-01-28T16:00:25.460
> 
> 标签：c#, entity-framework-4, ef-code-first, code-first

我有一个`Category`对象和一个`Product`对象。它们具有多对多关系，因此在`CategoryProduct`初始化数据库时会创建表。在`OnModelCreating`方法中，我有以下代码来映射关系

```
modelBuilder.Entity<Category>()
    .HasMany( c => c.Products )
    .WithMany( i => i.Categories )
    .Map( t => t.MapLeftKey( "CategoryId" )
    .MapRightKey( "ProductId" )
    .ToTable( "CategoryProducts" )); 
```

表`CategoryProducts`被正确加载，一切都很好。但是当我实际调试站点时，导航到一个类别需要很长时间。例如，有一个包含 1400 多种产品的“配件”类别。该代码将获取所选类别的所有内容，但它会在需要时延迟加载产品。延迟加载产品时需要很长时间（显然）。我需要知道如何加快速度。有没有人有什么建议？

非常感谢

编辑：这是`Category`和`Product`类

```
public class Category : WebPage
    {
        private int _count = -1;
        public bool IsFeatured { get; set; }
        public virtual Category Parent { get; set; }

        public virtual List<Category> Children { get; set; }
        public virtual List<Product> Products { get; set; }    
        public virtual List<Discount> Discounts { get; set; }
}

public class Product : WebPage
    {
        public string Sku { get; set; }
        public string Details { get; set; }
        public string AdditionalDetails { get; set; }    

        public virtual List<Category> Categories { get; set; }
        public virtual Brand Brand { get; set; }
} 
```

编辑：执行查询的代码

```
public virtual IEnumerable<TEntity> Get(
            Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            string includeProperties = "", int? limit = null)
        {
            IQueryable<TEntity> query = dbSet;

            if (filter != null)
            {
                query = query.Where(filter);
            }

            foreach (var includeProperty in includeProperties.Split
                (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                query = query.Include(includeProperty);
            }

            if (limit != null && limit.HasValue && limit.GetValueOrDefault() > 0)
            {
                query = query.Take(limit.Value);
            }

            if (orderBy != null)
            {
                return orderBy(query).ToList();
            }
            else
            {
                return query;
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:05:00.597

我想象你`Get<Category>(x => x.SomeName == "abcdef")`和产品的迭代。

不能`Get<Product>(x => x.Categories.Where(y => y.SomeName == "abcdef").Count() > 0)`吗？

# c# - UNC LogonUser：未知用户或密码错误

> ID：14566004
> 
> 赞同：0
> 
> 时间：2013-01-28T16:00:43.107
> 
> 标签：c#, asp.net

我这里有一个奇怪的场景。我的应用程序连接到文件服务器以使用 UNC 列出目录中的文件。在过去的几年里，它一直在工作，没有任何问题。最近，我的网络管理员重新启动了服务器，结果我开始收到 LogonUser : Unknown user or bad password 错误。根据网络管理员的说法，域用户帐户的所有内容都已正确设置。用户名和密码都正确。我需要在下面的代码中更改什么吗？

```
const int LOGON32_LOGON_INTERACTIVE = 2;
const int LOGON32_LOGON_NETWORK = 3;
const int LOGON32_LOGON_BATCH = 4;
const int LOGON32_LOGON_SERVICE = 5;
const int LOGON32_LOGON_UNLOCK = 7;
const int LOGON32_LOGON_NETWORK_CLEARTEXT = 8;
const int LOGON32_LOGON_NEW_CREDENTIALS = 9;
const int LOGON32_PROVIDER_DEFAULT = 0;

[DllImport("advapi32.dll", SetLastError = true)]
public static extern int LogonUser(
    string lpszUsername,
    string lpszDomain,
    string lpszPassword,
    int dwLogonType,
    int dwLogonProvider,
    out IntPtr phToken
    );
[DllImport("advapi32.dll", SetLastError = true)]
public static extern int ImpersonateLoggedOnUser(
    IntPtr hToken
);

[DllImport("advapi32.dll", SetLastError = true)]
static extern int RevertToSelf();

[DllImport("kernel32.dll", SetLastError = true)]
static extern int CloseHandle(IntPtr hObject);
int TResult = LogonUser(ConfigurationManager.AppSettings["ServerUserName"].ToString(), @"\\server\folder", ConfigurationManager.AppSettings["ServerPassword"].ToString(), LOGON32_LOGON_NEW_CREDENTIALS, LOGON32_PROVIDER_DEFAULT, out lnToken); 
```

请告知我应该与我的网络管理员检查的其他内容。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:00:31.730

我看不出您正在执行的代码有任何本质上的错误。所以，我不确定为什么这会突然停止工作。但是，如果您愿意进行一些重构，那么似乎还有其他人遇到了类似的问题。以下答案之一应该可以为您提供所需的洞察力。

[当 dns 或 netbios 不可用时，如何模拟用户通过网络复制文件](https://stackoverflow.com/questions/2702109/how-to-impersonate-a-user-for-a-file-copy-over-the-network-when-dns-or-netbios-i)

[在 C# 中访问 Windows 中受密码保护的网络驱动器？](https://stackoverflow.com/questions/2563724/accessing-password-protected-network-drives-in-windows-in-c)

# intuit-partner-platform - 无法在 IDS 上创建客户集为外币

> ID：14566011
> 
> 赞同：1
> 
> 时间：2013-01-28T16:00:58.890
> 
> 标签：intuit-partner-platform

我们将以下 XML 发布到 IDS 以在 Quickbooks Desktop 中创建外币客户。但是，客户总是在本国货币上创建的。QB 公司设置为多币种，本币为美元，外币为瑞士法郎（活跃且汇率以 QBD 为单位）。我们做错了什么？

```
<OfferingId>ipp</OfferingId>

<ExternalRealmId>123485035</ExternalRealmId>

<Customer>

    <CustomField xsi:type="StringTypeCustomField" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

        <DefinitionId idDomain="NG">154889</DefinitionId>

        <Value>309</Value>

    </CustomField>

    <TypeOf>Person</TypeOf>

    <Name>CHF Customer</Name>

    <Address>

        <Country>GBR</Country>

        <CountrySubDivisionCode>GBR</CountrySubDivisionCode>

        <Tag>Billing</Tag>

    </Address>

    <Email>

        <Address>chfcust@gmail.com</Address>

        <Tag>Business</Tag>

    </Email>

    <GivenName>CHF</GivenName>

    <FamilyName>Customer</FamilyName>

    <DBAName>CHF Customer</DBAName>

    <OpenBalance>

        <CurrencyCode>CHF</CurrencyCode>

        <Amount>0</Amount>

    </OpenBalance>

</Customer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T13:32:48.957

适用于 Windows 的 QuickKBooks 的 Intuit Data Services v2 尚不支持全球货币。该服务的 v3 将完全支持多币种。

V3 尚未向公众提供。我们正准备尽快向外部开发人员宣布 v3 路线图。

问候，
杰瑞德

# api - 如何使用 Asana API 在任务中获取附件？

> ID：14566024
> 
> 赞同：1
> 
> 时间：2013-01-28T16:01:34.753
> 
> 标签：api, task, attachment, asana

我发现没有 API 可以获取这些值。请告诉我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:06:11.737

（我在 Asana 工作）

API 目前不提供对附件的访问。我们已经听到了其他要求，因此我们正在考虑在未来添加它，但我无法提供有关时间表的任何细节。

# c++ - 在 VS 2010 中无法推断模板参数

> ID：14566025
> 
> 赞同：1
> 
> 时间：2013-01-28T16:01:35.280
> 
> 标签：c++, visual-studio-2010

在 VS 2005 中此代码工作正常，但在 VS 2010 中我有错误“无法从 'std::queue<_Ty> *' 推断出 'T *' 的模板参数”

我无法理解问题是什么？请帮我...

```
#include <string>
#include <queue>
using namespace std;
template<typename  T, typename  R, typename  P1>
int bindthis(T* obj, R (T::*func)(P1))
{
    return 1;
}
int _tmain(int argc, _TCHAR* argv[])
{
std::queue<std::wstring> queue_;

bindthis(&queue_, &std::queue<std::wstring>::push);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:29:37.397

我不确定 Visual Studio，但在 GCC 中，这个函数在 C++03 模式下编译，而不是在 C++11 模式下编译，所以我想问题是一样的。

问题是在 C++11 中，添加了一个重载`std::queue::push`，因此编译器不知道要选择哪个重载。有两种方法可以解决此问题：

1.  明确指定模板参数：

    ```
    bindthis<std::queue<std::wstring>, void, const std::wstring&>(&queue_, &std::queue<std::wstring>::push); 
    ```

2.  将函数指针转换为所需的类型`void (std::queue<std::wstring>::*)(const std::wstring&)`，以便选择正确的重载：

    ```
    typedef void (std::queue<std::wstring>::*push_func_ptr)(const std::wstring&);
    bindthis(&queue_, static_cast<push_func_ptr>(&std::queue<std::wstring>::push)); 
    ```

# jenkins - 詹金斯停止了检查修订的工作

> ID：14566026
> 
> 赞同：1
> 
> 时间：2013-01-28T16:01:37.823
> 
> 标签：jenkins, continuous-integration, hudson

我对 Jenkins bilds 有疑问。

有时我的构建挂在“检查修订”操作上。问题不是一成不变的。我可以在 10 次图片的 4-5 次中得到这个问题。

我等了 10 到 20 分钟，然后这个中止就挂了。

控制台日志：

```
Started by upstream project "master" build number 737
originally caused by: 
Started by user anonymous
Building in workspace /var/lib/jenkins/jobs/master/workspace/CI_BUILD/integration
Checkout:integration / /var/lib/jenkins/jobs/master/workspace/CI_BUILD/integration - hudson.remoting.LocalChannel@29b99c
Using strategy: Default
Last Built Revision: Revision e0963076406dd8bd6fcbd2d31ff37ad4ea60669a (origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from git@github.com:shaliko/shaliko.git
Commencing build of Revision e0963076406dd8bd6fcbd2d31ff37ad4ea60669a (origin/master)
Checking out Revisione 0963076406dd8bd6fcbd2d31ff37ad4ea60669a (origin/master) 
```

在 Jenkins 配置中：

*   6名执行人
*   安静时期 10
*   SCM 结帐重试次数 10

我将 Jenkins 更新到 1.500 版并将“Jenkins GIT 插件”更新到 1.1.26 版 - 无效。

我应该检查或更新什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T16:09:43.793

通过将 JDK 更新到版本 7u11 修复了问题。

感谢您的建议！

# ios - iOS 应用发布 - 相同的 Bundle ID 但不同的开发者帐户

> ID：14566028
> 
> 赞同：2
> 
> 时间：2013-01-28T16:01:43.083
> 
> 标签：ios, release

我创建了一个应用程序，之前为其创建了不同的版本。较旧的应用程序的 Bundle ID 与我的不同，但它具有我想要使用的名称。因此，如果我想发布具有相同名称的应用程序：

1) 我必须使用相同的 Bundle ID 吗？

2) 如果应用程序是使用不同的开发者帐户提交的，这有关系吗？

3) App ID 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:07:02.367

你的目标是什么？如果您想要相同的名称，那么您唯一的选择是使用不同的捆绑 ID，并查看您的应用程序名称是否在 iTunes 连接中的不同区域设置中可用。

您的捆绑包 ID 必须不同。但捆绑包 ID 与应用名称没有内在联系。但是，再次，在 iTunes 连接中，您的应用程序名称在区域设置中必须不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:04:20.240

我相信如果您尝试使用相同的名称和/或相同的 Bundle ID，您的应用将被拒绝。关键是它唯一地标识了您的应用程序

如果您想更换旧版应用程序，您需要使用旧版开发者帐户并提交更新

# javascript - 使用 javascript/jQuery 和本地存储创建用户可自定义的导航

> ID：14566029
> 
> 赞同：-2
> 
> 时间：2013-01-28T16:01:45.960
> 
> 标签：javascript, jquery, local-storage

我想为我正在开发的 CMS 创建一个用户可自定义的导航——一种“个性化仪表板”。用户将能够从链接列表中选择“编辑页面”、“查找用户”等部分的链接，并将他们最常使用的链接添加/删除到自己的仪表板。对于我选择的链接，我在隐藏的 div 中拥有用户有权访问的所有可用链接。

我正在考虑用于界面的 jQuery UI droppable（这个例子很接近：http: [//jqueryui.com/droppable/#photo-manager](http://jqueryui.com/droppable/#photo-manager)）。

最后，我需要保存用户的选择，为此我想使用 localStorage 或 cookie，因为我无法访问服务器端代码。

我的问题是：有没有人知道任何比 jQuery UI 更轻的拖放功能？

有谁知道任何示例，包括使用本地存储或 cookie 保存用户的选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:41:36.233

不是一个非常具体的问题，但我会尽力而为。我曾大量使用过页面自定义、jquery、jquery ui 和 HTML5 本地存储，在实现中要考虑的重要事项之一是您的存储选择。虽然使用这些组件并推出自定义解决方案当然是可能的（我想，因为我不知道什么 CMS 或任何真实细节），但您可能会在尝试使用本地存储创建可接受的解决方案时遇到问题。

这就是问题所在：按照设计，HTML5 本地存储将允许您跨浏览器会话跟踪您的更改，以便您可以维护用户的导航选择。但是，如果用户尝试从另一个浏览器访问他们的同一个站点，则他们的所有自定义项都不会存在于该上下文中。

如果您仍然设置使用本地存储，请务必检查用户的浏览器是否支持它（可能使用[Modernizr](http://diveintohtml5.info/detect.html#modernizr)）。否则，我发现 jquery 和 jquery ui 库本身就足以进行所需的 DOM 操作。诚然，在不了解您的特定设置的情况下，我无法提供更多建议。

# android - 从 ListView 中提取用户输入

> ID：14566034
> 
> 赞同：0
> 
> 时间：2013-01-28T16:02:16.183
> 
> 标签：android, android-listview

我正在开发一个简单的应用程序，在该应用程序中，酒吧招标可以自动支付啤酒。文章（啤酒、葡萄酒、威士忌等）列在数据库中，我使用 SimpleCursorAdapter 将所有文章从数据库映射到 ListView。完美运行。

所以现在它显示了一个文章列表、价格和一个文本字段，调酒师可以在其中输入订单数量（例如 10 杯啤酒）。问题：我不知道如何从 ListView 中取回这些数量。有谁知道如何做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:42:12.310

如果要使用 ListView 的 OnItemClickListener，可以使用 View view Parameter 访问 List View Item 的 Sub-Items。您可以将以下示例中的 TextView 替换为您的 EditText。将 android.R.id.text1 替换为您的 R.id.x。

```
yourListView.setOnItemClickListener(new OnItemClickListener() {
              @Override
              public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
                TextView testAccess = (TextView)(view.findViewById(android.R.id.text1));
                Toast.makeText(getApplicationContext(), testAccess.getText()
                , Toast.LENGTH_LONG).show();
                //do something
              }
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:09:42.317

一种可能的方法是在您的 Adapter getView() 方法中设置一个按钮单击侦听器，单击该按钮可以将值从 EditText 中提取出来。由于您在 getView() 方法中，因此您仍然应该拥有对所需的 EditText 的引用。

# c - 我在哪里可以找到 libav、ffmpeg 等的现代教程？

> ID：14566042
> 
> 赞同：18
> 
> 时间：2013-01-28T16:02:30.053
> 
> 标签：c, ffmpeg, libav

我想用 C 语言制作一个快速程序，它将打开一个视频，将每一帧保存为 ppm，并转储运动矢量。我能找到的所有教程都来自大约十年前，并调用了已弃用或不存在的函数。

是否有任何好的在线资源、网站、视频或教科书涵盖了现代方法来做这些类型的事情？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T19:56:29.933

我使用 ffmpeg 和 libav 已经有好几年了，也没有找到像样的最近的 API 级教程。有时我只需要深入研究源代码就可以弄清楚发生了什么以及如何使用它。此外，阅读 CLI 程序（使用底层库）的源代码也可以提供丰富的信息。

事实上，[ffmpeg](http://ffmpeg.org/faq.html#Are-there-examples-illustrating-how-to-use-the-FFmpeg-libraries_002c-particularly-libavcodec-and-libavformat_003f)建议您只阅读源代码，无论是真正的 OSS 项目还是它们的示例。[Libav](https://libav.org/documentation/)提供 Doxygen 文档，但没有分步教程。IMO 这是典型的开源项目：源代码可能很好，但通常缺乏文档。

退后一步，您可能会考虑使用[OpenCV](http://opencv.org)，它有很好的文档记录（存在[书籍](https://rads.stackoverflow.com/amzn/click/com/1449314651)！）并且具有更简单的 API。最后，ppm 是一种很简单的格式，你可以自己写一个 50 行的函数来保存像素，我在[这里](http://code.google.com/p/optflow/wiki/MotionDetection)找到了一个运动提取程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-27T12:56:21.647

```
 #include <iostream>
    #include <cstdio>
    #include <cstdlib>
    #include <fstream>
    #include <math.h>

    #define __STDC_CONSTANT_MACROS
    //FFMPEG LIBRARIES
    extern "C"
    {
    #include "libavcodec/avcodec.h"
    #include "libswscale/swscale.h"
    #include "libavutil/opt.h"
    #include "libavutil/common.h"
    #include "libavutil/channel_layout.h"
    #include "libavutil/imgutils.h"
    #include "libavutil/mathematics.h"
    #include "libavutil/samplefmt.h"
    #include "libavutil/time.h"
    #include "libavformat/avformat.h"
    #include "libavformat/avio.h"
    #include "libavfilter/avfilter.h"
    #include "libavdevice/avdevice.h"
    #include "libavfilter/avfiltergraph.h"
    #include "libavfilter/buffersink.h"
    }

    using namespace std;

    void SaveMyFrame(AVFrame *sAVFrame , int swidth, int sheight, int iFrame)
    {
    FILE *pfile;
    char szFilename[32];
    int y;

    sprintf(szFilename , "frame%d.ppm" , iFrame);
    pfile = fopen(szFilename , "wb");
    if(pfile == NULL)
    {
      cout<<"\n\ncould'nt open file";
      return;
    }

    fprintf(pfile , "P6\n%d %d\n255\n" , swidth , sheight );

    for( y=0; y<sheight; y++)
    {
      fwrite(sAVFrame->data[0]+y*sAVFrame->linesize[0] , 1 , swidth*3 , pfile );
    }

    fclose(pfile);
    }

    int CaptureScene(int VideoStreamIndx ,
                       AVFormatContext *bAVFormatContext ,
                       AVCodecContext *bAVCodecContext,
                       AVCodec *bAVCodec )
    {
      AVPacket bAVPacket;
      AVFrame *bAVFrame = NULL;
      bAVFrame = av_frame_alloc();
      AVFrame *bAVFrameRGB = NULL;
      bAVFrameRGB = av_frame_alloc();

    if(bAVFrame == NULL)
    {
      cout<<"\n\nframe alloc failed";
    }

    if(bAVFrameRGB == NULL)
    {
      cout<<"\n\nframe alloc RGB failed";
    }

      int numBytes;
      uint8_t *buffer = NULL;

    numBytes =  av_image_get_buffer_size(AV_PIX_FMT_RGB24 , bAVCodecContext->width,bAVCodecContext->height, 32);  // avpicture_get_size  deprecated

    buffer=(uint8_t *)av_malloc(numBytes*sizeof(uint8_t));

    avpicture_fill((AVPicture *)bAVFrameRGB , buffer , AV_PIX_FMT_RGB24 , bAVCodecContext->width , bAVCodecContext->height);

    int framefinish;
    struct SwsContext *sws_ctx = NULL;
    sws_ctx = sws_getContext( bAVCodecContext->width,
                              bAVCodecContext->height,
                              bAVCodecContext->pix_fmt,
                              bAVCodecContext->width,
                              bAVCodecContext->height,
                              AV_PIX_FMT_RGB24,
                              SWS_BILINEAR,
                              NULL,NULL,NULL);
    int i =0;

    while(av_read_frame(bAVFormatContext,&bAVPacket) >=0)
    {
          if(bAVPacket.stream_index == VideoStreamIndx)
      {
          avcodec_decode_video2(bAVCodecContext , bAVFrame , &framefinish , &bAVPacket);
          if(framefinish)
        {
          // convert image from native format to RGB
          sws_scale(sws_ctx , (uint8_t const* const *)bAVFrame->data ,
          bAVFrame->linesize , 0, bAVCodecContext->height,
          bAVFrameRGB->data , bAVFrameRGB->linesize);
          // save frame to disk
          if(++i <= 100)SaveMyFrame(bAVFrameRGB , bAVCodecContext->width , bAVCodecContext->height , i );

        }

      }

    }

    av_free(bAVFrame);
    av_free(bAVFrameRGB);
    }

    int main()
    {

      avdevice_register_all();
      avcodec_register_all();
      av_register_all();

      char *dev_name = "/dev/video0";

     int VideoStreamIndx = -1;
     AVCodecContext *pAVCodecContext = NULL;
     AVCodec *pAVCodec = NULL;
     AVInputFormat *inputFormat =av_find_input_format("v4l2");
     AVDictionary *options = NULL;
     av_dict_set(&options, "framerate", "20", 0);

     AVFormatContext *pAVFormatContext = NULL;

     if(avformat_open_input(&pAVFormatContext, dev_name, inputFormat, NULL) != 0)
     {
       cout<<"\nError : could'nt open video source\n\n";
       return -1;
     }

     if( avformat_find_stream_info( pAVFormatContext , NULL) < 0)
     {
     cout<<"Error : streams not found";
      return -1;
     }

      av_dump_format(pAVFormatContext , 0 , "/dev/video1" , 0 );

     for(int i=0; i<pAVFormatContext->nb_streams ;i++ )
     {
      if( pAVFormatContext->streams[i]->codec->codec_type == AVMEDIA_TYPE_VIDEO ) // if video stream found then get the index.
      {
        VideoStreamIndx = i;
        break;
      }
     }

    if((VideoStreamIndx) == -1)
    {
      cout<<"Error : video streams not found";
      return -1;
    }

    pAVCodecContext = pAVFormatContext->streams[VideoStreamIndx]->codec;

    pAVCodec = avcodec_find_decoder( pAVCodecContext->codec_id );

    if(pAVCodec == NULL)
    {
     fprintf(stderr,"Unsupported codec !");
     return -1;
    }

    int value = avcodec_open2(pAVCodecContext , pAVCodec , NULL);
    if( value < 0)
    {
      cout<<"Error : Could not open codec";
      return -1;
    }

    int Vwidth , Vheight , videoFPS , videoBaseTime , duration_2 ;
    int sframe , length , Fheight;

    /*
    To fetch/display some media information programatically
    */

    //int64_t duration_1 = pAVFormatContext->duration;
    videoFPS = av_q2d(pAVFormatContext->streams[VideoStreamIndx]->r_frame_rate);
    videoBaseTime = av_q2d(pAVFormatContext->streams[VideoStreamIndx]->time_base);
    Vwidth = pAVFormatContext->streams[VideoStreamIndx]->codec->width;
    Vheight = pAVFormatContext->streams[VideoStreamIndx]->codec->height;
    //duration_2 = (unsigned long)pAVFormatContext->streams[VideoStreamIndx]->duration*(videoFPS*videoBaseTime);

    cout<<"Video FPS :"<<videoFPS;
    cout<<"\n\n width : "<<Vwidth;
    cout<<"\n\n height : "<<Vheight;
    cout<<"\n\n time base"<<videoBaseTime;
    //cout<<"\n\nduration (1): "<<duration_1;
    //cout<<"\n\nduration (2): "<<duration_2;

    CaptureScene( VideoStreamIndx , pAVFormatContext , pAVCodecContext , pAVCodec );

    avcodec_close(pAVCodecContext);
    avformat_close_input(&pAVFormatContext);

    return 0;
    } 
```

此 C++ 代码将帮助您从基于 USB (UVC) 的相机中获取 .ppm 图像。它以 .ppm 格式保存。linux 使用 v4l2，windows 使用 dshow。代替相机帧馈送，视频也可以用作输入。此代码使用最新的 ffmpeg 库编写。

libavutil 55\. 24.100 / 55\. 24.100

libavcodec 57\. 43.100 / 57\. 43.100

libavformat 57\. 37.100 / 57\. 37.100

libav 设备 57\. 0.101 / 57\. 0.101

libavfilter 6\. 46.100 / 6\. 46.100

libswscale 4\. 1.100 / 4\. 1.100

libswresample 2\. 0.101 / 2\. 0.101

libpostproc 54\. 0.100 / 54\. 0.100

# javascript - Ember.js：如何向视图添加参数

> ID：14566045
> 
> 赞同：8
> 
> 时间：2013-01-28T16:02:42.423
> 
> 标签：javascript, ember.js, handlebars.js

我想这很简单，但作为 Ember 新手，我找不到解决方案......

所以假设我有这个非常简单的观点：

```
MyApp.MyTextView = Ember.View.extend({
    template: Ember.Handlebars.compile('{{value}}')
}); 
```

我想使用这个视图来显示同一对象的两个不同属性。这听起来像是我想在“调用”我的视图时添加参数。在第二个视图中，我希望能够执行以下操作（假设我的内容对象是一个人：{firstName：'toto'，lasName：'titi'}）：

```
MyApp.AnotherView = Ember.View.extend({
    template: Ember.Handlebars.compile('FirstName: {{view MyApp.MyTextView value="content.firstName"}} - LastName: {{view MyApp.MyTextView value="content.lastName"}}')
}); 
```

我也尝试使用[此处](http://emberjs.com/guides/templates/writing-helpers/)解释的 Handlebars 助手，但它不起作用（当我使用 {{highlight firstName}} 或 {{highlight content.firstName}} 时，显示的是 firstName 或 content.firstName，而不是属性值。 ..)

你们有什么想法吗？我被困在这里...

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T16:29:57.587

要将参数传递给您的视图，您可以像这样指定每个参数：

```
{{view App.MyView firstNameBinding="content.firstName" lastNameBinding="content.lastName"}} 
```

这将允许您执行以下操作：

```
template: Ember.Handlebars.compile('{{view.firstName view.lastName}}'); 
```

但是，您可以想象，随着您添加更多属性，这会变**得很长。**因此，您可以简单地将`content`对象作为`context`（但您不需要将其作为上下文传递——尽管那是另一天）：

```
{{view App.MyView contextBinding="content"}} 
```

*（请注意，这`contextBinding`是特殊的，会更改视图中的上下文。）*

这样，视图将保存您传入的对象，因此您现在可以在视图中执行以下操作：

```
template: Ember.Handlebars.compile('{{firstName lastName}}'); 
```

*（您可以这样做，因为`content`现在是您视图的上下文。）*

我给你打了一个快速的 JSFiddle 来解释（希望如此！）：http: [//jsfiddle.net/YVCrq/](http://jsfiddle.net/YVCrq/)

# android - phonegap 应用程序首次启动时播放视频？

> ID：14566047
> 
> 赞同：2
> 
> 时间：2013-01-28T16:02:46.773
> 
> 标签：android, cordova, mobile-application

我是phonegap的新手。在我目前正在进行的一个项目中，我想在应用程序第一次启动时在主屏幕上播放视频。我的方法是使用 html5 本地存储。我为一个键设置了一个特定的值。如果我无法检索键“firstLaunch”的预期值，我会播放视频并设置“firstLaunch”的值。

这是一段代码（在主干视图js文件中）。

```
 var pref = localStorage.getItem("firstLaunch");

                if(pref == null || pref != "0"){
                      $("#player")[0].src += "&autoplay=1";
                    localStorage.setItem("firstLaunch", "0");
                } else {
                    $("#player")[0].src += "&autoplay=0";
                } 
```

视频显示为以下 HTML 片段：

```
<div id="introvid" style="width:100%; height: 45%; ">
    <iframe id="player" type="text/html" width="100%" height="100%"  
    src="http://www.youtube.com/embed/u1zgFlCw8Aw?enablejsapi=1&origin=http://example.com&autoplay=0" frameborder="0"></iframe>
</div> 
```

我在外部浏览器上尝试过，效果很好，即第一次渲染页面时，它播放视频，但不用于后续渲染。所以我的问题是

1）可能是什么问题？

2）如果有更好的方法你推荐。谢谢你 。

# vb.net - 如何在与应用程序目录不同的网络目录中共享dll

> ID：14566052
> 
> 赞同：1
> 
> 时间：2013-01-28T16:02:57.437
> 
> 标签：vb.net, networking, dll, shared, drive

我会提前承认，我仍在学习好的部署方法，并且我没有 12 大小的大脑来完成以下任务。现在话虽如此......我们在网络驱动器上存在大约 8 个 exe，它们引用了同一共享/文件夹中的 dll。我们希望在不同的位置有一个公共网络共享，其中包含这个 dll 和我们创建的任何未来的 dll，因此我们只有一个地方可以进行更改（假设应用程序不需要重新编译）。对于为什么不应在网络上共享 dll，我还没有找到令人满意的答案，所以我想知道这样做的最佳做法是什么。如果这是可以接受的并且经常执行的操作，那么完成此操作需要哪些步骤？提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:13:18.663

如果这个共享的 DLL 有机会在未来的版本中更新，那么您现在拥有的，针对每个应用程序存储的本地副本会好得多。

您说您的既定目标是能够对 DLL 进行一项更改并更新所有应用程序。我以前听说过这个案子的积极方面。

“我们将推出对所有应用程序的改进”

从半空的玻璃杯中看到的是：-

“我们将向所有应用程序引入常见错误”。

即使是在八个项目中，想象一下你的发布会是什么样子。

“呃，你好 QA。你能测试这个新应用程序吗？（加上其他七个我们没有做任何事情但可能因此被破坏的应用程序）”。

只有在成熟且不太可能改变的情况下，才应共享库。很抱歉这么坦率地说，但我遇到了一个绝对像你一样相信的狂热者。只有当我们的底线（可预见的）急剧下降时，我的担忧才被倾听。前方有龙。被警告！

# php - 无法创建 Facebook 测试用户“不支持的方法，发布”

> ID：14566054
> 
> 赞同：1
> 
> 时间：2013-01-28T16:03:01.077
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

当我尝试创建 Facebook 测试用户时，我得到以下响应：

```
{
   "error": {
      "message": "Unsupported method, post ",
      "type": "Exception"
   }
} 
```

我正在使用以下代码...

```
require_once 'config.php';//contains my $FB_APP_ID and $FB_APP_SECRET variables
require_once 'php-sdk/src/facebook.php';

$facebook = new Facebook(array(

  'appId'  => $FB_APP_ID,

  'secret' => $FB_APP_SECRET

));

$access_token = $facebook->getAccessToken();

$url = "https://graph.facebook.com/$FB_APP_ID/accounts/test-users?
installed=true
&name=JoesTestUser
&locale=en_US
&permissions=read_stream
&method=post
&access_token=$access_token";

header('Location: ' . $url); 
```

有没有其他人遇到过这个“不支持的方法，发布”问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:31:19.307

确保您有一个[**应用访问令牌**](https://developers.facebook.com/docs/howtos/login/login-as-app/)。如果您必须将其集成到您的系统和测试应用程序中，以编程方式创建测试用户可能非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:08:40.060

我想我可以回答我自己的问题。您现在可以通过开发人员仪表板 UI 来代替以编程方式创建测试用户。

# java - 创建没有默认构造函数的对象

> ID：14566057
> 
> 赞同：0
> 
> 时间：2013-01-28T16:03:10.900
> 
> 标签：java, constructor, object-construction

我有一个包含 N 个类的包，我正在扫描所有类并通过一个方法初始化它们。所有具有默认构造函数的类都被初始化，但没有默认（零参数）构造函数的类会抛出异常。有谁知道如何在没有默认构造函数的情况下创建对象？

PS我需要一个java代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:05:11.153

用于[`Class#getConstructors()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getConstructors%28%29)查找已定义的构造函数，然后调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:06:13.320

你可以试试看[这里](http://tutorials.jenkov.com/java-reflection/constructors.html)。它解释了如何使用 Java 反射创建对象。

或者只是谷歌：java构造函数反射。我使用“我感觉很幸运”功能得到了这个

# javascript - 验证在 Firefox 中不起作用，在 IE 中可以正常工作

> ID：14566064
> 
> 赞同：0
> 
> 时间：2013-01-28T16:03:33.373
> 
> 标签：javascript, asp.net, visual-studio-2010, validation, firefox

我在客户端有一个电子邮件验证码。它在 IE 中工作正常/按预期工作，但在 Firefox 中不显示错误消息。

下面是代码：

```
<asp:ImageButton ID="btnLink" runat="server" AlternateText="ClickHere" OnClientClick="return onCClick();" OnClick="btnLink_Click"/>  
<div id="errorEmail" runat="server"></div> 
```

* * *

```
//function to validate
        function onCClick() {
//clear error message
            document.getElementById('<%=errorEmail.ClientID%>').innerText = "";
//if validation fails
            if (validateEmail() != true) {
//show error message
                document.getElementById('<%=errorEmail.ClientID%>').innerText = "Invalid Email Address.";
                return false;
            }
}

function validateEmail() {
            var emailId = document.getElementById('<%=txtEmail.ClientID%>').value;
            var emailPattern = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
            return emailPattern.test(emailId);
        } 
```

有什么我应该注意的吗？我的错误消息 div 设置为空白，但在任何地方都不可见（在这种情况下，javascript 也不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:08:26.653

`innerText`不是跨浏览器，firefox使用`textContent`

你可以使用这样的函数：

```
function changeText(elem, changeVal) {
    if ((elem.textContent) && (typeof (elem.textContent) != "undefined")) {
        elem.textContent = changeVal;
    } else {
        elem.innerText = changeVal;
    }
} 
```

或者只是使用`innerHTML`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:18:18.400

最好你试试innerHTML ..它会工作的..

```
document.getElementById('errorEmailAddress').innerHTML = "Error Message"; 
```

# kendo-ui - 网页版 Kendo UI 是否支持 c# MVC 4？

> ID：14566067
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:03:48.067
> 
> 标签：kendo-ui

网页版 Kendo-UI 是否支持 MVC 4？

我正在尝试使用带有单选按钮的自定义过滤器菜单在 Kendo 中实现 Grid。似乎目前不支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:05:56.173

是的，Kendo 支持 Asp.Net MVC 4，他们所有的 Razor MVC 文档都可以在 MVC 4 中使用。我目前在 MVC 4 的许多不同实例中使用网格

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:18:25.507

是的。我用 Kendo ui 和 mvc 4 做了很多项目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:14:21.337

来自剑道ui博客

[http://www.kendoui.c​​om/blogs/teamblog/posts/12-11-29/the_facts_on_using_kendo_ui_with_asp_net_webapi.aspx](http://www.kendoui.com/blogs/teamblog/posts/12-11-29/the_facts_on_using_kendo_ui_with_asp_net_webapi.aspx)

“答案当然是响亮的“是！”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T20:58:21.993

我认为，user2018741 正在谈论 MVC 服务器包装器。而且它们不在剑道 UI WEB 版中。

# javascript - 将项目添加到 JSON 字符串

> ID：14566071
> 
> 赞同：13
> 
> 时间：2013-01-28T16:03:55.133
> 
> 标签：javascript, json

我将`JSON`对象创建为：

```
var myJsonObject = JSON.stringify(objectString) 
```

如何将另一个项目添加到`myJsonObject`??

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T16:05:40.400

`myJsonObject`现在是一个**字符串，在您将其更改***回*JSON 对象之前，您无法再次向其添加任何内容。

所以你*可以在*技术上做到：

```
var myJsonObject = JSON.parse(myJsonObject); //change to obj
myJsonObject.somethingnew = true; //add something
myJsonObject = JSON.stringify(myJsonObject); //change back to string 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T16:07:22.070

看起来您正在重新序列化字符串而不是解析它。

```
var myJsonObject = JSON.parse(objectString); 
```

然后您可以使用添加新项目

```
myJsonObject['newItemName'] = newValue; 
```

希望这很清楚。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T16:09:29.763

如果你的意思是你想要一个对象数组，你可以这样做：

```
//create an array with the result of your object (see the [] characters)
var myJsonArrayObject = JSON.stringify( [ objectString ] );

//add a new element to the array: parse the JSON, push the new element and stringify again:
JSON.stringify( JSON.parse( myJsonArrayObject ).push( newObject ) ); 
```

# java - 从 doFilter 方法设置 cookie

> ID：14566073
> 
> 赞同：7
> 
> 时间：2013-01-28T16:04:05.073
> 
> 标签：java, cookies, servlet-filters

我有一个带有 doFilter 方法的过滤器类。在 doFilter 方法中，我设置了一个 cookie，如下所示

```
HttpServletResponse httpResp=(HttpServletResponse)servletResponse;
Cookie myCookie=new Cookie("test","");
myCookie.setValue("testValue");
myCookie.setPath("/");
myCookie.setDomain(".mydomain.com");
httpResp.addCookie(myCookie);
filterChain.doFilter(servletRequest,servletResponse); 
```

理想情况下这应该有效吗？在 httpResp(HttpServletResponse) 对象中设置一个 cookie，然后只转发 servletResponse(ServletResponse) 对象

奇怪的是，cookie 是为某些客户端设置的，但对于其他一些客户端，cookie 没有设置。我已经检查了客户端浏览器上的 cookie 设置，看起来没问题。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-05-02T22:03:45.560

您可以使用 HttpServletResponseWrapper 启用过滤器来控制下游过滤器或 servlet 的响应

[https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponseWrapper.html](https://docs.oracle.com/javaee/7/api/javax/servlet/http/HttpServletResponseWrapper.html)

这是对包装器的一个很好的解释：[https ://stackoverflow.com/a/7047298/1676293](https://stackoverflow.com/a/7047298/1676293)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-28T16:24:38.057

这将起作用，除非您需要将代码重构为：

```
filterChain.doFilter(servletRequest,servletResponse);

HttpServletResponse httpResp=(HttpServletResponse)servletResponse; 

Cookie myCookie=new Cookie("test","");
myCookie.setValue("testValue");
myCookie.setPath("/");
myCookie.setDomain(".mydomain.com");
httpResp.addCookie(myCookie); 
```

在 filterChain 调用之后添加 cookie，以便另一个过滤器/servlet 不能做一些冲突的事情。

# android - Android 和 JSR-105 封装 XML 数字签名

> ID：14566074
> 
> 赞同：1
> 
> 时间：2013-01-28T16:04:06.753
> 
> 标签：android, xml, certificate, package

我想知道是否可以在 Android 项目中包含 JSR-105 包？

[http://jcp.org/aboutJava/communityprocess/final/jsr105/index.html](http://jcp.org/aboutJava/communityprocess/final/jsr105/index.html)

如果是，你能解释一下如何吗？

# asp.net - Asp.Net Web 应用程序中自定义 OpenId 提供程序的客户端

> ID：14566080
> 
> 赞同：1
> 
> 时间：2013-01-28T16:04:28.637
> 
> 标签：asp.net, web-applications, client, openid, dotnetopenauth

我对 asp.net 比较陌生，如果这个问题听起来很愚蠢，我很抱歉。

我必须构建一个能够在 OpenId 自定义服务器上登录的 Asp.net Web 应用程序（即不包含在 DotNetOpenAuth 库中）。我正在使用 vs2010 和 .net 框架 4.0。

经过多次搜索，我找到了这些解释它的帖子。

[http://blogs.msdn.com/b/webdev/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/23/plugging-custom-oauth-openid-providers.aspx)

[如何在 ASP.NET MVC4 中使用具有唯一标识符 URL 的 OpenID 提供程序](https://stackoverflow.com/questions/12878441/how-to-use-openid-providers-with-unique-identifier-urls-in-asp-net-mvc4)

[http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx](http://blogs.msdn.com/b/webdev/archive/2012/08/15/oauth-openid-support-for-webforms-mvc-and-webpages.aspx)

所有这些都引用 MVC 和一个名为 /App_Start/AuthConfig.cs 的目录/文件，您必须在其中注册新的提供程序才能使用库中内置的客户端。

通过其他搜索，我了解到此目录在 Asp.net Web 应用程序中不可用。

是否存在在 Asp.net Web 应用程序中实现相同结果的方法/解决方法？

您对如何在我的服务器中实现此类自定义客户端有任何建议/链接吗？

谢谢stmod

* * *

谢谢你的帮助。在您发表评论后，我回到提供者那里要求澄清，但到目前为止，他们只能提供该链接来帮助我。因此，我尝试在 Java 中对其进行管理，并使用 openid4java 库和以下代码进行管理：

```
URL u = new URL("https://logint2.idm.toon.sul.t-online.de/gcp-web/login/10000112/");

Identifier i = new MyIdentifier(); 
*//myIdentifier is my implementation of interface openid4java.discovery.Identifier and returns* "http://specs.openid.net/auth/2.0/identifier_select"

DiscoveryInformation discovered = new DiscoveryInformation(u,i);

AuthRequest authReq = manager.authenticate(discovered, returnToUrl); 
```

使用此代码（以及用于管理响应的其他代码）我可以正常工作。

我现在正在尝试将其应用于我的 dot.net 解决方案。

您能帮我编写让 DotnethOpenauth 与此端点一起工作的代码吗？

我想我必须像在 Java 中那样覆盖 Identifier 类，但我被卡住了。

谢谢 stmod

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T06:43:08.010

为您的 ASP.NET Web 应用程序添加 OpenID 依赖方支持实际上非常简单，并且不需要 AuthConfig.cs 文件。如果您使用 Web 表单，最简单的方法是将 OpenIdLogin 控件拖放到您的 Web 表单上。如果您使用 MVC，只需编写几行代码，您可以查看[从 SourceForge 下载的 dotnetopenauth .zip 下载](http://sourceforge.net/projects/dnoa/)中包含的 OpenIdRelyingPartyMvc 示例，了解如何完成。

# html - 如何摆脱firefox图像边框

> ID：14566081
> 
> 赞同：0
> 
> 时间：2013-01-28T16:04:30.530
> 
> 标签：html, css, image, firefox

我最近在我的网站上添加了一张图片，该图片被包裹在一个锚标记中，如下所示： .

问题是，这张图片有边框，但只在 Firefox 中；chrome 中没有显示边框。我希望边界消失。我在 css 中为 a 和 img 标签设置了以下内容：

```
text-decoration:none;
border-style:none;
border:none;
outline:none;
box-shadow: 0;
-moz-box-shadow:0;
background:none;
color:white; 
```

图像是白色背景上的一个灰色小图标，我在 gimp 中仔细检查过，图像周围肯定没有边框。那么，我错过了什么？它来自哪里？为什么它只出现在Firefox中？我如何让它消失？

火狐版本是 17.0.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:05:11.213

**那么，我错过了什么？**

90 年代和 00 年代。

**它来自哪里？**

它来自浏览器的默认样式表。

**为什么它只出现在Firefox中？**

浏览器似乎对是否在链接图像周围显示边框制定了自己的规则。

**我如何让它消失？**

```
a img {
    border: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:17:09.137

令人难以置信的是，我找到了答案——原来我放大了，我没有注意到，因为它只是放大了一个。直到我将页面的全部内容粘贴到 jsfiddle 中，我才注意到大小略有不同。

显然，当 Firefox 放大时，它会为图像添加边框。无法想象为什么，但一旦我缩小边界就消失了。问题解决了，我猜。真希望我能早点找到这个 - 它已经困扰我好几天了！

# oracle - 休眠：java.sql.BatchUpdateException：不可变视图上的 ORA-01732

> ID：14566085
> 
> 赞同：0
> 
> 时间：2013-01-28T16:04:43.937
> 
> 标签：oracle, hibernate

首先，请参阅 Hibernate 映射摘录：Oracle DB TABLE 中有可变的 ParentObjects 引用 Oracle DB VIEW 中的不可变 ChildObjects：

1）一个ParentObject里面有一组ChildObjectInView，定义为不可变，没有级联：

```
<class name="ParentObject" table="t_parentobject">
...
    <set name="childObjectsInView" cascade="none" lazy="true" mutable="false">
        <key column="coivId" />
        <one-to-many class="com.it.ChildObjectInView"/>
    </set>      
</class> 
```

2) ChildObjectInView 定义为

```
<class name="ChildObjectInView" table="view_coiv" mutable="false" lazy="true">
...
    <many-to-one name="parentObject" column="parentObjectId" update="false" insert="false" class="com.it.ParentObject" not-null="true" outer-join="true">
    </many-to-one>

</class> 
```

* * *

调用 com.it.TestServiceImpl。**saveParentObject()**导致 Oracle 错误ORA-01732：尽管在休眠映射中设置**了 mutable="false" 属性，但此视图上的数据操作操作不合法。**为什么会出现这个错误？

```
com.it.TestBean|could not delete collection: [com.it.ParentObject.childObjectsInView#398500]
org.hibernate.exception.SQLGrammarException: could not delete collection: [com.it.ParentObject.childObjectsInView#398500]
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:67)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:43)
        at org.hibernate.persister.collection.AbstractCollectionPersister.remove(AbstractCollectionPersister.java:1071)
        at org.hibernate.action.CollectionRemoveAction.execute(CollectionRemoveAction.java:28)
        at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:248)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:232)
        at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:141)
        at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
        at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
        at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
        at com.it.TestServiceImpl.saveParentObject(TestServiceImpl.java:418)

Caused by: java.sql.BatchUpdateException: ORA-01732: data manipulation operation not legal on this view
        at oracle.jdbc.driver.OraclePreparedStatement.executeBatch(OraclePreparedStatement.java:10296)
        at oracle.jdbc.driver.OracleStatementWrapper.executeBatch(OracleStatementWrapper.java:216)
        at org.apache.commons.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
        at org.apache.commons.dbcp.DelegatingStatement.executeBatch(DelegatingStatement.java:297)
        at org.hibernate.jdbc.BatchingBatcher.doExecuteBatch(BatchingBatcher.java:48)
        at org.hibernate.jdbc.BatchingBatcher.addToBatch(BatchingBatcher.java:34)
        at org.hibernate.persister.collection.AbstractCollectionPersister.remove(AbstractCollectionPersister.java:1048)
        ... 69 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:16:27.170

I finally found out by myself that there were cases in that a `ParentObject` was newly created with the set `ParentObject.childObjectsInView` being set to `null`.

Saving this newly created `ParentObject` Hibernate tried to run a `DELETE FROM <view> WHERE id=<objectid>`. This statement is like a reset of all objects inside `ParentObject.childObjectsInView`.

I think this **default behavior of Hibernate is wrong at this place, a bug report should be opened**: Hibernate has the information that the child is immutable so any manipulating SQL should be suppressed.

**Workaround:** Assure that an empty collection is always set to `ParentObject.childObjectsInView` (instead of `null`).

# google-app-engine - GAE 上大量 URL 获取请求的经济高效架构

> ID：14566086
> 
> 赞同：0
> 
> 时间：2013-01-28T16:04:44.617
> 
> 标签：google-app-engine

在 GAE 上处理大量并发 URL 获取请求的最具成本效益的架构是什么？（Python）

我说的是数十万并发 API 请求。

使用任务队列和同步 URL Fetch 请求来做这件事是行不通的，因为等待响应的延迟太高，并且会启动很多实例。

使用异步 URL 获取我有一个问题，即内存太小，无法处理一个实例上的响应，因此它崩溃了。

在 appengine 上，通用的成本效益架构如何？非常感谢任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:59:39.787

我也有同样的想法。我启动了一个后端并通过异步写入和禁用上下文缓存和内存缓存来改进我的内存。此外，后端可能是您在数千次提取等操作中所需要的，因为您可以管理它可以拥有多少内存，并且您不受任务队列的 10 分钟限制的影响。

我不知道它是否有帮助，但我的问题在[这里](https://stackoverflow.com/questions/14439626/python-gae-script-loop-consuming-much-memory)描述并解决了。

# wpf - 自定义 DependencyProperty 不能与视图模型绑定？

> ID：14566094
> 
> 赞同：0
> 
> 时间：2013-01-28T16:05:25.513
> 
> 标签：wpf, viewmodel, dependency-properties

考虑这个附加属性：

```
public static readonly DependencyProperty TestImageProperty =
    DependencyProperty.RegisterAttached("TestImage",
    typeof(BitmapSource), typeof(TestView), new FrameworkPropertyMetadata(null,
    FrameworkPropertyMetadataOptions.AffectsRender));

public static void SetTestImage(UIElement element, BitmapSource value)
{
    element.SetValue(TestImageProperty, value);
}

public static BitmapSource GetTestImage(UIElement element)
{
    return (BitmapSource)element.GetValue(TestImageProperty);
}

public BitmapSource TestImage
{
    get
    {
        return GetTestImage(this);
    }
    set
    {
        SetTestImage(this, value);
    }
} 
```

和`XAML`：

```
<common:UserControlBase x:Class="MyViews.TestView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:views="clr-namespace:MyViews"
    xmlns:common="clr-namespace:MyCommon.Common;assembly=MyCommon.Common"
    xmlns:mefed="clr-namespace:MEFedMVVM.ViewModelLocator;assembly=MEFedMVVM.WPF"
    mefed:ViewModelLocator.SharedViewModel="MyViewModel"
    views:TestView.TestImage="{Binding TestImage}" 
```

因此，我将视图的`TestImage`属性绑定到视图模型的`TestImage`属性！然后，从代码隐藏我更新属性：

```
this.TestImage = image; 
```

**这不会触发我的视图模型中的设置器。**

这是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:30:22.507

`Binding`开启模式将`TwoWay`解决问题。

# c++ - 嵌套类上的 RTTI，VS Bug？

> ID：14566095
> 
> 赞同：8
> 
> 时间：2013-01-28T16:05:29.590
> 
> 标签：c++, visual-studio-2010

以下代码输出：

`struct Property<int>::IValue`

但我希望它输出：

`struct Property<int>::Value<int>`

代码：

```
struct IProperty
{
    virtual ~IProperty() = 0;
};

IProperty::~IProperty(){}

template<typename T>
struct Property : IProperty
{
    struct IValue
    {
        virtual ~IValue() = 0;
    };

    template<typename Q>
    struct Value : IValue
    {
        Q thing;
    };

    Property() : m_pValue(new Value<T>()){}
    std::shared_ptr<IValue> m_pValue;
};

template<typename T>
Property<T>::IValue::~IValue(){}

int main()
{
    std::unique_ptr<IProperty> p(new Property<int>);

    std::cout << typeid(*static_cast<Property<int>&>(*p).m_pValue).name() << '\n';
} 
```

如果`IValue`和`Value`被移出`Property`以便它们不再是嵌套类，我会得到我期望的结果。这是 VS Bug 还是预期的行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T20:10:14.833

这绝对是 Visual C++ 编译器错误。由于某些奇怪的原因，编译器无法确定`Property<T>::IValue`取消引用`shared_ptr`是多态基类，并使用静态类型信息`typeid`而不是运行时类型信息作为表达式。

重现该错误的最少代码：

```
template <class T> struct Property
{
   struct IValue
   {
      void f() {}
      virtual ~IValue() = 0 {}
   };

   struct Value: IValue {};

   Property(): m_pValue(new Value())
   {
      // typeid inside class works as expected
      std::cout << "Inside class: " << typeid(*m_pValue).name() << std::endl;
   }

   // If changed to unique_ptr typeid will work as expected
   // But if changed to raw pointer the bug remains!
   std::shared_ptr<IValue> m_pValue;
};

int main()
{
   Property<int> p;
   // If next line uncommented typeid will work as expected
   //p.m_pValue->f();
   std::cout << "Outside class: " << typeid(*p.m_pValue).name() << std::endl;
} 
```

我对这个示例进行了一些尝试，发现它`typeid`开始按预期工作并显示运行时类型名称，如果之前调用了来自指向对象的某些函数，`typeid`或者如果`shared_ptr`被替换为`unique_ptr`. 有趣，但替换`shared_ptr<IValue>`为`IValue*`仍然会重现错误！

**实际输出：**

```
内部类：struct Property<int>::Value
外部类：struct Property<int>::IValue

```

**预期（正确）输出：**

```
内部类：struct Property<int>::Value
外部类：struct Property<int>::Value

```

从汇编程序列表中可以清楚地看出这确实是编译器问题：

`typeid`从`Property`ctor 调用会产生诚实的调用`__RTtypeid`：

```
; 225 : std::cout << typeid(*m_pValue).name() << std::endl;
  ... irrelevant code skipped ...
; __type_info_root_node
  push  OFFSET ?__type_info_root_node@@3U__type_info_node@@A
  mov ecx, DWORD PTR _this$[ebp]
; std::tr1::shared_ptr<Property<int>::IValue>::operator*
  call ??D?$shared_ptr@UIValue@?...<skipped>
  push eax
  call ___RTtypeid 
```

`typeid`调用外部生成静态`IValue`类型信息：

```
; 237  :    std::cout << typeid(*p.m_pValue).name() << std::endl;
  ... irrelevant code skipped ...
; __type_info_root_node
  push  OFFSET ?__type_info_root_node@@3U__type_info_node@@A
  mov ecx, OFFSET ??_R0?AUIValue@?$Property@H@@@8 
```

另请注意，VS2008 中存在相同的错误，因此它是旧时行为。

# sql-server - 如何仅获取 SQL Server 中的数值（ISNUMERIC 未给出正确值）

> ID：14566100
> 
> 赞同：1
> 
> 时间：2013-01-28T16:05:41.830
> 
> 标签：sql-server, sql-server-2008, sql-server-2005

我有一个名为“testTable”的表，它有两列，“id”是自动递增的，“someValue”。

'someValue' 列中包含的数据是：`12, 1.2, .4, 1d4, +, -, .`

我只想选择数值。但是当我使用以下查询时：

```
SELECT someValue, ISNUMERIC(someValue) 
FROM testTable; 
```

所有的价值观都是真实的。对于查询：

```
SELECT * FROM testTable 
WHERE ISNUMERIC(someValue) = 1; 
```

所有的值都被返回。

我只是想要`12`和。`1.2``.4`

我怎样才能做到这一点？

更新：

该列的数据类型`someValue`是`varchar(50)`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:14:42.780

设置：

```
CREATE TABLE SomeTable
(
  ID INT,
  Value NVARCHAR(250)
)

INSERT INTO SomeTable (ID, Value) VALUES (1, '12')
INSERT INTO SomeTable (ID, Value) VALUES (2, '1.2')
INSERT INTO SomeTable (ID, Value) VALUES (3, '.4')
INSERT INTO SomeTable (ID, Value) VALUES (4, '1d4')
INSERT INTO SomeTable (ID, Value) VALUES (5, '+')
INSERT INTO SomeTable (ID, Value) VALUES (6, '-')
INSERT INTO SomeTable (ID, Value) VALUES (7, '.') 
```

询问：

```
SELECT * FROM SomeTable WHERE ISNUMERIC(Value+'d0')=1 
```

结果：

```
ID  VALUE
1   12
2   1.2
3   .4 
```

# delphi - Delphi：WebBrowser“ActiveX 控件”错误

> ID：14566102
> 
> 赞同：1
> 
> 时间：2013-01-28T16:05:46.890
> 
> 标签：delphi, browser, activex

在某些网站上，我使用 导航`TWebBrowser`，加载网站后，我得到以下信息：

> 一个或多个 ActiveX 控件无法显示，因为：
> 
> 1) 您当前的安全设置禁止在此页面上运行 ActiveX 控件或 2) 您已阻止其中一个控件的发布者
> 
> 因此，页面可能无法正确显示

我不在乎页面是否正确显示，我只是希望它在没有此消息的情况下显示！

如何禁用此功能？
我尝试暂时启用 Internet 选项中的所有内容，但没有成功，消息仍然出现。

# java - 在对象中获取空指针异常

> ID：14566105
> 
> 赞同：0
> 
> 时间：2013-01-28T16:05:54.333
> 
> 标签：java, object, arraylist

我可以获取我的数据，因为我在第 66 行遇到错误。但错误说我得到一个空值。尽管我已经查看了代码，但我认为即便如此，它也能获得正确的值。我尝试使用我专门为它制作的方法。但在那之后它不起作用，我使用了一种有效的方法，我用它来登录。

```
label_KontoId.setText(myPrivate.getAccountName()); 
```

我的班级看起来像这样：在我的主要课程中，我得到了这段代码

```
public void SetId(String AccountId, String kode) {
    AccountName = AccountId;
    Password =  kode;
}

public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                PrivatekunderGUI frame = new PrivatekunderGUI();
                frame.setVisible(true);
                myPrivate = PR.LogindCheck(AccountName, Password);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });

    label_KontoId.setText(myPrivate.getAccountName());
} 
```

这不是所有的代码，只是必要的。为 GUI 生成其他代码：

```
public class Private extends Customers {

    private String AccountName;
    private String Password;
    private int Balance;
    private int AccountId;

    public Private(String Name, int Number, int Zip, String Address, int Phone,
            int Balance, int AccountId, String AccountName, String Password) {
        super(Name, Number, Zip, Address, Phone);
        this.AccountId = AccountId;
        this.Balance = Balance;
        this.AccountName = AccountName;
        this.Password = Password;
    }

    public String getAccountName() {
        return AccountName;
    }

    public String getPassword() {
        return Password;
    }

    public int getBalance() {
        return Balance;
    }

    public int getAccountId() {
        return AccountId;
    }

    public void setAccountName(String accountName) {
        AccountName = accountName;
    }

    public void setPassword(String password) {
        Password = password;
    }

    public void setBalance(int balance) {
        Balance = balance;
    }

    public void setAccountId(int accountId) {
        AccountId = accountId;
    }

    void account() {
    }

    @Override
    public String toString() {
        return "Private [AccountName=" + AccountName + ", Password=" + Password
                + ", Balance=" + Balance + ", AccountId=" + AccountId
                + ", getName()=" + getName() + ", getNumber()=" + getNumber()
                + ", getZip()=" + getZip() + ", getAddress()=" + getAddress()
                + ", getPhone()=" + getPhone() + "]";
    }
} 
```

我的`PrivateRegistre`样子是这样的：

```
public class PrivateRegistre {
    private ArrayList<Private> privater = new ArrayList<>();

    public PrivateRegistre() {
        gem("Driton", 32233223, 2400, "Hallovej 54", 32233223, 543442, 1,
                "Driton", "1234");
    }

    public void gem(String Name, int Number, int Zip, String Address,
            int Phone, int Balance, int AccountId, String AccountName,
            String Password) {
        privater.add(new Private(Name, Number, Zip, Address, Phone, Balance,
                AccountId, AccountName, Password));
    }

    public ArrayList<Private> hentalleprivatekunder() {

        return privater;
    }

    public Private findkunde(int AccountId) {
        for (Private privat : privater) {
            if (privat.getAccountId() == AccountId) {
                return privat;
            }
        }
        return null;
    }

    public Private LogindCheck(String AccountName, String Password) {
        for (Private privat : privater) {
            if (privat.getAccountName().equals(AccountName)
                    && privat.getPassword().equals(Password)) {
                return privat;
            }
        }
        return null;
    }

    public boolean sletprivatekunde(int AccountId) {
        Private privat = findkunde(AccountId);
        if (privat == null)
            return false;

        privater.remove(privat);
        return true;
    }

    @Override
    public String toString() {
        return "PrivateRegistre [Private Kunder=" + privater + "]";
    }

    public Private HentLogindOplysninger(String AccountName) {
        for (Private privat : privater) {
            if (privat.getAccountName().equals(AccountName)) {
                return privat;
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:11:39.510

因为你正在返回`null`你的方法

```
 findkunde(...)
    HentLogindOplysninger(...)
    LogindCheck(...) 
```

你不应该返回`null`- 返回一些有用的东西，如果你没有返回更好`void`的方法返回类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:11:22.473

`myPrivate = PR.LogindCheck(AccountName, Password);`在这里你得到了`null`因为你正在返回`null`方法

```
public Private LogindCheck(String AccountName, String Password) 
```

&也在

```
 public Private findkunde(int AccountId) 
```

只需将`return null`语句替换为有意义且可以分配然后使用而不会导致的内容`NullPointerException`；

# linq - 将 Linq 查询与 AND 或 Ors 组合

> ID：14566108
> 
> 赞同：1
> 
> 时间：2013-01-28T16:05:57.310
> 
> 标签：linq, expression-trees

我有一个问题，如下图所示：

```
var customers = from c in ctx.Customers; 
```

从 UI 动态地，我可以传递过滤器列表 场景 1。“AND”

```
groupOp = "AND"
filter 1: where c.ID == 1
filter 2: where c.Name == 'XYZ' 
```

我需要的是一种组合方式，因此最终结果是：

```
var filterList = from c in ctx.Customers
                 where c.ID == 1
                 && c.Name == 'XYZ' 
```

场景 2.“或”

同样的问题

var customers = from c in ctx.Customers;

从 UI 动态地，我可以传递过滤器列表

```
groupOp = "OR"
filter 1: where c.Name == 'ABC'
filter 2: where c.Name == 'XYZ' 
```

我需要的是一种组合方式，因此最终结果是：

```
var filterList = from c in ctx.Customers
                 where c.Name == 'ABC'
                 || c.Name == 'XYZ' 
```

如何将 IQueryable 与 AND 或 OR 动态组合。目前我不需要结合 AND 和 OR，所以它只是 AND 或 OR。任何帮助都非常感谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:11:18.080

使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)，即

```
var predicate = PredicateBuilder.False<Customer>();
foreach (var filter in filters)
{
    predicate = predicate.Or(filter);
}
return ctx.Customers.Where(predicate); 
```

如果您不想在代码中手动构建所有过滤器表达式，您可能会受益于使用[Dynamic Linq](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)库从字符串构建表达式。

# eclipse - 在 Eclipse 中设置 JBoss v5.0

> ID：14566109
> 
> 赞同：1
> 
> 时间：2013-01-28T16:06:00.170
> 
> 标签：eclipse, jboss, jms

我正在尝试做一些 JMS 教程。他们中的许多人似乎使用我在标题中提到的服务器。它位于“定义新服务器”窗口的 JBoss 文件夹中。比如这里的教程：http: [//aalaapa.com/img/eclipsejbossserver5.JPG](http://aalaapa.com/img/eclipsejbossserver5.JPG)

问题是，在“定义新服务器”窗口中，我必须选择的唯一文件夹是 Apache、Basic、JBoss Community 和 JBoss Enterprise Middleware。我需要一些附加插件吗？

哦，我正在使用 Eclipse。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:52:32.783

如果您单击“下载其他服务器适配器”，您应该有一个对话框，您可以在其中安装适当的服务器连接器（在您的情况下，它将是“JbossAS 工具”）。但是我强烈建议使用 JBoss 7，因为该版本是完全认证的 EE6 兼容应用服务器

编辑：如果您有菜单点“JBoss 社区”，那么很可能已经安装了 JBoss 工具。因此，只需使用其中一个连接器（应该包括 3.2 到 7.1）就可以了。

# regex - 为邮政编码列表创建正则表达式时遇到问题

> ID：14566111
> 
> 赞同：1
> 
> 时间：2013-01-28T16:06:03.210
> 
> 标签：regex

我需要测试 textarea 中的邮政编码列表是否**只有**5 位邮政编码。在正常情况下，列表如下所示：

```
56228, 56243, 55324, 55325, 55329, 55355, 55389 
```

我需要找出文本区域中除了上述模式之外是否还有其他内容。可以有任意数量的单个邮政编码，但我需要确保没有其他任何东西。（我想我还需要能够突出显示文本区域中的非法匹配，但是当我到达它时我会越过那座桥）。

我从这个正则表达式开始：

```
^\d{5},?\s?$+ 
```

我对构建正则表达式非常陌生，但据我了解，上面应该匹配任何 5 位数字，并且 5 位数字之后的逗号和空格可能存在也可能不存在。

在线正则表达式测试器（我已经尝试了几个）没有找到任何匹配项，无论我有一个合法的邮政编码列表还是一个包含“非法”字符的列表。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:08:07.200

这应该适合您的需求：

```
^([, ]*\d{5})+[, ]*$ 
```

# java - 将列表的第一个元素移动到末尾

> ID：14566118
> 
> 赞同：8
> 
> 时间：2013-01-28T16:06:25.780
> 
> 标签：java, collections

有什么聪明的方法吗？我最好的方法是：

```
object next = list.get(0) ;
list.remove(0) ;
list.add(next) ; 
```

如果没有，是否有任何类型的收藏可以使这更容易？我不喜欢需要一个临时对象来存储我想要移动的元素..

编辑：我已经用我的代码测试了下面列出的命题：

```
 long starttime = System.nanoTime() ;
    for (int i = 0; i < ntours; i++){
        profit += retrieveGroupsWillPlay(groups, ngroups, limit) ;
    }
    long endtime = System.nanoTime() ;
    System.out.println("Timing: " + (endtime - starttime)) ;
    System.out.println("Profit: " + profit) ; 
```

这是结果：（利润：15，确保结果适合我的代码）代码：

```
private static int retrieveGroupsWillPlay(ArrayList<Integer> queue,int ngroups, int limit) { 
    int peopleWillPlay = 0 ;
    for (int i = 0; i < ngroups; i++){
        int nextGroup = queue.get(0) ;
        if(limit >= peopleWillPlay + nextGroup) {
            peopleWillPlay += nextGroup ;
            queue.add(nextGroup) ;
            queue.remove(0) ;
        }
        else break ;
    }
    return peopleWillPlay ;
} 
```

结果：

```
Timing: 23326
Profit: 15
Timing: 22171
Profit: 15
Timing: 22156
Profit: 15
Timing: 22944
Profit: 15
Timing: 22240
Profit: 15
Timing: 21769
Profit: 15
Timing: 21866
Profit: 15
Timing: 22341
Profit: 15
Timing: 24049
Profit: 15
Timing: 22420
Profit: 15 
```

代码：

```
private static int retrieveGroupsWillPlay(ArrayList<Integer> queue,int ngroups, int limit) { 
    int peopleWillPlay = 0 ;
    for (int i = 0; i < ngroups; i++){
        int nextGroup = queue.get(0) ;
        if(limit >= peopleWillPlay + nextGroup) {
            peopleWillPlay += nextGroup ;
            Collections.rotate(queue, -1) ;
        }
        else break ;
    }
    return peopleWillPlay ;
} 
```

结果：

```
Timing: 92101
Profit: 15
Timing: 87137
Profit: 15
Timing: 84531
Profit: 15
Timing: 105919
Profit: 15
Timing: 77019
Profit: 15
Timing: 84805
Profit: 15
Timing: 93393
Profit: 15
Timing: 77079
Profit: 15
Timing: 84315
Profit: 15
Timing: 107002
Profit: 15 
```

代码：

```
private static int retrieveGroupsWillPlay(ArrayList<Integer> queue,int ngroups, int limit) { 
    int peopleWillPlay = 0 ;
    for (int i = 0; i < ngroups; i++){
        int nextGroup = queue.get(0) ;
        if(limit >= peopleWillPlay + nextGroup) {
            peopleWillPlay += nextGroup ;
            queue.add(queue.remove(0)) ;
        }
        else break ;
    }
    return peopleWillPlay ;
} 
```

结果：

```
Timing: 28079
Profit: 15
Timing: 28994
Profit: 15
Timing: 29525
Profit: 15
Timing: 22240
Profit: 15
Timing: 38326
Profit: 15
Timing: 33742
Profit: 15
Timing: 21500
Profit: 15
Timing: 22714
Profit: 15
Timing: 20939
Profit: 15
Timing: 30157
Profit: 15 
```

代码：

```
private static int retrieveGroupsWillPlay(LinkedList<Integer> queue,int ngroups, int limit) { 
    int peopleWillPlay = 0 ;
    for (int i = 0; i < ngroups; i++){
        int nextGroup = queue.get(0) ;
        if(limit >= peopleWillPlay + nextGroup) {
            peopleWillPlay += nextGroup ;
            queue.addLast(queue.removeFirst()) ;
        }
        else break ;
    }
    return peopleWillPlay ;
} 
```

结果：

```
Timing: 31104
Profit: 15
Timing: 42332
Profit: 15
Timing: 36443
Profit: 15
Timing: 31840
Profit: 15
Timing: 31387
Profit: 15
Timing: 32102
Profit: 15
Timing: 31347
Profit: 15
Timing: 30666
Profit: 15
Timing: 32781
Profit: 15
Timing: 32464
Profit: 15 
```

代码：

```
private static int retrieveGroupsWillPlay(LinkedList<Integer> queue,int ngroups, int limit) { 
    int peopleWillPlay = 0 ;
    for (int i = 0; i < ngroups; i++){
        int nextGroup = queue.get(0) ;
        if(limit >= peopleWillPlay + nextGroup) {
            peopleWillPlay += nextGroup ;
            queue.offer(queue.poll()) ;
        }
        else break ;
    }
    return peopleWillPlay ;
} 
```

结果：

```
Timing: 35389
Profit: 15
Timing: 34849
Profit: 15
Timing: 43606
Profit: 15
Timing: 41796
Profit: 15
Timing: 51122
Profit: 15
Timing: 59302
Profit: 15
Timing: 32340
Profit: 15
Timing: 35654
Profit: 15
Timing: 34586
Profit: 15
Timing: 35479
Profit: 15 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-28T16:09:22.783

您可以`Collections.rotate`为此使用：

```
Collections.rotate(list, -1); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-28T16:13:52.327

我不确定你想做什么，但这里是：

如果您使用类似 的东西`ArrayList`，您可以执行以下操作：

```
list.add(list.remove(0)); 
```

请记住，`remove`从 ArrayList 以线性时间运行，即`O(N)`，因此效率极低。

如果您可以选择 List 的类型，您可能需要一个`LinkedList`实现`Dequeue`接口的 ，因此它允许您执行以下操作：

```
list.offer(list.poll()); 
```

`offer`和都是`poll`在恒定时间内完成的操作。

如果您想使用`Collections`该类的内置函数，您可以按照@dasblinkenlight 的建议进行操作并使用`Collections.rotate(list, -1);`（为了完整起见，在此处添加）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-28T16:10:13.177

您不需要临时变量，只需编写：

```
list.add(list.remove(0)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T16:10:10.853

你想要一个[dequeu](http://en.wikipedia.org/wiki/Deque)（双端队列的缩写）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-26T16:25:30.597

显而易见的答案是：

`list.add(list.remove(0))`

我相信这是最优雅的方式。您也可以使用

`Collections.swap(list.get(0), list.get(list.size()-1))`

但是，这将改变另一个元素（最后一个）的位置。您也可以使用`Collections.rotate(list, -1)`，但是旋转列表可能意味着移动其所有元素（我猜这取决于 List 实现），这可能效率不高。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T16:12:32.027

您还可以使用[**LinkedList#addLast()**](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#addLast%28E%29)方法。

```
list.add(next) ;     
list.addLast(list.removeFirst()); 
```

# python - 将 HEX STRING 转换为二进制和右移 22 并使用 0F

> ID：14566122
> 
> 赞同：1
> 
> 时间：2013-01-28T16:06:41.173
> 
> 标签：python, binary, hex

```
print(bin(int("3478e392", 16))[0:] >> 22) 
```

> 转换为二进制是 3478e392 = 00110100011110001110001110010010

有什么方法可以将 HEX STRING 转换为二进制，右移 22，然后逻辑和 0F？结果应返回十进制 1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:08:58.420

试试这个：

```
>>> print ((int("3478e392",16)>>22)&0xf)
1 
```

# php - 在ios中获取json响应而不是php

> ID：14566123
> 
> 赞同：0
> 
> 时间：2013-01-28T16:06:41.430
> 
> 标签：php, ios, json

我目前正在使用一种非常低效的方式从 mysql 中检索数据。我编写了非常小的脚本来测试功能（我对 ios 开发非常陌生）。这是我主要关心的脚本的结尾：

```
$fp = fopen('results.json', 'w');
fwrite($fp, json_encode($articles));
fclose($fp); 
```

所以我将结果从查询更改为 json，然后使用 .json 将其写入文件，以便我使用 Objective-c 读取它。它可以工作，但我可以看到这是一个问题（每次创建文件并在查询数据库时删除它们）。这是 ios 的结束：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData* data = [NSData dataWithContentsOfURL:
                    [NSURL URLWithString: @"http://link/results.json"]];

    NSError* error;

    eventsArray = [NSJSONSerialization JSONObjectWithData:data
                                             options:kNilOptions
                                               error:&error];

    dispatch_async(dispatch_get_main_queue(), ^{
        [self.tableView reloadData];
    });
}); 
```

如何让我的 php 脚本返回 json 而不是将其写入文件，然后使用 Objective-c 读取它？我对obj-c部分感兴趣，所以请尽可能强调。

非常感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:08:11.560

是否回显 json_encode($articles); 帮你？

# php - PHP：创建会话时是否可以设置域？

> ID：14566124
> 
> 赞同：0
> 
> 时间：2013-01-28T16:06:42.697
> 
> 标签：php

如果我运行此代码，则在 mydomain.com 上：

```
session_start();
$_SESSION['close_label'] = '1'; 
```

然后在我的浏览器中查看会话 cookie，它说：

> 域：.mydomain.com

有没有可能说：

> 域：.someotherdomain.com

或不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:13:57.690

您不能为完全不同的域设置 cookie。那将是一场安全噩梦。您可以为当前域和/或它的子域设置 cookie。就这样。

# windows - Application Verifier 打破了非常简单的 USER32 程序

> ID：14566129
> 
> 赞同：0
> 
> 时间：2013-01-28T16:07:02.047
> 
> 标签：windows, winapi, memory, heap-corruption, memory-corruption

我发现 Microsoft Application Verifier 正在以一种意想不到的方式改变行为。我有一个对系统 EDIT 控件执行[超类](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633569%28v=vs.85%29.aspx#winproc_superclassing)化的程序。当我使用 Basics/Heaps/UseLFHGuardPages=TRUE 在 Application Verifier 下运行它时（因为我在使用 Low Frag Heap 的 Windows 7 上），EDIT WindowProc 在 WM_NCCREATE 上返回 0（FALSE），从而阻止创建控件。这会破坏整个应用程序，因为它无法继续。

这是一个极简源，可用于在 Application Verifier 上重现问题：

```
#include <windows.h>
#include <stdio.h>

LRESULT CALLBACK DialogWindowProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam) {
    return DefWindowProc(hWnd, Msg, wParam, lParam);
}

static WNDCLASS wcEDIT;

LRESULT CALLBACK EditWindowProc(HWND hWnd, UINT Msg, WPARAM wParam, LPARAM lParam) {
    LRESULT result = CallWindowProc(wcEDIT.lpfnWndProc, hWnd, Msg, wParam, lParam);
    if (Msg == WM_NCCREATE && result == 0) {
        puts("UNEXPECTED: WindowProc of EDIT returned 0 (FALSE) on WM_NCCREATE");
    }
    return result;
}

int APIENTRY WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {

    WNDCLASS wcDialog;
    memset(&wcDialog, 0, sizeof wcDialog);
    wcDialog.hInstance = hInstance;
    wcDialog.lpszClassName = "MyDialog";
    wcDialog.lpfnWndProc = DialogWindowProc;
    wcDialog.style = CS_DBLCLKS;

    if (RegisterClass(&wcDialog) == 0) {
        printf("Unable to register class %s\n", wcDialog.lpszClassName);
        return 0;
    }

    HWND hForm;
    {
        const char *lpClassName = wcDialog.lpszClassName;
        const char *lpWindowName = NULL;
        DWORD dwStyle = WS_MAXIMIZEBOX|WS_MINIMIZEBOX|WS_THICKFRAME|WS_SYSMENU|WS_DLGFRAME|WS_BORDER|WS_CLIPCHILDREN|WS_CLIPSIBLINGS;
        DWORD dwExStyle = 0;
        int X = 0;
        int Y = 0;
        int nWidth = 320;
        int nHeight = 240;
        HWND hWndParent = 0;
        HMENU hMenu = 0;
        LPVOID lpParam = NULL;

        hForm = CreateWindowEx(dwExStyle, lpClassName, lpWindowName, dwStyle, X, Y, nWidth, nHeight, hWndParent, hMenu, hInstance, lpParam);
        if (hForm == 0) {
            printf("Unable to create window of class %s\n", wcDialog.lpszClassName);
            return 0;
        }
    }

    memset(&wcEDIT, 0, sizeof wcDialog);
    wcEDIT.lpszClassName = "EDIT";
    if (!GetClassInfo(NULL, wcEDIT.lpszClassName, &wcEDIT)) {
        printf("Unable to get class info of %s\n", wcEDIT.lpszClassName);
        return 0;
    }

    WNDCLASS wcMyEDIT;
    memcpy(&wcMyEDIT, &wcEDIT, sizeof WNDCLASS);
    wcMyEDIT.hInstance = hInstance;
    wcMyEDIT.lpszClassName = "MyEDIT";
    wcMyEDIT.lpfnWndProc = EditWindowProc;
    wcMyEDIT.style |= CS_DBLCLKS|CS_HREDRAW|CS_VREDRAW;

    if (RegisterClass(&wcMyEDIT) == 0) {
        printf("Unable to register class %s\n", wcMyEDIT.lpszClassName);
        return 0; 
    }

    HWND hEdit;
    {
        const char *lpClassName = wcMyEDIT.lpszClassName;
        const char *lpWindowName = NULL;
        DWORD dwStyle = WS_CLIPSIBLINGS|WS_CHILD|ES_AUTOVSCROLL|ES_AUTOHSCROLL;
        DWORD dwExStyle = WS_EX_CLIENTEDGE;
        int X = 0;
        int Y = 0;
        int nWidth = 121;
        int nHeight = 21;
        HWND hWndParent = hForm;
        HMENU hMenu = 0;
        LPVOID lpParam = NULL;

        hEdit = CreateWindowEx(dwExStyle, lpClassName, lpWindowName, dwStyle, X, Y, nWidth, nHeight, hWndParent, hMenu, hInstance, lpParam);
        if (hEdit == 0) {
            printf("Unable to create window of class %s\n", wcMyEDIT.lpszClassName);
            return 0;
        }
    }

    puts("success");
    return 0;
} 
```

# javascript - javascript for循环创建太多表

> ID：14566131
> 
> 赞同：-2
> 
> 时间：2013-01-28T16:07:03.037
> 
> 标签：javascript, html, css

我制作的脚本循环并根据用户输入创建一个表，如果 super=2 那么应该有 2 个表在表中输出不同的数字，它工作得很好，除了它应该打印第一个表，然后当它做第二个时，它也会重印第一个..有什么想法吗？

代码：

```
<html>
<head>

<script type="text/javascript">
function createTable()
{
var num_ports = document.getElementById('ports').value;
var num_super = document.getElementById('super').value;
var num_rows = document.getElementById('rows').value;
var num_cols = document.getElementById('cols').value;
var tbody = '';
var colStart = num_cols / num_super;
var y = 1;
for( var i = 1; i <= num_super; i++){
    var theader = '<div style="margin:0 auto;"><table border="1" style="border:1px solid black; float:left;">\n';
        for(u = 1; u <= num_rows; u++){
          tbody += '<tr>';
            for( var j = 1; j <= colStart; j++)
            {
            tbody += '<td style="width:80px; height:70px;">';
            tbody += '<sub style="float:right; position:relative; top:24px; z-index:11;  ">' + y + '</sub>';
            tbody += '</td>';
            y++;
            }
    tbody += '</tr>\n';
}
var tfooter = '</table></div>';
document.getElementById('wrapper').innerHTML += theader + tbody + tfooter;
}
}
</script>
</head>

<body>
<form name="tablegen">
<label>Ports: <input type="text" name="ports" id="ports"/></label><br />
<label>Super Columns: <input type="text" name="super" id="super"/></label><br />
<label>Rows: <input type="text" name="rows" id="rows"/></label><br />
<label>Columns: <input type="text" name="cols" id="cols"/></label><br/>
<input name="generate" type="button" value="Create Table!" onclick='createTable();'/>
</form>

<div id="wrapper"></div>
</body>
</html> 
```

我应该是什么样子：

![应该看起来像](../Images/526ff6c3763b5c1624b817a50c127c12.png)

它的样子：

![坏表](../Images/ad8ae845880824f32982c3eefab6217a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:14:11.350

就像评论说的 - 你清除了 tBody

```
var tbody = ''; 
```

在循环之前，但这只发生一次。因为它是在循环外声明的，并且从不重置为''，所以第一个表的内容仍然存在于第二个循环中，请尝试

```
for( var i = 1; i <= num_super; i++){
    var tbody = '';
    //... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:17:52.780

这个给你

```
 <script type="text/javascript">
        function createTable()
        {
            var num_ports = document.getElementById('ports').value;
            var num_super = document.getElementById('super').value;
            var num_rows = document.getElementById('rows').value;
            var num_cols = document.getElementById('cols').value;
            var tbody = '';
            var colStart = num_cols / num_super;
            var y = 1;
            for( var i = 1; i <= num_super; i++){
                var theader = '<div style="margin:0 auto;"><table border="1" style="border:1px solid black; float:left;">\n';
                tbody = '';
                for(u = 1; u <= num_rows; u++){
                    tbody += '<tr>';
                    for( var j = 1; j <= colStart; j++)
                    {
                        tbody += '<td style="width:80px; height:70px;">';
                        tbody += '<sub style="float:right; position:relative; top:24px; z-index:11;  ">' + y + '</sub>';
                        tbody += '</td>';
                        y++;
                    }
                    tbody += '</tr>\n';
                }
                var tfooter = '</table></div>';
                document.getElementById('wrapper').innerHTML += theader + tbody + tfooter;
            }
        }
    </script>
</head>

<body>
<form name="tablegen">
    <label>Ports: <input type="text" name="ports" id="ports"/></label><br />
    <label>Super Columns: <input type="text" name="super" id="super"/></label><br />
    <label>Rows: <input type="text" name="rows" id="rows"/></label><br />
    <label>Columns: <input type="text" name="cols" id="cols"/></label><br/>
    <input name="generate" type="button" value="Create Table!" onclick='createTable();'/>
</form>

<div id="wrapper"></div>
</body>
</html> 
```

添加`var tbody = '';`

# c# - 退出代码 - 2147220978 (0x8004020e)

> ID：14566139
> 
> 赞同：1
> 
> 时间：2013-01-28T16:07:35.640
> 
> 标签：c#, visual-studio, windows-phone-8

我正在尝试制作一个文本阅读器，但我发现在滚动大型文档时，每当纹理内存达到 15000 左右时，应用程序就会以代码 -2147220978 (0x8004020e) 退出。

这是什么意思？有什么解决办法吗？我真的需要能够阅读大文本文档。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:37:01.183

8 表示“错误”。“004”表示“此错误特定于对象在失败时使用的接口”。“020e”的意思是……嗯，它的意思是该界面的作者想要表达的意思。（所有高于 0200 的错误代码都是作者定义的。）

这些是最难追踪的错误，因为它们的含义完全取决于失败代码的作者的意图；没有通用的标准。某些子系统（可能由第三方开发）出现故障。如果您能弄清楚那是什么子系统，那么您可以询问该子系统的制造商他们的错误号 020e 是什么意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T18:45:14.013

你能分享最小和相关的重现代码吗？只需一个 XAML 片段和一个 C# 片段就足够了。

从您所说的来看，它实际上可能会使 GPU 与表面过载，直到应用程序崩溃。它不应该发生，所以我不确定这是真正的原因。

同时，您是否尝试过虚拟化您的 ItemsControl？如果您使用的是 ListBox，您是否尝试过切换到新的 LongListSelector？如果仅切换到 LongListSelector 还不够，请尝试使用[ItemRealized](https://stackoverflow.com/questions/13381752/continuous-pagination-with-longlistselector/13384007#13384007)并添加一些预取逻辑。如果这不起作用，您可能必须创建自己的虚拟化逻辑，方法是在模板消失后手动从可视化树中删除模板，或者创建一个全新的第 3 方虚拟化自定义控件。也许第 3 方控制供应商之一有一些可以在这里工作的东西。

# list - 两个列表的一般合并

> ID：14566142
> 
> 赞同：0
> 
> 时间：2013-01-28T16:07:43.470
> 
> 标签：list, merge, functional-programming, ocaml, ml

我开始学习 OCaml，但我遇到了一个简单函数的问题。这是从`Developing Application with Objective OCaml`

> 编写一个通用函数 merge，它以一个比较函数和两个按此顺序排序的列表作为参数，并返回按相同顺序合并的列表。比较函数的类型为 'a -> 'a -> bool。

这是我到目前为止得到的

```
(* func : 'a -> 'a -> bool) *)
let rec merge2 listA listB func = match listA, listB with
    | list, [] | [], list -> list
    | (headA :: tailA), (headB :: tailB) -> 
        if (func headA headB) then headA :: merge2 tailA listB
        else merge2 :: merge listA tailB 
```

这是一条错误消息

```
Characters 169-187:
        if (func headA headB) then headA :: merge2 tailA listB
                                        ^^^^^^^^^^^^^^^^^^
Error: This expression has type ('a -> 'a -> bool) -> 'a list
       but an expression was expected of type 'a list 
```

我不明白我收到此错误消息的原因。显然是一个哑函数

`let foo a b f = if (f a b ) then true else false`

工作得很好。我还尝试明确说明类型。

编辑：

正确的代码

```
let rec merge2 listA listB func = match listA, listB with
    | list, [] | [], list -> list
    | (headA :: tailA), (headB :: tailB) -> 
        if (func headA headB) then headA :: merge2 tailA listB func
        else headB :: merge2 listA tailB func 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:11:27.683

显然，`merge2`需要 3 个参数，但您在递归调用中只提供了 2 个参数。`else`分支中也有几个错别字（`merge2`应该是`headB`while`merge`应该成为`merge2`）。

为避免此类错误，最好提前移动最不频繁更改的参数：

```
let rec merge2 f xs ys = 
    match xs, ys with
    | zs, [] | [], zs -> zs
    | x::xs', y::ys' -> 
        if f x y then x::merge2 f xs' ys
        else y::merge2 f xs ys' 
```

# php - php中的json解码问题

> ID：14566143
> 
> 赞同：0
> 
> 时间：2013-01-28T16:07:48.660
> 
> 标签：php, javascript, json

我在 php 中有闲置字符串：

```
 $code = "[[],["Mon","01","  1.7","  8","3"," 96","33","
29.01.2013"],["Tue","01","  0.3"," 24","2","100","16","
30.01.2013"],["Wed","01","  5.4"," 28","2"," 98","5","
31.01.2013"],["Thu","01","  8.7"," 22","3"," 92","23","
01.02.2013"],["Fri","01","  5.1"," 43","3"," 91","22","
02.02.2013"],["Sat","01","  2.8"," 18","2"," 90","22","
03.02.2013"],["Sun","01","  2.1"," 31","6"," 93","34","
04.02.2013"]]"; 
```

现在我尝试用 json_decode 解码这个字符串。但结果就是这个：

```
NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL NULL 
```

要输出的代码是这样的：

```
$code = json_decode($code);
print_r($code); 
```

为什么这不起作用？这是我第一次遇到 json_decode 问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:11:30.563

假设 的内容`$code`都在一个字符串中（而不是像现在的语法那样的 php 数组），错误是字符串中有换行符。

```
["Mon","01","  1.7","  8","3"," 96","33"," 
```

请注意，在行尾有一个开放引号 .. 是如何导致 JSON 无效的。

如果你去掉所有的换行符，它确实有效。这是我的证明：

```
array(8) {
  [0]=>
  array(0) {
  }
  [1]=>
  array(8) {
    [0]=>
    string(3) "Mon"
    [1]=>
    string(2) "01"
    [2]=>
    string(5) "  1.7"
    [3]=>
    string(3) "  8" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:10:24.320

它不起作用，因为它不是有效的 JSON。您可以在这里找到正确的 JSON 格式：http: [//www.w3schools.com/json/default.asp](http://www.w3schools.com/json/default.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:28:58.593

这似乎不像一个有效的 json 字符串。如果您使用有效的 json 字符串尝试它，您将获得所需的结果，例如

```
<?php
$code=... //a valid json string
$result=json_decode($code,true); // now $result will contain an associative array
print_r($result); 
```

?>

# xaml - 自定义字体不会出现在模拟器 WP8 中

> ID：14566151
> 
> 赞同：0
> 
> 时间：2013-01-28T16:08:27.917
> 
> 标签：xaml, button, windows-phone-8, font-family, custom-font

我正在尝试自定义按钮样式并使用自定义字体。我试着把它放在 setter 属性中

```
<Setter Property="FontFamily" Value="/Assets/garfield.ttf#GARFIELD the CAT" /> 
```

但我明白了

```
The type 'Setter' does not support direct content. 
```

在我的 XAML 中使用以下内容在“设计”窗口中正确显示了字体，但在模拟器中它只显示了标准字体。

```
<Button Style="{StaticResource ButtonStyle}" FontFamily="/Assets/garfield.ttf#GARFIELD the CAT" Content="Play" Margin="0,10,0,10"/> 
```

如何在 Windows Phone 8 的按钮控件中使用自定义字体？

# jquery - 如何以交互方式使用 .append() 在矩阵中添加列

> ID：14566153
> 
> 赞同：1
> 
> 时间：2013-01-28T16:08:33.267
> 
> 标签：jquery

我正在尝试开发一个页面，在该页面中，用户可以在矩阵的两个文本字段中输入行和列，因为用户类型行和列是交互式创建的。

我面临的问题是列不是交互式创建的

```
 $(document).ready(function(){  
    var rowcount=0,columncount=0;                                                    
    $('input#a').bind('keyup',function() {                                         
    $('table#row').empty();                                                    

    rowcount=parseInt($(this).val())||0;                                       

    for(var i=0;i<rowcount;i++)                                                
    {                                                                          
        $('table#row').append("<tr><td>"+0+"</td></tr>");                      

       $('input#b').bind('keyup',function() {                                  

           $('table#row').empty();                                          

           columncount=parseInt($(this).val())||0;                                

           for(var i=0;i<columncount;i++)                                         
           {                                                                   
               $('table#row').append("<td>"+0+"</td>");                     
           }                                                                   
       });                                                                     
    }                                                                          
});                                                                            

});                                                                            

<table id="row">
    //interactive rowcolumn generation here
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:11:44.703

您可以使用`empty()`.

```
$('input#a').bind('keyup',function() {

    $('table#row').empty();

    rowcount=parseInt($(this).val())||0;

    for(var i=0;i<rowcount;i++)
    {
        $('table#row').append("<tr><td>"+0+"</td></tr>");
    }
}); 
```

这不起作用，因为您还需要获取列。您还需要扩展它`$('input#b')`。

**更新**

试试这个代码...

```
$(document).ready(function(){  
    var rowcount=0,columncount=0;                                                    

    function createTable() {
        console.log("GGG");
        $('table#row').empty();                                                    

        rowcount = parseInt($("input#a").val()) || 0;    
        columncount = parseInt($("input#b").val()) || 0;        

        for(var i=0;i<rowcount;i++)                                                
        {                                                                          
            $('table#row').append("<tr><td>"+0+"</td></tr>");                      
        }   

        $('table#row tr').each(function() {
            $(this).empty();

            for(var i=0;i<columncount;i++)                                         
            {                                                                   
                $(this).append("<td>"+0+"</td>");                   
            }   
        });
    }

    $('input#a').bind('keyup', createTable);
    $('input#b').bind('keyup', createTable);
}); 
```

# vb.net - 在单击事件中获取按钮的 ID/名称。VB.NET

> ID：14566156
> 
> 赞同：13
> 
> 时间：2013-01-28T16:08:42.710
> 
> 标签：vb.net

我在 VB.NET 中有一个事件可以一次处理多个按钮单击。我需要知道选择中的哪个按钮启动了事件。任何想法如何做到这一点？我的代码如下：

```
Private Sub Answer_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAnswer1.Click, btnAnswer2.Click, btnAnswer3.Click, btnAnswer4.Click
    'output button ID that caused event
End Sub 
```

我试过 sender.Id、e.Id、sender.name、e.name。他们都没有工作

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T16:11:10.060

您必须将发件人转换为预期的对象类型。

```
 Dim btn As Button = CType(sender, Button) 
```

然后你就可以访问你需要的东西了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T16:11:17.303

试试`CType(Sender, Button).Name`。在这种情况下，Sender 是一个需要转换为调用类型的对象 Button。如果您需要来自发件人的更多属性，请使用 U1199880 的答案。但通常当我尝试处理多次点击时，我会使用 Tag 属性，为其分配一个索引。像这样的东西。

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click, Button2.Click, Button3.Click
    Dim index As Integer
    If Not Integer.TryParse(CType(sender, Button).Tag.ToString, index) Then Exit Sub

    Select Case index
        Case 0

        Case 1

        Case 2
            ....
    End Select

End Sub 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2016-12-17T15:58:22.230

更简单：

如果发件人是 btnAnswer1 那么...

# c++ - 用于按顺序迭代、有序推送和删除的排序数据结构（仅从顶部开始的 N 个元素）

> ID：14566159
> 
> 赞同：5
> 
> 时间：2013-01-28T16:08:51.230
> 
> 标签：c++, algorithm, optimization, data-structures, stl

什么被认为是按顺序推送某物的最佳数据结构（因此在任何位置插入，能够找到正确的位置），按顺序迭代，并从顶部弹出 N 个元素（因此 N 个最小元素，N 通过与阈值）？推送和弹出需要特别快（运行循环的每次迭代），而数据的有序完整迭代以可变速率发生，但频率可能少一个数量级。数据不能被完全迭代清除，它需要保持不变。所有被推送的东西最终都会被弹出，但是由于弹出可以删除多个元素，所以推送可能比弹出更多。任何时候结构中的数据规模可能高达数百或数千个元素。

我目前正在使用`std::deque`二分搜索按升序插入元素。分析表明它占用了大部分时间，所以必须改变一些东西。 `std::priority_queue`不允许迭代，我见过的黑客不会按顺序迭代。即使在有限的测试中（没有完整的迭代！），该`std::set`课程的表现也比我的`std::deque`方法差。

我搞砸的所有类似乎都没有考虑到这个用例。如果由于某种原因在 STL 或 boost 中找不到数据结构，我不反对创建自己的类。

编辑：

现在有两个主要功能，`push`和`prune`。 `push`使用 65% 的时间，`prune`使用 32%。使用的大部分时间`push`是由于插入`deque`（65% 中的 64%）。只有 1% 来自二分查找来寻找位置。

```
template<typename T, size_t Axes>
void Splitter<T, Axes>::SortedData::push(const Data& data) //65% of processing
{
 size_t index = find(data.values[(axis * 2) + 1]);

 this->data.insert(this->data.begin() + index, data); //64% of all processing happens here
}

template<typename T, size_t Axes>
void Splitter<T, Axes>::SortedData::prune(T value) //32% of processing
{
 auto top = data.begin(), end = data.end(), it = top;

 for (; it != end; ++it)
 {
  Data& data = *it;

  if (data.values[(axis * 2) + 1] > value) break;
 }

 data.erase(top, it);
}

template<typename T, size_t Axes>
size_t Splitter<T, Axes>::SortedData::find(T value)
{
 size_t start = 0;
 size_t end = this->data.size();

 if (!end) return 0;

 size_t diff;

 while (diff = (end - start) >> 1)
 {
  size_t mid = diff + start;

  if (this->data[mid].values[(axis * 2) + 1] <= value)
  {
   start = mid;
  }
  else
  {
   end = mid;
  }
 }

 return this->data[start].values[(axis * 2) + 1] <= value ? end : start;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:05:14.557

根据您的要求，根据您的需求量身定制的混合数据结构可能会表现最佳。正如其他人所说，连续内存非常重要，但我不建议始终保持数组排序。我建议您使用 3 个缓冲区（1`std::array`和 2 `std::vector`s）：

*   1（常量大小）“插入堆”的缓冲区。需要适合缓存。
*   2 个（可变大小）缓冲区 (A+B)，用于维护和更新已排序的数组。

当你推送一个元素时，你通过 .将它添加到插入堆中`std::push_heap`。由于插入堆是固定大小的，它可能会溢出。发生这种情况时，您`std::sort`将其**倒退**并将`std::merge`其与已经排序的序列缓冲区 (A) 一起放入第三个 (B) 中，并根据需要调整它们的大小。这将是新的排序缓冲区，旧的可以被丢弃，即您交换 A 和 B 以进行下一个批量操作。当您需要排序的序列进行迭代时，您也可以这样做。当您删除元素时，您将堆中的顶部元素与排序序列中的最后一个元素进行比较并将其删除（这就是您将其向后排序的原因，以便您可以`pop_back`代替`pop_front`）。

作为参考，这个想法松散地基于[序列堆](http://algo2.iti.kit.edu/sanders/papers/falenex.ps.gz)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:21:24.757

你试过弄乱std::vector吗？尽管听起来很奇怪，但它实际上可能非常快，因为它使用连续内存。如果我没记错的话，Bjarne Stroustrup 在 Going Native 2012（[http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style](http://channel9.msdn.com/Events/GoingNative/GoingNative-2012/Keynote-Bjarne-Stroustrup-Cpp11-Style)但我不是 100% 肯定它在这个视频中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:21:28.967

使用二分查找可以节省时间，但在双端队列的随机位置插入速度很慢。我建议改为使用 std::map 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:34:36.050

从您的编辑来看，这听起来像是复制的延迟——它是一个复杂的对象吗？您能否在结构中堆分配和存储*指针*，以便每个条目只创建一次；您需要提供一个带有指针的自定义比较器，因为不会调用对象 operator<()。（自定义比较器可以简单地调用operator<()）

编辑：您自己的数据表明，插入需要时间，而不是“排序”。虽然其中一些插入时间是创建对象的副本，但一些（可能大部分）是创建将保存您的对象的内部结构 - 我认为这不会在列表/映射/设置/队列等之间发生变化。如果您可以预测数据集可能的最终/最大大小，并且可以编写或找到自己的排序算法，并且分配对象的时间正在浪费，那么向量可能是要走的路。

# regex - .htaccess 将文件扩展名重定向到另一个

> ID：14566160
> 
> 赞同：1
> 
> 时间：2013-01-28T16:08:52.673
> 
> 标签：regex, apache, .htaccess

我正在尝试重定向以下网址：

```
http://mysite/test.cfm 
```

至

```
http://mysite/test.html 
```

这是我尝试过的......正则表达式在在线正则表达式测试器中工作，但在我的 .htaccess 文件中不起作用：

```
RewriteCond %{THE_REQUEST} ^(.*)\.cfm
RewriteRule ^(.*)(?=\.cfm) $1.html [L] 
```

它似乎正在尝试重定向到 .cfm.html - 这对我来说没有多大意义，因为第二个正则表达式告诉它不匹配 .cfm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:18:23.670

如果您真的想重定向（要求客户端获取另一个带有 HTTP 代码 302 的文档），您可以使用 Mod_alias 和以下重定向

```
 RedirectMatch (.*)\.cfm$ $1.html 
```

最良好的祝愿， 马蒂亚斯

# asp.net - OpenXML Excel 文件解析

> ID：14566167
> 
> 赞同：0
> 
> 时间：2013-01-28T16:09:17.047
> 
> 标签：asp.net, openxml-sdk

我有一个应该使用以下代码块解析的 excel 文档：

```
 var handler = new ExcelHandler(byteStream);

        var currentExcelDocument = handler.CurrentDocument;
        //now if the document is null
        if (currentExcelDocument == null)
            {
            throw new Exception("Excel file handle missing");
            }
        var wokrbookpart = currentExcelDocument.WorkbookPart;
        //get a list of all the sheets
        string text =  String.Empty;

        var sheets = wokrbookpart.Workbook.Descendants<Sheet>().ToList();
        foreach (var sh in sheets)
            {
            //now we have the sheets but the data must be in the first sheet
            var themainsheet = sh;
            if (themainsheet == null)
                throw new ArgumentException("sheetName");
            //now we need a reference to the worksheetpart
            var worksheetpart = (WorksheetPart)wokrbookpart.GetPartById(themainsheet.Id);

            SheetData data = worksheetpart.Worksheet.Elements<SheetData>().First();

            //now we have a reference to the cells that contain data we start passing the data

            foreach (Row r in data.Elements<Row>())
                {
                //we get the cells in the row
                var cells = r.Elements<Cell>().ToList();
                foreach (var i in cells)
                    {
                    text += i.CellValue.InnerText;
                    }
                }
            }

        return text; 
```

excel文件通过asp.net中的fileupload控件上传，流被传递到上面的代码块中。

一切都很好，但是当我在标签中显示结果文本时，我看到读取单元格值的结果显示为一系列数字，即使我确信数据中没有数字

请问我做错了什么？

# web-applications - 在生产中保护 Apache Solr

> ID：14566169
> 
> 赞同：2
> 
> 时间：2013-01-28T16:09:20.257
> 
> 标签：web-applications, solr, full-text-search, jetty, search-engine

我们正在使用 Apache Solr 4.1 来索引 Web 应用程序的数据。只有 Web 应用程序才能访问 Solr。用户和其他客户不会直接与 Solr 交谈。

保护此类 Solr 用例的最佳实践有哪些？

（我们使用 Jetty 来运行 Solr）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T21:22:42.533

好吧，只有几个可用的选项：

1.  不要将 Solr 服务器 URL 暴露给浏览器，确保只有 Web 应用程序可以看到它并向 Solr 服务器发出查询（SolrJ 和 Solr.Net 是很好的客户端）。
2.  不允许任何其他 URL 与您的 Solr 服务器主机通信，除了 Web 应用程序服务器。
3.  使用代理来混淆 Solr 服务器 URL 并禁止某些查询和 URL（和管理员）。

# jquery - 使用 jQuery validate 忽略某些验证规则

> ID：14566172
> 
> 赞同：2
> 
> 时间：2013-01-28T16:09:23.707
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery 验证插件对我的表单进行自定义验证。对于一种特定类型的表单，用户可以选择提交表单，或者他们也可以在不提交的情况下保存表单。我可以`$('form.validate').validate().cancelSubmit = true;`用来抑制保存按钮的 onClick 处理程序中的验证，并且生活很好。

但是，编写的自定义验证之一强制人们必须输入合法字符（即它强制您使用有效的 ascii 字符）。我想继续执行 ascii 验证，因为如果我不这样做，人们就可以将不良数据保存到数据库中（这随后会扰乱我们正在运行的集成）。

基本上我想强制执行除必需的所有规则：true。我看到您可以在表单上设置验证时使用忽略选项，`$('form.validate').validate({ignore : ".required"});`但这似乎仅在您最初设置验证时才有效。当我尝试在用户单击按钮时这样做时，它似乎没有做任何事情。

我看过一些关于类似事情的帖子，但通常与忽略隐藏字段有关。有人知道我需要使用正确的语法/方法来忽略按钮单击时所需的规则吗？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:44:25.780

您可以使用[该`rules('remove')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22remove.22rules)动态删除您的规则。你的“保存”按钮上的东西是这样的。

```
$('#save').click(function () {
    $('#myform').find('.myclass').each(function () {
        $(this).rules('remove', 'required');
    });
    // your code to save form
}); 
```

演示：http: [//jsfiddle.net/NqT2V/](http://jsfiddle.net/NqT2V/)

**重要说明**： [根据`rules('remove')`文档](http://docs.jquery.com/Plugins/Validation/rules#.22remove.22rules)，*“仅操作通过规则选项或通过指定的规则`rules('add')`。”* 换句话说，[如果您的规则是通过内联添加的，这将不起作用`class="required"`](http://jsfiddle.net/5bPBZ/)。

* * *

以及之前[返回规则](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)的[`rules('add')`方法`add`](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)`submit`......

```
$('#submit').click(function (e) {
    e.preventDefault();
    $('#myform').find('input').each(function () {
        $(this).rules('add', 'required');
    });
    $('#myform').submit();
}); 
```

演示：http: [//jsfiddle.net/3G8cN/](http://jsfiddle.net/3G8cN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-05T22:33:05.983

您可以在所需规则中使用三元运算符来分析元素是否具有在 html 中声明的行内类“忽略”。

样品波纹管

**HTML**

```
<div class="row">
    <div class="input-field">
        <input id="userName" name="userName" type="text" class="validate ignore" maxLength="10">
         <label for="userName" class="required">Name</label>    
     </div>   
</div> 
```

**JS**

```
 $('#userName').rules("add", {
        required: $('#userName').hasClass('ignore')? false: true,
        messages: {
            required: "This field is required!",
        }
    }); 
```

**CSS**

```
.required:before {
    content: "*";
    color: red;
    position: absolute;
    margin-left: -13px;
    font-weight: normal;
    font-size: 23px;
} 
```

在保存之前，迭代所有项目并将忽略类添加到您想要绕过的项目中。删除您要验证的所有忽略类。

Before submit, Iterate all the items and remove the ignore class to the ones you like to be validated.

Side Note: Observe the class="required" at the label. That will add a red asterix aside the field on all the ones that has that class and this is made with the provided css part

# wpf - 如果 ItemSource 绑定不返回数据，则将行添加到 DataGrid

> ID：14566174
> 
> 赞同：0
> 
> 时间：2013-01-28T16:09:25.467
> 
> 标签：wpf, xaml

这个问题有什么简单的解决方案吗？首先我想我可以创建一个空的 ObservableCollection 并写：

```
ObservableCollection<PersonDetailsView> newOCollection= new ObservableCollection<PersonDetailsView>();
myDataGrid.ItemsSource=newOCollection.ToArray(); 
```

`{Binding Person}`它有效..我得到一个空行..但问题是我失去了另一个绑定..只有当我的（参见代码）不返回值时，有没有办法绑定到 newOCollection

```
<DataGrid CanUserAddRows="True" IsReadOnly="False" BorderBrush="#FFCCCCCC"  
        GridLinesVisibility="All" AutoGenerateColumns="False" 
        ItemsSource="{Binding Person}" Background="White" Margin="10,45,0,0" 
        VerticalAlignment="Top" Height="91" HorizontalAlignment="Left" 
        HeadersVisibility="None" SelectionMode="Single" Name="dtaPersons" Width="415">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Person.Name, Mode=TwoWay}" Width="Auto"/>
        <DataGridTextColumn Binding="{Binding Person.Surname, Mode=TwoWay}" Width="*"/>
        <DataGridTemplateColumn Width="Auto">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate >
                    <Button  Style="{DynamicResource ChromelessButtonStyle}" Content="r" FontFamily="Marlett" />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
   </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:13:29.327

```
ObservableCollection<PersonDetailsView> newOCollection= new ObservableCollection<PersonDetailsView>();

if (!myDataGrid.Items.Any())
    myDataGrid.ItemsSource=newOCollection.ToArray(); 
```

# javascript - 禁用 javascript 缩放 (CTRL + / CTRL-)

> ID：14566175
> 
> 赞同：0
> 
> 时间：2013-01-28T16:09:27.513
> 
> 标签：javascript, zooming

我正在尝试 通过 javascript禁用`Ctrl`+ `+`/ `Ctrl`+浏览器快捷方式：`-`

```
$(document).ready(function(){
    $(document).keydown(function(event) {
        if (event.ctrlKey==true && (event.which == '107' || event.which == '109')) {
            alert('disabling zooming ! ');
            event.preventDefault();
         }
    });
}); 
```

此代码在 FF 和 Chrome 中运行良好，并且不会阻止放大 IE！任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T13:24:04.273

这对我有用，尽管您可能也想绑定到“keyup”。

```
$(document).ready(function () {
        $(document).bind('keydown keypress', function (event) {
            event.preventDefault();
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-29T11:36:50.100

为了完全禁用滚动，您必须阻止超过 2 个按钮编号。我个人禁用所有 ctrl 组合键。

```
$(document).ready(function () {
    function preventDefault(e) {
          e = e || window.event;
          if (e.preventDefault)
              e.preventDefault();
          e.returnValue = false;
        }
    $(document).bind('keydown keypress', function (event) {
        if (event.ctrlKey) {
            preventDefault(event);
            return false;
        }
    });
}); 
```

# iphone - 在 UITabBarController 的标签栏上显示 UIView

> ID：14566176
> 
> 赞同：3
> 
> 时间：2013-01-28T16:09:29.103
> 
> 标签：iphone, objective-c

我正在使用一个`UITabBarController`. 是否可以`UIView`在控制器的标签栏上显示一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:15:39.740

使用`UIViewController`with `UITabBarControllerDelegate`，添加 a `UITabBar`，设置委托。您将能够`UIView`在视图控制器上添加 s。

![](../Images/e81b0d9f5235cb4ecea14e5627c5e131.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T05:18:33.503

如果您正在谈论另一个视图控制器视图，则将该视图控制器显示在选项卡栏控制器视图上。例如。可以说 About 是 ta bar 控制器内的选项卡。然后当您单击 About 选项卡时，它将显示一个位于选项卡栏控制器内的视图控制器。在视图中的视图控制器中确实加载了您可以正确查看下面的代码标签栏控制器上的视图。

```
views=[[AboutUsViewController alloc] initWithNibName:@"AboutUsViewController" bundle:nil];
[self presentModalViewController:views animated:NO]; 
```

# java - javaFX中带有fxml文件的maven可执行jar

> ID：14566188
> 
> 赞同：0
> 
> 时间：2013-01-28T16:10:02.273
> 
> 标签：java, maven, jar, javafx, fxml

我想创建一个可执行的 jar。我阅读了如何制作 MANIFEST.MF，但使用 maven 阅读要容易得多：

[http://www.springone2gx.com/blog/scott_leberknight/2008/06/creating_executable_jars_using_the_maven_assembly_plugin](http://www.springone2gx.com/blog/scott_leberknight/2008/06/creating_executable_jars_using_the_maven_assembly_plugin)

但该解决方案不包括 fxml 文件。

你知道那个插件或一些解释我应该如何以及在哪里插入 fxml 文件的教程。

我注意到该解决方案也不包含 gif 或其他 jar 文件。因此，我认为将其他类型的文件包含到 jar 中应该是相同的解决方案。

我接近最后期限（昨天）。因此，任何允许我在 5 分钟内完成的帮助（任何人都可以梦想）将非常受欢迎。

预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-17T07:05:56.913

你可以用`Zenjava-Javafx-maven-plugin`这个。只需将此添加到您的`pom.xml`

```
<plugin>
    <groupId>com.zenjava</groupId>
    <artifactId>javafx-maven-plugin</artifactId>
    <version>8.8.3</version>
    <configuration>
        <mainClass>your.package.with.Launcher</mainClass>
    </configuration>
</plugin> 
```

比使用`mvn jfx:jar`命令创建`javafx jar`. 将`jar-file`被放置在`target/jfx/app`。

如果您希望创建 javafx 本机捆绑包，请使用此配置，

```
<plugin>
    <groupId>com.zenjava</groupId>
    <artifactId>javafx-maven-plugin</artifactId>
    <version>8.8.3</version>
    <configuration>
        <vendor>YourCompany</vendor>
        <mainClass>your.package.with.Launcher</mainClass>
    </configuration>
</plugin> 
```

和这个命令：`mvn jfx:native`。本机启动器或安装程序将放置在`target/jfx/native`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:18:05.160

要使用 maven 创建 javaFX 项目的可执行 jar，请遵循本教程：[从零到 javafx-in-5-minutes](http://web.archive.org/web/20150319160208/http://www.zenjava.com/2012/11/24/from-zero-to-javafx-in-5-minutes/)

> 使用这个插件，快速启动和运行以及构建复杂的分发包（例如可执行 JAR 文件、本机安装程序和 webstart 包）变得非常容易

# sql - SQL中的所有表和所有列？

> ID：14566194
> 
> 赞同：2
> 
> 时间：2013-01-28T16:10:15.733
> 
> 标签：sql, sql-server

我希望列出我的数据库中的每个表以及相应的列标题。SQL 有没有办法做到这一点并按字母顺序排列过程中的列名？

类似于以下格式的内容：

```
Table1    Col1name    Col2name    Col3name ...
Table2    Col1name    Col2name    Col3name ...
... 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:25:05.090

```
SELECT 
  [schema] = s.name,
  [table]  = t.name, 
  [column] = c.name
FROM 
  sys.tables AS t
INNER JOIN
  sys.schemas AS s
  ON t.[schema_id] = s.[schema_id]
INNER JOIN 
  sys.columns AS c
  ON t.[object_id] = c.[object_id]
ORDER BY 
  t.name, 
  c.name; 
```

这就是为什么我不会`INFORMATION_SCHEMA`在 SQL Server 2005+ 中使用任何东西的原因：

*   [针对 INFORMATION_SCHEMA 视图的案例](https://sqlblog.org/2011/11/03/the-case-against-information_schema-views)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:13:58.047

SQL Server 有一个名为[sp_MSforeachtable](http://www.codeproject.com/Articles/72729/SQL-Server-Undocumented-Stored-Procedure-sp_MSfore)的未记录存储过程 ，您可以使用它来遍历数据库中的所有表

知道表名后，您可以使用[信息架构视图](http://msdn.microsoft.com/en-us/library/aa933204%28SQL.80%29.aspx)或[信息架构视图](http://msdn.microsoft.com/en-us/library/aa933218%28v=sql.80%29.aspx)来查看表中的所有列

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:28:55.450

这应该让你朝着正确的方向前进。真的取决于你想要你的输出：

```
SELECT t.table_name, STUFF((SELECT distinct ',' + c.COLUMN_NAME 
                  FROM DATABASENAME.INFORMATION_SCHEMA.COLUMNS c WHERE c.TABLE_NAME =t.table_name
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') as Columns
FROM  DATABASENAME.INFORMATION_SCHEMA.TABLES t 
ORDER BY t.TABLE_NAME, Columns 
```

如果像@Aaron 指出的那样使用 sys.tables 和 sys.columns ，那么这应该也可以：

```
SELECT t.name, STUFF((SELECT distinct ', ' + c.name
                  FROM sys.COLUMNS c WHERE t.object_id = c.object_id
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') as Columns
FROM sys.TABLES t 
ORDER BY t.name, Columns 
```

祝你好运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:51:15.720

试试这个

```
 declare @xml as xml
    declare @max_cols int
    declare @i int
    declare @query as varchar(max)
    declare @query_OA2 as varchar(max)

    select @max_cols = MAX(n)
    from(   select COUNT(name) as n
            from sys.columns
            group by object_id
    )V

    select @i = 1, @query_OA2 = ''
    while @i <= @max_cols
    begin
        set @query_OA2 = @query_OA2 +', C.elements.value(''./name['+CAST(@i as varchar(max))+']'',''varchar(max)'') as [Column '+CAST(@i as varchar(max))+']'
        set @i = @i+1
    end
    select @query_OA2 = STUFF(@query_OA2,1,1,'')

    select @query = 'select t.name as [table]
                    ,OA2.*
                    from sys.tables t
                    outer apply (select (select (select c.name from sys.columns c
                                         where c.object_id = t.object_id
                                         order by c.column_id
                                         for xml path(''''),type) for xml path(''columns''),type) as cols
                    )OA
                    outer apply (select '+@query_OA2+'
                                 from OA.cols.nodes(''columns'')C(elements)
                    )OA2
                    order by t.name'
    exec (@query) 
```

我取得的部分成果

```
table                   Column 1    Column 2    Column 3
Veixxxxx                cd_exxx     cd_veixxx   nr_apxxxxxx
Verxxxx                 cd_verxxx   de_verxxx   de_muxxxx 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T17:36:25.883

做一个支点技巧...？

```
 declare @max_cols int
    declare @i int
    declare @query as varchar(max)
    declare @query2 as varchar(max)

    select @max_cols = MAX(n)
    from(   select COUNT(COLUMN_NAME) as n
        from INFORMATION_SCHEMA.COLUMNS
        group by table_name
    )V

    select @i = 1, @query2 = ''
    while @i <= @max_cols
    begin
        set @query2 = @query2 +', Col_'+CAST(@i as varchar(max))
        set @i = @i+1
    end
    select @query2 = STUFF(@query2,1,1,'')

    select @query =
    'select * 
    from (
            select T.TABLE_NAME,T.COLUMN_NAME,''Col_''+cast(T.ORDINAL_POSITION as varchar(max)) as pos
            from INFORMATION_SCHEMA.COLUMNS T
    )V
    PIVOT (max(V.COLUMN_NAME) for pos in ('+@query2+'))U'

    exec(@query) 
```

实现的结果集与 xml 方法相同

```
TABLE_NAME              Col_1       Col_2       Col_3
Veixxxxx                cd_exxx     cd_veixxx   nr_apxxxxxx
Verxxxx                 cd_verxxx   de_verxxx   de_muxxxx 
```

# c# - IEnumerable 在泛型方法中与比较器相交

> ID：14566202
> 
> 赞同：0
> 
> 时间：2013-01-28T16:10:28.023
> 
> 标签：c#, oop, generics

我正在`LazySave<T>`我的基础数据访问层 ( `BaseDAL`) 中为对象数据库创建一个。

```
public void LazySave<T>(IEnumerable<T> TList, Func<T, T, bool> condition, IEqualityComparer<T> comparer) where T : class
{
  //Select where GetOne<T> returns null, meaning this item doesn't exist
  var itemsToStore = TList.Where(TItem => GetOne<T>(e => condition(TItem, e)) == null);
  //Select where GetOne<T> returns not null, meaning this item exists
  var itemsToUpdate = TList.Where(TItem => GetOne<T>(e => condition(TItem, e)) != null);
  //Get all of the items
  var allItems = GetMany<T>();
  //Any items which aren't in TList but are in the original list need to be deleted
  var itemsToDelete = TList.Intersect(allItems, comparer);
  itemsToStore.ToList().ForEach(i => Store<T>(i));
  itemsToUpdate.ToList().ForEach(i => Update<T>(i, condition));
  itemsToDelete.ToList().ForEach(i => Delete<T>(i, condition));
} 
```

我将以下对象和比较器传递给该方法。

```
public class BankHoliday : IBankHoliday, IEquatable<BankHoliday>
{
  public DateTime Date { get; set; }

  public bool Equals(BankHoliday other)
  {
    return other.Date == Date;
  }
}

public class BankHolidayComparer : IEqualityComparer<BankHoliday>
{
  public bool Equals(BankHoliday x, BankHoliday y)
  {
    return x.Date == y.Date;
  }

  public int GetHashCode(BankHoliday obj)
  {
    if (object.ReferenceEquals(obj, null)) return 0;
    return obj.Date.GetHashCode();
  }
} 
```

称为：

```
var comparer = (IEqualityComparer<BankHoliday>)new BankHolidayComparer();
bhDAL.LazySave<BankHoliday>(holidays, ((T, T2) => T.Date == T2.Date), comparer); 
```

数据库中的列表有 11 个日期。我删除一个然后调用`LazySave`，将 10 个项目传递给`TList`但是`Intersect`没有返回结果，甚至没有命中`Equals`or `GetHashCode`。任何想法>我认为这与我的比较器有关...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:12:07.803

这可能是一个愚蠢的问题，但只是为了确认 - 您将断点放在比较器的 Equals 和 GetHashCode 上？（不是 BankHoliday 的方法）

此外，由于对相交的延迟评估，必须在击中断点之前调用下面的行。

```
itemsToDelete.ToList().ForEach(i => Delete<T>(i, condition)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:19:34.213

`Intersect`根据您的评论，您误解了 的目的：

```
//Any items which aren't in TList but are in the original list need to be deleted
var itemsToDelete = TList.Intersect(allItems, comparer); 
```

`Intersect`查找两个序列中的*项目*。`Except`根据您的评论，我怀疑您想要：

```
var itemsToDelete = allItems.Except(TList, comparer); 
```

如果您的 custom`Equals`和`GetHashCode`方法在 using 时没有被调用`Intersect`，则表明*or （顺便说一句，**这* 是一个奇怪的参数名称）为空。`allItems` *`TList`*

 ** * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:27:06.887

我相信 IEqualityComparer 适用于用于比较对象实例的外部类？

在 BankHoliday 类上，尝试使用覆盖实现 IEquatable：

`public override bool Equals(object obj)`

和

`public override int GetHashCode()`

**编辑**：并使用@Jon 的例外代码示例。*

# javascript - Javascript 函数在测试站点和现场站点返回不同的结果

> ID：14566206
> 
> 赞同：0
> 
> 时间：2013-01-28T16:10:42.530
> 
> 标签：javascript

这是我的第一篇文章。我对 javascript 相当陌生，并试图使用以下函数来获取文档名称（由页面上的元素 id 模仿）以在以后的函数中使用。在测试站点上，它运行良好。例如，如果文件是`http://testserver/options/example.html`它返回“示例”

一个现场站点，它总是返回`www`

```
<script  type="text/javascript">  

  $(document).ready(function() {
    var pageName = function() {
    //this gets the full url
    var url = document.location.href; 
    //this removes the anchor at the end, if there is one
    url = url.substring(0, (url.indexOf("#") == -1) ? url.length : url.indexOf("#")); 
    //this removes the query after the file name, if there is one
    url = url.substring(0, (url.indexOf("?") == -1) ? url.length : url.indexOf("?")); console.log(url);
    //this removes the file extension, if there is one 
    url = url.substring(0, (url.indexOf(".") == -1) ? url.length : url.indexOf(".")); console.log(url);
    //this removes everything before the last slash in the path
    url = url.substring(url.lastIndexOf("/") + 1, url.length); console.log(url);
    //return
    return url; console.log(url);
    }

}); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:19:32.140

尝试像这样修改这一行：

您的测试站点没有所有的“。” 就像现场网站一样（即 www. 或 .com）。通过使用lastIndexOf，您可以获得“.”的最后一个实例。在扩展之前的 url 中。

将其更改为：

```
url = url.substring(0, (url.indexOf(".") == -1) ? url.length : url.indexOf(".")); 
```

到：

```
url = url.substring(0, (url.lastIndexOf(".") == -1) ? url.length : url.lastIndexOf(".")); 
```

有关 lastIndexOf 的更多信息，请访问此链接：

[MDN 上的 lastIndexOf()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/lastIndexOf)

希望这可以帮助。

# java - 如何从 url SAX 解析中解析图像

> ID：14566209
> 
> 赞同：0
> 
> 时间：2013-01-28T16:10:55.540
> 
> 标签：java, xml, image, saxparser

我如何从 xml 文件 url 中的链接中解析图像。当我解析数据时，除了显示图像之外，它还会显示链接。这是图片的链接[http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png](http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png)

和链接我解析数据

[http://free.worldweatheronline.com/feed/weather.ashx?q=peshawar,pakistan&format=xml&num_of_days=5&key=eab9f57359164426132301](http://free.worldweatheronline.com/feed/weather.ashx?q=peshawar,pakistan&format=xml&num_of_days=5&key=eab9f57359164426132301)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:22:54.033

这是从 url 制作缓冲图像的代码。

```
try {
    URL url = new URL("http://www.worldweatheronline.com/images/wsymbols01_png_64/wsymbol_0001_sunny.png");
    BufferedImage bufferedImage = ImageIO.read(url);
    ImageIO.write(bufferedImage, "png", new FileOutputStream("/home/visruth/OutputImage.png"));// A file named OutputImage.png will be created in the location /home/visruth/
    } catch(Exception e) {
        e.printStackTrace();
    } 
```

# asp.net-mvc - 在 ASP.NET MVC 中，您将对象池管理器放在哪里？

> ID：14566211
> 
> 赞同：1
> 
> 时间：2013-01-28T16:11:07.233
> 
> 标签：asp.net-mvc

我想在 ASP.NET MVC 应用程序中维护一个对象/连接池。池的目的是通过重用与第三方 Web 服务的连接来提高性能。第三方 Web 服务需要返回会话 ID 的登录调用 - 池保存这些会话 ID。

我的问题是，我在哪里实例化这个对象池，以便它可以在所有请求中使用？它只会被 1 个控制器使用，但如果我在控制器中实例化它，我相信即使它是单例，也会为每个用户请求实例化一个新的对象池？将其存储在Application状态是否合理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:19:44.103

您所说的*对象池*有一个名称：它通常称为缓存。

您可以使用[`ObjectCache`](http://msdn.microsoft.com/en-us/library/system.runtime.caching.objectcache.aspx)该类，更具体地说是[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)类，它是它的一种实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:34:24.707

我不知道您如何实现对象/连接池，但如果您遵循[对象池模式](http://www.oodesign.com/object-pool-pattern.html)，您可以简单地应用单例模式并在 global.asax 的 Application_Start 中执行一些初始化代码（早期加载）。

# qt - 关于在 qt 应用程序中编译 openssl

> ID：14566212
> 
> 赞同：4
> 
> 时间：2013-01-28T16:11:07.560
> 
> 标签：qt, static, openssl

我有带 MSVC 的 Qt 4.8.4（默认安装）。在我的应用程序中，我使用 ssl 连接到服务器。QtNetworkd4.dll 需要运行时 libeay32.dll 和 ssleay32.dll 如果我将这些库放在我的应用程序目录中，一切正常。

我试图将openssl库静态编译到我的应用程序中，虽然编译正常，但在启动应用程序期间抱怨未解析的符号，直到我将libeay32.dll和ssleay32.dll放入应用程序文件夹。

所以问题是：将这些库编译到我的应用程序中是真的吗，因为 QtNetwordkd4.dll 不会在我的应用程序二进制文件中查找所需的函数/符号，我宁愿用内置的 openssl 编译整个 Qt？像这样：

```
configure -openssl -I C:\OpenSSL-Win32\include -L C:\OpenSSL-Win32\lib\VC\static 
```

或者我想要做的实际上是可行的，而我只是做错了什么，比如 libeay32 和 ssleay32 的错误版本等？

我试图用静态 openssl 编译有两个原因

1.  我不必将 libeay32 和 ssleay32 放在我的应用程序目录中
2.  恐怕在某些机器上可能已经安装了不同版本的 openssl，我的应用程序将与系统目录中的这些库进行交互。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-15T05:06:29.993

试试这样：

```
-openssl -openssl-linked -I C:\OpenSSL-Win32\include -L C:\OpenSSL-Win32\lib\VC\static  OPENSSL_LIBS="-lUser32 -lAdvapi32 -lGdi32" OPENSSL_LIBS_DEBUG="-lssleay32MDd -llibeay32MDd" OPENSSL_LIBS_RELEASE="-lssleay32MD -llibeay32MD" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T21:56:59.263

编译 Qt 时，您可以根据`configure`命令行选择以下选项之一：

1.  不支持 OpenSSL ( `-no-openssl`)
2.  QtNetwork 动态打开 OpenSSL 库（`-openssl`默认）
3.  QtNetwork 链接到 OpenSSL ( `-openssl-linked`)

最后一个意味着动态链接（如果 Qt 被构建为共享库）或静态链接（当进行 Qt 的静态构建时，即`-static`）。

因此，您的问题的“解决方案”正在传递`-static -openssl-linked`给 Qt 的`configure`.

* * *

我说“解决方案”是因为

1.  我看不出将 OpenSSL 库放在 Qt 库旁边有什么问题，尤其是在 Qt 的共享版本中；
2.  由于在 OpenSSL 本身中发现的安全问题，在您的应用程序中升级 OpenSSL 变得更重（新的“巨大”应用程序二进制文件，而不仅仅是替换 OpenSSL DLL）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T18:54:00.443

正确，将 OpenSSL 静态编译到您的应用程序中是没有用的，因为 QtNetwork4.dll 期望函数是 openssl DLL，而不是在您的应用程序中。

您有两个选择是将 OpenSSL 编译到 Qt 中，或者将 libeay32 和 ssleay32 与您的应用程序一起分发。或者，您可以要求您的用户自行安装这些 DLL，但版本不匹配可能是一件坏事（0.9.x 和 1.x 版本之间存在一些很大差异）。

# java - 使用 fileWriter 将字符串从 Java 写入 Excel

> ID：14566213
> 
> 赞同：0
> 
> 时间：2013-01-28T16:11:08.900
> 
> 标签：java, excel, filewriter

我正在尝试从 java api 编写一个字符串以 excel 。但是，当我尝试写入 excel 表时，我的一个字段搞砸了，我不确定原因。

My String 由多个部分组成，FirstName、SurName Address、Tell Number。

那里都包裹着自己的人对象。对于 toString，我将所有项目连接在一起以进行输出。

但是，当我签入 csv 时，告诉号码被扭曲了。它将从 12345678901234567 -> 12345678901234500 更改为最后 2 个数字添加零。

我的工作表中有其他数字不长，可以很好地输出，但是谁能告诉我这里可能是什么问题，toString 中的数字很好，所以 java api 没有操纵它。这似乎是 Excel 问题或 FileWriter 的问题，尽管我觉得这很奇怪，因为地址远超过 17 个字符？

非常感谢任何建议

# string - 在shell脚本中将查询结果转换为数组

> ID：14566223
> 
> 赞同：2
> 
> 时间：2013-01-28T16:11:25.907
> 
> 标签：string, shell

我正在尝试在 shell 上使用 shell 脚本做非常简单的事情`BASH`。我正在尝试将所有用户的 keyids 放入 shell 脚本中的数组中。我稍后将循环它们以进行进一步处理。

我写了非常简单的代码。但是我在将空格分隔的 QUERY_RESULTS 字符串转换为数组时被卡住了。

我尝试了各种选项，例如，`set -A`等。没有什么对我有用。我尝试的每件事都会给我一些错误。`read -a``array=( $ QUERY_RESULTS } )`

例如

*   `set -A`给我`illegal option -A`。
*   `read -a`也给我`illegal option -a`。
*   `array=( $ QUERY_RESULTS } );`给我`( unexpected`。

下面是我的代码。请在这里帮助我。

```
#IFS="";
echo "Get list of Active Users from Table ";
QUERY_RESULTS=$( mysql -u username password -e "SELECT keyid from users where isActive = 1" );
echo $QUERY_RESULTS;
#eval `read -a arr <<$QUERY_RESULTS`;
#array=( $ QUERY_RESULTS } );
echo $array; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:06:36.770

你有没有尝试过这样的事情：

```
read -r -a array <<< $QUERY_RESULTS 
```

注意“<<<”而不是“<<”

如果 QUERY_RESULTS 的内容由多行组成，您可能希望这样做：

```
mapfile -t array <<< $QUERY_RESULTS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T14:33:52.130

我可以使用以下代码实现我的目标。但是，我在将 QUERY RESULT 转换为字符串时仍然遇到问题。

```
echo "Get list of Active Users from Table ";
QUERY_RESULTS=$( mysql -u username password -e "SELECT keyid from users where isActive = 1" );

for i in `echo $QUERY_RESULTS | tr ' ' '\n' |sed  '1d' | tr '\n' ' '`
do
sh doAction.sh $i;
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-27T11:27:42.763

在 bash 中，您可以获取数组和字符串，如下所示：

```
query="SELECT keyid from users where isActive = 1;" 
QUERY_RESULTS=($(mysql -u username password -e "$query")) 
```

或者

```
QUERY_RESULTS=(`mysql -u username password -e "$query"`)
QUERY_RESULTS_STR=$(printf "%s," "${QUERY_RESULTS[@]}") 
```

请注意，您需要 mysql cmd 中的“()”，这使结果成为可以在循环中使用的 bash 数组。而“%s”，“，”是换成str时用来分隔元素的分隔符，如果需要可以换成其他的分隔符。

# jquery - jquery mobile页脚上的通知图标（计数）

> ID：14566227
> 
> 赞同：1
> 
> 时间：2013-01-28T16:11:35.530
> 
> 标签：jquery, cordova, jquery-mobile

jquery mobile中是否有一个css类允许在页脚导航栏上进行通知计数，如下图所示的“2”？

![通知计数示例](../Images/3d2c0453c88cb8080e0f8e24e1c5c336.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:25:29.993

那么您正在寻找调酒师： http: [//www.stokkers.mobi/valuables/bartender.html](http://www.stokkers.mobi/valuables/bartender.html)

代码可以在这里找到：[https ://github.com/frequent/bartender/](https://github.com/frequent/bartender/)

# java - 在 ANTLR 中为 Lucene 进行查询解析

> ID：14566231
> 
> 赞同：5
> 
> 时间：2013-01-28T16:11:47.653
> 
> 标签：java, lucene, antlr, antlr3

可能它会结合几个问题，但上下文是相同的。

**背景**：我需要为 Lucene 实现自定义查询解析。原因是我没有在 Lucene 中存储一些字段，而是将它们保存在单独的数据库中，因为它们变化太频繁了。该字段为分类类别，即*猫*

所以，我想像这样解析查询：

> (cat:important and hello) 或 (cat:not_important and hi)

对于类似 Lucene 的语言，是否有任何标准的 ANTLR4 查询解析器（或示例）？有没有一种方法可以引入自定义 QueryNode 而无需我从头开始重写所有内容（Sytax、QueryBuilders 等）？

非常感谢各位！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T03:12:15.263

我什至会：

1.  修改原始的[StandardQueryParser.jj文件，在](http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/queryparser/src/java/org/apache/lucene/queryparser/flexible/standard/parser/StandardSyntaxParser.jj)[JavaCC](https://javacc.java.net/)`QueryParser`的帮助下生成另一个文件（它像 AntLR 一样生成 LL 下降解析器），

2.  将原始[StandardQueryParser.jj](http://svn.apache.org/repos/asf/lucene/dev/trunk/lucene/queryparser/src/java/org/apache/lucene/queryparser/flexible/standard/parser/StandardSyntaxParser.jj)文件转换为正确的 AntLR 语法语法，或

3.  检查`ExtendableQueryParser`这种字段是否不够。

# jquery - 选择未设置为选定值 Jquery

> ID：14566235
> 
> 赞同：0
> 
> 时间：2013-01-28T16:11:58.570
> 
> 标签：jquery

我正在尝试将选择设置为特定选项。我正在使用此代码创建我的选择..

```
$('#drpSortBy').append($("<option></option>").attr("value", 'Application_ID').text('Application'));
$('#drpSortBy').append($("<option></option>").attr("value", 'Approver_ID').text('Approver'));
$('#drpSortBy').append($("<option></option>").attr("value", 'Days_Pending').text('Days Pending'));
$('#drpSortBy').append($("<option></option>").attr("value", 'Originator_ID').text('Originator'));
$('#drpSortBy').append($("<option></option>").attr("value", 'Title').text('Title')); 
```

我正在尝试根据此代码的值将选择列表设置为特定选项，但它似乎没有响应

```
 $('#drpSortBy option').val(userSort.SortFieldName).attr('selected', true); 
```

我已验证 userSort.SortFieldName='Originator_ID' 用于测试目的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:13:34.570

您可以使用[val()](http://api.jquery.com/val/)设置选定的值。

**[现场演示](http://jsfiddle.net/rajaadil/kRx2J/)**

```
 $('#drpSortBy').val(userSort.SortFieldName) 
```

# mysql - mysql查询困难？

> ID：14566239
> 
> 赞同：0
> 
> 时间：2013-01-28T16:12:03.340
> 
> 标签：mysql

> **可能重复：**
> [这可能与 mysql 一起使用吗？](https://stackoverflow.com/questions/14561430/is-this-possible-with-mysql)

首先：对不起标题，但也许我以后会找到更好的。

几分钟前我问过这个问题，但由于我无法描述我想要什么，我再试一次:)

这是我的表结构： [http ://sqlfiddle.com/#!2/b25f9/37](http://sqlfiddle.com/#!2/b25f9/37)

该表用于存储用户会话。

为此，我想生成一个堆积条形图，显示我有多少活跃用户。我的想法是像这样根据用户最近几天的在线时间对用户进行分组 ![在此处输入图像描述](../Images/6691e38b7d20bf00cbb4c0784a7c233a.png)

让我们说它的星期五：

*   B 组：周四（和今天）在线的用户
*   C组：星期四（和今天）不在线的用户
*   D组：周四或周三不在线但周二（和今天）的用户
*   E组：周四、周三或周二不在线但上周一、周日或周六（以及今天）的用户
*   A 组：与其他组不匹配的用户（但仅在今天）

*   我只想知道这些组中的用户数量（特定日期）

*   用户只能在其中一个组中（同一天）

# networking - RPC 在客户端加入游戏 Unity 时将变量从服务器发送到客户端

> ID：14566252
> 
> 赞同：0
> 
> 时间：2013-01-28T16:12:47.737
> 
> 标签：networking, unity3d, rpc, spawning

我有这个网络脚本运行良好，除非我想在不同的位置生成玩家。我根据当前连接的玩家数量确定位置。现在，变量正在服务器上更新，所以很好。但是当客户端加入游戏时，他的玩家数为 0。我想将其设置为从服务器变量连接的当前玩家数。我在搞乱 RPC 函数，但没有运气。

这就是我到目前为止所拥有的。

```
 var playerCount : int = 0;

    //player and jump master spawn componets
    var playerPrefab : GameObject;
    //spawn points
   var sp1: Transform;
    var sp2: Transform;
   var sp3: Transform;
   var sp4: Transform;

   var sp : Transform;

   function OnServerInitialized()
   {
 Debug.Log("Server initilized");
 playerCount++;
 spawnPlayer(sp1);

   }
   function OnPlayerConnected(networkPlayer:NetworkPlayer):void
   {
     Debug.Log (networkPlayer.guid + " connected");
     playerCount++;

     //spawnPlayer(sp2);
    //spawning player here does not work! Just a black screen no cam perhaps
   }

   function OnConnectedToServer()
   {
  //loop though every object in the game
    for(var go : GameObject in FindObjectsOfType(GameObject))
    {
        go.SendMessage("OnNetworkLoadedLevel", SendMessageOptions.DontRequireReceiver);
    }
    Debug.Log("Connected to server");
    Debug.Log("Player Count: " + playerCount);
    if(playerCount ==0)
    {
        sp = sp1;

    }
    if(playerCount ==1)
    {
        sp = sp2;

    }
    if(playerCount ==2)
    {
        sp = sp3;

    }
    if(playerCount ==4)
    {
        sp = sp4;

    }
    spawnPlayer(sp);

      }

    //spawn player prefab
    function spawnPlayer(SP : Transform)
    {
  Network.Instantiate(playerPrefab, SP.position, Quaternion.identity, 0);
}

    @RPC
   function SendPlayerCount(player : NetworkPlayer )
   {
  //send playercount to client from server
  networkView.RPC("assignvariableRPC",player,playerCount);
   }
    @RPC
    function RecivePlayerCount(count : int)
   {
//get playercount from server
//playerCount = playerCount;
playerCount = count;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T03:36:45.463

使用 NetworkView + OnSerializeNetworkView 制作一个全局不可见对象

那是你要的吗？

# ios - iOS 在 main.m 中崩溃，如何查找错误？

> ID：14566254
> 
> 赞同：1
> 
> 时间：2013-01-28T16:12:52.300
> 
> 标签：ios, crash, main

我收到了一些 iOS 应用程序的崩溃日志，因为我无法重现并且没有任何步骤来重现它。

崩溃日志告诉我崩溃起源于 main.m，之后都是系统库调用。你能告诉我如何找出应用程序崩溃的位置和原因吗？

这是完整的符号化崩溃日志：

```
Incident Identifier: 45C9CD85-2F19-4A29-B6E7-AFD43C7DD77F
CrashReporter Key:   [TODO]
Hardware Model:      iPhone5,2
Process:         radar [2327]
Path:            /Users/USER/radar.app/radar
Identifier:      com.example.radar
Version:         1.0
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2013-01-20 17:55:41 +0000
OS Version:      iPhone OS 6.0.2 (10A551)
Report Version:  104

Exception Type:  SIGABRT
Exception Codes: #0 at 0x37a5a350
Crashed Thread:  0

Application Specific Information:
*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'request for rect at invalid index path (<NSIndexPath 0x1e0c26b0> 2 indexes [0, 0])'

Last Exception Backtrace:
0   CoreFoundation                      0x3889b3e7 __exceptionPreprocess + 163
1   libobjc.A.dylib                     0x33e51963 _objc_exception_throw + 31
2   CoreFoundation                      0x3889b29d +[NSException raise:format:] + 1
3   Foundation                          0x312247b3 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 91
4   UIKit                               0x320dc057 -[UITableViewRowData rectForRow:inSection:] + 243
5   UIKit                               0x320f98d9 -[UITableView rectForRowAtIndexPath:] + 113
6   UIKit                               0x322635eb -[UIPickerTableView contentOffsetForRowAtIndexPath:] + 47
7   UIKit                               0x3243254b -[UIPickerTableView scrollViewWillEndDragging:withVelocity:targetContentOffset:] + 343
8   UIKit                               0x321ce0c3 -[UIScrollView _endPanWithEvent:] + 3699
9   UIKit                               0x321e741d -[UIScrollView handlePan:] + 125
10  UIKit                               0x321c8be9 _UIGestureRecognizerSendActions + 129
11  UIKit                               0x32190361 -[UIGestureRecognizer _updateGestureWithEvent:] + 393
12  UIKit                               0x3237cba3 ___UIGestureRecognizerUpdate_block_invoke_0543 + 47
13  UIKit                               0x320b4853 _UIGestureRecognizerRemoveObjectsFromArrayAndApplyBlocks + 219
14  UIKit                               0x320b329d _UIGestureRecognizerUpdate + 1165
15  UIKit                               0x320be1b7 -[UIWindow _sendGesturesForEvent:] + 767
16  UIKit                               0x320bdd83 -[UIWindow sendEvent:] + 91
17  UIKit                               0x320ab8b1 -[UIApplication sendEvent:] + 381
18  UIKit                               0x320ab1bf _UIApplicationHandleEvent + 6199
19  GraphicsServices                    0x384ec5f7 _PurpleEventCallback + 591
20  GraphicsServices                    0x384ec227 PurpleEventCallback + 35
21  CoreFoundation                      0x388703e7 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 35
22  CoreFoundation                      0x3887038b __CFRunLoopDoSource1 + 139
23  CoreFoundation                      0x3886f20f __CFRunLoopRun + 1383
24  CoreFoundation                      0x3736023d _CFRunLoopRunSpecific + 357
25  CoreFoundation                      0x373600c9 _CFRunLoopRunInMode + 105
26  GraphicsServices                    0x316aa33b _GSEventRunModal + 75
27  UIKit                               0x3821a291 _UIApplicationMain + 1121
28  radar                               0x00002073 main (main.m:16)
29  radar                               0x00002028 start + 40

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x37a5a350 ___pthread_kill + 8
1   libsystem_c.dylib                   0x3356c36b _abort + 95
2   radar                               0x000279e7 uncaught_exception_handler + 27
3   CoreFoundation                      0x3889b6cf __handleUncaughtException + 627
4   libobjc.A.dylib                     0x378f4a49 _ZL15_objc_terminatev + 129
5   libc++abi.dylib                     0x31c9311b _ZL19safe_handler_callerPFvvE + 79
6   libc++abi.dylib                     0x31c931b4 std::terminate() + 20
7   libc++abi.dylib                     0x3637762b ___cxa_rethrow + 95
8   libobjc.A.dylib                     0x33e519b5 _objc_exception_rethrow + 13
9   CoreFoundation                      0x373602a1 _CFRunLoopRunSpecific + 457
10  CoreFoundation                      0x373600c9 _CFRunLoopRunInMode + 105
11  GraphicsServices                    0x316aa33b _GSEventRunModal + 75
12  UIKit                               0x3821a291 _UIApplicationMain + 1121
13  radar                               0x00002073 main (main.m:16)

Thread 1:
0   libsystem_kernel.dylib              0x37a4a5d0 _kevent64 + 24
1   libdispatch.dylib                   0x31684378 _dispatch_mgr_thread + 36

Thread 2:
0   libsystem_kernel.dylib              0x37a49e30 _mach_msg_trap + 20
1   CoreFoundation                      0x388702bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x3886f031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3736023d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x373600c9 _CFRunLoopRunInMode + 105
5   WebCore                             0x33682a5d _ZL12RunWebThreadPv + 445
6   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 3:
0   libsystem_kernel.dylib              0x37a49e30 _mach_msg_trap + 20
1   CoreFoundation                      0x388702bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x3886f031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3736023d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x373600c9 _CFRunLoopRunInMode + 105
5   Foundation                          0x311b8dd3 -[NSRunLoop(NSRunLoop) runMode:beforeDate:] + 255
6   Foundation                          0x3125c455 -[NSRunLoop(NSRunLoop) run] + 81
7   radar                               0x00037fe5 +[AFURLConnectionOperation networkRequestThreadEntryPoint:] + 81
8   Foundation                          0x31265a41 __NSThread__main__ + 973
9   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 4:
0   libsystem_kernel.dylib              0x37a49e30 _mach_msg_trap + 20
1   CoreFoundation                      0x388702bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x3886f031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3736023d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x373600c9 _CFRunLoopRunInMode + 105
5   Foundation                          0x311e209d +[NSURLConnection(Loader) _resourceLoadLoop:] + 309
6   Foundation                          0x31265a41 __NSThread__main__ + 973
7   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 5:
0   libsystem_kernel.dylib              0x37a5a594 ___select + 20
1   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 6:
0   libsystem_kernel.dylib              0x37a5a08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x3350a875 _pthread_cond_timedwait + 45
2   JavaScriptCore                      0x35348dfb __ZN3WTF15ThreadCondition9timedWaitERNS_5MutexEd + 107
3   JavaScriptCore                      0x3038e537 JSC::BlockAllocator::blockFreeingThreadMain() + 83
4   JavaScriptCore                      0x303a1033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
5   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 7:
0   libsystem_kernel.dylib              0x37a5a08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x33514cfd _pthread_cond_wait + 41
2   JavaScriptCore                      0x303216e1 JSC::SlotVisitor::drainFromShared(JSC::SlotVisitor::SharedDrainMode) + 145
3   JavaScriptCore                      0x30321625 JSC::MarkStackThreadSharedData::markingThreadMain() + 145
4   JavaScriptCore                      0x303a1033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
5   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 8:
0   libsystem_kernel.dylib              0x37a49e30 _mach_msg_trap + 20
1   CoreFoundation                      0x388702bb __CFRunLoopServiceMachPort + 131
2   CoreFoundation                      0x3886f031 __CFRunLoopRun + 905
3   CoreFoundation                      0x3736023d _CFRunLoopRunSpecific + 357
4   CoreFoundation                      0x373600c9 _CFRunLoopRunInMode + 105
5   WebCore                             0x3371e0a9 _ZN7WebCoreL15runLoaderThreadEPv + 145
6   JavaScriptCore                      0x303a1033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
7   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 9:
0   libsystem_kernel.dylib              0x37a5a08c ___psynch_cvwait + 24
1   libsystem_c.dylib                   0x33514cfd _pthread_cond_wait + 41
2   JavaScriptCore                      0x35348dcd __ZN3WTF15ThreadCondition9timedWaitERNS_5MutexEd + 61
3   WebCore                             0x3389a251 WTF::PassOwnPtr<WebCore::StorageTask> WTF::MessageQueue<WebCore::StorageTask>::waitForMessageFilteredWithTimeout<bool ()(WebCore::StorageTask*)>(WTF::MessageQueueWaitResult&, bool (&)(WebCore::StorageTask*), double) + 57
4   WebCore                             0x3389a205 WebCore::StorageThread::threadEntryPoint() + 125
5   JavaScriptCore                      0x303a1033 _ZN3WTFL19wtfThreadEntryPointEPv + 15
6   libsystem_c.dylib                   0x31b800e1 _pthread_start + 309

Thread 10:
0   libsystem_kernel.dylib              0x37a5ad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x31b757f6 _pthread_wqthread + 366

Thread 11:
0   libsystem_kernel.dylib              0x37a5ad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x31b757f6 _pthread_wqthread + 366

Thread 12:
0   libsystem_kernel.dylib              0x37a5ad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x31b757f6 _pthread_wqthread + 366

Thread 13:
0   libsystem_kernel.dylib              0x37a5ad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x31b757f6 _pthread_wqthread + 366

Thread 14:
0   libsystem_kernel.dylib              0x37a5ad98 ___workq_kernreturn + 8
1   libsystem_c.dylib                   0x31b757f6 _pthread_wqthread + 366

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000     r1: 0x00000000     r2: 0x00000000     r3: 0x3a60c524 
    r4: 0x00000006     r5: 0x3a60cb78     r6: 0x21135690     r7: 0x2fd559dc 
    r8: 0x313023ab     r9: 0x3a608898    r10: 0x3130239c    r11: 0x0000001e 
    ip: 0x00000148     sp: 0x2fd559d0     lr: 0x3352ffb7     pc: 0x37a5a350 
  cpsr: 0x00080010 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:20:12.767

在丹 F 的回答后面。您的应用程序中有没有办法从表格视图中删除记录？看起来可能是由于错误地删除了记录。或者可能用户没有任何数据，但您仍在尝试将其加载到表格视图或其他东西中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:16:53.127

从崩溃日志来看，它认为索引路径[0,0]（第0节，第0行）无效。UIPickerView 完成滚动后似乎崩溃了。查看您对 pickerview 数据源和委托方法的实现，看看那里是否有任何问题。

否则，您可能能够从它崩溃的设备的控制台日志中获得更多信息

# javascript - 替换非 DOM 字符串中某个字符的所有实例

> ID：14566257
> 
> 赞同：1
> 
> 时间：2013-01-28T16:13:16.823
> 
> 标签：javascript, string, replace

我需要从变量中获取所有加号并用空格替换它们。我试过了：

```
someVariable = "0+123+45+6";
someVariable.replace(/+/g, ' '); 
```

但这不起作用......这种情况的正确语法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:25:36.947

the`+`是一个特殊的字符（一个或多个），所以你需要转义它。

应该`/\+/g`

**EDIT** 正则表达式不会修改字符串对象本身。但返回结果。

```
someVariable = "0+123+45+6";
someVariable = someVariable.replace(/\+/g, ' '); 
```

# python - 在 raw_input 中输入浮点数、整数或方程来定义变量

> ID：14566260
> 
> 赞同：1
> 
> 时间：2013-01-28T16:13:21.450
> 
> 标签：python, python-2.7, raw-input

我已经编写了这个程序，所以根据用户定义的值求解两个方程。常量 kx 和 ky，我定义为浮点数。对于范围 - 变量开始和结束 - 我希望用户输入一个数字，或者像 6 * np.pi (6Pi) 这样的东西。就像现在一样，我收到以下错误。如何定义此变量以允许用户输入多种类型的输入？谢谢！

```
 Traceback (most recent call last):
  File "lab1_2.py", line 11, in <module>
    x = np.linspace(start, end, 256, endpoint=True)
  File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-  packages/numpy/core/function_base.py", line 80, in linspace
    step = (stop-start)/float((num-1))
  TypeError: unsupported operand type(s) for -: 'str' and 'float' 
```

这是代码：

```
from pylab import *
import numpy as np

kx = float(raw_input("kx: "))
ky = float(raw_input("ky: "))

print "Define the range of the output:"
start = float(raw_input("From: "))
end = float((raw_input("To: "))

x = np.linspace(start, end, 256, endpoint=True)
y = np.linspace(start, end, 256, endpoint=True)

dz_dx = ((1 / 2.0) * kx * np.exp((-kx * x) / 2)) * ((2 * np.cos(kx *x)) - (np.sin(kx * x)))
dz_dy = ((1 / 2.0) * ky * np.exp((-ky * y) / 2)) * ((2 * np.cos(ky *y)) - (np.sin(ky * y)))

plot(x, dz_dx, linewidth = 1.0)
plot(y, dz_dy, linewidth = 1.0)
grid(True)

show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:18:26.183

您需要自己解析字符串（该`ast`模块可能很有用），或者使用`eval`：

```
>>> s = '6*pi'
>>> eval(s,{'__builtins__': None, 'pi': np.pi})
18.84955592153876 
```

[请](http://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)注意，用户可以使用`eval`. 我的解决方案可以保护您免受*大多数*问题的侵害，但不是全部 - 预先检查字符串以确保没有任何`__`会使其更加安全（这消除了我所知道的所有漏洞，但*可能*还有其他漏洞)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:17:45.340

> 我希望用户输入一个数字，或者像 6 * np.pi (6Pi) 这样的东西。

要实现这一点，您需要做两件事：

*   首先，检查您的输入是 int 还是 float

    这很简单。您可以通过多次检查来`isinstance`检查

*   如果没有，那么您需要将输入作为命令执行并将输出保存在变量中

    一旦你确定它是一个命令，你就可以使用`exec`or`eval`命令来执行输入并将输出存储在一个变量中。

    示例：`exec("""v = 6*2""")`或`v = eval("6*2")`两者都分配 12`v`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T11:59:26.017

我正在使用 Python 2.7 和 Ecpise 工作区。**通过使用raw_input**，此源代码对我来说运行良好。

```
import time

startTime = time.clock()
print "{0:*^80}".format(" Begins ")

name = raw_input('Please give the name : ')
print "Name is : ".ljust(40, '.'), name
print "Length of name : ".ljust(40, '.'), len(name)

print
radius = float(raw_input('Please enter the radius of circle : '))
print "Radius is : ".ljust(40, '.'),radius
diameter = float(2 * radius)
print "Diameter of circle is : ".ljust(40, '.'), diameter

print "\n{0:*^80}".format(" End ")

print "\nElapsed time : ", (time.clock() - startTime)*1000000, "microseconds" 
```

* * *

在这里，**输入：**
名称：*“先生！Guido von Rossum”*和
半径：*1.1*

**输出 ：**

```
************************************ Begins ************************************
Please give the name : Sir! Guido von Rossum
Name is : .............................. Sir! Guido von Rossum
Length of name : ....................... 21

Please enter the radius of circle : 1.1
Radius is : ............................ 1.1
Diameter of circle is : ................ 2.2

************************************* End **************************************

Elapsed time :  3593748.49903 microseconds 
```

想一想，可能对你或其他人有帮助。
谢谢

# jquery - 响应式居中和裁剪非背景图像

> ID：14566262
> 
> 赞同：1
> 
> 时间：2013-01-28T16:13:25.910
> 
> 标签：jquery, css, responsive-design, image-resizing

我正在创建一个响应式照片和文本滑块，它使用外部包装器缩放水平图像以用于大窗口大小，然后使用溢出：隐藏负边距（ (wrapperWidth - imageWidth)/2 ）和图像最大宽度为 400% 用于较小的窗口尺寸。这允许显示中央裁剪的肖像图像。

```
<div class="slider">
    <ul class="slides">
        <li><a href=""><img alt="" src="image.jpg"/></a> 
        <div class="caption">
           <h2><a href="">Large Caption</a></h2>
           <p><a href="">Small Caption</a></p>
        </div>  
    </li>
    etc.etc.
</div>

.slider .slides li{
    width: 100%;
    overflow: hidden;
}
.slider .slides img{
    max-width: 400%;
}
etc.

$(window).resize(function(){
    var container = $('.slider');
    imageWidth =container.find('.slides img').width();
    wrapperWidth =container.find('.slides').width();
    margin = (wrapperWidth - imageWidth) / 2;
    container.find('.slides img').css('margin-left', margin)
}); 
```

**问题**

该设置在页面加载时效果很好，但是当调整浏览器窗口的大小时，Jquery 似乎会随机松动图像宽度（返回 0），同时仍然正确计算包装器宽度。然后，这会计算出不正确的边距值，并且不会使图像居中。

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:04:57.220

我认为这会奏效。我没有测试过：

```
$(function() {
$(window).on("resize", function()
    {
        var container = $(".slider");
        imageWidth =container.find(".slides img:eq(0)").width();
        wrapperWidth =container.find(".slides").width();
        margin = (wrapperWidth - imageWidth) / 2;
        container.find(".slides img").css({"margin-left": margin})
    });
}); 
```

# ios - 使用 facebook sdk startForUploadPhoto 时此服务器的证书无效错误

> ID：14566263
> 
> 赞同：3
> 
> 时间：2013-01-28T16:13:27.887
> 
> 标签：ios, objective-c, facebook

我的代码是这样的：

```
 [FBRequestConnection startForUploadPhoto:[UIImage imageNamed:@"1.png"] 
        completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    if (error) {
          NSLog(@"%@",error);
     }
    }]; 
```

错误是：

```
错误 Domain=com.facebook.sdk Code=5 “操作无法完成。（com.facebook.sdk 错误 5。）”

UserInfo=0x933e390 {com.facebook.sdk:ErrorInnerErrorKey=错误域=NSURLErrorDomain 代码=-1202

“此服务器的证书无效。您可能正在连接到假装的服务器
“graph.facebook.com”可能会使您的机密信息面临风险。”

 UserInfo=0x9338700 {NSErrorFailingURLStringKey=https://graph.facebook.com/me/photos?sdk=ios&access_token=BAAEPZAb5iLukBADkyh9M8guUFRJwXuGKI6HnZAZAwMvpQtv3RKsD6M62J4inW1oG8DmY5l81pIz4MhcRHMbLsUAlxEqWq557pYCHXqoF9Gv3FdRTrV9Ai3QuL6zBeM7OoSWvOKlFt1fZAx5h0wkh&migration_bundle=fbsdk%3A20121003&format=json,

 NSLocalizedRecoverySuggestion=你还是要连接到服务器吗？,

NSErrorFailingURLKey=https://graph.facebook.com/me/photos?sdk=ios&access_token=BAAEPZAb5iLukBADkyh9M8guUFRJwXuGKI6HnZAZAwMvpQtv3RKsD6M62J4inW1oG8DmY5l81pIz4MhcRHMbLsUAlxEqWq557pYCHXqoF9Gv3FdRTrV9Ai3QuL6zBeM7OoSWvOKlFt1fZAx5h0wkh&migration_bundle=fbsdk%3A20121003&format=json,

NSLocalizedDescription=此服务器的证书无效。您可能正在连接一个伪装成“graph.facebook.com”的服务器，这可能会使您的机密信息面临风险。,

 NSUnderlyingError=0xa32e810 "此服务器的证书无效。您可能正在连接到
 伪装成“graph.facebook.com”的服务器，这可能会使您的机密信息面临风险。",
NSURLErrorFailingURLPeerTrustErrorKey=}, com.facebook.sdk:HTTPStatusCode=200}

```

我该如何解决？

# android - 小部件onClick中的Android ListView不起作用

> ID：14566267
> 
> 赞同：5
> 
> 时间：2013-01-28T16:13:31.397
> 
> 标签：android, android-widget, android-listview, remoteview, android-pendingintent

我正在尝试使用该方法使我的 ListView Widget 中的列表行可点击，`setOnClickFillInIntent`但每当我点击 ListItem 时，什么都没有发生。以下是我的代码的一些关键部分：

```
Intent i = new Intent();
Bundle extras = new Bundle();

extras.putInt(Resource.WIDGET_PACKAGE, position);
i.putExtras(extras);
row.setOnClickFillInIntent(R.id.widget_layout_parent, i); 
```

这是`getView()`在我的 ViewFactory 的末尾。Resource.WIDGET_PACKAGE 包含我的包名称，就像任何其他键一样。位置 int 来自`getView()`参数。`R.id.widget_layout_parent`是所有列表项中的父布局。

这是我的 WidgetProviders 的结尾`onUpdate()`

```
Intent clickIntent = new Intent(context, ItemListActivity.class);

PendingIntent clickPI = PendingIntent.getActivity(context, 0,
        clickIntent, PendingIntent.FLAG_UPDATE_CURRENT);

widget.setPendingIntentTemplate(R.id.widget_layout_parent, clickPI);

appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetIds[i],
        R.id.widget_list_view); 
```

有什么我想念的吗？或者还有什么你想知道的吗？

感谢所有帮助！:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-28T17:10:59.603

当您调用`setPendingIntentTemplate(...)`时，`id`应该是 AdapterView（在本例中为 ListView）。当您调用`setOnClickFillInIntent(...)`时，`id`应该是项目布局的根视图，如果我正确阅读了您的原始帖子，这就是您已经在做的事情。

```
public void onUpdate(Context context, AppWidgetManager manager, int[] appWidgetIds) {
    /* ... */
    widget.setPendingIntentTemplate(R.id.appwidget_listview, clickPI);
    /* ... */
}

public RemoteViews getViewAt(int position) {
    /* ... */
    row.setOnClickFillInIntent(R.id.widget_layout_parent, intent);
    /* ... */
    return row;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-10T02:54:24.247

@karakuri 的上述回答非常完美。

setPendingIntentTemplate 和 setOnClickFillInIntent 必须一起使用。一个没有另一个就行不通。

# google-analytics - 谷歌分析网站搜索与谷歌标签管理器

> ID：14566268
> 
> 赞同：2
> 
> 时间：2013-01-28T16:13:31.333
> 
> 标签：google-analytics, google-tag-manager

我目前已经在我的网站上部署了 Google 跟踪代码管理器，并且在我的容器中只有一个标准的 Google Analytics 代码可以在每个页面上触发。我想捕捉到我网站的访问者在我们网站上搜索产品时使用的术语。回到 Google Analytics，我启用了站点搜索，并在包含访问者站点搜索词的 URL 中提供了查询参数。但是，没有数据可以返回到 Google Analytics 中的站点搜索报告，所以我想知道是否需要在跟踪代码管理器中创建一个单独的标签来处理这个问题。

有人可以建议如何将 Google Analytics Site Search 与 Google Tag Manager 一起使用吗？我对谷歌分析和跟踪代码管理器都很陌生，所以任何指导和细节都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:12:30.503

我能够解决这个问题。事实证明，我只需要在跟踪代码管理器中创建一个容器版本，并在我的 Google Analytics 配置文件设置中修改查询参数后发布它。网站搜索数据现在流入 Google Analytics。

# javascript - jQuery Datatables 和 jScrollPane 标题滚动

> ID：14566269
> 
> 赞同：2
> 
> 时间：2013-01-28T16:13:32.650
> 
> 标签：javascript, jquery, jquery-plugins, jscrollpane, jquery-datatables

我正在尝试为 jQuery Datatables 获得自定义外观的水平滚动条。使用我到目前为止找到的一些信息，我想出了这样的事情：

```
$('#table').dataTable({
    "bFilter": false,
    "bLengthChange": false,
    "bInfo": false,
    "sPaginationType": "two_button",
    "iDisplayLength": 6,                    

    "sScrollX": "100%",
    "sScrollXInner": "110%",
    "bScrollCollapse": true,            

    "fnInitComplete": function() {
        var table_header,
        _this = this;
        table_header = $('.dataTables_scrollHeadInner').css('position',
            'relative');
        $('body').find('.dataTables_scrollBody').bind('jsp-scroll-x',
            function(event, scrollPositionX, isAtLeft, isAtRight) {
                table_header.css('right', scrollPositionX);
            }).jScrollPane({
                verticalDragMinHeight: 8, 
                verticalDragMaxHeight: 8,
                horizontalDragMinWidth: 82, 
                horizontalDragMaxWidth: 82,
                autoReinitialise: true
            });
        }); 
```

它工作正常：但是，当我调整窗口大小时，表格标题不会像内容那样缩小（标题比内容宽）。有没有办法将 jScrollPane 附加到 jQuery Datatables 以同样滚动标题和正文？我的意思是：

```
$('#blabla').find('.dataTables_scrollBody').jScrollPane(); 
```

但对于滚动体和滚动头。或者有什么方法可以初始化可滚动数据表而不分割标题和正文？

谢谢！

# oracle - 如何在 oracle 中进行这种排序工作？

> ID：14566271
> 
> 赞同：0
> 
> 时间：2013-01-28T16:13:36.933
> 
> 标签：oracle, sorting, sql-order-by

我有列值，例如`A1,A20........A10.`当我进行排序时，值显示为`A1,A10, A2`等等......

但是，我想以这种格式显示列

```
A1
A2
A10
A20 and so on.. 
```

有人可以告诉我如何实现这种排序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:21:47.257

如果您的列的模式只是 AZ + 一些数字，您可以使用

```
select id
  from your_table
 order by regexp_replace(id, '[0-9]', ''), 
          to_number(regexp_replace(upper(id), '[A-Z]', '')); 
```

`regexp_replace(id, '[0-9]', ''),`

上面只保留“A”，然后是“B”等。如果你不想这样做，你可以删除它。

但如果任何行有任何其他非数字字符，则查询将因无效数字而失败。

例如：

```
SQL> select * from tester order by id;

ID
-----
A1
A10
A2
A3
A4
A5
A6
A7
A8
A9
B1
B10
B2
B3
B4
B5
B6
B7
B8
B9

20 rows selected.

SQL> select id from tester order by regexp_replace(id, '[0-9]', ''), to_number(regexp_replace(upper(id), '[A-Z]', ''));

ID
-----
A1
A2
A3
A4
A5
A6
A7
A8
A9
A10
B1
B2
B3
B4
B5
B6
B7
B8
B9
B10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:37:34.713

Ask Tom 的另一种方法：

```
select x from t
order by decode(sign(ascii(substr(lpad(x, 2), 2))-64), 1,
                lpad(x, 3, chr(58)),
                lpad(x, 2)); 
```

[关联](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:786026162431#7960923350503)

# ios - Cocos2D。如何给精灵着色？

> ID：14566272
> 
> 赞同：0
> 
> 时间：2013-01-28T16:13:37.913
> 
> 标签：ios, objective-c, cocos2d-iphone, tint

假设我对我的精灵应用了以下着色：

```
CCTintTo *tint = [CCTintTo actionWithDuration:2 red:50 green:50 blue:50];
[self runAction:tint]; 
```

我怎么把它染回来？如何恢复以前的颜色并使精灵看起来像以前一样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:18:17.403

简单的：

```
sprite.color = ccWhite; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:20:50.107

你有没有尝试过？

```
CCTintTo *tint = [CCTintTo actionWithDuration:0 red:255 green:255 blue:255];
[self runAction:tint]; 
```

# javascript - Javascript - 单击类的跨度

> ID：14566281
> 
> 赞同：1
> 
> 时间：2013-01-28T16:14:02.807
> 
> 标签：javascript, jquery, firebug

据我了解，这应该很简单，但是在执行此操作时出现错误。我在网站上有一个按钮，按钮内具有不同的跨度，一旦单击它们，跨度就会使用 Jquery 更改。使用 Firebug，我试图查看我的 click 方法适用于第一个跨度文本，但由于某种原因，我收到以下错误。我究竟做错了什么？（注意，页面上使用的是最新的 Jquery）

**HTML：**

```
<button id="signup_forms_submit" class="chrome big on_dark signup_forms_submit touchy blue">
        <span class="account_btn">Start</span>
        <span class="birthday_btn">Next</span>
        <span class="captcha_btn"><span><b>Almost</b> <b>Done!</b></span></span>
        <span class="login_btn">Log in</span>
    </button> 
```

**jQuery 命令：**

```
$('.account_btn').click(); 
```

**Firebug 控制台日志：**

```
TypeError: $(...) is null

$('.account_btn').click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:24:58.597

在您的控制台中，键入：

```
jQuery 
```

这给了你什么？因为看起来您根本没有加载 jQUery。尝试打开一个新标签（一个空标签）并将其输入控制台，看看你会得到什么:-)

```
$('.span').click()
TypeError: Cannot call method 'click' of null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:21:24.017

由于您的跨度在按钮内，初始点击事件将触发按钮的点击事件，而不是跨度的特定操作。

如果您希望按钮内的每个跨度都有不同的事件，则应将它们括在 div 中，而不是按钮并绑定事件：

```
$(function(){  
    $('span.account_btn').click(function(e){
        e.preventDefault(); 
        // Do something
    });
}); 
```

此外，如果您编写以下内容，您会看到“account_btn”类的跨度不为空。

```
$(function(){
    console.log($('span.account_btn'));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:16:46.197

尝试

```
$('span .account_btn').click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:21:27.393

从未见过按钮内的“子按钮”。首先尝试创建单个按钮，可能跨越但不在此按钮标签内。这个html是用js生成的吗？也许你应该使用

```
$(document).on('click','.account_btn', function(){...}); 
```

然后。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T16:22:29.013

可能你那里有兼容性问题。

尝试：

```
$J = jQuery.noConflict();
$J(function() {
    $J('.account_btn').click();
}); 
```

# c++ - 在 C++03 中通过 int 传输 double 是否安全？

> ID：14566290
> 
> 赞同：1
> 
> 时间：2013-01-28T16:14:36.143
> 
> 标签：c++, double, unions, type-punning

编辑：跳到我最新版本的问题的水平规则下方。

仅假设 sizeof(double) * CHAR_BITS <= 64，C++03 保证以下程序中的断言始终得到满足？

```
union u {
  std::int64_t m_int;
  double       m_double;
};

int main()
{
  double d = get_a_random_double();

  u u1;
  u1.m_double = d;

  u u2;
  u2.m_int = u1.m_int;

  assert(u2.m_double == d);
} 
```

我担心标准可能无法保证 int64_t 值的副本保留我们用来保存双精度的所有位。

另一方面，我很确定标准保证以下使用 chars 而不是 unt64_t 的替代方案始终满足断言：

```
struct chars {
  char m_x[sizeof(double)];
};

union u {
  chars  m_chars;
  double m_double;
};

int main()
{
  double d = get_a_random_double();

  u u1;
  u1.m_double = d;

  u u2;
  u2.m_chars = u1.m_chars;

  assert(u2.m_double == d);
} 
```

你同意？

* * *

编辑：

好的，我必须承认标准不支持通过联合进行的转换。

那么这个我尝试在不使用联合的情况下通过一系列字符传输双精度数的情况呢：

```
int main()
{
  double d, e;
  char c[sizeof(double)];

  char* p_d = static_cast<char*>(static_cast<void*>(&d));
  char* p_e = static_cast<char*>(static_cast<void*>(&e));

  d = get_a_random_double();

  // double -> chars
  std::copy(p_d, p_d+sizeof(double), c);

  // chars -> double
  std::copy(c, c+sizeof(double), p_e);

  assert(e == d);
} 
```

这个标准是否保证始终满足断言？

**编辑：是的！**参见 C++11 3.9/2“类型”

下一个我尝试在不使用联合的情况下通过 int64_t 传输双槽的情况如何。

我知道 int64_t 不是 c++03 的一部分，所以让我们来谈谈 c++11。

再次注意，我假设 sizeof(double) * CHAR_BITS <= 64。

```
int main()
{
  double d, e;
  std::int64_t i, j;
  char c[sizeof(std::int64_t)];

  char* p_d = static_cast<char*>(static_cast<void*>(&d));
  char* p_e = static_cast<char*>(static_cast<void*>(&e));
  char* p_i = static_cast<char*>(static_cast<void*>(&i));
  char* p_j = static_cast<char*>(static_cast<void*>(&j));

  d = get_a_random_double();

  // double -> chars -> std::int64_t
  std::copy(p_d, p_d+sizeof(double), c);
  std::copy(c, c+sizeof(std::int64_t), p_i);

  // std::int64_t -> std::int64_t
  j = i; // <------------ Are all bits preserved here?

  // std::int64_t -> chars -> double
  std::copy(p_j, p_j+sizeof(std::int64_t), c);
  std::copy(c, c+sizeof(double), p_e);

  assert(e == d);
} 
```

和以前一样，我担心的一个问题是复制标准整数类型之一 (std::int64_t) 是否会“损坏”某些位（例如，一些不参与整数值表示的位）。或者，整数分配是否保证总是忠实地复制整数占用的字节的所有位？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:15:37.823

不，实际上这是未定义的行为：

```
u u1;
u1.m_double = d;

u u2;
u2.m_int = u1.m_int; 
```

你不能设置`u1.m_double`和阅读`u1.m_int`。

一次只允许一名活跃的工会成员。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T16:24:22.030

该语言本身并不能保证您可以使用除`char`或`unsigned char`指针之外的任何其他类型来访问其他数据类型——即使这样也是相当有限的。

这完全取决于您希望代码的可移植性。有些机器处理浮点数的方法很奇怪，并且将它们四处转换会做坏事。

在实践中，大多数处理器对您刚刚完成的操作非常满意，并且大多数编译器都非常乐意生成“正确”代码以覆盖 64 位整数和 64 位浮点数，并将其传输到方式。

当您尝试在 DSP、旧的 IBM 硬件、Cray YMP 或其他有点不寻常的东西上运行它时，麻烦就来了。或者，如果您开始使用未经测试的编译器。

So to some degree, it comes down to "how portable do you need it to be", and how well is your software tested for this to not creep through as a strange error that only occurs on Tuesdays in months with R in the name, and only on days that are evenly divisible with 7 and 3, with a full moon? [And inevitably, only by your most important customer that is in a country about 12 hours off your timezone].

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:17:11.247

所有具有固定大小的类型都是 c++11。在此之前，该标准只定义了变量必须保持的**最小**位数（其中大多数只保证至少与前一个实际一样大......）。所以`std::int64_t`将在 c++03 中未定义，您不能依赖任何大小的其他整数（包括 char！）。

* * *

此外，正如 Luchian Grigore 指出的那样：（任何）标准都没有定义给一个工会成员写信和从另一个工会成员读。然而，虽然不能保证您编写的代码能够正常工作，但大多数编译器会按照您的预期方式解释它。

# java - Java.NullPointerException null

> ID：14566291
> 
> 赞同：1
> 
> 时间：2013-01-28T16:14:36.233
> 
> 标签：java, null, nullpointerexception

以下是我的代码片段：

```
class Lines{
int nameMax() throws IOException{
    // initialize variables
    // These will be the largest number of characters in name
    int namelen = 0;

    //These will be the current word lenght.     
    int namelenx = 0;

    ... 

    while(name != null){
        name = br.readLine();
        namelenx = name.length();

    ...

        if(namelenx > namelen) namelen = namelenx;

    }

    float nameleny = namelen/2; //Divides by 2 to find midpoint

    namelen = Math.round(nameleny); //Value is rounded

    return namelen;
}   
} 
```

我正在使用 BlueJ，每当我尝试运行它时，它都会在标题中显示错误并突出显示`namelenx = name.length();`There are String variables for`name`因为它是我剪切的代码的一部分。请帮忙解答。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:17:06.590

当您在 null 上调用时，它会在返回时抛出**NPE 。**您的 while 循环应如下所示：`br.readLine()``null``length()`

```
while((name= br.readLine())!=null){
        namelenx = name.length(); 
```

现在，即使`bufferedReader`在您的 while 上返回 null`readLine()`也会终止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:20:14.017

可能，你想改变

```
while(name != null) 
```

到

```
while((name = br.readline()) != null) 
```

通过这种方式，您正在检查 la 读取的内容`br`，`null`您可以确定`name`is never `null`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:16:53.473

```
name = br.readLine(); 
```

很可能返回 null。这是你所期望的吗？从[doc](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/BufferedReader.html#readLine%28%29)，它返回：

> 包含行内容的字符串，不包括任何行终止字符，如果已到达流的末尾，则为 null

所以你很可能已经到了输入的结尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:18:36.463

正确的方法是：

```
String name = null;

while((name = br.readLine()) != null) {
    ...
} 
```

# php - 通过取消选中复选框将空值设置为文本字段

> ID：14566295
> 
> 赞同：0
> 
> 时间：2013-01-28T16:14:56.157
> 
> 标签：php, checkbox, textfield

我有一个带有 2 个文本字段的表单，它们触发了一个 jquery 日期选择器。

我想通过取消选中相同形式的复选框来为两个文本字段设置空值。

文本字段是：

```
<?php 
   if ($_GET["arrival"]== "") 

   echo ' 
   <label for="arrival">Arrival </label>
   <input type="text" name="arrival" class="w8em format-d-m-y highlight-days-67 range-low-today" id="arrival" value="Select Date"/> ';

   else

   echo ' 
   <label for="arrival">Arrival </label>
   <input type="text" name="arrival" class="w8em format-d-m-y highlight-days-67 range-low-today" id="arrival" value="' . $_GET["arrival"] . '"/> '; 
   ?>

<?php

   if ($_GET["departure"]== "") 

   echo ' 
   <label for="departure">Departure </label>
   <input type="text" name="departure" class="w8em format-d-m-y highlight-days-67 range-low-today" id="departure" value="Select Date"/> ';  

    else

    echo ' 
    <label for="departure">Departure </label>
    <input type="text" name="departure" class="w8em format-d-m-y highlight-days-67 range-low-today" id="departure" value="' . $_GET["departure"] . '"/> '; 
    ?> 
```

复选框是：

```
<input name="avail" type="checkbox" id="avail"
                 <?php if ($_GET["avail"]== "1") echo "checked=\"checked\""; ?>
                 value="1" /> 
```

我想通过取消选择它来为文本字段设置空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:10:54.397

您可以使用 jquery 使其正常工作。

复选框 `onclick event`，您可以为文本字段设置空值。

```
<script>
        function empty()
        {
           if($("#avail:checked").length > 0)
           {
              $('#arrival').val('');
              $('#departure').val('');
           }
        }
</script> 
```

在复选框上添加 onclick 事件

```
<input name="avail" type="checkbox" id="avail"
             <?php if ($_GET["avail"]== "1") echo "checked=\"checked\""; ?>
             value="1" onclick="empty();"/> 
```

# jquery - jsf核心+plupload+jquery编辑器

> ID：14566302
> 
> 赞同：0
> 
> 时间：2013-01-28T16:15:05.447
> 
> 标签：jquery, jsf, plupload

我有一个包含这些组件的 jsf 网页：

1.  jsf 标签 h:textedit 在 ajax 中工作，它是一个自动完成组件
2.  一个 jQuery 编辑器
3.  plupload (jQuery 图片上传插件)

此页面有时有效，有时无效。当它不起作用时，我必须等待一秒钟并刷新它才能起作用。
当我只在页面中制作 jQuery 编辑器 + plupload 时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T17:08:05.253

问题出在 jQuery 编辑器上。我将其更改为一些 tinyMCE，一切正常。

# html - 在 HTML 中的 div 中播放视频

> ID：14566303
> 
> 赞同：2
> 
> 时间：2013-01-28T16:15:08.450
> 
> 标签：html

我正在尝试在 html 的 div 标签中播放视频，但是当我使用以下代码时，浏览器询问我是否要下载视频。我不想下载它，我只想玩它。此消息也出现在 div 中

> “您需要安装扩展程序才能查看此内容”

我用的是火狐浏览器

这是我在 html 文件中使用的：

```
<div>
<object type="Brave/quicktime" data="Brave.avi" width="624" height="352">
<param name="pluginurl" value="http://www.apple.com/quicktime/download/" />
<param name="controller" value="false" />
<param name="autoplay" value="true" />
</object>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:20:42.947

尝试使用视频标签

```
 <div>
   <video width="700" height="450" controls="controls" poster="image" preload="true">
     <source src="where the video is" type="video/mov"/>
     <source src="where the video is" type="video/mp4" />
     <source src="where the video is" type="video/oog" />
     Your browser does not support the video tag.
   </video>
</div> 
```

您还需要使用不同的视频类型。html5 视频标签不支持 AVI 文件类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:19:46.663

试试这个

```
<video width="624" height="352" controls>
<source src="Brave.mp4" type="video/mp4">
Your browser does not support the video tag.
</video> 
```

此外，我不会使用 AVI 作为视频格式。

使用 MP4 然后您可以使用 HTML5 视频标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:17:40.643

您的主要问题是您使用了无效的 MIME 类型（正如您自己指出的那样，浏览器返回“无效的 MIME 类型”消息）。您还使用了`<object>`从 HTML5 开始不推荐使用的标记。

在使用最新标记之前，请确保您的`DOCTYPE`声明为 , `<DOCTYPE html>`，仅此而已。这告诉浏览器您正在使用 HTML5 文档，并且应该加载正确的标签定义。如果您声明 HTML4 `DOCTYPE`，您的浏览器可能无法处理 HTML5 标记。

完成后，使用`<video>`标签。现在，您的标记应如下所示：

```
<DOCTYPE html>
<html>
    <head>
    <!-- your styles, scripts, and other head info -->
    </head>

    <body>
        <video src="Brave.avi" controls="yourControls" autoplay="false">
        Your browser doesn't support the `<video>` tag. /*this is a fallback*/
        </video>
    </body>
<html> 
```

您会注意到标签没有`type`属性。`<video>`那是因为*[标签`<video>`实际上并不支持该属性](http://www.w3.org/wiki/HTML/Elements/video)*。这可以减少编码，这总是一件好事。

附带说明，避免使用该`.avi`格式。h264 编解码器刚刚成为官方标准，这意味着使用`.mp4`，甚至经常被忽视的`.ogg`格式更可取，因为它们使用的带宽更少，并且得到更广泛的支持。

# jquery - jquery flexipage

> ID：14566306
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:15:31.523
> 
> 标签：jquery, plugins

在深入研究 JavaScript 混乱之前，我想我会问这个问题。我正在使用一个名为 flexipage 的分页插件，它工作得很好……如果我使用 jquery 1.8.2，但我想使用最新版本的 jquery 在其他地方使用其他一些功能。

我只是好奇那里是否有其他人遇到过这个问题并知道发生了什么。如果没有，那么我会在帖子中为其他人挖掘答案。

这是我得到的错误

```
Error: Syntax error, unrecognized expression: .pager .next, 
```

编辑：似乎实际的 jquery 正在抛出错误。这是 jquery 插件代码的链接。[https://github.com/vieron/flexipage/blob/master/javascripts/jquery.flexipage.js](https://github.com/vieron/flexipage/blob/master/javascripts/jquery.flexipage.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T15:57:39.573

我遇到了同样的错误，发现在第 152 行的脚本中，它是这样写的：

```
$(opts.pager_selector+' .next,', opts.wrapper).addClass('disabled'); 
```

我把它换成了

```
$(opts.pager_selector+' .next', opts.wrapper).addClass('disabled'); 
```

现在它可以工作了。似乎有一个不应该存在的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:08:03.517

我想出了如何解决这个错误。而不是立即为插件调用 init。首先获取 ul 的长度，并且仅在达到您的长度时才显示分页。那应该可以解决错误。

```
if($(".item li").length>3)
 {
   $(".item").flexipage()
 } 
```

当没有以前的页面可以访问时，插件中似乎出现了一些问题，因此它会引发该错误。如果在没有上一页的情况下消除前一页，那么错误就会消失。

# java - 是否值得测试json响应的值

> ID：14566313
> 
> 赞同：2
> 
> 时间：2013-01-28T16:15:43.537
> 
> 标签：java, unit-testing, rest

我正在编写一个返回 JSON 的 Web 服务，我想知道，是否值得对响应的值进行单元测试，或者我更有可能通过这样做来测试执行编组的框架？

现在有这样写的测试：

```
@Test
public void getPersonWithAnIdNameShouldBeBob() {
    expect().body("name", equalTo("bob")).when().get("/getperson/1");
} 
```

我应该更多地关注业务逻辑、方法调用等吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:19:06.483

这取决于，但是：

到目前为止，这看起来像是一个集成测试，而不是一个单元测试。

因此，这是一个有效的测试：您正在使用一些已知数据测试一些路由。

*单元*测试将独立测试服务，绕过 Web 层，并寻找验证或数据库连接错误处理、未找到处理等内容。

这些测试在哪里*运行*也可能取决于框架，并且在某些情况下，如果它们由框架处理，可能无法提供最佳的投资回报率。

测试最脆弱、需要最多文档、需要练习等的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T10:37:13.593

我也认为这取决于。如果您有一个公共 JSON API，我认为验证它的外观和行为是否相应非常重要。在几个没有 REST 端点测试的项目中，我发现 JSON 没有以预期的方式呈现。

# tfs - TFS 2012 团队警报未发送电子邮件

> ID：14566315
> 
> 赞同：23
> 
> 时间：2013-01-28T16:15:44.627
> 
> 标签：tfs

我无法获得 TFS 2012 工作的团队警报。我的问题与这个问题基本相同（[TFS 2012 Team Alerts 不起作用](https://stackoverflow.com/questions/14351753/tfs-2012-team-alerts-do-not-work)）。但是由于我能够详细说明我的问题，我决定再问一次。

*   个人警报确实有效，所以这不是一个明显的 smtp 服务器错误
*   团队警报不起作用
*   我们的 TFS 未连接到活动目录
*   所有用户都在他们的偏好中指定了“首选电子邮件”
*   用户被分配到我的警报指定的团队

这是一个很好的个人警报示例

![有效的个人警报示例](../Images/4516e2f0d57ce3eff8425f287de797ae.png)

这是一个不起作用的团队**警报**示例

![无效的团队警报示例](../Images/381c1d53984c12b3ea30db4ffcbf247e.png)

除了过滤器中的“通配符”参数外，设置基本相同

TFS 在哪里选择*[Members' Default Alert Address]*？这与首选电子邮件不同吗？

任何指针将不胜感激

**附录**

查看 Tfs cammand 提示工具 (tfsconfig configuremail) 和管理控制台会引发更多问题

Team Foundation Server 管理控制台显示**启用的**警报和正确的设置

![Team Foundation Server 管理控制台，电子邮件警报设置](../Images/a65ad1cdef90fa46e3bbf7a39e0f1883.png)

但是命令提示符工具 tfsconfig configuremail 说警报被**禁用**

![tfsconfig 配置邮件](../Images/faff4535ee858a8b2268148594ed8ac7.png)

我发现无法使用命令提示工具 ( [http://msdn.microsoft.com/en-us/library/vstudio/dd236903.aspx](http://msdn.microsoft.com/en-us/library/vstudio/dd236903.aspx) ) 激活警报，只有管理控制台中的复选框

目前主要线索：

1.  TFS 在哪里选择*[Members' Default Alert Address]*？
2.  为什么启用/禁用警报不匹配？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-06T15:07:49.820

我决定自己回答这个问题，主要是因为它可能不是没有活动目录的 tfs 的正确解决方案（基于[这篇](https://stackoverflow.com/questions/9209086/where-do-i-administrate-the-email-addresses-of-tfs-users)文章中的答案/评论）

这些是我为确保发送团队警报而采取的步骤

1.  确保您的设置正确 [http://msdn.microsoft.com/en-us/library/ms400808(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms400808(v=vs.110).aspx)
2.  确保您的团队警报中有团队项目过滤器
3.  在 Team Foundation Server 管理控制台中启用团队警报 ![Team Foundation Server 管理控制台](../Images/13b879ada584d18ee7994eebcc02e8e5.png)
4.  使用 tfsconfig 命令提示工具启用团队警报（这是一个未记录的功能） `tfsconfig configuremail /Enabled:True`
5.  检查事件查看器日志 ![Tfs 事件查看器日志](../Images/ffac18da24e65eea88e1ff005b73d58f.png)
6.  确保所有名称都直截了当，没有任何撇号或特殊字符，尝试只有一个成员并进行测试，并开始每次测试都增加成员数量，直到遇到问题。（感谢来自[此答案](https://stackoverflow.com/questions/14351753/tfs-2012-team-alerts-do-not-work "这个答案")的 M. Radwan ）
7.  使用本指南诊断电子邮件和 SOAP 订阅失败 [http://blogs.msdn.com/b/granth/archive/2009/10/28/tfs2010-diagnosing-email-and-soap-subscription-failures.aspx](http://blogs.msdn.com/b/granth/archive/2009/10/28/tfs2010-diagnosing-email-and-soap-subscription-failures.aspx)
8.  确保广告中的用户收到正确的电子邮件

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-24T02:13:29.327

遵循此处的所有说明（并发现奇怪的未记录的启用/禁用配置）后，我仍然遇到同样的问题。

然后我阅读[了这个问题](https://stackoverflow.com/questions/9209086/where-do-i-administrate-the-email-addresses-of-tfs-users)- 答案似乎是相同的：没有 Active Directory，TFS 将不会发送团队警报。用户可以设置他们的首选电子邮件地址，然后 TFS 将作为“[会员的默认电子邮件地址]”同步到 Active Directory。如果未找到 Active Directory，则该同步将不起作用，这意味着他们的默认电子邮件为空白。空白电子邮件意味着没有发送警报（这意味着发送失败也没有错误）。

因此，除非有人编写插件（或 TFS 团队更改了它在后台的工作方式），否则您需要 Active Directory 才能使团队警报正常工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-11T15:12:29.133

如果上述方法没有帮助，请将其发布为额外的验证步骤。我正在使用 TFS 2012。我最初逐步完成了上述步骤并获得了电子邮件通知，但过了一段时间它就停止了。

在重复上述步骤但没有成功后，我参考了事件查看器 Applications and Service Logs --> Microsoft-Team Foundation Server --> Debug as Urban 提到的。我发现了数以千计的与 TFSJobAgent 相关的错误。我选择通过管理工具通过 Services.msc 重新启动服务：“Visual Studio Team Foundation 后台作业代理”，并立即收到所有待处理的电子邮件警报。

在遇到此 Microsoft 文档后，我最初搜索服务列表以查找以 TFS 开头的内容：http: [//msdn.microsoft.com/en-us/library/ms253108.aspx](http://msdn.microsoft.com/en-us/library/ms253108.aspx)我找到了相关服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-05T14:05:42.390

要发送电子邮件通知，您必须在部署中配置以下内容，请确保您的防火墙必须配置为允许 Team Foundation Server 和 SMTP 服务器之间的通信。

Team Foundation Server 的服务帐户（由占位符 TFSService 引用）必须是具有发送电子邮件权限的域帐户，您的 SMTP 服务器必须配置为允许匿名发件人发送电子邮件，或者您之前必须专门创建一个帐户用作警报的电子邮件帐户。

如果您使用系统帐户（如网络服务）作为 Team Foundation Server 的服务帐户，则必须将 SMTP 服务器配置为允许匿名发件人发送电子邮件，或者必须确保为你的部署。如果您不这样做，将不会发送电子邮件通知。

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms400808.aspx](http://msdn.microsoft.com/en-us/library/ms400808.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-13T11:43:37.330

我通过从 TFS 管理员/警报通知屏幕向每个成员发送测试警报电子邮件来解决此问题。我的理解是，通过这种方法，它会填充这些电子邮件地址并知道发送到哪里。显然，MS 测试人员错过了他们小组已经在某处兑现的电子邮件。就我而言，我有一个小型创业团队，但我可以想象对于企业集团来说，这可能是一项相当大的工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T14:07:06.117

您在警报资源管理器中添加了警报，但未指定任何团队项目。一旦我添加了团队项目过滤器，它就开始工作了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-09-05T17:30:15.703

我遇到过同样的问题。您的内部 smtp 服务器（仅发送内部电子邮件）不需要身份验证。

我设置为用户名：匿名密码：123

我很惊讶它起作用了;-)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-16T10:38:45.520

只需在本地机器（TFS 机器）上托管 SMTP，并将本地机器的 IP 与 127.0.0.1 一起放在中继部分。

我为这个错误苦苦挣扎了好几个小时，终于解决了我的问题......

# git - 在 commit-msg 钩子之后获取提交哈希的可靠方法是什么？

> ID：14566322
> 
> 赞同：1
> 
> 时间：2013-01-28T16:16:06.200
> 
> 标签：git, githooks

我正在编写一个脚本，该脚本将同时进行预处理和后处理 git commit。对于预处理，我将使用`commit-msg`钩子向提交消息添加一些信息，但对于后处理，我需要知道该提交的哈希。有没有办法在不保存脚本状态的情况下获取哈希（例如，在`post-commit`挂钩的情况下）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:45:14.240

在`post-commit`钩子中，您可以执行`git rev-parse HEAD`以获取新提交的 sha1 哈希。

# php - php正则表达式失败

> ID：14566323
> 
> 赞同：0
> 
> 时间：2013-01-28T16:16:08.400
> 
> 标签：php, html, regex, preg-match

我正在尝试编写一个只允许大写和小写文本的正则表达式。我不知道如何编写任何正则表达式，所以我在 Stack 上找到了一个帖子

[如何在 PHP 中编写正则表达式来删除特殊字符？](https://stackoverflow.com/questions/745282/how-do-i-write-a-regex-in-php-to-remove-special-characters)

附有学习地点的链接。tut 太棒了，所以如果你对正则表达式有疑问，请阅读。

```
if( preg_match('/^([A-Za-z\s]+)&/', $pagename) ) {
 //do stuff
 } 
 else  
 {echo"no special char or num";} 
```

它如何失败。例如，如果我输入

新网页

它应该允许这样做，但它失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:17:34.423

`$`是以 not 结尾的正确符号`&`

它应该是`/^([A-Za-z\s]+)$/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:21:12.323

`I am trying to write a regex that will only allow text uppercase and lower.`所有你需要的是

```
 '/^([A-Z]+)$/i'
            ^
            |-------- Note used $ instead of & 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:17:53.113

您不需要**圆括号**，并将 & 替换为 $（字符串结尾）。

# php - 使用 PHP 和 Drive API 将文件上传到 Google Drive 上的特定文件夹

> ID：14566325
> 
> 赞同：4
> 
> 时间：2013-01-28T16:16:14.797
> 
> 标签：php, google-drive-api

希望这是一个简单的...我想将文件直接上传到文件夹中。我得到了文件夹 ID，并且我有这段代码可以完美地在根目录中上传文件：

```
<?php
require_once 'get_access.php'; 

require_once 'google-api-php-client/src/Google_Client.php';
require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

$folder_id = '<folder id>';

$client = new Google_Client();
$client->setClientId('<client_id>');
$client->setClientSecret('<client_secret>');
$client->setRedirectUri('<url>');
$client->setScopes(array('<scope>'));
$client->setAccessToken($access);
$client->setAccessType('offline');
$client->refreshToken($refreshToken);
$service = new Google_DriveService($client);

//Insert a file
$file = new Google_DriveFile();
$file->setTitle('My document 123');
$file->setDescription('A test document');
$file->setMimeType('text/plain');

$data = file_get_contents('document-2.txt');

$createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => 'text/plain',
    ));

echo '<pre>';
var_dump($createdFile);
echo '</pre>';

?> 
```

为了将此文件上传到用户驱动器上的特定文件夹中，我应该在这里做什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-08-27T10:45:48.617

我想这很疯狂，但谷歌又一次改变了 API！ParentReference 类现在是`Google_Service_Drive_ParentReference`

所以更新的代码是：

```
$parent = new Google_Service_Drive_ParentReference();
$parent->setId($folderId);
$file->setParents(array($parent)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-06T14:15:01.973

感谢你的回答。是的，这就是解决方案，我之前在 API 中找到了它，但它没有用。

关键是谷歌更改了类名，但没有更新文档。ParentReference 类现在是`Google_ParentReference()`

其他有关 Google Drive 的文档也存在类似问题。所以，这个的工作代码是：

```
$parent = new Google_ParentReference();
$parent->setId($parentId);
$file->setParents(array($parent)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-10-19T06:12:15.370

很晚了，但我到了这个页面寻找解决方案，并且由于 API 更改为 V3，程序也发生了变化。几个小时后，我找到了它。

以新的方式，他们让它变得非常简单。

尝试这个：

```
$file = new Google_DriveFile();
$file->setName('YourDocument.txt');  // This also changed from Title To Name

$file->setParents(array($parentId));  // This is the Line which sets parent 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T22:29:58.583

假设`$parentId`包含目标文件夹的 id，您应该在插入请求之前添加此代码：

```
$parent = new ParentReference();
$parent->setId($parentId);
$file->setParents(array($parent)); 
```

有关更多详细信息，请查看`files.insert`参考指南：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

# asp.net - 如何根据条件显示或隐藏单选按钮

> ID：14566329
> 
> 赞同：1
> 
> 时间：2013-01-28T16:16:26.497
> 
> 标签：asp.net, c#-4.0

首先抱歉英语不好。
我有四个单选按钮，我需要根据条件显示或隐藏单选按钮。
这是我的示例代码。

```
if(condition 1 ==true)
{
    div1.visible=true;
    div2.visible=true;
    div3.visible=true;
}
else if(condition 2 ==true)
{
     div1.visible=true;
     div2.visible=true;
     div3.visible=false;
}
else if(condition 3 ==true)
{
     div4.visible=true;
 } 
```

现在我为每个单选按钮使用单独的 div 标签，如果我使用单独的 div 标签，它工作正常。但我的任务不是使用 div 标签，我尝试使用单选按钮的 id，但如果我使用 id，所有单选按钮都被隐藏，我无法看到单选按钮。

有没有其他方法可以在不使用 div 标签的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:20:38.947

我认为将每个排列放在自己隐藏/显示的容器中是更好的解决方案。我觉得它使您的意图更加清晰，并且反过来应该使代码更易于维护。

# java - 创建新的 RadioButtons Android

> ID：14566332
> 
> 赞同：0
> 
> 时间：2013-01-28T16:16:45.557
> 
> 标签：java, android, radio-button

您好我正在尝试为 Android 创建一个应用程序，为了开发它，我需要浏览不同的页面和问题。对于这个任务，我定义了一个带有一些单选按钮的单选组。然而，当用户进入下一个或上一个问题时，这些单选按钮保持不变（它只更改文本，但不更改所选答案，这始终是每个答案的所选答案）。出于这个原因，我认为我需要在转到下一个问题时创建新的 RadioButtons，但如果我转到上一个问题，则可以保存状态。

如果您可以帮助 XML，这是我的代码的一部分：

```
 <RadioGroup
    android:id="@+id/respuestas3RG"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:layout_below="@id/imagenenunciado3"
    android:orientation="vertical">

    <RadioButton
        android:id="@+id/respuesta3A"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="A. RespuestaA"/>
   <RadioButton
        android:id="@+id/respuesta3B"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="B. RespuestaB"/>
   <RadioButton
        android:id="@+id/respuesta3C"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="C. RespuestaC"/>
   <RadioButton
        android:id="@+id/respuesta3D"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="D. RespuestaD"/>
   </RadioGroup> 
```

爪哇：

```
bNext.setOnClickListener(new View.OnClickListener(){
            @Override

                public void onClick(View v) {
                posicion = posicion +1;
                questions.Next();       
                currentQuestion();

            } 
```

我不知道最好的选择是在开始时创建所有单选按钮还是在用户完成下一个问题时生成它们。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:21:12.603

您无需重新创建它，在使用 [setChecked(false) 清除检查之前保存状态（答案）；](http://developer.android.com/reference/android/widget/Checkable.html#setChecked%28boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:27:01.983

您应该考虑为每个页面使用不同的活动。我更喜欢单一活动的唯一原因是为了某种问题游戏。

**如果您希望它在同一个活动中：**

您还可以使用[LayouInflater](http://developer.android.com/reference/android/view/LayoutInflater.html)将相同的 xml 膨胀到多个视图。每个为一个单独的页面。这样你的页面状态保持不变，因为它存储在相关的视图中，而不是在你的活动中。来回更改将是一个简单的调用

> setContentView(yourViewArray[page]);

你可以把所有验证的东西放在最后。

但首先你应该检查你是否真的想把所有的页面放到同一个 Activity 中。

# c++ - 删除的默认构造函数（和复制控制成员）缺少规则？

> ID：14566341
> 
> 赞同：1
> 
> 时间：2013-01-28T16:17:02.113
> 
> 标签：c++

我的 c++ 书（lippman，c++ Primer，第五版，第 508 页）提供了这 4 条规则，用于确定编译器何时将复制控件和默认构造函数合成为已删除的成员：

> *   如果类有一个成员，其自己的析构函数被删除或不可访问（例如私有），则合成析构函数被定义为已删除。
>     
>     
> *   如果类有一个其自己的复制构造函数被删除或不可访问的成员，则合成的复制构造函数被定义为已删除。如果该类的成员具有已删除或不可访问的析构函数，它也会被删除。
>     
>     
> *   如果成员具有已删除或不可访问的复制分配运算符，或者如果类具有 const 或引用成员，则合成的复制分配运算符被定义为已删除。
>     
>     
> *   如果类的成员具有已删除或不可访问的析构函数，则合成的默认构造函数被定义为已删除；或者有一个没有类内初始化器的引用成员；或者有一个 const 成员，其类型没有显式定义默认构造函数，并且该成员没有类内初始化程序。

我看不到这些规则如何在这里解释第二个错误：

```
class Foo {
public:
  Foo(int i) { }
};

class Bar {
private:
  Foo foo;
};

int main() {
  Foo foo; //error: no matching constructor in Foo
  Bar bar; //error: implicitly deleted constructor in Bar
  return 0;
} 
```

第一个错误是可以理解的，和这个问题没有直接关系。第二个错误令人惊讶，因为上述规则没有解释为什么 Bar 应该将其默认构造函数合成为已删除。

我的书缺少什么规则，或者我没有掌握规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:42:54.837

`Foo`没有默认构造函数，因为您声明了构造函数；从 C++11 12.1/5 开始：

> 如果类 X 没有用户声明的构造函数，则没有参数的构造函数被隐式声明为默认的

`Bar`有一个已删除的默认构造函数，因为`Foo`没有默认构造函数；来自 C++11 12.1/5（第 5 个要点）：

> 如果 [...] 任何 [...] 非静态数据成员 [...] 没有默认构造函数，则类 X 的默认默认构造函数被定义为已删除

您引用的“规则”似乎确实缺少这一点，仅在第三个要点中提到了 const 合格成员的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:41:42.903

© ISO/IEC §12.1 [构造函数]：

> 类的隐式声明的默认构造函数在以下情况下`X`被定义为已删除：
> 
> *   任何 const 限定类型（或其数组）的非静态数据成员都没有用户提供的默认构造函数，
> *   任何非静态数据成员都是引用类型，
> *   **X 是一个类似联合的类，它有一个带有非平凡默认构造函数的变体成员**

`Bar`无法实例化，因为`Foo`没有默认构造函数（您定义了自己的构造函数，因此编译器省略了默认构造函数）；并且 default-constructing`Bar`会导致使用已删除的 default-constructor`Foo`无法完成；所以编译器因此隐式删除`Bar`的构造函数。

唯一可行的方法是创建一个公共`Bar`构造函数并`Foo`在成员 initializer-list 中初始化对象；以便默认构造`Bar`调用正确的构造函数`foo`。例如：

```
class Bar {
    Foo foo;
    public:
        Bar() : foo(0) {} // calls Foo::Foo(int) constructor
};

int main()
{
    Bar bar; // okay
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:42:17.323

错误消息取决于编译器，但是问题在于 Foo 不提供默认构造函数。那，你的规则缺少一个：

从标准 12.1

> 类 X 的默认默认构造函数在以下情况下定义为已删除： ...
> 
> 任何直接或虚拟基类，或没有大括号或相等初始化器的非静态数据成员，具有类类型 M（或其数组），并且 M 没有应用于 M 的默认构造函数或重载决议 (13.3)构造函数会导致歧义或导致从默认的默认构造函数中删除或无法访问的函数。

由于 Foo 没有默认构造函数，因此 Bar 的构造函数被定义为已删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:50:20.407

可能的默认构造函数`Bar`会做什么？它必须构造 a `Foo`，但不能默认构造它。编译器如何知道给`Foo`构造函数赋予什么值？它不能。因此，如果任何成员或基类不是默认可构造的，编译器就无法为该类创建默认构造函数。因此，标准正确地删除了`Bar`的默认构造函数。

# c++ - “没有可用于 SSL_CTX_load_verify_locations() 的源”使用 OpenSSL

> ID：14566345
> 
> 赞同：0
> 
> 时间：2013-01-28T16:17:17.727
> 
> 标签：c++, linux, debugging, openssl

我正在尝试与 SSL 建立安全连接。[我从IBM 站点](http://www.ibm.com/developerworks/apps/download/index.jsp?contentid=11410&filename=intro-openssl.zip&method=http&locale=)下载了源代码并运行了该`withssl`文件。

调试时收到错误消息：

```
No source available for "SSL_CTX_load_verify_locations() at 0x3b66a361b0" 
```

这是什么意思，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:14:38.353

假设我们有相同的代码（从您提供的链接下载它，如果没有小的修改将无法正常工作，添加`SSL_library_init()`应该可以解决新版本的问题）。

确保`TrustStore.pem`文件与可执行文件位于同一目录中，或相应地更改代码中的路径。

# ruby-on-rails - 如果失败，Net/SSH.start 不会引发异常

> ID：14566348
> 
> 赞同：4
> 
> 时间：2013-01-28T16:17:24.610
> 
> 标签：ruby-on-rails, ruby, exception, ssh, net-ssh

我正在使用[Net::SSH](https://github.com/net-ssh/net-ssh)连接到另一台服务器。它工作正常，但我希望能够处理无法连接的情况。[该方法的文档](http://net-ssh.github.com/net-ssh/)没有提到异常，据我所知，它没有引发任何异常。在以下示例中，传递不存在且没有键的主机和用户不会引发异常。

我可以检查它是否失败的唯一方法是查看@session，它将为零，但这并不能告诉我它失败的原因。

```
begin
  @session = Net::SSH.start('no-host', 'no-user', keys: [])
rescue SocketError => e
  connection_failed = true
  logger.error "SOCKET ERROR: "+e.message
rescue Net::SSH::AuthenticationFailed
  connection_failed = true
  logger.error "AUTH ERROR: "+e.message
rescue Exception => e
  logger.error "EXCEPTION: "+e.message
end 
```

[更新] 在 irb 中运行以下命令会引发 SocketError：

```
> require 'net/ssh'
> Net::SSH.start('no-host', 'no-user', keys: [])
= SocketError: getaddrinfo: nodename nor servname provided, or not known 
```

为什么这不会在我的应用程序中引发异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-16T20:51:56.640

我正在处理试图挽救一些异常，这对我有用：

```
def mydef
  begin
    Net::SSH.start("host", "user", :password => "password", :timeout => 10) do |ssh|
      #stuff
    end 
  rescue Timeout::Error
    @error = "  Timed out"
  rescue Errno::EHOSTUNREACH
    @error = "  Host unreachable"
  rescue Errno::ECONNREFUSED
    @error = "  Connection refused"
  rescue Net::SSH::AuthenticationFailed
    @error = "  Authentication failure"
  end
end 
```

然后可能`@error`在视图中使用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:12:07.467

该`start()`方法建立连接并将其提供给内部块。当您不传递一个块时，就像在您的示例中一样，它甚至可能无法连接。您应该尝试做一个简单的循环或其他一些活动：

```
begin
  Net::SSH.start('no-host', 'no-user', keys: []) do |ssh|
    ssh.loop { true }
  end
rescue SocketError => e
  connection_failed = true
  logger.error "SOCKET ERROR: "+e.message
rescue Net::SSH::AuthenticationFailed
  connection_failed = true
  logger.error "AUTH ERROR: "+e.message
rescue Exception => e
  logger.error "EXCEPTION: "+e.message
end 
```

此外，如果您担心错误处理和失败，您应该通过`:timeout`参数指定连接超时。

# jquery - XDomain.js jquery ajax 在 IE 中调用跨域

> ID：14566349
> 
> 赞同：0
> 
> 时间：2013-01-28T16:17:26.153
> 
> 标签：jquery, xdomainrequest

我正在使用来自 [https://gist.github.com/1114981的 Xdomain.js 文件](https://gist.github.com/1114981)

这是我从跨域检索 xml 的 jquery ajax 调用，

```
$(document).ready(function () {
    $.ajax({
        type: "GET",
        url: "http://rxnav.nlm.nih.gov/REST/Ndfrt/search?conceptName=TESTOSTERONE",
        dataType: "xml",
        success: xmlParser

      });
});

function xmlParser(xml) { 
    $(xml).find("entry").each(function () {
        $(".entirecont").append($(this).find('inputConceptName').text());
    });
} 
```

当我用谷歌搜索时，我得到了一个解决方案，即 IE 中的 XDomainRequest 对象，但是我如何从这个 jquery 插件[https://gist.github.com/1114981](https://gist.github.com/1114981)进行 ajax 调用以使跨域调用工作..

而且，我还从 github [https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest](https://github.com/MoonScript/jQuery-ajaxTransport-XDomainRequest)导入了这个插件，但是当 IE 似乎抛出错误说 ajaxTransport 方法不支持并且我目前正在使用 jquery 1.3 .2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T22:46:02.457

尝试在项目中包含此文件，而不是 Xdomain.js：

[https://github.com/intuit/xhr-xdr-adapter/blob/master/src/xhr-xdr-adapter.js](https://github.com/intuit/xhr-xdr-adapter/blob/master/src/xhr-xdr-adapter.js)

我在 IE 8 和 IE 9（后者同时使用 jQuery 1.x 和 2.x）上对其进行了测试，它对我有用。当我包含 xhr-xdr-adapter 时，我还能够让基本的 CORS 在 IE 8/9 上与 AngularJS 一起使用，否则它将无法与 AngularJS 一起使用（例如，从 CDN 加载模板文件时。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T10:46:10.157

在 IE 浏览器中处理 XDomain Request 的简单方法我们可以使用 XDomainRequest 的简单示例，否则我们可以编写正常的 ajax 请求以确保在所有浏览器中都可以使用。

通过使用下面的例子，它对我 [有用 http://msdn.microsoft.com/en-us/library/cc288060(VS.85).aspx#events](http://msdn.microsoft.com/en-us/library/cc288060(VS.85).aspx#events)

# openid - 如何为 Gerrit 设置谷歌应用程序帐户 openId

> ID：14566350
> 
> 赞同：3
> 
> 时间：2013-01-28T16:17:31.767
> 
> 标签：openid, google-apps, gerrit, google-account

我正在尝试设置`Gerrit`为`OpenID`访问控制。我需要`google apps account`将我的用作openID。我已经尝试了几种方法来实现这一点，但到目前为止还没有成功。这就是我的`gerrit config`样子：

```
[auth]
    type = OPENID
    allowedOpenID = 'https://www.google.com/accounts/o8/site-xrds?hd=mysite.com' 
```

对于上述配置，我`Provider is not allowed`在尝试登录时遇到错误。

它适用于普通`google`帐户，但不适用于`google apps account`. 我已经阅读了很多帖子`stackoverflow`和`gerrit`开发者网站，但没有任何东西对我有用。任何帮助表示赞赏。

**编辑：**`'`问题是在 url 周围 使用单引号。但是现在有一个新问题：一旦我登录并回到我的网站，它会说：
`The page you requested was not found, or you do not have permission to view this page`

重定向的 URL `mysite.com/#SignInFailure,SIGN_IN,Provider+not+allowed`。任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-17T12:07:58.717

经过一番搜索和阅读文档后，我发现了[这个提交](https://gerrit.googlesource.com/gerrit/+/d2ab0cda62799face3caa1973a57849d2f337f00)。我在 Gerrit 2.7-rc1 中尝试过它并且它有效。

您的 gerrit 配置应包含以下内容：

```
[auth]
    type = OPENID
    trustedOpenID = https://www.google.com/accounts/o8/id?id=
    openIdDomain = @mysite.com 
```

这允许我使用 mysite.com 域中任何启用 OpenID 的电子邮件地址登录并禁止其他人登录。请注意，“@”必须在那里，没有它就无法工作。;-)

此外，如果您只想允许 Google 作为 OpenID 提供者，您可能需要设置以下内容以跳过 OpenID 提供者的选择：

```
[auth]
    type = OPENID_SSO
    openIdDomain = @mysite.com
    openIdSsoUrl = https://www.google.com/accounts/o8/id 
```

[Gerrit 2.6 的文档](https://gerrit-documentation.googlecode.com/svn/Documentation/2.6/config-gerrit.html)也包含此信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T21:39:19.853

您是否`canonicalWebUrl`在 gerrit 配置中设置了该属性？

# unix - 如何获取带有校验和的文件列表

> ID：14566355
> 
> 赞同：4
> 
> 时间：2013-01-28T16:17:45.450
> 
> 标签：unix, rsync

我必须服务器（假设主服务器和从服务器），从服务器通过 rsync 与主服务器同步。我需要获取 master 上的文件列表及其校验和。只有所有文件及其校验和。rsync 是否可以在不将脚本放在主服务器上或使用 scp/ssh 浏览的情况下使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T13:27:50.287

经过一番研究，我找到了答案。Rsync 可以通过添加：--out-format="%C" 来输出文件的校验和，但这仅适用于不稳定的 3.1，这就是它不普及的原因。所以我决定只通过校验和（-c 选项）和 --dry-run 选项比较文件来比较位置并转储每个文件状态。

# jsf - 强制jsf呈现自动生成的clientid

> ID：14566356
> 
> 赞同：2
> 
> 时间：2013-01-28T16:17:48.087
> 
> 标签：jsf, client-side, clientid

我使用组件绑定和 clientId 属性在我的 javascript 代码中查找组件，如下所示：

```
<div data-for="@parent" data-example="#{componentBindings.myInput.clientId}" />
...
<h:inputText binding="#{componentBindings.myInput}" value="#{myBean.myProperty}" /> 
```

唯一的问题是 jsf 有时不会呈现 inputText 字段的 id 属性，所以即使我知道 js 代码中的 clientId ，我也找不到该元素，因为它在客户端没有 id 属性。

1.  **渲染自动生成**的id 标签有什么要求？
2.  有什么方法可以让 jsf 自动渲染所有的 cliendId-s？（如 faces-config 条目）
3.  有什么方法可以确保呈现单个元素的 clientId（没有明确地给它一个 id）？

**更新**

我找到了使用技巧的方法：

```
<span id="#{componentBindings.myInput.clientId}">
    <h:inputText binding="#{componentBindings.myInput}" value="#{myBean.myProperty}" />
</span> 
```

尽管在这种情况下有更好的方法，例如使用建议的名称，但如果它不是您希望使用 ajax 呈现的输入字段，它会很有用。例如与方面：

```
<!-- myComponent.xhtml -->
<!-- ... -->
<cc:interface>
    <cc:facet name="someFacet" required="true" />
</cc:interface>
<cc:implementation>
    <h:form>
        <cc:renderFacet name="someFacet"/>
    </h:form>
</cc:implementation>

<!-- page.xhtml -->
<!-- ... -->
<my:myComponent>
    <f:facet name="someFacet">
        <h:inputText />
        <!-- ... -->
    </f:facet>
</my:myComponent> 
```

如果您查看组件树，您会看到，构面没有嵌套在表单中，它是 cc 的直接子代。所以用ajax执行cc会很好：

```
<!-- myComponent.xhtml -->
<!-- ... -->
<cc:interface>
    <cc:facet name="someFacet" required="true" />
</cc:interface>
<cc:implementation>
    <h:form>
        <cc:renderFacet name="someFacet"/>
        <h:commandLink>
            <f:ajax execute=":#{cc.clientId}" render=":#{cc.clientId}" />
        </h:commandLink>
    </h:form>
</cc:implementation> 
```

但这会引发格式错误的 xml 异常，因为在客户端没有具有请求 id 的元素。使用此技巧，您可以使其工作：

```
<cc:interface>
    <cc:facet name="someFacet" required="true" preferred="true"/>
</cc:interface>

<cc:implementation>
    <span id=#{cc.clientId}>
        <h:form>
            <cc:renderFacet name="someFacet"/>
            <h:commandLink>
                <f:ajax execute=":#{cc.clientId}" render=":#{cc.clientId}" />
            </h:commandLink>
        </h:form>
    </span>
</cc:implementation> 
```

我可能不是第一个发现这个解决方法的人，但我决定分享它，因为我在任何地方都没有找到它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:40:05.203

来自 Mojarra 的`HtmlBasicRenderer`源代码（从 2.1.17 的第 672 行开始）：

```
/**
 * @param component the component of interest
 *
 * @return true if this renderer should render an id attribute.
 */
protected boolean shouldWriteIdAttribute(UIComponent component) {

    // By default we only write the id attribute if:
    //
    // - We have a non-auto-generated id, or...
    // - We have client behaviors.
    //
    // We assume that if client behaviors are present, they
    // may need access to the id (AjaxBehavior certainly does).

    String id;
    return (null != (id = component.getId()) &&
                (!id.startsWith(UIViewRoot.UNIQUE_ID_PREFIX) ||
                    ((component instanceof ClientBehaviorHolder) &&
                      !((ClientBehaviorHolder)component).getClientBehaviors().isEmpty())));
} 
```

`id`因此，它仅在组件具有`id`属性集或组件具有客户端行为持有者（阅读：`<f:ajax>`子级）时才呈现 HTML 元素的属性。

所以，你真的需要自己指定：

```
<h:inputText id="foo" ... /> 
```

否则，请更改您的 JS 代码，使其通过输入`name`而不是`id`.

# c# - .NET '在上下文中设置标志'

> ID：14566362
> 
> 赞同：0
> 
> 时间：2013-01-28T16:18:06.857
> 
> 标签：c#, asp.net, .net, vb.net, http

[我在这里](https://stackoverflow.com/questions/6328437/server-cannot-append-header-after-http-headers-have-been-sent)有一个与此类似的问题。看着答案，我不得不做一些阅读以了解如何在 .NET 中向事件添加方法。我仍然不明白的答案的唯一部分是它说“在上下文中设置标志”。它指的是 HttpContext 对象吗？我可以设置和检查一个变量吗？任何人都可以澄清这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:33:08.540

它指的是订阅事件的上下文。关心发送是否发生的人。

# c++ - 缓存 std::vector 的大小是否更快

> ID：14566363
> 
> 赞同：1
> 
> 时间：2013-01-28T16:18:09.120
> 
> 标签：c++, caching, optimization, hoisting

我正在查看一个包含 std::vector 并存储向量大小的 C++ 类。每次修改向量时，该类都会更新此大小，从而导致大量冗余代码（因为始终可以从 size() 方法获得最新的大小）。这真的更快还是编译器会优化 size() 的迭代使用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T16:34:26.303

首先，与之前的帖子中所说的不同`std::vector`，我看到的实现（MS 和 g++） *不*缓存大小。另一方面，它可以通过简单的指针减法来计算，并且您为缓存大小所做的任何事情几乎肯定会增加更多的开销而不是节省的开销。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T16:20:59.790

`std::vector::size`具有恒定的时间复杂度，所以是的，它已经存储在向量中并且代码是多余的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:21:10.887

在我见过的所有实现中，缓存会*更慢*。这只是浪费内存带宽。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:21:09.507

据我所知，标准库的实现`vector::size`只是返回一个缓存大小，而不是每次都重新计算。

# shell - Shell 命令作为 Makefile 中的变量

> ID：14566364
> 
> 赞同：1
> 
> 时间：2013-01-28T16:18:11.567
> 
> 标签：shell, makefile

我有以下（非常简化的）Makefile：

```
# Makefile

MAKESH=shell
USER=$($MAKESH logname) 
```

它旨在将我的登录名存储在`USER`变量中，就像`$(shell logname)`调用了命令一样。然而，这不会发生。我怀疑这是由于`make`评估变量的方式。

有没有人对此或可能的解决方法有更深入的了解，即明确告诉`make`这`$MAKESH`实际上是`shell`命令？

谢谢。

## 编辑

考虑以下示例：

```
#parent.mk

...
include child.mk
...

-------------------
#child.mk

export $(shell logname)/path1
export $(shell logname)/path2

-------------------
#bash_script.sh

...
source child.mk
... 
```

（在本例中，采购 child.mk 失败）

本质上，我想做的是创建一个根据当前用户导出路径名的文件。该语法应该对 makefile 和 bash 脚本都有效，因为它可以从两个地方包含/获取。

我还想对这些文件进行细微的更改，因为它们是更大项目的一部分，并且互连有点混乱。

我终于决定这样做：

```
#parent.mk

...
export logname=$(shell logname)
include child.mk
...

-------------------
#child.mk

export $(logname)/path1
export $(logname)/path2

-------------------
#bash_script.sh

...
source child.mk
... 
```

这很hacky，有点危险，但有效。如果您知道更优雅的方式/方法，请告诉我。

最后，感谢您的解决方案（和您的警告），这些解决方案对预先编辑的问题有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:51:51.380

语法应该是

```
USER = $(shell logname) 
```

我不知道你为什么要将“shell”放在变量中并搞砸函数语法，但如果你真的坚持，试试这个：

```
$(eval USER=$$($MAKESH logname)) 
```

但是，$(eval ...) 函数只会将其转换为上面的第一种形式，因此这是浪费精力。（除非您真的尝试做一些比您的示例建议的更棘手的事情。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:01:34.417

```
MAKESH=shell
$(eval USER=$$($(MAKESH) logname))
$(info USER is $(USER)) 
```

尽可能避免。

# python - Python：创建 len(string) 和 string.isalpha 条件

> ID：14566374
> 
> 赞同：0
> 
> 时间：2013-01-28T16:18:26.980
> 
> 标签：python, string, conditional

我正在尝试创建一个在我的 Python 代码中似乎不起作用的条件语句。我试图阅读并理解原因，并单独声明布尔值似乎没有缺陷。但是，当我尝试将它们放入条件语句中时，会出现语法错误。也许有人可以看一下并检查我的代码在这种情况下失败的原因：

```
userinput = raw_input("Please enter a word: ")

if (len(userinput) > 1 and userinput.isalpha() == True):
    print "Thanks for entering a word."
else:
    print "That was not an acceptable word." 
```

具体来说，我收到一个语法错误，指出：

```
if len(userinput) > 1 and userinput.isalpha() == True):
SyntaxError: invalid syntax                           ^ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:21:05.713

~~因为输入字符串保留了`\n`导致输入失败的字符：~~

~~考虑`userinput = raw_input("Please enter a word: ").strip()`改用...~~

* * *

此外，`isalpha()`已经检查长度是否为一个或多个，将您的代码减少到：

```
if userinput.isalpha():
    # whatever 
```

然后你的语法错误很好地消失了......（`)`后面的额外`userinput)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:26:20.737

您粘贴的回溯显示与原始代码段不同的代码。之后有一个额外的右括号`len(userinput)`，这是错误的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:21:53.927

我做了三个更正：

*   第一个在 if 语句中（isalpha() 已经返回一个布尔值）
*   第二个是 strip 函数，以便在输入末尾删除多余的空格
*   第三个是打印字符串周围的括号（为了使其与python3兼容）

最终代码是：

```
userinput = raw_input("Please enter a word: ").strip()

if (len(userinput) > 1 and userinput.isalpha()):
    print ("Thanks for entering a word.")
else:
    print ("That was not an acceptable word.") 
```

# mysql - MYSQL BETWEEN 语句的日期范围

> ID：14566375
> 
> 赞同：2
> 
> 时间：2013-01-28T16:18:30.570
> 
> 标签：mysql, between

假设我在查询中有一个日期范围`from 2013-02-01 to 2013-02-10`，我想将它与日期子集的日期范围进行比较，不包括边缘日期，例如。`date range 2013-02-02 to 2013-02-09`. 我是否有机会`BETWEEN`在查询中使用可以排除边缘日期的语句？实际上我想要的是，如果给定日期之间有几个日期范围，我想排除它们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:24:36.947

`DATE_ADD(date, INTERVAL 1 DAY) and DATE_SUB(date, INTERVAL 1 DAY)`您可以排除边缘。然后在语句之间使用 2 个，您可以检查开始日期和结束日期的交集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:35:45.817

yohannc 是对的；例如，从最后一个日期减去一天，您可以使用

`BETWEEN '2013-02-01' AND DATE_SUB('2013-02-10' , INTERVAL 1 DAY)`

# c# - 如何保存照片捕获 windows 8 c# Metro 应用程序？

> ID：14566376
> 
> 赞同：1
> 
> 时间：2013-01-28T16:18:30.767
> 
> 标签：c#, windows-8, microsoft-metro, photo, capture

我到处找，但在拍摄后找不到如何保存我的照片。我使用 Windows 8 媒体捕获，捕获后，我将其显示在我的页面上。但不知道如何将其保存到特定位置。

这就是我拍照的方式，非常经典：

```
 private async void Camera_Clicked(object sender, TappedRoutedEventArgs e)
    {
        TurnOffPanels();

        CameraCaptureUI camera = new CameraCaptureUI();
        camera.PhotoSettings.CroppedAspectRatio = new Size(16, 9);
        StorageFile photo = await camera.CaptureFileAsync(CameraCaptureUIMode.Photo);

        if (photo != null)
        {
            BitmapImage bmp = new BitmapImage();
            IRandomAccessStream stream = await photo.OpenAsync(FileAccessMode.Read);
            bmp.SetSource(stream);
            ImageSource.Source = bmp;
            ImageSource.Visibility = Visibility.Visible;

            appSettings[photoKey] = photo.Path;
        }
    } 
```

这就是我在服用后重新加载它的方式：

```
 private async Task ReloadPhoto(String photoPath)
    {
            StorageFile photo = await StorageFile.GetFileFromPathAsync(photoPath);
            BitmapImage bmp = new BitmapImage();
            using (IRandomAccessStream stream = await photo.OpenAsync(FileAccessMode.Read))
            {
                bmp.SetSource(stream);
            }

    } 
```

有谁知道如何保存照片？

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:55:52.913

使用 FileSavePicker，示例如下：

```
 FileSavePicker savePicker = new FileSavePicker();
  savePicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
  savePicker.FileTypeChoices.Add("jpeg image", new List<string>() { ".jpeg" });
  savePicker.SuggestedFileName = "New picture";

  StorageFile ff = await savePicker.PickSaveFileAsync();
  if (ff != null)
  {
    await photo.MoveAndReplaceAsync(ff);
  } 
```

photo 是您从相机获得的 StorageFile

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:42:02.727

我试过了，但没有成功。我现在可以保存，但我什么也没保存。我认为我不明白的 ImageStream 失败了。

这是没有阅读器的代码。对不起，我是 Windows 8 C# 的初学者

```
 private async void save_Click_1 (object sender, RoutedEventArgs e)
    {

        FileSavePicker savePicker = new FileSavePicker();
        savePicker.SuggestedStartLocation = PickerLocationId.PicturesLibrary;
        savePicker.FileTypeChoices.Add("jpeg", new List<string>() { ".jpeg" });
        savePicker.SuggestedFileName = "New picture";

        StorageFile ff = await savePicker.PickSaveFileAsync();
        if (ff != null)
        {
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T21:44:57.760

也许这

```
 private async void btnSave(object sender, RoutedEventArgs e)
    {
        //ImageTarget.Source = await ResizeWritableBitmap(m_bitmap, 800, 800);
        if (m_bitmap == null)
            return;

         Windows.Storage.StorageFile filename = await GetSaveLocation();
        if (filename == null)
           return;

        IRandomAccessStream filestream = await filename.OpenAsync(Windows.Storage.FileAccessMode.ReadWrite);

        BitmapEncoder encode = await BitmapEncoder.CreateAsync(BitmapEncoder.PngEncoderId, filestream);

        byte []pixelbuff;
        var stream = m_bitmap.PixelBuffer.AsStream();
        pixelbuff = new byte[stream.Length];

        await stream.ReadAsync(pixelbuff, 0, pixelbuff.Length);

        encode.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Straight,(uint) m_bitmap.PixelWidth
                            ,(uint) m_bitmap.PixelHeight, 96.0, 96.0, pixelbuff);
        await encode.FlushAsync();
        await filestream.FlushAsync();

        filestream.Dispose();
    } 
```

# sql - 在 db2 中概括条件查询

> ID：14566377
> 
> 赞同：0
> 
> 时间：2013-01-28T16:18:31.377
> 
> 标签：sql, db2

我正在研究 IBM DB2。我有一个查询：

```
select temp.dv,
    max(case when att.id=100 then  temp.en else '0' end) as cl,
    max(case when att.id=103 then  temp.en else null end) as mo,
    max(case when att.id=104 then  temp.en else null end) as do,
from temp left outer join att on att.id=temp.id where doc=100 
```

我如何将其概括为 的所有值`att.id`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:36:24.577

如果需要对值进行透视，则可以将列名复制到 Excel 中并生成正确的语法。您还可以将 SQL 语句放入一个字符串中，然后运行它（在其他数据库中称为动态 SQL）。

如果您不需要它们旋转，那么您可以使用以下命令将结果放在单独的行中`group by`：

```
select temp.dv,
       att.id,
       max(temp.en)
    max(case when att.id=104 then  temp.en else null end) as do,
from temp left outer join
     att
     on att.id=temp.id
where doc=100
group by temp.dv, att.id 
```

# java - 有没有办法检测 Java FX 是否正在使用硬件加速？

> ID：14566379
> 
> 赞同：4
> 
> 时间：2013-01-28T16:18:47.263
> 
> 标签：java, javafx-2, hardware-acceleration

与此相关的是，有没有办法强制 Java FX 使用硬件加速并在无法使用时进行轰炸？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T17:22:46.227

刚发现：

您可以运行`-Dprism.verbose=true`which 将打印它使用的图形管道。“sw”或“j2d”用于软件加速，“d3d”或“es2”用于硬件加速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-24T11:23:33.007

你也可以试试这个技巧

```
@SuppressWarnings("restriction")
static String getCurrentGraphicsPipeline() {
    return com.sun.prism.GraphicsPipeline.getPipeline().getClass().getName();
} 
```

如果你回来`"com.sun.prism.sw.SWPipeline"`，那么你正在使用软件加速。所有其他值将意味着可能正在使用某种形式的硬件加速。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-15T09:07:07.303

如果您使用 eclipse 作为 IDE，那么您需要传递这些 VM 参数。您可以在运行配置中添加这些 VM 参数。

把这些论点放在那里： `-Dprism.verbose=true`

![查看图片了解更多信息](../Images/1f0ebb06465662cf5fed95d98c6bffd0.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-22T08:04:11.217

可以使用`-Dprism.order=es2`VM 选项设置图形管道。您可以将 es2 替换为所需的管道（d3d、sw、j2d）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-05-27T12:08:56.447

对于软件渲染器，SCENE 3D 功能被禁用。

```
if(Platform.isSupported(ConditionalFeature.SCENE3D)) {
    // hardware accelerated renderer
} else {
    // software renderer
} 
```

# android - 如何将 tesseract-ocr 安装到 Eclipse？

> ID：14566380
> 
> 赞同：1
> 
> 时间：2013-01-28T16:18:46.913
> 
> 标签：android, eclipse, installation, ocr, tesseract

我需要帮助将 tesseract-oce 安装到 Eclipse，我现在正在下载 android ndk，但我不知道我应该做什么或需要下载什么，在哪里下载 tesseract 库以及如何包含它到 Eclipse 并使用它

任何人都可以帮我解决吗？谢谢你，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:38:06.220

您可以尝试使用一些已经为 android 构建的库，例如：[https](https://github.com/rmtheis/tess-two) ://github.com/rmtheis/tess-two或[http://code.google.com/p/tesseract-android-tools/](http://code.google.com/p/tesseract-android-tools/)

将库添加到项目后，您只需要在代码中的某处创建一个 TessBaseAPI 实例，使用语言文件和内容的路径 init() 它，setImage() 并获取它找到的文本。

当然你需要找到语言文件和东西，但这很容易。

不过请注意，我很久以前就“玩过”这个库，所以我可能会走得很远。

# c# - 遍历容器时如何仅检索具有 Name 属性的控件？

> ID：14566381
> 
> 赞同：0
> 
> 时间：2013-01-28T16:18:49.503
> 
> 标签：c#, .net, wpf

我目前有一个 StackPanel，我正在动态添加控件。（目前还有其他堆栈面板、DatePickers、ComboBoxes、TextBoxes 和 Labels。）我试图根据当前选择的报告类型动态生成搜索条件选项。在这样做时，我正在设置名称，以便稍后可以访问它，但是，我遇到了一个问题，我似乎无法在不丢失某些内容或崩溃的情况下获得所有我想要的用户输入控件，因为 StackPanels 没有t 有一个 Name 属性。

```
// This one crashes because a child StackPanel doesn't have Name
foreach (var child in this.SearchCriteriaStackPanel.Children)
{
    switch (((Control)child).Name)
    {
        case "startDate":
            this.reports[index].StartDate = ((DatePicker)child).SelectedDate;
            break;
        case "endDate":
            this.reports[index].EndDate = ((DatePicker)child).SelectedDate;
            break;
        case "employeeId":
            this.reports[index].EmployeeId = (int)((ComboBox)child).SelectedValue != 0 ? (int?)((ComboBox)child).SelectedValue : null;
            break;
        case "jobNumber":
            this.reports[index].JobNumber = ((TextBox)child).Text;
            break;
    }
} 
```

.

```
// This one skips over the DatePickers
foreach (var child in this.SearchCriteriaStackPanel.Children)
{
    switch (((FrameworkElement)child).Name)
    {
        case "startDate":
            this.reports[index].StartDate = ((DatePicker)child).SelectedDate;
            break;
        case "endDate":
            this.reports[index].EndDate = ((DatePicker)child).SelectedDate;
            break;
        case "employeeId":
            this.reports[index].EmployeeId = (int)((ComboBox)child).SelectedValue != 0 ? (int?)((ComboBox)child).SelectedValue : null;
            break;
        case "jobNumber":
            this.reports[index].JobNumber = ((TextBox)child).Text;
            break;
    }
} 
```

我也愿意接受有关如何解决此问题的替代建议。

编辑#1：这里是 startDate DatePicker 的初始化和添加：

```
var startDateStackPanel = new StackPanel
        {
            Orientation = Orientation.Horizontal,
            Margin = new Thickness(10, 0, 0, 0)
        };
        startDateStackPanel.Children.Add(new Label { Content = "Start Date:" });
        startDateStackPanel.Children.Add(new DatePicker { Width = 120, Name = "startDate" });
this.SearchCriteriaStackPanel.Children.Add(startDateStackPanel); 
```

编辑＃2：我可以这样做，但感觉不对......

```
var list = new List<Control>(this.SearchCriteriaStackPanel.Children.OfType<DatePicker>());
list.AddRange(this.SearchCriteriaStackPanel.Children.OfType<ComboBox>());
list.AddRange(this.SearchCriteriaStackPanel.Children.OfType<TextBox>());

foreach(var child in list)... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:34:05.240

如果您正在搜索来自例如 FrameworkElement 的后代，您可以将第一个示例中的 for-each 循环替换为

```
foreach (var child in this.SearchCriteriaStackPanel.Children.OfType<FrameworkElement>())
{
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:33:58.367

我解决类似问题的（可能不太理想）方法如下：

```
foreach (var child in (from Control c in this.SearchCriteriaStackPanel.Children
                       where !(c is StackPanel)
                       select c))
{
    switch (child.Name)
    {
        case "startDate":
            this.reports[index].StartDate = ((DatePicker)child).SelectedDate;
            break;
        case "endDate":
            this.reports[index].EndDate = ((DatePicker)child).SelectedDate;
            break;
        case "employeeId":
            this.reports[index].EmployeeId = (int)((ComboBox)child).SelectedValue != 0 ?(int?)((ComboBox)child).SelectedValue : null;
            break;
        case "jobNumber":
            this.reports[index].JobNumber = ((TextBox)child).Text;
            break;
    }
} 
```

实际上，它跳过了所有不属于具有 Name 属性的类型的子项。你也可以这样做，`if(c is Stackpanel) continue;`但 Linq 始终是我迭代的 goto，以防我以后想修改它。后来我包装了相关的类以消除（所有频繁的）switch 语句。

# android - 对 ARMv6 的 NDK 支持

> ID：14566383
> 
> 赞同：1
> 
> 时间：2013-01-28T16:19:02.030
> 
> 标签：android

你好，

我试图在我的三星 s5360 上运行一个 openCV 面部检测应用程序，它有一个 2.3.6 的 android 版本。我不断收到 INSTALL_FAILED_CPU_ABI_INCOMPATIBLE 错误消息。经过一番挖掘，我得出结论，原因是最新的 NDK 修订版 8d 不支持 ARMv6。是否有合适的 NDK 版本支持我的手机？

**提前致谢**

# c# - IEnumerable 作为返回值、延迟执行和 N 层应用程序

> ID：14566386
> 
> 赞同：6
> 
> 时间：2013-01-28T16:19:07.263
> 
> 标签：c#, ienumerable, ilist, n-tier-architecture

首先，我不认为这个问题是这些 SO 问题的重复：

[我是否应该总是返回 IEnumerable<T> 而不是 IList<T>？](https://stackoverflow.com/questions/1072614/should-i-always-return-ienumerablet-instead-of-ilistt) 和[IEnumerable<T> 作为返回类型](https://stackoverflow.com/questions/381208/ienumerablet-as-return-type)

众所周知，引入多层的主要目的是减少耦合。
我们必须为数据访问定义一些接口，我们的 BL 不应该关心 DAL 实现的细节。如果提到的接口返回`IEnumerable<T>`BL 不知道它只是一个静态的`IEnumerable`还是延迟执行的东西。同时，这个特定的细节会极大地影响性能，并且根据实现需要不同的编码。好吧，在我们要多次迭代集合的情况下，
可以调用`.ToList()`each 。`IEnumerable`但是由于不必要的新列表实例化，这会降低静态集合的性能。

所以我试图了解哪种方法更好。
更通用且性能可能更低与更耦合 - 更高性能。我想，没有灵丹妙药，但它可能是我错过的其他方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T16:31:17.203

> 所以我试图了解哪种方法更好：更通用且性能更低与更耦合和更高性能。

首先，虽然这是一个有趣的权衡，但在这种情况下，我认为相关的权衡实际上是**正确的还是不正确**的，这肯定胜过任何性能问题。延迟执行查询通常具有它为您*提供最新*查询结果的属性，而调用`ToList`为您提供查询结果的过去版本的*快照*。肯定有一种情况是正确的，另一种是不正确的。

其次，假设您已经处理了正确性问题并且确实需要进行性能权衡，那么您真正想要做出的权衡是：更普遍和**不可接受的性能**与更多耦合和**可接受的性能**，在这一点上，您很清楚您有选择性能可以接受的那个。

如果两者都具有可接受的性能并且一个比另一个慢几纳秒，或者消耗的内存比另一个多几个字节，并且两者都是正确的，那么谁在乎你选择哪一个呢？把宝贵的时间花在思考其他事情上。如果两者都没有可接受的性能，那么你有一个更大的问题需要解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:23:27.780

如果从概念上讲，让调用者知道方法的返回类型是 a`List`而不是 an 很重要`IEnumerable`（例如，要知道多次迭代它不会产生负面影响），那么您应该返回 a `List`。取而代之的是，返回接口是一种说法，“实现是什么并不重要”。如果实现*确实*很重要，那么不要使用接口（在那种特定情况下）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:32:10.387

我找到了很好的解决方案：DAL 中的所有返回类型（in 接口）都不能`IEnumerable<>`（或不能是接口类型）。但是可以在BL中使用。这可以是建筑师的决定。

# jquery - 3 秒内没有鼠标移动时发生的事件

> ID：14566387
> 
> 赞同：6
> 
> 时间：2013-01-28T16:19:08.497
> 
> 标签：jquery

我的脚本中有一些菜单，我想要一个 jquery 脚本，当没有鼠标不移动 3 秒时，它会导致菜单隐藏。

我知道这真的是一个愚蠢的问题，但我无法在任何地方得到任何答案..

它不是一个合适的脚本，但我只是想如果发生这样的事情？

```
$("#target").notmousemove(function(event) {
$('#menu').hide();
},delay(500)); 
```

如果有人 cud 回复我的请求，那将非常有帮助..

我已经在按钮单击的基础上使菜单消失了，但是现在我宁愿希望菜单在鼠标不移动超过 5 秒时隐藏...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T16:21:18.150

`setTimeout`在`mouseMove`处理程序中使用。如果鼠标在超时到期之前再次移动，只需清除它`clearTimeout`并再次重新启动超时。

所以像：

```
var timeoutid = 0;
$("#someRootElement").mousemove(function() {
    if (timeoutid) {
       clearTimeout(timeoutid);
       timeoutid = 0;
    }
    timeoutid = setTimeout(myFunctionToHideMenu, 5000);
}); 
```

编辑：事实上，您甚至不需要检查计时器是否已经在运行。尝试停止无效的计时器 ID 或已停止的计时器不会导致错误。所以你可以简单地：

```
var timeoutid = 0;
$("#someRootElement").mousemove(function() {
    clearTimeout(timeoutid);
    timeoutid = setTimeout(myFunctionToHideMenu, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:22:41.350

尝试这个：

```
var t;
var delay = 3000; //Ms delay 
$("#target").mousemove(function(){
    clearTimeout(t);

    var t = setTimeout(function(){
        //Has not been moved
        $('#menu').hide();
    }, delay);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:22:25.457

```
function notMouseMove() {
   $("#menu").hide();
}
var timer = setTimeout(notMouseMove, 3000);

$(document).on('mousemove', function () {
    clearTimeout(timer);
    timer = setTimeout(notMouseMove, 3000);
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:34:34.743

只需滚动您自己的插件：

```
$.fn.notmousemove = function(time, callback) {
    return this.each(function(i,ele) {
        $(ele).on({
            mouseenter: function() {
                $(this).data('nomousetimer', setTimeout(callback, time));
            },
            mousemove: function() {
                clearTimeout($(this).data('nomousetimer'));
                $(this).data('nomousetimer', setTimeout(callback, time));
            },
            mouseleave: function() {
                clearTimeout($(this).data('nomousetimer'));
            }
        });
    });
}; 
```

[**小提琴**](http://jsfiddle.net/K5U8M/2/)

# ruby - Rails 4 中的 Omniauth 身份验证失败

> ID：14566388
> 
> 赞同：0
> 
> 时间：2013-01-28T16:19:11.583
> 
> 标签：ruby, omniauth, ruby-on-rails-4

我在 rails 4 工作，我正在尝试使用 github 进行身份验证。所以在我的 Github 应用程序中，我有这个：

> 网址：http://localhost:4000
> 
> 回调地址：http://localhost:4000/auth/github/callback

回调 url 是认证完成时 Github 将尝试到达的 url 对吗？

那么为什么当我点击我的链接时会出现 Github 页面 404 错误：

```
<%= link_to 'Sign in with Github', '/auth/github' %> 
```

我正在开发本地主机开发环境，所以这可能是问题所在？

此外，当我`http:// localhost:4000/auth/github/callback`在浏览器上输入时，我得到一个 OmniAuth::Strategies::OAuth2::CallbackError

为什么？我的 routes.rb 中有这个

```
post 'auth/:provider/callback' => 'home#index' 
```

Rails 4 和 Omniauth 有问题吗？（在 localhost 中添加了空格，因此 stackoverflow 接受了我的帖子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T09:22:16.277

我有 github 使用 gem`omniauth-github` 和一个`config/initializers/omniauth.rb`包含的文件

```
Rails.application.config.middleware.use OmniAuth::Builder do
    provider :github, ENV['GITHUB_KEY'], ENV['GITHUB_SECRET']
end 
```

但是，当我`http://localhost:3000/auth/github/callback`在浏览器上输入时，我也得到`OmniAuth::Strategies::OAuth2::CallbackError`了，所以这不应该是问题。

我的`config/environment.rb`样子

```
# Load the rails application
require File.expand_path('../application', __FILE__)

# Load the app's custom environment variables here, so that they are loaded before environments/*.rb
app_environment_variables = File.join(Rails.root, 'config', 'app_environment_variables.rb')
load(app_environment_variables) if File.exists?(app_environment_variables)

... 
```

我的`config/app/environment_variables.rb`样子

```
# OAuth Keys and Secrets
if Rails.env.production?
  ENV['GITHUB_KEY'] = 'd1234a3a123a1a3a123c'
  ENV['GITHUB_SECRET'] = '1234azer123azer1231209jeunsghezkndaz1234'
else
  ENV['GITHUB_KEY'] = 'qsflkjkj685bg554456b'
  ENV['GITHUB_SECRET'] = 'qslkfj7757kqfmlsdh675hlfsd587kjfdh687jsd'
end 
```

请参阅[是否可以在我的代码中为 rails 开发环境设置 ENV 变量？](https://stackoverflow.com/questions/4911607/is-it-possible-to-set-env-variables-for-rails-development-environment-in-my-code)有关详细信息。我在 github 上注册了 2 个应用程序。一种`app_name-dev`带有 key `qsflk...`、 url`http://localhost:3000`和回调 url `http://localhost:3000/auth/github/callback`，一种`app_name`带有 key `d1234a...`。

检查您是否正确执行了该操作。也许尝试更改`localhost`为`127.0.0.1`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T11:25:28.150

对我来说，是 Github 新的更严格的 URI 匹配在尝试重定向到时产生了 404 `http://localhost:3000/auth/github/callback`，我通过将重定向 URI 作为参数传递给 Omniauth 来解决它。

```
Rails.application.config.middleware.use OmniAuth::Builder do
    provider :github, ENV['GITHUB_KEY'], ENV['GITHUB_SECRET'], 
        :scope => 'user,public_repo', 
        :redirect_uri => ENV['GITHUB_REDIRECT']
end 
```

如果您在 Linux/Mac 上，您可以从命令行添加环境变量。

```
$ export GITHUB_REDIRECT=http://localhost:3000/auth/github/callback 
```

或者，你可以使用像[Foreman](http://ddollar.github.io/foreman/)这样的东西，它可以让你添加一个 .env 文件，你可以用它来存储你的变量。

只需记住将适当的重定向 URI 添加到生产环境的变量中，就可以了。

# sql - 访问：比较备注字段 - 不在

> ID：14566395
> 
> 赞同：1
> 
> 时间：2013-01-28T16:19:40.127
> 
> 标签：sql, vba, ms-access, sqldatatypes, memo

早上好！我正在寻求关于自上周以来一直坚持的问题的指导，但希望有一个简单的解决方案。如您所知，您不能在 MS Access 中直接链接/加入备注字段。我上周创建了一个查询，通过 Where 子句返回一个表中的备注字段包含另一个表中的文本字段的行`"[memo] LIKE '\*[text]\*'"`，这很完美。

但是，现在我想从查询中不存在的表中找出备注值。我希望使用“Not in”子句会很简单，但情况似乎并非如此。

还有另一种方法可以做到这一点吗？有没有办法在 SQL 查询中转换数据类型？或者是在 VBA 中进行此类查询的唯一方法？

先感谢您！我可以根据要求提供更多信息，但我认为字段/表名没有任何用处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:54:44.173

为@HansUp 干杯！我将原始主键添加到初始查询中，并且只是比较了这些主键，而不是尝试比较备忘录字段；一个更简单的解决方案！我可能会将主键添加为子查询，以使原始查询仅包含感兴趣的字段，但至少它可以正常工作！大家干杯！我爱这个社区。

# cocoa - 使用核心动画缩放

> ID：14566410
> 
> 赞同：4
> 
> 时间：2013-01-28T16:20:24.430
> 
> 标签：cocoa, core-animation

我有一个想要缩小 50% 的 NSScrollView。我使用以下代码执行此操作：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.scale"];

animation.fromValue = [NSNumber numberWithFloat:1.00];
animation.toValue = [NSNumber numberWithFloat:0.50];
[animation setDuration:0.20f];

[animation setFillMode:kCAFillModeForwards];
[animation setRemovedOnCompletion:NO];

[self.scrollView.layer addAnimation:animation forKey:@"drag"]; 
```

这可行，但是当我在缩小视图之外单击时，滚动视图的文档视图会收到 mousedown 事件。因此，尽管滚动视图及其内容在视觉上看起来是按比例缩小的，但从技术上讲并非如此。

我该怎么做呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T00:55:17.233

图层动画的行为与您描述的完全一样（动画只会改变外观，不会改变底层几何体。）

尝试使用 UIView 块动画并更改滚动视图的变换而不是图层的变换。

编辑：

哦。抱歉，我以为这是 iOS。我想我应该注意到你说它是 NSView，而不是 UIView。这些天我的大部分工作都是在 iOS 上完成的，而我的 OSX 体验主要来自 Core Animation 之前。

我认为答案是获取视图的动画代理并对其进行更改，但我只在 Mac OS 中使用动画代理进行了一些学习练习，因此我必须进行一些挖掘以查找细节。

# jquery - JQuery UI单选值没有改变

> ID：14566416
> 
> 赞同：1
> 
> 时间：2013-01-28T16:20:45.890
> 
> 标签：jquery, jquery-ui, radio-button

我的问题和这个[一样](https://stackoverflow.com/questions/14565187/radio-button-selection-not-changing-value-with-jquery)。

假设我有以下 HTML 代码：

```
<input type="radio" name="test" id="banana" value="Banana" checked="true" />
<input type="radio" name="test" id="cherry" value="Cherry" /> 
```

和javascript：

```
$('[type="radio"]').buttonset(); 
```

当我单击“Cherry”按钮时，JQuery UI 会正确更改视图。但是，`$('[name="test"]').val();`返回“香蕉”...

任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:20:45.890

为了解决这个问题，我打电话给`$('[name="test"]:checked').val();`它，它似乎有效。

如果您想检测单选按钮的变化，请不要调用`$('[name="test"]').click()`but `$('[name="test"]').change()`。

我希望这会对人们有所帮助。

# c++ - Netbeans忽略文件

> ID：14566417
> 
> 赞同：2
> 
> 时间：2013-01-28T16:20:47.120
> 
> 标签：c++, git, netbeans

在 Netbeans 中，当我从现有源创建一个新的 C++ 项目时，只有 Makefile 似乎受 Git 版本控制。从 Netbeans 中的“项目”或“文件”窗口查看时，其他文件（.h、.cpp）似乎都被忽略（灰显）。

如何跟踪这些文件？

我已经尝试过右键单击 unignore 选项。我此时没有 .gitignore 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:35:32.490

您可以通过其他方式忽略 git 中的文件，而不是使用`.gitignore`.

在项目文件夹中检查文件`.git/info/exclude`- 您可以排除您不想保留在 .gitignore 中的文件（通常与其他编码人员共享）

您还可以忽略全局级别的文件。检查 Netbeans 的设置 - 它可能有一个 git 使用的全局忽略列表。

# java - 使用 javaMail 检索附件文件名的问题

> ID：14566422
> 
> 赞同：1
> 
> 时间：2013-01-28T16:21:01.173
> 
> 标签：java, jakarta-mail, attachment

我有一个应该处理一些邮件的插件，所以我需要从 imap 邮件中获取附件并做一些事情。

一切似乎都有效，但我有一封邮件有一个奇怪的附件标题，我无法正确获取它，这里是附件标题：

```
 --_01d0aeb2-3f01-4153-9121-66b7af6924f1_
Content-Type: application/msword
Content-Transfer-Encoding: base64
Content-Disposition: attachment; filename=
    "=?iso-8859-1?Q?Atto_Aziendale_(xxx=E0_del_xxx_xxx_-_xxx)=2C_Pr?=
 =?iso-8859-1?Q?of.xxx_xxx_-_Dr.xxx_xxx.doc?=" 
```

“x”是为了隐私，但这并不重要，问题是当我尝试使用 javaMail 获取此附件的文件名时：

```
Attachment att = new Attachment(mailPart);
String filename = att.getFilename(); 
```

我只得到这个：“Atto Aziendale (xxx del xxx xxx - xxx), Pr”

似乎它没有读取第二行。

我还尝试以另一种方式获取文件名：

```
mailPart.getHeader("Content-Disposition").getAttribute("filename").toString(); 
```

然后返回： filename="=?iso-8859-1?Q?Atto_Aziendale_(xxx=E0_del_xxx_xxx_-_xxx)=2C_Pr?==?iso-8859-1?Q?of.xxx_xxx_-_Dr.xxx_xxx.doc?= "

所以似乎该属性已正确读取，但如果我尝试获取：

```
mailPart.getHeader("Content-Disposition").getAttribute("filename").getValue(); 
```

然后我再次得到一个截断的文件名：“Atto Aziendale (xxx del xxx xxx - xxx), Pr”

任何人都知道如何获得完整的文件名或我应该如何解码文件名属性？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T21:06:14.267

如果您使用 IMAP，IMAP 服务器将解析邮件标头并将解析后的值返回给 JavaMail 客户端。您的 Content-Disposition 标头有几个延续行。IMAP 服务器需要正确组合这些续行并返回参数值。看起来服务器正在省略续行所暗示的空格并将“？=”与“=？”连接起来。如果它们之间没有空格，它们似乎是一个编码词而不是两个，这可能解释了为什么在解码它们时会得到错误的结果。

尝试将系统属性“mail.mime.decodetext.strict”设置为“false”；这可能允许 JavaMail 解码该值。有关详细信息，请参阅[javax.mail.internet 包的 javadocs](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/package-summary.html)。

# java - 从 Node.js / Heroku 应用程序执行 Java 程序服务器端？

> ID：14566424
> 
> 赞同：4
> 
> 时间：2013-01-28T16:21:06.690
> 
> 标签：java, node.js, heroku

我可以从 Heroku 上的 Node.js 应用程序调用 Java 程序吗？

我有一个 Node.js/Heroku 应用程序。但现在需要添加服务器端功能以在输入数据文件上运行算法并将数据输出为 JSON 格式。我已经有一个可以读取文件并运行算法的 Java 库，我很难（充其量）用纯 Node.js 重写它。

因此，可以编写一个命令行程序，该程序接受一个输入文件并将结果通过管道传输到标准输出，例如

`java mytask.class -cp ./mylibrary.jar --in /tmp/file.in > output.json`

是否可以从 Node.js 调用 Java 命令行程序？我知道可以将 Java 应用程序部署到 Heroku，但这里想从 Node.js 应用程序执行一点 Java。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:22:52.240

你不想要[这个](http://nodejs.org/api/child_process.html)，`child_process.exec()`特别是吗？

> Node 通过 child_process 模块提供了一个三向的 popen(3) 工具。
> 
> 可以通过孩子的标准输入、标准输出和标准错误以完全非阻塞的方式流式传输数据。

请注意，您上面的示例命令不正确，因为您正在尝试通过管道传输到文件 ( `output.json`)。管道仅在进程之间工作。子进程模块将允许您直接读取进程的标准输出并且您不需要该文件（类似于输入流）

# c# - 为什么我的地形渲染不正确？

> ID：14566425
> 
> 赞同：0
> 
> 时间：2013-01-28T16:21:07.107
> 
> 标签：c#, 3d, xna

目前，我有一个随机地形生成器，我确信它可以正常工作，但是，当我尝试构建一组时`VertexPositionColor`，它不能正确渲染。这是我目前拥有的（俯视图）： ![俯视图](../Images/787d909a4811723b42edd0aa26dba2e8.png)

我的代码：

```
List<VertexPositionColor> w = new List<VertexPositionColor>();
int width = 20;
int height = 20;
float terrainScale = 2.0f;
long seed = (DateTime.Now.Millisecond + DateTime.Now.Second * DateTime.Now.Hour);
ProceduralLayeredMapGenerator plmg = new ProceduralLayeredMapGenerator(seed);
Random rand = new Random((int)seed);
for (int y = 0; y < height; y++)
{
    for (int x = 0; x < width; x++)
    {
        Vector3 position = new Vector3();
        position.X = x;//(x - width / 2) * terrainScale;
        position.Z = y;//(y - height / 2) * terrainScale;
        float point = plmg.getPoint(x, y);
        Color computedColor = new Color(rand.Next(255), rand.Next(255), rand.Next(255));
        position.Y = (point * 2);
        w.Add(new VertexPositionColor(position, computedColor));
    }
}
colors = w.ToArray(); 
```

然后绘制代码：

```
foreach (EffectPass pass in effect.CurrentTechnique.Passes)
{
    pass.Apply();
    GraphicsDevice.DrawUserPrimitives(PrimitiveType.TriangleStrip, colors, 0, colors.Length / 3, VertexPositionColor.VertexDeclaration);
} 
```

我怎样才能让它看起来更像这样：

![在此处输入图像描述](../Images/ce2e679b05c38bfcafd8276c0e1e6d7b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:51:24.607

如果要绘制 TriangleStrip，则必须按照用于绘制三角形的顺序添加顶点；现在，您正在从上到下、从左到右添加顶点。此外，要渲染这样的高度图，您需要使用多个 TriangleStrips。

# c# - 无法从 App_Code 文件夹加载类型（网站不是 Web 应用程序）

> ID：14566432
> 
> 赞同：0
> 
> 时间：2013-01-28T16:21:13.397
> 
> 标签：c#, asp.net

我已经有一段时间了这个问题。我无法从文件后面的代码中加载类型。

例如：

```
<%@ Application Codebehind="~/App_Code/GlobalAsax.cs" Inherits="BaseGlobal.GlobalAsax" Language="C#" %> 
```

这是我的 c# GlobalAsax.cs 文件：

```
namespace BaseGlobal
{
    public class GlobalAsax : System.Web.HttpApplication
    {
        //code in here... 
    }

} 
```

具体错误：

> 无法加载类型 BaseGlobal.GlobalAsax

为什么我会收到错误消息？我一直在试图弄清楚这一点。注意：这是一个网站项目，而不是网络应用程序。

多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:53:45.780

只是从我的头顶...

1）您是否尝试过添加 Src 属性？

```
Src="~/App_Code/GlobalAsax.cs" 
```

2）您是否预编译了代码隐藏类？

3）您确定路径已解析为正确的路径吗？您是否尝试过使用绝对路径来确保？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:23:53.597

尝试对 codebehind 属性使用相对文件路径而不是 url。喜欢`App_Code\GlobalAsax.cs`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T15:04:46.583

更改 Web 项目的输出路径。设置为 bin\debug，但除非输出路径设置为简单的“bin”，否则 Web 项目不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-31T15:05:16.453

当代码文件在 App_Code 中时，您不需要指定 CodeBehind，试试这个：

```
<%@ Application Inherits="BaseGlobal.GlobalAsax" %> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-31T14:52:34.033

在我所做的所有工作中，Global.asax 没有使用指令`codebehind`中的属性。`Application`对于`Inherits`属性，请确保您提供了**完全限定**的类名（带有完整的命名空间）。这非常依赖于您在项目属性中设置的内容。查看“根名称空间”值，看看是否需要在`Inherits`属性中包含更多内容。

注意：“根命名空间”字段的确切名称和位置可能会根据您使用的项目类型和 Visual Studio 版本而有所不同。

# sql - Oracle 表空间数据增长直方图

> ID：14566433
> 
> 赞同：1
> 
> 时间：2013-01-28T16:21:15.443
> 
> 标签：sql, oracle, histogram

是否可以为 Oracle 实例中的特定表空间生成数据增长的直方图？我的具体意思是这样的查询：

```
select * from internal_growth_report
where metric_Date between start and finish 
```

这会给我一个包含如下数据的输出：

```
Data start    Data End    percent increase     last accessed   
0kb             15kb       (infinity) 100%      Today  
12kb            12kb        0%                  3 weeks ago   
20kb            10kb        -50%                Today 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T20:10:34.090

我怀疑这样的事情是否存在。如果对您有帮助，我会使用此查询来查找架构中占用空间的内容。

```
select segment_name object
,      round(sum(bytes)/1024/1024) size_mb
from   user_extents
group by segment_name
order by 2 desc 
```

# android - 缓存磁盘映像

> ID：14566439
> 
> 赞同：0
> 
> 时间：2013-01-28T16:21:29.013
> 
> 标签：android, caching

我正在尝试使用磁盘缓存（不是内存缓存），因此我从 url 下载图像并将其放在网格视图中。我只想下载我的图像一次。

我在谷歌网站找到了这个例子（bitmapFun）：http: [//developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

我发现这个例子有点复杂。util包中有很多对象（AsyncTask、DiskLruCache、ImageCache、ImageFetcher、ImageResizer、ImageWorker、Utils）

有没有一种方法或教程可以展示我如何在不使用所有这些对象的情况下使用磁盘 Lru 缓存。我不想调整图像大小，也无法删除 ImageResizer 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:25:29.363

在这里你有很好的答案：[Android 图像缓存](https://stackoverflow.com/questions/1945201/android-image-caching)。引述 ：

“考虑使用Sergey Tarasevich 的[Universal Image Loader 库](https://github.com/nostra13/Android-Universal-Image-Loader)。它带有：

```
//Multithread image loading. It lets you can define the thread pool size
//Image caching in memory, on device's file sytem and SD card.
//Possibility to listen to loading progress and loading events 
```

Universal Image Loader 允许对下载的图像进行详细的缓存管理，具有以下缓存配置：

```
UsingFreqLimitedMemoryCache: //The least frequently used bitmap is deleted when the cache size limit is exceeded.
LRULimitedMemoryCache: //The least recently used bitmap is deleted when the cache size limit is exceeded.
FIFOLimitedMemoryCache: //The FIFO rule is used for deletion when the cache size limit is exceeded.
LargestLimitedMemoryCache: //The largest bitmap is deleted when the cache size limit is exceeded.
LimitedAgeMemoryCache: //The Cached object is deleted when its age exceeds defined value.
WeakMemoryCache: //A memory cache with only weak references to bitmaps. 
```

一个简单的使用示例：

```
ImageView imageView = groupView.findViewById(R.id.imageView);
String imageUrl = "http://domain.com/image.png"; 

ImageLoader imageLoader = ImageLoader.getInstance();
imageLoader.init(ImageLoaderConfiguration.createDefault(context));
imageLoader.displayImage(imageUrl, imageView); 
```

此示例使用默认值`UsingFreqLimitedMemoryCache`。

# actionscript-3 - AS3：使用 SWC 共享库而无需重命名打包的类

> ID：14566443
> 
> 赞同：0
> 
> 时间：2013-01-28T16:22:02.427
> 
> 标签：actionscript-3

我正在尝试将共享资产集中在共享库 swc 中。其中一些资产具有与之相关的类别。一个例子是 Preloader，它具有类 Preloader.as。

如果我将 swc 添加到库路径，并且不将原始 Preloader.as 文件重命名为 _Preloader.as 之类的文件，则会出现疯狂的空错误。

还是有更好的方法来创建swc？也许包括资产但不包括类？

# ios - 使 UITabBarItem 项目之一在 UITabBarController 中没有视图

> ID：14566445
> 
> 赞同：0
> 
> 时间：2013-01-28T16:22:03.653
> 
> 标签：ios, uitabbarcontroller, uitabbaritem

我有一个带有两个“普通”UITabBarItem 的 UITabBarController，我使用以下代码添加：

```
self.tabBarController.viewControllers = @[viewController1, viewController2]; 
```

现在我希望我的 UITabBar 有一个行为不同的额外项目，我希望它是一个“按钮”，可以在当前视图之上打开关于视图，因此不会以与其他视图相同的方式查看（因为我希望这个关于视图在显示时具有特殊效果），但除此之外我希望它具有与其他项目相同的样式。

这可以做到吗，怎么做？

谢谢索伦_

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:25:55.503

您可以在标签栏中为“specialButton”添加空白视图，然后处理：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController 
```

在这种方法中，您应该重定向到以前活动的选项卡，然后施展魔法。我希望这是有帮助的...

# java - java中的变量没有在循环中保存它们的值

> ID：14566458
> 
> 赞同：-3
> 
> 时间：2013-01-28T16:23:00.513
> 
> 标签：java, variables, loops, scope

我正在遍历一个圆（r）的可能半径，当我找到潜在的候选者时，我基本上想将它们推入堆栈。我只需要记住最后两个半径和它们对应的圆的颜色，所以我创建了四个整数来存储这些变量。但是，我包含的打印语句总是为两个变量产生 0 值。

```
 //small stack to hold values of previous circles
            int small_radius    =   0;
            int small_color     =   0;
            int med_radius      =   0;
            int med_color       =   0; 
            //iterate through possible radii       
            while (r<max){
                //check for possibility of a circle
                if(detectCircle(x,y,r,img,g)){
                    //confirm it is a circle and store its color
                    int large_color = confirmCircle(x,y,r,img,g);
                    if(large_color != -1){
                        //if it is a circle, compare the medium circle against the current one and the small one
                        //check if the current circle and small circle do not immediately surround the medium circle
                        boolean matches_small = (med_radius-1 == small_radius && med_color == small_color);
                        boolean matches_large = (r-1 == med_radius && large_color == med_color);
                        if(!matches_small && !matches_large){
                            //if it is a circle of single line thickness, draw it
                            System.out.println("med_radius: "+med_radius+" small_radius: "+small_radius);
                            drawCircle(x,y,r,img,g);
                        }
                        //now push the current circle onto the stack.
                        small_radius = med_radius;
                        small_color  = med_color;
                        med_radius   = r;
                        med_color    = large_color;  
                    }
                }
                r++;
            } 
```

编辑：对于那些想知道 confirmCircle 是什么样子的人来说，这里是，但它不应该有所作为。

```
 static int confirmCircle(int cx, int cy, int r, BufferedImage img, Graphics2D g) {

    int color = img.getRGB(cx,cy+r);

    int f = 1-r;
    int ddF_x = 1;
    int ddF_y = -2 * r;
    int x = 0;
    int y = r;

    while(x < y) {
        if(f >= 0) {
            y--;
            ddF_y += 2;
            f += ddF_y;
        }
        x++;
        ddF_x += 2;
        f += ddF_x;

        if(img.getRGB(cx+x,cy+y) != color){color = -1;}
        if(img.getRGB(cx-x,cy+y) != color){color = -1;}
        if(img.getRGB(cx+x,cy-y) != color){color = -1;}
        if(img.getRGB(cx-x,cy-y) != color){color = -1;}
        if(img.getRGB(cx+y,cy+x) != color){color = -1;}
        if(img.getRGB(cx-y,cy+x) != color){color = -1;}
        if(img.getRGB(cx+y,cy-x) != color){color = -1;}
        if(img.getRGB(cx-y,cy-x) != color){color = -1;}
    }
    return color;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:25:17.753

此示例中没有代码分配给四个变量中的任何一个。

如果您在 内部进行赋值，那么问题是当它们在 Java 中按值传递时`confirmCircle()`，您期望s 是按引用传递。`int`

换句话说：

```
int a = 4;

public void changeA(int someVar) {
    someVar++;
}

changeA(a);
System.out.println(a);  //prints 4, not 5. 
```

# perl - 不同 utf8 的开放式编译指示有何不同？

> ID：14566460
> 
> 赞同：3
> 
> 时间：2013-01-28T16:23:06.060
> 
> 标签：perl, utf-8

这三个版本的行为是否都不同？

```
use open qw( :encoding(UTF-8) :std );  
use open qw( :encoding(UTF8) :std );  
use open qw( :utf8 :std ); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T16:43:15.793

首先，`:utf8`仅将文本标记为 UTF-8，它不检查它是否有效。有关信息，请参阅[PerlMonks 上的这篇文章](http://www.perlmonks.org/?node_id=626470)。

`:encoding`是 PerlIO 的扩展层，perl`perldoc perliol`

> ":encoding" 使用编码；使该层可用，尽管 PerlIO.pm “知道”在哪里可以找到它。这是一个层的例子，它接受一个参数，因为它被称为： open( $fh, "<:encoding(iso-8859-7)", $pathname );

其他两个问题在常见问题解答中得到解答`perldoc perlunifaq`

> **":encoding" 和 ":utf8" 有什么区别？**因为 UTF-8 是 Perl 的内部格式之一，您通常可以跳过编码或解码步骤，直接操作 UTF8 标志。代替 ":encoding(UTF-8)"，您可以简单地使用 ":utf8"，如果数据在内部已经表示为 UTF8，它会跳过编码步骤。这在您写作时被广泛接受为良好的行为，但在阅读时可能很危险，因为当您有无效的字节序列时它会导致内部不一致。使用 ":utf8" 输入有时会导致安全漏洞，因此请改用 ":encoding(UTF-8)"。您可以使用“_utf8_on”和“_utf8_off”来代替“decode”和“encode”，但这被认为是不好的风格。尤其是 "_utf8_on" 可能很危险，原因与 ":
> 
> **“UTF-8”和“utf8”有什么区别？**“UTF-8”是官方标准。“utf8”是 Perl 在接受的内容方面自由的方式。如果您必须与不那么自由的事物进行通信，您可能需要考虑使用“UTF-8”。如果你必须与过于自由的东西交流，你可能不得不使用“utf8”。完整的解释在编码中。“UTF-8”在内部称为“utf-8-strict”。本教程始终使用 UTF-8，即使内部实际使用了 utf8，因为这种区别可能很难区分，而且大多是无关紧要的。例如，utf8 可用于 Unicode 中不存在的代码点，如 9999999，但如果将其编码为 UTF-8，则会得到一个替换字符（默认情况下；有关更多信息，请参阅编码中的“处理格式错误的数据”处理这个问题的方法。）好的，如果您坚持：“内部格式”是 utf8，而不是 UTF-8。（当它不是其他编码时。）

`open`pragma（即`use open`）只*为输入和输出设置默认的 PerlIO*层；`:std`执行以下操作，

> ":std" 子编译指示本身没有效果，但如果与 ":utf8" 或 ":encoding" 子编译指示结合使用，它会转换标准文件句柄（STDIN、STDOUT、STDERR）以符合为输入/输出选择的编码手柄。例如，如果输入和输出都选择为 ":encoding(utf8)"，则 ":std" 将意味着 STDIN、STDOUT 和 STDERR 也在 ":encoding(utf8)" 中。另一方面，如果只选择输出在 ":encoding(koi8r)" 中，":std" 将导致只有 STDOUT 和 STDERR 在 "koi8r" 中。":locale" 子编译指示隐式打开 ":std"。

`:std`如上所述，将标准流设置为接收 Unicode 输入 perl 的 subpragma（特定于 open.pm）也是如此`:utf8`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:03:58.547

埃文似乎有你的答案。对于未来的易用性，请参阅[`uft8::all`](https://metacpan.org/module/utf8%3a%3aall)“*开启 Unicode - 全部”*。

# c# - 如何使用 .NET 将复杂对象反序列化为平面

> ID：14566462
> 
> 赞同：0
> 
> 时间：2013-01-28T16:23:15.773
> 
> 标签：c#, .net, deserialization, xml-deserialization

我有像这样的XML：

```
<root>
  <prop1>value1</prop1>
  <prop2>value2</prop2>
  <data>
    <prop3>value3</prop3>
    <prop4>value4</prop4>
  <data>
</root> 
```

我想将其反序列化为一个对象，例如：

```
class xyz
{
    string prop1;
    int prop2;
    string prop3;
    int prop4;
} 
```

我应该如何用 -Attribute 标记 prop2 和 prop3 `XmlElement`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:32:30.463

您可以为此使用 Linq 2 Xml（假设您将修复您的 xml 并添加`public`到您的字段定义中）

```
var xDoc = XDocument.Parse(xml); // XDocument.Load(filename);
var x = new xyz()
    {  
        prop1 = xDoc.Root.Element("prop1").Value,
        prop2 = (int)xDoc.Root.Element("prop2"),
        prop3 = xDoc.Root.Element("data").Element("prop3").Value,
        prop4 = (int)xDoc.Root.Element("data").Element("prop4"),
    }; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T17:10:04.817

我会推荐这种方法：

```
[XmlRoot("root")]
[Serializable]
public class RootElement
{
    [XmlElement("prop1")]
    public string prop1 { get; set; }

    [XmlElement("prop2")]
    public string prop2 { get; set; }

    [XmlElement("data")]
    public DataElement data { get; set; }
}

[XmlRoot("data")]
[Serializable]
public class DataElement
{
    [XmlElement("prop3")]
    public string prop3 { get; set; }

    [XmlElement("prop4")]
    public string prop4 { get; set; }
}

var yourObject = (RootElement)new XmlSerializer(typeof(RootElement)).Deserialize("your xml goes here"); 
```

您可以像这样访问您的属性：

```
yourObject.prop1
yourObject.prop2
yourObject.data.prop3
yourObject.data.prop4 
```

如果您想将 xml 反序列化为平面结构，我认为默认情况下是不可能的。您可以编写自己的 IXmlSerializable 实现或更好地覆盖 XmlSerializer 的某些方法。

# batch-file - 批处理脚本和 Web 证书

> ID：14566466
> 
> 赞同：1
> 
> 时间：2013-01-28T16:23:35.570
> 
> 标签：batch-file, certificate, login-script

我正在尝试通过登录脚本在多台机器上为网站安装证书。这是可能的还是最好的选择是什么？我最熟悉批处理脚本，如果有人已经在工作，那对我来说是最好的选择，否则我可以在登录脚本中调用 vbs。

我试图只调用证书，但它有一些选项，我需要将它转到 Truster Publisher，以便在没有用户提示的情况下加载 activeX 控件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:43:26.980

实际上我过去也遇到过同样的问题......您将需要探索以下命令：

```
certutil.exe 
```

此命令允许您通过命令行安装证书。

```
certutil.exe -addstore -f "TrustedPublisher" "<Location_of_Certificate>" 
```

前面的命令将为您提供所需的内容，只需将 替换`"<Location_of_Certificate>"`为证书的实际位置和文件名。

在某些情况下，使用“-f”选项有点矫枉过正，但我​​确实编写了一种方法来检查证书是否已首先安装。如果是，那么我跳过尝试运行这部分，因为您实际上可以安装多个证书存储，这很麻烦。

为此，首先您需要知道发布者的名称。我这样做的方法是在计算机上手动安装 Cert，然后运行以下命令：

```
certutil.exe -store trustedpublisher 
```

这应该会为您提供所有您信任的发布者的列表。现在在列表中找到您需要的...您将看到类似以下内容（我以 Microsoft Root Authority 为例）：

> 序列号：xxxx11dxxxx8ffexxxx **发行者：CN=Microsoft Root Authority** , OU=Microsoft Corporation, OU=Copyright (c) 1997 Microsoft Corp. NotBefore: 10/1/1997 2:00 AM NotAfter: 12/31/2002 2:00 AM 主题: CN=Microsoft Windows Hardware Compatibility, OU=Microsoft Corporation, OU=Microsoft Windows Hardware Compatibility Intermediate CA, OU=Copyright (c) 19 97 Microsoft Corp. Non-root Certificate Template: Cert Hash(sha1): xx xx 1c xx xx 45 xx xx b3 xx xx 94 xx xx 7c 74 07 33 03 1c 没有密钥提供者信息 找不到用于解密的证书和私钥。

现在您已经拥有与将列出的证书完全相同的证书颁发者，您可以执行检查：

```
certutil.exe -store trustedpublisher | findstr "Microsoft Root Authority" 
```

现在这应该会给你一些你在原始列表中看到的相同信息。这是我从头到尾处理该过程的方法（注意我将证书添加到受信任的发布者和 CA）：

```
:importCertRoot
verify >nul
certutil.exe -store trustedpublisher | findstr "Microsoft Root Authority"  
IF '%ERRORLEVEL%'=='0' goto importCertLocal
verify >nul
certutil.exe -addstore -f "TrustedPublisher" "<Location_of_Certificate>\<CertName.cer>"
goto importCertLocal

:importCertLocal
verify >nul
certutil.exe -store CA | findstr "Microsoft Root Authority"  
IF '%ERRORLEVEL%'=='0' goto exit
verify >nul
certutil.exe -addstore -f "CA" "<Location_of_Certificate>\<CertName.cer>"
goto next 
```

我希望这可以帮助你

# python - Python函数不返回任何值

> ID：14566467
> 
> 赞同：0
> 
> 时间：2013-01-28T16:23:39.983
> 
> 标签：python, python-3.x

我无法弄清楚为什么以下两个打印语句会给出不同的结果。有人可以解释一下吗？我只是举一个小例子。在第一个打印语句表中被一个特殊字符替换，第二个给出了正确的字符。

```
import re  

def tblcnv( str ):  
    rtval = re.sub("table", "chair", str)  
    return rtval  

rval = "<table is in the place where you sit daily "  
tblcnt = re.sub(r"<(table.*place)", tblcnv('\1'), rval)  

print tblcnt  
print tblcnv("<table is in the place where you sit daily") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:32:50.373

这一行：

```
tblcnt = re.sub(r"<(table.*place)", tblcnv('\1'), rval) 
```

可能不会做你认为应该做的事情。调用`tblcnv('\1')`返回 '\1' ，这是您看到的笑脸，然后它将字符串的第一块替换为所述笑脸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:33:09.860

定义 tblcnt 时，您传递的是 tblcnv('\1')。'\1' 是包含一个值为 0x01 的单个字节的字符串。所以 tblcnv 的结果是相同的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:59:34.553

根据[re.sub](http://docs.python.org/2/library/re.html#re.sub)手册，它需要一个“为每次不重叠出现的模式调用”的函数。由于这些事件实际上是匹配对象，因此您最好使用一个简单的 lambda 表达式，该表达式提取`group(1)`匹配对象的 并将其传递给您的`tblcnv`函数。

```
import re

def tblcnv( str ):  
    rtval = re.sub("table", "chair", str)  
    return rtval  

rval = "<table is in the place where you sit daily "  
tblcnt = re.sub(r"<(table.*place)", lambda m: tblcnv(m.group(1)), rval)  

print tblcnt  
print tblcnv("<table is in the place where you sit daily") 
```

# c++ - 使用 Qt 5.0 以编程方式创建视频

> ID：14566470
> 
> 赞同：16
> 
> 时间：2013-01-28T16:23:51.980
> 
> 标签：c++, qt, opencv, ffmpeg

我们有一个 QT 应用程序，它将以编程方式生成的 QPixmap 一张一张地呈现到显示器上，我们希望将此输出保存到视频文件中。

我知道过去人们建议使用 ffmpeg 或 opencv 和 Qt 来执行此操作。然而，在 Qt 5 中，新的 QtMultimedia 模块似乎公开了一些此类功能。

例如，现在可以使用[http://doc.qt.io/qt-5/qmediarecorder.html#details](http://doc.qt.io/qt-5/qmediarecorder.html#details)中描述的 QMediaRecorder 在 Qt 5 中保存来自相机源的视频。

有了这个新功能，有什么方法可以使用 Qt 5 来​​保存我们以编程方式生成的视频，还是使用第三方库更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T09:22:01.760

这实际上早在 Qt 4.7 就可以通过使用 QVideoFrame 和 QAbstractVideoSurface 来实现。Qt 甚至有这个很好的例子来创建一个可以显示编程构造的 QVideoFrames 的视频小部件：

[http://qt-project.org/doc/qt-4.8/multimedia-videowidget.html](http://qt-project.org/doc/qt-4.8/multimedia-videowidget.html)

您可以将此小部件与 QVideoFrame 的映射功能结合使用，以使用格式正确的数据填充单个视频帧。这应该看起来像这样：

实例化你的 videoWidget：

```
VideoWidgetSurface * videoWidget = new VideoWidgetSurface();
QSize videoSize(500,500); // supplement with your video dimensions

// look at VideoWidgetSurface::supportedPixelFormats for supported formats
QVideoSurfaceFormat format( videoSize, QVideoFrame::Format_RGB32, QAbstractVideoBuffer::QPixmapHandle)

// possibly fill with initial frame?

videoWidget->start(format); 
```

...以及当您想要更新视频小部件的当前帧时：

```
// If you don't need the data in any past frames you can probably just create one frame
// and just use it repeadtly (as VideoWidgetSurface only keeps track of one frame at a time)
QVideoFrame aFrame(32 * format.frameWidth()  * format.frameHeight(),format.frameSize(), 32 * format.frameWidth(),format.pixelFormat());

aFrame.map(QAbstractVideoBuffer::WriteOnly);

QRgb * pixels = aFrame.bits();

// perform pixel manipulation here...

aFrame.unmap();

videoWidget->present(aFrame); 
```

.. 并结束播放...

```
videoWidget.stop(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-22T18:35:18.120

[... 三年后]。如上所述，问题是关于生成视频文件（例如 .avi、.mpeg、动画 .gif 和/或 .mp4）。

看起来**FFmpeg**真的不是**商业应用程序**的选择——例如参见：[https](https://www.ffmpeg.org/legal.html) ://www.ffmpeg.org/legal.html （“注意 FFmpeg ...”句子和页面上的最后两段）。

看起来 Qt 仍然没有生成视频文件的本机功能（例如 .avi、.mpeg、动画 .gif 和/或 .mp4）——*请参阅下面的更新。*

我说得对吗？（此时 Qt 5.5.1 是最新的可用 Qt 版本）。

或者是否有任何可许可（收费）的软件包可以与可以创建视频文件的 Qt/C++ Windows 应用程序一起使用？（来自一系列以编程方式生成的 QPixmap 或 QImage ——或者至少有可能从那些 Qt 类接收帧图像数据？）。

（我们目前不需要从我们的 Qt 应用程序生成的视频文件中的任何音频）。

更新：不幸的是，Qt 商业许可证支持人员正在确认，目前（从 Qt 5.6 开始），没有办法将一系列以编程方式生成的 QImage（例如，从应用程序 QWidget 渲染）到 QMediaRecorder 类或任何其他类中生成合成动画并将其保存为视频文件的方法。（“没有相应的 API”）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-28T23:46:08.550

从技术上讲，只要您不为使用 FFmpeg 的功能收费，并且为 FFmpeg 使用单独的可执行文件，您就遵循 LGPL 和 GPL 许可证。您是否愿意冒成为诉讼目标的风险是另一个话题。

我有同样的需求（商业上），除了使用 FFmpeg 作为可调用的可执行文件之外，我无法为您提供解决方案，这在这些许可证下是允许的。

编辑：此线程可能对您有用：[https ://softwareengineering.stackexchange.com/questions/205689/using-exe-of-program-with-gnu-general-public-license-version-2-0-for-商业的](https://softwareengineering.stackexchange.com/questions/205689/using-exe-of-program-with-gnu-general-public-license-version-2-0-for-commercial)

# r - 如何在R中的地图中添加图片作为数据点

> ID：14566472
> 
> 赞同：3
> 
> 时间：2013-01-28T16:23:54.577
> 
> 标签：r

我在 R 中使用 maps 包来绘制一个简单的地理地图，然后将我的数据点放入其中。

我的问题是，R 中是否有任何方法可以用感兴趣的图片来表示数据点，例如，我在示例中正在研究的动物。

这只是为了让我的读者更好地表示我的数据点相对于彼此的分布。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:43:35.963

您也可以使用网格包。`grid.raster`可以用来放一些图片。

由于`maps`是图形基础包，您需要`gridBase`组合网格/基础图形。

这里有一个例子：

```
library(maps)
map('usa',boundary=T,fill=T,col='grey')
library(gridBase)
library(grid)
library(png)
vps <- baseViewports()
pushViewport(vps$figure,vps$plot)
camel <- readPNG("camel.png")    ## some animal picture
grid.rect(gp = gpar(fill=NA))

x <- c(-110,-100,-70)
y <- c(30,40,40)

grid.raster(image=camel,x=x,y=y,width=5,   ## it is vectorized
            interpolate=FALSE,default.units = 'native')
upViewport(1) 
```

![在此处输入图像描述](../Images/02f14f85da663d951936b376cfa196a6.png)

PS：我不确定美国有骆驼...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:41:28.480

`rasterImage`是一种方法，尽管有些费力。将感兴趣的图像格式化为光栅对象后，您可以将它们放置在绘图区域内的指定位置（和帧大小）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T21:29:24.423

除了`rasterImage`@CarlWitthoft 提到的功能之外，还有来自于 TeachingDemos 包的组合，`my.symbols`用于`ms.image`将图像添加到绘图（基本图形）。该`rasterImage`方法提供了最大的控制，但`my.symbols`更像是常规绘图功能，因为您说绘制以这些坐标为中心的图像（并设置其他选项以指定大小等）

# ios - 非常简单的发布/订阅网络应用程序或脚本，可以与 OSX/iOS 很好地交互？

> ID：14566475
> 
> 赞同：3
> 
> 时间：2013-01-28T16:24:08.377
> 
> 标签：ios, macos, webserver, publish-subscribe

我正在设计一些 OSX/iOS 应用程序，我想共享要托管在网络服务器上的资源。我想要某种可以存储订阅者列表的网络应用程序或脚本，并在资源更新时通知他们。（这里的明显目标是避免让每个应用程序都轮询网络服务器以获取更新。）

这里唯一的窍门是，我希望大量客户（例如，十几个）订阅 24/7 的更新。我不确定所有客户端保持实时连接是否是一个好主意......我想许多网络服务提供商会对他们的网络服务器保持十几个持久连接感到高兴（特别是如果他们几乎总是空闲）。

**（编辑）**我查看了 Apple Push Network Service (APNs)，但这不是解决我问题的正确方法。APNs 需要 Entrust SSL 证书，并且需要与 Apple Push Network 服务进行大量交互。我的项目更简单、更轻量级：我只需要一个脚本，上面写着“从设备 A 接收数据后，将其推送到设备 B/C/D”（假设这些设备可以通过某种方式访问​​……或者通过持久性连接或其他一些技术）。

提供这种机制的绝对最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T05:22:56.553

XMPPFramework 有一个发布-订阅模块（适用于[XEP-0060](http://xmpp.org/extensions/xep-0060.html)），它适用于大多数 XMPP 服务器。我什至将它调整为与 Snow Leopard 附带的聊天服务器一起使用。

如果你已经有一个 XMPP 服务器，这可能是值得的；否则这是一种重量级的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:04:18.553

“最简单的方法”可能对不同的人意味着不同的事情。如果您不喜欢将自己锁定在第三方服务中，那么您可以使用大量的应用程序框架和开源工具来自己构建一些东西。但是，如果 Web 应用程序开发不是您的强项，这并不“简单”。

有几种“现成的”服务可用于在 iOS 上进行实时消息传递：请记住，我只是列出了我从记忆中知道的那些，还有其他选择。[Pusher](http://pusher.com/)和[PubNub](http://www.pubnub.com/)都为移动应用程序提供实时消息服务，以及随时可用的 SDK。您可以与它们交互以通过套接字双向发送消息（类似于 APNS 的工作方式，但具有更多的控制权）。

您可以将这些服务与您自己的设备/用户管理系统一起使用，或者您可以使用“后端即服务”提供商，例如 Parse 或 Stackmob - 您可能不需要此步骤，这取决于您预期的应用程序/集成的复杂程度。

# vb.net - 灵活的日期解析

> ID：14566476
> 
> 赞同：0
> 
> 时间：2013-01-28T16:24:16.060
> 
> 标签：vb.net, parsing, date

我的一个字段可以包含很多不同的日期格式。我正在尝试解析它，但有时它根本不理解格式并返回 1900-01-01。或者有时，它会反转月、日和年：2023-12-11 而不是 2012-11-23。

该字段包含在由某种扫描仪生成的总共 1500-2500 个 excel 文件中。日期和时间在不同的情况下。

到目前为止，我已经看到了不同的格式，例如：yyyy-mm-dd 或 mm/dd/yy 和其他一些（我找不到，因为我不想花一天时间打开随机的 excel 文件，希望找到不同的格式 ^ ^')

所以......我已经尝试在手头解析它（不同字段的子字符串），但它仍然有错误，所以：

**是否有任何经常工作的 VB 日期解析工具？**

我想有一个库或可以从几乎任何已经编码的格式中解析日期的东西，如果我可以避免重新编码它，我会很高兴:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:31:21.087

不，当然没有任何东西可以解析任何（未知）格式的日期。它应该如何知道如何处理`9/10/11`？那可以是任何东西。

所以你可以使用[`TryParse`](http://msdn.microsoft.com/en-us/library/9h21f14e.aspx)or [`TryParseExact`](http://msdn.microsoft.com/en-us/library/vstudio/h9b85w22.aspx)（你甚至可以`string[]`为多种允许的格式传递 a ）并传递正确的`CultureInfo`.

# ruby-on-rails - 在 MissingTemplate 错误上呈现默认模板

> ID：14566477
> 
> 赞同：1
> 
> 时间：2013-01-28T16:24:18.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionview, missing-template

如何在 Rails 中捕获 ActionView::MissingTemplate 错误？

例如，我`PeopleController`有一个 Index 方法，但它不需要模板。当有人浏览到 root_url/people 时，他们会得到默认的静态错误模板。

这不是唯一有问题的控制器；我希望所有丢失的模板错误都将用户重定向到我的自定义视图。

1.  如何捕捉异常？
2.  之后如何渲染视图？

Rails 版本 - 3.0.19

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:36:44.717

可能重复：[当 Rails 中缺少请求的模板时呈现默认模板](https://stackoverflow.com/questions/851851/render-default-template-when-requested-template-is-missing-in-rails)

其中说：

> 在 ApplicationController 中使用“rescue_from”：

```
class ApplicationController < ActionController::Base
  rescue_from ActionView::MissingTemplate do |exception|
    # use exception.path to extract the path information
    # This does not work for partials
  end
end 
```

# sql - 为什么数字 0 评估为空格

> ID：14566480
> 
> 赞同：3
> 
> 时间：2013-01-28T16:24:25.590
> 
> 标签：sql, sql-server, sql-server-2008

这是以前让我感到困惑的事情，但我从来没有找到解释。我在 SQL Server 2008 数据库中有一个类型为`smallint`. 我想查找值为`NULL`或空白的任何行，所以我这样说：

```
SELECT *
FROM products
WHERE warranty_dom IS NULL
OR warranty_dom = '' 
```

这将返回值为 0 的行

那么为什么被`0`视为等同于`''`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T16:27:04.917

0 本身不被视为“”。相反， '' 被隐式转换为整数，并且该转换使其为 0。

自己试试：

```
SELECT CAST(0 AS varchar)        -- Output: '0'
SELECT CAST('' AS smallint)      -- Output: 0 
```

另外，正如其他地方所提到的：如果warranty_dom 是smallint 类型，那么它首先不可能是空白的。

# graphics - 是否有使用深度缓冲区的伪造抗锯齿算法？

> ID：14566483
> 
> 赞同：3
> 
> 时间：2013-01-28T16:24:43.527
> 
> 标签：graphics, 3d, antialiasing, fxaa, deferred-shading

最近我在我的 OpenGL 应用程序中实现了 FXAA 算法。我现在还没有完全理解这个算法，但我知道它使用最终图像的对比度数据来选择性地应用模糊。作为有意义的后期处理效果。B 因为我在我的应用程序中使用了延迟着色，所以我已经有了场景的深度纹理。使用它可能会更容易和更精确地找到在那里应用模糊的边缘。

那么是否有一种已知的抗锯齿算法使用深度纹理而不是最终图像来查找边缘？假货是指基于像素而不是顶点的抗锯齿算法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T22:51:41.720

经过一些研究，我发现我的想法已经在延迟渲染器中广泛使用。我决定发布这个答案，因为我想出了我自己的实现，我想与社区分享。

基于深度的梯度变化和法线的角度变化，对像素进行了模糊处理。

```
// GLSL fragment shader

#version 330

in vec2 coord;
out vec4 image;

uniform sampler2D image_tex;
uniform sampler2D position_tex;
uniform sampler2D normal_tex;
uniform vec2 frameBufSize;

void depth(out float value, in vec2 offset)
{
    value = texture2D(position_tex, coord + offset / frameBufSize).z / 1000.0f;
}

void normal(out vec3 value, in vec2 offset)
{
    value = texture2D(normal_tex, coord + offset / frameBufSize).xyz;
}

void main()
{
    // depth

    float dc, dn, ds, de, dw;
    depth(dc, vec2( 0,  0));
    depth(dn, vec2( 0, +1));
    depth(ds, vec2( 0, -1));
    depth(de, vec2(+1,  0));
    depth(dw, vec2(-1,  0));

    float dvertical   = abs(dc - ((dn + ds) / 2));
    float dhorizontal = abs(dc - ((de + dw) / 2));
    float damount = 1000 * (dvertical + dhorizontal);

    // normals

    vec3 nc, nn, ns, ne, nw;
    normal(nc, vec2( 0,  0));
    normal(nn, vec2( 0, +1));
    normal(ns, vec2( 0, -1));
    normal(ne, vec2(+1,  0));
    normal(nw, vec2(-1,  0));

    float nvertical   = dot(vec3(1), abs(nc - ((nn + ns) / 2.0)));
    float nhorizontal = dot(vec3(1), abs(nc - ((ne + nw) / 2.0)));
    float namount = 50 * (nvertical + nhorizontal);

    // blur

    const int radius = 1;
    vec3 blur = vec3(0);
    int n = 0;
    for(float u = -radius; u <= +radius; ++u)
    for(float v = -radius; v <= +radius; ++v)
    {
        blur += texture2D(image_tex, coord + vec2(u, v) / frameBufSize).rgb;
        n++;
    }
    blur /= n;

    // result

    float amount = mix(damount, namount, 0.5);
    vec3 color = texture2D(image_tex, coord).rgb;
    image = vec4(mix(color, blur, min(amount, 0.75)), 1.0);
} 
```

为了比较，这是没有任何抗锯齿的场景。

[![没有抗锯齿的场景](../Images/ba7021f41b1a8fd2e629838b94bb5d38.png)](https://i.stack.imgur.com/CPDVz.png)

这是应用了抗锯齿的结果。

[![抗锯齿场景](../Images/4dcdbc554da17ee664d821dc2275c890.png)](https://i.stack.imgur.com/845U2.png)

您可能需要以全分辨率查看图像以判断效果。在我看来，结果对于简单的实现来说已经足够了。最好的一点是，相机移动时几乎没有锯齿状伪影。

# tfs - 我可以修改 TFS 2012 中的默认签入操作吗？

> ID：14566485
> 
> 赞同：5
> 
> 时间：2013-01-28T16:24:51.643
> 
> 标签：tfs, visual-studio-2012

我想将变更集与工作项默认关联，以便在**TFS 2012**中关联它。

尝试`HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\**11.0**\TeamFoundation\SourceControl\Behavior @ResolveAsDefaultCheckinAction = "False"`对于 "State" 为**"Active"**的任务没有用。当状态是“新”、“提议”等时没关系……你有什么想法对所有状态都这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-31T06:41:36.100

说来话长，可行的解决方法如下：

> 在此处查看此链接 [http://msdn.microsoft.com/en-us/library/ms194965(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms194965%28v=vs.110%29.aspx)
> 
> 基本上，对于给定的工作项类型，有一个关于工作项转换的操作，称为“Microsoft.VSTS.Actions.Checkin”。当您签入代码时，源代码控制系统会查看您与签入相关联的工作项的当前状态。如果任何来自该状态的转换具有关联的签入操作，那么它将移动到该给定状态作为默认操作。
> 
> 解决方案是删除此操作 - 然后适用于 TFS 的所有用户

![在此处输入图像描述](../Images/2e65c83cfa70b47d4d118c9fbf951e50.png)

已复制 (Gary Howlett)，完整主题请点击以下链接：

[http://msdn.microsoft.com/en-us/library/ms194965(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms194965%28v=vs.110%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-29T13:48:46.827

我的答案不是你想要的答案，但它是这个问题的唯一答案。我提供的链接为您提供了两个可用的选项（包括[M.Radwan -MVP](https://stackoverflow.com/users/386323/m-radwan-mvp)给出的答案）：[将默认签入选项更改为在 TFS 2012 中关联](http://www.deliveron.com/blog/changing-default-checkin-option-associate-tfs-2012/)

****仅适用于 VS 2012 ULTIMATE** **

> **更新 Visual Studio 客户端以将默认选项更改为关联**
> 
> 这个选项听起来不错。不幸的是，它只在一种情况下有效。使用 Team Explorer 2012，启动签入的主要方法有两种。您可以从 Pending Changes 窗格和 My Work 窗格启动签入。默认情况下，如果您从任一位置启动签入，默认选项将是解决。应用此修复程序后，它将在从“我的工作”窗格而不是“待定更改”窗格启动操作时更新默认选项。
> 
> 根据我的经验，大多数签入都是从 Pending Changes 窗格或通过右键单击解决方案资源管理器中的某个位置启动的。无论哪种方式，您最终都会出现在 Pending Changes 窗格中，您可以在其中按查询或按 ID 关联工作项。不幸的是，更改对此没有影响，并将继续默认为 Resolve 选项，如下所示。
> 
> 在 Team Explorer 2012 中，有一个名为 My Work 的新窗格。此窗格旨在对您当前的所有工作进行分组和管理，包括代码、断点和相关工作项。这提供了暂停/恢复当前工作的能力，因此您可以切换到其他工作，然后稍后以您离开的方式返回它。应用更新后，从此处启动签入会将默认选项更改为关联。

1.  注册；设置：HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\TeamFoundation\SourceControl\Behavior\ResolveAsDefaultCheckinAction = False
2.  退出 Visual Studio 2012 的所有实例。
3.  使用管理员权限打开 VS 2012 的开发人员命令提示符。运行 devenv /setup 以确保 Visual Studio 拾取注册表。

# php - 如何使用 PHP 将表单检查列表数据发送到特定的电子邮件

> ID：14566486
> 
> 赞同：0
> 
> 时间：2013-01-28T16:24:54.570
> 
> 标签：php, html, forms, email

我真的很难找到一种将清单数据发送到电子邮件的方法，更不用说用户输入的电子邮件了！我尝试关注并应用其他类似问题的答案，但仍然无济于事。

到目前为止，这是我的 PHP，虽然我很困惑。

```
<?php 
//Check for POST
if (isset($_REQUEST['email'])){
//All your inputs
$expecting = array('checkbox1','checkbox2','checkbox3','checkbox4' ,'checkbox5');

//Start building your email
$email_content = '';
foreach($expecting as $input){
    //Is checkbox?
    if(substr($input,0,8)=='checkbox'){
        $email_content .= ucfirst($input).':'.(isset($_POST[$input]) && $_POST[$input] == 'on' ? 'True' : 'False'.'<br />');

    }else{
        $email_content .= ucfirst($input).':'.(!empty($_POST[$input]) ? $_POST[$input] : 'Unknown').'<br />';
    }
}
print_r($email_content);

if(mail('$email',  'packing list', wordwrap($email_content))){
   //mail sent
}else{
   //mail failed 2 send
}

}
?> 
```

这是我的 HTML

```
 <form name="emailform"  method="post" action="send-list.php">
  <div data-role="fieldcontain">
  <label for='name'><h3>Festival name:</h3> </label>
  <input type="text" name="name"> 

<h3>
Essentials
</h3>

<fieldset data-role="controlgroup" data-type="vertical">
<legend>
</legend>
<input name="checkbox1" id="checkbox1" type="checkbox" />
<label for="checkbox1">
Tickets
</label>
<input name="checkbox2" id="checkbox2" type="checkbox" />
<label for="checkbox2">
Parking pass
</label>
<input name="checkbox3" id="checkbox3" type="checkbox" />
<label for="checkbox3">
Directions
</label>
<input name="checkbox4" id="checkbox4" type="checkbox" />
<label for="checkbox4">
Cash &amp; Cards
</label>
<input name="checkbox5" id="checkbox5" type="checkbox" />
<label for="checkbox5">
Keys
</label>
</fieldset>

Email: <input name='email' type='text'><br>
<input type="submit" value="Send"> 
```

如果我可以将复选框发送到电子邮件，我会很高兴，然后我希望能够弄清楚如何将信息发送到用户输入的电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:30:18.170

你做的大多是正确的，但是你的代码正在检查复选框的值“on”......但永远不要在你的表单中设置该值：

```
<input name="checkbox5" id="checkbox5" type="checkbox" value="on" />
                                                       ^^^^^^^^^^ 
```

这也是一个语法错误：

```
if(mail('$email',  'packing list', wordwrap($email_content))){
        ^--    ^-- 
```

单引号字符串不插入变量。因此，您尝试向名为 的帐户发送电子邮件`$email`，而不是 $email 变量中的任何地址。

尝试

```
if(mail($email,  'packing list', wordwrap($email_content))){ 
```

相反（注意缺少引号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:29:46.990

`$email`变量未定义。

把这个：

```
 $email = $_REQUEST['email']; 
```

在`mail`函数调用之前，并使用`mail($email, ...`它来工作。

# android - AIDE 不会在“运行 AADT”阶段构建应用程序

> ID：14566487
> 
> 赞同：0
> 
> 时间：2013-01-28T16:24:55.043
> 
> 标签：android

我已将应用程序移至 mmy 设备，以便 AIDE 可以构建它，因此我可以安装它，但它卡在 AAPT 阶段。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T07:28:00.680

查看 [Menu] -> More -> Settings -> Build & Run -> Dexer Optimizations。如果它被检查，它可能需要更长的时间，我相信。我尝试构建 HelloWorld 应用程序模板，但我只是在等待几分钟后强制它退出构建。在我取消选中 Dexer 优化后，构建只需要几秒钟。仅供参考，我使用的是 800MHz Android 2.3.6 手机。

# c++ - 使用多集的 C++ 两优先级排序

> ID：14566490
> 
> 赞同：2
> 
> 时间：2013-01-28T16:24:59.180
> 
> 标签：c++, sorting, multiset

我试图以这样的方式根据其两个成员对类对象进行排序：根据**成员**排序。如果两个对象具有相同的值（或者如果差异低于某个阈值），则根据成员**b**进行搜索。我正在使用multiset。

**问题**是，当另一个对象到来时，根据排序类进行检查，并满足返回 true （被放置在比被比较的对象更高的位置），它也可能在另一个更高一级的情况下满足。我如何在这里介绍，它应该检查尽可能多的先前对象，并且尽可能高？（获得排序良好的多重集！）下面是我编写排序类的方式。请给我一些好主意！

我在为这部分代码引入缩进时遇到了问题，任何人都可以帮我编辑吗？这是不可读的。

```
std::multiset<classA , classA ::SortClass> mydata;

    class SortClass
        {
        public:
            bool operator() (const classA &pt1, const classA &pt2)
                {
                if(pt1.a < pt2.a)
                    {
                    if(abs(pt1.a-pt2.a) < 0.01)
                        {
                        if(pt1.b > pt2.b)
                            return true;
                        else 
                            return false;
                        }
                    else 
                        return true;
                    }
                else
                    return false;
                }
        }; 
```

**编辑：**

粘贴这个，看看我想要什么，不能实现。如果 m_a 相同，我希望它随着 m_a 增加而随着 m_b 减少（你可以把相等或不等放在那里，也不起作用）

```
#include <iostream>
#include <set>
using namespace std;

class classA
    {
    protected:
        double m_b;
        double m_a;

    public:
        double get_b() {return m_b;}
        double get_a() {return m_a;}
        void set_b(double b) {m_b = b;}
        void set_a(double a) {m_a = a;}    

        class SortClass
            {
            public:
                bool operator() (const classA &pt1, const classA &pt2)
                    {
                    if(pt1.m_a < pt2.m_a)
                        {
                        if(pt2.m_a - pt1.m_a == 0)
                            return (pt1.m_b > pt2.m_b);
                        else
                            return (pt1.m_a < pt2.m_a);
                        }
                    else
                        return false;
                    }
            };
    };
int main()
    {

    std::multiset<classA, classA::SortClass> mydata;
    classA objA;
    for(int i=0; i<100;i++)
        {
        objA.set_a(rand() %100);
        objA.set_b(rand() %10);
        mydata.insert(objA);
        }

    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:34:24.087

让我们停止使用,`true`和`false`表达式。它使您的代码更易于阅读。`return``bool`

```
 bool sortClassA (const classA &pt1, const classA &pt2)
    {
        if(pt2.m_a == pt1.m_a) {
            return pt1.m_b > pt2.m_b;
        }
        return pt1.m_a > pt2.m_a;
    }; 
```

* * *

此外，您创建了阈值问题。简单地将阈值降低到接近于零的值，问题就会消失，否则你将不得不忍受它。我没有看到任何其他方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:34:12.010

不幸的是，阈值不适用于 STL 有序容器。排序标准的一个必要条件是它定义了*严格的弱排序*；这意味着，除其他外，如果`a == b`和`b == c`，则`a == b`（`==`这里的意思是*等价*的；这既不大于也不小于，不一定相等）。

我们可能有`pt1.a = 0.004`,`pt2.a = 0.01`和`pt3.a = 0.016`; 根据您的标准，`pt1.a == pt2.a`并且`pt2.a == pt3.a`，但是`pt1.a =\= pt3.a`。您的订购标准不满足先决条件`std::multiset`，您不能使用它。

# xcode - xcode 4.5 我的构建中没有错误，但模拟器中没有显示

> ID：14566491
> 
> 赞同：0
> 
> 时间：2013-01-28T16:24:59.357
> 
> 标签：xcode

xcode 非常新。我正在处理一个表格，当您点击它时，它将转到更详细的屏幕。我的构建中没有错误。模拟器加载正常，应用程序运行，但字段中没有任何内容。任何帮助，将不胜感激。如果有人需要，我会尽快编辑这个 zip 文件。

[http://www.mediafire.com/?vz98yyfd1c7hf89](http://www.mediafire.com/?vz98yyfd1c7hf89)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:31:08.937

您将不得不显示一些代码。有一百万个这样的例子，但最有可能的候选者是在您的 cellForRowAtIndexPath 中，您没有使用数据中的值填充控件。最简单的例子是：

1.  让数据成为一个简单的数组，例如状态列表，并在控制器的 init 方法中创建该数组并将值推入其中（或获取具有列表的东西，例如 UIColor 及其颜色列表）。
2.  然后进入 cellForRowAtIndexPath 并从对应行的数组中取出值。然后在那里有一个标签并将标签的文本设置为该值。
3.  您还必须提供委托方法 numberOfSections (1) 和 numberOfRowsInSection ([array count]) 的实现。

那应该这样做。

# django - 将 django-oauth-plus 与 Tastypie 一起使用

> ID：14566493
> 
> 赞同：1
> 
> 时间：2013-01-28T16:25:01.753
> 
> 标签：django, oauth, tastypie

我尝试在 django-oauth-plus 中使用 sweetpie。我关注 django-oauth-plus 的 wiki 页面：[http](http://code.larlet.fr/django-oauth-plus/wiki/Home) : //code.larlet.fr/django-oauth-plus/wiki/Home 并将 Tastepie 中的资源身份验证设置为 OAuthAuthentication。在“获取请求令牌”步骤中，我收到错误 400（无法验证 OAuth 请求。）

我检查了[https://github.com/amrox/django-api-example](https://github.com/amrox/django-api-example)以查看我没有忘记的任何内容，但这无济于事。

谁能帮我？我不知道如何调试它:(

谢谢！

**升级版：**

我尝试从一个网站获取访问权限并提供访问权限。可能有问题吗？

# git - 从 master 合并到分支 - Git/Jenkins

> ID：14566495
> 
> 赞同：0
> 
> 时间：2013-01-28T16:25:10.543
> 
> 标签：git, merge, jenkins

我正在寻找一种方法来自动化从主分支到一个或多个开发分支的合并。换句话说，我想在多个项目中每天将团队开发分支与 Master 同步。

我正在考虑为此使用 Jenkins，但没有太多经验。Jenkins 是否会提供此功能，可能是通过添加多个存储库 URL，然后在配置中指定“要合并到的分支”？我不太关心项目的构建而不是合并问题。詹金斯将如何应对失败的合并？

詹金斯将是理想的，但如果有另一种方法，我很想听听。

提前谢谢了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:15:21.767

我强烈建议让负责分支的开发人员这样做，因为：

*   如果没有冲突，这样的合并需要 10-30 秒
*   如果有冲突，知道如何解决的人就在那里
*   您的开发人员最清楚何时进行此合并

你为什么要首先自动化呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T22:21:26.073

我建议使用[Gerrit](http://code.google.com/p/gerrit/)将合并管理到一个公共和共享的工作流中。

Gerrit 可以配置为使用 Jenkins 来验证每个提议进行审查的变更集。

# asp.net - 未找到字段：Form1

> ID：14566509
> 
> 赞同：0
> 
> 时间：2013-01-28T16:25:52.007
> 
> 标签：asp.net, sharepoint, user-controls, asp.net-3.5

我正在尝试在 SharePoint 网站中使用自定义的 WebPart。我制作了一个 ASP.NET UserControl，并将该控件加载到 SharePoint WebPart 中。

然后我在 SharePoint 网站中创建一个页面，这就是我尝试添加我的 WebPart 的地方。

但是当我添加我的 WebPart 时，我收到以下错误：

> 找不到字段：“ReportViewer1.TestReport.Form1”

所以我检查了我的 ASP.NET 解决方案并搜索了`Form1`. 我的`Default.aspx`项目中有一个包含`<form ID="Form1">`标签。所以我删除了 .aspx 文件，因为我没有将它用于我的 UserControl。

我重新编译了我的项目，将 DLL 复制到了我的 SharePoint 服务器。做了一个`iisreset`，但是当我再次添加我的 WebPart 时它仍然向我显示相同的错误。尽管我的项目似乎没有任何`Form1`参考。在我的整个解决方案中进行搜索没有显示任何内容。

有人知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T07:35:22.697

尝试停用包含 Web 部件的功能。转到“图库”组下的“站点操作”->“站点设置”->“Web 部件”。在列表中找到您的 Web 部件（您应该会看到这个）并删除它。之后去重新激活你的功能。

应该管用。

希望能帮助到你，

安德鲁

# ruby-on-rails - 辅助方法来检查记录是否由 Rails 中的当前用户拥有

> ID：14566511
> 
> 赞同：2
> 
> 时间：2013-01-28T16:25:56.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, authentication, view-helpers

我正在构建一个 Rails 3 应用程序，我正在使用设计来管理身份验证逻辑，但我想知道是否有一个帮助方法来检查当前用户是否拥有一个具有关联“has_many”的对象（数据库中的记录） ”。

例子：

```
User

has_many :reports 
```

我有这种情况：

```
<%=  current_user.id == report.user.id ? "Personal Report" : report.user.username %> 
```

可以创建类似的东西：

```
<%= owned ? "yes" : "no" %> 
```

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T16:28:58.163

帮手：

```
def owned(report)
    current_user.id == report.user_id
end 
```

用法：

```
<%= owned(report) ? "yes" : "no" %> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T16:40:30.027

您可以在`Report`模型中定义此方法：

# 型号限制：

```
class Report < ActiveRecord::Base

  def owned_by?(user)
    self.user_id == (user.try(:id) || user)
  end 
```

然后像这样使用它：

```
<%= report.owned_by?(current_user) ? 'yes' : 'no' %> 
```

此`owned_by?(user)`方法接受用户对象和整数 (user_id)。

# 与用户关联的每个模型的通用方法：

辅助方法可以解决问题：

```
module OwnerHelper
  def is_owner?(object)
    return nil if(current_user.nil? || !object.respond_to(:user_id))
    current_user.try(:id) == object.try(:user_id)
  end
end 
```

`true`如果`current_user`是所有者，此助手将返回，如果不是，则返回 false，`nil`如果`current_user`是`nil`OR，则对象没有`user_id`属性。

# angularjs - 当子控制器删除项目时更新父控制器

> ID：14566513
> 
> 赞同：0
> 
> 时间：2013-01-28T16:26:15.523
> 
> 标签：angularjs

我有以下内容：

```
events: [ 
  { name: 'first', date: '2012-11-01' },
  { name: 'second', date: '2012-11-05' },      
  { name: 'second II', date: '2012-11-05' },
  { name: 'third', date: '2012-11-08' },
] 
```

我希望结果看起来像日历：

*   2012-11-01：第一个 [x]
*   2012-11-02
*   2012-11-03
*   2012-11-04
*   2012-11-05：第二[x]，第二[x]
*   2012-11-06
*   2012-11-07
*   2012-11-08：第三[x]

我的事件控制器中有一个范围函数，它将创建一个日期在事件的最小日期和最大日期之间的数组。每个日期还将包含当天的事件数组。

```
days [ { 
         date: '2012-11-01', 
         events: [ { name: 'second', date: '2012-11-05' } ], 
       },

       {
         date: '2012-11-01', 
         events: [], 
       }, ... ]; 
```

为了渲染它，我循环播放这些日子，然后循环播放这些事件。我遇到的问题是列表中有一个删除按钮 [x]。在 EventController 上调用的 remove 方法将从包含事件的主数组中删除元素。

所以现在我的问题是父控制器 EventsController 在不直接渲染事件数组时如何更新视图？

是否可以使用过滤器来创建带有事件的日历，这是否可以解决子控制器删除元素时视图不更新的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:44:34.373

您可以将 ID 用于事件。

这是使用数组索引作为 ID 的简单示例。

html:

```
事件：{{ 事件 | json}}
```

```
日历：{{日历| json}}
```

js：

```
app.controller('MainCtrl', function( $scope ) {
  $scope.events =  [ 
    { name: 'first', date: '2012-11-01' },
    { name: 'second', date: '2012-11-05' },      
    { name: 'second II', date: '2012-11-05' },
    { name: 'third', date: '2012-11-08' }
  ];

  $scope.calendar = [
    { date: '2012-11-01' },
    { date: '2012-11-02' },
    { date: '2012-11-03' },
    { date: '2012-11-04' },
    { date: '2012-11-05' },
    { date: '2012-11-06' },
    { date: '2012-11-07' },
    { date: '2012-11-08' }
  ];
  $scope.$watch('events', function(events) {
    for (var j = 0; j < $scope.calendar.length; j++) {
      $scope.calendar[j].events = [];
      for (var i = 0; i < events.length; i++) {
        if ($scope.calendar[j].date == events[i].date) {
          $scope.calendar[j].events.push( {index: i, name: events[i].name} );
        }
      }
    }
  }, true);

  $scope.removeEvent = function(index) {
    delete $scope.events[index];
    $scope.events.splice(index, 1);
  };
}); 
```

# heroku - 独角兽在 Heroku 上进入重启循环

> ID：14566515
> 
> 赞同：2
> 
> 时间：2013-01-28T16:26:18.783
> 
> 标签：heroku, ruby-on-rails-3.2, unicorn

我有一个使用 Unicorn (4.5.0) 和以下 unicorn.rb 文件部署到 Heroku Celadon cedar 堆栈的 rails 应用程序：

```
worker_processes 2 # amount of unicorn workers to spin up
timeout 30         # restarts workers that hang for 30 seconds
check_client_connection true 
```

在看似随机的时间，它使用的服务（包括数据库）没有任何明显变化，独角兽将进入重启循环。他们将继续重新启动，并出现以下典型错误：

```
ERROR -- : worker=0 PID:935 timeout (31s > 30s), killing 
```

问题是每个独角兽工人每 30 秒重新启动一次的频率更高。当底层测功机重新启动时它会停止，所以我猜它与独角兽主进程和heroku交互的方式有关。

还有其他人遇到这种情况或对可能的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T20:16:06.743

您不应使用该`check_client_connection true`选项。

根据 Heroku Unicorn[文档](https://devcenter.heroku.com/articles/rails-unicorn)，您应该使用如下配置文件：

```
# config/unicorn.rb
worker_processes 3
timeout 15
preload_app true

before_fork do |server, worker|

  Signal.trap 'TERM' do
    puts 'Unicorn master intercepting TERM and sending myself QUIT instead'
    Process.kill 'QUIT', Process.pid
  end

  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.connection.disconnect!
end  

after_fork do |server, worker|

  Signal.trap 'TERM' do
    puts 'Unicorn worker intercepting TERM and doing nothing. Wait for master to send QUIT'
  end

  defined?(ActiveRecord::Base) and
    ActiveRecord::Base.establish_connection
end 
```

# objective-c - UINavigationBar drawRect Alternative (aka, Need CoreGraphics call in a category)

> ID：14566517
> 
> 赞同：0
> 
> 时间：2013-01-28T16:26:24.733
> 
> 标签：objective-c, uikit, core-graphics, drawrect

我最近发现在 > iOS5 UINavigationBar 中没有调用它的 drawRect。我想弄清楚如何在一个类别中使用 Core Graphics 进行绘制。

我试图实现的最终目标是从我的应用程序中消除图像并在运行时绘制所有内容。我也在尝试使这个库自动化，这样用户就不必考虑使用我的自定义类。

有没有办法在运行时用你自己的类替换一个类？像：`replaceClass([UINavigationBar class], [MyCustomBar class]);`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:30:51.990

> 有没有办法在运行时用你自己的类替换一个类？

在 Objective-C 中，这被称为[类构成](http://cocoadev.com/wiki/ClassPosing)。

类冒充基于使用`NSObject`'`poseClass`方法，现在已弃用（在 64 位平台上，包括 iPhone）。

已经研究了替代方法；[你可以在这里](http://lapcatsoftware.com/blog/2007/11/25/working-without-a-nib-part-6-working-without-a-xib/)读到一个，但它们似乎不太符合要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:14:08.570

我找到了解决方案，我没有弄乱绘制矩形，而是做了一些绘制到 UIImage 的方法，然后将图像设置为我正在自定义的元素的背景视图。它让我的自定义 UI 再次变得神奇。

# rest - 如何在 Amazon cloudsearch 中检索所有可搜索（未删除）的文档

> ID：14566522
> 
> 赞同：7
> 
> 时间：2013-01-28T16:27:04.387
> 
> 标签：rest, web, amazon-cloudsearch

我想从 cloudsearch 中检索所有可搜索的文档

我试图做一个这样的否定搜索：

```
search-[mySearchEndPoint].cloudsearch.amazonaws.com/2011-02-01/search?bq=(not keywords: '!!!testtest!!!') 
```

它可以工作，但它也会返回所有已删除的文档。

那么我怎样才能只获取所有**活动**文档呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-11T02:01:01.803

要知道的关键是 CloudSearch 并没有真正删除。相反，“删除”函数会在索引中保留 ID，但会清除那些已删除文档中的所有字段，包括将 uint 字段设置为 0。这适用于正查询，它将不匹配已清除的“已删除”文档中的任何文本。

一种解决方法是在您的文档中添加一个 uint 字段，在下面称为“更新”，用作可能返回已删除 ID 的查询的过滤器，例如否定查询。

（下面的示例使用[CloudSearch 的 Boto 接口库，](http://docs.pythonboto.org/en/latest/cloudsearch_tut.html)为简洁起见省略了许多步骤。）

添加文档时，将字段设置为当前时间戳

```
doc['updated'] = now_utc  # unix time in seconds; useful for 'version' also.
doc_service.add(id, now_utc, doc)
conn.commit() 
```

当您删除时，CloudSearch 会将 uint 字段设置为 0：

```
doc_service.delete(id, now_utc)
conn.commit()
# CloudSearch sets doc's 'updated' field = 0 
```

现在，您可以在否定查询中区分已删除文档和活动文档。下面的示例正在搜索包含 86 个文档的测试索引，其中大约一半被删除。

```
# negative query that shows both active and deleted IDs
neg_query = "title:'-foobar'"
results = search_service.search(bq=neg_query)
results.hits  # 86 docs in a test index

# deleted items
deleted_query = "updated:0"
results = search_service.search(bq=deleted_query)
results.hits  # 46 of them have been deleted

# negative, filtered query that lists only active
filtered_query = "(and updated:1.. title:'-foobar')"
results = search_service.search(bq=filtered_query)
results.hits  # 40 active docs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T13:38:08.020

我认为你可以这样做：

```
search-[mySearchEndPoint].cloudsearch.amazonaws.com/2011-02-01/search?bq=-impossibleTermToSearch 
```

注意术语开头的“-”

# mysql - 尝试使我的 mysql ndb 集群基于磁盘时出错

> ID：14566526
> 
> 赞同：0
> 
> 时间：2013-01-28T16:27:12.613
> 
> 标签：mysql

在尝试使我的集群基于磁盘时，我发出以下命令：

```
CREATE LOGFILE GROUP LG1 ADD UNDOFILE 'undo1.log' 
INITIAL_SIZE = 150M UNDO_BUFFER_SIZE = 164M ENGINE NDBCLUSTER; 
```

并得到这个错误：

```
ERROR 1064 (42000): You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version 
for the right syntax to use near '150M UNDO_BUFFER_SIZE = 164M 
ENGINE NDBCLUSTER' at line 1 
```

这是从文档手册中完全复制的，所以我做错了什么？

谢谢。

（集群在内存中工作，但我需要磁盘空间）。

使用`mysql-5.5.29 ndb-7.2.10`

编辑：[链接到文档手册](https://blogs.oracle.com/LinuxJedi/entry/mysql_cluster_disk_data_tables)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:18:00.737

显然，此命令不会在值之后转换 M 或 G，因此您必须输入 2097152 (1024 * 1024 * 2) 而不是 2M。

所以命令应该是

```
CREATE LOGFILE GROUP LG1 ADD UNDOFILE 'undo1.log' 
INITIAL_SIZE = 157286400 UNDO_BUFFER_SIZE = 171966464 ENGINE NDBCLUSTER; 
```

# jquery - jQuery滑块if语句翻转图像

> ID：14566527
> 
> 赞同：0
> 
> 时间：2013-01-28T16:27:19.237
> 
> 标签：jquery, click, slider, rollover

所以我有一个为 WP 驱动的站点运行的滑块插件，不幸的是，通过该插件，您无法使用图像设置翻转/活动状态。我已经尝试实现这一目标，但无法弄清楚 if 语句的其余部分，因此当您单击第一个按钮时，它会显示凹进的图像，然后单击下一个按钮，第一个按钮会返回常规状态，第二个进入凹陷图像。到目前为止，这是我的代码：

```
jQuery(window).load(function() {
jQuery('.thumb1 img, .thumb2 img, .thumb3 img').click(function () {
    var $clicked = jQuery(this);
    jQuery('.thumb1 img, .thumb2 img, .thumb3 img').each(function(){
        var $this = jQuery(this);
        if ($clicked.get(0) === $this.get(0))
            $this.attr('src','/wp-content/uploads/2013/01/new_slide_1_btn_hover.jpg');
        else
            $this.attr('src','/wp-content/uploads/2013/01/new_slide_1_btn.jpg');
    });
}); }); 
```

现在点击后的每张图片都变成了第一次对接使用的图片，这是不正确的。有 3 个按钮可以点击，每个都是独一无二的，并且有自己独特的翻转图像。每个按钮都有一类 thumb1、thumb2 和 thumb3.. 任何帮助都会很棒，我不是一个 javascript 人，但试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:46:04.920

我会使用一个名为`selectable`或任何你想调用它的类。

```
<img class="selectable" src="/wp-content/uploads/2013/01/new_slide_1_btn.jpg"/> 
```

和这个jQuery：

```
$(function(){
    $(".selectable").click(function(){
        //make all the default button
        $(".selectable").each(function(){ 
            $(this).attr("src","/wp-content/uploads/2013/01/new_slide_1_btn.jpg");
        });
        //make the just clicked image the hover button
        $(this).attr("src","/wp-content/uploads/2013/01/new_slide_1_btn_hover.jpg");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:53:15.310

更新**Michael_B**答案：

```
$(function(){
    $(".selectable").click(function(){
        //make all the default button
        $(".selectable").each(function(){ 
            $(this).attr("src", $(this)[0].src.replace(/_hover(\..*)/, '$1'));
        });
        //make the just clicked image the hover button
        $(this).attr("src",$this[0].src.replace(/(\..*)$/, '_hover$1'));
    });
}); 
```

# javascript - JavaScript 表格改变颜色

> ID：14566529
> 
> 赞同：0
> 
> 时间：2013-01-28T16:27:34.640
> 
> 标签：javascript, css, html

我正在尝试让白色桌子也改变，我让它的一排变成棕色，但另一排是白色的，请帮忙谢谢。当我加载页面时，我希望另一行也改变颜色。

这就是我所拥有的

标记：

```
<div id="wrapper">
        <div id="masthead">
            <h1>Zebra Striping Applied to Tables</h1>
            <h2>Odd and Even Rows have alternate background and foreground colours.</h2>
        </div>
        <div id="main">
            <table class="zebra">
                <thead>
                    <tr>
                        <th>&nbsp;</th>
                        <th>Monday</th>
                        <th>Tuesday</th>
                        <th>Wednesday</th>
                        <th>Thursday</th>
                        <th>Friday</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>8am</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                        <td>Particle Physics</td>
                        <td>Economics for Field Mice</td>
                        <td>Cooking with Black Holes</td>
                    </tr>
                    <tr>
                        <td>9am</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                        <td>Particle Physics</td>
                        <td>Economics for Field Mice</td>
                        <td>Cooking with Black Holes</td>
                    </tr>
                    <tr>
                        <td>10am</td>
                        <td>Cooking with Black Holes</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                        <td>Particle Physics</td>
                        <td>Economics for Field Mice</td>
                    </tr>
                    <tr>
                        <td>11am</td>
                        <td>Cooking with Black Holes</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                        <td>Particle Physics</td>
                        <td>Economics for Field Mice</td>
                    </tr>
                    <tr>
                        <td>12pm</td>
                        <td>Lunch</td>
                        <td>Lunch</td>
                        <td>Lunch</td>
                        <td>Lunch</td>
                        <td>Lunch</td>
                    </tr>
                    <tr>
                        <td>1pm</td>
                        <td>Economics for Field Mice</td>
                        <td>Cooking with Black Holes</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                        <td>Particle Physics</td>
                    </tr>
                    <tr>
                        <td>2pm</td>
                        <td>Economics for Field Mice</td>
                        <td>Cooking with Black Holes</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                        <td>Particle Physics</td>
                    </tr>
                    <tr>
                        <td>3pm</td>
                        <td>Particle Physics</td>
                        <td>Economics for Field Mice</td>
                        <td>Cooking with Black Holes</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                    </tr>
                    <tr>
                        <td>4pm</td>
                        <td>Particle Physics</td>
                        <td>Economics for Field Mice</td>
                        <td>Cooking with Black Holes</td>
                        <td>Basket Weaving</td>
                        <td>Dragon Anatomy</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div> 
```

CSS：

```
@charset "utf-8";
/* CSS Document */

/*  main.css  */

/***************************************
                    DEFAULTS
***************************************/
.new_class {
background-color: #432;
}

*{
    padding:0;
    margin:0;
}
html, body{
    background:#996;
}
body{
    font-size: 62.5%;   
}
h1{
    font-size: 3.2em;
    padding: 20px;
}
h2{
    font-size: 2.0em;
    color:#666;
    padding:10px 20px;
}
p{
    font-size: 1.6em;
    color:#333; 
    padding: 8px 20px;
}
code{
    font-size: 1.6em;
    color:#903; 
}

/***************************************
                    LAYOUT
***************************************/
#wrapper{
    width:960px;
    margin:10px auto;
    border:1px solid #333;
    background:#fff;    
}
#masthead{
    min-height: 120px;
    border-bottom:8px solid #666;
    color:#903;
}
#main{

}
#footer{
    background:#ddd;    
}

/***************************************
                    TABLES
***************************************/
table{
    width:710px;
    margin:10px auto;
}
thead tr th:first-child{
    background:#fff;
    width: 40px;
}
th{
    padding: 3px 6px;
    margin: 0 2px;
    font:bold 1.6em/1.2 "Palatino Linotype", "Book Antiqua", Palatino, serif;
    background: #666;
    color: #fff;
    width: 90px;
    -moz-border-radius-topright: 6px;
    -moz-border-radius-topleft: 6px;    
    -webkit-border-radius-topright: 6px;
    -webkit-border-radius-topleft: 6px; 
    border-radius-topright: 6px;
    border-radius-topleft: 6px; 
}
tbody tr td:first-child{
    -moz-border-radius-bottomleft: 6px;
    -moz-border-radius-topleft: 6px;    
    -webkit-border-radius-bottomleft: 6px;
    -webkit-border-radius-topleft: 6px; 
    border-radius-bottomleft: 6px;
    border-radius-topleft: 6px; 
    text-align:right;
    background:#CCC;
    width: 40px;
}
td{
    padding:3px 8px;
    margin:0;
    font:normal 1.6em/1.2 "Palatino Linotype", "Book Antiqua", Palatino, serif;
    border:1px solid #666;
    min-height: 40px;
}
/***************************************
                    SPECIAL
***************************************/ 
```

Javascript：

```
window.onload = changetb;

    function changetb()
    {

        var table = document.getElementsByTagName('table')[0];

        var trs = table.getElementsByTagName('tr');

        for (var i = 0; i<trs.length; i++) 
        {
            if (i % 2)
                trs[i].className += 'new_class';
        } 
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:35:58.253

您可以在没有 javascript 的情况下执行此操作，只需添加以下 css 代码：

```
tr:nth-child(even) {background: #432} 
```

例如，参见[小提琴。](http://jsfiddle.net/EFfGK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:31:02.107

所以你有这个：

```
for (var i = 0; i<trs.length; i++) {
    if (i % 2)
        trs[i].className += 'new_class';
} 
```

只需添加一个`else`子句：

```
for (var i = 0; i<trs.length; i++) {
    if (i % 2)
        trs[i].className += 'new_class';
    else
        trs[i].className += 'some_other_class';
} 
```

或者更好的是，只需将您的所有行的颜色设置`css`为一种颜色，然后您只需要每隔一行更改一次。

或者更好的是，只需使用纯 CSS 即可：

[http://www.w3.org/Style/Examples/007/evenodd](http://www.w3.org/Style/Examples/007/evenodd)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:44:20.910

我不完全理解你的疑问，但我想这就是你想要做的......

```
for(i = 0; i < rows.length; i++){         
  //manipulate rows 
  if(i % 2 == 0){ 
    rows[i].className = "new_class_1"; 
  }else{ 
    rows[i].className = "new_class_2"; 
  }
} 
```

然后你可以让 css 为你的行选择其他颜色

# google-chrome - 如何在 Chrome 中使用重绘矩形和 FPS？

> ID：14566530
> 
> 赞同：1
> 
> 时间：2013-01-28T16:27:37.087
> 
> 标签：google-chrome

我知道重绘矩形与被重绘的页面的一部分有关。但是为什么有时在重绘结束后它会保持红色？

FPS 栏右上角的数字是什么意思？

![在此处输入图像描述](../Images/938ac3aa3214d70a95a5a9ea39ce158b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T13:24:26.480

As I understand it, the numbers in the top-right corner "5-63" are min and max framerate in the timespan the histogram shows.

Have a look into Addy Osmani's blog post on [improving performance with chrome dev-tools and timeline](http://addyosmani.com/blog/performance-optimisation-with-timeline-profiles/)

# python - Python py2exe 窗口显示（tkinter）

> ID：14566531
> 
> 赞同：5
> 
> 时间：2013-01-28T16:27:43.197
> 
> 标签：python, tkinter, py2exe

我正在尝试通过py2exe制作一个exe。该程序正在使用 Tkinter 显示一个类似弹出的窗口。问题是，当我像这样运行设置时一切正常：

```
setup(windows = [{'script': "msg.py"}], zipfile = None) 
```

但是当我尝试制作一个单一文件的exe时它失败了：

```
setup(windows = [{'script': "msg.py"}], zipfile = None, options = {'py2exe': {'bundle_files': 1, 'compressed': True}}) 
```

实际上最终的 exe 运行没有问题，但它不显示任何窗口。我已经读过在 Windows 7 上 bundle_files=1 可能存在问题，但我也尝试过 bundle_files=2 具有相同的效果。这是我的 msg.py 脚本：

```
from win32gui import FindWindow, SetForegroundWindow
from Image import open as iopen
from ImageTk import PhotoImage
from Tkinter import Tk, Label
from threading import Timer
from subprocess import Popen
import os

def Thread(t, fun, arg=None):
    if arg<>None: x = Timer(t, fun, arg)
    else: x = Timer(t, fun)
    x.daemon = True
    x.start()

def NewMessage():
    global root
    if not os.path.exists('dane/MSG'):
        open('dane/MSG', 'w').write('')
        root = Tk()
        img = PhotoImage(iopen("incl/nowa.png"))
        label = Label(root, image=img)
        label.image = img
        label.bind("<Button-1>", Click)
        label.pack()
        root.geometry('-0-40')
        root.wm_attributes("-topmost", 1)
        root.overrideredirect(1)
        root.mainloop()

def Click(event):
    global root, exit
    root.destroy()
    os.remove('dane/MSG')
    OpenApp()
    exit = True

def OpenApp():
    hwnd = FindWindow(None, 'My program name')
    if hwnd: SetForegroundWindow(hwnd)
    else: Popen('app.exe')

root, exit = None, False
NewMessage() 
```

有任何想法吗？我读过 Tkinter 存在一些问题，但有一些关于编译的问题。我的脚本已编译，它不会抛出任何异常，但不显示窗口......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T16:34:26.797

我最终遇到了同样的问题，我的解决方案涉及执行以下操作：

添加 `"dll_excludes": ["tcl85.dll", "tk85.dll"],`

在你的`options = {...}`

然后手动复制这两个 DLL

`PYTHON_PATH\DLLs\`（在我的情况下`C:\Python27\DLLs`）

到您的exe的位置并尝试运行它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-01T16:20:33.483

dll_excludes 和手动复制的替代方法是修补 py2exe 以知道这些文件必须直接放在 dist 目录中。

在 build_exe.py 中，有一个名为 的类`py2exe`，其中包含`dlls_in_exedir`必须去那里的 dll 列表。该列表是在名为 的函数期间设置的`plat_prepare`，您可以将 tclXX.dll 和 tkXX.dll 文件添加到其中以确保它们被正确复制。

当然，除非你是唯一会构建它的人，否则你不一定知道需要捆绑哪个 Tcl 和 Tk 版本——有人可能自己构建了他们的 Python，或者正在使用带有较旧 DLL 的较旧 Python。因此，您需要检查系统实际​​使用的版本。py2exe 实际上已经在不同的地方做到了这一点：通过导入内部`_tkinter`模块（实际的 Tk 接口，通常是 DLL）并访问`TK_VERSION`and `TCL_VERSION`，然后您可以使用它来生成和添加正确的文件名。

如果其他人应该构建您的应用程序，您可能不想让他们修改他们的 py2exe 安装，因此您可以从 setup.py 中对其进行猴子补丁：

```
import py2exe
py2exe.build_exe.py2exe.old_prepare = py2exe.build_exe.py2exe.plat_prepare
def new_prep(self):
  self.old_prepare()
  from _tkinter import TK_VERSION, TCL_VERSION
  self.dlls_in_exedir.append('tcl{0}.dll'.format(TCL_VERSION.replace('.','')))
  self.dlls_in_exedir.append('tk{0}.dll'.format(TK_VERSION.replace('.','')))
py2exe.build_exe.py2exe.plat_prepare = new_prep 
```

这甚至适用`bundle_files=1`于 Windows 7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T20:10:24.733

如果您只有一个版本，您可以通过 data_file 复制文件。下面是一个完整的例子：

*   操作系统
*   Python2.7.6
*   TK8.5
*   tcl8.5
*   tix8.4.3
*   py2exe 0.6.9

foo.py：

```
# -*- coding: iso-8859-1 -*-
import Tkinter
"""
sets TCL_LIBRARY, TIX_LIBRARY and TK_LIBRARY - see installation Lib\lib-tk\FixTk.py
"""
Tkinter._test() 
```

安装程序.py：

```
# -*- coding: iso-8859-1 -*-
from distutils.core import setup
import py2exe
import sys
import os
import os.path
sys.argv.append ('py2exe')
setup (
    options    = 
        {'py2exe': 
            { "bundle_files" : 1    # 3 = don't bundle (default) 
                                     # 2 = bundle everything but the Python interpreter 
                                     # 1 = bundle everything, including the Python interpreter
            , "compressed"   : False  # (boolean) create a compressed zipfile
            , "unbuffered"   : False  # if true, use unbuffered binary stdout and stderr
            , "includes"     : 
                [ "Tkinter", "Tkconstants"

                ]
            , "excludes"      : ["tcl", ]
            , "optimize"     : 0  #-O
            , "packages"     : 
                [ 
                ]
            , "dist_dir"     : "foo"
            , "dll_excludes": ["tcl85.dll", "tk85.dll"]
            ,               
            }
        }
    , windows    = 
        ["foo.py"
        ]
    , zipfile    = None
    # the syntax for data files is a list of tuples with (dest_dir, [sourcefiles])
    # if only [sourcefiles] then they are copied to dist_dir 
    , data_files = [   os.path.join (sys.prefix, "DLLs", f) 
                   for f in os.listdir (os.path.join (sys.prefix, "DLLs")) 
                   if  (   f.lower ().startswith (("tcl", "tk")) 
                       and f.lower ().endswith ((".dll", ))
                       )
                    ] 

    , 
) 
```

# java - 在应用程序中设置 Java 的 GC 选项

> ID：14566532
> 
> 赞同：2
> 
> 时间：2013-01-28T16:27:51.327
> 
> 标签：java, garbage-collection

Java GC 选项，例如*MaxGCPauseMillis*（用于 G1 垃圾收集器）可以从 Java 应用程序内部设置，还是必须在用于启动应用程序的命令行上设置？

即我可以在代码中执行以下任何部分：

```
java -XX:+UseG1GC -XX:MaxGCPauseMillis=10 -XX:GCPauseIntervalMillis=100 -jar app.jar 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T19:35:43.337

No, **this is not possible**. You cannot change the GC options of an already started VM.

Plus, I do not think that this is a good idea. **GC options should be independent from the source-code** because

*   for the same application, **you may need different GC options** depending on VM-used, hardware used, etc.
*   GC options are properties totally **orthogonal** to the functional needs of your application.

Modern applications (e.g. Eclipse) usually **use a property file** where you can specify the VM options, including GC tuning options, I think that this is a clean solution.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T10:08:35.973

**使用 JDK 中的jinfo -flag**命令修改某些（但很少）-XX 选项云以运行 java 进程。

您可以使用 -XX:+PrintFlagsFinal 选项查看所有 JVM XX 选项的列表，具有 {managable} 类型云的选项在运行时由**jinfo修改。**

但这可能是个坏主意。如果您关心应用程序中的 GC 行为，则必须了解 GC。没有神奇的 XX 选项，也没有其他捷径……不幸的是。

# android - Android - 如何从字符串中解析 JsonArray？

> ID：14566533
> 
> 赞同：9
> 
> 时间：2013-01-28T16:27:59.623
> 
> 标签：android, json

我正在尝试从 json 字符串解析一个 json 数组，但它总是抛出异常`data of type java.lang.String cannot be converted to JSONArray`。

如果我犯了任何错误，请告诉我。

谢谢。

这是我从服务器获取 Json 的代码：

```
try {
                String url = String.format(<url here>, province.provinceCode2);
                HttpClient httpClient = getHttpClient();
                HttpGet httpGet = new HttpGet(url);
                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity entity = httpResponse.getEntity();
                final String result = EntityUtils.toString(entity);
                parseAndSaveJsonData(province, result);
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

这是解析 JsonArray 的代码：

```
String jsonString = <below json string>
JSONArray ja = new JSONArray(jsonString); 
```

这是我的json字符串：

```
 [
   {
      "LotPrizes":[
         {
            "Prize":"Giảitám",
            "Range":"50"
         },
         {
            "Prize":"Giảibảy",
            "Range":"264"
         },
         {
            "Prize":"Giảisáu",
            "Range":"3654-5162-3097"
         },
         {
            "Prize":"Giảinăm",
            "Range":"9739"
         },
         {
            "Prize":"Giảitư",
            "Range":"97690-99274-32442-69432-04855-10132-17085"
         },
         {
            "Prize":"Giảiba",
            "Range":"73745-13007"
         },
         {
            "Prize":"Giảinhì",
            "Range":"05521"
         },
         {
            "Prize":"Giảinhất",
            "Range":"74870"
         },
         {
            "Prize":"GiảiDB6",
            "Range":"878833"
         }
      ]
      },
 {
      "LotPrizes":[
         {
            "Prize":"Giảitám",
            "Range":"50"
         },
         {
            "Prize":"Giảibảy",
            "Range":"264"
         },
         {
            "Prize":"Giảisáu",
            "Range":"3654-5162-3097"
         },
         {
            "Prize":"Giảinăm",
            "Range":"9739"
         },
         {
            "Prize":"Giảitư",
            "Range":"97690-99274-32442-69432-04855-10132-17085"
         },
         {
            "Prize":"Giảiba",
            "Range":"73745-13007"
         },
         {
            "Prize":"Giảinhì",
            "Range":"05521"
         },
         {
            "Prize":"Giảinhất",
            "Range":"74870"
         },
         {
            "Prize":"GiảiDB6",
            "Range":"878833"
         }
      ]
      }

    ] 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T16:33:12.890

这是初始化 JSON 解析器的方法：

```
JSONObject jsonObject = new JSONObject(jsonString); 
```

这将为您提供整个字符串作为 Json 对象。从那里，拉出一个单独的数组作为 JsonArray，如下所示：

```
JSONArray jsonArray = jsonObject.getJSONArray("LotPrizes"); 
```

要访问每个“LotPrizes”，您可以使用 for 循环逻辑：

```
for(int i=0;i<jsonArray.length();i++)
{
  JSONObject curr = jsonArray.getJSONObject(i);

  prize = curr.getString("Prize")

//Do stuff with the Prize String here
//Add it to a list, print it out, etc.
} 
```

编辑：您的 JSON 编辑后的最终代码：

```
JSONArray jsonArray = null;
String jsonString = <your string>
String currPrize = null;

JSONObject jsonObject = new JSONObject(jsonString);

jsonArray = jsonObject.getJSONArray("data");

for(int i=0;i<jsonArray.length();i++)
{
    JSONArray currLot = jsonArray.getJSONObject(i);

    for(int j=0; j<currLot.length();j++)
    {
        JSONobject curr = currLot.getJSONObject(j);

        currPrize = curr.getString("Prize");

        //Do something with Prize
    }
} 
```

这段代码是有效的，我在我的代码中使用了几乎相同的版本。希望这（最终）对你有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:21:14.233

*嗨@Caerulius、Harish、ρяσѕρєя K、Hot Licks 等等。最后，经过 2 天的头痛和 2 个不眠之夜，我解决了这个问题。而且因为你花了你宝贵的时间和我讨论，我知道我必须告诉你根本原因。那是我的责任。*

首先，我是一名资深的安卓开发者。所以，我至少了解 JSON 基础知识，我知道如何从 JSON 字符串解析数据，并且我知道许多有用的在线工具来验证它。我确认我从服务器获得的 JSON 字符串是有效的。

正如我在问题中所说，我曾经`final String result = EntityUtils.toString(entity);`从`HttpEntity`对象中获取 JSON 字符串。我过去曾多次使用过它，而且效果很好。没问题。但是，在这种情况下，它不是。像这样的原始 JSON 字符串：

```
 [{
      "LotPrizes":[
         {
            "Prize":"Giảitám",
            "Range":"50"
         },
         {
            "Prize":"Giảibảy",
            "Range":"264"
         },
         ...
    }] 
```

但我得到的是这样的：

```
"[{
      \"LotPrizes\":[
         {
            \"Prize":\"Giảitám\",
            \"Range\":\"50\"
         },
         {
            \"Prize\":\"Giảibảy\",
            \"Range\":\"264\"
         },
         ...
    }]" 
```

这个字符串类似于我们可以声明如下的常量字符串：

```
String stringVariable = "\"[{
          \\\"LotPrizes\\\":[
             {
                \\\"Prize":\\\"Giảitám\\\",
                \\\"Range\\\":\\\"50\\\"
             },
             {
                \\\"Prize\\\":\\\"Giảibảy\\\",
                \\\"Range\\\":\\\"264\\\"
             },
             ...
        }]\" ; 
```

这是一个有效的字符串，但不是一个有效的 JSON 字符串。

为了解决这个问题，我改变了获取 JSON 字符串的方式，并删除了不需要的字符，如下所示：

```
 HttpClient httpClient = getHttpClient();
                HttpGet httpGet = new HttpGet(url);
                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity entity = httpResponse.getEntity();
                InputStream is = entity.getContent();
                BufferedReader reader = new BufferedReader(new InputStreamReader(is, "UTF-8"), 8);
                StringBuilder sb = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                String json = sb.toString();

                json = json.replace("\\", "");
                json = json.substring(1);
                json = json.substring(0, json.length() - 2); 
```

现在，该`json`变量包含我可以正确解析的 JSON 字符串。我认为这应该是 HttpEntity 库的错误。

希望这可以帮助其他一些人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T12:09:53.917

您可以按如下方式从字符串中检索 jsondata ..

```
 JSONObject json = new JSONObject(jsonString);
            JSONArray jData = json.getJSONArray("data");
            for (int i = 0; i < jData.length(); i++) {
                JSONObject jo = jData.getJSONObject(i);

                JSONArray jLotPrizes = jo.getJSONArray("LotPrizes");
                for (int j = 0; j < jLotPrizes.length(); j++) {
                    JSONObject jobj = jLotPrizes.getJSONObject(j);

                    Log.i("Prize", "" + jobj.getString("Prize"));
                    Log.i("Range", "" + jobj.getString("Range"));
                }

            } 
```

# c# - 例外：我怎样才能获得尽可能多的信息？

> ID：14566535
> 
> 赞同：4
> 
> 时间：2013-01-28T16:28:15.973
> 
> 标签：c#, .net, exception, logging, reflection

我有一个企业应用程序，可以在发生异常信息时记录异常信息。该应用程序是 C# 和 C++.net 的组合。

我想在异常发生时获得*尽可能多的信息。*截至目前，我们只打印出消息和堆栈跟踪（在调试版本中提供行号，但不提供发布）。

任何错误日志的目标都是尽其所能（尽可能接近）指出错误。我很好奇我怎么能走得更远？我想要更多信息。

例如，我知道 NullReferenceExceptions 和 InvalidArguementExceptions 包含不同数量的信息，但除了“消息”字段之外，我没有使用任何东西。

我最好的选择是使用反射并捕获所有公共成员并将它们打印出来吗？或者也许链接大量的类型检查和强制转换以干净地打印出来？作为一个约束，我的日志记录函数只需要接受一个异常类型的参数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T16:43:42.707

一般来说，答案是记录 ex.ToString()。通常，对象的 ToString 方法会显示对象希望您知道的内容。对于基 Exception 类，除了任何 InnerException 实例之外，还包括消息和堆栈跟踪。Exception 的特定派生类可能会显示更多信息。

像 SqlException 这样的一些异常也会捕获附加信息（如存储过程名称和行号）。在这些情况下，将整个异常序列化并将其作为 XML 保存在日志数据库中会很有帮助。请注意，并非所有异常类都可以序列化，因此请准备好在 XML 部分上踢。

此外，如果您所做的只是记录异常，那么您可能需要重新抛出异常，以便更高级别有机会处理它。当然，当您已经处于“顶级”时，这并不适用。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T16:33:24.613

试试这个：

```
try 
{
    //...
}
catch(Exception ex)
{
    Messagebox.Show(ex.ToString());
} 
```

它显示了很多信息，包括所有异常的**异常类型**、**消息**和**堆栈跟踪**（`InnerException`所有异常排序）。

[MSDN](https://msdn.microsoft.com/en-us/library/system.exception.tostring(v=vs.110).aspx?cs-save-lang=1&cs-lang=vb)中的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-08T16:11:40.777

```
 private static string ErrorManager(Exception ex, bool ShowPopUp, bool CrashProgram)
    {
        string stack = ex.StackTrace;
        string source = ex.Source;
        string message = ex.Message;
        string LF = Environment.NewLine;

        string Error = $"A crash happen at {DateTime.Now.ToString("yyyy-MM-dd HH-mm-ss.ff", CultureInfo.InvariantCulture)}{LF}" +
                       $"This is what crashed: {source}{LF}" +
                       $"This is the error message : {LF}{message}{LF + LF}" +
                       $"These are the last instructions executed before the crash : {LF}{stack}{LF + LF}";

        if (ex.InnerException != null)
        {
            Error += $"Inner Exception : {LF}{ex.InnerException.Message}";
        }

        if (ShowPopUp)
        {
            MessageBox.Show(Error, "Error", MessageBoxButton.OK, MessageBoxImage.Error);
        }

        if (CrashProgram)
        {
            throw new Exception(Error);
        }
        return Error.Trim();
    } 
```

# typescript - Typescript 0.8.2 项目编译错误

> ID：14566536
> 
> 赞同：1
> 
> 时间：2013-01-28T16:28:24.140
> 
> 标签：typescript

我为 Visual Studio 2012 安装了 Typescript 0.8.2 插件。

我从头开始重新创建了我的项目，但现在出现了这个编译错误。

“tsc --comments --sourcemap --target ES3”以代码 1 退出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:41:09.913

`tsc`在您的项目文件中，通常会指定完整路径。路径可能不正确。

您可以使用这些步骤进行检查。

1.  右键单击项目并选择“卸载”
2.  右键单击卸载的项目并选择“编辑”
3.  查找以下代码（可能与此略有不同）：

项目文件：

```
 <Target Name="BeforeBuild">
    <Exec Command="&quot;$(PROGRAMFILES)\Microsoft SDKs\TypeScript\0.8.2.0\tsc&quot; --comments --sourcemap --target ES3 @(TypeScriptCompile ->'&quot;%(fullpath)&quot;', ' ')" IgnoreExitCode="true" />
  </Target> 
```

以前的`tsc`路径是：

```
$(PROGRAMFILES)\Microsoft SDKs\TypeScript\?.?.?.?\tsc 
```

但我注意到在最新版本中它是：

```
$(PROGRAMFILES)\Microsoft SDKs\TypeScript\tsc 
```

即没有版本号。

可能值得注意的是，这`ES3`是默认设置，因此您不需要传递它 - 但传递它并没有什么坏处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T19:51:27.107

也许是一个愚蠢的问题，但是您在项目中有任何 Typescript (.ts) 文件吗？当我创建一个新项目，删除 app.ts 并尝试编译时出现此错误。

如果没有 .ts 文件传递​​给编译器，看起来它无法构建项目。问题今天仍然存在...

将新的 .ts 文件添加到项目中修复了它...

# linux - 如何禁用/阻止用户在嵌入式 linux 的串行终端上输入命令

> ID：14566538
> 
> 赞同：0
> 
> 时间：2013-01-28T16:28:25.703
> 
> 标签：linux, embedded, serial-port

我正在开发一个小型嵌入式项目，我想禁止用户输入命令或通过串行端口在嵌入式设备文件系统中导航。我想设置串口只读模式，以便用户可以做笔记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:16:20.167

限制登录的标准方法是使用受限外壳而不是普通外壳。

将用户的 /etc/passwd 更改为指向受限 shell，而不是常规 shell。

如果您使用的是busybox（默认情况下不在busybox中），则使用起来会更加困难。

如果您有非常不寻常的要求（看起来确实如此），请编写自己的简单 shell。看看busybox 资源来寻找灵感？

它只是一个读取标准输入、解析并执行与用户输入匹配的“命令”的循环。如果你想浮夸；读取-评估-打印循环（REPL）。

如果您不提供更改工作目录的命令，则没有。

所以也许你的 shell 可能只有三个命令：显示状态、帮助和重启。（我建议添加某种升级固件命令......虽然这很快就开始真正的工作）

我有机会为特殊用途的嵌入式系统编写了一个迷你外壳。

# java - Java 从子类调用超类的类构造函数

> ID：14566541
> 
> 赞同：0
> 
> 时间：2013-01-28T16:28:39.363
> 
> 标签：java, reflection, constructor, invoke

我正在尝试使用反射调用继承类的参数化构造函数。但是构造函数没有在子类中实现，只在超类中实现。

```
class Parent{       
    public Parent(String value){
        doSomeThing(value);
    }
}

class Horst extends Parent{}

class Eva extends Parent{}

class AndereKlasse{       
    ...
    Class parentClass = MyConfig.getParentClass; // its here Horst.class or Eva.class
    Constructor parentConstructor =   Parent.class.getConstructor(String.class);
    parentConstructor.newInstance("just a String");
    ...
} 
```

我只是从子类中获取空的构造函数，而不是从父类中获取空构造函数。有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:43:02.470

这不起作用，因为子类 Eva 和 Horst 每个都必须定义自己的构造函数，以便指定它们如何调用它们的超类构造函数。在任何情况下，调用超类的构造函数都不会创建子类的对象。您需要在子类上调用构造函数才能创建该子类的对象。

# actionscript-3 - 将版本定义为编译器选项

> ID：14566544
> 
> 赞同：0
> 
> 时间：2013-01-28T16:28:47.710
> 
> 标签：actionscript-3, apache-flex

如果我通过编译器 arg 定义我的网络应用程序的当前版本，那是否被认为是错误的形式？

```
-define=CONFIG::VERSION,1.005 
```

我真的应该用这个信息加载一个 XML 文件吗？

只想使用最好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T07:37:11.510

在我看来，通过定义编译参数进行版本控制也是最好的方法，因为它是集成 as3 runtime-accessbile 版本和构建脚本的最简单方法。它也可以在不修改现有代码的情况下进行扩展：

1.  您有 as3 代码版本，无需加载（或嵌入）和解析 xml 配置。
2.  您可以轻松地在构建脚本中传递版本，如果您使用 ant`buildnumber`目标，它将自动增加版本并将其存储在外部文件中。
3.  在版本控制系统中将版本存储在外部文件中会自动标记源，以便您以后可以轻松地检查给定版本。
4.  如果您需要与其他模块或服务器共享版本，您仍然可以稍后在构建脚本中添加 version.xml 文件的创建（并将其放置在构建目录中）。

我在不同的项目（从小型测试应用程序到大型在线游戏）中使用这种方法已有好几年了，它对我来说总是很好。

# ios - iOS UIAutomation：命令行工具使用 -e 设置环境变量。有没有办法在 javascript 的 UIATarget 中访问这些变量？

> ID：14566545
> 
> 赞同：1
> 
> 时间：2013-01-28T16:28:51.607
> 
> 标签：ios, ios-ui-automation

iOS UIAutomation - 命令行工具使用 -e 设置环境变量。有没有办法在 javascript 的 UIATarget 中访问这些变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T17:32:47.160

基本上我想为 uiautomation javascript 传递变量。我没有将变量作为环境变量传递，而是从如下的 ini 文件中读取它们。

在配置文件中指定所需的参数。python 脚本读取这些参数并打印到标准输出。UiAutomation javascript 读取标准输出并解析变量

测试.ini

```
[JSVARS]
server_url = http://foo.com
uname = user11
pwd = secret 
```

Python：

```
 import json, os;
   import ConfigParser;
   config = ConfigParser.ConfigParser()
   config.read('~/test/test.ini')
   for jsvar in config.items('JSVARS'):
      print jsvar[0]+":"+jsvar[1]+":"+jsvar[0] 
```

Javascript：

```
var dlimiter = ":"
parseAllEnvironmentVariables()
{
    envvars = host.performTaskWithPathArgumentsTimeout("/usr/bin/python",["getEnvVars.py"], 5).stdout;
}

function getEnvironmentVariable(varname)
{
    return (new String(envvars).substring(envvars.indexOf(varname+dlimiter)+varname.length+dlimiter.length,envvars.indexOf(dlimiter+varname)));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T14:09:29.310

制作一个 shell 脚本，然后使用环境变量的值生成一个 JavaScript 文件：

```
VAR1=100
...
VARN="something"
cat >> END
const Var1 = "$VAR1";
...
const VarN = "$VARN";
END > Env.js
...
# launch instruments here
instruments [...] -e VAR1 "$VAR1" ... -e VARN "$VARN" 
```

在您的自动化脚本中导入生成的文件：

```
#import "Env.js"

/* Use `Var1`, ..., `VarN`. */ 
```

保存`Env.js`在自动化脚本目录中，它应该可以正常工作。请注意，您可能需要转义变量以生成有效的 JavaScript。

# android - 将 CordovaWebView/root 视图放入新的父视图中

> ID：14566546
> 
> 赞同：2
> 
> 时间：2013-01-28T16:28:52.807
> 
> 标签：android, cordova

首先，让我先说我不精通 Android APK。我的解决方案可以通过阅读在线文档来解决。我试图阅读文档并得出结论，我遗漏了一些东西。

我的目标是获取 PhoneGap 应用程序的根视图并将其放在 ViewGroup 中，并将主 Activity 设置为使用新的视图组。我这样做的原因是我可以在 web 视图之上覆盖其他视图。

当我创建 ViewGroup 时，从活动的内容视图中删除根视图，将根视图添加到 ViewGroup，然后将内容视图设置为 RootView，我得到一个空白屏幕。但是，如果我将 ImageView 添加到视图组，则图像呈现良好。这让我相信我没有对 rootview 或 webview 做一些重要的事情。

非常感谢任何建议或指导。

代码：

活动代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    ((ViewGroup)this.root.getParent()).removeView(this.root);
    this.mainView = new MainView(this.getActivity());
    this.mainView.setBackgroundColor(Color.WHITE);
    this.mainView.addView(this.root);
    this.setContentView(this.mainView);
} 
```

主视图代码：

```
protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
    if(this.getChildCount() == 1){
        this.getChildAt(0).layout(left, top, right, bottom);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:18:37.917

我想到了。

使用 viewgroup 时，您必须在添加的孩子上调用 measure：

```
@Override
protected void onMeasure(int width, int height){
    super.onMeasure(width,height);
    if(this.getChildCount() == 1){
        this.getChildAt(0).measure(width,height);
    }
} 
```

# java - 使用 android 的 SlidingMenu

> ID：14566549
> 
> 赞同：1
> 
> 时间：2013-01-28T16:28:55.867
> 
> 标签：java, android, slidingmenu

我使用[这个](https://github.com/jfeinstein10/SlidingMenu)库来添加我的幻灯片菜单。当我滑动屏幕时这项工作但如何以点击方法显示菜单？我一直在浏览整个库，但找不到点击代码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:31:26.657

利用：

```
toggle(); 
```

在 SlidingActivity 或 SlidingFragmentActivity （或任何[其他](https://github.com/jfeinstein10/SlidingMenu/tree/master/library/src/com/slidingmenu/lib/app)）内时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:31:35.460

这将打开菜单：

```
toggle(); 
```

# c# - 一种为 NHibernate 映射 .hbm.xml 文件配置构建操作的方法？

> ID：14566558
> 
> 赞同：0
> 
> 时间：2013-01-28T16:29:43.287
> 
> 标签：c#, nhibernate, configuration, hbmxml, buildaction

有没有办法从 NHibernate 映射 .hbm.xml 文件本身或至少另一个配置 xml 文件中为 NHibernate 映射 .hbm.xml 文件配置构建操作？

尽管我很欣赏 Microsoft Visual Studio 2010 的许多功能，但我不喜欢通过执行以下操作手动将“嵌入式资源”设置为此 hbm.xml 文件的构建操作：

1.  （不喜欢手动方法）（Microsoft 支持文档）右键单击感兴趣的文件，然后选择属性。
2.  （不喜欢手动方法）（Microsoft 支持文档）在“属性”对话框中，找到“生成操作”属性。默认情况下，此属性设置为内容。单击该属性并将 Build Action 属性更改为 Embedded Resource。

另外，我不喜欢在 CSharp 代码中以编程方式进行操作。有没有办法从 NHibernate 映射 .hbm.xml 文件本身或至少另一个配置 xml 文件中为 NHibernate 映射 .hbm.xml 文件配置构建操作？有人可以建议我如何使用xml来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:21:17.623

我通过将 xml 文件属性更改为 Embedded Resource 解决了这个问题。我通过使用以下代码将动态生成的 .hbm.xml 强制执行到 NHibernate。然后我可以动态绑定此映射文件。

```
 Configuration cfg = new Configuration();
 cfg.Configure();
 string   file="@\\mappingfilesPath \\DynamicMappingfiles.hbm.xml";
 cfg.AddFile(new FileInfo(file));
 cfg.AddAssembly(this.GetType().Assembly); 
```

# python - numpy.sum 可能比 Python for-loop 慢

> ID：14566564
> 
> 赞同：7
> 
> 时间：2013-01-28T16:30:03.990
> 
> 标签：python, performance, numpy, vectorization

在特定轴上对数组求和时，专用数组方法`array.sum(ax)`实际上可能比 for-loop 慢：

```
v = np.random.rand(3,1e4)

timeit v.sum(0)                             # vectorized method
1000 loops, best of 3: 183 us per loop

timeit for row in v[1:]: v[0] += row        # python loop
10000 loops, best of 3: 39.3 us per loop 
```

向量化的方法比普通的 for 循环慢 4 倍以上！这里发生了什么（wr）on（g），我不能相信numpy中的向量化方法比for循环更快吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T23:18:46.970

不，你不能。正如您有趣的示例所指出的那样，`numpy.sum`可能不是最理想的，通过显式 for 循环更好地布局操作可能会更有效。

让我再举一个例子：

```
>>> N, M = 10**4, 10**4
>>> v = np.random.randn(N,M)
>>> r = np.empty(M)
>>> timeit.timeit('v.sum(axis=0, out=r)', 'from __main__ import v,r', number=1)
1.2837879657745361
>>> r = np.empty(N)
>>> timeit.timeit('v.sum(axis=1, out=r)', 'from __main__ import v,r', number=1)
0.09213519096374512 
```

在这里，您可以清楚地看到，`numpy.sum`如果对快速运行的索引（`v`是 C 连续的）求和是最优的，而在对慢速运行的轴求和时是次优的。有趣的是，`for`循环的相反模式是正确的：

```
>>> r = np.zeros(M)
>>> timeit.timeit('for row in v[:]: r += row', 'from __main__ import v,r', number=1)
0.11945700645446777
>>> r = np.zeros(N)
>>> timeit.timeit('for row in v.T[:]: r += row', 'from __main__ import v,r', number=1)
1.2647287845611572 
```

我没有时间检查`numpy`代码，但我怀疑造成差异的是连续内存访问或跨步访问。

正如这个例子所示，在实现数值算法时，正确的内存布局非常重要。矢量化代码不一定能解决所有问题。

# objective-c - 类方法ios“self”指的是什么

> ID：14566568
> 
> 赞同：-2
> 
> 时间：2013-01-28T16:30:12.983
> 
> 标签：objective-c, singleton

```
#import "ApiService.h"

@implementation ApiService
static ApiService *sharedInstance = nil;

+ (ApiService *)sharedInstance
{
    if (sharedInstance == nil)
    {
        sharedInstance =  [[self alloc]init];
    }

    return sharedInstance;
}

- (id)init
{
    if (self = [super init])
    {
    }
    return self;
}
@end 
```

当我打电话给`+sharedInstance`self 指的是什么？如何允许从 Class 方法调用 init？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:38:05.080

`self`是类。

```
+ (id)create {
  return [[self alloc] init];
} 
```

是相同的：

```
+ (id)create {
  return [[SomeClass alloc] init];
} 
```

或者在您的示例中：

```
+ (ApiService *)sharedInstance
{
    if (sharedInstance == nil)
    {
        sharedInstance =  [[ApiService alloc]init];
    }

    return sharedInstance;
} 
```

这允许您`self`从类方法调用类方法。它允许您在继承时在子类上调用它们，因为类方法也被继承。

# asp.net - 如何在 ASPX 中发布变量？

> ID：14566569
> 
> 赞同：0
> 
> 时间：2013-01-28T16:30:13.550
> 
> 标签：asp.net

在 ASPX 页面中，我以编程方式填充表的行，方法是用内容填充服务器端字符串，然后将其放入带有构造的输出 HTML 中`<tbody><%=mystring%></tbody>`。

行的`<td>`元素之一是删除行的按钮，我需要将`<td>`行中的另一个元素传递给服务器。

在准备表格的服务器端代码中，我尝试了：

```
string RowTemplate; 
RowTemplate = "<tr><td>{0}</td><td>{1}</td><td>{2}</td><td><form action=\"/submit\" name=\"removeemail{0}\" runat=\"server\"><input custom=\"{1}\" class=\"btn icon-remove\" value=\"X\" onserverclick=\"RemoveEmail\" runat=\"server\"/></form></td></tr>"; 
```

然后，当我创建行时，占位符 {0}、{1} 和 {2} 将替换为行的对应值。

这个想法是在名为 RemoveEmail 的服务器端函数中检索“自定义”属性（删除的键），然后在不删除行的情况下再次构建表。

但是，似乎为这个内联表单生成的 HTML 没有被 ASPX 引擎预处理，所以到达浏览器的 HTML 代码直接是 ASPX HTML 标记。

如何对 ASPX 标记进行预处理，使其行为与静态 ASPX 标记完全一样，就像找到 .aspx 文件的标记一样？如果这是不可能的，我如何在 ASPX 的表格行上使用内联按钮管理服务器端删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:42:26.700

我不认为通过添加`runat="server"`这些`HTML Controls`会使它们作为服务器端控件工作。您可以添加`runat="server"`到标记中，这将起作用。这是我这样做的一种方法：

标记：

```
<body>
    <form id="form1" runat="server">
    <div>
       <asp:Table runat="server" ID="tbl"></asp:Table>
    </div>
    </form>
</body> 
```

代码背后：

```
TableRow tr = new TableRow();
tr.Cells.Add(new TableCell() { Text = "Argument0" });
tr.Cells.Add(new TableCell() { Text = "Argument1" });
tr.Cells.Add(new TableCell() { Text = "Argument2" });
TableCell td = new TableCell();
Button btn = new Button();

tr.Cells.Add(td);
btn.Text = "Remove Email";
btn.Click+=new EventHandler(removeEmail);

td.Controls.Add(btn);
this.tbl.Rows.Add(tr);

void removeEmail(object sender, EventArgs e)
{ 
    //code here
} 
```

这会将`Button`控件添加到 a `TableCell`，并将`removeEmail()`事件附加到此按钮。

祝你好运。

# python - 如何使用 Flask-Script 和 Gunicorn

> ID：14566570
> 
> 赞同：19
> 
> 时间：2013-01-28T16:30:17.467
> 
> 标签：python, flask, gunicorn

我正在使用 Flask 的内置开发服务器开发 Flask 应用程序。我使用 Flask-Script 启动它。我想切换到使用 Gunicorn 作为 Web 服务器。为此，我是否需要在 Flask-Script 和 Gunicorn 之间编写某种集成代码？或者 Flask-Script 与使用 Gunicorn 运行应用程序无关？

提前致谢！

给@sean-lynch 的道具。以下是根据他的回答工作的、经过测试的代码。我所做的更改是：

*   `sys.argv`在`remove_non_gunicorn_command_line_args()`尝试启动服务器之前，将删除 Gunicorn 无法识别的选项。否则 Gunicorn 会抛出错误，并显示如下消息：`error: unrecognized arguments: --port 5010`. 我删除`-p`是因为，即使它不会导致错误，那只是因为 Gunicorn 认为它是其`pidfile`选项的简短形式，这显然不是预期的。

*   修改 GunicornServer.handle() 签名以匹配它覆盖的方法，即 Command.handle()

-

```
from flask_script import Command
from gunicorn.app.base import Application

class GunicornServer(Command):

    description = 'Run the app within Gunicorn'

    def __init__(self, host='127.0.0.1', port=8000, workers=6):

        self.port = port
        self.host = host
        self.workers = workers

    def get_options(self):
        return (
            Option('-t', '--host',
                   dest='host',
                   default=self.host),

            Option('-p', '--port',
                   dest='port',
                   type=int,
                   default=self.port),

            Option('-w', '--workers',
                   dest='workers',
                   type=int,
                   default=self.workers),
        )

    def handle(self, app, *args, **kwargs):

        host = kwargs['host']
        port = kwargs['port']
        workers = kwargs['workers']

        def remove_non_gunicorn_command_line_args():
            import sys
            args_to_remove = ['--port','-p']
            def args_filter(name_or_value):
                keep = not args_to_remove.count(name_or_value)
                if keep:
                    previous = sys.argv[sys.argv.index(name_or_value) - 1]
                    keep = not args_to_remove.count(previous)
                return keep
            sys.argv = filter(args_filter, sys.argv)

        remove_non_gunicorn_command_line_args()

        from gunicorn import version_info
        if version_info < (0, 9, 0):
            from gunicorn.arbiter import Arbiter
            from gunicorn.config import Config
            arbiter = Arbiter(Config({'bind': "%s:%d" % (host, int(port)),'workers': workers}), app)
            arbiter.run()
        else:
            class FlaskApplication(Application):
                def init(self, parser, opts, args):
                    return {
                        'bind': '{0}:{1}'.format(host, port),
                        'workers': workers
                    }

                def load(self):
                    return app

            FlaskApplication().run()

manager.add_command('gunicorn', GunicornServer()) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T19:43:45.393

正如 Dhaivat 所说，您可以直接将 Flask 应用程序与 Gunicorn 一起使用。

如果您仍想使用 Flask-Script，则需要创建一个自定义的`Command`. 我对 Gunicorn 没有任何经验，但我为 Flask-Actions 找到了类似的[解决方案](https://bitbucket.org/youngking/flask-actions/src/381d6eea3e78/flaskext/actions/server_actions.py#cl-81)，并将其移植到 Flask-Script，尽管请注意，它未经测试。

```
from flask_script import Command, Option

class GunicornServer(Command):

    description = 'Run the app within Gunicorn'

    def __init__(self, host='127.0.0.1', port=8000, workers=4):
        self.port = port
        self.host = host
        self.workers = workers

    def get_options(self):
        return (
            Option('-H', '--host',
                   dest='host',
                   default=self.host),

            Option('-p', '--port',
                   dest='port',
                   type=int,
                   default=self.port),

            Option('-w', '--workers',
                   dest='workers',
                   type=int,
                   default=self.workers),
        )

    def handle(self, app, host, port, workers):

        from gunicorn import version_info

        if version_info < (0, 9, 0):
            from gunicorn.arbiter import Arbiter
            from gunicorn.config import Config
            arbiter = Arbiter(Config({'bind': "%s:%d" % (host, int(port)),'workers': workers}), app)
            arbiter.run()
        else:
            from gunicorn.app.base import Application

            class FlaskApplication(Application):
                def init(self, parser, opts, args):
                    return {
                        'bind': '{0}:{1}'.format(host, port),
                        'workers': workers 
                    }

                def load(self):
                    return app

            FlaskApplication().run() 
```

然后，您可以在以下位置注册它以替换 Flask 的本地[开发服务器](http://flask.pocoo.org/docs/api/#flask.Flask.run)`python manage.py runserver`

```
manager.add_command("runserver", GunicornServer()) 
```

或注册为新命令，例如`python manage.py gunicorn`

```
manager.add_command("gunicorn", GunicornServer()) 
```

**2016 年 6 月编辑**：使用最新版本的 Flask-Script，将方法更改`handle`为`__call__`. [旧烧瓶脚本](https://github.com/smurfix/flask-script/blob/cb36eb94d6ae992458b6a66c6c2a715cddfdc4bd/flask_script/commands.py#L138)与[新烧瓶脚本](https://github.com/smurfix/flask-script/blob/master/flask_script/commands.py#L210)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-07T09:05:05.907

我基于 Sean Lynch 编写了一个更好的 GunicornServer 版本，该命令现在接受所有 gunicorn 的参数

```
from yourapp import app
from flask.ext.script import Manager, Command, Option

class GunicornServer(Command):
    """Run the app within Gunicorn"""

    def get_options(self):
        from gunicorn.config import make_settings

        settings = make_settings()
        options = (
            Option(*klass.cli, action=klass.action)
            for setting, klass in settings.iteritems() if klass.cli
        )
        return options

    def run(self, *args, **kwargs):
        from gunicorn.app.wsgiapp import WSGIApplication

        app = WSGIApplication()
        app.app_uri = 'manage:app'
        return app.run()

manager = Manager(app)
manager.add_command("gunicorn", GunicornServer()) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-02T08:07:51.353

根据肖恩的回答，我还写了一个更适合我的版本。

```
@manager.option('-h', '--host', dest='host', default='127.0.0.1')
@manager.option('-p', '--port', dest='port', type=int, default=6969)
@manager.option('-w', '--workers', dest='workers', type=int, default=3)
def gunicorn(host, port, workers):
    """Start the Server with Gunicorn"""
    from gunicorn.app.base import Application

    class FlaskApplication(Application):
        def init(self, parser, opts, args):
            return {
                'bind': '{0}:{1}'.format(host, port),
                'workers': workers
            }

        def load(self):
            return app

    application = FlaskApplication()
    return application.run() 
```

你可以使用这样的命令运行 gunicorn`python manager.py gunicorn`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-28T17:55:54.123

[Flask 实际上有文档可以在这里](http://flask.pocoo.org/docs/0.10/deploying/wsgi-standalone/#gunicorn)运行 Gunicorn 。

你必须记住 Gunicorn 是一个有一些细节的 WSGI 服务器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-17T17:29:21.137

感谢@menghan 的解决方案和@OutOfFoodException 改进。但请记住 for`gunicorn=20.0.4`使用`-b, --bind` [option](https://docs.gunicorn.org/en/stable/settings.html#server-socket)绑定服务器套接字。结果命令对我来说是这样的：

```
python3 manage.py gunicorn -b 0.0.0.0:5000 
```

```
from yourapp import app
from flask.ext.script import Manager, Command, Option

class GunicornServer(Command):
    """Run the app within Gunicorn"""

    def get_options(self):
        from gunicorn.config import make_settings

        settings = make_settings()
        options = (
            Option(*klass.cli, action=klass.action)
            for setting, klass in settings.iteritems() if klass.cli
        )
        return options

    def run(self, *args, **kwargs):
        from gunicorn.app.wsgiapp import WSGIApplication

        app = WSGIApplication()
        app.app_uri = 'manage:app'
        return app.run()

manager = Manager(app)
manager.add_command("gunicorn", GunicornServer()) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-31T18:07:21.837

根据 menghan 的回答，接收来自 Application config 的所有参数。

```
from flask_script import Command, Option

class GunicornApp(Command):

    def get_options(self):
        from gunicorn.config import make_settings

        settings = make_settings()
        options = (
            Option(*klass.cli, dest=klass.name, default=klass.default)
            for setting, klass in settings.items() if klass.cli
        )
        return options

    def __call__(self, app=None, *args, **kwargs):

        from gunicorn.app.base import Application
        class FlaskApplication(Application):
            def init(self, parser, opts, args):
                return kwargs

            def load(self):
                return app

        FlaskApplication().run() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-06-23T06:29:26.780

我将进一步详细说明@NinjaDQ 的答案。如果要同时使用`app_uri`属性来定义例如烧瓶应用程序配置文件和自定义命令行参数，则需要使用`WSGIApplication`. 问题是这个应用程序`overrides`的命令行参数因此有必要忽略`sys.argv`.

```
 from gunicorn.app.base import Application

        class FlaskApplication(Application):
            def init(self, parser, opts, args):
                return {
                    "bind": "{0}:{1}".format(host, port),
                    "workers": 4
                }

            def chdir(self):
                # chdir to the configured path before loading,
                # default is the current dir
                os.chdir(self.cfg.chdir)

                # add the path to sys.path
                sys.path.insert(0, self.cfg.chdir)

            def load_wsgiapp(self):
                self.chdir()

                # load the app
                return util.import_app(self.app_uri)

            def load(self):
                return self.load_wsgiapp()

        # Important! Do not pass any cmd line arguments to gunicorn
        sys.argv = sys.argv[:2]

        wsgi_app = FlaskApplication()
        wsgi_app.app_uri = "manage:create_app('{0}')".format(config_file)

        return wsgi_app.run() 
```

# memcached - 大型对象的分布式缓存

> ID：14566572
> 
> 赞同：10
> 
> 时间：2013-01-28T16:30:20.620
> 
> 标签：memcached, redis, distributed-caching, hazelcast, voldemort

我想在一组机器之间共享一个非常大的对象，例如以兆字节甚至几千兆字节的顺序。该对象将被写入一次，但可能会被多次读取。也许一种天真的方法是使用像[redis](http://redis.io/)这样的集中式存储。但是，它可能会成为单点故障，过多的请求可能会对 redis 造成 DOS 攻击。然后，分布式解决方案更有希望。但是，主要问题是将结构复制到所有机器上。如果复制是通过主/从技术完成的，那么复制可能会导致主服务器上的流量负载很大，因为对象很大。因此，更好的解决方案是使用 P2P 策略来复制对象，以减少主服务器上的网络负载。

有没有人知道这个问题的解决方案？也许一些候选人是：
- [Redis](http://redis.io/)
- [Memcached](http://memcached.org/)
- [Voldemort](http://www.project-voldemort.com/voldemort/)
- [Hazelcast](http://www.hazelcast.com/)

我主要关心的是 Java 接口、共享大对象、高可用性和低网络流量进行复制。

预先感谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T18:14:48.730

在 NoSQL 存储中缓存大对象通常不是一个好主意，因为它在内存和网络带宽方面很昂贵。我不认为 N​​oSQL 解决方案在存储大型对象方面表现出色。Redis、memcached 和大多数其他键/值存储显然不是为此而设计的。

如果要在 NoSQL 产品中存储大对象，则需要将它们切成小块，并将这些块作为独立对象存储。这是 10gen 为 gridfs 保留的方法（这是标准 MongoDB 发行版的一部分）：

见[http://docs.mongodb.org/manual/applications/gridfs/](http://docs.mongodb.org/manual/applications/gridfs/)

要存储大型对象，我宁愿查看分布式文件系统，例如：

*   [头孢](http://ceph.com/)
*   [GlusterFS](http://www.gluster.org/)
*   [MapR-FS](http://doc.mapr.com/display/MapR/Architecture+Guide)

这些系统是可扩展的、高度可用的，并提供文件和对象接口（您可能需要一个对象接口）。您还可以参考以下 SO 问题来选择分布式文件系统。

[商品 Linux 存储场的最佳分布式文件系统](https://stackoverflow.com/questions/269179/best-distributed-filesystem-for-commodity-linux-storage-farm)

由您在这些可扩展的存储解决方案之上实施缓存。

# cakephp - 如何找出我的函数错误在哪里（CAKEPHP）

> ID：14566574
> 
> 赞同：0
> 
> 时间：2013-01-28T16:30:25.270
> 
> 标签：cakephp

我无法找出我的函数出错的地方，我想知道是否有任何方法让我找出函数在使用 net beans 或在执行函数时中断的地方。

如果您想查看该功能，那么这里是它的副本：

```
 public function archive($id = null) {
    if ($this->request->is('post')) {
        $event =  $this->Event->read(null, $id);
        $archive['Archive'] = $event['Event'];
        $archive['Archive']['archiveID'] = $event['Event']['eventID'];
        unset($archive['Archive']['archiveID']);
        $this->loadModel('Archive');
        $this->Archive->create();
        if ($this->Archive->save($archive)) {
           // $this->Archive->invalidFields();
            $this->redirect(array('action' => 'eventmanage'));
            $this->Session->setFlash(__('The event has been archived'));
          //  $this->Event->delete($id);  
        } else {
            $this->redirect(array('action' => 'eventmanage'));
            $this->Session->setFlash(__('The event could not be archived, Please, contact the administrator.'));
        }
    }
}

so far i have tried using the `$errors = $this->Archive->validationErrors;` function but all i receive back is the word 'array' 
```

**更新**

我已将事件保存为存档，但它不会发送消息`$this->Session->setFlash(__('The event has been archived'));`并且它不会重定向回 eventmanage，它会创建一个指向 /Controller/Action/id 的新链接，例如 /events/archive/14 。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:37:52.577

该`validationErrors`属性返回一个数组。您不能在 PHP 中回显数组对象，因为它是数据的集合，而不是可以“只是”输出到屏幕的东西。不过还有其他函数可以显示完整数组，例如[var_dump()](http://php.net/var_dump)、[print_r()](http://php.net/print_r)或 CakePHP 方法[debug()](http://book.cakephp.org/2.0/en/development/debugging.html#basic-debugging)或[Debugger::dump()](http://book.cakephp.org/2.0/en/development/debugging.html#Debugger%3a%3adump)。所以尝试这样的事情：

```
$errors = $this->Archive->validationErrors;
if (!empty($errors)) { debug($errors); } 
```

您还可以使用[implode()](http://php.net/implode)将所有验证错误作为字符串输出到您的 flash 消息中，例如：

```
$this->Session->setFlash(__('The event could not be archived, because of the following errors: ' . implode('<br/>', $errors) . '. Please, contact the administrator.')); 
```

这将显示所有错误，并在 Flash 消息中以中断分隔。

**更新** 关于您最近的问题更新，未设置闪信，因为您在设置之前重定向。因此，该声明永远无法达成。在你的控制器中交换 setFlash 和 redirect 方法，你会得到：

```
$this->Session->setFlash(__('The event has been archived'));
$this->redirect(array('action' => 'eventmanage')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:59:52.913

我很难理解需要为

```
$archive['Archive']['archiveID'] = $event['Event']['eventID']; 
```

并在之后立即取消设置

```
unset($archive['Archive']['archiveID']); 
```

如果在您的 Db 'archiveID' 中是必需的值，那么如果该值不存在，我认为 MySQL 不会接受任何数据。

您必须检查表的结构。

# android - 在 SQLite 数据库的 ListView 中显示 100000 多个项目

> ID：14566575
> 
> 赞同：3
> 
> 时间：2013-01-28T16:30:35.023
> 
> 标签：android, android-listview, android-sqlite

我正在尝试使用游标在 ListView 中显示预填充数据库（超过 100000 行）中的所有项目。它可以工作，但应用程序需要几分钟才能启动并显示 ListView。有更快的方法吗？我读过一些关于 FTS3 表的内容，这有帮助吗？

我正在使用`ArrayList<HashMap<String, String>>`SimpleAdapter 和自定义 2 行布局。代码：

```
Cursor cursor = sDictionary.query("FTSgesla", new String[] {PodatkovnaBaza.KEY_WORD, PodatkovnaBaza.KEY_DEFINITION}, null, null, null, null, PodatkovnaBaza.KEY_WORD);

    if (cursor == null) 
    {

            // There are no results
            mTextView.setText("Empty");
    } 
    else 
    {

        HashMap<String, String> item;

        if(cursor.moveToFirst())
        {
            do
            {
                item = new HashMap<String, String>();
                item.put("line1", cursor.getString(0));
                item.put("line2", cursor.getString(1));
                list.add(item);
            }
            while(cursor.moveToNext());
        }

            sa = new SimpleAdapter(GlavniActivity.this, list,
                    R.layout.result,
                    new String[] { "line1","line2" },
                    new int[] {R.id.word, R.id.definition});

            mListView.setAdapter(sa);
            // Define the on-click listener for the list items
            mListView.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
                   //do something
                }
            });
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:41:00.630

没有更快的方法来加载 100000 个项目，并且您的用户也不需要一次查看所有项目，因此，使用线程一个接一个地加载它们。

```
 private class SQLTask extends AsyncTask<Integer, String[], Integer> {

    @Override
    protected Integer doInBackground(Integer... params) {
        db.open();
        Cursor c = db.getAllDataCursor();
        for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
            String[] temp = new String[c.getColumnCount()];
            for (int i = 0; i < temp.length; i++) {
                temp[i] = c.getString(i);
            }
            publishProgress(thisTask, temp);
        }
        c.close();
        db.close();
    }

    @Override
    protected void onProgressUpdate(String[]... values) {
        super.onProgressUpdate(values);
        // LOAD ONE ROW
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:41:12.983

这应该在带有某种过滤的部分中，加载这么多项目似乎只是为什么过度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:47:05.670

我不太确定，但恐怕您的问题是您同时加载了 100.000 个视图。我个人会使用 ArrayAdapter 或基本适配器，覆盖 getView(..) 方法，当然还有使用 ViewHolder 模式。

在这里，您使用 BaseAdapter 获得了一个非常流畅和快速的示例： [https ://github.com/Jachu5/RSS_Feeder_Android/tree/master/RssFeeder_sherlock/src/com/example/adapter](https://github.com/Jachu5/RSS_Feeder_Android/tree/master/RssFeeder_sherlock/src/com/example/adapter)

希望能帮助到你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:53:54.120

你为什么要加载 100K 项目到列表视图中？列表视图是一个屏幕元素，将与用户进行交互。没有人会滚动浏览 10 万个项目。甚至没有人会滚动浏览其中的 1%。这里的答案是不要全部加载它们。

# git - Push 绕过 Gerrit 代码审查 (TortoiseGit)

> ID：14566576
> 
> 赞同：1
> 
> 时间：2013-01-28T16:30:39.617
> 
> 标签：git, gerrit

我需要能够推送到存储库但使用代码审查功能。为了推动我正在使用 tortoisegit，当推动 master 我得到这个错误：

ssh://myusername@myorganization:29418/project ！[remote denied] master -> master (cannot update the reference as a fast forward) error: failed to push some refs to ssh://myusername@myorganization:29418/project

我能够推送的唯一方法是向组添加推送权限，但这绕过了代码审查。如何设置 Gerrit 以便我可以推送审查？

我不是设置它的人，所以我无法理解所需的权限，我已经阅读了 Gerrit 的 ACL 文档，但我不清楚我必须做什么。

![我们目前对该项目的权限](../Images/089942ebaf52172d694985cc1110dc51.png)

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T12:57:37.780

如果您想绕过 gerrit 审查并合并任何更改，请使用*head*而不是*for*。命令将是

```
git push ssh://myusername@myorganization:29418/project HEAD:refs/heads/master 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:39:31.947

您的权限可能是正确的，但您应该推送到 refs/for/master 而不是 master。例如，

```
git push ssh://myusername@myorganization:29418/project HEAD:refs/for/master 
```

# codeigniter - CI 路由器检查数据库中的域

> ID：14566579
> 
> 赞同：0
> 
> 时间：2013-01-28T16:30:59.900
> 
> 标签：codeigniter, codeigniter-2, codeigniter-url

我是 CI 新手，需要帮助根据数据库值将 url 路由到子域

通过使用通配符规则，我已经在服务器上设置了子域，现在我必须检查数据库中是否存在子域，如果名称存在于数据库中，那么我将重定向到主控制器，否则我将重定向主站点（默认控制器）

目前我正在检查主控制器索引方法中的子域

```
 $server = explode('.', $_SERVER['HTTP_HOST']);
   $domain = $server[0]; 
   $this->usercontroller->checkdomain($domain); 
```

需要帮助我使用路由器（引导方法）做得更好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T17:27:30.920

我知道这是一个老问题，但这对我有用。这可能会为某人指明正确的方向。也请随时向我询问有关代码的详细信息。

```
//$route['default_controller'] = "welcome"; 
```

$route['404_override'] = ''; 开关（$_SERVER['HTTP_HOST']）

{

```
case 'losey.co':

case 'www.losey.co':

    $route['default_controller'] = "dashboard";

break;  

default:
    //This query's the sites table and checks the domain / subdomain and then shows the correct default_controller
    $server = $_SERVER['HTTP_HOST'];
    require_once( BASEPATH .'database/DB'. EXT );
        $db =& DB();
        $db->where('nameshort',  array_shift(explode(".",$server)));
        $db->or_where('domain', $server);
        $query = $db->get( 'sites' );
        //$query = $db->get_where('sites', array('nameshort' => 'test'), 1);

        $result = $query->result();
        foreach( $result as $row )
        {
            $route['default_controller'] = $row->home;
        }
break; 
```

# xslt - xsl 中的 if 条件

> ID：14566584
> 
> 赞同：0
> 
> 时间：2013-01-28T16:31:14.600
> 
> 标签：xslt

如果条件类似于我的构建格式是 STP_13_00_00_00_RC01 或 STPMON_13_00_00_00_RC01，我需要输入。如果 perfix 是 STP，那么我想运行一个小脚本，如果 perfix 其他 STP 不需要运行脚本并使用其他操作。怎么可能我实现了这个？

我对我的代码进行了一些更改，我在这里做的是创建文件夹并将 tar 文件复制到该文件夹​​。这里的文件夹名称以 STP 或 ACH 开头，然后我想用一些参数执行我的脚本，否则什么都没有。

```
 <xsl:element name="mkdir">
                <xsl:attribute name="dir">/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${gbl.dist.label}</xsl:attribute>
                 </xsl:element>
            <xsl:element name="copy">
                <xsl:attribute name="file">${archive.base}/${gbl.dist.label}.tar.gz</xsl:attribute>
                <xsl:attribute name="todir">/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${gbl.dist.label}/</xsl:attribute>
                <xsl:attribute name="overwrite">no</xsl:attribute>
            </xsl:element>
            <xsl:choose>
            <xsl:when test="starts-with(Node, 'STP')">
            <xsl:element name="mkdir">
            <xsl:attribute name="dir">/mnt/projects/autoblds_dev_build/blds_dev_stp2build/${soa.release.version}</xsl:attribute>
            </xsl:element>
            </xsl:when>
            <xsl:otherwise>
            <!-- alternative action -->
            </xsl:otherwise>
            </xsl:choose> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:44:37.307

您的 XSLT 说“条件一或条件二”，但我在您的问题中只看到一个条件。要测试一个值是否具有特定前缀，您可以这样做：

```
<xsl:choose>
  <xsl:when test="starts-with(Node, 'STP')">
    <!-- action -->
  </xsl:when>
  <xsl:otherwise>
    <!-- alternative action -->
  </xsl:otherwise>
</xsl:choose> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:45:12.257

```
<xsl:choose>
  <xsl:when test="contains(node,"STP")">
    <!-- action -->
  </xsl:when>
  <xsl:otherwise>
    <!-- alternative action -->
  </xsl:otherwise>
</xsl:choose> 
```

# android - 在第一个对话框中单击按钮显示第二个对话框关闭第一个对话框

> ID：14566593
> 
> 赞同：2
> 
> 时间：2013-01-28T16:31:36.997
> 
> 标签：android, dialog, onclicklistener

在我的应用程序中，我使用的`AlertDialog`是自定义视图。这个视图包含几个`EditText`s 和一些其他的东西。有一些附加到`EditText`s 的侦听器可以执行所需的任何功能。

在对话框的按钮单击上，我正在对输入到 s 中的数据执行一些验证，如果数据无效，则`EditText`显示另一个。`AlertDialog`一旦该（第二个）对话框关闭，我想保留在主对话框上（使用自定义视图），但由于某种原因，该对话框在我的第二个对话框显示之前关闭。如何在第二个对话框下保持原始（自定义视图）对话框仍然打开？

这是我的（简化的）代码：

```
final EntryPanel panel = new EntryPanel(OrderActivity.this);

AlertDialog dlg = new AlertDialog.Builder(OrderActivity.this)
    .setCancelable(true)
    .setView(panel)
    .setPositiveButton(R.string.button_ok, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            final int id = pePanel.getProductId();
            if(!isValidProduct(id)) {

                new AlertDialog.Builder(OrderActivity.this)
                    .setMessage(R.string.error_unknown_product)
                    .setCancelable(true)
                    .setPositiveButton(R.string.button_ok, new DialogInterface.OnClickListener() {

                        @Override
                        public void onClick(DialogInterface dlg2, int which) {
                            dlg2.cancel();

                        }
                    })
                    .show();
            }
            else {
                processProductEntry(id);
                dialog.dismiss();
            }
        }
    })
    .setNegativeButton(R.string.button_cancel, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
            dialog.cancel();
        }
    }).show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T22:27:23.720

因此，不可能同时打开两个对话框。因此，我将第一个对话框（带有自定义视图）更改为一个带有`theme`存在的活动`Theme.Dialog`- 它显示它应该的方式 - 然后从中打开第二个对话框。这样，当打开第二个对话框时，原始活动（看起来像一个对话框）在后台仍然可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:33:19.733

我有一个类似的问题，我就这样解决了：

```
public class PayDebtsDialogFragment extends DialogFragment implements OnClickListener
{
public interface OnDebtPayListener{
    void debtPayed(BalanceItem debt, double payedAmount);
    void badPayment(int errorCode);
}

private static final String LOG_TAG = "PayDebtsDialogFragment";
private static final int BAD_PARSING = -1;

private OnDebtPayListener onDebtPayListener;
private BalanceItem debtPayment;
private EditText etAmount;

public void setOnDebtPayListener(OnDebtPayListener onDebtPayListener) {
    this.onDebtPayListener = onDebtPayListener;
}

public BalanceItem getDebtPayment() {
    return debtPayment;
}

public void setDebtPayment(BalanceItem debtPayment) {
    this.debtPayment = debtPayment;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    builder.setView(getDialogLayout())
           .setTitle("Pay debt")
           .setNegativeButton("cancel", this)
           .setPositiveButton("pay", this);

    return builder.create();
}

@Override
public void onClick(DialogInterface dialog, int which) 
{
    if(which == DialogInterface.BUTTON_POSITIVE){
        if(onDebtPayListener != null){
            try {
                String strPayment = etAmount.getText().toString().trim();
                double payment = Double.valueOf(strPayment);
                Log.d(LOG_TAG, "debtPayed()");
                onDebtPayListener.debtPayed(debtPayment, payment);
            } catch (Exception e) {
                Log.d(LOG_TAG, "badPayment()", e);
                onDebtPayListener.badPayment(BAD_PARSING);
            }
        }else{
            Log.e(LOG_TAG, "onDebtPayListener is NULL");
        }
    }

    dismiss();
}

private View getDialogLayout()
{
    LayoutInflater inflater = getActivity().getLayoutInflater();
    View dialogLayout = inflater.inflate(R.layout.pay_debts_dialog_fragment, null);

    TextView tvPayer = (TextView) dialogLayout.findViewById(R.id.tvPayDebts_payer);
    tvPayer.setText(debtPayment.getPayer().getName() + " pays");

    etAmount = (EditText) dialogLayout.findViewById(R.id.etPayDebts_Amount);
    String hint = String.format(Locale.getDefault(), "Total debt: %.2f%s", debtPayment.getAmount(),
                                debtPayment.getCurrency());
    etAmount.setHint(hint);

    TextView tvReceiver = (TextView) dialogLayout.findViewById(R.id.tvPayDebts_Receiver);
    tvReceiver.setText("to " + debtPayment.getReceiver().getName());

    return dialogLayout;
}

} 
```

*   我使用了一个 DialogFragment 并用 2 个方法定义了我自己的监听器。
*   我在我的活动中实现了该接口。
*   当输入错误时，活动显示错误对话框（另一个对话框），当它关闭时，我再次显示第一个对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:34:19.157

我已经遇到了同样的问题并进行了很多搜索，但没有找到与此相关的任何内容。

所以，我只是在那里使用了一点技巧来满足我的要求。

首先我声明 AlertDialogs ：

```
AlertDialog.Builder subDialog,mainDialog; 
```

然后像这样使用hack：

```
 subDialog =  new AlertDialog.Builder(Activity2.this)
        .setMessage("New Dialog Opened") 
        .setCancelable(true)
        .setPositiveButton("Okay", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dlg2, int which) {
                dlg2.cancel();
                mainDialog.show();
            }
        });  

        mainDialog = new AlertDialog.Builder(Activity2.this)
        .setCancelable(true)
        .setMessage("First Dialog Opened")
        .setPositiveButton("Ok", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                subDialog.show();
            }
        })
        .setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
        });
        mainDialog.show(); 
```

我所做的是第二次打开子对话框的 ok 操作，我再次调用 MainDialog 的显示操作。

希望它会帮助你。

谢谢。

# java - 使用 NodeList 遍历 XML 中的所有元素

> ID：14566596
> 
> 赞同：34
> 
> 时间：2013-01-28T16:31:40.290
> 
> 标签：java, xml, parsing

我想遍历一段 XML 打印中的所有元素。我的问题是我在`staff1`标签之后不断收到一个空指针异常，即`john 465456433 gmail1 area1 city1`

这是我的 Java 代码，用于打印 xml 文件中的所有元素：

```
File fXmlFile = new File("file.xml");
DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
Document doc = dBuilder.parse(fXmlFile);

doc.getDocumentElement().normalize();

System.out.println("Root element :" + doc.getDocumentElement().getNodeName());

NodeList nList = doc.getElementsByTagName("*");

System.out.println("----------------------------");

Node n=null;
Element eElement=null;

for (int i = 0; i < nList.getLength(); i++) {           
  System.out.println(nList.getLength());     
  n= nList.item(i);                            
  System.out.println("\nCurrent Element :" + n.getNodeName());

  if (n.getNodeType() == Node.ELEMENT_NODE) {
    eElement = (Element) n.getChildNodes();
    System.out.println("\nCurrent Element :" + n.getNodeName());
    name = eElement.getElementsByTagName("name").item(i).getTextContent(); //here throws null pointer exception after printing staff1 tag
    phone = eElement.getElementsByTagName("phone").item(i).getTextContent();
    email = eElement.getElementsByTagName("email").item(i).getTextContent();
    area = eElement.getElementsByTagName("area").item(i).getTextContent();
    city = eElement.getElementsByTagName("city").item(i).getTextContent();
  }
  n.getNextSibling();
} 
```

XML 文件：

```
<?xml version="1.0"?>
<company>
  <staff1>
    <name>john</name>
    <phone>465456433</phone>
    <email>gmail1</email>
    <area>area1</area>
    <city>city1</city>
  </staff1>
  <staff2>
    <name>mary</name>
    <phone>4655556433</phone>
    <email>gmail2</email>
    <area>area2</area>
    <city>city2</city>
  </staff2>
  <staff3>
    <name>furvi</name>
    <phone>4655433</phone>
    <email>gmail3</email>
    <area>area3</area>
    <city>city3</city>
  </staff3>
</company> 
```

预期输出：

```
john
465456433
gmail1
area1
city1
mary
4655556433
gmail2
area2
city2
furvi
4655433
gmail3
area3
city3 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-01-28T16:48:50.520

```
 DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder();
    Document dom = db.parse("file.xml");
    Element docEle = dom.getDocumentElement();
    NodeList nl = docEle.getChildNodes();
    int length = nl.getLength();
    for (int i = 0; i < length; i++) {
        if (nl.item(i).getNodeType() == Node.ELEMENT_NODE) {
            Element el = (Element) nl.item(i);
            if (el.getNodeName().contains("staff")) {
                String name = el.getElementsByTagName("name").item(0).getTextContent();
                String phone = el.getElementsByTagName("phone").item(0).getTextContent();
                String email = el.getElementsByTagName("email").item(0).getTextContent();
                String area = el.getElementsByTagName("area").item(0).getTextContent();
                String city = el.getElementsByTagName("city").item(0).getTextContent();
            }
        }
    } 
```

遍历所有子节点并`nl.item(i).getNodeType() == Node.ELEMENT_NODE`用于过滤掉文本节点。如果 XML 中没有其他内容，那么剩下的就是人员节点。

对于东西下的每个节点（姓名、电话、电子邮件、地区、城市）

```
 el.getElementsByTagName("name").item(0).getTextContent(); 
```

`el.getElementsByTagName("name")`将提取东西下的“名称”节点， `.item(0)`将获得第一个节点并`.getTextContent()`获得其中的文本内容。

**编辑：** 因为我们有杰克逊，我会以不同的方式做到这一点。为对象定义一个 pojo：

```
public class Staff {
    private String name;
    private String phone;
    private String email;
    private String area;
    private String city;
...getters setters
} 
```

然后使用杰克逊：

```
 JsonNode root = new XmlMapper().readTree(xml.getBytes());
    ObjectMapper mapper = new ObjectMapper();
    root.forEach(node -> consume(node, mapper));

private void consume(JsonNode node, ObjectMapper mapper) {
    try {
        Staff staff = mapper.treeToValue(node, Staff.class);
        //TODO your job with staff
    } catch (JsonProcessingException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-06T12:14:10.280

```
public class XMLParser {
   public static void main(String[] args){
      try {
         DocumentBuilder dBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
         Document doc = dBuilder.parse(new File("xml input"));
         NodeList nl=doc.getDocumentElement().getChildNodes();

         for(int k=0;k<nl.getLength();k++){
             printTags((Node)nl.item(k));
         }
      } catch (Exception e) {/*err handling*/}
   }

   public static void printTags(Node nodes){
       if(nodes.hasChildNodes()  || nodes.getNodeType()!=3){
           System.out.println(nodes.getNodeName()+" : "+nodes.getTextContent());
           NodeList nl=nodes.getChildNodes();
           for(int j=0;j<nl.getLength();j++)printTags(nl.item(j));
       }
   }
} 
```

递归循环并打印出文档中的所有 xml 子标签，以防您不必更改代码来处理 xml 中的动态更改，前提是它是格式良好的 xml。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-10T13:36:37.640

这是使用 JDOM 循环遍历 XML 元素的另一种方法。

```
 List<Element> nodeNodes = inputNode.getChildren();
        if (nodeNodes != null) {
            for (Element nodeNode : nodeNodes) {
                List<Element> elements = nodeNode.getChildren(elementName);
                if (elements != null) {
                    elements.size();
                    nodeNodes.removeAll(elements);
                }
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-07T14:24:25.753

```
NodeList listaHijos = docEle.getChildNodes();
        listaHijos = listaHijos.item(2).getChildNodes();
        for (int i = 0; i < listaHijos.getLength(); i++) {
            eElement = (Element) listaHijos.item(i);
            n2 = eElement.getChildNodes();
            for (int j = 0; j < n2.getLength(); j++) {
                System.out.println("elem:" + n2.item(j).getNodeName() + " :" + n2.item(j).getTextContent() + "j" + j);
                if (n2.item(j).getNodeName().equals("detallesAdicionales")) {                                                                        
                    eElement = (Element) n2.item(j);
                    n6 = eElement.getChildNodes();
                    System.out.println("todo: " + n6.item(0).getAttributes().item(0) + n6.item(0).getAttributes().item(1));                        
                    System.out.println("todo2: " + n6.item(1).getAttributes().item(0) + n6.item(1).getAttributes().item(1));                        
                    System.out.println("todo3: " + n6.item(2).getAttributes().item(0) + n6.item(2).getAttributes().item(1));                        
                    System.out.println("nombre: " + n6.item(0).getAttributes().item(0).getTextContent());
                    System.out.println("valor: " + n6.item(0).getAttributes().item(1).getTextContent());
                }
            }
        } 
```

# sql - Hibernate 一对多连接两列

> ID：14566599
> 
> 赞同：1
> 
> 时间：2013-01-28T16:31:50.630
> 
> 标签：sql, hibernate, jpa

我有一个与以下内容非常相似的 SQL 查询：

```
select *
from parent p inner join child c on p.id = c.parent_id and c.type = 'PARENT_TYPE'; 
```

我正在尝试使用@One-To-Many 关联来定义我的实体映射，以便我可以加载父对象并自动加载子对象。我不知道该怎么做，是如何正确地注释我的实体，以便使用连接标准的第二部分（即`the c.type = 'PARENT_TYPE'`部分）正确地发生这种情况。我尝试使用[@FilterDef](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/filters.html) ，然后在会话上启用过滤器并且它有效，但它似乎不是最佳解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:39:57.663

如果您使用连接公式，您将失去其他能力（例如子选择查询获取优化）。为什么您要连接的两列不是键的一部分。引入由两列组成的嵌入式 id 类型并使用该类型连接。

# c++ - CHtmlEditCtrl：Windows 在 ShowWindow(SW_HIDE) 上被破坏

> ID：14566600
> 
> 赞同：1
> 
> 时间：2013-01-28T16:32:00.700
> 
> 标签：c++, mfc, activex, webbrowser-control

我已经派生了 CHtmlEditCtrl，并对其进行了很少的更改。到目前为止，我还没有覆盖任何方法。

问题是，当我在此控件上调用 ShowWindow(SW_HIDE) 时，窗口本身被破坏（m_hWnd 为 NULL）。由于 CHtmlEditCtrl 是 ActiveX 控件的包装器，因此我发现当我隐藏控件时，ActiveX 对象会被释放。

有没有一种方法可以在不调用 ShowWindow 的情况下隐藏此控件，或者有一种方法可以防止窗口被破坏？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T19:31:32.063

这是一个已知的错误：[BUG: WebBrowser Control Destroyed When Hidden](http://support.microsoft.com/kb/182111)。

解决方法：

```
::ShowWindow(m_ctlEditHtml.GetSafeHwnd(), SW_HIDE);             
::ShowWindow(m_ctlEditHtml.GetSafeHwnd(), SW_SHOW); 
```

# javascript - 来自函数的 jQuery data()

> ID：14566601
> 
> 赞同：0
> 
> 时间：2013-01-28T16:32:01.957
> 
> 标签：javascript, jquery

我使用一个函数设置 jQuery 对象的数据：

```
oTabSearch.data('search_data', collect_data()); 
```

有没有办法以某种方式重新计算这个数据片段，例如如果我从对象获取数据：

```
var search_data = oTabSearch.data('search_data'); 
```

它会首先使用函数设置'search_data'数据`collect_data()`然后返回它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:39:41.207

你可以这样做...

```
oTabSearch.data('search_data', collect_data);  // notice no parenthesis 
```

并运行该功能...

```
var search_data = oTabSearch.data('search_data')();  // notice the empty parenthesis 
```

这有效地将函数的副本存储为数据对象，然后在您请求时再次运行它。它不存储任何返回值。

这是一个示例 jsFiddle ...

[http://jsfiddle.net/Tr3zK/](http://jsfiddle.net/Tr3zK/)

单击“mydiv”查看数据值，因此再次调用该函数。

# magento - Magento - Magmi 导入：跳过 1 条记录

> ID：14566608
> 
> 赞同：0
> 
> 时间：2013-01-28T16:32:26.360
> 
> 标签：magento, csv, magento-1.4, magmi

我正在尝试让 Magmi（Magento 大规模进口商）工作。在测试安装中，我想导入带有一行标题和一个产品项的 CSV。我正在使用以下 CSV 代码：

```
“sku”；“名称”；“价格”；“数量”；“is_in_stock”；“可见性”；“图片”；“重量”；“类别”；“tax_class_id”
12333444;“T 恤白色小号。”;2.95;1;1;4;;“0.3”;“衬衫”;2

```

当我导入它时，我得到以下结果：

```
正在执行数据源查找...
找到 1 条记录，耗时 0.00013017654418945 秒
CSV 数据源 v1.2 - 找到 10 个 CSV 标题列
调整后的处理列：10

全球统计
导入的 Elapsed Recs/min Attrs/min Last 0.5%
1 件 (100%) 0.001 61863 618630 0.0008

数据库统计
请求经过的速度平均请求效率最后 0.5%   
1 0.0003 189360 请求/分钟 1/项目 30% 1 请求

发现 1 个警告：Skus 已导入 KO:1/1
运行时信息：Skus 导入 OK：0/1
跳过 1 条记录

```

所以什么都没有导入，我有点不知道为什么。CSV 不正确吗？我应该为商店添加列吗？我在哪里可以看到有关导入的错误报告？

* * *

解决方案

根据矮人的回答...

*   我删除了类别和 tax_class_id 列。
*   我使用最后一个版本。
*   我在运行导入时使用“创建新项目...”模式

尽管如此，它还是没有用。经过一番搜索，我添加了以下列：

*   store = admin（默认值）
*   attribute_set = ...（在管理员中搜索一个值）
*   类型 = 简单（简单产品）

现在导入工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:21:52.417

*   要处理“类别”列，您需要具有类别导入器的额外插件包。
*   tax_class_id 列应包含税类的标签（如数据流格式）
*   确保您使用的是最新的 magmi（0.7.18 beta 2 甚至更好，最新的 svn 快照）
*   如果 sku 在 magento 中不存在并且您想要创建它，请使用“创建新并更新现有模式”，它 sku 已经存在于 magento 中，那么“更新现有”导入模式就足够了。

# c++ - 纠正我的次优二分搜索

> ID：14566609
> 
> 赞同：0
> 
> 时间：2013-01-28T16:32:28.130
> 
> 标签：c++, performance, algorithm, optimization

我的二分搜索是为了在`std::vector`. 但是，在我看来，它执行了一个（或多个？）太多的比较来找到那个位置。特别是最后的三元。我设计错了吗？需要明确的是，我没有注意到输出中有任何错误。

```
template<typename T>
size_t find(std::vector<T> data, T value) //returns position value should be inserted at
{
 size_t start = 0;
 size_t end = data.size();

 if (!end) return 0;

 size_t diff;

 while (diff = (end - start) / 2)
 {
  size_t mid = diff + start;

  if (data[mid].value <= value)
  {
   start = mid;
  }
  else
  {
   end = mid;
  }
 }

 return data[start].value <= value ? end : start;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:43:45.037

在二分搜索中，您基本上有一个三向分支 `>`：`<`和`=`。如果没有两个比较运算符，就无法在 C++ 中编写此代码，但我希望任何体面的编译器都可以将它们优化为一条用于比较的机器指令，然后是结果的两个条件分支。

# sql-server - 一个月的几天

> ID：14566611
> 
> 赞同：1
> 
> 时间：2013-01-28T16:32:34.083
> 
> 标签：sql-server

我知道这听起来很荒谬……我知道……但我希望能够选择本月的前 7 天并得到这样的结果。

这就是我所拥有的：

```
SELECT row_number () OVER (ORDER BY DateD), *
  FROM (SELECT DATENAME (dw, GETDATE ()) AS 'DateName', getdate () AS 'DateD'
        联盟
        选择 DATENAME (dw, GETDATE () + 1) AS 'DateName',
               getdate () + 1 AS 'DateD'
        联盟
        选择 DATENAME (dw, GETDATE () + 2) AS 'DateName',
               getdate () + 2 AS 'DateD'
        联盟
        选择日期名称（dw，GETDATE（）+ 3）作为'日期名称'，
               getdate () + 3 AS 'DateD'
        联盟
        选择 DATENAME (dw, GETDATE () + 4) AS 'DateName',
               getdate () + 4 AS 'DateD'
        联盟
        选择日期名称（dw，GETDATE（）+ 5）作为'日期名称'，
               getdate () + 5 AS 'DateD'
        联盟
        选择 DATENAME (dw, GETDATE () + 6) AS 'DateName',
               getdate () + 6 AS 'DateD') 查询表

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:38:17.033

这是一个非常丑陋的查询，可以为您提供结果：

```
SELECT row_number () OVER (ORDER BY DateD), *
FROM 
(
    SELECT DATENAME (dw, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) AS 'DateName', 
        DATEADD(month, DATEDIFF(month, 0, getdate()), 0) AS 'DateD'
    UNION
    SELECT DATENAME (dw, DateAdd(day, 1, DATEADD(month, DATEDIFF(month, 0, getdate()), 0))) AS 'DateName',
           DateAdd(day, 1, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) AS 'DateD'
    UNION
    SELECT DATENAME (dw, DateAdd(day, 2, DATEADD(month, DATEDIFF(month, 0, getdate()), 0))) AS 'DateName',
           DateAdd(day, 2, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) AS 'DateD'
    UNION
    SELECT DATENAME (dw, DateAdd(day, 3, DATEADD(month, DATEDIFF(month, 0, getdate()), 0))) AS 'DateName',
           DateAdd(day, 3, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) AS 'DateD'
    UNION
    SELECT DATENAME (dw, DateAdd(day, 4, DATEADD(month, DATEDIFF(month, 0, getdate()), 0))) AS 'DateName',
           DateAdd(day, 4, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) AS 'DateD'
    UNION
    SELECT DATENAME (dw, DateAdd(day, 5, DATEADD(month, DATEDIFF(month, 0, getdate()), 0))) AS 'DateName',
           DateAdd(day, 5, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) AS 'DateD'
    UNION
    SELECT DATENAME (dw, DateAdd(day, 6, DATEADD(month, DATEDIFF(month, 0, getdate()), 0))) AS 'DateName',
           DateAdd(day, 6, DATEADD(month, DATEDIFF(month, 0, getdate()), 0)) AS 'DateD'
) queryTable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/d41d8/8121)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:38:20.107

这是获取`@n`当月天数的更简单方法。如果您需要它用于不同的月份，只需替换`GETDATE()`为表示您想要的月份内任何日期时间值的变量。

```
;WITH x AS 
(
  SELECT TOP (@n) n = ROW_NUMBER() OVER (ORDER BY [object_id])
  FROM sys.all_objects
),
y(d,n) AS
(
  SELECT DATEADD(DAY, n-1, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)),
   n FROM x
)
SELECT 
  RowNumber = n, 
  [Weekday] = DATENAME(WEEKDAY, d), 
  [Date_In_Ambiguous_Format] = CONVERT(CHAR(10), d, 101),
  [Date_In_Proper_DataType] = d
FROM y; 
```

请参阅此博客系列关于无循环且无重复代码的生成集：

[http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-1](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-1)
[http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a -set-2](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-2)
[http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-3](http://www.sqlperformance.com/2013/01/t-sql-queries/generate-a-set-3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:40:32.627

您可以使用此递归 CTE：

```
WITH dayscte ( d ) 
     AS (SELECT DATEADD(DAY, 0, DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0)) AS d 
         UNION ALL 
         SELECT Dateadd(d, 1, d) 
         FROM   dayscte 
         WHERE  Datepart(day, d) < 7)  -- number of days you want
SELECT d, 
       Datepart(wk, d) AS week_number, 
       Datename(dw, d) AS day_name, 
       Datename(m, d)  AS month_name, 
       Datename(q, d)  AS [quarter] 
FROM   dayscte 
OPTION (maxrecursion 800); 
```

[`Demo`](http://sqlfiddle.com/#!3/d41d8/8136/0)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:41:28.383

```
WITH Dates AS
(
    SELECT DATEADD(DAY, - (DATEPART(DAY, GETDATE()) - 1), CONVERT(VARCHAR, GETDATE(), 101)) as DateDay
    UNION ALL
    SELECT DateDay + 1
    FROM Dates
    WHERE DATEPART(DAY, DateDay) < 7
)

SELECT
    DATEPART(DAY, DateDay),
    DATENAME(DW, DateDay),
    DateDay
FROM Dates 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T16:49:12.133

使用 SQL Server，您可以查询 master..spt_values 以获取数字列表（不是完整的数字列表，但绝对是 1 到 7）：

```
SELECT 
   row_number () OVER (ORDER BY Number) as Row, 
   DATENAME (dw,CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(GetDate())-Number),GetDate()),101) ) AS DtName,
   CONVERT(VARCHAR, CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(GetDate())-Number),GetDate()),101), 101) As Dt
FROM (SELECT Number FROM master..spt_values WHERE Number BETWEEN 1 AND 7 AND Type = 'P') t 
```

只是另一种方法——玩得开心！这是[小提琴](http://sqlfiddle.com/#!3/d41d8/8152)。

祝你好运。

# iphone - 如何绘制填充颜色不是纯色而是图像的 MKCircle

> ID：14566614
> 
> 赞同：11
> 
> 时间：2013-01-28T16:32:41.910
> 
> 标签：iphone, objective-c, mkmapview, mkoverlay

我发现了如何在地图注释周围画一个 cricle。我这样做：

```
 MKCircle *circle = [MKCircle circleWithCenterCoordinate:theCoordinate radius:15000];
     [myMap addOverlay:circle];

 -(MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id)overlay
 {
    MKCircleView *circleView = [[MKCircleView alloc] initWithOverlay:overlay];
    circleView.fillColor =[UIColor redColor];

   return circleView;
} 
```

它工作正常，但我想画一个填充颜色不纯的圆圈，如下所示：

![在此处输入图像描述](../Images/ba54ae4fcef0e6a01f15eabdb766c7a9.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-03T16:35:22.660

使用 MKCircleRenderer 回答 iOS 7...

您应该继承 MKCircleRenderer，并覆盖该`fillPath:inContext`方法，类似于该问题的公认答案。例如

```
@implementation MKGradientCircleRenderer

- (void)fillPath:(CGPathRef)path inContext:(CGContextRef)context
{

    CGRect rect = CGPathGetBoundingBox(path);

    CGContextAddPath(context, path);
    CGContextClip(context);

    CGFloat gradientLocations[2] = {0.6f, 1.0f};
    // Start color white with 0.25 alpha,
    // End color green with 0.25 alpha
    CGFloat gradientColors[8] = {1.0f, 1.0f, 1.0f, 0.25f, 0.0f, 1.0f, 0.0f, 0.25f};
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, gradientColors, gradientLocations, 2);
    CGColorSpaceRelease(colorSpace);

    CGPoint gradientCenter = CGPointMake(CGRectGetMidX(rect), CGRectGetMidY(rect));
    CGFloat gradientRadius = MIN(rect.size.width, rect.size.height) / 2;

    CGContextDrawRadialGradient(context, gradient, gradientCenter, 0, gradientCenter, gradientRadius, kCGGradientDrawsAfterEndLocation);

    CGGradientRelease(gradient);

} 
```

然后在您的 MKMapView 委托中，实现以下方法...

```
-(MKOverlayRenderer *)mapView:(MKMapView*)mapView rendererForOverlay:(id<MKOverlay>)overlay {

    MKCircle * circle = (MKCircle *)overlay;

    MKGradientCircleRenderer * renderer = [[MKGradientCircleRenderer alloc] initWithCircle:circle];

    return renderer;

} 
```

这将允许您实现相同的效果，但使用 iOS 7 中可用的新方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-05T17:11:56.347

要绘制带有渐变的圆，您必须提供自己的注释视图类，因为现有的都不支持。你可以做的是你可以`- (void)fillPath:(CGPathRef)path inContext:(CGContextRef)context`覆盖`MKCircleView`. 下面是一些代码（未优化，带有硬编码的填充参数）可以帮助您入门：

```
@interface TWOGradientCircleView : MKCircleView
@end

@implementation TWOGradientCircleView

- (void)fillPath:(CGPathRef)path inContext:(CGContextRef)context
{
    CGRect rect = CGPathGetBoundingBox(path);

    CGContextAddPath(context, path);
    CGContextClip(context);

    CGFloat gradientLocations[2] = {0.6f, 1.0f};
    // Start color white with 0.25 alpha,
    // End color green with 0.25 alpha
    CGFloat gradientColors[8] = {1.0f, 1.0f, 1.0f, 0.25f, 0.0f, 1.0f, 0.0f, 0.25f};
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGGradientRef gradient = CGGradientCreateWithColorComponents(colorSpace, gradientColors, gradientLocations, 2);
    CGColorSpaceRelease(colorSpace);

    CGPoint gradientCenter = CGPointMake(CGRectGetMidX(rect), CGRectGetMidY(rect));
    CGFloat gradientRadius = MIN(rect.size.width, rect.size.height) / 2;

    CGContextDrawRadialGradient(context, gradient, gradientCenter, 0, gradientCenter, gradientRadius, kCGGradientDrawsAfterEndLocation);

    CGGradientRelease(gradient);
} 
```

要使用它，只需替换`MKCircleView`为`TWOGradientCircleView`：

```
- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id)overlay
{
    MKCircleView *circleView = [[TWOGradientCircleView alloc] initWithOverlay:overlay];

    return circleView;
} 
```

如果您想使用图像而不是绘制渐变，可以将上面的渐变绘制替换为图像绘制。由于放大会模糊图像，因此您应该禁用缩放，或者按照 Apple 在 WWDC10 的会话中展示的平铺图像（参见[此处](https://github.com/klokantech/Apple-WWDC10-TileMap)获取包含示例代码的存储库）。使用图案图像设置 a`UIColor`不适用于 15000 的半径（除非您使用非常非常大的图像；））。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-23T23:42:37.157

为了在 Swift 2.0 (iOS7+) 中实现该解决方案，我使用了以下解决方案

```
import Foundation
import MapKit

class TWOGradientCircleRenderer: MKCircleRenderer {

    override func fillPath(path: CGPath, inContext context: CGContext) {
        let rect:CGRect = CGPathGetBoundingBox(path)

        CGContextAddPath(context, path);
        CGContextClip(context);

        let gradientLocations: [CGFloat]  = [0.6, 1.0];
        let gradientColors: [CGFloat] = [1.0, 1.0, 1.0, 0.25, 0.0, 1.0, 0.0, 0.25];
        let colorSpace = CGColorSpaceCreateDeviceRGB();
        let gradient = CGGradientCreateWithColorComponents(colorSpace, gradientColors, gradientLocations, 2);

        let gradientCenter = CGPointMake(CGRectGetMidX(rect), CGRectGetMidY(rect));
        let gradientRadius = min(rect.size.width, rect.size.height) / 2;

        CGContextDrawRadialGradient(context, gradient, gradientCenter, 0, gradientCenter, gradientRadius, .DrawsAfterEndLocation);
    }
} 
```

在您的 MKMapViewDelegate 中，您需要添加

```
func mapView(mapView: MKMapView, rendererForOverlay overlay: MKOverlay) -> MKOverlayRenderer {
        if overlay is MKCircle {
            let circleRenderer = TWOGradientCircleRenderer(overlay: overlay)
            return circleRenderer
        } else {
            return MKOverlayRenderer()
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-30T21:12:40.783

您是否尝试将填充颜色设置为使用创建的颜色`[UIColor colorWithPatternImage:]`？

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-13T02:39:00.807

此答案适用于 Swift 3.0 / iOS 10。

```
class CircleRenderer: MKCircleRenderer {
    override func fillPath(_ path: CGPath, in context: CGContext) {
        let rect: CGRect = path.boundingBox
        context.addPath(path)
        context.clip()
        let gradientLocations: [CGFloat]  = [0.6, 1.0]
        let gradientColors: [CGFloat] = [1.0, 1.0, 1.0, 0.25, 0.0, 1.0, 0.0, 0.25]
        let colorSpace = CGColorSpaceCreateDeviceRGB()
        guard let gradient = CGGradient(colorSpace: colorSpace, colorComponents: gradientColors, locations: gradientLocations, count: 2) else { return }

        let gradientCenter = CGPoint(x: rect.midX, y: rect.midY)
        let gradientRadius = min(rect.size.width, rect.size.height) / 2
        context.drawRadialGradient(gradient, startCenter: gradientCenter, startRadius: 0, endCenter: gradientCenter, endRadius: gradientRadius, options: .drawsAfterEndLocation)
    }
} 
```

和覆盖委托方法：

```
func mapView(_ mapView: MKMapView, rendererFor overlay: MKOverlay) -> MKOverlayRenderer {
    let circleRenderer = CircleRenderer(overlay: overlay)

    return circleRenderer
} 
```

工作中的一个例子：

[![在此处输入图像描述](../Images/39dfc35f85266c067e68f448ac4c2968.png)](https://i.stack.imgur.com/1Ms1e.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-13T15:30:14.217

** 仅更新答案：

在 IOS 7 fillPath:inContext 被 MKCircleView 弃用。尝试改用 MKCircleRenderer。

[https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKOverlayPathRenderer_class/Reference/Reference.html#//apple_ref/occ/cl/MKOverlayPathRenderer](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKOverlayPathRenderer_class/Reference/Reference.html#//apple_ref/occ/cl/MKOverlayPathRenderer)

# java - 有人可以解释这个 switch 语句的行为吗？

> ID：14566620
> 
> 赞同：0
> 
> 时间：2013-01-28T16:33:13.553
> 
> 标签：java, switch-statement

为什么会这样，

```
public class Bar 
{
    public static void main(String[] args) 
    {
        int i = 1;

        switch(i)
        {
            case 0:
            case 1:
            case 2:
                System.out.println("Case 2 being executed");
                break;
            default:
                break;
        }
    }
} 
```

输出这个，

> 案例2正在执行

?

`2`当输入值显式时，如何输入输入值的 case 块`1`？请注意，我知道我可以通过`break`在 case 块中为 1 添加语句来避免这种行为。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T16:34:20.903

> 当输入值显式为 1 时，如何输入输入值为 2 的 case 块？

这种行为称为*失败，*这是初学者使用`switch-case`. 实际上，`case 1:`确实先执行。*但是，由于case 1*中没有`break`语句，因此您将继续执行下一个 case，直到找到语句。因此，它甚至会执行代码并因此执行输出。然后它在执行后中断，因为它遇到了中断。*`switch-case``break``case 2:``case 2`*

 *因此，将您的更改`swich-case`为： -

```
switch(i)
{
        case 0: break;
        case 1: break;
        case 2:
            System.out.println("Case 2 being executed");
            break;
        default:
            break;
} 
```

查看预期的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:41:32.563

switch 语句将遍历所有 case 块，直到它到达第一个 break 或 switch 语句的结尾。

因此，在您的情况下，它会执行所有块，直到它到达第二个块中的中断。

如果“0”和“1”块中有任何语句，这些语句也会被执行。

这种行为也非常有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:34:55.040

因为您没有在案例 1 之后休息，所以它使用案例 2 的逻辑。在每个 case 之后都需要一个 break 语句，否则编译器将进入下一行。*

# azure - 将自定义域映射到 Windows Azure CDN 不起作用

> ID：14566625
> 
> 赞同：0
> 
> 时间：2013-01-28T16:33:32.890
> 
> 标签：azure, azure-storage, azure-cdn

我创建了一个 Windows Azure Blob 存储并关联了一个 Windows Azure CDN 服务。
我将自定义域映射到 Azure CDN。为我的自定义域完成验证后，我创建了将 static.codeinstinct.pro 映射到 az412526.vo.msecnd.net 的 CNAME 记录。

结果，我有 3 个链接：
codeinstinct.blob.core.windows.net/test/trouble.gif
az412526.vo.msecnd.net/test/trouble.gif
static.codeinstinct.pro/test/trouble.gif

前 2 个链接有效，但最后一个链接无效（返回 400 'Bad request' 错误）。

我尝试获取自定义域的详细 DNS 名称。它看起来像：
;; 问题部分：
;static.codeinstinct.pro。在 CNAME 中
；；答案部分：
static.codeinstinct.pro。600 在 CNAME az412526.vo.msecnd.net 中。
;; 权威部门：
codeinstinct.pro。86399 在 NS ns01.parking.ru。
codeinstinct.pro。86399 在 NS ns11.parking.ru。

为什么它不工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T21:54:40.667

您需要在 Azure 门户中启用自定义域 - 请参阅[如何将 CDN 内容映射到自定义域](http://msdn.microsoft.com/en-us/library/windowsazure/gg680307.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:20:20.110

我删除了我创建的所有内容：自定义域（带有 CNAME 记录），然后是 Azure CDN enpoint。然后我重新创建了我删除的内容并且......所有工作！

# c++ - C中的编译时错误

> ID：14566627
> 
> 赞同：1
> 
> 时间：2013-01-28T16:33:42.513
> 
> 标签：c++, c, linux, cygwin

我正在编译一个 C 代码（**davinci_spi.c**）。对应的头文件如下：

```
davinci_spi.h:

    #ifndef _DAVINCI_SPI_H_
    #define _DAVINCI_SPI_H_

    struct davinci_spi_regs {
    dv_reg  gcr0;       /* 0x00 */
    dv_reg  gcr1;       /* 0x04 */
    dv_reg  int0;       /* 0x08 */
    dv_reg  lvl;        /* 0x0c */
    dv_reg  flg;        /* 0x10 */
    dv_reg  pc0;        /* 0x14 */
    dv_reg  pc1;        /* 0x18 */
    dv_reg  pc2;        /* 0x1c */
    dv_reg  pc3;        /* 0x20 */
    dv_reg  pc4;        /* 0x24 */
    dv_reg  pc5;        /* 0x28 */
    dv_reg  rsvd[3];
    dv_reg  dat0;       /* 0x38 */
    dv_reg  dat1;       /* 0x3c */
    dv_reg  buf;        /* 0x40 */
    dv_reg  emu;        /* 0x44 */
    dv_reg  delay;      /* 0x48 */
    dv_reg  def;        /* 0x4c */
    dv_reg  fmt0;       /* 0x50 */
    dv_reg  fmt1;       /* 0x54 */
    dv_reg  fmt2;       /* 0x58 */
    dv_reg  fmt3;       /* 0x5c */
    dv_reg  intvec0;    /* 0x60 */
    dv_reg  intvec1;    /* 0x64 */
    }; 
```

`（我认为剩余的文件代码并不重要，所以不包括它们）

当我试图编译**davinci_spi.c**我得到这个错误：

* * *

```
In file included from D:/android/android/myprojects/test1/jni/davinci_spi.c:32:
D:/android/android/myprojects/test1/jni/davinci_spi.h:6: error: expected specifier-qualifier-list before 'dv_reg' 
```

* * *

**注意：**我使用的是 cygwin（添加了 C/C++ 编译器），davinci_spi.c 是一个简单的 linux 驱动程序

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:36:12.447

我敢打赌 dv_reg 没有被定义。确保包含定义类型 dv_reg 的头文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:36:52.320

dv_reg 在哪里声明？我既看不到这种类型的定义，也看不到声明它的 .h 文件的包含。我建议跟踪定义此数据类型的位置并将此头文件包含到您的驱动程序文件中。

# css - 在字体上找不到 404

> ID：14566629
> 
> 赞同：0
> 
> 时间：2013-01-28T16:33:45.690
> 
> 标签：css, tomcat, fonts, http-status-code-404, font-face

http://[在此处插入 IP 地址]/cabinet/fonts/Cabin-Regular.ttf

加载资源失败：服务器响应状态为 404（未找到）

一切设置正确，字体在我的机器上工作，因为它在我的机器上找到安装的 Cabin 字体，但在服务器上找不到它。但是，我不知道如何让错误消息在远程部署中消失。

关于为什么无法访问 Web 服务器文件夹中的字体的任何想法？

```
| ip root
| | cabinet
| | | fonts<--fonts installed under this folder using Paul Irish recommended font-face    rules
| | | css<--css file pointing to the font-face is here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:50:36.043

答案与字体无关。提交时的 git -a 命令在终端中告诉我它正在添加文件，但无论出于何种原因，文件都没有上传到 git。一旦我们检查了 github 网页，我们可以看到它们不存在，并使用 eclipse 而不是终端强制它们。奇怪的。

# nsis - 如何使用 nsis 读取注册表显示名称

> ID：14566631
> 
> 赞同：0
> 
> 时间：2013-01-28T16:33:53.113
> 
> 标签：nsis

我正在尝试安装我使用 NSIS 安装程序创建的同一应用程序的多个实例，我所做的只是在安装时，我从用户那里获取应用程序描述，并使用应用程序名称和描述的组合设置应用程序的名称（比如说：我的应用程序（Desc 1）1.0.0.0）。这样每次用户安装新版本时，他都会输入不同的版本并安装新实例。但问题不在于将描述存储在哪里。卸载时我无法获得描述，因此我无法删除注册表。有什么最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:01:28.490

一个简单的选择是将其存储在卸载程序旁边的 .ini 文件中 ($instdir\uninst.ini)，然后使用 NSIS ini 函数将其读回卸载程序 ($exedir\uninst.ini)。

您还可以在 uninstaller.exe 的末尾嵌入数据（类似于如何实现[自定义安装程序](http://nsis.sourceforge.net/ReadCustomerData)）

# c# - 如何在使用托管 ODP.NET 时从 C# 查询 LDAP 以解析 Oracle TNS 主机名？

> ID：14566632
> 
> 赞同：9
> 
> 时间：2013-01-28T16:33:54.143
> 
> 标签：c#, oracle, ldap, directoryentry, tnsnames

继我之前的[问题之后，我](https://stackoverflow.com/questions/14561952)[在 Oracle 论坛](https://community.oracle.com/message/10819895#10817895)的帮助下设法回答了自己，我现在有另一个问题，该问题是上一个问题的后续问题（提供背景）。

我希望直接从我的 C# 代码中查询 LDAP，以执行 Oracle TNS 主机名的 LDAP 查找，以获取连接字符串。这通常存储在**tnsnames.ora**中，我的组织使用 LDAP（通过**ldap.ora**）从使用 Active Directory 的 LDAP 服务器解析主机名。

但是，我在我的 C# 应用程序中使用[ODP.NET、托管驱动程序 Beta](http://www.oracle.com/technetwork/topics/dotnet/index-085163.html) ( **Oracle.ManagedDataAccess.dll )，正如我之前提到的**[Oracle 论坛回复](https://community.oracle.com/message/10819895#10817895)所指向的[发行说明](http://www.oracle.com/technetwork/database/windows/downloads/odpmbetainstall-1696475.html)中提到的那样，它不支持 LDAP 。这就是为什么我希望直接从 C# 查询 LDAP。

我在[这里](https://stackoverflow.com/questions/6452531)找到了一种使用`DirectoryEntry`and的方法`DirectorySearcher`，但我不知道将什么作为参数放入`DirectorySearcher`. 我可以访问以下格式的**ldap.ora ：**

> # LDAP.ORA 配置
> # 由 Oracle 配置工具生成。
> DEFAULT_ADMIN_CONTEXT = "dc=xx,dc=mycompany,dc=com"
> DIRECTORY_SERVERS = (ldap_server1.mycompany.com:389:636,ldap_server2.mycompany.com:389:636, ...) DIRECTORY_SERVER_TYPE = OID

但是，如何将其映射到在我的 C# 代码中设置 LDAP 查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:43:56.310

继我在[接受的答案](https://stackoverflow.com/a/14569342/197591)中的第二条评论之后，这是执行 LDAP 查找的代码，它改进了我在[此处](http://www.codeproject.com/Articles/472540/Alternative-tnsping-utility)找到的原始版本。它还处理**ldap.ora**文件中包含多个分隔端口号的服务器列表。

```
private static string ResolveServiceNameLdap(string serviceName)
{
    string tnsAdminPath = Path.Combine(@"C:\Apps\oracle\network\admin", "ldap.ora");
    string connectionString = string.Empty;

    // ldap.ora can contain many LDAP servers
    IEnumerable<string> directoryServers = null;

    if (File.Exists(tnsAdminPath))
    {
        string defaultAdminContext = string.Empty;

        using (var sr = File.OpenText(tnsAdminPath))
        {
            string line;

            while ((line = sr.ReadLine()) != null)
            {
                // Ignore commetns
                if (line.StartsWith("#"))
                {
                    continue;
                }

                // Ignore empty lines
                if (line == string.Empty)
                {
                    continue;
                }

                // If line starts with DEFAULT_ADMIN_CONTEXT then get its value
                if (line.StartsWith("DEFAULT_ADMIN_CONTEXT"))
                {
                    defaultAdminContext = line.Substring(line.IndexOf('=') + 1).Trim(new[] {'\"', ' '});
                }

                // If line starts with DIRECTORY_SERVERS then get its value
                if (line.StartsWith("DIRECTORY_SERVERS"))
                {
                    string[] serversPorts = line.Substring(line.IndexOf('=') + 1).Trim(new[] {'(', ')', ' '}).Split(',');
                    directoryServers = serversPorts.SelectMany(x =>
                    {
                        // If the server includes multiple port numbers, this needs to be handled
                        string[] serverPorts = x.Split(':');
                        if (serverPorts.Count() > 1)
                        {
                            return serverPorts.Skip(1).Select(y => string.Format("{0}:{1}", serverPorts.First(), y));
                        }

                        return new[] {x};
                    });
                }
            }
        }

        // Iterate through each LDAP server, and try to connect
        foreach (string directoryServer in directoryServers)
        {
            // Try to connect to LDAP server with using default admin contact
            try
            {
                var directoryEntry = new DirectoryEntry("LDAP://" + directoryServer + "/" + defaultAdminContext, null, null, AuthenticationTypes.Anonymous);
                var directorySearcher = new DirectorySearcher(directoryEntry, "(&(objectclass=orclNetService)(cn=" + serviceName + "))", new[] { "orclnetdescstring" }, SearchScope.Subtree);

                SearchResult searchResult = directorySearcher.FindOne();

                var value = searchResult.Properties["orclnetdescstring"][0] as byte[];

                if (value != null)
                {
                    connectionString = Encoding.Default.GetString(value);
                }

                // If the connection was successful, then not necessary to try other LDAP servers
                break;
            }
            catch
            {
                // If the connection to LDAP server not successful, try to connect to the next LDAP server
                continue;
            }
        }

        // If casting was not successful, or not found any TNS value, then result is an error message
        if (string.IsNullOrEmpty(connectionString))
        {
            connectionString = "TNS value not found in LDAP";
        }
    }
    else
    {
        // If ldap.ora doesn't exist, then return error message
        connectionString = "ldap.ora not found";
    }

    return connectionString;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:05:47.800

为了让您开始，请尝试：

```
using System.DirectoryServices;
...

DirectoryEntry de = new DirectoryEntry();
de.Username = "username@mysite.com";
de.Password = "password";
de.Path = "LDAP://DC=mysite,DC=com";
de.AuthenticationType = AuthenticationTypes.Secure;
DirectorySearcher des = new DirectorySearcher(de); 
```

现在您应该能够使用此处描述的 DirectorySearcher（过滤器、findone 等）点击[ldap](http://msdn.microsoft.com/en-us/library/system.directoryservices%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T19:11:04.103

根据我在[Oracle Database Name Resolution with OpenLDAP](http://www.idevelopment.info/data/Oracle/DBA_tips/LDAP/LDAP_8.shtml)中找到的内容来看，代码应该如下所示：

```
string directoryServer = "ldap_server1.mycompany.com:389";
string defaultAdminContext = "dc=xx,dc=mycompany,dc=com";
string oracleHostEntryPath = string.Format("LDAP://{0}/cn=OracleContext,{1}", directoryServer, defaultAdminContext);

var directoryEntry = new DirectoryEntry(oracleHostEntryPath) {AuthenticationType = AuthenticationTypes.None};
var directorySearcher = new DirectorySearcher(directoryEntry, "(&(objectclass=orclNetService)(cn=ABCDEFG1))", new[] { "orclnetdescstring" }, SearchScope.Subtree);

string oracleNetDescription = Encoding.Default.GetString(des.FindOne().Properties["orclnetdescstring"][0] as byte[]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-16T05:34:38.467

这里是基于其他答案的更完整的示例：

```
using System;
using System.Data;
using System.DirectoryServices;
using System.Text;
using Oracle.ManagedDataAccess.Client;

namespace BAT
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            string directoryServer = "myServer:389";
            string defaultAdminContext = "cn=OracleContext,dc=world";
            string serviceName = "MYDB";
            string userId = "MYUSER";
            string password = "MYPW";

            using (IDbConnection connection = GetConnection(directoryServer, defaultAdminContext, serviceName, userId,
                    password))
            {
                connection.Open();

                connection.Close();
            }

        }

        private static IDbConnection GetConnection(string directoryServer, string defaultAdminContext,
            string serviceName, string userId, string password)
        {
            string descriptor = ConnectionDescriptor(directoryServer, defaultAdminContext, serviceName);
            // Connect to Oracle
            string connectionString = $"user id={userId};password={password};data source={descriptor}";

            OracleConnection con = new OracleConnection(connectionString);
            return con;
        } 

        private static string ConnectionDescriptor(string directoryServer, string defaultAdminContext,
            string serviceName)
        {
            string ldapAdress = $"LDAP://{directoryServer}/{defaultAdminContext}";
            string query = $"(&(objectclass=orclNetService)(cn={serviceName}))";
            string orclnetdescstring = "orclnetdescstring";

            DirectoryEntry directoryEntry = new DirectoryEntry(ldapAdress, null, null, AuthenticationTypes.Anonymous);
            DirectorySearcher directorySearcher = new DirectorySearcher(directoryEntry, query, new[] { orclnetdescstring },
                SearchScope.Subtree);

            SearchResult searchResult = directorySearcher.FindOne();
            byte[] value = searchResult.Properties[orclnetdescstring][0] as byte[];

            if (value != null)
            {
                string descriptor = Encoding.Default.GetString(value);
                return descriptor;
            }

            throw new Exception("Error querying LDAP");
        }
    }
} 
```

# symfony - Symfony2 错误中的 Doctrine 查询生成器：“无效的 PathExpression。必须是 StateFieldPathExpression”

> ID：14566637
> 
> 赞同：2
> 
> 时间：2013-01-28T16:34:15.217
> 
> 标签：symfony, doctrine-orm, query-builder

当我尝试使用此查询时：

```
$repository = $this->getDoctrine()
                    ->getRepository('AcmeCommentoBundle:Commento');
                    $query = $repository->createQueryBuilder('p')
                            ->select('DISTINCT p.user')
                            ->where('p.annuncio = :annuncio')
                            ->setParameter('annuncio', $annuncio)
                            ->getQuery();

                    $utenti = $query->getResult(); 
```

它返回此错误：

```
[Semantical Error] line 0, col 18 near 
    'user FROM Acme\CommentoBundle\Entity\Commento': 
     Error: Invalid PathExpression. Must be a StateFieldPathExpression. 
```

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:33:14.403

解决了

```
$query = $repository->createQueryBuilder('p')
                        ->distinct('p.user')
                        ->where('p.annuncio = :annuncio')
                        ->setParameter('annuncio', $annuncio)
                        ->getQuery(); 
```

# .net - 实体固件 Web 服务将未公开的字段更新为空

> ID：14566644
> 
> 赞同：0
> 
> 时间：2013-01-28T16:34:25.443
> 
> 标签：.net, web-services, entity-framework, entity

我有一个从 JavaScript 调用的 Web 服务。JS 传递一个对象，该对象稍后被强制转换为服务器中的 Entity 对象。问题是实体中的某些字段在传递的 JSON 中不存在。这些不存在的字段在数据库中更新为空值。

例如，您有一个带有密码字段的客户表。密码未公开，也未从 Web 服务对象中检索。但是当我更新客户行密码设置为空。有没有办法告诉 EF 不要更改密码字段？

我本可以手动复制这些字段，但我正在尝试制作一个网页来自动保存我想要的字段。这是使用的一些代码。T 对于实体​​类是通用的。

```
 private ObjectContext _context;
    private IObjectSet<T> _objectSet;

    protected abstract ObjectContext getObjectContext();

    private ObjectContext prepareObjectContext()
    {
        _context = getObjectContext();
        _objectSet = _context.CreateObjectSet<T>();
        return _context;
    }

    [HttpPost]
    public override ActionResult Save(SavedData data)
    {
        using (ObjectContext oc = prepareObjectContext())
        {

            if (data.inserted != null && data.inserted.Count > 0)
            {
                foreach (T row in data.inserted)
                {
                    _objectSet.AddObject(row);
                    _context.ObjectStateManager.ChangeObjectState(row, System.Data.EntityState.Added);
                }
            }

            if (data.updated != null && data.updated.Count > 0)
            {
                foreach (T row in data.updated)
                {
                    _objectSet.Attach(row);
                    _context.ObjectStateManager.ChangeObjectState(row, System.Data.EntityState.Modified);
                }
            }

            if (data.deleted != null && data.deleted.Count > 0)
            {
                foreach (T row in data.deleted)
                {
                    _objectSet.Attach(row);
                    _objectSet.DeleteObject(row);
                    _context.ObjectStateManager.ChangeObjectState(row, System.Data.EntityState.Deleted);
                }
            }

            oc.SaveChanges();

            //CMManagement.Models.CMEntities
            ViewBag.columns = Columns;
            return Json(false);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:07:38.677

如果您附加一个实体并将其状态设置为已修改，所有字段都将被更新。原因是 EF 不知道哪些字段真正发生了变化。如果您的页面仅发布部分字段，您必须明确告诉 EF 您要更新哪些字段：

```
if (data.updated != null && data.updated.Count > 0) {
    foreach (T row in data.updated) {
        _objectSet.Attach(row);
        var entry = _context.ObjectStateManager.GetObjectStateEntry(row);
        foreach (string property in PropertiesToBeUpdated) {
            entry.SetModifiedProperty(property);
        }
    }
} 
```

# java - 在java中对键/值列表进行排序的最快方法

> ID：14566652
> 
> 赞同：1
> 
> 时间：2013-01-28T16:34:37.957
> 
> 标签：java, list, sorting

我遇到了以下情况：

我有一个未排序的键列表和一个不同的字符串术语列表。两者都以某种方式连接，这意味着它看起来有点像这样：

```
1 contents
5 term
2 queue
etc. 
```

这个列表现在包含 1000 多个条目，我想找到一种快速的方法来按降序对这两个列表进行排序，但当然我需要与字符串的持久连接。

```
5 term
2 queue
1 contents 
```

我想过将键和值放在 TreeMap 中，但问题是，可能存在重复的键，我想保留它们。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:37:04.330

创建一个包含这对值的类。

使其扩展`Comparable`。

实施`compareTo()`，使其按数字排序。

使用 API 中已有的任何排序方法（Arrays.sort 或 a `SortedSet`）。

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:39:55.583

使用`TreeMap`with`IntegerComparator`实现如下：

```
class IntegerComparator implements Comparator<Integer> {
   public int compare(Integer one, Integer two) {
        return two - one;
   }
} 
```

# ios - 内在弱引用与非内在弱引用？

> ID：14566653
> 
> 赞同：0
> 
> 时间：2013-01-28T16:34:37.843
> 
> 标签：ios, objective-c, cocos2d-iphone

```
@interface ....
/* will be the next 'runningScene' in the next frame
     nextScene is a weak reference. */
    CCScene *nextScene_;
@end
@implementation .......
-(void) replaceScene: (CCScene*) scene
{
    NSAssert( scene != nil, @"Argument must be non-nil");

    NSUInteger index = [scenesStack_ count];

    sendCleanupToScene_ = YES;
    [scenesStack_ replaceObjectAtIndex:index-1 withObject:scene];
    nextScene_ = scene; // nextScene_ is a weak ref
}

- (void) pushScene: (CCScene*) scene
{
    NSAssert( scene != nil, @"Argument must be non-nil");

    sendCleanupToScene_ = NO;

    [scenesStack_ addObject: scene];
    nextScene_ = scene; // nextScene_ is a weak ref
}
@end 
```

那些日子我很喜欢在 ubuntu 上移植 cocos2d（名为 cocostep）。当我深入研究“CCdirector.m”的 cocos2d 源代码并观察到“它是弱引用”评论的几个点时，我发现了一些有趣的事情。因为我对objective-c、ios、osx的了解。一个 ref 很弱，必须在 __weak 关键字之前，但我确实没有在整个项目中找到任何东西。所以我想这有点非内在的弱引用，只是 cocos2d 设计师的策略。根据我的假设。如果某个变量作为弱引用（非内在）被调用释放，并在其他地方释放其内存，那么对该引用的后续调用将失败，甚至崩溃，因为引用的值不是 nil 而是对该内存的无效引用。为了正确使用策略，我必须手动将该变量重置为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:14:47.070

Cocos2d 不使用 ARC。任何在注释中标记为弱的引用都是非保留引用。这意味着如果引用被释放并且没有手动设置为零，则引用可能指向无效的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:09:00.483

你的猜测是对的。

Cocos2d 不使用 ARC，所以当他们说`weak`这不是`weak`正确的 ARC 意义时。

这些变量的正确术语是`unsafe_unretained`，这意味着不保留**也不**自动取消。

此类变量可能是悬空指针，因此您最好注意这一点并尽快手动将其无效。

# visual-studio - 有没有更简单的方法将公共命名空间添加到 XAML？

> ID：14566654
> 
> 赞同：2
> 
> 时间：2013-01-28T16:34:39.520
> 
> 标签：visual-studio, xaml, visual-studio-2012

我很好奇是否有一种更简单的方法可以在 XAML 中添加或管理命名空间。我向我创建的几乎每个窗口和控件添加了一些相同的名称空间，并且我已经养成了在创建后复制和粘贴文本块的习惯。例如，我通常会在每个窗口中添加以下内容：

```
xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d" 
```

可以更改新窗口的默认命名空间吗？还是有一个很好的扩展来管理命名空间？VS2012中没有更多的宏，有没有办法使用其他形式的热键或快捷方式来实现这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:44:49.350

您可以自定义相应的 VS 模板以满足您的需要。

我没有准备好 VS2012 的位置（这台机器上只有 2012 Express），但你应该很容易为你的 VS 版本找到它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:50:38.440

> 是否有一个很好的扩展来管理命名空间？

Resharper 会做到这一点。

# html - 我怎样才能完美地对齐呢？

> ID：14566656
> 
> 赞同：0
> 
> 时间：2013-01-28T16:34:39.913
> 
> 标签：html, css

演示：http: [//jsfiddle.net/CtCuk/10/](http://jsfiddle.net/CtCuk/10/)

如果你看一下演示，“这里是新闻”部分是折叠的。

但是，我希望这部分垂直位于中间，并且一直向右。
然后，如果窗口大小变窄，它应该开始折叠字符。

是否可以？

HTML

```
<div class="top_page">
    <div class='container-general'>
        <div class="annouce-row">    
            <div class='title'>
                New
            </div>
            <div class='announcement'>
                Here is News
            </div>
        </div>
    </div>
</div> 
```

CSS

```
.top_page{
    width: auto;
    max-width: 900px;
    margin: 50px auto 20px;
}

.annouce-row {
    width: 800px;
}

.annouce-row div {
    width: 100px;
   display: inline-block;
}

.title {
    padding: 20px 10px;
    background-color: rgb(123, 0, 218);
    border-top-left-radius: 6px;
    border-bottom-left-radius: 6px;
    margin: 1px;
    color: rgb(255, 255, 255);
    font-size: 22px;
    width: 70px;
}

.announcement {
    font-size: 24px;
    font-weight: 200;
    color: rgb(0, 174, 218);
    margin-left: 0px;
    width: 600px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:39:15.513

去掉这个 100px 的宽度，文本将保持在同一行

```
.annouce-row div {
   width: 100px;    /*this line*/
   display: inline-block;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:45:38.817

您是否尝试过添加：

```
display:table-cell;
vertical-align:middle; 
```

到.announcement？除了 IE 6 和 7 之外的所有版本都支持这一点。

但是，您可能想在决定这条路线之前[阅读此内容。](http://phrogz.net/css/vertical-align/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:51:36.380

我认为他需要宽度为 100px，所以只需添加：

```
.annouce-row div {
    width: 100px;
    display: inline-block;
    vertical-align: middle; //this!
} 
```

# powershell - 有什么方法可以引用管道中的前一个对象吗？

> ID：14566660
> 
> 赞同：3
> 
> 时间：2013-01-28T16:35:04.613
> 
> 标签：powershell, powershell-2.0

在下面的代码中，有没有办法从第三段引用第二段中的当前对象？

```
`$a = "one", "two", "three"`
`$a | % {$_ -replace "t","x" } | % { $_ }` 
```

稍微不同地解释一下，我希望能够`| % { "$_.$_ : $_" }`在第三个管道段中使用类似的东西来获得这个输出：

```
one: one
two: xwo
three: xhree 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:35:04.613

这是迄今为止我找到的唯一解决方案。有更好的选择吗？

```
$a = "one", "two", "three"
$a | % { $i = $_; $_ -replace "t","x" } | % { "$i : $_" } 
```

输出：

```
one : one
two : xwo
three : xhree 
```

# c++ - 调整动态数组c ++的大小

> ID：14566665
> 
> 赞同：0
> 
> 时间：2013-01-28T16:35:16.130
> 
> 标签：c++, pointers

我目前正在处理一项任务，您应该从文件中读取球体。来自文件的典型输入可能如下所示：“0.182361 -0.017057 0.129582 0.001816”。表示 x、y 和 z 坐标加上球体半径。在阅读文件时，我正在使用我自己的方法：“AddSphere”，它将一个球体添加到一个数组中。

```
void Array::AddSphere(MySphere inp)
{
if (length == 10000 || length == 200000 || length == 30000)
{
    ResizeBuffer(); 
}
this->length++;
*arr = inp;
arr++;
//this->length++;
} 
```

“Array”类应该像所有球体的持有者，并且包含指向当前元素的变量“arr”。

```
 class Array
    {
    public :

    int length;
    void AddSphere(MySphere inp);
    int arrLength();
    void RemoveAt(int pos);
    void AddFromFile();
    MySphere * Buffer;
    void CreatenewBuffer();
    private:
    MySphere * arr;

    public:Array()
       {
           Buffer = new MySphere[10000];
           arr = Buffer;
           length = 0;
       }
       ~Array()
       {
           delete[] arr;
           delete[] Buffer;
       }
}; 
```

它还包含指向“arr”中第一个元素的“Buffer”。那么现在我的问题是什么？问题是我希望能够在“长度”等于指定值时动态增加缓冲区的大小。假设我的文件包含 15000 个元素。然后我需要增加缓冲区大小以便能够在数组上具有正确的长度。使用 ResizeBuffer() 我尝试这样做。

```
 void Array::ResizeBuffer()
{

    MySphere * tempBuff = new MySphere[length+10000];
    memcpy(tempBuff, Buffer, sizeof((MySphere)*Buffer));
    this->Buffer = new MySphere[length+10000];
    arr = Buffer;
    memcpy(Buffer, tempBuff, sizeof((MySphere)*tempBuff));

    //int a = 0;

    } 
```

但由于某种原因，我只得到了输出中的最后 5000 个元素，而不是全部 15000 个。我认为这与 arr 的指针没有指向整个缓冲区有关，但我的尝试都没有奏效。那么为什么会这样呢？

感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:44:45.963

几个问题：

动态数据只分配一次（尽管您有两个指向该区域的指针）。

```
Array()
   {
       Buffer = new MySphere[10000];
       arr = Buffer;
       length = 0;
   } 
```

所以你只能删除一次（一次分配一次销毁）。

```
 ~Array()
   {
       delete[] arr;
       delete[] Buffer;  // Double delete.
   } 
```

复制对象时不能使用 memcpy（除非对象属于非常特殊的子类别）。如果您打算将 C++ 与方法及其所有其他功能一起使用，则不太可能出现这种情况。更喜欢使用 std::copy() 将内容从一个数组复制到另一个数组。

```
MySphere * tempBuff = new MySphere[length+10000];
memcpy(tempBuff, Buffer, sizeof((MySphere)*Buffer));
this->Buffer = new MySphere[length+10000];
arr = Buffer;
memcpy(Buffer, tempBuff, sizeof((MySphere)*tempBuff)); 
```

另外，为什么要复制两次？

注意除了使用 std::copy
调整大小应该在三个不同的阶段发生。

```
1\. Allocate and copy data       // Dangerous may throw
2\. Reset object                 // Safe
3\. Release old resources.       // Dangerous may throw 
```

所以这就是它应该的样子。

```
// Phase 1: Allocate and copy.
std::unique_ptr<MySphere> tempBuffer = new MySphere[length+1000];   // Hold in a smart pointer
                                                                    // For exception safety
// Prefer to use std::copy. It will use the objects copy constructor
std::copy(Buffer, Buffer+length, MySphere);                         // Copies the objects correctly. 

// Everything worked so Phase 2\. Reset the state of the object.
// We can now put the tempBuffer into the object
MySphere* toDelete = Buffer;                                        // keep old buffer for stage 3.
Buffer = tempBuffer.release();
length += 1000;

// Phase 3
// State of the new object is consistent.
// We can now delete the old array
delete [] toDelete; 
```

如果不允许使用智能指针。然后将阶段 1 替换为：

```
// Phase 1: Allocate and copy.
MySphere* tempBuffer = new MySphere[length+1000];

try                                                 // For exception safety
{
    // Prefer to use std::copy. It will use the objects copy constructor
    std::copy(Buffer, Buffer+length, MySphere);     // Copies the objects correctly. 
}
catch(...)
{
    delete [] tempBuffer;
    throw;
} 
```

由于您的类已获得动态分配对象的所有权。你的班级也应该实施三法则。这意味着您需要定义复制构造函数和赋值运算符。

您真正需要动态数组的是三件事：

```
 1) A pointer to the buffer.
    2) The current size the user knows about (reported by size)
    3) The actual size. At which point you need to resize 
```

下面是一个如何为数组实现三规则的示例：

[https://stackoverflow.com/a/255744/14065](https://stackoverflow.com/a/255744/14065)

其他任何事情都是多余的。

在您的情况下是不必要的，因为这是一个项目。但是对于额外的标记，请查看如何使用放置新。这应该可以防止对数组中不存在的对象进行额外的初始化。

如何使用 place new 的示例：

[https://stackoverflow.com/a/13994853/14065](https://stackoverflow.com/a/13994853/14065)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:37:00.313

这个怎么样？

```
void Array::CreatenewBuffer()
{
    MySphere * tempBuff = new MySphere[length+10000];
    std::copy ( Buffer, Buffer+length, tempBuff );
    delete[]Buffer;
    Buffer = tempBuff;
    delete[]tempBuff;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:43:48.633

您没有在 Array::CreatenewBuffer() 函数中更新长度变量。

我假设你在哪里迭代你可能有这样的对象......

```
for (size_t i = 0; i < Array.length; ++i)
    printf("Item found"); 
```

现在回想起来，您使用长度的方式实际上相当混乱。您可能希望将其分成两个变量：大小和容量。容量是当前分配的缓冲区可以容纳的对象数量，大小是实际添加到缓冲区的对象数量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:44:49.287

每个球体的值是否在单独的行中输入？如果是这样，您可以简单地计算行数，然后使用正确的值初始化缓冲区。

# java - 如何从 Java 中的线程调用 invokeLater 方法？

> ID：14566667
> 
> 赞同：1
> 
> 时间：2013-01-28T16:35:23.167
> 
> 标签：java, multithreading, swing, inheritance, composition

好的，这是我的问题：

我正在尝试为我的一个项目构建一个自定义下载帮助程序。我希望我的实现允许多次下载（同时运行），所以我认为我应该为每次下载启动一个线程。

但是，问题是我还想更新程序的 GUI。为此，我想使用 invokeLater() 方法，因为 Swing 不是线程安全的。

现在：如果我在每个线程中使用 invokeLater() 方法来更新进度条，线程如何知道我的 GUI？请让我知道您对这种方法的看法以及您将如何解决此问题。

请同时考虑这一点：

```
public class frame extends JFrame {
    public frame() {
        //the constructor sets up the JProgressBar and creates a thread object
    }

    public void getFiles() {
        // Here I would start the thread.
        thread.start();
    }
} 
```

这是另一个设置线程的类：

```
public class theThread extends Thread {
    // Here I would create the thread with its constructor 

    public void run() {
        // Here comes some code for the file download process
        //
        // While the thread is running the method below gets called.
        updateGUI();
    }

    public void updateGUI() {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                // Here I need to place the code to update the GUI
                // However, this method has no idea of what the GUI looks like
                // since the GUI was setup in the class 'frame'.
            }
        });
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:39:39.993

您可以有一个将框架作为参数的构造函数：

```
public class TheThread extends Thread {
    private final JFrame frame;

    public TheThread(Runnable r, JFrame frame) {
        super(r);
        this.frame = frame;
    }
} 
```

现在您可以`frame.doSomething();` 从您的`updateGUI`方法中调用。

请注意，实施通常`Runnable`比扩展更好`Thread`。

或者，您可以使用[SwingWorkers](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)，它旨在处理您所描述的情况（更新 UI 的后台线程）。

# codeigniter - $route['(:any)'] = 'pages/view/$1'; 是什么意思？在 Codeigniter 路由器中的意思

> ID：14566668
> 
> 赞同：9
> 
> 时间：2013-01-28T16:35:24.767
> 
> 标签：codeigniter

在 Codeigniter 的文档中[https://www.codeigniter.com/user_guide/tutorial/static_pages.html](https://www.codeigniter.com/user_guide/tutorial/static_pages.html)

我无法理解`$1`表达的意思 `$route['(:any)'] = 'pages/view/$1';`

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T23:33:17.700

`$route['(:any)'] = 'pages/view/$1';` 意味着您在 url 上键入的任何内容都将转到`pages/view/$1`这里`$1`是您要传递给控制器​​/方法示例的参数

`$route['login/(:any)'] = 'home/bacon/$1';`

在这个例子中，你告诉 CI 任何`login`与任何参数类似的东西都`login/john`将继续你`home/bacon/john` `(:any)`将匹配所有字符串和整数，如果你使用`(:num)`它只会匹配整数参数，比如

`$route['login/(':num')'] = 'home/bacon/$1'`

在此配置中，您指定如果 url`login`在它之后有一个整数 like ，如果您不知道要传递多少个参数 `login/1234`，您希望它重定向到您可以尝试 更多可以在 [https 上阅读： //www.codeigniter.com/user_guide/general/routing.html](https://www.codeigniter.com/user_guide/general/routing.html)`home/bacon/1234``$route['login/(:any).*'] = 'home/bacon/$1'`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-28T16:56:39.317

`$1` would be whatever matched by `(:any)` group - which is, really, anything. Whatever you add will get passed as the parameter for `view` method in `pages` controller.

More here on [routing with codeigniter](http://ellislab.com/codeigniter/user-guide/general/routing.html).

# java - 对同一 JPA 模型的多次调用会覆盖对象

> ID：14566669
> 
> 赞同：1
> 
> 时间：2013-01-28T16:35:27.277
> 
> 标签：java, jpa, playframework, persistence

我有一团 Play Framework(1.2.5)/JPA 代码，如下所示：

```
List<MyObject> nL = MyObject.find("uuid", SubscriptionReferrer).fetch();
MyObject n = nL.get(0);
n.subscriptions.add(SubscriptionReference);
n.save();
JPA.em().flush();
JPA.em().getTransaction().commit(); 
```

因为它是在控制器领域之外调用的，所以我要求 JPA 编写记录。无论如何，基本上有人订阅了一个产品，这个方法被调用了。但他们也可以同时订阅多个产品，从而创建对该方法的多个单独调用。

我似乎遇到的问题是，当调用并行运行时，

```
List<MyObject> nL = MyObject.find("uuid", SubscriptionReferrer).fetch();
MyObject n = nL.get(0); 
```

bit 被调用并返回对象，但该对象对于所有调用都是单独的，并且当提交保存时，最后一个对象获胜，并且所有其他对象都被覆盖。

==编辑== 另外，我不知道会通过多少订阅，因为它来自第 3 方支付提供商。

那么，有没有一种明智的方法可以让我在不编写一些额外的缓存层的情况下保存对对象的所有更新？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:59:06.617

糟糕的设计！

睡在上面，然后意识到，尽管它只是一堆字符串，但创建订阅模型并通过连接回主对象来持久化它们要容易得多。

多谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:39:21.530

您可以“同步”您的方法，这将确保以原子方式获取和更新对象。在 JPA 中使用事务也可以。

# ios - 核心数据模型扩展

> ID：14566670
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:35:27.667
> 
> 标签：ios, objective-c, core-data

我已经建立了以下显示关系的模型。

![在此处输入图像描述](../Images/b19168cf6aa4f2193bd0116e7447ea91.png)

自定义 UITableViewCell 子类在实际选择时更新 Story selected 属性。

尽管我现在被要求提供某种形式的选定 Story 对象的持久性，但它工作得非常好。

如何构建此 SavedSelection 对象以适合下面的模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:18:15.740

唯一新颖的是你有一个多对多的关系，其中`SavedSelection`有许多故事，一个故事可能属于许多`SavedSelection`s。CoreData 可以在没有任何特殊或任何类型的显式连接表的情况下做到这一点。

您只需创建一个`SavedSelection`实体，使其具有`selectedStories`通向该`Story`实体的一对多属性。作为回报，您创建了一个`savedSelections`多对多属性并导致`SavedSelections`. 没有第三步。

# compiler-errors - 64位的libuuid不兼容，编译时找不到32位的libuuid

> ID：14566672
> 
> 赞同：0
> 
> 时间：2013-01-28T16:35:32.643
> 
> 标签：compiler-errors, redhat

我尝试在 64 位 RH5 下编译一个 32 位程序但遇到了这个问题：

> /usr/bin/ld: 搜索 -luuid 时跳过不兼容的 /usr/lib64/libuuid.so
> 
> /usr/bin/ld: 搜索 -luuid 时跳过不兼容的 /usr/lib64/libuuid.a
> 
> /usr/bin/ld: 找不到 -luuid
> 
> collect2: ld 返回 1 个退出状态

我做了一些研究，发现有很多可以安装 libuuid 的 RPM，但它们有不同的包名称，所以我不确定实际安装哪个。

谁能给我一些想法？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T07:32:08.823

您需要安装 32 位的 libuuid。查找名称中同时包含“uuid”和“i386”的包。

如果存储库中没有它，您将需要自己编译 libuuid。如果您这样做，请确保使用 -L 标志将编译器指向您自编译的 libuuid.so 的位置。

# c# - 找出 ResourceLoader.GetString 使用哪种区域性

> ID：14566676
> 
> 赞同：1
> 
> 时间：2013-01-28T16:35:47.003
> 
> 标签：c#, .net, localization, windows-store-apps, pluralize

我正计划开发一个本地化的 Windows 8 应用商店应用程序。Microsoft 建议[在标记目录和 ResourceLoader 类中使用资源文件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)，所以——现在——这就是我打算做的。

对于简单的翻译，这很好用，例如：

```
var resourceLoader = new Windows.ApplicationModel.Resources.ResourceLoader();
string text = resourceLoader.GetString("FileDeletedMessage");
text = string.Format(text, fileName); 
```

`GetString`自动将当前文化和首选语言与最合适的资源文件匹配，并返回相应的条目，例如`The file "{0}" was deleted`或`Die Datei "{0}" wurde gelöscht`。这是透明地发生的。

但现在我也想实现[Unicode Consortium 的 CLDR 图表中描述的](http://unicode.org/repos/cldr-tmp/trunk/diff/supplemental/language_plural_rules.html)正确复数。AFAIK，.NET 不支持这个开箱即用的，对吧？因此，我想使用或实现类似[SmartFormat](https://github.com/scottrippey/SmartFormat)的东西。在这种情况下，GetString 将返回一个类似`{0} {0:file|files} {0:was|were} deleted`.

**问题：**要将特定于文化的复数规则应用于此字符串，我需要知道字符串的文化。但是 GetString 不提供它，只有字符串本身。有什么方法可以查找字符串**及其**文化吗？（我不想自己重新实现它。这很复杂！）

顺便说一句，使用`System.Globalization.CultureInfo.CurrentCulture`or`CurrentUICulture`代替不起作用，因为 GetString 不一定返回当前文化的直接匹配项（考虑具有单一本地化的应用程序，英语，在法语机器上运行）。

# android - AndEngine 更新周期和黑屏问题

> ID：14566678
> 
> 赞同：0
> 
> 时间：2013-01-28T16:35:54.600
> 
> 标签：android, andengine

我在 andEngine 上写了一点层，使它对用户更加友好，但我发现了一些问题。有人可以在这里帮忙吗？

1）我有一个叫做“屏幕”的东西，它封装了一个场景分割它的逻辑等......问题是当我想从一个屏幕移动到另一个屏幕时。我想知道帧何时结束/开始进行交换，因为如果我在帧之间这样做会出现很多问题。

2) 当我的手机进入休眠状态时，我在返回游戏时会出现黑屏。我想这是因为纹理无效，我怎样才能让它们重新加载？我试过直接调用 Engine->Texture Manager->onReload() 没有运气。

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:40:12.820

## 问题 1：处理场景转换

关于问题 #1，查看本教程可能会对您有所帮助：

[http://stuartmct.co.uk/2012/07/16/andengine-scenes-and-scene-management/](http://stuartmct.co.uk/2012/07/16/andengine-scenes-and-scene-management/)

那里提倡的基本解决方案（我认为效果很好）是在 SceneManager 类的脉络中创建一些东西，正如 StuartMcT 描述的那样，处理

*   定义场景类型
*   加载场景所需资源
*   创建场景
*   设置当前显示的场景
*   等等

您提到您想知道“帧”何时结束/开始-我假设您的意思是场景转换？他的方法提供了一个 onCreateSceneFinished() 方法，你可以用它来做任何必须等到那个时候的事情。

## 问题 2：处理暂停/恢复

解决这个问题的起点是向活动中的 onPause() 和 onResume() 方法添加逻辑。你如何处理这些将取决于你的游戏，但考虑在 onResume() 方法中抛出一个 mEngine.start() 并在 pause() 中抛出一个 mEngine.pause() ，看看它会如何影响事情。

如果您发布一些代码，也许可以提供进一步的帮助。

# maven - 常春藤没有检索 maven-wadl-plugin-1.12.jar

> ID：14566679
> 
> 赞同：1
> 
> 时间：2013-01-28T16:35:55.617
> 
> 标签：maven, ivy

我有一个要在其中实现 Ivy 的项目，但它并没有在 ivy:retrieve 命令期间拉下一个依赖项。

ivy.xml 除外：

```
 <dependency org="com.sun.jersey.contribs"   name="maven-wadl-plugin" rev="1.12" conf="support->default" >
        <!-- artifact name="maven-wadl-plugin" type="jar" /-->
        <exclude org="junit"                    module="junit" />
        <exclude org="org.apache.maven"         module="apache-maven" />
        <exclude org="org.apache.maven"         module="maven-artifact" />
        <exclude org="org.apache.maven"         module="maven-plugin-api" />
        <exclude org="xerces"                   module="xercesImpl" />
    </dependency> 
```

我尝试使用和不使用“排除”以确保我没有遗漏任何东西，但是当我删除排除时，它会下载比需要更多的 jar。

我使用 maven-wadl-plugin.jar 为 rest 应用程序生成 WADL。我只是不确定这里到底缺少什么，但我感觉 maven-wadl-plugin pom.xml 和配置中有一些非常复杂的东西。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:58:03.017

如果您只想要主要工件，而不需要其传递依赖项，那么我建议编写 ivy 文件，如下所示：

```
<dependencies>
    <dependency org="com.sun.jersey.contribs"   name="maven-wadl-plugin" rev="1.12" conf="support->master"/>
</dependencies> 
```

神奇的是配置映射：

```
conf="support->master" 
```

以下答案描述了配置如何映射到 Maven 范围：

*   [Maven 范围如何通过 ivy 映射到 ivy 配置](https://stackoverflow.com/questions/7104364/how-are-maven-scopes-mapped-to-ivy-configurations-by-ivy/7116577#7116577)

特殊的“master”远程配置将没有依赖项，而“default”将下拉额外的编译依赖项。

# 常春藤依赖报告

在一个相关的问题上，我建议使用[报告](http://ant.apache.org/ivy/history/latest-milestone/use/report.html)任务来生成一个依赖报告：

```
<target name="resolve" description="Use ivy to resolve classpaths">
    <ivy:resolve/>
    <ivy:report todir='build/ivy' graph='false' xml='false'/>
</target> 
```

这将了解正在下载的 42 个附加文件与您的原始设置之间的关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:51:27.343

我想到了。类型是 maven-plugin。不是罐子。这就是它会解析但不会检索的原因。非常感谢您提供的信息。

在 build.xml 我改变了常春藤检索如下。

```
 <ivy:retrieve pattern="${support.dir}/[artifact]-[revision].[ext]" type="maven-plugin,jar,bundle" conf="support"/> 
```

谢谢马克。

# database - 使用控制台应用程序时，“OraOLEDB.Oracle”提供程序未在本地计算机上注册？

> ID：14566687
> 
> 赞同：2
> 
> 时间：2013-01-28T16:36:36.677
> 
> 标签：database, vb.net, oracle10g, console-application

我有这个我一直在研究的网站应用程序，VB.NET .NET 3.5，一切正常。我还需要开发一个更新网站数据库的控制台应用程序。我使用 Oracle 10g 数据库。

我复制了我在主项目中使用的相同连接类，当我尝试调用连接方法时出现此错误：

> ConnectionString 属性尚未初始化。

或者如果我不使用该类并直接调用代码，则会出现此错误：

> 'OraOLEDB.Oracle' 提供程序未在本地计算机上注册

我不知道为什么，同样的连接现在在我的另一个项目上有效。

我的连接类：

```
Public Class connection
 Public con As New OleDbConnection
 Public Sub connect()
  con = New OleDbConnection
  con.ConnectionString = "Data Source=localhost;User Id=system;Password=root;Provider=OraOLEDB.Oracle"
 End Sub
End Class 
```

当我称之为：

```
connection.con.Open()
 sql.Connection = connection.con
 sql.CommandText = ...
 sql.CommandType = CommandType.Text
 reader = sql.ExecuteReader()
 While (reader.Read())
  ...
 End While
connection.con.Close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T20:16:49.837

问题源于这样一个事实，即在 64 位机器上启动时为 AnyCPU 编译的代码将由 JIT 生成为 64 位代码，因此无法使用 32 位驱动程序。只需为 x86 平台重新编译代码即可使其在 32 位和 64 位系统上运行，并使用 32 位驱动程序。

相反，第二个问题是由于您不调用 connect() 造成的，因此您不应该使用该 connection.con 对象，更不用说调用 open 了

让我重写你上面的一些代码

首先，类应更改为

```
Public Class Connection
    Private con As OleDbConnection
    Public OleDbConnection GetConnection()
        con = New OleDbConnection
        con.ConnectionString = "Data Source=localhost;" + 
                                "User Id=system;Password=root;Provider=OraOLEDB.Oracle"
        return con
    End Function
End Class 
```

现在代码可以通过这种方式调用上面的类

```
Connection cc = new Connection()
Using con = cc.GetConnection()
    con.Open()
    sql.Connection = con
    sql.CommandText = ...
    sql.CommandType = CommandType.Text
    reader = sql.ExecuteReader()
    While (reader.Read())
        ...
    End While
End Using 
```

如您所见，当您调用 GetConnection() 时，该类返回一个正确初始化的连接，您可以在 Using 语句中使用此对象，该语句用于在不再需要连接时释放连接使用的资源。

当然，类连接本身毫无用处，因为您可以直接在需要连接的代码上编写更简单的代码，而无需隐藏连接的创建。
但是，如果您打算添加更多功能......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T19:06:09.473

尝试为 x86 操作系统（32 位）设置应用程序调试

构建 -> 配置管理器 -> 调试 -> 配置：调试 -> 平台 x86

# android - 没有到主机的路由

> ID：14566698
> 
> 赞同：8
> 
> 时间：2013-01-28T16:37:30.637
> 
> 标签：android, networking, tcp, client

我用安卓在我的手机上写了一个应用程序。我在手机上调试。我尝试连接到用 C# 编写的服务器，但每次尝试连接时，都会出现异常：

> EHOSTUNREACH（没有到主机的路由）

我添加到清单：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

我的连接代码：

```
try {
        InetAddress serverAddr = InetAddress.getByName(IP);
        int PortI = Integer.parseInt(Port);
        socket = new Socket(serverAddr, PortI);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:39:37.823

尝试这个！

1.  **在 LAN 网络中进行测试时，检查**您的设备是否已连接到向服务器和同一网络发出请求的 Internet。

2.  **如果您在 LAN 中连接，请检查**您是否已禁用服务器的防火墙。

3.  **检查**您发送请求的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-08T05:58:09.217

只需重新启动 Android Studio 并执行以下操作

[File]-->[Invalidate Caches/Restart] --> 选择[Invalidate and Restart]

这可能会解决问题。嗯，它对我有用。

# hibernate - Hibernate - 交易的样板代码

> ID：14566701
> 
> 赞同：0
> 
> 时间：2013-01-28T16:37:36.937
> 
> 标签：hibernate, transactions, crud, boilerplate

我已经为数据库 CRUD 操作编写了这个服务类。

可见的公共类 CompanyServiceImpl 扩展 PersistentRemoteService 实现 CompanyService {

```
 private GileadHibernateUtil gileadHibernateUtil;

    public CompanyServiceImpl() {
        gileadHibernateUtil = new GileadHibernateUtil();
        setBeanManager(gileadHibernateUtil.getPersistentBeanManager());
    }

    @Override
    public void addCompany(Company newCompany) {
        Objects.requireNonNull(newCompany, "newCompany is null.");

        Session session = gileadHibernateUtil.getCurrentSession();
        Transaction transaction = null;
        try {
            transaction = session.beginTransaction();
            session.persist(newCompany);
            session.getTransaction().commit();
        } finally {
            if (transaction.isActive()) {
                transaction.rollback();
            }
            session.close();
        }
    }

    @Override
    public Company updateCompany(Company company) {
        Objects.requireNonNull(company, "company is null.");

        Session session = gileadHibernateUtil.getCurrentSession();
        Transaction transaction = null;
        Company managedCompany = null;

        try {
            transaction = session.beginTransaction();
            managedCompany = (Company) session.merge(company);
            session.getTransaction().commit();
        } finally {
            if (transaction.isActive()) {
                transaction.rollback();
            }
        }

        return managedCompany;
    }

    @Override
    public void deleteCompany(Company company) {
        Objects.requireNonNull(company, "company is null.");

        Session session = gileadHibernateUtil.getCurrentSession();
        Transaction transaction = null;

        try {
            transaction = session.beginTransaction();
            session.delete(company);
            session.getTransaction().commit();
        } finally {
            if (transaction.isActive()) {
                transaction.rollback();
            }
        }

    }

    @Override
    public Company findCompany(int companyId) {
        if (companyId <= 0) {
            throw new IllegalArgumentException("companyId must be a positive integer.");
        }

        Session session = gileadHibernateUtil.getCurrentSession();
        Transaction transaction = null;
        Company company = null;

        try {
            transaction = session.beginTransaction();
            company = (Company) session.get(Company.class, companyId);
            session.getTransaction().commit();
        } finally {
            if (transaction.isActive()) {
                transaction.rollback();
            }
        }
        return company;
    }

    @Override
    public List<Company> findMatchingCompanies(String companyName) {

        Session session = gileadHibernateUtil.getCurrentSession();
        Transaction transaction = null;
        List<Company> matchingCompanies = null;

        try {
            transaction = session.beginTransaction();
            Criteria searchCriteria = session.createCriteria(Company.class).add(
                    Restrictions.or(Restrictions.like("code", companyName), Restrictions.like("name", companyName)));
            session.getTransaction().commit();

            matchingCompanies = searchCriteria.list();
        } finally {
            if (transaction.isActive()) {
                transaction.rollback();
            }
        }

        return matchingCompanies;
    }

    @Override
    public List<Company> findAllCompanies() {

        Session session = gileadHibernateUtil.getCurrentSession();
        Transaction transaction = null;
        List<Company> companies = null;

        try {
            transaction = session.beginTransaction();
            Criteria searchCriteria = session.createCriteria(Company.class);
            session.getTransaction().commit();

            companies = searchCriteria.list();
        } finally {
            if (transaction.isActive()) {
                transaction.rollback();
            }
        }
        return companies;
    }

} 
```

我决定不使用单独的 DAO 层。它是一个小应用程序，我不会从 Hibernate 切换。它所包含的只是 Hibernate 会话命令。开始和结束事务仍然来自业务层。所以，Hibernate 几乎可以作为我的 DAO 层。困扰我的是看似样板的交易代码，必须在每个 CRUD 方法中编写。这是更好的方法，还是无论如何都要重复的最少代码量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:51:36.770

如果您使用的是 spring 并且能够使用注释。提供的链接上有一篇很好的文章，它展示了如何使用注释来包装事务中的方法。

[http://springinpractice.com/2008/03/18/annotation-based-transactions-in-spring/](http://springinpractice.com/2008/03/18/annotation-based-transactions-in-spring/)

一起使用 spring 和 hibernate 会让你的代码看起来更干净，看起来像下面这样。

```
@Override
@Transactional
public void addCompany(Company newCompany) {
    Objects.requireNonNull(newCompany, "newCompany is null.");
    Session session = gileadHibernateUtil.getCurrentSession();
    session.persist(newCompany);
    //session.close(); this line would also not be needed because the session would close automatically when the transaction is complete.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-02T10:36:13.800

没有弹簧，这样的事情可以使用

`java.util.function.Function`

```
 public static Object transactionExecutor(Function<Session, Object> toRun) {
    Session session = null;
    Object result = null;
    try {
        session = getSession();
        final Transaction tx = session.beginTransaction();
        result = toRun.apply(session);
        session.flush();
        tx.commit();
        return result;
    } catch (HibernateException he) {
        Transaction tx = session.getTransaction();
        tx.rollback();
    } finally {

        session.close();
    }
    return result;
 }

 public static void save(final Students S) {
    Function<Session, Object> toRun = new Function<Session, Object>() {
        @Override
        public Object apply(final Session t) {
        t.save(S);
        return S.getId();
        }
    };
    int saveID = (int)transactionExecutor(toRun);
 } 
```

# r - R：按索引合并文本文档

> ID：14566703
> 
> 赞同：3
> 
> 时间：2013-01-28T16:37:43.553
> 
> 标签：r, text-mining

我有一个看起来像这样的数据框：

```
_________________id ________________text______
    1   | 7821             | "some text here"
    2   | 7821             |  "here as well"
    3   | 7821             |  "and here"
    4   | 567              |   "etcetera"
    5   | 567              |    "more text"
    6   | 231              |   "other text" 
```

我想按 ID 对文本进行分组，这样我就可以运行一个聚类算法：

```
________________id___________________text______
    1   | 7821             | "some text here here as well and here"
    2   | 567              |   "etcetera more text"
    3   | 231              |   "other text" 
```

有没有办法做到这一点？我正在从数据库表中导入，并且我有很多数据，所以我不能手动进行。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T16:43:56.433

您实际上正在寻找`aggregate`，而不是`merge`，并且应该有*很多*关于 SO 的示例展示了不同的聚合选项。这是最基本和最直接的方法，使用公式的方法来指定要`aggregate`.

这是您的可复制粘贴形式的数据

```
mydata <- structure(list(id = c(7821L, 7821L, 7821L, 567L, 567L, 231L), 
    text = structure(c(6L, 3L, 1L, 2L, 4L, 5L), .Label = c("and here", 
    "etcetera", "here as well", "more text", "other text", "some text here"
    ), class = "factor")), .Names = c("id", "text"), class = "data.frame", 
    row.names = c(NA, -6L)) 
```

这是汇总的输出。

```
aggregate(text ~ id, mydata, paste, collapse = " ")
#     id                                 text
# 1  231                           other text
# 2  567                   etcetera more text
# 3 7821 some text here here as well and here 
```

当然，还有`data.table`，它有很好的紧凑语法（和惊人的速度）：

```
> library(data.table)
> DT <- data.table(mydata)
> DT[, paste(text, collapse = " "), by = "id"]
     id                                   V1
1: 7821 some text here here as well and here
2:  567                   etcetera more text
3:  231                           other text 
```

# iframe - Youtube API 播放下一个视频 if else 声明

> ID：14566704
> 
> 赞同：1
> 
> 时间：2013-01-28T16:37:48.887
> 
> 标签：iframe, youtube-api

使用 iframe youtube API 我想要这个 if else 语句来播放这个播放列表中的某个随机视频给定选择的数字。到目前为止，它似乎给了我一些不是基于生成的随机数的重复视频。

```
 <script type="text/javascript">
  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player(
    'player', {
      height: '390',
      width: '640',
      playerVars: {},
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange,
        'nextVideo': nextVideo,
      }
    });
  }
  // 4\. The API will call this function when the video player is ready.
  function onPlayerReady(event) {   
  player.loadPlaylist({
                 list: 'mozart',
                 listType:'search',
               })   
  event.target.playVideo();
  } 

  function nextVideo() {
  var num = Math.round(Math.random() * 4);
  console.log(num);

  if (num >= 2) {
  player.nextVideo();
  player.loadPlaylist({
                 list: '90s rap',
                 listType: 'search',
               })   
   player.setShuffle(true);
   player.playVideo();

  }

  else if (num < 2) {
    player.nextVideo();
   player.loadPlaylist({
                 list: 'mozart',
                 listType:'search',
               })   
 player.setShuffle(true);
 player.playVideo();
  }
  else {}

  }

  // 5\. The API calls this function when the player's state changes.
  //    The function indicates that when playing a video (state=1),

  function onPlayerStateChange(event) {

  }
  function stopVideo() {
    player.stopVideo();
  }
</script> 
```

这是html

```
<a href="javascript:nextVideo()" id="next">Next</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:04:13.550

我看到你在代码中做的一些有问题的事情。

一般来说，您不应该在代码中重复调用`loadPlaylist()`++ 。我建议在开始时调用+一次，然后每当你想播放“随机”视频时，只需调用. 因为播放列表已经随机播放，所以下一个视频实际上是随机的。`setShuffle()``playVideo()``loadPlaylist()``setShuffle()``nextVideo()`

# ajax - 在 symfony 1.4 模板中执行 .ajax

> ID：14566712
> 
> 赞同：0
> 
> 时间：2013-01-28T16:38:15.160
> 
> 标签：ajax, jquery, symfony-1.4

我想要的是，当单击按钮时，它会调用 .ajax 请求以通过 url 将三个变量传递给操作，以使用更改的图像 src 字符串更新数据库。

我似乎无法成功执行 .ajax 请求。我收到了我设置的错误警报。

**这是执行ajax的jquery**

```
 //click through multiple thumbs
        $(".prev").click(function() {
            $(this).parent().find(".thumb-container").find("div:last").insertBefore($(this).parent().find(".thumb-container").find("div:first"));
            $(this).parent().find(".thumb-container").find(".thumb").removeClass("selected");
            $(this).parent().find(".thumb-container").find("div:first").addClass("selected");
                var selectedImage = $(this).parent().find(".thumb-container").find(".selected").find("img").attr("src");
                var quiltPatchId  = $(this).parent().parent().parent().parent().attr("id");
                var CalendarOfEventsID = <?php print $CalendarOfEventsID        ?>;
                var briefsPatchId;
                //update image to uploadedImage field
                 $.ajax({
                    url: "/cms.php/calendar-of-events/"+CalendarOfEventsID+"/entries/update-image/"+quiltPatchId+"/"+selectedImage,
                    dataType: "json",
                    success: function(data){
                        briefsPatchId   =   data.briefsPatchId;
                    },
                    error: function(jqXHR, textStatus, errorThrown){
                        alert("Oops!  That image was not successfully updated.");
                    }
                 });

        }) 
```

所以ajax应该在这里调用带有变量的url到**routing.yml**中：

```
calendar_update_image:
  url: /calendar-of-events/:id/entries/update-image/:quiltPatchId/:selectedImage
  param: { module: calendar_of_events, action: updateImage } 
```

然后调用**actions.class**：

```
//update selected image
    public function executeUpdateImage(sfWebRequest $request){
        $briefsId     = $request->getParameter('id');
        $quiltPatchId = $request->getParameter('quiltPatchId');
        $selectedImage = $request->getParameter('selectedImage');

        $briefsPatch = Doctrine::getTable('CalendarOfEventsEntries')->find($quiltPatchId);

        $briefsPatch['uploadedImage'] = $selectedImage;
        $briefsPatch->save();
        $this->briefsPatchId    =   $briefsPatch['id'];
    } 
```

然后我可以将一些数据传回模板**updateImageSuccess.php**

```
<?php
/*
* This page is only called via ajax, so no templating necessary; uses blank template
*/
$data = array('briefsPatchId' => $briefsPatchId);
echo json_encode($data);    
?> 
```

我有这个在另一个模板中工作，使用拖放，所以我想也许我只是错过了一些小东西。有没有办法调试 ajax 调用以查看它在哪里失败？

**更新：**

主要问题在于 symfony 缓存。清除后，它可以标识页面 url。现在的问题是成功通过url获取图像字符串。我已经使用它对其进行了编码

**selectedImage = encodeURIComponent(selectedImage);**

它修复了“/”，但扩展正在丢弃 url。这可能需要开始一个新问题。如果是这样，请告诉我。

**更新**

好的，我已经让它工作了，通过拆分和弹出图像，使其成功通过 url。我认为有更好的方法可以做到这一点，所以如果这是一种不好的方法，请让他们知道。

这就是现在的工作：

```
var selectedImage = $(this).parent().find(".thumb-container").find(".selected").find("img").attr("src");

            var selectedImage = selectedImage.split('.');
            var imagePath = selectedImage[0];
            var imagePath = selectedImage[0].split("/").pop();
            var imageExt = selectedImage[1]; 
```

所以我获取图像字符串，将扩展名拉到另一个 var 中，然后 split.pop 图像字符串位置以删除所有以前的文件夹。

我原来是uploads/images/my_image.jpg，现在分成两个var，分别是`imagePath = my_image`and `imageExt = jpg`，然后我通过url传递了这两个var

```
url: "/cms_dev.php/calendar-of-events/"+CalendarOfEventsID+"/entries/update-image/"+quiltPatchId+"/"+imagePath+"/"+imageExt, 
```

并在动作中将它们拾起并重新组合在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:53:41.270

我不会给你答案，但我会描述我将如何调试它：

*   就在打电话之前`$.ajax`，发出警报以检查网址是否正常

    ```
    alert("/cms.php/calendar-of-events/"+CalendarOfEventsID+"/entries/update-image/"+quiltPatchId+"/"+selectedImage) 
    ```

*   如果您觉得 url 看起来像，在`var_dump`里面放一些`executeUpdateImage`看看参数是否正常：

    ```
    public function executeUpdateImage(sfWebRequest $request) {
      $briefsId      = $request->getParameter('id');
      $quiltPatchId  = $request->getParameter('quiltPatchId');
      $selectedImage = $request->getParameter('selectedImage');

      var_dump($briefsId);
      var_dump($quiltPatchId);
      var_dump($selectedImage);
      die(); 
    ```

*   然后检查`$quiltPatchId`您的数据库中是否存在
*   `var_dump`保存到数据库的结果：

    ```
    $result = $briefsPatch->save();
    var_dump($result);
    die(); 
    ```

*   最后，检查 javascript 中的错误消息并在开发模式下测试它（例如 frontend_dev.php）：

    ```
    error: function(jqXHR, textStatus, errorThrown){
        alert("Oops!:"+textStatus);
    } 
    ```

有了所有这些信息，您将能够找到问题所在。否则，返回有关调试的结果。

# asp.net-mvc - asp.net mvc 不显眼的验证在渲染时显示验证错误消息

> ID：14566718
> 
> 赞同：3
> 
> 时间：2013-01-28T16:38:27.763
> 
> 标签：asp.net-mvc, unobtrusive-validation

**简短版本：**为什么默认情况下验证消息可见`data-valmsg-replace='false'`？我该如何解决？

**细节：**

在我的剃须刀中，我这样做：

```
@Html.TextArea("Description", Model.FormData.Description, new { @class="span12" })
@Html.ValidationMessage("Description", L("Description is required")) 
```

验证消息呈现为（如预期的那样）：

```
<span class="field-validation-valid" data-valmsg-for="Description" data-valmsg-replace="false">Description is required</span> 
```

并且消息在页面初始渲染**中可见。**这似乎是设计使然，但没有任何意义（注意`data-valmsg-replace='false'`）。

**问题**

1.  这个设计决策背后的原因是什么，特别是在默认情况下显示错误消息`data-valmsg-replace='false'`？

2.  有没有比添加更好的解决方案`.field-validation-valid { display: none; }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:29:02.463

*以下帖子可能包含猜测*

创建 ASP.NET MVC 项目将遵循以下规则：

```
.field-validation-valid {
  display: none;
} 
```

这意味着验证错误容器将不可见 OOB（在我的情况下，我未能将该规则转移到我自己的 site.css）

`.hide()`如果没有错误，为什么不不显眼地验证容器？
假设我希望我的错误容器在没有错误时设置为绿色复选标记。如果 unobtrusive.validation 隐藏了容器，那么我就无法做到这一点。

所以我的答案是：

1.  unobtrusive 应该是不显眼的，这就是它默认不隐藏容器的原因。您希望它隐藏 - 您可以按照自己的方式设计它。
2.  `.field-validation-valid { display: none; }`是合理的，也是我能想到的最佳解决方案。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T17:12:35.550

我有同样的问题，原来它是 Global.asax 中的默认设置：

[解决方案](https://stackoverflow.com/questions/13151187/validationmessage-is-showing-on-initial-get-method)

```
<add key="ClientValidationEnabled" value="false" />
<add key="UnobtrusiveJavaScriptEnabled" value="false" /> 
```

# c++ - 无锁编程和基于锁编程的优缺点是什么？

> ID：14566726
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:39:19.430
> 
> 标签：c++, c++11, mutex, lock-free

我已经使用 C++11 几个月了，我一直在享受 C++11 标准库的大多数组件，除了原子操作相关的组件。

在我看来，无锁编程太复杂而无法正确使用，而基于锁的编程直观且易于理解和遵循。所以，我不得不考虑无锁编程的价值。

要完全理解无锁编程和基于锁的编程，我想知道：

无锁编程和基于锁编程的优缺点是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:42:25.560

显然，无锁编程很难做到正确。但是，如果其他人已经完成了以无锁方式运行的操作（例如队列、列表、向量等），那么使用它显然是一件好事。

锁总是会让事情变得更慢——因为你必须获得锁，然后在某些共享对象上执行你需要做的操作，然后释放锁——它不可避免地比使用正确的“无锁”操作来做同样的事情花费更长的时间.

# vb.net - VB.NET 合并大文件

> ID：14566728
> 
> 赞同：2
> 
> 时间：2013-01-28T16:39:21.367
> 
> 标签：vb.net, merge

我希望使用 VB.NET 来替换合并大文件的批处理文件。这是因为批处理文件只是在作为计划作业运行时挂起。（批处理文件在其他任何地方都可以正常工作；但不能作为 SQL 作业。）

批处理文件执行以下步骤：复制“\server\network location\large_file1.txt”+“\server\network location\large_file2.txt”+“\server\network location\large_file3.txt”

文件很大，我不想打开任何一个。我认为运行该作业的服务器可能内存不足。

这可以在 VB.NET 中完成吗？

谢谢！

**更新：**来自用户评论的解决方案：

```
Dim myBuffer(4096) As Byte 
Dim fsdest As System.IO.FileStream 
Dim fsSecondFile As System.IO.FileStream fsdest = New System.IO.FileStream(strDestinationfile, System.IO.FileMode.Append) 

fsSecondFile = New System.IO.FileStream(strSecondFile, IO.FileMode.Open, IO.FileAccess.Read) 

Do While fsSecondFile.Read(myBuffer, 0, myBuffer.Length) > 0 
    fsdest.Write(myBuffer, 0, 4095) 
Loop 

fsdesc.close() 
fsSecondFile.close() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:42:25.810

不，您不能在不打开任何文件的情况下合并文件。您*需要*在某个级别“打开它们”才能访问数据，无论是通过使用 System.IO 提供的框架功能，还是通过使用本机 API 读取光盘扇区，您仍然需要“打开”/读取数据。

解决方案是打开文件，是的，但是[使用流](http://msdn.microsoft.com/en-gb/library/system.io.filestream.aspx)和[缓冲区](https://stackoverflow.com/questions/3089004/what-is-a-byte-array)，以便您进行一些内存管理，而不仅仅是通过“全部读取”调用使系统膨胀。

所以，..

*   定义一个缓冲区 ( `new Byte(4096)`)
*   打开一个新的空文件 ( `Using ... new System.IO.File.Open(...)`)
*   对于每个要加入的文件...
    *   打开那个文件 ( `Using ... new System.IO.File.Open(...)`)
    *   循环使用 的`Read`方法`FileStream`依次填充缓冲区，直到它返回`<= 0`
    *   `Filestream`使用's将缓冲区内容写入新文件`Write`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T10:33:33.020

我一直在寻找这样的东西。但是，原始消息中提出的解决方案无法正常工作（它会损坏生成的文件）。

我更正了代码，并将其发布在这里，以防有人需要。此外，我的代码有点不同，它不会修改第一个文件，而是创建第三个文件。

```
 Public Function JoinFiles(strFile1 As String, strFile2 As String, fileOutPath As String) As Boolean
    Dim myBuffer(4096) As Byte
    Dim fsdest As System.IO.FileStream
    Dim fsFirstFile, fsSecondFile As System.IO.FileStream
    Dim BytesToRead As Integer = 0
    Dim n As Integer

    Try
        fsdest = New System.IO.FileStream(fileOutPath, System.IO.FileMode.Append)

        fsFirstFile = New System.IO.FileStream(strFile1, IO.FileMode.Open, IO.FileAccess.Read)

        BytesToRead = CType(fsFirstFile.Length, Integer)

        While (BytesToRead > 0)
            n = fsFirstFile.Read(myBuffer, 0, myBuffer.Length)
            If n = 0 Then Exit While
            fsdest.Write(myBuffer, 0, n)
            BytesToRead = BytesToRead - n
        End While
        fsFirstFile.Close()

        fsSecondFile = New System.IO.FileStream(strFile2, IO.FileMode.Open, IO.FileAccess.Read)

        BytesToRead = CType(fsSecondFile.Length, Integer)

        While (BytesToRead > 0)
            n = fsSecondFile.Read(myBuffer, 0, myBuffer.Length)
            If n = 0 Then Exit While
            fsdest.Write(myBuffer, 0, n)
            BytesToRead = BytesToRead - n
        End While
        fsSecondFile.Close()

        fsdest.Close()

        Return True
    Catch ex As Exception
        Return False
    End Try
End Function 
```

如果流仍处于打开状态，则可以通过编辑“catch”以关闭流来增强此代码。留作练习:-)

# php - 如何通过 javascript 页面携带 php 会话号？

> ID：14566736
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:39:46.000
> 
> 标签：php, javascript

我有一个页面，它依赖于 php 会话来携带一个名为 $audit_id 的变量。

使用它的页面然后使用 javascript 页面执行一个功能，在该功能上成功将页面重定向到新页面，此时它会丢失会话值。

有没有办法可以将变量传递到 javascript 页面？

希望澄清我的意思，这是基本结构......

**上传图片.php：**

```
session_start()
$_SESSION['audit_id'];
$audit_id = $_SESSION['audit_id']; 
```

**脚本.js**

```
$('#loading-content').html('Uploading Complete!');
window.location = "http://www.dentaldigs.co.uk/upload_success.php"; 
```

**上传成功.php：**

```
session_start()
$_SESSION['audit_id'];
$audit_id = $_SESSION['audit_id']; 
```

在这一点上，会话已经失去了它的价值。

我考虑过将 js 脚本放在 php 的标题中，这样我就可以使用 $_GET 但是 js 脚本很大并且也使用了另一个页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:45:09.260

您必须定义会话变量的值：

```
$_SESSION['audit_id'] = $audit_id; 
```

这（upload_image.php）：

```
session_start()
$_SESSION['audit_id'];
$audit_id = $_SESSION['audit_id']; 
```

没有设置任何会话变量，因此`$_SESSION['audit_id']`当您尝试检索它时没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:46:48.300

看起来您的变量赋值语法不正确。

`$audit_id = $_SESSION['audit_id'];`应该阅读`$_SESSION['audit_id'] = ...some value...;`upload_image.php

此外，这条线`$_SESSION['audit_id']`是不必要的。

您是否验证了会话正在设置？查看[w3schools](http://w3schools.com/php/php_sessions.asp)以获取更多文档

# javascript - 嵌套数据中的组和行

> ID：14566738
> 
> 赞同：4
> 
> 时间：2013-01-28T16:39:47.410
> 
> 标签：javascript, d3.js

我想从这样的嵌套对象结构中绘制多条 svg 线（使用 D3.js）：

```
data = [ 
{ Name: "jim", color: "blue", Points: [{x:0, y:5 }, {x:25, y:7 }, {x:50, y:13}] },
{ Name: "bob", color: "green", Points: [{x:0, y:10}, {x:25, y:30}, {x:50, y:60}] }
];

var line_gen = d3.svg.line().interpolate("linear")
                .x(function(d){return d.x;})
                .y(function(d){return d.y;}); 
```

基于[这个问题](https://stackoverflow.com/questions/7111584/using-nested-data-with-javascript-d3-problem)，我的第一次尝试是使用 svg:g 表示第一个嵌套级别，然后访问组内的第二个嵌套级别以呈现线条：

```
var g = svg.selectAll(".linegroup")
.data(data).enter()
.append("g")
.attr("class", "linegroup")
.style("stroke", function(d) { return d.color; })
.style("fill", "none");

g.selectAll(".line")
.data(function(d) { return d.Points;})
.enter().append("svg:path")
  .attr("d", line_gen); 
```

但这并没有渲染任何线条。相反，在每个组中，我为三个数据点中的每一个都获得了一个空路径标签。显然，数据的形状正在引起问题。

```
<g class="linegroup" style="stroke: #0000ff; fill: none;">
    <path></path>
    <path></path>
    <path></path>
</g> 
```

我确实找到了一个不使用组的解决方案（将作为答案发布），但我仍然想知道为什么组解决方案不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:46:14.417

这是一个答案，主要基于[这个问题](https://stackoverflow.com/questions/14308779/d3-json-multiple-line-chart)，除了它不使用 d3.entries：

```
data = [ 
{ Name: "jim", color: "blue", Points: [{x:0, y:5 }, {x:25, y:7 }, {x:50, y:13}] },
{ Name: "bob", color: "green", Points: [{x:0, y:10}, {x:25, y:30}, {x:50, y:60}] }
];

svg = d3.select("body").append("svg:svg").attr("width", 100).attr("height", 100)

var line_gen = d3.svg.line().interpolate("linear")
                .x(function(d){return d.x;})
                .y(function(d){return d.y;});

svg.selectAll(".line")
  .data(data)
  .enter().append("svg:path")
    .attr("d", function(d) { return line_gen(d.Points); })   // <<<
    .style("stroke", function(d) { return d.color; })
    .style("fill", "none"); 
```

这里的关键方法是不将 line_gen 函数直接返回到“d”属性，而是将其包装在另一个函数中，该函数从外部对象传递正确的嵌套数组。

另请参阅关于 d3.entries 与 d3.values[的精彩讨论。](https://groups.google.com/forum/?fromgroups=#!topic/d3-js/w_rvbAOkp6c)d3.entries 似乎针对类似问题提出了很多建议，但我认为这对我的情况并没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:47:13.347

原因是您想为列表中的每个元素画一条线——嵌套选择适用于存在更多级别的情况。例如，如果您有一个以列表为元素的列表，并且每个列表元素都包含一组路径（例如，对曲线集进行分组），则嵌套选择将是合适的。

在您的情况下发生的事情是 d3 正在为每个元素生成一条新路径`Points`- 也就是说，每个点都有一条。

# c# - MVVM：视图模型继承

> ID：14566742
> 
> 赞同：0
> 
> 时间：2013-01-28T16:40:01.760
> 
> 标签：c#, wpf, inheritance, mvvm

我有以下视图模型：

```
public class DocumentViewModel : ViewModelBase
{
    public virtual string TabHeader
    {
        get { return "Document"; }
    }

    private ObservableCollection<DATA> data;
    /// <summary>
    /// Source for Grid
    /// </summary>
    public ObservableCollection<DATA> Data
    {
        get { return data; }
        set
        {
            data = value;
            RaisePropertyChanged("Data");
        }
    }
  // ...... a lot of properties and methods ....
} 
```

我想`ProcurementViewModel`继承`DocumentViewModel`：

```
 public class ProcurementViewModel : DocumentViewModel
 {
    public override string TabHeader
    {
        get { return "Procurement"; }
    }
 } 
```

请注意，我只覆盖了一个属性。其余属性应取自基本 ViewModel。

现在我想通过使用这个 DataTemplate 来显示它：

```
<DataTemplate DataType="{x:Type vm:ProcurementViewModel}">
    <views:DocumentView />
</DataTemplate> 
```

但没有显示数据。TabHeader 绑定到 TabControl 的 Header - 它显示来自基本 ViewModel 的值。

如果我指定 DataType`{x:Type vm:DocumentViewModel}`一切正常。

这是 DocumentView 的一部分，我在其中使用 DataTemplates：

```
<Grid>
    <telerik:RadTabControl Name="rtcTabs"  ItemsSource="{Binding Tabs}" SelectedItem="{Binding SelectedTab}" SelectedIndex="1">
        <telerik:RadTabControl.ItemTemplate>
            <DataTemplate>
                <TextBlock Text="{Binding TabHeader}"/>
            </DataTemplate>
        </telerik:RadTabControl.ItemTemplate>
        <telerik:RadTabControl.Resources>
            <DataTemplate DataType="{x:Type vm:DashboardViewModel}">
                <views:DashboardView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type vm:ProcurementViewModel}">
                <views:DocumentView />
            </DataTemplate>
        </telerik:RadTabControl.Resources>
    </telerik:RadTabControl>
</Grid> 
```

这是 DocumentView.xaml 的一部分：

```
<UserControl x:Class="DMRS.Views.DocumentView"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
         xmlns:vm="clr-namespace:DMRS.ViewModels;assembly=DMRS.ViewModels"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="358" d:DesignWidth="582" xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation">
<!--<UserControl.DataContext>
    <vm:DocumentViewModel/>
</UserControl.DataContext>-->
<UserControl.Resources>
    <Style x:Key="stlDocViewCombobox" TargetType="{x:Type telerik:RadComboBox}">
        <Setter Property="OpenDropDownOnFocus" Value="True"/>
    </Style>
</UserControl.Resources>

<Grid>
    <telerik:RadGridView AutoGenerateColumns="False" Name="rgvData" 
                         ItemsSource="{Binding Data}" 
                         SelectedItem="{Binding SelectedData}">
        <telerik:RadGridView.Resources>
.................................. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:27:43.810

> 如果我指定 DataType`{x:Type vm:DocumentViewModel}`一切正常。TabHeader 绑定到 TabControl 的 Header -**它显示来自*基本*ViewModel**的值。

听起来您的项目`DataContext`实际上是 a `DocumentViewModel`，而不是 a`ProcurementViewModel`

基础对象的隐式`DataTemplate`也应该应用于从该类型继承的所有对象，但是`DataTemplates`对于子对象不会应用于父对象。

因此，由于您在设置 时看到了**基础** ，这意味着您可能绑定到一个对象，而不是一个对象。`DocumentViewModel.TabHeader``DataType="{x:Type vm:DocumentViewModel}"``DocumentViewModel``ProcurementViewModel`

要确认是这种情况，您可以使用[Snoop](http://snoopwpf.codeplex.com/)之类的第 3 方工具来找出您的`DataContext`对象在运行时是什么。

**编辑：**

根据您添加到问题中的新代码，最可能的原因是您的`Tabs`集合（`DataContext`应用 的项目`DataTemplate`）不包含`ProcurementViewModel`对象。

您能否检查以确保您的`Tabs`集合包含一个`ProcurementViewModel`对象，而不仅仅是包含`DocumentViewModel`对象？

（此外，由于您`DataTemplates`的相同并且`ProcurementViewModel`继承自`DocumentViewModel`，因此您只需要`DataTemplate`for `DocumentViewModel`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:45:34.760

从我们可获得的有限信息来看，看起来这应该可行！检查派生 VM 的命名空间是否与基础 VM 的命名空间相同（或者，如果它们故意不同，则您在 XAML 中具有适当的命名空间声明）。

另一种可能性是您实际上`ProcurementViewModel`在运行时没有任何实例，因此`DataTemplate`从未使用过。在此处仔细检查您的 VM 实例的运行时类型。

这些事情听起来很明显，但由于这*应该*有效，因此您需要在代码中寻找一些小的疏忽。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:10:53.707

处理此类问题的一种好方法是在运行时检查内容控件的 DataContext 属性。

一个很好的方法是使用可以在运行时检查绑定的工具。例如，您可以使用 wpf 检查器 ( [http://wpfinspector.codeplex.com/](http://wpfinspector.codeplex.com/) )。

# eclipse - 无法使用 AJDT 插件在 Eclipse 中创建和保存 .aj 文件

> ID：14566743
> 
> 赞同：2
> 
> 时间：2013-01-28T16:40:01.777
> 
> 标签：eclipse, plugins, aspectj, ajdt

最近我开始学习 AspectJ ( [http://www.eclipse.org/aspectj/doc/released/faq.php](http://www.eclipse.org/aspectj/doc/released/faq.php) ) 的奇妙之处，并决定在程序中使用它。

首先，我下载了 aspectJ 的最新稳定版本（[http://www.eclipse.org/aspectj/downloads.php#stable_release](http://www.eclipse.org/aspectj/downloads.php#stable_release)）。然后我决定安装 AspectJ 的 Eclipse 插件（[http://www.eclipse.org/ajdt/whatsnew220/](http://www.eclipse.org/ajdt/whatsnew220/)）。

我正在使用eclipse（版本：3.8.0 Build id：I20120502-2000），目前我没有安装任何其他插件。

但是，当我尝试创建 .aj 文件或将更改保存在一个文件中时，我总是会收到此错误：

```
Save Failed
org.eclipse.ajdt.core.javaelements.AJCompilationUnit.openWhenClosed(Ljava/lang/Object;Lorg/eclipse/core/runtime/IProgressMonitor;)Ljava/lang/Object; 
```

我的安装有什么问题，我可以做些什么来修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:39:06.147

好吧，显然 Ubuntu 存储库的 Eclipse 版本（版本：3.8.0 Build id：I20120502-2000）与该版本的给定插件严重错误。甚至 eclipse 论坛都无法正确回答这个问题。

我更新到 eclipse 4.2 并安装了 4.2 版的插件，现在它似乎可以正常工作了。

猜猜它给我一个教训：总是去源头。

# php - 使用 moodle 数据库从外部脚本登录

> ID：14566745
> 
> 赞同：1
> 
> 时间：2013-01-28T16:40:03.460
> 
> 标签：php, encryption, passwords, moodle

我不是想为moodle创建一个插件，我只是创建一个外部脚本来检查用户输入到表单中的凭据与moodle数据库中的用户表。

现在在脚本中，用户名匹配，但密码不匹配。我已经阅读了一些关于使用盐渍的moodle的信息，但我仍然没有任何运气。

我正在使用类似的东西来检查密码。

```
$salt = 'random string of chars found in config file';
$password = md5($_POST['password'].$salt);
$query = "SELECT * FROM `user` WHERE password = '$password';";
... 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:00:54.193

我已经测试了代码，它对我来说工作正常，有一些可能你做错了 -

1.  确保 $salt 字符串与 config.php($CFG->passwordsaltmain) 文件中的相同。
2.  确保密码不是直接从没有moodle代码的mysql数据库中重置的。
3.  查询中缺少表前缀。

我的代码 -

```
<?php
    if ($_POST['submit']) {

        //your host detail
        $link = mysql_connect('localhost', 'root', 'root') or die(mysql_error());

        //your dbname
        mysql_select_db('moodle_23') or die(mysql_error()); 

        $salt = 'MG.b.;w>0B)3c.^:OqDd#?^h'; //change with your salt
        $password = md5($_POST['password'] . $salt);

        $query = "SELECT * FROM mdl_user WHERE username = '{$_POST['username']}' AND password = '$password'";

        $result = mysql_query($query) or die(mysql_error());

        echo '<pre>';

        while ($row = mysql_fetch_assoc($result)) {
            print_r($row);
        }
    }
    ?>
    <form action='' method="post">
        <p>Username = <input type="text" name ="username"/></p>
        <p>Password = <input type="password" name ="password"/></p>
        <input type="submit" value="submit" name="submit"/>
    </form> 
```

谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-08T15:08:50.973

您应该使用moodle 的身份验证API 及其相关函数。auth_user_login ($username, $password)

返回：如果用户名和密码有效，则返回 true，否则返回 false。

# actionscript-3 - Flash 网络浏览器 AS3

> ID：14566748
> 
> 赞同：-2
> 
> 时间：2013-01-28T16:40:23.023
> 
> 标签：actionscript-3, flash, web

是否存在 Flash 浏览器 [控件]？如果不是 Flash 平台的一部分，则首选开源（免费）实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:39:24.093

通过 Flash 浏览网页的唯一方法是使用内置`StageWebView`组件。不幸的是，这仅适用于 Adob​​e AIR 项目（因此您不能在网页上将此组件与 SWF 一起使用）。

看[`StageWebView`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)

# iphone - 为什么 self 保留在访问其属性之一的块中？

> ID：14566750
> 
> 赞同：4
> 
> 时间：2013-01-28T16:40:24.997
> 
> 标签：iphone, ios, objective-c, ipad, automatic-ref-counting

在下面的代码中，self 被保留以确保图像对象在块被调用时仍然存在。这就是文档所说的。但是，我似乎不明白为什么。简单地保留图像就可以保证它不会被释放。那么，为什么还要保留自我呢？

```
self.finishBlock = ^{
    self.image.hidden = YES;
} 
```

如果您直接访问图像，这是否适用？

```
self.finishBlock = ^{
    _image.hidden = YES;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:50:32.520

自我保留，因为

```
self.image.hidden = YES; 
```

实际上是

```
[[self image] setHidden:YES]; 
```

图像不能/不能直接保留，因为在执行块并`[self image]`调用以获取图像之前它不可用。

您的第二个示例也保留了 self ，尽管原因略有不同。在 Objective-C 中，当你直接访问一个实例变量时，它实际上是通过 self 的底层结构访问的。所以，`_image`其实是`self->_image`经过编译的。同样，该块需要访问自我，因此它保留自我。

另外值得注意的是，在任何一种情况下，如果 _image 的值在块执行之前发生变化，块将“看到”新值。这通常是你想要的，但并不总是你想要的。

您有两种选择来避免保留自我。第一个会这样做，*并*会在定义块时捕获 _image 的值，因此即使它发生变化，块也会看到原始值。这种方法是定义一个局部变量，将其设置为返回的当前值`self.image`，然后在块中使用它：

```
UIImage *image = self.image;
self.finishBlock = ^{
    image.hidden = YES;
} 
```

另一种方法是捕获 self 的弱版本并在块中使用它。在这种情况下，块将有一个弱的——而不是强的——对 self 的引用（即不会保留 self）。但是，`-image`self 上的访问器方法仍然会被调用，因此如果在块运行之前更改了图像，则将使用新值：

```
__weak YourClass *weakSelf = self;
self.finishBlock = ^{
    weakSelf.image.hidden = YES;
} 
```

请注意，在这种情况下，如果`self`在块运行之前释放，`weakSelf`将为 nil，并且块中的语句将有效地成为 NOOP（发送到 nil 的消息在 Objective-C 中不做任何事情）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T16:54:44.423

块需要在块中保留任何捕获的对象。您的第一个块示例实际上是：

```
self.finishBlock = ^{
    [[self image] setHidden:YES];
} 
```

该块必须保留`self`，以便它可以正确调用该`image`方法。正如所写的那样，该块不能简单地保留`image`，因为直到执行该块并`image`调用该方法才获得图像。所以这里唯一的选择是保留`self`.

在第二个区块中，您确实拥有：

```
self.finishBlock = ^{
    self->_image.hidden = YES;
} 
```

所以同样，`self`必须保留，以便在`_image`实际执行块时访问 ivar 的正确值。

# python - Django：为什么我在运行 LiveServerTestCase 测试时无法获得回溯（以防出错）？

> ID：14566757
> 
> 赞同：18
> 
> 时间：2013-01-28T16:40:41.990
> 
> 标签：python, django, debugging, selenium, traceback

我正在用 Selenium 编写一些测试。

当我运行我的 selenium 测试（`LiveServerTestCase`类型）并且我的代码中有一些错误（不是在测试中，我的意思是在执行的代码中，比如我使用 selenium 到达的主页视图）我得到 500 模板（通常我得到什么时候我有 DEBUG = False) 即使我有：

```
DEBUG = True 
INTERNAL_IPS = ('127.0.0.1',) 
```

我坚持这一点，我不明白为什么我的测试失败了（因为在公共 500 中我没有显示异常）。

为什么它会这样？我在哪里可以解决？

当我运行 runserver 时，它运行良好（我得到了回溯）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T15:39:23.187

来自 django 文档[https://docs.djangoproject.com/en/1.4/topics/testing/#other-test-conditions](https://docs.djangoproject.com/en/1.4/topics/testing/#other-test-conditions)

此时似乎无法覆盖它，即使使用[https://docs.djangoproject.com/en/1.4/topics/testing/#django.test.utils.override_settings](https://docs.djangoproject.com/en/1.4/topics/testing/#django.test.utils.override_settings)

在返回 500 响应时查看调试信息的唯一方法是记录它。

编辑：我找到了一种设置`DEBUG = True`硒测试的方法。在我的子类中，我重写了构造函数并更改了设置。

```
from django.conf import settings

class SeleniumLiveServerTestCase(LiveServerTestCase):

    def __init__(self, *args, **kwargs):
        super(SeleniumLiveServerTestCase, self).__init__(*args, **kwargs)
        if settings.DEBUG == False:
            settings.DEBUG = True 
```

它很丑但有效！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-11-04T17:29:16.870

我遇到了同样的问题，现在可以覆盖设置。

根据您的示例，您将导入`override_settings`装饰器并将其放置在类上方：

```
from django.test import override_settings

@override_settings(DEBUG=True)
class SeleniumLiveServerTestCase(LiveServerTestCase):

    ... 
```

[django 文档](https://docs.djangoproject.com/en/1.10/topics/testing/tools/#django.test.override_settings)中的详细信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:44:02.470

我自己对 Selenium 测试套件不是很熟悉，但我知道如果您正在部署应用程序并且您的 IP 地址未在“INTERNAL_IPS”元组中注册，即使 DEBUG 设置为，您也可能看不到回溯真的。当您使用 Django 的 runserver 时，它会自动将您的本地计算机添加到 INTERNAL_IPS 设置中，但通常这是一个空元组。我敢打赌，Selenium 并没有为您这样做，这可能就是您看不到回溯的原因。如果您还没有，我会尝试添加。

这样的事情应该可以正常工作：

```
INTERNAL_IPS = ('127.0.0.1',) 
```

[Django 设置 (INTERNAL_IPS)](https://docs.djangoproject.com/en/dev/ref/settings/#internal-ips)

# jax-ws - 如何在 tomcat 服务器上使用 jaxws 验证 ws-security soap 标头

> ID：14566758
> 
> 赞同：3
> 
> 时间：2013-01-28T16:40:43.373
> 
> 标签：jax-ws, tomcat6, ws-security, soapheader

我使用 JAX-WS RT 开发了一个简单的 Web 服务，并将其部署在 Tomcat 6 服务器上。我需要使用 SOAP 标头中的 ws-security 对对我的 Web 服务的调用进行身份验证。

我的方法是使用链处理程序来提取肥皂头中的用户名和密码，并在我的代码中进行身份验证。这是正确的方法吗？如果不是，正确的方法是什么？

使用soapUI，我通过以下标头发送

```
 <soapenv:Header> 
  <wsse:Security soapenv:mustUnderstand="1" 
  xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">  
     <wsse:UsernameToken> 
        <wsse:Username>test</wsse:Username> 
        <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">test</wsse:Password> 
     </wsse:UsernameToken> 
  </wsse:Security> 
```

使用此标头，我收到以下错误

```
 <S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
  <S:Body>
  <SOAP-ENV:Fault xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
     <faultstring>MustUnderstand headers:[{http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd}Security] are not understood</faultstring>
     <faultcode>SOAP-ENV:MustUnderstand</faultcode>
  </SOAP-ENV:Fault> 
```

使用 JAX-WS rt 如何设置我的 Web 服务以接受这种类型的标头并进行身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-07T12:17:51.453

使用链式处理程序是处理 ws-security 标头的一种方法，与诸如壁垒之类的框架相比，它只是一种较低级别的方法（尽管这些框架通常只是为您实现这些处理程序）。如果您编写自己的消息处理程序，则必须覆盖

```
Set<QName> getHeaders() 
```

声明您理解的标题。在这种情况下，返回一个包含

```
QName("http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd", "Security") 
```

以避免“必须理解”错误。

# python - 1分钟后uwsgi返回500错误

> ID：14566760
> 
> 赞同：0
> 
> 时间：2013-01-28T16:40:50.770
> 
> 标签：python, nginx, flask, uwsgi

我已经设置了一个 nginx+uwsgi+flask 应用程序，它就像一个魅力，但是如果我在 1 分钟后加载一个页面并加载其他页面（或同一页面），uwsgi 返回一个 500 内部服务器错误，而日志中没有任何信息如果我加载页面它工作正常。

我注意到只有当请求绑定到最后一个进程的同一个 pid 时才会发生这种情况。

这是我用来启动 uwsgi 的：

```
HOSTPATH=/var/www/vhosts/example.com

uwsgi -H $HOSTPATH/httpdocs/venv -x $HOSTPATH/httpdocs/uwsgi.xml -M 4 -t 30 -A 4 -p 4  --pidfile /var/run/uwsgi.pid -d /var/log/uwsgi.log --harakiri-verbose --enable-threads --log-5xx --no-orphans 
```

我的 uwsgi.xml：

```
<uwsgi>
  <socket>127.0.0.1:3031</socket>
  <chdir>/var/www/vhosts/example.com/httpdocs/app</chdir>
  <pythonpath>..</pythonpath>
  <module>wsgi:app</module>
  <master>True</master>
</uwsgi> 
```

我的 nginx 配置文件：

```
server {
    listen 80;
    listen xx.xxx.xxx.xx:80 default_server;

    server_name example.com;
    client_max_body_size 128m;

    location / {
        include         uwsgi_params;
        uwsgi_pass      127.0.0.1:3031;
        proxy_set_header X-Accel-Internal /static;
    }

    location /static {
        alias      /var/www/vhosts/example.com/httpdocs/app/project/static/;
    }
} 
```

关于它可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:07:04.720

您确定 uWSGI 返回 500 并且 nginx 不这样做吗？你可以启用烧瓶调试吗？

您是否检查过该页面：[http ://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html](http://uwsgi-docs.readthedocs.org/en/latest/ThingsToKnow.html)

只是出于好奇，将 xml config 与命令行 args 混合是否有任何具体原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T11:50:15.223

我安装了 NewRelic 并发现错误是 MySQL 超时。

# c++ - 我可以访问 std::[io]fstream 下的文件描述符吗？

> ID：14566762
> 
> 赞同：0
> 
> 时间：2013-01-28T16:40:55.450
> 
> 标签：c++, locking, std, fstream

> **可能重复：**
> [从 std::fstream 获取 FILE*](https://stackoverflow.com/questions/109449/getting-a-file-from-a-stdfstream)

我需要访问文件描述符，以便我可以使用flock()（或fcntl()，我不在乎）系统调用来创建和释放咨询文件锁。但我看不出有什么办法。也没有任何没有可怕黑客气味的替代方法。

有什么建议吗？我是否缺少实现文件锁定的明显方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:35:38.383

看来我无法访问 [io] fstream 中的底层文件描述符。似乎也没有让我从现有文件描述符构建 [io]fstream 的 c'tors。这种解决我的锁定问题的方法显然是不可行的。

然而，我找到了另一个可行的解决方案来解决我的锁定问题：我将使用 boost::interprocess 同步机制（特别是 boost::interprocess::sharable_lock）来实现相同的目的。请参阅[http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.sharable_upgradable_mutexes.sharable_upgradable_locks](http://www.boost.org/doc/libs/1_52_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.sharable_upgradable_mutexes.sharable_upgradable_locks)

在我实现了这个之后，我将报告难易度和额外的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:40:00.270

与其回到 C 世界，`<mutex>`不如使用 C++ 中可用的任何其他线程功能。如果您无法访问 C++11 编译器，那么是时候升级了。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T17:17:16.527

[如何使用 fopen() 锁定文件？](https://stackoverflow.com/questions/7573282/how-to-lock-files-in-c-c-using-fopen)

我相信这个问题向您展示了如何使用flock()（查看第一个答案）。请注意，这是答案而不是评论的唯一原因是因为我找不到评论按钮:)

# php - 在多个页面上回显或携带表单输入信息，然后将数据输入到mysql？

> ID：14566765
> 
> 赞同：0
> 
> 时间：2013-01-28T16:41:01.817
> 
> 标签：php, html, forms, session

我正在尝试携带或回显用户在表单中输入的信息，用户需要完成 3 个表单，它们都在不同的页面上，当他们到达第 4 页时，我需要插入所有这些信息一起进入mysql数据库。

现在我有我的 sql 查询，它将数据放入数据库，这输入数据很好，但只将数据放入最后一页/这是用户完成的最后一个表单。即使我正在使用这些值，用户放入早期表单的任何其他先前信息都不会输入到 mysql 中。

我认为您需要创建一个会话将数据传送到下一页，所以我正在尝试这样做，但它不起作用：

第 1 页/表格 1：

```
<?php
session_start();
?>

<form class="" method="post" action="register_p2.php">

                <div class="row first_name">
                    <input type="text" id="first_name" name="first_name" placeholder="First Name" />
                </div>

                <div class="row last_name">
                    <input type="text" id="last_name" name="last_name" placeholder="Last Name" />
                </div>

                <div class="row email">
                    <input type="email" id="email" name="email" placeholder="Email"  />
                </div>

                <input type="submit" value="Next >"  />

            </form> 
```

第 2 页/表格 2：

```
<?php
session_start();
// other php code here

$_SESSION['first_name'] = $first_name;
$_SESSION['last_name'] = $last_name;
$_SESSION['email'] = $email;
?>

<form name="myForm" method="post" action="register_p3.php" onsubmit="return validateForm()" >

                <div class="row date_of_birth">
                    <input type="text" id="date_of_birth" name="date_of_birth" placeholder="D.O.B 10/02/1990" />
                </div>

                <div class="row number">
                    <input type="text" id="contact_number" name="contact_number" placeholder="Mobile Number" />
                </div>

                <div class="row confirm">
                    <input type="text" id="confirm" name="confirm" placeholder="Are You a UK resident?"  />
                </div>

                <input type="submit" value="Next >"  />

            </form> 
```

第 3 页/表格 3：

```
 <?php
    session_start();
    // other php code here

    $_SESSION['first_name'] = $first_name;
    $_SESSION['last_name'] = $last_name;
    $_SESSION['email'] = $email;
    $_SESSION['dat_of_birth'] = $date_of_birth;
    $_SESSION['number'] = $number;
    ?>

<form class="" method="post" action="register_p4.php">

                <div class="row date_of_birth">
                    <input type="text" id="display_name" name="display_name" placeholder="Display Name" />
                </div>

                <div class="row password">
                    <input type="password" id="password" name="password" placeholder="Password" />
                </div>

                <div class="row password2">
                    <input type="password" id="password2" name="password2" placeholder="Password (Confirm)"  />
                </div>

                <input type="submit" value="Next >"  />

            </form> 
```

然后在最后一页上，我尝试像这样收集所有信息并将其输入数据库：

```
<? ob_start(); ?>
<?php
// GET ACCOUNT INFORMATION FROM FORM AND ASSIGN VARIABLES
$first_name = $_POST['first_name'];
$last_name = $_POST['last_name'];
$email = $_POST['email'];
$date_of_birth = $_POST['date_of_birth'];
$contact_number = $_POST['contact_number'];
$display_name = $_POST['display_name'];
$password = $_POST['password'];
?>
<?php
/*
// ECHO ACCOUNT INFORMATION
echo "<strong> Account Information: </strong>";
echo "<br />";
echo First Name: ";
echo "<br />";
echo $first_name;
echo "<br />";
echo "<br />";
echo "Last Name: ";
echo "<br />";
echo $last_name;
echo "<br />";
echo "<br />";
echo "Email: ";
echo "<br />";
echo $email;
echo "<br />";
echo "<br />";
echo "Password: ";
echo "<br />";
echo $password;
echo "<br />";
echo "<br />";
echo "date_of_birth: ";
echo "<br />";
echo $date_of_birth;
echo "<br />";
echo "<br />";
echo "Contact_number: ";
echo "<br />";
echo $contact_number;
echo "<br />";
echo "<br />";
echo "display_name: ";
echo "<br />";
echo $display_name;
echo "<br />";
echo "<br />";
*/
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:43:08.710

**将所有**表格合并为一个**表格**。

我认为所有这些信息都在一个表单中提交没有问题。

* * *

您现在拥有它的方式意味着（如您所知）您需要跟踪以前提交的内容并将其保存在会话文件中。

如果您以一种形式拥有所有内容，那么您应该没有问题。

如果您希望它在多个页面上“拆分”，那么您可以使用一些 javascript 魔术使其看起来好像表单位于多个页面上，但实际上将是一个`<form>`元素，只是具有不同的字段集，仅在用户启动时显示到表格的下一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:48:25.467

在第二页上，你写

```
$_SESSION['first_name'] = $first_name;
$_SESSION['last_name'] = $last_name; 
```

由于该页面上没有 $first_name，因此您将一无所有地覆盖 SESSION-vars。因此，在最后一页上之前页面的 SESSION 变量为空是正确的。

*只*存储之前页面的变量，它应该可以工作。

另一点：我真的很希望你在 sql-query 中使用它们之前清理你的变量......？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:53:43.017

然而，它的答案是：

在第 2 页更改：

```
<?php
session_start();
// other php code here

$_SESSION['first_name'] = $first_name;
$_SESSION['last_name'] = $last_name;
$_SESSION['email'] = $email;
?> 
```

至：

```
<?php
session_start();
// other php code here

$_SESSION['first_name'] = $_POST['first_name'];
$_SESSION['last_name'] =  $_POST['last_name'];
$_SESSION['email'] =  $_POST['email'];
?> 
```

并将第 3 页上的代码更改为：

```
$_SESSION['dat_of_birth'] = $_SESSION['date_of_birth'];
$_SESSION['number'] = $_SESSION['number'];
?> 
```

以此类推，在其他页面上，只需保存 $_SESSION['varname'] = $_POST['varname']; 最后，在您的最后一页上：将其更改为：（更新）

```
<?php ob_start(); ?>
<?php
session_start();
// GET ACCOUNT INFORMATION FROM FORM AND ASSIGN VARIABLES
$first_name = $_SESSION['first_name'];
$last_name = $_SESSION['last_name'];
$email = $_SESSION['email'];
$date_of_birth = $_SESSION['date_of_birth'];
$contact_number = $_SESSION['contact_number'];
$display_name = $_POST['display_name'];
$password = $_POST['password'];
?> 
```

你真的不需要 $first_name = $_SESSION['first_name']; 只是回显 $_SESSION['first_name']; 它可以节省内存...

# javascript - Google 气泡图自定义工具提示列不呈现

> ID：14566766
> 
> 赞同：2
> 
> 时间：2013-01-28T16:41:08.900
> 
> 标签：javascript, charts, tooltip, google-visualization

我正在尝试向气泡图添加自定义工具提示，以替换默认工具提示。我已按照文档站点（[此处](https://developers.google.com/chart/interactive/docs/customizing_tooltip_content)）的说明向 DataTable 添加了一个新`string`列，其中包含`role: 'tooltip'`. 但是，您可以在以下 JS fiddle 示例中看到，自定义工具提示内容不会呈现。图表仍显示默认工具提示。

任何人都知道我还需要做什么才能显示此自定义工具提示内容吗？

[http://jsfiddle.net/MPBmY/2/](http://jsfiddle.net/MPBmY/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T14:18:07.553

我最终制作了一个运行良好的自定义工具提示弹出窗口。

假设气泡图的 div 定义如下：

```
<div id="bubble_chart_div"></div> 
```

然后我使用了下面的 JavaScript。请注意，我遗漏了有关如何设置您的谷歌图表数据和加载谷歌图表包的内容。此代码仅显示如何获取自定义工具栏弹出窗口。

```
 var mouseX;
    var mouseY;
    $(document).mousemove( function(e) {
        mouseX = e.pageX; 
        mouseY = e.pageY;
    });

    /*
     *
     *instantiate and render the chart to the screen
     *
     */
    var bubble_chart = new google.visualization.BubbleChart(document.getElementById('bubble_chart_div'));
    bubble_chart.draw(customer_product_grid_data_table, options);

    /*
     * These functions handle the custom tooltip display
     */
    function handler1(e){
        var x = mouseX;
        var y = mouseY - 130;
        var a = 1;
        var b = 2;
        $('#custom_tooltip').html('<div>Value of A is'+a+' and value of B is'+b+'</div>').css({'top':y,'left':x}).fadeIn('slow');
    }
    function handler2(e){
        $('#custom_tooltip').fadeOut('fast');
    }

    /*
     *  Attach the functions that handle the tool-tip pop-up
     *  handler1 is called when the mouse moves into the bubble, and handler 2 is called when mouse moves out of bubble
     */
    google.visualization.events.addListener(bubble_chart, 'onmouseover', handler1);
    google.visualization.events.addListener(bubble_chart, 'onmouseout', handler2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T02:04:11.337

如帮助文档底部所述：

> 目前，以下图表类型支持 HTML 工具提示：
> 
> *   面积图
> *   条形图
> *   烛台图
> *   柱形图
> *   组合图
> *   折线图
> *   散点图

不幸的是，气泡图不包括在内，因此您无法向其中添加自定义 html 工具提示。如果您愿意，您可以编写自定义 javascript 来创建工具提示，但您不能使用现有功能来做您想做的事情。

# javascript - JavaScript 菜单 onmouseout 问题

> ID：14566772
> 
> 赞同：1
> 
> 时间：2013-01-28T16:41:21.673
> 
> 标签：javascript, menu, mouseevent, menubar, onmouseout

我正在尝试创建一个 JavaScript（最好不是 jQuery btw）网站菜单，当每个菜单项悬停时，它会下拉子链接的下拉菜单。我几乎拥有它的全部功能，但我遇到了一些困难，无法在线找到解决方案。

在菜单按钮上，我有一个 onmouseover 事件，用于显示子链接面板并为其设置动画。如果您将鼠标移出/放在另一个菜单按钮上，面板将消失，如果您将鼠标悬停在另一个菜单按钮上，则会出现一个新的。问题是，当您将鼠标从所需的菜单按钮移动到相应的面板上时，它会消失，显然是因为菜单按钮上有一个 onmouseout 事件可以做到这一点！我需要按钮上的 onmouseout，但是当鼠标移到面板上时，如何防止它触发隐藏功能？

我试图想办法解决这个问题，但到目前为止我失败了，所以任何帮助将不胜感激！

谢谢，

安迪

```
<script type="text/javascript">

    var anim = new Animator();

    function Animator() {

        this.slideDown = function (element, height) {

            var e = document.getElementById(element);
            var counter = 0;
            e.style.display = 'block';

            var interval = window.setInterval(function () {
                counter += 2;
                e.style.height = counter + 'px';

                if (counter >= height) {
                    clearInterval(interval);
                }
            }, 1);

        };

        this.hideSlide = function (element) {
            var e = document.getElementById(element);
            e.style.display = 'none';
            e.style.height = 0 + 'px';
        }
    }

</script>
</head>
<body>
<form id="form1" runat="server">
<div id="divMenuBar">
    <div class="menuButton" onmouseover="anim.slideDown('divMenu1', 305);" onmouseout="anim.hideSlide('divMenu1');">Click Me</div>
    <div id="divMenu1" class="slidingMenu menu1">
        <ul>
            <li>Option 1</li>
            <li>Option 2</li>
            <li>Option 3</li>
            <li>Option 4</li>
            <li>Option 5</li>
            <li class="end">Option 6</li>
        </ul>
    </div>
    <div class="menuButton" onmouseover="anim.slideDown('divMenu2', 305);" onmouseout="anim.hideSlide('divMenu2');">Click Me</div>
    <div id="divMenu2" class="slidingMenu menu2">
        <ul>
            <li>Option 1</li>
            <li>Option 2</li>
            <li>Option 3</li>
            <li>Option 4</li>
            <li>Option 5</li>
            <li class="end">Option 6</li>
        </ul>
    </div>
    <div class="menuButton" onmouseover="anim.slideDown('divMenu3', 305);" onmouseout="anim.hideSlide('divMenu3');">Click Me</div>
    <div id="divMenu3" class="slidingMenu menu3">
        <ul>
            <li>Option 1</li>
            <li>Option 2</li>
            <li>Option 3</li>
            <li>Option 4</li>
            <li>Option 5</li>
            <li class="end">Option 6</li>
        </ul>
    </div>
    <div class="menuButton" onmouseover="anim.slideDown('divMenu4', 305);" onmouseout="anim.hideSlide('divMenu4');">Click Me</div>
    <div id="divMenu4" class="slidingMenu menu4">
        <ul>
            <li>Option 1</li>
            <li>Option 2</li>
            <li>Option 3</li>
            <li>Option 4</li>
            <li>Option 5</li>
            <li class="end">Option 6</li>
        </ul>
    </div>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:52:57.773

我相信你有你不想使用 jQuery（或其他 UI 框架）的理由，所以我不会推动这个问题。但总的来说，您必须编写类似于这些框架如何处理菜单的代码。

与其像现在一样在 mouseout 上盲目地隐藏元素，而是需要构建逻辑来查看鼠标现在在什么位置，如果它在子面板上，它需要保持面板的可见性。如果您开始进入子菜单，这可能会变得相当棘手。

但是不管你怎么写，这里没有免费的午餐。您的按钮和菜单面板需要相互了解以及它们之间的关系。您必须明确决定隐藏和显示什么以及何时显示。

# android - Asynctask .get() 奇怪的行为

> ID：14566773
> 
> 赞同：1
> 
> 时间：2013-01-28T16:41:23.033
> 
> 标签：android, android-asynctask

我正在构建一个 android 应用程序，我需要在其中下载 pdf 然后查看它。我的下载和查看代码工作正常。我决定使用 Asynctask 来下载并显示进度。但是，当它启动时，系统似乎已冻结，并且直到文件下载后才会出现对话框。这是我的 onClick 代码：

```
public void onClick(View v) {
    DownloadFile downloadFile = new DownloadFile();
    downloadFile.execute(
            "http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4130-W-SP.PDF",
            "userguide.pdf");
    try {
        downloadFile.get();
        viewPDF(getExternalFilesDir(null) + "/userguide.pdf");
    } catch (Exception e) {
    }
} 
```

知道如何解决这个问题。

我考虑过可以将 viewPdf 放在 onPostExecute 方法中，但此方法专门用于下载文件，这是必须查看 pdf 的特殊情况。

提前致谢

编辑：我解决了我的问题。

我添加了一个参数，我将在其中指定请求的。这包含在结果中并取决于它，它可能会显示或不显示。感谢所有的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:50:37.317

正如医生所说

**AsyncTask.html.get() ：**

> 如有必要，最多等待给定时间以完成计算，然后检索其结果。

意味着如果您调用 get 方法从 AsyncTask 获取结果，这将在 UI 线程中等待，直到从 AsyncTask doInBackground 方法返回控制。

您可以通过将当前活动上下文传递给 DownloadFile 来解决当前问题，以便将方法从 Activity 访问到 onPostExecute 方法，如下所示：

```
private class DownloadFile extends AsyncTask<String, Void, String> {

Context context;

public DownloadFile(Context context){
this.context=context;
}
 @Override
   protected void onPreExecute() {
   }
      @Override
      protected String doInBackground(String... params) {
            // put your PDf downloading related code here
            return null;
      }      

      @Override
      protected void onPostExecute(String result) {

        // Access Activity method here using context;
         context.viewPDF(getExternalFilesDir(null) + "/userguide.pdf");      
      }

} 
```

`DownloadFile`并从 Activity执行Button click ：

```
public void onClick(View v) {
    DownloadFile downloadFile = new DownloadFile(Current_Activity.this);
    downloadFile.execute(
       "http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4130-W-SP.PDF",
       "userguide.pdf");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:01:22.680

这样做的快速方法：

```
public void onClick(View v) {
    DownloadFile downloadFile = new DownloadFile() {
        @Override
        public void onPostExecute(Void result) {
            super.onPostExecute(result);
            viewPDF(getExternalFilesDir(null) + "/userguide.pdf");
        }
    };
    downloadFile.execute(
            "http://store.aqa.org.uk/qual/newgcse/pdf/AQA-4130-W-SP.PDF",
            "userguide.pdf");
} 
```

这称为匿名类。它仅针对此实例覆盖来自 DownloadFile 的 onPostExecute。

# oracle - PostgreSQL 中的 ORACLE wm_concat 等效项

> ID：14566780
> 
> 赞同：0
> 
> 时间：2013-01-28T16:41:36.417
> 
> 标签：oracle, postgresql, aggregate-functions, postgresql-9.2

我是 PostgreSQL 新手，将数据库从 Oracle 迁移到 PostgreSQL 9.2 时遇到问题。我必须在我的代码中更改一些本机查询。我有一个子查询，例如：

```
SELECT wm_concat(p.first_name || ' ' || p.last_name) 
FROM TODO_PERSON PR 
JOIN PERSON P ON (p.id == pr.person_id)
WHERE todo_id = internal_table.id 
```

在 PostgreSQL 中我找不到等效的功能或其他解决方案...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:51:55.407

PostgreSQL 有一堆可用的[聚合函数](http://www.postgresql.org/docs/current/interactive/functions-aggregate.html)。

`wm_concat`等效似乎是`string_agg`，除非您*必须*指定分隔符。请查看文档以获取详细信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T20:36:09.337

这只是简单的串联。您可以使用 CONCAT 函数或仅使用管道编写查询；

所以第一个解决方案是：

```
SELECT CONCAT(p.first_name, ' ', p.last_name) [...] 
```

或者：

```
SELECT p.first_name || ' ' || p.last_name [...] 
```

如果要在结果中添加逗号，只需添加逗号而不是间隙，作为列名之间的字符串。IE：

SELECT CONCAT(p.first_name, ', ', p.last_name) [...]

您查询的最后一部分非常神秘。你用这些括号做什么？

# c# - 正确使用 Asp.Net Response.TransmitFile 和 Response.End()

> ID：14566781
> 
> 赞同：11
> 
> 时间：2013-01-28T16:41:37.010
> 
> 标签：c#, asp.net

这段代码的正确用法是什么？

```
httpContext.Response.AddHeader("Content-Disposition", "inline; filename=" + HttpUtility.UrlPathEncode(fileName));
httpContext.Response.ContentType = "image/png";
httpContext.Response.AddHeader("Content-Length", new FileInfo(physicalFileName).Length.ToString());
httpContext.Response.TransmitFile(physicalFileName);
httpContext.Response.Flush();
httpContext.Response.End();  //Use it or not? 
```

`.Flush()`用and真的很好用`.End()`吗？

根据[这一点](http://blogs.msdn.com/b/aspnetue/archive/2010/05/25/response-end-response-close-and-how-customer-feedback-helps-us-improve-msdn-documentation.aspx)，您永远不应该使用`Response.End()`（仅在错误或黑客情况下）

但是在某些答案中，`.End()`建议使用...？

就像在[这篇](https://stackoverflow.com/questions/8570269/using-response-transmitfile-to-download-file-but-also-contains-the-page-source)文章中一样。

那么到底该用`Response.End`还是不该用呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:30:51.183

根据[Thomas Marquardt](http://blogs.msdn.com/b/tmarq/archive/2009/06/25/correct-use-of-system-web-httpresponse-redirect.aspx)的说法，您永远不应该使用`Response.End()`. 相反，您应该使用`Context.ApplicationInstance.CompleteRequest()`. 也请查看这篇[文章](http://support.microsoft.com/kb/312629/en-us)，它来自 Microsoft KB，推荐`Application.CompleteRequest()`使用`Response.End()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-05-01T15:15:08.190

我添加了这个，这样人们就不会陷入错误接受的响应：**在传输文件后的大多数情况下，可能需要 Response.End()。**

无论您是使用 TransmitFile，还是决定直接写入输出流，都没有关系，只是在大多数情况下，您希望确保在发送文件后没有人可以写入单个字节。

这一点特别重要，因为有时会在 IIS 上安装一个过滤器，在全局 asax EndRequest 上安装一个代码，或者一个调用您的代码然后做更多事情的开发人员，其中任何一个最终都会将更多内容附加到输出流中在您不注意的情况下，它会损坏您传输的文件内容。- CompleteRequest 不会让您摆脱这种情况，因为它允许在您调用它后在响应中添加更多内容。

Response.End() 是保证未来没有其他代码更改或 IIS 过滤器将按预期操纵您的响应的唯一方法。

# html - 如何在拉伸 100% 的父对象中对齐 n 个固定宽度元素（div）

> ID：14566801
> 
> 赞同：0
> 
> 时间：2013-01-28T16:42:39.723
> 
> 标签：html, css

这个问题一定是在很多方面以各种形式提出的，但我一直在寻找相当多的东西，但找不到答案，所以我问了。

我有一个 div 宽度固定高度，拉伸 100% 宽度。

在里面，我有 2 个与父级高度相同的 div，宽度不同，总之小于父级的宽度。

我需要这些 div 以父元素为中心，彼此相邻。我可以让其中一个 div 居中使用`text-align: center;`，`margin: 0px auto;`但是另一个打破线。如果我让它们达到`float: left;`or `right`，那么它们就不会居中对齐。

我需要什么（父母内部的2个元素）：

```
###############################################################
#                |  El. ||         El.       |                #
#                |  A   ||         B         |                #
#                |      ||                   |                #
############################################################### 
```

如果父项中有 3 个元素：

```
###############################################################
#       |  El. ||         El.       ||       El.      |       #
#       |  A   ||         B         ||       C        |       #
#       |      ||                   ||                |       #
############################################################### 
```

感谢您的热心帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:49:18.040

您是否尝试过添加一个额外的 div 来包含两个内部 div？然后您应该能够将其与自动边距居中对齐并设置 text-align: center; 也是。如果 div 仍然堆叠，请尝试 display:inline。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:46:44.937

尝试将有问题的 div 显示为

```
display: inline; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:18:41.397

只需将所有内容放入居中 div 中的 span 元素中：

```
<div align="center" id="container">
    <span id="stuff">content</span>
    <span id="more">more content</span>
</div> 
```

# php - 使用 CSV 字段创建表并插入其余记录

> ID：14566806
> 
> 赞同：0
> 
> 时间：2013-01-28T16:42:50.800
> 
> 标签：php, mysql

我试图

*   `table`使用我从中获得的字段创建一个`fgetcsv()`。
*   `table-name`字段将是日期（如`13/10/2012`）。我想将它附加到另一个字符串并将其用作我的表名。

到目前为止我的代码：

```
if (($handle = fopen($this->filetemp, "r")) !== FALSE) {

    $ctr = 1;
    $tablename ="";

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        if($ctr ==1) {

            $tablename =  $data[19];

            $query = "CREATE TABLE  ". $tablename ."( PlayerName VARCHAR(60),Handycap INT UNSIGNED NOT NULL,Score INT NOT NULL,Front DOUBLE NOT NULL,Back DOUBLE,Prize VARCHAR(80));" ;
            mysqli_query($this->dbconn,$query);

            $name = str_replace("'"," ",$data[9]);
            mysqli_query($this->dbconn,"INSERT INTO  ". $tablename . " (PlayerName,Handycap,Score,Front,Back) VALUES ('$name', '$data[10]', '$data[11]','$data[12]','$data[13]')");

            $ctr++;
        }
        else if ($ctr > 1)  {
            $name = str_replace("'"," ",$data[9]);
            mysqli_query($this->dbconn,"INSERT INTO  ". $tablename . " (PlayerName,Handycap,Score,Front,Back) VALUES ('$name', '$data[10]', '$data[11]','$data[12]','$data[13]')");

            $ctr++;
        }
    }
    fclose($handle);
} 
```

*   目前我只是想使用索引 19 处的日期

    但是表没有创建！！当我尝试时。我也尝试使用其他索引值创建表名，但它仍然不起作用。

我认为我以错误的方式完全解决了这个问题，任何帮助都将不胜感激。干杯！

采样 CSV 记录：

> "高尔夫俱乐部","比赛结果报告","十月月度奖牌 - 2012 年 10 月 13 日 [Stroke]","球员姓名","H'cap","Score","Front","Back","新盘口","firstname, secondname","9","66","34.5","31.5","","球员打印：",1,"报告由 Genesys Convenor 制作。","打印在： ",13/10/2012,"页码:",1
> 
> "高尔夫俱乐部","比赛结果报告","十月月度奖牌 - 2012 年 10 月 13 日 [Stroke]","球员姓名","H'cap","Score","Front","Back","新盘口","firstname, secondname","18","66","33.0","33.0","","Players print:",2,"Report 由 Genesys Convenor 制作。","印刷在： ",13/10/2012,"页码:",1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T11:39:26.637

帖子中的 CSV 有所帮助；使用撇号作为表名。

更改以下代码：

```
$tablename =  $data[19]; 
```

到 ：

```
$tablename =  "`".$data[19]."`"; 
```

如果您使用以下功能进行调试会更容易`var_dump()`

PS：请停止使用已弃用的 API。

# javascript - 将数据写入 cookie 但缺少几个键

> ID：14566816
> 
> 赞同：-1
> 
> 时间：2013-01-28T16:43:33.053
> 
> 标签：javascript, asp.net, internet-explorer-8

我正在`cookie`为我的应用程序写入一些数据。共有 9 个键正在写入。但是当我查看 cookie 数据时，我发现有几个键没有成功写入。

Cookie 键由 *(star) 分隔

任何想法为什么会发生这种情况？可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-28T17:01:59.377

您可以尝试使用[IECookiesView](http://www.nirsoft.net/utils/iecookies.html)这个工具来获取有关您的 cookie 的更多详细信息，同时，如果您指定一些代码来了解问题所在，这将很有帮助。

# mysql - MySQL 中的选择查询在 Workbench 中有效，但在代码中无效

> ID：14566817
> 
> 赞同：1
> 
> 时间：2013-01-28T16:43:33.770
> 
> 标签：mysql, sql

我必须从数据库中获取在给定日期注册的所有用户。所以，我让系统发送电子邮件。要选择用户，我使用这个：

```
String query="Select mail from users where registered > "+"'"+datestring+"'"+";" 
```

其中注册是用户注册时跟踪的列，日期字符串是一个字符串，存储实际日期。所以，我终于得到了这样一句话：

```
Select mail from users where registered > '2013-01-28'; 
```

问题是......如果我在 MySQL Workbench 中复制+粘贴该句子，它就像一个魅力。但是，在代码中，它不起作用，并且句子永远不会启动。有什么帮助吗？

如果它可能有帮助，我使用 Grails (executeQuery(query) 方法)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:52:33.470

尝试将您投射`datestring`到一个`date`喜欢的位置：

```
String query="Select mail from users where 
    registered > CAST('"+datestring+"' as DATE);" 
```

或作为`datetime`：

```
String query="Select mail from users where 
    registered > CAST('"+datestring+"' as DATETIME);" 
```

如果这些不起作用，请尝试`STR_TO_DATE`：

```
String query="Select mail from users where 
    registered > STR_TO_DATE('"+datestring+"', '%Y-%m-%d');" 
```

这假定您的表列`registered`的类型为`DATE`or `DATETIME`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T13:06:24.540

我最终使用了 Grails 提供的 findByRegistered 方法，而不是直接启动 SQL 查询，这样我就能够检索到我想要的内容。但我意识到我必须在 findBy.... 方法中使用对象 Date 。所以，安迪，我认为你的回答是正确的，所以我支持你。

# objective-c - 在objective-c中找到对卡图片

> ID：14566822
> 
> 赞同：0
> 
> 时间：2013-01-28T16:43:43.110
> 
> 标签：objective-c, ipad

我想创建一个小游戏：

你应该找到成对的图片，这是我的代码我可以在图片上看到正面和背面，但我不知道我应该如何找到或比较图片以找到成对

这是我的代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view from its nib.

}

// Create the view
CardView *cv = [[CardView alloc] initWithFrontImage:img1 backImage:img2];

} 
```

你能帮我一些提示或教程吗:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:57:03.140

Why don't u use tags as you already did in the sample code? Is there a reason you always set cardview's tag to 1? If not you can set different tags for different images and compare tags when images are clicked. This would be the simplest solution. Otherwise another simple solution would be to add another instance variable to your cardview class such as imageID, store unique ids for different images and then compare these imageIDs to check if two clicked images are the same.

To generate imageIDs and store them I would suggest you to use NSDictionary where image file names are object keys and IDs are nsnumber objects. Then while adding images to nsdictionary you check if image file name already exists if so you return the imageID otherwise you add a new object-key pair and return the newly created imageID. If you want more details just tell me where you are stuck.

EDIT: I got a simpler idea while thinking instead of storing imageIDs in the cardview class just add an NSString frontImageFileName as instance variable. Modify addCardAtX to :

```
- (void)addCardAtX:(CGFloat)x y:(CGFloat)y andFrontImageWithFileName:(NSString *) imgName andTag:(int)tag
{
// Load images
UIImage *img2= [UIImage imageNamed:@"card_back.png"];

// Create the view
//So instead of this one
//CardView *cv = [[CardView alloc] initWithFrontImage:img1 backImage:img2];

//You have
CardView *cv = [[CardView alloc] initWithFrontImage:[UIImage imageNamed:imgName] backImage:img2];
cv.frontImageFileName = imgName;

// Center card on location
CGRect f = cv.frame;
f.origin.x = x-(f.size.width/2.0);
f.origin.y = y-(f.size.height/2.0);

cv.frame = f;
} 
```

Now you can compare equality of cardviews by

```
[cv1.frontImageFileName isEqualTo:cv2.frontImageFileName] 
```

# css - 定位 div 的问题

> ID：14566829
> 
> 赞同：0
> 
> 时间：2013-01-28T16:43:59.477
> 
> 标签：css, html, styles

我试图有一个很好的流体 2 列布局（下面的链接）。我有几个问题！

[http://jsfiddle.net/En3h8/3/](http://jsfiddle.net/En3h8/3/)

1）我希望我的标签包装器始终扩展页面的整个高度（不知道为什么它不起作用）

2）我希望我的“主” div 紧贴标签包装，并扩展页面的整个高度，但也填充右侧的其余空间。

任何帮助将不胜感激。我确定这是我错过的一些愚蠢的事情。

## CSS

```
 body{
    font-family: Calibri, sans-serif;
    top:0px;
    left:0px;
    margin:0px;
    padding:0px;
  }
  #page{
    position: relative;
    width:100%;
    height:100%;          
  }
  .tab{
    min-height:75px;
    padding:5px;
    border-bottom: 1px solid #2a2a2a;
    text-align: center;
    color: #717171;
    cursor: pointer;
    line-height:75px;
  }
  .no-icon{
    line-height: 75px;
  }
  .active{
    background-color: #3c3c3c;
    color: #ffffff;
  }
  #tab-wrapper{
    display:inline-block;
    height:100%;
    width:10%;
    border: 1px solid black;
    float: left;
    background-color: #464646;

  }
  #main{
    display:inline-block;
    width:80%;
    height:100%;
    background-color: #dbdbdb;
    padding:30px 20px;

  }
  #footer{
    clear:both;
    width:100%;
    border:1px solid black;
  } 
```

## HTML

```
<div id="page">
  <div id="tab-wrapper">
    <div id="tab1" class="tab active">
      Tab 1
    </div>
    <div id="tab2" class="tab">
      Tab 2
    </div>
    <div id="tab3" class="tab">
      Tab 3
    </div>
  </div>
  <div id="main">
   Lorem ipsum etc
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:15:29.333

首先要使元素的高度为 100%，您必须对 body 和 html 应用 100%。

我认为您可以通过定位来实现您所需要的。我做了类似于一个项目的事情，它适用于每一个浏览器。我做得很快，但它应该给你的想法：

在这里演示：http: [//jsfiddle.net/c4Tn7/](http://jsfiddle.net/c4Tn7/)

HTML

```
<div id="tab_wrapper">
    <a class="tab">Tab 1</a>
    <a class="tab">Tab 2</a>
    <a class="tab">Tab 3</a>
</div>

<div id="content">
    Mauris pharetra malesuada tempus. Sed faucibus commodo nisi, malesuada sodales sem aliquam vitae. Fusce laoreet elementum mattis. Aliquam vulputate ligula vitae velit condimentum sed suscipit ligula gravida. Sed ullamcorper, mi sed sollicitudin pulvinar, metus enim accumsan nisl, sit amet gravida ante dolor eu mauris. Phasellus in nulla massa, sed porttitor neque. Ut ut ligula vitae ipsum lacinia accumsan et nec elit. Pellentesque congue rutrum hendrerit. Donec sed dolor in ante dignissim tempus. Aliquam vestibulum, mauris sed pulvinar eleifend, eros ipsum vehicula mauris, at pulvinar ligula mi ut magna. Integer et augue et enim semper pharetra. Phasellus et ante diam. Quisque condimentum ultricies quam et auctor. Vivamus dignissim nunc ac augue pretium ac porta nisl iaculis.
</div>

<div id="footer">
    THIS IS FOOTER
</div> 
```

CSS

```
body,html{
    width: 100%;
    height: 100%;
}
body {
    position: relative;
}
#tab_wrapper {
    position: absolute;
    top: 0px;
    left: 0px;
    bottom: 40px;
    width: 100px;
    background: #000;
}
#tab_wrapper .tab{
    display: block;
        min-height:75px;
        padding:5px;
        border-bottom: 1px solid #2a2a2a;
        text-align: center;
        color: #717171;
        cursor: pointer;
        line-height:75px;
}
#content {
    position: absolute;
    top: 0px;
    left: 100px;
    right: 0px;
    bottom: 40px;
    background: #666;
    padding: 20px;
    overflow: auto;
}
#footer {
    position: absolute;
    bottom: 0px;
    left: 0px;
    right: 0px;
    height: 40px;
    background: red;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:48:54.200

这个问题有理论答案，也有实际答案。

理论上的一个提到属性及其语义。

实用的承认一个事实，即许多浏览器不太关心标准行为，尤其是在涉及良好、流畅的布局时，并且您必须为每个浏览器维护许多专业化。

这就是许多人选择使用所谓的“CSS 框架”并使用他们的**Grid**组件来修复布局的原因。这些框架的创建者/维护者有责任使它们与许多浏览器兼容，并在此约束内尽可能优雅。

查看[Twitter Bootstrap](http://twitter.github.com/bootstrap/)或[960.gs](http://960.gs/)了解更多信息。

显然，如果你想知道它是如何完成的，你可以看看他们的源代码。具体来说，960.gs 使用固定边距、填充和浮动`div`s。

这些框架的另一个好处是它们倾向于跨平台运行良好。即 Linux/Mac/Android/iOs/Windows 等。

# windows - 使用 Windows 电源管理 API 调暗显示器

> ID：14566830
> 
> 赞同：5
> 
> 时间：2013-01-28T16:44:02.167
> 
> 标签：windows, visual-c++, power-management

我正在尝试做一些看起来很简单的事情，我只是想让我的程序能够在某些条件下调整显示器亮度。因此，我查看了 Windows[电源管理 API](http://msdn.microsoft.com/en-us/library/aa373163%28v=vs.85%29.aspx)，发现了一些似乎对我有用的东西。我放在一起的代码的核心（基本上，我引用[了 this](http://social.msdn.microsoft.com/Forums/en/tabletandtouch/thread/1e0f9f50-6d03-47f7-b801-5a16d97cbb77)）看起来像这样：

```
GUID *pPwrGUID;
GUID subGUID = GUID_VIDEO_SUBGROUP;
GUID BriGUID = GUID_VIDEO_CURRENT_MONITOR_BRIGHTNESS;

PowerGetActiveScheme(NULL, &pPwrGUID);
PowerWriteACValueIndex(NULL, pPwrGUID, &subGUID, &BriGUID, 0); 
```

这似乎很简单。我遇到的问题是 PowerWriteACValueIndex 返回错误代码 2：未找到文件，这对我来说没有多大意义。我在想问题只是我有一个错误的索引值（PowerWriteACValueIndex 函数中的最后一个参数），但是使用 PowerReadACValueIndex 将写入更改为读取（以查看是否可以获得合法值）也返回 2。我已经检查并确保 GUID_VIDEO_CURRENT_MONITOR_BRIGHTNESS 在头文件中的 GUID_VIDEO_SUBGROUP 下。

只有我能想到的其他可能有用的信息是我的 WINVER 设置为 0x0600 (vista)。

任何想法这里可能出了什么问题？看起来这应该是一个非常简单的过程，但我真的没有任何运气。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T16:30:52.137

好的，通过一些试验和错误得到了我想要的工作。显然 GUID_VIDEO_CURRENT_MONITOR_BRIGHTNESS 不是正确使用的东西，并且由于某种原因，这些功能无法使用它（即使它在我的子组下的头文件中）。所以，我现在不确定它的目的是什么，但不要在这种情况下使用它。

起作用的是相同的功能，但使用的是 GUID_DEVICE_POWER_POLICY_VIDEO_BRIGHTNESS。如果要更改“变暗”状态的亮度，还有 GUID_DEVICE_POWER_POLICY_VIDEO_DIM_BRIGHTNESS。

改用这个定义，我得到了我想要的行为。

# actionscript-3 - 在不增加延迟的情况下过滤实时数据中的峰值

> ID：14566832
> 
> 赞同：0
> 
> 时间：2013-01-28T16:44:14.337
> 
> 标签：actionscript-3, filtering, osc

我需要在不引入任何延迟的情况下“平滑”OSC 输入数据，即消除尖峰。我能想到的唯一策略是存储前面的样本，与当前样本进行比较，如果当前样本与前一个样本的差异超过某个“增量”值，则忽略它。尽管我使用的是 Actionscript，但无论如何都应该适用相同的原则。

任何人都可以提出任何替代策略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T00:36:35.853

我脑海中浮现的想法：

*   用以前的值检查新值并丢弃异常值（≥ delta away）。
*   用以前 N 个值的平均值检查新值（例如 10）。
*   使用有偏差的运行平均值平滑整条曲线，其中平均值是您在每个点的值。 `avg = (1 - T)*avg + T*newValue`

# python - 如何在Python中调用其他目录中的类

> ID：14566836
> 
> 赞同：0
> 
> 时间：2013-01-28T16:44:22.493
> 
> 标签：python, class

我有一个主要执行python文件（F），我想在其中使用其他python**类** 的一些服务（S），文件夹结构是：

```
root/a/my file to execute -- (F)
root/b/python class I would like to use -- (S) 
```

如何在我的文件 (F) 中调用请求的 python 类 (S)？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:12:40.857

这可能太明显了，但其他答案缺少确保模块`b`在您的`sys.path`. 因此，假设问题中的文件夹结构并假设该目录`b`包含`__init__.py`与模块一起调用的文件`s.py`，则需要以下咒语：

```
# Add the b directory to your sys.path

import sys, os
parent_dir = os.getcwd() # find the path to module a
# Then go up one level to the common parent directory
path = os.path.dirname(parent_dir)
# Add the parent to sys.pah
sys.path.append(path)

# Now you can import anything from b.s
from b.s import anything
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:49:16.813

`__init__.py`在您希望包含的目录中创建一个文件。

所以让我们想象一下我们有两个目录，一个`src`叫做`utils`.

如果您`Main.py`在`src`目录中，并且希望在位于`Network`的文件中使用名为的类`Connections.py`，`utils`那么您可以执行以下操作。

请注意，这同样适用于您创建的任何包含文件的`*.py`文件夹。例如，我们可以拥有`folder a, b, c`，而您只需这样做`from a.b.c import Connections`，或者您的文件名可能是什么......

**1）**在目录中创建一个`__init__.py`文件（它可以简单地为空）`utils`，然后从您`Main.py`执行以下操作。

```
from utils import Connections

my_instance = Connections.Network()

#Then use the instance of that class as so.
my_instance.whateverMethodHere() 
```

**目录看起来像这样：**

```
root dir
  - src 
    -__init__.py
    - Main.py

  - utils
    -__init__.py
    - Connections.py 
```

有关更多详细信息，您可以查看更深入的 python 文档。 [http://docs.python.org/tutorial/modules.html#packages](http://docs.python.org/tutorial/modules.html#packages)

**根据上面的链接，有关 python 包的更多信息，以及我们使用的原因`__init__.py`：**

> 导入包时，Python 会在 sys.path 上的目录中搜索包子目录。
> 
> **需要init** .py 文件才能使 Python 将目录视为包含包；这样做是为了防止具有通用名称（例如字符串）的目录无意中隐藏了稍后出现在模块搜索路径上的有效模块。在最简单的情况下，**init** .py 可以只是一个空文件，但它也可以执行包的初始化代码或设置**all** 变量，稍后将介绍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-05T03:48:50.357

做一个这个问题的例子，下面是你当前的目录树：

```
A folder:
  file a.py
  file b.py
B folder:
  file c.py
  file d.py 
```

在 c.py 中，您想将 a.py 导入到您的宏中。然后你可以这样做：

```
import os
# insert 1, 2, 3... but not 0, 0 is your working directory
sys.path.insert(1, "Folder A 's absolute path")
# Here, you can import module A directly    
import a 
```

# sql - 查询结果所有行的总和

> ID：14566838
> 
> 赞同：-4
> 
> 时间：2013-01-28T16:44:30.013
> 
> 标签：sql, sql-server-2005

```
Select (sum(OS.Small) + sum(OS.Medium)) * T.ColorPrice as TotalPrice
from Order_Colors OC
left outer join Order_Selection OS on OS.Order_ColorID = OC.Order_ColorID 
left outer join TShirtPrices T on T.Order_ColorID = OS.Order_ColorID
left outer join OrderInfo O on O.OrderID = OS.OrderID 
where O.CID = 1025
group by OC.Order_ColorID, OC.Color, O.OrderID, T.ColorPrice, T.TShirtPurchaseID 
```

这个查询给了我 1 列“总价格”，大约 20 行。我希望在同一个 sql 查询中获得所有这些行的总和。在 MS SQL 2005 中可以吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:47:24.983

在 SQL Server 中，您可以使用[`ROLLUP`](http://msdn.microsoft.com/en-us/library/ms189305%28v=sql.90%29.aspx)：

```
Select (sum(OS.Small) + sum(OS.Medium)) * T.ColorPrice as TotalPrice
from Order_Colors OC
left outer join Order_Selection OS 
    on OS.Order_ColorID = OC.Order_ColorID 
left outer join TShirtPrices T 
    on T.Order_ColorID = OS.Order_ColorID
left outer join OrderInfo O 
    on O.OrderID = OS.OrderID 
where O.CID = 1025
group by OC.Order_ColorID, OC.Color, O.OrderID, T.ColorPrice, T.TShirtPurchaseID with ROLLUP 
```

这将为您`Total Price`提供 with for 行，然后您还将获得所有值的最终总计。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-28T16:46:55.373

删除`GROUP BY`查询的一部分，您将得到一个结果。

# c - 如何在 Windows 上使用 CUDA 5 和 Glib 正确编译 64 位 C 应用程序？

> ID：14566846
> 
> 赞同：0
> 
> 时间：2013-01-28T16:44:52.250
> 
> 标签：c, compilation, cuda, 64-bit, glib

我正在尝试在 VS2010 上为用 C 编写的 64 位编译一个项目，并使用 CUDA 5.0 和 GLib。我已经有了 32 位的工作配置文件，一切正常。

在配置管理器上，我为 64 位创建了一个新的上下文，其设置从 32 位复制而来。然后，我更新了 64 位版本的 Glib 路径，并将 CUDA C/C++-> 目标机器平台设置为“64 位”。

好吧，它编译正常，但是当我尝试运行时出现错误：

```
The application couldn't be initialized correctly (0x000007b). 
```

我忘记了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:11:21.170

它可能是一个丢失的库。

最新版本的 Windows 仅给出通用消息，而不是关于未找到哪些库的详细消息。从命令行启动应用程序和从资源管理器启动应用程序时提供的信息也有所不同。

[Dependency Walker](http://www.dependencywalker.com/)会告诉您缺少哪些库。

# apache-flex - 为不可编辑的 textinput 和 textarea flex 组件设置样式

> ID：14566847
> 
> 赞同：0
> 
> 时间：2013-01-28T16:44:54.233
> 
> 标签：apache-flex, adobe, textarea, textinput

有没有办法在 'editable' 属性设置为 false 的情况下更改 flex 程序中所有 textinput 和 textarea 组件的样式（背景颜色）？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:33:55.670

## 创建自定义皮肤

由于对此没有特定的样式，因此您必须创建自定义皮肤。只需按照以下步骤操作：

*   为 TextInput 创建自定义外观。首先创建一个新的 mxml 文件（例如名为 MyTextInputSkin.mxml）。现在最简单的方法是简单地将所有代码复制`spark.skins.spark.TextInputSkin`到新类中。
*   覆盖该`updateDisplayList()`方法并根据宿主组件的`editable`属性对皮肤的类应用必要的更改。例如：

.

```
override protected function updateDisplayList(
    unscaledWidth:Number, unscaledHeight:Number):void {

    super.updateDisplayList(unscaledWidth, unscaledHeight);
    //when editable the background will be red and otherwise it'll be blue
    background.color = hostComponent.editable ? 0xff0000 : 0x0000ff;
} 
```

*   通过 CSS 选择器将此皮肤应用于所有 TextInput，如下所示：

.

```
@namespace s "library://ns.adobe.com/flex/spark";

s|TextInput {
    skinClass: ClassReference("my.skins.MyTextInputSkin");
} 
```

*   对 TextArea 组件重复此操作

* * *

## 让它更通用

您可以通过执行以下操作使其更通用。
在 updateDisplayList() 方法中：

```
override protected function updateDisplayList(
    unscaledWidth:Number, unscaledHeight:Number):void {

    super.updateDisplayList(unscaledWidth, unscaledHeight);

    var bgColorStyle:String = "backgroundColor";
    if (!hostComponent.editable) = "nonEditableBackgroundColor";
    background.color = getStyle(bgColorStyle);
} 
```

在 CSS 中：

```
@namespace s "library://ns.adobe.com/flex/spark";

s|TextInput {
    skinClass: ClassReference("my.skins.MyTextInputSkin");
    backGroundColor: #ff0000;
    nonEditableBackgroundColor: #0000ff;
} 
```

这样，您可以在任何地方重复使用自定义皮肤并通过样式应用不同的颜色。
请注意，您将无法`nonEditableBackgroundColor`通过 MXML 进行设置，因为主机组件没有在其元数据中声明该样式。这不适用于`backGroundColor`因为它是默认样式并且在 TextInput 的元数据中声明。

# javascript - 如何使我的网站与手机和平板电脑兼容？

> ID：14566848
> 
> 赞同：10
> 
> 时间：2013-01-28T16:44:58.583
> 
> 标签：javascript, mobile, web, android-compatibility

我想让我现有的网站在在手机、平板电脑上查看时自动调整，甚至当您在桌面上调整屏幕时。

失败了，如果太难了，你有什么建议？我基本上想要一个使用相同 url 的 ipad 和 iphone (android) 版本，并在检测到移动浏览器时自动定向。

非常感谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-28T16:57:09.303

You are looking for Responsive web design! Start with MediaQueries [http://mediaqueri.es/](http://mediaqueri.es/)

Also check this out for better understanding

[http://www.slideshare.net/zomigi/building-responsive-layouts-15508821](http://www.slideshare.net/zomigi/building-responsive-layouts-15508821)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T23:43:02.667

除了其他人的回答之外，对于移动网站，您有两个基本选择。

您可以拥有不同的桌面和移动站点，或者可以在所有设备上运行的单个响应式站点。

对于第一个选项，您可以将移动用户重定向到一个完全不同的 URL，在该 URL 中托管该站点的仅移动版本。为此，您可以使用[http://detectmobilebrowsers.mobi/](http://detectmobilebrowsers.mobi/)之类的内容管理重定向，或者使用 .htaccess 文件进行重定向有很多变体。

[此后， Jquery Mobile](http://jquerymobile.com)是开发仅移动站点的一种非常好的方法。

这种方法的优点是更容易开发一个轻量级的移动版网站。一个缺点是您需要维护两个网站——桌面和移动。

另一种选择是其他人建议的响应式方法。在这里，您基本上拥有一个站点，该站点根据访问者浏览器的寡妇大小进行重新配置。[Bootstrap](http://twitter.github.com/bootstrap/)和[Foundation](http://foundation.zurb.com)是两个很好的选择，还有很多其他选择。

响应式站点依靠媒体查询来找出窗口大小。这在现代浏览器中得到了很好的支持，但旧浏览器可能会出现一些问题，您可能需要解决这些问题。响应式站点的一些优点是您只维护一个站点，并且理论上它适用于所有屏幕和窗口大小，因此在发布具有不同屏幕大小的下一个移动设备时不会引起问题。

祝你好运，现在是做网页设计的有趣时期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T16:51:05.360

您需要研究[响应式设计](http://en.wikipedia.org/wiki/Responsive_web_design)。有许多免费的开源框架可以帮助您入门，其中最受欢迎的可能是[bootstrap](http://getbootstrap.com/)和[Foundation](http://foundation.zurb.com/)。

# api - linkedIN 配置文件API 数据提取

> ID：14566849
> 
> 赞同：2
> 
> 时间：2013-01-28T16:45:01.880
> 
> 标签：api, linkedin

我正在为一个新项目收集大量数据集。让我简要介绍一下我们迄今为止的研究工作。

Microsoft Academic 搜索包含在会议或期刊上发表的论文的详细信息。使用他们的 API，我将获得在某个会议上发表的论文列表。从同一个 Microsoft Academic 搜索 API 中，我将获得论文的更多详细信息，例如标题、摘要、作者、组织（作者工作的地方）等。为了获得庞大的数据集，我们决定获取有关作者的更多信息 (更多细节将出现在他的linkedin个人资料中）。为了获得详细信息，我们决定使用linkedin 的profile API。但是，我在一篇文章中读到，linkedin 不允许出于研究目的提取数据。以下链接中的linkedin员工回答了该问题。

[https://developer.linkedin.com/forum/how-get-public-profile-url-members-linked-api](https://developer.linkedin.com/forum/how-get-public-profile-url-members-linked-api)

我的问题是，

除了linkedin，还有其他方法可以获取有关作者的更多信息吗？

如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T11:57:44.630

这是一种解决方法：

1.  使用您自己的应用程序验证您自己的linkedin个人资料
2.  进行linkedin API 搜索以找到您需要的人。
3.  通过 API 向该人发送消息，详细说明您在做什么，并要求他们通过其linkedin 个人资料在您的网站上进行身份验证
4.  一旦他们通过身份验证，您将能够以完全合法的方式保存他们的个人资料数据，因为他们会授予您这样做的授权。

我希望这有帮助！

# c - 结构数组按值而不是引用传递

> ID：14566853
> 
> 赞同：4
> 
> 时间：2013-01-28T16:45:09.170
> 
> 标签：c

使用[本](http://www.maths.cam.ac.uk/undergrad/catam/ccatsl/manual/node50.html)指南，我被告知数组是通过引用传递的。当结构看起来像这样时，这成立：

```
struct Person{
 char* name;
 int id;
} 
```

但是当结构看起来像：

```
struct Person{
 char name[20];
 int id;
} 
```

使用 seconds 结构时，`name`数组按值复制：

```
struct Person p1 = {"John", 1234};
struct Person p2 = p1;
p2.name[0] = 'L';

// p1.name[0] is still 'K' 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:07:41.517

> 有人告诉我数组是通过引用传递的。

这并不完全正确。根本不传递数组，没有函数可以将数组作为参数。当您声明了一个函数时

```
void foo(int bar[]); 
```

参数的类型`foo`实际上是`int *`，当你调用它时

```
int arr[23];
/* fill arr with meaningful values */
foo(arr); 
```

指向 的第一个元素的指针*按值*`arr`传递。所有函数参数都在 C 中按值传递，无一例外。

 *因此，当您将 a`struct Person`传递给按值传递的函数时，`struct`会复制 the 的成员。如果其中一个成员是一个数组，那么它也会被复制，因为它是`struct`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:50:01.003

这对双方都成立。唯一的区别是，对于第一个结构，您只存储指向字符串的指针和 id 字段。在第二个结构中，您将整个字符串和 id 字段存储在结构中。因此第一个结构大约是。8 字节大小（假设是 32 位指针），第二个结构约为。24 字节大小。

**在这两种情况下，如果您调用该函数并按值传递它，则会复制整个结构。**您可以通过修改 id 字段而不是 name 字段来检查这一点。

通过引用（作为指针）将结构和数组传递给函数的原因是为了避免这种复制到堆栈上。

编辑：清除：通过访问第一个结构的 p2.name[0] ，您可以访问内存中其他位置（未复制）的（复制的）结构之外的位置。如果您访问第二个结构的 p2.name[0] ，您将访问为（复制的）结构分配的内存区域内的一个位置。

查看您的代码，我发现另一个值得注意的关键部分：当您使用字符串文字（硬编码字符串）初始化第一个结构时，写入 p2.name[0] 会导致未定义的行为（取决于工具链和操作系统，您的程序甚至可能会因此而崩溃！）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:49:19.520

在第一种情况下，您的结构包含一个指向字符缓冲区的指针，在第二种情况下，结构实际上包含（读取：有空间容纳）20 个字符。

因此，在第一种情况下，当您通过值传递时，您复制的是指针，而不是值。*

# visual-c++ - 如何在具有多个输入引脚的 DirectShow 过滤器中正确支持刷新

> ID：14566855
> 
> 赞同：0
> 
> 时间：2013-01-28T16:45:09.747
> 
> 标签：visual-c++, directshow

[MSDN page about Filter threading Considerations for flushing data](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375795%28v=vs.85%29.aspx "有关刷新数据的线程注意事项的 MSDN 页面")为具有单个输入引脚和一个或多个输出引脚的过滤器提供了[BeginFlush](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd390419%28v=vs.85%29.aspx)和[EndFlush](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd390424%28v=vs.85%29.aspx)的建议实现。

对于具有多个输入引脚的滤波器，应该如何安全地扩展它？应该为每个输入引脚调用 DeliverBeginFlush 和 DeliverEndFlush，还是为第一个或最后一个输入引脚调用 BeginFlush/EndFlush？输入引脚之间的确切操作顺序重要吗？是否允许一个输入引脚在其他引脚接收 BeginFlush 和/或 EndFlush 之前完成 BeginFlush 和 EndFlush 并接收新样本？在这种情况下还有其他考虑因素或陷阱吗？

目前，我的带有多个输入引脚的过滤器有时会在 EndFlush 完成后从上游接收陈旧的排队样本，我正在尝试诊断错误是在我的过滤器中还是在上游更远的地方。输入引脚正在为另一个生成输出样本的线程排队样本，因此我确实使用了 m_hSomeEventThatReceiveNeedsToWaitOn 技术来解除阻塞执行输出处理的线程。

```
HRESULT CMyInputPin::BeginFlush()
{
    CAutoLock lock_it(m_pLock);

    // First, make sure the Receive method will fail from now on.
    HRESULT hr = CBaseInputPin::BeginFlush();

    // Force downstream filters to release samples. If our Receive method
    // is blocked in GetBuffer or Deliver, this will unblock it.
    for (each output pin)
    {
    hr = pOutputPin->DeliverBeginFlush();
    }

    // Unblock our Receive method if it is waiting on an event.
    SetEvent(m_hSomeEventThatReceiveNeedsToWaitOn);

    // At this point, the Receive method can't be blocked. Make sure 
    // it finishes, by taking the streaming lock. (Not necessary if this 
    // is the last step.)
    { 
    CAutoLock lock_2(&m_csReceive);

    /* Now it's safe to do anything that would crash or hang 
       if Receive were executing. */
    }
    return hr;
}

HRESULT CMyInputPin::EndFlush()
{
    CAutoLock lock_it(m_pLock);
    for (each output pin)
        hr = pOutputPin->DeliverEndFlush();
    return CBaseInputPin::EndFlush();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:58:01.620

在我的代码中，我只是愚蠢地为我收到的每个人提供一个冲洗下游。它似乎没有问题。

```
HRESULT JoinFilterInputPin::BeginFlush()
{
    JoinFilter* filter = (JoinFilter*)m_pFilter;
    CAutoLock lock(m_pLock);
    CBaseInputPin::BeginFlush();
    filter->output->DeliverBeginFlush();
    return S_OK;
}

HRESULT JoinFilterInputPin::EndFlush()
{
    JoinFilter* filter = (JoinFilter*)m_pFilter;
    CAutoLock lock(m_pLock);
    filter->output->DeliverEndFlush();
    return CBaseInputPin::EndFlush();
} 
```

# javascript - 使用按钮在javascript中调用变量

> ID：14566860
> 
> 赞同：0
> 
> 时间：2013-01-28T16:45:14.713
> 
> 标签：javascript, function, variables, button, call

我想创建一个函数并在单击按钮时调用该函数。互联网上有很多指南可以做到这一点，但它只是没有用。（我是初学者）

```
<script type = "javascript/text">
var name = function()
name = prompt ("Who are you?", "");
alert ("hello" + " " + name);
</script> 
```

我怎么称呼“名字”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:57:55.447

I changed your code into this:

```
<script>
     var name = prompt ("Who are you?", "");
    alert ("hello" + " " + name);
</script> 
```

This should work. You don't even need a function here.

But if you want to store a function in a variable and then call it, just do:

```
var myFunction = function() {
    // function body
}
myFunction(); // calling it! 
```

# android - 通过进程（shell）获取输入/输出流到文件

> ID：14566861
> 
> 赞同：0
> 
> 时间：2013-01-28T16:45:16.330
> 
> 标签：android, shell, inputstream, outputstream

我的应用程序（DataSync）必须读取和写入只能由 root 访问的文件，因此我仅限于使用 shell 来操作这些文件。我目前将一个我想访问的文件复制到一个缓存目录，之后我可以从我的 Java 代码为缓存文件创建一个输入或输出流。写入文件的方式相同（但反过来）。

由于缓存此文件相对耗时，我想直接读取或写入这些文件而不需要缓存目录。我基本上是在尝试使用进程输入和输出流来读取或写入文件，如下所示：

```
Process p = Runtime.getRuntime().exec("su");
OutputStream out = p.getOutputStream();
InputStream in   = p.getInputStream();

// Write open file command to outputstream

// Read file contents from inputStream

out.close();
in.close(); 
```

我需要从进程中打开一个文件，并将其定向到标准输出，以便我的 Java 应用程序可以读取所述文件（以及类似的写入文件）。但是，我对 Linux 不是很熟悉，所以我不知道从哪里开始。谁能指出我正确的方向？

谢谢，昆特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T22:10:29.970

我只会回答我自己的问题。这是我目前的做法：

```
public static InputStream getInputStream(File file) throws IOException
{
    try
    {
        return new FileInputStream(file);
    }
    catch(Exception e)
    {
        Process p = Runtime.getRuntime().exec("su");
        DataOutputStream outputS = new DataOutputStream(p.getOutputStream());

        outputS.writeBytes("cat \"" + file.getPath() + "\"\n");

        outputS.writeBytes("exit\n");
        outputS.flush();
        outputS.close();

        return p.getInputStream();
    }
} 
```

对于输出流：

```
public static OutputStream getOutputStream(File file) throws IOException
{
    Process p = Runtime.getRuntime().exec("su");
    DataOutputStream outputS = new DataOutputStream(p.getOutputStream());

    outputS.writeBytes("mkdir -p \"" + file.getParent() + "\"\n");
    outputS.writeBytes("cat - > \"" + file.getPath() + "\"\n");

    return (OutputStream) outputS;
} 
```

# php - 无法使用 PHP OAuth 扩展使用已知 CA 证书对对等证书进行身份验证

> ID：14566864
> 
> 赞同：9
> 
> 时间：2013-01-28T16:45:26.420
> 
> 标签：php, oauth, ssl-certificate

我正在使用 PHP OAuth 扩展来调用 Tradeking API。当我在这里进行准确调用时，[https://developers.tradeking.com/documentation/php](https://developers.tradeking.com/documentation/php)

我得到了例外

> 捕捉到异常！响应：请求失败（对等证书无法使用已知 CA 证书进行身份验证）

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T16:59:42.230

OAuth 扩展使用 curl 发出请求。默认情况下，CURL 通常会验证 SSL 证书，以查看其是否由公认的 CA 颁发。为此，curl 使用一组捆绑的 CA 证书。

您可以禁用 SSL 检查 ( `$oauth->disableSSLChecks()`)。或者确保您拥有当前版本的 curl。有关curl 认证验证的[更多信息。](http://curl.haxx.se/docs/sslcerts.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-12T00:30:33.123

正确的解决方案是检查服务器 TIME。如果错误，SSL 将无法正常工作。

# sql - SQL 根据查询结果返回自定义值，牢记性能

> ID：14566865
> 
> 赞同：0
> 
> 时间：2013-01-28T16:45:26.943
> 
> 标签：sql, sql-server, tsql

我需要有关性能非常慢的查询的帮助。

该查询正在对列进行案例分析，以便根据数字返回不同的文本值。如果我有一个值为 1-5 和 8-10 的表，如果某物的值为 1，它应该显示“Apple”，或者如果它是 2，它必须显示“pear”，如果它不是 1-5，那么它是'其他'。目前正在使用 case 语句，但我听说查询中的函数会使其变慢。

我想要的只是出现“措辞”而不是数字，但是因为表格太大了，我感觉就像它正在迭代每一行以确定要显示的内容。

有没有更快的方法。我考虑过加入，看起来效果不错，但我不知道如何为 1-5 以外的任何东西写“其他”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:54:31.840

`case`语句不是函数。用户定义的函数在某些 SQL 版本中确实有额外的开销。作为一般规则，您不必担心内置函数的开销。

您可以通过以下方式执行此操作：

```
with lookup  as (
     select 1 as val, 'Apple' as str union all
     select 2 as val, 'Pear' as str union all
     select 3 union all select 4 union all select 5
)
select coalesce(l.val, 'other')
from t left outer join
     lookup l
     on t.col = l.val 
```

我希望案例陈述会稍微快一些。

# java - 如何在操作时应用条件线程安全？

> ID：14566866
> 
> 赞同：1
> 
> 时间：2013-01-28T16:45:28.590
> 
> 标签：java, collections, concurrency, thread-safety, critical-section

考虑您有一个共享内存（列表），它将用作“批评部分”。
现在，考虑您在这些场景的列表中总是有项目，并且您希望您的系统以这种方式运行：

1.  Thread1 从列表中获取一些项目，同时 Thread2 想要将项目添加到列表中。允许这种情况（假设我将从头开始获取第一个项目并将新项目插入列表末尾 - 在同一时间！）。

2.  Thread1 想要获得一个项目，同时 Thread2 也想要获得一个项目。这应该失败。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:56:01.307

One possibility is to wrap your List in a class that proxies or overrides the get and add methods.

That way, you can use an explicit `Lock` on the `add` method, so that only one thread can add at any given time.

See for instance:

[http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html)

You could do this either by extending a `List` implementation, and overriding the `add` and `get` methods (or all relevant methods), or by using composition instead of inheritance, having a proxy class that forwards the calls to the list, but decorates the `add` and `get` with the explicit obtaining of the Lock.

A very simple example would be something like:

```
public class SharedMemory<K> {

private final List<K> memoryList;
private static final ReentrantLock lock = new ReentrantLock();

public SharedMemory() {
    memoryList = new ArrayList<>();
}

public void storeItem(K item) {
    memoryList.add(item);
}

public K getItem(int pos){
    lock.lock();
    try{
        return memoryList.get(pos);
    } finally {
        lock.unlock();
    }
}
} 
```

# asp.net - asp:textbox 强制 Internet Explorer Metro 上的数字键盘

> ID：14566867
> 
> 赞同：0
> 
> 时间：2013-01-28T16:45:29.320
> 
> 标签：asp.net, .net, internet-explorer, windows-8

在触摸屏 PC 上，使用 Metro Internet Explorer 时，

当焦点放在 asp:Testbox 控件上时，有什么方法可以强制数字键盘首先打开？

```
<asp:TextBox ID="txtBadge" runat="server" MaxLength="9" style="width: 100px; height: 30px; font-size: 16pt;" TabIndex="1"></asp:TextBox> 
```

它是一个只有数字的文本框，并且在选择它时弹出普通键盘对用户来说很烦人，因为它会减慢用户的速度。

所以代替这个： ![初始触控键盘](../Images/ae7095fb84413b04abd2b7b9a24576ee.png)

我想这样显示： ![数字键盘和符号键盘](../Images/bc70d18d9ee601dba56128b8e401560a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T19:55:05.433

假设 IE10/Metro 遵循标准方法，您的输出中需要 HTML5 `<input type="number"...`。如果您使用的是 .NET 4.5，则只需设置`TextMode="Number"`您的`TextBox`：

```
<asp:TextBox ID="txtBadge" runat="server" TextMode="Number" ... 
```

如果您使用的是 .NET 4.0，则有[一个更新](http://support.microsoft.com/kb/2468871)可以让您指定`type`属性：

```
<asp:TextBox ID="txtBadge" runat="server" type="number" ... 
```

如果您使用的是 .NET 3.5 或更早版本，则内置控件不支持 HTML5 输入类型。您需要编写一个自定义控件来支持它们。

# wordpress - 从 wordpress 文件中调用 $dirpath 时更改 url

> ID：14566871
> 
> 赞同：0
> 
> 时间：2013-01-28T16:45:38.540
> 
> 标签：wordpress, nivo-slider, relative-url

我在 php 页面上有一个幻灯片，用于`$folder = opendir($dirpath);`访问文件夹中的图像。当我输入上述 php 文件的 url 时，一切正常，但是一旦我从 wordpress 页面内部调用这个 php，它就不再访问图像文件夹。

我猜这是因为路径更改为调用 php 的位置。我似乎无法弄清楚我需要用什么替换 '$dirpath' 以便我可以访问文件夹 url。

该标签`<?php bloginfo('stylesheet_directory'); ?>/imagefolder`在不在 php 标签内时访问文件夹，但是我不知道我可以在 php 标签内添加它。

我试过了：

```
$dirpath = bloginfo('stylesheet_directory')."/imagefolder";
$dirURL = "";
$folder = opendir($dirpath); 
```

但这是不正确的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:14:43.233

从文档中[`bloginfo`](http://codex.wordpress.org/Function_Reference/bloginfo)：

> 这总是将结果打印到浏览器。如果您需要在 PHP 中使用的值，请使用[`get_bloginfo()`](http://codex.wordpress.org/Function_Reference/get_bloginfo).

并检查文档`get_bloginfo()`，您会发现使用起来更好[`get_stylesheet_directory_uri()`](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory_uri)，因此您的代码将是

```
$dirpath = get_stylesheet_directory_uri()."/imagefolder";
$folder = opendir($dirpath); 
```

# java - Java Eclipse 在 64 位机器上导入 32 位 DLL

> ID：14566874
> 
> 赞同：1
> 
> 时间：2013-01-28T16:45:57.920
> 
> 标签：java, eclipse

我正在尝试使用该`thinkgear.dll`库来连接 NeuroSky Mindset。

开发人员工具包括一个 ThinkGear.java 类，它是 thinkgear.dll 的包装器。dll 仅兼容 32 位。尝试运行该程序时，我收到无法在 AMD 64 位平台上加载 IA 32 位 .dll 错误。这只会在我的计算机上运行，​​而不是分发。我读过我必须在 32 位模式下运行 jre 还是什么？

另外，我不确定我是否已设置库以正确引用它。我应该怎么做，从一个全新的项目开始，我应该把 dll 和 thinkgear.java 放在哪里才能使用 NeuroSkyApp 类中的方法？对不起，我对java很陌生，我还不是很了解这一切。

这是我在 Eclipse 中的截图：

![Eclipse 截图](../Images/0409782c40c768d0ef7320d20b44ba96.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:50:45.530

您需要安装 32 位 JRE 并相应地在 Eclipse 中为您的项目配置构建环境。

要将外部 dll 添加到您的项目中，您可能会在此处找到有用的信息：[How to add native library to "java.library.path" with Eclipse launch（而不是覆盖它）](https://stackoverflow.com/questions/661320/how-to-add-native-library-to-java-library-path-with-eclipse-launch-instead-of)

# android - ANDROID SQLITE 检查表是否有数据

> ID：14566878
> 
> 赞同：3
> 
> 时间：2013-01-28T16:46:08.560
> 
> 标签：android, sqlite

我想检查我的表是否有记录。这是我尝试过的：

```
if( cursor != null ){
        cursor.moveToFirst();
        if (cursor.getInt(0) == 0) {
        Toast.makeText(getBaseContext(), "No records yet!", Toast.LENGTH_SHORT).show();
        }
    } 
```

Logcat 说：

```
 CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:51:22.223

试试这个

```
cursor.getCount(); 
```

如果光标检索数据计数，它将返回如果这给 0 则没有数据

所以

```
if(cursor != null && cursor.getCount()>0){
   cursor.moveToFirst();
   //do your action
   //Fetch your data

}
else {
 Toast.makeText(getBaseContext(), "No records yet!", Toast.LENGTH_SHORT).show();
    return;
} 
```

注意：即使您`if( cursor != null )`在进行任何查询后检查游标也不会返回空值，因此请执行此操作以检查游标中的数据计数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:48:11.177

`Cursor.getCount()`将为空结果集返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:49:20.663

我想你正在寻找方法`getCount()`。

只需检查`cursor.getCount()==0`空结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:49:53.777

```
if(cursor.moveToFirst()){
//do your work
}
else{
 Toast.makeText(getBaseContext(), "No records yet!", Toast.LENGTH_SHORT).show();
} 
```

# javascript - 使用 JavaScript 和 KineticJS 库在 HTML5 画布上以“网格”布局绘制图像

> ID：14566882
> 
> 赞同：1
> 
> 时间：2013-01-28T16:46:14.407
> 
> 标签：javascript, html5-canvas, kineticjs

我有一组图像，我想在特定位置绘制到 HTML5 画布（即使用“网格”类型布局）。

我有一个名为的函数`drawImage(imageObj)`，它当前将数组中的所有图像绘制到画布上的随机位置。但是，我希望能够预先确定应该绘制图像的一组位置，然后随机选择在这些设置位置中的哪个位置绘制哪个图像（如果绘制多个图像并不重要）相同的位置）。

我的`drawImage(imageObj)`功能目前看起来像这样：

```
function drawImage(imageObj) {
    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,

      /* puts the images in random locations on the canvas */
      x: stage.getWidth() / 20*Math.floor(Math.random()*20),
      y: stage.getHeight() / 15*Math.floor(Math.random()*8+2),
      draggable: true 
    });

    // add cursor styling
    canvasImage.on('mouseover', function() {
      document.body.style.cursor = 'pointer';
    });
    canvasImage.on('mouseout', function() {
      document.body.style.cursor = 'default';
    });

    imagesLayer.add(canvasImage);
} 
```

我尝试稍微改变函数以创建位置“网格”，然后将每个图像绘制到网格中的随机“单元格”：

```
function drawImage(imageObj) {
    /* Create arrays of X & Y coordinates, and select the array elements randomly for use as
        coordinates at which to draw the images*/
    var xPos = new Array();
    xPos[0] = 10;
    xPos[1] = 70;
    xPos[2] = 130;
    xPos[3] = 190;
    xPos[4] = 250;
    xPos[5] = 310;
    xPos[6] = 370;
    xPos[7] = 430;
    xPos[8] = 490;
    xPos[9] = 550;
    xPos[10] = 610;
    xPos[11] = 670;
    xPos[12] = 730;
    xPos[13] = 790;
    xPos[14] = 850;
    xPos[15] = 910;

    var yPos = new Array();
    yPos[0] = 10;
    yPos[1] = 70;
    yPos[2] = 130;
    yPos[3] = 190;
    yPos[4] = 250;
    yPos[5] = 310;
    yPos[6] = 370;
    yPos[7] = 430;

    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,

      /* Now select a random X & Y position from the arrays to draw the images to */
      x: xPos(getRandomXPosition),
      y: yPos(getRandomYPosition),
      draggable: true

      /* puts the images in random locations on the canvas
      x: stage.getWidth() / 20*Math.floor(Math.random()*20),
      y: stage.getHeight() / 15*Math.floor(Math.random()*8+2),
      draggable: true */
    }); 
```

我曾预料到这些线条

```
x: xPos(getRandomXPosition),
y: yPos(getRandomYPosition), 
```

将绘制到画布上的图像的 x 和 y 坐标设置为我的“网格”中的随机“单元格”，由`xPos`和`yPos`数组的哪些随机元素设置为图像的 x 和 y 值被绘制。

但是，当我在浏览器中查看我的页面时，我收到一个控制台错误，上面写着“xPos 不是函数”

```
x: xPos(getRandomXPosition), 
```

我不知道为什么会这样-有人有什么想法吗？我想我会有同样的错误

```
y: yPos(getRandomYPosition), 
```

出于同样的原因。

我知道 xPos 不是一个函数——它是一个数组，我只是想在“getRandomXPosition”位置检索数组元素。

我认为这可能是因为'getRandomXPosition'本身不是一个int，它是一个函数，所以我尝试通过将这些函数定义行更改为：

```
var randomXPosition = function getRandomXPosition(minX, maxX){
    return Math.floor(Math.random()*(maxX - minX +1)) +minX;
}
var randomYPosition = function getRandomYPosition(minY, maxY){
    return Math.floor(Math.random()*(maxY - minY +1)) +minY;
} 
```

然后更新我使用它们的位置，以便我现在将变量作为参数而不是函数传递：

```
x: xPos(randomXPosition),
y: yPos(randomYPosition),
draggable: true 
```

但是，在浏览器中查看页面时，我仍然收到控制台错误，上面写着“xPos 不是函数”

```
x: xPos(randomXPosition), 
```

我不知道为什么会这样-谁能指出我正确的方向？可能还值得一提的是，当图像被绘制到画布上时，我正在使用 kineticJS 库使图像“可拖动”——只是为了更完整地了解我的代码。

任何建议将不胜感激！

**编辑于 28/01/2013 @ 18:05**

好的，我想我知道为什么图像都被绘制在左上角——`drawImage`被调用的函数是 KineticJS 库中的函数，而不是我自己的函数。我正在使用我在本地保存的库的副本，因为我对库提供的功能进行了一些更改。将创建位置数组并从这些位置选择随机元素的代码复制到库中的 drawImage 函数中是否有意义？

**编辑于 29/01/2013 @ 23:15**

对，我看过 kineticJS 库中的 drawImage 函数（我正在使用该库的本地副本），它看起来像这样：

```
drawImage: function() {
        var context = arguments[0];
        context.save();
        var a = Array.prototype.slice.call(arguments);

        if(a.length === 6 || a.length === 10) {
            if(a.length === 6) {
                context.drawImage(a[1], a[2], a[3], a[4], a[5]);
            }
            else {
                context.drawImage(a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9]);
            }
        }

        context.restore();
    } 
```

我不确定我是否完全理解这里的所有代码......行是什么

```
var a = Array.prototype.slice.call(arguments); 
```

正在做？我以前没见过这个“切片”功能......

谁能指出我将如何编辑此函数以包含我编写的代码，以通过从坐标数组中随机选择坐标来使图像全部绘制在不同的位置？据推测，我应该能够将此代码复制并粘贴到函数中，但我不确定我应该把它放在函数的哪个位置......有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:05:25.573

xPos 是一个数组，所以需要使用数组格式来获取它的元素，比如 xPos[key] ，而 randomXPosition 是一个函数，你需要执行它来获取它的返回值，比如 randomXPosition() 。

综上所述 ，

```
X: xPos[randomXPosition()], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:05:37.053

好吧，要访问数组中的某个索引，您必须使用 [] 而不是 ()，如下所示：

```
 xPos[randomXPosition] // if randomXPosition = 1, then this gives you the value at xPos[1]. 

  xPos(randomXPosition) // <-- this is a function call, what it is expecting is something like:
  function xPos(number){
     var value = number * Math.random();
     return value; //return some value maybe?
  }; 
```

# ruby - 解析字符串中的#{var}

> ID：14566885
> 
> 赞同：0
> 
> 时间：2013-01-28T16:46:20.413
> 
> 标签：ruby

我已经加载了一个带有 #{variable} 引用的字符串。我将如何解决字符串中的这些变量`puts`呢？

```
name="jim"
str="Hi #{name}"
puts str 
```

我希望将结果作为参数传递或保存到变量中，而不是放置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:49:24.237

`puts`不解决变量。Ruby 解析器在创建字符串时执行此操作。如果您传递`str`给任何其他方法，则与传递“Hi jim”相同，因为插值已经完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:49:49.340

你可以评估它

```
name = "Patrick"

s = 'hello, #{name}'
s # => "hello, \#{name}"

# wrap the string in double quotes, making it a valid interpolatable ruby string
eval "\"#{s}\"" # => "hello, Patrick" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T18:04:09.137

String 有一个格式选项，显示为[`%`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-25). 它可用于将参数传递到预定义的字符串中，就像插值一样。

```
message = "Hello, %s"
for_patrick = message % "Patrick" #=> "Hello, Patrick"
for_jessie  = message % "Jessie"  #=> "Hello, Jessie"

messages = "Hello, %s and %s"
for_p_and_j = messages % ["Patrick", "Jessie"] #=> "Hello, Patrick and Jessie" 
```

它可能看起来不像“Rubyish”，但我相信它是您正在寻找的功能。

因此，如果您有一个来自某个地方的字符串包含这些占位符，那么您可以将值作为参数传递，如下所示：

```
method_that_gets_hello_message % "Patrick" 
```

这也将允许您只接受您期望的值。

```
message = "I can count to %d"
message % "eleven" #=> ArgumentError: invalid value for Integer() 
```

维基百科上有一个可能的占位符[列表](http://en.wikipedia.org/wiki/Printf_format_string#Format_placeholders)`printf()`，它也应该在 Ruby 中工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T18:35:57.860

听起来您需要模板系统的基础，如果您使用字符串`gsub`或`sub`方法，Ruby 很容易做到这一点。

```
replacements = { '%greeting%' => 'Hello', '%name%' => 'Jim' }
pattern = Regexp.union(replacements.keys)
'%greeting% %name%!'.gsub(pattern, replacements)
=> "Hello Jim!" 
```

您可以轻松地将密钥定义为：

```
replacements = { '#{name}' => 'Jim' } 
```

并使用 Ruby 的普通字符串插值`#{...}`，但我建议不要重用它。而是使用独特的东西。

这样做的好处是目标 => 替换映射可以很容易地放入 YAML 文件或数据库表中，然后您可以将它们换成其他语言或不同的用户信息。天空才是极限。

这样做的好处也是，不涉及评估，它只是字符串替换。通过一些创造性的使用，您实际上可以实现宏：

```
macros = { '%salutation%' => '%greeting% %name%' }
replacements = { '%greeting%' => 'Hello', '%name%' => 'Jim' }
macro_pattern, replacement_pattern = [macros, replacements].map{ |h| Regexp.union(h.keys) }
'%salutation%!'.gsub(macro_pattern, macros).gsub(replacement_pattern, replacements)
=> "Hello Jim!" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T17:49:16.703

这`eval`似乎是*这个特定*任务的唯一解决方案。但是如果我们稍微修改一下任务，我们可以避免这种*肮脏的不安全的耻辱* ：我们可以不使用`eval`本地变量而是**实例**变量：`eval`[`instance_variable_get`](http://apidock.com/ruby/Object/instance_variable_get)

```
@name = "Patrick"
@id = 2 # Test that number is ok
@a_b = "oooo" # Test that our regex can eat underscores

s = 'hello, #{name} !!#{id} ??#{a_b}'

s.gsub(/#\{(\w+)\}/) { instance_variable_get '@'+$1 }
=> "hello, Patrick !!2 ??oooo" 
```

在这种情况下，您甚至可以使用任何其他字符来代替`#{}`（例如`%name%`等），只需稍微修改一下正则表达式。

但是，当然，这一切都*闻起来*了。

# javascript - jt 类执行不超过一次

> ID：14566886
> 
> 赞同：0
> 
> 时间：2013-01-28T16:46:21.023
> 
> 标签：javascript, jquery

我使用[http://plugins.learningjquery.com/cluetip](http://plugins.learningjquery.com/cluetip)插件和 jtip 类

html代码：

```
<a class="jt" href="ajax6.html" rel="ajax6.html" title="jTip Style!">

and jquery :
$('a.jt:eq(0)').cluetip({
  cluetipClass: 'jtip',
  arrows: true,
  dropShadow: false,
  hoverIntent: false,
  sticky: true,
  mouseOutClose: true,
  closePosition: 'title',
  closeText: '<img src="cross.png" alt="close" />'
}); 
```

但是当我想在 jt 班上使用 2 次或更多时间时，只是头等舱工作，例如：

```
<a class="jt" href="ajax6.html" rel="ajax6.html" title="jTip Style!">
<a class="jt" href="ajax5.html" rel="ajax5.html" title="jTip Style!"> 
```

仅加载 ajax6 并显示工具提示，而 ajax5 未加载工具提示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:49:09.413

这是因为您的代码明确指示它仅适用于第一个`<a>`.

去掉选择器中的 ":eq(0)"。

```
$('a.jt').cluetip({ ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:54:25.247

Pointy 是正确的，代码中的 eq 将匹配元素集减少到指定索引处的元素集。这就是为什么你不能捕捉所有元素的原因。

# c# - 使用 AccountManagement 扩展类时如何设置二进制属性？

> ID：14566887
> 
> 赞同：3
> 
> 时间：2013-01-28T16:46:30.260
> 
> 标签：c#, .net-4.0, active-directory, directoryservices, account-management

我正在使用[自定义类在 Active Directory 中公开一些自定义架构](http://www.codeproject.com/Articles/118122/How-to-use-AD-Attributes-not-represented-in-UserPr)。我正在存储一个二进制 blob，根据项目要求，此数据必须存储在 AD 中，我不能使用外部存储（如果可以的话，我会这样做）。

当我创建用户时，它会很好地存储 blob。我也可以很好地检索 blob 并获取我的所有数据。问题是我是否需要更新值并且出现错误

小示例程序：

```
using System;
using System.DirectoryServices.AccountManagement;

namespace SandboxConsole40
{
    class Program
    {
        static void Main(string[] args)
        {
            using(var context = new PrincipalContext(ContextType.Domain))
            {
                using (var clear = ExamplePrincipal.FindByIdentity(context, "example"))
                {
                    if (clear != null)
                        clear.Delete();
                }

                using (var create = new ExamplePrincipal(context, "example", "Password1", false))
                {
                    create.Save();
                }

                using (var set = ExamplePrincipal.FindByIdentity(context, "example"))
                {
                    set.BlobData = new byte[] { 0xDE, 0xAD, 0xBE, 0xEF }; //This fails with method 2.
                    set.Save();
                }

                using (var lookup = ExamplePrincipal.FindByIdentity(context, "example"))
                {
                    Console.WriteLine(BitConverter.ToString(lookup.BlobData));
                }

                using (var update = ExamplePrincipal.FindByIdentity(context, "example"))
                {
                    update.BlobData = new byte[] { 0x12, 0x34, 0x56, 0x67 };
                    update.Save(); //This save fails with method 1.
                }
            }

            Console.WriteLine("Done");
            Console.ReadLine();
        }

        [DirectoryObjectClass("user")]
        [DirectoryRdnPrefix("CN")]
        class ExamplePrincipal : UserPrincipal
        {
            public ExamplePrincipal(PrincipalContext context) : base(context) { }

            public ExamplePrincipal(PrincipalContext context, string samAccountName, string password, bool enabled)
                : base(context, samAccountName, password, enabled) { }

            public static new ExamplePrincipal FindByIdentity(PrincipalContext context, string identityValue)
            {
                return (ExamplePrincipal)FindByIdentityWithType(context, typeof(ExamplePrincipal), identityValue);
            }

            [DirectoryProperty("vwBlobData")]
            public byte[] BlobData
            {
                get
                {
                    if (ExtensionGet("vwBlobData").Length != 1)
                        return null;

                    return (byte[])ExtensionGet("vwBlobData")[0];
                }
                set
                {
                    //method 1
                    this.ExtensionSet("vwBlobData",  value );

                    //method 2
                    //this.ExtensionSet("vwBlobData", new object[] { value});
                }
            }
        }
    }
} 
```

如果我使用方法 1，我会在`update.Save()`操作中遇到以下异常

```
System.DirectoryServices.AccountManagement.PrincipalOperationException 未处理
  H结果=-2146233087
  Message=指定的目录服务属性或值已经存在。

  源=System.DirectoryServices.AccountManagement
  错误代码=-2147016691
  堆栈跟踪：
       //截图
  内部异常：System.DirectoryServices.DirectoryServicesCOMException
       H结果=-2147016691
       Message=指定的目录服务属性或值已经存在。

       源 = System.DirectoryServices
       错误代码=-2147016691
       扩展错误=8321
       ExtendedErrorMessage=00002081：AtrErr：DSID-030F154F，#1：
    0：00002081：DSID-030F154F，问题 1006 (ATT_OR_VALUE_EXISTS)，数据 0，Att 82818fec (vwBlobData)

       堆栈跟踪：
            //截图
       内部异常：

```

如果我使用方法 2，我会从`this.ExtensionSet`调用中得到异常`set.BlobData`。

```
System.ArgumentException 未处理
  H结果=-2147024809
  Message=ExtensionClasses 不能设置元素是另一个集合的集合。
  源=System.DirectoryServices.AccountManagement
  堆栈跟踪：
      //截图
  内部异常：

```

* * *

**总结**：如果当前未设置该值，我可以设置该值，但如果我想覆盖现有值，则会出现错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:55:27.417

我找到了一种解决方法，首先将值设置为 null 它不再引发异常。

```
using (var update = ExamplePrincipal.FindByIdentity(context, "example"))
{
    update.BlobData = null;
    update.Save();
    update.BlobData = new byte[] { 0x12, 0x34, 0x56, 0x67 };
    update.Save(); //No longer fails with method 1.
} 
```

我将这个问题留了一点，看看是否有其他人可以回答是否有“正确”的方法来做到这一点。

* * *

找到了第二个不需要强制保存的解决方法。

```
[DirectoryProperty("vwBlobData")]
public byte[] BlobData
{
    get
    {
        if (ExtensionGet("vwBlobData").Length != 1)
            return null;

        return (byte[])ExtensionGet("vwBlobData")[0];
    }
    set
    {
        ((DirectoryEntry)this.GetUnderlyingObject())
                             .Properties["vwBlobData"].Value = value;
    }
} 
```

通过直接转换为基础对象，您可以直接设置值。我使用 ILSpy 进行了检查，并且处理 AccountManagement 包装器处理了底层对象，因此调用`Dispose()`不需要。`GetUnderlyingObject()`

* * *

**最佳解决方案**

我发现第二个解决方法需要对象持久工作，所以我采取了两全其美的方法。这适用于您尚未持久化对象、对象为 null 以及对象已经具有值的情况。

```
[DirectoryProperty("vwBlobData")]
public byte[] BlobData
{
    get
    {
        if (ExtensionGet("vwBlobData").Length != 1)
            return null;

        return (byte[])ExtensionGet("vwBlobData")[0];
    }
    set
    {
        if(ExtensionGet("vwBlobData").Length == 0)
            this.ExtensionSet("vwBlobData", data); 
        else
            ((DirectoryEntry)this.GetUnderlyingObject())
                                 .Properties["vwBlobData"].Value = data;
    }
} 
```

# sql - 光标的目的是什么？

> ID：14566892
> 
> 赞同：2
> 
> 时间：2013-01-28T16:46:46.700
> 
> 标签：sql, oracle11g

我尝试在互联网上搜索 SQL 中游标的目的、使用和实现。我找到了一些答案，它们用非常书卷的语言进行了非常详细的解释，而且这些示例对于理解函数本身来说非常复杂。我是数据库/SQL 的新手所以有人可以用一个简单的例子来解释光标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:50:25.967

游标允许您逐行对数据执行操作。例如，在 T-SQL 中为表中的每一行调用一个存储过程：

```
DECLARE @id_variable int

DECLARE the_cursor CURSOR
FOR SELECT id FROM SomeTable 

OPEN the_cursor
FETCH NEXT FROM the_cursor INTO @id_variable

WHILE @@FETCH_STATUS = 0
BEGIN
    EXEC MyStoredProcedure @id_variable

    FETCH NEXT FROM the_cursor INTO @id_variable
END

CLOSE the_cursor
DEALLOCATE the_cursor 
```

一般来说，如果可能的话，应该避免使用游标，因为它们使用起来很麻烦并且性能很差。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T16:51:45.070

在其最简单的形式中，游标用于遍历结果集的行。将一行想象为列表中的一个对象。使用游标，您只能访问该行。

如果您熟悉其他编码语言中的 foreach 循环，那么您将完成许多相同的功能。

这个链接不是太书本。[非书呆子描述](http://www.techopedia.com/definition/27387/cursor-databases)

# c++ - 列表元素被替换而不是插入

> ID：14566894
> 
> 赞同：0
> 
> 时间：2013-01-28T16:46:49.257
> 
> 标签：c++, list, vector, kinect, openni

我目前正在使用 C++ 开发一个 kinect 项目。我在 Ubuntu 12.04（32 位）下工作，我使用 OpenNI/NITE。我想找到一只手并将其坐标保存在列表中，对于这一部分，我有以下代码：

标题：

```
#ifndef HAND_H_
#define HAND_H_
#include <list>
#include<iostream>
#include <stdio.h>

class Hand
{
public:
    std::list<double> Xpoints;
    std::list<double> Ypoints;
    std::list<double> Zpoints;
    Hand(int id);
    int handID;
    void AddPoint(double x, double y, double z);
    void ClearList(void);
    void ReleaseHand(void);
    int GetID(void);
    int Size();
};
#endif 
```

共产党：

```
#include "Hand.h"

Hand::Hand(int id)
{
    handID = id;
}

void Hand::AddPoint(double x, double y, double z)
{
    ("Hand ID: %d: (%f,%f,%f)\n", handID, x, y, z);
    if(handID > 0)
    {
        Xpoints.push_back(x);
        Ypoints.push_back(y);
        Zpoints.push_back(z);
        ("Added to Hand ID: %d: (%f,%f,%f)\n", handID, x, y, z);
    }
    else
    {
        std::cout << "Hand does not exist anymore - Inconsistency!" << std::endl;
    }
}

void Hand::ClearList(void)
{
    Xpoints.clear();
    Ypoints.clear();
    Zpoints.clear();
}

void Hand::ReleaseHand(void)
{
    handID = -1; // if (ID==-1) no valid hand
    Xpoints.clear();
    Ypoints.clear();
    Zpoints.clear();
}

int Hand::GetID(void)

{
    return handID;
}

int Hand::Size()
{
    return Xpoints.size();
} 
```

这里`AddPoints()`被称为：

```
Hand hand(cxt->nID);
hand.AddPoint(cxt->ptPosition.X, cxt->ptPosition.Y, cxt->ptPosition.Z);
handlist.Add(&hand); 
```

它工作正常。后来，当我从我的 kinect 获得手的新坐标时，我称之为：

```
Hand tmp = handlist.Get(cxt->nID);
tmp.AddPoint(cxt->ptPosition.X, cxt->ptPosition.Y, cxt->ptPosition.Z);
std::cout << "Hand size " << tmp.Size() << std::endl; 
```

在这里，当这是第一次调用时，第二组坐标被添加到我手中的列表中。但在那之后，列表不能大于大小 2。这意味着不是插入，而是替换最后一个点。（我已经把它们打印出来了，所以我可以看到坐标）我也尝试过`push_front`替换前面的坐标，以及向量而不是列表，这对于`push_back`and有同样的问题`insert`。我还在 Windows 中使用 VS2010 尝试了相同的代码，它运行良好。我完全不知道我做错了什么。

因此，如果有人可以帮助我，那就太好了。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:58:20.363

I see a couple problems.

One you're adding the pointer to a stack variable to the handlist. As soon as the hand goes out of scope, you have a dangling pointer.

Second, your handlist.Get is returning (presumably) by copy and thus anything you add to it isn't reflected in the version that handlist occupies. ie: You could call handlist.Get(), add 500 points, then call handlist.Get again and it would be the original version.

Your handlist.Get() function is also not returning a pointer, but you're passing handlist.Add() a pointer so your interface isn't clear.

# silverlight - 我在哪里可以找到 Silverlight 5 的“Silverlight Developer Runtime”？

> ID：14566899
> 
> 赞同：0
> 
> 时间：2013-01-28T16:47:12.410
> 
> 标签：silverlight, silverlight-5.0, remote-debugging

我需要远程调试在 Mac 上运行的 Silverlight 应用程序。根据[微软的演练](http://msdn.microsoft.com/en-us/library/cc903948(v=vs.95).aspx)，我需要在 Mac 上安装开发者运行时。

我已经在谷歌上搜索了一段时间，但我找不到最新版本。[这个问题](https://stackoverflow.com/questions/3232271/where-can-i-get-the-silverlight-developer-runtime-for-silverlight-4)有第 4 版的链接和第 5 版的测试版，但当前版本没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T01:15:26.760

试试这个： [Silverlight 5 Developer Runtime for Mac OSX（32 位）](http://go.microsoft.com/fwlink/?LinkId=229325)

# macos - 用于 Mac Ada 编程的 Gnat

> ID：14566903
> 
> 赞同：10
> 
> 时间：2013-01-28T16:47:31.067
> 
> 标签：macos, text-editor, ada, gnat

我正在我的编程课上学习*Ada 95*，我想在我的 MacBook 上安装*gnat*编译器。我不知道在哪里可以得到一个好的*gnat*来编译我的代码，以及如何安装它。

我目前将*gedit*作为我的文本编辑器，因为这是我们在实验室环境中使用的。我是 Mac 世界的新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T18:14:03.940

AdaCore为 Mac OS X[提供](http://libre.adacore.com/)了一个出色的免费 Ada 编译器。

您应该可以使用 GNAT GPL 版本。按照下载链接 - 选择*学术发展的免费软件*- 在页面底部，按照*构建您的下载包*。

*选择您的平台*为`x86_64-darwin`, `2012`。单击*GNAT 2012*，然后单击`gnat-gpl-2012-x86_64-apple-darwin10.8.0-bin.tar.gz`（这包含您目前需要的所有内容）。

您还需要 Xcode（Mac OS X 免费）。Pre-Lion，这是（我认为）安装 DVD 上的可选安装。在 Lion 或 ML 中，您需要从 App Store 获取它（在 ML 中，它位于*Categories* > *Developer Tools* > *Xcode*中）。在 ML 中，您还需要安装命令行工具：打开 Xcode，然后*Xcode* > *Preferences* > *Downloads* > *Components*，在命令行工具中选择*安装*。

我说先安装 Xcode，因为 GNAT 安装需要它（您可以通过以下方式判断是否安装了命令行工具`which make`：如果答案返回空白，则未安装）。无论如何，对于 GNAT 安装，

```
$ cd
$ tar zxvf ~/Downloads/gnat-gpl-2012-x86_64-apple-darwin10.8.0-bin.tar.gz
$ cd gnat-gpl-2012-x86_64-apple-darwin10.8.0-bin
$ sudo ./doinstall 
```

安装完成后就不需要安装程序了，可以删除。

默认情况下将 GNAT 安装在 下`/usr/local/gnat`，您需要确保它`/usr/local/gnat/bin`在您的路径上（无论如何，在 之前`/usr/bin`）。我会编辑`~/.bash_profile_common`添加

```
PATH=/usr/local/gnat/bin:$PATH 
```

但我仍然无法知道哪些`~/.bash*`文件做了什么！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-04-18T21:17:58.000

我有 OS X Yosemite 10.10.3，我按照以下步骤操作。

1.  从这个地方下载 GNAT [http://libre.adacore.com/download/configurations](http://libre.adacore.com/download/configurations)。选择 Mac OS X 作为平台。

2.  在终端上执行以下命令：

    1.  将上一步下载的文件解压或（*`tar`*例如，如下：

        ```
        tar zxvf gnat-gpl-2012-x86_64-apple-darwin10.8.0-bin.tar.gz 
        ```

        注意：这假设您与在步骤 1 中下载的文件位于同一文件夹中。

    2.  `cd gnat-gpl-2012-x86_64-apple-darwin10.8.0-bin`

    3.  `sudo ./doinstall`

3.  编辑您的`.bash_profile`文件，`/Users/{YOUR_USER_NAME}/.bash_profile`使其也具有以下行

    ```
    export PATH=$PATH:/opt/local/bin:/usr/local/gnat/bin 
    ```

4.  保存`.bash_profile`文件。

5.  打开一个新的终端。您现在应该可以执行`gnatmake`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-01-14T21:25:11.023

这里的答案已经很老了，不再是最好的选择。仅命令行开发非常痛苦，尤其是如果您刚刚开始使用该语言。替代方案 GNAT Studio IDE 在 MacOS X 上不再受支持，但在 Linux 和 Windows 上仍受支持。不过没有什么大的损失，因为它有点笨重、速度慢并且与 MacOS 的集成很差。

幸运的是，现在有一个 VSCode 插件支持 GNAT Studio 中可用的所有主要功能，例如语法着色、调试和 IntelliSense，以及更好的整体用户界面：

[https://marketplace.visualstudio.com/items?itemName=AdaCore.ada](https://marketplace.visualstudio.com/items?itemName=AdaCore.ada)

奇怪的是，它的推广不如 GNAT Studio 好。事实上，我在设置开发环境遇到困难后，一时兴起发现了这个 VSCode 插件。设置插件的说明很简单。它还拥有最简洁、最全面的工具链安装说明。

# java - JavaFX 2 TreeView - 如何更改进入编辑模式的默认行为？

> ID：14566904
> 
> 赞同：1
> 
> 时间：2013-01-28T16:47:33.283
> 
> 标签：java, javafx-2

受[http://docs.oracle.com/javafx/2/ui_controls/tree-view.htm](http://docs.oracle.com/javafx/2/ui_controls/tree-view.htm)上的 JavaFX 教程的启发，我想知道如何更改行为以在编辑模式下输入单元格。我想得到的行为是

*   单击鼠标左键：只需选择单元格
*   在两次鼠标左键单击上：选择单元格并调用一些操作
*   鼠标右键单击：在编辑模式下输入单元格

我试图在 TreeView/TreeCell 上安装鼠标事件处理程序，但似乎该事件已被 TreeCellBehavior 消耗。

在类 TreeCellBehvior 中有以下方法：

```
private void simpleSelect(MouseEvent e) {
    TreeView tv = getControl().getTreeView();
    TreeItem treeItem = getControl().getTreeItem();
    int index = getControl().getIndex();
    MultipleSelectionModel sm = tv.getSelectionModel();
    boolean isAlreadySelected = sm.isSelected(index);

    tv.getSelectionModel().clearAndSelect(index);

    // handle editing, which only occurs with the primary mouse button
    if (e.getButton() == MouseButton.PRIMARY) {
        if (e.getClickCount() == 1 && isAlreadySelected) {
            tv.edit(treeItem);
        } else if (e.getClickCount() == 1) {
            // cancel editing
            tv.edit(null);
        } else if (e.getClickCount() == 2/* && ! getControl().isEditable()*/) {
            if (treeItem.isLeaf()) {
                // attempt to edit
                tv.edit(treeItem);
            } else {
                // try to expand/collapse branch tree item
                treeItem.setExpanded(! treeItem.isExpanded());
            }
        }
    }
} 
```

我不确定是否可以用我自己的实现替换 TreeCellBehavior。虽然这种方法是私有的，但我不确定这是否是正确的方法。任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:44:50.307

我自己解决了。我默认禁用 TreeView 的可编辑。对于每个 TreeItem，都有一个允许更改项目名称的上下文菜单。如果调用上下文菜单操作，则将 TreeView 设置为可编辑，并调用带有当前 TreeItem 的 TreeView.edit()。现在 startEdit() 在幕后被调用，并且编辑模式处于活动状态。

但是，在按下 enter 并调用 commitEdit() 后我有一些奇怪的行为。此方法检查单元格是否仍处于编辑模式（它是并且因此返回 true）导致 cancelEdit() 的内部调用？！？！作为一种解决方法，我引入了一个 commitModeProperty 并检查 cancelEdit() 如果它已设置..否则永远不会设置新的文本值。

这是我的代码：

```
public class FolderTreeCell extends TreeCell<FolderCellType> {

// workaround for a strange behaviour in commitEdit.. see initTextFieldListener() 
private BooleanProperty commitModeProperty = new SimpleBooleanProperty(false);

public FolderTreeCell() {
    assert Platform.isFxApplicationThread();
}

private ContextMenu createContextMenu() {
    MenuItem menuItem = new MenuItem("Change folder name");

    menuItem.setOnAction(new EventHandler<ActionEvent>() {
        @Override
        public void handle(ActionEvent evt) {
            getTreeView().setEditable(true);
            getTreeView().edit(getTreeItem());
        }

    });

    return new ContextMenu(menuItem);
}

private void initTextFieldListener() {
    getItem().textFieldProperty().get().setOnKeyReleased(new EventHandler<KeyEvent>() {
        @Override
        public void handle(KeyEvent evt) {
            if (evt.getCode() == KeyCode.ENTER) {
                commitEdit(getItem()); // TODO calls updateItem() when isEditing() is true causing invocation of cancelEdit() ?!?!
            } 
        }

    });
}

@Override
public void commitEdit(FolderCellType newFolderCellType) {
    commitModeProperty.set(true);
    super.commitEdit(newFolderCellType);
    commitModeProperty.set(false);
}

@Override
public void startEdit() {
    super.startEdit();

    setGraphic(getItem().getEditBox());

    if (getItem().textFieldProperty().get().getOnKeyReleased() == null) {
        initTextFieldListener();
    }

    getItem().textFieldProperty().get().selectAll();
    getItem().textFieldProperty().get().requestFocus();
}

@Override
public void cancelEdit() {
    super.cancelEdit();

    getTreeView().setEditable(false);
    if (!commitModeProperty.getValue()) {
        getItem().resetCurrentEntry();
    }

    setGraphic(getItem().getViewBox());
}

@Override
public void updateItem(FolderCellType item, boolean empty) {
    super.updateItem(item, empty);

    if (empty || item == null) {
        setText(null);
        setGraphic(null);
    } else {
        if (isEditing()) {
            setGraphic(item.getEditBox());
        } else {
            setGraphic(item.getViewBox());

            if (getContextMenu() == null) {
                setContextMenu(createContextMenu());
            }
        }
    }

    getTreeView().setEditable(false);
} 
```

}

# php - 如何使用 AJAX 进行 cURL php 发出实时请求？

> ID：14566906
> 
> 赞同：0
> 
> 时间：2013-01-28T16:47:47.933
> 
> 标签：php, ajax, imgur

我目前正在使用此代码：

```
 <form enctype="multipart/form-data" method="post" action="upload_img.php">
    Choose your file here:
    <input name="uploaded_file" type="file"/>
    <input type="submit" value="Upload It"/>
    </form>
    <?
    if( isset($_FILES['uploaded_file']) )
{
    $IMGUR_API_KEY = 'APIKEY';
    $filename = $_FILES['uploaded_file']['tmp_name'];
    $handle = fopen($filename, "r");
    $data = fread($handle, filesize($filename));

    //$data is file data
    $pvars   = array('image' => base64_encode($data), 'key' => $IMGUR_API_KEY);
    #$pvars   = array('key' => $IMGUR_API_KEY);
    $timeout = 30;
    $curl    = curl_init();

    curl_setopt($curl, CURLOPT_URL, 'http://api.imgur.com/2/upload.xml');
    #curl_setopt($curl, CURLOPT_URL, 'http://api.imgur.com/2/gallery.xml');
    curl_setopt($curl, CURLOPT_TIMEOUT, $timeout);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $pvars);
    $xml = curl_exec($curl);
    $xmlsimple = new SimpleXMLElement($xml);
    echo '<img height="180" src="';
    echo $xmlsimple->links->original;
    echo '">';

    curl_close ($curl);
    }
?> 
```

效果很好，但是我需要将其用作单独的表单来插入多个字段。最后，我需要做的就是发出 AJAX cURL 请求来上传照片，然后将 imgur.com url 获取到直接图像。我将如何使此表单成为通过 AJAX 执行此操作的提交，以便我可以留在此页面上...任何帮助将不胜感激，它不必完全编写，而是一个想法的火花。到目前为止，我不知道我要去哪里。

谢谢， HackyWackee

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:05:28.817

您可以尝试类似或类似的方法：

```
 <form enctype="multipart/form-data" method="post" action="upload.php" target="my_iframe">
    Choose your file here:
    <input name="uploaded_file" type="file"/>
    <input type="submit" value="Upload It"/>
    </form>
<!-- when the form is submitted, the server response will appear in this iframe -->

<script language="JavaScript">
<!--
function autoResize(id){
    var newheight;
    var newwidth;

    if(document.getElementById){
        newheight=document.getElementById(id).contentWindow.document .body.scrollHeight;
        newwidth=document.getElementById(id).contentWindow.document .body.scrollWidth;
    }

    document.getElementById(id).height= (newheight) + "px";
    document.getElementById(id).width= (newwidth) + "px";
}
//-->
</script>

<IFRAME name="my_iframe" SRC="upload.php" width="100%" height="200px" id="iframe1" marginheight="0" frameborder="0" onLoad="autoResize('iframe1');"></iframe> 
```

然后将您的 php 放入“upload.php”。

# ssl - 使用 libcurl/openssl 下载 https 内容而不解密它

> ID：14566907
> 
> 赞同：1
> 
> 时间：2013-01-28T16:47:48.747
> 
> 标签：ssl, https, libcurl

是否可以在不实际解密的情况下下载 HTTPS 内容（在 C 程序中，最好通过 libcurl/openssl）？

我需要为许多 URL 编写下载速度测试代码，其中一些是 HTTPS，我注意到对于 HTTPS，有时瓶颈是客户端 CPU。换句话说，我需要告诉你“如果你有一台非常快的机器，你可以通过 https://... 的这个链接实现这种快速下载”。

目前我正在使用 libcurl，但如果有其他框架能够下载未解密的内容，我不介意花几个小时的编码。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:01:39.323

不，不可能使用 libcurl。我可以肯定地说。

我也不知道用 OpenSSL 有什么方法可以做到这一点，因为你几乎必须说 SSL 来获取数据，并且说它你需要解密它。

# sql - Oracle DB 是否允许执行非存储过程？

> ID：14566908
> 
> 赞同：1
> 
> 时间：2013-01-28T16:47:53.420
> 
> 标签：sql, oracle

我想在我的应用程序中使用一种脚本，允许用户在我的 Oracle RBO DB 上执行任意 SQL。不仅仅是选择/更新，还有一些复杂的循环。但也不是存储过程（没有任何理由永久存储此类代码）。

Oracle中是否有这样的东西-“非存储过程”-它是如何调用的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:50:25.497

是的，这是可能的。

它被称为“匿名 PL/SQL 块”。

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/overview.htm#i8859](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/overview.htm#i8859)

# sql - 确定是否存在至少一行具有给定条件的行

> ID：14566910
> 
> 赞同：33
> 
> 时间：2013-01-28T16:48:03.657
> 
> 标签：sql, oracle, count

Employee 表有 ID 和 NAME 列。名称可以重复。我想知道是否至少有一行名称为“kaushik%”。

所以查询应该返回真/假或 1/0。

是否可以使用单个查询找到它。如果我们尝试类似

```
select count(1) from employee where name like 'kaushik%' 
```

在这种情况下，它不返回真/假。此外，我们正在遍历表中的所有记录。有没有办法在简单的 SQL 中，每当获取满足条件的第一条记录时，它应该停止检查进一步的记录。或者这样的事情只能在 Pl/SQL 块中处理？

****编辑 *** Justin 提供的第一种方法看起来是正确的答案**

 **```
SELECT COUNT(*) FROM employee WHERE name like 'kaushik%' AND rownum = 1 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-28T16:55:35.500

通常，您会将其表达为

```
SELECT COUNT(*)
  FROM employee
 WHERE name like 'kaushik%'
   AND rownum = 1 
```

谓词允许 Oracle在`rownum = 1`找到第一个匹配行后立即停止查找，或者

```
SELECT 1
  FROM dual
 WHERE EXISTS( SELECT 1
                 FROM employee
                WHERE name like 'kaushik%' ) 
```

where`EXISTS`子句允许 Oracle 在找到第一个匹配行后立即停止查找。

第一种方法更紧凑，但在我看来，第二种方法更清晰一些，因为您确实是在寻找特定行是否存在而不是试图计算某些东西。但是第一种方法也很容易理解。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-28T16:50:16.187

怎么样：

```
select max(case when name like 'kraushik%' then 1 else 0 end)
from employee 
```

或者，什么可能更有效，因为`like`可以使用索引：

```
select count(x)
from (select 1 as x
      from employee
      where name like 'kraushik%'
     ) t
where rownum = 1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T17:07:50.467

由于您要求 sql 查询应返回 1 或 0，因此您可以尝试以下查询：-

```
select count(1) from dual 
where exists(SELECT 1 
             FROM employee
             WHERE name like 'kaushik%') 
```

Since the above query uses Exists, then it will scan the employee table and as soon as it encounters the first record where name matches "kaushik", it will return 1 (without scanning the rest of the table). If none of the records match, then it will return 0.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:52:24.237

```
select 1 
 where exists ( select name 
                  from employee 
                  where name like 'kaushik%'
               ) 
```**

# vb.net - VB.NET - WebBrowser 附加标题 - 用户代理覆盖/取消其他标题？

> ID：14566911
> 
> 赞同：1
> 
> 时间：2013-01-28T16:48:07.247
> 
> 标签：vb.net, browser, user-agent, referrer

我正在尝试在 WebBrowser 控制请求中添加两件事：1）用户代理，2）引用 URL，（可选 3）：接受类型。

我的代码：

```
Dim Headers As String = "Accept: */*" & Chr(10) & Chr(13)
Headers = Headers & "Referer: " & "http://www.google.com/" & Chr(10) & Chr(13)
Headers = Headers & "User-Agent: " & "My Program User Agent" & Chr(10) & Chr(13)
WebBrowser1.Navigate(UrlToVisit, "_self", Nothing, Headers) 
```

上面的代码只发送用户代理。如果我删除用户代理，则接受和引用 URL 都已设置。

似乎每当我添加用户代理附加标头时，任何其他自定义附加标头都会被取消。

这是 WebBrowser 的错误/无法做到的事情，还是我在这里做错了什么！？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:58:53.637

编辑：稍后解决了问题-来自文本框的我的用户代理有一个额外的 vbcrlf 导致其他标题不起作用，在修剪后一切正常:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T17:11:07.763

另一个注意事项：你设置 chr(10) & chr(13) 应该是相反的。http 标准中的 CRLF 表示 chr(13) & chr(10)

# scala - Build.scala：指定scala版本不起作用

> ID：14566914
> 
> 赞同：2
> 
> 时间：2013-01-28T16:48:15.233
> 
> 标签：scala, playframework, sbt, salat

我使用 playframework，这是我在 Build.scala 中的 appDependencies：

```
 val appDependencies = Seq(
// Add your project dependencies here,
jdbc,
anorm,
"com.rabbitmq" % "amqp-client" % "3.0.1",
"com.typesafe.akka" %% "akka-agent" % "2.1.0",
"org.mongodb" %% "casbah" % "2.5.0",
"com.novus" % "salat_2.9.1" % "1.9.1",
"se.radley" % "play-plugins-salat_2.9.1" % "1.1" 
```

)

scala 2.10 没有 salat 和 play-salat 插件，所以我明确指定了 scala 版本。但它没有效果：

```
[info] Updating {file:/home/johndoe/projects/myproject/}myproject...
[warn]  module not found: com.novus#salat_2.10;1.9.1                              
[warn] ==== local: tried
[warn]   /home/johndoe/projects/lib/play/repository/local/com.novus/salat_2.10/1.9.1/ivys/ivy.xml
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/novus/salat_2.10/1.9.1/salat_2.10-1.9.1.pom
[warn] ==== Typesafe Snapshots Repository: tried
[warn]   http://repo.typesafe.com/typesafe/snapshots/com/novus/salat_2.10/1.9.1/salat_2.10-1.9.1.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/novus/salat_2.10/1.9.1/salat_2.10-1.9.1.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::                       
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.novus#salat_2.10;1.9.1: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] (*:update) sbt.ResolveException: unresolved dependency: com.novus#salat_2.10;1.9.1: not found
[warn] some of the dependencies were not recompiled properly, so classloader is not avaialable
[info] Updating {file:/home/johndoe/projects/myproject/}myproject...
[warn]  module not found: com.novus#salat_2.10;1.9.1                              
[warn] ==== local: tried
[warn]   /home/johndoe/projects/lib/play/repository/local/com.novus/salat_2.10/1.9.1/ivys/ivy.xml
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/com/novus/salat_2.10/1.9.1/salat_2.10-1.9.1.pom
[warn] ==== Typesafe Snapshots Repository: tried
[warn]   http://repo.typesafe.com/typesafe/snapshots/com/novus/salat_2.10/1.9.1/salat_2.10-1.9.1.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/com/novus/salat_2.10/1.9.1/salat_2.10-1.9.1.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::                       
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: com.novus#salat_2.10;1.9.1: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] (*:update) sbt.ResolveException: unresolved dependency: com.novus#salat_2.10;1.9.1: not found 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:38:31.943

Salat 1.9.2-SNAPSHOT 适用于 2.10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:02:29.000

让我承认我的无知：原因是我`play`每次修改 Build.scala 时都无法运行命令。我唯一尝试的是`run`，一次又一次。

# mysql - 根据先前计算的值插入值

> ID：14566920
> 
> 赞同：3
> 
> 时间：2013-01-28T16:48:44.843
> 
> 标签：mysql

我有下表称为“tasks_processes”：

```
id| task_id | process_id | start | end  
 1| 2       | 43         | 0     | 250
 2| 2       | 82         | 250   | 500
 3| 2       | 21         | 500   | 750 
```

因此，“开始”和“结束”列代表范围的界限，并且在任务中是唯一的。对于新进程，我需要像这样执行 INSERT SELECT 查询：

```
INSERT INTO tasks_processes (start,end,task_id,process_id) 
    SELECT 
        COALESCE ((SELECT MAX(end) FROM tasks_processes WHERE task_id=2),0) as new_val , 
        new_val + 250, 
        2, 
        12; 
```

换句话说，我需要根据先前计算的值插入值。但是 MySQL 给了我 DatabaseError: no such column: new_val

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:51:41.913

您必须重复子查询，如下所示：

```
INSERT INTO tasks_processes (start,end,task_id,process_id) 
SELECT COALESCE ((SELECT MAX(end) FROM tasks_processes WHERE task_id=2),0), 
       COALESCE ((SELECT MAX(end) FROM tasks_processes WHERE task_id=2),0) + 250, 
       2, 
       12; 
```

或者你可以使用这样的东西：

```
INSERT INTO tasks_processes (start,end,task_id,process_id) 
SELECT new_val, new_val+250, 2, 12
FROM (SELECT coalesce(MAX(end), 0) as new_val FROM tasks_processes WHERE task_id=2) s; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:52:52.907

你不能`new_val`用作列，试试这个

```
 INSERT INTO tasks_processes (start,end,task_id,process_id) 
SELECT 
    COALESCE ((SELECT MAX(end) FROM tasks_processes WHERE task_id=2),0) as new_val , 
    COALESCE ((SELECT MAX(end) FROM tasks_processes WHERE task_id=2),0) + 250, 
    2, 
    12; 
```

# vb.net - 如何创建等待多个异步 WCF 调用完成的单个后台线程？

> ID：14566921
> 
> 赞同：1
> 
> 时间：2013-01-28T16:48:44.937
> 
> 标签：vb.net, multithreading, wcf, asynchronous

我的场景包含一个 .NET 4.0 WCF 服务，由包装在类库中的 .NET 4.5 客户端调用。

客户端异步调用 WCF 服务，并显示它返回的任何数据。该代码是非常标准的东西，看起来像这样：

```
Private m_Service As WcfService = Nothing

Public Event GetDataComplete As GetEventHandler

Public Sub GetData(bytes As Byte())

    m_Service = New WcfService()
    AddHandler m_Service.GetWcfDataComplete, AddressOf Service_GetWcfDataComplete
    m_Service.GetWcfData(bytes)

End Sub

Private Sub Service_GetWcfDataComplete(sender As Object, e As WcfService.GetWcfDataCompletedEventArgs)

    ' Process results from server...
    ' Signal completion.
    RaiseEvent GetDataComplete(Me, New GetEventArgs(New DataItem(e.Result)))

End Sub 
```

因为 WCF 服务将返回的数据限制为 64k 块，所以我必须多次调用该服务，直到所有内容都下载完毕。此外，还会`' Process results from server...`进行一些处理以使用返回的数据更新 UI。可以预见的是，这会对 UI 线程造成可怕的影响。

因此，标题中的问题 - 我如何创建一个等待多个异步 WCF 调用完成的单个后台线程？

我尝试过但失败的事情：

*   使用`Async/Await`模式。Visual Studio 说字节数组是不可等待的。我不知道如何破解我的出路。
*   使用`BackgroundWorker`. 使用这种方法，我无法弄清楚如何发出进程结束的信号。因为 WCF 调用使用回调，所以我不再有权访问`DoWorkEventArgs`WCF 服务调用何时返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:38:30.560

在我开始之前，这在技术上并不构成答案。该站点限制了我可以在评论中添加的文本数量，因此我将其发布为答案。

所以：

我玩过各种方法。理想的解决方案似乎是一个成熟的多线程模型，它会阻塞直到异步调用返回。当线程可能不会存活超过一两秒（假设与服务器通信良好）时，这似乎是一种*非常*严厉的方法，但在极少数情况下可能会存活几分钟。它必须是一个阻塞线程，因为在异步模型中，后台工作人员会在调用服务器之后和调用的回调被触发之前死掉。

我现在使用的解决方案是将来自服务器的所有数据放入队列中，并在队列有项目时启动后台工作程序。后台工作人员将项目保存到数据库中，然后将项目添加到模型中，进而触发更新 UI 的事件。

队列方法有一个严重的缺陷，如果应用程序在下载完所有内容后终止，但在后台工作人员设法使所有项目出队并处理所有项目之前，这些项目将丢失给客户端，因为服务器假定它们已同步。

解决这个问题的所有方法都让我觉得很混乱（例如，一旦出队并保存，就回调服务器，确认同步，或保存，然后入队和处理），因此仍然非常欢迎任何其他建议。

# r - 对 R 中的经验加权分布函数执行 KS.test

> ID：14566922
> 
> 赞同：3
> 
> 时间：2013-01-28T10:23:18.423
> 
> 标签：r, cdf

我想比较具有不同数据量和不同起点/终点的两个数据集。我想使用 KS.test，因为我在我编写的 C 程序中做类似的事情（通过 GSL histogram -> GSL cdf -> self-written KS test 比较数据）但由于该程序尚未发布，我仍然无法使用它为此。然而，我确实想在 R 中使用相同的原理，但似乎无法掌握如何在 R 中做到这一点。

我有两个经验加权分布函数（使用 spatstat 库创建）并试图对它们执行 KS.test 但它给了我一个我不太确定如何解释的错误。

我执行的 R 代码：

预测和实验包含一组 xy 值（不同的长度、开始和结束 X 值）。

```
cdf_e<-ewcdf(experimental[,1],weights=experimental[,2])
cdf_p<-ewcdf(predicted[,1],weights=predicted[,2])
ks.test(cdf_e,cdf_p) 
```

我得到的信息是：

```
Error in x[!is.na(x)] : object of type 'closure' is not subsettable
In addition: Warning message:
In is.na(x) : is.na() applied to non-(list or vector) of type 'closure' 
```

谁能告诉我这具体意味着什么（因为 ?ks.test 没有提到任何与此错误相关的内容），或者我是否应该使用不同的函数调用或其他什么。

PS：每个数据文件的前10行如下：

预料到的

```
m/z I
292.1 1272
322.0 815
324.9 780
350.0 922
363.9 781
366.0 87049
366.9 12773
367.9 1620
383.6 1258 
```

实验性的

```
m/z I
366.139 1229.62
367.142 186.775
368.145 10.9435
528.192 19.8701
529.195 4.39351
579.435 11.5899
680.996 73.8311
681.861 7.2526
745.032 5.31373 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T11:54:56.910

我想这是因为 ks.test 期望两个数据值向量或一个数据值向量和一个命名分布函数作为参数；而不是 ECDF 本身。如果您已经有两个 ECDF，您可以自己计算 KS 统计量。

# c# - StreamReader C# - 只读取特定的行

> ID：14566928
> 
> 赞同：1
> 
> 时间：2013-01-28T16:48:58.413
> 
> 标签：c#, asp.net

我正在尝试从 webResposne 仅记录第 3 行（或第 1 到第 3 行，如果无法仅记录一行）。

这是我现在使用的代码片段。

```
StreamReader read = new StreamReader(myHttpWebResponse.GetResponseStream(), System.Text.Encoding.UTF8);
        String result = read.ReadToEnd();
        Log("Access", Server.HtmlEncode(result), "Success"); 
```

我得到以下输出

```
<html>
<head>
    <title>Access is Granted.</title>
    <style>
     body {font-family:"Verdana";font-weight:normal;font-size: .7em;color:black;} 
     p {font-family:"Verdana";font-weight:normal;color:black;margin-top: -5px}
     b {font-family:"Verdana";font-weight:bold;color:black;margin-top: -5px}
     H1 { font-family:"Verdana";font-weight:normal;font-size:18pt;color:red }
     H2 { font-family:"Verdana";font-weight:normal;font-size:14pt;color:maroon }
... 
```

等等。

我只想记录“（title>Access is Granted.（/title>”）而不打印任何其他内容（或该行之后的任何内容）。

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:14:34.600

构建扩展方法：

```
public static IEnumerable<string> ReadLines(this StreamReader reader)
{
     yield return reader.ReadLine();
} 
```

然后你可以使用 LINQ 选择你想要的任何一行，下面的例子是选择第三行：

```
 var result  = streamReader.ReadLines()
                           .ElementAtOrDefault(2); 
```

您仍然可以通过这种方式利用*延迟执行*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T17:17:15.733

正则表达式可以解决问题。简单的例子：

```
string test = @"<html>\n<head>\n<title>Access is Granted.</title>\n<style>...";
string output = Regex.Match(test, "<title>.*</title>").Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:50:34.143

如果您需要阅读特定行而不是using ，则`ReadToEnd`应该查看 using [`ReadLine`](http://msdn.microsoft.com/en-us/library/system.io.streamreader.readline.aspx)，那么您应该能够计算读取的行数以了解何时到达所需的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T16:55:40.527

您可以将所有行读入一个数组，以便您可以通过索引引用特定行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T16:58:05.593

Use [HtmlAgilityPack](http://htmlagilitypack.codeplex.com/).

Run the response through it and extract the line(s) you need.

Plain and simple

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T17:01:11.593

如何使用 an`XmlReader`从 HTML 文档中读取您想要的确切值？由于`XmlReader`是流式传输，因此您不必像使用数组方法那样阅读整个文档，它会自动为您解析它。这比依赖`<title>`标签在某一行更安全。

```
using(var reader = XmlReader.Create(myHttpWebResponse.GetResponseStream()))
{
    reader.ReadToDescendant("title");
    var result = "<title>" + reader.ReadElementString() + "</title>";
    Log("Access", Server.HtmlEncode(result), "Success");
} 
```

# php - PHP 和 MySQLi - 无法通过引用传递参数 2

> ID：14566929
> 
> 赞同：16
> 
> 时间：2013-01-28T16:49:00.383
> 
> 标签：php, mysqli

我正在尝试创建一个函数来检查更新并插入一些数据，但在第一步中我遇到了一个问题，$stmt->bind_param 说它没有通过引用或类似的方式传递参数。

我在功能代码下面附上了：

```
public function killTarget($killerid,$victimiid,$victimcode)
    {

        if ($this->checkUsercode($victimcode,$victimiid))
        {
            $stmt = $this->_db->prepare("UPDATE users SET status =? WHERE user_id =?");
            $stmt->bind_param("ii",0,$victimiid);

            if ($stmt->execute())
            {
                $stmt->store_result();
                $stmt->fetch();

                $stmt = $this->_db->prepare("SELECT victim_id FROM target WHERE killer_id = ?");
                $stmt->bind_param("i",$victimiid);

                if ($stmt->execute())
                {
                    $stmt->store_result();
                    $stmt->bind_result($targetid);
                    $stmt->fetch();

                    $stmt = $this->_db->prepare("INSERT INTO target (killer_id, victim_id) VALUES (?,?)");
                    $stmt->bind_param("ii",$killerid,$targetid);

                    if ($stmt->execute())
                    {
                        $stmt->store_result();
                        $stmt->fetch();
                        $stmt->close();
                    }
                }
            }
            else
            {
                Main::setMessage("targets.php",$this->_db->error,"alert-error");
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-01-28T16:51:07.217

您**不能**在 mysqli 中执行此操作：

```
$stmt->bind_param("ii",0,$victimiid); 
```

`0`需要是一个变量。

尝试这个：

```
$zero = 0;
$stmt->bind_param("ii",$zero,$victimiid); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-28T16:51:23.207

小心！[`mysqli_stmt::bind_param`](http://php.net/manual/en/mysqli-stmt.bind-param.php)接受对变量的**引用**，而不是常量值。因此，您必须创建一个变量来保存它`0`，然后改为引用该变量。

```
$i = 0;
$stmt->bind_param("ii", $i, $victimiid); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-28T16:50:36.943

将 0 设为变量或将其直接包含在查询中。

```
$zero = 0;
$stmt->bind_param("ii", $zero, $victimiid); 
```

# javascript - 无法使用 Backbone.Marionette 访问模型属性

> ID：14566944
> 
> 赞同：1
> 
> 时间：2013-01-28T16:49:41.537
> 
> 标签：javascript, backbone.js, coffeescript, marionette

我对使用项目/复合视图访问模型属性有一点问题。在我的 ItemView 中，我拥有所有模型属性数据，但是当我想`<%=username%>`在我的 html/模板中输出任何内容时。

我不知道为什么这不起作用。通常代码和我的一样简单。

要点：[https](https://gist.github.com/e6e68b525468606bd039) ://gist.github.com/e6e68b525468606bd039或以下：

索引.html：

```
<section>
  <%= test %>
  <ul class="thumbnails" id='userslist'></ul>
</section>

<script type="text/template" id="usertemplate">
  Username: <%= username %>
</script> 
```

测试咖啡：

```
define [ 'jquery', 'underscore', 'backbone', 'marionette', 'text!templates/us/index.html' ], ( $, _, Backbone, Marionette, TPL) ->

    class UserView extends Backbone.Marionette.ItemView
        template  : '#usertemplate'
        tagName   : 'li'
        className : 'span2'

        initialize: ->
            console.log 'm:', @model.attributes

    class UsPageView extends Backbone.Marionette.CompositeView
        template : _.template TPL
        itemView : UserView

        itemViewContainer: "#userslist"

        initialize: (options) ->
            @collection = options.collection
            @collection.fetch()

        appendHtml: (cView, iView, idx) ->
            cView.$(@itemViewContainer).append iView.el

        serializeData: ->
            test: 'ok'

    UsPageView 
```

console.log 打印：`Object { username: "Foo" }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T21:57:45.527

我找到了一个临时解决方案： - 我用我的模板代码创建了一个新文件：

```
 // --- members.html
  Username: <%= username %> 
```

我像这样更改了我的 ItemView 类：

```
define [ 'jquery', 'underscore', 'backbone', 'marionette', 'text!templates/us/index.html', 'text!templates/us/members.html' ], ( $, _, Backbone, Marionette, TPL, M) ->

    class UserView extends Backbone.Marionette.ItemView
        tagName   : 'li'
        className : 'span2'

        template: (serializedModel) =>
            _.template M, @model.toJSON()

    class UsPageView extends Backbone.Marionette.CompositeView
        template          : _.template TPL
        itemView          : UserView    
        itemViewContainer : "#userslist"

        initialize: (options) ->
            @collection = options.collection
            @collection.fetch()

        appendHtml: (cView, iView, idx) ->
            cView.$(@itemViewContainer).append iView.el

    UsPageView 
```

这个解决方案对我有用。对于我最初的问题，似乎是当我想恢复我的模板原始文本时。通常 $('#usertemplate').text() 返回带有所有 '<%= ... %>' 但没有的模板数据。我不知道为什么。

如果有人找到我仍然感兴趣的解决方案:)

# asp.net - 使用下拉列表动态排序时出错

> ID：14566959
> 
> 赞同：0
> 
> 时间：2013-01-28T16:50:21.097
> 
> 标签：asp.net, sql, sqldatasource

我想将 SqlDataSource 连接到网格视图并使用下拉列表动态更改排序数据。我使用了这段代码，它给了我这个错误：

代码：

```
SELECT ...
FROM ...
ORDER BY
    CASE WHEN @order='Country' THEN Country  END DESC,
    CASE WHEN @order='City' THEN City  END ASC,
    CASE WHEN @order='name' THEN name  END ASC 
```

错误：CLR 类型不存在或您无权访问它。

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:24:27.807

尝试将您的 ORDER BY 子句更改为以下内容：

```
SELECT ...
FROM ...
ORDER BY
    CASE @order WHEN 'Country' THEN Country ELSE 1 END DESC,
    CASE @order WHEN 'City' THEN City WHEN 'name' THEN name ELSE 1 END ASC 
```

# java - 使用 LinkedHashMap.putAll() 插入的元素的顺序是什么？

> ID：14566962
> 
> 赞同：7
> 
> 时间：2013-01-28T16:50:31.280
> 
> 标签：java, linkedhashmap

我正在阅读 Javadoc for [`LinkedHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashMap.html)，其中提到：

> putAll 方法为指定映射中的每个映射生成一个条目访问，按照指定映射的条目集迭代器提供键值映射的顺序。

我的问题是，“每个映射一个条目访问”是什么意思。如果有人可以帮助提供一个例子来澄清这一点，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T17:10:30.647

本段适用于使用[特殊构造函数创建的](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html#LinkedHashMap%28int,%20float,%20boolean%29)映射，该构造函数根据最后访问顺序生成迭代顺序（相对于标准 LinkedHashMap 的插入顺序。

它只是说，如果一个键`K`在映射中并且您也调用`putAll(someOtherMap)`where `someOtherMap`contains `K`，这将被视为一种访问`K`，它将被移动到映射的末尾（从迭代顺序的角度来看）。

换句话说，从访问的角度来看，`putAll`等价于`for (Entry e : entries) map.put(e);`（在伪代码中）。

**人为的例子：**

```
public static void main(String[] args) throws Exception {
    Map<String, String> m = new LinkedHashMap<> (16, 0.75f, true);

    m.put("a", "a");
    m.put("b", "b");
    System.out.println("m = " + m); // a, b
    m.put("a", "a");
    System.out.println("m = " + m); // b, a

    Map<String, String> m2 = new LinkedHashMap<>();
    m2.put("b", "b");

    m.putAll(m2);
    System.out.println("m = " + m); // a, b: putAll was considered as an access
                                    // and the order has changed
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T17:17:29.877

应该在上下文中查看 API 文档中的注释（“putAll 方法为指定映射中的每个映射生成一个条目访问，按照指定映射的条目集迭代器提供键值映射的顺序。”）。以下是包含上下文的完整 API 文档：

> *提供了一个特殊的构造函数来创建一个链接的哈希映射，其迭代顺序是其条目**最后一次访问***的顺序，从最近最少访问到最近访问（访问顺序）。这种映射非常适合构建 LRU 缓存。调用 put 或 get 方法会导致访问相应的条目（假设它在调用完成后存在）。putAll 方法为指定映射中的每个映射生成一个条目访问，按照指定映射的条目集迭代器提供键值映射的顺序。没有其他方法生成条目访问...

本节描述影响“最后访问”确定的“访问”的定义。在这种情况下，它继续描述在访问映射方面如何处理 put/get 和 putall。put(k,v) 和 get(k) 分别被视为一次访问。类似地，putAll() 被视为按条目集维护的顺序对所有映射的一次访问。您可以将其想象为，对于每个 putAll()，所有映射的访问计数器都将按条目集维护的顺序增加 1。

希望这是您正在寻找的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:51:59.897

`LinkedHashMap`保留将元素放入其中的顺序。putAll 方法用于将所有映射从指定映射复制到此映射。

将所有映射从指定映射复制到此映射（可选操作）。这个调用的效果等同于对指定映射中从键 k 到值 v 的每个映射调用一次 put(k, v) 在这个映射上的效果。如果在操作进行时修改了指定的映射，则此操作的行为是未定义的。

“每个映射一个条目访问”意味着 putall 调用的效果等同于在指定映射中从键 k 到值 v 的每个映射调用一次 put(k, v) 的效果。

# javascript - .bind 不适用于动态 html

> ID：14566963
> 
> 赞同：-6
> 
> 时间：2013-01-28T16:50:32.397
> 
> 标签：javascript, jquery

在下面的 .bind 事件中 - 当我注入动态 html 时，我无法重现结果。尝试使用 .on/.live 但这些都不起作用

```
function initToggleDetails() {
    abc.Log("initToggleaction");

    $('.alink').unbind('click.link');

    $('.alink').bind('click.link', function(event) {
        event.preventDefault();
        togglelDetailsaction(this);
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:52:48.827

您是否尝试过 on() / off() 的委托版本？？？

```
$(document).off('click.link', '.alink');

$(document).on('click.link', '.alink', function(event) {
    event.preventDefault();
    togglelDetails(this);
}); 
```

# jekyll - Jekyll 永久链接配置

> ID：14566966
> 
> 赞同：0
> 
> 时间：2013-01-28T16:50:35.273
> 
> 标签：jekyll

我很难为我的博客文章配置永久链接。我设置博客的方式是 root/news/index 。我将 _config.yml 设置为“./”，因此我的所有文章都与我的新闻 index.html 位于同一目录中。但是每当我在新闻主页上点击我的文章的永久链接时，它会将我重定向到“mysite.com/article”而不是“mysite.com/news/article”。我也尝试过“./news/”，但它只会在我原来的新闻文件夹中创建另一个新闻文件夹。我也尝试过设置“漂亮”，但它仍然转到“mysite.com/..”而不是“mysite.com/news/...”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:48:07.973

在 _config 文件中，您可以将永久链接更改为您喜欢的任何内容，例如我的是

```
permalink: /blog/:title 
```

至于日期，您可以使用 YMAL 前端材料选择您自己的日期，同样在我的

```
title:example date: you can pick what ever date you want 
```

所以在你的情况下，我会试试这个

```
permalink: /news/:title 
```

# spring-security - 使用嵌入式 ldap 服务器进行春季安全测试的 gradle 测试挂起

> ID：14566971
> 
> 赞同：0
> 
> 时间：2013-01-28T16:50:39.173
> 
> 标签：spring-security, ldap, gradle

我有一组带有嵌入式 ldap 服务器的 spring-security 3.1.3 测试，这些服务器可以从 eclipse 中正常运行，或者在使用 -Dtest.single 选项通过 gradle 运行时。但是，当我进行干净构建以运行项目中的整个测试集时，执行会挂在它遇到这些测试的点，此时我必须终止 gradle 进程。如果我@Ignore ldap 测试其他测试工作正常。如果我不使用嵌入式服务器（即连接到外部服务器），这些测试可以正常工作。可能与 gradle 以多线程方式执行测试并尝试托管内存服务器等事实有关。
  任何机构都面临类似的问题？以及如何获得有关可能发生的事情的更多有用信息？gradle 上的 --info 或 --debug 没有帮助，并且在终止 gradle 进程的情况下也不会生成测试报告（如在正常测试失败的情况下生成的报告）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:01:23.080

您可能需要设置`maxParallelForks`为 1。

为什么不复制 Spring Security 本身使用的方法，它[为集成测试配置单独的任务](https://github.com/SpringSource/spring-security/blob/master/gradle/javaprojects.gradle#L68)？对于这些测试，它[设置`maxParallelForks`为 1 。](https://github.com/SpringSource/spring-security/blob/master/ldap/ldap.gradle#L35)

这样，您可以继续从并行运行单元测试中受益。

# r - 拆分列表并使用 R-plyr 写入多个文件？

> ID：14566972
> 
> 赞同：0
> 
> 时间：2013-01-28T16:50:44.297
> 
> 标签：r, plyr

经过一些计算，我对如何从输入矩阵的每一行写入多个文件感到头疼。我现在使用的代码如下所示：

```
akl <- function(dii) {
    ddi <- as.matrix(dii)
    m   <- rowMeans(ddi)
    M   <- mean(m) # mean(ddi) == mean(m)
    r   <- sweep(ddi, 1, m)
    b   <- sweep(r, 2, m)
    return(b + M)
}
require(plyr)
akl.list <- llply(1:nrow(aa), function(i) {
                               akl(dist(aa[i, ]))
}) 
```

我创建的 akl.list 对于大型输入矩阵来说太大了，我无法将它存储在 RAM 中。我的想法是在文件上写入我在 llply 循环中获得的每个矩阵。有没有简单的方法可以做到这一点？谢谢你！！吉比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:21:03.793

您可以使用`do_ply`，因为您只需要循环功能

```
d_ply(aa, 1,function(row){
             a <- akl(dist(row))
             write.table(a)           ## you save in a file here
           },.progress='text'         ## to show progress (optional)
) 
```

# c# - 需要一个视图来发布到不同的控制器 MVC

> ID：14566978
> 
> 赞同：2
> 
> 时间：2013-01-28T16:50:54.123
> 
> 标签：c#, asp.net-mvc

我的主页索引页面上有一个搜索栏：

```
<p>
    Find by name: @Html.TextBox("SearchString")  
    <input type="submit" value="Search" />
</p> 
```

我需要将此字符串提交到我的代码控制器中，并使用代码控制器而不是主控制器将用户带到代码索引页面。似乎参数不足以让它接受它：

```
public ViewResult Index(string sortOrder, string searchString)
{
} 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T16:53:19.590

将其包装在一个表单中并指定控制器和您要提交到的操作：

```
@using (Html.BeginForm("Index", "SomeOtherControllerName"))
{
    <p>
        Find by name: @Html.TextBox("SearchString")  
        <input type="submit" value="Search" />
    </p>
} 
```

# c# - C# 数据适配器参数

> ID：14566980
> 
> 赞同：2
> 
> 时间：2013-01-28T16:50:56.420
> 
> 标签：c#, sql

我已经编写了一些代码来从我的数据库中获取一些数据。`stored procedure`唯一使用作为`ID`参数，并使用它来过滤结果。我已经`stored procedure`使用 EXEC 命令运行`SSMS`它并且它可以工作。但是，当我尝试使用底部的代码调用它时，它失败了，说我没有提供参数。谁能看到我做错了什么？

```
using (SqlConnection sqlConnect = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
{       
    try
    {
        DataTable dtBets = new DataTable("All Bets");
        using (SqlDataAdapter sqlDA = new SqlDataAdapter("up_Select_all", sqlConnect))
        {
            sqlDA.SelectCommand.Parameters.Add("@ID", SqlDbType.BigInt).Value = pCustomer.CustomerID;

            sqlDA.Fill(dtBets);
            return dtBets;
        }                        
    }

    catch (SqlException ex)
    {
        //catch code
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T16:55:23.520

您忘记告诉`DataAdapter`它应该调用 a `Stored-Procedure`：

```
using (SqlDataAdapter sqlDA = new SqlDataAdapter("up_Select_all", sqlConnect))
{
    sqlDA.SelectCommand.CommandType = CommandType.StoredProcedure;
    sqlDA.SelectCommand.Parameters.Add("@ID", SqlDbType.BigInt).Value = pCustomer.CustomerID;

    sqlDA.Fill(dtBets);
    return dtBets;
} 
```

# c++ - 删除部分有什么问题？

> ID：14566984
> 
> 赞同：-4
> 
> 时间：2013-01-28T16:51:13.743
> 
> 标签：c++, visual-studio-2010

这是我的代码。我遇到的问题是我无法使删除器部分工作。我想删除结构的一个元素。这是您添加、搜索和删除添加的元素的基本结构。元素也按升序排序。

```
#include <iostream>

using namespace std;

struct el {
    int key;
    el *next;
} *start;

void init();
void add(int n);
void list();
void search(int n); // ima za dopylvane
void deleter(int n);
void main() {
    init();
    int n, num;
    do {
        cout << "\n Menu\n";
        cout << "\n1 - Add element";
        cout << "\n2 - List elements";
        cout << "\n3 - Searching for element";
        cout << "\n4 - Delete element";
        cout << "\n5 - Exit";
        cout << "\n Your choice:";
        cin >> n;
        switch (n) {
            case 1:
                {
                    cout << "\n Input num:";
                    cin >> num;
                    add(num);
                    break;
                }
            case 2:
                {
                    list();
                    break;
                }
            case 3:
                {
                    cout << "\n Input num for searching:";
                    cin >> num;
                    search(num);
                    break;
                }
            case 4:
                {
                    cout << "\n Input num for deleting:";
                    cin >> num;
                    deleter(num);
                    break;
                }

        }
    }
    while (n != 5);
}
void list() {
    el *p = start;
    if (start) while (p) {
        cout << p->key << "  ";
        p = p->next;
    } else cout << "\n Empty list";
}
void init() {
    start = NULL;
}
void add(int n) {
    el *p = start;
    if (!start) {
        start = new el;
        start->key = n;
        start->next = NULL;
    } else {
        if (start->key > n) {
            start = new el;
            start->key = n;
            start->next = p;
        } else {
            el * q;
            while ((p->key < n) && (p->next)) {
                q = p;
                p = p->next;
            }
            if (p->key > n) {
                el *s;
                s = new el;
                s->key = n;
                s->next = p;
                q->next = s;
            } else {
                el *s;
                s = new el;
                s->key = n;
                s->next = NULL;
                p->next = s;
            }
        }

    }
}
void search(int n) {
    el *p = start;
    if (!start) cout << "\nEmpty list!";
    else while ((p->key != n) && (p-> next))
    p = p->next;
    if (p->key == n) cout << "\nYes!";
    else cout << "\nNo!";
}

void deleter(int n) {
    el *p = start;
    if (!start) cout << "Enfsad";
    else while ((p->key != n) && (p->next)) {
        n = start->key;
        start = start->next;
        delete p;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:12:22.710

你的删除器功能应该是这样的。

```
void deleter (int n)
{
    el *p = start;
    el *prev = p;

    if (!start)
    {
        cout<<"Enfsad";
    }

    if(start->key == n)
    {
        start = start->next;
        delete prev;
    }
    else
    {
        while (p)
        {
            if(p->key == n)
            {
                prev->next = p->next;
                p->next = NULL;
                delete p; 
                break;
            }
            prev = p;
            p = p->next;
        }
    }
} 
```

虽然我认为你需要检查一个好的链表应该是怎样的。

# google-chrome - 在浏览器中查看格式化 HTML 源代码的工具

> ID：14566985
> 
> 赞同：3
> 
> 时间：2013-01-28T16:51:14.827
> 
> 标签：google-chrome, firefox, web-applications, browser, safari

我正在用 Python 开发一个网页抓取工具，我需要熟悉某些网站上各种 HTML 标签的功能。不幸的是，Chrome、Firefox 和 Safari 提供的“查看源代码”不能输出格式非常好的 HTML 源代码——它往往会在同一行放置大量标签。浏览器是否提供任何可以清理一些东西的插件，或者我是否需要在 Python 中获取/开发某种工具，将脏 HTML 作为输入并输出格式清晰的 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-11-19T18:27:18.753

因为我主要使用 Chrome，所以我能想到的最好的例子是[Code Formatter (Chrome)](https://chrome.google.com/webstore/detail/code-formatter/deecjbhfakhcegonhediiniinjdgmfie?utm_source=chrome-app-launcher-info-dialog.)

这不是自动的；您必须将整个页面复制并粘贴到应用程序中。应用程序窗口也很小（据我所知，这是不可改变的），但相对有效。

...以及 [JavaScript 和 CSS 美化器](https://chrome.google.com/webstore/detail/javascript-and-css-code-b/iiglodndmmefofehaibmaignglbpdald?hl=en)

更有效和更干净，但正如标题所示，仅适用于 .Js 和 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-22T20:29:46.850

使用 Firefox，您可以选择（突出显示 - 我也在为初学者编写）文本，一旦被选中，释放鼠标左键并在选定区域内单击鼠标右键，然后选择“查看选择源”。然后，您可以复制突出显示的文本并将其粘贴。

我的复合示例： [查看选择源](https://i.stack.imgur.com/MEaUP.gif)

# javascript - Xcode 中等效的 XML Dom 树

> ID：14566993
> 
> 赞同：1
> 
> 时间：2013-01-28T16:51:26.717
> 
> 标签：javascript, html, ios, objective-c, xcode

我正在将用javascript编写的应用程序转换为objective-c。

其中一个函数称为“getXML()”，用于读取 XML 文件并将其转换为 Dom 树。

我想知道objective-c中的等价物是什么。来自基于网络的背景，我不确定用什么来代替 Dom 树。我在网上找到了可以在 X-Code 中使用的 Dom Tree 包，但理想情况下我希望使用一种等效于 dom 树并内置于 x-code 中的方法。

有人可以推荐使用什么来代替吗？

亲切的问候，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:55:59.637

人们经常使用内置的 SAX 解析器，`NSXMLParser`尽管如果你想要完整的树，你必须付出一些努力。有关更多信息，请参阅其[类参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)或查看[Event-Driven XML Programming Guide](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/XMLParsing/XMLParsing.html#//apple_ref/doc/uid/10000186i)。

另请参阅[如何为您的 iPhone 项目选择最佳 XML 解析器](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)。