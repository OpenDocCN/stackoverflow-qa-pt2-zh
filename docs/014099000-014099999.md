# StackOverflow 问答 14099000-14099999

# c++ - 如何访问新的 c++11 标准大小类型？

> ID：14099000
> 
> 赞同：1
> 
> 时间：2012-12-31T07:53:01.537
> 
> 标签：c++, c++11

我正在谈论的类型显示在第 3 页：http: [//dl.dropbox.com/u/13100941/C%2B%2B11.pdf](http://dl.dropbox.com/u/13100941/C%2B%2B11.pdf)

int8_t uint8_t int16_t uint16_t int32_t uint32_t int64_t uint64_t

我正在使用 Visual Studio 2012。如果 GNU/Mingw 不同，还包括如何在这些编译器上使用它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T07:55:57.407

您需要包括`<cstdint>`. 它适用于任何符合**C++11**或**C99**的编译器。

对于那些`<cstdint>`不可用或损坏的编译器，有[*Boost.Integer*](http://www.boost.org/libs/integer/doc/html/boost_integer/cstdint.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T08:00:20.927

从 2010 版开始，您可以简单地使用`#include <cstdint>`MSVC 中的 which。

# asp.net - aspnetForm.target ='_blank'; 在 asp.net 4 中不起作用

> ID：14099001
> 
> 赞同：1
> 
> 时间：2012-12-31T07:53:04.233
> 
> 标签：asp.net

我正在使用以下代码，但它不起作用。但在 3.5 中它工作正常。如果有人可以解释原因以及如何在asp.net 4中使用此代码有效？

`OnClientClick="aspnetForm.target ='_blank';"`

```
<asp:Button ID="Button1" runat="server" Text="Button" 
         onclick="Button1_Click" OnClientClick='aspnetForm.target="_blank";' /> 
```

后面的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        Response.Redirect("Default.aspx");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:06:04.417

我认为 asp.net 4 中新的 Predictable ClientID 设置会导致这个问题。

如果您将 controlRenderingCompatibilityVersion 设置回 3.5 并将 ClientId 设置为 AutoID，它将再次起作用。

但最好的解决方案是使用 javascript 来执行此操作。

```
<script language="javascript" type="text/javascript">
    function openWin(url) {
        var wnd = window.open(url, 'title', 'width=600,height=400,toolbar=1');
        wnd.focus();
    }
</script> 
```

ASP.NET 按钮

```
<asp:Button ID="openButton" runat="server" Text="Button"           
    onclick="btnOpenPop_Click" /> 
```

背后的代码

```
protected void btnOpenPop_Click(object sender, EventArgs e)
{
    string url = "http://www.yoururl.com";
    ClientScript.RegisterStartupScript(this.GetType(), "OpenWin", "<script>openWin('" + url + "')</script>");
} 
```

# xcode - 具有许多视图的应用程序中的 xcode segue 跳转管理

> ID：14099002
> 
> 赞同：0
> 
> 时间：2012-12-31T07:53:05.943
> 
> 标签：xcode, navigation, segue

我有七个视图需要在任何其他视图之间导航。我不想继续从每一个中进行segues，因为会不断创建新实例......以及其他问题。我最初试图做的是让所有的转场从一个主视图开始，然后转到指定的目标视图。当用户离开该目标视图时，如果他们想要转到除主视图之外的任何其他视图，则将设置一个公共变量。当主视图重新出现时，它会检查该公共变量以查看是否需要另一个跳转。在 Home 视图中，我将 segue 跳转检查放入`-(void)viewDidAppear:(BOOL)animated`函数中。这样做的问题是您在进入新的目标视图之前会看到主屏幕一秒钟。这`-(void)viewWillAppear:(BOOL)animated`不适用于segues。我猜这是因为它还没有完全释放旧的segue？

有没有更好的方法来处理这样的自由格式多视图导航问题？如果有人需要它，我可以发布一些我正在尝试做的示例代码。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:02:54.740

听起来你需要一个`UITabBarController`.

它允许您拥有多个视图控制器，并通过点击屏幕底部的选项卡在它们之间切换。

它允许您只拥有每个控制器的一个实例，因此当您在它们之间切换时，数据会持续存在，并且您不会每次都创建新实例。

这是一个外观示例（注意屏幕底部的选项卡）：

[![在此处输入图像描述](../Images/88626efbf9d3b142aa7bc301f6e34d3d.png)](https://i.stack.imgur.com/Oqr7Z.png)
[（来源：[xamarin.com](http://docs.xamarin.com/@api/deki/files/866/=Picture_1.png)）]

# iphone - TabBar 图像插图未转移到 AdHoc 构建

> ID：14099003
> 
> 赞同：3
> 
> 时间：2012-12-31T07:53:15.700
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar, uiedgeinsets

因此，下面的代码使我所有的标签栏图像居中，并且在通过点击运行构建时它可以正常工作，但是当我加载 AdHoc 构建时，只有最后一个图像正确居中。

```
[[[self tabBar].items objectAtIndex:0] setImageInsets:UIEdgeInsetsMake(2.0, 0, -2.0, 0)];
[[[self tabBar].items objectAtIndex:1] setImageInsets:UIEdgeInsetsMake(2.0, 0, -2.0, 0)];
[[[self tabBar].items objectAtIndex:2] setImageInsets:UIEdgeInsetsMake(2.0, 0, -2.0, 0)];
[[[self tabBar].items objectAtIndex:3] setImageInsets:UIEdgeInsetsMake(1.0, 0, -1.0, 0)];
[[[self tabBar].items objectAtIndex:4] setImageInsets:UIEdgeInsetsMake(4.5, 0, -4.5, 0)]; 
```

知道为什么会发生这种情况吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T10:31:49.840

经过几次清理和移动一些代码，以便在视图加载之前值发生变化，它们在两个构建中都正确定位！

# javascript - Javascript：使用不规则键遍历对象中的所有记录

> ID：14099006
> 
> 赞同：1
> 
> 时间：2012-12-31T07:53:26.317
> 
> 标签：javascript, arrays

更新

我有一个对象`var myObject = {};`

我使用这样的密钥构建它：

```
myObject[key] = {
   name: ...
}; 
```

所以想象一下我创建了三个记录：

```
myObject[13] = {...};
myObject[281] = {...};
myObject[76] = {...}; 
```

我现在想循环遍历对象，就好像它是一个数组一样。

```
var i,
    length = myObject.length;     // ?? Problem here 'cos it ain't an array

for (i = 0; i < length; i += 1) {
    ????
}; 
```

我怎样才能引用三个元素`????`？我不知道数字 13、281 和 76，`myObject[0]`也不会找到第一条记录。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T07:55:27.483

如果您的键不连续，则不应使用数组。改用一个对象：

```
var myObject = {}; 
```

要遍历对象的键，请使用以下`for..in`语法：

```
for (var key in myObject) {
    var value = myObject[key];
} 
```

要使您当前的代码正常工作，您必须遍历*所有*键并检查它们是否具有值：

```
for (var i = 0; i < myArray.length; i++) {
    var value = myArray[i];

    if (typeof value === 'undefined') continue;

    console.log(key, ' -> ', value)
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T08:17:20.250

如果您使用的是现代 JavaScript 引擎：

```
myArray.forEach(function(val, key) {
    // val = the value
    // key = the index
}); 
```

就是这样。要获得它的大小（在这种情况下为 3）...

```
var size = myArray.reduce(function(prev) {
    return ++prev;
}, 0); 
```

* * *

如果您希望它在较旧的浏览器中工作，您需要做其他事情。最简单的解决方案可能是自己实现这样的事情：

```
for (var i = 0; i < myArray.length; i ++) {
    var val = myArray[i];
    if (typeof val !== "undefined") {
        console.log(val);
    }
} 
```

为了获得它的大小，这是一个类似的努力（如果你同时做这两种方法，你可以结合上述方法）：

```
var size = 0;
for (var i = 0; i < myArray.length; i ++) {
    if (typeof myArray[i] !== "undefined")
        size ++;
} 
```

如果您想使用`forEach`并`reduce`喜欢上面的内容，您需要找到一个 shim（基本上，您需要自己实现这些功能）。我会推荐这个页面上的两个[shim 和这个页面上](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)的[shim](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reduce)[中](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reduce)[较大的`forEach`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/forEach)一个，或者使用[一个库来填充它们](https://github.com/kriskowal/es5-shim)。[`reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/reduce)

# html - 表格数据的语义和表示

> ID：14099013
> 
> 赞同：1
> 
> 时间：2012-12-31T07:54:36.173
> 
> 标签：html, css, html-table, semantic-markup

现在，我正在使用`<table>`HTML 显示表格数据，这在语义上是正确的。我想知道是否有办法在查看数据时更改数据的显示方式以减少表格的外观。

我的标记目前看起来像这样：

```
<table>
    <thead>
    <tr>
        <th scope='col'>Vehicle</th>
        <th scope='col'>License plate</th>
        <th scope='col'>Location</th>
        <th scope='col'>Deployment date</th>
        <th scope='col'>Date of last inspection</th>
        <th scope='col'>Last inspection at</th>
    </tr>
    </thead>
    <tbody>
    <tr itemscope>
        <th scope='row' itemprop='primary_key_id'> ... </th>
        <td itemprop='license_plate'> ... </td>
        <td itemprop='location'> ... </td>
        <td itemprop='deployment_date'><time> ... </time></td>
        <td itemprop='last_inspection_date'><time> ... </time></td>
        <td itemprop='last_inspection_odometer'> ... </td>
    </tr>
    </tbody>
</table> 
```

当然，表格中不止一辆车，但这就是我现在显示数据的方式。还有其他列，出于我的示例的目的，我将坚持使用这六个。

我希望做更多的列表视图，但我不确定在此处使用`<ul>`and`display: table-*`是否在语义上是正确的，因为这是表格数据。我知道我也可以将单元格与块级元素一起`<span itemprop='...'>`放入`<td>`单元格中，以按照我想要的方式排列内容，但我也不确定这是否正确。

演示方面，这就是我想要实现的目标：

```
<table>
    <tbody>
    <tr itemscope>
        <th scope='row'>
            <b itemprop='primary_key_id'> ... </b>
            <div itemprop='license_plate'> ... </div>
        </th>
        <td>
            <p>Located at: <span itemprop='location'> ... </span>
            <p>Deployed at: <time itemprop='deployment_date'> ... </time>
        </td>
        <td>
            Last inspected on <time itemprop='last_inspection_date'> ... </time>
            at <span itemprop='last_inspection_odometer'> ... </span>
        </td>
    </tr>
    </tbody>
</table> 
```

但在这种情况下，我不只是使用表格标记将信息设置为三列吗？如果我这样做会有所不同吗？

```
<ul>
    <li itemscope>
        <div class='column'>
            <b itemprop='primary_key_id'> ... </b>
            <div itemprop='license_plate'> ... </div>
        </div>
        <div class='column'>
            <p>Located at: <span itemprop='location'> ... </span>
            <p>Deployed at: <time itemprop='deployment_date'> ... </time>
        </div>
        <div class='column'>
            Last inspected on <time itemprop='last_inspection_date'> ... </time>
            at <span itemprop='last_inspection_odometer'> ... </span>
        </div>
    </li>
</ul> 
```

标记和设置数据样式的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:27:06.993

如果您在“Presentation-wise, this is what I'm looking to perform”下使用的标记适合您的需求，请使用它。在当前标记上仅使用 CSS 似乎无法实现这样的表示。（障碍是您需要将两个单元格合并为一个单元格。这在某种意义上使用网格布局可能是可能的，但它还没有准备好迎接黄金时段。）

使用`div class=column`并不比使用表格更具语义。实际上，更少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:01:30.483

表格在语义上是正确的。您在示例中尝试实现的目标并不好。

使用表格，但对于标识和附加属性，您可以动态分配类或 ID。

另一种方法是将 data-* 属性添加到 table 元素。

`<td data-some-key="value">`

此外，如果您将上一个示例中的代码用于自定义行标记，我也看不到语义问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-31T07:59:58.983

遗憾的是，如果您希望数据以某种方式显示，您不能总是在 HTML 中以语义方式呈现数据。不过，在这种情况下， [dl 元素](http://docs.webplatform.org/wiki/html/elements/dl)可能会有所帮助。

# video - 我想做一个 mpeg-2 解码器

> ID：14099025
> 
> 赞同：1
> 
> 时间：2012-12-31T07:55:55.003
> 
> 标签：video, mpeg, mpeg2-ts, mpeg-2

最近，我对 mpeg-2 标准产生了兴趣。我突然想到我想做一个 mpeg-2 解码器。我已经在研究 mpeg 系统部分，它涵盖了流打包机制，如传输流或程序流。但我也想知道视频和音频基本流的结构。我实际上是想告诉你，我真的很想制作自己的 mpeg-2 解码器。

尽管有很多关于 mpeg-2 系统部分的好书，但我找不到任何有用的书来介绍基本流的结构以及如何正确处理它们。我发现的只是一本解释视频如何编码以及各种编码技术的书。

你们会建议我一本有用的书，当我处理 mpeg-2 文件时我可以参考它吗？希望你们愿意去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:37:52.267

请结帐： [http ://www.fh-friedberg.de/fachbereiche/e2/telekom-labor/zinke/mk/mpeg2beg/beginnzi.htm](http://www.fh-friedberg.de/fachbereiche/e2/telekom-labor/zinke/mk/mpeg2beg/beginnzi.htm)

[http://en.wikipedia.org/wiki/MPEG-2](http://en.wikipedia.org/wiki/MPEG-2)

[http://www.iso.org/iso/iso_catalogue/catalogue_ics/catalogue_detail_ics.htm?csnumber=22990](http://www.iso.org/iso/iso_catalogue/catalogue_ics/catalogue_detail_ics.htm?csnumber=22990)

第 3 个链接是 MPEG-2 标准的链接，这是 MPEG-2 编解码器开发的圣经。这将为您提供处理 MPEG-2 文件所需的所有信息。

# azure - 如何使用 Windows Azure SDK 2.0 插入/更新到 Azure 表

> ID：14099035
> 
> 赞同：1
> 
> 时间：2012-12-31T07:56:53.987
> 
> 标签：azure, azure-storage, azure-table-storage

我有多个实体要存储在同一个物理 Azure 表中。我正在尝试从文件中插入/合并表条目。我正在尝试找到一种方法来做到这一点，而无需真正序列化每个属性或为此创建自定义实体。

在尝试以下代码时，我想也许我可以使用通用的 DynamicTableEntity。但是，我不确定它是否有助于插入操作（大多数文档用于替换/合并操作）。

我得到的错误是 HResult=-2146233088 Message=Unexpected response code for operation : 0 Source=Microsoft.WindowsAzure.Storage

任何帮助表示赞赏。

这是我的代码的摘录

```
_tableClient = storageAccount.CreateCloudTableClient();
            _table = _tableClient.GetTableReference("CloudlyPilot");

            _table.CreateIfNotExists();

            TableBatchOperation batch = new TableBatchOperation();

            ....

             foreach (var pkGroup in result.Elements("PartitionGroup"))
            {

                foreach (var entity in pkGroup.Elements())
                {
                    DynamicTableEntity tableEntity = new DynamicTableEntity();
                    string partitionKey = entity.Elements("PartitionKey").FirstOrDefault().Value;
                    string rowKey = entity.Elements("RowKey").FirstOrDefault().Value;
                    Dictionary<string, EntityProperty> props = new Dictionary<string, EntityProperty>();

                    //if (pkGroup.Attribute("name").Value == "CloudServices Page")
                    //{
                    //    tableEntity = new CloudServicesGroupEntity (partitionKey, rowKey);
                    //}
                    //else
                    //{
                    //    tableEntity = new CloudServiceDetailsEntity(partitionKey,rowKey);
                    //}

                    foreach (var element in entity.Elements())
                    {
                        tableEntity.Properties[element.Name.ToString()] = new EntityProperty(element.Value.ToString());
                    }

                    tableEntity.ETag = Guid.NewGuid().ToString();
                    tableEntity.Timestamp = new DateTimeOffset(DateTime.Now.ToUniversalTime());

                    //tableEntity.WriteEntity(/*WHERE TO GET AN OPERATION CONTEXT FROM?*/)

                    batch.InsertOrMerge(tableEntity);
                }
                _table.ExecuteBatch(batch);

                batch.Clear();

            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:27:53.460

您是否尝试过使用[DictionaryTableEntity](http://sandrinodimattia.net/blog/posts/dictionarytableentity-working-with-untyped-entities-in-the-table-storage-service/)？此类允许您像字典一样动态填充实体（类似于 DynamicTableEntity）。我尝试了类似你的代码的东西，它可以工作：

```
 var batch = new TableBatchOperation();

        var entity1 = new DictionaryTableEntity();
        entity1.PartitionKey = "abc";
        entity1.RowKey = Guid.NewGuid().ToString();
        entity1.Add("name", "Steve");
        batch.InsertOrMerge(entity1);

        var entity2 = new DictionaryTableEntity();
        entity2.PartitionKey = "abc";
        entity2.RowKey = Guid.NewGuid().ToString();
        entity2.Add("name", "Scott");
        batch.InsertOrMerge(entity2);

        table.ExecuteBatch(batch);

        var entities = table.ExecuteQuery<DictionaryTableEntity>(new TableQuery<DictionaryTableEntity>()); 
```

最后一件事，我看到您正在自己设置时间戳和 ETag。删除这两行，然后重试。

# jquery - 使用 Ajax jQuery 提交 Django 表单的简单方法

> ID：14099038
> 
> 赞同：12
> 
> 时间：2012-12-31T07:57:05.053
> 
> 标签：jquery, django, django-forms, form-submit

我对 Ajax 比较陌生，我仍在努力掌握所有概念。我试图查看一堆关于 Ajax-Django 表单提交的教程，其中大多数都需要 jQuery 表单，这对我来说似乎不是一种简单的处理表单提交的方法。我很难理解这个概念。

我正在尝试为用户注册、登录、帖子创建和评论编写一些基于 ajax 的表单提交。到目前为止，我还没有找到一种方法让我更容易理解 Ajax 方法的工作原理。

我真的很感激我在这方面能得到的任何帮助。

这是我到目前为止所尝试的。

# change_pw.html

```
{% extends "base.html" %}
    {% block title %}Change Password{% endblock %}
    {% block head %}Change Password{% endblock %}
    {% block content %}
    {% include "modal_change_pw.html" %}
    {% endblock %} 
```

# modal_change_pw.html

```
<div id="modalchangepw">
<ul style="margin:5px;">
    <ul class="thumbnails" style="margin: 0 auto;background: white;">
        <div class="thumbnail row-fluid" style="background: white; padding: 10px;width: 97%; -moz-border-radius: 5px;border-radius: 5px;-moz-box-shadow:3px 3px 5px 0px #ccc;-webkit-box-shadow:3px 3px 5px 0px #ccc;box-shadow:3px 3px 5px 0px #ccc;">
            <br>
            {% if not error == '' %}
                <div class="alert alert-error">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    {{ error }}
                </div>
            {% endif %}
            {% if not success == '' %}
                <div class="alert alert-success">
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    {{ success }}
                </div>
            {% endif %}
            {% if messages %}
                {% for message in messages %}
                  <div{% if message.tags %} class="alert alert-{{ message.tags }}"{% endif %}>
                    <button type="button" class="close" data-dismiss="alert">&times;</button>
                    {{ message|safe }}
                  </div>
                {% endfor %}
            {% endif %}
            <form id = 'changepw' enctype="multipart/form-data" method="post" action=".">
                <p><label for="id_currentpw">Current Password:</label> <input type="password" name="currentpw" id="id_currentpw" /></p>
                <p><label for="id_newpw1">New Password:</label> <input type="password" name="newpw1" id="id_newpw1" /></p>
                <p><label for="id_newpw2">Re-enter New Password:</label> <input type="password" name="newpw2" id="id_newpw2" /></p>
                <input class="btn btn-primary" type="submit" value="submit"/>
                {% csrf_token %}
            </form>
        </div>
    </ul>
</ul>
</div> 
```

# 视图.py

```
def change_pw(request):
    user=request.user
    error=''
    success=''
    if request.method == 'POST':
        form = ChangePw(request.POST)
        if form.is_valid():
            currentpw=form.cleaned_data['currentpw']
            newpw1=form.cleaned_data['newpw1']
            newpw2=form.cleaned_data['newpw2']
            if currentpw and newpw1 and newpw2:
                if user.check_password(currentpw):
                    if newpw1==newpw2:
                        user.set_password(newpw1)
                        user.save()
                        success='Password updated!!'
                        if request.is_ajax() :
                            messages.success(request, 'Password updated.')
                            return HttpResponseRedirect ('/changepw/')
                        else:
                            return HttpResponseRedirect ('/user/%s/' % user.username)
                    else:
                        error='New passwords do not match'
                else:
                    error='Incorrect Current Password'
            else:
                error='Enter all Password fields to make any changes' 
    else:
        form = ChangePw()
    variables = RequestContext(request, {
           'form':form,
           'error':error,
           'success':success
    })
    if request.is_ajax() :
         return render_to_response('modal_change_pw.html', variables)
    else:    
        return render_to_response('change_pw.html', variables) 
```

# 表格.py

```
class ChangePw(forms.Form):
     currentpw = forms.CharField(
        label=u'Current Password',
        required=False,
        widget=forms.PasswordInput()
     )
     newpw1 = forms.CharField(
        label=u'New Password',
        required=False,
        widget=forms.PasswordInput()
     )
     newpw2 = forms.CharField(
        label=u'Re-enter New Password',
        required=False,
        widget=forms.PasswordInput()
     ) 
```

# jQuery

```
//Change PW
        $('#changepw').live('submit', function(event) { // catch the form's submit event
          event.preventDefault();
          $.ajax({ // create an AJAX call...
              data: $(this).serialize(), // get the form data
              type: $(this).attr('method'), // GET or POST
              url: $(this).attr('action'), // the file to call
              success: function(response) { // on success..
                  $('#modalchangepw').html(response); // update the DIV
              }
          });
          return false;
        }); 
```

该代码现在似乎工作正常。但我的目标是以模态弹出方式处理这些表单，这样用户就不必离开他/她当前所在的页面。在模态弹出的情况下，我的表单似乎没有提交值。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-31T09:16:23.507

这个[`AJAX`](http://en.wikipedia.org/wiki/Ajax_%28programming%29)概念与一般表单提交的工作方式没有太大不同。AJAX 背后的想法是异步提交（传递）数据到服务器。

### 这个怎么运作？

对于一般的表单提交，流程是这样的。

```
User submits a POST request
               ↓
Server Does the Data Processing
               ↓
Redirects to a Success or Failure Page 
```

使用 ajax 它的工作原理非常相似。

```
User Submits a form through AJAX
               ↓
AJAX sends the POST data to the server in the background and waits for a response
               ↓
Server does the Data Processing
               ↓
and sends a Response back to AJAX
               ↓
AJAX sends the response back to the same template where the request was initiated. 
```

现在让我们看一个带有 django 视图的简单 Ajax 登录。

### 视图.py

```
def ajax_login(request):
    """  
    This view logs a user in using the POST data.
    """

    if request.method == 'POST':
        data = {}
        username = request.POST['username']
        password = request.POST['password']
        user = authenticate(username=username, password=password)
        if (not user is None) and (user.is_active):
            login(request, user)
            # Set Session Expiry to 0 if user clicks "Remember Me"
            if not request.POST.get('rem', None):
                request.session.set_expiry(0)
            data['success'] = "You have been successfully Logged In"
        else:
            data['error'] = "There was an error logging you in. Please Try again"
        return HttpResponse(simplejson.dumps(data), mimetype="application/json") 
```

在上面的视图中，我们进行了数据处理并返回了一个 JSON 响应。ajax 方法看起来像这样。

```
function ajaxLogin(){
    var dataString = '&username=' + $('input[name=username]').val() +
                     '&password=' + $('input[name=password]').val() +
    $.ajax({
        type: "POST",
        url: "/ajax_login/",
        data: dataString,
        success: function(data) {
            alert(data);
        }   
     }); 
     return false;   
} 
```

在这里，success 方法接收数据并将`alerts`其返回给用户。

## 更新

我看到您已经定义了该`ajaxPwchange()`方法，但我并没有真正看到您在任何地方调用它，我认为这就是页面仍然刷新的原因。您可以将`ajaxPwchange()`方法绑定到提交按钮的`onclick`事件，如下所示。

```
<input class="btn btn-primary" type="submit" value="submit" onclick="ajaxPwchange();" /> 
```

或者在`document.ready`方法下绑定如下：

```
$(document).ready(function(){
    $('input.btn-primary').click(function(){
        ajaxPwchange();
    });
}); 
```

## 更新2

div 消失了，因为您在以下代码中直接将 div 更改`html`为对象。`json`

```
success: function(response) { // on success..
             $('#modalchangepw').html(response); // update the DIV
         } 
```

你应该尝试这样的事情：

```
success: function(response) { // on success..
             var jsonData = $.parseJSON(response);
             $.each(response, function(){
                 $('#modalchangepw').append('<div class="message">' + $(this) + '</div>');
             });
         } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-31T08:43:45.580

我会给你一个非常简单的例子，这样你就可以掌握这个概念，然后使用相同的概念来做你想做的事情。

我将首先在`views.py`

```
def MyAjaxView(request):
    if request.is_ajax():
         if request.method == 'GET':
             # If it was a GET
             print request.GET
         elif request.method == 'POST':
             # Here we can access the POST data
             print request.POST
    else:
         doSomeOtherStuff()
    return render_to_response('mytemplate.html', some_context_maybe, context_instance=RequestContext(request)) 
```

根据您已经使用的或允许使用的内容，您可以使用 javascript 或库 jQuery 来调用它。

假设你有一个看起来像这样的表格

```
<form id="myNameForm">
   {% csrf_token %}
   <input type="text" id="name" />
   <input type="submit" value="submit" id="submitButton" />
</form> 
```

您现在可以使用 JavaScript 将它连接到一个 ajax 函数，我将使用 jQuery 作为演示，我将使用 jQuery 方法`ajax()`，因为它解释了这个概念并且继续前进`post()`应该不会太困难。

```
<script>
    $('#submitButton').click(function(event){
         event.preventDefault(); //so that we stop normal form submit.
         $.ajax(
             url: 'myViewUrl',
             type: 'post',
             dataType: 'json',
             data: $('form#myNameForm').serialize(),
             success: function(data) {
               doStuffWithDataHere(data);
             }
         );
    });
</script> 
```

您必须确保`urls.py`您的新视图有一个 url 映射。使用 CSRF 保护还需要使用 CSRF 处理器，请参阅 BurhanKhalids 注释以获取文档。

# c# - 在 Geckofx 的上下文菜单中添加拼写检查

> ID：14099040
> 
> 赞同：0
> 
> 时间：2012-12-31T07:57:38.157
> 
> 标签：c#, firefox, xulrunner, gecko, geckofx

我正在尝试将 Mozilla Firefox 集成到 C# winform 应用程序中。我下载了 xulrunner(v1.1.19) 和 geckofx

一切运行良好，但我想将默认的 Mozilla 字典/拼写检查选项添加到上下文菜单中，就像默认的 Mozilla 一样......？？？怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T00:15:41.757

这些来自[geckofx](https://bitbucket.org/geckofx/geckofx-16.0/src/7aa09406185bffd3af8d3b98f37648193c34645c/GeckofxUnitTests/SpellCheckerEngineTests.cs?at=default) [-16.0](https://bitbucket.org/geckofx/geckofx-16.0)的 SpellCheckEngine 单元测试可能会为您指明正确的方向。

它们提供了一些如何操作拼写检查引擎的示例。

# iphone - 如何在表格视图的末尾加载加载视图？

> ID：14099044
> 
> 赞同：0
> 
> 时间：2012-12-31T07:58:21.997
> 
> 标签：iphone, ios, ipad

我有一个表格视图，其中所有都是自定义单元格，这些单元格是从 3 种类型的自定义单元格对象类加载的。我也完成了分页，以便它会在开始时加载 5 页，然后像那样加载第二页。问题出在在表格视图单元格的末尾，我需要添加一个加载视图。为此，我使用`- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section`并添加了一个活动指示器和加载标签。但是它的位置没有正确。有时如果内容更多，它的位置就不会正确。任何人都可以指导我实现这一目标的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:20:57.307

你说：“在表格视图的末尾加载视图”而这个函数：

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section 
```

将在与您想要执行的操作不同的部分末尾添加一个视图。

我建议你看看下面的 UITableView 属性：

表页脚视图

（[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)）

# deployment - 部署 Meteor 应用程序时保护密钥的最佳方法是什么？

> ID：14099048
> 
> 赞同：3
> 
> 时间：2012-12-31T07:58:48.793
> 
> 标签：deployment, configuration, meteor

我正在将 Filepicker.io 连接到我的流星应用程序以进行文件上传。该服务有一个 API 密钥，（当然）他们建议保密。我在 github 上找到了其他几个示例应用程序，其中文件选择器密码位于客户端代码中的普通站点中。这似乎有点不稳定。即使它不在公共存储库中，因为它是在客户端代码中指定的，我可以使用 Javascript 控制台（如果我想要的话）从应用程序中获取密钥。

我想知道有没有一种方法可以将秘密与应用程序（如 heroku 配置）一起存储，这样可以很容易地保持该密钥的秘密。

我目前的计划是将密钥放入数据库并锁定该模型，以便它只能从服务器代码中获得。有没有更简单的方法？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T08:38:59.523

该`devel`分支（即将在 0.5.3 中）有一个新`Meteor.settings`特性：如果您将 JSON 文件作为参数传递给`meteor run`or `meteor deploy`，则该对象将在服务器上以`Meteor.settings`. （使用`meteor deploy`，这是持久的，因此您不必记住每次都通过它。）

（如果您使用自己的托管环境，则可以通过`METEOR_SETTINGS`环境变量传入 JSON 文件的内容。）

使用数据库也可以——这就是 Meteor Accounts 存储 OAuth 帐户配置的方式。我个人认为这`Meteor.settings`最适合应用程序配置，而数据库最适合包配置，因为它允许包在首次运行时显示交互式配置小部件`accounts-ui`。

# bash - 杀死评估过的进程

> ID：14099050
> 
> 赞同：1
> 
> 时间：2012-12-31T07:58:52.713
> 
> 标签：bash, eval, kill

以这个脚本为例，仅作为示例

```
#!/bin/sh

foo ()
{
  eval "$@"
}

touch bar
foo tail -f bar &
sleep 1
kill $! 
```

在此示例中，我想 kill `tail`，但是因为`tail`作为 an 的结果被调用`eval`，所以它不会被杀死。我怎么能`tail`不使用 , 等来`pgrep`杀人`pkill`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:14:18.080

改为使用`exec`应该可以

```
#!/bin/sh

foo ()
{
  exec "$@"
}

touch bar
foo tail -f bar &
sleep 1
kill $! 
```

如果与管道一起使用，则需要进行进程替换

```
foo tail -f bar > >(tee baz) & 
```

[**有关的**](http://riccomini.name/posts/linux/2012-09-25-kill-subprocesses-linux-bash)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T11:11:02.207

这是因为，当 you 时`kill $!`，它实际上是子shell（foo &），它会被`SIGTERM`. 你不是在杀死`tail`命令。

正如 svnpenn 所提到的，要么使用`exec`，以便 subshel​​l 的 PID 由`tail`.

或使用以下代码进行树遍历：

```
kill `ps -C tail --ppid $! -opid=` 
```

它将列出所有`-C tail`pid 为 $! 的尾进程 () ( `--ppid $!`) & 只打印它的 PID`-opid=`然后杀死那个 pid。

# java - 将内容（url）包含到jsp中

> ID：14099051
> 
> 赞同：0
> 
> 时间：2012-12-31T07:58:55.563
> 
> 标签：java, spring, jspx

我需要在 index.jsp 文件的特定 url 中包含所有内容。

```
http://hostname:9090/dts/flows?page=1&size=10 
```

我正在使用瓷砖框架。

索引.jsp

```
<div xmlns:spring="http://www.springframework.org/tags" xmlns:util="urn:jsptagdir:/WEB-INF/tags/util" xmlns:jsp="http://java.sun.com/JSP/Page" xmlns:page="urn:jsptagdir:/WEB-INF/tags/form" xmlns:table="urn:jsptagdir:/WEB-INF/tags/form/fields" version="2.0">
  <jsp:directive.page contentType="text/html;charset=UTF-8" />
  <jsp:output omit-xml-declaration="yes" />
  <spring:message var="app_name" code="application_name" htmlEscape="false" />
  <spring:message var="title" code="welcome_titlepane" arguments="${app_name}" htmlEscape="false" />
  <util:panel id="title" title="${title}">
    <h3>
      <spring:message code="welcome_h3" arguments="${app_name}" />
    </h3>
    <p>
      <spring:message code="welcome_text" />
    </p>
  </util:panel>
</div> 
```

我可以看到包含指令`<%@include file="included.jsp" %>`

但我需要将 url 的内容添加`'http://hostname:9090/dts/flows?page=1&size=10'`到 index.jspx

谁能告诉如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:05:37.737

使用 JSTL 的[`<c:import>`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/import.html)标签：

> 检索绝对或相对 URL，并将其内容公开给页面、“var”中的字符串或“varReader”中的阅读器。

# php - file_put_contents 无法在服务器上存储图像

> ID：14099052
> 
> 赞同：0
> 
> 时间：2012-12-31T07:58:55.580
> 
> 标签：php, facebook

```
$path = 'http://fbcdn-profile-a.akamaihd.net/hprofile-ak-snc6/372096_100002534902767_1927052265_n.jpg';
$info = file_put_contents('new/angel.jpg', file_get_contents(urldecode($path)));
echo $info; 
```

它在我的网站上运行良好，`localhost`但在我的网站上不起作用。

知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:02:38.550

*   检查您的日志以获取错误消息
*   文件夹（“新”）是否存在？
*   权限是否设置为允许通过脚本编写？
*   您确定错误在 file_put_contents 中吗？如果主机不允许 url_fopen，file_get_contents 可能会失败。
*   除非 $path 实际上是硬编码的，否则您可能会引入任意文件泄露安全问题。确保验证您的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:04:01.937

您需要授予上传文件夹的权限（写入）

您可以通过 FTP 程序在数值中使用此代码：777

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T08:32:09.840

1.  确保您正在写入的文件具有写入权限
2.  我认为相对路径是问题所在。您的本地可能具有该文件的路径，但该路径在服务器上不存在。3.请在一行中加上正斜杠`$info=file_put_contents('new/angel.jpg', file_get_contents(urldecode($path)))`；在您的“新”文件夹之前尝试我认为这可能是一个问题

# php - 是什么意思 可能重复： 参考 - 这个符号在 PHP 中是什么意思？ 我 问问题 问问题 2012-12-31T07:59:04.023 202 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 可能重复： 参考 - 这个符号在 PHP 中是什么意思？ 我尝试为PHP-Nemid运行测试脚本有些不成功。我正在尝试编写代码，但是当它到达使用文件“nemid.tpl.php”的渲染函数时，我有点迷失了。当我运行脚本时，模板文件实际上是写到屏幕上的，从某种意义上说，不是 PHP 填充相关的模板变量，而是只编写文字 PHP 代码。换句话说 渲染功能 我已经在下面的函数中测试了 $vars 的内容，并且可以确认模板所需的提取变量存在。 function render($template, $vars = array()) { extract($vars); ob_start(); include('../templates/' . $template . '.tpl.php'); $content = ob_get_contents(); ob_end_clean(); return $content; } 会输出Hello world 并回答为什么它不解析，文件名是什么？您是否安装并配置了 PHP 以与您的 Apache/Nginx/其他服务器一起使用？ 要注意的另一件事是您使用的模板PHP_SELF PHP_SELF实际上打开了很多漏洞，不建议使用。您可以使用替代方案： basename(__FILE__); php 4 3 回答 3 This answer is useful 4 会输出Hello world 并回答为什么它不解析，文件名是什么？您是否安装并配置了 PHP 以与您的 Apache/Nginx/其他服务器一起使用？ 要注意的另一件事是您使用的模板PHP_SELF PHP_SELF实际上打开了很多漏洞，不建议使用。您可以使用替代方案： basename(__FILE__); 于 2012-12-31T08:00:42.443 回答 This answer is useful 1

> ID：14099053
> 
> 赞同：0
> 
> 时间：
> 
> 标签：php

> **可能重复：**
> [参考 - 这个符号在 PHP 中是什么意思？](https://stackoverflow.com/questions/3737139/reference-what-does-this-symbol-mean-in-php)

我尝试为[PHP-Nemid](http://code.google.com/p/nemid-php/issues/list)运行测试脚本有些不成功。我正在尝试编写代码，但是当它到达使用文件“nemid.tpl.php”的渲染函数时，我有点迷失了。当我运行脚本时，模板文件实际上是写到屏幕上的，从某种意义上说，不是 PHP 填充相关的模板变量，而是只编写文字 PHP 代码。换句话说`<?= $some_var_value`，就像在渲染页面的源代码中一样。

我不明白的另一件事是`<?=`模板文件中的含义是什么。这不是我熟悉的 PHP 结构。起初我认为我应该更改`<?= $some_var`为`<? print $some_var`，但在这种情况下，它仍然会将文字 PHP 代码打印到页面上。

如果有人能给我一些关于这里发生的事情的见解，我将不胜感激。

**模板文件**(nemid.tpl.php)

```
<html>
<body>
        <form id="signedForm" name="signedForm" method="post" action="<?= $_SERVER['PHP_SELF'] ?>">
                <div id="applet">
<!-- div ID used for overlay / modal-box -->
                    <applet name="DANID_DIGITAL_SIGNATUR" tabindex="1" archive="<?= $ServerUrlPrefix ?>/bootapplet/1234567" code="dk.pbs.applet.bootstrap.BootApplet" width="200" height="250" mayscript="mayscript" style="visibility: visible; ">
                        <param name="ServerUrlPrefix" value="<?= $ServerUrlPrefix ?>"> 
                        <param name="ZIP_BASE_URL" value="<?= $ZIP_BASE_URL ?>">
                        <param name="ZIP_FILE_ALIAS" value="<?= $ZIP_FILE_ALIAS ?>">
                        <param name="log_level" value="<?= $log_level ?>"> 
                        <param name="paramcert" value="<?= $paramcert ?>">
                        <param name="signproperties" value="<?= $signproperties ?>"> 
                        <param name="paramsdigest" value="<?= $paramsdigest ?>"> 
                        <param name="signeddigest" value="<?= $signeddigest ?>"> 
                        <param name="MAYSCRIPT" value="<?= $MAYSCRIPT ?>"> 
                    </applet>
                </div>
            <input type="hidden" name="signature">
            <input type="hidden" name="result"> 
        </form>
<script type="text/javascript">
    function onLogonOk(signature) {
        document.signedForm.signature.value=signature;
        document.signedForm.result.value='ok';
        document.signedForm.submit();
    }
    function onLogonCancel() {
        document.signedForm.result.value='cancel';
        document.signedForm.submit();
    }
    function onLogonError(emsg) {
        document.signedForm.result.value=emsg;
        document.signedForm.submit();
    }
</script> 
</body>
</html> 
```

**渲染功能**

我已经在下面的函数中测试了 $vars 的内容，并且可以确认模板所需的提取变量存在。

```
function render($template, $vars = array())
{
    extract($vars);
    ob_start();
    include('../templates/' . $template . '.tpl.php');
    $content = ob_get_contents();
    ob_end_clean();
    return $content;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:00:42.443

`<?=`是 echo 的一个简短的开放标签。

```
<?='Hello world'?> 
```

会输出`Hello world`

并回答为什么它不解析，文件名是什么？您是否安装并配置了 PHP 以与您的 Apache/Nginx/其他服务器一起使用？

要注意的另一件事是您使用的模板`PHP_SELF`

`PHP_SELF`实际上打开了很多漏洞，不建议使用。您可以使用替代方案：

```
basename(__FILE__); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:01:48.453

```
 <?= 
```

是 php 的简写

```
 <?php echo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T08:05:56.357

```
<?= 
```

被模板制作者用作速记，因为他们对大部分文件使用 HTML 并根据需要在 PHP 中打印出变量。

我的服务器已打开，但可以关闭或在旧版本中不使用。

# sharepoint-2010 - 为什么在 SharePoint 网站中禁用匿名访问选项？

> ID：14099054
> 
> 赞同：0
> 
> 时间：2012-12-31T07:59:12.217
> 
> 标签：sharepoint-2010, anonymous

[我已经按照此处](http://msdn.microsoft.com/en-us/library/ee554869%28office.14%29.aspx)给出的步骤设置了带有 windows7 的 SharePoint 2010 。

我正在尝试提供对默认站点（80 端口）的匿名访问。跟着[这里](http://www.topsharepoint.com/enable-anonymous-access-in-sharepoint-2010)。

当我进入第 8 步时，我发现该站点的匿名访问选项已禁用。我用管理员登录。像往常一样，应该允许管理员。为什么会发生这种情况？

另外我可以让中央管理员匿名访问吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T13:55:21.303

试试这可能对你有帮助：

在管理中心 -> 选择您的 Web 应用程序 -> 在功能区选项卡中，您可以看到用户策略选项卡单击它并添加具有完全控制权的站点管理员。比检查它。

让我知道它是否有帮助

# asp.net - 谷歌和 youtube api 的 ASP.NET 站点授权问题

> ID：14099055
> 
> 赞同：0
> 
> 时间：2012-12-31T07:59:13.027
> 
> 标签：asp.net, authentication, google-api, youtube-api, authsub

我在我的网站中实现了几个谷歌 API - 以启用联系人导入和 youtube 上传。虽然一切都在本地运行良好（在我自己的开发服务器的本地主机下），但通过站点使用它们存在一些问题（托管在 HostGator 和 1and1 上，我到处都遇到相同的错误） - 似乎是身份验证问题。

该站点位于 ASP.NET 2.0 上，这些是我得到的错误消息：

1.  谷歌联系人的错误（使用 AuthSub） - 这发生在我从谷歌的 authsub 成功接收到会话令牌之后：

    ```
    The remote server returned an error: (401) Unauthorized.

    Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information 

    about the error and where it originated in the code. 

    Exception Details: System.Net.WebException: The remote server returned an error: (401) Unauthorized.

    Source Error: 

    Line 493:        ContactsQuery query = new ContactsQuery(ContactsQuery.CreateContactsUri("default"));
    Line 494:
    Line 495:        ContactsFeed feed = service.Query(query);
    Line 496:
    Line 497:        ArrayList emails = new ArrayList();

    Source File: d:\inetpub\vhosts\e-koren.com\httpdocs\home-cooking\EmailInvite.aspx.cs    Line: 495 
    ```

2.  youtube 视频上传错误（使用 ClientLogin）：

    ```
    Invalid credentials

    Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information 

    about the error and where it originated in the code. 

    Exception Details: Google.GData.Client.InvalidCredentialsException: Invalid credentials

    Source Error: 

    Line 71: //            try
    Line 72: //            {
    Line 73:                 FormUploadToken _token = request.CreateFormUploadToken(newVideo);
    Line 74: 
    Line 75:                 actionURL.Value = _token.Url + "?nexturl=" + Server.UrlPathEncode(Request.Url.ToString()+"?uuc=");

    Source File: d:\inetpub\vhosts\e-koren.com\httpdocs\home-cooking\youtubeUpload.aspx.cs    Line: 73 
    ```

有谁知道会是什么？

谢谢，阿萨夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T11:12:43.643

我最终设法解决了它：

至于第一个错误（authsub 和 google 联系人） - 我将 URI 从“http”更改为“https”：

```
// V1
GAuthSubRequestFactory authFactory = new GAuthSubRequestFactory("cp",gn.ytApplicationName);

authFactory.Token = (String)Session["token"];

ContactsService service = new ContactsService(authFactory.ApplicationName);

service.RequestFactory = authFactory;

ContactsQuery query = new ContactsQuery(ContactsQuery.CreateContactsUri("default"));

// VERY IMPORTANT! adding HTTPS resolves google's bug (401 error)
query.Uri = new Uri("https://www.google.com/m8/feeds/contacts/default/full");

ContactsFeed feed = service.Query(query); 
```

关于第二个错误（ClientLogin） - 谷歌似乎已经加强了围绕这种方法的安全措施 - 他们向我想要登录的用户发送了一封警告电子邮件 - 只有当他遵循几个复杂的步骤时，他们才授权访问他的视频。

我发现这不是一个错误，而是一个政策，我想我也会在那里切换到 AuthSub。

希望我也能帮助别人...

:)

# objective-c - 如何使任何应用程序中的焦点文本字段填充来自 Mac App 的数据

> ID：14099070
> 
> 赞同：0
> 
> 时间：2012-12-31T08:00:53.557
> 
> 标签：objective-c, macos, cocoa

我正在尝试编写一个简单的应用程序，该应用程序涉及将片段存储和“粘贴”到用户正在使用的任何文本编辑器中。我尝试使用事件点击来模拟键盘按下以模拟打字，但无论出于何种原因，这都不起作用。有没有更好的方法让字符串填充到其他应用程序的焦点文本字段中？

# android - 将 Monkeyrunner 与 UI Automator 集成

> ID：14099071
> 
> 赞同：1
> 
> 时间：2012-12-31T08:01:01.370
> 
> 标签：android, ui-automation, monkeyrunner, androidviewclient

是否可以将 Monkey Runner 与 UI Automator 集成。我已经在 UI Automator 项目中导入了 Monkeyrunner jar。但是当我运行时

```
ant build 
```

构建失败，因为它不识别任何类。他们是在 UI Automator Java 项目中识别 Monkeyrunner 类的任何其他方法吗

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:55:09.110

[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient) supports UiAutomator if present in the device.

The details can be seen on this post: [http://dtmilano.blogspot.ca/2012/11/androidviewclient-uiautomator-support.html](http://dtmilano.blogspot.ca/2012/11/androidviewclient-uiautomator-support.html)

# visual-studio - 将自定义 JavaScript 脚本添加到智能感知

> ID：14099077
> 
> 赞同：0
> 
> 时间：2012-12-31T08:01:31.413
> 
> 标签：visual-studio, resharper

我正在使用带有 Resharper 插件的 Visual Studio 2010，并且我的 Web 应用程序依赖于 JavaScript。

我的意思是有很多库（knockout.js、jQuery、jQuery UI - 仅举几例）。

虽然智能感知在 C# 中工作正常，但我很难开始为 JavaScript 工作。在整个假期中，我都尝试过谷歌搜索并浏览选项、偏好和文档，但似乎我正在寻找一些不存在的东西。

例如，knockout.js 中有一个类“ko.utils”，它具有像“ko.utils.arrayMap”这样的方法。我的问题是，如何让智能感知（R# 或 VS）索引这个类并在我输入“ko.utils.”时为我提供方法，从而加快我在 JavaScript 中的开发速度？

注意：[可以在 VS 2010 中获取自定义 javascript 文件以具有智能感知功能吗？](https://stackoverflow.com/questions/5145816/possible-to-get-custom-javascript-files-to-have-intellisense-in-vs-2010)我认为这不是重复的，因为这些库很少在这里有一个特殊的 VSDoc 脚本，如果他们有一个，我仍然无法在全球范围内引用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:14:12.343

您可以创建一个[ReSharper 插件](http://confluence.jetbrains.net/display/ReSharper/ReSharper+6+Plugin+Development)来扩展代码完成机制以提供您需要的功能。您需要做的是自己分析解析的结构，派生要添加到完成列表的相关内容，并在必要时注入它。

# dropwizard - Dropwizard 视图：添加 ViewBundle

> ID：14099083
> 
> 赞同：2
> 
> 时间：2012-12-31T08:02:33.930
> 
> 标签：dropwizard

我正在尝试按照[本教程](http://dropwizard.codahale.com/manual/views/#manual-views)创建 DropWizard 视图。但是，当我尝试时`addBundle(new ViewBundle())`，它无法找到（或导入）ViewBundle。我在这里想念什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T08:07:54.380

`dropwizard-views`我的 maven pom 文件中缺少依赖项。添加依赖项解决了这个问题。

```
<dependency>
        <groupId>io.dropwizard</groupId>
        <artifactId>dropwizard-views</artifactId>
        <version>${dropwizard.version}</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-30T02:04:16.750

您将需要选择一个视图模板。在撰写本文时，Dropwizard 支持 FreeMarker 和 Mustache。`dropwizard-view`您应该选择`dropwizard-views-mustache`或`dropwizard-views-freemarker`，而不是包含依赖项，`dropwizard-view`并将作为依赖项包含在内。

# django-taggit - 如何在 django-taggit 标签字段中更改 verbose_name 或使用原始字段名称

> ID：14099087
> 
> 赞同：2
> 
> 时间：2012-12-31T08:02:46.723
> 
> 标签：django-taggit, verbose, field-names

我正在使用[`django-taggit`](https://github.com/alex/django-taggit)我的一个项目，并且根据文档，我在我想在其中使用标签/关键字的模型中执行了以下操作。

### 模型.py

```
from taggit.managers import TaggableManager

class SomeModel(models.Model):
    title = models.CharField(max_length=15)
    description = models.TextField()
    keywords = TaggableManager() 
```

我正在`ModelForm`为上述模型使用表单，并且`label`该字段的文本`keywords`显示为`"Tags"`而不是`"Keywords"`。

我怎样才能`django-taggit`使用原始字段名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T23:18:13.187

刚刚打开 TaggableManager 定义来检查这一点。

```
class TaggableManager(RelatedField):
    def __init__(self, verbose_name=_("Tags"),
    help_text=_("A comma-separated list of tags."), through=None, blank=False): 
```

因此，要设置 verbose_name，只需将管理器初始化为：

```
TaggableManager(verbose_name="keywords") 
```

# iphone - 在包含错误的 UITextfield 周围制作一个红色边框

> ID：14099088
> 
> 赞同：3
> 
> 时间：2012-12-31T08:02:57.457
> 
> 标签：iphone, objective-c, ios, validation

我正在objective-c中制作表格。我将我填写的所有数据以表格形式发布到网络服务。如果一切正常并且数据已成功发布，这会给我一个 200 代码。但如果有问题，它会给我一个 406 代码。如果是这样的话。JSON 还包含错误对象。您可以在此处查看 JSON 的示例。

```
{

    "data": {
        "status": 406,
        "message": "Not Acceptable",
        "errors": {
            "cu_email": [
                "'stefappmax.be'is no valid email!"
            ]
        }
    }

} 
```

我的所有文本字段都与 JSON 中的名称相同`e.g. My email-textfield calls cu_email` 现在我有了这段代码。

```
 NSDictionary* dict = [json objectForKey:@"data"];
                NSLog(@"dict: %@",dict);
                for (NSString *errorObject in [dict objectForKey:@"errors"]) {
                    NSLog(@"error name: %@",errorObject);
                } 
```

这将返回包含错误的文本字段的所有名称。我现在要做的是在这些文本字段周围制作一个红色边框。我知道要放置一个边框，您需要实现quartzcore 框架并添加这段代码。

```
self.cu_email.layer.borderColor = [[UIColor redColor] CGColor]; 
```

但是你们现在如何用 cu_email 替换 cu_email `errorObject`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T08:21:26.220

我认为这对你有用：

您可以使用 KVC 访问该 textField 属性：

```
UITextField *theErrorField = (UITextField *)[self valueForKey:errorObject];
theErrorField.layer.borderColor = [[UIColor redColor] CGColor];
theErrorField.layer.borderWidth = 3.0; 
```

# php - 使用 Facebook 应用程序登录时出错

> ID：14099090
> 
> 赞同：0
> 
> 时间：2012-12-31T08:03:03.040
> 
> 标签：php, facebook-apps

我正在尝试开发一个 fb 应用程序。当我尝试使用该应用程序登录时，它会显示一条错误消息。

> API错误代码：191 API错误描述：指定的URL不属于应用程序错误消息：无效的redirect_uri：应用程序配置不允许给定的URL。

```
app domain:www.abc.def.com

site url :http://www.abc.def.com/

Canvas URL:http://www.abc.def/fbapp/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:19:42.680

检查你的redirect_url

redirect_url 必须包含您的应用设置中定义的站点 URL 或画布 URL。如果一个有斜线，另一个也必须。

你会发现这是解决这个问题的最常见的方法。

[Facebook API 错误代码 191](https://stackoverflow.com/questions/7382621/facebook-api-error-code-191) 也是 [Facebook API 错误 191](https://stackoverflow.com/questions/4691782/facebook-api-error-191)

# python - 令人费解的与 python、Flask、psycopg2 的编码不一致

> ID：14099092
> 
> 赞同：0
> 
> 时间：2012-12-31T08:03:17.953
> 
> 标签：python, postgresql, encoding, flask, psycopg2

我正在使用带有 psycopg2 python/flask Web 应用程序的 postgres。

我遇到了一个编码问题，我确定这是我缺少的一些愚蠢的东西（我是编程新手）。以下语句完美运行：

```
cur.execute("SELECT column_name FROM information_schema.columns where table_name = %s;", (tablename,)) 
```

我使用 fetchall() 在表中创建列名列表。但是，另一个语句不起作用：

```
cur.execute("ALTER TABLE %s ADD COLUMN %s varchar;", (tablename, col,)) 
```

这是错误：

```
psycopg2.ProgrammingError
ProgrammingError: syntax error at or near "E'flatresponses_1'"
LINE 1: ALTER TABLE E'flatresponses_1' ADD COLUMN E'What was the bes... 
```

（'flatresponses_1' 是 'tablename'，而 'What was the best...' 是 'col' 的开头。）

我做了'print cur.query'，结果如下：

```
>>> print cur.query
>>> ALTER TABLE E'flatresponses_1' ADD COLUMN E'What was the best part of your ENT clinic visit today? Why?' varchar; 
```

我在第二个查询中得到 E' 编码，但不是第一个。我也试过 str(tablename)。

我错过了什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:51:21.077

[如本文](https://stackoverflow.com/a/13891511/131874)所述，我最终使用了 AsIs psycopg2 扩展。像魅力一样工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:13:36.587

表名和列名不是文本类型，它们是标识符（类型 = 名称）。它们不采用转义的字符串文字，并且可能您需要 %s 以外的内容作为占位符。

[http://www.postgresql.org/docs/9.2/static/datatype-character.html](http://www.postgresql.org/docs/9.2/static/datatype-character.html)

# objective-c - Objc ,GNUsetup 使文件添加干净的规则

> ID：14099098
> 
> 赞同：0
> 
> 时间：2012-12-31T08:03:35.163
> 
> 标签：objective-c, gcc, gnu-make

我需要添加某种干净的所有文件`*.obj`和`*.exe`已编译的文件，我不确定如何在`GNUmakefile`. 这是我到目前为止所做的，我该如何添加一般的清洁规则？

```
include $(GNUSTEP_MAKEFILES)/common.make
TOOL_NAME = IntTest
IntTest_HEADERS = Fraction.h
IntTest_OBJC_FILES = main.m Fraction.m
IntTest_RESOURCE_FILES =

include $(GNUSTEP_MAKEFILES)/tool.make 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:16:39.457

不是简单地*做清洁*工作吗？

或者在下面添加额外的清理命令

清洁前::

清洁后::

（双冒号）

# android - 主页活动 - 安卓

> ID：14099099
> 
> 赞同：1
> 
> 时间：2012-12-31T08:03:35.037
> 
> 标签：android, android-activity

我有 2 个活动，1 个用于注册，1 个用于我的应用程序主页。现在为了在它们之间进行选择，我必须创建另一个活动来检查一些细节并决定去哪个活动。问题是，在我选择主页活动后，我在后台有 2 个活动，当我退出我的应用程序时，我有另一个空白页面。检查那些东西的页面不需要图形布局..我该如何解决这种情况？顺便说一句，如果您对我的标题有更好的建议，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:11:11.090

在我们的应用程序中，我们以不同的方式处理类似的问题。我们的方法适用于您的情况：

1.  始终尝试启动主页。
2.  在主页启动时检查“*一些详细信息*”，如果您决定需要启动注册 - 执行此操作。
3.  当您想从注册转到主页时，只需完成RegistrationActivity，您将返回主页。

主页上的这种方式返回按钮不会将您带到注册，并且您不会看到任何“*空白页面*”。

# uiscrollview - 以编程方式设置 UIScrollView 方向

> ID：14099100
> 
> 赞同：0
> 
> 时间：2012-12-31T08:03:41.920
> 
> 标签：uiscrollview, orientation, landscape, ios5.1

这里有什么方法可以通过编码设置 UIScrollview 方向吗？实际上我正在以编程方式创建滚动视图并想设置它的方向景观。我在谷歌和苹果的文档上找不到任何方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T17:59:39.197

使用滚动视图，您不会准确地给它们一个方向。你设置他们的框架和他们的内容大小。因此，如果您将框架设置为 1024 x 768 并且内容大小为 3000 x 768，则滚动视图将自动允许水平滚动。而且因为您将框架设置为横向比例/大小，所以滚动视图将处于横向“方向”。下面的伪代码可以提供帮助。

```
UIScrollView *scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,1024,768)];
[scrollView setContentSize:CGSizeMake(3000, 768)]; 
```

如果这没有帮助，请告诉我，我可以详细说明或提供进一步帮助。

# c# - 事件触发错误

> ID：14099105
> 
> 赞同：-1
> 
> 时间：2012-12-31T08:04:09.350
> 
> 标签：c#, javascript, asp.net

我有一个文本框，我试图在其中调用其 OnBlur 事件的函数。该函数在 aspx.cs 页面中定义。当我尝试调试时出现问题，它说函数 Text_Blur 未定义。下面是代码： 前端：

```
<asp:TextBox ID="txtAutoComplete" runat="server" OnBlur="Text_Blur" CssClass="TextStyleFilter"></asp:TextBox> 
```

代码后面，aspx.cs：

```
public event EventHandler OnChange;

 protected void Text_Blur(object sender, EventArgs e)
    {

        if (OnChange != null)
            OnChange(this, EventArgs.Empty);
    } 
```

我用谷歌搜索并了解到 OnBlur 需要一个 Javascript 函数，但我需要为 OnBlur 甚至 OnChange 上的另一个用户控件设置一个事件处理程序。是否可以通过 Javascript 来做到这一点？请建议..任何指针将不胜感激。

-阿努拉格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:08:17.393

是的，OnBlur 需要客户端处理程序，而不是服务器端函数。所以定义一个javascript函数：

```
<script type="text">
    function Text_Blur() {
        // this function will be executed when the textbox looses focus
    }
</script> 
```

如果你想从 javascript 函数中触发一些服务器端方法，你可以使用 AJAX。

# c# - Winforms禁用文本框上的键盘输入但保持启用文本框

> ID：14099107
> 
> 赞同：3
> 
> 时间：2012-12-31T08:04:15.913
> 
> 标签：c#, .net, winforms

场景是这样的；

我需要禁用文本框以***通过键盘***从用户那里获取输入。但是文本框应该使用**条码阅读器等设备进行输入。**我想拿着一个计时器并计算两次击键之间的时间跨度（尚不清楚）。但也许有一个属性或更智能的算法呢？

ps它是一个Windows窗体应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:40:24.880

您说您需要支持任何通常模拟键盘的条形码阅读器，因此可能没有一种简单的方法可以以编程方式区分来自键盘的输入和条形码阅读器。

你关于使用时间的想法是一个很好的想法，尽管我会做一些稍微不同的事情。我会在第一个字符输入时添加一个`Timer`并`Form`启动它`TextBox`。计时器应设置为非常短的时间跨度，并应禁用自动重启。当计时器关闭时，检查是否`TextBox`有有效的条形码，如果有，则处理它。无论哪种方式，之后清除文本框。

然后，任何尝试使用键盘的人都会认为他们输入的文本只是消失了，而条形码扫描仪（“输入”速度非常快）仍然可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:06:26.367

也许您需要跟踪“键盘按下”事件？我认为自动粘贴某些内容不会触发“键盘按下”事件。

# jqgrid - 设置排序顺序时排序图标未更新

> ID：14099108
> 
> 赞同：3
> 
> 时间：2012-12-31T08:04:21.593
> 
> 标签：jqgrid, jqgrid-formatter

我正在尝试使用以下代码更改 jqGrid 的排序顺序：

```
jQuery('#id').setGridParam({sortorder:"desc"}).trigger("reloadGrid"); 
```

它改变了表格的排序顺序，但表格的排序图标没有按照顺序改变。在 onSortCol 中，我正在对实际排序的列进行排序。但是当我使用上面的代码设置排序顺序时，排序顺序已设置，但排序图标仍显示前一个排序顺序。

```
_table.jqGrid({

        datatype: 'local', // disable initial autoload. this will be when load function is called "json",
        altRows: true,
        altclass : 'AltRowClass',
        gridView: true,
        width:850,
        height:"auto",
        rowheight: 75,        
        align: 'center',
        treeGrid: false, 
        loadonce:true,
        ExpandColumn: 'name',
        loadtext : 'Currently updating',
        mtype : 'POST',
        colNames: ['MSISDN','IMSI','Last name','First name','Device type','CE Index','Customer lifetime value'],
        colModel: [
                   { name: 'MSISDN', align: 'center', hidden: false, sortable: false,formatter: maskingColumn},
                   { name: 'IMSI', align: 'center', hidden: false, sortable: false,formatter: maskingColumn},
                   { name: 'LastName', align: 'center', hidden: false, sortable: false}, 
                   { name: 'FirstName', align: 'center', hidden: false, sortable: false}, 
                   { name: 'DeviceType', align: 'center', hidden: false, sortable: false,formatter: columnData},
                   { name: 'CEIndex', align: 'center', hidden: false, sortable: true, sorttype: 'int'},
                   { name: 'CustomerLifetimeValue', align: 'center', hidden: false, sortable: false}
                   ],
        sortname: 'CEIndex',
        sortorder: 'desc',
        loadComplete: function(data) 
        {
            var rowCount = _table.jqGrid('getGridParam', 'records');

            if (rowCount > 5) {
                _table.parents("div.ui-jqgrid-bdiv").css({'max-height':'300px'});
                _table.closest(".ui-jqgrid-bdiv").css({'overflow-y':'auto'}).css({'overflow-x':'hidden'});
            }
            if (rowCount != 0) {
                _table.parents().find('.ui-jqgrid-view').first().show();
            }
            if (rowCount <= rowsNum) {
                utils.find('cei-drill-customer-detail-showmore').hide();
            } else {
                utils.find('cei-drill-customer-detail-showmore').show();
            }
            _table.trigger("reloadGrid");
        } ,
        onSortCol: function (data, status, xhr) {
            if (xhr == 'asc') {
                var postData = this.p.postData.jsonRequest.replace('Top','Bottom');
                actionInputObjectExportCustDrilldown.parameters.requestQuery = actionInputObjectExportCustDrilldown.parameters.requestQuery.replace('Top','Bottom');
                var postDataVar = {
                        operation : 'drillDownLevel1',
                        drillLevel1 : "drilldown",
                        jsonRequest : postData
                };
                _this.load(postDataVar);
            } else if (xhr == 'desc') {
                var postData = this.p.postData.jsonRequest.replace('Bottom','Top');
                actionInputObjectExportCustDrilldown.parameters.requestQuery = actionInputObjectExportCustDrilldown.parameters.requestQuery.replace('Bottom','Top');
                var postDataVar = {
                        operation : 'drillDownLevel1',
                        drillLevel1 : "drilldown",
                        jsonRequest : postData
                };
                _this.load(postDataVar);
            }
        },
       beforeProcessing : function(data, status, xhr) {
            jQuery('div#jqgh_' + prefix + '-cei-dd-customer-details-table_CustomerLifetimeValue.ui-jqgrid-sortable').text("Customer Lifetime Value(" + filterValuesHl.currency + ")");
            if (data.queryError != null || !data.rows || data.rows.length == 0) {
                utils.find('cei-drill-customer-detail-ExportShowMore').hide();
                utils.find('div-for-export-customer').hide();
                var noError = utils.find('cei-customerDetails-div').parent().find(".cei-customer-details-dd-no-data");
                if (data.queryError != null) {
                    noError.text("Error in portlet: " + data.queryError);
                } else {
                    noError.html("<strong>No Data Available</strong>");
                }
                noError.show();
                return false;
            } else {
                utils.find('cei-drill-customer-detail-ExportShowMore').show();
                utils.find('div-for-export-customer').show();
                utils.find('cei-drill-customer-detail-showmore').show();
                //Hiding the columns which has no data in all the rows.
                hideColumns(data);
                //Setting CSV Data
                csvData = data;
            }
        },
        beforeRequest : function() {
            _table.parents().find('.ui-jqgrid-view').first().hide();
            utils.find('cei-customerDetails-div').parent().find(".cei-customer-details-dd-no-data").hide();
        },
        loadError : function(xhr, st, err) {
            utils.find('cei-drill-customer-detail-ExportShowMore').hide();
            utils.find('div-for-export-customer').hide();
            var noError = utils.find('cei-customerDetails-div').parent().find(".cei-customer-details-dd-no-data");
            noError.html("<html>Error connecting portlet: " + err + "</strong>");
            noError.show();
        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:18:23.047

您可以尝试以下代码，其中 id 是您的列名。

`$('#grid').jqGrid('setGridParam', {sortorder: 'desc'}); $('#grid').jqGrid('sortGrid', 'id');`

# iphone - 如何更改 UIscreen 主屏幕亮度

> ID：14099110
> 
> 赞同：-1
> 
> 时间：2012-12-31T08:04:49.377
> 
> 标签：iphone, objective-c, ios

如何`[UIScreen mainScreen]`在iOS5.0之前的iOS中更改'亮度值，我们可以`brightness`在iOS5.0中使用''。iOS 4.3 中的替代方案是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:12:00.763

无法直接在 iOS < 5.0 上处理亮度。但是，它存在一个技巧：您可以在主视图上添加 UIView（黑色背景）并更改（黑色 uiview）的 alpha 值。

# c - 如何在源代码级别自动展开源代码中的循环？

> ID：14099113
> 
> 赞同：0
> 
> 时间：2012-12-31T08:04:55.773
> 
> 标签：c, loops, model-checking

我想在源代码级别自动展开用 C 编写的目标程序中的循环（仅供参考，我使用 linux 和 gcc 编译器）。详细说明，我们看下面的简单源码。

```
1: int main(){
2:   int i = 0;
3:   while(i<3){
4:     printf("hi\n");
5:     i++;
6:   }
7: } 
```

我想将上面的源代码转换如下。

```
1: int main(){
2:   int i = 0;
3:   if (i<3){
4:     printf("hi\n");
5:     i++;
6:   }
7:   if (i<3){
8:     printf("hi\n");
9:     i++;
10:  }
11:  if (i<3){
12:    printf("hi\n");
13:    i++;
14:  }
15:} 
```

我知道[CBMC](http://www.cprover.org/cbmc/)会自动展开循环以进行软件模型检查，但我不确定 CBMC 是否会将**源代码**转换为展开循环的源代码。我需要获得一个所有循环都展开的程序源代码。

我试图为此找到工具或解决方案，但我找不到。任何建议或意见将不胜感激。谢谢！

* * *

很抱歉让您感到困惑。我将详细解释我的最终目标“在源代码级别展开循环”。我展开循环的最终目标是**测量执行从循环展开生成的语句的测试用例的数量**。参考下面**的一个例子**。

```
1: void ex(int i){
2:   int i = 0;
3:   while(i<3){
4:     printf("hi\n");
5:     i++;
6:   }
7: } 
```

当我转换上面的源代码时，我想得到以下源代码

```
1: void ex(int i){
2:   if (i<3){
3:     printf("hi\n");
4:     i++;
5:   }
6:   if (i<3){
7:     printf("hi\n");
8:     i++;
9:   }
10:  if (i<3){
11:    printf("hi\n");
12:    i++;
13:  }
14:} 
```

从上面转换的源代码中，我将测量执行来自“循环展开”的每个语句的测试用例的数量。例如，执行第3,4行或第7,8行或第11,12行的测试用例从原始源代码中的第4行和第5行转换而来的测试用例的数量与测试用例执行行的数量不同#4,5 在原始源代码中。

仅供参考，如果有一种方法可以在不展开循环的情况下实现我的最终目标，那么方法也很好！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:21:41.323

在确定某些代码是否适合展开代码方面，gcc 几乎总是比您做得更好。以我的经验，你可以做得比 gcc 更好的情况是非常罕见的 - 唯一合理的情况是当你有非常复杂的代码来做“奇怪”的事情时，你的例子中肯定不是这种情况。

您是否真的尝试过使用 -S 选项进行优化来查看编译器做了什么？

当然，编译器可能不会优化这个特定的循环，因为 printf() 比所有循环加起来要重得多 - 但这是一个稍微不同的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:15:51.640

循环展开只是 GCC（至少在`-O2`or处`-O3`）完成的一项（在许多）优化中，它本身没有意义。（它仅通过其他优化有用，例如不断传播）。

而且您当然不能只想要一个源代码（想象许多宏可以扩展为`for`循环展开的循环）。

我建议您扩展 GCC 编译器，例如使用[MELT](http://gcc-melt.org/)，它是一种高级域特定语言来扩展 GCC

^(（或者，如果您有很多时间，可以痛苦地用 C 编写 GCC 插件）)。

然后你会在一些循环展开（和其他优化）传递之后添加一个传递，这将处理 Gimple 内部表示（你可以将 Gimple 理解为一种“最小”的 C 语言，只有基本操作 à la`x = y + z;`和调用和简单的测试，如`if (x > y) goto l;`） .

但我仍然不明白你想对结果做什么。如果您想进一步分析它，请处理（可能使用 MELT 中编码的另一遍）编译器内部的 GCC 内部表示。如果您想将该“展开”代码提供给某个外部工具，请编写一个转换通道，将 Gimple 转换为某种适当的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T08:17:32.233

您应该查看汇编器以了解编译器在循环展开中的实际性能。但是你也可以帮助你的编译器更好地编程：

```
for (unsigned i = 0; i < 3; ++i) {
  printf("hi\n");
} 
```

即使用无符号整数类型作为循环变量（`size_t`通常是一个好主意）并且将循环变量设为本地。`-S -O3 -march=native`然后使用编译器选项之类的东西检查汇编器。

然后，只有这样，如果您对结果不满意，请查看[P99](http://p99.gforge.inria.fr/)。它有一组宏来进行展开，而不仅仅是 for 循环。寻找类似的东西`P99_FOR`。

# solr - 点击相关性排名

> ID：14099119
> 
> 赞同：0
> 
> 时间：2012-12-31T08:05:35.757
> 
> 标签：solr, lucene

我想在搜索（solr）中实现点击相关性排名。基本上根据用户的反馈（即点击），我们想要改变搜索结果的顺序。以下是我的方法。

*我们将向文档添加一个新字段，以索引已访问（或单击）结果/文档的查询。每当单击结果时，我们将更新索引以包含已单击结果的查询。我们将使用 solr 的部分更新将新查询添加到索引中。因为，我们也使用索引作为我们的数据存储，所以我们所有的字段都被存储了，我可以再存储一个字段。*

这是实现此功能的正确方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:45:01.817

**注意：**我还必须评估日志记录，并且（还）远离实现它。我刚开始构建一个需求规范，我制定了它。
如下。

```
Evaluate user selection (Click through) for `query` and matched result position. 
```

位置很重要，因为它决定了相关性。

我选择排名靠前的结果为 3。（假设`N=3`）。

1.  如果用户正在选择具有 的东西`N>3`，那么增加查询的结果提升是很重要的。
2.  如果位置在`N<=3`，我们很好。
3.  如果位置始终位于`N<=3`，则将排名靠前的结果降级（也许？）

但是，我们可能会在这里得到很多错误的信息。假设，一个用户发疯了，点击了完全不相关的结果。

因此，我们需要监控使用情况，甚至记录用户事件，而不仅仅是基本位置并单击以覆盖它。

所以，日志需要打开：

*   每页的点击次数`{user-login|session}`。
*   点击结果`{Query + Filters + Facets}`。`{did you mean... | autocomplete}`点击事件的特殊标志，带有`{TimeStamp + Location}`

如果大量独立用户表示在某个时间范围（几个月）内点击了低分文档，我会根据位置提升文档。

由于我们甚至关联了一个用户会话（登录），我也许可以根据用户映射结果（如果用户产生不相关的噪音，请将其发回给他；P）。

但是，我会尽量不要过度推动。搜索可能看起来被篡改。

此外，用户填写的反馈表可能是一个好主意，可以了解您的进展情况。

# drupal - 如何在 drupal 块的 polldaddy 中添加唯一 ID？

> ID：14099121
> 
> 赞同：0
> 
> 时间：2012-12-31T08:05:40.747
> 
> 标签：drupal, rating

我想在 drupal 块中添加一个唯一 ID，以进行投票爸爸评级。这是一个视频网站，我希望每个视频的每个评级都是如此，因此我需要将视频 ID 或节点拉到块中。如何实现这一点，尤其是在 PHP 中？或者除了安装模块之外的其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T05:15:30.507

在尝试了一些东西之后，这终于奏效了！

```
<?php print url(drupal_get_path_alias('node/' . arg(1)), array('absolute' => TRUE)); ?> 
```

# c++ - 命名空间的前向声明

> ID：14099125
> 
> 赞同：8
> 
> 时间：2012-12-31T08:06:21.840
> 
> 标签：c++, namespaces, forward-declaration

```
namespace CounterNameSpace {
    int upperbound;
    int lowerbound;
    using namespace NS;//Error
}
namespace NS {
int i;
}
// ...
namespace NS {
int j;
} 
```

在上述情况下，它显示一个错误。错误 C2871：“NS”：不存在具有此名称的命名空间我知道我是否在反命名空间问题得到解决之前定义了 NS。但是只想知道c++中是否存在诸如命名空间前向声明之类的东西。这样就可以解决上述问题而无需在counternamespace之前定义NS。请帮忙 。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T08:10:59.660

没有什么说命名空间需要它的所有内容：

```
namespace NS {}
namespace CounterNameSpace {
    int upperbound;
    int lowerbound;
    using namespace NS;
}
namespace NS {
int i;
} 
```

但是，这可能无法满足您的要求。在您声明它们之前，您仍然无法使用该命名空间中的任何类型。

# css - 我怎样才能让这个div向左而不是向右？

> ID：14099127
> 
> 赞同：1
> 
> 时间：2012-12-31T08:06:33.337
> 
> 标签：css, html

看看它的这张照片...

[http://www.flickr.com/photos/91733140@N06/8329388242/in/photostream](http://www.flickr.com/photos/91733140@N06/8329388242/in/photostream)

我怎样才能让这个div向左而不是向右？

它一直在搞砸，我真的需要修复它有什么想法可以让它工作吗？

```
 <style type="text/css">

#body {
    height: 100%;
    margin: 0;
    padding: 0;
}

#html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    background: #E0E0E0;
}

#header {
    background: #FFFFFF;
    height: 33px;
    width: 100%;
    padding: 5px 30px 5px 30px;
    font-family: arial;
    font-size: 30px;
    border-bottom: 1px #737373 solid;
    position: fixed;
    top: 0;
}

#container {
    width: 1205px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 50px;
}

#box {
    width: 228px;
    height: auto;
    background: #FFFFFF;
    border: 1px #5E5E5E solid;
    margin: 5px;
    float: left;
    font-family: arial;
}

#box_title {
    width: 218px;
    height: auto;
    padding: 5px;
    background: #5E5E5E;
    color: white;
    border-bottom: 1px #FFFFFF solid;
    float: left;
    font-family: arial;
}

#box_img {
    width: 210px;
    height: auto;
    float: left;
    margin-left: auto;
    margin-right: auto;
}

#box_options {
    width: 228px;
    height: 40px;
    background: #FFFFFF;
    color: #000000;
    border-top: 1px #5E5E5E solid;
    float: left;
    font-family: arial; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:16:39.633

不要通过打开的标签来判断你，但你似乎想要一堵“Pinterestish”墙。这通过香草 css 并不容易，我可以建议研究 jquery masonry 吗？

[http://masonry.desandro.com/](http://masonry.desandro.com/)

它为您完成所有繁重的工作

# java - 重新定义 webapp 位置 - 用于 web 资源的 maven 标准文件夹

> ID：14099142
> 
> 赞同：1
> 
> 时间：2012-12-31T08:08:39.363
> 
> 标签：java, maven, web-applications

我有一个用 Ant 构建的大型 Java 项目，我正在转换为 maven。

如何重新定义 webapp - web 资源的 maven 标准文件夹？我无法移动 Web 内容，并且它始终处于积极开发中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:16:42.250

看这里：

[http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html)

您要更改的属性是“warSourceDirectory”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T11:05:23.377

解决者

```
 <!-- http://maven.apache.org/plugins/maven-war-plugin/examples/adding-filtering-webresources.html -->
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <webResources>
                    <resource>
                        <!-- this is relative to the pom.xml directory -->
                        <directory>${webapp-folder}</directory>
                        <excludes>
                            <exclude>**/*.jar</exclude>
                        </excludes>
                    </resource>
                </webResources>
            </configuration>
        </plugin> 
```

# python - 在 Python 中开始和结束一个独立的子会话

> ID：14099147
> 
> 赞同：-1
> 
> 时间：2012-12-31T08:09:11.027
> 
> 标签：python

如何实现以下想法，其中不同的作业分别（隔离）完成，而不退出同一个 Python 主会话。

```
>>> Session.Start()
>>> from sympy import *
>>> x = Symbol('x')
>>> ...         #do the job
>>> Session.End() 
```

以及使用其他包的另一个会话：

```
>>> Session.Start()
>>> from numpy import *
>>> x = array([1,2,3,4])
>>> ...         #do the job
>>> Session.End() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:27:05.697

尽管不建议这样做，但您可以这样做：

*   启动会话会保存 、 和全局变量的`sys.modules`状态`sys.path`。
*   无论发生什么都会对这些（也许还有其他）产生一些影响。
*   停止会话将恢复先前启动的会话的状态。

您应该注意，这并不完美，也不推荐。我真的看不出有什么问题，`import sympy`而不是`from sympy import *`.

**编辑：**

似乎访问和修改全局范围并不容易，并且会给您带来很多麻烦……例如：

```
class Session(object):
    def __init__(self, gref):
        self.init()
        self.gref = gref

    def init(self):
        self.modules = {}
        self.path = None
        self.glob = {}

    def start(self):
        import sys
        self.modules = sys.modules.copy()
        self.path = sys.path[:]
        self.glob = self.gref.copy()
        self.gref['test'] = 'abc'

    def stop(self):
        import sys
        sys.modules = self.modules.copy()
        sys.path = self.path[:]
        for k in self.gref.keys():
            del self.gref[k]
        self.gref.update(self.glob)

    def __repr__(self):
        return repr(self.glob) 
```

运行它：

```
Python 2.7.3 (default, Aug  1 2012, 05:16:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from sessionpy import Session
>>> s = Session(globals())
>>> before = 123
>>> s.start()
>>> after = 456
>>> s.stop()
>>> after
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'after' is not defined
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 66, in apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 1, in <module>
    from apport.report import Report
  File "/usr/lib/python2.7/dist-packages/apport/report.py", line 18, in <module>
    import problem_report
  File "/usr/lib/python2.7/dist-packages/problem_report.py", line 15, in <module>
    from email.encoders import encode_base64
  File "/usr/lib/python2.7/email/__init__.py", line 115, in <module>
    setattr(sys.modules['email'], _name, importer)
KeyError: 'email'

Original exception was:
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'after' is not defined
>>> before
123
>>> 
```

您可以看到它有效（因为`after`引发 a `NameError`）但是`sys.excepthook`. 我只能想象使用 2 个大型库（例如`sympy`和`numpy`.

**注意：** 如果你只想运行一个简单的东西，你可以把全局变量弄乱，你会没事的。

# javascript - 将 jquery 动画转换为 CSS3

> ID：14099153
> 
> 赞同：8
> 
> 时间：2012-12-31T08:09:41.643
> 
> 标签：javascript, jquery, html, css

HTML：

```
 <div id="slick-slidetoggle">wxyz</div>           

            <div id="slickbox" >abcd</div>​ 
```

JS

// 一旦 DOM 准备好就隐藏 slickbox（页面加载稍早一点）

```
 var hoverVariable=false;
        var hoverVariable2=false;

        $('#slickbox').hide();
        $('#slick-slidetoggle').mouseover(function() {
            hoverVariable2=true;
            $('#slickbox').slideToggle(600);
            return false;
        })
        $('#slick-slidetoggle').mouseleave(function() {
            hoverVariable2=false;
            setTimeout(function (){
            if(!hoverVariable && !hoverVariable2){
            $('#slickbox').slideToggle(600);
            return false;}
         }, 1000);
        })
        $('#slickbox').mouseleave(function() {                    
            hoverVariable=false;
            setTimeout(function (){
            if(!hoverVariable && !hoverVariable2){                    
            $('#slickbox').slideToggle(600);
            return false;}
            return false;
           }, 1000); 
        })
        $('#slickbox').mouseover(function() {
             hoverVariable2=false;

            hoverVariable=true;

        })​ 
```

CSS

```
#slickbox {
    background: black;
    width:100px;
    height: 135px;
    display: none; 
    cursor:pointer;
    color:white;
}
#slick-slidetoggle{
 background: yellow;
    width:100px;
    height: 135px;
    cursor:pointer;
    color:black;

} 
```

​</p>

现在上面的功能是我想要使用纯 CSS 实现的，即当我将鼠标悬停在“wxyz”按钮上时，“abcd”按钮应该下降并保持可见，即使鼠标从“wxyz”移开 3 秒。

我尝试了使用显示属性的转换延迟，但显然这不适用于显示属性，然后我尝试了位置：绝对和可见性以及可见性的转换延迟，但是按钮的出现延迟了 3 秒而不是隐藏。我希望“abcd”按钮在仅使用 CSS 或 CSS3 将按钮从“wxyz”移开 3 秒后隐藏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:20:14.740

这是一个[**示例**](http://jsbin.com/ufodar/2/)（此处为[**代码**](http://jsbin.com/ufodar/2/edit)）

（我只写了`-webkit`，但你可以添加其他前缀）

```
#test2 {
    position:absolute;
    z-index:1;
    background: black;
    width:100px;
    height: 135px;
    opacity: 0; 
    cursor:pointer;
    color:white;
    opacity:0;
    -webkit-animation-duration: 600ms;
    -webkit-animation-timing-function: ease-in-out;
    -webkit-animation-iteration-count: 1;
    -webkit-animation-fill-mode: both;
}

#test {
    position:absolute;
    z-index:2;
    background: yellow;
    width:100px;
    height: 135px;
    cursor:pointer;
    color:black;

}
.container {
  position:relative;
}

.container:hover #test2 {
  opacity:1;
  -webkit-animation-name: slideDown;
}

.container:not(:hover) > #test2 {
  -webkit-animation-delay:1000ms;
  -webkit-animation-name: slideUp;
  opacity:1;
}

@-webkit-keyframes slideDown {
    0% {
        -webkit-transform: translateY(0);
    } 
    100% {
        -webkit-transform: translateY(135px);
    }
}

@-webkit-keyframes slideUp {
    0% {
        -webkit-transform: translateY(135px);
    } 
    100% {
        -webkit-transform: translateY(0);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:26:49.547

使用过渡执行如下操作：

```
 <head>
        <style>
            #outer {
                width: 100px;
                height: 50px;
                background-color: green;
                position: relative;
            }
            #innerOne {
                width: 100px;
                height: 50px;
                background-color: blue;
            }
            #innerTwo {
                width: 100px;
                height: 50px;
                background-color: red;
                position: absolute;
                top: -150px;
                left: 100px;

            }

            #outer:hover #innerTwo {
                top: 0px;

                -webkit-transition: top 2s ease-out;
                -moz-transition: top 2s ease-out;
                -o-transition: top 2s ease-out;
                transition: top 2s ease-out;
            }
            #innerTwo:not(hover) {
                -webkit-transition: top 1s ease-in 3s;
                -moz-transition: top 1s ease-in 3s;
                -o-transition: top 1s ease-in 3s;
                transition: top 1s ease-in 3s;
            }
        </style>
    </head>
    <body>
        <div id="outer">
            <div id="innerOne">wxyz</div>
            <div id="innerTwo">abcd</div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:03:03.150

这是一个跨浏览器的解决方案：

测试时间`OPERA`- `SAFARI`- `CHROME`- `MAXTHON`-`FIREFOX`

**HTML：**

```
<div class="container">
    <div id="test">wxyz</div>           
    <div id="test2" >abcd</div>
</div> 
```

**CSS：**

```
#test {
    width:100px;
    height:100px;
    background:yellow;
    position:relative;
    z-index:2;
}
#test2 {
    top:-100px;
    width:100px;
    height:100px;
    background:black;
    color:white;
    position:relative;
    z-index:1;
}
.container:hover #test2 {
    top:0px;
    transition-property:top;
    transition-duration:0.2s;
    transition-timing-function: linear;
    /* Firefox 4 */
    -moz-transition-property:top;
    -moz-transition-duration:0.2s;
    -moz-transition-timing-function:linear;
    /* Safari and Chrome */
    -webkit-transition-property:top;
    -webkit-transition-duration:0.2s;
    -webkit-transition-timing-function:linear;
    /* Opera */
    -o-transition-property:top;
    -o-transition-duration:0.2s;
    -o-transition-timing-function:linear;
    /* IE */
    -ms-transition-property:top;
    -ms-transition-duration:0.2s;
    -ms-transition-timing-function:linear;
}
.container:not(:hover) #test2 {
    top:-100px;
    transition-property:top;
    transition-duration:0.2s;
    transition-timing-function: linear;
    transition-delay: 3s;
    /* Firefox 4 */
    -moz-transition-property:top;
    -moz-transition-duration:0.2s;
    -moz-transition-timing-function:linear;
    -moz-transition-delay:3s;
    /* Safari and Chrome */
    -webkit-transition-property:top;
    -webkit-transition-duration:0.2s;
    -webkit-transition-timing-function:linear;
    -webkit-transition-delay:3s;
    /* Opera */
    -o-transition-property:top;
    -o-transition-duration:0.2s;
    -o-transition-timing-function:linear;
    -o-transition-delay:3s;
    /* IE */
    -ms-transition-property:top;
    -ms-transition-duration:0.2s;
    -ms-transition-timing-function:linear;
    -ms-transition-delay:3s;
} 
```

小提琴：http: [//jsfiddle.net/BerkerYuceer/2gVLX/](http://jsfiddle.net/BerkerYuceer/2gVLX/)

# ruby-on-rails - 在一个命令中编辑 Rails 迁移文件

> ID：14099155
> 
> 赞同：0
> 
> 时间：2012-12-31T08:10:26.780
> 
> 标签：ruby-on-rails, bash, shell

这确实是一个shell脚本问题，但与rails有关。

我像这样创建 Rails 迁移：

```
~/dropbox/rails/f6$ rails g migration ModifyWord 
```

Rails 然后创建迁移脚本，并在控制台上报告名称：

```
~/dropbox/rails/f6$ rails g migration ModifyWord
      invoke  active_record
      create    db/migrate/20121231080052_modify_word.rb 
```

然后我使用 vi 编辑迁移文件，如下所示：

```
~/dropbox/rails/f6$ vi db/migrate/20121231080052_modify_word.rb 
```

我希望能够将 vi*文件名*作为单个命令执行，也许是通过一个 shell 脚本，该脚本可以将别名添加到我的 .bash_rc 中。

也就是说，我会在迁移后运行命令，它会查看报告的文件名。

关于我应该如何处理这个问题的任何建议？

***解决方案***

根据 Michaël Witrant 的建议，我已将别名添加到我的 bash 个人资料中。

*   **cm** to cat 最后创建的迁移文件
*   **vm**到 vi 最后创建的迁移文件

    别名 cm='cat `ls db/migrate/*.rb | tail -n 1`'

    别名 vm='vi `ls db/migrate/*.rb | tail -n 1`'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:19:36.160

由于它以时间戳开头，因此它应该始终是按字母顺序排列的最后一个文件，所以我只需执行以下操作：

```
vi `ls db/migrate/*.rb | tail -n 1` 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T08:16:26.600

你熟悉这个：

```
rails generate migration AddDetailsToProducts part_number:string price:decimal 
```

将在迁移文件中生成：

```
class AddDetailsToProducts < ActiveRecord::Migration
  def change
    add_column :products, :part_number, :string
    add_column :products, :price, :decimal
  end
end 
```

因此，您不必单独编辑迁移文件。

# algorithm - 人工地平线的正确翻译

> ID：14099158
> 
> 赞同：5
> 
> 时间：2012-12-31T08:10:41.807
> 
> 标签：algorithm, math, 3d

我想画一个人造地平线。视图的中心将代表完美的水平视图，滚动旋转水平线，俯仰将其向上或向下移动。

问题是：在给定俯仰角的情况下，向上或向下（俯仰）平移地平线的正确计算是什么。

我的猜测是，这可能取决于假设相机的 FOV 角度，因此该角度需要成为所寻求算法的一个因素。理想情况下，我会计算出 iPhone/iPad 相机的这个角度，这样如果你把设备放在你面前并看向地平线，人造地平线就会与实际地平线对齐。

到目前为止，我一直在猜测偏移量，但我想知道确切的公式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T12:15:58.377

试试horizo​​n_offset/(screen_height/2)=tan(pitch)/tan(vertical_FOV/2)。

看图，公式自己推导出来。

[![图片](../Images/2577496ac7355c39e58d39a4b5e49fcc.png)](https://i.stack.imgur.com/HEUnh.png)
[（来源：[zwibbler.com](http://zwibbler.com/shared/3120.png)）]
。

**更新**我有两个角度混淆。一个是*相机的FOV角度，另一个是**屏幕*的视角。这是两个不同的东西。后者取决于观看距离。您可能必须估计此距离，并调整放大倍率和/或焦距，以使屏幕上可见的对象与肉眼可见的相同对象具有相同的角度大小。（对于我的特定手机，如果用户将手一直向前伸，则在 5 倍变焦后，您需要将图像放大大约 3 倍）。然后两个角度相同，公式有效。

如果您想引入放大倍率（即屏幕上的对象与现实生活中的对象大小不同），请将水平偏移乘以放大倍数。

**更新 2**当考虑到观看距离时，屏幕尺寸抵消了，偏移量就变成`viewing_distance*tan(pitch_angle)`了（单位放大倍率）。

# html - 如何使这个 HTML 片段响应？

> ID：14099161
> 
> 赞同：2
> 
> 时间：2012-12-31T08:11:04.013
> 
> 标签：html, css, responsive-design

我有以下 html，[js fiddle](http://jsfiddle.net/pgfUT/4/) **更新**：注意，我也在页面中使用 Jquery Mobile，

```
 <div class="control my-control">
        <div>
            <div>
                <div>Title:</div>
                <div></div>
                <div></div>
            </div>
            <div>
                <div>Lyrics:    </div>
                <div>
                    <div class="lyric-content"></div>
                </div>
                <div></div>
            </div>
        </div>
        <div>
            <img src="http://cdn1.iconfinder.com/data/icons/snowish/72x72/actions/gtk-media-play-ltr.png"></div>
    </div>​ 
```

这很好，效果很好。但这不是响应式的，这意味着它在移动设备和桌面设备上看起来确实同样出色。我试图将宽度设为 100%。它看起来并不总是很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:41:35.593

A simple solution would indeed be to set the width at +/- 100% for the wrapping div. Also instead of adding extra javascript perhaps mediaqueries are the way to go?

In .css:

```
@media only screen and (max-width: 480px) { 
```

//styles for small screen devices here

}

In .html:

```
<link rel="stylesheet" type="text/css" media="only screen and (max-device-width: 480px)" href="a-stylesheet-for-smaller-screens.css" /> 
```

[More](http://www.w3.org/TR/css3-mediaqueries/) [on the subject](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

# java - Android：预期为 VariableDeclaratorId。试图获得屏幕尺寸

> ID：14099162
> 
> 赞同：1
> 
> 时间：2012-12-31T08:11:10.043
> 
> 标签：java, android

我正在尝试在应用程序中获取屏幕大小，但标题中出现错误。

**令牌“大小”的语法错误，此令牌后应为 VariableDeclaratorId**

这是我的代码：

显示地图.java

```
public class DisplayMap extends Activity {
    Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;
    int height = size.y;
} 
```

有人可以告诉我为什么我会收到这个错误吗？我一直在研究，但我无法弄清楚这是什么意思。

一如既往，非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:17:16.693

定义 on 方法并将所有代码放在那里并从 onCreate(..) 调用，因为它是一个活动：

```
public class DisplayMap extends Activity {

@Override
public void onCreate(Bundle b) {
super.onCreae(b);
getSize();
}
public void getSize() {

Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size);
    int width = size.x;
    int height = size.y;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:15:27.440

这段代码应该在一个方法中。不直接在类体内。

# java - 计算阶乘

> ID：14099164
> 
> 赞同：0
> 
> 时间：2012-12-31T08:11:32.640
> 
> 标签：java, android

我正在 Android 中开发一个计算器应用程序。

我已经开发了计算器并且除了阶乘函数之外运行良好。

计算阶乘的函数是：

```
public float factorial (float n){
    float ans=1;
    for (int i=1; i<=n; i++){
        ans=ans*i;
    }
    return ans;
} 
```

问题是，直到`34!`我认为我得到正确答案。

```
34!=2.952328229965333E38 
```

但是`n>=35`，我得到了答案

```
n!=Infinity 
```

我意识到这是因为浮动溢出。我怎样才能增加`float`至少可以说的范围`10^100.`

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:12:54.780

您不能增加任何 Java 原始类型的范围，因为它们是在 JLS 中设置的。在您的情况下，您可以使用 double 来获得更大的范围，或者使用[BigDecimal](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html)来获取任意大的数字

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T08:14:25.090

如果您不介意绝对精度，则可以使用双精度，它可以与 (近似) 一样大`1.8 * 10^308`。

如果关注精度，您应该使用 BigDecimal 或 BigInteger（阶乘是一个整数函数，在这种情况下 BigInteger 可能比 BigDecimal 更有效）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T08:14:34.967

使用`double`而不是`float`扩展浮点范围。

如果精度是一个问题，那么你不应该使用浮点类型。既不`double`也不`float`。使用[BigInteger](http://docs.oracle.com/javase/7/docs/api/java/math/BigInteger.html)。但在这种情况下，还要解决您的问题：*不是*`34 != 2.952328229965333E38`正确答案。

 ** * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-09T05:47:45.153

No need to re-invent the wheel for things as simple as a factorial function.

Use [Google's Guava library](https://github.com/google/guava/blob/master/README.md). Android apps like **Youtube** and **Google Search** (from Google itself) use Guava.

```
double f = DoubleMath.factorial(n); 
```

It accepts input upto n=170, beyond which it returns `Double.POSITIVE_INFINITY`.*

# ruby - 使用 tor 作为代理时 em-http-request 意外结果

> ID：14099168
> 
> 赞同：1
> 
> 时间：2012-12-31T08:12:05.910
> 
> 标签：ruby, eventmachine, tor, em-http-request

我创建了一个要点，它准确地显示了发生的事情。
[https://gist.github.com/4418148](https://gist.github.com/4418148)
我测试了一个使用 ruby​​ 的 'net/http' 库和 'socksify/http' 的版本，它运行良好，但如果 EventMachine 版本返回意外结果。
Tor 浏览器中的响应是正确的，但使用 EventMachine 是不正确的！

它返回一个响应，但它与通过浏览器发送请求时返回的响应不同，net/http 有或没有代理。

为了方便，我也贴在这里。

```
require 'em-http-request'

DEL = '-'*40
@results = 0

def run_with_proxy
  connection_opts = {:proxy => {:host => '127.0.0.1', :port => 9050, :type => :socks5}}
  conn = EM::HttpRequest.new("http://www.apolista.de/tegernsee/kloster-apotheke",       connection_opts)
  http = conn.get
  http.callback {
    if http.response.include? "Oops"
      puts "#{DEL}failed with proxy#{DEL}", http.response
    else
      puts "#{DEL}success with proxy#{DEL}", http.response
    end
    @results+=1
    EM.stop_event_loop if @results == 2
  }
end

def run_without_proxy
  conn = EM::HttpRequest.new("http://www.apolista.de/tegernsee/kloster-apotheke")
  http = conn.get
  http.callback {
    if http.response.include? "Oops"
      puts "#{DEL}failed without proxy#{DEL}", http.response
    else
      puts "#{DEL}success without proxy#{DEL}", http.response
    end
    @results+=1
    EM.stop_event_loop if @results == 2
  }
end

EM.run do
  run_with_proxy
  run_without_proxy
end 
```

感谢任何澄清。

# javascript - async.series：功能的内存泄漏？

> ID：14099169
> 
> 赞同：0
> 
> 时间：2012-12-31T08:12:10.507
> 
> 标签：javascript, async.js

我正在学习使用`series.js`。我写了一个简单的例子——运行`async.series`3 个函数。出于好奇，我在回调调用前后创建了日志输出。出乎我意料的是，“回调后”没有日志消息。

我的问题是 - 是内存泄漏，这些调用仍在堆栈中等待返回吗？还是`async.js`在回调后使用特殊机制切割函数？我试图阅读`async.js`源代码，但一无所获。

有什么想法吗？

测试页面：

```
<!DOCTYPE html> 
<html> 
<head> 
<meta charset="UTF-8" />
<title>My Page</title> 

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="https://raw.github.com/caolan/async/master/lib/async.js"></script>
<script type="text/javascript">

    var a = function (callback) {
        console.log('a before callback');
        return callback(null);
        console.log('a after callback');
    };
    var b = function (callback) {
        console.log('b before callback');
        return callback(null);
        console.log('b after callback');
    };
    var c = function (callback) {
        console.log('c before callback');
        return callback(null);
        console.log('c after callback');
    };

    var doit = function() {
        console.log('click');
        async.series([a, b, c, a, b, c], function(something) {console.log('async.series happy end: '+something);});
        console.log('series finished');
    };

    $(function() {
        $('#bu').click(doit);           
    });

    console.log('hello');
</script>
</head> 
<body id="bo" class="blue">
<input type="button" id="bu" value="click"><br />
</body>
</html> 
```

日志输出：

```
hello
event.layerX and event.layerY are broken and deprecated in WebKit. They will be removed from the engine in the near future.
click
a before callback
b before callback
c before callback
a before callback
b before callback
c before callback
async.series happy end: null
series finished 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:48:40.040

没有“回调后”日志，因为您是从带有“回调后”行之前的函数返回的：

```
var c = function (callback) {
        console.log('c before callback');

        // the next line exits this function and nothing after it will execute
        return callback(null);

        // this won't execute because the function has returned.
        console.log('c after callback');
    }; 
```

# c# - Roslyn：获取数组值

> ID：14099170
> 
> 赞同：2
> 
> 时间：2012-12-31T08:12:24.497
> 
> 标签：c#, arrays, roslyn

我尝试使用 Roslyn 获取数组值。例如，如果我有这样的 C# 代码：

```
int[] arrInt = {10, 20, 30, 40, 50}; 
```

那么如何获取 arrInt[0] 为 10、arrInt[1] 为 20 等信息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-01T03:48:10.293

我鼓励您[查看文档](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/645ac1ef-d21b-40bf-8324-fefe0bd8c6f8)、[常见问题解答和示例](http://social.msdn.microsoft.com/Forums/en-US/roslyn/thread/91613dc0-290e-408c-b136-2d1d4a23e295)，尤其是有关语法和语义分析的部分。

这是解决方案：

```
static void Main(string[] args)
{
    string code = "int[] arrInt = {10, 20, 30, 40, 50};";

    //Parse Syntax tree
    var tree = Roslyn.Compilers.CSharp.SyntaxTree.ParseText(code);

    //Locate the arrInt identifier in the Syntax tree
    var declarator = tree.GetRoot().DescendantNodesAndSelf().Where(t => t.Kind == Roslyn.Compilers.CSharp.SyntaxKind.VariableDeclarator
        && ((Roslyn.Compilers.CSharp.VariableDeclaratorSyntax)t).Identifier.ValueText == "arrInt").First() as Roslyn.Compilers.CSharp.VariableDeclaratorSyntax;

    var index = 1;
    var expression = GetExpressionAtInitializer(declarator, index);

    Console.WriteLine(expression);

    //Examine 'expression' for more information on value at the second index            
}

private static Roslyn.Compilers.CSharp.ExpressionSyntax GetExpressionAtInitializer(Roslyn.Compilers.CSharp.VariableDeclaratorSyntax declarator, int index)
{
    var initializerExpression = declarator.Initializer.Value as Roslyn.Compilers.CSharp.InitializerExpressionSyntax;
    var expression = initializerExpression.Expressions[index];
    return expression;
} 
```

您可以使用 VS 的快速监视窗口来查看语法树的层次结构。

如果您对其进行一些语义分析，您可能能够获得有关代码中符号的更有意义的信息。

# authentication - spring security中用户模式和acl模式之间的区别？

> ID：14099171
> 
> 赞同：0
> 
> 时间：2012-12-31T08:12:41.047
> 
> 标签：authentication, spring-security, authorization, acl

[本文介绍](http://springinpractice.com/2010/07/06/spring-security-database-schemas-for-mysql/)了 3 个关于Spring Security 实现的模式。我想知道 和 之间的区别`user schema`，`acl schema`哪个更好用，或者换句话说，我想知道每个的域使用情况，以便为我的应用程序选择最佳解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T11:13:48.187

您不能在没有用户模式的情况下使用 ACL 模式（因为身份验证过程取决于用户模式，通常您总是需要身份验证）。你有两个选择：

*   用户架构
*   用户架构和 ACL 架构

让我们看看他们能为您做什么：

**用户模式**用于基于**角色**的身份验证和授权。您可以保护 URL 或方法调用。使用用户模式，您可以处理以下情况：

*   具有 ADMIN 角色的用户可以访问 /admin.html。
*   具有 PRODUCT_MANAGER 角色的用户可以访问 /add_product.html
*   具有 PRODUCT_MANAGER 角色的用户可以访问 /manage_product.html?id=x。
*   具有 PRODUCT_VIEWER 角色的用户可以访问 /view_product.html?id=x。

**ACL 模式**用于增强授权。它将考虑实际的域对象。您将能够处理以下情况：

*   **具有 PRODUCT_MANAGER 角色的用户只有在拥有 id=136 的产品所有者时**才能访问 /manage_product.html?id=136 。
*   某些 PRODUCT_MANAGER 可以将管理自己的 id=136 产品的能力授予另一个 PRODUCT_MANAGER。

因此，继续使用用户模式并在需要时添加以后的 ACL 模式。

# jquery - Ext , Grid , 使用 RTL 编辑单元格后滚动

> ID：14099178
> 
> 赞同：0
> 
> 时间：2012-12-31T08:13:40.927
> 
> 标签：jquery, grid, scrollbar, right-to-left, ext.net

我有一个带有 Ext.Net c# Grid 控件的 RTL 网页。我允许滚动网格。这一切都很好。在我更改 RTL "Ext grid" 中单元格的值后，滚动条会丢失正确的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T04:25:24.197

我找到了修复它的方法。编辑网格中的单元格后调用此函数。

```
function FixScrollSize(gridClientID) 
{
    $("[id=" + gridClientID + "] .x-grid-editor").hide();
} 
```

# c# - 从数据集中提取数据

> ID：14099183
> 
> 赞同：0
> 
> 时间：2012-12-31T08:14:18.990
> 
> 标签：c#, .net

尊敬的用户，

我正在使用数据集提取数据。我想在文本框中输入值。但价值并未到来。

我有以下代码

```
try
            {
                da = new SqlDataAdapter("select ID from Customer where Name='" + gvBkPendingSearch.SelectedRows[0].Cells[1].Value.ToString() + "'",con);
                DataSet ds = new DataSet();
                da.Fill(ds);
                for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
                    txtCustomerID.Text = ds.Tables[0].Rows[0].ToString();
            }
            catch (Exception ex)
            {

            }
            finally
            {
            } 
```

txtCustomerID 是我的文本框。它以>>>>>System.Data.DataRow 的形式捕获价值

错误在`txtCustomerID.Text = ds.Tables[0].Rows[0].ToString();`

但我无法理解。请帮我。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-31T08:22:42.240

像这样改变它

```
for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
   txtCustomerID.Text = ds.Tables[0].Rows[i]["ID"].ToString(); 
```

你正在做的错误是，你正在访问这个

```
ds.Tables[0].Rows[0].ToString(); 
```

表示第 0 行，整行！！不是列值

数据表行在`System.Data.DataRow`.Net中

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T08:20:12.960

您需要选择列：

```
txtCustomerID.Text = ds.Tables[0].Rows[i][0].ToString(); 
```

另请注意，您将在循环的每次迭代中覆盖文本框的值。所以你最终会得到这个文本框中最后一条记录的 ID。

此外，您的查询似乎容易受到 SQL 注入的影响。就我个人而言，我建议你刮取数据集以支持 ORM 甚至是普通的旧 ADO.NET：

```
public static IEnumerable<int> GetIds(string name)
{
    using (var conn = new SqlConnection("Your connection string comes here"))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        cmd.CommandText = "select ID from Customer where Name=@Name";
        cmd.Parameters.AddWithValue("@Name", name);
        using (var reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                yield return reader.GetInt32(reader.GetOrdinal("ID"));
            }
        }
    }
} 
```

现在你可以愉快地使用这个函数了：

```
string name = gvBkPendingSearch.SelectedRows[0].Cells[1].Value.ToString();
int id = GetIds(name).FirstOrDefault();
txtCustomerID.Text = id.ToString(); 
```

# android - 如何使用反射将 nfc_extras 添加到 android 项目？

> ID：14099188
> 
> 赞同：1
> 
> 时间：2012-12-31T08:14:40.033
> 
> 标签：android, reflection, nfc

我想在我的 android 项目中使用 nfc_extras 来使用我手机的卡模拟功能。我知道有两种方法可以做到这一点；通过在 Android 源代码中创建 jar 文件或使用反射。不过，我更愿意通过第二个。如何通过反思做到这一点？如何在我的项目中使用反射来利用 nfc_extras？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:25:54.670

请参阅[Nikolay Elenkov](https://stackoverflow.com/users/242930/nikolay-elenkov)的博客，网址为[http://nelenkov.blogspot.nl/2012/08/accessing-embedded-secure-element-in.html](http://nelenkov.blogspot.nl/2012/08/accessing-embedded-secure-element-in.html)，以获取有关如何完全按照您的意愿进行操作的深入教程。

# mysql - 查询不等于多个值

> ID：14099193
> 
> 赞同：0
> 
> 时间：2012-12-31T08:15:44.997
> 
> 标签：mysql

我有一点编码，有人可以帮助我使查询正确，我以为我有它，但我只是收到一个查询错误
原始代码：

```
$q=$db->query("SELECT u.*,g.* FROM users u LEFT JOIN gangs g ON g.gangID=u.gang WHERE u.user_level != 2 $myf ORDER BY level DESC,userid ASC LIMIT 20"); 
```

我失败的编辑代码：

```
$q=$db->query("SELECT u.*,g.* FROM users u LEFT JOIN gangs g ON g.gangID=u.gang WHERE u.user_level != 2 || WHERE u.user_level !=0 $myf ORDER BY level DESC,userid ASC LIMIT 20"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:17:33.450

用这个

```
$q=$db->query("SELECT u.*,g.* FROM users u LEFT JOIN gangs g ON g.gangID=u.gang WHERE u.user_level != 2 || u.user_level !=0 $myf ORDER BY level DESC,userid ASC LIMIT 20"); 
```

你不能放两个 where 子句

仅供参考：[http ://dev.mysql.com/doc/refman/5.0/en//select.html](http://dev.mysql.com/doc/refman/5.0/en//select.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:17:50.627

反而

```
$q=$db->query("SELECT u.*,g.* FROM users u LEFT JOIN gangs g ON g.gangID=u.gang WHERE u.user_level != 2 || WHERE u.user_level !=0 $myf ORDER BY level DESC,userid ASC LIMIT 20"); 
```

你应该，（删除第二个位置）

```
$q=$db->query("SELECT u.*,g.* FROM users u LEFT JOIN gangs g ON g.gangID=u.gang WHERE u.user_level != 2 || u.user_level !=0 $myf ORDER BY level DESC,userid ASC LIMIT 20"); 
```

# max - SOQL - 每组单行

> ID：14099196
> 
> 赞同：2
> 
> 时间：2012-12-31T08:16:11.690
> 
> 标签：max, row, limit, soql

我有以下 SOQL 查询来显示我的页面块表中的 ABC 列表。

```
Public List<ABC__c> getABC(){
    List<ABC__c> ListABC = [Select WB1__c, WB2__c, WB3__c, Number, tentative__c, Actual__c, PrepTime__c, Forecast__c from ABC__c ORDER BY WB3__c];
    return ListABC;
} 
```

[![显示所有行](../Images/ffbb905c41d5ee37764313732f99ff17.png)](https://i.stack.imgur.com/U1PJ4.jpg)

如上图所示，WB3 有 A、B 和 C 的记录数。但我想根据 Actual__c 为每个 WB3 组仅显示 1 条记录。每个 WB3 组只能显示最新的 Actual__c。

即，理想情况下，在此示例中，我只想显示 3 行（A、B、C 各一行）。

为此，我使用了 GROUPBY 并使用 AggregateResults 显示结果。这是结果。

[![最大实际日期和最大暂定日期](../Images/116e5db5fa2d95bfd1b000355e4815f9.png)](https://i.stack.imgur.com/FqhaN.jpg)

如上所示，我得到了每个 WB3 的最新实际日期。但暂定日期不对应。暂定日期也是列表中的 MAX。

这是我使用的代码

```
public List<SiteMonitoringOverview> getSPM(){
        AggregateResult[] AgR = [Select WB_3__c, MAX(Tentaive_Date__c) dtTentativeDate , MAX(Actual_Date__c) LatestCDate FROM Site_progress_Monitoring__c GROUP BY WBS_3__c];

        if(AgR.size()>0){                    

            for(AggregateResult SalesList : AgR){                                                        
                CustSumList.add(new SiteMonitoringOverview(String.ValueOf(SalesList.ge​t('WB_3__c')), String.valueOf(SalesList.get('dtTentativeDate')), String.valueOF(SalesList.get('LatestCDate')) ));            
            }    
        }
        return CustSumList;
    } 
```

我被迫使用`MAX()`暂定日期。我想要MAX实际日期的相应暂定日期。不是最大暂定日期。

对于 A 组，暂定日期为`Max Actual Date is 12/09/2012`。但它正在显示`MAX tentative date: 27/02/2013`. 它应该显示`12/09/2012`. 这是因为我`MAX(Tentative_Date__c)`在我的代码中使用。SOQL 查询中的每一列都必须是`GROUPED`或`AGGREGATED`。这很奇怪。

在此示例中如何获得所需的 3 行？

有什么建议么？任何不同的方法（在组内循环）？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T20:34:18.470

我自己也遇到了这个问题。我想出的解决方案只有在您想要每个分组中最旧或最新的记录时才有效。不幸的是，它可能不适用于您的情况。我仍然会将其留在这里，以防它确实可以帮助某人寻找解决此问题的方法。

```
AggregateResult[] groupedResults = [Select Max(Id), WBS_3__c FROM Site_progress_Monitoring__c GROUP BY WBS_3__c]; 
```

在*Id*上调用**MAX**或**MIN**将使您获得每个组条件的 1 条记录。然后您可以查询其他信息。在我的情况下，我只需要每组中的 1 条记录，并不真正关心它是哪一条。

# android - 如何为所有屏幕尺寸设置背景图像？

> ID：14099197
> 
> 赞同：1
> 
> 时间：2012-12-31T08:16:11.733
> 
> 标签：android, android-layout

我要为相对布局背景设置图像。为了支持所有的屏幕尺寸（从小到大），它的分辨率应该设置多大/小？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:54:25.697

将背景图像放在所有可绘制文件夹中

```
xhdpi 960x720
hdpi 640x480
mdpi 470x320
ldpi 320x240 
```

# android - 如何设置 SearchView 的提示文本颜色？

> ID：14099198
> 
> 赞同：3
> 
> 时间：2012-12-31T08:16:14.130
> 
> 标签：android

SearchView 没有设置提示文本颜色的方法，我必须使用特定的提示文本颜色而不是默认颜色，我该如何实现？谢谢。

# facebook - Facebook 分享和推特

> ID：14099202
> 
> 赞同：0
> 
> 时间：2012-12-31T08:16:34.420
> 
> 标签：facebook, api, windows-phone-7, twitter, xna

我想在我基于 xna 的 wp7 游戏中加入 Facebook 分享和推文选项。我完全不确定从哪里开始。哪个 FB/Twitter API 或任何第三方？我在网上试过，找不到步骤。如果有一个链接/页面可以为我提供所有步骤，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:38:08.463

这些可能是一个选择..

*   [分享链接任务](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.sharelinktask%28v=vs.92%29.aspx)

*   [共享状态任务](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.sharestatustask%28v=vs.92%29.aspx)

# iphone - 保存数据后 UITableView 没有重新加载

> ID：14099203
> 
> 赞同：3
> 
> 时间：2012-12-31T08:16:34.547
> 
> 标签：iphone, objective-c, uitableview, ios6

以下是我在屏幕上看到的内容（我试图展示我在屏幕上看到的内容）

```
++++++++++++++++++++++++++++++++++
+                                +
+  TextField-Name                +
+                                +
+  Save Button                   +
+                                +
+  UITableView                   +
+  .                             +
+  .                             +
+  .                             +
+                                +
++++++++++++++++++++++++++++++++++ 
```

当我单击保存按钮时，数据将被存储，并且我在下面的表格视图中显示相同的内容。问题是当点击保存时，数据被保存，但它没有显示在`UITableView`. 我相信`[self.myTableView reloadData];`会做的伎俩，但它没有做。

下面是我的代码。

**.h 文件**

```
#import <UIKit/UIKit.h>

@interface DeviceDetailViewController : UIViewController<UITableViewDelegate, UITableViewDataSource>

@property (weak, nonatomic) IBOutlet UITextField *nameTextField;
@property (strong, nonatomic) IBOutlet UITableView *myTableView;

- (IBAction)save:(id)sender;

@end 
```

**.m 文件**

```
@interface DeviceDetailViewController ()
@end

@implementation DeviceDetailViewController
@synthesize myTableView;

- (IBAction)save:(id)sender {
    // code for saving data
    NSLog(@"saved data and now reload data.... started....");
    [self.myTableView reloadData];
    // I thought this statement will do magic... but its not....
    NSLog(@"saved data and now reload data.... finised....");
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger) tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    NSLog(@"numberOfRowsInSection %d", self.devices.count);
    return self.devices.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cel3";
    UITableViewCell *cell = [myTableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    // Configure the cell...
    NSManagedObject *device = [self.devices objectAtIndex:indexPath.row];
    NSLog(@"cellForRowAtIndexPath %@ %@ by %@", [device valueForKey:@"name"], [device valueForKey:@"version"], [device valueForKey:@"company"]);
    [cell.textLabel setText:[NSString stringWithFormat:@"%@ %@", [device valueForKey:@"name"], [device valueForKey:@"version"]]];
    [cell.detailTextLabel setText:[device valueForKey:@"company"]];

    return cell;
} 
```

当我运行应用程序时，下面是我得到的`NSLOG`

```
2012-12-31 11:52:34.222 MyStore[720:11603] numberOfRowsInSection 0
2012-12-31 11:52:34.627 MyStore[720:11603] numberOfRowsInSection 2
2012-12-31 11:52:34.628 MyStore[720:11603] cellForRowAtIndexPath iPhone 4s by Apple
2012-12-31 11:52:34.629 MyStore[720:11603] cellForRowAtIndexPath X10 Mini Pro by Sony 
```

当我添加一些东西时，我得到

```
2012-12-31 11:53:21.868 MyStore[720:11603] saved data and now reload data.... started....
2012-12-31 11:53:21.869 MyStore[720:11603] numberOfRowsInSection 2
2012-12-31 11:53:21.870 MyStore[720:11603] saved data and now reload data.... finised....
2012-12-31 11:53:21.871 MyStore[720:11603] cellForRowAtIndexPath iPhone 4s by Apple
2012-12-31 11:53:21.872 MyStore[720:11603] cellForRowAtIndexPath X10 Mini Pro by Sony 
```

这意味着所有方法都被调用，但我仍然没有获取数据。

有人可以指出我需要编写哪些额外的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:21:27.510

因为你的`table` `dataSource`数组是`self.devices`数组。

原因可能是`self.devices`数组`doesnot`获取`updated`时`saving data`

`update` `self.devices`那么首先`reload table`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:41:30.480

我认为您的方法有问题**`cellForRowAtIndexPath`**尝试使用以下代码行

**

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
} 
```

**

代替

```
static NSString *CellIdentifier = @"Cel3";
    UITableViewCell *cell = [myTableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath]; 
```

# r - 是否可以在 R 中获取 F# 的函数应用程序“|>”运算符？

> ID：14099218
> 
> 赞同：4
> 
> 时间：2012-12-31T08:17:45.917
> 
> 标签：r, f#, operator-overloading

> **可能重复：**
> [R流水线功能](https://stackoverflow.com/questions/13354048/r-pipelining-functions)

与 F# 相比，我发现 R 语法非常笨拙：

在 R - 而不是：

```
plot(exp(cumsum(returns))) 
```

我很想做

```
returns |> cumsum |> exp |> plot 
```

有没有办法在 R 中重载运算符以达到类似的效果？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-31T08:21:46.413

当然，为什么不呢，

```
`%|>%` = function(x, y) y(x)
1:10 %|>% cumsum %|>% plot 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T08:51:59.207

从`Reduce`帮助页面窃取：

```
Funcall <- function(f, ...) f(...)
Reduce(Funcall, list(plot, exp, cumsum), 1:10, right = TRUE) 
```

# android - 长按 listView 行中的特定项目时获取 ContextMenu

> ID：14099220
> 
> 赞同：0
> 
> 时间：2012-12-31T08:17:49.580
> 
> 标签：android, android-listview, android-contextmenu

我使用基本适配器来填充列表视图，该列表的每一行都有 3 `ImageView`。

我想`ContextMenu`在长按其中一个图像时显示一个并获取图像位置（不是通过单击列表行，而是单击图像本身），我试图`listview`在活动中膨胀该行并获取图像然后注册此图像用于`contextMenu([registerForContextMenu(imgLeft)])`但没有任何效果。

我想`onLongClickListener`在行中的每个图像上调用事件，但我遇到了一个问题，即如何在方法（）`contextMenu`中的`baseAdapter`（此处没有活动）中调用（show-open `getView`）...？或者我如何`contextMenu`在`baseAdapter`...中注册这些图像？

我在这里和谷歌搜索了很多解决方案，但一无所获。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:22:18.917

`ContextMenu`为每个 ImageView注册可能会起作用。像这样：

```
@Override
public View getView(int arg0, View arg1, ViewGroup arg2) {
    if (arg1 == null) {
        LayoutInflater vi = (LayoutInflater) cmx.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        arg1 = vi.inflate(R.layout.services_item, null);
    }
    ImageView serviceThumb = (ImageView) arg1.findViewById(R.id.thumbIView);

    registerForContextMenu(serviceThumb);

    serviceThumb.setOnCreateContextMenuListener(new OnCreateContextMenuListener() {

        @Override
        public void onCreateContextMenu(ContextMenu menu, View v,ContextMenuInfo menuInfo) {
            AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)menuInfo;
            menu.setHeaderTitle("Test");
            for (int i = 0; i< 5; i++) {
                menu.add(Menu.NONE, i, i, i + " - Test");
            }
    }
    });
} 
```

# memory-management - 调用堆栈管理依赖于机器？

> ID：14099222
> 
> 赞同：0
> 
> 时间：2012-12-31T08:18:00.617
> 
> 标签：memory-management, callstack

我想我了解堆栈内存的基本知识，但我仍然不完全了解负责管理堆栈方式的机制 - 是编译器，cpu架构？它依赖于编程语言吗？

例如，我读到 ARM 在函数调用中倾向于减少堆栈的使用，因此函数的参数通常通过 4 个寄存器传递。但是，在我看来，这也可以使用其他 cpu 中的通用寄存器来实现。架构如何强加这种需求？

在其他地方，我读到在 FORTRAN 77 中没有使用堆栈。

还有堆栈向上/向下增长的问题。谁负责？

总的来说，我想知道它是否依赖于 cpu 以及它是如何强加的？否则谁对这些决定负责？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:26:10.033

它不能由处理器强加。调用约定由编译器决定，大多数编译器不会仅仅为了这样做就破坏他们的语言标准。

只要进程使用`push`/之类的东西，堆栈的增长方向就由处理器确定`pop`。如果他们`esp`直接访问，他们应该跟随，但不要也有。

# html - HTML表格显示

> ID：14099223
> 
> 赞同：0
> 
> 时间：2012-12-31T08:18:05.503
> 
> 标签：html, firefox, html-table

这就是我想要的：</p>

```
+-----+-----+-----+-----+
|     |     |     |     |
|     |     |     |     |
+-----+-----+-----+-----+
|           |     |     |
|           |     |     |
+           +-----+-----+
|           |           |
|           |           |
+-----+-----+           +
|     |     |           |
|     |     |           |
+-----+-----+-----+-----+ 
```

所以我写了下面的代码来实现我的目标：

```
<table>
    <tbody>
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td colspan="2" rowspan="2"></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td colspan="2" rowspan="2"></td>
        </tr>
        <tr>
            <td></td>
            <td></td>
        </tr>
    </tbody>
</table> 
```

但它不起作用，它在 Firefox 中显示如下：

```
+-----+-----+-----+-----+
|     |     |     |     |
|     |     |     |     |
+-----+-----+-----+-----+
|           |     |     |
|           |     |     |
+-----+-----+-----+-----+
|     |     |           |
|     |     |           |
+-----+-----+-----+-----+ 
```

我找不到我的错，我该怎么办？任何帮助将不胜感激！</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:27:15.463

### 这不是火狐的`rowspan`问题。

默认情况下，由于行数相同，但合并不同，HTML 无法处理。一种技巧是，使用`<col>`，提供假列并隐藏。

```
<table width="100%" border="1">
    <colgroup>
        <col>
        <col>
        <col>
        <col>
        <col style="width: 1px;">
    </colgroup>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table>​ 
```

给出一个`colgroup`并隐藏最后一个`col`就可以了。

### 小提琴：http: [//jsfiddle.net/sK6GG/](http://jsfiddle.net/sK6GG/)

* * *

### 另一个完美的方法：

```
<table width="100%" border="1">
    <colgroup>
        <col>
        <col>
        <col>
        <col>
        <col style="width: 1px;">
    </colgroup>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="display: none;">&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="display: none;">&nbsp;</td>
    </tr>
    <tr>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td style="display: block; width: 0px; visibility: hidden; border: 0;">&nbsp;</td>
    </tr>
    <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td style="display: none;">&nbsp;</td>
    </tr>
</table>​ 
```

### 小提琴：http: [//jsfiddle.net/QvP77/](http://jsfiddle.net/QvP77/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:36:35.637

第三行没有任何最小高度要求。使用 CSS 规则添加这样的要求，例如

```
tr { height: 1.3em; } 
```

# jquery - 水平菜单与 css 或 jquery 对齐

> ID：14099224
> 
> 赞同：-1
> 
> 时间：2012-12-31T08:18:07.050
> 
> 标签：jquery, html, css, horizontallist

我正在研究一个水平菜单，它有一个子级别，也应该水平显示下面是水平菜单的代码，它是子菜单。我已经研究过了，但我没有遇到某些问题。我想将父菜单向左对齐，以便它几乎从 div 的注视位置开始`#nav-wrapper`。

其次，它在父菜单下方显示子菜单，我希望子菜单从 meus 的最左侧显示。

例如，在这种情况下，父菜单包装器 div`#nav-wrapper`的宽度为 1000px，当我将 1000px 用于类`#mainnav li ul`时，它会在主区域中显示菜单。如何对齐子菜单以从父菜单中第一个元素的起始位置开始

第三，我需要高度不同颜色的父菜单让我们在将鼠标悬停在父菜单上或父菜单处于活动状态时说红色。

![在此处输入图像描述](../Images/e1db13334b1eca677823d0a73ef80afd.png)

我试图让它工作，但到目前为止我没有得到想要的结果。

```
<html>
<head>
<title></title>
<style>
#nav-wrapper
{
position: relative;
background-color:white;
height:30px;
width:1000px;
background-color:#f5f5f5;
}
#nav-wrapper ul {
    color: #242320;
    list-style-type: none;
    font-size: .8em;
    line-height: 30px;
    font-weight: bold;
    font-family:Tahoma;
}
#mainnav li {
    float: left;
    position: relative;
}
#mainnav li a:link, #mainnav li a:visited {
    line-height: 30px;
    font-weight: bold;
    font-size: 1.2em;
    text-decoration: none;
    color: #242320;
    padding: 5px 0px;
    margin: 0px 0px 0px 0px;
}
#mainnav li a:active {
    line-height: 30px;
    font-weight: bold;
    font-size: 1.2em;
    text-decoration: none;
    color: #242320;
    background-color:red;
    padding: 5px 0px;
    margin: 0px 0px 0px 0px;
}
#mainnav li ul {
    left: 0px;
    min-height: 30px;
}
#mainnav li a:hover {
color: #3b541e;
border-bottom: solid 0px #3b541e;
}
#mainnav li ul {
  position: absolute;
  display: none;
  left: 0px;
  top: 30px;
  padding: 0px 0px 0px 5px;
  margin: 0px;
  background-color: gray;
  min-height: 30px;
  width: 1000px;
  float: left;
}

#mainnav li a:link, #mainnav li a:visited {
  line-height: 30px;
  font-weight: bold;
  font-size: 1.2em;
  text-decoration: none;
  color: #242320;
  padding: 1px 0px;
  margin: 0px 0px 0px 35px;
}

#mainnav ul li ul li a:link, #mainnav ul li ul li a:visited {
font-size: 1.2em;
color: #b1bba5;
margin: 0px 25px;
padding: 12px 0px 12px 0px;
line-height: 30px;
font-weight: bold;
}
</style>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
$('#nav-wrapper').on('hover', 'li', function () {
    $(this).closest('ul').find('li').removeClass('active');
    $(this).addClass('active');
    return false;
});

$('#nav-wrapper ul li').hover(function() {
    $('ul', this).show();
}, function() {
    $('#nav-wrapper ul', this).hide();
});
    });

</script>
</head>
<body>
    <div id="nav-wrapper">
        <ul id="mainnav">
        <li><a href="#">Home</a></li>
        <li><a href="#About</a></li>
        <li><a  href="#">Services</a>
            <ul>
              <li><a  href="#">Graphic Design</a></li>
               <li><a  href="#">Web Design</a></li>
              <li><a  href="#">Multimedia</a></li>
              <li><a  href="#">Exhibitions</a></li>
               <li><a  href="#">Trade Marketing</a></li>
            </ul>
        </li>
        <li><a  href="#">Work</a></li>
        <li><a  href="#">Clients</a></li>
        <li><a  href="#">Blog</a></li>
        <li><a  href="#">Contact</a></li>
        </ul>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:45:45.907

这就是你所拥有的。

[http://jsfiddle.net/ZvW9T/1/](http://jsfiddle.net/ZvW9T/1/)

下次自己做个jsFiddle，会更容易回答你。

请注意，您在未关闭的锚点中有一个错误：`<li><a href="#About</a></li>`应该是`<li><a href="#About"></a></li>`.

我无法回答您的第一个问题，我已经在左侧看到了父菜单。

对于您的第二个问题，只需`position: relative`从`#mainnav li`规则中删除：

```
#mainnav li {
    float: left;
    /* position: relative; */
} 
```

（见演示：http: [//jsfiddle.net/ZvW9T/2/](http://jsfiddle.net/ZvW9T/2/)）

对于第三个问题，您已经在使用 jQuery，那么您可以使用 javascript 轻松实现，如果这是您想要的方式。

但是混合 css 和 javascript 来生成 css 会在您的代码中产生一些混乱，您可能想重新考虑纯 CSS 中的页面，遵循网络上的几个演练之一，只需[google CSS Drop Down Menu](https://www.google.com/search?hl=it&tbo=d&q=CSS+Drop+Down+Menu&oq=CSS+Drop+Down+Menu)。

请注意，通常，子菜单是垂直的，而不是水平的（有时它们是混合的，就像两列垂直值），并且它们几乎总是从父菜单选项卡开始，而不是从页面的开头......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:10:21.080

你能试试这个

[http://jsfiddle.net/ZXVLb/](http://jsfiddle.net/ZXVLb/)

```
#mainnav li a:link, #mainnav li a:visited margin:0 35px 0 0;

#mainnav li ul left position

#nav-wrapper margin:0 0 0 35px; 
```

# android - 在通话期间播放存储在手机内存中的音频剪辑

> ID：14099229
> 
> 赞同：0
> 
> 时间：2012-12-31T08:18:42.650
> 
> 标签：android, android-emulator, android-widget, broadcastreceiver, android-music-player

如何在电话通话期间播放存储在**电话内存**中的音频剪辑，并且呼叫接收者应该听到相同的音频剪辑...

我正在使用简单的代码：

```
 public void onCallStateChanged(int state, String incomingNumber) {
    String stateString = "N/A";
    switch (state) {
    case TelephonyManager.CALL_STATE_IDLE:
      stateString = "Idle";
      break;
    case TelephonyManager.CALL_STATE_OFFHOOK:
      stateString = "Off Hook";
      break;
    case TelephonyManager.CALL_STATE_RINGING:
      stateString = "Ringing";
      break;

  } 
```

真的，我不知道如何编写代码来自动**播放音频文件**，而接收器只会为特定号码接听我的电话.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:19:52.023

Android 中没有用于通过语音呼叫上行链路播放音频的 API。那里可能有支持它的手机（我没有测试过每一部 Android 手机），但总的来说它不会工作。
最好的办法是将音乐传送到扬声器，将媒体音量设置为最大，并希望它被麦克风拾取。不过这听起来很糟糕，所以我不建议这样做。

# ruby-on-rails - `require': 运行 Sinatra 应用程序 (resque-web) 时没有要加载的文件 -- sinatra/base (LoadError)

> ID：14099238
> 
> 赞同：0
> 
> 时间：2012-12-31T08:19:40.933
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, sinatra, resque

我正在运行 Resque 的 PHP 版本，并且想使用 Resque 的 Ruby 版本附带的 Sinatra 前端应用程序。(https://github.com/defunkt/resque-web)

**问题：**在我的 Ubuntu 机器上，我安装了 Ruby、Gems 和 Sinatra。当我尝试启动时`server.rb`，出现如下所示的错误。

几乎没有 Ruby 的经验，任何让这个应用程序工作的帮助都会很棒:)

**错误**

```
server.rb:1:in `require': no such file to load -- sinatra/base (LoadError)
    from server.rb:1 
```

**我做了什么**

```
git clone https://github.com/defunkt/resque-web.git
sudo apt-get install ruby-full build-essential
sudo apt-get install rubygems
gem install sinatra
cd resque-web
ruby server.rb 
```

**红宝石**

```
ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

* * *

## 尝试 2

应该是越来越差了...

**添加到 server.rb 的顶部**

```
require 'rubygems' 
```

**错误**

```
/usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- resque (LoadError) 
```

* * *

## 尝试 3

```
gem install resque
ruby server.rb 
```

**错误**

```
[WARNING] MultiJson is using the default adapter (ok_json). We recommend loading a different JSON library to improve performance.
/var/lib/gems/1.8/gems/resque-1.23.0/lib/resque/helpers.rb:6: Please install the yajl-ruby or json gem (RuntimeError)
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:36:in `require'
        from /var/lib/gems/1.8/gems/resque-1.23.0/lib/resque.rb:10
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:59:in `gem_original_require'
        from /usr/lib/ruby/vendor_ruby/1.8/rubygems/custom_require.rb:59:in `require'
        from server.rb:4 
```

**做过：**

```
gem install json gem
ruby server.rb 
```

**错误**

```
:public is no longer used to avoid overloading Module#public, use :public_folder instead from server.rb:13 
```

* * *

## 尝试 4

改变了

```
 set :public, "#{dir}/server/public" 
```

到

```
 set :public_folder, "#{dir}/server/public" 
```

现在当我`ruby server.rb`，什么都没有发生，我拿回了外壳......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:22:21.130

使用 gems 安装 Resque，`gem install resque`然后从命令行运行 resque-web。参考：github.com/defunkt/resque

# c# - 通过 C# 中的 comport 将位图图像打印到 pos 打印机

> ID：14099239
> 
> 赞同：10
> 
> 时间：2012-12-31T08:19:41.870
> 
> 标签：c#

我通过以下方式通过串口直接将收据打印到POS打印机，

```
 SerialPort port = new SerialPort("com6", 9100, Parity.None, 8, StopBits.One);
        port.Open();
        port.Write("Some Text");
        port.Close(); 
```

我的问题是如何使用上述方法打印位图图像？任何帮助将不胜感激。

我还没有决定使用 Microsoft POS for.net，因为它很慢并且需要时间来初始化打印机，客户不喜欢等待。

谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-31T09:17:42.190

这应该会从位图中为您提供一个字符串，您可以将其发送到打印机：

```
 public string GetLogo()
    {
        string logo = "";
        if (!File.Exists(@"C:\bitmap.bmp"))
            return null;
         BitmapData data = GetBitmapData(@"C:\bitmap.bmp");
         BitArray dots = data.Dots;
         byte[] width = BitConverter.GetBytes(data.Width);

         int offset = 0;
         MemoryStream stream = new MemoryStream();
         BinaryWriter bw = new BinaryWriter(stream);

         bw.Write((char)0x1B);
         bw.Write('@');

         bw.Write((char)0x1B);
         bw.Write('3');
         bw.Write((byte)24);

         while (offset < data.Height)
         {
             bw.Write((char)0x1B);
             bw.Write('*');         // bit-image mode
             bw.Write((byte)33);    // 24-dot double-density
             bw.Write(width[0]);  // width low byte
             bw.Write(width[1]);  // width high byte

             for (int x = 0; x < data.Width; ++x)
             {
                 for (int k = 0; k < 3; ++k)
                 {
                     byte slice = 0;
                     for (int b = 0; b < 8; ++b)
                     {
                         int y = (((offset / 8) + k) * 8) + b;
                         // Calculate the location of the pixel we want in the bit array.
                         // It'll be at (y * width) + x.
                         int i = (y * data.Width) + x;

                         // If the image is shorter than 24 dots, pad with zero.
                         bool v = false;
                         if (i < dots.Length)
                         {
                             v = dots[i];
                         }
                         slice |= (byte)((v ? 1 : 0) << (7 - b));
                     }

                     bw.Write(slice);
                 }
             }
             offset += 24;
             bw.Write((char)0x0A);
         }
         // Restore the line spacing to the default of 30 dots.
         bw.Write((char)0x1B);
         bw.Write('3');
         bw.Write((byte)30);

         bw.Flush();
         byte[] bytes = stream.ToArray();
         return logo + Encoding.Default.GetString(bytes);
    }

    public BitmapData GetBitmapData(string bmpFileName)
    {
        using (var bitmap = (Bitmap)Bitmap.FromFile(bmpFileName))
        {
            var threshold = 127;
            var index = 0;
            double multiplier = 570; // this depends on your printer model. for Beiyang you should use 1000
            double scale = (double)(multiplier/(double)bitmap.Width);
            int xheight = (int)(bitmap.Height * scale);
            int xwidth = (int)(bitmap.Width * scale);
            var dimensions = xwidth * xheight;
            var dots = new BitArray(dimensions);

            for (var y = 0; y < xheight; y++)
            {
                for (var x = 0; x < xwidth; x++)
                {
                    var _x = (int)(x / scale);
                    var _y = (int)(y / scale);
                    var color = bitmap.GetPixel(_x, _y);
                    var luminance = (int)(color.R * 0.3 + color.G * 0.59 + color.B * 0.11);
                    dots[index] = (luminance < threshold);
                    index++;
                }
            }

            return new BitmapData()
            {
                Dots = dots,
                Height = (int)(bitmap.Height*scale),
                Width = (int)(bitmap.Width*scale)
            };
        }
    }

    public class BitmapData
    {
        public BitArray Dots
        {
            get;
            set;
        }

        public int Height
        {
            get;
            set;
        }

        public int Width
        {
            get;
            set;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T11:47:53.393

此时可能没有用，但我认为要直接打印到打印机，您必须找到编程手册并发送命令转义。

这种打印机有自己的一套命令等等，可以格式化、旋转文本、打印条码、上传和打印图像等等。

除非您不了解语言并正确使用它，否则打​​印机的行为可能无法预测

* * *

## 回答 #3

> 赞同：-9
> 
> 时间：2012-12-31T10:59:00.587

我找到了另一种方式，Guyz 请传播这个词！

第1步 ：

下载 NV 图像软件 (nv_image_tool_v3.1.6) 并将图像设置为打印机 VIA Comport 执行图像中的这些步骤 ![在此处输入图像描述](../Images/65fe767947d87ec1b1ec293a3cc6e49f.png)

第 2 步：您喜欢的按钮的代码：

```
 private void button1_Click(object sender, EventArgs e)
{
 SerialPort port = new SerialPort("com6", 9100, Parity.None, 8, StopBits.One);
 port.Open();
 ASCIIEncoding ascii = new ASCIIEncoding();
 port.Write(ascii.GetString(new byte[] { 28, 112, 1, 0})); //Printing the Above uploaded Logo
 port.WriteLine("Your Text");
 port.Close();
} 
```

# jquery - 如何使用 jEditable 保存在数据表中所做的更改

> ID：14099245
> 
> 赞同：-1
> 
> 时间：2012-12-31T08:20:18.553
> 
> 标签：jquery, datatables

我是数据表的新手。我正在使用 jEditable 使数据表可编辑。在示例中，我注意到如果用户编辑单元格并按回车键，则更改将被保存。但在我的应用程序中，我希望用户首先进行所有更改，然后需要按保存按钮。只有在按下保存按钮后，更改才应保存在后端。我怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:23:55.003

*Jeditable - 用于 jQuery 的就地编辑插件*- 我认为这意味着它将即时保存任何更改。如果您想要单独的保存操作，请不要使用 Jeditable。

# c# - System.Drawing - 参数无效

> ID：14099246
> 
> 赞同：6
> 
> 时间：2012-12-31T08:20:23.780
> 
> 标签：c#, .net-4.0, bitmap, system.drawing

**经过更多测试后，我发现此问题可能是由于图像未及时加载以被克隆为位图并显示。这可能吗？**

注意：是的，标题中还有其他与此错误有关的问题，但从一些研究来看，这似乎是一个含糊不清的错误，有许多可能的原因。我没有发现任何与我的情况相同的问题。

我收到以下错误。

```
System.ArgumentException was unhandled
HResult=-2147024809
Message=Parameter is not valid.
Source=System.Drawing 
```

它源于此代码。似乎是随机的（即，有时它可以工作，有时它不会。它连续运行的次数越多而不重新启动VS并重建项目，它就越有可能失败）：

```
private Bitmap GetSprite(bool anim, int tsIndex, int tileIdx) {
    System.Drawing.Rectangle cloneRect;
    string prefix = (anim) ? "A" : "S";
    using (Bitmap b = new Bitmap(prefix + tsIndex.ToString() + ".png")) {
        if (anim) {
            cloneRect = new System.Drawing.Rectangle(BaseObjects.A_AnimSpriteSets[tsIndex].StaticRecs[tileIdx].X, BaseObjects.A_AnimSpriteSets[tsIndex].StaticRecs[tileIdx].Y, BaseObjects.A_AnimSpriteSets[tsIndex].RecWidth, BaseObjects.A_AnimSpriteSets[tsIndex].RecHeight);
        } else {
            cloneRect = new System.Drawing.Rectangle(BaseObjects.A_StaticSpriteSets[tsIndex].StaticRecs[tileIdx].X, BaseObjects.A_StaticSpriteSets[tsIndex].StaticRecs[tileIdx].Y, BaseObjects.A_StaticSpriteSets[tsIndex].RecWidth, BaseObjects.A_StaticSpriteSets[tsIndex].RecHeight);
        }
        return b.Clone(cloneRect, b.PixelFormat);
    }
} 
```

具体来说，第四行：

```
using (Bitmap b = new Bitmap(prefix + tsIndex.ToString() + ".png")) 
```

代码的简化目标是根据 spriteset 索引和 sprite 索引返回包含 spriteset 中的 sprite 的位图。此位图显示在 PictureBox 中，直到它更改为不同的图像。我知道逻辑有效。这不是这里的问题。我用来测试的 .png 是 384*256。

所有参数设置正确，所有引用文件都在那里，一切似乎都井井有条。最奇怪的是，有时它有效，有时则无效。这让我相信它`System.Drawing`本身可能是内存泄漏，但我似乎无法找到它。

编辑：更新了代码并添加了 StackTrace。尽管在不再使用位图时处理了位图，但仍然存在相同的问题（请参见下面的代码以了解如何处理位图）。

```
if (Sprite.Image != null) { Sprite.Image.Dispose(); }
    Sprite.Image = GetSprite(true, tsIdx, tileIdx); 
```

**堆栈跟踪：**

```
System.ArgumentException was unhandled
  HResult=-2147024809
  Message=Parameter is not valid.
  Source=System.Drawing
  StackTrace:
       at System.Drawing.Bitmap..ctor(String filename)
       at CreationTool.Main.GetSprite(Boolean anim, Int32 tsIndex, Int32 tileIdx) in F:\~\~\CreationTool\Main.cs:line 420
       at CreationTool.Main.Input_EnemySprite_SelectedIndexChanged(Object sender, EventArgs e) in F:\~\~\CreationTool\Main.cs:line 107
       at System.Windows.Forms.ComboBox.OnSelectedIndexChanged(EventArgs e)
       at System.Windows.Forms.ComboBox.set_SelectedIndex(Int32 value)
       at CreationTool.States.State_Enemy.populateForm() in F:\~\~\CreationTool\States\State_Enemy.cs:line 28
       at CreationTool.States.State_Enemy.Load(String name) in F:\~\~\CreationTool\States\State_Enemy.cs:line 22
       at CreationTool.Main.btnLoad_Click(Object sender, EventArgs e) in F:\~\~\CreationTool\Main.cs:line 174
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnMouseUp(MouseEventArgs mevent)
       at System.Windows.Forms.Control.WmMouseUp(Message& m, MouseButtons button, Int32 clicks)
       at System.Windows.Forms.Control.WndProc(Message& m)
       at System.Windows.Forms.ButtonBase.WndProc(Message& m)
       at System.Windows.Forms.Button.WndProc(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
       at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
       at System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
       at System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
       at System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
       at System.Windows.Forms.Application.Run(Form mainForm)
       at CreationTool.Program.Main() in F:\~\~\CreationTool\Program.cs:line 15
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T08:29:22.990

哇，这段代码像地狱一样泄漏句柄。您需要处理所有实现`IDisposable`的类型，这在 System.Drawing 程序集（GDI+）中有很多类型：

```
private Bitmap GetSprite(bool anim, int tsIndex, int tileIdx)
{
    Rectangle cloneRect;
    string prefix = (anim) ? "A" : "S";
    using (Bitmap b = new Bitmap(prefix + tsIndex.ToString() + ".png"))
    {
        if (anim)
        {
            cloneRect = new Rectangle(BaseObjects.A_AnimSpriteSets[tsIndex].StaticRecs[tileIdx].X, BaseObjects.A_AnimSpriteSets[tsIndex].StaticRecs[tileIdx].Y, BaseObjects.A_AnimSpriteSets[tsIndex].RecWidth, BaseObjects.A_AnimSpriteSets[tsIndex].RecHeight);
        }
        else
        {
            cloneRect = new Rectangle(BaseObjects.A_StaticSpriteSets[tsIndex].StaticRecs[tileIdx].X, BaseObjects.A_StaticSpriteSets[tsIndex].StaticRecs[tileIdx].Y, BaseObjects.A_StaticSpriteSets[tsIndex].RecWidth, BaseObjects.A_StaticSpriteSets[tsIndex].RecHeight);
        }

        return b.Clone(cloneRect, b.PixelFormat);
    }
} 
```

还要确保您还通过将调用者包装在`using`语句中来处理此函数返回的位图：

```
using (Bitmap b = GetSprite(true, 0, 5))
{
    // do whatever you needed to do with the bitmap here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T10:07:57.770

泄漏的句柄最终会导致内存问题，但在这种情况下它们不是问题（感谢那些指出它们的人，学到了新东西）。

问题是，由于我将实际图像加载到内存中的方式，在我的大多数测试中，图像没有得到足够的时间来完全加载。成功的是那些允许足够时间加载图像的那些。

我通过一个简单的 try/catch 解决了这个问题。

```
private Bitmap GetSprite(bool anim, int tsIndex, int tileIdx) {
    string prefix;
    System.Drawing.Rectangle cloneRect;
    SpriteSet set;
    if (anim) {
        prefix = "A";
        set = BaseObjects.A_AnimSpriteSets[tsIndex];
    } else {
        prefix = "S";
        set = BaseObjects.A_StaticSpriteSets[tsIndex];
    }
    cloneRect = new System.Drawing.Rectangle(set.StaticRecs[tileIdx].X, set.StaticRecs[tileIdx].Y, set.RecWidth, set.RecHeight);
    try {
        using (Bitmap b = new Bitmap(prefix + tsIndex.ToString() + ".png")) {
            return b.Clone(cloneRect, b.PixelFormat);
        }
    } catch (Exception ex) {
        MessageBox.Show("Error: " + ex.Message + "\n\nCause: " + "SpriteSet not yet loaded.");
        return null;
    }
} 
```

这就是我对这个特定程序所需要的。

另外，pstrjds，感谢您的清理；）在某些重构过程中一定会出现这种混乱。我想我只是忘了它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-20T11:14:49.350

我也发现这试图寻找答案。请注意，它也可能在以下情况下引发异常：

流包含单个尺寸大于 65,535 像素的 PNG 图像文件。

[http://msdn.microsoft.com/en-us/library/z7ha67kw.aspx](http://msdn.microsoft.com/en-us/library/z7ha67kw.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-20T06:42:18.323

对我来说，这是由于引用了相对路径，例如`@"Resources\ImageName.png"`. 在**调试**模式下，我加载图像没有问题，但正如 OP 所建议的，这实际上可能是资源加载时间问题。我正确地`using`处理了我的对象，但这实际上与问题无关。一旦它在**Release**内部运行，错误“参数无效”就会再次抬起丑陋的头。

我怀疑编译器优化是这样的，在调试模式下，图像流确实能够及时扩展以供构造函数解析，但是在发布构建下，路径仍然需要在 cctor 准备好解析时进行扩展路径，从而导致路径无效错误。只需将路径从相对路径更改为固定路径或预扩展路径即可解决问题。

# opencv - opencv 和 libvlc 不能在发布模式下一起工作

> ID：14099247
> 
> 赞同：0
> 
> 时间：2012-12-31T08:20:32.337
> 
> 标签：opencv, release, libvlc

我正在尝试使用从网络流中读取帧`libvlc`，然后使用`opencv`. 这是我用来检索帧的代码：

```
struct ctx
{
    IplImage* image;
    HANDLE mutex;
    uchar*    pixels;
};

void *lock(void *data, void**p_pixels)
{
    struct ctx *ctx = (struct ctx*)data;
    WaitForSingleObject(ctx->mutex, INFINITE);
    *p_pixels = ctx->pixels; 
    return NULL;

}
void display(void *data, void *id)
{
    (void) data;
    assert(id == NULL);
}
void unlock(void *data, void *id, void *const *p_pixels){
    struct ctx *ctx = (struct ctx*)data;
    // VLC just rendered the video, but we can also render stuff 
    uchar *pixels = (uchar*)*p_pixels;
    cvShowImage("image", ctx->image);
    ReleaseMutex(ctx->mutex);
    assert(id == NULL); // picture identifier, not needed here 
}

int main()
{
    cvNamedWindow("image", CV_WINDOW_AUTOSIZE);
    libvlc_media_t* media = NULL;
    libvlc_media_player_t* mediaPlayer = NULL;
    //char const* vlc_argv[] = {"--plugin-path", "C:\\Users\\Oscar\\Documents\\libvlc\\vlc-1.1.4"};
    libvlc_instance_t* instance = libvlc_new(0,NULL);
    mediaPlayer = libvlc_media_player_new(instance);
    media = libvlc_media_new_location(instance, "rtsp://134.202.84.79:554/user=a&password=abcdef&channel=6&stream=0.sdp/");

    struct ctx* context = ( struct ctx* )malloc( sizeof( *context ) );
    context->mutex = CreateMutex(NULL, FALSE,NULL);
    //context->image = cvCreateImage(cvSize(libvlc_video_get_height(mediaPlayer), libvlc_video_get_width(mediaPlayer)), IPL_DEPTH_8U, 4);

    context->image = cvCreateImage(cvSize(640,480), IPL_DEPTH_8U, 4);
    context->pixels = (unsigned char *)context->image->imageData;

    libvlc_media_player_set_media( mediaPlayer, media);
    libvlc_video_set_callbacks(mediaPlayer, lock, unlock, display, context);
    libvlc_video_set_format(mediaPlayer, "RV32", 640, 480, 640*4);
    libvlc_media_player_play(mediaPlayer);

    while(true)
    {
        if (waitKey(30)==27)
        {
            break;
        }
    }
    return 0;
} 
```

问题是这在调试模式下工作正常，但是当我切换到发布模式时，它说：

> 无法在动态链接库 libvlc.dll 中找到过程入口点 cvCreateImage。

我也尝试更改链接器优化标志，但问题仍然存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T04:51:14.997

我刚刚遇到了类似的过剩问题（我的应用程序试图在 libVLC.dll 中找到一个过剩过程）。

虽然我不知道是什么导致了这个问题，但我能够通过以下方式解决它：

我没有使用 VLC 附带的 .lib 文件，而是按照[这些步骤来了解如何从 dll 文件生成 lib](http://wiki.videolan.org/GenerateLibFromDll)。

使用这个库为我解决了这个问题，即使我不知道它为什么会首先发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-01T11:41:39.400

我似乎已经修复了它。在另一篇关于 VS 2008 编译问题的文章中（在调试中一切正常。在发布模式下切换并构建所有内容，它就在线崩溃了）。我注意到他们一直在从to调整`/OPT`链接器标志，这似乎解决了他们遇到的另一个问题。`/OPT:REF``/OPT:NOREF`

1.  打开项目的属性页对话框。有关详细信息，请参阅设置 > Visual C++ 项目属性。
2.  选择链接器文件夹。
3.  选择命令行属性页。
4.  **在附加选项中输入选项：`/OPT:NOREF`**

微软文档：

> 参考 | NOREF /OPT:REF 消除从未引用的函数和/或数据，而 > /OPT:NOREF 保留从未引用的函数和/或数据。

`LINK`默认情况下删除未引用的打包函数。如果对象已使用该`/Gy`选项编译，则它包含打包函数 (COMDAT)。这种优化称为传递 COMDAT 消除。要覆盖此默认值并在程序中保留未引用的 COMDAT，请指定`/OPT:NOREF`. 您可以使用该`/INCLUDE`选项覆盖特定符号的删除。

# python - EmbeddedDocument 中的 ReferenceField 到主文档

> ID：14099249
> 
> 赞同：1
> 
> 时间：2012-12-31T08:20:50.193
> 
> 标签：python, mongoengine

我有`Document`这样`EmbeddedDocument`的`mongoengine`。怎么可以为大师创作`ReferenceField`...`EmbeddedDocument`大师的`Document`意思`Document`是嵌入我的`EmbeddedDocument`

```
class Activity(EmbeddedDocument):
    user = ReferenceField(Profile)
    followed_user = ReferenceField(Profile)
    created_date = DateTimeField(default=datetime.datetime.now, required=True)

class Profile(Document):
    username = StringField(max_length=255, required=True)
    password = StringField(max_length=255, required=True)
    email = StringField(max_length=255, required=True)
    activities = ListField(EmbeddedDocumentField(Activity)) 
```

蟒蛇说：

```
 NameError: name 'Profile' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:46:57.940

也必须`self`在 EmbeddedDocuments 中使用

```
class Activity(EmbeddedDocument):
    user = ReferenceField('Profile')
    user_unrelated = ReferenceField('Profile')
    created_date = DateTimeField(default=datetime.datetime.now, required=True) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:38:22.690

**EmbeddedDocuments应通过****EmbeddedDocumentField**字段类型用作 Documents 上的字段。

因此，您的 Profile 类应该像

```
class Profile(Document):
    username = StringField(max_length=255, required=True)
    password = StringField(max_length=255, required=True)
    email = StringField(max_length=255, required=True)
    activities = ListField(EmbeddedDocumentField(Activity)) 
```

注意：我正在创建一个列表，因为每个配置文件会有多个活动

# android - 以 Intent.ACTION_SEND 发送到邮件后删除文件

> ID：14099252
> 
> 赞同：2
> 
> 时间：2012-12-31T08:20:58.750
> 
> 标签：android, file, android-intent

我有以下代码：

```
Uri screenshotUri = Uri.fromFile(file);
        Intent intent = new Intent(Intent.ACTION_SEND);
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.putExtra(Intent.EXTRA_STREAM, screenshotUri);
        intent.putExtra(Intent.EXTRA_SUBJECT, "Location of " + name);
        intent.putExtra(Intent.EXTRA_TITLE, getText(R.string.screen_share_message));
        intent.putExtra(Intent.EXTRA_TEXT, getText(R.string.screen_share_message));
        intent.setType("image/*");
        startActivity(Intent.createChooser(intent, "Share with")); 
```

用户发送或分享文件后，如何删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:49:27.793

首先参考@Dheeraj VS 答案。

删除文件的方法

1.  您可以使用在后台运行的服务删除这些文件。服务检查文件夹是否包含任何文件，然后在服务中写入逻辑，以便删除文件。

2.  您可以在启动应用程序时删除这些文件。表示特定文件夹中是否存在任何文件，因此在开始欢迎活动时，您可以使用逻辑删除文件。

//删除隐藏文件

```
try {
      new Helper().deleteFromExternalStorage(".photo.jpg");
}
catch(Exception e){
      Log.v("APP","Exception while deleting file");
} 
```

从外部存储中删除文件的方法

```
public void deleteFromExternalStorage(String fileName) {
  String fullPath = Environment.getExternalStorageDirectory().getAbsolutePath() + "/directoryname";
  try
  {
    File file = new File(fullPath, fileName);
    if(file.exists())
        file.delete();
  }
  catch (Exception e)
  {
    Log.e("APP", "Exception while deleting file " + e.getMessage());
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:41:15.373

如果您的问题是您如何知道*何时*删除文件，那么答案是您不知道。

我使用的方法是将文件保存在应用程序的缓存目录（[内部](http://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)或[外部](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir%28%29)）中。因此，当设备存储空间不足时，它会被 Android 自动删除。但是，作为一种好的做法，我首先删除缓存中的所有现有文件，然后再共享新文件。

要实际删除文件，请参阅@Sahil 的回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-12T08:36:01.380

当您根据活动生命周期打开电子邮箱时，当您返回活动时，您当前的活动会继续 onPause()，然后 On Resume 方法将调用因此在您的 on Resume 方法上编写打击代码。这个技巧解决了我的问题。

```
protected void onResume() {
    // TODO Auto-generated method stub
    File file= new File(android.os.Environment.getExternalStorageDirectory().toString()+ "/akanksha" + ".png");
    if(file.exists())
    {
         file.delete();
    }
    super.onResume();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T08:35:15.137

您可以使用以下代码从外部存储中删除文件，在 Intent 之后，

```
File file = new File(selectedFilePath);
boolean deleted = file.delete(); 
```

其中 selectedFilePath 是您要删除的文件的路径 - 例如：

> /sdcard/YourCustomDirectory/ExampleFile.mp3

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-26T17:07:54.047

另一个可能的答案是在您的应用程序恢复时创建一个新线程，立即标记当前时间，让线程休眠多久您认为发送文件是合理的，并且当线程恢复时，仅删除之前创建的文件之前标记的时间。这将使您能够只删除在您的应用程序恢复时存储位置中的内容，但也可以让 gmail 有时间将电子邮件发送出去。最后，它解决了您通过电子邮件发送一组文件，然后通过电子邮件发送第二组文件的情况，但是当您清理第一组文件时，您会在第二组文件被发送之前删除它，这可以保证您只删除您放置的文件在发送电子邮件时在目录中。代码片段：（我使用的是 C#/Xamarin，但你应该明白）

```
public static void ClearTempFiles()
{
    Task.Run(() =>
    {

    try
    {
        DateTime threadStartTime = DateTime.UtcNow;
        await Task.Delay(TimeSpan.FromMinutes(DeletionDelayMinutes));
        DirectoryInfo tempFileDir = new DirectoryInfo(TempFilePath);
        FileInfo[] tempFiles = tempFileDir.GetFiles();
        foreach (FileInfo tempFile in tempFiles)
        {
            if (tempFile.CreationTimeUtc < threadStartTime)
            {
                File.Delete(tempFile.FullName);
            }
        }
    }
    catch { }
}); 
```

@Martijn Pieters 这个答案是一个不同的解决方案，可以处理多个问题。如果有的话，我发布的其他问题应该被标记为重复，因为它们是同一个问题。我在他们每个人上都张贴了以确保遇到此问题的任何人都可以找到解决方案。

# android - Unity3d 中的地图集成

> ID：14099253
> 
> 赞同：0
> 
> 时间：2012-12-31T08:21:15.543
> 
> 标签：android, ios, google-maps, maps, unity3d

我将统一制作 Geocaching 应用程序。如您所知，此类应用程序对地图的使用非常详细。那么我可以使用unity3d来制作这个应用程序而不使用外部插件是可能的吗？我想为 iPhone 和 Android 制作这个应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T00:33:05.290

可以在 Unity 3D 中使用 Open Street Map 的图块。

这个项目有一段时间没有更新，但它应该是一个很好的起点： [https ://bitbucket.org/darktable/unity3d-open-street-map](https://bitbucket.org/darktable/unity3d-open-street-map)

# cuda - 为什么 cudaStreamCreate 会出现分段错误

> ID：14099257
> 
> 赞同：1
> 
> 时间：2012-12-31T08:21:28.280
> 
> 标签：cuda, segmentation-fault

我的服务器中有四个 Tesla C2075，所以我只是测试了 SDK 附带的示例 simpleMultiGPU。没想到我遇到了分段错误。使用 cuda-gdb 我发现第二次调用 cudaStreamCreate 时发生了此错误。这是 deviceQuery 输出：

```
$ deviceQuery

CUDA Driver = CUDART,

CUDA Driver Version = 4.2, 

CUDA Runtime Version = 4.2, 

NumDevs = 4, 

Device = Tesla C2075,

Device = Tesla C2075 
```

驱动版本没问题，为什么第二个cudaStreamCreate不起作用。有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T21:38:52.070

我将从运行 nvidia-healthmon 开始，它可以从[https://developer.nvidia.com/tesla-deployment-kit](https://developer.nvidia.com/tesla-deployment-kit)下载（它是 TDK 的一部分）。

的输出`nvidia-bug-report.sh`也总是非常有帮助。`nvidia-healthmon`同样从（`--log-file`标志）登录可能会给我们一些线索。

是否有其他应用程序失败？通过运行 SDK 中的其他应用程序（例如`vectorAdd`或`matrixMul`.

# c# - Mono Linux 上的 Latin-1 非 ASCII 符号不显示

> ID：14099258
> 
> 赞同：3
> 
> 时间：2012-12-31T08:21:32.690
> 
> 标签：c#, linux, encoding, fonts, mono

我们的winforms软件广泛使用°-度符号。在 ISO/IEC 8859-1（也称为 Latin-1）中是 ° 或 °。

.NET Windows 上的符号对于相当数量的字体没有问题（我们在应用程序中使用大约 5 种字体）。在 Linux 上使用 ° 一般没有问题。我可以在 Gtk 应用程序中看到它，甚至可以输入°，例如，如果键入 ctrl+shift+ub-0 在控制台中，但在我们的 Mono 应用程序中却没有。

当我们在 Linux (Ubuntu 12.10) 上的 Mono 下运行该软件时，不会显示度数符号（而是呈现黑色问题字符）。

有什么方法可以配置单声道或我们的软件（选择字体？）以显示符号？

PS 该软件是用于精密角度测量的设备。软件的度数符号就像银行的美元符号。

**更新**（对于评论者）。我们理论上可以用图片替换每个°。这是可能的，就像火星上的人一样是可能的。但在我们开始这项繁琐的工作之前，我的想法是询问 stackoverflow，因为也许我们可以在 Mono 中调整一些东西（像往常一样使用 mono）。那有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T16:38:06.247

我在 Ubuntu 12.10 上使用 Mono 2.10.8.1 编译了一个应用程序，并且度数符号在控件中显示得`PropertyGrid`很好`Label`。默认字体似乎是 DejaVu Sans，因此您可能需要考虑使用它。

# jquery-ui-datepicker - ng-repeat 中的 Angular UI 日期选择器仅适用于第一个块

> ID：14099267
> 
> 赞同：3
> 
> 时间：2012-12-31T08:22:52.717
> 
> 标签：jquery-ui-datepicker, angular-ui

当我在 ng-repeat 块中使用 angular ui datepicker 时，datepicker 仅适用于第一个块。对于剩余的重复块，虽然显示了日历，但无法选择日期。

有人可以告诉我如何让它工作吗？我试图用 $parent 附加模型名称，但这没有帮助。

我有一个产品列表，每个产品都有一个新的发布表单，其中包含两个日期字段。我正在使用 ng-repeat 来显示产品，并在单击添加发布时，会填充该产品块的发布表单。形式类似于

```
<form data-ng-submit="addRelease(b)">
<div class="form-field-container">
    <label for="from">From</label>
    <input class="datePicker" data-date-format="yyyy-mm-dd" type="text"
    placeholder="yyyy-mm-dd" data-ng-model="from" id="from" required>
    <br/>
    <label for="to">To</label>
    <input class="datePicker" data-date-format="yyyy-mm-dd" type="text"
    placeholder="yyyy-mm-dd" data-ng-model="to" id="to" required>
    <br/>
    <label for="releaseNo">Release No.</label>
    <input type="text" id="releaseNo" required>
    <input class="btn btn-primary" type="submit" value="Add">
</div>
</form> 
```

它仅适用于列表中的第一个产品。对于其他产品，虽然会弹出日期选择器，但我们无法选择日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-05T22:26:44.523

您需要为日期选择器的每个实例提供 is-open 和 ng-model 属性的唯一变量。最好为每个人提供一个唯一的 ID。我使用了 Angular 在 ng-repeat 块中提供的 $index 变量。

见工作 plunker：[http ://plnkr.co/edit/HlD4pKJyamXGPM2UtL98?p=preview](http://plnkr.co/edit/HlD4pKJyamXGPM2UtL98?p=preview)

标记：

```
<div ng-repeat="item in items">
  <input type="text" datepicker-popup="MM/dd/yyyy" ng-model="dt" is-open="opened[$index]" min="minDate" max="'2025-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" />
  <button class="btn" ng-click="open($index)"><i class="icon-calendar"></i>
  </button>
</div> 
```

在您的控制器中：

```
$scope.opened = [];
$scope.open = function(index) {
  $timeout(function() {
    $scope.opened[index] = true;
  });
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T13:09:12.843

问题是 datepicker id 是重复的。您可以通过完全避免使用 id 或生成它们来解决这个问题，例如通过使用 $index。

```
<form data-ng-submit="addRelease(b)"><div class="form-field-container">
<label for="from-{{$index}}">From</label>
<input class="datePicker" data-date-format="yyyy-mm-dd" type="text"
placeholder="yyyy-mm-dd" data-ng-model="from" id="from-{{$index}}" required>
<br/>
<label for="to-{{$index}}">To</label>
<input class="datePicker" data-date-format="yyyy-mm-dd" type="text"
placeholder="yyyy-mm-dd" data-ng-model="to" id="to-{{$index}}" required>
<br/>
<label for="releaseNo">Release No.</label>
<input type="text" id="releaseNo" required>
<input class="btn btn-primary" type="submit" value="Add"></div></form> 
```

# php - 如何计算网页下载和加载时间？

> ID：14099269
> 
> 赞同：0
> 
> 时间：2012-12-31T08:23:01.093
> 
> 标签：php, curl, yslow

我想通过 PHP 计算网页的完整下载时间。

它可以使用 CURL，但它唯一计算 HTML 源的下载时间，所以它不可能计算页面上的所有元素，如 JS、图像等！

我想编写类似 hyperspin 的程序，有什么方法可以像 webbrowser 一样工作吗？我的意思是像 YSlow 或 hyperspin 这样的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:17:25.003

你可以看看[PhantomJS](http://phantomjs.org/) (headless WebKit)

```
var page = require('webpage').create(),
    t = Date.now();
page.open('http://twitter.com/marcelduran', function (status) {
  t = Date.now() - t;
  console.log(t + 'ms');
  phantom.exit();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:24:41.990

我通过发送 cURL 请求、下载第一个字节、计算所用时间然后将其乘以要下载的总字节数来完成此操作（非常准确）。

至于 JS 和图像，你真的只需要为此创建一个库（或者可能已经有一个可用的库）

# php - 将页面链接中断至最多 5 个

> ID：14099270
> 
> 赞同：1
> 
> 时间：2012-12-31T08:23:03.473
> 
> 标签：php

> **可能重复：**
> [分解 PHP 分页链接](https://stackoverflow.com/questions/2844456/break-up-php-pagination-links)

我在我的网页上使用了一个简单的分页，它正在工作。但是，我的问题是，当分页链接达到很多数量时

页：[1],[2],[3],[4],[5],[6],[7],[8],[9],[10],[11],[12], [13]、[14]、[15] 等等。

我想把它剪成五个链接，然后为接下来的 5 个链接显示一个按钮，例如：

页：**[1]** ,[2],[3],[4],[5] [下一个 5]。

当我点击 时`[Next 5]`，它会显示 [Prev 5] **[6]** ,[7],[8],[9],[10] [Next 5] 并且当前页面在第 6 页。

（粗体字符表示当前页面。）

下面是要修改的代码：

```
$perpage = 10;

if(isset($_GET["pagenum"])) {
  $page = intval($_GET["pagenum"]);
} else {
  $page = 1;
}
$calc = $perpage * $page;
$start = $calc - $perpage;

$orders_count = 150;
$rowss = $orders_count;

if($rowss) {
   $total = $orders_count;
}

$totalPages = ceil($total / $perpage);

if($page <=1 ) {
  $feedbacks .= "";
} else {
  $j = $page - 1;
  $feedbacks .= "<a class='first-page' title='Go to the first page' href='" . $path . "&pagenum=$j'>&laquo;</a>";
}

for($i=1; $i <= $totalPages; $i++) {
  if($i<>$page) {
     $feedbacks .= "<a class='first-page' title='Go to the first page' href='" . $path . "&pagenum=$i'>$i</a>";
  } else {
     $feedbacks .= "<a class='first-page disabled' title='Go to the first page' href='#'>$i</a>";
  }
}

if($page == $totalPages ) {
  $feedbacks .= "";
} else {
  $j = $page + 1;
  $feedbacks .= "<a class='last-page' title='Go to the first page' href='" . $path . "&pagenum=$j'>&raquo;</a></span>";
}

$feedbacks .= "</div>";
echo $feedbacks; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:35:45.187

这是一个有趣的问题:)

希望能帮助到你。

```
<?php
//set params
$total = 283;
$maxPerPage = 10;
$cutStarting = 5;
$totalPages = ceil($total / $maxPerPage);
$prevPageNum = 0;

//set currentPageId
$currentPage = isset($_GET['pagenum']) ? intval($_GET['pagenum']) : 1;

if ($currentPage > $totalPages && $currentPage < 1) {
    $currentPage = 1;
}

//set first row (maybee for limits in mysql query)
$firstRow = ($currentPage * $maxPerPage) - ($maxPerPage) + 1;

//calculate prev link pageId
if ($currentPage > $cutStarting) {
    $prevPageNum = floor(($currentPage - 1) / $cutStarting) * $cutStarting;
    echo '[ <a href="?pagenum='.$prevPageNum.'">Prev 5</a> ] ';
}

//generate number page links
$links = '';
$first = ($prevPageNum + 1);
$last = $first + $cutStarting;

for ($i=($prevPageNum + 1); $i < $last; $i++) {
    if ($i <= $totalPages) {
        if ($currentPage == $i) {
            $links .= '[ <b>'.$i.'</b> ] ';
        } else {
            $links .= '[ <a href="?pagenum='.$i.'">'.$i.'</a> ] ';
        }
    }
}

echo ' '.$links;

//calculate next link pageId
$nextPageNum = ( ceil( $currentPage / $cutStarting ) * $cutStarting ) + 1;
if ($nextPageNum <= $totalPages) {
    echo '[ <a href="?pagenum='.$nextPageNum.'">Next 5</a> ] ';
}

//get some infos for testing
echo '<br /><br />Testing<hr>';
echo 'Total Pages: '.$totalPages.'<br />';
echo 'Current Page: '.$currentPage.'<br />';
echo 'First Row: '.$firstRow;
?> 
```

*注意：在 javascipt 中做这样的事情，对服务器更好；）*

# android - 使用带有 URL 的数据库中的图像

> ID：14099271
> 
> 赞同：0
> 
> 时间：2012-12-31T08:23:04.613
> 
> 标签：android, sqlite, caching, simplecursoradapter, universal-image-loader

我正在缓存我在 SQLite DB 中的应用程序中获取的所有数据......每当用户没有互联网连接时，数据都会使用数据库中的 SimpleCursorAdapter 加载。该数据库还包含图像的 URL。这些图像由我正在使用的图像加载框架（Universal-Image-Loader）缓存，因此当我使用数据库中的 URL 运行框架时，它会获取缓存的图像。我的问题是如何在 SimpleCursorAdapter 中调用此方法？到目前为止，我只能从数据库中获取所有文本并将它们附加到 TextViews...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T10:36:58.063

所以我终于能够自己完成这件事......

我必须编写一个扩展 CursorAdapter 的新方法......

在那里，我必须将我从数据库中获得的所有文本分配给 TextView。因此，我还能够为我的图像加载器提供指向（缓存）图像的链接以加载...

这是我的代码：

```
private static final class MyCursorAdapter extends CursorAdapter {

    MyCursorAdapter(Context context, Cursor cursor, int flags) {
        super(context, cursor, flags);

        mInflater = LayoutInflater.from(context);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View v = mInflater.inflate(R.layout.row_twitter, parent, false);
        return v;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        TextView listtitle = (TextView) view.findViewById(R.id.listtitle);
        TextView listusername = (TextView) view.findViewById(R.id.listusername);
        TextView listdate = (TextView) view.findViewById(R.id.listdate);

        listtitle.setText(cursor.getString(cursor.getColumnIndex(DataDBAdapter.KEY_TWITTER_TWEET)));
        listusername.setText(cursor.getString(cursor.getColumnIndex(DataDBAdapter.KEY_TWITTER_USERNAME)));
        listdate.setText(cursor.getString(cursor.getColumnIndex(DataDBAdapter.KEY_TWITTER_DATE)));

        listtitle.setTextColor(Color.GRAY);
        listdate.setTextColor(Color.GRAY);

        ImageView iv = (ImageView) view.findViewById(R.id.image);
        imageLoader.displayImage(cursor.getString(cursor.getColumnIndex(DataDBAdapter.KEY_TWITTER_IMAGEURL)),
                iv, options);
    }

    LayoutInflater mInflater;
} 
```

这实际上效果很好:)

# c - 我做了什么？如果语句工作....有点

> ID：14099273
> 
> 赞同：-4
> 
> 时间：2012-12-31T08:23:11.663
> 
> 标签：c

所以昨晚我问了一个关于我试图为练习而做的三角计算器的问题，我又回来了，这个问题与我的上一个问题非常相关。自昨晚以来，我已经修复了计算器，但出于某种奇怪的原因，其中一个 if 语句通过了针对不同 if 语句的测试。这是我的代码-

```
#include <stdio.h>
#include <stdlib.h>
#include <math.h>

int main()
{
int x;
float o, h, a, S, C, T;
enum { sine, cosine, tangent};

printf("Enter the value for the function you wish to calculate\n(Sine = 0 Cosine = 1  Tangent = 2): ");
scanf("%f", &x);

if(x == 0)
{
    printf("Enter the value of the opposite leg: ");
    scanf("%f", &o);
    printf("Enter the value of the hypotenuse: ");
    scanf("%f", &h);

    S = o / h;
    printf("The sine is equal to %f", S);
}

else if(x < 2, x > 0)
{
    printf("Enter the value of the adjacent leg: ");
    scanf("%f", &a);
    printf("Enter the value of the hypotenuse: ");
    scanf("%f", &h);

    C = a / h;
    printf("The cosine is equal to %f", C);
}

else if(x == 2)
{
    printf("Enter the value of the opposite leg: ");
    scanf("%f", &o);
    printf("Enter the value of the adjacent leg");
    scanf("%f", &a);

    T = o / a;
    printf("The tangent is equal to %f", T);
}
else
{
    printf("Wat da fack");
}

return 0;

} 
```

发生的情况是余弦测试通过了切线并且切线函数不起作用。和以前一样，我对此还是很陌生，所以请放轻松。顺便说一句，我有两个余弦测试条件的原因是，除非我有这样的条件，否则它不会运行，对此表示赞赏也。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:25:46.640

`if (x < 2, x > 0)`不按你的想法做。应该是`if (x<2 && x>0)`；阅读*C中的*[逗号运算](http://en.wikipedia.org/wiki/Comma_operator)符

 *如果您编译时使用了所有警告和调试信息（例如使用`gcc -Wall -g`），您可能会收到警告。您应该学习如何使用调试器（例如`gdb`在 Linux 上）。

编译器（至少 GCC）应该警告你`scanf("%f", &x);`where `x`is some `int`。您可能想要`scanf (" %d", &x);`并且您可能想要测试结果`scanf`（它为您提供成功读取元素的数量）。

您很可能需要`printf`用换行符（例如代码`printf("Enter the value of the opposite leg:\n");`）结束每个格式字符串 - 或者经常调用 -`fflush`你最好在`scanf`格式字符串中放置一个空格，例如`scanf(" %f", &a)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T08:53:56.937

正如其他人所提到的，问题似乎出在您的第二个`else if()`陈述中。基本上发生的事情是两个语句`x < 2`都`x > 0`被执行，但仅`x > 0`用于测试条件。因此，余弦函数的测试也将通过正切函数 ie `cosine > 0`，`tangent > 0`并且永远不会执行正切函数的测试。

执行比较的更好方法是使用仅测试是否`x == 1`可以使用`else if(x > 0 && x < 2)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T08:31:19.263

在`scanf("%f", &x);`, 替换`%f`为`%d`因为`x`是`int`, 但这不是主要问题,

问题在于`if`陈述条件，

`comma(,)`不用于`AND`目的，你必须使用`&&`，，所以你的状态变成，

```
if ((x < 2) && (x > 0)) 
```

**编辑**

当您从用户那里获取时，请替换`%f`为`%d`in ...`scanf``x`

`scanf("%d", &x);`这将解决您的问题。*

# ajax - jquery ui选项卡ajax加载

> ID：14099277
> 
> 赞同：0
> 
> 时间：2012-12-31T08:23:32.653
> 
> 标签：ajax, jquery-ui, tabs

我想创建一个站点“A”，其中包含一个通过 Ajax 调用站点“B、C、D”的 jQueryUI-Tabset。但是当有人在谷歌上找到站点“B”并调用它时 - 有没有办法强制站点“B”不独立显示，但它总是显示在站点“A”的标签集中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:34:21.813

首先，您必须允许通过 URL 显示选项卡。可以在[这里](http://jquerytools.org/demos/tabs/history.html)找到来自 jQuery 工具的快速示例，您可能也会觉得[这](https://stackoverflow.com/questions/813601/jquery-ui-tabs-back-button-history)很有趣。

然后在“B,C,D”页面上，您必须以某种方式找出该页面是作为选项卡还是作为页面加载的。由于您在这里有 AJAX，最简单的方法是检查页面是否加载[了 AJAX 请求](https://stackoverflow.com/questions/4929432/how-server-can-check-ajax-requests-not-from-site-x-requested-with)。然后 - 如果不是 - 重定向到选项卡页面并指定当前选项卡，例如 /pageA#tabB。

# c# - 如何仅使用 foreach 循环获取最大价值？

> ID：14099282
> 
> 赞同：-3
> 
> 时间：2012-12-31T08:24:21.203
> 
> 标签：c#, c#-4.0

如何仅使用 foreach 循环获取最大价值？

```
 class Program
{
    static void Main(string[] args)
    {
        var list = new List<DateTime>();
        list.Add(new DateTime(1980, 5, 12));
        list.Add(new DateTime(1960, 1, 2));
        list.Add(new DateTime(1983, 5, 4));
        list.Add(new DateTime(1999, 10, 11));
        list.Add(new DateTime(1913, 4, 7));

        foreach(var date in list)
        {

        };
    }

} 
```

我如何返回“最大”（最新）日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:26:30.223

`list.Max()`将为您提供列表中的最大日期时间对象。你为什么要在这里使用 foreach 循环呢？

**编辑**：添加了一个简单的 foreach 逻辑，因为 OP 要求它。

```
var maxDate = new DateTime(); // initialize to a zero value. 
foreach (var date in list)
{
    if (date > maxDate)
    {
        maxDate = date;
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:30:26.117

如果你真的想使用你的 foreach 循环，你可以使用一个临时变量来跟踪当前的最大值。

```
 var list = new List<DateTime>();
 list.Add(new DateTime(1980, 5, 12));
 list.Add(new DateTime(1960, 1, 2));
 list.Add(new DateTime(1983, 5, 4));
 list.Add(new DateTime(1999, 10, 11));
 list.Add(new DateTime(1913, 4, 7));

 DateTime max = DateTime.MinValue;

 foreach (DateTime d in list)
 {
     if (d > max)
         max = d;
 } 
```

但正如 ryadavilli 所建议的，使用 LINQ（语言集成查询）更容易。Linq 是 .NET Framework 中所有集合类型的一组扩展。您可以通过`using System.Linq`在文件顶部放置一条语句来使用它们。

# android - Android相机surfaceChanged被不断调用

> ID：14099286
> 
> 赞同：5
> 
> 时间：2012-12-31T08:24:42.010
> 
> 标签：android, callback, camera, surfaceview, preview

我正在开发一个使用相机的应用程序。我做了这样的预览课：

```
public class MyPreview extends SurfaceView implements SurfaceHolder.Callback, Camera.Preview Callback{
    ...

    public void surfaceCreated(SurfaceHolder holder){
    ...
    mCamera.setPreviewCallback(this);
    ...
    }

    public void surfaceDestroyed(SurfaceHolder holder){
    ...
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h){
    ...
    }

    public void onPreviewFrame(byte[] data, Camera camera){
    ...
    }
} 
```

基本上，它是 CameraDemo 示例。[Android CameraDemo 示例](http://marakana.com/forums/android/examples/39.html)

问题是，surfaceCreated 只被调用一次（它应该的方式），但是 surfaceChanged 被不断地调用（而不是仅仅一次，或者当表面发生变化时），我相信这就是为什么永远不会调用 onPreviewFrame 的原因。摄像头画面显示在屏幕上，看起来工作正常，但实际上并非如此。

有趣的是它在 Android 2.x 上运行良好，而问题只出现在 Android 4.1 上。（我没有在其他设备上测试过）

我一直在环顾四周，我相信这可能是这个[stackoverflow unsolved question](https://stackoverflow.com/questions/7042377/camera-onpreviewframe-not-called)和 this [another stackoverflow unsolved question](https://stackoverflow.com/questions/13772242/android-camera-previewcallback-not-called-in-4-1)和 this [code.google case](http://code.google.com/p/android/issues/detail?id=20999)背后的真正原因。最后一个案例有一个“解决方案”，但它对我不起作用。

那么，关于为什么一直输入 surfaceChanged 以及如何解决它的任何想法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-27T08:01:43.597

试试这些教程[http://android-er.blogspot.ru/2010/12/implement-takepicture-function-of.html](http://android-er.blogspot.ru/2010/12/implement-takepicture-function-of.html)。还可以尝试查看周期的先前文章。

# installation - Inno Setup：安装在其他 2 个地方

> ID：14099289
> 
> 赞同：0
> 
> 时间：2012-12-31T08:24:53.533
> 
> 标签：installation, components, inno-setup

我是这个 Inno 设置的新手，如果有人能帮助我，我真的很高兴。

我使用 Inno Setup 来安装一堆服务。

我需要向一个组件添加更多 2 种不同的服务。每个服务都有其他 DestDir 但都在同一个组件中。这我已经完成了，但是现在我需要根据 DestDir 以不同的方向安装每个服务。我知道去哪里，但我不知道怎么去。

我被建议做一个将自动更改方向的批处理文件。但我不知道在那里写什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:31:03.537

好的，经过一些研究和工作，我了解到我需要将 2 个项目作为子类型。作为一个孩子，我可以控制他们将被放在哪里。我还将这些孩子置于 False Enabled 位置，因此我只需要选择父母并选择两个孩子。

# android - Intellij：android-support-v4.jar 包含在 actionBarSherlock 和 Project => IllegalArgumentException 中

> ID：14099291
> 
> 赞同：17
> 
> 时间：2012-12-31T08:25:29.427
> 
> 标签：android, jar, intellij-idea

我目前正在将我的所有项目从 Eclipse 迁移到 IntelliJ Idea。

当我使用 Eclipse 时，该包仅包含在 ActionBarSherlock 库中，当该库包含在我的项目中时，所有内容都会自动添加。

使用 IntelliJ，一旦将 android-support-v4.jar 添加到 ABS，这似乎还不够，因为我所有的导入都被破坏了。

**ActionBarSherlock (LibABS) 导入截图：**

![在此处输入图像描述](../Images/c551be763afc2bb2add45bb12471caaa.png)

一切似乎都很好，所有的 SherlockActivity 都很好，但所有与支持相关的东西在我的应用程序中都无法识别：

```
java: /home/user/workspace/....
cannot access android.support.v4.app.FragmentActivity
class file for android.support.v4.app.FragmentActivity not found 
```

所以，我必须手动将 jar 复制到 libs 文件夹中，并再次将其包含到我的项目中。

**我的项目导入的屏幕截图：**

![在此处输入图像描述](../Images/aafb6c9d1920be4eea2ad98fe5bf9f86.png)

进口被识别，坚果我现在得到这个错误：

```
Android Dex: [BeTrains-for-Android] UNEXPECTED TOP-LEVEL EXCEPTION:
Android Dex: [BeTrains-for-Android] java.lang.IllegalArgumentException: already added: Landroid/support/v4/app/ShareCompat$ShareCompatImplJB; 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-31T09:19:21.077

尝试使用依赖范围和导出标志。检查此页面以获取描述：[依赖项选项卡](http://www.jetbrains.com/idea/webhelp/dependencies-tab.html)。

# android - 关闭对话框或退出应用程序时如何停止 Toast.makeText

> ID：14099292
> 
> 赞同：0
> 
> 时间：2012-12-31T08:25:30.140
> 
> 标签：android, toast, seekbar, android-alertdialog

再次。我创建应用程序来更改 TextSize 通过在`Dialog Alert`. 当我使用`seekBar` `TextSize`时将更改并显示字体编号`Toast.makeText`。但是`Toast.makeTake`不要停止增加数字，显示消息。当对话框关闭并退出应用程序时，它不会停止。我必须在设置或卸载应用程序中强制关闭应用程序。它会停止。我怎样才能解决这个问题。再次感谢。

```
 public void ShowDialog() {
    final AlertDialog.Builder popDialog = new AlertDialog.Builder(this);
    final SeekBar seek = new SeekBar(this);

    seek.setMax(100);

    popDialog.setIcon(R.drawable.conp);
    popDialog.setTitle(R.string.menu_settings);
    popDialog.setView(seek);

    seek.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
        public void onProgressChanged(SeekBar seekBar, int progress,
                boolean fromUser) {

            subtitles.setTextSize(progress);

            Toast.makeText(ShowMan.this, "your textsize :" + String.valueOf(progress), Toast.LENGTH_LONG).show();
        }

        public void onStartTrackingTouch(SeekBar arg0) {
            // TODO Auto-generated method stub

        }

        public void onStopTrackingTouch(SeekBar seekBar) {
            // TODO Auto-generated method stub

        }
    });

    // Button
    popDialog.setPositiveButton("OK",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.dismiss();
                }
            });

    popDialog.create();
    popDialog.show();
} 
```

＆我的老师说“不要使用对话主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:29:43.910

在 onStopTrackingTouch() 下写那个 Toast

```
public void ShowDialog() {
final AlertDialog.Builder popDialog = new AlertDialog.Builder(this);
final SeekBar seek = new SeekBar(this);
int pgSeekbar;

seek.setMax(100);

popDialog.setIcon(R.drawable.conp);
popDialog.setTitle(R.string.menu_settings);
popDialog.setView(seek);

seek.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {

        subtitles.setTextSize(progress);

        pgSeekbar = progress;
    }

    public void onStartTrackingTouch(SeekBar arg0) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        Toast.makeText(ShowMan.this, "your textsize :" + pgSeekbar, Toast.LENGTH_SHORT).show();

    }
});

// Button
popDialog.setPositiveButton("OK",
        new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                dialog.dismiss();
            }
        });

popDialog.create();
popDialog.show(); 
```

# soap - eWay 支付网关 POST 方法得到不正确的结果

> ID：14099297
> 
> 赞同：4
> 
> 时间：2012-12-31T08:25:49.237
> 
> 标签：soap, payment-gateway

我为此使用 eWay 支付网关，我使用 URL 来发布数据**https://secure-au.sandbox.ewaypayments.com/Process**

但是得到这样的响应： {"Message":"Not Found","Errors":null}

之后，当我在这个网址上发帖时：[https://api.sandbox.ewaypayments.com/GetAccessCodeResult.json](https://api.sandbox.ewaypayments.com/GetAccessCodeResult.json)得到正确的 json 但所有数据为空或一些随机数据并得到 ResponseMessage = S5099 （如我所见，我的文件是对于 S5099 不完整（访问代码正在进行/不完整），但我已经使用此 url [https://api.sandbox.ewaypayments.com/CreateAccessCode.json](https://api.sandbox.ewaypayments.com/CreateAccessCode.json)获取访问代码）

以上所有过程都是通过 eWay 支付网关的 SOAP 调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T07:46:14.590

*   1) eWAY 允许多种方法调用网关 API，它不仅仅依赖于 SOAP。
*   2）在第一步创建访问代码后。请确认您将所有必需的信息发送到 https://secure-au.sandbox.ewaypayments.com/Process。（请参阅[http://www.eway.com.au/docs/api-documentation/rapid-3-0-documentation-au.pdf](http://www.eway.com.au/docs/api-documentation/rapid-3-0-documentation-au.pdf)第 30 页）。
*   3）在第 2 步之后，您将收到当前收到的消息。
*   4) 要获得访问代码结果，您必须使用 'GET' 方法。它不允许“POST”方法。（请参阅上述PDF第33页。）
*   5) 确保您使用正确的沙盒用户名和密码，否则它会给您当前面临的系统错误。

# android - 删除操作后刷新从数组列表创建的列表视图

> ID：14099299
> 
> 赞同：0
> 
> 时间：2012-12-31T08:26:09.370
> 
> 标签：android, listview, refresh, adapter

我已经看到太多关于刷新列表视图的问题，我已经尝试了关于这些主题的所有解决方案，但没有一个对我有用。

已经尝试过`notifysetdatachange()`，`invalidateviews`但`refreshdrawablestate()`没有奏效。

我有一个操作`arraylist`后，`longclick`我正在从 arraylist 中删除一个项目。我希望它从 listview 中消失。但它没有。

但是删除后，如果我打开另一个活动并返回到包含我的活动，`listview`它就会消失。

所以我的删除操作成功了，我只想知道如何刷新listview，

我没有发布代码，因为我只是在使用没有什么独特的东西

我有一个`arraylist`命名`al_6`。我用对象填充它。

然后我把它们发给我`adapter`喜欢的人

```
adapter = new ContentSearchListAdapter(getActivity(), channels2,
                options);
        listview.setAdapter(adapter); 
```

当我想从我的数组列表中删除一个对象时。

```
al_6.remove(position) 
```

正如我之前所说的删除操作成功

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T08:29:03.593

您应该使用这些语法来实现它

```
((YourAdaptor)Listview.getAdaptor()).notifyDataSetChange(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:35:45.060

试试这个代码和你的适配器类，

```
 // query fire on your deletion operation
   mArrayList.remove(position);
   notifyDataSetChanged(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T20:15:54.843

根据我的经验，刷新列表视图的行为很奇怪。我总是这样做以毫无问题地刷新 listView：

*   使用从**BaseAdapter扩展的自定义适配器**
*   使用**ArrayList<>**结构数据进入适配器。如果您的数据在数据库 SQLiteDatabase 中，我建议将您需要的数据放入该列表中的 ArrayList 并将其传递给适配器。我不能对 CursorAdapter 做同样的事情:(
*   如果您打算修改 Activity 之外的数据并想要更新列表，请在 Activity 中将ArrayList 和 Adapter 设为**公共静态。**
*   当您修改或删除数据中的任何信息时（如果您直接在数据库上执行此操作，请将其复制到 ArrayList 中），请使用 Activity 的 Adapter 的公共静态引用来调用他的方法**notifyDataSetChanged()**

# python - 没有插槽的辅助窗口

> ID：14099308
> 
> 赞同：1
> 
> 时间：2012-12-31T08:27:35.223
> 
> 标签：python, qt, python-3.x, pyqt, signals-slots

我想为用户的设置创建一个辅助窗口，所以在我的 QMainWindow 类中，我调用一个对象设置，如下所示：

```
self.settingsAction = QtGui.QAction('Préférences', self)
self.settingsAction.triggered.connect(lambda: Settings(self)) 
```

然后，我建立我的设置类：

```
class Settings():

    """ Méthode pour effectuer les réglages du programme
    par l'utilisateur """

    def __init__(self, parent):

        #TODO: faire de cette fenêtre l'enfant de la fenêtre principale
        #On crée une fenêtre secondaire

        self.parent = parent

        self.initUI()
        self.connexion()
        self.etablirSlots()

    def connexion(self):

        self.parent.options.beginGroup("Watching")
        pathes = self.parent.options.allKeys()
        if pathes:
            for each_key in pathes:
                self.list_pathes.addItem(self.parent.options.value(each_key))
        self.parent.options.endGroup()

    def etablirSlots(self):

        self.add_directory_button.clicked.connect(self.addPath)
        self.rm_directory_button.clicked.connect(self.removePath)

    def initUI(self):

        self.parent.fen_settings = QtGui.QWidget()
        self.parent.fen_settings.setWindowTitle('Préférences')

        #http://cyp1973.blogspot.fr/2009/05/qt-resource-file.html
        #On crée un QListWidget pr présenter les pathes
        self.list_pathes = QtGui.QListWidget()

        #On crée un titre pour la zone des pathes à surveiller
        label_directories = QtGui.QLabel("Dossiers surveillés :")

        #On crée les boutons d'ajout et de retrait d'un path
        self.add_directory_button = QtGui.QPushButton("Ajouter")
        self.rm_directory_button = QtGui.QPushButton("Enlever")

        #On crée une grille pr gérer la disposition des widgets
        grid_settings = QtGui.QGridLayout()
        grid_settings.addWidget(label_directories, 0, 0, 1, 1)
        grid_settings.addWidget(self.list_pathes, 1, 0, 2, 1)
        grid_settings.addWidget(self.add_directory_button, 1, 1, 1, 1)
        grid_settings.addWidget(self.rm_directory_button, 2, 1, 1, 1)

        self.parent.fen_settings.setLayout(grid_settings)
        self.parent.fen_settings.show()

    def removePath(self):

        """ Slot pour enlever un path à surveiller
        de la conf """
        print("coucou")

        #try:
        path = self.list_pathes.selectedItems()[0].text()
        print(path)

        #http://stackoverflow.com/questions/7484699/
        #pyqt4-remove-item-widget-from-qlistwidget
        #On efface le path de la liste visible
        item = self.list_pathes.takeItem(self.list_pathes.currentRow())
        del item
        #except IndexError:
            #print("Aucun path sélectionné")
            #pass

    def addPath(self):

        """ Slot pour ajouter un path à surveiller à la conf """

        #TODO: vérifier que le path à ajouter n'est pas déjà dans la liste

        #On crée une boite de dialogue pr choisir le path à ajouter
        #et on ajoute le path à la liste visible
        path = QtGui.QFileDialog.getExistingDirectory(self.parent.fen_settings, 'Open file', '/home')
        self.list_pathes.addItem(path) 
```

但是我的辅助窗口的两个按钮似乎没有连接到我的插槽。一切都很好，除此之外，我检查过，如果我单独使用这个类，而不在参数中传递 QMainWindow，它工作得很好。

你知道为什么这些插槽没有连接吗？也许信号没有正确发出？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:39:15.640

这可能是因为您没有将父级传递给按钮，这是您的代码的工作版本：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtCore, QtGui

class Settings(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Settings, self).__init__(parent)

        self.parent = parent

        self.setWindowTitle(u'Préférences')

        self.list_pathes = QtGui.QListWidget(self)

        self.label_directories = QtGui.QLabel(self)
        self.label_directories.setText(u"Dossiers surveillés :")

        self.rm_directory_button = QtGui.QPushButton(self)
        self.rm_directory_button.setText(u"Enlever")
        self.rm_directory_button.clicked.connect(self.removePath)

        self.add_directory_button = QtGui.QPushButton(self)
        self.add_directory_button.setText(u"Ajouter")
        self.add_directory_button.clicked.connect(self.addPath)

        self.gridLayout = QtGui.QGridLayout(self)
        self.gridLayout.addWidget(self.label_directories, 0, 0, 1, 1)
        self.gridLayout.addWidget(self.list_pathes, 2, 0, 2, 2)
        self.gridLayout.addWidget(self.rm_directory_button, 3, 2, 1, 1)
        self.gridLayout.addWidget(self.add_directory_button, 2, 2, 1, 1)

        self.show()    
    #    self.connexion()

    def connexion(self):
        self.parent.options.beginGroup("Watching")
        pathes = self.parent.options.allKeys()
        if pathes:
            for each_key in pathes:
                self.list_pathes.addItem(self.parent.options.value(each_key))

        self.parent.options.endGroup()

    def removePath(self):
        try:
            path = self.list_pathes.selectedItems()[0].text()
            item = self.list_pathes.takeItem(self.list_pathes.currentRow())
            del item

        except IndexError:
            print(u"Aucun path sélectionné")

    def addPath(self):
        path = QtGui.QFileDialog.getExistingDirectory(self, 'Open file', '/home')
        self.list_pathes.addItem(path)

class MainWindow(QtGui.QMainWindow):
    def __init__(self, parent=None):
        super(MainWindow, self).__init__(parent)

        self.settingsAction = QtGui.QAction(u'Préférences', self)
        self.settingsAction.triggered.connect(lambda: Settings(self))

        self.toolBar = QtGui.QToolBar(self)
        self.toolBar.addAction(self.settingsAction)

        self.addToolBar(QtCore.Qt.ToolBarArea(QtCore.Qt.TopToolBarArea), self.toolBar)

if __name__ == "__main__":
    import  sys

    app  = QtGui.QApplication(sys.argv)
    main = MainWindow()
    main.show()
    sys.exit(app.exec_()) 
```

# javascript - Twitter Bootstrap 模式是黑暗的？

> ID：14099309
> 
> 赞同：8
> 
> 时间：2012-12-31T08:27:44.917
> 
> 标签：javascript, html, twitter-bootstrap

我所有的引导代码都在工作，除了模态。模态显示，但整个屏幕是黑暗的。也就是说，模态似乎在灰色“后面”。

```
 <link href="assets/css/bootstrap.css" rel="stylesheet">
  <link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="assets/js/bootstrap.js"></script>

  <a href="#myModal" data-toggle="modal">Login</a>

  <div id="myModal" class="modal hide fade in" aria-hidden="true">
      <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">X</button>
           <h3 id="myModalLabel">Log in</h3>
       </div>
       <div class="modal-body">
         <p>
            <form class="modal-form" id="loginform" >
              <input type="text" name="username" placeholder="login" id="username">
              <input type="text" name="password" placeholder="password" id="userpassword">
             </form>
          </p>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button class="btn btn-success">Login</button>
        </div>
   </div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T09:18:21.410

看来您需要在 </head> 之前将其添加到脚本中

```
<script type="text/javascript">
 $(function () { 
    $("#myModal").modal({show:false});
});  
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T08:35:40.917

我真的不明白这个问题？

我刚刚在 jsfiddle 中尝试了您的代码：http: [//jsfiddle.net/zFHAJ/](http://jsfiddle.net/zFHAJ/)一切似乎都正常吗？

```
<!DOCTYPE html>
<html>
    <head>
        <link href="http://moi007.dyndns.org/igestis/theme/iabsis_v2//css/bootstrap.css?2.0-4" rel="stylesheet">
    <link href="http://moi007.dyndns.org/igestis/theme/iabsis_v2//css/bootstrap-responsive.css" rel="stylesheet"> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="http://moi007.dyndns.org/igestis/theme/iabsis_v2//js/bootstrap.js?2.0-4"></script>
    </head>
    <body>

  <div id="myModal" class="modal hide fade in" aria-hidden="true">
      <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">X</button>
           <h3 id="myModalLabel">Log in</h3>
       </div>
       <div class="modal-body">
            <form class="modal-form" id="loginform" >
              <input type="text" name="username" placeholder="login" id="username">
              <input type="text" name="password" placeholder="password" id="userpassword">
             </form>
        </div>
        <div class="modal-footer">
            <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
            <button class="btn btn-success">Login</button>
        </div>
   </div>

       <a href="#myModal" role="button" class="btn" data-toggle="modal">Launch demo modal</a>
</body>
</html>​ 
```

**也许您还有其他一些与引导程序冲突的自定义 css？**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T05:23:44.613

将 bootstrap.js 或 bootstrap.min.js 放在前面

```
</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-08T11:18:41.240

```
.modal-backdrop {
  display: none;
}

.modal {
  background: rgba(0,0,0,0.5);
} 
```

# mercurial - 如何在 mercurial 中知道所有推送的文件是否已推送

> ID：14099317
> 
> 赞同：1
> 
> 时间：2012-12-31T08:28:10.067
> 
> 标签：mercurial

我在我的 Ubuntu 12.04 中使用 mercurial 来控制某些应用程序的版本。我已经使用这些命令来推送文件 `hg addremove && hg commit -m 'changes in the comment' && hg push` 它正在推送所有文件。但我的问题是如何知道是否所有文件都已推送？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:34:32.283

如果没有错误，并且 push 命令以如下输出结束：

```
searching for changes
15 changesets found
remote: adding changesets
remote: adding manifests
remote: adding file changes
remote: added 15 changesets with 30 changes to 28 files
[command completed successfully Mon Dec 31 10:32:33 2012] 
```

我可以安全地假设推动是好的。

如果您有权访问您推送到的存储库，请尝试`hg heads`查看您的推送更改集。

我希望这能给你一个很好的领导。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-01T05:44:19.027

`hg help push`明确指出

> 如果推送成功返回 0，如果没有推送则返回 1。

...其他返回码的意思是“事情很糟糕”。您必须检查它并仅在零的情况下继续操作

# iphone - 从导航视图返回后的 UIScrollView 重新定位

> ID：14099324
> 
> 赞同：1
> 
> 时间：2012-12-31T08:29:02.987
> 
> 标签：iphone, ios, uiscrollview

我正在使用滚动视图，并使用其中的按钮导航到新视图。问题是当我从新视图再次弹出（返回）到我的滚动视图时，滚动视图似乎重新定位到顶部，并且我看不到添加到滚动视图上半部分的控件。附上我的滚动视图的框架大小。

如果有人遇到同样的问题，我该如何解决？![我的 srllview 帧大小](../Images/507d63fd73c56e965d2174d48a826174.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:34:03.673

您可以使用`setContentOffset:animated`设置滚动视图位置。像这样的东西：

```
[self.scrollView setContentOffset:CGPointMake(0, 180) animated:YES]; 
```

# windows-phone-7 - 如何持久化 Twitter Authorizer ITwitterAuthorizer

> ID：14099329
> 
> 赞同：0
> 
> 时间：2012-12-31T08:29:28.617
> 
> 标签：windows-phone-7, twitter, windows-phone-8

我如何坚持 Twitter 身份验证，以便每次我想从我的 Windows phone 8 应用程序发送推文时都不需要身份验证我正在使用 LINQTOTWITTER sdk 通过使用 PinAuthorizer

下面的代码是在“PinTextBox.Text”中给出身份验证代码后执行的，此 PinAuthorizer 用于检查身份验证是否完成。我需要保留此对象或使用任何机制，以便用户无需每次都提供身份验证代码。

```
private void AuthenticateButton_Click(object sender, RoutedEventArgs e)
    {
        pinAuth.CompleteAuthorize(
            PinTextBox.Text,
            completeResp => Dispatcher.BeginInvoke(() =>
            {
                switch (completeResp.Status)
                {
                    case TwitterErrorStatus.Success:
                        AppSettings.TwitterAuthorizer = pinAuth;
                        NavigationService.GoBack();
                        break;
                    case TwitterErrorStatus.TwitterApiError:
                    case TwitterErrorStatus.RequestProcessingException:
                        MessageBox.Show(
                            completeResp.Error.ToString(),
                            completeResp.Message,
                            MessageBoxButton.OK);
                        break;
                }
            }));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:03:45.300

保存成功登录到独立存储后从 Twitter 获得的访问令牌，并在需要发布推文时使用相同的访问令牌。

您没有提及您在应用程序中使用的 Twitter SDK。这取决于您使用的 SDK。如果我的回答不能解决您的问题，请使用更多数据更新您的问题。

我从未在 LINQTOTWITTER 上工作过。这是关于类似问题的讨论。我希望那里提到的解决方案可以解决它。

[Pin Auth 完成后获取访问令牌](http://linqtotwitter.codeplex.com/discussions/267154)

# ruby-on-rails - Ruby On Rails：使用 send_data/send_file 发送大图片会导致错误

> ID：14099330
> 
> 赞同：2
> 
> 时间：2012-12-31T08:29:29.687
> 
> 标签：ruby-on-rails, ruby

我正在使用 Ruby 1.93 和 Rails 3.2，我尝试使用函数`send_data`和`send_file`. 目前我正在使用 WebBrick 作为开发服务器。

在这两种情况下，只要图片小于 330kB 左右，它似乎就可以正常工作。但是当图片变大（比如 1MB）时，Firefox、Maxthon 和 IE 都停止显示图片，并且 Firefox 说图片包含错误。

我下载了损坏的图片文件并将文件大小与原始图片进行了比较。在大图片上，文件大小大约大 400 字节。

以下是一些尝试过的代码块：

```
send_data img.to_blob, :stream => 'false', :filename => 'test.jpg', :type => 'image/jpg', :disposition => 'inline'

send_data( img.to_blob, :filename => "test.jpg" )

send_file( 'C:\WebProjects\RubyTest\public\data\pic3_3.jpg' , :disposition => 'inline')

File.open('C:\WebProjects\RubyTest\public\data\pic3_3.jpg', 'rb') do |f|
   send_data f.read, :type => "image/jpeg", :disposition => "inline"
end 
```

有趣的是，使用更大的文件 Firefox、Maxthon 和 IE 抱怨图像损坏，而 Blackberry Playbook 能够显示图片。另一方面，Playbook 在其他浏览器正确显示的一些较小图片方面存在问题。

Btw`.to_blob`是一个返回二进制对象的 RMagick 函数。但 RMagick 似乎工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T19:54:40.047

我想我找到了答案。 [如您在此网站上所见，我将 WEBrick 替换为 Thin。](http://www.psteiner.com/2012/04/how-to-replace-webrick-with-thin-for.html) WEBrick 似乎在处理较大的文件时存在问题。我不知道 Thin 是否是最终的解决方案，但至少它解决了问题。

# jquery - 在用户按下键盘上的左/右键时继续滚动

> ID：14099341
> 
> 赞同：2
> 
> 时间：2012-12-31T08:30:43.543
> 
> 标签：jquery, jquery-ui

我已成功添加按下键盘上的左/右键时滚动（左/右）的功能

```
$('body').keydown(function (e) {
    if (e.keyCode == 37) { // left
        $('html, body').stop().animate({
        scrollLeft: "-=980"
        }, 1000);
        e.preventDefault();
    }
    else if (e.keyCode == 39) { // right
        $('html, body').stop().animate({
        scrollLeft: "+=980"
        }, 1000);
        e.preventDefault();
    }
}); 
```

当用户只按一次左/右键时，它工作得很好。当用户长按左/右时，scolling 效果停止然后重新开始（只要按键被按下）。

**我希望当用户长时间按左/右时滚动不会停止/再次启动。**但是继续滚动直到释放左/右按钮。

可能的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:43:28.707

是的，我认为这是可能的。尝试在 onKeyDown 事件中使用

```
setInterval() 
```

每 200 毫秒左右调用一次滚动函数。

然后使用 onKeyUp 事件停止函数（使用标志或使用 clearInterval()）

祝你好运

# linux - 如何将后台程序带到前台

> ID：14099343
> 
> 赞同：7
> 
> 时间：2012-12-31T08:31:01.893
> 
> 标签：linux, shell

我正在使用 CentOS6，并在 tmux 会话上运行 django 服务器以进行开发：</p>

**python manage.py runserver 0.0.0.0:8000**

所以我可以在上面读取我的调试字符串打印。

虽然有一个未知的原因导致我的 tmux 会话丢失，但我无法使用“tmux attach”命令返回我的工作会话。

我仍然可以通过 ps 命令找到我的服务器正在运行，但我无权杀死它以便在同一端口上运行新服务器。

所以，我想再次调用这个后台服务器到前台。

由于我从不使用 ctrl+z 或其他方式获取进程背景，所以即使我使用作业命令，也没有作业。

但我不知道我是否可以做到这一点，以及如何做到这一点......

谢谢大家！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T08:50:49.610

使用该`jobs`命令查找您启动的后台进程列表。例如：有一个脚本在 5 次迭代中简单地休眠 10 秒。我在后台运行了 4 次。

```
>jobs
[1]  + Running                       ./temp.sh
[2]  - Running                       ./temp.sh
[3]    Running                       ./temp.sh
[4]    Running                       ./temp.sh 
```

`fg`是将其带回前台的命令，如下所示。

```
>fg 1
[CTRL -c] 
```

如上所示，我已经结束了这个过程，它不再存在。现在如果我再跑`jobs`

```
>jobs
[2]  + Running                       ./temp.sh
[3]    Running                       ./temp.sh
[4]  - Running                       ./temp.sh
> 
```

您也可以[在这里](http://theunixshell.blogspot.com/2012/12/running-background-process-and.html)查看更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:40:06.840

您可以使用该命令`jobs`获取您的作业列表，然后您可以使用该命令`fg <number of job>`将该作业置于最前面。

# mysql - 在 SQL 中快速搜索最接近的值

> ID：14099346
> 
> 赞同：4
> 
> 时间：2012-12-31T08:31:09.707
> 
> 标签：mysql, sql, performance, sqlite

我在 SQLite 数据库中有高度的长/纬度坐标。

一些示例数据：

```
latitude   longitude  altitude
------------------------------
48.003333  11.0       652    
48.036667  11.000833  651
48.280833  11.000833  533 
```

现在我想要一些 SQL 查询，它会给我最接近给定纬度/经度坐标的高度，例如

给定 lat/long 将是**48.023445/11.000733**所以最接近的是**海拔 651**和 lat/long **48.036667/11.000833**。试图搜索很多论坛，但没有任何用处。到处都是关于一个变量或非常慢查询的示例。我非常需要这个查询，并看到了一些基于 UNIONS 的解决方案。我需要它快，因为我将在这张表上进行大约 150 万次查询。我正在使用事务和索引。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:46:30.003

为了您的目的（靠近搜索坐标的点），您最好使用平面上的距离公式来最小化。

```
(lat-latitude)*(lat-latitude) + (long-longitude)*(long-longitude) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T08:38:20.823

使用经度和纬度坐标计算球体上两点之间的距离的公式远非简单，[此处描述](http://www.movable-type.co.uk/scripts/latlong.html)。如页面中所述，如果这些点相当接近，您可以使用简单的平面三角法，而只需使用点之间的欧几里德距离：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T09:13:30.593

我会使用类似于以下查询的内容：

```
select * from pos order by ((lat-48.00333)*(lat-48.00333)+(long-11.0)*(long-11.0)+(alt-652)*(alt-652)); 
```

SQLite 不支持 SQRT，但由于 SQRT 很单调，您可以在距离公式中跳过它。

# android - org.apache.http.conn.HttpHostConnectException：与 http://localhost 的连接在 android 中被拒绝

> ID：14099347
> 
> 赞同：28
> 
> 时间：2012-12-31T08:31:16.167
> 
> 标签：android, apache, connection

我正在制作一个应用程序，该应用程序在执行时将图像上传到服务器并将其数据库更新到 android 中的服务器，它显示错误

```
Connection to http://localhost refused 
```

还有更多错误，我研究了这个问题，发现没有提供 URL 连接

```
http://localhost/... provide the link as http://10.0.2.2/... 
```

我这样做了，但问题相同，更多错误在这里：

```
E/org.apache.http.conn.HttpHostConnectException(4318): Connection to http://localhost refused
E/org.apache.http.conn.HttpHostConnectException(4318): org.apache.http.conn.HttpHostConnectException: Connection to http://localhost refused
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:183)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
E/org.apache.http.conn.HttpHostConnectException(4318):  at com.example.android.photobyintent.ViewRecipients.uploadFile(ViewRecipients.java:325)
E/org.apache.http.conn.HttpHostConnectException(4318):  at com.example.android.photobyintent.ViewRecipients$1.run(ViewRecipients.java:238)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.lang.Thread.run(Thread.java:856)
E/org.apache.http.conn.HttpHostConnectException(4318): Caused by: java.net.ConnectException: failed to connect to /127.0.0.1 (port 80): connect failed: ECONNREFUSED (Connection refused)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.IoBridge.connect(IoBridge.java:114)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.net.Socket.connect(Socket.java:842)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
E/org.apache.http.conn.HttpHostConnectException(4318):  ... 8 more
E/org.apache.http.conn.HttpHostConnectException(4318): Caused by: libcore.io.ErrnoException: connect failed: ECONNREFUSED (Connection refused)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.Posix.connect(Native Method)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.IoBridge.connect(IoBridge.java:112)
E/org.apache.http.conn.HttpHostConnectException(4318):  ... 13 more 
```

文件上传的代码是：

```
public int uploadFile(ArrayList<String> sourceFileUri, String info, String latitude, String longitude, String id) throws IOException {
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost("http://10.0.2.2/deliverysystem/order/add");

            MultipartEntity entity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);

            entity.addPart("returnformat", new StringBody("json"));
            System.out.println(sourceFileUri.size());
            for(int i=0;i<sourceFileUri.size();i++){
                String sourceFile = sourceFileUri.get(i);
                entity.addPart("uploaded_file"+(i+1), new FileBody(new File(sourceFile)));
            }

            entity.addPart("fld_delivery_id", new StringBody(id));
            entity.addPart("fld_delivery_location", new StringBody(info));
            entity.addPart("fld_latitude", new StringBody(latitude));
            entity.addPart("fld_longitude", new StringBody(longitude));
            httpPost.setEntity(entity);
            HttpResponse response = httpClient.execute(httpPost, localContext);
            BufferedReader reader = new BufferedReader(
                    new InputStreamReader(
                            response.getEntity().getContent(), "UTF-8"));

            String sResponse = reader.readLine();
            return 1;
        } catch (Exception e) {
            if (dialog.isShowing())
                dialog.dismiss();

            Log.e(e.getClass().getName(), e.getMessage(), e);
            return 1;
        }

       } 
```

在调试代码时达到：

```
httpPost.setEntity(entity); 
```

它在此行之后显示异常，即在此语句中：

```
HttpResponse response = httpClient.execute(httpPost, localContext); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-03-30T17:40:05.540

如果您使用模拟器为本地服务器运行您的应用程序。提及本地`ip`，`10.0.2.2`并且必须授予您的应用程序的 Internet 权限：

```
<uses-permission  android:name="android.permission.INTERNET" /> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-05T07:45:31.760

`<uses-permission android:name="android.permission.INTERNET"/>` 将上面的这个标签添加到你的Android项目的AndroidManifest.xml中，就可以了。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-31T08:35:00.133

```
http://localhost 
```

上面的主机已经被运行代码的模拟器占用了。如果要访问计算机的本地主机，请使用 IP 地址作为`http://10.0.2.2:8080/`.

欲了解更多详情，请参阅此[链接](http://developer.android.com/tools/devices/emulator.html#networkaddresses)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-20T03:11:06.890

我面临着完全相同的问题，我对我的 URL 进行了以下更改，之后它工作得非常好..

从：

```
http://localhost/Image4android/get_all_images.php 
```

至：

```
http://192.168.1.2/Image4android/get_all_images.php

where the ip: 192.168.1.2 is IPv4 address. In windows Run > CMD > Ipconfig 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-10-03T10:07:33.887

用于本地主机的 wamp 服务器`10.0.2.2` ，例如`10.0.2.2/phpMyAdmin`

并供tomcat使用`10.0.2.2:8080/server`

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-31T10:58:02.840

除了上述将 localhost 更改为 10.0.2.2:8080 的答案之外，尝试在清单的应用程序标记之外添加权限

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-03-03T06:36:47.887

请检查您是否在同一网络上运行 android 设备。这将解决问题。玩得开心！！！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-03T02:53:24.927

当您使用设备进行测试时，您想要添加您的 PC ip 地址。

在电脑上运行cmd`Ipconfig`

在 ubuntu 中运行终端`ifconfig`

然后使用`"http://your_pc_ip_address:8080/register"`insted 的 using`"http://10.0.2.2:8080/register"`

```
in my pc = 192.168.1.3 
```

并且还向 Manifest 添加 Internet 权限

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-02-20T09:31:18.480

我将 PHP 用于 web 服务和 Android 4.x。用于连接到 Web 服务的设备。我有类似的问题，`10.0.2.2`在模拟器上使用效果很好，但无法从设备连接。对我有用的解决方案是：查找您计算机的 IP ...说`192.168.0.103`查找您的 apache 的端口 ...说`8080`现在打开 httpd.conf 并找到以下行 Listen`127.0.0.1:8080`在此行之后添加以下 Listen`192.168.0.103:8080`就是这样。现在，如果您`192.168.0.103:8080`在您的 android 代码中使用，它将连接！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-02T06:44:16.640

我有类似的问题，然后我发现我的智能手机没有连接wifi。在我打开 wifi 并连接到类似的网络（使用我的笔记本电脑）后，还有另一个问题 - 笔记本电脑的防火墙阻止了传入连接。一旦我修复了防火墙，我就可以从我的安卓应用程序与笔记本电脑上运行的网络服务进行通信。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-07-22T09:58:41.357

导致此错误的基本和简单的事情之一是： *没有 Internet 连接*

**首先打开设备的 Internet 连接。**

（也许我们会忘记这样做）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-07-31T06:10:56.343

此错误的两种解决方案：

1.在你的Android项目的androidManifest.xml中添加这个权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

2. **首先打开您设备的互联网连接。**

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2014-10-05T09:19:18.180

使用`127.0.0.1`而不是`localhost`

# ejb - 如何将 EJB 注入 SOAPHandler？

> ID：14099350
> 
> 赞同：6
> 
> 时间：2012-12-31T08:31:46.527
> 
> 标签：ejb, jax-ws, cdi

我的 JAX-WS 战争包含以下条目。

```
WEB-INF/lib/
WEB-INF/beans.xml // empty
WEB-INF/lib/commons-logging-1.1.1.jar
WEB-INF/lib/corrs-beans-1.0-alpha-1-SNAPSHOT.jar // EJBs are here
WEB-INF/lib/corrs-entities-1.0-alpha-1-SNAPSHOT.jar
WEB-INF/lib/joda-time-1.6.2.jar
WEB-INF/lib/opensaml-2.5.1-1.jar
WEB-INF/lib/openws-1.4.2-1.jar
WEB-INF/lib/slf4j-api-1.6.1.jar
WEB-INF/lib/wss4j-1.6.8.jar
WEB-INF/lib/xmlsec-1.5.3.jar
WEB-INF/lib/xmltooling-1.3.2-1.jar
WEB-INF/web.xml
META-INF/maven/
META-INF/maven/kr.co.ticomms.corrs/
META-INF/maven/kr.co.ticomms.corrs/corrs-services/
META-INF/maven/kr.co.ticomms.corrs/corrs-services/pom.xml
META-INF/maven/kr.co.ticomms.corrs/corrs-services/pom.properties 
```

我的一个 SOAPHandlers 试图调用 EJB。

```
@HandlerChain(file=...)
@WebService(...)
public class MyService {
}

public class MyHandler implements SOAPHandler<SOAPMessageContext> {

    @Override
    public boolean handleMessage(final SOAPMessageContext context) {
        // MyEJB null
    }

    @Inject
    private MyEJB myEJB; // << NULL
} 
```

MyEJB 只是一个非接口视图 EJB。

```
@LocalBean
@Stateless
public class MyEJB {
} 
```

谁能告诉我如何将 EJB 注入到 SOAPHandlers 中？

**更新/（也许）答案**

我改为`@Inject`并且`@EJB`它有效。

有什么方法可以使用`@Inject`吗？恕我直言，我看起来更好。:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-16T06:01:56.057

如果我没记错的话，`SOAPHandler`s 在 Web 服务调用之前被调用。根据 CDI 规范（请参阅[范围和上下文](http://docs.jboss.org/cdi/spec/1.0/html_single/#contexts)），在 Web 服务上下文中，所有正常范围*仅*在 Web 服务调用期间处于活动状态。除了所有的普通作用域之外，还有`@Dependent`伪作用域。除非另有说明，否则这是默认范围。它的生命周期取决于正常范围之一，因此不能单独存在。

现在，一个无状态的 EJB，因为它没有与 CDI 相关的注释，它是自动的`@Dependent`，并且不能在`@Inject`正常范围不活动的任何地方注入（使用）。在您的情况下，在 a 内`SOAPHandler`没有活动范围，因此您不能使用`@Inject`.

使用`@EJB`，没有错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-06T06:41:59.257

如果您使用 CDI "@named" 注释来注释您的肥皂处理程序类，您可以注入任何 EJB 组件。通过这样做，您的soap 处理程序类成为一个容器管理的bean，并且您开始能够将其他容器管理的bean 用作EJB。

```
@Named

public class MyHandler implements SOAPHandler'<'SOAPMessageContext'>' {

....

@Inject

private MyEJB myEJB; 

...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-15T11:46:15.123

如果有人像我一样在这里谷歌，可以在 TomEE 中这样做：http: [//svn.apache.org/repos/asf/tomee/tomee/trunk/server/openejb-cxf/src/test/java/ org/apache/openejb/server/cxf/handler/SimpleHandler.java](http://svn.apache.org/repos/asf/tomee/tomee/trunk/server/openejb-cxf/src/test/java/org/apache/openejb/server/cxf/handler/SimpleHandler.java)

# c++ - 模板类的重载运算符<<

> ID：14099353
> 
> 赞同：6
> 
> 时间：2012-12-31T08:31:55.597
> 
> 标签：c++, visual-studio-2010, templates, operator-overloading, friend-function

我在为模板类重载 operator<< 时遇到问题。我正在使用 Visual Studio 2010，这是我的代码。

```
#ifndef _FINITEFIELD
#define _FINITEFIELD
#include<iostream>

namespace Polyff{
    template <class T, T& n> class FiniteField;
    template <class T, T& n> std::ostream& operator<< (std::ostream&, const FiniteField<T,n>&);

    template <class T, T& n> class FiniteField {
    public:
            //some other functions
    private:
        friend std::ostream& operator<< <T,n>(std::ostream& out, const FiniteField<T,n>& obj);
        T _val;
    };

    template <class T, T& n>
    std::ostream& operator<< (std::ostream& out, const FiniteField<T,n>& f) {
        return  out<<f._val;
    }
    //some other definitions
}
#endif 
```

主要我只有

```
#include"FiniteField.h"
#include"Integer.h"
#include<iostream>
using std::cout;
using namespace Polyff;
Integer N(5);

int main () {

    FiniteField<Integer, N> f1;
    cout<< f1;  
} 
```

where`Integer`只是`int`我需要的一些特殊功能的包装。

但是，当我编译上面的代码时，我得到了错误 C2679，它说`binary '<<' : no operator found which takes a right-hand operand of type 'Polyff::FiniteField<T,n>' (or there is no acceptable conversion)`

我还尝试删除朋友声明中的参数，因此代码变为：

```
friend std::ostream& operator<< <> (std::ostream& out, const FiniteField<T,n>& obj); 
```

但这会产生另一个错误：C2785：`'std::ostream &Polyff::operator <<(std::ostream &,const Polyff::FiniteField<T,n> &)' and '<Unknown>' have different return types`

所以我想知道我应该如何更改代码以便编译，为什么？谢谢！

------------------------- 编辑于 2012.12.31 -------------------- --------

代码现在用 g++ 编译。[这](https://github.com/tygeng/PolynomialFIniteField)是github存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T21:23:37.877

这似乎按预期工作：

```
namespace Polyff{
  template <class T, T* n> class FiniteField;
  template <class T, T* n> std::ostream& operator<< (std::ostream&, const FiniteField<T,n>&);

  template <class T, T* n> class FiniteField {
  public:
    //some other functions
  private:
    friend std::ostream& operator<< <T,n>(std::ostream& out, const FiniteField<T,n>& obj);
    T _val;
  };

  template <class T, T* n>
  std::ostream& operator<< (std::ostream& out, const FiniteField<T,n>& f) {
    return  out << f._val.n; // I added the field of my Integer class
  }
  //some other definitions
}

struct Integer{
  Integer() : n(0){}
  Integer(int nn) : n(nn){}
  int n;
};

using std::cout;
using namespace Polyff;
Integer N(5);

int main () {
  FiniteField<Integer, &N> f1;
  cout<< f1;  
} 
```

我只是用模板参数中的对象指针替换了引用，因为指向全局对象（静态或非静态）的指针是编译时（或至少链接时）已知的信息。我不知道接受参考的语言。

请注意，在此示例中，`0`将打印，因为它对应于`_val`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T15:39:32.417

我试图在我的 Visual C++ 2010 上编译你的代码。我得到了和你一样的错误。

实际上，Visual 在您的代码中有两件事不喜欢：

1.  N 不是编译时间常数（这是对的，不是吗？）。
2.  然后问题是参考编译时间常数。因此，您应该在所有模板参数中将“T& n”替换为“T n”。

这让我有了这份工作！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-07T07:36:31.137

您应该只用普通变量（`T n`而不是`T& n`）替换引用。

# c++ - 对基本构造函数的未定义引用

> ID：14099354
> 
> 赞同：1
> 
> 时间：2012-12-31T08:31:56.040
> 
> 标签：c++, inheritance, undefined-reference

> **可能重复：**
> [G++ Cpp 中的“未定义引用”](https://stackoverflow.com/questions/6978241/undefined-reference-to-in-g-cpp)

我有这个标题

```
#ifndef TEST_H_
#define TEST_H_

class TEST
{
public :
    TEST();
};

#endif /* TEST_H_ */ 
```

和这个标题

```
#ifndef TESTS_H_
#define TESTS_H_
#include "TEST.h"

class TESTS : public TEST
{
public :
    TESTS();
};

#endif /* TESTS_H_ */ 
```

我像这样实现了这些标头：

```
#include <iostream>
using namespace std;
#include "TEST.h"
TEST:: TEST()
{
}
int main(int argc, char **argv) {
    return 0;
} 
```

和这个：

```
#include "TESTS.h"

TESTS :: TESTS() : TEST()
{
}

int main(int argc, char **argv) {
    return 0;
} 
```

我得到以下错误：

/tmp/cc4jN1HN.o：在函数`TESTS::TESTS()': TESTS.cpp:(.text+0xd): undefined reference to`TEST::TEST()'

为什么 ？

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T08:39:28.167

这是一个链接器错误。您可能没有编译和链接所有必需的文件。它应该是例如：

```
$ g++ -Wall TEST.cpp TESTS.cpp -o TEST 
```

您还需要摆脱 main() 函数之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:42:03.150

如果这应该是一个程序，它只能有一个`main`功能。如果这应该是两个程序，那么其中的一个程序`TESTS::TESTS`也需要`TEST`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T08:40:08.323

假设您的两个 .cpp 文件分别命名为 TEST.cpp 和 TESTS.cpp，我猜您只是在编译第一个文件，例如使用

```
g++ TESTS.cpp 
```

但是您需要将它们一起编译，例如

```
g++ TEST.cpp TESTS.cpp 
```

否则，TESTS.cpp 在编译时将无法找到 TEST.cpp 中定义的代码。

# android - 替换后获取详细片段内容

> ID：14099358
> 
> 赞同：1
> 
> 时间：2012-12-31T08:32:22.070
> 
> 标签：android, fragment

假设我有一个主详细信息/流程屏幕。我单击项目片段中的项目并`onClickListener`创建了细节片段的新实例（通过用新片段替换当前片段）。细节片段包含一些元素，如`checkBox, Spinner`，......
我希望当我返回到我之前的细节片段时，细节片段的内容被恢复。我不能使用`onsavedinstanceState`，因为没有改变方向或者......所以总是捆绑为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:50:58.383

阅读此[链接](http://developer.android.com/guide/components/fragments.html)

参考这个问题

[android片段-当另一个片段被推到它上面时如何保存片段中的视图状态](https://stackoverflow.com/questions/6787071/android-fragment-how-to-save-states-of-views-in-a-fragment-when-another-fragmen)

# java - java中的帧边界

> ID：14099359
> 
> 赞同：1
> 
> 时间：2012-12-31T08:32:23.987
> 
> 标签：java, swing

如何设置框架边界以使其占据窗口的整个区域？我试着做

```
Frame f=new Frame();
f.setBounds(0,0,Window.WIDTH,Window.Height) 
```

但是这段代码使框架上升，我无法查看标题栏..请帮帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:39:01.950

尝试[`setExtendedState (int state)`](http://docs.oracle.com/javase/6/docs/api/java/awt/Frame.html#setExtendedState%28int%29)与`MAXIMIZED_BOTH`状态一起使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:21:23.023

```
public static void main(String[] args) {
    JFrame frame = new JFrame();

    Dimension min = new Dimension(500,500);
    frame.setMinimumSize(min);

    Toolkit toolkit = Toolkit.getDefaultToolkit();
    Dimension max = toolkit.getScreenSize();
    frame.setMaximumSize(max);

    frame.setVisible(true);
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);

} 
```

试试这个代码。它的工作方式与您在上面的评论中所写的方式相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:07:22.230

试试这个代码：

```
Frame f=new Frame();
f.setBounds(0, 0, Window.HEIGHT,Window.WIDTH);
f.setExtendedState(JFrame.MAXIMIZED_BOTH); 
```

# iphone - Uiwebview中的多个html页面

> ID：14099361
> 
> 赞同：1
> 
> 时间：2012-12-31T08:32:39.690
> 
> 标签：iphone, objective-c, ios, html, ipad

我有多个 html 页面，我需要通过滚动从一个页面导航到另一页面。如果我在滚动视图中使用网络视图，则可以解决上述要求。
但根据苹果的说法，这不是一个好习惯，而且可能会出现很多滚动问题。
谁能知道我的任何替代解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T09:21:57.053

我使用 Uipageviewcontroller 解决了这个问题。谢谢你的支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:48:55.470

使用 UIWebView。将手势识别器添加到 webview。在识别出特定的所需手势后，执行导航到不同站点的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T06:02:23.997

当您在滚动时到达视图的底部时，您可以调用一个函数来附加一个新的 web 视图。
如果您正在加载服务器端制作的 HTML 页面，您可以在到达底部时加载 javascript。在这种情况下，附加部分将由服务器端完成

[在此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html)浏览 webview 委托

（您可以在该功能中做任何您想做的事情，例如附加一个新的 web 视图或导航到一个新的）

# cocoa - 在 Cocoa 中获取当前壁纸

> ID：14099363
> 
> 赞同：10
> 
> 时间：2012-12-31T08:33:00.317
> 
> 标签：cocoa, wallpaper

我正在使用此代码获取当前壁纸：

```
NSURL *imageURL = [[NSWorkspace sharedWorkspace] desktopImageURLForScreen:[NSScreen mainScreen]]; 
```

这工作正常，但是当我将图片文件夹设置为壁纸时（如图所示），这`imageURL`是一个目录，那么在这种情况下如何获取当前壁纸的 USURL？

![在此处输入图像描述](../Images/262b3f1806ea32765497b09e6ae49898.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-03T01:38:57.027

还有另一种方法是通过截取当前壁纸的屏幕截图来获取图像。

```
extension NSImage {

    static func desktopPicture() -> NSImage {

        let windows = CGWindowListCopyWindowInfo(
            CGWindowListOption.OptionOnScreenOnly,
            CGWindowID(0))! as NSArray

        var index = 0
        for var i = 0; i < windows.count; i++  {
            let window = windows[i]

            // we need windows owned by Dock
            let owner = window["kCGWindowOwnerName"] as! String
            if owner != "Dock" {
                continue
            }

            // we need windows named like "Desktop Picture %"
            let name = window["kCGWindowName"] as! String
            if !name.hasPrefix("Desktop Picture") {
                continue
            }

            // wee need the one which belongs to the current screen
            let bounds = window["kCGWindowBounds"] as! NSDictionary
            let x = bounds["X"] as! CGFloat
            if x == NSScreen.mainScreen()!.frame.origin.x {
                index = window["kCGWindowNumber"] as! Int
                break
            }
        }

        let cgImage = CGWindowListCreateImage(
            CGRectZero,
            CGWindowListOption(arrayLiteral: CGWindowListOption.OptionIncludingWindow),
            CGWindowID(index),
            CGWindowImageOption.Default)!

        let image = NSImage(CGImage: cgImage, size: NSScreen.mainScreen()!.frame.size)
        return image
    }        
} 
```

恕我直言，这种方法看起来要简单得多，如果您需要图片，而不是网址。

请注意，在 com.apple.dektop plist 中不再定义墙纸：从 Mavericks 开始，设置已移至 ~/Library/Application Support/Dock/desktoppicture.db。这是 SQLite 文件，“数据”表包含 url。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-03T02:17:11.257

我一直在尝试做同样的事情。您可以通过以下方式获取当前桌面图片 URL：

1.  从 com.apple.spaces 属性列表中获取当前空间 UUID，
2.  在 com.apple.desktop 属性列表中搜索匹配空间，
3.  从 LastName 属性中提取 URL

我仍在处理此问题，但以下代码有时会获得正确的 URL。主要问题是属性列表更新不够频繁，而且我无法强制它们刷新（没有杀死码头）。让我知道如果你想出什么办法！

```
NSDictionary *spacesPLIST = (__bridge NSDictionary *)(CFPreferencesCopyAppValue(CFSTR("SpacesConfiguration"), CFSTR("com.apple.spaces")));
NSDictionary *desktopPLIST = (__bridge NSDictionary *)(CFPreferencesCopyAppValue(CFSTR("Background"), CFSTR("com.apple.desktop")));

NSArray *monitors = [spacesPLIST valueForKeyPath:@"Management Data.Monitors"];
NSInteger monitorIndex = 0;
if ([monitors count] > 1) {
    //search for main (or ask user to select)
}
NSDictionary *monitor = [monitors objectAtIndex:monitorIndex];
NSDictionary *spaces = [desktopPLIST valueForKey:@"spaces"];
NSString *currentSpaceUUID = [monitor valueForKeyPath:@"Current Space.uuid"];
NSDictionary *currentSpace = [spaces valueForKey:currentSpaceUUID];
NSURL *desktopPicturesDirectory = [NSURL fileURLWithPath:[currentSpace valueForKeyPath:@"default.ChangePath"] isDirectory:true];
NSString *desktopPictureName = [currentSpace valueForKeyPath:@"default.LastName"];
NSURL *desktopPictureURL = [NSURL URLWithString:desktopPictureName relativeToURL:desktopPicturesDirectory];
[[NSWorkspace sharedWorkspace] selectFile:[desktopPictureURL path] inFileViewerRootedAtPath:@""]; 
```

# haskell - 将字符串列表列表转换为 Int 列表列表

> ID：14099368
> 
> 赞同：0
> 
> 时间：2012-12-31T08:33:42.567
> 
> 标签：haskell

我有以下列表

```
Prelude> let a = [["1676","17348","10"],["1677","18831","10"],["1677","18896","10"]] 
```

我想把它转换成这样的 Int 列表`[[1676,17348,10],[1677,18831,10],[1677,18896,10]]`

我尝试了以下代码，但它不起作用：

```
f :: [[String]] -> [[Int]]
f [x] = map read (map read x) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:01:39.697

为什么`map (map read)`有效。

内部`(map read)`签名是`[String] -> [Int]`. 所以它会将列表转换为`String`列表`Int`。现在要将其应用于列表列表`String`，您只需使用 提升它`map`，因此`map(map read)`可以工作。在此，您将函数`(map read)`应用于列表中的每个元素`[String]`（或列表列表`String`，如果这样做更好的话）。
你不能有`map read (map read)`，因为类型签名`read`是`String -> Int`。您的外部`read`类型签名是，这不是工作方式。`(map`**`read`**`(map read))``[String]->[Int]``read`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T23:58:12.730

使用[镜头](http://hackage.haskell.org/package/lens-3.7.1.2)库 (Control.Lens) 3.7.1.2的替代解决方案

```
import Control.Lens
f :: [[String]] -> [[Int]]
f = over (traverse.traverse) read 
```

现在，如果我们有：

```
Prelude> let a = [("1676","17348"),("1677","18831"),("1677","18896")]

f :: [[String]] -> [(Int, Int)]
f = over (traverse.both) read 
```

或者对于三个元组，我们需要通过从两者的定义扩展三次来创建一个新函数。

```
Prelude> let a = [("1676","17348","10"),("1677","18831","10"),("1677","18896","10")]

import Control.Lens
import Control.Applicative

thrice f ~(a, a', a'') = (,,) <$> f a, <*> f a' <*> f a''

f :: [[String]] -> [(Int, Int, Int)]
f = over (traverse.thrice) read 
```

# c# - (PPT Add in) PowerPoint 窗口的宽度和高度

> ID：14099377
> 
> 赞同：2
> 
> 时间：2012-12-31T08:34:50.003
> 
> 标签：c#, ms-office, powerpoint, office-addins

在我的 PPT 中添加我想显示一个 WPF 弹出窗口，它应该根据 PPT 窗口居中。

这是我的代码：

```
// get the postion and size of ppt window
float winLeft = Globals.ThisAddIn.Application.Left;
float winTop = Globals.ThisAddIn.Application.Top;
float winWidth = Globals.ThisAddIn.Application.Width;
float winHeight = Globals.ThisAddIn.Application.Height;

// set the position of WPF window            
this.Left = winLeft + (winWidth - this.Width) / 2;
this.Top = winTop + (winHeight - this.Height) / 2; 
```

*我可以使用Globals.ThisAddIn.Application*获取当前的 PPT 窗口，并且以某种方式*Left*，*Top*，*Width*和*Height*与屏幕上的实际大小不同（在我的 PC 中，值较小）

我想知道屏幕上是否有窗口大小到实际大小的转换

# iphone - 在 yelp url 中传递两个术语时签名无效

> ID：14099379
> 
> 赞同：2
> 
> 时间：2012-12-31T08:34:56.873
> 
> 标签：iphone, objective-c, cocoa-touch, yelp

我正在尝试进行 yelp 查询并使用 OAuth Lib

这是代码

```
 NSURL *URL = [NSURL URLWithString:[NSString stringWithFormat:@"http://api.yelp.com/v2/search?term=petrol+restaurants&ll=%f,%f&radius_filter=300",coordinate.latitude,coordinate.longitude]];

  OAConsumer *consumer = [[OAConsumer alloc] initWithKey:consumerKey secret:consumerSecret];
  OAToken *token = [[OAToken alloc] initWithKey:tokenUrl secret:tokenSecret];

  id<OASignatureProviding, NSObject> provider = [[OAHMAC_SHA1SignatureProvider alloc] init];
  NSString *realm = nil;

  OAMutableURLRequest *request = [[OAMutableURLRequest alloc] initWithURL:URL
                                                                 consumer:consumer
                                                                    token:token
                                                                    realm:realm
                                                        signatureProvider:provider];
  [request prepare];

  NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
  connection = nil; 
```

如果查询有一个术语，则代码可以完美运行，`term=petrol`例如但是如果我添加两个术语，就像`term=petrol+fuel`它开始给我错误一样`{"error": {"text": "Signature was invalid", "id": "INVALID_SIGNATURE", "description": "Invalid signature`

这段代码有什么问题？

示例 API 请求

```
http://api.yelp.com/v2/search?term=cream+puffs&location=San+Francisco 
```

iTS 包含一个 + 但当我使用 + 时，它给了我以上错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:20:43.200

我用 UTF8 编码对字符串进行了编码，现在运行良好

# android - Android 搜索：将 FTS 表与普通 SQLite DB 表一起使用

> ID：14099381
> 
> 赞同：7
> 
> 时间：2012-12-31T08:35:05.450
> 
> 标签：android, sqlite, full-text-search

这更像是一个设计问题——而不仅仅是一个编码问题。

我已经有一个将数据存储在 SQLite DB 表中的应用程序。现在我想在其中添加搜索功能。

我知道为了启用搜索功能，我需要 FTS 表。

我拥有的表格（不完全相同，但给出了非常相似的示例）：

**内容表**- 具有以下列：ID、标题、内容、创建者、创建者、更改者、更改者等...

**评论表**- 具有以下列：ID、评论、创建者、创建时间、回复等...

其他表，如用户数据、元数据、类别、标签等。

在这里，我只想要标题、内容和评论的搜索功能。显然，我不需要其他列（如由等创建的列）上的搜索功能。

哪个是最好的选择？

1.  我应该丢弃旧表并只创建 FTS 表吗？
2.  我是否应该继续使用旧表并创建仅支持搜索功能的新 FTS 表。

我在选项 1 中看到的问题是：

*   这是一个颠覆性的变化！
*   我有一组包含许多非文本列的多个表，我不打算在这些表上执行搜索。如何在 FTS 中对它们进行建模？
*   现在我正在利用 RDBMS 的功能，例如 Join 等，如果我完全切换到 FTS 表，我认为我将无法做到！

我在选项 2 中看到的问题是：

*   这将导致重复的表 - 并会消耗更多的内存/空间！
*   每次我在我的 SQL 表中插入/更新/修改一个条目时，我都必须在 FTS 表中进行相同的更改。

那么，最好的选择是什么？有没有任何机构面临过类似的挑战？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-31T11:45:37.083

FTS 表无法有效地查询非 FTS 搜索，因此选项 1 不可用。

整个 FTS 表本质上是一个索引。这是速度/空间的权衡，而且进行全文搜索的能力通常是值得的。为避免两次存储原始文本，请使用[外部内容表](http://www.sqlite.org/fts3.html#section_6_2_2)。

要使原始表和 FTS 表保持同步，请使用触发器。

# java - 在eclipse java中查找并删除所有getter方法

> ID：14099387
> 
> 赞同：0
> 
> 时间：2012-12-31T08:35:40.927
> 
> 标签：java, eclipse, find, replace, eclipse-juno

如何在 eclipse 中找到所有的 getter 方法？

我尝试了 get* with methods ，但它也会返回所有以 get 开头的非 getter 方法。我只想要getter方法。

**编辑：** 我想从工作区中删除所有 getter 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:44:29.727

为了做你想做的事（不管是什么原因），使用**Find Files**更容易：

![在此处输入图像描述](../Images/2fb2fd07cba3607d4e6ecce8e36d1fd6.png)

要缩小范围，您可以使用**Selected resources**或**Enclosure projects**。

**编辑：正则表达式应该有点不同：** `(?s)(is|get)([a-zA-Z0-9]*\(\)\s*\{)`

# php - Python 没有正确重启 linux 进程

> ID：14099392
> 
> 赞同：1
> 
> 时间：2012-12-31T08:36:17.027
> 
> 标签：php, python, linux, process

我有一个 PHP 项目，我使用 Python 将它部署在生产服务器上。

以下是部署计划：

1.  查找新`php.ini`文件（路径已定义）

2.  用这个文件替换当前文件

3.  通过 重启 PHP-FPM 进程`os.system('service php-fastcgi restart')`，其中 php-fastcgi 是进程的真实名称。

Python 在脚本执行期间没有显示任何错误，但 PHP 会以默认配置重新启动。当我尝试手动重新启动它（在 Linux 终端中）时，它运行良好并且新`php.ini`配置成功加载。您能解释一下我的 Python 脚本的这种奇怪行为吗？

**更新**

这是Python脚本的一部分。

```
 php_ini_path_replace = '/etc/php5/cgi/php.ini'
    php_ini_path_source = os.path.join(destination, 'production', 'config', 'main-php.ini')

    try:        # Read source file
        source_conf_file = open(php_ini_path_source, 'r')
        php_ini_lines = source_conf_file.readlines()
    except IOError:
        print('Something is wrong with source file')

    try:
        actual_conf_file = open(php_ini_path_replace, 'w')
        actual_conf_file.writelines( php_ini_lines )
        print('PHP CGI configuration was succesfully changed.\nDon\'t forget to restart the PHP')
    except IOError:
        print('Something is wrong with actual file. May be it\'s in use')

os.system('service php-fastcgi restart') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:02:42.163

写入的数据`writelines()`可能会保留在进程内缓存中，直到文件被刷新（如在 C 中）。之后启动的其他进程可能会看到一个空文件或部分文件。您需要添加的是`source_conf_file.close()`当您完成编写它时。（这是一个烦人的问题，因为当 Python 进程完成时，*文件*会被刷新，并且如果您之后尝试查看它，它看起来是正确的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:11:23.297

使用[`copyfile`](http://docs.python.org/2/library/shutil.html)而不是手动打开和关闭文件。

```
import shutil

php_ini_path_replace = '/etc/php5/cgi/php.ini'
php_ini_path_source = os.path.join(destination, 'production', 'config', 'main-php.ini')

try:
    shutil.copyfile(php_ini_path_source, php_ini_path_replace)
except (Error,IOError):
    print('Error copying the file')

os.system('service php-fastcgi restart') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:17:10.837

我认为您最好将 shell cmd 中的返回码或字符串粘贴，它可以帮助我们找到根本原因。

一些建议：

请记住关闭文件处理程序。您可以使用`with`. 像：

```
try:
    with open(php_ini_path_source, 'r') as source_conf_file:
        php_ini_lines = source_conf_file.readlines()
except IOError:
    print('Something is wrong with source file') 
```

# sql-server - 在 asp.net-mvc 中打开文件

> ID：14099394
> 
> 赞同：3
> 
> 时间：2012-12-31T08:36:34.890
> 
> 标签：sql-server, asp.net-mvc

考虑到我的文件存储在数据库中，我如何在 asp.net mvc 应用程序中打开 .docx、.doc、.xls 或 .ppt 文件。我可以通过编写以下行在记事本中打开一个 css 文件

```
return File(("~/Content/Site.css"), ("text/css")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:38:24.370

File 实用程序方法（用于 FileResult）具有采用流或字节数组的重载（您在 db 中的文件可以作为流或字节数组提供。

```
 var bytes = db.GetFile(); //i'm assuming this method will return a byte array
   return File(bytes, 
     "application/vnd.openxmlformats-officedocument.wordprocessingml.document"); 
```

要使用特定文件名下载文件，您可以使用另一个重载。

```
return File(bytes, 
       "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
        "filename.docx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:50:35.377

在我看来，您不需要“打开文件”，但您需要客户端能够从您的应用程序下载文件，而不是客户端对下载的文件执行任何操作。在大多数情况下，浏览器会显示一个保存/打开对话框，但这是最终用户客户端的工作（也许他安装了一些插件？），而不是站点。

但是，为了告诉网站提供办公室，这里有一个[内容类型列表，](http://www.wrensoft.com/forum/showthread.php?2834-Content-type-for-Office-2007-files-%28DOCX-PPTX-XLSX%29)您感兴趣的是：

```
docx -> "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
pptx -> "application/vnd.openxmlformats-officedocument.presentationml.presentation"
xlsx -> "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" 
```

所以你需要做类似（伪代码）的事情

```
Dictionary<string, string> contentTypes = new Dictionary<string, string>();
contentTypes.Add("docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document");
contentTypes.Add("pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation");
contentTypes.Add("xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");;

string fileType = ...;

var result = new File(fileContents, contentTypes[fileType],"fileName."+fileType);
return result; 
```

# python - 当我们打开子框架时如何隐藏大型机

> ID：14099398
> 
> 赞同：2
> 
> 时间：2012-12-31T08:36:46.637
> 
> 标签：python, wxpython, hide

我正在使用 wxpython 做 GUI，我是 python 新手，..我做了一个 GUI 说 Mainframe，当我点击它时它有一个按钮弹出一个新框架说子框架。

我想知道如何在子框架打开时隐藏大型机以及如何从子框架返回大型机。

希望得到好的建议

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T15:47:54.050

我使用 Pubsub 来做这种事情。我实际上在这里写了一个关于这个过程的教程：http: [//www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/](http://www.blog.pythonlibrary.org/2010/06/27/wxpython-and-pubsub-a-simple-tutorial/)

如果您想从子框架终止程序，那么您需要向父框架发送一条消息，告诉其关闭/销毁自身。您可以尝试将父框架的引用传递给子框架并关闭它，但我怀疑这会导致错误，因为它会在子框架之前破坏父框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T10:47:19.330

使用隐藏和显示方法。
在此示例中，父框架和子框架在按下按钮时相互替换：

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
        wx.Frame.__init__(self, *args, **kwds)
        self.button = wx.Button(self, wx.ID_ANY, "Parent")
        self.child = None

        self.Bind(wx.EVT_BUTTON, self.onbutton, self.button)
        self.SetTitle("myframe")

    def onbutton(self, evt):
        if not self.child:             # if the child frame has not been created yet, 
            self.child = Child(self)   # create it, making it a child of this one (self)
        self.child.Show()              # show the child
        self.Hide()                    # hide this one

class Child(wx.Frame):
    def __init__(self, parent, *args, **kwds):            # note parent outside *args               
        wx.Frame.__init__(self, parent, *args, **kwds)
        self.button = wx.Button(self, wx.ID_ANY, "Child")
        self.parent = parent                              # this is my reference to the
                                                          # hidden parent 
        self.Bind(wx.EVT_BUTTON, self.onbutton, self.button)
        self.SetTitle("child")

    def onbutton(self, evt):
        self.parent.Show()               # show the parent
        self.Hide()                      # hide this one

if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    frame = MyFrame(None, wx.ID_ANY, "")
    app.SetTopWindow(frame)
    frame.Show()
    app.MainLoop() 
```

# javascript - 带有条件的 Javascript 正则表达式

> ID：14099400
> 
> 赞同：-4
> 
> 时间：2012-12-31T08:36:59.583
> 
> 标签：javascript, regex

> **可能重复：**
> [密码验证正则表达式](https://stackoverflow.com/questions/5068843/password-validation-regex)

我需要使用以下策略在 javascript 中进行密码验证。你能告诉我这个的正则表达式吗？我对正则表达式很陌生。

*   密码长度应为 8 到 18 个字符，并且密码应至少满足以下条件中的 3 项：
*   密码应至少包含一个小写字符 (az)
*   密码应至少包含一个大写字符 (az)
*   密码应至少有一个数值（0-9）
*   密码应该有一个特殊字符（即@ . - _ # $ %）

这个你能帮我吗。我无法确定如何提供满足此要求的条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T10:08:11.437

**这个答案只是为了表明在一个正则表达式中执行它是多么不可读。请考虑其他更简洁的替代方案来编写您的代码。**

它可以在 1 个正则表达式中完成，但这很可怕：

```
^(?:(?=.*[a-z])(?=.*\d)(?=.*[^a-zA-Z0-9\x00-\x1f])|(?=.*[a-z])(?=.*[A-Z])(?=.*\d)|(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z0-9\x00-\x1f])|(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9\x00-\x1f])).{8,18}$ 
```

它可以缩短一点，但仍然丑陋：

```
^(?:(?=.*\d)(?=.*[^a-zA-Z0-9\x00-\x1f])(?:(?=.*[a-z])|(?=.*[A-Z]))|(?=.*[a-z])(?=.*[A-Z])(?:(?=.*\d)|(?=.*[^a-zA-Z0-9\x00-\x1f]))).{8,18}$ 
```

您在问题中提到了4个额外条件，它们对应于这些片段：

*   `(?=.*\d)`: 预读数字 (0-9)
*   `(?=.*[a-z])`: 小写英文字母 (az) 的前瞻
*   `(?=.*[A-Z])`: 大写英文字母 (AZ) 的前瞻
*   `(?=.*[^a-zA-Z0-9\x00-\x1f])`: 预读数字和英文字母以外的某些字符。控制字符也被排除在外。

*据我所知*，正则表达式中没有机制可以说匹配 4 个条件中的 3 个。所以我必须列举所有这些条件，这些条件占据了正则表达式的大部分。

`.{8,18}`只需匹配任何字符的 8-18。整个正则表达式都用`^`and锚定`$`。

# java - 在 javascript 中创建 json 对象并将其发送到 servlet

> ID：14099403
> 
> 赞同：1
> 
> 时间：2012-12-31T08:38:10.757
> 
> 标签：java, ajax, json

我正在创建 json 对象来保存数据，然后将其发送到 servlet。但是，当我尝试检索该对象并在 java servlet 中显示其内容时，它会抛出一个错误，提示“A JSONObject 文本必须以 '{' 在 1 [字符 2 第 1 行] 开始”。我不知道如何在 java 中显示从 javascript 发送的 json 对象。这就是我正在做的事情：

**Javascript代码：**

```
var arrayOfObjects = [];
arrayOfObjects.push({"divid":imageinc,"xCordinates":Xcord,"yCordinates":Ycord,"Height":canvasWidth,"Width":canvasHeight, "PageNo":pageNum}); 
```

**显示 Javascript 内容：**

```
for (var i = 0; i < arrayOfObjects.length; i++) {
var object = arrayOfObjects[i];
for (var property in object) {
    alert(property + '=' + object[property]);
}
} 
```

**使用 jquery Ajax 将对象发送到 servlet：**

```
 var param = 'objarray=' +arrayOfObjects;

    $.ajax({
      url: '/ProjectName/finalXmlServGen',
      type: 'POST', 
      dataType: 'json',  
      data: param,
      success: function(result) {
          alert('SUCCESS');
      }
    }); 
```

**一旦我调用ajax，我就会收到成功消息。现在，我在 servlet 中接收到这个对象：**

```
String objarray = request.getParameter("objarray").toString();
try {
        JSONObject jsonObj = new JSONObject(objarray);          

        String xmlString= XML.toString(jsonObj);
        System.out.println("JSON to XML: " + xmlString);
    } catch (JSONException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

我在控制台中看到的消息是错误“JSONObject 文本必须以 '{' at 1 [character 2 line 1] 开头”。如何解析对象并形成 xml 或字符串？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T08:39:10.587

您构建的不是“JSON 对象”，而是一个普通的 javascript 对象。

您必须在 JSON 中编码您的对象：

```
var param = '?objarray=' + JSON.stringify(arrayOfObjects);
$.ajax({
     url: '/ProjectName/finalXmlServGen'+param,
     type: 'POST', 
     dataType: 'json',  
     success: function(result) {
       alert('SUCCESS');
     }
}); 
```

或者您可以让 jQuery 进行编码：

```
$.ajax({
     url: '/ProjectName/finalXmlServGen',
     type: 'POST', 
     dataType: 'json',
     data: {objarray: arrayOfObjects}
     success: function(result) {
       alert('SUCCESS');
     }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:15:49.387

在 Java 方面，您需要首先将 JSON 数组转换为 Java POJO bean，以便能够（轻松）对其进行处理。有多个 API 可以做到这一点；Google GSON 和 Jackson 是两种可能。

JAX-RS API 的参考实现 Jersey 在内部使用 Jackson；根据我的经验，它非常有效。

# git - BitBucket 中的分支是什么以及如何管理它们

> ID：14099408
> 
> 赞同：2
> 
> 时间：2012-12-31T08:38:43.323
> 
> 标签：git, version-control, mercurial, tortoisehg, bitbucket

我有以下问题。我有一个 repo，我最初使用 hg-git 从 github 克隆了它，但是因为我一直在用 mercurial 开发它。原始开发人员也不断更新 repo，所以我们有多个头，我使用 TortoiseHg 合并我想要的任何东西，它工作得非常好（我认为 hg-git 在这里没有什么不同）。但是我有以下问题：现在我已经将我的版本推送到 BitBucket，它有三个分支。

![3 默认](../Images/f39db3b9f03be8b785d92f4b6033cfce.png)

我对此完全感到困惑。git 中的分支不应该是 Hg 中的书签吗？那么为什么 BitBucket 支持分支而不支持书签呢？我真的不明白 Hg 中的分支是什么，为什么我有 3 个，而实际上`hg branch`只列出了一个：`default`？或者它们实际上不是分支，而是书签，只是 BitBucket 这样命名它们不是为了混淆 git 用户？但这是一个 Hg 存储库（我最初创建时设置为 Hg），而且我没有使用 git！

当我尝试时，`hg heads -q`我得到完全相同的结果：

```
235:03d08bcf3144
233:d7fbd581b9e1
227:abda0dc38b93 
```

那么它实际上是 BitBucket 所谓的分支的头部吗？是这样，我如何将它们命名为 Git 中的分支，如默认、分叉等？

我想到的一个想法是在每个头上创建一个书签。我想出了如何将`push -B`它们中的每一个连接到 BitBucket。现在看起来像这样：

![6个分支](../Images/b8eaa486d4d69cb2f0e9859ce0dae840.png)

所以现在它开始变得有意义了，但是我能用 3 个默认值做什么呢？它们为什么在那里，它们实际上是什么？汞中的树枝、头或书签？

为什么我在 BitBucket 设置中只有一个？

![1 在设置](../Images/9c08b280b3c1e0401f0c79159f1320f0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:52:45.473

您在单个**命名**分支“默认”中有三个头，这三个头**是分支**-**匿名**分支

如果你想在“默认”中消除这些分支，你只需在本地存储库中合并头（两个头 - 自己的线并从上游拉出：我不知道没有历史，你如何获得第三个），然后推送到 BitBucket

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-11T12:09:33.630

您可能已经阅读[了 Mercurial 中的分支指南](http://stevelosh.com/blog/2009/08/a-guide-to-branching-in-mercurial/)。这是对不同“种类多变的分支”的一个很好的概述。

所以 git 分支通常被翻译成 hg 书签。也就是说，您继续使用一个带有一个（未）命名分支“默认”的 hg 存储库。在这个默认分支上，每个“git 分支”都有一个书签。

现在 bitbucket 的问题是，它的“hg 书签”支持（当前）不如“git 分支”支持那么完整。

因此，在您撰写本文时，他们根本没有书签支持，只是支持（匿名）头像。大多数书签也是头像，因此您可以为每个头像/书签看到一个哈希值。但是，有些书签不在头上，但它们的所有提交都包含在另一个书签/头中。这些在 bitbucket 上是完全不可见的。

到目前为止，书签在提交视图中显示（及其名称），并且可以在下拉列表中选择。它们不会显示在“分支”选项卡中。通常也无法打开书签的拉取请求。但是，对于作为头像的书签，您可以为该头像打开拉取请求。

另请参阅：[bitbucket 问题：无法从 hg 书签创建拉取请求](https://bitbucket.org/site/master/issue/6705/cant-create-pull-request-from-hg-bookmark)

# django - 如何使用 peterbe 的 django-static 来同时提供静态和媒体服务？

> ID：14099409
> 
> 赞同：0
> 
> 时间：2012-12-31T08:38:47.587
> 
> 标签：django, django-static

注意：这与 django-staticfiles 不同，因为它内置了压缩功能。

我的 /static/ 用于我自己上传的静态文件，而 /media/ 用于用户上传的文件。但是，DJANGO_STATIC_MEDIA_URL 依赖于所有静态文件都在一个 url 下这一事实。

我错过了什么吗？还是我必须在每个模板上手动设置 {{ MEDIA_URL }} 和 {{ STATIC_URL }}？

另外，我该如何设置，以便将 django-static 生成的符号链接完全上传到 S3？

我正在使用 Django 1.4，我当前的配置是：

```
DJANGO_STATIC = True
DJANGO_STATIC_MEDIA_URL = '//s3.amazonaws.com/%s/static/' % AWS_STORAGE_BUCKET_NAME
DJANGO_STATIC_MEDIA_ROOTS = [os.path.join(SITE_ROOT, 'static')] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T22:48:14.190

虽然我没有使用过这个应用程序，但在阅读了文档后，似乎 DJANGO_STATIC_MEDIA_URL 是一种快捷方式，可以最大限度地减少在定义图像 src 属性的位置时包含 {{ MEDIA_URL }} 的需要。

您定义 DJANGO_STATIC_MEDIA_URL (www.mysite.com/media)，然后您可以访问上传媒体的位置，例如

```
<img src="{% staticfile "/foo.png" %}"/> 
```

而不必将位置写为：

```
<img src="{{ MEDIA_URL }}{% staticfile "/foo.png" %}"/> 
```

因此，要引用您的 css 和 js 静态文件，请继续使用 {{ STATIC_URL }}。要引用您上传的媒体，请定义 DJANGO_STATIC_MEDIA_URL 并仅使用 {% staticfile %} 模板标签，或者像往常一样仅使用 {{ MEDIA_URL }}。

# javascript - 如果对函数的调用在 javascript 的同一个模块中，我是否需要先定义一个函数才能执行它？

> ID：14099410
> 
> 赞同：0
> 
> 时间：2012-12-31T08:38:52.763
> 
> 标签：javascript, jquery, typescript

我有以下 javascript：

```
var User;
(function (User) {
    (function (AccessControls) {
        User.AccessControls.loginFormSubmit();
        function loginFormSubmit() {
            $('#article').on('submit', '#loginForm form', function () {
                var $form = $(this);
                if(!$form.valid()) {
                    return false;
                }
                var myData = $form.serialize();
                var myUrl = $form.attr("action");
                return false;
            });
        }
        AccessControls.loginFormSubmit = loginFormSubmit;
    })(User.AccessControls || (User.AccessControls = {}));
    var AccessControls = User.AccessControls;
})(User || (User = {}));
//@ sourceMappingURL=loginFormSubmit.js.map 
```

我得到的确切错误是：

```
Uncaught TypeError: Object #<Object> has no method 'loginFormSubmit' 
```

谁能解释为什么我会收到这个错误？

如果有帮助，这是我的打字稿代码：

```
module User {

    export module AccessControls {

        loginFormSubmit();

        export function loginFormSubmit() {

            $('#article').on('submit', '#loginForm form', function () {
                var $form = $(this);

                // if there are validation errors do not continue.
                if (!$form.valid()) {
                    return false;
                }

                // get the form data
                var myData = $form.serialize();

                // get the url to post to from the form's action attribute.
                var myUrl = $form.attr("action");

                // execute the post
                //$.ajax({
                //    url: myUrl,
                //    data: myData
                //success: function(data) {
                //    // on success, write the returned article content into the article element
                //    $('#article').html(data);
                //}
                return false;
            });

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:07:14.797

是否还需要`User.`在下一行？

```
AccessControls.loginFormSubmit = loginFormSubmit; 
```

# android - Android 透明度错误？安卓：颜色/透明

> ID：14099414
> 
> 赞同：3
> 
> 时间：2012-12-31T08:39:16.040
> 
> 标签：android, transparency

大多数 > 4.0 设备上的随机错误

有时 .xml 文件中设置的透明度显示为白色/浅灰色阴影。几乎所有东西都会发生这种情况， TextView ， ImageView ， Button ， 相对布局......

有谁之前经历过这个吗 ？

我能找到的只是 Jelly Bean 中的一个透明度错误，它发生在辅助帐户上，与此无关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T16:30:41.393

我遇到了同样的问题，但能够通过使用 8 位颜色代码解决该问题，其中前两位数字表示透明度级别（00 表示完全透明，FF 表示完全不透明）。

使用#00000000 会产生完全透明的颜色，并且可以用作 android:color/transparent 的直接替代品。

# c++ - MoSync C++ 跨平台开发

> ID：14099415
> 
> 赞同：1
> 
> 时间：2012-12-31T08:39:24.643
> 
> 标签：c++, mosync

[同步](http://www.mosync.com/)

1.  我可以在使用 MoSync IDE 时使用 C++11 功能（例如智能指针）吗？
2.  MosSync IDE 使用的底层编译器是什么？
3.  在 MoSync 上投入时间和金钱是否值得？够成熟吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:30:39.143

在阅读了各种论坛上的 MoSync 以及在 youtube 上观看了一些视频之后，我决定冒险一试。

安装 MoSync IDE（修改后的 Eclipse IDE）。它正在使用 GCC PIPIL 编译器 v2:11:50:55:Aug 26 2009 (O2)

A1。尚不支持 C++11。

以下代码编译失败

```
void keyReleaseEvent(int keyCode, int nativeCode)
{
    auto lambda = [](const int & val)->int{return val*val;};
    int alpha = lambda(10);
} 
```

A2。GCC PIPIL 编译器 v2:11:50:55:2009 年 8 月 26 日 (O2)

A3。没有把握。将在一段时间后回来并更新此答案。

# c++ - 禁用openGL中的图像剔除

> ID：14099417
> 
> 赞同：0
> 
> 时间：2012-12-31T08:39:32.923
> 
> 标签：c++, algorithm, opengl

我正在创建一个具有两层的圆形球体：
一层具有上面的浅色层（半径 300）
，一层具有较深的颜色层（半径 298）

当我在窗口上绘制这个球体时，我得到了正确绘制的球体。

以下代码不完全正确`openGL`，但`openGL`人们理解它不会有任何问题

ofImage 球形图像；GLUquadricObj *quadric;

ofPushMatrix();

```
 //Sphere dark image
    ofRotateX(90);
    ofPushStyle();
    ofSetColor(43,64,105);
    sphericalImage.getTextureReference().bind();
    gluSphere(quadric, 298, 100, 100);
    ofPopStyle();

    //Sphere light image
    ofPushStyle();
    ofSetColor(255,255,255);
    sphericalImage.getTextureReference().bind();
    gluSphere(quadric, 300, 100, 100);
    ofPopStyle();
    sphericalImage.unbind(); 
```

流行矩阵（）；

然而，问题在于某些部分，前图像（较浅的图像）实际上覆盖/覆盖了后球形图像（并且较暗的部分不完全可见）。当用相机旋转球体时，有时该区域会根据旋转角度/轴变得可见。我想禁用它，这样就不会发生这种效果。

我早些时候在想这是否与 openGL 中的 face-cullin 有关，但我通过设置禁用了`glDisable(GL_CULL_FACE)`它并且它没有任何效果。`glEnable(GL_DEPTH_TEST);`也设置了。关于如何禁用它以使两个球形图像都可见的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T08:46:12.927

您的问题是，半透明表面的混合与深度顺序无关。启用混合后，您必须从远到近对脸部进行排序才能完成此工作。深度缓冲区不会帮助你。

幸运的是，如果您的形状是凸形，则可以通过绘制每个凸形 2 次来完成排序。一次剔除正面（这会绘制远处的背面），然后剔除背面（仅绘制近处的正面）。如果您以类似 matroshka 的方式排列几何图形，您首先在外面向内工作，正面被剔除，然后再向外工作，背面被剔除。

修改你的代码它看起来像这样

```
glEnable(GL_CULL_FACE);
glCullFace(GL_FRONT);

//Globe light image
ofPushStyle();
ofSetColor(255,255,255);
sphericalImage.getTextureReference().bind();
gluSphere(quadric, 300, 100, 100);
ofPopStyle();
sphericalImage.unbind(); 

//Sphere dark image
ofRotateX(90);
ofPushStyle();
ofSetColor(43,64,105);
sphericalImage.getTextureReference().bind();
gluSphere(quadric, 298, 100, 100);

glCullFace(GL_BACK);

gluSphere(quadric, 298, 100, 100);
ofPopStyle();

//Globe light image
ofPushStyle();
ofSetColor(255,255,255);
sphericalImage.getTextureReference().bind();
gluSphere(quadric, 300, 100, 100);
ofPopStyle();
sphericalImage.unbind(); 
```

# jsf-2 - ace:fileEntry - 更改上传文件的文件名

> ID：14099418
> 
> 赞同：1
> 
> 时间：2012-12-31T08:39:34.940
> 
> 标签：jsf-2, icefaces-3

我正在使用 ace:fileEntry 组件上传 pdf 文件。我的问题我不知道如何在上传文档时更改文件名。该文件使用原始文件名上传。我知道如果我设置 useOriginalFilename=false，它将有一个唯一的名称，但我希望文件系统中上传的文件应该具有我想要传递的自定义文件名。

我的xhtml代码如下

```
<ace:fileEntry id="file-entry" label="Attachment"
                    absolutePath="STR_UPLOADED_FILES"
                    maxFileCount="1" 
                    maxFileCountMessage="Limited to 1 files uploaded concurrently." 
                    fileEntryListener="#{strformbean.fileuploadListener}" 

                    maxFileSize="6291456" 
                    maxFileSizeMessage="Submitted file is too large.Max size allowed is 6MB" 
                    maxTotalSize="6291456" 
                    maxTotalSizeMessage="Total size of submitted files is too large." 
                    required="false" 
                    requiredMessage="The file is required to submit this form." 
                    useOriginalFilename="true"  
                    useSessionSubdir="false" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:27:46.050

您听起来好像您希望上传文件的临时存储位置可用作上传文件的永久存储位置，因此您不需要触摸它。这是错误的！为了节省服务器内存使用，上传文件最初最终的位置实际上是*临时的。*它将在间隔或启动/关闭时进行清洁。

在侦听器方法中，您应该自己获取上传文件的内容，`InputStream`或者`byte[]`您​​应该将其写入永久存储位置。在此步骤中，您可以自由指定自己的文件名。

另请参阅有关 PrimeFaces 的密切相关的问题`<p:fileUpload>`（其源代码 ICEfaces 大部分~~被盗~~ ~~复制粘贴~~重新分发）[p:fileUpload 上传的文件保存在哪里以及如何更改它？](https://stackoverflow.com/questions/11829958/where-is-the-file-uploaded-using-primefaces-netbeans-in-local/11830143#11830143)有关如何正确处理它的详细答案。

# mysql - 在 JavaFX 2.0 中检索 mysql 数据库中的数据并将其显示在 TableView 中的正确方法？

> ID：14099420
> 
> 赞同：0
> 
> 时间：2012-12-31T08:39:43.207
> 
> 标签：mysql, jdbc, tableview, javafx-2

正如标题所说，我需要更多建议来正确实现在 JavaFX 2.0 中检索和显示数据到 TableView。

我已经看到了这个相关的[问题](https://stackoverflow.com/questions/10563966/javafx-2-0-tableview-in-fxml-with-data-from-database)，它提到了使用 DATAFX，但是我找不到关于如何使用 JDBC 数据源实现它的教程。

请帮助我非常需要它。

* * *

PS：我已经有工作代码（硬编码），但我仍在寻找一种方便的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-15T01:07:49.977

这是一个工作示例：

```
public void start(Stage stage) throws ClassNotFoundException, SQLException {
    Class.forName("com.mysql.jdbc.Driver");

    Scene scene =new Scene(new Group(),800,600);

    JdbcDataSource dataSource=new JdbcDataSource("jdbc:mysql://localhost:3306/mybasename?zeroDateTimeBehavior=convertToNull&user=username&password=userpassword", "clients", "descr");
    TableView tableView=new TableView();
    tableView.setItems(dataSource.getData());
    tableView.getColumns().addAll(dataSource.getColumns());
    ((Group)scene.getRoot()).getChildren().add(tableView);

    stage.setScene(scene);
    stage.show();
} 
```

# java - struts.xml 中定义的动作被调用，而动作包中的动作没有被调用

> ID：14099422
> 
> 赞同：2
> 
> 时间：2012-12-31T08:39:55.687
> 
> 标签：java, struts2, jboss, annotations, jboss7.x

我正在将我的应用程序服务器从 Jboss 4.2 迁移到 7.1。我在 Struts 配置中收到以下错误。`Action`在内部定义的`struts.xml`被调用并且`Action`包中存在的动作没有被调用。我还发布了我`Action`的`struts.xml`和堆栈跟踪：

```
13:56:06,503 ERROR [org.apache.struts2.dispatcher.Dispatcher] (http-localhost-127.0.0.1-8080-2) Could not find action or result: There is no Action mapped for namespace / and action name loginValidate. - [unknown location]
    at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:178) [xwork-core-2.1.6.jar:]
    at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39) [struts2-core-2.1.8.1.jar:]
    at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:47) [xwork-core-2.1.6.jar:]
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:478) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77) [struts2-core-2.1.8.1.jar:]
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91) [struts2-core-2.1.8.1.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:147) [spring-orm-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76) [spring-web-3.1.2.RELEASE.jar:3.1.2.RELEASE]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.jpa.interceptor.WebNonTxEmCloserValve.invoke(WebNonTxEmCloserValve.java:50) [jboss-as-jpa-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_20] 
```

**我的`Struts.xml`：**

```
<constant name="struts.convention.action.packages" value="com.infotech.project.web.action" />
<constant name="struts.convention.package.locators" value="actions,action" />

<constant name="struts.convention.result.path" value="/WEB-INF/jsp" />

<constant name="struts.convention.default.parent.package" value="project" />

<package name="default" namespace="/" extends="struts-default,json-default" />
<constant name="struts.devMode" value="true" />

<package name="project"
    extends="struts-default,json-default,jfreechart-default, jasperreports-default"
    namespace="/">
          <!-- more action names goes here -->
     </package> 
```

**我的`LoginAction.java`：**

```
package com.infotech.project.web.action;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;

@SuppressWarnings("serial")
@Result(type="json")
public class LoginAction extends ActionSupport implements SessionAware {

@SuppressWarnings("unchecked")
@SkipValidation
@Action(value = "/loginValidate", results = { @Result(name = "success", params = {"ignoreHierarchy","false"}) })
public String validateUserLogin() { 
     // validation code goes here
 }
    } 
```

**更新到 Struts 2.3.4 后：**

```
ERROR [com.opensymphony.xwork2.util.finder.ClassFinder] (MSC service thread 1-1) Unable to read class [com.lntinfotech.virtuoso.web.action.DttjoinAction]: java.lang.NoClassDefFoundError: com/opensymphony/xwork2/util/finder/ClassFinder$InfoBuildingVisitor
    at com.opensymphony.xwork2.util.finder.ClassFinder.readClassDef(ClassFinder.java:782) [xwork-core-2.3.4.jar:2.3.4]
    at com.opensymphony.xwork2.util.finder.ClassFinder.<init>(ClassFinder.java:165) [xwork-core-2.3.4.jar:2.3.4]
    at org.apache.struts2.convention.PackageBasedActionConfigBuilder.findActions(PackageBasedActionConfigBuilder.java:386) [struts2-convention-plugin-2.3.4.jar:2.3.4]
    at org.apache.struts2.convention.PackageBasedActionConfigBuilder.buildActionConfigs(PackageBasedActionConfigBuilder.java:344) [struts2-convention-plugin-2.3.4.jar:2.3.4]
    at org.apache.struts2.convention.ClasspathPackageProvider.loadPackages(ClasspathPackageProvider.java:53) [struts2-convention-plugin-2.3.4.jar:2.3.4]
    at com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:245) [xwork-core-2.3.4.jar:2.3.4]
    at com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66) [xwork-core-2.3.4.jar:2.3.4]
    at org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390) [struts2-core-2.3.4.jar:2.3.4]
    at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437) [struts2-core-2.3.4.jar:2.3.4]
    at org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74) [struts2-core-2.3.4.jar:2.3.4]
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51) [struts2-core-2.3.4.jar:2.3.4]
    at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:447) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3269) [jbossweb-7.0.13.Final.jar:]
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:3865) [jbossweb-7.0.13.Final.jar:]
    at org.jboss.as.web.deployment.WebDeploymentService.start(WebDeploymentService.java:90) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [rt.jar:1.6.0_20]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [rt.jar:1.6.0_20]
    at java.lang.Thread.run(Thread.java:619) [rt.jar:1.6.0_20] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:14:08.087

我认为问题可能来自您在同一个名称空间上有两个包的事实。尝试删除一个包，或更改其中一个包的名称空间（可能是第一个，即为空）

* * *

编辑：

这是**[错误 WW-3662：](https://issues.apache.org/jira/browse/WW-3662)**[（Struts2）约定插件在 jboss-7.0.0 中不起作用](https://issues.apache.org/jira/browse/WW-3662)

如您所见，它已在最新版本中得到解决。

因此，如果您需要迁移到 JBoss 7，则需要迁移到 Struts 2.3.3 或更高版本。

希望有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:22:58.710

用于`@Namespace("/")`您的操作。并使用`@Action(value = "loginValidate"`，以便可以从动作映射中找到您的动作。如果仍然没有帮助尝试**删除**

```
<constant name="struts.convention.action.packages" value="com.infotech.project.web.action" />
<constant name="struts.convention.package.locators" value="actions,action" />

<constant name="struts.convention.result.path" value="/WEB-INF/jsp" /> 
```

**编辑：**

如果您使用约定插件，为什么在 struts.xml 中有包。从 XML 中删除所有重复的配置。使用`@ParentPackage("default")`或

```
<constant name="struts.convention.default.parent.package" value="default"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-07T06:51:34.047

按照 Roman C 的说明，将以下行添加到您的 struts.xml

```
<constant name="struts.convention.package.locators.basePackage" value="com.infotech.project.web.action"/> 
```

我建议使用 config-browser 插件来确保您的注释操作在调用它们之前成功加载。

# iphone - 使 ios 6 应用程序与 ios 5 兼容

> ID：14099423
> 
> 赞同：3
> 
> 时间：2012-12-31T08:40:01.503
> 
> 标签：iphone, ios, ios5, ios6, backwards-compatibility

我正在开发针对 iOS 6 版本的 Xcode 4.5 应用程序。我想让该应用程序向后兼容 iOS 5 和所有 iOS 5 版本。我怎样才能做到这一点？我的应用程序已经完成，它现在只针对 iOS 6。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:50:58.067

运行`xcode`，按`Command + comma (,)`for`preferences`然后选择`Download`选项卡并安装您要测试的模拟器。检查下图以获得更多帮助

![在此处输入图像描述](../Images/fde850a78934078d0678ea7cebfcdd58.png)

像这样更改项目目标。

![在此处输入图像描述](../Images/7759be7bcb9254550ec33da607bf7d4e.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T08:53:30.330

尝试将部署目标更改为 5.0，它可能已被选为 6.0。

或从顶部选择“iPhone 5.0 模拟器”或“iPad 5.0 模拟器”或“iPhone 5.1 模拟器”或“iPad 5.1 模拟器”等。

如果以上都不起作用，那么转到顶部的 Xcode，转到首选项（或按 Command + 逗号）按钮，它将打开首选项。

转到下载并转到文档，根据需要检查并安装模拟器。

问候，

雷诺琼斯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T08:58:44.050

首先下载所有模拟器。

然后从左侧导航栏中选择项目名称，然后在“构建设置”下选择“iOS部署目标”为iOS“4.3”，这样您就可以在较低版本的5.0中运行您的应用程序。

希望对您有所帮助。

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-04T18:59:42.767

我有一个 IOS 应用程序，当我将框架更改为 5.0 时，奇怪的错误开始出现。我还发现我无法在 IOS 5.0 ipad 上安装 IOS 6.1 应用程序。我可以安装 5.0 版本然后更新它。

这些错误似乎与 MYSQL 相关，我已经重新测试过，现在一切都很好，但我不确定我做了什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-10T05:55:32.970

这就是我所做的，我将 info.plist 文件从 ios5 更改为 ios6，以便我可以运行 ios6 应用程序，您可以使用 ifile 来执行此操作。警告：如果你在 cydia 上安装一个应用程序，它可能会删除你不受限制的越狱，因为它认为你在 ios6 上运行

# c - 使用 cppDepend 绘制 C 源代码的调用图

> ID：14099432
> 
> 赞同：1
> 
> 时间：2012-12-31T08:41:02.397
> 
> 标签：c, dependencies, cppdepend

我在使用 cppDepend 工具时遇到问题。我有一个用 C 语言编写的源代码，我需要绘制它的依赖关系或调用图。cppDepend 的编译器的源代码扩展名设置为 c;cpp;cxx;cc 但是当我想在 C 中打开源代码时，文件选择框只让我选择 C++ 中的源代码。

我应该怎么办？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T11:45:27.897

在 Linux 中？为什么不使用其他选项？必须是 cppDepend 吗？看看[cflow](http://www.gnu.org/software/cflow/)，[callgrind](http://valgrind.org/docs/manual/cl-manual.html)（我最喜欢的），甚至[gperf](http://code.google.com/p/gperftools/?redir=1)（它以图形形式输出一个调用图！）

# c++ - Win32 - 为什么没有任何东西被绘制到屏幕上？

> ID：14099434
> 
> 赞同：4
> 
> 时间：2012-12-31T08:41:22.533
> 
> 标签：c++, winapi

我正在尝试使用屏幕外缓冲区，以便我可以跟踪 WM_PAINT 之前/之后对屏幕的更改，并通过 WM_PAINT 中的一行复制它们。这是我必须设置图形的一些代码：

```
hdc = GetDC(hWnd);
hdcmem = CreateCompatibleDC(hdc);
hbcmem = CreateCompatibleDC(hdcmem);

// Load bitmaps
bg = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_BACKGROUND));
side = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_SIDEINFO));
mainCont = LoadBitmap(hInst, MAKEINTRESOURCE(IDB_GAME_CONT));
if(bg == NULL || side == NULL || mainCont == NULL)
            ThrowError("A bitmap failed to load.");

// Background
hdcold = (HBITMAP)SelectObject(hbcmem, bg);
BitBlt(hdcmem, 0, 0, 237, 196, hbcmem, 0, 0, SRCCOPY);
BitBlt(hdcmem, 237, 0, 237, 196, hbcmem, 0, 0, SRCCOPY);
BitBlt(hdcmem, 237 * 2, 0, 237, 196, hbcmem, 0, 0, SRCCOPY);
BitBlt(hdcmem, 0, 196, 237, 196, hbcmem, 0, 0, SRCCOPY);
BitBlt(hdcmem, 237, 196, 237, 196, hbcmem, 0, 0, SRCCOPY);
BitBlt(hdcmem, 237 * 2, 196, 237, 196, hbcmem, 0, 0, SRCCOPY);

// Side Info
hdcold = (HBITMAP)SelectObject(hbcmem, side);
BitBlt(hdcmem, 339, 26, 154, 300, hbcmem, 0, 0, SRCCOPY);

// Main Game Container
hdcold = (HBITMAP)SelectObject(hbcmem, mainCont);
BitBlt(hdcmem, 26, 26, 300, 300, hbcmem, 0, 0, SRCCOPY); 
```

hdc、hdcmem、hbcmem、hdcold、bg、side 和 mainCont 是先前声明的。它们的范围包括此文件中的所有内容（包括此代码和 WM_PAINT 中的代码）。

这是 WM_PAINT 中的代码：

```
PAINTSTRUCT ps;
BeginPaint(hWnd, &ps);

BitBlt(hdc, 0, 0, 518, 401, hdcmem, 0, 0, SRCCOPY);

EndPaint(hWnd, &ps); 
```

出于某种原因，没有任何东西被绘制到屏幕上。我绞尽脑汁想弄清楚。指向正确方向的指针将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T08:48:38.130

首先为您的内存设备上下文创建一个兼容的位图，然后将该位图选择到内存 dc，它应该可以工作！

```
hdc = GetDC(hWnd); // used only to create compatibles.
hdcmem = CreateCompatibleDC(hdc);
hbcmem = CreateCompatibleDC(hdc);

// Create client-area-sized compatible bitmap.
RECT rc;
GetClientRect(hWnd, &rc);
HBITMAP hbm_memdc = CreateComptibleBitmap(hdc, rc.right, rc.bottom);
HBITMAP hbm_memdc_old = (HBITMAP)SelectObject(hdcmem, hbm_memdc)

ReleaseDC(hdc); // this no longer needed

// now start rendering into hdcmem... 
```

您需要保留选择的旧位图句柄，以便在关闭时销毁您的自定义句柄之前将其放回原处。你如何管理这完全取决于你。

# python - Python 子图为公共轴标签留出空间

> ID：14099435
> 
> 赞同：3
> 
> 时间：2012-12-31T08:41:22.960
> 
> 标签：python, matplotlib, axis-labels, subplot

我有以下代码在一个图中制作了四个子图：

```
f = figure( figsize=(7,7) )
f.add_axes([0.2,0.175,0.75,0.75])
f.subplots_adjust(left=0.15)
f.clf()
ax = f.add_subplot(111)
ax1 = f.add_subplot(221)
ax2 = f.add_subplot(222)
ax3 = f.add_subplot(223)
ax4 = f.add_subplot(224)
ax.xaxis.set_major_formatter( NullFormatter() )
ax.yaxis.set_major_formatter( NullFormatter() )
ax2.xaxis.set_major_formatter( NullFormatter() )
ax2.yaxis.set_major_formatter( NullFormatter() )
ax1.xaxis.set_major_formatter( NullFormatter() )
ax4.yaxis.set_major_formatter( NullFormatter() )
f.subplots_adjust(wspace=0,hspace=0)

ax1.plot(tbins[0:24], mean_yszth1, color='r', label='mean', marker='.', lw=3)
ax2.plot(tbins[0:24], mean_ysz1, color='r', label='mean', marker='.', lw=3)
ax3.plot(tbins[0:24], mean_yszth2, color='r', label='mean', marker='.', lw=3)
ax4.plot(tbins[0:24], mean_ysz2, color='r', label='mean', marker='.', lw=3)

ax1.set_xlim(0,12)
ax1.set_ylim(-0.5,0.5)
ax2.set_xlim(0,12)
ax2.set_ylim(-0.5,0.5)
ax3.set_xlim(0,12)
ax3.set_ylim(-0.5,0.5)
ax4.set_xlim(0,12)
ax4.set_ylim(-0.5,0.5)
ax.set_xlabel(r"$\mathrm{Time\ since\ last\ merger\ (Gyr)}$")
ax.set_ylabel(r"$\mathrm{\Delta Y_{SZ}/Y_{SZ}}$") 
```

结果如下所示： ![](../Images/fc0376b0d560a47e15660946c31bd091.png)

如您所见，轴标签与刻度重叠。我想将公共轴标签从轴上移开一点。我无法弄清楚如何最好地做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T11:17:29.177

使用`labelpad`参数`set_ylabel`和`set_xlabel`方法：

```
Definition: ax.set_ylabel(self, ylabel, fontdict=None, labelpad=None, **kwargs)
Docstring:
Call signature::

  set_ylabel(ylabel, fontdict=None, labelpad=None, **kwargs)

Set the label for the yaxis

*labelpad* is the spacing in points between the label and the y-axis 
```

这就是我将 labelpad 设置为 50 (x) 和 60 (y) 的结果。使用默认配置时，我不得不手动修改图形边距，因为标签位于图形框架之外。

![在此处输入图像描述](../Images/8ed43d8ef94e5b640388182d65149de9.png)

**编辑**
从您的评论看来，您可能正在使用一个非常旧版本的 matplotlib。Labelpad 参数从许多版本开始就在 matplotlib 中，但设置它的方式可能不同（我不确定）。
在网上，我发现[了一些](http://matplotlib.1069221.n5.nabble.com/distance-between-tick-label-and-xlabel-td14800.html)指向这种用法的评论：

```
ax.xaxis.LABELPAD = 8  # default is 5 
```

我也见过这样的：

```
ax.xaxis.labelpad = 8 
```

# sql-server-2005 - SQL Server 中的唯一行

> ID：14099438
> 
> 赞同：1
> 
> 时间：2012-12-31T08:41:35.780
> 
> 标签：sql-server-2005

我想显示 SQL Server 数据库中的唯一行。我有两个名为`UploadedData`and的表`DummyReportDetail`。我想加入这些表，但我没有使用 distinct 获得唯一的行。

这是我的查询：

```
SELECT DISTINCT 
    D.TokenNo, D.UploadDate AS "Date", D.[Time], 
    D.SMSContent AS [Message], D.SMSType AS [SMS Type], 
    (SELECT COUNT(d.MobNo) FROM dbo.DummyReportDetail AS d 
     WHERE d.UploadDate = '31/12/2012' AND d.UserID = '2' 
       AND d.UserType = 'Reseller' AND d.TokenNo = U.TokenNo) AS "Count",
    D.DStatus AS "Status" 
FROM    
    dbo.DummyReportDetail AS D 
INNER JOIN 
    dbo.UploadedData AS U ON D.TokenNo = U.TokenNo 
WHERE 
    D.UploadDate = '31/12/2012' AND D.UserID = '2' 
    AND D.UserType = 'Reseller' AND D.TokenNo = U.TokenNo  
ORDER BY 
    D.TokenNo DESC 
```

我对此查询的输出是：

```
Token-4 31/12/2012   11:23:59 AM   संपादकीय Unicode  2  SUBMITED
Token-4 31/12/2012   11:24:9 AM    संपादकीय Unicode  2  SUBMITED
Token-3 31/12/2012   10:21:31 AM   TestSMS Normal  1 SUBMITED 
```

但我想要这个输出：

```
Token-4 31/12/2012  11:24:9 AM  संपादकीय    Unicode  2  SUBMITED
Token-3 31/12/2012 10:21:31 AM  TestSMS    Normal   1  SUBMITED 
```

请帮助我...提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T08:57:30.533

```
 select distinct D.TokenNo, D.UploadDate as "Date",D.[Time], D.SMSContent as "Message",D.SMSType as "SMS Type", 
        (select count (d.MobNo) from dbo.DummyReportDetail as d 
           where d.UploadDate='31/12/2012' and d.UserID='2' 
           and d.UserType='Reseller' and d.TokenNo=U.TokenNo) as "Count"
          ,D.DStatus as "Status"
    from dbo.DummyReportDetail as D join dbo.UploadedData as U
    on D.TokenNo=U.TokenNo 
    where D.UploadDate='31/12/2012' and D.UserID='2' 
    and D.UserType='Reseller' and D.TokenNo=U.TokenNo  group by D.tokenNo  order by D.TokenNo desc 
```

按 T​​okenNo 添加分组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:57:50.080

您将需要应用分组以实现您所需要的。在这种情况下，您需要对每一列进行分组，并获得最大日期：

```
select D.TokenNo, D.[Time], D.SMSContent as "Message",D.SMSType as "SMS Type", 
(select count (d.MobNo) from dbo.DummyReportDetail as d 
   where d.UploadDate='31/12/2012' and d.UserID='2' 
   and d.UserType='Reseller' and d.TokenNo=U.TokenNo) as "Count"
  ,D.DStatus as "Status", MAX(D.UploadDate) as "Date"
from dbo.DummyReportDetail as D join dbo.UploadedData as U
on D.TokenNo=U.TokenNo 
where D.UploadDate='31/12/2012' and D.UserID='2'
group by D.TokenNo, D.[Time], D.SMSContent, D.SMSType, Count, D.DStatus
and D.UserType='Reseller' and D.TokenNo=U.TokenNo  order by D.TokenNo desc 
```

您可能还需要考虑重写您的查询以使用分组来替换“计数”字段的当前内部查询。连接表将比您当前的查询更有效，因为连接执行一次，而现在您的子查询为您在结果集中获得的每一行运行一次。

# javascript - 在 Android 上禁用自动完成

> ID：14099440
> 
> 赞同：5
> 
> 时间：2012-12-31T08:41:40.153
> 
> 标签：javascript, android, html, cordova, autocomplete

我有一个用 HTML5 构建并包装在 PhoneGap 中的应用程序..

我想**禁用**Android 的自动完成功能（键盘的）

启动应用程序时，

我怎样才能做到这一点？

*提前致谢*

我的 PhoneGap Manifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.MyApp.XXX"
    android:versionCode="1"
    android:versionName="1.0" >
    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />
<supports-screens 
    android:largeScreens="true" 
    android:normalScreens="true" 
    android:smallScreens="true" 
    android:resizeable="true" 
    android:anyDensity="true" />
<uses-permission android:name="android.permission.VIBRATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.BROADCAST_STICKY" />
    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.MyApp.XXX.MainActivity"
            android:label="@string/app_name"
            android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale" >

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:53:42.797

试试这个 ：

```
<input type="text" id="myText" name="myText" autocomplete='off'/> 
```

或者

```
someFormElm.setAttribute( "autocomplete", "off" ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-06T12:31:58.450

输入中的'oninput'事件，运行以下函数：

```
function RefreshAutoComplete(elm) {
    elm.keyup();
    elm.focus();
} 
```

我手动运行自动完成，它可以工作

谢谢大家的帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T12:32:53.667

您可以将此 CSS 行添加到必须关闭自动完成功能的元素中：

```
-webkit-user-modify: read-write-plaintext-only; 
```

在 Xperia 手机中，它将禁用自动完成、字典等...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T11:56:35.907

这是不可能的。[Android有](https://play.google.com/store/search?q=keyboard&c=apps) [很多](https://play.google.com/store/apps/details?id=com.jb.gokeyboard&feature=search_result) [可用的](https://play.google.com/store/apps/details?id=com.dasur.slideit&feature=search_result)[键盘](https://play.google.com/store/apps/details?id=com.touchtype.swiftkey.phone.trial&feature=search_result) ，据我所知，没有标准的方法告诉他们避免使用 HTML5 的任何自动完成功能。正如 Arash 建议的那样，您可以使用原生 android 元素来执行此操作，但 HTML5 没有为此提供接口。您可以禁用的唯一想法是浏览器内自动完成，就像其他人建议的那样使用。`autocomplete=off`

我想你需要问问自己，如果他们不能使用他们最喜欢的键盘快速打字功能，他们可能已经付了很多钱，这是否真的会增强用户体验？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T15:03:47.503

试试这个：

**HTML：**

```
<input type="text" id="textSample"/> 
```

**JS：**

```
$("#textSample").autocomplete({ disabled: true }); 
```

或者

```
$("#textSample").autocomplete({
  change: function(event, ui) {
       $(this).autocomplete("destroy");
  }
}); 
```

或者

查看有关[如何关闭表单自动完成功能的更多信息？](https://developer.mozilla.org/en-US/docs/Mozilla/How_to_Turn_Off_Form_Autocompletion?redirectlocale=en-US&redirectslug=How_to_Turn_Off_Form_Autocompletion)

# php - yii中view.php和_view.php的区别

> ID：14099441
> 
> 赞同：4
> 
> 时间：2012-12-31T08:41:55.393
> 
> 标签：php, yii

Yii 中的 view.php 和 _view.php 有什么区别？

我应该在哪里使用 _view 或在 Yii 中查看？

通过 render() 或 renderPartial() 我可以同时渲染两者吗？性能上没有问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T10:35:14.963

它们只是文件名，但默认情况下 view.php 与 a 一起使用，`render()`而 _view.php 与 a 一起使用`renderPartial()`（在默认的 Yii Web 应用程序中）。

所以如果我们坚持这个约定，任何由 渲染的视图`render()`都是一个“普通”的文件名，而任何用 a 渲染的视图`renderPartial()`都会有一个前缀 _underscore。

这是 render 和 renderPartial 之间的区别（来自[这里](https://stackoverflow.com/questions/10379817/yii-difference-between-rendering-functions)）：

**`render()`**通常用于呈现与用户在应用程序中看到的“页面”相对应的视图。它首先渲染您指定的视图，然后渲染当前控制器操作的布局（如果适用），将第一次渲染的结果放入布局中。然后它执行输出处理（此时意味着自动插入任何必要`<script>`的标签并更新动态内容）并最终输出结果。

**`renderPartial()`**通常用于渲染页面的“片段”。主要区别在`render()`于此方法不会*将*渲染结果放置在布局中。默认情况下，它也不执行输出处理，但您可以使用`$processOutput`参数覆盖此行为。

# android - 如何使用 AndroidWebDriver 将数据写入 Android 测试项目中计算机 D 盘中的 excel 文件？

> ID：14099442
> 
> 赞同：0
> 
> 时间：2012-12-31T08:41:54.737
> 
> 标签：android, android-emulator, selenium-webdriver, robotium

**代码：**

```
String xf = "D:/AndroidResults/Results.xls";
        File outFile = new File(xf); 
        FileInputStream myStream1 = new FileInputStream(outFile);
        HSSFWorkbook myWBook = new HSSFWorkbook (myStream1);
        HSSFSheet oSheet = myWBook.getSheet("Results"); 
        HSSFRow row = oSheet.getRow(rowNum); 
        HSSFCell cell = row.getCell(colNum);
        cell.setCellType(HSSFCell.CELL_TYPE_STRING);
        cell.setCellValue(xlData);
        FileOutputStream fOut = new FileOutputStream(outFile);
        myWBook.write(fOut);
        fOut.flush();
        fOut.close(); 
```

**例外：**
`java.io.FileNotFoundException: /D:/AndroidResults/Results.xls (No such file or directory)`

可能是它试图在移动设备而不是计算机中查找文件。但是如何处理这种情况，我必须将数据写入计算机中的 excel。

请帮忙。

感谢：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T11:07:43.577

您可以使用 adb pull 命令。制作一个批处理文件并编写此命令 adb pull "本地文件夹路径" "DDMS 路径"。您只需双击即可查看文件。

# c# - 将图像绑定到 Metro 应用程序中的 ListView（win 8 应用程序）

> ID：14099445
> 
> 赞同：0
> 
> 时间：2012-12-31T08:42:30.167
> 
> 标签：c#, image, listview, microsoft-metro, bind

我有一个图像列表，我需要将图像绑定到列表视图内的图像控制器。

我的 Xaml 代码

```
<ListView Name="lbxItems" SelectionChanged="ListBox_SelectionChanged_1" ItemsSource="{Binding Srcimg}">
                                <StackPanel>
                            <Image Name="item" Height="113" Source="{Binding}" Stretch="None"/>
                                </StackPanel>
                    </ListView> 
```

代码隐藏文件

```
public void BindImgs()
        {
        //Some code here

            AClass a=new AClass();
            foreach (var photo in Photos)
            {
                Uri uri = new Uri(photo.ToString(), UriKind.Absolute); 
                a.Srcimg.Add(uri);
            }
            lbxItems.DataContext =a;
        }

    public class AClass
        {
            private List<Uri> _srcimg = new List<Uri>();

            public List<Uri> Srcimg
            {
                get { return _srcimg; }
            }
        } 
```

当我运行应用程序时，它只显示 uri 字符串路径而不是显示图像。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:52:55.810

Change your Xaml to this and you should have more luck:-)

```
<ListView ItemsSource="{Binding Srcimg}">
    <ListView.ItemTemplate>
        <DataTemplate>
            <Image  Height="113" Source="{Binding}" Stretch="None"/>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

# iis-express - 运行 IIS Express “静默”，即没有 HTTP 控制台输出？

> ID：14099449
> 
> 赞同：0
> 
> 时间：2012-12-31T08:43:13.017
> 
> 标签：iis-express

我正在测试 Web 应用程序的响应能力，并希望隔离任何慢速区域（数据库访问、javascript 等），并希望确保 IIS Express 不会因其所有控制台输出而减慢速度。

有没有一种方法可以在没有该输出的情况下运行 IIS Express，甚至根本看不到控制台？

我已经尝试过该`/trace:error`选项，但它仍然为每个请求输出行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-02T17:37:18.877

以下应该可以解决问题：

创建一个 VBScript：**IIS-Express-silent.vbs**

```
Dim App,Site   
Site = "[YOUR SITE NAME]"

If Len(Site) < 1 Then
    Site = WScript.Arguments(0)
End If
App = """%PROGRAMFILES%\IIS Express\iisexpress""" & _
          " /site:" & Site

If Len(Site) > 0 Then
    Set WshShell = CreateObject("WScript.Shell")
    WshShell.Run App, 0
    Set WshShell = Nothing
End If 
```

如果您仅作为 localhost 运行 IIS Express，并且您不（打算）使用 SSL，那么您就准备好了。只需从位于您的用户配置文件中的 applicationhost.config 添加[您**的****站点名称] ：**

 **```
<sites>
    <site name="[YOUR SITE NAME]" id="1" serverAutoStart="true">
    ...
</sites> 
```

如果您需要提升权限，则必须在同一目录中创建第二个文件*（VBScripts 不能直接以这种方式运行）*：**Run-as-Administrator.bat**

```
@echo off
pushd %~dp0
cscript IIS-Express-silent.vbs [YOUR SITE NAME] 
```

请将您的 VBScript 中的*站点*留空，然后将名称添加到您的批处理文件中。

鼠标右键 - “以管理员身份运行” - 你就完成了:-)**

# c# - 工厂模式可以这样使用吗？

> ID：14099450
> 
> 赞同：3
> 
> 时间：2012-12-31T08:43:26.997
> 
> 标签：c#, design-patterns, dependencies, factory

在我的程序中，一些对象需要其他对象（依赖），我使用 Factory 作为我的创建模式。

现在，我该如何解决一个简单的依赖问题？

这是我为解决我的问题所做的一个例子。我想知道将所需的对象发送到 Create 方法是否不是什么可怕的错误。

```
//AbstractBackground
// - SpecialBackground
// - ImageBackground
// - NormalBackground
class Screen{
    List<AbstractBackground> list;
    Cursor cursor;
    ContentManager content;

    public void load(string[] backgroundTypes){
        //is this okay? --------------->
        AbstractBackground background = BackgroundFactory.Create(backgroundTypes[0], cursor, content);
        list.add(background);
    }
}

class BackgroundFactory{
    static public AbstractBackground Create(string type, Cursor cursor, ContentManager content){

        if( type.Equals("special") ){
            return new SpecialBackground(cursor, content);
        }

        if( type.Equals("image") ){
            return new ImageBackground(content);
        }

        if( type.Equals("normal") ){
            return new NormalBackground();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T09:05:58.387

它是功能性的，但是，如果添加更多类型，它可能会变得很麻烦。
根据我个人对简单工厂的偏好，实现将是：

```
enum BackgroundFactoryType
{
  Special,
  Image,
  Normal,
}

static class BackgroundFactory{

  static Dictionary<BackgroundFactoryType, Func<Cursor, ContentManager, AbstractBackground>> constructors;

  static BackgroundFactory()
  {
    //initialize the constructor funcs
    constructors = new Dictionary<BackgroundFactoryType, Func<Cursor, ContentManager, AbstractBackground>>();
    constructors.Add(BackgroundFactoryType.Special, (cursor, content) => new SpecialBackground(cursor, content));
    constructors.Add(BackgroundFactoryType.Image, (_, content) => new ImageBackground(content));
    constructors.Add(BackgroundFactoryType.Normal, (_, __) => new NormalBackground());
  }

  static public AbstractBackground Create(BackgroundFactoryType type, Cursor cursor, ContentManager content)
  {
    if (!constructors.ContainsKey(type))
      throw new ArgumentException("the type is bogus");

    return constructors[type](cursor, content);
  }
} 
```

或者你可以简单地做：

```
static class BackgroundFactory{

  static public AbstractBackground Create(BackgroundFactoryType type, Cursor cursor, ContentManager content)
  {
    switch (type)
    {
      case BackgroundFactoryType.Special:
        return new SpecialBackground(cursor, content);
      case BackgroundFactoryType.Image:
        return new ImageBackground(content);
      case BackgroundFactoryType.Normal:
        return new NormalBackground();
      default:
        throw new ArgumentException("the type is bogus");
    }
  }
} 
```

这种方法的一个很好的副作用是只需要一点点工作就可以使这个东西配置驱动而不是硬编码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T08:50:43.103

简单的回答，看起来不错。如果您抽象地考虑这一点，您就是通过 create 方法将对象注入到构造函数中。这种技术没有问题，我推荐。

稍后，如果您需要更改实现，您可以根据需要创建其他创建方法，而不会破坏任何内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T08:54:03.320

您的代码中没有什么比这更难看的了，除了如果您的依赖树增长，您创建的工厂方法将变得复杂。为了分解具有各种和明确的依赖关系的类型，您可能最好选择`IoC`基于工厂。通过在容器中注册依赖项，您将拥有具有所需依赖项的自动注入构造函数。

# facebook - 自定义 Facebook 评论框

> ID：14099455
> 
> 赞同：1
> 
> 时间：2012-12-31T08:44:35.027
> 
> 标签：facebook, facebook-graph-api, comments, facebook-comments

我想为此构建自定义的 Facebook 评论框，我已经做了很多研发，但我被困在如何针对我网站不同页面的 url 发表评论。

我想要 Facebook 的评论框插件提供的类似功能，就像我将自定义 Facebook 评论框放在我的页面模板上，它适用于从该模板继承的所有页面。这意味着每个动态页面都会根据其 url 有自己的评论框。

如果有人为我提供实现此功能的步骤会更好。我已经浏览了 Facebook 开发者论坛并学习了针对对象 ID 的评论，但我想从页面 Url 开始评论框，因为 Facebook 的评论框需要页面的 href。

**我的测试工作：**

当我通过 Facebook 评论框插件针对 url 发布评论并使用 Graph api 获取所有评论时，所有评论都成功列出。

但是当我尝试使用图形 api 针对提到的 url 发布评论时，我在这里得到了异常。

[https://lh3.googleusercontent.com/-KckTuX8DifY/UOFP_e-5ayI/AAAAAAAAAJc/e1wYHZGN9Nc/s629/Get+and+Post+Comments.png](https://lh3.googleusercontent.com/-KckTuX8DifY/UOFP_e-5ayI/AAAAAAAAAJc/e1wYHZGN9Nc/s629/Get+and+Post+Comments.png)

我需要以下问题的答案。

我将如何开始评论页面的网址。

我的自定义评论框模板如下所示

[https://lh4.googleusercontent.com/-7iP0_Xi22zk/UOFOn_g_Q7I/AAAAAAAAAJI/FlnDhDTSyZs/s622/Custom+FB+comments+box.jpg](https://lh4.googleusercontent.com/-7iP0_Xi22zk/UOFOn_g_Q7I/AAAAAAAAAJI/FlnDhDTSyZs/s622/Custom+FB+comments+box.jpg)

谢谢

# php - PHP 和 Apache2 中的奇怪行为：不同服务器中的不同输出

> ID：14099457
> 
> 赞同：0
> 
> 时间：2012-12-31T08:45:03.677
> 
> 标签：php, apache, mamp, lamp

我在 Mac 和 Linux 中运行的 PHP 代码中遇到了不同的输出。

我有 2 台服务器运行以下代码：

```
 $ltt = ((ord($str[7]) << 24) | (ord($str[8]) << 16) | (ord($str[9]) << 8) | (ord($str[10]))) / 1000000; 
```

即使`ord(str[ ])`输出是相同的：

```
[7] = 254
[8] = 26
[9] = 22 
[10] = 216 
```

但是，在运行 php 5.3.6 的 MAMP 堆栈 (Mac) 上，如果 $ltt 最初应该是负数，它会返回`4263.12265`（不正确）。

在运行相同 php 版本的 LAMP 堆栈（Ubuntu）上，它将返回确切的负值`-31.84465`。

这只发生在负数..

**更新地址。信息：**

*   一个 var 转储给出`þØçï_Kstring(25) "þØçï_K"`
*   bin2hex 给出`000e1b00000000fe1a16d806e707ef0000045f0000004b0000`

将函数简化为仅包含数字输入，输出**仍然不同**：

```
$ltt = (254 << 24 | 26 << 16 |  22 << 8 | 216)/ 1000000; 
```

`4263.12265`在 MAMP 和`-31.84465`LAMP 上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:25:23.663

这是一个 32 位与 64 位的问题。

因为您的最高有效字节大于 127，所以在 32 位平台上，由于整数溢出，这被解释为负值 - 最高有效位已设置。在 64 位平台上不是这样。

解决方案是使用`pack()`，`unpack()`因此您可以指定应该对整数进行签名。**编辑** ~~修复了这个代码示例~~见编辑2

```
$packed = pack('C*', ord($str[7]), ord($str[8]), ord($str[9]), ord($str[10]));
$unpacked = unpack('l', $packed);
$lat = current($unpacked); 
```

...但是您也应该意识到这不适用于小端架构，因为字节顺序将是错误的。您可以简单地颠倒打包字节的顺序来解决这个问题，但我只是想围绕一个无处不在的解决方案来解决问题。

**编辑 2**

好的，我花了一些时间来解决这个问题，但我们最终到达了那里：

您需要做的是，如果设置了最高有效位，或者结果与未设置最低有效 32 位但其余部分设置的数字的结果。因此以下适用于 32 位和 64 位：

```
<?php

// The input bytes as ints
$bytes = array(254, 26, 22, 216);

// The operand to OR with at the end
$op = $bytes[0] & 0x80 ? (~0 << 16) << 16 : 0;

// Do the bitwise thang
$lat = (($bytes[0] << 24) | ($bytes[1] << 16) | ($bytes[2] << 8) | $bytes[3]) | $op;

// Convert to float for latitude
$lat /= 1000000;

echo $lat; 
```

# azure - SQL Azure 0.0.0.0 防火墙规则

> ID：14099462
> 
> 赞同：2
> 
> 时间：2012-12-31T08:45:59.980
> 
> 标签：azure, azure-sql-database

在安全性方面，是否有利于在特定 IP 地址（或范围）上设置 SQL Azure 服务器的防火墙规则，而不是设置 0.0.0.0 防火墙“允许 Microsoft 服务访问此服务器”规则？据我所知 0.0.0.0 允许来自 Azure 本地 IP 的所有访问（但当然要实际连接到数据库，需要提供特定的服务器名称和登录用户名/密码）。使用 0.0.0.0 使配置更容易，因为无需跟踪角色实例 IP 即可启用 SQL Azure 服务器连接，但它确实存在一些风险。

我想听听你的意见。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:55:23.580

Microsoft 在内部使用 0.0.0.0 设置来允许他们的服务连接到您的 SQL 实例。当然，理论上你的 SQL 数据库对任何 Windows Azure 机器都是开放的，但它不像潜在的连接面是整个世界。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-28T08:03:54.633

首先，

允许的 Windows Azure 服务 - 将仅允许 azure 服务访问数据库。

第二，

为了能够从任何其他端点访问数据库服务器，您需要添加防火墙规则以允许这些特定 IP 范围。如果要从 ip 为 132.99.xx.xx 的机器连接，则需要添加一条规则，起始 IP 和结束 IP 为 132.99.xx.xx

添加必要的范围始终是一个好习惯，以避免任何攻击机会

希望这可以帮助！

# playframework - Play async/await 中的会话/上下文丢失

> ID：14099463
> 
> 赞同：1
> 
> 时间：2012-12-31T08:46:01.833
> 
> 标签：playframework, playframework-1.x

似乎该`await()`方法失去了上下文：

```
public static action() {
    session.put("key", "value");
    await(someAsyncCall());

    // Now, for some reason the session doesn't have "key"
} 
```

这是一个已知的问题？任何解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T13:10:24.643

那是不幸的。由于 session 是一个线程局部变量，它不会在新线程之间传递（在您的示例中发生）。令人误解和令人惊讶的是，当代码在 await 方法之后恢复时，会有一个会话变量（但它是一个不同的实例）。

我会说这是一个错误 - 我希望在 await 调用周围维护会话上下文。

也就是说，我明白为什么这很棘手。当您使用 await 时，您实际上是在至少三个线程中编写代码。之前的部分、作业/异步调用和之后的部分。追根溯源，真是奇妙。

即便如此，我同意应该保持请求的会话状态，所以我建议你提出一个问题：[https ://play.lighthouseapp.com/projects/57987-p​​lay-framework/tickets/new](https://play.lighthouseapp.com/projects/57987-play-framework/tickets/new)

下面是一种通过异步调用传递会话映射来复制会话映射的解决方法。您可以编写一个始终执行此操作的简单包装器 Job。

```
public static void test() {
    Logger.debug("before: Session.current() " + Session.current());
    Session.current().put("key", new Date().toString());
    Job<Session> async = new Job<Session>() {
        Session sessionPassed = Session.current();

        @Override
        public Session doJobWithResult() throws Exception {
            Logger.debug("during job: Session.current() "
                    + Session.current());
            Logger.debug("during job: sessionPassed " + sessionPassed);
            Thread.sleep(1000L);

            // you could do something like this to wrap a real 
            // async call and maintain the session context.  If 
            // the async job returns a result, you'll have to return 
            // a map or POJO with the session and the result.

            actualJob.now();  

            return sessionPassed;
        }
    };
    Session sessionReturned = await(async.now());
    Logger.debug("after: Session.current() ="
            + (Session.current() == null ? "no session" : Session.current()));
    Logger.debug("after: " + sessionReturned);

    Session.current().all().putAll(sessionReturned.all());

    Logger.debug("finally: "
            + (Session.current() == null ? "no session" : Session.current()));
} 
```

编辑：

或者，您可以使用 Cache.set() 存储会话映射 - 这可能比传递它更干净。

顺便说一句，我很少使用 session 来存储用户数据。每个 cookie（即会话正在运行的内容）都会减慢您的 http 请求（了解 cookie 的工作原理）。我更喜欢做的是使用缓存在服务器端创建一个地图（例如 Cache.set(session.getId(),userDataMap)）。显然每个用例可能不同，但我更喜欢这种方式来维护用户状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T22:19:46.863

Play 1.2.5 的解决方法，如果只需要保留会话 ID，请使用以下内容代替直接调用 await(...)

```
protected static <T> T awaitSessionAware(Future<T> future) {
    final String sessionId = session.getId();
    T result = await(future);
    session.put("___ID", sessionId);
    return result;
} 
```

[上面的代码是此处](http://play.lighthouseapp.com/projects/57987/tickets/1180-session-id-changes-with-suspended-requests)概述的问题的解决方法，其中在 await(..) 调用之后创建新会话而不是重用现有会话。对原始会话 ID 的引用用于在等待调用后重置会话 ID（即 session.put("___ID", sessionId) 将会话 ID 重置为其等待前的值）。

# linux-device-driver - 为什么驱动程序代码首先执行？

> ID：14099465
> 
> 赞同：1
> 
> 时间：2012-12-31T08:46:15.953
> 
> 标签：linux-device-driver

我正在使用 ioctl() 从应用程序调用驱动程序函数。通过使用日志，我发现我的内核代码首先执行。例如，

在我的应用程序中

printf("调用驱动程序"); ioctl();

在我的驱动程序中

printk("驱动调用");

当我执行我的代码时，首先它打印“驱动程序调用”然后“调用驱动程序”我有什么理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:08:46.980

默认情况下，`stdout`流是缓冲的，并且数据仅在换行符之后（或执行结束）显示。在这种情况下，显示是在`ioctl`调用之后完成的。

您可以在通话`fflush`后强制使用显示。`printf`

```
printf("Calling Driver");
fflush(stdout);
ioctl(); 
```

有关更多详细信息，您可以阅读[这些答案](https://stackoverflow.com/q/1716296/1109005)。

# asp.net - ASP.NET WebApi 中异步调用的本地化

> ID：14099467
> 
> 赞同：2
> 
> 时间：2012-12-31T08:46:26.137
> 
> 标签：asp.net, asynchronous, asp.net-web-api

嗨–我计划基于“Accept-Language”标头处理服务器端本地化的错误字符串等，方法是根据该标头设置 CurrentUICulture，但显然它不会流经异步调用，下面是示例代码来说明问题，是否有任何默认方式来处理异步调用的本地化？

```
 public async Task<HttpResponseMessage> GetAsync()
    {            
        //set the current ui culture, to say "fr-FR", based on "Accept-Language" header
        Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("**fr-FR**");  

       var task = httpClient.PutAsync(endpoint, content)            

        //do some processing

        var res  = await task;

        var culture = Thread.CurrentThread.CurrentUICulture.Name; **//ITS NOT necessarily fr-FR**

        //do some more processing
        //and handle localizations etc.

        return res;
    } 
```

对于存在真正异步操作的情况，我正在寻找一种更清洁/无缝的本地化处理方式。对于等待调用之后的代码

编辑：为清楚起见，将 Task.Run() 替换为 httpClient.PutAsync

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:09:46.387

`Task.Run`并且`Task.Factory.StartNew`没有任何上下文。这是预期的行为。使用`await`关键字时会保留上下文。所以这是你可以做的：

```
public static async Task<IEnumerable<string>> GetAsync()
{            
    //set the current ui culture, to say "fr-FR", based on "Accept-Language" header
    Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("fr-FR");

    //do some processing

    var s = await GetSomething();

    var culture = Thread.CurrentThread.CurrentUICulture.Name; //It's ja-JP

    return new[] { s, s };
}

public static Task<string> GetSomething()
{
    var cuture = Thread.CurrentThread.CurrentUICulture.Name; // It's fr-FR
    var tcs = new TaskCompletionSource<string>();
    Thread.CurrentThread.CurrentUICulture = CultureInfo.GetCultureInfo("ja-JP");
    tcs.SetResult("<something>");
    return tcs.Task;
} 
```

# c - 如果用户输入非数字字符，如何仅扫描整数并重复阅读？

> ID：14099473
> 
> 赞同：14
> 
> 时间：2012-12-31T08:47:04.117
> 
> 标签：c, validation, user-input

下面是一些 C 代码，试图阻止用户输入小于 0 或大于 23 的字符或整数。

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    const char *input;
    char *iPtr;
    int count = 0;
    int rows;

    printf("Enter an integer: ");
    scanf("%s", input);
    rows = strtol(input, &iPtr, 0);
    while( *iPtr != '\0') // Check if any character has been inserted
    {
        printf("Enter an integer between 1 and 23: ");
        scanf("%s", input);
    }
    while(0 < rows && rows < 24) // check if the user input is within the boundaries
    {
        printf("Select an integer from 1 to 23: ");
        scanf("%s", input);
    }  
    while (count != rows)  
    {  
        /* Do some stuff */  
    }  
    return 0;  
} 
```

我做到了一半，一个小的俯卧撑将不胜感激。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-31T08:51:46.923

使用`scanf("%d",&rows)`代替`scanf("%s",input)`

这允许您直接从标准输入获取整数值，而无需转换为 int。

如果用户输入一个包含非数字字符的字符串，那么您必须在下一个之前清理您的标准输入`scanf("%d",&rows)`。

您的代码可能如下所示：

```
#include <stdio.h>  
#include <stdlib.h> 

int clean_stdin()
{
    while (getchar()!='\n');
    return 1;
}

int main(void)  
{ 
    int rows =0;  
    char c;
    do
    {  
        printf("\nEnter an integer from 1 to 23: ");

    } while (((scanf("%d%c", &rows, &c)!=2 || c!='\n') && clean_stdin()) || rows<1 || rows>23);

    return 0;  
} 
```

**解释**

1)

```
scanf("%d%c", &rows, &c) 
```

这意味着期望用户输入一个整数并接近它一个非数字字符。

***Example1：***如果用户输入`aaddk`然后`ENTER`，scanf 将返回 0。Nothing capted

***示例 2：***如果用户输入`45`然后`ENTER`，scanf 将返回 2（2 个元素被捕获）。这`%d`是字幕`45`和`%c`字幕`\n`

***示例 3：***如果用户输入`45aaadd`然后`ENTER`，scanf 将返回 2（2 个元素被捕获）。这`%d`是字幕`45`和`%c`字幕`a`

2)

```
(scanf("%d%c", &rows, &c)!=2 || c!='\n') 
```

***在example1中：***这个条件是`TRUE`因为scanf return`0`(`!=2`)

***在示例 2 中：***这种情况是`FALSE`因为 scanf 返回`2`并且`c == '\n'`

***在示例 3 中：***这种情况是`TRUE`因为 scanf 返回`2`并且`c == 'a' (!='\n')`

3)

```
((scanf("%d%c", &rows, &c)!=2 || c!='\n') && clean_stdin()) 
```

`clean_stdin()`总是`TRUE`因为函数总是返回`1`

***在示例 1 中：*** is`(scanf("%d%c", &rows, &c)!=2 || c!='\n')`所以`TRUE`应该`&&`检查之后的条件，所以`clean_stdin()`将执行并且整个条件是`TRUE`

***在示例 2 中：*** The`(scanf("%d%c", &rows, &c)!=2 || c!='\n')`is`FALSE`so that the condition after the`&&`will not check (因为它的结果是整个条件将是`FALSE`) 所以`clean_stdin()`不会执行并且整个条件是`FALSE`

***在示例 3 中：*** is`(scanf("%d%c", &rows, &c)!=2 || c!='\n')`所以`TRUE`应该`&&`检查之后的条件，所以`clean_stdin()`将执行并且整个条件是`TRUE`

所以你可以说`clean_stdin()`只有当用户输入一个包含非数字字符的字符串时才会执行。

并且仅当用户输入 an而没有其他内容时，此条件`((scanf("%d%c", &rows, &c)!=2 || c!='\n') && clean_stdin())`才会返回`FALSE``integer`

如果条件`((scanf("%d%c", &rows, &c)!=2 || c!='\n') && clean_stdin())`是`FALSE`并且`integer`介于和之间`1`，`23`则`while`循环将中断，否则`while`循环将继续

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T10:54:27.627

```
#include <stdio.h>
main()
{
    char str[100];
    int num;
    while(1) {
        printf("Enter a number: ");
        scanf("%[^0-9]%d",str,&num);
        printf("You entered the number %d\n",num);
    }
    return 0;
} 
```

`%[^0-9]`in`scanf()`吞噬了所有不在 and 之间`0`的东西`9`。基本上它会清除非数字的输入流并将其放入`str`. 好吧，非数字序列的长度限制为 100。以下`%d`仅选择输入流中的整数并将其放入`num`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T10:13:42.323

您可以创建一个读取 1 到 23 之间的整数的函数，如果非整数则返回 0

例如

```
int getInt()
{
  int n = 0;
  char buffer[128];
  fgets(buffer,sizeof(buffer),stdin);
  n = atoi(buffer); 
  return ( n > 23 || n < 1 ) ? 0 : n;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-18T21:14:15.957

```
char check1[10], check2[10];
int foo;

do{
  printf(">> ");
  scanf(" %s", check1);
  foo = strtol(check1, NULL, 10); // convert the string to decimal number
  sprintf(check2, "%d", foo); // re-convert "foo" to string for comparison
} while (!(strcmp(check1, check2) == 0 && 0 < foo && foo < 24)); // repeat if the input is not number 
```

如果输入是数字，则可以`foo`用作输入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T08:55:11.787

您将需要`strtol`在您要求用户重试的循环内部重复调用。事实上，如果你让循环 a`do { ... } while(...);`而不是 while，你不会得到相同类型的重复事情两次的行为。

您还应该格式化您的代码，以便可以看到代码在循环内的位置而不是循环内的位置。

# mysql - 改进我的查询

> ID：14099477
> 
> 赞同：2
> 
> 时间：2012-12-31T08:47:26.390
> 
> 标签：mysql, select, join

我确定有一种方法可以`enswitch_mobile_users`更好地提取数据，而不是我如何提取数据

> Enswitch_User_ID、Os_Version、Phone_Type

那么如何改进和改进这个查询呢？

```
$sql = "SELECT Substring(purchase.`date`,12,8)               AS `Time`, 
                  purchase.`item`                                    AS `Package`,
                  Cast(Substring(purchase.`item`, 12) AS UNSIGNED)   AS `Credit`,
                  purchase.`user`                                    AS `Mobile_User_ID`,

                  (SELECT user_id FROM enswitch_mobile_users WHERE `Mobile_User_ID` = enswitch_mobile_users.`id`) AS `Enswitch_User_ID`,
                  (SELECT os_version FROM enswitch_mobile_users WHERE `Mobile_User_ID` = enswitch_mobile_users.`id`) AS `Os_Version`,
                  (SELECT phone_type FROM enswitch_mobile_users WHERE `Mobile_User_ID` = enswitch_mobile_users.`id`) AS `Phone_Type`,

                  (SELECT enswitch_id FROM enswitch_users WHERE `Enswitch_User_ID` = enswitch_users.`id`)  AS `Enswitch_ID`

                        FROM   (SELECT item, date, user
                                    FROM enswitch_android_purchases 
                                    UNION 
                                    SELECT item, date, user
                                    FROM enswitch_iphone_purchases) AS `purchase` 
                        WHERE Substring(purchase.`date`,1,10) = :date
                ORDER  BY `Time` DESC"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:07:53.980

试试这个：

```
SELECT SUBSTRING(p.date,12,8) AS TIME, p.item AS Package, COUNT(1) AS Sales, 
       CAST(SUBSTRING(p.item, 12) AS UNSIGNED) AS Credit, p.user AS Mobile_User_ID, 
       e.user_id Enswitch_User_ID, e.os_version Os_Version, e.phone_type Phone_Type, 
       eu.enswitch_id Enswitch_ID
FROM (SELECT item, DATE, USER FROM enswitch_android_purchases 
      UNION
      SELECT item, DATE, USER FROM enswitch_iphone_purchases) AS p 
LEFT JOIN enswitch_mobile_users e ON p.user = e.id
LEFT JOIN enswitch_users eu ON e.user_id = eu.id
WHERE SUBSTRING(p.date,1,10) := DATE
ORDER  BY TIME DESC; 
```

# ajax - 值更改侦听器在 primefaces 日历中不起作用

> ID：14099478
> 
> 赞同：23
> 
> 时间：2012-12-31T08:47:42.503
> 
> 标签：ajax, jsf-2, primefaces

我正在使用 primefaces 3.2 和 JSF 2.0

我的情况是我的表格中有文件日期、最后日期和下一个日期。当用户输入文件日期时，我需要更新 bean 中的文件日期值，以便它的值可以用作属性 mindate 的最后日期中的最小日期，因此在下一个日期选择中。

据我所知，值更改侦听器可以在表单提交时执行，所以我不能使用它。我用过**p:ajax**。但我仍然无法设置文件日期。由于未设置文件日期，它允许用户选择文件日期之前的最后日期和下一个日期。

**caseMaster.xhtml**

```
<p:calendar value="#{caseUitility.caseMaster.fileDate}" id="fileDate" effect="fadeIn" pattern="dd/MM/yyyy" readOnlyInputText="true">
    <p:ajax event="change" listener="#{caseUitility.dateChange}"/>
</p:calendar>

<p:calendar value="#{caseUitility.caseMaster.lastDate}" required="true" id="lastDate" effect="fadeIn" pattern="dd/MM/yyyy" readOnlyInputText="true" mindate="#{caseUitility.caseMaster.fileDate}" >
</p:calendar> 
```

**CaseUitility.java**

```
public void dateChange(ActionEvent ae) {
    System.out.println("File Date: " + caseMaster.getFileDate());
    System.out.println("Hello... I am in DateChange");
} 
```

谁能指导我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-31T09:46:11.533

在更新版本的 PrimeFaces 中，**`SelectEvent`**应该使用查看以下代码片段

```
<p:calendar id="event" value="#{calendarView.date4}">
    <p:ajax event="dateSelect" listener="#{calendarView.onDateSelect}" update="msgs" />
</p:calendar> 
```

```
public void onDateSelect(SelectEvent event) {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy");
    facesContext.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Date Selected", format.format(event.getObject())));
} 
```

*在旧的 primefaces 版本中使用**`DateSelectEvent`***

```
<p:ajax event="dateSelect" listener="#{caseUitility.dateChange}"/> 
```

```
public void dateChange(DateSelectEvent event) {
    Date date = event.getDate();
    System.out.println("File Date: " + date);
    System.out.println("Hello... I am in DateChange");
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-31T09:49:29.940

您应该向您的 p:ajax 添加更新。使用日期选择器选择日期以及在字段中手动输入日期时遇到问题。更改事件不是双向触发的。因此，我使用 p:ajax 和 af:ajax 处理不同的事件。

```
<p:calendar value="#{caseUitility.caseMaster.fileDate}" id="fileDate" effect="fadeIn" pattern="dd/MM/yyyy" readOnlyInputText="true">
    <p:ajax event="dateSelect" listener="#{caseUitility.dateSelect}" update="lastDate"/>
    <f:ajax event="change" execute="@this" render="lastDate" listener="#{caseUitility.dateChange}"/>
</p:calendar> 
```

而在豆子里

```
public void dateSelect(DateSelectEvent event) {
    caseMaster.setFileDate(event.getDate());
    System.out.println("File Date: " + caseMaster.getFileDate());
    System.out.println("Hello... I am in DateChange");
}

public void dateChange(AjaxBehaviorEvent event) throws MWSException {
    System.out.println("File Date: " + caseMaster.getFileDate());
    System.out.println("Hello... I am in DateChange");
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-24T16:06:38.170

我的解决方案：

```
<p:ajax event="change" listener="#{caseUitility.dateChange}"/> 
```

在 bean 中：

```
public void dateChange(SelectEvent event) 
{   
      date = (Date)event.getObject();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T19:40:24.603

我认为你必须考虑这样做：

```
<p:calendar id="fileDate" value="#{caseUitility.caseMaster.fileDate}" navigator="true" effect="slideDown" mindate="#{caseUitility.today}" readOnlyInputText="true" pattern="dd/MM/yyyy HH:mm" required="true"  showOn="button" autocomplete="false">
    <p:ajax event="focus" listener="#{caseUitility.dateChange}" update="lastDate" />
</p:calendar>

public void dateChange()  {
     System.out.println("File Date: " + caseMaster.getFileDate());
} 
```

如果您使用“焦点”事件，它将在 change 或 dateSelect 时触发，用于日历 primefaces 控件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-17T10:31:24.750

使用 ajax 事件作为 dateSelect like

```
<p:calendar value="#{caseUitility.caseMaster.fileDate}" id="fileDate" effect="fadeIn" pattern="dd/MM/yyyy" readOnlyInputText="true">
        <p:ajax event="dateSelect" process="@this" update="lastDate" listener="#{caseUitility.dateChange}"/>
</p:calendar>   
<p:calendar value="#{caseUitility.caseMaster.lastDate}" required="true" id="lastDate" effect="fadeIn" pattern="dd/MM/yyyy" readOnlyInputText="true" mindate="#{caseUitility.caseMaster.fileDate}" >
</p:calendar> 
```

听众，

```
public void dateChange(SelectEvent event) {
    System.out.println("File Date: " + (Date) event.getObject());
    System.out.println("Hello... I am in DateChange");
} 
```

但请记住，您不应在进程中使用任何其他组件 ID（意味着进程中只允许使用 @this），否则侦听器将无法工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-05T11:43:25.660

您可以使用`onstart`and `oncomplete`（没有出现在 primefaces 文档中）。

我解决了这个问题：

```
<p:calendar
      id="fromDate"
      value="#{reportBean.fromDate}"
      pattern="dd/MM/yyyy"
      locale="es"
      maxdate="#{reportBean.untilDate}">
      <p:ajax event="dateSelect" 
          onstart="openModal();" 
          oncomplete="closeModal();"  
          update="untilDate div_report"/>
</p:calendar> 
```

Javascript：

```
function openModal(){
    $('#mdlLoading').modal('open');
}
function closeModal(){
    $('#mdlLoading').modal('close');
} 
```

希望这对某人有帮助！

# mysql - Mysql存储过程中循环内的选择语句

> ID：14099479
> 
> 赞同：1
> 
> 时间：2012-12-31T08:47:57.950
> 
> 标签：mysql, sql, date, stored-procedures

我们可以在 Mysql 存储过程的循环中使用 Select 语句吗？

为什么代码错误

```
create procedure AbsentReportproc (INOUT fromdate DATETIME, INOUT todate DATETIME)
as
begin

DECLARE startdate DATE;
DECLARE enddate DATE;
DECLARE nofdays INT;
DECLARE counter INT;
DECLARE countdate DATE;
startdate=fromdate;
enddate=todate;
countdate=fromdate;

nofdays=DATEDIFF(DAY,startdate,endate);
counter=1;

while counter<=noofdays
loop

select   CARDNO from test_prefixmaster
where CARDNO not in (  select CARDNO from test_prefixtransactions where Date(S_DateTime)=countdate)

set countdate=countdate+1;
set counter=counter+1;
end loop;

end// 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T08:50:41.187

试试这个：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `AbsentReportproc`$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `AbsentReportproc`(IN _fromdate DATETIME, IN _todate DATETIME)
BEGIN 
    CREATE TEMPORARY TABLE daterange (dte DATE); 

    SET @counter := -1;
    WHILE (@counter < DATEDIFF(DATE(_todate), DATE(_fromdate))) DO 
        INSERT daterange VALUES (DATE_ADD(_fromdate, INTERVAL @counter:=@counter + 1 DAY));
    END WHILE;

    SELECT tp.cardno, tp.EMPCODE, tp.DEPARTMENT, GROUP_CONCAT(d.dte) Absentddate, COUNT(tp.cardno) Totalnoofabsentdates
    FROM test_prefixmaster tp JOIN daterange d 
    LEFT JOIN test_prefixtransactions tpt ON tp.cardno = tpt.CARDNO AND DATE(S_DateTime) = d.dte
    WHERE tpt.CARDNO IS NULL 
    GROUP BY tp.cardno;

    DROP TABLE daterange;
END$$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:54:48.257

你不需要一个循环。你可以这样做：

```
SELECT
  p.CARDNO, 
  COUNT(CARDNO) AS countdate
FROM test_prefixmaster p
INNER JOIN test_prefixtransactions   t ON p.CARDNO = t.CARDNO
WHERE Date(t.S_DateTime) BETWEEN fromdate 
                             AND todate
GROUP BY p.CARDNO; 
```

# selenium - 如何使用 JAVA 验证是否在 selenium webdriver 中启用了链接？

> ID：14099480
> 
> 赞同：0
> 
> 时间：2012-12-31T08:48:12.943
> 
> 标签：selenium, webdriver, testng

我想先验证是否启用了分页链接。如果已启用，请单击链接，否则我不想单击链接并跳过 JAVA 中的 if 条件。

我正在使用 selenium web-driver 和 TestNG。

谢谢，瑞希尔·巴特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-08T13:48:57.497

```
public void elementIsDisable(WebDriver driver, By by) throws Exception {
    WebElement disable = driver.findElement(by);
    Thread.sleep(2000);
    String disableAttribute = disable.getAttribute("disabled");
    Assert.assertEquals("true", disableAttribute);
} 
```

然后在测试中调用该方法：

```
homePage.elementIsDisable(driver, By.id("acc-confirm")); 
```

这检查 webElement 是否被禁用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T10:02:52.763

使用 isEditable(locator)，如果链接被禁用，则返回 false，否则返回 true

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:00:37.997

使用浏览器检查元素的 Web 控制台检查是否有任何属性可以使用样式、类等禁用链接。

```
String temp = selenium.getAttribute(locator@attribute); 
```

现在您可以验证 temp 的值。

请参考：[http ://www.seleniumtests.com/2011/06/selenium-tutorial-get-attribute-for.html](http://www.seleniumtests.com/2011/06/selenium-tutorial-get-attribute-for.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T02:39:37.453

```
if(existsElement("test")==true){
WebElement menuHoverLink = driver.findElement(By.id("test"));
actions.moveToElement(menuHoverLink).perform();
Thread.sleep(6000);
}
else{
System.out.println("element not present -- so it entered the else loop");
} 
```

# iphone - 崩溃：使用 iOS 6 代码的 UIImage 样式崩溃？

> ID：14099482
> 
> 赞同：2
> 
> 时间：2012-12-31T08:48:27.793
> 
> 标签：iphone, objective-c, ios6, uiimageview, uiimage

这是我为图像设置样式的代码。在 iOS4.3 及以上版本中，代码工作正常，但在 iOS 6 中，它崩溃了。

![在此处输入图像描述](../Images/0dade573f7990461cd9366e388ec2019.png)

```
-(UIImage *)grayImage:(UIImage *)image
{
    CGImageRef img= image.CGImage;//imageSelected.CGImage;//self.originalPhoto.CGImage;

    CFDataRef dataref=CGDataProviderCopyData(CGImageGetDataProvider(img));

    int length=CFDataGetLength(dataref);
    UInt8 *data=(UInt8 *)CFDataGetBytePtr(dataref);

    for(int index=0;index<length;index+=4){
        Byte grayScale =
        (Byte)(data[index+3]*.11  +
               data[index + 2] * .59  +
               data[index + 1] * .3);

        //set the new image's pixel to the grayscale version
        data[index+1] = grayScale;// Code Crash here , By SIGABRAT (Exe_Bad_Access)
        data[index+2] = grayScale;
        data[index+3] = grayScale;
    }
    // .. Take image attributes
    size_t width=CGImageGetWidth(img);
    size_t height=CGImageGetHeight(img);
    size_t bitsPerComponent=CGImageGetBitsPerComponent(img);
    size_t bitsPerPixel=CGImageGetBitsPerPixel(img);
    size_t bytesPerRow=CGImageGetBytesPerRow(img);

    // .. Do the pixel manupulation
    CGColorSpaceRef colorspace=CGImageGetColorSpace(img);
    CGBitmapInfo bitmapInfo=CGImageGetBitmapInfo(img);
    CFDataRef newData=CFDataCreate(NULL,data,length);
    CGDataProviderRef provider=CGDataProviderCreateWithCFData(newData);

    // .. Get the Image out of this raw data
    CGImageRef newImg=CGImageCreate(width,height,bitsPerComponent,bitsPerPixel,bytesPerRow,colorspace,bitmapInfo,provider,NULL,true,kCGRenderingIntentDefault);

    // .. Prepare the image from raw data
    UIImage* rawImage = [[UIImage alloc] initWithCGImage:newImg] ;

    // .. done with all,so release the references
    CFRelease(newData);
    CGImageRelease(newImg);
    CGDataProviderRelease(provider);
    CFRelease(dataref);

    return rawImage;

} 
```

这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:09:37.640

请使用 CFMutableDataRef 代替 CFDataRef 如下

```
CFDataRef m_DataRef = CGDataProviderCopyData(CGImageGetDataProvider(inImage)); 
//->write this:
CFMutableDataRef m_DataRef = CFDataCreateMutableCopy(0, 0, CGDataProviderCopyData(CGImageGetDataProvider(inImage)));

UInt8 * m_PixelBuf = (UInt8 *) CFDataGetBytePtr(m_DataRef); 
//->write this
UInt8 *m_PixelBuf=(UInt8 *)CFDataGetMutableBytePtr(m_DataRef); 
```

# android - 以特定间隔更新列表视图

> ID：14099488
> 
> 赞同：0
> 
> 时间：2012-12-31T08:49:20.900
> 
> 标签：android, listview

有一个包含一些细节的列表视图，我在服务器的列表视图中膨胀了数据。因此，在创建活动时，我调用了一个 api 来获取数据并膨胀到列表视图一次。并且在列表视图中也有分页，所以在滚动到最后一项时，它将再次为下一页调用 api 并将下一页的数据附加到列表末尾。这工作正常。但我想要的是某种间隔的列表视图数据的自动引用。意味着列表视图具有更新的数据。我需要如何构建我的活动以获得我想要的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:00:42.767

试试这个：

```
Handler mHandler = new Handler();
Thread downloadThread;

boolean isRunning = true; 
```

在 onCreate() ：

```
downloadThread = new Thread(new Runnable() {
            @Override
            public void run() {
                // TODO Auto-generated method stub
                while (isRunning) {
                    try {
                        Thread.sleep(10000); // run at every 10 seconds
                        mHandler.post(new Runnable() {

                            @Override
                            public void run() {
                                // TODO Auto-generated method stub
                                // Write your code here to update the UI.
                                updateListData();
                            }
                        });
                    } catch (Exception e) {
                        // TODO: handle exception
                    }
                }
            }
        }); 

       downloadThread.start(); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T08:56:51.380

在您的活动中`onCreate()`创建一个[Hanlder](http://developer.android.com/reference/android/os/Handler.html)，然后从中选择适合您的内容`post()`，`postAtTime()`或者`postDelayed()`调用您的刷新方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:02:14.127

使用以下更新列表视图

```
 new Handler().postDelayed(new Runnable() {

        public void run() {
            // TODO Auto-generated method stub
            callFunction();
        }
    }, 3000); 
```

# ruby-on-rails - Backbone.js + coffeescript - 等待 ajax 完成

> ID：14099491
> 
> 赞同：0
> 
> 时间：2012-12-31T08:49:48.753
> 
> 标签：ruby-on-rails, backbone.js, coffeescript

型号：entry.js.coffee

```
class Raffler.Models.Entry extends Backbone.Model

  url: '/api/entries/12345' 
```

路由器：entry_router.js.cofee

```
routes:
'entries/:id': 'show'

show: (id) ->
  @model = new Raffler.Models.Entry()
  @model.fetch()
  view1 = new Raffler.Views.Profile(model: @model)
  $("#profile_container").html(view1.render().el) 
```

查看：profile.js.coffee

```
class Raffler.Views.Profile extends Backbone.View
  template: JST['entries/profile']

render: ->
  $(@el).html(@template(entry: @model))
  this 
```

模板：profile.jst.eco

```
<div class="profile_desc">
  <table>
    <tr>
      <td valign="top" class="desc_heading">about: </td>
      <td>
        <%= @model.get('aboutMe') %>
      </td>
    </tr>
  </table>
</div> 
```

JSON响应：

```
{"aboutMe":"I am a proud Ruby Developer} 
```

我可以看到获取数据的 ajax 调用。但我猜它在此之前渲染视图文件。

在 Firebug 中出现错误：

```
TypeError: this.model is undefined
    __out.push(__sanitize(this.model.get('aboutMe'))); 
```

我如何等待模型 ajax 完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:07:19.383

在获取之前，您必须指定回调函数，如下所示：

```
show: (id) ->
  @model = new Raffler.Models.Entry()
  @model.on 'sync', => @create_profile_view @model
  @model.fetch()

create_profile_view: (model) ->
  view1 = new Raffler.Views.Profile(model: model)
  $("#profile_container").html(view1.render().el) 
```

你可以使用不同的事件（http://backbonejs.org/#Events）。

PS我更喜欢提取渲染逻辑并获取查看。

# java - 使用 Hibernate 模板插入数据

> ID：14099495
> 
> 赞同：0
> 
> 时间：2012-12-31T08:50:21.310
> 
> 标签：java, hibernate

考虑以下：

> 用户.java

```
class User{
    ...
    private Set<Community> communities = new HashSet<Community>();
    ...
} 
```

> 社区.java

```
class Community{
    ...
    private Set<User> users = new HashSet<User>();
    ...
} 
```

> 用户.hbm.xml

```
<set name="communities" cascade="save-update" lazy="false" table="tbl_user_community">
        <key column="user_id" />
        <many-to-many class="Community" column="community_id"/>
     </set> 
```

> 社区.hbm.xml

```
<set name="users" lazy="false" cascade="save-update" table="tbl_user_community" inverse="true">
    <key column="community_id" />
    <many-to-many class="User" column="user_id"/>
</set> 
```

两者都有`many-to-many`关系。

为用户添加社区的代码：

```
HibernateTemplate template = null;
SessionFactory sessionFactory = HibernateUtil.getSessionFactory();
template = new HibernateTemplate(sessionFactory);

User user = template.get(User.class, "100");
Community community = template.get(Community.class,1);

user.getCommunities().add(community);

template.saveOrUpdate(user); 
```

设想：

> 1.  community1 分配给 user1（插入数据库）
> 2.  community2 分配给 user1（插入数据库）
> 3.  community1 分配给 user2（插入数据库）
> 4.  community2 分配给 user2 （未插入数据库，抛出`NonUniqueObjectException`）
> 5.  如果我使用`template.merge(user)`而不是`template.saveOrUpdate(user)`..它可以工作..为什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T15:48:39.700

`saveOrUpdate()`并`update()`获取一个分离的对象并将此对象实例附加到会话。因此，如果一个具有相同类型和 ID 的实体已经附加到会话，Hibernate 不能附加另一个实例：它会破坏会话中只有一个具有给定 ID 的实体的保证。所以它抛出了这个异常。

`merge()`是不同的。它需要一个分离的实体，如果尚未加载，则在会话中加载具有相同 ID 的实体，并将分离实体的状态（即字段）复制到附加实体。分离的实体保持分离和未修改。

所以，一般来说，`merge()`应该是首选。顺便说一句，JPA API 中不存在其他方法。如果使用 saveOrUpdate()，一般应将其作为事务的第一条指令调用，以避免陷入导致 NonUniqueException 的情况。

# css - 我的自定义光标代码的演变：如何让它在 IE 中工作？

> ID：14099496
> 
> 赞同：4
> 
> 时间：2012-12-31T08:50:31.690
> 
> 标签：css, internet-explorer, cross-browser, custom-cursor

我有一个使用图像的自定义光标。我的原始代码：

```
cursor:url(../images/drag_mini_bg.png); 
```

然后我发现Firefox要求您定义默认备份以防找不到图像，并将其更改为：

```
cursor:url(../images/drag_mini_bg.png), default; 
```

这适用于 Firefox 和 Chrome，但不适用于 IE。我读到 IE 使用与其他浏览器[不同的路径源](http://beradrian.wordpress.com/2008/01/08/cross-browser-custom-css-cursors/)并实现[了这个解决方案](http://beradrian.wordpress.com/2008/01/08/cross-browser-custom-css-cursors/)：

```
cursor:url(../images/drag_mini_bg.png),url(/images/drag_mini_bg.png),default; 
```

（第二个 url 相对于 html 文件，而不是包含此代码的 css 文件。）

这似乎没有帮助，所以我发现了[这个错误](https://stackoverflow.com/questions/10222328/cursor-image-not-working-in-ie)并将图像更改为 .cur 文件：

```
cursor:url(../images/drag_mini_bg.cur),url(/images/drag_mini_bg.cur),default; 
```

但是，它仍然没有出现在 IE 中。还有什么我可以尝试的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T18:11:04.563

你读过的大部分内容都是正确的，但我会做一些修改：

*   Firefox 确实需要添加附加参数。我的理解是这个的理想值是`auto`. 但是，如果`default`对您有用，请使用它。

*   正如你所知道的，IE 只能显示`.cur`文件类型的光标。PNG 和 GIF 不工作。

*   但是，我从未听说过任何关于 IE 使用不同路径的信息。在所有浏览器中，相同的路径对我来说一直都很好（当然，在使用 CUR 文件时）。您可能想提供您在哪里听到的参考，但我建议删除第二个 URL 可能会解决您的问题。

有一个很好的网站叫做 Quirksmode，里面有很多浏览器兼容性表。特别是，他们有一个非常[详尽的表格，涵盖了 CSS cursors](http://quirksmode.org/css/cursor.html)，它准确地展示了如何格式化它以使其在所有浏览器中都能正常工作，并附有关于怪癖的示例和注释。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-22T05:02:47.617

如果您在 8 年后仍然试图解决这个问题……我会补充一点，有些浏览器具有最大图像大小，所以您的可能太大了。我相信您希望将其保持在 32x32 像素以下。

# java - 将javascript数组传递给servlet

> ID：14099508
> 
> 赞同：9
> 
> 时间：2012-12-31T08:51:51.567
> 
> 标签：java, javascript, arrays, jsp, servlets

我已经在 SO 上查看了有关此主题的先前问题，但我的问题尚未解决。

我将数组从 javascript 传递给 servlet。

JavaScript 代码：

```
var action = new Array();
function getProtAcionValues(rowNo,columnCount)
{
    for(var j=0;j<columnCount;j++)
    {
        action[j] =  document.getElementById('textActions'+rowNo+''+j).value;
        alert(action[j]);
    }
} 
```

小服务程序代码：

```
String actions[] = request.getParameterValues("action[]");
if(actions!=null)
for(int i=0;i<actions.length;i++)
{
    System.out.print(" Action: "+actions);
}
else
    System.out.println("Action is null"); 
```

使用上面的代码，我收到消息**"Action is null"**。

如果我尝试

```
String actions[] = request.getParameterNames("action[]"); 
```

我收到语法错误：

```
The method getParameterNames() in the type ServletRequest is not applicable for the arguments (String) 
```

如果代码有问题，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T08:56:00.830

您可以简单地使用数组名称获取数组...

**字符串操作[] = request.getParameterValues("action");**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T08:58:14.123

您不能将 java 数组作为参数传递，因为它是一个结构。最好的方法是将其序列化为一个字符串对象，如 json。您可以使用[JSON.stringify](https://stackoverflow.com/questions/2295496/convert-javascript-array-to-json)。简单高效。因为您也可以在服务器中进行序列化，所以它非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T13:13:11.397

使用表单操作传递 Javascript 数组变量以将值发送到 servlet，然后使用

```
String[] darray=request.getParameterValues("variable name used with link"); 
```

# javascript - 使用两个链接显示或隐藏特定 div 的可见性

> ID：14099510
> 
> 赞同：0
> 
> 时间：2012-12-31T08:52:17.187
> 
> 标签：javascript, html, css

我有一个 javascript 函数可以切换表单的可见性。

```
<script type="text/javascript">
function showHide(){
    var toggle = document.getElementById('form');
    if(toggle.style.display == 'none')
         toggle.style.display = 'block';
    else
         toggle.style.display = 'none';
}
</script> 
```

此链接工作正常。

```
<a href="#" onclick="showHide()">Add new:</a> 
```

但是当我在此链接中使用此功能时，它不起作用。单击此链接后，页面重新加载且隐藏的内容未显示。

```
<a href="products.php?act=edit&id=1" onclick="showHide()">Edit</a> 
```

这是演示： [products.php](http://www.moeen.webege.com/test/products.php)

我希望“添加新：”和“编辑”链接的工作方式相同，以显示或隐藏表单而不重新加载页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T08:57:49.773

作为vatiant，你可以这样：

```
<script type="text/javascript">
function showHide(){
    var toggle = document.getElementById('form');
    if(toggle.style.display == 'none')
         toggle.style.display = 'block';
    else
         toggle.style.display = 'none';
    document.location.href = 'http://yourdomain.com/products.php?act=edit&id=1'; //<<<<
}
</script>

<a href="#" onclick="showHide()">Add new:</a> 
```

但不明白什么=）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:16:10.287

首先，您可以简化功能：

```
function showHide(){
    var toggleStyle = document.querySelector('#form').style;
    toggleStyle.display = toggleStyle.display ? '' : 'none';
}​ 
```

看到这个[**jsfiddle**](http://jsfiddle.net/KooiInc/j3pLy/)

其次，您的点击操作*确实*有效，但由于 href 触发了页面刷新，因此它不可见。如果你想使用`showHide`，你可以在 href 添加一个参数，比如: `<a href="products.php?act=edit&id=1&showform=1">`，并使用`showform`页面加载时的值来触发可见性。或者，您可以使用 cookie 来“记住”表单显示状态。第三种选择是使用[XmlHTTPRequest](http://en.wikipedia.org/wiki/XMLHttpRequest)（XHR，又名 Ajax）来防止页面刷新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T09:00:29.400

如果您要链接到另一个页面/重新加载当前页面（这会导致所有状态丢失），那么您需要某种方式将 div 的可见性传递到新页面。你可以

```
<a href="products.php?act=edit&id=1&visible=formVisible" onclick="showHide()">Edit</a> 
```

您需要`formVisible`在切换功能中设置值，或动态修改链接......有很多方法可以实现。

作为旁注，您应该[在javascript中使用三等号](https://stackoverflow.com/q/359494/96505)

```
if(toggle.style.display === 'none') 
```

# node.js - 在下载 Youtube 视频时捕获缩略图

> ID：14099513
> 
> 赞同：2
> 
> 时间：2012-12-31T08:52:33.630
> 
> 标签：node.js, stream, ffmpeg, video-streaming, video-capture

我想在某个时间线上捕捉 Youtube 视频的缩略图。（例如 3.2 秒）我使用 ytdl 和 fluent-ffmpeg 和 node.js 来实现它。下载完成后可以捕获缩略图。

```
var fs = require('fs');
var ytdl = require('ytdl');
var ffmpeg = require('fluent-ffmpeg');
var videostream = fs.createWriteStream('video.flv');
var myytdl = ytdl('http://www.youtube.com/watch?v=A02s8omM_hI');
myytdl.pipe(videostream);
videostream.on('close',function() {
  console.log('Downloading complete...');
  var proc = new ffmpeg({ source: 'video.flv', nolog: true })
  .withSize('150x100')
  .takeScreenshots(1, '/home/test', function(err) {
    console.log(err || 'Screenshots were saved');
  });
}); 
```

但是，我无法在下载时捕获缩略图。我想要做的基本想法如下。

1.  从 X 秒开始下载 Youtube 视频。（工作）
2.  将其通过管道传输到可读/可写（双工）内存流（需要建议）
3.  在下载过程中，检查流是否有足够的数据来捕获第一帧，即 X 秒。（需要建议）
4.  捕获第一帧，然后停止下载

对于 2，我已经意识到 node.js 将在即将到来的 v0.9.x 上具有双工流，但它似乎无法正常工作。任何有好主意实施子弹 2,3 的人？

# silverlight - 使用 NavigateToString Silverlight 5 时 webbrowser 控件未触发 LoadCompleted 事件

> ID：14099516
> 
> 赞同：1
> 
> 时间：2012-12-31T08:09:29.003
> 
> 标签：silverlight

我正在使用 Silverlight 5 webbrowser 控件来显示内容。我使用了这段代码，对我来说效果很好。

xml:

```
<TextBox x:Name="txtUri" Margin="5" HorizontalAlignment="Stretch" />
<Button x:Name="btnGo" Grid.Column="1" Content="Go" Click="OnGo" Margin="5" />
<WebBrowser LoadCompleted="browserControl_LoadCompleted"  ScriptNotify="browserControl_ScriptNotify" Grid.Row="1" Margin="5" x:Name="browserControl" /> 
```

。CS

```
private void webBrowser_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {
        MessageBox.Show("called");
    }

    private void browserControl_LoadCompleted(object sender, System.Windows.Navigation.NavigationEventArgs e)
    {
        MessageBox.Show("called");
        btnGo.IsEnabled = true;
    }

    private void OnGo(object sender, RoutedEventArgs e)
    {
         btnGo.IsEnabled = false;
         browserControl.Navigate(new Uri(txtUri.Text, UriKind.RelativeOrAbsolute));

    }

    private void browserControl_ScriptNotify(object sender, NotifyEventArgs e)
    {
        if (!string.IsNullOrEmpty(e.Value))
        {
            MessageBox.Show(e.Value);
        }
    } 
```

它禁用按钮并搜索文本框输入的 URI 但是当我更改 OnGo 方法时

```
private void OnGo(object sender, RoutedEventArgs e)
    {
         btnGo.IsEnabled = false;
         browserControl.NavigateToString("<html>   <head><title>Sample Readme File</title><script type='text/javascript' language='javascript'> function GetSelectedText() {window.external.notify('Text to show in Message box');}</script></head>   <body>    <a onclick='GetSelectedText()'>Click Me</a>  <p>Sample Readme Content</p>   </body></html>");
    } 
```

并添加 ScriptNotify 事件处理程序

```
void webBrowser_ScriptNotify(object sender, NotifyEventArgs e)
    {
        if (!string.IsNullOrEmpty(e.Value))
        {
            MessageBox.Show(e.Value);
        }
    } 
```

然后 webBrowser_LoadCompleted 事件不会触发。

这两者背后有什么区别。

请帮忙！

# iphone - 如何在iphone应用程序中垂直放置标签以给出条线的名称

> ID：14099518
> 
> 赞同：2
> 
> 时间：2012-12-31T08:53:22.607
> 
> 标签：iphone, ipad, uilabel

![在此处输入图像描述](../Images/78641d2514e4ef36f4eeca72c1fa9f4b.png)

我想显示 UILabel 垂直位置，就像普通图形标签一样，如果 100 200 300 400 那么计算图形应该垂直对齐。还附上了图片。我想将标签设置为风险，如图所示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:09:47.667

您可以随意旋转标签

```
label.transform = CGAffineTransformMakeRotation(M_PI_2*3); // 90 degress 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:15:12.677

```
 CGFloat DegreesToRadians(CGFloat degrees)
{
 return degrees * M_PI / 180;
};

 CGAffineTransform transform = CGAffineTransformMakeRotation(-DegreesToRadians(90));
 label.transform = transform; 
```

# ruby-on-rails - Mongo Rails 驱动程序 - ReplSetConnection -（从属停机时间）

> ID：14099519
> 
> 赞同：1
> 
> 时间：2012-12-31T08:53:25.000
> 
> 标签：ruby-on-rails, mongodb

我有一个关于 ReplSetConnection 的问题。

我的设置是一个带有 2 个服务器和一个初始化文件的 mongo ReplSet (rails 2.3.3)

> MO_SET = Mongo::ReplSetConnection.new([@settings["hostA"], @settings["portA"]], [@settings["hostB"], @settings["portB"]], {:pool_size => 5}) MO_DB = MO_SET.db(@settings["database"])

如果 hostA 是 master 并且 hostB 出现故障，则会发生错误

> Mongo::ConnectionFailure（无法连接任何给定的主机：端口）：
> mongo (1.1.5) lib/./lib/mongo/repl_set_connection.rb:116:in `connect'

由于主服务器仍在运行，我该如何防止这种情况发生？

谢谢

# asynchronous - C# 中的异步/等待和并行

> ID：14099520
> 
> 赞同：45
> 
> 时间：2012-12-31T08:53:29.853
> 
> 标签：asynchronous, async-await, parallel.foreach

什么时候应该使用 async/await，什么时候应该在 C# 中使用 parallel.foreach？并行和异步/等待是否具有相同的目的？它们有什么区别？

* * *

## 回答 #1

> 赞同：114
> 
> 时间：2012-12-31T09:04:19.837

async/await 是关于*异步*的，而是`Parallel.ForEach`关于*并行*的。它们是相关的概念，但并不相同。

`Parallel.ForEach`当您想对集合中的所有项目并行执行相同的操作时使用，阻塞当前线程直到所有操作完成。

async/await 用于当前操作在特定异步操作完成之前无法取得更多进展，但您不想阻塞当前线程。这在两种情况下特别有用：

*   在 UI 线程上编写基本上启动各种异步操作的代码，在操作之间短暂访问 UI。（它比这更通用，但这是一个简单的示例。）您不想阻塞 UI 线程，但管理所有这些异步操作是一件很痛苦的事情。
*   一次处理*大量*长时间运行的操作 - 例如在 Web 服务器中。由于调用其他 Web 服务、数据库等，每个单独的请求可能需要很长时间 - 但您不希望每个请求有一个线程，因为线程是一种相对昂贵的资源。

您可以通过启动将调用的新任务`Parallel.ForEach`，然后等待该任务来结合并行性和异步性。（仅作为一个例子。）

# ruby - 将哈希初始化存储到变量

> ID：14099523
> 
> 赞同：-1
> 
> 时间：2012-12-31T08:53:41.003
> 
> 标签：ruby, sinatra, rack

我的 Sinatra 应用程序中有一个代码

```
 - if flash[:error]
      .alert.alert-error
        %button.close{:type =>" button", "data-dismiss"=>"alert"}x
        = flash[:error]
    - if flash[:warning]
      .alert.alert-warning
        %button.close{:type =>" button", "data-dismiss"=>"alert"}x
        = flash[:warning]
    - if flash[:info]
      .alert.alert-info
        %button.close{:type =>" button", "data-dismiss"=>"alert"}x
        = flash[:info] 
```

有什么办法可以简单的吗？`:type =>" button", "data-dismiss"=>"alert"`特别是，有没有办法通过将它们存储为变量来摆脱重复的哈希初始化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:14:21.363

尝试类似：

```
- flash.each do |type, message|
  .alert{ :class => "alert-#{type}" }
    %button.close{:type =>" button", "data-dismiss"=>"alert"}x
    = message 
```

# c# - 避免循环或多个级联路径

> ID：14099528
> 
> 赞同：0
> 
> 时间：2012-12-31T08:53:59.947
> 
> 标签：c#, sql-server, entity-framework, ef-code-first

我收到以下异常：

![在此处输入图像描述](../Images/d556751101e90489fe80d62ac5a7eb21.png)

[我在这里](https://stackoverflow.com/questions/1637708/what-is-the-problem-with-foreign-key-cascade-multiple-paths-and-cycles)、[这里](https://stackoverflow.com/questions/4150605/introducing-foreign-key-constraint-may-cause-cycles-or-multiple-cascade-paths)和[这里](https://stackoverflow.com/questions/851625/foreign-key-constraint-may-cause-cycles-or-multiple-cascade-paths)浏览过很多帖子。但没有帖子建议问题的适当解决方案。我想知道如何实际解决这种情况。

我的`Models`和`Contexts`如下：

```
public class Context : DbContext
    {
        public Context() : base("DefaultConnection")
        {
        }
        public DbSet<Student> Students { get; set; }
        public DbSet<Course> Courses { get; set; }
        public DbSet<Staff> Staffs { get; set; }
    }

public class Student
    {
        public int StudentId { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        [Required]
        public virtual Course Course { get; set; }
        [Required]
        public virtual Staff Staff { get; set; }

    }

 public class Staff
       {
           public int StaffId { get; set; }
           public string Name { get; set; }
           public string  Contact { get; set; }
       }

public class Course
    {
        public int CourseId { get; set; }
        public string CourseName { get; set; }
        [Required]
        public virtual Staff Staff { get; set; }
    } 
```

我在线上遇到了这个异常：

```
 context.Students.Add(student); 
```

以下代码：

```
 public void AddStudent()
        {
            Student student = new Student();
            student.FirstName = "Bruce";
            student.LastName = "Wayne";
            student.Course = new Course();
            student.Course.CourseName = "CSE";
            student.Course.Staff = new Staff();
            student.Course.Staff.Name = "Albert";
            student.Course.Staff.Contact = "1234567890";
            context.Students.Add(student);
            context.Courses.Add(student.Course);
            context.SaveChanges();
            Console.WriteLine("Student , Course, Staff Added");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:18:33.843

前段时间我问过这个问题。这应该可以帮助你。

[EF Code First 在外键中给出问题](https://stackoverflow.com/questions/7216595/ef-code-first-giving-problems-in-foreign-keys)

参考阅读在这里

[http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations。 aspx](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)

在文章中寻找的主要部分是“*什么是多级联路径？* ”

要实际解决问题，您需要确定要打开级联删除的路径。例如，如果员工被删除，课程是否也会被删除或保留？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:22:11.027

[禁用该实体的级联删除](https://stackoverflow.com/a/9136711/149265)应该可以解决您的问题。如果您想要对这组实体进行级联删除，请手动执行。它不能自动完成，因为当有一个循环时，无法确定何时停止。

# jquery - Fancybox v2.1.3 双浏览器滚动条

> ID：14099530
> 
> 赞同：0
> 
> 时间：2012-12-31T08:54:13.610
> 
> 标签：jquery, css, fancybox, fancybox-2

我在样式表中有以下设置，以确保每个页面宽度基本相同，因此事情不会在“短”页面上移动：`html { overflow-y:scroll; }`

使用fancybox v2.1.3 时，为了防止长fancybox iframe 页面上出现双滚动条，我使用以下内容：

```
$(".modal").fancybox({
            width   : '520',
            height  : 'auto',
            fitToView   : false,
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none',
            beforeShow: function(){
            $("html").css({'overflow-y':'hidden'});
            },
            afterClose: function(){
            $("html").css({'overflow-y':'visible'});
            },
            helpers : {
                overlay : {
                    css : {
                        'background' : 'rgba(255, 255, 255, 0.9)'
                    }
                }
            }
        }); 
```

请注意上面的以下内容，它会在 fancybox 触发时关闭滚动条：

```
beforeShow: function(){
    $("html").css({'overflow-y':'hidden'});
},
afterClose: function(){
    $("html").css({'overflow-y':'visible'});
}, 
```

哪个有诀窍，然后产生的问题是，当 Fancybox 覆盖打开时，因为我隐藏了 overflow-y 元素，整个背景向右移动，然后当我关闭 fancybox 页面时，它再次移动回来当我重新打开溢出-y 时。不漂亮。

我知道有一个 CSS 更改来阻止这种移位运动，但这被上面的 beforeShow 函数覆盖：

```
body.fancybox-lock{
    overflow:visible !important;
    margin-right:auto !important;
} 
```

你不能两者兼得，或者你可以吗？

似乎我可以有一个带有fancybox弹出窗口的静态背景，但如果长页面则有双滚动条，或者有一个滚动条但有移动背景

有解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:07:50.140

如果我正确理解您的问题，您可以通过在您的 Fancybox 配置中添加以下选项来禁用 Fancybox 的覆盖锁定功能：

```
helpers : {
    overlay : {
        locked : false
    }
} 
```

然后你可以使用`html { overflow-y:scroll; }`没有任何冲突。

缺点是如果用户滚动他们的鼠标滚轮，页面现在将在 Fancybox 覆盖层下方滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T17:15:09.227

在您的 CSS 中，使用：

`body {overflow:scroll; overflow-x: auto; overflow-y: scroll; }`

并不是：

`html body {overflow:scroll; overflow-x: auto; overflow-y: scroll; }`

# c++ - C++ 转换日期格式

> ID：14099542
> 
> 赞同：2
> 
> 时间：2012-12-31T08:55:16.327
> 
> 标签：c++, date, format, data-conversion

我想转换一个`int`日期，如：

> 20111201

至`string`：

> 01DEC2011

是否有内置在 C++ 中的快速日期格式转换（或者可能是我可以执行的 bash 系统命令）来执行此操作，或者我是否在所有月份都坚持进行切换？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T09:04:43.130

您可以使用 strptime 将字符串转换为 struct tm，然后使用 strftime 重新格式化它：

```
#include <ctime>
#include <iostream>
#include <sstream>

int main()
{
  std::ostringstream date1;
  date1 << 20111201;

  struct tm tm;
  strptime(date1.str().c_str(), "%Y%m%d", &tm);

  char date2[10];
  strftime(date2, sizeof(date2), "%d%b%Y", &tm);

  std::cout << date1.str() << " -> " << date2 << std::endl;
} 
```

输出是：

```
20111201 -> 01Dec2011 
```

如有必要，只需将 Dec 转换为大写即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:48:59.567

不要在这里使用 bash。可行的方法是在 C++ 中使用 Boost 的原因比我在这里列出的时间要多，但最终它将与您将遇到的大多数其他解决方案一样快，除非您的功能绝对是时间关键的，否则它不会无论如何都不会有很大的不同。

此外，它将比您经常遇到的所有那些糟糕的小硬编码日期转换例程更加灵活和可维护。

以下代码将执行您想要的操作。

```
#include <iostream>
#include <sstream>

#include <boost/date_time/gregorian/gregorian.hpp>
#include <boost/algorithm/string.hpp>

using namespace boost::gregorian;
using namespace std;

int main(int argc, char **argv)
{
    int dateIn = 20111201;

    // Read the date in from ISO format as an int.
    ostringstream ss;
    ss << dateIn;
    date d(from_undelimited_string( ss.str() ));

    // Set the output format
    date_facet *fct = new date_facet("%d%b%Y");    // [1]
    locale loc = locale(locale::classic(), fct);

    // Render the date as a string;
    ss.str("");
    ss.imbue(loc);
    ss << d;
    string dateOut( ss.str() );
    boost::to_upper( dateOut );

    cout << dateOut << endl;
} 
```

这给出了以下输出：

```
01DEC2011 
```

`"%d%b%Y"`只需更改ref 处的格式字符串`[1]`将更改为不同的输出格式，但请记住我也已将其转换为大写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:24:49.780

没有直接内置的，因为这种日期格式相对较少。`%`这里最简单的解决方案是使用and`/` 运算符（例如 month is ）将日期分解为年月日`value / 100 % 100`，然后正常格式化三个值，使用`std::ostream`，并在表格中查找日期。（这显然需要一些错误检查，因为并非所有整数值都会产生有效日期。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-12T01:00:58.263

老问题的新答案。此答案通过 C++11/14`<chrono>`库而不是 C`tm`或`boost::date_time`. 否则，它与现有答案非常相似。它需要这个[免费的开源库](https://github.com/HowardHinnant/date)来进行解析和格式化。

```
#include "tz.h"
#include <iostream>
#include <locale>
#include <sstream>

int
main()
{
    auto date1 = 20111201;

    std::stringstream stream;
    stream.exceptions(std::ios::failbit);
    stream << date1;

    std::chrono::system_clock::time_point tp;
    date::parse(stream, "%Y%m%d", tp);

    auto str = date::format("%d%b%Y", tp);

    auto& ct = std::use_facet<std::ctype<char>>(std::locale::classic());
    ct.toupper(&str.front(), &str.back()+1);
    std::cout << str << '\n';
} 
```

我已经包括`stream.exceptions(std::ios::failbit);`嘈杂地检测无效的“整数日期”。我已经包含了旧的 C++98 代码来将字符串转换为大写（最后的`locale`舞蹈）。

```
01DEC2011 
```

使用现代 C++ 日期/时间库的优点之一是可以轻松进行更改。例如，如果现在您需要解析时间戳而不是天精度，而是毫秒精度怎么办？这是可以做到的：

```
auto date1 = 20111201093357.275L;

std::stringstream stream;
stream.exceptions(std::ios::failbit);
stream << std::fixed << date1;

std::chrono::system_clock::time_point tp;
date::parse(stream, "%Y%m%d%H%M%S", tp);

auto str = date::format("%d%b%Y %T", tp);

auto& ct = std::use_facet<std::ctype<char>>(std::locale::classic());
ct.toupper(&str.front(), &str.back()+1);
std::cout << str << '\n'; 
```

输出：

```
01DEC2011 09:33:57.275000 
```

或者，这些时间戳可能已知来自[新西兰海岸附近的查塔姆岛，](https://www.google.com/maps/place/Chatham+Island/@-44.268442,173.2837716,5z/data=!4m2!3m1!1s0x72b3e85efc86df7f:0x2c592471336222d4)而您需要它们的 UTC 时间。只需在后面添加一行`parse`：

```
tp = date::locate_zone("Pacific/Chatham")->to_sys(tp); 
```

现在输出是：

```
30NOV2011 19:48:57.275000 
```

考虑到任意时区和亚秒级精度目前超出了所有其他 C++ 库的能力。

# actionscript-3 - 如何在 AS3 中使用 ColorMatrixFilter 更改色调

> ID：14099545
> 
> 赞同：0
> 
> 时间：2012-12-31T08:55:51.960
> 
> 标签：actionscript-3, colors, colormatrix

目前我的游戏看起来像这样：http: [//i.imgur.com/pwzUO.jpg](http://i.imgur.com/pwzUO.jpg)

我想改变背景方块的色调，以便每个级别都有不同的颜色。我做了一些研究，发现我可以为此使用 ColorMatrixFilter。我设法让这样的代码工作，这改变了色调：

```
var matrix:Array = new Array();
        matrix = matrix.concat([1, 1, 1, 0, 0]); // red
            matrix = matrix.concat([0, 1, 0, 0, 0]); // green
            matrix = matrix.concat([0, 0, 1, 1, 0]); // blue
            matrix = matrix.concat([0, 0, 0, 1, 0]); // alpha

           back.applyFilter(koe, new Rectangle(0, 0, 640, 480), new Point(0, 0), new ColorMatrixFilter(matrix)); 
```

但是，我没有弄清楚矩阵是如何工作的，以及我如何从 Photoshop 中获取色调值并将其插入到矩阵中，或者从 -180 到 180 之间的色调。例如，在 Photoshop 中，我可以使用滑块将“色调”设置为 +87 以获得所需的颜色。

那么如何将 Photoshop 或其他图像软件给我的色调值插入到这个矩阵中呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:30:53.757

您可以通过 Grant Skinner方法使用[ColorMatrix实用程序类](http://gskinner.com/libraries/gtween/docs_v2_01/com/gskinner/geom/ColorMatrix.html)`adjustHue`

# search - 在编辑字段黑莓中键入字符时回调

> ID：14099547
> 
> 赞同：-1
> 
> 时间：2012-12-31T08:56:26.073
> 
> 标签：search, blackberry, focus, blackberry-editfield

我需要`EditField`在 BlackBerry 中输入或删除每个字符时进行回调。我需要在`EditField`写完后立即获取文本，而不会失去焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:06:55.460

有多种方法可以做到这一点。例如，如果您有这样的`EditField`实例：

```
private EditField _editField; 
```

然后您可以子类`EditField`化并覆盖该`keyChar()`方法：

```
_editField = new EditField() {
    protected boolean keyChar(char key, int status, int time) {
       super.keyChar(key, status, time);
       // 'key' is the most recent entered char
    }
}); 
```

或者，您可以实现 a`FieldChangeListener`并监听更改：

```
_editField.setChangeListener(new FieldChangeListener() {
    public void fieldChanged(Field field, int context) {
        String text = _editField.getText();
        // 'text' is the full text contents of the EditField
    }
}); 
```

# ruby-on-rails-3 - rails 类或实例方法中的范围是什么？

> ID：14099549
> 
> 赞同：3
> 
> 时间：2012-12-31T08:56:38.207
> 
> 标签：ruby-on-rails-3, separation-of-concerns, scopes

这是来自试图了解关注点和范围的 Rails 菜鸟的问题。

我一直认为范围是 rails 中的类方法，但前几天我[从 DHH 看到了这段代码](http://37signals.com/svn/posts/3372-put-chubby-models-on-a-diet-with-concerns)：

```
module Visible
  extend ActiveSupport::Concern`

  module ClassMethods
    def visible_to(person)
      where \
        "(#{table_name}.bucket_id IN (?) AND
          #{table_name}.bucket_type = 'Project') OR
         (#{table_name}.bucket_id IN (?) AND
          #{table_name}.bucket_type = 'Calendar')",
        person.projects.pluck('projects.id'), 
        calendar_scope.pluck('calendars.id')
    end
  end
end 
```

所以该`visible`方法的使用方式是这样的：

`current_account.posts.visible_to(current_user)`

这让我感到困惑。`Self`这是帖子的集合，因此我们正在对实例进行操作，而可见方法似乎旨在用作类方法。大卫不是试图将类方法称为动态范围吗？有人可以澄清一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:44:25.103

继承 ActiveRecord::Base 的类上的类方法也可以用作范围（在 ActiveRecord 关系对象上）。

由于模块 Visible 旨在混合到继承 ActiveRecord::Base 的模型中，因此它的类方法 visible_to 也可以用作范围。

如果这不能解决问题，您可以通过以下方式实现获取所有成人用户（年龄 > 20）的范围：

```
class User < ActiveRecord::Base
  scope :adult, lambda { where("age > ?", 20) } # with a scope

  class << self
    def adult # with class method
      where("age > ?", 20)
    end
  end
end 
```

和使用它完全相同`User.adult`

# android - 多个 APK 规则..？

> ID：14099555
> 
> 赞同：2
> 
> 时间：2012-12-31T08:57:43.157
> 
> 标签：android, google-play, multiple-apk

我已经使用多个 apk 文件构建了一个 android 应用程序。我遵循了规则，即唯一的版本代码、相同的包名、使用相同的证书密钥签名、相同的 apk 文件名。现在为了区分不同的屏幕分辨率，我在清单文件中编写了以下代码：

对于 240x320：

```
<compatible-screens >
    <screen android:screenSize="small" android:screenDensity="ldpi"/> 
</compatible-screen 
```

对于 320x480：

```
<compatible-screens >
   <screen android:screenSize="normal" android:screenDensity="mdpi"/>
</compatible-screens> 
```

对于 480x800：

```
<compatible-screens >
    <screen android:screenSize="normal" android:screenDensity="hdpi"/>
</compatible-screens> 
```

对于 720x1280：

```
<compatible-screens >
    <screen android:screenSize="normal" android:screenDensity="xhdpi"/>
</compatible-screens> 
```

请让我知道这是否有问题。因为如果我在 google play 中上传多个 apk，现在当用户下载此应用程序时，相应的 apk 应该会自动下载。例如，如果用户使用 Google Nexus 下载此应用程序，则应下载 720x1280 的 apk。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:55:41.803

AFAIK 这不是一个好主意。Android有很多不同的分辨率，真的很难

> **为每个分辨率创建不同的 APK，并确保用户下载正确的 apk。**

尝试遵循[开发人员指南的建议](http://developer.android.com/guide/practices/screens-distribution.html)来创建适合各种屏幕的资源会更好。

官方写在上面的链接：

> **但是请注意，为同一个** **应用程序发布多个 APK 被认为是一项高级功能，并且大多数应用程序** **应该只发布一个可以支持各种设备** **配置的 APK。**尤其是支持多个屏幕尺寸，只要您遵循支持多个屏幕的指南，使用单个 APK 就在合理范围内。

最好的方法是为不同的分辨率提供可绘制/布局，而不是根据分辨率创建不同的 apk。适用于所有分辨率的通用应用程序优于适用于不同分辨率的不同应用程序。

[阅读此内容以获得更好的理解。](http://developer.android.com/guide/practices/screens_support.html)

# google-maps - 为什么 setMap(null) 无法使用谷歌地图 api v3？

> ID：14099556
> 
> 赞同：8
> 
> 时间：2012-12-31T08:57:43.193
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在使用谷歌地图 api 3.9。在应用程序中用户可以添加标记或删除标记。当用户单击地图时，将显示一个信息窗口。用户可以在其中输入名称、纬度、经度并单击保存图像，如下所示：

```
google.maps.event.addListener(map, 'click', function(event) {

  point = new google.maps.Marker({
    position: event.latLng
    , map: map
    , icon: 'resource/image/mapIcons/point.png'
    , id: id
    , type:"point"
  });

  type = point.type;
  newPoint = true;
  existingPoint = false;
  markerObj = this;

  inputInfowindow.setContent("<table style='width:92%;' id='inputTable'>" +
                             "<tr> <td>point</td> </tr>" +
                             "<tr> <td><input class='infoInput' type='text' id='name' placeholder='name'/> </td> </tr>" +
                             "<tr> <td><input class='infoInput'type='text' id='lat' placeholder='latitude'/></td> </tr>" +
                             "<tr> <td><input class='infoInput'type='text' id='lon' placeholder='longitude'/></td> </tr>" +
                             "<tr><td><input type='image' src='resource/image/mapIcons/save.png' onclick='save()' class='saveImage' alt='save'/> </td></tr>");

  event1 = event.latLng;
  currentMarker = point;
  inputInfowindow.open(map,point);

}); 
```

标记保存在数据库中。当用户单击删除按钮时，将调用以下方法：

```
function deleteMarker(id,rev) {
  var marker  = markerObj;
  markerObj = undefined;
  var x = confirm("are you sure to delete marker?");
  if(x){
    deleteLocations(id,rev);//removes marker details from DB
    if(marker){
      console.log(marker);
      marker.setMap(null);
    }
  }
} 
```

但在marker.setMap(null); 标记已从地图中删除，仍然在地图上。我检查了 console.log(marker); 标记对象正确出现，控制台上没有错误。我进行了很多谷歌搜索但没有结果。请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T09:20:02.193

从文档中-

> 要从地图中删除覆盖，请调用覆盖的 setMap() 方法，并传递 null。请注意，调用此方法不会删除叠加层；它只是从地图**中删除**覆盖。相反，如果您希望删除叠加层，则应将其从地图中删除，然后将叠加层本身设置为 null。

所以在之后`marker.setMap(null)`你还应该写`marker=null`

**更新1-**

```
function deleteMarker(id,rev) {
  var x = confirm("are you sure to delete marker?");
  if(x)
  {
    deleteLocations(id,rev);//removes marker details from DB
    if(markerObj)
    {
       console.log(markerObj);
       markerObj.setMap(null);
       markerObj=null;
    }
  }
} 
```

**更新 2-**

这是一个有效的简单演示。查看代码并检查您的代码错误的地方。您的代码中可能存在一些变量范围问题。

[**工作演示**](http://jsfiddle.net/TwMVj/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:10:13.797

`marker.setMap(null)`不会删除对象，只会隐藏它。删除它做`marker = null;`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-03T11:49:34.420

我有同样的问题。您应该在之前调用这些方法`markers[index].setMapp(null)`：

```
map.setCenter(desMarker[index].getPosition());
desMarker[index].setPosition(null); 
```

在这些电话之后：

`markers[index].setMapp(null)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T05:36:59.967

在地图单击事件中，您将***其***分配给 markerObj。虽然***这***是指地图对象而不是标记对象。

将其更改为

```
markerObj = point; 
```

它应该按预期工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-14T15:58:50.647

我有一个类似的错误，我不确定我的解决方案是否适用于你的情况，但是.. 我设置了我的代码，以便当我的页面加载时，地图将被我数据库中表示的坐标中的任何标记填充。然后我允许用户向数据库添加更多点，然后在用户在地图上选择的位置添加一个标记。

我没有意识到，每当在我的数据库中更改或创建坐标时，我的代码都会将标记重新添加到地图上的所有坐标中。因此，每当我创建一个点时，我都会手动向坐标添加标记，并且我的数据库正在向坐标添加标记。因此，当我认为我的代码被破坏时，真正发生的是我正在删除同一位置的两个点之一。

所以我不知道你是如何从你的数据库中提取坐标和标记的，但它值得研究。

# android - 操作项未显示在操作栏中

> ID：14099561
> 
> 赞同：0
> 
> 时间：2012-12-31T08:58:04.717
> 
> 标签：android, menu, actionbarsherlock

无论如何，我做什么，文本都不会与图像一起显示在操作项中。有人可以帮我解决这个问题。这几天一直在为此苦苦挣扎。

```
 public boolean onCreateOptionsMenu(Menu menu) {

             SubMenu subMenu1 = menu.addSubMenu("Types");
                subMenu1.add("type-1");
                subMenu1.add("type-2");
                subMenu1.add("type-3");

                MenuItem subMenu1Item = subMenu1.getItem();
                subMenu1Item.setIcon(R.drawable.down_arrow);
                subMenu1Item.setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS | MenuItem.SHOW_AS_ACTION_WITH_TEXT);

        return true;
    } 
```

在上面的代码中，“**类型**”文本没有与图标一起显示。仅显示图标。如果我删除该`subMenu1Item.setIcon(R.drawable.down_arrow);`行，则会显示文本。但我两者都想要。在这里，我将子菜单项添加到操作项，以便获得下拉菜单。

由于我没有得到这个[问题](https://stackoverflow.com/questions/14080269/setting-the-dropdown-for-the-action-bar-item)的建议，我决定至少以这种方式添加子菜单项。这里我有两个问题。

`1)`如何使文本与图标一起可见。

`2)`如何监听子菜单的点击，即我们如何知道子项目何时被点击。当Item被点击时，我们可以在onOptionsItemSelected(MenuItem item)中监听，但是子菜单项是什么情况呢？

如果有人可以帮助我，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:36:56.060

1.  不幸的是 SHOW_AS_ACTION_WITH_TEXT 只是一个[建议](https://stackoverflow.com/a/13420797/1025599)。从个人经验来看，它似乎在横向模式下工作。

2.  您也可以在 onOptionsItemSelected() 中收听子菜单项

    > ```
    > subMenu1Item.add(GROUP_ID, ITEM_ID, ORDER, "type-1");
    > 
    > // ...
    > 
    > @Override
    > public boolean onOptionsItemSelected(MenuItem item) {
    >    switch (item.getItemId()) {
    >       case ITEM_ID: // do something
    >     }
    > } 
    > ```

# java - 命名空间 XML JAXB

> ID：14099565
> 
> 赞同：1
> 
> 时间：2012-12-31T08:58:37.867
> 
> 标签：java, xml, jaxb, schema

我想像这样输出 xml：

```
 <pracownicy_kadry xmlns:xsd="http://www.w3.org/2001/XMLSchema-instance" xsd:schemaLocation="http://www.example.org/kadra1 kadra1.xsd"  
xmlns="http://www.example.org/kadra1"
xmlns:kadra="http://www.example.org/kadra1">
    <opis_dokumentu>
        <tytuł>Skoczkowie i trenerzy</tytuł>
        <autor xmlns="http://osoba.example.com"  >
            <imię>FirstName</imię>
            <nazwisko>LastName</nazwisko>
            <nr_indeksu>165415</nr_indeksu>
        </autor>
        <last_mod>2012-11-04</last_mod>
    </opis_dokumentu>
    <zawodnicy>
        <zawodnik kadra:id_kad="A1" kadra:id_trenera="T2">
        <imię>Adam</imię>
        <nazwisko>Małysz</nazwisko>
         <Kadra>seniorzy</Kadra>
        <data_ur>1980-03-03</data_ur>
        <adres>
            <miejscowość>Wisła</miejscowość>
            <ulica>Żeromskiego</ulica>
            <nr_domu>23</nr_domu>
            <nr_mieszkania>1</nr_mieszkania>
            <kod>26-600</kod>           
        </adres>    
        <bmi>1.0</bmi>
        <kontakt>
            <email>123@gmail.com</email>
            <telefon_komórkowy>123456789</telefon_komórkowy>
        </kontakt>
    </zawodnik>

    <zawodnik kadra:id_kad="A2" kadra:id_trenera="T3">
        <imię>Stefan</imię>
        <nazwisko>Bachleda</nazwisko>
         <Kadra>seniorzy</Kadra>
         <data_ur>1980-03-03</data_ur>
        <adres>
            <miejscowość>Wisła</miejscowość>
            <ulica>Żeromskiego</ulica>
            <nr_domu>23</nr_domu>
            <nr_mieszkania>1</nr_mieszkania>
            <kod>26-600</kod>

        </adres>    
        <bmi>1.0</bmi>
        <kontakt>
            <email>123@gmail.com</email>
            <telefon_komórkowy>123456789</telefon_komórkowy>
        </kontakt>
    </zawodnik>
     <zawodnik kadra:id_kad="A3" kadra:id_trenera="T2">
        <imię>Kamil</imię>
        <nazwisko>Stoch</nazwisko>
         <Kadra>seniorzy</Kadra>
        <data_ur>1980-03-03</data_ur>
        <adres>
            <miejscowość>Płock</miejscowość>
            <ulica>Żółta</ulica>
            <nr_domu>823</nr_domu>
            <nr_mieszkania>1</nr_mieszkania>
            <kod>26-600</kod>           
        </adres>    
        <bmi>1.0</bmi>
        <kontakt>
            <email>kstoch@gmail.com</email>
            <telefon_komórkowy>123456789</telefon_komórkowy>
        </kontakt>
    </zawodnik>
    <zawodnik kadra:id_kad="A5" kadra:id_trenera="T2">
        <imię>Robert</imię>
... 
```

我使用 JAXB 并从我的 xsd 文件中获取所有类。我用过xjc。我不知道如何获取带有命名空间的 xml，我得到如下内容：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<pracownicy_kadry xmlns="http://osoba.example.com" xmlns:ns2="http://www.example.org/kadra1">
    <opisDokumentu>
        <tytul>Skoczkowie</tytul>
        <autor>
            <imie>Sebastian</imie>
            <nazwisko>Jakowski</nazwisko>
            <nr_indeksu>165415</nr_indeksu>
        </autor>
        <lastMod>0001-03-05T09:45:46.618+01:00</lastMod>
    </opisDokumentu>
    <zawodnicy/>
    <trenerzy>
        <ns2:trener ns2:id_tren="T12">
            <ns2:imie>Roman</ns2:imie>
            <ns2:nazwisko>romanski</ns2:nazwisko>
            <ns2:data_ur>0001-03-05T00:00:00+01:00</ns2:data_ur>
            <ns2:adres> 
```

当我得到好的 xml 时，我必须使用我的 xsd 文件检查验证。感谢您的重播和新年快乐 :)

# java - 在活动之间移动

> ID：14099568
> 
> 赞同：1
> 
> 时间：2012-12-31T08:58:47.403
> 
> 标签：java, android, android-activity

我有 2 个活动，1 个是我的应用程序的主页，另一个是用于注册的页面。我的主页的正文是这样的：

```
 public void onCreate(Bundle savedInstanceState)
 {
     registerOperation();

     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     System.out.println("Already logged in");
 }
 public void registerOperation()
 {
     //checks if I did logged in already. if true start a new Intent of my Registeration page and stop the current Intent.
 } 
```

在我的测试中，我还没有注册，所以 registerOperation 中的条件为真，新活动即将出现，但几秒钟后应用程序停止。我已经使用了注册页面，但我以不同的方式调用它，一切都很好，所以我想我调用它的方式有问题。在注册活动运行时，我调用 registerOperation 后的输出行也会被执行。

**编辑** 如果您想查看特定代码，请告诉我，我会更新帖子。

**通过活动代码。**

```
 public void registerOperation()
    {
        SharedPreferences pref = getSharedPreferences("MyKid",MODE_PRIVATE);
        String email = pref.getString("email", null);
        String password = pref.getString("password", null);
        if(email == null && password == null)
        {
            this.stopService(this.getIntent());
            Intent register = new Intent(getBaseContext(), Register.class);
            startActivity(register);
        }
    } 
```

**编辑** 日志猫：

> 12-31 11:27:38.610：E/AndroidRuntime(28903)：java.lang.RuntimeException：无法停止活动 {com.example.android.location/com.example.android.location.Track}：java.lang。空指针异常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:32:32.943

//this for the second question

```
public void onCreate(Bundle savedInstanceState)
     {
         if (registerOperation()){
             System.out.println("Already logged in");
             return;
         } 

         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

     }
     public void registerOperation()
     {
         //checks if I did logged in already. if true start a new Intent of my Registeration page and stop the current Intent.
     } 
```

// And

```
public boolean registerOperation()
    {
        SharedPreferences pref = getSharedPreferences("MyKid",MODE_PRIVATE);
        String email = pref.getString("email", null);
        String password = pref.getString("password", null);
        if(email == null && password == null)
        {
            this.stopService(this.getIntent());
            Intent register = new Intent(getBaseContext(), Register.class);
            startActivity(register);
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:27:28.833

当您在 Activity 中运行时，您正试图停止服务。删除线

```
this.stopService(this.getIntent()); 
```

无论如何，您调用其他活动的方式都没有问题。只是你试图停止一项服务，作为一个选项提供一个引用 Activity 的 Intent - 这可能是你应该遇到的 Logcat 错误。

如果您没有具体理由真正关闭 Activity，请保持 Activity 原样并让堆栈按预期工作！

将此添加到您的活动中：

```
@Override
protected void onStop() {
    super.onStop();
    finish();
} 
```

这样，当您切换到另一个 Activity 时，您的 Activity 将被正确销毁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:36:47.623

尝试这样的事情::

请尝试从 onCreate() 中删除不必要的代码 ::

```
 public void onCreate(Bundle savedInstanceState)
 {
  boolean a = registerOperation();

 super.onCreate(savedInstanceState);

  if(a)
    { 
       setContentView(R.layout.main);

       System.out.println("Already logged in"); }
     }
 public boolean registerOperation()

     {

    SharedPreferences pref = getSharedPreferences("MyKid",MODE_PRIVATE);
    String email = pref.getString("email", null);
    String password = pref.getString("password", null);
    if(email == null && password == null)
    {   return false; //Using these flags you can find out whether to redirect to Registration or Already Logged in Page
        this.stopService(this.getIntent());
        Intent register = new Intent(getBaseContext(), Register.class);
        startActivity(register);
    }
      return true;
     } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T09:38:58.327

我的应用程序停止的原因是因为我覆盖了 onStop 方法，并且在其中我使用了一些未初始化的对象。我改变了构建应用程序的方式，我想这就是我忘记这些对象的原因。

感谢您的评论和帮助。

# ruby-on-rails - 编辑使用 Carrierwave 的记录时，即使我没有更新任何图像，我也会收到“has thumb_image_changed”错误

> ID：14099569
> 
> 赞同：0
> 
> 时间：2012-12-31T08:58:50.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

这是我尝试更新`Vendor`模型上记录的非图像属性时遇到的错误（例如`owner`）：

```
NoMethodError at /admin/vendor/12/edit

Message undefined method `thumb_image_changed?' for #<Vendor:0x007ff47d097468>
File    /.rvm/gems/ruby-1.9.3-p194@my-app/gems/activemodel-3.2.8/lib/active_model/attribute_methods.rb
Line    407 
```

因此，即使我没有更改图像，也会生成此错误。

这是我的`Vendor`模型的样子：

```
class Vendor < ActiveRecord::Base
  attr_accessible :name, :description, :banner_image, :logo_image, :intro_text, :thumb_image, :category_ids, :product_ids, :user_id, :remove_banner_image, :banner_image_cache, :remove_logo_image, :logo_image_cache
    mount_uploader :banner_image, ImageUploader
    mount_uploader :logo_image, ImageUploader
    mount_uploader :thumb_image, ImageUploader

has_many :products, :dependent => :destroy
has_many :categories, :through => :products
belongs_to :owner, :class_name => "User",
    :foreign_key => "user_id"   
end 
```

我想当我尝试只更新记录的一张图像（而不是全部 3 张）时，我会遇到类似的错误。

可能是什么原因造成的，我该如何解决？

谢谢。

**编辑1：**

`Vendor#update`控制器看起来像一个正常的脚手架动作`update`：

```
 def update
    @vendor = Vendor.find(params[:id])

    respond_to do |format|
      if @vendor.update_attributes(params[:vendor])
        format.html { redirect_to @vendor, notice: 'Vendor was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @vendor.errors, status: :unprocessable_entity }
      end
    end
  end 
```

以下是生成此请求的参数：

```
Started PUT "/vendors/12" for 127.0.0.1 at 2013-01-06 16:51:28 -0500
Processing by VendorsController#update as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"3bl5Q=", "vendor"=>{"name"=>"Die", "intro_text"=>"Toppa top jeans", "description"=>"The best jeans you can get your legs in."}, "commit"=>"Update Vendor", "id"=>"12"}
  Category Load (13.0ms)  SELECT "categories".* FROM "categories" LIMIT 6
  Vendor Load (0.1ms)  SELECT "vendors".* FROM "vendors" WHERE "vendors"."id" = ? LIMIT 1  [["id", "12"]]
   (0.1ms)  begin transaction
   (0.1ms)  rollback transaction
Completed 500 Internal Server Error in 51ms 
```

在这种情况下，我正在更新的属性是`name`属性。

此外，对于它的价值，这里是[这个请求的完整堆栈跟踪](https://github.com/jnicklas/carrierwave/issues/941#issuecomment-11934964)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T23:55:21.963

你确定你的`vendors`表有一个名为的列`thumb_image`吗？因为它看起来像[ActiveModel::Dirty](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)正在尝试`..._changed?`在现有列上运行该方法

# android - 使用活动滑动：- 找不到资源异常

> ID：14099573
> 
> 赞同：0
> 
> 时间：2012-12-31T09:00:19.680
> 
> 标签：android, exception, android-pageradapter

我正在尝试滑动屏幕的某些部分。我为此使用 PageAdapter。在刷卡部分我有三个活动
1\. ShowMap
2\. ShowAddress
3\. ShowContact

我正在尝试获取 ShowMap Activity 布局的 ID，但它显示资源未找到异常。这是我的**MyPageAdapter**类 的代码

```
 public class anyclass extends Activity{
    private class MyPagerAdapter extends PagerAdapter {

        public int getCount(){
            return 3;
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext()
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0: 
                resId = showHotelContact();             
                break;
            case 1:
                resId = showHotelAddress();         
                break;              
            case 2:     
                resId = showHotelMap();             
                break;      
            }

            View view = inflater.inflate(resId, null);
            ((ViewPager) collection).addView(view, 0);
            return view;
        }

    }

    public int showHotelMap()
    {

        Intent bookIntent = new Intent();     
        bookIntent.setClass(HotelMap.this,ShowMap.class);
        startActivityForResult(bookIntent,RESID);

        return RESID;
    }
    public int showHotelAddress()
    {
        int resId;
        resId = R.layout.hoteladdress;
        return resId;
    }
    public int showHotelContact()
    {
        int resId;
        resId = R.layout.hotelcontact;
        return resId;
    }
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (resultCode == RESULT_OK) {
            RESID = data.getIntExtra("SelectedBook", resultCode);
        }
    }
   } 
```

我需要 showMap 布局的 id，我试图将其返回到我的 PageAdapter，但它显示异常。这是**ShowMap 活动**的代码。

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.hotelmap);

               int  resId = R.layout.hotelmap;
           Intent returnIntent = new Intent();
           returnIntent.putExtra("SelectedBook",resId);
           setResult(RESULT_OK,returnIntent);        
           finish();

        MapView mapView = (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);
        mapView.setStreetView(true);
        MapController mc = mapView.getController();
        double lat = Double.parseDouble("48.85827758964043"); // latitude
        double lon = Double.parseDouble("2.294543981552124"); // longitude
        GeoPoint geoPoint = new GeoPoint((int)(lat * 1E6), (int)(lon * 1E6));
        mc.animateTo(geoPoint);
        mc.setZoom(15);
        mapView.invalidate();
        List<Overlay> mapOverlays = mapView.getOverlays();
        Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);

   } 
```

这是我的**Logcat**。

```
 12-31 13:14:26.740: E/AndroidRuntime(31140): android.content.res.Resources$NotFoundException: Resource ID #0x0
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.content.res.Resources.getValue(Resources.java:1104)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.content.res.Resources.loadXmlResourceParser(Resources.java:2342)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.content.res.Resources.getLayout(Resources.java:943)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.view.LayoutInflater.inflate(LayoutInflater.java:394)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at com..HotelMap$MyPagerAdapter.instantiateItem(HotelMap.java:52)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.support.v4.view.PagerAdapter.instantiateItem(PagerAdapter.java:110)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.support.v4.view.ViewPager.addNewItem(ViewPager.java:801)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.support.v4.view.ViewPager.populate(ViewPager.java:930)
    12-31 13:14:26.740: E/AndroidRuntime(31140):    at android.support.v4.view.ViewPager.populate(ViewPager.java:881) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:10:54.713

```
startActivityForResult(bookIntent,RESID); 
```

我想这是一个异步调用。程序不会等到启动活动完成并返回结果，而是只执行这一行并继续下一行。这就是为什么`RESID`该方法返回的`showHotelMap()`是**0**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:44:02.263

试试这样它可能会帮助你..

```
public class TabsViewPagerFragmentActivity extends FragmentActivity implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener {

    private TabHost mTabHost;
    private ViewPager mViewPager;
    private HashMap<String, TabInfo> mapTabInfo = new HashMap<String, TabsViewPagerFragmentActivity.TabInfo>();
    private PagerAdapter mPagerAdapter;

    private class TabInfo {
         private String tag;
         private Class<?> clss;
         private Bundle args;
         private Fragment fragment;
         TabInfo(String tag, Class<?> clazz, Bundle args) {
             this.tag = tag;
             this.clss = clazz;
             this.args = args;
         }

    }

    class TabFactory implements TabContentFactory {

        private final Context mContext;

        public TabFactory(Context context) {
            mContext = context;
        }

        /** (non-Javadoc)
         * @see android.widget.TabHost.TabContentFactory#createTabContent(java.lang.String)
         */
        public View createTabContent(String tag) {
            View v = new View(mContext);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);
            return v;
        }

    }
    /** (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onCreate(android.os.Bundle)
     */
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // Inflate the layout
        setContentView(R.layout.tabs_viewpager_layout);
        // Initialise the TabHost
        this.initialiseTabHost(savedInstanceState);
        if (savedInstanceState != null) {
            mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); //set the tab as per the saved state
        }
        // Intialise ViewPager
        this.intialiseViewPager();
    }

    /** (non-Javadoc)
     * @see android.support.v4.app.FragmentActivity#onSaveInstanceState(android.os.Bundle)
     */
    protected void onSaveInstanceState(Bundle outState) {
        outState.putString("tab", mTabHost.getCurrentTabTag()); //save the tab selected
        super.onSaveInstanceState(outState);
    }

    /**
     * Initialise ViewPager
     */
    private void intialiseViewPager() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Tab1Fragment.class.getName()));
        fragments.add(Fragment.instantiate(this, Tab2Fragment.class.getName()));
        fragments.add(Fragment.instantiate(this, Tab3Fragment.class.getName()));
        this.mPagerAdapter  = new PagerAdapter(super.getSupportFragmentManager(), fragments);
        //
        this.mViewPager = (ViewPager)super.findViewById(R.id.viewpager);
        this.mViewPager.setAdapter(this.mPagerAdapter);
        this.mViewPager.setOnPageChangeListener(this);
    }

    /**
     * Initialise the Tab Host
     */
    private void initialiseTabHost(Bundle args) {
        mTabHost = (TabHost)findViewById(android.R.id.tabhost);
        mTabHost.setup();
        TabInfo tabInfo = null;
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab1").setIndicator("Tab 1"), ( tabInfo = new TabInfo("Tab1", Tab1Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab2").setIndicator("Tab 2"), ( tabInfo = new TabInfo("Tab2", Tab2Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        TabsViewPagerFragmentActivity.AddTab(this, this.mTabHost, this.mTabHost.newTabSpec("Tab3").setIndicator("Tab 3"), ( tabInfo = new TabInfo("Tab3", Tab3Fragment.class, args)));
        this.mapTabInfo.put(tabInfo.tag, tabInfo);
        // Default to first tab
        //this.onTabChanged("Tab1");
        //
        mTabHost.setOnTabChangedListener(this);
    }

    /**
     * Add Tab content to the Tabhost
     * @param activity
     * @param tabHost
     * @param tabSpec
     * @param clss
     * @param args
     */
    private static void AddTab(TabsViewPagerFragmentActivity activity, TabHost tabHost, TabHost.TabSpec tabSpec, TabInfo tabInfo) {
        // Attach a Tab view factory to the spec
        tabSpec.setContent(activity.new TabFactory(activity));
        tabHost.addTab(tabSpec);
    }

    /** (non-Javadoc)
     * @see android.widget.TabHost.OnTabChangeListener#onTabChanged(java.lang.String)
     */
    public void onTabChanged(String tag) {
        //TabInfo newTab = this.mapTabInfo.get(tag);
        int pos = this.mTabHost.getCurrentTab();
        this.mViewPager.setCurrentItem(pos);
    }

    /* (non-Javadoc)
     * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageScrolled(int, float, int)
     */
    @Override
    public void onPageScrolled(int position, float positionOffset,
            int positionOffsetPixels) {
        // TODO Auto-generated method stub

    }

    /* (non-Javadoc)
     * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageSelected(int)
     */
    @Override
    public void onPageSelected(int position) {
        // TODO Auto-generated method stub
        this.mTabHost.setCurrentTab(position);
    }

    /* (non-Javadoc)
     * @see android.support.v4.view.ViewPager.OnPageChangeListener#onPageScrollStateChanged(int)
     */
    @Override
    public void onPageScrollStateChanged(int state) {
        // TODO Auto-generated method stub

    }
} 
```

否则从给定的链接获得帮助..

[http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)

# django - 语言方面的排版报价

> ID：14099574
> 
> 赞同：3
> 
> 时间：2012-12-31T09:00:27.370
> 
> 标签：django, typography

有没有人遇到过 Django 模板过滤器将“直引号”转换为给定语言的印刷正确等价物，例如“波兰语”或“俄语”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T22:51:04.967

看起来不存在执行此操作的过滤器 - 您需要自己编写一个。[Smartypants](http://web.chad.org/projects/smartypants.py/)可以帮你做英文报价，但我不确定你会为其他人使用什么。

# .net - 用vs2012打开vs2010解决方案而不改变sln

> ID：14099576
> 
> 赞同：1
> 
> 时间：2012-12-31T09:00:33.237
> 
> 标签：.net, visual-studio-2010, visual-studio-2012, projects-and-solutions

我正在尝试使用 Visual Studio 2012。我可以使用 VS2012` 打开 VS2010 解决方案，这很好且符合预期，但我想知道我们是否可以在不更改它们的情况下打开 VS2010 解决方案。我想要这个，因为我们使用源代码控制系统，我们团队的一些成员仍然使用 VS2010，所以我不希望我的解决方案文件被更改。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:15:38.273

与以前版本的 Visual Studio 不同，我*认为*VS2012 在您打开它们时根本不会对 VS2010 解决方案文件进行任何更改。这就是为什么没有提示。

最简单的事情就是将解决方案作为实验打开——也许做一些你通常想做的改变，例如添加一个新项目——然后将你的文件与源代码控制中的文件进行比较。我希望它会好起来的。完成实验后，只需以任何一种方式恢复本地更改（假设它们不是您想要实际保留的更改），您就会离开。

# php - 如何在php中添加确认框

> ID：14099583
> 
> 赞同：-3
> 
> 时间：2012-12-31T09:01:08.353
> 
> 标签：php

嗨，这是我从服务器中删除 excel 文件的 php 代码。在这里，我想在删除过程之前添加一个确认框。

```
<?php
    $files=glob("*.csv");    
    foreach ($files as $list)
    { 
        $file=str_replace(".csv","",$list);?>
            <option value="<?php echo $file;?>"><?php echo $file;?></option>
<?php }?>
     </select>

     <input type="submit" name="download" value="DownLoadExcel">
     <input type="submit" name="delete" value="DeleteExcel">

      <?php

            if (isset($_POST['delete'])=="DeleteExcel")
             {            
                $filename=$_POST['mylist'];
                     if (!empty($filename))
                         {
                             $filename.=".csv";
                             if (file_exists($filename))
                             unlink($filename);
                        }
            }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:03:41.647

```
 <input type="submit" name="delete" value="DeleteExcel" onclick="return confirm('Are you sure');"> 
```

以这种方式使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:05:23.817

试试这个，只需在 onclick 事件中添加 javascript 确认

```
<input type="submit" name="delete" value="DeleteExcel" onclick="return confirm('Do you want to delete this?');"> 
```

# php - 如何将 2 个数组插入 mysql 数据库到 2 列，不同的行？

> ID：14099584
> 
> 赞同：0
> 
> 时间：2012-12-31T09:01:09.727
> 
> 标签：php, mysql, database

```
foreach ($_SESSION['exampleOne'] as $item)
{//insert sql

foreach ($_SESSION['exampleTwo'] as $comment)
{//insert sql 
```

如何将 2 个 foreach 合并在一起？现在我的数据库存储是这样的..：

```
 comment | item
    ---------------
    Nice!   | Pants
    Great!  | Pants
    Awesome!| Pants
    Nice!   | Skirts
    Great!  | Skirts
    Awesome!| Skirts
    Nice!   | Shirts
    Great!  | Shirts
    Awesome!| Shirts 
```

当我存储它时，我希望它以某种方式在我的数据库中是这样的：

```
comment | item
---------------
Nice!   | Pants
Great!  | Skirts
Awesome!| Shirts 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:15:04.000

你可以这样做——

```
$merge = array_combine ($_SESSION['exampleOne'],$_SESSION['exampleTwo'])
foreach($merge as $key => $value)
{
    // your insert query
    $query = "insert into tableName set comment='$key', item='$value'";
} 
```

# wpf - 在列表视图模板的画布外绘制 ListViewItem

> ID：14099596
> 
> 赞同：4
> 
> 时间：2012-12-31T09:03:30.773
> 
> 标签：wpf, listview, layout, canvas

我有一个 ListView，它的 ItemsPanelTemplate 是一个 Canvas，每个项目都是一个矩形。我正在尝试在 (-50,-50) 的位置在 Canvas 外绘制一个矩形，但没有连续。我能以某种方式做到这一点吗？

![在此处输入图像描述](../Images/9959ae597f39821d79171dfbf8302d15.png)

XAML：

```
<Grid >
    <ListView BorderThickness="0" BorderBrush="Transparent" ItemsSource="{Binding Rectangles}" Height="200" Width="200">
        <ListView.Resources>
            <Style TargetType="{x:Type ListViewItem}">
                <Setter Property="Canvas.Left" Value="{Binding Left, Mode=TwoWay}" />
                <Setter Property="Canvas.Top"  Value="{Binding Top, Mode=TwoWay}" />
            </Style>
        </ListView.Resources>
        <ListView.ItemTemplate>
            <DataTemplate DataType="{x:Type WpfApplication2:RectangleModel}">
                <Rectangle Width="30" Height="30"  Canvas.Left="{Binding Left}" Canvas.Right="{Binding Right}" Fill="LightCoral"
                           ClipToBounds="False"/>
            </DataTemplate>
        </ListView.ItemTemplate>

        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas Background="LightBlue"/>
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
    </ListView>
</Grid> 
```

后面的代码：

```
 public partial class MainWindow : Window
{
    public List<RectangleModel> Rectangles { get; set; }

    public MainWindow()
    {
        Rectangles = new List<RectangleModel>();
        Rectangles.Add(new RectangleModel { Left = -50, Top = -50 });
        Rectangles.Add(new RectangleModel { Left = 0, Top = 0 });
        Rectangles.Add(new RectangleModel { Left = 50, Top = 50 });
        DataContext = this;
        InitializeComponent();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T00:53:01.390

我可能错了，但这似乎是一个相当简单的问题（我可能完全假设了错误的事情，但我不确定，所以我会假设以防万一）。

您已将您定义`ListView`为 200 乘以 200，并且您`Canvas`正在占用所有空间。从你的照片来看，我觉得`Canvas`你想成为 200 到 200 的人，而不是`ListView`.

**xml:**

```
<Grid >
        <ListView BorderThickness="0" BorderBrush="Transparent" ItemsSource="{Binding Rectangles}">
            <ListView.Resources>
                <Style TargetType="{x:Type ListViewItem}">
                    <Setter Property="Canvas.Left" Value="{Binding Left, Mode=TwoWay}" />
                    <Setter Property="Canvas.Top"  Value="{Binding Top, Mode=TwoWay}" />
                </Style>
            </ListView.Resources>
            <ListView.ItemTemplate>
                <DataTemplate DataType="{x:Type wpfApplication1:RectangleModel}">
                    <Rectangle Width="30" Height="10"  Canvas.Left="{Binding Left}" Canvas.Top="{Binding Top}" Fill="LightCoral"
                           ClipToBounds="False"/>
                </DataTemplate>
            </ListView.ItemTemplate>

            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas Background="LightBlue" ClipToBounds="False" Height="200" Width="200"/>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
        </ListView>
    </Grid> 
```

**结果：**

![在此处输入图像描述](../Images/3ac5fcbd1b0ea70c79b8c8193f8b5f01.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T00:44:59.173

试试这种风格（我从默认模板中删除了滚动查看器）：

我同意这样的评论，即像这样绘制的控件是值得怀疑的。

```
<Window x:Class="CanvasListView.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
        xmlns:CanvasListView="clr-namespace:CanvasListView"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        d:DataContext="{d:DesignInstance Type=CanvasListView:MainWindow,IsDesignTimeCreatable=True}"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <SolidColorBrush x:Key="ListBorder" Color="#828790"/>
        <Style TargetType="{x:Type ListView}">
            <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
            <Setter Property="BorderBrush" Value="{StaticResource ListBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
            <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
            <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
            <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListView}">
                        <Border x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="1" SnapsToDevicePixels="true">
                            <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsEnabled" Value="false">
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                            </Trigger>
                            <Trigger Property="IsGrouping" Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid>
        <ListView BorderThickness="0" BorderBrush="Transparent" ItemsSource="{Binding Rectangles}" Height="200" Width="200">
            <ListView.Resources>
                <Style TargetType="{x:Type ListViewItem}">
                    <Setter Property="Canvas.Left" Value="{Binding Left, Mode=TwoWay}" />
                    <Setter Property="Canvas.Top"  Value="{Binding Top, Mode=TwoWay}" />
                </Style>
            </ListView.Resources>
            <ListView.ItemTemplate>
                <DataTemplate DataType="{x:Type CanvasListView:RectangleModel}">
                    <Rectangle Width="30" Height="30"   Fill="{Binding Color}"/>
                </DataTemplate>
            </ListView.ItemTemplate>

            <ListView.ItemsPanel>
                <ItemsPanelTemplate>
                    <Canvas Background="LightBlue"/>
                </ItemsPanelTemplate>
            </ListView.ItemsPanel>
        </ListView>
    </Grid>
</Window> 
```

我在视图模型中添加了一个颜色属性：

```
public string Color { get; set; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T03:05:48.520

我是通过 Popup 完成的，它看起来不错，但我不知道它是否符合您的要求

```
<Grid  Background="Transparent">
    <ListView BorderThickness="0" BorderBrush="Transparent" ItemsSource="{Binding Rectangles}" Height="200" Width="200">
        <ListView.Resources>
            <Style TargetType="{x:Type ListViewItem}">
                <Setter Property="Canvas.Left" Value="{Binding Left, Mode=TwoWay}" />
                <Setter Property="Canvas.Top"  Value="{Binding Top, Mode=TwoWay}" />
            </Style>
        </ListView.Resources>
        <ListView.ItemTemplate>
            <DataTemplate DataType="{x:Type WpfApplication2:RectangleModel}">
                <Popup Width="30" Height="30"  Canvas.Left="{Binding Left}" Canvas.Right="{Binding Right}" 
                       IsOpen="True"
                       ClipToBounds="False">
                    <Rectangle Fill="LightCoral"/>
                </Popup>
            </DataTemplate>
        </ListView.ItemTemplate>

        <ListView.ItemsPanel>
            <ItemsPanelTemplate>
                <Canvas Background="LightBlue"/>
            </ItemsPanelTemplate>
        </ListView.ItemsPanel>
    </ListView>
</Grid> 
```

这给出了与您想要的相同的结果。但是你需要在这方面做更多的工作，比如他们的相对位置等等。

# jquery - 更改 CSS Div 悬停区域

> ID：14099600
> 
> 赞同：0
> 
> 时间：2012-12-31T09:04:16.923
> 
> 标签：jquery, css, html, hover

我有这个纯 CSS 悬停，当你翻转一个 div 时它会显示一个 div。这是CSS：

```
.rolloverad {
height:42px;
width:235px;
position: absolute;
top: 0px;
left: 404px;
background:#ccc;
}

.rolloveradexpanded {
display: none;
position:absolute;
width:500px;
height:250px;
z-index:30;
background:#000;
color:#fff;
}

.rolloverad:hover + .rolloveradexpanded {
display: block;
}​ 
```

这很好用，接受一件小事...当您的鼠标离开 div 区域以进行 "rolloverad" 时，较大的 div 会返回到`display:none`. 我希望这样当您将鼠标悬停在 rolloverad div 上，并且 rolloveradexpanded div 出现时，rolloverexpanded div 保持可见，直到您的鼠标离开 rolloverexpanded div 区域，而不是较小的 rollover ad div。一旦你查看了 jsfiddle，它就更有意义了：http: [//jsfiddle.net/JuruE/](http://jsfiddle.net/JuruE/)

看着 jsfiddle .. 当您将鼠标悬停在显示“悬停”的灰色框上时，会出现一个大黑框。现在，一旦你的鼠标离开小灰盒区域，大黑盒就会消失。我想让它这样黑盒 div 不会消失，直到你的鼠标离开更大的框区域，而不是更小的框区域。

如果有人对如何用 CSS 解决这个问题有任何建议或答案，或者甚至是 jquery 替代品.. 那太棒了！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:06:47.660

您可以添加另一个选择器来执行此操作：

```
.rolloverad:hover + .rolloveradexpanded, .rolloveradexpanded:hover {
    display: block;
}​ 
```

**演示：http: [//jsfiddle.net/JuruE/1/](http://jsfiddle.net/JuruE/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:15:57.887

将此 linr 添加到您的 css 中。那可行 。

```
.rolloveradexpanded:hover{
    display:block;
} 
```

# java - 在 jce api 中为密码学 java 提供我自己的密钥

> ID：14099604
> 
> 赞同：0
> 
> 时间：2012-12-31T09:04:35.907
> 
> 标签：java, algorithm, security, cryptography

我想使用 JCE API 使用 DES 算法加密和解密文件和字符串，并且我想提供自己的密钥，但是当我寻找示例时，我发现密钥是这样生成的：

```
 import java.security.InvalidKeyException;
import java.security.NoSuchAlgorithmException;

import javax.crypto.BadPaddingException;
import javax.crypto.Cipher;
import javax.crypto.IllegalBlockSizeException;
import javax.crypto.KeyGenerator;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.SecretKey;

public class JEncrytion
{    
    public static void main(String[] argv) {

        try{

            KeyGenerator keygenerator = KeyGenerator.getInstance("DES");
            SecretKey myDesKey = keygenerator.generateKey();
                    String key = "zertyuio";
            Cipher desCipher;

            // Create the cipher 
            desCipher = Cipher.getInstance("DES");

            // Initialize the cipher for encryption
            desCipher.init(Cipher.ENCRYPT_MODE, myDesKey);

            //sensitive information
            byte[] text = "No body can see me".getBytes();

            System.out.println("Text [Byte Format] : " + text);
            System.out.println("Text : " + new String(text));

            // Encrypt the text
            byte[] textEncrypted = desCipher.doFinal(text);

            System.out.println("Text Encryted : " + textEncrypted);

            // Initialize the same cipher for decryption
            desCipher.init(Cipher.DECRYPT_MODE, myDesKey);

            // Decrypt the text
            byte[] textDecrypted = desCipher.doFinal(textEncrypted);

            System.out.println("Text Decryted : " + new String(textDecrypted));

        }catch(NoSuchAlgorithmException e){
            e.printStackTrace();
        }catch(NoSuchPaddingException e){
            e.printStackTrace();
        }catch(InvalidKeyException e){
            e.printStackTrace();
        }catch(IllegalBlockSizeException e){
            e.printStackTrace();
        }catch(BadPaddingException e){
            e.printStackTrace();
        } 

    }
} 
```

你有什么主意吗

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:20:43.537

看看课堂`javax.crypto.spec.SecretKeySpec`。它允许您使用保存密钥的字节数组。

然后可以将实例`Cipher.init`作为键传递给方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:31:24.620

[对于 DES，您可以从DESKeySpec](http://docs.oracle.com/javase/7/docs/api/javax/crypto/spec/DESKeySpec.html)创建您的密钥：

```
SecretKey myDesKey =
    SecretKeyFactory.getInstance("DES").generateSecret(new DESKeyspec(key.getBytes())); 
```

# qt - 配置 qmake 以将头文件安装到不同的子文件夹

> ID：14099608
> 
> 赞同：4
> 
> 时间：2012-12-31T09:05:20.133
> 
> 标签：qt, qmake, nmake

我有一个项目，其中头文件位于 qt 项目文件中的不同子文件夹（*/config/.h；/thread/.h*等）中，它们包括：

```
HEADERS += $$PWD/src/*.h
HEADERS += $$PWD/src/config/*.h 
```

然后安装被描述为简单：

```
headers.files = $$HEADERS
headers.path  = $$INSTALL_INC_DIR/proj 
```

使用此库的其他一些项目将包含该安装目录中的文件并出现问题 - 所有 .h 文件都复制到同一个文件夹，没有子文件夹，并且在代码中它们包含在子文件夹（`#include <proj/config/config.h>`）中。

是否可以告诉 qmake（或实际上是 nmake）在复制文件时保留原始文件夹结构？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-09-13T06:28:24.800

这对我有用：

标头安装.pri：

```
for(header, INSTALL_HEADERS) {
  path = $${INSTALL_PREFIX}/$${dirname(header)}
  eval(headers_$${path}.files += $$header)
  eval(headers_$${path}.path = $$path)
  eval(INSTALLS *= headers_$${path})
} 
```

在 .pro 文件的末尾：

```
INSTALL_PREFIX = /tmp/installprefix
INSTALL_HEADERS = $$HEADERS
include(headerinstall.pri) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-08T14:20:27.997

我敢肯定，目前接受的 2013 年答案暂时有效。但是，对于我来说，在`$${path}`. 现在，我们还必须`$$list()`列出一个文件列表，以便在 for 循环中使用它。

这是我想出的方法。我把它写在一个`*.pri`文件中并将它添加到我的目录结构中。不需要额外的`INSTALL_HEADERS`变量：

```
for(header, $$list($$HEADERS)) {
  path = $$OUT_PWD/../include/$$dirname(header)
  pathname = $$replace(path,/,)
  pathname = $$replace(pathname,\.,)
  pathname = $$replace(pathname,:,)
  file = headers_$${pathname}
  eval($${file}.files += $$header)
  eval($${file}.path = $$path)
  INSTALLS *= $${file}
} 
```

请注意，替换字符可能因您而异。例如，我上面的第一种方法仍然存在路径中的空格问题，所以我添加了：

`pathname = $$replace(pathname," ",)`

# java - Eclipse 显示嵌套类 (Java) 的两个 THIS$0 字段

> ID：14099613
> 
> 赞同：3
> 
> 时间：2012-12-31T09:06:05.597
> 
> 标签：java, eclipse, exception, nested, extends

我一直面临着一个我不太了解的奇怪现象。我有一个由其他几个类扩展的抽象类。抽象类是一种特殊的集合，它有一个适合它的嵌套抽象迭代器类。每个扩展抽象集合类的类，也都有一个嵌套迭代器类，它扩展了原始抽象迭代器。

抽象类是这样的：

```
public abstract class AbstractMultiCollection<T> {

    public AbstractMultiCollection() {
    ...
    }

    MultiIterator<T> iterator();

    public abstract class AbstractMultiIterator {
        public AbstractMultiIterator() {
        ...
        } 
```

扩展类是这样的：

```
public class MajorityMultiCollection<T> extends AbstractMultiCollection<T> {
...
    public MultiIterator<T> iterator() {
        return new MajorityIterator();
    }
    ...     

    public class MajorityIterator extends AbstractMultiIterator {

        public MajorityIterator() {
        super();
        ...
        }

        public T next() {
        ...
        } 
```

简单地说，集合扩展了抽象集合，它们的嵌套迭代器扩展了嵌套的抽象迭代器。

我有两个我不明白的问题，希望得到澄清：

1.  当我调试我的代码时，“return new MajorityIterator();” 行在 Eclipse 调试器中引发“未找到源”错误和“ClassNotFound”异常以及我不理解的一堆“ClassLoaderExt”异常。
2.  我注意到每个“MajorityIterator”都有两个“This$0”字段，包含他所属的集合。一开始是空的，但是一旦我调用“super();”就会收到集合 建设者。

我没找到原因，谁能解释一下？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:16:33.813

实际上有两个`this`参考是有道理的。大多数人没有意识到的一件事是Java 编译器*如何*实现非静态嵌套类：

*   它隐式地添加了一个具有外部类类型的新字段，我们称之为`outer$object`。

*   它隐式地将外部类对象的新参数添加到所有构造函数以填充该字段。顺便说一句，这意味着内部类的默认构造函数实际上有一个参数，这使得通过反射使用它变得更加复杂。

*   它隐式地创建具有更广泛可见性的构造函数和方法，以解决任何可访问性问题，例如，如果声明了内部类`private`。

由于该`outer$object`字段需要与外部类具有相同的类型，因此每次嵌套类*从未*嵌套在同一外部类中的类继承时都会添加一个。

就个人而言，我倾向于避免使用非静态非匿名内部类，以便将所有内容明确地保留在表面上，而不是让编译器把事情弄得一团糟……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:13:52.093

一个`MajorityIterator`对象确实有两个`this$0`字段：

*   一个（在 中隐式声明`MajorityIterator`）用于引用的封闭实例`MajorityMultiCollection`
*   一个（在 中隐式声明`AbstractMultiIterator`）用于引用 的封闭实例`AbstractMultiCollection`。这将在`super()`调用之前为 null，因为它将在构造函数中设置。

您可能会发现创建这些*静态*嵌套类更清晰，并改为显式传递对封闭实例的引用 - 我怀疑您只*需要*一个引用，而且推理起来会更简单。

# vb6 - 如何通过代码从另一个 VB 6 应用程序运行/启动 VB 6 项目（ .VBp ）？

> ID：14099619
> 
> 赞同：-1
> 
> 时间：2012-12-31T09:07:10.070
> 
> 标签：vb6

我有一个 VB6 插件，需要一个一个递归地启动 .vbp 项目，修改属性然后保存并关闭。

我不能使用`Shell(app name)`，因为它需要 exe，但我想打开一个 .vbp 项目。

有没有办法通过代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T09:48:10.203

看看[Visual Basic 命令行编译器](http://msdn.microsoft.com/en-us/library/s4kbxexc.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:46:22.750

如果我理解正确，那么您要做的是修改 vb 项目的各种文件，这只是一个案例处理文本。

如，找到每个项目的 .vbp 文件，对其进行解析以找到该项目中的 .frm、.bas 等文件等，然后根据需要进行修改。

使用记事本打开一些 vb 文件（.vbp、.frm、.bas、.cls），您将很快了解您需要做什么

# java - 在java中将字母数字字符串转换为字节？

> ID：14099621
> 
> 赞同：2
> 
> 时间：2012-12-31T09:07:17.607
> 
> 标签：java, string, byte, alphanumeric

> **可能重复：**
> [将十六进制字符串转换为 Java 中的字节](https://stackoverflow.com/questions/1467005/convert-a-hex-string-to-a-byte-in-java)

在这里，我需要将字母数字字符串转换为字节值，例如：

**字符串 str ="1b"**到字节值。我尝试使用`getbytes`, `(Byte.valueOf(str))`, ( `Byte.parseByte(str))`.

所有命令都显示了一个异常，称为

```
 java.lang.NumberFormatException 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:10:01.263

假设您总是有一个代表十六进制值的 2 个字符的字符串，您只需要：

```
byte b = Byte.parseByte(text, 16); 
```

您需要指定 16 以便它知道将其视为十六进制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:13:51.943

我希望这可以帮助你

```
public class TestByte
{    
    public static void main(String[] argv) {

            String example = "example100";
            byte[] bytes = example.getBytes();

            System.out.println("Text : " + example);
            System.out.println("Text [Byte Format] : " + bytes);

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T09:11:51.490

使用

> Byte.parseByte("0x0b", 16); 16：基数

# delphi - 提取两个字符串之间的字符串

> ID：14099628
> 
> 赞同：3
> 
> 时间：2012-12-31T09:08:20.147
> 
> 标签：delphi, delphi-xe2

我如何在 A 和 B 之间提取随机字符串。例如：

**A 随机字符串 B**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-31T09:21:36.093

假设“randomstring”不包含封闭字符串“A”或“B”，您可以使用两次调用 pos 来提取字符串：

```
function ExtractBetween(const Value, A, B: string): string;
var
  aPos, bPos: Integer;
begin
  result := '';
  aPos := Pos(A, Value);
  if aPos > 0 then begin
    aPos := aPos + Length(A);
    bPos := PosEx(B, Value, aPos);
    if bPos > 0 then begin
      result := Copy(Value, aPos, bPos - aPos);
    end;
  end;
end; 
```

当未找到 A 或 B 时，该函数将返回一个空字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:29:30.117

另一种方法：

```
function ExtractTextBetween(const Input, Delim1, Delim2: string): string;
var
  aPos, bPos: Integer;
begin
  result := '';
  aPos := Pos(Delim1, Input);
  if aPos > 0 then begin
    bPos := PosEx(Delim2, Input, aPos + Length(Delim1));
    if bPos > 0 then begin
      result := Copy(Input, aPos + Length(Delim1), bPos - (aPos + Length(Delim1)));
    end;
  end;
end;

Form1.Caption:= ExtractTextBetween('something?lol/\http','something?','/\http'); 
```

结果=哈哈

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T14:49:01.693

用正则表达式回答:)

```
uses RegularExpressions;
...
function ExtractStringBetweenDelims(Input : String; Delim1, Delim2 : String) : String;

var
  Pattern : String;
  RegEx   : TRegEx;
  Match   : TMatch;

begin
 Result := '';
 Pattern := Format('^%s(.*?)%s$', [Delim1, Delim2]);
 RegEx := TRegEx.Create(Pattern);
 Match := RegEx.Match(Input);
 if Match.Success and (Match.Groups.Count > 1) then
  Result := Match.Groups[1].Value;
end;

procedure TForm1.FormCreate(Sender: TObject);
begin
 ShowMessage(ExtractStringBetweenDelims('aStartThisIsWhatIWantTheEnd', 'aStart', 'TheEnd'));
end; 
```

# css - 如何在 Rails 中使用 tinymce content.css

> ID：14099629
> 
> 赞同：1
> 
> 时间：2012-12-31T09:08:27.073
> 
> 标签：css, ruby-on-rails-3, tinymce, asset-pipeline

我需要提供 tinymce 一个 css 文件来获取样式，但是如果我在任何文件中设置类似

```
body{
    font-size: 14px;
} 
```

它会将 webapp 的主体设置为该样式，而不仅仅是 tinymce 的输入框。

如何为 tinymce 提供包含资产管道的 content.css 文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-31T09:39:09.450

正确的格式是写

```
body.mceContentBody {
    font-size: 14px;

} 
```

或在 TinyMCE 4.x 中（类名已更改）

```
body.mce-content-body {
    font-size: 14px;
} 
```

并且tinymce（如果使用gem）应该是

```
<%= tinymce :content_css => asset_path('application.css')%> 
```

# android - 二进制 XML 文件行：膨胀类 io.vov.vitamio.widget.CenterLayout 时出错

> ID：14099633
> 
> 赞同：1
> 
> 时间：2012-12-31T09:09:10.653
> 
> 标签：android, flv, android-videoview

**主要的.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
    <io.vov.vitamio.widget.CenterLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/video_root"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@android:color/black"
        android:orientation="horizontal" >

        <io.vov.vitamio.widget.VideoView
            android:id="@+id/video"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:fitsSystemWindows="true"
            android:saveEnabled="true" />                   

    </io.vov.vitamio.widget.CenterLayout> 
```

**MainActivity.java**

公共类 MainActivity 扩展 Activity {

```
private String path = "http://devimages.apple.com/iphone/samples/bipbop/gear1/prog_index.m3u8";
private VideoView mVideoView;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 

    test_2();             
} 

private void test_2() throws VitamioNotCompatibleException, VitamioNotFoundException, NameNotFoundException{
    VR.init(getApplicationContext());
   mVideoView =(VideoView)findViewById(R.id.VideoView);
   mVideoView.setVideoPath(path);
   mVideoView.setVideoQuality(MediaPlayer.VIDEOQUALITY_HIGH);
   mVideoView.setMediaController(new MediaController(this));
} 
```

}

**清单.xml**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.videovit"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.GET_TASKS" />

    <application

        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

错误：当我运行程序时，main.xml 出现错误。我不知道这段代码的主要问题是什么。我尝试在 videoview 中从远程 url 播放 flv 文件。我也尝试添加清单文件。但是不知道我应该添加什么图书馆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:13:50.177

您正在为您的布局使用自定义小部件。您是否`io.vov.vitamio.widget.CenterLayout` 包含在类路径中？Perphaps Android 只是无法解析您的 csutom 小部件并给您一个错误。

# jakarta-ee - 配置jboss-web.xml进行隔离部署，解决日志变大问题

> ID：14099636
> 
> 赞同：0
> 
> 时间：2012-12-31T09:09:43.423
> 
> 标签：jakarta-ee, jboss7.x, struts2

继续我之前的帖子[https://stackoverflow.com/questions/14051282/eap-jboss-log-txt-file-getting-large-space](https://stackoverflow.com/questions/14051282/eap-jboss-log-txt-file-getting-large-space)，我使用 My Eclipse 作为我的项目的 ide（带有 Struts 2 的 Web 项目& 休眠 3)。在 EAP jboss 上部署它时，它会生成 log.txt 并在每次点击链接时填充到 2MB。我试图通过我在上一篇文章的评论中提到的 log4j.properties 来解决它，但没有解决它。当我浏览其他站点时，他们提到通过配置 jboss-web.xml 进行隔离部署。由于我使用的是 EAP 6.0，我无法从其他站点找到任何帮助。当我尝试通过[http://planet.jboss.org/post/how_do_i_use_my_own_log4j_properties_or_xml_file_in_jboss](http://planet.jboss.org/post/how_do_i_use_my_own_log4j_properties_or_xml_file_in_jboss) 作为

```
<jboss-web>
<class-loading>
    <loader-repository>
        com.emag:loader='com.emag.repository'
        <loader-repository-config>java2ParentDelegation=false</loader-repository-
config>
    </loader-repository>
</class-loading>
</jboss-web>  i got    javax.xml.stream.XMLStreamException: ParseError at [row,col]:[3,3].... How can i solve it? Please some one help me.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T08:53:22.990

尝试通过 ./standalone.sh -Djboss.bind.address=0.0.0.0 -Djboss.bind.address.management=0.0.0.0 -Dorg.jboss.as.logging.per-deployment=false 启动 EAP Jboss

检查链接：[https](https://community.jboss.org/message/788670#788670) ://community.jboss.org/message/788670#788670了解更多详情

# sharepoint - 筛选 SPService CASCADING 下拉列表中的第一个下拉列表

> ID：14099645
> 
> 赞同：0
> 
> 时间：2012-12-31T09:10:40.923
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我正在处理 Sharepoint 的级联下拉菜单。

我能够毫无问题地实现这一点。

现在我的问题是如何使用 caml 查询过滤 First dropwdown Fill 值。

例如，我有根据项目的项目和任务名称列表。

项目是我的第一个下拉列表，根据选择我填写第二个任务名称下拉列表。现在我只想将那些项目填入当前处于活动状态的 First Dropdown 中（Activew = Yes 列表中的布尔列）。怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T05:55:39.487

我自己解决了这个问题

为此，我必须使用 SPServices.codeplex.com 中的 Filtered LookUp 列。

在您的应用程序中添加此 wsp 后，您可以创建一个列作为过滤查找。

实现我想要的结果（过滤第一个下拉菜单）。我将在我的列表中创建一个视图，它将仅从列表中获取活动项目，我将绑定到第一个下拉列表。

[看看这个链接](http://spservices.codeplex.com/wikipage?title=%24%28%29.SPServices.SPCascadeDropdowns)

# magento - Magento 帐单地址 n/a 字段值 - 当客户注册但还没有任何地址时

> ID：14099657
> 
> 赞同：2
> 
> 时间：2012-12-31T09:11:49.240
> 
> 标签：magento, checkout, billing

我在 Magento 结帐页面上遇到问题。当客户注册时，未在我的帐户部分输入他/她的地址详细信息并尝试结帐，然后在计费屏幕上获取应为空的 n/a 值的字段。只有名字和姓氏应该在那里。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-31T10:14:06.927

所以你需要覆盖 `app\design\frontend\base\default\template\checkout\onepage\progress.phtml`下面代码中的第 41 行。

```
<address><?php echo $this->getBilling()->format('html') ?></address> 
```

用于侧边栏和 `app\design\frontend\base\default\template\checkout\onepage\billing.phtml`用于第 34 行附近的下拉菜单

```
<?php echo $this->getAddressesHtmlSelect('billing') ?> 
```

# ios - 第一代 iPad 上的 OpenGL 图形质量不佳

> ID：14099660
> 
> 赞同：2
> 
> 时间：2012-12-31T09:12:02.083
> 
> 标签：ios, ipad, opengl-es, opengl-es-2.0

我正在使用 NinevehGL 图形库为 iOS 应用程序渲染 3D 模型。模拟器上的渲染效果非常好，在 iPhone 4S、iPad 2 和其他最近的设备上运行良好。

但质量不如第一代 iPad。

看图片

**iPad（第一代）以及 iPhone 3GS：**

![iPad版](../Images/2de236c23d2d875ac1dd51d73d5636da.png)

**iPhone 4S：**

![在此处输入图像描述](../Images/7c0155bd504eea99e279c4f74ade724c.png)

基本上iPad上的渐变效果很差。。我现在不担心抗锯齿，但我担心颜色渐变变化的明显差异。在第一张图像中可以清楚地看到黑暗和明亮的区域......但在第二张图像中，这些区域并不是那么明显。

这是特定于设备的事情，还是我可以更改任何构建设置以获得此版本 iPad 的更好图形？

# linux - 非常简单的 Linux VFS 实现

> ID：14099662
> 
> 赞同：2
> 
> 时间：2012-12-31T09:12:53.580
> 
> 标签：linux, kernel, vfs

我有点坚持这一点，这是我第一次尝试任何类型的内核开发。我的项目比这更复杂一些，但我坚持的是非常基本的。

我想要一个只读文件系统，在根目录中有一些目录，以及其中的文件。就是这样，没有别的了。如果我能得到这个硬编码，那么以后修改它以使其全部动态化将是小菜一碟，只要我可以即时加载。

基本上，我的问题是：

如何创建一个文件系统，以便每次挂载它并从命令行调用“ls”时，我都会从我的模块中获得一个新的文件列表（现在是硬编码，将来将被动态提取）。

我有比这更多的代码，但到目前为止，这是我有信心的：

```
int testfs_super(struct super_block *superblock, void *data, int silent) {
static struct inode_operations inode_operations = {
    .lookup = simple_lookup,
};
struct inode *inode = new_inode(superblock);
struct dentry *root;
save_mount_options(superblock, data);
superblock -> s_op = &testfs_ops;
/*
superblock -> s_maxbytes = 10000000;
superblock -> s_blocksize = PAGE_SIZE;
superblock -> s_blocksize_bits = PAGE_SHIFT;*/
inode -> i_ino = 0;
inode_init_owner(inode, NULL, S_IFDIR | testfs_DIRECTORY_MODE);
inode -> i_op = &inode_operations;
inode -> i_fop = &simple_dir_operations;
root = d_make_root(inode);
if (!root) {
    return -ENOMEM;
}
superblock -> s_root = root;
return 0;
}

struct dentry *testfs_mount(struct file_system_type *fs_type, int flags, const char *dev_name, void *data) {
return mount_nodev(fs_type, flags, data, testfs_super);
} 
```

详细地说，我想结束的是这样的：

```
? list_files(inode* dir) {
  item1 = inode and dentry with id of 1 and random name
  item2 = inode and dentry with id of 2 and random name
  item3 = inode and dentry with id of 3 and random name
} 
```

只要我能得到列出的文件，我就可以很容易地实现基于 inode 的读取/打开。

# android - 将文件复制到 SD 卡。（从一个位置到另一个位置）

> ID：14099663
> 
> 赞同：0
> 
> 时间：2012-12-31T09:12:57.677
> 
> 标签：android, android-intent, android-sdcard

我有一个应用程序和相关数据，我可以将这些数据从我的**Assest**文件夹复制到**SD 卡**上，这是完美的。但我想改进此代码并允许用户指定 SD 卡上的位置，如她想要存储数据的位置。这是我的代码，请提出修改建议。（我想生成一个类似的弹出窗口，当从互联网下载文件并且弹出窗口要求用户指定下载位置时，我很困惑是我是否必须自定义制作这个弹出窗口或者它是内置）以下是我的代码：

```
 private void copyAssets() {
    AssetManager assetManager = getAssets();
    String[] files = null;
    try {
        files = assetManager.list("");
    } catch (IOException e) {
        Log.e("tag", e.getMessage());
    }
    for(String filename : files) {
        InputStream in = null;
        OutputStream out = null;
        try {
          in = assetManager.open(filename);
          out = new FileOutputStream("/sdcard/edu/" + filename);
          copyFile(in, out);
          in.close();
          in = null;
          out.flush();
          out.close();
          out = null;
        } catch(Exception e) {
            Log.e("tag", e.getMessage());
        }       
    }
}
private void copyFile(InputStream in, OutputStream out) throws IOException {
    byte[] buffer = new byte[1024];
    int read;
    while((read = in.read(buffer)) != -1){
      out.write(buffer, 0, read);
    }
}
public void MakeFolder(){
File direct = new File(Environment.getExternalStorageDirectory() + "/edu");

if(!direct.exists())
 {
     if(direct.mkdir()){ //directory is created;
         copyAssets();
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:34:37.097

在这种情况下，基于 AlertDialog 选择目录或文件的 Android 对话框将为您提供帮助。

[http://www.ulduzsoft.com/2012/07/android-dialog-to-choose-a-directory-or-file-based-on-alertdialog/](http://www.ulduzsoft.com/2012/07/android-dialog-to-choose-a-directory-or-file-based-on-alertdialog/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T03:57:00.763

这是我准备的最终代码（来自谷歌的有价值的输入）：

```
public class Fexplorer extends ListActivity {

String B=null ;
private List<String> item = null;
private List<String> path = null;
private String root;
private TextView myPath;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.explorer_main);
    myPath = (TextView)findViewById(R.id.path);
    Button OK = (Button)findViewById(R.id.button2);
    Button Cancel = (Button)findViewById(R.id.button1);

    OK.setOnClickListener(onOK);
    Cancel.setOnClickListener(onCancel);

    root = Environment.getExternalStorageDirectory().getPath();

    getDir(root);
}

private void getDir(String dirPath)
{
    myPath.setText("Choose Location");
    B = dirPath; 
    Toast.makeText(getApplicationContext(),B, Toast.LENGTH_LONG).show();
    item = new ArrayList<String>();
    path = new ArrayList<String>();
    File f = new File(dirPath);
    File[] files = f.listFiles();

    if(!dirPath.equals(root))
    {
        item.add(root);
        path.add(root);
        item.add("../");
        path.add(f.getParent());    
    }

    for(int i=0; i < files.length; i++)
    {
        File file = files[i];

        if(!file.isHidden() && file.canRead()){
            path.add(file.getPath());
            if(file.isDirectory()){
                item.add(file.getName() + "/");
            }else{
                item.add(file.getName());
            }
        }   
    }

    ArrayAdapter<String> fileList = new ArrayAdapter<String>(this, R.layout.row, item);
    setListAdapter(fileList);   
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    File file = new File(path.get(position));

    if (file.isDirectory())
    {
        if(file.canRead()){
            getDir(path.get(position));
        }else{
            new AlertDialog.Builder(this)
                .setIcon(R.drawable.ic_launcher)
                .setTitle("[" + file.getName() + "] folder can't be read!")
                .setPositiveButton("OK", null).show();  
        }   
    }

    /*else {
        new AlertDialog.Builder(this)
                .setIcon(R.drawable.ic_launcher)
                .setTitle("[" + file.getName() + "]")
                .setPositiveButton("OK", null).show();

      } */
}

 private View.OnClickListener onOK=new View.OnClickListener() {
        public void onClick(View v){

        copy();
        Intent About = new Intent(Fexplorer.this,EduBridge.class);
        startActivity(About);

        }
    };

 private View.OnClickListener onCancel=new View.OnClickListener() {
        public void onClick(View v){

            Intent About = new Intent(Fexplorer.this,EduBridge.class);
            startActivity(About);

        }
    };

    public void copy(){
                try {
                        File sourceFile = new File("/sdcard/edu/Brochure.pdf");
                        File destinationFile = new File(B+"/" + sourceFile.getName());
                        String X = (B+"/" + sourceFile.getName());
                        Toast.makeText(getApplicationContext(),X, Toast.LENGTH_LONG).show();
                        Fexplorer copyFileExample = new Fexplorer();
                        copyFileExample .copyFile(sourceFile, destinationFile);
                } catch (Exception e) {
                        e.printStackTrace();
                }
        }

        public void copyFile(File sourceFile, File destinationFile) {
                try {
                        FileInputStream fileInputStream = new FileInputStream(sourceFile);
                        FileOutputStream fileOutputStream = new FileOutputStream(
                                        destinationFile);

                        int bufferSize;
                        byte[] bufffer = new byte[512];
                        while ((bufferSize = fileInputStream.read(bufffer)) > 0) {
                                fileOutputStream.write(bufffer, 0, bufferSize);
                        }

                        fileInputStream.close();
                        fileOutputStream.close();
                } catch (Exception e) {
                        e.printStackTrace();
                }
        }

    } 
```

在样式中：

```
 <style name="MyFloatingWindow" parent="@android:style/Theme.Dialog">
    <item name="android:windowBackground">@android:color/transparent</item>
    <item name="android:background">@android:color/transparent</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:windowNoTitle">true</item> 
```

explorer_main XML 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical"
android:layout_gravity ="center">

<TextView
    android:id="@+id/path"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"
     />

<ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_below="@+id/path"
    android:layout_height="308dp" />

<TextView
    android:id="@android:id/empty"
    android:layout_below="@android:id/list"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="No Data"
    />

<Button
    android:id="@+id/button1"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="60dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_below="@android:id/empty"

    android:text="@string/DirB" />

<Button
    android:id="@+id/button2"
    style="?android:attr/buttonStyleSmall"
    android:layout_width="60dp"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_alignParentLeft="true"

    android:text="@string/DirA" /> 
```

最后是 row.xml 文件：

```
 <?xml version="1.0" encoding="utf-8"?>
     <TextView xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/rowtext"
     android:layout_width="fill_parent"
     android:layout_height="50sp"
     android:textSize="15dp" /> 
```

# python - python脚本的输出

> ID：14099664
> 
> 赞同：-1
> 
> 时间：2012-12-31T09:13:00.473
> 
> 标签：python

所以我正在尝试调试我正在运行的一些 Python 代码，因为由于某种原因，当我在命令行中运行代码时它工作得很好，但是当我将它创建为一个`.py`文件并以这种方式运行它时它会失败。

输出在 Windows Commander 窗口中，在我阅读之前它就消失了。

有没有办法查看这个输出是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:21:33.800

打开一个windows command，然后到a.py所在的目录，运行“python a.py”，它就不会消失了！

# c# - MVVM + WPF PopUp 未打开

> ID：14099666
> 
> 赞同：2
> 
> 时间：2012-12-31T09:13:16.433
> 
> 标签：c#, wpf, xaml, mvvm, popup

XAML

```
<Popup Name="popUpProgress" Width="225" Height="85"                   
           IsOpen="{Binding PopUpIsOpen,Mode=OneWay}"
           Placement="Center" PlacementTarget="{Binding ElementName=stkListview}" 
           VerticalAlignment="Top">
    <Border BorderThickness="1" Background="Blue"  >
        <Grid   Width="225" Height="85">
            <Grid.RowDefinitions>
                <RowDefinition Height="30" />
                <RowDefinition Height="30" />
            </Grid.RowDefinitions>
            <Label x:Name="lblProgress" Content="Please Wait ...." Margin="10,5,0,0" HorizontalAlignment="Left" Grid.Row="1" />
        </Grid>
    </Border>
</Popup> 
```

在视图模型中：

```
private bool _PopUpIsOpen;

public bool PopUpIsOpen
{
    get { return _PopUpIsOpen; }
    set
    {
        _PopUpIsOpen = value;
        RaisePropertyChanged(() => this.PopUpIsOpen);
    }
}

public RelayCommand SubmitCommand { get; private set; }

private bool SubmitCommandCanExecute()
{
    return true;
}

private void SubmitCommandExecute()
{

    PopUpIsOpen = true;

    dsStandardListbyMarket = marketBL.StandardListbyMarketBL(Convert.ToInt32(SelectdMarketId), Convert.ToInt32(Users.UserId));
    GetComboboxMappingCollections(Convert.ToInt32(this.SelectdMarketId), Users.UserId);
    FItems = new ObservableCollection<MarketRecord.FItem>();
    FItems.CollectionChanged += OnUICollectionChanged;
    marketBL.FetchMarketRecords(Convert.ToInt32(this.SelectdMarketId));
    IsSubmitButtonVisible = true;

    PopUpIsOpen = false;
} 
```

当我单击提交按钮控件时，`SubmitCommandExecute`但`Popup`窗口未显示。我对 WPF 有点陌生，摸不着头脑。最后在这里提出这个问题。可能有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:33:20.057

I think the problem is in the way you are testing the code. SInce you are sleeping in the UI thread, the UI does not feel the change from true to false on the bound property. Try to use a timer instead of a Sleep in the thread.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-31T09:26:10.667

鉴于 msdn 上的 RaisePropertyChanged 语法：

```
protected internal void RaisePropertyChanged (
   string propertyName
) 
```

你应该尝试`RaisePropertyChanged("PopUpIsOpen");`而不是`RaisePropertyChanged(() => this.PopUpIsOpen);`

# reporting-services - Interactive sorting in tablix with column and row groupings

> ID：14099677
> 
> 赞同：8
> 
> 时间：2012-12-31T09:14:01.667
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

I'm trying to define interactive sorting in a tablix. The sorting should affect the row order. Attaching image of the tablix in order to explain what I'm trying to get:

![](../Images/350c700051c048566ef34064a1987f48.png)

I already tried to define the column header with `interactive sorting` and get `SubjectParentID` to be sorted by expression (the same expression as described bellow). The final setting I made is to apply the sorting to all groups in the `tablix` -

Attaching image: ![enter image description here](../Images/04a496072789ddb7ae22bfefe4e3b489.png)

The result wasn't current and the data got messed up in the cells.

**Additional information:** The columns are grouped by `SubjectParentID`. The rows are grouped by `Username` as parent and `UserID` as a child group.

The values are result of the following expression :

```
=iif(isNothing(Fields!ResReqCertID1.Value), 
     -99, 
     Sum(iif(Fields!CertStatusID.Value = 3 
             Or Fields!CertStatusID.Value = 4 
             Or Fields!CertStatusID.Value = 5, 
         1, 
         0)) - Fields!ResReqCertID1.Value) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T02:57:23.263

在 Text Box Properties / Interactive Sorting 窗口中，将 Groups 选择更改为 UserID 组（假设这是在您的示例中提供行的最详细的组）。

# castle-windsor - 根据 Castle Windsor 中的名称约定动态解析

> ID：14099692
> 
> 赞同：4
> 
> 时间：2012-12-31T09:15:18.560
> 
> 标签：castle-windsor

我有一个看似简单的用例。有一个 ICsvReader 组件。让我们在这里简单地将其命名为 Reader。我们加载一组已知的 CSV 文件，其中一些有标题，有些没有。目前有多个阅读器：Reader_Skips1Row、Reader_Skips2Rows 等。

有没有办法只注册一个组件并让 Windsor 查看组件键，剥离“_Skips ...”部分并使用相关属性集解决所需的组件？

我试过子解析器和设施，但没有运气。

**编辑**

是的，只有一个实现，但它被用作依赖项并配置为按名称解析。阅读器在代码中配置

```
Component.For<ICsvReader>()
         .ImplementedBy<CommaSeparetedCsvReader>()
         .DependsOn(new { SkipHeader = true, HeaderRowsToSkip = 2 } )
         .Named("CommaSeparetedCsvReader_Skips2Rows")
         .Lifestyle.Transient

Component.For<ICsvReader>()
         .ImplementedBy<CommaSeparetedCsvReader>()
         .DependsOn(new { SkipHeader = true, HeaderRowsToSkip = 1 } )
         .Named("CommaSeparetedCsvReader_Skips1Row")
         .Lifestyle.Transient

Component.For<ICsvReader>()
         .ImplementedBy<CommaSeparetedCsvReader>()
         .Named("CommaSeparetedCsvReader")
         .Lifestyle.Transient 
```

这些被用作处理器类中的依赖项。它是在 XML 中配置的，因此可以在运行时进行操作

```
<component id="Processor 
   type="Processor">
   <parameters>
      <reader>CommaSeparetedCsvReader_Skips2Rows</reader>
   </parameters>
</component> 
```

理想情况下，我只想注册 CommaSeparetedCsvReader 组件，但是当尝试解析 CommaSeparetedCsvReader_Skips2Rows 时，它应该去除后缀，对其进行解析并相应地更改属性。

是否有可能以某种方式修改 Resolve() 行为？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-01T18:03:58.793

如果您使用 TypedFactoryFacility 解析组件，创建自定义 ITypedFactoryComponentSelectors 可能会对您有所帮助。我需要更多关于如何创建阅读器的详细信息，以便为您提供更多信息。

亲切的问候，马尔维恩。

编辑======================================

让我们添加一个示例：

```
public interface IFoo
{
}

public class Foo1 : IFoo
{
}

public class Foo2 : IFoo
{
}

public interface IFooFactory
{
    IFoo CreateFoo(string which);
}

public class FooFactoryComponentSelector : DefaultTypedFactoryComponentSelector
{
    protected override string GetComponentName(MethodInfo method, object[] arguments)
    {
        return (string)arguments[0];
    }
} 
```

- - 登记

```
container.AddFacility<TypedFactoryFacility>();
Component.For<IFoo>().Named("Foo1Name").ImplementedBy<Foo1>(), 
Component.For<IFoo>().Named("Foo2Name").ImplementedBy<Foo2>(),
Component.For<IFooFactory>().AsFactory(f => f.SelectedWith(new FooFactoryComponentSelector())), 
```

- - 用法

```
var factory = _container.Resolve<IFooFactory>(); // in general this would just be a dependency in the constructor.
var foo = factory.CreateFoo("Foo2Name"); 
```

只需根据您的需要调整组件选择器。如有必要，如果构造函数需要容器未提供的参数，您还可以将其他参数传递给 CreateFoo。

更多信息：[http ://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx](http://docs.castleproject.org/Windsor.Typed-Factory-Facility-interface-based-factories.ashx)

# ms-access - 将 Access 数据库部署为产品

> ID：14099693
> 
> 赞同：3
> 
> 时间：2012-12-31T09:15:21.877
> 
> 标签：ms-access, deployment, installation, package

我有一个简单的问题。我是开发世界的新手，并且创建了一些相当不错的访问数据库。这些数据库面向小企业主。目前，我有一些小型企业对我创建的数据库感兴趣，这些数据库是可以购买的潜在产品。打包访问数据库的最佳方式和方法是什么，这样用户就不必拥有完整的访问权限副本，并且将来可以更新产品。例如版本 1.1 可能是启动版本，但 1.2 可能包含数据库启动屏幕上的日期和时间？

如果需要更多信息，请告诉我，我很乐意上传更多信息。

我使用的 Access 数据库是 Access 2013。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T15:13:42.967

这是一个相当广泛的问题。整本书的章节都是关于这个主题的。我将简单地给你一个简短的解释：

* * *

*打包访问数据库以使用户不必拥有访问权限的完整副本，如何以及最好的方法是什么？*

在这里要做的最简单的事情是将您的数据库文件编译为 .mde 或 .accde。它不是防弹的，但会阻止临时用户对您的产品进行逆向工程。

从 Access 2007 开始，Access Runtime 可免费使用。使用运行时，您的用户将无法访问数据库窗口（列出所有表、查询、表单、报告等的东西），因此您需要为此提供备用导航。

* * *

*并且还可以在将来更新产品*

我读过关于 Tony Toews 的[Auto FE Updater](http://autofeupdater.com/)的好消息。我没有亲自使用过它（我使用了 Inno Setup 和我编写的其他自定义脚本的组合），但我听说它适用于您所谈论的内容。

* * *

最后一点。 **在分发之前，您绝对必须将数据库**拆分为前端和后端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T16:50:26.463

这是一个对我有用的简单设置：

*   转换为 .accde。
*   为用户提供访问运行时。
*   拆分数据库。
*   将更新的前端放入与客户共享的 Dropbox 帐户中。
*   在启动屏幕加载事件中使用以下代码提示客户端如何查找后端。

`Private Sub Form_Load() On Error GoTo frm_error Dim RS As Recordset Dim cn As Database Set cn = CurrentDb Set RS = cn.OpenRecordset("tblX") 'Insert name of any table in backend RS.Close Exit Sub frm_error: If MsgBox("Database cannot be found. Advanced Users press OK to link the tables. Otherwise, notify an admin and press cancel to close the xProgram.", vbOKCancel) = vbOK Then RunCommand acCmdLinkedTableManager Else DoCmd.Quit End If End Sub`

我会注意到，我已经停止使用访问作为后端并切换到由 Amazon RDS 托管的 SQL Server。这对于安全性、备份、前端升级和异地维护（尽管我要强调的是，您永远不会获得一个使用访问作为前端的完全安全的系统）。

# jquery - 带有突出显示和选择回调的日期选择器范围选择

> ID：14099696
> 
> 赞同：1
> 
> 时间：2012-12-31T09:15:39.227
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我正在使用 jQuery UI 来显示 2 个月的内联日期选择器，我想启用从**一天到另一天**的范围选择，并在其间突出显示，并用一些“捕捉”**开始日期**和**今天**日期回调，所以我可以将它们插入到一些输入中。

这是我当前的代码：

HTML：

```
 <div id="journey-calendar"></div> 
```

脚本：

```
 $('#journey-calendar').datepicker({
        numberOfMonths: [2, 1],
        showOtherMonths: true,
        altField: '.begin-trip-date',
        altFormat: 'dd M yy', defaultDate: null
    }); 
```

我将不胜感激任何帮助或演示！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-03T15:29:27.573

I did something similar to this. I had 2 datepickers, one for a start date and one for an end date. I added a css class to set a background color for the dates in the range. Here is my code:

```
},
beforeShowDay: function(date) {
  var fromDate = new Date($(".lblDateFrom").text());
  var toDate = new Date($(".lblDateTo").text());     

  if (date >= fromDate && date <= toDate) {
    return [true, 'ui-individual-date', ''];
  }
  else {
    return [true, '', ''];
 }
},

//css class
.ui-individual-date {
background-color: #F2F5F7;
} 
```

# ember.js - Ember.js：将应用程序转换为 Router API V2

> ID：14099698
> 
> 赞同：4
> 
> 时间：2012-12-31T09:15:50.723
> 
> 标签：ember.js

我对 Ember.js 很陌生，在开发应用程序时，我刚刚发现了新的路由器 API。它被合并并且根本没有文档（除了这个 - [https://gist.github.com/3981133](https://gist.github.com/3981133)）

我什至不知道如何开始将我的应用程序转换为新的路由器 API。这个“演练”没有多大帮助。

1）如何将模板连接到命名的插座，例如 {{outlet main}} ？

2）我使用 App.router.someController 和 App.router.get('store').findAll() 和 .find() 全部，应该用什么替换？

3）html中的handlebars标签有什么变化`<script type="text/x-handlebars" data-template-name="templateName">`吗？

这就是我现在能想到的..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T15:11:37.767

我刚刚在一个小示例项目中自己完成了这个升级

[https://github.com/toranb/ember-code-camp](https://github.com/toranb/ember-code-camp)

直接回答你的几个问题

1) 不再有 connectOutlets 噪音 - 只需将路由映射到 ember 路由类/对象。这种方法是非常基于约定的顺便说一句（模板/视图/控制器/路由都匹配）

```
CodeCamp.Router.map(function(match) {
  match("/").to("sessions");
  match("/session/:session_id").to("session"); //no route needed -ember will apply the context for you
  match("/speaker/:speaker_id").to("speaker"); //same as above so long as my handlebars template name matches (speaker for this route)
});

CodeCamp.SessionsRoute = Ember.Route.extend({
  setupControllers: function(controller) {
    controller.set('content', CodeCamp.Session.find());
  }
}); 
```

2 a）你像这样在路由器中获得商店

```
App.YourObject.find() 
```

2 b）您可以像这样从控制器内提交商店

```
this.get('store').commit() 
```

3）我的车把东西没有改变，除了路线相关的助手

```
I remove action helpers defined with <a {{action and used linkTo instead

  {{#linkTo 'session' session}}View Session Details{{/linkTo}} 
```

# ruby - 为什么从我的 Ruby 脚本调用 mktemp 会说权限被拒绝？

> ID：14099700
> 
> 赞同：1
> 
> 时间：2012-12-31T09:15:56.953
> 
> 标签：ruby, bash, permissions

我有以下 Ruby 代码：

```
cmd="
source= $(mktemp)
echo source
"
system("#{cmd}")
system("source= $(mktemp)") 
```

我希望代码执行“mktemp”命令并将临时文件名输出到变量“source”。但是，我收到的错误消息是：

```
sh: /tmp/tmp.EpXeLNkqjN: Permission denied

sh: /tmp/tmp.wVCqdqHSpp: Permission denied

------------------
(program exited with code: 0)
Press return to continue 
```

即使我以 root 身份运行程序，错误也是一样的。

但是，当我只运行 mktemp 命令时，没有问题。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T16:03:45.517

`=`符号不能有空格。将您的代码替换为

```
cmd="
source=$(mktemp)
echo $source
"
system("#{cmd}")
system("source=$(mktemp)") 
```

注意：*标志后面**没有空格`=`*。

`=`在符号后面留一个空格的问题是，`sh`它将尝试执行由扩展给出的命令`$(mktemp)`（即命令`/tmp/tmp.EpXeLNkqjN`或类似的东西——不存在），变量`source`被设置为空字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T17:22:14.760

### 问题：无效的 Shell 语法

您的代码中有许多错误，包括非法空格、未能正确取消引用变量以及潜在的 IFS 或引用问题。

### 解决方案：使用正确的 Shell 语法

使用合法的 Bash 语法可以正常工作。例如：

```
cmd='source=$(mktemp); echo "$source"'
system(cmd) 
```

在我的系统上，这会在标准输出上正确打印预期结果，并正确返回。例如，pry 显示：

```
/tmp/tmp.of89uLTUqf
=> true 
```

### 更好的解决方案：使用反引号

[与其使用Kernel#system](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)进行脱壳，为什么不使用反引号在 Ruby 中分配变量？例如：

```
source = `mktemp`
# => "/tmp/tmp.KVhGMzZRiG\n" 
```

这似乎更简单，更不容易出错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T11:18:46.467

确保您将文件的权限设置为可执行。

# c#-4.0 - 尝试下载 html 中的所有 URL

> ID：14099702
> 
> 赞同：0
> 
> 时间：2012-12-31T09:16:08.823
> 
> 标签：c#-4.0

有人可以帮我处理这段代码吗？我正在尝试下载此 html [http://mises.org/books/](http://mises.org/books/)中的所有 URL （它们都是 pdf 的）

我了解基本逻辑，我想我只是弄乱了正则表达式。这是我到目前为止所拥有的：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.IO;
using System.Text.RegularExpressions; 

namespace DownloadPdfs
{
    class Program
    {
        static void Main(string[] args)
        {
            StringBuilder sb = new StringBuilder();

            byte[] buf = new byte[8192];

            HttpWebRequest request = (HttpWebRequest)
            WebRequest.Create("http://mises.org/books/");

            HttpWebResponse response = (HttpWebResponse)
                request.GetResponse();

            Stream resStream = response.GetResponseStream();

            string tempString = null;
            int count = 0;

            do
            {
                count = resStream.Read(buf, 0, buf.Length);

                if (count != 0)
                {
                    tempString = Encoding.ASCII.GetString(buf, 0, count);
                    sb.Append(tempString);
                }
            }
            while (count > 0); // any more data to read?

            string html = sb.ToString();
            List<string> listoflinks = new List<string>(); 

            string input = html; 
            Regex rx = new Regex(@"(?<="")[^""]+(?="")|[^\s""]\S*");
            for (Match match = rx.Match(input); match.Success; match = match.NextMatch())
            {
                listoflinks.Add(match.ToString()); 
            }

            foreach (var v in listoflinks)
            {
                using (WebClient Client = new WebClient())
                {
                    Client.DownloadFile(v,v);
                }
            }          
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T11:16:34.437

试试下面的代码。该模式将匹配`HREF`锚的属性值。

```
Regex rx = new Regex(@"href=""(?<Url>[^.""]+\.pdf)""",RegexOptions.IgnoreCase | RegexOptions.Multiline);
for (Match match = rx.Match(input); match.Success; match = match.NextMatch())
{
    var link = match.Groups["Url"].Value;
    listoflinks.Add(link); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-07T00:31:55.087

使用像 HtmlAgilityPack 这样的库来解析 html。

```
public List<string> GetLinks(string html)
{
    var htmlDoc = new HtmlDocument();
    htmlDoc.LoadHtml(html);

    var linkNodes = htmlDoc.DocumentNode.SelectNodes("//a[@href]");

    if (linkNodes == null)
    {
        return new List<string>();
    }

    var linkNodesWithLink = linkNodes.Where(x => x.Attributes.Contains("href")).ToList();

    var links = linkNodesWithLink.Select(x => x.Attributes["href"].Value)
        .Where(x => !string.IsNullOrWhiteSpace(x))
        .Select(x => x.Trim())
        .ToList();
    links = links.Distinct().ToList();
    return links;
} 
```

# asp.net - Ajax AsyncFileUpload 触发服务器代码但不更新客户端

> ID：14099704
> 
> 赞同：1
> 
> 时间：2012-12-31T09:16:10.620
> 
> 标签：asp.net, ajaxcontroltoolkit

我在更新面板中有一个 asyncfileupload 控件。

在 UploadedComplete 中，我将文件保存到服务器。

```
 protected void ImageFileUpload_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
{
    System.Threading.Thread.Sleep(5000);
        if (ImageFileUpload.HasFile)
        {
            Extension= System.IO.Path.GetExtension(ImageFileUpload.FileName);

            TempImageUpload(ImageFileUpload.FileName.ToString(), Extension.Value);
            FileImage.ImageUrl = "~/Temp/" + Session["ID"].ToString() + Extension.Value;
            RemoveImageButton.Visible = true;
        }
} 
```

该文件成功上传并触发正确的服务器端代码。

但不要更新视图状态和控件。

```
 private string Extension
{
    get { 
        if(ViewState["Extension"]==null)
            return string.Empty;
        else
       return (string)ViewState["Extension"]; }
    set { ViewState["Extension"] = value; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T05:04:13.603

我在 UploadedComplete 事件上保存文件。

```
 protected void ImageFileUpload_UploadedComplete(object sender, AjaxControlToolkit.AsyncFileUploadEventArgs e)
  {
    if (ImageFileUpload.HasFile)
    {
      ImageFileUpload.SaveAs(Request.PhysicalApplicationPath + "Temp\\" + Session["ID"].ToString() + extension);
    }
  } 
```

并在客户端进行更改控制，我使用 OnClientUploadComplete。

```
function uploadComplete(sender, args) {
        var filename = args.get_fileName();
        document.getElementById('<%= Extension.ClientID  %>').value = "." + filename.split('.').pop();
        var btn = document.getElementById('<%= RemoveImageButton.ClientID  %>')
        btn.style.visibility = 'visible';
    } 
```

# .net - 输入字符串的格式不正确。错误 int FTP 但在 localhost 代码中有效

> ID：14099710
> 
> 赞同：-3
> 
> 时间：2012-12-31T09:16:49.310
> 
> 标签：.net

我的代码是

```
 #region LikeExceli
   DynamicData dd = new DynamicData();
   dd.GerceklesenIMP = Convert.ToInt32(item["Impressions?"].ToString().Replace(",", ""));
   dd.GerceklesenClick = Convert.ToInt32(item["Clicks?"].ToString().Replace(",", ""));
   dd.CampaignName = item["Campaign?"].ToString();
   dd.AdvertName = item["Advert Name"].ToString();
   dd.GercekHarcamaUSD = fr.ConvertMoney(item["Spent?"].ToString());
   dd.Likes = Convert.ToInt32(item["Page likes?"].ToString().Replace(",", ""));
   dd.FK_Campaign = kampanyaid;
   dd.CPMUSD = Convert.ToDouble(item["CPM?"].ToString().Replace(".", ","));
   dd.CPCUSD = Convert.ToDouble(item["CPC?"].ToString().Replace(".", ","));
   dd.CreateDate = DateTime.Now;
   #endregion 
```

我的错误是：`Input string was not in a correct format.`

但是我的代码在 localhost 中运行没有任何问题。当我上传服务器时，我收到了这个错误。

注意：我正在导入一个 excel 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:22:48.017

这几乎可以肯定是因为您的本地计算机处于小数分隔符是逗号而不是句点的文化中，因此“一个半”将是“1,5”而不是“1.5”。大概您的服务器*不在*这种文化中。

无论如何，您不应该进行所有这些替换 - 将值解析为字符串确实不是一个好主意。我强烈怀疑铸造会起作用（尽管很难确定，因为我们不知道是什么`item`）：

```
dd.CPMUSD = (double) item["CPM?"]; 
```

等。尽可能避免字符串转换 - 如果您*必须*进行字符串转换，请尽量避免手动替换字符串的位。因此，如果您*真的*必须使用字符串解析，请使用以下内容：

```
dd.CPMUSD = double.Parse(item["CPM?"].ToString(), CultureInfo.InvariantCulture); 
```

不变的文化总是使用句点作为小数分隔符，听起来您的输入也是如此。

# etl - 如何在水壶中解决此错误“org.apache.commons.vfs.FileSystemException：无法创建文件”

> ID：14099714
> 
> 赞同：1
> 
> 时间：2012-12-31T09:17:21.463
> 
> 标签：etl, pentaho, kettle

我正在使用`kettle 3.2`。我有一个要求，比如我需要`CSV file`根据来自`another table`. 为数也。`rows increases`_ 我的意思是，如果我有 2 行，那么该文件将像 one.csv 中的第一行数据和 two.csv 中的第二行数据一样创建`CSV files``increases`

我所做的设计最多可以工作 650 行，但在 700 行之后它显示错误

```
 2012/12/31 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA,
 build 10572 from 2009-05-12 08.45.26 by buildguy) : Unexpected error :
 2012/12/31 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA,
 build 10572 from 2009-05-12 08.45.26 by buildguy) :
 org.pentaho.di.core.exception.KettleException:  2012/12/31 14:21:27 -
 CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA, build 10572 from
 2009-05-12 08.45.26 by buildguy) : Error opening new file :
 org.apache.commons.vfs.FileSystemException: Could not create file
 "file:///home/admin/Desktop/data-integration3.2/CT_1056800_20121231_142127.CSV".
 2012/12/31 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA,
 build 10572 from 2009-05-12 08.45.26 by buildguy) :  2012/12/31
 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA, build 10572
 from 2009-05-12 08.45.26 by buildguy) :    at
 org.pentaho.di.trans.steps.textfileoutput.TextFileOutput.openNewFile(TextFileOutput.java:654)
 2012/12/31 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA,
 build 10572 from 2009-05-12 08.45.26 by buildguy) :    at
 org.pentaho.di.trans.steps.textfileoutput.TextFileOutput.setDataWriterForFilename(TextFileOutput.java:187)
 2012/12/31 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA,
 build 10572 from 2009-05-12 08.45.26 by buildguy) :    at
 org.pentaho.di.trans.steps.textfileoutput.TextFileOutput.processRow(TextFileOutput.java:163)
 2012/12/31 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA,
 build 10572 from 2009-05-12 08.45.26 by buildguy) :    at
 org.pentaho.di.trans.step.BaseStep.runStepThread(BaseStep.java:2889)
 2012/12/31 14:21:27 - CSV FILE OUTPUT.0 - ERROR (version 3.2.0-GA,
 build 10572 from 2009-05-12 08.45.26 by buildguy) :    at
 org.pentaho.di.trans.steps.textfileoutput.TextFileOutput.run(TextFileOutput.java:849)
 2012/12/31 14:21:27 - EXTRACTION_FOR_CUSTOMER - ERROR (version
 3.2.0-GA, build 10572 from 2009-05-12 08.45.26 by buildguy) : Errors detected! 
```

请帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:14:21.803

最后我找到了解决方案。我使用**修改 java 脚本**对象来创建大量 CSV 文件 (>8000) 解决了这个问题。我使用了内置功能

**appendToFile（文件路径，内容）**

感谢你的支持

# javascript - 窗口宽度和调整大小

> ID：14099715
> 
> 赞同：0
> 
> 时间：2012-12-31T09:17:35.497
> 
> 标签：javascript, jquery

我想根据菜单窗口的宽度计算图标的数量，例如 50px。所以我开始：

```
$(window).width(); 
```

在加载具有文档就绪功能的页面时，将给出宽度。好的！

现在我会在调整窗口大小时计算正确数量的图标。

`$(window).resize(function() { //resize just happened, pixels changed });`

任务

1.  窗口的初始宽度 -> 如果用户没有调整窗口大小
2.  窗口的可变宽度 -> 如果用户正在调整窗口大小

每个任务都在运行，但我没有把它放在一起。

你能帮帮我吗-> THX !!

如何计算具有窗口初始宽度并调整窗口大小的图标数量？

我的开始：

```
var activeItemcount; 

                checkWidth();
                $(window).resize(checkWidth);

                   function checkWidth() {
                        windowSize = $(window).width();
                      //   console.log(windowSize); 

                        var activeItemWidth = '100';                            // width of the icons
                        var maxWidth = windowSize;                              // max div width on screen 
                        activeItemcount = maxWidth / activeItemWidth;           // max icon with actual screen width
                        activeItemcount = Math.round(activeItemcount) -1;       // calculation
                           console.log(activeItemcount);

                   var i = '0'; 

                     $('.platform-view').each(function(){
                            if(i < activeItemcount ){
                            $(this).wrapAll('<div class="iconview-1"  />');
                            i++;
                            }else{  
                                $(this).wrapAll('<div class="iconview-2" />');

                            }

                    });

                   }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:31:52.047

我没有把你说清楚。但是此代码将在调整大小时返回窗口的可变宽度。

jQuery: $(window).resize(function() {

```
$('#log').append('<div>'+$(window).width()+'</div>'); 
```

});

HTML：

示例： [代码示例](http://jsfiddle.net/8dHsR/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:26:19.903

将您的计算放入它自己的函数中：

```
function calculateIcons()
{
    var viewport = { width: $(window).width(), height: $(window).height() };
    // Do cool things with viewport.width
} 
```

然后你可以简单地将这个函数绑定到 DOMReady 和`resize`jQuery 中的函数，如下所示：

```
$(calculateIcons);
$(window).resize(calculateIcons); 
```

# asp.net - Ajax Popup 日历 Postback 自动发出

> ID：14099719
> 
> 赞同：0
> 
> 时间：2012-12-31T09:18:17.247
> 
> 标签：asp.net, ajax

在下面的代码中，选择日期后，日期将重置为默认值。

因为在回发我设置了当前日期，如何克服这个问题，

```
 <asp:TextBox ID="ExpiryDateTxt" CssClass="textbox" AutoPostBack="true"    ReadOnly="true" runat="server"></asp:TextBox>  

       <ajaxToolkit:CalendarExtender   
               ID="startCalendarExtender"   Format="MM/dd/yyyy"
                TargetControlID="ExpiryDateTxt"   
                runat="server" /> 

     protected void Page_Load(object sender, EventArgs e)
     {
          if (!IsPostBack)
          {
                ExpiryDateTxt.Text =DateTime.Now.AddDays(1.0).ToString("yyyy-MM-dd hh:mm:ss");
           }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:40:29.920

我相信 ReadOnly="true" 会导致这个问题。

您可以使用 javascript 使文本框是只读的

```
 <script src="Scripts/jquery-1.4.1.min.js" type="text/javascript"></script>     
    <asp:TextBox ID="ExpiryDateTxt" AutoPostBack="true" CssClass="textbox read-only" runat="server"></asp:TextBox>  

    <cc1:CalendarExtender
        ID="startCalendarExtender" Format="MM/dd/yyyy"
        TargetControlID="ExpiryDateTxt"   
        runat="server" /> 

     <script type="text/javascript">
        $(document).ready(function () {
             $('.read-only').attr("readonly", "readonly");
        });
     </script> 
```

# bash - IP正则表达式以防万一

> ID：14099720
> 
> 赞同：-2
> 
> 时间：2012-12-31T09:18:27.527
> 
> 标签：bash, shell

我正在尝试做一个 case 语句来检查给定的参数以及它是否是连接到它的 IP。我在验证 IP 时遇到问题。

```
case $1 in
-h)
    echo "usage: $0 <IP/DNS/IP range> <Port/Portrange>";
    ;;
--help)
    echo "usage: $0 <IP/DNS/IP range> <Port/Portrange>";
    ;;
    [1-255].[0-255].[0-255].[0-255] ) 
```

上面的正则表达式仅适用于`1.1.1.1`或相同的 IP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:52:05.350

字符类定义单个字符。因此`[1-255]`匹配 1-2、5 或 5 范围内的单个字符（同样，原文如此）。

如果您想坚持`case`语法，正确的解决方法是清除不允许的变体，然后再进行实际处理。

```
*[!.0-9]* | *.*.*.*.* | .* | *. | *[0-9][0-9][0-9][0-9]* \
  | *2[6-9][0-9]* | *25[6-9]* )
    error ;;
# require three dots
*.*.*.* ) ... Success scenario ... ;;
* ) error ;; 
```

（我确信我仍然忽略了一些极端情况。）

为了简化代码，也许您可​​以在成功场景中使用一个变量`realip=false`并将其设置为，然后在后面做一个简单的操作，并使代码尽可能简单。`true``if $realip``esac``case`

顺便说一句，所支持的模式`case`是全局模式，而不是真正的正则表达式。

# html - 在 rails 中使用 span 而不是 label

> ID：14099726
> 
> 赞同：0
> 
> 时间：2012-12-31T09:19:13.343
> 
> 标签：html, ruby-on-rails, ruby-on-rails-3, forms

使用 ：

```
 <%= f.label :registration,"Registration" %> 
```

将创建一个标签：

`<label for="cad_registration">Registration</label>`

我希望它是这样的跨度：

`<span for="cad_registration">Registration</span>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:32:56.167

The `<span>` element does not support the `for`-attribute. So, using a `<span>`-element instead of the `<label>` does not make sense.

Why do you not use (CSS) styles to style the `<label>` into the desired result? Use the `id`-attribute if you only want to style this particular element.

For example to make the label text red, using something like this:

ERB:

```
<%= f.label :registration,"Registration", :html => { :id => "my-label" } %> 
```

CSS:

```
#my-label {
    text-color: red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:28:00.780

那么你没有创建标签，你不应该使用`label`帮助器。`for`元素上不存在该属性`<span>`。

用您编写的底线替换您的代码，但没有`for`：

```
<span>Registration</span> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T09:31:24.393

您可以使用自定义表单构建器来修改表单标签的输出方式以满足您的要求。这里有一个简短的概述 - [http://code.alexreisner.com/articles/form-b​​uilders](http://code.alexreisner.com/articles/form-builders-in-rails.html) -in-rails.html 。还有一个关于这个主题的[Railscast](http://railscasts.com/episodes/311-form-builders)，它更彻底，但它是专业（付费）剧集。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T10:22:07.307

我提出了以下解决方案，扩展了 Rails FormBuilder

在您的应用程序助手中

```
module ApplicationHelper
  class TestFormBuilder < ActionView::Helpers::FormBuilder
        include ActionView::Helpers::TagHelper

        def span(name, options = {})
          css_classes = []
          css_classes = options[:class].to_s if options[:class]
          content_tag('span', name, :class => css_classes.join(' '))
        end
  end
end 
```

在您看来，您可以使用

```
<%= form_for @<module>, :builder => ApplicationHelper::TestFormBuilder do |f| %>
  #your code 
  <%= f.span(:name) %>
<% end %> 
```

这很有效，感谢这个问题，这让我想到扩展 FormBuilder ;)，

这些链接帮助了我[link1](https://stackoverflow.com/questions/6276456/how-to-correctly-extend-form-for-actionviewhelpersformbuilder)，[link2](https://stackoverflow.com/questions/4633493/nested-content-tag-throws-undefined-method-output-buffer-in-simple-helper)，你可能想做更多的修改

高温高压

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T09:35:09.467

just write down the span outside the ruby

```
<span for=<%= :registration %>><%="Registration"%></span> 
```

# reporting-services - 无法在 Safari/Opera 中查看 SSRS 2008 R2 报告，但在 Chrome/IE8 中工作正常……为什么？

> ID：14099729
> 
> 赞同：-1
> 
> 时间：2012-12-31T09:19:39.557
> 
> 标签：reporting-services, ssrs-2008

我开发并部署了报告，它在 chrome 和 Internet Explorer 中运行良好，然后报告正在运行

firefox、opera 和 safari 询问用户名和密码。

任何机构都可以分享他们关于如何解决这个问题的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T16:00:39.097

“SSRS 提示输入用户名和密码是很正常的。事实上，它实际上在所有浏览器中都提示输入用户名和密码。事实上，IE9 不提示输入用户名/密码只是因为您可能已经将凭据存储在浏览器缓存。”

来源：[http ://forums.asp.net/t/1765440.aspx/1](http://forums.asp.net/t/1765440.aspx/1)

# logging - 使用 installshield 2012 从安装程序生成日志文件 - 日志记录

> ID：14099731
> 
> 赞同：0
> 
> 时间：2012-12-31T09:19:54.287
> 
> 标签：logging, vbscript, windows-installer, installshield, installshield-2012

我正在使用基本的 MSI 项目来准备 setup.exe。它在我的许多客户端机器上运行良好，并在少数 PC 上造成严重问题。现在我想添加一个日志作为 setup.exe 的一部分。

要求是成功或失败安装我想生成一个日志文件以了解幕后究竟发生了什么。这里还包括一些 VBScripting。

我有一个命令行参数。

```
setup.exe /v"/l*v C:\LogFile31122012.log" 
```

但我想在单击 setup.exe 文件本身时生成它。而且文件名也不应该被硬编码。

任何线索都可能有很大帮助。我尝试使用 installshield 项目 --> 构建 --> 设置菜单。但无法取得任何突破。

提前致谢。

问候， 帕万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T12:56:05.550

只要您的目标机器运行的是 Windows Installer 4.0 或更高版本，您就可以设置 MsiLogging 属性（通过 General Information 视图中的设置），并且将在`%TEMP%`.

如果您的目标机器运行的是早期版本的 Windows Installer，或者如果您需要控制目录或文件名，您可以将一些命令行参数存储到 setup.exe 中。但是我不知道在这里调整文件名以确保文件不存在的好方法（两者都`%DATE%`可能`%TIME%`包含不能在文件名中使用的字符，并且`%RANDOM%`没有提供太多意义）。

# magento - Magento 在哪里放置 js 在这个布局中？

> ID：14099732
> 
> 赞同：0
> 
> 时间：2012-12-31T09:20:00.843
> 
> 标签：magento

我使用添加了js

addJs

在下面的代码中，它是我的布局文件，所以我想把 jquery.js 文件放在哪里，请提供我的路径

```
<reference name="head">
 <action method="addJs"><script>my_extension/jquery.js</script></action>
</reference> 
```

我指的是这个

[http://www.activo.com/how-to-load-jquery-and-prototype-in​​-magento-admin-panel](http://www.activo.com/how-to-load-jquery-and-prototype-in-magento-admin-panel)

但是在哪里放置我的js文件？

我不明白这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:27:30.303

如果您正在谈论您所写的 adminhtml，那么只需将其放入`js/my_extension/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:33:25.930

Create local.xml file in your themes layout directory and place your code like this and place your js file here **"/skin/frontend/INTERFACE/THEME/js/"**. If you use addjs methods you have to place your js file under **"your magento root/js/"** folder. Here is an example.

```
<?xml version="1.0"?>
<layout version="0.1.0">
<default>
    <reference name="head">
        <!-- Magento looks in /skin/frontend/<INTERFACE>/<THEME>/js/buyprinting.js
        for this file -->
        <action method="addItem"><type>skin_js</type><name>js/buyprinting.js</name></action>
        <!-- This removes the item that was set in the page.xml file -->
        <action method="removeItem"><type>skin_js</type><name>js/iehover-fix.js</name></action>

        <!-- Magento looks in /js/prototype/element.storage.js for this file -->
        <action method="addJs"><name>prototype/element.storage.js</name></action>

    </reference>
</default>
</layout> 
```

Note: If you still unsure where to place your js file go to your browser and click on view source. Here check your js file and place the js file accordingly.

# iphone - 设备方向更改通知事件未在主视图控制器以外的其他控制器中调用

> ID：14099735
> 
> 赞同：0
> 
> 时间：2012-12-31T09:20:19.823
> 
> 标签：iphone, objective-c, ios, ios6

在我的应用程序中，我有 3 个视图控制器，每个控制器都通过单击按钮进行导航。在我的第一个视图控制器中，我添加了命令

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(Orientchanged:) name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

它仅适用于我`UIViewController`添加的第一个`appdelegate`。但它不适用于其他`UIViewControllers`并调用`selector`事件。是什么原因？我是否应该将其他内容添加`view controllers`到 appdelagate。

* * *

方法中的代码示例`Orientchanged:`：

```
- (void)Orientchanged:(NSNotification *)notification 
{
    UIDeviceOrientation devOrientation = [UIDevice currentDevice].orientation;
    scrollWidth_L = 1024;
    scrollWidth_P = 768;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T02:27:29.023

添加这些方法：

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskAll;
}

-(void)viewWillLayoutSubviews{
    [super viewWillLayoutSubviews];

    UIInterfaceOrientation devOrientation = self.interfaceOrientation;
    CGFloat scrollWidth_L = self.view.bounds.size.width;
    CGFloat scrollWidth_P = self.view.bounds.size.height;

    if (UIInterfaceOrientationLandscapeLeft == devOrientation || UIInterfaceOrientationLandscapeRight == devOrientation) {
        // Code for landscape setup

    } else {
        // Code for portrait setup

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:35:44.463

您已经为特定的`viewController`. 您必须添加所有其他`viewController`s 以了解当前可见`viewController`方向已更改。

如果您想全局了解，请在`appDelegate`.

**注意**：不要忘记`observer`在不需要时删除。

**编辑**：观察者取决于它包含的位置。在您的情况下`addObserver:self`，这`self`是您的第一个视图控制器。

# git - gitweb 和每个项目的 http 身份验证

> ID：14099737
> 
> 赞同：5
> 
> 时间：2012-12-31T09:20:30.117
> 
> 标签：git, apache, gitweb

我已经成功地在所有经过身份验证的用户都可以访问的 apache vHost 上设置了 gitweb。

服务器本身通过 https 提供了几个 git 存储库，并且每个用户/组都可以访问这些项目。例如 test1.git 只能被 test1 组读写，而 test2.git 只能被 test2 组读写。

现在我还希望只有这些组在 gitweb 界面中看到他们相应的 git 存储库。是否有可能对 gitweb 拥有这些精细的访问权限？

如果没有，是否有用于 git 的轻量级 web gui，它可以处理每个项目的基本 http 身份验证（以及以后可能的 ldap 身份验证）？

**编辑** 只是为了让事情更清楚（因为评论似乎有些混乱）：示例：

*   有 10 个存储库（test1、test2、... test10）

*   用户**lockdoc**在组**test1**和**test3**

*   一旦使用用户名**lockdoc**和他/她的密码通过 http 进行身份验证，该用户只能看到 git 项目**test1**和**test3**并且不能浏览/查看任何其他项目

*   无需在 Web 界面上写入（推送），因为这已经实现

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T09:25:28.847

没有 GUI，但我建议使用[gitolite](https://github.com/sitaramc/gitolite)进行这种细粒度的[授权](http://sitaramc.github.com/gitolite/auth.html)。

请参阅此[httpd.conf 以获取 LDAP 和 gitolite 访问权限](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L49-L64)：

*   你可以定义一个 gitweb 访问，它又会调用 gitolite，见这个[gitweb.conf.pl](https://github.com/VonC/compileEverything/blob/master/gitweb/gitweb.conf.pl.tpl)脚本
*   您可以定义一个[https](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L107-L112)访问 s，它也将调用 gitolite （为了允许或拒绝访问，取决于您的 id）

https 配置如下所示：

```
ScriptAlias /hgit/ @H@/sbin/gitolite-shell/
SetEnv GIT_HTTP_BACKEND "@H@/usr/local/apps/git/libexec/git-core/git-http-backend"
<Location /hgit>
   ...
</Location> 
```

在这两种情况下，您都可以使用基于 LDAP 的身份验证来保护这些 http 地址：

```
AuthName "LDAP authentication for ITSVC Smart HTTP Git repositories"
AuthType Basic
AuthBasicProvider myldap companyldap
AuthzLDAPAuthoritative Off
Require valid-user 
```

您将在与 gitolite 关联的[`gitolite.conf`配置文件](http://sitaramc.github.com/gitolite/admin.html#conf)中注册您的用户/组/存储库。

```
@lockdoc_repos           =   test1 test3 # group of repo

repo @lockdoc_repos
    R                    = lockdoc # read-only access for lockdoc
    R                    = gitweb daemon # can be browsed 
```

有关如何允许浏览存储库的更多信息，请参阅“[删除 R @all 规则后在 gitolite 中找不到测试/信息/参考](https://stackoverflow.com/a/14012254/6309)” ，作者是 gitolite 本人的创建者Sitaram ( [Sitaram Chamarty](https://plus.google.com/u/0/115609618223925128756/posts) [) 。](https://stackoverflow.com/users/1925116/sitaram)

# extjs4 - EXTJS4 - 如何在网格中添加可编辑的复选框列？

> ID：14099741
> 
> 赞同：1
> 
> 时间：2012-12-31T09:20:45.067
> 
> 标签：extjs4

请让我知道，如何在网格中添加复选框列。

我尝试了[以下](http://ext4all.com/post/extjs-4-readonly-checkbox-column). 但它是只读的`checkbox`。

我应该使用`checkboxModel`吗？如果是这样，那么请让我有完整的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-29T14:36:43.580

在这里，一个匹配任何数据元素的 Ext4 示例：

```
{
    xtype: 'checkcolumn',
    header: 'My Checkbox column',
    dataIndex: 'myBooleanFieldThatMatchesTheModelFieldOfMyGridStore',
    listeners: {// In case you want to perform a specific action on click...
        checkChange: me.onCheckChange
    },
    flex: 1
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T12:55:04.177

这是一个带有复选框的网格示例。

```
var sm = Ext.create('Ext.selection.CheckboxModel');
var grid2 = Ext.create('Ext.grid.Panel', {
    store: //
    selModel: sm,
    columns: //[]
    columnLines: true,
    width: 600,
    height: 300,
    frame: true,
    title: 'Framed with Checkbox Selection',
    renderTo: Ext.getBody()
}); 
```

# actionscript-3 - as3 TypeError：错误＃1009：无法访问空对象引用的属性或方法。-enterframe

> ID：14099742
> 
> 赞同：-1
> 
> 时间：2012-12-31T09:20:46.340
> 
> 标签：actionscript-3, flash, hittest

我正在制作一个简单的游戏，我还在学习 as3 我想在舞台上击中测试对象，bila1 和 omidae1 如果 hittestobject gotoframe 所有对象都在舞台上，并且带有 corect instancename，maintimeline as3 下面一切正常，但我明白了空错误

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 testpeframe_fla::MainTimeline/ **bling** ()[testpeframe_fla.MainTimeline::frame1:32]

所以问题是Event.ENTER_FRAME，我该如何解决这个问题？

```
import flash.events.MouseEvent ;
import flash.events.Event;
import fl.transitions.Tween;
import fl.transitions.easing.*;
btnt.visible = false;

butondrr.addEventListener(MouseEvent.CLICK, fl_MouseClickHandler2);
function fl_MouseClickHandler2(event:MouseEvent):void
{   
var myTween:Tween = new Tween(bila1, "x", Strong.easeOut, 500, 700, 1, true);
var myTweenm:Tween = new Tween(bila1, "y", Strong.easeOut, 250, 600, 8, true);
} 

stage.addEventListener(Event.ENTER_FRAME, bling);
function bling(event:Event):void 
{

if(bila1.hitTestObject(omidae1)) 
{
omidae1.visible = false;
btnt.visible = true;
}
}
removeEventListener(Event.ENTER_FRAME, bling);
stop();
btnt.addEventListener(MouseEvent.CLICK, fl_ClickToGoToAndStopAtFrame);

function fl_ClickToGoToAndStopAtFrame(event:MouseEvent):void
{
gotoAndStop(5);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T13:58:10.913

在第 1 帧插入一个新帧（将所有其他帧向上移动一个，第 1 帧 -> 第 2 帧等）

可能发生的情况是您试图在 swf 完全加载之前访问内容。

在第一帧中添加：

```
addEventListener(Event.ADDED_TO_STAGE, ready);
stop();

function ready(e:Event):void {
    removeEventListener(Event.ADDED_TO_STAGE, ready);
    gotoAndPlay(2);
} 
```

# php - 如果出现错误消息，不希望将值插入文本输入

> ID：14099743
> 
> 赞同：0
> 
> 时间：2012-12-31T09:20:47.780
> 
> 标签：php, jquery, ajax

下面我有一个带有ajax代码的jquery，它将通过将新数据从一组输入（用户进行更改的输入集）插入另一组输入（输入集）来显示更改课程详细信息的值它说明了课程的当前详细信息）。如果需要更改，课程的下拉菜单也会更改以适应新的更改：

```
 function submitform() {    

    $.ajax({
        type: "POST",
        url: "updatecourse.php",
        data: $('#updateCourseForm').serialize(),
        success: function(html){
            $("#targetdiv").html(html);
            //Get and store the new course number and name.
                var newCourseNo = jQuery("#newCourseNo").val();
                var newCourseName = jQuery("#newCourseName").val();
                var newDuration = jQuery("#newDuration").val();

                //Set your current course number and name to your number and name.
                jQuery("#currentCourseNo").val(newCourseNo);
                jQuery("#currentCourseName").val(newCourseName);
                jQuery("#currentDuration").val(newDuration);

                //Find the currently selected course and update it.
                var selectedOption = jQuery("#coursesDrop option:selected");
                var label = selectedOption.text().split(" - ");
                selectedOption.text(newCourseNo + " - " + newCourseName);

                $('#targetdiv').show();
        }
     });        
} 
```

现在`$("#targetdiv")`是显示从通过 ajax 访问的 php 页面检索到的成功或错误消息的 id：

更新课程.php：

```
...//mysqli code

echo "<span style='color: green'>Course details have been updated:<br/>" . $newcourseno . " - " . $newcoursename . "</span>";

}else{

echo "<span style='color: red'>An error has occured, Course Details have not been updated</span>";

} 
```

但是我遇到的问题是，如果在 jquery 中检索到来自 php 代码的错误消息，那么我不希望课程详细信息在 jquery 中进行编辑以适应当前课程文本输入以插入新的详细信息。我只希望在出现成功消息时发生这种情况。

如果出现错误消息我不希望发生任何更改，则当前课程详细信息输入和新课程详细信息输入在提交之前保持不变。

但是如何才能做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:35:34.037

在更新 DOM EX 的基础上使用 JSON 响应中的任何标志：

```
 $.ajax({
        type: "POST",
        url: "updatecourse.php",
      dataType: 'json',
        data: $('#updateCourseForm').serialize(),
        success: function(json){
            $("#targetdiv").html(json.htmlContent);
            //Get and store the new course number and name.
        if(json.status=="success"){
 var newCourseNo = jQuery("#newCourseNo").val();
                var newCourseName = jQuery("#newCourseName").val();
                var newDuration = jQuery("#newDuration").val();

                //Set your current course number and name to your number and name.
                jQuery("#currentCourseNo").val(newCourseNo);
                jQuery("#currentCourseName").val(newCourseName);
                jQuery("#currentDuration").val(newDuration);

                //Find the currently selected course and update it.
                var selectedOption = jQuery("#coursesDrop option:selected");
                var label = selectedOption.text().split(" - ");
                selectedOption.text(newCourseNo + " - " + newCourseName);

                $('#targetdiv').show();
}else{
//show whatever mesage u want
}

        }
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:36:30.787

以 JSON 格式获取响应（这样您就可以在获得结果后操作响应......）

试试这个，

**查询**

```
$.ajax({
    type: "POST",
    url: "updatecourse.php",
    data: $('#updateCourseForm').serialize(),
    dataType:'json';  //get response as json
    success: function(result){
        if(result.errorflag){

           //do your stuff on getting error message
          var newHtml="<span style='color: red'>"+result.msg+"</span>" 
          $("#targetdiv").html(newHtml);  //i am displaying the error msg here

        }else{
           //you got success message

           var newHtml="<span style='color: green'>"+result.msg+"</span>" 
           $("#targetdiv").html(newHtml);
           //Get and store the new course number and name.
            var newCourseNo = jQuery("#newCourseNo").val();
            var newCourseName = jQuery("#newCourseName").val();
            var newDuration = jQuery("#newDuration").val();

            //Set your current course number and name to your number and name.
            jQuery("#currentCourseNo").val(newCourseNo);
            jQuery("#currentCourseName").val(newCourseName);
            jQuery("#currentDuration").val(newDuration);

            //Find the currently selected course and update it.
            var selectedOption = jQuery("#coursesDrop option:selected");
            var label = selectedOption.text().split(" - ");
            selectedOption.text(newCourseNo + " - " + newCourseName);

            $('#targetdiv').show();
         }
      }
 }); 
```

**PHP**

`json_encode()`将响应发送为 json.... 将响应作为带有错误标志的数组发送以检查它是成功还是错误以及要打印的味精...

```
...//mysqli code

    echo json_encode(array('errorflag'=>false,'msg'=>"Course details have been updated:<br/>" . $newcourseno . " - " . $newcoursename));

  }else{

  echo json_encode(array('errorflag'=>true,'msg'=>"An error has occured, Course Details have not been updated"));

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:36:08.513

在 Success Block 中这样做

```
success: function(html){
    var indexValue = html.indexOf("An error has occured"); 
    if (parseint(indexValue ) < 0 ) {
        return false;
    }

    $("#targetdiv").html(html); 
```

# composer-php - 如何为我的作曲家安装程序设置正确的设置

> ID：14099747
> 
> 赞同：1
> 
> 时间：2012-12-31T09:21:29.130
> 
> 标签：composer-php

我当前的文件夹结构：Composer/PluginInstaller.php

composer.json 的内容：

```
{
    "name": "zepluf/installer",
    "type": "composer-installer",
    "description": "Composer installer for ZePLUF addons.",
    "homepage": "http://github.com/zepluf/installer",
    "license": "custom",
    "authors": [
        {
            "name": "Raine Ng",
            "email": "vunguyen@rubikin.com",
            "homepage": "http://rubikin.com"
        }
    ],
    "autoload": {
        "psr-0": {
            "Zepluf\\Composer": "Composer"
        }
    },
    "extra": {
        "class": "Zepluf\\Composer\\PluginInstaller"
    },
    "target-dir": "zepluf/Composer"
} 
```

我希望将安装程序放在里面：

供应商/zepluf/Composer/PluginInstaller.php

问题是我不断得到：

致命错误：第 102 行的 phar://C:/Prog ramData/Composer/bin/composer.phar/src/Composer/Installer/InstallerInstaller.php 中找不到类“Zepluf\Composer\PluginInstaller”

任何指针将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T19:59:00.950

假设 PluginInstaller.php 在你的包的根目录下，它应该这样配置：

```
// ...

"autoload": {
    "psr-0": {
        "Zepluf\\Composer": ""
    }
},
"extra": {
    "class": "Zepluf\\Composer\\PluginInstaller"
},
"target-dir": "Zepluf/Composer" 
```

# c++ - 将 char * 转换为向量 C++

> ID：14099752
> 
> 赞同：1
> 
> 时间：2012-12-31T09:22:03.417
> 
> 标签：c++, pointers, vector

我有一个内存，我用`char * p`它来访问它。

我想要一个参考。我该怎么做？

```
vector<char>& v = p 
```

我需要做什么而不是 p 将其转换为向量，我还需要告诉它我在内存中使用的 char * 的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T14:30:07.100

本质上：

*   向量拥有它的内存，它不只是引用它。所以你可以创建一个新的向量来复制你的数据，但你不能让向量“获取”你的指针并使用它。

*   如果您必须有一个向量才能传递给第 3 方 API 并且您有一个指针，则您必须制作一个副本

*   如果您可以控制 API，则可以将其更改为采用一系列指针（开始/结束）或指针和大小。这样，如果您已经有一个向量，您仍然可以访问这些函数（尽管您不能期望`begin()`并`end()`给您指针。但是有一些方法可以将这些作为指针使用`&v[0]`，然后将大小添加到该指针）。

*   如果您只需要将数据放入标准算法中，您已经可以使用指针来完成。

显然，如果你有一个指针，你不能执行修改数据大小的向量操作，例如 push_back。但是由于您`char*`没有 a `const char*`，您可以修改成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:35:18.580

It's hard to answer this question without more information but I'll try. The most straight forward solution is probably to cast p to the correct type of pointer, and then construct a new vector. If you want a vector of chars:

```
std::vector<char> wewvec(p,p+20) 
```

where 20 is where you'll give the number of element. That is, if the data is really char.

If the data is of some other type, say it contains 20 floats, you could do:

```
const float* pf=reinterpret_cast<const float*>(p);
std::vector<float> wewvec(pf,pf+20) 
```

As Dietrich writes, this will *copy* the data into the new vector.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:05:41.300

如果你有一个指向内存块的指针 p

```
char* p = new char[100]; 
```

您可以通过编写来创建对它的引用

```
char& q = *p; 
```

如果您使用容器`vector`，则需要将内容复制到向量中，如 Johan 所说

# android - 递减值不起作用

> ID：14099756
> 
> 赞同：1
> 
> 时间：2012-12-31T09:23:05.443
> 
> 标签：android, sqlite, android-sqlite

我有一列要减 1。下面的代码似乎不起作用。

```
ContentValues dataToUpdate = new ContentValues();                          
dataToUpdate .put(MARKER_ID, MARKER_ID+"-1");
String where = IMAGE_ID_F+" = " +imageId+ " AND "+MARKER_ID+" > "+markerId+";";
int resultUpdate = db.update(TABLE_DEFECTS, dataToUpdate, where, null); 
```

我也试过了`rawQuery`。那也没有用。 **MARKER_ID**是列的名称。

```
 String restructureDbQuesry="UPDATE "+TABLE_DEFECTS+" SET "+MARKER_ID+" = "+MARKER_ID+"-1"+" WHERE "+IMAGE_ID_F+" = " +imageId+ " AND "+MARKER_ID+" > "+markerId;
  Cursor resultUpdate = db.rawQuery(restructureDbQuesry,null); 
```

迭代后的结果查询：

```
UPDATE defects SET Marker_Id = Marker_Id-1 WHERE Image_Id = 2 AND Marker_Id > 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:40:10.537

你必须像这样使用。

```
 public int updateCounter(int num,String number,int duration, String currentDate){
    ContentValues cv =new ContentValues();
    cv.put(DIALED_CALL, num-1);
    cv.put(CALL_DURATION, duration);
    cv.put(CALL_DATE, currentDate);
     return db.update(TABLE_LOGS, cv, PHONE_NUMBER + " = ? ", new String []{number});        

} 
```

试试这个也改变你的代码。

```
dataToUpdate .put(MARKER_ID, MARKER_ID-1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:48:43.890

这条线有问题：

```
dataToUpdate .put(MARKER_ID, MARKER_ID+"-1"); 
```

如果 MARKER_ID 是列的名称（假设它的'markerid'），那么您将把列设置为字符串值“markerid-1”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:36:44.563

试试这个：

```
String restructureDbQuesry="UPDATE "+TABLE_DEFECTS+" SET "+MARKER_ID+" = "+MARKER_ID+"-1"+" WHERE "+IMAGE_ID_F+" = " +imageId+ " AND "+MARKER_ID+" > "+markerId;
db.execSQL(restructureDbQuesry,null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T08:50:54.223

显然，在您执行在游标中不返回任何内容的查询之后，我们必须对游标执行一些操作。

所以，`resultUpdate.moveToFirst();`解决了这个问题。

# google-apps-script - 构建一个在单击时更改单元格颜色的脚本

> ID：14099758
> 
> 赞同：0
> 
> 时间：2012-12-31T09:23:15.037
> 
> 标签：google-apps-script, mobile, google-sheets, google-drive-api

我需要谷歌表格上的一个函数，当点击特定单元格时，它可以改变电子表格中单元格的颜色。它需要循环使用四种预定义的颜色。

我也需要移动设备上的这个功能，或者至少是 iPad。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T20:49:40.170

下面是一个使用 UI 应用程序的示例，该应用程序反映了电子表格中的值。网格和小部件具有默认大小。基础数据假定值为 0 -3。例如，电子表格未更新 - 对于实际实现，如果需要并发更新，则需要使用锁定。这在 ipad 上按预期工作。

```
function doGet() {
    var colours = ["white","green","blue","red"];  // background colour names referenced by offset 0,1,2,3
    var app = UiApp.createApplication();
    var grid = app.createFlexTable();  // the grid for ui
    var ss=SpreadsheetApp.openById('your spreadsheet id here')      ;  // your spreadsheet
    var data = ss.getSheets()[0].getDataRange().getValues();  // all the data on sheet 0  (valid values correspond to colour offset)
    var handler = app.createServerHandler('myClickHandler');  
    // fill the grid with text widgets, all using same clickhandler, set colour according to current data value of cell, Tag carries value to server handler
    for (i=0;i<data.length;i++){
      for (j=0;j<data[i].length;j++){
        var widget = app.createTextBox().setText(data[i][j]).addClickHandler(handler).setId("CellR"+i+"C"+j).setTag(data[i][j]).setStyleAttribute("background-color", colours[data[i][j]]);
        grid.setWidget(i, j, widget);
      }
    }
    app.add(grid);
    return app;
    // need to update the spreadsheet to match tag values before closing app!
    }

  function myClickHandler(e) {
    var colours = ["white","green","blue","red"];
    var app = UiApp.getActiveApplication();
    var colourvalue = parseInt(e.parameter[e.parameter.source+"_tag"] )+ 1; // gets the current tag value of clicked widget and increments it
    if (colourvalue > 3) {
      colourvalue = 0;   // reset at 4
    };
    // update the widget
    app.getElementById(e.parameter.source).setStyleAttribute("background-color", colours[colourvalue]).setText(colourvalue).setTag(colourvalue);
    return app;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-01T23:43:38.710

使用数据验证创建一个下拉列表，并且只允许来自该列表的输入。然后使用条件格式使四个菜单项中的每一个都更改单元格的背景颜色。

转到您的电子表格并确保选择了所需的单元格。在菜单栏上，转到日期>验证。将条件更改为“列表中的项目”。输入列表项“红色、绿色、蓝色、橙色”。选中“在下拉菜单中显示项目列表”。取消选中“允许无效数据，但显示警告”。保存更改，并在单元格仍处于选中状态的情况下，在菜单栏上转到“格式”>“条件格式”。使用文本包含这样的条件...“文本包含”“{您将在此处输入，假设为红色}”然后在背景旁边打勾，然后在最后一个框中选择您希望单元格使用的颜色更改为（在本例中为红色）。您可以在此条件格式中添加更多行（即，为绿色、蓝色和橙色再次执行最后一部分）。

# http - 为 JavaScript 请求设置 cookie

> ID：14099761
> 
> 赞同：0
> 
> 时间：2012-12-31T09:23:30.903
> 
> 标签：http, cookies, httpwebrequest

我相信我不是第一个问这个问题的人，但我没有通过谷歌搜索找到答案。
是否可以为 JS 请求设置 cookie？

**我**
的意思是：假设我有网站 www.a.com，该网站上的页面有 JS，包括 www.b.com/data.js。是否可以为 JS 文件设置 cookie？我不想在客户端读取该 cookie……我想要的是下次该用户在 www.b.com 上请求此 JS 或其他 JS 时，我将能够在服务器上获取该 cookie。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:27:57.300

是的，如果您将 JS 文件放在子目录中，这应该是可能的。然后，您可以仅为该目录创建一个 cookie，以使其在 data.js 中保持可见/范围。

这篇文章可能会帮助您[了解有关 cookie 范围的背景知识](http://www.maravis.com/library/protecting-web-application-cookies-by-restricting-scope/)

我在这个答案中做了一些假设，比如您正在使用某种形式的服务器端代码（例如 php、java 等）生成 data.js，以便您可以读取服务器上的客户端 cookie。

如果您认为我没有正确理解您的问题，请随时发表评论。

# java - 在 netbeans 中清理和构建后从 dist 文件夹运行 jar 文件时，xml 文件未读取

> ID：14099764
> 
> 赞同：2
> 
> 时间：2012-12-31T09:24:20.420
> 
> 标签：java, xml, xml-parsing

这是我的代码。

```
File file = new File("src/qrcodescanner/xmlpac/"+filename);
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder(); 
document = db.parse(file);
document.getDocumentElement().normalize(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:16:01.807

如果它不能是红色的，那么它很可能不是您期望的位置。从您发布的代码来看，我想您的 xml 文件旨在驻留在您的 jar/包结构中。

这是我的测试项目结构：

```
src
 |-- main
     |-- java
         |-- mypackage
                 MyCode.java
                 MyResource.xml 
```

对应生成的 jar 文件位于`target/`目录下，如下所示：

```
 mypackage
     MyCode.class
     MyResource.xml 
```

`MyResource.xml`看起来像这样：

```
<a>b</a> 
```

`MyCode.java`看起来像这样：

```
public class MyCode {

public static void main(String[] args) throws Exception {        
    String packagePath= "/mypackage/MyResource.xml";
    String myPath ="src/main/java"+packagePath;
    File f = new File(myPath);
    System.out.println(f.exists());        
    InputStream is = Class.class.getResourceAsStream(packagePath);                
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db = dbf.newDocumentBuilder(); 
    Document d = db.parse(is);
    System.out.println(d.getElementsByTagName("a").item(0).getTextContent());         
    }    
} 
```

运行时打印：

```
true
b 
```

方法[getResourceAsStream](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)用于从 JAR 中加载资源。希望有帮助。

# algorithm - Solr 文档标记

> ID：14099765
> 
> 赞同：2
> 
> 时间：2012-12-31T09:24:23.337
> 
> 标签：algorithm, apache, solr

我正在使用 Solr，我需要标记基于文档中的内容索引的文档。我正在考虑使用 KEA 来提取关键短语。所以我想知道是否有任何方法可以将 KEA 与 Apache Solr 集成并提供所需的解决方案。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T20:26:03.707

我认为最好的方法是编写一个 UpdateRequestProcessor。我使用 MAUI 做到了这一点，它基本上是一个 kea++，而且非常简单。

更多信息在这里：[http ://wiki.apache.org/solr/UpdateRequestProcessor](http://wiki.apache.org/solr/UpdateRequestProcessor)

我也强烈建议您使用 UIMA 集成

# google-chrome - Casperjs/PhantomJs 与 Selenium

> ID：14099770
> 
> 赞同：151
> 
> 时间：2012-12-31T09:24:41.433
> 
> 标签：google-chrome, user-interface, selenium, automation, phantomjs

我们正在使用 Selenium 来自动化我们的`UI`测试。最近我们看到我们的大多数用户都在使用 Chrome。所以我们想知道——使用 PhantomJS 和 Selenium 的优缺点：

*   在性能方面是否有任何真正的优势，例如执行测试用例所花费的时间？
*   什么时候应该更喜欢 PhantomJS 而不是 Selenium？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-12-31T10:38:16.460

他们正在解决不同的问题。由于 PhantomJS 在命令行上完美运行，它适合作为烟雾测试的第一层，无论是作为开发工作流程的一部分和/或在持续集成服务器中。Selenium 针对多个浏览器，因此确保跨浏览器的一致性和跨不同操作系统进行广泛的测试非常有用。

如果您的 Web 应用程序需要在各种 Web 浏览器上运行，仅使用 PhantomJS 运行 UI 测试不会产生最大的测试覆盖率。但是，在进行深入测试之前启动 PhantomJS 并进行一些基本的健全性检查是完全可以的。想象一下，在登录屏幕意外损坏且无法正常工作的情况下测试金融应用程序是多么疯狂！

请注意，随着最新 PhantomJS 中最近的 WebDriver 支持，两者之间的界限变得有些模糊。现在可以先使用 PhantomJS 快速运行测试，然后（假设没有遇到严重错误）继续在 Selenium 设置中彻底执行相同的测试。

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2013-01-16T12:06:54.363

通过最近的 WebDriver 集成（正如 Ariya 所指出的），您现在可以使用 Selenium 来驱动 PhantomJS。

这是非常强大的。

您可以在每次签入时通过您的 CI 在无头 Unix 服务器上运行一组全自动 Selenium 测试（使用 PhantomJS 作为 WebDriver 实现）。然后，如果您想测试浏览器兼容性，您可以通过将底层 WebDriver 实现更改为 Chrome、Firefox 等来在本地运行测试。

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2013-08-23T03:33:25.900

我目前正在编写一个网络提取框架。我有 524 个测试使用 XPath 从 250 个网站获取数据。最初该框架使用 HTML 解析器 HTMLCleaner，但我目前正在研究使用[Selenium](http://docs.seleniumhq.org/)，因为我需要 Javascript 支持。我已经针对 HtmlUnit、Chrome、Firefox 和[PhantomJS 驱动程序](https://github.com/detro/ghostdriver)运行了测试。以下是每种方法所花费的时间和失败次数的比较：

```
 Failures    Time (secs) 
HtmlCleaner         0           82  
HtmlUnit            169         102 
Google Chrome       38          562 
Firefox             46          1159    
PhantomJS           40          575 
```

一些评论：

*   在某些情况下，“失败”可能根本不是失败，可能是提取器失败了，因为 Javascript 正在重写 DOM。我正在分析失败以找出原因。

*   也就是说，HtmlUnit 是最快的 Selenium 驱动程序，但它也不可靠。这种不可靠性不仅仅与 Javascript 有关，在处理“混乱、肮脏、真实世界”的 HTML 时也存在问题，因为标签平衡算法似乎有问题。对此提出了一些问题，但尚未解决 - 请参阅[HTML-UNIT 1423](https://sourceforge.net/p/htmlunit/bugs/1423/)和[HTML-UNIT 1046](https://sourceforge.net/p/htmlunit/bugs/1046/)。

*   Firefox 是最慢的 Selenium 驱动程序，即使我禁用了图像加载和样式表。这是因为它的加载和初始化速度最慢，比 Chrome 慢得多，并且每次提取失败时我都需要重新加载驱动程序（在测试中，我创建了一个包含 5 个驱动程序的池，以减轻所有人的 URL 检索延迟Selenium 网络驱动程序）。

*   PhantomJS 比 Firefox 实现了更好的准确性，略低于 Chrome，但大约是 Firefox 的一半时间。更重要的是，我可以在我的开发盒上运行它，它不会通过启动多个浏览器来“接管我的机器”，这样我就可以继续工作了。

我强烈推荐 PhantomJS。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-04-11T06:13:08.527

***利用 Selenium 和 PhantomJS 的强大*** 功能 PhantomJS 具有无头浏览器功能，因此最好将其用作具有 selenium 的浏览器之一（除了 IE、Chrome 等传统浏览器之外）这种方法的优点：

1.  可用于在 CI 中对 Web 应用程序进行 Sanity（即使代理机器没有 IE 或 chrome），测试将有效运行。
2.  一些开发团队使用这种方法来获得快速的结果并消耗更少的时间和资源。
3.  phantom JS 最大的特点是屏幕截图，使用多线程运行并行测试，这将大大减少你的执行时间。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-28T12:00:33.677

**我在使用 PhantomJS 时遇到的挑战：**

*我的应用程序为 Web 应用程序定价：*

1.  在某些时候，在 chrome 浏览器上运行良好的定位器在 phantomJS 上不起作用。
2.  有时，在通过 selenium 执行双击或上下文单击时，我必须进行额外检查以验证操作，因为首先它没有单击。
3.  缓存和 cookie 的持久性。注销后再登录后，数据仍保留在缓存中。| 所以我们在chrome上进行测试。
4.  我发现“文件上传问题”的最重要问题之一。我们无法在应用程序的 phantomJs 浏览器中上传文件。我们尝试了很多 javascriptexcutor、jqueries 的东西，但它们都没有奏效。所以我们也在 Chrome 上进行了这个测试。注意：我们在框架中广泛使用了 javascript 函数来与 PhantomJS 的 web 元素进行交互。一件事是肯定的执行时间在 PhantomJS 中非常少。所以这取决于客户的优先级，他是否想要功能/性能然后去。如果您想测试端到端场景，请选择 chrome。

# html - C#如何在母版页上实现这种情况？

> ID：14099775
> 
> 赞同：0
> 
> 时间：2012-12-31T09:25:01.510
> 
> 标签：html, css, c#-4.0, hover, navigationbar

我正在做的网站包括一个带有导航栏的母版页。除了一件事，一切都在正确地发生。我需要悬停样式在所选内容页面中相同。我的意思是当我浏览主页时，例如悬停 CSS 样式位于`Home`导航栏上的图标上。我知道这对你来说很容易，但我是菜鸟。我正在使用这个 html 代码：

```
<div class="nav"><ul class="navbar" >
            <li><a href="Home.aspx">Home</a></li>
            <li><a href="About us.aspx">About us</a></li>
            <li><a href="Sections.aspx">Sections</a></li>
            <li><a href="App.aspx">Appointment</a></li>
            <li><a href="Registeration.aspx">Registration</a></li>
            </ul>
</div> 
```

并实现这个 css：

```
ul.navbar
{
list-style-type:none;
padding:6px 0 6px 0;
margin:0;
}

ul.navbar li
{
display:inline;
float:left;
}

.navbar a:active, .navbar a:link, .navbar a:visited
{
padding:0 14px 0 14px;
color:#32C5CF;
text-decoration:none;
}

.navbar a:hover
{
text-decoration:underline;
color:#cca628;
} 
```

问题是我应该使用服务器端来实现吗？如果是，我使用的是 asp.net c# 语言。请帮我。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:36:02.083

首先为您的每个列表项提供 ID，以便轻松找到它们。

例如

```
<div class="nav"><ul class="navbar" >
            <li id="home_link"><a href="Home.aspx">Home</a></li>
            <li id="about_link"><a href="About us.aspx">About us</a></li>
            <li id="sect_link"><a href="Sections.aspx">Sections</a></li>
            <li id="app_link"><a href="App.aspx">Appointment</a></li>
            <li id="reg_link"><a href="Registeration.aspx">Registration</a></li>
            </ul>
</div> 
```

然后您可以使用您的内容页的 Master 属性来获取母版页，然后使用 FindControl 来获取您要查找的控件。

有一个如何指导：http: [//msdn.microsoft.com/en-us/library/xxwa0ff0.aspx](http://msdn.microsoft.com/en-us/library/xxwa0ff0.aspx)

所以在主页上你会做

1.  搜索控制“home_link”的母版页（在您的情况下为 li 项）
2.  将要使其显示为活动的 CssClass 添加到您找到的项目
3.  放松

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-18T23:26:24.983

CSS 选择器不精确。

CSS 中的写选择器应该是这样的：

```
.navbar
{
list-style-type:none;
padding:6px 0 6px 0;
margin:0;
}

.navbar li
{
display:inline;
float:left;
}

.navbar li a:active, .navbar li a:link, .navbar li a:visited
{
padding:0 14px 0 14px;
color:#32C5CF;
text-decoration:none;
}

.navbar li a:hover
{
text-decoration:underline;
color:#cca628;
} 
```

上面的 CSS 应该可以按你的意愿工作。

# iphone - UIImage 的 drawInRect 不起作用

> ID：14099778
> 
> 赞同：0
> 
> 时间：2012-12-31T09:25:20.297
> 
> 标签：iphone, cocoa-touch, uiimage, drawrect

我几乎没有尝试使用 CoreGraphics 学习新事物。我有下面的代码，并且没有使用 drawInRect 函数设置图像。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    imgView=[[UIImageView alloc]init];
    [self drawRect:CGRectMake(10, 10, 20, 20)];

}

- (void)drawRect:(CGRect)rect {
    UIImage *img = [UIImage imageNamed:@"RoseBunch.jpeg"];

     UIGraphicsBeginImageContext(CGSizeMake(320, 480)); 

    [img drawInRect:CGRectMake(0, 0, 50, 50)];  
    UIImage *resultingImage = UIGraphicsGetImageFromCurrentImageContext();

     UIGraphicsEndImageContext(); 
     imgView.image=resultingImage;
} 
```

这有什么问题？为什么它不工作？谁能解释我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:52:18.113

drawInRect 方法仅适用于[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)中所写的当前图形上下文。

问题是您没有在当前图形上下文中绘图，因为您使用：

```
UIGraphicsBeginImageContext(CGSizeMake(320, 480)); 
```

我建议你尝试这样的事情：

```
UIImage *img = [UIImage imageNamed:@"RoseBunch.jpeg"];
CGContextRef c = UIGraphicsGetCurrentContext();
[img drawInRect:CGRectMake(0, 0, 50, 50)];

CGImageRef contextImage = CGBitmapContextCreateImage(c);
UIImage *resultingImage = [UIImage imageWithCGImage:contextImage];
imgView.image=resultingImage;
CGImageRelease(contextImage); //Very important to release the contextImage otherwise it will leak. 
```

还有一件非常重要的事情：您不应该在 draw 方法中加载图像，因为每次调用 draw 函数时都会加载图像。

# java - 使用键从链表中删除节点

> ID：14099779
> 
> 赞同：0
> 
> 时间：2012-12-31T09:25:20.407
> 
> 标签：java, linked-list, nodes

我想从链表中删除一个节点。链表包含以下类型的数据（包含有空格的数据）

```
aa 1 1 1 1

bb 2 2 2 2 

ab 3 3 3 3

cc 4 4 4 4 

dd 5 5 5 5 
```

问题是我的代码只删除了我用 dd 5 5 5 5 创建的最后一个节点，没有别的！请阅读我的代码并向我提出任何解决方案，为什么它会发生在我身上？

```
public Node del(String key){
        Node p=first;

        for(Node c=first;c!=null;c=c.next)

        {
           if(c.data.startsWith(key)){
              if(c.next==null){
                  return null;
              }else{
                   p=c;
              }
              if(c==first)
                  first=first.next;
              else
                  p.next=c.next;
              return c;
           }
        }
        return null;
    } 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T18:37:16.973

```
for(currentnode=start; currentnode!=null; currentnode=currentnode.delnext){

        if(currentnode.deldata.startsWith(mykey)){

                        if(currentnode==start)
                            start=start.delnext;
                        else
                            prevnode.delnext=currentnode.delnext;

                        currentnode.deldata=null;

        }

        prevnode=currentnode;
    }

    } 
```

此代码将像我已更正我的代码的魅力一样工作！感谢上帝

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:38:11.693

在迭代中，您需要维护当前节点 ( `c`) 和前一个节点 ('p')。然后，如果您发现它`c`具有您要查找的密钥，则设置`p.next = c.next`. 这将从列表中删除 c。然后测试空列表、包含一个元素的列表和包含两个元素的列表的代码，因为在这些特殊情况下，您需要以不同的方式处理删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T09:39:01.383

您的代码有几个问题。唯一有效的情况是删除列表的第一个元素。

我认为你通过找到正确的解决方案比我只是给你学到更多。尝试在纸上画出列表的草图，并观察变量`p`和`c`程序运行时引用的节点。

在单步执行程序时查看调试器中的执行也可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T09:45:46.940

改变你的逻辑如下：

```
public Node del(String key)
{
    Node p = null;

    for(Node c=first;c!=null;p=c;c=c.next)
    {
       if(c.data.startsWith(key))
       {
           if(c==first)
               first=first.next;
           else
               p.next=c.next;

           c.next = null;
           return c;
       }
    }

    return null;
} 
```

如果要删除链表中的节点，则应该引用它的前一个节点。`p`是在当前节点之前维护一个节点的参考`c`。检查`for`循环是如何修改的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-31T09:46:02.507

您的主要问题（还有其他一些问题，但我会专注于您要求的问题）是 p 始终指向第一个链接。当您找到密钥时`p.next = c.next`，如果在最后一个链接中找到您的项目，`first.next`则将指向最后一个链接，跳过所有其他有效链接。

例如 ：

> 1->2->3->4->5

如果我在您的代码之后查找**key=4**，则列表将如下所示：

> 1->5

# mongodb - mongodb 副本集在这种情况下如何反应？

> ID：14099782
> 
> 赞同：2
> 
> 时间：2012-12-31T09:25:26.957
> 
> 标签：mongodb, nosql

给定一个典型的副本集（一个主、一个辅助和一个仲裁器）的场景，其中 3 个成员部署在 3 个独立的网络节点上。如果主从之间的网络连接断开，而其他一切都很好，那么 mongodb 会如何反应？

这种情况下，arbiter知道primary和secondary都活着，primary实际上并没有受到影响，虽然它会继续上报secondary的断线，但是对于secondary，会不会触发选举成为primary呢？那么原来的初级会发生什么？等等。

我不知道会发生什么，而且这种场景很难在我的电脑上创建。剂量有人有线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T14:33:40.860

如果您有一个三节点副本集，只要两个成员可以互相看到（其中一个是数据承载节点），就可以选举主节点。

因此，一个节点完全断开连接的可能场景：

*   如果*primary*和*arbiter*可以看到其他（但不是*从属*），则没有选举但*从属*将开始累积复制延迟，直到网络连接恢复（或从属*的* [oplog](http://docs.mongodb.org/manual/core/replication/#replica-set-oplog-sizing)不再与*主*有共同点，必须重新[同步](http://docs.mongodb.org/manual/administration/replica-sets/#replica-set-resync-stale-member)）。

*   如果*primary*和*secondary*可以看到对方（但不是*arbiter*），则没有选举，复制将正常继续。

*   如果*secondary*和*arbiter*可以看到其他（但不是*primary*），则从*节点*将被选为主节点。如果存在复制延迟，则可能有一些条目写在前一个主节点上，而这些条目在辅助节点上不被接受。当前一个主节点能够重新加入副本集（作为辅助节点）时，任何未复制到当前主节点的操作都将保存为[回滚](http://docs.mongodb.org/manual/core/replication/#replica-set-rollback)。

在*主节点*和*辅助*节点可以看到*仲裁器*但彼此看不到的部分断开连接的情况下，我希望*辅助节点*将尝试开始选举但被否决，因为*仲裁器*可以看到比*辅助节点更新的活动**主*节点（如果任何节点否决，则选举失败）。

 *当网络可用性不一致时，还有一个更棘手的情况。在这种情况下，如果主节点间歇性无法访问，则副本集可能会经历“抖动”（连续选举）。

模拟网络场景的一种方法是使用防火墙规则（用于阻止）和工具，例如[`tc`（流量控制](http://lartc.org/manpages/tc.txt)引入延迟或丢包。还有一个`mongobridge`工具可以在 MongoDB 源代码树中编译（请参阅：[使用 mongobridge 模拟网络分区](http://www.kchodorow.com/blog/2011/04/20/simulating-network-paritions-with-mongobridge/)） .

其他有用的阅读：

*   [Kristina Chudorow 的副本集内部训练营：第一部分 - 选举](http://www.kchodorow.com/blog/2012/01/04/replica-set-internals-bootcamp-part-i-elections/)。

*   [服务器密度：避免抖动](http://blog.serverdensity.com/avoiding-flapping/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T04:01:02.473

我认为这个问题是由这个错误回答的：[https](https://jira.mongodb.org/browse/SERVER-9730) ://jira.mongodb.org/browse/SERVER-9730 “在任何情况下，当主已经存在时不要投票”，所以不会有两个主。*

# mysql - 从 Mysql 到 Mysql 的数据复制问题

> ID：14099784
> 
> 赞同：0
> 
> 时间：2012-12-31T09:25:42.733
> 
> 标签：mysql, database-replication

我在两个 MySql 数据库之间重新升级数据复制时遇到问题。两个数据库位于两个不同的基于 IP 地址的系统中。它在本地主机上测试时工作正常，但是当我将系统与另一个远程系统连接时，它会给出以下错误消息：

```
 error in connecting the master @ XX.xxx 
```

错误号是 2013。可能是什么原因？我也无法ping到这个IP地址。（防火墙被禁用）虽然我可以访问部署在这个IP地址XX.xxx上的任何应用程序（php + mysql）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:31:22.500

尝试使用与复制用户相同的属性（*mysql -h[other ip] -P[other port] -u[replication user] -p[replication user password]*）使用普通 mysql 客户端从一台主机连接到另一台主机并发出正常的 sql 命令（*select now()*）。如果这不起作用，则说明防火墙或类似问题。如果您正在运行某种Linux，也许apparmour。

如果它确实有效，请确保用户具有[REPLICATION SLAVE](http://dev.mysql.com/doc/refman/5.5/en/replication-howto-repuser.html)权限，没有它就无法工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:34:48.250

好吧，错误消息基本上告诉您手头的问题是什么：从服务器连接到主服务器时出现问题。

可能有几种可能导致这种情况，网络问题或设置问题。

一些忠告：

*   检查主从之间的网络。你能从奴隶连接到主人吗（也许可以通过命令行尝试）？
*   复制用户设置是否正确？它有[`REPLICATION SLAVE`](http://dev.mysql.com/doc/refman/5.1/en/privileges-provided.html#priv_replication-slave)特权吗？

它甚至可能比这更复杂一些，但首先给我们一些进一步调试的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T11:39:35.200

这提供了有关如何在没有问题的情况下执行此操作的详细说明。[http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.0/en/replication-howto.html)

# c# - Windows 8 Metro 中的 SSDP 发现不可靠

> ID：14099785
> 
> 赞同：1
> 
> 时间：2012-12-31T09:25:48.750
> 
> 标签：c#, windows, microsoft-metro, ssdp

我在 Windows 8 Metro 程序中实现 SSDP 发现时遇到问题。下面是代码：

```
public async Task SearchForDevices()
    {
        var socket = new DatagramSocket();
        socket.MessageReceived += async (sender, args) =>
                                            {
                                                Debug.WriteLine("Received data" + DateTime.Now);
                                                DataReader reader = args.GetDataReader();

                                                uint count = reader.UnconsumedBufferLength;
                                                string data = reader.ReadString(count);
                                                Debug.WriteLine(data);
                                                var response = new Dictionary<string, string>();
                                                foreach (
                                                    string x in
                                                        data.Split(new[] {"\r\n", "\n"}, StringSplitOptions.None))
                                                {
                                                    if (x.Contains(":"))
                                                    {
                                                        string[] strings = x.Split(':');
                                                        response.Add(strings[0].ToLower(), x.Remove(0, strings[0].Length + 1));
                                                    }
                                                }

                                                Device device = await GetXml(response);
                                                Debug.WriteLine("Device found");
                                                if (DeviceFound != null)
                                                    DeviceFound(this, new DeviceFoundEventArgs(device));
                                            };
        await socket.BindEndpointAsync(null, "");
        HostName hostName = new HostName("239.255.255.250");
        socket.JoinMulticastGroup(hostName);

        string message = "M-SEARCH * HTTP/1.1\r\n" +
                               "HOST: " + hostName.DisplayName + ":1900\r\n" +
                               "ST: upnp:rootdevice\r\n" +
                               "MAN: \"ssdp:discover\"\r\n" +
                               "MX: 3\r\n\r\n";

        DateTime start = DateTime.Now;
        TimeSpan interval = new TimeSpan(0, 0, 30);
        Debug.WriteLine(start);
        IOutputStream stream = await socket.GetOutputStreamAsync(hostName, "1900");
        var writer = new DataWriter(stream) { UnicodeEncoding = UnicodeEncoding.Utf8 };
        writer.WriteString(message);
        await writer.StoreAsync();
        await Task.Delay(1500);
    } 
```

这段代码根本不可靠。大约 50% 的时间它找不到连接的设备，而其他发现可以找到。但有时它会起作用。

我的网络嗅探器 (SmartSniff) 有时甚至无法捕获其 SSDP 请求，即使我已经多次拨打电话。

我不认为这是一个异步问题，因为它偶尔会起作用。请帮我 ！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T13:51:20.067

尝试将本地端点绑定到分配给您希望发送 UDP 多播请求的本地网络适配器的 IP 地址。

您没有使用数据包嗅探器看到传出的 UDP 数据包这一事实使我相信该请求是在与您捕获的网络接口不同的网络接口上发送的。我假设您有多个网络接口（例如以太网和 WLAN）。在处理多播时，您必须确保您的请求在*所有*网络接口上发送出去，以物理到达所有连接的网络。

另请参阅[查询本地 IP 地址](https://stackoverflow.com/questions/10336521/query-local-ip-address)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T13:23:36.663

我认为你将不得不强制`SocketOptionName.ReuseAddress`你的插座。我无法解释为什么我这么认为，你显然没有犯与[@Joern 尝试使用端口 1900 作为本地端点](https://stackoverflow.com/questions/12794761/upnp-multicast-missing-answers-from-m-search-discovery)相同的错误。但这是我能看到的唯一区别，他的情况仍然适用：很可能另一个 UPnP 控制点已经在您的 Windows 机器上运行。尝试在 Windows 管理工具中禁用 UPnP 服务，看看您的代码运行是否更可靠。

或者尝试重写以@Joern 的方式建立的UDP 套接字。我不是 C# 专家，但是当某些 API 允许您以多种不同的方式做同样的事情时，它总是很可疑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-02T22:20:23.240

如果我猜对了，这`await Task.Delay(1500);`意味着您允许任务在完成前运行 1.5 秒，那么您有一个有趣的问题原因。

你看，M-SEARCH 中的“MX: 3”表示“随机延迟回复，最多 3 秒”。鉴于您只等待 1.5 秒，因此大约 50% 的响应会丢失给您是有道理的；-)

# php - 重定向后的404

> ID：14099787
> 
> 赞同：1
> 
> 时间：2012-12-31T09:25:50.890
> 
> 标签：php, zend-framework

我有这个重定向：

```
$this->_helper->redirector('freenights/supplierId/' . $sws. '/contractId/' . $con); 
```

它把我重定向到这个网址：

```
http://contract.local/contracts/freenights%2FsupplierId%2F3%2FcontractId%2F2 
```

但我得到这个 404 错误：

> 在此服务器上找不到请求的 URL /contracts/freenights/supplierId/3/contractId/2。

如果我没有任何问题直接去

```
http://contract.local/contracts/freenights/supplierId/3/contractId/2 
```

为什么我得到404？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:33:47.950

Try using `goToUrl` method of `Redirector` helper. See [example 6 in Zend Framework manual](http://framework.zend.com/manual/1.12/en/zend.controller.actionhelpers.html#zend.controller.actionhelper.redirector.basicusage)

```
$this->_redirector = $this->_helper->getHelper('Redirector');
$this->_redirector->gotoUrl('freenights/supplierId/' . $sws. '/contractId/' . $con); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:30:16.557

我猜您由于 URLEncoder 问题而收到 404 错误，请尝试使用 Header 函数进行测试。

# c# - C# 发布应用程序属性

> ID：14099788
> 
> 赞同：-3
> 
> 时间：2012-12-31T09:26:04.243
> 
> 标签：c#, publish

我想用 C# 发布一个桌面应用程序，我创建了一个安装项目，一切都很好，但我找不到在哪里：

1.  修改程序文件夹的名称，现在是：“默认公司名称”。
2.  如何强制它显示桌面快捷方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:56:37.253

> 修改程序文件夹的名称，现在是：“默认公司名称”。

单击设置解决方案，然后按 F4 ，或获取属性菜单，您将找到作者/制造商/ ...带有“默认公司名称”，因此可以随意更改它们

> 如何强制它显示桌面快捷方式。

右键单击解决方案->查看->文件系统

选择应用程序文件夹，然后右键单击要在桌面上创建快捷方式的文件，然后选择“创建快捷方式......”

然后转到用户的桌面并重命名快捷方式（从快捷方式名称中删除快捷方式单词）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:32:59.277

You should check in the AssemblyInfo.cs of the main project or in the Project Properties of the Setup Project.

# syntax - 构造函数混淆

> ID：14099790
> 
> 赞同：0
> 
> 时间：2012-12-31T09:26:09.513
> 
> 标签：syntax, constructor, dart

这是来自 Dart 样本（时钟样本）的 Balls 类的一部分：

```
 DivElement root
  num lastTime;
  List<Ball> balls; 
```

球（） ：

```
lastTime = new Date.now().millisecondsSinceEpoch,           
balls = new List<Ball>() {                           \\I do not understand here, why use                               
root = new DivElement();                             \\ List<Ball>(){...}
document.body.nodes.add(root);
makeAbsolute(root);
setElementSize(root, 0.0, 0.0, 0.0, 0.0);
} 
```

因为我不明白，所以我改变了构造函数：

```
 Balls() {

    lastTime = new Date.now().millisecondsSinceEpoch;
    balls = new List<Ball>() ;
    root = new DivElement();
    document.body.nodes.add(root);
    makeAbsolute(root);
    setElementSize(root, 0.0, 0.0, 0.0, 0.0);

  } 
```

该应用程序仍然有效。构造函数之间有什么不同`Ball():` `and Ball(){}`吗？谢谢。
对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:49:20.767

两个版本都应该可以正常工作。符号中的代码在`:`构造函数主体之前运行，因此它通常用于调用 super 之类的事情：

```
class Person {
  String name;

  Person(this.name);
}

class Employee extends Person {
  Employee(name) : super(name) {
    print('ran after the super call');
  }
} 
```

我认为函数体是一种更简洁的方法，并且我相信“球”示例想要展示不同的样式，因为您也可以内联初始化值。

我通常使用函数体方法，除非它看起来更干净或者我正在调用父构造函数。

**更新：** Ladicek 增加了公平点。您可以`final`内联或在初始化程序列表中初始化字段。并且与某些语言不同，在 Dart 中保证字段永远不会处于未初始化状态。记住初始化程序按它们列出的顺序运行也很好。

# php - 更改 HAS_MANY 关系生成的数组

> ID：14099795
> 
> 赞同：3
> 
> 时间：2012-12-31T09:26:29.920
> 
> 标签：php, yii

```
'driverNegotiation' => array(self::HAS_MANY, 'DriverNegotiation', 'driver_id') 
```

`negotiations`这会为我的`Driver`对象生成一个数组。数组从零开始索引。有没有办法*设置用作数组键的值*，假设`team_id`可以从中找到`DriverNegotiation`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:41:22.277

我不完全确定“设置用作数组键的值”是什么意思。但是，如果您的意思是从由表值之一索引的 driverNegotiation 关系返回一个数组`DriverNegotiation`，而不是数字索引，那么您可以将`index`参数添加到关系中：

```
'driverNegotiation' => array(self::HAS_MANY, 'DriverNegotiation', 'driver_id', 'index'=>'team_id') 
```

请注意，无论何时 team_id 发生冲突，您只会得到一个结果，这几乎相当于进行 group by。

**更新**
根据您关于从关系中拉下来的评论，这不是我曾经做过的事情，但它可能是可行的。`'together'=>true`我的猜测是，使用on 将关系拉到一起`with`，然后指定一个`index`：

```
'index'=>'`baseNegotiation`.`team_id`' 
```

如果这不起作用，我不确定下一步该去哪里，也无法立即进行测试，但我也会尝试在 Yii 论坛上进行尝试，因为那里的开发人员非常擅长回应。

# android - Parcelable 如何在 Android 中工作？空指针异常

> ID：14099796
> 
> 赞同：1
> 
> 时间：2012-12-31T09:26:36.273
> 
> 标签：android

我编写了以下代码以将值传递给活动

```
 Intent intent = new Intent(DetailActivity.this,
                        MyMapActivity.class);
        intent.putExtra("tourguide.intent.extra.isbusiness", false);

        startActivity(intent); 
```

在接收端我有以下代码

```
boolean IsBusiness = false;
    IsBusiness = getIntent().getParcelableExtra(
        "tourguide.intent.extra.isbusiness"); 
```

我收到 NullPointerException 错误

我什至尝试使用 CASTING 如下

```
 IsBusiness = (boolean)getIntent().getParcelableExtra(
        "tourguide.intent.extra.isbusiness"); 
```

但是没有用。:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:30:04.697

尝试

```
 getIntent().getBooleanExtra(name, defaultValue); 
```

就像是，

```
 IsBusiness = getIntent().getBooleanExtra("tourguide.intent.extra.isbusiness", false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:29:43.813

首先，使用 getIntent() 方法获取启动活动的意图：

```
Intent intent = getIntent();

IsBusiness = intent.getBooleanExtra("mauritiustourguide.intent.extra.isbusiness"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T09:32:07.780

只需传递布尔值而不是字符串一。不需要可包裹的物品。在你的情况下

```
Intent intent = new Intent(DetailActivity.this,
                        TourMapActivity.class);
intent.putExtra("isBusiness", false);

startActivity(intent); 
```

您可以使用 Parselable mechanizm 将实体序列化为普通类型。

这是 Google 使用 Parselable 的第一个示例。

公共类 ObjectA 实现 Parcelable {

```
private String strValue;
private Integer intValue;

/**
 * Standard basic constructor for non-parcel
 * object creation
 */
public ObjectA() { ; };

/**
 *
 * Constructor to use when re-constructing object
 * from a parcel
 *
 * @param in a parcel from which to read this object
 */
public ObjectA(Parcel in) {
    readFromParcel(in);
}

/**
 * standard getter
 *
 * @return strValue
 */
public String getStrValue() {
    return strValue;
}

/**
 * Standard setter
 *
 * @param strValue
 */
public void setStrValue(String strValue) {
    this.strValue = strValue;
}

/**
 * standard getter
 *
 * @return
 */
public Integer getIntValue() {
    return intValue;
}

/**
 * Standard setter
 *
 * @param intValue
 */
public void setIntValue(Integer intValue) {
    this.intValue = intValue;
}

@Override
public int describeContents() {
    return 0;
}

@Override
public void writeToParcel(Parcel dest, int flags) {

    // We just need to write each field into the
    // parcel. When we read from parcel, they
    // will come back in the same order
    dest.writeString(strValue);
    dest.writeInt(intValue);
}

/**
 *
 * Called from the constructor to create this
 * object from a parcel.
 *
 * @param in parcel from which to re-create object
 */
private void readFromParcel(Parcel in) {

    // We just need to read back each
    // field in the order that it was
    // written to the parcel
    strValue = in.readString();
    intValue = in.readInt();
}

/**
 *
 * This field is needed for Android to be able to
 * create new objects, individually or as arrays.
 *
 * This also means that you can use use the default
 * constructor to create the object and use another
 * method to hyrdate it as necessary.
 *
 * I just find it easier to use the constructor.
 * It makes sense for the way my brain thinks ;-)
 *
 */
public static final Parcelable.Creator CREATOR =
    new Parcelable.Creator() {
        public ObjectA createFromParcel(Parcel in) {
            return new ObjectA(in);
        }

        public ObjectA[] newArray(int size) {
            return new ObjectA[size];
        }
    }; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T09:30:22.067

我认为这`Code`将对您有所帮助

传递给活动：

```
Intent i = new Intent(getBaseContext(), NameOfActivity.class);
i.putExtra("my_boolean_key", myBooleanVariable);
startActivity(i) 
```

在第二个活动中检索：

```
Bundle bundle = getIntent().getExtras();
boolean myBooleanVariable = bundle.getBoolean("my_boolean_key"); 
```

# java - JavaFX 等效于 Swing 的 pack()

> ID：14099797
> 
> 赞同：23
> 
> 时间：2012-12-31T09:26:43.790
> 
> 标签：java, swing, javafx-2

我想调整窗口大小以适应窗口的内容。在 Swing 中有[`pack()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Window.html#pack%28%29)方法。在 JavaFX 中是否有类似的方法可以做到这一点？

我想做的是创建一个确认对话框。当我创建对话框时，它比内容更宽，所以我问自己是否需要类似 pack 方法的东西。

这是正在发生的事情的屏幕截图： ![在此处输入图像描述](../Images/9346e629cb39beabf59276c5e26e125e.png)

这是我的代码：

```
mainClass.getPrimaryStage().setOnCloseRequest(new EventHandler<WindowEvent>() {
    @Override
    public void handle(final WindowEvent e) {
        e.consume();

        final Stage dialog = new Stage();
        dialog.setTitle("Confirm Before Exit");
        dialog.setResizable(false);
        dialog.initOwner(mainClass.getPrimaryStage());
        dialog.initModality(Modality.APPLICATION_MODAL);

        FlowPane buttons = new FlowPane(10,10);
        buttons.setAlignment(Pos.CENTER);
        Button yes = new Button("Yes");
        Button no = new Button("No");
        buttons.getChildren().addAll(yes, no);
        VBox box = new VBox();
        box.setAlignment(Pos.CENTER);
        box.setSpacing(10);
        box.getChildren().addAll(new Label("Do you really want to exit?"), buttons);

        yes.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent t) {
                Platform.exit();
            }
        });
        no.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent t) {
                dialog.close();
            }
        });

        Scene s = new Scene(box);
        dialog.setScene(s);
        dialog.show();
    }
}); 
```

[`JOptionPane`](https://docs.oracle.com/javase/7/docs/api/javax/swing/JOptionPane.html)我希望他们能尽快在 JavaFX 中实现类似的东西！这不是我应该做的事情，它是如此基本......

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-31T13:15:34.017

尝试使用`sizeToScene()`我认为这就是你想要的。让我举个例子：

![安装在按钮上的 JavaFX 舞台](../Images/73bc87852a9d19e63707786c574846e7.png)

```
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class NewFXMain extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("Hello World!");
        Button btn = new Button();
        btn.setText("Say 'Hello World'");
        btn.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent event) {
                System.out.println("Hello World!");
            }
        });

        StackPane root = new StackPane();
        root.getChildren().add(btn);
        primaryStage.setScene(new Scene(root));
        primaryStage.sizeToScene();
        primaryStage.show();
    }
} 
```

# ios - iCarousal 在加载视图时选择第二个索引

> ID：14099801
> 
> 赞同：0
> 
> 时间：2012-12-31T09:27:31.877
> 
> 标签：ios, objective-c

在我的项目中，我有`iCarousel`一个观点。一切对我来说都很好。但我的问题是，当视图被加载时，我想将第二个索引对象保持在视图的中心。我在轮播中总共显示了三个图像。现在第二个图像在右上角加载。我想在加载时将它保持在中心。我怎样才能做到这一点。？请分享你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T07:02:32.807

在`iCarousel.m`设置整个轮播视图后，您可以使用此方法您可以调用此方法：

```
[self scrollToItemAtIndex:2 duration:0]; 
```

# python - 内存限制下的对象池

> ID：14099804
> 
> 赞同：2
> 
> 时间：2012-12-31T09:27:43.160
> 
> 标签：python, memory-management, python-3.2, object-pooling

我们使用了许多大型对象。理想情况下，我们希望将它们全部永久地提供给客户端代码，但它们不能一次全部放入物理内存中。所以当我们接近内存限制时，我们需要销毁池中的一些对象（可能，我们将销毁最近最少使用的对象）。（使用磁盘上的虚拟内存等于完全冻结系统。）

具体而言，每个对象的内存在 ~100MB 和 ~10GB 之间变化；我们拥有的 RAM 总量为 32GB。

不幸的是，我们不知道每个对象使用的内存，直到它被创建。因此，我们无法预测任何给定对象是否适合可用的物理内存。

一个好的解决方案是为 Python 内存分配器提供回调函数，并在看到可用物理内存量低于某个阈值时让内存分配器调用它。该回调函数将简单地从池中销毁一个对象，然后返回。虽然一般来说，不能保证内存会立即可用，但在 CPython 中肯定会（它会在引用计数器达到零时释放内存），这可能是我所要求的。

不幸的是，我不知道有什么方法可以让 Python 内存分配器在内存不足时调用提供给它的函数。还有什么我可以做的吗？

我想我可以在后台运行一个单独的线程，并每隔一秒左右检查一次可用内存。如果它发现可用的物理内存少于 5GB，它将开始从池中销毁对象。假设对象销毁的平均速度至少与对象创建的速度一样快，那么 5GB 缓冲不会被用完太多，我们会没事的。这似乎很脆弱；但是这种方法的任何实现想法仍然很棒。

这必须在 Python 3.2 下的 Linux 上工作，但如果也有适用于 Windows 的（可能不同的）解决方案，那就太好了。

注意：[三层内存分配在起作用](http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm)：操作系统、`malloc`（C 运行时）和 Python 对象分配器。

# windows-8 - 使用 C++ 库中的 WinRT API 获取 ProgramFiles 路径

> ID：14099807
> 
> 赞同：0
> 
> 时间：2012-12-31T09:28:28.040
> 
> 标签：windows-8, windows-runtime, porting

您能否为以下 win32 API 提供备用 WinRT API `SHGetSpecialFolderPath(NULL, buffer, CSIDL_PROGRAMS, 0)`？

StorageFolder 类只会给出应用程序特定的路径。

谢谢你

# c# - Windows 8 应用程序中的 HttpClient 异常

> ID：14099812
> 
> 赞同：0
> 
> 时间：2012-12-31T09:28:57.963
> 
> 标签：c#, http, httpclient

我正在使用 HttpClient 在我的 Windows 8 应用程序中从服务器发送和接收数据。

下面是我的代码：

```
HttpClientHandler handler = new HttpClientHandler();
handler.UseDefaultCredentials = true;
handler.ClientCertificateOptions = ClientCertificateOption.Automatic;
handler.AutomaticDecompression = DecompressionMethods.GZip;

HttpClient httpClient = new HttpClient(handler);
httpClient.Timeout = TimeSpan.FromSeconds(30);
httpClient.DefaultRequestHeaders.ExpectContinue = false;

HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Post, URL);

request.Content = new StreamContent(new System.IO.MemoryStream(_postDataInBytes));
request.Content.Headers.Add("Content-Type", "application/x-www-form-urlencoded");

HttpResponseMessage response = await httpClient.SendAsync(request); 
```

现在的问题是我在 SendAsync() 函数中遇到异常。例外是**“底层连接已关闭：接收时发生意外错误”**。这是随机发生的。谁能告诉我这里有什么问题？

# android - 使用播放列表 url 获取 youtube 视频

> ID：14099817
> 
> 赞同：0
> 
> 时间：2012-12-31T09:29:30.553
> 
> 标签：android, android-emulator, youtube, youtube-api

如何从[http://gdata.youtube.com/feeds/api/playlists/EL5BQGc0nPiVI?v=2&alt=json获取视频列表](http://gdata.youtube.com/feeds/api/playlists/EL5BQGc0nPiVI?v=2&alt=json)

我已经制作了一个程序，我可以在其中使用这种 URL 获取视频列表：请检查[这个](http://gdata.youtube.com/feeds/api/users/GoogleDevelopers/uploads?v=2&alt=jsonc)，但这次我想在 Android 中使用 Playlist 获取视频列表，就像使用[这个](http://gdata.youtube.com/feeds/api/playlists/EL5BQGc0nPiVI?v=2&alt=json)URL 一样，实际YouTube 视频[网址](http://www.youtube.com/playlist?list=EL5BQGc0nPiVI)：

在这里，我使用的是 JSON，但现在我不知道我需要对代码进行哪些更改才能使用上述播放列表 URL 获取视频列表。

```
 @Override
  public void run() {
    try {

        HttpClient client = new DefaultHttpClient();

        HttpUriRequest request = new HttpGet("http://gdata.youtube.com/feeds/api/playlists/EL5BQGc0nPiVI?v=2&alt=json"); 

        // Get the response that YouTube sends back
        HttpResponse response = client.execute(request);
        // Convert this response into a readable string
    String jsonString = StreamUtils.convertToString
            (response.getEntity().getContent());
        // Create a JSON object that we can use from the String
        JSONObject json = new JSONObject(jsonString);

        // Get is search result items
    JSONArray jsonArray = json.getJSONObject("data").getJSONArray("items");

        // Create a list to store are videos in
        List<Video> videos = new ArrayList<Video>();

        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            // The title of the video
            String title = jsonObject.getString("title");

            String url;
            try {
    url = jsonObject.getJSONObject("player").getString("default");
    } catch (JSONException ignore) {
    url = jsonObject.getJSONObject("player").getString("default");
            }

            String thumbUrl = jsonObject.getJSONObject("thumbnail").getString("sqDefault");

            videos.add(new Video(title, url, thumbUrl));
        }

        Library lib = new Library(username, videos);

        Bundle data = new Bundle();
        data.putSerializable(LIBRARY, lib);

        Message msg = Message.obtain();
        msg.setData(data);
        replyTo.sendMessage(msg);

    } catch (ClientProtocolException e) {
        Log.e("Feck", e);
    } catch (IOException e) {
        Log.e("Feck", e);
    } catch (JSONException e) {
        Log.e("Feck", e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:52:18.883

```
 String JKYouTubeActivity.YOUTUBE_INFO_URL=http://gdata.youtube.com/feeds/api/playlists/_ID_?v=2&alt=json

 private String getUrl(String id) throws IOException, JSONException {
        HttpClient client = new DefaultHttpClient();
        HttpGet clientGetMethod = new HttpGet(JKYouTubeActivity.YOUTUBE_INFO_URL.replace("_ID_", id));
        HttpResponse clientResponse = null;
        clientResponse = client.execute(clientGetMethod);
        String infoString = _convertStreamToString(clientResponse.getEntity().getContent());
        String urldata=new JSONObject(infoString).getJSONObject("entry").getJSONObject("media$group").getJSONArray("media$content").getJSONObject(0).getString("url");
        return new JSONObject(infoString).getJSONObject("entry").getJSONObject("media$group").getJSONArray("media$content").getJSONObject(0).getString("url");
    }

    private String _convertStreamToString(InputStream iS) {
        BufferedReader reader = new BufferedReader(new InputStreamReader(iS));
        StringBuilder sB = new StringBuilder();
        String line = null;
        try {
            while ((line = reader.readLine()) != null)
            {
                sB.append(line).append("\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                iS.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        return sB.toString();
    }

} 
```

获取 urldata 后，您可以对其进行流式传输或做任何您想做的事情。同样，您也可以获得缩略图和标题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-17T10:05:07.127

您可以使用 recyclerView 作为列表。我已经使用 Youtube api 休息调用完成了这项工作。您需要从谷歌开发者控制台获取浏览器密钥。我在这里的回答中解释了这一点：

[https://stackoverflow.com/a/41201084/3689744](https://stackoverflow.com/a/41201084/3689744)

Youtube 休息调用的“新方式”将如下所示（我相信最大结果是 50）：

[https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=iBi9LVIrC-fVelw2-I2r-yrEk6SpXfO8&key=AIzaSyCI1oCTXwZzgVv7LDQ8NykSIUEWt247KnU&maxResults=50](https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=iBi9LVIrC-fVelw2-I2r-yrEk6SpXfO8&key=AIzaSyCI1oCTXwZzgVv7LDQ8NykSIUEWt247KnU&maxResults=50)

# spring - 使用 Spring 集成的事务性 IMAP 邮箱访问

> ID：14099820
> 
> 赞同：0
> 
> 时间：2012-12-31T09:29:41.857
> 
> 标签：spring, transactions, imap, jakarta-mail, spring-integration

我有一个非常相似的要求，就像[这里](https://stackoverflow.com/questions/10935032/transactional-pop3-mailbox-access-with-spring-integration)提到的一样，但是我使用 Imap 如下我的 spring-integration 版本是 1.0.4：

```
<mail:inbound-channel-adapter id="imapAdapter"
                                      store-uri="imaps://user:pass@domain:993/inbox"                                    
                                      channel="recieveEmailChannel"
                                      auto-startup="true"                                      
                                      java-mail-properties="javaMailProperties">
        <int:poller> 
        <int:interval-trigger initial-delay="1000" interval="2000"
        fixed-rate="true"/>
        <int:transactional transaction-manager="transactionManager" propagation="REQUIRED"/>
        </int:poller>
    </mail:inbound-channel-adapter>   
<int:channel id="recieveEmailChannel" />        
<int:service-activator input-channel="recieveEmailChannel" ref="emailReceiverService" method="receive"/>
<bean id="emailReceiverService" class="com.mydomain.email.in.DefaultEmailReceiverUtilService">
</bean> 
```

**问题** Imap 在 Spring-integration 1.0.4 中是否支持事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:07:08.883

相同的答案 - 邮件服务器不支持事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T15:12:06.807

如文档中所述，事务轮询器不会使固有的非事务性资源具有事务性。如果使用上游资源（例如使用 JDBC），则事务以轮询启动，并在线程完成工作时提交。

从 2.2.0 开始，邮件轮询器上的事务元素允许您将某些操作与此类事务同步。例如，这允许您在事务提交时删除电子邮件，但在事务回滚时将其保留在邮箱中。

同样，这不会使邮件具有事务性。

# html - 使用 SpringMvc 上传文件为什么要使用 Jsp

> ID：14099823
> 
> 赞同：0
> 
> 时间：2012-12-31T09:29:57.117
> 
> 标签：html, file, jsp, spring-mvc

我可以在春天不使用jsp而只使用html页面来上传文件吗？即有没有其他方法可以使用

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%> 
```

用于将命令名称绑定到表单，即不使用此

另请解释将命令名称与表单绑定的需要是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T12:45:57.600

你的意思是静态html页面与Spring相结合？... 就像用 Excalibur 剑在面包上涂黄油一样，**确实有可能**，但圆桌会议的成员会问你想做什么。

基本问题是：Spring 喜欢知道实际绑定到 Spring 的组件是什么。我不确定spring是否尊重普通的html-upload-form-tags。

（作为圆桌会议的成员，我必须问你想做什么）

# java - 从一个 servlet 发布到另一个 servlet 时无法保持会话

> ID：14099825
> 
> 赞同：0
> 
> 时间：2012-12-31T09:30:10.250
> 
> 标签：java, session, servlets, sessionid

我正在尝试归档以下内容：

1) 最终用户将发布到一个 servlet（我们称之为 GW）——GW 将存储他的会话以供以下请求到来。

2）对于GW收到的每个请求，GW将发布到另一个servlet（将其称为API）

3）只有GW可以发布到API（SSL安全），并且两者都有一个固定的IP（虽然它与这个问题无关）

4) 对于发布到 API 的每个请求，API 还必须为将来的请求维护一个会话。

5) GW 正在使用以下实现发布到 API：

```
try {
    HttpPost httppost = new HttpPost(uri);
    CookieStore cookieStore = new BasicCookieStore();
    HttpContext httpContext = new BasicHttpContext();
    httpContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

    HttpResponse response = httpclient.execute(httppost, httpContext);

} finally {
    httpclient.getConnectionManager().shutdown();
} 
```

6) API 会收到如下请求：

```
public void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    HttpSession session = req.getSession(false);
    // isSessionValidFromURL = req.isRequestedSessionIdFromURL();
    // isSessionValidFromCookie = req.isRequestedSessionIdFromCookie();
    isSessionValid = req.isRequestedSessionIdValid();
    if (isSessionValid) {
        ...
        ...
    }
...
} 
```

7) 在 API 中，如果请求是新请求，它将创建一个新会话，将参数存储在 DB 中并构建全局变量等等。

问题是：在发送登录（GW向API发送登录）命令后，API创建新会话到目前为止一切顺利。在第二个命令中，它无法通过以下代码行验证会话：

```
isSessionValid = req.isRequestedSessionIdValid();
isSessionValidFromURL = req.isRequestedSessionIdFromURL();
isSessionValidFromCookie = req.isRequestedSessionIdFromCookie(); 
```

全部返回假。我尝试使用如上所示的 cookie 机制发送会话 id，并尝试[从 url](http://www.javaprogrammingforums.com/whats-wrong-my-code/9405-passing-session-id-over-httpurlconnection.html)发送接收到的会话 id，但没有成功。

另外，我试过[这个](https://stackoverflow.com/questions/6272575/how-to-handle-the-session-in-httpclient-4-1)和[这个](https://stackoverflow.com/questions/4166129/apache-httpclient-4-0-3-how-do-i-set-cookie-with-sessionid-for-post-request)没有成功。谢谢

**编辑：解决方案**：[这个精彩的帖子](https://stackoverflow.com/questions/436752/supporting-sessions-without-cookies-in-tomcat)通过 url 传递它（它的 SSL，所以它不会是安全漏洞）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T13:41:14.897

此问题的一种解决方案是：

```
...
...
httpclient.setHttpRequestRetryHandler(myRetryHandler);

uri = AppInit.fieldProxyURI + ";jsessionid=" + sessionInfo.getAttribute(GatewayConstants.PROXYSESSIONID);
HttpPost httppost = new HttpPost(uri);
nvps =(List<NameValuePair>) sessionInfo.getAttribute(GatewayConstants.PROXY_QUERY_PARAMS);
httppost.setEntity(new UrlEncodedFormEntity(nvps, Consts.UTF_8));
ProxyPoster thread = new ProxyPoster(httpclient,httppost,sessionInfo,localContext);
thread.start();
thread.join();

} finally {
// leave the connection resource open
}

static class ProxyPoster extends Thread {
    //fields here..

    // constructor here...

@Override
public void run() {
    try {
        HttpResponse response = httpClient.execute(httppost, context);
        // proccess response
    } catch (Exception e) {
        httppost.abort();
    }
} 
```

通过这种方式保持会话，保持 httpclient 连接打开并通过 URL 发布接收到的会话 ID。希望这对其他人有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T14:41:19.497

最好使用 HTTP 转发，因为它是服务器转发，因此请求数据将被转发到下一个操作。

在重定向时，它会使服务器跳闸并且请求数据将丢失。

# mysql - 我如何修复 weekofyear('20121231') 返回 1？

> ID：14099828
> 
> 赞同：1
> 
> 时间：2012-12-31T09:30:30.913
> 
> 标签：mysql

`weekofyear('20121231')`返回 1 而`weekofyear('20121230')`返回 52

```
Mysql Ver 5,1,47 Cummunity Nt / Windows 7 32 Bit / ODBC 5.1.10 /
First day of Week : Sunday 
```

它应该返回 53 但它返回 1, `week('20121231',1)`,`week('20121230')`在这两种情况下都返回 53

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T09:35:57.183

[`week`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)需要很多参数，[`weekofyear`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_weekofyear)只是其中一种形式，它与`week([date], 3)`.

阅读[手册](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_week)以查看不同的替代方案。

[SQLFiddle](http://sqlfiddle.com/#!2/d41d8/5411)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:37:12.477

根据[文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_weekofyear)，`weekofyear('20121231')`不*等同*于`week('20121231',1)`：

> `WEEKOFYEAR()`是一个与 等价的兼容函数 `WEEK(date,3)`。

测试它：

```
mysql> SELECT weekofyear('20121231'), week('20121231',1), week('20121231',3);
+------------------------+--------------------+--------------------+
| weekofyear('20121231') | week('20121231',1) | week('20121231',3) |
+------------------------+--------------------+--------------------+
|                      1 |                 53 |                  1 |
+------------------------+--------------------+--------------------+ 
```

# ruby-on-rails - 我应该在哪里需要来自另一个引擎的文件？

> ID：14099830
> 
> 赞同：1
> 
> 时间：2012-12-31T09:30:39.803
> 
> 标签：ruby-on-rails, require, rails-engines

我正在写一个 Rails gem。我应该在哪里`require`从其他引擎归档？在我的引擎的主文件中还是在使用其他 gem 功能的每个文件中？

例如，我`devise`只在`User`模型（和配置文件）中使用。`app/models/user.rb`我应该只在文件中要求它吗？那么`haml`用于渲染每个页面的 gem 呢？

我看到`locomotive`和`forem`引擎。首先`require`是其引擎文件中的所有其他 gem。第二个`require 'kaminari'`在引擎文件和`require 'cancan'`模型中。

什么是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-01T21:04:02.820

恕我直言，如果您的 gem 有依赖项，那么它应该在 gem 的主文件中需要它们。加载gem时会读取所有文件，并且一旦执行了require，就不会再次执行。在 gem 的主文件中要求依赖项将所有要求放在一个中心位置，使维护更容易。

# r - 使用傅里叶变换减少小波动的影响并识别时间序列数据中的主要趋势 IN R

> ID：14099831
> 
> 赞同：1
> 
> 时间：2012-12-31T09:30:41.533
> 
> 标签：r, series

我有时间序列数据，我想执行傅立叶变换以确定所需时间序列的模式。对于每个时间间隔都有小波动，我想使用傅里叶变换来减少小波动的影响并确定该时间间隔的主要趋势。

数据样本：

```
 Date_And_Time ; Temperature
"2007-09-21 10:35:39";"7.480"
"2007-09-21 10:37:39";"7.500"
"2007-09-21 10:39:39";"7.510"
"2007-09-21 10:41:39";"7.520"
"2007-09-21 10:43:39";"7.440"
"2007-09-21 10:45:39";"7.470"
"2007-09-21 10:47:39";"7.560"
"2007-09-21 10:49:39";"7.740"
"2007-09-21 10:51:39";"7.570"
"2007-09-21 10:53:39";"7.730"
"2007-09-21 10:55:39";"7.740"
"2007-09-21 10:57:39";"7.930"
"2007-09-21 10:59:39";"7.870"
"2007-09-21 11:01:39";"7.870"
"2007-09-21 11:03:39";"7.680"
"2007-09-21 11:05:39";"8.160"
"2007-09-21 11:07:39";"8.260"
"2007-09-21 11:09:39";"8.020"
"2007-09-21 11:11:39";"7.900"
"2007-09-21 11:13:39";"7.940"
"2007-09-21 11:15:39";"7.910"
"2007-09-21 11:17:39";"8.040"
"2007-09-21 11:19:39";"8.120"
"2007-09-21 11:21:39";"8.090"
"2007-09-21 11:23:39";"8.140"
"2007-09-21 11:25:39";"8.230"
"2007-09-21 11:27:39";"8.200"
"2007-09-21 11:29:39";"8.380"
"2007-09-21 11:31:39";"8.240"
"2007-09-21 11:33:39";"8.250"
"2007-09-21 11:35:39";"8.340"
"2007-09-21 11:37:39";"8.350"
"2007-09-21 11:39:39";"8.350"
"2007-09-21 11:41:39";"8.350"
"2007-09-21 11:43:39";"8.360"
"2007-09-21 11:45:39";"8.490"
"2007-09-21 11:47:39";"8.560"
"2007-09-21 11:49:39";"8.370"
"2007-09-21 11:51:39";"8.080"
"2007-09-21 11:53:39";"8.150"
"2007-09-21 11:55:39";"8.360"
"2007-09-21 11:57:39";"8.410"
"2007-09-21 11:59:39";"8.590"
"2007-09-21 12:01:39";"8.480"
"2007-09-21 12:03:39";"8.440"
"2007-09-21 12:05:39";"8.420"
"2007-09-21 12:07:39";"8.370"
"2007-09-21 12:09:39";"8.420"
"2007-09-21 12:11:39";"8.420"
"2007-09-21 12:13:39";"8.640"
"2007-09-21 12:15:39";"8.710"
"2007-09-21 12:17:39";"8.880"
"2007-09-21 12:19:39";"8.840"
"2007-09-21 12:21:39";"8.840"
"2007-09-21 12:23:39";"9.420"
"2007-09-21 12:25:39";"8.850"
"2007-09-21 12:27:39";"8.740" 
```

对于每个任意时间间隔（例如 FROM "2007-09-21 11:15:39" TO "2007-09-21 12:19:39" ）我想提取温度的趋势。

预期结果如下图所示：

![在此处输入图像描述](../Images/c1463dab0d9a45f0ad5e567a5c923732.png)

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:30:22.747

```
library(MASS)
tem = read.table("temperature.csv",header=TRUE,sep=";",as.is=TRUE)
tem$dt =as.POSIXct(tem$Date_And_Time)
plot(tem$dt,tem$Temperature,type="l")

#Overall trend; use dt
coef(rlm(Temperature~dt,data=tem))

#Trend in first range
coef(rlm(Temperature~dt,data=tem, subset=Date_And_Time < "2007-09-21 10:57:39")) 
```

# string - 如何比较两个字符串汇编

> ID：14099832
> 
> 赞同：1
> 
> 时间：2012-12-31T09:30:52.500
> 
> 标签：string, assembly, x86

谁能告诉我如何用汇编语言比较两个字符串，我已经写了followign，但它似乎不起作用。

```
assume cs:code, ds:data

data segment
sirlung db "abcdjjj"
lungimelung equ $-sirlung
sirscurt db "aby"
lungimescurt equ $-sirscurt
exista db "Exista!$"
nuexista db "NU exista!$"
iesire db "Apasa enter pentru iesire!$"

data ends

code segment
start:
mov ax,data
mov ds,ax

mov bx,offset sirlung
mov di,offset sirscurt
dec bx
push bx
push di
mov dx,lungimelung
mov si,lungimescurt
bucla1:
    pop di
    pop bx
    inc bx
    mov al,sirlung[bx]
    mov cl,sirscurt[di]

    cmp al,cl
    jne bucla1
    push bx
    push di
    je bucla2
    cmp bx,dx
    ja sfarsit_nu_exista
bucla2:
    inc bx
    inc di
    mov al,sirlung[bx]
    mov cl,sirscurt[di]
    cmp al,cl
    jne bucla1      
    cmp di,si
    jl sfarsit_exista
    jae bucla2

sfarsit_exista:
mov dx,offset exista
mov ah,09h
int 21h
mov ah, 0ah
mov dx,offset iesire
int 21h
mov ax,4c00h
int 21h

sfarsit_nu_exista:
mov dx,offset nuexista
mov ah,09h
int 21h
mov ah, 0ah
mov dx,offset iesire
int 21h
mov ax,4c00h
int 21h

code ends
end start 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-31T10:38:44.313

几年前，我在学校写 asm 时遇到了同样的问题。我遇到的问题是我想将“退出”这个词与用户条目进行比较。如果他们键入“exit”，则应用程序退出。如果他们输入了其他任何内容，则会出现一条消息，告诉他们输入有误。

我解决问题的方法是逐个字符比较字符串，直到字符不再匹配，反之亦然。

这也可能有一些用处。以下是一些与汇编语言中的字符串比较相关的代码示例：[http ://www.daniweb.com/software-development/assembly/threads/58667/assembly-language-comparing-strings](http://www.daniweb.com/software-development/assembly/threads/58667/assembly-language-comparing-strings)

您可能还想查看与汇编语言中的正则表达式 (regex) 相关的这篇文章：[Regular Expressions and Assembly](https://stackoverflow.com/questions/2172335/regular-expressions-and-assembly)

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2019-02-13T10:01:46.173

j is jump l is less e is equel if bl=a & bh=k here cmp is work like ak

如果此处为 0 或小于等于 0，则 jle 工作。然后 n 将起作用。如果正值 jle 不起作用。

cmp bl,bh jle n

mov ah,2 mov dl,bh int 21h

n: mov ah,2 mov dl,bl int 21h

# r - 使用多边形命令的透明度

> ID：14099833
> 
> 赞同：25
> 
> 时间：2012-12-31T09:31:11.750
> 
> 标签：r, polygon

我使用`polygon`R 中的命令在图中创建了一个区域。但是，未显示该区域中的值，而主要目的是监视这些值。有谁知道如何处理这个？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-31T09:57:40.710

您可以使用 函数`rgb()`指定具有 alpha 透明度的颜色。

例如 ：

```
xx <- c(1:50)
 yy <- rnorm(50)
 n <- 50
 hline <- 0
plot (yy ~ xx, type="n", axes=FALSE, ann=FALSE)
text(x=xx,y=min(yy)+max(yy),labels='a')
polygon(c(xx[1], xx, xx[n]), c(min(yy), yy, min(yy)),    
        col=rgb(1, 0, 0,0.5), border=NA) 
```

![在此处输入图像描述](../Images/3e8e7037414866d303af79891e919373.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-02-03T20:03:57.040

制作现有版本的更轻/更透明版本的另一种方便的可能性是使用`adjustcolor()`，例如

```
adjustcolor("red",alpha.f=0.5) 
```

# java - Maven 依赖项缺少工件

> ID：14099838
> 
> 赞同：15
> 
> 时间：2012-12-31T09:31:25.233
> 
> 标签：java, eclipse, maven

我目前正在使用 Maven 开发一个 Java 项目。在我的`pom.xml`我得到这个错误。

> `Missing artifact com.bea.xml:jsr173-ri:jar:1.0`

我已经添加了这个依赖

```
<dependency>
        <groupId>com.bea.xml</groupId>
        <artifactId>jsr173-ri</artifactId>
        <version>1.0</version>
</dependency> 
```

到我的`pom.xml`. 但错误仍然相同。

我是否缺少为`jsr173-ri`依赖项添加存储库？我也没有将存储库添加到我的`pom.xml`.

有人可以建议我`jsr173-ri`添加存储库代码`pom.xml`吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T09:42:28.943

`com.bea.xml`[在公共存储库](http://mvnrepository.com/artifact/com.bea.xml/jsr173-ri)中不可用（下载大小为零）。因此，您需要下载 JAR 文件并将其手动安装到本地存储库中。

一些有用的链接：[手动安装依赖](http://blog.lakmali.com/2011/12/manually-install-maven-dependency.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-15T18:25:24.847

步骤 1：在 C:\Users\{your name}\.m2\repository\{dep jar 文件夹}\{version-RELEASE}\{missing jar} 中添加缺少的 jar

Step2：在Eclipse中，右击pom.xml -> 进入Maven -> Add Dependency Step3：在Enter groupId, artifactId中查找jar name Step4：在Search Results中选择：然后点击OK。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-31T10:51:43.250

Are you sure this is causing the problem? Haven't you missed anything else?

Here is the complete configuration (pom.xml) which you might need:

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.bea.xml</groupId>
  <artifactId>jsr173-ri</artifactId>
  <version>1.0</version>
  <name>JSR 173 - Streaming API for XML - Reference Implementation</name>
  <description>JSR 173 - Streaming API for XML - Reference Implementation</description>
  <url>http://dev2dev.bea.com/xml/stax.html</url>
  <distributionManagement>
    <downloadUrl>http://ftpna2.bea.com/pub/downloads/jsr173.jar</downloadUrl>
  </distributionManagement>

  <licenses>
    <license>
      <name>BEA JSR 173 RI</name>
      <url>http://www.ibiblio.org/maven2/com/bea/xml/jsr173-ri/1.0/jsr173-ri-1.0-license.txt</url>
      <distribution>manual</distribution>
    </license>
  </licenses>

  <organization>
    <name>BEA</name>
    <url>http://www.bea.com</url>
  </organization>

  <dependencies>
    <dependency>
      <groupId>javax.xml</groupId>
      <artifactId>jsr173</artifactId>
      <version>1.0</version>
    </dependency>
  </dependencies>

</project> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-31T10:03:03.523

依赖是正确的......你不必改变它。你可以从 [http://mvnrepository.com/artifact/com.bea.xml/jsr173-ri/1.0](http://mvnrepository.com/artifact/com.bea.xml/jsr173-ri/1.0)下载 jar并将它放在你的本地回购。

# android - 在android应用程序中动态替换xml文件

> ID：14099840
> 
> 赞同：-3
> 
> 时间：2012-12-31T09:31:32.950
> 
> 标签：android

是否可以通过代码动态替换 values 文件夹中的 xml 文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:32:09.193

不，这是不可能的。根本没有 res 文件可以动态编辑。

有关它的更多信息，请在[此处参考此问题。](https://stackoverflow.com/q/2069671/603744)

正如 commonsware[在这里所建议的那样。](https://stackoverflow.com/a/2823785/603744)

# android - 带有 JSON 的图片库

> ID：14099841
> 
> 赞同：0
> 
> 时间：2012-12-31T09:31:46.087
> 
> 标签：android, json, parsing, gallery

我有以下 JSON 结构：

```
{
"data": {
"ImageSetting": [
  {
    "image_name": "Image 1",
    "image_small": "https:\/\/d2vx3xrdmu9.cloudfront.net\/d98b276a10f874a67e87edcbe0bfbd2414b62c625f7af6f4c5cc7819259709d3ab39.jpeg",
    "image_big": "https:\/\/d2vx3xrdmu9.cloudfront.net\/8d580953e8a48c90a8ea3219fd526aa5cb5ac4302161a7c0ba24af6f2be65a233346.jpeg"
  },
  {
    "image_name": "Image 2",
    "image_small": "https:\/\/d2vx3xrdmu9.cloudfront.net\/7ddc15916bd7a8733847c2e9e68202ba0764a969125ebaf862b7ea34d7bac7171e21.jpeg",
    "image_big": "https:\/\/d2vx3xrd14cmu9.cloudfront.net\/1799ed1b6eebf9eb8d1b92de04e8468bc3a7f6ab427863b1e859ds67f3fb4a786dd2.jpeg"
  },
  {
    "image_name": "Image3",
    "image_small": "https:\/\/d2vx3xrdmu9.cloudfront.net\/b93073d02ed5b0d58c99ddea739c72f6df303a47d4fb7e16829fe61f7c62547b6e3.jpeg",
    "image_big": "https:\/\/d2vx3xrdmu9.cloudfront.net\/d1e030713f6a0214223f770fe0e6bd9200a2d2ca8da94acde2419064164a1e83f49.jpeg"
  }
]
} 
```

所以基本上有了这个结构，我可以在我的应用程序中显示一些图像。现在我想获得不同的画廊，旁边有子画廊和图像。这可能是一种可能的结构：

**这是图像快照**

![文件结构](../Images/1ccd70a8066f0b03a2b1d0821884dc21.png)

我不知道如何在 JSON 中完成此操作（Array inside Array？），我不知道如何在 Android 中解析它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:43:32.310

好的，让我先从 JSON 本身开始。它最后缺少一个结束 } （也许你只是忘了复制它）并且你没有一个'array in array'，你有一个对象'data'和一个对象数组'ImageSetting'。

解析这个最简单的方法是使用 GSON，您可以通过添加一些注释直接将其转换为对象。

基本上你只需要 2 个简单的类：

```
public class data{

@SerializedName("ImageSetting")
public Collection<ImageSetting> imageSettings;

} 
```

和

```
public class ImageSetting{

@SerializedName("image_name")
public String image_name;

@SerializedName("image_small")
public String image_small;

@SerializedName("image_big")
public String image_big;

} 
```

接下来你要做的就是让 GSON 为你做映射：

```
Data data = gson.fromJson(jsonString, Data.class); 
```

您可以从以下网址获取 GSON lib/jar：[http ://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:43:48.363

我认为你应该在 Array 中使用 Array。同样在您的示例中：

```
{
"data": {
"ImageSetting": [
  {
    "image_name": "Image 1",
    "image_small": "https:\/\/d2vx3xrdmu9.cloudfront.net\/d98b276a10f874a67e87edcbe0bfbd2414b62c625f7af6f4c5cc7819259709d3ab39.jpeg",
    "image_big": "https:\/\/d2vx3xrdmu9.cloudfront.net\/8d580953e8a48c90a8ea3219fd526aa5cb5ac4302161a7c0ba24af6f2be65a233346.jpeg"
  },
  [{
    "image_name": "Image 2",
    "image_small": "https:\/\/d2vx3xrdmu9.cloudfront.net\/7ddc15916bd7a8733847c2e9e68202ba0764a969125ebaf862b7ea34d7bac7171e21.jpeg",
    "image_big": "https:\/\/d2vx3xrd14cmu9.cloudfront.net\/1799ed1b6eebf9eb8d1b92de04e8468bc3a7f6ab427863b1e859ds67f3fb4a786dd2.jpeg"
  },{
    "image_name": "Image3",
    "image_small": "https:\/\/d2vx3xrdmu9.cloudfront.net\/b93073d02ed5b0d58c99ddea739c72f6df303a47d4fb7e16829fe61f7c62547b6e3.jpeg",
    "image_big": "https:\/\/d2vx3xrdmu9.cloudfront.net\/d1e030713f6a0214223f770fe0e6bd9200a2d2ca8da94acde2419064164a1e83f49.jpeg"
  }]

]
} 
```

...对于每个子文件夹，依此类推，直到到达基本元素（图像）。在这种情况下，一旦您解析了整个 JSON，您将在数组中获得 Array。& 如果它是一个数组，您可以将其视为文件夹和子文件夹。如果是图像。您可以直接使用图像在表格中显示。

我希望你能理解。如果有任何疑问，请告诉我...

# php - 使用来自 gmail 的 imap_fetch 时编码的俄语

> ID：14099844
> 
> 赞同：2
> 
> 时间：2012-12-31T09:31:57.203
> 
> 标签：php, encoding, imap

我正在阅读粘贴到电子邮件正文中的日志文件，其中一些使用各种不同的语言，并且所有语言字符似乎都能正确显示，但俄语除外。

以下是俄罗斯人在日志文件中所说的示例：

> Ссылка на объект не указывает на экземпляр объекта。
> 
> ♀

从我读过的内容来看，我需要在 mb_encoding (UTF-8) 行中指定解码或编码，但我对如何在不影响非俄语代码的情况下实际构建它有点迷茫。但是当回显出来时，它会转换为：

> Ð¡ÑÑ‹Ð»Ðº¡° Ð½Ð° ¡¾Ð±ÑŠÐµÐºÑ‚ Ð½Ðµ ÑƒÐº¡°Ð·Ñ‹Ð²Ð°ÐµÑ‚ Ð½Ð° ÑÐºÐ·ÐµÐ¼Ð¿Ð»ÑÑ€ Ð¾Ð±ÑŠÐµÐºÑ‚Ð°。Ð²

这是我已经使用的代码，我是一个 php 初学者，其中一些不是我的代码，我已经编辑以适应但不是 100% 一切都在做什么：

```
$mailbox = "xxx@gmail.com";
$mailboxPassword = "xxx";

$mailbox = imap_open("{imap.gmail.com:993/imap/ssl}INBOX",
                     $mailbox, $mailboxPassword);

mb_internal_encoding("UTF-8");
$subject = mb_decode_mimeheader(str_replace('_', ' ', $subject));

$body = imap_fetchbody($mailbox, $val, 1);
$body = base64_decode($body);

echo $body; 
```

一旦我`echo`取出正文，它就会从俄语转换为该编码，我可以剖析类似代码的任何指针以了解如何解决这个问题？

请记住，从电子邮件中读取了多种语言，大部分只是一些片段，其余的是基本日志记录，但我担心的是，如果我设置了一个新的解码，它会弄乱其他语言字符

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:04:50.973

尽管电子邮件被广泛采用，但使用起来仍然很棘手。如果您的 IMAP 客户端的要求有限，那么您的工作将很容易。否则，对于真正的通用 GMail 客户端，没有灵丹妙药，您必须不了解电子邮件是如何工作的：SMTP、MIME，最后是 IMAP。

基本的 MIME 知识是绝对需要的，我不会粘贴整个 wikipedia 文章，但您应该真正[阅读](http://en.wikipedia.org/wiki/MIME)并了解它是如何工作的。IMAP 更容易理解。

通常，电子邮件包含单个*text/plain*正文，或包含*text/plain*和*text/html部分的**多部分/替代*正文。但是，你知道，有附件，所以你也可以找到一个*multipart/mixed*并且它真的可以包含任何东西，如果它是二进制内容，你应该区别对待它而不是文本。有两个标题（您可以在*全局*消息中或部分在多部分信封中找到）在某种程度上涉及字符集问题：*Content-Type*和*Content-Transfer-Encoding*。

 ***从您的代码中，我们必须假设您只对base64 编码的文本*部分感兴趣。*一旦你解码了它们，它们就是一个字节序列，表示发送者在*Content-Type*标头中指定的字符集中的文本，这里是非 ASCII，因此看起来像这样：

```
Content-Type: text/plain; charset=ISO-8859-1 
```

请注意，*字符集*可能是*utf8*或您能想到的任何其他字符集，您必须在程序中检查这一点。您的工作是在 HTML 页面的输出字符集中对这段输入进行转码。如果您的页面不使用 Unicode 编码（如 UTF-8），您可能甚至无法正确显示消息，并且“？” 将被打印而不是缺少字符。由于您要求您的应用程序在全球范围内使用（不仅仅是在俄罗斯），而且无论如何这是一种很好的做法，您应该在 HTML 响应中使用 UTF-8，因此当您想要回显消息正文时：

```
echo mb_convert_encoding(imap_base64($body), "UTF-8", $input_charset); 
```

在已处理部分的*Content-Type*`$input_charset`标头中找到的那个在哪里。对于主题行，您应该使用，它返回一个元组数组（二进制字符串、字符集），您必须以与上述相同的方式输出该数组。*[`imap_mime_header_decode()`](http://php.net/manual/en/function.imap-mime-header-decode.php)*

 ***TL;博士**

[如果我们假设它是CP-1252](http://en.wikipedia.org/wiki/Windows-1252)编码的（也许你没有复制一些不可打印的），那么 UTF-8 编码的输入文本中的字节可以很好地映射到输出。这意味着输入是 UTF-8，但浏览器认为页面是 Windows-1252。可能这是您的语言环境的默认浏览器行为，您可以通过在任何其他输入之前发送适当的标头来轻松纠正它：

```
header("Content-Type: text/html; charset=utf-8"); 
```

这应该足以解决*此*问题，但也可能导致字符串文字和数据库（如果有）中的非 ASCII 字符出现问题。如果您想要一个多语言应用程序，Unicode 是一种方式，但您必须将您的数据库和 PHP 文件从 CP-1252 转码为 UTF-8。****

# css - 如何覆盖谷歌图表上的 svg 属性

> ID：14099846
> 
> 赞同：0
> 
> 时间：2012-12-31T09:32:01.273
> 
> 标签：css, google-maps, extjs, svg, treemap

我已经实现了 Google [TreeMap](https://code.google.com/apis/ajax/playground/?type=visualization#tree_map)

由于我使用的是 ExtJS Layout 并且其中包含 TreeMap，因此我必须使用 iframe，否则它不会显示任何内容。

但是有一个问题，谷歌地图可视化定义了随机`svg`属性。

如何在我的 html 页面中覆盖这个随机属性并给它一个固定的宽度和高度值。注意：我为图表 div 和 iframe 定义了固定宽度，但没有任何效果，因为 svg 覆盖了该属性。

[http://i.stack.imgur.com/i6Pze.png](https://i.stack.imgur.com/i6Pze.png)

![在此处输入图像描述](../Images/58c31b0912ac3c27a7a544f8e90b2a4c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:57:24.703

调用 document.getElementsByTagNameNS("http://www.w3.org/2000/svg","svg") 以获取所有 svg 元素，然后遍历它们并根据需要设置高度和宽度属性。

```
var svgElements = document.getElementsByTagNameNS("http://www.w3.org/2000/svg","svg");
for (var i = 0; i < svgElements.length; i++) {
   var svgElement= svgElements.item(i);
   svgElement.setAttribute("width", "<whatever width you want>");
   svgElement.setAttribute("height", "<whatever height you want>");
} 
```

# jquery-ui-datepicker - jQuery Datepicker (Keith Wood) prevent closing when date is selected

> ID：14099857
> 
> 赞同：0
> 
> 时间：2012-12-31T09:32:56.063
> 
> 标签：jquery-ui-datepicker

How can I prevent the closing of the datepicker when I click on a date. Is there an option for that? I am using [Keith Wood's Datepicker](http://keith-wood.name/datepick.html) v4.0.6. I want to close it by clicking the "Close" link.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:50:46.570

I found a solution by hacking the code. I know it's not good to do it like this, but it works.

Comment the line:

```
this.hide(target); 
```

it's on row 1700 in the function selectDate.

Tested on Firefox 17, IE 10, Chrome 23.

# c# - 检查四个布尔变量是否具有相等的值，不明显？

> ID：14099863
> 
> 赞同：10
> 
> 时间：2012-12-31T09:33:33.730
> 
> 标签：c#, boolean

我有四个布尔变量，比如：

```
bool a=true;
bool b=false;
bool c=true;
bool d=false; 
```

然后我想检查这四个是否相等。然而;

```
Console.WriteLine(true == false == true == false);
true 
```

为什么会这样？我认为这是因为方程的计算顺序，从左到右：

```
((true == false) == true) == false
(false == true) == false
false == false
true 
```

那么检查所有 N>2 布尔变量是否相等的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T09:35:30.947

```
if(a==b && a==c && a==d) 
```

如果你有可变数量的布尔值，不仅是 4

```
var bools = new bool[] { a, b, c, d };
var areAllEqual = bools.Skip(1).All(b=>b==bools[0]); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T09:35:42.527

一个明显的方法是将它们配对并使用 .Equals() 而不是 ==

* * *

检查这个替代方案，它可能是你想要的 -[多个变量之间的平等比较](https://stackoverflow.com/questions/3254839/equality-comparison-between-multiple-variables)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T09:47:07.237

我想您可以将它们添加到数组中，然后使用 All 运算符

```
yourboolarray.All(x=>x == a) // compare with any a,b,c,d 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T11:01:20.430

您可以考虑为此使用按位方法

其中，布尔值的整数表示将等于 0 或 15（或取决于位数的任何值）

虽然可能需要一些代码重组

# delphi - 操作管理器在数据模块中时未捕获键盘快捷键？

> ID：14099865
> 
> 赞同：1
> 
> 时间：2012-12-31T09:33:44.243
> 
> 标签：delphi, keyboard-shortcuts, delphi-xe2, datamodule, tactionmanager

在 Delphi XE2 中，我的应用程序中有一个数据模块，该数据模块中有一个动作管理器。我已经为每个操作分配了键盘快捷键，但是当我尝试在应用程序中使用这些快捷键时，它并没有捕捉到它们。

我正在应用程序的初始化中创建数据模块（由于项目主文件中的 IDE 扭曲代码，它被移动到不同的单元）......

```
unit AppInit;

interface

uses
  Vcl.Forms,
  Vcl.Themes,
  Vcl.Styles,
  uMain,
  uDataModule
  ;

procedure RunApp;

implementation

procedure RunApp;
begin
  Application.Initialize;
  Application.MainFormOnTaskbar := True;
  Application.Title := 'My App';
  TStyleManager.TrySetStyle('Carbon');
  DM:= TDM.Create(nil);
  try
    Application.CreateForm(TfrmMain, frmMain);
    Application.Run;
  finally
    DM.Free;
  end;
end;

end. 
```

像这样创建数据模块的原因是应用程序的所有各种形式都能够使用其中的组件，特别是动作管理器。它必须在创建主窗体之前创建。

当操作管理器位于数据模块中时，如何使操作项的键盘快捷键起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-31T13:17:32.647

`TDataModule`不是 的后代`TCustomForm`，而是的后代`TComponent`。因此数据模块没有接收消息的窗口句柄，也没有处理`TCustomForm`.

```
function TCustomForm.IsShortCut(var Message: TWMKey): Boolean;

  function DispatchShortCut(const Owner: TComponent) : Boolean;
  .....
  ..... 
```

# android - getting server response with HttpResponse

> ID：14099868
> 
> 赞同：0
> 
> 时间：2012-12-31T09:33:56.657
> 
> 标签：android

i am making a file and database uploader in android and my upload Code is:

```
public int uploadFile(ArrayList<String> sourceFileUri, String info, String latitude, String longitude, String id) throws IOException {
        try {
            HttpClient httpClient = new DefaultHttpClient();
            HttpContext localContext = new BasicHttpContext();
            HttpPost httpPost = new HttpPost("http://10.0.2.2/deliverysystem/order/add");

            MultipartEntity entity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);

            entity.addPart("returnformat", new StringBody("json"));
            System.out.println(sourceFileUri.size());
            for(int i=0;i<sourceFileUri.size();i++){
                String sourceFile = sourceFileUri.get(i);
                entity.addPart("uploaded_file"+(i+1), new FileBody(new File(sourceFile)));
            }

            entity.addPart("fld_delivery_id", new StringBody(id));
            entity.addPart("fld_delivery_location", new StringBody(info));
            entity.addPart("fld_latitude", new StringBody(latitude));
            entity.addPart("fld_longitude", new StringBody(longitude));
            httpPost.setEntity(entity);
            HttpResponse response = httpClient.execute(httpPost, localContext);.... 
```

and when the code reaches last code `HttpResponse response = httpClient.execute(httpPost, localContext);` it throws an error `E/org.apache.http.conn.HttpHostConnectException(4740): Connection to http://10.0.2.2:8080 refused'` all the upload task is done but when executing the last code it doesnt return the response code but goes to exception part. i cant understand what is happening can anybody help me?

Here is complete log cat

```
 E/org.apache.http.conn.HttpHostConnectException(4318): Connection to http://localhost refused
E/org.apache.http.conn.HttpHostConnectException(4318): org.apache.http.conn.HttpHostConnectException: Connection to http://localhost refused
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:183)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
E/org.apache.http.conn.HttpHostConnectException(4318):  at com.example.android.photobyintent.ViewRecipients.uploadFile(ViewRecipients.java:325)
E/org.apache.http.conn.HttpHostConnectException(4318):  at com.example.android.photobyintent.ViewRecipients$1.run(ViewRecipients.java:238)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.lang.Thread.run(Thread.java:856)
E/org.apache.http.conn.HttpHostConnectException(4318): Caused by: java.net.ConnectException: failed to connect to /127.0.0.1 (port 80): connect failed: ECONNREFUSED (Connection refused)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.IoBridge.connect(IoBridge.java:114)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
E/org.apache.http.conn.HttpHostConnectException(4318):  at java.net.Socket.connect(Socket.java:842)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
E/org.apache.http.conn.HttpHostConnectException(4318):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
E/org.apache.http.conn.HttpHostConnectException(4318):  ... 8 more
E/org.apache.http.conn.HttpHostConnectException(4318): Caused by: libcore.io.ErrnoException: connect failed: ECONNREFUSED (Connection refused)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.Posix.connect(Native Method)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:85)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
E/org.apache.http.conn.HttpHostConnectException(4318):  at libcore.io.IoBridge.connect(IoBridge.java:112)
E/org.apache.http.conn.HttpHostConnectException(4318):  ... 13 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:08:18.213

您是否将其添加到清单文件中？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

或者网址应该是：

> “http://10.0.2.2/deliverysystem/order/add/”

我在网址末尾添加了一个“/”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-31T10:05:51.453

首先将此添加到您的清单文件中

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

然后试试这段代码，

根据您的要求进行一些更改，而不是上面的文件上传放在`Asynctask`不影响您的应用程序主线程的方法中

```
protected String doInBackground(String... args) {
    String ServerResponse = "";
    mDbHelper = new DbAdapter(ct);
    mDbHelper.open();
    ImageUploadEntity entity = new ImageUploadEntity();
    List<ImageUploadEntity> imagedatas = mDbHelper
            .fetchImageByModuleId(Submission_id);
    mDbHelper.close();

    Totalfilecount = imagedatas.size();

    if (Totalfilecount != 0) {

        for (int j = 0; j < imagedatas.size(); j++) {
            entity = imagedatas.get(j);
          String path = entity.getFilecontent();

        final HttpClient httpClient = new DefaultHttpClient();
        HttpPost postRequest = new HttpPost("http://10.0.2.2/deliverysystem/order/add");    
         HttpContext localContext = new BasicHttpContext();

            // Indicate that this information comes in parts (text and file)
            final MultipartEntity reqEntity = new MultipartEntity(
                    HttpMultipartMode.BROWSER_COMPATIBLE);

            final File file = new File(path);

            if (file.exists()) {
                String filename = Common
                        .MillisecondsToDateFORFileName(System
                                .currentTimeMillis());

    FileBody fileBody = new FileBody(file, "image/png");
    reqEntity.addPart("filecontent", fileBody);
    try {
                    // The rest of the data
     reqEntity.addPart("fld_delivery_id", new StringBody(id));
       reqEntity.addPart("fld_delivery_location", new StringBody(info));
        reqEntity.addPart("fld_latitude", new StringBody(latitude));
        reqEntity.addPart("fld_longitude", new StringBody(longitude));
        reqEntity.addPart("returnformat", new StringBody("json"));
         postRequest.setEntity(reqEntity);

         ServerResponse = httpClient.execute(postRequest,localContext)………

                } catch (Exception e) {
                    // TODO: handle exception

                }
            }

        }

    }
    return ServerResponse;

} 
```

# c# - 如何在我的 WPF 应用程序中保存图像

> ID：14099869
> 
> 赞同：0
> 
> 时间：2012-12-31T09:33:57.833
> 
> 标签：c#, wpf

在我的 WPF 应用程序中，我无法将图像保存在我的应用程序中的 snap 文件夹中。下面是我正在使用的代码。

```
OpenFileDialog ofd = new OpenFileDialog();
        ofd.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp"; 
        if (ofd.ShowDialog() == DialogResult.OK)
        {

            string filepath = ofd.FileName;
            File.Copy(ofd.FileName, Application.StartupPath + "\\snaps\\" + ofd.SafeFileName,true);
            photoTextBox.Text= ofd.SafeFileName;
            pictureBox1.Image = Image.FromFile(ofd.FileName);

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T11:27:10.760

打开文件浏览器的代码

```
 string filepath;
        //browse Button
        private void button4_Click(object sender, RoutedEventArgs e)
        {
            OpenFileDialog open = new OpenFileDialog();
            open.Multiselect = false;    
            open.Filter = "Image Files(*.jpg; *.jpeg; *.gif; *.bmp)|*.jpg; *.jpeg; *.gif; *.bmp";
            bool? result = open.ShowDialog();

            if (result == true)
            {
                filepath = open.FileName; // Stores Original Path in Textbox    
                ImageSource imgsource = new BitmapImage(new Uri(filepath)); // Just show The File In Image when we browse It
                Clientimg.Source = imgsource;  
            }
        } 
```

下面是用于保存文件的代码

```
private static String GetDestinationPath(string filename, string foldername)
        {
            String appStartPath = System.IO.Path.GetDirectoryName(Process.GetCurrentProcess().MainModule.FileName);

            appStartPath = String.Format(appStartPath + "\\{0}\\" + filename, foldername);
            return appStartPath;
        } 
```

如何使用它

```
string name = System.IO.Path.GetFileName(filepath);
string destinationPath = GetDestinationPath(name,"YourFolderName");

File.Copy(filepath, destinationPath, true); 
```

# php - 无法在 PHP 中使用 XSLT 输出 XML

> ID：14099870
> 
> 赞同：1
> 
> 时间：2012-12-31T09:34:09.873
> 
> 标签：php, xml, xslt, xslt-1.0

我正在尝试在 php 中使用 XML 和 XSLT 输出表单，但我无法以某种方式满足条件。这是我的 XML 的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="form.xsl"?>

<root>

    <formset>
            <field>
                <type>text</type>                
                <value>This is test value</value>
            </field>
            <field>
                <type>radio</type>                
                <value>Male</value>
            </field>
            <field>
                <type>checkbox</type>                
                <value>Hobby</value>
            </field>
            <field>
                <type>button</type>                
                <value>Click Me</value>
            </field>                                    
    </formset>

</root> 
```

这是我的 XSLT 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html"/>

    <xsl:template match="/">
        <html>
            <head>
                <title>Rendering of Form</title>
            </head>
            <body>
                <form action="" method="post">
                    <xsl:for-each select="/root/formset/field">

                        <xsl:choose>
                            <xsl:when test="type = text">
                                <input type="text" value="{value}" />
                            </xsl:when>
                            <xsl:when test="type = radio">
                                <input type="radio" value="{value}" /> <xsl:value-of select="value"/>
                            </xsl:when>
                            <xsl:when test="type = checkbox">
                                <input type="checkbox" value="{value}" /> <xsl:value-of select="value"/>
                            </xsl:when>
                            <xsl:when test="type = button">
                                <input type="button" value="{value}" />
                            </xsl:when>                
                            <xsl:otherwise>
                             <span>Unknown Type</span>
                            </xsl:otherwise>
                        </xsl:choose>             

                    </xsl:for-each>

                </form>

            </body>
        </html>
    </xsl:template>

</xsl:stylesheet> 
```

我的 PHP 代码就是这样简单的回显输出：

```
<?php

// LOAD XML FILE
$XML = new DOMDocument();

$XML->load('form.xml');

// START XSLT
$xslt = new XSLTProcessor();
$XSL = new DOMDocument();

$XSL->load('form.xsl');
$xslt->importStylesheet( $XSL );
echo $xslt->transformToXML( $XML );

?> 
```

但不知何故我的输出呈现`xsl:otherwise`条件谁能告诉我为什么？我是 XSLT 的新手

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:41:16.533

这实际上与 PHP 无关，而只是与您在 xsl:when 测试语句中遗漏了一些撇号的事实有关。您目前正在执行此操作

```
 <xsl:when test="type = text"> 
```

但这是将一个名为**type**的元素与一个名为**text**的元素进行比较，该元素实际上并不存在于您的 XML 中。你需要这样做

```
 <xsl:when test="type = 'text'"> 
```

即您需要与用撇号括起来的文字字符串进行比较。

如果您热衷于学习 XSLT，这里有一种无需**xsl:for-each**的**xsl:choose即可完成相同任务的方法**

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
   <xsl:output method="html"/>
   <xsl:template match="/">
      <html>
         <head>
            <title>Rendering of Form</title>
         </head>
         <body>
            <form action="" method="post">
               <xsl:apply-templates select="root/formset/field"/>
            </form>
         </body>
      </html>
   </xsl:template>

   <xsl:template match="field">
      <input type="{type}" value="{value}"/>
   </xsl:template>

   <xsl:template match="field[type != 'text'][type != 'radio'][type != 'checkbox'][type != 'button']">
      <xsl:text>Unknown Type</xsl:text>
   </xsl:template>
</xsl:stylesheet> 
```

以这种方式使用模板通常是首选，因为它有助于重用代码，并减少缩进以使其更具可读性。请注意，在匹配元素时，总是首先选择更具体的模板。

# python - Concatenating two range function results

> ID：14099872
> 
> 赞同：81
> 
> 时间：2012-12-31T09:34:12.213
> 
> 标签：python, python-3.x, range, concatenation

Does range function allows concatenation ? Like i want to make a `range(30)` & concatenate it with `range(2000, 5002)`. So my concatenated range will be `0, 1, 2, ... 29, 2000, 2001, ... 5001`

Code like this does not work on my latest python (ver: 3.3.0)

```
range(30) + range(2000, 5002) 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-12-31T09:36:22.427

您可以[`itertools.chain`](http://docs.python.org/3/library/itertools.html#itertools.chain)为此使用：

```
from itertools import chain
concatenated = chain(range(30), range(2000, 5002))
for i in concatenated:
     ... 
```

它适用于任意迭代。请注意，[`range()`](http://docs.python.org/3/library/functions.html#func-range)您应该了解 Python 2 和 3 之间的行为差​​异：在 Python 2 中[`range`](http://docs.python.org/2/library/functions.html#range)返回一个列表，而在 Python3 中返回一个迭代器，这是节省内存的，但并不总是可取的。

列表可以与 连接`+`，迭代器不能。

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-12-31T12:40:38.527

我喜欢可能的最简单的解决方案（包括效率）。解决方案是否如此并不总是很清楚。无论如何，`range()`Python 3 中的 是一个生成器。您可以将其包装到任何进行迭代的构造中。`list()`能够从任何可迭代对象构造列表值。列表的`+`运算符进行连接。我在示例中使用了较小的值：

```
>>> list(range(5))
[0, 1, 2, 3, 4]
>>> list(range(10, 20))
[10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
>>> list(range(5)) + list(range(10,20))
[0, 1, 2, 3, 4, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19] 
```

这`range(5) + range(10, 20)`正是 Python 2.5 中所做的——因为`range()`返回了一个列表。

在 Python 3 中，它仅在您真的想要构造列表时才有用。否则，我推荐使用[itertools.chain的](http://docs.python.org/3.3/library/itertools.html#itertools.chain)[Lev Levitsky 的](https://stackoverflow.com/a/14099894/1346705)解决方案。该文档还显示了非常简单的实现：

```
def chain(*iterables):
    # chain('ABC', 'DEF') --> A B C D E F
    for it in iterables:
        for element in it:
            yield element 
```

[Inbar Rose](https://stackoverflow.com/a/14100069/1346705)的解决方案很好，功能也相当。无论如何，我的 +1 是给 Lev Levitsky 和他关于使用标准库的论点。来自*Python 之禅*...

> 面对模棱两可，拒绝猜测的诱惑。

```
#!python3
import timeit
number = 10000

t = timeit.timeit('''\
for i in itertools.chain(range(30), range(2000, 5002)):
    pass
''',
'import itertools', number=number)
print('itertools:', t/number * 1000000, 'microsec/one execution')

t = timeit.timeit('''\
for x in (i for j in (range(30), range(2000, 5002)) for i in j):
    pass
''', number=number)
print('generator expression:', t/number * 1000000, 'microsec/one execution') 
```

在我看来，`itertools.chain`它更具可读性。但真正重要的是...

```
itertools: 264.4522138986938 microsec/one execution
generator expression: 785.3081048010291 microsec/one execution 
```

...速度快了大约 3 倍。

* * *

## 回答 #3

> 赞同：37
> 
> 时间：2012-12-31T09:52:18.210

可以使用[list-comprehension](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)来完成。

```
>>> [i for j in (range(10), range(15, 20)) for i in j]
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 15, 16, 17, 18, 19] 
```

适合您的要求，但答案很长，所以我不会在这里发布。

注意：可以制作成生成器以提高性能：

```
for x in (i for j in (range(30), range(2000, 5002)) for i in j):
    # code 
```

甚至是生成器变量。

```
gen = (i for j in (range(30), range(2000, 5002)) for i in j)
for x in gen:
    # code 
```

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2019-04-13T00:55:25.190

## 蟒蛇> = 3.5

您可以在列表中使用可迭代解包（参见 PEP 448：[附加解包概括](https://www.python.org/dev/peps/pep-0448/)）。

如果你需要一份清单，

```
[*range(2, 5), *range(3, 7)]
# [2, 3, 4, 3, 4, 5, 6] 
```

这会保留顺序并且不会删除重复项。或者，你可能想要一个元组，

```
(*range(2, 5), *range(3, 7))
# (2, 3, 4, 3, 4, 5, 6) 
```

...或一组，

```
# note that this drops duplicates
{*range(2, 5), *range(3, 7)}
# {2, 3, 4, 5, 6} 
```

它也恰好比 call 更快`itertools.chain`。

```
from itertools import chain

%timeit list(chain(range(10000), range(5000, 20000)))
%timeit [*range(10000), *range(5000, 20000)]

738 µs ± 10.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
665 µs ± 13.8 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each) 
```

但是，的好处`chain`是您可以传递任意范围的列表。

```
ranges = [range(2, 5), range(3, 7), ...]
flat = list(chain.from_iterable(ranges)) 
```

OTOH，解包概括尚未“概括”到任意序列，因此您仍然需要自己解包各个范围。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-12-31T12:55:52.553

借助 extend 方法，我们可以连接两个列表。

```
>>> a = list(range(1,10))
>>> a.extend(range(100,105))
>>> a  
[1, 2, 3, 4, 5, 6, 7, 8, 9, 100, 101, 102, 103, 104] 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-31T09:43:10.713

`range()`在 Python 2.x 中返回一个列表：

```
>>> range(10)
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

`xrange()`在 Python 2.x 中返回一个迭代器：

```
>>> xrange(10)
xrange(10) 
```

在 Python 3 中`range()`还返回一个迭代器：

```
>>> r = range(10)
>>> iterator = r.__iter__()
>>> iterator.__next__()
0
>>> iterator.__next__()
1
>>> iterator.__next__()
2 
```

因此很明显，您不能`chain()`像其他人指出的那样使用其他迭代器来连接其他迭代器。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-01-09T13:44:27.040

您可以使用范围函数周围的列表函数来制作一个像这样的列表

```
list(range(3,7))+list(range(2,9)) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-10-28T21:58:18.790

我来这个问题是因为我试图连接未知数量的范围，这些范围可能重叠，并且不希望最终迭代器中出现重复值。我的解决方案是这样使用`set`和[`union`](https://docs.python.org/3.5/library/stdtypes.html?highlight=set#set.union)操作员：

```
range1 = range(1,4)
range2 = range(2,6)
concatenated = set.union(set(range1), set(range2)
for i in concatenated:
    print(i) 
```

# c# - 如何从代码隐藏中在 devExpress gridview 中添加删除命令按钮？

> ID：14099874
> 
> 赞同：1
> 
> 时间：2012-12-31T09:34:21.340
> 
> 标签：c#, asp.net, devexpress

我正在使用里面有一个命令按钮的 DevExpress gridview。我想使用图像而不是它。怎么可能？

到目前为止，我已经尝试了这么多：

```
GridViewCommandColumn commancol = new GridViewCommandColumn(); 
commancol.ButtonType = ButtonType.Image; 
GridViewCommandColumnButton moveUpBtn; 
moveUpBtn.Image.Url = "~/App_Themes/Images/GridControl/grid-delete.png"; 
commancol.Add(moveUpBtn); 
```

但它给出了错误。

我想从 .cs 页面而不是 aspx 页面添加下面的方式按钮。所以我试图从代码隐藏中进行上述方式。

```
<dx:GridViewCommandColumn ButtonType="Image">
            <HeaderTemplate>
            </HeaderTemplate>
            <DeleteButton Visible="true" Text="" Image-Url="grid-delete.png"
                Image-ToolTip="Delete Record">
            </DeleteButton>
        </dx:GridViewCommandColumn> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:04:35.807

您可以像这样使用它，1）在 itemtemplate 中声明`imageButton` 2）声明`commandname`和`commandargument` 3）声明 getimagepath 4）在 cs 页面 getimage 函数声明为

```
 <asp:TemplateField HeaderText="Edit" ItemStyle-VerticalAlign="Top">
    <ItemTemplate>
   <asp:ImageButton ID="ibDelete" runat="server" CommandName="Delete" CommandArgument='<%# Bind("") %>'
                            ImageUrl='<%#GetImagePath("delete.png")%>' Width="20" Height="20" OnClick="ibDelete_Click"
                            OnClientClick='<%# Eval("", "return confirm(\"Are you sure to delete - {0} ?\");") %>'
                            ToolTip="Delete Item" />
    </ItemTemplate>

public string GetImagePath(string imgName)
        {
            string Finalurl =  this.TemplateSourceDirectory + "/images/" + imgName;
            return Finalurl;
        } 
```

5) 像这样声明 rowcommand

```
protected void row_command(object sender, gridviewrowcommand e)
{
     if(e.commandname=="Delete")
      {
           if(e.commandargument!=null)
            {
                  // do the work here
            }
       }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:11:36.187

我想从后面的代码中添加一个以下类型的删除命令按钮。而不是从 aspx 页面。

```
<dx:GridViewCommandColumn ButtonType="Image">
                <HeaderTemplate>
                </HeaderTemplate>
                <DeleteButton Visible="true" Text="" Image-Url="grid-delete.png"
                    Image-ToolTip="Delete Record">
                </DeleteButton>
            </dx:GridViewCommandColumn> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-31T10:25:25.697

您可以像下面这样简单地添加[CommandColumn](http://documentation.devexpress.com/#AspNet/CustomDocument3701)，但您应该注意 asp.net 页面事件以使其正确工作。

```
protected void Page_Init(object sender, EventArgs e)
{
    GridViewCommandColumn column = new GridViewCommandColumn("....");
    column.DeleteButton.Visible = true;
    column.DeleteButton.Image.Url = "set path here";
    column.Visible = true;
    column.VisibleIndex = 2;//place where you want it to display
    ASPxGridView1.Columns.Add(column); 
}
protected void Page_Load(object sender, EventArgs e)
{
   // Bind Data here
    BindData();
} 
```

[请参阅Command Columns](http://documentation.devexpress.com/#AspNet/CustomDocument3701)的文档，然后您还可以获得另一个命令按钮并在运行时根据需要设置它们的属性。

希望这有帮助..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T06:52:23.370

```
<dx:GridViewCommandColumn Name="deleteRow" ShowDeleteButton="True" VisibleIndex="3" ButtonType="Image">
                <CustomButtons>
                    <dx:GridViewCommandColumnCustomButton Visibility="AllDataRows" Image-Width="20" Image-Url="~/img/delete-icon.png"
                        Image-Height="20">
                        <Image Height="20px" Width="20px">
                        </Image>
                    </dx:GridViewCommandColumnCustomButton>
                </CustomButtons>
                <HeaderStyle HorizontalAlign="Center" VerticalAlign="Middle"></HeaderStyle>
            </dx:GridViewCommandColumn> 
```

# iphone - 我如何将 predicateWithFormat 用于两个不同的类

> ID：14099875
> 
> 赞同：1
> 
> 时间：2012-12-31T09:34:22.267
> 
> 标签：iphone, objective-c, ios, xcode

我需要对不同的班级进行搜索，歌曲是歌曲，另一个是专辑。蚀刻其中之一是用他的财产（名称，网址等）代表歌曲/专辑。现在我正在使用此代码通过搜索名称属性从我的歌曲数组中搜索歌曲，我还需要能够在专辑数组中搜索，也在名称属性中。

```
-(void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope {

    // Update the filtered array based on the search text and scope.
    // Remove all objects from the filtered search array
    [self.filteredSongArray removeAllObjects];

    // Filter the array using NSPredicate
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF._songName contains[cd] %@",searchText];

    filteredSongArray = [NSMutableArray arrayWithArray:[_myDataMgr.songArray filteredArrayUsingPredicate:predicate]];
} 
```

所以我的问题是如何告诉谓词也在 AlbumArray 中查找，谢谢大家。

**更新：** 我在 AlbumArray 上运行了另一个谓词，得到结果后，我添加了两个数组。谢谢你的重播很有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:42:00.603

您可以像这样过滤数组内容：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(songName CONTAINS[cd] %@)", searchText];
[self.filteredSongArray addObjectsFromArray [_myDataMgr.songArray filteredArrayUsingPredicate:predicate]]; 
```

无需在谓词中添加 SELF ....

希望这可以帮助...！！！

# android - HttpResponse 执行仅适用于 Android API 8 和 API 10

> ID：14099880
> 
> 赞同：0
> 
> 时间：2012-12-31T09:34:36.847
> 
> 标签：android, httprequest

我有一个 xml 解析器，它在模拟器中的 Android api 8 和 10 上运行良好（我的设备上有 api 10 并且运行良好）但尝试模拟更高的 api 并在 http 请求上给我错误。这是 Parser.class：

```
package com.muc.horoscop;

import java.io.IOException;
import java.io.StringReader;
import java.io.UnsupportedEncodingException;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.auth.BasicScheme;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

import android.util.Log;

public class XMLParser {

public XMLParser() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */

public String getXmlFromUrl(String url) {
    String xml = new String();

    try {
        // defaultHttpClient
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

//          httpPost.addHeader(BasicScheme.authenticate(
//          new UsernamePasswordCredentials("client_ro", "+_lklklkl*/544pF"),"UTF-8", false));  

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}

/**
 * Getting XML DOM element
 * @param XML string
 * */
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */
 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);        
        return this.getElementValue(n.item(0));
    }
} 
```

这是 LogCat

```
12-31 11:23:31.223: D/AndroidRuntime(442): Shutting down VM
12-31 11:23:31.223: W/dalvikvm(442): threadid=1: thread exiting with uncaught exception (group=0x40014760)
12-31 11:23:31.243: E/AndroidRuntime(442): FATAL EXCEPTION: main
12-31 11:23:31.243: E/AndroidRuntime(442): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.muc.horoscop/com.muc.horoscop.AfisareHoroscop}: android.os.NetworkOnMainThreadException
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1815)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1831)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.ActivityThread.access$500(ActivityThread.java:122)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.os.Looper.loop(Looper.java:132)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.ActivityThread.main(ActivityThread.java:4123)
12-31 11:23:31.243: E/AndroidRuntime(442):  at java.lang.reflect.Method.invokeNative(Native Method)
12-31 11:23:31.243: E/AndroidRuntime(442):  at java.lang.reflect.Method.invoke(Method.java:491)
12-31 11:23:31.243: E/AndroidRuntime(442):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
12-31 11:23:31.243: E/AndroidRuntime(442):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
12-31 11:23:31.243: E/AndroidRuntime(442):  at dalvik.system.NativeStart.main(Native Method)
12-31 11:23:31.243: E/AndroidRuntime(442): Caused by: android.os.NetworkOnMainThreadException
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
12-31 11:23:31.243: E/AndroidRuntime(442):  at java.net.InetAddress.lookupHostByName(InetAddress.java:477)
12-31 11:23:31.243: E/AndroidRuntime(442):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:277)
12-31 11:23:31.243: E/AndroidRuntime(442):  at java.net.InetAddress.getAllByName(InetAddress.java:249)
12-31 11:23:31.243: E/AndroidRuntime(442):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
12-31 11:23:31.243: E/AndroidRuntime(442):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
12-31 11:23:31.243: E/AndroidRuntime(442):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
12-31 11:23:31.243: E/AndroidRuntime(442):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
12-31 11:23:31.243: E/AndroidRuntime(442):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
12-31 11:23:31.243: E/AndroidRuntime(442):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
12-31 11:23:31.243: E/AndroidRuntime(442):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
12-31 11:23:31.243: E/AndroidRuntime(442):  at com.muc.horoscop.XMLParser.getXmlFromUrl(XMLParser.java:52)
12-31 11:23:31.243: E/AndroidRuntime(442):  at com.muc.horoscop.AfisareHoroscop.onCreate(AfisareHoroscop.java:111)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.Activity.performCreate(Activity.java:4397)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
12-31 11:23:31.243: E/AndroidRuntime(442):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1779)
12-31 11:23:31.243: E/AndroidRuntime(442):  ... 11 more 
```

以及创建列表的活动类：

```
public class AfisareHoroscop extends ListActivity {

    static final String KEY_ITEM = "item"; // parent node
    static final String KEY_ID = "id";
    static final String KEY_DATA = "data";
    static final String KEY_SCURT = "scurt";
    static final String KEY_DESC = "descriere";

    @Override
    public void onBackPressed() {
        finish();
    }

    public boolean isOnline() {
        ConnectivityManager cm =
            (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) {
            return true;
        }
        return false;
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);

        final String lala = getSharedPreferences("zodialui", MODE_PRIVATE).getString("zodia_consumator", "");
        final String url = "http://calina.mucomputers.eu/"+lala+".xml";
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_afisare_horoscop);
        //afisare titlu
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_title);
        final String tit_gen = getApplicationContext().getResources().getString(R.string.titlu_gen);
        final TextView myTitleText = (TextView) findViewById(R.id.titlu);
        String titlul = new String(tit_gen+" "+lala);
        SpannableString spanString = new SpannableString(titlul);
        spanString.setSpan(new StyleSpan(Typeface.BOLD), 0, spanString.length(), 0);
        myTitleText.setText(spanString);
        ImageView semn_titlu = (ImageView) findViewById(R.id.imageView2);
        if (lala.equals("Balanta")) {
            semn_titlu.setImageResource(R.drawable.balanta);
        }else if (lala.equals("Berbec")){
            semn_titlu.setImageResource(R.drawable.berbec);
        }else if (lala.equals("Capricorn")){
            semn_titlu.setImageResource(R.drawable.capricorn);
        }else if (lala.equals("Fecioara")){
            semn_titlu.setImageResource(R.drawable.fecioara);
        }else if (lala.equals("Gemeni")){
            semn_titlu.setImageResource(R.drawable.gemeni);
        }else if (lala.equals("Leu")){
            semn_titlu.setImageResource(R.drawable.leu);
        }else if (lala.equals("Pesti")){
            semn_titlu.setImageResource(R.drawable.pesti);
        }else if (lala.equals("Rac")){
            semn_titlu.setImageResource(R.drawable.rac);
        }else if (lala.equals("Sagetator")){
            semn_titlu.setImageResource(R.drawable.sagetator);
        }else if (lala.equals("Scorpion")){
            semn_titlu.setImageResource(R.drawable.scorpion);
        }else if (lala.equals("Taur")){
            semn_titlu.setImageResource(R.drawable.taur);
        }else if (lala.equals("Varsator")){
            semn_titlu.setImageResource(R.drawable.varsator);
        }
        //afisare titlu

        if (isOnline() == true) {

        ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(url); // getting XML
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);
        // looping through all item nodes <item>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            // adding each child node to HashMap key => value
            map.put(KEY_DATA, parser.getValue(e, KEY_DATA));
            map.put(KEY_SCURT, parser.getValue(e, KEY_SCURT));
            map.put(KEY_DESC, parser.getValue(e, KEY_DESC));

            // adding HashList to ArrayList
            menuItems.add(map);
        }

        // Adding menuItems to ListView
        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.list_item,
                new String[] { KEY_SCURT, KEY_DATA, KEY_DESC }, new int[] {
                        R.id.scurt, R.id.data, R.id.descriere });

        setListAdapter(adapter);
        Collections.reverse(menuItems);

        // selecting single ListView item
        ListView lv = getListView();

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem

                String scurt = ((TextView) view.findViewById(R.id.scurt)).getText().toString();
                String data = ((TextView) view.findViewById(R.id.data)).getText().toString();
                String descriere = ((TextView) view.findViewById(R.id.descriere)).getText().toString();

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra(KEY_SCURT, scurt);
                in.putExtra(KEY_DATA, data);

                in.putExtra(KEY_DESC, descriere);
                startActivity(in);

            }

        });
        } else {

            Button btn = new Button(this);
            View.OnClickListener myhandler = new View.OnClickListener() {
                public void onClick(View v) {
                    Intent i = new Intent(AfisareHoroscop.this, AfisareHoroscop.class);  //your class
                    startActivity(i);
                    finish();
                }
              };
              btn.setOnClickListener(myhandler);
            btn.setText("Refresh");
            RelativeLayout.LayoutParams paramsd = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT ,LayoutParams.WRAP_CONTENT);
            paramsd.addRule(RelativeLayout.CENTER_IN_PARENT);
            paramsd.height = 60;
            paramsd.width = 60;
            btn.setLayoutParams(paramsd);
            addContentView(btn,paramsd); 
            Context context = getApplicationContext();
            String no_con = getResources().getString(R.string.no_connection);
            CharSequence text = no_con;
            int duration = Toast.LENGTH_SHORT;

            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_afisare_horoscop, menu);
        return true;
    }
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.menu_settings:
            Intent menu_set = new Intent (this, MainActivity.class);
            finish();
            startActivity(menu_set);
        return true;
        case R.id.menu_despre:
        startActivity(new Intent(this, DespreActivity.class));
        return true;
        default:
        return super.onOptionsItemSelected(item);
        }
    }
} 
```

我花了 2 天的时间来了解发生了什么，这可能是因为我是初学者。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T09:36:55.863

这个问题有两个解决方案，但第一个是很好的解决方案。

1）不要在主 UI 线程中编写网络调用，为此使用异步任务。

2) 在 setContentView(R.layout.activity_main); 之后将以下代码写入 MainActivity 文件；但这不是正确的方法。

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

并将下面的 import 语句放入您的 java 文件中。

```
import android.os.StrictMode; 
```

有关更多信息，请参见下面的链接。

[引起：android.os.NetworkOnMainThreadException](https://stackoverflow.com/questions/13136539/caused-by-android-os-networkonmainthreadexception)

# php - How to use Caching Feature of PHP last.fm API

> ID：14099885
> 
> 赞同：1
> 
> 时间：2012-12-31T09:35:21.753
> 
> 标签：php, api, caching, last.fm

I'm using PHP [last.fm API](http://lastfm.felixbruns.de/php-last.fm-api/) to fetch artist image

I'd like to know how to cache the calls so that I don't need to make same call again and again. The API has facility to cache : `DiskCache`, `SqliteCache` but there is no documentation, could anyone please shed some light on it?

Below is my code :

```
<?php
require __DIR__ . "/src/lastfm.api.php";

// set api key
CallerFactory::getDefaultCaller()->setApiKey(LAST_FM_API_KEY);

// search for the Coldplay band
$artistName = "Coldplay";
$limit = 1;
$results = Artist::search($artistName, $limit);

echo "<ul>";
while ($artist = $results->current()) {
    echo "<li><div>";
    echo "Artist URL: " . $artist->getUrl() . "<br>";
    echo '<img src="' . $artist->getImage(4) . '">';
    echo "</div></li>";

    $artist = $results->next();
}
echo "</ul>";

?> 
```

# javascript - 如何避免html5画布中的文本重叠

> ID：14099906
> 
> 赞同：2
> 
> 时间：2012-12-31T09:37:56.937
> 
> 标签：javascript, html, html5-canvas

我正在从用户那里获取文本并在画布上显示。同样，如果用户在同一位置输入另一个文本，则该文本将重叠而不被替换。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:40:20.690

### 使用`clearRect`并清除！

```
context.clearRect(0, 0, canvas.width, canvas.height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:45:04.603

取决于您在画布上实际绘制场景的方式。

您可以做些什么来清除该文本：

*   如果您正在跟踪画布上绘制的元素（使用对象和数组），就像面向对象的画布框架所做的那样，请删除跟踪文本的对象。在场景（或部分）的下一次重绘期间，不会绘制文本。

*   或者，为了快速简便地执行此操作，请在与背景匹配的文本上绘制一个矩形。这类似于将涂改液涂在纸上的墨水上。

# sql - 将选择结果作为存储过程的参数传递

> ID：14099913
> 
> 赞同：28
> 
> 时间：2012-12-31T09:38:48.433
> 
> 标签：sql, sql-server, select, stored-procedures, parameters

我有一个带有以下参数的 T-SQL 存储过程

```
CREATE PROCEDURE [dbo].[SaveData]
-- Add the parameters for the stored procedure here
    @UserID varchar(50),
    @ServiceID varchar(50),
    @param1 varchar(50),
    @param2 varchar(50),
    @endDate datetime
AS BEGIN
    . 
    .
    -- my code -- 
```

我想知道是否可以传递`select`as 参数的结果：

```
 exec SaveDate (SELECT player.UserID,player.ServiceID, 'no','no',GETDATE()
           FROM player) 
```

我尝试过这样的事情，但它不起作用。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-30T07:23:23.120

1.一种方法是：
a) 声明变量
b) 使用单个 select 语句为它们赋值
c) 执行传递局部变量的过程
d) 使用 WHILE 或 CURSOR 在循环中执行以下操作，以便将其应用于所有TABLE1 中的行

```
DECLARE @param1 <DATATYPE>, @param2 <DATATYPE>, ...

SELECT TOP 1 @param1 = col1,    @param2 = col2, ...
FROM TABLE1
WHERE <where_clause>

EXEC SaveDate @param1, @param2, ... 
```

2.另一种方法是定义自己的表类型，填充它，并将其传递给过程。但是，这需要稍微更改您的存储过程（在参数列表中，您的自定义类型应该跟在后面`READONLY`）：

```
CREATE TYPE [dbo].[TYPENAME] AS TABLE(
    [ID] [int] NOT NULL,
    ...
)
GO

DECLARE @myTypeVar TYPENAME;

INSERT @myTypeVar
SELECT col1, col2, ...
FROM TABLE1

EXEC SaveData @myTypeVar 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-31T11:27:59.267

您在示例中编写的 SELECT 查询可能会带回多行（您的 SELECT 没有 WHERE 子句或 TOP(n)）。如果您的意图是让您的过程能够使用一组“表格”参数，则从 SQL Server 2008 开始，您可以使用表值参数。

这涉及创建一个用户定义的表表，并且几乎毫无疑问意味着调整存储过程中的逻辑。

希望这可以帮助 ：）

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/bb510489(SQL.100).aspx](http://msdn.microsoft.com/en-us/library/bb510489(SQL.100).aspx) 。

# c - 如何检查输入的ID是否与C唯一

> ID：14099915
> 
> 赞同：-5
> 
> 时间：2012-12-31T09:38:51.353
> 
> 标签：c

我正在尝试使用 C 开发客户订单系统。当用户选择添加客户的选项时，系统会要求用户输入客户 ID。我需要一个函数来检查输入的 ID 是否已存在于客户文件中。请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:40:32.230

阅读文件并在循环中继续将每个客户 ID 与您输入的 ID 进行比较。

如果它存在......打破循环，出来并显示你想要的任何错误/消息。

如果它不存在，默默地接受它并继续下一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T10:09:29.743

您可以使用平衡二叉树并检查之前是否插入了节点，在 linux 下您可以使用`<search.h>`(man tsearch)，还有一个名为 libavl 的跨平台库，它位于单个 .h 中：[http:// adtinfo.org/](http://adtinfo.org/)

# api - Magento product.create 网站参数

> ID：14099916
> 
> 赞同：0
> 
> 时间：2012-12-31T09:38:56.153
> 
> 标签：api, magento, soap

我对 magento api 中的网站参数有疑问。

我在任何地方都找不到这个变量是什么的解释。此变量是否代表商店视图？一家商店？一个网站？

我可以在 api 的哪里检索可用选项的列表？

如果我无法从 API 检索列表，我可以在后端菜单的哪个位置找到可以使用的静态变量？我需要网站 ID 或 storeID 吗？

我用肥皂 v1

```
function call($which,$vars=null)
        {
        // retourneer de output soap client api call
        if($vars !== null)
            {
            return $this->soapclient->call($this->sessiontoken,$which,$vars);
            }
        else
            {
            return $this->soapclient->call($this->sessiontoken,$which);
            }
        }

    function createProduct($productname,
                            $websites,
                            $shortdescription,
                            $description,
                            $status,
                            $weight,
                            $tax_class_id,
                            $categories,
                            $price,
                            $attributesetid,
                            $producttype,
                            $sku)
        {
        $attributeSets = $this->call('product_attribute_set.list');
        $set = current($attributeSets);
        try
            {
            $x = $this->call('product.create', array($producttype, $set['set_id'], $sku, array(
            'name'              => $productname,
             // websites - Array of website ids to which you want to assign a new product
            'websites'          => $websites, // array(1,2,3,...)
            'short_description' => $shortdescription,
            'description'       => $description,
            'status'            => $status,
            'weight'            => $weight,
            'tax_class_id'      => $tax_class_id,
            'categories'    => $categories,    //3 is the category id(array(3))
            'price'             => $price
        );));
            }
        catch(Exception $e)
            {
            $x = 0xABED + 0xCAFE + 0xBAD + 0xBED * 0xFACE;// abed went to a cafe... the alcohol went bad.... he stumbled into bed and fell face down...
            }
        return $x;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:53:13.273

看着`Mage_Catalog_Model_Product_Api::create()`：

```
public function create($type, $set, $sku, $productData, $store = null)
{
//[...]
$product = Mage::getModel('catalog/product');
        $product->setStoreId($this->_getStoreId($store))
            ->setAttributeSetId($set)
            ->setTypeId($type)
            ->setSku($sku);
//[...]
$this->_prepareDataForSave($product, $productData);//this does some processing 
```

现在，看`Mage_Catalog_Model_Product_Api::_prepareDataForSave()`：

```
 protected function _prepareDataForSave($product, $productData)
    {
        if (isset($productData['website_ids']) && is_array($productData['website_ids'])) {
            $product->setWebsiteIds($productData['website_ids']);
        }
 //.... 
```

我们看到**website_ids**（数字数组）是预期的

# ruby-on-rails - Rails + SendGrid 不允许未经身份验证的发件人

> ID：14099925
> 
> 赞同：2
> 
> 时间：2012-12-31T09:39:35.783
> 
> 标签：ruby-on-rails, email, sendgrid, env

我目前正在通过 sendgrid 发送电子邮件，目前正在向新用户发送电子邮件。...但奇怪的是，非常相似的电子邮件选项不起作用 - 包括收件人在内的完整电子邮件显示在日志中，但从未收到。

这是我所拥有的：

在初始化程序的 mail.rb 文件中：

```
ActionMailer::Base.smtp_settings = {
  :address        => 'smtp.sendgrid.net',
  :port           => '587',
  :authentication => :plain,
  :user_name      => configatron.sendgrid.username,
  :password       => configatron.sendgrid.password,
  :domain         => 'heroku.com'
}

ActionMailer::Base.delivery_method = :smtp 
```

用户名和密码在别处定义 - 它们被确认具有正确的值

当新用户注册时，我调用我的 UserMailer 类并执行以下操作：

```
def welcome_email(user)
    @email = user.email
    @name = user.full_name

    mail(to: @email, subject: "Welcome!")
end 
```

工人只需执行以下操作即可调用它：

```
UserMailer.welcome_email(user).deliver 
```

这很有效；我收到了电子邮件，就是这样。

但是当我尝试用不同的方法发送一封电子邮件时，事情就神奇地崩溃了。

在 SAME UserMailer 类中：

```
def request(org, recipient, item)
  @org = org
  @recipient = recipient
  @item = item

  mail(to: @org.email, subject: "A new request has been posted!")
end 
```

使用 SAME 函数（虽然这次是在工作人员之外，所以我可以轻松调试）：

```
UserMailer.request(org, recipient, item).deliver 
```

电子邮件完美地出现在终端中：

```
Sent mail to mypersonalemail@test.com (4717ms)
Date: Mon, 31 Dec 2012 01:03:35 -0800
From: mysendingemail@test.com
To: mypersonalemail@test.com
Message-ID: <[longhexstring]@localhost.localdomain.mail>
Subject: A new request has been posted!
Mime-Version: 1.0
Content-Type: multipart/alternative;
boundary="--==_mimepart_50e154e769903_3c41bba7ec576d5";
charset=UTF-8
Content-Transfer-Encoding: 7bit

----==_mimepart_50e154e769903_3c41bba7ec576d5
Date: Mon, 31 Dec 2012 01:03:35 -0800
Mime-Version: 1.0
Content-Type: text/plain;
charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <[longhex]@localhost.localdomain.mail>

Hello world!

----==_mimepart_50e154e769903_3c41bba7ec576d5
Date: Mon, 31 Dec 2012 01:03:35 -0800
Mime-Version: 1.0
Content-Type: text/html;
charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <[longhex]@localhost.localdomain.
<!DOCTYPE html>
<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
</head>
  <body>
    <p>
Hello world!
    </p>
  </body>
</html> 
```

但是，我查看了我的个人电子邮件、垃圾邮件、垃圾箱的收件箱，但什么也没收到。甚至 sendgrid 也没有我请求发送请求电子邮件的日志！但是欢迎电子邮件工作得很好，甚至可以通过 sendgrid 记录下来。我看不出是什么可能导致一组电子邮件发送而另一组电子邮件发送，这真的令人困惑。没有明显的语法错误出现在我身上，我使用的值是正确的数据类型而不是 nil。

对于这个奇怪问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:58:25.060

解决方案最终变得非常简单，所以对于那些找到这个线程并需要帮助的人，我至少会发布我所做的。

在 development.rb 中，我执行了以下操作以查看引发的错误：

```
config.action_mailer.raise_delivery_errors = true 
```

并收到此消息：

```
Net::SMTPFatalError - 550 Cannot receive from specified address <mypersonalemail@test.com>: Unauthenticated senders not allowed 
```

考虑到我认为我已经使用我放入 .env 的信息进行了身份验证，这很奇怪输出我的 configatron.sendgrid.username 确实是 nil。仍在试图弄清楚为什么会这样，我仍然不确定欢迎电子邮件是如何发送的。

果然，将我的 smtp 设置更改为用于身份验证的硬编码值就像一种魅力。现在的问题变成了如何让 ENV 不出来为零......

最终的解决方案只是我在错误的本地主机上。我在端口 3000 处使用 rails 的默认 rails 服务器，但工头启动（不确定是否默认情况下，但在我的项目中）正在使用端口 5000。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-17T09:00:46.213

通过 rake 运行代码时我遇到了这个问题。问题是存储在我的 .env 中的 SENDGRID_USERNAME 和 SENDGRID_PASSWORD 环境变量没有通过 rake 自动加载。解决方案是通过工头运行 rake：

```
foreman run bundle exec rake namespace:task 
```

# sql - 如何从数据库表中的重复行中选择具有最新时间戳的行？

> ID：14099928
> 
> 赞同：7
> 
> 时间：2012-12-31T09:39:57.760
> 
> 标签：sql, oracle10g, greatest-n-per-group

我有一个包含重复行和三次行的表 - 如何选择重复但具有最新时间戳的行以及未重复行？

```
 -------------------------------------
| pk_id | user_id | some_timestamp    |
|-------------------------------------|
| 1     | 123     | 10-Jun-12 14.30   |
| 2     | 123     | 19-Jun-12 21.50   |
| 3     | 567     | 10-Jun-12 09.23   |
| 4     | 567     | 12-Jun-12 09.45   |
| 5     | 567     | 13-Jun-12 08.40   |
| 6     | 890     | 13-Jun-12 08.44   |
 ------------------------------------- 
```

所以我最终得到：

```
 -------------------------------------
| pk_id | user_id | some_timestamp    |
|-------------------------------------|
| 2     | 123     | 19-Jun-12 21.50   |
| 5     | 567     | 13-Jun-12 08.40   |
| 6     | 890     | 13-Jun-12 08.44   |
 ------------------------------------- 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-31T10:01:38.837

```
SELECT * FROM ( 
SELECT pk_id, 
       user_id, 
       some_timestamp, 
       ROW_NUMBER() OVER (PARTITION BY user_id ORDER BY some_timestamp DESC) col 
FROM table) x  
WHERE x.col = 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-31T09:44:43.400

试试这个

```
select * from table 
where some_timestamp 
   in (select max(some_timestamp)
       from table group by user_id) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-31T10:01:26.533

试试这个，我做了一个返回正确数据集的 SQLFIDDLE

```
SELECT * FROM YourTable AS T1
INNER JOIN
( SELECT user_id , MAX(some_timestamp) AS some_timestamp FROM YourTable 
GROUP BY user_id
) AS T2
ON T1.User_Id = T2.User_Id AND T1.some_timestamp = T2.some_timestamp
ORDER BY 1 
```

[http://sqlfiddle.com/#!6/f7bba/6](http://sqlfiddle.com/#!6/f7bba/6)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-31T09:56:40.043

```
select YourTable.*
from
  YourTable JOIN
  (select User_Id, Max(Some_Timestamp) as Mx
   from YourTable
   group by User_Id) Mx
  on YourTable.User_Id=Mx.User_Id
   and YourTable.Some_Timestamp=Mx.Mx 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-31T09:59:33.133

试试这个：

```
select * from my_table
where (user_id, some_timestamp) IN (select user_id, max(some_timestamp) from my_table group by user_id); 
```

# android - 光标 movetofirst() & 空指针异常

> ID：14099938
> 
> 赞同：2
> 
> 时间：2012-12-31T09:40:47.800
> 
> 标签：android, android-cursor

我正在使用 a`Cursor`来获取存储在我的`SQLite`数据库中的一些数据。当我`Cursor`有一些来自数据库的数据时，代码可以正常工作。但是当`Cursor`不包含任何数据时，我得到一个`NullPointerException`at`cursor.movetofirst()`方法。我在其他地方使用过类似的代码，但`movetofirst()`方法没有在`NullPointerException`其他地方给出。几天以来我一直在尝试这个，但我无法弄清楚问题所在。请帮忙。

```
 public class Country extends Activity {

        private DbAdapter mDb;
        private Cursor mCurSugCnt;
        String country=null;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.country);

            mDb=new DbAdapter(this);
            mDb.open();

            country= this.getIntent().getExtras().getString("country");
            fillSugCntData(country);

        }

    private void fillSugCntData(String cnt) {
        //I have tried multiple methods. The problem occurs when there is no data returned by any of the methods called
        //mCurSugCnt=mDb.fetchCatNotes("abc");
        mCurSugCnt=mDb.fetchCntNotes(cnt);

        //This is where I called the null pointer exception in case no data is returned by the cursor
        mCurSugCnt.moveToFirst();

    }

---------------------

public Cursor fetchCntNotes(String cnt){

        int id;
        Cursor appfinlist=null;
        Cursor temp=mDb.query(CNT_TABLE, new String[]{KEY_ROWID}, KEY_CNTNM + "=\"" + cnt + "\"", null, null , null, null);
        Cursor applist;

        if(temp.moveToFirst()){
            id=temp.getInt(temp.getColumnIndexOrThrow(DbAdapter.KEY_ROWID));

            applist=mDb.rawQuery("SELECT appcntid FROM appcntlist WHERE cntappid = "+id, null);
            if(applist.moveToFirst()){
                String[] cntin=new String[applist.getCount()];
                for(int i=0;i<applist.getCount();i++){
                    cntin[i]=""+applist.getInt(applist.getColumnIndexOrThrow(DbAdapter.KEY_APPCNTID));
                    Log.d("amit","countryname id cnt var: " + cntin[i]);
                    applist.moveToNext();   
                }

                String query = "SELECT * FROM applist"
                    + " WHERE _id IN (" + makePlaceholders(applist.getCount()) + ")";

                appfinlist = mDb.rawQuery(query, cntin);
                Log.d("amit","countryname id get count: " + appfinlist.getCount());
            }
        }    
            return appfinlist;
    }

    private String makePlaceholders(int count) {
        String toRet="?";

        for (int i=1;i<count;i++){
            toRet=toRet + ",?";
        }
        return toRet;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T09:42:35.443

使用前务必检查[getCount](http://developer.android.com/reference/android/database/Cursor.html#getCount%28%29)。

```
if(mCurSugCnt!=null && mCurSugCnt.getCount()>0 )
{
 mCurSugCnt.moveToFirst();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T09:43:39.563

如果您正在`NullPointerException`上车，那么您应该在访问之前`mCurSugCnt.moveToFirst();`设置某种条件来检查是否`Cursor mCurSugCnt`为**Null 。**

喜欢：

```
private void fillSugCntData(String cnt) {
         mCurSugCnt = mDb.fetchCntNotes(cnt);
         if(mCurSugCnt != null && mCurSugCnt.getCount() > 0)
         {
            mCurSugCnt.moveToFirst();
         }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-16T07:37:11.437

检查你的代码

```
Cursor appfinlist=null; 
Cursor temp=mDb.query(CNT_TABLE, new String[]{KEY_ROWID}, KEY_CNTNM + "=\"" + cnt + "\"", null, null , null, null); 
```

如果没有找到记录，在你的块之后

```
if(temp.moveToFirst()){
    ....
} 
```

您将 null "appfinlist" 返回给 mCurSugCnt

```
return appfinlist; 
```

这就是为什么你得到 Nullpointer 异常，如果你调用查询方法来获取光标，通常它不会返回 null 对象

# dynamic - 使用 Nginx 将动态生成的文件作为静态文件提供服务

> ID：14099942
> 
> 赞同：3
> 
> 时间：2012-12-31T09:41:29.860
> 
> 标签：dynamic, static, nginx, php

Nginx 擅长提供静态文件，所以我想知道是否可以将动态生成的文件作为静态文件提供服务？

例如云，我们使用[PHP Minify](http://code.google.com/p/minify/)在 Nginx 后面的 PHP-FPM 上组合 CSS 和 JS 文件，并几乎像任何静态文件一样为它们提供服务，可能带有一些版本控制和缓存。

因此，它的考虑和行为更像是静态文件而不是动态文件。我知道这听起来更像是缓存，但这就是 Nginx 最好的服务器静态文件的方式吗？

# vb.net - WebMatrix 嵌套 WebGrid VB 代码

> ID：14099943
> 
> 赞同：1
> 
> 时间：2012-12-31T09:41:32.713
> 
> 标签：vb.net, razor, webmatrix, webgrid, nested

我查看了以下两个帖子中的代码：

1.  [剃刀嵌套 webgrid 中](https://stackoverflow.com/questions/7947072/formatting-in-razor-nested-webgrid)的格式，由 nemesv 于 2011 年 10 月回复，

2.  [Razor Nested WebGrid](https://stackoverflow.com/questions/5732736/razor-nested-webgrid)，Chad Moran 于 2011 年 4 月回复。

他们似乎都接近我的问题，但我相信代码是基于 C# 的，而且我很难将其转换为 VB。我也不确定他们是否正是我所在的位置。我对以下行特别困惑，因为两个等号和对 subGrid 的双重引用。

```
WebGrid subGrid = subGrid = new WebGrid(item.SubItems) 
```

我也不确定 topGrid 和 subGrid 是否只是通用名称，用于说明目的，或者它们是否是关键词。

作为一个非常相关的话题，我会提到我的网页项目中的这一点已经让我坚持了五年（我没有夸大其词 - 因为它，我刚刚停止了该项目的工作两年）。我已经尝试在 VWD 中使用 ASP，现在在 WebMatrix 中使用网格视图，我希望我不会再次失败。

**数据库记录**

字段：Publisher_Name、Publisher_City、Series_Published、No_of_Series

记录示例：Price Stern Sloan, Baltimore, JKLMNO, 6

**我计划的两个网格名称**

Publishers_Grid（顶部） Series_Grid（子）

**我想要做什么**

1.  对于字符串 JKLMNO 中的每个字符，访问第二个表，其中每个字母是该表中记录的主键。

2.  在第二个表中检索字段 Back_Cover_Image 的值，该值将是文件名，或者至少是文件名的唯一部分，用于显示图像。

3.  如果我使用部分唯一的文件名方法，请为图像构建完整的文件名。接着 -

4.  显示为第二个网络网格行，因此在记录示例中指向的图像将是 6 个图像。

因此，对于示例记录，我最终会得到如下内容（我使用 XX 代表图像）：-

```
Price Stern Sloan    Baltimore    XX  XX  XX  XX  XX  XX 
```

我当然希望我没有浪费我非常钦佩的专家的宝贵时间。我只是想实现一些对我来说似乎很简单的事情，30 年前我最初是一名 PL/1 程序员，并且是该语言中嵌套数组的出色用户，但我就是无法弄清楚其中的语法VB、Razor 和 WebMatrix。

我期待一些建设性的答案，请使用 VB。

**到目前为止我的 WebMatrix 页面**

```
@Code

    Layout = "~/Shared/Layouts/_Layout.vbhtml"

     Dim HWB_Database As Database = Database.Open("How_and_Why_Wonder_Books")
     Dim HWB_Publishers_All_sqlCommand = "SELECT * FROM Publishers ORDER BY Publisher_Code"
     Dim Publishers_Data = HWB_Database.Query(HWB_Publishers_All_sqlCommand)
     Dim Publishers_Grid = New WebGrid(Publishers_Data)

End Code

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>How and Why Wonder Books - Publishers</title>
    </head>
    <body>
        <div style="margin-left: 100px">
         <p  style="Width: 1020px; border-width: 1px" class="InstructionsHeader">
          Click on a publisher to see the list of titles produced under that imprint, click on a thumbnail to see details of that series type.
         </p>
        </div>
     <br>               
     <br>               
        <div id="Publishers_Grid_Display">
         @Publishers_Grid.GetHtml(columns:= Publishers_Grid.Columns(
                                                                     Publishers_Grid.Column("Publisher_Name"),
                                                         Publishers_Grid.Column("Place_of_Publication"),
                                                      Publishers_Grid.Column("Series_Published")
                                                      )
        )
        </div> 
```

谢谢你的提示和鼓励。

# mysql - 连接子句未显示所有结果

> ID：14099946
> 
> 赞同：0
> 
> 时间：2012-12-31T09:41:57.430
> 
> 标签：mysql, sql, join, foreign-keys

这是一个非常奇怪的问题。我有 3 个表，所有表都与 agent_id 上的关键关系。

现在这个查询：

```
select DATE_FORMAT(created_on,"%d/%m/%y") as date
from logs
where agent_id = "18"
and log_status="1"
and date_format(created_on,"%m/%y") = "12/12"
group by YEAR(created_on), MONTH(created_on), DAY(created_on) desc 
```

完全按照它应该做的，它返回 3 行：

```
date
31/12/12
30/12/12
26/12/12 
```

但是，当我加入 2 个其他表时，它会排除`31/12/12`. 这是查询：

```
select  DATE_FORMAT(l.created_on,"%d/%m/%y") as date
from logs l
join logs_rewards lr on l.id = lr.related_log_id 
join agents a on a.id = l.agent_id 
where l.log_status = "1" 
and DATE_FORMAT(l.created_on,"%m/%y") = '12/12'
AND l.agent_id = '18' 
group by YEAR(l.created_on), MONTH(l.created_on), DAY(l.created_on) desc 
```

这返回：

```
date
30/12/12
26/12/12 
```

我不知道为什么会这样。有什么帮助吗？

我试过改变`AND l.agent_id = '18'`但`AND a.id = '18'`结果相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T09:46:15.643

也许您想用**LEFT JOIN替换****JOIN**以从日志中获取所有结果。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T09:49:41.953

这是因为数据并未映射到所有 3 个表中。

下面的查询将起作用

```
select  DATE_FORMAT(l.created_on,"%d/%m/%y") as date
from logs l
left join logs_rewards lr on l.id = lr.related_log_id 
left join agents a on a.id = l.agent_id 
where l.log_status = "1" 
and DATE_FORMAT(l.created_on,"%m/%y") = '12/12'
AND l.agent_id = '18' 
group by YEAR(l.created_on), MONTH(l.created_on), DAY(l.created_on) desc 
```**

# spring - TomcatInstrumentableClassLoader Servlet ClassNotFoundException

> ID：14099947
> 
> 赞同：2
> 
> 时间：2012-12-31T09:41:58.283
> 
> 标签：spring, tomcat, servlets, aop

我使用 Tomcat 6 作为我的 Web 应用程序的应用服务器，该应用程序使用 AOP 将 DAO 注入 servlet。

```
Dec 31, 2012 5:21:01 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: C:\Program Files (x86)\Java\jre6\bin;C:\Windows\Sun\Java\bin;C:\Windows\system32;C:\Windows;C:/Program Files (x86)/Java/jre7/bin/client;C:/Program Files (x86)/Java/jre7/bin;C:/Program Files (x86)/Java/jre7/lib/i386;C:\Program Files\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Common Files\Microsoft Shared\Windows Live;C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x86;C:\Program Files (x86)\Intel\OpenCL SDK\2.0\bin\x64;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files (x86)\Common Files\Acronis\SnapAPI\;C:\Program Files (x86)\Windows Live\Shared;C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\Tools\Binn\;C:\Program Files\Microsoft SQL Server\100\DTS\Binn\;C:\Program Files\TortoiseSVN\bin;C:\Program Files (x86)\MySQL\MySQL Server 5.5\bin;C:\Program Files (x86)\Java\jdk1.6.0_26\bin;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\eclipse-jee-indigo-SR2-win32\eclipse;;.
Dec 31, 2012 5:21:02 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:BISDAO' did not find a matching property.
Dec 31, 2012 5:21:02 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context/Loader} Setting property 'useSystemClassLoaderAsParent' to 'false' did not find a matching property.
Dec 31, 2012 5:21:02 PM org.apache.coyote.http11.Http11Protocol init
INFO: Initializing Coyote HTTP/1.1 on http-8080
Dec 31, 2012 5:21:02 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 288 ms
Dec 31, 2012 5:21:02 PM org.apache.catalina.core.StandardService start
INFO: Starting service Catalina
Dec 31, 2012 5:21:02 PM org.apache.catalina.core.StandardEngine start
INFO: Starting Servlet Engine: Apache Tomcat/6.0.35
Dec 31, 2012 5:21:02 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
17:21:02,477  INFO ContextLoader:272 - Root WebApplicationContext: initialization started
17:21:02,571  INFO XmlWebApplicationContext:510 - Refreshing Root WebApplicationContext: startup date [Mon Dec 31 17:21:02 SGT 2012]; root of context hierarchy
17:21:02,635  INFO XmlBeanDefinitionReader:315 - Loading XML bean definitions from ServletContext resource [/WEB-INF/applicationContext.xml]
17:21:02,967  INFO DefaultContextLoadTimeWeaver:89 - Using a reflective load-time weaver for class loader: org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader
17:21:03,614  INFO DefaultListableBeanFactory:577 - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@188c838: defining beans [org.springframework.context.config.internalBeanConfigurerAspect,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,genericDAOImpl,org.springframework.context.weaving.AspectJWeavingEnabler#0,loadTimeWeaver,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0,org.springframework.transaction.interceptor.TransactionInterceptor#0,org.springframework.transaction.config.internalTransactionAdvisor,org.springframework.cache.annotation.AnnotationCacheOperationSource#0,org.springframework.cache.interceptor.CacheInterceptor#0,org.springframework.cache.config.internalCacheAdvisor,org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor#0,dataSource,jdbcTemplate,genericDaoImpl,transactionManager,ehcache,cacheManager,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor]; root of factory hierarchy
17:21:03,944  INFO EhCacheManagerFactoryBean:100 - Initializing EHCache CacheManager
17:21:04,263  INFO MLog:80 - MLog clients using log4j logging.
17:21:04,330  INFO C3P0Registry:204 - Initializing c3p0-0.9.1.2 [built 21-May-2007 15:04:56; debug? true; trace: 10]
17:21:04,471  INFO ContextLoader:301 - Root WebApplicationContext: initialization completed in 1993 ms
Dec 31, 2012 5:21:04 PM org.apache.coyote.http11.Http11Protocol start
INFO: Starting Coyote HTTP/1.1 on http-8080
Dec 31, 2012 5:21:04 PM org.apache.jk.common.ChannelSocket init
INFO: JK: ajp13 listening on /0.0.0.0:8009
Dec 31, 2012 5:21:04 PM org.apache.jk.server.JkMain start
INFO: Jk running ID=0 time=0/11  config=null
Dec 31, 2012 5:21:04 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 2354 ms
Dec 31, 2012 5:21:08 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet GenericServlet as unavailable
Dec 31, 2012 5:21:08 PM org.apache.catalina.core.ApplicationContext log
SEVERE: Error loading org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader
WebappClassLoader
  context: /BISDAO
  delegate: false
  repositories:
    /WEB-INF/classes/
----------> Parent Classloader:
org.apache.catalina.loader.StandardClassLoader@3c0007
 GenericServlet
java.lang.ClassNotFoundException: GenericServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
Dec 31, 2012 5:21:08 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet GenericServlet
java.lang.ClassNotFoundException: GenericServlet
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1128)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source) 
```

下面是我的配置：

我已将 spring-instrument-tomcat-3.1.2.RELEASE.jar 放入 $CATALINA_HOME\lib 并在 META-INF 文件夹中有 context.xml。

```
<?xml version='1.0' encoding='utf-8'?>
<Context path="/BISDAO">
    <Loader loaderClass="org.springframework.instrument.classloading.tomcat.TomcatInstrumentableClassLoader" />
</Context> 
```

应用程序上下文.xml

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context" 
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-2.5.xsd
    http://www.springframework.org/schema/tx
    http://www.springframework.org/schema/tx/spring-tx-2.5.xsd">

    <!-- Enable @Required @Autowired @PreDestroy @PostConstruct @Resource -->
    <context:annotation-config />

    <!-- Scan class file in class path for annotated component -> @Component, @Repository, @Service, and @Controller  -->
    <context:component-scan base-package="com.breeze.bis.core.service.jdbcTemplate" />

    <!-- Enable load time weaving for @Configurable -->
    <context:load-time-weaver aspectj-weaving="autodetect" />

    <!--  -->
    <tx:annotation-driven proxy-target-class="false" transaction-manager="transactionManager"/>

    <!-- ==================================================================================================== -->

    <!-- Alternate method to enable @Autowired -->
    <bean class="org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor"/>

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
        <property name="jdbcUrl" value="jdbc:mysql://localhost:3306/vbossdb" />
        <property name="driverClass" value="com.mysql.jdbc.Driver" />
        <property name="user" value="root" />
        <property name="password" value="root" />
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <constructor-arg type="javax.sql.DataSource" ref="dataSource"></constructor-arg>
    </bean>

    <bean id="genericDaoImpl" class="com.breeze.bis.core.service.jdbcTemplate.GenericDAOImpl">
        <property name="jdbcDao" ref="jdbcTemplate"></property> 
    </bean>

    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"></property> 
    </bean>
</beans> 
```

Servlet.java

```
@Configurable
public class GenericServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    @Autowired
    GenericDAO dao;
} 
```

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T01:45:19.123

您的 servlet 不应该在默认包中。将其移入适当的包装中，它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T03:01:49.497

使用 web.xml 中的自定义包定义 servlet 类

# iphone - 为什么 NSIndexPath 不起作用？

> ID：14099949
> 
> 赞同：0
> 
> 时间：2012-12-31T09:42:10.170
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uikit

我做了一个简单的演示`UITableView`：当一个单元格被选中时，在单元格中显示一个勾号，最后一个选中的单元格将被取消选中，当在模拟器中运行时，第一次选择一个单元格时很好，而如果选择另一个单元格，应用程序将在没有任何日志信息的情况下被粉碎，我不知道发生了什么。这是我在编码中所做的：

**标题：**

```
#import <UIKit/UIKit.h>   
@interface ViewController2 : UIViewController<UITableViewDataSource,UITableViewDelegate>
{
    NSIndexPath * oldIndexPath;
    NSArray *list;
}
@property(retain,nonatomic)NSIndexPath *oldIndexPath;
@property(strong,nonatomic)NSArray *list;
@end 
```

**执行：**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];

    if(oldIndexPath == nil){
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    }else{
        UITableViewCell * oldCell = [tableView cellForRowAtIndexPath:oldIndexPath];
        oldCell.accessoryType = UITableViewCellAccessoryNone;
    }
    oldIndexPath = indexPath;
} 
```

任何帮助表示赞赏，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:54:18.167

始终通过 访问您的属性`self.`，不要直接访问 ivar。通过直接分配，您绕过了访问器方法中使用的任何内存管理，并且当您稍后使用该值时，它已被释放。

在当前版本的 Xcode 中，您不需要声明 ivars 来支持属性或使用 synthesize。这可以防止您不小心直接访问 ivars。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T10:00:27.187

试试这个，希望它对你有用。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath

{

UITableViewCell * cell = [tableView cellForRowAtIndexPath:indexPath];

if(self.oldIndexPath != nil)

{

    UITableViewCell * oldCell = [tableView cellForRowAtIndexPath:self.oldIndexPath];
    oldCell.accessoryType = UITableViewCellAccessoryNone;
}

cell.accessoryType = UITableViewCellAccessoryCheckmark;

self.oldIndexPath = indexPath; 
```

}

# testing - c# 如何从配置文件中选择测试或产品类

> ID：14099955
> 
> 赞同：0
> 
> 时间：2012-12-31T09:42:41.217
> 
> 标签：testing, cloud

我已经建立了一个月的云项目。我的问题是：

我有 2 个类可以连接到 IBM Web 服务。第一课是主课，第二课是测试课。我在配置文件中为 appSetting 设置了一个键值。

如果 configFile 中的值为“TEST”，则项目将使用测试类，如果值为“PROD”，则项目将使用主类。当我更改配置中的值时，我不会到处更改。

我的经理给了我使用“界面”的建议，但我不明白。

我怎样才能基本解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T09:50:53.407

您的测试类和产品类都可以实现上述接口。如果您需要使用在配置文件中选择要使用的类的方法，最好创建一个返回正确接口实现的数据工厂类。数据工厂读取配置文件并根据应用设置中的值返回实现接口的正确类。

在 C# 中执行此操作的示例（该概念在其他 oo 语言中也是相同的）：

从调用类：

`SomethingFactory factory = new SomethingFactory(); ISomething testOrProdObj = factory.GetCorrectImplementation(); var result = testOrProdObj.MyMethod();`

在工厂类中：

`public class SomethingFactory { public ISomething GetCorrectImplementation() { //Do a check in appsettings to decide which class (TESTSomething or PRODSomething) to instantiate and return } }`

接口的实现

`public class TESTSomething : ISomething`

或者

`public class PRODSomething : ISomething`

# .htaccess - 使用低分辨率版本重定向热链接图像

> ID：14099965
> 
> 赞同：0
> 
> 时间：2012-12-31T09:43:10.750
> 
> 标签：.htaccess, mod-rewrite, redirect, hotlinking

我在一家数字小工具制造商的网站上工作。产品图片来自数百个博客和论坛的热链接。这导致了带宽问题。

我们想用低分辨率版本替换所有热链接图像，使用 .htaccess

表示如果热链接的图像路径是

```
http://www.example.com/products/gadget123/gadget123.png 
```

我们想将它重定向到

```
http://www.example.com/images/low-res/gadget123.png 
```

热链接图像路径不同，这意味着它们可能来自任何目录的子目录。

例如

```
/images/products/abc/gadget_abc200.jpg
/products/images/abc/gadgetabc5155_packing.png
/downloads/brochures/abc2012/abc2012_user_guide.jpg

etc... 
```

但所有低分辨率图像都将在

```
http://www.example.com/images/low-res/ 
```

目录，并且它们的名称将与其高分辨率版本相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T11:25:46.347

尝试添加这个：

```
RewriteEngine on

RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^(.*?)example\.com(/.*)?$ [NC]
RewriteRule   ^images/products/.+/(.+).png$ images/low-res/$1.png  [L]

RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^(.*?)example\.com(/.*)?$ [NC]
RewriteRule   ^images/products/.+/(.+).png$ images/low-res/$1.png  [L]

RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !^(.*?)example\.com(/.*)?$ [NC]
RewriteRule   ^downloads/brochures/.+/(.+).jpg$ images/low-res/$1.jpg  [L] 
```

此规则查找请求是来自您的站点还是直接来自第三方。然后重写请求。

# php - 将 3 张具有透明度的图像组合在一起

> ID：14099966
> 
> 赞同：2
> 
> 时间：2012-12-31T09:43:11.260
> 
> 标签：php, image-processing

我正在做这个项目，我想将 3 张图像合二为一。

到目前为止有效的是使每个图像（jpg）透明。但是在将它们合并成一个新的 png 图像后，透明度就消失了。

这是代码：

```
function CreateMyCoolOutfitBaby () {

    $Outfitwidth = 250;
    $Outfitheight = 350;

    $newoutfit = imagecreatetruecolor($Outfitwidth, $Outfitheight); // create empty new image

    $dress = imagecreatefromstring(file_get_contents("http://images180.affili.net/001089/c/bb9c33888aae07d839b6724e31f462bc.jpg"));
    imagealphablending($dress, true);
    $white = imagecolorallocate($dress, 255, 255, 255);
    imagecolortransparent($dress, $white);

    $bag = imagecreatefromstring(file_get_contents("http://images180.affili.net/000698/6/40afc9ed65a94177635d1c7675fd3756.jpg"));
    imagealphablending($bag, true);
    $white = imagecolorallocate($bag, 255, 255, 255);
    imagecolortransparent($bag, $white);

    $shoe = imagecreatefromstring(file_get_contents("http://images180.affili.net/000389/4/4482beed9a949f895debe13d9dd28704.jpg"));
    imagealphablending($shoe, true);
    $white = imagecolorallocate($shoe, 255, 255, 255);
    imagecolortransparent($shoe, $white);

    imagealphablending($newoutfit,true); //on each new layer.

    // UN-COMMENT THIS PARAGRAPH TO SEE SINGLE FILES BEING TRANSPARENT
    //header('Content-Type: image/png');
    //imagepng($dress); // output to the browser
    //imagepng($bag); // output to the browser
    //imagepng($shoe); // output to the browser

    // WORKS TILL HERE :)

    // get with and height from images
    $Dresswidth = imagesx($dress);  $Bagwidth = imagesx($bag);  $Shoewidth = imagesx($shoe);    
    $Dressheight = imagesy($dress); $Bagheight = imagesy($bag); $Shoeheight = imagesy($shoe);

    // Calc Dress Position (middle)
    $DressPosWidth  = ( ( $Outfitwidth / 2 )  - ( $Dresswidth / 2 ) );
    $DressPosHeight = ( ( $Outfitheight / 2 ) - ( $Dressheight / 2 ) );
    // Calc Bag Position (right beside dress)
    $BagPosWidth    = ( ( $Outfitwidth / 2 )  - ( $Bagwidth / 2 ) + 60 ); // place bag in middle but more to the right
    $BagPosHeight = ( ( $Outfitheight / 2 ) - ( $Bagheight / 2 ) );
    // Calc Shoe Position (middle under dress)
    $ShoePosWidth   = ( ( $Outfitwidth / 2 )  - ( $Shoewidth / 2 ) );
    $ShoePosHeight = ( ( $Outfitheight / 2 ) - ( $Shoeheight / 2 ) + 100); // place further down

    // merge images together
    imagecopy($newoutfit,$dress,$DressPosWidth,$DressPosHeight,0,0,$Dresswidth,$Dressheight);
    imagealphablending($newoutfit,true);
    imagecopy($newoutfit,$bag,$BagPosWidth,$BagPosHeight,0,0,$Bagwidth,$Bagheight);
    imagealphablending($newoutfit,true);
    imagecopy($newoutfit,$shoe,$ShoePosWidth,$ShoePosHeight,0,0,$Shoewidth,$Shoeheight);
    imagealphablending($newoutfit,true);

    // make sure alpha is saved
    imagesavealpha($newoutfit, true);
    imagealphablending($newoutfit, true);

    // output to browser
    header('Content-Type: image/png');
    imagepng($newoutfit); // output to the browser
    imagedestroy($newoutfit);
} 
```

所以单个图像透明度工作正常。就在 $newoutfit 推出时，我得到黑色背景，图像又回到白色背景......

我能做些什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T11:45:53.823

[使用imagecopymerge()](http://php.net/manual/en/function.imagecopymerge.php)修复了这个问题：

```
<?php

CreateMyCoolOutfitBaby ();

function CreateMyCoolOutfitBaby () {

    $Outfitwidth = 250;
    $Outfitheight = 350;

    $newoutfit = imagecreatetruecolor($Outfitwidth, $Outfitheight); // create empty new image
    imagealphablending($newoutfit, true);
    $black = imagecolorallocate($newoutfit, 0, 0, 0);imagecolortransparent($newoutfit, $black); // Making it transparent

    $dress = imagecreatefromstring(file_get_contents('http://example.com/dress.jpg'));
    imagealphablending($dress, true);
    $white = imagecolorallocate($dress, 255, 255, 255);
    imagecolortransparent($dress, $white);

    $bag = imagecreatefromstring(file_get_contents('http://example.com/bag.jpg'));
    imagealphablending($bag, true);
    $white = imagecolorallocate($bag, 255, 255, 255);
    imagecolortransparent($bag, $white);

    $shoe = imagecreatefromstring(file_get_contents('http://example.com/shoe.jpg'));
    imagealphablending($shoe, true);
    $white = imagecolorallocate($shoe, 255, 255, 255);
    imagecolortransparent($shoe, $white);

    // get with and height from images
    $Dresswidth = imagesx($dress);  $Bagwidth = imagesx($bag);  $Shoewidth = imagesx($shoe);    
    $Dressheight = imagesy($dress); $Bagheight = imagesy($bag); $Shoeheight = imagesy($shoe);

    // Calc Dress Position (middle)
    $DressPosWidth  = ( ( $Outfitwidth / 2 )  - ( $Dresswidth / 2 ) );
    $DressPosHeight = ( ( $Outfitheight / 2 ) - ( $Dressheight / 2 ) );
    // Calc Bag Position (right beside dress)
    $BagPosWidth    = ( ( $Outfitwidth / 2 )  - ( $Bagwidth / 2 ) + 60 ); // place bag in middle but more to the right
    $BagPosHeight = ( ( $Outfitheight / 2 ) - ( $Bagheight / 2 ) );
    // Calc Shoe Position (middle under dress)
    $ShoePosWidth   = ( ( $Outfitwidth / 2 )  - ( $Shoewidth / 2 ) );
    $ShoePosHeight = ( ( $Outfitheight / 2 ) - ( $Shoeheight / 2 ) + 100); // place further down

    // merge images together
    imagecopymerge($newoutfit,$dress,$DressPosWidth,$DressPosHeight,0,0,$Dresswidth,$Dressheight,100);
    imagealphablending($newoutfit,true);

    imagecopymerge($newoutfit,$bag,$BagPosWidth,$BagPosHeight,0,0,$Bagwidth,$Bagheight,100);
    imagealphablending($newoutfit,true);

    imagecopymerge($newoutfit,$shoe,$ShoePosWidth,$ShoePosHeight,0,0,$Shoewidth,$Shoeheight,100);
    imagealphablending($newoutfit,true);

    header('Content-Type: image/png');
    imagepng($newoutfit); // output to the browser
    imagedestroy($newoutfit);
} 
```

# c - malloc 的最佳实践是什么？

> ID：14099967
> 
> 赞同：6
> 
> 时间：2012-12-31T09:43:20.907
> 
> 标签：c, char, malloc

如果以下任何一项是正确的并且被认为是创建能够容纳 100 个字符的 char 字符串的最佳实践，哪一项是正确的？

```
char * charStringA = malloc(100);
char * charStringB = malloc(sizeof(char)*100);
char * charStringC = (char*)malloc(100);
char * charStringD = (char*)malloc(sizeof(char)*100); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-31T09:46:21.167

```
char * charStringA = malloc(100);
char * charStringB = malloc(sizeof(char)*100); 
```

两者同样正确。
在此评估中应考虑的两个重点是：

1.  C 标准保证大小为`char`一个字节。
2.  可以将`void`指针分配给任何指针，而无需在 C 中进行显式强制转换，并且强制转换是不必要的。由于以下原因，强制转换的返回值`malloc`被认为是一种不好的做法：

**[强制转换 malloc 的返回值有什么问题？](http://c-faq.com/malloc/mallocnocast.html)**

* * *

上述答案适用于 OP 中提到的选项。更好的做法是在不对任何*类型*`sizeof`的大小做任何假设的情况下使用。这就是存在的原因和目的。在这种情况下，最佳做法是使用：*`sizeof`*

 *```
char * charStringB = malloc(sizeof(*charStringB)*100); 
```

请注意，这`*charStringB`与 相同，`char`但这为您提供了灵活性，如果您想在将来更改*类型*，那么您需要记住进行修改的地方数量就会减少。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-31T09:52:25.083

最一般的形式是：

```
#include <stdio.h>

typedef struct { int a; char b[55]; } Thing;

Thing *p;
p = malloc (100 * sizeof *p); 
```

这与 的实际定义无关`Thing`，因此如果您将该行“重用”为

```
Typedef { float water; int fire; } OtherThing;
OtherThing *p;
p = malloc (100 * sizeof *p); 
```

它仍将按预期运行。

原始案例将产生：

```
char *p;
p = malloc (100 * sizeof *p); 
```

，`sizeof *p`当然是多余的（`sizeof(char) == 1`根据定义），但它不会受到伤害。

顺便说一句：这个答案主要是关于风格。从语法上讲，所有变体都是可以接受的，只要您包含 stdlib.h（或手动引入 malloc() 的原型）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T09:45:39.810

第一个，因为 char 始终是一个字节，所以 malloc 的强制转换仅在 c++ 中是必需的*

# javascript - 如何删除 jquery json 弹出窗口？

> ID：14099969
> 
> 赞同：-3
> 
> 时间：2012-12-31T09:43:31.890
> 
> 标签：javascript, jquery, json

我将在 html 页面中添加 jquery json 数据的位置。所有 HTML 页面组件都消失了，只在页面左上方显示 json 数据：

```
$.getJSON('http://api.wipmania.com/jsonp?callback=?', 
    function (data) { 
        document.write('Latitude: ' + data.latitude + '\nLongitude: ' + data.longitude + '\nCountry: ' + data.address.country); 
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:05:47.243

阅读[文档](https://developer.mozilla.org/en-US/docs/DOM/document.write)，`document.write()`我们发现：

> 将文本字符串写入由 `document.open()`. [...]
> 写入已加载但未调用的文档`document.open()`将自动执行 `document.open`调用

...和文档[说](https://developer.mozilla.org/en-US/docs/DOM/document.open)`document.open()`：

> document.open() 方法打开一个文档进行写入。[...]
> 如果目标中存在文档，则**此方法将其清除**

使用`document.write()`注入原始 HTML 可能是创建动态文档最烦人的工具。您正在使用 jQuery——利用它的 DOM 操作工具。

# unit-testing - 如何将“全栈”功能分解为验收、集成和单元测试？

> ID：14099970
> 
> 赞同：5
> 
> 时间：2012-12-31T09:43:36.533
> 
> 标签：unit-testing, tdd, bdd, watin, mspec

我是行为驱动开发的新手，我正在努力学习它。我使用 MSpec & Watin 进行验收测试，使用 MSpec 进行 ASP.Net MVC 4 的单元测试。我有一个简单的用户注册场景。

> 当用户输入用户名、密码、电子邮件等并单击注册按钮时
> 它应该验证电子邮件地址
> 它应该检查用户名是否已经存在
> 它应该注册用户
> 它应该发送一封欢迎电子邮件
> 它应该重定向到主页

有些我想测试的东西无法使用 Watin 进行测试，例如发送电子邮件、检查用户是否存在等。这些将是控制器测试的一部分。这是否意味着我的验收测试只会是当用户注册时他应该被重定向到主页？如何将整个过程分解为测试？

如果这些检查是在各种测试和不同级别中实现的，那么我如何获得 MSpec 可用的摘要报告，我已经实现了所有功能？我对人们如何打破这些任务以及他们如何获得集体报告等感到有些困惑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-01T21:24:54.253

首先从验收测试开始，**以推动您的开发**（由外而内）。您需要编写以下场景：

**用户尝试使用无效的电子邮件进行注册**

这是一个很容易

**用户尝试使用已经存在的登录名进行注册**

对于这个，您需要能够将您的应用程序插入**内存存储库**（我建议使用**IoC 容器**来轻松配置您的应用程序）。这样，您将首先使用您的应用程序注册一个“Bob”用户，然后看看当您尝试使用该登录名再次注册时会发生什么。所以基本上解决方案是使用**存储库模式**，并且有一个内存实现而不是你真正的数据库实现。我在这里假设您的数据库不包含任何业务逻辑，否则使用真实数据库会更安全，以便您可以在数据库中执行业务规则。这在遗留系统中很常见。内存存储库的优点是您的测试将运行得更快，并且您不需要编写复杂的拆解代码。使用真正的数据库，您需要确保在每次测试之间清理数据库以确保测试独立性，并且使用数据库运行测试要慢得多。

**用户注册成功**

对于这个，您需要检查重定向，这很容易。对于电子邮件部分，agian，您需要使用**Adapter 模式**将您的应用程序插入存根。您可以像**内存队列**一样实现存根，这样您就可以断言您的应用程序是否正确发送了电子邮件。

**关于单元测试**

如果您打算自己编写电子邮件语法验证，我建议您自行对该部分进行单元测试。

正如 Augusto 所说，[Growing Object-Oriented Software, Guided by Tests](http://www.bookdepository.co.uk/Growing-Object-Oriented-Software-Guided-by-Tests-Steve-Freeman/9780321503626)是学习 ATDD 和 TDD 的好书。

一般策略是始终从高级验收测试开始，以推动您的开发。模拟无法在内存中运行的外部服务或无法在本地安装或不易测试的服务。有意义时使用 TDD 进行单元测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-31T09:55:21.020

您的单元测试将包括以下内容：

*   如果未给出用户名，则测试注册用户的代码是否引发异常。
*   测试验证密码的代码是否有效。

基本上采用小单元代码并对其进行测试。

对于验收测试，您将其提升到一个新的水平并集成这些功能以确保它们正常工作。因此，您可以进行验收测试来检查整个注册功能：

```
Given I am a new user
When I complete the register user form
Then I will be redirected to the home page

Given I am a new user
When I complete the register user form
And I have not entered a valid password
Then I will be shown an error message 
```

或者那个地区的东西。

就我个人而言，我不太喜欢编写测试用户界面的测试，因为 UI 可能会经常更改（这意味着您必须修复被这些更改破坏的测试）；另外，我觉得我通过编写单元测试和验收测试来重复工作。

但是，当涉及到您的客户时，ATDD 可以使您受益，因为您可以与他们交流您是如何测试应用程序的。向他们展示 BDD 测试（书面文本）比`public void ValidatePassword_PasswordNotValid_ExpectFalse`.

这是您需要尝试 ATDD 以了解您是否会从中受益的场景之一。

# mysql - 查询执行时间过长

> ID：14099976
> 
> 赞同：1
> 
> 时间：2012-12-31T09:44:13.113
> 
> 标签：mysql, sql, sql-server, query-performance

1.  我的查询大约需要 2800 秒才能获得输出。
2.  我们也有索引，但没有运气。
3.  我的目标是需要在 2 到 3 秒内获得输出。
4.  如果可能，请重新编写查询。

    ```
    query:
     select ttl.id, ttl.url, ttl.canonical_url_id  
     from t_target_url ttl  
     where ttl.own_domain_id=476 and ttl.type != 10  
     order by ttl.week_entrances desc  
     limit 550000;

    Explain Plan:
    +----+-------------+-------+------+--------------------------------+---------------------------+---------+-------+----------+-----------------------------+
    | id | select_type | table | type | possible_keys                  | key                       | key_len | ref   | rows     | Extra                       |
    +----+-------------+-------+------+--------------------------------+---------------------------+---------+-------+----------+-----------------------------+
    |  1 | SIMPLE      | ttl   | ref  | own_domain_id_type_status,type | own_domain_id_type_status | 5       | const | 57871959 | Using where; Using filesort |
    +----+-------------+-------+------+--------------------------------+---------------------------+---------+-------+----------+-----------------------------+
    1 row in set (0.80 sec)

    mysql> show create table t_target_url\G
    *************************** 1\. row ***************************
           Table: t_target_url
    Create Table: CREATE TABLE `t_target_url` (
      `id` int(11) NOT NULL AUTO_INCREMENT,
      `own_domain_id` int(11) DEFAULT NULL,
      `url` varchar(2000) NOT NULL,
      `create_date` datetime DEFAULT NULL,
      `friendly_name` varchar(255) DEFAULT NULL,
      `section_name_id` int(11) DEFAULT NULL,
      `type` int(11) DEFAULT NULL,
      `status` int(11) DEFAULT NULL,
      `week_entrances` int(11) DEFAULT NULL COMMENT 'last 7 days entrances',
      `week_bounces` int(11) DEFAULT NULL COMMENT 'last 7 days bounce',
      `canonical_url_id` int(11) DEFAULT NULL COMMENT 'the primary URL ID, NOT allow canonical of canonical',
      KEY `id` (`id`),
      KEY `urlindex` (`url`(255)),
      KEY `own_domain_id_type_status` (`own_domain_id`,`type`,`status`),
      KEY `canonical_url_id` (`canonical_url_id`),
      KEY `type` (`type`,`status`)
    ) ENGINE=InnoDB AUTO_INCREMENT=227984392 DEFAULT CHARSET=utf8
    /*!50100 PARTITION BY RANGE (`type`)
    (PARTITION p0 VALUES LESS THAN (0) ENGINE = InnoDB,
     PARTITION p1 VALUES LESS THAN (1) ENGINE = InnoDB,
     PARTITION p2 VALUES LESS THAN (2) ENGINE = InnoDB,
     PARTITION pEOW VALUES LESS THAN MAXVALUE ENGINE = InnoDB) */
    1 row in set (0.00 sec) 
    ```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-31T10:12:11.627

您的查询本身看起来不错，但是 order by 子句和可能的 50 万条记录可能是您的杀手锏。我会添加一个索引来帮助优化该部分

( own_domain_id, week_entrances, type )

所以这样，你首先点击你的关键键“own_domain_id”，然后让一切都井井有条。该类型是 != 10，因此是任何其他类型，如果它位于第二个索引位置，似乎会导致更多问题。

评论反馈。

为简单起见，每个 where 子句的关键键是“ttl.own_domain_id=476”。您只关心域 ID 476 的数据。现在，假设您有 15 个“类型”，它们跨越所有不同的周入口，例如

```
own_domain_id   type   week_entrances
476             1      1000
476             1      1700
476             1      850
476             2      15000
476             2      4250
476             2      12000
476             7      2500
476             7      5300
476            10      1250
476            10      4100
476            12      8000
476            12      3150
476            15      5750
476            15      27000 
```

这显然不是为了扩展您的 50 万容量，而是显示示例数据。通过具有类型！= 10，它仍然必须清除 id=476 的所有记录，但仅排除类型 = 10 的记录。然后它必须按周入口将所有数据按顺序排列，这将花费更多时间。通过将星期入口作为第二个位置的键的一部分，然后是类型，数据将能够在返回的结果集中以正确的顺序进行优化。但是，当它达到“！= 10”的类型时，它仍然会在遇到它们时快速跳过它们。这是每个上述样本的修订索引数据。

```
own_domain_id   week_entrances  type   
476             850             1
476             1000            1
476             1250            10
476             1700            1
476             2500            7
476             3150            12
476             4100            10
476             4250            2
476             5300            7
476             5750            15
476             8000            12
476             12000           2
476             15000           2
476             27000           15 
```

因此，正如您所看到的，数据已经根据索引进行了预排序，并且应用 DESCENDING 顺序对引擎来说没有问题，只需以相反的顺序提取记录并在找到 10 时跳过它们。

这有帮助吗？

每个 Salman 的附加评论反馈。

以另一种方式考虑一家拥有 10 个不同分店的商店，每个分店都有自己的销售额。交易收据存储在盒子中（字面意思）。想一想如果您要查找给定日期的所有交易，您将如何查看这些框。

```
Box 1 = Store #1 only, and transactions sorted by date
Box 2 = Store #2 only, and transactions sorted by date
Box ...
Box 10 = Store #10 only, sorted by date. 
```

您必须通过 10 个盒子，在给定日期全部取出...或者在原始问题中，除了一个日期之外的每笔交易，并且您希望它们按交易金额按美元顺序排列，无论日期如何...什么可能是一团糟。

如果您对盒子进行了预先分组，无论商店如何

```
Box 1 = Sales from $1 - $1000 (all properly sorted by amount)
Box 2 = Sales from $1001 - $2000 (properly sorted)
Box ...
Box 10... same... 
```

您仍然必须检查所有框并将它们按顺序排列，但至少，当您查看交易时，您可以丢弃一个以忽略日期排除。

索引有助于预先组织引擎如何根据您的标准最好地通过它们。

# jquery - jquery比较函数然后刷新

> ID：14099981
> 
> 赞同：1
> 
> 时间：2012-12-31T09:44:38.550
> 
> 标签：jquery, function, compare, refresh

我有以下代码`pollastation`每 30 秒重新加载一次函数。

```
jQuery(document).ready(function() {
    pollstation();
    setInterval(pollstation, 30000);
}); 
```

我想要实现的是让这段代码每 30 秒检查一次以比较功能`pollstation`，如果`pollstation`内容相同则不刷新，如果不同则刷新。

我必须告诉你，我只知道基础知识`JavaScript`。

我搜索了谷歌，并尝试使用下面的代码，但没有奏效。

```
jQuery(document).ready(function() {
    pollstation();
   pollstation.load(pollstation + Math.random());
   var refreshId = setInterval(function () {
         pollstation.load(pollstation + Math.random());
      }, 30000);
   $.ajaxSetup({
      cache : false
   });   
}); 
```

# iphone - UIView：在多个视图问题上方插入子视图

> ID：14099986
> 
> 赞同：0
> 
> 时间：2012-12-31T09:44:57.407
> 
> 标签：iphone, objective-c, uiview, ios6

实际上我有多个表视图，我想在这两个表视图上方添加临时视图。

这件事对我不起作用。

我也应用了这个东西：

```
[self.view bringSubviewToFront:_viewTempRight]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:52:24.320

如果您以这种方式使用它，bringSubviewToFront 总是有效的：

```
[parentView bringSubviewToFront:childView]; 
```

如果 then 也不起作用，请尝试删除您想要在顶部的视图，然后再次添加为子视图

# google-apps-script - 在谷歌网站中显示域用户名

> ID：14099987
> 
> 赞同：0
> 
> 时间：2012-12-31T09:44:59.297
> 
> 标签：google-apps-script, google-sites

这可能是非常基本的，但我想创建一个将`welcome to ...google domain username`在谷歌网站上显示的网络应用程序脚本。

到目前为止，诸如此类的尝试都失败了。

```
// The code below will display the email address of the person running the script
Browser.msgBox(Session.getActiveUser().getEmail()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T17:48:06.230

您可以在[基类描述的文档中找到它](https://developers.google.com/apps-script/service_base)

你可以试试以下

```
app.add(app.createLabel('Active user login id:' +  Session.getActiveUser().getEmail()));
app.add(app.createLabel('Efective user login id:' +  Session.getEffectiveUser().getEmail())); 
```

也许是把这些功能放在[html 服务](https://developers.google.com/apps-script/html_service)中的想法。

[工作 doGet() 示例](https://sites.google.com/a/lagaroo.com.br/dev-test/home/dev-test-user-info)

# javascript - 数组中的日期

> ID：14099999
> 
> 赞同：0
> 
> 时间：2012-12-31T09:45:48.240
> 
> 标签：javascript, arrays

我在几天内尝试获取日期数组的最后一个和第一个元素。

我的 xml 看起来像这样：

```
<markers>
<marker id="1" timestamp="12/31/2012 04:07:10"/>
<marker id="2" timestamp="12/31/2012 04:07:12"/>
<marker id="3" timestamp="12/31/2012 04:07:14"/>
<marker id="4" timestamp="12/31/2012 04:15:16"/>
</markers> 
```

我可以在循环中获取日期，但是当我尝试获取第一个和最后一个时，我不能。结果是“未定义”消息。

代码是下一个：

```
 downloadUrl("myXml.asp", function(data) {
    var xml = xmlParse(data);

    var markersPath = xml.documentElement.getElementsByTagName("marker");    
    var path = []; 
    for (var i = 0; i < markersPath.length; i++) {
       var a = markersPath[i].getAttribute("timestamp"); 

       var b = new Date(a[a.length-1]); //last element of array
       var c = new Date(a[0]); //first element of array
    }//finish loop
   alert(b); // the message is an Invalid date
   alert(c); // the message is an Invalid date
}); //end download url 
```

如果有人可以提供帮助，我将不胜感激。

最好的问候和新年快乐！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-31T10:12:51.917

您可以简单地获得所需的结果，而无需遍历数组：

```
var markersPath = xml.documentElement.getElementsByTagName("marker");
var a = markersPath[0].getAttribute("timestamp");
var b = markersPath[markersPath.length - 1].getAttribute("timestamp"); 
```